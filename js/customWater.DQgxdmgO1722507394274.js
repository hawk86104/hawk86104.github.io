import{a6 as t,a3 as n}from"./three.Brogx0uK1722507394274.js";import{$ as e,T as r,d as a,x as o}from"./@tresjs.bNNpPzYW1722507394274.js";import{f as i,c as s}from"./index.DifwtWix1722507394274.js";import{C as l}from"./three-custom-shader-material.CeVv8ptL1722507394274.js";import"./object-hash.rImj7O_Q1722507394274.js";import"./@amap.B-BVafMU1722507394274.js";import"./glsl-tokenizer.D7fhDZQE1722507394274.js";import{p as c}from"./gl-noise.DGdRrr5z1722507394274.js";import{d as u,b as f,a1 as p,w as g,o as h,D as m,J as d,j as v,u as b,r as j,f as w,g as M,aj as y,ak as x,m as _,al as z}from"./@vue.CFXy4cc91722507394274.js";import{P as I}from"./tweakpane.BCjFYDHx1722507394274.js";import"./@vueuse.CY5GWLAn1722507394274.js";import"./@fesjs.HUfyfxyE1722507394274.js";import"./vue-router.B7QAPA1N1722507394274.js";import"./lodash-es.X8SAORSL1722507394274.js";import"./@qlin.BIlp8Yi21722507394274.js";import"./pinia.CScY4tX71722507394274.js";import"./vue-demi.Dq6ymT-81722507394274.js";import"./@babel.DOgRMOv71722507394274.js";import"./@floating-ui.B75jtkXD1722507394274.js";import"./@juggle.BnTvdTVm1722507394274.js";import"./chalk.B3MNILV41722507394274.js";/* empty css                                 */import"./iconify-icon.DK1S_nhj1722507394274.js";import"./@iconify.FaZrwldm1722507394274.js";import"./oimophysics.B0i2NtyE1722507394274.js";import"./three-stdlib.Da22DAq01722507394274.js";import"./@pmndrs.D9AmSQDC1722507394274.js";import"./three.quarks.DzFhgNNR1722507394274.js";import"./quarks.core.C7CDonSm1722507394274.js";import"./jszip.BxDgYeH81722507394274.js";import"./glsl-token-string.Bg9nzJXZ1722507394274.js";import"./glsl-token-functions.B8rjVA3n1722507394274.js";const S=H;!function(t,n){const e=H,r=O();for(;;)try{if(391090===parseInt(e(437))/1*(parseInt(e(457))/2)+-parseInt(e(482))/3+parseInt(e(441))/4+-parseInt(e(468))/5*(-parseInt(e(455))/6)+-parseInt(e(446))/7+parseInt(e(449))/8+-parseInt(e(467))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[H(490)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=H,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(465),"i"),r=P(t(470));n.test(r+t(476))&&e[t(459)](r+t(452))?P():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[H(490)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=H;let n;try{n=Function(t(483)+t(445)+");")()}catch(a){n=window}const e=n.console=n[t(489)]||{},r=[t(466),"warn",t(436),t(433),t(458),"table",t(480)];for(let o=0;o<r[t(485)];o++){const n=C[t(440)][t(481)].bind(C),a=r[o],i=e[a]||n;n[t(474)]=C[t(461)](C),n.toString=i[t(486)][t(461)](i),e[a]=n}}))();const k=[S(479)],B=["args"];function H(t,n){const e=O();return(H=function(t,n){return e[t-=433]})(t,n)}function O(){const t=["vertexShader","length","toString","material","dispose","console","apply","error","Flatshading","height","info","174548mSaAhm","Color","debu","constructor","991792UvlpaI","uTime","brightness","uHeight",'{}.constructor("return this")( )',"1602517fqLRqH","MeshPhysicalMaterial","while (true) {}","2033640wIstQR","DoubleSide","TresMesh","input","convertLinearToSRGB","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","4788wQedjP","waterHighlight","4SVAqAe","exception","test","counter","bind","#b3ffff","value","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","2895075YPRAlD","4185jOKfzM","tmRef","init","waterColor","#52a7f7","fragmentShader","__proto__","baseMaterial","chain","TresBoxGeometry","flatShading","rotation-x","trace","prototype","1732437zVJmcg","return (function() "];return(O=function(){return t})()}const G=u({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(472)},waterHighlight:{default:S(462)},brightness:{default:1},baseMaterial:{default:t[S(447)]}},setup(a){const o=S,i=a,s=f(null),u={vertex:o(454),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},j={uTime:{value:0},waterColor:{value:new(t[o(438)])(i[o(471)])[o(453)]()},waterHighlight:{value:new(t[o(438)])(i[o(456)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[o(443)]},uHeight:{value:i[o(435)]}},{onLoop:w}=e();return w((({elapsed:t})=>{const n=o;j[n(442)][n(463)]=-t/5})),p((()=>{const n=o;i[n(435)]&&(j[n(444)].value=i[n(435)]),i.waterColor&&(j[n(471)].value=new(t[n(438)])(i[n(471)])[n(453)]()),i.waterHighlight&&(j[n(456)].value=new(t[n(438)])(i[n(456)])[n(453)]()),i[n(443)]&&(j[n(443)][n(463)]=i[n(443)])})),g((()=>i[o(434)]),(t=>{const n=o;s[n(463)][n(487)].needsUpdate=!0})),g((()=>i.baseMaterial),(n=>{const e=o,r=new l({baseMaterial:t[n],vertexShader:c(u.vertex),fragmentShader:u.fragment,uniforms:j,flatShading:i.Flatshading,side:t[e(450)],roughness:.2,metalness:.1,silent:!0});s[e(463)][e(487)][e(488)](),s[e(463)][e(487)]=r})),(e,a)=>{const i=o;return h(),m(i(451),{ref_key:i(469),ref:s,"rotation-x":-Math.PI/2},[d(i(477),{args:[5,5,e.height,64,64,1]},null,8,B),v(b(r),{baseMaterial:n,vertexShader:b(c)(u.vertex),fragmentShader:u.fragment,uniforms:j,side:t[i(450)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[i(475),i(484),i(473),"side",i(478)])],8,k)}}});function P(t){function n(t){const e=H;if("string"==typeof t)return function(t){}[e(440)](e(448)).apply(e(460));1!==(""+t/t)[e(485)]||t%20==0?function(){return!0}.constructor(e(439)+"gger")[e(464)]("action"):function(){return!1}[e(440)]("debugger").apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const W=A;function D(){const t=["label","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","#3a78a2","neg-x.jpg","while (true) {}","warn","input","brightness","counter","function *\\( *\\)","23821920OaNmXy","__proto__","addBinding","20965kHktbB","2289WYxmgY","755838IHsFBP","value","TresDirectionalLight","#b3ffff","1270189luImzr","constructor","debu","水体颜色","MeshDepthMaterial","MeshStandardMaterial","gger","MeshBasicMaterial","TresPerspectiveCamera","pos-x.jpg","Flatshading","baseMaterial","MeshPhongMaterial","ACESFilmicToneMapping","log","return (function() ","MeshLambertMaterial","apply","chain","neg-z.jpg","pos-z.jpg","string","#627179","stateObject","action","MeshPhysicalMaterial","bind","3668LDymOb","toString","MeshNormalMaterial","neg-y.jpg","3760DQgINg","list","console","14550Vngbho","init","target","test","TresAmbientLight","error","pos-y.jpg","length","customWater","9076950EKblZi","2210pzEyDt","change","MeshToonMaterial"];return(D=function(){return t})()}!function(t,n){const e=A,r=D();for(;;)try{if(707163===-parseInt(e(298))/1+-parseInt(e(294))/2+-parseInt(e(293))/3*(parseInt(e(259))/4)+parseInt(e(276))/5*(parseInt(e(266))/6)+-parseInt(e(292))/7*(parseInt(e(263))/8)+parseInt(e(275))/9+parseInt(e(289))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[A(249)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function A(t,n){const e=D();return(A=function(t,n){return e[t-=240]})(t,n)}!function(){F(this,(function(){const t=A,n=new RegExp(t(288)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$(t(267));n[t(269)](r+t(250))&&e[t(269)](r+t(285))?$():r("0")}))()}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[A(249)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();R(void 0,(function(){const t=A,n=function(){const t=A;let n;try{n=Function(t(247)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(265)]||{},r=[t(246),t(284),"info",t(271),"exception","table","trace"];for(let a=0;a<r[t(273)];a++){const n=R.constructor.prototype[t(258)](R),o=r[a],i=e[o]||n;n[t(290)]=R[t(258)](R),n[t(260)]=i[t(260)].bind(i),e[o]=n}}))();const N=d(W(240),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),L=d(W(270),{intensity:.5},null,-1),q=d(W(296),{position:[15,15,15],intensity:1},null,-1),E=u({__name:W(274),setup(n){const e=W,r=j({alpha:!0,toneMapping:t[e(245)],windowSize:!0,clearColor:10066329}),l=j({enableDamping:!0,autoRotate:!1}),c=j({cellSize:.6,cellThickness:1.1,cellColor:e(254),sectionColor:e(281),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=j({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:e(297),brightness:1,baseMaterial:e(257)}),f=new I;return f[e(291)](u,"height",{label:"高度",min:.1,max:5,step:.1}),f.addBinding(u,"waterColor",{label:e(301)}),f[e(291)](u,"waterHighlight",{label:"浪头颜色"}),f[e(291)](u,e(286),{label:"亮度",min:0,max:1,step:.01}),f.addBinding(u,"Flatshading",{label:e(242)}),f.addBlade({view:e(264),label:"材质",options:[{text:e(257),value:e(257)},{text:"MeshBasicMaterial",value:e(305)},{text:e(261),value:e(261)},{text:"MeshStandardMaterial",value:e(303)},{text:"MeshPhongMaterial",value:e(244)},{text:"MeshToonMaterial",value:e(278)},{text:e(248),value:e(248)},{text:e(302),value:e(302)}],value:u[e(243)]}),f.on(e(277),(t=>{const n=e;"材质"===t[n(268)][n(279)]&&(u[n(243)]=t[n(295)])})),(t,n)=>{const f=e;return h(),w(b(o),_(r,{"window-size":""}),{default:M((()=>[N,v(b(a),y(x(l)),null,16),L,q,v(G,y(x(u)),null,16),v(b(i),_({args:[3,3]},c,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:M((()=>[v(b(s),{files:[f(241),f(282),f(272),f(262),f(252),f(251)],path:f(280)})])),_:1}))])),_:1},16)}}});function $(t){function n(t){const e=A;if(typeof t===e(253))return function(t){}[e(299)](e(283))[e(249)](e(287));1!==(""+t/t)[e(273)]||t%20==0?function(){return!0}[e(299)](e(300)+"gger").call(e(256)):function(){return!1}[e(299)]("debu"+e(304))[e(249)](e(255)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as default};

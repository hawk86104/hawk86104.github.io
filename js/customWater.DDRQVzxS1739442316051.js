import{e as t,h as e,o as n,f as r}from"./@tresjs.4XV_x0mI1739442316051.js";import{a}from"./index.MAqtmckJ1739442316051.js";import"./index.9JeQRWdA1739442316051.js";import{_ as o,C as s,ai as i}from"./three.OosFxi571739442316051.js";import{z as l}from"./three-custom-shader-material.d7b09qIZ1739442316051.js";import{p as u}from"./gl-noise.BrVtymbx1739442316051.js";import{d as c,b as p,a2 as f,w as g,o as h,H as m,N as v,j as d,u as _,r as b,f as y,g as w,aj as j,ak as x,m as M,al as z}from"./@vue.NRI7TcgI1739442316051.js";import{P as C}from"./tweakpane.yDiyAAkA1739442316051.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.UakOeyq-1739442316051.js";import"./@vueuse.u4XqlOuT1739442316051.js";import"./three-stdlib.5JCQavfA1739442316051.js";import"./@pmndrs.uSiemGA_1739442316051.js";import"./object-hash.cS-r0IEj1739442316051.js";import"./@amap.VoZ91NZx1739442316051.js";import"./jszip.KhsC7S4k1739442316051.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.zu86ju0c1739442316051.js";import"./all.three.RcJo9D5E1739442316051.js";import"./oimophysics.x0jH7fze1739442316051.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.yYVd8oDx1739442316051.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ZJEBctPC1739442316051.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.HGLG62Bn1739442316051.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.0qTa8EUW1739442316051.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.WaK7yJQx1739442316051.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.uyvKW9zA1739442316051.js";const I=G;!function(t,e){const n=G,r=F();for(;;)try{if(521486===-parseInt(n(402))/1+parseInt(n(434))/2*(parseInt(n(416))/3)+-parseInt(n(465))/4*(-parseInt(n(433))/5)+parseInt(n(449))/6*(parseInt(n(439))/7)+-parseInt(n(420))/8+-parseInt(n(411))/9*(parseInt(n(464))/10)+parseInt(n(444))/11*(parseInt(n(447))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(458)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(t,e){const n=F();return(G=function(t,e){return n[t-=401]})(t,e)}!function(){S(this,(function(){const t=G,e=new RegExp(t(450)),n=new RegExp(t(460),"i"),r=D(t(470));e[t(423)](r+t(440))&&n[t(423)](r+t(446))?D():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=G,e=function(){const t=G;let e;try{e=Function("return (function() "+t(453)+");")()}catch(n){e=window}return e}(),n=e[t(432)]=e[t(432)]||{},r=[t(455),t(409),t(422),t(429),t(418),t(459),t(412)];for(let a=0;a<r[t(442)];a++){const e=H[t(417)].prototype[t(454)](H),o=r[a],s=n[o]||e;e[t(401)]=H[t(454)](H),e[t(441)]=s[t(441)].bind(s),n[o]=e}}))();const O=["rotation-x"],W=[I(462)],B=c({__name:I(424),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(448)},waterHighlight:{default:I(435)},brightness:{default:1},baseMaterial:{default:o[I(426)]}},setup(n){const r=I,a=n,i=p(null),c={vertex:r(415),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},b={uTime:{value:0},waterColor:{value:new(o[r(468)])(a[r(419)])[r(469)]()},waterHighlight:{value:new(o[r(468)])(a[r(457)])[r(469)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:a[r(430)]},uHeight:{value:a.height}},{onLoop:y}=t();return y((({elapsed:t})=>{const e=r;b[e(443)][e(445)]=-t/5})),f((()=>{const t=r;a[t(404)]&&(b[t(436)][t(445)]=a[t(404)]),a.waterColor&&(b[t(419)].value=new s(a[t(419)]).convertLinearToSRGB()),a[t(457)]&&(b[t(457)][t(445)]=new(o[t(468)])(a[t(457)])[t(469)]()),a[t(430)]&&(b[t(430)][t(445)]=a[t(430)])})),g((()=>a[r(410)]),(t=>{const e=r;i[e(445)][e(456)][e(463)]=!0})),g((()=>a[r(413)]),(t=>{const e=r,n=new l({baseMaterial:o[t],vertexShader:u(c[e(451)]),fragmentShader:c[e(414)],uniforms:b,flatShading:a[e(410)],side:o[e(461)],roughness:.2,metalness:.1,silent:!0});i.value.material[e(437)](),i[e(445)][e(456)]=n})),(t,n)=>{const a=r;return h(),m(a(408),{ref_key:a(466),ref:i,"rotation-x":-Math.PI/2},[v(a(431),{args:[5,5,t[a(404)],64,64,1]},null,8,W),d(_(e),{baseMaterial:o[a(426)],vertexShader:_(u)(c[a(451)]),fragmentShader:c[a(414)],uniforms:b,side:o[a(461)],roughness:.2,metalness:.1,flatShading:t[a(410)],silent:""},null,8,["baseMaterial",a(407),a(452),a(425),a(405)])],8,O)}}});function D(t){function e(t){const n=G;if(typeof t===n(438))return function(t){}[n(417)](n(428)).apply(n(406));1!==(""+t/t)[n(442)]||t%20==0?function(){return!0}[n(417)](n(467)+n(403)).call(n(421)):function(){return!1}[n(417)](n(467)+n(403))[n(458)](n(427)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function F(){const t=["length","uTime","649LgUhIi","value","input","104388eZWFdQ","#52a7f7","3607284COMjhA","function *\\( *\\)","vertex","fragmentShader",'{}.constructor("return this")( )',"bind","log","material","waterHighlight","apply","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","DoubleSide","args","needsUpdate","10ZsyQwC","20bzNHAT","tmRef","debu","Color","convertLinearToSRGB","init","__proto__","520724bfvKpl","gger","height","flatShading","counter","vertexShader","TresMesh","warn","Flatshading","3661299fQLOTu","trace","baseMaterial","fragment","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","6tbzcTA","constructor","exception","waterColor","6443672ytzAaO","action","info","test","customWaterMesh","side","MeshPhysicalMaterial","stateObject","while (true) {}","error","brightness","TresBoxGeometry","console","1006205XuUqSr","133820fMtVuW","#b3ffff","uHeight","dispose","string","7QGFSfy","chain","toString"];return(F=function(){return t})()}const P=N;!function(t,e){const n=N,r=k();for(;;)try{if(625569===parseInt(n(195))/1+parseInt(n(191))/2*(parseInt(n(189))/3)+parseInt(n(153))/4+parseInt(n(158))/5*(-parseInt(n(202))/6)+parseInt(n(171))/7*(-parseInt(n(205))/8)+-parseInt(n(194))/9*(-parseInt(n(173))/10)+-parseInt(n(217))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(159)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){A(this,(function(){const t=N,e=new RegExp(t(203)),n=new RegExp(t(156),"i"),r=Z("init");e.test(r+t(207))&&n[t(208)](r+t(180))?Z():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(159)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(t,e){const n=k();return(N=function(t,e){return n[t-=151]})(t,e)}function k(){const t=["22555214xgiuFw","MeshPhongMaterial","pos-y.jpg","addBlade","neg-z.jpg","#627179","warn","2590300JXNpzT","#b3ffff","Flatshading","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","2168885DFyZrg","apply","gger","#3a78a2","length","debu","MeshLambertMaterial","value","error","MeshStandardMaterial","list","label","return (function() ","140RIuAuz","toString","3660YhKBRU","MeshDepthMaterial","MeshPhysicalMaterial","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","call","TresDirectionalLight","console","input","MeshToonMaterial","exception","TresPerspectiveCamera","neg-y.jpg","addBinding","brightness","height","table","3zWkDhe",'{}.constructor("return this")( )',"2147988WrdaYU","#52a7f7","水体颜色","29691mJDoBL","1172377UwyCDn","while (true) {}","bind","customWater","string","baseMaterial","change","6VYZEEe","function *\\( *\\)","target","396624ypVVyJ","waterColor","chain","test","waterHighlight","info","trace","MeshNormalMaterial","MeshBasicMaterial","prototype","constructor","TresAmbientLight"];return(k=function(){return t})()}L(void 0,(function(){const t=N;let e;try{e=Function(t(170)+t(190)+");")()}catch(a){e=window}const n=e.console=e[t(179)]||{},r=["log",t(152),t(210),t(166),t(182),t(188),t(211)];for(let o=0;o<r[t(162)];o++){const e=L[t(215)][t(214)][t(197)](L),a=r[o],s=n[a]||e;e.__proto__=L[t(197)](L),e[t(172)]=s[t(172)][t(197)](s),n[a]=e}}))();const R=c({__name:P(198),setup(t){const e=P,o=b({alpha:!0,toneMapping:i,windowSize:!0,clearColor:10066329}),s=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:e(151),sectionColor:e(161),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:e(192),waterHighlight:e(154),brightness:1,baseMaterial:e(175)}),c=new C;return c[e(185)](u,e(187),{label:"高度",min:.1,max:5,step:.1}),c[e(185)](u,e(206),{label:e(193)}),c[e(185)](u,e(209),{label:"浪头颜色"}),c[e(185)](u,e(186),{label:"亮度",min:0,max:1,step:.01}),c[e(185)](u,e(155),{label:e(155)}),c[e(220)]({view:e(168),label:"材质",options:[{text:e(175),value:e(175)},{text:e(213),value:e(213)},{text:e(212),value:e(212)},{text:e(167),value:e(167)},{text:e(218),value:e(218)},{text:"MeshToonMaterial",value:e(181)},{text:e(164),value:"MeshLambertMaterial"},{text:e(174),value:e(174)}],value:u[e(200)]}),c.on(e(201),(t=>{const n=e;"材质"===t[n(204)][n(169)]&&(u[n(200)]=t[n(165)])})),(t,i)=>{const c=e;return h(),y(_(r),M(o,{"window-size":""}),{default:w((()=>[i[0]||(i[0]=v(c(183),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(n),j(x(s)),null,16),i[1]||(i[1]=v(c(216),{intensity:.5},null,-1)),i[2]||(i[2]=v(c(178),{position:[15,15,15],intensity:1},null,-1)),d(B,j(x(u)),null,16),d(_(T),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),y(z,null,{default:w((()=>[d(_(a),{files:["pos-x.jpg","neg-x.jpg",c(219),c(184),"pos-z.jpg",c(221)],path:c(176)})])),_:1}))])),_:1},16)}}});function Z(t){function e(t){const n=N;if(typeof t===n(199))return function(t){}.constructor(n(196))[n(159)]("counter");1!==(""+t/t)[n(162)]||t%20==0?function(){return!0}[n(215)](n(163)+"gger")[n(177)]("action"):function(){return!1}.constructor(n(163)+n(160)).apply(n(157)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

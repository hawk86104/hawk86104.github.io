import{e as n,h as t,a as e,o}from"./@tresjs.W3PFJhMo1741658416045.js";import{P as i}from"./tweakpane.yDiyAAkA1741658416045.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mbHqS_rJ1741658416045.js";import{_ as s}from"./three.FyUEtfsR1741658416045.js";import{d as a,a3 as c,w as u,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as b}from"./@vue.NRI7TcgI1741658416045.js";import"./postprocessing.llR5x4wQ1741658416045.js";import"./@vueuse.5uFvLf9q1741658416045.js";import"./all.three._6CoOIhj1741658416045.js";import"./oimophysics.x0jH7fze1741658416045.js";const y=M;!function(n,t){const e=M,o=k();for(;;)try{if(818129===-parseInt(e(331))/1*(parseInt(e(358))/2)+-parseInt(e(337))/3+-parseInt(e(351))/4+-parseInt(e(345))/5+parseInt(e(362))/6+-parseInt(e(341))/7*(-parseInt(e(354))/8)+parseInt(e(325))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(334)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=M,t=new RegExp(n(335)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=P(n(343));t[n(372)](o+"chain")&&e[n(372)](o+n(330))?P():o("0")}))()}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(n,t){const e=k();return(M=function(n,t){return e[n-=325]})(n,t)}function k(){const n=["2623362pVhSbi","MeshPhongMaterial","isReversed","while (true) {}","219877BtVgRe","constructor","init","maskTexture","2517895RaPCxa","trace","warn","bind",'{}.constructor("return this")( )',"wavePow","3962408HTfYAh","divisionScaleX","DoubleSide","312SabZFO","table","toString","return (function() ","22jUPQyI","gger","debu","action","9188022UZyEsF","log","division","__proto__","fragmentShader","raisedBottom","side","waveFrequency","value","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","test","baseMaterial","stateObject","direction","15564096pNwOJA","hasMaskTexture","prototype","console","speed","input","118086MQDOmQ","gridWeight","length","apply","function *\\( *\\)","exception"];return(k=function(){return n})()}I(void 0,(function(){const n=M;let t;try{t=Function(n(357)+n(349)+");")()}catch(i){t=window}const e=t[n(328)]=t.console||{},o=[n(363),n(347),"info","error",n(336),n(355),n(346)];for(let r=0;r<o[n(333)];r++){const t=I[n(342)][n(327)][n(348)](I),i=o[r],s=e[i]||t;t[n(365)]=I[n(348)](I),t[n(356)]=s[n(356)][n(348)](s),e[i]=t}}))();const S=y(371),D=a({__name:"hexGridMaterial",props:{baseMaterial:{default:new(s[y(338)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const i=y;let r,a;const p=o,v={gridWeight:{value:p[i(332)]},raisedBottom:{value:p.raisedBottom},waveFrequency:{value:p[i(369)]},wavePow:{value:p.wavePow},direction:{value:p[i(375)]},isReversed:{value:p.isReversed},hasMaskTexture:{value:p[i(326)]},maskTexture:{value:null},division:{value:p[i(364)]},divisionScaleX:{value:p.divisionScaleX},time:{value:0}};p[i(344)]&&(v[i(344)][i(370)]=([r,a]=c((()=>e([p.maskTexture]))),r=await r,a(),r)),u((()=>[p[i(332)],p[i(367)],p[i(369)],p[i(350)],p[i(364)],p[i(352)],p.direction,p.isReversed,p[i(326)]]),(([n,t,e,o,r,s,a,c,u])=>{const l=i;v[l(332)][l(370)]=n,v[l(367)].value=t,v.waveFrequency.value=e,v[l(350)][l(370)]=o,v[l(364)].value=r,v.divisionScaleX[l(370)]=s,v[l(375)][l(370)]=a,v[l(339)][l(370)]=c,v[l(326)][l(370)]=u}));const{onLoop:m}=n();return m((({delta:n})=>{const t=i;v.time[t(370)]+=n*p[t(329)]})),(n,e)=>{const r=i;return l(),f(d(t),{baseMaterial:o[r(373)],vertexShader:S,side:s[r(353)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[r(373),r(368),r(366)])}}});function P(n){function t(n){const e=M;if("string"==typeof n)return function(n){}.constructor(e(340))[e(334)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(342)]("debu"+e(359)).call(e(361)):function(){return!1}[e(342)](e(360)+e(359))[e(334)](e(374)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function T(){const n=["while (true) {}","hexGridMesh","2525096UpKKLc","37605pakxvY","call","baseMaterial","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","prototype","test","$attrs","MeshBasicMaterial","debu","warn","21915BSzoGY","20727289mmUdZp","console","116488NDicSD","1976UrMulb","exception","rotation","8ZnyiDP","bind","toString","init","error","input",'{}.constructor("return this")( )',"510azQdwS","155460zuEMqM","apply","function *\\( *\\)","6YtidDY","349020WtqCvs","stateObject","length","TresMesh","table","constructor"];return(T=function(){return n})()}const C=z;!function(n,t){const e=z,o=T();for(;;)try{if(373167===parseInt(e(248))/1*(parseInt(e(252))/2)+parseInt(e(263))/3*(parseInt(e(264))/4)+-parseInt(e(273))/5*(-parseInt(e(259))/6)+parseInt(e(272))/7+-parseInt(e(249))/8*(-parseInt(e(245))/9)+parseInt(e(260))/10+-parseInt(e(246))/11)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const j=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){j(this,(function(){const n=z,t=new RegExp(n(262)),e=new RegExp(n(277),"i"),o=A(n(255));t.test(o+"chain")&&e[n(240)](o+n(257))?A():o("0")}))()}();const B=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(261)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();B(void 0,(function(){const n=z;let t;try{t=Function("return (function() "+n(258)+");")()}catch(i){t=window}const e=t[n(247)]=t[n(247)]||{},o=["log",n(244),"info",n(256),n(250),n(268),"trace"];for(let r=0;r<o[n(266)];r++){const t=B[n(269)][n(239)][n(253)](B),i=o[r],s=e[i]||t;t.__proto__=B.bind(B),t[n(254)]=s[n(254)][n(253)](s),e[i]=t}}))();const R=[C(251)];function z(n,t){const e=T();return(z=function(n,t){return e[n-=238]})(n,t)}const F=a({__name:C(271),setup(n){const t=C,e=new(s[t(242)]);return(n,o)=>{const i=t;return l(),p(i(267),{rotation:[-Math.PI/2,0,0]},[o[0]||(o[0]=v("TresPlaneGeometry",{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(D,g({baseMaterial:d(e)},n[i(241)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[i(275)])])),_:1}))],8,R)}}});function A(n){function t(n){const e=z;if("string"==typeof n)return function(n){}[e(269)](e(270))[e(261)]("counter");1!==(""+n/n)[e(266)]||n%20==0?function(){return!0}.constructor(e(243)+e(276))[e(274)](e(238)):function(){return!1}[e(269)](e(243)+e(276))[e(261)](e(265)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function X(){const n=["540296nilmjx","3533625dQoKaA","exception","counter","divisionScaleX","constructor","1kWSwIx","prototype","direction","138DzZTMQ","toString","gger","9070930qaZyWP","isReversed","division","action","978240DAzUTZ","console","hexGridGround","input","颜色取反","__proto__","渐变强度","return (function() ","waveFrequency","speed","1327240qKtwto","网格横向缩放","color","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","网格整体缩放","8fFCEgU","length","function *\\( *\\)","#de62f2","apply","while (true) {}","hasMaskTexture","stateObject","方向类别","table","addBinding","43950zXckDB","trace","bind","call","1476538XCWWaG","info","#666666","TresCanvas","网格宽度"];return(X=function(){return n})()}const Z=W;!function(n,t){const e=W,o=X();for(;;)try{if(258814===-parseInt(e(358))/1*(parseInt(e(352))/2)+-parseInt(e(368))/3+parseInt(e(326))/4+-parseInt(e(343))/5*(parseInt(e(361))/6)+parseInt(e(347))/7+parseInt(e(332))/8*(-parseInt(e(353))/9)+parseInt(e(364))/10)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(336)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function W(n,t){const e=X();return(W=function(n,t){return e[n-=323]})(n,t)}!function(){q(this,(function(){const n=W,t=new RegExp(n(334)),e=new RegExp(n(330),"i"),o=L("init");t[n(329)](o+"chain")&&e.test(o+n(371))?L():o("0")}))()}();const G=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(336)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();G(void 0,(function(){const n=W,t=function(){const n=W;let t;try{t=Function(n(323)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(369)]||{},o=["log","warn",n(348),"error",n(354),n(341),n(344)];for(let i=0;i<o[n(333)];i++){const t=G.constructor[n(359)][n(345)](G),r=o[i],s=e[r]||t;t[n(373)]=G[n(345)](G),t.toString=s[n(362)][n(345)](s),e[r]=t}}))();const E=a({__name:Z(370),setup(n){const t=Z,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:t(335),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new i({title:"hexGridGround",expanded:!0});return a[t(342)](s,t(338),{label:"图片纹理"}),a[t(342)](s,t(328),{label:"颜色"}),a[t(342)](s,t(325),{label:"速度",min:-5,max:5,step:.1}),a[t(342)](s,"gridWeight",{label:t(351),min:.001,max:.5,step:.001}),a.addBinding(s,"raisedBottom",{label:"渐变宽度",min:.001,max:1,step:.001}),a.addBinding(s,t(324),{label:"分段",min:.001,max:1,step:.001}),a[t(342)](s,"wavePow",{label:t(374),min:1,max:30,step:.1}),a[t(342)](s,t(366),{label:t(331),min:.1,max:50,step:.1}),a[t(342)](s,t(356),{label:t(327),min:.1,max:10,step:.1}),a[t(342)](s,t(365),{label:t(372)}),a[t(342)](s,t(360),{label:t(340),min:3,max:6,step:1}),(n,i)=>{const a=t,c=b(a(350));return l(),f(c,{clearColor:a(349),"window-size":""},{default:m((()=>[i[0]||(i[0]=v("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(o),{enableDamping:"",autoRotate:""}),h(F,g(s,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=W;if("string"==typeof n)return function(n){}[e(357)](e(337))[e(336)](e(355));1!==(""+n/n).length||n%20==0?function(){return!0}[e(357)]("debu"+e(363))[e(346)](e(367)):function(){return!1}.constructor("debu"+e(363)).apply(e(339)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{E as default};

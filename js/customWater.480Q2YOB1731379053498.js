import{_ as t,C as e,a0 as n,ai as r}from"./three.bXjbKLxC1731379053498.js";import{e as a,W as o,U as s,c as i}from"./@tresjs.bLKO3xyw1731379053498.js";import{a as l}from"./index.Xkk8JFHs1731379053498.js";import"./index.Ucf_-sb61731379053498.js";import{z as u}from"./three-custom-shader-material.DZEAYEp81731379053498.js";import{p as c}from"./gl-noise.BrVtymbx1731379053498.js";import{d as p,b as f,a3 as g,w as h,o as v,D as m,J as d,j as _,u as b,r as w,f as y,g as M,aj as j,ak as x,m as C,al as I}from"./@vue.-THQH3GC1731379053498.js";import{P as z}from"./tweakpane.yHWGBmom1731379053498.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.UAy2RrDQ1731379053498.js";import"./@vueuse.DWZrQ1Sl1731379053498.js";import"./three-stdlib.yR_asc1t1731379053498.js";import"./@pmndrs.WRC-eauj1731379053498.js";import"./object-hash.ODhiDasX1731379053498.js";import"./@amap.mFH-iVTk1731379053498.js";import"./jszip.Gy4zFode1731379053498.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.o2GIoNt01731379053498.js";import"./all.three.B15lSSyE1731379053498.js";import"./oimophysics.x0jH7fze1731379053498.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ReP7gSZv1731379053498.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ZMwPhBba1731379053498.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ell-9NYR1731379053498.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.tUlFQVQ01731379053498.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.SGt_M3hD1731379053498.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Q8MdI5wY1731379053498.js";const S=B;!function(t,e){const n=B,r=P();for(;;)try{if(559703===parseInt(n(279))/1*(parseInt(n(302))/2)+parseInt(n(276))/3+parseInt(n(319))/4*(-parseInt(n(257))/5)+parseInt(n(297))/6+-parseInt(n(266))/7+parseInt(n(275))/8*(parseInt(n(265))/9)+-parseInt(n(299))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(281)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){G(this,(function(){const t=B,e=new RegExp(t(289)),n=new RegExp(t(285),"i"),r=D(t(272));e.test(r+t(303))&&n[t(284)](r+"input")?D():r("0")}))()}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(281)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=P();return(B=function(t,e){return n[t-=257]})(t,e)}O(void 0,(function(){const t=B;let e;try{e=Function(t(269)+t(286)+");")()}catch(a){e=window}const n=e[t(315)]=e[t(315)]||{},r=["log","warn","info","error",t(316),t(282),t(292)];for(let o=0;o<r.length;o++){const e=O.constructor.prototype.bind(O),a=r[o],s=n[a]||e;e.__proto__=O.bind(O),e[t(314)]=s[t(314)][t(280)](s),n[a]=e}}))();const H=[S(298)],F=[S(287)];function P(){const t=["waterColor","stateObject","action","gger","waterHighlight","customWaterMesh","toString","console","exception","Flatshading","side","524ICqrxR","11265OXfVrx","DoubleSide","vertex","string","while (true) {}","flatShading","debu","brightness","2371923vXJIKZ","6967814hqiCTA","uHeight","counter","return (function() ","convertLinearToSRGB","call","init","needsUpdate","TresBoxGeometry","8InHROZ","2805822BJOimP","constructor","fragment","74796gpmDVb","bind","apply","table","Color","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"args","tmRef","function *\\( *\\)","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","#b3ffff","trace","fragmentShader","MeshPhysicalMaterial","height","length","5237748yFwioq","rotation-x","9694910Rfvtmr","value","uTime","20EvSstC","chain","TresMesh","material","baseMaterial","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t"];return(P=function(){return t})()}const W=p({__name:S(313),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:S(291)},brightness:{default:1},baseMaterial:{default:t[S(294)]}},setup(r){const s=S,i=r,l=f(null),p={vertex:s(307),fragment:s(290)},w={uTime:{value:0},waterColor:{value:new(t[s(283)])(i[s(308)]).convertLinearToSRGB()},waterHighlight:{value:new e(i.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(264)]},uHeight:{value:i[s(295)]}},{onLoop:y}=a();return y((({elapsed:t})=>{const e=s;w[e(301)][e(300)]=-t/5})),g((()=>{const e=s;i.height&&(w[e(267)].value=i[e(295)]),i.waterColor&&(w[e(308)].value=new(t[e(283)])(i[e(308)]).convertLinearToSRGB()),i[e(312)]&&(w[e(312)][e(300)]=new(t[e(283)])(i[e(312)])[e(270)]()),i[e(264)]&&(w.brightness[e(300)]=i[e(264)])})),h((()=>i[s(317)]),(t=>{const e=s;l[e(300)][e(305)][e(273)]=!0})),h((()=>i.baseMaterial),(e=>{const r=s,a=new u({baseMaterial:t[e],vertexShader:c(p[r(259)]),fragmentShader:p[r(278)],uniforms:w,flatShading:i[r(317)],side:n,roughness:.2,metalness:.1,silent:!0});l[r(300)][r(305)].dispose(),l[r(300)][r(305)]=a})),(e,n)=>{const r=s;return v(),m(r(304),{ref_key:r(288),ref:l,"rotation-x":-Math.PI/2},[d(r(274),{args:[5,5,e.height,64,64,1]},null,8,F),_(b(o),{baseMaterial:t[r(294)],vertexShader:b(c)(p.vertex),fragmentShader:p[r(278)],uniforms:w,side:t[r(258)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[r(306),"vertexShader",r(293),r(318),r(262)])],8,H)}}});function D(t){function e(t){const n=B;if(typeof t===n(260))return function(t){}[n(277)](n(261))[n(281)](n(268));1!==(""+t/t)[n(296)]||t%20==0?function(){return!0}.constructor(n(263)+"gger")[n(271)](n(310)):function(){return!1}.constructor(n(263)+n(311))[n(281)](n(309)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const k=L;!function(t,e){const n=L,r=Z();for(;;)try{if(835526===parseInt(n(269))/1*(parseInt(n(256))/2)+parseInt(n(231))/3+parseInt(n(267))/4*(-parseInt(n(239))/5)+-parseInt(n(273))/6*(-parseInt(n(265))/7)+parseInt(n(260))/8*(-parseInt(n(261))/9)+-parseInt(n(235))/10*(-parseInt(n(214))/11)+-parseInt(n(237))/12)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(254)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){R(this,(function(){const t=L,e=new RegExp(t(257)),n=new RegExp(t(213),"i"),r=A(t(225));e[t(247)](r+t(272))&&n[t(247)](r+t(234))?A():r("0")}))()}();const E=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(254)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function L(t,e){const n=Z();return(L=function(t,e){return n[t-=209]})(t,e)}E(void 0,(function(){const t=L;let e;try{e=Function("return (function() "+t(275)+");")()}catch(a){e=window}const n=e[t(228)]=e[t(228)]||{},r=["log",t(232),"info",t(274),"exception","table",t(245)];for(let o=0;o<r.length;o++){const e=E[t(227)][t(241)][t(266)](E),a=r[o],s=n[a]||e;e.__proto__=E[t(266)](E),e[t(209)]=s.toString[t(266)](s),n[a]=e}}))();const N=p({__name:k(212),setup(t){const e=k,n=w({alpha:!0,toneMapping:r,windowSize:!0,clearColor:10066329}),a=w({enableDamping:!0,autoRotate:!1}),o=w({cellSize:.6,cellThickness:1.1,cellColor:e(253),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:e(222),brightness:1,baseMaterial:e(251)}),c=new z;return c[e(242)](u,e(217),{label:"高度",min:.1,max:5,step:.1}),c[e(242)](u,e(258),{label:e(238)}),c[e(242)](u,"waterHighlight",{label:"浪头颜色"}),c.addBinding(u,e(221),{label:"亮度",min:0,max:1,step:.01}),c[e(242)](u,"Flatshading",{label:e(262)}),c[e(230)]({view:e(211),label:"材质",options:[{text:e(251),value:"MeshPhysicalMaterial"},{text:e(244),value:"MeshBasicMaterial"},{text:e(229),value:e(229)},{text:e(226),value:e(226)},{text:"MeshPhongMaterial",value:e(243)},{text:e(224),value:e(224)},{text:e(270),value:"MeshLambertMaterial"},{text:e(215),value:e(215)}],value:u[e(264)]}),c.on(e(250),(t=>{const n=e;"材质"===t.target.label&&(u.baseMaterial=t[n(218)])})),(t,r)=>{const c=e;return v(),y(b(i),C(n,{"window-size":""}),{default:M((()=>[r[0]||(r[0]=d(c(216),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),_(b(s),j(x(a)),null,16),r[1]||(r[1]=d(c(248),{intensity:.5},null,-1)),r[2]||(r[2]=d(c(233),{position:[15,15,15],intensity:1},null,-1)),_(W,j(x(u)),null,16),_(b(T),C({args:[3,3]},o,{position:[0,-.5,0]}),null,16),(v(),y(I,null,{default:M((()=>[_(b(l),{files:[c(223),c(210),c(236),c(271),c(219),c(252)],path:c(240)})])),_:1}))])),_:1},16)}}});function Z(){const t=["594124glJmod","function *\\( *\\)","waterColor","call","8128YasOrE","10242hQjMNH","Flatshading","stateObject","baseMaterial","2746296lyZrsU","bind","1835044EsUmzu","length","2QkIMOE","MeshLambertMaterial","neg-y.jpg","chain","18ZkTEmW","error",'{}.constructor("return this")( )',"toString","neg-x.jpg","list","customWater","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6996187Vuvjvp","MeshDepthMaterial","TresPerspectiveCamera","height","value","pos-z.jpg","debu","brightness","#b3ffff","pos-x.jpg","MeshToonMaterial","init","MeshStandardMaterial","constructor","console","MeshNormalMaterial","addBlade","2434638GxhdQF","warn","TresDirectionalLight","input","10bqhpOX","pos-y.jpg","9218112rkwdDK","水体颜色","5uFqEZE","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","prototype","addBinding","MeshPhongMaterial","MeshBasicMaterial","trace","string","test","TresAmbientLight","counter","change","MeshPhysicalMaterial","neg-z.jpg","#627179","apply","gger"];return(Z=function(){return t})()}function A(t){function e(t){const n=L;if(typeof t===n(246))return function(t){}[n(227)]("while (true) {}")[n(254)](n(249));1!==(""+t/t)[n(268)]||t%20==0?function(){return!0}[n(227)](n(220)+"gger")[n(259)]("action"):function(){return!1}.constructor("debu"+n(255)).apply(n(263)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{N as default};

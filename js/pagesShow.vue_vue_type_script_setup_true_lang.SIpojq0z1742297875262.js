import{a0 as t,C as n,_ as e,cs as o,ct as r,cu as i,cv as s,l as u,c1 as c,ak as a,am as l}from"./three.N4lg2KsY1742297875262.js";import{P as f,e as p,o as d}from"./@tresjs.oW7bfow21742297875262.js";import{z as h}from"./three-custom-shader-material.CRQk2ryt1742297875262.js";import{b as y,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1742297875262.js";import{d as m,b as w,a2 as b,w as I,o as _,H as v,u as S,r as C,a3 as x,e as j,f as T,g as A,N as R,j as O,aj as E,ak as F,F as M,M as B,J as L,m as k}from"./@vue.NRI7TcgI1742297875262.js";!function(t,n){const e=z,o=Y();for(;;)try{if(758344===parseInt(e(246))/1+parseInt(e(241))/2+parseInt(e(244))/3+parseInt(e(235))/4*(-parseInt(e(229))/5)+-parseInt(e(237))/6+parseInt(e(230))/7*(parseInt(e(228))/8)+parseInt(e(233))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(215)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=z,n=new RegExp(t(213)),e=new RegExp(t(247),"i"),o=W(t(234));n.test(o+t(227))&&e[t(236)](o+t(219))?W():o("0")}))()}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(215)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();G(void 0,(function(){const t=z,n=function(){const t=z;let n;try{n=Function(t(221)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(217)]=n[t(217)]||{},o=[t(226),t(231),t(224),t(249),t(216),"table","trace"];for(let r=0;r<o.length;r++){const n=G[t(222)][t(243)][t(239)](G),i=o[r],s=e[i]||n;n[t(211)]=G.bind(G),n[t(238)]=s[t(238)][t(239)](s),e[i]=n}}))();const H=async()=>{const t=z,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(212)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(223)]&&(e=n),"LANDMASS"===n[i(223)]&&(o=n),n.name===i(245)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function z(t,n){const e=Y();return(z=function(t,n){return e[t-=211]})(t,n)}function W(t){function n(t){const e=z;if(typeof t===e(240))return function(t){}[e(222)](e(218))[e(215)](e(250));1!==(""+t/t)[e(248)]||t%20==0?function(){return!0}[e(222)](e(242)+e(232))[e(225)](e(220)):function(){return!1}[e(222)](e(242)+e(232))[e(215)](e(214)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function Y(){const t=["warn","gger","8145954mJEuNo","init","4894168azjVSd","test","8637336YPHkfI","toString","bind","string","1496904lDDjfU","debu","prototype","3476205DFqSpO","ROADS","84456rfDUDE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","error","counter","__proto__","traverse","function *\\( *\\)","stateObject","apply","exception","console","while (true) {}","input","action","return (function() ","constructor","name","info","call","log","chain","4197544VVFwJv","5nApjrH","7SsFYsB"];return(Y=function(){return t})()}function Z(t,n){const e=U();return(Z=function(t,n){return e[t-=248]})(t,n)}const N=Z;!function(t,n){const e=Z,o=U();for(;;)try{if(874042===parseInt(e(263))/1+parseInt(e(275))/2*(parseInt(e(292))/3)+parseInt(e(250))/4+-parseInt(e(308))/5+parseInt(e(261))/6+parseInt(e(282))/7+parseInt(e(270))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(249)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=Z,n=new RegExp(t(288)),e=new RegExp(t(254),"i"),o=P("init");n.test(o+t(312))&&e[t(293)](o+t(259))?P():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(249)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(){const t=["bind","color","#ffffff","while (true) {}","buildingsModelCustomShader","uniforms","bulidingsColor","computeBoundingSphere","__csm","constructor","7945425WZNgng","__proto__","#ffff00","length","chain","uColor","error","apply","2838436uKfttz","isArray","renderOrder","setStyle","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","counter",'{}.constructor("return this")( )',"value","input","warn","4463802IOgIYv","#e523ff","442490ItCljW","call","land","primitive","info","#112233","model","2014552UpuMVa","exception","gger","stateObject","uOpacity","366VNbRTx","computeBoundingBox","material","clone","trace","Color","opacity","1289498vbbwur","object","prototype","dispose","action","boundingBox","function *\\( *\\)","DoubleSide","string","landColor","2148EhLsDK","test","toString","side","gradient","debu"];return(U=function(){return t})()}$(void 0,(function(){const t=Z;let n;try{n=Function("return (function() "+t(257)+");")()}catch(r){n=window}const e=n[t(255)]=n[t(255)]||{},o=["log",t(260),t(267),t(248),t(271),"table",t(279)];for(let i=0;i<o[t(311)];i++){const n=$[t(307)][t(284)].bind($),r=o[i],s=e[r]||n;n[t(309)]=$[t(298)]($),n[t(294)]=s[t(294)][t(298)](s),e[r]=n}}))();const K=[N(283)],J=m({__name:N(302),props:{model:{},bulidingsColor:{default:N(262)},landColor:{default:N(268)},topColor:{default:N(310)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=N,i=o,s=w(0),u=i[r(269)].city;u[r(252)]=1001;const c=i[r(269)].land;(()=>{const t=r,{geometry:o}=u;o[t(276)](),o[t(305)]();const{max:c,min:a}=o[t(287)];if(u.material[t(306)])return;const l=new h({baseMaterial:u.material,vertexShader:y,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new n(i.bulidingsColor)},uOpacity:{value:i[t(281)]},uLightColor:{value:new n(t(300))},uTopColor:{value:new(e[t(280)])(i.topColor)},uTime:s,uGradient:{value:i[t(296)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:e[t(289)]});u[t(277)][t(285)](),u[t(277)]=l})();const{onLoop:a}=p();a((({delta:t})=>{s[r(258)]+=t})),b((()=>{const n=r;i[n(304)]&&u.material[n(303)][n(313)][n(258)].setStyle(i[n(304)]),i[n(291)]&&((n,e)=>{const o=r;let s;"cu"===n||n===o(265)&&(s=Array[o(251)](c[o(277)])?c.material:[c[o(277)]],s.forEach((n=>{const r=o;n[e][r(253)](i[r(291)]),n[r(295)]=t})))})("land",n(299)),i[n(281)]&&(u[n(277)].uniforms[n(274)][n(258)]=i[n(281)])})),I(i,((t,n)=>{const e=r;u[e(277)].uniforms.uGradient[e(258)]=t[e(296)]}));const l=i[r(269)][r(269)][r(278)]();return(t,n)=>{const e=r;return _(),v(e(266),{object:S(l)},null,8,K)}}});function P(t){function n(t){const e=Z;if(typeof t===e(290))return function(t){}[e(307)](e(301)).apply(e(256));1!==(""+t/t)[e(311)]||t%20==0?function(){return!0}[e(307)](e(297)+"gger")[e(264)](e(286)):function(){return!1}[e(307)](e(297)+e(272))[e(249)](e(273)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const q=Q;function Q(t,n){const e=X();return(Q=function(t,n){return e[t-=113]})(t,n)}function X(){const t=["constructor","primitive","innerHeight","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","1978105NOaNhS","value","6EDouLC","7408392yGSyOF","7MUoTPq","renderOrder","uColor","applyMatrix4"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","action","function *\\( *\\)","debu","buildingsLines","Wireframe","3438492TSEyeK","color","58059VfwMTM","apply","builds","10729690YKqsGY","chain","material","142254saTTKO","uOpacity","prototype","exception","test","innerWidth","geometry","11jxeFwL","log","18GYGogT","call","trace","opacity","1504080oVkmad","info","length","set","toString","linewidth","resolution","stateObject","style","gger","matrix","width","return (function() ","__proto__","init","console","error","uniforms","bind","counter","#FFF","8LXropJ"];return(X=function(){return t})()}!function(t,n){const e=Q,o=X();for(;;)try{if(813776===parseInt(e(141))/1+parseInt(e(127))/2*(parseInt(e(147))/3)+parseInt(e(120))/4*(-parseInt(e(125))/5)+parseInt(e(139))/6*(parseInt(e(129))/7)+-parseInt(e(160))/8*(-parseInt(e(156))/9)+-parseInt(e(144))/10*(-parseInt(e(154))/11)+-parseInt(e(128))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){tt(this,(function(){const t=Q,n=new RegExp(t(135)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=rt(t(113));n.test(o+t(145))&&e[t(151)](o+"input")?rt():o("0")}))()}();const nt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();nt(void 0,(function(){const t=Q,n=function(){const t=Q;let n;try{n=Function(t(172)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(114)]=n[t(114)]||{},o=[t(155),"warn",t(161),t(115),t(150),"table",t(158)];for(let r=0;r<o[t(162)];r++){const n=nt[t(121)][t(149)][t(117)](nt),i=o[r],s=e[i]||n;n[t(173)]=nt[t(117)](nt),n[t(164)]=s[t(164)].bind(s),e[i]=n}}))();const et=["object"],ot=m({__name:q(137),props:{builds:{},width:{default:1},color:{default:q(119)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const e=q,c=t;let a=null,l=null;if(c[e(168)]===e(138)){const t=new o(c[e(143)][e(153)]);let n=(new r).fromEdgesGeometry(t),u=new i({color:c[e(140)],linewidth:c[e(171)],opacity:c[e(159)],transparent:!0,depthWrite:!0,depthTest:!0});u[e(166)][e(163)](window[e(152)],window[e(123)]),a=new s(n,u),a[e(132)](c[e(143)][e(170)].clone())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[e(140)])},uOpacity:{value:c.opacity}},vertexShader:e(124),fragmentShader:e(133)};const t=new o(c[e(143)][e(153)]),r=new u(l);a=new LineSegments(t,r),a[e(132)](c[e(143)].matrix.clone()),a[e(146)].linewidth=c[e(171)],a[e(130)]=1e3}return b((()=>{const t=e;"Shader"===c.style&&(c[t(140)]&&(l[t(116)][t(131)][t(126)]=new n(c.color)),c[t(159)]&&(l[t(116)][t(148)][t(126)]=c.opacity)),c[t(168)]===t(138)&&(c[t(140)]&&(a[t(146)][t(140)]=new n(c[t(140)])),c[t(159)]&&(a[t(146)][t(159)]=c.opacity)),c[t(171)]&&(a[t(146)][t(165)]=c[t(171)])})),(t,n)=>{const o=e;return _(),v(o(122),{object:S(a)},null,8,et)}}});function rt(t){function n(t){const e=Q;if("string"==typeof t)return function(t){}[e(121)]("while (true) {}")[e(142)](e(118));1!==(""+t/t)[e(162)]||t%20==0?function(){return!0}.constructor(e(136)+e(169))[e(157)](e(134)):function(){return!1}[e(121)]("debu"+e(169)).apply(e(167)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=st;function st(t,n){const e=pt();return(st=function(t,n){return e[t-=285]})(t,n)}!function(t,n){const e=st,o=pt();for(;;)try{if(841818===parseInt(e(287))/1*(-parseInt(e(319))/2)+-parseInt(e(324))/3+-parseInt(e(302))/4*(parseInt(e(336))/5)+parseInt(e(298))/6+parseInt(e(308))/7*(parseInt(e(316))/8)+parseInt(e(305))/9+-parseInt(e(314))/10*(-parseInt(e(294))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ut(this,(function(){const t=st,n=new RegExp(t(326)),e=new RegExp(t(291),"i"),o=dt(t(289));n[t(311)](o+"chain")&&e.test(o+t(321))?dt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(290)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=st;let n;try{n=Function("return (function() "+t(330)+");")()}catch(r){n=window}const e=n[t(300)]=n[t(300)]||{},o=[t(296),t(286),t(323),"error",t(295),t(333),t(328)];for(let i=0;i<o[t(301)];i++){const n=ct[t(293)][t(304)].bind(ct),r=o[i],s=e[r]||n;n[t(303)]=ct[t(334)](ct),n.toString=s[t(322)][t(334)](s),e[r]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=m({__name:it(320),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=C({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r.disableRender}),s=C({autoRotate:r[n(309)],enableDamping:!0});let u=null;r[n(317)]&&([e,o]=x((()=>H())),e=await e,o(),u=e);const f=w(),p=w();return(t,e)=>{const o=n,c=j(o(335));return _(),T(c,k({ref_key:o(307),ref:p},i,{"window-size":""}),{default:A((()=>[R(o(299),{ref_key:o(297),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),O(S(d),E(F(s)),null,16),e[0]||(e[0]=R(o(332),{color:o(315)},null,-1)),e[1]||(e[1]=R("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(315)},null,-1)),r[o(317)]&&S(u)?(_(),v(M,{key:0},[O(J,{model:S(u)},null,8,[o(313)]),O(ot,{builds:S(u).city,color:o(318)},null,8,["builds"])],64)):B("",!0),L(t.$slots,o(327)),r[o(292)]?(_(),v(o(329),at)):B("",!0),r[o(285)]?(_(),v("TresGridHelper",lt)):B("",!0)])),_:3},16)}}});function pt(){const t=["test","gger","model","5490SHuWej","#ffffff","56744IsUiJW","showBuildings","#000","60yVcYWR","pagesShow","input","toString","info","2801058EQgsbr","counter","function *\\( *\\)","ability","trace","TresAxesHelper",'{}.constructor("return this")( )',"call","TresAmbientLight","table","bind","TresCanvas","19180UeHknF","showGridHelper","warn","44527ZySjDF","string","init","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","showAxesHelper","constructor","57849QevhNd","exception","log","perspectiveCameraRef","4450338aAhyRS","TresPerspectiveCamera","console","length","1544BGYMKr","__proto__","prototype","7710309hucELO","debu","tcRef","105fdyYgY","autoRotate","stateObject"];return(pt=function(){return t})()}function dt(t){function n(t){const e=st;if(typeof t===e(288))return function(t){}[e(293)]("while (true) {}")[e(290)](e(325));1!==(""+t/t)[e(301)]||t%20==0?function(){return!0}.constructor(e(306)+e(312))[e(331)]("action"):function(){return!1}[e(293)](e(306)+e(312))[e(290)](e(310)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{J as _,ot as a,ft as b,H as l};

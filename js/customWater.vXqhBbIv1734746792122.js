import{_ as e,C as t}from"./three.1FILWcBb1734746792122.js";import{e as n,W as r,U as a,c as i}from"./@tresjs.vA_UT8oy1734746792122.js";import{a as o}from"./index.5EJM2L-T1734746792122.js";import"./index.sj3xct-T1734746792122.js";import{z as s}from"./three-custom-shader-material.uwcZNtd-1734746792122.js";import{p as l}from"./gl-noise.BrVtymbx1734746792122.js";import{d as u,b as c,a3 as p,w as f,o as g,D as h,J as m,j as v,u as d,r as _,f as b,g as w,aj as y,ak as j,m as M,al as x}from"./@vue.-THQH3GC1734746792122.js";import{P as z}from"./tweakpane.yHWGBmom1734746792122.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.e0bu2hHg1734746792122.js";import"./@vueuse.lqJslAkC1734746792122.js";import"./three-stdlib.1ZAvCJOA1734746792122.js";import"./@pmndrs.53rYJjok1734746792122.js";import"./object-hash.J27X2Uyf1734746792122.js";import"./@amap.zNgKkCGX1734746792122.js";import"./jszip.shhf2-t61734746792122.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.N4e8HhDS1734746792122.js";import"./all.three.EfBg0caK1734746792122.js";import"./oimophysics.x0jH7fze1734746792122.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.lDhdz_P01734746792122.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.Z2xL5Chm1734746792122.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.S-n0nLMk1734746792122.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.l6Fck9j-1734746792122.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.06nnfEks1734746792122.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.hzuf3Ma31734746792122.js";const T=H;!function(e,t){const n=H,r=B();for(;;)try{if(436872===-parseInt(n(383))/1*(-parseInt(n(409))/2)+-parseInt(n(378))/3*(parseInt(n(361))/4)+-parseInt(n(417))/5*(parseInt(n(421))/6)+parseInt(n(411))/7+-parseInt(n(386))/8*(parseInt(n(365))/9)+parseInt(n(416))/10+parseInt(n(419))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[H(397)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){I(this,(function(){const e=H,t=new RegExp(e(375)),n=new RegExp(e(377),"i"),r=W("init");t[e(400)](r+e(422))&&n[e(400)](r+"input")?W():r("0")}))()}();const S=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[H(397)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function B(){const e=["return (function() ","vertexShader","__proto__","dispose","DoubleSide","log","2466236sHZNFZ","#b3ffff","length","waterColor","9qjxdEr","bind","TresBoxGeometry","waterHighlight","TresMesh","table","prototype","trace","uHeight","while (true) {}","function *\\( *\\)","flatShading","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3TcEJIC","Flatshading","value","console","baseMaterial","600148ShyLzD","call","string","6577216GJBoFQ","convertLinearToSRGB","debu","side","customWaterMesh","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","vertex","tmRef","args","rotation-x","material","apply","stateObject","MeshPhysicalMaterial","test","counter","gger","#52a7f7","info","toString","exception","fragmentShader","constructor","2GwVViZ","Color","5975340ikngEM","warn","needsUpdate","fragment","brightness","3624840wgHfhs","42565RVQBBE",'{}.constructor("return this")( )',"8986868EweBGR","height","534eahYYe","chain"];return(B=function(){return e})()}S(void 0,(function(){const e=H,t=function(){const e=H;let t;try{t=Function(e(423)+e(418)+");")()}catch(n){t=window}return t}(),n=t[e(381)]=t[e(381)]||{},r=[e(360),e(412),e(404),"error",e(406),e(370),e(372)];for(let a=0;a<r[e(363)];a++){const t=S[e(408)][e(371)].bind(S),i=r[a],o=n[i]||t;t[e(425)]=S[e(366)](S),t[e(405)]=o.toString[e(366)](o),n[i]=t}}))();const G=[T(395)],F=[T(394)];function H(e,t){const n=B();return(H=function(e,t){return n[e-=359]})(e,t)}const O=u({__name:T(390),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(403)},waterHighlight:{default:T(362)},brightness:{default:1},baseMaterial:{default:e[T(399)]}},setup(a){const i=T,o=a,u=c(null),_={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:i(391)},b={uTime:{value:0},waterColor:{value:new(e[i(410)])(o[i(364)]).convertLinearToSRGB()},waterHighlight:{value:new(e[i(410)])(o[i(368)])[i(387)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o.brightness},uHeight:{value:o.height}},{onLoop:w}=n();return w((({elapsed:e})=>{const t=i;b.uTime[t(380)]=-e/5})),p((()=>{const n=i;o[n(420)]&&(b[n(373)][n(380)]=o[n(420)]),o[n(364)]&&(b[n(364)].value=new(e[n(410)])(o.waterColor)[n(387)]()),o[n(368)]&&(b[n(368)][n(380)]=new t(o.waterHighlight)[n(387)]()),o.brightness&&(b[n(415)][n(380)]=o[n(415)])})),f((()=>o[i(379)]),(e=>{const t=i;u[t(380)][t(396)][t(413)]=!0})),f((()=>o[i(382)]),(t=>{const n=i,r=new s({baseMaterial:e[t],vertexShader:l(_[n(392)]),fragmentShader:_[n(414)],uniforms:b,flatShading:o[n(379)],side:e[n(359)],roughness:.2,metalness:.1,silent:!0});u[n(380)].material[n(426)](),u[n(380)].material=r})),(t,n)=>{const a=i;return g(),h(a(369),{ref_key:a(393),ref:u,"rotation-x":-Math.PI/2},[m(a(367),{args:[5,5,t[a(420)],64,64,1]},null,8,F),v(d(r),{baseMaterial:e[a(399)],vertexShader:d(l)(_.vertex),fragmentShader:_[a(414)],uniforms:b,side:e[a(359)],roughness:.2,metalness:.1,flatShading:t.Flatshading,silent:""},null,8,[a(382),a(424),a(407),a(389),a(376)])],8,G)}}});function W(e){function t(e){const n=H;if(typeof e===n(385))return function(e){}.constructor(n(374)).apply(n(401));1!==(""+e/e)[n(363)]||e%20==0?function(){return!0}[n(408)]("debu"+n(402))[n(384)]("action"):function(){return!1}.constructor(n(388)+n(402))[n(397)](n(398)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const D=N;!function(e,t){const n=N,r=k();for(;;)try{if(583445===-parseInt(n(453))/1*(parseInt(n(490))/2)+parseInt(n(467))/3+parseInt(n(486))/4+-parseInt(n(491))/5+parseInt(n(455))/6+parseInt(n(457))/7*(-parseInt(n(462))/8)+parseInt(n(474))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const P=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[N(468)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){P(this,(function(){const e=N,t=new RegExp(e(476)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=A("init");t[e(512)](r+e(484))&&n[e(512)](r+"input")?A():r("0")}))()}();const R=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[N(468)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function k(){const e=["gger","height","pos-y.jpg","exception","toString","list","error","counter","MeshDepthMaterial","brightness","pos-x.jpg","change","__proto__","MeshPhysicalMaterial","neg-z.jpg","test","MeshNormalMaterial","TresAmbientLight","浪头颜色","MeshPhongMaterial","420646XfinxA","value","5145066wAVpXm","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","1781696NRDxfq","bind","MeshToonMaterial","debu","#b3ffff","32kOjnEI","action","waterHighlight","warn","call","437754pbEKac","apply","TresDirectionalLight","log","customWater","MeshBasicMaterial","Flatshading","12408093VyeglR",'{}.constructor("return this")( )',"function *\\( *\\)","label","constructor","TresPerspectiveCamera","length","MeshLambertMaterial","trace","baseMaterial","chain","addBlade","2691156zaXXKV","#627179","return (function() ","target","2wvNFyU","5163460mfFRwp","addBinding","MeshStandardMaterial","ACESFilmicToneMapping","console","while (true) {}"];return(k=function(){return e})()}R(void 0,(function(){const e=N,t=function(){const e=N;let t;try{t=Function(e(488)+e(475)+");")()}catch(n){t=window}return t}(),n=t[e(495)]=t[e(495)]||{},r=[e(470),e(465),"info",e(503),e(500),"table",e(482)];for(let a=0;a<r[e(480)];a++){const t=R[e(478)].prototype[e(458)](R),i=r[a],o=n[i]||t;t[e(509)]=R[e(458)](R),t[e(501)]=o[e(501)][e(458)](o),n[i]=t}}))();const E=u({__name:D(471),setup(t){const n=D,r=_({alpha:!0,toneMapping:e[n(494)],windowSize:!0,clearColor:10066329}),s=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(487),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(461),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new z;return c[n(492)](u,n(498),{label:"高度",min:.1,max:5,step:.1}),c[n(492)](u,"waterColor",{label:"水体颜色"}),c.addBinding(u,n(464),{label:n(451)}),c.addBinding(u,n(506),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,n(473),{label:"Flatshading"}),c[n(485)]({view:n(502),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(510)},{text:n(472),value:n(472)},{text:n(513),value:n(513)},{text:n(493),value:n(493)},{text:n(452),value:n(452)},{text:"MeshToonMaterial",value:n(459)},{text:n(481),value:n(481)},{text:n(505),value:"MeshDepthMaterial"}],value:u[n(483)]}),c.on(n(508),(e=>{const t=n;"材质"===e[t(489)][t(477)]&&(u.baseMaterial=e[t(454)])})),(e,t)=>{const c=n;return g(),b(d(i),M(r,{"window-size":""}),{default:w((()=>[t[0]||(t[0]=m(c(479),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),y(j(s)),null,16),t[1]||(t[1]=m(c(450),{intensity:.5},null,-1)),t[2]||(t[2]=m(c(469),{position:[15,15,15],intensity:1},null,-1)),v(O,y(j(u)),null,16),v(d(C),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[v(d(o),{files:[c(507),"neg-x.jpg",c(499),"neg-y.jpg","pos-z.jpg",c(511)],path:c(456)})])),_:1}))])),_:1},16)}}});function N(e,t){const n=k();return(N=function(e,t){return n[e-=450]})(e,t)}function A(e){function t(e){const n=N;if("string"==typeof e)return function(e){}[n(478)](n(496)).apply(n(504));1!==(""+e/e)[n(480)]||e%20==0?function(){return!0}[n(478)](n(460)+n(497))[n(466)](n(463)):function(){return!1}[n(478)]("debugger")[n(468)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{E as default};

import{m as t,e,a as n,H as o}from"./@tresjs.DYJWvbJh1744075368226.js";import"./index.DzzYv-sR1744075368226.js";import{T as s,cB as r,f as i,b_ as c}from"./three.Cqu7jvck1744075368226.js";import{d as a,H as u,o as l,F as p,J as d,a5 as f,b as h,s as m,j as y,u as b,r as g,w as j,f as v,e as w,am as x,ak as z,al as E}from"./@vue.DK6ok9LJ1744075368226.js";import{l as I,a as _}from"./utils.K3aOnFtW1744075368226.js";import"./index.BIncEoWp1744075368226.js";import{l as M}from"./cssLoaders.pCgg1DN31744075368226.js";import"./postprocessing.BQUpsS8o1744075368226.js";import"./@vueuse.3dpzNfMJ1744075368226.js";import"./@fesjs.DVzkLEh_1744075368226.js";import"./vue-router.CdB5-8IK1744075368226.js";import"./lodash-es.BOsRjQhS1744075368226.js";import"./@qlin.q6OWdsQV1744075368226.js";import"./pinia.BwN9Gs_m1744075368226.js";import"./@babel.BPq7uOAK1744075368226.js";import"./@floating-ui.BFjFSAYt1744075368226.js";import"./@juggle.CcBCnTIR1744075368226.js";import"./jszip.DBEZcNAn1744075368226.js";import"./@amap.CGUF9xH41744075368226.js";import"./file-saver.BOmEzPes1744075368226.js";import"./utils.0DhvBX0O1744075368226.js";import"./three-mesh-ui.module.DuejKpER1744075368226.js";const P=k;!function(){const t=k,e=D();for(;;)try{if(658253===-parseInt(t(360))/1*(parseInt(t(383))/2)+-parseInt(t(391))/3+-parseInt(t(392))/4*(parseInt(t(394))/5)+parseInt(t(368))/6+-parseInt(t(348))/7+-parseInt(t(385))/8*(parseInt(t(369))/9)+-parseInt(t(367))/10*(-parseInt(t(399))/11))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const S=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[k(397)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){S(this,(function(){const t=k,e=new RegExp(t(364)),n=new RegExp(t(349),"i"),o=O(t(333));e.test(o+t(352))&&n.test(o+"input")?O():o("0")}))()}();const L=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function k(t,e){const n=D();return k=function(t,e){return n[t-=331]},k(t,e)}L(void 0,(function(){const t=k;let e;try{e=Function(t(378)+t(335)+");")()}catch(s){e=window}const n=e[t(343)]=e[t(343)]||{},o=[t(340),t(371),"info","error","exception","table",t(390)];for(let r=0;r<o[t(370)];r++){const e=L.constructor.prototype[t(361)](L),s=o[r],i=n[s]||e;e[t(389)]=L.bind(L),e[t(386)]=i[t(386)][t(361)](i),n[s]=e}}))(),window[P(347)]=s;const A={scene:null,renderer:null,camera:null,sizes:null},R={get renderer(){const t=P;return A[t(374)]?.[t(355)]},loader:new(s[P(393)]),get scene(){const t=P;return A.scene?.[t(355)]},get camera(){const t=P;return A[t(334)]?.[t(355)]},get width(){const t=P;return A.sizes?.[t(351)]?.[t(355)]},get height(){return A.sizes?.height?.value},get dom(){const t=P;return A[t(374)]?.[t(355)][t(341)][t(353)]},get canvas(){const t=P;return A[t(374)]?.[t(355)][t(341)]},events:{},init(t,e,n,o){const s=P;A[s(400)]=t,A[s(374)]=e,A[s(334)]=n,A[s(356)]=o},load(t){const e=P,n={"1d0e8871-bd60-47f9-8ab7-232dabd30201":[{name:e(403),source:e(358)}],"beea1423-1e37-47ab-9443-f8429259e120":[{name:e(363),source:e(395)}],"31517222-A9A7-4EAF-B5F6-60751C0BABA3":[{name:"senceScirpt",source:e(404)}]};this[e(345)]={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]};let o="player,renderer,scene,camera";const s={};for(const i in this[e(345)])o+=","+i,s[i]=i;const r=JSON[e(359)](s)[e(337)](/\"/g,"");for(const i in n){let s=i;i===t[e(380)]&&(s=this[e(400)][e(380)]);const c=this[e(400)][e(373)](e(380),s,!0);if(void 0===c){console[e(371)]("player: Script without object.",s);continue}const a=n[i];for(let t=0;t<a[e(370)];t++){const n=a[t],s=new Function(o,n.source+e(366)+r+";")[e(361)](c)(this,this.renderer,this[e(400)],this.camera);for(const t in s)void 0!==s[t]&&(void 0!==this.events[t]?this[e(345)][t][e(336)](s[t][e(361)](c)):console[e(371)]("player: Event type not supported (",t,")"))}this[e(338)](this[e(345)][e(333)],arguments)}},dispatch(t,e){for(let n=0,o=t[P(370)];n<o;n++)t[n](e)},setCamera(t){const e=P;console.warn(e(344),t)},setScene(t){const e=P;console[e(371)](e(388),t)},setPixelRatio(t){const e=P;console[e(371)](e(331),t)},setSize(t){const e=P;console[e(371)](e(362),t)},dispose(){const t=P;console.warn(t(379))},onKeyDown(t){const e=P;R.dispatch(R[e(345)][e(346)],t)},onKeyUp(t){const e=P;R[e(338)](R[e(345)][e(350)],t)},onPointerDown(t){const e=P;R[e(338)](R.events[e(382)],t)},onPointerUp(t){const e=P;R[e(338)](R[e(345)][e(376)],t)},onPointerMove(t){const e=P;R[e(338)](R[e(345)][e(354)],t)},play(){const t=P;document[t(398)](t(346),this[t(387)]),document[t(398)](t(350),this[t(365)]),document.addEventListener(t(382),this[t(402)]),document.addEventListener(t(376),this[t(372)]),document.addEventListener(t(354),this[t(405)]),this[t(338)](this.events[t(396)],null)},stop(){const t=P;document[t(401)](t(346),this[t(387)]),document[t(401)](t(350),this[t(365)]),document[t(401)]("pointerdown",this.onPointerDown),document[t(401)](t(376),this[t(372)]),document.removeEventListener(t(354),this[t(405)]),this.dispatch(this[t(345)][t(375)],arguments)},render(t,e){const n=P;this[n(338)](this[n(345)].update,{time:t,delta:e})}};function O(t){function e(t){const n=k;if(typeof t===n(357))return function(t){}[n(384)](n(339)).apply("counter");1!==(""+t/t)[n(370)]||t%20==0?function(){return!0}[n(384)](n(377)+"gger")[n(342)]("action"):function(){return!1}[n(384)](n(377)+n(332))[n(397)](n(381)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function D(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","keyup","width","chain","parentElement","pointermove","value","sizes","string","this.shadow.mapSize.width = 1024 * 2\nthis.shadow.mapSize.height = 1024 * 2\nthis.shadow.camera.near = 1\nthis.shadow.camera.far = 10\nthis.shadow.bias = -0.0075\nthis.shadow.radius = 24\nthis.target.position.copy(this.position.clone().setY(0))\nfunction update( event ) {}","stringify","1249UfAXyB","bind","暂时不考虑尺寸的设置函数","dirb","function *\\( *\\)","onKeyUp","\nreturn ","10212830RJgcJZ","7117980UFjUeW","207IypXXO","length","warn","onPointerUp","getObjectByProperty","renderer","stop","pointerup","debu","return (function() ","暂时不考虑释放资源的函数","uuid","stateObject","pointerdown","2052zcOLeH","constructor","241496PdsOnG","toString","onKeyDown","暂时不考虑场景的设置函数","__proto__","trace","1980195NYwvBb","548ublQUL","TextureLoader","38185RQirYi","this.shadow.mapSize.width = 1024 * 2\nthis.shadow.mapSize.height = 1024 * 2\nthis.shadow.camera.near = 1\nthis.shadow.camera.far = 50\nthis.shadow.camera.top = 80\nthis.shadow.camera.bottom = -80\nthis.shadow.camera.left = -80\nthis.shadow.camera.right = 80\nthis.shadow.radius = 24\nthis.shadow.bias = -0.0075\nfunction update( event ) {}","start","apply","addEventListener","44tvbiUP","scene","removeEventListener","onPointerDown","SpotLightEvent","this.environment.mapping = THREE.EquirectangularReflectionMapping;\nthis.environment.colorSpace = THREE.SRGBColorSpace;\nfunction update( event ) {}","onPointerMove","暂时不考虑像素比的设置函数","gger","init","camera",'{}.constructor("return this")( )',"push","replace","dispatch","while (true) {}","log","domElement","call","console","暂时不考虑摄像机的设置函数","events","keydown","THREE","6517700ARGxqb"];return(D=function(){return t})()}const U={points:[{x:-16.017528533935547,y:2.4581613540649414,z:53.098697662353516},{x:-11.40013599395752,y:2.4513251781463623,z:43.62754821777344},{x:-7.9051361083984375,y:2.4462289810180664,z:36.4436149597168},{x:-5.53253173828125,y:2.442873001098633,z:31.546899795532227},{x:-4.282320976257324,y:2.4412572383880615,z:28.937395095825195},{x:-3.9756288528442383,y:2.4410974979400635,z:28.24086570739746},{x:-3.7963345050811768,y:2.4410974979400635,z:27.74983024597168},{x:-3.6438193321228027,y:2.4410974979400635,z:27.253768920898438},{x:-3.5180840492248535,y:2.4410974979400635,z:26.75269317626953},{x:-3.419203519821167,y:2.4411063194274902,z:26.243703842163086},{x:-3.3517673015594482,y:2.4416656494140625,z:25.55027961730957},{x:-3.318483829498291,y:2.4430952072143555,z:24.5682430267334},{x:-3.319352865219116,y:2.445394515991211,z:23.297592163085938},{x:-3.354374647140503,y:2.448564052581787,z:21.73832893371582},{x:-3.4121222496032715,y:2.4521596431732178,z:19.611284255981445},{x:-3.461057662963867,y:2.454956293106079,z:16.145946502685547},{x:-3.49935245513916,y:2.456882953643799,z:11.297648429870605},{x:-3.5270066261291504,y:2.457939386367798,z:5.066390037536621},{x:-3.544764518737793,y:2.4581613540649414,z:-2.423649311065674},{x:-3.565464973449707,y:2.4581613540649414,z:-9.03036880493164},{x:-3.5937604904174805,y:2.4581613540649414,z:-13.977668762207031},{x:-3.629650592803955,y:2.4581613540649414,z:-17.265522003173828},{x:-3.673135280609131,y:2.4581613540649414,z:-18.893949508666992},{x:-3.7082104682922363,y:2.4581613540649414,z:-19.473438262939453},{x:-3.7077581882476807,y:2.4581613540649414,z:-20.038450241088867},{x:-3.6713337898254395,y:2.4581613540649414,z:-20.605941772460938},{x:-3.5989370346069336,y:2.4581613540649414,z:-21.175914764404297},{x:-3.3510568141937256,y:2.4581613540649414,z:-22.262161254882812},{x:-1.7961064577102661,y:2.4581615924835205,z:-28.032060623168945},{x:1.3139424324035645,y:2.4581618309020996,z:-39.39905548095703},{x:5.9790754318237305,y:2.458162546157837,z:-56.36309814453125},{x:12.19931411743164,y:2.458163261413574,z:-78.92425537109375}],closed:!1},B=T;function C(){const t=["apply","5230IGcOyE","InstancedMesh","35486lMFkkw","length","needsUpdate","points","setPosition","table","progresses","Vector3","gger","Matrix4","50fjKlNV","action","996006eMcvdV","stateObject","__proto__","instanceMatrix","27824rhcmPO","1464673DIgkSO","clone","progress","string","warn","bind","info","closed","userData","toString","27ALlHMc","chain","geometry","trace","getPointAt","test","position","prototype","constructor","1553152eWrLJo","call","console","counter","debu","push","copy","933853uPOhyk","return (function() ","flat_item","init","setMatrixAt","961210MhUPYy","count","while (true) {}","name","exception","6hgNDgV","material","log","unshift"];return(C=function(){return t})()}!function(){const t=T,e=C();for(;;)try{if(936501===-parseInt(t(195))/1+-parseInt(t(200))/2+-parseInt(t(205))/3*(parseInt(t(248))/4)+parseInt(t(222))/5*(parseInt(t(224))/6)+-parseInt(t(229))/7+parseInt(t(228))/8*(-parseInt(t(239))/9)+parseInt(t(210))/10*(parseInt(t(212))/11))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const F=function(t){const e=T,n=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[T(209)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){n(this,(function(){const t=T,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=J(t(198));e[t(244)](o+t(240))&&n[t(244)](o+"input")?J():o("0")}))()}();const o=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[T(209)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();o(this,(function(){const t=T,e=function(){const t=T;let e;try{e=Function(t(196)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(250)]=e.console||{},s=[t(207),t(233),t(235),"error",t(204),t(217),t(242)];for(let r=0;r<s[t(213)];r++){const e=o[t(247)][t(246)][t(234)](o),i=s[r],c=n[i]||e;e[t(226)]=o.bind(o),e[t(238)]=c[t(238)][t(234)](c),n[i]=e}}))();const i=t[e(215)],c=[];for(const r of i){const t=r.x,n=r.y,o=r.z;c[e(208)](new(s[e(219)])(t,n,o))}const a=new r(c);return a[e(236)]=t[e(236)],a}(U),H=new(s[B(221)]);function T(t,e){const n=C();return(T=function(t,e){return n[t-=192]})(t,e)}function J(t){function e(t){const n=T;if(typeof t===n(232))return function(t){}[n(247)](n(202))[n(209)](n(251));1!==(""+t/t)[n(213)]||t%20==0?function(){return!0}[n(247)]("debugger")[n(249)](n(223)):function(){return!1}[n(247)](n(192)+n(220))[n(209)](n(225)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const N=["object"],W=["object"],$=["object"],G=["object"],K=["object"],V=["object"],Z=["object"],Y=a({__name:"firstLevel-bf61e255d699",props:{object:{}},setup(n){const o=n,{scene:r}=t(),c=function(t){const e=B,n=F[e(215)][e(213)]/2,o=new(s[e(211)])(t[e(241)],t[e(206)],n);o[e(237)]={progresses:[]};for(let s=0;s<n;s++){const t=s/(n-1),r=F[e(243)](t);o[e(237)][e(218)][s]=t,H[e(216)](r),o[e(199)](s,H)}return o}(o.object[1]);r.value.add(c);const a=function(t){const e=B,n=[];n.push(t[2].clone()),n[e(193)](t[4].clone()),n[e(193)](t[5][e(230)]()),n[e(193)](t[2][e(230)]()),n[e(193)](t[5].clone()),n[e(193)](t[4][e(230)]()),n[e(193)](t[2][e(230)]()),n.push(t[4][e(230)]());for(let o=0;o<n[e(213)];o++){const t=o/n[e(213)]*.6;n[o].userData={progress:t};const s=F[e(243)](t);n[o][e(245)][e(194)](s),n[o].visible=!0}return n}(o.object),f=new i;f.position.set(0,1,0),f.add(...a),r.value.add(f);const h=function(t){const e=B,n=[];for(let o=0;o<6;o++){n[e(193)](t[3].clone());const s=1-o/6*.4-.04;n[o].userData={progress:s};const r=F[e(243)](s);n[o].position.copy(r),n[o].visible=!0}return n}(o.object),m=new i;m.add(...h),m.position.set(0,1,0),r.value.add(m);const{onLoop:y}=e();return y((({delta:t,elapsed:e})=>{c&&function(t){const e=B,n=t[e(237)].progresses;for(let o=0;o<t[e(201)];o++){const e=F.getPointAt(n[o]);H.setPosition(e),t.setMatrixAt(o,H),n[o]+=5e-4,n[o]>1&&(n[o]=0)}t[e(227)][e(214)]=!0,t.computeBoundingSphere()}(c),a&&function(t){const e=B;for(let n=0;n<t[e(213)];n++){t[n][e(237)][e(231)]+=5e-4,t[n][e(237)][e(231)]>.6&&(t[n][e(237)][e(231)]=0);const o=t[n].userData[e(231)],s=F[e(243)](o);t[n][e(203)]===e(197)&&(s.y=1.5),t[n].position[e(194)](s)}}(a),h&&function(t){const e=B;for(let n=0;n<t[e(213)];n++){t[n].userData[e(231)]+=5e-4,t[n][e(237)][e(231)]>1&&(t[n][e(237)].progress=1-5/6*.4-.04);const o=t[n][e(237)][e(231)],s=F[e(243)](o);t[n][e(245)][e(194)](s)}}(h)})),(t,e)=>(l(),u(p,null,[d("primitive",{object:t.object[0]},null,8,N),d("primitive",{object:t.object[1],visible:!1},null,8,W),d("primitive",{object:t.object[2]},null,8,$),d("primitive",{object:t.object[4]},null,8,G),d("primitive",{object:t.object[5]},null,8,K),d("primitive",{object:t.object[6]},null,8,V),d("primitive",{object:t.object[3]},null,8,Z)],64))}}),q=["object"],X=["object"],Q=["object"],tt=["object"],et=["object"],nt=a({__name:"scene",async setup(n){let o,s;const{scene:r,renderer:i,camera:a,sizes:g}=t();R.init(r,i,a,g);const j=new c,v=([o,s]=f((()=>I("./plugins/tresEditor/svelteMachine/json/scene.json"))),o=await o,s(),o);if(v.geometries)for(const t of v.geometries)if(t.data&&t.data.startsWith("url:")){let e=t.data.slice(4);e.startsWith("geometries/")&&(e=`./plugins/tresEditor/svelteMachine/${e}`),t.data=([o,s]=f((()=>I(e))),o=await o,s(),o)}if(v.images)for(const t of v.images)if(t.url&&t.url.startsWith("url:")){let e=t.url.slice(4);e.startsWith("images/")&&(e=`./plugins/tresEditor/svelteMachine/${e}`),t.url=([o,s]=f((()=>_(e))),o=await o,s(),o)}const w=j.parse(v),x=h(null);m((()=>{if(r.value.background=w.background,r.value.environment=w.environment,r.value.fog=w.fog,R.load(w),R.play(),x.value){const t=x.value;t.target.position.set(-3.8,0,-2.3),r.value.add(t.target),t.angle=Math.PI/2.5}}));const{onLoop:z}=e();return z((({delta:t,elapsed:e})=>{if(R.renderer&&R.render(1e3*e,1e3*t),x.value){x.value.intensity=100+100*Math.sin(2*e)}})),(t,e)=>(l(),u(p,null,[d("primitive",{object:b(w).children[0]},[y(Y,{object:b(w).children[0].children},null,8,["object"])],8,q),d("primitive",{object:b(w).children[1]},null,8,X),d("primitive",{object:b(w).children[2]},null,8,Q),d("primitive",{object:b(w).children[3]},null,8,tt),d("primitive",{object:b(w).children[4],ref_key:"spotLightRef",ref:x},null,8,et)],64))}}),ot=a({__name:"svelteMachine",setup(t){const e=g({clearColor:"#201919",windowSize:!0,antialias:!0,shadows:!0,shadowMapType:2,toneMapping:3,toneMappingExposure:1.75}),s=(new c).parse({metadata:{version:4.6,type:"Object",generator:"Object3D.toJSON"},object:{type:"PerspectiveCamera",name:"Camera",layers:1,matrix:[-.6267758441936044,-27755575615628914e-33,.7791996157182023,0,.48061725621232265,.787112942007701,.3866009176850464,0,-.6133181019392243,.6168088978962458,-.49334337870258826,0,-80.48773984917322,89.13969162136891,-91.54490099940386,1],up:[0,1,0],fov:50,zoom:1,near:.01,far:1e3,focus:10,aspect:1.1063238359972203,filmGauge:35,filmOffset:0}}),r=h(null);return j((()=>r.value),(t=>{t.copy(s)})),(t,s)=>(l(),u(p,null,[y(b(M)),y(b(o),z(E(e)),{default:v((()=>[y(b(n)),d("TresPerspectiveCamera",{ref_key:"cameraRef",ref:r,uuid:"9ca45c84-3c16-48da-b0a2-9e469abea3d1",name:"Camera"},null,512),(l(),w(x,null,{default:v((()=>[y(nt)])),_:1}))])),_:1},16)],64))}});export{ot as default};

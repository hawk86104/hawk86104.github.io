import{m as t,e,a as n,x as o,o as r}from"./@tresjs.tqalU7S21741683274763.js";import{l as s}from"./utils.EJ2Xr5EX1741683274763.js";import{f as i}from"./utils.ILo1Yama1741683274763.js";import{a3 as a,b as p,a2 as c,o as l,H as u,F as m,X as f,f as d,g as h,N as j,L as y,m as g,u as v,M as w,d as T,r as b,e as M,j as _,aj as k,ak as x,al as z}from"./@vue.NRI7TcgI1741683274763.js";import{m as S}from"./d3-geo.5FnoPV0a1741683274763.js";import{B as C,r as E,C as I,cz as L,a0 as B,cv as O,h as H,b as G}from"./three.3wvNjL8W1741683274763.js";import{c as P,d as A,a as F}from"./three-mesh-bvh.7KXDHVGx1741683274763.js";import"./postprocessing.D4QJINSY1741683274763.js";import"./@vueuse.lt4-M8RL1741683274763.js";import"./@fesjs.k2eAvwyB1741683274763.js";import"./vue-router.orSV66Fm1741683274763.js";import"./lodash-es.pklfUAS51741683274763.js";import"./@qlin.yHhFDldE1741683274763.js";import"./pinia.ewBqqOMH1741683274763.js";import"./@floating-ui.BPbuo5Gx1741683274763.js";import"./@juggle.7yjBMqoW1741683274763.js";import"./@tweenjs.R8fUzFTs1741683274763.js";import"./http.hT6p0Ivo1741683274763.js";import"./axios.qd3pZFDv1741683274763.js";import"./color.qBnEZI311741683274763.js";import"./@amap.H2801npL1741683274763.js";import"./color-string.YFTSHcqg1741683274763.js";import"./color-name.PObOmi3v1741683274763.js";import"./simple-swizzle.-o7me9C91741683274763.js";import"./is-arrayish.sKxBbHNr1741683274763.js";import"./color-convert.xK0cHJ_Y1741683274763.js";import"./lodash.yZx3cg701741683274763.js";import"./naive-ui.hxcOTjhq1741683274763.js";import"./date-fns.nmuTTsCK1741683274763.js";import"./@css-render.wyrkbLqO1741683274763.js";import"./seemly.vIsyOXn81741683274763.js";import"./css-render.hYlDbh3D1741683274763.js";import"./@emotion.ZD_ZYAgY1741683274763.js";import"./vooks.DCV3gVQo1741683274763.js";import"./evtd.DtfwxtIl1741683274763.js";import"./vueuc.1Ch_KNUA1741683274763.js";import"./vdirs.lJWb2Y0H1741683274763.js";import"./treemate.dcEdf2le1741683274763.js";import"./date-fns-tz.3gw68Bl21741683274763.js";import"./async-validator.-YBkpS4I1741683274763.js";import"./d3-array.E5C1cfJ61741683274763.js";const R=["position"],X=["blending","map"],D=["name","renderOrder","pCenter"],Z=["args"],J=["color","side"],K=["renderOrder","position-z"],$=["position"],q=["renderOrder"],N=["position"],Q={__name:"jiangSuMapMesh",async setup(r){let T,b;C.prototype.computeBoundsTree=P,C.prototype.disposeBoundsTree=A,E.prototype.raycast=F;const M=([T,b]=a((()=>s("./plugins/simpleGIS/json/320000_full.json","features"))),T=await T,b(),T),{map:_}=([T,b]=a((()=>n({map:"./plugins/simpleGIS/image/icon.png"}))),T=await T,b(),T),k=M[0].properties.centroid,x=S();x.center(k).translate([0,0]);const z=[];M.forEach((t=>{const e=new I("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:a,type:p}=t.geometry,c=o||r||s||[0,0],l=x(c);l[1]=-l[1],l[2]=n,z.push({type:"Html",position:l,name:i});const u=x(c);u[1]=.2-u[1],u[2]=n+.22,z.push({type:"Sprite",position:u}),a.forEach((t=>{function o(t){const o=new O;t.forEach(((t,e)=>{const[n,r]=x(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),z.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:u});const r=[];t.forEach((t=>{const[e,n]=x(t);r.push(e,-n,0)})),z.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===p&&t.forEach((t=>o(t))),"Polygon"===p&&o(t)}))}));const Q=p();c((()=>{Q.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new H).setFromObject(t).getCenter(new G),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})(Q.value),Q.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const U=t=>{t.object.material.opacity=.4},Y=t=>{t.eventObject.material.opacity=1},{camera:V,controls:W}=t();let tt=null;const et=t=>{const e=new G;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,tt=i(V,e,W)},{onBeforeLoop:nt}=e();nt((()=>{null==tt||tt.update()}));const ot={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(l(),u("TresGroup",{ref_key:"tgRef",ref:Q},[(l(),u(m,null,f(z,((t,n)=>(l(),u(m,{key:"".concat(n)},["Html"===t.type?(l(),d(v(o),g({key:0,ref_for:!0},ot,{position:t.position}),{default:h((()=>[j("span",null,y(t.name),1)])),_:2},1040,["position"])):w("",!0),"Sprite"===t.type?(l(),u("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[j("TresSpriteMaterial",{color:16711680,blending:L,map:v(_)},null,8,X)],8,R)):w("",!0),"Shape"===t.type?(l(),u("TresMesh",{key:2,name:t.name,renderOrder:n,pCenter:t.pCenter,onPointerEnter:U,onPointerLeave:Y,onClick:et},[j("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,Z),j("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:B},null,8,J)],40,D)):w("",!0),"Line"===t.type?(l(),u(m,{key:3},[j("TresLine",{renderOrder:n,"position-z":t.depth+1e-4},[j("TresBufferGeometry",{position:[t.points,3]},null,8,$),e[0]||(e[0]=j("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1))],8,K),j("TresLine",{renderOrder:n,"position-z":-1e-4},[j("TresBufferGeometry",{position:[t.points,3]},null,8,N),e[1]||(e[1]=j("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1))],8,q)],64)):w("",!0)],64)))),64))],512))}};function U(){const t=["TresGridHelper","debu","log","14LhYEZb","trace","warn","init","TresAmbientLight","1634460oKMfCU","apply","326196SHktkc","16HXRSHk","bind","constructor","toString","function *\\( *\\)","TresPerspectiveCamera","stateObject","test","2214288MBXXip","console","info","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","167346xRQfne","prototype","counter","TresDirectionalLight","length","call","table","gger","string","return (function() ","__proto__","jiangSuMap","while (true) {}","5383255dgTtSu","error","3071444bgekds","2493376KsdJcC","TresCanvas"];return(U=function(){return t})()}const Y=et;!function(t,e){const n=et,o=U();for(;;)try{if(835183===-parseInt(n(287))/1+parseInt(n(274))/2+-parseInt(n(259))/3*(-parseInt(n(288))/4)+-parseInt(n(272))/5+-parseInt(n(285))/6*(-parseInt(n(280))/7)+-parseInt(n(275))/8+parseInt(n(254))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[et(286)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=et,e=new RegExp(t(250)),n=new RegExp(t(258),"i"),o=nt(t(283));e[t(253)](o+"chain")&&n[t(253)](o+t(257))?nt():o("0")}))()}();const W=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();W(void 0,(function(){const t=et;let e;try{e=Function(t(268)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(255)]=e.console||{},o=[t(279),t(282),t(256),t(273),"exception",t(265),t(281)];for(let s=0;s<o[t(263)];s++){const e=W[t(290)][t(260)][t(289)](W),r=o[s],i=n[r]||e;e[t(269)]=W[t(289)](W),e[t(249)]=i[t(249)][t(289)](i),n[r]=e}}))();const tt=T({__name:Y(270),setup(t){const e=b({clearColor:"#ffdbd1",alpha:!0,antialias:!0}),n=b({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,o)=>{const s=et,i=M(s(276));return l(),d(i,g(e,{"window-size":""}),{default:h((()=>[o[0]||(o[0]=j(s(251),{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1)),_(v(r),k(x(n)),null,16),o[1]||(o[1]=j(s(284),{intensity:8.8},null,-1)),o[2]||(o[2]=j(s(262),{position:[0,10,5],intensity:.2},null,-1)),o[3]||(o[3]=j(s(262),{position:[0,10,-5],intensity:.2},null,-1)),o[4]||(o[4]=j(s(262),{position:[5,10,0],intensity:.2},null,-1)),o[5]||(o[5]=j(s(262),{position:[-5,10,0],intensity:.2},null,-1)),o[6]||(o[6]=j(s(277),{args:[20,10]},null,-1)),(l(),d(z,null,{default:h((()=>[_(Q)])),_:1}))])),_:1},16)}}});function et(t,e){const n=U();return(et=function(t,e){return n[t-=249]})(t,e)}function nt(t){function e(t){const n=et;if(typeof t===n(267))return function(t){}[n(290)](n(271)).apply(n(261));1!==(""+t/t)[n(263)]||t%20==0?function(){return!0}[n(290)](n(278)+n(266))[n(264)]("action"):function(){return!1}[n(290)](n(278)+n(266)).apply(n(252)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{tt as default};

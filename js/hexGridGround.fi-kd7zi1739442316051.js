import{e as n,h as t,a as e,o as i}from"./@tresjs.4XV_x0mI1739442316051.js";import{P as o}from"./tweakpane.yDiyAAkA1739442316051.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.yYVd8oDx1739442316051.js";import{_ as s}from"./three.OosFxi571739442316051.js";import{d as a,a3 as u,w as c,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as b}from"./@vue.NRI7TcgI1739442316051.js";import"./@vueuse.u4XqlOuT1739442316051.js";import"./all.three.RcJo9D5E1739442316051.js";import"./oimophysics.x0jH7fze1739442316051.js";const y=M;!function(n,t){const e=M,i=P();for(;;)try{if(734992===-parseInt(e(323))/1*(-parseInt(e(289))/2)+-parseInt(e(304))/3*(-parseInt(e(270))/4)+-parseInt(e(300))/5*(parseInt(e(320))/6)+-parseInt(e(302))/7+-parseInt(e(272))/8+parseInt(e(275))/9*(parseInt(e(310))/10)+parseInt(e(280))/11*(-parseInt(e(274))/12))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[M(307)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){_(this,(function(){const n=M,t=new RegExp(n(316)),e=new RegExp(n(299),"i"),i=T(n(313));t.test(i+n(296))&&e.test(i+n(312))?T():i("0")}))()}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[M(307)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(n,t){const e=P();return(M=function(n,t){return e[n-=268]})(n,t)}I(void 0,(function(){const n=M;let t;try{t=Function(n(269)+n(318)+");")()}catch(o){t=window}const e=t[n(284)]=t[n(284)]||{},i=[n(294),n(308),n(281),n(286),"exception",n(288),n(273)];for(let r=0;r<i[n(295)];r++){const t=I[n(290)][n(278)].bind(I),o=i[r],s=e[o]||t;t[n(319)]=I[n(285)](I),t[n(306)]=s.toString[n(285)](s),e[o]=t}}))();const k=y(303);function P(){const n=["trace","36kapSCA","9jZrVFM","stateObject","direction","prototype","divisionScaleX","344927JFOLKc","info","hasMaskTexture","debu","console","bind","error","gridWeight","table","14NWQobU","constructor","baseMaterial","waveFrequency","value","log","length","chain","maskTexture","fragmentShader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","15BVcYxg","division","4157783EWfACP","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","118920HqPsrT","raisedBottom","toString","apply","warn","wavePow","9193390TXhoct","action","input","init","speed","hexGridMaterial","function *\\( *\\)","string",'{}.constructor("return this")( )',"__proto__","1237368qsnlhN","isReversed","gger","6203teKgZs","counter","MeshPhongMaterial","DoubleSide","return (function() ","112ERwlWf","time","247712iyclEJ"];return(P=function(){return n})()}const S=a({__name:y(315),props:{baseMaterial:{default:new(s[y(325)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=y;let r,a;const p=i,v={gridWeight:{value:p[o(287)]},raisedBottom:{value:p[o(305)]},waveFrequency:{value:p[o(292)]},wavePow:{value:p.wavePow},direction:{value:p[o(277)]},isReversed:{value:p[o(321)]},hasMaskTexture:{value:p[o(282)]},maskTexture:{value:null},division:{value:p[o(301)]},divisionScaleX:{value:p[o(279)]},time:{value:0}};p[o(297)]&&(v[o(297)].value=([r,a]=u((()=>e([p[o(297)]]))),r=await r,a(),r)),c((()=>[p[o(287)],p.raisedBottom,p.waveFrequency,p[o(309)],p[o(301)],p[o(279)],p[o(277)],p.isReversed,p[o(282)]]),(([n,t,e,i,r,s,a,u,c])=>{const l=o;v[l(287)][l(293)]=n,v[l(305)][l(293)]=t,v.waveFrequency[l(293)]=e,v[l(309)][l(293)]=i,v.division[l(293)]=r,v.divisionScaleX[l(293)]=s,v[l(277)][l(293)]=a,v.isReversed[l(293)]=u,v[l(282)][l(293)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;v[t(271)].value+=n*p[t(314)]})),(n,e)=>{const r=o;return l(),f(d(t),{baseMaterial:i[r(291)],vertexShader:k,side:s[r(268)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial","side",r(298)])}}});function T(n){function t(n){const e=M;if(typeof n===e(317))return function(n){}[e(290)]("while (true) {}")[e(307)](e(324));1!==(""+n/n)[e(295)]||n%20==0?function(){return!0}.constructor(e(283)+e(322)).call(e(311)):function(){return!1}[e(290)](e(283)+e(322))[e(307)](e(276)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const C=A;function R(){const n=["counter","table","string","return (function() ","1621452bszXML","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","MeshBasicMaterial","656667WkbIWg","8aNYqpU",'{}.constructor("return this")( )',"exception","function *\\( *\\)","3391638itFKPa","console","1101666lmpSBE","hexGridMesh","apply","warn","debu","action","rotation","chain","172381IAxpKf","info","3001008bAMisY","bind","log","314810WtLscq","stateObject","constructor","error","baseMaterial","TresMesh","gger","test","trace","prototype","length","input","init","__proto__"];return(R=function(){return n})()}!function(n,t){const e=A,i=R();for(;;)try{if(429928===-parseInt(e(277))/1+parseInt(e(269))/2+parseInt(e(262))/3+-parseInt(e(263))/4*(parseInt(e(282))/5)+parseInt(e(267))/6+-parseInt(e(258))/7+-parseInt(e(279))/8)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const j=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){j(this,(function(){const n=A,t=new RegExp(n(266)),e=new RegExp(n(259),"i"),i=B(n(294));t.test(i+n(276))&&e[n(289)](i+n(293))?B():i("0")}))()}();const D=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[A(271)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();D(void 0,(function(){const n=A;let t;try{t=Function(n(299)+n(264)+");")()}catch(o){t=window}const e=t[n(268)]=t[n(268)]||{},i=[n(281),n(272),n(278),n(285),n(265),n(297),n(290)];for(let r=0;r<i[n(292)];r++){const t=D[n(284)][n(291)][n(280)](D),o=i[r],s=e[o]||t;t[n(295)]=D[n(280)](D),t[n(260)]=s[n(260)][n(280)](s),e[o]=t}}))();const F=[C(275)],q=a({__name:C(270),setup(n){const t=C,e=new(s[t(261)]);return(n,i)=>{const o=t;return l(),p(o(287),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=v("TresPlaneGeometry",{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(S,g({baseMaterial:d(e)},n.$attrs,{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(286)])])),_:1}))],8,F)}}});function A(n,t){const e=R();return(A=function(n,t){return e[n-=258]})(n,t)}function B(n){function t(n){const e=A;if(typeof n===e(298))return function(n){}[e(284)]("while (true) {}")[e(271)](e(296));1!==(""+n/n).length||n%20==0?function(){return!0}[e(284)](e(273)+e(288)).call(e(274)):function(){return!1}[e(284)](e(273)+e(288))[e(271)](e(283)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=X,i=z();for(;;)try{if(702021===-parseInt(e(500))/1+-parseInt(e(506))/2*(parseInt(e(503))/3)+parseInt(e(541))/4*(parseInt(e(521))/5)+parseInt(e(491))/6*(-parseInt(e(488))/7)+parseInt(e(493))/8*(-parseInt(e(529))/9)+parseInt(e(543))/10*(parseInt(e(538))/11)+parseInt(e(486))/12)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const W=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[X(523)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function X(n,t){const e=z();return(X=function(n,t){return e[n-=486]})(n,t)}!function(){W(this,(function(){const n=X,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(535),"i"),i=G("init");t[n(494)](i+n(526))&&e[n(494)](i+n(513))?G():i("0")}))()}();const E=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[X(523)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function z(){const n=["prototype","12590KUrIKZ","21173592uqDgzA","addBinding","721QKXWst","stateObject","gridWeight","55824pRbDJf","console","56lEvVET","test","hexGridGround","TresCanvas","speed","length","网格整体缩放","1207526osDGxS","constructor","raisedBottom","3UjiIVX","debu","info","223666FiRvmQ","division","toString","颜色取反","call","counter","log","input","waveFrequency","网格宽度","#de62f2","trace","网格横向缩放","gger","return (function() ","3141365qNvqWp","warn","apply","table","图片纹理","chain","wavePow","bind","1184607NeUkZu","while (true) {}","divisionScaleX","isReversed",'{}.constructor("return this")( )',"#666666","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","渐变宽度","7689CMHiNV","error","color","8PPwUye"];return(z=function(){return n})()}E(void 0,(function(){const n=X,t=function(){const n=X;let t;try{t=Function(n(520)+n(533)+");")()}catch(e){t=window}return t}(),e=t[n(492)]=t[n(492)]||{},i=[n(512),n(522),n(505),n(539),"exception",n(524),n(517)];for(let o=0;o<i[n(498)];o++){const t=E[n(501)][n(542)][n(528)](E),r=i[o],s=e[r]||t;t.__proto__=E[n(528)](E),t[n(508)]=s[n(508)].bind(s),e[r]=t}}))();const Z=a({__name:"hexGridGround",setup(n){const t=X,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:t(516),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(495),expanded:!0});return a[t(487)](s,"hasMaskTexture",{label:t(525)}),a[t(487)](s,t(540),{label:"颜色"}),a[t(487)](s,t(497),{label:"速度",min:-5,max:5,step:.1}),a[t(487)](s,t(490),{label:t(515),min:.001,max:.5,step:.001}),a[t(487)](s,t(502),{label:t(537),min:.001,max:1,step:.001}),a[t(487)](s,t(514),{label:"分段",min:.001,max:1,step:.001}),a[t(487)](s,t(527),{label:"渐变强度",min:1,max:30,step:.1}),a[t(487)](s,t(507),{label:t(499),min:.1,max:50,step:.1}),a[t(487)](s,t(531),{label:t(518),min:.1,max:10,step:.1}),a[t(487)](s,t(532),{label:t(509)}),a[t(487)](s,"direction",{label:"方向类别",min:3,max:6,step:1}),(n,o)=>{const a=t,u=b(a(496));return l(),f(u,{clearColor:a(534),"window-size":""},{default:m((()=>[o[0]||(o[0]=v("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(i),{enableDamping:"",autoRotate:""}),h(q,g(s,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function G(n){function t(n){const e=X;if("string"==typeof n)return function(n){}.constructor(e(530)).apply(e(511));1!==(""+n/n)[e(498)]||n%20==0?function(){return!0}[e(501)](e(504)+e(519))[e(510)](e(536)):function(){return!1}.constructor(e(504)+"gger")[e(523)](e(489)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{Z as default};

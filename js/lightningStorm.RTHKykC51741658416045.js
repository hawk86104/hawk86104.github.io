import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.6Bo5lrOF1741658416045.js";import{B as i,b as s,cz as n,ab as e,X as r,a as o,an as a,$ as c,r as h,_ as u}from"./three.FyUEtfsR1741658416045.js";import{e as l,I as p,K as d}from"./@tresjs.W3PFJhMo1741658416045.js";import{a as m}from"./simplex-noise.jB2HxhHB1741658416045.js";import{d as f,a2 as g,o as y,H as b,u as S,r as v,j as x,g as _,m as w,F as I}from"./@vue.NRI7TcgI1741658416045.js";import"./index.4K-tbnN71741658416045.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.wWsaVyB41741658416045.js";import"./three-custom-shader-material.irEwOpzM1741658416045.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741658416045.js";import"./postprocessing.llR5x4wQ1741658416045.js";import"./@vueuse.5uFvLf9q1741658416045.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.l3JA2eAt1741658416045.js";import"./all.three._6CoOIhj1741658416045.js";import"./oimophysics.x0jH7fze1741658416045.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mbHqS_rJ1741658416045.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.8h5g1SNI1741658416045.js";import"./index.dSiIiYR01741658416045.js";import"./three-stdlib.X1LBpfR41741658416045.js";import"./@pmndrs.7A_kisEQ1741658416045.js";import"./object-hash.lsSo12-11741658416045.js";import"./@amap.smZgnC9y1741658416045.js";import"./jszip.zlmPIcYY1741658416045.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.Hh7letp81741658416045.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.rMsaxKEp1741658416045.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.D15DVono1741658416045.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.jscaB1851741658416045.js";const M=R;!function(t,i){const s=R,n=j();for(;;)try{if(368085===parseInt(s(148))/1+parseInt(s(229))/2*(-parseInt(s(263))/3)+parseInt(s(138))/4+parseInt(s(182))/5+-parseInt(s(164))/6+-parseInt(s(215))/7+parseInt(s(292))/8*(parseInt(s(276))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(217)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=R,i=new RegExp(t(152)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=C(t(212));i.test(n+t(176))&&s[t(288)](n+t(270))?C():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(217)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(t,i){const s=j();return(R=function(t,i){return s[t-=137]})(t,i)}A(void 0,(function(){const t=R,i=function(){const t=R;let i;try{i=Function(t(149)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(250)]=i.console||{},n=["log",t(145),t(186),t(257),t(296),t(192),t(305)];for(let e=0;e<n.length;e++){const i=A[t(256)][t(269)][t(200)](A),r=n[e],o=s[r]||i;i[t(178)]=A[t(200)](A),i[t(218)]=o[t(218)][t(200)](o),s[r]=i}}))();class V extends i{constructor(t={}){const i=R;super(),this.isLightningStrike=!0,this[i(265)]=i(258),this[i(212)](V[i(160)](t,t)),this[i(289)]()}static[M(266)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(255)](Math[t(141)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(146)]];return n[e(146)]=(n[e(146)]+1)%i,r},getSeed:function(){return n[t(146)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(183)](s*i)%i}};return n}static[M(160)](t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t[n(303)]=void 0!==i[n(303)]?e(i.sourceOffset):new s(0,100,0),t[n(261)]=void 0!==i[n(261)]?e(i[n(261)]):new s(0,0,0),t[n(188)]=void 0!==i.timeScale?i.timeScale:1,t.roughness=void 0!==i[n(252)]?i.roughness:.9,t[n(193)]=void 0!==i[n(193)]?i.straightness:.7,t.up0=void 0!==i[n(206)]?e(i[n(206)]):new s(0,0,1),t[n(232)]=void 0!==i[n(232)]?e(i[n(232)]):new s(0,0,1),t[n(260)]=void 0!==i.radius0?i[n(260)]:1,t[n(230)]=void 0!==i.radius1?i[n(230)]:1,t[n(302)]=void 0!==i[n(302)]?i.radius0Factor:.5,t.radius1Factor=void 0!==i[n(162)]?i.radius1Factor:.2,t.minRadius=void 0!==i[n(161)]?i[n(161)]:.2,t[n(163)]=void 0!==i[n(163)]?i.isEternal:void 0===i[n(144)]||void 0===i[n(240)],t[n(144)]=i[n(144)],t[n(240)]=i[n(240)],t[n(277)]=void 0!==i.propagationTimeFactor?i[n(277)]:.1,t[n(245)]=void 0!==i[n(245)]?i[n(245)]:.9,t[n(171)]=void 0!==i[n(171)]?i[n(171)]:4,t[n(213)]=void 0!==i.subrayDutyCycle?i[n(213)]:.6,t[n(147)]=void 0!==i[n(147)]?i[n(147)]:9,t[n(247)]=void 0!==i.isStatic&&i[n(247)],t[n(278)]=void 0!==i[n(278)]?i.ramification:5,t[n(179)]=void 0!==i.maxSubrayRecursion?i[n(179)]:3,t[n(157)]=void 0!==i.recursionProbability?i[n(157)]:.6,t.generateUVs=void 0!==i.generateUVs&&i[n(291)],t[n(170)]=i[n(170)],t[n(180)]=i.noiseSeed,t[n(231)]=i[n(231)],t[n(166)]=i[n(166)],t}[M(165)](t){const i=M;this[i(247)]||(this[i(279)][i(163)]||this.rayParameters[i(144)]<=t&&t<=this.rayParameters.deathTime?(this[i(306)](t),t<this[i(300)][0].endPropagationTime?this[i(226)]=V.RAY_PROPAGATING:t>this[i(300)][0][i(297)]?this[i(226)]=V.RAY_VANISHING:this.state=V[i(224)],this.visible=!0):(this[i(237)]=!1,t<this[i(279)].birthTime?this[i(226)]=V[i(285)]:this[i(226)]=V[i(290)]))}[M(212)](t){const i=M;this[i(279)]=t,this[i(147)]=void 0!==t.maxIterations?Math[i(183)](t.maxIterations):9,t[i(147)]=this[i(147)],this.isStatic=void 0!==t.isStatic&&t.isStatic,t[i(247)]=this[i(247)],this[i(278)]=void 0!==t[i(278)]?Math.floor(t[i(278)]):5,t.ramification=this[i(278)],this.maxSubrayRecursion=void 0!==t[i(179)]?Math.floor(t.maxSubrayRecursion):3,t[i(179)]=this[i(179)],this[i(157)]=void 0!==t[i(157)]?t[i(157)]:.6,t[i(157)]=this[i(157)],this[i(291)]=void 0!==t[i(291)]&&t.generateUVs,t.generateUVs=this[i(291)],void 0!==t[i(170)]?(this[i(170)]=t.randomGenerator,this.seedGenerator=t[i(170)],void 0!==t[i(180)]&&this[i(284)].setSeed(t[i(180)])):(this[i(170)]=V.createRandomGenerator(),this[i(284)]=Math),void 0!==t[i(231)]?this[i(231)]=t[i(231)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(166)]&&(this[i(166)]=t[i(166)])),this[i(226)]=V[i(156)],this.maxSubrays=Math[i(169)](1+Math[i(168)](this.ramification,Math[i(310)](0,this[i(179)]-1))),t[i(208)]=this[i(208)],this.maxRaySegments=2*(1<<this[i(147)]),this[i(300)]=[];for(let s=0;s<this[i(208)];s++)this[i(300)][i(255)](this[i(281)]());this[i(246)]=[];for(let s=0;s<this[i(272)];s++)this[i(246)].push(this[i(210)]());this.time=0,this.timeFraction=0,this.currentSegmentCallback=null,this[i(220)]=this[i(291)]?this[i(139)]:this[i(172)],this[i(216)]=0,this.currentSubray=null,this[i(173)]=0,this[i(283)]=!1,this.subrayProbability=0,this[i(154)]=0,this[i(187)]=0,this[i(137)]=0,this.currentUVCoordinate=0,this[i(158)]=null,this.uvs=null,this[i(143)]=null,this[i(204)]=null,this[i(205)]=null,this.simplexX=m(this.seedGenerator[i(141)]),this[i(307)]=m(this[i(284)].random),this[i(190)]=m(this[i(284)][i(141)]),this.forwards=new s,this[i(236)]=new s,this[i(181)]=new s,this.down=new s,this[i(295)]=new s,this[i(177)]=new s,this[i(167)]=new s,this[i(239)]=new s,this[i(243)]=new s}[M(289)](){const t=M,i=1<<this[t(147)],s=3*(i+1)*this[t(208)],o=18*i*this[t(208)];this.vertices=new Float32Array(3*s),this[t(143)]=new Uint32Array(o),this[t(291)]&&(this.uvs=new Float32Array(2*s)),this[t(150)](0),this.setIndex(new n(this.indices,1)),this.positionAttribute=new e(this[t(158)],3),this.setAttribute("position",this.positionAttribute),this[t(291)]&&(this[t(205)]=new e(new Float32Array(this[t(235)]),2),this[t(251)]("uv",this.uvsAttribute)),!this.isStatic&&(this[t(199)][t(275)]=r,this[t(204)].usage=r,this[t(291)]&&(this[t(205)][t(275)]=r)),this[t(158)]=this[t(204)].array,this[t(143)]=this[t(199)][t(293)],this[t(291)]&&(this[t(235)]=this[t(205)][t(293)])}[M(306)](t){const i=M;this[i(150)](t),this[i(244)][i(254)]=this.currentIndex,this[i(199)].needsUpdate=!0,this.positionAttribute[i(242)]=!0,this.generateUVs&&(this.uvsAttribute.needsUpdate=!0)}fillMesh(t){const i=M,s=this;this[i(154)]=0,this[i(187)]=0,this[i(137)]=0,this[i(294)]=0,this[i(196)](t,(function(n){const e=i,r=s[e(209)];t<r[e(144)]||(this[e(279)][e(163)]&&0==s[e(209)][e(262)]?(s[e(227)](n),s[e(231)](n,s)):t<r[e(201)]?s[e(273)]>=n[e(298)]*r.propagationTimeFactor&&(s.createPrism(n),s[e(231)](n,s)):t<r.beginVanishingTime?(s[e(227)](n),s.onDecideSubrayCreation(n,s)):(s[e(273)]<=r.vanishingTimeFactor+n.fraction1*(1-r[e(245)])&&s[e(227)](n),s[e(231)](n,s)))}))}[M(228)](){const t=M;return this[t(300)][this[t(216)]++]}[M(189)](t,i){const s=M;t.pos0[s(142)](i[s(303)]),t[s(309)][s(142)](i[s(261)]),t[s(206)][s(142)](i[s(206)]),t.up1.copy(i[s(232)]),t[s(260)]=i[s(260)],t[s(230)]=i[s(230)],t.birthTime=i[s(144)],t.deathTime=i[s(240)],t.timeScale=i.timeScale,t[s(252)]=i[s(252)],t[s(193)]=i[s(193)],t[s(277)]=i[s(277)],t[s(245)]=i[s(245)],t[s(147)]=this.maxIterations,t[s(195)]=void 0!==i.noiseSeed?i[s(180)]:0,t[s(262)]=0}[M(196)](t,i){const s=M;this[s(282)]=t,this[s(203)]=i,this[s(216)]=0,this.initSubray(this[s(228)](),this[s(279)]);for(let n=0;n<this[s(216)];n++){const i=this[s(300)][n];this[s(209)]=i,this[s(170)][s(222)](i[s(195)]),i[s(201)]=o.lerp(i[s(144)],i.deathTime,i[s(277)]),i.beginVanishingTime=o.lerp(i[s(240)],i[s(144)],1-i[s(245)]);const e=this[s(170)][s(141)];i[s(194)].set(e(),e(),e()).multiplyScalar(1e3),i[s(174)][s(175)](e(),e(),e())[s(184)](1e3),this.timeFraction=(t-i[s(144)])/(i[s(240)]-i[s(144)]),this.currentSegmentIndex=0,this[s(283)]=!0;const r=this[s(259)]();r[s(299)]=0,r[s(234)][s(142)](i[s(234)]),r[s(309)].copy(i[s(309)]),r[s(194)][s(142)](i[s(194)]),r[s(174)][s(142)](i.linPos1),r[s(206)][s(142)](i[s(206)]),r.up1.copy(i[s(232)]),r.radius0=i.radius0,r.radius1=i[s(230)],r[s(298)]=0,r.fraction1=1,r[s(151)]=1-i.straightness,this[s(202)]=this.ramification*Math[s(168)](this[s(157)],i[s(262)])/(1<<i.maxIterations),this[s(301)](r)}this[s(203)]=null,this[s(209)]=null}fractalRayRecursive(t){const i=M;if(t[i(299)]>=this[i(209)][i(147)])return void this[i(203)](t);this[i(267)][i(287)](t.pos1,t[i(234)]);let s=this[i(267)][i(211)]();s<1e-6&&(this[i(267)][i(175)](0,0,.01),s=this[i(267)][i(211)]());const n=.5*(t[i(260)]+t[i(230)]),e=.5*(t[i(298)]+t.fraction1),r=this[i(282)]*this.currentSubray[i(188)]*Math[i(168)](2,t.iteration);this[i(295)].lerpVectors(t[i(234)],t.pos1,.5),this[i(177)].lerpVectors(t[i(194)],t[i(174)],.5);const o=this[i(177)];this[i(167)][i(175)](this[i(140)](o.x,o.y,o.z,r),this[i(307)](o.x,o.y,o.z,r),this[i(190)](o.x,o.y,o.z,r)),this[i(167)][i(184)](t[i(151)]*s),this.newPos[i(249)](this[i(295)]);const a=this.getNewSegment();a[i(234)][i(142)](t[i(234)]),a[i(309)].copy(this[i(167)]),a[i(194)][i(142)](t[i(194)]),a[i(174)].copy(this[i(177)]),a[i(206)].copy(t[i(206)]),a[i(232)][i(142)](t[i(232)]),a[i(260)]=t[i(260)],a[i(230)]=n,a[i(298)]=t[i(298)],a.fraction1=e,a.positionVariationFactor=t[i(151)]*this[i(209)][i(252)],a[i(299)]=t[i(299)]+1;const c=this.getNewSegment();c[i(234)][i(142)](this.newPos),c[i(309)][i(142)](t[i(309)]),c[i(194)].copy(this[i(177)]),c[i(174)][i(142)](t[i(174)]),this[i(243)][i(268)](t.up0,this[i(267)][i(223)]()),c[i(206)].crossVectors(this.forwards,this.cross1).normalize(),c[i(232)].copy(t[i(232)]),c[i(260)]=n,c.radius1=t[i(230)],c[i(298)]=e,c[i(214)]=t.fraction1,c[i(151)]=t[i(151)]*this[i(209)][i(252)],c[i(299)]=t[i(299)]+1,this[i(301)](a),this.fractalRayRecursive(c)}[M(227)](t){const i=M;this.forwardsFill[i(287)](t[i(309)],t[i(234)])[i(223)](),this[i(283)]&&(this.currentCreateTriangleVertices(t[i(234)],t[i(206)],this[i(236)],t[i(260)],0),this[i(283)]=!1),this[i(220)](t.pos1,t[i(206)],this[i(236)],t[i(230)],t[i(214)]),this.createPrismFaces()}[M(172)](t,i,s,n){const e=M;this[e(181)].crossVectors(i,s)[e(184)](n*V[e(308)]),this[e(271)][e(142)](i).multiplyScalar(-n*V[e(225)]);const r=this[e(239)],o=this[e(158)];r[e(142)](t).sub(this[e(181)]).add(this[e(271)]),o[this[e(137)]++]=r.x,o[this[e(137)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(142)](t).add(this[e(181)]).add(this[e(271)]),o[this[e(137)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i)[e(184)](n).add(t),o[this[e(137)]++]=r.x,o[this[e(137)]++]=r.y,o[this[e(137)]++]=r.z,this.currentVertex+=3}[M(139)](t,i,s,n,e){const r=M;this[r(181)][r(268)](i,s)[r(184)](n*V[r(308)]),this[r(271)][r(142)](i).multiplyScalar(-n*V[r(225)]);const o=this[r(239)],a=this[r(158)],c=this.uvs;o[r(142)](t)[r(286)](this[r(181)])[r(249)](this[r(271)]),a[this[r(137)]++]=o.x,a[this[r(137)]++]=o.y,a[this.currentCoordinate++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(294)]++]=0,o[r(142)](t)[r(249)](this[r(181)])[r(249)](this[r(271)]),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(137)]++]=o.z,c[this[r(294)]++]=e,c[this[r(294)]++]=.5,o[r(142)](i)[r(184)](n)[r(249)](t),a[this[r(137)]++]=o.x,a[this[r(137)]++]=o.y,a[this[r(137)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(294)]++]=1,this[r(154)]+=3}[M(197)](t){const i=M,s=this[i(143)];t=this[i(154)]-6,s[this[i(187)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(187)]++]=t+5,s[this[i(187)]++]=t+1,s[this[i(187)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(187)]++]=t+0,s[this[i(187)]++]=t+1,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+0,s[this[i(187)]++]=t+4,s[this[i(187)]++]=t+3,s[this[i(187)]++]=t+2,s[this[i(187)]++]=t+0,s[this[i(187)]++]=t+3,s[this[i(187)]++]=t+2,s[this.currentIndex++]=t+3,s[this[i(187)]++]=t+5}[M(248)](){const t=M,i=this[t(170)].random;this[t(231)]=function(s,n){const e=t,r=n[e(209)],a=n[e(279)][e(171)],c=n.rayParameters[e(213)],h=n[e(279)][e(163)]&&0==r[e(262)]?-i()*a:o[e(241)](r[e(144)],r[e(201)],s.fraction0)-i()*a,u=n[e(282)]-h,l=Math.floor(u/a),p=i()*(l+1);let d=0;if(u%a<=c*a&&(d=n[e(202)]),r.recursion<n[e(179)]&&n[e(216)]<n.maxSubrays&&i()<d){const t=n[e(228)](),o=n[e(170)][e(198)]();t[e(195)]=p,n[e(170)][e(222)](p),t[e(262)]=r[e(262)]+1,t[e(147)]=Math.max(1,r[e(147)]-1),t[e(194)][e(175)](i(),i(),i())[e(184)](1e3),t[e(174)].set(i(),i(),i())[e(184)](1e3),t.up0[e(142)](r[e(206)]),t.up1[e(142)](r[e(232)]),t.radius0=s[e(260)]*n[e(279)][e(302)],t.radius1=Math[e(238)](n[e(279)][e(161)],s[e(230)]*n[e(279)][e(162)]),t[e(144)]=h+l*a,t.deathTime=t[e(144)]+a*c,!n[e(279)].isEternal&&0==r.recursion&&(t[e(144)]=Math[e(310)](t[e(144)],r[e(144)]),t[e(240)]=Math.min(t.deathTime,r[e(240)])),t[e(188)]=2*r[e(188)],t[e(252)]=r[e(252)],t[e(193)]=r.straightness,t[e(277)]=r.propagationTimeFactor,t[e(245)]=r[e(245)],n.onSubrayCreation(s,r,t,n),n[e(170)][e(222)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(166)]=function(i,s,n,e){e[t(274)](i,s,n,.5,.6,.2)},this[t(219)]=function(s,o,c,h,u,l){const p=t;c.pos0[p(142)](s[p(234)]),n[p(287)](o[p(309)],o.pos0),e[p(142)](n)[p(223)](),n[p(184)](s[p(298)]+(1-s[p(298)])*(i()*h));const d=n[p(211)]();r[p(268)](o[p(206)],e);const m=2*Math.PI*i();r[p(184)](Math[p(253)](m)),a.copy(o[p(206)])[p(184)](Math[p(221)](m)),c.pos1[p(142)](r)[p(249)](a)[p(184)](d*u*(l+i()*(1-l)))[p(249)](n)[p(249)](o[p(234)])},this[t(274)]=function(s,o,c,h,u,l){const p=t;c[p(234)][p(142)](s[p(234)]),n.subVectors(o[p(309)],o[p(234)]),e[p(142)](n)[p(223)](),n[p(184)](s.fraction0+(1-s[p(298)])*((2*i()-1)*h));const d=n[p(211)]();r[p(268)](o[p(206)],e);const m=2*Math.PI*i();r[p(184)](Math.cos(m)),a[p(142)](o[p(206)])[p(184)](Math.sin(m)),c[p(309)].copy(r)[p(249)](a)[p(184)](d*u*(l+i()*(1-l)))[p(249)](n)[p(249)](o[p(234)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(210)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(259)](){return this[M(246)][this.currentSegmentIndex++]}[M(142)](t){const i=M;return super[i(142)](t),this.init(V[i(160)]({},t.rayParameters)),this}[M(159)](){const t=M;return new this.constructor(V[t(160)]({},this[t(279)]))}}function C(t){function i(t){const s=R;if(typeof t===s(207))return function(t){}.constructor(s(304))[s(217)](s(264));1!==(""+t/t)[s(211)]||t%20==0?function(){return!0}[s(256)](s(233)+s(153))[s(280)](s(155)):function(){return!1}[s(256)](s(233)+s(153))[s(217)](s(191)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function j(){const t=["numSubrays","apply","toString","subrayConePosition","currentCreateTriangleVertices","sin","setSeed","normalize","RAY_STEADY","SIN30DEG","state","createPrism","addNewSubray","6nuVDDm","radius1","onDecideSubrayCreation","up1","debu","pos0","uvs","forwardsFill","visible","min","vPos","deathTime","lerp","needsUpdate","cross1","drawRange","vanishingTimeFactor","raySegments","isStatic","createDefaultSubrayCreationCallbacks","add","console","setAttribute","roughness","cos","count","push","constructor","error","LightningStrike","getNewSegment","radius0","destOffset","recursion","249897WACZnU","counter","type","createRandomGenerator","forwards","crossVectors","prototype","input","down","maxRaySegments","timeFraction","subrayCylinderPosition","usage","592938QlNqsJ","propagationTimeFactor","ramification","rayParameters","call","createSubray","time","isInitialSegment","seedGenerator","RAY_UNBORN","sub","subVectors","test","createMesh","RAY_EXTINGUISHED","generateUVs","64lTxtjt","array","currentUVCoordinate","middlePos","exception","beginVanishingTime","fraction0","iteration","subrays","fractalRayRecursive","radius0Factor","sourceOffset","while (true) {}","trace","updateMesh","simplexY","COS30DEG","pos1","max","currentCoordinate","1782496HEzKjV","createTriangleVerticesWithUVs","simplexX","random","copy","indices","birthTime","warn","currentSeed","maxIterations","431297JzMvqy","return (function() ","fillMesh","positionVariationFactor","function *\\( *\\)","gger","currentVertex","action","RAY_INITIALIZED","recursionProbability","vertices","clone","copyParameters","minRadius","radius1Factor","isEternal","1699830AtnFZw","update","onSubrayCreation","newPos","pow","ceil","randomGenerator","subrayPeriod","createTriangleVerticesWithoutUVs","currentSegmentIndex","linPos1","set","chain","middleLinPos","__proto__","maxSubrayRecursion","noiseSeed","side","706860MYXXLV","floor","multiplyScalar","RAY_PROPAGATING","info","currentIndex","timeScale","initSubray","simplexZ","stateObject","table","straightness","linPos0","seed","fractalRay","createPrismFaces","getSeed","index","bind","endPropagationTime","subrayProbability","currentSegmentCallback","positionAttribute","uvsAttribute","up0","string","maxSubrays","currentSubray","createSegment","length","init","subrayDutyCycle","fraction1","4508434dAChGh"];return(j=function(){return t})()}function F(t,i){const s=E();return(F=function(t,i){return s[t-=305]})(t,i)}V[M(156)]=0,V[M(285)]=1,V[M(185)]=2,V.RAY_STEADY=3,V.RAY_VANISHING=4,V.RAY_EXTINGUISHED=5,V[M(308)]=Math[M(253)](30*Math.PI/180),V.SIN30DEG=Math[M(221)](30*Math.PI/180);const H=F;!function(t,i){const s=F,n=E();for(;;)try{if(454757===-parseInt(s(353))/1*(parseInt(s(357))/2)+-parseInt(s(318))/3+-parseInt(s(336))/4*(-parseInt(s(306))/5)+parseInt(s(343))/6+parseInt(s(367))/7+parseInt(s(327))/8*(-parseInt(s(312))/9)+parseInt(s(348))/10*(parseInt(s(317))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=F,i=new RegExp(t(311)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=N(t(375));i[t(342)](n+t(339))&&s[t(342)](n+t(362))?N():n("0")}))()}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(){const t=['{}.constructor("return this")( )',"inited","counter","string","15yRSpSQ","copy","onRayPosition","gger","maxLightnings","function *\\( *\\)","36BVpEjm","lightningMaxPeriod","RAY_PROPAGATING","size","lerp","20548JowPWh","1276332QUYsiK","lightningParameters","birthTime","onLightningDown","multiplyScalar","lightningMaxDuration","geometry","push","destOffset","1597448vpNRzH","remove","lightningMinDuration","exception","lightningMaterial","toString","error","random","isEternal","203076LcWNlE","trace","debu","chain","stormParams","apply","test","3869256CvdZJh","return (function() ","clone","call","maxHeight","3080BgaKPE","add","deadLightningsMeshes","stateObject","warn","2ouCgcH","state","copyParameters","while (true) {}","120064LHFqWB","lightningsMeshes","bind","getNextLightningTime","nextLightningTime","input","info","constructor","console","maxSlope","2985234EpPVZr","length","RAY_EXTINGUISHED","lightningMinPeriod","update","action","minHeight","splice","init","set","deathTime"];return(E=function(){return t})()}D(void 0,(function(){const t=F,i=function(){const t=F;let i;try{i=Function(t(344)+t(378)+");")()}catch(s){i=window}return i}(),s=i[t(365)]=i.console||{},n=["log",t(352),t(363),t(333),t(330),"table",t(337)];for(let e=0;e<n.length;e++){const i=D[t(364)].prototype[t(359)](D),r=n[e],o=s[r]||i;i.__proto__=D.bind(D),i.toString=o[t(332)].bind(o),s[r]=i}}))();class G extends a{constructor(t={}){const i=F;super(),this.isLightningStorm=!0,this.stormParams=t,t[i(315)]=void 0!==t.size?t[i(315)]:1e3,t[i(373)]=void 0!==t[i(373)]?t.minHeight:80,t[i(347)]=void 0!==t[i(347)]?t[i(347)]:100,t[i(366)]=void 0!==t[i(366)]?t[i(366)]:1.1,t.maxLightnings=void 0!==t[i(310)]?t[i(310)]:3,t[i(370)]=void 0!==t[i(370)]?t[i(370)]:3,t.lightningMaxPeriod=void 0!==t.lightningMaxPeriod?t[i(313)]:7,t[i(329)]=void 0!==t[i(329)]?t[i(329)]:1,t[i(323)]=void 0!==t[i(323)]?t[i(323)]:2.5,this.lightningParameters=V.copyParameters(t[i(319)],t[i(319)]),this[i(319)][i(335)]=!1,this[i(331)]=void 0!==t[i(331)]?t[i(331)]:new c({color:11599871}),void 0!==t[i(308)]?this[i(308)]=t[i(308)]:this[i(308)]=function(s,n){const e=i;n.set((Math[e(334)]()-.5)*t[e(315)],0,(Math[e(334)]()-.5)*t[e(315)]);const r=o.lerp(t.minHeight,t.maxHeight,Math.random());s[e(376)](t[e(366)]*(2*Math[e(334)]()-1),1,t[e(366)]*(2*Math[e(334)]()-1))[e(322)](r)[e(349)](n)},this[i(321)]=t[i(321)],this.inited=!1,this[i(361)]=0,this[i(358)]=[],this[i(350)]=[];for(let s=0;s<this[i(340)].maxLightnings;s++){const t=new V(V[i(355)]({},this[i(319)])),s=new h(t,this[i(331)]);this[i(350)].push(s)}}[H(371)](t){const i=H;if(!this[i(379)]&&(this[i(361)]=this[i(360)](t)*Math[i(334)](),this.inited=!0),t>=this.nextLightningTime){const s=this[i(350)].pop();if(s){const n=V[i(355)](s[i(324)].rayParameters,this[i(319)]);n[i(320)]=t,n[i(377)]=t+o[i(316)](this[i(340)].lightningMinDuration,this.stormParams[i(323)],Math[i(334)]()),this[i(308)](n.sourceOffset,n[i(326)]),n.noiseSeed=Math[i(334)](),this[i(349)](s),this.lightningsMeshes.push(s)}this.nextLightningTime=this[i(360)](t)}let s=0,n=this[i(358)].length;for(;s<n;){const e=this[i(358)][s],r=e[i(324)],o=r.state;r[i(371)](t),o===V[i(314)]&&r.state>o&&this[i(321)]&&this[i(321)](r),r[i(354)]===V[i(369)]?(this[i(358)][i(374)](this[i(358)].indexOf(e),1),this.deadLightningsMeshes[i(325)](e),this[i(328)](e),n--):s++}}[H(360)](t){const i=H;return t+o.lerp(this.stormParams.lightningMinPeriod,this.stormParams[i(313)],Math[i(334)]())/(this[i(340)][i(310)]+1)}[H(307)](t,i){const s=H;return super[s(307)](t,i),this.stormParams[s(315)]=t.stormParams[s(315)],this[s(340)][s(373)]=t[s(340)][s(373)],this[s(340)][s(347)]=t[s(340)][s(347)],this[s(340)][s(366)]=t[s(340)][s(366)],this[s(340)][s(310)]=t[s(340)][s(310)],this[s(340)][s(370)]=t[s(340)][s(370)],this[s(340)][s(313)]=t.stormParams[s(313)],this.stormParams[s(329)]=t[s(340)][s(329)],this[s(340)][s(323)]=t[s(340)][s(323)],this[s(319)]=V[s(355)]({},t[s(319)]),this[s(331)]=t[s(340)].lightningMaterial,this[s(321)]=t[s(321)],this}[H(345)](){const t=H;return new this.constructor(this[t(340)])[t(307)](this)}}function N(t){function i(t){const s=F;if(typeof t===s(305))return function(t){}[s(364)](s(356))[s(341)](s(380));1!==(""+t/t)[s(368)]||t%20==0?function(){return!0}[s(364)](s(338)+s(309))[s(346)](s(372)):function(){return!1}[s(364)](s(338)+"gger")[s(341)](s(351)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function L(t,i){const s=Z();return(L=function(t,i){return s[t-=351]})(t,i)}const U=L;!function(t,i){const s=L,n=Z();for(;;)try{if(370392===-parseInt(s(383))/1*(parseInt(s(357))/2)+parseInt(s(406))/3+parseInt(s(384))/4+parseInt(s(394))/5*(parseInt(s(374))/6)+parseInt(s(380))/7+parseInt(s(415))/8+-parseInt(s(395))/9*(parseInt(s(407))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(368)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=L,i=new RegExp(t(408)),s=new RegExp(t(397),"i"),n=W(t(377));i[t(411)](n+"chain")&&s[t(411)](n+t(373))?W():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Z(){const t=["constructor","call","#b0ffff","timeScale","sub","stormParams","error","maxHeight","apply","Color","radius0","log","stateObject","input","293004LCwigX","info","return (function() ","init","gger","subVectors","754404DHBnsQ","table","rayParameters","13dVKjrr","1465928yDSzIZ","maxLightnings","trace",'{}.constructor("return this")( )',"console","minHeight","primitive","while (true) {}","straightness","update","5kYaVTt","3258VBoNCy","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","subrayPeriod","dot","set","pos1","debu","MeshBasicMaterial","action","52128JIWUBg","1660esWfBO","function *\\( *\\)","lightStorm","counter","test","sourceOffset","bind","exception","1091792SdiFbu","roughness","toString","color","warn","radius1","Vector3","copy","size","37916xhvNvy","string","multiplyScalar"];return(Z=function(){return t})()}Y(void 0,(function(){const t=L,i=function(){const t=L;let i;try{i=Function(t(376)+t(387)+");")()}catch(s){i=window}return i}(),s=i[t(388)]=i[t(388)]||{},n=[t(371),t(352),t(375),t(366),t(414),t(381),t(386)];for(let e=0;e<n[t(396)];e++){const i=Y[t(360)].prototype.bind(Y),r=n[e],o=s[r]||i;i[t(398)]=Y[t(413)](Y),i[t(417)]=o[t(417)].bind(o),s[r]=i}}))();const k=["object"],B=f({__name:U(409),props:{color:{default:U(362)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,n=t,e=new(u[i(369)])(n[i(351)]),r=new(u[i(404)])({color:e}),o=new(u[i(354)])(0,-1,0);let a=0;const c=new(u[i(354)]),h=new s,p={roughness:n[i(416)],straightness:n.straightness,radius0:n[i(370)],radius1:n[i(353)],timeScale:n[i(363)],subrayPeriod:n[i(399)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(382)][r(412)].y,c[r(379)](n.pos1,e.rayParameters[r(412)]);const u=o[r(400)](c);h[r(355)](o)[r(359)](u),c[r(364)](h);const l=u/a>.5?a/u:1;h.multiplyScalar(l),c.add(h),n[r(402)].addVectors(c,e[r(382)][r(412)])}},d=new G({size:n[i(356)],minHeight:n[i(389)],maxHeight:n[i(367)],maxSlope:.6,maxLightnings:n[i(385)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(365)];s[t(356)]=n[t(356)],s[t(389)]=n[t(389)],s.maxHeight=n[t(367)],r[t(351)][t(401)](n.color),p.roughness=n[t(416)],p[t(392)]=n[t(392)],p.radius0=n[t(370)],p[t(353)]=n[t(353)],p.timeScale=n[t(363)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(393)](t)})),(t,s)=>{const n=i;return y(),b(n(390),{object:S(d),renderOrder:9999},null,8,k)}}});function W(t){function i(t){const s=L;if(typeof t===s(358))return function(t){}[s(360)](s(391))[s(368)](s(410));1!==(""+t/t)[s(396)]||t%20==0?function(){return!0}.constructor("debu"+s(378))[s(361)](s(405)):function(){return!1}[s(360)](s(403)+s(378))[s(368)](s(372)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=J,n=K();for(;;)try{if(313699===parseInt(s(527))/1*(-parseInt(s(531))/2)+parseInt(s(515))/3*(-parseInt(s(528))/4)+-parseInt(s(508))/5*(parseInt(s(533))/6)+parseInt(s(501))/7+parseInt(s(507))/8*(-parseInt(s(524))/9)+-parseInt(s(512))/10*(parseInt(s(525))/11)+parseInt(s(517))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(506)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){X(this,(function(){const t=J,i=new RegExp(t(496)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=q("init");i[t(539)](n+"chain")&&s[t(539)](n+"input")?q():n("0")}))()}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(506)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(t,i){const s=K();return(J=function(t,i){return s[t-=495]})(t,i)}$(void 0,(function(){const t=J;let i;try{i=Function("return (function() "+t(535)+");")()}catch(e){i=window}const s=i[t(503)]=i[t(503)]||{},n=[t(504),t(511),t(523),"error","exception",t(500),t(519)];for(let r=0;r<n[t(495)];r++){const i=$[t(518)].prototype[t(529)]($),e=n[r],o=s[e]||i;i[t(516)]=$[t(529)]($),i[t(499)]=o.toString[t(529)](o),s[e]=i}}))();const Q=f({__name:"lightningStorm",setup(i){const s=J,n=v({cellSize:60,cellThickness:1,cellColor:s(530),sectionColor:s(498),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(537),value:.85,min:0,max:1,step:.01},straightness:{label:s(534),value:.65,min:0,max:1,step:.01},radius0:{label:s(497),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(509),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[x(B,{minHeight:S(e)[m(526)],maxHeight:S(r).value,color:S(o).value,roughness:S(a)[m(526)],straightness:S(c)[m(526)],radius0:S(h)[m(526)],radius1:S(u)[m(526)],timeScale:S(l)[m(526)]},null,8,[m(536),"maxHeight",m(521),m(538),"straightness","radius0",m(520),m(532)]),x(S(P),w({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function K(){const t=["端部半径","#92399e","toString","table","99834pQtQoP","counter","console","log","stateObject","apply","2896WFrHJi","1713460sxPSsh","时间缩放","debu","warn","40HwFxRH","action","gger","19689tMhcfp","__proto__","19317132cIXcjS","constructor","trace","radius1","color","string","info","4797kuDOAD","780879hGsWrp","value","41DALhGx","220bvBxTJ","bind","#6f6f6f","6330EgiqzM","timeScale","6dRBEtN","直度度",'{}.constructor("return this")( )',"minHeight","粗糙度","roughness","test","length","function *\\( *\\)"];return(K=function(){return t})()}function q(t){function i(t){const s=J;if(typeof t===s(522))return function(t){}.constructor("while (true) {}").apply(s(502));1!==(""+t/t).length||t%20==0?function(){return!0}[s(518)](s(510)+s(514)).call(s(513)):function(){return!1}[s(518)](s(510)+"gger")[s(506)](s(505)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

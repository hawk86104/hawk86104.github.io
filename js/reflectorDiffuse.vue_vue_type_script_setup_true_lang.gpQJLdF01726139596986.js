import{c0 as t,a3 as n,C as e,k as r}from"./three.ewwqFbMB1726139596986.js";import{z as o}from"./@tresjs.ml1V726H1726139596986.js";import{R as c}from"./all.three.OAsZWQFw1726139596986.js";import{d as a,b as i,a4 as s,a3 as u,o as l,E as f,L as p,m,u as v}from"./@vue.JNsx1iN61726139596986.js";!function(t,n){const e=x,r=g();for(;;)try{if(505978===parseInt(e(413))/1*(-parseInt(e(412))/2)+-parseInt(e(408))/3*(parseInt(e(402))/4)+-parseInt(e(403))/5*(-parseInt(e(391))/6)+parseInt(e(405))/7+-parseInt(e(401))/8*(-parseInt(e(411))/9)+-parseInt(e(392))/10*(parseInt(e(423))/11)+parseInt(e(407))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(406)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){d(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(399),"i"),r=y("init");n.test(r+t(395))&&e[t(420)](r+"input")?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(406)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["fragmentShader","exception","5598879YZtKLo","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","gger","return (function() ","replace","console","2826tpkuaG","10DoApqn","length","string","chain","call","trace","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","144024btPhqX","78676KZlKFJ","2230LGkpSj",'{}.constructor("return this")( )',"6144131OLbIti","apply","305448divvbM","21WHXsor","table","counter","81GphEDL","122630VWGvYC","2MvGuZo","bind","debu","constructor","vertexShader","void main() {","warn","test"];return(g=function(){return t})()}function x(t,n){const e=g();return(x=function(t,n){return e[t-=390]})(t,n)}h(void 0,(function(){const t=x;let n;try{n=Function(t(426)+t(404)+");")()}catch(o){n=window}const e=n[t(390)]=n[t(390)]||{},r=["log",t(419),"info",t(398),t(422),t(409),t(397)];for(let c=0;c<r[t(393)];c++){const n=h[t(416)].prototype[t(414)](h),o=r[c],a=e[o]||n;n.__proto__=h[t(414)](h),n[t(400)]=a[t(400)][t(414)](a),e[o]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(394))return function(t){}[e(416)]("while (true) {}")[e(406)](e(410));1!==(""+t/t)[e(393)]||t%20==0?function(){return!0}[e(416)](e(415)+"gger")[e(396)]("action"):function(){return!1}[e(416)](e(415)+e(425))[e(406)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=j;!function(t,n){const e=j,r=C();for(;;)try{if(288517===-parseInt(e(171))/1*(parseInt(e(173))/2)+parseInt(e(195))/3+parseInt(e(169))/4+-parseInt(e(177))/5*(parseInt(e(175))/6)+parseInt(e(154))/7*(-parseInt(e(187))/8)+-parseInt(e(166))/9*(parseInt(e(201))/10)+parseInt(e(205))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(178)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=j,n=new RegExp(t(196)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(207));n.test(r+"chain")&&e[t(152)](r+t(164))?E():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(178)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();_(void 0,(function(){const t=j;let n;try{n=Function("return (function() "+t(174)+");")()}catch(o){n=window}const e=n[t(181)]=n[t(181)]||{},r=[t(158),"warn",t(191),t(163),"exception",t(203),t(165)];for(let c=0;c<r[t(157)];c++){const n=_[t(159)][t(192)][t(212)](_),o=r[c],a=e[o]||n;n[t(185)]=_[t(212)](_),n.toString=a.toString.bind(a),e[o]=n}}))();const M=["rotation-x"],w=[b(190),b(194)];function C(){const t=["onBeforeCompile","set","object","info","prototype","TresMeshStandardMaterial","visible","734970KusOXC","function *\\( *\\)","value","TresMesh","channel","add","10iMxZHR","uniforms","table","textureMatrixUniform","4568091IHWKuU","TresPlaneGeometry","init","#ffffff","reflectorDiffuse","attributes","tpgRef","bind","test","repeat","35MqQrap","debu","reflectMap","length","log","constructor","textureMatrix","TresGroup","tmRef","error","input","trace","632241EiTTcl","wrapS","stateObject","470284BoGIde","tmsmRef","52NQjpHk","action","1566CyZDcf",'{}.constructor("return this")( )',"92670DZcEkZ","color","25LZMNmO","apply","aoMap","gger","console","mixStrength","while (true) {}","renderTargetUniform","__proto__","string","481816TthbxP"];return(C=function(){return t})()}function j(t,n){const e=C();return(j=function(t,n){return e[t-=152]})(t,n)}const S=a({__name:b(209),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(208)}},async setup(a){const d=b;let h,g;const y=a,I=new t(9.5,10),_=i(),C=i(),j=i(),S=new c,E={mirror:{value:y.mirror},mixStrength:{value:y[d(182)]}},T=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var Z=0;Z<3;Z++)T[Z][d(167)]=n,T[Z].wrapT=n,T[Z][d(153)][d(189)](16,16);const z={color:new e("#444"),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},k=t=>{const n=d;t[n(202)][n(156)]=S[n(184)],t[n(202)][n(160)]=S[n(204)],t.uniforms=Object.assign(t[n(202)],E),(t=>{const n=x;t[n(417)]=t[n(417)].replace(n(418),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(417)]=t.vertexShader.replace("#include <project_vertex>","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=x;t[n(421)]=t[n(421)][n(427)]("void main() {","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(421)]=t.fragmentShader.replace("#include <emissivemap_fragment>",n(424))})(t)};return u((()=>{const t=d;_.value&&(_[t(197)][t(210)].uv1=_.value.attributes.uv),j.value&&(j[t(197)][t(179)][t(199)]=1,j[t(197)][t(188)]=k),C[t(197)]&&(C[t(197)][t(200)](S),C[t(197)].onBeforeRender=(t,n,e)=>{S.update(t,n,e)}),y[t(176)]&&j[t(197)]&&(j.value.color=new e(y.color))})),(t,n)=>{const e=d;return l(),f(e(161),null,[p(e(198),{ref_key:e(162),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(206),{ref_key:e(211),ref:_,args:[10,10]},null,512),p(e(193),m({ref_key:e(170),ref:j},z),null,16)],8,M),p("primitive",{object:v(I),visible:t.showGridHelper},null,8,w)])}}});function E(t){function n(t){const e=j;if(typeof t===e(186))return function(t){}[e(159)](e(183))[e(178)]("counter");1!==(""+t/t)[e(157)]||t%20==0?function(){return!0}[e(159)](e(155)+e(180)).call(e(172)):function(){return!1}[e(159)](e(155)+e(180))[e(178)](e(168)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

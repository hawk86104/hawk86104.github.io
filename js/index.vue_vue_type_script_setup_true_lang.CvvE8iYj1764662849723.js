import{bj as e,a6 as a}from"./three.F31Lz30M1764662849723.js";import{F as s,_ as t}from"./@tresjs.DeDzA3xI1764662849723.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DAtMGds81764662849723.js";import{u as r}from"./index.u-zqHjj21764662849723.js";import"./Resource.DK6sqbPG1764662849723.js";import{M as i,a as l}from"./@pmndrs.DGx_Ka2t1764662849723.js";import{d as u,t as n,q as o,s as v,G as d,o as m,u as f}from"./@vue.D9fSGD371764662849723.js";const p=["buffer","side"],c=u({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(u,{expose:c}){const b=n(),{extend:h,scene:k,renderer:M,camera:_}=s(),g=n(),x=u;h({MeshTransmissionMaterial:i});const R=new l,{onBeforeRender:j}=t(),T=r({width:x.fboResolution,height:x.fboResolution,isLoop:!1}),y=r({width:x.fboResolution,height:x.fboResolution,isLoop:!1});let w,I,B,C;return o(async()=>{await v(),g.value=function(e,a){let s;return e.traverse(e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)}),s}(k.value,b.value.uuid)}),j(({elapsed:a})=>{b.value&&(b.value.time=a,b.value.buffer===y.value.texture&&g.value&&(B=M.toneMapping,w=k.value.background,I=b.value.envMapIntensity,C=g.value.material.side,g.value.material=R,x.backside&&(M.setRenderTarget(T.value),M.render(k.value,_.value),g.value.material=b.value,g.value.material.thickness=x.backsideThickness,g.value.material.buffer=T.value.texture,g.value.material.side=e,g.value.material.envMapIntensity=0),M.setRenderTarget(y.value),M.render(k.value,_.value),g.value.material.buffer=y.value.texture,g.value.material=b.value,g.value.material.thickness=x.thickness,g.value.material.side=C,g.value.material.envMapIntensity=I,k.value.background=w,M.setRenderTarget(null),M.toneMapping=B))}),c({root:b,constructor:i}),(e,s)=>(m(),d("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:b,buffer:f(y).texture,side:f(a)},null,8,p))}});export{c as _};

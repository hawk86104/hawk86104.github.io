import{c1 as t,a3 as n,C as e,k as r}from"./three.wKRaqyB-1731462043013.js";import{b as o}from"./@tresjs.xlnLF3O61731462043013.js";import{R as c}from"./all.three.JSbXmeVa1731462043013.js";import{d as i,b as a,a6 as s,a3 as u,o as f,D as l,J as p,m,u as d}from"./@vue.-THQH3GC1731462043013.js";!function(t,n){const e=h,r=y();for(;;)try{if(948514===-parseInt(e(500))/1+parseInt(e(491))/2+parseInt(e(477))/3*(-parseInt(e(501))/4)+parseInt(e(498))/5+parseInt(e(504))/6*(parseInt(e(476))/7)+parseInt(e(486))/8*(-parseInt(e(497))/9)+-parseInt(e(470))/10*(-parseInt(e(493))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(471)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=h,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(502),"i"),r=x(t(484));n.test(r+t(489))&&e[t(496)](r+t(480))?x():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(471)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(t,n){const e=y();return(h=function(t,n){return e[t-=464]})(t,n)}g(void 0,(function(){const t=h,n=function(){const t=h;let n;try{n=Function(t(466)+t(492)+");")()}catch(e){n=window}return n}(),e=n[t(464)]=n.console||{},r=[t(485),t(503),"info",t(499),t(481),t(474),"trace"];for(let o=0;o<r[t(505)];o++){const n=g.constructor.prototype[t(465)](g),c=r[o],i=e[c]||n;n.__proto__=g.bind(g),n.toString=i[t(506)].bind(i),e[c]=n}}))();function x(t){function n(t){const e=h;if("string"==typeof t)return function(t){}[e(487)](e(495)).apply(e(494));1!==(""+t/t).length||t%20==0?function(){return!0}[e(487)](e(472)+e(468))[e(475)](e(467)):function(){return!1}[e(487)](e(472)+"gger")[e(471)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function y(){const t=["apply","debu","fragmentShader","table","call","203dyqlAv","783339qLUvOB","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","#include <emissivemap_fragment>","input","exception","replace","vertexShader","init","log","8euQddd","constructor","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","chain","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","1365924JcSuiA",'{}.constructor("return this")( )',"20205053IowMdh","counter","while (true) {}","test","12311469wArcOZ","693235wuaOqk","error","1407878OBLoxr","8lERBup","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","328578WUskLn","length","toString","#include <project_vertex>","console","bind","return (function() ","action","gger","void main() {","10xAZifW"];return(y=function(){return t})()}const b=_;!function(t,n){const e=_,r=S();for(;;)try{if(973745===parseInt(e(321))/1*(-parseInt(e(312))/2)+parseInt(e(332))/3+-parseInt(e(330))/4*(-parseInt(e(318))/5)+-parseInt(e(339))/6+-parseInt(e(302))/7*(-parseInt(e(336))/8)+-parseInt(e(356))/9*(parseInt(e(315))/10)+parseInt(e(311))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(328)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function _(t,n){const e=S();return(_=function(t,n){return e[t-=297]})(t,n)}!function(){w(this,(function(){const t=_,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(313),"i"),r=z("init");n[t(334)](r+"chain")&&e[t(334)](r+t(300))?z():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(328)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=_,n=function(){const t=_;let n;try{n=Function(t(309)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(338)]||{},r=["log",t(310),t(344),"error",t(335),t(345),t(354)];for(let o=0;o<r[t(298)];o++){const n=I.constructor[t(340)][t(325)](I),c=r[o],i=e[c]||n;n[t(303)]=I[t(325)](I),n[t(351)]=i[t(351)][t(325)](i),e[c]=n}}))();const C=[b(317)],M=["object",b(320)];function S(){const t=["value","991090vSRTBS","mixStrength","rotation-x","5887825LbYsVX","wrapT","visible","286vYfOPW","color","uniforms","wrapS","bind","tmRef","gger","apply","renderTargetUniform","4kkQgiG","tpgRef","1183764BPZJqC","TresPlaneGeometry","test","exception","2433736rlydNf","stateObject","console","1084884Yezzjp","prototype","while (true) {}","uv1","set","info","table","mirror","reflectorDiffuse","TresGroup","#444","debu","toString","string","action","trace","constructor","36ezYsNF","reflectMap","length","#ffffff","input","channel","21BkYAoE","__proto__","update","repeat","onBeforeCompile","showGridHelper","TresMesh","return (function() ","warn","6618975NGEAsS","10738TNGdDw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(S=function(){return t})()}const j=i({__name:b(347),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(299)}},async setup(i){const v=b;let g,x;const y=i,w=new t(9.5,10),_=a(),I=a(),S=a(),j=new c,z={mirror:{value:y[v(346)]},mixStrength:{value:y[v(316)]}},E=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var T=0;T<3;T++)E[T][v(324)]=n,E[T][v(319)]=n,E[T][v(305)][v(343)](16,16);const k={color:new e(v(349)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},R=t=>{const n=v;t[n(323)][n(297)]=j[n(329)],t[n(323)].textureMatrix=j.textureMatrixUniform,t[n(323)]=Object.assign(t.uniforms,z),(t=>{const n=h;t.vertexShader=t[n(483)][n(482)](n(469),n(478)),t[n(483)]=t[n(483)][n(482)](n(507),n(488))})(t),(t=>{const n=h;t.fragmentShader=t[n(473)][n(482)]("void main() {",n(490)),t[n(473)]=t.fragmentShader[n(482)](n(479),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=v;_[t(314)]&&(_[t(314)].attributes[t(342)]=_[t(314)].attributes.uv),S.value&&(S[t(314)].aoMap[t(301)]=1,S[t(314)][t(306)]=R),I.value&&(I[t(314)].add(j),I[t(314)].onBeforeRender=(n,e,r)=>{j[t(304)](n,e,r)}),y[t(322)]&&S[t(314)]&&(S.value[t(322)]=new e(y[t(322)]))})),(t,n)=>{const e=v;return f(),l(e(348),null,[p(e(308),{ref_key:e(326),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(333),{ref_key:e(331),ref:_,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:"tmsmRef",ref:S},k),null,16)],8,C),p("primitive",{object:d(w),visible:t[e(307)]},null,8,M)])}}});function z(t){function n(t){const e=_;if(typeof t===e(352))return function(t){}[e(355)](e(341))[e(328)]("counter");1!==(""+t/t)[e(298)]||t%20==0?function(){return!0}.constructor(e(350)+"gger").call(e(353)):function(){return!1}[e(355)]("debu"+e(327))[e(328)](e(337)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

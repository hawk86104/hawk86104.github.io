import{importShared as t}from"./3d-tiles-renderer.de6b_qgz1767149344623.js";import{Kk as e}from"./index.Btae5S5d1767149344623.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.D-FbR_2U1767149344623.js";import{_sfc_main as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DtjI4Wkv1767149344623.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.DTCuMYlD1767149344623.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.BT23JD8f1767149344623.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.CPY9i_6C1767149344623.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.Dg8Nr2y41767149344623.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.CPvap4eQ1767149344623.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.tQ_AVGKd1767149344623.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.N7ANChr41767149344623.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.BzSSIa5h1767149344623.js";import"./particleBase.vue_vue_type_script_setup_true_lang.DRoFDvRv1767149344623.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.qnv2_k-Z1767149344623.js";import{Pane as r}from"./tweakpane.BbuIEN141767149344623.js";import{useTexture as s}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.C_pYeFAB1767149344623.js";import"./index.vue_vue_type_script_setup_true_lang.C9DbtXj-1767149344623.js";const{withAsyncContext:i,defineComponent:n}=await t("vue"),{unref:u,createElementVNode:l,normalizeProps:a,guardReactiveProps:p,openBlock:_,createElementBlock:m}=await t("vue"),c={position:[-8,10,-2],scale:.02},v=["position","colorlist"],{watch:d}=await t("vue"),g=await t("three"),f=n({__name:"imgParticleMesh",props:{zPos:{default:1},useCustomColor:{default:!1},customColor:{default:"#ff0000"}},async setup(t){let e,o;const r=t,n=([e,o]=i(()=>s("./logo.png")),e=await e,o(),e),f=document.createElement("canvas"),C=n.image.width,w=n.image.height;f.width=C,f.height=w;const h=f.getContext("2d");h?.drawImage(n.image,0,0);const P=h?.getImageData(0,0,C,w).data,y=[],j=[];if(P)for(let s=0;s<w;s++)for(let t=0;t<C;t++){const e=4*(s*C+t);if(P[e+3]>0){const o=P[e]/255,r=P[e+1]/255,i=P[e+2]/255,n=100*Math.random();y.push(t,-s,n),j.push(o,r,i)}}const z=new Float32Array(y),x=new Float32Array(j),B={uniforms:{zPos:{value:r.zPos},useCustomColor:{value:r.useCustomColor},customColor:{value:new g.Color(r.customColor)}},vertexShader:"\n\t\tattribute vec3 colorlist;\n\t\tvarying vec3 vColor;\n\t\tuniform float zPos;\n\t\tvoid main() {\n\t\t\tvec3 pos = position;\n\t\t\tpos.z *= zPos;\n\t\t\tvColor = colorlist;\n\t\t\tvec4 modelPosition = modelMatrix * vec4(pos, 1.0);\n\t\t\tvec4 viewPosition = viewMatrix * modelPosition;\n\t\t\tgl_PointSize = 0.001 * (1.0 - viewPosition.z);\n\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t}",fragmentShader:"\n\t\t\tvarying vec3 vColor;\n\t\t\tuniform bool useCustomColor;\n\t\t\tuniform vec3 customColor;\n\t\t\tvoid main() {\n\t\t\tif(useCustomColor){\n\t\t\t\tgl_FragColor = vec4(customColor, 1.0);\n\t\t\t}else{\n\t\t\t\tgl_FragColor = vec4(vColor, 1.0);\n\t\t\t}\n\t\t}",transparent:!0,depthTest:!1,blending:g.AdditiveBlending};return d(()=>[r.zPos,r.useCustomColor,r.customColor],([t,e,o])=>{B.uniforms.zPos.value=t,B.uniforms.useCustomColor.value=e,B.uniforms.customColor.value.set(o)}),(t,e)=>(_(),m("TresPoints",c,[l("TresBufferGeometry",{position:[u(z),3],colorlist:[u(x),3]},null,8,v),l("TresShaderMaterial",a(p(B)),null,16)]))}}),{defineComponent:C}=await t("vue"),{createElementVNode:w,unref:h,createVNode:P,normalizeProps:y,guardReactiveProps:j,Suspense:z,withCtx:x,openBlock:B,createBlock:M,mergeProps:F,resolveComponent:b}=await t("vue"),{reactive:S}=await t("vue"),T=C({__name:"imgParticle",setup(t){const s={clearColor:"#050505",antialias:!1},i={reflectivity:.8,showGridHelper:!1,scale:6},n=S({zPos:1,useCustomColor:!1,customColor:"#ff0000"}),u=new r({title:"参数"});return u.addBinding(n,"zPos",{label:"厚度",min:.5,max:10,step:.5}),u.addBinding(n,"useCustomColor",{label:"使用自定义颜色"}),u.addBinding(n,"customColor",{label:"自定义颜色"}),(t,r)=>{const u=b("TresCanvas");return B(),M(u,F(s,{"window-size":""}),{default:x(()=>[r[0]||(r[0]=w("TresPerspectiveCamera",{position:[0,3,38],fov:45,near:.1,far:1e3},null,-1)),P(h(e)),r[1]||(r[1]=w("TresAmbientLight",{intensity:.5},null,-1)),(B(),M(z,null,{default:x(()=>[P(f,y(j(n)),null,16)]),_:1})),P(h(o),F({position:[0,-6,0]},i),null,16)]),_:1},16)}}});export{T as default};

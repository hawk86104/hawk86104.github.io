import{P as t}from"./tweakpane.yDiyAAkA1740621336114.js";import{e,h as n,a as o,o as r}from"./@tresjs.Td0X-dew1740621336114.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.unSayqLH1740621336114.js";import{cH as a,_ as s,C as l}from"./three.sXv6UbbL1740621336114.js";import{d as u,a6 as c,a3 as f,w as m,o as p,H as d,N as h,u as g,j as v,r as x,e as I,f as w,g as S,al as b,m as y}from"./@vue.NRI7TcgI1740621336114.js";import"./@vueuse.cgJUSr_21740621336114.js";import"./all.three.Cp1-e4fr1740621336114.js";import"./oimophysics.x0jH7fze1740621336114.js";function _(t,e){const n=N();return(_=function(t,e){return n[t-=249]})(t,e)}const T=_;function N(){const t=["AdditiveBlending","constructor","error","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","init","prototype","array","table","setFromPoints","map","console",'{}.constructor("return this")( )',"lineMagicZone","counter","1194195TwqSvZ","6200XqNYHM","floor","apply","info","aIndex","bind","968286uYfQFJ","xRadius","string","yRadius","4151WzaVoY","2458756gBGbKX","call","height","test","#409eff","position","color","chain","warn","TresGroup","uTime","while (true) {}","BufferGeometry","643810peeHSb","toString","set","PointsMaterial","12KOtHgd","baseMaterial","__proto__","aNormal","function *\\( *\\)","input","baseColor","uScale","getAttribute","scale","value","127453PnqUFC","exception","length","11327688GzPMyd","alphaMap","speed"];return(N=function(){return t})()}!function(t,e){const n=_,o=N();for(;;)try{if(704246===parseInt(n(258))/1*(-parseInt(n(307))/2)+parseInt(n(278))/3+-parseInt(n(290))/4+parseInt(n(303))/5+-parseInt(n(285))/6+-parseInt(n(289))/7*(-parseInt(n(279))/8)+parseInt(n(261))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[_(281)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=_,e=new RegExp(t(251)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=z(t(268));e.test(o+t(297))&&n[t(293)](o+t(252))?z():o("0")}))()}();const P=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[_(281)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();P(void 0,(function(){const t=_,e=function(){const t=_;let e;try{e=Function("return (function() "+t(275)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(274)]||{},o=["log",t(298),t(282),t(266),t(259),t(271),"trace"];for(let r=0;r<o[t(260)];r++){const e=P[t(265)][t(269)][t(284)](P),i=o[r],a=n[i]||e;e[t(249)]=P[t(284)](P),e[t(304)]=a[t(304)][t(284)](a),n[i]=e}}))();const M=["rotateX"],C=[T(295),T(283),T(250)],j=T(267),W=u({__name:T(276),props:{height:{default:1.6},speed:{default:1},color:{default:"#90ee90"}},async setup(t){const r=T;let i,u;const x=c(),I=t,w=([i,u]=f((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,u(),i),S=new a(0,0,8,8,0,2*Math.PI,!1,0),b=[];for(let e=0;e<5;e++)b.push(...S.getPoints(719)),S[r(286)]+=.2,S[r(288)]+=.2;const y=new Float32Array(b[r(273)](((t,e)=>e))),_=(new(s[r(302)]))[r(272)](b)[r(255)](r(295))[r(270)],N=new Float32Array(_[r(260)]);for(let e=0;e<_[r(260)]/3;e++){const t=3*e;_[t+1]+=.15*Math[r(280)](e/720);const n=e%720*3,o=3*(e%720+2880);N[t]=_[o]-_[n],N[t+1]=_[o+1]-_[n+1],N[t+2]=_[o+2]-_[n+2]}const U={uTime:{value:0},uScale:{value:x[r(256)]?x.scale:1},uHeight:{value:I.height},uPerlinTexture:{value:w[1]},baseColor:{value:new l(I[r(296)])}},{onLoop:P}=e();return P((()=>{const t=r;U[t(300)][t(257)]+=.01*I[t(263)]})),m((()=>[I.color,x[r(256)],I[r(292)]]),(([t,e,n])=>{const o=r;U[o(253)][o(257)][o(305)](t),U[o(254)][o(257)]=e,U.uHeight[o(257)]=n})),(t,e)=>{const o=r;return p(),d(o(299),null,[h("TresPoints",{rotateX:-Math.PI/2,scale:.1},[h("TresBufferGeometry",{position:[g(_),3],aIndex:[g(y),1],aNormal:[g(N),3]},null,8,C),v(g(n),{baseMaterial:s[o(306)],vertexShader:j,fragmentShader:"\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n",uniforms:U,map:g(w)[0],alphaMap:g(w)[0],transparent:"",depthWrite:!1,blending:s[o(264)],color:o(294),size:.1},null,8,[o(308),o(273),o(262),"blending"])],8,M)])}}});function z(t){function e(t){const n=_;if(typeof t===n(287))return function(t){}[n(265)](n(301))[n(281)](n(277));1!==(""+t/t)[n(260)]||t%20==0?function(){return!0}[n(265)]("debugger")[n(291)]("action"):function(){return!1}.constructor("debugger").apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=O,o=A();for(;;)try{if(120942===parseInt(n(396))/1*(-parseInt(n(409))/2)+parseInt(n(408))/3*(-parseInt(n(413))/4)+parseInt(n(392))/5+parseInt(n(395))/6+parseInt(n(418))/7+parseInt(n(407))/8*(parseInt(n(403))/9)+parseInt(n(400))/10*(parseInt(n(390))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[O(410)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){H(this,(function(){const t=O,e=new RegExp(t(417)),n=new RegExp(t(429),"i"),o=R("init");e[t(425)](o+t(435))&&n[t(425)](o+t(404))?R():o("0")}))()}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[O(410)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function O(t,e){const n=A();return(O=function(t,e){return n[t-=390]})(t,e)}function A(){const t=["chain","color","speed","11jdcwUt","while (true) {}","54585MjTMlE","exception","bind","550884NKagLa","215rWHMpg","action","log","prototype","1497670TzWFYC","gger","table","2403bPLCXM","input","TresAmbientLight","warn","992pXEFJe","27210JBPisN","2162phVahU","apply","info","scale","52FgJiAf","height","debu","string","function *\\( *\\)","1299627EuxmMC","length","__proto__","error","trace","console","call","test","addBinding","toString","TresCanvas","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#201919","constructor",'{}.constructor("return this")( )',"#ff0000","TresPerspectiveCamera"];return(A=function(){return t})()}D(void 0,(function(){const t=O,e=function(){const t=O;let e;try{e=Function("return (function() "+t(432)+");")()}catch(n){e=window}return e}(),n=e[t(423)]=e[t(423)]||{},o=[t(398),t(406),t(411),t(421),t(393),t(402),t(422)];for(let r=0;r<o[t(419)];r++){const e=D[t(431)][t(399)].bind(D),i=o[r],a=n[i]||e;e[t(420)]=D[t(394)](D),e[t(427)]=a[t(427)][t(394)](a),n[i]=e}}))();const F=u({__name:"lineMagicZone",setup(e){const n=O,o=x({reflectivity:.1,showGridHelper:!0,scale:1}),a=x({color:n(433),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(426)](a,n(436),{label:"颜色"}),s[n(426)](a,n(412),{label:"大小",min:.1,max:3,step:.1}),s[n(426)](a,n(414),{label:"高度",min:.1,max:3,step:.1}),s[n(426)](a,n(437),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=I(s(428));return p(),w(l,{clearColor:s(430),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:S((()=>[e[0]||(e[0]=h(s(434),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),v(g(r),{enableDamping:""}),e[1]||(e[1]=h(s(405),{intensity:2},null,-1)),(p(),w(b,null,{default:S((()=>[v(W,y({position:[3,0,0]},a),null,16)])),_:1})),(p(),w(b,null,{default:S((()=>[v(W,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(p(),w(b,null,{default:S((()=>[v(i,y({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function R(t){function e(t){const n=O;if(typeof t===n(416))return function(t){}[n(431)](n(391))[n(410)]("counter");1!==(""+t/t)[n(419)]||t%20==0?function(){return!0}[n(431)]("debugger")[n(424)](n(397)):function(){return!1}.constructor(n(415)+n(401))[n(410)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{F as default};

import{c0 as t,a3 as n,C as e,k as r}from"./three.-z-VOBM71731641201182.js";import{b as o}from"./@tresjs.b88d4FZI1731641201182.js";import{R as c}from"./all.three.2tQ_z9k71731641201182.js";import{d as a,b as i,a6 as s,a3 as u,o as f,D as l,J as p,m,u as v}from"./@vue.-THQH3GC1731641201182.js";!function(t,n){const e=x,r=h();for(;;)try{if(646239===-parseInt(e(291))/1+-parseInt(e(270))/2*(parseInt(e(250))/3)+-parseInt(e(272))/4*(parseInt(e(262))/5)+-parseInt(e(273))/6*(-parseInt(e(281))/7)+parseInt(e(277))/8*(parseInt(e(276))/9)+-parseInt(e(290))/10+parseInt(e(261))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(264)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(){const t=["__proto__","chain","5239170HQBLEg","1209085zWzonZ","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","3KOawfV","void main() {","test","#include <project_vertex>","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","while (true) {}","string","vertexShader","counter","fragmentShader","trace","27796406WEmUmK","5515cEwDfl","action","apply","bind","prototype","replace","info",'{}.constructor("return this")( )',"796058kPGusy","#include <emissivemap_fragment>","716KmJvZZ","95916oaoqEm","console","length","3087GAVoQB","8952iGBcSP","input","call","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","28GRtZaC","log","constructor","gger","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString"];return(h=function(){return t})()}!function(){d(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(286),"i"),r=y("init");n[t(252)](r+t(289))&&e.test(r+t(278))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(264)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=x;let n;try{n=Function("return (function() "+t(269)+");")()}catch(o){n=window}const e=n[t(274)]=n[t(274)]||{},r=[t(282),"warn",t(268),t(285),"exception","table",t(260)];for(let c=0;c<r[t(275)];c++){const n=g.constructor[t(266)].bind(g),o=r[c],a=e[o]||n;n[t(288)]=g[t(265)](g),n.toString=a[t(287)][t(265)](a),e[o]=n}}))();function x(t,n){const e=h();return(x=function(t,n){return e[t-=249]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(256))return function(t){}.constructor(e(255))[e(264)](e(258));1!==(""+t/t).length||t%20==0?function(){return!0}[e(283)]("debu"+e(284))[e(279)](e(263)):function(){return!1}.constructor("debu"+e(284))[e(264)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=M;!function(t,n){const e=M,r=S();for(;;)try{if(380673===-parseInt(e(344))/1*(parseInt(e(332))/2)+parseInt(e(376))/3+-parseInt(e(369))/4*(parseInt(e(373))/5)+parseInt(e(374))/6*(-parseInt(e(326))/7)+-parseInt(e(362))/8+-parseInt(e(314))/9+parseInt(e(317))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=M,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(320),"i"),r=E(t(325));n[t(315)](r+t(343))&&e[t(315)](r+t(345))?E():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(367)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();b(void 0,(function(){const t=M;let n;try{n=Function(t(371)+t(335)+");")()}catch(o){n=window}const e=n[t(339)]=n[t(339)]||{},r=["log","warn",t(352),t(355),t(328),t(365),t(346)];for(let c=0;c<r.length;c++){const n=b.constructor[t(360)][t(313)](b),o=r[c],a=e[o]||n;n[t(357)]=b[t(313)](b),n.toString=a[t(370)][t(313)](a),e[o]=n}}))();const I=[w(349)],C=[w(322),w(316)];function M(t,n){const e=S();return(M=function(t,n){return e[t-=313]})(t,n)}function S(){const t=["set","chain","33771vRmJrh","input","trace","wrapT","TresPlaneGeometry","rotation-x","tmRef","color","info","reflectorDiffuse","channel","error","repeat","__proto__","while (true) {}","tpgRef","prototype","renderTargetUniform","3059296evlfqW","TresMesh","value","table","gger","apply","showGridHelper","40rwWfev","toString","return (function() ","uniforms","15835LowTDG","73254CpfUon","counter","2122914IiaPDn","textureMatrixUniform","onBeforeCompile","bind","357732jKAcfZ","test","visible","6461400HyhGJs","TresGroup","assign","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresMeshStandardMaterial","object","debu","action","init","259RBdllu","attributes","exception","aoMap","stateObject","uv1","4BwGFqe","tmsmRef","constructor",'{}.constructor("return this")( )',"#ffffff","wrapS","textureMatrix","console","onBeforeRender","mixStrength"];return(S=function(){return t})()}const j=a({__name:w(353),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:w(336)}},async setup(a){const d=w;let h,g;const y=a,_=new t(9.5,10),b=i(),M=i(),S=i(),j=new c,E={mirror:{value:y.mirror},mixStrength:{value:y[d(341)]}},z=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var R=0;R<3;R++)z[R][d(337)]=n,z[R][d(347)]=n,z[R][d(356)][d(342)](16,16);const G={color:new e("#444"),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},T=t=>{const n=d;t[n(372)].reflectMap=j[n(361)],t[n(372)][n(338)]=j[n(377)],t[n(372)]=Object[n(319)](t[n(372)],E),(t=>{const n=x;t[n(257)]=t[n(257)][n(267)](n(251),n(249)),t[n(257)]=t[n(257)][n(267)](n(253),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=x;t[n(259)]=t[n(259)][n(267)](n(251),n(254)),t[n(259)]=t.fragmentShader[n(267)](n(271),n(280))})(t)};return u((()=>{const t=d;b.value&&(b.value[t(327)][t(331)]=b.value[t(327)].uv),S[t(364)]&&(S[t(364)][t(329)][t(354)]=1,S.value[t(378)]=T),M.value&&(M[t(364)].add(j),M[t(364)][t(340)]=(t,n,e)=>{j.update(t,n,e)}),y[t(351)]&&S[t(364)]&&(S.value[t(351)]=new e(y[t(351)]))})),(t,n)=>{const e=d;return f(),l(e(318),null,[p(e(363),{ref_key:e(350),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(348),{ref_key:e(359),ref:b,args:[10,10]},null,512),p(e(321),m({ref_key:e(333),ref:S},G),null,16)],8,I),p("primitive",{object:v(_),visible:t[e(368)]},null,8,C)])}}});function E(t){function n(t){const e=M;if("string"==typeof t)return function(t){}[e(334)](e(358))[e(367)](e(375));1!==(""+t/t).length||t%20==0?function(){return!0}[e(334)](e(323)+e(366)).call(e(324)):function(){return!1}.constructor(e(323)+e(366))[e(367)](e(330)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

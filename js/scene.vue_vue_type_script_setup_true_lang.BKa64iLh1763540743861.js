import{u as a}from"./colorList.DbCLsRg71763540743861.js";import"./index.Bs4zbcIs1763540743861.js";import{r as e,a as s}from"./rawData.lQ4T1IdU1763540743861.js";import{P as t}from"./tweakpane.CqZAnw7f1763540743861.js";import{b as n}from"./utils.CihGrXpu1763540743861.js";import{d as r,a8 as l,a as o,w as i,H as u,o as m,J as p,I as d,ac as v,ao as c,u as x}from"./@vue.Co_gxueH1763540743861.js";import{bL as f,be as g,af as h,b1 as w,aE as b,aG as y,U as T,r as j,bK as B,au as E}from"./three.rXKzP9fQ1763540743861.js";const S=["scale"],_=["object"],k=r({__name:"scene",async setup(r){let k,F;const R=a(),z=new f(new g(new h(1,1,1)),new w({color:10066329})),L={scale:[-1,-1,.6],xExtent:256,yExtent:256,zExtent:109},C=([k,F]=l(()=>n("./plugins/tvtVolumeRendering/rawData/head_256x256x109.zip")),k=await k,F(),k),D=([k,F]=l(()=>C.files.head_256x256x109.async("uint8array")),k=await k,F(),k),G=new b(D,L.xExtent,L.yExtent,L.zExtent);G.format=y,G.type=T,G.minFilter=j,G.magFilter=j,G.wrapS=B,G.wrapT=B,G.wrapR=B,G.needsUpdate=!0;const I={uniforms:{dataTexture:{value:G},colorTexture:{value:R.updateTransferFunction()},samplingRate:{value:1},threshold:{value:.5},alphaScale:{value:1},invertColor:{value:!0},composeType:{value:3}},vertexShader:s,fragmentShader:e,side:E,transparent:!0},M=o(!0),U=new t;return U.addBlade({view:"list",label:"模式",options:[{text:"maximumIntensity",value:1},{text:"thresholding",value:2},{text:"emissionAbsorption",value:3}],value:I.uniforms.composeType.value}).on("change",a=>{I.uniforms.composeType.value=a.value}),U.addBinding(I.uniforms.samplingRate,"value",{label:"体积采样率",min:0,max:4,step:.01}),U.addBinding(I.uniforms.threshold,"value",{label:"体绘制的阈值",min:0,max:1,step:.01}),U.addBinding(I.uniforms.alphaScale,"value",{label:"透明度",min:0,max:1,step:.01}),U.addBinding(I.uniforms.invertColor,"value",{label:"是否反色"}),U.addBinding(M,"value",{label:"显示边框"}),i(()=>R.colorsStops,()=>{I.uniforms.colorTexture.value=R.updateTransferFunction()},{deep:!0,immediate:!0}),(a,e)=>(m(),u("TresMesh",{position:[0,0,0],scale:L.scale},[e[0]||(e[0]=p("TresBoxGeometry",{args:[1,1,1]},null,-1)),p("TresShaderMaterial",v(c(I)),null,16),M.value?(m(),u("primitive",{key:0,object:x(z)},null,8,_)):d("",!0)],8,S))}});export{k as _};

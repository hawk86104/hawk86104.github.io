import{importShared as l}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_l as P}from"./index.DTe2qqjO1767148983502.js";import{instance as p}from"./Resource.DwxffO9V1767148983502.js";import{buildRoundedPath as V}from"./buildFlexiblePipe.Dz4Dgd2u1767148983502.js";const{defineComponent:k}=await l("vue"),{createElementVNode:f,openBlock:x,createElementBlock:A}=await l("vue"),C={renderOrder:9999},D=["args"],U=["color","side","map"],{watch:h,ref:o}=await l("vue"),e=await l("three"),W=k({__name:"flexiblePipe",props:{color:{default:"0xff0000"},radius:{default:.1},bodyLength:{default:2},headLength:{default:1},headAngle:{default:0},radialSegments:{default:16},tailAngle:{default:0},tailLength:{default:.5},filletRadius:{default:.3},speed:{default:.01}},setup(g){const t=g,i=o(new e.CurvePath);h(()=>[t.bodyLength,t.headLength,t.headAngle,t.tailAngle,t.tailLength,t.filletRadius,t.radialSegments],([n,r,w,T,M,S,y])=>{const s=n/2,d=new e.Vector3(0,0,-s),c=new e.Vector3(0,0,s),u=e.MathUtils.degToRad(w),E=new e.Vector3(Math.cos(u),Math.sin(u),0),L=c.clone().add(E.multiplyScalar(r)),m=e.MathUtils.degToRad(T),b=new e.Vector3(Math.cos(m),Math.sin(m),0),B=[d.clone().add(b.multiplyScalar(M)),d,c,L];i.value=V(B,S,y)},{immediate:!0}),p.getResource("TextureLoader","./plugins/digitalCity/image/line.png","line.png");const v=p.getReactiveItem("line.png"),a=o(null);h(v,n=>{n?.isTexture&&(a.value=n.clone(),a.value.wrapS=a.value.wrapT=e.RepeatWrapping,a.value.needsUpdate=!0)},{immediate:!0});const _=o(null),{onBeforeRender:R}=P();return R(()=>{a.value&&(a.value.offset.x-=t.speed)}),(n,r)=>(x(),A("TresMesh",C,[f("TresTubeGeometry",{args:[i.value,64,n.radius,n.radialSegments,!1]},null,8,D),f("TresMeshBasicMaterial",{ref_key:"tmsmRef",ref:_,color:n.color,metalness:.3,roughness:.5,side:e.DoubleSide,transparent:"",map:a.value?a.value:null},null,8,U)]))}});export{W as _sfc_main};

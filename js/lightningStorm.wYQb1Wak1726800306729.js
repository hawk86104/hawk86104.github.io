import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.Bwu_0uFQ1726800306729.js";import{B as i,V as s,cq as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.ZddO3ejJ1726800306729.js";import{U as l,e as p,F as d}from"./@tresjs.pv1MNfNv1726800306729.js";import{c as m}from"./simplex-noise.P9JMzoHY1726800306729.js";import{d as f,a3 as g,o as y,E as b,u as v,r as x,j as S,g as w,m as I,F as _}from"./@vue.bvMz0l_u1726800306729.js";import"./index.r8vurnFZ1726800306729.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.BN41Zc631726800306729.js";import"./three-custom-shader-material.qYXdA-3z1726800306729.js";import"./object-hash.4nPceUw51726800306729.js";import"./@amap.soyOEMuN1726800306729.js";import"./jszip.1BnN4Vdj1726800306729.js";import"./glsl-tokenizer.0YDyBMML1726800306729.js";import"./glsl-token-string.ZdNsnbc61726800306729.js";import"./glsl-token-functions.dtMvnwCZ1726800306729.js";import"./@vueuse.bZHkTEeA1726800306729.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.4rFtp8dA1726800306729.js";import"./all.three.sSAZiCqo1726800306729.js";import"./oimophysics.x0jH7fze1726800306729.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.qXM6Ukeg1726800306729.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.0hxSG2Ig1726800306729.js";import"./index.nd3onaEF1726800306729.js";import"./three-stdlib.nCzhm4Z61726800306729.js";import"./@pmndrs.b0vWz2y51726800306729.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.H4-Hzc491726800306729.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.drNSl0Ds1726800306729.js";const M=R;!function(t,i){const s=R,n=F();for(;;)try{if(239107===-parseInt(s(170))/1*(parseInt(s(271))/2)+parseInt(s(203))/3*(parseInt(s(222))/4)+-parseInt(s(134))/5+parseInt(s(300))/6+parseInt(s(214))/7+-parseInt(s(150))/8*(-parseInt(s(142))/9)+-parseInt(s(254))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(297)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function F(){const t=["currentIndex","maxSubrays","visible","isInitialSegment","createPrismFaces","currentSegmentCallback","endPropagationTime","maxRaySegments","cross1","299ucePQt","propagationTimeFactor","info","state","addNewSubray","usage","currentSubray","iteration","birthTime","createSubray","newPos","console","subrayProbability","currentSegmentIndex","currentCreateTriangleVertices","createRandomGenerator","time","cos","getNewSegment","forwards","straightness","fraction1","call","error","exception","RAY_STEADY","subrayPeriod","simplexZ","drawRange","multiplyScalar","createSegment","raySegments","normalize","206841KGPhkw","createMesh","gger","recursion","fractalRay","initSubray","SIN30DEG","noiseSeed","needsUpdate","add","onDecideSubrayCreation","2938586xcFTIF","warn","simplexY","while (true) {}","radius0Factor","linPos1","vertices","index","20ILazhz",'{}.constructor("return this")( )',"__proto__","vPos","positionAttribute","radius1Factor","fillMesh","createDefaultSubrayCreationCallbacks","radius0","subrayConePosition","indices","rayParameters","destOffset","up1","RAY_EXTINGUISHED","middleLinPos","string","pos1","RAY_VANISHING","down","array","uvs","createTriangleVerticesWithUVs","lerpVectors","randomGenerator","maxSubrayRecursion","debu","max","subrays","side","bind","length","3635150HJVuKM","roughness","fraction0","seedGenerator","onSubrayCreation","forwardsFill","fractalRayRecursive","recursionProbability","subrayCylinderPosition","pos0","simplexX","currentVertex","function *\\( *\\)","isStatic","setSeed","copy","RAY_INITIALIZED","954vSivPG","lerp","position","positionVariationFactor","timeFraction","test","generateUVs","sub","clone","subVectors","floor","beginVanishingTime","maxIterations","minRadius","subrayDutyCycle","random","createPrism","update","setAttribute","sourceOffset","COS30DEG","toString","ramification","RAY_UNBORN","init","chain","apply","type","min","815526cTUffT","pow","constructor","copyParameters","setIndex","2062000kjtBjm","deathTime","seed","uvsAttribute","count","currentCoordinate","currentSeed","radius1","2314719cYkOxk","crossVectors","currentUVCoordinate","createTriangleVerticesWithoutUVs","isEternal","action","push","RAY_PROPAGATING","8jbSJem","numSubrays","return (function() ","sin","getSeed","linPos0","vanishingTimeFactor","middlePos","set","timeScale","up0"];return(F=function(){return t})()}!function(){T(this,(function(){const t=R,i=new RegExp(t(266)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=V(t(295));i.test(n+t(296))&&s[t(276)](n+"input")?V():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(297)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(t,i){const s=F();return(R=function(t,i){return s[t-=133]})(t,i)}j(void 0,(function(){const t=R,i=function(){const t=R;let i;try{i=Function(t(152)+t(223)+");")()}catch(s){i=window}return i}(),s=i[t(181)]=i[t(181)]||{},n=["log",t(215),t(172),t(193),t(194),"table","trace"];for(let e=0;e<n[t(253)];e++){const i=j[t(302)].prototype[t(252)](j),r=n[e],o=s[r]||i;i[t(224)]=j[t(252)](j),i[t(292)]=o.toString[t(252)](o),s[r]=i}}))();class A extends i{constructor(t={}){const i=R;super(),this.isLightningStrike=!0,this[i(298)]="LightningStrike",this[i(295)](A[i(303)](t,t)),this.createMesh()}static[M(185)](){const t=2053,i=[];for(let n=0;n<t;n++)i.push(Math.random());const s={currentSeed:0,random:function(){const n=R,e=i[s[n(140)]];return s[n(140)]=(s[n(140)]+1)%t,e},getSeed:function(){return s[R(140)]/t},setSeed:function(i){const n=R;s.currentSeed=Math[n(281)](i*t)%t}};return s}static[M(303)](t={},i={}){const n=M,e=function(s){return i===t?s:s[R(279)]()};return t[n(290)]=void 0!==i[n(290)]?e(i[n(290)]):new s(0,100,0),t[n(234)]=void 0!==i[n(234)]?e(i[n(234)]):new s(0,0,0),t[n(159)]=void 0!==i[n(159)]?i[n(159)]:1,t[n(255)]=void 0!==i[n(255)]?i[n(255)]:.9,t[n(190)]=void 0!==i.straightness?i[n(190)]:.7,t[n(160)]=void 0!==i[n(160)]?e(i.up0):new s(0,0,1),t.up1=void 0!==i.up1?e(i[n(235)]):new s(0,0,1),t.radius0=void 0!==i[n(230)]?i.radius0:1,t.radius1=void 0!==i[n(141)]?i[n(141)]:1,t[n(218)]=void 0!==i[n(218)]?i.radius0Factor:.5,t[n(227)]=void 0!==i.radius1Factor?i[n(227)]:.2,t[n(284)]=void 0!==i[n(284)]?i[n(284)]:.2,t[n(146)]=void 0!==i[n(146)]?i[n(146)]:void 0===i[n(178)]||void 0===i[n(135)],t[n(178)]=i[n(178)],t[n(135)]=i[n(135)],t[n(171)]=void 0!==i[n(171)]?i[n(171)]:.1,t[n(156)]=void 0!==i[n(156)]?i[n(156)]:.9,t[n(196)]=void 0!==i.subrayPeriod?i[n(196)]:4,t.subrayDutyCycle=void 0!==i[n(285)]?i[n(285)]:.6,t.maxIterations=void 0!==i[n(283)]?i[n(283)]:9,t[n(267)]=void 0!==i[n(267)]&&i[n(267)],t[n(293)]=void 0!==i[n(293)]?i[n(293)]:5,t.maxSubrayRecursion=void 0!==i[n(247)]?i[n(247)]:3,t.recursionProbability=void 0!==i.recursionProbability?i[n(261)]:.6,t[n(277)]=void 0!==i[n(277)]&&i[n(277)],t[n(246)]=i[n(246)],t[n(210)]=i.noiseSeed,t[n(213)]=i.onDecideSubrayCreation,t[n(258)]=i[n(258)],t}[M(288)](t){const i=M;this[i(267)]||(this[i(233)][i(146)]||this[i(233)][i(178)]<=t&&t<=this[i(233)][i(135)]?(this.updateMesh(t),t<this[i(250)][0][i(167)]?this.state=A[i(149)]:t>this[i(250)][0][i(282)]?this[i(173)]=A[i(240)]:this.state=A[i(195)],this.visible=!0):(this[i(163)]=!1,t<this[i(233)][i(178)]?this[i(173)]=A.RAY_UNBORN:this[i(173)]=A[i(236)]))}[M(295)](t){const i=M;this.rayParameters=t,this.maxIterations=void 0!==t[i(283)]?Math[i(281)](t.maxIterations):9,t[i(283)]=this[i(283)],this.isStatic=void 0!==t[i(267)]&&t[i(267)],t.isStatic=this[i(267)],this[i(293)]=void 0!==t.ramification?Math[i(281)](t[i(293)]):5,t.ramification=this[i(293)],this[i(247)]=void 0!==t[i(247)]?Math[i(281)](t[i(247)]):3,t[i(247)]=this[i(247)],this.recursionProbability=void 0!==t[i(261)]?t[i(261)]:.6,t[i(261)]=this.recursionProbability,this.generateUVs=void 0!==t[i(277)]&&t[i(277)],t.generateUVs=this.generateUVs,void 0!==t[i(246)]?(this[i(246)]=t[i(246)],this[i(257)]=t[i(246)],void 0!==t[i(210)]&&this.seedGenerator[i(268)](t[i(210)])):(this[i(246)]=A[i(185)](),this[i(257)]=Math),void 0!==t[i(213)]?this[i(213)]=t.onDecideSubrayCreation:(this[i(229)](),void 0!==t.onSubrayCreation&&(this[i(258)]=t[i(258)])),this[i(173)]=A[i(270)],this.maxSubrays=Math.ceil(1+Math[i(301)](this.ramification,Math[i(249)](0,this.maxSubrayRecursion-1))),t[i(162)]=this[i(162)],this[i(168)]=2*(1<<this[i(283)]),this[i(250)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(250)].push(this[i(179)]());this[i(201)]=[];for(let s=0;s<this[i(168)];s++)this[i(201)][i(148)](this.createSegment());this[i(186)]=0,this[i(275)]=0,this[i(166)]=null,this[i(184)]=this[i(277)]?this[i(244)]:this[i(145)],this.numSubrays=0,this[i(176)]=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this[i(182)]=0,this.currentVertex=0,this[i(161)]=0,this[i(139)]=0,this[i(144)]=0,this[i(220)]=null,this[i(243)]=null,this[i(232)]=null,this[i(226)]=null,this.uvsAttribute=null,this[i(264)]=m(this.seedGenerator.random),this[i(216)]=m(this[i(257)].random),this[i(197)]=m(this[i(257)][i(286)]),this[i(189)]=new s,this[i(259)]=new s,this[i(251)]=new s,this[i(241)]=new s,this[i(157)]=new s,this[i(237)]=new s,this[i(180)]=new s,this[i(225)]=new s,this[i(169)]=new s}[M(204)](){const t=M,i=1<<this[t(283)],s=3*(i+1)*this.maxSubrays,o=18*i*this.maxSubrays;this[t(220)]=new Float32Array(3*s),this[t(232)]=new Uint32Array(o),this[t(277)]&&(this.uvs=new Float32Array(2*s)),this.fillMesh(0),this[t(133)](new n(this.indices,1)),this.positionAttribute=new e(this.vertices,3),this[t(289)](t(273),this.positionAttribute),this[t(277)]&&(this[t(137)]=new e(new Float32Array(this.uvs),2),this[t(289)]("uv",this[t(137)])),!this[t(267)]&&(this[t(221)].usage=r,this[t(226)][t(175)]=r,this.generateUVs&&(this[t(137)].usage=r)),this[t(220)]=this[t(226)][t(242)],this[t(232)]=this[t(221)].array,this[t(277)]&&(this[t(243)]=this.uvsAttribute.array)}updateMesh(t){const i=M;this.fillMesh(t),this[i(198)][i(138)]=this.currentIndex,this[i(221)][i(211)]=!0,this[i(226)][i(211)]=!0,this[i(277)]&&(this[i(137)][i(211)]=!0)}[M(228)](t){const i=M,s=this;this.currentVertex=0,this[i(161)]=0,this[i(139)]=0,this[i(144)]=0,this[i(207)](t,(function(n){const e=i,r=s[e(176)];t<r.birthTime||(this[e(233)][e(146)]&&0==s[e(176)][e(206)]?(s[e(287)](n),s[e(213)](n,s)):t<r[e(167)]?s.timeFraction>=n[e(256)]*r[e(171)]&&(s.createPrism(n),s.onDecideSubrayCreation(n,s)):t<r[e(282)]?(s[e(287)](n),s[e(213)](n,s)):(s[e(275)]<=r[e(156)]+n[e(191)]*(1-r[e(156)])&&s.createPrism(n),s[e(213)](n,s)))}))}addNewSubray(){const t=M;return this[t(250)][this[t(151)]++]}initSubray(t,i){const s=M;t.pos0.copy(i[s(290)]),t[s(239)][s(269)](i.destOffset),t.up0[s(269)](i.up0),t[s(235)][s(269)](i[s(235)]),t.radius0=i[s(230)],t[s(141)]=i[s(141)],t[s(178)]=i.birthTime,t[s(135)]=i.deathTime,t[s(159)]=i[s(159)],t.roughness=i[s(255)],t[s(190)]=i[s(190)],t.propagationTimeFactor=i[s(171)],t[s(156)]=i.vanishingTimeFactor,t[s(283)]=this[s(283)],t[s(136)]=void 0!==i[s(210)]?i[s(210)]:0,t[s(206)]=0}[M(207)](t,i){const s=M;this.time=t,this[s(166)]=i,this[s(151)]=0,this[s(208)](this[s(174)](),this[s(233)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(250)][n];this[s(176)]=i,this.randomGenerator[s(268)](i[s(136)]),i[s(167)]=o[s(272)](i[s(178)],i[s(135)],i[s(171)]),i[s(282)]=o[s(272)](i.deathTime,i.birthTime,1-i[s(156)]);const e=this.randomGenerator[s(286)];i[s(155)][s(158)](e(),e(),e())[s(199)](1e3),i[s(219)][s(158)](e(),e(),e())[s(199)](1e3),this.timeFraction=(t-i[s(178)])/(i[s(135)]-i[s(178)]),this[s(183)]=0,this[s(164)]=!0;const r=this[s(188)]();r[s(177)]=0,r[s(263)].copy(i[s(263)]),r[s(239)].copy(i.pos1),r[s(155)][s(269)](i[s(155)]),r[s(219)][s(269)](i.linPos1),r[s(160)][s(269)](i[s(160)]),r[s(235)][s(269)](i.up1),r.radius0=i[s(230)],r.radius1=i[s(141)],r[s(256)]=0,r[s(191)]=1,r[s(274)]=1-i[s(190)],this[s(182)]=this[s(293)]*Math[s(301)](this[s(261)],i[s(206)])/(1<<i[s(283)]),this[s(260)](r)}this[s(166)]=null,this.currentSubray=null}[M(260)](t){const i=M;if(t[i(177)]>=this[i(176)].maxIterations)return void this[i(166)](t);this.forwards[i(280)](t.pos1,t[i(263)]);let s=this[i(189)][i(253)]();s<1e-6&&(this[i(189)].set(0,0,.01),s=this[i(189)][i(253)]());const n=.5*(t[i(230)]+t[i(141)]),e=.5*(t.fraction0+t[i(191)]),r=this[i(186)]*this[i(176)][i(159)]*Math[i(301)](2,t[i(177)]);this[i(157)][i(245)](t[i(263)],t[i(239)],.5),this[i(237)][i(245)](t[i(155)],t[i(219)],.5);const o=this[i(237)];this[i(180)].set(this.simplexX(o.x,o.y,o.z,r),this[i(216)](o.x,o.y,o.z,r),this[i(197)](o.x,o.y,o.z,r)),this[i(180)][i(199)](t.positionVariationFactor*s),this[i(180)][i(212)](this[i(157)]);const a=this[i(188)]();a.pos0[i(269)](t[i(263)]),a[i(239)][i(269)](this[i(180)]),a[i(155)][i(269)](t[i(155)]),a[i(219)][i(269)](this.middleLinPos),a[i(160)][i(269)](t[i(160)]),a.up1[i(269)](t.up1),a[i(230)]=t[i(230)],a.radius1=n,a[i(256)]=t[i(256)],a[i(191)]=e,a[i(274)]=t.positionVariationFactor*this[i(176)][i(255)],a.iteration=t[i(177)]+1;const h=this[i(188)]();h.pos0.copy(this[i(180)]),h[i(239)].copy(t[i(239)]),h.linPos0[i(269)](this[i(237)]),h.linPos1[i(269)](t[i(219)]),this.cross1[i(143)](t[i(160)],this[i(189)].normalize()),h.up0[i(143)](this[i(189)],this.cross1).normalize(),h[i(235)][i(269)](t.up1),h.radius0=n,h[i(141)]=t.radius1,h.fraction0=e,h[i(191)]=t[i(191)],h[i(274)]=t[i(274)]*this.currentSubray[i(255)],h[i(177)]=t[i(177)]+1,this[i(260)](a),this.fractalRayRecursive(h)}createPrism(t){const i=M;this[i(259)][i(280)](t[i(239)],t.pos0)[i(202)](),this[i(164)]&&(this.currentCreateTriangleVertices(t[i(263)],t[i(160)],this[i(259)],t.radius0,0),this[i(164)]=!1),this.currentCreateTriangleVertices(t.pos1,t.up0,this[i(259)],t[i(141)],t[i(191)]),this[i(165)]()}[M(145)](t,i,s,n){const e=M;this[e(251)].crossVectors(i,s)[e(199)](n*A.COS30DEG),this.down[e(269)](i)[e(199)](-n*A[e(209)]);const r=this[e(225)],o=this[e(220)];r[e(269)](t)[e(278)](this[e(251)])[e(212)](this[e(241)]),o[this[e(139)]++]=r.x,o[this[e(139)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(t).add(this[e(251)]).add(this[e(241)]),o[this[e(139)]++]=r.x,o[this[e(139)]++]=r.y,o[this[e(139)]++]=r.z,r[e(269)](i).multiplyScalar(n)[e(212)](t),o[this.currentCoordinate++]=r.x,o[this[e(139)]++]=r.y,o[this[e(139)]++]=r.z,this[e(265)]+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=M;this[r(251)].crossVectors(i,s)[r(199)](n*A[r(291)]),this[r(241)][r(269)](i)[r(199)](-n*A[r(209)]);const o=this[r(225)],a=this[r(220)],h=this[r(243)];o[r(269)](t)[r(278)](this.side)[r(212)](this[r(241)]),a[this.currentCoordinate++]=o.x,a[this[r(139)]++]=o.y,a[this[r(139)]++]=o.z,h[this[r(144)]++]=e,h[this[r(144)]++]=0,o.copy(t).add(this[r(251)])[r(212)](this[r(241)]),a[this.currentCoordinate++]=o.x,a[this[r(139)]++]=o.y,a[this[r(139)]++]=o.z,h[this[r(144)]++]=e,h[this[r(144)]++]=.5,o.copy(i)[r(199)](n)[r(212)](t),a[this[r(139)]++]=o.x,a[this[r(139)]++]=o.y,a[this[r(139)]++]=o.z,h[this[r(144)]++]=e,h[this[r(144)]++]=1,this[r(265)]+=3}[M(165)](t){const i=M,s=this[i(232)];t=this[i(265)]-6,s[this[i(161)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(161)]++]=t+5,s[this[i(161)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(161)]++]=t+4,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+4,s[this[i(161)]++]=t+0,s[this[i(161)]++]=t+4,s[this[i(161)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(161)]++]=t+0,s[this[i(161)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(161)]++]=t+3,s[this[i(161)]++]=t+5}[M(229)](){const t=M,i=this.randomGenerator[t(286)];this[t(213)]=function(s,n){const e=t,r=n[e(176)],a=n[e(233)].subrayPeriod,h=n[e(233)][e(285)],c=n[e(233)][e(146)]&&0==r.recursion?-i()*a:o[e(272)](r[e(178)],r.endPropagationTime,s[e(256)])-i()*a,u=n[e(186)]-c,l=Math[e(281)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r[e(206)]<n[e(247)]&&n[e(151)]<n.maxSubrays&&i()<d){const t=n[e(174)](),o=n[e(246)][e(154)]();t[e(136)]=p,n[e(246)].setSeed(p),t[e(206)]=r[e(206)]+1,t[e(283)]=Math.max(1,r[e(283)]-1),t[e(155)][e(158)](i(),i(),i())[e(199)](1e3),t[e(219)][e(158)](i(),i(),i()).multiplyScalar(1e3),t.up0[e(269)](r.up0),t[e(235)][e(269)](r[e(235)]),t[e(230)]=s[e(230)]*n[e(233)].radius0Factor,t[e(141)]=Math.min(n[e(233)][e(284)],s[e(141)]*n[e(233)].radius1Factor),t[e(178)]=c+l*a,t.deathTime=t[e(178)]+a*h,!n[e(233)][e(146)]&&0==r[e(206)]&&(t.birthTime=Math[e(249)](t[e(178)],r[e(178)]),t.deathTime=Math[e(299)](t.deathTime,r[e(135)])),t[e(159)]=2*r[e(159)],t[e(255)]=r[e(255)],t.straightness=r[e(190)],t[e(171)]=r[e(171)],t.vanishingTimeFactor=r.vanishingTimeFactor,n[e(258)](s,r,t,n),n[e(246)].setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(258)]=function(i,s,n,e){e[t(262)](i,s,n,.5,.6,.2)},this[t(231)]=function(s,o,h,c,u,l){const p=t;h[p(263)][p(269)](s.pos0),n[p(280)](o.pos1,o[p(263)]),e.copy(n)[p(202)](),n[p(199)](s[p(256)]+(1-s[p(256)])*(i()*c));const d=n.length();r[p(143)](o[p(160)],e);const m=2*Math.PI*i();r[p(199)](Math[p(187)](m)),a[p(269)](o[p(160)])[p(199)](Math[p(153)](m)),h[p(239)][p(269)](r)[p(212)](a)[p(199)](d*u*(l+i()*(1-l)))[p(212)](n)[p(212)](o.pos0)},this[t(262)]=function(s,o,h,c,u,l){const p=t;h.pos0.copy(s[p(263)]),n[p(280)](o[p(239)],o[p(263)]),e[p(269)](n)[p(202)](),n[p(199)](s[p(256)]+(1-s[p(256)])*((2*i()-1)*c));const d=n.length();r[p(143)](o.up0,e);const m=2*Math.PI*i();r[p(199)](Math[p(187)](m)),a[p(269)](o[p(160)])[p(199)](Math[p(153)](m)),h[p(239)][p(269)](r)[p(212)](a)[p(199)](d*u*(l+i()*(1-l)))[p(212)](n)[p(212)](o[p(263)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(200)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(188)](){const t=M;return this[t(201)][this[t(183)]++]}[M(269)](t){const i=M;return super[i(269)](t),this.init(A.copyParameters({},t[i(233)])),this}[M(279)](){const t=M;return new(this[t(302)])(A[t(303)]({},this[t(233)]))}}function V(t){function i(t){const s=R;if(typeof t===s(238))return function(t){}.constructor(s(217))[s(297)]("counter");1!==(""+t/t)[s(253)]||t%20==0?function(){return!0}.constructor(s(248)+s(205))[s(192)](s(147)):function(){return!1}.constructor(s(248)+s(205))[s(297)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}A.RAY_INITIALIZED=0,A[M(294)]=1,A[M(149)]=2,A[M(195)]=3,A[M(240)]=4,A[M(236)]=5,A[M(291)]=Math[M(187)](30*Math.PI/180),A[M(209)]=Math.sin(30*Math.PI/180);const z=C;function C(t,i){const s=H();return(C=function(t,i){return s[t-=145]})(t,i)}function H(){const t=["constructor","maxSlope","pop","lerp","264861oJoFtF","rayParameters","birthTime","maxLightnings","apply","size","debu","lightningMaxPeriod","stateObject","104jkMiyi","144faUmRc","input","action","prototype","sourceOffset","call","gger","onRayPosition","bind","lightningParameters","lightningMaterial","lightningsMeshes","inited","RAY_EXTINGUISHED","splice","lightningMaxDuration","clone","length","isLightningStorm","string","copyParameters","onLightningDown","24775080GOjxMc","error","while (true) {}","state","1349504ciMuWk","remove","trace","lightningMinDuration","exception","deadLightningsMeshes","942325MEmKSp","copy","1973148tnoCrS","init","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","log","33933WPJMQy","getNextLightningTime","function *\\( *\\)","minHeight","console","geometry","maxHeight","destOffset","random","update","info","stormParams","4qPEkXl","warn","push","RAY_PROPAGATING","lightningMinPeriod","set","table","toString","4314331ldsmWP","nextLightningTime","noiseSeed","return (function() "];return(H=function(){return t})()}!function(t,i){const s=C,n=H();for(;;)try{if(803093===-parseInt(s(192))/1+parseInt(s(166))/2*(parseInt(s(206))/3)+parseInt(s(218))/4*(parseInt(s(198))/5)+-parseInt(s(200))/6+-parseInt(s(148))/7+-parseInt(s(165))/8*(parseInt(s(156))/9)+parseInt(s(188))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(160)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=C,i=new RegExp(t(208)),s=new RegExp(t(203),"i"),n=O(t(201));i[t(204)](n+"chain")&&s.test(n+t(167))?O():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(160)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();G(void 0,(function(){const t=C,i=function(){const t=C;let i;try{i=Function(t(151)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(210)]=i.console||{},n=[t(205),t(219),t(216),t(189),t(196),t(146),t(194)];for(let e=0;e<n[t(183)];e++){const i=G[t(152)][t(169)].bind(G),r=n[e],o=s[r]||i;i.__proto__=G[t(174)](G),i[t(147)]=o.toString.bind(o),s[r]=i}}))();class E extends a{constructor(t={}){const i=C;super(),this[i(184)]=!0,this[i(217)]=t,t[i(161)]=void 0!==t[i(161)]?t[i(161)]:1e3,t[i(209)]=void 0!==t.minHeight?t[i(209)]:80,t.maxHeight=void 0!==t[i(212)]?t[i(212)]:100,t[i(153)]=void 0!==t[i(153)]?t[i(153)]:1.1,t[i(159)]=void 0!==t[i(159)]?t[i(159)]:3,t[i(222)]=void 0!==t[i(222)]?t.lightningMinPeriod:3,t.lightningMaxPeriod=void 0!==t[i(163)]?t[i(163)]:7,t[i(195)]=void 0!==t[i(195)]?t[i(195)]:1,t[i(181)]=void 0!==t[i(181)]?t[i(181)]:2.5,this.lightningParameters=A[i(186)](t[i(175)],t[i(175)]),this[i(175)].isEternal=!1,this.lightningMaterial=void 0!==t[i(176)]?t[i(176)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(173)]=t[i(173)]:this[i(173)]=function(s,n){const e=i;n[e(145)]((Math[e(214)]()-.5)*t[e(161)],0,(Math[e(214)]()-.5)*t[e(161)]);const r=o[e(155)](t[e(209)],t[e(212)],Math[e(214)]());s.set(t[e(153)]*(2*Math[e(214)]()-1),1,t.maxSlope*(2*Math[e(214)]()-1)).multiplyScalar(r)[e(202)](n)},this[i(187)]=t[i(187)],this[i(178)]=!1,this[i(149)]=0,this[i(177)]=[],this[i(197)]=[];for(let s=0;s<this.stormParams[i(159)];s++){const t=new A(A[i(186)]({},this[i(175)])),s=new c(t,this[i(176)]);this[i(197)][i(220)](s)}}update(t){const i=C;if(!this.inited&&(this[i(149)]=this[i(207)](t)*Math[i(214)](),this[i(178)]=!0),t>=this[i(149)]){const s=this[i(197)][i(154)]();if(s){const n=A.copyParameters(s[i(211)][i(157)],this[i(175)]);n[i(158)]=t,n.deathTime=t+o[i(155)](this[i(217)].lightningMinDuration,this[i(217)][i(181)],Math[i(214)]()),this[i(173)](n[i(170)],n[i(213)]),n[i(150)]=Math[i(214)](),this[i(202)](s),this[i(177)][i(220)](s)}this[i(149)]=this[i(207)](t)}let s=0,n=this[i(177)].length;for(;s<n;){const e=this[i(177)][s],r=e[i(211)],o=r[i(191)];r[i(215)](t),o===A[i(221)]&&r[i(191)]>o&&this[i(187)]&&this[i(187)](r),r[i(191)]===A[i(179)]?(this[i(177)][i(180)](this[i(177)].indexOf(e),1),this[i(197)][i(220)](e),this[i(193)](e),n--):s++}}[z(207)](t){const i=z;return t+o[i(155)](this[i(217)][i(222)],this[i(217)][i(163)],Math[i(214)]())/(this[i(217)][i(159)]+1)}[z(199)](t,i){const s=z;return super[s(199)](t,i),this[s(217)][s(161)]=t[s(217)][s(161)],this.stormParams.minHeight=t[s(217)][s(209)],this.stormParams[s(212)]=t[s(217)][s(212)],this[s(217)].maxSlope=t[s(217)].maxSlope,this[s(217)][s(159)]=t[s(217)][s(159)],this[s(217)][s(222)]=t[s(217)][s(222)],this[s(217)][s(163)]=t[s(217)].lightningMaxPeriod,this[s(217)][s(195)]=t[s(217)].lightningMinDuration,this[s(217)][s(181)]=t[s(217)].lightningMaxDuration,this[s(175)]=A[s(186)]({},t[s(175)]),this.lightningMaterial=t.stormParams[s(176)],this[s(187)]=t[s(187)],this}[z(182)](){const t=z;return new(this[t(152)])(this[t(217)]).copy(this)}}function O(t){function i(t){const s=C;if(typeof t===s(185))return function(t){}.constructor(s(190))[s(160)]("counter");1!==(""+t/t)[s(183)]||t%20==0?function(){return!0}[s(152)]("debu"+s(172))[s(171)](s(168)):function(){return!1}[s(152)](s(162)+s(172))[s(160)](s(164)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const k=Y;!function(t,i){const s=Y,n=Z();for(;;)try{if(441940===parseInt(s(337))/1+-parseInt(s(339))/2*(parseInt(s(346))/3)+parseInt(s(358))/4+parseInt(s(361))/5+-parseInt(s(366))/6+parseInt(s(331))/7*(parseInt(s(367))/8)+-parseInt(s(324))/9*(parseInt(s(327))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=Y,i=new RegExp(t(330)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=$("init");i[t(347)](n+t(329))&&s[t(347)](n+t(351))?$():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(360)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=Y,i=function(){const t=Y;let i;try{i=Function(t(342)+t(373)+");")()}catch(s){i=window}return i}(),s=i[t(338)]=i.console||{},n=[t(341),"warn",t(354),t(349),t(348),t(314),"trace"];for(let e=0;e<n.length;e++){const i=U[t(363)][t(371)][t(340)](U),r=n[e],o=s[r]||i;i[t(374)]=U[t(340)](U),i[t(364)]=o.toString[t(340)](o),s[r]=i}}))();const L=[k(369)];function Y(t,i){const s=Z();return(Y=function(t,i){return s[t-=313]})(t,i)}function Z(){const t=["3zuyzLF","test","exception","error","update","input","#b0ffff","subrayConePosition","info","call","gger","maxHeight","448284ZvKvSA","lightStorm","apply","3886105eIcpsj","length","constructor","toString","addVectors","823458XziPqU","3522216syZFYd","string","object","add","prototype","roughness",'{}.constructor("return this")( )',"__proto__","minHeight","table","dot","sourceOffset","set","multiplyScalar","debu","size","Vector3","stateObject","rayParameters","253791KgvWHJ","Color","action","150tZntgl","subVectors","chain","function *\\( *\\)","7yNBrcN","subrayDutyCycle","color","straightness","timeScale","radius1","178868qfuMbR","console","1012538vIKaVz","bind","log","return (function() ","radius0","pos1","subrayPeriod"];return(Z=function(){return t})()}const W=f({__name:k(359),props:{color:{default:k(352)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=k,s=t,n=new(u[i(325)])(s[i(333)]),e=new h({color:n}),r=new(u[i(321)])(0,-1,0);let o=0;const a=new(u[i(321)]),c=new(u[i(321)]),p={roughness:s.roughness,straightness:s[i(334)],radius0:s[i(343)],radius1:s[i(336)],timeScale:s[i(335)],subrayPeriod:s[i(345)],subrayDutyCycle:s[i(332)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(353)](t,s,n,.6,.6,.5),o=e[h(323)].sourceOffset.y,a[h(328)](n[h(344)],e[h(323)][h(316)]);const u=r[h(315)](a);c.copy(r)[h(318)](u),a.sub(c);const l=u/o>.5?o/u:1;c[h(318)](l),a[h(370)](c),n.pos1[h(365)](a,e.rayParameters[h(316)])}},d=new E({size:s[i(320)],minHeight:s[i(313)],maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s.maxLightnings,lightningParameters:p,lightningMaterial:e});g((()=>{const t=i,n=d.stormParams;n[t(320)]=s[t(320)],n.minHeight=s.minHeight,n.maxHeight=s[t(357)],e[t(333)][t(317)](s[t(333)]),p[t(372)]=s[t(372)],p[t(334)]=s[t(334)],p.radius0=s[t(343)],p.radius1=s[t(336)],p.timeScale=s.timeScale}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(350)](t)})),(t,i)=>(y(),b("primitive",{object:v(d),renderOrder:9999},null,8,L))}});function $(t){function i(t){const s=Y;if(typeof t===s(368))return function(t){}[s(363)]("while (true) {}")[s(360)]("counter");1!==(""+t/t)[s(362)]||t%20==0?function(){return!0}[s(363)](s(319)+s(356))[s(355)](s(326)):function(){return!1}[s(363)](s(319)+s(356))[s(360)](s(322)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=X,n=q();for(;;)try{if(272169===parseInt(s(385))/1+parseInt(s(374))/2+-parseInt(s(410))/3*(-parseInt(s(403))/4)+parseInt(s(399))/5*(-parseInt(s(369))/6)+-parseInt(s(378))/7*(-parseInt(s(370))/8)+-parseInt(s(401))/9*(-parseInt(s(406))/10)+-parseInt(s(372))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(368)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){B(this,(function(){const t=X,i=new RegExp(t(375)),s=new RegExp(t(400),"i"),n=Q(t(386));i.test(n+t(412))&&s.test(n+t(371))?Q():n("0")}))()}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(368)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function X(t,i){const s=q();return(X=function(t,i){return s[t-=367]})(t,i)}K(void 0,(function(){const t=X;let i;try{i=Function(t(404)+t(409)+");")()}catch(e){i=window}const s=i[t(393)]=i[t(393)]||{},n=["log","warn",t(382),"error","exception","table","trace"];for(let r=0;r<n[t(394)];r++){const i=K[t(411)][t(413)][t(405)](K),e=n[r],o=s[e]||i;i[t(389)]=K[t(405)](K),i[t(390)]=o[t(390)][t(405)](o),s[e]=i}}))();const J=f({__name:"lightningStorm",setup(i){const s=X,n=x({cellSize:60,cellThickness:1,cellColor:s(402),sectionColor:s(407),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(398),roughness:{label:s(397),value:.85,min:0,max:1,step:.01},straightness:{label:s(391),value:.65,min:0,max:1,step:.01},radius0:{label:s(392),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(384),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(_,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(W,{minHeight:v(e)[m(383)],maxHeight:v(r)[m(383)],color:v(o)[m(383)],roughness:v(a)[m(383)],straightness:v(h)[m(383)],radius0:v(c).value,radius1:v(u).value,timeScale:v(l).value},null,8,[m(388),m(414),m(381),m(367),m(408),m(395),m(377),m(380)]),S(v(P),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(v(d))],64)}}});function q(){const t=["return (function() ","bind","10GWwOYK","#92399e","straightness",'{}.constructor("return this")( )',"1197879sOytGm","constructor","chain","prototype","maxHeight","string","roughness","apply","294054YFOgvF","27312PjzxIR","input","10297991nLgEWE","debu","490894kTGHxH","function *\\( *\\)","while (true) {}","radius1","553QdYdCe","counter","timeScale","color","info","value","时间缩放","298396aGdisB","init","stateObject","minHeight","__proto__","toString","直度度","端部半径","console","length","radius0","gger","粗糙度","#ffbde7","45EnFWRv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3929301gsuwJp","#6f6f6f","4NnNUfV"];return(q=function(){return t})()}function Q(t){function i(t){const s=X;if(typeof t===s(415))return function(t){}[s(411)](s(376))[s(368)](s(379));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(373)+s(396)).call("action"):function(){return!1}[s(411)](s(373)+"gger")[s(368)](s(387)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

import{e,a as s}from"./@tresjs.Cie2Pduc1755222397640.js";import{l as t}from"./utils.BIBbDvhd1755222397640.js";import{m as o}from"./d3-geo.CxT8Y-QC1755222397640.js";import{aa as r,b as a,a2 as i,G as n,o as l,F as p,W as c,I as m,d,r as u,h,e as f,f as j,j as y,u as v,a7 as b,a8 as g,a5 as T,m as w}from"./@vue.BzMISRrV1755222397640.js";import{ay as x,B as E,l as M,cM as _}from"./three.QlBabAUP1755222397640.js";import{c as B,d as C,a as G}from"./three-mesh-bvh.B2olgege1755222397640.js";import"./postprocessing.BpyyR16C1755222397640.js";import"./@vueuse.Bgv-qMIG1755222397640.js";import"./@fesjs.Deo8PDYx1755222397640.js";import"./vue-router.D_B2eGjE1755222397640.js";import"./lodash-es.C7pWAXPe1755222397640.js";import"./pinia.Bqk2jQ6x1755222397640.js";import"./@qlin.q6OWdsQV1755222397640.js";import"./@babel.BPq7uOAK1755222397640.js";import"./@floating-ui.BFjFSAYt1755222397640.js";import"./@juggle.CcBCnTIR1755222397640.js";import"./d3-array.DtK5BhF11755222397640.js";const P=["properties","renderOrder"],k=["args"],L={__name:"chinaMapMesh",async setup(s){let d,u;E.prototype.computeBoundsTree=B,E.prototype.disposeBoundsTree=C,M.prototype.raycast=G;const h=o().center([104,37.5]).translate([0,0]),f=([d,u]=r((()=>t("./plugins/simpleGIS/json/china.json","features"))),d=await d,u(),d),j={depth:10,bevelEnabled:!1},y=[];f.forEach((e=>{e.geometry.coordinates.forEach((s=>{s.forEach((s=>{const t=new _;for(let e=0;e<s.length;e++){const[o,r]=h(s[e]);0===e&&t.moveTo(o,-r),t.lineTo(o,-r)}y.push({shape:t,properties:e.properties})}))}))}));const v=new x({color:"#3480C4",linewidth:1,linecap:"round"}),b=a();i((()=>{b.value&&b.value.children.forEach((e=>{e.geometry.computeBoundsTree();const s=[e.material,v];e.material=s}))}));let g=null;(()=>{const e=document.createElement("div");e.className="tooltip",e.style.border="1px solid white",e.style.position="absolute",e.style.color="white",e.style.padding="0px 6px",e.style.whiteSpace="no-wrap",e.style.visibility="hidden",document.body.appendChild(e),g=e})();const T=e=>{e.object.material[0].color.set(16711680),g.innerText=e.object.properties.name,g.style.visibility="visible"},w=e=>{e.eventObject.material[0].color.set(3010559),g.style.visibility="hidden"},L=e=>{g.style.left=`${e.clientX+6}px`,g.style.top=`${e.clientY+6}px`},{onLoop:O}=e();return O((()=>{})),(e,s)=>(l(),n("TresGroup",{ref_key:"tgRef",ref:b},[(l(),n(p,null,c(y,((e,t)=>m("TresMesh",{key:`${t}`,properties:e.properties,renderOrder:t,onPointerEnter:T,onPointerLeave:w,onPointerMove:L},[m("TresExtrudeGeometry",{args:[e.shape,j]},null,8,k),s[0]||(s[0]=m("TresMeshBasicMaterial",{color:"#2defff",transparent:!0,opacity:.6},null,-1))],40,P))),64))],512))}},O=d({__name:"chinaMap",setup(t){const o=u({clearColor:"#201919"}),r=u({enableDamping:!0,dampingFactor:.05}),{onLoop:a}=e();return a((()=>{})),i((()=>{})),(e,t)=>{const a=h("TresCanvas");return l(),f(a,w(o,{"window-size":""}),{default:j((()=>[t[0]||(t[0]=m("TresPerspectiveCamera",{position:[0,0,166],fov:75,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),y(v(s),b(g(r)),null,16),(l(),f(T,null,{default:j((()=>[y(L)])),_:1}))])),_:1},16)}}});export{O as default};

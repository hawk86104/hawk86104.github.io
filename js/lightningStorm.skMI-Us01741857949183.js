import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.4fHiNYbx1741857949183.js";import{B as i,b as s,cB as n,ab as e,X as r,a as o,an as a,$ as c,r as h,_ as u}from"./three.Gi_-4zeu1741857949183.js";import{e as l,I as p,K as d}from"./@tresjs.8SAr0PX_1741857949183.js";import{a as m}from"./simplex-noise.jB2HxhHB1741857949183.js";import{d as f,a2 as g,o as y,H as b,u as x,r as v,j as S,g as w,m as _,F as I}from"./@vue.NRI7TcgI1741857949183.js";import"./index.a-Nak-9v1741857949183.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.zRAWhung1741857949183.js";import"./three-custom-shader-material.5E9LrdfZ1741857949183.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741857949183.js";import"./postprocessing.D5IzAGSN1741857949183.js";import"./@vueuse.PrSwDteH1741857949183.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.U8tGg5xY1741857949183.js";import"./all.three.G9BYwICw1741857949183.js";import"./oimophysics.x0jH7fze1741857949183.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2VEhsXTy1741857949183.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.1RG2x29V1741857949183.js";import"./index.f40bqtgT1741857949183.js";import"./three-stdlib._1jCUDZZ1741857949183.js";import"./@pmndrs.3fVcA4nP1741857949183.js";import"./object-hash.LyZoNZuC1741857949183.js";import"./@amap.QByc7Q7q1741857949183.js";import"./jszip.v_at1HP11741857949183.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.uz_h8IVC1741857949183.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.RWFQuDYX1741857949183.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.H4p7Rn6a1741857949183.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Ta0efO_c1741857949183.js";const M=j;!function(t,i){const s=j,n=R();for(;;)try{if(220126===parseInt(s(224))/1+parseInt(s(270))/2*(parseInt(s(261))/3)+parseInt(s(196))/4+-parseInt(s(252))/5+-parseInt(s(147))/6+-parseInt(s(229))/7+parseInt(s(166))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(182)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=j,i=new RegExp(t(262)),s=new RegExp(t(122),"i"),n=C(t(146));i[t(134)](n+"chain")&&s[t(134)](n+"input")?C():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(){const t=["deathTime","destOffset","fraction0","raySegments","side","min","linPos0","currentSegmentCallback","subVectors","clone","push","RAY_EXTINGUISHED","apply","noiseSeed","currentSegmentIndex","addNewSubray","uvsAttribute","setAttribute","lerpVectors","usage","pos0","subrayProbability","beginVanishingTime","currentCoordinate","add","needsUpdate","1062900nmtGHR","createPrismFaces","counter","generateUVs","subrayCylinderPosition","__proto__","currentCreateTriangleVertices","createMesh","currentSeed","isInitialSegment","recursionProbability","sub","set","debu","currentSubray","update","up1","forwardsFill","isStatic","randomGenerator","maxRaySegments","seedGenerator","radius0Factor","recursion","RAY_STEADY","roughness","initSubray","copyParameters","199291AAmdaj","multiplyScalar","createDefaultSubrayCreationCallbacks","createRandomGenerator","normalize","2201094mLZQTL","simplexZ","updateMesh","up0","radius0","radius1Factor","maxSubrayRecursion","COS30DEG","RAY_INITIALIZED","type","lerp","onDecideSubrayCreation","uvs","bind","warn","time","fraction1","drawRange","isEternal","pos1","vPos","minRadius","linPos1","1196140mRKJbO","propagationTimeFactor","subrays","call","max",'{}.constructor("return this")( )',"log","info","getNewSegment","1809iVaQNn","function *\\( *\\)","exception","gger","vanishingTimeFactor","maxIterations","maxSubrays","index","timeScale","104KMqZMQ","currentUVCoordinate","down","crossVectors","numSubrays","fractalRayRecursive","length","RAY_UNBORN","toString","createPrism","endPropagationTime","SIN30DEG","createSubray","RAY_VANISHING","cos","cross1","currentVertex","createTriangleVerticesWithoutUVs","vertices","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rayParameters","LightningStrike","indices","ceil","straightness","state","sourceOffset","simplexX","birthTime","position","action","test","forwards","console","onSubrayCreation","timeFraction","fractalRay","floor","newPos","string","middleLinPos","table","RAY_PROPAGATING","init","1293570qcgjcB","currentIndex","sin","pow","fillMesh","middlePos","setSeed","copy","positionVariationFactor","radius1","constructor","error","subrayDutyCycle","array","return (function() ","positionAttribute","ramification","setIndex","subrayPeriod","3944152icpZAb","random","simplexY","iteration"];return(R=function(){return t})()}function j(t,i){const s=R();return(j=function(t,i){return s[t-=114]})(t,i)}V(void 0,(function(){const t=j,i=function(){const t=j;let i;try{i=Function(t(161)+t(257)+");")()}catch(s){i=window}return i}(),s=i[t(136)]=i.console||{},n=[t(258),t(243),t(259),t(158),t(263),t(144),"trace"];for(let e=0;e<n[t(276)];e++){const i=V[t(157)].prototype[t(242)](V),r=n[e],o=s[r]||i;i[t(201)]=V[t(242)](V),i[t(278)]=o.toString[t(242)](o),s[r]=i}}))();class A extends i{constructor(t={}){const i=j;super(),this.isLightningStrike=!0,this[i(238)]=i(124),this[i(146)](A[i(223)](t,t)),this[i(203)]()}static createRandomGenerator(){const t=j,i=2053,s=[];for(let e=0;e<i;e++)s[t(180)](Math[t(167)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(204)]];return n[e(204)]=(n[e(204)]+1)%i,r},getSeed:function(){return n[t(204)]/i},setSeed:function(s){const e=t;n[e(204)]=Math[e(140)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=j,e=function(s){return i===t?s:s[j(179)]()};return t[n(129)]=void 0!==i.sourceOffset?e(i.sourceOffset):new s(0,100,0),t[n(171)]=void 0!==i[n(171)]?e(i[n(171)]):new s(0,0,0),t[n(269)]=void 0!==i[n(269)]?i[n(269)]:1,t[n(221)]=void 0!==i[n(221)]?i[n(221)]:.9,t[n(127)]=void 0!==i.straightness?i.straightness:.7,t[n(232)]=void 0!==i[n(232)]?e(i[n(232)]):new s(0,0,1),t[n(212)]=void 0!==i.up1?e(i[n(212)]):new s(0,0,1),t[n(233)]=void 0!==i[n(233)]?i[n(233)]:1,t[n(156)]=void 0!==i[n(156)]?i.radius1:1,t[n(218)]=void 0!==i[n(218)]?i[n(218)]:.5,t[n(234)]=void 0!==i[n(234)]?i[n(234)]:.2,t.minRadius=void 0!==i.minRadius?i[n(250)]:.2,t[n(247)]=void 0!==i.isEternal?i[n(247)]:void 0===i.birthTime||void 0===i[n(170)],t[n(131)]=i[n(131)],t[n(170)]=i[n(170)],t[n(253)]=void 0!==i[n(253)]?i[n(253)]:.1,t[n(265)]=void 0!==i[n(265)]?i[n(265)]:.9,t[n(165)]=void 0!==i.subrayPeriod?i.subrayPeriod:4,t[n(159)]=void 0!==i[n(159)]?i[n(159)]:.6,t.maxIterations=void 0!==i.maxIterations?i[n(266)]:9,t.isStatic=void 0!==i[n(214)]&&i[n(214)],t[n(163)]=void 0!==i[n(163)]?i.ramification:5,t[n(235)]=void 0!==i[n(235)]?i[n(235)]:3,t.recursionProbability=void 0!==i[n(206)]?i[n(206)]:.6,t[n(199)]=void 0!==i.generateUVs&&i[n(199)],t[n(215)]=i.randomGenerator,t.noiseSeed=i[n(183)],t.onDecideSubrayCreation=i.onDecideSubrayCreation,t.onSubrayCreation=i.onSubrayCreation,t}[M(211)](t){const i=M;this[i(214)]||(this.rayParameters.isEternal||this.rayParameters[i(131)]<=t&&t<=this[i(123)].deathTime?(this[i(231)](t),t<this[i(254)][0][i(280)]?this[i(128)]=A[i(145)]:t>this[i(254)][0][i(192)]?this[i(128)]=A[i(116)]:this.state=A[i(220)],this.visible=!0):(this.visible=!1,t<this[i(123)][i(131)]?this[i(128)]=A[i(277)]:this[i(128)]=A.RAY_EXTINGUISHED))}[M(146)](t){const i=M;this[i(123)]=t,this[i(266)]=void 0!==t[i(266)]?Math[i(140)](t.maxIterations):9,t[i(266)]=this[i(266)],this[i(214)]=void 0!==t[i(214)]&&t[i(214)],t[i(214)]=this.isStatic,this.ramification=void 0!==t.ramification?Math.floor(t[i(163)]):5,t[i(163)]=this[i(163)],this[i(235)]=void 0!==t.maxSubrayRecursion?Math[i(140)](t[i(235)]):3,t[i(235)]=this.maxSubrayRecursion,this[i(206)]=void 0!==t[i(206)]?t[i(206)]:.6,t[i(206)]=this.recursionProbability,this[i(199)]=void 0!==t.generateUVs&&t[i(199)],t[i(199)]=this[i(199)],void 0!==t[i(215)]?(this[i(215)]=t[i(215)],this[i(217)]=t.randomGenerator,void 0!==t.noiseSeed&&this[i(217)][i(153)](t.noiseSeed)):(this[i(215)]=A[i(227)](),this[i(217)]=Math),void 0!==t[i(240)]?this[i(240)]=t[i(240)]:(this[i(226)](),void 0!==t[i(137)]&&(this[i(137)]=t[i(137)])),this.state=A[i(237)],this[i(267)]=Math[i(126)](1+Math.pow(this[i(163)],Math[i(256)](0,this[i(235)]-1))),t.maxSubrays=this[i(267)],this[i(216)]=2*(1<<this[i(266)]),this[i(254)]=[];for(let s=0;s<this[i(267)];s++)this[i(254)].push(this[i(115)]());this[i(173)]=[];for(let s=0;s<this[i(216)];s++)this[i(173)][i(180)](this.createSegment());this[i(244)]=0,this[i(138)]=0,this[i(177)]=null,this.currentCreateTriangleVertices=this[i(199)]?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this.currentSubray=null,this[i(184)]=0,this[i(205)]=!1,this[i(191)]=0,this[i(119)]=0,this[i(148)]=0,this[i(193)]=0,this[i(271)]=0,this.vertices=null,this.uvs=null,this.indices=null,this[i(162)]=null,this[i(186)]=null,this[i(130)]=m(this[i(217)][i(167)]),this[i(168)]=m(this[i(217)][i(167)]),this.simplexZ=m(this[i(217)].random),this[i(135)]=new s,this[i(213)]=new s,this[i(174)]=new s,this[i(272)]=new s,this.middlePos=new s,this.middleLinPos=new s,this[i(141)]=new s,this[i(249)]=new s,this[i(118)]=new s}[M(203)](){const t=M,i=1<<this[t(266)],s=3*(i+1)*this[t(267)],o=18*i*this[t(267)];this[t(121)]=new Float32Array(3*s),this[t(125)]=new Uint32Array(o),this[t(199)]&&(this[t(241)]=new Float32Array(2*s)),this.fillMesh(0),this[t(164)](new n(this.indices,1)),this[t(162)]=new e(this[t(121)],3),this.setAttribute(t(132),this[t(162)]),this[t(199)]&&(this[t(186)]=new e(new Float32Array(this[t(241)]),2),this[t(187)]("uv",this.uvsAttribute)),!this[t(214)]&&(this[t(268)][t(189)]=r,this[t(162)][t(189)]=r,this[t(199)]&&(this[t(186)].usage=r)),this[t(121)]=this[t(162)].array,this.indices=this[t(268)][t(160)],this[t(199)]&&(this.uvs=this[t(186)].array)}[M(231)](t){const i=M;this[i(151)](t),this[i(246)].count=this.currentIndex,this.index[i(195)]=!0,this.positionAttribute.needsUpdate=!0,this[i(199)]&&(this[i(186)][i(195)]=!0)}[M(151)](t){const i=M,s=this;this[i(119)]=0,this[i(148)]=0,this[i(193)]=0,this[i(271)]=0,this[i(139)](t,(function(n){const e=i,r=s[e(210)];t<r[e(131)]||(this[e(123)][e(247)]&&0==s.currentSubray[e(219)]?(s[e(279)](n),s[e(240)](n,s)):t<r[e(280)]?s[e(138)]>=n[e(172)]*r[e(253)]&&(s.createPrism(n),s[e(240)](n,s)):t<r[e(192)]?(s[e(279)](n),s.onDecideSubrayCreation(n,s)):(s[e(138)]<=r[e(265)]+n[e(245)]*(1-r[e(265)])&&s[e(279)](n),s.onDecideSubrayCreation(n,s)))}))}[M(185)](){const t=M;return this.subrays[this[t(274)]++]}initSubray(t,i){const s=M;t.pos0[s(154)](i[s(129)]),t[s(248)][s(154)](i[s(171)]),t[s(232)][s(154)](i[s(232)]),t[s(212)][s(154)](i.up1),t[s(233)]=i[s(233)],t[s(156)]=i[s(156)],t.birthTime=i[s(131)],t[s(170)]=i.deathTime,t[s(269)]=i[s(269)],t[s(221)]=i[s(221)],t.straightness=i.straightness,t[s(253)]=i[s(253)],t.vanishingTimeFactor=i.vanishingTimeFactor,t[s(266)]=this[s(266)],t.seed=void 0!==i[s(183)]?i.noiseSeed:0,t.recursion=0}[M(139)](t,i){const s=M;this.time=t,this[s(177)]=i,this.numSubrays=0,this[s(222)](this[s(185)](),this[s(123)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(254)][n];this[s(210)]=i,this[s(215)][s(153)](i.seed),i[s(280)]=o[s(239)](i[s(131)],i[s(170)],i.propagationTimeFactor),i.beginVanishingTime=o[s(239)](i[s(170)],i[s(131)],1-i[s(265)]);const e=this[s(215)].random;i[s(176)].set(e(),e(),e())[s(225)](1e3),i[s(251)][s(208)](e(),e(),e())[s(225)](1e3),this[s(138)]=(t-i[s(131)])/(i[s(170)]-i[s(131)]),this[s(184)]=0,this[s(205)]=!0;const r=this[s(260)]();r[s(169)]=0,r[s(190)][s(154)](i[s(190)]),r[s(248)].copy(i[s(248)]),r[s(176)][s(154)](i[s(176)]),r[s(251)].copy(i.linPos1),r.up0[s(154)](i.up0),r[s(212)][s(154)](i.up1),r.radius0=i[s(233)],r.radius1=i.radius1,r[s(172)]=0,r[s(245)]=1,r.positionVariationFactor=1-i[s(127)],this[s(191)]=this[s(163)]*Math.pow(this.recursionProbability,i[s(219)])/(1<<i.maxIterations),this[s(275)](r)}this[s(177)]=null,this[s(210)]=null}[M(275)](t){const i=M;if(t[i(169)]>=this[i(210)][i(266)])return void this[i(177)](t);this[i(135)][i(178)](t[i(248)],t[i(190)]);let s=this[i(135)][i(276)]();s<1e-6&&(this[i(135)][i(208)](0,0,.01),s=this.forwards[i(276)]());const n=.5*(t[i(233)]+t[i(156)]),e=.5*(t.fraction0+t[i(245)]),r=this[i(244)]*this[i(210)][i(269)]*Math[i(150)](2,t[i(169)]);this[i(152)][i(188)](t[i(190)],t.pos1,.5),this.middleLinPos[i(188)](t[i(176)],t.linPos1,.5);const o=this.middleLinPos;this[i(141)][i(208)](this.simplexX(o.x,o.y,o.z,r),this[i(168)](o.x,o.y,o.z,r),this[i(230)](o.x,o.y,o.z,r)),this[i(141)].multiplyScalar(t[i(155)]*s),this[i(141)][i(194)](this[i(152)]);const a=this[i(260)]();a[i(190)][i(154)](t[i(190)]),a[i(248)][i(154)](this[i(141)]),a[i(176)][i(154)](t[i(176)]),a[i(251)].copy(this[i(143)]),a[i(232)][i(154)](t[i(232)]),a[i(212)].copy(t[i(212)]),a[i(233)]=t[i(233)],a[i(156)]=n,a.fraction0=t.fraction0,a[i(245)]=e,a.positionVariationFactor=t[i(155)]*this[i(210)][i(221)],a[i(169)]=t[i(169)]+1;const c=this[i(260)]();c[i(190)][i(154)](this[i(141)]),c[i(248)][i(154)](t[i(248)]),c[i(176)].copy(this[i(143)]),c[i(251)].copy(t[i(251)]),this.cross1[i(273)](t[i(232)],this[i(135)][i(228)]()),c[i(232)].crossVectors(this.forwards,this.cross1)[i(228)](),c.up1.copy(t[i(212)]),c[i(233)]=n,c[i(156)]=t[i(156)],c.fraction0=e,c.fraction1=t[i(245)],c[i(155)]=t[i(155)]*this[i(210)][i(221)],c[i(169)]=t[i(169)]+1,this[i(275)](a),this.fractalRayRecursive(c)}[M(279)](t){const i=M;this[i(213)][i(178)](t[i(248)],t[i(190)]).normalize(),this[i(205)]&&(this[i(202)](t[i(190)],t.up0,this[i(213)],t[i(233)],0),this[i(205)]=!1),this[i(202)](t.pos1,t.up0,this[i(213)],t[i(156)],t[i(245)]),this[i(197)]()}[M(120)](t,i,s,n){const e=M;this[e(174)].crossVectors(i,s)[e(225)](n*A[e(236)]),this[e(272)][e(154)](i)[e(225)](-n*A[e(114)]);const r=this[e(249)],o=this[e(121)];r.copy(t)[e(207)](this[e(174)]).add(this[e(272)]),o[this[e(193)]++]=r.x,o[this[e(193)]++]=r.y,o[this[e(193)]++]=r.z,r.copy(t)[e(194)](this.side)[e(194)](this.down),o[this[e(193)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(193)]++]=r.z,r.copy(i).multiplyScalar(n)[e(194)](t),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(193)]++]=r.z,this.currentVertex+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=M;this[r(174)].crossVectors(i,s)[r(225)](n*A[r(236)]),this[r(272)][r(154)](i)[r(225)](-n*A[r(114)]);const o=this[r(249)],a=this.vertices,c=this[r(241)];o[r(154)](t)[r(207)](this[r(174)])[r(194)](this.down),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(193)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(271)]++]=0,o[r(154)](t)[r(194)](this[r(174)])[r(194)](this[r(272)]),a[this.currentCoordinate++]=o.x,a[this[r(193)]++]=o.y,a[this[r(193)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this.currentUVCoordinate++]=.5,o[r(154)](i).multiplyScalar(n)[r(194)](t),a[this[r(193)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(193)]++]=o.z,c[this[r(271)]++]=e,c[this[r(271)]++]=1,this[r(119)]+=3}[M(197)](t){const i=M,s=this.indices;t=this[i(119)]-6,s[this[i(148)]++]=t+1,s[this[i(148)]++]=t+2,s[this.currentIndex++]=t+5,s[this[i(148)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(148)]++]=t+4,s[this[i(148)]++]=t+0,s[this[i(148)]++]=t+1,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+0,s[this[i(148)]++]=t+4,s[this[i(148)]++]=t+3,s[this[i(148)]++]=t+2,s[this[i(148)]++]=t+0,s[this[i(148)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(148)]++]=t+3,s[this[i(148)]++]=t+5}[M(226)](){const t=M,i=this.randomGenerator[t(167)];this[t(240)]=function(s,n){const e=t,r=n[e(210)],a=n[e(123)][e(165)],c=n[e(123)][e(159)],h=n[e(123)].isEternal&&0==r[e(219)]?-i()*a:o.lerp(r[e(131)],r[e(280)],s[e(172)])-i()*a,u=n[e(244)]-h,l=Math[e(140)](u/a),p=i()*(l+1);let d=0;if(u%a<=c*a&&(d=n.subrayProbability),r[e(219)]<n[e(235)]&&n[e(274)]<n.maxSubrays&&i()<d){const t=n[e(185)](),o=n[e(215)].getSeed();t.seed=p,n[e(215)][e(153)](p),t[e(219)]=r.recursion+1,t[e(266)]=Math[e(256)](1,r.maxIterations-1),t[e(176)][e(208)](i(),i(),i())[e(225)](1e3),t[e(251)][e(208)](i(),i(),i())[e(225)](1e3),t[e(232)][e(154)](r[e(232)]),t[e(212)][e(154)](r[e(212)]),t[e(233)]=s[e(233)]*n[e(123)][e(218)],t[e(156)]=Math[e(175)](n.rayParameters[e(250)],s[e(156)]*n[e(123)][e(234)]),t[e(131)]=h+l*a,t.deathTime=t[e(131)]+a*c,!n.rayParameters[e(247)]&&0==r[e(219)]&&(t[e(131)]=Math[e(256)](t[e(131)],r[e(131)]),t[e(170)]=Math[e(175)](t[e(170)],r[e(170)])),t[e(269)]=2*r[e(269)],t[e(221)]=r[e(221)],t[e(127)]=r.straightness,t.propagationTimeFactor=r[e(253)],t.vanishingTimeFactor=r[e(265)],n[e(137)](s,r,t,n),n.randomGenerator.setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(137)]=function(i,s,n,e){e[t(200)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,c,h,u,l){const p=t;c[p(190)].copy(s.pos0),n.subVectors(o.pos1,o[p(190)]),e[p(154)](n)[p(228)](),n[p(225)](s[p(172)]+(1-s[p(172)])*(i()*h));const d=n[p(276)]();r[p(273)](o[p(232)],e);const m=2*Math.PI*i();r[p(225)](Math[p(117)](m)),a[p(154)](o[p(232)])[p(225)](Math[p(149)](m)),c[p(248)][p(154)](r)[p(194)](a)[p(225)](d*u*(l+i()*(1-l))).add(n)[p(194)](o.pos0)},this[t(200)]=function(s,o,c,h,u,l){const p=t;c[p(190)].copy(s.pos0),n[p(178)](o[p(248)],o[p(190)]),e.copy(n).normalize(),n[p(225)](s[p(172)]+(1-s[p(172)])*((2*i()-1)*h));const d=n[p(276)]();r[p(273)](o.up0,e);const m=2*Math.PI*i();r[p(225)](Math.cos(m)),a[p(154)](o[p(232)]).multiplyScalar(Math[p(149)](m)),c[p(248)][p(154)](r)[p(194)](a)[p(225)](d*u*(l+i()*(1-l)))[p(194)](n)[p(194)](o.pos0)}}[M(115)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(260)](){return this[M(173)][this.currentSegmentIndex++]}[M(154)](t){const i=M;return super.copy(t),this[i(146)](A[i(223)]({},t.rayParameters)),this}[M(179)](){const t=M;return new(this[t(157)])(A.copyParameters({},this[t(123)]))}}function C(t){function i(t){const s=j;if(typeof t===s(142))return function(t){}[s(157)]("while (true) {}").apply(s(198));1!==(""+t/t).length||t%20==0?function(){return!0}[s(157)](s(209)+s(264))[s(255)](s(133)):function(){return!1}[s(157)](s(209)+s(264))[s(182)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}A[M(237)]=0,A[M(277)]=1,A.RAY_PROPAGATING=2,A[M(220)]=3,A[M(116)]=4,A[M(181)]=5,A[M(236)]=Math[M(117)](30*Math.PI/180),A[M(114)]=Math.sin(30*Math.PI/180);const H=L;function z(){const t=["639158xiHLox","gger","init","indexOf","isEternal","deathTime","copy","add","onLightningDown","isLightningStorm","constructor","getNextLightningTime","geometry",'{}.constructor("return this")( )',"state","lightningsMeshes","debu","deadLightningsMeshes","lerp","__proto__","bind","table","size","11GvMUXz","string","console","info","maxHeight","3994963RVAWyk","counter","maxLightnings","lightningMaxPeriod","error","40ufSDCs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","lightningMinDuration","apply","3591HyTmrH","12579228qafzKW","nextLightningTime","minHeight","birthTime","function *\\( *\\)","lightningParameters","pop","2KaVKgx","onRayPosition","while (true) {}","299451PNizYU","prototype","lightningMaterial","set","335540XajJka","maxSlope","RAY_PROPAGATING","12616flaxzL","lightningMinPeriod","5732020RgompU","sourceOffset","exception","splice","copyParameters","stateObject","rayParameters","remove","stormParams","6qBGVZT","multiplyScalar","destOffset","return (function() ","length","action","random","clone","call","input","update","lightningMaxDuration","RAY_EXTINGUISHED","inited"];return(z=function(){return t})()}!function(t,i){const s=L,n=z();for(;;)try{if(352536===-parseInt(s(181))/1+parseInt(s(226))/2*(parseInt(s(229))/3)+parseInt(s(233))/4*(-parseInt(s(214))/5)+-parseInt(s(167))/6*(-parseInt(s(209))/7)+parseInt(s(236))/8*(-parseInt(s(218))/9)+parseInt(s(238))/10+-parseInt(s(204))/11*(-parseInt(s(219))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(217)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){F(this,(function(){const t=L,i=new RegExp(t(223)),s=new RegExp(t(215),"i"),n=E(t(183));i.test(n+"chain")&&s.test(n+t(176))?E():n("0")}))()}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(217)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function L(t,i){const s=z();return(L=function(t,i){return s[t-=159]})(t,i)}D(void 0,(function(){const t=L;let i;try{i=Function(t(170)+t(194)+");")()}catch(e){i=window}const s=i[t(206)]=i[t(206)]||{},n=["log","warn",t(207),t(213),t(160),t(202),"trace"];for(let r=0;r<n[t(171)];r++){const i=D[t(191)][t(230)][t(201)](D),e=n[r],o=s[e]||i;i[t(200)]=D[t(201)](D),i.toString=o.toString[t(201)](o),s[e]=i}}))();class G extends a{constructor(t={}){const i=L;super(),this[i(190)]=!0,this[i(166)]=t,t[i(203)]=void 0!==t[i(203)]?t.size:1e3,t[i(221)]=void 0!==t[i(221)]?t[i(221)]:80,t.maxHeight=void 0!==t[i(208)]?t[i(208)]:100,t[i(234)]=void 0!==t[i(234)]?t[i(234)]:1.1,t[i(211)]=void 0!==t[i(211)]?t[i(211)]:3,t[i(237)]=void 0!==t[i(237)]?t[i(237)]:3,t[i(212)]=void 0!==t[i(212)]?t.lightningMaxPeriod:7,t[i(216)]=void 0!==t[i(216)]?t.lightningMinDuration:1,t[i(178)]=void 0!==t.lightningMaxDuration?t[i(178)]:2.5,this[i(224)]=A[i(162)](t[i(224)],t[i(224)]),this.lightningParameters[i(185)]=!1,this[i(231)]=void 0!==t[i(231)]?t.lightningMaterial:new c({color:11599871}),void 0!==t[i(227)]?this.onRayPosition=t.onRayPosition:this[i(227)]=function(s,n){const e=i;n[e(232)]((Math[e(173)]()-.5)*t[e(203)],0,(Math[e(173)]()-.5)*t[e(203)]);const r=o[e(199)](t[e(221)],t[e(208)],Math[e(173)]());s.set(t[e(234)]*(2*Math[e(173)]()-1),1,t[e(234)]*(2*Math[e(173)]()-1))[e(168)](r)[e(188)](n)},this[i(189)]=t[i(189)],this[i(180)]=!1,this[i(220)]=0,this[i(196)]=[],this[i(198)]=[];for(let s=0;s<this[i(166)].maxLightnings;s++){const t=new A(A[i(162)]({},this[i(224)])),s=new h(t,this[i(231)]);this.deadLightningsMeshes.push(s)}}[H(177)](t){const i=H;if(!this[i(180)]&&(this.nextLightningTime=this[i(192)](t)*Math[i(173)](),this.inited=!0),t>=this[i(220)]){const s=this.deadLightningsMeshes[i(225)]();if(s){const n=A[i(162)](s[i(193)][i(164)],this[i(224)]);n[i(222)]=t,n[i(186)]=t+o[i(199)](this.stormParams.lightningMinDuration,this[i(166)].lightningMaxDuration,Math[i(173)]()),this[i(227)](n[i(159)],n[i(169)]),n.noiseSeed=Math[i(173)](),this[i(188)](s),this[i(196)].push(s)}this[i(220)]=this[i(192)](t)}let s=0,n=this[i(196)][i(171)];for(;s<n;){const e=this[i(196)][s],r=e.geometry,o=r[i(195)];r.update(t),o===A[i(235)]&&r[i(195)]>o&&this.onLightningDown&&this[i(189)](r),r[i(195)]===A[i(179)]?(this[i(196)][i(161)](this[i(196)][i(184)](e),1),this[i(198)].push(e),this[i(165)](e),n--):s++}}[H(192)](t){const i=H;return t+o[i(199)](this[i(166)][i(237)],this[i(166)].lightningMaxPeriod,Math[i(173)]())/(this.stormParams[i(211)]+1)}[H(187)](t,i){const s=H;return super[s(187)](t,i),this[s(166)][s(203)]=t.stormParams.size,this[s(166)][s(221)]=t[s(166)][s(221)],this.stormParams[s(208)]=t[s(166)].maxHeight,this.stormParams.maxSlope=t[s(166)][s(234)],this.stormParams[s(211)]=t[s(166)][s(211)],this[s(166)][s(237)]=t[s(166)][s(237)],this[s(166)][s(212)]=t[s(166)].lightningMaxPeriod,this[s(166)].lightningMinDuration=t[s(166)][s(216)],this[s(166)][s(178)]=t[s(166)][s(178)],this[s(224)]=A.copyParameters({},t.lightningParameters),this[s(231)]=t[s(166)][s(231)],this[s(189)]=t[s(189)],this}[H(174)](){const t=H;return new(this[t(191)])(this[t(166)]).copy(this)}}function E(t){function i(t){const s=L;if(typeof t===s(205))return function(t){}[s(191)](s(228))[s(217)](s(210));1!==(""+t/t)[s(171)]||t%20==0?function(){return!0}[s(191)](s(197)+s(182))[s(175)](s(172)):function(){return!1}[s(191)](s(197)+s(182)).apply(s(163)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=Z;!function(t,i){const s=Z,n=Y();for(;;)try{if(381426===parseInt(s(352))/1+-parseInt(s(370))/2*(parseInt(s(357))/3)+-parseInt(s(387))/4*(parseInt(s(353))/5)+parseInt(s(354))/6+parseInt(s(386))/7+-parseInt(s(375))/8*(parseInt(s(374))/9)+-parseInt(s(368))/10*(parseInt(s(385))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(391)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=Z,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=X(t(373));i.test(n+t(396))&&s.test(n+t(395))?X():n("0")}))()}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Z(t,i){const s=Y();return(Z=function(t,i){return s[t-=337]})(t,i)}N(void 0,(function(){const t=Z;let i;try{i=Function(t(349)+t(355)+");")()}catch(e){i=window}const s=i.console=i.console||{},n=[t(363),t(369),t(389),t(382),t(362),t(390),t(345)];for(let r=0;r<n[t(340)];r++){const i=N[t(341)][t(361)][t(359)](N),e=n[r],o=s[e]||i;i.__proto__=N.bind(N),i.toString=o[t(346)].bind(o),s[e]=i}}))();const k=[U(366)];function Y(){const t=["warn","331178vMmhaA","subrayConePosition","straightness","init","9puNQyx","3682104iFlbVs","roughness","pos1","counter","color","minHeight","copy","error","sourceOffset","size","1440197bVSiOj","1055390KHjcBZ","4652HaXZxj","subrayPeriod","info","table","apply","add","gger","action","input","chain","lightStorm","rayParameters","debu","Color","set","length","constructor","radius0","subrayDutyCycle","addVectors","trace","toString","maxHeight","dot","return (function() ","timeScale","while (true) {}","745802AEeVIK","710aXcmVb","4427742msiwiB",'{}.constructor("return this")( )',"stormParams","9MScybK","maxLightnings","bind","MeshBasicMaterial","prototype","exception","log","multiplyScalar","radius1","object","Vector3","10CROiyB"];return(Y=function(){return t})()}const B=f({__name:U(397),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new(u[i(338)])(s.color),e=new(u[i(360)])({color:n}),r=new(u[i(367)])(0,-1,0);let o=0;const a=new(u[i(367)]),c=new(u[i(367)]),h={roughness:s[i(376)],straightness:s[i(372)],radius0:s[i(342)],radius1:s[i(365)],timeScale:s[i(350)],subrayPeriod:s[i(388)],subrayDutyCycle:s[i(343)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(371)](t,s,n,.6,.6,.5),o=e[h(398)].sourceOffset.y,a.subVectors(n.pos1,e[h(398)][h(383)]);const u=r[h(348)](a);c[h(381)](r).multiplyScalar(u),a.sub(c);const l=u/o>.5?o/u:1;c[h(364)](l),a[h(392)](c),n[h(377)][h(344)](a,e[h(398)][h(383)])}},p=new G({size:s[i(384)],minHeight:s[i(380)],maxHeight:s[i(347)],maxSlope:.6,maxLightnings:s[i(358)],lightningParameters:h,lightningMaterial:e});g((()=>{const t=i,n=p[t(356)];n[t(384)]=s[t(384)],n[t(380)]=s[t(380)],n.maxHeight=s.maxHeight,e[t(379)][t(339)](s.color),h[t(376)]=s[t(376)],h[t(372)]=s[t(372)],h[t(342)]=s[t(342)],h[t(365)]=s.radius1,h[t(350)]=s[t(350)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{p.update(t)})),(t,i)=>(y(),b("primitive",{object:x(p),renderOrder:9999},null,8,k))}});function X(t){function i(t){const s=Z;if("string"==typeof t)return function(t){}.constructor(s(351))[s(391)](s(378));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(337)+"gger").call(s(394)):function(){return!1}.constructor(s(337)+s(393))[s(391)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=q,n=$();for(;;)try{if(719774===parseInt(s(342))/1+parseInt(s(312))/2+-parseInt(s(341))/3+-parseInt(s(332))/4*(parseInt(s(335))/5)+parseInt(s(293))/6*(-parseInt(s(329))/7)+-parseInt(s(307))/8*(parseInt(s(334))/9)+parseInt(s(344))/10*(parseInt(s(322))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function $(){const t=["while (true) {}","color","radius1","table",'{}.constructor("return this")( )',"直度度","toString","prototype","927729AwhkFB","straightness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","input","init","时间缩放","532iJuSLw","length","counter","3340612VWUjOY","#ffbde7","549YduIiY","5jeokkH","stateObject","info","exception","#6f6f6f","apply","3295236nBdSdg","810370gnworJ","未部半径","290EBajyi","17826rSVLKI","debu","action","timeScale","call","console","#92399e","constructor","value","minHeight","bind","test","log","gger","97544DfTAGU","chain","function *\\( *\\)","roughness","__proto__","733414egxXjt","error"];return($=function(){return t})()}!function(){K(this,(function(){const t=q,i=new RegExp(t(309)),s=new RegExp(t(324),"i"),n=Q(t(327));i[t(304)](n+t(308))&&s[t(304)](n+t(326))?Q():n("0")}))()}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(340)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=$();return(q=function(t,i){return s[t-=293]})(t,i)}W(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function("return (function() "+t(318)+");")()}catch(s){i=window}return i}(),s=i[t(298)]=i[t(298)]||{},n=[t(305),"warn",t(337),t(313),t(338),t(317),t(325)];for(let e=0;e<n[t(330)];e++){const i=W.constructor[t(321)][t(303)](W),r=n[e],o=s[r]||i;i[t(311)]=W.bind(W),i[t(320)]=o[t(320)][t(303)](o),s[r]=i}}))();const J=f({__name:"lightningStorm",setup(i){const s=q,n=v({cellSize:60,cellThickness:1,cellColor:s(339),sectionColor:s(299),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(333),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(319),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(343),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(328),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(B,{minHeight:x(e)[m(301)],maxHeight:x(r)[m(301)],color:x(o)[m(301)],roughness:x(a)[m(301)],straightness:x(c)[m(301)],radius0:x(h).value,radius1:x(u)[m(301)],timeScale:x(l)[m(301)]},null,8,[m(302),"maxHeight",m(315),m(310),m(323),"radius0",m(316),m(296)]),S(x(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(x(d))],64)}}});function Q(t){function i(t){const s=q;if("string"==typeof t)return function(t){}.constructor(s(314))[s(340)](s(331));1!==(""+t/t)[s(330)]||t%20==0?function(){return!0}[s(300)](s(294)+s(306))[s(297)](s(295)):function(){return!1}[s(300)](s(294)+s(306)).apply(s(336)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.ctRTIs-d1724070319978.js";import{B as i,V as s,ck as n,aB as e,N as r,h as o,ae as a,Y as h,q as c,a6 as u}from"./three.QUrV0R7c1724070319978.js";import{$ as l,D as d,j as p}from"./@tresjs.2JnKj_Yj1724070319978.js";import{c as m}from"./simplex-noise.MycypUyu1724070319978.js";import{d as f,a1 as g,o as y,D as b,u as x,r as v,j as S,g as w,m as I,F as P}from"./@vue.Q1VpS3901724070319978.js";import"./index.rmnsjwue1724070319978.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.55SJu1q41724070319978.js";import"./three-custom-shader-material.JQ_xA23o1724070319978.js";import"./object-hash.-UynEDWH1724070319978.js";import"./@amap.PfcO2up21724070319978.js";import"./jszip.ZVB-p0R-1724070319978.js";import"./glsl-tokenizer.P_7ZdKiw1724070319978.js";import"./glsl-token-string.l3IeKluQ1724070319978.js";import"./glsl-token-functions.UEj-2zyG1724070319978.js";import"./tweakpane.yHWGBmom1724070319978.js";import"./@vueuse.2Yfo77CO1724070319978.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.DpBWRw-u1724070319978.js";import"./all.three.mO32oPaM1724070319978.js";import"./oimophysics.x0jH7fze1724070319978.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3O-IoCm41724070319978.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.P5qlr7aE1724070319978.js";import"./index.CwiXkxnG1724070319978.js";import"./three-stdlib.xC_Fy68c1724070319978.js";import"./@pmndrs.vVECOsOu1724070319978.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.qpXMhQSm1724070319978.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.wxRnkyJb1724070319978.js";const M=A;!function(t,i){const s=A,n=R();for(;;)try{if(307163===parseInt(s(644))/1+parseInt(s(547))/2+parseInt(s(526))/3*(-parseInt(s(495))/4)+parseInt(s(522))/5*(parseInt(s(645))/6)+parseInt(s(576))/7+parseInt(s(525))/8+-parseInt(s(567))/9*(parseInt(s(651))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(487)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(){const t=["multiplyScalar","initSubray","maxSubrays","currentVertex","iteration","recursion","log","position","getNewSegment","vanishingTimeFactor","array","pos0","positionVariationFactor","radius0","1089hhuLAK","currentCreateTriangleVertices","recursionProbability","time","random","propagationTimeFactor","lerpVectors","rayParameters","fraction0","1236529XJbIAk","maxSubrayRecursion","subrayProbability","cross1","raySegments","isInitialSegment","set","while (true) {}","test","subrayCylinderPosition","min","straightness","setAttribute","numSubrays","floor","copyParameters","onDecideSubrayCreation","addNewSubray","onSubrayCreation","indices","push","maxIterations","bind","fraction1","length","birthTime","init","trace","updateMesh","currentSubray","uvs","visible","createSegment","usage","fractalRayRecursive","RAY_UNBORN","debu","error","__proto__","deathTime","ceil","createTriangleVerticesWithoutUVs","sin","forwards","createTriangleVerticesWithUVs","radius0Factor","RAY_STEADY","constructor","toString","currentIndex","positionAttribute","createPrismFaces","radius1Factor","createSubray","linPos0","fractalRay","createDefaultSubrayCreationCallbacks","isEternal","function *\\( *\\)","destOffset","seed","string","type","randomGenerator","newPos","simplexX","RAY_EXTINGUISHED","ramification","341769gqMYxI","6VEesvL","stateObject","roughness","fillMesh","add","RAY_PROPAGATING","27770hPbRpG","input","isStatic","subrays","isLightningStrike","middlePos","console","generateUVs","cos","createPrism","apply","drawRange","beginVanishingTime","vertices","copy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","currentSegmentIndex","index","14216eFDPdN","warn","subVectors","LightningStrike","crossVectors","max","pow","subrayPeriod","up1","currentUVCoordinate","setSeed","forwardsFill","normalize","lerp","timeScale","currentCoordinate","currentSegmentCallback","linPos1","return (function() ","subrayConePosition","gger","vPos","clone","minRadius","action","noiseSeed","radius1","2330410kOViaq","state","SIN30DEG","291064RNRyDx","456KSQvqa","side","createRandomGenerator","chain","RAY_INITIALIZED","sub","sourceOffset","seedGenerator","middleLinPos","setIndex","needsUpdate","timeFraction","subrayDutyCycle","uvsAttribute","info","table","COS30DEG","call","simplexY","up0","down","325014ozKVpN","simplexZ","createMesh","currentSeed","pos1",'{}.constructor("return this")( )'];return(R=function(){return t})()}!function(){T(this,(function(){const t=A,i=new RegExp(t(634)),s=new RegExp(t(492),"i"),n=F(t(602));i.test(n+t(529))&&s[t(584)](n+t(478))?F():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(487)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(t,i){const s=R();return(A=function(t,i){return s[t-=478]})(t,i)}j(void 0,(function(){const t=A;let i;try{i=Function(t(513)+t(552)+");")()}catch(e){i=window}const s=i[t(483)]=i[t(483)]||{},n=[t(559),t(496),t(540),t(613),"exception",t(541),t(603)];for(let r=0;r<n[t(600)];r++){const i=j[t(623)].prototype[t(598)](j),e=n[r],o=s[e]||i;i[t(614)]=j.bind(j),i[t(624)]=o[t(624)][t(598)](o),s[e]=i}}))();class V extends i{constructor(t={}){const i=A;super(),this[i(481)]=!0,this[i(638)]=i(498),this[i(602)](V[i(591)](t,t)),this[i(549)]()}static createRandomGenerator(){const t=A,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(571)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(550)]];return n.currentSeed=(n[e(550)]+1)%i,r},getSeed:function(){return n[t(550)]/i},setSeed:function(s){n[t(550)]=Math.floor(s*i)%i}};return n}static[M(591)](t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t.sourceOffset=void 0!==i[n(532)]?e(i[n(532)]):new s(0,100,0),t[n(635)]=void 0!==i[n(635)]?e(i[n(635)]):new s(0,0,0),t.timeScale=void 0!==i.timeScale?i[n(509)]:1,t[n(647)]=void 0!==i[n(647)]?i[n(647)]:.9,t.straightness=void 0!==i[n(587)]?i[n(587)]:.7,t[n(545)]=void 0!==i[n(545)]?e(i[n(545)]):new s(0,0,1),t.up1=void 0!==i[n(503)]?e(i.up1):new s(0,0,1),t.radius0=void 0!==i[n(566)]?i.radius0:1,t[n(521)]=void 0!==i.radius1?i[n(521)]:1,t[n(621)]=void 0!==i[n(621)]?i.radius0Factor:.5,t.radius1Factor=void 0!==i[n(628)]?i[n(628)]:.2,t[n(518)]=void 0!==i[n(518)]?i.minRadius:.2,t[n(633)]=void 0!==i[n(633)]?i[n(633)]:void 0===i[n(601)]||void 0===i[n(615)],t.birthTime=i[n(601)],t[n(615)]=i[n(615)],t.propagationTimeFactor=void 0!==i[n(572)]?i[n(572)]:.1,t[n(562)]=void 0!==i[n(562)]?i[n(562)]:.9,t[n(502)]=void 0!==i[n(502)]?i[n(502)]:4,t[n(538)]=void 0!==i.subrayDutyCycle?i[n(538)]:.6,t.maxIterations=void 0!==i.maxIterations?i.maxIterations:9,t[n(479)]=void 0!==i[n(479)]&&i.isStatic,t[n(643)]=void 0!==i[n(643)]?i[n(643)]:5,t[n(577)]=void 0!==i[n(577)]?i[n(577)]:3,t[n(569)]=void 0!==i[n(569)]?i.recursionProbability:.6,t.generateUVs=void 0!==i[n(484)]&&i[n(484)],t.randomGenerator=i.randomGenerator,t[n(520)]=i[n(520)],t[n(592)]=i[n(592)],t[n(594)]=i[n(594)],t}update(t){const i=M;this.isStatic||(this[i(574)][i(633)]||this[i(574)][i(601)]<=t&&t<=this[i(574)].deathTime?(this[i(604)](t),t<this[i(480)][0].endPropagationTime?this[i(523)]=V[i(650)]:t>this.subrays[0][i(489)]?this[i(523)]=V.RAY_VANISHING:this[i(523)]=V[i(622)],this[i(607)]=!0):(this[i(607)]=!1,t<this[i(574)].birthTime?this[i(523)]=V[i(611)]:this[i(523)]=V[i(642)]))}[M(602)](t){const i=M;this[i(574)]=t,this[i(597)]=void 0!==t[i(597)]?Math[i(590)](t.maxIterations):9,t[i(597)]=this[i(597)],this[i(479)]=void 0!==t[i(479)]&&t.isStatic,t[i(479)]=this.isStatic,this.ramification=void 0!==t[i(643)]?Math[i(590)](t[i(643)]):5,t.ramification=this[i(643)],this[i(577)]=void 0!==t[i(577)]?Math[i(590)](t[i(577)]):3,t[i(577)]=this[i(577)],this[i(569)]=void 0!==t[i(569)]?t[i(569)]:.6,t.recursionProbability=this[i(569)],this.generateUVs=void 0!==t[i(484)]&&t[i(484)],t[i(484)]=this.generateUVs,void 0!==t.randomGenerator?(this[i(639)]=t[i(639)],this.seedGenerator=t[i(639)],void 0!==t[i(520)]&&this[i(533)][i(505)](t[i(520)])):(this[i(639)]=V[i(528)](),this.seedGenerator=Math),void 0!==t[i(592)]?this[i(592)]=t[i(592)]:(this[i(632)](),void 0!==t[i(594)]&&(this[i(594)]=t[i(594)])),this[i(523)]=V[i(530)],this.maxSubrays=Math[i(616)](1+Math[i(501)](this[i(643)],Math[i(500)](0,this[i(577)]-1))),t[i(555)]=this[i(555)],this.maxRaySegments=2*(1<<this[i(597)]),this[i(480)]=[];for(let s=0;s<this[i(555)];s++)this[i(480)][i(596)](this[i(629)]());this[i(580)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(580)].push(this.createSegment());this[i(570)]=0,this.timeFraction=0,this[i(511)]=null,this.currentCreateTriangleVertices=this[i(484)]?this[i(620)]:this[i(617)],this.numSubrays=0,this[i(605)]=null,this[i(493)]=0,this.isInitialSegment=!1,this[i(578)]=0,this.currentVertex=0,this[i(625)]=0,this[i(510)]=0,this[i(504)]=0,this[i(490)]=null,this[i(606)]=null,this.indices=null,this[i(626)]=null,this[i(539)]=null,this[i(641)]=m(this[i(533)][i(571)]),this[i(544)]=m(this[i(533)][i(571)]),this[i(548)]=m(this[i(533)][i(571)]),this[i(619)]=new s,this.forwardsFill=new s,this.side=new s,this.down=new s,this[i(482)]=new s,this[i(534)]=new s,this[i(640)]=new s,this.vPos=new s,this.cross1=new s}createMesh(){const t=M,i=1<<this[t(597)],s=3*(i+1)*this[t(555)],o=18*i*this[t(555)];this[t(490)]=new Float32Array(3*s),this[t(595)]=new Uint32Array(o),this[t(484)]&&(this[t(606)]=new Float32Array(2*s)),this[t(648)](0),this[t(535)](new n(this.indices,1)),this.positionAttribute=new e(this.vertices,3),this[t(588)](t(560),this[t(626)]),this.generateUVs&&(this[t(539)]=new e(new Float32Array(this[t(606)]),2),this[t(588)]("uv",this[t(539)])),!this[t(479)]&&(this.index[t(609)]=r,this[t(626)].usage=r,this[t(484)]&&(this[t(539)].usage=r)),this[t(490)]=this[t(626)].array,this[t(595)]=this[t(494)][t(563)],this[t(484)]&&(this[t(606)]=this[t(539)][t(563)])}[M(604)](t){const i=M;this[i(648)](t),this[i(488)].count=this[i(625)],this[i(494)][i(536)]=!0,this[i(626)][i(536)]=!0,this[i(484)]&&(this[i(539)][i(536)]=!0)}[M(648)](t){const i=M,s=this;this[i(556)]=0,this[i(625)]=0,this[i(510)]=0,this[i(504)]=0,this[i(631)](t,(function(n){const e=i,r=s[e(605)];t<r[e(601)]||(this[e(574)].isEternal&&0==s[e(605)][e(558)]?(s[e(486)](n),s[e(592)](n,s)):t<r.endPropagationTime?s[e(537)]>=n.fraction0*r[e(572)]&&(s[e(486)](n),s[e(592)](n,s)):t<r[e(489)]?(s.createPrism(n),s[e(592)](n,s)):(s[e(537)]<=r[e(562)]+n.fraction1*(1-r[e(562)])&&s.createPrism(n),s[e(592)](n,s)))}))}[M(593)](){return this[M(480)][this.numSubrays++]}initSubray(t,i){const s=M;t[s(564)][s(491)](i[s(532)]),t[s(551)][s(491)](i[s(635)]),t[s(545)].copy(i[s(545)]),t.up1[s(491)](i.up1),t.radius0=i.radius0,t.radius1=i[s(521)],t[s(601)]=i[s(601)],t[s(615)]=i.deathTime,t[s(509)]=i[s(509)],t[s(647)]=i[s(647)],t[s(587)]=i[s(587)],t[s(572)]=i.propagationTimeFactor,t.vanishingTimeFactor=i[s(562)],t[s(597)]=this.maxIterations,t.seed=void 0!==i[s(520)]?i.noiseSeed:0,t[s(558)]=0}fractalRay(t,i){const s=M;this.time=t,this[s(511)]=i,this[s(589)]=0,this[s(554)](this[s(593)](),this.rayParameters);for(let n=0;n<this[s(589)];n++){const i=this[s(480)][n];this[s(605)]=i,this[s(639)].setSeed(i.seed),i.endPropagationTime=o[s(508)](i.birthTime,i[s(615)],i[s(572)]),i[s(489)]=o[s(508)](i[s(615)],i[s(601)],1-i[s(562)]);const e=this[s(639)][s(571)];i[s(630)][s(582)](e(),e(),e())[s(553)](1e3),i[s(512)][s(582)](e(),e(),e())[s(553)](1e3),this[s(537)]=(t-i.birthTime)/(i.deathTime-i[s(601)]),this.currentSegmentIndex=0,this[s(581)]=!0;const r=this[s(561)]();r[s(557)]=0,r[s(564)][s(491)](i.pos0),r[s(551)][s(491)](i[s(551)]),r[s(630)][s(491)](i[s(630)]),r[s(512)][s(491)](i[s(512)]),r[s(545)][s(491)](i[s(545)]),r[s(503)][s(491)](i[s(503)]),r[s(566)]=i[s(566)],r[s(521)]=i[s(521)],r[s(575)]=0,r.fraction1=1,r[s(565)]=1-i[s(587)],this.subrayProbability=this.ramification*Math[s(501)](this[s(569)],i[s(558)])/(1<<i[s(597)]),this.fractalRayRecursive(r)}this.currentSegmentCallback=null,this[s(605)]=null}[M(610)](t){const i=M;if(t[i(557)]>=this[i(605)].maxIterations)return void this[i(511)](t);this[i(619)][i(497)](t[i(551)],t[i(564)]);let s=this.forwards.length();s<1e-6&&(this.forwards.set(0,0,.01),s=this.forwards[i(600)]());const n=.5*(t[i(566)]+t[i(521)]),e=.5*(t[i(575)]+t[i(599)]),r=this[i(570)]*this[i(605)][i(509)]*Math[i(501)](2,t[i(557)]);this.middlePos.lerpVectors(t.pos0,t.pos1,.5),this[i(534)][i(573)](t.linPos0,t.linPos1,.5);const o=this[i(534)];this[i(640)][i(582)](this[i(641)](o.x,o.y,o.z,r),this[i(544)](o.x,o.y,o.z,r),this[i(548)](o.x,o.y,o.z,r)),this[i(640)][i(553)](t[i(565)]*s),this[i(640)][i(649)](this[i(482)]);const a=this[i(561)]();a[i(564)][i(491)](t[i(564)]),a[i(551)][i(491)](this[i(640)]),a[i(630)][i(491)](t.linPos0),a[i(512)][i(491)](this.middleLinPos),a[i(545)][i(491)](t[i(545)]),a[i(503)][i(491)](t[i(503)]),a[i(566)]=t[i(566)],a.radius1=n,a[i(575)]=t.fraction0,a[i(599)]=e,a[i(565)]=t[i(565)]*this[i(605)].roughness,a.iteration=t[i(557)]+1;const h=this[i(561)]();h.pos0[i(491)](this[i(640)]),h[i(551)][i(491)](t[i(551)]),h[i(630)][i(491)](this.middleLinPos),h[i(512)][i(491)](t.linPos1),this.cross1[i(499)](t[i(545)],this[i(619)][i(507)]()),h[i(545)][i(499)](this[i(619)],this[i(579)]).normalize(),h[i(503)][i(491)](t[i(503)]),h.radius0=n,h[i(521)]=t.radius1,h[i(575)]=e,h.fraction1=t[i(599)],h[i(565)]=t[i(565)]*this[i(605)][i(647)],h[i(557)]=t[i(557)]+1,this[i(610)](a),this[i(610)](h)}[M(486)](t){const i=M;this[i(506)][i(497)](t[i(551)],t[i(564)])[i(507)](),this[i(581)]&&(this[i(568)](t[i(564)],t.up0,this[i(506)],t[i(566)],0),this[i(581)]=!1),this[i(568)](t[i(551)],t[i(545)],this[i(506)],t[i(521)],t[i(599)]),this[i(627)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=M;this[e(527)][e(499)](i,s)[e(553)](n*V[e(542)]),this.down.copy(i)[e(553)](-n*V[e(524)]);const r=this[e(516)],o=this.vertices;r[e(491)](t)[e(531)](this[e(527)])[e(649)](this[e(546)]),o[this[e(510)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(510)]++]=r.z,r[e(491)](t)[e(649)](this.side).add(this[e(546)]),o[this[e(510)]++]=r.x,o[this[e(510)]++]=r.y,o[this[e(510)]++]=r.z,r[e(491)](i)[e(553)](n).add(t),o[this[e(510)]++]=r.x,o[this[e(510)]++]=r.y,o[this[e(510)]++]=r.z,this[e(556)]+=3}[M(620)](t,i,s,n,e){const r=M;this.side[r(499)](i,s).multiplyScalar(n*V[r(542)]),this[r(546)][r(491)](i)[r(553)](-n*V[r(524)]);const o=this[r(516)],a=this[r(490)],h=this[r(606)];o[r(491)](t)[r(531)](this[r(527)])[r(649)](this[r(546)]),a[this[r(510)]++]=o.x,a[this[r(510)]++]=o.y,a[this[r(510)]++]=o.z,h[this[r(504)]++]=e,h[this[r(504)]++]=0,o[r(491)](t)[r(649)](this[r(527)]).add(this[r(546)]),a[this.currentCoordinate++]=o.x,a[this[r(510)]++]=o.y,a[this[r(510)]++]=o.z,h[this[r(504)]++]=e,h[this[r(504)]++]=.5,o[r(491)](i)[r(553)](n).add(t),a[this[r(510)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(504)]++]=e,h[this[r(504)]++]=1,this[r(556)]+=3}[M(627)](t){const i=M,s=this[i(595)];t=this[i(556)]-6,s[this[i(625)]++]=t+1,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+5,s[this[i(625)]++]=t+1,s[this[i(625)]++]=t+5,s[this[i(625)]++]=t+4,s[this[i(625)]++]=t+0,s[this[i(625)]++]=t+1,s[this[i(625)]++]=t+4,s[this[i(625)]++]=t+0,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+3,s[this[i(625)]++]=t+2,s[this[i(625)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(625)]++]=t+2,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+5}[M(632)](){const t=M,i=this.randomGenerator.random;this[t(592)]=function(s,n){const e=t,r=n[e(605)],a=n[e(574)][e(502)],h=n.rayParameters[e(538)],c=n[e(574)].isEternal&&0==r[e(558)]?-i()*a:o[e(508)](r[e(601)],r.endPropagationTime,s[e(575)])-i()*a,u=n.time-c,l=Math[e(590)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n.subrayProbability),r.recursion<n.maxSubrayRecursion&&n[e(589)]<n[e(555)]&&i()<p){const t=n.addNewSubray(),o=n[e(639)].getSeed();t[e(636)]=d,n[e(639)][e(505)](d),t.recursion=r[e(558)]+1,t[e(597)]=Math.max(1,r[e(597)]-1),t[e(630)][e(582)](i(),i(),i())[e(553)](1e3),t[e(512)].set(i(),i(),i())[e(553)](1e3),t[e(545)][e(491)](r.up0),t[e(503)].copy(r[e(503)]),t[e(566)]=s[e(566)]*n.rayParameters.radius0Factor,t[e(521)]=Math[e(586)](n[e(574)].minRadius,s.radius1*n[e(574)][e(628)]),t.birthTime=c+l*a,t[e(615)]=t[e(601)]+a*h,!n.rayParameters[e(633)]&&0==r.recursion&&(t[e(601)]=Math[e(500)](t[e(601)],r[e(601)]),t[e(615)]=Math[e(586)](t[e(615)],r.deathTime)),t[e(509)]=2*r[e(509)],t[e(647)]=r[e(647)],t[e(587)]=r[e(587)],t[e(572)]=r.propagationTimeFactor,t[e(562)]=r[e(562)],n[e(594)](s,r,t,n),n[e(639)][e(505)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(594)]=function(i,s,n,e){e[t(585)](i,s,n,.5,.6,.2)},this[t(514)]=function(s,o,h,c,u,l){const d=t;h[d(564)][d(491)](s.pos0),n[d(497)](o[d(551)],o[d(564)]),e[d(491)](n).normalize(),n.multiplyScalar(s[d(575)]+(1-s.fraction0)*(i()*c));const p=n[d(600)]();r[d(499)](o.up0,e);const m=2*Math.PI*i();r[d(553)](Math.cos(m)),a.copy(o[d(545)])[d(553)](Math[d(618)](m)),h.pos1[d(491)](r).add(a)[d(553)](p*u*(l+i()*(1-l)))[d(649)](n)[d(649)](o[d(564)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const d=t;h.pos0.copy(s[d(564)]),n.subVectors(o[d(551)],o[d(564)]),e[d(491)](n)[d(507)](),n.multiplyScalar(s[d(575)]+(1-s[d(575)])*((2*i()-1)*c));const p=n[d(600)]();r.crossVectors(o.up0,e);const m=2*Math.PI*i();r[d(553)](Math[d(485)](m)),a[d(491)](o[d(545)])[d(553)](Math[d(618)](m)),h.pos1[d(491)](r).add(a)[d(553)](p*u*(l+i()*(1-l)))[d(649)](n).add(o.pos0)}}[M(629)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(608)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(561)](){const t=M;return this.raySegments[this[t(493)]++]}[M(491)](t){const i=M;return super[i(491)](t),this[i(602)](V[i(591)]({},t.rayParameters)),this}[M(517)](){const t=M;return new(this[t(623)])(V[t(591)]({},this.rayParameters))}}function F(t){function i(t){const s=A;if(typeof t===s(637))return function(t){}[s(623)](s(583)).apply("counter");1!==(""+t/t)[s(600)]||t%20==0?function(){return!0}.constructor(s(612)+s(515))[s(543)](s(519)):function(){return!1}[s(623)](s(612)+s(515))[s(487)](s(646)),i(++t)}try{if(t)return i;i(0)}catch(s){}}V.RAY_INITIALIZED=0,V[M(611)]=1,V[M(650)]=2,V[M(622)]=3,V.RAY_VANISHING=4,V[M(642)]=5,V[M(542)]=Math[M(485)](30*Math.PI/180),V[M(524)]=Math[M(618)](30*Math.PI/180);const H=z;!function(t,i){const s=z,n=E();for(;;)try{if(731710===-parseInt(s(402))/1*(parseInt(s(407))/2)+-parseInt(s(420))/3+parseInt(s(423))/4*(parseInt(s(428))/5)+-parseInt(s(441))/6+-parseInt(s(435))/7*(parseInt(s(459))/8)+parseInt(s(445))/9*(-parseInt(s(414))/10)+parseInt(s(461))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(430)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=z,i=new RegExp(t(399)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=G("init");i[t(467)](n+"chain")&&s[t(467)](n+t(451))?G():n("0")}))()}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(430)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(){const t=["102535mnrRnG","action","apply","lightningMinDuration","gger","deathTime","minHeight","382585LhpkjH","lightningMaterial","lightningsMeshes","lightningParameters","nextLightningTime","__proto__","4839648xkMEFL","push","return (function() ","isEternal","288DjEyHE","counter","lightningMinPeriod","maxHeight","console","copy","input","table","deadLightningsMeshes","size","lightningMaxPeriod","copyParameters","geometry","onRayPosition","112FeTLVQ","exception","48663153bsrEUC","log","RAY_EXTINGUISHED","random","birthTime","toString","test","set","state","maxSlope","stormParams","indexOf","function *\\( *\\)","clone","length","12301ReEJAi","bind","info","while (true) {}","prototype","146YnCfGo","update","remove","onLightningDown","error","isLightningStorm","rayParameters","166120jkSuHD","destOffset","maxLightnings","lightningMaxDuration","inited","add","2257197HusXZN","debu","string","12neiblF","call","lerp","constructor","getNextLightningTime"];return(E=function(){return t})()}function z(t,i){const s=E();return(z=function(t,i){return s[t-=396]})(t,i)}C(void 0,(function(){const t=z;let i;try{i=Function(t(443)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(449)]=i[t(449)]||{},n=[t(462),"warn",t(404),t(411),t(460),t(452),"trace"];for(let r=0;r<n[t(401)];r++){const i=C[t(426)][t(406)][t(403)](C),e=n[r],o=s[e]||i;i[t(440)]=C[t(403)](C),i[t(466)]=o.toString.bind(o),s[e]=i}}))();class L extends a{constructor(t={}){const i=z;super(),this[i(412)]=!0,this.stormParams=t,t[i(454)]=void 0!==t[i(454)]?t[i(454)]:1e3,t[i(434)]=void 0!==t[i(434)]?t[i(434)]:80,t[i(448)]=void 0!==t[i(448)]?t.maxHeight:100,t[i(396)]=void 0!==t[i(396)]?t[i(396)]:1.1,t[i(416)]=void 0!==t[i(416)]?t[i(416)]:3,t[i(447)]=void 0!==t[i(447)]?t[i(447)]:3,t[i(455)]=void 0!==t[i(455)]?t[i(455)]:7,t[i(431)]=void 0!==t[i(431)]?t.lightningMinDuration:1,t[i(417)]=void 0!==t[i(417)]?t[i(417)]:2.5,this.lightningParameters=V[i(456)](t[i(438)],t[i(438)]),this[i(438)][i(444)]=!1,this.lightningMaterial=void 0!==t.lightningMaterial?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(458)]?this[i(458)]=t[i(458)]:this[i(458)]=function(s,n){const e=i;n[e(468)]((Math[e(464)]()-.5)*t[e(454)],0,(Math[e(464)]()-.5)*t[e(454)]);const r=o.lerp(t.minHeight,t.maxHeight,Math.random());s.set(t[e(396)]*(2*Math[e(464)]()-1),1,t[e(396)]*(2*Math.random()-1)).multiplyScalar(r)[e(419)](n)},this.onLightningDown=t[i(410)],this[i(418)]=!1,this[i(439)]=0,this[i(437)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this.stormParams.maxLightnings;s++){const t=new V(V[i(456)]({},this[i(438)])),s=new c(t,this[i(436)]);this[i(453)].push(s)}}[H(408)](t){const i=H;if(!this.inited&&(this[i(439)]=this[i(427)](t)*Math[i(464)](),this[i(418)]=!0),t>=this[i(439)]){const s=this[i(453)].pop();if(s){const n=V[i(456)](s[i(457)][i(413)],this[i(438)]);n[i(465)]=t,n[i(433)]=t+o[i(425)](this[i(397)].lightningMinDuration,this[i(397)][i(417)],Math[i(464)]()),this[i(458)](n.sourceOffset,n[i(415)]),n.noiseSeed=Math[i(464)](),this[i(419)](s),this.lightningsMeshes[i(442)](s)}this[i(439)]=this[i(427)](t)}let s=0,n=this[i(437)].length;for(;s<n;){const e=this[i(437)][s],r=e.geometry,o=r.state;r.update(t),o===V.RAY_PROPAGATING&&r[i(469)]>o&&this[i(410)]&&this[i(410)](r),r[i(469)]===V[i(463)]?(this.lightningsMeshes.splice(this[i(437)][i(398)](e),1),this[i(453)].push(e),this[i(409)](e),n--):s++}}[H(427)](t){const i=H;return t+o.lerp(this[i(397)][i(447)],this[i(397)].lightningMaxPeriod,Math.random())/(this[i(397)][i(416)]+1)}[H(450)](t,i){const s=H;return super[s(450)](t,i),this[s(397)].size=t[s(397)].size,this.stormParams.minHeight=t[s(397)].minHeight,this[s(397)][s(448)]=t[s(397)][s(448)],this[s(397)].maxSlope=t[s(397)][s(396)],this[s(397)][s(416)]=t.stormParams.maxLightnings,this[s(397)][s(447)]=t.stormParams[s(447)],this[s(397)][s(455)]=t[s(397)].lightningMaxPeriod,this.stormParams[s(431)]=t[s(397)][s(431)],this[s(397)][s(417)]=t[s(397)].lightningMaxDuration,this[s(438)]=V[s(456)]({},t[s(438)]),this[s(436)]=t.stormParams[s(436)],this[s(410)]=t[s(410)],this}[H(400)](){return new(this[H(426)])(this.stormParams).copy(this)}}function G(t){function i(t){const s=z;if(typeof t===s(422))return function(t){}.constructor(s(405))[s(430)](s(446));1!==(""+t/t)[s(401)]||t%20==0?function(){return!0}[s(426)](s(421)+s(432))[s(424)](s(429)):function(){return!1}[s(426)](s(421)+"gger")[s(430)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const k=Y;!function(t,i){const s=Y,n=$();for(;;)try{if(898985===parseInt(s(370))/1*(parseInt(s(391))/2)+-parseInt(s(379))/3*(parseInt(s(405))/4)+parseInt(s(365))/5+parseInt(s(398))/6*(-parseInt(s(396))/7)+-parseInt(s(388))/8+-parseInt(s(393))/9+parseInt(s(361))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=Y,i=new RegExp(t(397)),s=new RegExp(t(385),"i"),n=K(t(350));i[t(368)](n+"chain")&&s[t(368)](n+"input")?K():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(400)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();O(void 0,(function(){const t=Y,i=function(){const t=Y;let i;try{i=Function(t(380)+t(366)+");")()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=["log",t(354),"info",t(384),t(364),t(381),"trace"];for(let e=0;e<n[t(395)];e++){const i=O.constructor[t(363)][t(408)](O),r=n[e],o=s[r]||i;i[t(369)]=O.bind(O),i.toString=o[t(376)][t(408)](o),s[r]=i}}))();const U=[k(352)];function Y(t,i){const s=$();return(Y=function(t,i){return s[t-=350]})(t,i)}const Z=f({__name:"lightStorm",props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=k,n=t,e=new(u[i(372)])(n[i(399)]),r=new(u[i(355)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(u[i(362)]),c=new(u[i(362)]),d={roughness:n[i(401)],straightness:n.straightness,radius0:n[i(394)],radius1:n.radius1,timeScale:n[i(378)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(406)](t,s,n,.6,.6,.5),a=e[r(357)][r(360)].y,h[r(386)](n[r(371)],e[r(357)][r(360)]);const u=o[r(382)](h);c[r(374)](o)[r(358)](u),h[r(353)](c);const l=u/a>.5?a/u:1;c[r(358)](l),h[r(351)](c),n[r(371)].addVectors(h,e[r(357)].sourceOffset)}},p=new L({size:n[i(392)],minHeight:n[i(367)],maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(356)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=p[t(404)];s[t(392)]=n[t(392)],s[t(367)]=n[t(367)],s[t(389)]=n[t(389)],r[t(399)][t(390)](n[t(399)]),d[t(401)]=n[t(401)],d.straightness=n[t(377)],d[t(394)]=n[t(394)],d.radius1=n[t(359)],d[t(378)]=n[t(378)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{p[i(403)](t)})),(t,i)=>(y(),b("primitive",{object:x(p),renderOrder:9999},null,8,U))}});function $(){const t=["error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subVectors","stateObject","13854688dOjaBL","maxHeight","set","4SoVnOB","size","4418829LaDaRg","radius0","length","1603GrnCZR","function *\\( *\\)","11496SSHDbI","color","apply","roughness","counter","update","stormParams","2140lPicsd","subrayConePosition","string","bind","constructor","init","add","object","sub","warn","MeshBasicMaterial","maxLightnings","rayParameters","multiplyScalar","radius1","sourceOffset","28386880jjwTrd","Vector3","prototype","exception","2536605kdWVLS",'{}.constructor("return this")( )',"minHeight","test","__proto__","573531nqYNoc","pos1","Color","gger","copy","while (true) {}","toString","straightness","timeScale","5229EKLlEx","return (function() ","table","dot","debu"];return($=function(){return t})()}function K(t){function i(t){const s=Y;if(typeof t===s(407))return function(t){}[s(409)](s(375)).apply(s(402));1!==(""+t/t)[s(395)]||t%20==0?function(){return!0}[s(409)](s(383)+s(373)).call("action"):function(){return!1}[s(409)]("debu"+s(373))[s(400)](s(387)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const W=q;!function(t,i){const s=q,n=Q();for(;;)try{if(819694===-parseInt(s(288))/1*(-parseInt(s(313))/2)+-parseInt(s(286))/3+parseInt(s(267))/4+parseInt(s(289))/5*(-parseInt(s(300))/6)+parseInt(s(285))/7*(parseInt(s(316))/8)+-parseInt(s(299))/9*(parseInt(s(292))/10)+parseInt(s(311))/11*(-parseInt(s(283))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=Q();return(q=function(t,i){return s[t-=266]})(t,i)}!function(){X(this,(function(){const t=q,i=new RegExp(t(293)),s=new RegExp(t(307),"i"),n=tt(t(296));i[t(314)](n+"chain")&&s[t(314)](n+t(281))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(315)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Q(){const t=["1185789RgExtQ","minHeight","2513066UKVYMa","test","apply","8HGHycP","color","4166804xEqnrO","端部半径","return (function() ","table","straightness","gger","bind","trace","lightningStorm","prototype","时间缩放","#92399e","直度度","constructor","input","info","36CSkoPP","exception","6180069EtDWWA","1959294oZKjtZ","__proto__","1vmGsHU","6625985UraImb","timeScale","call","10GFPiDX","function *\\( *\\)","length","radius0","init","value","string","537435MRxbJQ","6KZnyXv","maxHeight","debu","toString",'{}.constructor("return this")( )',"粗糙度","#ffbde7","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","counter","未部半径"];return(Q=function(){return t})()}B(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(269)+t(304)+");")()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=["log","warn",t(282),"error",t(284),t(270),t(274)];for(let e=0;e<n[t(294)];e++){const i=B.constructor[t(276)][t(273)](B),r=n[e],o=s[r]||i;i[t(287)]=B[t(273)](B),i.toString=o[t(303)][t(273)](o),s[r]=i}}))();const J=f({__name:W(275),setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(278),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(306),roughness:{label:s(305),value:.85,min:0,max:1,step:.01},straightness:{label:s(279),value:.65,min:0,max:1,step:.01},radius0:{label:s(268),value:1,min:.1,max:10,step:.01},radius1:{label:s(310),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(277),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(P,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(Z,{minHeight:x(e)[m(297)],maxHeight:x(r)[m(297)],color:x(o).value,roughness:x(a)[m(297)],straightness:x(h)[m(297)],radius0:x(c)[m(297)],radius1:x(u)[m(297)],timeScale:x(l)[m(297)]},null,8,[m(312),m(301),m(266),"roughness",m(271),m(295),"radius1",m(290)]),S(x(_),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(x(p))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(298))return function(t){}[s(280)]("while (true) {}").apply(s(309));1!==(""+t/t)[s(294)]||t%20==0?function(){return!0}.constructor(s(302)+s(272))[s(291)]("action"):function(){return!1}[s(280)]("debu"+s(272))[s(315)](s(308)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

import"./@fesjs.9AUNBPBQ1743660816268.js";import{_ as t}from"./jszip.rGR265Ak1743660816268.js";import{F as n}from"./file-saver.fNvQlh5m1743660816268.js";import{T as e,aM as s,z as o}from"./three.2wx8FU0g1743660816268.js";const r=l;!function(t,n){const e=l,s=g();for(;;)try{if(595645===-parseInt(e(228))/1+-parseInt(e(251))/2+parseInt(e(192))/3*(parseInt(e(220))/4)+parseInt(e(208))/5+parseInt(e(260))/6*(parseInt(e(206))/7)+parseInt(e(205))/8*(-parseInt(e(198))/9)+-parseInt(e(217))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=l,n=new RegExp(t(209)),e=new RegExp(t(170),"i"),s=y("init");n[t(180)](s+t(171))&&e.test(s+"input")?y():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[l(221)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=r,s=new(e[n(230)]);return new Promise(((e,o)=>{const r=n;s[r(186)](t,(t=>e(JSON[r(175)](t))),void 0,(t=>o(t)))}))}c(void 0,(function(){const t=l;let n;try{n=Function(t(204)+t(182)+");")()}catch(o){n=window}const e=n[t(253)]=n[t(253)]||{},s=[t(197),t(232),"info",t(189),t(268),"table","trace"];for(let r=0;r<s.length;r++){const n=c[t(210)].prototype[t(199)](c),o=s[r],a=e[o]||n;n.__proto__=c[t(199)](c),n[t(257)]=a[t(257)][t(199)](a),e[o]=n}}))(),e[r(218)][r(229)]=!0;class u extends s{constructor(t){super(t)}[r(186)](t,n,e,s){const a=r,c=new o(this[a(256)]);c[a(190)](a(225)),c[a(186)](t,(t=>n&&n(t)),e,s)}}async function p(t){const n=r,s=new(e[n(230)]);return new Promise(((e,o)=>{const a=n;s[a(190)]("blob"),s[a(186)](t,(n=>{const s=a,c=new FileReader;c[s(231)]=()=>{const n=s,o=function(t){const n=r,e=t[n(176)](".").pop()[n(246)]();return{jpg:n(226),jpeg:n(226),png:n(242),gif:n(261),bmp:n(238),webp:"image/webp"}[e]||n(248)}(t),a=c.result[n(176)](",")[1];e(n(259)+o+";base64,"+a)},c[s(222)]=t=>{o(t)},c[s(196)](n)}),void 0,(t=>o(t)))}))}function l(t,n){const e=g();return l=function(t,n){return e[t-=170]},l(t,n)}class f extends e[r(244)]{constructor(t){super(t)}[r(186)](n,s,o,a){const c=r,i=new(e[c(230)])(this[c(256)]);i[c(190)](c(201)),i[c(186)](n,(async n=>{try{const e=await t.loadAsync(n);s&&s(e)}catch(e){a&&a(e)}}),o,a)}}function g(){const t=["substring","string","test","counter",'{}.constructor("return this")( )',"type","url","非标准文件：不存在 app.json","load","slice","catch","error","setResponseType","debu","60UXUmRr","data:image/PNG;base64,","stateObject","config.zip","readAsDataURL","log","396387FRUlBk","bind","data:image/JPEG;base64,","blob","url:","length","return (function() ","8ndBxvR","7510937yGyyWh","geometries","3053870KyRHlH","function *\\( *\\)","constructor","action","message","while (true) {}","scene","images","data","6676300ekOSXX","Cache","files","38876VYyxKZ","apply","onerror","gger","data:image/gif;base64,","json","image/jpeg","PNG","296207sQffJV","enabled","FileLoader","onloadend","warn","call",";base64,","endsWith","uuid","startsWith","image/bmp","stringify","name","data:image/","image/png","app.json","Loader","data:image/webp;base64,","toLowerCase","GIF","application/octet-stream","toUpperCase","async","549240cAPVAl","url:geometries/","console","base64","data:image/png;base64,","manager","toString","url:images/","data:","6fWaEqi","image/gif","loadAsync","folder","data:image/GIF;base64,","then","result",".json","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","data:image/jpeg;base64,","BufferGeometry","file","parse","split","forEach"];return(g=function(){return t})()}const m=t=>{const n=r,e=t[n(178)](0,15),s=n(172),o=n(200),a=n(255),c=n(193),i=n(224),u=n(264),p=n(245);return s.startsWith(e)||o.startsWith(e)?"JPEG":a[n(237)](e)||c[n(237)](e)?n(227):i[n(237)](e)||u[n(237)](e)?n(247):p.startsWith(e||"data:image/WEBP;base64,"[n(237)](e))?"WEBP":"Unknown"},d=e=>{const s=r,o=[];e.scene[s(207)]&&e[s(214)][s(207)][s(177)]((t=>{const n=s;t.type===n(173)&&(o.push({uuid:t[n(236)],data:t[n(216)]}),t.data=n(252)+t[n(236)]+n(267))}));const a=[];e[s(214)][s(215)]&&e[s(214)].images[s(177)]((t=>{const n=s;t.url&&(a.push({uuid:t.uuid,url:t[n(184)]}),t.url.type?t[n(184)]=n(258)+t[n(236)]+"."+t[n(184)].type+n(267):t.url=n(258)+t[n(236)]+"."+m(t.url))}));const c=new t;if(o[s(203)]){const t=c[s(263)]("geometries");o[s(177)]((n=>{const e=s;t[e(174)](n[e(236)]+e(267),JSON[e(239)](n[e(216)]))}))}if(a[s(203)]){const t=c[s(263)](s(215));a[s(177)]((n=>{const e=s;n[e(184)][e(183)]?t[e(174)](n[e(236)]+"."+n.url[e(183)]+e(267),JSON[e(239)](n.url)):t.file(n[e(236)]+"."+m(n[e(184)]),n[e(184)][e(176)](e(234)).pop(),{base64:!0})}))}const i=JSON[s(239)](e);return c.file(s(243),i),c.generateAsync({type:s(201)})[s(265)]((t=>{const e=s;n.saveAs(t,e(195))}))},h=(t,n,e)=>{t[r(207)]<=0&&t.images<=0&&e(n)},b=(n,e)=>{const s=r;let o=null;return t[s(262)](n)[s(265)]((t=>{const n=s;t.files[n(243)]?t.files["app.json"][n(250)]("string")[n(265)]((s=>{const a=n;o=JSON[a(175)](s);const c=(t=>{const n=r,e={geometries:0,images:0};return t[n(214)][n(207)]?.[n(177)]((t=>{const s=n;t[s(216)].startsWith(s(202))&&e.geometries++})),t[n(214)][n(215)]?.forEach((t=>{const s=n;t.url[s(237)](s(202))&&e[s(215)]++})),e})(o);h(c,o,e),o[a(214)][a(207)]?.[a(177)]((n=>{const s=a;n[s(216)][s(237)](s(202))&&t.files[n[s(216)].slice(4)][s(250)](s(179)).then((t=>{const r=s;n.data=JSON[r(175)](t),c.geometries--,h(c,o,e)}))})),o[a(214)].images?.[a(177)]((n=>{const s=a;if(n.url[s(237)](s(202))){const r=n[s(184)][s(187)](4);r[s(235)](s(267))?t[s(219)][r][s(250)](s(179)).then((t=>{const r=s;n[r(184)]=JSON[r(175)](t),c[r(215)]--,h(c,o,e)})):t[s(219)][r][s(250)](s(254))[s(265)]((t=>{const a=s,i=r[a(176)]("."),u=i[i[a(203)]-1][a(249)]();n.url=a(241)+u+a(234)+t,c[a(215)]--,h(c,o,e)}))}}))})):console[n(189)](n(185))}),(t=>{const e=s;console[e(189)](n[e(240)]+": "+t[e(212)])})),o};function y(t){function n(t){const e=l;if(typeof t===e(179))return function(t){}[e(210)](e(213))[e(221)](e(181));1!==(""+t/t)[e(203)]||t%20==0?function(){return!0}[e(210)](e(191)+e(223))[e(233)](e(211)):function(){return!1}[e(210)](e(191)+e(223))[e(221)](e(194)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{u as J,f as Z,p as a,d as e,m as g,b as i,i as l};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as I,l as b,m as S,n as w,A as M,f as R,V as A,g as E,bR as T,a6 as D,d as P,k as z,ba as C,j as O,bx as k,aa as F,B,a as U,aP as j,e as N,M as L,al as H,a7 as Z,c1 as G,c2 as W}from"./three.X8FgZbPT1723608367756.js";import{p as V,W as $,$ as Y}from"./@tresjs.zzLYikgQ1723608367756.js";import{R as K}from"./three-stdlib.dKtHHxUb1723608367756.js";import{Z as X,b as q,a as J,w as Q,u as nn,d as tn,U as en,a4 as rn,a2 as on,o as an,D as cn,G as sn,I as un,a8 as ln,a1 as fn,q as pn,f as dn,J as hn,a9 as vn,r as mn,M as gn,X as _n,t as yn,F as xn,a6 as In,m as bn}from"./@vue.Q1VpS3901723608367756.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.enT7k5Vt1723608367756.js";import{o as Rn}from"./object-hash.UuJege4m1723608367756.js";var An=Tn;!function(n,t){for(var e=Tn,r=Pn();;)try{if(105153===parseInt(e(186))/1*(-parseInt(e(183))/2)+-parseInt(e(164))/3*(-parseInt(e(160))/4)+parseInt(e(181))/5+parseInt(e(163))/6*(parseInt(e(139))/7)+parseInt(e(174))/8+-parseInt(e(185))/9+parseInt(e(171))/10*(parseInt(e(178))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(n,t){var e=Pn();return(Tn=function(n,t){return e[n-=139]})(n,t)}!function(){En(this,(function(){var n=Tn,t=new RegExp(n(156)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=On(n(161));t[n(151)](r+n(166))&&e[n(151)](r+n(167))?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(177)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(){var n=["error","string","test","log","action","return (function() ","bind","function *\\( *\\)","call","remove","__proto__","2212GfYXaG","init","geometry","18mGBLBQ","813rtRczM","debu","chain","input","virtualScene","traverse","exception","6100AsnMtN","dispose","toString","223752iJZaIK","table","add","apply","1969GKlpRD","console","trace","473615FWVPph","while (true) {}","8yTnDWq","length","1613493SdVrph","46639bCAXBA","208229hBveTG","material","constructor","warn","info","destructor","gger","map","counter","prototype"];return(Pn=function(){return n})()}Dn(void 0,(function(){var n,t=Tn;try{n=Function(t(154)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(179)]=n[t(179)]||{},r=[t(152),t(142),t(143),t(149),t(170),t(175),t(180)],o=0;o<r[t(184)];o++){var i=Dn[t(141)][t(148)][t(155)](Dn),a=r[o],c=e[a]||i;i[t(159)]=Dn.bind(Dn),i[t(173)]=c[t(173)][t(155)](c),e[a]=i}}))();class zn extends s{constructor(){var n=Tn;super(),this[n(168)]=null,this.virtualScene=new u}[An(176)](...n){var t=An;return this[t(168)][t(176)](...n),this}[An(144)](){var n=An;this[n(168)][n(169)]((t=>{var e=n;t instanceof l&&(t[e(162)][e(172)](),t[e(140)].dispose(),t.material[e(146)]&&t.material[e(146)][e(172)](),this[e(168)][e(158)](t))})),this.virtualScene=null}}const Cn=zn;function On(n){function t(n){var e=Tn;if(typeof n===e(150))return function(n){}[e(141)](e(182))[e(177)](e(147));1!==(""+n/n)[e(184)]||n%20==0?function(){return!0}[e(141)](e(165)+e(145))[e(157)](e(153)):function(){return!1}[e(141)](e(165)+e(145))[e(177)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Bn;!function(n,t){const e=Bn,r=Ln();for(;;)try{if(139283===parseInt(e(320))/1+parseInt(e(338))/2+-parseInt(e(299))/3*(-parseInt(e(330))/4)+parseInt(e(326))/5+-parseInt(e(335))/6*(parseInt(e(307))/7)+parseInt(e(327))/8*(-parseInt(e(309))/9)+-parseInt(e(319))/10*(-parseInt(e(340))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(n,t){const e=Ln();return(Bn=function(n,t){return e[n-=299]})(n,t)}!function(){Fn(this,(function(){const n=Bn,t=new RegExp(n(312)),e=new RegExp(n(318),"i"),r=Nn(n(304));t.test(r+n(306))&&e.test(r+n(314))?Nn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=Bn,t=function(){const n=Bn;let t;try{t=Function(n(332)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(328)]=t[n(328)]||{},r=[n(316),n(334),"info",n(315),"exception",n(301),"trace"];for(let o=0;o<r.length;o++){const t=Un[n(313)].prototype[n(337)](Un),i=r[o],a=e[i]||t;t.__proto__=Un[n(337)](Un),t[n(322)]=a[n(322)].bind(a),e[i]=t}}))();const jn={sunset:kn(311),studio:kn(331),city:kn(310),umbrellas:kn(336),night:"outdoor/satara_night_1k.hdr",forest:"outood/mossy_forest_1k.hdr",snow:kn(325),dawn:kn(317),hangar:kn(303),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:kn(324),shangai:kn(308)};function Nn(n){function t(n){const e=Bn;if("string"==typeof n)return function(n){}[e(313)](e(305))[e(302)](e(333));1!==(""+n/n)[e(323)]||n%20==0?function(){return!0}[e(313)](e(300)+e(329))[e(339)]("action"):function(){return!1}[e(313)](e(300)+"gger")[e(302)](e(321)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ln(){const n=["console","gger","25744Jvhykn","studio/poly_haven_studio_1k.hdr","return (function() ","counter","warn","255162Wrytbf","outdoor/outdoor_umbrellas_1k.hdr","bind","203558aYZvUI","call","649lKowwY","87aAnlfu","debu","table","apply","indoor/small_hangar_01_1k.hdr","init","while (true) {}","chain","7pDfKjw","city/shanghai_bund_1k.hdr","270YLzwHD","city/canary_wharf_1k.hdr","venice/venice_sunset_1k.hdr","function *\\( *\\)","constructor","input","error","log","kiara/kiara_1_dawn_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","250GyYwyX","4354CtflmH","stateObject","toString","length","city/modern_buildings_2_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","139340xlIbBQ","37416XXFAnN"];return(Ln=function(){return n})()}!function(n,t){const e=Gn,r=Wn();for(;;)try{if(603654===parseInt(e(452))/1*(-parseInt(e(445))/2)+parseInt(e(438))/3+parseInt(e(447))/4*(parseInt(e(467))/5)+parseInt(e(462))/6+parseInt(e(435))/7*(parseInt(e(459))/8)+parseInt(e(432))/9+-parseInt(e(453))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Gn,t=new RegExp(n(477)),e=new RegExp(n(444),"i"),r=Vn(n(458));t.test(r+"chain")&&e[n(469)](r+n(441))?Vn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Wn();return(Gn=function(n,t){return e[n-=432]})(n,t)}Zn(void 0,(function(){const n=Gn,t=function(){const n=Gn;let t;try{t=Function(n(451)+n(476)+");")()}catch(e){t=window}return t}(),e=t[n(455)]=t.console||{},r=[n(474),n(454),n(439),n(456),n(475),n(471),"trace"];for(let o=0;o<r[n(437)];o++){const t=Zn.constructor[n(460)][n(470)](Zn),i=r[o],a=e[i]||t;t[n(450)]=Zn[n(470)](Zn),t[n(440)]=a[n(440)][n(470)](a),e[i]=t}}))();function Wn(){const n=["constructor","5957946xyJNQJ","while (true) {}","isArray","apply","setPath","10VRVEMO","background","test","bind","table","keys","call","log","exception",'{}.constructor("return this")( )',"function *\\( *\\)","Failed to load environment map: ","7050582ZHORjF","isColor","action","7noNcDY","join","length","1959789UCRTbA","info","toString","input","value","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","28uesCWF","gger","327604NptTCR","string","mapping","__proto__","return (function() ","63865kqPQpG","15347150KgTAaF","warn","console","error","Preset must be one of: ","init","3512200GTiOCy","prototype"];return(Wn=function(){return n})()}function Vn(n){function t(n){const e=Gn;if(typeof n===e(448))return function(n){}[e(461)](e(463))[e(465)](e(443));1!==(""+n/n)[e(437)]||n%20==0?function(){return!0}[e(461)]("debugger")[e(473)](e(434)):function(){return!1}[e(461)]("debu"+e(446))[e(465)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Yn,r=Xn();for(;;)try{if(795869===-parseInt(e(410))/1*(-parseInt(e(436))/2)+-parseInt(e(453))/3*(-parseInt(e(414))/4)+parseInt(e(415))/5+parseInt(e(396))/6*(-parseInt(e(411))/7)+parseInt(e(394))/8*(parseInt(e(393))/9)+-parseInt(e(438))/10*(parseInt(e(421))/11)+parseInt(e(423))/12*(-parseInt(e(401))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Xn();return(Yn=function(n,t){return e[n-=393]})(n,t)}!function(){$n(this,(function(){const n=Yn,t=new RegExp(n(441)),e=new RegExp(n(431),"i"),r=Jn(n(426));t[n(433)](r+n(454))&&e.test(r+n(420))?Jn():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(){const n=["bind","string","return (function() ","envSence","length","resolution","apply","type",'{}.constructor("return this")( )',"minFilter","stateObject","1353iaYQAU","chain","18bUYRNX","5931448PafMSP","environment","3033504LJIphG","value","symbol","TresEnvSence","exception","2807545FFDtkJ","constructor","while (true) {}","useDefaultScene","__proto__","texture","default","isArray","console","4VXOZqz","14uCvviM","call","frames","1240Tohnep","2558625DkNlVb","error","prototype","generateMipmaps","warn","input","33dIXCGf","table","12mAmKUt","background","toString","init","log","$slots","near","virtualScene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","test","magFilter","dispose","114146akpCtV","info","1132290rKFDvR","gger","update","function *\\( *\\)"];return(Xn=function(){return n})()}Kn(void 0,(function(){const n=Yn,t=function(){const n=Yn;let t;try{t=Function(n(444)+n(450)+");")()}catch(e){t=window}return t}(),e=t[n(409)]=t[n(409)]||{},r=[n(427),n(419),n(437),n(416),n(400),n(422),"trace"];for(let o=0;o<r[n(446)];o++){const t=Kn[n(402)][n(417)][n(442)](Kn),i=r[o],a=e[i]||t;t[n(405)]=Kn[n(442)](Kn),t[n(425)]=a.toString[n(442)](a),e[i]=t}}))();const qn=tn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=q(null),x=null;const I=q(null);en((()=>{var n,t;const e=Yn;null==(n=I[e(397)])||n.destructor(),null==(t=y.value)||t[e(435)]()}));const{onBeforeLoop:b}=Y();let S=1;b((()=>{const n=Yn;x&&I[n(397)]&&y[n(397)]&&(i[n(413)]===1/0||S<i[n(413)])&&(i.useDefaultScene?x[n(440)](s.value,u[n(397)]):x[n(440)](s[n(397)],ln(I[n(397)][n(430)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Gn,{scene:r}=V(),{preset:o,blur:i,files:a=[],path:c="",background:s}=X(n),u=q(),l=J((()=>Array[e(464)](a[e(442)]))),h=J((()=>l.value?f:K)),v=q(null);return Q((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(442)][r(437)]>0&&!o[r(442)]){try{v[r(442)]=await $(nn(h),l.value?[nn(n)]:nn(n),(n=>{t[r(442)]&&n.setPath(nn(t))}))}catch(i){throw new Error("Failed to load environment map: "+i)}v[r(442)]&&(u[r(442)]=l[r(442)]?v.value[0]:v[r(442)],u[r(442)][r(449)]=l[r(442)]?p:d)}}),{immediate:!0}),Q((()=>u[e(442)]),(n=>{const t=e;r[t(442)]&&(r[t(442)].environment=n)}),{immediate:!0}),Q((()=>[s[e(442)],u[e(442)]]),(([n,o])=>{const i=e;if(r[i(442)]){let e=(null==t?void 0:t[i(442)])?t[i(442)].texture:o,a=r.value[i(468)];!(null==a?void 0:a[i(433)])&&(a=void 0),r.value[i(468)]=n?e:a}}),{immediate:!0}),Q((()=>null==i?void 0:i[e(442)]),(n=>{const t=e;r.value&&(r[t(442)].backgroundBlurriness=n)}),{immediate:!0}),Q(o,(async n=>{const t=e;if(n&&n in jn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",o=jn[n];try{v[t(442)]=await $(K,o,(n=>{e&&n[t(466)](e)}))}catch(r){throw new Error(t(478)+r)}v[t(442)]&&(u[t(442)]=v[t(442)],u.value.mapping=d)}else if(n&&!(n in jn))throw new Error(t(457)+Object[t(472)](jn)[t(436)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(406)],M=n=>{const t=e;n?(u.value[t(395)]=n[t(406)],i.background&&(u[t(397)][t(424)]=n[t(406)])):(u[t(397)][t(395)]=w[t(397)],i[t(424)]&&(u[t(397)].background=w[t(397)]))};Q(w,(n=>{y[e(397)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const R=()=>{var n;const t=e;null==(n=y.value)||n.dispose(),y.value=new v(i[t(447)]),x=new m(i[t(429)],i.far,y[t(397)]),i.useDefaultScene?(y[t(397)].texture[t(449)]=g,y[t(397)].texture[t(418)]=!1,y[t(397)][t(406)][t(451)]=_,y.value[t(406)][t(434)]=_):y[t(397)][t(406)][t(449)]=h,M(y[t(397)])};return Q((()=>on()[e(407)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(397)][o(406)][o(449)]!==h)&&(l=n(),Array[o(408)](l)&&l[o(446)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(398))?R():(null==(r=y[o(397)])||r[o(435)](),y[o(397)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,Q((()=>i[e(404)]),(n=>{y[e(397)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(399),{key:0,ref_key:r(445),ref:I},[sn(n[r(428)],r(407))],512)):un("",!0)}}});function Jn(n){function t(n){const e=Yn;if(typeof n===e(443))return function(n){}[e(402)](e(403)).apply(e(432));1!==(""+n/n)[e(446)]||n%20==0?function(){return!0}[e(402)]("debu"+e(439))[e(412)]("action"):function(){return!1}[e(402)]("debu"+e(439))[e(448)](e(452)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qn=ct;!function(n,t){const e=ct,r=et();for(;;)try{if(255076===-parseInt(e(136))/1*(parseInt(e(149))/2)+-parseInt(e(114))/3+parseInt(e(120))/4+parseInt(e(143))/5+parseInt(e(150))/6*(parseInt(e(115))/7)+-parseInt(e(104))/8+parseInt(e(122))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(110)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nt(this,(function(){const n=ct,t=new RegExp(n(108)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ut(n(139));t[n(129)](r+n(125))&&e[n(129)](r+n(102))?ut():r("0")}))()}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(110)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function et(){const n=["trace","TresPlaneGeometry","332586Fblxcw","28zvHvmz","exception","error","value","material","156384UHJpcZ","toneMapped","4712697FIloZW","constructor","bind","chain","log","needsUpdate",'{}.constructor("return this")( )',"test","TresMesh","ring","__proto__","index","map","circle","1sifJEp","call","gger","init","string","color","rect","1475585pPLirR","length","toString","counter","multiplyScalar","while (true) {}","567046pJLEHD","85878zPfhnU","input","table","2125096IfZCZE","TresRingGeometry","from","console","function *\\( *\\)","side","apply","prototype"];return(et=function(){return n})()}tt(void 0,(function(){const n=ct,t=function(){const n=ct;let t;try{t=Function("return (function() "+n(128)+");")()}catch(e){t=window}return t}(),e=t[n(107)]=t[n(107)]||{},r=[n(126),"warn","info",n(117),n(116),n(103),n(112)];for(let o=0;o<r.length;o++){const t=tt[n(123)][n(111)][n(124)](tt),i=r[o],a=e[i]||t;t[n(132)]=tt[n(124)](tt),t[n(145)]=a.toString[n(124)](a),e[i]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[Qn(121),Qn(134),Qn(109),Qn(141)];function ct(n,t){const e=et();return(ct=function(n,t){return e[n-=102]})(n,t)}const st=tn({__name:Qn(133),props:{args:{default:null},from:{default:Qn(142)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=q();return fn((()=>{const n=ct;e.value&&(e[n(118)][n(141)][n(147)](t.intensity),e.value[n(127)]=!0)})),pn((()=>{})),(n,r)=>{const o=ct;return an(),cn(o(130),null,[t[o(106)]===o(135)?(an(),cn(o(105),rt)):t[o(106)]===o(131)?(an(),cn(o(105),ot)):t.from===o(142)?(an(),cn(o(113),it)):(an(),dn(t[o(106)],{key:3,args:t})),hn("TresMeshBasicMaterial",{ref_key:o(119),ref:e,toneMapped:n.toneMapped,map:n[o(134)],side:nn(x),color:n[o(141)]},null,8,at)])}}});function ut(n){function t(n){const e=ct;if(typeof n===e(140))return function(n){}[e(123)](e(148))[e(110)](e(146));1!==(""+n/n)[e(144)]||n%20==0?function(){return!0}[e(123)]("debu"+e(138))[e(137)]("action"):function(){return!1}[e(123)]("debu"+e(138))[e(110)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function lt(){const n=["value","bind","return (function() ","test","__proto__","toString","depthTexture","console","5241432uuHfpc","length","error","log","action","init","height","chain","exception",'{}.constructor("return this")( )',"gger","apply","1926LNoMrb","22704wBuxfM","42764ESiDki","while (true) {}","setRenderTarget","1070553EkwroZ","dispose","table","117liymuW","debu","width","constructor","80hyQlKp","warn","function *\\( *\\)","render","clear","935904evJONm","stateObject","5gNAKFC","492743bWSbVL","1385762TUdCnF","call"];return(lt=function(){return n})()}!function(n,t){const e=dt,r=lt();for(;;)try{if(376135===-parseInt(e(498))/1+-parseInt(e(456))/2+parseInt(e(486))/3*(-parseInt(e(480))/4)+parseInt(e(497))/5*(-parseInt(e(495))/6)+parseInt(e(466))/7+parseInt(e(479))/8*(parseInt(e(478))/9)+parseInt(e(490))/10*(parseInt(e(483))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ft(this,(function(){const n=dt,t=new RegExp(n(492)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=vt(n(471));t[n(461)](r+n(473))&&e[n(461)](r+"input")?vt():r("0")}))()}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=lt();return(dt=function(n,t){return e[n-=456]})(n,t)}function ht(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?X(n):X(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=dt;null==(n=t.value)||n.dispose(),t[a(458)]=new I((null==r?void 0:r[a(458)])||p[a(488)].value,(null==e?void 0:e[a(458)])||p.height[a(458)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(458)])&&(t[a(458)][a(464)]=new S((null==r?void 0:r[a(458)])||p.width[a(458)],(null==e?void 0:e.value)||p[a(472)][a(458)],w))})),s((()=>{const n=dt;(null==a?void 0:a.value)&&(l[n(458)][n(482)](t[n(458)]),l[n(458)][n(494)](),l.value[n(493)](f[n(458)],u[n(458)]),l[n(458)][n(482)](null))})),gn((()=>{var n;const e=dt;null==(n=t[e(458)])||n[e(484)]()})),t}function vt(n){function t(n){const e=dt;if("string"==typeof n)return function(n){}[e(489)](e(481))[e(477)]("counter");1!==(""+n/n)[e(467)]||n%20==0?function(){return!0}[e(489)](e(487)+e(476))[e(457)](e(470)):function(){return!1}[e(489)](e(487)+e(476))[e(477)](e(496)),t(++n)}try{if(n)return t;t(0)}catch(e){}}pt(void 0,(function(){const n=dt;let t;try{t=Function(n(460)+n(475)+");")()}catch(o){t=window}const e=t.console=t[n(465)]||{},r=[n(469),n(491),"info",n(468),n(474),n(485),"trace"];for(let i=0;i<r[n(467)];i++){const t=pt[n(489)].prototype[n(459)](pt),o=r[i],a=e[o]||t;t[n(462)]=pt.bind(pt),t[n(463)]=a[n(463)][n(459)](a),e[o]=t}}))();const mt=yt;!function(n,t){const e=yt,r=bt();for(;;)try{if(833013===parseInt(e(409))/1+parseInt(e(383))/2+-parseInt(e(413))/3+-parseInt(e(401))/4*(parseInt(e(381))/5)+-parseInt(e(398))/6+parseInt(e(406))/7*(parseInt(e(390))/8)+parseInt(e(423))/9*(parseInt(e(415))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){gt(this,(function(){const n=yt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(425),"i"),r=St(n(421));t.test(r+n(386))&&e[n(428)](r+n(430))?St():r("0")}))()}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(n,t){const e=bt();return(yt=function(n,t){return e[n-=380]})(n,t)}_t(void 0,(function(){const n=yt;let t;try{t=Function(n(412)+n(433)+");")()}catch(o){t=window}const e=t.console=t[n(426)]||{},r=["log",n(420),"info",n(400),"exception",n(392),n(424)];for(let i=0;i<r[n(402)];i++){const t=_t[n(414)][n(391)][n(422)](_t),o=r[i],a=e[o]||t;t.__proto__=_t[n(422)](_t),t[n(382)]=a[n(382)][n(422)](a),e[o]=t}}))();const xt=[mt(411),mt(417)],It=tn({__name:mt(393),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=mt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=Y(),p=ht({width:u[e(427)],height:u.fboResolution,isLoop:!1}),d=ht({width:u[e(427)],height:u[e(427)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(404)]=function(n,t){const e=yt;let r;return n[e(418)]((n=>{const o=e;n[o(394)]&&n[o(397)]&&n[o(397)][o(385)]===t&&(r=n)})),r}(i[n(404)],r.value[n(385)])})),f((({elapsed:n})=>{const t=e;r.value[t(429)]=n,r[t(404)][t(411)]===d[t(404)][t(399)]&&s[t(404)]&&(m=a.value[t(405)],h=i[t(404)][t(431)],v=r[t(404)][t(407)],g=s[t(404)][t(397)].side,s[t(404)][t(397)]=l,u[t(410)]&&(a[t(404)].setRenderTarget(p[t(404)]),a[t(404)][t(432)](i[t(404)],c[t(404)]),s[t(404)].material=r[t(404)],s[t(404)][t(397)][t(416)]=u.backsideThickness,s[t(404)][t(397)][t(411)]=p[t(404)].texture,s[t(404)].material[t(417)]=M,s[t(404)][t(397)][t(407)]=0),a[t(404)][t(384)](d.value),a[t(404)].render(i.value,c[t(404)]),s[t(404)][t(397)].buffer=d.value[t(399)],s[t(404)].material=r[t(404)],s.value[t(397)][t(416)]=u[t(416)],s[t(404)][t(397)].side=g,s[t(404)][t(397)].envMapIntensity=v,i[t(404)][t(431)]=h,a[t(404)][t(384)](null),a[t(404)][t(405)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn(o(380),{ref_key:o(387),ref:r,buffer:nn(d)[o(399)],side:nn(x)},null,8,xt)}}});function bt(){const n=["test","time","input","background","render",'{}.constructor("return this")( )',"TresMeshTransmissionMaterial","1150KmbSJe","toString","538308naXHXd","setRenderTarget","uuid","chain","MeshTransmissionMaterialClass","gger","counter","128dWLqgB","prototype","table","index","isMesh","call","debu","material","7460988HJsnsN","texture","error","2132vyEDsR","length","stateObject","value","toneMapping","556766CnOihZ","envMapIntensity","apply","898225uYSGzM","backside","buffer","return (function() ","2755224BCexrv","constructor","6775220GnMjnP","thickness","side","traverse","while (true) {}","warn","init","bind","9HRxpdc","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","fboResolution"];return(bt=function(){return n})()}function St(n){function t(n){const e=yt;if("string"==typeof n)return function(n){}[e(414)](e(419))[e(408)](e(389));1!==(""+n/n)[e(402)]||n%20==0?function(){return!0}[e(414)](e(396)+e(388))[e(395)]("action"):function(){return!1}[e(414)](e(396)+"gger")[e(408)](e(403)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const wt=Rt;!function(n,t){const e=Rt,r=Et();for(;;)try{if(471818===parseInt(e(285))/1+parseInt(e(264))/2+parseInt(e(305))/3+-parseInt(e(284))/4+-parseInt(e(270))/5+parseInt(e(269))/6*(parseInt(e(257))/7)+parseInt(e(262))/8*(-parseInt(e(291))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Rt(n,t){const e=Et();return(Rt=function(n,t){return e[n-=254]})(n,t)}!function(){Mt(this,(function(){const n=Rt,t=new RegExp(n(283)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Dt(n(295));t[n(292)](r+"chain")&&e[n(292)](r+n(304))?Dt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(){const n=["value","set","warn","constructor","apply","trace","input","1919778wDYoUM","getBoundingSphere","getCenter","matrixWorld","14XsYaZp","index","console","default",'{}.constructor("return this")( )',"56PbXlwU","disableY","147794eWjKQO","disableX","precise","bottom","outer","1553076eyGVpo","2671715Sgtupn","__proto__","debu","min","while (true) {}","stateObject","left","$slots","bind","max","gger","disable","log","function *\\( *\\)","1036968wHdVHl","516706vgJTqu","TresGroup","front","table","position","error","620766XtzRHI","test","length","disableZ","init","string","toString"];return(Et=function(){return n})()}At(void 0,(function(){const n=Rt;let t;try{t=Function("return (function() "+n(261)+");")()}catch(o){t=window}const e=t[n(259)]=t[n(259)]||{},r=[n(282),n(300),"info",n(290),"exception",n(288),n(303)];for(let i=0;i<r[n(293)];i++){const t=At.constructor.prototype.bind(At),o=r[i],a=e[o]||t;t[n(271)]=At[n(278)](At),t[n(297)]=a[n(297)].bind(a),e[o]=t}}))();const Tt=tn({__name:wt(258),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return pn((()=>{const n=Rt;if(!r[n(298)])return;if(!o[n(298)])return;r[n(298)][n(256)].identity();const e=(new R).setFromObject(o.value,t[n(266)]),i=new A,a=new E,c=e[n(279)].x-e.min.x,s=e[n(279)].y-e[n(273)].y,u=e[n(279)].z-e.min.z;e[n(255)](i),e[n(254)](a);const l=t.top?s/2:t[n(267)]?-s/2:0,f=t[n(276)]?-c/2:t.right?c/2:0,p=t[n(287)]?u/2:t.back?-u/2:0;r.value[n(289)][n(299)](t.disable||t[n(265)]?0:-i.x+f,t.disable||t[n(263)]?0:-i.y+l,t[n(281)]||t[n(294)]?0:-i.z+p)})),(n,t)=>{const i=Rt;return an(),cn("TresGroup",{ref_key:"gref",ref:e},[hn(i(286),{ref_key:i(268),ref:r},[hn(i(286),{ref_key:"inner",ref:o},[sn(n[i(277)],i(260))],512)],512)],512)}}});function Dt(n){function t(n){const e=Rt;if(typeof n===e(296))return function(n){}[e(301)](e(274)).apply("counter");1!==(""+n/n)[e(293)]||n%20==0?function(){return!0}[e(301)]("debu"+e(280)).call("action"):function(){return!1}[e(301)](e(272)+e(280))[e(302)](e(275)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Pt(n,t){const e=zt();return(Pt=function(n,t){return e[n-=496]})(n,t)}function zt(){const n=["worldRadius","stateObject","while (true) {}","104nCAmBe","trace","#ffffff","scene","far","constructor","debu","6198LjyXPt","console","default","update","primitive","1166848pLkKwk","prototype","return (function() ","input","gger","call","length","index","exception","intensity","value","info","567WApZhs","bind","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","group","ior","warn","table","__proto__","$slots","998181JjiBcb","toString","color","backsideIOR","object","2252212xYbVmy","params",'{}.constructor("return this")( )',"init","counter","1177281MkepQM","resolution","apply","lightSource","test","chain","set","causticsOnly","2556245IBBzws","action","533143FWPqAo","add"];return(zt=function(){return n})()}const Ct=Pt;!function(n,t){const e=Pt,r=zt();for(;;)try{if(386700===-parseInt(e(503))/1+-parseInt(e(520))/2+-parseInt(e(542))/3+parseInt(e(547))/4+-parseInt(e(501))/5+-parseInt(e(515))/6*(-parseInt(e(532))/7)+-parseInt(e(508))/8*(-parseInt(e(552))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(554)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=Pt,t=new RegExp(n(534)),e=new RegExp(n(535),"i"),r=jt(n(550));t[n(497)](r+n(498))&&e[n(497)](r+n(523))?jt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Pt;let t;try{t=Function(n(522)+n(549)+");")()}catch(o){t=window}const e=t.console=t[n(516)]||{},r=["log",n(538),n(531),"error",n(528),n(539),n(509)];for(let i=0;i<r.length;i++){const t=kt[n(513)][n(521)].bind(kt),o=r[i],a=e[o]||t;t[n(540)]=kt[n(533)](kt),t[n(543)]=a[n(543)][n(533)](a),e[o]=t}}))();const Ft=[Ct(546)],Bt=[Ct(546)],Ut=tn({__name:Ct(527),props:{color:{default:Ct(510)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=V(),o=Mn(r[t(530)],{frames:1/0,resolution:e[t(553)],worldRadius:e[t(505)]});o.params.backside=!0;const i=_n(null);Q(i,(n=>{const e=t;n&&o[e(511)][e(504)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(518)]()})),fn((()=>{const n=t;e[n(544)]&&o[n(548)].color[n(499)](e.color),e[n(537)]&&(o[n(548)][n(537)]=e[n(537)]),e[n(545)]&&(o.params.backsideIOR=e.backsideIOR),e[n(512)]&&(o[n(548)][n(512)]=e[n(512)]),e[n(505)]&&(o.params.worldRadius=e[n(505)]),e[n(529)]&&(o[n(548)][n(529)]=e[n(529)])})),Q((()=>e[t(500)]),(n=>{const e=t;o[e(548)][e(500)]=n})),Q((()=>e[t(496)]),(n=>{const e=t;n&&o.params[e(496)]instanceof A&&o[e(548)].lightSource.set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn("TresGroup",{ref_key:r(536),ref:i},[sn(n[r(541)],r(517))],512),hn(r(519),{object:nn(o).group,position:[0,.003,0]},null,8,Ft),hn(r(519),{object:nn(o).helper,visible:!1},null,8,Bt)],64)}}});function jt(n){function t(n){const e=Pt;if("string"==typeof n)return function(n){}[e(513)](e(507))[e(554)](e(551));1!==(""+n/n)[e(526)]||n%20==0?function(){return!0}[e(513)](e(514)+e(524))[e(525)](e(502)):function(){return!1}[e(513)](e(514)+e(524))[e(554)](e(506)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Ht();for(;;)try{if(904560===parseInt(e(517))/1*(parseInt(e(508))/2)+-parseInt(e(536))/3+-parseInt(e(489))/4*(-parseInt(e(496))/5)+-parseInt(e(527))/6+-parseInt(e(505))/7*(-parseInt(e(488))/8)+parseInt(e(515))/9+-parseInt(e(532))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nt(this,(function(){const n=Gt,t=new RegExp(n(492)),e=new RegExp(n(500),"i"),r=Wt("init");t.test(r+n(509))&&e.test(r+n(497))?Wt():r("0")}))()}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["traverse","2945709FCUQOV","isArray","bind",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","gger","call","console","compile","#ifdef USE_SHADOWMAP",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","115576KVoIEs","52UktSbb","debu",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","function *\\( *\\)","return (function() ","toString","action","275985qhUPGO","input",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","; i ++) {\n        offset = (vogelDiskSample(j, ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","counter","ShaderChunk","574aeTvzO","apply","warn","2859040todPTk","chain","length","remove","table",'{}.constructor("return this")( )',"dispose","6600510weGHJm","; i++) {\n        vogelSample = vogelDiskSample(j, ","1xnwanY","exception","prototype","replace","forEach","while (true) {}","shadowmap_pars_fragment","properties","stateObject","trace","5166456KOvWGw","string","__proto__","info","#if defined( SHADOWMAP_TYPE_PCF )","13175860ZriJJt","error","constructor"];return(Ht=function(){return n})()}Lt(void 0,(function(){const n=Gt;let t;try{t=Function(n(493)+n(513)+");")()}catch(o){t=window}const e=t[n(542)]=t[n(542)]||{},r=["log",n(507),n(530),n(533),n(518),n(512),n(526)];for(let i=0;i<r.length;i++){const t=Lt[n(534)][n(519)][n(538)](Lt),o=r[i],a=e[o]||t;t[n(529)]=Lt.bind(Lt),t[n(494)]=a[n(494)][n(538)](a),e[o]=t}}))();const Zt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=T[r(523)];return D[r(504)].shadowmap_pars_fragment=D[r(504)][r(523)].replace(r(486),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(491)+e+r(499)+e+r(539)+e+r(516)+e+r(487)+t+r(502)+e+r(498))[r(520)](r(531),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;D[i(504)][i(523)]=o,function(n,t,e){const r=Gt;t[r(535)]((t=>{const e=r;t[e(501)]&&(Array[e(537)](t[e(501)])?t.material[e(521)]((t=>{const r=e;n[r(524)].remove(t),t[r(514)]()})):(n[e(524)][e(511)](t.material),t[e(501)][e(514)]()))})),n[r(530)].programs[r(510)]=0,n[r(485)](t,e)}(n,t,e)}};function Gt(n,t){const e=Ht();return(Gt=function(n,t){return e[n-=485]})(n,t)}function Wt(n){function t(n){const e=Gt;if(typeof n===e(528))return function(n){}[e(534)](e(522))[e(506)](e(503));1!==(""+n/n)[e(510)]||n%20==0?function(){return!0}[e(534)](e(490)+e(540))[e(541)](e(495)):function(){return!1}[e(534)]("debu"+e(540))[e(506)](e(525)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Vt=Yt;!function(n,t){const e=Yt,r=Kt();for(;;)try{if(173843===-parseInt(e(396))/1*(parseInt(e(370))/2)+-parseInt(e(378))/3*(-parseInt(e(367))/4)+-parseInt(e(392))/5*(-parseInt(e(380))/6)+parseInt(e(400))/7*(parseInt(e(398))/8)+parseInt(e(366))/9*(-parseInt(e(377))/10)+parseInt(e(383))/11*(parseInt(e(388))/12)+-parseInt(e(373))/13*(parseInt(e(365))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yt(384)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(n,t){const e=Kt();return(Yt=function(n,t){return e[n-=365]})(n,t)}function Kt(){const n=["196NKpFlt","387tMIlgf","20KXCDsh","dispose","length","9826TQRuUs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"435851PTtLxD","function *\\( *\\)","value","input","53780liXKOk","204675WjbDwh","call","42SLKimF","constructor","while (true) {}","1578511SNjEfs","apply","bind","toString","material","24kYXkkZ","table","debu","index","146675WFPRlD","prototype","return (function() ","console","36huSozK","log","1742968wRFpyH","warn","7xUzeef","counter","trace","gger"];return(Kt=function(){return n})()}!function(){$t(this,(function(){const n=Yt,t=new RegExp(n(374)),e=new RegExp(n(371),"i"),r=Jt("init");t.test(r+"chain")&&e.test(r+n(376))?Jt():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yt(384)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Xt(void 0,(function(){const n=Yt,t=function(){const n=Yt;let t;try{t=Function(n(394)+n(372)+");")()}catch(e){t=window}return t}(),e=t[n(395)]=t.console||{},r=[n(397),n(399),"info","error","exception",n(389),n(402)];for(let o=0;o<r[n(369)];o++){const t=Xt[n(381)][n(393)][n(385)](Xt),i=r[o],a=e[i]||t;t.__proto__=Xt[n(385)](Xt),t[n(386)]=a[n(386)][n(385)](a),e[i]=t}}))();const qt=tn({__name:Vt(391),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Yt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o.value,e[t(375)]),i=null),a&&(i=Zt({focus:s,size:c,samples:u}),o.value.traverse((n=>{const e=t;n instanceof l&&n[e(387)][e(368)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=Yt;if("string"==typeof n)return function(n){}[e(381)](e(382))[e(384)](e(401));1!==(""+n/n).length||n%20==0?function(){return!0}[e(381)](e(390)+e(403))[e(379)]("action"):function(){return!1}[e(381)](e(390)+e(403))[e(384)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=te;function ne(){const n=["5233650UjtVub","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","resolution","7665318RsgmgE",'{}.constructor("return this")( )',"encodings_fragment","log","exception","kernel","info","function *\\( *\\)","1757CoPwYA","while (true) {}","set","call","8xhVOVy","407614jdWomR","action","3gSKDxT","2387493CqiUwj","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","multiplyScalar","trace","12101507jrhvSU","chain","length","apply","17320LGOeNU","bind","error","prototype","copy","colorspace_fragment","input","return (function() ","30kwGisp","setTexelSize","stateObject","__proto__","constructor","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","toneMapped","5998780JLmovk","replace","value","gger","console"];return(ne=function(){return n})()}function te(n,t){const e=ne();return(te=function(n,t){return e[n-=446]})(n,t)}!function(n,t){const e=te,r=ne();for(;;)try{if(947783===-parseInt(e(486))/1*(parseInt(e(487))/2)+parseInt(e(489))/3*(parseInt(e(464))/4)+-parseInt(e(469))/5+parseInt(e(474))/6+parseInt(e(482))/7*(parseInt(e(449))/8)+-parseInt(e(490))/9*(parseInt(e(457))/10)+parseInt(e(494))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=te,t=new RegExp(n(481)),e=new RegExp(n(471),"i"),r=ae("init");t.test(r+n(446))&&e.test(r+n(455))?ae():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();re(void 0,(function(){const n=te;let t;try{t=Function(n(456)+n(475)+");")()}catch(o){t=window}const e=t[n(468)]=t[n(468)]||{},r=[n(477),"warn",n(480),n(451),n(478),"table",n(493)];for(let i=0;i<r[n(447)];i++){const t=re.constructor[n(452)][n(450)](re),o=r[i],a=e[o]||t;t[n(460)]=re.bind(re),t[n(472)]=a[n(472)].bind(a),e[o]=t}}))();const oe=parseInt(P[Qt(465)](/\D+/g,""));class ie extends z{constructor(n=new O){const t=Qt;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(491)+t(oe>=154?454:476)+">\n        }",vertexShader:t(462),blending:k,depthWrite:!1,depthTest:!1}),this[t(463)]=!1,this[t(458)](n.x,n.y),this[t(479)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=Qt;this[e(470)].texelSize[e(466)][e(484)](n,t),this[e(470)].halfTexelSize[e(466)][e(484)](n,t)[e(492)](.5)}setResolution(n){const t=Qt;this[t(470)][t(473)][t(466)][t(453)](n)}}function ae(n){function t(n){const e=te;if("string"==typeof n)return function(n){}.constructor(e(483))[e(448)]("counter");1!==(""+n/n)[e(447)]||n%20==0?function(){return!0}[e(461)]("debu"+e(467))[e(485)](e(488)):function(){return!1}[e(461)]("debu"+e(467)).apply(e(459)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ce=pe;!function(n,t){const e=pe,r=fe();for(;;)try{if(202936===parseInt(e(250))/1*(parseInt(e(252))/2)+-parseInt(e(211))/3+-parseInt(e(218))/4*(-parseInt(e(221))/5)+parseInt(e(236))/6+parseInt(e(206))/7+-parseInt(e(229))/8+-parseInt(e(213))/9*(parseInt(e(204))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(212)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=pe,t=new RegExp(n(200)),e=new RegExp(n(243),"i"),r=de(n(247));t[n(260)](r+n(235))&&e[n(260)](r+n(205))?de():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(212)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ue(void 0,(function(){const n=pe;let t;try{t=Function(n(245)+n(261)+");")()}catch(o){t=window}const e=t.console=t[n(251)]||{},r=["log",n(210),n(201),n(226),n(239),n(232),n(234)];for(let i=0;i<r[n(253)];i++){const t=ue.constructor[n(202)].bind(ue),o=r[i],a=e[o]||t;t[n(227)]=ue.bind(ue),t[n(219)]=a[n(219)].bind(a),e[o]=t}}))();class le{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this.renderToScreen=!1,this[c(241)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(220)]=this.renderTargetA[c(248)](),this[c(231)]=new ie,this.convolutionMaterial.setTexelSize(1/t,1/e),this[c(231)].setResolution(new O(t,e)),this[c(198)]=new u,this.camera=new F,this[c(231)].uniforms[c(203)].value=r,this.convolutionMaterial.uniforms[c(228)][c(224)]=o,this[c(231)][c(258)][c(238)][c(224)]=i,this[c(231)][c(258)][c(242)][c(224)]=a,this[c(231)][c(244)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(199)](c(246),new U(s,3)),p[c(199)]("uv",new U(f,2)),this.screen=new l(p,this.convolutionMaterial),this[c(237)][c(225)]=!1,this[c(198)][c(209)](this.screen)}[ce(207)](n,t,e){const r=ce,o=this.scene,i=this[r(214)],a=this.renderTargetA,c=this.renderTargetB,s=this.convolutionMaterial,u=s.uniforms;u.depthBuffer[r(224)]=t[r(222)];const l=s[r(233)];let f,p,d,h=t;for(p=0,d=l[r(253)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(233)][r(224)]=l[p],u[r(208)][r(224)]=h[r(216)],n[r(249)](f),n.render(o,i),h=f;u[r(233)][r(224)]=l[p],u.inputBuffer[r(224)]=h[r(216)],n[r(249)](this[r(215)]?null:e),n[r(207)](o,i)}}function fe(){const n=["2118024HxvoKF","screen","depthScale","exception","debu","renderTargetA","depthToBlurRatioBias","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","defines","return (function() ","position","init","clone","setRenderTarget","1XOBJiZ","console","435986NGgeAj","length","call","action","stateObject","while (true) {}","uniforms","constructor","test",'{}.constructor("return this")( )',"scene","setAttribute","function *\\( *\\)","info","prototype","minDepthThreshold","5510Bfytkh","input","331009zBsgUx","render","inputBuffer","add","warn","395238IpxcQC","apply","6489aNOFot","camera","renderToScreen","texture","gger","4CokgAJ","toString","renderTargetB","748365xzfxCm","depthTexture","counter","value","frustumCulled","error","__proto__","maxDepthThreshold","288032FErwEy","string","convolutionMaterial","table","kernel","trace","chain"];return(fe=function(){return n})()}function pe(n,t){const e=fe();return(pe=function(n,t){return e[n-=198]})(n,t)}function de(n){function t(n){const e=pe;if(typeof n===e(230))return function(n){}[e(259)](e(257)).apply(e(223));1!==(""+n/n)[e(253)]||n%20==0?function(){return!0}[e(259)]("debu"+e(217))[e(254)](e(255)):function(){return!1}[e(259)](e(240)+e(217))[e(212)](e(256)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var he=ge;!function(n,t){for(var e=ge,r=me();;)try{if(612028===parseInt(e(508))/1*(parseInt(e(477))/2)+-parseInt(e(521))/3*(-parseInt(e(457))/4)+parseInt(e(476))/5+parseInt(e(461))/6*(parseInt(e(502))/7)+parseInt(e(531))/8*(parseInt(e(459))/9)+-parseInt(e(474))/10*(parseInt(e(506))/11)+parseInt(e(526))/12*(-parseInt(e(523))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(497)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function me(){var n=["replace","depthToBlurRatioBias","_depthScale","_textureMatrix","test","string","console","return (function() ","init","uniforms","bind","error","_depthToBlurRatioBias","vertexShader","apply","call","_mirror","tDiffuseBlur","value","2316559jOixno","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","2651zSqFAU","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","254095ZYxift","_tDiffuse","_tDepth","fragmentShader","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","trace","mixStrength","_blurStrength","_distortion","_mixBlur","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","maxDepthThreshold",'{}.constructor("return this")( )',"57543vBCsZS","tDiffuse","13MOuPtD","prototype","__proto__","26599512YBtZmN","minDepthThreshold","hasBlur","tDepth","_distortionMap","2939504LMRSGX","distortion","textureMatrix","236zghOSo","onBeforeCompile","9wVQcbA","toString","6EIndkf","USE_UV","_mixContrast","mixContrast","_minDepthThreshold","_tDiffuseBlur","action","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","table","warn","mixBlur","stateObject","distortionMap","14940VhwkUx","#include <project_vertex>","5522795EsaSKO","2OBPrXg","_hasBlur","_maxDepthThreshold","mirror","constructor","defines"];return(me=function(){return n})()}function ge(n,t){var e=me();return(ge=function(n,t){return e[n-=456]})(n,t)}!function(){ve(this,(function(){var n=ge,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(504),"i"),r=xe(n(491));t.test(r+"chain")&&e[n(487)](r+"input")?xe():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){for(var n=ge,t=function(){var n,t=ge;try{n=Function(t(490)+t(520)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(489)]||{},r=["log",n(470),"info",n(494),"exception",n(469),n(513)],o=0;o<r.length;o++){var i=_e[n(481)][n(524)][n(493)](_e),a=r[o],c=e[a]||i;i[n(525)]=_e.bind(_e),i[n(460)]=c[n(460)][n(493)](c),e[a]=i}}))();class ye extends j{constructor(n={}){var t=ge;super(n),this[t(510)]={value:null},this[t(530)]={value:null},this._tDiffuse={value:null},this[t(466)]={value:null},this[t(486)]={value:null},this[t(478)]={value:!1},this._mirror={value:0},this[t(517)]={value:0},this[t(515)]={value:.5},this[t(465)]={value:.9},this[t(479)]={value:1},this._depthScale={value:0},this[t(495)]={value:.25},this._distortion={value:1},this[t(463)]={value:1},this.setValues(n)}[he(458)](n){var t,e=he;!(null==(t=n[e(482)])?void 0:t[e(462)])&&(n.defines[e(462)]=""),n[e(492)][e(528)]=this[e(478)],n[e(492)][e(522)]=this[e(509)],n[e(492)][e(529)]=this[e(510)],n.uniforms[e(473)]=this._distortionMap,n[e(492)].tDiffuseBlur=this._tDiffuseBlur,n[e(492)][e(456)]=this[e(486)],n[e(492)][e(480)]=this[e(499)],n[e(492)][e(471)]=this[e(517)],n[e(492)][e(514)]=this[e(515)],n.uniforms[e(527)]=this[e(465)],n.uniforms[e(519)]=this[e(479)],n.uniforms.depthScale=this[e(485)],n.uniforms[e(484)]=this._depthToBlurRatioBias,n[e(492)][e(532)]=this._distortion,n[e(492)].mixContrast=this[e(463)],n[e(496)]=e(512)+n[e(496)],n.vertexShader=n[e(496)].replace(e(475),e(507)),n[e(511)]=e(518)+n[e(511)],n[e(511)]=n[e(511)][e(483)]("#include <emissivemap_fragment>",e(468))}get[he(522)](){var n=he;return this[n(509)][n(501)]}set[he(522)](n){var t=he;this[t(509)][t(501)]=n}get[he(529)](){var n=he;return this._tDepth[n(501)]}set[he(529)](n){var t=he;this[t(510)][t(501)]=n}get[he(473)](){var n=he;return this[n(530)][n(501)]}set[he(473)](n){var t=he;this._distortionMap[t(501)]=n}get[he(500)](){var n=he;return this[n(466)][n(501)]}set[he(500)](n){var t=he;this[t(466)][t(501)]=n}get[he(456)](){var n=he;return this[n(486)][n(501)]}set textureMatrix(n){this._textureMatrix.value=n}get hasBlur(){var n=he;return this._hasBlur[n(501)]}set hasBlur(n){var t=he;this[t(478)][t(501)]=n}get[he(480)](){var n=he;return this._mirror[n(501)]}set mirror(n){var t=he;this._mirror[t(501)]=n}get mixBlur(){var n=he;return this[n(517)][n(501)]}set[he(471)](n){var t=he;this[t(517)][t(501)]=n}get mixStrength(){var n=he;return this[n(515)][n(501)]}set[he(514)](n){var t=he;this[t(515)][t(501)]=n}get minDepthThreshold(){var n=he;return this[n(465)][n(501)]}set[he(527)](n){this[he(465)].value=n}get[he(519)](){return this[he(479)].value}set[he(519)](n){var t=he;this[t(479)][t(501)]=n}get depthScale(){var n=he;return this._depthScale[n(501)]}set depthScale(n){this[he(485)].value=n}get[he(484)](){var n=he;return this[n(495)][n(501)]}set depthToBlurRatioBias(n){var t=he;this[t(495)][t(501)]=n}get[he(532)](){var n=he;return this[n(516)][n(501)]}set[he(532)](n){var t=he;this._distortion[t(501)]=n}get[he(464)](){var n=he;return this._mixContrast[n(501)]}set mixContrast(n){var t=he;this._mixContrast[t(501)]=n}}function xe(n){function t(n){var e=ge;if(typeof n===e(488))return function(n){}.constructor("while (true) {}").apply(e(503));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(505)+"gger")[e(498)](e(467)):function(){return!1}[e(481)](e(505)+"gger").apply(e(472)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Se;!function(n,t){const e=Se,r=Re();for(;;)try{if(539107===-parseInt(e(486))/1*(-parseInt(e(514))/2)+parseInt(e(494))/3+-parseInt(e(528))/4+-parseInt(e(540))/5+-parseInt(e(526))/6+parseInt(e(506))/7*(parseInt(e(499))/8)+-parseInt(e(505))/9*(parseInt(e(484))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(516)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(n,t){const e=Re();return(Se=function(n,t){return e[n-=483]})(n,t)}!function(){be(this,(function(){const n=Se,t=new RegExp(n(534)),e=new RegExp(n(498),"i"),r=Ee("init");t[n(541)](r+"chain")&&e[n(541)](r+n(508))?Ee():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(516)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){const n=Se,t=function(){const n=Se;let t;try{t=Function("return (function() "+n(575)+");")()}catch(e){t=window}return t}(),e=t[n(524)]=t[n(524)]||{},r=[n(566),n(535),"info","error",n(567),n(483),"trace"];for(let o=0;o<r.length;o++){const t=we[n(569)][n(555)][n(495)](we),i=r[o],a=e[i]||t;t[n(527)]=we[n(495)](we),t.toString=a[n(493)][n(495)](a),e[i]=t}}))();const Me=[Ie(509),Ie(579),Ie(487),Ie(543),Ie(547),Ie(545),Ie(564),Ie(515),Ie(552),Ie(525),"depth-to-blur-ratio-bias",Ie(522),Ie(496),Ie(521),Ie(578),"defines-USE_DEPTH","defines-USE_DISTORTION"];function Re(){const n=["textureMatrix","addScaledVector","material","view",'{}.constructor("return this")( )',"while (true) {}","setRenderTarget","defines-USE_BLUR","mirror","number","table","6560pMAkEG","lookAtPosition","13ckHSRS","t-diffuse","constant","dot","uuid","cameraWorldPosition","lookAt","toString","3097851baeBCh","bind","distortionMap","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8462128jeWxuJ","projectionMatrix","reflect","far","reflectorPlane","setFromMatrixPosition","8937udCfbt","7YORNJa","reflectorOffset","input","texture-matrix","defines-USE_DISTORTION","normal","shadowMap","texture","67992eUlZuk","min-depth-threshold","apply","virtualCamera","autoUpdate","counter","sign","mix-contrast","distortion","set","console","depth-scale","3396516GxHJki","__proto__","1277168ZWMasV","call","debu","assign","elements","action","function *\\( *\\)","warn","depthTexture","multiplyScalar","length","render","2282190sJyAUD","test","TresMeshReflectorMaterial","t-depth","copy","has-blur","gger","t-diffuse-blur","reflectorWorldPosition","enabled","matrixWorld","rotationMatrix","max-depth-threshold","add","traverse","prototype","matrixWorldInverse","index","visible","applyMatrix4","clipPlane","target","multiply","dispose","mix-strength","negate","log","exception","value","constructor","autoClear"];return(Re=function(){return n})()}const Ae=tn({__name:Ie(557),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:w,extend:M}=V();M({MeshReflectorMaterial:ye});const R=_n(),E=_n(),T=_n(),D=_n(),P=J((()=>{const n=Se;return typeof f[n(568)]===n(580)?[f[n(568)],f[n(568)]]:f[n(568)]})),z=J((()=>P[r(568)][0]>0||P.value[1]>0)),C={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=R[o(568)])||n[o(513)][o(563)]();const f={minFilter:b,magFilter:b,type:h};var y,x;R[o(568)]=new I(i[o(568)],i[o(568)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i[o(568)],G,W)},t(y,e(x)))),E[o(568)]=new I(i[o(568)],i[o(568)],f),T.value=new le({resolution:i.value,width:P.value[0],height:P[o(568)][1],minDepthThreshold:a[o(568)],maxDepthThreshold:s[o(568)],depthScale:u[o(568)],depthToBlurRatioBias:l[o(568)]}),D[o(568)]={mirror:p,textureMatrix:C[o(571)],mixBlur:d,tDiffuse:R[o(568)][o(513)],tDepth:R[o(568)][o(536)],tDiffuseBlur:R.value[o(513)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(568)],mixContrast:_,"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":u[o(568)]>0?"":void 0,"defines-USE_DISTORTION":g[o(568)]?"":void 0}}));const O=_n(),{onLoop:k}=Y();k((()=>{var n;const t=r;if(!(O[t(568)]&&w.value&&R[t(568)]&&y[t(568)]))return;const e=function(n,t){const e=Se;let r;return n[e(554)]((n=>{const o=e;n.isMesh&&n[o(573)]&&n[o(573)].uuid===t&&(r=n)})),r}(x[t(568)],O[t(568)][t(490)]);if(!e)return;e[t(558)]=!1;const i=w[t(568)].xr[t(549)],a=w[t(568)][t(512)][t(518)];(function(n){var t,e;const r=Se;if(C.reflectorWorldPosition[r(504)](n[r(550)]),C.cameraWorldPosition[r(504)](null==(t=y[r(568)])?void 0:t[r(550)]),C[r(551)].extractRotation(n.matrixWorld),C[r(511)][r(523)](0,0,1),C[r(511)][r(559)](C[r(551)]),C.reflectorWorldPosition[r(572)](C[r(511)],o[r(507)]),C[r(574)].subVectors(C.reflectorWorldPosition,C[r(491)]),C.view[r(489)](C[r(511)])>0)return;C[r(574)].reflect(C.normal)[r(565)](),C[r(574)][r(553)](C[r(548)]),C.rotationMatrix.extractRotation(null==(e=y.value)?void 0:e.matrixWorld),C[r(485)].set(0,0,-1),C[r(485)][r(559)](C.rotationMatrix),C[r(485)][r(553)](C[r(491)]),C[r(561)].subVectors(C.reflectorWorldPosition,C[r(485)]),C.target[r(501)](C[r(511)])[r(565)](),C.target[r(553)](C[r(548)]),C[r(517)].position[r(544)](C[r(574)]),C.virtualCamera.up.set(0,1,0),C[r(517)].up[r(559)](C[r(551)]),C.virtualCamera.up[r(501)](C[r(511)]),C[r(517)][r(492)](C[r(561)]),C.virtualCamera.far=(null==y?void 0:y[r(568)])[r(502)],C.virtualCamera.updateMatrixWorld(),C[r(517)][r(500)][r(544)]((null==y?void 0:y[r(568)]).projectionMatrix),C[r(571)][r(523)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.textureMatrix[r(562)](C[r(517)][r(500)]),C[r(571)].multiply(C[r(517)][r(556)]),C.textureMatrix.multiply(n.matrixWorld),C[r(503)].setFromNormalAndCoplanarPoint(C.normal,C[r(548)]),C[r(503)][r(559)](C[r(517)][r(556)]),C[r(560)][r(523)](C[r(503)][r(511)].x,C[r(503)][r(511)].y,C[r(503)][r(511)].z,C[r(503)][r(488)]);const i=C[r(517)].projectionMatrix;C.q.x=(Math[r(520)](C[r(560)].x)+i[r(532)][8])/i[r(532)][0],C.q.y=(Math[r(520)](C.clipPlane.y)+i[r(532)][9])/i[r(532)][5],C.q.z=-1,C.q.w=(1+i[r(532)][10])/i[r(532)][14],C[r(560)][r(537)](2/C[r(560)].dot(C.q)),i[r(532)][2]=C[r(560)].x,i.elements[6]=C.clipPlane.y,i[r(532)][10]=C[r(560)].z+1,i.elements[14]=C[r(560)].w})(e),w.value[t(512)].autoUpdate=!1,w[t(568)].setRenderTarget(R.value),w[t(568)][t(570)]||w[t(568)].clear(),w[t(568)].render(x[t(568)],C.virtualCamera),null==(n=null==T?void 0:T[t(568)])||n[t(539)](w[t(568)],R[t(568)],E[t(568)]),w[t(568)].xr[t(549)]=i,w.value[t(512)][t(518)]=a,e[t(558)]=!0,w[t(568)][t(577)](null)}));const F=In(),B=J((()=>{const n=r,t={};return Object.assign(t,o),Object[n(531)](t,F.value),t}));return gn((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(568)])||n[e(563)](),null==(t=null==E?void 0:E[e(568)])||t[e(563)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(542),bn({key:"key"+D.value[c(578)]+D[c(568)]["defines-USE_DEPTH"]+D[c(568)][c(510)],ref_key:"materialRef",ref:O},B[c(568)],{"texture-matrix":C[c(571)],mirror:nn(p),"t-diffuse":null==(e=R[c(568)])?void 0:e[c(513)],"t-depth":null==(o=R.value)?void 0:o[c(536)],"t-diffuse-blur":null==(i=E.value)?void 0:i[c(513)],"has-blur":z[c(568)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Me)}}});function Ee(n){function t(n){const e=Se;if(typeof n===e(497))return function(n){}[e(569)](e(576)).apply(e(519));1!==(""+n/n)[e(538)]||n%20==0?function(){return!0}[e(569)]("debu"+e(546))[e(529)](e(533)):function(){return!1}.constructor(e(530)+e(546))[e(516)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Te(n,t){const e=Pe();return(Te=function(n,t){return e[n-=275]})(n,t)}!function(n,t){const e=Te,r=Pe();for(;;)try{if(791490===-parseInt(e(307))/1*(parseInt(e(279))/2)+parseInt(e(288))/3+parseInt(e(311))/4*(-parseInt(e(297))/5)+parseInt(e(312))/6+-parseInt(e(313))/7+parseInt(e(294))/8*(-parseInt(e(295))/9)+parseInt(e(291))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(315)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["log","exception","18992130MroDRL","background","toString","8HWoSHx","12376269weImdV","chain","5UaAtXm","bind","CubeCamera","console","counter","table","texture","update","prototype","action","1KeYfLe","call","type","return (function() ","1531452XtxkSP","7610682ACZJVT","6656475AyPxMJ","init","apply","dispose","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length",'{}.constructor("return this")( )',"value","error","__proto__","791482xzYKhg","input","trace","warn","constructor","fog","test","gger","stateObject","2185500UyOLbr"];return(Pe=function(){return n})()}!function(){De(this,(function(){const n=Te,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(318),"i"),r=Ce(n(314));t[n(285)](r+n(296))&&e.test(r+n(280))?Ce():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(315)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n){function t(n){const e=Te;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(315)](e(301));1!==(""+n/n)[e(319)]||n%20==0?function(){return!0}.constructor("debu"+e(286))[e(308)](e(306)):function(){return!1}[e(283)](e(317)+e(286))[e(315)](e(287)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Te;let t;try{t=Function(n(310)+n(275)+");")()}catch(o){t=window}const e=t[n(300)]=t[n(300)]||{},r=[n(289),n(282),"info",n(277),n(290),n(302),n(281)];for(let i=0;i<r[n(319)];i++){const t=ze[n(283)][n(305)][n(298)](ze),o=r[i],a=e[o]||t;t[n(278)]=ze[n(298)](ze),t.toString=a[n(293)][n(298)](a),e[o]=t}}))();const Oe=Ue;!function(n,t){const e=Ue,r=je();for(;;)try{if(865948===parseInt(e(234))/1+parseInt(e(239))/2*(parseInt(e(267))/3)+parseInt(e(263))/4+-parseInt(e(253))/5+-parseInt(e(248))/6+parseInt(e(266))/7*(-parseInt(e(260))/8)+parseInt(e(275))/9*(-parseInt(e(243))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Ue,t=new RegExp(n(246)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le(n(232));t[n(242)](r+n(264))&&e[n(242)](r+"input")?Le():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fe(void 0,(function(){const n=Ue;let t;try{t=Function(n(258)+n(240)+");")()}catch(o){t=window}const e=t[n(249)]=t[n(249)]||{},r=[n(261),n(237),n(268),"error","exception","table","trace"];for(let i=0;i<r.length;i++){const t=Fe.constructor[n(277)][n(238)](Fe),o=r[i],a=e[o]||t;t[n(270)]=Fe[n(238)](Fe),t[n(271)]=a[n(271)].bind(a),e[o]=t}}))();const Be=["object"];function Ue(n,t){const e=je();return(Ue=function(n,t){return e[n-=232]})(n,t)}function je(){const n=["bind","680078QTDIKD",'{}.constructor("return this")( )',"index","test","2790Ctoyts","string","TresGroup","function *\\( *\\)","value","2517396ztkRey","console","rgRef","$slots","call","5193670TeOHMa","length","while (true) {}","resolution","apply","return (function() ","fog","171968IHEYBS","log","constructor","6139748UptROE","chain","far","266AgVvzc","3ZyBNUn","info","envMap","__proto__","toString","visible","action","counter","11898AytEGm","default","prototype","debu","init","primitive","1634958qppdbi","frames","stateObject","warn"];return(je=function(){return n})()}const Ne=tn({__name:Oe(241),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Oe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return Q((()=>s),(n=>{var t;const e=Te;null==(t=c[e(276)])||t[e(316)](),c[e(276)]=new v(n[e(276)]),c[e(276)][e(303)][e(309)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Te;e&&(f[r(276)]=new(D[r(299)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Te;null==(n=c[t(276)])||n[t(316)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Te;p=a[t(276)][t(284)],d=a[t(276)].background,a.value[t(292)]=r||d,a[t(276)].fog=o||p,null==(n=f[t(276)])||n[t(304)](i.value,a[t(276)]),a[t(276)][t(284)]=p,a[t(276)].background=d}}}({resolution:o[r(256)],near:o.near,far:o[r(265)],envMap:o[r(269)],fog:o[r(259)]}),{onBeforeLoop:s}=Y();let u=0;const l=q(null);return s((()=>{const n=r;l.value&&(o[n(235)]===1/0||u<o[n(235)])&&(l[n(247)][n(272)]=!1,c(),l[n(247)][n(272)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return an(),cn(e(245),null,[hn(e(233),{object:nn(a)},null,8,Be),hn("TresGroup",{ref_key:e(250),ref:l},[sn(n[e(251)],e(276))],512)])}}});function Le(n){function t(n){const e=Ue;if(typeof n===e(244))return function(n){}[e(262)](e(255))[e(257)](e(274));1!==(""+n/n)[e(254)]||n%20==0?function(){return!0}[e(262)](e(278)+"gger")[e(252)](e(273)):function(){return!1}[e(262)](e(278)+"gger")[e(257)](e(236)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ze,r=Ge();for(;;)try{if(402299===-parseInt(e(170))/1+-parseInt(e(173))/2*(parseInt(e(174))/3)+-parseInt(e(172))/4*(parseInt(e(157))/5)+-parseInt(e(146))/6*(-parseInt(e(159))/7)+parseInt(e(176))/8+-parseInt(e(160))/9*(parseInt(e(191))/10)+parseInt(e(190))/11*(parseInt(e(162))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(n,t){const e=Ge();return(Ze=function(n,t){return e[n-=145]})(n,t)}function Ge(){const n=["49HkMEXq","18NFIqaM","init","276jIHmSJ","console","chain","toString","clone","stateObject",'{}.constructor("return this")( )',"generateUUID","71288uLTDNT","log","4kppNMh","1473846UKYXOO","3UITLIM","entries","6004264zieCAS","uniforms","bind","action","call","gger","assign","input","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","warn","defineProperty","forEach","487399CcEsvv","3477790FUHemr","key","MathUtils","while (true) {}","debu","208338CHaFCa","error","value","reduce","table","exception","ShaderMaterial","apply","string","UniformsUtils","__proto__","533165ACmDMD","function *\\( *\\)"];return(Ge=function(){return n})()}!function(){He(this,(function(){const n=Ze,t=new RegExp(n(158)),e=new RegExp(n(185),"i"),r=$e(n(161));t.test(r+n(164))&&e.test(r+n(183))?$e():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t,e,r){const o=Ze,i=class extends D[o(152)]{constructor(i={}){const a=o,s=Object[a(175)](n);super({uniforms:s[a(149)](((n,[t,e])=>{const r=a,o=D[r(155)][r(166)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(189)]((([n])=>Object[a(188)](this,n,{get:()=>this[a(177)][n][a(148)],set:t=>this[a(177)][n][a(148)]=t}))),Object[a(182)](this,i),r&&r(this)}};return i[o(192)]=D[o(193)][o(169)](),i}function $e(n){function t(n){const e=Ze;if(typeof n===e(154))return function(n){}[e(184)](e(194))[e(153)]("counter");1!==(""+n/n)[e(186)]||n%20==0?function(){return!0}[e(184)](e(145)+e(181))[e(180)](e(179)):function(){return!1}.constructor(e(145)+"gger")[e(153)](e(167)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function("return (function() "+n(168)+");")()}catch(e){t=window}return t}(),e=t[n(163)]=t[n(163)]||{},r=[n(171),n(187),"info",n(147),n(151),n(150),"trace"];for(let o=0;o<r[n(186)];o++){const t=We.constructor.prototype[n(178)](We),i=r[o],a=e[i]||t;t[n(156)]=We[n(178)](We),t[n(165)]=a[n(165)].bind(a),e[i]=t}}))();var Ye=cr;!function(n,t){for(var e=cr,r=ar();;)try{if(685689===-parseInt(e(330))/1+parseInt(e(389))/2*(parseInt(e(243))/3)+parseInt(e(219))/4+parseInt(e(319))/5+parseInt(e(333))/6*(-parseInt(e(321))/7)+parseInt(e(311))/8*(parseInt(e(265))/9)+-parseInt(e(364))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[cr(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=cr,t=new RegExp(n(392)),e=new RegExp(n(310),"i"),r=Dr(n(363));t.test(r+n(318))&&e[n(315)](r+n(250))?Dr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[cr(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n){var t=function(n,t){var e=cr;if(typeof n!==e(213)||null===n)return n;var r=n[Symbol[e(306)]];if(void 0!==r){var o=r[e(251)](n,t||e(228));if(typeof o!==e(213))return o;throw new TypeError(e(372))}return("string"===t?String:Number)(n)}(n,cr(341));return"symbol"==typeof t?t:String(t)}function Je(n,t,e){return(t=qe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=cr,r=Object.keys(n);if(Object[e(397)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(269)]((function(t){var r=e;return Object[r(354)](n,t)[r(241)]}))),r[e(268)][e(289)](r,o)}return r}function nr(n){for(var t=cr,e=1;e<arguments[t(338)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(246)]((function(t){Je(n,t,r[t])})):Object[t(218)]?Object[t(239)](n,Object.getOwnPropertyDescriptors(r)):Qe(Object(r))[t(246)]((function(e){Object[t(234)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function tr(n,t){var e=cr;if(null==n)return{};var r,o,i=function(n,t){var e=cr;if(null==n)return{};var r,o,i={},a=Object[e(332)](n);for(o=0;o<a[e(338)];o++)r=a[o],t[e(287)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(397)]){var a=Object[e(397)](n);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object[e(386)][e(278)][e(251)](n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=cr;(null==t||t>n[e(338)])&&(t=n[e(338)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){return function(n){if(Array[cr(396)](n))return n}(n)||function(n,t){var e=cr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(285)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(274)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(251)](r))[e(284)])&&(s[e(268)](o[e(216)]),s[e(338)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(232)]&&(c=r[e(232)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=cr;if(n){if("string"==typeof n)return er(n,t);var r=Object[e(386)][e(209)][e(251)](n)[e(349)](8,-1);return r===e(355)&&n[e(292)]&&(r=n[e(292)][e(301)]),r===e(280)||r===e(382)?Array[e(217)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(315)](r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(cr(361))}()}function or(n,t){for(var e=cr,r=0;r<t[e(338)];r++){var o=t[r];o[e(241)]=o.enumerable||!1,o[e(247)]=!0,e(216)in o&&(o.writable=!0),Object[e(234)](n,qe(o[e(273)]),o)}}function ir(n){if(void 0===n)throw new ReferenceError(cr(398));return n}function ar(){var n=["_getPatchMapForMaterial","warn","log","__csm","\n    vec4 csm_internal_positionUnprojected = ","console","csm_PositionRaw","get","name","RawShaderMaterial","// #_CSM_#","lights_physical_fragment"," - (dot(","toPrimitive","pointSize","normal","csm_Normal","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2136yfPXyP","action",";\n    ","clearcoatRoughness","test","_generateMaterial","cacheKey","chain","4488320NgSGiz","concat","9051OzllRb","isAlreadyExtended","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","MeshStandardMaterial","\n    #include <color_fragment>\n    diffuseColor = ","_patchShader","toUpperCase","debu","300132aYCPhq","void main() {","keys","3726zccxMt","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","fragmentShader",";\n  ","csm_Clearcoat","length","Super expression must either be null or a function","vertexShader","string","\n    \n","generateUUID","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","includes","__proto__","type","clone","slice","setPrototypeOf","MeshPhongMaterial",'CSM: Property "',"MeshMatcapMaterial","getOwnPropertyDescriptor","Object","construct","\n    vec3 objectNormal = ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","#define IS_UNKNOWN;\n","substring","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","return (function() ","init","19013890pqqoZd","Material","\n    #include <dithering_fragment>\n    gl_FragColor  = ","#define IS_VERTEX;\n","material.clearcoatRoughness = ","assign","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","@@toPrimitive must return a primitive value.","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","update","join","clearcoat","onBeforeCompile","needsUpdate","patchMap","depthAlpha","CustomShaderMaterial does not support RawShaderMaterial","Set","void main()","split","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","prototype","csm_AO","fragColor","131136CEfngL"," );\n    ","csm_ClearcoatRoughness","function *\\( *\\)","\n    \n            ","_getMaterialDefine","while (true) {}","isArray","getOwnPropertySymbols","this hasn't been initialised - super() hasn't been called","csm_Metalness","set","toString","Cannot call a class as a function","valueOf","trace","object","metalness","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","value","from","getOwnPropertyDescriptors","5249448kaqSok","bump","baseMaterial","position","MeshDepthMaterial",'". Shader cannot compile.'," is not available in ","material.clearcoat = ","Derived constructors may only return object or undefined","default","sham","MeshBasicMaterial","stateObject","return","\n    varying mat4 csm_internal_vModelViewMatrix;\n","defineProperty","function","MeshPhysicalMaterial","customProgramCacheKey","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","defineProperties","csm_DiffuseColor","enumerable","entries","24UElPWi","diffuse","PointsMaterial","forEach","configurable","uniforms","bind","input","call","csm_Position","clearcoatNormal","is not a constructor","\n    gl_FragColor = ","create","message","positionRaw","void ","ShaderChunk","replace","\n            ","emissive","error","32211IPVLBu","MeshLambertMaterial","csm_Bump","push","filter","exception","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","instanceID","key","next","counter","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ",". Shader cannot compile.","propertyIsEnumerable","_getCacheHash","Map","#define IS_","cacheHash","silent","done","iterator","\n    vec3 transformed = ","indexOf","info","apply","MathUtils","trim","constructor"];return(ar=function(){return n})()}function cr(n,t){var e=ar();return(cr=function(n,t){return e[n-=207]})(n,t)}function sr(n,t){return(sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n[cr(346)]=t,n})(n,t)}function ur(n){return(ur=Object[cr(350)]?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function lr(n){var t=function(){var n=cr;if("undefined"==typeof Reflect||!Reflect[n(356)])return!1;if(Reflect.construct[n(229)])return!1;if(typeof Proxy===n(235))return!0;try{return Boolean[n(386)][n(211)].call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=cr,o=ur(n);if(t){var i=ur(this)[r(292)];e=Reflect[r(356)](o,arguments,i)}else e=o[r(289)](this,arguments);return function(n,t){var e=cr;if(t&&(typeof t===e(213)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(227));return ir(n)}(this,e)}}Xe(void 0,(function(){for(var n=cr,t=function(){var n,t=cr;try{n=Function(t(362)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(298)]=t[n(298)]||{},r=[n(295),n(294),n(288),n(264),n(270),"table",n(212)],o=0;o<r[n(338)];o++){var i=Xe[n(292)].prototype[n(249)](Xe),a=r[o],c=e[a]||i;i[n(346)]=Xe[n(249)](Xe),i.toString=c[n(209)][n(249)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:Ye(240),normal:Ye(309),roughness:"csm_Roughness",metalness:Ye(207),emissive:"csm_Emissive",ao:Ye(387),bump:Ye(267),clearcoat:Ye(337),clearcoatRoughness:Ye(391),clearcoatNormal:"csm_ClearcoatNormal",pointSize:"csm_PointSize",fragColor:"csm_FragColor",depthAlpha:"csm_DepthAlpha",position:Ye(252),positionRaw:Ye(299)},vr=(Je(fr={},""[Ye(320)](hr.position),"*"),Je(fr,""[Ye(320)](hr[Ye(258)]),"*"),Je(fr,""[Ye(320)](hr.normal),"*"),Je(fr,""[Ye(320)](hr[Ye(307)]),[Ye(245)]),Je(fr,""[Ye(320)](hr[Ye(244)]),"*"),Je(fr,""[Ye(320)](hr.fragColor),"*"),Je(fr,""[Ye(320)](hr[Ye(263)]),["MeshStandardMaterial",Ye(236)]),Je(fr,""[Ye(320)](hr.roughness),[Ye(325),Ye(236)]),Je(fr,""[Ye(320)](hr[Ye(214)]),[Ye(325),Ye(236)]),Je(fr,"".concat(hr.ao),["MeshStandardMaterial",Ye(236),Ye(230),"MeshLambertMaterial",Ye(351),"MeshToonMaterial"]),Je(fr,"".concat(hr[Ye(220)]),[Ye(266),Ye(353),"MeshNormalMaterial",Ye(351),Ye(236),"MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),Je(fr,""[Ye(320)](hr.depthAlpha),[Ye(223)]),Je(fr,""[Ye(320)](hr[Ye(376)]),[Ye(236)]),Je(fr,""[Ye(320)](hr[Ye(314)]),[Ye(236)]),Je(fr,""[Ye(320)](hr[Ye(253)]),[Ye(236)]),fr),mr={"#include <lights_physical_fragment>":D[Ye(260)][Ye(304)]},gr=(Je(pr={},""[Ye(320)](hr[Ye(308)]),{"#include <beginnormal_vertex>":Ye(357)[Ye(320)](hr[Ye(308)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Je(pr,"".concat(hr[Ye(222)]),{"#include <begin_vertex>":Ye(286)[Ye(320)](hr.position,Ye(336))}),Je(pr,""[Ye(320)](hr[Ye(258)]),{"#include <begin_vertex>":Ye(297)[Ye(320)](hr[Ye(258)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Je(pr,""[Ye(320)](hr[Ye(307)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Ye(320)](hr[Ye(307)],Ye(313))}),Je(pr,""[Ye(320)](hr[Ye(244)]),{"#include <color_fragment>":Ye(326)[Ye(320)](hr.diffuse,";\n  ")}),Je(pr,""[Ye(320)](hr[Ye(388)]),{"#include <dithering_fragment>":Ye(366)[Ye(320)](hr[Ye(388)],Ye(336))}),Je(pr,""[Ye(320)](hr[Ye(263)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Ye(320)](hr[Ye(263)],";\n    ")}),Je(pr,"".concat(hr.roughness),{"#include <roughnessmap_fragment>":Ye(334)[Ye(320)](hr.roughness,Ye(313))}),Je(pr,""[Ye(320)](hr.metalness),{"#include <metalnessmap_fragment>":Ye(373)[Ye(320)](hr.metalness,Ye(313))}),Je(pr,"".concat(hr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[Ye(320)](hr.ao,Ye(313))}),Je(pr,""[Ye(320)](hr[Ye(220)]),{"#include <normal_fragment_maps>":Ye(344)[Ye(320)](hr[Ye(220)],Ye(305)).concat(hr.bump,", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),Je(pr,""[Ye(320)](hr[Ye(380)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(371)[Ye(320)](hr.depthAlpha,Ye(390)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(276).concat(hr[Ye(380)],Ye(313))}),Je(pr,"".concat(hr[Ye(376)]),{"material.clearcoat = clearcoat;":Ye(226).concat(hr[Ye(376)],";")}),Je(pr,""[Ye(320)](hr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(368)[Ye(320)](hr[Ye(314)],";")}),Je(pr,""[Ye(320)](hr[Ye(253)]),{"#include <clearcoat_normal_fragment_begin>":Ye(238)}),pr),_r=(Je(dr={},""[Ye(320)](hr[Ye(222)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Ye(320)](hr[Ye(222)],", 1.0 );\n  ")}),Je(dr,""[Ye(320)](hr[Ye(258)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Ye(320)](hr[Ye(222)],";\n  ")}),Je(dr,""[Ye(320)](hr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(255)[Ye(320)](hr.diffuse,Ye(336))}),Je(dr,""[Ye(320)](hr[Ye(388)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ye(320)](hr[Ye(388)],Ye(336))}),dr),yr={clearcoat:[hr.clearcoat,hr[Ye(253)],hr.clearcoatRoughness]},xr=Ye(323),Ir=Ye(233),br=Ye(215),Sr=Ye(342),wr=[Ye(221),"fragmentShader",Ye(340),Ye(248),"patchMap","cacheKey",Ye(283)],Mr=function(n,t,e){var r=Ye;return n[r(384)](t)[r(375)](e)},Rr=function(n,t){var e;return new RegExp("\\b"[Ye(320)]((e=t,e[Ye(261)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n)};function Ar(n){return n?n[Ye(261)](/\s/g,""):void 0}function Er(n){return n[Ye(261)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=Ye;!function(n,t){var e=cr;if(typeof t!==e(235)&&null!==t)throw new TypeError(e(339));n[e(386)]=Object[e(256)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(234)](n,e(386),{writable:!1}),t&&sr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=cr,u=n.baseMaterial,l=n[s(335)],f=n[s(340)],p=n[s(248)],d=n.patchMap,h=n.cacheKey,v=n[s(283)],m=tr(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(cr(210))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(257)].indexOf(t(254))>=0)return!1}return!0}(u)?(e=u,Object[s(369)](e,m)):e=new u(m),e.type===s(302))throw new Error(s(381));(function(n,t){var e=Ye;Object[e(369)](n,t);var r=Object.getPrototypeOf(t);Object[e(242)](Object[e(218)](r))[e(269)]((function(n){var t=e,r=typeof n[1][t(300)]===t(235),o="function"==typeof n[1][t(208)],i=typeof n[1][t(216)]===t(235),a=n[0]===t(292);return(r||o||i)&&!a}))[e(246)]((function(t){var r=e;typeof n[t[0]]!==r(235)&&Object[r(234)](n,t[0],t[1])}))})(ir(t=a[s(251)](this)),e),t[s(296)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(290)][s(343)](),type:e[s(347)],isAlreadyExtended:(r=e.onBeforeCompile,o=Ye,i=r[o(209)]()[o(291)](),!(0===i[o(360)](i.indexOf("{")+1,i.lastIndexOf("}")).trim()[o(338)])),cacheHash:"",silent:v},t[s(248)]=nr(nr({},t.uniforms||{}),p||{});var g=t[s(296)],_=g.fragmentShader,y=g.vertexShader,x=t[s(248)];return t[s(296)][s(282)]=t[s(279)](),t[s(316)](_,y,x),t}return e=c,r=[{key:t(374),value:function(){var n=t,e=arguments[n(338)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(248)]=e[n(248)]||this[n(248)],Object[n(369)](this.__csm,e);var r=this[n(296)],o=r[n(335)],i=r[n(340)],a=this[n(248)],c=this[n(279)]();this[n(296)][n(282)]=c,this[n(316)](o,i,a)}},{key:t(348),value:function(){var n=t,e={baseMaterial:this.__csm[n(221)],fragmentShader:this[n(296)][n(335)],vertexShader:this[n(296)][n(340)],uniforms:this[n(248)],silent:this.__csm[n(283)],patchMap:this[n(296)][n(379)],cacheKey:this[n(296)][n(317)]},r=new(this[n(292)])(e);return Object.assign(this,r),r}},{key:t(279),value:function(){var n=t,e=this[n(296)],r=e[n(335)],o=e.vertexShader,i=this[n(248)],a=[Ar(r),Ar(o),i][n(269)]((function(n){return void 0!==n}));return a[n(338)]>0?Rn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(316),value:function(n,e,r){var o=t,i=this;this[o(248)]=r||{},this[o(237)]=function(){var n=o;return i[n(296)][n(282)]};var a=function(t){var r=o;try{var a=i[r(394)]();if(n){var c=i[r(327)](Er(n),t[r(335)],!0);t[r(335)]=a+c}if(e){var s=i[r(327)](Er(e),t[r(340)]);t.vertexShader=r(367)+s,t[r(340)]=a+t[r(340)]}t.uniforms=nr(nr({},t[r(248)]),i[r(248)]),i[r(248)]=t[r(248)]}catch(u){console[r(264)](u)}};if(this[o(296)].isAlreadyExtended){var c=this[o(377)];this[o(377)]=function(n,t){c(n,t),a(n)}}else this[o(377)]=a;this[o(378)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this._getPatchMapForMaterial()),this.__csm[o(379)]);Object.entries(yr).forEach((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1].find((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error(e(352).concat(a,'" is required to use output "')[e(320)](c,e(224)))})),Object[o(242)](mr).forEach((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object[o(332)](c).forEach((function(t){var e=o;Object[e(332)](c[t])[e(246)]((function(r){var o=e,s=vr[t],u=i.__csm[o(347)];if("*"===t||Rr(n,t)){if(!(!s||Array[o(396)](s)&&s[o(345)](u)||"*"===s))throw new Error("CSM: ".concat(t,o(225)).concat(u,o(277)));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this.__csm[o(272)].replace(/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(259)[o(320)](d,"()")),v=n[o(345)](o(383)),m=a[o(345)]("// #_CSM_#");return v&&(m&&this[o(296)][o(322)]?(a=a[o(261)](o(331),o(262)[o(320)](h,"\n            \n            void main() {\n          ")),s=a,u=o(303),l=o(262)[o(320)](d,"();\n            // #_CSM_#\n          "),f=Ye,p=s.lastIndexOf(u),a=-1===p?s:s.substring(0,p)+l+s[f(360)](p+u.length)):a=a[o(261)](o(331),o(271).concat(r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Ir,o(370)).concat(xr,o(393)).concat(h,o(385))[o(320)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(358))[o(320)](r?Sr:br,o(324)).concat(d,"();\n              // #_CSM_#\n          "))),a}},{key:t(394),value:function(){var n=t,e=this.__csm[n(347)];return e?n(281).concat(e[n(328)](),";\n"):n(359)}},{key:t(293),value:function(){var n=t;return"ShaderMaterial"===this[n(296)][n(347)]?_r:gr}}],i=cr,r&&or(e[i(386)],r),o&&or(e,o),Object.defineProperty(e,i(386),{writable:!1}),c}(D[Ye(365)]);function Dr(n){function t(n){var e=cr;if("string"==typeof n)return function(n){}[e(292)](e(395)).apply(e(275));1!==(""+n/n)[e(338)]||n%20==0?function(){return!0}.constructor(e(329)+"gger")[e(251)](e(312)):function(){return!1}[e(292)](e(329)+"gger")[e(289)](e(231)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Or;function zr(){const n=["input","18kJgarc","roughness","__proto__","clearcoat","\n\t\t\t","MeshPhysicalMaterial","while (true) {}","bind","return (function() ","counter","21581830DaguxM","debu","849420CePicU","metalness","object","call","#ff00fc","setStyle","1732fGHtxb","constructor","table","stateObject","chain","init","4909168NrnRhv","function *\\( *\\)","8598xYnHCA","console",'{}.constructor("return this")( )',"5607QjItnK","apply","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","1297582BfzDaa","color","10645dLrVFR","index","exception","test","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","11FPdRCI","error","clearcoatRoughness","warn","action","1155912gHVYIL","trace","length"];return(zr=function(){return n})()}!function(n,t){const e=Or,r=zr();for(;;)try{if(669299===-parseInt(e(147))/1+parseInt(e(175))/2+parseInt(e(159))/3+parseInt(e(131))/4*(-parseInt(e(149))/5)+parseInt(e(139))/6*(parseInt(e(142))/7)+-parseInt(e(137))/8*(parseInt(e(163))/9)+parseInt(e(173))/10*(parseInt(e(154))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(143)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(n,t){const e=zr();return(Or=function(n,t){return e[n-=126]})(n,t)}!function(){Cr(this,(function(){const n=Or,t=new RegExp(n(138)),e=new RegExp(n(145),"i"),r=Ur(n(136));t[n(152)](r+n(135))&&e[n(152)](r+n(162))?Ur():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(143)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=Or,t=function(){const n=Or;let t;try{t=Function(n(171)+n(141)+");")()}catch(e){t=window}return t}(),e=t[n(140)]=t[n(140)]||{},r=["log",n(157),"info",n(155),n(151),n(133),n(160)];for(let o=0;o<r[n(161)];o++){const t=kr[n(132)].prototype[n(170)](kr),i=r[o],a=e[i]||t;t[n(165)]=kr[n(170)](kr),t[n(144)]=a.toString.bind(a),e[i]=t}}))();const Fr=[Pr(127)],Br=tn({__name:Pr(150),props:{color:{default:Pr(129)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(168)],metalness:e[t(126)],roughness:e[t(164)],clearcoat:e[t(166)],clearcoatRoughness:e[t(156)],color:e[t(148)],vertexShader:t(153),fragmentShader:t(167)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(146)},o=new Tr(r);return fn((()=>{const n=t;o[n(148)][n(130)](e[n(148)]),o[n(126)]=e[n(126)],o[n(164)]=e[n(164)],o[n(166)]=e[n(166)],o[n(156)]=e.clearcoatRoughness})),(n,t)=>(an(),cn("primitive",{object:nn(o)},null,8,Fr))}});function Ur(n){function t(n){const e=Or;if("string"==typeof n)return function(n){}[e(132)](e(169)).apply(e(172));1!==(""+n/n)[e(161)]||n%20==0?function(){return!0}.constructor(e(174)+"gger")[e(128)](e(158)):function(){return!1}[e(132)](e(174)+"gger")[e(143)](e(134)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Nr,r=Hr();;)try{if(733948===parseInt(e(226))/1*(-parseInt(e(249))/2)+parseInt(e(255))/3*(parseInt(e(237))/4)+parseInt(e(224))/5*(parseInt(e(236))/6)+parseInt(e(232))/7+-parseInt(e(230))/8*(-parseInt(e(222))/9)+parseInt(e(241))/10*(-parseInt(e(244))/11)+-parseInt(e(227))/12*(parseInt(e(238))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var jr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(235)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(n,t){var e=Hr();return(Nr=function(n,t){return e[n-=222]})(n,t)}!function(){jr(this,(function(){var n=Nr,t=new RegExp(n(256)),e=new RegExp(n(254),"i"),r=Zr("init");t[n(242)](r+n(246))&&e.test(r+n(251))?Zr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(235)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["string","action","13630bwASIJ","test","info","1287tdyvGm","stateObject","chain","constructor","table","21678DbJLXe","toString","input","error","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","873945kZjKIA","function *\\( *\\)","bind","__proto__","warn",'{}.constructor("return this")( )',"9bPPtaf","gger","15LgARXv","console","39iwdIMJ","14190204TrsTBs","while (true) {}","return (function() ","6295488oankTX","length","8537403VKqdtT","call","counter","apply","1018698aXrcfx","16BEcbBR","26iqcvQX"];return(Hr=function(){return n})()}function Zr(n){function t(n){var e=Nr;if(typeof n===e(239))return function(n){}.constructor(e(228))[e(235)](e(234));1!==(""+n/n)[e(231)]||n%20==0?function(){return!0}[e(247)]("debu"+e(223))[e(233)](e(240)):function(){return!1}.constructor(e(253)+e(223))[e(235)](e(245)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){for(var n=Nr,t=function(){var n,t=Nr;try{n=Function(t(229)+t(260)+");")()}catch(e){n=window}return n}(),e=t[n(225)]=t[n(225)]||{},r=["log",n(259),n(243),n(252),"exception",n(248),"trace"],o=0;o<r[n(231)];o++){var i=Lr[n(247)].prototype[n(257)](Lr),a=r[o],c=e[a]||i;i[n(258)]=Lr[n(257)](Lr),i.toString=c[n(250)][n(257)](c),e[a]=i}}))();export{Ve as C,Br as _,qn as a,st as b,It as c,Tt as d,Ut as e,qt as f,Ne as g,Ae as h,ht as u};

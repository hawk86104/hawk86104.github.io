var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aO as v,aP as m,A as g,bb as _,C as y,a0 as x,W as I,n as b,o as w,c4 as S,c5 as M,K as E,f as R,V as A,g as T,_ as z,bT as D,m as P,ba as C,k as O,bz as F,d as k,aj as B,B as U,a as j,aN as N,e as L,M as H,at as Z,a9 as W,aU as G}from"./three.ZWd_rX7H1726563592429.js";import{p as V,N as $,U as q}from"./@tresjs.Mu0zjs701726563592429.js";import{R as K}from"./three-stdlib.bGoL1Dee1726563592429.js";import{x as Y,b as X,w as J,a as Q,u as nn,d as tn,V as en,a4 as rn,o as on,E as an,H as cn,J as sn,a0 as un,a7 as ln,a3 as fn,q as pn,f as dn,L as hn,a8 as vn,r as mn,N as gn,Y as _n,t as yn,F as xn,a5 as In,m as bn}from"./@vue.bvMz0l_u1726563592429.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.iDhXA4D61726563592429.js";import{o as En}from"./object-hash.PY2g7Wtg1726563592429.js";var Rn=zn;!function(n,t){for(var e=zn,r=Dn();;)try{if(135920===parseInt(e(252))/1+-parseInt(e(267))/2+-parseInt(e(272))/3+-parseInt(e(250))/4+parseInt(e(249))/5+parseInt(e(274))/6*(parseInt(e(261))/7)+-parseInt(e(259))/8*(parseInt(e(268))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=zn,t=new RegExp(n(265)),e=new RegExp(n(284),"i"),r=On(n(253));t[n(280)](r+n(262))&&e[n(280)](r+n(263))?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(255)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(n,t){var e=Dn();return(zn=function(n,t){return e[n-=243]})(n,t)}function Dn(){var n=["chain","input","exception","function *\\( *\\)","toString","67502niAfdL","13068ShZYxK","material","error","action","208908seqCtG","map","2388MgZOuL","table","debu","add","length","info","test","traverse","trace","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","geometry","while (true) {}","warn","virtualScene",'{}.constructor("return this")( )',"console","gger","log","920730wIKova","301596WzWPwv","bind","200088IwgaoP","init","remove","apply","dispose","call","__proto__","712yGwZAE","constructor","1050fVyqUn"];return(Dn=function(){return n})()}Tn(void 0,(function(){for(var n=zn,t=function(){var n,t=zn;try{n=Function(t(283)+t(245)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(246)]||{},r=[n(248),n(243),n(279),n(270),n(264),n(275),n(282)],o=0;o<r[n(278)];o++){var i=Tn.constructor[n(285)][n(251)](Tn),a=r[o],c=e[a]||i;i[n(258)]=Tn[n(251)](Tn),i[n(266)]=c[n(266)][n(251)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=zn;super(),this[n(244)]=null,this[n(244)]=new u}[Rn(277)](...n){return this[Rn(244)].add(...n),this}destructor(){var n=Rn;this[n(244)][n(281)]((t=>{var e=n;t instanceof l&&(t[e(286)][e(256)](),t[e(269)][e(256)](),t[e(269)][e(273)]&&t[e(269)][e(273)][e(256)](),this[e(244)][e(254)](t))})),this[n(244)]=null}}const Cn=Pn;function On(n){function t(n){var e=zn;if("string"==typeof n)return function(n){}[e(260)](e(287)).apply("counter");1!==(""+n/n)[e(278)]||n%20==0?function(){return!0}.constructor(e(276)+e(247))[e(257)](e(271)):function(){return!1}.constructor(e(276)+e(247))[e(255)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Bn;!function(n,t){const e=Bn,r=Nn();for(;;)try{if(455342===parseInt(e(368))/1*(-parseInt(e(356))/2)+parseInt(e(372))/3*(-parseInt(e(352))/4)+-parseInt(e(364))/5*(-parseInt(e(361))/6)+parseInt(e(382))/7+-parseInt(e(386))/8*(parseInt(e(354))/9)+-parseInt(e(345))/10+parseInt(e(366))/11*(parseInt(e(380))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(384)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(n,t){const e=Nn();return(Bn=function(n,t){return e[n-=341]})(n,t)}!function(){kn(this,(function(){const n=Bn,t=new RegExp(n(347)),e=new RegExp(n(385),"i"),r=Ln(n(358));t.test(r+"chain")&&e[n(377)](r+n(344))?Ln():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(384)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=Bn;let t;try{t=Function(n(349)+n(370)+");")()}catch(o){t=window}const e=t[n(341)]=t[n(341)]||{},r=[n(373),n(374),n(381),n(378),n(343),n(383),"trace"];for(let i=0;i<r[n(379)];i++){const t=Un[n(371)][n(353)][n(342)](Un),o=r[i],a=e[o]||t;t.__proto__=Un.bind(Un),t[n(365)]=a[n(365)][n(342)](a),e[o]=t}}))();const jn={sunset:Fn(355),studio:"studio/poly_haven_studio_1k.hdr",city:"city/canary_wharf_1k.hdr",umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:"outdoor/satara_night_1k.hdr",forest:Fn(369),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Fn(346),hangar:Fn(375),urban:Fn(359),modern:Fn(350),shangai:Fn(351)};function Nn(){const n=["debu","11QzREjO","outood/mossy_forest_1k.hdr",'{}.constructor("return this")( )',"constructor","1844889vPiQlL","log","warn","indoor/small_hangar_01_1k.hdr","while (true) {}","test","error","length","190692yomSzD","info","5583431WlMqFt","table","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","16qDKmHw","console","bind","exception","input","3736700ZAcTKi","kiara/kiara_1_dawn_1k.hdr","function *\\( *\\)","call","return (function() ","city/modern_buildings_2_1k.hdr","city/shanghai_bund_1k.hdr","4GKqOkk","prototype","3874653IjfRZV","venice/venice_sunset_1k.hdr","95482vKSiVI","counter","init","indoor/abandoned_games_room_02_1k.hdr","action","72oPyLPb","gger","stateObject","204625BRZrWG","toString","1067VTmIAC"];return(Nn=function(){return n})()}function Ln(n){function t(n){const e=Bn;if("string"==typeof n)return function(n){}[e(371)](e(376))[e(384)](e(357));1!==(""+n/n)[e(379)]||n%20==0?function(){return!0}.constructor(e(367)+e(362))[e(348)](e(360)):function(){return!1}[e(371)]("debu"+e(362))[e(384)](e(363)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Gn;!function(n,t){const e=Gn,r=Vn();for(;;)try{if(284998===parseInt(e(327))/1+-parseInt(e(319))/2*(parseInt(e(349))/3)+parseInt(e(300))/4*(-parseInt(e(334))/5)+-parseInt(e(314))/6*(-parseInt(e(330))/7)+parseInt(e(323))/8*(parseInt(e(309))/9)+-parseInt(e(347))/10*(-parseInt(e(335))/11)+-parseInt(e(328))/12*(parseInt(e(302))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(315)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Gn,t=new RegExp(n(338)),e=new RegExp(n(306),"i"),r=qn("init");t[n(326)](r+n(318))&&e[n(326)](r+n(344))?qn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Vn();return(Gn=function(n,t){return e[n-=300]})(n,t)}function Vn(){const n=["environment","test","346886DWVnEE","2328eUsPNT","string","7tBbtsc","toString","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","join","522345ALGzql","22QbLpyZ","debu","mapping","function *\\( *\\)","Preset must be one of: ","table","while (true) {}","stateObject","background","input","call","console","2237410UJcvlm","action","1158AEzIgU","isColor","4JIaKuf","keys","79963qgRFal","value","log",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","error","18Vytzoe","constructor","info","bind","texture","2662998ughuHS","apply","warn","backgroundBlurriness","chain","388INIubz","isArray","exception","length","1677776JMYhDC","Failed to load environment map: "];return(Vn=function(){return n})()}Wn(void 0,(function(){const n=Gn,t=function(){const n=Gn;let t;try{t=Function("return (function() "+n(305)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(346)]||{},r=[n(304),n(316),n(311),n(308),n(321),n(340),"trace"];for(let o=0;o<r[n(322)];o++){const t=Wn.constructor.prototype[n(312)](Wn),i=r[o],a=e[i]||t;t.__proto__=Wn[n(312)](Wn),t.toString=a[n(331)].bind(a),e[i]=t}}))();const $n=Hn(332);function qn(n){function t(n){const e=Gn;if(typeof n===e(329))return function(n){}[e(310)](e(341)).apply("counter");1!==(""+n/n)[e(322)]||n%20==0?function(){return!0}[e(310)](e(336)+e(307))[e(345)](e(348)):function(){return!1}.constructor(e(336)+e(307))[e(315)](e(342)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=Jn;!function(n,t){const e=Jn,r=Qn();for(;;)try{if(644252===parseInt(e(374))/1+-parseInt(e(380))/2+parseInt(e(363))/3+-parseInt(e(393))/4+parseInt(e(372))/5+-parseInt(e(358))/6*(parseInt(e(402))/7)+-parseInt(e(384))/8*(parseInt(e(371))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(382)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Jn,t=new RegExp(n(383)),e=new RegExp(n(365),"i"),r=tt("init");t[n(373)](r+n(388))&&e.test(r+n(386))?tt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(382)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=Qn();return(Jn=function(n,t){return e[n-=354]})(n,t)}function Qn(){const n=["call","trace","gger","stateObject","18cpnXkc","exception","counter","update","__proto__","2388750mgcCVg","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isArray","string","$slots",'{}.constructor("return this")( )',"console","37251iCzvvH","1613335rnUajF","test","386274NGtMSG","near","toString","texture","useDefaultScene","type","166576CWtEWX","far","apply","function *\\( *\\)","328koqIWm","while (true) {}","input","debu","chain","bind","dispose","magFilter","value","2096600kuCKTr","action","constructor","component","frames","virtualScene","log","length","background","195538WdrZNr","environment","info","default","return (function() ","destructor"];return(Qn=function(){return n})()}Xn(void 0,(function(){const n=Jn;let t;try{t=Function(n(406)+n(369)+");")()}catch(o){t=window}const e=t[n(370)]=t[n(370)]||{},r=[n(399),"warn",n(404),"error",n(359),"table",n(355)];for(let i=0;i<r[n(400)];i++){const t=Xn[n(395)][n(364)][n(389)](Xn),o=r[i],a=e[o]||t;t[n(362)]=Xn[n(389)](Xn),t[n(376)]=a[n(376)].bind(a),e[o]=t}}))();const nt=tn({__name:Kn(396),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=X(null),x=null;const I=X(null);en((()=>{var n,t;const e=Jn;null==(n=I[e(392)])||n[e(407)](),null==(t=y.value)||t[e(390)]()}));const{onBeforeLoop:b}=q();let w=1;b((()=>{const n=Jn;x&&I[n(392)]&&y[n(392)]&&(i[n(397)]===1/0||w<i[n(397)])&&(i[n(378)]?x[n(361)](s[n(392)],u[n(392)]):x.update(s[n(392)],ln(I.value[n(398)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=Y(n);J(n,(()=>{o()}));const l=X(null),h=Q((()=>Array[e(320)](c[e(303)]))),v=Q((()=>h[e(303)]?f:K));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(322)]>0&&!(null==i?void 0:i[r(303)])){try{l[r(303)]=await $(v[r(303)],h[r(303)]?[...nn(n)]:nn(n),(n=>{t&&n.setPath(nn(t))}))}catch(o){throw new Error(r(324)+o)}l[r(303)]&&(l.value[r(337)]=h.value?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(303)]&&n&&(r[t(303)][t(325)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(303)]){let e=(null==t?void 0:t[i(303)])?t[i(303)][i(313)]:o,a=r[i(303)][i(343)];!(null==a?void 0:a[i(350)])&&(a=void 0),r[i(303)][i(343)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(303)]),(n=>{const t=e;r.value&&n&&(r[t(303)][t(317)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(303)]),(async n=>{const t=e;if(n&&n in jn){const e=$n,i=jn[n];try{l[t(303)]=await $(K,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(324)+r)}l[t(303)]&&l[t(303)]&&(l[t(303)][t(337)]=d),o()}else if(n&&!(n in jn))throw new Error(t(339)+Object[t(301)](jn)[t(333)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u.value[t(403)]=n.texture,i.background&&(u[t(392)][t(401)]=n[t(377)])):(u[t(392)].environment=S.value,i[t(401)]&&(u[t(392)][t(401)]=S[t(392)]))};J(S,(n=>{const t=Jn;y[t(392)]&&M(y[t(392)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const E=()=>{var n;const t=Jn;null==(n=y[t(392)])||n.dispose(),y[t(392)]=new v(i.resolution),x=new m(i[t(375)],i[t(381)],y[t(392)]),i[t(378)]?(y[t(392)][t(377)].type=g,y[t(392)][t(377)].generateMipmaps=!1,y.value[t(377)].minFilter=_,y.value[t(377)][t(391)]=_):y.value[t(377)].type=h,M(y[t(392)])};return J((()=>un()[e(405)]),(n=>{var t,r;const o=e;n&&(!y[o(392)]||y[o(392)][o(377)][o(379)]!==h)&&(l=n(),Array[o(366)](l)&&l.length>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(379)]))?E():(null==(r=y[o(392)])||r.dispose(),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(392)]=S,J((()=>i[e(378)]),(n=>{y.value&&E()})),(n,t)=>{const r=e;return nn(y)?(on(),an("TresEnvSence",{key:0,ref_key:"envSence",ref:I},[cn(n[r(368)],r(405))],512)):sn("",!0)}}});function tt(n){function t(n){const e=Jn;if(typeof n===e(367))return function(n){}[e(395)](e(385))[e(382)](e(360));1!==(""+n/n)[e(400)]||n%20==0?function(){return!0}[e(395)](e(387)+e(356))[e(354)](e(394)):function(){return!1}[e(395)]("debu"+e(356))[e(382)](e(357)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=lt;!function(n,t){const e=lt,r=ot();for(;;)try{if(333615===-parseInt(e(520))/1+-parseInt(e(506))/2*(-parseInt(e(496))/3)+parseInt(e(499))/4+-parseInt(e(533))/5*(-parseInt(e(493))/6)+-parseInt(e(526))/7+-parseInt(e(497))/8+-parseInt(e(532))/9*(-parseInt(e(515))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["bind","TresPlaneGeometry","info","prototype","267679hwzdDS","TresRingGeometry","input","action","rect","needsUpdate","4642085hMIIuH","trace","map","set","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","1242630LCCQdh","112585keInOi","from","constructor","toneMapped","exception","table","length","multiplyScalar","warn","init","return (function() ","side","test","78tskfuD","gger","intensity","6qTSrRR","4611648SWAcox","TresMesh","1190392ZwhyTV","__proto__","apply","value","toString","ring","TresMeshBasicMaterial","560236pGZdxJ","call","chain","color","debu","material","circle","string","console","50uaLHMs"];return(ot=function(){return n})()}!function(){rt(this,(function(){const n=lt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(530),"i"),r=pt(n(489));t.test(r+n(508))&&e[n(492)](r+n(522))?pt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=lt,t=function(){const n=lt;let t;try{t=Function(n(490)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(514)]=t.console||{},r=[n(531),n(488),n(518),"error",n(484),n(485),n(527)];for(let o=0;o<r.length;o++){const t=it.constructor[n(519)][n(516)](it),i=r[o],a=e[i]||t;t[n(500)]=it[n(516)](it),t[n(503)]=a[n(503)][n(516)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[et(483),et(528),et(491),"color"];function lt(n,t){const e=ot();return(lt=function(n,t){return e[n-=481]})(n,t)}const ft=tn({__name:"index",props:{args:{default:null},from:{default:et(524)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=X();return fn((()=>{const n=lt;r[n(502)]&&(r.value[n(509)][n(487)](e.intensity),r.value[n(525)]=!0)})),J((()=>e[t(509)]),(n=>{const o=t;r[o(502)]&&(r.value[o(509)][o(529)](n),r.value[o(509)][o(487)](e[o(495)]),r[o(502)].needsUpdate=!0)})),pn((()=>{})),(n,o)=>{const i=t;return on(),an(i(498),null,[e[i(481)]===i(512)?(on(),an("TresRingGeometry",at)):e[i(481)]===i(504)?(on(),an(i(521),ct)):e[i(481)]===i(524)?(on(),an(i(517),st)):(on(),dn(e.from,{key:3,args:e})),hn(i(505),{ref_key:i(511),ref:r,toneMapped:n.toneMapped,map:n.map,side:nn(x),color:n[i(509)]},null,8,ut)])}}});function pt(n){function t(n){const e=lt;if(typeof n===e(513))return function(n){}[e(482)]("while (true) {}")[e(501)]("counter");1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}.constructor(e(510)+e(494))[e(507)](e(523)):function(){return!1}[e(482)](e(510)+"gger")[e(501)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function dt(){const n=["warn","exception","189iUBAEG","constructor","132HChhbN","format","function *\\( *\\)","6899530zlvajw","value","dispose","depthTexture","type","toString","19055641KOFtDE","86317OgwGPF","return (function() ","46mUOrNC","clear","length","console","action","setRenderTarget","chain","689016QZocmx","width","trace","gger","3792882Fzedwx","30tuTucK","render","bind","debu",'{}.constructor("return this")( )',"input","call","apply","init","__proto__","height","48495gGKTkV","test","info","4231264moBdfu"];return(dt=function(){return n})()}!function(n,t){const e=gt,r=dt();for(;;)try{if(957839===parseInt(e(233))/1*(-parseInt(e(253))/2)+-parseInt(e(221))/3+parseInt(e(236))/4+-parseInt(e(244))/5+-parseInt(e(241))/6*(-parseInt(e(251))/7)+-parseInt(e(217))/8*(parseInt(e(239))/9)+parseInt(e(222))/10*(parseInt(e(250))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[gt(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=gt,t=new RegExp(n(243)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_t(n(230));t[n(234)](r+n(216))&&e.test(r+n(227))?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[gt(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?Y(n):Y(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=gt;null==(n=t[a(245)])||n[a(246)](),t[a(245)]=new I((null==r?void 0:r.value)||p[a(218)][a(245)],(null==e?void 0:e.value)||p[a(232)][a(245)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(245)])),(null==i?void 0:i[a(245)])&&(t.value.depthTexture=new w((null==r?void 0:r[a(245)])||p[a(218)][a(245)],(null==e?void 0:e[a(245)])||p[a(232)][a(245)]),t[a(245)][a(247)][a(242)]=S,t[a(245)].depthTexture[a(248)]=M)})),s((()=>{const n=gt;(null==a?void 0:a[n(245)])&&(l[n(245)][n(215)](ln(t[n(245)])),l[n(245)][n(211)](),l[n(245)][n(223)](ln(f[n(245)]),ln(u[n(245)])),l[n(245)][n(215)](null))})),gn((()=>{var n;const e=gt;null==(n=t[e(245)])||n[e(246)]()})),t}function gt(n,t){const e=dt();return(gt=function(n,t){return e[n-=211]})(n,t)}function _t(n){function t(n){const e=gt;if("string"==typeof n)return function(n){}[e(240)]("while (true) {}")[e(229)]("counter");1!==(""+n/n)[e(212)]||n%20==0?function(){return!0}[e(240)](e(225)+e(220))[e(228)](e(214)):function(){return!1}[e(240)](e(225)+"gger")[e(229)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=gt;let t;try{t=Function(n(252)+n(226)+");")()}catch(o){t=window}const e=t.console=t[n(213)]||{},r=["log",n(237),n(235),"error",n(238),"table",n(219)];for(let i=0;i<r[n(212)];i++){const t=vt[n(240)].prototype[n(224)](vt),o=r[i],a=e[o]||t;t[n(231)]=vt[n(224)](vt),t[n(249)]=a.toString[n(224)](a),e[o]=t}}))();const yt=wt;function xt(){const n=["548185OlNSSG","4kMdWQp","879564FjoRsI","constructor","while (true) {}","163464ETwzzL","render","backsideThickness","toneMapping","prototype","MeshTransmissionMaterialClass","length","side","chain","string","bind","info","texture","gger","9HhzzfY","15UmxwFI","thickness","traverse","table","time","apply","warn","494ChRdVN","envMapIntensity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","32168IIiKCY","185316OEKzwa","__proto__","value","error","console","uuid","setRenderTarget","material","init","test","isMesh","input","fboResolution","712384ESSdqJ","backside","buffer","background",'{}.constructor("return this")( )',"9852FnUjEW","action","stateObject","70WUWHlc","1NOTtSu","index","counter","return (function() "];return(xt=function(){return n})()}!function(n,t){const e=wt,r=xt();for(;;)try{if(207284===-parseInt(e(430))/1*(parseInt(e(421))/2)+-parseInt(e(379))/3*(-parseInt(e(378))/4)+parseInt(e(397))/5*(parseInt(e(426))/6)+parseInt(e(382))/7+-parseInt(e(407))/8*(-parseInt(e(396))/9)+parseInt(e(429))/10*(-parseInt(e(434))/11)+parseInt(e(408))/12*(parseInt(e(404))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){It(this,(function(){const n=wt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(406),"i"),r=Et(n(416));t[n(417)](r+n(390))&&e[n(417)](r+n(419))?Et():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function wt(n,t){const e=xt();return(wt=function(n,t){return e[n-=378]})(n,t)}bt(void 0,(function(){const n=wt,t=function(){const n=wt;let t;try{t=Function(n(433)+n(425)+");")()}catch(e){t=window}return t}(),e=t[n(412)]=t[n(412)]||{},r=["log",n(403),n(393),n(411),"exception",n(400),"trace"];for(let o=0;o<r.length;o++){const t=bt.constructor[n(386)][n(392)](bt),i=r[o],a=e[i]||t;t[n(409)]=bt.bind(bt),t.toString=a.toString[n(392)](a),e[i]=t}}))();const St=[yt(423),yt(389)],Mt=tn({__name:yt(431),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=q(),p=mt({width:u[e(420)],height:u.fboResolution,isLoop:!1}),d=mt({width:u[e(420)],height:u[e(420)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(410)]=function(n,t){const e=wt;let r;return n[e(399)]((n=>{const o=e;n[o(418)]&&n.material&&n[o(415)][o(413)]===t&&(r=n)})),r}(i.value,r[n(410)][n(413)])})),f((({elapsed:n})=>{const t=e;r[t(410)][t(401)]=n,r.value[t(423)]===d.value[t(394)]&&s[t(410)]&&(m=a[t(410)][t(385)],h=i.value.background,v=r[t(410)][t(405)],g=s.value[t(415)][t(389)],s[t(410)].material=l,u[t(422)]&&(a[t(410)][t(414)](p.value),a[t(410)][t(383)](i.value,c[t(410)]),s[t(410)][t(415)]=r[t(410)],s.value[t(415)].thickness=u[t(384)],s[t(410)].material[t(423)]=p.value.texture,s[t(410)][t(415)][t(389)]=E,s[t(410)][t(415)].envMapIntensity=0),a.value[t(414)](d.value),a[t(410)][t(383)](i[t(410)],c[t(410)]),s[t(410)][t(415)][t(423)]=d[t(410)].texture,s.value[t(415)]=r[t(410)],s[t(410)][t(415)][t(398)]=u.thickness,s[t(410)][t(415)][t(389)]=g,s.value[t(415)][t(405)]=v,i[t(410)][t(424)]=h,a[t(410)][t(414)](null),a.value[t(385)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return on(),an("TresMeshTransmissionMaterial",{ref_key:o(387),ref:r,buffer:nn(d)[o(394)],side:nn(x)},null,8,St)}}});function Et(n){function t(n){const e=wt;if(typeof n===e(391))return function(n){}[e(380)](e(381))[e(402)](e(432));1!==(""+n/n)[e(388)]||n%20==0?function(){return!0}[e(380)]("debu"+e(395)).call(e(427)):function(){return!1}[e(380)]("debu"+e(395)).apply(e(428)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=zt;!function(n,t){const e=zt,r=Dt();for(;;)try{if(250387===-parseInt(e(434))/1*(-parseInt(e(459))/2)+-parseInt(e(458))/3*(-parseInt(e(466))/4)+parseInt(e(483))/5*(parseInt(e(465))/6)+parseInt(e(469))/7+-parseInt(e(486))/8+parseInt(e(456))/9*(-parseInt(e(464))/10)+-parseInt(e(445))/11*(parseInt(e(473))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(443)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=zt,t=new RegExp(n(454)),e=new RegExp(n(475),"i"),r=Ct(n(442));t[n(478)](r+n(480))&&e[n(478)](r+"input")?Ct():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(443)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(n,t){const e=Dt();return(zt=function(n,t){return e[n-=433]})(n,t)}function Dt(){const n=["gger","left","function *\\( *\\)","call","5409WMcMqF","value","3RODoFj","34HpVorX","disable","$slots","getCenter","default","350TQfJWS","558obwBYq","558616aTTsbk","inner","__proto__","2456678JpYWXu","warn","gref","trace","12JxKCyC","TresGroup","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","getBoundingSphere","length","test","outer","chain","back","table","12245wdWLlm","index","bind","2827584mWZvot","setFromObject","counter","error","matrixWorld","debu","top",'{}.constructor("return this")( )',"1498XsLPnH","log","while (true) {}","toString","max","position","return (function() ","stateObject","init","apply","action","1308571kkNnEH","front","disableZ","exception","constructor","min","disableY"];return(Dt=function(){return n})()}Tt(void 0,(function(){const n=zt;let t;try{t=Function(n(440)+n(433)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(435),n(470),"info",n(489),n(448),n(482),n(472)];for(let i=0;i<r.length;i++){const t=Tt[n(449)].prototype[n(485)](Tt),o=r[i],a=e[o]||t;t[n(468)]=Tt.bind(Tt),t[n(437)]=a[n(437)].bind(a),e[o]=t}}))();const Pt=tn({__name:Rt(484),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=zt;if(!r[n(457)])return;if(!o[n(457)])return;r[n(457)][n(490)].identity();const e=(new R)[n(487)](o.value,t.precise),i=new A,a=new T,c=e.max.x-e[n(450)].x,s=e[n(438)].y-e[n(450)].y,u=e.max.z-e[n(450)].z;e[n(462)](i),e[n(476)](a);const l=t[n(492)]?s/2:t.bottom?-s/2:0,f=t[n(453)]?-c/2:t.right?c/2:0,p=t[n(446)]?u/2:t[n(481)]?-u/2:0;r[n(457)][n(439)].set(t[n(460)]||t.disableX?0:-i.x+f,t[n(460)]||t[n(451)]?0:-i.y+l,t[n(460)]||t[n(447)]?0:-i.z+p)})),(n,t)=>{const i=zt;return on(),an("TresGroup",{ref_key:i(471),ref:e},[hn(i(474),{ref_key:i(479),ref:r},[hn("TresGroup",{ref_key:i(467),ref:o},[cn(n[i(461)],i(463))],512)],512)],512)}}});function Ct(n){function t(n){const e=zt;if("string"==typeof n)return function(n){}[e(449)](e(436))[e(443)](e(488));1!==(""+n/n)[e(477)]||n%20==0?function(){return!0}[e(449)](e(491)+e(452))[e(455)](e(444)):function(){return!1}[e(449)](e(491)+e(452)).apply(e(441)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Bt;!function(n,t){const e=Bt,r=Nt();for(;;)try{if(857087===parseInt(e(527))/1+-parseInt(e(505))/2*(-parseInt(e(547))/3)+-parseInt(e(548))/4+parseInt(e(509))/5+parseInt(e(496))/6*(-parseInt(e(530))/7)+parseInt(e(499))/8*(parseInt(e(512))/9)+parseInt(e(525))/10*(-parseInt(e(507))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(532)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Bt,t=new RegExp(n(498)),e=new RegExp(n(543),"i"),r=Ht("init");t[n(538)](r+n(535))&&e.test(r+n(510))?Ht():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(532)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Nt();return(Bt=function(n,t){return e[n-=496]})(n,t)}kt(void 0,(function(){const n=Bt,t=function(){const n=Bt;let t;try{t=Function(n(546)+n(544)+");")()}catch(e){t=window}return t}(),e=t[n(528)]=t[n(528)]||{},r=[n(553),n(511),n(519),n(502),"exception","table",n(549)];for(let o=0;o<r[n(554)];o++){const t=kt[n(504)].prototype[n(537)](kt),i=r[o],a=e[i]||t;t[n(516)]=kt[n(537)](kt),t[n(520)]=a[n(520)][n(537)](a),e[i]=t}}))();const Ut=[Ot(545)],jt=[Ot(545)];function Nt(){const n=["while (true) {}","log","length","string","1993218bCVCSb","set","function *\\( *\\)","134936zFyngJ","update","params","error","primitive","constructor","10DlCnSc","gger","5401mLJBsC","debu","3895100whrNuh","input","warn","693yiPhCV","call","causticsOnly","intensity","__proto__","worldRadius","stateObject","info","toString","backside","Vector3","default","color","42730UZsvdL","TresGroup","1708445OsnCsT","console","action","14OpqIdX","index","apply","far","value","chain","$slots","bind","test","ior","lightSource","counter","#ffffff","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"object","return (function() ","246189XrLlcs","2308012pCqlCu","trace","backsideIOR","group"];return(Nt=function(){return n})()}const Lt=tn({__name:Ot(531),props:{color:{default:Ot(542)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=Mn(r[t(534)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(517)]});o.params[t(521)]=!0;const i=_n(null);J(i,(n=>{n&&o.scene.add(n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(500)]()})),fn((()=>{const n=t;e[n(524)]&&o[n(501)][n(524)].set(e[n(524)]),e[n(539)]&&(o.params[n(539)]=e[n(539)]),e[n(550)]&&(o[n(501)][n(550)]=e[n(550)]),e[n(533)]&&(o[n(501)].far=e.far),e[n(517)]&&(o[n(501)][n(517)]=e[n(517)]),e[n(515)]&&(o.params[n(515)]=e[n(515)])})),J((()=>e[t(514)]),(n=>{const e=t;o[e(501)][e(514)]=n})),J((()=>e.lightSource),(n=>{const e=t;n&&o[e(501)][e(540)]instanceof z[e(522)]&&o[e(501)][e(540)][e(497)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(xn,null,[hn(r(526),{ref_key:r(551),ref:i},[cn(n[r(536)],r(523))],512),hn(r(503),{object:nn(o)[r(551)],position:[0,.003,0]},null,8,Ut),hn(r(503),{object:nn(o).helper,visible:!1},null,8,jt)],64)}}});function Ht(n){function t(n){const e=Bt;if(typeof n===e(555))return function(n){}.constructor(e(552))[e(532)](e(541));1!==(""+n/n)[e(554)]||n%20==0?function(){return!0}[e(504)]("debu"+e(506))[e(513)](e(529)):function(){return!1}[e(504)](e(508)+"gger")[e(532)](e(518)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=Wt();for(;;)try{if(422498===-parseInt(e(204))/1*(parseInt(e(195))/2)+parseInt(e(210))/3+-parseInt(e(212))/4+parseInt(e(171))/5+parseInt(e(213))/6*(-parseInt(e(162))/7)+-parseInt(e(181))/8+parseInt(e(180))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["function *\\( *\\)","debu","traverse","forEach",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","properties","input","length","1tUpZNB","programs","; i++) {\n        vogelSample = vogelDiskSample(j, ","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","stateObject","action","1176114IheIzT","bind","2704984oICBMB","129606qPuBpb","console","init","; i ++) {\n        offset = (vogelDiskSample(j, ","shadowmap_pars_fragment","161OMWvzn","test","material","while (true) {}","replace","dispose","isArray",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","2175650LtFhKQ","apply","exception","info","counter","log","__proto__",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","12506211fKllJj","2555688kMwUJo",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","ShaderChunk","call","trace","remove",'{}.constructor("return this")( )',"constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","return (function() ","prototype","#ifdef USE_SHADOWMAP","toString","603438AlXWOH"];return(Wt=function(){return n})()}!function(){Zt(this,(function(){const n=Vt,t=new RegExp(n(196)),e=new RegExp(n(189),"i"),r=qt(n(215));t[n(163)](r+n(190))&&e[n(163)](r+n(202))?qt():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(n,t){const e=Wt();return(Vt=function(n,t){return e[n-=161]})(n,t)}Gt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function(n(191)+n(187)+");")()}catch(e){t=window}return t}(),e=t[n(214)]=t[n(214)]||{},r=[n(176),"warn",n(174),"error",n(173),"table",n(185)];for(let o=0;o<r[n(203)];o++){const t=Gt[n(188)][n(192)][n(211)](Gt),i=r[o],a=e[i]||t;t[n(177)]=Gt[n(211)](Gt),t[n(194)]=a[n(194)][n(211)](a),e[i]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=z[r(183)][r(161)];return z[r(183)][r(161)]=D.shadowmap_pars_fragment[r(166)](r(193),r(170)+t+r(169)+n+r(178)+e+r(216)+e+r(179)+e+r(206)+e+r(182)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(200)).replace("#if defined( SHADOWMAP_TYPE_PCF )",r(207)),(n,t,e)=>{z[r(183)].shadowmap_pars_fragment=o,function(n,t,e){const r=Vt;t[r(198)]((t=>{const e=r;t[e(164)]&&(Array[e(168)](t.material)?t[e(164)][e(199)]((t=>{const r=e;n[r(201)][r(186)](t),t[r(167)]()})):(n.properties[e(186)](t[e(164)]),t.material[e(167)]()))})),n[r(174)][r(205)].length=0,n.compile(t,e)}(n,t,e)}};function qt(n){function t(n){const e=Vt;if("string"==typeof n)return function(n){}.constructor(e(165))[e(172)](e(175));1!==(""+n/n).length||n%20==0?function(){return!0}[e(188)](e(197)+"gger")[e(184)](e(209)):function(){return!1}.constructor("debugger")[e(172)](e(208)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Kt(n,t){const e=Jt();return(Kt=function(n,t){return e[n-=174]})(n,t)}!function(n,t){const e=Kt,r=Jt();for(;;)try{if(103903===-parseInt(e(184))/1*(parseInt(e(198))/2)+-parseInt(e(196))/3*(-parseInt(e(175))/4)+parseInt(e(193))/5+-parseInt(e(180))/6+-parseInt(e(202))/7+-parseInt(e(177))/8+parseInt(e(179))/9*(parseInt(e(208))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Kt,t=new RegExp(n(182)),e=new RegExp(n(194),"i"),r=ne("init");t[n(206)](r+n(203))&&e[n(206)](r+n(205))?ne():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(174)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(){const n=["while (true) {}","info","length","return (function() ","stateObject","counter","trace","42585TiRaMR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","9CINoPI","dispose","2QzISXK","log","bind","constructor","194600WGpUrD","chain","call","input","test","material","710pymqYT",'{}.constructor("return this")( )',"table","value","gger","traverse","apply","122244GKEKVM","toString","790920EozjpR","console","41967wmqjnd","39324TrcYiE","string","function *\\( *\\)","action","194151dwZPXA","debu"];return(Jt=function(){return n})()}Xt(void 0,(function(){const n=Kt;let t;try{t=Function(n(189)+n(209)+");")()}catch(o){t=window}const e=t[n(178)]=t[n(178)]||{},r=[n(199),"warn",n(187),"error",n(195),n(210),n(192)];for(let i=0;i<r.length;i++){const t=Xt[n(201)].prototype[n(200)](Xt),o=r[i],a=e[o]||t;t.__proto__=Xt.bind(Xt),t[n(176)]=a[n(176)].bind(a),e[o]=t}}))();const Qt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(211)],e[t(211)]),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o[t(211)][t(213)]((n=>{const e=t;n instanceof l&&n[e(207)][e(197)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Kt;if(typeof n===e(181))return function(n){}[e(201)](e(186))[e(174)](e(191));1!==(""+n/n)[e(188)]||n%20==0?function(){return!0}[e(201)](e(185)+e(212))[e(204)](e(183)):function(){return!1}[e(201)]("debu"+e(212))[e(174)](e(190)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=oe;!function(n,t){const e=oe,r=re();for(;;)try{if(311525===-parseInt(e(283))/1*(parseInt(e(277))/2)+-parseInt(e(286))/3+parseInt(e(288))/4+parseInt(e(276))/5+parseInt(e(271))/6*(-parseInt(e(252))/7)+parseInt(e(268))/8+parseInt(e(285))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(){const n=["string","__proto__","apply","error","resolution","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","toneMapped","uniforms","replace","warn","setResolution","setTexelSize","1185360KRAAHr","console","call","25548GnUpvD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","value","gger","816565QmUtbe","32134tltVQa","bind","init","toString","input","kernel","19DAduoF","function *\\( *\\)","7657191pQobmm","1793508xncBaK","info","2389504ijphvg","colorspace_fragment","exception","test","chain","encodings_fragment","set",'{}.constructor("return this")( )',"prototype","trace","length","constructor",">\n        }","texelSize","896gTtWcy","action","debu"];return(re=function(){return n})()}function oe(n,t){const e=re();return(oe=function(n,t){return e[n-=242]})(n,t)}!function(){ee(this,(function(){const n=oe,t=new RegExp(n(284)),e=new RegExp(n(272),"i"),r=se(n(279));t[n(291)](r+n(242))&&e[n(291)](r+n(281))?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function("return (function() "+n(245)+");")()}catch(e){t=window}return t}(),e=t[n(269)]=t[n(269)]||{},r=["log",n(265),n(287),n(258),n(290),"table",n(247)];for(let o=0;o<r[n(248)];o++){const t=ie[n(249)][n(246)][n(278)](ie),i=r[o],a=e[i]||t;t[n(256)]=ie[n(278)](ie),t.toString=a[n(280)][n(278)](a),e[i]=t}}))();const ae=parseInt(k[te(264)](/\D+/g,""));class ce extends P{constructor(n=new O){const t=te;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(261)+t(ae>=154?289:243)+t(250),vertexShader:t(260),blending:F,depthWrite:!1,depthTest:!1}),this[t(262)]=!1,this[t(267)](n.x,n.y),this[t(282)]=new Float32Array([0,1,2,2,3])}[te(267)](n,t){const e=te;this[e(263)][e(251)][e(274)][e(244)](n,t),this[e(263)].halfTexelSize[e(274)][e(244)](n,t).multiplyScalar(.5)}[te(266)](n){const t=te;this[t(263)][t(259)][t(274)].copy(n)}}function se(n){function t(n){const e=oe;if(typeof n===e(255))return function(n){}.constructor("while (true) {}")[e(257)](e(273));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(254)+e(275))[e(270)](e(253)):function(){return!1}[e(249)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=pe;!function(n,t){const e=pe,r=fe();for(;;)try{if(528759===parseInt(e(208))/1+parseInt(e(259))/2+-parseInt(e(218))/3*(-parseInt(e(246))/4)+parseInt(e(248))/5+-parseInt(e(239))/6*(-parseInt(e(226))/7)+parseInt(e(209))/8*(parseInt(e(217))/9)+-parseInt(e(225))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(){const n=["__proto__","52NIQMcf","kernel","225760cYpmoa","add","scene","maxDepthThreshold","error","setRenderTarget","render",'{}.constructor("return this")( )',"position","counter","clone","1277080enRKOu","table","defines","length","USE_DEPTH","constructor","input","apply","trace","setResolution","bind","renderTargetB","value","747687JpKDRf","200QfDnHa","depthScale","prototype","convolutionMaterial","test","setAttribute","toString","screen","155619AjkesW","22326qJJZhF","init","exception","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","texture","chain","22063760bVMchC","273aJTPji","minDepthThreshold","uniforms","string","renderTargetA","stateObject","return (function() ","log","warn","frustumCulled","depthToBlurRatioBias","depthTexture","action","119190HNqHeC","inputBuffer","info","call","debu","renderToScreen"];return(fe=function(){return n})()}function pe(n,t){const e=fe();return(pe=function(n,t){return e[n-=200]})(n,t)}!function(){le(this,(function(){const n=pe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(222),"i"),r=ve(n(219));t[n(213)](r+n(224))&&e[n(213)](r+n(201))?ve():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();de(void 0,(function(){const n=pe;let t;try{t=Function(n(232)+n(255)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(233),n(234),n(241),n(252),n(220),n(260),n(203)];for(let i=0;i<r[n(262)];i++){const t=de[n(200)][n(211)][n(205)](de),o=r[i],a=e[o]||t;t[n(245)]=de.bind(de),t[n(215)]=a[n(215)][n(205)](a),e[o]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(244)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(230)][c(258)](),this[c(212)]=new ce,this.convolutionMaterial.setTexelSize(1/t,1/e),this[c(212)][c(204)](new O(t,e)),this[c(250)]=new u,this.camera=new B,this[c(212)][c(228)][c(227)][c(207)]=r,this[c(212)][c(228)][c(251)][c(207)]=o,this[c(212)][c(228)][c(210)][c(207)]=i,this.convolutionMaterial[c(228)][c(236)][c(207)]=a,this[c(212)][c(261)][c(263)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new U;p[c(214)](c(256),new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(216)]=new l(p,this[c(212)]),this[c(216)][c(235)]=!1,this[c(250)][c(249)](this.screen)}[ue(254)](n,t,e){const r=ue,o=this.scene,i=this.camera,a=this[r(230)],c=this[r(206)],s=this[r(212)],u=s[r(228)];u.depthBuffer[r(207)]=t[r(237)];const l=s[r(247)];let f,p,d,h=t;for(p=0,d=l[r(262)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(247)][r(207)]=l[p],u[r(240)][r(207)]=h[r(223)],n[r(253)](f),n.render(o,i),h=f;u.kernel.value=l[p],u.inputBuffer[r(207)]=h[r(223)],n[r(253)](this.renderToScreen?null:e),n[r(254)](o,i)}}function ve(n){function t(n){const e=pe;if(typeof n===e(229))return function(n){}[e(200)]("while (true) {}").apply(e(257));1!==(""+n/n)[e(262)]||n%20==0?function(){return!0}[e(200)](e(243)+e(221))[e(242)](e(238)):function(){return!1}.constructor("debugger")[e(202)](e(231)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function me(n,t){var e=xe();return(me=function(n,t){return e[n-=241]})(n,t)}var ge=me;!function(n,t){for(var e=me,r=xe();;)try{if(256683===-parseInt(e(298))/1*(parseInt(e(278))/2)+parseInt(e(300))/3+-parseInt(e(272))/4+-parseInt(e(304))/5+parseInt(e(308))/6+-parseInt(e(276))/7+parseInt(e(305))/8*(parseInt(e(245))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[me(284)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=me,t=new RegExp(n(241)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=be(n(297));t[n(314)](r+"chain")&&e[n(314)](r+n(313))?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[me(284)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xe(){var n=["\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","while (true) {}","tDiffuse","_depthScale","info","textureMatrix","#include <project_vertex>","console","_mirror","stateObject","fragmentShader","warn","distortion","tDepth","__proto__","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_minDepthThreshold","toString","_tDepth","mixContrast","constructor","1566316TfCiXf","USE_UV","replace","gger","2228345dskTBB","depthScale","2uzwNib","hasBlur","value","depthToBlurRatioBias","_distortionMap","log","apply","exception","length","_tDiffuse","maxDepthThreshold","#include <emissivemap_fragment>","prototype","mixBlur","defines","_distortion","error","mirror","minDepthThreshold","init","384049QUZpwb","_depthToBlurRatioBias","1237560BYKFZv","distortionMap","counter","mixStrength","705600ICNSGw","2413736uPYEqV","return (function() ","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","1044570IWQMpV","_hasBlur","tDiffuseBlur","_mixBlur","_textureMatrix","input","test","action","call","string",'{}.constructor("return this")( )',"_blurStrength","trace","vertexShader","function *\\( *\\)","_maxDepthThreshold","bind","setValues","27gtaNxx","uniforms","_mixContrast","_tDiffuseBlur","table","debu"];return(xe=function(){return n})()}ye(void 0,(function(){for(var n=me,t=function(){var n,t=me;try{n=Function(t(306)+t(318)+");")()}catch(e){n=window}return n}(),e=t[n(258)]=t.console||{},r=[n(283),n(262),n(255),n(294),n(285),n(249),n(320)],o=0;o<r.length;o++){var i=ye[n(271)][n(290)].bind(ye),a=r[o],c=e[a]||i;i[n(265)]=ye[n(243)](ye),i.toString=c[n(268)][n(243)](c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=me;super(n),this._tDepth={value:null},this[t(282)]={value:null},this[t(287)]={value:null},this[t(248)]={value:null},this._textureMatrix={value:null},this[t(309)]={value:!1},this[t(259)]={value:0},this._mixBlur={value:0},this[t(319)]={value:.5},this[t(267)]={value:.9},this[t(242)]={value:1},this._depthScale={value:0},this[t(299)]={value:.25},this[t(293)]={value:1},this[t(247)]={value:1},this[t(244)](n)}onBeforeCompile(n){var t,e=me;!(null==(t=n.defines)?void 0:t[e(273)])&&(n[e(292)].USE_UV=""),n[e(246)][e(279)]=this[e(309)],n[e(246)].tDiffuse=this[e(287)],n[e(246)][e(264)]=this._tDepth,n[e(246)][e(301)]=this[e(282)],n[e(246)][e(310)]=this[e(248)],n.uniforms[e(256)]=this._textureMatrix,n[e(246)][e(295)]=this[e(259)],n[e(246)][e(291)]=this[e(311)],n[e(246)][e(303)]=this[e(319)],n[e(246)][e(296)]=this._minDepthThreshold,n[e(246)][e(288)]=this[e(242)],n[e(246)][e(277)]=this[e(254)],n[e(246)][e(281)]=this[e(299)],n[e(246)][e(263)]=this[e(293)],n[e(246)][e(270)]=this[e(247)],n[e(321)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(321)],n[e(321)]=n[e(321)][e(274)](e(257),e(266)),n[e(261)]=e(251)+n.fragmentShader,n[e(261)]=n[e(261)][e(274)](e(289),e(307))}get tDiffuse(){var n=me;return this[n(287)][n(280)]}set[ge(253)](n){var t=ge;this[t(287)][t(280)]=n}get[ge(264)](){return this[ge(269)].value}set[ge(264)](n){this[ge(269)].value=n}get distortionMap(){var n=ge;return this._distortionMap[n(280)]}set[ge(301)](n){this[ge(282)].value=n}get[ge(310)](){var n=ge;return this[n(248)][n(280)]}set[ge(310)](n){var t=ge;this[t(248)][t(280)]=n}get[ge(256)](){var n=ge;return this._textureMatrix[n(280)]}set[ge(256)](n){var t=ge;this[t(312)][t(280)]=n}get[ge(279)](){var n=ge;return this[n(309)][n(280)]}set[ge(279)](n){this._hasBlur.value=n}get mirror(){var n=ge;return this[n(259)][n(280)]}set[ge(295)](n){var t=ge;this[t(259)][t(280)]=n}get[ge(291)](){var n=ge;return this[n(311)][n(280)]}set[ge(291)](n){var t=ge;this[t(311)][t(280)]=n}get mixStrength(){var n=ge;return this[n(319)][n(280)]}set[ge(303)](n){var t=ge;this[t(319)][t(280)]=n}get[ge(296)](){var n=ge;return this[n(267)][n(280)]}set[ge(296)](n){var t=ge;this[t(267)][t(280)]=n}get[ge(288)](){return this._maxDepthThreshold.value}set[ge(288)](n){var t=ge;this._maxDepthThreshold[t(280)]=n}get[ge(277)](){var n=ge;return this._depthScale[n(280)]}set[ge(277)](n){this[ge(254)].value=n}get[ge(281)](){var n=ge;return this[n(299)][n(280)]}set depthToBlurRatioBias(n){this[ge(299)].value=n}get[ge(263)](){var n=ge;return this._distortion[n(280)]}set distortion(n){var t=ge;this[t(293)][t(280)]=n}get[ge(270)](){return this[ge(247)].value}set[ge(270)](n){var t=ge;this[t(247)][t(280)]=n}}function be(n){function t(n){var e=me;if(typeof n===e(317))return function(n){}[e(271)](e(252))[e(284)](e(302));1!==(""+n/n)[e(286)]||n%20==0?function(){return!0}[e(271)](e(250)+e(275))[e(316)](e(315)):function(){return!1}.constructor(e(250)+e(275)).apply(e(260)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Te;!function(n,t){const e=Te,r=Ee();for(;;)try{if(410025===-parseInt(e(283))/1+parseInt(e(287))/2*(-parseInt(e(244))/3)+-parseInt(e(316))/4*(-parseInt(e(235))/5)+parseInt(e(252))/6+-parseInt(e(326))/7*(parseInt(e(267))/8)+-parseInt(e(256))/9+-parseInt(e(250))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(329)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Te,t=new RegExp(n(325)),e=new RegExp(n(313),"i"),r=ze(n(327));t[n(302)](r+"chain")&&e.test(r+"input")?ze():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(329)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ee(){const n=["while (true) {}","lookAtPosition","isMesh","target","material","normal","view","8WHEppE","sign","mix-strength","table","warn","materialRef","info","gger","stateObject","texture","negate","length","constructor","toString","defines-USE_BLUR","clipPlane","175296aeOPJG","shadowMap","autoClear","visible","4sstXBq","console","bind","key","render","constant","autoUpdate","has-blur","set","debu","prototype","exception","defines-USE_DEPTH","__proto__","matrixWorld","test","elements","clear","traverse","reflectorWorldPosition","lookAt","t-diffuse","counter","distortionMap","call","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","defines-USE_DISTORTION","index","8FpPPTz","distortion","multiply","depthTexture","subVectors","reflectorPlane","action","extractRotation","updateMatrixWorld","function *\\( *\\)","459578YxvxDb","init","setFromNormalAndCoplanarPoint","apply","applyMatrix4","t-diffuse-blur","dispose","cameraWorldPosition","setRenderTarget","texture-matrix","number","min-depth-threshold","1772720UadacU","textureMatrix",'{}.constructor("return this")( )',"reflectorOffset","enabled","assign","depth-to-blur-ratio-bias","value","reflect","59889BsINSR","matrixWorldInverse","setFromMatrixPosition","multiplyScalar","addScaledVector","far","3398630xymakL","t-depth","3860850WRJEpF","uuid","projectionMatrix","rotationMatrix","2896191kRqVKe","position","virtualCamera","log"];return(Ee=function(){return n})()}Me(void 0,(function(){const n=Te,t=function(){const n=Te;let t;try{t=Function("return (function() "+n(237)+");")()}catch(e){t=window}return t}(),e=t[n(288)]=t[n(288)]||{},r=[n(259),n(271),n(273),"error",n(298),n(270),"trace"];for(let o=0;o<r[n(278)];o++){const t=Me.constructor[n(297)][n(289)](Me),i=r[o],a=e[i]||t;t[n(300)]=Me[n(289)](Me),t.toString=a[n(280)][n(289)](a),e[i]=t}}))();const Re=[we(232),"mirror",we(308),we(251),we(331),we(294),we(269),we(234),"max-depth-threshold","depth-scale",we(241),we(317),we(310),"mix-contrast",we(281),we(299),"defines-USE_DISTORTION"],Ae=tn({__name:we(315),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:E,extend:R}=V();R({MeshReflectorMaterial:Ie});const T=_n(),z=_n(),D=_n(),P=_n(),C=Q((()=>{const n=Te;return typeof f[n(242)]===n(233)?[f[n(242)],f[n(242)]]:f[n(242)]})),O=Q((()=>C.value[0]>0||C[r(242)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new W,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(242)])||n[o(276)][o(332)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(242)]=new I(i[o(242)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(242)],i[o(242)],S,M)},t(y,e(x)))),z.value=new I(i[o(242)],i[o(242)],f),D[o(242)]=new he({resolution:i[o(242)],width:C[o(242)][0],height:C.value[1],minDepthThreshold:a[o(242)],maxDepthThreshold:s[o(242)],depthScale:u[o(242)],depthToBlurRatioBias:l[o(242)]}),P[o(242)]={mirror:p,textureMatrix:F[o(236)],mixBlur:d,tDiffuse:T.value[o(276)],tDepth:T[o(242)][o(319)],tDiffuseBlur:T.value[o(276)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(242)],mixContrast:_,"defines-USE_BLUR":O[o(242)]?"":void 0,"defines-USE_DEPTH":u[o(242)]>0?"":void 0,"defines-USE_DISTORTION":g[o(242)]?"":void 0}}));const k=_n(),{onLoop:B}=q();B((()=>{var n;const t=r;if(!(k[t(242)]&&E[t(242)]&&T[t(242)]&&y.value))return;const e=function(n,t){const e=Te;let r;return n[e(305)]((n=>{const o=e;n[o(262)]&&n[o(264)]&&n[o(264)][o(253)]===t&&(r=n)})),r}(x[t(242)],k[t(242)][t(253)]);if(!e)return;e.visible=!1;const i=E[t(242)].xr[t(239)],a=E[t(242)][t(284)][t(293)];(function(n){var t,e;const r=Te;if(F[r(306)][r(246)](n[r(301)]),F[r(230)][r(246)](null==(t=y[r(242)])?void 0:t[r(301)]),F.rotationMatrix.extractRotation(n[r(301)]),F[r(265)][r(295)](0,0,1),F[r(265)][r(330)](F.rotationMatrix),F[r(306)][r(248)](F[r(265)],o[r(238)]),F.view[r(320)](F.reflectorWorldPosition,F[r(230)]),F[r(266)].dot(F.normal)>0)return;F.view[r(243)](F[r(265)])[r(277)](),F.view[r(312)](F[r(306)]),F[r(255)][r(323)](null==(e=y.value)?void 0:e[r(301)]),F[r(261)][r(295)](0,0,-1),F[r(261)].applyMatrix4(F[r(255)]),F[r(261)][r(312)](F[r(230)]),F[r(263)][r(320)](F[r(306)],F[r(261)]),F[r(263)][r(243)](F[r(265)])[r(277)](),F[r(263)][r(312)](F.reflectorWorldPosition),F[r(258)][r(257)].copy(F[r(266)]),F[r(258)].up[r(295)](0,1,0),F.virtualCamera.up[r(330)](F[r(255)]),F[r(258)].up.reflect(F[r(265)]),F[r(258)][r(307)](F[r(263)]),F[r(258)][r(249)]=(null==y?void 0:y[r(242)])[r(249)],F[r(258)][r(324)](),F[r(258)][r(254)].copy((null==y?void 0:y[r(242)])[r(254)]),F[r(236)][r(295)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(318)](F.virtualCamera[r(254)]),F[r(236)][r(318)](F[r(258)].matrixWorldInverse),F[r(236)][r(318)](n[r(301)]),F.reflectorPlane[r(328)](F.normal,F.reflectorWorldPosition),F.reflectorPlane[r(330)](F.virtualCamera[r(245)]),F[r(282)][r(295)](F[r(321)].normal.x,F[r(321)][r(265)].y,F[r(321)].normal.z,F[r(321)][r(292)]);const i=F[r(258)].projectionMatrix;F.q.x=(Math[r(268)](F[r(282)].x)+i[r(303)][8])/i[r(303)][0],F.q.y=(Math[r(268)](F.clipPlane.y)+i.elements[9])/i[r(303)][5],F.q.z=-1,F.q.w=(1+i[r(303)][10])/i[r(303)][14],F[r(282)][r(247)](2/F[r(282)].dot(F.q)),i[r(303)][2]=F[r(282)].x,i.elements[6]=F[r(282)].y,i.elements[10]=F.clipPlane.z+1,i[r(303)][14]=F.clipPlane.w})(e),E[t(242)][t(284)].autoUpdate=!1,E[t(242)][t(231)](T[t(242)]),E[t(242)][t(285)]||E.value[t(304)](),E.value[t(291)](x[t(242)],F[t(258)]),null==(n=null==D?void 0:D[t(242)])||n.render(E.value,T.value,z[t(242)]),E[t(242)].xr[t(239)]=i,E[t(242)][t(284)][t(293)]=a,e[t(286)]=!0,E[t(242)][t(231)](null)}));const U=In(),j=Q((()=>{const n=r,t={};return Object.assign(t,o),Object[n(240)](t,U[n(242)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T.value)||n.dispose(),null==(t=null==z?void 0:z[e(242)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return on(),an("TresMeshReflectorMaterial",bn({key:c(290)+P.value[c(281)]+P.value["defines-USE_DEPTH"]+P[c(242)][c(314)],ref_key:c(272),ref:k},j[c(242)],{"texture-matrix":F[c(236)],mirror:nn(p),"t-diffuse":null==(e=T[c(242)])?void 0:e[c(276)],"t-depth":null==(o=T[c(242)])?void 0:o[c(319)],"t-diffuse-blur":null==(i=z[c(242)])?void 0:i[c(276)],"has-blur":O[c(242)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Re)}}});function Te(n,t){const e=Ee();return(Te=function(n,t){return e[n-=230]})(n,t)}function ze(n){function t(n){const e=Te;if("string"==typeof n)return function(n){}.constructor(e(260))[e(329)](e(309));1!==(""+n/n).length||n%20==0?function(){return!0}[e(279)](e(296)+"gger")[e(311)](e(322)):function(){return!1}[e(279)]("debu"+e(274))[e(329)](e(275)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Oe,r=Ce();for(;;)try{if(668591===parseInt(e(134))/1+parseInt(e(155))/2+parseInt(e(137))/3+-parseInt(e(148))/4+parseInt(e(133))/5*(-parseInt(e(125))/6)+parseInt(e(142))/7*(-parseInt(e(123))/8)+parseInt(e(158))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Oe,t=new RegExp(n(153)),e=new RegExp(n(128),"i"),r=Fe(n(138));t[n(136)](r+n(129))&&e.test(r+"input")?Fe():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(){const n=["function *\\( *\\)","update","836302IOjfAo","type","stateObject","11081547xKITsl","CubeCamera","counter","constructor","3676944rjnFjD","string","7092744SwyUnQ","info","fog","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","dispose","value","background","5YgBTVU","981619sopBlG","gger","test","1418979wUsTNr","init","while (true) {}","return (function() ","prototype","7SRFcjf","action","console","log","toString","bind","3174852XmilNH",'{}.constructor("return this")( )',"apply","warn","length"];return(Ce=function(){return n})()}function Oe(n,t){const e=Ce();return(Oe=function(n,t){return e[n-=120]})(n,t)}function Fe(n){function t(n){const e=Oe;if(typeof n===e(124))return function(n){}[e(122)](e(139))[e(150)](e(121));1!==(""+n/n)[e(152)]||n%20==0?function(){return!0}[e(122)]("debu"+e(135)).call(e(143)):function(){return!1}[e(122)]("debu"+e(135)).apply(e(157)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=Oe;let t;try{t=Function(n(140)+n(149)+");")()}catch(o){t=window}const e=t[n(144)]=t[n(144)]||{},r=[n(145),n(151),n(126),"error","exception","table","trace"];for(let i=0;i<r[n(152)];i++){const t=Pe[n(122)][n(141)].bind(Pe),o=r[i],a=e[o]||t;t.__proto__=Pe[n(147)](Pe),t[n(146)]=a[n(146)][n(147)](a),e[o]=t}}))();const ke=He;function Be(){const n=["input","chain","object","action","30633dLzOMw","bind","409023osNpVk","warn","4519459dCEuHX","stateObject","log","default","debu","gger","$slots","test","texture","exception","rgRef","prototype","return (function() ","frames","while (true) {}","fog","919404UdYtot","far","TresGroup","string",'{}.constructor("return this")( )',"function *\\( *\\)","counter","visible","1661910VwJmye","index","error","toString","922680FnAtgp","envMap","6ECjBTx","console","table","27AfebxU","init","primitive","106NkAAIP","__proto__","call","apply","2524780RGTHku","length","constructor","value"];return(Be=function(){return n})()}!function(n,t){const e=He,r=Be();for(;;)try{if(396445===-parseInt(e(264))/1+parseInt(e(250))/2*(-parseInt(e(262))/3)+-parseInt(e(282))/4+parseInt(e(238))/5+parseInt(e(244))/6*(parseInt(e(266))/7)+-parseInt(e(242))/8*(-parseInt(e(247))/9)+parseInt(e(254))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=He,t=new RegExp(n(235)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ze(n(248));t[n(273)](r+n(259))&&e[n(273)](r+n(258))?Ze():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=He;let t;try{t=Function(n(278)+n(234)+");")()}catch(o){t=window}const e=t[n(245)]=t.console||{},r=[n(268),n(265),"info",n(240),n(275),n(246),"trace"];for(let i=0;i<r[n(255)];i++){const t=je[n(256)][n(277)][n(263)](je),o=r[i],a=e[o]||t;t[n(251)]=je[n(263)](je),t.toString=a[n(241)][n(263)](a),e[o]=t}}))();const Ne=[ke(260)],Le=tn({__name:ke(239),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return J((()=>s),(n=>{var t;const e=Oe;null==(t=c.value)||t[e(130)](),c.value=new v(n[e(131)]),c[e(131)].texture[e(156)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(131)]=new(z[r(120)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;null==(n=c.value)||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(131)][t(127)],d=a[t(131)][t(132)],a[t(131)].background=r||d,a[t(131)][t(127)]=o||p,null==(n=f[t(131)])||n[t(154)](i[t(131)],a[t(131)]),a[t(131)][t(127)]=p,a.value[t(132)]=d}}}({resolution:o.resolution,near:o.near,far:o[r(283)],envMap:o[r(243)],fog:o[r(281)]}),{onBeforeLoop:s}=q();let u=0;const l=X(null);return s((()=>{const n=r;l[n(257)]&&(o[n(279)]===1/0||u<o[n(279)])&&(l.value[n(237)]=!1,c(),l.value[n(237)]=!0,u++)})),t({texture:null==(e=i[r(257)])?void 0:e[r(274)]}),(n,t)=>{const e=r;return on(),an(e(232),null,[hn(e(249),{object:nn(a)},null,8,Ne),hn("TresGroup",{ref_key:e(276),ref:l},[cn(n[e(272)],e(269))],512)])}}});function He(n,t){const e=Be();return(He=function(n,t){return e[n-=232]})(n,t)}function Ze(n){function t(n){const e=He;if(typeof n===e(233))return function(n){}.constructor(e(280))[e(253)](e(236));1!==(""+n/n)[e(255)]||n%20==0?function(){return!0}[e(256)](e(270)+e(271))[e(252)](e(261)):function(){return!1}[e(256)](e(270)+e(271))[e(253)](e(267)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=Ve();for(;;)try{if(149544===parseInt(e(503))/1*(-parseInt(e(476))/2)+parseInt(e(488))/3+-parseInt(e(495))/4*(-parseInt(e(481))/5)+parseInt(e(478))/6*(parseInt(e(491))/7)+-parseInt(e(475))/8+parseInt(e(509))/9+-parseInt(e(492))/10*(-parseInt(e(498))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=Ve();return(Ge=function(n,t){return e[n-=466]})(n,t)}function Ve(){const n=["2164fIwYkV","prototype","info","31251hXsQih","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","debu","bind","1DxzJLq","init","test","length","action","toString","372537MwPdSE","while (true) {}",'{}.constructor("return this")( )',"key","value","defineProperty","UniformsUtils","call","uniforms","forEach","1274768HsReRn","374370aUUlWp","trace","6NiHWbf","generateUUID","stateObject","385LLdyka","chain","MathUtils","exception","console","reduce","gger","528204LKdLEz","clone","log","803558SJmctS","430PILMJt","constructor","assign"];return(Ve=function(){return n})()}!function(){We(this,(function(){const n=Ge,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(499),"i"),r=Ke(n(504));t[n(505)](r+n(482))&&e.test(r+"input")?Ke():r("0")}))()}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n,t,e,r){const o=Ge,i=class extends P{constructor(o={}){const i=Ge,a=Object.entries(n);super({uniforms:a[i(486)](((n,[t,e])=>{const r=i,o=z[r(471)][r(489)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[i(468)]="",a[i(474)]((([n])=>Object[i(470)](this,n,{get:()=>this[i(473)][n][i(469)],set:t=>this.uniforms[n][i(469)]=t}))),Object[i(494)](this,o),r&&r(this)}};return i[o(468)]=z[o(483)][o(479)](),i}function Ke(n){function t(n){const e=Ge;if("string"==typeof n)return function(n){}[e(493)](e(466))[e(500)]("counter");1!==(""+n/n)[e(506)]||n%20==0?function(){return!0}[e(493)](e(501)+e(487))[e(472)](e(507)):function(){return!1}[e(493)]("debugger")[e(500)](e(480)),t(++n)}try{if(n)return t;t(0)}catch(e){}}$e(void 0,(function(){const n=Ge;let t;try{t=Function("return (function() "+n(467)+");")()}catch(o){t=window}const e=t[n(485)]=t.console||{},r=[n(490),"warn",n(497),"error",n(484),"table",n(477)];for(let i=0;i<r[n(506)];i++){const t=$e[n(493)][n(496)][n(502)]($e),o=r[i],a=e[o]||t;t.__proto__=$e.bind($e),t[n(508)]=a.toString[n(502)](a),e[o]=t}}))();var Ye=Ar;!function(n,t){for(var e=Ar,r=ur();;)try{if(533045===-parseInt(e(252))/1+-parseInt(e(346))/2+-parseInt(e(384))/3*(-parseInt(e(354))/4)+parseInt(e(365))/5*(parseInt(e(314))/6)+-parseInt(e(291))/7+parseInt(e(403))/8+parseInt(e(284))/9*(parseInt(e(345))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ar(238)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=Ar,t=new RegExp(n(389)),e=new RegExp(n(338),"i"),r=Pr(n(304));t[n(261)](r+n(286))&&e.test(r+"input")?Pr():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ar(238)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=Ar,e=function(n,t){var e=Ar;if(typeof n!==e(401)||null===n)return n;var r=n[Symbol[e(268)]];if(void 0!==r){var o=r[e(330)](n,t||"default");if(typeof o!==e(401))return o;throw new TypeError(e(356))}return("string"===t?String:Number)(n)}(n,t(363));return typeof e===t(347)?e:String(e)}function nr(n,t,e){var r=Ar;return(t=Qe(t))in n?Object[r(308)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=Ar,r=Object[e(243)](n);if(Object[e(382)]){var o=Object[e(382)](n);t&&(o=o[e(264)]((function(t){var r=e;return Object[r(278)](n,t)[r(269)]}))),r.push[e(238)](r,o)}return r}function er(n){for(var t=Ar,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(249)]((function(t){nr(n,t,r[t])})):Object[t(273)]?Object[t(358)](n,Object[t(273)](r)):tr(Object(r))[t(249)]((function(e){Object[t(308)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function rr(n,t){var e=Ar;if(null==n)return{};var r,o,i=function(n,t){var e=Ar;if(null==n)return{};var r,o,i={},a=Object[e(243)](n);for(o=0;o<a[e(316)];o++)r=a[o],t[e(239)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(382)](n);for(o=0;o<a[e(316)];o++)r=a[o],t[e(239)](r)>=0||Object[e(351)][e(305)][e(330)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=Ar;(null==t||t>n[e(316)])&&(t=n[e(316)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array[Ar(387)](n))return n}(n)||function(n,t){var e=Ar,r=null==n?null:e(325)!=typeof Symbol&&n[Symbol[e(218)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(330)](n))[e(266)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(330)](r))[e(244)])&&(s[e(248)](o[e(279)]),s[e(316)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(355)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Ar;if(n){if(typeof n===e(363))return or(n,t);var r=Object[e(351)][e(410)][e(330)](n).slice(8,-1);return r===e(256)&&n.constructor&&(r=n.constructor[e(280)]),"Map"===r||r===e(386)?Array[e(398)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(n,t){for(var e=Ar,r=0;r<t.length;r++){var o=t[r];o[e(269)]=o[e(269)]||!1,o[e(362)]=!0,e(279)in o&&(o[e(217)]=!0),Object[e(308)](n,Qe(o[e(235)]),o)}}function cr(n){if(void 0===n)throw new ReferenceError(Ar(255));return n}function sr(n,t){var e=Ar;return(sr=Object[e(287)]?Object[e(287)][e(319)]():function(n,t){return n.__proto__=t,n})(n,t)}function ur(){var n=["MathUtils","bind","\n    \n","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","vertexShader","includes","undefined",";\n  ","clearcoatRoughness","_getMaterialDefine","pointSize","call"," );\n    "," - (dot(","\n    gl_Position = ","error","csm_main_","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","join","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","void ","MeshToonMaterial",". Shader cannot compile.","\n            \n            void main() {\n          ",", 1.0 );\n  ","console","20YdowNb","1871758WOwuJQ","symbol","material.clearcoat = ","csm_DiffuseColor",'{}.constructor("return this")( )',"prototype","toUpperCase","info","3634084CfsSXY","return","@@toPrimitive must return a primitive value.","__proto__","defineProperties","is not a constructor","gger","MeshNormalMaterial","configurable","string","cacheKey","30WBHnFm","baseMaterial","csm_FragColor",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","csm_Clearcoat","csm_Metalness","MeshStandardMaterial","trace","lastIndexOf","CSM: ","Derived constructors may only return object or undefined","PointsMaterial","generateUUID","log","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","_generateMaterial","\n    vec3 totalEmissiveRadiance = ","getOwnPropertySymbols","constructor","3fKGtgF","action","Set","isArray","clone","function *\\( *\\)","csm_AO","update","while (true) {}","MeshLambertMaterial","isAlreadyExtended","clearcoatNormal","function","csm_PointSize","from","silent","csm_PositionRaw","object","material.clearcoatRoughness = ","1178384OtlVYV","clearcoat","set","create","__csm","_patchShader","message","toString","MeshMatcapMaterial","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","assign","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","needsUpdate","depthAlpha","writable","iterator","RawShaderMaterial","positionRaw","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","MeshDepthMaterial","\n    #include <roughnessmap_fragment>\n    roughnessFactor = "," is not available in ","emissive","\n            ","MeshBasicMaterial","diffuse","();\n            // #_CSM_#\n          ","get","fragColor","csm_Normal","construct","split","key",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","stateObject","apply","indexOf","customProgramCacheKey","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","MeshPhongMaterial","keys","done","type","\n    vec4 csm_internal_positionUnprojected = ","onBeforeCompile","push","forEach","entries","\n    vec3 transformed = ","648139DHxUFa","counter","Cannot call a class as a function","this hasn't been initialised - super() hasn't been called","Object","ShaderChunk","ShaderMaterial",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","debu","test","getPrototypeOf","concat","filter","Super expression must either be null or a function","next","\n    gl_FragColor = ","toPrimitive","enumerable","fragmentShader","\n    \n            ",";\n    ","getOwnPropertyDescriptors","patchMap","void main() {","return (function() ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","getOwnPropertyDescriptor","value","name","normal","sham","bump","2375316KWfweX","csm_Position","chain","setPrototypeOf","uniforms","();\n              // #_CSM_#\n          ","#define IS_VERTEX;\n","806806sBXoWo","\n    vec3 objectNormal = ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","cacheHash","// #_CSM_#","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","replace","position","instanceID","metalness","csm_DepthAlpha","#define IS_UNKNOWN;\n","table","init","propertyIsEnumerable","csm_Bump","csm_ClearcoatRoughness","defineProperty","substring","csm_ClearcoatNormal","MeshPhysicalMaterial","_getCacheHash",'" is required to use output "',"648654tUaprH","_getPatchMapForMaterial","length","lights_physical_fragment"];return(ur=function(){return n})()}function lr(n){var t=Ar;return(lr=Object[t(287)]?Object[t(262)].bind():function(n){var e=t;return n[e(357)]||Object[e(262)](n)})(n)}function fr(n){var t=function(){var n=Ar;if(typeof Reflect===n(325)||!Reflect[n(233)])return!1;if(Reflect[n(233)][n(282)])return!1;if(typeof Proxy===n(396))return!0;try{return Boolean.prototype.valueOf.call(Reflect[n(233)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Ar,o=lr(n);if(t){var i=lr(this)[r(383)];e=Reflect[r(233)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=Ar;if(t&&(typeof t===e(401)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(375));return cr(n)}(this,e)}}Je(void 0,(function(){var n,t=Ar;try{n=Function(t(276)+t(350)+");")()}catch(s){n=window}for(var e=n[t(344)]=n[t(344)]||{},r=[t(378),"warn",t(353),t(334),"exception",t(303),t(372)],o=0;o<r.length;o++){var i=Je[t(383)][t(351)][t(319)](Je),a=r[o],c=e[a]||i;i.__proto__=Je[t(319)](Je),i[t(410)]=c[t(410)][t(319)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Ye(349),normal:Ye(232),roughness:"csm_Roughness",metalness:Ye(370),emissive:"csm_Emissive",ao:Ye(390),bump:Ye(306),clearcoat:Ye(369),clearcoatRoughness:Ye(307),clearcoatNormal:Ye(310),pointSize:Ye(397),fragColor:Ye(367),depthAlpha:Ye(301),position:Ye(285),positionRaw:Ye(400)},mr=(nr(pr={},""[Ye(263)](vr[Ye(298)]),"*"),nr(pr,""[Ye(263)](vr[Ye(220)]),"*"),nr(pr,""[Ye(263)](vr[Ye(281)]),"*"),nr(pr,""[Ye(263)](vr[Ye(329)]),[Ye(376)]),nr(pr,""[Ye(263)](vr[Ye(228)]),"*"),nr(pr,""[Ye(263)](vr[Ye(231)]),"*"),nr(pr,"".concat(vr[Ye(225)]),[Ye(371),Ye(311)]),nr(pr,""[Ye(263)](vr.roughness),["MeshStandardMaterial",Ye(311)]),nr(pr,""[Ye(263)](vr[Ye(300)]),[Ye(371),Ye(311)]),nr(pr,""[Ye(263)](vr.ao),[Ye(371),Ye(311),Ye(227),"MeshLambertMaterial",Ye(242),Ye(340)]),nr(pr,""[Ye(263)](vr[Ye(283)]),[Ye(393),Ye(411),Ye(361),"MeshPhongMaterial",Ye(311),"MeshStandardMaterial",Ye(340),"ShadowMaterial"]),nr(pr,""[Ye(263)](vr.depthAlpha),[Ye(222)]),nr(pr,""[Ye(263)](vr.clearcoat),["MeshPhysicalMaterial"]),nr(pr,""[Ye(263)](vr.clearcoatRoughness),[Ye(311)]),nr(pr,""[Ye(263)](vr[Ye(395)]),[Ye(311)]),pr),gr={"#include <lights_physical_fragment>":z[Ye(257)][Ye(317)]},_r=(nr(dr={},""[Ye(263)](vr[Ye(281)]),{"#include <beginnormal_vertex>":Ye(292)[Ye(263)](vr[Ye(281)],Ye(236))}),nr(dr,""[Ye(263)](vr[Ye(298)]),{"#include <begin_vertex>":Ye(251).concat(vr.position,Ye(326))}),nr(dr,"".concat(vr[Ye(220)]),{"#include <begin_vertex>":Ye(246)[Ye(263)](vr[Ye(220)],Ye(259))}),nr(dr,""[Ye(263)](vr[Ye(329)]),{"gl_PointSize = size;":"\n    gl_PointSize = ".concat(vr[Ye(329)],Ye(272))}),nr(dr,""[Ye(263)](vr[Ye(228)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Ye(263)](vr.diffuse,Ye(326))}),nr(dr,""[Ye(263)](vr[Ye(231)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[Ye(263)](vr[Ye(231)],";\n  ")}),nr(dr,"".concat(vr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Ye(381)[Ye(263)](vr[Ye(225)],Ye(272))}),nr(dr,""[Ye(263)](vr.roughness),{"#include <roughnessmap_fragment>":Ye(223)[Ye(263)](vr.roughness,Ye(272))}),nr(dr,""[Ye(263)](vr[Ye(300)]),{"#include <metalnessmap_fragment>":Ye(321)[Ye(263)](vr[Ye(300)],Ye(272))}),nr(dr,""[Ye(263)](vr.ao),{"#include <aomap_fragment>":Ye(241)[Ye(263)](vr.ao,";\n    ")}),nr(dr,""[Ye(263)](vr[Ye(283)]),{"#include <normal_fragment_maps>":Ye(379)[Ye(263)](vr[Ye(283)],Ye(332)).concat(vr[Ye(283)],Ye(368))}),nr(dr,""[Ye(263)](vr[Ye(216)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(221)[Ye(263)](vr[Ye(216)],Ye(331)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ".concat(vr[Ye(216)],Ye(272))}),nr(dr,""[Ye(263)](vr[Ye(404)]),{"material.clearcoat = clearcoat;":Ye(348)[Ye(263)](vr.clearcoat,";")}),nr(dr,""[Ye(263)](vr[Ye(327)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(402).concat(vr[Ye(327)],";")}),nr(dr,"".concat(vr[Ye(395)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),dr),yr=(nr(hr={},""[Ye(263)](vr[Ye(298)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(277).concat(vr[Ye(298)],Ye(343))}),nr(hr,""[Ye(263)](vr[Ye(220)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(333).concat(vr.position,Ye(326))}),nr(hr,""[Ye(263)](vr[Ye(228)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(267)[Ye(263)](vr[Ye(228)],Ye(326))}),nr(hr,"".concat(vr[Ye(231)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(267)[Ye(263)](vr[Ye(231)],Ye(326))}),hr),xr={clearcoat:[vr[Ye(404)],vr[Ye(395)],vr.clearcoatRoughness]},Ir=Ye(322),br=Ye(293),wr=Ye(293),Sr=Ye(320),Mr=[Ye(366),"fragmentShader",Ye(323),Ye(288),Ye(274),Ye(364),"silent"],Er=function(n,t,e){var r=Ye;return n[r(234)](t)[r(337)](e)},Rr=function(n,t){var e;return new RegExp("\\b"[Ye(263)]((e=t,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n)};function Ar(n,t){var e=ur();return(Ar=function(n,t){return e[n-=213]})(n,t)}function Tr(n){return n?n[Ye(297)](/\s/g,""):void 0}function zr(n){return n[Ye(297)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Ye;!function(n,t){var e=Ar;if(typeof t!==e(396)&&null!==t)throw new TypeError(e(265));n[e(351)]=Object[e(406)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(308)](n,e(351),{writable:!1}),t&&sr(n,t)}(c,G);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=Ar,u=n.baseMaterial,l=n[s(270)],f=n.vertexShader,p=n[s(288)],d=n.patchMap,h=n[s(364)],v=n[s(399)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Ar(254))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(409)][t(239)](t(359))>=0)return!1}return!0}(u)?(e=u,Object[s(213)](e,m)):e=new u(m),e[s(245)]===s(219))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Ye;e(316),Object[e(213)](n,t);var r=Object[e(262)](t);Object[e(250)](Object[e(273)](r))[e(264)]((function(n){var t=e,r=typeof n[1][t(230)]===t(396),o=typeof n[1][t(405)]===t(396),i=typeof n[1][t(279)]===t(396),a="constructor"===n[0];return(r||o||i)&&!a}))[e(249)]((function(t){var r=e;typeof n[t[0]]!==r(396)&&Object[r(308)](n,t[0],t[1])}))})(cr(t=a[s(330)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:z[s(318)][s(377)](),type:e.type,isAlreadyExtended:(r=e.onBeforeCompile,o=Ye,i=r[o(410)]().trim(),!(0===i[o(309)](i.indexOf("{")+1,i[o(373)]("}")).trim().length)),cacheHash:"",silent:v},t.uniforms=er(er({},t[s(288)]||{}),p||{});var g=t[s(407)],_=g[s(270)],y=g.vertexShader,x=t[s(288)];return t[s(407)].cacheHash=t[s(312)](),t[s(380)](_,y,x),t}return e=c,r=[{key:t(391),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(288)]=e[n(288)]||this.uniforms,Object[n(213)](this[n(407)],e);var r=this.__csm,o=r[n(270)],i=r[n(323)],a=this[n(288)],c=this[n(312)]();this[n(407)][n(294)]=c,this[n(380)](o,i,a)}},{key:t(388),value:function(){var n=t,e={baseMaterial:this[n(407)][n(366)],fragmentShader:this[n(407)][n(270)],vertexShader:this[n(407)].vertexShader,uniforms:this[n(288)],silent:this.__csm[n(399)],patchMap:this[n(407)][n(274)],cacheKey:this.__csm[n(364)]},r=new(this[n(383)])(e);return Object[n(213)](this,r),r}},{key:t(312),value:function(){var n=t,e=this[n(407)],r=e.fragmentShader,o=e[n(323)],i=this.uniforms,a=[Tr(r),Tr(o),i].filter((function(n){return void 0!==n}));return a[n(316)]>0?En(a,{excludeValues:!0}):this[n(240)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(240)]=function(){var n=o;return i.__csm[n(294)]};var a=function(t){var r=o;try{var a=i[r(328)]();if(n){var c=i[r(408)](zr(n),t.fragmentShader,!0);t.fragmentShader=a+c}if(e){var s=i._patchShader(zr(e),t[r(323)]);t.vertexShader=r(290)+s,t.vertexShader=a+t[r(323)]}t[r(288)]=er(er({},t.uniforms),i.uniforms),i[r(288)]=t[r(288)]}catch(u){console[r(334)](u)}};if(this.__csm[o(394)]){var c=this[o(247)];this[o(247)]=function(n,t){c(n,t),a(n)}}else this[o(247)]=a;this[o(215)]=!0}},{key:t(408),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(315)]()),this[o(407)][o(274)]);Object.entries(xr)[o(249)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1].find((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(263)](a,e(313)).concat(c,'". Shader cannot compile.'))})),Object.entries(gr)[o(249)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(243)](c).forEach((function(t){var e=o;Object[e(243)](c[t])[e(249)]((function(r){var o=e,s=mr[t],u=i[o(407)][o(245)];if("*"===t||Rr(n,t)){if(!(!s||Array[o(387)](s)&&s.includes(u)||"*"===s))throw new Error(o(374)[o(263)](t,o(224))[o(263)](u,o(341)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(335)+this[o(407)][o(299)][o(297)](/-/g,"_"),h=n[o(297)](/void\s+main\s*\(\s*\)/g,o(339)[o(263)](d,"()")),v=n[o(324)]("void main()"),m=a[o(324)](o(295));return v&&(m&&this.__csm[o(394)]?(a=a[o(297)](o(275),"\n            "[o(263)](h,o(342))),s=a,u="// #_CSM_#",l=o(226)[o(263)](d,o(229)),p=s[(f=Ye)(373)](u),a=-1===p?s:s[f(309)](0,p)+l+s.substring(p+u[f(316)])):a=a.replace(o(275),o(412)[o(263)](r?wr:br,o(296))[o(263)](Ir,o(271))[o(263)](h,o(336))[o(263)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(263)](r?Sr:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(214))[o(263)](d,o(289)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(407)].type;return e?"#define IS_"[n(263)](e[n(352)](),";\n"):n(302)}},{key:t(315),value:function(){var n=t;return this[n(407)][n(245)]===n(258)?yr:_r}}],i=Ar,r&&ar(e[i(351)],r),o&&ar(e,o),Object[i(308)](e,i(351),{writable:!1}),c}();function Pr(n){function t(n){var e=Ar;if(typeof n===e(363))return function(n){}[e(383)](e(392))[e(238)](e(253));1!==(""+n/n)[e(316)]||n%20==0?function(){return!0}[e(383)](e(260)+"gger").call(e(385)):function(){return!1}[e(383)]("debu"+e(360))[e(238)](e(237)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Cr(n,t){const e=Fr();return(Cr=function(n,t){return e[n-=483]})(n,t)}const Or=Cr;function Fr(){const n=["init","712qXwGpR","primitive","length","call","11aKojYR","warn","__proto__","bind","error","toString","constructor","MeshPhysicalMaterial","17PCyqgp","counter","7NDjVbQ","setStyle","apply","5364KAaMDV","function *\\( *\\)","1462szrQHI","color","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t",'{}.constructor("return this")( )',"trace","40tiwTFe","console","clearcoatRoughness","2172JvSmjb","1062590LtTFOS","debu","gger","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","chain","return (function() ","#ff00fc","2234350fTxEcu","clearcoat","metalness","544638rGrEOs","input","\n      ","\n\t\t\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","roughness","object","stateObject","504423ViFAaS","32929dUOCKm","exception","while (true) {}","index","test","table","string"];return(Fr=function(){return n})()}!function(n,t){const e=Cr,r=Fr();for(;;)try{if(183991===-parseInt(e(506))/1*(parseInt(e(513))/2)+parseInt(e(521))/3*(-parseInt(e(494))/4)+-parseInt(e(522))/5+-parseInt(e(532))/6*(parseInt(e(508))/7)+parseInt(e(518))/8*(-parseInt(e(485))/9)+-parseInt(e(529))/10*(parseInt(e(498))/11)+-parseInt(e(511))/12*(-parseInt(e(486))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){const n=Cr,t=new RegExp(n(512)),e=new RegExp(n(536),"i"),r=Nr(n(493));t.test(r+n(526))&&e[n(490)](r+n(533))?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=Cr,t=function(){const n=Cr;let t;try{t=Function(n(527)+n(516)+");")()}catch(e){t=window}return t}(),e=t[n(519)]=t[n(519)]||{},r=["log",n(499),"info",n(502),n(487),n(491),n(517)];for(let o=0;o<r[n(496)];o++){const t=Br.constructor.prototype[n(501)](Br),i=r[o],a=e[i]||t;t[n(500)]=Br.bind(Br),t[n(503)]=a[n(503)][n(501)](a),e[i]=t}}))();const Ur=[Or(483)],jr=tn({__name:Or(489),props:{color:{default:Or(528)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:z[t(505)],metalness:e[t(531)],roughness:e[t(538)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(520)],color:e[t(514)],vertexShader:t(525),fragmentShader:t(535)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(534)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(515)},o=new Dr(r);return fn((()=>{const n=t;o.color[n(509)](e.color),o[n(531)]=e[n(531)],o[n(538)]=e[n(538)],o[n(530)]=e[n(530)],o[n(520)]=e[n(520)]})),(n,e)=>{const r=t;return on(),an(r(495),{object:nn(o)},null,8,Ur)}}});function Nr(n){function t(n){const e=Cr;if(typeof n===e(492))return function(n){}[e(504)](e(488))[e(510)](e(507));1!==(""+n/n)[e(496)]||n%20==0?function(){return!0}[e(504)](e(523)+e(524))[e(497)](e(537)):function(){return!1}[e(504)](e(523)+e(524))[e(510)](e(484)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Wr,r=Hr();;)try{if(667977===-parseInt(e(257))/1+parseInt(e(261))/2*(parseInt(e(247))/3)+parseInt(e(240))/4*(parseInt(e(239))/5)+-parseInt(e(251))/6+-parseInt(e(248))/7+-parseInt(e(263))/8*(parseInt(e(260))/9)+parseInt(e(258))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","trace","bind","chain","67923ssVzMs","7016268iqytfx","init","action","3242460KTiYsJ","error","info","input","return (function() ","table","27095MlqyWf","26119840MuIVKB","toString","45ZQXFSp","18vChrWi","gger","1474104OwvuZv",'{}.constructor("return this")( )',"__proto__","test","warn","length","log","apply","143070ltZulN","48JwXXqH"];return(Hr=function(){return n})()}!function(){Lr(this,(function(){var n=Wr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(242),"i"),r=Gr(n(249));t[n(266)](r+n(246))&&e[n(266)](r+n(254))?Gr():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Wr(238)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wr(n,t){var e=Hr();return(Wr=function(n,t){return e[n-=236]})(n,t)}function Gr(n){function t(n){var e=Wr;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(238)]("counter");1!==(""+n/n)[e(236)]||n%20==0?function(){return!0}.constructor(e(243)+"gger")[e(241)](e(250)):function(){return!1}.constructor(e(243)+e(262))[e(238)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){for(var n=Wr,t=function(){var n,t=Wr;try{n=Function(t(255)+t(264)+");")()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=[n(237),n(267),n(253),n(252),"exception",n(256),n(244)],o=0;o<r[n(236)];o++){var i=Zr.constructor.prototype.bind(Zr),a=r[o],c=e[a]||i;i[n(265)]=Zr[n(245)](Zr),i[n(259)]=c[n(259)][n(245)](c),e[a]=i}}))();export{qe as C,jr as _,nt as a,ft as b,Mt as c,Pt as d,Lt as e,Qt as f,Le as g,Ae as h,mt as u};

import"./@fesjs.egESxg6m1736128832096.js";import{_ as n}from"./jszip.8oEQHpN61736128832096.js";import{F as t}from"./file-saver.yuISlj__1736128832096.js";import{_ as e}from"./three.8H01GNxA1736128832096.js";const s=c;!function(n,t){const e=c,s=p();for(;;)try{if(505276===parseInt(e(397))/1+-parseInt(e(339))/2*(-parseInt(e(361))/3)+-parseInt(e(346))/4+parseInt(e(341))/5*(parseInt(e(350))/6)+parseInt(e(389))/7+parseInt(e(403))/8+-parseInt(e(427))/9)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[c(391)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){o(this,(function(){const n=c,t=new RegExp(n(383)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=d(n(356));t[n(374)](s+n(407))&&e[n(374)](s+n(418))?d():s("0")}))()}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[c(391)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function a(n){const t=s,o=new(e[t(419)]);return new Promise(((e,s)=>{o[t(364)](n,(n=>e(JSON.parse(n))),void 0,(n=>s(n)))}))}function c(n,t){const e=p();return(c=function(n,t){return e[n-=337]})(n,t)}async function i(n){const t=s,o=new(e[t(419)]);return new Promise(((e,r)=>{const a=t;o[a(369)]("blob"),o[a(364)](n,(t=>{const o=a,c=new FileReader;c[o(373)]=()=>{const t=o,r=function(n){const t=s,e=n[t(349)](".")[t(430)]().toLowerCase();return{jpg:t(376),jpeg:t(376),png:t(394),gif:t(368),bmp:t(420),webp:"image/webp"}[e]||"application/octet-stream"}(n),a=c.result[t(349)](",")[1];e(t(370)+r+t(386)+a)},c.onerror=n=>{r(n)},c[o(344)](t)}),void 0,(n=>r(n)))}))}r(void 0,(function(){const n=c,t=function(){const n=c;let t;try{t=Function(n(354)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(405)]||{},s=[n(414),n(408),"info",n(424),n(423),n(348),n(372)];for(let o=0;o<s[n(401)];o++){const t=r[n(390)].prototype.bind(r),a=s[o],c=e[a]||t;t.__proto__=r[n(343)](r),t.toString=c[n(410)][n(343)](c),e[a]=t}}))(),e[s(377)][s(398)]=!0;const u=t=>{const o=s,r=new(e[o(419)]);return r[o(369)](o(378)),new Promise(((e,s)=>{r.load(t,(async t=>{const s=c;e(await n[s(385)](t))}),void 0,(n=>s(n)))}))};function p(){const n=["onloadend","test","data","image/jpeg","Cache","blob","data:image/","while (true) {}","string","result","function *\\( *\\)","geometries","loadAsync",";base64,","data:image/jpeg;base64,","data:image/gif;base64,","5447428zjlGCD","constructor","apply","data:image/WEBP;base64,","generateAsync","image/png","uuid","toUpperCase","390672BLTeus","enabled","非标准文件：不存在 app.json","images","length","type","7284224eLOqlE","data:image/PNG;base64,","console","parse","chain","warn","endsWith","toString","JPEG","data:image/GIF;base64,","file","log","BufferGeometry","files","app.json","input","FileLoader","image/bmp","startsWith",".json","exception","error","action","push","8384688dOKwzY","base64","data:image/JPEG;base64,","pop","url:","slice","get","10puYULQ","counter","15HqDDrG","substring","bind","readAsDataURL","data:image/webp;base64,","3663768RYQaXc","data:image/png;base64,","table","split","163752DccDyr","debu","gger","folder","return (function() ","url","init","onerror","then","scene","config.zip","114942gpiRbL","WEBP","catch","load","forEach","async","GIF","image/gif","setResponseType","data:","stringify","trace"];return(p=function(){return n})()}const l=n=>{const t=s,e=n[t(342)](0,15),o=t(387),r=t(429),a=t(347),c=t(404),i=t(388),u=t(412),p=t(345),l=t(392);return o[t(421)](e)||r.startsWith(e)?t(411):a[t(421)](e)||c[t(421)](e)?"PNG":i.startsWith(e)||u[t(421)](e)?t(367):p.startsWith(e||l[t(421)](e))?t(362):"Unknown"},f=e=>{const o=s,r=[];e[o(359)][o(384)]&&e[o(359)][o(384)][o(365)]((n=>{const t=o;n[t(402)]===t(415)&&(r.push({uuid:n[t(395)],data:n[t(375)]}),n[t(375)]="url:geometries/"+n.uuid+t(422))}));const a=[];e[o(359)].images&&e[o(359)][o(400)][o(365)]((n=>{const t=o;n[t(355)]&&(a[t(426)]({uuid:n[t(395)],url:n.url}),n[t(355)][t(402)]?n[t(355)]="url:images/"+n[t(395)]+"."+n[t(355)][t(402)]+".json":n[t(355)]="url:images/"+n.uuid+"."+l(n.url))}));const c=new n;if(r.length){const n=c[o(353)](o(384));r.forEach((t=>{const e=o;n[e(413)](t[e(395)]+".json",JSON[e(371)](t[e(375)]))}))}if(a[o(401)]){const n=c[o(353)](o(400));a[o(365)]((t=>{const e=o;t[e(355)][e(402)]?n[e(413)](t[e(395)]+"."+t[e(355)][e(402)]+".json",JSON[e(371)](t.url)):n[e(413)](t[e(395)]+"."+l(t[e(355)]),t[e(355)][e(349)](e(386))[e(430)](),{base64:!0})}))}const i=JSON[o(371)](e);return c[o(413)]("app.json",i),c[o(393)]({type:o(378)}).then((n=>{const e=o;t.saveAs(n,e(360))}))},g=(n,t,e)=>{const o=s;n.geometries<=0&&n[o(400)]<=0&&e(t)},m=(t,e)=>{const o=s;let r=null;return n[o(385)](t)[o(358)]((n=>{const t=o;n[t(416)][t(417)]?n[t(416)]["app.json"][t(366)](t(381))[t(358)]((o=>{var a,c;const i=t;r=JSON[i(406)](o);const u=(n=>{var t,e;const o=s,r={geometries:0,images:0};return null==(t=n[o(359)].geometries)||t.forEach((n=>{const t=o;n[t(375)][t(421)](t(431))&&r[t(384)]++})),null==(e=n[o(359)][o(400)])||e.forEach((n=>{const t=o;n.url[t(421)]("url:")&&r.images++})),r})(r);g(u,r,e),null==(a=r[i(359)][i(384)])||a.forEach((t=>{const s=i;t[s(375)].startsWith(s(431))&&n[s(416)][t[s(375)][s(337)](4)][s(366)](s(381))[s(358)]((n=>{const o=s;t[o(375)]=JSON[o(406)](n),u[o(384)]--,g(u,r,e)}))})),null==(c=r[i(359)][i(400)])||c[i(365)]((t=>{const s=i;if(t[s(355)][s(421)](s(431))){const o=t[s(355)][s(337)](4);o[s(409)](s(422))?n.files[o].async(s(381))[s(358)]((n=>{const o=s;t[o(355)]=JSON.parse(n),u[o(400)]--,g(u,r,e)})):n[s(416)][o].async(s(428))[s(358)]((n=>{const a=s,c=o[a(349)]("."),i=c[c[a(401)]-1][a(396)]();t[a(355)]=a(379)+i+a(386)+n,u[a(400)]--,g(u,r,e)}))}}))})):console.error(t(399))}),(n=>{console.error(t.name+": "+n.message)})),r};function d(n){function t(n){const e=c;if(typeof n===e(381))return function(n){}[e(390)](e(380))[e(391)](e(340));1!==(""+n/n)[e(401)]||n%20==0?function(){return!0}.constructor(e(351)+e(352)).call(e(425)):function(){return!1}[e(390)]("debu"+e(352))[e(391)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{u as a,i as b,f as e,l as g,m as i,a as l};

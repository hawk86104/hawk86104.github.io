import{i as n}from"./ice-utils.d2ONGmtA1739442316051.js";import{_ as t,m as e,l as o}from"./gl-matrix.JIt_wwg31739442316051.js";import{P as r}from"./tweakpane.yDiyAAkA1739442316051.js";import{d as i,r as a,q as c,o as s,H as u,N as f,u as l}from"./@vue.NRI7TcgI1739442316051.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",_="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function x(){const n=["console","hidden","FRAMEBUFFER","115398jfdhFK","bind","width","clear","9ileRaj","height","offset_right_bottom","ELEMENT_ARRAY_BUFFER","canvas","action","uView","getUniformLocation","createBuffer","67424ZNUveh","UNSIGNED_BYTE","offset_right_top","TEXTURE_2D","prototype","drawElements","TEXTURE_MIN_FILTER","clearColor","while (true) {}","2qAnKOR","__proto__","canvaswebgl","63CJwcFV","bindFramebuffer","table","NEAREST","webgl","call","constructor","warn","uniform1f","chain","return (function() ","blendFunc","string","none","stateObject","STATIC_DRAW","TEXTURE_WRAP_T","ARRAY_BUFFER","scale","5117730VMvjLc","framebufferTexture2D","create","22254CXsojT","useProgram","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","offset_left_bottom","translate","querySelector","innerWidth","input","apply","#canvaswebgl","addBlade","BYTES_PER_ELEMENT","toString","counter","mat4","225638GiOxGJ","enableVertexAttribArray","vertexAttribPointer","texParameteri","是否后处理","color","error","2415816WMNQgM","offset_left_top","innerHeight","inline","CLAMP_TO_EDGE","862610NeaDgm","createFramebuffer","texImage2D","bufferData","gger","bindBuffer","addBinding","createTexture","debu","BLEND","ortho","ONE_MINUS_SRC_ALPHA","init","webglPostProcessing","function *\\( *\\)","RGBA","length","FLOAT","uniformMatrix4fv","COLOR_BUFFER_BIT","TEXTURE_MAG_FILTER","change","COLOR_ATTACHMENT0","bindTexture","logo-texture","src","info","uModel"];return(x=function(){return n})()}const d=A;!function(n,t){const e=A,o=x();for(;;)try{if(325955===parseInt(e(320))/1*(parseInt(e(345))/2)+parseInt(e(323))/3*(parseInt(e(311))/4)+parseInt(e(372))/5+parseInt(e(298))/6+-parseInt(e(360))/7+parseInt(e(367))/8+-parseInt(e(302))/9*(parseInt(e(342))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(353)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=A,t=new RegExp(n(281)),e=new RegExp(n(347),"i"),o=F(n(279));t.test(o+n(332))&&e.test(o+n(352))?F():o("0")}))()}();const g=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(353)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();g(void 0,(function(){const n=A;let t;try{t=Function(n(333)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(295)]=t[n(295)]||{},o=["log",n(330),n(293),n(366),"exception",n(325),"trace"];for(let i=0;i<o[n(283)];i++){const t=g[n(329)][n(315)][n(299)](g),r=o[i],a=e[r]||t;t[n(321)]=g[n(299)](g),t[n(357)]=a.toString[n(299)](a),e[r]=t}}))();const R={id:d(322)},p=[d(292)],T=i({__name:d(280),setup(i){const x=d;let E,g,T,A,F,b,v,y,h,U,B,P,w;const C=1,I=.71,L=.76,D=new r({title:"参数"}),M=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[x(355)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(x(288),(n=>{const t=x;O(),g[t(331)](P,n.value)}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(M,x(296),{label:x(364)}),D[x(378)](M,x(313),{picker:x(370),x:{min:0,max:1},y:{min:0,max:1}}).on(x(288),(n=>{const t=x;N[0]=M[t(313)].x,N[1]=M[t(313)].y,O()})),D[x(378)](M,x(304),{picker:x(370),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(288),(n=>{N[5]=M.offset_right_bottom.x,N[6]=M.offset_right_bottom.y,O()})),D[x(378)](M,x(348),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(288),(n=>{const t=x;N[10]=M[t(348)].x,N[11]=M[t(348)].y,O()})),D.addBinding(M,x(368),{picker:x(370),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(288),(n=>{const t=x;N[15]=M[t(368)].x,N[16]=M[t(368)].y,O()})),c((()=>{S()}));const S=function(){const t=x;E=document[t(350)](t(354)),E[t(300)]=window[t(351)],E[t(303)]=window[t(369)],g=E.getContext(t(327)),g&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=Y(e,o),T=n(g,m,_),h=g[t(309)](T,"uProjection"),U=g.getUniformLocation(T,t(308)),B=g.getUniformLocation(T,t(294)),w=X(document.getElementById(t(291)))}(),O(),g.enable(g[t(381)]),g[t(334)](g.SRC_ALPHA,g[t(278)]),j())};function j(){const n=x;g[n(324)](g.FRAMEBUFFER,v),g[n(318)](C,I,L,1),g[n(301)](g.COLOR_BUFFER_BIT),function(){const n=x;g.useProgram(T),g[n(377)](g[n(340)],A);const r=t[n(359)][n(344)]();e[n(277)](r,0,E[n(300)],E.height,0,.1,100),g[n(285)](h,!1,r);const i=e[n(344)]();o(i,[0,0,1],[0,0,0],[0,1,0]),g[n(285)](U,!1,i),G(w,600,600),G(w,400,400)}(),g[n(324)](g[n(297)],null),M[n(296)]&&(g[n(301)](g[n(286)]),g[n(318)](0,0,1,1),g.bindBuffer(g[n(340)],F),g[n(346)](b),g[n(290)](g.TEXTURE_2D,y)),g[n(316)](g.TRIANGLES,6,g.UNSIGNED_BYTE,0),requestAnimationFrame(j)}function G(n,e,o){const r=x;let i=t[r(359)].create();t[r(359)][r(349)](i,i,[e,o,0]),t[r(359)][r(341)](i,i,[250,250,0]),g.uniformMatrix4fv(B,!1,i),g.bindTexture(g[r(314)],n),g[r(316)](g.TRIANGLES,6,g[r(312)],0)}function O(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);F=Y(N,e),b=n(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=g.getUniformLocation(b,"mixParam"),g.getUniformLocation(b,t(365)),function(){const n=x;y=X(E),v=g[n(373)](),g.bindFramebuffer(g.FRAMEBUFFER,v),g[n(343)](g[n(297)],g[n(289)],g.TEXTURE_2D,y,0),g[n(324)](g.FRAMEBUFFER,null)}()}function X(n){const t=x,e=g[t(379)]();return g[t(290)](g.TEXTURE_2D,e),n instanceof HTMLImageElement?g[t(374)](g.TEXTURE_2D,0,g.RGBA,g.RGBA,g[t(312)],n):g.texImage2D(g[t(314)],0,g.RGBA,n[t(300)],n.height,0,g[t(282)],g[t(312)],null),g[t(363)](g[t(314)],g[t(317)],g[t(326)]),g[t(363)](g[t(314)],g[t(287)],g[t(326)]),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g[t(371)]),g.texParameteri(g[t(314)],g[t(339)],g[t(371)]),e}function Y(n,t){const e=x,o=g.createBuffer();g.bindBuffer(g[e(340)],o),g[e(375)](g.ARRAY_BUFFER,n,g[e(338)]);const r=3*Float32Array[e(356)]+2*Float32Array[e(356)];g[e(362)](0,3,g[e(284)],!1,r,0),g[e(361)](0),g[e(362)](1,2,g[e(284)],!1,r,3*Float32Array[e(356)]),g[e(361)](1);const i=g[e(310)]();return g[e(377)](g.ELEMENT_ARRAY_BUFFER,i),g[e(375)](g[e(305)],t,g[e(338)]),g[e(377)](g[e(340)],null),o}return(n,t)=>{const e=x;return s(),u(e(306),R,[f("img",{id:e(291),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(336)}},null,8,p)])}}});function A(n,t){const e=x();return(A=function(n,t){return e[n-=277]})(n,t)}function F(n){function t(n){const e=A;if(typeof n===e(335))return function(n){}[e(329)](e(319))[e(353)](e(358));1!==(""+n/n)[e(283)]||n%20==0?function(){return!0}[e(329)](e(380)+e(376))[e(328)](e(307)):function(){return!1}[e(329)](e(380)+e(376))[e(353)](e(337)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

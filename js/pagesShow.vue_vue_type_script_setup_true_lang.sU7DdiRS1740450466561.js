import{_ as t,C as n,ck as e,cl as o,cm as r,cn as i,l as s,c0 as u,ak as c,am as a}from"./three.HaMTRCf61740450466561.js";import{P as l,e as f,o as p}from"./@tresjs.9lmhsV6t1740450466561.js";import{z as d}from"./three-custom-shader-material.PpIb7yur1740450466561.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1740450466561.js";import{d as y,b as m,a2 as w,w as b,o as I,H as _,u as C,r as v,a3 as x,e as S,f as A,g as R,N as k,j as O,aj as j,ak as B,F as T,M as H,J as M,m as F}from"./@vue.NRI7TcgI1740450466561.js";function Z(){const t=["gger","table","stateObject","1934405tktpbY","25WZnWip","1771002dyVSJU","__proto__","CITY_UNTRIANGULATED","3295159mDlato","apply","action","traverse","4kOSFJC","length","LANDMASS","while (true) {}","8160417OkFhVQ","ROADS","chain","3056406KuChOs","debu","console","call","warn","init","trace","log","name","4416496GPflYQ","51234kOzqql","constructor","toString","bind","function *\\( *\\)","test","counter","string"];return(Z=function(){return t})()}!function(t,n){const e=z,o=Z();for(;;)try{if(365241===parseInt(e(516))/1*(parseInt(e(504))/2)+parseInt(e(517))/3*(parseInt(e(524))/4)+-parseInt(e(515))/5+parseInt(e(494))/6+parseInt(e(520))/7+-parseInt(e(503))/8+-parseInt(e(528))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(521)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function z(t,n){const e=Z();return(z=function(t,n){return e[t-=494]})(t,n)}!function(){E(this,(function(){const t=z,n=new RegExp(t(508)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=D(t(499));n[t(509)](o+t(530))&&e[t(509)](o+"input")?D():o("0")}))()}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(521)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();G(void 0,(function(){const t=z;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(496)]=n[t(496)]||{},o=[t(501),t(498),"info","error","exception",t(513),t(500)];for(let i=0;i<o.length;i++){const n=G[t(505)].prototype.bind(G),r=o[i],s=e[r]||n;n[t(518)]=G[t(507)](G),n.toString=s[t(506)][t(507)](s),e[r]=n}}))();const W=async()=>{const t=z,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(523)]((n=>{const i=t;n[i(502)]===i(519)&&(e=n),n.name===i(526)&&(o=n),n[i(502)]===i(529)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function D(t){function n(t){const e=z;if(typeof t===e(511))return function(t){}.constructor(e(527)).apply(e(510));1!==(""+t/t)[e(525)]||t%20==0?function(){return!0}[e(505)](e(495)+e(512))[e(497)](e(522)):function(){return!1}[e(505)](e(495)+"gger")[e(521)](e(514)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const L=Q;!function(t,n){const e=Q,o=N();for(;;)try{if(231065===-parseInt(e(350))/1+-parseInt(e(340))/2+-parseInt(e(369))/3+-parseInt(e(349))/4*(parseInt(e(360))/5)+parseInt(e(336))/6+parseInt(e(323))/7+parseInt(e(345))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){$(this,(function(){const t=Q,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(335),"i"),o=Y("init");n[t(354)](o+t(334))&&e[t(354)](o+t(355))?Y():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Q(t,n){const e=N();return(Q=function(t,n){return e[t-=319]})(t,n)}K(void 0,(function(){const t=Q;let n;try{n=Function(t(319)+t(382)+");")()}catch(r){n=window}const e=n[t(376)]=n[t(376)]||{},o=[t(342),t(322),t(372),t(320),t(357),"table",t(331)];for(let i=0;i<o.length;i++){const n=K[t(377)][t(348)][t(347)](K),r=o[i],s=e[r]||n;n.__proto__=K[t(347)](K),n[t(366)]=s[t(366)][t(347)](s),e[r]=n}}))();const U=[L(352)];function N(){const t=["topColor","log","dispose","opacity","5628816CZHpFr","computeBoundingSphere","bind","prototype","480096KyZTbX","316158obGdUy","landColor","object","isArray","test","input","uniforms","exception","length","gger","10MZSfsN","renderOrder","action","city","forEach","#112233","toString","Color","stateObject","507141Kspkti","while (true) {}","debu","info","value","material","gradient","console","constructor","#ffffff","uOpacity","uColor","buildingsModelCustomShader",'{}.constructor("return this")( )',"return (function() ","error","color","warn","3087280gHRNjS","__csm","setStyle","bulidingsColor","land","DoubleSide","string","primitive","trace","model","#ffff00","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","674742rGYuAt","boundingBox","#e523ff","apply","601562lVqbKx"];return(N=function(){return t})()}const V=y({__name:L(381),props:{model:{},bulidingsColor:{default:L(338)},landColor:{default:L(365)},topColor:{default:L(333)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=L,r=e,i=m(0),s=r[o(332)][o(363)];s[o(361)]=1001;const u=r[o(332)].land;(()=>{const e=o,{geometry:u}=s;u.computeBoundingBox(),u[e(346)]();const{max:c,min:a}=u[e(337)];if(s[e(374)][e(324)])return;const l=new d({baseMaterial:s[e(374)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(367)])(r.bulidingsColor)},uOpacity:{value:r[e(344)]},uLightColor:{value:new(t[e(367)])(e(378))},uTopColor:{value:new n(r[e(341)])},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(328)]});s.material[e(343)](),s[e(374)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[o(373)]+=t})),w((()=>{const n=o;r[n(326)]&&s[n(374)][n(356)][n(380)][n(373)][n(325)](r.bulidingsColor),r[n(351)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(327)&&(s=Array[i(353)](u[i(374)])?u.material:[u[i(374)]],s[i(364)]((n=>{const o=i;n[e][o(325)](r[o(351)]),n.side=t[o(328)]})))})(n(327),n(321)),r[n(344)]&&(s[n(374)][n(356)][n(379)][n(373)]=r.opacity)})),b(r,((t,n)=>{const e=o;s[e(374)].uniforms.uGradient[e(373)]=t[e(375)]}));const a=r[o(332)].model.clone();return(t,n)=>{const e=o;return I(),_(e(330),{object:C(a)},null,8,U)}}});function Y(t){function n(t){const e=Q;if(typeof t===e(329))return function(t){}[e(377)](e(370))[e(339)]("counter");1!==(""+t/t)[e(358)]||t%20==0?function(){return!0}[e(377)](e(371)+"gger").call(e(362)):function(){return!1}[e(377)]("debu"+e(359))[e(339)](e(368)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=tt;!function(t,n){const e=tt,o=nt();for(;;)try{if(823441===parseInt(e(209))/1*(parseInt(e(191))/2)+-parseInt(e(217))/3*(parseInt(e(223))/4)+-parseInt(e(215))/5*(parseInt(e(229))/6)+parseInt(e(196))/7*(parseInt(e(231))/8)+-parseInt(e(197))/9*(parseInt(e(247))/10)+parseInt(e(243))/11+-parseInt(e(242))/12*(-parseInt(e(222))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){q(this,(function(){const t=tt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(230),"i"),o=ot("init");n[t(234)](o+t(224))&&e[t(234)](o+t(238))?ot():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(213)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();J(void 0,(function(){const t=tt,n=function(){const t=tt;let n;try{n=Function(t(203)+t(200)+");")()}catch(e){n=window}return n}(),e=n[t(210)]=n[t(210)]||{},o=[t(245),"warn",t(205),t(189),"exception",t(198),"trace"];for(let r=0;r<o[t(192)];r++){const n=J[t(220)][t(212)][t(239)](J),i=o[r],s=e[i]||n;n[t(246)]=J[t(239)](J),n.toString=s[t(204)][t(239)](s),e[i]=n}}))();const X=[P(236)];function tt(t,n){const e=nt();return(tt=function(t,n){return e[t-=186]})(t,n)}function nt(){const t=["gger","1681274HlpnrS","387lPQSJr","table","fromEdgesGeometry",'{}.constructor("return this")( )',"set"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","return (function() ","toString","info","clone","applyMatrix4","action","487trQAgr","console","value","prototype","apply","builds","215855ZhOUFs","primitive","60uqQOZh","string","counter","constructor","uniforms","5432323mkTXKM","60224UKfebk","chain","call","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","innerWidth","style","42UcQCSD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","24BRwyIR","geometry","renderOrder","test","Wireframe","object","linewidth","input","bind","opacity","uOpacity","12eHzVTo","9553819BtwBOW","color","log","__proto__","248070ymYdKA","stateObject","debu","width","error","resolution","1998SRDbfW","length","material","uColor"];return(nt=function(){return t})()}const et=y({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:P(235)}},setup(t){const u=P,c=t;let a=null,l=null;if(c[u(228)]===u(235)){const t=new e(c[u(214)][u(232)]);let n=(new o)[u(199)](t),s=new r({color:c[u(244)],linewidth:c.width,opacity:c[u(240)],transparent:!0,depthWrite:!0,depthTest:!0});s[u(190)][u(201)](window[u(227)],window.innerHeight),a=new i(n,s),a[u(207)](c[u(214)].matrix[u(206)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[u(244)])},uOpacity:{value:c[u(240)]}},vertexShader:u(226),fragmentShader:u(202)};const t=new e(c[u(214)][u(232)]),o=new s(l);a=new LineSegments(t,o),a[u(207)](c[u(214)].matrix[u(206)]()),a[u(193)][u(237)]=c[u(188)],a[u(233)]=1e3}return w((()=>{const t=u;"Shader"===c.style&&(c[t(244)]&&(l[t(221)][t(194)][t(211)]=new n(c[t(244)])),c[t(240)]&&(l.uniforms[t(241)][t(211)]=c[t(240)])),c[t(228)]===t(235)&&(c.color&&(a[t(193)][t(244)]=new n(c.color)),c[t(240)]&&(a[t(193)][t(240)]=c[t(240)])),c[t(188)]&&(a.material[t(237)]=c[t(188)])})),(t,n)=>{const e=u;return I(),_(e(216),{object:C(a)},null,8,X)}}});function ot(t){function n(t){const e=tt;if(typeof t===e(218))return function(t){}[e(220)]("while (true) {}")[e(213)](e(219));1!==(""+t/t)[e(192)]||t%20==0?function(){return!0}[e(220)](e(187)+e(195))[e(225)](e(208)):function(){return!1}.constructor(e(187)+"gger")[e(213)](e(186)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=st;!function(t,n){const e=st,o=ct();for(;;)try{if(832838===-parseInt(e(465))/1+parseInt(e(488))/2+parseInt(e(476))/3+parseInt(e(498))/4+parseInt(e(504))/5*(-parseInt(e(475))/6)+parseInt(e(457))/7*(-parseInt(e(486))/8)+parseInt(e(479))/9*(parseInt(e(467))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(482)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function st(t,n){const e=ct();return(st=function(t,n){return e[t-=457]})(t,n)}!function(){it(this,(function(){const t=st,n=new RegExp(t(469)),e=new RegExp(t(495),"i"),o=pt(t(510));n[t(507)](o+t(460))&&e[t(507)](o+t(468))?pt():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(){const t=["tcRef","error","chain","counter","showGridHelper","while (true) {}","table","1210042BYwMHQ","log","50420DpTccg","input","function *\\( *\\)","length","console","string","TresCanvas","prototype","5958gbMokH","1062369asffRh","debu","stateObject","5706mdaOyZ","bind","perspectiveCameraRef","apply","constructor","TresAmbientLight","showAxesHelper","952xjHQWl","__proto__","47106aeEnCj","#ffffff","disableRender","TresPerspectiveCamera","pagesShow","info","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresGridHelper","model","1007408vExkGk","return (function() ","showBuildings","city","toString","call","3055UHFVnC","autoRotate","builds","test","#000","#000000","init","69209uhdKcA"];return(ct=function(){return t})()}ut(void 0,(function(){const t=st;let n;try{n=Function(t(499)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n.console=n[t(471)]||{},o=[t(466),t(494),t(493),t(459),"exception",t(464),"trace"];for(let i=0;i<o[t(470)];i++){const n=ut[t(483)][t(474)][t(480)](ut),r=o[i],s=e[r]||n;n[t(487)]=ut[t(480)](ut),n[t(502)]=s[t(502)][t(480)](s),e[r]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=y({__name:rt(492),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=v({clearColor:n(509),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:c,toneMapping:a,disableRender:r[n(490)]}),s=v({autoRotate:r[n(505)],enableDamping:!0});let l=null;r[n(500)]&&([e,o]=x((()=>W())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,u=S(o(473));return I(),A(u,F({ref_key:o(458),ref:d},i,{"window-size":""}),{default:R((()=>[k(o(491),{ref_key:o(481),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),O(C(p),j(B(s)),null,16),e[0]||(e[0]=k(o(484),{color:o(489)},null,-1)),e[1]||(e[1]=k("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(489)},null,-1)),r.showBuildings&&C(l)?(I(),_(T,{key:0},[O(V,{model:C(l)},null,8,[o(497)]),O(et,{builds:C(l)[o(501)],color:o(508)},null,8,[o(506)])],64)):H("",!0),M(t.$slots,"ability"),r[o(485)]?(I(),_("TresAxesHelper",at)):H("",!0),r[o(462)]?(I(),_(o(496),lt)):H("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=st;if(typeof t===e(472))return function(t){}.constructor(e(463))[e(482)](e(461));1!==(""+t/t)[e(470)]||t%20==0?function(){return!0}[e(483)](e(477)+"gger")[e(503)]("action"):function(){return!1}[e(483)](e(477)+"gger")[e(482)](e(478)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as _,et as a,ft as b,W as l};

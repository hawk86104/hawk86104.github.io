var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as b,m as I,n as S,ca as w,cb as M,K as R,h as E,b as A,e as T,_ as D,l as P,a_ as z,V as O,bp as C,z as F,aj as B,B as k,c as j,aK as N,g as U,M as L,ar as H,a9 as Z,U as G}from"./three.sXv6UbbL1740621336114.js";import{m as Y,l as W,e as $}from"./@tresjs.Td0X-dew1740621336114.js";import{R as V}from"./three-stdlib.HmEywukp1740621336114.js";import{y as q,b as X,w as K,a as J,u as Q,d as nn,W as tn,a3 as en,a0 as rn,o as on,H as an,J as cn,M as sn,a7 as un,a2 as ln,q as fn,f as pn,N as dn,a8 as hn,r as vn,B as mn,v as gn,s as _n,F as yn,a6 as xn,m as bn}from"./@vue.NRI7TcgI1740621336114.js";import{M as In,a as Sn,C as wn}from"./@pmndrs.S4rKZ8vm1740621336114.js";import{h as Mn}from"./object-hash.xF-1It9Z1740621336114.js";var Rn=zn;!function(n,t){for(var e=zn,r=Tn();;)try{if(576692===-parseInt(e(354))/1*(parseInt(e(347))/2)+parseInt(e(330))/3*(-parseInt(e(365))/4)+-parseInt(e(346))/5+-parseInt(e(338))/6*(-parseInt(e(334))/7)+-parseInt(e(348))/8+-parseInt(e(349))/9*(-parseInt(e(335))/10)+parseInt(e(362))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){En(this,(function(){var n=zn,t=new RegExp(n(345)),e=new RegExp(n(352),"i"),r=On(n(359));t[n(342)](r+n(357))&&e[n(342)](r+n(360))?On():r("0")}))()}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(){var n=["error","stateObject","virtualScene","2013998zGmuVT","24820wobBqm","return (function() ","counter","12bJDOQL","debu","__proto__","add","test","geometry","trace","function *\\( *\\)","5493710YGZiCL","2eEngIw","8228272cdOUTA","3258IPFbPV","console","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","282379FiqEcZ","remove","material","chain","exception","init","input","dispose","21147423nuScCA","destructor","gger","14388cvbNNR","table","length","call","traverse","info","action","bind","map","log","toString","342uqJgGd"];return(Tn=function(){return n})()}An(void 0,(function(){var n,t=zn;try{n=Function(t(336)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(350)]=n[t(350)]||{},r=[t(328),"warn",t(370),t(331),t(358),t(366),t(344)],o=0;o<r.length;o++){var i=An[t(351)][t(353)][t(326)](An),a=r[o],c=e[a]||i;i[t(340)]=An.bind(An),i[t(329)]=c[t(329)][t(326)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=zn;super(),this[n(333)]=null,this.virtualScene=new u}[Rn(341)](...n){var t=Rn;return this[t(333)][t(341)](...n),this}[Rn(363)](){var n=Rn;this[n(333)][n(369)]((t=>{var e=n;t instanceof l&&(t[e(343)][e(361)](),t.material.dispose(),t[e(356)][e(327)]&&t[e(356)][e(327)][e(361)](),this[e(333)][e(355)](t))})),this.virtualScene=null}}const Pn=Dn;function zn(n,t){var e=Tn();return(zn=function(n,t){return e[n-=325]})(n,t)}function On(n){function t(n){var e=zn;if("string"==typeof n)return function(n){}[e(351)]("while (true) {}").apply(e(337));1!==(""+n/n)[e(367)]||n%20==0?function(){return!0}[e(351)](e(339)+"gger")[e(368)](e(325)):function(){return!1}.constructor(e(339)+e(364)).apply(e(332)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Cn(){const n=["city/modern_buildings_2_1k.hdr","test","4739142jmIDgO","city/shanghai_bund_1k.hdr","init","action","warn","trace","info","indoor/abandoned_games_room_02_1k.hdr","1348734zIAGkP","console","5ytnneR","log","6XJQYEm","city/canary_wharf_1k.hdr",'{}.constructor("return this")( )',"outdoor/satara_night_1k.hdr","error","prototype","bind","9793245mJJwxM","apply","outdoor/snowy_forest_path_01_1k.hdr","5981640hxVlUN","toString","kiara/kiara_1_dawn_1k.hdr","293949AyZutB","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","stateObject","debu","constructor","length","4667892VYFCSh","function *\\( *\\)","__proto__","input","while (true) {}","indoor/small_hangar_01_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","17263449bEuzJy"];return(Cn=function(){return n})()}const Fn=Nn;!function(n,t){const e=Nn,r=Cn();for(;;)try{if(853984===parseInt(e(472))/1*(-parseInt(e(459))/2)+-parseInt(e(455))/3+parseInt(e(480))/4+parseInt(e(457))/5*(parseInt(e(447))/6)+parseInt(e(466))/7+parseInt(e(469))/8+-parseInt(e(444))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bn(this,(function(){const n=Nn,t=new RegExp(n(481)),e=new RegExp(n(474),"i"),r=Un(n(449));t.test(r+n(475))&&e[n(446)](r+n(440))?Un():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=Nn;let t;try{t=Function("return (function() "+n(461)+");")()}catch(o){t=window}const e=t[n(456)]=t.console||{},r=[n(458),n(451),n(453),n(463),"exception","table",n(452)];for(let i=0;i<r[n(479)];i++){const t=kn[n(478)][n(464)][n(465)](kn),o=r[i],a=e[o]||t;t[n(482)]=kn.bind(kn),t[n(470)]=a[n(470)][n(465)](a),e[o]=t}}))();const jn={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:Fn(460),umbrellas:Fn(443),night:Fn(462),forest:"outood/mossy_forest_1k.hdr",snow:Fn(468),dawn:Fn(471),hangar:Fn(442),urban:Fn(454),modern:Fn(445),shangai:Fn(448)};function Nn(n,t){const e=Cn();return(Nn=function(n,t){return e[n-=440]})(n,t)}function Un(n){function t(n){const e=Nn;if(typeof n===e(473))return function(n){}[e(478)](e(441))[e(467)]("counter");1!==(""+n/n)[e(479)]||n%20==0?function(){return!0}.constructor(e(477)+"gger").call(e(450)):function(){return!1}[e(478)](e(477)+"gger").apply(e(476)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Zn,r=Gn();for(;;)try{if(935198===parseInt(e(391))/1*(parseInt(e(379))/2)+-parseInt(e(364))/3*(-parseInt(e(351))/4)+parseInt(e(367))/5*(parseInt(e(363))/6)+-parseInt(e(377))/7*(-parseInt(e(381))/8)+parseInt(e(374))/9*(parseInt(e(372))/10)+parseInt(e(376))/11+-parseInt(e(386))/12*(parseInt(e(384))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ln(this,(function(){const n=Zn,t=new RegExp(n(358)),e=new RegExp(n(370),"i"),r=Yn("init");t.test(r+n(383))&&e[n(392)](r+"input")?Yn():r("0")}))()}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zn(n,t){const e=Gn();return(Zn=function(n,t){return e[n-=348]})(n,t)}function Gn(){const n=["Preset must be one of: ","11412775rLEBHP","42273UCRHTK","exception","1718740RPFslV","action","232SQKWxe","background","chain","3601oxaqbv","__proto__","265320pytAfc","info","toString",'{}.constructor("return this")( )',"keys","2ejglxl","test","prototype","counter","backgroundBlurriness","debu","bind","constructor","isColor","return (function() ","608akznFB","string","log","length","Failed to load environment map: ","value","warn","function *\\( *\\)","setPath","trace","error","texture","18GHfkwK","13119yvjZTa","mapping","call","2817755CXvwrP","gger","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","17729230WTfOhx","isArray","9DMDrRQ"];return(Gn=function(){return n})()}Hn(void 0,(function(){const n=Zn;let t;try{t=Function(n(350)+n(389)+");")()}catch(o){t=window}const e=t[n(369)]=t[n(369)]||{},r=[n(353),n(357),n(387),n(361),n(378),"table",n(360)];for(let i=0;i<r.length;i++){const t=Hn[n(348)][n(393)][n(397)](Hn),o=r[i],a=e[o]||t;t[n(385)]=Hn[n(397)](Hn),t[n(388)]=a[n(388)].bind(a),e[o]=t}}))();function Yn(n){function t(n){const e=Zn;if(typeof n===e(352))return function(n){}.constructor("while (true) {}")[e(371)](e(394));1!==(""+n/n)[e(354)]||n%20==0?function(){return!0}[e(348)]("debugger")[e(366)](e(380)):function(){return!1}[e(348)](e(396)+e(368))[e(371)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vn,r=Kn();for(;;)try{if(424243===parseInt(e(423))/1*(-parseInt(e(439))/2)+parseInt(e(438))/3+-parseInt(e(431))/4*(parseInt(e(425))/5)+parseInt(e(466))/6+-parseInt(e(467))/7*(-parseInt(e(457))/8)+-parseInt(e(428))/9*(-parseInt(e(452))/10)+parseInt(e(461))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=Vn,t=new RegExp(n(456)),e=new RegExp(n(459),"i"),r=Xn(n(437));t.test(r+n(430))&&e[n(444)](r+n(476))?Xn():r("0")}))()}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Kn();return(Vn=function(n,t){return e[n-=421]})(n,t)}$n(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(469)+n(455)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(449)]||{},r=["log","warn",n(426),n(474),n(448),n(472),n(446)];for(let o=0;o<r[n(429)];o++){const t=$n[n(447)].prototype[n(454)]($n),i=r[o],a=e[i]||t;t.__proto__=$n[n(454)]($n),t[n(463)]=a[n(463)][n(454)](a),e[i]=t}}))();const qn=nn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Vn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=Y();let l=null,y=X(null),x=null;const b=X(null);tn((()=>{var n,t;const e=Vn;null==(n=b[e(468)])||n[e(450)](),null==(t=y.value)||t[e(422)]()}));const{onBeforeLoop:I}=$();let S=1;I((()=>{const n=Vn;x&&b[n(468)]&&y[n(468)]&&(i[n(458)]===1/0||S<i[n(458)])&&(i[n(471)]?x.update(s[n(468)],u[n(468)]):x[n(462)](s.value,un(b[n(468)][n(434)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Zn,{scene:r,invalidate:o}=Y(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=q(n);K(n,(()=>{o()}));const l=X(null),h=J((()=>Array[e(373)](c[e(356)]))),v=J((()=>h[e(356)]?f:V));return K([c,s],(async([n,t])=>{const r=e;if(n&&n[r(354)]>0&&!(null==i?void 0:i[r(356)])){try{l.value=await W(v.value,h[r(356)]?[...Q(n)]:Q(n),(n=>{t&&n.setPath(Q(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l[r(356)]&&(l[r(356)][r(365)]=h[r(356)]?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r.value&&n&&(r[t(356)].environment=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(356)])?t[i(356)][i(362)]:o,a=r[i(356)][i(382)];!(null==a?void 0:a[i(349)])&&(a=void 0),r[i(356)][i(382)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a[e(356)]),(n=>{const t=e;r[t(356)]&&n&&(r[t(356)][t(395)]=n)}),{immediate:!0}),K((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in jn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=jn[n];try{l[t(356)]=await W(V,i,(n=>{e&&n[t(359)](e)}))}catch(r){throw new Error(t(355)+r)}l[t(356)]&&l[t(356)]&&(l[t(356)][t(365)]=d),o()}else if(n&&!(n in jn))throw new Error(t(375)+Object[t(390)](jn).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Vn;n?(u.value[t(464)]=n[t(440)],i.background&&(u[t(468)][t(475)]=n.texture)):(u[t(468)].environment=w[t(468)],i[t(475)]&&(u[t(468)][t(475)]=w[t(468)]))};K(w,(n=>{const t=Vn;y[t(468)]&&M(y[t(468)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=Vn;null==(n=y[t(468)])||n.dispose(),y[t(468)]=new v(i.resolution),x=new m(i[t(432)],i.far,y.value),i[t(471)]?(y[t(468)].texture[t(451)]=g,y[t(468)].texture[t(436)]=!1,y[t(468)][t(440)][t(445)]=_,y[t(468)].texture.magFilter=_):y[t(468)][t(440)][t(451)]=h,M(y[t(468)])};return K((()=>rn()[e(424)]),(n=>{var t,r;const o=e;n&&(!y[o(468)]||y.value[o(440)][o(451)]!==h)&&(l=n(),Array.isArray(l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(451)])!==o(465))?R():(null==(r=y[o(468)])||r[o(422)](),y[o(468)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(468)]=w,K((()=>i[e(471)]),(n=>{y[e(468)]&&R()})),(n,t)=>{const r=e;return Q(y)?(on(),an(r(442),{key:0,ref_key:r(453),ref:b},[cn(n[r(443)],r(424))],512)):sn("",!0)}}});function Xn(n){function t(n){const e=Vn;if(typeof n===e(433))return function(n){}[e(447)](e(427))[e(470)](e(460));1!==(""+n/n).length||n%20==0?function(){return!0}[e(447)](e(441)+"gger")[e(473)](e(435)):function(){return!1}[e(447)](e(441)+e(421))[e(470)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Kn(){const n=["init","701520lZsHNB","25028TZIgBU","texture","debu","TresEnvSence","$slots","test","minFilter","trace","constructor","exception","console","destructor","type","5656610lkFxoz","envSence","bind",'{}.constructor("return this")( )',"function *\\( *\\)","80vkhCyH","frames","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","5213230ebfGJh","update","toString","environment","symbol","2112732KBNJYB","307811VyWKPR","value","return (function() ","apply","useDefaultScene","table","call","error","background","input","gger","dispose","67YRhknq","default","1337670QwEnZh","info","while (true) {}","9suSWVM","length","chain","12EXGXwD","near","string","virtualScene","action","generateMipmaps"];return(Kn=function(){return n})()}function Jn(n,t){const e=et();return(Jn=function(n,t){return e[n-=231]})(n,t)}const Qn=Jn;!function(n,t){const e=Jn,r=et();for(;;)try{if(467527===parseInt(e(244))/1+parseInt(e(248))/2+-parseInt(e(242))/3+parseInt(e(267))/4+parseInt(e(254))/5*(-parseInt(e(245))/6)+-parseInt(e(271))/7*(-parseInt(e(276))/8)+parseInt(e(266))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nt(this,(function(){const n=Jn,t=new RegExp(n(237)),e=new RegExp(n(260),"i"),r=st(n(232));t[n(255)](r+n(235))&&e[n(255)](r+n(280))?st():r("0")}))()}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function et(){const n=["stateObject","map","multiplyScalar","circle","__proto__","461800RNDlfz","test","call","trace","length","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"bind","table","intensity","apply","5907735NFjZCV","2982476Kqgbyv","action","needsUpdate","gger","7YLWLEw","return (function() ","toString","info","color","583816NtWDOj","TresPlaneGeometry","exception","TresRingGeometry","input","prototype","init","string","from","chain","index","function *\\( *\\)","toneMapped","TresMesh","log","constructor","2105406nBamIS","while (true) {}","418837tzxLSQ","60mVeeNE","value","side","398162IyjIqf"];return(et=function(){return n})()}tt(void 0,(function(){const n=Jn;let t;try{t=Function(n(272)+n(261)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(240),"warn",n(274),"error",n(278),n(263),n(257)];for(let i=0;i<r[n(258)];i++){const t=tt[n(241)][n(231)].bind(tt),o=r[i],a=e[o]||t;t[n(253)]=tt[n(262)](tt),t.toString=a[n(273)].bind(a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[Qn(238),Qn(250),Qn(247),Qn(275)],ct=nn({__name:Qn(236),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=Qn,e=n,r=X();return ln((()=>{const n=Jn;r[n(246)]&&(r[n(246)][n(275)][n(251)](e.intensity),r[n(246)][n(269)]=!0)})),K((()=>e[t(275)]),(n=>{const o=t;r.value&&(r[o(246)][o(275)].set(n),r.value.color[o(251)](e[o(264)]),r[o(246)][o(269)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(239),null,[e[i(234)]===i(252)?(on(),an(i(279),rt)):"ring"===e.from?(on(),an("TresRingGeometry",ot)):"rect"===e.from?(on(),an(i(277),it)):(on(),pn(e[i(234)],{key:3,args:e})),dn("TresMeshBasicMaterial",{ref_key:"material",ref:r,toneMapped:n.toneMapped,map:n[i(250)],side:Q(x),color:n[i(275)]},null,8,at)])}}});function st(n){function t(n){const e=Jn;if(typeof n===e(233))return function(n){}[e(241)](e(243))[e(265)]("counter");1!==(""+n/n)[e(258)]||n%20==0?function(){return!0}[e(241)](e(259)+e(270))[e(256)](e(268)):function(){return!1}.constructor(e(259)+e(270))[e(265)](e(249)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ut(){const n=['{}.constructor("return this")( )',"init","string","toString","1008370usZMnG","action","setRenderTarget","stateObject","960111PYXBTO","constructor","debu","12mDuLqa","while (true) {}","depthTexture","2532480nvpemM","return (function() ","1163148zqmSDY","height","apply","399484oeeKSt","test","format","log","length","trace","prototype","exception","chain","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8EXxIDV","input","gger","console","__proto__","9DtkvoY","table","type","126358MSRqUY","dispose","width","error","value","warn","6407870vtRBpT","bind","counter","clear"];return(ut=function(){return n})()}!function(n,t){const e=pt,r=ut();for(;;)try{if(310739===parseInt(e(283))/1*(-parseInt(e(286))/2)+-parseInt(e(307))/3*(-parseInt(e(315))/4)+parseInt(e(300))/5+-parseInt(e(310))/6+parseInt(e(312))/7+-parseInt(e(278))/8*(parseInt(e(304))/9)+parseInt(e(292))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){lt(this,(function(){const n=pt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(277),"i"),r=ht(n(297));t[n(316)](r+n(275))&&e[n(316)](r+n(279))?ht():r("0")}))()}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(314)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pt(n,t){const e=ut();return(pt=function(n,t){return e[n-=272]})(n,t)}function dt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?q(n):q(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=Y();return ln((()=>{var n;const a=pt;null==(n=t.value)||n.dispose(),t[a(290)]=new b((null==r?void 0:r[a(290)])||p.width[a(290)],(null==e?void 0:e[a(290)])||p.height[a(290)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(290)])),(null==i?void 0:i.value)&&(t[a(290)][a(309)]=new S((null==r?void 0:r[a(290)])||p[a(288)].value,(null==e?void 0:e.value)||p[a(313)][a(290)]),t[a(290)][a(309)][a(317)]=w,t[a(290)][a(309)][a(285)]=M)})),s((()=>{const n=pt;(null==a?void 0:a[n(290)])&&(l.value[n(302)](un(t[n(290)])),l[n(290)][n(295)](),l[n(290)].render(un(f[n(290)]),un(u.value)),l[n(290)][n(302)](null))})),mn((()=>{var n;const e=pt;null==(n=t[e(290)])||n[e(287)]()})),t}function ht(n){function t(n){const e=pt;if(typeof n===e(298))return function(n){}[e(305)](e(308)).apply(e(294));1!==(""+n/n)[e(319)]||n%20==0?function(){return!0}[e(305)]("debu"+e(280))[e(276)](e(301)):function(){return!1}[e(305)](e(306)+e(280))[e(314)](e(303)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function vt(){const n=["input","apply","MeshTransmissionMaterialClass","info","8049293pNOcHd","bind","envMapIntensity","70rotPmg","value","607770MeikLA","uuid","chain","thickness","return (function() ","320768lzzmZY","buffer","texture","toString","counter","action","5051484kbJLfH","function *\\( *\\)","13ElrHWQ",'{}.constructor("return this")( )',"constructor","11827eewErY","render","length","traverse","148qeFykA","stateObject","isMesh","debu","material","backsideThickness","gger","trace","704044XYSXJd","index","128yWKmNQ","TresMeshTransmissionMaterial","fboResolution","20GgMJuJ","__proto__","background","setRenderTarget","411936rcquHY","error","call","log","6rHStDX","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","side","warn","console"];return(vt=function(){return n})()}ft(void 0,(function(){const n=pt,t=function(){const n=pt;let t;try{t=Function(n(311)+n(296)+");")()}catch(e){t=window}return t}(),e=t[n(281)]=t[n(281)]||{},r=[n(318),n(291),"info",n(289),n(274),n(284),n(272)];for(let o=0;o<r[n(319)];o++){const t=ft[n(305)][n(273)][n(293)](ft),i=r[o],a=e[i]||t;t[n(282)]=ft[n(293)](ft),t[n(299)]=a[n(299)][n(293)](a),e[i]=t}}))();const mt=yt;!function(n,t){const e=yt,r=vt();for(;;)try{if(747170===parseInt(e(403))/1*(-parseInt(e(407))/2)+parseInt(e(368))/3+-parseInt(e(392))/4*(-parseInt(e(385))/5)+parseInt(e(372))/6*(parseInt(e(382))/7)+parseInt(e(417))/8*(-parseInt(e(387))/9)+-parseInt(e(420))/10*(parseInt(e(415))/11)+-parseInt(e(398))/12*(-parseInt(e(400))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){gt(this,(function(){const n=yt,t=new RegExp(n(399)),e=new RegExp(n(374),"i"),r=It("init");t[n(373)](r+n(389))&&e[n(373)](r+n(378))?It():r("0")}))()}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(n,t){const e=vt();return(yt=function(n,t){return e[n-=365]})(n,t)}_t(void 0,(function(){const n=yt;let t;try{t=Function(n(391)+n(401)+");")()}catch(o){t=window}const e=t[n(377)]=t[n(377)]||{},r=[n(371),n(376),n(381),n(369),"exception","table",n(414)];for(let i=0;i<r[n(405)];i++){const t=_t[n(402)].prototype.bind(_t),o=r[i],a=e[o]||t;t[n(365)]=_t[n(383)](_t),t[n(395)]=a[n(395)].bind(a),e[o]=t}}))();const xt=[mt(393),"side"],bt=nn({__name:mt(416),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=mt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=Y(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new Sn,{onBeforeLoop:f}=$(),p=dt({width:u[e(419)],height:u[e(419)],isLoop:!1}),d=dt({width:u[e(419)],height:u[e(419)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(386)]=function(n,t){const e=yt;let r;return n[e(406)]((n=>{const o=e;n[o(409)]&&n.material&&n[o(411)][o(388)]===t&&(r=n)})),r}(i.value,r[n(386)][n(388)])})),f((({elapsed:n})=>{const t=e;r.value.time=n,r[t(386)].buffer===d.value[t(394)]&&s[t(386)]&&(m=a[t(386)].toneMapping,h=i[t(386)][t(366)],v=r[t(386)].envMapIntensity,g=s[t(386)].material.side,s[t(386)][t(411)]=l,u.backside&&(a.value[t(367)](p[t(386)]),a[t(386)].render(i[t(386)],c[t(386)]),s.value.material=r[t(386)],s.value[t(411)].thickness=u[t(412)],s[t(386)][t(411)].buffer=p[t(386)].texture,s[t(386)][t(411)][t(375)]=R,s.value[t(411)][t(384)]=0),a[t(386)][t(367)](d[t(386)]),a.value[t(404)](i[t(386)],c[t(386)]),s[t(386)][t(411)][t(393)]=d[t(386)].texture,s[t(386)][t(411)]=r[t(386)],s[t(386)][t(411)][t(390)]=u.thickness,s[t(386)][t(411)][t(375)]=g,s[t(386)].material[t(384)]=v,i[t(386)].background=h,a[t(386)][t(367)](null),a[t(386)].toneMapping=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an(o(418),{ref_key:o(380),ref:r,buffer:Q(d)[o(394)],side:Q(x)},null,8,xt)}}});function It(n){function t(n){const e=yt;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply(e(396));1!==(""+n/n)[e(405)]||n%20==0?function(){return!0}[e(402)]("debugger")[e(370)](e(397)):function(){return!1}[e(402)](e(410)+e(413))[e(379)](e(408)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Mt,r=Rt();for(;;)try{if(814955===parseInt(e(426))/1*(-parseInt(e(458))/2)+-parseInt(e(472))/3+-parseInt(e(457))/4*(-parseInt(e(477))/5)+-parseInt(e(478))/6*(-parseInt(e(468))/7)+parseInt(e(443))/8+-parseInt(e(463))/9*(-parseInt(e(448))/10)+-parseInt(e(469))/11*(parseInt(e(467))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){St(this,(function(){const n=Mt,t=new RegExp(n(464)),e=new RegExp(n(430),"i"),r=At(n(441));t[n(456)](r+n(483))&&e.test(r+n(471))?At():r("0")}))()}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Mt(n,t){const e=Rt();return(Mt=function(n,t){return e[n-=426]})(n,t)}function Rt(){const n=["call","TresGroup","outer","4552110Zmjmuc","108nPdbab","getBoundingSphere","info","exception","warn","chain","matrixWorld","setFromObject","prototype","front","bind","value","2OhdxJj","apply","action","top","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","__proto__","set","length","back","string","max","min","constructor","gger","init","getCenter","8431016dNTuvq","debu","$slots","gref","identity","3530sciGWD","return (function() ","table","precise","console","disable","bottom","inner","test","4jNAdwv","311416PGFjLR","counter","right","stateObject","disableY","20637wGXZiU","function *\\( *\\)","default",'{}.constructor("return this")( )',"3012yryDgG","557781QbwNDA","72259RYYsMX","disableZ","input","4298496bYtgeI","toString"];return(Rt=function(){return n})()}wt(void 0,(function(){const n=Mt;let t;try{t=Function(n(449)+n(466)+");")()}catch(o){t=window}const e=t[n(452)]=t[n(452)]||{},r=["log",n(482),n(480),"error",n(481),n(450),"trace"];for(let i=0;i<r.length;i++){const t=wt[n(439)][n(486)][n(488)](wt),o=r[i],a=e[o]||t;t[n(432)]=wt[n(488)](wt),t[n(473)]=a.toString[n(488)](a),e[o]=t}}))();const Et=nn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return fn((()=>{const n=Mt;if(!r.value)return;if(!o[n(489)])return;r.value[n(484)][n(447)]();const e=(new E)[n(485)](o[n(489)],t[n(451)]),i=new A,a=new T,c=e.max.x-e[n(438)].x,s=e[n(437)].y-e[n(438)].y,u=e[n(437)].z-e[n(438)].z;e[n(442)](i),e[n(479)](a);const l=t[n(429)]?s/2:t[n(454)]?-s/2:0,f=t.left?-c/2:t[n(460)]?c/2:0,p=t[n(487)]?u/2:t[n(435)]?-u/2:0;r[n(489)].position[n(433)](t.disable||t.disableX?0:-i.x+f,t[n(453)]||t[n(462)]?0:-i.y+l,t.disable||t[n(470)]?0:-i.z+p)})),(n,t)=>{const i=Mt;return on(),an(i(475),{ref_key:i(446),ref:e},[dn("TresGroup",{ref_key:i(476),ref:r},[dn(i(475),{ref_key:i(455),ref:o},[cn(n[i(445)],i(465))],512)],512)],512)}}});function At(n){function t(n){const e=Mt;if(typeof n===e(436))return function(n){}[e(439)](e(431))[e(427)](e(459));1!==(""+n/n)[e(434)]||n%20==0?function(){return!0}[e(439)](e(444)+e(440))[e(474)](e(428)):function(){return!1}[e(439)](e(444)+e(440)).apply(e(461)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tt=Dt;function Dt(n,t){const e=Pt();return(Dt=function(n,t){return e[n-=113]})(n,t)}function Pt(){const n=["52ZXOURo","374BbxxNx","table","gger","worldRadius","counter","377JBUIUm","toString","chain","lightSource","trace","set","747216abUzeV","stateObject","object","13559PgFbpc","scene","2406ztPRdm","2963031QjqpBB","exception","ior","1093ZldRQr","init","1926dMtigE","prototype","return (function() ","default","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","6536TguCaY","primitive",'{}.constructor("return this")( )',"causticsOnly","constructor","529515VddqZB","far","index","TresGroup","input","length","debu","15426610LaHrxu","11myHMaz","while (true) {}","Vector3","group","bind","test","intensity","console","color","warn","resolution","call","action","params","add","backsideIOR","function *\\( *\\)","apply"];return(Pt=function(){return n})()}!function(n,t){const e=Dt,r=Pt();for(;;)try{if(932241===-parseInt(e(169))/1*(-parseInt(e(149))/2)+-parseInt(e(166))/3+-parseInt(e(148))/4*(-parseInt(e(122))/5)+-parseInt(e(165))/6*(-parseInt(e(163))/7)+parseInt(e(117))/8*(-parseInt(e(171))/9)+-parseInt(e(129))/10*(-parseInt(e(130))/11)+parseInt(e(160))/12*(-parseInt(e(154))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(147)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Dt,t=new RegExp(n(146)),e=new RegExp(n(115),"i"),r=kt(n(170));t[n(135)](r+n(156))&&e.test(r+n(126))?kt():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(147)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ot(void 0,(function(){const n=Dt;let t;try{t=Function(n(113)+n(119)+");")()}catch(o){t=window}const e=t.console=t[n(137)]||{},r=[n(116),n(139),"info","error",n(167),n(150),n(158)];for(let i=0;i<r[n(127)];i++){const t=Ot[n(121)][n(172)].bind(Ot),o=r[i],a=e[o]||t;t.__proto__=Ot[n(134)](Ot),t.toString=a[n(155)][n(134)](a),e[o]=t}}))();const Ct=[Tt(162)],Ft=[Tt(162)],Bt=nn({__name:Tt(124),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Tt,e=n,{renderer:r}=Y(),o=wn(r.value,{frames:1/0,resolution:e[t(140)],worldRadius:e[t(152)]});o[t(143)].backside=!0;const i=gn(null);K(i,(n=>{const e=t;n&&o[e(164)][e(144)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o.update()})),ln((()=>{const n=t;e[n(138)]&&o[n(143)][n(138)][n(159)](e.color),e[n(168)]&&(o[n(143)][n(168)]=e[n(168)]),e[n(145)]&&(o[n(143)][n(145)]=e[n(145)]),e[n(123)]&&(o[n(143)].far=e[n(123)]),e[n(152)]&&(o.params[n(152)]=e[n(152)]),e[n(136)]&&(o.params.intensity=e[n(136)])})),K((()=>e[t(120)]),(n=>{o[t(143)].causticsOnly=n})),K((()=>e[t(157)]),(n=>{const e=t;n&&o[e(143)].lightSource instanceof D[e(132)]&&o[e(143)][e(157)][e(159)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn(r(125),{ref_key:r(133),ref:i},[cn(n.$slots,r(114))],512),dn("primitive",{object:Q(o)[r(133)],position:[0,.003,0]},null,8,Ct),dn(r(118),{object:Q(o).helper,visible:!1},null,8,Ft)],64)}}});function kt(n){function t(n){const e=Dt;if("string"==typeof n)return function(n){}[e(121)](e(131))[e(147)](e(153));1!==(""+n/n)[e(127)]||n%20==0?function(){return!0}[e(121)](e(128)+e(151))[e(141)](e(142)):function(){return!1}.constructor(e(128)+"gger")[e(147)](e(161)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Lt,r=Ut();for(;;)try{if(718487===-parseInt(e(444))/1+-parseInt(e(426))/2*(parseInt(e(427))/3)+parseInt(e(406))/4+-parseInt(e(437))/5+parseInt(e(439))/6*(parseInt(e(411))/7)+-parseInt(e(447))/8*(parseInt(e(407))/9)+parseInt(e(401))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jt(this,(function(){const n=Lt,t=new RegExp(n(403)),e=new RegExp(n(408),"i"),r=Zt("init");t[n(450)](r+n(419))&&e[n(450)](r+n(441))?Zt():r("0")}))()}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lt(423)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ut(){const n=["ShaderChunk","string","apply","info",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","2638doYRnz","1458bqWynQ","remove","dispose","__proto__","; i++) {\n        vogelSample = vogelDiskSample(j, ","constructor","replace","gger","debu","log","6910055YkxJoq","compile","12nFsdoM","length","input","material","counter","1351167KEXpqE","trace","traverse","15256AzTgBX","bind","warn","test","call","#if defined( SHADOWMAP_TYPE_PCF )","35674580gkhdgx","properties","function *\\( *\\)",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","#ifdef USE_SHADOWMAP","4387528UjLhfl","3519lnMLGY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","shadowmap_pars_fragment","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","608986HGBtLe","table",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","toString","isArray","action",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","chain","console"];return(Ut=function(){return n})()}function Lt(n,t){const e=Ut();return(Lt=function(n,t){return e[n-=401]})(n,t)}Nt(void 0,(function(){const n=Lt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(420)]=t[n(420)]||{},r=[n(436),n(449),n(424),"error","exception",n(412),n(445)];for(let i=0;i<r[n(440)];i++){const t=Nt[n(432)].prototype[n(448)](Nt),o=r[i],a=e[o]||t;t[n(430)]=Nt[n(448)](Nt),t[n(414)]=a[n(414)][n(448)](a),e[o]=t}}))();const Ht=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Lt,o=D[r(421)][r(409)];return D[r(421)].shadowmap_pars_fragment=D[r(421)][r(409)].replace(r(405),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(417)+n+r(425)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(413)+e+r(431)+e+r(404)+t+r(410)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(433)](r(452),r(418)),(n,t,e)=>{const i=r;D[i(421)][i(409)]=o,function(n,t,e){const r=Lt;t[r(446)]((t=>{const e=r;t[e(442)]&&(Array[e(415)](t[e(442)])?t[e(442)].forEach((t=>{const r=e;n[r(402)].remove(t),t[r(429)]()})):(n.properties[e(428)](t[e(442)]),t[e(442)][e(429)]()))})),n[r(424)].programs.length=0,n[r(438)](t,e)}(n,t,e)}};function Zt(n){function t(n){const e=Lt;if(typeof n===e(422))return function(n){}[e(432)]("while (true) {}")[e(423)](e(443));1!==(""+n/n)[e(440)]||n%20==0?function(){return!0}[e(432)](e(435)+e(434))[e(451)](e(416)):function(){return!1}.constructor(e(435)+e(434)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gt=Vt;!function(n,t){const e=Vt,r=$t();for(;;)try{if(124254===parseInt(e(160))/1+parseInt(e(180))/2+-parseInt(e(178))/3*(parseInt(e(165))/4)+-parseInt(e(179))/5+parseInt(e(158))/6+-parseInt(e(186))/7+parseInt(e(175))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Vt,t=new RegExp(n(173)),e=new RegExp(n(184),"i"),r=Xt(n(157));t.test(r+"chain")&&e.test(r+"input")?Xt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(163)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(){const n=["length","error","dispose","warn","string","init","153450bSrOHb","material","154627LyxdCW","counter","value","apply","gger","5228HhyOTq","call","constructor","stateObject",'{}.constructor("return this")( )',"console","table","return (function() ","function *\\( *\\)","toString","1579720vNpUhy","index","debu","348OGOFrB","208600jCAqZU","328854RyHxqS","prototype","trace","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","1571556FYjXoQ","info","traverse","bind"];return($t=function(){return n})()}function Vt(n,t){const e=$t();return(Vt=function(n,t){return e[n-=157]})(n,t)}Wt(void 0,(function(){const n=Vt;let t;try{t=Function(n(172)+n(169)+");")()}catch(o){t=window}const e=t[n(170)]=t[n(170)]||{},r=["log",n(193),n(187),n(191),n(185),n(171),n(182)];for(let i=0;i<r[n(190)];i++){const t=Wt[n(167)][n(181)][n(189)](Wt),o=r[i],a=e[o]||t;t.__proto__=Wt[n(189)](Wt),t[n(174)]=a[n(174)][n(189)](a),e[o]=t}}))();const qt=nn({__name:Gt(176),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=Y();let i=null;const a=n=>{const t=Vt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(162)],o[t(162)],e[t(162)]),i=null),a&&(i=Ht({focus:s,size:c,samples:u}),o[t(162)][t(188)]((n=>{const e=t;n instanceof l&&n[e(159)][e(192)]()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function Xt(n){function t(n){const e=Vt;if(typeof n===e(194))return function(n){}.constructor("while (true) {}").apply(e(161));1!==(""+n/n)[e(190)]||n%20==0?function(){return!0}[e(167)](e(177)+e(164))[e(166)](e(183)):function(){return!1}.constructor(e(177)+e(164))[e(163)](e(168)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kt=ee;!function(n,t){const e=ee,r=ne();for(;;)try{if(455240===parseInt(e(351))/1*(-parseInt(e(336))/2)+-parseInt(e(362))/3+parseInt(e(329))/4+-parseInt(e(368))/5+-parseInt(e(338))/6+-parseInt(e(367))/7+parseInt(e(352))/8*(parseInt(e(325))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(344)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jt(this,(function(){const n=ee,t=new RegExp(n(366)),e=new RegExp(n(360),"i"),r=oe(n(349));t[n(355)](r+"chain")&&e[n(355)](r+n(356))?oe():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(344)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(){const n=["uniforms","function *\\( *\\)","537362cWyglG","2355570Ocvwwy","table",">\n        }","string","exception","halfTexelSize","value","11114181RVqTlF","console","encodings_fragment","__proto__","1411716nnYGeJ","debu","log","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","trace","toString","colorspace_fragment","246DdvQdz","replace","906936CmgzPw","warn","prototype","gger","copy","return (function() ","apply","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","error","constructor","setResolution","init","bind","2061Pfzkux","8mbAYYa","set","multiplyScalar","test","input","action","texelSize","resolution","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","540177Aivjyr","setTexelSize","while (true) {}"];return(ne=function(){return n})()}Qt(void 0,(function(){const n=ee,t=function(){const n=ee;let t;try{t=Function(n(343)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(326)]||{},r=[n(331),n(339),"info",n(346),n(372),n(369),n(333)];for(let o=0;o<r.length;o++){const t=Qt.constructor[n(340)][n(350)](Qt),i=r[o],a=e[i]||t;t[n(328)]=Qt[n(350)](Qt),t[n(334)]=a[n(334)][n(350)](a),e[i]=t}}))();const te=parseInt(F[Kt(337)](/\D+/g,""));function ee(n,t){const e=ne();return(ee=function(n,t){return e[n-=325]})(n,t)}class re extends P{constructor(n=new O){const t=Kt;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(332)+t(te>=154?335:327)+t(370),vertexShader:t(345),blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(363)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[Kt(363)](n,t){const e=Kt;this[e(365)][e(358)].value[e(353)](n,t),this[e(365)][e(373)][e(374)][e(353)](n,t)[e(354)](.5)}[Kt(348)](n){const t=Kt;this[t(365)][t(359)][t(374)][t(342)](n)}}function oe(n){function t(n){const e=ee;if(typeof n===e(371))return function(n){}[e(347)](e(364))[e(344)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(347)](e(330)+e(341))[e(361)](e(357)):function(){return!1}[e(347)](e(330)+e(341))[e(344)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ie(){const n=["console","maxDepthThreshold","renderToScreen","debu","1971784RFJAUK","position","constructor","gger","while (true) {}","renderTargetB","1868991SRZOir","test","depthScale","18IzRTkP","convolutionMaterial","prototype","string","USE_DEPTH","243972ZGhzPV","defines","25685AaGbkX","value","return (function() ","stateObject","counter","kernel","chain","bind","1734649ylalEo","2CcKJkx",'{}.constructor("return this")( )',"exception","camera","18586370TnYvnF","uniforms","add","warn","clone","484LdEYOz","action","function *\\( *\\)","setRenderTarget","setTexelSize","trace","renderTargetA","input","__proto__","scene","init","screen","inputBuffer","length","depthToBlurRatioBias","12JVHJPf","info","call","log","render","4146540zvNAxx","table","apply"];return(ie=function(){return n})()}const ae=se;!function(n,t){const e=se,r=ie();for(;;)try{if(372782===parseInt(e(555))/1+parseInt(e(505))/2*(parseInt(e(547))/3)+-parseInt(e(514))/4*(-parseInt(e(557))/5)+parseInt(e(529))/6*(parseInt(e(504))/7)+-parseInt(e(541))/8*(-parseInt(e(550))/9)+-parseInt(e(534))/10+-parseInt(e(509))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(n,t){const e=ie();return(se=function(n,t){return e[n-=499]})(n,t)}!function(){ce(this,(function(){const n=se,t=new RegExp(n(516)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=fe(n(524));t[n(548)](r+n(502))&&e[n(548)](r+n(521))?fe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(536)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ue(void 0,(function(){const n=se;let t;try{t=Function(n(559)+n(506)+");")()}catch(o){t=window}const e=t.console=t[n(537)]||{},r=[n(532),n(512),n(530),"error",n(507),n(535),n(519)];for(let i=0;i<r[n(527)];i++){const t=ue[n(543)][n(552)][n(503)](ue),o=r[i],a=e[o]||t;t[n(522)]=ue.bind(ue),t.toString=a.toString[n(503)](a),e[o]=t}}))();class le{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=se;this[c(539)]=!1,this[c(520)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(546)]=this[c(520)][c(513)](),this[c(551)]=new re,this[c(551)][c(518)](1/t,1/e),this[c(551)].setResolution(new O(t,e)),this[c(523)]=new u,this[c(508)]=new B,this[c(551)][c(510)].minDepthThreshold[c(558)]=r,this[c(551)][c(510)][c(538)][c(558)]=o,this[c(551)][c(510)][c(549)][c(558)]=i,this.convolutionMaterial[c(510)][c(528)].value=a,this[c(551)][c(556)][c(554)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p.setAttribute(c(542),new j(s,3)),p.setAttribute("uv",new j(f,2)),this.screen=new l(p,this[c(551)]),this[c(525)].frustumCulled=!1,this[c(523)][c(511)](this[c(525)])}[ae(533)](n,t,e){const r=ae,o=this.scene,i=this[r(508)],a=this[r(520)],c=this.renderTargetB,s=this[r(551)],u=s[r(510)];u.depthBuffer[r(558)]=t.depthTexture;const l=s[r(501)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(501)][r(558)]=l[p],u[r(526)][r(558)]=h.texture,n[r(517)](f),n.render(o,i),h=f;u[r(501)][r(558)]=l[p],u[r(526)][r(558)]=h.texture,n[r(517)](this[r(539)]?null:e),n[r(533)](o,i)}}function fe(n){function t(n){const e=se;if(typeof n===e(553))return function(n){}[e(543)](e(545)).apply(e(500));1!==(""+n/n)[e(527)]||n%20==0?function(){return!0}.constructor(e(540)+e(544))[e(531)](e(515)):function(){return!1}[e(543)](e(540)+e(544))[e(536)](e(499)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pe(n,t){var e=he();return(pe=function(n,t){return e[n-=320]})(n,t)}var de=pe;function he(){var n=["input","vertexShader","defines","4804750RoiIsB","USE_UV","test","2891757RXFETs","118233uwSRjN","exception","textureMatrix","replace","return (function() ","function *\\( *\\)","tDiffuse","mirror","_tDiffuse","_mixBlur","depthToBlurRatioBias","_distortionMap","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","mixContrast","_mixContrast","10bRtjHm","mixStrength","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","constructor","_maxDepthThreshold","848248YFVlyS","length","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mirror","2786dsEHpZ","onBeforeCompile","stateObject","value","toString","_distortion","depthScale","mixBlur","distortion","_tDiffuseBlur","chain","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","_depthToBlurRatioBias","gger","maxDepthThreshold","1476nGDWqh","apply","minDepthThreshold","2kEaNIO","fragmentShader","distortionMap","counter","tDiffuseBlur","426270KoLhgg","uniforms","bind","_textureMatrix","_minDepthThreshold","hasBlur","_hasBlur","1402744XasUJf","tDepth","action","_tDepth","prototype","_blurStrength","_depthScale","#include <project_vertex>"];return(he=function(){return n})()}!function(n,t){for(var e=pe,r=he();;)try{if(545596===-parseInt(e(353))/1+-parseInt(e(348))/2*(-parseInt(e(374))/3)+-parseInt(e(324))/4*(-parseInt(e(390))/5)+-parseInt(e(345))/6*(parseInt(e(328))/7)+parseInt(e(360))/8+-parseInt(e(375))/9+-parseInt(e(371))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[pe(346)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=pe,t=new RegExp(n(380)),e=new RegExp(n(340),"i"),r=_e("init");t[n(373)](r+n(338))&&e[n(373)](r+n(368))?_e():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[pe(346)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();me(void 0,(function(){var n,t=pe;try{n=Function(t(379)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n.console||{},r=["log",t(341),"info","error",t(376),"table","trace"],o=0;o<r[t(325)];o++){var i=me[t(322)][t(364)][t(355)](me),a=r[o],c=e[a]||i;i[t(339)]=me[t(355)](me),i[t(332)]=c.toString[t(355)](c),e[a]=i}}))();class ge extends N{constructor(n={}){var t=pe;super(n),this[t(363)]={value:null},this[t(386)]={value:null},this[t(383)]={value:null},this[t(337)]={value:null},this[t(356)]={value:null},this[t(359)]={value:!1},this[t(327)]={value:0},this[t(384)]={value:0},this[t(365)]={value:.5},this[t(357)]={value:.9},this[t(323)]={value:1},this[t(366)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(333)]={value:1},this[t(389)]={value:1},this.setValues(n)}[de(329)](n){var t,e=de;!(null==(t=n[e(370)])?void 0:t[e(372)])&&(n[e(370)][e(372)]=""),n[e(354)][e(358)]=this._hasBlur,n[e(354)][e(381)]=this[e(383)],n[e(354)][e(361)]=this[e(363)],n[e(354)].distortionMap=this._distortionMap,n[e(354)][e(352)]=this[e(337)],n[e(354)][e(377)]=this[e(356)],n.uniforms[e(382)]=this[e(327)],n[e(354)][e(335)]=this[e(384)],n[e(354)].mixStrength=this[e(365)],n[e(354)][e(347)]=this[e(357)],n[e(354)][e(344)]=this[e(323)],n[e(354)].depthScale=this[e(366)],n[e(354)][e(385)]=this[e(342)],n[e(354)][e(336)]=this[e(333)],n[e(354)][e(388)]=this._mixContrast,n[e(369)]=e(387)+n[e(369)],n[e(369)]=n[e(369)][e(378)](e(367),e(321)),n.fragmentShader="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n.fragmentShader,n[e(349)]=n[e(349)][e(378)]("#include <emissivemap_fragment>",e(326))}get[de(381)](){return this._tDiffuse.value}set tDiffuse(n){var t=de;this._tDiffuse[t(331)]=n}get[de(361)](){var n=de;return this[n(363)][n(331)]}set[de(361)](n){this._tDepth.value=n}get distortionMap(){var n=de;return this._distortionMap[n(331)]}set[de(350)](n){var t=de;this[t(386)][t(331)]=n}get[de(352)](){var n=de;return this._tDiffuseBlur[n(331)]}set tDiffuseBlur(n){var t=de;this._tDiffuseBlur[t(331)]=n}get textureMatrix(){return this[de(356)].value}set[de(377)](n){var t=de;this[t(356)][t(331)]=n}get[de(358)](){return this[de(359)].value}set hasBlur(n){this._hasBlur.value=n}get[de(382)](){var n=de;return this[n(327)][n(331)]}set mirror(n){this[de(327)].value=n}get[de(335)](){var n=de;return this[n(384)][n(331)]}set[de(335)](n){this._mixBlur.value=n}get[de(320)](){return this._blurStrength.value}set[de(320)](n){this._blurStrength.value=n}get[de(347)](){return this[de(357)].value}set[de(347)](n){var t=de;this[t(357)][t(331)]=n}get[de(344)](){var n=de;return this[n(323)][n(331)]}set maxDepthThreshold(n){this._maxDepthThreshold.value=n}get[de(334)](){var n=de;return this[n(366)][n(331)]}set[de(334)](n){var t=de;this[t(366)][t(331)]=n}get[de(385)](){var n=de;return this[n(342)][n(331)]}set[de(385)](n){var t=de;this[t(342)][t(331)]=n}get[de(336)](){return this[de(333)].value}set[de(336)](n){var t=de;this[t(333)][t(331)]=n}get[de(388)](){var n=de;return this[n(389)][n(331)]}set[de(388)](n){this[de(389)].value=n}}function _e(n){function t(n){var e=pe;if("string"==typeof n)return function(n){}[e(322)]("while (true) {}")[e(346)](e(351));1!==(""+n/n)[e(325)]||n%20==0?function(){return!0}[e(322)]("debu"+e(343)).call(e(362)):function(){return!1}[e(322)]("debu"+e(343))[e(346)](e(330)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ye=we;function xe(){const n=["mirror","materialRef","588810MozsGr","far","clipPlane","depth-to-blur-ratio-bias","lookAtPosition","visible","constructor","depth-scale","function *\\( *\\)","render","addScaledVector","string","while (true) {}","view","clear","action","assign","return (function() ","multiplyScalar","sign","error","matrixWorld","textureMatrix","reflectorWorldPosition","updateMatrixWorld","texture","subVectors","constant","multiply","__proto__","dispose","cameraWorldPosition","value","traverse","input","elements","gger","console","matrixWorldInverse","5IWvWTo","distortion","695045mMsWmK","length","depthTexture","copy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","applyMatrix4","has-blur","defines-USE_DISTORTION","8HIzVdg","7001226fINgGJ","t-depth","init","6533396Oqpvyi","lookAt","11459469XIagVz","log","toString","target","add","material","normal","autoUpdate","1579908LjNSBm","extractRotation","setRenderTarget","negate","TresMeshReflectorMaterial","defines-USE_DEPTH","rotationMatrix","projectionMatrix","reflectorOffset","reflectorPlane","table","position","t-diffuse","test","bind","8252220woCdDO","setFromMatrixPosition","info","counter","mix-contrast","distortionMap","trace","defines-USE_BLUR","warn","key","shadowMap","set","uuid","enabled","stateObject","dot","index","virtualCamera","reflect"];return(xe=function(){return n})()}!function(n,t){const e=we,r=xe();for(;;)try{if(825953===parseInt(e(441))/1+-parseInt(e(464))/2+-parseInt(e(400))/3+parseInt(e(454))/4+-parseInt(e(439))/5*(parseInt(e(479))/6)+parseInt(e(456))/7*(parseInt(e(450))/8)+-parseInt(e(451))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=we,t=new RegExp(n(408)),e=new RegExp(n(445),"i"),r=Re(n(453));t[n(477)](r+"chain")&&e[n(477)](r+n(434))?Re():r("0")}))()}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ie(void 0,(function(){const n=we;let t;try{t=Function(n(417)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(437)]=t[n(437)]||{},r=[n(457),n(487),n(481),n(420),"exception",n(474),n(485)];for(let i=0;i<r[n(442)];i++){const t=Ie[n(406)].prototype[n(478)](Ie),o=r[i],a=e[o]||t;t[n(429)]=Ie[n(478)](Ie),t[n(458)]=a[n(458)].bind(a),e[o]=t}}))();const Se=["texture-matrix",ye(498),ye(476),ye(452),"t-diffuse-blur",ye(448),"mix-strength","min-depth-threshold","max-depth-threshold",ye(407),ye(403),ye(440),ye(484),ye(483),ye(486),ye(469),ye(449)];function we(n,t){const e=xe();return(we=function(n,t){return e[n-=399]})(n,t)}const Me=nn({__name:ye(495),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=ye,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=q(o),{camera:y,scene:x,renderer:R,extend:E}=Y();E({MeshReflectorMaterial:ge});const T=gn(),D=gn(),P=gn(),z=gn(),O=J((()=>{const n=we;return"number"==typeof f[n(432)]?[f[n(432)],f[n(432)]]:f[n(432)]})),C=J((()=>O[r(432)][0]>0||O.value[1]>0)),F={reflectorPlane:new U,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};ln((()=>{var n;const o=r;null==(n=T.value)||n[o(425)][o(430)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(432)]=new b(i[o(432)],i[o(432)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i[o(432)],w,M)},t(y,e(x)))),D[o(432)]=new b(i[o(432)],i.value,f),P.value=new le({resolution:i[o(432)],width:O.value[0],height:O.value[1],minDepthThreshold:a[o(432)],maxDepthThreshold:s[o(432)],depthScale:u[o(432)],depthToBlurRatioBias:l[o(432)]}),z[o(432)]={mirror:p,textureMatrix:F[o(422)],mixBlur:d,tDiffuse:T[o(432)].texture,tDepth:T[o(432)][o(443)],tDiffuseBlur:T.value.texture,hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":C[o(432)]?"":void 0,"defines-USE_DEPTH":u[o(432)]>0?"":void 0,"defines-USE_DISTORTION":g[o(432)]?"":void 0}}));const B=gn(),{onLoop:k}=$();k((()=>{var n;const t=r;if(!(B.value&&R[t(432)]&&T.value&&y[t(432)]))return;const e=function(n,t){const e=we;let r;return n[e(433)]((n=>{const o=e;n.isMesh&&n[o(461)]&&n[o(461)][o(491)]===t&&(r=n)})),r}(x.value,B[t(432)][t(491)]);if(!e)return;e.visible=!1;const i=R[t(432)].xr[t(492)],a=R[t(432)][t(489)][t(463)];(function(n){var t,e;const r=we;if(F[r(423)][r(480)](n[r(421)]),F[r(431)][r(480)](null==(t=y[r(432)])?void 0:t[r(421)]),F.rotationMatrix.extractRotation(n.matrixWorld),F[r(462)][r(490)](0,0,1),F.normal[r(447)](F.rotationMatrix),F[r(423)][r(410)](F[r(462)],o[r(472)]),F[r(413)][r(426)](F[r(423)],F[r(431)]),F.view[r(494)](F.normal)>0)return;F[r(413)][r(497)](F[r(462)])[r(467)](),F[r(413)][r(460)](F[r(423)]),F.rotationMatrix[r(465)](null==(e=y.value)?void 0:e.matrixWorld),F[r(404)].set(0,0,-1),F.lookAtPosition[r(447)](F[r(470)]),F.lookAtPosition[r(460)](F[r(431)]),F[r(459)][r(426)](F.reflectorWorldPosition,F[r(404)]),F[r(459)].reflect(F[r(462)]).negate(),F.target.add(F[r(423)]),F[r(496)][r(475)][r(444)](F.view),F.virtualCamera.up.set(0,1,0),F[r(496)].up[r(447)](F.rotationMatrix),F[r(496)].up.reflect(F.normal),F.virtualCamera[r(455)](F[r(459)]),F[r(496)].far=(null==y?void 0:y.value)[r(401)],F.virtualCamera[r(424)](),F[r(496)][r(471)][r(444)]((null==y?void 0:y.value)[r(471)]),F[r(422)][r(490)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(428)](F[r(496)][r(471)]),F[r(422)].multiply(F[r(496)][r(438)]),F[r(422)][r(428)](n[r(421)]),F[r(473)].setFromNormalAndCoplanarPoint(F.normal,F[r(423)]),F[r(473)][r(447)](F[r(496)][r(438)]),F.clipPlane[r(490)](F.reflectorPlane.normal.x,F[r(473)].normal.y,F[r(473)][r(462)].z,F[r(473)][r(427)]);const i=F.virtualCamera[r(471)];F.q.x=(Math.sign(F.clipPlane.x)+i[r(435)][8])/i.elements[0],F.q.y=(Math[r(419)](F[r(402)].y)+i.elements[9])/i[r(435)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i[r(435)][14],F.clipPlane[r(418)](2/F[r(402)][r(494)](F.q)),i[r(435)][2]=F[r(402)].x,i[r(435)][6]=F[r(402)].y,i[r(435)][10]=F.clipPlane.z+1,i[r(435)][14]=F.clipPlane.w})(e),R[t(432)][t(489)][t(463)]=!1,R[t(432)][t(466)](T[t(432)]),R[t(432)].autoClear||R[t(432)][t(414)](),R.value[t(409)](x[t(432)],F.virtualCamera),null==(n=null==P?void 0:P[t(432)])||n.render(R[t(432)],T[t(432)],D.value),R.value.xr[t(492)]=i,R[t(432)][t(489)][t(463)]=a,e[t(405)]=!0,R[t(432)].setRenderTarget(null)}));const j=xn(),N=J((()=>{const n=r,t={};return Object[n(416)](t,o),Object[n(416)](t,j[n(432)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(432)])||n[e(430)](),null==(t=null==D?void 0:D[e(432)])||t[e(430)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(468),bn({key:c(488)+z[c(432)][c(486)]+z[c(432)][c(469)]+z[c(432)][c(449)],ref_key:c(399),ref:B},N[c(432)],{"texture-matrix":F[c(422)],mirror:Q(p),"t-diffuse":null==(e=T[c(432)])?void 0:e[c(425)],"t-depth":null==(o=T[c(432)])?void 0:o[c(443)],"t-diffuse-blur":null==(i=D.value)?void 0:i.texture,"has-blur":C[c(432)],"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":C[c(432)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Se)}}});function Re(n){function t(n){const e=we;if(typeof n===e(411))return function(n){}[e(406)](e(412))[e(446)](e(482));1!==(""+n/n)[e(442)]||n%20==0?function(){return!0}[e(406)]("debu"+e(436)).call(e(415)):function(){return!1}[e(406)]("debu"+e(436))[e(446)](e(493)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ee(n,t){const e=Te();return(Ee=function(n,t){return e[n-=449]})(n,t)}!function(n,t){const e=Ee,r=Te();for(;;)try{if(864299===-parseInt(e(454))/1*(-parseInt(e(466))/2)+-parseInt(e(464))/3+parseInt(e(486))/4*(-parseInt(e(449))/5)+-parseInt(e(484))/6+-parseInt(e(458))/7+-parseInt(e(457))/8*(parseInt(e(450))/9)+parseInt(e(463))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(452)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Te(){const n=["__proto__","30917320BMSfOR","1675284dIrbSa","while (true) {}","5288dHvmLS","length","input","dispose","CubeCamera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","bind","gger","background","warn","prototype","value","table","init","counter","string","console","2349882hGqPzt","info","12hmrXTa","toString","682130sjIqAK","11686365DlNfAd","debu","apply","fog","371vgfewh","function *\\( *\\)","return (function() ","8UlcYSY","3853633LRUpHH","texture","log","constructor"];return(Te=function(){return n})()}!function(){Ae(this,(function(){const n=Ee,t=new RegExp(n(455)),e=new RegExp(n(471),"i"),r=Pe(n(480));t.test(r+"chain")&&e.test(r+n(468))?Pe():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n){function t(n){const e=Ee;if(typeof n===e(482))return function(n){}[e(461)](e(465))[e(452)](e(481));1!==(""+n/n)[e(467)]||n%20==0?function(){return!0}.constructor(e(451)+e(474)).call("action"):function(){return!1}[e(461)](e(451)+e(474))[e(452)](e(472)),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Ee;let t;try{t=Function(n(456)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(483)]=t.console||{},r=[n(460),n(476),n(485),"error","exception",n(479),"trace"];for(let i=0;i<r[n(467)];i++){const t=De.constructor[n(477)].bind(De),o=r[i],a=e[o]||t;t[n(462)]=De[n(473)](De),t[n(487)]=a.toString[n(473)](a),e[o]=t}}))();const ze=Ce;!function(n,t){const e=Ce,r=Be();for(;;)try{if(526916===-parseInt(e(342))/1+parseInt(e(354))/2+-parseInt(e(331))/3*(parseInt(e(353))/4)+-parseInt(e(336))/5+parseInt(e(359))/6+parseInt(e(329))/7+parseInt(e(338))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n,t){const e=Be();return(Ce=function(n,t){return e[n-=323]})(n,t)}!function(){Oe(this,(function(){const n=Ce,t=new RegExp(n(357)),e=new RegExp(n(343),"i"),r=Ne("init");t.test(r+n(327))&&e[n(349)](r+"input")?Ne():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(){const n=["$slots","constructor","test","stateObject","string","texture","562528xKRNYX","1448528CMCrRP","far","near","function *\\( *\\)","frames","5594448MCrSmg",'{}.constructor("return this")( )',"__proto__","trace","prototype","apply","table","error","visible","resolution","exception","index","debu","info","return (function() ","counter","chain","action","4201113xgftNf","value","12SoCVvi","envMap","object","while (true) {}","console","4412185FJuOAF","toString","816920IDIZPF","gger","length","bind","387065TprQzs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rgRef","default","warn"];return(Be=function(){return n})()}Fe(void 0,(function(){const n=Ce,t=function(){const n=Ce;let t;try{t=Function(n(325)+n(360)+");")()}catch(e){t=window}return t}(),e=t[n(335)]=t[n(335)]||{},r=["log",n(346),n(324),n(366),n(369),n(365),n(362)];for(let o=0;o<r[n(340)];o++){const t=Fe.constructor[n(363)][n(341)](Fe),i=r[o],a=e[i]||t;t[n(361)]=Fe[n(341)](Fe),t.toString=a[n(337)][n(341)](a),e[i]=t}}))();const ke=[ze(333)],je=nn({__name:ze(370),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ze,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=Y(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return K((()=>s),(n=>{var t;const e=Ee;null==(t=c[e(478)])||t[e(469)](),c[e(478)]=new v(n.value),c[e(478)][e(459)].type=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{const r=Ee;e&&(f[r(478)]=new(D[r(470)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Ee;null==(n=c[t(478)])||n[t(469)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ee;p=a[t(478)][t(453)],d=a[t(478)][t(475)],a[t(478)][t(475)]=r||d,a[t(478)][t(453)]=o||p,null==(n=f[t(478)])||n.update(i[t(478)],a.value),a[t(478)].fog=p,a[t(478)][t(475)]=d}}}({resolution:o[r(368)],near:o[r(356)],far:o[r(355)],envMap:o[r(332)],fog:o.fog}),{onBeforeLoop:s}=$();let u=0;const l=X(null);return s((()=>{const n=r;l[n(330)]&&(o[n(358)]===1/0||u<o[n(358)])&&(l[n(330)][n(367)]=!1,c(),l[n(330)][n(367)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(352)]}),(n,t)=>{const e=r;return on(),an("TresGroup",null,[dn("primitive",{object:Q(a)},null,8,ke),dn("TresGroup",{ref_key:e(344),ref:l},[cn(n[e(347)],e(345))],512)])}}});function Ne(n){function t(n){const e=Ce;if(typeof n===e(351))return function(n){}.constructor(e(334))[e(364)](e(326));1!==(""+n/n).length||n%20==0?function(){return!0}[e(348)](e(323)+e(339)).call(e(328)):function(){return!1}.constructor(e(323)+e(339))[e(364)](e(350)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ue(n,t){const e=Ze();return(Ue=function(n,t){return e[n-=472]})(n,t)}!function(n,t){const e=Ue,r=Ze();for(;;)try{if(783832===parseInt(e(502))/1*(parseInt(e(500))/2)+parseInt(e(494))/3+parseInt(e(481))/4*(-parseInt(e(509))/5)+-parseInt(e(473))/6+parseInt(e(477))/7+parseInt(e(510))/8*(-parseInt(e(486))/9)+parseInt(e(483))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Le(this,(function(){const n=Ue,t=new RegExp(n(480)),e=new RegExp(n(491),"i"),r=Ye("init");t[n(474)](r+n(495))&&e[n(474)](r+n(505))?Ye():r("0")}))()}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(){const n=["193708GYrgTb","defineProperty","18143700uwNvKh","return (function() ",'{}.constructor("return this")( )',"261VXRyhT","action","key","while (true) {}","MathUtils","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","warn","879741vQelEg","chain","error","gger","value","uniforms","2yfRwji","info","1189593XvhxTf","call","clone","input","counter","debu","length","80jexWKg","350312yoAbdL","string","reduce","7444092SxhtZz","test","entries","constructor","5404119lqfurs","console","apply","function *\\( *\\)"];return(Ze=function(){return n})()}function Ge(n,t,e,r){const o=Ue,i=class extends P{constructor(o={}){const i=Ue,a=Object[i(475)](n);super({uniforms:a[i(472)](((n,[t,e])=>{const r=G[i(504)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[i(488)]="",a.forEach((([n])=>Object[i(482)](this,n,{get:()=>this[i(499)][n][i(498)],set:t=>this[i(499)][n][i(498)]=t}))),Object.assign(this,o),r&&r(this)}};return i[o(488)]=D[o(490)].generateUUID(),i}function Ye(n){function t(n){const e=Ue;if(typeof n===e(511))return function(n){}[e(476)](e(489)).apply(e(506));1!==(""+n/n).length||n%20==0?function(){return!0}[e(476)]("debu"+e(497))[e(503)](e(487)):function(){return!1}[e(476)](e(507)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}He(void 0,(function(){const n=Ue,t=function(){const n=Ue;let t;try{t=Function(n(484)+n(485)+");")()}catch(e){t=window}return t}(),e=t[n(478)]=t.console||{},r=["log",n(493),n(501),n(496),"exception","table","trace"];for(let o=0;o<r[n(508)];o++){const t=He.constructor.prototype[n(492)](He),i=r[o],a=e[i]||t;t.__proto__=He.bind(He),t.toString=a.toString[n(492)](a),e[i]=t}}))();var We=ar;!function(n,t){for(var e=ar,r=qe();;)try{if(492058===-parseInt(e(502))/1+parseInt(e(487))/2*(-parseInt(e(491))/3)+parseInt(e(562))/4+-parseInt(e(531))/5+parseInt(e(441))/6+-parseInt(e(486))/7*(-parseInt(e(519))/8)+-parseInt(e(463))/9*(parseInt(e(604))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var $e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$e(this,(function(){var n=ar,t=new RegExp(n(613)),e=new RegExp(n(603),"i"),r=Dr(n(547));t[n(605)](r+n(597))&&e.test(r+"input")?Dr():r("0")}))()}();var Ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ar(466)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(){var n=["gger","length",";\n  ","bind","csm_AO","csm_DiffuseColor","void ","next",". Shader cannot compile.","emissive","chain","material.clearcoatRoughness = ","toPrimitive","ShaderMaterial","lastIndexOf","MeshPhongMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","152140ecxkPr","test","undefined","csm_Emissive"," );\n    ","\n    gl_FragColor = ","concat","string",'". Shader cannot compile.',"function *\\( *\\)","create","clone","positionRaw","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","depthAlpha","csm_Clearcoat","MathUtils","#define IS_VERTEX;\n","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","bump","setPrototypeOf","getOwnPropertyDescriptor","construct","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","writable","getPrototypeOf","is not a constructor","Cannot call a class as a function","generateUUID","prototype","constructor","Material","fragmentShader","Arguments","object","__csm","5342760OaWAim","csm_Metalness","\n    vec4 csm_internal_positionUnprojected = ","_getCacheHash",'CSM: Property "',"iterator","clearcoatRoughness","Set","push","propertyIsEnumerable","_generateMaterial",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","\n    gl_PointSize = ","call","csm_Position","roughness","substring","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","ShaderChunk","// #_CSM_#","table","isArray","468FZvFgC","fragColor","@@toPrimitive must return a primitive value.","apply","csm_Bump","configurable","default","getOwnPropertySymbols","pointSize","baseMaterial","CustomShaderMaterial does not support RawShaderMaterial","warn","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","MeshToonMaterial","\n    gl_Position = ","exception","csm_ClearcoatNormal","\n    vec3 transformed = ","PointsMaterial","this hasn't been initialised - super() hasn't been called","needsUpdate","Derived constructors may only return object or undefined","14TIfJMt","5188wZvkGj","filter","_getPatchMapForMaterial","csm_Roughness","12dENfMv","entries","get","keys"," is not available in ","\n    \n","assign","name","action","console","MeshPhysicalMaterial","21169kCUONh","symbol","diffuse","\n            ","CSM: ","replace","_patchShader","MeshLambertMaterial","csm_DepthAlpha","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","Super expression must either be null or a function","metalness","cacheKey","__proto__","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","void main() {","split","906792xfnHWb","function","();\n            // #_CSM_#\n          ","#define IS_UNKNOWN;\n",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","value","while (true) {}",'{}.constructor("return this")( )',"defineProperties","set","done","forEach","754855zrENsp",";\n    ","normal","();\n              // #_CSM_#\n          ","@@iterator","defineProperty","toString","includes","onBeforeCompile","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","ShadowMaterial","MeshNormalMaterial","patchMap","csm_PositionRaw","Map","\n            \n            void main() {\n          ","init","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","error","\n    varying mat4 csm_internal_vModelViewMatrix;\n","find","customProgramCacheKey","getOwnPropertyDescriptors","sham","debu","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","MeshDepthMaterial","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n    \n            ","csm_Normal","1394176NfiuYm","key","isAlreadyExtended","_getMaterialDefine","cacheHash","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","Object","vertexShader","clearcoatNormal","info","uniforms","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","silent","type"," - (dot(","indexOf","trim","clearcoat","instanceID","MeshStandardMaterial","enumerable","log","csm_FragColor","position","void main()"];return(qe=function(){return n})()}function Xe(n){var t=ar,e=function(n,t){var e=ar;if(typeof n!==e(439)||null===n)return n;var r=n[Symbol[e(599)]];if(void 0!==r){var o=r.call(n,t||e(469));if("object"!=typeof o)return o;throw new TypeError(e(465))}return(t===e(611)?String:Number)(n)}(n,t(611));return typeof e===t(503)?e:String(e)}function Ke(n,t,e){return(t=Xe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=ar,r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(488)]((function(t){var r=e;return Object[r(426)](n,t)[r(582)]}))),r[e(449)][e(466)](r,o)}return r}function Qe(n){for(var t=ar,e=1;e<arguments[t(588)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach((function(t){Ke(n,t,r[t])})):Object[t(554)]?Object[t(527)](n,Object[t(554)](r)):Je(Object(r))[t(530)]((function(e){var o=t;Object[o(536)](n,e,Object[o(426)](r,e))}))}return n}function nr(n,t){var e=ar;if(null==n)return{};var r,o,i=function(n,t){var e=ar;if(null==n)return{};var r,o,i={},a=Object[e(494)](n);for(o=0;o<a[e(588)];o++)r=a[o],t[e(577)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(470)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(588)];o++)r=a[o],t[e(577)](r)>=0||Object[e(434)][e(450)][e(454)](n,r)&&(i[r]=n[r])}return i}function tr(n,t){var e=ar;(null==t||t>n[e(588)])&&(t=n[e(588)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function er(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=ar,r=null==n?null:e(606)!=typeof Symbol&&n[Symbol[e(446)]]||n[e(535)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(454)](n))[e(594)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(454)](r))[e(529)])&&(s[e(449)](o[e(524)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ar;if(n){if(typeof n===e(611))return tr(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return r===e(568)&&n[e(435)]&&(r=n.constructor[e(498)]),r===e(545)||r===e(448)?Array.from(n):r===e(438)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(605)](r)?tr(n,t):void 0}}(n,t)||function(){throw new TypeError(ar(559))}()}function rr(n,t){for(var e=ar,r=0;r<t[e(588)];r++){var o=t[r];o[e(582)]=o[e(582)]||!1,o[e(468)]=!0,e(524)in o&&(o[e(429)]=!0),Object[e(536)](n,Xe(o[e(563)]),o)}}function or(n){if(void 0===n)throw new ReferenceError(ar(483));return n}function ir(n,t){var e=ar;return(ir=Object[e(425)]?Object.setPrototypeOf.bind():function(n,t){return n[e(515)]=t,n})(n,t)}function ar(n,t){var e=qe();return(ar=function(n,t){return e[n-=415]})(n,t)}function cr(n){var t=ar;return(cr=Object.setPrototypeOf?Object.getPrototypeOf[t(590)]():function(n){var e=t;return n[e(515)]||Object[e(430)](n)})(n)}function sr(n){var t=function(){var n=ar;if(typeof Reflect===n(606)||!Reflect.construct)return!1;if(Reflect[n(427)][n(555)])return!1;if(typeof Proxy===n(520))return!0;try{return Boolean[n(434)].valueOf[n(454)](Reflect[n(427)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ar,o=cr(n);if(t){var i=cr(this).constructor;e=Reflect[r(427)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=ar;if(t&&(typeof t===e(439)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(485));return or(n)}(this,e)}}Ve(void 0,(function(){var n,t=ar;try{n=Function("return (function() "+t(526)+");")()}catch(s){n=window}for(var e=n.console=n[t(500)]||{},r=[t(583),t(474),t(571),t(550),t(479),t(461),"trace"],o=0;o<r[t(588)];o++){var i=Ve[t(435)].prototype.bind(Ve),a=r[o],c=e[a]||i;i.__proto__=Ve[t(590)](Ve),i[t(537)]=c.toString[t(590)](c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:We(592),normal:We(561),roughness:We(490),metalness:We(442),emissive:We(607),ao:We(591),bump:We(467),clearcoat:We(420),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:We(480),pointSize:"csm_PointSize",fragColor:We(584),depthAlpha:We(510),position:We(455),positionRaw:We(544)},dr=(Ke(ur={},""[We(610)](pr[We(585)]),"*"),Ke(ur,""[We(610)](pr[We(417)]),"*"),Ke(ur,"".concat(pr[We(533)]),"*"),Ke(ur,""[We(610)](pr[We(471)]),[We(482)]),Ke(ur,""[We(610)](pr[We(504)]),"*"),Ke(ur,""[We(610)](pr[We(464)]),"*"),Ke(ur,""[We(610)](pr[We(596)]),["MeshStandardMaterial",We(501)]),Ke(ur,"".concat(pr[We(456)]),[We(581),We(501)]),Ke(ur,"".concat(pr[We(513)]),[We(581),"MeshPhysicalMaterial"]),Ke(ur,""[We(610)](pr.ao),["MeshStandardMaterial",We(501),"MeshBasicMaterial",We(509),We(602),We(477)]),Ke(ur,""[We(610)](pr[We(424)]),[We(509),"MeshMatcapMaterial",We(542),We(602),We(501),"MeshStandardMaterial",We(477),We(541)]),Ke(ur,""[We(610)](pr[We(419)]),[We(558)]),Ke(ur,""[We(610)](pr[We(579)]),[We(501)]),Ke(ur,""[We(610)](pr[We(447)]),[We(501)]),Ke(ur,""[We(610)](pr[We(570)]),[We(501)]),ur),hr={"#include <lights_physical_fragment>":D[We(459)].lights_physical_fragment},vr=(Ke(lr={},""[We(610)](pr[We(533)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = ".concat(pr.normal,";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Ke(lr,"".concat(pr[We(585)]),{"#include <begin_vertex>":We(481)[We(610)](pr.position,We(589))}),Ke(lr,"".concat(pr.positionRaw),{"#include <begin_vertex>":We(443).concat(pr[We(417)],We(523))}),Ke(lr,""[We(610)](pr[We(471)]),{"gl_PointSize = size;":We(453)[We(610)](pr[We(471)],We(532))}),Ke(lr,""[We(610)](pr[We(504)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[We(610)](pr[We(504)],We(589))}),Ke(lr,"".concat(pr.fragColor),{"#include <dithering_fragment>":We(549)[We(610)](pr[We(464)],We(589))}),Ke(lr,"".concat(pr[We(596)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[We(610)](pr[We(596)],We(532))}),Ke(lr,""[We(610)](pr[We(456)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = ".concat(pr.roughness,We(532))}),Ke(lr,""[We(610)](pr[We(513)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[We(610)](pr[We(513)],We(532))}),Ke(lr,"".concat(pr.ao),{"#include <aomap_fragment>":We(476)[We(610)](pr.ao,";\n    ")}),Ke(lr,""[We(610)](pr.bump),{"#include <normal_fragment_maps>":We(557)[We(610)](pr[We(424)],We(576))[We(610)](pr.bump,We(452))}),Ke(lr,""[We(610)](pr[We(419)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":We(475)[We(610)](pr[We(419)],We(608)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":We(548).concat(pr[We(419)],We(532))}),Ke(lr,"".concat(pr[We(579)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[We(610)](pr[We(579)],";")}),Ke(lr,""[We(610)](pr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":We(598).concat(pr[We(447)],";")}),Ke(lr,""[We(610)](pr[We(570)]),{"#include <clearcoat_normal_fragment_begin>":We(418)}),lr),mr=(Ke(fr={},"".concat(pr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":We(516)[We(610)](pr[We(585)],", 1.0 );\n  ")}),Ke(fr,""[We(610)](pr[We(417)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":We(478)[We(610)](pr[We(585)],We(589))}),Ke(fr,"".concat(pr[We(504)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":We(609).concat(pr[We(504)],We(589))}),Ke(fr,""[We(610)](pr[We(464)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[We(610)](pr[We(464)],We(589))}),fr),gr={clearcoat:[pr.clearcoat,pr[We(570)],pr.clearcoatRoughness]},_r=We(423),yr=We(573),xr=We(551),br=We(567),Ir=We(551),Sr=We(496),wr=["baseMaterial",We(437),We(569),"uniforms",We(543),"cacheKey","silent"],Mr=function(n,t,e){return n[We(518)](t).join(e)},Rr=function(n,t){var e,r=We;return new RegExp("\\b".concat((e=t,e[We(507)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(605)](n)};function Er(n){return n?n.replace(/\s/g,""):void 0}function Ar(n){return n[We(507)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=We;!function(n,t){var e=ar;if(typeof t!==e(520)&&null!==t)throw new TypeError(e(512));n[e(434)]=Object[e(415)](t&&t[e(434)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(536)](n,e(434),{writable:!1}),t&&ir(n,t)}(c,n);var e,r,o,i,a=sr(c);function c(n){var t,e,r,o,i,s=ar,u=n.baseMaterial,l=n[s(437)],f=n[s(569)],p=n[s(572)],d=n.patchMap,h=n[s(514)],v=n[s(574)],m=nr(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ar(432))}(this,c),!function(n){var t=We;try{new n}catch(e){if(e.message[t(577)](t(431))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),"RawShaderMaterial"===e.type)throw new Error(s(473));(function(n,t){var e=We;e(588),Object[e(497)](n,t);var r=Object[e(430)](t);Object[e(492)](Object[e(554)](r))[e(488)]((function(n){var t=e,r="function"==typeof n[1][t(493)],o=typeof n[1][t(528)]===t(520),i=typeof n[1][t(524)]===t(520),a=n[0]===t(435);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(520)&&Object[r(536)](n,t[0],t[1])}))})(or(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(421)][s(433)](),type:e[s(575)],isAlreadyExtended:(r=e[s(539)],o=We,i=r[o(537)]()[o(578)](),!(0===i[o(457)](i.indexOf("{")+1,i[o(601)]("}"))[o(578)]().length)),cacheHash:"",silent:v},t[s(572)]=Qe(Qe({},t.uniforms||{}),p||{});var g=t[s(440)],_=g[s(437)],y=g.vertexShader,x=t[s(572)];return t[s(440)][s(566)]=t[s(444)](),t[s(451)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=ar,t=arguments[n(588)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=t[n(572)]||this.uniforms,Object[n(497)](this[n(440)],t);var e=this.__csm,r=e[n(437)],o=e[n(569)],i=this[n(572)],a=this[n(444)]();this[n(440)][n(566)]=a,this[n(451)](r,o,i)}},{key:t(416),value:function(){var n=t,e={baseMaterial:this.__csm[n(472)],fragmentShader:this[n(440)][n(437)],vertexShader:this[n(440)].vertexShader,uniforms:this.uniforms,silent:this[n(440)].silent,patchMap:this.__csm[n(543)],cacheKey:this[n(440)][n(514)]},r=new this.constructor(e);return Object.assign(this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(440)],r=e.fragmentShader,o=e[n(569)],i=this[n(572)],a=[Er(r),Er(o),i][n(488)]((function(n){return void 0!==n}));return a[n(588)]>0?Mn(a,{excludeValues:!0}):this[n(553)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(572)]=r||{},this[o(553)]=function(){var n=o;return i[n(440)][n(566)]};var a=function(t){var r=o;try{var a=i[r(565)]();if(n){var c=i[r(508)](Ar(n),t[r(437)],!0);t[r(437)]=a+c}if(e){var s=i[r(508)](Ar(e),t[r(569)]);t[r(569)]=r(422)+s,t.vertexShader=a+t[r(569)]}t.uniforms=Qe(Qe({},t.uniforms),i[r(572)]),i[r(572)]=t.uniforms}catch(u){console[r(550)](u)}};if(this[o(440)][o(564)]){var c=this[o(539)];this[o(539)]=function(n,t){c(n,t),a(n)}}else this[o(539)]=a;this[o(484)]=!0}},{key:t(508),value:function(n,e,r){var o=t,i=this,a=e,c=Qe(Qe({},this[o(489)]()),this.__csm[o(543)]);Object[o(492)](gr)[o(530)]((function(t){var e=o,r=er(t,2),a=r[0],c=r[1][e(552)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error(e(445)[e(610)](a,'" is required to use output "')[e(610)](c,e(612)))})),Object[o(492)](hr)[o(530)]((function(n){var t=er(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object[o(494)](c)[o(530)]((function(t){var e=o;Object[e(494)](c[t])[e(530)]((function(r){var o=e,s=dr[t],u=i[o(440)][o(575)];if("*"===t||Rr(n,t)){if(!(!s||Array[o(462)](s)&&s[o(538)](u)||"*"===s))throw new Error(o(506)[o(610)](t,o(495))[o(610)](u,o(595)));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(440)][o(580)].replace(/-/g,"_"),h=n[o(507)](/void\s+main\s*\(\s*\)/g,o(593).concat(d,"()")),v=n[o(538)](o(586)),m=a[o(538)](o(460));return v&&(m&&this[o(440)][o(564)]?(a=a.replace(o(517),o(505)[o(610)](h,o(546))),s=a,u="// #_CSM_#",l=o(505)[o(610)](d,o(521)),f=We,p=s.lastIndexOf(u),a=-1===p?s:s[f(457)](0,p)+l+s[f(457)](p+u[f(588)])):a=a.replace(o(517),o(458)[o(610)](r?Ir:xr,o(428))[o(610)](_r,o(560))[o(610)](h,o(540))[o(610)](yr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(610)](r?Sr:br,o(511)).concat(d,o(534)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(440)].type;return e?"#define IS_".concat(e.toUpperCase(),";\n"):n(522)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this.__csm[n(575)]===n(600)?mr:vr}}],i=ar,r&&rr(e[i(434)],r),o&&rr(e,o),Object[i(536)](e,i(434),{writable:!1}),c}(D[We(436)]);function Dr(n){function t(n){var e=ar;if(typeof n===e(611))return function(n){}.constructor(e(525))[e(466)]("counter");1!==(""+n/n)[e(588)]||n%20==0?function(){return!0}.constructor(e(556)+"gger")[e(454)](e(499)):function(){return!1}.constructor(e(556)+e(587))[e(466)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Fr;function zr(){const n=["input","constructor","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","__proto__","length","chain","function *\\( *\\)","#ff00fc","call","gger","setStyle","roughness","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","console","metalness","apply","table","return (function() ","5141187XErlZj","init","info","MeshPhysicalMaterial","clearcoat","6kYbvxf","bind","string","index","prototype","329435MAPDTy","color","918010pUmnZb","3424aFhDEZ","\n\t\t\t","\n      ","1455632HibfCx","object","clearcoatRoughness","error","stateObject","test","549662JNKvjg","debu","1857BTgGQh","log","3464559eMGPFC"];return(zr=function(){return n})()}!function(n,t){const e=Fr,r=zr();for(;;)try{if(297606===-parseInt(e(447))/1+-parseInt(e(459))/2+parseInt(e(461))/3*(-parseInt(e(450))/4)+parseInt(e(449))/5*(parseInt(e(442))/6)+parseInt(e(463))/7+parseInt(e(453))/8+parseInt(e(437))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=Fr,t=new RegExp(n(472)),e=new RegExp(n(467),"i"),r=jr(n(438));t[n(458)](r+n(471))&&e[n(458)](r+n(464))?jr():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fr(n,t){const e=zr();return(Fr=function(n,t){return e[n-=426]})(n,t)}Cr(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function(n(436)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(432)]=t[n(432)]||{},r=[n(462),"warn",n(439),n(456),"exception",n(435),"trace"];for(let o=0;o<r[n(470)];o++){const t=Cr.constructor[n(446)][n(443)](Cr),i=r[o],a=e[i]||t;t[n(469)]=Cr[n(443)](Cr),t.toString=a[n(468)][n(443)](a),e[i]=t}}))();const Br=[Pr(454)],kr=nn({__name:Pr(445),props:{color:{default:Pr(426)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(440)],metalness:e[t(433)],roughness:e[t(430)],clearcoat:e[t(441)],clearcoatRoughness:e.clearcoatRoughness,color:e[t(448)],vertexShader:t(466),fragmentShader:t(451)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(452)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(431)},o=new Tr(r);return ln((()=>{const n=t;o[n(448)][n(429)](e[n(448)]),o[n(433)]=e[n(433)],o[n(430)]=e[n(430)],o[n(441)]=e[n(441)],o[n(455)]=e.clearcoatRoughness})),(n,t)=>(on(),an("primitive",{object:Q(o)},null,8,Br))}});function jr(n){function t(n){const e=Fr;if(typeof n===e(444))return function(n){}[e(465)]("while (true) {}")[e(434)]("counter");1!==(""+n/n)[e(470)]||n%20==0?function(){return!0}[e(465)](e(460)+e(428))[e(427)]("action"):function(){return!1}.constructor(e(460)+"gger")[e(434)](e(457)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Lr();;)try{if(524973===parseInt(e(128))/1*(parseInt(e(137))/2)+parseInt(e(117))/3*(-parseInt(e(113))/4)+parseInt(e(129))/5+-parseInt(e(123))/6+-parseInt(e(110))/7+parseInt(e(132))/8+parseInt(e(120))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nr(this,(function(){var n=Hr,t=new RegExp(n(136)),e=new RegExp(n(135),"i"),r=Zr(n(106));t[n(115)](r+n(109))&&e[n(115)](r+n(105))?Zr():r("0")}))()}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(102)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(){var n=["4640544XriKYG","call","action","953028tYrUPX","__proto__","string","length","trace","39451Zdjjfg","767215GLtBwm","prototype","toString","549184qHMLqJ","console","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","26QEKcyX","apply","exception","while (true) {}","input","init","info","log","chain","270277uxxPxN","debu","table","116InAkYB","return (function() ","test","constructor","54636TwRuXD","bind","error"];return(Lr=function(){return n})()}function Hr(n,t){var e=Lr();return(Hr=function(n,t){return e[n-=102]})(n,t)}function Zr(n){function t(n){var e=Hr;if(typeof n===e(125))return function(n){}.constructor(e(104))[e(102)]("counter");1!==(""+n/n)[e(126)]||n%20==0?function(){return!0}[e(116)](e(111)+e(134))[e(121)](e(122)):function(){return!1}[e(116)](e(111)+e(134))[e(102)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ur(void 0,(function(){var n,t=Hr;try{n=Function(t(114)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n[t(133)]||{},r=[t(108),"warn",t(107),t(119),t(103),t(112),t(127)],o=0;o<r[t(126)];o++){var i=Ur[t(116)][t(130)][t(118)](Ur),a=r[o],c=e[a]||i;i[t(124)]=Ur.bind(Ur),i[t(131)]=c[t(131)][t(118)](c),e[a]=i}}))();export{Ge as C,kr as _,qn as a,ct as b,bt as c,Et as d,Bt as e,qt as f,je as g,Me as h,dt as u};

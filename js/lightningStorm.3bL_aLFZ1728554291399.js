import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.A2-s57Hh1728554291399.js";import{B as i,V as s,co as n,ab as e,X as r,h as o,an as a,$ as h,s as c,C as u,_ as l}from"./three.YiCjTDWq1728554291399.js";import{U as d,e as p,F as m}from"./@tresjs.IlQvaTJ91728554291399.js";import{c as g}from"./simplex-noise.P9JMzoHY1728554291399.js";import{d as f,a3 as y,o as b,E as S,u as x,r as v,j as w,g as I,m as _,F as P}from"./@vue.JNsx1iN61728554291399.js";import"./index.m1UpxKuX1728554291399.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Fr15TeFX1728554291399.js";import"./three-custom-shader-material.jyK-33IL1728554291399.js";import"./object-hash.T8hJJgjS1728554291399.js";import"./@amap.pS6gfiLZ1728554291399.js";import"./jszip.ZN8xj_JH1728554291399.js";import"./glsl-tokenizer.y_V5nCRK1728554291399.js";import"./glsl-token-string.dXz7aW6T1728554291399.js";import"./glsl-token-functions.ziXdc34f1728554291399.js";import"./@vueuse.nb-8z3af1728554291399.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.yVu1PtzU1728554291399.js";import"./all.three.fgJ2kEZ01728554291399.js";import"./oimophysics.x0jH7fze1728554291399.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.LMYSeSjg1728554291399.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.X8rJNL0t1728554291399.js";import"./index.Tylq_rsN1728554291399.js";import"./three-stdlib.W1Z_QaHt1728554291399.js";import"./@pmndrs.X_zaObHB1728554291399.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.pgQrnDpo1728554291399.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.KaSPvL3S1728554291399.js";function R(){const t=["radius0","rayParameters","add","toString","56AZrPvk","drawRange","subrayProbability","cross1","while (true) {}","currentIndex","sourceOffset","timeFraction","vertices","bind","seedGenerator","simplexY","state","linPos0","788072sFeuEh","gger","down","createSegment","call","isEternal","update","array","up0","linPos1","createRandomGenerator","minRadius","RAY_VANISHING","onSubrayCreation","recursionProbability","vanishingTimeFactor","isInitialSegment","currentVertex","timeScale","setIndex","log","forwardsFill","subrayCylinderPosition","beginVanishingTime","crossVectors","updateMesh","170OQSyFo","randomGenerator","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","createPrism","middleLinPos","copy","sub","birthTime","multiplyScalar","maxSubrays","RAY_PROPAGATING","subrays","console","floor","setAttribute","fraction0","330bbvzxr","subrayConePosition","action","test","position","clone","subVectors","createTriangleVerticesWithUVs","positionVariationFactor","pow","simplexX","endPropagationTime","forwards","lerp","maxRaySegments","addNewSubray","currentSeed","iteration","RAY_UNBORN","isStatic","positionAttribute","length","uvs","RAY_EXTINGUISHED","newPos","RAY_INITIALIZED","roughness","currentCoordinate","setSeed","fractalRayRecursive","return (function() ","153swBXHC","pos0","subrayPeriod","radius1","normalize","apply","1790wefKiZ","createPrismFaces","function *\\( *\\)","constructor","copyParameters","debu","subrayDutyCycle","numSubrays","maxSubrayRecursion","generateUVs","COS30DEG","type","pos1","destOffset","sin","ramification","random","seed","currentUVCoordinate","raySegments","RAY_STEADY","SIN30DEG","currentSegmentIndex","currentCreateTriangleVertices","68605FfkDph","exception","needsUpdate","getNewSegment","info","time","radius1Factor","warn","lerpVectors","200871mkeQCj","currentSegmentCallback","indices","usage","simplexZ","330326RlQENW","side","string","createDefaultSubrayCreationCallbacks","table","radius0Factor","propagationTimeFactor","set","onDecideSubrayCreation","cos","prototype","fractalRay","4815756JBMEqz","recursion","vPos","initSubray","middlePos","straightness","min","deathTime","up1","count","push","visible","init","uvsAttribute","createSubray","maxIterations","2733736ZxTaFg","currentSubray","fraction1","stateObject","noiseSeed","fillMesh","ceil"];return(R=function(){return t})()}const T=V;!function(t,i){const s=V,n=R();for(;;)try{if(413351===parseInt(s(481))/1+-parseInt(s(443))/2*(parseInt(s(437))/3)+-parseInt(s(509))/4+parseInt(s(467))/5*(parseInt(s(406))/6)+-parseInt(s(520))/7*(parseInt(s(534))/8)+parseInt(s(493))/9+-parseInt(s(389))/10*(-parseInt(s(476))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(442)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=V,i=new RegExp(t(445)),s=new RegExp(t(392),"i"),n=F(t(505));i[t(409)](n+"chain")&&s[t(409)](n+"input")?F():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(442)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function V(t,i){const s=R();return(V=function(t,i){return s[t-=377]})(t,i)}A(void 0,(function(){const t=V;let i;try{i=Function(t(436)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(402)]=i.console||{},n=[t(383),t(474),t(471),"error",t(468),t(485),"trace"];for(let r=0;r<n[t(427)];r++){const i=A[t(446)][t(491)][t(529)](A),e=n[r],o=s[e]||i;i.__proto__=A.bind(A),i[t(519)]=o[t(519)].bind(o),s[e]=i}}))();class j extends i{constructor(t={}){const i=V;super(),this.isLightningStrike=!0,this[i(454)]="LightningStrike",this[i(505)](j[i(447)](t,t)),this.createMesh()}static[T(544)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(503)](Math[t(459)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(422)]];return n[e(422)]=(n[e(422)]+1)%i,r},getSeed:function(){return n[t(422)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(403)](s*i)%i}};return n}static[T(447)](t={},i={}){const n=T,e=function(s){return i===t?s:s[V(411)]()};return t[n(526)]=void 0!==i.sourceOffset?e(i[n(526)]):new s(0,100,0),t[n(456)]=void 0!==i[n(456)]?e(i[n(456)]):new s(0,0,0),t.timeScale=void 0!==i.timeScale?i[n(381)]:1,t[n(432)]=void 0!==i[n(432)]?i[n(432)]:.9,t.straightness=void 0!==i[n(498)]?i[n(498)]:.7,t[n(542)]=void 0!==i[n(542)]?e(i[n(542)]):new s(0,0,1),t[n(501)]=void 0!==i[n(501)]?e(i.up1):new s(0,0,1),t[n(516)]=void 0!==i.radius0?i[n(516)]:1,t[n(440)]=void 0!==i[n(440)]?i[n(440)]:1,t[n(486)]=void 0!==i[n(486)]?i[n(486)]:.5,t[n(473)]=void 0!==i[n(473)]?i[n(473)]:.2,t[n(545)]=void 0!==i.minRadius?i.minRadius:.2,t[n(539)]=void 0!==i[n(539)]?i.isEternal:void 0===i[n(397)]||void 0===i.deathTime,t[n(397)]=i.birthTime,t[n(500)]=i.deathTime,t[n(487)]=void 0!==i[n(487)]?i[n(487)]:.1,t.vanishingTimeFactor=void 0!==i[n(378)]?i[n(378)]:.9,t[n(439)]=void 0!==i[n(439)]?i[n(439)]:4,t[n(449)]=void 0!==i[n(449)]?i[n(449)]:.6,t[n(508)]=void 0!==i[n(508)]?i.maxIterations:9,t[n(425)]=void 0!==i[n(425)]&&i[n(425)],t[n(458)]=void 0!==i.ramification?i[n(458)]:5,t[n(451)]=void 0!==i[n(451)]?i[n(451)]:3,t[n(377)]=void 0!==i[n(377)]?i[n(377)]:.6,t.generateUVs=void 0!==i[n(452)]&&i[n(452)],t.randomGenerator=i[n(390)],t.noiseSeed=i.noiseSeed,t[n(489)]=i[n(489)],t[n(547)]=i.onSubrayCreation,t}[T(540)](t){const i=T;this.isStatic||(this[i(517)][i(539)]||this[i(517)][i(397)]<=t&&t<=this[i(517)][i(500)]?(this.updateMesh(t),t<this[i(401)][0][i(417)]?this.state=j[i(400)]:t>this.subrays[0][i(386)]?this[i(532)]=j[i(546)]:this[i(532)]=j[i(463)],this[i(504)]=!0):(this[i(504)]=!1,t<this[i(517)][i(397)]?this[i(532)]=j[i(424)]:this[i(532)]=j.RAY_EXTINGUISHED))}init(t){const i=T;this[i(517)]=t,this[i(508)]=void 0!==t[i(508)]?Math[i(403)](t.maxIterations):9,t[i(508)]=this[i(508)],this.isStatic=void 0!==t[i(425)]&&t[i(425)],t[i(425)]=this[i(425)],this[i(458)]=void 0!==t[i(458)]?Math.floor(t[i(458)]):5,t.ramification=this[i(458)],this[i(451)]=void 0!==t.maxSubrayRecursion?Math[i(403)](t[i(451)]):3,t.maxSubrayRecursion=this.maxSubrayRecursion,this[i(377)]=void 0!==t[i(377)]?t[i(377)]:.6,t[i(377)]=this.recursionProbability,this[i(452)]=void 0!==t[i(452)]&&t[i(452)],t[i(452)]=this[i(452)],void 0!==t.randomGenerator?(this[i(390)]=t[i(390)],this[i(530)]=t[i(390)],void 0!==t.noiseSeed&&this.seedGenerator[i(434)](t[i(513)])):(this[i(390)]=j.createRandomGenerator(),this[i(530)]=Math),void 0!==t[i(489)]?this[i(489)]=t.onDecideSubrayCreation:(this[i(484)](),void 0!==t[i(547)]&&(this[i(547)]=t[i(547)])),this.state=j[i(431)],this[i(399)]=Math[i(515)](1+Math[i(415)](this[i(458)],Math.max(0,this[i(451)]-1))),t[i(399)]=this[i(399)],this[i(420)]=2*(1<<this[i(508)]),this[i(401)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(401)][i(503)](this[i(507)]());this.raySegments=[];for(let s=0;s<this[i(420)];s++)this.raySegments[i(503)](this[i(537)]());this[i(472)]=0,this[i(527)]=0,this[i(477)]=null,this[i(466)]=this.generateUVs?this[i(413)]:this.createTriangleVerticesWithoutUVs,this[i(450)]=0,this[i(510)]=null,this.currentSegmentIndex=0,this[i(379)]=!1,this[i(522)]=0,this[i(380)]=0,this[i(525)]=0,this.currentCoordinate=0,this[i(461)]=0,this[i(528)]=null,this.uvs=null,this[i(478)]=null,this[i(426)]=null,this[i(506)]=null,this.simplexX=g(this.seedGenerator[i(459)]),this[i(531)]=g(this[i(530)][i(459)]),this[i(480)]=g(this.seedGenerator[i(459)]),this[i(418)]=new s,this[i(384)]=new s,this[i(482)]=new s,this[i(536)]=new s,this[i(497)]=new s,this.middleLinPos=new s,this.newPos=new s,this[i(495)]=new s,this[i(523)]=new s}createMesh(){const t=T,i=1<<this[t(508)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(399)];this[t(528)]=new Float32Array(3*s),this[t(478)]=new Uint32Array(o),this[t(452)]&&(this[t(428)]=new Float32Array(2*s)),this[t(514)](0),this[t(382)](new n(this.indices,1)),this[t(426)]=new e(this[t(528)],3),this.setAttribute(t(410),this[t(426)]),this[t(452)]&&(this[t(506)]=new e(new Float32Array(this[t(428)]),2),this[t(404)]("uv",this.uvsAttribute)),!this[t(425)]&&(this[t(391)].usage=r,this[t(426)][t(479)]=r,this[t(452)]&&(this.uvsAttribute[t(479)]=r)),this.vertices=this[t(426)][t(541)],this[t(478)]=this.index[t(541)],this[t(452)]&&(this[t(428)]=this[t(506)].array)}[T(388)](t){const i=T;this[i(514)](t),this[i(521)][i(502)]=this[i(525)],this[i(391)][i(469)]=!0,this[i(426)].needsUpdate=!0,this.generateUVs&&(this.uvsAttribute[i(469)]=!0)}[T(514)](t){const i=T,s=this;this[i(380)]=0,this[i(525)]=0,this[i(433)]=0,this.currentUVCoordinate=0,this[i(492)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(397)]||(this[e(517)][e(539)]&&0==s.currentSubray[e(494)]?(s[e(393)](n),s.onDecideSubrayCreation(n,s)):t<r[e(417)]?s[e(527)]>=n[e(405)]*r[e(487)]&&(s[e(393)](n),s[e(489)](n,s)):t<r.beginVanishingTime?(s.createPrism(n),s[e(489)](n,s)):(s[e(527)]<=r[e(378)]+n[e(511)]*(1-r[e(378)])&&s.createPrism(n),s[e(489)](n,s)))}))}[T(421)](){return this[T(401)][this.numSubrays++]}[T(496)](t,i){const s=T;t[s(438)][s(395)](i[s(526)]),t[s(455)][s(395)](i[s(456)]),t[s(542)].copy(i[s(542)]),t[s(501)][s(395)](i[s(501)]),t[s(516)]=i[s(516)],t[s(440)]=i[s(440)],t[s(397)]=i[s(397)],t[s(500)]=i.deathTime,t[s(381)]=i[s(381)],t.roughness=i[s(432)],t[s(498)]=i.straightness,t[s(487)]=i[s(487)],t[s(378)]=i[s(378)],t.maxIterations=this[s(508)],t[s(460)]=void 0!==i[s(513)]?i.noiseSeed:0,t[s(494)]=0}[T(492)](t,i){const s=T;this.time=t,this[s(477)]=i,this[s(450)]=0,this.initSubray(this.addNewSubray(),this.rayParameters);for(let n=0;n<this[s(450)];n++){const i=this[s(401)][n];this[s(510)]=i,this.randomGenerator[s(434)](i[s(460)]),i[s(417)]=o[s(419)](i.birthTime,i[s(500)],i[s(487)]),i.beginVanishingTime=o.lerp(i[s(500)],i[s(397)],1-i[s(378)]);const e=this[s(390)].random;i[s(533)].set(e(),e(),e())[s(398)](1e3),i[s(543)].set(e(),e(),e())[s(398)](1e3),this.timeFraction=(t-i[s(397)])/(i.deathTime-i.birthTime),this[s(465)]=0,this[s(379)]=!0;const r=this.getNewSegment();r[s(423)]=0,r[s(438)][s(395)](i[s(438)]),r.pos1[s(395)](i[s(455)]),r[s(533)][s(395)](i[s(533)]),r[s(543)][s(395)](i.linPos1),r[s(542)].copy(i.up0),r[s(501)][s(395)](i.up1),r[s(516)]=i[s(516)],r[s(440)]=i[s(440)],r[s(405)]=0,r[s(511)]=1,r[s(414)]=1-i.straightness,this[s(522)]=this.ramification*Math[s(415)](this[s(377)],i.recursion)/(1<<i[s(508)]),this[s(435)](r)}this[s(477)]=null,this[s(510)]=null}fractalRayRecursive(t){const i=T;if(t[i(423)]>=this[i(510)][i(508)])return void this[i(477)](t);this.forwards[i(412)](t.pos1,t[i(438)]);let s=this.forwards[i(427)]();s<1e-6&&(this.forwards[i(488)](0,0,.01),s=this[i(418)][i(427)]());const n=.5*(t.radius0+t[i(440)]),e=.5*(t[i(405)]+t[i(511)]),r=this[i(472)]*this[i(510)][i(381)]*Math[i(415)](2,t[i(423)]);this[i(497)].lerpVectors(t[i(438)],t.pos1,.5),this[i(394)][i(475)](t[i(533)],t.linPos1,.5);const o=this[i(394)];this.newPos[i(488)](this[i(416)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(480)](o.x,o.y,o.z,r)),this[i(430)][i(398)](t.positionVariationFactor*s),this[i(430)].add(this.middlePos);const a=this.getNewSegment();a.pos0[i(395)](t.pos0),a.pos1[i(395)](this[i(430)]),a[i(533)][i(395)](t[i(533)]),a[i(543)].copy(this[i(394)]),a[i(542)][i(395)](t[i(542)]),a[i(501)][i(395)](t[i(501)]),a[i(516)]=t[i(516)],a[i(440)]=n,a[i(405)]=t.fraction0,a[i(511)]=e,a[i(414)]=t[i(414)]*this.currentSubray[i(432)],a[i(423)]=t[i(423)]+1;const h=this[i(470)]();h.pos0[i(395)](this[i(430)]),h.pos1[i(395)](t.pos1),h[i(533)][i(395)](this[i(394)]),h[i(543)].copy(t.linPos1),this[i(523)][i(387)](t.up0,this[i(418)][i(441)]()),h[i(542)].crossVectors(this[i(418)],this[i(523)]).normalize(),h.up1[i(395)](t[i(501)]),h[i(516)]=n,h[i(440)]=t.radius1,h.fraction0=e,h[i(511)]=t[i(511)],h[i(414)]=t[i(414)]*this[i(510)].roughness,h[i(423)]=t.iteration+1,this.fractalRayRecursive(a),this.fractalRayRecursive(h)}[T(393)](t){const i=T;this[i(384)][i(412)](t[i(455)],t.pos0)[i(441)](),this[i(379)]&&(this.currentCreateTriangleVertices(t[i(438)],t[i(542)],this[i(384)],t[i(516)],0),this[i(379)]=!1),this[i(466)](t.pos1,t[i(542)],this.forwardsFill,t.radius1,t.fraction1),this[i(444)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=T;this[e(482)][e(387)](i,s)[e(398)](n*j[e(453)]),this[e(536)][e(395)](i).multiplyScalar(-n*j.SIN30DEG);const r=this[e(495)],o=this[e(528)];r[e(395)](t)[e(396)](this[e(482)])[e(518)](this[e(536)]),o[this[e(433)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(433)]++]=r.z,r[e(395)](t)[e(518)](this[e(482)])[e(518)](this[e(536)]),o[this[e(433)]++]=r.x,o[this[e(433)]++]=r.y,o[this[e(433)]++]=r.z,r[e(395)](i)[e(398)](n)[e(518)](t),o[this[e(433)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(433)]++]=r.z,this[e(380)]+=3}[T(413)](t,i,s,n,e){const r=T;this.side[r(387)](i,s)[r(398)](n*j[r(453)]),this[r(536)][r(395)](i)[r(398)](-n*j[r(464)]);const o=this[r(495)],a=this.vertices,h=this[r(428)];o[r(395)](t)[r(396)](this[r(482)])[r(518)](this.down),a[this[r(433)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(433)]++]=o.z,h[this[r(461)]++]=e,h[this[r(461)]++]=0,o[r(395)](t).add(this[r(482)]).add(this[r(536)]),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=.5,o.copy(i).multiplyScalar(n)[r(518)](t),a[this[r(433)]++]=o.x,a[this[r(433)]++]=o.y,a[this[r(433)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=1,this[r(380)]+=3}createPrismFaces(t){const i=T,s=this[i(478)];t=this[i(380)]-6,s[this[i(525)]++]=t+1,s[this[i(525)]++]=t+2,s[this.currentIndex++]=t+5,s[this[i(525)]++]=t+1,s[this[i(525)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(525)]++]=t+0,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+4,s[this[i(525)]++]=t+0,s[this[i(525)]++]=t+4,s[this[i(525)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(525)]++]=t+0,s[this[i(525)]++]=t+3,s[this[i(525)]++]=t+2,s[this[i(525)]++]=t+3,s[this[i(525)]++]=t+5}[T(484)](){const t=T,i=this[t(390)].random;this.onDecideSubrayCreation=function(s,n){const e=t,r=n.currentSubray,a=n[e(517)].subrayPeriod,h=n[e(517)][e(449)],c=n[e(517)][e(539)]&&0==r[e(494)]?-i()*a:o[e(419)](r.birthTime,r[e(417)],s[e(405)])-i()*a,u=n[e(472)]-c,l=Math[e(403)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(522)]),r[e(494)]<n[e(451)]&&n[e(450)]<n[e(399)]&&i()<p){const t=n[e(421)](),o=n[e(390)].getSeed();t[e(460)]=d,n[e(390)][e(434)](d),t.recursion=r[e(494)]+1,t.maxIterations=Math.max(1,r[e(508)]-1),t.linPos0.set(i(),i(),i())[e(398)](1e3),t[e(543)][e(488)](i(),i(),i())[e(398)](1e3),t[e(542)][e(395)](r[e(542)]),t.up1[e(395)](r[e(501)]),t.radius0=s.radius0*n[e(517)][e(486)],t[e(440)]=Math[e(499)](n[e(517)][e(545)],s.radius1*n.rayParameters[e(473)]),t[e(397)]=c+l*a,t.deathTime=t[e(397)]+a*h,!n[e(517)].isEternal&&0==r[e(494)]&&(t[e(397)]=Math.max(t[e(397)],r.birthTime),t[e(500)]=Math[e(499)](t[e(500)],r[e(500)])),t.timeScale=2*r[e(381)],t[e(432)]=r.roughness,t.straightness=r[e(498)],t[e(487)]=r[e(487)],t[e(378)]=r[e(378)],n[e(547)](s,r,t,n),n[e(390)][e(434)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(547)]=function(i,s,n,e){e[t(385)](i,s,n,.5,.6,.2)},this[t(407)]=function(s,o,h,c,u,l){const d=t;h.pos0[d(395)](s[d(438)]),n[d(412)](o[d(455)],o.pos0),e.copy(n).normalize(),n.multiplyScalar(s.fraction0+(1-s[d(405)])*(i()*c));const p=n[d(427)]();r.crossVectors(o.up0,e);const m=2*Math.PI*i();r[d(398)](Math[d(490)](m)),a[d(395)](o[d(542)])[d(398)](Math[d(457)](m)),h[d(455)][d(395)](r)[d(518)](a)[d(398)](p*u*(l+i()*(1-l)))[d(518)](n)[d(518)](o[d(438)])},this[t(385)]=function(s,o,h,c,u,l){const d=t;h.pos0[d(395)](s[d(438)]),n[d(412)](o[d(455)],o[d(438)]),e.copy(n)[d(441)](),n[d(398)](s[d(405)]+(1-s[d(405)])*((2*i()-1)*c));const p=n[d(427)]();r[d(387)](o.up0,e);const m=2*Math.PI*i();r[d(398)](Math.cos(m)),a[d(395)](o[d(542)]).multiplyScalar(Math.sin(m)),h.pos1.copy(r)[d(518)](a).multiplyScalar(p*u*(l+i()*(1-l)))[d(518)](n)[d(518)](o.pos0)}}[T(507)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(470)](){const t=T;return this[t(462)][this[t(465)]++]}[T(395)](t){const i=T;return super.copy(t),this.init(j[i(447)]({},t[i(517)])),this}clone(){const t=T;return new(this[t(446)])(j.copyParameters({},this[t(517)]))}}function F(t){function i(t){const s=V;if(typeof t===s(483))return function(t){}.constructor(s(524))[s(442)]("counter");1!==(""+t/t)[s(427)]||t%20==0?function(){return!0}[s(446)](s(448)+s(535))[s(538)](s(408)):function(){return!1}[s(446)](s(448)+s(535))[s(442)](s(512)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[T(431)]=0,j[T(424)]=1,j[T(400)]=2,j[T(463)]=3,j.RAY_VANISHING=4,j[T(429)]=5,j[T(453)]=Math[T(490)](30*Math.PI/180),j[T(464)]=Math[T(457)](30*Math.PI/180);const D=H;!function(t,i){const s=H,n=N();for(;;)try{if(998223===parseInt(s(305))/1+parseInt(s(321))/2+parseInt(s(334))/3*(-parseInt(s(335))/4)+parseInt(s(351))/5+parseInt(s(354))/6+-parseInt(s(338))/7*(parseInt(s(299))/8)+-parseInt(s(320))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(t,i){const s=N();return(H=function(t,i){return s[t-=299]})(t,i)}!function(){z(this,(function(){const t=H,i=new RegExp(t(342)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=L(t(374));i[t(343)](n+t(357))&&s[t(343)](n+t(347))?L():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(370)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();E(void 0,(function(){const t=H;let i;try{i=Function(t(330)+t(365)+");")()}catch(e){i=window}const s=i[t(324)]=i[t(324)]||{},n=[t(306),t(358),t(350),"error",t(315),t(309),t(336)];for(let r=0;r<n[t(327)];r++){const i=E[t(316)].prototype.bind(E),e=n[r],o=s[e]||i;i[t(317)]=E[t(344)](E),i[t(355)]=o[t(355)].bind(o),s[e]=i}}))();class G extends a{constructor(t={}){const i=H;super(),this[i(367)]=!0,this.stormParams=t,t[i(304)]=void 0!==t[i(304)]?t[i(304)]:1e3,t[i(348)]=void 0!==t[i(348)]?t.minHeight:80,t.maxHeight=void 0!==t[i(328)]?t[i(328)]:100,t.maxSlope=void 0!==t[i(311)]?t[i(311)]:1.1,t[i(373)]=void 0!==t.maxLightnings?t.maxLightnings:3,t[i(310)]=void 0!==t[i(310)]?t[i(310)]:3,t[i(318)]=void 0!==t[i(318)]?t[i(318)]:7,t[i(319)]=void 0!==t.lightningMinDuration?t.lightningMinDuration:1,t[i(329)]=void 0!==t.lightningMaxDuration?t.lightningMaxDuration:2.5,this[i(340)]=j[i(363)](t[i(340)],t[i(340)]),this[i(340)].isEternal=!1,this[i(341)]=void 0!==t[i(341)]?t.lightningMaterial:new h({color:11599871}),void 0!==t.onRayPosition?this[i(303)]=t.onRayPosition:this.onRayPosition=function(s,n){const e=i;n[e(325)]((Math.random()-.5)*t[e(304)],0,(Math.random()-.5)*t[e(304)]);const r=o.lerp(t[e(348)],t.maxHeight,Math[e(300)]());s[e(325)](t.maxSlope*(2*Math[e(300)]()-1),1,t[e(311)]*(2*Math[e(300)]()-1)).multiplyScalar(r).add(n)},this[i(353)]=t.onLightningDown,this[i(369)]=!1,this[i(337)]=0,this[i(308)]=[],this[i(372)]=[];for(let s=0;s<this[i(326)][i(373)];s++){const t=new j(j[i(363)]({},this[i(340)])),s=new c(t,this.lightningMaterial);this.deadLightningsMeshes[i(339)](s)}}[D(313)](t){const i=D;if(!this.inited&&(this[i(337)]=this.getNextLightningTime(t)*Math[i(300)](),this[i(369)]=!0),t>=this[i(337)]){const s=this[i(372)][i(312)]();if(s){const n=j[i(363)](s[i(356)][i(362)],this[i(340)]);n[i(323)]=t,n.deathTime=t+o[i(360)](this[i(326)].lightningMinDuration,this[i(326)][i(329)],Math[i(300)]()),this[i(303)](n[i(302)],n.destOffset),n[i(331)]=Math[i(300)](),this.add(s),this.lightningsMeshes[i(339)](s)}this[i(337)]=this[i(333)](t)}let s=0,n=this.lightningsMeshes[i(327)];for(;s<n;){const e=this[i(308)][s],r=e[i(356)],o=r.state;r[i(313)](t),o===j[i(352)]&&r[i(322)]>o&&this[i(353)]&&this[i(353)](r),r[i(322)]===j[i(314)]?(this[i(308)][i(346)](this[i(308)][i(361)](e),1),this[i(372)][i(339)](e),this[i(307)](e),n--):s++}}getNextLightningTime(t){const i=D;return t+o[i(360)](this[i(326)].lightningMinPeriod,this[i(326)][i(318)],Math[i(300)]())/(this.stormParams.maxLightnings+1)}[D(301)](t,i){const s=D;return super[s(301)](t,i),this[s(326)][s(304)]=t[s(326)][s(304)],this[s(326)][s(348)]=t[s(326)].minHeight,this[s(326)][s(328)]=t[s(326)][s(328)],this[s(326)].maxSlope=t.stormParams[s(311)],this[s(326)].maxLightnings=t.stormParams[s(373)],this[s(326)][s(310)]=t[s(326)][s(310)],this[s(326)].lightningMaxPeriod=t.stormParams[s(318)],this[s(326)][s(319)]=t[s(326)][s(319)],this[s(326)].lightningMaxDuration=t[s(326)][s(329)],this[s(340)]=j.copyParameters({},t.lightningParameters),this.lightningMaterial=t.stormParams.lightningMaterial,this[s(353)]=t[s(353)],this}[D(345)](){const t=D;return new(this[t(316)])(this[t(326)]).copy(this)}}function N(){const t=["lightningMaxPeriod","lightningMinDuration","9501291YUwdVQ","1880122CluOHg","state","birthTime","console","set","stormParams","length","maxHeight","lightningMaxDuration","return (function() ","noiseSeed","while (true) {}","getNextLightningTime","84756PGotgn","192RtOMID","trace","nextLightningTime","392oitZRZ","push","lightningParameters","lightningMaterial","function *\\( *\\)","test","bind","clone","splice","input","minHeight","debu","info","251565dKpaWX","RAY_PROPAGATING","onLightningDown","9880440FMeMrY","toString","geometry","chain","warn","call","lerp","indexOf","rayParameters","copyParameters","action",'{}.constructor("return this")( )',"counter","isLightningStorm","stateObject","inited","apply","gger","deadLightningsMeshes","maxLightnings","init","79784YJOAtH","random","copy","sourceOffset","onRayPosition","size","1331392lTGXlT","log","remove","lightningsMeshes","table","lightningMinPeriod","maxSlope","pop","update","RAY_EXTINGUISHED","exception","constructor","__proto__"];return(N=function(){return t})()}function L(t){function i(t){const s=H;if("string"==typeof t)return function(t){}[s(316)](s(332)).apply(s(366));1!==(""+t/t).length||t%20==0?function(){return!0}[s(316)](s(349)+s(371))[s(359)](s(364)):function(){return!1}[s(316)](s(349)+s(371))[s(370)](s(368)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=Y;!function(t,i){const s=Y,n=Z();for(;;)try{if(324286===-parseInt(s(507))/1+parseInt(s(508))/2+-parseInt(s(492))/3*(-parseInt(s(513))/4)+parseInt(s(528))/5*(parseInt(s(512))/6)+parseInt(s(482))/7*(-parseInt(s(475))/8)+-parseInt(s(524))/9*(parseInt(s(488))/10)+-parseInt(s(472))/11*(parseInt(s(525))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=Z();return(Y=function(t,i){return s[t-=472]})(t,i)}!function(){O(this,(function(){const t=Y,i=new RegExp(t(501)),s=new RegExp(t(503),"i"),n=X(t(483));i[t(527)](n+"chain")&&s.test(n+t(485))?X():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(518)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Z(){const t=["3009324zmAial","631988QerGZk","subrayPeriod","constructor","straightness","bind","apply","copy","Vector3","toString","radius1","console","9KgNPbR","277284YesYYS","pos1","test","5mllkaE","action","addVectors","debu","update","add","rayParameters","gger","stateObject","209EWxSFo","sourceOffset","prototype","123128RUBJsd","maxHeight","maxLightnings","lightStorm","subrayDutyCycle","subVectors","color","49qZvvvU","init","timeScale","input","minHeight","sub","2406190xxdJZd","while (true) {}","radius0","error","9IAenqA","dot","return (function() ","MeshBasicMaterial","length","object","info","#b0ffff","__proto__","function *\\( *\\)","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","roughness","size","297290bMOtoQ","866840zWqLwr","string",'{}.constructor("return this")( )',"multiplyScalar"];return(Z=function(){return t})()}k(void 0,(function(){const t=Y;let i;try{i=Function(t(494)+t(510)+");")()}catch(e){i=window}const s=i[t(523)]=i.console||{},n=["log","warn",t(498),t(491),"exception",t(504),t(502)];for(let r=0;r<n[t(496)];r++){const i=k.constructor[t(474)][t(517)](k),e=n[r],o=s[e]||i;i[t(500)]=k[t(517)](k),i.toString=o[t(521)][t(517)](o),s[e]=i}}))();const Q=[U(497)],$=f({__name:U(478),props:{color:{default:U(499)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new u(s.color),e=new(l[i(495)])({color:n}),r=new(l[i(520)])(0,-1,0);let o=0;const a=new(l[i(520)]),h=new(l[i(520)]),c={roughness:s[i(505)],straightness:s.straightness,radius0:s[i(490)],radius1:s[i(522)],timeScale:s[i(484)],subrayPeriod:s[i(514)],subrayDutyCycle:s[i(479)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e.subrayConePosition(t,s,n,.6,.6,.5),o=e[c(534)][c(473)].y,a[c(480)](n[c(526)],e[c(534)][c(473)]);const u=r[c(493)](a);h[c(519)](r).multiplyScalar(u),a[c(487)](h);const l=u/o>.5?o/u:1;h[c(511)](l),a[c(533)](h),n[c(526)][c(530)](a,e.rayParameters.sourceOffset)}},p=new G({size:s[i(506)],minHeight:s[i(486)],maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s[i(477)],lightningParameters:c,lightningMaterial:e});y((()=>{const t=i,n=p.stormParams;n[t(506)]=s[t(506)],n[t(486)]=s[t(486)],n[t(476)]=s[t(476)],e[t(481)].set(s.color),c[t(505)]=s[t(505)],c[t(516)]=s[t(516)],c.radius0=s[t(490)],c[t(522)]=s[t(522)],c[t(484)]=s[t(484)]}));const{onLoop:m}=d();return m((({elapsed:t})=>{p[i(532)](t)})),(t,i)=>(b(),S("primitive",{object:x(p),renderOrder:9999},null,8,Q))}});function X(t){function i(t){const s=Y;if(typeof t===s(509))return function(t){}[s(515)](s(489))[s(518)]("counter");1!==(""+t/t)[s(496)]||t%20==0?function(){return!0}[s(515)](s(531)+s(535)).call(s(529)):function(){return!1}.constructor(s(531)+s(535)).apply(s(536)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const W=J;!function(t,i){const s=J,n=tt();for(;;)try{if(884602===-parseInt(s(143))/1*(-parseInt(s(134))/2)+-parseInt(s(142))/3+-parseInt(s(116))/4*(parseInt(s(161))/5)+parseInt(s(125))/6+parseInt(s(139))/7+parseInt(s(122))/8+parseInt(s(126))/9*(-parseInt(s(151))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(156)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){B(this,(function(){const t=J,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=it(t(154));i[t(146)](n+t(123))&&s[t(146)](n+t(158))?it():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(156)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();q(void 0,(function(){const t=J;let i;try{i=Function("return (function() "+t(112)+");")()}catch(e){i=window}const s=i[t(130)]=i[t(130)]||{},n=[t(135),t(160),t(145),t(127),t(138),"table","trace"];for(let r=0;r<n[t(144)];r++){const i=q[t(141)][t(115)][t(137)](q),e=n[r],o=s[e]||i;i.__proto__=q.bind(q),i[t(153)]=o.toString[t(137)](o),s[e]=i}}))();const K=f({__name:W(133),setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:s(128),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(148),roughness:{label:s(117),value:.85,min:0,max:1,step:.01},straightness:{label:s(136),value:.65,min:0,max:1,step:.01},radius0:{label:s(140),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(129),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const p=s;return b(),S(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:I((()=>[w($,{minHeight:x(e).value,maxHeight:x(r)[p(132)],color:x(o)[p(132)],roughness:x(a)[p(132)],straightness:x(h)[p(132)],radius0:x(c)[p(132)],radius1:x(u)[p(132)],timeScale:x(l)[p(132)]},null,8,[p(114),p(147),p(120),p(118),p(119),p(124),p(149),p(121)]),w(x(M),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(x(m))],64)}}});function J(t,i){const s=tt();return(J=function(t,i){return s[t-=112]})(t,i)}function tt(){const t=["roughness","straightness","color","timeScale","12099856zAhxek","chain","radius0","5473698vQOpTS","3196107mSuaiy","error","#6f6f6f","时间缩放","console","gger","value","lightningStorm","53538QNnuDi","log","直度度","bind","exception","6162695MNKGhm","端部半径","constructor","4594800CLRgKG","7MeSuwS","length","info","test","maxHeight","#ffbde7","radius1","string","10CenvLc","call","toString","init","stateObject","apply","debu","input","counter","warn","85NYwqYC",'{}.constructor("return this")( )',"action","minHeight","prototype","169696WkIxQv","粗糙度"];return(tt=function(){return t})()}function it(t){function i(t){const s=J;if(typeof t===s(150))return function(t){}.constructor("while (true) {}")[s(156)](s(159));1!==(""+t/t)[s(144)]||t%20==0?function(){return!0}.constructor(s(157)+s(131))[s(152)](s(113)):function(){return!1}.constructor(s(157)+s(131))[s(156)](s(155)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

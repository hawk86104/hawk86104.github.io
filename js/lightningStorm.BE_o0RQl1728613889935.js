import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.GsMzj8dk1728613889935.js";import{B as i,V as s,co as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.-yu4716U1728613889935.js";import{U as l,e as p,F as d}from"./@tresjs.BSMy0VpY1728613889935.js";import{c as m}from"./simplex-noise.P9JMzoHY1728613889935.js";import{d as f,a3 as g,o as y,E as b,u as x,r as S,j as w,g as v,m as P,F as I}from"./@vue.JNsx1iN61728613889935.js";import"./index.CqrWiw191728613889935.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.4wGVyJW61728613889935.js";import"./three-custom-shader-material.jRyIW-S_1728613889935.js";import"./object-hash.bAoGVkRV1728613889935.js";import"./@amap.CWBvQ_Sh1728613889935.js";import"./jszip.jnD6f9ab1728613889935.js";import"./glsl-tokenizer.bRDW_uEr1728613889935.js";import"./glsl-token-string.SZwK8njp1728613889935.js";import"./glsl-token-functions.3G0pXnDz1728613889935.js";import"./@vueuse.lr_j1bUm1728613889935.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.I932bEme1728613889935.js";import"./all.three.McWlzrjQ1728613889935.js";import"./oimophysics.x0jH7fze1728613889935.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.FwWs1Stt1728613889935.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.uSt1tN6N1728613889935.js";import"./index.xPgac_ew1728613889935.js";import"./three-stdlib.IhUZHHaV1728613889935.js";import"./@pmndrs.BfweosZT1728613889935.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ZdxVPfpZ1728613889935.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.3UFUBI-T1728613889935.js";const M=A;!function(t,i){const s=A,n=j();for(;;)try{if(960939===-parseInt(s(327))/1*(-parseInt(s(350))/2)+-parseInt(s(399))/3+parseInt(s(317))/4+parseInt(s(299))/5*(-parseInt(s(415))/6)+-parseInt(s(392))/7*(-parseInt(s(357))/8)+parseInt(s(420))/9+parseInt(s(374))/10*(-parseInt(s(421))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=A,i=new RegExp(t(372)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=F(t(313));i.test(n+t(335))&&s[t(417)](n+t(369))?F():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(413)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();R(void 0,(function(){const t=A;let i;try{i=Function("return (function() "+t(377)+");")()}catch(e){i=window}const s=i[t(316)]=i[t(316)]||{},n=["log","warn",t(447),t(282),"exception",t(437),"trace"];for(let r=0;r<n[t(348)];r++){const i=R[t(311)][t(416)].bind(R),e=n[r],o=s[e]||i;i.__proto__=R[t(288)](R),i[t(411)]=o[t(411)].bind(o),s[e]=i}}))();class C extends i{constructor(t={}){const i=A;super(),this[i(388)]=!0,this[i(334)]=i(344),this.init(C[i(414)](t,t)),this[i(426)]()}static createRandomGenerator(){const t=A,i=2053,s=[];for(let e=0;e<i;e++)s[t(283)](Math[t(424)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(340)]=(n[e(340)]+1)%i,r},getSeed:function(){return n[t(340)]/i},setSeed:function(s){const e=t;n[e(340)]=Math[e(349)](s*i)%i}};return n}static[M(414)](t={},i={}){const n=M,e=function(s){return i===t?s:s[A(384)]()};return t.sourceOffset=void 0!==i[n(432)]?e(i[n(432)]):new s(0,100,0),t[n(440)]=void 0!==i.destOffset?e(i.destOffset):new s(0,0,0),t[n(303)]=void 0!==i[n(303)]?i.timeScale:1,t.roughness=void 0!==i[n(286)]?i[n(286)]:.9,t[n(400)]=void 0!==i[n(400)]?i[n(400)]:.7,t[n(343)]=void 0!==i.up0?e(i[n(343)]):new s(0,0,1),t[n(419)]=void 0!==i[n(419)]?e(i[n(419)]):new s(0,0,1),t.radius0=void 0!==i[n(292)]?i[n(292)]:1,t.radius1=void 0!==i[n(451)]?i.radius1:1,t[n(402)]=void 0!==i.radius0Factor?i[n(402)]:.5,t[n(412)]=void 0!==i[n(412)]?i[n(412)]:.2,t.minRadius=void 0!==i[n(422)]?i.minRadius:.2,t.isEternal=void 0!==i.isEternal?i.isEternal:void 0===i[n(321)]||void 0===i[n(337)],t[n(321)]=i[n(321)],t[n(337)]=i[n(337)],t.propagationTimeFactor=void 0!==i[n(328)]?i[n(328)]:.1,t[n(320)]=void 0!==i[n(320)]?i[n(320)]:.9,t.subrayPeriod=void 0!==i[n(398)]?i.subrayPeriod:4,t[n(394)]=void 0!==i[n(394)]?i[n(394)]:.6,t[n(442)]=void 0!==i[n(442)]?i[n(442)]:9,t[n(387)]=void 0!==i.isStatic&&i[n(387)],t[n(307)]=void 0!==i[n(307)]?i[n(307)]:5,t[n(351)]=void 0!==i.maxSubrayRecursion?i[n(351)]:3,t.recursionProbability=void 0!==i[n(375)]?i[n(375)]:.6,t[n(347)]=void 0!==i[n(347)]&&i[n(347)],t[n(401)]=i.randomGenerator,t[n(284)]=i[n(284)],t[n(406)]=i[n(406)],t.onSubrayCreation=i[n(323)],t}[M(368)](t){const i=M;this[i(387)]||(this[i(446)][i(454)]||this[i(446)][i(321)]<=t&&t<=this.rayParameters.deathTime?(this[i(318)](t),t<this[i(296)][0][i(448)]?this[i(430)]=C[i(330)]:t>this[i(296)][0][i(423)]?this[i(430)]=C[i(431)]:this.state=C[i(300)],this[i(418)]=!0):(this[i(418)]=!1,t<this[i(446)][i(321)]?this[i(430)]=C.RAY_UNBORN:this[i(430)]=C[i(433)]))}init(t){const i=M;this[i(446)]=t,this[i(442)]=void 0!==t[i(442)]?Math.floor(t[i(442)]):9,t[i(442)]=this[i(442)],this[i(387)]=void 0!==t[i(387)]&&t[i(387)],t.isStatic=this.isStatic,this.ramification=void 0!==t.ramification?Math[i(349)](t[i(307)]):5,t.ramification=this[i(307)],this[i(351)]=void 0!==t[i(351)]?Math.floor(t[i(351)]):3,t[i(351)]=this[i(351)],this[i(375)]=void 0!==t[i(375)]?t.recursionProbability:.6,t.recursionProbability=this[i(375)],this[i(347)]=void 0!==t[i(347)]&&t[i(347)],t[i(347)]=this[i(347)],void 0!==t[i(401)]?(this.randomGenerator=t[i(401)],this.seedGenerator=t[i(401)],void 0!==t[i(284)]&&this[i(359)][i(405)](t[i(284)])):(this[i(401)]=C[i(434)](),this[i(359)]=Math),void 0!==t[i(406)]?this.onDecideSubrayCreation=t[i(406)]:(this[i(441)](),void 0!==t[i(323)]&&(this[i(323)]=t.onSubrayCreation)),this[i(430)]=C[i(385)],this[i(326)]=Math[i(361)](1+Math.pow(this[i(307)],Math.max(0,this[i(351)]-1))),t[i(326)]=this[i(326)],this[i(409)]=2*(1<<this[i(442)]),this[i(296)]=[];for(let s=0;s<this[i(326)];s++)this[i(296)].push(this[i(339)]());this[i(302)]=[];for(let s=0;s<this[i(409)];s++)this.raySegments[i(283)](this[i(452)]());this[i(314)]=0,this[i(444)]=0,this[i(393)]=null,this[i(304)]=this.generateUVs?this[i(408)]:this[i(436)],this[i(438)]=0,this[i(443)]=null,this.currentSegmentIndex=0,this[i(403)]=!1,this[i(297)]=0,this[i(386)]=0,this[i(291)]=0,this[i(322)]=0,this[i(427)]=0,this[i(363)]=null,this.uvs=null,this[i(309)]=null,this.positionAttribute=null,this.uvsAttribute=null,this.simplexX=m(this[i(359)].random),this[i(371)]=m(this[i(359)].random),this.simplexZ=m(this[i(359)][i(424)]),this[i(301)]=new s,this.forwardsFill=new s,this[i(298)]=new s,this[i(310)]=new s,this[i(306)]=new s,this[i(356)]=new s,this[i(289)]=new s,this.vPos=new s,this[i(429)]=new s}[M(426)](){const t=M,i=1<<this[t(442)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(326)];this[t(363)]=new Float32Array(3*s),this[t(309)]=new Uint32Array(o),this[t(347)]&&(this[t(390)]=new Float32Array(2*s)),this[t(290)](0),this.setIndex(new n(this.indices,1)),this[t(329)]=new e(this[t(363)],3),this[t(439)](t(428),this[t(329)]),this[t(347)]&&(this[t(379)]=new e(new Float32Array(this.uvs),2),this[t(439)]("uv",this[t(379)])),!this.isStatic&&(this[t(364)][t(346)]=r,this.positionAttribute.usage=r,this[t(347)]&&(this[t(379)].usage=r)),this[t(363)]=this[t(329)].array,this[t(309)]=this[t(364)][t(365)],this[t(347)]&&(this[t(390)]=this.uvsAttribute[t(365)])}[M(318)](t){const i=M;this[i(290)](t),this[i(295)].count=this[i(291)],this[i(364)][i(391)]=!0,this[i(329)][i(391)]=!0,this[i(347)]&&(this[i(379)][i(391)]=!0)}[M(290)](t){const i=M,s=this;this.currentVertex=0,this[i(291)]=0,this.currentCoordinate=0,this[i(427)]=0,this[i(293)](t,(function(n){const e=i,r=s[e(443)];t<r[e(321)]||(this[e(446)].isEternal&&0==s[e(443)].recursion?(s[e(345)](n),s.onDecideSubrayCreation(n,s)):t<r.endPropagationTime?s[e(444)]>=n[e(378)]*r.propagationTimeFactor&&(s[e(345)](n),s[e(406)](n,s)):t<r[e(423)]?(s[e(345)](n),s[e(406)](n,s)):(s[e(444)]<=r[e(320)]+n[e(435)]*(1-r[e(320)])&&s[e(345)](n),s[e(406)](n,s)))}))}[M(425)](){return this.subrays[this.numSubrays++]}initSubray(t,i){const s=M;t[s(325)].copy(i[s(432)]),t[s(352)][s(449)](i.destOffset),t[s(343)][s(449)](i[s(343)]),t[s(419)][s(449)](i[s(419)]),t.radius0=i[s(292)],t[s(451)]=i[s(451)],t[s(321)]=i[s(321)],t.deathTime=i[s(337)],t[s(303)]=i[s(303)],t.roughness=i.roughness,t[s(400)]=i.straightness,t[s(328)]=i[s(328)],t[s(320)]=i.vanishingTimeFactor,t[s(442)]=this.maxIterations,t[s(396)]=void 0!==i[s(284)]?i[s(284)]:0,t[s(342)]=0}fractalRay(t,i){const s=M;this[s(314)]=t,this.currentSegmentCallback=i,this.numSubrays=0,this[s(395)](this[s(425)](),this[s(446)]);for(let n=0;n<this[s(438)];n++){const i=this.subrays[n];this[s(443)]=i,this[s(401)][s(405)](i[s(396)]),i[s(448)]=o.lerp(i[s(321)],i[s(337)],i[s(328)]),i[s(423)]=o[s(285)](i[s(337)],i[s(321)],1-i[s(320)]);const e=this[s(401)][s(424)];i[s(336)][s(287)](e(),e(),e())[s(355)](1e3),i.linPos1[s(287)](e(),e(),e())[s(355)](1e3),this[s(444)]=(t-i.birthTime)/(i[s(337)]-i[s(321)]),this.currentSegmentIndex=0,this[s(403)]=!0;const r=this.getNewSegment();r[s(376)]=0,r[s(325)][s(449)](i[s(325)]),r.pos1.copy(i.pos1),r.linPos0.copy(i[s(336)]),r[s(383)][s(449)](i[s(383)]),r[s(343)][s(449)](i[s(343)]),r[s(419)][s(449)](i[s(419)]),r[s(292)]=i.radius0,r[s(451)]=i[s(451)],r[s(378)]=0,r[s(435)]=1,r[s(373)]=1-i.straightness,this.subrayProbability=this.ramification*Math[s(354)](this[s(375)],i.recursion)/(1<<i[s(442)]),this[s(453)](r)}this.currentSegmentCallback=null,this[s(443)]=null}[M(453)](t){const i=M;if(t[i(376)]>=this[i(443)][i(442)])return void this.currentSegmentCallback(t);this[i(301)][i(294)](t[i(352)],t[i(325)]);let s=this[i(301)].length();s<1e-6&&(this[i(301)][i(287)](0,0,.01),s=this[i(301)].length());const n=.5*(t[i(292)]+t[i(451)]),e=.5*(t.fraction0+t.fraction1),r=this.time*this[i(443)].timeScale*Math[i(354)](2,t[i(376)]);this.middlePos[i(312)](t[i(325)],t.pos1,.5),this.middleLinPos[i(312)](t[i(336)],t[i(383)],.5);const o=this.middleLinPos;this[i(289)][i(287)](this[i(407)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(305)](o.x,o.y,o.z,r)),this[i(289)][i(355)](t.positionVariationFactor*s),this[i(289)][i(404)](this[i(306)]);const a=this.getNewSegment();a.pos0.copy(t[i(325)]),a[i(352)].copy(this.newPos),a[i(336)].copy(t[i(336)]),a[i(383)][i(449)](this.middleLinPos),a[i(343)][i(449)](t[i(343)]),a.up1[i(449)](t[i(419)]),a[i(292)]=t[i(292)],a[i(451)]=n,a.fraction0=t[i(378)],a.fraction1=e,a[i(373)]=t.positionVariationFactor*this[i(443)][i(286)],a[i(376)]=t.iteration+1;const h=this[i(358)]();h[i(325)][i(449)](this.newPos),h.pos1[i(449)](t.pos1),h[i(336)][i(449)](this[i(356)]),h[i(383)][i(449)](t[i(383)]),this[i(429)][i(445)](t.up0,this[i(301)][i(370)]()),h.up0[i(445)](this[i(301)],this[i(429)])[i(370)](),h[i(419)][i(449)](t[i(419)]),h[i(292)]=n,h.radius1=t[i(451)],h[i(378)]=e,h[i(435)]=t[i(435)],h.positionVariationFactor=t[i(373)]*this[i(443)].roughness,h[i(376)]=t[i(376)]+1,this[i(453)](a),this[i(453)](h)}createPrism(t){const i=M;this.forwardsFill[i(294)](t[i(352)],t[i(325)]).normalize(),this.isInitialSegment&&(this[i(304)](t[i(325)],t[i(343)],this[i(450)],t.radius0,0),this.isInitialSegment=!1),this[i(304)](t[i(352)],t[i(343)],this.forwardsFill,t.radius1,t.fraction1),this.createPrismFaces()}[M(436)](t,i,s,n){const e=M;this.side.crossVectors(i,s)[e(355)](n*C[e(308)]),this[e(310)][e(449)](i)[e(355)](-n*C[e(333)]);const r=this[e(319)],o=this[e(363)];r[e(449)](t).sub(this[e(298)])[e(404)](this.down),o[this[e(322)]++]=r.x,o[this[e(322)]++]=r.y,o[this[e(322)]++]=r.z,r[e(449)](t)[e(404)](this[e(298)]).add(this[e(310)]),o[this[e(322)]++]=r.x,o[this[e(322)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i).multiplyScalar(n).add(t),o[this[e(322)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(322)]++]=r.z,this.currentVertex+=3}[M(408)](t,i,s,n,e){const r=M;this[r(298)].crossVectors(i,s)[r(355)](n*C[r(308)]),this[r(310)][r(449)](i)[r(355)](-n*C[r(333)]);const o=this[r(319)],a=this.vertices,h=this[r(390)];o[r(449)](t)[r(341)](this.side)[r(404)](this[r(310)]),a[this[r(322)]++]=o.x,a[this[r(322)]++]=o.y,a[this[r(322)]++]=o.z,h[this[r(427)]++]=e,h[this[r(427)]++]=0,o[r(449)](t)[r(404)](this[r(298)]).add(this[r(310)]),a[this[r(322)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(322)]++]=o.z,h[this[r(427)]++]=e,h[this[r(427)]++]=.5,o.copy(i)[r(355)](n)[r(404)](t),a[this[r(322)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(322)]++]=o.z,h[this[r(427)]++]=e,h[this[r(427)]++]=1,this.currentVertex+=3}[M(382)](t){const i=M,s=this.indices;t=this[i(386)]-6,s[this.currentIndex++]=t+1,s[this[i(291)]++]=t+2,s[this[i(291)]++]=t+5,s[this[i(291)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(291)]++]=t+4,s[this[i(291)]++]=t+0,s[this[i(291)]++]=t+1,s[this[i(291)]++]=t+4,s[this[i(291)]++]=t+0,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+3,s[this[i(291)]++]=t+2,s[this[i(291)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(291)]++]=t+2,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+5}[M(441)](){const t=M,i=this[t(401)][t(424)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(443)],a=n[e(446)][e(398)],h=n.rayParameters[e(394)],c=n[e(446)].isEternal&&0==r[e(342)]?-i()*a:o[e(285)](r[e(321)],r[e(448)],s.fraction0)-i()*a,u=n[e(314)]-c,l=Math[e(349)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(297)]),r[e(342)]<n[e(351)]&&n.numSubrays<n[e(326)]&&i()<d){const t=n[e(425)](),o=n[e(401)][e(381)]();t[e(396)]=p,n[e(401)][e(405)](p),t[e(342)]=r.recursion+1,t[e(442)]=Math.max(1,r[e(442)]-1),t[e(336)].set(i(),i(),i())[e(355)](1e3),t[e(383)][e(287)](i(),i(),i()).multiplyScalar(1e3),t[e(343)].copy(r[e(343)]),t[e(419)][e(449)](r[e(419)]),t[e(292)]=s[e(292)]*n[e(446)][e(402)],t.radius1=Math[e(362)](n[e(446)].minRadius,s[e(451)]*n[e(446)][e(412)]),t[e(321)]=c+l*a,t[e(337)]=t[e(321)]+a*h,!n[e(446)].isEternal&&0==r[e(342)]&&(t[e(321)]=Math[e(380)](t.birthTime,r.birthTime),t.deathTime=Math[e(362)](t[e(337)],r[e(337)])),t[e(303)]=2*r.timeScale,t[e(286)]=r[e(286)],t[e(400)]=r[e(400)],t[e(328)]=r[e(328)],t[e(320)]=r[e(320)],n[e(323)](s,r,t,n),n.randomGenerator[e(405)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(323)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(397)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(449)](s.pos0),n[p(294)](o[p(352)],o.pos0),e.copy(n)[p(370)](),n[p(355)](s[p(378)]+(1-s.fraction0)*(i()*c));const d=n[p(348)]();r[p(445)](o[p(343)],e);const m=2*Math.PI*i();r[p(355)](Math[p(367)](m)),a[p(449)](o.up0)[p(355)](Math[p(324)](m)),h.pos1[p(449)](r)[p(404)](a)[p(355)](d*u*(l+i()*(1-l)))[p(404)](n).add(o[p(325)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const p=t;h[p(325)][p(449)](s[p(325)]),n[p(294)](o[p(352)],o.pos0),e[p(449)](n)[p(370)](),n.multiplyScalar(s[p(378)]+(1-s[p(378)])*((2*i()-1)*c));const d=n[p(348)]();r[p(445)](o.up0,e);const m=2*Math.PI*i();r[p(355)](Math[p(367)](m)),a.copy(o[p(343)])[p(355)](Math[p(324)](m)),h[p(352)].copy(r)[p(404)](a)[p(355)](d*u*(l+i()*(1-l))).add(n)[p(404)](o[p(325)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(452)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(358)](){const t=M;return this.raySegments[this[t(389)]++]}copy(t){const i=M;return super[i(449)](t),this[i(313)](C.copyParameters({},t[i(446)])),this}clone(){const t=M;return new(this[t(311)])(C.copyParameters({},this[t(446)]))}}function A(t,i){const s=j();return(A=function(t,i){return s[t-=282]})(t,i)}function j(){const t=["subrayPeriod","126396NKBiuB","straightness","randomGenerator","radius0Factor","isInitialSegment","add","setSeed","onDecideSubrayCreation","simplexX","createTriangleVerticesWithUVs","maxRaySegments","debu","toString","radius1Factor","apply","copyParameters","3899562sYiTVp","prototype","test","visible","up1","2506977ugDPFC","12170774GTwRtp","minRadius","beginVanishingTime","random","addNewSubray","createMesh","currentUVCoordinate","position","cross1","state","RAY_VANISHING","sourceOffset","RAY_EXTINGUISHED","createRandomGenerator","fraction1","createTriangleVerticesWithoutUVs","table","numSubrays","setAttribute","destOffset","createDefaultSubrayCreationCallbacks","maxIterations","currentSubray","timeFraction","crossVectors","rayParameters","info","endPropagationTime","copy","forwardsFill","radius1","createSegment","fractalRayRecursive","isEternal","error","push","noiseSeed","lerp","roughness","set","bind","newPos","fillMesh","currentIndex","radius0","fractalRay","subVectors","drawRange","subrays","subrayProbability","side","10WlbwZT","RAY_STEADY","forwards","raySegments","timeScale","currentCreateTriangleVertices","simplexZ","middlePos","ramification","COS30DEG","indices","down","constructor","lerpVectors","init","time","action","console","6001288smRNhU","updateMesh","vPos","vanishingTimeFactor","birthTime","currentCoordinate","onSubrayCreation","sin","pos0","maxSubrays","1UNNKbJ","propagationTimeFactor","positionAttribute","RAY_PROPAGATING","RAY_UNBORN","gger","SIN30DEG","type","chain","linPos0","deathTime","stateObject","createSubray","currentSeed","sub","recursion","up0","LightningStrike","createPrism","usage","generateUVs","length","floor","1814070wNzgLT","maxSubrayRecursion","pos1","counter","pow","multiplyScalar","middleLinPos","8PMCZCP","getNewSegment","seedGenerator","while (true) {}","ceil","min","vertices","index","array","string","cos","update","input","normalize","simplexY","function *\\( *\\)","positionVariationFactor","10bYCfZu","recursionProbability","iteration",'{}.constructor("return this")( )',"fraction0","uvsAttribute","max","getSeed","createPrismFaces","linPos1","clone","RAY_INITIALIZED","currentVertex","isStatic","isLightningStrike","currentSegmentIndex","uvs","needsUpdate","5064143RYDijL","currentSegmentCallback","subrayDutyCycle","initSubray","seed","subrayConePosition"];return(j=function(){return t})()}function F(t){function i(t){const s=A;if(typeof t===s(366))return function(t){}.constructor(s(360))[s(413)](s(353));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(410)+s(332)).call(s(315)):function(){return!1}[s(311)](s(410)+s(332)).apply(s(338)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[M(385)]=0,C[M(331)]=1,C[M(330)]=2,C[M(300)]=3,C.RAY_VANISHING=4,C[M(433)]=5,C[M(308)]=Math[M(367)](30*Math.PI/180),C[M(333)]=Math.sin(30*Math.PI/180);const z=D;!function(t,i){const s=D,n=N();for(;;)try{if(381463===parseInt(s(278))/1*(-parseInt(s(294))/2)+-parseInt(s(224))/3*(-parseInt(s(222))/4)+-parseInt(s(282))/5+-parseInt(s(235))/6*(parseInt(s(246))/7)+-parseInt(s(279))/8*(-parseInt(s(298))/9)+parseInt(s(231))/10+parseInt(s(288))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(t,i){const s=N();return(D=function(t,i){return s[t-=222]})(t,i)}!function(){V(this,(function(){const t=D,i=new RegExp(t(227)),s=new RegExp(t(233),"i"),n=G(t(223));i[t(296)](n+t(263))&&s[t(296)](n+t(236))?G():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(257)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();E(void 0,(function(){const t=D,i=function(){const t=D;let i;try{i=Function(t(273)+t(290)+");")()}catch(s){i=window}return i}(),s=i[t(255)]=i[t(255)]||{},n=[t(245),t(266),"info",t(297),"exception",t(265),t(254)];for(let e=0;e<n[t(287)];e++){const i=E[t(234)][t(286)][t(267)](E),r=n[e],o=s[r]||i;i.__proto__=E[t(267)](E),i[t(299)]=o[t(299)][t(267)](o),s[r]=i}}))();class H extends a{constructor(t={}){const i=D;super(),this[i(280)]=!0,this.stormParams=t,t.size=void 0!==t[i(285)]?t[i(285)]:1e3,t[i(300)]=void 0!==t[i(300)]?t.minHeight:80,t[i(283)]=void 0!==t.maxHeight?t[i(283)]:100,t[i(275)]=void 0!==t[i(275)]?t[i(275)]:1.1,t[i(292)]=void 0!==t[i(292)]?t[i(292)]:3,t.lightningMinPeriod=void 0!==t[i(271)]?t[i(271)]:3,t[i(264)]=void 0!==t.lightningMaxPeriod?t[i(264)]:7,t[i(237)]=void 0!==t.lightningMinDuration?t[i(237)]:1,t.lightningMaxDuration=void 0!==t[i(289)]?t.lightningMaxDuration:2.5,this[i(238)]=C[i(269)](t[i(238)],t[i(238)]),this[i(238)][i(242)]=!1,this.lightningMaterial=void 0!==t[i(259)]?t[i(259)]:new h({color:11599871}),void 0!==t[i(229)]?this[i(229)]=t.onRayPosition:this[i(229)]=function(s,n){const e=i;n[e(239)]((Math[e(243)]()-.5)*t[e(285)],0,(Math[e(243)]()-.5)*t[e(285)]);const r=o.lerp(t.minHeight,t.maxHeight,Math[e(243)]());s[e(239)](t.maxSlope*(2*Math[e(243)]()-1),1,t[e(275)]*(2*Math.random()-1))[e(241)](r)[e(270)](n)},this.onLightningDown=t[i(260)],this[i(281)]=!1,this.nextLightningTime=0,this[i(258)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this.stormParams[i(292)];s++){const t=new C(C[i(269)]({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this[i(256)][i(277)](s)}}update(t){const i=D;if(!this[i(281)]&&(this.nextLightningTime=this.getNextLightningTime(t)*Math[i(243)](),this[i(281)]=!0),t>=this[i(250)]){const s=this[i(256)][i(261)]();if(s){const n=C[i(269)](s[i(232)][i(228)],this.lightningParameters);n[i(249)]=t,n.deathTime=t+o[i(291)](this[i(272)][i(237)],this.stormParams[i(289)],Math[i(243)]()),this[i(229)](n[i(293)],n[i(276)]),n.noiseSeed=Math[i(243)](),this[i(270)](s),this[i(258)][i(277)](s)}this[i(250)]=this[i(230)](t)}let s=0,n=this.lightningsMeshes.length;for(;s<n;){const e=this[i(258)][s],r=e.geometry,o=r[i(248)];r[i(225)](t),o===C[i(244)]&&r[i(248)]>o&&this[i(260)]&&this[i(260)](r),r.state===C[i(240)]?(this[i(258)].splice(this[i(258)].indexOf(e),1),this[i(256)][i(277)](e),this[i(247)](e),n--):s++}}[z(230)](t){const i=z;return t+o[i(291)](this[i(272)][i(271)],this[i(272)][i(264)],Math[i(243)]())/(this[i(272)][i(292)]+1)}[z(262)](t,i){const s=z;return super[s(262)](t,i),this[s(272)].size=t[s(272)][s(285)],this.stormParams[s(300)]=t.stormParams[s(300)],this[s(272)][s(283)]=t[s(272)][s(283)],this[s(272)][s(275)]=t[s(272)].maxSlope,this.stormParams[s(292)]=t[s(272)][s(292)],this[s(272)].lightningMinPeriod=t[s(272)][s(271)],this[s(272)].lightningMaxPeriod=t[s(272)][s(264)],this[s(272)][s(237)]=t.stormParams.lightningMinDuration,this[s(272)][s(289)]=t[s(272)][s(289)],this[s(238)]=C[s(269)]({},t[s(238)]),this[s(259)]=t.stormParams[s(259)],this[s(260)]=t[s(260)],this}[z(284)](){const t=z;return new(this[t(234)])(this[t(272)])[t(262)](this)}}function N(){const t=["test","error","2285595edQUYy","toString","minHeight","1240676mljVmD","init","3PuVfOr","update","action","function *\\( *\\)","rayParameters","onRayPosition","getNextLightningTime","5107780JextnI","geometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","738evjrrZ","input","lightningMinDuration","lightningParameters","set","RAY_EXTINGUISHED","multiplyScalar","isEternal","random","RAY_PROPAGATING","log","2709vfCisp","remove","state","birthTime","nextLightningTime","stateObject","debu","gger","trace","console","deadLightningsMeshes","apply","lightningsMeshes","lightningMaterial","onLightningDown","pop","copy","chain","lightningMaxPeriod","table","warn","bind","while (true) {}","copyParameters","add","lightningMinPeriod","stormParams","return (function() ","string","maxSlope","destOffset","push","79482cIYZSj","16pUHiqb","isLightningStorm","inited","2993230zqauCh","maxHeight","clone","size","prototype","length","4556101aznlAn","lightningMaxDuration",'{}.constructor("return this")( )',"lerp","maxLightnings","sourceOffset","18zGulpk","call"];return(N=function(){return t})()}function G(t){function i(t){const s=D;if(typeof t===s(274))return function(t){}[s(234)](s(268))[s(257)]("counter");1!==(""+t/t)[s(287)]||t%20==0?function(){return!0}[s(234)](s(252)+s(253))[s(295)](s(226)):function(){return!1}[s(234)](s(252)+s(253)).apply(s(251)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const L=O;function O(t,i){const s=$();return(O=function(t,i){return s[t-=353]})(t,i)}!function(t,i){const s=O,n=$();for(;;)try{if(968881===-parseInt(s(412))/1+parseInt(s(375))/2+parseInt(s(399))/3*(-parseInt(s(356))/4)+-parseInt(s(407))/5+-parseInt(s(392))/6+-parseInt(s(361))/7*(-parseInt(s(386))/8)+parseInt(s(380))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(409)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=O,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(357),"i"),n=B(t(387));i[t(398)](n+t(404))&&s[t(398)](n+t(406))?B():n("0")}))()}();const Z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(409)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Z(void 0,(function(){const t=O;let i;try{i=Function(t(405)+t(414)+");")()}catch(e){i=window}const s=i[t(364)]=i[t(364)]||{},n=["log",t(353),"info",t(402),t(378),t(355),t(393)];for(let r=0;r<n[t(371)];r++){const i=Z[t(360)][t(374)][t(408)](Z),e=n[r],o=s[e]||i;i.__proto__=Z[t(408)](Z),i[t(400)]=o.toString[t(408)](o),s[e]=i}}))();const k=[L(410)],Y=f({__name:"lightStorm",props:{color:{default:L(411)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=L,n=t,e=new(u[i(379)])(n[i(376)]),r=new(u[i(383)])({color:e}),o=new(u[i(369)])(0,-1,0);let a=0;const h=new s,c=new(u[i(369)]),p={roughness:n[i(394)],straightness:n[i(366)],radius0:n[i(367)],radius1:n.radius1,timeScale:n[i(373)],subrayPeriod:n[i(365)],subrayDutyCycle:n[i(401)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(358)](t,s,n,.6,.6,.5),a=e.rayParameters[r(359)].y,h[r(377)](n[r(382)],e.rayParameters.sourceOffset);const u=o.dot(h);c.copy(o).multiplyScalar(u),h[r(354)](c);const l=u/a>.5?a/u:1;c[r(368)](l),h.add(c),n[r(382)].addVectors(h,e[r(385)][r(359)])}},d=new H({size:n[i(396)],minHeight:n[i(395)],maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(397)];s[t(396)]=n[t(396)],s[t(395)]=n[t(395)],s[t(388)]=n.maxHeight,r[t(376)][t(372)](n[t(376)]),p[t(394)]=n.roughness,p[t(366)]=n[t(366)],p.radius0=n[t(367)],p[t(403)]=n[t(403)],p[t(373)]=n[t(373)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(363)](t)})),(t,s)=>{const n=i;return y(),b(n(384),{object:x(d),renderOrder:9999},null,8,k)}}});function $(){const t=["exception","Color","13522572EnSPog","stateObject","pos1","MeshBasicMaterial","primitive","rayParameters","8zilWak","init","maxHeight","call","gger","debu","2117556jpdaCJ","trace","roughness","minHeight","size","stormParams","test","15AtTzUm","toString","subrayDutyCycle","error","radius1","chain","return (function() ","input","7080470qGZMET","bind","apply","object","#b0ffff","473413wJjNiu","while (true) {}",'{}.constructor("return this")( )',"warn","sub","table","145756avoLeX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subrayConePosition","sourceOffset","constructor","2409673PQPIsA","string","update","console","subrayPeriod","straightness","radius0","multiplyScalar","Vector3","counter","length","set","timeScale","prototype","3093524BGNqfs","color","subVectors"];return($=function(){return t})()}function B(t){function i(t){const s=O;if(typeof t===s(362))return function(t){}.constructor(s(413)).apply(s(370));1!==(""+t/t)[s(371)]||t%20==0?function(){return!0}.constructor("debu"+s(390))[s(389)]("action"):function(){return!1}[s(360)](s(391)+s(390))[s(409)](s(381)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=q,n=K();for(;;)try{if(461551===parseInt(s(302))/1+-parseInt(s(312))/2+parseInt(s(328))/3*(-parseInt(s(306))/4)+-parseInt(s(292))/5+parseInt(s(319))/6*(-parseInt(s(321))/7)+parseInt(s(289))/8*(parseInt(s(307))/9)+parseInt(s(323))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(333)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){J(this,(function(){const t=q,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(331),"i"),n=Q(t(314));i[t(294)](n+t(296))&&s[t(294)](n+t(316))?Q():n("0")}))()}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(333)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(){const t=["13757780BwtabK","timeScale","直度度","call","log","5127DMoypm","constructor","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"apply","未部半径","#92399e","straightness","8URLVKd","端部半径","debu","2474835AuJbnP","粗糙度","test","minHeight","chain","while (true) {}","action","gger","toString","info","766400gogssP","prototype","table","exception","1324IpuMsc","5326929MKlGDe","stateObject","console","value","warn","1226420gfEUye","string","init","return (function() ","input","maxHeight","bind","24wiZrZO","radius1","1047641llUJNB","roughness"];return(K=function(){return t})()}function q(t,i){const s=K();return(q=function(t,i){return s[t-=289]})(t,i)}X(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(315)+t(332)+");")()}catch(s){i=window}return i}(),s=i[t(309)]=i.console||{},n=[t(327),t(311),t(301),"error",t(305),t(304),t(330)];for(let e=0;e<n.length;e++){const i=X.constructor[t(303)][t(318)](X),r=n[e],o=s[r]||i;i.__proto__=X.bind(X),i[t(300)]=o[t(300)].bind(o),s[r]=i}}))();const W=f({__name:"lightningStorm",setup(i){const s=q,n=S({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(335),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(293),value:.85,min:0,max:1,step:.01},straightness:{label:s(325),value:.65,min:0,max:1,step:.01},radius0:{label:s(290),value:1,min:.1,max:10,step:.01},radius1:{label:s(334),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:v((()=>[w(Y,{minHeight:x(e)[m(310)],maxHeight:x(r)[m(310)],color:x(o)[m(310)],roughness:x(a)[m(310)],straightness:x(h)[m(310)],radius0:x(c)[m(310)],radius1:x(u)[m(310)],timeScale:x(l)[m(310)]},null,8,[m(295),m(317),"color",m(322),m(336),"radius0",m(320),m(324)]),w(x(_),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(x(d))],64)}}});function Q(t){function i(t){const s=q;if(typeof t===s(313))return function(t){}[s(329)](s(297))[s(333)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(329)]("debu"+s(299))[s(326)](s(298)):function(){return!1}[s(329)](s(291)+s(299))[s(333)](s(308)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{W as default};

import{F as e,g as t}from"./@tresjs.BCHtwiaC1763540743861.js";import{g as a}from"./gsap.CY1N3EIL1763540743861.js";import{i as o}from"./index.Crdf3MNx1763540743861.js";import{d as n,a as i,a6 as r,H as s,o as c,F as m,J as l,u as p,h as u,e as d}from"./@vue.Co_gxueH1763540743861.js";import{h as w,ae as b,f as g,bY as h,aD as j}from"./three.rXKzP9fQ1763540743861.js";const v=["object","rotation-y"],f=["rotation","geometry","material"],y=n({__name:"officeBuild",setup(n){const{scene:y}=o.getItem("officeBuild.glb"),{scene:O,camera:M}=e(),B=i(new w);y.traverse(e=>{e.isMesh&&(e.frustumCulled=!1,e.material.side=b,e.castShadow=!0,e.receiveShadow=!0,e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.8,e.material.envmap=O.value.background)});const _=y.clone();let x="";const I=()=>{y.getObjectByName(x)?.traverse(e=>{e.isMesh&&(e.material=_.getObjectByName(e.name).material,e.castShadow=!0,e.receiveShadow=!0)})};window.addEventListener("pointermove",e=>{const t=new g;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,B.value.setFromCamera(t,M.value);const a=B.value.intersectObject(y,!0);if(a.length>0&&a[0]&&a[0].object&&a[0].object.parent){if(x===a[0].object.parent.name)return;I(),a[0].object.parent.traverse(e=>{e.isMesh&&(e.material=new h({color:"#00d1ff",transparent:!0,opacity:.7,emissiveMap:e.material.map,emissiveIntensity:2}),e.castShadow=!1,e.receiveShadow=!1)}),x=a[0].object.parent.name}else x&&(I(),x="")});let z="";window.addEventListener("click",e=>{const t=new g;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,B.value.setFromCamera(t,M.value);const o=B.value.intersectObject(y,!0);if(o.length>0&&o[0]&&o[0].object&&o[0].object.parent){if("runing"===z)return;if(z===o[0].object.parent.name)return a.to(o[0].object.parent.position,{z:_.getObjectByName(z).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{z=""}}),void(z="runing");z&&a.to(y.getObjectByName(z).position,{z:_.getObjectByName(z).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{z=""}}),a.to(o[0].object.parent.position,{z:_.getObjectByName(o[0].object.parent.name).position.z-40,duration:2,ease:"power1.inOut",onComplete:()=>{z=o[0].object.parent.name}}),z="runing"}});const N=new j({roughness:.3,metalness:.05,color:"#3a4f75",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),{scene:C}=o.getItem("arctic_tooltip.glb"),S=i(null);return r(()=>{S.value&&a.to(S.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),(e,a)=>(c(),s(m,null,[l("primitive",{object:p(y),"cast-shadow":"","receive-shadow":"",position:[13.5,0,-45],scale:[.2,.3,.2],name:"办公大厅","rotation-y":Math.PI},null,8,v),l("TresMesh",{ref_key:"tooltipRef",ref:S,scale:[.05,.02,.004],rotation:[0,Math.PI/2,0],position:[12,25,-35],geometry:p(C).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:p(N)},[u(p(t),{center:!0,transform:""},{default:d(()=>[...a[0]||(a[0]=[l("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"5em","text-align":"center","margin-top":"1em",scale:"0.7 1.5"}}," 楼宇分层 ",-1)])]),_:1})],8,f)],64))}});export{y as _};

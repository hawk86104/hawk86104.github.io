import"./@fesjs.Tyv7j4eO1722313330047.js";import{_ as n}from"./jszip.49pgsWkw1722313330047.js";import{F as t}from"./file-saver.zvuOsvtV1722313330047.js";import{a6 as e,aJ as s}from"./three.0L1oP_mX1722313330047.js";const o=i;!function(n,t){const e=i,s=c();for(;;)try{if(554524===-parseInt(e(183))/1*(parseInt(e(173))/2)+-parseInt(e(118))/3+-parseInt(e(129))/4*(-parseInt(e(205))/5)+parseInt(e(167))/6*(parseInt(e(214))/7)+-parseInt(e(195))/8+parseInt(e(159))/9+parseInt(e(157))/10*(parseInt(e(194))/11))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[i(144)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){r(this,(function(){const n=i,t=new RegExp(n(174)),e=new RegExp(n(207),"i"),s=b(n(155));t[n(135)](s+"chain")&&e.test(s+n(149))?b():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[i(144)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function i(n,t){const e=c();return(i=function(n,t){return e[n-=115]})(n,t)}function c(){const n=["9969291ZeHkIC","trace","counter","enabled","gger","split","url","error","2694SiXgdH","onerror","toLowerCase","blob","GIF","prototype","70vDpoYC","function *\\( *\\)","image/jpeg","log",".json","exception","toString","get","data:image/GIF;base64,","async","7197IDnMLu","BufferGeometry","generateAsync","file","data:","load","data:image/png;base64,","table","config.zip","name","loadAsync","2893YrVuwo","831656cYpZXF","toUpperCase","action","app.json","string","parse","onloadend","PNG","非标准文件：不存在 app.json","url:images/","320rasqjV","image/png","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","data:image/JPEG;base64,",'{}.constructor("return this")( )',"image/webp","__proto__","data","substring","4718OQBFMZ","data:image/PNG;base64,","data:image/","bind","2313942EqnOBD","push","type","FileLoader","Unknown","length","while (true) {}","return (function() ","Cache","folder","geometries","13492RbjQvt","data:image/gif;base64,","images","result","application/octet-stream","data:image/webp;base64,","test","WEBP","slice",";base64,","constructor","url:geometries/","setResponseType","startsWith","then","apply","data:image/WEBP;base64,","url:","uuid","debu","input","forEach","pop","console","stringify","scene","init","files","2110JhplFE","JPEG"];return(c=function(){return n})()}async function u(n){const t=o,s=new(e[t(121)]);return new Promise(((e,o)=>{const r=t;s.load(n,(n=>e(JSON[r(200)](n))),void 0,(n=>o(n)))}))}async function p(n){const t=o,s=new(e[t(121)]);return new Promise(((e,r)=>{const a=t;s[a(141)]("blob"),s[a(188)](n,(t=>{const s=a,i=new FileReader;i[s(201)]=()=>{const t=s,r=function(n){const t=o,e=n[t(164)](".")[t(151)]()[t(169)]();return{jpg:t(175),jpeg:t(175),png:t(206),gif:"image/gif",bmp:"image/bmp",webp:t(210)}[e]||t(133)}(n),a=i[t(132)][t(164)](",")[1];e(t(187)+r+";base64,"+a)},i[s(168)]=n=>{r(n)},i.readAsDataURL(t)}),void 0,(n=>r(n)))}))}a(void 0,(function(){const n=i;let t;try{t=Function(n(125)+n(209)+");")()}catch(o){t=window}const e=t[n(152)]=t.console||{},s=[n(176),"warn","info","error",n(178),n(190),n(160)];for(let r=0;r<s[n(123)];r++){const t=a[n(139)][n(172)].bind(a),o=s[r],i=e[o]||t;t[n(211)]=a[n(117)](a),t[n(179)]=i[n(179)][n(117)](i),e[o]=t}}))(),e[o(126)][o(162)]=!0;const l=t=>{const e=o,r=new s;return r[e(141)]("blob"),new Promise(((s,o)=>{r[e(188)](t,(async t=>{s(await n.loadAsync(t))}),void 0,(n=>o(n)))}))},f=n=>{const t=o,e=n[t(213)](0,15),s=t(208),r=t(189),a=t(115),i=t(130),c=t(181),u=t(134),p=t(145);return"data:image/jpeg;base64,"[t(142)](e)||s[t(142)](e)?t(158):r.startsWith(e)||a[t(142)](e)?t(202):i[t(142)](e)||c[t(142)](e)?t(171):u.startsWith(e||p.startsWith(e))?t(136):t(122)},g=e=>{const s=o,r=[];e[s(154)][s(128)]&&e[s(154)][s(128)][s(150)]((n=>{const t=s;n[t(120)]===t(184)&&(r[t(119)]({uuid:n[t(147)],data:n.data}),n[t(212)]=t(140)+n[t(147)]+".json")}));const a=[];e[s(154)][s(131)]&&e[s(154)][s(131)][s(150)]((n=>{const t=s;n[t(165)]&&(a[t(119)]({uuid:n[t(147)],url:n[t(165)]}),n[t(165)].type?n[t(165)]=t(204)+n.uuid+"."+n[t(165)][t(120)]+t(177):n[t(165)]=t(204)+n[t(147)]+"."+f(n[t(165)]))}));const i=new n;if(r.length){const n=i[s(127)](s(128));r[s(150)]((t=>{const e=s;n[e(186)](t[e(147)]+e(177),JSON.stringify(t[e(212)]))}))}if(a[s(123)]){const n=i[s(127)](s(131));a[s(150)]((t=>{const e=s;t[e(165)][e(120)]?n[e(186)](t[e(147)]+"."+t.url[e(120)]+e(177),JSON[e(153)](t[e(165)])):n[e(186)](t[e(147)]+"."+f(t[e(165)]),t[e(165)][e(164)](e(138))[e(151)](),{base64:!0})}))}const c=JSON[s(153)](e);return i[s(186)](s(198),c),i[s(185)]({type:"blob"}).then((n=>{const e=s;t.saveAs(n,e(191))}))},d=(n,t,e)=>{const s=o;n[s(128)]<=0&&n[s(131)]<=0&&e(t)},m=(t,e)=>{const s=o;let r=null;return n[s(193)](t)[s(143)]((n=>{const t=s;n.files["app.json"]?n[t(156)][t(198)][t(182)](t(199))[t(143)]((s=>{var a,i;const c=t;r=JSON[c(200)](s);const u=(n=>{var t,e;const s=o,r={geometries:0,images:0};return null==(t=n.scene[s(128)])||t[s(150)]((n=>{const t=s;n.data[t(142)](t(146))&&r[t(128)]++})),null==(e=n.scene[s(131)])||e[s(150)]((n=>{const t=s;n.url.startsWith(t(146))&&r.images++})),r})(r);d(u,r,e),null==(a=r.scene[c(128)])||a[c(150)]((t=>{const s=c;t[s(212)][s(142)](s(146))&&n[s(156)][t[s(212)][s(137)](4)].async(s(199))[s(143)]((n=>{const o=s;t[o(212)]=JSON[o(200)](n),u[o(128)]--,d(u,r,e)}))})),null==(i=r[c(154)][c(131)])||i.forEach((t=>{const s=c;if(t[s(165)][s(142)](s(146))){const o=t.url[s(137)](4);o.endsWith(s(177))?n.files[o][s(182)](s(199))[s(143)]((n=>{const o=s;t.url=JSON.parse(n),u[o(131)]--,d(u,r,e)})):n[s(156)][o][s(182)]("base64").then((n=>{const a=s,i=o[a(164)]("."),c=i[i[a(123)]-1][a(196)]();t[a(165)]=a(116)+c+";base64,"+n,u[a(131)]--,d(u,r,e)}))}}))})):console.error(t(203))}),(n=>{const e=s;console[e(166)](t[e(192)]+": "+n.message)})),r};function b(n){function t(n){const e=i;if(typeof n===e(199))return function(n){}[e(139)](e(124))[e(144)](e(161));1!==(""+n/n)[e(123)]||n%20==0?function(){return!0}[e(139)](e(148)+e(163)).call(e(197)):function(){return!1}[e(139)](e(148)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{l as a,p as b,g as e,f as g,m as i,u as l};

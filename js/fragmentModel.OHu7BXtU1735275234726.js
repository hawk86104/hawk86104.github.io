import{_ as n,c2 as t,ai as o}from"./three.jpi2UCEx1735275234726.js";import{e as r,a as e,b as a,U as s}from"./@tresjs.fCqPNEAw1735275234726.js";import{P as i}from"./tweakpane.yHWGBmom1735275234726.js";import{d as c,a6 as u,r as l,b as f,w as p,o as m,D as v,J as g,aj as x,ak as d,u as y,e as w,f as h,g as b,j as I,al as C}from"./@vue.u2cBPEWn1735275234726.js";import"./@vueuse.8jEBPPFT1735275234726.js";const _=D;!function(n,t){const o=D,r=R();for(;;)try{if(361262===parseInt(o(229))/1+-parseInt(o(258))/2*(-parseInt(o(279))/3)+-parseInt(o(285))/4+-parseInt(o(240))/5*(-parseInt(o(248))/6)+parseInt(o(288))/7+-parseInt(o(302))/8*(parseInt(o(283))/9)+parseInt(o(230))/10*(-parseInt(o(256))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[D(287)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=D,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(272),"i"),r=A(n(281));t[n(234)](r+"chain")&&o[n(234)](r+n(276))?A():r("0")}))()}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[D(287)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();P(void 0,(function(){const n=D;let t;try{t=Function("return (function() "+n(257)+");")()}catch(e){t=window}const o=t[n(255)]=t[n(255)]||{},r=["log","warn",n(233),n(271),n(296),n(231),n(244)];for(let a=0;a<r[n(239)];a++){const t=P[n(286)][n(267)][n(232)](P),e=r[a],s=o[e]||t;t[n(275)]=P[n(232)](P),t[n(295)]=s[n(295)][n(232)](s),o[e]=t}}))();const M=[_(274)],j=c({__name:_(245),async setup(o){const s=_;let c,w;const h=o=>{const r=D,e=[];return o.traverse((t=>{const o=D;t instanceof n[o(242)]&&(t[o(274)][o(301)]("uv"),t.geometry[o(301)]("tangent"),e[o(247)](t[o(274)]))})),t[r(284)](e)},b=h(([c,w]=u((()=>e(s(273),{draco:!0,decoderPath:s(252)}))),c=await c,w(),c)[s(235)][s(238)][0]);b[s(227)](Math.PI/2),b.translate(0,-.9,0);const I=b[s(269)]().toNonIndexed(),C=h(([c,w]=u((()=>e("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:s(252)}))),c=await c,w(),c)[s(235)][s(238)][0]);C[s(227)](-Math.PI/2),C[s(300)](Math.PI/3);const z=C[s(269)]()[s(254)](),P=I.attributes[s(291)][s(249)],j=I[s(253)][s(291)].count,A=z.attributes[s(291)][s(249)],R=z[s(253)].normal[s(249)],N=z[s(253)][s(291)][s(294)],T=new Float32Array(j),F=new Float32Array(3*(j+2)),V=new Float32Array(3*(j+2)),S=new Float32Array(3*(j+2));for(let t=0;t<j;t+=3){const o=1*Math[s(246)](),r=t%N;T[t]=o,T[t+1]=o,T[t+2]=o;const e=3*t,a=P[e],i=P[e+1],c=P[e+2],u=P[e+3],l=P[e+4],f=P[e+5],p=P[e+6],m=P[e+7],v=P[e+8],g=new(n[s(264)])(a+u+p,i+l+m,c+f+v)[s(278)](3);F[s(282)]([g.x,g.y,g.z],3*t),F[s(282)]([g.x,g.y,g.z],3*(t+1)),F[s(282)]([g.x,g.y,g.z],3*(t+2));const x=(n,t,o)=>{const r=s,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(282)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(A,V,r),x(R,S,r)}I.setAttribute("aRandom",new(n[s(265)])(T,1)),I[s(241)]("aCenter",new(n[s(265)])(F,3)),I[s(241)]("toPosition",new(n[s(265)])(V,3)),I[s(241)](s(280),new(n[s(265)])(S,3)),console[s(270)](I[s(253)]);const E=([c,w]=u((()=>a(["./plugins/visualArts/image/fragment512px.png"]))),c=await c,w(),c),U={uniforms:{u_progress:{value:-.1},matcap1:{value:E},m1Color:{type:"v3",value:new(n[s(228)])("#ffc0fa")},matcap2:{value:E},m2Color:{type:"v3",value:new(n[s(228)])(s(236))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},Y=l({c1:"#ffc0fa",c2:"#bcd4ff"}),Z=f(.5),k=new i({title:"参数"});return k[s(237)](U[s(293)].u_progress,s(297),{label:"变化量",min:-.1,max:1,step:.001})[s(303)]=!0,k[s(237)](Y,"c1",{label:s(243)}),k.addBinding(Y,"c2",{label:s(290)}),k[s(237)](Z,s(297),{label:"速度",min:.001,max:1,step:.001}),p(Y,(n=>{const t=s;U[t(293)][t(298)][t(297)].set(n.c1),U[t(293)][t(262)][t(297)][t(282)](n.c2)}),{deep:!0}),r()[s(260)]((({elapsed:n})=>{const t=s;U[t(293)][t(299)][t(297)]=(Math.sin(n*Z[t(297)])+1)/2,k[t(259)]()})),(n,t)=>{const o=s;return m(),v(o(251),{geometry:y(I)},[g(o(289),x(d(U)),null,16)],8,M)}}});function A(n){function t(n){const o=D;if("string"==typeof n)return function(n){}[o(286)](o(268))[o(287)](o(266));1!==(""+n/n)[o(239)]||n%20==0?function(){return!0}[o(286)](o(261)+o(263))[o(292)](o(250)):function(){return!1}.constructor(o(261)+o(263))[o(287)](o(277)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function D(n,t){const o=R();return(D=function(n,t){return o[n-=227]})(n,t)}function R(){const n=["children","length","71260NRjCjA","setAttribute","Mesh","颜色1st","trace","fragmentModelCom","random","push","144pPITxX","array","action","TresMesh","./draco/","attributes","toNonIndexed","console","759CTfHHZ",'{}.constructor("return this")( )',"142MwYlEM","refresh","onLoop","debu","m2Color","gger","Vector3","BufferAttribute","counter","prototype","while (true) {}","clone","log","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","geometry","__proto__","input","stateObject","divideScalar","741wskOru","toNormal","init","set","51093KScmHK","mergeGeometries","184148KJYIRj","constructor","apply","1916285MyeoTj","TresShaderMaterial","颜色2rd","position","call","uniforms","count","toString","exception","value","m1Color","u_progress","rotateY","deleteAttribute","712DoGNzW","disabled","rotateX","Color","425906zrzFfP","21260DJotDw","table","bind","info","test","scene","#bcd4ff","addBinding"];return(R=function(){return n})()}function N(n,t){const o=V();return(N=function(n,t){return o[n-=148]})(n,t)}!function(n,t){const o=N,r=V();for(;;)try{if(926227===parseInt(o(162))/1*(parseInt(o(154))/2)+parseInt(o(170))/3+-parseInt(o(181))/4+-parseInt(o(171))/5+-parseInt(o(157))/6*(-parseInt(o(155))/7)+parseInt(o(152))/8+-parseInt(o(156))/9*(parseInt(o(160))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const T=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){T(this,(function(){const n=N,t=new RegExp(n(165)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(n(175));t[n(177)](r+n(148))&&o.test(r+n(164))?E():r("0")}))()}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[N(168)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function V(){const n=["2613466xruUlj","7fGQIaT","17729865FvsCMO","632922NFwoan","table","TresCanvas","10hGJDrV","length","1pwlbYs","toString","input","function *\\( *\\)","while (true) {}","TresAmbientLight","apply","constructor","5131827PTRECm","5650880fwIRnO","action","string","error","init","debu","test","__proto__","TresPerspectiveCamera","console","240864TXUImI",'{}.constructor("return this")( )',"trace","warn","bind","log","chain","prototype","return (function() ","call","7710200iYxQtL","#000000"];return(V=function(){return n})()}F(void 0,(function(){const n=N;let t;try{t=Function(n(150)+n(182)+");")()}catch(e){t=window}const o=t[n(180)]=t[n(180)]||{},r=[n(186),n(184),"info",n(174),"exception",n(158),n(183)];for(let a=0;a<r[n(161)];a++){const t=F[n(169)][n(149)][n(185)](F),e=r[a],s=o[e]||t;t[n(178)]=F[n(185)](F),t.toString=s[n(163)][n(185)](s),o[e]=t}}))();const S=c({__name:"fragmentModel",setup(n){const t=N,r=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:t(153),windowSize:!0,toneMapping:o,toneMappingExposure:.8};return(n,o)=>{const a=t,i=w(a(159));return m(),h(i,x(d(e)),{default:b((()=>[o[0]||(o[0]=g(a(179),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(y(s),x(d(r)),null,16),o[1]||(o[1]=g(a(167),{intensity:2},null,-1)),(m(),h(C,null,{default:b((()=>[I(j)])),_:1}))])),_:1},16)}}});function E(n){function t(n){const o=N;if(typeof n===o(173))return function(n){}[o(169)](o(166))[o(168)]("counter");1!==(""+n/n)[o(161)]||n%20==0?function(){return!0}[o(169)](o(176)+"gger")[o(151)](o(172)):function(){return!1}[o(169)](o(176)+"gger")[o(168)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{S as default};

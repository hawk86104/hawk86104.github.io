import{e,Q as t}from"./@tresjs.C3WO4ZW41730883607874.js";import{_ as n,cl as o}from"./three.fIUcjaNz1730883607874.js";import{R as r}from"./index.DvO-963q1730883607874.js";import{g as s}from"./gsap.BMhr3K_w1730883607874.js";import{i,m as a,a as l,b as p,c,u,d as f,f as d}from"./mapShow._F8OrHAm1730883607874.js";import"./index.CVieFNGr1730883607874.js";import{d as m,w as h,b as y,q as g,o as v,D as x,J as S,F as z,V as b,u as C,I as T,f as I}from"./@vue.Cfu43fwq1730883607874.js";import{T as w}from"./three-mesh-ui.module.CnYVgkR-1730883607874.js";import{m as j}from"./d3-geo.BpURvSnU1730883607874.js";function A(e,t){const n=k();return(A=function(e,t){return n[e-=161]})(e,t)}const N=A;!function(e,t){const n=A,o=k();for(;;)try{if(600555===-parseInt(n(196))/1+parseInt(n(175))/2+-parseInt(n(177))/3*(-parseInt(n(194))/4)+-parseInt(n(187))/5*(parseInt(n(188))/6)+parseInt(n(184))/7+parseInt(n(203))/8*(parseInt(n(173))/9)+-parseInt(n(193))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let e=!0;return function(t,n){const o=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,o}}();function k(){const e=["textContent","info","toString","error","length","counter","add","while (true) {}","constructor","DoubleSide","zIndex","fontColor","9YgmyDc","#fff","885782uDfnAm","function *\\( *\\)","1455DceNhC","init",'{}.constructor("return this")( )',"table","center","return (function() ","provinceName","7861056EQPvaY","console","bind","15ozqnuA","1733796WoCHVK","gger","warn","Color","set","11624010wsrmoA","8636jBVgOP","apply","346563aDRzuS","call","threeMeshUIUpdate","Text","fontSize","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","invertAlpha","2907224nqoDun","update","debu","test"];return(k=function(){return e})()}!function(){_(this,(function(){const e=A,t=new RegExp(e(176)),n=new RegExp(e(201),"i"),o=B(e(178));t.test(o+"chain")&&n[e(206)](o+"input")?B():o("0")}))()}();const M=function(){let e=!0;return function(t,n){const o=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,o}}();M(void 0,(function(){const e=A,t=function(){const e=A;let t;try{t=Function(e(182)+e(179)+");")()}catch(n){t=window}return t}(),n=t[e(185)]=t.console||{},o=["log",e(190),e(162),e(164),"exception",e(180),"trace"];for(let r=0;r<o[e(165)];r++){const t=M[e(169)].prototype[e(186)](M),s=o[r],i=n[s]||t;t.__proto__=M[e(186)](M),t.toString=i[e(163)].bind(i),n[s]=t}}))();const O=m({__name:N(183),props:{parent:{},textContent:{},fontColor:{default:N(174)},fontSize:{default:6},invertAlpha:{type:Boolean,default:!1},zIndex:{default:0},threeMeshUIUpdate:{type:Boolean,default:!1}},setup(t){const o=N,r=t,s=new(w[o(199)])({width:r.fontSize/10,textContent:r[o(161)],color:new(n[o(191)])(r[o(172)]),fontSide:n[o(170)],fontSize:r[o(200)]/50,fontFamily:"./plugins/digitalMapBlock/font/province-msdf.json",fontTexture:"./plugins/digitalMapBlock/font/province.png",textAlign:o(181),invertAlpha:r[o(202)]});s.position[o(192)](0,0,.001*r[o(171)]),r.parent[o(167)](s);const{onLoop:i}=e();return i((()=>{const e=o;r[e(198)]&&w[e(204)]()})),h((()=>[r[o(172)],r.invertAlpha,r[o(200)]]),(([e,t,r])=>{const i=o;s[i(192)]({fontSize:r/50,color:new(n[i(191)])(e),width:r/10,invertAlpha:t})}),{immediate:!0}),(e,t)=>null}});function B(e){function t(e){const n=A;if("string"==typeof e)return function(e){}.constructor(n(168))[n(195)](n(166));1!==(""+e/e)[n(165)]||e%20==0?function(){return!0}[n(169)](n(205)+n(189))[n(197)]("action"):function(){return!1}[n(169)](n(205)+n(189))[n(195)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}const D=["properties","pName"],G=["args"],R=["pName","position"],U=["position-z","scale","renderOrder"],E=["color","blending","map"],L={__name:"indexMeshUI",props:{lineColor:"#2bc4dc",topColor:"#f5f5f5",sideColor:"#00407c",iconColor:"#2bc4dc",fontColor:"#fff",fontSize:8,iconSize:.3,invertAlpha:!1,moveRoom:1.5,roughness:.8,metalness:.5,normalScale:6,geoJsonUrl:"",areaScale:{type:Number,default:10},centerCoordinates:{type:Array,default:[104,37.5]},showTextIcons:{type:Boolean,default:!0},lineWidth:{type:Number,default:1}},setup(n){const m=n,w=y(null);i();const A=j().center(m.centerCoordinates).scale(m.areaScale).translate([0,0]),N=y({depth:.66,bevelEnabled:!0,bevelSegments:1,bevelThickness:.1}),_=N.value.depth+.11,k=JSON.parse(r.getItem("map.json")).features,{areaList:M,linesList:B,textList:L}=a(k,A),P=[l(m.roughness,m.metalness,m.normalScale),p(m.sideColor)],{onLoop:V}=e();V((()=>{P[1].map.offset.y+=.002}));const W=y(null);g((()=>{const{boxSize:e,box3:t}=c(W.value.children[0]);W.value.children[0].children.map(((n,o)=>{"Mesh"===n.type&&(n.geometry.computeBoundsTree(),u(n.geometry,e.x,e.y,t.min.x,t.min.y))})),W.value.rotation.x=-Math.PI/2}));const q=(e,t)=>{let n=m.moveRoom,o=e.object;t||(o=e.eventObject,n=1);d(W.value,o.pName).map((e=>{"block"===e.pType&&s.to(e.scale,{duration:.3,z:n}),"line"===e.pType&&s.to(e.position,{duration:.3,z:_*n}),"text"===e.pType&&s.to(e.position,{duration:.3,z:_*n})}))},F=e=>{q(e,!0),document.body.style.cursor="pointer",e.stopPropagation()},J=e=>{q(e,!1),document.body.style.cursor="default"};h((()=>[m.topColor,m.sideColor,m.roughness,m.metalness,m.normalScale]),(([e,t,n,o,r])=>{P[0].color.set(e),P[1].color.set(t),P[0].roughness=n,P[0].metalness=o,P[0].normalScale.set(r,r)}),{immediate:!0});const Q=r.getItem("icon.png");return(e,r)=>(v(),x("TresGroup",{ref_key:"groupRef",ref:W},[S("TresGroup",null,[(v(!0),x(z,null,b(C(M),((e,t)=>(v(),x("TresMesh",{key:"".concat(t),properties:e.properties,renderOrder:1,material:P,pName:e.pName,pType:"block",onPointerEnter:F,onPointerLeave:J},[S("TresExtrudeGeometry",{args:[e.shape,N.value]},null,8,G)],40,D)))),128))]),S("TresGroup",null,[(v(!0),x(z,null,b(C(B),((e,o)=>(v(),I(C(t),{key:"".concat(o),renderOrder:o+1e4,pName:e.pName,"position-z":_,pType:"line",points:C(f)(e.points),"line-width":n.lineWidth,color:n.lineColor},null,8,["renderOrder","pName","points","line-width","color"])))),128))]),n.showTextIcons?(v(),x("TresGroup",{key:0,ref_key:"tGroupText",ref:w},[(v(!0),x(z,null,b(C(L),((e,t)=>(v(),x("TresGroup",{key:"".concat(t),pName:e.pName,pType:"text",position:[e.position[0],e.position[1],_]},[w.value&&0!==w.value.children.length?(v(),I(O,{key:0,parent:w.value.children[t],textContent:e.pName,fontColor:m.fontColor,invertAlpha:m.invertAlpha,fontSize:m.fontSize,zIndex:t},null,8,["parent","textContent","fontColor","invertAlpha","fontSize","zIndex"])):T("",!0),S("TresSprite",{"position-z":n.iconSize,scale:n.iconSize,renderOrder:t+11e3},[S("TresSpriteMaterial",{color:n.iconColor,blending:o,map:C(Q),transparent:"",depthWrite:!1,depthTest:""},null,8,E)],8,U)],8,R)))),128))],512)):T("",!0)],512))}};export{L as _};

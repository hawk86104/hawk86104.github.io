import{c8 as t,a3 as n,C as e,V as r}from"./three.8y0_KTxz1741594518249.js";import{a as o}from"./@tresjs.gjafZgVK1741594518249.js";import{R as c}from"./all.three.aalXMn071741594518249.js";import{d as a,b as i,a3 as s,a2 as u,o as l,H as f,N as p,m,u as v}from"./@vue.NRI7TcgI1741594518249.js";function d(t,n){const e=x();return(d=function(t,n){return e[t-=363]})(t,n)}!function(t,n){const e=d,r=x();for(;;)try{if(694915===parseInt(e(382))/1*(parseInt(e(388))/2)+parseInt(e(379))/3+parseInt(e(387))/4*(parseInt(e(398))/5)+parseInt(e(384))/6+parseInt(e(386))/7*(-parseInt(e(381))/8)+-parseInt(e(374))/9+parseInt(e(369))/10*(-parseInt(e(394))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=d,n=new RegExp(t(390)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(383));n.test(r+"chain")&&e[t(400)](r+t(399))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[d(363)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();h(void 0,(function(){const t=d;let n;try{n=Function(t(372)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(401)]=n.console||{},r=["log","warn",t(392),t(393),t(373),"table","trace"];for(let c=0;c<r[t(367)];c++){const n=h[t(375)].prototype[t(370)](h),o=r[c],a=e[o]||n;n[t(368)]=h[t(370)](h),n[t(391)]=a.toString[t(370)](a),e[o]=n}}))();function x(){const t=["exception","6486651pgARQG","constructor","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","void main() {","replace","3745413UOFsow","gger","10189128oWUKqN","463679uUyRuY","init","5897874pkuvgx","vertexShader","7REjGCq","51092DAtzDb","2FwICeE","fragmentShader","function *\\( *\\)","toString","info","error","267454lXoPvm","stateObject","while (true) {}","action","150lKtByu","input","test","console","counter","apply","#include <emissivemap_fragment>","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","string","length","__proto__","160KIlbEZ","bind","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","return (function() "];return(x=function(){return t})()}function y(t){function n(t){const e=d;if(typeof t===e(366))return function(t){}[e(375)](e(396))[e(363)](e(402));1!==(""+t/t)[e(367)]||t%20==0?function(){return!0}[e(375)]("debu"+e(380)).call(e(397)):function(){return!1}.constructor("debu"+e(380)).apply(e(395)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=S;!function(t,n){const e=S,r=M();for(;;)try{if(218444===parseInt(e(281))/1*(-parseInt(e(299))/2)+-parseInt(e(276))/3*(-parseInt(e(321))/4)+parseInt(e(330))/5*(-parseInt(e(288))/6)+parseInt(e(294))/7+-parseInt(e(293))/8+-parseInt(e(292))/9*(-parseInt(e(287))/10)+-parseInt(e(325))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=S,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(323),"i"),r=E(t(306));n[t(286)](r+t(296))&&e[t(286)](r+"input")?E():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(309)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();b(void 0,(function(){const t=S;let n;try{n=Function(t(285)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(303)]=n[t(303)]||{},r=[t(308),"warn","info",t(311),t(302),"table",t(312)];for(let c=0;c<r[t(327)];c++){const n=b.constructor[t(307)][t(277)](b),o=r[c],a=e[o]||n;n[t(331)]=b[t(277)](b),n[t(328)]=a[t(328)][t(277)](a),e[o]=n}}))();const I=["rotation-x"],C=["object",w(314)];function M(){const t=["add","primitive","3ZXQJrw","bind","TresGroup","renderTargetUniform","TresMeshStandardMaterial","167983uVXgnv","mirror","assign","channel","return (function() ","test","140wefKsG","42rMMBGN","gger","TresPlaneGeometry","call","209727FzTRuS","656928HdmpvG","845733uQuaec","onBeforeCompile","chain","reflectMap","while (true) {}","2xTQSDn","repeat","value","exception","console","aoMap","tmRef","init","prototype","log","apply","update","error","trace","attributes","visible","tpgRef","#444","uniforms","TresMesh","constructor","tmsmRef","1509536SGuFHc","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","onBeforeRender","920546jeUPLC","textureMatrix","length","toString","textureMatrixUniform","194440VCuqDs","__proto__","mixStrength","stateObject","counter"];return(M=function(){return t})()}function S(t,n){const e=M();return(S=function(t,n){return e[t-=271]})(t,n)}const j=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const g=w;let h,x;const y=a,_=new t(9.5,10),b=i(),M=i(),S=i(),j=new c,E={mirror:{value:y[g(282)]},mixStrength:{value:y[g(271)]}},R=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var z=0;z<3;z++)R[z].wrapS=n,R[z].wrapT=n,R[z][g(300)].set(16,16);const T={color:new e(g(316)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},G=t=>{const n=g;t.uniforms[n(297)]=j[n(279)],t[n(317)][n(326)]=j[n(329)],t[n(317)]=Object[n(283)](t[n(317)],E),(t=>{const n=d;t[n(385)]=t[n(385)][n(378)](n(377),n(376)),t[n(385)]=t[n(385)][n(378)]("#include <project_vertex>",n(371))})(t),(t=>{const n=d;t[n(389)]=t.fragmentShader.replace(n(377),n(365)),t[n(389)]=t[n(389)][n(378)](n(364),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=g;b[t(301)]&&(b[t(301)][t(313)].uv1=b[t(301)][t(313)].uv),S.value&&(S[t(301)][t(304)][t(284)]=1,S.value[t(295)]=G),M[t(301)]&&(M[t(301)][t(274)](j),M[t(301)][t(324)]=(n,e,r)=>{j[t(310)](n,e,r)}),y[t(322)]&&S.value&&(S[t(301)].color=new e(y[t(322)]))})),(t,n)=>{const e=g;return l(),f(e(278),null,[p(e(318),{ref_key:e(305),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(290),{ref_key:e(315),ref:b,args:[10,10]},null,512),p(e(280),m({ref_key:e(320),ref:S},T),null,16)],8,I),p(e(275),{object:v(_),visible:t.showGridHelper},null,8,C)])}}});function E(t){function n(t){const e=S;if("string"==typeof t)return function(t){}[e(319)](e(298)).apply(e(273));1!==(""+t/t).length||t%20==0?function(){return!0}[e(319)]("debu"+e(289))[e(291)]("action"):function(){return!1}[e(319)]("debu"+e(289)).apply(e(272)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

import{importShared as e}from"./3d-tiles-renderer.qyEDeaaW1769484739493.js";import{useTres as o,useLoop as t}from"./index.CuW8EyFk1769484739493.js";import{pt as a,en as n,controlsEvents as l,showLocation as r}from"./informationDiv.CwBj6gkV1769484739493.js";import{Tween as p}from"./tween.esm.DkV9_dcO1769484739493.js";const{defineComponent:c}=await e("vue"),i=c({__name:"flyTo",props:{map:{}},setup(e,{expose:a}){const n=e,{camera:l,controls:r}=o();let c=[];const{onBeforeRender:i}=t();return i(()=>{c&&c[0]?.update()}),a({flyToGeo:(e,o)=>{const t=e=>n.map.localToWorld(n.map.geo2pos(e));((e,o)=>{r.value&&r.value.target.copy(o);const t=l.value.position;c[0]=new p(t).to(e).start()})(t(e),t(o))},goToGeo:(e,o)=>{const t=n.map.localToWorld(n.map.geo2pos(o)),a=n.map.localToWorld(n.map.geo2pos(e));l.value.position.copy(a),r.value.target.copy(t),r.value.dispatchEvent({type:"change"})}}),(e,o)=>null}}),{defineComponent:m}=await e("vue"),{createElementVNode:s,unref:u,createVNode:v,Fragment:f,openBlock:d,createElementBlock:w}=await e("vue"),y=["object"],{watch:g,ref:T}=await e("vue"),h=await e("three"),j=m({__name:"mapBoxShow",setup(e){const t=new a({imgSource:[new n({style:"6"}),new n({style:"8"})],lon0:90,minLevel:2,maxLevel:20});t.rotateX(-Math.PI/2);const p=new h.Vector3(110,30,0),c=new h.Vector3(110,0,1e7),m=t.localToWorld(t.geo2map(p)),j=t.localToWorld(t.geo2map(c)),V=T(),{camera:_,controls:x,scene:W,renderer:k}=o();_.value&&_.value.position.copy(j),g(()=>x.value,e=>{e&&(e.target.copy(m),l(e,_.value,W.value))}),g(()=>V.value,e=>{e&&e.target.position.copy(m)});const B=T();return g(()=>B.value,e=>{if(e){const o=new h.Vector3(118.724693,32.00741,9655),t=new h.Vector3(118.724419,32.010354,0);setTimeout(()=>{e.flyToGeo(o,t)},500)}}),r(_.value,k.domElement,t),(e,o)=>(d(),w(f,null,[s("TresDirectionalLight",{ref_key:"tdLight",ref:V,position:[0,2e3,1e3],intensity:1},null,512),s("primitive",{object:u(t)},null,8,y),v(i,{map:u(t),ref_key:"flyToRef",ref:B},null,8,["map"])],64))}});export{j as _sfc_main};

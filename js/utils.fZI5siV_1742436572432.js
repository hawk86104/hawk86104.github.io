import"./@fesjs.40Mt4LlK1742436572432.js";import{_ as t}from"./jszip.p9pp11zp1742436572432.js";import{F as n}from"./file-saver.Afq396Iq1742436572432.js";import{_ as e,aF as s}from"./three.RUAk_tvU1742436572432.js";const o=d;!function(t,n){const e=d,s=c();for(;;)try{if(477128===parseInt(e(308))/1*(parseInt(e(241))/2)+-parseInt(e(235))/3*(-parseInt(e(260))/4)+-parseInt(e(321))/5+parseInt(e(225))/6*(-parseInt(e(277))/7)+-parseInt(e(320))/8*(parseInt(e(226))/9)+parseInt(e(256))/10+parseInt(e(228))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[d(222)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=d,n=new RegExp(t(223)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=b("init");n[t(232)](s+t(305))&&e[t(232)](s+"input")?b():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[d(222)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function c(){const t=["folder","name","then","GIF","counter","uuid","FileLoader","string","warn","6562997rIjPns","get","push","enabled","pop","manager","type","load","length","bind","image/jpeg","Loader","info","url:images/","generateAsync","debu","data","forEach","BufferGeometry","blob","image/gif","catch","data:image/PNG;base64,","exception","images","toString","onloadend","parse","chain",".json","geometries","17863NCatwk","非标准文件：不存在 app.json","file","application/octet-stream","toLowerCase","log","files","startsWith","data:image/GIF;base64,","constructor","split","gger","473384bJHXUW","3331820XWJYGC","apply","function *\\( *\\)","stringify","6wjqXOj","45yTVfgS","onerror","486948CcUjJh","readAsDataURL","data:image/gif;base64,","slice","test","prototype","data:image/WEBP;base64,","111oBhzPG","setResponseType","result",'{}.constructor("return this")( )',"trace","WEBP","88ozGQSq","loadAsync","endsWith","image/webp",";base64,","data:","url","toUpperCase","scene","Cache","data:image/JPEG;base64,","app.json","console","substring","json","8475730xFaeLB","error","data:image/webp;base64,","image/png","75580QQBbEz","data:image/","while (true) {}","JPEG","return (function() ","url:","async","config.zip"];return(c=function(){return t})()}async function i(t){const n=o,s=new(e[n(274)]);return new Promise(((e,o)=>{const a=n;s.load(t,(t=>e(JSON[a(304)](t))),void 0,(t=>o(t)))}))}r(void 0,(function(){const t=d;let n;try{n=Function(t(264)+t(238)+");")()}catch(o){n=window}const e=n[t(253)]=n[t(253)]||{},s=[t(313),t(276),t(289),t(257),t(300),"table",t(239)];for(let a=0;a<s[t(285)];a++){const n=r[t(317)][t(233)][t(286)](r),o=s[a],c=e[o]||n;n.__proto__=r[t(286)](r),n[t(302)]=c.toString.bind(c),e[o]=n}}))(),e[o(250)][o(280)]=!0;class u extends e[o(288)]{constructor(t){super(t)}[o(284)](t,n,e,a){const r=o,c=new s(this[r(282)]);c[r(236)](r(255)),c[r(284)](t,(t=>n&&n(t)),e,a)}}async function l(t){const n=o,s=new(e[n(274)]);return new Promise(((e,a)=>{const r=n;s[r(236)](r(296)),s.load(t,(n=>{const s=r,c=new FileReader;c[s(303)]=()=>{const n=s,a=function(t){const n=o,e=t[n(318)](".")[n(281)]()[n(312)]();return{jpg:n(287),jpeg:n(287),png:n(259),gif:n(297),bmp:"image/bmp",webp:n(244)}[e]||n(311)}(t),r=c[n(237)][n(318)](",")[1];e(n(246)+a+n(245)+r)},c[s(227)]=t=>{a(t)},c.readAsDataURL(n)}),void 0,(t=>a(t)))}))}class p extends e[o(288)]{constructor(t){super(t)}[o(284)](n,s,a,r){const c=o,i=new(e[c(274)])(this.manager);i[c(236)](c(296)),i[c(284)](n,(async n=>{const e=c;try{const o=await t[e(242)](n);s&&s(o)}catch(o){r&&r(o)}}),a,r)}}const f=t=>{const n=o,e=t[n(254)](0,15),s=n(251),a=n(299),r=n(230),c=n(316),i=n(258),u=n(234);return"data:image/jpeg;base64,".startsWith(e)||s[n(315)](e)?n(263):"data:image/png;base64,"[n(315)](e)||a[n(315)](e)?"PNG":r[n(315)](e)||c[n(315)](e)?n(271):i[n(315)](e||u.startsWith(e))?n(240):"Unknown"},g=e=>{const s=o,a=[];e[s(249)][s(307)]&&e.scene[s(307)][s(294)]((t=>{const n=s;t.type===n(295)&&(a[n(279)]({uuid:t[n(273)],data:t[n(293)]}),t.data="url:geometries/"+t[n(273)]+".json")}));const r=[];e[s(249)].images&&e.scene[s(301)].forEach((t=>{const n=s;t[n(247)]&&(r[n(279)]({uuid:t[n(273)],url:t[n(247)]}),t[n(247)][n(283)]?t[n(247)]="url:images/"+t[n(273)]+"."+t.url[n(283)]+n(306):t[n(247)]=n(290)+t[n(273)]+"."+f(t[n(247)]))}));const c=new t;if(a[s(285)]){const t=c[s(268)](s(307));a[s(294)]((n=>{const e=s;t[e(310)](n[e(273)]+e(306),JSON[e(224)](n[e(293)]))}))}if(r.length){const t=c.folder(s(301));r.forEach((n=>{const e=s;n[e(247)][e(283)]?t[e(310)](n.uuid+"."+n[e(247)][e(283)]+e(306),JSON[e(224)](n[e(247)])):t[e(310)](n[e(273)]+"."+f(n[e(247)]),n[e(247)][e(318)](e(245))[e(281)](),{base64:!0})}))}const i=JSON[s(224)](e);return c[s(310)](s(252),i),c[s(291)]({type:s(296)})[s(270)]((t=>{const e=s;n.saveAs(t,e(267))}))},m=(t,n,e)=>{const s=o;t[s(307)]<=0&&t[s(301)]<=0&&e(n)};function d(t,n){const e=c();return(d=function(t,n){return e[t-=222]})(t,n)}const h=(n,e)=>{const s=o;let a=null;return t.loadAsync(n)[s(270)]((t=>{const n=s;t.files[n(252)]?t[n(314)][n(252)][n(266)]("string").then((s=>{var r,c;const i=n;a=JSON[i(304)](s);const u=(t=>{var n,e;const s=o,a={geometries:0,images:0};return null==(n=t[s(249)].geometries)||n[s(294)]((t=>{const n=s;t[n(293)].startsWith(n(265))&&a.geometries++})),null==(e=t[s(249)][s(301)])||e[s(294)]((t=>{const n=s;t[n(247)][n(315)](n(265))&&a.images++})),a})(a);m(u,a,e),null==(r=a[i(249)].geometries)||r.forEach((n=>{const s=i;n[s(293)][s(315)](s(265))&&t[s(314)][n[s(293)].slice(4)].async(s(275)).then((t=>{const o=s;n.data=JSON[o(304)](t),u[o(307)]--,m(u,a,e)}))})),null==(c=a[i(249)][i(301)])||c[i(294)]((n=>{const s=i;if(n.url[s(315)]("url:")){const o=n[s(247)][s(231)](4);o[s(243)](s(306))?t[s(314)][o][s(266)](s(275))[s(270)]((t=>{const o=s;n[o(247)]=JSON[o(304)](t),u.images--,m(u,a,e)})):t[s(314)][o][s(266)]("base64").then((t=>{const r=s,c=o[r(318)]("."),i=c[c.length-1][r(248)]();n.url=r(261)+i+r(245)+t,u.images--,m(u,a,e)}))}}))})):console.error(n(309))}),(t=>{const e=s;console[e(257)](n[e(269)]+": "+t.message)})),a};function b(t){function n(t){const e=d;if("string"==typeof t)return function(t){}[e(317)](e(262))[e(222)](e(272));1!==(""+t/t)[e(285)]||t%20==0?function(){return!0}[e(317)](e(292)+e(319)).call("action"):function(){return!1}[e(317)](e(292)+e(319)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{u as J,p as Z,l as a,g as e,f as g,h as i,i as l};

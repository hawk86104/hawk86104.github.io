var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{aw as s,o as u,r as l,aP as f,aQ as p,aR as d,H as h,an as v,ao as m,z as g,ba as _,C as y,Z as I,W as x,l as b,m as S,n as w,y as M,f as E,V as R,g as A,bG as T,a5 as D,k as P,b9 as z,j as O,bw as C,d as k,a9 as F,B,a as j,aO as U,e as N,M as L,aj as H,a7 as Z,c0 as G,c1 as W,h as $}from"./three.BsQyBKrV1719803971187.js";import{a as V,$ as K,r as Y}from"./@tresjs.rn1P_YDI1719803971187.js";import{R as q}from"./three-stdlib.vwixL4nl1719803971187.js";import{Z as X,b as J,a as Q,w as nn,u as tn,d as en,U as rn,a3 as on,a0 as an,o as cn,D as sn,G as un,I as ln,a7 as fn,a2 as pn,f as dn,J as hn,a8 as vn,r as mn,M as gn,X as _n,q as yn,t as In,F as xn,a5 as bn,m as Sn}from"./@vue.CpOXM7bB1719803971187.js";import{M as wn,a as Mn,C as En}from"./@pmndrs.aJsI2n6-1719803971187.js";import{o as Rn}from"./object-hash.4kGk0kP-1719803971187.js";function An(n,t){var e=Tn();return(An=function(n,t){return e[n-=103]})(n,t)}function Tn(){var n=["traverse","table","3492MykRgI","75427YWgcEf",'{}.constructor("return this")( )',"518ARhIML","geometry","apply","48720uvJqKN","198171aemiyJ","532ULgiHD","material","call","counter","test","virtualScene","stateObject","gger","toString","2095dnxRkK","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","32dzEcwv","console","while (true) {}","9433EEXNcg","constructor","info","string","return (function() ","exception","warn","4305855rDaDit","input","debu","dispose","130LdsPGV","destructor","map","length","bind","action","6630972OygaNH"];return(Tn=function(){return n})()}var Dn=An;!function(n,t){for(var e=An,r=Tn();;)try{if(804674===-parseInt(e(137))/1*(-parseInt(e(134))/2)+parseInt(e(144))/3+parseInt(e(123))/4*(-parseInt(e(132))/5)+parseInt(e(112))/6+parseInt(e(118))/7*(parseInt(e(121))/8)+-parseInt(e(122))/9*(parseInt(e(106))/10)+parseInt(e(116))/11*(-parseInt(e(115))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(120)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pn(this,(function(){var n=An,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(133),"i"),r=kn("init");t[n(127)](r+"chain")&&e[n(127)](r+n(103))?kn():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(120)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zn(void 0,(function(){var n,t=An;try{n=Function(t(141)+t(117)+");")()}catch(s){n=window}for(var e=n.console=n[t(135)]||{},r=["log",t(143),t(139),"error",t(142),t(114),"trace"],o=0;o<r[t(109)];o++){var i=zn[t(138)].prototype[t(110)](zn),a=r[o],c=e[a]||i;i.__proto__=zn.bind(zn),i.toString=c[t(131)].bind(c),e[a]=i}}))();class On extends s{constructor(){var n=An;super(),this[n(128)]=null,this[n(128)]=new u}add(...n){return this[An(128)].add(...n),this}[Dn(107)](){var n=Dn;this.virtualScene[n(113)]((t=>{var e=n;t instanceof l&&(t[e(119)][e(105)](),t[e(124)][e(105)](),t.material[e(108)]&&t[e(124)].map[e(105)](),this[e(128)].remove(t))})),this[n(128)]=null}}const Cn=On;function kn(n){function t(n){var e=An;if(typeof n===e(140))return function(n){}.constructor(e(136))[e(120)](e(126));1!==(""+n/n).length||n%20==0?function(){return!0}[e(138)](e(104)+e(130))[e(125)](e(111)):function(){return!1}[e(138)](e(104)+e(130)).apply(e(129)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Bn;function Bn(n,t){const e=Hn();return(Bn=function(n,t){return e[n-=454]})(n,t)}!function(n,t){const e=Bn,r=Hn();for(;;)try{if(886177===-parseInt(e(477))/1*(-parseInt(e(456))/2)+parseInt(e(496))/3*(parseInt(e(457))/4)+-parseInt(e(472))/5+parseInt(e(469))/6*(parseInt(e(464))/7)+-parseInt(e(497))/8*(parseInt(e(458))/9)+parseInt(e(460))/10*(-parseInt(e(487))/11)+parseInt(e(475))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Bn,t=new RegExp(n(489)),e=new RegExp(n(499),"i"),r=Ln(n(459));t[n(488)](r+n(493))&&e[n(488)](r+n(467))?Ln():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=Bn,t=function(){const n=Bn;let t;try{t=Function(n(484)+n(462)+");")()}catch(e){t=window}return t}(),e=t[n(490)]=t[n(490)]||{},r=["log",n(480),"info",n(485),n(461),n(495),n(479)];for(let o=0;o<r[n(468)];o++){const t=Un[n(478)][n(463)][n(466)](Un),i=r[o],a=e[i]||t;t[n(471)]=Un[n(466)](Un),t.toString=a[n(492)][n(466)](a),e[i]=t}}))();const Nn={sunset:Fn(454),studio:"studio/poly_haven_studio_1k.hdr",city:Fn(494),umbrellas:Fn(470),night:"outdoor/satara_night_1k.hdr",forest:Fn(482),snow:Fn(465),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Fn(491),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:"city/modern_buildings_2_1k.hdr",shangai:Fn(486)};function Ln(n){function t(n){const e=Bn;if(typeof n===e(455))return function(n){}[e(478)](e(483))[e(500)](e(481));1!==(""+n/n)[e(468)]||n%20==0?function(){return!0}[e(478)](e(474)+"gger")[e(476)](e(498)):function(){return!1}.constructor(e(474)+"gger").apply(e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Hn(){const n=["venice/venice_sunset_1k.hdr","string","5122NZbmkT","96388PMOrtd","144SJewfi","init","40370zvSvGA","exception",'{}.constructor("return this")( )',"prototype","707jcMcUk","outdoor/snowy_forest_path_01_1k.hdr","bind","input","length","37722FUEmrC","outdoor/outdoor_umbrellas_1k.hdr","__proto__","3558570CUYJQT","stateObject","debu","21150072QyEtcq","call","169uXuMRI","constructor","trace","warn","counter","outood/mossy_forest_1k.hdr","while (true) {}","return (function() ","error","city/shanghai_bund_1k.hdr","759JYLxcn","test","function *\\( *\\)","console","indoor/small_hangar_01_1k.hdr","toString","chain","city/canary_wharf_1k.hdr","table","42xMhotk","645608ZaybHA","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply"];return(Hn=function(){return n})()}const Zn=Vn;!function(n,t){const e=Vn,r=Wn();for(;;)try{if(800966===parseInt(e(276))/1+-parseInt(e(281))/2+-parseInt(e(293))/3*(-parseInt(e(297))/4)+-parseInt(e(318))/5*(parseInt(e(320))/6)+parseInt(e(295))/7*(-parseInt(e(298))/8)+-parseInt(e(310))/9*(-parseInt(e(315))/10)+-parseInt(e(317))/11*(parseInt(e(305))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(316)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["length","248PJDLxK","853160jcLuWv","gger","value","keys","bind","exception","constructor","60oQijVS","log","return (function() ","prototype","setPath","11824236zfHrHG","while (true) {}","error","table","Preset must be one of: ","10NdylWy","apply","1556467PTZGKQ","2956700BlhOey","__proto__","6radkbh","background","debu",'{}.constructor("return this")( )',"https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","1184787XYBVyJ","isArray","chain","toString","info","1429022uAIhbu","mapping","input","backgroundBlurriness","isColor","environment","action","Failed to load environment map: ","stateObject","function *\\( *\\)","string","test","72039fyWVkT","warn","77FZrSEg"];return(Wn=function(){return n})()}!function(){Gn(this,(function(){const n=Vn,t=new RegExp(n(290)),e=new RegExp(n(325),"i"),r=Yn("init");t[n(292)](r+n(278))&&e[n(292)](r+n(283))?Yn():r("0")}))()}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(316)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Wn();return(Vn=function(n,t){return e[n-=276]})(n,t)}$n(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(307)+n(323)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(306),n(294),n(280),n(312),n(303),n(313),n(326)];for(let o=0;o<r.length;o++){const t=$n.constructor[n(308)][n(302)]($n),i=r[o],a=e[i]||t;t[n(319)]=$n[n(302)]($n),t.toString=a[n(279)][n(302)](a),e[i]=t}}))();const Kn=Zn(324);function Yn(n){function t(n){const e=Vn;if(typeof n===e(291))return function(n){}[e(304)](e(311)).apply("counter");1!==(""+n/n)[e(296)]||n%20==0?function(){return!0}[e(304)](e(322)+e(299)).call(e(287)):function(){return!1}.constructor(e(322)+"gger")[e(316)](e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=nt;!function(n,t){const e=nt,r=Qn();for(;;)try{if(736498===parseInt(e(398))/1*(-parseInt(e(385))/2)+-parseInt(e(408))/3*(parseInt(e(371))/4)+parseInt(e(383))/5*(parseInt(e(377))/6)+-parseInt(e(409))/7+parseInt(e(387))/8*(parseInt(e(404))/9)+-parseInt(e(381))/10+parseInt(e(388))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=nt,t=new RegExp(n(389)),e=new RegExp(n(415),"i"),r=et(n(376));t[n(399)](r+n(390))&&e[n(399)](r+"input")?et():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(){const n=["while (true) {}","constructor","log","useDefaultScene","console","texture","type","destructor","TresEnvSence","frames","info","338932ffPFIR","exception","bind","far","debu","init","3450vKEcJd","background","default","action","8712720NAtdso","symbol","5555DrzRkW","__proto__","2rKYYTJ","string","15992SnCcxT","28316926iHaamq","function *\\( *\\)","chain","call","near","generateMipmaps","length","prototype","component","resolution","748573GTXWOk","test","$slots","return (function() ","gger","value","3231pcIXLK","toString","isArray","apply","15qJjrwx","8055068fejBOk","update","virtualScene","trace","dispose","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error"];return(Qn=function(){return n})()}function nt(n,t){const e=Qn();return(nt=function(n,t){return e[n-=369]})(n,t)}Jn(void 0,(function(){const n=nt,t=function(){const n=nt;let t;try{t=Function(n(401)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(421)]=t[n(421)]||{},r=[n(419),"warn",n(370),n(416),n(372),"table",n(412)];for(let o=0;o<r.length;o++){const t=Jn[n(418)][n(395)].bind(Jn),i=r[o],a=e[i]||t;t[n(384)]=Jn[n(373)](Jn),t[n(405)]=a[n(405)].bind(a),e[i]=t}}))();const tt=en({__name:qn(396),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=J(null),I=null;const x=J(null);rn((()=>{var n,t;const e=nt;null==(n=x.value)||n[e(424)](),null==(t=y[e(403)])||t[e(413)]()}));const{onBeforeLoop:b}=Y();let S=1;b((()=>{const n=nt;I&&x[n(403)]&&y[n(403)]&&(i[n(369)]===1/0||S<i.frames)&&(i.useDefaultScene?I[n(410)](s[n(403)],u.value):I[n(410)](s[n(403)],fn(x[n(403)][n(411)])),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Zn,{scene:r}=V(),{preset:o,blur:i,files:a=[],path:c="",background:s}=X(n),u=J(),l=Q((()=>Array[e(277)](a.value))),h=Q((()=>l[e(300)]?f:q)),v=J(null);return nn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(300)][r(296)]>0&&!o[r(300)]){try{v[r(300)]=await K(tn(h),l[r(300)]?[tn(n)]:tn(n),(n=>{t[r(300)]&&n.setPath(tn(t))}))}catch(i){throw new Error(r(288)+i)}v[r(300)]&&(u[r(300)]=l.value?v[r(300)][0]:v[r(300)],u[r(300)].mapping=l[r(300)]?p:d)}}),{immediate:!0}),nn((()=>u[e(300)]),(n=>{const t=e;r[t(300)]&&(r.value[t(286)]=n)}),{immediate:!0}),nn((()=>[s[e(300)],u.value]),(([n,o])=>{const i=e;if(r[i(300)]){let e=(null==t?void 0:t[i(300)])?t.value.texture:o,a=r[i(300)][i(321)];!(null==a?void 0:a[i(285)])&&(a=void 0),r[i(300)][i(321)]=n?e:a}}),{immediate:!0}),nn((()=>null==i?void 0:i[e(300)]),(n=>{const t=e;r.value&&(r[t(300)][t(284)]=n)}),{immediate:!0}),nn(o,(async n=>{const t=e;if(n&&n in Nn){const e=Kn,o=Nn[n];try{v[t(300)]=await K(q,o,(n=>{e&&n[t(309)](e)}))}catch(r){throw new Error(t(288)+r)}v[t(300)]&&(u[t(300)]=v[t(300)],u[t(300)][t(282)]=d)}else if(n&&!(n in Nn))throw new Error(t(314)+Object[t(301)](Nn).join(", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(422)],M=n=>{const t=e;n?(u[t(403)].environment=n.texture,i.background&&(u[t(403)].background=n.texture)):(u[t(403)].environment=w[t(403)],i[t(378)]&&(u[t(403)].background=w.value))};return nn(w,(n=>{const t=e;y.value&&M(y[t(403)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn}),nn((()=>an()[e(379)]),(n=>{var t,r,o;const a=e;if(n&&(!y[a(403)]||y.value.texture[a(423)]!==h)&&(l=n(),Array[a(406)](l)&&l[a(394)]>0&&typeof(null==(t=l[0])?void 0:t[a(423)])!==a(382)))return null==(r=y[a(403)])||r[a(413)](),y[a(403)]=new v(i[a(397)]),y.value.texture[a(423)]=h,I=new m(i.near,i.far,y[a(403)]),void M(y[a(403)]);null==(o=y.value)||o[a(413)](),y[a(403)]=null,M(null)}),{immediate:!0,deep:!0}),a[e(403)]=w,nn((()=>i[e(420)]),(n=>{var t;const r=e;n&&(!y[r(403)]||y[r(403)][r(422)].type!==g)&&(null==(t=y[r(403)])||t.dispose(),y[r(403)]=new v(i[r(397)]),I=new m(i[r(392)],i[r(374)],y[r(403)]),y[r(403)][r(422)][r(423)]=g,y[r(403)].texture[r(393)]=!1,y[r(403)][r(422)].minFilter=_,y[r(403)][r(422)].magFilter=_,M(y[r(403)]))}),{immediate:!0}),(n,t)=>{const r=e;return tn(y)?(cn(),sn(r(425),{key:0,ref_key:"envSence",ref:x},[un(n[r(400)],r(379))],512)):ln("",!0)}}});function et(n){function t(n){const e=nt;if(typeof n===e(386))return function(n){}[e(418)](e(417))[e(407)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(375)+e(402))[e(391)](e(380)):function(){return!1}[e(418)]("debu"+e(402)).apply(e(414)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=at;!function(n,t){const e=at,r=it();for(;;)try{if(275734===parseInt(e(374))/1+-parseInt(e(392))/2+parseInt(e(372))/3*(parseInt(e(373))/4)+-parseInt(e(377))/5*(parseInt(e(351))/6)+parseInt(e(379))/7+parseInt(e(388))/8*(-parseInt(e(382))/9)+parseInt(e(357))/10*(parseInt(e(370))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(375)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function it(){const n=["806695YvunhE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1855819NZHpOV","action","map","26289uWsPdM","table","constructor","circle","return (function() ","string","1392jzPKLT","rect","toneMapped","from","389806GkPtta","exception","TresMesh","prototype","12VdZiQG","console","needsUpdate","length","init","while (true) {}","130xOvMqM","call","debu","color","error","chain","TresRingGeometry","value","stateObject","gger","TresMeshBasicMaterial","intensity","bind","637010zYiDoW","log","3SQRXUI","823712AKPcoD","77694HFXRuo","apply","side"];return(it=function(){return n})()}function at(n,t){const e=it();return(at=function(n,t){return e[n-=351]})(n,t)}!function(){ot(this,(function(){const n=at,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(378),"i"),r=dt(n(355));t.test(r+n(362))&&e.test(r+"input")?dt():r("0")}))()}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(375)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ct(void 0,(function(){const n=at;let t;try{t=Function(n(386)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(352)]=t[n(352)]||{},r=[n(371),"warn","info",n(361),n(393),n(383),"trace"];for(let i=0;i<r[n(354)];i++){const t=ct[n(384)][n(395)][n(369)](ct),o=r[i],a=e[o]||t;t.__proto__=ct.bind(ct),t.toString=a.toString[n(369)](a),e[o]=t}}))();const st={key:0,args:[0,1,64]},ut={key:1,args:[.5,1,64]},lt={key:2},ft=[rt(390),rt(381),rt(376),rt(360)],pt=en({__name:"index",props:{args:{default:null},from:{default:rt(389)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return pn((()=>{const n=at;e[n(364)]&&(e[n(364)].color.multiplyScalar(t[n(368)]),e[n(364)][n(353)]=!0)})),(n,r)=>{const o=at;return cn(),sn(o(394),null,[t[o(391)]===o(385)?(cn(),sn(o(363),st)):"ring"===t[o(391)]?(cn(),sn("TresRingGeometry",ut)):t[o(391)]===o(389)?(cn(),sn("TresPlaneGeometry",lt)):(cn(),dn(t[o(391)],{key:3,args:t})),hn(o(367),{ref_key:"material",ref:e,toneMapped:n[o(390)],map:n[o(381)],side:tn(I),color:n[o(360)]},null,8,ft)])}}});function dt(n){function t(n){const e=at;if(typeof n===e(387))return function(n){}[e(384)](e(356))[e(375)]("counter");1!==(""+n/n)[e(354)]||n%20==0?function(){return!0}.constructor(e(359)+e(366))[e(358)](e(380)):function(){return!1}[e(384)]("debu"+e(366))[e(375)](e(365)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ht(n,t){const e=_t();return(ht=function(n,t){return e[n-=228]})(n,t)}!function(n,t){const e=ht,r=_t();for(;;)try{if(889865===parseInt(e(254))/1+parseInt(e(249))/2+parseInt(e(248))/3+parseInt(e(253))/4+-parseInt(e(247))/5*(parseInt(e(250))/6)+parseInt(e(236))/7*(-parseInt(e(261))/8)+-parseInt(e(255))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){vt(this,(function(){const n=ht,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(233),"i"),r=yt(n(245));t[n(266)](r+n(257))&&e[n(266)](r+n(262))?yt():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function gt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?X(n):X(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=V();return pn((()=>{var n;const a=ht;null==(n=t[a(232)])||n[a(256)](),t[a(232)]=new x((null==r?void 0:r[a(232)])||p.width[a(232)],(null==e?void 0:e[a(232)])||p[a(238)][a(232)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(232)])),(null==i?void 0:i[a(232)])&&(t[a(232)][a(264)]=new S((null==r?void 0:r[a(232)])||p[a(271)][a(232)],(null==e?void 0:e[a(232)])||p[a(238)][a(232)],w))})),s((()=>{const n=ht;(null==a?void 0:a[n(232)])&&(l.value[n(243)](t[n(232)]),l[n(232)][n(251)](),l[n(232)][n(272)](f[n(232)],u[n(232)]),l[n(232)][n(243)](null))})),gn((()=>{var n;const e=ht;null==(n=t[e(232)])||n[e(256)]()})),t}function _t(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","warn","217NpJznO","debu","height","table","toString","length","bind","setRenderTarget","while (true) {}","init","gger","4038265KOvQPD","3915951TmpKEu","2586144HkKitZ","6InKJry","clear","call","4517776FFZJYv","31458syajTM","10906893vwBGFN","dispose","chain","exception","info","counter","219328oNQRBh","input",'{}.constructor("return this")( )',"depthTexture","return (function() ","test","action","console","constructor","error","width","render","string","stateObject","apply","trace","__proto__","value"];return(_t=function(){return n})()}function yt(n){function t(n){const e=ht;if(typeof n===e(273))return function(n){}[e(269)](e(244))[e(229)](e(260));1!==(""+n/n).length||n%20==0?function(){return!0}[e(269)](e(237)+e(246))[e(252)](e(267)):function(){return!1}[e(269)](e(237)+"gger")[e(229)](e(228)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function It(){const n=["isMesh","side",'{}.constructor("return this")( )',"traverse","render","envMapIntensity","chain","setRenderTarget","uuid","bind","toString","call","counter","fboResolution","test","debu","apply","action","stateObject","toneMapping","material","string","exception","TresMeshTransmissionMaterial","constructor","warn","value","input","init","thickness","table","493602fxkYsw","length","info","2EjOOyX","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshTransmissionMaterialClass","index","prototype","__proto__","667956oyQoex","log","5nECJvI","while (true) {}","2489032essQff","background","185927JmDSHN","119241MXgGlO","buffer","backside","gger","time","2179121edxXfJ","1068756SvLwTG","texture"];return(It=function(){return n})()}mt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function(n(265)+n(263)+");")()}catch(e){t=window}return t}(),e=t[n(268)]=t[n(268)]||{},r=["log",n(235),n(259),n(270),n(258),n(239),n(230)];for(let o=0;o<r[n(241)];o++){const t=mt[n(269)][n(234)][n(242)](mt),i=r[o],a=e[i]||t;t[n(231)]=mt[n(242)](mt),t.toString=a[n(240)][n(242)](a),e[i]=t}}))();const xt=bt;function bt(n,t){const e=It();return(bt=function(n,t){return e[n-=252]})(n,t)}!function(n,t){const e=bt,r=It();for(;;)try{if(207673===-parseInt(e(269))/1*(-parseInt(e(256))/2)+parseInt(e(253))/3+-parseInt(e(276))/4+-parseInt(e(265))/5*(-parseInt(e(263))/6)+-parseInt(e(275))/7+parseInt(e(267))/8+parseInt(e(270))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){St(this,(function(){const n=bt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(258),"i"),r=Rt(n(306));t[n(292)](r+n(284))&&e.test(r+n(305))?Rt():r("0")}))()}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();wt(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function("return (function() "+n(280)+");")()}catch(e){t=window}return t}(),e=t[n(257)]=t[n(257)]||{},r=[n(264),n(303),n(255),"error",n(300),n(252),"trace"];for(let o=0;o<r[n(254)];o++){const t=wt.constructor[n(261)][n(287)](wt),i=r[o],a=e[i]||t;t[n(262)]=wt.bind(wt),t[n(288)]=a[n(288)][n(287)](a),e[i]=t}}))();const Mt=[xt(271),xt(279)],Et=en({__name:xt(260),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=Y(),p=gt({width:u[e(291)],height:u[e(291)],isLoop:!1}),d=gt({width:u[e(291)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return yn((async()=>{const n=e;await In(),s[n(304)]=function(n,t){const e=bt;let r;return n[e(281)]((n=>{const o=e;n[o(278)]&&n[o(298)]&&n[o(298)][o(286)]===t&&(r=n)})),r}(i[n(304)],r[n(304)].uuid)})),f((({elapsed:n})=>{const t=e;r.value[t(274)]=n,r[t(304)][t(271)]===d[t(304)][t(277)]&&s[t(304)]&&(m=a[t(304)][t(297)],h=i[t(304)][t(268)],v=r[t(304)][t(283)],g=s[t(304)].material[t(279)],s.value.material=l,u[t(272)]&&(a.value.setRenderTarget(p[t(304)]),a[t(304)].render(i[t(304)],c[t(304)]),s[t(304)][t(298)]=r[t(304)],s[t(304)][t(298)][t(307)]=u.backsideThickness,s[t(304)].material[t(271)]=p[t(304)].texture,s[t(304)][t(298)][t(279)]=M,s[t(304)][t(298)][t(283)]=0),a[t(304)][t(285)](d[t(304)]),a.value[t(282)](i.value,c[t(304)]),s[t(304)][t(298)][t(271)]=d[t(304)][t(277)],s.value.material=r[t(304)],s.value[t(298)][t(307)]=u[t(307)],s[t(304)][t(298)][t(279)]=g,s[t(304)][t(298)].envMapIntensity=v,i[t(304)].background=h,a[t(304)][t(285)](null),a[t(304)][t(297)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return cn(),sn(o(301),{ref_key:o(259),ref:r,buffer:tn(d)[o(277)],side:tn(I)},null,8,Mt)}}});function Rt(n){function t(n){const e=bt;if(typeof n===e(299))return function(n){}[e(302)](e(266)).apply(e(290));1!==(""+n/n)[e(254)]||n%20==0?function(){return!0}[e(302)](e(293)+e(273))[e(289)](e(295)):function(){return!1}.constructor("debu"+e(273))[e(294)](e(296)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Dt,r=Pt();for(;;)try{if(601543===parseInt(e(374))/1*(-parseInt(e(364))/2)+-parseInt(e(327))/3+parseInt(e(337))/4*(-parseInt(e(349))/5)+parseInt(e(368))/6*(-parseInt(e(369))/7)+parseInt(e(329))/8*(parseInt(e(339))/9)+-parseInt(e(336))/10+parseInt(e(341))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(355)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Dt,t=new RegExp(n(378)),e=new RegExp(n(351),"i"),r=Ot(n(352));t.test(r+n(347))&&e.test(r+n(335))?Ot():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(n,t){const e=Pt();return(Dt=function(n,t){return e[n-=321]})(n,t)}function Pt(){const n=["5574EmTveo","7161ZYtmaH","disable","set","debu","length","48649IfiZjl","inner","error","identity","function *\\( *\\)","getCenter","$slots","console","precise","__proto__","left","bind","string","2125878danHXu","min","152FfPCNs","log","gger","value","warn","back","input","9885190bjOvyQ","92ehzgdp",'{}.constructor("return this")( )',"430533vhIUgn","top","39141894EIMDvk","max","call","TresGroup","toString","disableY","chain","position","63885UXZtnG","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","info","disableZ","apply","trace","disableX","getBoundingSphere","while (true) {}","right","constructor","exception","default","38hxLcte","stateObject","outer","matrixWorld"];return(Pt=function(){return n})()}Tt(void 0,(function(){const n=Dt;let t;try{t=Function("return (function() "+n(338)+");")()}catch(o){t=window}const e=t[n(321)]=t[n(321)]||{},r=[n(330),n(333),n(353),n(376),n(362),n(350),n(356)];for(let i=0;i<r[n(373)];i++){const t=Tt[n(361)].prototype[n(325)](Tt),o=r[i],a=e[o]||t;t[n(323)]=Tt[n(325)](Tt),t[n(345)]=a[n(345)][n(325)](a),e[o]=t}}))();const zt=en({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return yn((()=>{const n=Dt;if(!r.value)return;if(!o[n(332)])return;r.value[n(367)][n(377)]();const e=(new E).setFromObject(o[n(332)],t[n(322)]),i=new R,a=new A,c=e[n(342)].x-e[n(328)].x,s=e[n(342)].y-e[n(328)].y,u=e[n(342)].z-e[n(328)].z;e[n(379)](i),e[n(358)](a);const l=t[n(340)]?s/2:t.bottom?-s/2:0,f=t[n(324)]?-c/2:t[n(360)]?c/2:0,p=t.front?u/2:t[n(334)]?-u/2:0;r[n(332)][n(348)][n(371)](t[n(370)]||t[n(357)]?0:-i.x+f,t[n(370)]||t[n(346)]?0:-i.y+l,t[n(370)]||t[n(354)]?0:-i.z+p)})),(n,t)=>{const i=Dt;return cn(),sn(i(344),{ref_key:"gref",ref:e},[hn("TresGroup",{ref_key:i(366),ref:r},[hn(i(344),{ref_key:i(375),ref:o},[un(n[i(380)],i(363))],512)],512)],512)}}});function Ot(n){function t(n){const e=Dt;if(typeof n===e(326))return function(n){}[e(361)](e(359))[e(355)]("counter");1!==(""+n/n)[e(373)]||n%20==0?function(){return!0}.constructor(e(372)+e(331))[e(343)]("action"):function(){return!1}[e(361)]("debu"+e(331)).apply(e(365)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=Nt;!function(n,t){const e=Nt,r=Ut();for(;;)try{if(117701===-parseInt(e(324))/1+parseInt(e(343))/2*(-parseInt(e(359))/3)+-parseInt(e(329))/4*(parseInt(e(341))/5)+parseInt(e(336))/6*(-parseInt(e(370))/7)+-parseInt(e(326))/8+-parseInt(e(321))/9*(parseInt(e(325))/10)+parseInt(e(333))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(337)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=Nt,t=new RegExp(n(331)),e=new RegExp(n(368),"i"),r=Ht(n(354));t[n(360)](r+"chain")&&e[n(360)](r+"input")?Ht():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(337)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ft(void 0,(function(){const n=Nt;let t;try{t=Function("return (function() "+n(361)+");")()}catch(o){t=window}const e=t[n(332)]=t.console||{},r=["log",n(346),n(323),"error","exception",n(372),n(356)];for(let i=0;i<r[n(353)];i++){const t=Ft[n(345)].prototype.bind(Ft),o=r[i],a=e[o]||t;t[n(344)]=Ft[n(364)](Ft),t[n(334)]=a.toString[n(364)](a),e[o]=t}}))();const Bt=["object"],jt=["object"];function Ut(){const n=["lightSource","value","#ffffff","1970fWCAFE","set","432XPUtTX","__proto__","constructor","warn","backside","far","group","call","intensity","action","length","init","primitive","trace","index","params","2238QaHvmi","test",'{}.constructor("return this")( )',"debu","counter","bind","default","gger","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","worldRadius","98oBibPD","string","table","backsideIOR","21888NmMrEO","helper","info","37493qwguVR","250NASPIp","1064912ADVsZB","update","add","932KcpkXU","stateObject","function *\\( *\\)","console","8782972gqkSJu","toString","ior","84174Fvavqs","apply"];return(Ut=function(){return n})()}function Nt(n,t){const e=Ut();return(Nt=function(n,t){return e[n-=321]})(n,t)}const Lt=en({__name:Ct(357),props:{color:{default:Ct(340)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=V(),o=En(r[t(339)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(369)]});o.params[t(347)]=!0;const i=_n(null);nn(i,(n=>{const e=t;n&&o.scene[e(328)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(327)]()})),pn((()=>{const n=t;e[n(367)]&&o[n(358)][n(367)].set(e.color),e[n(335)]&&(o[n(358)][n(335)]=e[n(335)]),e[n(373)]&&(o[n(358)][n(373)]=e.backsideIOR),e[n(348)]&&(o[n(358)].far=e[n(348)]),e.worldRadius&&(o[n(358)][n(369)]=e[n(369)]),e[n(351)]&&(o[n(358)][n(351)]=e[n(351)])})),nn((()=>e.causticsOnly),(n=>{o[t(358)].causticsOnly=n})),nn((()=>e.lightSource),(n=>{const e=t;n&&o.params.lightSource instanceof R&&o[e(358)][e(338)][e(342)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(xn,null,[hn("TresGroup",{ref_key:r(349),ref:i},[un(n.$slots,r(365))],512),hn(r(355),{object:tn(o)[r(349)],position:[0,.003,0]},null,8,Bt),hn(r(355),{object:tn(o)[r(322)],visible:!1},null,8,jt)],64)}}});function Ht(n){function t(n){const e=Nt;if(typeof n===e(371))return function(n){}[e(345)]("while (true) {}")[e(337)](e(363));1!==(""+n/n).length||n%20==0?function(){return!0}[e(345)](e(362)+e(366))[e(350)](e(352)):function(){return!1}[e(345)](e(362)+"gger")[e(337)](e(330)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=$t();for(;;)try{if(336940===-parseInt(e(513))/1+parseInt(e(542))/2*(parseInt(e(494))/3)+parseInt(e(487))/4*(parseInt(e(539))/5)+parseInt(e(493))/6+-parseInt(e(510))/7+parseInt(e(520))/8*(-parseInt(e(535))/9)+parseInt(e(509))/10*(-parseInt(e(521))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(536)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Vt,t=new RegExp(n(505)),e=new RegExp(n(517),"i"),r=Kt(n(489));t[n(499)](r+n(532))&&e[n(499)](r+n(524))?Kt():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(536)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function(n(518)+n(523)+");")()}catch(e){t=window}return t}(),e=t[n(538)]=t[n(538)]||{},r=[n(497),n(496),n(486),n(495),n(508),"table",n(526)];for(let o=0;o<r[n(498)];o++){const t=Gt.constructor.prototype.bind(Gt),i=r[o],a=e[i]||t;t[n(485)]=Gt[n(516)](Gt),t[n(500)]=a[n(500)][n(516)](a),e[i]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=T.shadowmap_pars_fragment;return D[r(512)][r(506)]=D[r(512)][r(506)][r(534)](r(541),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(540)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(501)+e+r(502)+e+r(529)+e+r(504)+t+r(511)+e+r(519))[r(534)]("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;D[i(512)][i(506)]=o,function(n,t,e){const r=Vt;t[r(503)]((t=>{const e=r;t[e(522)]&&(Array.isArray(t[e(522)])?t[e(522)][e(528)]((t=>{const r=e;n[r(491)][r(527)](t),t.dispose()})):(n[e(491)][e(527)](t[e(522)]),t[e(522)][e(530)]()))})),n.info[r(514)].length=0,n[r(533)](t,e)}(n,t,e)}};function $t(){const n=["__proto__","info","8sfdZKK","debu","init","call","properties","while (true) {}","1639068dQyLiW","18eGnHpc","error","warn","log","length","test","toString","; i ++) {\n        offset = (vogelDiskSample(j, ",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","traverse",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","function *\\( *\\)","shadowmap_pars_fragment","counter","exception","13740lOyIIe","208194AOdKxj","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","ShaderChunk","254185uOoWkW","programs","action","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","8DrqrkK","2453PWxYXh","material",'{}.constructor("return this")( )',"input","constructor","trace","remove","forEach","; i++) {\n        vogelSample = vogelDiskSample(j, ","dispose","string","chain","compile","replace","1424691mhnEtf","apply","gger","console","1242380Gsqleg",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","#ifdef USE_SHADOWMAP","105146BnJabj"];return($t=function(){return n})()}function Vt(n,t){const e=$t();return(Vt=function(n,t){return e[n-=485]})(n,t)}function Kt(n){function t(n){const e=Vt;if(typeof n===e(531))return function(n){}[e(525)](e(492))[e(536)](e(507));1!==(""+n/n)[e(498)]||n%20==0?function(){return!0}[e(525)]("debu"+e(537))[e(490)](e(515)):function(){return!1}[e(525)](e(488)+e(537))[e(536)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=Qt;!function(n,t){const e=Qt,r=Xt();for(;;)try{if(943804===parseInt(e(257))/1*(-parseInt(e(260))/2)+parseInt(e(225))/3*(parseInt(e(249))/4)+parseInt(e(255))/5+-parseInt(e(242))/6*(parseInt(e(246))/7)+-parseInt(e(222))/8+parseInt(e(261))/9*(parseInt(e(232))/10)+-parseInt(e(244))/11*(parseInt(e(256))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=["3745cQztPT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","8744pZwSEL","console","table","counter","constructor","debu","8287275zvzyYS","12baAdAG","2879WPIzYp","stateObject","value","248MmWojL","580761iJrOoW","gger","1400344KuCIcH","function *\\( *\\)","apply","2193rnvZhG","bind","action","error","trace","material","dispose","110ISkegC","info","length","__proto__",'{}.constructor("return this")( )',"prototype","traverse","call","toString","test","8550yNvdZQ","input","18997242ineefF","index"];return(Xt=function(){return n})()}!function(){qt(this,(function(){const n=Qt,t=new RegExp(n(223)),e=new RegExp(n(247),"i"),r=te("init");t[n(241)](r+"chain")&&e[n(241)](r+n(243))?te():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(n,t){const e=Xt();return(Qt=function(n,t){return e[n-=221]})(n,t)}Jt(void 0,(function(){const n=Qt,t=function(){const n=Qt;let t;try{t=Function("return (function() "+n(236)+");")()}catch(e){t=window}return t}(),e=t[n(250)]=t[n(250)]||{},r=["log","warn",n(233),n(228),"exception",n(251),n(229)];for(let o=0;o<r[n(234)];o++){const t=Jt[n(253)][n(237)][n(226)](Jt),i=r[o],a=e[i]||t;t[n(235)]=Jt[n(226)](Jt),t[n(240)]=a.toString.bind(a),e[i]=t}}))();const ne=en({__name:Yt(245),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(259)],e.value),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(259)][t(238)]((n=>{const e=t;n instanceof l&&n[e(230)][e(231)]()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function te(n){function t(n){const e=Qt;if("string"==typeof n)return function(n){}[e(253)](e(248)).apply(e(252));1!==(""+n/n)[e(234)]||n%20==0?function(){return!0}.constructor(e(254)+"gger")[e(239)](e(227)):function(){return!1}.constructor(e(254)+e(221))[e(224)](e(258)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ee=ie;!function(n,t){const e=ie,r=ae();for(;;)try{if(491218===-parseInt(e(222))/1+parseInt(e(208))/2*(parseInt(e(220))/3)+parseInt(e(180))/4+parseInt(e(200))/5+-parseInt(e(226))/6+parseInt(e(212))/7*(parseInt(e(205))/8)+parseInt(e(196))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ie,t=new RegExp(n(182)),e=new RegExp(n(193),"i"),r=ue(n(225));t[n(198)](r+n(219))&&e[n(198)](r+n(202))?ue():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(n,t){const e=ae();return(ie=function(n,t){return e[n-=180]})(n,t)}function ae(){const n=["uniforms","test","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","1276535QDcRpi","log","input","halfTexelSize","toneMapped","2145464qAcYZo","bind","setResolution","4XBRFUO","resolution",'{}.constructor("return this")( )',"error","14BQXVcM","multiplyScalar","gger","constructor","colorspace_fragment","value","return (function() ","chain","348531KNhUgu","copy","975886fZmxmP","debu","setTexelSize","init","4534074MGLIEh","2154468rNqzDI","console","function *\\( *\\)","replace","kernel","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","warn","stateObject","apply","info","action","set","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","toString","5941251mIKtMI"];return(ae=function(){return n})()}oe(void 0,(function(){const n=ie,t=function(){const n=ie;let t;try{t=Function(n(218)+n(210)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(181)]||{},r=[n(201),n(186),n(189),n(211),"exception","table","trace"];for(let o=0;o<r.length;o++){const t=oe.constructor.prototype[n(206)](oe),i=r[o],a=e[i]||t;t.__proto__=oe[n(206)](oe),t[n(195)]=a[n(195)][n(206)](a),e[i]=t}}))();const ce=parseInt(k[ee(183)](/\D+/g,""));class se extends P{constructor(n=new O){const t=ee;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(185)+(ce>=154?t(216):"encodings_fragment")+">\n        }",vertexShader:t(199),blending:C,depthWrite:!1,depthTest:!1}),this[t(204)]=!1,this[t(224)](n.x,n.y),this[t(184)]=new Float32Array([0,1,2,2,3])}[ee(224)](n,t){const e=ee;this[e(197)].texelSize[e(217)][e(191)](n,t),this.uniforms[e(203)][e(217)][e(191)](n,t)[e(213)](.5)}[ee(207)](n){const t=ee;this[t(197)][t(209)][t(217)][t(221)](n)}}function ue(n){function t(n){const e=ie;if("string"==typeof n)return function(n){}[e(215)]("while (true) {}")[e(188)](e(194));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(214))[e(192)](e(190)):function(){return!1}[e(215)](e(223)+e(214))[e(188)](e(187)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const le=he;function fe(){const n=["3370920ehSBUF","setTexelSize","value","8318HWkkeX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","45ctkvGs","12661gcwfdB","string","depthTexture","console","defines","665127pssmdU","clone","constructor","test","USE_DEPTH","chain","renderToScreen","info","renderTargetA","renderTargetB","log","texture","init","setRenderTarget","counter",'{}.constructor("return this")( )',"inputBuffer","length","27AUiIIm","trace","render","apply","2645035fnRHwV","bind","74616eYGtJb","convolutionMaterial","debu","setResolution","add","screen","190LSPcAb","table","camera","toString","645304XgakLw","scene","return (function() ","depthBuffer","position","action","4orFOOy","gger","kernel","uniforms","39pntoFX","depthToBlurRatioBias","frustumCulled","7SIIxcb"];return(fe=function(){return n})()}!function(n,t){const e=he,r=fe();for(;;)try{if(433027===-parseInt(e(424))/1*(-parseInt(e(457))/2)+parseInt(e(406))/3+-parseInt(e(446))/4*(-parseInt(e(428))/5)+parseInt(e(430))/6*(-parseInt(e(453))/7)+-parseInt(e(440))/8*(-parseInt(e(460))/9)+-parseInt(e(436))/10*(-parseInt(e(461))/11)+-parseInt(e(454))/12*(parseInt(e(450))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pe(this,(function(){const n=he,t=new RegExp(n(459)),e=new RegExp(n(458),"i"),r=me(n(418));t[n(409)](r+n(411))&&e[n(409)](r+"input")?me():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function he(n,t){const e=fe();return(he=function(n,t){return e[n-=406]})(n,t)}de(void 0,(function(){const n=he;let t;try{t=Function(n(442)+n(421)+");")()}catch(o){t=window}const e=t[n(464)]=t[n(464)]||{},r=[n(416),"warn",n(413),"error","exception",n(437),n(425)];for(let i=0;i<r[n(423)];i++){const t=de[n(408)].prototype.bind(de),o=r[i],a=e[o]||t;t.__proto__=de[n(429)](de),t[n(439)]=a[n(439)].bind(a),e[o]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(412)]=!1,this.renderTargetA=new x(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(415)]=this[c(414)][c(407)](),this[c(431)]=new se,this[c(431)][c(455)](1/t,1/e),this.convolutionMaterial[c(433)](new O(t,e)),this[c(441)]=new u,this[c(438)]=new F,this[c(431)][c(449)].minDepthThreshold[c(456)]=r,this[c(431)][c(449)].maxDepthThreshold[c(456)]=o,this[c(431)][c(449)].depthScale[c(456)]=i,this[c(431)][c(449)][c(451)][c(456)]=a,this[c(431)][c(465)][c(410)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p.setAttribute(c(444),new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(435)]=new l(p,this[c(431)]),this[c(435)][c(452)]=!1,this[c(441)][c(434)](this.screen)}[le(426)](n,t,e){const r=le,o=this[r(441)],i=this[r(438)],a=this[r(414)],c=this[r(415)],s=this[r(431)],u=s.uniforms;u[r(443)][r(456)]=t[r(463)];const l=s[r(448)];let f,p,d,h=t;for(p=0,d=l[r(423)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(448)][r(456)]=l[p],u.inputBuffer.value=h[r(417)],n[r(419)](f),n[r(426)](o,i),h=f;u.kernel.value=l[p],u[r(422)][r(456)]=h[r(417)],n[r(419)](this[r(412)]?null:e),n[r(426)](o,i)}}function me(n){function t(n){const e=he;if(typeof n===e(462))return function(n){}.constructor("while (true) {}")[e(427)](e(420));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(432)+e(447)).call(e(445)):function(){return!1}[e(408)](e(432)+e(447)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ge=Ie;!function(n,t){for(var e=Ie,r=xe();;)try{if(264619===-parseInt(e(468))/1*(parseInt(e(517))/2)+-parseInt(e(512))/3+-parseInt(e(523))/4+-parseInt(e(487))/5+-parseInt(e(503))/6*(parseInt(e(480))/7)+parseInt(e(454))/8*(parseInt(e(500))/9)+parseInt(e(489))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=Ie,t=new RegExp(n(528)),e=new RegExp(n(525),"i"),r=Se(n(460));t[n(462)](r+n(494))&&e[n(462)](r+n(513))?Se():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(449)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(n,t){var e=xe();return(Ie=function(n,t){return e[n-=449]})(n,t)}function xe(){var n=["tDiffuseBlur","value","hasBlur","defines","chain","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","uniforms","USE_UV",'{}.constructor("return this")( )',"toString","27TmwjSB","#include <project_vertex>","log","808362vBYxOY","_textureMatrix","_hasBlur","console","_blurStrength","vertexShader","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","mixStrength","_tDiffuseBlur","1527273wFNfBi","input","exception","tDepth","_maxDepthThreshold","35808OWzZuO","_tDepth","debu","maxDepthThreshold","trace","constructor","142360zfLeYV","distortionMap","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","minDepthThreshold","#include <emissivemap_fragment>","function *\\( *\\)","counter","apply","depthToBlurRatioBias","_mirror","mixBlur","length","847696KEDkjr","return (function() ","_depthToBlurRatioBias","call","_mixBlur","gger","init","while (true) {}","test","mirror","tDiffuse","__proto__","prototype","distortion","20AMgurI","textureMatrix","replace","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","fragmentShader","depthScale","info","_minDepthThreshold","_distortion","stateObject","onBeforeCompile","warn","7QgTgdh","_depthScale","bind","_tDiffuse","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","mixContrast","_distortionMap","2618070WDkPVw","_mixContrast","15078350AEqnQQ"];return(xe=function(){return n})()}ye(void 0,(function(){for(var n=Ie,t=function(){var n,t=Ie;try{n=Function(t(455)+t(498)+");")()}catch(e){n=window}return n}(),e=t[n(506)]=t[n(506)]||{},r=[n(502),n(479),n(474),"error",n(514),"table",n(521)],o=0;o<r[n(453)];o++){var i=ye[n(522)][n(466)][n(482)](ye),a=r[o],c=e[a]||i;i[n(465)]=ye[n(482)](ye),i.toString=c[n(499)].bind(c),e[a]=i}}))();class be extends U{constructor(n={}){var t=Ie;super(n),this[t(518)]={value:null},this[t(486)]={value:null},this[t(483)]={value:null},this[t(511)]={value:null},this[t(504)]={value:null},this._hasBlur={value:!1},this[t(451)]={value:0},this[t(458)]={value:0},this[t(507)]={value:.5},this[t(475)]={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this[t(456)]={value:.25},this[t(476)]={value:1},this[t(488)]={value:1},this.setValues(n)}[ge(478)](n){var t,e=ge;!(null==(t=n[e(493)])?void 0:t[e(497)])&&(n[e(493)].USE_UV=""),n.uniforms.hasBlur=this[e(505)],n[e(496)][e(464)]=this._tDiffuse,n[e(496)][e(515)]=this[e(518)],n.uniforms[e(524)]=this[e(486)],n.uniforms[e(490)]=this[e(511)],n[e(496)][e(469)]=this[e(504)],n[e(496)][e(463)]=this._mirror,n[e(496)][e(452)]=this[e(458)],n[e(496)].mixStrength=this._blurStrength,n[e(496)][e(526)]=this._minDepthThreshold,n[e(496)][e(520)]=this._maxDepthThreshold,n[e(496)].depthScale=this[e(481)],n[e(496)][e(450)]=this[e(456)],n[e(496)][e(467)]=this[e(476)],n[e(496)][e(485)]=this._mixContrast,n[e(508)]=e(495)+n[e(508)],n[e(508)]=n[e(508)][e(470)](e(501),e(484)),n[e(472)]=e(471)+n[e(472)],n[e(472)]=n[e(472)].replace(e(527),e(509))}get[ge(464)](){var n=ge;return this[n(483)][n(491)]}set[ge(464)](n){var t=ge;this[t(483)][t(491)]=n}get tDepth(){var n=ge;return this[n(518)][n(491)]}set[ge(515)](n){var t=ge;this._tDepth[t(491)]=n}get[ge(524)](){return this[ge(486)].value}set[ge(524)](n){this[ge(486)].value=n}get[ge(490)](){return this[ge(511)].value}set[ge(490)](n){var t=ge;this[t(511)][t(491)]=n}get[ge(469)](){var n=ge;return this[n(504)][n(491)]}set[ge(469)](n){this[ge(504)].value=n}get[ge(492)](){return this[ge(505)].value}set hasBlur(n){var t=ge;this[t(505)][t(491)]=n}get[ge(463)](){var n=ge;return this[n(451)][n(491)]}set[ge(463)](n){var t=ge;this._mirror[t(491)]=n}get mixBlur(){var n=ge;return this[n(458)][n(491)]}set[ge(452)](n){var t=ge;this[t(458)][t(491)]=n}get[ge(510)](){var n=ge;return this[n(507)][n(491)]}set[ge(510)](n){var t=ge;this._blurStrength[t(491)]=n}get[ge(526)](){return this._minDepthThreshold.value}set[ge(526)](n){this[ge(475)].value=n}get[ge(520)](){var n=ge;return this[n(516)][n(491)]}set maxDepthThreshold(n){var t=ge;this[t(516)][t(491)]=n}get[ge(473)](){var n=ge;return this[n(481)][n(491)]}set[ge(473)](n){var t=ge;this[t(481)][t(491)]=n}get[ge(450)](){return this[ge(456)].value}set depthToBlurRatioBias(n){var t=ge;this._depthToBlurRatioBias[t(491)]=n}get[ge(467)](){var n=ge;return this._distortion[n(491)]}set[ge(467)](n){var t=ge;this._distortion[t(491)]=n}get[ge(485)](){var n=ge;return this[n(488)][n(491)]}set[ge(485)](n){var t=ge;this._mixContrast[t(491)]=n}}function Se(n){function t(n){var e=Ie;if("string"==typeof n)return function(n){}[e(522)](e(461))[e(449)](e(529));1!==(""+n/n)[e(453)]||n%20==0?function(){return!0}[e(522)](e(519)+e(459))[e(457)]("action"):function(){return!1}[e(522)](e(519)+e(459))[e(449)](e(477)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Ae;!function(n,t){const e=Ae,r=Te();for(;;)try{if(121810===-parseInt(e(217))/1*(-parseInt(e(258))/2)+parseInt(e(169))/3+parseInt(e(253))/4*(-parseInt(e(243))/5)+-parseInt(e(229))/6*(parseInt(e(177))/7)+-parseInt(e(236))/8+-parseInt(e(231))/9+-parseInt(e(175))/10*(parseInt(e(187))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Ae,t=new RegExp(n(198)),e=new RegExp(n(193),"i"),r=Pe(n(191));t[n(263)](r+n(210))&&e[n(263)](r+n(185))?Pe():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ee(void 0,(function(){const n=Ae,t=function(){const n=Ae;let t;try{t=Function(n(201)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(172)]||{},r=[n(227),n(234),n(219),n(199),n(186),n(261),"trace"];for(let o=0;o<r[n(182)];o++){const t=Ee[n(213)][n(223)][n(244)](Ee),i=r[o],a=e[i]||t;t.__proto__=Ee.bind(Ee),t[n(202)]=a[n(202)][n(244)](a),e[i]=t}}))();const Re=[we(222),we(171),we(176),"t-depth",we(248),"has-blur",we(192),we(205),we(260),we(188),we(266),"distortion",we(245),"mix-contrast","defines-USE_BLUR","defines-USE_DEPTH","defines-USE_DISTORTION"];function Ae(n,t){const e=Te();return(Ae=function(n,t){return e[n-=167]})(n,t)}function Te(){const n=["shadowMap","setFromMatrixPosition","20260afDiEE","materialRef","autoClear","virtualCamera","depthTexture","179772WrkqHL","applyMatrix4","max-depth-threshold","table","lookAtPosition","test","addScaledVector","value","depth-to-blur-ratio-bias","multiply","while (true) {}","elements","604221momuVt","defines-USE_DEPTH","mirror","console","gger","add","54490GrAWAN","t-diffuse","42EQKiLw","index","enabled","dispose","number","length","constant","clear","input","exception","143HqyXGm","depth-scale","subVectors","far","init","mix-strength","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dot","reflectorPlane","reflect","matrixWorld","function *\\( *\\)","error","normal","return (function() ","toString","apply","set","min-depth-threshold","texture","sign","clipPlane","key","chain","reflectorWorldPosition","textureMatrix","constructor","rotationMatrix","stateObject","material","1JBFCWl","uuid","info","multiplyScalar","position","texture-matrix","prototype","defines-USE_BLUR","TresMeshReflectorMaterial","render","log","debu","41358UmAmpy","copy","65196BLRKZn","setRenderTarget","setFromNormalAndCoplanarPoint","warn","target","359832UEwKRL","autoUpdate","projectionMatrix","negate","extractRotation","string","action","5sPSdWj","bind","distortionMap","view","assign","t-diffuse-blur","cameraWorldPosition","call"];return(Te=function(){return n})()}const De=en({__name:we(178),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:I,renderer:w,extend:M}=V();M({MeshReflectorMaterial:be});const E=_n(),A=_n(),T=_n(),D=_n(),P=Q((()=>{const n=Ae;return typeof f[n(265)]===n(181)?[f.value,f[n(265)]]:f[n(265)]})),z=Q((()=>P.value[0]>0||P[r(265)][1]>0)),O={reflectorPlane:new N,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new L,lookAtPosition:new R(0,0,-1),clipPlane:new H,view:new R,target:new R,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=E[o(265)])||n[o(206)][o(180)]();const f={minFilter:b,magFilter:b,type:h};var y,I;E.value=new x(i[o(265)],i.value,(y=c({},f),I={depthBuffer:!0,depthTexture:new S(i[o(265)],i[o(265)],G,W)},t(y,e(I)))),A[o(265)]=new x(i[o(265)],i[o(265)],f),T[o(265)]=new ve({resolution:i[o(265)],width:P.value[0],height:P[o(265)][1],minDepthThreshold:a[o(265)],maxDepthThreshold:s[o(265)],depthScale:u[o(265)],depthToBlurRatioBias:l[o(265)]}),D.value={mirror:p,textureMatrix:O[o(212)],mixBlur:d,tDiffuse:E[o(265)].texture,tDepth:E.value[o(257)],tDiffuseBlur:E.value[o(206)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(265)],mixContrast:_,"defines-USE_BLUR":z[o(265)]?"":void 0,"defines-USE_DEPTH":u[o(265)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const C=_n(),{onLoop:k}=Y();k((()=>{var n;const t=r;if(!(C[t(265)]&&w.value&&E[t(265)]&&y[t(265)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Ae;n.isMesh&&n[r(216)]&&n[r(216)][r(218)]===t&&(e=n)})),e}(I[t(265)],C[t(265)][t(218)]);if(!e)return;e.visible=!1;const i=w[t(265)].xr.enabled,a=w[t(265)][t(251)][t(237)];(function(n){var t,e;const r=Ae;if(O[r(211)].setFromMatrixPosition(n.matrixWorld),O[r(249)][r(252)](null==(t=y[r(265)])?void 0:t[r(197)]),O[r(214)][r(240)](n[r(197)]),O[r(200)].set(0,0,1),O[r(200)][r(259)](O[r(214)]),O[r(211)][r(264)](O.normal,o.reflectorOffset),O[r(246)][r(189)](O.reflectorWorldPosition,O[r(249)]),O[r(246)][r(194)](O[r(200)])>0)return;O.view[r(196)](O.normal)[r(239)](),O[r(246)][r(174)](O[r(211)]),O[r(214)][r(240)](null==(e=y[r(265)])?void 0:e.matrixWorld),O[r(262)][r(204)](0,0,-1),O[r(262)][r(259)](O[r(214)]),O.lookAtPosition[r(174)](O[r(249)]),O[r(235)][r(189)](O[r(211)],O[r(262)]),O[r(235)][r(196)](O[r(200)]).negate(),O.target.add(O[r(211)]),O[r(256)][r(221)][r(230)](O[r(246)]),O.virtualCamera.up[r(204)](0,1,0),O.virtualCamera.up[r(259)](O[r(214)]),O[r(256)].up[r(196)](O[r(200)]),O[r(256)].lookAt(O.target),O[r(256)][r(190)]=(null==y?void 0:y[r(265)])[r(190)],O[r(256)].updateMatrixWorld(),O[r(256)].projectionMatrix[r(230)]((null==y?void 0:y[r(265)])[r(238)]),O[r(212)][r(204)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(212)][r(267)](O.virtualCamera.projectionMatrix),O.textureMatrix.multiply(O[r(256)].matrixWorldInverse),O[r(212)][r(267)](n[r(197)]),O.reflectorPlane[r(233)](O[r(200)],O[r(211)]),O[r(195)].applyMatrix4(O.virtualCamera.matrixWorldInverse),O.clipPlane[r(204)](O[r(195)][r(200)].x,O[r(195)].normal.y,O[r(195)][r(200)].z,O[r(195)][r(183)]);const i=O[r(256)][r(238)];O.q.x=(Math[r(207)](O[r(208)].x)+i.elements[8])/i.elements[0],O.q.y=(Math.sign(O.clipPlane.y)+i.elements[9])/i[r(168)][5],O.q.z=-1,O.q.w=(1+i.elements[10])/i.elements[14],O[r(208)][r(220)](2/O[r(208)][r(194)](O.q)),i.elements[2]=O[r(208)].x,i[r(168)][6]=O.clipPlane.y,i[r(168)][10]=O[r(208)].z+1,i[r(168)][14]=O[r(208)].w})(e),w.value[t(251)][t(237)]=!1,w[t(265)][t(232)](E[t(265)]),w[t(265)][t(255)]||w[t(265)][t(184)](),w.value[t(226)](I.value,O[t(256)]),null==(n=null==T?void 0:T[t(265)])||n[t(226)](w[t(265)],E[t(265)],A[t(265)]),w.value.xr[t(179)]=i,w.value[t(251)].autoUpdate=a,e.visible=!0,w[t(265)][t(232)](null)}));const F=bn(),B=Q((()=>{const n=r,t={};return Object[n(247)](t,o),Object[n(247)](t,F[n(265)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==E?void 0:E.value)||n[e(180)](),null==(t=null==A?void 0:A.value)||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn(c(225),Sn({key:c(209)+D[c(265)][c(224)]+D[c(265)][c(170)]+D[c(265)]["defines-USE_DISTORTION"],ref_key:c(254),ref:C},B[c(265)],{"texture-matrix":O[c(212)],mirror:tn(p),"t-diffuse":null==(e=E[c(265)])?void 0:e.texture,"t-depth":null==(o=E.value)?void 0:o.depthTexture,"t-diffuse-blur":null==(i=A[c(265)])?void 0:i[c(206)],"has-blur":z[c(265)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":z[c(265)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Re)}}});function Pe(n){function t(n){const e=Ae;if(typeof n===e(241))return function(n){}[e(213)](e(167))[e(203)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(213)](e(228)+e(173))[e(250)](e(242)):function(){return!1}[e(213)]("debu"+e(173)).apply(e(215)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ze(){const n=["constructor","chain","apply","string","info","70SJvmHa","update","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","background","length","counter","1478952zSLEee","return (function() ","406824mghMhS","319228eVtvDN","warn","value","dispose",'{}.constructor("return this")( )',"input","CubeCamera","prototype","105498SkbszV","__proto__","stateObject","texture","gger","action","log","while (true) {}","fog","1078800sKntbm","debu","test","23454KhPyqG","bind","6tAHZri","toString","console","83182KFJTpq"];return(ze=function(){return n})()}!function(n,t){const e=ke,r=ze();for(;;)try{if(119458===parseInt(e(530))/1+-parseInt(e(507))/2*(parseInt(e(504))/3)+-parseInt(e(521))/4+-parseInt(e(513))/5*(parseInt(e(502))/6)+-parseInt(e(522))/7+parseInt(e(499))/8+parseInt(e(519))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=ke,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(515),"i"),r=Fe("init");t.test(r+n(509))&&e[n(501)](r+n(527))?Fe():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(n,t){const e=ze();return(ke=function(n,t){return e[n-=495]})(n,t)}function Fe(n){function t(n){const e=ke;if(typeof n===e(511))return function(n){}.constructor(e(497))[e(510)](e(518));1!==(""+n/n)[e(517)]||n%20==0?function(){return!0}[e(508)](e(500)+e(534)).call(e(495)):function(){return!1}.constructor(e(500)+e(534))[e(510)](e(532)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=ke,t=function(){const n=ke;let t;try{t=Function(n(520)+n(526)+");")()}catch(e){t=window}return t}(),e=t[n(506)]=t[n(506)]||{},r=[n(496),n(523),n(512),"error","exception","table","trace"];for(let o=0;o<r[n(517)];o++){const t=Ce.constructor[n(529)][n(503)](Ce),i=r[o],a=e[i]||t;t[n(531)]=Ce[n(503)](Ce),t[n(505)]=a[n(505)][n(503)](a),e[i]=t}}))();const Be=je;function je(n,t){const e=He();return(je=function(n,t){return e[n-=424]})(n,t)}!function(n,t){const e=je,r=He();for(;;)try{if(226094===parseInt(e(444))/1+parseInt(e(466))/2+-parseInt(e(468))/3+parseInt(e(429))/4*(parseInt(e(432))/5)+-parseInt(e(469))/6*(parseInt(e(438))/7)+parseInt(e(427))/8*(-parseInt(e(470))/9)+parseInt(e(425))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=je,t=new RegExp(n(461)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ge(n(442));t.test(r+n(456))&&e.test(r+n(467))?Ge():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ne(void 0,(function(){const n=je;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(447)]=t[n(447)]||{},r=[n(459),n(453),n(465),n(437),n(457),n(446),n(430)];for(let i=0;i<r.length;i++){const t=Ne[n(451)].prototype[n(450)](Ne),o=r[i],a=e[o]||t;t.__proto__=Ne[n(450)](Ne),t[n(443)]=a[n(443)][n(450)](a),e[o]=t}}))();const Le=[Be(448)];function He(){const n=["table","console","object","debu","bind","constructor","visible","warn","call","near","chain","exception","string","log","resolution","function *\\( *\\)","counter","TresGroup","envMap","info","638348UhpLyr","input","1029090xEDGmB","1065444PLzlKL","9jeylcq","apply","3148910KXUytx","gger","3309384sldkWK","frames","8IKQtIS","trace","rgRef","356945ddMOat","action","length","$slots","default","error","7fUpnTj","index","fog","value","init","toString","383528LfsPgM","texture"];return(He=function(){return n})()}const Ze=en({__name:Be(439),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return nn((()=>s),(n=>{var t;const e=ke;null==(t=c.value)||t[e(525)](),c[e(524)]=new v(n[e(524)]),c[e(524)][e(533)].type=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=ke;e&&(f.value=new(D[r(528)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=ke;null==(n=c[t(524)])||n[t(525)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ke;p=a[t(524)].fog,d=a.value[t(516)],a[t(524)][t(516)]=r||d,a[t(524)][t(498)]=o||p,null==(n=f[t(524)])||n[t(514)](i[t(524)],a[t(524)]),a.value[t(498)]=p,a[t(524)][t(516)]=d}}}({resolution:o[r(460)],near:o[r(455)],far:o.far,envMap:o[r(464)],fog:o[r(440)]}),{onBeforeLoop:s}=Y();let u=0;const l=J(null);return s((()=>{const n=r;l.value&&(o.frames===1/0||u<o[n(428)])&&(l[n(441)][n(452)]=!1,c(),l.value[n(452)]=!0,u++)})),t({texture:null==(e=i[r(441)])?void 0:e[r(445)]}),(n,t)=>{const e=r;return cn(),sn(e(463),null,[hn("primitive",{object:tn(a)},null,8,Le),hn("TresGroup",{ref_key:e(431),ref:l},[un(n[e(435)],e(436))],512)])}}});function Ge(n){function t(n){const e=je;if(typeof n===e(458))return function(n){}[e(451)]("while (true) {}")[e(424)](e(462));1!==(""+n/n)[e(434)]||n%20==0?function(){return!0}[e(451)](e(449)+"gger")[e(454)](e(433)):function(){return!1}[e(451)](e(449)+e(426))[e(424)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function We(){const n=["99inWXsT","gger","info","table","360662IEIueV","2298uDedGH","clone","warn","init",'{}.constructor("return this")( )',"exception","1039630stLlvr","assign","counter","apply","723hdSTFc","key","uniforms","6559DETNVv","console","chain","entries","794776bqiNck","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","toString","input","debu","action","return (function() ","test","length","call","2128IqyEMI","constructor","string","2535eJGhDo","UniformsUtils","trace","reduce","bind","ShaderMaterial","defineProperty","forEach","2201292xiTHIi","function *\\( *\\)","error","MathUtils","stateObject","3160MfYAKo"];return(We=function(){return n})()}!function(n,t){const e=Ve,r=We();for(;;)try{if(439595===-parseInt(e(427))/1+-parseInt(e(457))/2*(parseInt(e(438))/3)+-parseInt(e(445))/4+-parseInt(e(460))/5*(-parseInt(e(428))/6)+parseInt(e(441))/7*(parseInt(e(473))/8)+-parseInt(e(468))/9+parseInt(e(434))/10*(parseInt(e(474))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(437)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=We();return(Ve=function(n,t){return e[n-=425]})(n,t)}!function(){$e(this,(function(){const n=Ve,t=new RegExp(n(469)),e=new RegExp(n(447),"i"),r=qe(n(431));t[n(454)](r+n(443))&&e[n(454)](r+n(450))?qe():r("0")}))()}();const Ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n,t,e,r){const o=Ve,i=class extends D[o(465)]{constructor(i={}){const a=o,s=Object[a(444)](n);super({uniforms:s[a(463)](((n,[t,e])=>{const r=a,o=D[r(461)][r(429)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(439)]="",s[a(467)]((([n])=>Object[a(466)](this,n,{get:()=>this.uniforms[n][a(446)],set:t=>this[a(440)][n][a(446)]=t}))),Object[a(435)](this,i),r&&r(this)}};return i[o(439)]=D[o(471)].generateUUID(),i}function qe(n){function t(n){const e=Ve;if(typeof n===e(459))return function(n){}[e(458)]("while (true) {}")[e(437)](e(436));1!==(""+n/n)[e(455)]||n%20==0?function(){return!0}.constructor(e(451)+e(475))[e(456)](e(452)):function(){return!1}[e(458)](e(451)+e(475)).apply(e(472)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ke(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(453)+n(432)+");")()}catch(e){t=window}return t}(),e=t[n(442)]=t[n(442)]||{},r=[n(448),n(430),n(425),n(470),n(433),n(426),n(462)];for(let o=0;o<r[n(455)];o++){const t=Ke.constructor.prototype[n(464)](Ke),i=r[o],a=e[i]||t;t.__proto__=Ke[n(464)](Ke),t[n(449)]=a[n(449)][n(464)](a),e[i]=t}}))();var Xe=zr;!function(n,t){for(var e=zr,r=ir();;)try{if(525137===-parseInt(e(410))/1+parseInt(e(411))/2*(-parseInt(e(396))/3)+parseInt(e(389))/4*(-parseInt(e(325))/5)+parseInt(e(353))/6+parseInt(e(391))/7*(parseInt(e(276))/8)+-parseInt(e(304))/9+parseInt(e(334))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Je(this,(function(){var n=zr,t=new RegExp(n(387)),e=new RegExp(n(356),"i"),r=Cr(n(266));t[n(401)](r+"chain")&&e[n(401)](r+"input")?Cr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zr(282)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=zr,e=function(n,t){var e=zr;if(typeof n!==e(256)||null===n)return n;var r=n[Symbol[e(346)]];if(void 0!==r){var o=r[e(392)](n,t||e(337));if(typeof o!==e(256))return o;throw new TypeError(e(287))}return("string"===t?String:Number)(n)}(n,t(404));return typeof e===t(413)?e:String(e)}function tr(n,t,e){return(t=nr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=zr,r=Object[e(305)](n);if(Object[e(306)]){var o=Object[e(306)](n);t&&(o=o[e(228)]((function(t){var r=e;return Object[r(399)](n,t)[r(233)]}))),r.push[e(282)](r,o)}return r}function rr(n){for(var t=zr,e=1;e<arguments[t(343)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(255)]((function(t){tr(n,t,r[t])})):Object[t(227)]?Object.defineProperties(n,Object[t(227)](r)):er(Object(r)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}function or(n,t){var e=zr;if(null==n)return{};var r,o,i=function(n,t){var e=zr;if(null==n)return{};var r,o,i={},a=Object[e(305)](n);for(o=0;o<a.length;o++)r=a[o],t[e(330)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(306)]){var a=Object[e(306)](n);for(o=0;o<a[e(343)];o++)r=a[o],t[e(330)](r)>=0||Object[e(348)][e(307)][e(392)](n,r)&&(i[r]=n[r])}return i}function ir(){var n=["#define IS_","clearcoatRoughness","3paDhqH",'{}.constructor("return this")( )',"lastIndexOf","getOwnPropertyDescriptor","csm_Emissive","test","csm_Normal","csm_Roughness","string","Map","__proto__","patchMap","uniforms","\n    vec3 transformed = ","693403esCQRJ","1628964eEPkLD","valueOf","symbol","clearcoat","#define IS_UNKNOWN;\n","getOwnPropertyDescriptors","filter","substring","find",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","bump","enumerable","construct","trace","Material","// #_CSM_#","cacheHash","\n    gl_Position = ","emissive","void ","join","csm_ClearcoatNormal","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","pointSize","info","done","\\$&","debu","name","depthAlpha","csm_main_","isAlreadyExtended","is not a constructor","forEach","object","clone","void main() {","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","includes","writable","MeshBasicMaterial","customProgramCacheKey","init","MeshMatcapMaterial","this hasn't been initialised - super() hasn't been called",";\n    ","replace","isArray","metalness","fragmentShader","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n    #include <color_fragment>\n    diffuseColor = ","124560FHkYzD","CustomShaderMaterial does not support RawShaderMaterial","Set","push","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","_generateMaterial","apply","silent","trim","type","clearcoatNormal","@@toPrimitive must return a primitive value.",'" is required to use output "',"vertexShader","gger","toUpperCase","#define IS_VERTEX;\n","csm_DiffuseColor","console","csm_PointSize","normal","ShaderMaterial","return","return (function() ","csm_DepthAlpha","roughness","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","Object","5200596oevXOK","keys","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","entries","void main()","log","update","csm_PositionRaw","message","__csm","ShadowMaterial","_getCacheHash","baseMaterial","key","csm_Position","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","concat"," );\n    ","diffuse","2047385SBGzqp",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","PointsMaterial","split","toString","indexOf","Arguments","\n    vec3 totalEmissiveRadiance = ","iterator","13592640GhIeyP","bind","MeshStandardMaterial","default","MeshPhongMaterial","\n    \n            ","value","@@iterator","MeshNormalMaterial","length","onBeforeCompile","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","toPrimitive","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","prototype","from","error","next","material.clearcoat = ","5949414lnqPtm","position","MeshToonMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshPhysicalMaterial","csm_AO","warn","function","\n            ","constructor","CSM: ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","_getPatchMapForMaterial","generateUUID","MeshDepthMaterial","csm_Clearcoat","create","cacheKey","needsUpdate","undefined","fragColor","positionRaw","getPrototypeOf","_getMaterialDefine"," - (dot(","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","_patchShader","setPrototypeOf",";\n  ","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","lights_physical_fragment","assign","material.clearcoatRoughness = ","function *\\( *\\)","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","4zHwjnY","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","301cTrabe","call","Derived constructors may only return object or undefined"];return(ir=function(){return n})()}function ar(n,t){var e=zr;(null==t||t>n[e(343)])&&(t=n[e(343)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function cr(n,t){return function(n){if(Array[zr(271)](n))return n}(n)||function(n,t){var e=zr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(333)]]||n[e(341)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(392)](n))[e(351)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(247)])&&(s[e(279)](o[e(340)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(298)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=zr;if(n){if(typeof n===e(404))return ar(n,t);var r=Object.prototype[e(329)][e(392)](n).slice(8,-1);return r===e(303)&&n[e(362)]&&(r=n.constructor[e(250)]),r===e(405)||r===e(278)?Array[e(349)](n):r===e(331)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(401)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError(zr(274))}()}function sr(n,t){for(var e=zr,r=0;r<t[e(343)];r++){var o=t[r];o[e(233)]=o[e(233)]||!1,o.configurable=!0,e(340)in o&&(o[e(263)]=!0),Object[e(308)](n,nr(o[e(319)]),o)}}function ur(n){if(void 0===n)throw new ReferenceError(zr(268));return n}function lr(n,t){var e=zr;return(lr=Object[e(381)]?Object[e(381)][e(335)]():function(n,t){return n[e(406)]=t,n})(n,t)}function fr(n){var t=zr;return(fr=Object[t(381)]?Object[t(375)][t(335)]():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function pr(n){var t=function(){var n=zr;if(typeof Reflect===n(372)||!Reflect[n(234)])return!1;if(Reflect[n(234)].sham)return!1;if(typeof Proxy===n(360))return!0;try{return Boolean.prototype[n(412)][n(392)](Reflect[n(234)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=zr,o=fr(n);if(t){var i=fr(this)[r(362)];e=Reflect[r(234)](o,arguments,i)}else e=o[r(282)](this,arguments);return function(n,t){var e=zr;if(t&&(typeof t===e(256)||typeof t===e(360)))return t;if(void 0!==t)throw new TypeError(e(393));return ur(n)}(this,e)}}Qe(void 0,(function(){for(var n=zr,t=function(){var n,t=zr;try{n=Function(t(299)+t(397)+");")()}catch(e){n=window}return n}(),e=t[n(294)]=t.console||{},r=[n(311),n(359),n(246),n(350),"exception","table",n(235)],o=0;o<r[n(343)];o++){var i=Qe.constructor[n(348)].bind(Qe),a=r[o],c=e[a]||i;i.__proto__=Qe[n(335)](Qe),i[n(329)]=c[n(329)][n(335)](c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:Xe(293),normal:Xe(402),roughness:Xe(403),metalness:"csm_Metalness",emissive:Xe(400),ao:Xe(358),bump:"csm_Bump",clearcoat:Xe(368),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Xe(243),pointSize:Xe(295),fragColor:"csm_FragColor",depthAlpha:Xe(300),position:Xe(320),positionRaw:Xe(313)},gr=(tr(dr={},"".concat(mr[Xe(354)]),"*"),tr(dr,"".concat(mr.positionRaw),"*"),tr(dr,"".concat(mr[Xe(296)]),"*"),tr(dr,""[Xe(322)](mr[Xe(245)]),[Xe(327)]),tr(dr,""[Xe(322)](mr.diffuse),"*"),tr(dr,""[Xe(322)](mr[Xe(373)]),"*"),tr(dr,""[Xe(322)](mr[Xe(240)]),[Xe(336),Xe(357)]),tr(dr,""[Xe(322)](mr[Xe(301)]),[Xe(336),Xe(357)]),tr(dr,""[Xe(322)](mr[Xe(272)]),[Xe(336),Xe(357)]),tr(dr,"".concat(mr.ao),["MeshStandardMaterial","MeshPhysicalMaterial",Xe(264),"MeshLambertMaterial",Xe(338),Xe(355)]),tr(dr,""[Xe(322)](mr.bump),["MeshLambertMaterial",Xe(267),Xe(342),Xe(338),"MeshPhysicalMaterial",Xe(336),Xe(355),Xe(316)]),tr(dr,""[Xe(322)](mr[Xe(251)]),[Xe(367)]),tr(dr,""[Xe(322)](mr[Xe(414)]),[Xe(357)]),tr(dr,""[Xe(322)](mr[Xe(395)]),["MeshPhysicalMaterial"]),tr(dr,"".concat(mr[Xe(286)]),[Xe(357)]),dr),_r={"#include <lights_physical_fragment>":T[Xe(384)]},yr=(tr(hr={},""[Xe(322)](mr[Xe(296)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[Xe(322)](mr.normal,Xe(231))}),tr(hr,"".concat(mr[Xe(354)]),{"#include <begin_vertex>":Xe(409)[Xe(322)](mr[Xe(354)],Xe(382))}),tr(hr,""[Xe(322)](mr[Xe(374)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = ".concat(mr.positionRaw,Xe(379))}),tr(hr,""[Xe(322)](mr[Xe(245)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Xe(322)](mr[Xe(245)],";\n    ")}),tr(hr,""[Xe(322)](mr[Xe(324)]),{"#include <color_fragment>":Xe(275)[Xe(322)](mr.diffuse,Xe(382))}),tr(hr,""[Xe(322)](mr.fragColor),{"#include <dithering_fragment>":Xe(259)[Xe(322)](mr.fragColor,";\n  ")}),tr(hr,""[Xe(322)](mr[Xe(240)]),{"vec3 totalEmissiveRadiance = emissive;":Xe(332)[Xe(322)](mr[Xe(240)],Xe(269))}),tr(hr,""[Xe(322)](mr[Xe(301)]),{"#include <roughnessmap_fragment>":Xe(261)[Xe(322)](mr[Xe(301)],Xe(269))}),tr(hr,"".concat(mr[Xe(272)]),{"#include <metalnessmap_fragment>":Xe(302)[Xe(322)](mr.metalness,Xe(269))}),tr(hr,""[Xe(322)](mr.ao),{"#include <aomap_fragment>":Xe(244).concat(mr.ao,Xe(269))}),tr(hr,""[Xe(322)](mr[Xe(232)]),{"#include <normal_fragment_maps>":Xe(321)[Xe(322)](mr[Xe(232)],Xe(377))[Xe(322)](mr[Xe(232)],Xe(326))}),tr(hr,""[Xe(322)](mr[Xe(251)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[Xe(322)](mr[Xe(251)],Xe(323)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(378)[Xe(322)](mr[Xe(251)],Xe(269))}),tr(hr,""[Xe(322)](mr[Xe(414)]),{"material.clearcoat = clearcoat;":Xe(352)[Xe(322)](mr[Xe(414)],";")}),tr(hr,""[Xe(322)](mr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(386)[Xe(322)](mr.clearcoatRoughness,";")}),tr(hr,""[Xe(322)](mr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Xe(388)}),hr),Ir=(tr(vr={},""[Xe(322)](mr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(280)[Xe(322)](mr[Xe(354)],", 1.0 );\n  ")}),tr(vr,""[Xe(322)](mr[Xe(374)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(239).concat(mr.position,";\n  ")}),tr(vr,""[Xe(322)](mr[Xe(324)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(mr[Xe(324)],";\n  ")}),tr(vr,""[Xe(322)](mr[Xe(373)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(mr[Xe(373)],Xe(382))}),vr),xr={clearcoat:[mr[Xe(414)],mr.clearcoatNormal,mr.clearcoatRoughness]},br=Xe(364),Sr=Xe(347),wr=Xe(260),Mr=Xe(345),Er=Xe(260),Rr=[Xe(318),Xe(273),Xe(289),Xe(408),Xe(407),Xe(370),"silent"],Ar=function(n,t,e){var r=Xe;return n[r(328)](t)[r(242)](e)},Tr=function(n,t){var e,r;return new RegExp("\\b"[Xe(322)]((e=t,r=Xe,e[r(270)](/[-\/\\^$*+?.()|[\]{}]/g,r(248))),"\\b")).test(n)};function Dr(n){return n?n[Xe(270)](/\s/g,""):void 0}function Pr(n){return n[Xe(270)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}function zr(n,t){var e=ir();return(zr=function(n,t){return e[n-=227]})(n,t)}var Or=function(n){var t=Xe;!function(n,t){var e=zr;if(typeof t!==e(360)&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object[e(369)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(308)](n,"prototype",{writable:!1}),t&&lr(n,t)}(c,n);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=zr,u=n[s(318)],l=n[s(273)],f=n[s(289)],p=n[s(408)],d=n[s(407)],h=n[s(370)],v=n[s(283)],m=or(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(314)][t(330)](t(254))>=0)return!1}return!0}(u)?(e=u,Object[s(385)](e,m)):e=new u(m),"RawShaderMaterial"===e[s(285)])throw new Error(s(277));(function(n,t){var e=Xe;e(343),Object[e(385)](n,t);var r=Object[e(375)](t);Object[e(309)](Object[e(227)](r))[e(228)]((function(n){var t=e,r=typeof n[1].get===t(360),o=typeof n[1].set===t(360),i=typeof n[1][t(340)]===t(360),a=n[0]===t(362);return(r||o||i)&&!a}))[e(255)]((function(t){var r=e;typeof n[t[0]]!==r(360)&&Object[r(308)](n,t[0],t[1])}))})(ur(t=a[s(392)](this)),e),t[s(315)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:$[s(366)](),type:e.type,isAlreadyExtended:(r=e[s(344)],o=Xe,i=r.toString()[o(284)](),!(0===i[o(229)](i.indexOf("{")+1,i[o(398)]("}")).trim()[o(343)])),cacheHash:"",silent:v},t[s(408)]=rr(rr({},t[s(408)]||{}),p||{});var g=t.__csm,_=g[s(273)],y=g[s(289)],I=t[s(408)];return t.__csm[s(238)]=t[s(317)](),t[s(281)](_,y,I),t}return e=c,r=[{key:t(312),value:function(){var n=t,e=arguments[n(343)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(408)]=e[n(408)]||this[n(408)],Object.assign(this[n(315)],e);var r=this[n(315)],o=r[n(273)],i=r[n(289)],a=this[n(408)],c=this[n(317)]();this[n(315)][n(238)]=c,this._generateMaterial(o,i,a)}},{key:t(257),value:function(){var n=t,e={baseMaterial:this[n(315)].baseMaterial,fragmentShader:this[n(315)][n(273)],vertexShader:this.__csm.vertexShader,uniforms:this[n(408)],silent:this[n(315)][n(283)],patchMap:this[n(315)][n(407)],cacheKey:this[n(315)][n(370)]},r=new(this[n(362)])(e);return Object[n(385)](this,r),r}},{key:t(317),value:function(){var n=t,e=this.__csm,r=e[n(273)],o=e[n(289)],i=this.uniforms,a=[Dr(r),Dr(o),i].filter((function(n){return void 0!==n}));return a[n(343)]>0?Rn(a,{excludeValues:!0}):this[n(265)]()}},{key:t(281),value:function(n,e,r){var o=t,i=this;this[o(408)]=r||{},this.customProgramCacheKey=function(){var n=o;return i[n(315)][n(238)]};var a=function(t){var r=o;try{var a=i[r(376)]();if(n){var c=i[r(380)](Pr(n),t.fragmentShader,!0);t[r(273)]=a+c}if(e){var s=i[r(380)](Pr(e),t[r(289)]);t[r(289)]=r(292)+s,t[r(289)]=a+t[r(289)]}t[r(408)]=rr(rr({},t.uniforms),i[r(408)]),i.uniforms=t[r(408)]}catch(u){console[r(350)](u)}};if(this[o(315)][o(253)]){var c=this[o(344)];this[o(344)]=function(n,t){c(n,t),a(n)}}else this[o(344)]=a;this[o(371)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(365)]()),this[o(315)][o(407)]);Object[o(309)](xr).forEach((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(230)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(322)](a,e(288))[e(322)](c,'". Shader cannot compile.'))})),Object.entries(_r).forEach((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(305)](c)[o(255)]((function(t){var e=o;Object.keys(c[t])[e(255)]((function(r){var o=e,s=gr[t],u=i[o(315)][o(285)];if("*"===t||Tr(n,t)){if(!(!s||Array[o(271)](s)&&s[o(262)](u)||"*"===s))throw new Error(o(363)[o(322)](t," is not available in ")[o(322)](u,". Shader cannot compile."));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(252)+this[o(315)].instanceID[o(270)](/-/g,"_"),h=n[o(270)](/void\s+main\s*\(\s*\)/g,o(241).concat(d,"()")),v=n[o(262)](o(310)),m=a.includes(o(237));return v&&(m&&this[o(315)][o(253)]?(a=a[o(270)](o(258),o(361)[o(322)](h,"\n            \n            void main() {\n          ")),s=a,u=o(237),l=o(361).concat(d,"();\n            // #_CSM_#\n          "),p=s[(f=Xe)(398)](u),a=-1===p?s:s.substring(0,p)+l+s[f(229)](p+u[f(343)])):a=a.replace(o(258),o(383)[o(322)](r?Er:wr,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(322)](br,o(339))[o(322)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(322)](Sr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ").concat(r?"\n    \n":Mr,o(390))[o(322)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(376),value:function(){var n=t,e=this[n(315)][n(285)];return e?n(394)[n(322)](e[n(291)](),";\n"):n(415)}},{key:t(365),value:function(){var n=t;return this.__csm[n(285)]===n(297)?Ir:yr}}],i=zr,r&&sr(e[i(348)],r),o&&sr(e,o),Object[i(308)](e,i(348),{writable:!1}),c}(D[Xe(236)]);function Cr(n){function t(n){var e=zr;if(typeof n===e(404))return function(n){}[e(362)]("while (true) {}").apply("counter");1!==(""+n/n)[e(343)]||n%20==0?function(){return!0}.constructor(e(249)+e(290))[e(392)]("action"):function(){return!1}[e(362)](e(249)+e(290))[e(282)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kr=Nr;!function(n,t){const e=Nr,r=Br();for(;;)try{if(446917===parseInt(e(285))/1*(parseInt(e(315))/2)+-parseInt(e(290))/3+-parseInt(e(305))/4+parseInt(e(291))/5*(parseInt(e(300))/6)+parseInt(e(286))/7+parseInt(e(282))/8*(parseInt(e(299))/9)+-parseInt(e(301))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","object","init","while (true) {}","80IZBBeC","MeshPhysicalMaterial","test","10ePznij","4493776xLgtgF","function *\\( *\\)","prototype","info","959283pntTAy","10IiSzKj","metalness","toString","apply","chain","clearcoat","length","clearcoatRoughness","382059GYFSwf","2220216CIgzUT","15099410sHifeD","call","action","error","294164VSCQhH","primitive","__proto__","log","index","exception","return (function() ","counter","gger","setStyle","108722ZbMRJA","console","bind","color","roughness","stateObject","trace","#ff00fc","constructor","warn","debu","\n\t\t\t"];return(Br=function(){return n})()}!function(){Fr(this,(function(){const n=Nr,t=new RegExp(n(287)),e=new RegExp(n(278),"i"),r=Hr(n(280));t[n(284)](r+n(295))&&e[n(284)](r+"input")?Hr():r("0")}))()}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nr(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jr(void 0,(function(){const n=Nr,t=function(){const n=Nr;let t;try{t=Function(n(311)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(316)]=t.console||{},r=[n(308),n(275),n(289),n(304),n(310),"table",n(272)];for(let o=0;o<r[n(297)];o++){const t=jr[n(274)][n(288)].bind(jr),i=r[o],a=e[i]||t;t[n(307)]=jr[n(317)](jr),t[n(293)]=a[n(293)].bind(a),e[i]=t}}))();const Ur=[kr(279)];function Nr(n,t){const e=Br();return(Nr=function(n,t){return e[n-=269]})(n,t)}const Lr=en({__name:kr(309),props:{color:{default:kr(273)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=kr,e=n,r={baseMaterial:D[t(283)],metalness:e.metalness,roughness:e.roughness,clearcoat:e[t(296)],clearcoatRoughness:e[t(298)],color:e[t(269)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(277)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Or(r);return pn((()=>{const n=t;o[n(269)][n(314)](e[n(269)]),o.metalness=e[n(292)],o.roughness=e[n(270)],o[n(296)]=e[n(296)],o[n(298)]=e[n(298)]})),(n,e)=>{const r=t;return cn(),sn(r(306),{object:tn(o)},null,8,Ur)}}});function Hr(n){function t(n){const e=Nr;if("string"==typeof n)return function(n){}[e(274)](e(281)).apply(e(312));1!==(""+n/n)[e(297)]||n%20==0?function(){return!0}[e(274)](e(276)+"gger")[e(302)](e(303)):function(){return!1}[e(274)](e(276)+e(313))[e(294)](e(271)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=$r,r=Wr();;)try{if(498924===-parseInt(e(202))/1+-parseInt(e(218))/2*(-parseInt(e(200))/3)+-parseInt(e(217))/4+-parseInt(e(213))/5+parseInt(e(225))/6+-parseInt(e(204))/7+parseInt(e(206))/8*(parseInt(e(220))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[$r(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zr(this,(function(){var n=$r,t=new RegExp(n(208)),e=new RegExp(n(209),"i"),r=Vr(n(222));t[n(223)](r+n(221))&&e[n(223)](r+n(205))?Vr():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wr(){var n=["toString","gger","2632508VvEAGG","243198PMsEGV","warn","7739100CClDdb","chain","init","test","__proto__","3562692PMQJoP",'{}.constructor("return this")( )',"call","debu","log","exception","table","trace","console","9iTdmRU","bind","209760helDmv","apply","5137461zSNOYK","input","16NGdlHS","action","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","info","length","2888225MmHFQU","return (function() "];return(Wr=function(){return n})()}function $r(n,t){var e=Wr();return($r=function(n,t){return e[n-=197]})(n,t)}function Vr(n){function t(n){var e=$r;if("string"==typeof n)return function(n){}[e(210)]("while (true) {}")[e(203)]("counter");1!==(""+n/n)[e(212)]||n%20==0?function(){return!0}.constructor(e(228)+e(216))[e(227)](e(207)):function(){return!1}[e(210)]("debu"+e(216))[e(203)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){var n,t=$r;try{n=Function(t(214)+t(226)+");")()}catch(s){n=window}for(var e=n[t(199)]=n[t(199)]||{},r=[t(229),t(219),t(211),"error",t(230),t(197),t(198)],o=0;o<r.length;o++){var i=Gr[t(210)].prototype[t(201)](Gr),a=r[o],c=e[a]||i;i[t(224)]=Gr[t(201)](Gr),i[t(215)]=c[t(215)][t(201)](c),e[a]=i}}))();export{Ye as C,Lr as _,tt as a,pt as b,Et as c,zt as d,Lt as e,ne as f,Ze as g,De as h,gt as u};

import{b$ as t,a3 as n,C as e,k as r}from"./three.KG0QRRig1731552996711.js";import{b as o}from"./@tresjs.01P8tiuF1731552996711.js";import{R as c}from"./all.three.wBtGWCdG1731552996711.js";import{d as a,b as i,a6 as s,a3 as u,o as f,D as l,J as p,m,u as d}from"./@vue.-THQH3GC1731552996711.js";function g(t,n){const e=x();return(g=function(t,n){return e[t-=367]})(t,n)}!function(t,n){const e=g,r=x();for(;;)try{if(151292===-parseInt(e(407))/1+-parseInt(e(376))/2*(parseInt(e(378))/3)+parseInt(e(406))/4+parseInt(e(380))/5+-parseInt(e(394))/6*(-parseInt(e(370))/7)+parseInt(e(409))/8*(-parseInt(e(401))/9)+parseInt(e(373))/10*(parseInt(e(398))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(379)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(382));n[t(391)](r+t(383))&&e[t(391)](r+t(397))?y():r("0")}))()}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(379)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(){const t=["1198050TTaTdT","gger","init","chain","trace","void main() {","toString","bind","return (function() ","console","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","test","action",'{}.constructor("return this")( )',"515724RunLQt","length","constructor","input","803iELJuo","log","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","6903KZPipe","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","info","prototype","while (true) {}","1052908uaxUmG","172598txcsoV","exception","2608nncJwo","error","replace","vertexShader","14VQBMGJ","#include <emissivemap_fragment>","__proto__","10jeLqEX","string","debu","201772DEUCGd","fragmentShader","3ZssmBg","apply"];return(x=function(){return t})()}v(void 0,(function(){const t=g;let n;try{n=Function(t(388)+t(393)+");")()}catch(o){n=window}const e=n[t(389)]=n[t(389)]||{},r=[t(399),"warn",t(403),t(367),t(408),"table",t(384)];for(let c=0;c<r.length;c++){const n=v.constructor[t(404)][t(387)](v),o=r[c],a=e[o]||n;n[t(372)]=v[t(387)](v),n[t(386)]=a[t(386)].bind(a),e[o]=n}}))();function y(t){function n(t){const e=g;if(typeof t===e(374))return function(t){}[e(396)](e(405))[e(379)]("counter");1!==(""+t/t)[e(395)]||t%20==0?function(){return!0}.constructor(e(375)+"gger").call(e(392)):function(){return!1}[e(396)]("debu"+e(381))[e(379)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=j;!function(t,n){const e=j,r=C();for(;;)try{if(643918===parseInt(e(498))/1*(parseInt(e(531))/2)+parseInt(e(506))/3+-parseInt(e(516))/4*(-parseInt(e(530))/5)+parseInt(e(517))/6*(-parseInt(e(509))/7)+-parseInt(e(543))/8*(parseInt(e(519))/9)+parseInt(e(532))/10*(parseInt(e(481))/11)+parseInt(e(483))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(500)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=j,n=new RegExp(t(539)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=T(t(494));n[t(522)](r+"chain")&&e[t(522)](r+"input")?T():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(500)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=j;let n;try{n=Function(t(540)+t(496)+");")()}catch(o){n=window}const e=n[t(513)]=n[t(513)]||{},r=[t(536),t(503),"info",t(486),"exception",t(518),"trace"];for(let c=0;c<r[t(497)];c++){const n=w.constructor[t(538)][t(514)](w),o=r[c],a=e[o]||n;n[t(533)]=w.bind(w),n[t(501)]=a.toString[t(514)](a),e[o]=n}}))();const I=[_(523)],M=[_(510),_(515)];function C(){const t=["add","stateObject","1986876MOarGg","uniforms","tmsmRef","21mYTRkp","object","TresMeshStandardMaterial","update","console","bind","visible","12zBjkne","2081850QLktaR","table","1258551PkGaKy","call","TresPlaneGeometry","test","rotation-x","value","renderTargetUniform","textureMatrix","repeat","tmRef","TresGroup","300425orghcv","71396heUuYs","423910PzGvVH","__proto__","tpgRef","string","log","counter","prototype","function *\\( *\\)","return (function() ","mirror","reflectorDiffuse","56wiHYhu","debu","onBeforeCompile","assign","attributes","99eJqzhS","TresMesh","12563664QrqFHZ","gger","constructor","error","onBeforeRender","primitive","mixStrength","action","wrapT","color","textureMatrixUniform","init","aoMap",'{}.constructor("return this")( )',"length","11scpTWQ","while (true) {}","apply","toString","set","warn"];return(C=function(){return t})()}function j(t,n){const e=C();return(j=function(t,n){return e[t-=478]})(t,n)}const S=a({__name:_(542),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const h=_;let v,x;const y=a,b=new t(9.5,10),w=i(),C=i(),j=i(),S=new c,T={mirror:{value:y[h(541)]},mixStrength:{value:y[h(489)]}},z=([v,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,x(),v);for(var E=0;E<3;E++)z[E].wrapS=n,z[E][h(491)]=n,z[E][h(527)][h(502)](16,16);const R={color:new e("#444"),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},k=t=>{const n=h;t.uniforms.reflectMap=S[n(525)],t[n(507)][n(526)]=S[n(493)],t[n(507)]=Object[n(479)](t[n(507)],T),(t=>{const n=g;t[n(369)]=t[n(369)][n(368)](n(385),n(390)),t[n(369)]=t[n(369)].replace("#include <project_vertex>",n(402))})(t),(t=>{const n=g;t[n(377)]=t[n(377)].replace("void main() {","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(377)]=t.fragmentShader.replace(n(371),n(400))})(t)};return u((()=>{const t=h;w.value&&(w[t(524)][t(480)].uv1=w[t(524)][t(480)].uv),j[t(524)]&&(j[t(524)][t(495)].channel=1,j.value[t(478)]=k),C[t(524)]&&(C[t(524)][t(504)](S),C[t(524)][t(487)]=(n,e,r)=>{S[t(512)](n,e,r)}),y[t(492)]&&j[t(524)]&&(j[t(524)].color=new e(y[t(492)]))})),(t,n)=>{const e=h;return f(),l(e(529),null,[p(e(482),{ref_key:e(528),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(521),{ref_key:e(534),ref:w,args:[10,10]},null,512),p(e(511),m({ref_key:e(508),ref:j},R),null,16)],8,I),p(e(488),{object:d(b),visible:t.showGridHelper},null,8,M)])}}});function T(t){function n(t){const e=j;if(typeof t===e(535))return function(t){}[e(485)](e(499))[e(500)](e(537));1!==(""+t/t)[e(497)]||t%20==0?function(){return!0}[e(485)](e(544)+"gger")[e(520)](e(490)):function(){return!1}[e(485)](e(544)+e(484))[e(500)](e(505)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

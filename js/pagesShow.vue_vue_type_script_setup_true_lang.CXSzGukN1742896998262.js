import{_ as t,C as n,ab as e,cs as o,ct as r,cu as i,cv as s,n as u,c4 as c,ar as a,at as l}from"./three.0CcRceKb1742896998262.js";import{P as f,e as p,o as d}from"./@tresjs.KzbsBNvc1742896998262.js";import{z as h}from"./three-custom-shader-material.IukAW29E1742896998262.js";import{b as g,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1742896998262.js";import{d as m,b as w,a2 as b,w as I,o as v,H as _,u as x,r as C,a3 as A,e as S,f as j,g as R,N as B,j as k,aj as T,ak as L,F as O,M,J as F,m as Z}from"./@vue.L-brCdZe1742896998262.js";!function(t,n){const e=H,o=W();for(;;)try{if(443822===parseInt(e(391))/1*(parseInt(e(413))/2)+parseInt(e(407))/3+-parseInt(e(393))/4*(parseInt(e(406))/5)+-parseInt(e(402))/6+-parseInt(e(378))/7*(parseInt(e(377))/8)+parseInt(e(385))/9*(-parseInt(e(392))/10)+parseInt(e(390))/11*(parseInt(e(380))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(382)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=H,n=new RegExp(t(398)),e=new RegExp(t(379),"i"),o=P("init");n[t(396)](o+t(412))&&e[t(396)](o+t(387))?P():o("0")}))()}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(382)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();z(void 0,(function(){const t=H;let n;try{n=Function(t(409)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n.console=n.console||{},o=[t(386),t(403),t(414),"error",t(381),t(397),t(384)];for(let i=0;i<o[t(376)];i++){const n=z.constructor[t(373)].bind(z),r=o[i],s=e[r]||n;n[t(374)]=z[t(400)](z),n[t(399)]=s.toString[t(400)](s),e[r]=n}}))();const D=async()=>{const t=H,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(388)]((n=>{const i=t;n[i(394)]===i(411)&&(e=n),n.name===i(383)&&(o=n),n.name===i(408)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function H(t,n){const e=W();return H=function(t,n){return e[t-=373]},H(t,n)}function W(){const t=["CITY_UNTRIANGULATED","chain","328576cPrwUj","info","prototype","__proto__","while (true) {}","length","3592LuAWjy","1155uSMUCU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","348UNFjeb","exception","apply","LANDMASS","trace","747225jfjZBm","log","input","traverse","gger","411851DtYQfb","1linRAJ","50KVXXxu","232KxAWqx","name","action","test","table","function *\\( *\\)","toString","bind","debu","3098856qBnkqR","warn","constructor","call","35770mWZoZy","1843089MUykfs","ROADS","return (function() ","string"];return(W=function(){return t})()}function P(t){function n(t){const e=H;if(typeof t===e(410))return function(t){}.constructor(e(375))[e(382)]("counter");1!==(""+t/t)[e(376)]||t%20==0?function(){return!0}[e(404)]("debu"+e(389))[e(405)](e(395)):function(){return!1}[e(404)](e(401)+"gger")[e(382)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const $=U;!function(t,n){const e=U,o=K();for(;;)try{if(399916===parseInt(e(198))/1+-parseInt(e(154))/2*(-parseInt(e(209))/3)+parseInt(e(150))/4*(-parseInt(e(169))/5)+-parseInt(e(178))/6*(parseInt(e(212))/7)+parseInt(e(191))/8*(-parseInt(e(152))/9)+-parseInt(e(177))/10*(parseInt(e(215))/11)+parseInt(e(194))/12*(parseInt(e(183))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(159)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(t,n){const e=K();return U=function(t,n){return e[t-=150]},U(t,n)}!function(){G(this,(function(){const t=U,n=new RegExp(t(179)),e=new RegExp(t(167),"i"),o=Q("init");n[t(200)](o+"chain")&&e[t(200)](o+t(208))?Q():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(159)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=U;let n;try{n=Function(t(197)+t(202)+");")()}catch(r){n=window}const e=n.console=n.console||{},o=[t(158),t(168),t(156),t(193),"exception",t(186),t(199)];for(let i=0;i<o[t(188)];i++){const n=X.constructor[t(207)][t(163)](X),r=o[i],s=e[r]||n;n[t(162)]=X.bind(X),n[t(157)]=s[t(157)][t(163)](s),e[r]=n}}))();const q=[$(153)];function K(){const t=["error","12PbDjOA","#112233","opacity","return (function() ","137741YuZSJB","trace","test","land",'{}.constructor("return this")( )',"landColor","__csm","constructor","uColor","prototype","input","530055FLBuva","clone","model","3752140hvGhnw","debu","computeBoundingBox","7045159iykQtT","action","143548QCbkEI","forEach","189XJBzVh","object","6qHFgXr","counter","info","toString","log","apply","#ffffff","buildingsModelCustomShader","__proto__","bind","material","color","computeBoundingSphere","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","30BKgAtk","uOpacity","Color","value","DoubleSide","city","primitive","uGradient","10KUvPXy","6ssZMLq","function *\\( *\\)","bulidingsColor","uniforms","renderOrder","16513094kzEJSA","while (true) {}","#ffff00","table","topColor","length","#e523ff","call","55736ACFlvA","setStyle"];return(K=function(){return t})()}const N=m({__name:$(161),props:{model:{},bulidingsColor:{default:$(189)},landColor:{default:$(195)},topColor:{default:$(185)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=$,i=o,s=w(0),u=i[r(211)][r(174)];u[r(182)]=1001;const c=i.model[r(201)];(()=>{const o=r,{geometry:c}=u;c[o(214)](),c[o(166)]();const{max:a,min:l}=c.boundingBox;if(u[o(164)][o(204)])return;const f=new h({baseMaterial:u[o(164)],vertexShader:g,fragmentShader:y,silent:!0,uniforms:{uMax:{value:a},uMin:{value:l},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(171)])(i[o(180)])},uOpacity:{value:i[o(196)]},uLightColor:{value:new n(o(160))},uTopColor:{value:new(t[o(171)])(i[o(187)])},uTime:s,uGradient:{value:i.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:e});u[o(164)].dispose(),u.material=f})();const{onLoop:a}=p();a((({delta:t})=>{s[r(172)]+=t})),b((()=>{const n=r;i.bulidingsColor&&u.material[n(181)][n(206)].value[n(192)](i[n(180)]),i[n(203)]&&((n,e)=>{const o=r;let s;"cu"===n||"land"===n&&(s=Array.isArray(c[o(164)])?c[o(164)]:[c.material],s[o(151)]((n=>{const r=o;n[e].setStyle(i[r(203)]),n.side=t[r(173)]})))})("land",n(165)),i[n(196)]&&(u.material.uniforms[n(170)][n(172)]=i[n(196)])})),I(i,((t,n)=>{const e=r;u[e(164)][e(181)][e(176)].value=t.gradient}));const l=i[r(211)].model[r(210)]();return(t,n)=>{const e=r;return v(),_(e(175),{object:x(l)},null,8,q)}}});function Q(t){function n(t){const e=U;if("string"==typeof t)return function(t){}[e(205)](e(184))[e(159)](e(155));1!==(""+t/t).length||t%20==0?function(){return!0}[e(205)](e(213)+"gger")[e(190)](e(216)):function(){return!1}.constructor("debugger")[e(159)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Y=et;!function(t,n){const e=et,o=tt();for(;;)try{if(675450===-parseInt(e(451))/1+-parseInt(e(452))/2+-parseInt(e(439))/3*(-parseInt(e(437))/4)+parseInt(e(449))/5*(parseInt(e(416))/6)+-parseInt(e(431))/7+parseInt(e(415))/8*(parseInt(e(406))/9)+parseInt(e(402))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(441)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=et,n=new RegExp(t(407)),e=new RegExp(t(421),"i"),o=rt("init");n.test(o+t(453))&&e[t(454)](o+t(417))?rt():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(441)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function tt(){const t=["Wireframe","debu","style","linewidth","geometry","innerWidth","builds","return (function() ","bind","9313724RPLtoT","log","info","uniforms","constructor","stateObject","4YfkjdN"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","2762043xDmXVB","width","apply","resolution","call","applyMatrix4","innerHeight","Shader",'{}.constructor("return this")( )',"primitive","1685OCFbxX","counter","528185RoHVuz","123208oHFuRV","chain","test","action","material","__proto__","color","opacity","error","852860DruQNB","set","value","toString","1773OAMuha","function *\\( *\\)","uOpacity","buildingsLines","object","trace","clone","renderOrder","#FFF","22232uawljg","18558KZbqRT","input","console","length","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(tt=function(){return t})()}J(void 0,(function(){const t=et,n=function(){const t=et;let n;try{n=Function(t(429)+t(447)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(418)]||{},o=[t(432),t(420),t(433),t(401),"exception","table",t(411)];for(let r=0;r<o[t(419)];r++){const n=J[t(435)].prototype[t(430)](J),i=o[r],s=e[i]||n;n[t(398)]=J[t(430)](J),n[t(405)]=s.toString.bind(s),e[i]=n}}))();const nt=[Y(410)];function et(t,n){const e=tt();return et=function(t,n){return e[t-=397]},et(t,n)}const ot=m({__name:Y(409),props:{builds:{},width:{default:1},color:{default:Y(414)},opacity:{default:1},style:{default:Y(422)}},setup(t){const e=Y,c=t;let a=null,l=null;if("Wireframe"===c[e(424)]){const t=new o(c.builds.geometry);let n=(new r).fromEdgesGeometry(t),u=new i({color:c[e(399)],linewidth:c[e(440)],opacity:c[e(400)],transparent:!0,depthWrite:!0,depthTest:!0});u[e(442)][e(403)](window[e(427)],window[e(445)]),a=new s(n,u),a.applyMatrix4(c[e(428)].matrix.clone())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[e(399)])},uOpacity:{value:c.opacity}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:e(438)};const t=new o(c[e(428)][e(426)]),r=new u(l);a=new LineSegments(t,r),a[e(444)](c[e(428)].matrix[e(412)]()),a[e(397)][e(425)]=c.width,a[e(413)]=1e3}return b((()=>{const t=e;c[t(424)]===t(446)&&(c[t(399)]&&(l.uniforms.uColor.value=new n(c[t(399)])),c[t(400)]&&(l[t(434)][t(408)][t(404)]=c[t(400)])),c.style===t(422)&&(c[t(399)]&&(a[t(397)][t(399)]=new n(c[t(399)])),c.opacity&&(a[t(397)].opacity=c[t(400)])),c[t(440)]&&(a[t(397)][t(425)]=c.width)})),(t,n)=>{const o=e;return v(),_(o(448),{object:x(a)},null,8,nt)}}});function rt(t){function n(t){const e=et;if("string"==typeof t)return function(t){}[e(435)]("while (true) {}")[e(441)](e(450));1!==(""+t/t)[e(419)]||t%20==0?function(){return!0}[e(435)]("debugger")[e(443)](e(455)):function(){return!1}[e(435)](e(423)+"gger")[e(441)](e(436)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=ct;!function(t,n){const e=ct,o=dt();for(;;)try{if(433759===parseInt(e(360))/1+-parseInt(e(378))/2*(-parseInt(e(392))/3)+parseInt(e(379))/4*(parseInt(e(402))/5)+-parseInt(e(363))/6*(parseInt(e(390))/7)+-parseInt(e(374))/8+-parseInt(e(391))/9*(parseInt(e(367))/10)+parseInt(e(375))/11*(parseInt(e(405))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(400)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=ct,n=new RegExp(t(403)),e=new RegExp(t(395),"i"),o=pt("init");n[t(406)](o+"chain")&&e[t(406)](o+t(397))?pt():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(400)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=dt();return ct=function(t,n){return e[t-=358]},ct(t,n)}ut(void 0,(function(){const t=ct,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n.console=n[t(362)]||{},o=[t(365),t(364),"info","error",t(377),t(384),"trace"];for(let r=0;r<o[t(399)];r++){const n=ut[t(401)][t(389)][t(361)](ut),i=o[r],s=e[i]||n;n.__proto__=ut.bind(ut),n[t(372)]=s.toString[t(361)](s),e[i]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=m({__name:it(386),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=C({clearColor:n(398),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(387)]}),s=C({autoRotate:r.autoRotate,enableDamping:!0});let u=null;r[n(369)]&&([e,o]=A((()=>D())),e=await e,o(),u=e);const f=w(),p=w();return(t,e)=>{const o=n,c=S(o(394));return v(),j(c,Z({ref_key:o(380),ref:p},i,{"window-size":""}),{default:R((()=>[B(o(373),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),k(x(d),T(L(s)),null,16),e[0]||(e[0]=B("TresAmbientLight",{color:o(366)},null,-1)),e[1]||(e[1]=B("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(366)},null,-1)),r.showBuildings&&x(u)?(v(),_(O,{key:0},[k(N,{model:x(u)},null,8,[o(407)]),k(ot,{builds:x(u).city,color:o(358)},null,8,[o(388)])],64)):M("",!0),F(t[o(359)],o(396)),r.showAxesHelper?(v(),_(o(371),at)):M("",!0),r[o(370)]?(v(),_(o(383),lt)):M("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=ct;if(typeof t===e(382))return function(t){}[e(401)](e(368))[e(400)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+e(385))[e(393)](e(381)):function(){return!1}[e(401)](e(404)+e(385)).apply(e(376)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function dt(){const t=["623780PuqybQ","while (true) {}","showBuildings","showGridHelper","TresAxesHelper","toString","TresPerspectiveCamera","3327216YLYhqO","2229106PHEWRL","stateObject","exception","8GZnpCE","967432dZKTyD","tcRef","action","string","TresGridHelper","table","gger","pagesShow","disableRender","builds","prototype","1020901BSdhnQ","36kKLOjK","435498kdnImy","call","TresCanvas","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ability","input","#000000","length","apply","constructor","5LRgtfj","function *\\( *\\)","debu","48bnNfXc","test","model","#000","$slots","195282PiUWQd","bind","console","30mgDYsb","warn","log","#ffffff"];return(dt=function(){return t})()}export{N as _,ot as a,ft as b,D as l};

import{a6 as e,_ as t}from"./three.W6GmiHfn1739444016646.js";import{e as n,h as r,o as a,f as o}from"./@tresjs.Q4_KYO2a1739444016646.js";import{a as s}from"./index.gpAaVrpj1739444016646.js";import"./index.IpjFUco91739444016646.js";import{z as i}from"./three-custom-shader-material.kf-ieBUt1739444016646.js";import{p as l}from"./gl-noise.BrVtymbx1739444016646.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as v,j as m,u as d,r as _,f as b,g as w,aj as M,ak as y,m as j,al as x}from"./@vue.NRI7TcgI1739444016646.js";import{P as T}from"./tweakpane.yDiyAAkA1739444016646.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.lMUEJiXC1739444016646.js";import"./@vueuse.6yH4xZkk1739444016646.js";import"./three-stdlib.p59O9BRw1739444016646.js";import"./@pmndrs.G4ph9toA1739444016646.js";import"./object-hash.1aeUIJEf1739444016646.js";import"./@amap.KAEokh9M1739444016646.js";import"./jszip.kB071t9j1739444016646.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.b-TY7oSr1739444016646.js";import"./all.three.jD4iRnJs1739444016646.js";import"./oimophysics.x0jH7fze1739444016646.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.wmn3SQkr1739444016646.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ZSUFvMsu1739444016646.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.or7FQKEc1739444016646.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.IoXxOWkl1739444016646.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.6lmVhMXT1739444016646.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.8hrVkTwP1739444016646.js";const z=P;function S(){const e=["gger","tmRef","side","info","705879jdWTYM","136AIkDGD","while (true) {}","debu","input","warn","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","uTime","baseMaterial","args","toString","#b3ffff","fragment","2432oFWTDU","brightness","DoubleSide","fragmentShader","rotation-x","apply","166pDHcqn","waterColor","trace","uHeight","customWaterMesh","23914682qCSEho","waterHighlight","material","constructor","dispose","7047zNXzyZ","console","table","error","call","string","bind","test","MeshPhysicalMaterial","height","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","needsUpdate","Flatshading","98305PknSWG","TresMesh","vertex","Color","TresBoxGeometry","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","vertexShader","action","init","length","value","60tRsJAP","exception","9950171cskuUf","1114exfhZp","convertLinearToSRGB","3621070HDdrzW"];return(S=function(){return e})()}!function(e,t){const n=P,r=S();for(;;)try{if(760961===-parseInt(n(213))/1*(-parseInt(n(239))/2)+-parseInt(n(249))/3*(parseInt(n(233))/4)+-parseInt(n(262))/5*(-parseInt(n(210))/6)+parseInt(n(212))/7+-parseInt(n(221))/8*(parseInt(n(220))/9)+-parseInt(n(215))/10+parseInt(n(244))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[P(238)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){I(this,(function(){const e=P,t=new RegExp("function *\\( *\\)"),n=new RegExp(e(259),"i"),r=D(e(207));t.test(r+"chain")&&n[e(256)](r+e(224))?D():r("0")}))()}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();G(void 0,(function(){const e=P;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(a){t=window}const n=t.console=t[e(250)]||{},r=["log",e(225),e(219),e(252),e(211),e(251),e(241)];for(let o=0;o<r[e(208)];o++){const t=G[e(247)].prototype[e(255)](G),a=r[o],s=n[a]||t;t.__proto__=G[e(255)](G),t[e(230)]=s[e(230)].bind(s),n[a]=t}}))();const H=[z(237)],B=[z(229)];function P(e,t){const n=S();return(P=function(e,t){return n[e-=206]})(e,t)}const W=u({__name:z(243),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:z(231)},brightness:{default:1},baseMaterial:{default:e}},setup(e){const a=z,o=e,s=c(null),u={vertex:a(267),fragment:a(226)},_={uTime:{value:0},waterColor:{value:new(t[a(265)])(o.waterColor).convertLinearToSRGB()},waterHighlight:{value:new(t[a(265)])(o[a(245)])[a(214)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o[a(234)]},uHeight:{value:o[a(258)]}},{onLoop:b}=n();return b((({elapsed:e})=>{_[a(227)].value=-e/5})),p((()=>{const e=a;o[e(258)]&&(_[e(242)][e(209)]=o.height),o[e(240)]&&(_[e(240)][e(209)]=new(t[e(265)])(o.waterColor).convertLinearToSRGB()),o[e(245)]&&(_[e(245)][e(209)]=new(t[e(265)])(o[e(245)]).convertLinearToSRGB()),o[e(234)]&&(_[e(234)][e(209)]=o.brightness)})),f((()=>o[a(261)]),(e=>{const t=a;s[t(209)][t(246)][t(260)]=!0})),f((()=>o.baseMaterial),(e=>{const n=a,r=new i({baseMaterial:t[e],vertexShader:l(u[n(264)]),fragmentShader:u[n(232)],uniforms:_,flatShading:o[n(261)],side:t[n(235)],roughness:.2,metalness:.1,silent:!0});s[n(209)][n(246)][n(248)](),s[n(209)][n(246)]=r})),(e,n)=>{const o=a;return g(),h(o(263),{ref_key:o(217),ref:s,"rotation-x":-Math.PI/2},[v(o(266),{args:[5,5,e.height,64,64,1]},null,8,B),m(d(r),{baseMaterial:t[o(257)],vertexShader:d(l)(u.vertex),fragmentShader:u[o(232)],uniforms:_,side:t[o(235)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[o(228),o(268),o(236),o(218),"flatShading"])],8,H)}}});function D(e){function t(e){const n=P;if(typeof e===n(254))return function(e){}[n(247)](n(222))[n(238)]("counter");1!==(""+e/e)[n(208)]||e%20==0?function(){return!0}.constructor(n(223)+n(216))[n(253)](n(206)):function(){return!1}[n(247)](n(223)+n(216))[n(238)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}const O=A;!function(e,t){const n=A,r=k();for(;;)try{if(199101===parseInt(n(148))/1+-parseInt(n(213))/2*(-parseInt(n(203))/3)+-parseInt(n(176))/4*(-parseInt(n(180))/5)+-parseInt(n(214))/6*(parseInt(n(179))/7)+-parseInt(n(177))/8+-parseInt(n(167))/9*(parseInt(n(151))/10)+parseInt(n(199))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[A(147)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function k(){const e=["35562rCsPZd","2526gEdfnv","apply","153613EAUhBT","target","action","436120Pbuvrp","bind","toString","while (true) {}","pos-y.jpg","string",'{}.constructor("return this")( )',"chain","#627179","waterColor","call","counter","addBlade","pos-z.jpg","neg-x.jpg","waterHighlight","54Ogiftp","warn","MeshBasicMaterial","label","#3a78a2","brightness","浪头颜色","__proto__","test","4PcLkXt","2986280hhNlyw","pos-x.jpg","2534dqtgHG","649465IeIfdj","debu","length","table","gger","#52a7f7","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","MeshToonMaterial","MeshNormalMaterial","change","水体颜色","MeshDepthMaterial","MeshStandardMaterial","info","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","exception","MeshLambertMaterial","MeshPhongMaterial","3429492spfVlA","TresAmbientLight","MeshPhysicalMaterial","input","66oiVluH","Flatshading","constructor","ACESFilmicToneMapping","value","customWater","return (function() ","log","addBinding","prototype"];return(k=function(){return e})()}!function(){F(this,(function(){const e=A,t=new RegExp("function *\\( *\\)"),n=new RegExp(e(186),"i"),r=L("init");t[e(175)](r+e(158))&&n[e(175)](r+e(202))?L():r("0")}))()}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[A(147)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function A(e,t){const n=k();return(A=function(e,t){return n[e-=147]})(e,t)}N(void 0,(function(){const e=A;let t;try{t=Function(e(209)+e(157)+");")()}catch(a){t=window}const n=t[e(187)]=t[e(187)]||{},r=[e(210),e(168),e(194),"error",e(196),e(183),"trace"];for(let o=0;o<r[e(182)];o++){const t=N[e(205)][e(212)][e(152)](N),a=r[o],s=n[a]||t;t[e(174)]=N[e(152)](N),t[e(153)]=s[e(153)][e(152)](s),n[a]=t}}))();const R=u({__name:O(208),setup(e){const n=O,r=_({alpha:!0,toneMapping:t[n(206)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(159),sectionColor:n(171),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(185),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(201)}),c=new T;return c[n(211)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,n(160),{label:n(191)}),c[n(211)](u,n(166),{label:n(173)}),c[n(211)](u,n(172),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,"Flatshading",{label:n(204)}),c[n(163)]({view:"list",label:"材质",options:[{text:n(201),value:n(201)},{text:"MeshBasicMaterial",value:n(169)},{text:n(189),value:"MeshNormalMaterial"},{text:n(193),value:"MeshStandardMaterial"},{text:n(198),value:"MeshPhongMaterial"},{text:n(188),value:"MeshToonMaterial"},{text:n(197),value:n(197)},{text:"MeshDepthMaterial",value:n(192)}],value:u.baseMaterial}),c.on(n(190),(e=>{const t=n;"材质"===e[t(149)][t(170)]&&(u.baseMaterial=e[t(207)])})),(e,t)=>{const c=n;return g(),b(d(o),j(r,{"window-size":""}),{default:w((()=>[t[0]||(t[0]=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),m(d(a),M(y(i)),null,16),t[1]||(t[1]=v(c(200),{intensity:.5},null,-1)),t[2]||(t[2]=v("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),m(W,M(y(u)),null,16),m(d(C),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[m(d(s),{files:[c(178),c(165),c(155),"neg-y.jpg",c(164),"neg-z.jpg"],path:c(195)})])),_:1}))])),_:1},16)}}});function L(e){function t(e){const n=A;if(typeof e===n(156))return function(e){}[n(205)](n(154))[n(147)](n(162));1!==(""+e/e).length||e%20==0?function(){return!0}[n(205)](n(181)+n(184))[n(161)](n(150)):function(){return!1}.constructor(n(181)+"gger")[n(147)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{R as default};

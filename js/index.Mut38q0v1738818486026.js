var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as b,m as I,n as S,ca as w,cb as M,K as R,h as E,b as A,e as T,bN as D,_ as z,l as P,a_ as O,V as C,bp as F,z as B,aj as k,B as j,c as U,aK as N,g as L,M as H,ar as Z,a9 as G,U as W,a as V,aP as $,a6 as K}from"./three.WgQSjl1J1738818486026.js";import{m as q,l as Y,e as X}from"./@tresjs.ZGxFoQtw1738818486026.js";import{R as J}from"./three-stdlib.9mw3NDon1738818486026.js";import{y as Q,b as nn,w as tn,a as en,u as rn,d as on,W as an,a3 as cn,a0 as sn,o as un,H as ln,J as fn,M as pn,a7 as dn,a2 as hn,q as vn,f as mn,N as gn,a8 as _n,r as yn,B as xn,v as bn,s as In,F as Sn,a6 as wn,m as Mn}from"./@vue.NRI7TcgI1738818486026.js";import{M as Rn,a as En,C as An}from"./@pmndrs.rZbwRp5K1738818486026.js";import{h as Tn}from"./object-hash.ZlXR4dyw1738818486026.js";var Dn=Bn;!function(n,t){for(var e=Bn,r=Fn();;)try{if(164176===-parseInt(e(412))/1+parseInt(e(408))/2*(-parseInt(e(414))/3)+parseInt(e(399))/4+parseInt(e(383))/5*(-parseInt(e(382))/6)+parseInt(e(387))/7+-parseInt(e(372))/8*(-parseInt(e(388))/9)+-parseInt(e(398))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Bn(378)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zn(this,(function(){var n=Bn,t=new RegExp(n(384)),e=new RegExp(n(377),"i"),r=kn(n(397));t[n(385)](r+"chain")&&e[n(385)](r+n(391))?kn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Bn(378)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pn(void 0,(function(){var n,t=Bn;try{n=Function(t(396)+t(386)+");")()}catch(s){n=window}for(var e=n.console=n[t(373)]||{},r=[t(381),"warn",t(410),t(409),t(390),t(393),t(406)],o=0;o<r[t(411)];o++){var i=Pn.constructor[t(395)][t(379)](Pn),a=r[o],c=e[a]||i;i.__proto__=Pn[t(379)](Pn),i[t(404)]=c.toString.bind(c),e[a]=i}}))();class On extends s{constructor(){var n=Bn;super(),this.virtualScene=null,this[n(375)]=new u}add(...n){var t=Bn;return this[t(375)][t(392)](...n),this}[Dn(389)](){var n=Dn;this[n(375)][n(371)]((t=>{var e=n;t instanceof l&&(t[e(400)].dispose(),t[e(401)][e(376)](),t[e(401)][e(374)]&&t[e(401)][e(374)][e(376)](),this[e(375)][e(407)](t))})),this[n(375)]=null}}const Cn=On;function Fn(){var n=["1766457YwhkbP","2909124jKBikA","destructor","exception","input","add","table","action","prototype","return (function() ","init","3533390VINDqK","1062248KHFwpk","geometry","material","constructor","gger","toString","counter","trace","remove","8lVcGwB","error","info","length","110338mfpZjr","debu","61311AlcHsO","traverse","8Zregtn","console","map","virtualScene","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","bind","call","log","6XlmjcM","657740hgDxWN","function *\\( *\\)","test",'{}.constructor("return this")( )'];return(Fn=function(){return n})()}function Bn(n,t){var e=Fn();return(Bn=function(n,t){return e[n-=371]})(n,t)}function kn(n){function t(n){var e=Bn;if("string"==typeof n)return function(n){}[e(402)]("while (true) {}")[e(378)](e(405));1!==(""+n/n)[e(411)]||n%20==0?function(){return!0}.constructor(e(413)+e(403))[e(380)](e(394)):function(){return!1}[e(402)](e(413)+e(403)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const jn=Nn;function Un(){const n=["console","749520ngDBBY","test","8TQOqru","outood/mossy_forest_1k.hdr","911Kmzrzb","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","indoor/small_hangar_01_1k.hdr","bind","warn","length","debu","gger","call","venice/venice_sunset_1k.hdr","function *\\( *\\)","trace","262BWsyVl","error","chain","4246190sALRzl","indoor/abandoned_games_room_02_1k.hdr","city/shanghai_bund_1k.hdr","city/canary_wharf_1k.hdr","exception","265245RpyCJF","prototype","1164457PLnvmn","string","stateObject","outdoor/snowy_forest_path_01_1k.hdr","8wyOdlZ","__proto__","outdoor/outdoor_umbrellas_1k.hdr","studio/poly_haven_studio_1k.hdr","table","600975bwRBSL","while (true) {}","apply","311256xDIhYh","constructor"];return(Un=function(){return n})()}function Nn(n,t){const e=Un();return(Nn=function(n,t){return e[n-=375]})(n,t)}!function(n,t){const e=Nn,r=Un();for(;;)try{if(126694===parseInt(e(401))/1*(parseInt(e(413))/2)+-parseInt(e(380))/3*(-parseInt(e(399))/4)+parseInt(e(391))/5+parseInt(e(394))/6+parseInt(e(382))/7*(parseInt(e(386))/8)+-parseInt(e(397))/9+-parseInt(e(375))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ln(this,(function(){const n=Nn,t=new RegExp(n(411)),e=new RegExp(n(402),"i"),r=Gn("init");t[n(398)](r+n(415))&&e[n(398)](r+"input")?Gn():r("0")}))()}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Hn(void 0,(function(){const n=Nn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(396)]=t.console||{},r=["log",n(405),"info",n(414),n(379),n(390),n(412)];for(let o=0;o<r[n(406)];o++){const t=Hn[n(395)][n(381)][n(404)](Hn),i=r[o],a=e[i]||t;t[n(387)]=Hn[n(404)](Hn),t.toString=a.toString[n(404)](a),e[i]=t}}))();const Zn={sunset:jn(410),studio:jn(389),city:jn(378),umbrellas:jn(388),night:"outdoor/satara_night_1k.hdr",forest:jn(400),snow:jn(385),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:jn(403),urban:jn(376),modern:"city/modern_buildings_2_1k.hdr",shangai:jn(377)};function Gn(n){function t(n){const e=Nn;if(typeof n===e(383))return function(n){}[e(395)](e(392)).apply("counter");1!==(""+n/n)[e(406)]||n%20==0?function(){return!0}[e(395)]("debugger")[e(409)]("action"):function(){return!1}.constructor(e(407)+e(408)).apply(e(384)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Wn=Vn;function Vn(n,t){const e=Xn();return(Vn=function(n,t){return e[n-=418]})(n,t)}!function(n,t){const e=Vn,r=Xn();for(;;)try{if(715189===parseInt(e(421))/1*(parseInt(e(450))/2)+parseInt(e(439))/3+-parseInt(e(454))/4*(parseInt(e(463))/5)+-parseInt(e(426))/6+parseInt(e(453))/7*(parseInt(e(442))/8)+-parseInt(e(418))/9*(parseInt(e(434))/10)+-parseInt(e(423))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(458)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$n(this,(function(){const n=Vn,t=new RegExp(n(422)),e=new RegExp(n(436),"i"),r=Yn(n(459));t.test(r+n(431))&&e[n(460)](r+n(441))?Yn():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(458)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Kn(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(451)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(448)]=t[n(448)]||{},r=[n(420),"warn",n(429),n(428),n(419),n(465),n(456)];for(let o=0;o<r[n(424)];o++){const t=Kn.constructor[n(455)][n(457)](Kn),i=r[o],a=e[i]||t;t[n(461)]=Kn.bind(Kn),t.toString=a[n(425)].bind(a),e[i]=t}}))();const qn=Wn(432);function Yn(n){function t(n){const e=Vn;if("string"==typeof n)return function(n){}[e(464)]("while (true) {}")[e(458)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(445)+"gger")[e(427)](e(440)):function(){return!1}[e(464)]("debugger")[e(458)](e(447)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xn(){const n=["action","input","1151024INeVuV","isArray","backgroundBlurriness","debu","texture","stateObject","console","environment","2242666TNdvaF","return (function() ","isColor","49djvxYE","28pmfISm","prototype","trace","bind","apply","init","test","__proto__","mapping","319050YhrfnW","constructor","table","join","52263mhCbWB","exception","log","1nVxjaC","function *\\( *\\)","8256886TzHvcl","length","toString","7420254gQTETX","call","error","info","keys","chain","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","Preset must be one of: ","50prLmVa","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setPath","Failed to load environment map: ","3149250uHqHjg"];return(Xn=function(){return n})()}const Jn=tt;!function(n,t){const e=tt,r=et();for(;;)try{if(926030===-parseInt(e(473))/1*(-parseInt(e(469))/2)+parseInt(e(508))/3+parseInt(e(506))/4*(-parseInt(e(500))/5)+-parseInt(e(491))/6+-parseInt(e(485))/7*(-parseInt(e(514))/8)+parseInt(e(512))/9*(parseInt(e(492))/10)+-parseInt(e(483))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qn(this,(function(){const n=tt,t=new RegExp(n(507)),e=new RegExp(n(489),"i"),r=ot(n(484));t.test(r+n(480))&&e.test(r+"input")?ot():r("0")}))()}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(509)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tt(n,t){const e=et();return(tt=function(n,t){return e[n-=462]})(n,t)}function et(){const n=["toString","24LeFRjD","prototype","return (function() ","call","environment","error","value","while (true) {}","70282rczmkM","$slots","frames","stateObject","30OPNTfM","trace","resolution","minFilter","update","background","useDefaultScene","chain","component","virtualScene","17629469lAbBOQ","init","2287789ygtEBG","__proto__","action","texture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","far","2755956aayolf","6644600VoMJqL","type","string","warn","dispose","info","debu","gger","52045mSsTkz","generateMipmaps","exception","console","default","constructor","556tGwEWR","function *\\( *\\)","5207145lrjsxE","apply","bind","length","9lzruZq"];return(et=function(){return n})()}nt(void 0,(function(){const n=tt,t=function(){const n=tt;let t;try{t=Function(n(463)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(503)]=t[n(503)]||{},r=["log",n(495),n(497),n(466),n(502),"table",n(474)];for(let o=0;o<r[n(511)];o++){const t=nt.constructor[n(462)][n(510)](nt),i=r[o],a=e[i]||t;t[n(486)]=nt[n(510)](nt),t[n(513)]=a[n(513)][n(510)](a),e[i]=t}}))();const rt=on({__name:Jn(481),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Jn;let r,o;const i=n,a=nn(null);t({texture:a});const{extend:c,renderer:s,scene:u}=q();let l=null,y=nn(null),x=null;const b=nn(null);an((()=>{var n,t;const e=tt;null==(n=b[e(467)])||n.destructor(),null==(t=y.value)||t[e(496)]()}));const{onBeforeLoop:I}=X();let S=1;I((()=>{const n=tt;x&&b.value&&y[n(467)]&&(i[n(471)]===1/0||S<i[n(471)])&&(i[n(479)]?x[n(477)](s[n(467)],u.value):x[n(477)](s[n(467)],dn(b[n(467)][n(482)])),S++)}));const w=([r,o]=cn((()=>async function(n,t){const e=Wn,{scene:r,invalidate:o}=q(),{preset:i,blur:a,files:c=nn([]),path:s=nn(""),background:u}=Q(n);tn(n,(()=>{o()}));const l=nn(null),h=en((()=>Array[e(443)](c[e(435)]))),v=en((()=>h[e(435)]?f:J));return tn([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(435)])){try{l[r(435)]=await Y(v.value,h.value?[...rn(n)]:rn(n),(n=>{t&&n[r(437)](rn(t))}))}catch(o){throw new Error(r(438)+o)}l.value&&(l[r(435)].mapping=h[r(435)]?p:d)}}),{immediate:!0}),tn(l,(n=>{const t=e;r[t(435)]&&n&&(r[t(435)][t(449)]=n)}),{immediate:!0}),tn([u,l],(([n,o])=>{const i=e;if(r[i(435)]){let e=(null==t?void 0:t[i(435)])?t[i(435)][i(446)]:o,a=r[i(435)].background;!(null==a?void 0:a[i(452)])&&(a=void 0),r[i(435)].background=n?e:a}}),{immediate:!0}),tn((()=>null==a?void 0:a[e(435)]),(n=>{const t=e;r.value&&n&&(r[t(435)][t(444)]=n)}),{immediate:!0}),tn((()=>null==i?void 0:i[e(435)]),(async n=>{const t=e;if(n&&n in Zn){const e=qn,i=Zn[n];try{l[t(435)]=await Y(J,i,(n=>{e&&n[t(437)](e)}))}catch(r){throw new Error(t(438)+r)}l.value&&l[t(435)]&&(l[t(435)][t(462)]=d),o()}else if(n&&!(n in Zn))throw new Error(t(433)+Object[t(430)](Zn)[t(466)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=tt;n?(u[t(467)][t(465)]=n[t(488)],i.background&&(u[t(467)][t(478)]=n.texture)):(u.value[t(465)]=w[t(467)],i[t(478)]&&(u[t(467)][t(478)]=w.value))};tn(w,(n=>{const t=tt;y[t(467)]&&M(y[t(467)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const R=()=>{var n;const t=tt;null==(n=y.value)||n[t(496)](),y.value=new v(i[t(475)]),x=new m(i.near,i[t(490)],y.value),i.useDefaultScene?(y[t(467)][t(488)][t(493)]=g,y.value[t(488)][t(501)]=!1,y[t(467)][t(488)][t(476)]=_,y[t(467)].texture.magFilter=_):y[t(467)][t(488)][t(493)]=h,M(y[t(467)])};return tn((()=>sn()[e(504)]),(n=>{var t,r;const o=e;n&&(!y[o(467)]||y[o(467)].texture.type!==h)&&(l=n(),Array.isArray(l)&&l[o(511)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t.type))?R():(null==(r=y[o(467)])||r[o(496)](),y[o(467)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,tn((()=>i[e(479)]),(n=>{y[e(467)]&&R()})),(n,t)=>{const r=e;return rn(y)?(un(),ln("TresEnvSence",{key:0,ref_key:"envSence",ref:b},[fn(n[r(470)],"default")],512)):pn("",!0)}}});function ot(n){function t(n){const e=tt;if(typeof n===e(494))return function(n){}[e(505)](e(468))[e(509)]("counter");1!==(""+n/n)[e(511)]||n%20==0?function(){return!0}[e(505)](e(498)+"gger")[e(464)](e(487)):function(){return!1}[e(505)](e(498)+e(499))[e(509)](e(472)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const it=at;function at(n,t){const e=dt();return(at=function(n,t){return e[n-=495]})(n,t)}!function(n,t){const e=at,r=dt();for(;;)try{if(741580===parseInt(e(546))/1+-parseInt(e(532))/2+-parseInt(e(533))/3*(parseInt(e(530))/4)+-parseInt(e(495))/5+-parseInt(e(502))/6+-parseInt(e(515))/7*(-parseInt(e(517))/8)+parseInt(e(535))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ct(this,(function(){const n=at,t=new RegExp(n(538)),e=new RegExp(n(522),"i"),r=vt(n(527));t[n(516)](r+"chain")&&e[n(516)](r+n(500))?vt():r("0")}))()}();const st=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();st(void 0,(function(){const n=at;let t;try{t=Function(n(528)+n(520)+");")()}catch(o){t=window}const e=t.console=t[n(503)]||{},r=["log",n(543),n(496),n(521),n(526),n(511),n(504)];for(let i=0;i<r[n(514)];i++){const t=st[n(505)][n(519)][n(540)](st),o=r[i],a=e[o]||t;t[n(508)]=st[n(540)](st),t[n(507)]=a[n(507)].bind(a),e[o]=t}}))();const ut={key:0,args:[0,1,64]},lt={key:1,args:[.5,1,64]},ft={key:2},pt=[it(525),it(537),it(531),"color"];function dt(){const n=["stateObject","circle","gger","input","value","7965432ajsyvg","console","trace","constructor","TresPlaneGeometry","toString","__proto__","material","apply","table","from","needsUpdate","length","14609fdVpDO","test","3496EtakpQ","multiplyScalar","prototype",'{}.constructor("return this")( )',"error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresRingGeometry","counter","toneMapped","exception","init","return (function() ","debu","4600532RcKegT","side","2847426FWBrXk","3oQxWBH","while (true) {}","32098842PDvWfs","color","map","function *\\( *\\)","call","bind","index","intensity","warn","ring","TresMesh","956548KwKSKy","3960535exSQQT","info"];return(dt=function(){return n})()}const ht=on({__name:it(541),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=nn();return hn((()=>{const n=at;e[n(501)]&&(e[n(501)][n(536)][n(518)](t[n(542)]),e[n(501)][n(513)]=!0)})),tn((()=>t.color),(n=>{const r=at;e[r(501)]&&(e[r(501)][r(536)].set(n),e[r(501)][r(536)].multiplyScalar(t.intensity),e[r(501)].needsUpdate=!0)})),vn((()=>{})),(n,r)=>{const o=at;return un(),ln(o(545),null,[t[o(512)]===o(498)?(un(),ln("TresRingGeometry",ut)):t.from===o(544)?(un(),ln(o(523),lt)):"rect"===t[o(512)]?(un(),ln(o(506),ft)):(un(),mn(t[o(512)],{key:3,args:t})),gn("TresMeshBasicMaterial",{ref_key:o(509),ref:e,toneMapped:n[o(525)],map:n.map,side:rn(x),color:n[o(536)]},null,8,pt)])}}});function vt(n){function t(n){const e=at;if("string"==typeof n)return function(n){}[e(505)](e(534))[e(510)](e(524));1!==(""+n/n)[e(514)]||n%20==0?function(){return!0}[e(505)](e(529)+e(499))[e(539)]("action"):function(){return!1}.constructor(e(529)+e(499)).apply(e(497)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=xt,r=_t();for(;;)try{if(227378===parseInt(e(386))/1+-parseInt(e(414))/2+parseInt(e(416))/3*(-parseInt(e(410))/4)+-parseInt(e(400))/5*(parseInt(e(406))/6)+-parseInt(e(389))/7*(-parseInt(e(385))/8)+parseInt(e(383))/9+parseInt(e(396))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(399)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){mt(this,(function(){const n=xt,t=new RegExp(n(422)),e=new RegExp(n(411),"i"),r=bt(n(401));t[n(393)](r+n(419))&&e[n(393)](r+"input")?bt():r("0")}))()}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(399)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _t(){const n=["112276FmLcMF","string","warn","7MCHFNr","length","action","counter","test","console","format","1040350FzrbrZ","gger","trace","apply","5OqDFej","init","dispose","toString","value","error","586578yOIhBo","stateObject","setRenderTarget","debu","16REFfYG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthTexture","height","299308KJZnpe","info","30021dbjHnb","constructor",'{}.constructor("return this")( )',"chain","bind","width","function *\\( *\\)","call","clear","2608326mmswFo","log","69584KSAgTf"];return(_t=function(){return n})()}function yt(n){const t=nn(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=_n(n)?Q(n):Q(yn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=q();return hn((()=>{var n;const a=xt;null==(n=t[a(404)])||n[a(402)](),t[a(404)]=new b((null==r?void 0:r.value)||p[a(421)][a(404)],(null==e?void 0:e.value)||p.height[a(404)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(404)])),(null==i?void 0:i[a(404)])&&(t[a(404)][a(412)]=new S((null==r?void 0:r[a(404)])||p[a(421)][a(404)],(null==e?void 0:e[a(404)])||p[a(413)].value),t[a(404)][a(412)][a(395)]=w,t[a(404)][a(412)].type=M)})),s((()=>{const n=xt;(null==a?void 0:a[n(404)])&&(l.value[n(408)](dn(t[n(404)])),l[n(404)][n(424)](),l.value.render(dn(f[n(404)]),dn(u.value)),l[n(404)][n(408)](null))})),xn((()=>{var n;const e=xt;null==(n=t[e(404)])||n[e(402)]()})),t}function xt(n,t){const e=_t();return(xt=function(n,t){return e[n-=383]})(n,t)}function bt(n){function t(n){const e=xt;if(typeof n===e(387))return function(n){}[e(417)]("while (true) {}")[e(399)](e(392));1!==(""+n/n)[e(390)]||n%20==0?function(){return!0}[e(417)](e(409)+e(397))[e(423)](e(391)):function(){return!1}.constructor(e(409)+e(397))[e(399)](e(407)),t(++n)}try{if(n)return t;t(0)}catch(e){}}gt(void 0,(function(){const n=xt,t=function(){const n=xt;let t;try{t=Function("return (function() "+n(418)+");")()}catch(e){t=window}return t}(),e=t[n(394)]=t[n(394)]||{},r=[n(384),n(388),n(415),n(405),"exception","table",n(398)];for(let o=0;o<r[n(390)];o++){const t=gt[n(417)].prototype[n(420)](gt),i=r[o],a=e[i]||t;t.__proto__=gt[n(420)](gt),t[n(403)]=a[n(403)][n(420)](a),e[i]=t}}))();const It=Et;!function(n,t){const e=Et,r=Mt();for(;;)try{if(525552===parseInt(e(278))/1*(-parseInt(e(265))/2)+-parseInt(e(268))/3+parseInt(e(256))/4*(-parseInt(e(277))/5)+-parseInt(e(251))/6+parseInt(e(271))/7+-parseInt(e(299))/8*(parseInt(e(282))/9)+parseInt(e(248))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(283)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){St(this,(function(){const n=Et,t=new RegExp(n(263)),e=new RegExp(n(284),"i"),r=Tt(n(288));t[n(279)](r+"chain")&&e.test(r+n(255))?Tt():r("0")}))()}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(283)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Mt(){const n=["bind","render","counter","input","92tplbLp","exception","value","action","envMapIntensity","info","constructor","function *\\( *\\)","__proto__","2AzOhLe","length","fboResolution","1338873sOxtCI","string","toString","4566268lzGkvd","toneMapping","index","MeshTransmissionMaterialClass","call","stateObject","7455aGMpOy","744231wVMmgD","test","uuid","background","873CmIgsL","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","while (true) {}","log","init","error","prototype","buffer","thickness","debu","isMesh","warn","setRenderTarget","console","backside","36048txVeLk","TresMeshTransmissionMaterial","backsideThickness","side","17939330JDiCcq","texture","gger","1552848TWEpri"];return(Mt=function(){return n})()}wt(void 0,(function(){const n=Et,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(297)]=t[n(297)]||{},r=[n(287),n(295),n(261),n(289),n(257),"table","trace"];for(let o=0;o<r[n(266)];o++){const t=wt[n(262)][n(290)][n(252)](wt),i=r[o],a=e[i]||t;t[n(264)]=wt[n(252)](wt),t[n(270)]=a[n(270)][n(252)](a),e[i]=t}}))();const Rt=[It(291),It(302)];function Et(n,t){const e=Mt();return(Et=function(n,t){return e[n-=248]})(n,t)}const At=on({__name:It(273),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=It,r=bn(),{extend:o,scene:i,renderer:a,camera:c}=q(),s=bn(),u=n;o({MeshTransmissionMaterial:Rn});const l=new En,{onBeforeLoop:f}=X(),p=yt({width:u[e(267)],height:u.fboResolution,isLoop:!1}),d=yt({width:u[e(267)],height:u[e(267)],isLoop:!1});let h,v,m,g;return vn((async()=>{const n=e;await In(),s[n(258)]=function(n,t){let e;return n.traverse((n=>{const r=Et;n[r(294)]&&n[r(285)]&&n.material[r(280)]===t&&(e=n)})),e}(i.value,r.value[n(280)])})),f((({elapsed:n})=>{const t=e;r[t(258)].time=n,r[t(258)][t(291)]===d[t(258)][t(249)]&&s[t(258)]&&(m=a[t(258)][t(272)],h=i[t(258)][t(281)],v=r[t(258)].envMapIntensity,g=s[t(258)][t(285)][t(302)],s[t(258)][t(285)]=l,u[t(298)]&&(a[t(258)][t(296)](p[t(258)]),a.value.render(i[t(258)],c[t(258)]),s.value[t(285)]=r[t(258)],s[t(258)].material[t(292)]=u[t(301)],s.value[t(285)][t(291)]=p[t(258)][t(249)],s[t(258)][t(285)][t(302)]=R,s[t(258)][t(285)][t(260)]=0),a.value.setRenderTarget(d[t(258)]),a[t(258)][t(253)](i[t(258)],c[t(258)]),s.value[t(285)].buffer=d.value.texture,s.value[t(285)]=r[t(258)],s[t(258)][t(285)][t(292)]=u[t(292)],s[t(258)][t(285)].side=g,s[t(258)][t(285)].envMapIntensity=v,i[t(258)][t(281)]=h,a[t(258)].setRenderTarget(null),a[t(258)][t(272)]=m)})),t({root:r,constructor:Rn}),(n,t)=>{const o=e;return un(),ln(o(300),{ref_key:o(274),ref:r,buffer:rn(d)[o(249)],side:rn(x)},null,8,Rt)}}});function Tt(n){function t(n){const e=Et;if(typeof n===e(269))return function(n){}[e(262)](e(286))[e(283)](e(254));1!==(""+n/n)[e(266)]||n%20==0?function(){return!0}[e(262)](e(293)+e(250))[e(275)](e(259)):function(){return!1}[e(262)]("debu"+e(250))[e(283)](e(276)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=Ot;!function(n,t){const e=Ot,r=Ft();for(;;)try{if(905835===parseInt(e(247))/1*(-parseInt(e(273))/2)+parseInt(e(272))/3+-parseInt(e(284))/4*(parseInt(e(266))/5)+parseInt(e(254))/6*(parseInt(e(242))/7)+-parseInt(e(257))/8+parseInt(e(258))/9+-parseInt(e(228))/10*(-parseInt(e(263))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(279)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Ot,t=new RegExp(n(241)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Bt(n(265));t[n(249)](r+"chain")&&e[n(249)](r+n(225))?Bt():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(279)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ot(n,t){const e=Ft();return(Ot=function(n,t){return e[n-=225]})(n,t)}Pt(void 0,(function(){const n=Ot,t=function(){const n=Ot;let t;try{t=Function(n(277)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(237)]||{},r=[n(233),n(276),n(245),n(238),n(227),n(230),n(281)];for(let o=0;o<r[n(278)];o++){const t=Pt.constructor[n(283)].bind(Pt),i=r[o],a=e[i]||t;t.__proto__=Pt[n(261)](Pt),t[n(268)]=a[n(268)].bind(a),e[i]=t}}))();const Ct=on({__name:Dt(248),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=nn(null),r=nn(null),o=nn(null);return vn((()=>{const n=Ot;if(!r[n(267)])return;if(!o[n(267)])return;r[n(267)].matrixWorld[n(229)]();const e=(new E)[n(282)](o[n(267)],t.precise),i=new A,a=new T,c=e[n(259)].x-e[n(251)].x,s=e[n(259)].y-e[n(251)].y,u=e[n(259)].z-e[n(251)].z;e[n(244)](i),e.getBoundingSphere(a);const l=t[n(271)]?s/2:t[n(269)]?-s/2:0,f=t[n(246)]?-c/2:t[n(280)]?c/2:0,p=t[n(232)]?u/2:t[n(264)]?-u/2:0;r[n(267)].position[n(236)](t[n(253)]||t[n(235)]?0:-i.x+f,t[n(253)]||t[n(252)]?0:-i.y+l,t.disable||t[n(231)]?0:-i.z+p)})),(n,t)=>{const i=Ot;return un(),ln(i(240),{ref_key:i(234),ref:e},[gn("TresGroup",{ref_key:i(275),ref:r},[gn(i(240),{ref_key:i(243),ref:o},[fn(n.$slots,i(239))],512)],512)],512)}}});function Ft(){const n=["value","toString","bottom","gger","top","3408309aktUKf","2SqOsfL","debu","outer","warn","return (function() ","length","apply","right","trace","setFromObject","prototype","707964ofZvbC","input","call","exception","38810HZuPva","identity","table","disableZ","front","log","gref","disableX","set","console","error","default","TresGroup","function *\\( *\\)","7TKfaRi","inner","getCenter","info","left","1179469ZBauSn","index","test","counter","min","disableY","disable","3629274iVqhnD","stateObject","while (true) {}","11193312fmBjAQ","3711510BrdAao","max","action","bind","constructor","6281GmGPkn","back","init","25CSgXZL"];return(Ft=function(){return n})()}function Bt(n){function t(n){const e=Ot;if("string"==typeof n)return function(n){}[e(262)](e(256))[e(279)](e(250));1!==(""+n/n)[e(278)]||n%20==0?function(){return!0}[e(262)]("debu"+e(270))[e(226)](e(260)):function(){return!1}[e(262)](e(274)+"gger")[e(279)](e(255)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kt=Ht;!function(n,t){const e=Ht,r=Zt();for(;;)try{if(163986===-parseInt(e(454))/1+-parseInt(e(491))/2+-parseInt(e(458))/3*(-parseInt(e(473))/4)+parseInt(e(450))/5*(-parseInt(e(498))/6)+parseInt(e(489))/7+parseInt(e(497))/8*(parseInt(e(449))/9)+parseInt(e(475))/10*(parseInt(e(479))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(493)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jt(this,(function(){const n=Ht,t=new RegExp(n(495)),e=new RegExp(n(484),"i"),r=Wt("init");t.test(r+n(465))&&e[n(467)](r+n(457))?Wt():r("0")}))()}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ut(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function("return (function() "+n(460)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(464)]||{},r=[n(468),n(478),n(488),n(455),"exception",n(466),n(470)];for(let o=0;o<r[n(463)];o++){const t=Ut[n(486)][n(456)][n(501)](Ut),i=r[o],a=e[i]||t;t.__proto__=Ut.bind(Ut),t.toString=a[n(480)][n(501)](a),e[i]=t}}))();const Nt=["object"],Lt=[kt(490)];function Ht(n,t){const e=Zt();return(Ht=function(n,t){return e[n-=447]})(n,t)}function Zt(){const n=["trace","color","lightSource","10636LXxUaW","worldRadius","73290DvdVTt","value","params","warn","121HIeMJi","toString","helper","#ffffff","set","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","constructor","ior","info","645099nCmOJI","object","194492rdfPDh","index","apply","backside","function *\\( *\\)","group","24272yoKolY","222PPSufP","far","stateObject","bind","TresGroup","intensity","171psdGCZ","23555zfTOZC","debu","gger","update","4944JAvOdY","error","prototype","input","237DWhSsO","causticsOnly",'{}.constructor("return this")( )',"call","primitive","length","console","chain","table","test","log","string"];return(Zt=function(){return n})()}const Gt=on({__name:kt(492),props:{color:{default:kt(482)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=kt,e=n,{renderer:r}=q(),o=An(r[t(476)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(474)]});o[t(477)][t(494)]=!0;const i=bn(null);tn(i,(n=>{n&&o.scene.add(n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o[t(453)]()})),hn((()=>{const n=t;e[n(471)]&&o[n(477)][n(471)][n(483)](e.color),e[n(487)]&&(o[n(477)].ior=e[n(487)]),e.backsideIOR&&(o[n(477)].backsideIOR=e.backsideIOR),e.far&&(o[n(477)][n(499)]=e[n(499)]),e[n(474)]&&(o.params[n(474)]=e.worldRadius),e[n(448)]&&(o[n(477)][n(448)]=e[n(448)])})),tn((()=>e[t(459)]),(n=>{o.params.causticsOnly=n})),tn((()=>e.lightSource),(n=>{const e=t;n&&o[e(477)][e(472)]instanceof A&&o[e(477)][e(472)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return un(),ln(Sn,null,[gn(r(447),{ref_key:r(496),ref:i},[fn(n.$slots,"default")],512),gn("primitive",{object:rn(o)[r(496)],position:[0,.003,0]},null,8,Nt),gn(r(462),{object:rn(o)[r(481)],visible:!1},null,8,Lt)],64)}}});function Wt(n){function t(n){const e=Ht;if(typeof n===e(469))return function(n){}[e(486)]("while (true) {}")[e(493)](e(485));1!==(""+n/n)[e(463)]||n%20==0?function(){return!0}.constructor(e(451)+e(452))[e(461)]("action"):function(){return!1}[e(486)]("debu"+e(452))[e(493)](e(500)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=qt,r=$t();for(;;)try{if(921710===-parseInt(e(299))/1+-parseInt(e(285))/2*(-parseInt(e(307))/3)+-parseInt(e(298))/4+-parseInt(e(279))/5+parseInt(e(282))/6+parseInt(e(326))/7+parseInt(e(327))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(324)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(){const n=["test","string","console","table","748525NVoUTt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","4611048SZKNOK","input","length","33630joFoKY","isArray","log","stateObject","remove",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","dispose","replace","forEach","#ifdef USE_SHADOWMAP","ShaderChunk","compile","debu","6133204ypUkfY","261351epxnSN","bind",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","error","counter","while (true) {}","; i ++) {\n        offset = (vogelDiskSample(j, ","constructor","291MChdXZ","exception","gger",'{}.constructor("return this")( )',"properties","__proto__","material","programs","init","prototype","function *\\( *\\)","toString",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","info","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","trace","call","apply","shadowmap_pars_fragment","1703884wHIltp","1784736Ucgsbh","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","action"];return($t=function(){return n})()}!function(){Vt(this,(function(){const n=qt,t=new RegExp(n(317)),e=new RegExp(n(280),"i"),r=Xt(n(315));t[n(275)](r+"chain")&&e[n(275)](r+n(283))?Xt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(324)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=$t();return(qt=function(n,t){return e[n-=275]})(n,t)}Kt(void 0,(function(){const n=qt,t=function(){const n=qt;let t;try{t=Function("return (function() "+n(310)+");")()}catch(e){t=window}return t}(),e=t[n(277)]=t[n(277)]||{},r=[n(287),n(281),n(320),n(302),n(308),n(278),n(322)];for(let o=0;o<r[n(284)];o++){const t=Kt[n(306)][n(316)][n(300)](Kt),i=r[o],a=e[i]||t;t[n(312)]=Kt[n(300)](Kt),t[n(318)]=a[n(318)].bind(a),e[i]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=qt,o=D[r(325)];return z[r(295)][r(325)]=z[r(295)][r(325)][r(292)](r(294),r(328)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(305)+e+r(290)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(319)+t+r(321)+e+r(301))[r(292)]("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;z[i(295)][i(325)]=o,function(n,t,e){const r=qt;t.traverse((t=>{const e=qt;t[e(313)]&&(Array[e(286)](t[e(313)])?t[e(313)][e(293)]((t=>{const r=e;n.properties[r(289)](t),t[r(291)]()})):(n[e(311)][e(289)](t[e(313)]),t[e(313)][e(291)]()))})),n[r(320)][r(314)][r(284)]=0,n[r(296)](t,e)}(n,t,e)}};function Xt(n){function t(n){const e=qt;if(typeof n===e(276))return function(n){}[e(306)](e(304)).apply(e(303));1!==(""+n/n).length||n%20==0?function(){return!0}[e(306)](e(297)+e(309))[e(323)](e(329)):function(){return!1}[e(306)](e(297)+"gger")[e(324)](e(288)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jt=Qt;function Qt(n,t){const e=ne();return(Qt=function(n,t){return e[n-=376]})(n,t)}function ne(){const n=["index","2095452nneUjh","trace","stateObject","log","material","length","4997251ZEHZVv","bind","value","console","dispose","1769830bZwEEc","__proto__","441448pFqRWK","return (function() ","constructor","function *\\( *\\)","exception","action","init","83994iJENwI","traverse","test","apply","warn","10mlFFxZ","16bmPzFg","while (true) {}","debu","291540JzwHdW","21499AiiXNy","table","gger","string","chain","toString","30VBRiiU"];return(ne=function(){return n})()}!function(n,t){const e=Qt,r=ne();for(;;)try{if(468799===-parseInt(e(378))/1+parseInt(e(411))/2*(-parseInt(e(377))/3)+-parseInt(e(399))/4+parseInt(e(384))/5*(parseInt(e(406))/6)+parseInt(e(392))/7+parseInt(e(412))/8*(parseInt(e(386))/9)+-parseInt(e(397))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){te(this,(function(){const n=Qt,t=new RegExp(n(402)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=oe(n(405));t[n(408)](r+n(382))&&e[n(408)](r+"input")?oe():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ee(void 0,(function(){const n=Qt,t=function(){const n=Qt;let t;try{t=Function(n(400)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(395)]=t[n(395)]||{},r=[n(389),n(410),"info","error",n(403),n(379),n(387)];for(let o=0;o<r.length;o++){const t=ee.constructor.prototype.bind(ee),i=r[o],a=e[i]||t;t[n(398)]=ee[n(393)](ee),t[n(383)]=a[n(383)][n(393)](a),e[i]=t}}))();const re=on({__name:Jt(385),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=q();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(394)],e.value),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o[t(394)][t(407)]((n=>{const e=t;n instanceof l&&n[e(390)][e(396)]()})))};return a(t),tn(t,(()=>{a(t)})),(n,t)=>null}});function oe(n){function t(n){const e=Qt;if(typeof n===e(381))return function(n){}[e(401)](e(413))[e(409)]("counter");1!==(""+n/n)[e(391)]||n%20==0?function(){return!0}[e(401)](e(376)+e(380)).call(e(404)):function(){return!1}[e(401)](e(376)+e(380))[e(409)](e(388)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ie=ce;!function(n,t){const e=ce,r=fe();for(;;)try{if(659170===-parseInt(e(287))/1*(-parseInt(e(259))/2)+parseInt(e(283))/3*(-parseInt(e(256))/4)+parseInt(e(248))/5*(parseInt(e(270))/6)+-parseInt(e(285))/7+parseInt(e(267))/8*(-parseInt(e(276))/9)+-parseInt(e(254))/10*(-parseInt(e(272))/11)+parseInt(e(258))/12*(-parseInt(e(239))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ce(n,t){const e=fe();return(ce=function(n,t){return e[n-=237]})(n,t)}!function(){ae(this,(function(){const n=ce,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(255),"i"),r=pe("init");t[n(246)](r+"chain")&&e.test(r+n(245))?pe():r("0")}))()}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();se(void 0,(function(){const n=ce;let t;try{t=Function(n(275)+n(249)+");")()}catch(o){t=window}const e=t.console=t[n(282)]||{},r=[n(261),"warn",n(252),n(247),"exception",n(237),n(284)];for(let i=0;i<r.length;i++){const t=se[n(257)].prototype[n(243)](se),o=r[i],a=e[o]||t;t.__proto__=se[n(243)](se),t[n(241)]=a.toString.bind(a),e[o]=t}}))();const ue=parseInt(B[ie(277)](/\D+/g,""));class le extends P{constructor(n=new C){const t=ie;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(271)+t(ue>=154?244:279)+t(280),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:F,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(253)](n.x,n.y),this[t(250)]=new Float32Array([0,1,2,2,3])}[ie(253)](n,t){const e=ie;this.uniforms[e(268)].value[e(266)](n,t),this[e(260)][e(274)][e(264)].set(n,t)[e(281)](.5)}[ie(278)](n){const t=ie;this.uniforms[t(286)][t(264)].copy(n)}}function fe(){const n=["7358049WhzAbW","replace","setResolution","encodings_fragment",">\n        }","multiplyScalar","console","585PvhJUB","trace","1086267mYXsYL","resolution","2KKwVbI","table","debu","790205PnRVhD","stateObject","toString","counter","bind","colorspace_fragment","input","test","error","15ShqkZD",'{}.constructor("return this")( )',"kernel","gger","info","setTexelSize","1910sPAfXa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","16180XPIzSs","constructor","36FdMUXX","228596OSNNEP","uniforms","log","string","length","value","apply","set","8GxpLca","texelSize","while (true) {}","2192166SbLMOW","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","73623RThsbx","call","halfTexelSize","return (function() "];return(fe=function(){return n})()}function pe(n){function t(n){const e=ce;if(typeof n===e(262))return function(n){}[e(257)](e(269))[e(265)](e(242));1!==(""+n/n)[e(263)]||n%20==0?function(){return!0}[e(257)](e(238)+e(251))[e(273)]("action"):function(){return!1}[e(257)](e(238)+"gger")[e(265)](e(240)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const de=me;!function(n,t){const e=me,r=ge();for(;;)try{if(680745===parseInt(e(439))/1+-parseInt(e(440))/2+-parseInt(e(488))/3*(parseInt(e(450))/4)+parseInt(e(459))/5*(parseInt(e(489))/6)+parseInt(e(458))/7*(-parseInt(e(442))/8)+-parseInt(e(466))/9+parseInt(e(494))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const he=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[me(462)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){he(this,(function(){const n=me,t=new RegExp(n(486)),e=new RegExp(n(465),"i"),r=ye(n(491));t[n(463)](r+n(460))&&e[n(463)](r+"input")?ye():r("0")}))()}();const ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[me(462)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function me(n,t){const e=ge();return(me=function(n,t){return e[n-=436]})(n,t)}function ge(){const n=["kernel","init","table","counter","23766450azrBaf","USE_DEPTH","maxDepthThreshold","renderTargetA","884916piWGaA","1119576NQvOVQ","scene","80tLFhkJ","console","setRenderTarget","toString","depthBuffer","info","render","error","3905288alxmJe","frustumCulled",'{}.constructor("return this")( )',"constructor","setTexelSize","warn","depthTexture","bind","835331MCEmii","5PccEPA","chain","debu","apply","test","renderToScreen","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3881421xxLOyQ","string","exception","__proto__","screen","inputBuffer","value","trace","setAttribute","camera","position","uniforms","renderTargetB","action","gger","length","convolutionMaterial","texture","clone","return (function() ","function *\\( *\\)","log","3DiIinv","3479358LyHZas"];return(ge=function(){return n})()}ve(void 0,(function(){const n=me;let t;try{t=Function(n(485)+n(452)+");")()}catch(o){t=window}const e=t[n(443)]=t[n(443)]||{},r=[n(487),n(455),n(447),n(449),n(468),n(492),n(473)];for(let i=0;i<r[n(481)];i++){const t=ve[n(453)].prototype.bind(ve),o=r[i],a=e[o]||t;t[n(469)]=ve[n(457)](ve),t.toString=a[n(445)].bind(a),e[o]=t}}))();class _e{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=me;this[c(464)]=!1,this[c(438)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA[c(484)](),this[c(482)]=new le,this[c(482)][c(454)](1/t,1/e),this.convolutionMaterial.setResolution(new C(t,e)),this[c(441)]=new u,this[c(475)]=new k,this[c(482)].uniforms.minDepthThreshold[c(472)]=r,this[c(482)][c(477)][c(437)].value=o,this[c(482)][c(477)].depthScale.value=i,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=a,this[c(482)].defines[c(436)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(474)](c(476),new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(470)]=new l(p,this[c(482)]),this[c(470)][c(451)]=!1,this[c(441)].add(this[c(470)])}[de(448)](n,t,e){const r=de,o=this[r(441)],i=this[r(475)],a=this[r(438)],c=this[r(478)],s=this[r(482)],u=s[r(477)];u[r(446)][r(472)]=t[r(456)];const l=s[r(490)];let f,p,d,h=t;for(p=0,d=l[r(481)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(490)][r(472)]=l[p],u[r(471)][r(472)]=h[r(483)],n[r(444)](f),n[r(448)](o,i),h=f;u.kernel.value=l[p],u[r(471)][r(472)]=h[r(483)],n[r(444)](this[r(464)]?null:e),n[r(448)](o,i)}}function ye(n){function t(n){const e=me;if(typeof n===e(467))return function(n){}[e(453)]("while (true) {}").apply(e(493));1!==(""+n/n)[e(481)]||n%20==0?function(){return!0}.constructor(e(461)+"gger").call(e(479)):function(){return!1}.constructor(e(461)+e(480)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function xe(){var n=["while (true) {}","_tDiffuseBlur","734142VDccQn","depthScale","342105orxdqZ","#include <emissivemap_fragment>","info","trace","log","_blurStrength","_depthToBlurRatioBias",'{}.constructor("return this")( )',"USE_UV","_depthScale","tDepth","mixBlur","_mixContrast","distortionMap","_tDiffuse","distortion","onBeforeCompile","uniforms","#include <project_vertex>","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","vertexShader","error","_hasBlur","114YgqAFO","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","counter","4460786SaKbcJ","_mirror","prototype","return (function() ","fragmentShader","bind","1971564tbGCHw","depthToBlurRatioBias","gger","20fKuDKn","defines","mixStrength","setValues","input","8rOFHYy","__proto__","_textureMatrix","mixContrast","maxDepthThreshold","_tDepth","replace","test","tDiffuse","_mixBlur","_minDepthThreshold","value","minDepthThreshold","3050222KrPNZz","init","_distortionMap","function *\\( *\\)","mirror","_maxDepthThreshold","46014atqdOQ","debu","constructor","apply","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","hasBlur","call","chain","textureMatrix","tDiffuseBlur","3614697KXyERD","48ybenyf","_distortion","toString","length"];return(xe=function(){return n})()}var be=Se;!function(n,t){for(var e=Se,r=xe();;)try{if(930812===-parseInt(e(508))/1+-parseInt(e(534))/2*(-parseInt(e(490))/3)+parseInt(e(543))/4+parseInt(e(510))/5*(-parseInt(e(502))/6)+parseInt(e(484))/7*(parseInt(e(471))/8)+-parseInt(e(501))/9+parseInt(e(546))/10*(parseInt(e(537))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ie=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Se(493)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(n,t){var e=xe();return(Se=function(n,t){return e[n-=471]})(n,t)}!function(){Ie(this,(function(){var n=Se,t=new RegExp(n(487)),e=new RegExp(n(530),"i"),r=Re(n(485));t[n(478)](r+n(498))&&e[n(478)](r+n(550))?Re():r("0")}))()}();var we=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){for(var n=Se,t=function(){var n,t=Se;try{n=Function(t(540)+t(517)+");")()}catch(e){n=window}return n}(),e=t[n(529)]=t[n(529)]||{},r=[n(514),"warn",n(512),n(532),"exception","table",n(513)],o=0;o<r[n(505)];o++){var i=we[n(492)][n(539)].bind(we),a=r[o],c=e[a]||i;i[n(472)]=we[n(542)](we),i[n(504)]=c.toString[n(542)](c),e[a]=i}}))();class Me extends N{constructor(n={}){var t=Se;super(n),this[t(476)]={value:null},this[t(486)]={value:null},this._tDiffuse={value:null},this[t(507)]={value:null},this[t(473)]={value:null},this[t(533)]={value:!1},this[t(538)]={value:0},this[t(480)]={value:0},this._blurStrength={value:.5},this[t(481)]={value:.9},this[t(489)]={value:1},this._depthScale={value:0},this[t(516)]={value:.25},this[t(503)]={value:1},this._mixContrast={value:1},this[t(549)](n)}[be(526)](n){var t,e=be;!(null==(t=n[e(547)])?void 0:t[e(518)])&&(n.defines[e(518)]=""),n[e(527)][e(496)]=this[e(533)],n[e(527)][e(479)]=this[e(524)],n[e(527)][e(520)]=this[e(476)],n[e(527)][e(523)]=this[e(486)],n[e(527)][e(500)]=this[e(507)],n[e(527)].textureMatrix=this._textureMatrix,n[e(527)][e(488)]=this[e(538)],n[e(527)].mixBlur=this[e(480)],n[e(527)][e(548)]=this._blurStrength,n[e(527)][e(483)]=this[e(481)],n[e(527)][e(475)]=this[e(489)],n.uniforms[e(509)]=this[e(519)],n.uniforms[e(544)]=this[e(516)],n[e(527)][e(525)]=this[e(503)],n[e(527)][e(474)]=this[e(522)],n[e(531)]=e(535)+n.vertexShader,n.vertexShader=n[e(531)].replace(e(528),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader=e(495)+n[e(541)],n[e(541)]=n[e(541)][e(477)](e(511),e(494))}get tDiffuse(){var n=be;return this._tDiffuse[n(482)]}set[be(479)](n){this._tDiffuse.value=n}get tDepth(){var n=be;return this._tDepth[n(482)]}set[be(520)](n){var t=be;this._tDepth[t(482)]=n}get[be(523)](){var n=be;return this[n(486)][n(482)]}set[be(523)](n){var t=be;this[t(486)][t(482)]=n}get[be(500)](){var n=be;return this._tDiffuseBlur[n(482)]}set[be(500)](n){this[be(507)].value=n}get[be(499)](){var n=be;return this._textureMatrix[n(482)]}set textureMatrix(n){var t=be;this._textureMatrix[t(482)]=n}get[be(496)](){return this[be(533)].value}set hasBlur(n){var t=be;this._hasBlur[t(482)]=n}get[be(488)](){return this._mirror.value}set mirror(n){var t=be;this[t(538)][t(482)]=n}get[be(521)](){var n=be;return this[n(480)][n(482)]}set[be(521)](n){var t=be;this[t(480)][t(482)]=n}get[be(548)](){var n=be;return this[n(515)][n(482)]}set mixStrength(n){this[be(515)].value=n}get[be(483)](){var n=be;return this[n(481)][n(482)]}set minDepthThreshold(n){this[be(481)].value=n}get[be(475)](){var n=be;return this[n(489)][n(482)]}set maxDepthThreshold(n){this[be(489)].value=n}get[be(509)](){return this._depthScale.value}set[be(509)](n){var t=be;this[t(519)][t(482)]=n}get[be(544)](){var n=be;return this[n(516)][n(482)]}set[be(544)](n){var t=be;this._depthToBlurRatioBias[t(482)]=n}get distortion(){var n=be;return this[n(503)][n(482)]}set[be(525)](n){var t=be;this[t(503)][t(482)]=n}get[be(474)](){var n=be;return this[n(522)][n(482)]}set mixContrast(n){this[be(522)].value=n}}function Re(n){function t(n){var e=Se;if("string"==typeof n)return function(n){}.constructor(e(506))[e(493)](e(536));1!==(""+n/n)[e(505)]||n%20==0?function(){return!0}[e(492)](e(491)+e(545))[e(497)]("action"):function(){return!1}.constructor("debu"+e(545)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ee(n,t){const e=Pe();return(Ee=function(n,t){return e[n-=438]})(n,t)}const Ae=Ee;!function(n,t){const e=Ee,r=Pe();for(;;)try{if(131467===-parseInt(e(489))/1+-parseInt(e(492))/2*(-parseInt(e(497))/3)+parseInt(e(475))/4*(-parseInt(e(531))/5)+-parseInt(e(512))/6*(-parseInt(e(451))/7)+-parseInt(e(463))/8*(-parseInt(e(456))/9)+-parseInt(e(466))/10*(-parseInt(e(438))/11)+-parseInt(e(477))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Ee,t=new RegExp(n(461)),e=new RegExp(n(454),"i"),r=Ce("init");t[n(470)](r+n(506))&&e.test(r+n(529))?Ce():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();De(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(449)+n(541)+");")()}catch(e){t=window}return t}(),e=t[n(505)]=t[n(505)]||{},r=[n(522),n(532),n(524),n(443),n(493),"table",n(503)];for(let o=0;o<r[n(520)];o++){const t=De[n(462)][n(533)][n(480)](De),i=r[o],a=e[i]||t;t[n(496)]=De[n(480)](De),t[n(448)]=a.toString[n(480)](a),e[i]=t}}))();const ze=[Ae(540),Ae(539),"t-diffuse",Ae(507),"t-diffuse-blur",Ae(498),Ae(440),Ae(468),Ae(484),Ae(472),"depth-to-blur-ratio-bias",Ae(476),Ae(485),"mix-contrast",Ae(508),Ae(483),"defines-USE_DISTORTION"];function Pe(){const n=["multiplyScalar","1046290daoRon","warn","prototype","clipPlane","enabled","reflect","material","setFromNormalAndCoplanarPoint","mirror","texture-matrix",'{}.constructor("return this")( )',"reflectorOffset","19294EDBSFO","string","mix-strength","call","key","error","dispose","sign","stateObject","setRenderTarget","toString","return (function() ","rotationMatrix","61649cspxeB","reflectorPlane","dot","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","cameraWorldPosition","288veaAZi","gger","matrixWorld","updateMatrixWorld","shadowMap","function *\\( *\\)","constructor","24696zxOekl","autoUpdate","depthTexture","1050zPDGvv","elements","min-depth-threshold","lookAt","test","add","depth-scale","texture","textureMatrix","4mqFJOg","distortion","1652052HkctWJ","set","projectionMatrix","bind","apply","action","defines-USE_DEPTH","max-depth-threshold","distortionMap","isMesh","visible","setFromMatrixPosition","237192xokiRK","normal","traverse","4094yOWSoc","exception","assign","materialRef","__proto__","363iNDMDC","has-blur","uuid","matrixWorldInverse","value","reflectorWorldPosition","trace","far","console","chain","t-depth","defines-USE_BLUR","multiply","lookAtPosition","applyMatrix4","126zCpEFc","copy","counter","extractRotation","view","render","subVectors","autoClear","length","position","log","target","info","negate","debu","clear","virtualCamera","input"];return(Pe=function(){return n})()}const Oe=on({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ae,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Q(o),{camera:y,scene:x,renderer:R,extend:E}=q();E({MeshReflectorMaterial:Me});const T=bn(),D=bn(),z=bn(),P=bn(),O=en((()=>{const n=Ee;return"number"==typeof f[n(501)]?[f[n(501)],f[n(501)]]:f[n(501)]})),C=en((()=>O[r(501)][0]>0||O[r(501)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};hn((()=>{var n;const o=r;null==(n=T[o(501)])||n[o(473)][o(444)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(501)]=new b(i.value,i[o(501)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i.value,w,M)},t(y,e(x)))),D[o(501)]=new b(i[o(501)],i.value,f),z[o(501)]=new _e({resolution:i[o(501)],width:O[o(501)][0],height:O[o(501)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(501)],depthScale:u[o(501)],depthToBlurRatioBias:l.value}),P[o(501)]={mirror:p,textureMatrix:F[o(474)],mixBlur:d,tDiffuse:T[o(501)][o(473)],tDepth:T[o(501)][o(465)],tDiffuseBlur:T[o(501)][o(473)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(501)],mixContrast:_,"defines-USE_BLUR":C[o(501)]?"":void 0,"defines-USE_DEPTH":u[o(501)]>0?"":void 0,"defines-USE_DISTORTION":g[o(501)]?"":void 0}}));const B=bn(),{onLoop:k}=X();k((()=>{var n;const t=r;if(!(B[t(501)]&&R[t(501)]&&T[t(501)]&&y.value))return;const e=function(n,t){const e=Ee;let r;return n[e(491)]((n=>{const o=e;n[o(486)]&&n[o(537)]&&n[o(537)][o(499)]===t&&(r=n)})),r}(x[t(501)],B[t(501)][t(499)]);if(!e)return;e[t(487)]=!1;const i=R[t(501)].xr[t(535)],a=R[t(501)].shadowMap[t(464)];(function(n){var t,e;const r=Ee;if(F[r(502)][r(488)](n[r(458)]),F[r(455)].setFromMatrixPosition(null==(t=y[r(501)])?void 0:t.matrixWorld),F[r(450)][r(515)](n[r(458)]),F.normal[r(478)](0,0,1),F[r(490)][r(511)](F.rotationMatrix),F[r(502)].addScaledVector(F[r(490)],o[r(542)]),F[r(516)][r(518)](F[r(502)],F[r(455)]),F[r(516)][r(453)](F.normal)>0)return;F[r(516)][r(536)](F.normal)[r(525)](),F[r(516)][r(471)](F[r(502)]),F[r(450)][r(515)](null==(e=y[r(501)])?void 0:e[r(458)]),F[r(510)].set(0,0,-1),F.lookAtPosition[r(511)](F.rotationMatrix),F[r(510)][r(471)](F[r(455)]),F.target[r(518)](F[r(502)],F.lookAtPosition),F.target[r(536)](F[r(490)])[r(525)](),F[r(523)].add(F[r(502)]),F[r(528)][r(521)].copy(F.view),F[r(528)].up.set(0,1,0),F.virtualCamera.up[r(511)](F[r(450)]),F.virtualCamera.up[r(536)](F[r(490)]),F[r(528)][r(469)](F[r(523)]),F[r(528)][r(504)]=(null==y?void 0:y[r(501)]).far,F[r(528)][r(459)](),F[r(528)].projectionMatrix[r(513)]((null==y?void 0:y.value)[r(479)]),F.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(474)][r(509)](F.virtualCamera[r(479)]),F.textureMatrix.multiply(F[r(528)][r(500)]),F[r(474)][r(509)](n[r(458)]),F.reflectorPlane[r(538)](F[r(490)],F[r(502)]),F[r(452)].applyMatrix4(F.virtualCamera[r(500)]),F.clipPlane[r(478)](F[r(452)][r(490)].x,F[r(452)][r(490)].y,F[r(452)][r(490)].z,F[r(452)].constant);const i=F[r(528)].projectionMatrix;F.q.x=(Math[r(445)](F.clipPlane.x)+i[r(467)][8])/i[r(467)][0],F.q.y=(Math[r(445)](F.clipPlane.y)+i[r(467)][9])/i[r(467)][5],F.q.z=-1,F.q.w=(1+i[r(467)][10])/i[r(467)][14],F.clipPlane[r(530)](2/F.clipPlane.dot(F.q)),i[r(467)][2]=F[r(534)].x,i[r(467)][6]=F.clipPlane.y,i[r(467)][10]=F[r(534)].z+1,i[r(467)][14]=F[r(534)].w})(e),R[t(501)][t(460)][t(464)]=!1,R[t(501)].setRenderTarget(T[t(501)]),R[t(501)][t(519)]||R[t(501)][t(527)](),R[t(501)][t(517)](x.value,F[t(528)]),null==(n=null==z?void 0:z[t(501)])||n[t(517)](R[t(501)],T[t(501)],D.value),R[t(501)].xr[t(535)]=i,R.value.shadowMap.autoUpdate=a,e[t(487)]=!0,R[t(501)][t(447)](null)}));const j=wn(),U=en((()=>{const n=r,t={};return Object[n(494)](t,o),Object[n(494)](t,j.value),t}));return xn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(501)])||n.dispose(),null==(t=null==D?void 0:D.value)||t[e(444)]()})),(n,t)=>{var e,o,i;const c=r;return un(),ln("TresMeshReflectorMaterial",Mn({key:c(442)+P[c(501)][c(508)]+P.value[c(483)]+P[c(501)]["defines-USE_DISTORTION"],ref_key:c(495),ref:B},U[c(501)],{"texture-matrix":F[c(474)],mirror:rn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(473)],"t-depth":null==(o=T[c(501)])?void 0:o[c(465)],"t-diffuse-blur":null==(i=D[c(501)])?void 0:i[c(473)],"has-blur":C[c(501)],"mix-strength":rn(v),"min-depth-threshold":rn(a),"max-depth-threshold":rn(s),"depth-scale":rn(u),"depth-to-blur-ratio-bias":rn(l),distortion:rn(m),distortionMap:rn(g),"mix-contrast":rn(_),"defines-USE_BLUR":C[c(501)]?"":void 0,"defines-USE_DEPTH":rn(u)>0?"":void 0,"defines-USE_DISTORTION":rn(g)?"":void 0}),null,16,ze)}}});function Ce(n){function t(n){const e=Ee;if(typeof n===e(439))return function(n){}[e(462)]("while (true) {}")[e(481)](e(514));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(526)+e(457))[e(441)](e(482)):function(){return!1}.constructor(e(526)+e(457))[e(481)](e(446)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Be,r=je();for(;;)try{if(171602===parseInt(e(401))/1*(parseInt(e(441))/2)+parseInt(e(425))/3+-parseInt(e(433))/4*(-parseInt(e(416))/5)+parseInt(e(429))/6*(parseInt(e(427))/7)+parseInt(e(431))/8+-parseInt(e(423))/9*(-parseInt(e(443))/10)+-parseInt(e(415))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(n,t){const e=je();return(Be=function(n,t){return e[n-=398]})(n,t)}!function(){Fe(this,(function(){const n=Be,t=new RegExp(n(428)),e=new RegExp(n(404),"i"),r=Ue(n(402));t[n(430)](r+n(424))&&e[n(430)](r+n(405))?Ue():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(){const n=["error","6994944OlQXaj","5pwAkWX","background","gger","update","while (true) {}","call","counter","9BwcsyF","chain","35382oEhpPL","exception","1477049avQazj","function *\\( *\\)","6BZixOG","test","1582104UOPoDf","constructor","244708UHXsqC","value","console","table","texture","action","length","trace","298874WqMExy","prototype","268910WKPbeQ","__proto__","stateObject","dispose","2VPyVQh","init","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input",'{}.constructor("return this")( )',"debu","info","log","apply","type","return (function() ","fog"];return(je=function(){return n})()}function Ue(n){function t(n){const e=Be;if("string"==typeof n)return function(n){}.constructor(e(420)).apply(e(422));1!==(""+n/n)[e(439)]||n%20==0?function(){return!0}[e(432)](e(407)+"gger")[e(421)](e(438)):function(){return!1}[e(432)](e(407)+e(418)).apply(e(399)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ke(void 0,(function(){const n=Be,t=function(){const n=Be;let t;try{t=Function(n(412)+n(406)+");")()}catch(e){t=window}return t}(),e=t[n(435)]=t[n(435)]||{},r=[n(409),"warn",n(408),n(414),n(426),n(436),n(440)];for(let o=0;o<r[n(439)];o++){const t=ke[n(432)][n(442)].bind(ke),i=r[o],a=e[i]||t;t[n(398)]=ke.bind(ke),t[n(403)]=a[n(403)].bind(a),e[i]=t}}))();const Ne=We;!function(n,t){const e=We,r=Ze();for(;;)try{if(746281===-parseInt(e(229))/1*(parseInt(e(188))/2)+parseInt(e(231))/3+parseInt(e(222))/4+-parseInt(e(227))/5+parseInt(e(205))/6*(-parseInt(e(186))/7)+parseInt(e(202))/8*(parseInt(e(210))/9)+-parseInt(e(206))/10*(-parseInt(e(193))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Le(this,(function(){const n=We,t=new RegExp(n(212)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$e(n(213));t[n(216)](r+n(228))&&e.test(r+n(185))?$e():r("0")}))()}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(){const n=["7123361nzFhDK","value","1538lmLlyW","$slots","error","__proto__","rgRef","130999YTikqw","prototype","console","return (function() ","envMap","texture","far","string","near","191032ErzpqD","default","warn","6UFbcek","670zAcQdj","apply","stateObject","bind","162vlPIWJ","constructor","function *\\( *\\)","init","resolution","index","test","length","TresGroup","object","toString","gger","4639668MdiTnu",'{}.constructor("return this")( )',"visible","frames","counter","5579555KTzUBS","chain","1076BnIJba","debu","3958851gEzzGO","trace","input"];return(Ze=function(){return n})()}He(void 0,(function(){const n=We;let t;try{t=Function(n(196)+n(223)+");")()}catch(o){t=window}const e=t[n(195)]=t[n(195)]||{},r=["log",n(204),"info",n(190),"exception","table",n(232)];for(let i=0;i<r[n(217)];i++){const t=He[n(211)][n(194)][n(209)](He),o=r[i],a=e[o]||t;t[n(191)]=He[n(209)](He),t[n(220)]=a[n(220)].bind(a),e[o]=t}}))();const Ge=[Ne(219)];function We(n,t){const e=Ze();return(We=function(n,t){return e[n-=185]})(n,t)}const Ve=on({__name:Ne(215),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ne,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=q(),c=nn(null),s=nn(n),u=nn(t),l=nn(e),f=nn(null);let p,d;return tn((()=>s),(n=>{var t;const e=Be;null==(t=c.value)||t[e(400)](),c[e(434)]=new v(n[e(434)]),c[e(434)][e(437)][e(411)]=h}),{immediate:!0}),tn([u,l,c],(([n,t,e])=>{e&&(f.value=new m(n,t,e))}),{immediate:!0}),xn((()=>{var n;const t=Be;null==(n=c.value)||n[t(400)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Be;p=a[t(434)].fog,d=a.value[t(417)],a[t(434)].background=r||d,a[t(434)].fog=o||p,null==(n=f[t(434)])||n[t(419)](i.value,a[t(434)]),a[t(434)][t(413)]=p,a.value[t(417)]=d}}}({resolution:o[r(214)],near:o[r(201)],far:o[r(199)],envMap:o[r(197)],fog:o.fog}),{onBeforeLoop:s}=X();let u=0;const l=nn(null);return s((()=>{const n=r;l[n(187)]&&(o[n(225)]===1/0||u<o[n(225)])&&(l[n(187)][n(224)]=!1,c(),l[n(187)][n(224)]=!0,u++)})),t({texture:null==(e=i[r(187)])?void 0:e[r(198)]}),(n,t)=>{const e=r;return un(),ln(e(218),null,[gn("primitive",{object:rn(a)},null,8,Ge),gn(e(218),{ref_key:e(192),ref:l},[fn(n[e(189)],e(203))],512)])}}});function $e(n){function t(n){const e=We;if(typeof n===e(200))return function(n){}[e(211)]("while (true) {}").apply(e(226));1!==(""+n/n)[e(217)]||n%20==0?function(){return!0}[e(211)](e(230)+e(221)).call("action"):function(){return!1}[e(211)](e(230)+e(221))[e(207)](e(208)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Xe,r=Qe();for(;;)try{if(513877===-parseInt(e(232))/1*(parseInt(e(256))/2)+-parseInt(e(251))/3+parseInt(e(252))/4*(-parseInt(e(272))/5)+parseInt(e(249))/6*(-parseInt(e(238))/7)+parseInt(e(239))/8*(-parseInt(e(277))/9)+parseInt(e(271))/10+parseInt(e(262))/11*(parseInt(e(273))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xe(255)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){const n=Xe,t=new RegExp(n(253)),e=new RegExp(n(244),"i"),r=Je(n(236));t.test(r+n(234))&&e.test(r+n(247))?Je():r("0")}))()}();const qe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xe(255)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n,t,e,r){const o=Xe,i=class extends z[o(235)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(266)](((n,[t,e])=>{const r=W[a(260)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(254)]="",s[a(263)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(230)][n][a(259)],set:t=>this[a(230)][n][a(259)]=t}))),Object[a(269)](this,i),r&&r(this)}};return i[o(254)]=V[o(264)](),i}function Xe(n,t){const e=Qe();return(Xe=function(n,t){return e[n-=230]})(n,t)}function Je(n){function t(n){const e=Xe;if(typeof n===e(267))return function(n){}.constructor(e(265))[e(255)]("counter");1!==(""+n/n)[e(257)]||n%20==0?function(){return!0}[e(268)]("debu"+e(270))[e(275)](e(233)):function(){return!1}.constructor(e(243)+"gger")[e(255)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Qe(){const n=["clone","trace","148885YsRcqp","forEach","generateUUID","while (true) {}","reduce","string","constructor","assign","gger","5257300hHjloy","7950vJabTN","1500MsawjT",'{}.constructor("return this")( )',"call","toString","7659sZXctd","uniforms","info","1wyGLXa","action","chain","ShaderMaterial","init","error","245308rvJOps","2400zekmIK","return (function() ","warn","__proto__","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","exception","input","prototype","72TemkwN","console","2493534Wlhpzk","288TrRAgH","function *\\( *\\)","key","apply","164484HkfgYK","length","table","value"];return(Qe=function(){return n})()}qe(void 0,(function(){const n=Xe;let t;try{t=Function(n(240)+n(274)+");")()}catch(o){t=window}const e=t[n(250)]=t[n(250)]||{},r=["log",n(241),n(231),n(237),n(246),n(258),n(261)];for(let i=0;i<r.length;i++){const t=qe[n(268)][n(248)].bind(qe),o=r[i],a=e[o]||t;t[n(242)]=qe[n(245)](qe),t[n(276)]=a.toString[n(245)](a),e[o]=t}}))();var nr=dr;!function(n,t){for(var e=dr,r=fr();;)try{if(378580===parseInt(e(538))/1*(parseInt(e(506))/2)+parseInt(e(600))/3+parseInt(e(556))/4*(parseInt(e(573))/5)+parseInt(e(508))/6*(-parseInt(e(595))/7)+-parseInt(e(648))/8+parseInt(e(510))/9*(-parseInt(e(601))/10)+parseInt(e(537))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var tr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[dr(663)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tr(this,(function(){var n=dr,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fr(n(555));t[n(679)](r+"chain")&&e.test(r+n(581))?Fr():r("0")}))()}();var er=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rr(n){var t=dr,e=function(n,t){var e=dr;if(typeof n!==e(536)||null===n)return n;var r=n[Symbol[e(547)]];if(void 0!==r){var o=r[e(504)](n,t||e(591));if(typeof o!==e(536))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(562)?String:Number)(n)}(n,t(562));return typeof e===t(558)?e:String(e)}function or(n,t,e){return(t=rr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ir(n,t){var e=dr,r=Object[e(497)](n);if(Object[e(517)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(518)]((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r[e(523)].apply(r,o)}return r}function ar(n){for(var t=dr,e=1;e<arguments[t(592)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ir(Object(r),!0).forEach((function(t){or(n,t,r[t])})):Object[t(565)]?Object[t(577)](n,Object[t(565)](r)):ir(Object(r))[t(669)]((function(e){var o=t;Object[o(549)](n,e,Object[o(639)](r,e))}))}return n}function cr(n,t){var e=dr;if(null==n)return{};var r,o,i=function(n,t){var e=dr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(592)];o++)r=a[o],t[e(544)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(517)]){var a=Object[e(517)](n);for(o=0;o<a[e(592)];o++)r=a[o],t[e(544)](r)>=0||Object.prototype[e(524)][e(504)](n,r)&&(i[r]=n[r])}return i}function sr(n,t){var e=dr;(null==t||t>n[e(592)])&&(t=n[e(592)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ur(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=dr,r=null==n?null:e(659)!=typeof Symbol&&n[Symbol[e(515)]]||n[e(551)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(504)](n))[e(533)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(504)](r)).done)&&(s[e(523)](o[e(571)]),s[e(592)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(686)]&&(c=r[e(686)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=dr;if(n){if(typeof n===e(562))return sr(n,t);var r=Object[e(674)][e(534)][e(504)](n)[e(683)](8,-1);return r===e(673)&&n.constructor&&(r=n.constructor.name),r===e(613)||r===e(678)?Array[e(525)](n):r===e(567)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(679)](r)?sr(n,t):void 0}}(n,t)||function(){throw new TypeError(dr(642))}()}function lr(n,t){for(var e=dr,r=0;r<t.length;r++){var o=t[r];o[e(546)]=o.enumerable||!1,o[e(529)]=!0,e(571)in o&&(o.writable=!0),Object[e(549)](n,rr(o[e(522)]),o)}}function fr(){var n=["iterator","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","getOwnPropertySymbols","filter","csm_DepthAlpha","csm_ClearcoatNormal","material.clearcoatRoughness = ","key","push","propertyIsEnumerable","from","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","csm_Emissive",";\n  ","configurable","\n    gl_PointSize = ","();\n              // #_CSM_#\n          ","clearcoatRoughness","next","toString","\n    gl_FragColor = ","object","5606678tqiyuV","1IIJqZl",";\n    ","set","MeshPhysicalMaterial","positionRaw","patchMap","indexOf","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","enumerable","toPrimitive","metalness","defineProperty","is not a constructor","@@iterator","MeshDepthMaterial","entries","create","init","1126184LsAQLQ","RawShaderMaterial","symbol","csm_Metalness","counter","isAlreadyExtended","string","getPrototypeOf",". Shader cannot compile.","getOwnPropertyDescriptors","includes","Arguments","CSM: ",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","csm_Clearcoat","value","fragColor","10vFiXWC","MeshLambertMaterial","csm_Roughness","();\n            // #_CSM_#\n          ","defineProperties","csm_ClearcoatRoughness","ShadowMaterial","emissive","input","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","MathUtils","normal","cacheHash","void ","lights_physical_fragment","generateUUID","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","csm_PositionRaw","default","length","onBeforeCompile","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","7987KgqPli","cacheKey","#define IS_VERTEX;\n","warn","diffuse","1658151hTlDot","929960zZHWgd","\n    \n            ","clearcoatNormal","table","vertexShader","baseMaterial","\n    vec3 objectNormal = ","return (function() ","void main() {","trim","\n    #include <color_fragment>\n    diffuseColor = "," );\n    ","Map"," - (dot(","assign","setPrototypeOf","bump","depthAlpha","clearcoat","pointSize","toUpperCase","PointsMaterial","while (true) {}","\n    #include <dithering_fragment>\n    gl_FragColor  = ","concat","csm_AO","stateObject","gger","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","Cannot call a class as a function","#define IS_","_getCacheHash",'". Shader cannot compile.',"// #_CSM_#","\n    vec4 csm_internal_positionUnprojected = ","_patchShader","position","getOwnPropertyDescriptor","MeshToonMaterial","split","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","lastIndexOf","function","error","uniforms","this hasn't been initialised - super() hasn't been called","5786400IfRBTI","message","needsUpdate","fragmentShader","csm_PointSize","clone","trace","sham","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","csm_main_","type","undefined","join","MeshStandardMaterial","void main()","apply","MeshPhongMaterial","console","info",'{}.constructor("return this")( )',"valueOf","forEach","\n    vec3 totalEmissiveRadiance = ","\n            ","debu","Object","prototype","constructor","log","update","Set","test","__proto__","_getPatchMapForMaterial","isArray","slice","customProgramCacheKey","action","return","MeshBasicMaterial","\n    gl_Position = ","roughness",'CSM: Property "',"csm_Normal","keys","ShaderMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n            \n            void main() {\n          ","replace","__csm",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","call","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","107456vGoTKM","silent","2058gcZVAf","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","18ldhDqf","bind","construct","_generateMaterial","find"];return(fr=function(){return n})()}function pr(n){if(void 0===n)throw new ReferenceError(dr(647));return n}function dr(n,t){var e=fr();return(dr=function(n,t){return e[n-=494]})(n,t)}function hr(n,t){var e=dr;return(hr=Object[e(616)]?Object[e(616)][e(511)]():function(n,t){return n[e(680)]=t,n})(n,t)}function vr(n){var t=dr;return(vr=Object[t(616)]?Object[t(563)][t(511)]():function(n){var e=t;return n[e(680)]||Object[e(563)](n)})(n)}function mr(n){var t=function(){var n=dr;if(typeof Reflect===n(659)||!Reflect.construct)return!1;if(Reflect.construct[n(655)])return!1;if(typeof Proxy===n(644))return!0;try{return Boolean[n(674)][n(668)][n(504)](Reflect[n(512)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=dr,o=vr(n);if(t){var i=vr(this)[r(675)];e=Reflect[r(512)](o,arguments,i)}else e=o[r(663)](this,arguments);return function(n,t){if(t&&(typeof t===dr(536)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pr(n)}(this,e)}}er(void 0,(function(){for(var n=dr,t=function(){var n,t=dr;try{n=Function(t(608)+t(667)+");")()}catch(e){n=window}return n}(),e=t[n(665)]=t.console||{},r=[n(676),n(598),n(666),"error","exception",n(604),n(654)],o=0;o<r.length;o++){var i=er.constructor[n(674)].bind(er),a=r[o],c=e[a]||i;i[n(680)]=er.bind(er),i[n(534)]=c.toString[n(511)](c),e[a]=i}}))();var gr,_r,yr,xr={diffuse:"csm_DiffuseColor",normal:nr(496),roughness:nr(575),metalness:nr(559),emissive:nr(527),ao:nr(626),bump:"csm_Bump",clearcoat:nr(570),clearcoatRoughness:nr(578),clearcoatNormal:nr(520),pointSize:nr(652),fragColor:"csm_FragColor",depthAlpha:nr(519),position:"csm_Position",positionRaw:nr(590)},br=(or(gr={},"".concat(xr.position),"*"),or(gr,""[nr(625)](xr[nr(542)]),"*"),or(gr,"".concat(xr[nr(584)]),"*"),or(gr,""[nr(625)](xr[nr(620)]),[nr(622)]),or(gr,""[nr(625)](xr.diffuse),"*"),or(gr,""[nr(625)](xr[nr(572)]),"*"),or(gr,""[nr(625)](xr[nr(580)]),["MeshStandardMaterial",nr(541)]),or(gr,""[nr(625)](xr[nr(494)]),[nr(661),nr(541)]),or(gr,"".concat(xr[nr(548)]),["MeshStandardMaterial",nr(541)]),or(gr,"".concat(xr.ao),[nr(661),nr(541),nr(687),nr(574),nr(664),nr(640)]),or(gr,""[nr(625)](xr.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial",nr(541),nr(661),nr(640),nr(579)]),or(gr,"".concat(xr[nr(618)]),[nr(552)]),or(gr,""[nr(625)](xr[nr(619)]),[nr(541)]),or(gr,""[nr(625)](xr[nr(532)]),[nr(541)]),or(gr,""[nr(625)](xr.clearcoatNormal),[nr(541)]),gr),Ir={"#include <lights_physical_fragment>":D[nr(587)]},Sr=(or(_r={},""[nr(625)](xr[nr(584)]),{"#include <beginnormal_vertex>":nr(607)[nr(625)](xr[nr(584)],nr(503))}),or(_r,""[nr(625)](xr[nr(638)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[nr(625)](xr[nr(638)],nr(528))}),or(_r,""[nr(625)](xr[nr(542)]),{"#include <begin_vertex>":nr(636).concat(xr[nr(542)],nr(569))}),or(_r,""[nr(625)](xr[nr(620)]),{"gl_PointSize = size;":nr(530).concat(xr[nr(620)],nr(539))}),or(_r,"".concat(xr[nr(599)]),{"#include <color_fragment>":nr(611)[nr(625)](xr[nr(599)],";\n  ")}),or(_r,"".concat(xr[nr(572)]),{"#include <dithering_fragment>":nr(624)[nr(625)](xr.fragColor,nr(528))}),or(_r,"".concat(xr[nr(580)]),{"vec3 totalEmissiveRadiance = emissive;":nr(670)[nr(625)](xr[nr(580)],nr(539))}),or(_r,""[nr(625)](xr[nr(494)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[nr(625)](xr.roughness,nr(539))}),or(_r,""[nr(625)](xr[nr(548)]),{"#include <metalnessmap_fragment>":nr(509).concat(xr[nr(548)],nr(539))}),or(_r,""[nr(625)](xr.ao),{"#include <aomap_fragment>":nr(516)[nr(625)](xr.ao,nr(539))}),or(_r,""[nr(625)](xr[nr(617)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ".concat(xr[nr(617)],nr(614))[nr(625)](xr.bump,nr(630))}),or(_r,""[nr(625)](xr[nr(618)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":nr(505).concat(xr[nr(618)],nr(612)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":nr(526)[nr(625)](xr[nr(618)],nr(539))}),or(_r,""[nr(625)](xr[nr(619)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[nr(625)](xr.clearcoat,";")}),or(_r,""[nr(625)](xr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":nr(521)[nr(625)](xr[nr(532)],";")}),or(_r,""[nr(625)](xr[nr(603)]),{"#include <clearcoat_normal_fragment_begin>":nr(656)}),_r),wr=(or(yr={},"".concat(xr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[nr(625)](xr[nr(638)],", 1.0 );\n  ")}),or(yr,""[nr(625)](xr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":nr(688).concat(xr[nr(638)],";\n  ")}),or(yr,""[nr(625)](xr[nr(599)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(xr[nr(599)],nr(528))}),or(yr,""[nr(625)](xr[nr(572)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":nr(535)[nr(625)](xr[nr(572)],nr(528))}),yr),Mr={clearcoat:[xr.clearcoat,xr[nr(603)],xr[nr(532)]]},Rr=nr(582),Er=nr(499),Ar=nr(499),Tr=[nr(606),nr(651),nr(605),nr(646),nr(543),nr(596),nr(507)],Dr=function(n,t,e){var r=nr;return n[r(641)](t)[r(660)](e)},zr=function(n,t){var e;return new RegExp("\\b"[nr(625)]((e=t,e[nr(501)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n)};function Pr(n){return n?n.replace(/\s/g,""):void 0}function Or(n){return n[nr(501)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=nr;!function(n,t){var e=dr;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object[e(554)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(674),{writable:!1}),t&&hr(n,t)}(c,$);var e,r,o,i,a=mr(c);function c(n){var t,e,r,o,i,s=dr,u=n.baseMaterial,l=n.fragmentShader,f=n[s(605)],p=n[s(646)],d=n[s(543)],h=n[s(596)],v=n[s(507)],m=cr(n,Tr);if(function(n,t){if(!(n instanceof t))throw new TypeError(dr(631))}(this,c),!function(n){var t=nr;try{new n}catch(e){if(e[t(649)][t(544)](t(550))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(658)]===s(557))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=nr;e(592),Object[e(615)](n,t);var r=Object.getPrototypeOf(t);Object[e(553)](Object[e(565)](r))[e(518)]((function(n){var t=e,r=typeof n[1].get===t(644),o=typeof n[1][t(540)]===t(644),i="function"==typeof n[1][t(571)],a="constructor"===n[0];return(r||o||i)&&!a}))[e(669)]((function(t){var r=e;typeof n[t[0]]!==r(644)&&Object[r(549)](n,t[0],t[1])}))})(pr(t=a[s(504)](this)),e),t[s(502)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:z[s(583)][s(588)](),type:e[s(658)],isAlreadyExtended:(r=e[s(593)],o=nr,i=r.toString()[o(610)](),!(0===i.substring(i[o(544)]("{")+1,i[o(643)]("}"))[o(610)]()[o(592)])),cacheHash:"",silent:v},t[s(646)]=ar(ar({},t[s(646)]||{}),p||{});var g=t[s(502)],_=g[s(651)],y=g[s(605)],x=t[s(646)];return t[s(502)][s(585)]=t._getCacheHash(),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(677),value:function(){var n=t,e=arguments[n(592)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(646)]=e[n(646)]||this[n(646)],Object[n(615)](this[n(502)],e);var r=this.__csm,o=r[n(651)],i=r[n(605)],a=this.uniforms,c=this[n(633)]();this.__csm[n(585)]=c,this[n(513)](o,i,a)}},{key:t(653),value:function(){var n=t,e={baseMaterial:this[n(502)][n(606)],fragmentShader:this.__csm.fragmentShader,vertexShader:this.__csm.vertexShader,uniforms:this.uniforms,silent:this[n(502)].silent,patchMap:this[n(502)][n(543)],cacheKey:this[n(502)][n(596)]},r=new(this[n(675)])(e);return Object[n(615)](this,r),r}},{key:t(633),value:function(){var n=t,e=this[n(502)],r=e.fragmentShader,o=e[n(605)],i=this[n(646)],a=[Pr(r),Pr(o),i][n(518)]((function(n){return void 0!==n}));return a.length>0?Tn(a,{excludeValues:!0}):this[n(684)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(646)]=r||{},this[o(684)]=function(){return i[o(502)].cacheHash};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i._patchShader(Or(n),t[r(651)],!0);t[r(651)]=a+c}if(e){var s=i[r(637)](Or(e),t[r(605)]);t[r(605)]=r(597)+s,t[r(605)]=a+t[r(605)]}t[r(646)]=ar(ar({},t[r(646)]),i[r(646)]),i[r(646)]=t[r(646)]}catch(u){console[r(645)](u)}};if(this[o(502)][o(561)]){var c=this[o(593)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(593)]=a;this[o(650)]=!0}},{key:t(637),value:function(n,e,r){var o=t,i=this,a=e,c=ar(ar({},this[o(681)]()),this[o(502)][o(543)]);Object[o(553)](Mr)[o(669)]((function(t){var e=o,r=ur(t,2),a=r[0],c=r[1][e(514)]((function(t){return zr(n,t)}));if(c&&!i[a])throw new Error(e(495)[e(625)](a,'" is required to use output "')[e(625)](c,e(634)))})),Object[o(553)](Ir)[o(669)]((function(n){var t=ur(n,2),e=t[0],r=t[1];a=Dr(a,e,r)})),Object[o(497)](c)[o(669)]((function(t){var e=o;Object[e(497)](c[t])[e(669)]((function(r){var o=e,s=br[t],u=i[o(502)][o(658)];if("*"===t||zr(n,t)){if(!(!s||Array[o(682)](s)&&s[o(566)](u)||"*"===s))throw new Error(o(568)[o(625)](t," is not available in ")[o(625)](u,o(564)));a=Dr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(657)+this[o(502)].instanceID.replace(/-/g,"_"),h=n[o(501)](/void\s+main\s*\(\s*\)/g,o(586).concat(d,"()")),v=n[o(566)](o(662)),m=a[o(566)](o(635));return v&&(m&&this[o(502)].isAlreadyExtended?(a=a[o(501)](o(609),o(671)[o(625)](h,o(500))),s=a,u=o(635),l=o(671)[o(625)](d,o(576)),p=s[(f=nr)(643)](u),a=-1===p?s:s.substring(0,p)+l+s.substring(p+u[f(592)])):a=a.replace(o(609),o(629)[o(625)](r?Ar:Er,o(545)).concat("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(602))[o(625)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(625)](Rr,o(594))[o(625)](r?"\n    \n":"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(589)).concat(d,o(531)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this.__csm[n(658)];return e?n(632).concat(e[n(621)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(681),value:function(){var n=t;return this[n(502)][n(658)]===n(498)?wr:Sr}}],i=dr,r&&lr(e[i(674)],r),o&&lr(e,o),Object[i(549)](e,i(674),{writable:!1}),c}();function Fr(n){function t(n){var e=dr;if(typeof n===e(562))return function(n){}[e(675)](e(623))[e(663)](e(560));1!==(""+n/n)[e(592)]||n%20==0?function(){return!0}[e(675)](e(672)+e(628)).call(e(685)):function(){return!1}.constructor(e(672)+e(628))[e(663)](e(627)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Br=Ur;!function(n,t){const e=Ur,r=jr();for(;;)try{if(587920===-parseInt(e(186))/1+parseInt(e(213))/2+parseInt(e(191))/3*(-parseInt(e(169))/4)+-parseInt(e(166))/5+parseInt(e(182))/6*(-parseInt(e(174))/7)+-parseInt(e(196))/8*(-parseInt(e(178))/9)+parseInt(e(190))/10*(parseInt(e(175))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ur(181)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(){const n=["1704120eGRnzo","action","call","3688472KGIfrT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","info","stateObject","601671hBgYlz","35717Zqslrs","object","test","31149iJGmtv","warn","index","apply","6ONYQnU","string","clearcoat","toString","346338ezJHWx","prototype","chain","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","1660frvVPN","3pdSBCs","color","table","exception","\n      ","1544wLydIs",'{}.constructor("return this")( )',"log","__proto__","gger","constructor","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","while (true) {}","input","metalness","debu","return (function() ","primitive","setStyle","#ff00fc","roughness","function *\\( *\\)","2152356jQvcro","length","bind","clearcoatRoughness"];return(jr=function(){return n})()}function Ur(n,t){const e=jr();return(Ur=function(n,t){return e[n-=165]})(n,t)}!function(){kr(this,(function(){const n=Ur,t=new RegExp(n(212)),e=new RegExp(n(170),"i"),r=Zr("init");t[n(177)](r+n(188))&&e[n(177)](r+n(204))?Zr():r("0")}))()}();const Nr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ur(181)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nr(void 0,(function(){const n=Ur;let t;try{t=Function(n(207)+n(197)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(198),n(179),n(172),"error",n(194),n(193),"trace"];for(let i=0;i<r[n(214)];i++){const t=Nr[n(201)][n(187)][n(215)](Nr),o=r[i],a=e[o]||t;t[n(199)]=Nr[n(215)](Nr),t[n(185)]=a[n(185)][n(215)](a),e[o]=t}}))();const Lr=[Br(176)],Hr=on({__name:Br(180),props:{color:{default:Br(210)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Br,e=n,r={baseMaterial:K,metalness:e[t(205)],roughness:e[t(211)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(165)],color:e[t(192)],vertexShader:t(189),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(195)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(202)},o=new Cr(r);return hn((()=>{const n=t;o[n(192)][n(209)](e[n(192)]),o[n(205)]=e.metalness,o[n(211)]=e[n(211)],o[n(184)]=e.clearcoat,o[n(165)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return un(),ln(r(208),{object:rn(o)},null,8,Lr)}}});function Zr(n){function t(n){const e=Ur;if(typeof n===e(183))return function(n){}.constructor(e(203))[e(181)](e(171));1!==(""+n/n)[e(214)]||n%20==0?function(){return!0}[e(201)](e(206)+"gger")[e(168)](e(167)):function(){return!1}[e(201)](e(206)+e(200))[e(181)](e(173)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=Kr();;)try{if(931258===-parseInt(e(135))/1+-parseInt(e(149))/2*(-parseInt(e(147))/3)+-parseInt(e(169))/4+-parseInt(e(140))/5*(parseInt(e(137))/6)+parseInt(e(164))/7+parseInt(e(144))/8*(parseInt(e(160))/9)+parseInt(e(162))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gr(this,(function(){var n=Vr,t=new RegExp(n(158)),e=new RegExp(n(142),"i"),r=$r(n(168));t.test(r+n(152))&&e.test(r+"input")?$r():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vr(n,t){var e=Kr();return(Vr=function(n,t){return e[n-=135]})(n,t)}function $r(n){function t(n){var e=Vr;if(typeof n===e(157))return function(n){}[e(141)](e(136))[e(150)](e(167));1!==(""+n/n)[e(145)]||n%20==0?function(){return!0}[e(141)]("debugger")[e(161)](e(148)):function(){return!1}[e(141)](e(146)+e(155))[e(150)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Kr(){var n=["log","table","counter","init","2879252lpPvAm","1768960OKGbrc","while (true) {}","4979454fIQFzB","exception",'{}.constructor("return this")( )',"5yctatv","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","216016UyTlpi","length","debu","2802iPjrvn","action","686AHokJe","apply","warn","chain","info","toString","gger","trace","string","function *\\( *\\)","prototype","207bbfPmd","call","25414450hMnCeC","console","5369609ETFMrw"];return(Kr=function(){return n})()}Wr(void 0,(function(){var n,t=Vr;try{n=Function("return (function() "+t(139)+");")()}catch(s){n=window}for(var e=n[t(163)]=n.console||{},r=[t(165),t(151),t(153),"error",t(138),t(166),t(156)],o=0;o<r[t(145)];o++){var i=Wr[t(141)][t(159)][t(143)](Wr),a=r[o],c=e[a]||i;i.__proto__=Wr.bind(Wr),i[t(154)]=c[t(154)][t(143)](c),e[a]=i}}))();export{Ye as C,Hr as _,rt as a,ht as b,At as c,Ct as d,Gt as e,re as f,Ve as g,Oe as h,yt as u};

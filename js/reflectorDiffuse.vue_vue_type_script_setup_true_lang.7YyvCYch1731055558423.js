import{c1 as t,a3 as n,C as e,k as r}from"./three.3b9CEYeV1731055558423.js";import{b as o}from"./@tresjs.KsuCtVXf1731055558423.js";import{R as c}from"./all.three.JusmaqcJ1731055558423.js";import{d as a,b as i,a6 as s,a3 as u,o as l,D as f,J as p,m,u as d}from"./@vue.u2cBPEWn1731055558423.js";!function(t,n){const e=x,r=h();for(;;)try{if(587508===parseInt(e(166))/1*(parseInt(e(187))/2)+parseInt(e(177))/3+parseInt(e(159))/4*(parseInt(e(183))/5)+-parseInt(e(160))/6+-parseInt(e(201))/7*(-parseInt(e(197))/8)+parseInt(e(155))/9+-parseInt(e(171))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(156)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(188),"i"),r=y(t(199));n[t(178)](r+t(196))&&e[t(178)](r+t(167))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(156)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(185)+t(181)+");")()}catch(e){n=window}return n}(),e=n[t(184)]=n.console||{},r=[t(164),t(163),t(165),t(157),t(182),t(186),"trace"];for(let o=0;o<r[t(170)];o++){const n=g[t(195)][t(169)][t(176)](g),c=r[o],a=e[c]||n;n[t(194)]=g[t(176)](g),n[t(172)]=a[t(172)].bind(a),e[c]=n}}))();function h(){const t=["table","111396IutFMn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","debu","#include <project_vertex>","action","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","__proto__","constructor","chain","8latZJk","fragmentShader","init","#include <emissivemap_fragment>","1659406BPotop","630009RucZgE","apply","error","replace","4SQOwYl","1397196IaLCqj","call","counter","warn","log","info","1sNIqOT","input","vertexShader","prototype","length","6221890upsgsy","toString","stateObject","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","gger","bind","564693GAdZav","test","string","while (true) {}",'{}.constructor("return this")( )',"exception","4457875iGYedr","console","return (function() "];return(h=function(){return t})()}function x(t,n){const e=h();return(x=function(t,n){return e[t-=155]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(179))return function(t){}.constructor(e(180)).apply(e(162));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debugger")[e(161)](e(192)):function(){return!1}[e(195)](e(190)+e(175))[e(156)](e(173)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=b;!function(t,n){const e=b,r=j();for(;;)try{if(634349===parseInt(e(447))/1+parseInt(e(490))/2*(-parseInt(e(436))/3)+parseInt(e(489))/4*(parseInt(e(456))/5)+-parseInt(e(484))/6*(parseInt(e(458))/7)+parseInt(e(496))/8*(-parseInt(e(440))/9)+-parseInt(e(475))/10*(parseInt(e(460))/11)+-parseInt(e(438))/12*(-parseInt(e(485))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=b,n=new RegExp(t(477)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(455));n[t(493)](r+t(462))&&e[t(493)](r+"input")?E():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[b(483)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function b(t,n){const e=j();return(b=function(t,n){return e[t-=427]})(t,n)}function j(){const t=["7514BkUnIj","constructor","uniforms",'{}.constructor("return this")( )',"1365764VBPxrw","12xGvkcj","reflectorDiffuse","#444","test","return (function() ","visible","533432owjHtH","onBeforeCompile","wrapS","gger","add","TresGroup","table","log","length","#ffffff","632949hmGQRU","toString","47076iwqAVR","set","9tjdjXu","value","TresMesh","string","reflectMap","action","channel","217449pJkPZr","warn","tpgRef","aoMap","TresMeshStandardMaterial","onBeforeRender","tmsmRef","tmRef","init","10Eruupd","mirror","21RPkEPk","exception","37939yndOlj","stateObject","chain","while (true) {}","textureMatrixUniform","showGridHelper","wrapT","debu","info","uv1","attributes","update","trace","object","color","3400iLOOQa","mixStrength","function *\\( *\\)","call","rotation-x","console","bind","error","apply","56478TYdJOo"];return(j=function(){return t})()}_(void 0,(function(){const t=b;let n;try{n=Function(t(494)+t(488)+");")()}catch(o){n=window}const e=n[t(480)]=n.console||{},r=[t(433),t(448),t(468),t(482),t(459),t(432),t(472)];for(let c=0;c<r.length;c++){const n=_[t(486)].prototype[t(481)](_),o=r[c],a=e[o]||n;n.__proto__=_[t(481)](_),n.toString=a[t(437)].bind(a),e[o]=n}}))();const C=[I(479)],M=[I(473),I(495)],S=a({__name:I(491),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(435)}},async setup(a){const v=I;let g,h;const y=a,w=new t(9.5,10),_=i(),b=i(),j=i(),S=new c,E={mirror:{value:y[v(457)]},mixStrength:{value:y[v(476)]}},R=([g,h]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,h(),g);for(var k=0;k<3;k++)R[k][v(428)]=n,R[k][v(466)]=n,R[k].repeat[v(439)](16,16);const T={color:new e(v(492)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},z=t=>{const n=v;t[n(487)][n(444)]=S.renderTargetUniform,t[n(487)].textureMatrix=S[n(464)],t.uniforms=Object.assign(t[n(487)],E),(t=>{const n=x;t[n(168)]=t[n(168)][n(158)]("void main() {",n(189)),t[n(168)]=t[n(168)][n(158)](n(191),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=x;t[n(198)]=t.fragmentShader.replace("void main() {",n(174)),t[n(198)]=t[n(198)][n(158)](n(200),n(193))})(t)};return u((()=>{const t=v;_[t(441)]&&(_[t(441)][t(470)][t(469)]=_[t(441)][t(470)].uv),j.value&&(j.value[t(450)][t(446)]=1,j[t(441)][t(427)]=z),b[t(441)]&&(b[t(441)][t(430)](S),b[t(441)][t(452)]=(n,e,r)=>{S[t(471)](n,e,r)}),y[t(474)]&&j.value&&(j[t(441)][t(474)]=new e(y.color))})),(t,n)=>{const e=v;return l(),f(e(431),null,[p(e(442),{ref_key:e(454),ref:b,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(449),ref:_,args:[10,10]},null,512),p(e(451),m({ref_key:e(453),ref:j},T),null,16)],8,C),p("primitive",{object:d(w),visible:t[e(465)]},null,8,M)])}}});function E(t){function n(t){const e=b;if(typeof t===e(443))return function(t){}[e(486)](e(463))[e(483)]("counter");1!==(""+t/t)[e(434)]||t%20==0?function(){return!0}[e(486)](e(467)+e(429))[e(478)](e(445)):function(){return!1}[e(486)](e(467)+e(429))[e(483)](e(461)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

import{importShared as e}from"./3d-tiles-renderer.BWkWgmMi1767151797345.js";import{createInjectionKey as o,createTheme as n,derived as t,c as i,cB as l,insideModal as r,cE as s,cM as a,asModal as c,resolveWrappedSlot as d,resolveSlot as u,useConfig as f,useTheme as v,createKey as h,useThemeClass as p,throwError as g,warn as m,call as C}from"./light.D92JFx8a1767151797345.js";import{keysOf as b,cardLight as w,cardBaseProps as y,NCard as x,cardBasePropKeys as k,fadeInScaleUpTransition as S}from"./Card.CTiTz2ew1767151797345.js";import{NBaseIcon as B}from"./Close.CNo6Fpjd1767151797345.js";import{render as O,NBaseClose as P}from"./Suffix.ezny7EWp1767151797345.js";import{buttonLight as R,Button as j}from"./Button.BEVW1Qpf1767151797345.js";import{useRtl as $,isMounted as z}from"./use-rtl.NI127JD11767151797345.js";import{getMargin as F,scrollbarLight as T,Scrollbar as E,fadeInTransition as M,getPreciseEventTarget as A}from"./Scrollbar.b1GaeT7Z1767151797345.js";import{ErrorIcon as D,WarningIcon as L,SuccessIcon as I,InfoIcon as H}from"./Warning.BOLAJvzx1767151797345.js";import{isBrowser as N,hasInstance as _,getFirstSlotVNodeWithTypedProps as U,FocusTrap as q,clickoutside as W,keep as X,modalInjectionKey as Y,modalBodyInjectionKey as V,drawerBodyInjectionKey as K,popoverBodyInjectionKey as Q,LazyTeleport as G,zindexable as J,modalProviderInjectionKey as Z}from"./keep.Rk28IKIP1767151797345.js";import{on as ee,off as oe}from"./use-merged-state.Ch3gV3jP1767151797345.js";import{isBrowser as ne}from"./Loading.CiQdvNfr1767151797345.js";import{eventEffectNotPerformed as te}from"./index.BxZzspoI1767151797345.js";const{ref:ie,readonly:le,onBeforeMount:re,onBeforeUnmount:se}=await e("vue"),ae=ie(null);function ce(e){if(e.clientX>0||e.clientY>0)ae.value={x:e.clientX,y:e.clientY};else{const{target:o}=e;if(o instanceof Element){const{left:e,top:n,width:t,height:i}=o.getBoundingClientRect();ae.value=e>0||n>0?{x:e+t/2,y:n+i/2}:{x:0,y:0}}else ae.value=null}}let de=0,ue=!0;function fe(){if(!N)return le(ie(null));0===de&&ee("click",document,ce,!0);const e=()=>{de+=1};return ue&&(ue=_())?(re(e),se(()=>{de-=1,0===de&&oe("click",document,ce,!0)})):e(),le(ae)}const{onBeforeMount:ve,onBeforeUnmount:he,ref:pe,readonly:ge}=await e("vue"),me=pe(void 0);let Ce=0;function be(){me.value=Date.now()}let we=!0;function ye(e){if(!N)return ge(pe(!1));const o=pe(!1);let n=null;function t(){null!==n&&window.clearTimeout(n)}function i(){t(),o.value=!0,n=window.setTimeout(()=>{o.value=!1},e)}0===Ce&&ee("click",window,be,!0);const l=()=>{Ce+=1,ee("click",window,i,!0)};return we&&(we=_())?(ve(l),he(()=>{Ce-=1,0===Ce&&oe("click",window,be,!0),oe("click",window,i,!0),t()})):l(),ge(o)}const{onBeforeMount:xe,onBeforeUnmount:ke,ref:Se}=await e("vue"),Be=Se(!1);function Oe(){Be.value=!0}function Pe(){Be.value=!1}let Re=0;function je(){return ne&&(xe(()=>{Re||(window.addEventListener("compositionstart",Oe),window.addEventListener("compositionend",Pe)),Re++}),ke(()=>{Re<=1?(window.removeEventListener("compositionstart",Oe),window.removeEventListener("compositionend",Pe),Re=0):Re--})),Be}const{onBeforeUnmount:$e,onMounted:ze,ref:Fe,watch:Te}=await e("vue");let Ee=0,Me="",Ae="",De="",Le="";const Ie=Fe("0px");function He(e){if("undefined"==typeof document)return;const o=document.documentElement;let n,t=!1;const i=()=>{o.style.marginRight=Me,o.style.overflow=Ae,o.style.overflowX=De,o.style.overflowY=Le,Ie.value="0px"};ze(()=>{n=Te(e,e=>{if(e){if(!Ee){const e=window.innerWidth-o.offsetWidth;e>0&&(Me=o.style.marginRight,o.style.marginRight=`${e}px`,Ie.value=`${e}px`),Ae=o.style.overflow,De=o.style.overflowX,Le=o.style.overflowY,o.style.overflow="hidden",o.style.overflowX="hidden",o.style.overflowY="hidden"}t=!0,Ee++}else Ee--,Ee||i(),t=!1},{immediate:!0})}),$e(()=>{null==n||n(),t&&(Ee--,Ee||i(),t=!1)})}const Ne=o("n-dialog-provider"),_e=o("n-dialog-api"),Ue=o("n-dialog-reactive-list"),qe={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"22px",closeIconSize:"18px",closeMargin:"20px 26px 0 0",closeMarginIconTop:"10px 16px 0 0"};function We(e){const{textColor1:o,textColor2:n,modalColor:t,closeIconColor:i,closeIconColorHover:l,closeIconColorPressed:r,closeColorHover:s,closeColorPressed:a,infoColor:c,successColor:d,warningColor:u,errorColor:f,primaryColor:v,dividerColor:h,borderRadius:p,fontWeightStrong:g,lineHeight:m,fontSize:C}=e;return Object.assign(Object.assign({},qe),{fontSize:C,lineHeight:m,border:`1px solid ${h}`,titleTextColor:o,textColor:n,color:t,closeColorHover:s,closeColorPressed:a,closeIconColor:i,closeIconColorHover:l,closeIconColorPressed:r,closeBorderRadius:p,iconColor:v,iconColorInfo:c,iconColorSuccess:d,iconColorWarning:u,iconColorError:f,borderRadius:p,titleFontWeight:g})}const Xe=n({name:"Dialog",common:t,peers:{Button:R},self:We}),Ye={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,positiveButtonProps:Object,negativeButtonProps:Object,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,titleClass:[String,Array],titleStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],actionClass:[String,Array],actionStyle:[String,Object],onPositiveClick:Function,onNegativeClick:Function,onClose:Function,closeFocusable:Boolean},Ve=b(Ye),Ke=i([l("dialog","\n --n-icon-margin: var(--n-icon-margin-top) var(--n-icon-margin-right) var(--n-icon-margin-bottom) var(--n-icon-margin-left);\n word-break: break-word;\n line-height: var(--n-line-height);\n position: relative;\n background: var(--n-color);\n color: var(--n-text-color);\n box-sizing: border-box;\n margin: auto;\n border-radius: var(--n-border-radius);\n padding: var(--n-padding);\n transition: \n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n ",[s("icon",{color:"var(--n-icon-color)"}),a("bordered",{border:"var(--n-border)"}),a("icon-top",[s("close",{margin:"var(--n-close-margin)"}),s("icon",{margin:"var(--n-icon-margin)"}),s("content",{textAlign:"center"}),s("title",{justifyContent:"center"}),s("action",{justifyContent:"center"})]),a("icon-left",[s("icon",{margin:"var(--n-icon-margin)"}),a("closable",[s("title","\n padding-right: calc(var(--n-close-size) + 6px);\n ")])]),s("close","\n position: absolute;\n right: 0;\n top: 0;\n margin: var(--n-close-margin);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n z-index: 1;\n "),s("content","\n font-size: var(--n-font-size);\n margin: var(--n-content-margin);\n position: relative;\n word-break: break-word;\n ",[a("last","margin-bottom: 0;")]),s("action","\n display: flex;\n justify-content: flex-end;\n ",[i("> *:not(:last-child)","\n margin-right: var(--n-action-space);\n ")]),s("icon","\n font-size: var(--n-icon-size);\n transition: color .3s var(--n-bezier);\n "),s("title","\n transition: color .3s var(--n-bezier);\n display: flex;\n align-items: center;\n font-size: var(--n-title-font-size);\n font-weight: var(--n-title-font-weight);\n color: var(--n-title-text-color);\n "),l("dialog-icon-container","\n display: flex;\n justify-content: center;\n ")]),r(l("dialog","\n width: 446px;\n max-width: calc(100vw - 32px);\n ")),l("dialog",[c("\n width: 446px;\n max-width: calc(100vw - 32px);\n ")])]),{computed:Qe,defineComponent:Ge,h:Je}=await e("vue"),Ze={default:()=>Je(H,null),info:()=>Je(H,null),success:()=>Je(I,null),warning:()=>Je(L,null),error:()=>Je(D,null)},eo=Ge({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},v.props),Ye),slots:Object,setup(e){const{mergedComponentPropsRef:o,mergedClsPrefixRef:n,inlineThemeDisabled:t,mergedRtlRef:i}=f(e),l=$("Dialog",i,n),r=Qe(()=>{var n,t;const{iconPlacement:i}=e;return i||(null===(t=null===(n=null==o?void 0:o.value)||void 0===n?void 0:n.Dialog)||void 0===t?void 0:t.iconPlacement)||"left"});const s=v("Dialog","-dialog",Ke,Xe,e,n),a=Qe(()=>{const{type:o}=e,n=r.value,{common:{cubicBezierEaseInOut:t},self:{fontSize:i,lineHeight:l,border:a,titleTextColor:c,textColor:d,color:u,closeBorderRadius:f,closeColorHover:v,closeColorPressed:p,closeIconColor:g,closeIconColorHover:m,closeIconColorPressed:C,closeIconSize:b,borderRadius:w,titleFontWeight:y,titleFontSize:x,padding:k,iconSize:S,actionSpace:B,contentMargin:O,closeSize:P,["top"===n?"iconMarginIconTop":"iconMargin"]:R,["top"===n?"closeMarginIconTop":"closeMargin"]:j,[h("iconColor",o)]:$}}=s.value,z=F(R);return{"--n-font-size":i,"--n-icon-color":$,"--n-bezier":t,"--n-close-margin":j,"--n-icon-margin-top":z.top,"--n-icon-margin-right":z.right,"--n-icon-margin-bottom":z.bottom,"--n-icon-margin-left":z.left,"--n-icon-size":S,"--n-close-size":P,"--n-close-icon-size":b,"--n-close-border-radius":f,"--n-close-color-hover":v,"--n-close-color-pressed":p,"--n-close-icon-color":g,"--n-close-icon-color-hover":m,"--n-close-icon-color-pressed":C,"--n-color":u,"--n-text-color":d,"--n-border-radius":w,"--n-padding":k,"--n-line-height":l,"--n-border":a,"--n-content-margin":O,"--n-title-font-size":x,"--n-title-font-weight":y,"--n-title-text-color":c,"--n-action-space":B}}),c=t?p("dialog",Qe(()=>`${e.type[0]}${r.value[0]}`),a,e):void 0;return{mergedClsPrefix:n,rtlEnabled:l,mergedIconPlacement:r,mergedTheme:s,handlePositiveClick:function(o){const{onPositiveClick:n}=e;n&&n(o)},handleNegativeClick:function(o){const{onNegativeClick:n}=e;n&&n(o)},handleCloseClick:function(){const{onClose:o}=e;o&&o()},cssVars:t?void 0:a,themeClass:null==c?void 0:c.themeClass,onRender:null==c?void 0:c.onRender}},render(){var e;const{bordered:o,mergedIconPlacement:n,cssVars:t,closable:i,showIcon:l,title:r,content:s,action:a,negativeText:c,positiveText:f,positiveButtonProps:v,negativeButtonProps:h,handlePositiveClick:p,handleNegativeClick:g,mergedTheme:m,loading:C,type:b,mergedClsPrefix:w}=this;null===(e=this.onRender)||void 0===e||e.call(this);const y=l?Je(B,{clsPrefix:w,class:`${w}-dialog__icon`},{default:()=>d(this.$slots.icon,e=>e||(this.icon?O(this.icon):Ze[this.type]()))}):null,x=d(this.$slots.action,e=>e||f||c||a?Je("div",{class:[`${w}-dialog__action`,this.actionClass],style:this.actionStyle},e||(a?[O(a)]:[this.negativeText&&Je(j,Object.assign({theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,ghost:!0,size:"small",onClick:g},h),{default:()=>O(this.negativeText)}),this.positiveText&&Je(j,Object.assign({theme:m.peers.Button,themeOverrides:m.peerOverrides.Button,size:"small",type:"default"===b?"primary":b,disabled:C,loading:C,onClick:p},v),{default:()=>O(this.positiveText)})])):null);return Je("div",{class:[`${w}-dialog`,this.themeClass,this.closable&&`${w}-dialog--closable`,`${w}-dialog--icon-${n}`,o&&`${w}-dialog--bordered`,this.rtlEnabled&&`${w}-dialog--rtl`],style:t,role:"dialog"},i?d(this.$slots.close,e=>{const o=[`${w}-dialog__close`,this.rtlEnabled&&`${w}-dialog--rtl`];return e?Je("div",{class:o},e):Je(P,{focusable:this.closeFocusable,clsPrefix:w,class:o,onClick:this.handleCloseClick})}):null,l&&"top"===n?Je("div",{class:`${w}-dialog-icon-container`},y):null,Je("div",{class:[`${w}-dialog__title`,this.titleClass],style:this.titleStyle},l&&"left"===n?y:null,u(this.$slots.header,()=>[O(r)])),Je("div",{class:[`${w}-dialog__content`,x?"":`${w}-dialog__content--last`,this.contentClass],style:this.contentStyle},u(this.$slots.default,()=>[O(s)])),x)}});function oo(e){const{modalColor:o,textColor2:n,boxShadow3:t}=e;return{color:o,textColor:n,boxShadow:t}}const no=n({name:"Modal",common:t,peers:{Scrollbar:T,Dialog:Xe,Card:w},self:oo}),to=o("n-modal-provider"),io=o("n-modal-api"),lo=o("n-modal-reactive-list"),{computed:ro,inject:so,onUnmounted:ao}=await e("vue");function co(){const e=so(io,null);return null===e&&g("use-modal","No outer <n-modal-provider /> founded."),e}function uo(){const e=so(lo,null);return null===e&&g("use-modal-reactive-list","No outer <n-modal-provider /> founded."),e}const fo="n-draggable";const vo=Object.assign(Object.assign({},y),Ye),ho=b(vo),{cloneVNode:po,computed:go,defineComponent:mo,h:Co,inject:bo,mergeProps:wo,nextTick:yo,normalizeClass:xo,provide:ko,ref:So,toRef:Bo,Transition:Oo,vShow:Po,watch:Ro,withDirectives:jo}=await e("vue"),$o=mo({name:"ModalBody",inheritAttrs:!1,slots:Object,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0},trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},blockScroll:Boolean,draggable:{type:[Boolean,Object],default:!1},maskHidden:Boolean},vo),{renderMask:Function,onClickoutside:Function,onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0},onAfterEnter:Function,onEsc:Function}),setup(e){const o=So(null),n=So(null),t=So(e.show),i=So(null),l=So(null),r=bo(Y);let s=null;Ro(Bo(e,"show"),e=>{e&&(s=r.getMousePosition())},{immediate:!0});const{stopDrag:a,startDrag:c,draggableRef:d,draggableClassRef:u}=function(e,o){let n;const t=ro(()=>!1!==e.value),i=ro(()=>t.value?fo:""),l=ro(()=>{const o=e.value;return!0===o||!1===o||!o||"none"!==o.bounds});function r(){n&&(n(),n=void 0)}return ao(r),{stopDrag:r,startDrag:function(e){const t=e.querySelector(`.${fo}`);if(!t||!i.value)return;let r,s=0,a=0,c=0,d=0,u=0,f=0;function v(o){o.preventDefault(),r=o;const{x:n,y:t,right:i,bottom:l}=e.getBoundingClientRect();a=n,d=t,s=window.innerWidth-i,c=window.innerHeight-l;const{left:v,top:h}=e.style;u=+h.slice(0,-2),f=+v.slice(0,-2)}function h(o){if(!r)return;const{clientX:n,clientY:t}=r;let i=o.clientX-n,v=o.clientY-t;l.value&&(i>s?i=s:-i>a&&(i=-a),v>c?v=c:-v>d&&(v=-d));const h=i+f,p=v+u;e.style.top=`${p}px`,e.style.left=`${h}px`}function p(){r=void 0,o.onEnd(e)}ee("mousedown",t,v),ee("mousemove",window,h),ee("mouseup",window,p),n=()=>{oe("mousedown",t,v),ee("mousemove",window,h),ee("mouseup",window,p)}},draggableRef:t,draggableClassRef:i}}(Bo(e,"draggable"),{onEnd:e=>{p(e)}}),f=go(()=>xo([e.titleClass,u.value])),v=go(()=>xo([e.headerClass,u.value]));function h(){if("center"===r.transformOriginRef.value)return"";const{value:e}=i,{value:o}=l;if(null===e||null===o)return"";if(n.value){return`${e}px ${o+n.value.containerScrollTop}px`}return""}function p(e){if("center"===r.transformOriginRef.value)return;if(!s)return;if(!n.value)return;const o=n.value.containerScrollTop,{offsetLeft:t,offsetTop:a}=e,c=s.y,d=s.x;i.value=-(t-d),l.value=-(a-c-o),e.style.transformOrigin=h()}Ro(Bo(e,"show"),e=>{e&&(t.value=!0)}),He(go(()=>e.blockScroll&&t.value));const g=So(null);return Ro(g,e=>{e&&yo(()=>{const n=e.el;n&&o.value!==n&&(o.value=n)})}),ko(V,o),ko(K,null),ko(Q,null),{mergedTheme:r.mergedThemeRef,appear:r.appearRef,isMounted:r.isMountedRef,mergedClsPrefix:r.mergedClsPrefixRef,bodyRef:o,scrollbarRef:n,draggableClass:u,displayed:t,childNodeRef:g,cardHeaderClass:v,dialogTitleClass:f,handlePositiveClick:function(){e.onPositiveClick()},handleNegativeClick:function(){e.onNegativeClick()},handleCloseClick:function(){const{onClose:o}=e;o&&o()},handleAfterEnter:function(o){const n=o;d.value&&c(n),e.onAfterEnter&&e.onAfterEnter(n)},handleAfterLeave:function(){t.value=!1,i.value=null,l.value=null,a(),e.onAfterLeave()},handleBeforeLeave:function(o){o.style.transformOrigin=h(),e.onBeforeLeave()},handleEnter:function(e){yo(()=>{p(e)})}}},render(){const{$slots:e,$attrs:o,handleEnter:n,handleAfterEnter:t,handleAfterLeave:i,handleBeforeLeave:l,preset:r,mergedClsPrefix:s}=this;let a=null;if(!r){if(a=U("default",e.default,{draggableClass:this.draggableClass}),!a)return void m("modal","default slot is empty");a=po(a),a.props=wo({class:`${s}-modal`},o,a.props||{})}return"show"===this.displayDirective||this.displayed||this.show?jo(Co("div",{role:"none",class:[`${s}-modal-body-wrapper`,this.maskHidden&&`${s}-modal-body-wrapper--mask-hidden`]},Co(E,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${s}-modal-scroll-content`},{default:()=>{var o;return[null===(o=this.renderMask)||void 0===o?void 0:o.call(this),Co(q,{disabled:!this.trapFocus||this.maskHidden,active:this.show,onEsc:this.onEsc,autoFocus:this.autoFocus},{default:()=>{var o;return Co(Oo,{name:"fade-in-scale-up-transition",appear:null!==(o=this.appear)&&void 0!==o?o:this.isMounted,onEnter:n,onAfterEnter:t,onAfterLeave:i,onBeforeLeave:l},{default:()=>{const o=[[Po,this.show]],{onClickoutside:n}=this;return n&&o.push([W,this.onClickoutside,void 0,{capture:!0}]),jo("confirm"===this.preset||"dialog"===this.preset?Co(eo,Object.assign({},this.$attrs,{class:[`${s}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},X(this.$props,Ve),{titleClass:this.dialogTitleClass,"aria-modal":"true"}),e):"card"===this.preset?Co(x,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${s}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},X(this.$props,k),{headerClass:this.cardHeaderClass,"aria-modal":"true",role:"dialog"}),e):this.childNodeRef=a,o)}})}})]}})),[[Po,"if"===this.displayDirective||this.displayed||this.show]]):null}}),zo=i([l("modal-container","\n position: fixed;\n left: 0;\n top: 0;\n height: 0;\n width: 0;\n display: flex;\n "),l("modal-mask","\n position: fixed;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n background-color: rgba(0, 0, 0, .4);\n ",[M({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--n-bezier-ease-out)",leaveCubicBezier:"var(--n-bezier-ease-out)"})]),l("modal-body-wrapper","\n position: fixed;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n overflow: visible;\n ",[l("modal-scroll-content","\n min-height: 100%;\n display: flex;\n position: relative;\n "),a("mask-hidden","pointer-events: none;",[i("> *","\n pointer-events: all;\n ")])]),l("modal","\n position: relative;\n align-self: center;\n color: var(--n-text-color);\n margin: auto;\n box-shadow: var(--n-box-shadow);\n ",[S({duration:".25s",enterScale:".5"}),i(`.${fo}`,"\n cursor: move;\n user-select: none;\n ")])]),{computed:Fo,defineComponent:To,h:Eo,inject:Mo,provide:Ao,ref:Do,toRef:Lo,Transition:Io,withDirectives:Ho}=await e("vue"),No=Object.assign(Object.assign(Object.assign(Object.assign({},v.props),{show:Boolean,showMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"},transformOrigin:{type:String,default:"mouse"},zIndex:Number,autoFocus:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0}}),vo),{draggable:[Boolean,Object],onEsc:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,internalDialog:Boolean,internalModal:Boolean,internalAppear:{type:Boolean,default:void 0},overlayStyle:[String,Object],onBeforeHide:Function,onAfterHide:Function,onHide:Function,unstableShowMask:{type:Boolean,default:void 0}}),_o=To({name:"Modal",inheritAttrs:!1,props:No,slots:Object,setup(e){const o=Do(null),{mergedClsPrefixRef:n,namespaceRef:t,inlineThemeDisabled:i}=f(e),l=v("Modal","-modal",zo,no,e,n),r=ye(64),s=fe(),a=z(),c=e.internalDialog?Mo(Ne,null):null,d=e.internalModal?Mo(Z,null):null,u=je();function h(o){const{onUpdateShow:n,"onUpdate:show":t,onHide:i}=e;n&&C(n,o),t&&C(t,o),i&&!o&&i(o)}Ao(Y,{getMousePosition:()=>{const e=c||d;if(e){const{clickedRef:o,clickedPositionRef:n}=e;if(o.value&&n.value)return n.value}return r.value?s.value:null},mergedClsPrefixRef:n,mergedThemeRef:l,isMountedRef:a,appearRef:Lo(e,"internalAppear"),transformOriginRef:Lo(e,"transformOrigin")});const g=Fo(()=>{const{common:{cubicBezierEaseOut:e},self:{boxShadow:o,color:n,textColor:t}}=l.value;return{"--n-bezier-ease-out":e,"--n-box-shadow":o,"--n-color":n,"--n-text-color":t}}),m=i?p("theme-class",void 0,g,e):void 0;return{mergedClsPrefix:n,namespace:t,isMounted:a,containerRef:o,presetProps:Fo(()=>X(e,ho)),handleEsc:function(o){var n;null===(n=e.onEsc)||void 0===n||n.call(e),e.show&&e.closeOnEsc&&te(o)&&(u.value||h(!1))},handleAfterLeave:function(){const{onAfterLeave:o,onAfterHide:n}=e;o&&C(o),n&&n()},handleClickoutside:function(n){var t;const{onMaskClick:i}=e;i&&i(n),e.maskClosable&&(null===(t=o.value)||void 0===t?void 0:t.contains(A(n)))&&h(!1)},handleBeforeLeave:function(){const{onBeforeLeave:o,onBeforeHide:n}=e;o&&C(o),n&&n()},doUpdateShow:h,handleNegativeClick:function(){const{onNegativeClick:o}=e;o?Promise.resolve(o()).then(e=>{!1!==e&&h(!1)}):h(!1)},handlePositiveClick:function(){const{onPositiveClick:o}=e;o?Promise.resolve(o()).then(e=>{!1!==e&&h(!1)}):h(!1)},handleCloseClick:function(){const{onClose:o}=e;o?Promise.resolve(o()).then(e=>{!1!==e&&h(!1)}):h(!1)},cssVars:i?void 0:g,themeClass:null==m?void 0:m.themeClass,onRender:null==m?void 0:m.onRender}},render(){const{mergedClsPrefix:e}=this;return Eo(G,{to:this.to,show:this.show},{default:()=>{var o;null===(o=this.onRender)||void 0===o||o.call(this);const{showMask:n}=this;return Ho(Eo("div",{role:"none",ref:"containerRef",class:[`${e}-modal-container`,this.themeClass,this.namespace],style:this.cssVars},Eo($o,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset,autoFocus:this.autoFocus,trapFocus:this.trapFocus,draggable:this.draggable,blockScroll:this.blockScroll,maskHidden:!n},this.presetProps,{onEsc:this.handleEsc,onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave,onClickoutside:n?void 0:this.handleClickoutside,renderMask:n?()=>{var o;return Eo(Io,{name:"fade-in-transition",key:"mask",appear:null!==(o=this.internalAppear)&&void 0!==o?o:this.isMounted},{default:()=>this.show?Eo("div",{"aria-hidden":!0,ref:"containerRef",class:`${e}-modal-mask`,onClick:this.handleClickoutside}):null})}:void 0}),this.$slots)),[[J,{zIndex:this.zIndex,enabled:this.show}]])}})}});export{eo as NDialog,_o as NModal,_e as dialogApiInjectionKey,Ve as dialogPropKeys,Ye as dialogProps,Ne as dialogProviderInjectionKey,Ue as dialogReactiveListInjectionKey,Ie as lockHtmlScrollRightCompensationRef,io as modalApiInjectionKey,No as modalProps,to as modalProviderInjectionKey,lo as modalReactiveListInjectionKey,We as self,oo as self$1,fe as useClickPosition,ye as useClicked,je as useIsComposing,He as useLockHtmlScroll,co as useModal,uo as useModalReactiveList};

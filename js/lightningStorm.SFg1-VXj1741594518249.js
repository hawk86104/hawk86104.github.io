import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.KQMNCWkC1741594518249.js";import{B as i,b as s,cB as n,ab as e,X as r,a as o,an as a,$ as c,r as h,_ as u}from"./three.8y0_KTxz1741594518249.js";import{e as l,I as p,K as d}from"./@tresjs.gjafZgVK1741594518249.js";import{a as m}from"./simplex-noise.jB2HxhHB1741594518249.js";import{d as f,a2 as g,o as y,H as b,u as S,r as v,j as w,g as _,m as x,F as I}from"./@vue.NRI7TcgI1741594518249.js";import"./index.zKExUff81741594518249.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.BpDhqM3p1741594518249.js";import"./three-custom-shader-material.Bah0Myv81741594518249.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741594518249.js";import"./postprocessing.iiPTtJPW1741594518249.js";import"./@vueuse.8xnC6EWf1741594518249.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.brNulbgA1741594518249.js";import"./all.three.aalXMn071741594518249.js";import"./oimophysics.x0jH7fze1741594518249.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.cVFL7d4w1741594518249.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.-qSN0BPz1741594518249.js";import"./index.gRDhHVVn1741594518249.js";import"./three-stdlib.uPGGcbR71741594518249.js";import"./@pmndrs.0VhNBP751741594518249.js";import"./object-hash.sZxA5Asp1741594518249.js";import"./@amap.gPFcnYXF1741594518249.js";import"./jszip.VTnDVY9z1741594518249.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.xkRhjhkW1741594518249.js";import"./videoFloor.vue_vue_type_script_setup_true_lang._UAswL2Y1741594518249.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.Wy4jmlsy1741594518249.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.aCG6FUlR1741594518249.js";const M=A;!function(t,i){const s=A,n=C();for(;;)try{if(943467===-parseInt(s(460))/1*(-parseInt(s(378))/2)+-parseInt(s(386))/3*(-parseInt(s(407))/4)+-parseInt(s(446))/5+-parseInt(s(505))/6*(parseInt(s(381))/7)+-parseInt(s(402))/8*(parseInt(s(487))/9)+parseInt(s(530))/10+parseInt(s(523))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=A,i=new RegExp(t(510)),s=new RegExp(t(389),"i"),n=V(t(457));i.test(n+t(406))&&s[t(479)](n+t(494))?V():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(387)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(t,i){const s=C();return(A=function(t,i){return s[t-=359]})(t,i)}function C(){const t=["recursionProbability","ceil","4gZsPDT","noiseSeed","needsUpdate","14PHSals","bind","fraction1","pos0","propagationTimeFactor","3mLmGGK","apply","subVectors","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","vertices","RAY_UNBORN","ramification","info","SIN30DEG","updateMesh","up0","isStatic","pos1","table","isEternal","currentCreateTriangleVertices","1160uJIDoL","counter","exception","trace","chain","1934344gZrVal","length","__proto__","floor","fractalRayRecursive","random","straightness","maxSubrays","currentSubray","maxIterations","radius0","debu","iteration","fillMesh","currentSegmentCallback","constructor","onSubrayCreation","generateUVs","subrayConePosition","positionAttribute","RAY_EXTINGUISHED","array","middleLinPos","visible","createTriangleVerticesWithoutUVs","currentUVCoordinate","numSubrays","deathTime","seed","subrays","radius1Factor","RAY_INITIALIZED","createTriangleVerticesWithUVs","beginVanishingTime","normalize","currentSeed","set","cos","positionVariationFactor","7912425ivpLdJ","initSubray","index","onDecideSubrayCreation","randomGenerator","endPropagationTime","getNewSegment","createSegment","roughness","forwards","isInitialSegment","init","addNewSubray","subrayPeriod","401633aOnuEd","usage","copyParameters","currentSegmentIndex","raySegments","side","return (function() ","forwardsFill","maxSubrayRecursion","COS30DEG","destOffset","vPos","currentCoordinate","uvs","radius0Factor","simplexY","update","middlePos","radius1","test","sin","LightningStrike","setIndex","linPos0","drawRange","state",'{}.constructor("return this")( )',"104211LGFStd","subrayDutyCycle","subrayCylinderPosition","maxRaySegments","fraction0","clone","type","input","copy","call","createPrism","createMesh","max","sub","newPos","pow","multiplyScalar","uvsAttribute","1412298jEYcru","min","count","error","position","function *\\( *\\)","RAY_STEADY","birthTime","simplexX","createSubray","setSeed","lerpVectors","console","currentIndex","recursion","timeFraction","lerp","vanishingTimeFactor","31133465NdRMEK","RAY_PROPAGATING","createDefaultSubrayCreationCallbacks","crossVectors","simplexZ","push","time","5585060NjPBAX","while (true) {}","setAttribute","cross1","down","createRandomGenerator","linPos1","up1","string","RAY_VANISHING","indices","gger","add","currentVertex","subrayProbability","minRadius","timeScale","seedGenerator","fractalRay","toString","sourceOffset","rayParameters"];return(C=function(){return t})()}R(void 0,(function(){const t=A,i=function(){const t=A;let i;try{i=Function(t(466)+t(486)+");")()}catch(s){i=window}return i}(),s=i[t(517)]=i[t(517)]||{},n=["log","warn",t(393),t(508),t(404),t(399),t(405)];for(let e=0;e<n[t(408)];e++){const i=R[t(422)].prototype.bind(R),r=n[e],o=s[r]||i;i[t(409)]=R[t(382)](R),i[t(373)]=o[t(373)].bind(o),s[r]=i}}))();class j extends i{constructor(t={}){const i=A;super(),this.isLightningStrike=!0,this[i(493)]=i(481),this[i(457)](j[i(462)](t,t)),this[i(498)]()}static[M(359)](){const t=2053,i=[];for(let n=0;n<t;n++)i.push(Math.random());const s={currentSeed:0,random:function(){const n=A,e=i[s.currentSeed];return s[n(442)]=(s[n(442)]+1)%t,e},getSeed:function(){return s.currentSeed/t},setSeed:function(i){s.currentSeed=Math.floor(i*t)%t}};return s}static[M(462)](t={},i={}){const n=M,e=function(s){return i===t?s:s[A(492)]()};return t[n(374)]=void 0!==i[n(374)]?e(i[n(374)]):new s(0,100,0),t[n(470)]=void 0!==i[n(470)]?e(i.destOffset):new s(0,0,0),t[n(370)]=void 0!==i[n(370)]?i.timeScale:1,t[n(454)]=void 0!==i.roughness?i.roughness:.9,t[n(413)]=void 0!==i[n(413)]?i[n(413)]:.7,t[n(396)]=void 0!==i.up0?e(i[n(396)]):new s(0,0,1),t.up1=void 0!==i[n(361)]?e(i[n(361)]):new s(0,0,1),t.radius0=void 0!==i[n(417)]?i.radius0:1,t[n(478)]=void 0!==i[n(478)]?i[n(478)]:1,t[n(474)]=void 0!==i[n(474)]?i[n(474)]:.5,t[n(437)]=void 0!==i[n(437)]?i[n(437)]:.2,t[n(369)]=void 0!==i.minRadius?i[n(369)]:.2,t[n(400)]=void 0!==i[n(400)]?i[n(400)]:void 0===i.birthTime||void 0===i[n(434)],t[n(512)]=i.birthTime,t[n(434)]=i.deathTime,t[n(385)]=void 0!==i[n(385)]?i[n(385)]:.1,t[n(522)]=void 0!==i[n(522)]?i[n(522)]:.9,t.subrayPeriod=void 0!==i[n(459)]?i.subrayPeriod:4,t[n(488)]=void 0!==i[n(488)]?i[n(488)]:.6,t[n(416)]=void 0!==i[n(416)]?i[n(416)]:9,t[n(397)]=void 0!==i[n(397)]&&i[n(397)],t.ramification=void 0!==i.ramification?i[n(392)]:5,t[n(468)]=void 0!==i.maxSubrayRecursion?i.maxSubrayRecursion:3,t[n(376)]=void 0!==i.recursionProbability?i[n(376)]:.6,t[n(424)]=void 0!==i[n(424)]&&i[n(424)],t[n(450)]=i.randomGenerator,t[n(379)]=i.noiseSeed,t[n(449)]=i[n(449)],t[n(423)]=i[n(423)],t}[M(476)](t){const i=M;this.isStatic||(this.rayParameters[i(400)]||this[i(375)][i(512)]<=t&&t<=this[i(375)][i(434)]?(this[i(395)](t),t<this[i(436)][0].endPropagationTime?this[i(485)]=j.RAY_PROPAGATING:t>this[i(436)][0][i(440)]?this.state=j[i(363)]:this[i(485)]=j[i(511)],this[i(430)]=!0):(this[i(430)]=!1,t<this[i(375)][i(512)]?this[i(485)]=j[i(391)]:this[i(485)]=j.RAY_EXTINGUISHED))}[M(457)](t){const i=M;this[i(375)]=t,this.maxIterations=void 0!==t[i(416)]?Math[i(410)](t[i(416)]):9,t.maxIterations=this[i(416)],this[i(397)]=void 0!==t[i(397)]&&t[i(397)],t[i(397)]=this.isStatic,this[i(392)]=void 0!==t.ramification?Math[i(410)](t[i(392)]):5,t[i(392)]=this.ramification,this[i(468)]=void 0!==t[i(468)]?Math[i(410)](t[i(468)]):3,t[i(468)]=this[i(468)],this[i(376)]=void 0!==t[i(376)]?t[i(376)]:.6,t[i(376)]=this[i(376)],this[i(424)]=void 0!==t[i(424)]&&t[i(424)],t[i(424)]=this[i(424)],void 0!==t[i(450)]?(this[i(450)]=t[i(450)],this[i(371)]=t[i(450)],void 0!==t[i(379)]&&this.seedGenerator[i(515)](t[i(379)])):(this.randomGenerator=j[i(359)](),this[i(371)]=Math),void 0!==t[i(449)]?this[i(449)]=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this[i(423)]=t.onSubrayCreation)),this[i(485)]=j.RAY_INITIALIZED,this[i(414)]=Math[i(377)](1+Math.pow(this[i(392)],Math[i(499)](0,this[i(468)]-1))),t[i(414)]=this[i(414)],this.maxRaySegments=2*(1<<this[i(416)]),this[i(436)]=[];for(let s=0;s<this[i(414)];s++)this[i(436)][i(528)](this.createSubray());this[i(464)]=[];for(let s=0;s<this[i(490)];s++)this[i(464)][i(528)](this[i(453)]());this.time=0,this[i(520)]=0,this[i(421)]=null,this[i(401)]=this.generateUVs?this[i(439)]:this[i(431)],this[i(433)]=0,this.currentSubray=null,this.currentSegmentIndex=0,this[i(456)]=!1,this[i(368)]=0,this[i(367)]=0,this.currentIndex=0,this[i(472)]=0,this[i(432)]=0,this[i(390)]=null,this[i(473)]=null,this[i(364)]=null,this[i(426)]=null,this[i(504)]=null,this[i(513)]=m(this[i(371)][i(412)]),this[i(475)]=m(this[i(371)][i(412)]),this[i(527)]=m(this[i(371)][i(412)]),this[i(455)]=new s,this[i(467)]=new s,this[i(465)]=new s,this[i(534)]=new s,this[i(477)]=new s,this[i(429)]=new s,this.newPos=new s,this.vPos=new s,this[i(533)]=new s}[M(498)](){const t=M,i=1<<this[t(416)],s=3*(i+1)*this[t(414)],o=18*i*this.maxSubrays;this[t(390)]=new Float32Array(3*s),this[t(364)]=new Uint32Array(o),this[t(424)]&&(this[t(473)]=new Float32Array(2*s)),this[t(420)](0),this[t(482)](new n(this[t(364)],1)),this[t(426)]=new e(this[t(390)],3),this[t(532)](t(509),this.positionAttribute),this.generateUVs&&(this[t(504)]=new e(new Float32Array(this[t(473)]),2),this[t(532)]("uv",this[t(504)])),!this.isStatic&&(this[t(448)].usage=r,this.positionAttribute[t(461)]=r,this[t(424)]&&(this[t(504)].usage=r)),this[t(390)]=this[t(426)].array,this[t(364)]=this[t(448)][t(428)],this.generateUVs&&(this.uvs=this[t(504)][t(428)])}[M(395)](t){const i=M;this[i(420)](t),this[i(484)][i(507)]=this[i(518)],this[i(448)][i(380)]=!0,this[i(426)][i(380)]=!0,this[i(424)]&&(this[i(504)][i(380)]=!0)}[M(420)](t){const i=M,s=this;this[i(367)]=0,this.currentIndex=0,this[i(472)]=0,this[i(432)]=0,this[i(372)](t,(function(n){const e=i,r=s[e(415)];t<r[e(512)]||(this[e(375)][e(400)]&&0==s.currentSubray[e(519)]?(s[e(497)](n),s[e(449)](n,s)):t<r.endPropagationTime?s[e(520)]>=n[e(491)]*r[e(385)]&&(s.createPrism(n),s.onDecideSubrayCreation(n,s)):t<r.beginVanishingTime?(s[e(497)](n),s.onDecideSubrayCreation(n,s)):(s.timeFraction<=r.vanishingTimeFactor+n[e(383)]*(1-r.vanishingTimeFactor)&&s[e(497)](n),s[e(449)](n,s)))}))}[M(458)](){const t=M;return this[t(436)][this[t(433)]++]}[M(447)](t,i){const s=M;t[s(384)].copy(i.sourceOffset),t[s(398)].copy(i[s(470)]),t[s(396)][s(495)](i[s(396)]),t.up1[s(495)](i.up1),t.radius0=i.radius0,t[s(478)]=i[s(478)],t[s(512)]=i.birthTime,t[s(434)]=i[s(434)],t[s(370)]=i[s(370)],t[s(454)]=i.roughness,t[s(413)]=i[s(413)],t[s(385)]=i[s(385)],t.vanishingTimeFactor=i[s(522)],t[s(416)]=this[s(416)],t[s(435)]=void 0!==i.noiseSeed?i[s(379)]:0,t[s(519)]=0}[M(372)](t,i){const s=M;this[s(529)]=t,this[s(421)]=i,this.numSubrays=0,this[s(447)](this[s(458)](),this.rayParameters);for(let n=0;n<this.numSubrays;n++){const i=this.subrays[n];this[s(415)]=i,this[s(450)][s(515)](i[s(435)]),i.endPropagationTime=o[s(521)](i[s(512)],i[s(434)],i[s(385)]),i[s(440)]=o[s(521)](i[s(434)],i[s(512)],1-i.vanishingTimeFactor);const e=this[s(450)][s(412)];i[s(483)][s(443)](e(),e(),e())[s(503)](1e3),i[s(360)][s(443)](e(),e(),e()).multiplyScalar(1e3),this[s(520)]=(t-i.birthTime)/(i[s(434)]-i[s(512)]),this[s(463)]=0,this[s(456)]=!0;const r=this[s(452)]();r[s(419)]=0,r.pos0[s(495)](i[s(384)]),r[s(398)][s(495)](i.pos1),r.linPos0.copy(i[s(483)]),r[s(360)][s(495)](i[s(360)]),r.up0.copy(i.up0),r[s(361)][s(495)](i[s(361)]),r[s(417)]=i.radius0,r[s(478)]=i[s(478)],r.fraction0=0,r[s(383)]=1,r[s(445)]=1-i[s(413)],this[s(368)]=this.ramification*Math.pow(this[s(376)],i[s(519)])/(1<<i[s(416)]),this[s(411)](r)}this.currentSegmentCallback=null,this[s(415)]=null}[M(411)](t){const i=M;if(t[i(419)]>=this.currentSubray[i(416)])return void this[i(421)](t);this.forwards[i(388)](t[i(398)],t[i(384)]);let s=this[i(455)][i(408)]();s<1e-6&&(this[i(455)][i(443)](0,0,.01),s=this[i(455)][i(408)]());const n=.5*(t[i(417)]+t[i(478)]),e=.5*(t[i(491)]+t[i(383)]),r=this[i(529)]*this[i(415)][i(370)]*Math[i(502)](2,t[i(419)]);this.middlePos[i(516)](t.pos0,t[i(398)],.5),this[i(429)].lerpVectors(t[i(483)],t[i(360)],.5);const o=this[i(429)];this[i(501)][i(443)](this[i(513)](o.x,o.y,o.z,r),this[i(475)](o.x,o.y,o.z,r),this[i(527)](o.x,o.y,o.z,r)),this.newPos[i(503)](t[i(445)]*s),this[i(501)][i(366)](this[i(477)]);const a=this.getNewSegment();a[i(384)][i(495)](t[i(384)]),a.pos1.copy(this[i(501)]),a[i(483)].copy(t.linPos0),a[i(360)][i(495)](this[i(429)]),a.up0[i(495)](t[i(396)]),a.up1[i(495)](t[i(361)]),a[i(417)]=t[i(417)],a[i(478)]=n,a[i(491)]=t[i(491)],a[i(383)]=e,a.positionVariationFactor=t[i(445)]*this.currentSubray[i(454)],a[i(419)]=t[i(419)]+1;const c=this[i(452)]();c[i(384)][i(495)](this[i(501)]),c[i(398)][i(495)](t[i(398)]),c[i(483)].copy(this[i(429)]),c[i(360)][i(495)](t[i(360)]),this[i(533)].crossVectors(t[i(396)],this[i(455)][i(441)]()),c.up0[i(526)](this[i(455)],this[i(533)]).normalize(),c.up1.copy(t[i(361)]),c[i(417)]=n,c[i(478)]=t[i(478)],c[i(491)]=e,c[i(383)]=t[i(383)],c[i(445)]=t[i(445)]*this.currentSubray[i(454)],c.iteration=t[i(419)]+1,this[i(411)](a),this[i(411)](c)}createPrism(t){const i=M;this.forwardsFill[i(388)](t.pos1,t[i(384)])[i(441)](),this[i(456)]&&(this[i(401)](t[i(384)],t[i(396)],this[i(467)],t[i(417)],0),this[i(456)]=!1),this[i(401)](t[i(398)],t[i(396)],this[i(467)],t[i(478)],t.fraction1),this.createPrismFaces()}[M(431)](t,i,s,n){const e=M;this[e(465)][e(526)](i,s)[e(503)](n*j.COS30DEG),this.down[e(495)](i)[e(503)](-n*j.SIN30DEG);const r=this[e(471)],o=this[e(390)];r[e(495)](t)[e(500)](this[e(465)]).add(this[e(534)]),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r[e(495)](t)[e(366)](this[e(465)])[e(366)](this.down),o[this[e(472)]++]=r.x,o[this[e(472)]++]=r.y,o[this[e(472)]++]=r.z,r[e(495)](i)[e(503)](n)[e(366)](t),o[this.currentCoordinate++]=r.x,o[this[e(472)]++]=r.y,o[this[e(472)]++]=r.z,this[e(367)]+=3}[M(439)](t,i,s,n,e){const r=M;this[r(465)].crossVectors(i,s)[r(503)](n*j[r(469)]),this[r(534)].copy(i)[r(503)](-n*j.SIN30DEG);const o=this.vPos,a=this[r(390)],c=this[r(473)];o[r(495)](t)[r(500)](this.side)[r(366)](this[r(534)]),a[this[r(472)]++]=o.x,a[this[r(472)]++]=o.y,a[this[r(472)]++]=o.z,c[this[r(432)]++]=e,c[this[r(432)]++]=0,o.copy(t).add(this[r(465)]).add(this[r(534)]),a[this.currentCoordinate++]=o.x,a[this[r(472)]++]=o.y,a[this[r(472)]++]=o.z,c[this[r(432)]++]=e,c[this[r(432)]++]=.5,o.copy(i)[r(503)](n)[r(366)](t),a[this[r(472)]++]=o.x,a[this[r(472)]++]=o.y,a[this[r(472)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(432)]++]=1,this[r(367)]+=3}createPrismFaces(t){const i=M,s=this.indices;t=this.currentVertex-6,s[this[i(518)]++]=t+1,s[this[i(518)]++]=t+2,s[this[i(518)]++]=t+5,s[this[i(518)]++]=t+1,s[this[i(518)]++]=t+5,s[this[i(518)]++]=t+4,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+1,s[this[i(518)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(518)]++]=t+4,s[this[i(518)]++]=t+3,s[this[i(518)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(518)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(518)]++]=t+3,s[this[i(518)]++]=t+5}[M(525)](){const t=M,i=this[t(450)].random;this[t(449)]=function(s,n){const e=t,r=n[e(415)],a=n[e(375)][e(459)],c=n[e(375)][e(488)],h=n[e(375)][e(400)]&&0==r[e(519)]?-i()*a:o.lerp(r[e(512)],r[e(451)],s[e(491)])-i()*a,u=n[e(529)]-h,l=Math.floor(u/a),p=i()*(l+1);let d=0;if(u%a<=c*a&&(d=n.subrayProbability),r[e(519)]<n.maxSubrayRecursion&&n[e(433)]<n[e(414)]&&i()<d){const t=n[e(458)](),o=n.randomGenerator.getSeed();t[e(435)]=p,n[e(450)].setSeed(p),t[e(519)]=r.recursion+1,t[e(416)]=Math[e(499)](1,r.maxIterations-1),t[e(483)].set(i(),i(),i())[e(503)](1e3),t[e(360)][e(443)](i(),i(),i())[e(503)](1e3),t[e(396)][e(495)](r[e(396)]),t[e(361)][e(495)](r[e(361)]),t[e(417)]=s[e(417)]*n[e(375)].radius0Factor,t[e(478)]=Math[e(506)](n[e(375)].minRadius,s[e(478)]*n[e(375)][e(437)]),t[e(512)]=h+l*a,t[e(434)]=t[e(512)]+a*c,!n[e(375)][e(400)]&&0==r.recursion&&(t[e(512)]=Math.max(t[e(512)],r[e(512)]),t.deathTime=Math[e(506)](t.deathTime,r[e(434)])),t.timeScale=2*r.timeScale,t.roughness=r.roughness,t[e(413)]=r[e(413)],t[e(385)]=r[e(385)],t[e(522)]=r[e(522)],n[e(423)](s,r,t,n),n.randomGenerator.setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(425)]=function(s,o,c,h,u,l){const p=t;c[p(384)].copy(s[p(384)]),n.subVectors(o[p(398)],o[p(384)]),e.copy(n)[p(441)](),n[p(503)](s.fraction0+(1-s[p(491)])*(i()*h));const d=n[p(408)]();r[p(526)](o.up0,e);const m=2*Math.PI*i();r[p(503)](Math[p(444)](m)),a[p(495)](o.up0)[p(503)](Math[p(480)](m)),c[p(398)][p(495)](r)[p(366)](a)[p(503)](d*u*(l+i()*(1-l)))[p(366)](n)[p(366)](o[p(384)])},this[t(489)]=function(s,o,c,h,u,l){const p=t;c[p(384)][p(495)](s[p(384)]),n.subVectors(o.pos1,o.pos0),e.copy(n)[p(441)](),n[p(503)](s.fraction0+(1-s[p(491)])*((2*i()-1)*h));const d=n[p(408)]();r.crossVectors(o.up0,e);const m=2*Math.PI*i();r[p(503)](Math.cos(m)),a.copy(o[p(396)]).multiplyScalar(Math[p(480)](m)),c[p(398)][p(495)](r)[p(366)](a)[p(503)](d*u*(l+i()*(1-l)))[p(366)](n).add(o.pos0)}}[M(514)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(453)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(464)][this[t(463)]++]}[M(495)](t){const i=M;return super[i(495)](t),this[i(457)](j[i(462)]({},t[i(375)])),this}[M(492)](){return new this.constructor(j.copyParameters({},this.rayParameters))}}function V(t){function i(t){const s=A;if(typeof t===s(362))return function(t){}[s(422)](s(531))[s(387)](s(403));1!==(""+t/t)[s(408)]||t%20==0?function(){return!0}[s(422)](s(418)+s(365))[s(496)]("action"):function(){return!1}.constructor(s(418)+s(365)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function F(t,i){const s=H();return(F=function(t,i){return s[t-=409]})(t,i)}j[M(438)]=0,j[M(391)]=1,j[M(524)]=2,j.RAY_STEADY=3,j.RAY_VANISHING=4,j[M(427)]=5,j[M(469)]=Math[M(444)](30*Math.PI/180),j[M(394)]=Math.sin(30*Math.PI/180);const D=F;!function(t,i){const s=F,n=H();for(;;)try{if(543389===-parseInt(s(474))/1*(parseInt(s(415))/2)+parseInt(s(444))/3*(-parseInt(s(478))/4)+parseInt(s(453))/5*(-parseInt(s(439))/6)+parseInt(s(450))/7+-parseInt(s(479))/8+parseInt(s(440))/9+-parseInt(s(470))/10*(-parseInt(s(416))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(438)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){G(this,(function(){const t=F,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(417),"i"),n=L("init");i[t(427)](n+"chain")&&s.test(n+"input")?L():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(438)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(){const t=["11LTwzYT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","lightningMaxDuration","while (true) {}","state","RAY_EXTINGUISHED","size","call","rayParameters","stateObject","random","test","toString","table","inited","birthTime","deadLightningsMeshes","geometry","console","return (function() ","length","lightningsMeshes","apply","2272338WNUuhS","4225140gifxug","getNextLightningTime","destOffset","set","24405YOQAOa","splice","sourceOffset","update","noiseSeed","constructor","1955366PyhNVM","error","maxHeight","5TdyQeG","onRayPosition","bind","copyParameters","lightningMinDuration","log","trace","onLightningDown","remove","nextLightningTime","add","minHeight","lightningMaxPeriod","push",'{}.constructor("return this")( )',"__proto__","maxLightnings","25804190xeEUCK","exception","counter","action","63277EBliHa","stormParams","lightningParameters","isLightningStorm","312bSYGPf","6587360JdolOl","maxSlope","string","clone","lightningMaterial","deathTime","lerp","info","debu","lightningMinPeriod","copy","pop","warn","30XNdQJx"];return(H=function(){return t})()}E(void 0,(function(){const t=F,i=function(){const t=F;let i;try{i=Function(t(435)+t(467)+");")()}catch(s){i=window}return i}(),s=i[t(434)]=i[t(434)]||{},n=[t(458),t(414),t(409),t(451),t(471),t(429),t(459)];for(let e=0;e<n[t(436)];e++){const i=E.constructor.prototype[t(455)](E),r=n[e],o=s[r]||i;i[t(468)]=E[t(455)](E),i[t(428)]=o[t(428)][t(455)](o),s[r]=i}}))();class z extends a{constructor(t={}){const i=F;super(),this[i(477)]=!0,this[i(475)]=t,t[i(422)]=void 0!==t[i(422)]?t[i(422)]:1e3,t[i(464)]=void 0!==t[i(464)]?t[i(464)]:80,t[i(452)]=void 0!==t.maxHeight?t[i(452)]:100,t[i(480)]=void 0!==t[i(480)]?t[i(480)]:1.1,t[i(469)]=void 0!==t[i(469)]?t[i(469)]:3,t.lightningMinPeriod=void 0!==t.lightningMinPeriod?t[i(411)]:3,t[i(465)]=void 0!==t[i(465)]?t[i(465)]:7,t[i(457)]=void 0!==t[i(457)]?t[i(457)]:1,t.lightningMaxDuration=void 0!==t[i(418)]?t[i(418)]:2.5,this[i(476)]=j[i(456)](t.lightningParameters,t[i(476)]),this[i(476)].isEternal=!1,this[i(483)]=void 0!==t[i(483)]?t[i(483)]:new c({color:11599871}),void 0!==t[i(454)]?this.onRayPosition=t.onRayPosition:this[i(454)]=function(s,n){const e=i;n[e(443)]((Math[e(426)]()-.5)*t[e(422)],0,(Math.random()-.5)*t[e(422)]);const r=o[e(485)](t[e(464)],t[e(452)],Math[e(426)]());s[e(443)](t[e(480)]*(2*Math[e(426)]()-1),1,t[e(480)]*(2*Math.random()-1)).multiplyScalar(r)[e(463)](n)},this.onLightningDown=t[i(460)],this[i(430)]=!1,this[i(462)]=0,this[i(437)]=[],this[i(432)]=[];for(let s=0;s<this[i(475)].maxLightnings;s++){const t=new j(j[i(456)]({},this.lightningParameters)),s=new h(t,this[i(483)]);this[i(432)][i(466)](s)}}[D(447)](t){const i=D;if(!this[i(430)]&&(this[i(462)]=this[i(441)](t)*Math.random(),this[i(430)]=!0),t>=this[i(462)]){const s=this[i(432)][i(413)]();if(s){const n=j.copyParameters(s[i(433)][i(424)],this.lightningParameters);n[i(431)]=t,n[i(484)]=t+o.lerp(this[i(475)][i(457)],this.stormParams[i(418)],Math[i(426)]()),this[i(454)](n[i(446)],n[i(442)]),n[i(448)]=Math[i(426)](),this[i(463)](s),this.lightningsMeshes.push(s)}this[i(462)]=this[i(441)](t)}let s=0,n=this.lightningsMeshes[i(436)];for(;s<n;){const e=this[i(437)][s],r=e[i(433)],o=r[i(420)];r[i(447)](t),o===j.RAY_PROPAGATING&&r[i(420)]>o&&this[i(460)]&&this[i(460)](r),r[i(420)]===j[i(421)]?(this[i(437)][i(445)](this[i(437)].indexOf(e),1),this.deadLightningsMeshes[i(466)](e),this[i(461)](e),n--):s++}}[D(441)](t){const i=D;return t+o[i(485)](this[i(475)][i(411)],this[i(475)][i(465)],Math[i(426)]())/(this[i(475)][i(469)]+1)}[D(412)](t,i){const s=D;return super[s(412)](t,i),this[s(475)][s(422)]=t.stormParams[s(422)],this.stormParams[s(464)]=t[s(475)].minHeight,this[s(475)][s(452)]=t[s(475)][s(452)],this[s(475)][s(480)]=t[s(475)][s(480)],this[s(475)][s(469)]=t[s(475)][s(469)],this.stormParams[s(411)]=t[s(475)][s(411)],this[s(475)][s(465)]=t[s(475)][s(465)],this[s(475)][s(457)]=t[s(475)][s(457)],this[s(475)][s(418)]=t[s(475)].lightningMaxDuration,this[s(476)]=j[s(456)]({},t.lightningParameters),this[s(483)]=t[s(475)][s(483)],this[s(460)]=t[s(460)],this}[D(482)](){const t=D;return new(this[t(449)])(this[t(475)])[t(412)](this)}}function L(t){function i(t){const s=F;if(typeof t===s(481))return function(t){}[s(449)](s(419))[s(438)](s(472));1!==(""+t/t)[s(436)]||t%20==0?function(){return!0}[s(449)](s(410)+"gger")[s(423)](s(473)):function(){return!1}.constructor(s(410)+"gger")[s(438)](s(425)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function N(t,i){const s=k();return(N=function(t,i){return s[t-=176]})(t,i)}const O=N;!function(t,i){const s=N,n=k();for(;;)try{if(159726===-parseInt(s(234))/1*(-parseInt(s(224))/2)+parseInt(s(222))/3*(-parseInt(s(200))/4)+parseInt(s(182))/5*(parseInt(s(209))/6)+-parseInt(s(196))/7+parseInt(s(221))/8+parseInt(s(192))/9*(parseInt(s(177))/10)+-parseInt(s(212))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(235)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=N,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(189),"i"),n=$(t(183));i.test(n+"chain")&&s.test(n+t(199))?$():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(235)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=N;let i;try{i=Function(t(231)+t(207)+");")()}catch(e){i=window}const s=i[t(206)]=i[t(206)]||{},n=[t(190),t(220),t(210),t(233),t(203),t(204),t(215)];for(let r=0;r<n[t(202)];r++){const i=Y[t(193)][t(180)][t(181)](Y),e=n[r],o=s[e]||i;i[t(216)]=Y[t(181)](Y),i[t(228)]=o[t(228)][t(181)](o),s[e]=i}}))();const Z=[O(208)];function k(){const t=["967900HajvVS","sub","primitive","prototype","bind","458330fLXpdV","init","sourceOffset","dot","subrayPeriod","maxLightnings","minHeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","addVectors","9FfgWUT","constructor","maxHeight","while (true) {}","48755QjGIaY","multiplyScalar","string","input","370564pWlCiI","timeScale","length","exception","table","subrayConePosition","console",'{}.constructor("return this")( )',"object","18dTwtxc","info","color","6632516xUFXvV","gger","straightness","trace","__proto__","size","stateObject","radius1","warn","2531936iUHlqH","6ubPESR","counter","6TgwcDS","#b0ffff","add","roughness","toString","Vector3","Color","return (function() ","radius0","error","88883MghXfE","apply","action","debu","pos1","rayParameters"];return(k=function(){return t})()}const X=f({__name:"lightStorm",props:{color:{default:O(225)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,n=t,e=new(u[i(230)])(n.color),r=new c({color:e}),o=new s(0,-1,0);let a=0;const h=new(u[i(229)]),p=new(u[i(229)]),d={roughness:n.roughness,straightness:n[i(214)],radius0:n.radius0,radius1:n[i(219)],timeScale:n[i(201)],subrayPeriod:n[i(186)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(205)](t,s,n,.6,.6,.5),a=e[r(176)][r(184)].y,h.subVectors(n.pos1,e[r(176)].sourceOffset);const c=o[r(185)](h);p.copy(o)[r(197)](c),h[r(178)](p);const u=c/a>.5?a/c:1;p.multiplyScalar(u),h[r(226)](p),n[r(238)][r(191)](h,e[r(176)][r(184)])}},m=new z({size:n[i(217)],minHeight:n[i(188)],maxHeight:n[i(194)],maxSlope:.6,maxLightnings:n[i(187)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=m.stormParams;s.size=n[t(217)],s[t(188)]=n[t(188)],s[t(194)]=n[t(194)],r[t(211)].set(n[t(211)]),d[t(227)]=n[t(227)],d[t(214)]=n.straightness,d[t(232)]=n.radius0,d[t(219)]=n[t(219)],d[t(201)]=n[t(201)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{m.update(t)})),(t,s)=>{const n=i;return y(),b(n(179),{object:S(m),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=N;if(typeof t===s(198))return function(t){}[s(193)](s(195))[s(235)](s(223));1!==(""+t/t)[s(202)]||t%20==0?function(){return!0}[s(193)](s(237)+s(213)).call(s(236)):function(){return!1}[s(193)](s(237)+s(213))[s(235)](s(218)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const W=J;!function(t,i){const s=J,n=K();for(;;)try{if(634966===parseInt(s(507))/1+parseInt(s(500))/2+-parseInt(s(488))/3*(-parseInt(s(466))/4)+-parseInt(s(509))/5*(parseInt(s(467))/6)+parseInt(s(506))/7*(-parseInt(s(502))/8)+-parseInt(s(512))/9*(-parseInt(s(480))/10)+-parseInt(s(510))/11*(parseInt(s(477))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(468)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(){const t=["counter","60852qniWKF",'{}.constructor("return this")( )',"warn","40lboQYh","bind","minHeight","return (function() ","toString","粗糙度","exception","#6f6f6f","1621602lRJFFU","stateObject","init","console","radius1","chain","未部半径","__proto__","radius0","table","length","straightness","1054530qqsLjL","时间缩放","2584LNaAzm","timeScale","function *\\( *\\)","gger","4263EReMuO","127209ZUnBsm","constructor","1375240HUQCDV","1199vAZZss","roughness","2282733FIbbVK","端部半径","4tLUbFr","18SXviPI","apply","#92399e","lightningStorm","value","info","log","debu","string"];return(K=function(){return t})()}!function(){B(this,(function(){const t=J,i=new RegExp(t(504)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt(t(490));i.test(n+t(493))&&s.test(n+"input")?tt():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(468)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(t,i){const s=K();return(J=function(t,i){return s[t-=465]})(t,i)}Q(void 0,(function(){const t=J,i=function(){const t=J;let i;try{i=Function(t(483)+t(478)+");")()}catch(s){i=window}return i}(),s=i[t(491)]=i[t(491)]||{},n=[t(473),t(479),t(472),"error",t(486),t(497),"trace"];for(let e=0;e<n[t(498)];e++){const i=Q[t(508)].prototype[t(481)](Q),r=n[e],o=s[r]||i;i[t(495)]=Q.bind(Q),i[t(484)]=o[t(484)].bind(o),s[r]=i}}))();const q=f({__name:W(470),setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:s(487),sectionColor:s(469),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(485),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(465),value:1,min:.1,max:10,step:.01},radius1:{label:s(494),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(501),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[w(X,{minHeight:S(e)[m(471)],maxHeight:S(r)[m(471)],color:S(o)[m(471)],roughness:S(a)[m(471)],straightness:S(c)[m(471)],radius0:S(h)[m(471)],radius1:S(u)[m(471)],timeScale:S(l)[m(471)]},null,8,[m(482),"maxHeight","color",m(511),m(499),m(496),m(492),m(503)]),w(S(P),x({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(S(d))],64)}}});function tt(t){function i(t){const s=J;if(typeof t===s(475))return function(t){}[s(508)]("while (true) {}").apply(s(476));1!==(""+t/t)[s(498)]||t%20==0?function(){return!0}.constructor("debu"+s(505)).call("action"):function(){return!1}[s(508)](s(474)+"gger")[s(468)](s(489)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

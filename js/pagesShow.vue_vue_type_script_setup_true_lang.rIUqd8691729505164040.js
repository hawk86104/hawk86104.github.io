import{_ as t,C as n,cb as o,cc as e,cd as r,ce as i,m as u,bU as c,ak as s,am as a}from"./three.YREzp-_G1729505164040.js";import{c as l,U as f,Y as p}from"./@tresjs.IsKybBdF1729505164040.js";import{C as d}from"./three-custom-shader-material.N2P3il9e1729505164040.js";import"./object-hash.3VgPOje51729505164040.js";import"./@amap.-tZv8Pyx1729505164040.js";import"./glsl-tokenizer.octUzVvo1729505164040.js";import{d as h,b as m,a3 as g,w as y,o as w,E as v,u as _,r as b,a4 as C,e as I,f as x,g as M,L as T,j as S,aj as j,ak as A,F as B,J as O,H as R,m as z}from"./@vue.JNsx1iN61729505164040.js";!function(t,n){const o=k,e=E();for(;;)try{if(322626===parseInt(o(431))/1*(-parseInt(o(437))/2)+-parseInt(o(441))/3*(-parseInt(o(428))/4)+parseInt(o(433))/5+-parseInt(o(443))/6*(parseInt(o(434))/7)+-parseInt(o(423))/8+parseInt(o(426))/9+parseInt(o(425))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=k,n=new RegExp(t(427)),o=new RegExp(t(429),"i"),e=G(t(459));n.test(e+t(448))&&o[t(445)](e+t(430))?G():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(449)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function k(t,n){const o=E();return(k=function(t,n){return o[t-=423]})(t,n)}function E(){const t=['{}.constructor("return this")( )',"1269720UzUKjg","14dFBeyv","while (true) {}","console","304TJeDiG","toString","CITY_UNTRIANGULATED","bind","9AstTxz","gger","1751478iBmZxR","debu","test","log","return (function() ","chain","apply","name","warn","error","counter","ROADS","length","stateObject","trace","call","init","2321096oRggbX","exception","9157110zTpSGb","2367153quvpWl","function *\\( *\\)","4828UYYCQF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","1577DygKUp"];return(E=function(){return t})()}F(void 0,(function(){const t=k,n=function(){const t=k;let n;try{n=Function(t(447)+t(432)+");")()}catch(o){n=window}return n}(),o=n[t(436)]=n[t(436)]||{},e=[t(446),t(451),"info",t(452),t(424),"table",t(457)];for(let r=0;r<e[t(455)];r++){const n=F.constructor.prototype[t(440)](F),i=e[r],u=o[i]||n;n.__proto__=F[t(440)](F),n.toString=u[t(438)][t(440)](u),o[i]=n}}))();const L=async()=>{const t=await l("./plugins/digitalCity/model/shanghai.FBX");let n=null,o=null,e=null;return t.traverse((t=>{const r=k;t[r(450)]===r(439)&&(n=t),"LANDMASS"===t[r(450)]&&(o=t),t[r(450)]===r(454)&&(e=t)})),{model:t,city:n,land:o,roads:e}};function G(t){function n(t){const o=k;if("string"==typeof t)return function(t){}.constructor(o(435)).apply(o(453));1!==(""+t/t)[o(455)]||t%20==0?function(){return!0}.constructor(o(444)+"gger")[o(458)]("action"):function(){return!1}.constructor("debu"+o(442)).apply(o(456)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function H(t,n){const o=Y();return(H=function(t,n){return o[t-=159]})(t,n)}const U=H;!function(t,n){const o=H,e=Y();for(;;)try{if(329401===parseInt(o(187))/1*(-parseInt(o(171))/2)+parseInt(o(214))/3*(-parseInt(o(174))/4)+parseInt(o(218))/5*(-parseInt(o(188))/6)+-parseInt(o(210))/7+parseInt(o(190))/8+-parseInt(o(225))/9+-parseInt(o(180))/10*(-parseInt(o(206))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[H(194)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){P(this,(function(){const t=H,n=new RegExp(t(162)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=N(t(200));n.test(e+t(230))&&o[t(216)](e+t(228))?N():e("0")}))()}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[H(194)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();W(void 0,(function(){const t=H;let n;try{n=Function(t(211)+t(164)+");")()}catch(r){n=window}const o=n[t(201)]=n[t(201)]||{},e=[t(178),t(203),t(183),"error",t(204),"table",t(195)];for(let i=0;i<e.length;i++){const n=W[t(173)][t(177)][t(170)](W),r=e[i],u=o[r]||n;n[t(229)]=W[t(170)](W),n.toString=u[t(215)][t(170)](u),o[r]=n}}))();const Z=[U(167)];function Y(){const t=["input","__proto__","chain","debu","boundingBox","forEach","function *\\( *\\)","value",'{}.constructor("return this")( )',"landColor","#ffffff","object","while (true) {}","color","bind","14bIjIqC","setStyle","constructor","502748tMGtSw","buildingsModelCustomShader","string","prototype","log","topColor","79940keMxDV","#112233","stateObject","info","counter","gradient","uGradient","47711PPxKmY","1827402EnYrhf","dispose","1520904acaTXe","side","material","uOpacity","apply","trace","call","city","gger","__csm","init","console","land","warn","exception","isArray","2233sVJrFH","clone","primitive","Color","1922529HFObzh","return (function() ","uniforms","length","3JdyCPK","toString","test","model","10enAYzL","opacity","bulidingsColor","DoubleSide","#e523ff","#ffff00","uColor","1260441SvzETF","renderOrder","computeBoundingBox"];return(Y=function(){return t})()}const $=h({__name:U(175),props:{model:{},bulidingsColor:{default:U(222)},landColor:{default:U(181)},topColor:{default:U(223)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=U,r=o,i=m(0),u=r[e(217)][e(197)];u[e(226)]=1001;const c=r[e(217)][e(202)];(()=>{const o=e,{geometry:c}=u;c[o(227)](),c.computeBoundingSphere();const{max:s,min:a}=c[o(160)];if(u.material[o(199)])return;const l=new d({baseMaterial:u[o(192)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:s},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(209)])(r.bulidingsColor)},uOpacity:{value:r[o(219)]},uLightColor:{value:new(t[o(209)])(o(166))},uTopColor:{value:new n(r[o(179)])},uTime:i,uGradient:{value:r[o(185)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[o(221)]});u.material[o(189)](),u[o(192)]=l})();const{onLoop:s}=f();s((({delta:t})=>{i.value+=t})),g((()=>{const n=e;r[n(220)]&&u[n(192)][n(212)][n(224)][n(163)].setStyle(r[n(220)]),r[n(165)]&&((n,o)=>{const i=e;let u;"cu"===n||n===i(202)&&(u=Array[i(205)](c[i(192)])?c[i(192)]:[c[i(192)]],u[i(161)]((n=>{const e=i;n[o][e(172)](r[e(165)]),n[e(191)]=t[e(221)]})))})("land",n(169)),r.opacity&&(u[n(192)][n(212)][n(193)][n(163)]=r[n(219)])})),y(r,((t,n)=>{const o=e;u.material[o(212)][o(186)][o(163)]=t[o(185)]}));const a=r[e(217)].model[e(207)]();return(t,n)=>{const o=e;return w(),v(o(208),{object:_(a)},null,8,Z)}}});function N(t){function n(t){const o=H;if(typeof t===o(176))return function(t){}[o(173)](o(168))[o(194)](o(184));1!==(""+t/t)[o(213)]||t%20==0?function(){return!0}[o(173)](o(159)+o(198))[o(196)]("action"):function(){return!1}[o(173)](o(159)+o(198))[o(194)](o(182)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const K=tt;!function(t,n){const o=tt,e=nt();for(;;)try{if(723342===parseInt(o(352))/1+-parseInt(o(336))/2+parseInt(o(353))/3+parseInt(o(324))/4+parseInt(o(371))/5+parseInt(o(366))/6*(parseInt(o(374))/7)+-parseInt(o(330))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(354)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){V(this,(function(){const t=tt,n=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Q("init");n[t(350)](e+t(326))&&o[t(350)](e+t(347))?Q():e("0")}))()}();const J=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(354)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();J(void 0,(function(){const t=tt;let n;try{n=Function(t(323)+t(321)+");")()}catch(r){n=window}const o=n.console=n.console||{},e=["log",t(319),t(369),"error",t(318),"table",t(372)];for(let i=0;i<e[t(360)];i++){const n=J[t(348)][t(356)][t(335)](J),r=e[i],u=o[r]||n;n[t(331)]=J[t(335)](J),n.toString=u.toString[t(335)](u),o[r]=n}}))();const X=[K(332)],q=h({__name:K(357),props:{builds:{},width:{default:1},color:{default:K(363)},opacity:{default:1},style:{default:K(338)}},setup(t){const c=K,s=t;let a=null,l=null;if(s[c(368)]===c(338)){const t=new o(s[c(339)][c(359)]);let n=(new e)[c(334)](t),u=new r({color:s[c(328)],linewidth:s[c(325)],opacity:s[c(342)],transparent:!0,depthWrite:!0,depthTest:!0});u[c(346)][c(358)](window[c(344)],window[c(333)]),a=new i(n,u),a[c(355)](s[c(339)][c(322)][c(367)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(s[c(328)])},uOpacity:{value:s[c(342)]}},vertexShader:c(349),fragmentShader:c(365)};const t=new o(s[c(339)].geometry),e=new u(l);a=new LineSegments(t,e),a.applyMatrix4(s[c(339)][c(322)][c(367)]()),a[c(317)][c(341)]=s[c(325)],a[c(362)]=1e3}return g((()=>{const t=c;s[t(368)]===t(327)&&(s[t(328)]&&(l[t(361)][t(329)].value=new n(s[t(328)])),s.opacity&&(l[t(361)][t(337)][t(373)]=s[t(342)])),"Wireframe"===s[t(368)]&&(s.color&&(a[t(317)].color=new n(s.color)),s[t(342)]&&(a[t(317)].opacity=s[t(342)])),s[t(325)]&&(a.material[t(341)]=s.width)})),(t,n)=>{const o=c;return w(),v(o(351),{object:_(a)},null,8,X)}}});function Q(t){function n(t){const o=tt;if("string"==typeof t)return function(t){}[o(348)](o(320))[o(354)](o(345));1!==(""+t/t)[o(360)]||t%20==0?function(){return!0}[o(348)](o(364)+o(340))[o(370)]("action"):function(){return!1}[o(348)]("debu"+o(340))[o(354)](o(343)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function tt(t,n){const o=nt();return(tt=function(t,n){return o[t-=317]})(t,n)}function nt(){const t=["test","primitive","628996UuaxWO","3501210DFsgYS","apply","applyMatrix4","prototype","buildingsLines","set","geometry","length","uniforms","renderOrder","#FFF","debu"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","8868DCTDEK","clone","style","info","call","4276190IlUmUy","trace","value","4172ugxXIU","material","exception","warn","while (true) {}",'{}.constructor("return this")( )',"matrix","return (function() ","4157236bszidM","width","chain","Shader","color","uColor","19876088Rnkaju","__proto__","object","innerHeight","fromEdgesGeometry","bind","2727296rDSgLV","uOpacity","Wireframe","builds","gger","linewidth","opacity","stateObject","innerWidth","counter","resolution","input","constructor","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      "];return(nt=function(){return t})()}const ot=at;!function(t,n){const o=at,e=ft();for(;;)try{if(561606===-parseInt(o(363))/1+parseInt(o(356))/2+-parseInt(o(332))/3+-parseInt(o(336))/4*(parseInt(o(369))/5)+-parseInt(o(337))/6*(-parseInt(o(364))/7)+-parseInt(o(339))/8*(parseInt(o(370))/9)+parseInt(o(352))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[at(343)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){et(this,(function(){const t=at,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(344),"i"),e=pt(t(372));n[t(333)](e+"chain")&&o[t(333)](e+t(355))?pt():e("0")}))()}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[at(343)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();rt(void 0,(function(){const t=at;let n;try{n=Function("return (function() "+t(346)+");")()}catch(r){n=window}const o=n.console=n[t(368)]||{},e=[t(371),t(377),t(374),t(349),"exception","table",t(354)];for(let i=0;i<e[t(335)];i++){const n=rt[t(357)][t(376)][t(341)](rt),r=e[i],u=o[r]||n;n.__proto__=rt[t(341)](rt),n[t(365)]=u[t(365)][t(341)](u),o[r]=n}}))();const it=T(ot(373),{color:ot(351)},null,-1),ut=T("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1),ct={key:1,args:[1e3],position:[0,19,0]},st={key:2,args:[6e3,100],position:[0,19,0]};function at(t,n){const o=ft();return(at=function(t,n){return o[t-=330]})(t,n)}const lt=h({__name:ot(362),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let o,e;const r=t,i=b({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:s,toneMapping:a,disableRender:r[n(342)]}),u=b({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r.showBuildings&&([o,e]=C((()=>L())),o=await o,e(),l=o);const f=m(),d=m();return(t,o)=>{const e=n,c=I(e(331));return w(),x(c,z({ref_key:"tcRef",ref:d},i,{"window-size":""}),{default:M((()=>[T(e(353),{ref_key:e(345),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),S(_(p),j(A(u)),null,16),it,ut,r.showBuildings&&_(l)?(w(),v(B,{key:0},[S($,{model:_(l)},null,8,["model"]),S(q,{builds:_(l)[e(347)],color:e(378)},null,8,[e(350)])],64)):O("",!0),R(t[e(361)],e(348)),r[e(338)]?(w(),v(e(375),ct)):O("",!0),r.showGridHelper?(w(),v(e(340),st)):O("",!0)])),_:3},16)}}});function ft(){const t=["1877913oAwYGH","log","init","TresAmbientLight","info","TresAxesHelper","prototype","warn","#000","action","TresCanvas","900069DYovUu","test","while (true) {}","length","16756VtABAB","2057526wTNtBh","showAxesHelper","40NdFBek","TresGridHelper","bind","disableRender","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","perspectiveCameraRef",'{}.constructor("return this")( )',"city","ability","error","builds","#ffffff","11704880CAZwNN","TresPerspectiveCamera","trace","input","1366208qwZjjW","constructor","stateObject","counter","call","$slots","pagesShow","441826gEcMfI","14WCspjM","toString","debu","gger","console","230kMhdaZ"];return(ft=function(){return t})()}function pt(t){function n(t){const o=at;if("string"==typeof t)return function(t){}[o(357)](o(334))[o(343)](o(359));1!==(""+t/t).length||t%20==0?function(){return!0}[o(357)](o(366)+o(367))[o(360)](o(330)):function(){return!1}[o(357)](o(366)+o(367))[o(343)](o(358)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{$ as _,q as a,lt as b,L as l};

import{B as e,R as t,P as r}from"./three.quarks.CwTtG7dG1763540743861.js";import{_ as a}from"./@tresjs.BCHtwiaC1763540743861.js";import{d as n,w as o,H as s,o as i,J as l,u as d}from"./@vue.Co_gxueH1763540743861.js";import{cU as m,x as p,b8 as f,A as w,l as u}from"./three.rXKzP9fQ1763540743861.js";import{h as c,C as h,a as v,I as b,j as S,i as g}from"./quarks.core.D-mmToEd1763540743861.js";const j=["object"],y=["object"],x="TvT.js三维可视化项目快速落地の开源框架-数字地图",z=n({__name:"particlesTexture",props:{color:{default:"#00ffff"},varyingColor:{type:Boolean,default:!0},fontSpeed:{default:2},number:{default:20},size:{default:30},pSpeed:{default:10}},setup(n){const z=n,B=new e;var T=document.createElement("canvas");T.width=200,T.height=200;let C=27*Math.random();var M=T.getContext("2d"),A=new m(T);const _={duration:10,looping:!0,startLife:new b(.1,5),startSpeed:new h(z.pSpeed),startSize:new h(z.size),startColor:new v(new w(1,1,1,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new h(z.number),emissionBursts:[{time:1,count:new h(1),cycle:1,interval:1,probability:1}],shape:new c({width:200,height:200,column:200,row:200}),material:new p({map:A,blending:f,transparent:!0}),renderOrder:9999,renderMode:t.BillBoard},O=new r(_),P=new S(new w(1,.3882312,.125,1),new w(0,.826827,.3014706,1)),R=()=>{const e=new u(z.color),t=new w(e.r,e.g,e.b,1);return new S(t,t)};let k=R();O.addBehavior(new g(z.varyingColor?P:k)),O.emitter.name="muzzle1",B.addSystem(O),B.rotateX(-Math.PI/2),o(()=>[z.varyingColor,z.color],([e,t])=>{e||(k=R()),O.behaviors[0]=new g(e?P:k)}),o(()=>[z.number,z.size,z.pSpeed],([e,t,r])=>{O.startSize=new h(t),O.emissionOverTime=new h(e),O.startSpeed=new h(r)});const{onBeforeRender:q}=a();return q(({elapsed:e})=>{Math.round(100*e)%(11-z.fontSpeed)==0&&(()=>{if(M){M.fillStyle="rgba(0, 0, 0, 0.2)",M.fillRect(0,0,T.width,T.height),M.fillStyle="#ffffff",M.font="10px Arial",M.textAlign="center";const e=x.charAt(Math.floor(27*Math.random()));M.fillText(e,T.width/2+5,10*C),C<1&&(C=13.5),C--,A.needsUpdate=!0}})(),B.update(.02)}),(e,t)=>(i(),s("TresGroup",null,[l("primitive",{object:d(O).emitter},null,8,j),l("primitive",{object:d(B)},null,8,y)]))}});export{z as _};

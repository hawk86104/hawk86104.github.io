import{_ as t,C as n,cd as o,ce as e,cf as r,cg as i,m as u,bU as c,ak as s,am as a}from"./three.5octV-9b1728467445434.js";import{c as l,U as f,Y as p}from"./@tresjs.ED4ePb8T1728467445434.js";import{C as d}from"./three-custom-shader-material.uHGW21Ih1728467445434.js";import"./object-hash.o8Ug78mP1728467445434.js";import"./@amap.lDXqmBX01728467445434.js";import"./glsl-tokenizer.yxFRgXmJ1728467445434.js";import{d as h,b as m,a3 as y,w as g,o as w,E as v,u as b,r as _,a4 as I,e as C,f as x,g as M,L as S,j,aj as O,ak as T,F as B,J as k,H as R,m as A}from"./@vue.JNsx1iN61728467445434.js";!function(t,n){const o=z,e=P();for(;;)try{if(877742===parseInt(o(475))/1*(-parseInt(o(483))/2)+parseInt(o(479))/3*(-parseInt(o(482))/4)+-parseInt(o(486))/5+parseInt(o(468))/6*(-parseInt(o(484))/7)+-parseInt(o(473))/8+parseInt(o(452))/9+-parseInt(o(487))/10*(-parseInt(o(453))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(467)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function z(t,n){const o=P();return(z=function(t,n){return o[t-=449]})(t,n)}!function(){F(this,(function(){const t=z,n=new RegExp(t(464)),o=new RegExp(t(457),"i"),e=E(t(466));n[t(458)](e+t(463))&&o.test(e+t(450))?E():e("0")}))()}();const L=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();L(void 0,(function(){const t=z;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(460)]=n[t(460)]||{},e=[t(456),t(476),t(461),t(470),"exception",t(471),t(454)];for(let i=0;i<e.length;i++){const n=L.constructor[t(465)].bind(L),r=e[i],u=o[r]||n;n.__proto__=L.bind(L),n.toString=u[t(480)][t(481)](u),o[r]=n}}))();const D=async()=>{const t=z,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(478)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n.name&&(o=n),n[i(451)]===i(449)&&(e=n),n[i(451)]===i(477)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function E(t){function n(t){const o=z;if(typeof t===o(474))return function(t){}.constructor(o(469))[o(467)]("counter");1!==(""+t/t)[o(462)]||t%20==0?function(){return!0}[o(488)](o(459)+o(455)).call(o(485)):function(){return!1}.constructor(o(459)+o(455))[o(467)](o(472)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function P(){const t=["chain","function *\\( *\\)","prototype","init","apply","176706ECkqjF","while (true) {}","error","table","stateObject","1397296OQUOSo","string","1vaRmcs","warn","ROADS","traverse","138WRDyvv","toString","bind","65584yAkoKf","1850062zMvBfR","35IUeRXC","action","724770nVpCuU","40SefGBz","constructor","LANDMASS","input","name","15314688QahOhV","3636127myMJTL","trace","gger","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","debu","console","info","length"];return(P=function(){return t})()}const H=J;!function(t,n){const o=J,e=U();for(;;)try{if(427911===-parseInt(o(220))/1+parseInt(o(194))/2+-parseInt(o(210))/3*(-parseInt(o(227))/4)+-parseInt(o(234))/5*(-parseInt(o(229))/6)+parseInt(o(180))/7*(parseInt(o(179))/8)+parseInt(o(215))/9*(-parseInt(o(241))/10)+-parseInt(o(198))/11*(parseInt(o(207))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const G=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[J(200)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){G(this,(function(){const t=J,n=new RegExp(t(225)),o=new RegExp(t(181),"i"),e=Q("init");n[t(216)](e+"chain")&&o[t(216)](e+"input")?Q():e("0")}))()}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[J(200)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();W(void 0,(function(){const t=J;let n;try{n=Function("return (function() "+t(182)+");")()}catch(r){n=window}const o=n.console=n[t(203)]||{},e=[t(223),t(219),"info",t(186),t(238),"table",t(196)];for(let i=0;i<e[t(217)];i++){const n=W[t(195)][t(228)].bind(W),r=e[i],u=o[r]||n;n[t(213)]=W[t(189)](W),n[t(237)]=u[t(237)][t(189)](u),o[r]=n}}))();const Z=[H(235)];function J(t,n){const o=U();return(J=function(t,n){return o[t-=179]})(t,n)}const $=h({__name:H(183),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:H(192)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=H,r=o,i=m(0),u=r[e(193)][e(191)];u.renderOrder=1001;const c=r.model[e(214)];(()=>{const o=e,{geometry:c}=u;c[o(202)](),c[o(185)]();const{max:s,min:a}=c[o(233)];if(u[o(245)][o(208)])return;const l=new d({baseMaterial:u[o(245)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:s},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(226)])(r[o(222)])},uOpacity:{value:r[o(232)]},uLightColor:{value:new n(o(218))},uTopColor:{value:new(t[o(226)])(r[o(199)])},uTime:i,uGradient:{value:r[o(201)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[o(242)]});u[o(245)].dispose(),u.material=l})();const{onLoop:s}=f();s((({delta:t})=>{i[e(240)]+=t})),y((()=>{const n=e;r[n(222)]&&u[n(245)].uniforms[n(244)][n(240)][n(209)](r.bulidingsColor),r[n(206)]&&((n,o)=>{const i=e;let u;"cu"===n||"land"===n&&(u=Array[i(197)](c[i(245)])?c[i(245)]:[c.material],u[i(187)]((n=>{const e=i;n[o].setStyle(r[e(206)]),n[e(236)]=t[e(242)]})))})(n(214),n(243)),r[n(232)]&&(u.material[n(205)][n(204)][n(240)]=r[n(232)])})),g(r,((t,n)=>{const o=e;u.material[o(205)][o(230)][o(240)]=t.gradient}));const a=r[e(193)][e(193)][e(190)]();return(t,n)=>{const o=e;return w(),v(o(212),{object:b(a)},null,8,Z)}}});function Q(t){function n(t){const o=J;if("string"==typeof t)return function(t){}.constructor(o(231))[o(200)](o(239));1!==(""+t/t).length||t%20==0?function(){return!0}[o(195)](o(184)+o(224))[o(188)](o(221)):function(){return!1}[o(195)]("debu"+o(224)).apply(o(211)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function U(){const t=["apply","gradient","computeBoundingBox","console","uOpacity","uniforms","landColor","252IfSQDj","__csm","setStyle","363eUrBKh","stateObject","primitive","__proto__","land","71649OOIbPP","test","length","#ffffff","warn","234975pjhQTF","action","bulidingsColor","log","gger","function *\\( *\\)","Color","328HkOgEo","prototype","69534odwpQs","uGradient","while (true) {}","opacity","boundingBox","190SOyBVh","object","side","toString","exception","counter","value","130uSgJlk","DoubleSide","color","uColor","material","320056wawgDZ","42bBkiOU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"buildingsModelCustomShader","debu","computeBoundingSphere","error","forEach","call","bind","clone","city","#112233","model","931166jYmWQA","constructor","trace","isArray","204050uiBKkd","topColor"];return(U=function(){return t})()}const Y=q;!function(t,n){const o=q,e=X();for(;;)try{if(730060===parseInt(o(302))/1+parseInt(o(268))/2*(-parseInt(o(315))/3)+-parseInt(o(311))/4+-parseInt(o(277))/5*(parseInt(o(273))/6)+-parseInt(o(274))/7*(-parseInt(o(323))/8)+-parseInt(o(294))/9+parseInt(o(322))/10*(parseInt(o(307))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[q(310)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){V(this,(function(){const t=q,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(305),"i"),e=nt("init");n[t(303)](e+t(313))&&o[t(303)](e+t(299))?nt():e("0")}))()}();const K=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[q(310)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();K(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function("return (function() "+t(271)+");")()}catch(o){n=window}return n}(),o=n[t(272)]=n[t(272)]||{},e=["log",t(269),t(293),t(288),t(280),"table",t(297)];for(let r=0;r<e[t(289)];r++){const n=K[t(291)][t(276)].bind(K),i=e[r],u=o[i]||n;n[t(279)]=K[t(306)](K),n.toString=u[t(308)][t(306)](u),o[i]=n}}))();const N=[Y(290)];function q(t,n){const o=X();return(q=function(t,n){return o[t-=267]})(t,n)}function X(){const t=["1288820GdhcYN","innerHeight","chain","renderOrder","3FXKPNj","applyMatrix4","geometry","style","uOpacity","fromEdgesGeometry","opacity","50JPplnT","8EYahMd","call","1570264VikmiH","warn","counter",'{}.constructor("return this")( )',"console","4272GlaJJj","5878166gCFdsW","stateObject","prototype","5960kFiVYQ","linewidth","__proto__","exception","uniforms","gger","set","color","clone"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","builds","error","length","object","constructor","uColor","info","9239877aIJLiu","value","debu","trace","matrix","input","material","primitive","1064711gcuqKG","test","Wireframe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","3978271HPIkzm","toString","width","apply"];return(X=function(){return t})()}const tt=h({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const c=Y,s=t;let a=null,l=null;if(s[c(318)]===c(304)){const t=new o(s[c(287)][c(317)]);let n=(new e)[c(320)](t),u=new r({color:s[c(284)],linewidth:s[c(309)],opacity:s[c(321)],transparent:!0,depthWrite:!0,depthTest:!0});u.resolution[c(283)](window.innerWidth,window[c(312)]),a=new i(n,u),a[c(316)](s.builds[c(298)][c(285)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(s.color)},uOpacity:{value:s[c(321)]}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:c(286)};const t=new o(s[c(287)].geometry),e=new u(l);a=new LineSegments(t,e),a[c(316)](s[c(287)][c(298)][c(285)]()),a[c(300)][c(278)]=s[c(309)],a[c(314)]=1e3}return y((()=>{const t=c;"Shader"===s[t(318)]&&(s[t(284)]&&(l[t(281)][t(292)][t(295)]=new n(s.color)),s[t(321)]&&(l[t(281)][t(319)][t(295)]=s.opacity)),s[t(318)]===t(304)&&(s[t(284)]&&(a.material[t(284)]=new n(s[t(284)])),s[t(321)]&&(a.material[t(321)]=s[t(321)])),s[t(309)]&&(a[t(300)].linewidth=s.width)})),(t,n)=>{const o=c;return w(),v(o(301),{object:b(a)},null,8,N)}}});function nt(t){function n(t){const o=q;if("string"==typeof t)return function(t){}[o(291)]("while (true) {}")[o(310)](o(270));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+o(282))[o(267)]("action"):function(){return!1}[o(291)](o(296)+"gger")[o(310)](o(275)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function ot(){const t=["140613bJjMpk","#000","debu","showGridHelper","init","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","$slots","chain","apply","toString","#000000","perspectiveCameraRef","prototype","constructor","disableRender","input","TresPerspectiveCamera","833crcmkR","19017QqdYRO","300qLBudw","showAxesHelper","trace","call","builds","9HDZjIQ","length","info",'{}.constructor("return this")( )',"3uFYzJZ","exception","TresGridHelper","70326hFbPZy","error","model","195076JFDhEb","860obMTdz","log","tcRef","588kyWLCb","warn","stateObject","return (function() ","TresAmbientLight","console","2162616SzBvDn","counter","showBuildings","ability","string","TresAxesHelper","test","127500gyvbMB","TresCanvas","bind","while (true) {}"];return(ot=function(){return t})()}const et=rt;function rt(t,n){const o=ot();return(rt=function(t,n){return o[t-=117]})(t,n)}!function(t,n){const o=rt,e=ot();for(;;)try{if(153054===-parseInt(o(146))/1*(-parseInt(o(149))/2)+parseInt(o(142))/3*(-parseInt(o(152))/4)+parseInt(o(169))/5+-parseInt(o(137))/6*(parseInt(o(135))/7)+-parseInt(o(162))/8+parseInt(o(136))/9*(-parseInt(o(153))/10)+parseInt(o(117))/11*(parseInt(o(156))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[rt(126)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){it(this,(function(){const t=rt,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(123),"i"),e=pt(t(121));n[t(168)](e+t(125))&&o[t(168)](e+t(133))?pt():e("0")}))()}();const ut=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();ut(void 0,(function(){const t=rt,n=function(){const t=rt;let n;try{n=Function(t(159)+t(145)+");")()}catch(o){n=window}return n}(),o=n[t(161)]=n.console||{},e=[t(154),t(157),t(144),t(150),t(147),"table",t(139)];for(let r=0;r<e[t(143)];r++){const n=ut[t(131)][t(130)][t(171)](ut),i=e[r],u=o[i]||n;n.__proto__=ut.bind(ut),n[t(127)]=u.toString[t(171)](u),o[i]=n}}))();const ct=S(et(160),{color:"#ffffff"},null,-1),st=S("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1),at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=h({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=_({clearColor:n(128),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:s,toneMapping:a,disableRender:r[n(132)]}),u=_({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r[n(164)]&&([o,e]=I((()=>D())),o=await o,e(),l=o);const f=m(),d=m();return(t,o)=>{const e=n,c=C(e(170));return w(),x(c,A({ref_key:e(155),ref:d},i,{"window-size":""}),{default:M((()=>[S(e(134),{ref_key:e(129),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(b(p),O(T(u)),null,16),ct,st,r[e(164)]&&b(l)?(w(),v(B,{key:0},[j($,{model:b(l)},null,8,[e(151)]),j(tt,{builds:b(l).city,color:e(118)},null,8,[e(141)])],64)):k("",!0),R(t[e(124)],e(165)),r[e(138)]?(w(),v(e(167),at)):k("",!0),r[e(120)]?(w(),v(e(148),lt)):k("",!0)])),_:3},16)}}});function pt(t){function n(t){const o=rt;if(typeof t===o(166))return function(t){}[o(131)](o(172)).apply(o(163));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(o(119)+o(122))[o(140)]("action"):function(){return!1}[o(131)](o(119)+o(122)).apply(o(158)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{$ as _,tt as a,ft as b,D as l};

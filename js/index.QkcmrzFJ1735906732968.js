var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bb as _,C as y,a0 as x,W as b,n as I,o as S,ca as w,cb as M,K as R,f as A,V as E,g as T,_ as D,m as z,ba as P,k as O,bt as C,d as F,aj as B,B as k,a as j,aP as U,e as N,M as H,as as L,a9 as Z,h as G}from"./three.VhLXWX0H1735906732968.js";import{m as W,D as V,e as $}from"./@tresjs.XlmHwCPa1735906732968.js";import{R as K}from"./three-stdlib.KBM4TZ_N1735906732968.js";import{v as Y,b as q,w as X,a as J,u as Q,d as nn,U as tn,a4 as en,a2 as rn,o as on,D as an,G as cn,I as sn,a8 as un,a1 as ln,q as fn,f as pn,J as dn,a9 as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a7 as xn,m as bn}from"./@vue.yG49nQHr1735906732968.js";import{M as In,a as Sn,C as wn}from"./@pmndrs.jP0GrZPE1735906732968.js";import{h as Mn}from"./object-hash.YsnKaXvB1735906732968.js";var Rn=En;!function(n,t){for(var e=En,r=Dn();;)try{if(367980===-parseInt(e(389))/1+-parseInt(e(373))/2+parseInt(e(391))/3*(-parseInt(e(385))/4)+-parseInt(e(374))/5+parseInt(e(360))/6+parseInt(e(386))/7*(-parseInt(e(380))/8)+parseInt(e(368))/9*(parseInt(e(357))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[En(369)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function En(n,t){var e=Dn();return(En=function(n,t){return e[n-=354]})(n,t)}!function(){An(this,(function(){var n=En,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(382),"i"),r=On("init");t[n(363)](r+n(387))&&e[n(363)](r+n(372))?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[En(369)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(){var n=["8xAbSfx","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","length","912204dzxNbD","3718708HrBTDZ","chain","debu","496074dLNEoW","dispose","9ANhLUq","material","virtualScene","destructor","while (true) {}","counter","remove","22242790cDRbiR","call","error","1663026kQaWan","action","console","test","add","prototype","warn","table","9bWluVl","apply","string","map","input","674456GleTiD","423855lDmJUo","toString","constructor","bind","geometry","gger"];return(Dn=function(){return n})()}Tn(void 0,(function(){var n,t=En;try{n=Function(t(381)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(362)]=n[t(362)]||{},r=[t(383),t(366),"info",t(359),"exception",t(367),"trace"],o=0;o<r.length;o++){var i=Tn[t(376)][t(365)][t(377)](Tn),a=r[o],c=e[a]||i;i.__proto__=Tn[t(377)](Tn),i[t(375)]=c.toString[t(377)](c),e[a]=i}}))();class zn extends s{constructor(){var n=En;super(),this[n(393)]=null,this[n(393)]=new u}[Rn(364)](...n){var t=Rn;return this[t(393)][t(364)](...n),this}[Rn(394)](){var n=Rn;this[n(393)].traverse((t=>{var e=n;t instanceof l&&(t[e(378)].dispose(),t[e(392)][e(390)](),t.material[e(371)]&&t.material[e(371)].dispose(),this[e(393)][e(356)](t))})),this[n(393)]=null}}const Pn=zn;function On(n){function t(n){var e=En;if(typeof n===e(370))return function(n){}[e(376)](e(354)).apply(e(355));1!==(""+n/n)[e(384)]||n%20==0?function(){return!0}[e(376)](e(388)+e(379))[e(358)](e(361)):function(){return!1}.constructor(e(388)+e(379))[e(369)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=Bn;!function(n,t){const e=Bn,r=Nn();for(;;)try{if(299541===-parseInt(e(166))/1+-parseInt(e(185))/2+-parseInt(e(165))/3*(-parseInt(e(146))/4)+-parseInt(e(142))/5+-parseInt(e(177))/6*(parseInt(e(186))/7)+parseInt(e(144))/8+parseInt(e(167))/9*(parseInt(e(151))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(171)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(n,t){const e=Nn();return(Bn=function(n,t){return e[n-=142]})(n,t)}!function(){Fn(this,(function(){const n=Bn,t=new RegExp(n(178)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Un(n(173));t.test(r+"chain")&&e[n(163)](r+"input")?Un():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(171)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=Bn;let t;try{t=Function("return (function() "+n(162)+");")()}catch(o){t=window}const e=t[n(157)]=t[n(157)]||{},r=[n(158),n(153),n(147),n(159),n(170),n(184),n(149)];for(let i=0;i<r.length;i++){const t=kn[n(168)][n(164)][n(180)](kn),o=r[i],a=e[o]||t;t[n(172)]=kn[n(180)](kn),t[n(145)]=a[n(145)][n(180)](a),e[o]=t}}))();const jn={sunset:Cn(161),studio:Cn(150),city:Cn(152),umbrellas:Cn(182),night:Cn(175),forest:Cn(181),snow:Cn(174),dawn:Cn(179),hangar:"indoor/small_hangar_01_1k.hdr",urban:Cn(154),modern:Cn(176),shangai:Cn(143)};function Un(n){function t(n){const e=Bn;if(typeof n===e(183))return function(n){}[e(168)](e(160))[e(171)](e(156));1!==(""+n/n).length||n%20==0?function(){return!0}[e(168)](e(148)+"gger")[e(169)](e(187)):function(){return!1}.constructor(e(148)+"gger")[e(171)](e(155)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nn(){const n=["venice/venice_sunset_1k.hdr",'{}.constructor("return this")( )',"test","prototype","228795eLUTqK","86056yrMGFb","801biYsMP","constructor","call","exception","apply","__proto__","init","outdoor/snowy_forest_path_01_1k.hdr","outdoor/satara_night_1k.hdr","city/modern_buildings_2_1k.hdr","308514aPOYog","function *\\( *\\)","kiara/kiara_1_dawn_1k.hdr","bind","outood/mossy_forest_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","string","table","800402FmiuGH","49XTxvAE","action","1606115fHbHTv","city/shanghai_bund_1k.hdr","1848408AZjkFx","toString","20taJhXT","info","debu","trace","studio/poly_haven_studio_1k.hdr","96020nyUZgP","city/canary_wharf_1k.hdr","warn","indoor/abandoned_games_room_02_1k.hdr","stateObject","counter","console","log","error","while (true) {}"];return(Nn=function(){return n})()}const Hn=Gn;!function(n,t){const e=Gn,r=Vn();for(;;)try{if(515638===-parseInt(e(423))/1*(-parseInt(e(434))/2)+parseInt(e(407))/3+-parseInt(e(409))/4*(-parseInt(e(429))/5)+parseInt(e(415))/6+-parseInt(e(432))/7*(parseInt(e(454))/8)+-parseInt(e(411))/9*(parseInt(e(450))/10)+-parseInt(e(446))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(444)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ln(this,(function(){const n=Gn,t=new RegExp(n(439)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n(n(431));t[n(449)](r+n(436))&&e[n(449)](r+n(451))?$n():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Vn();return(Gn=function(n,t){return e[n-=405]})(n,t)}Zn(void 0,(function(){const n=Gn;let t;try{t=Function(n(447)+n(418)+");")()}catch(o){t=window}const e=t[n(428)]=t[n(428)]||{},r=["log","warn",n(412),n(417),n(435),n(452),n(443)];for(let i=0;i<r[n(437)];i++){const t=Zn[n(448)][n(442)][n(426)](Zn),o=r[i],a=e[o]||t;t[n(419)]=Zn[n(426)](Zn),t[n(424)]=a[n(424)][n(426)](a),e[o]=t}}))();const Wn=Hn(441);function Vn(){const n=["apply","join","13318107INzmzf","return (function() ","constructor","test","4312230clHVgK","input","table","action","109184UqfOXs","isArray","texture","Preset must be one of: ","1987293WTBahV","keys","140hSRQsQ","debu","18lQlxFC","info","stateObject","mapping","2482560pRGLAq","Failed to load environment map: ","error",'{}.constructor("return this")( )',"__proto__","background","gger","call","9NdFCtY","toString","backgroundBlurriness","bind","counter","console","111685wKPVqx","string","init","112XXYVzx","setPath","210934YgVjUC","exception","chain","length","value","function *\\( *\\)","environment","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","prototype","trace"];return(Vn=function(){return n})()}function $n(n){function t(n){const e=Gn;if(typeof n===e(430))return function(n){}[e(448)]("while (true) {}").apply(e(427));1!==(""+n/n).length||n%20==0?function(){return!0}[e(448)](e(410)+e(421))[e(422)](e(453)):function(){return!1}[e(448)]("debu"+e(421))[e(444)](e(413)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Xn,r=qn();for(;;)try{if(775945===parseInt(e(420))/1*(-parseInt(e(386))/2)+parseInt(e(401))/3+-parseInt(e(432))/4*(-parseInt(e(406))/5)+-parseInt(e(396))/6*(parseInt(e(388))/7)+-parseInt(e(382))/8*(-parseInt(e(427))/9)+-parseInt(e(410))/10+parseInt(e(426))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Xn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Qn("init");t[n(415)](r+n(408))&&e[n(415)](r+n(431))?Qn():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(395)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qn(){const n=["destructor","constructor","4418WfsJnd","near","28973doDOkC","generateMipmaps","default","console","call","return (function() ","log","apply","1506KeyPzV","info","prototype","$slots","magFilter","2870151YJdKcL","TresEnvSence","string","debu","symbol","85xTffhe","action","chain","background","14242390shqmjt","bind","__proto__","type","texture","test","useDefaultScene","update","table","minFilter","500ekybFk","while (true) {}","environment","resolution","value","error","20147105phFkUm","8917191yfrdjq","dispose","length","frames","input","132824vHKCjo","far","isArray","toString","8zamZRT","counter"];return(qn=function(){return n})()}function Xn(n,t){const e=qn();return(Xn=function(n,t){return e[n-=381]})(n,t)}Yn(void 0,(function(){const n=Xn;let t;try{t=Function(n(393)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(391)]=t[n(391)]||{},r=[n(394),"warn",n(397),n(425),"exception",n(418),"trace"];for(let i=0;i<r.length;i++){const t=Yn[n(385)][n(398)][n(411)](Yn),o=r[i],a=e[o]||t;t[n(412)]=Yn[n(411)](Yn),t[n(381)]=a[n(381)][n(411)](a),e[o]=t}}))();const Jn=nn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=q(null),x=null;const b=q(null);tn((()=>{var n,t;const e=Xn;null==(n=b[e(424)])||n[e(384)](),null==(t=y[e(424)])||t[e(428)]()}));const{onBeforeLoop:I}=$();let S=1;I((()=>{const n=Xn;x&&b.value&&y[n(424)]&&(i[n(430)]===1/0||S<i.frames)&&(i[n(416)]?x[n(417)](s[n(424)],u[n(424)]):x[n(417)](s.value,un(b.value.virtualScene)),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=q([]),path:s=q(""),background:u}=Y(n);X(n,(()=>{o()}));const l=q(null),h=J((()=>Array[e(455)](c.value))),v=J((()=>h[e(438)]?f:K));return X([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(438)])){try{l[r(438)]=await V(v[r(438)],h.value?[...Q(n)]:Q(n),(n=>{t&&n[r(433)](Q(t))}))}catch(o){throw new Error(r(416)+o)}l[r(438)]&&(l[r(438)].mapping=h[r(438)]?p:d)}}),{immediate:!0}),X(l,(n=>{const t=e;r[t(438)]&&n&&(r[t(438)][t(440)]=n)}),{immediate:!0}),X([u,l],(([n,o])=>{const i=e;if(r[i(438)]){let e=(null==t?void 0:t[i(438)])?t.value[i(405)]:o,a=r.value[i(420)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(438)].background=n?e:a}}),{immediate:!0}),X((()=>null==a?void 0:a[e(438)]),(n=>{const t=e;r[t(438)]&&n&&(r.value[t(425)]=n)}),{immediate:!0}),X((()=>null==i?void 0:i[e(438)]),(async n=>{const t=e;if(n&&n in jn){const e=Wn,i=jn[n];try{l.value=await V(K,i,(n=>{e&&n[Gn(433)](e)}))}catch(r){throw new Error(t(416)+r)}l[t(438)]&&l[t(438)]&&(l.value[t(414)]=d),o()}else if(n&&!(n in jn))throw new Error(t(406)+Object[t(408)](jn)[t(445)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Xn;n?(u.value[t(422)]=n[t(414)],i[t(409)]&&(u.value[t(409)]=n[t(414)])):(u.value[t(422)]=w.value,i[t(409)]&&(u[t(424)].background=w[t(424)]))};X(w,(n=>{y[Xn(424)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=Xn;null==(n=y[t(424)])||n[t(428)](),y[t(424)]=new v(i[t(423)]),x=new m(i[t(387)],i[t(433)],y[t(424)]),i[t(416)]?(y[t(424)][t(414)][t(413)]=g,y[t(424)][t(414)][t(389)]=!1,y.value[t(414)][t(419)]=_,y.value[t(414)][t(400)]=_):y[t(424)][t(414)][t(413)]=h,M(y.value)};return X((()=>rn()[e(390)]),(n=>{var t,r;const o=e;n&&(!y[o(424)]||y[o(424)][o(414)][o(413)]!==h)&&(l=n(),Array[o(434)](l)&&l[o(429)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(405))?R():(null==(r=y[o(424)])||r[o(428)](),y[o(424)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,X((()=>i[e(416)]),(n=>{y[e(424)]&&R()})),(n,t)=>{const r=e;return Q(y)?(on(),an(r(402),{key:0,ref_key:"envSence",ref:b},[cn(n[r(399)],r(390))],512)):sn("",!0)}}});function Qn(n){function t(n){const e=Xn;if(typeof n===e(403))return function(n){}.constructor(e(421))[e(395)](e(383));1!==(""+n/n).length||n%20==0?function(){return!0}[e(385)](e(404)+"gger")[e(392)](e(407)):function(){return!1}.constructor("debugger")[e(395)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=ut;!function(n,t){const e=ut,r=ct();for(;;)try{if(344933===-parseInt(e(231))/1+parseInt(e(247))/2+-parseInt(e(242))/3*(-parseInt(e(241))/4)+-parseInt(e(261))/5*(-parseInt(e(243))/6)+parseInt(e(273))/7+-parseInt(e(262))/8+parseInt(e(244))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(250)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=ut,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=lt(n(272));t[n(278)](r+n(254))&&e.test(r+n(277))?lt():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();et(void 0,(function(){const n=ut;let t;try{t=Function(n(267)+n(236)+");")()}catch(o){t=window}const e=t[n(260)]=t[n(260)]||{},r=["log",n(252),"info","error",n(265),n(246),n(264)];for(let i=0;i<r[n(237)];i++){const t=et[n(253)][n(270)][n(276)](et),o=r[i],a=e[o]||t;t[n(256)]=et[n(276)](et),t[n(269)]=a.toString[n(276)](a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[nt(258),nt(235),nt(257),nt(232)];function ct(){const n=["return (function() ","while (true) {}","toString","prototype","intensity","init","3242918WxvnJz","ring","action","bind","input","test","TresMeshBasicMaterial","364485iegGeT","color","rect","index","map",'{}.constructor("return this")( )',"length","value","gger","debu","5864PFVVxa","108XbRilp","1758bODsYN","1769958MSihOJ","needsUpdate","table","1109842qhFuMw","call","from","apply","TresPlaneGeometry","warn","constructor","chain","multiplyScalar","__proto__","side","toneMapped","material","console","1690JuUncg","5257992jzHOuI","stateObject","trace","exception","TresRingGeometry"];return(ct=function(){return n})()}const st=nn({__name:nt(234),props:{args:{default:null},from:{default:nt(233)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=q();return ln((()=>{const n=ut;r.value&&(r[n(238)].color.multiplyScalar(e[n(271)]),r[n(238)][n(245)]=!0)})),X((()=>e[t(232)]),(n=>{const o=t;r[o(238)]&&(r[o(238)][o(232)].set(n),r[o(238)].color[o(255)](e[o(271)]),r.value[o(245)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an("TresMesh",null,["circle"===e[i(249)]?(on(),an("TresRingGeometry",rt)):e[i(249)]===i(274)?(on(),an(i(266),ot)):e.from===i(233)?(on(),an(i(251),it)):(on(),pn(e[i(249)],{key:3,args:e})),dn(i(230),{ref_key:i(259),ref:r,toneMapped:n.toneMapped,map:n[i(235)],side:Q(x),color:n[i(232)]},null,8,at)])}}});function ut(n,t){const e=ct();return(ut=function(n,t){return e[n-=230]})(n,t)}function lt(n){function t(n){const e=ut;if("string"==typeof n)return function(n){}[e(253)](e(268))[e(250)]("counter");1!==(""+n/n)[e(237)]||n%20==0?function(){return!0}.constructor(e(240)+e(239))[e(248)](e(275)):function(){return!1}[e(253)]("debu"+e(239))[e(250)](e(263)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ht,r=dt();for(;;)try{if(639337===parseInt(e(201))/1+parseInt(e(167))/2*(parseInt(e(165))/3)+parseInt(e(199))/4*(-parseInt(e(185))/5)+parseInt(e(163))/6*(-parseInt(e(184))/7)+parseInt(e(200))/8+-parseInt(e(196))/9*(parseInt(e(202))/10)+-parseInt(e(187))/11*(-parseInt(e(162))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(179)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ft(this,(function(){const n=ht,t=new RegExp(n(171)),e=new RegExp(n(183),"i"),r=mt(n(204));t[n(181)](r+n(178))&&e[n(181)](r+n(173))?mt():r("0")}))()}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(179)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(){const n=["depthTexture","value","width","info","format","trace","__proto__","4203InNOzv","string","clear","161276zvbRoc","1674824dutxmw","241720Jxyrnr","26080GvkVUr","dispose","init","stateObject","exception","12OgYjUX","12SUJSdU","constructor","6kONUHC","height","629436nJGjZt","prototype","gger","return (function() ","function *\\( *\\)","setRenderTarget","input","call","bind","log","toString","chain","apply","debu","test","render","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","544607mOhTya","30lZRgcT","console","12917080TfXStX","error"];return(dt=function(){return n})()}function ht(n,t){const e=dt();return(ht=function(n,t){return e[n-=162]})(n,t)}function vt(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=ht;null==(n=t.value)||n[a(203)](),t.value=new b((null==r?void 0:r[a(190)])||p[a(191)][a(190)],(null==e?void 0:e.value)||p[a(166)][a(190)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(190)])&&(t[a(190)][a(189)]=new S((null==r?void 0:r[a(190)])||p[a(191)].value,(null==e?void 0:e[a(190)])||p.height[a(190)]),t[a(190)][a(189)][a(193)]=w,t[a(190)].depthTexture.type=M)})),s((()=>{const n=ht;(null==a?void 0:a.value)&&(l[n(190)][n(172)](un(t[n(190)])),l[n(190)][n(198)](),l[n(190)][n(182)](un(f.value),un(u[n(190)])),l[n(190)].setRenderTarget(null))})),mn((()=>{var n;const e=ht;null==(n=t.value)||n[e(203)]()})),t}function mt(n){function t(n){const e=ht;if(typeof n===e(197))return function(n){}.constructor("while (true) {}")[e(179)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(164)](e(180)+e(169))[e(174)]("action"):function(){return!1}[e(164)]("debu"+e(169)).apply(e(205)),t(++n)}try{if(n)return t;t(0)}catch(e){}}pt(void 0,(function(){const n=ht;let t;try{t=Function(n(170)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(186)]=t.console||{},r=[n(176),"warn",n(192),n(188),n(206),"table",n(194)];for(let i=0;i<r.length;i++){const t=pt[n(164)][n(168)][n(175)](pt),o=r[i],a=e[o]||t;t[n(195)]=pt.bind(pt),t[n(177)]=a[n(177)][n(175)](a),e[o]=t}}))();const gt=bt;!function(n,t){const e=bt,r=It();for(;;)try{if(993462===parseInt(e(167))/1+parseInt(e(136))/2*(-parseInt(e(125))/3)+parseInt(e(128))/4+-parseInt(e(175))/5*(-parseInt(e(140))/6)+parseInt(e(169))/7+-parseInt(e(154))/8+parseInt(e(153))/9*(-parseInt(e(162))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(134)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=bt,t=new RegExp(n(139)),e=new RegExp(n(127),"i"),r=wt(n(147));t[n(149)](r+n(172))&&e[n(149)](r+n(160))?wt():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(134)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function(n(126)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(142)]||{},r=[n(143),n(130),"info",n(158),n(146),n(174),"trace"];for(let o=0;o<r[n(168)];o++){const t=yt[n(148)][n(151)][n(165)](yt),i=r[o],a=e[i]||t;t[n(133)]=yt[n(165)](yt),t.toString=a[n(132)][n(165)](a),e[i]=t}}))();const xt=[gt(124),gt(157)];function bt(n,t){const e=It();return(bt=function(n,t){return e[n-=123]})(n,t)}function It(){const n=["function *\\( *\\)","2616UlHbdD","fboResolution","console","log","value","stateObject","exception","init","constructor","test","toneMapping","prototype","render","6777oAQDyu","999168OsBXua","material","background","side","error","backsideThickness","input","action","19860FRvFGs","envMapIntensity","thickness","bind","texture","488830pnLwWx","length","12452755sjjPCn","uuid","gger","chain","setRenderTarget","table","5905diYrFk","debu","TresMeshTransmissionMaterial","MeshTransmissionMaterialClass","isMesh","buffer","105411XVTHoc","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2697572tsxSeb","counter","warn","backside","toString","__proto__","apply","traverse","48eLAnIf","string","call"];return(It=function(){return n})()}const St=nn({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new Sn,{onBeforeLoop:f}=$(),p=vt({width:u[e(141)],height:u[e(141)],isLoop:!1}),d=vt({width:u[e(141)],height:u[e(141)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(144)]=function(n,t){const e=bt;let r;return n[e(135)]((n=>{const o=e;n[o(123)]&&n[o(155)]&&n[o(155)][o(170)]===t&&(r=n)})),r}(i[n(144)],r.value[n(170)])})),f((({elapsed:n})=>{const t=e;r[t(144)].time=n,r[t(144)][t(124)]===d.value.texture&&s.value&&(m=a.value[t(150)],h=i[t(144)][t(156)],v=r.value[t(163)],g=s[t(144)].material[t(157)],s[t(144)][t(155)]=l,u[t(131)]&&(a[t(144)][t(173)](p[t(144)]),a[t(144)].render(i[t(144)],c.value),s[t(144)][t(155)]=r[t(144)],s.value[t(155)][t(164)]=u[t(159)],s[t(144)].material[t(124)]=p.value.texture,s[t(144)].material[t(157)]=R,s[t(144)][t(155)][t(163)]=0),a[t(144)][t(173)](d[t(144)]),a[t(144)][t(152)](i[t(144)],c[t(144)]),s[t(144)].material.buffer=d[t(144)].texture,s[t(144)][t(155)]=r[t(144)],s[t(144)][t(155)][t(164)]=u[t(164)],s[t(144)].material[t(157)]=g,s.value[t(155)].envMapIntensity=v,i[t(144)][t(156)]=h,a[t(144)][t(173)](null),a[t(144)][t(150)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an(o(177),{ref_key:o(178),ref:r,buffer:Q(d)[o(166)],side:Q(x)},null,8,xt)}}});function wt(n){function t(n){const e=bt;if(typeof n===e(137))return function(n){}[e(148)]("while (true) {}").apply(e(129));1!==(""+n/n)[e(168)]||n%20==0?function(){return!0}[e(148)](e(176)+e(171))[e(138)](e(161)):function(){return!1}[e(148)](e(176)+e(171))[e(134)](e(145)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=Dt;!function(n,t){const e=Dt,r=Et();for(;;)try{if(957181===parseInt(e(241))/1+parseInt(e(200))/2*(-parseInt(e(212))/3)+-parseInt(e(251))/4+parseInt(e(221))/5*(parseInt(e(234))/6)+parseInt(e(202))/7+-parseInt(e(237))/8*(-parseInt(e(222))/9)+parseInt(e(224))/10*(-parseInt(e(240))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rt(this,(function(){const n=Dt,t=new RegExp(n(226)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zt(n(235));t.test(r+n(228))&&e[n(239)](r+"input")?zt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(249)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(){const n=["10441790XEyXbb","getBoundingSphere","function *\\( *\\)","debu","chain","while (true) {}","toString","getCenter","disableY","default","1344ihJBYc","init","gger","2008KJgfyC","matrixWorld","test","11GkgzMV","648312PtMtoK","value",'{}.constructor("return this")( )',"trace","max","counter","disableZ","disable","apply","console","1871168qiENvk","exception","constructor","return (function() ","disableX","table","10446ZhSSIK","inner","37534PpohNj","index","back","length","left","log","warn","string","$slots","front","108ghfnkq","TresGroup","bottom","bind","position","identity","top","min","call","37785FxeQvJ","11142TmmgUi","outer"];return(Et=function(){return n})()}At(void 0,(function(){const n=Dt,t=function(){const n=Dt;let t;try{t=Function(n(197)+n(243)+");")()}catch(e){t=window}return t}(),e=t[n(250)]=t[n(250)]||{},r=[n(207),n(208),"info","error",n(195),n(199),n(244)];for(let o=0;o<r.length;o++){const t=At.constructor.prototype[n(215)](At),i=r[o],a=e[i]||t;t.__proto__=At[n(215)](At),t.toString=a[n(230)][n(215)](a),e[i]=t}}))();const Tt=nn({__name:Mt(203),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return fn((()=>{const n=Dt;if(!r[n(242)])return;if(!o[n(242)])return;r[n(242)][n(238)][n(217)]();const e=(new A).setFromObject(o[n(242)],t.precise),i=new E,a=new T,c=e[n(245)].x-e[n(219)].x,s=e[n(245)].y-e[n(219)].y,u=e[n(245)].z-e[n(219)].z;e[n(231)](i),e[n(225)](a);const l=t[n(218)]?s/2:t[n(214)]?-s/2:0,f=t[n(206)]?-c/2:t.right?c/2:0,p=t[n(211)]?u/2:t[n(204)]?-u/2:0;r[n(242)][n(216)].set(t[n(248)]||t[n(198)]?0:-i.x+f,t.disable||t[n(232)]?0:-i.y+l,t.disable||t[n(247)]?0:-i.z+p)})),(n,t)=>{const i=Dt;return on(),an(i(213),{ref_key:"gref",ref:e},[dn(i(213),{ref_key:i(223),ref:r},[dn(i(213),{ref_key:i(201),ref:o},[cn(n[i(210)],i(233))],512)],512)],512)}}});function Dt(n,t){const e=Et();return(Dt=function(n,t){return e[n-=195]})(n,t)}function zt(n){function t(n){const e=Dt;if(typeof n===e(209))return function(n){}[e(196)](e(229))[e(249)](e(246));1!==(""+n/n)[e(205)]||n%20==0?function(){return!0}.constructor("debu"+e(236))[e(220)]("action"):function(){return!1}.constructor(e(227)+e(236))[e(249)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Pt(){const n=["add","$slots","log","123382lwKsOn","13980GkSloJ","1251580KyUtXN","apply","Vector3","object","primitive","intensity","far","resolution","66sdLgvL","10EIDzaW","action","color","test","input","error","toString","4694504aPeKUN","scene","constructor","ior",'{}.constructor("return this")( )',"bind","set","worldRadius","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ffffff","value","stateObject","function *\\( *\\)","backside","length","730773UsdAPb","causticsOnly","lightSource","1341494AqQeWL","TresGroup","default","gger","__proto__","params","180FtuEiB","debu","while (true) {}","509147UPoaaF","backsideIOR","group","3FGMmxW","table","info","chain","console","string","helper","call","exception"];return(Pt=function(){return n})()}const Ot=jt;!function(n,t){const e=jt,r=Pt();for(;;)try{if(353615===parseInt(e(171))/1+parseInt(e(128))/2*(-parseInt(e(174))/3)+parseInt(e(127))/4*(-parseInt(e(168))/5)+parseInt(e(136))/6*(-parseInt(e(186))/7)+parseInt(e(144))/8+parseInt(e(159))/9+-parseInt(e(137))/10*(-parseInt(e(162))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(129)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=jt,t=new RegExp(n(156)),e=new RegExp(n(152),"i"),r=Nt("init");t.test(r+n(177))&&e[n(140)](r+n(141))?Nt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(129)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ft(void 0,(function(){const n=jt,t=function(){const n=jt;let t;try{t=Function("return (function() "+n(148)+");")()}catch(e){t=window}return t}(),e=t[n(178)]=t[n(178)]||{},r=[n(185),"warn",n(176),n(142),n(182),n(175),"trace"];for(let o=0;o<r[n(158)];o++){const t=Ft[n(146)].prototype[n(149)](Ft),i=r[o],a=e[i]||t;t[n(166)]=Ft[n(149)](Ft),t[n(143)]=a[n(143)][n(149)](a),e[i]=t}}))();const Bt=[Ot(131)],kt=["object"];function jt(n,t){const e=Pt();return(jt=function(n,t){return e[n-=127]})(n,t)}const Ut=nn({__name:"index",props:{color:{default:Ot(153)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=W(),o=wn(r[t(154)],{frames:1/0,resolution:e[t(135)],worldRadius:e[t(151)]});o.params[t(157)]=!0;const i=gn(null);X(i,(n=>{const e=t;n&&o[e(145)][e(183)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o.update()})),ln((()=>{const n=t;e.color&&o[n(167)].color[n(150)](e[n(139)]),e.ior&&(o.params.ior=e[n(147)]),e[n(172)]&&(o[n(167)][n(172)]=e[n(172)]),e[n(134)]&&(o[n(167)][n(134)]=e.far),e[n(151)]&&(o.params[n(151)]=e[n(151)]),e[n(133)]&&(o[n(167)][n(133)]=e[n(133)])})),X((()=>e.causticsOnly),(n=>{const e=t;o[e(167)][e(160)]=n})),X((()=>e[t(161)]),(n=>{const e=t;n&&o[e(167)][e(161)]instanceof D[e(130)]&&o[e(167)].lightSource[e(150)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn(r(163),{ref_key:"group",ref:i},[cn(n[r(184)],r(164))],512),dn(r(132),{object:Q(o)[r(173)],position:[0,.003,0]},null,8,Bt),dn(r(132),{object:Q(o)[r(180)],visible:!1},null,8,kt)],64)}}});function Nt(n){function t(n){const e=jt;if(typeof n===e(179))return function(n){}[e(146)](e(170))[e(129)]("counter");1!==(""+n/n)[e(158)]||n%20==0?function(){return!0}[e(146)](e(169)+e(165))[e(181)](e(138)):function(){return!1}[e(146)](e(169)+e(165))[e(129)](e(155)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=182]})(n,t)}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(380600===parseInt(e(207))/1*(-parseInt(e(203))/2)+-parseInt(e(196))/3+-parseInt(e(190))/4+-parseInt(e(216))/5+parseInt(e(199))/6+parseInt(e(218))/7*(-parseInt(e(205))/8)+parseInt(e(236))/9*(parseInt(e(188))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lt(this,(function(){const n=Ht,t=new RegExp(n(226)),e=new RegExp(n(225),"i"),r=Vt(n(192));t[n(233)](r+n(232))&&e[n(233)](r+n(212))?Vt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["apply","traverse","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",'{}.constructor("return this")( )',"toString","; i ++) {\n        offset = (vogelDiskSample(j, ","#ifdef USE_SHADOWMAP","chain","test","bind","debu","9KmCDuy","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","stateObject",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","call","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","isArray","info","18756010QCDbXy","constructor","1901440TqsaRg",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","init","gger","shadowmap_pars_fragment","prototype","20133rFnpjL","properties","replace","714912VfpxtK","remove","table","programs","94fOYYEd","ShaderChunk","1740888qgyPyH","dispose","3452tIYFDb","length","console","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","__proto__","input","; i++) {\n        vogelSample = vogelDiskSample(j, ","#if defined( SHADOWMAP_TYPE_PCF )","exception","2673080rpJvrR","material","14UDyseo",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","counter","string","compile"];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function("return (function() "+n(228)+");")()}catch(e){t=window}return t}(),e=t[n(209)]=t[n(209)]||{},r=["log","warn",n(187),"error",n(215),n(201),"trace"];for(let o=0;o<r[n(208)];o++){const t=Zt[n(189)][n(195)][n(234)](Zt),i=r[o],a=e[i]||t;t[n(211)]=Zt[n(234)](Zt),t[n(229)]=a[n(229)].bind(a),e[i]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=D[r(204)].shadowmap_pars_fragment;return D[r(204)].shadowmap_pars_fragment=D[r(204)][r(194)][r(198)](r(231),r(237)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(227)+e+r(230)+e+r(219)+e+r(213)+e+r(183)+t+r(185)+e+r(191))[r(198)](r(214),r(210)),(n,t,e)=>{const i=r;D[i(204)][i(194)]=o,function(n,t,e){const r=Ht;t[r(224)]((t=>{const e=r;t[e(217)]&&(Array[e(186)](t[e(217)])?t.material.forEach((t=>{const r=e;n[r(197)][r(200)](t),t[r(206)]()})):(n[e(197)][e(200)](t[e(217)]),t[e(217)][e(206)]()))})),n[r(187)][r(202)].length=0,n[r(222)](t,e)}(n,t,e)}};function Vt(n){function t(n){const e=Ht;if(typeof n===e(221))return function(n){}.constructor("while (true) {}")[e(223)](e(220));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(235)+e(193))[e(184)]("action"):function(){return!1}[e(189)](e(235)+e(193)).apply(e(182)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $t=Jt;!function(n,t){const e=Jt,r=qt();for(;;)try{if(311294===-parseInt(e(198))/1*(parseInt(e(189))/2)+-parseInt(e(209))/3+-parseInt(e(177))/4+parseInt(e(213))/5*(parseInt(e(210))/6)+-parseInt(e(181))/7*(parseInt(e(178))/8)+-parseInt(e(212))/9*(-parseInt(e(208))/10)+-parseInt(e(190))/11*(-parseInt(e(183))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=Jt,t=new RegExp(n(179)),e=new RegExp(n(199),"i"),r=Qt(n(193));t[n(184)](r+n(191))&&e[n(184)](r+n(182))?Qt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(){const n=["string","34ubwufJ","44ylPxMu","chain","info","init","bind","stateObject","value","warn","31368alHQwV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"gger","while (true) {}","constructor","toString","exception","counter","apply","167630TGPIqd","1095828RQvvYT","6462nvNABS","debu","99TTtYfI","2195KWqjLQ","call","action","console","1181876TpZIsS","423192BnewXH","function *\\( *\\)","length","77eBFaWs","input","4289964rnVybg","test","trace","material","index"];return(qt=function(){return n})()}Yt(void 0,(function(){const n=Jt,t=function(){const n=Jt;let t;try{t=Function("return (function() "+n(200)+");")()}catch(e){t=window}return t}(),e=t[n(176)]=t.console||{},r=["log",n(197),n(192),"error",n(205),"table",n(185)];for(let o=0;o<r[n(180)];o++){const t=Yt[n(203)].prototype[n(194)](Yt),i=r[o],a=e[i]||t;t.__proto__=Yt.bind(Yt),t.toString=a[n(204)].bind(a),e[i]=t}}))();const Xt=nn({__name:$t(187),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(196)],o[t(196)],e[t(196)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o.value.traverse((n=>{n instanceof l&&n[t(186)].dispose()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n,t){const e=qt();return(Jt=function(n,t){return e[n-=176]})(n,t)}function Qt(n){function t(n){const e=Jt;if(typeof n===e(188))return function(n){}[e(203)](e(202))[e(207)](e(206));1!==(""+n/n)[e(180)]||n%20==0?function(){return!0}.constructor("debu"+e(201))[e(214)](e(215)):function(){return!1}[e(203)](e(211)+e(201))[e(207)](e(195)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ne(){const n=["3978240MKSRKN","4472232eFKImO","colorspace_fragment","value","console","function *\\( *\\)","trace","4493216hbBFPb","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","test","halfTexelSize",'{}.constructor("return this")( )',"error","prototype","call","14171392UOwnSN","table","kernel","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","while (true) {}","2972732dUzleW","gger","replace","stateObject","debu","set","constructor","bind","log","327817YfViZW","init","info","encodings_fragment","return (function() ","action","358074BPOvlH","apply","2pAwgZQ","__proto__","resolution","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","uniforms","setTexelSize"];return(ne=function(){return n})()}const te=ee;function ee(n,t){const e=ne();return(ee=function(n,t){return e[n-=451]})(n,t)}!function(n,t){const e=ee,r=ne();for(;;)try{if(544536===-parseInt(e(477))/1*(-parseInt(e(485))/2)+-parseInt(e(483))/3+-parseInt(e(468))/4+-parseInt(e(491))/5+parseInt(e(492))/6+-parseInt(e(454))/7+parseInt(e(463))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ee,t=new RegExp(n(452)),e=new RegExp(n(455),"i"),r=ce(n(478));t.test(r+"chain")&&e[n(457)](r+"input")?ce():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=ee,t=function(){const n=ee;let t;try{t=Function(n(481)+n(459)+");")()}catch(e){t=window}return t}(),e=t[n(451)]=t.console||{},r=[n(476),"warn",n(479),n(460),"exception",n(464),n(453)];for(let o=0;o<r[n(456)];o++){const t=oe[n(474)][n(461)][n(475)](oe),i=r[o],a=e[i]||t;t[n(486)]=oe.bind(oe),t.toString=a.toString[n(475)](a),e[i]=t}}))();const ie=parseInt(F[te(470)](/\D+/g,""));class ae extends z{constructor(n=new O){const t=te;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(466)+t(ie>=154?493:480)+">\n        }",vertexShader:t(488),blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this[t(465)]=new Float32Array([0,1,2,2,3])}[te(490)](n,t){const e=te;this[e(489)].texelSize[e(494)].set(n,t),this[e(489)][e(458)][e(494)][e(473)](n,t).multiplyScalar(.5)}setResolution(n){const t=te;this[t(489)][t(487)][t(494)].copy(n)}}function ce(n){function t(n){const e=ee;if("string"==typeof n)return function(n){}[e(474)](e(467))[e(484)]("counter");1!==(""+n/n)[e(456)]||n%20==0?function(){return!0}[e(474)](e(472)+e(469))[e(462)](e(482)):function(){return!1}.constructor(e(472)+e(469))[e(484)](e(471)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=fe;!function(n,t){const e=fe,r=de();for(;;)try{if(275167===-parseInt(e(483))/1*(parseInt(e(508))/2)+-parseInt(e(507))/3*(-parseInt(e(492))/4)+-parseInt(e(493))/5*(parseInt(e(494))/6)+-parseInt(e(520))/7*(-parseInt(e(477))/8)+-parseInt(e(490))/9*(-parseInt(e(481))/10)+parseInt(e(485))/11*(parseInt(e(476))/12)+-parseInt(e(491))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ue(this,(function(){const n=fe,t=new RegExp(n(502)),e=new RegExp(n(518),"i"),r=he(n(522));t[n(531)](r+n(528))&&e[n(531)](r+"input")?he():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(n,t){const e=de();return(fe=function(n,t){return e[n-=473]})(n,t)}le(void 0,(function(){const n=fe;let t;try{t=Function(n(482)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(526)]||{},r=[n(527),n(529),n(535),n(524),"exception",n(511),"trace"];for(let i=0;i<r[n(473)];i++){const t=le[n(525)][n(516)].bind(le),o=r[i],a=e[o]||t;t.__proto__=le[n(534)](le),t.toString=a[n(480)][n(534)](a),e[o]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this[c(510)]=!1,this[c(475)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(475)].clone(),this[c(521)]=new ae,this[c(521)][c(489)](1/t,1/e),this[c(521)][c(500)](new O(t,e)),this[c(517)]=new u,this[c(506)]=new B,this[c(521)][c(487)][c(496)][c(501)]=r,this[c(521)][c(487)][c(530)][c(501)]=o,this[c(521)][c(487)][c(498)][c(501)]=i,this[c(521)][c(487)][c(474)][c(501)]=a,this.convolutionMaterial[c(519)][c(505)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(515)](c(497),new j(s,3)),p[c(515)]("uv",new j(f,2)),this[c(488)]=new l(p,this[c(521)]),this.screen[c(532)]=!1,this[c(517)][c(486)](this.screen)}[se(533)](n,t,e){const r=se,o=this[r(517)],i=this.camera,a=this.renderTargetA,c=this[r(512)],s=this[r(521)],u=s.uniforms;u[r(503)].value=t[r(495)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(473)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(479)].value=l[p],u[r(499)].value=h[r(536)],n.setRenderTarget(f),n[r(533)](o,i),h=f;u[r(479)][r(501)]=l[p],u[r(499)][r(501)]=h[r(536)],n.setRenderTarget(this[r(510)]?null:e),n.render(o,i)}}function de(){const n=["10xeuqjc","return (function() ","12322XKJCri","apply","11UFCIgR","add","uniforms","screen","setTexelSize","1835739mXDGQO","1029964piEnih","4lhzQQr","1186805ikqQJa","6HJMpXD","depthTexture","minDepthThreshold","position","depthScale","inputBuffer","setResolution","value","function *\\( *\\)","depthBuffer","string","USE_DEPTH","camera","736992HHWBrZ","2gFYpYU","while (true) {}","renderToScreen","table","renderTargetB","counter","gger","setAttribute","prototype","scene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","defines","28lqziWZ","convolutionMaterial","init","action","error","constructor","console","log","chain","warn","maxDepthThreshold","test","frustumCulled","render","bind","info","texture","length","depthToBlurRatioBias","renderTargetA","189924tzyBox","277232rNiAhS","call","kernel","toString"];return(de=function(){return n})()}function he(n){function t(n){const e=fe;if(typeof n===e(504))return function(n){}[e(525)](e(509))[e(484)](e(513));1!==(""+n/n)[e(473)]||n%20==0?function(){return!0}[e(525)]("debu"+e(514))[e(478)](e(523)):function(){return!1}.constructor("debugger")[e(484)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ve(){var n=["2125420chDaZy","USE_UV","_mixBlur","gger","50cBZXzd","5190dKtcDE","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_depthToBlurRatioBias","552840HrFRdx","toString","string","textureMatrix","tDepth","distortionMap","counter","while (true) {}","_depthScale","_tDepth","setValues","fragmentShader","table","init","error","_hasBlur","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","mixBlur","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","prototype","574vKweJM","maxDepthThreshold","tDiffuseBlur","return (function() ","depthScale","#include <emissivemap_fragment>","constructor","_distortionMap","value","__proto__","1935588sFVKwo","_mixContrast","_blurStrength","mirror","log","vertexShader","onBeforeCompile","info","_tDiffuseBlur","replace","uniforms","_tDiffuse","tDiffuse","_distortion","_textureMatrix","debu","minDepthThreshold","371705ZuxbfE","distortion","stateObject","action","3592575HGVHdr","6WHxNnu","exception","bind",'{}.constructor("return this")( )',"157761JSSEDz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","hasBlur","_minDepthThreshold","console","mixStrength","test","#include <project_vertex>","chain","mixContrast","depthToBlurRatioBias","_mirror","_maxDepthThreshold","apply","defines","length"];return(ve=function(){return n})()}var me=_e;!function(n,t){for(var e=_e,r=ve();;)try{if(315709===parseInt(e(369))/1+-parseInt(e(342))/2*(-parseInt(e(319))/3)+-parseInt(e(352))/4+parseInt(e(394))/5*(-parseInt(e(374))/6)+parseInt(e(373))/7+-parseInt(e(322))/8+parseInt(e(378))/9*(-parseInt(e(398))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(n,t){var e=ve();return(_e=function(n,t){return e[n-=319]})(n,t)}!function(){ge(this,(function(){var n=_e,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(379),"i"),r=be(n(335));t[n(384)](r+n(386))&&e[n(384)](r+"input")?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){var n,t=_e;try{n=Function(t(345)+t(377)+");")()}catch(s){n=window}for(var e=n[t(382)]=n.console||{},r=[t(356),"warn",t(359),t(336),t(375),t(334),"trace"],o=0;o<r.length;o++){var i=ye.constructor[t(341)][t(376)](ye),a=r[o],c=e[a]||i;i[t(351)]=ye.bind(ye),i[t(323)]=c[t(323)].bind(c),e[a]=i}}))();class xe extends U{constructor(n={}){var t=_e;super(n),this[t(331)]={value:null},this[t(349)]={value:null},this[t(363)]={value:null},this._tDiffuseBlur={value:null},this[t(366)]={value:null},this[t(337)]={value:!1},this[t(389)]={value:0},this[t(396)]={value:0},this[t(354)]={value:.5},this[t(381)]={value:.9},this[t(390)]={value:1},this[t(330)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(365)]={value:1},this._mixContrast={value:1},this[t(332)](n)}[me(358)](n){var t,e=me;!(null==(t=n[e(392)])?void 0:t[e(395)])&&(n.defines[e(395)]=""),n[e(362)].hasBlur=this[e(337)],n[e(362)][e(364)]=this[e(363)],n[e(362)][e(326)]=this._tDepth,n[e(362)][e(327)]=this._distortionMap,n[e(362)][e(344)]=this[e(360)],n[e(362)][e(325)]=this._textureMatrix,n[e(362)][e(355)]=this[e(389)],n.uniforms[e(339)]=this[e(396)],n.uniforms[e(383)]=this[e(354)],n[e(362)][e(368)]=this[e(381)],n[e(362)][e(343)]=this._maxDepthThreshold,n[e(362)][e(346)]=this[e(330)],n[e(362)][e(388)]=this[e(321)],n[e(362)][e(370)]=this[e(365)],n[e(362)][e(387)]=this[e(353)],n[e(357)]=e(340)+n[e(357)],n[e(357)]=n[e(357)].replace(e(385),e(320)),n[e(333)]=e(338)+n[e(333)],n[e(333)]=n[e(333)][e(361)](e(347),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[me(364)](){var n=me;return this._tDiffuse[n(350)]}set[me(364)](n){var t=me;this[t(363)][t(350)]=n}get[me(326)](){return this[me(331)].value}set tDepth(n){var t=me;this._tDepth[t(350)]=n}get distortionMap(){var n=me;return this[n(349)][n(350)]}set[me(327)](n){var t=me;this._distortionMap[t(350)]=n}get[me(344)](){return this._tDiffuseBlur.value}set[me(344)](n){var t=me;this[t(360)][t(350)]=n}get textureMatrix(){return this[me(366)].value}set textureMatrix(n){var t=me;this[t(366)][t(350)]=n}get[me(380)](){return this[me(337)].value}set hasBlur(n){var t=me;this[t(337)][t(350)]=n}get[me(355)](){return this[me(389)].value}set mirror(n){var t=me;this[t(389)][t(350)]=n}get mixBlur(){return this[me(396)].value}set mixBlur(n){var t=me;this[t(396)][t(350)]=n}get[me(383)](){var n=me;return this._blurStrength[n(350)]}set mixStrength(n){var t=me;this._blurStrength[t(350)]=n}get minDepthThreshold(){var n=me;return this[n(381)][n(350)]}set[me(368)](n){var t=me;this[t(381)][t(350)]=n}get maxDepthThreshold(){var n=me;return this[n(390)][n(350)]}set maxDepthThreshold(n){var t=me;this[t(390)][t(350)]=n}get[me(346)](){return this[me(330)].value}set[me(346)](n){var t=me;this[t(330)][t(350)]=n}get[me(388)](){var n=me;return this[n(321)][n(350)]}set depthToBlurRatioBias(n){this._depthToBlurRatioBias.value=n}get[me(370)](){var n=me;return this[n(365)][n(350)]}set[me(370)](n){var t=me;this._distortion[t(350)]=n}get[me(387)](){var n=me;return this[n(353)][n(350)]}set mixContrast(n){var t=me;this[t(353)][t(350)]=n}}function be(n){function t(n){var e=_e;if(typeof n===e(324))return function(n){}[e(348)](e(329))[e(391)](e(328));1!==(""+n/n)[e(393)]||n%20==0?function(){return!0}.constructor(e(367)+e(397)).call(e(372)):function(){return!1}[e(348)]("debu"+e(397))[e(391)](e(371)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Re;!function(n,t){const e=Re,r=Ae();for(;;)try{if(181865===-parseInt(e(148))/1*(parseInt(e(206))/2)+-parseInt(e(181))/3+-parseInt(e(192))/4*(parseInt(e(123))/5)+parseInt(e(177))/6*(-parseInt(e(132))/7)+parseInt(e(144))/8+parseInt(e(168))/9+parseInt(e(151))/10*(parseInt(e(154))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(167)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Re,t=new RegExp(n(165)),e=new RegExp(n(130),"i"),r=Te(n(121));t.test(r+n(147))&&e[n(160)](r+"input")?Te():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(167)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){const n=Re,t=function(){const n=Re;let t;try{t=Function(n(163)+n(194)+");")()}catch(e){t=window}return t}(),e=t[n(156)]=t[n(156)]||{},r=[n(207),n(155),n(125),"error",n(118),n(145),n(198)];for(let o=0;o<r[n(139)];o++){const t=we[n(112)][n(128)][n(197)](we),i=r[o],a=e[i]||t;t[n(129)]=we[n(197)](we),t[n(109)]=a[n(109)][n(197)](a),e[i]=t}}))();const Me=[Ie(174),Ie(141),Ie(124),"t-depth",Ie(153),"has-blur",Ie(111),"min-depth-threshold",Ie(186),Ie(138),Ie(142),Ie(113),Ie(146),Ie(169),Ie(171),Ie(183),"defines-USE_DISTORTION"];function Re(n,t){const e=Ae();return(Re=function(n,t){return e[n-=109]})(n,t)}function Ae(){const n=["isMesh","exception","matrixWorldInverse","traverse","init","set","19330YwsvhQ","t-diffuse","info","render","subVectors","prototype","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uuid","1833853CkdwTD","addScaledVector","shadowMap","action","key","multiplyScalar","depth-scale","length","dot","mirror","depth-to-blur-ratio-bias","sign","818544EorNsk","table","distortionMap","chain","1cKvnXW","depthTexture","reflect","918500ceNGPJ","debu","t-diffuse-blur","121uPPhTQ","warn","console","cameraWorldPosition","setRenderTarget","updateMatrixWorld","test","view","applyMatrix4","return (function() ","TresMeshReflectorMaterial","function *\\( *\\)","setFromNormalAndCoplanarPoint","apply","578817gurypL","mix-contrast","normal","defines-USE_BLUR","autoUpdate","multiply","texture-matrix","virtualCamera","lookAtPosition","6CuMbHF","number","value","projectionMatrix","458481MBpJNK","texture","defines-USE_DEPTH","negate","elements","max-depth-threshold","enabled","lookAt","textureMatrix","rotationMatrix","material","292RGkEZD","far",'{}.constructor("return this")( )',"matrixWorld","position","bind","trace","clipPlane","dispose","extractRotation","reflectorPlane","target","reflectorWorldPosition","copy","596184LNkFhG","log","stateObject","toString","add","mix-strength","constructor","distortion","counter","visible","autoClear"];return(Ae=function(){return n})()}const Ee=nn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:R,extend:A}=W();A({MeshReflectorMaterial:xe});const T=gn(),D=gn(),z=gn(),P=gn(),O=J((()=>{const n=Re;return typeof f[n(179)]===n(178)?[f[n(179)],f[n(179)]]:f[n(179)]})),C=J((()=>O[r(179)][0]>0||O[r(179)][1]>0)),F={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new L,view:new E,target:new E,q:new L,virtualCamera:new Z,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T.value)||n.texture[o(200)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(179)]=new b(i[o(179)],i[o(179)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(179)],i[o(179)],w,M)},t(y,e(x)))),D[o(179)]=new b(i.value,i[o(179)],f),z.value=new pe({resolution:i[o(179)],width:O[o(179)][0],height:O[o(179)][1],minDepthThreshold:a[o(179)],maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l[o(179)]}),P[o(179)]={mirror:p,textureMatrix:F[o(189)],mixBlur:d,tDiffuse:T[o(179)][o(182)],tDepth:T.value[o(149)],tDiffuseBlur:T[o(179)][o(182)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(179)],mixContrast:_,"defines-USE_BLUR":C[o(179)]?"":void 0,"defines-USE_DEPTH":u[o(179)]>0?"":void 0,"defines-USE_DISTORTION":g[o(179)]?"":void 0}}));const B=gn(),{onLoop:k}=$();k((()=>{var n;const t=r;if(!(B[t(179)]&&R.value&&T[t(179)]&&y[t(179)]))return;const e=function(n,t){const e=Re;let r;return n[e(120)]((n=>{const o=e;n[o(117)]&&n[o(191)]&&n.material[o(131)]===t&&(r=n)})),r}(x[t(179)],B[t(179)][t(131)]);if(!e)return;e[t(115)]=!1;const i=R[t(179)].xr[t(187)],a=R[t(179)].shadowMap[t(172)];(function(n){var t,e;const r=Re;if(F[r(204)].setFromMatrixPosition(n[r(195)]),F[r(157)].setFromMatrixPosition(null==(t=y[r(179)])?void 0:t[r(195)]),F[r(190)][r(201)](n.matrixWorld),F[r(170)][r(122)](0,0,1),F[r(170)][r(162)](F[r(190)]),F[r(204)][r(133)](F.normal,o.reflectorOffset),F[r(161)][r(127)](F[r(204)],F[r(157)]),F.view[r(140)](F[r(170)])>0)return;F[r(161)][r(150)](F[r(170)]).negate(),F.view[r(110)](F[r(204)]),F.rotationMatrix.extractRotation(null==(e=y[r(179)])?void 0:e.matrixWorld),F[r(176)][r(122)](0,0,-1),F[r(176)][r(162)](F[r(190)]),F.lookAtPosition[r(110)](F[r(157)]),F[r(203)][r(127)](F.reflectorWorldPosition,F[r(176)]),F[r(203)].reflect(F[r(170)])[r(184)](),F[r(203)][r(110)](F[r(204)]),F[r(175)][r(196)][r(205)](F[r(161)]),F[r(175)].up[r(122)](0,1,0),F[r(175)].up[r(162)](F[r(190)]),F[r(175)].up[r(150)](F.normal),F[r(175)][r(188)](F[r(203)]),F[r(175)][r(193)]=(null==y?void 0:y[r(179)])[r(193)],F.virtualCamera[r(159)](),F[r(175)][r(180)].copy((null==y?void 0:y[r(179)])[r(180)]),F.textureMatrix[r(122)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(189)].multiply(F[r(175)][r(180)]),F[r(189)][r(173)](F[r(175)][r(119)]),F[r(189)][r(173)](n[r(195)]),F[r(202)][r(166)](F[r(170)],F[r(204)]),F[r(202)].applyMatrix4(F.virtualCamera[r(119)]),F[r(199)][r(122)](F[r(202)].normal.x,F[r(202)][r(170)].y,F[r(202)][r(170)].z,F[r(202)].constant);const i=F[r(175)][r(180)];F.q.x=(Math[r(143)](F.clipPlane.x)+i.elements[8])/i[r(185)][0],F.q.y=(Math.sign(F[r(199)].y)+i[r(185)][9])/i[r(185)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i[r(185)][14],F[r(199)][r(137)](2/F[r(199)][r(140)](F.q)),i[r(185)][2]=F[r(199)].x,i[r(185)][6]=F[r(199)].y,i[r(185)][10]=F.clipPlane.z+1,i[r(185)][14]=F[r(199)].w})(e),R[t(179)][t(134)][t(172)]=!1,R[t(179)][t(158)](T[t(179)]),R.value[t(116)]||R.value.clear(),R[t(179)][t(126)](x[t(179)],F[t(175)]),null==(n=null==z?void 0:z.value)||n[t(126)](R[t(179)],T[t(179)],D[t(179)]),R[t(179)].xr[t(187)]=i,R[t(179)][t(134)].autoUpdate=a,e[t(115)]=!0,R.value[t(158)](null)}));const j=xn(),U=J((()=>{const n={};return Object.assign(n,o),Object.assign(n,j.value),n}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(179)])||n[e(200)](),null==(t=null==D?void 0:D[e(179)])||t[e(200)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(164),bn({key:c(136)+P.value[c(171)]+P[c(179)]["defines-USE_DEPTH"]+P[c(179)]["defines-USE_DISTORTION"],ref_key:"materialRef",ref:B},U[c(179)],{"texture-matrix":F.textureMatrix,mirror:Q(p),"t-diffuse":null==(e=T[c(179)])?void 0:e[c(182)],"t-depth":null==(o=T.value)?void 0:o[c(149)],"t-diffuse-blur":null==(i=D[c(179)])?void 0:i.texture,"has-blur":C.value,"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":C[c(179)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Me)}}});function Te(n){function t(n){const e=Re;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(167)](e(114));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(152)+"gger").call(e(135)):function(){return!1}[e(112)](e(152)+"gger")[e(167)](e(208)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(){const n=["while (true) {}","bind","function *\\( *\\)","135meXyTN","apply","1264260aThEOZ","70FYzymH","return (function() ","exception","trace","prototype","1267PFnjwU",'{}.constructor("return this")( )',"console","input","264904QvtbMS","update","toString","table","test","length","chain","error","3kzqsIQ","dispose","gger","call","value","fog","constructor","125587fgjjHJ","info","counter","520820GsFmVI","background","__proto__","warn","4794lrWgQf","texture","144575llAoMR","type","debu","action","CubeCamera","2438724SvfwaN"];return(De=function(){return n})()}!function(n,t){const e=Oe,r=De();for(;;)try{if(369135===-parseInt(e(226))/1+-parseInt(e(237))/2+parseInt(e(255))/3*(parseInt(e(231))/4)+parseInt(e(265))/5+parseInt(e(269))/6*(-parseInt(e(243))/7)+parseInt(e(247))/8*(parseInt(e(235))/9)+-parseInt(e(238))/10*(-parseInt(e(262))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=Oe,t=new RegExp(n(234)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ce("init");t[n(251)](r+n(253))&&e[n(251)](r+n(246))?Ce():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(n,t){const e=De();return(Oe=function(n,t){return e[n-=225]})(n,t)}function Ce(n){function t(n){const e=Oe;if("string"==typeof n)return function(n){}[e(261)](e(232))[e(236)](e(264));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(257))[e(258)](e(229)):function(){return!1}[e(261)](e(228)+"gger")[e(236)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=Oe;let t;try{t=Function(n(239)+n(244)+");")()}catch(o){t=window}const e=t[n(245)]=t[n(245)]||{},r=["log",n(268),n(263),n(254),n(240),n(250),n(241)];for(let i=0;i<r[n(252)];i++){const t=Pe[n(261)][n(242)][n(233)](Pe),o=r[i],a=e[o]||t;t[n(267)]=Pe[n(233)](Pe),t[n(249)]=a[n(249)][n(233)](a),e[o]=t}}))();const Fe=Be;function Be(n,t){const e=Ue();return(Be=function(n,t){return e[n-=101]})(n,t)}!function(n,t){const e=Be,r=Ue();for(;;)try{if(265796===parseInt(e(105))/1*(parseInt(e(108))/2)+parseInt(e(102))/3+parseInt(e(127))/4*(-parseInt(e(140))/5)+parseInt(e(138))/6+-parseInt(e(142))/7+-parseInt(e(150))/8+-parseInt(e(129))/9*(parseInt(e(115))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(144)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Be,t=new RegExp(n(110)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le(n(120));t[n(118)](r+n(147))&&e.test(r+"input")?Le():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(144)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ue(){const n=["while (true) {}","test","stateObject","init","trace","$slots","gger","counter","texture","warn","4MvkbdN","debu","135VRAAPK","value","constructor","length","TresGroup","action","object","call","rgRef","1804296GqOWSf","near","857645edFFhx","far","199003bqYlKI","primitive","apply","prototype","error","chain",'{}.constructor("return this")( )',"console","2133184uVyppz","toString","bind","495393bkAxKt","__proto__","return (function() ","268400vASCws","table","log","2aRzTEK","envMap","function *\\( *\\)","fog","string","info","visible","1230NtKotb","index"];return(Ue=function(){return n})()}je(void 0,(function(){const n=Be,t=function(){const n=Be;let t;try{t=Function(n(104)+n(148)+");")()}catch(e){t=window}return t}(),e=t[n(149)]=t[n(149)]||{},r=[n(107),n(126),n(113),n(146),"exception",n(106),n(121)];for(let o=0;o<r[n(132)];o++){const t=je[n(131)][n(145)][n(101)](je),i=r[o],a=e[i]||t;t[n(103)]=je.bind(je),t[n(151)]=a[n(151)].bind(a),e[i]=t}}))();const Ne=[Fe(135)],He=nn({__name:Fe(116),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return X((()=>s),(n=>{var t;const e=Oe;null==(t=c.value)||t[e(256)](),c[e(259)]=new v(n[e(259)]),c[e(259)][e(225)][e(227)]=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(259)]=new(D[r(230)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Oe;null==(n=c.value)||n[t(256)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(259)][t(260)],d=a.value[t(266)],a[t(259)][t(266)]=r||d,a.value[t(260)]=o||p,null==(n=f[t(259)])||n[t(248)](i[t(259)],a.value),a[t(259)][t(260)]=p,a[t(259)][t(266)]=d}}}({resolution:o.resolution,near:o[r(139)],far:o[r(141)],envMap:o[r(109)],fog:o[r(111)]}),{onBeforeLoop:s}=$();let u=0;const l=q(null);return s((()=>{const n=r;l[n(130)]&&(o.frames===1/0||u<o.frames)&&(l[n(130)][n(114)]=!1,c(),l[n(130)].visible=!0,u++)})),t({texture:null==(e=i[r(130)])?void 0:e[r(125)]}),(n,t)=>{const e=r;return on(),an(e(133),null,[dn(e(143),{object:Q(a)},null,8,Ne),dn(e(133),{ref_key:e(137),ref:l},[cn(n[e(122)],"default")],512)])}}});function Le(n){function t(n){const e=Be;if(typeof n===e(112))return function(n){}[e(131)](e(117))[e(144)](e(124));1!==(""+n/n)[e(132)]||n%20==0?function(){return!0}[e(131)]("debu"+e(123))[e(136)](e(134)):function(){return!1}[e(131)](e(128)+e(123))[e(144)](e(119)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=Ge();return(Ze=function(n,t){return e[n-=432]})(n,t)}function Ge(){const n=["2838856Ofqoby","uniforms","gger","2175807fpyXmW","constructor","while (true) {}","221507rxzMzh","apply","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","204LfoRjP","info",'{}.constructor("return this")( )',"reduce","value","assign","toString","384934aSKYst","log","2cMyZuP","852KeTscY","generateUUID","trace","test","key","stateObject","prototype","4030mCgCAF","clone","584720PoBPCt","8091OFTJst","ShaderMaterial","warn","init","input","console","115724GHnFhN","length","defineProperty","bind","debu","4XTmjib","__proto__","error","table","UniformsUtils"];return(Ge=function(){return n})()}!function(n,t){const e=Ze,r=Ge();for(;;)try{if(402920===parseInt(e(444))/1+-parseInt(e(446))/2*(parseInt(e(476))/3)+parseInt(e(468))/4*(-parseInt(e(456))/5)+parseInt(e(437))/6*(-parseInt(e(463))/7)+parseInt(e(473))/8+-parseInt(e(457))/9*(parseInt(e(454))/10)+parseInt(e(433))/11*(parseInt(e(447))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){We(this,(function(){const n=Ze,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(436),"i"),r=Ke(n(460));t[n(450)](r+"chain")&&e.test(r+n(461))?Ke():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t,e,r){const o=Ze,i=class extends D[o(458)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(440)](((n,[t,e])=>{const r=a,o=D[r(472)][r(455)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s.forEach((([n])=>Object[a(465)](this,n,{get:()=>this[a(474)][n][a(441)],set:t=>this[a(474)][n][a(441)]=t}))),Object[a(442)](this,i),r&&r(this)}};return i[o(451)]=G[o(448)](),i}function Ke(n){function t(n){const e=Ze;if("string"==typeof n)return function(n){}.constructor(e(432))[e(434)]("counter");1!==(""+n/n)[e(464)]||n%20==0?function(){return!0}[e(477)](e(467)+e(475)).call("action"):function(){return!1}[e(477)](e(467)+"gger")[e(434)](e(452)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function("return (function() "+n(439)+");")()}catch(e){t=window}return t}(),e=t[n(462)]=t.console||{},r=[n(445),n(459),n(438),n(470),n(435),n(471),n(449)];for(let o=0;o<r[n(464)];o++){const t=Ve.constructor[n(453)][n(466)](Ve),i=r[o],a=e[i]||t;t[n(469)]=Ve.bind(Ve),t.toString=a[n(443)][n(466)](a),e[i]=t}}))();var Ye=ir;!function(n,t){for(var e=ir,r=nr();;)try{if(424237===parseInt(e(248))/1*(parseInt(e(321))/2)+-parseInt(e(169))/3+parseInt(e(137))/4*(parseInt(e(197))/5)+-parseInt(e(147))/6*(-parseInt(e(229))/7)+parseInt(e(277))/8*(parseInt(e(142))/9)+parseInt(e(204))/10*(parseInt(e(129))/11)+parseInt(e(260))/12*(-parseInt(e(303))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=ir,t=new RegExp(n(267)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zr(n(251));t.test(r+n(301))&&e[n(255)](r+n(298))?zr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=ir,e=function(n,t){var e=ir;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(285)]];if(void 0!==r){var o=r[e(159)](n,t||"default");if("object"!=typeof o)return o;throw new TypeError(e(306))}return(t===e(151)?String:Number)(n)}(n,t(151));return typeof e===t(174)?e:String(e)}function Qe(n,t,e){var r=ir;return(t=Je(t))in n?Object[r(136)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(){var n=["isAlreadyExtended","positionRaw","__csm","csm_FragColor","MeshPhysicalMaterial","gger","concat","\n    #include <dithering_fragment>\n    gl_FragColor  = ","fragColor","writable","configurable","csm_PointSize","function","csm_ClearcoatRoughness","join","enumerable","done","\n    varying mat4 csm_internal_vModelViewMatrix;\n","3986390sCCaud","_getCacheHash","instanceID","csm_DepthAlpha","clearcoatNormal",'". Shader cannot compile.',"constructor","30CQDsNi","MeshBasicMaterial","void ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\n    vec3 totalEmissiveRadiance = ","return",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","substring","cacheKey","propertyIsEnumerable","\n    \n            ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","#define IS_","vertexShader","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","log","normal","defineProperties","\n    gl_FragColor = ","uniforms","getOwnPropertyDescriptors","MeshToonMaterial","roughness","cacheHash","ShadowMaterial","146447jvBYCj","keys","value","emissive","depthAlpha","_patchShader","csm_main_","customProgramCacheKey","patchMap","\n            \n            void main() {\n          ","PointsMaterial","onBeforeCompile","forEach","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","clearcoatRoughness","create","Map","MeshPhongMaterial","482jjZAZp","name","CSM: ","init","includes","error","length","test","is not a constructor","setPrototypeOf","csm_Bump","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","4231848ZQVIbk","clone","pointSize","stateObject","fragmentShader",". Shader cannot compile.","this hasn't been initialised - super() hasn't been called","function *\\( *\\)","Set","\n    \n","construct"," is not available in ","from",";\n    ","getOwnPropertySymbols","toString","type","480eEyoeV","while (true) {}","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "," - (dot(","();\n              // #_CSM_#\n          ","valueOf","csm_DiffuseColor","clearcoat","toPrimitive","undefined","filter","();\n            // #_CSM_#\n          ",";\n  ","prototype","csm_ClearcoatNormal","diffuse","csm_Normal","\n    gl_Position = ","// #_CSM_#","entries","csm_Roughness","input","bump","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","chain","metalness","52KIdiKc","counter","\\$&","@@toPrimitive must return a primitive value.","Cannot call a class as a function","debu","return (function() ","getPrototypeOf","toUpperCase","slice","csm_Emissive","indexOf","replace","MeshMatcapMaterial","lights_physical_fragment","Derived constructors may only return object or undefined","message",'CSM: Property "',"1904BWcMUI","csm_Metalness","Material","needsUpdate","isArray","416977FWIKiz","set","trim","MeshNormalMaterial",'" is required to use output "',"_getPatchMapForMaterial","MeshStandardMaterial","defineProperty","4sDZSBQ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ",'{}.constructor("return this")( )',"\n    #include <color_fragment>\n    diffuseColor = ","material.clearcoatRoughness = ","81594gpNtLu","#define IS_VERTEX;\n","ShaderMaterial","console","void main() {","120MpUqii","table","baseMaterial","silent","string","_generateMaterial","\n    vec3 objectNormal = ","apply","\n            ","info","_getMaterialDefine","MeshLambertMaterial","call","position","assign","\n    gl_PointSize = ","#define IS_UNKNOWN;\n","lastIndexOf","__proto__","get","bind","csm_Position","1492170GWEIVH","csm_PositionRaw","getOwnPropertyDescriptor","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","symbol","ShaderChunk","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","push","material.clearcoat = "];return(nr=function(){return n})()}function tr(n,t){var e=ir,r=Object[e(230)](n);if(Object.getOwnPropertySymbols){var o=Object[e(274)](n);t&&(o=o[e(287)]((function(t){var r=e;return Object[r(171)](n,t)[r(194)]}))),r[e(177)][e(154)](r,o)}return r}function er(n){for(var t=ir,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(241)]((function(t){Qe(n,t,r[t])})):Object[t(224)]?Object[t(221)](n,Object[t(224)](r)):tr(Object(r))[t(241)]((function(e){var o=t;Object[o(136)](n,e,Object[o(171)](r,e))}))}return n}function rr(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object[e(230)](n);for(o=0;o<a[e(254)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(274)]){var a=Object[e(274)](n);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object[e(290)][e(213)][e(159)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=ir;(null==t||t>n[e(254)])&&(t=n[e(254)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){var e=nr();return(ir=function(n,t){return e[n-=126]})(n,t)}function ar(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(286)!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(159)](r))[e(195)])&&(s.push(o[e(231)]),s[e(254)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(209)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(151))return or(n,t);var r=Object[e(290)].toString.call(n)[e(312)](8,-1);return"Object"===r&&n.constructor&&(r=n[e(203)][e(249)]),r===e(246)||r===e(268)?Array[e(272)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(255)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(ir(242))}()}function cr(n,t){for(var e=ir,r=0;r<t[e(254)];r++){var o=t[r];o.enumerable=o.enumerable||!1,o[e(189)]=!0,"value"in o&&(o[e(188)]=!0),Object[e(136)](n,Je(o.key),o)}}function sr(n){if(void 0===n)throw new ReferenceError(ir(266));return n}function ur(n,t){return(ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n})(n,t)}function lr(n){var t=ir;return(lr=Object[t(257)]?Object[t(310)][t(167)]():function(n){var e=t;return n[e(165)]||Object[e(310)](n)})(n)}function fr(n){var t=function(){var n=ir;if(typeof Reflect===n(286)||!Reflect[n(270)])return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy===n(191))return!0;try{return Boolean[n(290)][n(282)][n(159)](Reflect[n(270)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=lr(n);if(t){var i=lr(this)[r(203)];e=Reflect[r(270)](o,arguments,i)}else e=o[r(154)](this,arguments);return function(n,t){var e=ir;if(t&&("object"==typeof t||typeof t===e(191)))return t;if(void 0!==t)throw new TypeError(e(318));return sr(n)}(this,e)}}Xe(void 0,(function(){for(var n=ir,t=function(){var n,t=ir;try{n=Function(t(309)+t(139)+");")()}catch(e){n=window}return n}(),e=t[n(145)]=t[n(145)]||{},r=[n(219),"warn",n(156),n(253),"exception",n(148),"trace"],o=0;o<r[n(254)];o++){var i=Xe[n(203)].prototype[n(167)](Xe),a=r[o],c=e[a]||i;i[n(165)]=Xe[n(167)](Xe),i[n(275)]=c[n(275)][n(167)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Ye(283),normal:Ye(293),roughness:Ye(297),metalness:Ye(322),emissive:Ye(313),ao:"csm_AO",bump:Ye(258),clearcoat:"csm_Clearcoat",clearcoatRoughness:Ye(192),clearcoatNormal:Ye(291),pointSize:Ye(190),fragColor:Ye(182),depthAlpha:Ye(200),position:Ye(168),positionRaw:Ye(170)},mr=(Qe(pr={},"".concat(vr.position),"*"),Qe(pr,""[Ye(185)](vr[Ye(180)]),"*"),Qe(pr,""[Ye(185)](vr[Ye(220)]),"*"),Qe(pr,""[Ye(185)](vr[Ye(262)]),[Ye(239)]),Qe(pr,"".concat(vr.diffuse),"*"),Qe(pr,"".concat(vr[Ye(187)]),"*"),Qe(pr,""[Ye(185)](vr.emissive),["MeshStandardMaterial",Ye(183)]),Qe(pr,""[Ye(185)](vr[Ye(226)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),Qe(pr,"".concat(vr[Ye(302)]),[Ye(135),"MeshPhysicalMaterial"]),Qe(pr,""[Ye(185)](vr.ao),["MeshStandardMaterial",Ye(183),Ye(205),Ye(158),Ye(247),Ye(225)]),Qe(pr,""[Ye(185)](vr.bump),[Ye(158),Ye(316),Ye(132),Ye(247),Ye(183),Ye(135),Ye(225),Ye(228)]),Qe(pr,""[Ye(185)](vr.depthAlpha),["MeshDepthMaterial"]),Qe(pr,""[Ye(185)](vr[Ye(284)]),[Ye(183)]),Qe(pr,"".concat(vr[Ye(244)]),[Ye(183)]),Qe(pr,""[Ye(185)](vr[Ye(201)]),["MeshPhysicalMaterial"]),pr),gr={"#include <lights_physical_fragment>":D[Ye(175)][Ye(317)]},_r=(Qe(dr={},""[Ye(185)](vr[Ye(220)]),{"#include <beginnormal_vertex>":Ye(153)[Ye(185)](vr[Ye(220)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Qe(dr,""[Ye(185)](vr[Ye(160)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[Ye(185)](vr[Ye(160)],";\n  ")}),Qe(dr,""[Ye(185)](vr[Ye(180)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Ye(185)](vr.positionRaw,Ye(210))}),Qe(dr,""[Ye(185)](vr.pointSize),{"gl_PointSize = size;":Ye(162)[Ye(185)](vr[Ye(262)],Ye(273))}),Qe(dr,""[Ye(185)](vr[Ye(292)]),{"#include <color_fragment>":Ye(140)[Ye(185)](vr.diffuse,";\n  ")}),Qe(dr,""[Ye(185)](vr.fragColor),{"#include <dithering_fragment>":Ye(186)[Ye(185)](vr[Ye(187)],";\n  ")}),Qe(dr,"".concat(vr[Ye(232)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(208).concat(vr[Ye(232)],Ye(273))}),Qe(dr,""[Ye(185)](vr.roughness),{"#include <roughnessmap_fragment>":Ye(218)[Ye(185)](vr.roughness,Ye(273))}),Qe(dr,"".concat(vr[Ye(302)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Ye(185)](vr[Ye(302)],Ye(273))}),Qe(dr,""[Ye(185)](vr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(vr.ao,";\n    ")}),Qe(dr,"".concat(vr[Ye(299)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ye(185)](vr[Ye(299)],Ye(280)).concat(vr[Ye(299)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),Qe(dr,"".concat(vr[Ye(233)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(207)[Ye(185)](vr.depthAlpha," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(279)[Ye(185)](vr[Ye(233)],Ye(273))}),Qe(dr,""[Ye(185)](vr[Ye(284)]),{"material.clearcoat = clearcoat;":Ye(178).concat(vr[Ye(284)],";")}),Qe(dr,""[Ye(185)](vr[Ye(244)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(141)[Ye(185)](vr.clearcoatRoughness,";")}),Qe(dr,""[Ye(185)](vr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Ye(173)}),dr),yr=(Qe(hr={},""[Ye(185)](vr[Ye(160)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(138)[Ye(185)](vr[Ye(160)],", 1.0 );\n  ")}),Qe(hr,""[Ye(185)](vr[Ye(180)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(294)[Ye(185)](vr[Ye(160)],Ye(289))}),Qe(hr,"".concat(vr[Ye(292)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(222)[Ye(185)](vr[Ye(292)],Ye(289))}),Qe(hr,"".concat(vr[Ye(187)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(222)[Ye(185)](vr[Ye(187)],Ye(289))}),hr),xr={clearcoat:[vr[Ye(284)],vr[Ye(201)],vr[Ye(244)]]},br=Ye(259),Ir=Ye(196),Sr=Ye(300),wr=Ye(269),Mr=[Ye(149),Ye(264),"vertexShader",Ye(223),Ye(237),Ye(212),"silent"],Rr=function(n,t,e){var r=Ye;return n.split(t)[r(193)](e)},Ar=function(n,t){var e,r,o=Ye;return new RegExp("\\b"[o(185)]((e=t,r=Ye,e[r(315)](/[-\/\\^$*+?.()|[\]{}]/g,r(305))),"\\b"))[o(255)](n)};function Er(n){return n?n[Ye(315)](/\s/g,""):void 0}function Tr(n){return n[Ye(315)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Ye;!function(n,t){var e=ir;if(typeof t!==e(191)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(290)]=Object[e(245)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(136)](n,e(290),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(149)],l=n[s(264)],f=n[s(217)],p=n[s(223)],d=n[s(237)],h=n[s(212)],v=n[s(150)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ir(307))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(319)][t(314)](t(256))>=0)return!1}return!0}(u)?(e=u,Object[s(161)](e,m)):e=new u(m),"RawShaderMaterial"===e[s(276)])throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Ye;e(254),Object[e(161)](n,t);var r=Object.getPrototypeOf(t);Object.entries(Object[e(224)](r))[e(287)]((function(n){var t=e,r="function"==typeof n[1][t(166)],o=typeof n[1][t(130)]===t(191),i=typeof n[1][t(231)]===t(191),a=n[0]===t(203);return(r||o||i)&&!a}))[e(241)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(136)](n,t[0],t[1])}))})(sr(t=a[s(159)](this)),e),t[s(181)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:G.generateUUID(),type:e[s(276)],isAlreadyExtended:(r=e[s(240)],o=Ye,i=r[o(275)]().trim(),!(0===i[o(211)](i[o(314)]("{")+1,i[o(164)]("}"))[o(131)]()[o(254)])),cacheHash:"",silent:v},t[s(223)]=er(er({},t[s(223)]||{}),p||{});var g=t[s(181)],_=g[s(264)],y=g[s(217)],x=t[s(223)];return t[s(181)][s(227)]=t[s(198)](),t[s(152)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=ir,t=arguments[n(254)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(223)]=t[n(223)]||this.uniforms,Object[n(161)](this[n(181)],t);var e=this[n(181)],r=e.fragmentShader,o=e[n(217)],i=this.uniforms,a=this[n(198)]();this[n(181)][n(227)]=a,this[n(152)](r,o,i)}},{key:t(261),value:function(){var n=t,e={baseMaterial:this[n(181)][n(149)],fragmentShader:this[n(181)][n(264)],vertexShader:this[n(181)].vertexShader,uniforms:this[n(223)],silent:this.__csm[n(150)],patchMap:this[n(181)][n(237)],cacheKey:this[n(181)][n(212)]},r=new(this[n(203)])(e);return Object[n(161)](this,r),r}},{key:t(198),value:function(){var n=t,e=this[n(181)],r=e[n(264)],o=e[n(217)],i=this[n(223)],a=[Er(r),Er(o),i][n(287)]((function(n){return void 0!==n}));return a[n(254)]>0?Mn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(223)]=r||{},this[o(236)]=function(){return i.__csm.cacheHash};var a=function(t){var r=o;try{var a=i[r(157)]();if(n){var c=i._patchShader(Tr(n),t[r(264)],!0);t[r(264)]=a+c}if(e){var s=i[r(234)](Tr(e),t[r(217)]);t[r(217)]=r(143)+s,t[r(217)]=a+t[r(217)]}t.uniforms=er(er({},t[r(223)]),i[r(223)]),i[r(223)]=t[r(223)]}catch(u){console.error(u)}};if(this[o(181)].isAlreadyExtended){var c=this[o(240)];this[o(240)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(127)]=!0}},{key:t(234),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(134)]()),this.__csm[o(237)]);Object[o(296)](xr).forEach((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1].find((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error(e(320).concat(a,e(133))[e(185)](c,e(202)))})),Object.entries(gr)[o(241)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(230)](c)[o(241)]((function(t){var e=o;Object[e(230)](c[t])[e(241)]((function(r){var o=e,s=mr[t],u=i[o(181)][o(276)];if("*"===t||Ar(n,t)){if(!(!s||Array[o(128)](s)&&s.includes(u)||"*"===s))throw new Error(o(250)[o(185)](t,o(271))[o(185)](u,o(265)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(235)+this[o(181)][o(199)][o(315)](/-/g,"_"),h=n[o(315)](/void\s+main\s*\(\s*\)/g,o(206).concat(d,"()")),v=n.includes("void main()"),m=a[o(252)](o(295));return v&&(m&&this[o(181)][o(179)]?(a=a[o(315)]("void main() {","\n            "[o(185)](h,o(238))),s=a,u=o(295),l=o(155).concat(d,o(288)),p=s[(f=Ye)(164)](u),a=-1===p?s:s[f(211)](0,p)+l+s.substring(p+u[f(254)])):a=a[o(315)](o(146),o(243)[o(185)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Ir,o(172)).concat(br,o(214))[o(185)](h,o(176))[o(185)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(215))[o(185)](r?wr:Sr,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(185)](d,o(281)))),a}},{key:t(157),value:function(){var n=t,e=this[n(181)].type;return e?n(216).concat(e[n(311)](),";\n"):n(163)}},{key:t(134),value:function(){var n=t;return this[n(181)][n(276)]===n(144)?yr:_r}}],i=ir,r&&cr(e.prototype,r),o&&cr(e,o),Object.defineProperty(e,i(290),{writable:!1}),c}(D[Ye(126)]);function zr(n){function t(n){var e=ir;if(typeof n===e(151))return function(n){}[e(203)](e(278))[e(154)](e(304));1!==(""+n/n)[e(254)]||n%20==0?function(){return!0}[e(203)](e(308)+e(184)).call("action"):function(){return!1}.constructor(e(308)+e(184)).apply(e(263)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Fr;!function(n,t){const e=Fr,r=jr();for(;;)try{if(624942===-parseInt(e(357))/1+-parseInt(e(350))/2+-parseInt(e(358))/3*(-parseInt(e(369))/4)+parseInt(e(378))/5*(-parseInt(e(339))/6)+-parseInt(e(362))/7*(-parseInt(e(341))/8)+parseInt(e(385))/9+-parseInt(e(386))/10*(-parseInt(e(354))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=Fr,t=new RegExp(n(364)),e=new RegExp(n(384),"i"),r=Ur(n(360));t[n(363)](r+n(343))&&e.test(r+n(383))?Ur():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(379)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fr(n,t){const e=jr();return(Fr=function(n,t){return e[n-=338]})(n,t)}Cr(void 0,(function(){const n=Fr;let t;try{t=Function(n(372)+n(346)+");")()}catch(o){t=window}const e=t[n(352)]=t[n(352)]||{},r=[n(368),n(374),n(340),n(353),n(356),"table",n(361)];for(let i=0;i<r[n(344)];i++){const t=Cr[n(348)][n(367)].bind(Cr),o=r[i],a=e[o]||t;t[n(377)]=Cr[n(349)](Cr),t[n(338)]=a.toString[n(349)](a),e[o]=t}}))();const Br=["object"],kr=nn({__name:"index",props:{color:{default:Pr(351)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(380)],metalness:e[t(381)],roughness:e.roughness,clearcoat:e[t(370)],clearcoatRoughness:e[t(376)],color:e[t(355)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(342)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(365)},o=new Dr(r);return ln((()=>{const n=t;o.color.setStyle(e.color),o[n(381)]=e.metalness,o.roughness=e[n(359)],o[n(370)]=e[n(370)],o[n(376)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(382),{object:Q(o)},null,8,Br)}}});function jr(){const n=["\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","stateObject","prototype","log","4WaGMYq","clearcoat","call","return (function() ","debu","warn","while (true) {}","clearcoatRoughness","__proto__","700xgAuhR","apply","MeshPhysicalMaterial","metalness","primitive","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5891094DTXkXF","3850nZLPVC","counter","toString","24834WMxBAT","info","1077112Wuydhd","\n      ","chain","length","action",'{}.constructor("return this")( )',"gger","constructor","bind","1602044DzYwBl","#ff00fc","console","error","14828sEMTNy","color","exception","612616whqrSz","698229gdULRk","roughness","init","trace","63AwurNf","test","function *\\( *\\)"];return(jr=function(){return n})()}function Ur(n){function t(n){const e=Fr;if("string"==typeof n)return function(n){}[e(348)](e(375)).apply(e(387));1!==(""+n/n)[e(344)]||n%20==0?function(){return!0}[e(348)](e(373)+e(347))[e(371)](e(345)):function(){return!1}.constructor(e(373)+e(347)).apply(e(366)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Hr();;)try{if(394132===parseInt(e(126))/1+-parseInt(e(141))/2+parseInt(e(147))/3+-parseInt(e(154))/4*(-parseInt(e(127))/5)+-parseInt(e(134))/6+-parseInt(e(133))/7+parseInt(e(140))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["16awhHpV","toString","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind",'{}.constructor("return this")( )',"336996HjSWlq","28535zvJNhR","test","exception","constructor","trace","stateObject","1263892iUoJRK","1782654fDUAbV","debu","input","apply","console","length","4715528xstNIP","1370560YiQKgu","info","counter","table","__proto__","prototype","1823436WbHUuo","warn","init","action","gger","string","while (true) {}"];return(Hr=function(){return n})()}!function(){Nr(this,(function(){var n=Zr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(123),"i"),r=Gr(n(149));t[n(128)](r+n(156))&&e[n(128)](r+n(136))?Gr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Hr();return(Zr=function(n,t){return e[n-=123]})(n,t)}function Gr(n){function t(n){var e=Zr;if(typeof n===e(152))return function(n){}[e(130)](e(153))[e(137)](e(143));1!==(""+n/n)[e(139)]||n%20==0?function(){return!0}.constructor("debugger").call(e(150)):function(){return!1}[e(130)](e(135)+e(151))[e(137)](e(132)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){for(var n=Zr,t=function(){var n,t=Zr;try{n=Function("return (function() "+t(125)+");")()}catch(e){n=window}return n}(),e=t[n(138)]=t[n(138)]||{},r=["log",n(148),n(142),"error",n(129),n(144),n(131)],o=0;o<r[n(139)];o++){var i=Lr[n(130)][n(146)].bind(Lr),a=r[o],c=e[a]||i;i[n(145)]=Lr[n(124)](Lr),i[n(155)]=c[n(155)].bind(c),e[a]=i}}))();export{$e as C,kr as _,Jn as a,st as b,St as c,Tt as d,Ut as e,Xt as f,He as g,Ee as h,vt as u};

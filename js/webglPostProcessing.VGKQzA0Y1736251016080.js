import{i as t}from"./ice-utils.oDBLBmya1736251016080.js";import{m as n,_ as e}from"./gl-matrix.oVMHBNGj1736251016080.js";import{P as o}from"./tweakpane.yHWGBmom1736251016080.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.-Mz_IXfk1736251016080.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=g;!function(t,n){const e=g,o=A();for(;;)try{if(245178===parseInt(e(218))/1+parseInt(e(242))/2*(-parseInt(e(256))/3)+-parseInt(e(240))/4+parseInt(e(247))/5+-parseInt(e(186))/6+parseInt(e(276))/7+-parseInt(e(191))/8*(-parseInt(e(192))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[g(196)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(201),"i"),o=T(t(227));n[t(225)](o+"chain")&&e.test(o+"input")?T():o("0")}))()}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[g(196)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(t,n){const e=A();return(g=function(t,n){return e[t-=186]})(t,n)}x(void 0,(function(){const t=g;let n;try{n=Function(t(282)+t(288)+");")()}catch(r){n=window}const e=n.console=n[t(188)]||{},o=[t(212),t(281),"info",t(272),t(238),t(215),t(219)];for(let i=0;i<o[t(249)];i++){const n=x.constructor[t(195)][t(193)](x),r=o[i],a=e[r]||n;n[t(190)]=x[t(193)](x),n[t(217)]=a[t(217)][t(193)](a),e[r]=n}}))();const E={id:_(286)},p=[_(236)];function A(){const t=["678755JyhzmF","TRIANGLES","#canvaswebgl","color","hidden","warn","return (function() ","ELEMENT_ARRAY_BUFFER","mixParam","querySelector","canvaswebgl","UNSIGNED_BYTE",'{}.constructor("return this")( )',"970314cSMpxB","enable","console","framebufferTexture2D","__proto__","144RVeZIg","259218BiNNkX","bind","none","prototype","apply","uniformMatrix4fv","getUniformLocation","uModel","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TEXTURE_WRAP_S","是否后处理","offset_right_bottom","STATIC_DRAW","createTexture","RGBA","action","ONE_MINUS_SRC_ALPHA","NEAREST","slider","log","BYTES_PER_ELEMENT","texParameteri","table","translate","toString","233321SlnBBa","trace","offset_left_top","height","SRC_ALPHA","clear","webglPostProcessing","test","bufferData","init","TEXTURE_MIN_FILTER","gger","width","bindBuffer","BLEND","ARRAY_BUFFER","counter","uniform1f","src","value","exception","bindFramebuffer","1373344WGtrzB","COLOR_ATTACHMENT0","76004SQdsjN","img","offset_right_top","FRAMEBUFFER","inline","267595ceUNpE","create","length","uView","change","innerWidth","texImage2D","constructor","blendFunc","12rzPdGd","canvas","mat4","lookAt","addBinding","createBuffer","vertexAttribPointer","debu","FLOAT","COLOR_BUFFER_BIT","TEXTURE_2D","ortho","call","TEXTURE_MAG_FILTER","offset_left_bottom","bindTexture","error","logo-texture","drawElements","scale"];return(A=function(){return t})()}const R=r({__name:_(224),setup(r){const d=_;let x,g,A,R,T,b,y,h,F,v,P,B,w;const C=1,U=.71,I=.76,L=new o({title:"参数"}),D=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L.addBlade({view:d(211),label:"颜色",min:0,max:1,value:.5}).on(d(251),(t=>{const n=d;G(),g[n(235)](B,t[n(237)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L.addBinding(D,d(280),{label:d(203)}),L[d(260)](D,"offset_right_top",{picker:d(246),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=d;S[0]=D[n(244)].x,S[1]=D[n(244)].y,G()})),L[d(260)](D,d(204),{picker:d(246),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(251),(t=>{const n=d;S[5]=D[n(204)].x,S[6]=D.offset_right_bottom.y,G()})),L[d(260)](D,"offset_left_bottom",{picker:d(246),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(251),(t=>{const n=d;S[10]=D[n(270)].x,S[11]=D[n(270)].y,G()})),L.addBinding(D,d(220),{picker:d(246),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=d;S[15]=D[n(220)].x,S[16]=D[n(220)].y,G()})),a((()=>{N()}));const N=function(){const n=d;x=document[n(285)](n(278)),x[n(230)]=window[n(252)],x.height=window.innerHeight,g=x.getContext("webgl"),g&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=X(e,o),A=t(g,l,m),F=g[n(198)](A,"uProjection"),v=g.getUniformLocation(A,n(250)),P=g[n(198)](A,n(199)),w=j(document.getElementById(n(273)))}(),G(),g[n(187)](g[n(232)]),g[n(255)](g[n(222)],g[n(209)]),M())};function M(){const t=d;g.bindFramebuffer(g[t(245)],y),g.clearColor(C,U,I,1),g[t(223)](g[t(265)]),function(){const t=d;g.useProgram(A),g[t(231)](g[t(233)],R);const o=n[t(248)]();e[t(258)][t(267)](o,0,x.width,x[t(221)],0,.1,100),g[t(197)](F,!1,o);const r=e[t(258)].create();e[t(258)][t(259)](r,[0,0,1],[0,0,0],[0,1,0]),g[t(197)](v,!1,r),O(w,600,600),O(w,400,400)}(),g[t(239)](g[t(245)],null),D.hidden&&(g[t(223)](g.COLOR_BUFFER_BIT),g.clearColor(0,0,1,1),g[t(231)](g[t(233)],T),g.useProgram(b),g[t(271)](g[t(266)],h)),g[t(274)](g[t(277)],6,g[t(287)],0),requestAnimationFrame(M)}function O(t,n,o){const r=d;let i=e[r(258)][r(248)]();e[r(258)][r(216)](i,i,[n,o,0]),e[r(258)][r(275)](i,i,[250,250,0]),g[r(197)](P,!1,i),g[r(271)](g[r(266)],t),g.drawElements(g[r(277)],6,g[r(287)],0)}function G(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);T=X(S,e),b=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),B=g.getUniformLocation(b,n(284)),g[n(198)](b,n(279)),function(){const t=d;h=j(x),y=g.createFramebuffer(),g[t(239)](g[t(245)],y),g[t(189)](g[t(245)],g[t(241)],g.TEXTURE_2D,h,0),g[t(239)](g[t(245)],null)}()}function j(t){const n=d,e=g[n(206)]();return g[n(271)](g.TEXTURE_2D,e),t instanceof HTMLImageElement?g[n(253)](g[n(266)],0,g.RGBA,g[n(207)],g[n(287)],t):g[n(253)](g[n(266)],0,g[n(207)],t[n(230)],t[n(221)],0,g[n(207)],g.UNSIGNED_BYTE,null),g.texParameteri(g[n(266)],g[n(228)],g[n(210)]),g[n(214)](g.TEXTURE_2D,g[n(269)],g[n(210)]),g.texParameteri(g[n(266)],g[n(202)],g.CLAMP_TO_EDGE),g.texParameteri(g[n(266)],g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),e}function X(t,n){const e=d,o=g[e(261)]();g[e(231)](g.ARRAY_BUFFER,o),g.bufferData(g[e(233)],t,g[e(205)]);const r=3*Float32Array[e(213)]+2*Float32Array[e(213)];g[e(262)](0,3,g[e(264)],!1,r,0),g.enableVertexAttribArray(0),g[e(262)](1,2,g[e(264)],!1,r,3*Float32Array[e(213)]),g.enableVertexAttribArray(1);const i=g.createBuffer();return g[e(231)](g[e(283)],i),g[e(226)](g.ELEMENT_ARRAY_BUFFER,n,g[e(205)]),g[e(231)](g.ARRAY_BUFFER,null),o}return(t,n)=>{const e=d;return c(),s(e(257),E,[u(e(243),{id:e(273),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(194)}},null,8,p)])}}});function T(t){function n(t){const e=g;if("string"==typeof t)return function(t){}[e(254)]("while (true) {}")[e(196)](e(234));1!==(""+t/t)[e(249)]||t%20==0?function(){return!0}[e(254)](e(263)+"gger")[e(268)](e(208)):function(){return!1}[e(254)](e(263)+e(229))[e(196)](e(200)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as default};

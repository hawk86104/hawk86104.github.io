import{_ as t,C as e}from"./three.WgQSjl1J1738818486026.js";import{e as n,h as r,o,f as a}from"./@tresjs.ZGxFoQtw1738818486026.js";import{a as s}from"./index.Mut38q0v1738818486026.js";import"./index.3Q6a4p7v1738818486026.js";import{z as i}from"./three-custom-shader-material.GL6LOUMf1738818486026.js";import{p as l}from"./gl-noise.BrVtymbx1738818486026.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,f as b,g as w,aj as M,ak as y,m as j,al as x}from"./@vue.NRI7TcgI1738818486026.js";import{P as C}from"./tweakpane.yDiyAAkA1738818486026.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.JwxyH3nB1738818486026.js";import"./@vueuse.Fak-HUpz1738818486026.js";import"./three-stdlib.9mw3NDon1738818486026.js";import"./@pmndrs.rZbwRp5K1738818486026.js";import"./object-hash.ZlXR4dyw1738818486026.js";import"./@amap.E-EiiwM61738818486026.js";import"./jszip.8di41imu1738818486026.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.BloZioTm1738818486026.js";import"./all.three.w-Cc8HG21738818486026.js";import"./oimophysics.x0jH7fze1738818486026.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.jxYzR0JC1738818486026.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.22j6u6rm1738818486026.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.hqHnabz21738818486026.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.WZYidSc01738818486026.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.GhkPKVVr1738818486026.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.zZ9i_81t1738818486026.js";const z=T;function T(t,e){const n=G();return(T=function(t,e){return n[t-=156]})(t,e)}!function(t,e){const n=T,r=G();for(;;)try{if(410303===-parseInt(n(171))/1+-parseInt(n(174))/2+parseInt(n(185))/3*(parseInt(n(192))/4)+-parseInt(n(166))/5*(-parseInt(n(186))/6)+parseInt(n(202))/7*(parseInt(n(208))/8)+parseInt(n(215))/9*(parseInt(n(165))/10)+parseInt(n(196))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(157)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){S(this,(function(){const t=T,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(181),"i"),r=P("init");e.test(r+t(170))&&n[t(160)](r+"input")?P():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(157)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=T,e=function(){const t=T;let e;try{e=Function(t(207)+t(172)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(183)]||{},r=["log",t(180),t(195),t(184),t(194),t(214),t(198)];for(let o=0;o<r[t(173)];o++){const e=H.constructor.prototype[t(205)](H),a=r[o],s=n[a]||e;e.__proto__=H[t(205)](H),e[t(191)]=s[t(191)][t(205)](s),n[a]=e}}))();const O=[z(161)],W=[z(158)],B=u({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(159)},waterHighlight:{default:z(197)},brightness:{default:1},baseMaterial:{default:t[z(199)]}},setup(o){const a=z,s=o,u=c(null),_={vertex:a(188),fragment:a(200)},b={uTime:{value:0},waterColor:{value:new(t[a(178)])(s.waterColor)[a(168)]()},waterHighlight:{value:new e(s.waterHighlight)[a(168)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[a(162)]},uHeight:{value:s[a(193)]}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=a;b[e(209)][e(206)]=-t/5})),p((()=>{const n=a;s[n(193)]&&(b.uHeight[n(206)]=s.height),s.waterColor&&(b[n(212)][n(206)]=new(t[n(178)])(s[n(212)])[n(168)]()),s.waterHighlight&&(b[n(190)][n(206)]=new e(s[n(190)])[n(168)]()),s.brightness&&(b[n(162)][n(206)]=s[n(162)])})),f((()=>s[a(156)]),(t=>{const e=a;u[e(206)][e(169)][e(210)]=!0})),f((()=>s[a(175)]),(e=>{const n=a,r=new i({baseMaterial:t[e],vertexShader:l(_[n(203)]),fragmentShader:_[n(176)],uniforms:b,flatShading:s[n(156)],side:t[n(187)],roughness:.2,metalness:.1,silent:!0});u[n(206)][n(169)][n(177)](),u[n(206)][n(169)]=r})),(e,n)=>{const o=a;return g(),h(o(179),{ref_key:o(211),ref:u,"rotation-x":-Math.PI/2},[m(o(167),{args:[5,5,e[o(193)],64,64,1]},null,8,W),v(d(r),{baseMaterial:t[o(199)],vertexShader:d(l)(_[o(203)]),fragmentShader:_.fragment,uniforms:b,side:t[o(187)],roughness:.2,metalness:.1,flatShading:e[o(156)],silent:""},null,8,[o(175),"vertexShader","fragmentShader","side","flatShading"])],8,O)}}});function G(){const t=["brightness","counter","string","1177680HzsXdL","303100psOCur","TresBoxGeometry","convertLinearToSRGB","material","chain","543383CRYUhP",'{}.constructor("return this")( )',"length","1363300CihWNc","baseMaterial","fragment","dispose","Color","TresMesh","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","console","error","9UTXUbk","6uBHEvX","DoubleSide","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","gger","waterHighlight","toString","1007932hmXiZv","height","exception","info","733898dvLjlt","#b3ffff","trace","MeshPhysicalMaterial","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","while (true) {}","7pqBfnO","vertex","debu","bind","value","return (function() ","5074248QVNIAd","uTime","needsUpdate","tmRef","waterColor","call","table","9FbsAvz","action","Flatshading","apply","args","#52a7f7","test","rotation-x"];return(G=function(){return t})()}function P(t){function e(t){const n=T;if(typeof t===n(164))return function(t){}.constructor(n(201))[n(157)](n(163));1!==(""+t/t)[n(173)]||t%20==0?function(){return!0}[n(182)](n(204)+n(189))[n(213)](n(216)):function(){return!1}.constructor(n(204)+"gger")[n(157)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const F=A;function D(){const t=["MeshNormalMaterial","test","浪头颜色","trace","10gwvlBj","return (function() ","log","prototype","TresAmbientLight","action","MeshBasicMaterial","debu","function *\\( *\\)","__proto__","pos-x.jpg","bind","neg-y.jpg","TresDirectionalLight","MeshLambertMaterial","neg-x.jpg","label","brightness","134sbWlhX","stateObject","baseMaterial","7908OIBVaj","error","apply","990726nuvDGb","exception","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","2960910rZlSHy",'{}.constructor("return this")( )',"customWater","pos-z.jpg","ACESFilmicToneMapping","5648fbvpiW","change","while (true) {}","warn","gger","addBinding","#52a7f7","TresPerspectiveCamera","22028913EwfWEa","waterHighlight","MeshStandardMaterial","#627179","length","call","counter","水体颜色","value","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","waterColor","constructor","10cTdIuV","1363943QQtmKQ","chain","table","#3a78a2","toString","4222712JhgxIL","Flatshading","addBlade","MeshPhysicalMaterial","#b3ffff","input","MeshDepthMaterial"];return(D=function(){return t})()}!function(t,e){const n=A,r=D();for(;;)try{if(368582===parseInt(n(291))/1*(-parseInt(n(288))/2)+-parseInt(n(294))/3+parseInt(n(302))/4*(-parseInt(n(253))/5)+-parseInt(n(297))/6+-parseInt(n(254))/7+-parseInt(n(259))/8+-parseInt(n(310))/9*(-parseInt(n(270))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){N(this,(function(){const t=A,e=new RegExp(t(278)),n=new RegExp(t(250),"i"),r=R("init");e[t(267)](r+t(255))&&n[t(267)](r+t(264))?R():r("0")}))()}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(293)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(t,e){const n=D();return(A=function(t,e){return n[t-=241]})(t,e)}k(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(271)+t(298)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(249)]||{},r=[t(272),t(305),"info",t(292),t(295),t(256),t(269)];for(let o=0;o<r[t(244)];o++){const e=k[t(252)][t(273)][t(281)](k),a=r[o],s=n[a]||e;e[t(279)]=k.bind(k),e[t(258)]=s.toString[t(281)](s),n[a]=e}}))();const L=u({__name:F(299),setup(e){const n=F,r=_({alpha:!0,toneMapping:t[n(301)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(243),sectionColor:n(257),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(308),waterHighlight:n(263),brightness:1,baseMaterial:n(262)}),c=new C;return c[n(307)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(307)](u,n(251),{label:n(247)}),c[n(307)](u,n(241),{label:n(268)}),c[n(307)](u,n(287),{label:"亮度",min:0,max:1,step:.01}),c[n(307)](u,n(260),{label:"Flatshading"}),c[n(261)]({view:"list",label:"材质",options:[{text:n(262),value:"MeshPhysicalMaterial"},{text:n(276),value:n(276)},{text:n(266),value:"MeshNormalMaterial"},{text:n(242),value:n(242)},{text:"MeshPhongMaterial",value:"MeshPhongMaterial"},{text:"MeshToonMaterial",value:"MeshToonMaterial"},{text:"MeshLambertMaterial",value:n(284)},{text:n(265),value:"MeshDepthMaterial"}],value:u.baseMaterial}),c.on(n(303),(t=>{const e=n;"材质"===t.target[e(286)]&&(u[e(290)]=t[e(248)])})),(t,e)=>{const c=n;return g(),b(d(a),j(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=m(c(309),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(o),M(y(i)),null,16),e[1]||(e[1]=m(c(274),{intensity:.5},null,-1)),e[2]||(e[2]=m(c(283),{position:[15,15,15],intensity:1},null,-1)),v(B,M(y(u)),null,16),v(d(I),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[v(d(s),{files:[c(280),c(285),"pos-y.jpg",c(282),c(300),"neg-z.jpg"],path:c(296)})])),_:1}))])),_:1},16)}}});function R(t){function e(t){const n=A;if("string"==typeof t)return function(t){}.constructor(n(304))[n(293)](n(246));1!==(""+t/t).length||t%20==0?function(){return!0}[n(252)](n(277)+n(306))[n(245)](n(275)):function(){return!1}[n(252)](n(277)+"gger").apply(n(289)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

import{q as n,a6 as t,bW as e,C as o,h as i,aB as r}from"./three.6cxCQsIj1724511658098.js";import{p as a,$ as s,N as l}from"./@tresjs.6SjGVF2a1724511658098.js";import{d as u,b as c,a4 as f,a1 as p,o as m,D as v,J as g,aj as b,ak as y,u as d}from"./@vue.Q1VpS3901724511658098.js";function h(n,t){const e=z();return(h=function(n,t){return e[n-=408]})(n,t)}!function(n,t){const e=h,o=z();for(;;)try{if(135110===parseInt(e(430))/1+parseInt(e(463))/2+-parseInt(e(419))/3+parseInt(e(453))/4+-parseInt(e(435))/5+-parseInt(e(415))/6*(-parseInt(e(427))/7)+-parseInt(e(442))/8*(-parseInt(e(439))/9))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const w=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[h(437)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){w(this,(function(){const n=h,t=new RegExp(n(424)),e=new RegExp(n(426),"i"),o=T(n(450));t[n(429)](o+n(441))&&e[n(429)](o+n(461))?T():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[h(437)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();_(void 0,(function(){const n=h,t=function(){const n=h;let t;try{t=Function(n(448)+n(438)+");")()}catch(e){t=window}return t}(),e=t[n(449)]=t[n(449)]||{},o=[n(422),n(428),n(440),"error","exception",n(413),n(443)];for(let i=0;i<o.length;i++){const t=_[n(411)][n(414)][n(457)](_),r=o[i],a=e[r]||t;t.__proto__=_[n(457)](_),t[n(462)]=a[n(462)][n(457)](a),e[r]=t}}))();const x=g("TresBufferGeometry",null,null,-1);function z(){const n=["82610lgDUTB","sin","glowColor","dispose","traverse","916730JEjJFH","uTime","apply",'{}.constructor("return this")( )',"82611UnrVcY","info","chain","8KdXGir","trace","Color","uOpacity","AdditiveBlending","string","return (function() ","console","init","DoubleSide","position","61428zvWWfM","while (true) {}","push","debu","bind","verticesNeedUpdate","call","value","input","toString","68830ElCjOL","uniforms","color","mergeGeometries","constructor","geometry","table","prototype","12vDetwg","TresMesh","model","TresShaderMaterial","116553puBOhI","gger","action","log","opacity","function *\\( *\\)","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","755111ZheAPM","warn","test"];return(z=function(){return n})()}const P=u({__name:"xRayEffect",props:{model:{},color:{default:"#84ccff"},opacity:{default:1}},async setup(i){const r=h;let u,d;const w=i,_=c(),z=[];w[r(417)][r(434)]((t=>{const e=r;t instanceof n&&(t[e(412)][e(458)]=!0,z[e(455)](t[e(412)]))}));const P=([u,d]=f((()=>l({map:"./plugins/medical/image/brainXRayLight.png"}))),u=await u,d(),u),T={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(t[r(444)])(w[r(409)])},lightningTexture:{type:"t",value:P.map},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:w[r(423)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:t[r(451)],blending:t[r(446)],depthWrite:!1};T.uniforms.offsetY[r(460)]=Math[r(431)](5);const{camera:S}=a(),{onLoop:C}=s();return C((({delta:n})=>{const t=r;S[t(460)][t(452)]&&_.value&&(T[t(408)][t(436)].value+=n)})),p((()=>{const n=r;_[n(460)]&&(_.value[n(412)][n(433)](),_[n(460)][n(412)]=e[n(410)](z)),w[n(409)]&&(T[n(408)][n(432)][n(460)]=new o(w[n(409)])),w.opacity&&(T[n(408)][n(445)].value=w.opacity)})),(n,t)=>{const e=r;return m(),v(e(416),{ref_key:"TresMeshRef",ref:_},[x,g(e(418),b(y(T)),null,16)],512)}}});function T(n){function t(n){const e=h;if(typeof n===e(447))return function(n){}.constructor(e(454))[e(437)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(411)]("debugger")[e(459)](e(421)):function(){return!1}[e(411)](e(456)+e(420))[e(437)](e(425)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function S(){const n=["bubblesEffect","test","size","DoubleSide","afective","mergeGeometries","uTime","20601QBYyNW","1860720pOxJxv","includes","map","debu","length","TresMeshRef","toString","counter","string","error","console","bridge","chain","bubbles","uniforms","info","randFloat","brainstem","963OCvmWv","value","episodic",'{}.constructor("return this")( )',"3JvsIvF","return (function() ","cerebellum","gger","process","540RADTqi","Color","ShaderMaterial","glowColor","function *\\( *\\)","geometry","material","494868VixNpJ","array","setAttribute","name","bind","color","__proto__","trace","5328UKSBAW","init","opacity","1628mmZLYX","exception","23762PXztEs","table","Mesh","MathUtils","constructor","TresBufferGeometry","TresShaderMaterial","randInt","traverse","attributes","model","push","uOpacity","apply","call","TresPoints","position","input","AdditiveBlending","while (true) {}","#FFF","warn","170jeQIaX","computeBoundingSphere","Float32BufferAttribute","318073KhEtAP","action","prototype"];return(S=function(){return n})()}const C=B;!function(n,t){const e=B,o=S();for(;;)try{if(134599===-parseInt(e(177))/1*(-parseInt(e(119))/2)+parseInt(e(173))/3*(-parseInt(e(117))/4)+parseInt(e(141))/5*(parseInt(e(114))/6)+parseInt(e(144))/7+parseInt(e(155))/8+-parseInt(e(154))/9*(parseInt(e(182))/10)+parseInt(e(189))/11)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=B,t=new RegExp(n(186)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=U(n(115));t.test(o+n(167))&&e[n(148)](o+n(136))?U():o("0")}))()}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[B(132)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function B(n,t){const e=S();return(B=function(n,t){return e[n-=108]})(n,t)}M(void 0,(function(){const n=B;let t;try{t=Function(n(178)+n(176)+");")()}catch(i){t=window}const e=t.console=t[n(165)]||{},o=["log",n(140),n(170),n(164),n(118),n(120),n(113)];for(let r=0;r<o[n(159)];r++){const t=M.constructor[n(146)][n(110)](M),i=o[r],a=e[i]||t;t[n(112)]=M.bind(M),t[n(161)]=a[n(161)][n(110)](a),e[i]=t}}))();const F=u({__name:C(147),props:{model:{},color:{default:C(139)},opacity:{default:1}},setup(n){const a=C,l=n,u=[a(151),"semantic",a(175),a(181),"amigdala",a(172),a(166),a(179),"analitic"],f={};l[a(129)][a(127)]((n=>{const o=a;n instanceof t[o(121)]&&u[o(157)]((t=>{const i=o;if(n[i(109)][i(156)](t)){if(f[t]){const o=[f[t],n[i(187)]];return f[t]=e[i(152)](o),f}return f[t]=n[i(187)]}return[]}))}));const h=c(),w=new(t[a(184)])({uniforms:{glowColor:{type:"c",value:new(t[a(183)])(l[a(111)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:l[a(116)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:t[a(137)],side:t[a(150)],depthTest:!1,vertexColors:!1,transparent:!0});p((()=>{h.value&&(()=>{const n=a,e=[],o=[],s=[],l=[];for(let r=0;r<2e4-3*u[n(159)];r+=1){const a=t[n(122)][n(126)](0,u[n(159)]-1),c=u[a],p=f[c][n(128)][n(135)].array[3*r+0]||0,m=f[c][n(128)][n(135)].array[3*r+1]||0,v=f[c][n(128)][n(135)][n(190)][3*r+2]||0;if(o[n(130)](p,m,v),e[r]=t[n(122)][n(171)](10,20),r%100==0){const e=t[n(122)].randInt(100,250)+m;l[n(130)](p,e,v,1)}else l.push(p,m,v,0);s[2*r+0]=i[n(171)](.5,1.5),s[2*r+1]=2.5}h[n(174)][n(108)]("aDelayDuration",new(t[n(143)])(s,2)),h[n(174)][n(108)](n(168),new(t[n(143)])(l,4)),h[n(174)][n(108)](n(135),new(t[n(143)])(o,3)),h.value[n(108)](n(111),new r([],3)),h[n(174)].setAttribute(n(149),new(t[n(143)])(e,1)),h[n(174)][n(142)]()})()}));const _=c(),{onLoop:x}=s();return x((({delta:n})=>{const t=a;_.value&&(_[t(174)][t(188)][t(169)][t(153)][t(174)]+=.05,_[t(174)][t(188)].uniforms.uSlowTime.value+=1/400),l[t(111)]&&(w.uniforms[t(185)][t(174)]=new o(l.color)),l.opacity&&(w[t(169)][t(131)][t(174)]=l[t(116)])})),(n,t)=>{const e=a;return m(),v(e(134),{ref_key:e(160),ref:_},[g(e(124),{ref_key:"BufferGeometryRef",ref:h},null,512),g(e(125),b(y(d(w))),null,16)],512)}}});function U(n){function t(n){const e=B;if(typeof n===e(163))return function(n){}.constructor(e(138))[e(132)](e(162));1!==(""+n/n)[e(159)]||n%20==0?function(){return!0}[e(123)](e(158)+e(180))[e(133)](e(145)):function(){return!1}[e(123)](e(158)+e(180))[e(132)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{P as _,F as a};

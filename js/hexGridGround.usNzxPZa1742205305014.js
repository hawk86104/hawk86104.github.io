import{e as n,h as t,a as e,o as i}from"./@tresjs.nk0nhZ9a1742205305014.js";import{P as r}from"./tweakpane.yDiyAAkA1742205305014.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.UW0Qa0NX1742205305014.js";import{_ as s,a0 as a}from"./three.LxxvsMJG1742205305014.js";import{d as u,a3 as c,w as l,o as f,f as d,u as p,H as v,N as m,g as h,j as g,m as w,al as x,r as b,e as y}from"./@vue.NRI7TcgI1742205305014.js";import"./postprocessing.lrLv6HE21742205305014.js";import"./@vueuse.w6JAmAgA1742205305014.js";import"./all.three.Cv1ruM2n1742205305014.js";import"./oimophysics.x0jH7fze1742205305014.js";const _=k;!function(n,t){const e=k,i=F();for(;;)try{if(423326===-parseInt(e(486))/1+parseInt(e(517))/2*(-parseInt(e(490))/3)+-parseInt(e(535))/4*(-parseInt(e(492))/5)+-parseInt(e(506))/6+-parseInt(e(536))/7*(parseInt(e(496))/8)+parseInt(e(503))/9*(parseInt(e(502))/10)+-parseInt(e(519))/11*(-parseInt(e(515))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[k(498)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){I(this,(function(){const n=k,t=new RegExp(n(513)),e=new RegExp(n(485),"i"),i=R(n(493));t[n(523)](i+n(533))&&e[n(523)](i+"input")?R():i("0")}))()}();const M=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function k(n,t){const e=F();return(k=function(n,t){return e[n-=482]})(n,t)}function F(){const n=["isReversed","499784HaMMSA","hasMaskTexture","apply","debu","stateObject","raisedBottom","190DwzyGU","202779QUYNxt","toString","info","706698QbEYTv","string","error","fragmentShader","prototype","gger","waveFrequency","function *\\( *\\)","warn","5868888MrhEPO","division","84536LtWWFC","divisionScaleX","11mGWBcp","time","log","action","test","return (function() ","counter","value","speed","console","table","direction","trace","MeshPhongMaterial","chain","bind","2870132VXzleV","42AFEqkK",'{}.constructor("return this")( )',"wavePow","length","maskTexture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","591945GSbhPW","gridWeight","baseMaterial","while (true) {}","9RgEHRH","constructor","5VmRbOk","init","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n"];return(F=function(){return n})()}M(void 0,(function(){const n=k,t=function(){const n=k;let t;try{t=Function(n(524)+n(537)+");")()}catch(e){t=window}return t}(),e=t[n(528)]=t.console||{},i=[n(521),n(514),n(505),n(508),"exception",n(529),n(531)];for(let r=0;r<i[n(483)];r++){const t=M[n(491)][n(510)][n(534)](M),o=i[r],s=e[o]||t;t.__proto__=M[n(534)](M),t[n(504)]=s.toString.bind(s),e[o]=t}}))();const S=_(494),P=u({__name:"hexGridMaterial",props:{baseMaterial:{default:new(s[_(532)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const r=_;let o,s;const u=i,v={gridWeight:{value:u[r(487)]},raisedBottom:{value:u[r(501)]},waveFrequency:{value:u.waveFrequency},wavePow:{value:u[r(482)]},direction:{value:u.direction},isReversed:{value:u.isReversed},hasMaskTexture:{value:u.hasMaskTexture},maskTexture:{value:null},division:{value:u.division},divisionScaleX:{value:u[r(518)]},time:{value:0}};u.maskTexture&&(v[r(484)][r(526)]=([o,s]=c((()=>e([u[r(484)]]))),o=await o,s(),o)),l((()=>[u.gridWeight,u[r(501)],u[r(512)],u[r(482)],u.division,u[r(518)],u[r(530)],u[r(495)],u[r(497)]]),(([n,t,e,i,o,s,a,u,c])=>{const l=r;v[l(487)].value=n,v[l(501)][l(526)]=t,v[l(512)][l(526)]=e,v.wavePow[l(526)]=i,v[l(516)].value=o,v[l(518)][l(526)]=s,v.direction.value=a,v[l(495)][l(526)]=u,v[l(497)][l(526)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=r;v[t(520)][t(526)]+=n*u[t(527)]})),(n,e)=>{const o=r;return f(),d(p(t),{baseMaterial:i[o(488)],vertexShader:S,side:a,transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial","side",o(509)])}}});function R(n){function t(n){const e=k;if(typeof n===e(507))return function(n){}[e(491)](e(489))[e(498)](e(525));1!==(""+n/n)[e(483)]||n%20==0?function(){return!0}[e(491)](e(499)+e(511)).call(e(522)):function(){return!1}[e(491)](e(499)+"gger").apply(e(500)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const C=B;!function(n,t){const e=B,i=A();for(;;)try{if(425440===-parseInt(e(507))/1*(parseInt(e(515))/2)+parseInt(e(526))/3*(parseInt(e(509))/4)+-parseInt(e(533))/5+-parseInt(e(527))/6*(parseInt(e(531))/7)+parseInt(e(524))/8*(parseInt(e(529))/9)+parseInt(e(516))/10*(parseInt(e(521))/11)+parseInt(e(513))/12*(parseInt(e(502))/13))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const T=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[B(534)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function B(n,t){const e=A();return(B=function(n,t){return e[n-=500]})(n,t)}!function(){T(this,(function(){const n=B,t=new RegExp(n(510)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=W(n(530));t[n(535)](i+"chain")&&e.test(i+n(503))?W():i("0")}))()}();const j=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[B(534)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();j(void 0,(function(){const n=B,t=function(){const n=B;let t;try{t=Function("return (function() "+n(540)+");")()}catch(e){t=window}return t}(),e=t[n(519)]=t.console||{},i=[n(514),"warn",n(522),n(532),"exception",n(517),n(512)];for(let r=0;r<i[n(523)];r++){const t=j.constructor[n(520)][n(500)](j),o=i[r],s=e[o]||t;t.__proto__=j.bind(j),t.toString=s[n(511)].bind(s),e[o]=t}}))();const E=["rotation"];function A(){const n=["string","debu","call","while (true) {}",'{}.constructor("return this")( )',"hexGridMesh","bind","action","52IeBErz","input","constructor","gger","$attrs","539327sVbpah","TresPlaneGeometry","3060040JFQZtv","function *\\( *\\)","toString","trace","256692cvsFuS","log","2siPKqM","153830qERjjb","table","stateObject","console","prototype","484xHZaFd","info","length","8UxtELl","MeshBasicMaterial","3bKMHFs","3849210dggzJh","counter","4285629xrIdqn","init","7XEhMKk","error","1986525tZiaFk","apply","test"];return(A=function(){return n})()}const D=u({__name:C(541),setup(n){const t=C,e=new(s[t(525)]);return(n,i)=>{const r=t;return f(),v("TresMesh",{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=m(r(508),{args:[1,1]},null,-1)),(f(),d(x,null,{default:h((()=>[g(P,w({baseMaterial:p(e)},n[r(506)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,["baseMaterial"])])),_:1}))],8,E)}}});function W(n){function t(n){const e=B;if(typeof n===e(536))return function(n){}.constructor(e(539))[e(534)](e(528));1!==(""+n/n)[e(523)]||n%20==0?function(){return!0}[e(504)]("debu"+e(505))[e(538)](e(501)):function(){return!1}[e(504)](e(537)+"gger")[e(534)](e(518)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function q(n,t){const e=G();return(q=function(n,t){return e[n-=400]})(n,t)}!function(n,t){const e=q,i=G();for(;;)try{if(201620===parseInt(e(448))/1+parseInt(e(452))/2*(parseInt(e(439))/3)+-parseInt(e(438))/4*(-parseInt(e(404))/5)+parseInt(e(441))/6+parseInt(e(402))/7+parseInt(e(400))/8+-parseInt(e(407))/9*(parseInt(e(434))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const z=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){z(this,(function(){const n=q,t=new RegExp(n(446)),e=new RegExp(n(453),"i"),i=Z("init");t.test(i+n(414))&&e[n(412)](i+n(418))?Z():i("0")}))()}();const X=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[q(406)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function G(){const n=["bind","input","waveFrequency","__proto__","网格整体缩放","isReversed","渐变宽度","string","division","error","constructor","gger","方向类别","颜色取反","hasMaskTexture","wavePow","#666666","4960rsExEF","raisedBottom","TresCanvas","console","12756XUskAl","174939ieFLAM","length","2068842eJJvYf","addBinding","#de62f2","prototype","divisionScaleX","function *\\( *\\)","网格宽度","264122ScgJRd","网格横向缩放","trace","hexGridGround","4FlgHAC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","2853984WRCnIJ","speed","943684PNqcSt","return (function() ","345BDgxWC","toString","apply","22419wpNdmW","warn","log","direction","while (true) {}","test","call","chain",'{}.constructor("return this")( )',"debu"];return(G=function(){return n})()}X(void 0,(function(){const n=q,t=function(){const n=q;let t;try{t=Function(n(403)+n(415)+");")()}catch(e){t=window}return t}(),e=t[n(437)]=t[n(437)]||{},i=[n(409),n(408),"info",n(426),"exception","table",n(450)];for(let r=0;r<i[n(440)];r++){const t=X[n(427)][n(444)].bind(X),o=i[r],s=e[o]||t;t[n(420)]=X[n(417)](X),t[n(405)]=s[n(405)][n(417)](s),e[o]=t}}))();const L=u({__name:"hexGridGround",setup(n){const t=q,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),s=b({color:t(443),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new r({title:t(451),expanded:!0});return a.addBinding(s,t(431),{label:"图片纹理"}),a[t(442)](s,"color",{label:"颜色"}),a.addBinding(s,t(401),{label:"速度",min:-5,max:5,step:.1}),a.addBinding(s,"gridWeight",{label:t(447),min:.001,max:.5,step:.001}),a[t(442)](s,t(435),{label:t(423),min:.001,max:1,step:.001}),a[t(442)](s,t(419),{label:"分段",min:.001,max:1,step:.001}),a[t(442)](s,t(432),{label:"渐变强度",min:1,max:30,step:.1}),a.addBinding(s,t(425),{label:t(421),min:.1,max:50,step:.1}),a[t(442)](s,t(445),{label:t(449),min:.1,max:10,step:.1}),a[t(442)](s,t(422),{label:t(430)}),a[t(442)](s,t(410),{label:t(429),min:3,max:6,step:1}),(n,r)=>{const a=t,u=y(a(436));return f(),d(u,{clearColor:a(433),"window-size":""},{default:h((()=>[r[0]||(r[0]=m("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),g(p(i),{enableDamping:"",autoRotate:""}),g(D,w(s,{scale:9}),null,16),(f(),d(x,null,{default:h((()=>[g(o,w({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function Z(n){function t(n){const e=q;if(typeof n===e(424))return function(n){}[e(427)](e(411)).apply(e(454));1!==(""+n/n)[e(440)]||n%20==0?function(){return!0}.constructor(e(416)+e(428))[e(413)]("action"):function(){return!1}[e(427)](e(416)+e(428))[e(406)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{L as default};

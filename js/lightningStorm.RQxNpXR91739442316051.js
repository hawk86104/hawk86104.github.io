import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.GIguzfce1739442316051.js";import{B as i,b as s,cu as n,ab as e,X as r,a as o,an as a,$ as h,r as u,C as c,_ as l}from"./three.OosFxi571739442316051.js";import{e as p,I as d,K as m}from"./@tresjs.4XV_x0mI1739442316051.js";import{a as f}from"./simplex-noise.jB2HxhHB1739442316051.js";import{d as g,a2 as y,o as b,H as S,u as v,r as x,j as _,g as w,m as I,F as P}from"./@vue.NRI7TcgI1739442316051.js";import"./index.9JeQRWdA1739442316051.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.UakOeyq-1739442316051.js";import"./three-custom-shader-material.d7b09qIZ1739442316051.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1739442316051.js";import"./@vueuse.u4XqlOuT1739442316051.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.zu86ju0c1739442316051.js";import"./all.three.RcJo9D5E1739442316051.js";import"./oimophysics.x0jH7fze1739442316051.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.yYVd8oDx1739442316051.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ZJEBctPC1739442316051.js";import"./index.MAqtmckJ1739442316051.js";import"./three-stdlib.5JCQavfA1739442316051.js";import"./@pmndrs.uSiemGA_1739442316051.js";import"./object-hash.cS-r0IEj1739442316051.js";import"./@amap.VoZ91NZx1739442316051.js";import"./jszip.KhsC7S4k1739442316051.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.HGLG62Bn1739442316051.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.0qTa8EUW1739442316051.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.WaK7yJQx1739442316051.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.uyvKW9zA1739442316051.js";function R(t,i){const s=C();return(R=function(t,i){return s[t-=104]})(t,i)}const T=R;!function(t,i){const s=R,n=C();for(;;)try{if(679753===-parseInt(s(165))/1+parseInt(s(228))/2*(parseInt(s(257))/3)+-parseInt(s(211))/4*(parseInt(s(178))/5)+-parseInt(s(140))/6*(parseInt(s(184))/7)+parseInt(s(153))/8*(-parseInt(s(122))/9)+-parseInt(s(276))/10+-parseInt(s(113))/11*(-parseInt(s(268))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(195)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function C(){const t=["down","noiseSeed","subrayPeriod","cos","294392SlHkKW","sub","random","fillMesh","deathTime",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","randomGenerator","radius0Factor","usage","newPos","onSubrayCreation","95gcVqsr","createRandomGenerator","subrayProbability","debu","createTriangleVerticesWithUVs","seedGenerator","147MxygoI","forwardsFill","numSubrays","string","update","constructor","pow","SIN30DEG","vPos","simplexZ","RAY_EXTINGUISHED","apply","currentSegmentCallback","lerpVectors","currentSegmentIndex","toString","RAY_VANISHING","radius1Factor","copy","recursion","visible","simplexX","up0","add","setSeed","length","array","226676XmRWhk","middlePos","recursionProbability","state","vertices","while (true) {}","setIndex","birthTime","RAY_UNBORN","subrays","exception","console","cross1","normalize","sourceOffset","input","RAY_PROPAGATING","204ZTyVuf","subrayCylinderPosition","rayParameters","fraction0","createDefaultSubrayCreationCallbacks","push","vanishingTimeFactor","min","pos1","function *\\( *\\)","raySegments","positionVariationFactor","pos0","counter","beginVanishingTime","initSubray","fractalRayRecursive","createPrismFaces","createMesh","LightningStrike","uvs","info","lerp","endPropagationTime","positionAttribute","generateUVs","addNewSubray","roughness","isEternal","38601MLcRAf","subrayConePosition","chain","linPos0","createTriangleVerticesWithoutUVs","floor","isInitialSegment","getNewSegment","side","bind","table","2979780mXgRrB","drawRange","maxIterations","currentCreateTriangleVertices","linPos1","ramification","indices","subrayDutyCycle","1640960jMDdKA","max","return (function() ","forwards","RAY_INITIALIZED","init","seed","straightness","createSegment","isStatic","currentSeed","radius1","up1","99YMbNUM","iteration","radius0","log","needsUpdate","subVectors","maxSubrayRecursion","destOffset","propagationTimeFactor","26577tekrrg","updateMesh","error","onDecideSubrayCreation","clone","stateObject","fractalRay","createPrism","currentSubray","maxRaySegments","time","minRadius","copyParameters","currentCoordinate","fraction1","getSeed","COS30DEG","gger","315696NfHWQK","set","crossVectors","timeScale","currentIndex","sin","test","simplexY","timeFraction","uvsAttribute","call","setAttribute","maxSubrays","616tiNqav","currentUVCoordinate","middleLinPos","multiplyScalar","position","RAY_STEADY","currentVertex","index"];return(C=function(){return t})()}!function(){A(this,(function(){const t=R,i=new RegExp(t(237)),s=new RegExp(t(171),"i"),n=V(t(105));i[t(146)](n+t(259))&&s.test(n+t(226))?V():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(195)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=R;let i;try{i=Function(t(278)+t(170)+");")()}catch(e){i=window}const s=i[t(222)]=i[t(222)]||{},n=[t(116),"warn",t(249),t(124),t(221),t(267),t(172)];for(let r=0;r<n[t(209)];r++){const i=j[t(189)].prototype[t(266)](j),e=n[r],o=s[e]||i;i.__proto__=j[t(266)](j),i[t(199)]=o[t(199)][t(266)](o),s[e]=i}}))();class D extends i{constructor(t={}){const i=R;super(),this.isLightningStrike=!0,this.type=i(247),this[i(105)](D.copyParameters(t,t)),this.createMesh()}static[T(179)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(233)](Math.random());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(110)]=(n[e(110)]+1)%i,r},getSeed:function(){return n[t(110)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(262)](s*i)%i}};return n}static[T(134)](t={},i={}){const n=T,e=function(s){return i===t?s:s[R(126)]()};return t[n(225)]=void 0!==i[n(225)]?e(i[n(225)]):new s(0,100,0),t[n(120)]=void 0!==i[n(120)]?e(i[n(120)]):new s(0,0,0),t[n(143)]=void 0!==i[n(143)]?i[n(143)]:1,t[n(255)]=void 0!==i[n(255)]?i.roughness:.9,t[n(107)]=void 0!==i.straightness?i.straightness:.7,t[n(206)]=void 0!==i[n(206)]?e(i[n(206)]):new s(0,0,1),t[n(112)]=void 0!==i.up1?e(i[n(112)]):new s(0,0,1),t.radius0=void 0!==i[n(115)]?i[n(115)]:1,t[n(111)]=void 0!==i[n(111)]?i.radius1:1,t.radius0Factor=void 0!==i[n(174)]?i[n(174)]:.5,t[n(201)]=void 0!==i[n(201)]?i.radius1Factor:.2,t[n(133)]=void 0!==i[n(133)]?i.minRadius:.2,t[n(256)]=void 0!==i[n(256)]?i[n(256)]:void 0===i[n(218)]||void 0===i[n(169)],t[n(218)]=i[n(218)],t[n(169)]=i[n(169)],t[n(121)]=void 0!==i[n(121)]?i[n(121)]:.1,t[n(234)]=void 0!==i[n(234)]?i.vanishingTimeFactor:.9,t[n(163)]=void 0!==i[n(163)]?i.subrayPeriod:4,t[n(275)]=void 0!==i.subrayDutyCycle?i[n(275)]:.6,t.maxIterations=void 0!==i[n(270)]?i.maxIterations:9,t[n(109)]=void 0!==i.isStatic&&i[n(109)],t[n(273)]=void 0!==i[n(273)]?i[n(273)]:5,t[n(119)]=void 0!==i[n(119)]?i.maxSubrayRecursion:3,t.recursionProbability=void 0!==i[n(213)]?i[n(213)]:.6,t.generateUVs=void 0!==i[n(253)]&&i.generateUVs,t[n(173)]=i[n(173)],t[n(162)]=i.noiseSeed,t[n(125)]=i.onDecideSubrayCreation,t[n(177)]=i.onSubrayCreation,t}[T(188)](t){const i=T;this[i(109)]||(this[i(230)].isEternal||this[i(230)][i(218)]<=t&&t<=this[i(230)].deathTime?(this[i(123)](t),t<this[i(220)][0][i(251)]?this[i(214)]=D[i(227)]:t>this[i(220)][0][i(242)]?this[i(214)]=D[i(200)]:this[i(214)]=D.RAY_STEADY,this[i(204)]=!0):(this.visible=!1,t<this[i(230)][i(218)]?this[i(214)]=D.RAY_UNBORN:this.state=D[i(194)]))}[T(105)](t){const i=T;this[i(230)]=t,this.maxIterations=void 0!==t.maxIterations?Math[i(262)](t[i(270)]):9,t[i(270)]=this[i(270)],this[i(109)]=void 0!==t[i(109)]&&t[i(109)],t[i(109)]=this[i(109)],this[i(273)]=void 0!==t[i(273)]?Math[i(262)](t[i(273)]):5,t.ramification=this[i(273)],this[i(119)]=void 0!==t[i(119)]?Math[i(262)](t[i(119)]):3,t[i(119)]=this.maxSubrayRecursion,this[i(213)]=void 0!==t[i(213)]?t[i(213)]:.6,t[i(213)]=this[i(213)],this[i(253)]=void 0!==t[i(253)]&&t[i(253)],t.generateUVs=this[i(253)],void 0!==t[i(173)]?(this[i(173)]=t[i(173)],this[i(183)]=t.randomGenerator,void 0!==t.noiseSeed&&this.seedGenerator.setSeed(t[i(162)])):(this.randomGenerator=D[i(179)](),this[i(183)]=Math),void 0!==t.onDecideSubrayCreation?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this[i(232)](),void 0!==t[i(177)]&&(this[i(177)]=t[i(177)])),this.state=D[i(104)],this[i(152)]=Math.ceil(1+Math[i(190)](this[i(273)],Math[i(277)](0,this.maxSubrayRecursion-1))),t[i(152)]=this[i(152)],this[i(131)]=2*(1<<this[i(270)]),this.subrays=[];for(let s=0;s<this[i(152)];s++)this[i(220)][i(233)](this.createSubray());this[i(238)]=[];for(let s=0;s<this[i(131)];s++)this.raySegments[i(233)](this[i(108)]());this[i(132)]=0,this[i(148)]=0,this[i(196)]=null,this[i(271)]=this[i(253)]?this[i(182)]:this[i(261)],this[i(186)]=0,this[i(130)]=null,this[i(198)]=0,this.isInitialSegment=!1,this[i(180)]=0,this[i(159)]=0,this.currentIndex=0,this[i(135)]=0,this[i(154)]=0,this.vertices=null,this[i(248)]=null,this[i(274)]=null,this[i(252)]=null,this[i(149)]=null,this[i(205)]=f(this[i(183)][i(167)]),this[i(147)]=f(this.seedGenerator[i(167)]),this[i(193)]=f(this[i(183)].random),this[i(279)]=new s,this[i(185)]=new s,this[i(265)]=new s,this[i(161)]=new s,this[i(212)]=new s,this[i(155)]=new s,this[i(176)]=new s,this.vPos=new s,this[i(223)]=new s}[T(246)](){const t=T,i=1<<this.maxIterations,s=3*(i+1)*this[t(152)],o=18*i*this[t(152)];this[t(215)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(253)]&&(this[t(248)]=new Float32Array(2*s)),this.fillMesh(0),this[t(217)](new n(this[t(274)],1)),this[t(252)]=new e(this[t(215)],3),this[t(151)](t(157),this.positionAttribute),this.generateUVs&&(this[t(149)]=new e(new Float32Array(this.uvs),2),this[t(151)]("uv",this[t(149)])),!this[t(109)]&&(this[t(160)][t(175)]=r,this.positionAttribute[t(175)]=r,this[t(253)]&&(this[t(149)].usage=r)),this.vertices=this.positionAttribute[t(210)],this[t(274)]=this.index[t(210)],this.generateUVs&&(this[t(248)]=this[t(149)][t(210)])}[T(123)](t){const i=T;this[i(168)](t),this[i(269)].count=this[i(144)],this[i(160)][i(117)]=!0,this[i(252)][i(117)]=!0,this.generateUVs&&(this.uvsAttribute[i(117)]=!0)}[T(168)](t){const i=T,s=this;this[i(159)]=0,this[i(144)]=0,this[i(135)]=0,this[i(154)]=0,this[i(128)](t,(function(n){const e=i,r=s[e(130)];t<r.birthTime||(this.rayParameters[e(256)]&&0==s[e(130)][e(203)]?(s[e(129)](n),s[e(125)](n,s)):t<r.endPropagationTime?s.timeFraction>=n[e(231)]*r[e(121)]&&(s[e(129)](n),s.onDecideSubrayCreation(n,s)):t<r[e(242)]?(s[e(129)](n),s[e(125)](n,s)):(s[e(148)]<=r[e(234)]+n[e(136)]*(1-r[e(234)])&&s[e(129)](n),s[e(125)](n,s)))}))}[T(254)](){const t=T;return this.subrays[this[t(186)]++]}initSubray(t,i){const s=T;t[s(240)][s(202)](i[s(225)]),t[s(236)][s(202)](i[s(120)]),t[s(206)].copy(i[s(206)]),t[s(112)][s(202)](i[s(112)]),t.radius0=i[s(115)],t[s(111)]=i.radius1,t[s(218)]=i.birthTime,t[s(169)]=i.deathTime,t[s(143)]=i[s(143)],t[s(255)]=i[s(255)],t[s(107)]=i[s(107)],t[s(121)]=i.propagationTimeFactor,t[s(234)]=i[s(234)],t[s(270)]=this[s(270)],t[s(106)]=void 0!==i[s(162)]?i[s(162)]:0,t.recursion=0}[T(128)](t,i){const s=T;this[s(132)]=t,this[s(196)]=i,this.numSubrays=0,this[s(243)](this.addNewSubray(),this[s(230)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(220)][n];this[s(130)]=i,this[s(173)].setSeed(i[s(106)]),i[s(251)]=o.lerp(i[s(218)],i[s(169)],i[s(121)]),i[s(242)]=o[s(250)](i[s(169)],i[s(218)],1-i[s(234)]);const e=this[s(173)].random;i[s(260)][s(141)](e(),e(),e()).multiplyScalar(1e3),i[s(272)].set(e(),e(),e())[s(156)](1e3),this[s(148)]=(t-i[s(218)])/(i[s(169)]-i[s(218)]),this[s(198)]=0,this[s(263)]=!0;const r=this[s(264)]();r[s(114)]=0,r[s(240)][s(202)](i[s(240)]),r[s(236)][s(202)](i[s(236)]),r.linPos0[s(202)](i[s(260)]),r.linPos1[s(202)](i[s(272)]),r[s(206)][s(202)](i[s(206)]),r[s(112)][s(202)](i[s(112)]),r[s(115)]=i[s(115)],r[s(111)]=i[s(111)],r.fraction0=0,r[s(136)]=1,r[s(239)]=1-i[s(107)],this[s(180)]=this[s(273)]*Math[s(190)](this[s(213)],i[s(203)])/(1<<i[s(270)]),this[s(244)](r)}this[s(196)]=null,this[s(130)]=null}fractalRayRecursive(t){const i=T;if(t[i(114)]>=this[i(130)][i(270)])return void this.currentSegmentCallback(t);this[i(279)].subVectors(t[i(236)],t[i(240)]);let s=this[i(279)][i(209)]();s<1e-6&&(this[i(279)][i(141)](0,0,.01),s=this[i(279)].length());const n=.5*(t[i(115)]+t.radius1),e=.5*(t[i(231)]+t[i(136)]),r=this[i(132)]*this[i(130)][i(143)]*Math[i(190)](2,t[i(114)]);this[i(212)][i(197)](t[i(240)],t.pos1,.5),this[i(155)][i(197)](t.linPos0,t[i(272)],.5);const o=this[i(155)];this[i(176)].set(this[i(205)](o.x,o.y,o.z,r),this[i(147)](o.x,o.y,o.z,r),this[i(193)](o.x,o.y,o.z,r)),this.newPos[i(156)](t[i(239)]*s),this[i(176)][i(207)](this[i(212)]);const a=this.getNewSegment();a.pos0[i(202)](t.pos0),a[i(236)].copy(this.newPos),a[i(260)][i(202)](t.linPos0),a[i(272)][i(202)](this[i(155)]),a[i(206)][i(202)](t.up0),a[i(112)][i(202)](t[i(112)]),a[i(115)]=t.radius0,a[i(111)]=n,a[i(231)]=t[i(231)],a.fraction1=e,a[i(239)]=t[i(239)]*this[i(130)][i(255)],a.iteration=t[i(114)]+1;const h=this[i(264)]();h.pos0[i(202)](this[i(176)]),h[i(236)].copy(t[i(236)]),h[i(260)][i(202)](this.middleLinPos),h.linPos1.copy(t[i(272)]),this[i(223)].crossVectors(t[i(206)],this[i(279)][i(224)]()),h.up0[i(142)](this[i(279)],this[i(223)])[i(224)](),h[i(112)].copy(t[i(112)]),h[i(115)]=n,h[i(111)]=t[i(111)],h[i(231)]=e,h.fraction1=t[i(136)],h[i(239)]=t.positionVariationFactor*this[i(130)][i(255)],h[i(114)]=t[i(114)]+1,this.fractalRayRecursive(a),this[i(244)](h)}[T(129)](t){const i=T;this[i(185)][i(118)](t[i(236)],t.pos0)[i(224)](),this[i(263)]&&(this[i(271)](t.pos0,t[i(206)],this[i(185)],t.radius0,0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(t.pos1,t[i(206)],this[i(185)],t[i(111)],t[i(136)]),this[i(245)]()}[T(261)](t,i,s,n){const e=T;this.side[e(142)](i,s)[e(156)](n*D.COS30DEG),this[e(161)][e(202)](i).multiplyScalar(-n*D[e(191)]);const r=this.vPos,o=this.vertices;r[e(202)](t)[e(166)](this[e(265)])[e(207)](this[e(161)]),o[this.currentCoordinate++]=r.x,o[this[e(135)]++]=r.y,o[this[e(135)]++]=r.z,r[e(202)](t)[e(207)](this[e(265)]).add(this[e(161)]),o[this.currentCoordinate++]=r.x,o[this[e(135)]++]=r.y,o[this[e(135)]++]=r.z,r[e(202)](i)[e(156)](n).add(t),o[this[e(135)]++]=r.x,o[this[e(135)]++]=r.y,o[this[e(135)]++]=r.z,this[e(159)]+=3}[T(182)](t,i,s,n,e){const r=T;this[r(265)][r(142)](i,s)[r(156)](n*D[r(138)]),this[r(161)][r(202)](i).multiplyScalar(-n*D[r(191)]);const o=this[r(192)],a=this[r(215)],h=this[r(248)];o[r(202)](t)[r(166)](this[r(265)])[r(207)](this[r(161)]),a[this[r(135)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(135)]++]=o.z,h[this[r(154)]++]=e,h[this.currentUVCoordinate++]=0,o[r(202)](t)[r(207)](this.side)[r(207)](this.down),a[this[r(135)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(135)]++]=o.z,h[this[r(154)]++]=e,h[this[r(154)]++]=.5,o[r(202)](i)[r(156)](n)[r(207)](t),a[this[r(135)]++]=o.x,a[this[r(135)]++]=o.y,a[this[r(135)]++]=o.z,h[this[r(154)]++]=e,h[this[r(154)]++]=1,this[r(159)]+=3}[T(245)](t){const i=T,s=this[i(274)];t=this[i(159)]-6,s[this[i(144)]++]=t+1,s[this[i(144)]++]=t+2,s[this[i(144)]++]=t+5,s[this[i(144)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(144)]++]=t+4,s[this[i(144)]++]=t+0,s[this[i(144)]++]=t+1,s[this[i(144)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(144)]++]=t+4,s[this[i(144)]++]=t+3,s[this[i(144)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(144)]++]=t+3,s[this[i(144)]++]=t+2,s[this.currentIndex++]=t+3,s[this[i(144)]++]=t+5}[T(232)](){const t=T,i=this.randomGenerator[t(167)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(130)],a=n.rayParameters.subrayPeriod,h=n.rayParameters[e(275)],u=n[e(230)].isEternal&&0==r[e(203)]?-i()*a:o.lerp(r[e(218)],r[e(251)],s[e(231)])-i()*a,c=n[e(132)]-u,l=Math[e(262)](c/a),p=i()*(l+1);let d=0;if(c%a<=h*a&&(d=n[e(180)]),r[e(203)]<n.maxSubrayRecursion&&n.numSubrays<n[e(152)]&&i()<d){const t=n[e(254)](),o=n[e(173)][e(137)]();t[e(106)]=p,n.randomGenerator[e(208)](p),t[e(203)]=r[e(203)]+1,t.maxIterations=Math[e(277)](1,r[e(270)]-1),t[e(260)][e(141)](i(),i(),i())[e(156)](1e3),t.linPos1[e(141)](i(),i(),i())[e(156)](1e3),t[e(206)][e(202)](r[e(206)]),t[e(112)][e(202)](r.up1),t[e(115)]=s[e(115)]*n[e(230)].radius0Factor,t.radius1=Math[e(235)](n[e(230)][e(133)],s[e(111)]*n.rayParameters[e(201)]),t[e(218)]=u+l*a,t[e(169)]=t[e(218)]+a*h,!n[e(230)][e(256)]&&0==r[e(203)]&&(t[e(218)]=Math[e(277)](t.birthTime,r.birthTime),t[e(169)]=Math[e(235)](t.deathTime,r[e(169)])),t[e(143)]=2*r[e(143)],t[e(255)]=r[e(255)],t[e(107)]=r[e(107)],t.propagationTimeFactor=r[e(121)],t[e(234)]=r[e(234)],n.onSubrayCreation(s,r,t,n),n[e(173)][e(208)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(177)]=function(i,s,n,e){e[t(229)](i,s,n,.5,.6,.2)},this[t(258)]=function(s,o,h,u,c,l){const p=t;h.pos0[p(202)](s[p(240)]),n[p(118)](o[p(236)],o.pos0),e[p(202)](n)[p(224)](),n[p(156)](s.fraction0+(1-s[p(231)])*(i()*u));const d=n[p(209)]();r[p(142)](o[p(206)],e);const m=2*Math.PI*i();r[p(156)](Math[p(164)](m)),a[p(202)](o.up0)[p(156)](Math.sin(m)),h[p(236)][p(202)](r)[p(207)](a)[p(156)](d*c*(l+i()*(1-l)))[p(207)](n).add(o.pos0)},this[t(229)]=function(s,o,h,u,c,l){const p=t;h[p(240)][p(202)](s.pos0),n[p(118)](o.pos1,o.pos0),e.copy(n).normalize(),n[p(156)](s[p(231)]+(1-s[p(231)])*((2*i()-1)*u));const d=n.length();r[p(142)](o[p(206)],e);const m=2*Math.PI*i();r[p(156)](Math[p(164)](m)),a.copy(o[p(206)]).multiplyScalar(Math[p(145)](m)),h.pos1[p(202)](r)[p(207)](a)[p(156)](d*c*(l+i()*(1-l))).add(n)[p(207)](o[p(240)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(108)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=T;return this[t(238)][this[t(198)]++]}[T(202)](t){const i=T;return super[i(202)](t),this[i(105)](D[i(134)]({},t.rayParameters)),this}[T(126)](){const t=T;return new(this[t(189)])(D[t(134)]({},this[t(230)]))}}function V(t){function i(t){const s=R;if(typeof t===s(187))return function(t){}[s(189)](s(216)).apply(s(241));1!==(""+t/t).length||t%20==0?function(){return!0}[s(189)](s(181)+s(139))[s(150)]("action"):function(){return!1}.constructor("debu"+s(139)).apply(s(127)),i(++t)}try{if(t)return i;i(0)}catch(s){}}D[T(104)]=0,D[T(219)]=1,D[T(227)]=2,D[T(158)]=3,D.RAY_VANISHING=4,D.RAY_EXTINGUISHED=5,D[T(138)]=Math[T(164)](30*Math.PI/180),D[T(191)]=Math[T(145)](30*Math.PI/180);const z=F;function F(t,i){const s=G();return(F=function(t,i){return s[t-=401]})(t,i)}!function(t,i){const s=F,n=G();for(;;)try{if(412103===parseInt(s(416))/1*(parseInt(s(474))/2)+-parseInt(s(401))/3*(parseInt(s(461))/4)+-parseInt(s(443))/5+parseInt(s(442))/6*(-parseInt(s(408))/7)+parseInt(s(418))/8*(-parseInt(s(467))/9)+-parseInt(s(448))/10*(parseInt(s(427))/11)+parseInt(s(430))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(457)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=F,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(438),"i"),n=L(t(410));i[t(406)](n+t(456))&&s.test(n+t(472))?L():n("0")}))()}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function G(){const t=["1201296ucaUnQ","lightningMaxPeriod","while (true) {}","6EpXBpB","stateObject","birthTime","constructor","debu","test","remove","2717778obsyfy","log","init","lerp","indexOf","copyParameters","sourceOffset",'{}.constructor("return this")( )',"1QQMtpa","maxLightnings","64SLzXNS","splice","lightningMaterial","getNextLightningTime","stormParams","console","onLightningDown","action","set","11FOIlpK","info","nextLightningTime","19300032Veozfd","lightningMinDuration","warn","gger","size","update","lightningsMeshes","multiplyScalar","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","RAY_EXTINGUISHED","state","maxSlope","12AjfKsU","920860RdoeXw","minHeight","geometry","counter","lightningMinPeriod","1229710aSWyez","deadLightningsMeshes","isLightningStorm","lightningParameters","inited","table","bind","destOffset","chain","apply","length","lightningMaxDuration","onRayPosition","157740IkvIPx","copy","random","exception","deathTime","push","713655oQKJcf","noiseSeed","rayParameters","add","maxHeight","input","toString"];return(G=function(){return t})()}N(void 0,(function(){const t=F,i=function(){const t=F;let i;try{i=Function("return (function() "+t(415)+");")()}catch(s){i=window}return i}(),s=i[t(423)]=i[t(423)]||{},n=[t(409),t(432),t(428),"error",t(464),t(453),"trace"];for(let e=0;e<n[t(458)];e++){const i=N[t(404)].prototype[t(454)](N),r=n[e],o=s[r]||i;i.__proto__=N[t(454)](N),i[t(473)]=o[t(473)].bind(o),s[r]=i}}))();class E extends a{constructor(t={}){const i=F;super(),this[i(450)]=!0,this[i(422)]=t,t[i(434)]=void 0!==t.size?t[i(434)]:1e3,t[i(444)]=void 0!==t[i(444)]?t[i(444)]:80,t.maxHeight=void 0!==t[i(471)]?t.maxHeight:100,t[i(441)]=void 0!==t[i(441)]?t.maxSlope:1.1,t[i(417)]=void 0!==t[i(417)]?t[i(417)]:3,t.lightningMinPeriod=void 0!==t[i(447)]?t[i(447)]:3,t[i(475)]=void 0!==t[i(475)]?t[i(475)]:7,t[i(431)]=void 0!==t[i(431)]?t[i(431)]:1,t[i(459)]=void 0!==t[i(459)]?t[i(459)]:2.5,this.lightningParameters=D[i(413)](t[i(451)],t[i(451)]),this[i(451)].isEternal=!1,this[i(420)]=void 0!==t.lightningMaterial?t[i(420)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(460)]=t[i(460)]:this[i(460)]=function(s,n){const e=i;n.set((Math[e(463)]()-.5)*t[e(434)],0,(Math[e(463)]()-.5)*t.size);const r=o.lerp(t.minHeight,t[e(471)],Math[e(463)]());s[e(426)](t[e(441)]*(2*Math[e(463)]()-1),1,t[e(441)]*(2*Math[e(463)]()-1))[e(437)](r)[e(470)](n)},this[i(424)]=t[i(424)],this[i(452)]=!1,this.nextLightningTime=0,this[i(436)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(422)][i(417)];s++){const t=new D(D[i(413)]({},this[i(451)])),s=new u(t,this[i(420)]);this[i(449)].push(s)}}[z(435)](t){const i=z;if(!this[i(452)]&&(this[i(429)]=this.getNextLightningTime(t)*Math[i(463)](),this[i(452)]=!0),t>=this[i(429)]){const s=this[i(449)].pop();if(s){const n=D.copyParameters(s[i(445)][i(469)],this[i(451)]);n[i(403)]=t,n[i(465)]=t+o[i(411)](this.stormParams.lightningMinDuration,this[i(422)].lightningMaxDuration,Math[i(463)]()),this.onRayPosition(n[i(414)],n[i(455)]),n[i(468)]=Math[i(463)](),this[i(470)](s),this[i(436)][i(466)](s)}this[i(429)]=this[i(421)](t)}let s=0,n=this[i(436)][i(458)];for(;s<n;){const e=this[i(436)][s],r=e.geometry,o=r[i(440)];r[i(435)](t),o===D.RAY_PROPAGATING&&r.state>o&&this[i(424)]&&this[i(424)](r),r[i(440)]===D[i(439)]?(this[i(436)][i(419)](this[i(436)][i(412)](e),1),this[i(449)][i(466)](e),this[i(407)](e),n--):s++}}[z(421)](t){const i=z;return t+o[i(411)](this[i(422)][i(447)],this[i(422)].lightningMaxPeriod,Math.random())/(this[i(422)].maxLightnings+1)}[z(462)](t,i){const s=z;return super[s(462)](t,i),this[s(422)][s(434)]=t[s(422)][s(434)],this.stormParams[s(444)]=t.stormParams[s(444)],this[s(422)][s(471)]=t[s(422)].maxHeight,this.stormParams[s(441)]=t[s(422)].maxSlope,this[s(422)][s(417)]=t[s(422)][s(417)],this[s(422)][s(447)]=t[s(422)][s(447)],this[s(422)].lightningMaxPeriod=t.stormParams[s(475)],this.stormParams[s(431)]=t[s(422)][s(431)],this[s(422)][s(459)]=t.stormParams.lightningMaxDuration,this.lightningParameters=D.copyParameters({},t[s(451)]),this.lightningMaterial=t[s(422)][s(420)],this[s(424)]=t[s(424)],this}clone(){const t=z;return new(this[t(404)])(this.stormParams)[t(462)](this)}}function L(t){function i(t){const s=F;if("string"==typeof t)return function(t){}.constructor(s(476))[s(457)](s(446));1!==(""+t/t)[s(458)]||t%20==0?function(){return!0}[s(404)](s(405)+s(433)).call(s(425)):function(){return!1}[s(404)](s(405)+s(433))[s(457)](s(402)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=O;function O(t,i){const s=K();return(O=function(t,i){return s[t-=185]})(t,i)}!function(t,i){const s=O,n=K();for(;;)try{if(316704===-parseInt(s(213))/1*(-parseInt(s(244))/2)+-parseInt(s(241))/3*(-parseInt(s(190))/4)+-parseInt(s(229))/5+-parseInt(s(223))/6*(-parseInt(s(206))/7)+-parseInt(s(221))/8+-parseInt(s(201))/9+parseInt(s(218))/10*(parseInt(s(235))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(232)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){k(this,(function(){const t=O,i=new RegExp(t(246)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=Z(t(228));i[t(205)](n+t(193))&&s[t(205)](n+t(234))?Z():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(232)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=O,i=function(){const t=O;let i;try{i=Function(t(236)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(188)]=i[t(188)]||{},n=["log",t(222),t(185),t(233),"exception","table",t(242)];for(let e=0;e<n.length;e++){const i=Y[t(247)][t(238)].bind(Y),r=n[e],o=s[r]||i;i[t(225)]=Y[t(220)](Y),i[t(189)]=o[t(189)][t(220)](o),s[r]=i}}))();const X=[U(216)];function K(){const t=["test","1097075JdLaIn","set","primitive","string","Vector3","debu","color","1iFOAkj","subrayPeriod","maxHeight","object","minHeight","10bCxxvy","gger","bind","2205736NUfwQn","warn","12TETnKp","straightness","__proto__","timeScale","rayParameters","init","2568765zucPuT","action","radius1","apply","error","input","1776478JrFjKS","return (function() ","counter","prototype","call","addVectors","3NGzRBg","trace","#b0ffff","1186142WcSWbL","subrayConePosition","function *\\( *\\)","constructor","info","copy","update","console","toString","1792132XDOzGk","add","subVectors","chain","dot","MeshBasicMaterial","while (true) {}","multiplyScalar","radius0","length","size","3688902RBNQtd","pos1","roughness","sub"];return(K=function(){return t})()}const Q=g({__name:"lightStorm",props:{color:{default:U(243)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,n=t,e=new c(n.color),r=new(l[i(195)])({color:e}),o=new(l[i(210)])(0,-1,0);let a=0;const h=new s,u=new(l[i(210)]),d={roughness:n[i(203)],straightness:n[i(224)],radius0:n[i(198)],radius1:n[i(231)],timeScale:n[i(226)],subrayPeriod:n[i(214)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(245)](t,s,n,.6,.6,.5),a=e.rayParameters.sourceOffset.y,h[r(192)](n.pos1,e[r(227)].sourceOffset);const c=o[r(194)](h);u[r(186)](o).multiplyScalar(c),h[r(204)](u);const l=c/a>.5?a/c:1;u[r(197)](l),h[r(191)](u),n[r(202)][r(240)](h,e.rayParameters.sourceOffset)}},m=new E({size:n[i(200)],minHeight:n[i(217)],maxHeight:n[i(215)],maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:d,lightningMaterial:r});y((()=>{const t=i,s=m.stormParams;s[t(200)]=n.size,s[t(217)]=n[t(217)],s[t(215)]=n[t(215)],r.color[t(207)](n[t(212)]),d.roughness=n[t(203)],d[t(224)]=n[t(224)],d[t(198)]=n.radius0,d[t(231)]=n[t(231)],d[t(226)]=n[t(226)]}));const{onLoop:f}=p();return f((({elapsed:t})=>{m[i(187)](t)})),(t,s)=>{const n=i;return b(),S(n(208),{object:v(m),renderOrder:9999},null,8,X)}}});function Z(t){function i(t){const s=O;if(typeof t===s(209))return function(t){}.constructor(s(196))[s(232)](s(237));1!==(""+t/t)[s(199)]||t%20==0?function(){return!0}[s(247)]("debu"+s(219))[s(239)](s(230)):function(){return!1}[s(247)](s(211)+s(219))[s(232)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const W=q;!function(t,i){const s=q,n=J();for(;;)try{if(360007===parseInt(s(514))/1*(parseInt(s(516))/2)+-parseInt(s(540))/3+-parseInt(s(547))/4*(parseInt(s(503))/5)+parseInt(s(515))/6*(parseInt(s(506))/7)+parseInt(s(536))/8+parseInt(s(548))/9*(parseInt(s(507))/10)+parseInt(s(522))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(518)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){B(this,(function(){const t=q,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(525),"i"),n=it(t(510));i[t(505)](n+t(545))&&s[t(505)](n+t(549))?it():n("0")}))()}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(518)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=J();return(q=function(t,i){return s[t-=500]})(t,i)}function J(){const t=["call","timeScale","prototype","radius1","warn","直度度","时间缩放","lightningStorm",'{}.constructor("return this")( )',"未部半径","565584eXjOiy","color","trace","info","1987020bHGMPA","bind","straightness","debu","value","chain","constructor","163732lNUTse","9UWcpvt","input","toString","gger","string","65graxXf","while (true) {}","test","729932ojqKQD","236290SkQdXd","log","粗糙度","init","#92399e","stateObject","error","619kSbhDw","30qlQSTm","302LfaPCN","roughness","apply","length","#ffbde7","return (function() ","9298300cLJHva","console","minHeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(J=function(){return t})()}$(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(521)+t(534)+");")()}catch(s){i=window}return i}(),s=i[t(523)]=i[t(523)]||{},n=[t(508),t(530),t(539),t(513),"exception","table",t(538)];for(let e=0;e<n[t(519)];e++){const i=$[t(546)][t(528)].bind($),r=n[e],o=s[r]||i;i.__proto__=$.bind($),i.toString=o[t(500)][t(541)](o),s[r]=i}}))();const tt=g({__name:W(533),setup(i){const s=W,n=x({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(511),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:u,radius1:c,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(520),roughness:{label:s(509),value:.85,min:0,max:1,step:.01},straightness:{label:s(531),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(535),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(532),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),S(P,null,[_(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[_(Q,{minHeight:v(e)[d(544)],maxHeight:v(r).value,color:v(o)[d(544)],roughness:v(a).value,straightness:v(h).value,radius0:v(u)[d(544)],radius1:v(c)[d(544)],timeScale:v(l)[d(544)]},null,8,[d(524),"maxHeight",d(537),d(517),d(542),"radius0",d(529),d(527)]),_(v(M),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),_(v(m))],64)}}});function it(t){function i(t){const s=q;if(typeof t===s(502))return function(t){}.constructor(s(504)).apply("counter");1!==(""+t/t)[s(519)]||t%20==0?function(){return!0}[s(546)](s(543)+s(501))[s(526)]("action"):function(){return!1}[s(546)](s(543)+s(501))[s(518)](s(512)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{tt as default};

import"./@fesjs.KgfPPsKU1723718122052.js";import{_ as t}from"./jszip.t8h7C5WV1723718122052.js";import{F as n}from"./file-saver.PPI7_SHT1723718122052.js";import{cz as e,a6 as s}from"./three.eXhPIzTa1723718122052.js";const o=c;!function(t,n){const e=c,s=a();for(;;)try{if(772718===parseInt(e(209))/1*(parseInt(e(256))/2)+-parseInt(e(241))/3*(-parseInt(e(177))/4)+parseInt(e(213))/5+-parseInt(e(216))/6+parseInt(e(232))/7+parseInt(e(189))/8+-parseInt(e(254))/9*(parseInt(e(199))/10))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(239)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function a(){const t=["result","FileLoader","image/bmp","20uOXPtg","enabled","message","while (true) {}","data:","prototype","substring","readAsDataURL","generateAsync","constructor","717eqiBus","PNG","folder","url:geometries/","1135445eHailr","images",".json","459564FvmBRR","image/jpeg","setResponseType","config.zip","exception","init","log","forEach","geometries","data",";base64,","url:images/","JPEG","onerror","then","GIF","2223872CUpTmm","toUpperCase","length","debu","table","image/webp","chain","apply","url","3vSKdmv","name","file","type","files","startsWith","WEBP","slice","onloadend","image/gif","get","app.json","endsWith","14529933uBSVuo","__proto__","4054fCapKr","blob","action","catch","push","scene","input","data:image/jpeg;base64,","url:","loadAsync","uuid","parse","info","error","load","toLowerCase","async","5082964OtzIFX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","data:image/","toString","split","pop","BufferGeometry","data:image/gif;base64,","bind","trace","stringify","Unknown","6474408rlenKS","function *\\( *\\)","counter","string","console","data:image/PNG;base64,","stateObject"];return(a=function(){return t})()}!function(){r(this,(function(){const t=c,n=new RegExp(t(190)),e=new RegExp(t(178),"i"),s=h(t(221));n.test(s+t(238))&&e.test(s+t(262))?h():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function c(t,n){const e=a();return(c=function(t,n){return e[t-=172]})(t,n)}async function u(t){const n=o,e=new(s[n(197)]);return new Promise(((s,o)=>{const r=n;e[r(174)](t,(t=>s(JSON[r(267)](t))),void 0,(t=>o(t)))}))}async function p(t){const n=o,e=new(s[n(197)]);return new Promise(((s,r)=>{const a=n;e[a(218)](a(257)),e[a(174)](t,(n=>{const e=a,i=new FileReader;i[e(249)]=()=>{const n=e,r=function(t){const n=o,e=t[n(181)](".")[n(182)]()[n(175)]();return{jpg:n(217),jpeg:"image/jpeg",png:"image/png",gif:n(250),bmp:n(198),webp:n(237)}[e]||"application/octet-stream"}(t),a=i[n(196)][n(181)](",")[1];s(n(203)+r+n(226)+a)},i[e(229)]=t=>{r(t)},i[e(206)](n)}),void 0,(t=>r(t)))}))}i(void 0,(function(){const t=c,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(193)]=n[t(193)]||{},s=[t(222),"warn",t(172),t(173),t(220),t(236),t(186)];for(let o=0;o<s.length;o++){const n=i[t(208)][t(204)][t(185)](i),r=s[o],a=e[r]||n;n[t(255)]=i.bind(i),n[t(180)]=a[t(180)][t(185)](a),e[r]=n}}))(),e[o(200)]=!0;const f=n=>{const e=o,r=new(s[e(197)]);return r[e(218)](e(257)),new Promise(((s,o)=>{const a=e;r[a(174)](n,(async n=>{const e=a;s(await t[e(265)](n))}),void 0,(t=>o(t)))}))},l=t=>{const n=o,e=t[n(205)](0,15),s=n(263),r=n(194),a=n(184);return s[n(246)](e)||"data:image/JPEG;base64,".startsWith(e)?n(228):"data:image/png;base64,"[n(246)](e)||r[n(246)](e)?n(210):a.startsWith(e)||"data:image/GIF;base64,"[n(246)](e)?n(231):"data:image/webp;base64,"[n(246)](e||"data:image/WEBP;base64,"[n(246)](e))?n(247):n(188)},g=e=>{const s=o,r=[];e.scene[s(224)]&&e[s(261)][s(224)][s(223)]((t=>{const n=s;t[n(244)]===n(183)&&(r[n(260)]({uuid:t[n(266)],data:t[n(225)]}),t[n(225)]=n(212)+t[n(266)]+n(215))}));const a=[];e[s(261)][s(214)]&&e[s(261)][s(214)].forEach((t=>{const n=s;t[n(240)]&&(a.push({uuid:t.uuid,url:t[n(240)]}),t[n(240)].type?t.url=n(227)+t[n(266)]+"."+t.url.type+n(215):t[n(240)]="url:images/"+t.uuid+"."+l(t[n(240)]))}));const i=new t;if(r[s(234)]){const t=i[s(211)](s(224));r[s(223)]((n=>{const e=s;t[e(243)](n.uuid+".json",JSON[e(187)](n[e(225)]))}))}if(a[s(234)]){const t=i[s(211)](s(214));a[s(223)]((n=>{const e=s;n.url[e(244)]?t[e(243)](n.uuid+"."+n[e(240)][e(244)]+e(215),JSON[e(187)](n[e(240)])):t[e(243)](n.uuid+"."+l(n[e(240)]),n[e(240)][e(181)](";base64,")[e(182)](),{base64:!0})}))}const c=JSON.stringify(e);return i.file(s(252),c),i[s(207)]({type:s(257)})[s(230)]((t=>{const e=s;n.saveAs(t,e(219))}))},m=(t,n,e)=>{const s=o;t.geometries<=0&&t[s(214)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(265)](n)[s(230)]((t=>{const n=s;t[n(245)][n(252)]?t[n(245)][n(252)][n(176)]("string").then((s=>{var a,i;const c=n;r=JSON.parse(s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(261)][s(224)])||n[s(223)]((t=>{const n=s;t.data[n(246)](n(264))&&r[n(224)]++})),null==(e=t[s(261)][s(214)])||e.forEach((t=>{const n=s;t[n(240)].startsWith(n(264))&&r[n(214)]++})),r})(r);m(u,r,e),null==(a=r.scene[c(224)])||a[c(223)]((n=>{const s=c;n[s(225)][s(246)]("url:")&&t[s(245)][n.data[s(248)](4)][s(176)](s(192)).then((t=>{const o=s;n.data=JSON[o(267)](t),u[o(224)]--,m(u,r,e)}))})),null==(i=r[c(261)][c(214)])||i.forEach((n=>{const s=c;if(n[s(240)][s(246)]("url:")){const o=n[s(240)][s(248)](4);o[s(253)](s(215))?t.files[o][s(176)]("string")[s(230)]((t=>{const o=s;n.url=JSON[o(267)](t),u[o(214)]--,m(u,r,e)})):t.files[o].async("base64").then((t=>{const a=s,i=o[a(181)]("."),c=i[i[a(234)]-1][a(233)]();n[a(240)]=a(179)+c+a(226)+t,u.images--,m(u,r,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(t=>{const e=s;console.error(n[e(242)]+": "+t[e(201)])})),r};function h(t){function n(t){const e=c;if(typeof t===e(192))return function(t){}.constructor(e(202))[e(239)](e(191));1!==(""+t/t)[e(234)]||t%20==0?function(){return!0}.constructor(e(235)+"gger").call(e(258)):function(){return!1}[e(208)](e(235)+"gger")[e(239)](e(195)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{f as a,p as b,g as e,l as g,d as i,u as l};

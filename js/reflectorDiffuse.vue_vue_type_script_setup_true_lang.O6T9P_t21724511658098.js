import{b$ as t,a0 as n,C as e,j as r}from"./three.6cxCQsIj1724511658098.js";import{N as o}from"./@tresjs.6SjGVF2a1724511658098.js";import{R as a}from"./all.three.8nmp0Ccm1724511658098.js";import{d as c,b as i,a4 as s,a1 as u,w as f,o as l,D as p,J as m,m as d,u as h}from"./@vue.Q1VpS3901724511658098.js";!function(t,n){const e=v,r=y();for(;;)try{if(688444===-parseInt(e(519))/1+-parseInt(e(512))/2+-parseInt(e(507))/3+-parseInt(e(478))/4+parseInt(e(518))/5*(parseInt(e(489))/6)+parseInt(e(500))/7*(parseInt(e(498))/8)+parseInt(e(482))/9*(-parseInt(e(511))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function v(t,n){const e=y();return(v=function(t,n){return e[t-=475]})(t,n)}!function(){g(this,(function(){const t=v,n=new RegExp(t(477)),e=new RegExp(t(513),"i"),r=_(t(496));n.test(r+t(509))&&e[t(508)](r+"input")?_():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function y(){const t=["void main() {","log","debu","__proto__","replace","923961ekhwaM","test","chain","info","37330PBOnyP","6336jLsaJd","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"error","fragmentShader","bind","3512645fneMAz","501447sSHCtE","string","warn","trace","function *\\( *\\)","186844YBTYaB","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","toString","length","729JcnJfq","exception","table","apply","#include <emissivemap_fragment>","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","gger","6sSFKNL","constructor","console","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","return (function() ","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","#include <project_vertex>","init","call","706216NsflII","vertexShader","91BDzvQD","counter"];return(y=function(){return t})()}x(void 0,(function(){const t=v;let n;try{n=Function(t(493)+t(514)+");")()}catch(o){n=window}const e=n[t(491)]=n[t(491)]||{},r=[t(503),t(475),t(510),t(515),t(483),t(484),t(476)];for(let a=0;a<r.length;a++){const n=x[t(490)].prototype[t(517)](x),o=r[a],c=e[o]||n;n[t(505)]=x[t(517)](x),n[t(480)]=c[t(480)].bind(c),e[o]=n}}))();function _(t){function n(t){const e=v;if(typeof t===e(520))return function(t){}.constructor("while (true) {}")[e(485)](e(501));1!==(""+t/t)[e(481)]||t%20==0?function(){return!0}[e(490)](e(504)+e(488))[e(497)]("action"):function(){return!1}[e(490)](e(504)+e(488)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=M;function I(){const t=["visible","renderTargetUniform","constructor","trace","295901pgCJFu","prototype","string","log","set","138gqPilu","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","info","debu","30FGPLXV","34349AaRfli","input","onBeforeCompile","action","uv1","96530OaeZGN","assign","onBeforeRender","reflectMap","return (function() ","value","4593033lopDar","reflectorDiffuse","1020579NAfYAC","TresMesh","296860qEamcH","exception","console","uniforms","TresMeshStandardMaterial","mixStrength","stateObject","mirror","attributes","bind","toString","#444","channel","call","warn","tpgRef","apply","wrapS","#ffffff","7099544iKWuHS","aoMap","textureMatrixUniform","TresGroup","2563NdhzzH","primitive","TresPlaneGeometry","gger","rotation-x","__proto__",'{}.constructor("return this")( )',"tmRef","counter","2GngFQH","tmsmRef","error","color","wrapT","init"];return(I=function(){return t})()}!function(t,n){const e=M,r=I();for(;;)try{if(474648===-parseInt(e(446))/1*(-parseInt(e(436))/2)+-parseInt(e(471))/3+-parseInt(e(473))/4*(parseInt(e(457))/5)+parseInt(e(451))/6*(parseInt(e(458))/7)+-parseInt(e(423))/8+-parseInt(e(469))/9+parseInt(e(463))/10*(parseInt(e(427))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(420)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=M,n=new RegExp(t(454)),e=new RegExp(t(453),"i"),r=E(t(441));n.test(r+"chain")&&e.test(r+t(459))?E():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function M(t,n){const e=I();return(M=function(t,n){return e[t-=413]})(t,n)}C(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(467)+t(433)+");")()}catch(e){n=window}return n}(),e=n[t(475)]=n[t(475)]||{},r=[t(449),t(418),t(455),t(438),t(474),"table",t(445)];for(let o=0;o<r[t(452)];o++){const n=C[t(444)][t(447)][t(413)](C),a=r[o],c=e[a]||n;n[t(432)]=C[t(413)](C),n[t(414)]=c[t(414)][t(413)](c),e[a]=n}}))();const S=[w(431)],j=["object"],z=c({__name:w(470),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:w(422)}},async setup(c){const g=w;let x,y;const _=c,I=new t(9.5,10),b=i(),C=i(),M=i(),z=new a,E={mirror:{value:_[g(480)]},mixStrength:{value:_[g(478)]}},T=([x,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),x=await x,y(),x);for(var R=0;R<3;R++)T[R][g(421)]=n,T[R][g(440)]=n,T[R].repeat[g(450)](16,16);const N={color:new e(g(415)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},A=t=>{const n=g;t[n(476)][n(466)]=z[n(443)],t[n(476)].textureMatrix=z[n(425)],t[n(476)]=Object[n(464)](t.uniforms,E),(t=>{const n=v;t[n(499)]=t.vertexShader[n(506)](n(502),n(487)),t[n(499)]=t.vertexShader[n(506)](n(495),n(494))})(t),(t=>{const n=v;t.fragmentShader=t[n(516)].replace(n(502),n(492)),t.fragmentShader=t.fragmentShader.replace(n(486),n(479))})(t)};return u((()=>{const t=g;b[t(468)]&&(b[t(468)][t(481)][t(462)]=b.value[t(481)].uv),M.value&&(M[t(468)][t(424)][t(416)]=1,M[t(468)][t(460)]=A),C[t(468)]&&(C[t(468)].add(z),C[t(468)][t(465)]=(t,n,e)=>{z.update(t,n,e)}),_[t(439)]&&M[t(468)]&&(M[t(468)].color=new e(_.color))})),f((()=>_.showGridHelper),(t=>{I[g(442)]=t})),(t,n)=>{const e=g;return l(),p(e(426),null,[m(e(472),{ref_key:e(434),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(429),{ref_key:e(419),ref:b,args:[10,10]},null,512),m(e(477),d({ref_key:e(437),ref:M},N),null,16)],8,S),m(e(428),{object:h(I)},null,8,j)])}}});function E(t){function n(t){const e=M;if(typeof t===e(448))return function(t){}[e(444)]("while (true) {}")[e(420)](e(435));1!==(""+t/t)[e(452)]||t%20==0?function(){return!0}[e(444)](e(456)+e(430))[e(417)](e(461)):function(){return!1}.constructor(e(456)+"gger")[e(420)](e(479)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

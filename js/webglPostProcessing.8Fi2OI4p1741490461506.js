import{i as t}from"./ice-utils.7DaBd8d01741490461506.js";import{m as n,_ as e}from"./gl-matrix.jdRQk3yC1741490461506.js";import{P as o}from"./tweakpane.yDiyAAkA1741490461506.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.NRI7TcgI1741490461506.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=p;!function(t,n){const e=p,o=A();for(;;)try{if(725993===-parseInt(e(188))/1+-parseInt(e(185))/2*(parseInt(e(140))/3)+parseInt(e(136))/4*(parseInt(e(219))/5)+-parseInt(e(198))/6+-parseInt(e(163))/7*(-parseInt(e(209))/8)+parseInt(e(191))/9*(-parseInt(e(207))/10)+parseInt(e(212))/11*(parseInt(e(168))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=p,n=new RegExp(t(155)),e=new RegExp(t(153),"i"),o=T(t(210));n.test(o+"chain")&&e[t(193)](o+t(135))?T():o("0")}))()}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function p(t,n){const e=A();return(p=function(t,n){return e[t-=120]})(t,n)}x(void 0,(function(){const t=p;let n;try{n=Function(t(220)+t(150)+");")()}catch(r){n=window}const e=n.console=n[t(148)]||{},o=[t(174),t(211),t(143),"error","exception",t(121),t(127)];for(let i=0;i<o[t(126)];i++){const n=x[t(224)][t(179)][t(176)](x),r=o[i],a=e[r]||n;n.__proto__=x[t(176)](x),n[t(123)]=a.toString.bind(a),e[r]=n}}))();const g={id:_(177)},E=[_(141)];function A(){const t=["log","translate","bind","canvaswebgl","TEXTURE_2D","prototype","value","innerWidth","#canvaswebgl","addBlade","clearColor","10KQKRhh","clear","RGBA","1144998rEPcsX","FLOAT","TEXTURE_MIN_FILTER","4123458TGirgK","uProjection","test","hidden","STATIC_DRAW","ortho","offset_right_bottom","2220444CVJAbF","createBuffer","color","ELEMENT_ARRAY_BUFFER","debu","change","useProgram","TEXTURE_WRAP_T","gger","10iuCYaR","create","64AwtVtN","init","warn","3971kFVVwW","ONE_MINUS_SRC_ALPHA","BYTES_PER_ELEMENT","framebufferTexture2D","offset_right_top","getContext","FRAMEBUFFER","35SnuOZr","return (function() ","webglPostProcessing","COLOR_BUFFER_BIT","inline","constructor","addBinding","ARRAY_BUFFER","table","width","toString","getElementById","img","length","trace","scale","height","enableVertexAttribArray","bindBuffer","vertexAttribPointer","querySelector","SRC_ALPHA","input","378052batRoe","texParameteri","uniformMatrix4fv","mat4","373419hWOHUM","src","TEXTURE_WRAP_S","info","uniform1f","COLOR_ATTACHMENT0","apply","offset_left_bottom","console","NEAREST",'{}.constructor("return this")( )',"webgl","getUniformLocation","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bindTexture","function *\\( *\\)","texImage2D","bindFramebuffer","while (true) {}","action","uView","logo-texture","offset_left_top","1154657MzoFks","createFramebuffer","string","none","TRIANGLES","44556dVErEh","CLAMP_TO_EDGE","lookAt","bufferData","UNSIGNED_BYTE","blendFunc"];return(A=function(){return t})()}const b=r({__name:_(221),setup(r){const d=_;let x,p,A,b,T,R,y,F,h,v,w,C,P;const I=1,B=.71,U=.76,L=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L[d(183)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=d;V(),p[n(144)](C,t[n(180)])}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L[d(225)](S,d(194),{label:"是否后处理"}),L.addBinding(S,d(216),{picker:d(223),x:{min:0,max:1},y:{min:0,max:1}}).on(d(203),(t=>{const n=d;M[0]=S.offset_right_top.x,M[1]=S[n(216)].y,V()})),L.addBinding(S,"offset_right_bottom",{picker:d(223),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(203),(t=>{const n=d;M[5]=S[n(197)].x,M[6]=S[n(197)].y,V()})),L[d(225)](S,"offset_left_bottom",{picker:d(223),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(203),(t=>{const n=d;M[10]=S[n(147)].x,M[11]=S[n(147)].y,V()})),L[d(225)](S,d(162),{picker:d(223),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(203),(t=>{const n=d;M[15]=S.offset_left_top.x,M[16]=S[n(162)].y,V()})),a((()=>{D()}));const D=function(){const n=d;x=document[n(133)](n(182)),x[n(122)]=window[n(181)],x[n(129)]=window.innerHeight,p=x[n(217)](n(151)),p&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=k(e,o),A=t(p,l,m),h=p.getUniformLocation(A,n(192)),v=p.getUniformLocation(A,n(160)),w=p[n(152)](A,"uModel"),P=j(document[n(124)]("logo-texture"))}(),V(),p.enable(p.BLEND),p[n(173)](p[n(134)],p[n(213)]),N())};function N(){const t=d;p[t(157)](p[t(218)],y),p[t(184)](I,B,U,1),p[t(186)](p[t(222)]),function(){const t=d;p[t(204)](A),p.bindBuffer(p[t(120)],b);const o=n[t(208)]();e[t(139)][t(196)](o,0,x.width,x[t(129)],0,.1,100),p[t(138)](h,!1,o);const r=e[t(139)][t(208)]();e[t(139)][t(170)](r,[0,0,1],[0,0,0],[0,1,0]),p[t(138)](v,!1,r),O(P,600,600),O(P,400,400)}(),p[t(157)](p[t(218)],null),S[t(194)]&&(p[t(186)](p.COLOR_BUFFER_BIT),p[t(184)](0,0,1,1),p[t(131)](p[t(120)],T),p[t(204)](R),p[t(154)](p[t(178)],F)),p.drawElements(p[t(167)],6,p.UNSIGNED_BYTE,0),requestAnimationFrame(N)}function O(t,o,r){const i=d;let a=n[i(208)]();e[i(139)][i(175)](a,a,[o,r,0]),e[i(139)][i(128)](a,a,[250,250,0]),p.uniformMatrix4fv(w,!1,a),p[i(154)](p[i(178)],t),p.drawElements(p[i(167)],6,p[i(172)],0)}function V(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);T=k(M,e),R=t(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=p[n(152)](R,"mixParam"),p[n(152)](R,n(200)),function(){const t=d;F=j(x),y=p[t(164)](),p[t(157)](p[t(218)],y),p[t(215)](p[t(218)],p[t(145)],p[t(178)],F,0),p[t(157)](p[t(218)],null)}()}function j(t){const n=d,e=p.createTexture();return p[n(154)](p[n(178)],e),t instanceof HTMLImageElement?p[n(156)](p[n(178)],0,p[n(187)],p[n(187)],p[n(172)],t):p[n(156)](p[n(178)],0,p[n(187)],t[n(122)],t[n(129)],0,p[n(187)],p[n(172)],null),p.texParameteri(p.TEXTURE_2D,p[n(190)],p[n(149)]),p[n(137)](p[n(178)],p.TEXTURE_MAG_FILTER,p[n(149)]),p[n(137)](p[n(178)],p[n(142)],p[n(169)]),p[n(137)](p[n(178)],p[n(205)],p[n(169)]),e}function k(t,n){const e=d,o=p[e(199)]();p[e(131)](p[e(120)],o),p.bufferData(p[e(120)],t,p[e(195)]);const r=3*Float32Array[e(214)]+2*Float32Array[e(214)];p[e(132)](0,3,p[e(189)],!1,r,0),p[e(130)](0),p[e(132)](1,2,p.FLOAT,!1,r,3*Float32Array[e(214)]),p.enableVertexAttribArray(1);const i=p[e(199)]();return p[e(131)](p[e(201)],i),p[e(171)](p.ELEMENT_ARRAY_BUFFER,n,p[e(195)]),p[e(131)](p.ARRAY_BUFFER,null),o}return(t,n)=>{const e=d;return c(),s("canvas",g,[u(e(125),{id:e(161),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(166)}},null,8,E)])}}});function T(t){function n(t){const e=p;if(typeof t===e(165))return function(t){}.constructor(e(158)).apply("counter");1!==(""+t/t)[e(126)]||t%20==0?function(){return!0}[e(224)](e(202)+e(206)).call(e(159)):function(){return!1}[e(224)]("debu"+e(206))[e(146)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{b as default};

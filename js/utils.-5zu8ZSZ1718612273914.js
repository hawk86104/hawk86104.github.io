import"./@fesjs.K6L2Ptsw1718612273914.js";import{_ as t}from"./jszip.ceBEBY8K1718612273914.js";import{F as n}from"./file-saver.KSzDeGB01718612273914.js";import{a5 as e}from"./three.HHcT7YAr1718612273914.js";const s=r;!function(t,n){const e=r,s=a();for(;;)try{if(532255===parseInt(e(247))/1*(parseInt(e(244))/2)+parseInt(e(275))/3*(-parseInt(e(265))/4)+-parseInt(e(332))/5+parseInt(e(271))/6*(-parseInt(e(303))/7)+parseInt(e(334))/8*(parseInt(e(264))/9)+parseInt(e(286))/10*(parseInt(e(278))/11)+parseInt(e(238))/12)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(325)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function r(t,n){const e=a();return(r=function(t,n){return e[t-=238]})(t,n)}function a(){const t=["setResponseType","toLowerCase","base64","file","data:image/JPEG;base64,","2FZaIBR","data:image/png;base64,","url:images/","406115JRJhLB",";base64,","scene","then","exception","constructor","blob","GIF","files","load","uuid","stringify","slice","parse","folder","url","split","63nwIRRS","2403572ulMEUQ","forEach","非标准文件：不存在 app.json","toString","data","generateAsync","24EpskmM","gger","while (true) {}","prototype","3avEwOJ","pop","FileLoader","641817oPdHZc","image/jpeg","async","BufferGeometry","result","__proto__","image/gif","geometries","20KZPKgE","application/octet-stream","onloadend","error","loadAsync","onerror","chain","trace","warn","substring","console","toUpperCase","return (function() ","endsWith","data:image/GIF;base64,","log","data:image/","966154zjuewE",".json","WEBP","Cache","string","url:","action","function *\\( *\\)","image/webp","enabled","app.json","stateObject","name","images","bind","JPEG","push","catch","length","image/bmp","data:","data:image/WEBP;base64,","apply","debu","data:image/webp;base64,","message","startsWith","test","table","4904020bUFtfr","readAsDataURL","14600ZkaETG","init","type","25565472IzyjdM"];return(a=function(){return t})()}!function(){o(this,(function(){const t=r,n=new RegExp(t(310)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=m(t(335));n[t(330)](s+t(292))&&e[t(330)](s+"input")?m():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(325)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=s,o=new(e[n(277)]);return new Promise(((e,s)=>{const r=n;o[r(256)](t,(t=>e(JSON[r(260)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=s,o=new(e[n(277)]);return new Promise(((e,r)=>{const a=n;o[a(239)](a(253)),o[a(256)](t,(n=>{const o=a,c=new FileReader;c[o(288)]=()=>{const n=o,r=function(t){const n=s,e=t[n(263)](".")[n(276)]()[n(240)]();return{jpg:n(279),jpeg:n(279),png:"image/png",gif:n(284),bmp:n(322),webp:n(311)}[e]||n(287)}(t),a=c[n(282)].split(",")[1];e(n(323)+r+n(248)+a)},c[o(291)]=t=>{r(t)},c[o(333)](n)}),void 0,(t=>r(t)))}))}c(void 0,(function(){const t=r;let n;try{n=Function(t(298)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(296)]=n.console||{},s=[t(301),t(294),"info","error",t(251),t(331),t(293)];for(let r=0;r<s[t(321)];r++){const n=c.constructor[t(274)][t(317)](c),o=s[r],a=e[o]||n;n[t(283)]=c[t(317)](c),n[t(268)]=a[t(268)][t(317)](a),e[o]=n}}))(),e[s(306)][s(312)]=!0;const l=n=>{const o=s,a=new(e[o(277)]);return a[o(239)]("blob"),new Promise(((e,s)=>{a.load(n,(async n=>{const s=r;e(await t[s(290)](n))}),void 0,(t=>s(t)))}))},p=t=>{const n=s,e=t[n(295)](0,15),o=n(243),r=n(245),a=n(300),c=n(327),i=n(324);return"data:image/jpeg;base64,"[n(329)](e)||o.startsWith(e)?n(318):r[n(329)](e)||"data:image/PNG;base64,"[n(329)](e)?"PNG":"data:image/gif;base64,".startsWith(e)||a.startsWith(e)?n(254):c[n(329)](e||i[n(329)](e))?n(305):"Unknown"},f=e=>{const o=s,r=[];e.scene[o(285)]&&e[o(249)][o(285)][o(266)]((t=>{const n=o;t[n(336)]===n(281)&&(r[n(319)]({uuid:t[n(257)],data:t[n(269)]}),t[n(269)]="url:geometries/"+t[n(257)]+n(304))}));const a=[];e[o(249)][o(316)]&&e[o(249)].images[o(266)]((t=>{const n=o;t[n(262)]&&(a[n(319)]({uuid:t.uuid,url:t[n(262)]}),t[n(262)].type?t[n(262)]="url:images/"+t[n(257)]+"."+t[n(262)][n(336)]+".json":t[n(262)]=n(246)+t.uuid+"."+p(t.url))}));const c=new t;if(r.length){const t=c[o(261)](o(285));r[o(266)]((n=>{const e=o;t[e(242)](n[e(257)]+".json",JSON[e(258)](n[e(269)]))}))}if(a[o(321)]){const t=c[o(261)](o(316));a.forEach((n=>{const e=o;n[e(262)].type?t.file(n[e(257)]+"."+n[e(262)][e(336)]+e(304),JSON[e(258)](n.url)):t[e(242)](n[e(257)]+"."+p(n[e(262)]),n[e(262)].split(e(248))[e(276)](),{base64:!0})}))}const i=JSON.stringify(e);return c.file(o(313),i),c[o(270)]({type:o(253)})[o(250)]((t=>{n.saveAs(t,"config.zip")}))},g=(t,n,e)=>{const o=s;t[o(285)]<=0&&t[o(316)]<=0&&e(n)},d=(n,e)=>{const o=s;let r=null;return t[o(290)](n)[o(250)]((t=>{const n=o;t[n(255)][n(313)]?t[n(255)][n(313)].async(n(307)).then((o=>{var a,c;const i=n;r=JSON[i(260)](o);const u=(t=>{var n,e;const o=s,r={geometries:0,images:0};return null==(n=t[o(249)][o(285)])||n[o(266)]((t=>{const n=o;t[n(269)][n(329)]("url:")&&r.geometries++})),null==(e=t.scene[o(316)])||e[o(266)]((t=>{const n=o;t[n(262)][n(329)](n(308))&&r[n(316)]++})),r})(r);g(u,r,e),null==(a=r.scene[i(285)])||a[i(266)]((n=>{const s=i;n.data.startsWith(s(308))&&t.files[n.data[s(259)](4)][s(280)](s(307))[s(250)]((t=>{const o=s;n.data=JSON[o(260)](t),u[o(285)]--,g(u,r,e)}))})),null==(c=r[i(249)][i(316)])||c[i(266)]((n=>{const s=i;if(n[s(262)].startsWith(s(308))){const o=n.url.slice(4);o[s(299)](".json")?t.files[o].async(s(307))[s(250)]((t=>{const o=s;n[o(262)]=JSON[o(260)](t),u[o(316)]--,g(u,r,e)})):t[s(255)][o][s(280)](s(241))[s(250)]((t=>{const a=s,c=o[a(263)]("."),i=c[c[a(321)]-1][a(297)]();n[a(262)]=a(302)+i+";base64,"+t,u[a(316)]--,g(u,r,e)}))}}))})):console[n(289)](n(267))}),(t=>{const e=o;console.error(n[e(315)]+": "+t[e(328)])})),r};function m(t){function n(t){const e=r;if(typeof t===e(307))return function(t){}.constructor(e(273))[e(325)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(326)+e(272)).call(e(309)):function(){return!1}[e(252)]("debu"+e(272))[e(325)](e(314)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,u as b,f as e,p as g,d as i,i as l};

import{m as t,e,D as n,a as o,t as r}from"./@tresjs.GoDhnrau1751425979313.js";import"./index.D6XRt7jj1751425979313.js";import{T as s,aO as c,c as a,a8 as i,a as u,M as W,S as l,V as f,B as d,l as m,ch as p}from"./three.BYAbq0a61751425979313.js";import{P as x}from"./tweakpane.C0HtAJSg1751425979313.js";import{I as h,C as v,N as g,c as k,d as b,a as S}from"./three-mesh-bvh.BAIW8lXv1751425979313.js";import{d as _,a3 as y,b as w,a2 as C,G as P,o as R,F as j,I as J,u as O,r as Q,h as T,j as q,f as A,e as G,m as N,am as M}from"./@vue.Mugdq9o81751425979313.js";import{_ as F}from"./randomLoading.vue_vue_type_script_setup_true_lang.D28hyoeH1751425979313.js";import"./postprocessing.B2tDG3sT1751425979313.js";import"./@vueuse.BoGTEdua1751425979313.js";import"./utils.BhyOPz7h1751425979313.js";import"./@fesjs.CGYUy3pr1751425979313.js";import"./vue-router.pTDn0mUs1751425979313.js";import"./lodash-es.C7pWAXPe1751425979313.js";import"./@qlin.q6OWdsQV1751425979313.js";import"./pinia.CWEAbKiH1751425979313.js";import"./@babel.BPq7uOAK1751425979313.js";import"./@floating-ui.BFjFSAYt1751425979313.js";import"./@juggle.CcBCnTIR1751425979313.js";import"./index.BxIab4aL1751425979313.js";import"./three-mesh-ui.module.vhiThuqa1751425979313.js";import"./starLoading.BwHfoYoS1751425979313.js";import"./cssLoaders.Cp-1k6mu1751425979313.js";import"./bubbleLoading.9XCenqys1751425979313.js";import"./yangyangLoading.C6OYs6Jk1751425979313.js";!function(){const t=Z();function e(t,e,n,o,r){return L(t-1,e)}function n(t,e,n,o,r){return L(n- -126,o)}function o(t,e,n,o,r){return L(r-90,o)}for(;;)try{if(365759===-parseInt(n(0,0,278,"QCji"))/1+parseInt(o(0,0,0,"6i#T",537))/2*(-parseInt(e(426,"m6cc"))/3)+parseInt(n(0,0,248,"G%53"))/4*(parseInt(n(0,0,308,"[tZ*"))/5)+-parseInt((r="qKg#",s=26,L(s- -388,r)))/6+parseInt(o(0,0,0,"G%53",493))/7*(parseInt(L(-308- -667,"&WWw"))/8)+-parseInt(e(439,"7(Pd"))/9+parseInt(e(437,"yJN^"))/10)break;t.push(t.shift())}catch(c){t.push(t.shift())}var r,s}();const V=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return L(n- -618,e)}function r(t,e,n,o,r){return L(n-103,r)}function s(t,e,n,o,r){return L(r-822,t)}function c(t,e,n,o,r){return L(t- -80,e)}function a(t,e,n,o,r){return L(n-1e3,r)}if(o(0,"akEs",-183)===r(0,0,523,0,"Sv@3"))return _0x34c544[r(0,0,553,0,"d#Xe")]().search(o(0,"m6cc",-226))[o(0,"XM#r",-242)]()[c(337,"yJN^")](_0x4bfe68).search(a(0,0,1418,0,"Z9u%"));{const o=t?function(){function t(t,e,n,o,r){return s(n,0,0,0,o- -1437)}if(t(0,0,"v!6Z",-217)!==t(0,0,"SRb!",-178)){if(n){if("xFPed"!==a(0,0,728- -673,0,"akEs")){const t=_0x141d18?function(){if(_0x3638b8){const t=_0xa10806.apply(_0x203190,arguments);return _0x283f63=null,t}}:function(){};return _0xcd8ebe=!1,t}{const o=n[t(0,0,"J%5P",-163)](e,arguments);return n=null,o}}}else{const t=_0x4cee44(c(-253- -523,"m6cc")+s("SaHJ",0,0,0,-507- -1678)+");");_0x2e0aa6=t()}}:function(){};return t=!1,o}}}()(void 0,(function(){function t(t,e,n,o,r){return L(n-699,o)}function e(t,e,n,o,r){return L(o-984,n)}return V[t(0,0,1075,"XM#r")]().search(t(0,0,1148,"Q]kC"))[e(0,0,"d#Xe",1434)]()[(r=-352,s="d#Xe",L(r- -763,s))](V)[(n="Jtjz",o=1021,L(o-655,n))](e(0,0,"YTyr",1405));var n,o,r,s}));V();const H=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return L(t-152,o)}if("LzhPs"!==o(529,0,0,"uqB!")){const r=t?function(){function t(t,e,n,r,s){return o(r- -384,0,0,s)}function r(t,e,n,r,s){return o(e- -1082,0,0,r)}function s(t,e,n,r,s){return o(s-217,0,0,r)}function c(t,e,n,r,s){return o(n-55,0,0,t)}if(s(0,0,0,"qKg#",724)!==t(0,0,0,164,"w9y9"))_0x18be8b.x=_0x509551[c("qKg#",0,591)]/_0x56c84a[s(0,0,0,"uqB!",808)]*2-1,_0x59e355.y=-_0x561cf5[t(0,0,0,157,"@3rT")]/_0x3636ca[c("KnY9",0,580)]*2+1,_0x5c3eeb.value=!0;else if(n){if(r(0,-475,0,"*mgt")!==r(0,-555,0,"J%5P")){const t=n[s(0,0,0,"6vw7",784)](e,arguments);return n=null,t}{_0x1c8620.x=_0xecdf5a[s(0,0,0,"Q]kC",750)]/_0x2a0a9a[c("oEyV",0,571)]*2-1,_0x308a5e.y=-_0x329742.clientY/_0x13eed1[t(0,0,0,129,"Sv@3")]*2+1,_0x4aa7f2[t(0,0,0,168,"7(Pd")]=_0x3b2fea[s(0,0,0,"m6cc",813)];const e=new(_0x7953ff[s(0,0,0,"Z9u%",825)]);e[r(0,-489,0,"7(Pd")](_0x235b10,_0x3992b3[s(0,0,0,"6vw7",747)]),e[s(0,0,0,"G%53",741)]=!0;const n=e.intersectObject(_0x2ac9c3[c("v!6Z",0,595)],!0);_0x2ac056[s(0,0,0,"6vw7",747)]=!0,_0x506178.enabled=0===n[s(0,0,0,"AmMf",721)]}}}:function(){};return t=!1,r}if(_0x5c2958){const t=_0x276b01[(r=1086,s="*mgt",L(r-655,s))](_0x5efec0,arguments);return _0x4765bd=null,t}var r,s}}();function L(t,e){const n=Z();return L=function(e,o){let r=n[e-=348];if(void 0===L.yJoNKG){var s=function(t){let e="",n="",o=e+s;for(let r,s,c=0,a=0;s=t.charAt(a++);~s&&(r=c%4?64*r+s:s,c++%4)?e+=o.charCodeAt(a+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=e.length;r<s;r++)n+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};const e=function(t,e){let n,o,r=[],c=0,a="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)c=(c+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[c],r[c]=n;o=0,c=0;for(let s=0;s<t.length;s++)o=(o+1)%256,c=(c+r[o])%256,n=r[o],r[o]=r[c],r[c]=n,a+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[c])%256]);return a};L.WnAsCS=e,t=arguments,L.yJoNKG=!0}const c=e+n[0],a=t[c];if(a)r=a;else{if(void 0===L.nfZJyG){const t=function(t){this.XOniik=t,this.fRFYAw=[1,0,0],this.fMAwav=function(){return"newState"},this.blwvlm="\\w+ *\\(\\) *{\\w+ *",this.SVQQex="['|\"].+['|\"];? *}"};t.prototype.lpKedz=function(){const t=new RegExp(this.blwvlm+this.SVQQex).test(this.fMAwav.toString())?--this.fRFYAw[1]:--this.fRFYAw[0];return this.pJVrQe(t)},t.prototype.pJVrQe=function(t){return Boolean(~t)?this.dvFOru(this.XOniik):t},t.prototype.dvFOru=function(t){for(let e=0,n=this.fRFYAw.length;e<n;e++)this.fRFYAw.push(Math.round(Math.random())),n=this.fRFYAw.length;return t(this.fRFYAw[0])},new t(L).lpKedz(),L.nfZJyG=!0}r=L.WnAsCS(r,o),t[c]=r}return r},L(t,e)}function Z(){const t=["W5RdItVdKCoD","WR/cTh4da8kmh8ogEXm","W6FdGH9FW79svW","W6fZWQvFW5hcLv3dUcuhWQNcTdbvoHxdM8odW5m","W7tdQqPRdG","W53dRaNdO8kzWOtdJexcNsvIzN0","jCo0W6jwW7ajvmkHWRpcTtuh","WQTQCrldPmkoa8oR","BSkqfCkMpG","WPxdGZCsFCkAwgRcVYLGW5PxWO8","WOpdJ2JcQCoW","W7dcHcKJWQJcLCkMW5tdLvdcNSkRcW","WOJcN8kgo8krt04JW5RcUa","aIpcJ8kw","WRFdKMLxW63dJSo4W5ldUvhcNSkiaG","WQxdH219W6y","WORcS1tcTmoaW4tcPW","eCk3lcfuW5q","W5X7WQ9Bra","WPHHWRGqlsm","WQaJW6aCWPFcRdVcNq0aWRC","W6xdTHnPaZeDW7mWW41K","WOxdU10tvItdOg0PrmkWW7q","WPa8W7FcT8oaxK9Y","W7JcGCoQgCo9WRmb","WPTKWRWioW","WPJdHdq","AJtdKmoNWRK","W5/dKJznfG","CSoOWRZdV8o6dLTAW4m","WRJdLvldUq","omoGWR5gW6SVtSkHWO7cRJOkCWpcOSo0mSoVk8ogofJcVCo3W40wmSk8umk+pCkT","aCkNlcbjW5tcVvNcSSoCW4ldTSoNW6NdNaddSSktWO8","qmk1W6bQW7C","WQNcSmkAkw8y","W6GEW5SdWQZcPWhcLmkI","gmkeW73dPa","WOFdMYmEkW","W7m+vGFdLSkLfmopW4ZdPmokW43dVtuNra","lwBcJSkQW6tdKCo6imk6qZ7dLG","W67dNSkflCoP","xCkOnmkZWPvaW6jYWPq+WP/dPSoH","W4j4WRfbBG","cvxdIWuabSksWPevWQjQ","WOJdNuxdVSorW5X7W709","W70uW5CsWRpcPXhcI8kP","i8kEgHzFWQaPmf/dGW","W7P4WR9pW5hcSXJcUsqAWRm","WPrNWPquf8o5","DYJcOJSwW44pWOhdLSkgcq","W4r2WRrAF8kEESkiWOe","WP3dG01XaCoNfWO","uxRdMmobyMVcHGldVtSqWOf8W6C","vmo7WQtdV8o+","W6ddRNqMWPNcPCoGW5ldGmkwhmoz","krZcMfeEWRW7W4xcUh3dOa","WRFcTdrTW5xdMColW7ldI8k0j8oy","WQH4WOuDea","umkqWOD1CJrUhW","WPFcO8khfCke","cfHvW6qX","EsFdJSo9WQ4","WPddSxNcL8oA","W47cVXXye3NcKW","ySommg5R","WRzZWOSOcq","WPFdHZO5mSkzWQO","W6WdW4euWQS","W6aRW79ZuhbPcSkTW5z7h1JcVmoBy0KfW7JcHKzpW6xcNmoaW4jUEhldR8ooWPO","W6n5WRHeW5FcNG/cVsWeWQi","W603WR1LwG","W5zLWR55o8oDWOG","f1DxW7qMW7GsfSo1ya","W6BdQCksfSoHW75n","w8oQChSqWPpcTLJdV8kaWOFcSq","qmo8qCoahJyD","WQFcVv/dKCkAW7eOjKa","WQFcVmkAkG","BYxdJmoqWQS","mYVcJMHE","W78CWOnAsG","mb3cN1OyWPeSW7JcPMxdSq","WRldLNfKW7O","Dmk3k8kGma","k8k7W5BdSSkg","WRhdPKiEWPZcImon","WQxcMe7cRSkJW6xcO23dTg/cOZS","FYlcQbSsW6meWPZdVCkhdSoHjCkOlMW","WPnTWQysbSo4kvi","W6pdHb3dUCoS","W7ddKeCzWP8","bCkfW4JdV8kAW78YWPq","W7JcGSoTd8oNWRuSWRO5pI4","WOC8W4RcSmogrvr2uSksW5q","WOldRw/dUCoO","zCkBdWJdQtq8W6dcJmkHdmkgo8oPs8oM","W4BcN2rUBCovW4tdPMpcPmopASk+","h0LjW70T","W7xdGHxdUmo4WQxcVG","W4FcNgbsmCoBgZNcVYfb","cmkHW63cSSkWvaqwWPObpxe","WQfSahhcLCo0pSo6W5NdL8obW4W","jNBdLaeR","amo/WRORWPmnW5z2pwNcSmkn","WPiYW4JcTSox","gWJcT1jb","sCk+cHng","sSoYhqfIW5tdRX4","WP/cVLhcPmol"];return(Z=function(){return t})()}H(void 0,(function(){function t(t,e,n,o,r){return L(o- -35,t)}function e(t,e,n,o,r){return L(n-226,t)}function n(t,e,n,o,r){return L(n-583,o)}function o(t,e,n,o,r){return L(r-934,o)}let r;function s(t,e,n,o,r){return L(r-358,e)}try{if(n(0,0,1007,"Rfj%")!==o(0,0,0,"@yHP",1336)){const r=_0x33b52d[o(0,0,0,"yJN^",1351)][e("@@qV",0,579)].bind(_0x4cc159),s=_0x1e65b5[_0x47e098],c=_0x5187ad[s]||r;r[t("puR#",0,0,359)]=_0x5f05e8.bind(_0x3bc932),r[n(0,0,989,"Jtjz")]=c.toString[t("XQac",0,0,405)](c),_0x274d69[s]=r}else{r=Function(e("6i#T",0,656)+s(0,"v!6Z",0,0,744)+");")()}}catch(i){if(s(0,"BXJg",0,0,803)!==n(0,0,934,"YTyr")){const t=_0x1ccf9c[s(0,"7(Pd",0,0,800)](_0x215b51,arguments);return _0x560c64=null,t}r=window}const c=r.console=r[n(0,0,1012,"u[M(")]||{},a=[s(0,"qKg#",0,0,811),"warn",t("@yHP",0,0,319),s(0,"w9y9",0,0,737),n(0,0,946,"@@qV"),"table",s(0,"Z9u%",0,0,729)];for(let u=0;u<a.length;u++)if(o(0,0,0,"eiPH",1316)!==e("(e8b",0,584)){const o=H[t("GAsy",0,0,375)].prototype[n(0,0,931,"D(&r")](H),r=a[u],s=c[r]||o;o.__proto__=H[e("AmMf",0,621)](H),o.toString=s[e("@yHP",0,635)].bind(s),c[r]=o}else if(_0x7cc9ff){const t=_0x37957f[e("SRb!",0,606)](_0x5f3666,arguments);return _0x2ecf45=null,t}}))();const Y=(t,e,n,o,r,c)=>{function a(t,e,n,o,r){return L(e-155,o)}function i(t,e,n,o,r){return L(o-548,e)}function u(t,e,n,o,r){return L(o- -671,r)}function W(t,e,n,o,r){return L(o- -52,t)}window[a(0,568,0,"oUEc")](a(0,542,0,"6i#T"),(n=>{function o(t,e,n,o,r){return a(0,n-714,0,o)}function r(t,e,n,o,r){return u(t-395,e-220,n-228,e- -105,n)}if(o(0,0,1276,"QCji")===o(0,0,1266,"bWUQ")){const t=_0xb2fbcb.apply(_0x28b1c1,arguments);return _0x5cf9f2=null,t}var s,c,i,W,l;t.x=n[r(-387,-333,"7mE[")]/window[o(0,0,1297,"xKr]")]*2-1,t.y=-n[r(-353,-360,"QCji")]/window[(s=-622,c=-578,i=-637,W="B1vz",l=-616,u(s-358,c-190,i-338,l- -312,W))]*2+1,e.value=!0})),window[W("B1vz",354,350,353)](W("*mgt",361,385,396),(u=>{function l(t,e,n,o,r){return a(0,r- -743,0,o)}function f(t,e,n,o,r){return i(0,r,0,e- -1118)}function d(t,e,n,o,r){return i(0,o,0,r-302)}if(d(0,0,0,"J%5P",1233)===d(0,0,0,"QCji",1277)){t.x=u[l(0,0,0,"GAsy",-137)]/window[d(0,0,0,"6vw7",1240)]*2-1,t.y=-u.clientY/window[f(0,-205,0,0,"6i#T")]*2+1,o[d(0,0,0,"w9y9",1304)]=u[l(0,0,0,"J%5P",-142)];const a=new(s[d(0,0,0,"D(&r",1212)]);a.setFromCamera(t,n.value),a[d(0,0,0,"SaHJ",1283)]=!0;const i=a.intersectObject(r[f(0,-210,0,0,"BXJg")],!0);e[l(0,0,0,"7mE[",-162)]=!0,c[d(0,0,0,"(e8b",1241)]=0===i[d(0,0,0,"AmMf",1202)]}else _0x2a2f4b[(m="7(Pd",p=36,x=-18,W(m,p-326,x-126,p- -312))]=!1;var m,p,x}),!0),window[W("[tZ*",0,0,304)](a(0,523,0,"BXJg"),(t=>{function n(t,e,n,o,r){return W(t,0,0,e- -60)}function r(t,e,n,o,r){return W(n,0,0,r- -874)}function s(t,e,n,o,r){return a(0,t- -825,0,o)}if("vWALr"===r(0,0,"G%53",0,-518)){if(o[n("d#Xe",310)]=-1,t[r(0,0,"KnY9",0,-527)]===n("@@qV",273)){if(s(-247,0,0,"bWUQ")===s(-258,0,0,"D(&r")){const t=_0x3e043d?function(){if(_0x26a82c){const o=_0x256ca1[(t="J%5P",e=-196,n(t,e- -536))](_0x15d0f0,arguments);return _0x399a9b=null,o}var t,e}:function(){};return _0xab669f=!1,t}e[(c="6vw7",i=-389,a(0,i- -922,0,c))]=!1}}else _0x4b1647=_0x55e835;var c,i}),!0)},B=["geometry","material"],K=["geometry"],X=_({__name:"model",props:{controls:{}},async setup(o){let r,s;const _=o;d.prototype.computeBoundsTree=k,d.prototype.disposeBoundsTree=b,m.prototype.raycast=S;const Q=([r,s]=y((()=>n(p,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,s(),r),T=new c({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),q=new Uint8Array(3*Q.attributes.position.count);q.fill(255);const A=new a(q,3,!0);A.setUsage(i),Q.setAttribute("color",A);const G=w(null),N=w(null),M=w(!1),F=w(-1),V=w(.2),H=new u,{camera:L,raycaster:Z}=t(),X=15/255,I=78/255,z=85/255;let U=null;C((()=>{G.value&&(console.log("targetMesh.value init",G.value),G.value.geometry.computeBoundsTree(),U=Q.boundsTree,Y(H,M,L,F,G,_.controls.instance))}));const{onLoop:E}=e();E((()=>{const t=Q.index;if(N.value)if(_.controls.instance.active||!M.value)N.value.visible=!1;else{N.value.scale.setScalar(V.value),Z.value.setFromCamera(H,L.value),Z.value.firstHitOnly=!0;const e=Z.value.intersectObject(G.value,!0);if(e.length){N.value.position.copy(e[0].point),_.controls.instance.enabled=!1,N.value.visible=!0;const n=new W;n.copy(G.value.matrixWorld).invert();const o=new l;o.center.copy(N.value.position).applyMatrix4(n),o.radius=100*V.value;const r=[],s=new f;if(U?.shapecast({intersectsBounds:t=>{const e=o.intersectsBox(t),{min:n,max:r}=t;if(e){for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let c=0;c<=1;c++)if(s.set(0===t?n.x:r.x,0===e?n.y:r.y,0===c?n.z:r.z),!o.containsPoint(s))return h;return v}return e?h:g},intersectsTriangle:(t,e,n)=>{if(n||t.intersectsSphere(o)){const t=3*e;r.push(t,t+1,t+2)}return!1}}),0===F.value||2===F.value){let e=1,n=1,o=1;0===F.value&&(e=X,n=I,o=z);for(let s=0,c=r.length;s<c;s++){const c=t.getX(r[s]);A.setX(c,e),A.setY(c,n),A.setZ(c,o)}A.needsUpdate=!0}}else N.value.visible=!1,_.controls.instance.enabled=!0}}));const D=(new x).addButton({title:"点击按钮",label:"生成模型"}),$=new d;return D.on("click",(()=>{const t=[],e=[];for(let o=0;o<A.count;o++)A.getX(o)===X&&A.getY(o)===I&&A.getZ(o)===z&&(t.push(Q.attributes.position.getX(o),Q.attributes.position.getY(o),Q.attributes.position.getZ(o)),e.push(Q.attributes.normal.getX(o),Q.attributes.normal.getY(o),Q.attributes.normal.getZ(o)));const n=new Float32Array(t);$.setAttribute("position",new a(n,3)),$.setAttribute("normal",new a(n,3))})),(t,e)=>(R(),P(j,null,[J("TresMesh",{ref_key:"targetMesh",ref:G,geometry:O(Q),scale:.005,material:O(T)},null,8,B),J("TresMesh",{ref_key:"brushMesh",ref:N,visible:!1},e[0]||(e[0]=[J("TresSphereGeometry",{args:[1,40,40]},null,-1),J("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),J("TresMesh",{geometry:O($),position:[-2,-2,2],scale:.005},e[1]||(e[1]=[J("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,K)],64))}}),I=_({__name:"collectTriangles",setup(t){const e=Q({clearColor:"#999999",antialias:!0}),n=Q({autoRotate:!1}),s=w(null);return(t,c)=>{const a=T("TresCanvas");return R(),P(j,null,[q(O(F)),q(a,N(e,{"window-size":""}),{default:A((()=>[c[0]||(c[0]=J("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),q(O(o),N({ref_key:"controlsRef",ref:s},n),null,16),c[1]||(c[1]=J("TresAmbientLight",{intensity:1},null,-1)),(R(),G(M,null,{default:A((()=>[q(X,{controls:s.value},null,8,["controls"])])),_:1})),(R(),G(M,null,{default:A((()=>[q(O(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{I as default};

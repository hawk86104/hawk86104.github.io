import{c1 as t,a3 as n,C as e,k as r}from"./three.8iJMi2lU1733198294833.js";import{b as o}from"./@tresjs.sklxXn0u1733198294833.js";import{R as c}from"./all.three.F4gaiqjm1733198294833.js";import{d as i,b as a,a6 as s,a3 as u,o as l,D as f,J as p,m,u as v}from"./@vue.-THQH3GC1733198294833.js";!function(t,n){const e=h,r=g();for(;;)try{if(109430===-parseInt(e(157))/1*(parseInt(e(145))/2)+-parseInt(e(169))/3*(-parseInt(e(154))/4)+parseInt(e(139))/5+parseInt(e(131))/6+-parseInt(e(163))/7*(-parseInt(e(138))/8)+-parseInt(e(134))/9*(parseInt(e(136))/10)+parseInt(e(150))/11*(parseInt(e(142))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(133)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["bind","36380NSCeno","vertexShader","gger","5eIQuAU","fragmentShader","table","toString","test","warn","91IvSPDN","chain","console","error","return (function() ","constructor","6icLOvW",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","prototype","replace","83568OywykW","log","apply","27pFREpr","trace","456700ZiZLck","length","15976KDTTqC","271340MiwOyn","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","void main() {","12HliYmK","while (true) {}","debu","45964EGnCFt","call","stateObject","action","#include <project_vertex>","2739033iNHGyV","#include <emissivemap_fragment>","init"];return(g=function(){return t})()}function h(t,n){const e=g();return(h=function(t,n){return e[t-=130]})(t,n)}!function(){d(this,(function(){const t=h,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(171),"i"),r=x(t(152));n[t(161)](r+t(164))&&e[t(161)](r+"input")?x():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(133)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=h;let n;try{n=Function(t(167)+t(170)+");")()}catch(o){n=window}const e=n[t(165)]=n[t(165)]||{},r=[t(132),t(162),"info",t(166),"exception",t(159),t(135)];for(let c=0;c<r.length;c++){const n=y.constructor[t(173)][t(153)](y),o=r[c],i=e[o]||n;n[t(172)]=y.bind(y),n[t(160)]=i.toString[t(153)](i),e[o]=n}}))();function x(t){function n(t){const e=h;if("string"==typeof t)return function(t){}[e(168)](e(143))[e(133)]("counter");1!==(""+t/t)[e(137)]||t%20==0?function(){return!0}[e(168)](e(144)+e(156))[e(146)](e(148)):function(){return!1}[e(168)]("debu"+e(156)).apply(e(147)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function I(){const t=["apply","TresGroup","58914mpZsTs","tpgRef","TresPlaneGeometry","TresMesh","repeat","call","2693916tFpKDF","log","TresMeshStandardMaterial",'{}.constructor("return this")( )',"error","color","onBeforeRender","console","textureMatrix","constructor","chain","366GGEglY","while (true) {}","38094cjSZFK","uv1","__proto__","add","input","set","init","aoMap","action","gger","reflectMap","renderTargetUniform","function *\\( *\\)","primitive","25645ooDWom","441880aPFyFv","exception","tmRef","counter","#444","update","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","debu","uniforms","prototype","info","trace","channel","30ukeNCq","10uNuVIt","2160631sAQZlA","toString","wrapT","attributes","bind","onBeforeCompile","showGridHelper","tmsmRef","68SupIHq","assign","value","22598VpMsQE","warn"];return(I=function(){return t})()}function _(t,n){const e=I();return(_=function(t,n){return e[t-=256]})(t,n)}!function(t,n){const e=_,r=I();for(;;)try{if(196367===parseInt(e(279))/1*(parseInt(e(292))/2)+parseInt(e(296))/3*(parseInt(e(289))/4)+-parseInt(e(264))/5*(parseInt(e(313))/6)+-parseInt(e(315))/7+-parseInt(e(265))/8+-parseInt(e(302))/9+-parseInt(e(280))/10*(-parseInt(e(281))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(294)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=_,n=new RegExp(t(262)),e=new RegExp(t(271),"i"),r=j(t(256));n.test(r+t(312))&&e.test(r+t(319))?j():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=_;let n;try{n=Function("return (function() "+t(305)+");")()}catch(o){n=window}const e=n[t(309)]=n[t(309)]||{},r=[t(303),t(293),t(276),t(306),t(266),t(272),t(277)];for(let c=0;c<r.length;c++){const n=w[t(311)][t(275)][t(285)](w),o=r[c],i=e[o]||n;n[t(317)]=w[t(285)](w),n[t(282)]=i.toString[t(285)](i),e[o]=n}}))();const C=["rotation-x"],M=["object","visible"],S=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const d=_;let g,y;const x=i,I=new t(9.5,10),b=a(),w=a(),S=a(),j=new c,E={mirror:{value:x.mirror},mixStrength:{value:x.mixStrength}},T=([g,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,y(),g);for(var z=0;z<3;z++)T[z].wrapS=n,T[z][d(283)]=n,T[z][d(300)][d(320)](16,16);const F={color:new e(d(269)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},R=t=>{const n=d;t[n(274)][n(260)]=j[n(261)],t[n(274)][n(310)]=j.textureMatrixUniform,t.uniforms=Object[n(290)](t[n(274)],E),(t=>{const n=h;t[n(155)]=t[n(155)][n(130)]("void main() {","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(155)]=t[n(155)][n(130)](n(149),n(140))})(t),(t=>{const n=h;t.fragmentShader=t[n(158)][n(130)](n(141),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(158)]=t[n(158)][n(130)](n(151),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=d;b[t(291)]&&(b[t(291)][t(284)][t(316)]=b[t(291)].attributes.uv),S[t(291)]&&(S.value[t(257)][t(278)]=1,S.value[t(286)]=R),w.value&&(w[t(291)][t(318)](j),w[t(291)][t(308)]=(n,e,r)=>{j[t(270)](n,e,r)}),x[t(307)]&&S[t(291)]&&(S.value[t(307)]=new e(x.color))})),(t,n)=>{const e=d;return l(),f(e(295),null,[p(e(299),{ref_key:e(267),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(298),{ref_key:e(297),ref:b,args:[10,10]},null,512),p(e(304),m({ref_key:e(288),ref:S},F),null,16)],8,C),p(e(263),{object:v(I),visible:t[e(287)]},null,8,M)])}}});function j(t){function n(t){const e=_;if("string"==typeof t)return function(t){}.constructor(e(314))[e(294)](e(268));1!==(""+t/t).length||t%20==0?function(){return!0}[e(311)](e(273)+"gger")[e(301)](e(258)):function(){return!1}[e(311)]("debu"+e(259))[e(294)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

import{bZ as t,a0 as n,C as e,j as r}from"./three.0IuNGJsA1725236486446.js";import{N as o}from"./@tresjs.DDzpLB7Q1725236486446.js";import{R as c}from"./all.three.seD8S5dG1725236486446.js";import{d as i,b as a,a4 as s,a1 as u,w as f,o as l,D as p,J as m,m as d,u as h}from"./@vue.9bHx4gg21725236486446.js";function v(t,n){const e=g();return(v=function(t,n){return e[t-=441]})(t,n)}function g(){const t=["exception","prototype","918219EUuJkw","12984183pcFhhj","1083718dfjRSk","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","#include <project_vertex>","info","toString","bind","__proto__","debu","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","error","12Wcxyoh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","14tuqRIV","replace","length","function *\\( *\\)","init","table","constructor","test","vertexShader",'{}.constructor("return this")( )',"chain","1164628tTdteX","input","void main() {","1033995HyqLDR","gger","apply","fragmentShader","3232624mSfYtP","2533448NKkFNJ","log","action","counter","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","while (true) {}","trace","stateObject","return (function() "];return(g=function(){return t})()}!function(t,n){const e=v,r=g();for(;;)try{if(943237===-parseInt(e(466))/1+parseInt(e(451))/2+parseInt(e(464))/3+-parseInt(e(444))/4+-parseInt(e(447))/5*(parseInt(e(476))/6)+parseInt(e(478))/7*(-parseInt(e(452))/8)+parseInt(e(465))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[v(449)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){x(this,(function(){const t=v,n=new RegExp(t(481)),e=new RegExp(t(477),"i"),r=w(t(482));n[t(485)](r+t(443))&&e[t(485)](r+t(445))?w():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[v(449)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=v;let n;try{n=Function(t(461)+t(442)+");")()}catch(o){n=window}const e=n.console=n.console||{},r=[t(453),"warn",t(469),t(475),t(462),t(483),t(459)];for(let c=0;c<r[t(480)];c++){const n=y[t(484)][t(463)].bind(y),o=r[c],i=e[o]||n;n[t(472)]=y.bind(y),n[t(470)]=i[t(470)][t(471)](i),e[o]=n}}))();function w(t){function n(t){const e=v;if("string"==typeof t)return function(t){}[e(484)](e(458)).apply(e(455));1!==(""+t/t).length||t%20==0?function(){return!0}[e(484)](e(473)+e(448)).call(e(454)):function(){return!1}[e(484)](e(473)+e(448))[e(449)](e(460)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=b;function b(t,n){const e=T();return(b=function(t,n){return e[t-=111]})(t,n)}!function(t,n){const e=b,r=T();for(;;)try{if(822828===parseInt(e(144))/1+-parseInt(e(167))/2*(parseInt(e(139))/3)+-parseInt(e(128))/4+-parseInt(e(125))/5*(-parseInt(e(122))/6)+-parseInt(e(165))/7*(-parseInt(e(171))/8)+parseInt(e(130))/9+-parseInt(e(159))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[b(166)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=b,n=new RegExp(t(162)),e=new RegExp(t(169),"i"),r=R(t(123));n[t(145)](r+t(149))&&e[t(145)](r+"input")?R():r("0")}))()}();const M=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[b(166)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();M(void 0,(function(){const t=b;let n;try{n=Function(t(135)+t(146)+");")()}catch(o){n=window}const e=n[t(113)]=n[t(113)]||{},r=[t(142),t(170),t(114),t(178),"exception",t(168),t(177)];for(let c=0;c<r[t(151)];c++){const n=M[t(111)][t(137)][t(150)](M),o=r[c],i=e[o]||n;n.__proto__=M[t(150)](M),n[t(131)]=i[t(131)].bind(i),e[o]=n}}))();const C=[_(158)],j=[_(161)],S=i({__name:_(138),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(172)}},async setup(i){const g=_;let x,y;const w=i,b=new t(9.5,10),I=a(),M=a(),S=a(),T=new c,R={mirror:{value:w[g(118)]},mixStrength:{value:w[g(112)]}},E=([x,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),x=await x,y(),x);for(var z=0;z<3;z++)E[z][g(124)]=n,E[z][g(173)]=n,E[z][g(141)][g(175)](16,16);const k={color:new e(g(176)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},U=t=>{const n=g;t.uniforms[n(133)]=T.renderTargetUniform,t[n(116)].textureMatrix=T[n(126)],t.uniforms=Object[n(152)](t.uniforms,R),(t=>{const n=v;t[n(441)]=t.vertexShader[n(479)]("void main() {",n(474)),t[n(441)]=t[n(441)].replace(n(468),n(467))})(t),(t=>{const n=v;t[n(450)]=t.fragmentShader[n(479)](n(446),n(456)),t[n(450)]=t[n(450)][n(479)]("#include <emissivemap_fragment>",n(457))})(t)};return u((()=>{const t=g;I[t(147)]&&(I[t(147)][t(120)][t(140)]=I[t(147)][t(120)].uv),S[t(147)]&&(S[t(147)].aoMap[t(132)]=1,S[t(147)][t(155)]=U),M[t(147)]&&(M[t(147)][t(143)](T),M[t(147)][t(127)]=(t,n,e)=>{T.update(t,n,e)}),w[t(163)]&&S[t(147)]&&(S.value[t(163)]=new e(w[t(163)]))})),f((()=>w[g(115)]),(t=>{b[g(148)]=t})),(t,n)=>{const e=g;return l(),p(e(117),null,[m(e(157),{ref_key:e(154),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(160),{ref_key:"tpgRef",ref:I,args:[10,10]},null,512),m("TresMeshStandardMaterial",d({ref_key:e(134),ref:S},k),null,16)],8,C),m(e(121),{object:h(b)},null,8,j)])}}});function T(){const t=["onBeforeCompile","gger","TresMesh","rotation-x","5642200CIsvCT","TresPlaneGeometry","object","function *\\( *\\)","color","counter","7UZTIFM","apply","110ivwYme","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","6676016qsktUn","#ffffff","wrapT","action","set","#444","trace","error","constructor","mixStrength","console","info","showGridHelper","uniforms","TresGroup","mirror","call","attributes","primitive","2022MaBVgl","init","wrapS","3580BhSSBU","textureMatrixUniform","onBeforeRender","4539004wWjOSY","stateObject","2007729HYJvHF","toString","channel","reflectMap","tmsmRef","return (function() ","while (true) {}","prototype","reflectorDiffuse","17223nanoMr","uv1","repeat","log","add","1538679xIvgJW","test",'{}.constructor("return this")( )',"value","visible","chain","bind","length","assign","debu","tmRef"];return(T=function(){return t})()}function R(t){function n(t){const e=b;if("string"==typeof t)return function(t){}[e(111)](e(136))[e(166)](e(164));1!==(""+t/t)[e(151)]||t%20==0?function(){return!0}[e(111)](e(153)+e(156))[e(119)](e(174)):function(){return!1}[e(111)](e(153)+e(156))[e(166)](e(129)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

import{a6 as t,_ as e}from"./three.YREzp-_G1729505164040.js";import{U as n,J as r,Y as a,L as s}from"./@tresjs.IsKybBdF1729505164040.js";import{b as o}from"./index.cGXPpcAx1729505164040.js";import"./index.njaJTgNB1729505164040.js";import{C as i}from"./three-custom-shader-material.N2P3il9e1729505164040.js";import"./object-hash.3VgPOje51729505164040.js";import"./@amap.-tZv8Pyx1729505164040.js";import"./glsl-tokenizer.octUzVvo1729505164040.js";import{p as l}from"./gl-noise.BrVtymbx1729505164040.js";import{d as u,b as c,a3 as p,w as f,o as g,E as h,L as m,j as v,u as d,r as _,f as b,g as y,aj as w,ak as M,m as j,al as x}from"./@vue.JNsx1iN61729505164040.js";import{P as I}from"./tweakpane.yHWGBmom1729505164040.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.yNZPcYG21729505164040.js";import"./@vueuse.9dhnH8nd1729505164040.js";import"./three-stdlib.pC02qkfn1729505164040.js";import"./@pmndrs.hWhjK3J51729505164040.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.qhLZsG4K1729505164040.js";import"./all.three.FTr54iDs1729505164040.js";import"./oimophysics.x0jH7fze1729505164040.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.bA7-CfYy1729505164040.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.R4Lrg7og1729505164040.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.nSZhzkT_1729505164040.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.QI--_JqW1729505164040.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.wdDMnkS01729505164040.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.TSCENKu61729505164040.js";import"./glsl-token-string.GzxNJglV1729505164040.js";import"./glsl-token-functions.q-oNdpFR1729505164040.js";import"./jszip.GmmbuCmD1729505164040.js";const z=H;!function(t,e){const n=H,r=G();for(;;)try{if(157406===-parseInt(n(313))/1+parseInt(n(294))/2*(parseInt(n(341))/3)+parseInt(n(339))/4*(parseInt(n(326))/5)+-parseInt(n(338))/6*(-parseInt(n(319))/7)+-parseInt(n(347))/8+parseInt(n(293))/9*(-parseInt(n(321))/10)+parseInt(n(343))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=H,e=new RegExp(t(336)),n=new RegExp(t(303),"i"),r=k("init");e.test(r+"chain")&&n[t(342)](r+t(335))?k():r("0")}))()}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(292)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(){const t=["table","exception","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","log","Color","input","function *\\( *\\)","customWaterMesh","2028UIoJhU","36jAsFpC","info","897513bUFfvc","test","4004880gXgjEt","tmRef","baseMaterial","Flatshading","2216128xUOyxg","brightness","MeshPhysicalMaterial","DoubleSide","dispose","action","convertLinearToSRGB","material","apply","2736VfmGan","2wDslWe","waterHighlight","stateObject","prototype","debu","__proto__","#52a7f7","height","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresBoxGeometry","rotation-x","length","gger","bind","TresMesh","needsUpdate","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","trace","231452plPhdF","constructor","console","while (true) {}","toString","#b3ffff","2422zhYBZo","fragment","6130nvMkWe",'{}.constructor("return this")( )',"flatShading","uTime","string","40015QmYLbA","value","uHeight","waterColor"];return(G=function(){return t})()}T(void 0,(function(){const t=H;let e;try{e=Function("return (function() "+t(322)+");")()}catch(a){e=window}const n=e.console=e[t(315)]||{},r=[t(333),"warn",t(340),t(302),t(331),t(330),t(312)];for(let s=0;s<r[t(306)];s++){const e=T[t(314)][t(297)][t(308)](T),a=r[s],o=n[a]||e;e[t(299)]=T[t(308)](T),e.toString=o[t(317)][t(308)](o),n[a]=e}}))();const P=[z(305)],B=["args"];function H(t,e){const n=G();return(H=function(t,e){return n[t-=288]})(t,e)}const F=u({__name:z(337),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(300)},waterHighlight:{default:z(318)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const a=z,s=t,o=c(null),u={vertex:a(311),fragment:a(332)},_={uTime:{value:0},waterColor:{value:new(e[a(334)])(s[a(329)])[a(290)]()},waterHighlight:{value:new(e[a(334)])(s[a(295)])[a(290)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[a(348)]},uHeight:{value:s[a(301)]}},{onLoop:b}=n();return b((({elapsed:t})=>{const e=a;_[e(324)][e(327)]=-t/5})),p((()=>{const t=a;s[t(301)]&&(_[t(328)][t(327)]=s[t(301)]),s[t(329)]&&(_[t(329)].value=new(e[t(334)])(s[t(329)])[t(290)]()),s[t(295)]&&(_[t(295)][t(327)]=new(e[t(334)])(s[t(295)]).convertLinearToSRGB()),s.brightness&&(_[t(348)][t(327)]=s[t(348)])})),f((()=>s[a(346)]),(t=>{const e=a;o.value[e(291)][e(310)]=!0})),f((()=>s[a(345)]),(t=>{const n=a,r=new i({baseMaterial:e[t],vertexShader:l(u.vertex),fragmentShader:u.fragment,uniforms:_,flatShading:s[n(346)],side:e[n(350)],roughness:.2,metalness:.1,silent:!0});o[n(327)].material[n(288)](),o[n(327)][n(291)]=r})),(t,n)=>{const s=a;return g(),h(s(309),{ref_key:s(344),ref:o,"rotation-x":-Math.PI/2},[m(s(304),{args:[5,5,t[s(301)],64,64,1]},null,8,B),v(d(r),{baseMaterial:e[s(349)],vertexShader:d(l)(u.vertex),fragmentShader:u[s(320)],uniforms:_,side:e[s(350)],roughness:.2,metalness:.1,flatShading:t.Flatshading,silent:""},null,8,["baseMaterial","vertexShader","fragmentShader","side",s(323)])],8,P)}}});function k(t){function e(t){const n=H;if(typeof t===n(325))return function(t){}[n(314)](n(316)).apply("counter");1!==(""+t/t)[n(306)]||t%20==0?function(){return!0}.constructor(n(298)+n(307)).call(n(289)):function(){return!1}[n(314)](n(298)+"gger")[n(292)](n(296)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=L;!function(t,e){const n=L,r=E();for(;;)try{if(333518===-parseInt(n(359))/1+-parseInt(n(368))/2*(parseInt(n(386))/3)+parseInt(n(329))/4*(-parseInt(n(383))/5)+-parseInt(n(367))/6*(parseInt(n(345))/7)+-parseInt(n(340))/8*(parseInt(n(376))/9)+parseInt(n(382))/10+parseInt(n(355))/11*(parseInt(n(354))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(375)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){O(this,(function(){const t=L,e=new RegExp(t(377)),n=new RegExp(t(374),"i"),r=U(t(380));e[t(372)](r+t(331))&&n[t(372)](r+"input")?U():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(375)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();D(void 0,(function(){const t=L,e=function(){const t=L;let e;try{e=Function(t(362)+t(334)+");")()}catch(n){e=window}return e}(),n=e[t(337)]=e.console||{},r=[t(342),t(370),t(361),t(366),"exception",t(371),t(365)];for(let a=0;a<r[t(341)];a++){const e=D[t(332)][t(325)][t(339)](D),s=r[a],o=n[s]||e;e[t(343)]=D[t(339)](D),e[t(385)]=o.toString[t(339)](o),n[s]=e}}))();const R=m("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),A=m("TresAmbientLight",{intensity:.5},null,-1),N=m(W(327),{position:[15,15,15],intensity:1},null,-1);function L(t,e){const n=E();return(L=function(t,e){return n[t-=319]})(t,e)}function E(){const t=["1099820RNrpnh","label","chain","constructor","gger",'{}.constructor("return this")( )',"waterHighlight","水体颜色","console","value","bind","154632mdpxqt","length","log","__proto__","Flatshading","49kBkRSP","while (true) {}","counter","#3a78a2","neg-y.jpg","MeshBasicMaterial","addBinding","pos-z.jpg","MeshLambertMaterial","6382452kPGgnH","33cXQxbP","target","MeshPhongMaterial","ACESFilmicToneMapping","396262DPfApw","addBlade","info","return (function() ","list","MeshPhysicalMaterial","trace","error","131286QSOsJg","96lyJoPP","customWater","warn","table","test","neg-x.jpg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","243evbNJG","function *\\( *\\)","MeshNormalMaterial","MeshStandardMaterial","init","brightness","1430680QmuBED","5IJoNWB","change","toString","3681HKHslR","stateObject","string","debu","#627179","baseMaterial","MeshDepthMaterial","MeshToonMaterial","prototype","#52a7f7","TresDirectionalLight","height"];return(E=function(){return t})()}const J=u({__name:W(369),setup(t){const n=W,r=_({alpha:!0,toneMapping:e[n(358)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(321),sectionColor:n(348),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(326),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(364)}),c=new I;return c.addBinding(u,n(328),{label:"高度",min:.1,max:5,step:.1}),c[n(351)](u,"waterColor",{label:n(336)}),c[n(351)](u,n(335),{label:"浪头颜色"}),c[n(351)](u,n(381),{label:"亮度",min:0,max:1,step:.01}),c[n(351)](u,n(344),{label:"Flatshading"}),c[n(360)]({view:n(363),label:"材质",options:[{text:n(364),value:"MeshPhysicalMaterial"},{text:n(350),value:n(350)},{text:n(378),value:n(378)},{text:"MeshStandardMaterial",value:n(379)},{text:n(357),value:"MeshPhongMaterial"},{text:n(324),value:"MeshToonMaterial"},{text:n(353),value:"MeshLambertMaterial"},{text:"MeshDepthMaterial",value:n(323)}],value:u[n(322)]}),c.on(n(384),(t=>{const e=n;"材质"===t[e(356)][e(330)]&&(u[e(322)]=t[e(338)])})),(t,e)=>{const c=n;return g(),b(d(s),j(r,{"window-size":""}),{default:y((()=>[R,v(d(a),w(M(i)),null,16),A,N,v(F,w(M(u)),null,16),v(d(S),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:y((()=>[v(d(o),{files:["pos-x.jpg",c(373),"pos-y.jpg",c(349),c(352),"neg-z.jpg"],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function U(t){function e(t){const n=L;if(typeof t===n(319))return function(t){}[n(332)](n(346))[n(375)](n(347));1!==(""+t/t)[n(341)]||t%20==0?function(){return!0}[n(332)](n(320)+"gger").call("action"):function(){return!1}[n(332)](n(320)+n(333))[n(375)](n(387)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{J as default};

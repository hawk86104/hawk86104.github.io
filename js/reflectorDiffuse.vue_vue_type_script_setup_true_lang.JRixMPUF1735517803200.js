import{c7 as t,a3 as n,C as e,k as r}from"./three.-uH5I3Xp1735517803200.js";import{b as o}from"./@tresjs.0qL_P2CE1735517803200.js";import{R as c}from"./all.three.OiQSAkvz1735517803200.js";import{d as i,b as a,a6 as s,a3 as u,o as f,D as l,J as p,m,u as d}from"./@vue.-THQH3GC1735517803200.js";function v(t,n){const e=g();return(v=function(t,n){return e[t-=298]})(t,n)}!function(t,n){const e=v,r=g();for(;;)try{if(437911===-parseInt(e(302))/1+parseInt(e(319))/2*(parseInt(e(313))/3)+-parseInt(e(329))/4+parseInt(e(332))/5*(-parseInt(e(331))/6)+-parseInt(e(321))/7*(-parseInt(e(333))/8)+parseInt(e(334))/9*(-parseInt(e(300))/10)+parseInt(e(307))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[v(317)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["354663gFcTnl","call","table","constructor","vertexShader","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","bind","190RyiUhn","string","149465dvWFqx","debu","info","prototype","action","10717267GkLBaq","chain","warn","log","void main() {","test","5142DHYxle","while (true) {}",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","replace","708sEpKHX","#include <project_vertex>","84urucjM","toString","gger","counter","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","console","init","fragmentShader","1852284hxCdEF","length","869598BJIlJb","5RXIAKx","242040AuhVcz"];return(g=function(){return t})()}!function(){h(this,(function(){const t=v,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(316),"i"),r=y(t(327));n[t(312)](r+t(308))&&e[t(312)](r+"input")?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[v(317)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=v;let n;try{n=Function("return (function() "+t(315)+");")()}catch(o){n=window}const e=n.console=n[t(326)]||{},r=[t(310),t(309),t(304),"error","exception",t(336),"trace"];for(let c=0;c<r[t(330)];c++){const n=x[t(337)][t(305)].bind(x),o=r[c],i=e[o]||n;n.__proto__=x[t(299)](x),n[t(322)]=i[t(322)][t(299)](i),e[o]=n}}))();function y(t){function n(t){const e=v;if(typeof t===e(301))return function(t){}[e(337)](e(314))[e(317)](e(324));1!==(""+t/t)[e(330)]||t%20==0?function(){return!0}[e(337)](e(303)+e(323))[e(335)](e(306)):function(){return!1}.constructor(e(303)+e(323))[e(317)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function I(t,n){const e=M();return(I=function(t,n){return e[t-=169]})(t,n)}const _=I;!function(t,n){const e=I,r=M();for(;;)try{if(835925===parseInt(e(204))/1+parseInt(e(206))/2+-parseInt(e(207))/3*(-parseInt(e(200))/4)+parseInt(e(213))/5+-parseInt(e(228))/6+parseInt(e(205))/7*(-parseInt(e(203))/8)+parseInt(e(221))/9*(-parseInt(e(189))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(201)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=I,n=new RegExp(t(232)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(198));n[t(211)](r+t(225))&&e[t(211)](r+"input")?E():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function M(){const t=["3ODVQyE","while (true) {}","gger","prototype","test","TresMeshStandardMaterial","4215350RrNGoZ","wrapS","console","counter","visible","return (function() ","renderTargetUniform","color","18IlMoIl","info","TresMesh","assign","chain","#ffffff","uniforms","7190736rQGiwQ","object","set","bind","function *\\( *\\)","tpgRef","uv1","onBeforeCompile","add","string","constructor","__proto__","rotation-x","aoMap","warn","#444","channel","textureMatrixUniform","call","repeat","reflectorDiffuse","TresPlaneGeometry","length","attributes","debu","8316290zfaUId","textureMatrix","wrapT","action","log","tmsmRef","stateObject","showGridHelper","table","init","value","5912836vfyPuQ","apply","tmRef","8ZfGoMQ","1433290AFSGit","1653897rGyehN","358682WiSCDv"];return(M=function(){return t})()}w(void 0,(function(){const t=I,n=function(){const t=I;let n;try{n=Function(t(218)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(215)]=n[t(215)]||{},r=[t(193),t(178),t(222),"error","exception",t(197),"trace"];for(let o=0;o<r[t(186)];o++){const n=w[t(174)][t(210)][t(231)](w),c=r[o],i=e[c]||n;n[t(175)]=w[t(231)](w),n.toString=i.toString.bind(i),e[c]=n}}))();const C=[_(176)],S=[_(229),_(217)],j=i({__name:_(184),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(226)}},async setup(i){const h=_;let g,x;const y=i,I=new t(9.5,10),b=a(),w=a(),M=a(),j=new c,E={mirror:{value:y.mirror},mixStrength:{value:y.mixStrength}},z=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var R=0;R<3;R++)z[R][h(214)]=n,z[R][h(191)]=n,z[R][h(183)][h(230)](16,16);const T={color:new e(h(179)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},G=t=>{const n=h;t[n(227)].reflectMap=j[n(219)],t[n(227)][n(190)]=j[n(181)],t[n(227)]=Object[n(224)](t.uniforms,E),(t=>{const n=v;t[n(338)]=t.vertexShader[n(318)]("void main() {",n(325)),t[n(338)]=t[n(338)][n(318)](n(320),n(298))})(t),(t=>{const n=v;t[n(328)]=t.fragmentShader[n(318)](n(311),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.fragmentShader=t[n(328)][n(318)]("#include <emissivemap_fragment>","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=h;b.value&&(b.value.attributes[t(170)]=b[t(199)][t(187)].uv),M[t(199)]&&(M.value[t(177)][t(180)]=1,M[t(199)][t(171)]=G),w[t(199)]&&(w.value[t(172)](j),w[t(199)].onBeforeRender=(t,n,e)=>{j.update(t,n,e)}),y[t(220)]&&M[t(199)]&&(M[t(199)][t(220)]=new e(y[t(220)]))})),(t,n)=>{const e=h;return f(),l("TresGroup",null,[p(e(223),{ref_key:e(202),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(185),{ref_key:e(169),ref:b,args:[10,10]},null,512),p(e(212),m({ref_key:e(194),ref:M},T),null,16)],8,C),p("primitive",{object:d(I),visible:t[e(196)]},null,8,S)])}}});function E(t){function n(t){const e=I;if(typeof t===e(173))return function(t){}[e(174)](e(208))[e(201)](e(216));1!==(""+t/t)[e(186)]||t%20==0?function(){return!0}[e(174)](e(188)+e(209))[e(182)](e(192)):function(){return!1}[e(174)](e(188)+e(209))[e(201)](e(195)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

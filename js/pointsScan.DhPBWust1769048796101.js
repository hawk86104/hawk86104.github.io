import{importShared as t}from"./3d-tiles-renderer.DoRCwQO21769048796101.js";import{_sfc_main as e}from"./earth.vue_vue_type_script_setup_true_lang.CAiJEFrp1769048796101.js";import{useLoop as n,OrbitControls_default as a}from"./index.DY1Qq3wV1769048796101.js";import{Pane as r}from"./tweakpane.BbuIEN141769048796101.js";const{defineComponent:o}=await t("vue"),{createElementVNode:i,normalizeProps:l,guardReactiveProps:u,openBlock:s,createElementBlock:c}=await t("vue"),p=await t("three"),{watch:m}=await t("vue"),v=o({__name:"pointsScan",props:{color:{default:"#FFFFFF"},opacity:{default:1},speed:{default:1}},setup(t){const e=t,a={uniforms:{uTime:{value:0},pointNum:{value:new p.Vector2(32,16)},uColor:{value:new p.Color(e.color)},uOpacity:{value:e.opacity}},transparent:!0,vertexShader:"\n\t\t\t\t\tvarying vec2 vUv;\n                    void main(){\n\t\t\t\t\t\tvUv=uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                    }",fragmentShader:"\n\t\t\t\t\tfloat PI = acos(-1.0);\n                    uniform vec3 uColor;\n                    uniform vec2 pointNum;\n                    uniform float uTime;\n                    varying vec2 vUv;\n\t\t\t\t\tuniform float uOpacity;\n                    void main(){\n\t\t\t\t\t\tvec2 uv = vUv+ vec2(0.0, uTime);\n\t\t\t\t\t\tfloat current = abs(sin(uv.y * PI));\n\t\t\t\t\t\tif(current < sin(0.4714*PI)) {\n\t\t\t\t\t\t\tcurrent=current*0.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfloat d = distance(fract(uv * pointNum*2.0), vec2(0.5, 0.5));\n\n\t\t\t\t\t\tif(d > current*0.2 ) {\n\t\t\t\t\t\t\tdiscard;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgl_FragColor =vec4(uColor,current*uOpacity);\n\t\t\t\t\t\t}\n                    }"};m(()=>[e.color,e.opacity],([t,e])=>{a.uniforms.uColor.value=new p.Color(t),a.uniforms.uOpacity.value=e});const{onBeforeRender:r}=n();return r(({delta:t})=>{a.uniforms.uTime.value+=.1*t*e.speed}),(t,e)=>(s(),c("TresMesh",null,[e[0]||(e[0]=i("TresSphereGeometry",{args:[1,32,32]},null,-1)),i("TresShaderMaterial",l(u(a)),null,16)]))}}),{defineComponent:d}=await t("vue"),{createElementVNode:f,unref:w,createVNode:_,Suspense:g,withCtx:y,openBlock:C,createBlock:h,normalizeProps:x,guardReactiveProps:T,resolveComponent:B}=await t("vue"),{reactive:P}=await t("vue"),b=d({__name:"pointsScan",setup(t){const n=P({color:"#ffffff",opacity:.48,speed:4.8,scale:1.1}),o=new r;return o.addBinding(n,"color",{label:"颜色"}),o.addBinding(n,"opacity",{label:"透明度",min:0,max:1,step:.01}),o.addBinding(n,"speed",{label:"速度",min:.1,max:5,step:.1}),o.addBinding(n,"scale",{label:"大小",min:1.01,max:2,step:.01}),(t,r)=>{const o=B("TresCanvas");return C(),h(o,{clearColor:"#201919","window-size":""},{default:y(()=>[r[0]||(r[0]=f("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),_(w(a),{enableDamping:""}),r[1]||(r[1]=f("TresAmbientLight",{intensity:3},null,-1)),(C(),h(g,null,{default:y(()=>[_(e)]),_:1})),(C(),h(g,null,{default:y(()=>[_(v,x(T(n)),null,16)]),_:1}))]),_:1})}}});export{b as default};

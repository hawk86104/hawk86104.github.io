import{e as n,h as t,a as e,o}from"./@tresjs.KzbsBNvc1742896998262.js";import{P as r}from"./tweakpane.ivGeiIdz1742896998262.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.dLWD7sjV1742896998262.js";import{_ as s,ab as a}from"./three.0CcRceKb1742896998262.js";import{d as c,a3 as u,w as l,o as f,f as d,u as p,H as v,N as m,g as h,j as g,m as w,al as x,r as b,e as y}from"./@vue.L-brCdZe1742896998262.js";import"./postprocessing.JNDZZkh81742896998262.js";import"./@vueuse.AtktgvWs1742896998262.js";import"./all.three.eMqwCp1p1742896998262.js";import"./oimophysics.WhCxc1Ho1742896998262.js";const _=j;!function(n,t){const e=j,o=k();for(;;)try{if(760789===parseInt(e(218))/1+-parseInt(e(237))/2+parseInt(e(220))/3*(-parseInt(e(240))/4)+parseInt(e(234))/5+parseInt(e(213))/6*(-parseInt(e(206))/7)+-parseInt(e(215))/8+parseInt(e(198))/9*(parseInt(e(239))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(209)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function k(){const n=["hexGridMaterial","value","toString","counter","maskTexture","gger","413rNHiNy","debu","wavePow","apply","isReversed","__proto__","console","74532yWjQIO","trace","8704752Wriotu","hasMaskTexture","return (function() ","686621NYQqfg","waveFrequency","3428553CDrjhl","call","init","table","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","exception","info","action","constructor","side","division","bind","length","divisionScaleX","851985Iqkgik","string","stateObject","685150QAjPGN","baseMaterial","32101890WxVssQ","4dcUnyG","speed","MeshPhongMaterial","while (true) {}","gridWeight","chain","direction","9uideZk","raisedBottom"];return(k=function(){return n})()}!function(){I(this,(function(){const n=j,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=P(n(222));t.test(o+n(245))&&e.test(o+"input")?P():o("0")}))()}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(209)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function j(n,t){const e=k();return j=function(n,t){return e[n-=198]},j(n,t)}M(void 0,(function(){const n=j;let t;try{t=Function(n(217)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(212)]=t.console||{},o=["log","warn",n(226),"error",n(225),n(223),n(214)];for(let i=0;i<o.length;i++){const t=M[n(228)].prototype[n(231)](M),r=o[i],s=e[r]||t;t[n(211)]=M[n(231)](M),t[n(202)]=s[n(202)][n(231)](s),e[r]=t}}))();const T=_(224),X=c({__name:_(200),props:{baseMaterial:{default:new(s[_(242)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const r=_;let i,s;const c=o,v={gridWeight:{value:c[r(244)]},raisedBottom:{value:c.raisedBottom},waveFrequency:{value:c[r(219)]},wavePow:{value:c.wavePow},direction:{value:c[r(246)]},isReversed:{value:c[r(210)]},hasMaskTexture:{value:c[r(216)]},maskTexture:{value:null},division:{value:c[r(230)]},divisionScaleX:{value:c[r(233)]},time:{value:0}};c[r(204)]&&(v.maskTexture[r(201)]=([i,s]=u((()=>e([c[r(204)]]))),i=await i,s(),i)),l((()=>[c.gridWeight,c.raisedBottom,c[r(219)],c[r(208)],c.division,c.divisionScaleX,c.direction,c.isReversed,c[r(216)]]),(([n,t,e,o,i,s,a,c,u])=>{const l=r;v[l(244)][l(201)]=n,v[l(199)].value=t,v[l(219)][l(201)]=e,v[l(208)][l(201)]=o,v[l(230)][l(201)]=i,v[l(233)][l(201)]=s,v[l(246)][l(201)]=a,v[l(210)][l(201)]=c,v[l(216)][l(201)]=u}));const{onLoop:m}=n();return m((({delta:n})=>{const t=r;v.time[t(201)]+=n*c[t(241)]})),(n,e)=>{const i=r;return f(),d(p(t),{baseMaterial:o.baseMaterial,vertexShader:T,side:a,transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[i(238),i(229),"fragmentShader"])}}});function P(n){function t(n){const e=j;if(typeof n===e(235))return function(n){}.constructor(e(243))[e(209)](e(203));1!==(""+n/n)[e(232)]||n%20==0?function(){return!0}[e(228)](e(207)+e(205))[e(221)](e(227)):function(){return!1}[e(228)](e(207)+"gger")[e(209)](e(236)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const C=R;function S(){const n=["apply","prototype","36WxOyiv","TresPlaneGeometry","log","debu","1120466mOWdlW","bind","474JXruIf","14966oJkGnx","test","stateObject","63928FhXGAZ","counter","1222696XiXkFA","action","146113ASUcct","while (true) {}","MeshBasicMaterial","warn","console","exception","hexGridMesh","chain","184408zHlIcO","gger","2672540KXPGCX","input","call","info","$attrs","error","rotation","15TYjMrH","toString","length","table",'{}.constructor("return this")( )',"constructor","TresMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","130gTdXjA"];return(S=function(){return n})()}!function(n,t){const e=R,o=S();for(;;)try{if(348540===parseInt(e(175))/1+-parseInt(e(157))/2+-parseInt(e(184))/3*(parseInt(e(163))/4)+parseInt(e(177))/5+parseInt(e(159))/6*(-parseInt(e(160))/7)+-parseInt(e(165))/8*(-parseInt(e(153))/9)+-parseInt(e(192))/10*(parseInt(e(167))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const A=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){A(this,(function(){const n=R,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(191),"i"),o=B("init");t[n(161)](o+n(174))&&e[n(161)](o+n(178))?B():o("0")}))()}();const G=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(193)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function R(n,t){const e=S();return R=function(n,t){return e[n-=152]},R(n,t)}G(void 0,(function(){const n=R;let t;try{t=Function("return (function() "+n(188)+");")()}catch(r){t=window}const e=t[n(171)]=t[n(171)]||{},o=[n(155),n(170),n(180),n(182),n(172),n(187),"trace"];for(let i=0;i<o[n(186)];i++){const t=G.constructor[n(152)][n(158)](G),r=o[i],s=e[r]||t;t.__proto__=G[n(158)](G),t[n(185)]=s[n(185)][n(158)](s),e[r]=t}}))();const D=[C(183)],W=c({__name:C(173),setup(n){const t=C,e=new(s[t(169)]);return(n,o)=>{const r=t;return f(),v(r(190),{rotation:[-Math.PI/2,0,0]},[o[0]||(o[0]=m(r(154),{args:[1,1]},null,-1)),(f(),d(x,null,{default:h((()=>[g(X,w({baseMaterial:p(e)},n[r(181)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,["baseMaterial"])])),_:1}))],8,D)}}});function B(n){function t(n){const e=R;if("string"==typeof n)return function(n){}.constructor(e(168))[e(193)](e(164));1!==(""+n/n)[e(186)]||n%20==0?function(){return!0}.constructor("debu"+e(176))[e(179)](e(166)):function(){return!1}[e(189)](e(156)+e(176)).apply(e(162)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=z,o=L();for(;;)try{if(472420===parseInt(e(439))/1*(-parseInt(e(415))/2)+-parseInt(e(425))/3*(-parseInt(e(429))/4)+parseInt(e(391))/5+parseInt(e(407))/6*(-parseInt(e(423))/7)+parseInt(e(390))/8+parseInt(e(405))/9+parseInt(e(416))/10*(parseInt(e(414))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(430)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){F(this,(function(){const n=z,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(412),"i"),o=Z("init");t.test(o+n(402))&&e[n(388)](o+n(424))?Z():o("0")}))()}();const q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(430)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function z(n,t){const e=L();return z=function(n,t){return e[n-=386]},z(n,t)}q(void 0,(function(){const n=z,t=function(){const n=z;let t;try{t=Function(n(426)+n(399)+");")()}catch(e){t=window}return t}(),e=t[n(395)]=t[n(395)]||{},o=["log","warn","info","error",n(421),n(413),n(398)];for(let r=0;r<o[n(393)];r++){const t=q[n(396)][n(408)][n(404)](q),i=o[r],s=e[i]||t;t[n(397)]=q[n(404)](q),t[n(411)]=s[n(411)].bind(s),e[i]=t}}))();const E=c({__name:"hexGridGround",setup(n){const t=z,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),s=b({color:"#de62f2",speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new r({title:t(427),expanded:!0});return a[t(387)](s,t(403),{label:"图片纹理"}),a[t(387)](s,"color",{label:"颜色"}),a[t(387)](s,t(417),{label:"速度",min:-5,max:5,step:.1}),a[t(387)](s,t(401),{label:t(418),min:.001,max:.5,step:.001}),a[t(387)](s,t(389),{label:t(409),min:.001,max:1,step:.001}),a[t(387)](s,t(420),{label:"分段",min:.001,max:1,step:.001}),a[t(387)](s,"wavePow",{label:t(394),min:1,max:30,step:.1}),a[t(387)](s,"division",{label:t(431),min:.1,max:50,step:.1}),a[t(387)](s,t(422),{label:t(410),min:.1,max:10,step:.1}),a[t(387)](s,t(419),{label:t(406)}),a[t(387)](s,t(436),{label:t(432),min:3,max:6,step:1}),(n,r)=>{const a=t,c=y(a(435));return f(),d(c,{clearColor:a(400),"window-size":""},{default:h((()=>[r[0]||(r[0]=m(a(428),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),g(p(o),{enableDamping:"",autoRotate:""}),g(W,w(s,{scale:9}),null,16),(f(),d(x,null,{default:h((()=>[g(i,w({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function L(){const n=["length","渐变强度","console","constructor","__proto__","trace",'{}.constructor("return this")( )',"#666666","gridWeight","chain","hasMaskTexture","bind","3151071ooiIFx","颜色取反","167874LRXJXU","prototype","渐变宽度","网格横向缩放","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","110Akxuqd","5580cwcWKT","132970eHqhVz","speed","网格宽度","isReversed","waveFrequency","exception","divisionScaleX","203GEhErz","input","132qkiKkI","return (function() ","hexGridGround","TresPerspectiveCamera","83976KXPpCl","apply","网格整体缩放","方向类别","gger","counter","TresCanvas","direction","call","stateObject","293QGayXL","action","addBinding","test","raisedBottom","1340416YHxIkl","2634520GbDmfV","debu"];return(L=function(){return n})()}function Z(n){function t(n){const e=z;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(430)](e(434));1!==(""+n/n)[e(393)]||n%20==0?function(){return!0}.constructor(e(392)+e(433))[e(437)](e(386)):function(){return!1}.constructor(e(392)+e(433)).apply(e(438)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{E as default};

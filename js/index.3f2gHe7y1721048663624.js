var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{au as s,o as u,r as l,aP as f,aQ as p,aR as d,H as h,aN as v,aO as m,z as g,ba as _,C as y,Z as x,W as I,l as b,m as S,n as w,y as M,f as R,V as E,g as A,a5 as T,k as P,b9 as D,j as z,bw as O,d as C,a9 as F,B as j,a as k,aM as B,e as U,M as N,aj as L,a7 as H,c0 as Z,c1 as W,U as G}from"./three.HEgnMaTu1721048663624.js";import{a as V,$,r as q}from"./@tresjs.Xiq_TH801721048663624.js";import{R as Y}from"./three-stdlib.Bcxn6yVp1721048663624.js";import{Z as X,b as K,a as Q,w as J,u as nn,d as tn,U as en,a3 as rn,o as on,D as an,G as cn,I as sn,a0 as un,a7 as ln,a2 as fn,f as pn,J as dn,a8 as hn,r as vn,M as mn,X as gn,q as _n,t as yn,F as xn,a4 as In,m as bn}from"./@vue.ApkyOKE71721048663624.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.jxJ3fman1721048663624.js";import{o as Rn}from"./object-hash.E5Z0NA4F1721048663624.js";var En=Tn;!function(n,t){for(var e=Tn,r=Dn();;)try{if(895016===-parseInt(e(374))/1+-parseInt(e(379))/2+-parseInt(e(358))/3*(parseInt(e(357))/4)+-parseInt(e(367))/5*(parseInt(e(362))/6)+parseInt(e(375))/7+parseInt(e(371))/8+parseInt(e(380))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(355)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(n,t){var e=Dn();return(Tn=function(n,t){return e[n-=341]})(n,t)}!function(){An(this,(function(){var n=Tn,t=new RegExp(n(383)),e=new RegExp(n(349),"i"),r=Cn("init");t.test(r+"chain")&&e[n(370)](r+"input")?Cn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(355)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(){var n=["counter","545749gSSmRT","1883637MTsRhO","console","stateObject","action","2717782gVMUGf","30593016adnVox","destructor","debu","function *\\( *\\)","table","call","trace",'{}.constructor("return this")( )',"log","remove","map","dispose","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","add","info","bind","prototype","__proto__","apply","string","7804JAOHWq","699YjPhhv","virtualScene","constructor","geometry","6lWETtP","while (true) {}","gger","return (function() ","traverse","6324170fnOukk","toString","material","test","6806064zAzqHQ","warn"];return(Dn=function(){return n})()}Pn(void 0,(function(){for(var n=Tn,t=function(){var n,t=Tn;try{n=Function(t(365)+t(343)+");")()}catch(e){n=window}return n}(),e=t[n(376)]=t[n(376)]||{},r=[n(344),n(372),n(351),"error","exception",n(384),n(342)],o=0;o<r.length;o++){var i=Pn.constructor[n(353)][n(352)](Pn),a=r[o],c=e[a]||i;i[n(354)]=Pn[n(352)](Pn),i[n(368)]=c[n(368)][n(352)](c),e[a]=i}}))();class zn extends s{constructor(){var n=Tn;super(),this[n(359)]=null,this.virtualScene=new u}add(...n){var t=Tn;return this.virtualScene[t(350)](...n),this}[En(381)](){var n=En;this.virtualScene[n(366)]((t=>{var e=n;t instanceof l&&(t[e(361)][e(347)](),t.material[e(347)](),t[e(369)][e(346)]&&t[e(369)][e(346)][e(347)](),this[e(359)][e(345)](t))})),this.virtualScene=null}}const On=zn;function Cn(n){function t(n){var e=Tn;if(typeof n===e(356))return function(n){}[e(360)](e(363)).apply(e(373));1!==(""+n/n)[e(348)]||n%20==0?function(){return!0}[e(360)](e(382)+e(364))[e(341)](e(378)):function(){return!1}[e(360)](e(382)+e(364)).apply(e(377)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Nn;!function(n,t){const e=Nn,r=kn();for(;;)try{if(633794===parseInt(e(323))/1+parseInt(e(347))/2*(parseInt(e(320))/3)+parseInt(e(318))/4+-parseInt(e(333))/5*(-parseInt(e(358))/6)+parseInt(e(346))/7+-parseInt(e(334))/8*(-parseInt(e(348))/9)+-parseInt(e(354))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(339)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(){const n=["1554658oksOoT","6MGSmIW","1336914IcvtFV","warn","table",'{}.constructor("return this")( )',"string","trace","29031700zrhFax","outdoor/outdoor_umbrellas_1k.hdr","error","action","5627352cvsaSg","indoor/small_hangar_01_1k.hdr","outood/mossy_forest_1k.hdr","debu","init","constructor","4641320HWGdzI","info","489537cXxCRW","city/shanghai_bund_1k.hdr","log","281473qqdSYQ","indoor/abandoned_games_room_02_1k.hdr","studio/poly_haven_studio_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","outdoor/snowy_forest_path_01_1k.hdr","console","return (function() ","bind","venice/venice_sunset_1k.hdr","input","5JRgltX","24vKzKkl","__proto__","prototype","function *\\( *\\)","test","apply","while (true) {}","exception","gger","counter","length","toString"];return(kn=function(){return n})()}!function(){jn(this,(function(){const n=Nn,t=new RegExp(n(337)),e=new RegExp(n(326),"i"),r=Ln(n(316));t[n(338)](r+"chain")&&e[n(338)](r+n(332))?Ln():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(339)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bn(void 0,(function(){const n=Nn;let t;try{t=Function(n(329)+n(351)+");")()}catch(o){t=window}const e=t.console=t[n(328)]||{},r=[n(322),n(349),n(319),n(356),n(341),n(350),n(353)];for(let i=0;i<r[n(344)];i++){const t=Bn[n(317)][n(336)].bind(Bn),o=r[i],a=e[o]||t;t[n(335)]=Bn.bind(Bn),t[n(345)]=a[n(345)][n(330)](a),e[o]=t}}))();const Un={sunset:Fn(331),studio:Fn(325),city:"city/canary_wharf_1k.hdr",umbrellas:Fn(355),night:"outdoor/satara_night_1k.hdr",forest:Fn(314),snow:Fn(327),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Fn(313),urban:Fn(324),modern:"city/modern_buildings_2_1k.hdr",shangai:Fn(321)};function Nn(n,t){const e=kn();return(Nn=function(n,t){return e[n-=313]})(n,t)}function Ln(n){function t(n){const e=Nn;if(typeof n===e(352))return function(n){}[e(317)](e(340))[e(339)](e(343));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(315)+e(342)).call(e(357)):function(){return!1}.constructor(e(315)+e(342)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Zn;function Zn(n,t){const e=$n();return(Zn=function(n,t){return e[n-=390]})(n,t)}!function(n,t){const e=Zn,r=$n();for(;;)try{if(668201===parseInt(e(428))/1*(parseInt(e(408))/2)+-parseInt(e(417))/3*(parseInt(e(393))/4)+-parseInt(e(401))/5+-parseInt(e(397))/6+-parseInt(e(421))/7*(-parseInt(e(405))/8)+-parseInt(e(410))/9*(parseInt(e(415))/10)+parseInt(e(396))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=Zn,t=new RegExp(n(425)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qn("init");t[n(394)](r+"chain")&&e[n(394)](r+n(430))?qn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gn(void 0,(function(){const n=Zn,t=function(){const n=Zn;let t;try{t=Function(n(433)+n(407)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(434)]||{},r=["log",n(419),n(402),n(423),n(416),n(406),n(404)];for(let o=0;o<r[n(422)];o++){const t=Gn[n(403)][n(411)][n(413)](Gn),i=r[o],a=e[i]||t;t[n(395)]=Gn[n(413)](Gn),t[n(429)]=a.toString.bind(a),e[i]=t}}))();const Vn=Hn(427);function $n(){const n=["length","error","apply","function *\\( *\\)","Preset must be one of: ","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","9rUZNEW","toString","input","call","environment","return (function() ","console","counter","Failed to load environment map: ","action","value","setPath","332044EQhFUF","test","__proto__","23701931yPxedl","4632180DpwoQH","mapping","join","isArray","361275aejJgr","info","constructor","trace","160376TEUPEm","table",'{}.constructor("return this")( )',"239718MDWCwo","gger","4455xuadaf","prototype","debu","bind","while (true) {}","26730ctQTkh","exception","18pmEhZx","background","warn","string","35hRgJNt"];return($n=function(){return n})()}function qn(n){function t(n){const e=Zn;if(typeof n===e(420))return function(n){}[e(403)](e(414))[e(424)](e(435));1!==(""+n/n)[e(422)]||n%20==0?function(){return!0}.constructor(e(412)+"gger")[e(431)](e(390)):function(){return!1}[e(403)]("debu"+e(409)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yn=Qn;!function(n,t){const e=Qn,r=Jn();for(;;)try{if(721094===parseInt(e(282))/1+parseInt(e(289))/2*(parseInt(e(267))/3)+parseInt(e(302))/4*(-parseInt(e(299))/5)+-parseInt(e(294))/6*(parseInt(e(257))/7)+parseInt(e(256))/8+-parseInt(e(253))/9*(-parseInt(e(265))/10)+parseInt(e(248))/11*(parseInt(e(298))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Qn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(280),"i"),r=tt(n(288));t[n(269)](r+"chain")&&e[n(269)](r+n(276))?tt():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=Jn();return(Qn=function(n,t){return e[n-=248]})(n,t)}function Jn(){const n=["test","call","while (true) {}","envSence","stateObject","table","background","input","texture","debu","far","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","update","800998fsogVi","virtualScene","length","magFilter","log","TresEnvSence","init","15958rugIXt","gger","component","prototype","frames","102vUWlDq","string","info","console","11192988shSZFH","30tqaFrN","toString","symbol","775388RfVfni","apply","useDefaultScene","11zQaxLR","type","__proto__","value","environment","1206KcIckr","isArray","constructor","834872nrjPvr","496153KvlHYo","resolution","default","near","trace","exception","error","destructor","21310dsfpSr","dispose","363cFusRq","bind"];return(Jn=function(){return n})()}Kn(void 0,(function(){const n=Qn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(297)]=t[n(297)]||{},r=[n(286),"warn",n(296),n(263),n(262),n(274),n(261)];for(let i=0;i<r.length;i++){const t=Kn.constructor[n(292)][n(268)](Kn),o=r[i],a=e[o]||t;t[n(250)]=Kn[n(268)](Kn),t[n(300)]=a.toString[n(268)](a),e[o]=t}}))();const nt=tn({__name:Yn(291),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=K(null),x=null;const I=K(null);en((()=>{var n,t;const e=Qn;null==(n=I.value)||n[e(264)](),null==(t=y.value)||t[e(266)]()}));const{onBeforeLoop:b}=q();let S=1;b((()=>{const n=Qn;x&&I[n(251)]&&y.value&&(i.frames===1/0||S<i[n(293)])&&(i[n(304)]?x[n(281)](s[n(251)],u[n(251)]):x[n(281)](s[n(251)],ln(I[n(251)][n(283)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r}=V(),{preset:o,blur:i,files:a=[],path:c="",background:s}=X(n),u=K(),l=Q((()=>Array[e(400)](a[e(391)]))),h=Q((()=>l[e(391)]?f:Y)),v=K(null);return J((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(391)][r(422)]>0&&!o[r(391)]){try{v.value=await $(nn(h),l.value?[nn(n)]:nn(n),(n=>{const e=r;t[e(391)]&&n[e(392)](nn(t))}))}catch(i){throw new Error(r(436)+i)}v.value&&(u.value=l[r(391)]?v[r(391)][0]:v[r(391)],u[r(391)][r(398)]=l[r(391)]?p:d)}}),{immediate:!0}),J((()=>u.value),(n=>{const t=e;r[t(391)]&&(r[t(391)][t(432)]=n)}),{immediate:!0}),J((()=>[s[e(391)],u[e(391)]]),(([n,o])=>{const i=e;if(r[i(391)]){let e=(null==t?void 0:t[i(391)])?t[i(391)].texture:o,a=r[i(391)][i(418)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(391)][i(418)]=n?e:a}}),{immediate:!0}),J((()=>null==i?void 0:i[e(391)]),(n=>{const t=e;r.value&&(r[t(391)].backgroundBlurriness=n)}),{immediate:!0}),J(o,(async n=>{const t=e;if(n&&n in Un){const e=Vn,o=Un[n];try{v[t(391)]=await $(Y,o,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v.value&&(u.value=v[t(391)],u.value[t(398)]=d)}else if(n&&!(n in Un))throw new Error(t(426)+Object.keys(Un)[t(399)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(277)],M=n=>{const t=e;n?(u[t(251)][t(252)]=n[t(277)],i[t(275)]&&(u[t(251)][t(275)]=n[t(277)])):(u.value[t(252)]=w.value,i[t(275)]&&(u[t(251)][t(275)]=w[t(251)]))};return J(w,(n=>{y.value&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:On}),J((()=>un()[e(259)]),(n=>{var t,r,o;const a=e;if(n&&(!y[a(251)]||y.value[a(277)][a(249)]!==h)&&(l=n(),Array[a(254)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[a(249)])!==a(301)))return null==(r=y[a(251)])||r[a(266)](),y[a(251)]=new v(i[a(258)]),y[a(251)][a(277)][a(249)]=h,x=new m(i[a(260)],i[a(279)],y[a(251)]),void M(y.value);null==(o=y[a(251)])||o[a(266)](),y[a(251)]=null,M(null)}),{immediate:!0,deep:!0}),a[e(251)]=w,J((()=>i[e(304)]),(n=>{var t;const r=e;n&&(!y[r(251)]||y[r(251)][r(277)][r(249)]!==g)&&(null==(t=y[r(251)])||t[r(266)](),y[r(251)]=new v(i.resolution),x=new m(i[r(260)],i[r(279)],y[r(251)]),y[r(251)][r(277)][r(249)]=g,y[r(251)][r(277)].generateMipmaps=!1,y[r(251)][r(277)].minFilter=_,y[r(251)].texture[r(285)]=_,M(y[r(251)]))}),{immediate:!0}),(n,t)=>{const r=e;return nn(y)?(on(),an(r(287),{key:0,ref_key:r(272),ref:I},[cn(n.$slots,r(259))],512)):sn("",!0)}}});function tt(n){function t(n){const e=Qn;if(typeof n===e(295))return function(n){}[e(255)](e(271)).apply("counter");1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}[e(255)](e(278)+"gger")[e(270)]("action"):function(){return!1}.constructor(e(278)+e(290))[e(303)](e(273)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=ot;!function(n,t){const e=ot,r=at();for(;;)try{if(199924===parseInt(e(131))/1+-parseInt(e(143))/2+-parseInt(e(118))/3+-parseInt(e(116))/4+parseInt(e(129))/5+parseInt(e(132))/6*(-parseInt(e(127))/7)+parseInt(e(145))/8*(parseInt(e(147))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(107)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(n,t){const e=at();return(ot=function(n,t){return e[n-=103]})(n,t)}!function(){rt(this,(function(){const n=ot,t=new RegExp(n(119)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=pt(n(126));t[n(117)](r+n(151))&&e[n(117)](r+n(108))?pt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(107)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(){const n=["382390RptiLu","circle","310737AtifHP","30etuJdF","side","error","value","info","gger","debu","TresPlaneGeometry","prototype","index","log","114534AcrQzN","constructor","8qmiocm","counter","6771447QhbzDX","multiplyScalar","bind","rect","chain","from",'{}.constructor("return this")( )',"TresRingGeometry","toString","apply","input","toneMapped","color","__proto__","map","TresMesh","needsUpdate","trace","623164KAKaMI","test","1062558ToAjbQ","function *\\( *\\)","TresMeshBasicMaterial","action","length","exception","intensity","material","init","521402smcKqH","console"];return(at=function(){return n})()}it(void 0,(function(){const n=ot,t=function(){const n=ot;let t;try{t=Function("return (function() "+n(104)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(128)]||{},r=[n(142),"warn",n(136),n(134),n(123),"table",n(115)];for(let o=0;o<r[n(122)];o++){const t=it.constructor[n(140)][n(149)](it),i=r[o],a=e[i]||t;t[n(111)]=it[n(149)](it),t.toString=a[n(106)][n(149)](a),e[i]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=[et(109),"map",et(133),et(110)],ft=tn({__name:et(141),props:{args:{default:null},from:{default:et(150)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=K();return fn((()=>{const n=ot;e[n(135)]&&(e[n(135)][n(110)][n(148)](t[n(124)]),e.value[n(114)]=!0)})),(n,r)=>{const o=ot;return on(),an(o(113),null,[t[o(103)]===o(130)?(on(),an(o(105),ct)):"ring"===t[o(103)]?(on(),an("TresRingGeometry",st)):t[o(103)]===o(150)?(on(),an(o(139),ut)):(on(),pn(t[o(103)],{key:3,args:t})),dn(o(120),{ref_key:o(125),ref:e,toneMapped:n[o(109)],map:n[o(112)],side:nn(x),color:n[o(110)]},null,8,lt)])}}});function pt(n){function t(n){const e=ot;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(107)](e(146));1!==(""+n/n)[e(122)]||n%20==0?function(){return!0}[e(144)]("debu"+e(137)).call(e(121)):function(){return!1}[e(144)](e(138)+e(137))[e(107)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function dt(n,t){const e=_t();return(dt=function(n,t){return e[n-=265]})(n,t)}!function(n,t){const e=dt,r=_t();for(;;)try{if(839434===-parseInt(e(301))/1*(-parseInt(e(288))/2)+-parseInt(e(278))/3*(-parseInt(e(289))/4)+parseInt(e(267))/5+parseInt(e(285))/6+parseInt(e(272))/7+-parseInt(e(298))/8*(-parseInt(e(276))/9)+-parseInt(e(270))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=dt,t=new RegExp(n(271)),e=new RegExp(n(291),"i"),r=gt(n(266));t.test(r+n(304))&&e[n(283)](r+n(299))?gt():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?X(n):X(vn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=dt;null==(n=t[a(295)])||n[a(277)](),t[a(295)]=new I((null==r?void 0:r[a(295)])||p.width.value,(null==e?void 0:e[a(295)])||p.height.value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(295)])&&(t.value[a(281)]=new S((null==r?void 0:r[a(295)])||p[a(269)][a(295)],(null==e?void 0:e[a(295)])||p[a(300)][a(295)],w))})),s((()=>{const n=dt;(null==a?void 0:a.value)&&(l[n(295)].setRenderTarget(t[n(295)]),l[n(295)][n(286)](),l.value[n(268)](f[n(295)],u[n(295)]),l[n(295)][n(274)](null))})),mn((()=>{var n;const e=dt;null==(n=t.value)||n[e(277)]()})),t}function gt(n){function t(n){const e=dt;if(typeof n===e(293))return function(n){}[e(279)](e(297))[e(306)]("counter");1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}[e(279)]("debu"+e(296))[e(305)](e(303)):function(){return!1}[e(279)](e(290)+"gger")[e(306)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function _t(){const n=["test","length","5362320AiFNAB","clear","toString","2GKDRrn","68ztaqVp","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","string","exception","value","gger","while (true) {}","85288MawbXW","input","height","537037XhEhRJ","console","action","chain","call","apply","log","init","682120KNURSC","render","width","23132150RWpjSA","function *\\( *\\)","2956758PjWOqI","__proto__","setRenderTarget","warn","315nLLUNP","dispose","139401CoeJMC","constructor","table","depthTexture","return (function() "];return(_t=function(){return n})()}vt(void 0,(function(){const n=dt,t=function(){const n=dt;let t;try{t=Function(n(282)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(302)]=t[n(302)]||{},r=[n(265),n(275),"info","error",n(294),n(280),"trace"];for(let o=0;o<r[n(284)];o++){const t=vt[n(279)].prototype[n(292)](vt),i=r[o],a=e[i]||t;t[n(273)]=vt[n(292)](vt),t[n(287)]=a[n(287)].bind(a),e[i]=t}}))();const yt=St;!function(n,t){const e=St,r=bt();for(;;)try{if(260101===parseInt(e(400))/1*(parseInt(e(435))/2)+parseInt(e(408))/3*(-parseInt(e(398))/4)+-parseInt(e(437))/5*(-parseInt(e(401))/6)+-parseInt(e(406))/7*(-parseInt(e(425))/8)+-parseInt(e(394))/9+-parseInt(e(391))/10+parseInt(e(418))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=St,t=new RegExp(n(428)),e=new RegExp(n(402),"i"),r=Rt("init");t[n(399)](r+"chain")&&e.test(r+n(393))?Rt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function bt(){const n=["action","thickness","3230dKBhln","texture","1895VQNJNc","traverse","warn","TresMeshTransmissionMaterial","setRenderTarget","material","table","background","3967980eIoYrC","console","input","2820951sWucAw","toneMapping","side","constructor","4BLwKSK","test","5IaaFRn","5286tUuNHB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","backsideThickness","__proto__","141946XAOjWD","bind","834969UxEIlD","MeshTransmissionMaterialClass","length","call","index","apply","envMapIntensity","string","while (true) {}","gger","8635209MZcDLX","log","value","render","prototype","buffer","counter","48WcCjET","time",'{}.constructor("return this")( )',"function *\\( *\\)","stateObject","fboResolution","debu","toString"];return(bt=function(){return n})()}function St(n,t){const e=bt();return(St=function(n,t){return e[n-=384]})(n,t)}It(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function("return (function() "+n(427)+");")()}catch(e){t=window}return t}(),e=t[n(392)]=t[n(392)]||{},r=[n(419),n(385),"info","error","exception",n(389),n(403)];for(let o=0;o<r[n(410)];o++){const t=It[n(397)][n(422)][n(407)](It),i=r[o],a=e[i]||t;t[n(405)]=It[n(407)](It),t.toString=a[n(432)].bind(a),e[i]=t}}))();const wt=[yt(423),yt(396)],Mt=tn({__name:yt(412),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=gn(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=q(),p=mt({width:u[e(430)],height:u.fboResolution,isLoop:!1}),d=mt({width:u[e(430)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return _n((async()=>{const n=e;await yn(),s[n(420)]=function(n,t){const e=St;let r;return n[e(384)]((n=>{const o=e;n.isMesh&&n[o(388)]&&n.material.uuid===t&&(r=n)})),r}(i[n(420)],r[n(420)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(420)][t(426)]=n,r.value.buffer===d[t(420)][t(436)]&&s[t(420)]&&(m=a[t(420)][t(395)],h=i[t(420)][t(390)],v=r.value[t(414)],g=s[t(420)][t(388)][t(396)],s[t(420)].material=l,u.backside&&(a[t(420)][t(387)](p.value),a[t(420)][t(421)](i[t(420)],c[t(420)]),s[t(420)][t(388)]=r[t(420)],s[t(420)][t(388)][t(434)]=u[t(404)],s.value[t(388)][t(423)]=p[t(420)][t(436)],s[t(420)][t(388)][t(396)]=M,s[t(420)][t(388)][t(414)]=0),a[t(420)].setRenderTarget(d[t(420)]),a[t(420)][t(421)](i[t(420)],c[t(420)]),s[t(420)][t(388)].buffer=d[t(420)].texture,s[t(420)].material=r.value,s.value.material[t(434)]=u[t(434)],s.value[t(388)].side=g,s[t(420)][t(388)].envMapIntensity=v,i[t(420)].background=h,a.value[t(387)](null),a[t(420)][t(395)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return on(),an(o(386),{ref_key:o(409),ref:r,buffer:nn(d)[o(436)],side:nn(x)},null,8,wt)}}});function Rt(n){function t(n){const e=St;if(typeof n===e(415))return function(n){}[e(397)](e(416)).apply(e(424));1!==(""+n/n)[e(410)]||n%20==0?function(){return!0}[e(397)](e(431)+"gger")[e(411)](e(433)):function(){return!1}[e(397)](e(431)+e(417)).apply(e(429)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Pt,r=Tt();for(;;)try{if(102930===parseInt(e(403))/1*(-parseInt(e(389))/2)+parseInt(e(428))/3*(parseInt(e(418))/4)+-parseInt(e(426))/5+-parseInt(e(407))/6+parseInt(e(415))/7+-parseInt(e(421))/8+-parseInt(e(423))/9*(-parseInt(e(429))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(412)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=Pt,t=new RegExp(n(384)),e=new RegExp(n(381),"i"),r=zt("init");t[n(409)](r+"chain")&&e.test(r+n(392))?zt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(412)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","disableY","toString","function *\\( *\\)","matrixWorld","top","return (function() ","value","8henqCy","stateObject","gger","input",'{}.constructor("return this")( )',"constructor","bind","length","min","info","set","right","warn","exception","40838wLowGc","counter","disable","$slots","800202BKOKSl","left","test","precise","log","apply","identity","trace","159159aVlKgu","gref","__proto__","411668XRjlYy","TresGroup","getBoundingSphere","449392lQEmYZ","getCenter","255735lEZXYr","debu","disableX","710715xywcSc","call","6YLswjX","130gxVzWI","console","position","bottom","front","inner","while (true) {}","max"];return(Tt=function(){return n})()}function Pt(n,t){const e=Tt();return(Pt=function(n,t){return e[n-=381]})(n,t)}At(void 0,(function(){const n=Pt,t=function(){const n=Pt;let t;try{t=Function(n(387)+n(393)+");")()}catch(e){t=window}return t}(),e=t[n(430)]=t[n(430)]||{},r=[n(411),n(401),n(398),"error",n(402),"table",n(414)];for(let o=0;o<r[n(396)];o++){const t=At[n(394)].prototype[n(395)](At),i=r[o],a=e[i]||t;t[n(417)]=At[n(395)](At),t.toString=a[n(383)].bind(a),e[i]=t}}))();const Dt=tn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return _n((()=>{const n=Pt;if(!r[n(388)])return;if(!o[n(388)])return;r.value[n(385)][n(413)]();const e=(new R).setFromObject(o.value,t[n(410)]),i=new E,a=new A,c=e[n(436)].x-e[n(397)].x,s=e[n(436)].y-e[n(397)].y,u=e[n(436)].z-e[n(397)].z;e[n(422)](i),e[n(420)](a);const l=t[n(386)]?s/2:t[n(432)]?-s/2:0,f=t[n(408)]?-c/2:t[n(400)]?c/2:0,p=t[n(433)]?u/2:t.back?-u/2:0;r[n(388)][n(431)][n(399)](t[n(405)]||t[n(425)]?0:-i.x+f,t[n(405)]||t[n(382)]?0:-i.y+l,t.disable||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Pt;return on(),an(i(419),{ref_key:i(416),ref:e},[dn("TresGroup",{ref_key:"outer",ref:r},[dn(i(419),{ref_key:i(434),ref:o},[cn(n[i(406)],"default")],512)],512)],512)}}});function zt(n){function t(n){const e=Pt;if("string"==typeof n)return function(n){}[e(394)](e(435)).apply(e(404));1!==(""+n/n)[e(396)]||n%20==0?function(){return!0}.constructor("debu"+e(391))[e(427)]("action"):function(){return!1}[e(394)](e(424)+e(391))[e(412)](e(390)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=kt;!function(n,t){const e=kt,r=Ft();for(;;)try{if(373692===-parseInt(e(174))/1*(-parseInt(e(177))/2)+-parseInt(e(175))/3*(parseInt(e(189))/4)+-parseInt(e(217))/5+-parseInt(e(223))/6+-parseInt(e(179))/7+-parseInt(e(198))/8*(-parseInt(e(172))/9)+parseInt(e(196))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(194)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(){const n=["warn","stateObject","string","constructor","params","call","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","bind","table","error","exception","update","ior","2591225uVupDE","gger","resolution","prototype","$slots","length","852822TfuTLq","test","debu","TresGroup","while (true) {}","3295791zpcmuI","toString","15397gZJRUx","9WRtGaU","primitive","62JGPlPz","worldRadius","990892nGQlXn","function *\\( *\\)","object","set","#ffffff","helper","scene","Vector3","backsideIOR","lightSource","664720koCSfv","backside","causticsOnly","intensity","color","apply","index","4644650oivuWD","return (function() ","16HHsOOE","far",'{}.constructor("return this")( )',"group"];return(Ft=function(){return n})()}!function(){Ct(this,(function(){const n=kt,t=new RegExp(n(180)),e=new RegExp(n(209),"i"),r=Lt("init");t.test(r+"chain")&&e[n(224)](r+"input")?Lt():r("0")}))()}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(194)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kt(n,t){const e=Ft();return(kt=function(n,t){return e[n-=172]})(n,t)}jt(void 0,(function(){const n=kt;let t;try{t=Function(n(197)+n(200)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(202),n(210),n(213),n(214),n(212),"trace"];for(let i=0;i<r.length;i++){const t=jt[n(205)][n(220)][n(211)](jt),o=r[i],a=e[o]||t;t.__proto__=jt.bind(jt),t[n(173)]=a[n(173)][n(211)](a),e[o]=t}}))();const Bt=[Ot(181)],Ut=[Ot(181)],Nt=tn({__name:Ot(195),props:{color:{default:Ot(183)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=Mn(r.value,{frames:1/0,resolution:e[t(219)],worldRadius:e[t(178)]});o[t(206)][t(190)]=!0;const i=gn(null);J(i,(n=>{n&&o[t(185)].add(n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(215)]()})),fn((()=>{const n=t;e[n(193)]&&o[n(206)][n(193)][n(182)](e[n(193)]),e[n(216)]&&(o.params[n(216)]=e.ior),e[n(187)]&&(o.params.backsideIOR=e[n(187)]),e[n(199)]&&(o[n(206)].far=e[n(199)]),e[n(178)]&&(o.params[n(178)]=e[n(178)]),e[n(192)]&&(o[n(206)][n(192)]=e[n(192)])})),J((()=>e[t(191)]),(n=>{const e=t;o[e(206)][e(191)]=n})),J((()=>e[t(188)]),(n=>{const e=t;n&&o.params[e(188)]instanceof T[e(186)]&&o.params.lightSource[e(182)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(xn,null,[dn(r(226),{ref_key:r(201),ref:i},[cn(n[r(221)],"default")],512),dn(r(176),{object:nn(o)[r(201)],position:[0,.003,0]},null,8,Bt),dn(r(176),{object:nn(o)[r(184)],visible:!1},null,8,Ut)],64)}}});function Lt(n){function t(n){const e=kt;if(typeof n===e(204))return function(n){}[e(205)](e(227))[e(194)](e(208));1!==(""+n/n)[e(222)]||n%20==0?function(){return!0}[e(205)](e(225)+e(218))[e(207)]("action"):function(){return!1}[e(205)](e(225)+e(218)).apply(e(203)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=Wt();for(;;)try{if(612632===parseInt(e(532))/1*(-parseInt(e(500))/2)+parseInt(e(539))/3*(-parseInt(e(523))/4)+-parseInt(e(493))/5+parseInt(e(527))/6*(parseInt(e(520))/7)+parseInt(e(491))/8*(parseInt(e(530))/9)+parseInt(e(535))/10+-parseInt(e(506))/11*(-parseInt(e(529))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ht(this,(function(){const n=Vt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$t(n(541));t[n(521)](r+n(522))&&e[n(521)](r+n(490))?$t():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["dispose","1535990lPkjtc","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","57tfqjhc",'{}.constructor("return this")( )',"init","compile",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","input","8xtcWCW","properties","2337660iPgDvy","toString","stateObject","while (true) {}","length","action","traverse","2LxeCyF","console","bind","isArray","trace","replace","33Onutyr","ShaderChunk","#if defined( SHADOWMAP_TYPE_PCF )","gger","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","table","exception",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","constructor","info","string","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","shadowmap_pars_fragment","programs","7idCjVv","test","chain","84524LTPvyL","remove","apply","warn","2058030aNneZP","debu","6895284hHTLNB","2128239ZvrWbq","material","975243wSJktX","; i ++) {\n        offset = (vogelDiskSample(j, "];return(Wt=function(){return n})()}Zt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function("return (function() "+n(540)+");")()}catch(e){t=window}return t}(),e=t[n(501)]=t[n(501)]||{},r=["log",n(526),n(515),"error",n(512),n(511),n(504)];for(let o=0;o<r.length;o++){const t=Zt[n(514)].prototype[n(502)](Zt),i=r[o],a=e[i]||t;t.__proto__=Zt[n(502)](Zt),t.toString=a[n(494)].bind(a),e[i]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=T[r(507)][r(518)];return T[r(507)].shadowmap_pars_fragment=T[r(507)].shadowmap_pars_fragment[r(505)]("#ifdef USE_SHADOWMAP",r(536)+t+r(538)+n+r(513)+e+r(533)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(537)+t+r(517)+e+r(543)).replace(r(508),r(510)),(n,t,e)=>{const i=r;T[i(507)][i(518)]=o,function(n,t,e){const r=Vt;t[r(499)]((t=>{const e=r;t[e(531)]&&(Array[e(503)](t.material)?t[e(531)].forEach((t=>{const r=e;n[r(492)][r(524)](t),t[r(534)]()})):(n[e(492)][e(524)](t[e(531)]),t[e(531)][e(534)]()))})),n[r(515)][r(519)][r(497)]=0,n[r(542)](t,e)}(n,t,e)}};function Vt(n,t){const e=Wt();return(Vt=function(n,t){return e[n-=490]})(n,t)}function $t(n){function t(n){const e=Vt;if(typeof n===e(516))return function(n){}[e(514)](e(496))[e(525)]("counter");1!==(""+n/n)[e(497)]||n%20==0?function(){return!0}[e(514)](e(528)+e(509)).call(e(498)):function(){return!1}.constructor(e(528)+e(509))[e(525)](e(495)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Qt;!function(n,t){const e=Qt,r=Kt();for(;;)try{if(457759===parseInt(e(239))/1+-parseInt(e(234))/2*(parseInt(e(243))/3)+-parseInt(e(231))/4*(parseInt(e(251))/5)+-parseInt(e(244))/6*(parseInt(e(235))/7)+parseInt(e(248))/8+parseInt(e(223))/9*(parseInt(e(250))/10)+-parseInt(e(236))/11*(parseInt(e(228))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(259)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(233),"i"),r=ne("init");t[n(237)](r+"chain")&&e[n(237)](r+n(245))?ne():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(259)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(){const n=["material","817580fziBKp","index","bind","__proto__","15SMvNmF","18cYLTRV","input","length","table","1970032Vywtyv","constructor","4650iEbdAe","644935zNWYKW","warn","traverse","gger","console","exception","call","toString","apply","6813XZdoiZ","action","trace","return (function() ","while (true) {}","924tkDjlO","debu","value","8oodPtX",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","24628WbspuD","954331uNlocn","32791wrnhSb","test"];return(Kt=function(){return n})()}function Qt(n,t){const e=Kt();return(Qt=function(n,t){return e[n-=223]})(n,t)}Xt(void 0,(function(){const n=Qt;let t;try{t=Function(n(226)+n(232)+");")()}catch(o){t=window}const e=t[n(255)]=t[n(255)]||{},r=["log",n(252),"info","error",n(256),n(247),n(225)];for(let i=0;i<r.length;i++){const t=Xt[n(249)].prototype[n(241)](Xt),o=r[i],a=e[o]||t;t[n(242)]=Xt[n(241)](Xt),t[n(258)]=a[n(258)].bind(a),e[o]=t}}))();const Jt=tn({__name:qt(240),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(230)],e[t(230)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o[t(230)][t(253)]((n=>{n instanceof l&&n[t(238)].dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Qt;if("string"==typeof n)return function(n){}.constructor(e(227)).apply("counter");1!==(""+n/n)[e(246)]||n%20==0?function(){return!0}.constructor("debu"+e(254))[e(257)](e(224)):function(){return!1}.constructor(e(229)+e(254))[e(259)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(n,t){const e=re();return(te=function(n,t){return e[n-=334]})(n,t)}const ee=te;function re(){const n=["apply","uniforms","console","toString","function *\\( *\\)","resolution","gger",">\n        }","setResolution","5337VpIbCj","2628816qcsqYK","texelSize","661788EjeGOh","set","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","constructor","halfTexelSize","init","20FGnFbO","37794wqPIYY","multiplyScalar","test","colorspace_fragment","error","__proto__","action","143228nGSngQ","158627sPplaP","info","return (function() ",'{}.constructor("return this")( )',"bind","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","kernel","15690zatcsR","length","log","counter","setTexelSize","toneMapped","replace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","415235XFYDLr","prototype","copy","while (true) {}","84FHxEzh","input","value","exception","debu"];return(re=function(){return n})()}!function(n,t){const e=te,r=re();for(;;)try{if(244575===-parseInt(e(382))/1+parseInt(e(381))/2+parseInt(e(367))/3+parseInt(e(373))/4*(-parseInt(e(346))/5)+-parseInt(e(374))/6*(parseInt(e(350))/7)+-parseInt(e(365))/8+-parseInt(e(364))/9*(-parseInt(e(337))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){oe(this,(function(){const n=te,t=new RegExp(n(359)),e=new RegExp(n(344),"i"),r=se(n(372));t[n(376)](r+"chain")&&e[n(376)](r+n(351))?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(355)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=te,t=function(){const n=te;let t;try{t=Function(n(384)+n(385)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(357)]||{},r=[n(339),"warn",n(383),n(378),n(353),"table",n(345)];for(let o=0;o<r[n(338)];o++){const t=ie[n(370)][n(347)].bind(ie),i=r[o],a=e[i]||t;t[n(379)]=ie[n(334)](ie),t.toString=a[n(358)][n(334)](a),e[i]=t}}))();const ae=parseInt(C[ee(343)](/\D+/g,""));class ce extends P{constructor(n=new z){const t=ee;super({uniforms:{inputBuffer:new D(null),depthBuffer:new D(null),resolution:new D(new z),texelSize:new D(new z),halfTexelSize:new D(new z),kernel:new D(0),scale:new D(1),cameraNear:new D(0),cameraFar:new D(1),minDepthThreshold:new D(0),maxDepthThreshold:new D(1),depthScale:new D(0),depthToBlurRatioBias:new D(.25)},fragmentShader:t(369)+(ae>=154?t(377):"encodings_fragment")+t(362),vertexShader:t(335),blending:O,depthWrite:!1,depthTest:!1}),this[t(342)]=!1,this[t(341)](n.x,n.y),this[t(336)]=new Float32Array([0,1,2,2,3])}[ee(341)](n,t){const e=ee;this[e(356)][e(366)].value[e(368)](n,t),this[e(356)][e(371)][e(352)].set(n,t)[e(375)](.5)}[ee(363)](n){const t=ee;this[t(356)][t(360)][t(352)][t(348)](n)}}function se(n){function t(n){const e=te;if("string"==typeof n)return function(n){}.constructor(e(349))[e(355)](e(340));1!==(""+n/n).length||n%20==0?function(){return!0}[e(370)](e(354)+e(361)).call(e(380)):function(){return!1}[e(370)]("debugger")[e(355)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=de;function le(){const n=["trace","position","table","function *\\( *\\)","error","render","stateObject","console","length","init","1876bUPVQa","__proto__","input","2wADAom","setRenderTarget","action","info","call","gger","renderTargetB","6941380IjcpTq","while (true) {}","1110BfXskD","chain","constructor","bind","3997tjytwx","counter","warn","2124BHkOri","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthScale","depthToBlurRatioBias","renderToScreen","inputBuffer","scene","kernel","debu","renderTargetA","log","depthBuffer","7305HPrylv","screen","texture","clone","setResolution","6goLlkm","defines","58605066rybDeG","130833fxWYNu","maxDepthThreshold","535151FQjOjS","depthTexture","value","toString","add","setAttribute","apply","exception","4081EdHWeN","convolutionMaterial","uniforms","test","setTexelSize","10024sRWkNW"];return(le=function(){return n})()}!function(n,t){const e=de,r=le();for(;;)try{if(820763===-parseInt(e(191))/1*(-parseInt(e(153))/2)+-parseInt(e(181))/3*(-parseInt(e(150))/4)+parseInt(e(160))/5*(parseInt(e(186))/6)+-parseInt(e(166))/7*(-parseInt(e(139))/8)+parseInt(e(189))/9*(parseInt(e(162))/10)+parseInt(e(199))/11*(-parseInt(e(169))/12)+-parseInt(e(188))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[de(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=de,t=new RegExp(n(143)),e=new RegExp(n(170),"i"),r=ve(n(149));t.test(r+n(163))&&e[n(137)](r+n(152))?ve():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function de(n,t){const e=le();return(de=function(n,t){return e[n-=135]})(n,t)}pe(void 0,(function(){const n=de,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(147)]=t.console||{},r=[n(179),n(168),n(156),n(144),n(198),n(142),n(140)];for(let o=0;o<r[n(148)];o++){const t=pe[n(164)].prototype[n(165)](pe),i=r[o],a=e[i]||t;t[n(151)]=pe[n(165)](pe),t[n(194)]=a.toString[n(165)](a),e[i]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=de;this.renderToScreen=!1,this[c(178)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(159)]=this[c(178)][c(184)](),this[c(135)]=new ce,this.convolutionMaterial[c(138)](1/t,1/e),this[c(135)][c(185)](new z(t,e)),this[c(175)]=new u,this.camera=new F,this.convolutionMaterial.uniforms.minDepthThreshold[c(193)]=r,this[c(135)].uniforms[c(190)].value=o,this[c(135)].uniforms[c(171)][c(193)]=i,this[c(135)][c(136)][c(172)].value=a,this[c(135)][c(187)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p.setAttribute(c(141),new k(s,3)),p[c(196)]("uv",new k(f,2)),this[c(182)]=new l(p,this[c(135)]),this.screen.frustumCulled=!1,this.scene[c(195)](this[c(182)])}[ue(145)](n,t,e){const r=ue,o=this[r(175)],i=this.camera,a=this.renderTargetA,c=this[r(159)],s=this[r(135)],u=s.uniforms;u[r(180)][r(193)]=t[r(192)];const l=s[r(176)];let f,p,d,h=t;for(p=0,d=l[r(148)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(176)][r(193)]=l[p],u[r(174)][r(193)]=h[r(183)],n[r(154)](f),n[r(145)](o,i),h=f;u[r(176)][r(193)]=l[p],u.inputBuffer[r(193)]=h[r(183)],n[r(154)](this[r(173)]?null:e),n.render(o,i)}}function ve(n){function t(n){const e=de;if("string"==typeof n)return function(n){}.constructor(e(161)).apply(e(167));1!==(""+n/n)[e(148)]||n%20==0?function(){return!0}[e(164)](e(177)+e(158))[e(157)](e(155)):function(){return!1}[e(164)](e(177)+e(158))[e(197)](e(146)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=ge;function ge(n,t){var e=Ie();return(ge=function(n,t){return e[n-=361]})(n,t)}!function(n,t){for(var e=ge,r=Ie();;)try{if(137254===-parseInt(e(409))/1*(parseInt(e(423))/2)+-parseInt(e(427))/3+-parseInt(e(364))/4*(parseInt(e(407))/5)+parseInt(e(430))/6*(parseInt(e(361))/7)+parseInt(e(426))/8*(-parseInt(e(383))/9)+-parseInt(e(436))/10*(-parseInt(e(405))/11)+parseInt(e(429))/12*(parseInt(e(415))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=ge,t=new RegExp(n(416)),e=new RegExp(n(396),"i"),r=be(n(417));t.test(r+"chain")&&e.test(r+n(401))?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){var n,t=ge;try{n=Function(t(435)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(400)]=n.console||{},r=[t(418),"warn",t(379),t(374),"exception",t(393),t(399)],o=0;o<r.length;o++){var i=ye.constructor[t(414)][t(402)](ye),a=r[o],c=e[a]||i;i.__proto__=ye[t(402)](ye),i[t(375)]=c[t(375)].bind(c),e[a]=i}}))();class xe extends B{constructor(n={}){var t=ge;super(n),this[t(391)]={value:null},this[t(382)]={value:null},this[t(380)]={value:null},this[t(395)]={value:null},this[t(425)]={value:null},this[t(385)]={value:!1},this[t(398)]={value:0},this[t(378)]={value:0},this[t(422)]={value:.5},this._minDepthThreshold={value:.9},this[t(387)]={value:1},this[t(420)]={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this[t(381)]={value:1},this[t(368)](n)}onBeforeCompile(n){var t,e=ge;!(null==(t=n.defines)?void 0:t[e(372)])&&(n.defines[e(372)]=""),n[e(428)][e(410)]=this._hasBlur,n.uniforms.tDiffuse=this[e(380)],n[e(428)][e(388)]=this._tDepth,n[e(428)][e(438)]=this[e(382)],n[e(428)][e(377)]=this[e(395)],n.uniforms[e(362)]=this[e(425)],n[e(428)][e(406)]=this[e(398)],n[e(428)][e(369)]=this[e(378)],n[e(428)].mixStrength=this[e(422)],n[e(428)][e(371)]=this[e(432)],n[e(428)][e(370)]=this._maxDepthThreshold,n[e(428)][e(411)]=this._depthScale,n[e(428)][e(404)]=this[e(419)],n[e(428)][e(366)]=this[e(437)],n.uniforms[e(434)]=this[e(381)],n[e(413)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n.vertexShader,n[e(413)]=n.vertexShader[e(397)](e(392),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader=e(403)+n[e(386)],n[e(386)]=n[e(386)][e(397)](e(373),e(390))}get[me(421)](){var n=me;return this._tDiffuse[n(365)]}set[me(421)](n){var t=me;this[t(380)][t(365)]=n}get[me(388)](){var n=me;return this[n(391)][n(365)]}set[me(388)](n){this._tDepth.value=n}get distortionMap(){return this[me(382)].value}set[me(438)](n){var t=me;this._distortionMap[t(365)]=n}get[me(377)](){var n=me;return this._tDiffuseBlur[n(365)]}set[me(377)](n){var t=me;this[t(395)][t(365)]=n}get[me(362)](){var n=me;return this[n(425)][n(365)]}set[me(362)](n){var t=me;this[t(425)][t(365)]=n}get[me(410)](){var n=me;return this[n(385)][n(365)]}set[me(410)](n){var t=me;this[t(385)][t(365)]=n}get mirror(){var n=me;return this[n(398)][n(365)]}set[me(406)](n){var t=me;this._mirror[t(365)]=n}get[me(369)](){return this[me(378)].value}set mixBlur(n){this[me(378)].value=n}get mixStrength(){var n=me;return this._blurStrength[n(365)]}set[me(394)](n){var t=me;this[t(422)][t(365)]=n}get[me(371)](){var n=me;return this[n(432)][n(365)]}set[me(371)](n){this[me(432)].value=n}get[me(370)](){var n=me;return this[n(387)][n(365)]}set maxDepthThreshold(n){this[me(387)].value=n}get[me(411)](){return this[me(420)].value}set[me(411)](n){var t=me;this[t(420)][t(365)]=n}get[me(404)](){var n=me;return this[n(419)][n(365)]}set depthToBlurRatioBias(n){var t=me;this[t(419)][t(365)]=n}get[me(366)](){var n=me;return this[n(437)][n(365)]}set[me(366)](n){var t=me;this[t(437)][t(365)]=n}get mixContrast(){var n=me;return this[n(381)][n(365)]}set[me(434)](n){var t=me;this[t(381)][t(365)]=n}}function Ie(){var n=["mixContrast","return (function() ","449460uMeRbg","_distortion","distortionMap","56OiEJyj","textureMatrix","debu","368LTHqyB","value","distortion","gger","setValues","mixBlur","maxDepthThreshold","minDepthThreshold","USE_UV","#include <emissivemap_fragment>","error","toString","call","tDiffuseBlur","_mixBlur","info","_tDiffuse","_mixContrast","_distortionMap","9QxJNyD","counter","_hasBlur","fragmentShader","_maxDepthThreshold","tDepth","apply","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_tDepth","#include <project_vertex>","table","mixStrength","_tDiffuseBlur","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","replace","_mirror","trace","console","input","bind","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","depthToBlurRatioBias","44vNlrYu","mirror","11135BZbgfy","constructor","1OHbexW","hasBlur","depthScale","while (true) {}","vertexShader","prototype","580710XdhUBN","function *\\( *\\)","init","log","_depthToBlurRatioBias","_depthScale","tDiffuse","_blurStrength","323522QUstnk","length","_textureMatrix","1778520jWaEPb","669900HFVwld","uniforms","180lhaqLv","74760VZnlQg","stateObject","_minDepthThreshold","string"];return(Ie=function(){return n})()}function be(n){function t(n){var e=ge;if(typeof n===e(433))return function(n){}[e(408)](e(412)).apply(e(384));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}[e(408)](e(363)+e(367))[e(376)]("action"):function(){return!1}[e(408)](e(363)+e(367))[e(389)](e(431)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Ae;!function(n,t){const e=Ae,r=Re();for(;;)try{if(393136===-parseInt(e(466))/1+parseInt(e(477))/2*(-parseInt(e(447))/3)+-parseInt(e(487))/4*(-parseInt(e(481))/5)+parseInt(e(438))/6*(parseInt(e(441))/7)+parseInt(e(452))/8*(parseInt(e(442))/9)+parseInt(e(463))/10*(-parseInt(e(507))/11)+parseInt(e(459))/12*(parseInt(e(469))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Ae,t=new RegExp(n(439)),e=new RegExp(n(513),"i"),r=Pe("init");t[n(443)](r+n(475))&&e[n(443)](r+"input")?Pe():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(445)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(){const n=["visible","extractRotation","far","cameraWorldPosition",'{}.constructor("return this")( )',"prototype","123036vvIdbs","subVectors","autoUpdate","reflectorOffset","64180ksTVWT","toString","autoClear","249756WdTJPl","key","material","728AskTTD","console","action","matrixWorldInverse","set","multiplyScalar","chain","t-diffuse-blur","86cLEsCR","negate","textureMatrix","distortionMap","70FyyrHQ","exception","bind","constructor","depth-scale","lookAtPosition","76564wxErOy","add","enabled","string","rotationMatrix","addScaledVector","projectionMatrix","view","mirror","distortion","updateMatrixWorld","defines-USE_DEPTH","return (function() ","info","t-diffuse","dot","min-depth-threshold","defines-USE_BLUR","texture","stateObject","649CFooBp","setRenderTarget","defines-USE_DISTORTION","uuid","length","reflectorPlane","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","target","setFromNormalAndCoplanarPoint","render","position","assign","reflectorWorldPosition","constant","depth-to-blur-ratio-bias","gger","applyMatrix4","elements","copy","debu","virtualCamera","depthTexture","mix-contrast","shadowMap","value","has-blur","log","clipPlane","materialRef","reflect","708zyDNNS","function *\\( *\\)","warn","13447mLNliV","11169gKmKgX","test","matrixWorld","apply","normal","16458JSTgjX","multiply","max-depth-threshold","table","setFromMatrixPosition","1216dvRBBN"];return(Re=function(){return n})()}Me(void 0,(function(){const n=Ae,t=function(){const n=Ae;let t;try{t=Function(n(499)+n(457)+");")()}catch(e){t=window}return t}(),e=t[n(470)]=t[n(470)]||{},r=[n(434),n(440),n(500),"error",n(482),n(450),"trace"];for(let o=0;o<r[n(511)];o++){const t=Me[n(484)][n(458)].bind(Me),i=r[o],a=e[i]||t;t.__proto__=Me[n(483)](Me),t[n(464)]=a[n(464)].bind(a),e[i]=t}}))();const Ee=["texture-matrix",Se(495),Se(501),"t-depth",Se(476),Se(433),"mix-strength",Se(503),Se(449),Se(485),Se(522),Se(496),Se(480),Se(530),Se(504),Se(498),Se(509)];function Ae(n,t){const e=Re();return(Ae=function(n,t){return e[n-=431]})(n,t)}const Te=tn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:w,extend:M}=V();M({MeshReflectorMaterial:xe});const R=gn(),A=gn(),T=gn(),P=gn(),D=Q((()=>{const n=Ae;return"number"==typeof f.value?[f[n(432)],f[n(432)]]:f[n(432)]})),z=Q((()=>D[r(432)][0]>0||D[r(432)][1]>0)),O={reflectorPlane:new U,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new N,lookAtPosition:new E(0,0,-1),clipPlane:new L,view:new E,target:new E,q:new L,virtualCamera:new H,textureMatrix:new N};fn((()=>{var n;const o=r;null==(n=R[o(432)])||n[o(505)][o(514)]();const f={minFilter:b,magFilter:b,type:h};var y,x;R[o(432)]=new I(i[o(432)],i[o(432)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i.value,Z,W)},t(y,e(x)))),A[o(432)]=new I(i.value,i.value,f),T.value=new he({resolution:i[o(432)],width:D[o(432)][0],height:D[o(432)][1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u[o(432)],depthToBlurRatioBias:l[o(432)]}),P[o(432)]={mirror:p,textureMatrix:O[o(479)],mixBlur:d,tDiffuse:R[o(432)].texture,tDepth:R[o(432)][o(529)],tDiffuseBlur:R.value[o(505)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(432)],mixContrast:_,"defines-USE_BLUR":z[o(432)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const C=gn(),{onLoop:F}=q();F((()=>{var n;const t=r;if(!(C[t(432)]&&w[t(432)]&&R.value&&y[t(432)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Ae;n.isMesh&&n[r(468)]&&n[r(468)][r(510)]===t&&(e=n)})),e}(x[t(432)],C.value[t(510)]);if(!e)return;e.visible=!1;const i=w[t(432)].xr[t(489)],a=w.value[t(431)][t(461)];(function(n){var t,e;const r=Ae;if(O.reflectorWorldPosition.setFromMatrixPosition(n[r(444)]),O.cameraWorldPosition[r(451)](null==(t=y[r(432)])?void 0:t.matrixWorld),O[r(491)][r(454)](n[r(444)]),O.normal[r(473)](0,0,1),O[r(446)][r(524)](O.rotationMatrix),O[r(520)][r(492)](O[r(446)],o[r(462)]),O[r(494)][r(460)](O[r(520)],O[r(456)]),O[r(494)][r(502)](O.normal)>0)return;O[r(494)].reflect(O[r(446)])[r(478)](),O[r(494)][r(488)](O[r(520)]),O[r(491)][r(454)](null==(e=y[r(432)])?void 0:e[r(444)]),O.lookAtPosition[r(473)](0,0,-1),O[r(486)][r(524)](O[r(491)]),O[r(486)].add(O[r(456)]),O.target[r(460)](O[r(520)],O[r(486)]),O[r(515)][r(437)](O[r(446)])[r(478)](),O[r(515)][r(488)](O[r(520)]),O[r(528)][r(518)].copy(O.view),O[r(528)].up[r(473)](0,1,0),O.virtualCamera.up[r(524)](O.rotationMatrix),O[r(528)].up[r(437)](O[r(446)]),O[r(528)].lookAt(O[r(515)]),O.virtualCamera[r(455)]=(null==y?void 0:y[r(432)]).far,O[r(528)][r(497)](),O[r(528)].projectionMatrix[r(526)]((null==y?void 0:y.value)[r(493)]),O.textureMatrix[r(473)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(479)][r(448)](O.virtualCamera[r(493)]),O.textureMatrix[r(448)](O[r(528)].matrixWorldInverse),O.textureMatrix[r(448)](n[r(444)]),O[r(512)][r(516)](O[r(446)],O[r(520)]),O[r(512)][r(524)](O[r(528)][r(472)]),O[r(435)][r(473)](O.reflectorPlane[r(446)].x,O.reflectorPlane.normal.y,O.reflectorPlane[r(446)].z,O[r(512)][r(521)]);const i=O[r(528)].projectionMatrix;O.q.x=(Math.sign(O[r(435)].x)+i[r(525)][8])/i[r(525)][0],O.q.y=(Math.sign(O[r(435)].y)+i[r(525)][9])/i.elements[5],O.q.z=-1,O.q.w=(1+i[r(525)][10])/i[r(525)][14],O[r(435)][r(474)](2/O.clipPlane[r(502)](O.q)),i[r(525)][2]=O[r(435)].x,i[r(525)][6]=O[r(435)].y,i.elements[10]=O.clipPlane.z+1,i[r(525)][14]=O[r(435)].w})(e),w[t(432)].shadowMap[t(461)]=!1,w[t(432)][t(508)](R[t(432)]),w.value[t(465)]||w[t(432)].clear(),w[t(432)][t(517)](x.value,O.virtualCamera),null==(n=null==T?void 0:T.value)||n[t(517)](w[t(432)],R[t(432)],A[t(432)]),w[t(432)].xr.enabled=i,w[t(432)][t(431)][t(461)]=a,e[t(453)]=!0,w[t(432)][t(508)](null)}));const j=In(),k=Q((()=>{const n=r,t={};return Object[n(519)](t,o),Object.assign(t,j[n(432)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(432)])||n[e(514)](),null==(t=null==A?void 0:A[e(432)])||t[e(514)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an("TresMeshReflectorMaterial",bn({key:c(467)+P[c(432)][c(504)]+P[c(432)][c(498)]+P[c(432)]["defines-USE_DISTORTION"],ref_key:c(436),ref:C},k[c(432)],{"texture-matrix":O[c(479)],mirror:nn(p),"t-diffuse":null==(e=R[c(432)])?void 0:e[c(505)],"t-depth":null==(o=R[c(432)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=A.value)?void 0:i[c(505)],"has-blur":z[c(432)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Ee)}}});function Pe(n){function t(n){const e=Ae;if(typeof n===e(490))return function(n){}[e(484)]("while (true) {}")[e(445)]("counter");1!==(""+n/n)[e(511)]||n%20==0?function(){return!0}[e(484)]("debu"+e(523)).call(e(471)):function(){return!1}[e(484)](e(527)+"gger").apply(e(506)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Oe,r=Ce();for(;;)try{if(751914===parseInt(e(397))/1*(-parseInt(e(387))/2)+-parseInt(e(377))/3+parseInt(e(373))/4+-parseInt(e(369))/5*(-parseInt(e(383))/6)+-parseInt(e(392))/7+parseInt(e(389))/8*(parseInt(e(407))/9)+parseInt(e(399))/10*(parseInt(e(380))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(396)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Oe,t=new RegExp(n(409)),e=new RegExp(n(381),"i"),r=Fe(n(368));t[n(385)](r+n(388))&&e[n(385)](r+n(395))?Fe():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(396)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(n,t){const e=Ce();return(Oe=function(n,t){return e[n-=366]})(n,t)}function Ce(){const n=["305848MnhjHr","return (function() ","action","2751455DzJzYV","value","info","input","apply","12TCkwOy","string","2139970CnTWQb","dispose","bind","call","gger","constructor","length","CubeCamera","36FyEfsr","table","function *\\( *\\)","update","exception","trace","init","569045eYoFPh","texture","debu","log","4855712PZGrZE","console","type","stateObject","3096894TGtvbb","background","__proto__","44UZXVYB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","6ZzgGIP","prototype","test","fog","26562UboprJ","chain"];return(Ce=function(){return n})()}function Fe(n){function t(n){const e=Oe;if(typeof n===e(398))return function(n){}[e(404)]("while (true) {}").apply("counter");1!==(""+n/n)[e(405)]||n%20==0?function(){return!0}[e(404)]("debu"+e(403))[e(402)](e(391)):function(){return!1}.constructor(e(371)+e(403)).apply(e(376)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Oe,t=function(){const n=Oe;let t;try{t=Function(n(390)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(374)]||{},r=[n(372),"warn",n(394),"error",n(366),n(408),n(367)];for(let o=0;o<r[n(405)];o++){const t=ze.constructor[n(384)][n(401)](ze),i=r[o],a=e[i]||t;t[n(379)]=ze[n(401)](ze),t[n(382)]=a[n(382)][n(401)](a),e[i]=t}}))();const je=Ne;!function(n,t){const e=Ne,r=Ze();for(;;)try{if(350602===-parseInt(e(493))/1*(-parseInt(e(501))/2)+parseInt(e(497))/3+-parseInt(e(481))/4+parseInt(e(513))/5*(-parseInt(e(516))/6)+-parseInt(e(489))/7+-parseInt(e(517))/8*(-parseInt(e(502))/9)+parseInt(e(514))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Ne,t=new RegExp(n(498)),e=new RegExp(n(503),"i"),r=He("init");t[n(484)](r+n(479))&&e[n(484)](r+"input")?He():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Be(void 0,(function(){const n=Ne,t=function(){const n=Ne;let t;try{t=Function("return (function() "+n(500)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(507),n(521),n(486),n(504),n(511),n(492),"trace"];for(let o=0;o<r.length;o++){const t=Be[n(491)][n(485)][n(512)](Be),i=r[o],a=e[i]||t;t[n(518)]=Be[n(512)](Be),t[n(490)]=a[n(490)].bind(a),e[i]=t}}))();const Ue=[je(494)];function Ne(n,t){const e=Ze();return(Ne=function(n,t){return e[n-=476]})(n,t)}const Le=tn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=je,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return J((()=>s),(n=>{var t;const e=Oe;null==(t=c[e(393)])||t[e(400)](),c[e(393)]=new v(n[e(393)]),c.value[e(370)][e(375)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(393)]=new(T[r(406)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Oe;null==(n=c[t(393)])||n[t(400)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a.value[t(386)],d=a.value[t(378)],a.value[t(378)]=r||d,a[t(393)][t(386)]=o||p,null==(n=f[t(393)])||n[t(410)](i[t(393)],a[t(393)]),a.value.fog=p,a[t(393)][t(378)]=d}}}({resolution:o[r(520)],near:o[r(482)],far:o[r(478)],envMap:o[r(487)],fog:o[r(523)]}),{onBeforeLoop:s}=q();let u=0;const l=K(null);return s((()=>{const n=r;l[n(519)]&&(o[n(488)]===1/0||u<o[n(488)])&&(l[n(519)][n(495)]=!1,c(),l[n(519)].visible=!0,u++)})),t({texture:null==(e=i[r(519)])?void 0:e[r(509)]}),(n,t)=>{const e=r;return on(),an(e(476),null,[dn(e(499),{object:nn(a)},null,8,Ue),dn(e(476),{ref_key:e(522),ref:l},[cn(n[e(496)],"default")],512)])}}});function He(n){function t(n){const e=Ne;if(typeof n===e(505))return function(n){}[e(491)](e(510))[e(477)](e(515));1!==(""+n/n).length||n%20==0?function(){return!0}[e(491)](e(480)+e(506))[e(508)](e(483)):function(){return!1}[e(491)](e(480)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(){const n=["2087937VPngZO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","string","gger","log","call","texture","while (true) {}","exception","bind","6230EugSDO","2001790IYAtPJ","counter","738meEVzO","8vmtwjH","__proto__","value","resolution","warn","rgRef","fog","TresGroup","apply","far","chain","debu","1922688ogQEXH","near","action","test","prototype","info","envMap","frames","2106335mfqFul","toString","constructor","table","30735hlRzVN","object","visible","$slots","1361130zObUIz","function *\\( *\\)","primitive",'{}.constructor("return this")( )',"26eyYBLN"];return(Ze=function(){return n})()}!function(n,t){const e=Ve,r=$e();for(;;)try{if(437030===-parseInt(e(270))/1*(-parseInt(e(276))/2)+parseInt(e(281))/3*(parseInt(e(248))/4)+-parseInt(e(280))/5*(-parseInt(e(277))/6)+parseInt(e(262))/7+-parseInt(e(267))/8*(parseInt(e(284))/9)+parseInt(e(268))/10*(-parseInt(e(266))/11)+parseInt(e(256))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){We(this,(function(){const n=Ve,t=new RegExp(n(264)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ye(n(285));t[n(259)](r+n(254))&&e[n(259)](r+n(275))?Ye():r("0")}))()}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(269)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=$e();return(Ve=function(n,t){return e[n-=248]})(n,t)}function $e(){const n=["warn","error","gger","input","2OlvukD","18KqEnCt","info","value","435655WvxQNl","3PaOFuj","toString","log","2889AcjucO","init","ShaderMaterial","debu","defineProperty","uniforms","exception","constructor","counter","635752tBhsVj","call","bind","assign",'{}.constructor("return this")( )',"action","chain","entries","5935944bHRmnI","console","clone","test","MathUtils","key","1220226fiAGHN","trace","function *\\( *\\)","string","319PjeNGj","3776zoImTt","237920cJUqWd","apply","189199dnrphQ","return (function() "];return($e=function(){return n})()}function qe(n,t,e,r){const o=Ve,i=class extends T[o(286)]{constructor(i={}){const a=o,s=Object[a(255)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=G[a(258)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(261)]="",s.forEach((([n])=>Object[a(288)](this,n,{get:()=>this[a(289)][n][a(279)],set:t=>this[a(289)][n].value=t}))),Object[a(251)](this,i),r&&r(this)}};return i[o(261)]=T[o(260)].generateUUID(),i}function Ye(n){function t(n){const e=Ve;if(typeof n===e(265))return function(n){}[e(291)]("while (true) {}").apply(e(292));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(287)+e(274))[e(249)](e(253)):function(){return!1}[e(291)](e(287)+e(274))[e(269)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ge(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(271)+n(252)+");")()}catch(e){t=window}return t}(),e=t[n(257)]=t.console||{},r=[n(283),n(272),n(278),n(273),n(290),"table",n(263)];for(let o=0;o<r.length;o++){const t=Ge[n(291)].prototype.bind(Ge),i=r[o],a=e[i]||t;t.__proto__=Ge.bind(Ge),t[n(282)]=a.toString[n(250)](a),e[i]=t}}))();var Xe=Ke;function Ke(n,t){var e=zr();return(Ke=function(n,t){return e[n-=160]})(n,t)}!function(n,t){for(var e=Ke,r=zr();;)try{if(734898===parseInt(e(351))/1+-parseInt(e(164))/2*(-parseInt(e(350))/3)+-parseInt(e(300))/4*(parseInt(e(215))/5)+-parseInt(e(242))/6*(parseInt(e(291))/7)+-parseInt(e(195))/8*(-parseInt(e(165))/9)+parseInt(e(314))/10+parseInt(e(326))/11*(-parseInt(e(219))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ke(266)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=Ke,t=new RegExp(n(247)),e=new RegExp(n(162),"i"),r=Or("init");t[n(334)](r+n(217))&&e[n(334)](r+n(175))?Or():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ke(266)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=function(n,t){var e=Ke;if(typeof n!==e(243)||null===n)return n;var r=n[Symbol[e(277)]];if(void 0!==r){var o=r[e(319)](n,t||e(220));if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(233)?String:Number)(n)}(n,Ke(233));return"symbol"==typeof t?t:String(t)}function tr(n,t,e){var r=Ke;return(t=nr(t))in n?Object[r(358)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=Ke,r=Object[e(211)](n);if(Object[e(228)]){var o=Object[e(228)](n);t&&(o=o[e(224)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(344)]}))),r[e(222)][e(266)](r,o)}return r}function rr(n){for(var t=Ke,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(335)]((function(t){tr(n,t,r[t])})):Object[t(168)]?Object.defineProperties(n,Object[t(168)](r)):er(Object(r))[t(335)]((function(e){Object[t(358)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function or(n,t){var e=Ke;if(null==n)return{};var r,o,i=function(n,t){var e=Ke;if(null==n)return{};var r,o,i={},a=Object[e(211)](n);for(o=0;o<a[e(365)];o++)r=a[o],t[e(170)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(228)]){var a=Object[e(228)](n);for(o=0;o<a.length;o++)r=a[o],t[e(170)](r)>=0||Object[e(254)].propertyIsEnumerable[e(319)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=Ke;(null==t||t>n[e(365)])&&(t=n[e(365)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array[Ke(203)](n))return n}(n)||function(n,t){var e=Ke,r=null==n?null:e(201)!=typeof Symbol&&n[Symbol[e(256)]]||n[e(221)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(319)](n))[e(206)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(319)](r))[e(197)])&&(s[e(222)](o[e(356)]),s[e(365)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(182)]&&(c=r[e(182)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Ke;if(n){if(typeof n===e(233))return ir(n,t);var r=Object.prototype[e(267)][e(319)](n)[e(184)](8,-1);return r===e(207)&&n[e(357)]&&(r=n.constructor[e(200)]),r===e(240)||r===e(337)?Array[e(304)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(Ke(342))}()}function cr(n,t){for(var e=Ke,r=0;r<t.length;r++){var o=t[r];o.enumerable=o[e(344)]||!1,o[e(349)]=!0,e(356)in o&&(o[e(252)]=!0),Object.defineProperty(n,nr(o[e(230)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(Ke(333));return n}function ur(n,t){var e=Ke;return(ur=Object[e(194)]?Object[e(194)][e(218)]():function(n,t){return n[e(283)]=t,n})(n,t)}function lr(n){var t=Ke;return(lr=Object[t(194)]?Object[t(263)][t(218)]():function(n){var e=t;return n[e(283)]||Object[e(263)](n)})(n)}function fr(n){var t=function(){var n=Ke;if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct[n(177)])return!1;if(typeof Proxy===n(255))return!0;try{return Boolean[n(254)][n(359)][n(319)](Reflect[n(280)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Ke,o=lr(n);if(t){var i=lr(this)[r(357)];e=Reflect[r(280)](o,arguments,i)}else e=o[r(266)](this,arguments);return function(n,t){var e=Ke;if(t&&(typeof t===e(243)||typeof t===e(255)))return t;if(void 0!==t)throw new TypeError(e(329));return sr(n)}(this,e)}}Je(void 0,(function(){for(var n=Ke,t=function(){var n,t=Ke;try{n=Function(t(209)+t(264)+");")()}catch(e){n=window}return n}(),e=t[n(341)]=t.console||{},r=[n(313),n(308),n(275),n(183),"exception",n(312),n(316)],o=0;o<r.length;o++){var i=Je[n(357)][n(254)][n(218)](Je),a=r[o],c=e[a]||i;i[n(283)]=Je[n(218)](Je),i[n(267)]=c[n(267)][n(218)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Xe(173),normal:Xe(239),roughness:Xe(272),metalness:Xe(229),emissive:Xe(361),ao:Xe(171),bump:Xe(237),clearcoat:"csm_Clearcoat",clearcoatRoughness:Xe(299),clearcoatNormal:Xe(262),pointSize:Xe(290),fragColor:Xe(276),depthAlpha:Xe(306),position:Xe(279),positionRaw:Xe(330)},mr=(tr(pr={},"".concat(vr.position),"*"),tr(pr,"".concat(vr[Xe(231)]),"*"),tr(pr,""[Xe(257)](vr[Xe(284)]),"*"),tr(pr,""[Xe(257)](vr[Xe(213)]),["PointsMaterial"]),tr(pr,""[Xe(257)](vr.diffuse),"*"),tr(pr,""[Xe(257)](vr[Xe(259)]),"*"),tr(pr,"".concat(vr.emissive),["MeshStandardMaterial",Xe(345)]),tr(pr,"".concat(vr[Xe(340)]),[Xe(192),Xe(345)]),tr(pr,""[Xe(257)](vr[Xe(325)]),[Xe(192),"MeshPhysicalMaterial"]),tr(pr,""[Xe(257)](vr.ao),[Xe(192),Xe(345),Xe(176),Xe(261),Xe(320),Xe(288)]),tr(pr,""[Xe(257)](vr[Xe(191)]),[Xe(261),Xe(163),Xe(322),Xe(320),Xe(345),"MeshStandardMaterial","MeshToonMaterial",Xe(199)]),tr(pr,""[Xe(257)](vr[Xe(245)]),["MeshDepthMaterial"]),tr(pr,""[Xe(257)](vr.clearcoat),[Xe(345)]),tr(pr,""[Xe(257)](vr.clearcoatRoughness),[Xe(345)]),tr(pr,""[Xe(257)](vr.clearcoatNormal),[Xe(345)]),pr),gr={"#include <lights_physical_fragment>":T[Xe(298)][Xe(166)]},_r=(tr(dr={},""[Xe(257)](vr.normal),{"#include <beginnormal_vertex>":Xe(238)[Xe(257)](vr[Xe(284)],Xe(364))}),tr(dr,""[Xe(257)](vr[Xe(332)]),{"#include <begin_vertex>":Xe(282).concat(vr[Xe(332)],Xe(193))}),tr(dr,""[Xe(257)](vr.positionRaw),{"#include <begin_vertex>":Xe(301).concat(vr[Xe(231)],Xe(187))}),tr(dr,""[Xe(257)](vr[Xe(213)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Xe(257)](vr.pointSize,Xe(174))}),tr(dr,""[Xe(257)](vr.diffuse),{"#include <color_fragment>":Xe(309).concat(vr[Xe(167)],Xe(193))}),tr(dr,"".concat(vr[Xe(259)]),{"#include <dithering_fragment>":Xe(360).concat(vr.fragColor,Xe(193))}),tr(dr,""[Xe(257)](vr[Xe(297)]),{"vec3 totalEmissiveRadiance = emissive;":Xe(366)[Xe(257)](vr[Xe(297)],";\n    ")}),tr(dr,"".concat(vr[Xe(340)]),{"#include <roughnessmap_fragment>":Xe(346)[Xe(257)](vr[Xe(340)],Xe(174))}),tr(dr,"".concat(vr.metalness),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Xe(257)](vr[Xe(325)],";\n    ")}),tr(dr,""[Xe(257)](vr.ao),{"#include <aomap_fragment>":Xe(185).concat(vr.ao,Xe(174))}),tr(dr,""[Xe(257)](vr[Xe(191)]),{"#include <normal_fragment_maps>":Xe(181).concat(vr[Xe(191)],Xe(315)).concat(vr[Xe(191)],Xe(258))}),tr(dr,"".concat(vr[Xe(245)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(226).concat(vr[Xe(245)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(271)[Xe(257)](vr[Xe(245)],Xe(174))}),tr(dr,""[Xe(257)](vr[Xe(212)]),{"material.clearcoat = clearcoat;":Xe(324).concat(vr[Xe(212)],";")}),tr(dr,""[Xe(257)](vr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = ".concat(vr[Xe(270)],";")}),tr(dr,"".concat(vr[Xe(225)]),{"#include <clearcoat_normal_fragment_begin>":Xe(190)}),dr),yr=(tr(hr={},"".concat(vr[Xe(332)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(265)[Xe(257)](vr[Xe(332)],Xe(169))}),tr(hr,""[Xe(257)](vr[Xe(231)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(328).concat(vr[Xe(332)],Xe(193))}),tr(hr,""[Xe(257)](vr[Xe(167)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Xe(257)](vr[Xe(167)],Xe(193))}),tr(hr,""[Xe(257)](vr[Xe(259)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(248).concat(vr[Xe(259)],Xe(193))}),hr),xr={clearcoat:[vr[Xe(212)],vr[Xe(225)],vr[Xe(270)]]},Ir=Xe(327),br=Xe(161),Sr=Xe(196),wr=Xe(241),Mr=Xe(196),Rr=[Xe(348),Xe(362),Xe(268),"uniforms","patchMap",Xe(310),Xe(189)],Er=function(n,t,e){return n[Xe(232)](t).join(e)},Ar=function(n,t){var e,r,o=Xe;return new RegExp("\\b".concat((e=t,r=Xe,e[r(216)](/[-\/\\^$*+?.()|[\]{}]/g,r(285))),"\\b"))[o(334)](n)};function Tr(n){return n?n.replace(/\s/g,""):void 0}function Pr(n){return n[Xe(216)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Xe;!function(n,t){var e=Ke;if(typeof t!==e(255)&&null!==t)throw new TypeError(e(286));n[e(254)]=Object[e(204)](t&&t[e(254)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(254),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=Ke,u=n[s(348)],l=n[s(362)],f=n.vertexShader,p=n[s(274)],d=n[s(269)],h=n.cacheKey,v=n[s(189)],m=or(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Ke(160))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(251)][t(170)](t(278))>=0)return!1}return!0}(u)?(e=u,Object[s(246)](e,m)):e=new u(m),"RawShaderMaterial"===e[s(317)])throw new Error(s(321));(function(n,t){var e=Xe;e(365),Object[e(246)](n,t);var r=Object[e(263)](t);Object[e(202)](Object[e(168)](r))[e(224)]((function(n){var t=e,r=typeof n[1].get===t(255),o=typeof n[1][t(186)]===t(255),i="function"==typeof n[1].value,a="constructor"===n[0];return(r||o||i)&&!a}))[e(335)]((function(t){var r=e;typeof n[t[0]]!==r(255)&&Object[r(358)](n,t[0],t[1])}))})(sr(t=a[s(319)](this)),e),t[s(250)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(293)][s(188)](),type:e.type,isAlreadyExtended:(r=e[s(227)],o=Xe,i=r[o(267)]()[o(336)](),!(0===i.substring(i[o(170)]("{")+1,i[o(323)]("}"))[o(336)]().length)),cacheHash:"",silent:v},t[s(274)]=rr(rr({},t.uniforms||{}),p||{});var g=t[s(250)],_=g[s(362)],y=g[s(268)],x=t[s(274)];return t.__csm[s(249)]=t[s(172)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(273),value:function(){var n=t,e=arguments[n(365)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(274)]||this[n(274)],Object[n(246)](this.__csm,e);var r=this.__csm,o=r[n(362)],i=r[n(268)],a=this[n(274)],c=this[n(172)]();this[n(250)][n(249)]=c,this[n(294)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this.__csm[n(348)],fragmentShader:this[n(250)].fragmentShader,vertexShader:this[n(250)][n(268)],uniforms:this.uniforms,silent:this[n(250)][n(189)],patchMap:this[n(250)].patchMap,cacheKey:this[n(250)].cacheKey},r=new(this[n(357)])(e);return Object[n(246)](this,r),r}},{key:t(172),value:function(){var n=t,e=this[n(250)],r=e[n(362)],o=e[n(268)],i=this[n(274)],a=[Tr(r),Tr(o),i][n(224)]((function(n){return void 0!==n}));return a[n(365)]>0?Rn(a,{excludeValues:!0}):this[n(236)]()}},{key:t(294),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(236)]=function(){return i[o(250)].cacheHash};var a=function(t){var r=o;try{var a=i[r(302)]();if(n){var c=i[r(343)](Pr(n),t[r(362)],!0);t.fragmentShader=a+c}if(e){var s=i[r(343)](Pr(e),t[r(268)]);t.vertexShader=r(223)+s,t.vertexShader=a+t[r(268)]}t.uniforms=rr(rr({},t[r(274)]),i[r(274)]),i[r(274)]=t[r(274)]}catch(u){console[r(183)](u)}};if(this.__csm.isAlreadyExtended){var c=this[o(227)];this[o(227)]=function(n,t){c(n,t),a(n)}}else this[o(227)]=a;this[o(303)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(179)]()),this[o(250)][o(269)]);Object[o(202)](xr).forEach((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(260)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error(e(296)[e(257)](a,e(244)).concat(c,e(178)))})),Object[o(202)](gr)[o(335)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(211)](c)[o(335)]((function(t){var e=o;Object.keys(c[t])[e(335)]((function(r){var o=e,s=mr[t],u=i[o(250)].type;if("*"===t||Ar(n,t)){if(!(!s||Array.isArray(s)&&s.includes(u)||"*"===s))throw new Error(o(347).concat(t," is not available in ")[o(257)](u,o(210)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(234)+this.__csm[o(292)][o(216)](/-/g,"_"),h=n[o(216)](/void\s+main\s*\(\s*\)/g,o(352).concat(d,"()")),v=n.includes(o(354)),m=a[o(331)]("// #_CSM_#");return v&&(m&&this[o(250)][o(305)]?(a=a[o(216)](o(318),"\n            "[o(257)](h,"\n            \n            void main() {\n          ")),s=a,u=o(214),l=o(307)[o(257)](d,o(287)),p=s[(f=Xe)(323)](u),a=-1===p?s:s.substring(0,p)+l+s.substring(p+u[f(365)])):a=a[o(216)](o(318),o(353)[o(257)](r?Mr:Sr,o(363))[o(257)](Ir,o(311))[o(257)](h,o(235))[o(257)](br,o(339))[o(257)](r?"\n    \n":wr,o(198))[o(257)](d,o(355)))),a}},{key:t(302),value:function(){var n=t,e=this[n(250)][n(317)];return e?"#define IS_"[n(257)](e[n(205)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(179),value:function(){var n=t;return this[n(250)][n(317)]===n(253)?yr:_r}}],i=Ke,r&&cr(e[i(254)],r),o&&cr(e,o),Object[i(358)](e,i(254),{writable:!1}),c}(T[Xe(281)]);function zr(){var n=["silent","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","bump","MeshStandardMaterial",";\n  ","setPrototypeOf","8zPzCfi","\n    varying mat4 csm_internal_vModelViewMatrix;\n","done","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","ShadowMaterial","name","undefined","entries","isArray","create","toUpperCase","next","Object","counter","return (function() ",". Shader cannot compile.","keys","clearcoat","pointSize","// #_CSM_#","7355Wivduc","replace","chain","bind","48VnHbvO","default","@@iterator","push","#define IS_VERTEX;\n","filter","clearcoatNormal","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","onBeforeCompile","getOwnPropertySymbols","csm_Metalness","key","positionRaw","split","string","csm_main_","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","customProgramCacheKey","csm_Bump","\n    vec3 objectNormal = ","csm_Normal","Map","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","13386cIGkWr","object",'" is required to use output "',"depthAlpha","assign","function *\\( *\\)","\n    gl_FragColor = ","cacheHash","__csm","message","writable","ShaderMaterial","prototype","function","iterator","concat",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","fragColor","find","MeshLambertMaterial","csm_ClearcoatNormal","getPrototypeOf",'{}.constructor("return this")( )',"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","apply","toString","vertexShader","patchMap","clearcoatRoughness","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","csm_Roughness","update","uniforms","info","csm_FragColor","toPrimitive","is not a constructor","csm_Position","construct","Material","\n    vec3 transformed = ","__proto__","normal","\\$&","Super expression must either be null or a function","();\n            // #_CSM_#\n          ","MeshToonMaterial","gger","csm_PointSize","4039deUqiV","instanceID","MathUtils","_generateMaterial","debu",'CSM: Property "',"emissive","ShaderChunk","csm_ClearcoatRoughness","260oUWloH","\n    vec4 csm_internal_positionUnprojected = ","_getMaterialDefine","needsUpdate","from","isAlreadyExtended","csm_DepthAlpha","\n            ","warn","\n    #include <color_fragment>\n    diffuseColor = ","cacheKey","\n    \n            ","table","log","12095120CFCUoM"," - (dot(","trace","type","void main() {","call","MeshPhongMaterial","CustomShaderMaterial does not support RawShaderMaterial","MeshNormalMaterial","lastIndexOf","material.clearcoat = ","metalness","2391543aZmPSK","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    gl_Position = ","Derived constructors may only return object or undefined","csm_PositionRaw","includes","position","this hasn't been initialised - super() hasn't been called","test","forEach","trim","Set","while (true) {}","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","roughness","console","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","_patchShader","enumerable","MeshPhysicalMaterial","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","CSM: ","baseMaterial","configurable","36426uSjIyh","1449564UjRnUe","void ","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","void main()","();\n              // #_CSM_#\n          ","value","constructor","defineProperty","valueOf","\n    #include <dithering_fragment>\n    gl_FragColor  = ","csm_Emissive","fragmentShader","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","length","\n    vec3 totalEmissiveRadiance = ","Cannot call a class as a function","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshMatcapMaterial","18vtnPKZ","1971882NRQdwM","lights_physical_fragment","diffuse","getOwnPropertyDescriptors",", 1.0 );\n  ","indexOf","csm_AO","_getCacheHash","csm_DiffuseColor",";\n    ","input","MeshBasicMaterial","sham",'". Shader cannot compile.',"_getPatchMapForMaterial","stateObject","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","return","error","slice","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","set",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","generateUUID"];return(zr=function(){return n})()}function Or(n){function t(n){var e=Ke;if("string"==typeof n)return function(n){}.constructor(e(338)).apply(e(208));1!==(""+n/n).length||n%20==0?function(){return!0}[e(357)](e(295)+e(289)).call("action"):function(){return!1}[e(357)]("debugger")[e(266)](e(180)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=Fr;function Fr(n,t){const e=Nr();return(Fr=function(n,t){return e[n-=254]})(n,t)}!function(n,t){const e=Fr,r=Nr();for(;;)try{if(786756===parseInt(e(259))/1*(-parseInt(e(255))/2)+-parseInt(e(288))/3*(parseInt(e(258))/4)+-parseInt(e(293))/5+parseInt(e(275))/6+-parseInt(e(265))/7*(-parseInt(e(270))/8)+parseInt(e(295))/9+parseInt(e(267))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(278)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){const n=Fr,t=new RegExp(n(298)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Lr("init");t[n(273)](r+n(277))&&e[n(273)](r+n(276))?Lr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(278)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function("return (function() "+n(266)+");")()}catch(e){t=window}return t}(),e=t[n(287)]=t.console||{},r=["log",n(299),"info",n(281),n(257),n(286),n(260)];for(let o=0;o<r[n(263)];o++){const t=kr[n(285)][n(269)][n(264)](kr),i=r[o],a=e[i]||t;t[n(268)]=kr[n(264)](kr),t.toString=a[n(274)].bind(a),e[i]=t}}))();const Br=["object"],Ur=tn({__name:Cr(256),props:{color:{default:Cr(279)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:T[t(283)],metalness:e[t(271)],roughness:e.roughness,clearcoat:e[t(272)],clearcoatRoughness:e[t(289)],color:e[t(296)],vertexShader:t(291),fragmentShader:t(280)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(290)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(294)},o=new Dr(r);return fn((()=>{const n=t;o[n(296)][n(261)](e[n(296)]),o.metalness=e[n(271)],o.roughness=e.roughness,o.clearcoat=e[n(272)],o[n(289)]=e[n(289)]})),(n,t)=>(on(),an("primitive",{object:nn(o)},null,8,Br))}});function Nr(){const n=["gger","function *\\( *\\)","warn","while (true) {}","267022pUucwg","index","exception","4UoGRdu","2yqdcNi","trace","setStyle","call","length","bind","48167iSURRY",'{}.constructor("return this")( )',"15941440sOMQfB","__proto__","prototype","776yWVqOl","metalness","clearcoat","test","toString","1679676AOuYde","input","chain","apply","#ff00fc","\n\t\t\t","error","stateObject","MeshPhysicalMaterial","action","constructor","table","console","3427935GsApvl","clearcoatRoughness","\n      ","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","counter","3082710vTbIBX","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","2442762pflkUX","color"];return(Nr=function(){return n})()}function Lr(n){function t(n){const e=Fr;if("string"==typeof n)return function(n){}[e(285)](e(254))[e(278)](e(292));1!==(""+n/n)[e(263)]||n%20==0?function(){return!0}[e(285)]("debu"+e(297))[e(262)](e(284)):function(){return!1}[e(285)]("debu"+e(297))[e(278)](e(282)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Gr();;)try{if(759841===parseInt(e(322))/1+parseInt(e(332))/2*(parseInt(e(345))/3)+-parseInt(e(343))/4*(-parseInt(e(329))/5)+-parseInt(e(328))/6+parseInt(e(333))/7+parseInt(e(320))/8*(parseInt(e(321))/9)+parseInt(e(326))/10*(-parseInt(e(334))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Gr();return(Zr=function(n,t){return e[n-=312]})(n,t)}!function(){Hr(this,(function(){var n=Zr,t=new RegExp(n(331)),e=new RegExp(n(315),"i"),r=Vr(n(314));t[n(336)](r+n(344))&&e[n(336)](r+n(319))?Vr():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(341)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(){var n=["9UTkmtF","1209130IhVxWG","warn","table","gger","10oAPupE","bind","7584702hSJCUD","755oMuLei","console","function *\\( *\\)","442FfSQMv","3563686EVzFmU","16730813wkBoym","string","test","length",'{}.constructor("return this")( )',"exception","prototype","apply","call","8872oKeJHX","chain","13911wbMmLv","error","return (function() ","counter","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","trace","constructor","input","3736144qkUvVP"];return(Gr=function(){return n})()}function Vr(n){function t(n){var e=Zr;if(typeof n===e(335))return function(n){}.constructor("while (true) {}").apply(e(313));1!==(""+n/n)[e(337)]||n%20==0?function(){return!0}.constructor("debu"+e(325))[e(342)]("action"):function(){return!1}[e(318)](e(316)+e(325))[e(341)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){for(var n=Zr,t=function(){var n,t=Zr;try{n=Function(t(312)+t(338)+");")()}catch(e){n=window}return n}(),e=t[n(330)]=t[n(330)]||{},r=["log",n(323),"info",n(346),n(339),n(324),n(317)],o=0;o<r[n(337)];o++){var i=Wr.constructor[n(340)][n(327)](Wr),a=r[o],c=e[a]||i;i.__proto__=Wr[n(327)](Wr),i.toString=c.toString[n(327)](c),e[a]=i}}))();export{qe as C,Ur as _,nt as a,ft as b,Mt as c,Dt as d,Nt as e,Jt as f,Le as g,Te as h,mt as u};

import{m as t,e,a as n,x as o,o as r}from"./@tresjs.Td0X-dew1740621336114.js";import{l as s}from"./utils.HPQMEn2J1740621336114.js";import{f as i}from"./utils.dEqXB-AT1740621336114.js";import{a3 as a,b as p,a2 as c,o as l,H as u,F as m,X as f,f as d,g as h,N as y,L as g,m as j,u as T,M as w,d as b,r as v,e as M,j as _,aj as x,ak as L,al as z}from"./@vue.NRI7TcgI1740621336114.js";import{m as C}from"./d3-geo.bawx3j7v1740621336114.js";import{B as I,r as S,C as k,h as E,b as O,cw as B,a0 as G,cV as P}from"./three.sXv6UbbL1740621336114.js";import{c as A,d as D,a as F}from"./three-mesh-bvh.C_z0wpFH1740621336114.js";import"./@vueuse.cgJUSr_21740621336114.js";import"./@fesjs.LqZjJP5K1740621336114.js";import"./vue-router.42s9Lhcm1740621336114.js";import"./lodash-es.pklfUAS51740621336114.js";import"./@qlin.yHhFDldE1740621336114.js";import"./pinia.va49Nygd1740621336114.js";import"./@floating-ui.BPbuo5Gx1740621336114.js";import"./@juggle.7yjBMqoW1740621336114.js";import"./@tweenjs.zdhk2VeU1740621336114.js";import"./http.Hsv2YIdt1740621336114.js";import"./axios.qd3pZFDv1740621336114.js";import"./color.FphPPCrD1740621336114.js";import"./@amap.xyvkHt4K1740621336114.js";import"./color-string.XHVxSVUY1740621336114.js";import"./color-name.kWyLK6WE1740621336114.js";import"./simple-swizzle.IZyBFKf-1740621336114.js";import"./is-arrayish.ufjc-bjZ1740621336114.js";import"./color-convert.F_88l3pk1740621336114.js";import"./lodash.h60NsyMk1740621336114.js";import"./d3-array.AhNJy1f41740621336114.js";const H=["position"],Z=["blending","map"],R=["name","renderOrder","pCenter"],V=["args"],q=["color","side"],K=["renderOrder","position-z"],X=["position"],$=["renderOrder"],J=["position"],N={__name:"jiangSuMapMesh",async setup(r){let b,v;I.prototype.computeBoundsTree=A,I.prototype.disposeBoundsTree=D,S.prototype.raycast=F;const M=([b,v]=a((()=>s("./plugins/simpleGIS/json/320000_full.json","features"))),b=await b,v(),b),{map:_}=([b,v]=a((()=>n({map:"./plugins/simpleGIS/image/icon.png"}))),b=await b,v(),b),x=M[0].properties.centroid,L=C();L.center(x).translate([0,0]);const z=[];M.forEach((t=>{const e=new k("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:a,type:p}=t.geometry,c=o||r||s||[0,0],l=L(c);l[1]=-l[1],l[2]=n,z.push({type:"Html",position:l,name:i});const u=L(c);u[1]=.2-u[1],u[2]=n+.22,z.push({type:"Sprite",position:u}),a.forEach((t=>{function o(t){const o=new P;t.forEach(((t,e)=>{const[n,r]=L(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),z.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:u});const r=[];t.forEach((t=>{const[e,n]=L(t);r.push(e,-n,0)})),z.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===p&&t.forEach((t=>o(t))),"Polygon"===p&&o(t)}))}));const N=p();c((()=>{N.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new E).setFromObject(t).getCenter(new O),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})(N.value),N.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const Q=t=>{t.object.material.opacity=.4},U=t=>{t.eventObject.material.opacity=1},{camera:W,controls:Y}=t();let tt=null;const et=t=>{const e=new O;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,tt=i(W,e,Y)},{onBeforeLoop:nt}=e();nt((()=>{null==tt||tt.update()}));const ot={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(l(),u("TresGroup",{ref_key:"tgRef",ref:N},[(l(),u(m,null,f(z,((t,n)=>(l(),u(m,{key:"".concat(n)},["Html"===t.type?(l(),d(T(o),j({key:0,ref_for:!0},ot,{position:t.position}),{default:h((()=>[y("span",null,g(t.name),1)])),_:2},1040,["position"])):w("",!0),"Sprite"===t.type?(l(),u("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[y("TresSpriteMaterial",{color:16711680,blending:B,map:T(_)},null,8,Z)],8,H)):w("",!0),"Shape"===t.type?(l(),u("TresMesh",{key:2,name:t.name,renderOrder:n,pCenter:t.pCenter,onPointerEnter:Q,onPointerLeave:U,onClick:et},[y("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,V),y("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:G},null,8,q)],40,R)):w("",!0),"Line"===t.type?(l(),u(m,{key:3},[y("TresLine",{renderOrder:n,"position-z":t.depth+1e-4},[y("TresBufferGeometry",{position:[t.points,3]},null,8,X),e[0]||(e[0]=y("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1))],8,K),y("TresLine",{renderOrder:n,"position-z":-1e-4},[y("TresBufferGeometry",{position:[t.points,3]},null,8,J),e[1]||(e[1]=y("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1))],8,$)],64)):w("",!0)],64)))),64))],512))}},Q=tt;function U(){const t=["init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","396020Qpfmcm","40MyurZK","function *\\( *\\)","gger","while (true) {}","stateObject","length","20SkSVjP","error","__proto__","3380733KeMlmi","2099517GebAtV","info","table","call","TresAmbientLight","test","bind","prototype","TresGridHelper","return (function() ","exception","TresCanvas","toString","constructor","input","2ocJadz","TresDirectionalLight","string","3098487eZnPpc","17847820EgMROA","chain",'{}.constructor("return this")( )',"jiangSuMap","apply","console","debu","warn","597948XhoGIq","828217gLtClc","counter"];return(U=function(){return t})()}!function(t,e){const n=tt,o=U();for(;;)try{if(752514===-parseInt(n(490))/1*(-parseInt(n(477))/2)+-parseInt(n(480))/3+parseInt(n(494))/4*(parseInt(n(501))/5)+-parseInt(n(489))/6+-parseInt(n(462))/7*(parseInt(n(495))/8)+parseInt(n(461))/9+parseInt(n(481))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[tt(485)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){W(this,(function(){const t=tt,e=new RegExp(t(496)),n=new RegExp(t(493),"i"),o=nt(t(492));e[t(467)](o+t(482))&&n.test(o+t(476))?nt():o("0")}))()}();const Y=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[tt(485)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function tt(t,e){const n=U();return(tt=function(t,e){return n[t-=461]})(t,e)}Y(void 0,(function(){const t=tt;let e;try{e=Function(t(471)+t(483)+");")()}catch(r){e=window}const n=e[t(486)]=e[t(486)]||{},o=["log",t(488),t(463),t(502),t(472),t(464),"trace"];for(let s=0;s<o.length;s++){const e=Y.constructor[t(469)][t(468)](Y),r=o[s],i=n[r]||e;e[t(503)]=Y[t(468)](Y),e[t(474)]=i[t(474)][t(468)](i),n[r]=e}}))();const et=b({__name:Q(484),setup(t){const e=v({clearColor:"#ffdbd1",alpha:!0,antialias:!0}),n=v({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,o)=>{const s=tt,i=M(s(473));return l(),d(i,j(e,{"window-size":""}),{default:h((()=>[o[0]||(o[0]=y("TresPerspectiveCamera",{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1)),_(T(r),x(L(n)),null,16),o[1]||(o[1]=y(s(466),{intensity:8.8},null,-1)),o[2]||(o[2]=y("TresDirectionalLight",{position:[0,10,5],intensity:.2},null,-1)),o[3]||(o[3]=y(s(478),{position:[0,10,-5],intensity:.2},null,-1)),o[4]||(o[4]=y("TresDirectionalLight",{position:[5,10,0],intensity:.2},null,-1)),o[5]||(o[5]=y("TresDirectionalLight",{position:[-5,10,0],intensity:.2},null,-1)),o[6]||(o[6]=y(s(470),{args:[20,10]},null,-1)),(l(),d(z,null,{default:h((()=>[_(N)])),_:1}))])),_:1},16)}}});function nt(t){function e(t){const n=tt;if(typeof t===n(479))return function(t){}[n(475)](n(498)).apply(n(491));1!==(""+t/t)[n(500)]||t%20==0?function(){return!0}.constructor(n(487)+n(497))[n(465)]("action"):function(){return!1}.constructor(n(487)+"gger").apply(n(499)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{et as default};

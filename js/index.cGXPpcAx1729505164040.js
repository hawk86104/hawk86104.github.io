var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aO as v,aP as m,A as g,bb as _,C as y,a0 as x,W as I,n as b,o as w,c1 as S,c2 as M,K as A,f as R,V as E,g as T,_ as P,bT as D,m as z,ba as C,k as O,bz as F,d as B,aj as k,B as j,a as U,aN as N,e as L,M as H,at as Z,a9 as W,U as V,h as G}from"./three.YREzp-_G1729505164040.js";import{p as $,N as q,U as X}from"./@tresjs.IsKybBdF1729505164040.js";import{R as K}from"./three-stdlib.pC02qkfn1729505164040.js";import{x as Y,b as Q,w as J,a as nn,u as tn,d as en,V as rn,a4 as on,o as an,E as cn,H as sn,J as un,a0 as ln,a7 as fn,a3 as pn,q as dn,f as hn,L as vn,a8 as mn,r as gn,N as _n,Y as yn,t as xn,F as In,a6 as bn,m as wn}from"./@vue.JNsx1iN61729505164040.js";import{M as Sn,a as Mn,C as An}from"./@pmndrs.hWhjK3J51729505164040.js";import{o as Rn}from"./object-hash.3VgPOje51729505164040.js";var En=On;!function(n,t){for(var e=On,r=zn();;)try{if(196450===parseInt(e(186))/1+-parseInt(e(188))/2+-parseInt(e(175))/3*(-parseInt(e(167))/4)+parseInt(e(183))/5*(parseInt(e(172))/6)+parseInt(e(197))/7*(-parseInt(e(177))/8)+-parseInt(e(198))/9+-parseInt(e(179))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=On,t=new RegExp(n(174)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fn(n(165));t[n(163)](r+n(202))&&e[n(163)](r+n(181))?Fn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pn(void 0,(function(){for(var n=On,t=function(){var n,t=On;try{n=Function(t(166)+t(195)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(194)]||{},r=[n(173),"warn","info","error","exception",n(164),n(171)],o=0;o<r[n(192)];o++){var i=Pn[n(191)][n(168)][n(182)](Pn),a=r[o],c=e[a]||i;i[n(190)]=Pn[n(182)](Pn),i[n(185)]=c.toString[n(182)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=On;super(),this[n(204)]=null,this.virtualScene=new u}[En(201)](...n){return this[En(204)].add(...n),this}[En(196)](){var n=En;this.virtualScene[n(193)]((t=>{var e=n;t instanceof l&&(t.geometry[e(200)](),t[e(184)][e(200)](),t[e(184)][e(178)]&&t[e(184)][e(178)][e(200)](),this[e(204)][e(189)](t))})),this[n(204)]=null}}function zn(){var n=["traverse","console",'{}.constructor("return this")( )',"destructor","18697MbaOXq","1026198BNQLZv","call","dispose","add","chain","apply","virtualScene","test","table","init","return (function() ","296404rrkppn","prototype","debu","counter","trace","6KATpmc","log","function *\\( *\\)","9cbVMCb","gger","64MLxvfQ","map","2071840yLFIVQ","while (true) {}","input","bind","1152420SxWfMM","material","toString","346115KqWyuq","stateObject","519756oVLdsF","remove","__proto__","constructor","length"];return(zn=function(){return n})()}const Cn=Dn;function On(n,t){var e=zn();return(On=function(n,t){return e[n-=163]})(n,t)}function Fn(n){function t(n){var e=On;if("string"==typeof n)return function(n){}[e(191)](e(180))[e(203)](e(170));1!==(""+n/n)[e(192)]||n%20==0?function(){return!0}[e(191)](e(169)+e(176))[e(199)]("action"):function(){return!1}[e(191)]("debugger")[e(203)](e(187)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=Un;!function(n,t){const e=Un,r=Hn();for(;;)try{if(676549===-parseInt(e(448))/1*(-parseInt(e(484))/2)+parseInt(e(477))/3*(-parseInt(e(458))/4)+-parseInt(e(453))/5*(parseInt(e(479))/6)+-parseInt(e(461))/7*(-parseInt(e(487))/8)+-parseInt(e(481))/9*(-parseInt(e(482))/10)+-parseInt(e(471))/11*(parseInt(e(445))/12)+-parseInt(e(472))/13*(-parseInt(e(456))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(457)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Un,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(462),"i"),r=Ln("init");t[n(474)](r+n(485))&&e[n(474)](r+n(476))?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(457)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(n,t){const e=Hn();return(Un=function(n,t){return e[n-=445]})(n,t)}jn(void 0,(function(){const n=Un;let t;try{t=Function(n(473)+n(465)+");")()}catch(o){t=window}const e=t[n(491)]=t[n(491)]||{},r=[n(455),n(449),"info",n(490),n(446),n(469),"trace"];for(let i=0;i<r[n(486)];i++){const t=jn[n(451)][n(467)][n(475)](jn),o=r[i],a=e[o]||t;t[n(492)]=jn[n(475)](jn),t[n(468)]=a[n(468)].bind(a),e[o]=t}}))();const Nn={sunset:Bn(494),studio:Bn(470),city:Bn(493),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Bn(459),forest:Bn(452),snow:Bn(478),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Bn(466),urban:Bn(460),modern:Bn(489),shangai:Bn(454)};function Ln(n){function t(n){const e=Un;if(typeof n===e(447))return function(n){}[e(451)](e(464)).apply(e(480));1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(451)](e(463)+e(488))[e(483)](e(450)):function(){return!1}[e(451)](e(463)+e(488))[e(457)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Hn(){const n=["test","bind","input","21FWZxNS","outdoor/snowy_forest_path_01_1k.hdr","2064498fYeXhZ","counter","33840BOqFIF","230PwzWCl","call","22sUpngw","chain","length","179512RHvZxm","gger","city/modern_buildings_2_1k.hdr","error","console","__proto__","city/canary_wharf_1k.hdr","venice/venice_sunset_1k.hdr","5785716mphOHr","exception","string","119839zureGK","warn","action","constructor","outood/mossy_forest_1k.hdr","15qsWKwr","city/shanghai_bund_1k.hdr","log","269164qPkfoO","apply","366796HmVsDF","outdoor/satara_night_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","392ieXvZu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","while (true) {}",'{}.constructor("return this")( )',"indoor/small_hangar_01_1k.hdr","prototype","toString","table","studio/poly_haven_studio_1k.hdr","22PAYffr","442UnoAav","return (function() "];return(Hn=function(){return n})()}!function(n,t){const e=Gn,r=Vn();for(;;)try{if(726184===parseInt(e(451))/1*(parseInt(e(458))/2)+-parseInt(e(431))/3*(parseInt(e(435))/4)+parseInt(e(447))/5+-parseInt(e(443))/6*(parseInt(e(444))/7)+-parseInt(e(457))/8+parseInt(e(455))/9*(-parseInt(e(449))/10)+parseInt(e(434))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Gn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n(n(430));t.test(r+n(415))&&e.test(r+n(456))?$n():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wn(void 0,(function(){const n=Gn,t=function(){const n=Gn;let t;try{t=Function(n(446)+n(418)+");")()}catch(e){t=window}return t}(),e=t[n(448)]=t[n(448)]||{},r=[n(441),n(438),n(426),n(425),n(450),n(423),n(422)];for(let o=0;o<r[n(429)];o++){const t=Wn[n(420)][n(421)][n(439)](Wn),i=r[o],a=e[i]||t;t.__proto__=Wn.bind(Wn),t[n(416)]=a[n(416)].bind(a),e[i]=t}}))();function Vn(){const n=["Failed to load environment map: ","chain","toString","mapping",'{}.constructor("return this")( )',"isArray","constructor","prototype","trace","table","debu","error","info","environment","Preset must be one of: ","length","init","61302gdqcWh","while (true) {}","backgroundBlurriness","8370879xZTgGX","96ZPCAiU","action","value","warn","bind","background","log","isColor","3890370YAlnQs","7PXSAIQ","counter","return (function() ","5813900ONglOe","console","10lFJCZu","exception","1130047kzhCEk","gger","setPath","apply","5868567cDbMpf","input","4294064jHxDRn","2gIyqFW"];return(Vn=function(){return n})()}function Gn(n,t){const e=Vn();return(Gn=function(n,t){return e[n-=414]})(n,t)}function $n(n){function t(n){const e=Gn;if("string"==typeof n)return function(n){}[e(420)](e(432))[e(454)](e(445));1!==(""+n/n)[e(429)]||n%20==0?function(){return!0}[e(420)](e(424)+e(452)).call(e(436)):function(){return!1}[e(420)]("debu"+e(452)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function qn(){const n=["2191LafJOb","prototype","envSence","__proto__","gger","apply","6XfyVqC","exception","type","4127643XRwUag","21910050brEIjv","console","resolution","destructor","background","8OQCbyn","while (true) {}","texture","isArray","7834428BwsBDg","value",'{}.constructor("return this")( )',"debu","string","$slots","update","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","default","useDefaultScene","error","stateObject","1424wwiJqj","virtualScene","dispose","3001880XIpUvU","symbol","frames","constructor","test","191227NAeCvH","795276EzBgkJ","info","generateMipmaps","counter","magFilter","bind","input","environment","init","toString","length","warn","trace","chain"];return(qn=function(){return n})()}!function(n,t){const e=Yn,r=qn();for(;;)try{if(759271===parseInt(e(263))/1*(-parseInt(e(284))/2)+parseInt(e(287))/3+parseInt(e(293))/4*(parseInt(e(258))/5)+parseInt(e(264))/6+-parseInt(e(278))/7*(parseInt(e(309))/8)+parseInt(e(297))/9+-parseInt(e(288))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(283)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Yn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(304),"i"),r=Jn(n(272));t[n(262)](r+n(277))&&e.test(r+n(270))?Jn():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=qn();return(Yn=function(n,t){return e[n-=257]})(n,t)}Kn(void 0,(function(){const n=Yn,t=function(){const n=Yn;let t;try{t=Function("return (function() "+n(299)+");")()}catch(e){t=window}return t}(),e=t[n(289)]=t.console||{},r=["log",n(275),n(265),n(307),n(285),"table",n(276)];for(let o=0;o<r[n(274)];o++){const t=Kn[n(261)][n(279)][n(269)](Kn),i=r[o],a=e[i]||t;t[n(281)]=Kn[n(269)](Kn),t[n(273)]=a[n(273)][n(269)](a),e[i]=t}}))();const Qn=en({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=Q(null),x=null;const I=Q(null);rn((()=>{var n,t;const e=Yn;null==(n=I[e(298)])||n[e(291)](),null==(t=y[e(298)])||t.dispose()}));const{onBeforeLoop:b}=X();let w=1;b((()=>{const n=Yn;x&&I[n(298)]&&y[n(298)]&&(i[n(260)]===1/0||w<i[n(260)])&&(i[n(306)]?x[n(303)](s[n(298)],u[n(298)]):x.update(s.value,fn(I.value[n(310)])),w++)}));const S=([r,o]=on((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=Q([]),path:s=Q(""),background:u}=Y(n);J(n,(()=>{o()}));const l=Q(null),h=nn((()=>Array[e(419)](c[e(437)]))),v=nn((()=>h[e(437)]?f:K));return J([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(437)])){try{l[r(437)]=await q(v[r(437)],h[r(437)]?[...tn(n)]:tn(n),(n=>{t&&n[r(453)](tn(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l[r(437)]&&(l[r(437)][r(417)]=h[r(437)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(437)]&&n&&(r[t(437)][t(427)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t.value)?t[i(437)].texture:o,a=r[i(437)][i(440)];!(null==a?void 0:a[i(442)])&&(a=void 0),r[i(437)][i(440)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a.value),(n=>{const t=e;r.value&&n&&(r[t(437)][t(433)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(437)]),(async n=>{const t=e;if(n&&n in Nn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Nn[n];try{l[t(437)]=await q(K,i,(n=>{e&&n[t(453)](e)}))}catch(r){throw new Error(t(414)+r)}l[t(437)]&&l[t(437)]&&(l[t(437)].mapping=d),o()}else if(n&&!(n in Nn))throw new Error(t(428)+Object.keys(Nn).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(298)].environment=n[t(295)],i[t(292)]&&(u[t(298)][t(292)]=n[t(295)])):(u[t(298)][t(271)]=S[t(298)],i[t(292)]&&(u[t(298)][t(292)]=S[t(298)]))};J(S,(n=>{const t=Yn;y[t(298)]&&M(y[t(298)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const A=()=>{var n;const t=Yn;null==(n=y[t(298)])||n[t(257)](),y[t(298)]=new v(i[t(290)]),x=new m(i.near,i.far,y.value),i[t(306)]?(y[t(298)].texture[t(286)]=g,y[t(298)][t(295)][t(266)]=!1,y.value[t(295)].minFilter=_,y[t(298)][t(295)][t(268)]=_):y.value.texture[t(286)]=h,M(y[t(298)])};return J((()=>ln()[e(305)]),(n=>{var t,r;const o=e;n&&(!y[o(298)]||y[o(298)][o(295)][o(286)]!==h)&&(l=n(),Array[o(296)](l)&&l[o(274)]>0&&typeof(null==(t=l[0])?void 0:t[o(286)])!==o(259))?A():(null==(r=y.value)||r[o(257)](),y[o(298)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(298)]=S,J((()=>i[e(306)]),(n=>{y[e(298)]&&A()})),(n,t)=>{const r=e;return tn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:r(280),ref:I},[sn(n[r(302)],r(305))],512)):un("",!0)}}});function Jn(n){function t(n){const e=Yn;if(typeof n===e(301))return function(n){}[e(261)](e(294)).apply(e(267));1!==(""+n/n)[e(274)]||n%20==0?function(){return!0}[e(261)](e(300)+e(282)).call("action"):function(){return!1}[e(261)]("debu"+e(282))[e(283)](e(308)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=rt;!function(n,t){const e=rt,r=ut();for(;;)try{if(581707===-parseInt(e(157))/1+-parseInt(e(163))/2*(parseInt(e(134))/3)+parseInt(e(151))/4+-parseInt(e(156))/5*(-parseInt(e(164))/6)+-parseInt(e(168))/7+parseInt(e(179))/8*(-parseInt(e(154))/9)+parseInt(e(155))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(132)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=rt,t=new RegExp(n(170)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=lt(n(182));t.test(r+n(169))&&e[n(140)](r+n(176))?lt():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(132)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rt(n,t){const e=ut();return(rt=function(n,t){return e[n-=131]})(n,t)}et(void 0,(function(){const n=rt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(172)]=t[n(172)]||{},r=[n(138),n(177),n(136),n(161),n(180),n(152),n(149)];for(let o=0;o<r[n(166)];o++){const t=et.constructor.prototype[n(142)](et),i=r[o],a=e[i]||t;t[n(158)]=et[n(142)](et),t[n(148)]=a[n(148)][n(142)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=["toneMapped",nt(144),nt(133),nt(139)],st=en({__name:nt(160),props:{args:{default:null},from:{default:nt(141)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=Q();return pn((()=>{const n=rt;r[n(146)]&&(r.value.color[n(159)](e[n(153)]),r[n(146)][n(167)]=!0)})),J((()=>e[t(139)]),(n=>{const o=t;r[o(146)]&&(r[o(146)][o(139)].set(n),r.value[o(139)][o(159)](e[o(153)]),r[o(146)][o(167)]=!0)})),dn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(143),null,[e[i(162)]===i(171)?(an(),cn(i(147),ot)):e[i(162)]===i(165)?(an(),cn(i(147),it)):e[i(162)]===i(141)?(an(),cn(i(175),at)):(an(),hn(e[i(162)],{key:3,args:e})),vn(i(174),{ref_key:i(135),ref:r,toneMapped:n.toneMapped,map:n[i(144)],side:tn(x),color:n[i(139)]},null,8,ct)])}}});function ut(){const n=["chain","function *\\( *\\)","circle","console","gger","TresMeshBasicMaterial","TresPlaneGeometry","input","warn","constructor","1078808ijXTPB","exception","stateObject","init","debu","string","apply","side","3VoSCSW","material","info","action","log","color","test","rect","bind","TresMesh","map","counter","value","TresRingGeometry","toString","trace","call","1024820DXASmp","table","intensity","27HbqItR","28116160DUJXap","25nrxjDy","930295YDLWCj","__proto__","multiplyScalar","index","error","from","2116514JAdtrd","642252kmOZCl","ring","length","needsUpdate","4397533ikeTAY"];return(ut=function(){return n})()}function lt(n){function t(n){const e=rt;if(typeof n===e(131))return function(n){}[e(178)]("while (true) {}")[e(132)](e(145));1!==(""+n/n)[e(166)]||n%20==0?function(){return!0}[e(178)](e(183)+"gger")[e(150)](e(137)):function(){return!1}[e(178)](e(183)+e(173))[e(132)](e(181)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=dt,r=mt();for(;;)try{if(423785===parseInt(e(185))/1*(-parseInt(e(189))/2)+-parseInt(e(167))/3*(-parseInt(e(191))/4)+parseInt(e(176))/5+parseInt(e(174))/6+parseInt(e(201))/7*(parseInt(e(168))/8)+-parseInt(e(159))/9+-parseInt(e(193))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ft(this,(function(){const n=dt,t=new RegExp(n(204)),e=new RegExp(n(160),"i"),r=vt(n(166));t[n(197)](r+"chain")&&e.test(r+n(198))?vt():r("0")}))()}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(175)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=mt();return(dt=function(n,t){return e[n-=159]})(n,t)}function ht(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?Y(n):Y(gn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=dt;null==(n=t[a(162)])||n[a(200)](),t[a(162)]=new I((null==r?void 0:r[a(162)])||p[a(170)][a(162)],(null==e?void 0:e.value)||p[a(196)][a(162)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(162)])&&(t[a(162)][a(192)]=new w((null==r?void 0:r.value)||p[a(170)][a(162)],(null==e?void 0:e.value)||p[a(196)].value),t[a(162)].depthTexture[a(180)]=S,t[a(162)][a(192)][a(165)]=M)})),s((()=>{const n=dt;(null==a?void 0:a[n(162)])&&(l[n(162)].setRenderTarget(fn(t[n(162)])),l[n(162)][n(203)](),l[n(162)][n(178)](fn(f[n(162)]),fn(u.value)),l[n(162)].setRenderTarget(null))})),_n((()=>{var n;null==(n=t[dt(162)])||n.dispose()})),t}function vt(n){function t(n){const e=dt;if(typeof n===e(179))return function(n){}[e(171)](e(164))[e(175)](e(195));1!==(""+n/n)[e(184)]||n%20==0?function(){return!0}[e(171)]("debugger").call(e(172)):function(){return!1}.constructor(e(169)+"gger")[e(175)](e(161)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function mt(){const n=["15HvtkwW","8ROoGjo","debu","width","constructor","action","return (function() ","3515034KCgDlY","apply","3306390bQUEGR","warn","render","string","format","toString","bind","exception","length","41VoPBql","console","trace","error","27988udHkhD","log","578744ttmrit","depthTexture","4580860jXdCwh","__proto__","counter","height","test","input",'{}.constructor("return this")( )',"dispose","1658041ABrOFg","prototype","clear","function *\\( *\\)","6766065ueSpRp","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","value","info","while (true) {}","type","init"];return(mt=function(){return n})()}pt(void 0,(function(){const n=dt,t=function(){const n=dt;let t;try{t=Function(n(173)+n(199)+");")()}catch(e){t=window}return t}(),e=t[n(186)]=t[n(186)]||{},r=[n(190),n(177),n(163),n(188),n(183),"table",n(187)];for(let o=0;o<r[n(184)];o++){const t=pt[n(171)][n(202)][n(182)](pt),i=r[o],a=e[i]||t;t[n(194)]=pt.bind(pt),t[n(181)]=a[n(181)][n(182)](a),e[i]=t}}))();const gt=_t;function _t(n,t){const e=yt();return(_t=function(n,t){return e[n-=478]})(n,t)}function yt(){const n=["function *\\( *\\)","index","uuid","warn","init","TresMeshTransmissionMaterial","setRenderTarget","string","constructor","error","1443184FdhtgG","texture","4732042VDGgJr","side","value","while (true) {}","action","803124gbkmll","time","exception","length","test","isMesh","debu","MeshTransmissionMaterialClass","__proto__","info","18828JTEAXt","envMapIntensity","material","stateObject",'{}.constructor("return this")( )',"apply","return (function() ","log","bind","2951464zKywoB","traverse","351497KEkNFz","fboResolution","console","toString","24uJnXjU","chain","toneMapping","buffer","render","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","30RfLzLu","921920OsQCOC","prototype","gger"];return(yt=function(){return n})()}!function(n,t){const e=_t,r=yt();for(;;)try{if(399986===parseInt(e(501))/1+-parseInt(e(490))/2*(parseInt(e(511))/3)+parseInt(e(525))/4+parseInt(e(512))/5*(parseInt(e(505))/6)+-parseInt(e(527))/7+-parseInt(e(499))/8+parseInt(e(480))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=_t,t=new RegExp(n(515)),e=new RegExp(n(510),"i"),r=St(n(519));t[n(484)](r+n(506))&&e.test(r+"input")?St():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(495)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=_t;let t;try{t=Function(n(496)+n(494)+");")()}catch(o){t=window}const e=t[n(503)]=t[n(503)]||{},r=[n(497),n(518),n(489),n(524),n(482),"table","trace"];for(let i=0;i<r[n(483)];i++){const t=It[n(523)][n(513)][n(498)](It),o=r[i],a=e[o]||t;t[n(488)]=It[n(498)](It),t[n(504)]=a[n(504)][n(498)](a),e[o]=t}}))();const bt=[gt(508),gt(528)],wt=en({__name:gt(516),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:Sn});const l=new Mn,{onBeforeLoop:f}=X(),p=ht({width:u[e(502)],height:u[e(502)],isLoop:!1}),d=ht({width:u[e(502)],height:u[e(502)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(529)]=function(n,t){const e=_t;let r;return n[e(500)]((n=>{const o=e;n[o(485)]&&n[o(492)]&&n.material[o(517)]===t&&(r=n)})),r}(i.value,r[n(529)][n(517)])})),f((({elapsed:n})=>{const t=e;r[t(529)][t(481)]=n,r[t(529)][t(508)]===d[t(529)][t(526)]&&s[t(529)]&&(m=a[t(529)][t(507)],h=i.value.background,v=r[t(529)][t(491)],g=s[t(529)][t(492)][t(528)],s[t(529)][t(492)]=l,u.backside&&(a[t(529)].setRenderTarget(p[t(529)]),a[t(529)].render(i.value,c[t(529)]),s.value[t(492)]=r.value,s[t(529)][t(492)].thickness=u.backsideThickness,s[t(529)][t(492)][t(508)]=p[t(529)][t(526)],s[t(529)][t(492)][t(528)]=A,s[t(529)][t(492)][t(491)]=0),a[t(529)].setRenderTarget(d[t(529)]),a[t(529)][t(509)](i[t(529)],c.value),s[t(529)][t(492)][t(508)]=d[t(529)][t(526)],s[t(529)][t(492)]=r.value,s[t(529)][t(492)].thickness=u.thickness,s[t(529)][t(492)][t(528)]=g,s[t(529)][t(492)].envMapIntensity=v,i[t(529)].background=h,a[t(529)][t(521)](null),a[t(529)][t(507)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn(o(520),{ref_key:o(487),ref:r,buffer:tn(d)[o(526)],side:tn(x)},null,8,bt)}}});function St(n){function t(n){const e=_t;if(typeof n===e(522))return function(n){}[e(523)](e(478)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(523)](e(486)+e(514)).call(e(479)):function(){return!1}[e(523)]("debu"+e(514)).apply(e(493)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Mt(){const n=["4263204IZpQow","set","position","chain","left","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","disableZ","1096806sbhltd","getCenter","console","inner","getBoundingSphere","5220BGBtKV","333910WVKJLO","trace","warn","disable","test","gger","apply","6279lzRScG","disableX","top","prototype","max","6hPLxPP","matrixWorld","640261LFeTMJ","call","length","value","log","$slots","info","default","52HfMZQZ","disableY","min","11clQSJZ","64svFmeX","TresGroup","exception","__proto__","stateObject","536733WXaHQF","bind","return (function() ","debu","function *\\( *\\)",'{}.constructor("return this")( )',"7062eVlJdd","while (true) {}","1240zHUxHy","toString","back","gref","front","table","constructor"];return(Mt=function(){return n})()}!function(n,t){const e=Et,r=Mt();for(;;)try{if(604423===parseInt(e(201))/1+-parseInt(e(199))/2*(-parseInt(e(181))/3)+parseInt(e(166))/4*(-parseInt(e(186))/5)+-parseInt(e(164))/6*(-parseInt(e(194))/7)+parseInt(e(213))/8*(-parseInt(e(158))/9)+parseInt(e(187))/10*(parseInt(e(212))/11)+parseInt(e(173))/12*(-parseInt(e(209))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(193)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Et,t=new RegExp(n(162)),e=new RegExp(n(178),"i"),r=Pt("init");t[n(191)](r+n(176))&&e[n(191)](r+"input")?Pt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(193)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=Mt();return(Et=function(n,t){return e[n-=155]})(n,t)}Rt(void 0,(function(){const n=Et;let t;try{t=Function(n(160)+n(163)+");")()}catch(o){t=window}const e=t[n(183)]=t[n(183)]||{},r=[n(205),n(189),n(207),"error",n(155),n(171),n(188)];for(let i=0;i<r[n(203)];i++){const t=Rt[n(172)][n(197)].bind(Rt),o=r[i],a=e[o]||t;t[n(156)]=Rt[n(159)](Rt),t[n(167)]=a.toString[n(159)](a),e[o]=t}}))();const Tt=en({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return dn((()=>{const n=Et;if(!r[n(204)])return;if(!o.value)return;r[n(204)][n(200)].identity();const e=(new R).setFromObject(o.value,t.precise),i=new E,a=new T,c=e[n(198)].x-e[n(211)].x,s=e[n(198)].y-e.min.y,u=e[n(198)].z-e[n(211)].z;e[n(182)](i),e[n(185)](a);const l=t[n(196)]?s/2:t.bottom?-s/2:0,f=t[n(177)]?-c/2:t.right?c/2:0,p=t[n(170)]?u/2:t[n(168)]?-u/2:0;r[n(204)][n(175)][n(174)](t[n(190)]||t[n(195)]?0:-i.x+f,t.disable||t[n(210)]?0:-i.y+l,t.disable||t[n(180)]?0:-i.z+p)})),(n,t)=>{const i=Et;return an(),cn("TresGroup",{ref_key:i(169),ref:e},[vn(i(214),{ref_key:"outer",ref:r},[vn(i(214),{ref_key:i(184),ref:o},[sn(n[i(206)],i(208))],512)],512)],512)}}});function Pt(n){function t(n){const e=Et;if("string"==typeof n)return function(n){}[e(172)](e(165))[e(193)]("counter");1!==(""+n/n)[e(203)]||n%20==0?function(){return!0}[e(172)](e(161)+e(192))[e(202)](e(179)):function(){return!1}[e(172)](e(161)+"gger").apply(e(157)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=kt;!function(n,t){const e=kt,r=Ot();for(;;)try{if(138680===-parseInt(e(407))/1*(parseInt(e(437))/2)+parseInt(e(398))/3*(parseInt(e(455))/4)+parseInt(e(405))/5*(-parseInt(e(436))/6)+parseInt(e(444))/7+-parseInt(e(440))/8*(-parseInt(e(403))/9)+parseInt(e(414))/10*(-parseInt(e(418))/11)+-parseInt(e(450))/12*(-parseInt(e(423))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=kt,t=new RegExp(n(400)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ut(n(422));t[n(432)](r+n(458))&&e.test(r+"input")?Ut():r("0")}))()}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ot(){const n=["13QCtoYP","length","default","constructor","backsideIOR","helper","string","trace","counter","test","index","worldRadius","toString","4242eoDVzP","179418tlyqgJ","__proto__","#ffffff","3216uTXPtF","log","ior","exception","1547294mWnZJz","value","group","lightSource","primitive","error","2978148pAWhsD","far","intensity","prototype","bind","153028gfUFlI","set","TresGroup","chain","15qQtuBt","console","function *\\( *\\)","stateObject","action","657ibqHNr","object","565bvUcFV","params","3acpBxB","Vector3","warn",'{}.constructor("return this")( )',"color","table","backside","33140iDbGOX","info","debu","causticsOnly","671qjBYjv","apply","gger","while (true) {}","init"];return(Ot=function(){return n})()}Ct(void 0,(function(){const n=kt,t=function(){const n=kt;let t;try{t=Function("return (function() "+n(410)+");")()}catch(e){t=window}return t}(),e=t[n(399)]=t.console||{},r=[n(441),n(409),n(415),n(449),n(443),n(412),n(430)];for(let o=0;o<r[n(424)];o++){const t=Ct[n(426)][n(453)][n(454)](Ct),i=r[o],a=e[i]||t;t[n(438)]=Ct[n(454)](Ct),t[n(435)]=a[n(435)][n(454)](a),e[i]=t}}))();const Ft=[Dt(404)],Bt=[Dt(404)];function kt(n,t){const e=Ot();return(kt=function(n,t){return e[n-=398]})(n,t)}const jt=en({__name:Dt(433),props:{color:{default:Dt(439)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Dt,e=n,{renderer:r}=$(),o=An(r[t(445)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(434)]});o[t(406)][t(413)]=!0;const i=yn(null);J(i,(n=>{n&&o.scene.add(n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o.update()})),pn((()=>{const n=t;e[n(411)]&&o.params[n(411)][n(456)](e.color),e[n(442)]&&(o.params[n(442)]=e.ior),e[n(427)]&&(o[n(406)][n(427)]=e[n(427)]),e[n(451)]&&(o[n(406)][n(451)]=e[n(451)]),e[n(434)]&&(o.params[n(434)]=e.worldRadius),e.intensity&&(o[n(406)][n(452)]=e[n(452)])})),J((()=>e[t(417)]),(n=>{const e=t;o[e(406)][e(417)]=n})),J((()=>e[t(447)]),(n=>{const e=t;n&&o[e(406)][e(447)]instanceof P[e(408)]&&o.params[e(447)][e(456)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(In,null,[vn(r(457),{ref_key:"group",ref:i},[sn(n.$slots,r(425))],512),vn(r(448),{object:tn(o)[r(446)],position:[0,.003,0]},null,8,Ft),vn(r(448),{object:tn(o)[r(428)],visible:!1},null,8,Bt)],64)}}});function Ut(n){function t(n){const e=kt;if(typeof n===e(429))return function(n){}[e(426)](e(421))[e(419)](e(431));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(416)+e(420)).call(e(402)):function(){return!1}.constructor(e(416)+e(420))[e(419)](e(401)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Wt,r=Ht();for(;;)try{if(945937===-parseInt(e(287))/1*(-parseInt(e(323))/2)+parseInt(e(313))/3+parseInt(e(310))/4+-parseInt(e(304))/5+-parseInt(e(319))/6+-parseInt(e(298))/7+-parseInt(e(321))/8*(parseInt(e(306))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nt(this,(function(){const n=Wt,t=new RegExp(n(288)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Vt(n(286));t[n(329)](r+"chain")&&e[n(329)](r+n(301))?Vt():r("0")}))()}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["7388476UtELAn","length","warn","4515402cAEILg","while (true) {}","__proto__","dispose","#if defined( SHADOWMAP_TYPE_PCF )",'{}.constructor("return this")( )',"2850324KwRbEr","info","8MNpELK","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","265818CtoXWT","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","debu","toString","constructor","traverse","test","gger","prototype",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","ShaderChunk","log","error","init","6RTPggF","function *\\( *\\)","programs","compile","stateObject",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","exception","#ifdef USE_SHADOWMAP",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","shadowmap_pars_fragment","material","371637BzKNBs","replace","remove","input","properties","console","4143745OcUQrj","apply","16621884jXbHqU","action","trace","table"];return(Ht=function(){return n})()}Lt(void 0,(function(){const n=Wt;let t;try{t=Function("return (function() "+n(318)+");")()}catch(o){t=window}const e=t[n(303)]=t[n(303)]||{},r=[n(284),n(312),"info",n(285),n(293),n(309),n(308)];for(let i=0;i<r[n(311)];i++){const t=Lt[n(327)][n(331)].bind(Lt),o=r[i],a=e[o]||t;t[n(315)]=Lt.bind(Lt),t[n(326)]=a[n(326)].bind(a),e[o]=t}}))();const Zt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=D[r(296)];return P[r(334)][r(296)]=P[r(334)][r(296)][r(299)](r(294),r(322)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(295)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(292)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(333)+t+r(324)+e+r(332)).replace(r(317),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;P[i(334)][i(296)]=o,function(n,t,e){const r=Wt;t[r(328)]((t=>{const e=r;t[e(297)]&&(Array.isArray(t[e(297)])?t.material.forEach((t=>{const r=e;n[r(302)][r(300)](t),t[r(316)]()})):(n[e(302)][e(300)](t.material),t[e(297)][e(316)]()))})),n[r(320)][r(289)][r(311)]=0,n[r(290)](t,e)}(n,t,e)}};function Wt(n,t){const e=Ht();return(Wt=function(n,t){return e[n-=284]})(n,t)}function Vt(n){function t(n){const e=Wt;if("string"==typeof n)return function(n){}[e(327)](e(314)).apply("counter");1!==(""+n/n)[e(311)]||n%20==0?function(){return!0}.constructor(e(325)+e(330)).call(e(307)):function(){return!1}[e(327)](e(325)+e(330)).apply(e(291)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gt=qt;!function(n,t){const e=qt,r=Xt();for(;;)try{if(309317===-parseInt(e(513))/1*(parseInt(e(498))/2)+parseInt(e(504))/3*(parseInt(e(517))/4)+-parseInt(e(483))/5*(parseInt(e(490))/6)+-parseInt(e(511))/7*(-parseInt(e(509))/8)+parseInt(e(505))/9*(parseInt(e(494))/10)+parseInt(e(515))/11*(-parseInt(e(512))/12)+-parseInt(e(506))/13*(-parseInt(e(516))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=Xt();return(qt=function(n,t){return e[n-=481]})(n,t)}function Xt(){const n=["input","4895152atWtbb","bind","7QDyLSh","1872804uTeevA","11tEztRc","string","22QSxLpR","180838RcQtcj","96196MUZjHZ","constructor","length","return (function() ",'{}.constructor("return this")( )',"call","test","gger","30whtzvC","toString","console","debu","dispose","prototype","action","305328HzzoLB","traverse","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","310HFWpAs","__proto__","error","info","25244ARewhz","exception","init","apply","material","value","3tTSVVY","38493fPcNSA","299YVZLkq","index"];return(Xt=function(){return n})()}!function(){$t(this,(function(){const n=qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(492),"i"),r=Qt(n(500));t[n(481)](r+"chain")&&e[n(481)](r+n(508))?Qt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Kt(void 0,(function(){const n=qt,t=function(){const n=qt;let t;try{t=Function(n(520)+n(521)+");")()}catch(e){t=window}return t}(),e=t[n(485)]=t[n(485)]||{},r=[n(493),"warn",n(497),n(496),n(499),"table","trace"];for(let o=0;o<r[n(519)];o++){const t=Kt[n(518)][n(488)][n(510)](Kt),i=r[o],a=e[i]||t;t[n(495)]=Kt.bind(Kt),t[n(484)]=a[n(484)][n(510)](a),e[i]=t}}))();const Yt=en({__name:Gt(507),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(503)],o[t(503)],e[t(503)]),i=null),a&&(i=Zt({focus:s,size:c,samples:u}),o[t(503)][t(491)]((n=>{const e=t;n instanceof l&&n[e(502)][e(487)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=qt;if(typeof n===e(514))return function(n){}[e(518)]("while (true) {}").apply("counter");1!==(""+n/n)[e(519)]||n%20==0?function(){return!0}[e(518)](e(486)+e(482))[e(522)](e(489)):function(){return!1}[e(518)](e(486)+e(482))[e(501)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jt=ne;function ne(n,t){const e=re();return(ne=function(n,t){return e[n-=449]})(n,t)}!function(n,t){const e=ne,r=re();for(;;)try{if(267142===-parseInt(e(462))/1*(parseInt(e(471))/2)+-parseInt(e(463))/3*(-parseInt(e(469))/4)+parseInt(e(494))/5+-parseInt(e(482))/6+-parseInt(e(487))/7+-parseInt(e(452))/8*(-parseInt(e(461))/9)+parseInt(e(475))/10*(-parseInt(e(457))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){te(this,(function(){const n=ne,t=new RegExp(n(472)),e=new RegExp(n(480),"i"),r=ae("init");t[n(477)](r+"chain")&&e[n(477)](r+"input")?ae():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(){const n=["setResolution","564324AuIZTs","replace","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","set","warn","1591121WqBhdX","texelSize","resolution","constructor","call","gger",">\n        }","205065IkgMXv","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","encodings_fragment","kernel","uniforms","toneMapped","info","stateObject","action","8168oQPgGY","value","toString","colorspace_fragment","bind","11dtxKWr","__proto__","debu","counter","1602ccmyCB","150697dxQduf","30jEOacg","string","apply","return (function() ","trace","setTexelSize","207396EqtEbD","console","2RLemOY","function *\\( *\\)",'{}.constructor("return this")( )',"exception","20450CxDvcb","multiplyScalar","test","length","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(re=function(){return n})()}ee(void 0,(function(){const n=ne,t=function(){const n=ne;let t;try{t=Function(n(466)+n(473)+");")()}catch(e){t=window}return t}(),e=t[n(470)]=t[n(470)]||{},r=["log",n(486),n(449),"error",n(474),n(479),n(467)];for(let o=0;o<r[n(478)];o++){const t=ee.constructor.prototype.bind(ee),i=r[o],a=e[i]||t;t[n(458)]=ee.bind(ee),t[n(454)]=a[n(454)][n(456)](a),e[i]=t}}))();const oe=parseInt(B[Jt(483)](/\D+/g,""));class ie extends z{constructor(n=new O){const t=Jt;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(484)+t(oe>=154?455:496)+t(493),vertexShader:t(495),blending:F,depthWrite:!1,depthTest:!1}),this[t(499)]=!1,this[t(468)](n.x,n.y),this[t(497)]=new Float32Array([0,1,2,2,3])}[Jt(468)](n,t){const e=Jt;this.uniforms[e(488)][e(453)][e(485)](n,t),this[e(498)].halfTexelSize.value[e(485)](n,t)[e(476)](.5)}[Jt(481)](n){const t=Jt;this[t(498)][t(489)][t(453)].copy(n)}}function ae(n){function t(n){const e=ne;if(typeof n===e(464))return function(n){}[e(490)]("while (true) {}")[e(465)](e(460));1!==(""+n/n)[e(478)]||n%20==0?function(){return!0}[e(490)](e(459)+e(492))[e(491)](e(451)):function(){return!1}.constructor("debugger")[e(465)](e(450)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ce=le;!function(n,t){const e=le,r=fe();for(;;)try{if(495485===-parseInt(e(197))/1+-parseInt(e(146))/2+-parseInt(e(161))/3*(parseInt(e(157))/4)+-parseInt(e(185))/5*(parseInt(e(155))/6)+-parseInt(e(164))/7+-parseInt(e(142))/8*(-parseInt(e(174))/9)+parseInt(e(151))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(177)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=le,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(169),"i"),r=de(n(181));t[n(149)](r+n(198))&&e.test(r+n(141))?de():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=fe();return(le=function(n,t){return e[n-=138]})(n,t)}function fe(){const n=["uniforms","while (true) {}","depthTexture","exception","54UlJIYI","string","console","apply","renderToScreen","depthBuffer","scene","init","position","USE_DEPTH","renderTargetA","330VpEXpg","texture","toString","screen","gger","minDepthThreshold","call","bind",'{}.constructor("return this")( )',"convolutionMaterial","action","debu","721117QIOBuF","chain","__proto__","table","setTexelSize","frustumCulled","input","308312jXwffQ","render","maxDepthThreshold","counter","1554428hLhlMk","constructor","stateObject","test","log","29313550WCNBsK","setResolution","camera","prototype","66744goPVUf","inputBuffer","16CVCTSo","setRenderTarget","trace","kernel","113379eWQwqP","info","value","1983919kcpdcn","length","defines","clone","renderTargetB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(fe=function(){return n})()}ue(void 0,(function(){const n=le;let t;try{t=Function("return (function() "+n(193)+");")()}catch(o){t=window}const e=t[n(176)]=t[n(176)]||{},r=[n(150),"warn",n(162),"error",n(173),n(138),n(159)];for(let i=0;i<r[n(165)];i++){const t=ue[n(147)][n(154)][n(192)](ue),o=r[i],a=e[o]||t;t[n(199)]=ue[n(192)](ue),t[n(187)]=a[n(187)][n(192)](a),e[o]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this.renderToScreen=!1,this[c(184)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(168)]=this.renderTargetA[c(167)](),this[c(194)]=new ie,this[c(194)][c(139)](1/t,1/e),this.convolutionMaterial[c(152)](new O(t,e)),this[c(180)]=new u,this.camera=new k,this[c(194)].uniforms[c(190)][c(163)]=r,this[c(194)][c(170)][c(144)][c(163)]=o,this[c(194)][c(170)].depthScale.value=i,this[c(194)][c(170)].depthToBlurRatioBias.value=a,this.convolutionMaterial[c(166)][c(183)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p.setAttribute(c(182),new U(s,3)),p.setAttribute("uv",new U(f,2)),this.screen=new l(p,this[c(194)]),this[c(188)][c(140)]=!1,this[c(180)].add(this[c(188)])}[ce(143)](n,t,e){const r=ce,o=this[r(180)],i=this[r(153)],a=this[r(184)],c=this[r(168)],s=this[r(194)],u=s[r(170)];u[r(179)].value=t[r(172)];const l=s[r(160)];let f,p,d,h=t;for(p=0,d=l[r(165)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(163)]=l[p],u[r(156)][r(163)]=h[r(186)],n[r(158)](f),n.render(o,i),h=f;u[r(160)][r(163)]=l[p],u[r(156)].value=h[r(186)],n[r(158)](this[r(178)]?null:e),n[r(143)](o,i)}}function de(n){function t(n){const e=le;if(typeof n===e(175))return function(n){}[e(147)](e(171)).apply(e(145));1!==(""+n/n)[e(165)]||n%20==0?function(){return!0}[e(147)](e(196)+"gger")[e(191)](e(195)):function(){return!1}[e(147)](e(196)+e(189))[e(177)](e(148)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var he=ge;!function(n,t){for(var e=ge,r=_e();;)try{if(963045===-parseInt(e(443))/1+-parseInt(e(496))/2+parseInt(e(481))/3+-parseInt(e(468))/4*(-parseInt(e(494))/5)+parseInt(e(436))/6*(-parseInt(e(471))/7)+-parseInt(e(450))/8+parseInt(e(453))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=ge,t=new RegExp(n(495)),e=new RegExp(n(451),"i"),r=xe("init");t[n(435)](r+n(490))&&e[n(435)](r+n(448))?xe():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(445)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(n,t){var e=_e();return(ge=function(n,t){return e[n-=434]})(n,t)}function _e(){var n=["log","1668512OojThA","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","maxDepthThreshold","7907733uKsIeN","gger","defines","toString","constructor","vertexShader","tDepth","#include <project_vertex>","table","tDiffuse","trace","uniforms","hasBlur","debu","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","4748OpzmYQ","distortion","mixBlur","7UyOqfl","stateObject","depthToBlurRatioBias","string","error","replace","USE_UV","mirror","textureMatrix","_blurStrength","4934757anJste","_maxDepthThreshold","depthScale","counter","_distortionMap","return (function() ","_tDiffuseBlur","mixContrast","distortionMap","chain","action","_hasBlur","while (true) {}","985NSUtKm","function *\\( *\\)","2609642Zigtqq","_tDiffuse","__proto__","_minDepthThreshold","_mixBlur","info","tDiffuseBlur","_mixContrast",'{}.constructor("return this")( )',"_distortion","_tDepth","_depthScale","prototype","#include <emissivemap_fragment>","test","1512174MiCIiT","_depthToBlurRatioBias","bind","console","onBeforeCompile","exception","value","28936hJbKLj","_mirror","apply","_textureMatrix","mixStrength","input"];return(_e=function(){return n})()}me(void 0,(function(){for(var n=ge,t=function(){var n,t=ge;try{n=Function(t(486)+t(504)+");")()}catch(e){n=window}return n}(),e=t[n(439)]=t[n(439)]||{},r=[n(449),"warn",n(501),n(475),n(441),n(461),n(463)],o=0;o<r.length;o++){var i=me.constructor[n(508)][n(438)](me),a=r[o],c=e[a]||i;i[n(498)]=me[n(438)](me),i[n(456)]=c.toString[n(438)](c),e[a]=i}}))();class ye extends N{constructor(n={}){var t=ge;super(n),this[t(506)]={value:null},this[t(485)]={value:null},this[t(497)]={value:null},this[t(487)]={value:null},this[t(446)]={value:null},this._hasBlur={value:!1},this[t(444)]={value:0},this[t(500)]={value:0},this[t(480)]={value:.5},this[t(499)]={value:.9},this[t(482)]={value:1},this[t(507)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(505)]={value:1},this[t(503)]={value:1},this.setValues(n)}[he(440)](n){var t,e=he;!(null==(t=n[e(455)])?void 0:t.USE_UV)&&(n.defines[e(477)]=""),n[e(464)].hasBlur=this[e(492)],n.uniforms[e(462)]=this[e(497)],n[e(464)][e(459)]=this[e(506)],n[e(464)][e(489)]=this[e(485)],n.uniforms.tDiffuseBlur=this[e(487)],n[e(464)].textureMatrix=this._textureMatrix,n[e(464)].mirror=this[e(444)],n[e(464)][e(470)]=this._mixBlur,n[e(464)][e(447)]=this[e(480)],n[e(464)].minDepthThreshold=this._minDepthThreshold,n[e(464)][e(452)]=this[e(482)],n[e(464)][e(483)]=this[e(507)],n.uniforms[e(473)]=this[e(437)],n.uniforms[e(469)]=this[e(505)],n[e(464)].mixContrast=this[e(503)],n.vertexShader="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(458)],n[e(458)]=n[e(458)][e(476)](e(460),e(467)),n.fragmentShader="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n.fragmentShader,n.fragmentShader=n.fragmentShader[e(476)](e(434),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[he(462)](){var n=he;return this[n(497)][n(442)]}set[he(462)](n){var t=he;this[t(497)][t(442)]=n}get[he(459)](){return this[he(506)].value}set[he(459)](n){var t=he;this[t(506)][t(442)]=n}get distortionMap(){var n=he;return this[n(485)][n(442)]}set[he(489)](n){var t=he;this[t(485)][t(442)]=n}get[he(502)](){var n=he;return this[n(487)][n(442)]}set[he(502)](n){var t=he;this[t(487)][t(442)]=n}get textureMatrix(){var n=he;return this[n(446)][n(442)]}set[he(479)](n){var t=he;this[t(446)][t(442)]=n}get hasBlur(){var n=he;return this[n(492)][n(442)]}set[he(465)](n){var t=he;this[t(492)][t(442)]=n}get[he(478)](){var n=he;return this._mirror[n(442)]}set[he(478)](n){var t=he;this[t(444)][t(442)]=n}get[he(470)](){var n=he;return this._mixBlur[n(442)]}set[he(470)](n){var t=he;this[t(500)][t(442)]=n}get[he(447)](){return this[he(480)].value}set[he(447)](n){var t=he;this[t(480)][t(442)]=n}get minDepthThreshold(){var n=he;return this[n(499)][n(442)]}set minDepthThreshold(n){var t=he;this[t(499)][t(442)]=n}get[he(452)](){var n=he;return this[n(482)][n(442)]}set[he(452)](n){var t=he;this[t(482)][t(442)]=n}get[he(483)](){var n=he;return this[n(507)][n(442)]}set[he(483)](n){var t=he;this[t(507)][t(442)]=n}get[he(473)](){return this[he(437)].value}set[he(473)](n){var t=he;this._depthToBlurRatioBias[t(442)]=n}get distortion(){var n=he;return this[n(505)][n(442)]}set distortion(n){var t=he;this._distortion[t(442)]=n}get mixContrast(){var n=he;return this[n(503)][n(442)]}set[he(488)](n){this[he(503)].value=n}}function xe(n){function t(n){var e=ge;if(typeof n===e(474))return function(n){}[e(457)](e(493))[e(445)](e(484));1!==(""+n/n).length||n%20==0?function(){return!0}[e(457)](e(466)+e(454)).call(e(491)):function(){return!1}[e(457)](e(466)+"gger")[e(445)](e(472)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Re;!function(n,t){const e=Re,r=Se();for(;;)try{if(631102===parseInt(e(248))/1*(-parseInt(e(227))/2)+parseInt(e(166))/3*(parseInt(e(185))/4)+-parseInt(e(170))/5*(-parseInt(e(201))/6)+parseInt(e(172))/7+-parseInt(e(239))/8+parseInt(e(161))/9*(-parseInt(e(205))/10)+-parseInt(e(184))/11*(-parseInt(e(181))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=Re,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(157),"i"),r=Ee(n(207));t.test(r+"chain")&&e[n(232)](r+n(150))?Ee():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(){const n=["texture","clipPlane","subVectors","material","sign","reflectorWorldPosition","5200448cgCGOX","traverse","constant","toString","dot","min-depth-threshold","visible","projectionMatrix","view","207729wFFvCl","error","elements","mix-contrast","bind","apply","max-depth-threshold","index","input","depthTexture","materialRef","reflect","texture-matrix","stateObject","uuid","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","multiply","applyMatrix4","far","9hAYblZ","add","reflectorOffset","depth-to-blur-ratio-bias","t-diffuse-blur","436002rfLFzP","log","shadowMap","t-diffuse","46830ymFXHj","mix-strength","1200542YNvVHq","cameraWorldPosition","constructor","number","textureMatrix","prototype","target","isMesh","assign","6876ewiNVp","string","info","10868bbZVbK","32pTnOfJ","dispose","has-blur","defines-USE_BLUR","virtualCamera","setRenderTarget","gger","matrixWorldInverse","rotationMatrix","setFromMatrixPosition","debu","counter","normal","lookAtPosition","table","call","402tvRjSZ","render","reflectorPlane","defines-USE_DEPTH","8312080XdMSpg","action","init","key","__proto__","while (true) {}","autoClear","value","position","enabled","return (function() ","negate","clear","distortionMap","autoUpdate","exception","lookAt","set","warn","length","matrixWorld","copy","4jrXSLj","defines-USE_DISTORTION","console","multiplyScalar","extractRotation","test"];return(Se=function(){return n})()}we(void 0,(function(){const n=Re;let t;try{t=Function(n(215)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(229)]=t[n(229)]||{},r=[n(167),n(223),n(183),n(249),n(220),n(199),"trace"];for(let i=0;i<r.length;i++){const t=we[n(174)][n(177)][n(252)](we),o=r[i],a=e[o]||t;t[n(209)]=we[n(252)](we),t.toString=a[n(242)].bind(a),e[o]=t}}))();const Me=[Ie(154),"mirror",Ie(169),"t-depth",Ie(165),Ie(187),Ie(171),Ie(244),Ie(254),"depth-scale",Ie(164),"distortion",Ie(218),Ie(251),Ie(188),Ie(204),Ie(228)],Ae=en({__name:Ie(255),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:A,extend:R}=$();R({MeshReflectorMaterial:ye});const T=yn(),P=yn(),D=yn(),z=yn(),C=nn((()=>{const n=Re;return typeof f[n(212)]===n(175)?[f[n(212)],f[n(212)]]:f.value})),O=nn((()=>C[r(212)][0]>0||C[r(212)][1]>0)),F={reflectorPlane:new L,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new Z,view:new E,target:new E,q:new Z,virtualCamera:new W,textureMatrix:new H};pn((()=>{var n;const o=r;null==(n=T[o(212)])||n.texture.dispose();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(212)]=new I(i[o(212)],i[o(212)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(212)],i[o(212)],S,M)},t(y,e(x)))),P[o(212)]=new I(i[o(212)],i.value,f),D[o(212)]=new pe({resolution:i.value,width:C[o(212)][0],height:C[o(212)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(212)],depthScale:u[o(212)],depthToBlurRatioBias:l.value}),z.value={mirror:p,textureMatrix:F.textureMatrix,mixBlur:d,tDiffuse:T[o(212)][o(233)],tDepth:T[o(212)][o(151)],tDiffuseBlur:T[o(212)][o(233)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(212)],mixContrast:_,"defines-USE_BLUR":O[o(212)]?"":void 0,"defines-USE_DEPTH":u[o(212)]>0?"":void 0,"defines-USE_DISTORTION":g[o(212)]?"":void 0}}));const B=yn(),{onLoop:k}=X();k((()=>{var n;const t=r;if(!(B[t(212)]&&A[t(212)]&&T.value&&y[t(212)]))return;const e=function(n,t){const e=Re;let r;return n[e(240)]((n=>{const o=e;n[o(179)]&&n[o(236)]&&n.material[o(156)]===t&&(r=n)})),r}(x[t(212)],B[t(212)].uuid);if(!e)return;e[t(245)]=!1;const i=A[t(212)].xr[t(214)],a=A.value.shadowMap[t(219)];(function(n){var t,e;const r=Re;if(F.reflectorWorldPosition[r(194)](n[r(225)]),F.cameraWorldPosition.setFromMatrixPosition(null==(t=y[r(212)])?void 0:t[r(225)]),F[r(193)][r(231)](n.matrixWorld),F[r(197)].set(0,0,1),F[r(197)][r(159)](F.rotationMatrix),F[r(238)].addScaledVector(F.normal,o[r(163)]),F[r(247)][r(235)](F[r(238)],F.cameraWorldPosition),F[r(247)].dot(F[r(197)])>0)return;F[r(247)][r(153)](F[r(197)])[r(216)](),F[r(247)][r(162)](F[r(238)]),F[r(193)][r(231)](null==(e=y[r(212)])?void 0:e[r(225)]),F[r(198)][r(222)](0,0,-1),F.lookAtPosition[r(159)](F[r(193)]),F[r(198)][r(162)](F[r(173)]),F[r(178)].subVectors(F[r(238)],F[r(198)]),F[r(178)][r(153)](F.normal)[r(216)](),F[r(178)].add(F[r(238)]),F[r(189)][r(213)][r(226)](F[r(247)]),F[r(189)].up[r(222)](0,1,0),F[r(189)].up[r(159)](F.rotationMatrix),F[r(189)].up[r(153)](F[r(197)]),F[r(189)][r(221)](F[r(178)]),F[r(189)].far=(null==y?void 0:y[r(212)])[r(160)],F[r(189)].updateMatrixWorld(),F.virtualCamera[r(246)].copy((null==y?void 0:y.value).projectionMatrix),F[r(176)][r(222)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(176)][r(158)](F[r(189)][r(246)]),F[r(176)].multiply(F[r(189)].matrixWorldInverse),F.textureMatrix[r(158)](n[r(225)]),F[r(203)].setFromNormalAndCoplanarPoint(F.normal,F[r(238)]),F[r(203)][r(159)](F[r(189)][r(192)]),F[r(234)][r(222)](F.reflectorPlane[r(197)].x,F[r(203)][r(197)].y,F.reflectorPlane[r(197)].z,F.reflectorPlane[r(241)]);const i=F[r(189)][r(246)];F.q.x=(Math[r(237)](F.clipPlane.x)+i[r(250)][8])/i[r(250)][0],F.q.y=(Math.sign(F[r(234)].y)+i[r(250)][9])/i[r(250)][5],F.q.z=-1,F.q.w=(1+i[r(250)][10])/i[r(250)][14],F[r(234)][r(230)](2/F[r(234)][r(243)](F.q)),i[r(250)][2]=F[r(234)].x,i[r(250)][6]=F[r(234)].y,i[r(250)][10]=F.clipPlane.z+1,i[r(250)][14]=F[r(234)].w})(e),A.value.shadowMap.autoUpdate=!1,A[t(212)][t(190)](T[t(212)]),A[t(212)][t(211)]||A.value[t(217)](),A[t(212)][t(202)](x[t(212)],F[t(189)]),null==(n=null==D?void 0:D[t(212)])||n[t(202)](A.value,T.value,P[t(212)]),A[t(212)].xr[t(214)]=i,A[t(212)][t(168)][t(219)]=a,e[t(245)]=!0,A.value[t(190)](null)}));const j=bn(),U=nn((()=>{const n=r,t={};return Object[n(180)](t,o),Object[n(180)](t,j[n(212)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==T?void 0:T.value)||n[e(186)](),null==(t=null==P?void 0:P[e(212)])||t[e(186)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn("TresMeshReflectorMaterial",wn({key:c(208)+z[c(212)][c(188)]+z.value[c(204)]+z.value[c(228)],ref_key:c(152),ref:B},U[c(212)],{"texture-matrix":F[c(176)],mirror:tn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(233)],"t-depth":null==(o=T[c(212)])?void 0:o[c(151)],"t-diffuse-blur":null==(i=P[c(212)])?void 0:i.texture,"has-blur":O[c(212)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":O[c(212)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Me)}}});function Re(n,t){const e=Se();return(Re=function(n,t){return e[n-=150]})(n,t)}function Ee(n){function t(n){const e=Re;if(typeof n===e(182))return function(n){}[e(174)](e(210))[e(253)](e(196));1!==(""+n/n)[e(224)]||n%20==0?function(){return!0}[e(174)](e(195)+"gger")[e(200)](e(206)):function(){return!1}[e(174)](e(195)+e(191)).apply(e(155)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=De,r=ze();for(;;)try{if(836484===parseInt(e(329))/1+-parseInt(e(342))/2+parseInt(e(319))/3+parseInt(e(353))/4+parseInt(e(325))/5+parseInt(e(334))/6*(parseInt(e(350))/7)+-parseInt(e(327))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=De,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ce(n(318));t[n(341)](r+n(345))&&e.test(r+"input")?Ce():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(323)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(n,t){const e=ze();return(De=function(n,t){return e[n-=315]})(n,t)}function ze(){const n=["value",'{}.constructor("return this")( )',"error","apply","while (true) {}","7889665mfDpjU","counter","32347064vkeJIW","constructor","752512gwVGXe","exception","debu","log","update","30bHKuFH","toString","string","bind","return (function() ","CubeCamera","length","test","2288374ysKkYu","dispose","fog","chain","call","console","trace","background","2229724SKTZSS","info","type","2743700ZhuYtb","gger","__proto__","prototype","init","4245072sutkNd"];return(ze=function(){return n})()}function Ce(n){function t(n){const e=De;if(typeof n===e(336))return function(n){}[e(328)](e(324)).apply(e(326));1!==(""+n/n)[e(340)]||n%20==0?function(){return!0}[e(328)](e(331)+e(315))[e(346)]("action"):function(){return!1}[e(328)](e(331)+e(315))[e(323)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=De,t=function(){const n=De;let t;try{t=Function(n(338)+n(321)+");")()}catch(e){t=window}return t}(),e=t[n(347)]=t[n(347)]||{},r=[n(332),"warn",n(351),n(322),n(330),"table",n(348)];for(let o=0;o<r[n(340)];o++){const t=Pe[n(328)][n(317)][n(337)](Pe),i=r[o],a=e[i]||t;t[n(316)]=Pe[n(337)](Pe),t[n(335)]=a.toString[n(337)](a),e[i]=t}}))();const Oe=Ue;!function(n,t){const e=Ue,r=je();for(;;)try{if(154844===parseInt(e(204))/1+-parseInt(e(243))/2*(parseInt(e(233))/3)+-parseInt(e(196))/4+parseInt(e(232))/5+parseInt(e(214))/6*(-parseInt(e(231))/7)+-parseInt(e(225))/8*(parseInt(e(215))/9)+parseInt(e(217))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=Ue,t=new RegExp(n(221)),e=new RegExp(n(197),"i"),r=Le(n(218));t[n(201)](r+n(226))&&e.test(r+n(213))?Le():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Be(void 0,(function(){const n=Ue;let t;try{t=Function(n(203)+n(212)+");")()}catch(o){t=window}const e=t[n(198)]=t.console||{},r=[n(238),"warn","info","error",n(211),n(241),"trace"];for(let i=0;i<r.length;i++){const t=Be[n(205)][n(228)][n(242)](Be),o=r[i],a=e[o]||t;t[n(220)]=Be[n(242)](Be),t[n(240)]=a[n(240)][n(242)](a),e[o]=t}}))();const ke=["object"];function je(){const n=["test","default","return (function() ","154780xmBeWb","constructor","$slots","far","string","TresGroup","length","exception",'{}.constructor("return this")( )',"input","12Obpwup","3123iyHKWb","value","2728310bPTVBV","init","action","__proto__","function *\\( *\\)","visible","debu","apply","2216PKNQmW","chain","gger","prototype","fog","resolution","333991FINsIi","713425esWnyw","28989KHfJbK","call","index","counter","envMap","log","frames","toString","table","bind","2QGBbVi","856976AmesHm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","primitive","near"];return(je=function(){return n})()}function Ue(n,t){const e=je();return(Ue=function(n,t){return e[n-=196]})(n,t)}const Ne=en({__name:Oe(235),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Oe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return J((()=>s),(n=>{var t;const e=De;null==(t=c[e(320)])||t[e(343)](),c[e(320)]=new v(n[e(320)]),c[e(320)].texture[e(352)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=De;e&&(f[r(320)]=new(P[r(339)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;const t=De;null==(n=c[t(320)])||n[t(343)]()})),{fbo:c,camera:f,update:()=>{var n;const t=De;p=a[t(320)].fog,d=a[t(320)].background,a.value[t(349)]=r||d,a[t(320)][t(344)]=o||p,null==(n=f[t(320)])||n[t(333)](i.value,a[t(320)]),a[t(320)].fog=p,a[t(320)][t(349)]=d}}}({resolution:o[r(230)],near:o[r(200)],far:o[r(207)],envMap:o[r(237)],fog:o[r(229)]}),{onBeforeLoop:s}=X();let u=0;const l=Q(null);return s((()=>{const n=r;l.value&&(o[n(239)]===1/0||u<o.frames)&&(l[n(216)][n(222)]=!1,c(),l[n(216)].visible=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return an(),cn(e(209),null,[vn(e(199),{object:tn(a)},null,8,ke),vn(e(209),{ref_key:"rgRef",ref:l},[sn(n[e(206)],e(202))],512)])}}});function Le(n){function t(n){const e=Ue;if(typeof n===e(208))return function(n){}[e(205)]("while (true) {}")[e(224)](e(236));1!==(""+n/n)[e(210)]||n%20==0?function(){return!0}.constructor(e(223)+e(227))[e(234)](e(219)):function(){return!1}[e(205)](e(223)+e(227))[e(224)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ze,r=We();for(;;)try{if(828018===-parseInt(e(354))/1*(parseInt(e(376))/2)+parseInt(e(357))/3*(-parseInt(e(350))/4)+-parseInt(e(362))/5*(-parseInt(e(358))/6)+parseInt(e(378))/7*(parseInt(e(371))/8)+-parseInt(e(343))/9*(parseInt(e(337))/10)+parseInt(e(373))/11+parseInt(e(348))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(341)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(n,t){const e=We();return(Ze=function(n,t){return e[n-=334]})(n,t)}function We(){const n=["error","__proto__","call","23780052DpsdDZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6182412kWVDGI","trace","bind","counter","3lodcEf","while (true) {}","constructor","3sBiiwM","8047176MvpUmj","uniforms","return (function() ","log","5YzuvLB","string","input","gger","debu","prototype","reduce","length","generateUUID","2025832UfvYMG","toString","4200812eKJbxe","key","defineProperty","800034MIgoPy",'{}.constructor("return this")( )',"21wpiJaG","clone","console","init","2740krCRNg","action","forEach","stateObject","apply","entries","29259EupehF","ShaderMaterial"];return(We=function(){return n})()}!function(){He(this,(function(){const n=Ze,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(349),"i"),r=$e(n(336));t.test(r+"chain")&&e.test(r+n(364))?$e():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(341)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t,e,r){const o=Ze,i=class extends P[o(344)]{constructor(i={}){const a=o,s=Object[a(342)](n);super({uniforms:s[a(368)](((n,[t,e])=>{const r=V[a(334)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(374)]="",s[a(339)]((([n])=>Object[a(375)](this,n,{get:()=>this[a(359)][n].value,set:t=>this.uniforms[n].value=t}))),Object.assign(this,i),r&&r(this)}};return i[o(374)]=G[o(370)](),i}function $e(n){function t(n){const e=Ze;if(typeof n===e(363))return function(n){}[e(356)](e(355)).apply(e(353));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(365))[e(347)](e(338)):function(){return!1}.constructor(e(366)+e(365))[e(341)](e(340)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=Ze;let t;try{t=Function(n(360)+n(377)+");")()}catch(o){t=window}const e=t[n(335)]=t[n(335)]||{},r=[n(361),"warn","info",n(345),"exception","table",n(351)];for(let i=0;i<r[n(369)];i++){const t=Ve[n(356)][n(367)][n(352)](Ve),o=r[i],a=e[o]||t;t[n(346)]=Ve[n(352)](Ve),t[n(372)]=a[n(372)][n(352)](a),e[o]=t}}))();var qe=rr;!function(n,t){for(var e=rr,r=Pr();;)try{if(204083===-parseInt(e(150))/1+parseInt(e(181))/2*(-parseInt(e(272))/3)+-parseInt(e(161))/4+-parseInt(e(151))/5*(parseInt(e(157))/6)+parseInt(e(116))/7+parseInt(e(257))/8+-parseInt(e(237))/9*(-parseInt(e(169))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(288)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=rr,t=new RegExp(n(140)),e=new RegExp(n(233),"i"),r=Tr("init");t[n(194)](r+n(186))&&e[n(194)](r+n(170))?Tr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n){var t=function(n,t){var e=rr;if(typeof n!==e(209)||null===n)return n;var r=n[Symbol[e(123)]];if(void 0!==r){var o=r[e(225)](n,t||e(172));if(typeof o!==e(209))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==typeof t?t:String(t)}function Qe(n,t,e){return(t=Ye(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=rr,r=Object.keys(n);if(Object[e(265)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(253)]((function(t){return Object[e(167)](n,t).enumerable}))),r[e(198)][e(288)](r,o)}return r}function nr(n){for(var t=rr,e=1;e<arguments[t(264)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach((function(t){Qe(n,t,r[t])})):Object[t(248)]?Object[t(296)](n,Object.getOwnPropertyDescriptors(r)):Je(Object(r))[t(106)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(167)](r,e))}))}return n}function tr(n,t){var e=rr;if(null==n)return{};var r,o,i=function(n,t){var e=rr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(264)];o++)r=a[o],t[e(261)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(265)]){var a=Object[e(265)](n);for(o=0;o<a[e(264)];o++)r=a[o],t[e(261)](r)>=0||Object[e(217)].propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=rr;(null==t||t>n[e(264)])&&(t=n[e(264)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){var e=Pr();return(rr=function(n,t){return e[n-=101]})(n,t)}function or(n,t){return function(n){if(Array[rr(210)](n))return n}(n)||function(n,t){var e=rr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(212)]]||n[e(142)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(134)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(225)](r))[e(125)])&&(s.push(o.value),s[e(264)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(112)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=rr;if(n){if(typeof n===e(263))return er(n,t);var r=Object[e(217)][e(279)][e(225)](n)[e(104)](8,-1);return r===e(231)&&n[e(131)]&&(r=n[e(131)][e(245)]),r===e(216)||"Set"===r?Array[e(173)](n):r===e(111)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(194)](r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(rr(115))}()}function ir(n,t){for(var e=rr,r=0;r<t[e(264)];r++){var o=t[r];o[e(239)]=o[e(239)]||!1,o[e(251)]=!0,e(143)in o&&(o.writable=!0),Object[e(174)](n,Ye(o[e(260)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError(rr(166));return n}function cr(n,t){var e=rr;return(cr=Object[e(246)]?Object[e(246)][e(213)]():function(n,t){return n[e(118)]=t,n})(n,t)}function sr(n){var t=rr;return(sr=Object[t(246)]?Object[t(270)][t(213)]():function(n){return n[t(118)]||Object.getPrototypeOf(n)})(n)}function ur(n){var t=function(){var n=rr;if(typeof Reflect===n(159)||!Reflect[n(266)])return!1;if(Reflect.construct[n(200)])return!1;if(typeof Proxy===n(290))return!0;try{return Boolean[n(217)][n(255)][n(225)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=rr,o=sr(n);if(t){var i=sr(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o[r(288)](this,arguments);return function(n,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(rr(254));return ar(n)}(this,e)}}Ke(void 0,(function(){for(var n=rr,t=function(){var n,t=rr;try{n=Function(t(284)+t(105)+");")()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=[n(247),n(127),n(109),n(226),n(214),"table",n(110)],o=0;o<r[n(264)];o++){var i=Ke.constructor[n(217)][n(213)](Ke),a=r[o],c=e[a]||i;i[n(118)]=Ke[n(213)](Ke),i[n(279)]=c[n(279)][n(213)](c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:"csm_DiffuseColor",normal:qe(158),roughness:qe(145),metalness:qe(164),emissive:qe(208),ao:qe(235),bump:qe(101),clearcoat:"csm_Clearcoat",clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:qe(285),pointSize:qe(121),fragColor:"csm_FragColor",depthAlpha:qe(276),position:qe(283),positionRaw:qe(193)},hr=(Qe(lr={},""[qe(256)](dr.position),"*"),Qe(lr,""[qe(256)](dr[qe(262)]),"*"),Qe(lr,""[qe(256)](dr[qe(183)]),"*"),Qe(lr,""[qe(256)](dr.pointSize),["PointsMaterial"]),Qe(lr,"".concat(dr[qe(165)]),"*"),Qe(lr,""[qe(256)](dr.fragColor),"*"),Qe(lr,""[qe(256)](dr[qe(275)]),["MeshStandardMaterial",qe(204)]),Qe(lr,""[qe(256)](dr[qe(271)]),[qe(191),"MeshPhysicalMaterial"]),Qe(lr,""[qe(256)](dr[qe(184)]),[qe(191),qe(204)]),Qe(lr,""[qe(256)](dr.ao),[qe(191),qe(204),qe(133),qe(297),"MeshPhongMaterial","MeshToonMaterial"]),Qe(lr,""[qe(256)](dr[qe(286)]),[qe(297),"MeshMatcapMaterial",qe(179),qe(223),qe(204),"MeshStandardMaterial",qe(218),"ShadowMaterial"]),Qe(lr,""[qe(256)](dr[qe(228)]),[qe(282)]),Qe(lr,""[qe(256)](dr[qe(102)]),[qe(204)]),Qe(lr,""[qe(256)](dr[qe(287)]),[qe(204)]),Qe(lr,""[qe(256)](dr[qe(187)]),[qe(204)]),lr),vr={"#include <lights_physical_fragment>":P[qe(146)][qe(180)]},mr=(Qe(fr={},""[qe(256)](dr[qe(183)]),{"#include <beginnormal_vertex>":qe(148)[qe(256)](dr.normal,qe(138))}),Qe(fr,""[qe(256)](dr[qe(122)]),{"#include <begin_vertex>":qe(190)[qe(256)](dr[qe(122)],qe(177))}),Qe(fr,""[qe(256)](dr[qe(262)]),{"#include <begin_vertex>":qe(295).concat(dr.positionRaw,qe(137))}),Qe(fr,""[qe(256)](dr.pointSize),{"gl_PointSize = size;":qe(147)[qe(256)](dr[qe(195)],qe(176))}),Qe(fr,""[qe(256)](dr.diffuse),{"#include <color_fragment>":qe(291)[qe(256)](dr[qe(165)],qe(177))}),Qe(fr,""[qe(256)](dr[qe(229)]),{"#include <dithering_fragment>":qe(201)[qe(256)](dr[qe(229)],qe(177))}),Qe(fr,""[qe(256)](dr.emissive),{"vec3 totalEmissiveRadiance = emissive;":qe(252).concat(dr[qe(275)],qe(176))}),Qe(fr,"".concat(dr[qe(271)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = ".concat(dr[qe(271)],qe(176))}),Qe(fr,""[qe(256)](dr.metalness),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[qe(256)](dr.metalness,";\n    ")}),Qe(fr,""[qe(256)](dr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[qe(256)](dr.ao,qe(176))}),Qe(fr,""[qe(256)](dr[qe(286)]),{"#include <normal_fragment_maps>":qe(203).concat(dr[qe(286)],qe(278))[qe(256)](dr[qe(286)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),Qe(fr,"".concat(dr[qe(228)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(277)[qe(256)](dr[qe(228)],qe(227)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(215)[qe(256)](dr[qe(228)],qe(176))}),Qe(fr,""[qe(256)](dr[qe(102)]),{"material.clearcoat = clearcoat;":qe(139).concat(dr[qe(102)],";")}),Qe(fr,""[qe(256)](dr[qe(287)]),{"material.clearcoatRoughness = clearcoatRoughness;":qe(188)[qe(256)](dr[qe(287)],";")}),Qe(fr,""[qe(256)](dr[qe(187)]),{"#include <clearcoat_normal_fragment_begin>":qe(153)}),fr),gr=(Qe(pr={},""[qe(256)](dr[qe(122)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(132)[qe(256)](dr[qe(122)],qe(221))}),Qe(pr,""[qe(256)](dr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[qe(256)](dr.position,qe(177))}),Qe(pr,""[qe(256)](dr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[qe(256)](dr[qe(165)],";\n  ")}),Qe(pr,""[qe(256)](dr[qe(229)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(219)[qe(256)](dr.fragColor,qe(177))}),pr),_r={clearcoat:[dr[qe(102)],dr[qe(187)],dr.clearcoatRoughness]},yr=qe(126),xr=qe(293),Ir=qe(205),br=qe(108),wr=["baseMaterial",qe(168),qe(292),"uniforms","patchMap",qe(267),qe(211)],Sr=function(n,t,e){var r=qe;return n[r(117)](t)[r(294)](e)},Mr=function(n,t){var e,r,o=qe;return new RegExp("\\b".concat((e=t,r=qe,e[r(128)](/[-\/\\^$*+?.()|[\]{}]/g,r(189))),"\\b"))[o(194)](n)};function Ar(n){return n?n[qe(128)](/\s/g,""):void 0}function Rr(n){return n[qe(128)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Er=function(n){var t=qe;!function(n,t){var e=rr;if(typeof t!==e(290)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(217)]=Object[e(156)](t&&t[e(217)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(174)](n,e(217),{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=ur(c);function c(n){var t,e,r,o,i,s=rr,u=n[s(171)],l=n[s(168)],f=n.vertexShader,p=n[s(222)],d=n[s(250)],h=n[s(267)],v=n[s(211)],m=tr(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(rr(135))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(224)][t(261)](t(298))>=0)return!1}return!0}(u)?(e=u,Object[s(129)](e,m)):e=new u(m),"RawShaderMaterial"===e[s(192)])throw new Error(s(243));(function(n,t){var e=qe;Object[e(129)](n,t);var r=Object[e(270)](t);Object[e(281)](Object.getOwnPropertyDescriptors(r)).filter((function(n){var t=e,r="function"==typeof n[1][t(154)],o=typeof n[1][t(136)]===t(290),i="function"==typeof n[1][t(143)],a=n[0]===t(131);return(r||o||i)&&!a})).forEach((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(174)](n,t[0],t[1])}))})(ar(t=a[s(225)](this)),e),t[s(196)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:P[s(289)][s(144)](),type:e[s(192)],isAlreadyExtended:(r=e[s(178)],o=qe,i=r.toString()[o(152)](),!(0===i[o(160)](i[o(261)]("{")+1,i.lastIndexOf("}")).trim().length)),cacheHash:"",silent:v},t[s(222)]=nr(nr({},t.uniforms||{}),p||{});var g=t[s(196)],_=g.fragmentShader,y=g[s(292)],x=t.uniforms;return t[s(196)][s(236)]=t[s(162)](),t[s(268)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=rr,t=arguments[n(264)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(222)]=t[n(222)]||this.uniforms,Object[n(129)](this.__csm,t);var e=this.__csm,r=e[n(168)],o=e[n(292)],i=this[n(222)],a=this[n(162)]();this[n(196)][n(236)]=a,this[n(268)](r,o,i)}},{key:"clone",value:function(){var n=rr,t={baseMaterial:this.__csm[n(171)],fragmentShader:this[n(196)][n(168)],vertexShader:this[n(196)].vertexShader,uniforms:this[n(222)],silent:this.__csm[n(211)],patchMap:this[n(196)][n(250)],cacheKey:this[n(196)][n(267)]},e=new(this[n(131)])(t);return Object[n(129)](this,e),e}},{key:t(162),value:function(){var n=t,e=this.__csm,r=e[n(168)],o=e[n(292)],i=this[n(222)],a=[Ar(r),Ar(o),i][n(253)]((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this[n(230)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(230)]=function(){var n=o;return i.__csm[n(236)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(202)](Rr(n),t.fragmentShader,!0);t.fragmentShader=a+c}if(e){var s=i[r(202)](Rr(e),t[r(292)]);t[r(292)]=r(259)+s,t[r(292)]=a+t[r(292)]}t[r(222)]=nr(nr({},t[r(222)]),i.uniforms),i[r(222)]=t.uniforms}catch(u){console.error(u)}};if(this[o(196)].isAlreadyExtended){var c=this.onBeforeCompile;this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this.needsUpdate=!0}},{key:t(202),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(149)]()),this[o(196)][o(250)]);Object[o(281)](_r).forEach((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(241)]((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error(e(249)[e(256)](a,e(113))[e(256)](c,e(234)))})),Object[o(281)](vr)[o(106)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object[o(207)](c)[o(106)]((function(t){var e=o;Object[e(207)](c[t]).forEach((function(r){var o=e,s=hr[t],u=i.__csm[o(192)];if("*"===t||Mr(n,t)){if(!(!s||Array.isArray(s)&&s[o(273)](u)||"*"===s))throw new Error(o(163)[o(256)](t," is not available in ")[o(256)](u,o(280)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(232)+this.__csm[o(155)][o(128)](/-/g,"_"),h=n[o(128)](/void\s+main\s*\(\s*\)/g,o(220).concat(d,"()")),v=n[o(273)](o(199)),m=a[o(273)](o(197));return v&&(m&&this[o(196)][o(244)]?(a=a[o(128)]("void main() {",o(242).concat(h,o(124))),s=a,u=o(197),l="\n            "[o(256)](d,o(206)),f=qe,p=s.lastIndexOf(u),a=-1===p?s:s[f(160)](0,p)+l+s.substring(p+u[f(264)])):a=a[o(128)]("void main() {","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(256)](r?Ir:"\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(119))[o(256)](yr,o(175)).concat(h,o(238))[o(256)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(182))[o(256)](r?br:xr,o(120))[o(256)](d,o(141)))),a}},{key:t(240),value:function(){var n=t,e=this[n(196)].type;return e?"#define IS_"[n(256)](e.toUpperCase(),";\n"):n(274)}},{key:t(149),value:function(){var n=t;return this[n(196)].type===n(185)?gr:mr}}],i=rr,r&&ir(e[i(217)],r),o&&ir(e,o),Object[i(174)](e,i(217),{writable:!1}),c}(P[qe(103)]);function Tr(n){function t(n){var e=rr;if("string"==typeof n)return function(n){}.constructor(e(107)).apply(e(130));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(114)+e(258))[e(225)](e(269)):function(){return!1}.constructor(e(114)+e(258)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Pr(){var n=["set",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","material.clearcoat = ","function *\\( *\\)","();\n              // #_CSM_#\n          ","@@iterator","value","generateUUID","csm_Roughness","ShaderChunk","\n    gl_PointSize = ","\n    vec3 objectNormal = ","_getPatchMapForMaterial","272482oAMxbb","161270OcLvuw","trim","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","get","instanceID","create","48bARaij","csm_Normal","undefined","substring","544320HWBRvQ","_getCacheHash","CSM: ","csm_Metalness","diffuse","this hasn't been initialised - super() hasn't been called","getOwnPropertyDescriptor","fragmentShader","10ThTAwp","input","baseMaterial","default","from","defineProperty","\n    \n            ",";\n    ",";\n  ","onBeforeCompile","MeshNormalMaterial","lights_physical_fragment","17748AIJCQZ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","normal","metalness","ShaderMaterial","chain","clearcoatNormal","material.clearcoatRoughness = ","\\$&","\n    vec3 transformed = ","MeshStandardMaterial","type","csm_PositionRaw","test","pointSize","__csm","// #_CSM_#","push","void main()","sham","\n    #include <dithering_fragment>\n    gl_FragColor  = ","_patchShader","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","MeshPhysicalMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","();\n            // #_CSM_#\n          ","keys","csm_Emissive","object","isArray","silent","iterator","bind","exception","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","Map","prototype","MeshToonMaterial","\n    gl_FragColor = ","void ",", 1.0 );\n  ","uniforms","MeshPhongMaterial","message","call","error"," );\n    ","depthAlpha","fragColor","customProgramCacheKey","Object","csm_main_","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'". Shader cannot compile.',"csm_AO","cacheHash","5336937AhvzIk","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","enumerable","_getMaterialDefine","find","\n            ","CustomShaderMaterial does not support RawShaderMaterial","isAlreadyExtended","name","setPrototypeOf","log","getOwnPropertyDescriptors",'CSM: Property "',"patchMap","configurable","\n    vec3 totalEmissiveRadiance = ","filter","Derived constructors may only return object or undefined","valueOf","concat","1833920HKmVDM","gger","#define IS_VERTEX;\n","key","indexOf","positionRaw","string","length","getOwnPropertySymbols","construct","cacheKey","_generateMaterial","action","getPrototypeOf","roughness","9HOFABI","includes","#define IS_UNKNOWN;\n","emissive","csm_DepthAlpha","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "," - (dot(","toString",". Shader cannot compile.","entries","MeshDepthMaterial","csm_Position","return (function() ","csm_ClearcoatNormal","bump","clearcoatRoughness","apply","MathUtils","function","\n    #include <color_fragment>\n    diffuseColor = ","vertexShader","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","join","\n    vec4 csm_internal_positionUnprojected = ","defineProperties","MeshLambertMaterial","is not a constructor","csm_Bump","clearcoat","Material","slice",'{}.constructor("return this")( )',"forEach","while (true) {}","\n    \n","info","trace","Arguments","return",'" is required to use output "',"debu","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","525462rWvETP","split","__proto__","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","csm_PointSize","position","toPrimitive","\n            \n            void main() {\n          ","done","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","warn","replace","assign","counter","constructor","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","MeshBasicMaterial","next","Cannot call a class as a function"];return(Pr=function(){return n})()}const Dr=zr;function zr(n,t){const e=Br();return(zr=function(n,t){return e[n-=446]})(n,t)}!function(n,t){const e=zr,r=Br();for(;;)try{if(102978===parseInt(e(469))/1*(parseInt(e(458))/2)+-parseInt(e(468))/3+-parseInt(e(449))/4+-parseInt(e(477))/5*(-parseInt(e(492))/6)+-parseInt(e(475))/7+-parseInt(e(488))/8*(parseInt(e(486))/9)+parseInt(e(451))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zr(478)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cr(this,(function(){const n=zr,t=new RegExp(n(470)),e=new RegExp(n(461),"i"),r=jr(n(491));t[n(448)](r+n(474))&&e[n(448)](r+n(455))?jr():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zr(478)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Or(void 0,(function(){const n=zr;let t;try{t=Function(n(466)+n(472)+");")()}catch(o){t=window}const e=t[n(489)]=t[n(489)]||{},r=["log","warn",n(490),n(494),n(493),n(460),n(464)];for(let i=0;i<r[n(487)];i++){const t=Or[n(483)][n(456)][n(454)](Or),o=r[i],a=e[o]||t;t[n(463)]=Or.bind(Or),t[n(453)]=a[n(453)][n(454)](a),e[o]=t}}))();const Fr=[Dr(457)];function Br(){const n=["#ff00fc","call","constructor","metalness","action","18531qgBnmi","length","192tAUWIb","console","info","init","6sYUNkZ","exception","error","gger","\n      ","test","278224uWRJUo","stateObject","1114770TKAuqh","clearcoat","toString","bind","input","prototype","object","2TefGMy","\n\t\t\t","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","__proto__","trace","debu","return (function() ","counter","362697JXWCFX","103390GPROxI","function *\\( *\\)","clearcoatRoughness",'{}.constructor("return this")( )',"roughness","chain","12656IuvOMS","color","648950bBbZNT","apply","MeshPhysicalMaterial","index"];return(Br=function(){return n})()}const kr=en({__name:Dr(480),props:{color:{default:Dr(481)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Dr,e=n,r={baseMaterial:P[t(479)],metalness:e[t(484)],roughness:e[t(473)],clearcoat:e[t(452)],clearcoatRoughness:e[t(471)],color:e[t(476)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(459)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(447)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(462)},o=new Er(r);return pn((()=>{const n=t;o[n(476)].setStyle(e.color),o.metalness=e[n(484)],o[n(473)]=e[n(473)],o.clearcoat=e[n(452)],o[n(471)]=e.clearcoatRoughness})),(n,t)=>(an(),cn("primitive",{object:tn(o)},null,8,Fr))}});function jr(n){function t(n){const e=zr;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(478)](e(467));1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}.constructor("debu"+e(446))[e(482)](e(485)):function(){return!1}[e(483)](e(465)+e(446))[e(478)](e(450)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Lr();;)try{if(520088===parseInt(e(149))/1*(-parseInt(e(173))/2)+-parseInt(e(153))/3*(-parseInt(e(164))/4)+parseInt(e(165))/5+-parseInt(e(148))/6+-parseInt(e(175))/7*(-parseInt(e(158))/8)+-parseInt(e(167))/9+parseInt(e(162))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Hr,t=new RegExp(n(161)),e=new RegExp(n(155),"i"),r=Zr(n(171));t.test(r+"chain")&&e[n(151)](r+"input")?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(){var n=["prototype","constructor","warn","length","2741298vRSuKM","3yhhvDH","exception","test","return (function() ","1982739QjPXiX","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","string","16DSIhNv","console","apply","function *\\( *\\)","3176880bNEJaU","error","4eszIUe","1007350ZGNcvV","action","3712077SKCIlm","gger",'{}.constructor("return this")( )',"bind","init","stateObject","34054vEAHci","__proto__","911519eRQNSR","call","while (true) {}"];return(Lr=function(){return n})()}function Hr(n,t){var e=Lr();return(Hr=function(n,t){return e[n-=145]})(n,t)}function Zr(n){function t(n){var e=Hr;if(typeof n===e(157))return function(n){}[e(145)](e(177))[e(160)]("counter");1!==(""+n/n)[e(147)]||n%20==0?function(){return!0}[e(145)](e(154)+e(168))[e(176)](e(166)):function(){return!1}.constructor(e(154)+e(168))[e(160)](e(172)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){for(var n=Hr,t=function(){var n,t=Hr;try{n=Function(t(152)+t(169)+");")()}catch(e){n=window}return n}(),e=t[n(159)]=t[n(159)]||{},r=["log",n(146),"info",n(163),n(150),"table",n(156)],o=0;o<r[n(147)];o++){var i=Nr[n(145)][n(178)][n(170)](Nr),a=r[o],c=e[a]||i;i[n(174)]=Nr[n(170)](Nr),i.toString=c.toString[n(170)](c),e[a]=i}}))();export{Ge as C,kr as _,st as a,Qn as b,wt as c,Tt as d,jt as e,Yt as f,Ne as g,Ae as h,ht as u};

import{X as t,_ as e,bO as i,b as n,ar as r,C as o,a as s,B as a}from"./three.8y0_KTxz1741594518249.js";const c=h;function h(t,e){const i=u();return(h=function(t,e){return i[t-=153]})(t,e)}!function(t,e){const i=h,n=u();for(;;)try{if(983785===parseInt(i(358))/1*(parseInt(i(319))/2)+-parseInt(i(298))/3*(-parseInt(i(585))/4)+-parseInt(i(374))/5*(parseInt(i(430))/6)+parseInt(i(493))/7*(parseInt(i(402))/8)+-parseInt(i(605))/9+parseInt(i(173))/10*(parseInt(i(599))/11)+-parseInt(i(566))/12*(-parseInt(i(175))/13))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(240)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["getComponentValueAtIndex","material","POSITIVE_INFINITY","test","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","paramsArray","_updateBuffers","count","subarray","elements","void main() {","radiusScale","randomFloat","uuid","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","removeEmitter","varying vec4 vColor;","           positionInTime,","function *\\( *\\)","prototype","attribute vec3 velocity;","fog","TypedArray is already of size:","      vec3 translated;","SHOULD_ROTATE_TEXTURE","multiplyScalar","distribution","11096046ZKquXh","BOOLEAN","    vColor = vec4( c, o );","setRGB","position","_distributionClamp","    #ifdef SHOULD_ROTATE_TEXTURE","_createGetterSetters","varyings","input","    pos += force;","radius","_ensureTypedArray","angle","max",'{}.constructor("return this")( )',"       float s = sin( -vAngle );","   vec3 c = vec3( 0.0 );","uniform float runTime;","object","setMat4","        float totalFrames = textureAnimation.z;","Vector4","onParticleSpawn","        float wiggleSin = isAlive * sin( wiggleAmount );","_updateDefines","utils","TypedArrayConstructor","   return c;","spe","    vec3 outgoingLight = vColor.xyz;","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","      mat4 rotationMatrix;","REVISION","particleCount","ensureArrayInstanceOf","_assignValue","resetDynamic","_radiusScale","geometry","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","angleSpread","setUpdateRange","        float wiggleAmount = positionInTime * getWiggle();","setVec2","shaders","ShaderAttribute","direction","shaderChunks","Emitter","alphaTest","add","needsUpdate","length","isArray","cos","disable","distributions","acceleration","size","trace","_updateUniforms","   c.g = g / PACKED_COLOR_DIVISOR;","5230813rsAjGa","setMat3","depthWrite","group","grow","error","transparent","axisSpread","log","ensureValueOverLifetimeCompliance","_attributesNeedRefresh","rotationCenter","logdepthbuf_vertex","attribute vec4 size;","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","attribute vec4 acceleration;","undefined","splice","       fIndex = float( i );","_pool","spread","forceUpdateAll","    vec3 accel = getAcceleration( age );","info","attributeCount","array","Argument is not instanceof SPE.Emitter:","bufferAttribute","_setBufferUpdateRanges","fog_fragment","#ifdef SHOULD_ROTATE_PARTICLES","unshift","generateUUID","Invalid argument types, or argument types do not match:","emitterIDs","branchAvoidanceFunctions","deltaTime","NEGATIVE_INFINITY","BOX","console","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","fragment","wiggle","ceil","blending","randomVector3OnSphere","randomVector3OnLine","Texture","round","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","_assignForceValue","particles, can support only","color","           unpackColor( color.z ),","push","resetFlags","    highp float maxAge = getMaxAge();","uniform sampler2D tex;","join","_assignAbsLifetimeValue","_assignParamsValue","rotateTexture","    return value;","    #else","float when_le(float x, float y) {","return (function() ","fog_pars_vertex","           unpackColor( color.y ),","uniform float deltaTime;","_value","paramFetchingFunctions","        float loopCount = textureAnimation.w;","   c -= vec3( 1.0 );","96cNFOwi","_incrementParticleCount","        vSpriteSheet.y = 1.0 / framesY;","Points","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","attributeKeys","SPE.Group pool ran out.","_center","_angleSpread","maxParticleCount","_distribution","    force *= drag;","_assignColorValue","       axis = normalize(axis);","    return min(a + b, 1.0);","activationEnd","        pos = getRotation( pos, positionInTime );","colorOverLifetime","       if ( vColor.w < float(ALPHATEST) ) discard;","36JnPOlv","        float columnNorm = vSpriteSheet.z;","AdditiveBlending","forceFetchingFunctions","        pos.x += wiggleSin;","maxAge","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","call","    #ifdef SHOULD_CALCULATE_SPRITE","stateObject","floatOverLifetime","updateRange","bind","componentSize","796323fBtktG","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","_updateAttributeUpdateRange","__proto__","   c.b = b / PACKED_COLOR_DIVISOR;","_angle","11255391NVveMu","        float rowNorm = row / framesY;","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","BufferAttribute","_applyAttributesToGeometry","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","    return 1.0 - abs( sign( x - y ) );","shrink","#ifdef SHOULD_CALCULATE_SPRITE","_assignPositionValue","attribute vec3 rotationCenter;","fog_vertex","       );","NUMBER","_createBufferAttribute","getPackedRotationAxis","SPHERE","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","    varying vec4 vSpriteSheet;","drag","pop","float getWiggle() {","uniforms","    vec3 force = vec3( 0.0 );","clamp","frames","exception","    return a * b;","isStatic","valueOverLifetimeLength","       float x = gl_PointCoord.x - 0.5;","offset","constructor","        pos.z += wiggleSin;","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","      }","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","frameCount","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","axis","      vec3 axis = unpackRotationAxis( rotation.x );","textureFrameCount","70GInDKT","       float oc = 1.0 - c;","3146208xBuOAn","   return velocity * age;","age","_attributesNeedDynamicReset","randomVector3OnDisc","toString","updateCounts","depthTest","   return params.z;","indexOffset","        float column = floor(mod( frameNumber, framesX ));","       vec3 c = isAlive * getColorOverLifetime(","      translated = rotationCenter - pos;","defineProperty","getLength","setFromArray","getFromPool","      if( rotation.y == 0.0 ) {","activeParticleCount","warn","dynamicBuffer","activationIndex","dispose","StaticDrawUsage","vec3 getAcceleration( in float age ) {","min","attribute vec4 opacity;","       vec3 c = vec3(1.0);","MathUtils","fixedTimeStep","ensureArrayTypedArg","   c *= vec3( 2.0 );","emitters","gger","uniform float scale;","        float perspective = 1.0;","hasPerspective","unpackRotationAxis","abs","setDrawRange","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    gl_Position = projectionMatrix * mvPosition;","           unpackColor( color.x ),","_createNewWhenPoolEmpty","ShaderChunk","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","particlesPerSecond","table","duration","typedArray","_checkParticleAges","textureLoop","   return acceleration.xyz * age;","mesh","    #endif","indexOf","_poolCreationSettings","        float framesX = vSpriteSheet.x;","    #ifdef SHOULD_ROTATE_PARTICLES","scale","Group","   c.r = r / PACKED_COLOR_DIVISOR;","params","updateMap","float and(float a, float b) {","apply","_triggerSingleEmitter","attributeOffset","attribute vec4 angle;","textureFrames","_spread","ensureTypedArg","attributes","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","_assignRotationValue","float getAlive() {","defines","opacity","ShaderMaterial","TypedArrayHelper","   return params.w;","   return params.y;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","Vector2","    vec4 rotatedTexture = texture2D( tex, vUv );","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","bufferUpdateKeys","        float row = floor( (frameNumber - column) / framesX );","attribute vec4 params;","unpackColor","alive","number","rotation","float or(float a, float b) {","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","updateMin","       float s = sin(angle);","typeSizeMap","    vec3 pos = vec3( position );","arrayType","action","set","float when_gt(float x, float y) {","keys","float when_ge(float x, float y) {","    force += accel * age;","#define PACKED_COLOR_SIZE 256.0","randomise","sin","distributionClamp","updateMax","#ifdef SHOULD_ROTATE_TEXTURE","   float b = mod( hex, PACKED_COLOR_SIZE );","Emitter already belongs to another group. Will not add to requested group.","SPE.Group: maxParticleCount exceeded. Requesting","setVec2Components","_decrementParticleCount","randomDirectionVector3OnSphere","rotationFunctions","reset","copy","chain","setVec3","214653nUDxnt","    highp float alive = getAlive();","type","Color","loop","SHOULD_ROTATE_PARTICLES","normalize","logdepthbuf_pars_vertex","common","       float c = cos( -vAngle );","_spreadClamp","    gl_PointSize = pointSizePerspective;","Vector3","        vSpriteSheet.z = columnNorm;","float when_eq( float x, float y ) {","_onRemove","    vec3 value = vec3( 0.0 );","ensureInstanceOf","_calculatePPSValue","vec3 unpackRotationAxis( in float hex ) {","updateFlags","34KrNnzP","bufferUpdateRanges","   }","attributeEnd","types","_setAttributeOffset","vec3 getVelocity( in float age ) {","randomColorAsHex","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","flagUpdate","setSize","_resetBufferRanges","setVec4Components","    float pointSizePerspective = pointSize * perspective;","logdepthbuf_pars_fragment","velocity","interpolateArray","colorize","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","setVec4","        pos.y += wiggleCos;","getHex","    float shouldApplyValue = 0.0;","#endif","uniform vec4 textureAnimation;","addPool","SHOULD_WIGGLE_PARTICLES","floor","_assignAngleValue","        float framesY = vSpriteSheet.y;","enable","    #ifdef SHOULD_WIGGLE_PARTICLES","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","getPool","      vec3 center = rotationCenter;","clone","Emitter does not belong to a group, cannot remove.","activeMultiplier","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","14684WabhdD","tick","  return 1.0 - when_lt(x, y);","arrayValuesAreEqual","float getAge() {","    return max(sign(x - y), 0.0);","vertex","spreadClamp","Emitter does not exist in this group. Will not remove.","releaseIntoPool","value","`emitter` argument must be instance of SPE.Emitter. Was provided with:","string","OBJECT","Emitter already exists in this group. Will not add again.","center","5eTEdPB","vec3 unpackColor( in float hex ) {","addEmitter","texture","        vSpriteSheet.x = 1.0 / framesX;","random","_activateParticles","  return 1.0 - when_gt(x, y);","setVec3Components","LINE","vec4 getPosition( in float age ) {","float when_lt(float x, float y) {","    #ifdef ALPHATEST","exports","    ","    highp float value = 0.0;","lerp","function","DISC","    float fIndex = 0.0;","      rotationMatrix = getRotationMatrix( axis, angle );","hasOwnProperty","usage","_static","    vec3 vel = getVelocity( age );","   return params.x;","roundToNearestMultiple","debu","8djeNSO"];return(u=function(){return t})()}!function(){l(this,(function(){const t=h,e=new RegExp(t(421)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=m("init");e[t(406)](n+t(296))&&i[t(406)](n+t(439))?m():n("0")}))()}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(240)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();p(void 0,(function(){const t=h,e=function(){const t=h;let e;try{e=Function(t(558)+t(445)+");")()}catch(i){e=window}return e}(),i=e[t(532)]=e[t(532)]||{},n=[t(501),t(194),t(516),t(498),t(157),t(222),t(490)];for(let r=0;r<n[t(483)];r++){const e=p.constructor.prototype[t(597)](p),o=n[r],s=i[o]||e;e[t(602)]=p[t(597)](p),e.toString=s[t(180)][t(597)](s),i[o]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===c(391)&&define.amd?define(c(459),f):typeof exports!==c(509)&&"undefined"!=typeof module&&(module[c(387)]=f),f[c(254)]=function(t,e,i,n){const r=c;this[r(598)]=i||1,this.size=e||1,this[r(457)]=t||Float32Array,this[r(518)]=new t(e*this.componentSize),this[r(184)]=n||0},f[c(254)][c(163)]=f[c(254)],f.TypedArrayHelper[c(422)][c(329)]=function(t,e){const i=c,n=this[i(518)][i(483)];return!e&&(t*=this.componentSize),t<n?this[i(613)](t):t>n?this[i(497)](t):void console[i(516)](i(425),t+".","Will not resize.")},f[c(254)][c(422)][c(613)]=function(t){const e=c;return this[e(518)]=this[e(518)][e(411)](0,t),this[e(489)]=t,this},f.TypedArrayHelper[c(422)].grow=function(t){const e=c,i=this.array,n=new this.TypedArrayConstructor(t);return n[e(276)](i),this[e(518)]=n,this[e(489)]=t,this},f[c(254)][c(422)][c(510)]=function(t,e){const i=c;t*=this.componentSize,e*=this.componentSize;const n=[],r=this[i(518)],o=r[i(483)];for(let s=0;s<o;++s)(s<t||s>=e)&&n.push(r[s]);return this.setFromArray(0,n),this},f.TypedArrayHelper[c(422)][c(190)]=function(t,e){const i=c,n=t+e[i(483)];return n>this[i(518)][i(483)]?this[i(497)](n):n<this[i(518)].length&&this[i(613)](n),this[i(518)][i(276)](e,this[i(184)]+t),this},f.TypedArrayHelper[c(422)][c(474)]=function(t,e){return this[c(290)](t,e.x,e.y)},f[c(254)].prototype[c(290)]=function(t,e,i){const n=c,r=this.array,o=this[n(184)]+t*this[n(598)];return r[o]=e,r[o+1]=i,this},f[c(254)][c(422)][c(297)]=function(t,e){return this[c(382)](t,e.x,e.y,e.z)},f[c(254)].prototype[c(382)]=function(t,e,i,n){const r=c,o=this.array,s=this[r(184)]+t*this[r(598)];return o[s]=e,o[s+1]=i,o[s+2]=n,this},f[c(254)].prototype[c(338)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},f[c(254)][c(422)][c(331)]=function(t,e,i,n,r){const o=this.array,s=this.indexOffset+t*this.componentSize;return o[s]=e,o[s+1]=i,o[s+2]=n,o[s+3]=r,this},f.TypedArrayHelper.prototype[c(494)]=function(t,e){const i=c;return this[i(190)](this.indexOffset+t*this[i(598)],e[i(412)])},f[c(254)][c(422)][c(450)]=function(t,e){const i=c;return this.setFromArray(this.indexOffset+t*this[i(598)],e[i(412)])},f[c(254)][c(422)].setColor=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},f.TypedArrayHelper[c(422)].setNumber=function(t,e){return this[c(518)][this.indexOffset+t*this.componentSize]=e,this},f.TypedArrayHelper[c(422)].getValueAtIndex=function(t){return this.array[this.indexOffset+t]},f.TypedArrayHelper.prototype[c(403)]=function(t){const e=c;return this.array.subarray(this[e(184)]+t*this[e(598)])},f[c(476)]=function(t,e,i){const n=c,r=f[n(476)][n(272)];this[n(300)]=typeof t===n(370)&&r.hasOwnProperty(t)?t:"f",this.componentSize=r[this[n(300)]],this[n(274)]=i||Float32Array,this.typedArray=null,this[n(520)]=null,this[n(195)]=!!e,this.updateMin=0,this[n(285)]=0},f[c(476)][c(163)]=f.ShaderAttribute,f[c(476)][c(272)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f[c(476)].prototype[c(472)]=function(t,e){const i=c;this[i(270)]=Math[i(200)](t*this[i(598)],this.updateMin*this[i(598)]),this.updateMax=Math[i(444)](e*this[i(598)],this.updateMax*this[i(598)])},f[c(476)][c(422)][c(328)]=function(){const t=c,e=this[t(520)];!e[t(596)]&&(e[t(596)]={});const i=e.updateRange;i[t(162)]=this[t(270)],i[t(410)]=Math.min(this[t(285)]-this.updateMin+this[t(598)],this[t(224)][t(518)][t(483)]),e.needsUpdate=!0},f[c(476)][c(422)].resetUpdateRange=function(){const t=c;this[t(270)]=0,this[t(285)]=0},f[c(476)].prototype.resetDynamic=function(){const i=c;this[i(520)].usage=this[i(195)]?t:e[i(198)]},f.ShaderAttribute.prototype[c(510)]=function(t,e){const i=c;this[i(224)].splice(t,e),this[i(514)]()},f[c(476)][c(422)].forceUpdateAll=function(){const t=c;this[t(520)][t(518)]=this[t(224)][t(518)],this[t(520)].updateRange[t(162)]=0,this[t(520)][t(596)][t(410)]=-1,this[t(520)][t(396)]=e[t(198)],this.bufferAttribute[t(482)]=!0},f[c(476)][c(422)][c(442)]=function(t){const e=c;null!==this[e(224)]&&this[e(224)][e(489)]===t*this[e(598)]||(null!==this[e(224)]&&this.typedArray[e(489)]!==t?this[e(224)][e(329)](t):null===this.typedArray&&(this[e(224)]=new(f[e(254)])(this.arrayType,t,this[e(598)])))},f.ShaderAttribute.prototype[c(620)]=function(i){const n=c;if(this[n(442)](i),null!==this[n(520)])return this[n(520)][n(518)]=this[n(224)][n(518)],parseFloat(e[n(463)])>=81&&(this[n(520)].count=this[n(520)].array[n(483)]/this.bufferAttribute.itemSize),void(this[n(520)].needsUpdate=!0);this[n(520)]=new(e[n(608)])(this[n(224)].array,this[n(598)]),this[n(520)][n(396)]=this[n(195)]?t:e[n(198)]},f[c(476)][c(422)][c(189)]=function(){const t=c;return null===this[t(224)]?0:this[t(224)][t(518)].length},f[c(478)]={defines:[c(281),"#define PACKED_COLOR_DIVISOR 255.0"][c(551)]("\n"),uniforms:[c(561),c(448),c(550),c(343),c(209)][c(551)]("\n"),attributes:[c(508),c(423),"attribute vec4 rotation;",c(616),c(263),c(506),c(243),"attribute vec4 color;",c(201)][c(551)]("\n"),varyings:[c(419),c(286),"    varying float vAngle;","#endif",c(614),c(624),c(342)][c(551)]("\n"),branchAvoidanceFunctions:[c(277),c(363),"}",c(385),c(533),"}",c(312),c(612),"}",c(279),c(360),"}",c(557),c(381),"}",c(239),c(158),"}",c(268),c(580),"}"].join("\n"),unpackColor:[c(375),"   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",c(287),c(236),c(492),c(603),c(458),"}"].join("\n"),unpackRotationAxis:[c(317),c(447),c(165),c(167),c(287),"   c.r = r / PACKED_COLOR_DIVISOR;",c(492),c(603),c(206),c(565),c(458),"}"][c(551)]("\n"),floatOverLifetime:[c(542),c(389),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",c(393),c(341),c(611),"",c(248),c(511),c(351),c(215),"    }","",c(555),"}"][c(551)]("\n"),colorOverLifetime:[c(220),c(314),"    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );",c(507),c(407),c(555),"}"][c(551)]("\n"),paramFetchingFunctions:[c(250),c(399),"}",c(362),c(256),"}","float getMaxAge() {",c(183),"}",c(627),c(255),"}"][c(551)]("\n"),forceFetchingFunctions:[c(384),"   return modelViewMatrix * vec4( position, 1.0 );","}",c(325),c(176),"}",c(199),c(227),"}"][c(551)]("\n"),rotationFunctions:[c(523),c(623),c(579),c(271),"       float c = cos(angle);",c(174),"",c(470),c(269),c(610),"                   0.0,                                0.0,                                0.0,                                1.0);",c(321),"",c(570),c(192),"           return pos;",c(166),"",c(171),c(353),c(426),c(462),"      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",c(257),c(187),c(394),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",c(321),c(342)][c(551)]("\n"),rotateTexture:[c(260),"",c(436),c(161),"       float y = 1.0 - gl_PointCoord.y - 0.5;",c(307),c(446),c(357),c(229),"","    #ifdef SHOULD_CALCULATE_SPRITE",c(232),c(348),c(586),"        float rowNorm = vSpriteSheet.w;",c(169),c(337),c(229),"",c(259)].join("\n")},f[c(475)]={vertex:[f[c(478)][c(251)],f[c(478)][c(153)],f[c(478)].attributes,f[c(478)][c(438)],e[c(219)][c(306)],i[c(305)],e[c(219)][c(559)],f[c(478)][c(528)],f[c(478)][c(264)],f[c(478)][c(212)],f[c(478)][c(595)],f[c(478)][c(583)],f[c(478)][c(563)],f[c(478)][c(588)],f[c(478)][c(293)],c(413),"    highp float age = getAge();",c(299),c(549),"    highp float positionInTime = (age / maxAge);","    highp float isAlive = when_gt( alive, 0.0 );",c(350),c(473),c(454),"        float wiggleCos = isAlive * cos( wiggleAmount );","    #endif",c(398),c(515),c(154),c(273),c(591),"    force += vel;",c(577),c(280),c(440),c(350),c(589),c(339),c(164),c(229),c(233),c(582),"    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","    #ifdef HAS_PERSPECTIVE","        float perspective = scale / length( mvPosition.xyz );",c(556),c(210),"    #endif",c(332),"    #ifdef COLORIZE",c(186),c(420),c(217),c(560),c(546),"           unpackColor( color.w )",c(618),c(556),c(202),c(229),c(461),c(432),c(436),c(607),"    #endif",c(593),"        float framesX = textureAnimation.x;","        float framesY = textureAnimation.y;",c(564),c(451),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",c(185),c(262),"        float columnNorm = column / framesX;",c(606),c(378),c(568),c(311),"        vSpriteSheet.w = rowNorm;",c(229),c(309),c(216),e[c(219)][c(505)],e[c(219)][c(617)],"}"][c(551)]("\n"),fragment:[f[c(478)].uniforms,e[c(219)][c(306)],e[c(219)].fog_pars_fragment,e[c(219)][c(333)],f[c(478)][c(438)],f[c(478)][c(528)],c(413),c(460),c(388),c(386),c(584),"    #endif",f.shaderChunks[c(554)],e[c(219)].logdepthbuf_fragment,c(327),c(417),e[c(219)][c(522)],"}"].join("\n")},f[c(456)]={types:{BOOLEAN:"boolean",STRING:"string",NUMBER:c(266),OBJECT:c(449)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array[n(484)](t)){for(let r=t[n(483)]-1;r>=0;--r)if(typeof t[r]!==e)return i;return t}return this[n(246)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array[n(484)](t)){for(let r=t[n(483)]-1;r>=0;--r)if(void 0!==e&&t[r]instanceof e==!1)return i;return t}return this[n(315)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(484)](t[n(562)])&&(t[n(562)]=[t._value]),!1===Array.isArray(t[n(245)])&&(t[n(245)]=[t._spread]);const r=this.clamp(t._value.length,e,i),o=this[n(155)](t[n(245)][n(483)],e,i),s=Math[n(444)](r,o);t[n(562)][n(483)]!==s&&(t[n(562)]=this.interpolateArray(t._value,s)),t._spread[n(483)]!==s&&(t[n(245)]=this[n(335)](t[n(245)],s))},interpolateArray(t,e){const i=c,n=t[i(483)],r=["function"==typeof t[0][i(354)]?t[0].clone():t[0]],o=(n-1)/(e-1);for(let s=1;s<e-1;++s){const e=s*o,n=Math[i(346)](e),a=Math[i(536)](e),c=e-n;r[s]=this.lerpTypeAgnostic(t[n],t[a],c)}return r[i(547)](typeof t[n-1].clone===i(391)?t[n-1][i(354)]():t[n-1]),r},clamp(t,e,i){const n=c;return Math[n(444)](e,Math[n(200)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[c(379)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,o){const s=c;let a,h=this[s(323)];return typeof t===h[s(619)]&&typeof i===h.NUMBER?t+(i-t)*o:t instanceof e[s(258)]&&i instanceof e[s(258)]?(a=t[s(354)](),a.x=this.lerp(t.x,i.x,o),a.y=this[s(390)](t.y,i.y,o),a):t instanceof e[s(310)]&&i instanceof n?(a=t[s(354)](),a.x=this[s(390)](t.x,i.x,o),a.y=this[s(390)](t.y,i.y,o),a.z=this.lerp(t.z,i.z,o),a):t instanceof r&&i instanceof e[s(452)]?(a=t[s(354)](),a.x=this[s(390)](t.x,i.x,o),a.y=this[s(390)](t.y,i.y,o),a.z=this.lerp(t.z,i.z,o),a.w=this[s(390)](t.w,i.w,o),a):t instanceof e[s(301)]&&i instanceof e[s(301)]?(a=t[s(354)](),a.r=this.lerp(t.r,i.r,o),a.g=this[s(390)](t.g,i.g,o),a.b=this.lerp(t.b,i.b,o),a):void console.warn(s(526),t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=c;let n=0;return 0===e?t:(n=Math[i(213)](t)%e,0===n?t:t<0?-(Math[i(213)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=c;for(let i=0;i<t[e(483)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,r){const o=c;let s=i.x+(Math[o(379)]()*n.x-.5*n.x),a=i.y+(Math[o(379)]()*n.y-.5*n.y),h=i.z+(Math[o(379)]()*n.z-.5*n.z);r&&(s=.5*-r.x+this[o(400)](s,r.x),a=.5*-r.y+this[o(400)](a,r.y),h=.5*-r.z+this[o(400)](h,r.z)),t.typedArray[o(382)](e,s,a,h)},randomColor(t,e,i,n){const r=c;let o=i.r+Math[r(379)]()*n.x,s=i.g+Math[r(379)]()*n.y,a=i.b+Math.random()*n.z;o=this.clamp(o,0,1),s=this[r(155)](s,0,1),a=this.clamp(a,0,1),t.typedArray.setVec3Components(e,o,s,a)},randomColorAsHex:function(){const t=new o;return function(e,i,n,r){const o=h,s=n[o(483)],a=[];for(let c=0;c<s;++c){const e=r[c];t[o(295)](n[c]),t.r+=Math[o(379)]()*e.x-.5*e.x,t.g+=Math[o(379)]()*e.y-.5*e.y,t.b+=Math[o(379)]()*e.z-.5*e.z,t.r=this[o(155)](t.r,0,1),t.g=this[o(155)](t.g,0,1),t.b=this[o(155)](t.b,0,1),a.push(t.getHex())}e[o(224)][o(331)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const r=c,o=i[r(354)]();o[r(390)](n,Math[r(379)]()),t[r(224)].setVec3Components(e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,r,o,s,a){const h=c;let l=2*Math.random()-1,u=6.2832*Math[h(379)](),p=Math.sqrt(1-l*l),f=this[h(415)](n,r),d=0,m=0,g=0;s&&(f=Math[h(541)](f/s)*s),d=p*Math[h(485)](u)*f,m=p*Math.sin(u)*f,g=l*f,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[h(224)][h(382)](e,d,m,g)},seededRandom(t){const e=1e4*Math[c(283)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,r,o,s){const a=c;let h=6.2832*Math[a(379)](),l=Math[a(213)](this[a(415)](n,r)),u=0,p=0,f=0;s&&(l=Math[a(541)](l/s)*s),u=Math.cos(h)*l,p=Math[a(283)](h)*l,u*=o.x,p*=o.y,u+=i.x,p+=i.y,f+=i.z,t[a(224)][a(382)](e,u,p,f)},randomDirectionVector3OnSphere:function(){const t=c,i=new(e[t(310)]);return function(e,n,r,o,s,a,c,h){const l=t;i[l(295)](a),i.x-=r,i.y-=o,i.z-=s,i[l(304)]()[l(428)](-this[l(415)](c,h)),e[l(224)][l(382)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=c,i=new(e[t(310)]);return function(e,n,r,o,s,a,c,h){const l=t;i[l(295)](a),i.x-=r,i.y-=o,i.z-=s,i[l(304)]().multiplyScalar(-this[l(415)](c,h)),e[l(224)][l(382)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const t=c,i=new(e[t(310)]),n=new(e[t(310)]),r=new(e[t(301)]),o=new(e[t(310)])(1,1,1);return function(e,s){const a=t;return i[a(295)](e)[a(304)](),n.copy(s)[a(304)](),i.x+=.5*-s.x+Math[a(379)]()*s.x,i.y+=.5*-s.y+Math[a(379)]()*s.y,i.z+=.5*-s.z+Math.random()*s.z,i[a(304)]()[a(481)](o)[a(428)](.5),r[a(433)](i.x,i.y,i.z),r[a(340)]()}}()},f[c(235)]=function(t){const i=c,n=f.utils,r=n[i(323)];(t=n[i(246)](t,r.OBJECT,{}))[i(377)]=n[i(246)](t[i(377)],r[i(371)],{}),this[i(416)]=s[i(525)](),this.fixedTimeStep=n.ensureTypedArg(t[i(204)],r[i(619)],.016),this[i(377)]=n[i(315)](t[i(377)][i(368)],e[i(540)],null),this[i(244)]=n[i(315)](t[i(377)][i(156)],e[i(258)],new(e[i(258)])(1,1)),this[i(172)]=n[i(246)](t.texture[i(168)],r[i(619)],this[i(244)].x*this[i(244)].y),this[i(226)]=n[i(246)](t[i(377)][i(302)],r[i(619)],1),this.textureFrames[i(444)](new(e[i(258)])(1,1)),this[i(211)]=n[i(246)](t[i(211)],r[i(431)],!0),this[i(336)]=n[i(246)](t[i(336)],r[i(431)],!0),this.maxParticleCount=n[i(246)](t.maxParticleCount,r[i(619)],null),this[i(537)]=n.ensureTypedArg(t[i(537)],r[i(619)],e[i(587)]),this.transparent=n[i(246)](t[i(499)],r[i(431)],!0),this.alphaTest=parseFloat(n[i(246)](t[i(480)],r.NUMBER,0)),this[i(495)]=n[i(246)](t.depthWrite,r[i(431)],!1),this.depthTest=n[i(246)](t[i(182)],r[i(431)],!0),this[i(424)]=n[i(246)](t[i(424)],r[i(431)],!0),this[i(234)]=n[i(246)](t[i(234)],r[i(619)],300),this[i(207)]=[],this.emitterIDs=[],this[i(512)]=[],this[i(231)]=null,this._createNewWhenPoolEmpty=0,this[i(503)]=!1,this[i(178)]=!1,this.particleCount=0,this[i(153)]={tex:{type:"t",value:this[i(377)]},textureAnimation:{type:"v4",value:new(e[i(452)])(this[i(244)].x,this.textureFrames.y,this[i(172)],Math.max(Math[i(213)](this.textureLoop),1))},fogColor:{type:"c",value:this[i(424)]?new o:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(234)]}},this[i(251)]={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(336)],VALUE_OVER_LIFETIME_LENGTH:f[i(160)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(244)].x>1||this[i(244)].y>1},this[i(247)]={position:new(f[i(476)])("v3",!0),acceleration:new f.ShaderAttribute("v4",!0),velocity:new(f[i(476)])("v3",!0),rotation:new f.ShaderAttribute("v4",!0),rotationCenter:new(f[i(476)])("v3",!0),params:new(f[i(476)])("v4",!0),size:new f.ShaderAttribute("v4",!0),angle:new f.ShaderAttribute("v4",!0),color:new(f[i(476)])("v4",!0),opacity:new f.ShaderAttribute("v4",!0)},this[i(571)]=Object[i(278)](this[i(247)]),this[i(517)]=this[i(571)][i(483)],this[i(404)]=new(e[i(253)])({uniforms:this.uniforms,vertexShader:f[i(475)][i(364)],fragmentShader:f[i(475)][i(534)],blending:this[i(537)],transparent:this.transparent,alphaTest:this[i(480)],depthWrite:this[i(495)],depthTest:this[i(182)],defines:this[i(251)],fog:this[i(424)]}),this[i(469)]=new a,this[i(228)]=new(e[i(569)])(this[i(469)],this[i(404)]),null===this[i(575)]&&console[i(194)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},f.Group[c(163)]=f[c(235)],f.Group.prototype[c(455)]=function(){const t=c;let e,i=this[t(207)],n=i[t(483)]-1,r=this[t(251)];for(;n>=0;--n)e=i[n],!r.SHOULD_CALCULATE_SPRITE&&(r[t(427)]=r[t(427)]||!!Math[t(444)](Math[t(444)].apply(null,e[t(443)][t(368)]),Math[t(444)].apply(null,e.angle[t(513)]))),r.SHOULD_ROTATE_PARTICLES=r[t(303)]||!!Math.max(e[t(267)].angle,e[t(267)].angleSpread),r.SHOULD_WIGGLE_PARTICLES=r[t(345)]||!!Math[t(444)](e[t(535)][t(368)],e[t(535)][t(513)]);this[t(404)][t(482)]=!0},f[c(235)][c(422)][c(609)]=function(){const t=c;let e,i,n=this.attributes,r=this[t(469)],o=r[t(247)];for(const s in n)n[t(395)](s)&&(e=n[s],i=o[s],i?i[t(518)]=e[t(224)][t(518)]:r.setAttribute(s,e[t(520)]),e[t(520)][t(482)]=!0);this.geometry[t(214)](0,this[t(464)])},f[c(235)].prototype[c(376)]=function(t){const e=c;if(t instanceof f[e(479)]==!1)return void console[e(498)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this.emitterIDs.indexOf(t[e(416)])>-1)return void console[e(498)](e(372));if(null!==t.group)return void console[e(498)](e(288));const i=this.attributes,n=this[e(464)],r=n+t[e(464)];this[e(464)]=r,null!==this[e(575)]&&this[e(464)]>this.maxParticleCount&&console[e(194)](e(289),this[e(464)],e(544),this[e(575)]),t[e(316)](t[e(590)][e(562)]+t.maxAge[e(245)]),t[e(521)](this[e(571)]),t._setAttributeOffset(n),t[e(496)]=this,t[e(247)]=this[e(247)];for(const o in i)i[e(395)](o)&&i[o][e(620)](null!==this[e(575)]?this[e(575)]:this[e(464)]);for(let o=n;o<r;++o)t._assignPositionValue(o),t[e(543)](o,e(334)),t[e(543)](o,e(488)),t[e(552)](o,"opacity"),t[e(552)](o,e(489)),t[e(347)](o),t[e(249)](o),t._assignParamsValue(o),t._assignColorValue(o);return this._applyAttributesToGeometry(),this[e(207)].push(t),this.emitterIDs[e(547)](t[e(416)]),this[e(455)](t),this.material.needsUpdate=!0,this[e(469)].needsUpdate=!0,this._attributesNeedRefresh=!0,this},f[c(235)][c(422)][c(418)]=function(t){const e=c,i=this[e(527)][e(230)](t[e(416)]);if(t instanceof f[e(479)]==!1)return void console[e(498)](e(369),t);if(-1===i)return void console[e(498)](e(366));const n=t[e(242)],r=n+t[e(464)],o=this[e(247)].params[e(224)];for(let s=n;s<r;++s)o[e(518)][4*s]=0,o[e(518)][4*s+1]=0;this[e(207)][e(510)](i,1),this[e(527)][e(510)](i,1);for(const s in this[e(247)])this[e(247)][e(395)](s)&&this.attributes[s][e(510)](n,r);this[e(464)]-=t[e(464)],t[e(313)](),this._attributesNeedRefresh=!0},f[c(235)][c(422)][c(191)]=function(){const t=c,e=this[t(512)],i=this[t(218)];if(e.length)return e[t(626)]();if(i){const e=new(f[t(479)])(this[t(231)]);return this[t(376)](e),e}return null},f[c(235)][c(422)].releaseIntoPool=function(t){const e=c;if(t instanceof f[e(479)]!=!1)return t.reset(),this._pool[e(524)](t),this;console.error(e(519),t)},f.Group[c(422)][c(352)]=function(){return this._pool},f[c(235)][c(422)][c(344)]=function(t,e,i){const n=c;let r;this[n(231)]=e,this._createNewWhenPoolEmpty=!!i;for(let o=0;o<t;++o)r=Array[n(484)](e)?new f.Emitter(e[o]):new f.Emitter(e),this.addEmitter(r),this.releaseIntoPool(r);return this},f.Group[c(422)][c(241)]=function(t){const i=c,n=this[i(191)](),r=this;if(null!==n)return t instanceof e[i(310)]&&(n[i(434)][i(368)][i(295)](t),n[i(434)][i(368)]=n[i(434)][i(368)]),n[i(349)](),setTimeout((()=>{const t=i;n[t(486)](),r[t(367)](n)}),1e3*Math[i(444)](n[i(223)],n[i(590)][i(368)]+n[i(590)][i(513)])),this;console[i(501)](i(572))},f[c(235)][c(422)].triggerPoolEmitter=function(t,e){const i=c;if(typeof t===i(266)&&t>1)for(let n=0;n<t;++n)this._triggerSingleEmitter(e);else this[i(241)](e);return this},f.Group[c(422)]._updateUniforms=function(t){const e=c;this[e(153)].runTime[e(368)]+=t,this.uniforms[e(529)].value=t},f[c(235)][c(422)]._resetBufferRanges=function(){const t=c;let e=this[t(571)],i=this[t(517)]-1,n=this[t(247)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},f[c(235)].prototype[c(409)]=function(t){const e=c;let i,n,r,o=this[e(571)],s=this[e(517)]-1,a=this[e(247)],h=t[e(320)];for(;s>=0;--s)i=o[s],n=h[i],r=a[i],r[e(472)](n[e(200)],n[e(444)]),r[e(328)]()},f.Group[c(422)][c(359)]=function(t){const e=c;var i=this.emitters,n=i[e(483)],r=t||this[e(204)],o=this[e(571)],s=this[e(247)];if(this[e(491)](r),this[e(330)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(178)]){for(var a,h=0;h<n;++h)(a=i[h])[e(359)](r),this._updateBuffers(a);if(!0===this[e(178)]){for(h=this[e(517)]-1;h>=0;--h)s[o[h]][e(467)]();this[e(178)]=!1}if(!0===this._attributesNeedRefresh){for(h=this[e(517)]-1;h>=0;--h)s[o[h]][e(514)]();this[e(503)]=!1,this[e(178)]=!0}}},f[c(235)][c(422)][c(197)]=function(){const t=c;return this[t(469)][t(197)](),this[t(404)].dispose(),this},f.Emitter=function(t){const i=c,r=f[i(456)],o=r[i(323)],s=f[i(160)];(t=r[i(246)](t,o.OBJECT,{}))[i(434)]=r[i(246)](t.position,o[i(371)],{}),t.velocity=r[i(246)](t.velocity,o[i(371)],{}),t[i(488)]=r.ensureTypedArg(t.acceleration,o[i(371)],{}),t[i(441)]=r[i(246)](t[i(441)],o.OBJECT,{}),t[i(625)]=r[i(246)](t.drag,o[i(371)],{}),t[i(267)]=r[i(246)](t[i(267)],o[i(371)],{}),t[i(545)]=r[i(246)](t[i(545)],o[i(371)],{}),t[i(252)]=r[i(246)](t[i(252)],o[i(371)],{}),t[i(489)]=r.ensureTypedArg(t[i(489)],o.OBJECT,{}),t[i(443)]=r[i(246)](t[i(443)],o.OBJECT,{}),t[i(535)]=r.ensureTypedArg(t[i(535)],o[i(371)],{}),t.maxAge=r[i(246)](t[i(590)],o.OBJECT,{}),t[i(453)]&&console.warn(i(600)),this[i(416)]=e[i(203)][i(525)](),this[i(300)]=r.ensureTypedArg(t[i(300)],o[i(619)],f.distributions[i(531)]),this[i(434)]={_value:r[i(315)](t[i(434)][i(368)],e[i(310)],new(e[i(310)])),_spread:r[i(315)](t[i(434)][i(513)],e[i(310)],new(e[i(310)])),_spreadClamp:r[i(315)](t.position[i(365)],n,new(e[i(310)])),_distribution:r[i(246)](t.position[i(429)],o[i(619)],this[i(300)]),_randomise:r[i(246)](t[i(434)].randomise,o.BOOLEAN,!1),_radius:r[i(246)](t.position.radius,o[i(619)],10),_radiusScale:r[i(315)](t[i(434)][i(414)],n,new(e[i(310)])(1,1,1)),_distributionClamp:r[i(246)](t[i(434)][i(284)],o[i(619)],0)},this[i(334)]={_value:r.ensureInstanceOf(t[i(334)][i(368)],n,new(e[i(310)])),_spread:r[i(315)](t[i(334)].spread,n,new(e[i(310)])),_distribution:r[i(246)](t.velocity[i(429)],o[i(619)],this.type),_randomise:r[i(246)](t[i(434)].randomise,o[i(431)],!1)},this[i(488)]={_value:r.ensureInstanceOf(t[i(488)][i(368)],e[i(310)],new n),_spread:r[i(315)](t.acceleration.spread,e[i(310)],new(e[i(310)])),_distribution:r.ensureTypedArg(t.acceleration.distribution,o[i(619)],this[i(300)]),_randomise:r.ensureTypedArg(t[i(434)][i(282)],o.BOOLEAN,!1)},this[i(625)]={_value:r[i(246)](t[i(625)].value,o.NUMBER,0),_spread:r[i(246)](t.drag[i(513)],o.NUMBER,0),_randomise:r[i(246)](t.position.randomise,o[i(431)],!1)},this[i(535)]={_value:r.ensureTypedArg(t[i(535)][i(368)],o[i(619)],0),_spread:r[i(246)](t.wiggle.spread,o[i(619)],0)},this[i(267)]={_axis:r[i(315)](t[i(267)][i(170)],n,new(e[i(310)])(0,1,0)),_axisSpread:r[i(315)](t[i(267)][i(500)],e[i(310)],new(e[i(310)])),_angle:r.ensureTypedArg(t[i(267)][i(443)],o[i(619)],0),_angleSpread:r.ensureTypedArg(t[i(267)][i(471)],o.NUMBER,0),_static:r[i(246)](t[i(267)].static,o[i(431)],!1),_center:r[i(315)](t[i(267)][i(373)],n,this[i(434)][i(562)][i(354)]()),_randomise:r[i(246)](t[i(434)][i(282)],o[i(431)],!1)},this.maxAge={_value:r.ensureTypedArg(t[i(590)][i(368)],o[i(619)],2),_spread:r[i(246)](t[i(590)][i(513)],o[i(619)],0)},this[i(545)]={_value:r[i(465)](t[i(545)][i(368)],e[i(301)],new(e[i(301)])),_spread:r[i(465)](t.color[i(513)],e[i(310)],new(e[i(310)])),_randomise:r[i(246)](t[i(434)][i(282)],o.BOOLEAN,!1)},this[i(252)]={_value:r[i(205)](t.opacity.value,o[i(619)],1),_spread:r[i(205)](t[i(252)][i(513)],o[i(619)],0),_randomise:r[i(246)](t[i(434)][i(282)],o.BOOLEAN,!1)},this[i(489)]={_value:r[i(205)](t[i(489)][i(368)],o[i(619)],1),_spread:r.ensureArrayTypedArg(t[i(489)].spread,o[i(619)],0),_randomise:r[i(246)](t[i(434)][i(282)],o[i(431)],!1)},this[i(443)]={_value:r.ensureArrayTypedArg(t[i(443)].value,o[i(619)],0),_spread:r.ensureArrayTypedArg(t[i(443)][i(513)],o[i(619)],0),_randomise:r[i(246)](t.position.randomise,o[i(431)],!1)},this[i(464)]=r[i(246)](t.particleCount,o[i(619)],100),this[i(223)]=r[i(246)](t[i(223)],o[i(619)],null),this[i(159)]=r.ensureTypedArg(t[i(159)],o[i(431)],!1),this[i(356)]=r[i(246)](t.activeMultiplier,o.NUMBER,1),this.direction=r.ensureTypedArg(t[i(477)],o[i(619)],1),this.alive=r[i(246)](t[i(265)],o[i(431)],!0),this[i(221)]=0,this[i(196)]=0,this[i(242)]=0,this[i(322)]=0,this[i(177)]=0,this[i(193)]=0,this.group=null,this[i(247)]=null,this[i(408)]=null,this[i(548)]={position:r.ensureTypedArg(t.position[i(282)],o[i(431)],!1)||r[i(246)](t.radius[i(282)],o[i(431)],!1),velocity:r[i(246)](t[i(334)][i(282)],o.BOOLEAN,!1),acceleration:r[i(246)](t.acceleration[i(282)],o[i(431)],!1)||r[i(246)](t[i(625)][i(282)],o[i(431)],!1),rotation:r[i(246)](t[i(267)][i(282)],o[i(431)],!1),rotationCenter:r[i(246)](t[i(267)][i(282)],o[i(431)],!1),size:r.ensureTypedArg(t[i(489)][i(282)],o[i(431)],!1),color:r[i(246)](t[i(545)][i(282)],o[i(431)],!1),opacity:r.ensureTypedArg(t.opacity[i(282)],o[i(431)],!1),angle:r.ensureTypedArg(t[i(443)].randomise,o[i(431)],!1)},this.updateFlags={},this[i(181)]={},this[i(238)]={maxAge:i(237),position:i(434),velocity:"velocity",acceleration:"acceleration",drag:"acceleration",wiggle:"params",rotation:i(267),size:"size",color:i(545),opacity:i(252),angle:i(443)};for(const e in this[i(238)])this.updateMap.hasOwnProperty(e)&&(this[i(181)][this.updateMap[e]]=0,this[i(318)][this.updateMap[e]]=!1,this[i(437)](this[e],e));this[i(320)]={},this[i(571)]=null,this[i(517)]=0,r[i(502)](this[i(545)],s,s),r[i(502)](this[i(252)],s,s),r[i(502)](this[i(489)],s,s),r[i(502)](this.angle,s,s)},f[c(479)].constructor=f.Emitter,f[c(479)].prototype[c(437)]=function(t,e){const i=c,n=this;for(const r in t)if(t[i(395)](r)){const o=r.replace("_","");Object[i(188)](t,o,{get:function(t){return function(){return this[t]}}(r),set:function(t){return function(i){const r=h,o=n[r(238)][e],s=this[t],a=f.valueOverLifetimeLength;"_rotationCenter"===t?(n[r(318)][r(504)]=!0,n[r(181)].rotationCenter=0):"_randomise"===t?n.resetFlags[o]=i:(n[r(318)][o]=!0,n[r(181)][o]=0),n.group._updateDefines(),this[t]=i,Array[r(484)](s)&&f[r(456)][r(502)](n[e],a,a)}}(r)})}},f[c(479)].prototype[c(521)]=function(t){const e=c;this[e(571)]=t,this[e(517)]=t[e(483)];for(let i=this[e(517)]-1;i>=0;--i)this[e(320)][t[i]]={min:Number[e(405)],max:Number[e(530)]}},f[c(479)][c(422)][c(316)]=function(t){const e=c,i=this[e(464)];this.duration?this.particlesPerSecond=i/(t<this[e(223)]?t:this[e(223)]):this[e(221)]=i/t},f[c(479)][c(422)][c(324)]=function(t){const e=c;this[e(242)]=t,this[e(196)]=t,this.activationEnd=t+this[e(464)]},f.Emitter[c(422)][c(466)]=function(t,e){const i=c;switch(t){case i(434):this[i(615)](e);break;case i(334):case i(488):this[i(543)](e,t);break;case"size":case i(252):this[i(552)](e,t);break;case i(443):this[i(347)](e);break;case i(237):this[i(553)](e);break;case"rotation":this[i(249)](e);break;case i(545):this[i(578)](e)}},f[c(479)][c(422)][c(615)]=function(t){const e=c,i=f[e(487)],n=f[e(456)],r=this[e(434)],o=this.attributes.position,s=r[e(562)],a=r[e(245)];switch(r[e(576)]){case i[e(531)]:n.randomVector3(o,t,s,a,r._spreadClamp);break;case i[e(622)]:n[e(538)](o,t,s,r._radius,r[e(245)].x,r[e(468)],r[e(308)].x,r[e(435)]||this[e(464)]);break;case i[e(392)]:n[e(179)](o,t,s,r._radius,r[e(245)].x,r._radiusScale,r[e(308)].x);break;case i[e(383)]:n.randomVector3OnLine(o,t,s,a)}},f.Emitter[c(422)][c(543)]=function(t,e){const i=c;let n,r,o,s,a,h=f[i(487)],l=f[i(456)],u=this[e],p=u[i(562)],d=u._spread;switch(u[i(576)]){case h.BOX:l.randomVector3(this[i(247)][e],t,p,d);break;case h[i(622)]:n=this[i(247)][i(434)][i(224)].array,a=3*t,r=n[a],o=n[a+1],s=n[a+2],l[i(292)](this.attributes[e],t,r,o,s,this.position[i(562)],u._value.x,u[i(245)].x);break;case h.DISC:n=this.attributes[i(434)][i(224)][i(518)],a=3*t,r=n[a],o=n[a+1],s=n[a+2],l.randomDirectionVector3OnDisc(this.attributes[e],t,r,o,s,this[i(434)][i(562)],u[i(562)].x,u[i(245)].x);break;case h.LINE:l[i(539)](this.attributes[e],t,p,d)}if("acceleration"===e){const e=l.clamp(l[i(415)](this[i(625)][i(562)],this[i(625)][i(245)]),0,1);this[i(247)][i(488)][i(224)][i(518)][4*t+3]=e}},f[c(479)][c(422)]._assignAbsLifetimeValue=function(t,e){const i=c;let n,r=this.attributes[e][i(224)],o=this[e],s=f.utils;s[i(361)](o[i(562)])&&s[i(361)](o[i(245)])?(n=Math[i(213)](s[i(415)](o._value[0],o[i(245)][0])),r[i(331)](t,n,n,n,n)):r.setVec4Components(t,Math.abs(s[i(415)](o[i(562)][0],o[i(245)][0])),Math[i(213)](s.randomFloat(o[i(562)][1],o[i(245)][1])),Math[i(213)](s[i(415)](o[i(562)][2],o._spread[2])),Math.abs(s[i(415)](o[i(562)][3],o[i(245)][3])))},f[c(479)][c(422)][c(347)]=function(t){const e=c;let i,n=this[e(247)].angle[e(224)],r=this[e(443)],o=f[e(456)];o.arrayValuesAreEqual(r[e(562)])&&o[e(361)](r[e(245)])?(i=o[e(415)](r._value[0],r[e(245)][0]),n[e(331)](t,i,i,i,i)):n[e(331)](t,o.randomFloat(r._value[0],r[e(245)][0]),o[e(415)](r[e(562)][1],r[e(245)][1]),o[e(415)](r[e(562)][2],r[e(245)][2]),o[e(415)](r[e(562)][3],r[e(245)][3]))},f[c(479)].prototype[c(553)]=function(t){const e=c;this[e(247)][e(237)].typedArray[e(331)](t,this.isStatic?1:0,0,Math[e(213)](f[e(456)].randomFloat(this[e(590)]._value,this[e(590)][e(245)])),f.utils[e(415)](this.wiggle[e(562)],this[e(535)][e(245)]))},f[c(479)][c(422)][c(249)]=function(t){const e=c;this.attributes[e(267)].typedArray[e(382)](t,f[e(456)][e(621)](this.rotation._axis,this.rotation._axisSpread),f[e(456)][e(415)](this[e(267)][e(604)],this[e(267)][e(574)]),this.rotation[e(397)]?0:1),this[e(247)][e(504)][e(224)].setVec3(t,this[e(267)][e(573)])},f[c(479)][c(422)][c(578)]=function(t){const e=c;f.utils[e(326)](this[e(247)][e(545)],t,this.color._value,this[e(545)][e(245)])},f.Emitter[c(422)]._resetParticle=function(t){const e=c;let i,n,r=this[e(548)],o=this[e(318)],s=this.updateCounts,a=this[e(571)];for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=o[i],!0!==r[i]&&!0!==n||(this[e(466)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&s[i]===this[e(464)]?(o[i]=!1,s[i]=0):1==n&&++s[i])},f[c(479)][c(422)]._updateAttributeUpdateRange=function(t,e){const i=c,n=this[i(320)][t];n.min=Math[i(200)](e,n[i(200)]),n[i(444)]=Math[i(444)](e,n.max)},f[c(479)][c(422)]._resetBufferRanges=function(){const t=c;let e,i=this.bufferUpdateRanges,n=this[t(261)],r=this.bufferUpdateCount-1;for(;r>=0;--r)e=n[r],i[e][t(200)]=Number.POSITIVE_INFINITY,i[e].max=Number[t(530)]},f[c(479)][c(422)][c(313)]=function(){const t=c;this.particlesPerSecond=0,this[t(242)]=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this[t(408)]=null,this[t(177)]=0},f[c(479)][c(422)][c(291)]=function(){--this[c(193)]},f.Emitter.prototype[c(567)]=function(){++this[c(193)]},f[c(479)][c(422)][c(225)]=function(t,e,i,n){const r=c;for(var o,s,a,h,l=e-1;l>=t;--l)0!==(h=i[o=4*l])&&(a=i[o+1],s=i[o+2],1===this.direction?(a+=n)>=s&&(a=0,h=0,this[r(291)]()):(a-=n)<=0&&(a=s,h=0,this[r(291)]()),i[o]=h,i[o+1]=a,this._updateAttributeUpdateRange(r(237),l))},f[c(479)].prototype._activateParticles=function(t,e,i,n){const r=c,o=this[r(477)];for(var s,a,h=t;h<e;++h)0!=i[s=4*h]&&1!==this.particleCount||(this[r(567)](),i[s]=1,this._resetParticle(h),a=n*(h-t),i[s+1]=-1===o?i[s+2]-a:a,this[r(601)](r(237),h))},f[c(479)][c(422)].tick=function(t){const e=c;if(this[e(159)])return;null===this[e(408)]&&(this[e(408)]=this[e(247)][e(237)].typedArray[e(518)]);const i=this.attributeOffset,n=i+this[e(464)],r=this[e(408)],o=this[e(221)]*this.activeMultiplier*t,s=this.activationIndex;if(this[e(330)](),this[e(225)](i,n,r,t),!1===this.alive)return void(this[e(177)]=0);if(null!==this.duration&&this.age>this.duration)return this[e(265)]=!1,void(this.age=0);const a=1===this.particleCount?s:0|s,h=Math[e(200)](a+o,this[e(581)]),l=h-this[e(196)]|0,u=l>0?t/l:0;this[e(380)](a,h,r,u),this[e(196)]+=o,this.activationIndex>n&&(this.activationIndex=i),this[e(177)]+=t},f[c(479)][c(422)][c(294)]=function(t){const e=c;if(this[e(177)]=0,this[e(265)]=!1,!0===t){const t=this[e(242)],r=t+this[e(464)],o=this.paramsArray,s=this[e(247)][e(237)][e(520)];for(var i,n=r-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;s[e(596)][e(162)]=0,s[e(596)].count=-1,s[e(482)]=!0}return this},f[c(479)][c(422)][c(349)]=function(){return this[c(265)]=!0,this},f[c(479)][c(422)].disable=function(){return this[c(265)]=!1,this},f.Emitter[c(422)].remove=function(){const t=c;return null!==this[t(496)]?this[t(496)][t(418)](this):console[t(498)](t(355)),this};const d=f;function m(t){function e(t){const i=h;if(typeof t===i(370))return function(t){}.constructor("while (true) {}")[i(240)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debugger")[i(592)](i(275)):function(){return!1}[i(163)](i(401)+i(208))[i(240)](i(594)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{d as _};

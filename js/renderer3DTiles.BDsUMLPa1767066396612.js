import{i as e,A as t}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{F as r,_ as a,K as o}from"./@tresjs.B1f7s3pS1767066396612.js";const{defineComponent:n}=await e("vue"),{unref:i,createElementVNode:s,openBlock:l,createElementBlock:u}=await e("vue"),p=["object"],{watchEffect:c}=await e("vue"),d=await e("three"),m=n({__name:"tilesMesh",setup(e){const o=new t("https://opensource.cdn.icegl.cn/3Dtiles/simpleGIS/data/tileset.json");o.errorTarget=0;o.addEventListener("load-model",({scene:e})=>{e.traverse(e=>{e.isMesh&&(e.material.side=2,e.receiveShadow=!1,e.castShadow=!1)});const t=new d.Box3,r=new d.Sphere;o.getBoundingBox(t)?(t.getCenter(o.group.position),o.group.position.multiplyScalar(-1)):o.getBoundingSphere(r)&&(o.group.position.copy(r.center),o.group.position.multiplyScalar(-1))});const{camera:n,renderer:m,sizes:v}=r();c(()=>{v.width.value&&(o.setCamera(n.value),o.setResolutionFromRenderer(n.value,m))});const{onBeforeRender:g}=a();return g(()=>{n.value&&v.width.value&&(n.value.updateMatrixWorld(),o.update())}),(e,t)=>(l(),u("TresGroup",null,[s("primitive",{object:i(o).group},null,8,p)]))}}),{defineComponent:v}=await e("vue"),{createElementVNode:g,unref:w,normalizeProps:f,guardReactiveProps:h,createVNode:B,resolveComponent:C,mergeProps:T,withCtx:S,openBlock:y,createBlock:_}=await e("vue"),{reactive:j,watchEffect:x,shallowRef:E}=await e("vue"),k=v({__name:"renderer3DTiles",setup(e){const t=j({clearColor:"#201919"}),r=j({enableDamping:!0,dampingFactor:.05}),a=E();return x(()=>{a.value&&a.value.position.set(1,2,3).multiplyScalar(40)}),(e,n)=>{const i=C("TresCanvas");return y(),_(i,T(t,{"window-size":""}),{default:S(()=>[n[0]||(n[0]=g("TresPerspectiveCamera",{position:[400,400,400],fov:60,near:.1,far:4e3},null,-1)),B(w(o),f(h(r)),null,16),n[1]||(n[1]=g("TresAmbientLight",{intensity:.5},null,-1)),g("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:a,position:[1,2,3],intensity:1.25},null,512),B(m),n[2]||(n[2]=g("TresAxesHelper",{args:[100]},null,-1))]),_:1},16)}}});export{k as default};

import{p as t,U as n,N as e,Y as r,_ as o}from"./@tresjs.C5O8roW51726740218347.js";import{_ as s}from"./index.arIZ6jB61726740218347.js";import{_ as i,aP as c,X as u,k as a,g as l,a as p,cB as f}from"./three.MbBECAu81726740218347.js";import{P as m}from"./tweakpane.yHWGBmom1726740218347.js";import{I as g,C as h,N as d,c as y,d as w,a as b}from"./three-mesh-bvh.AV9Efypw1726740218347.js";import{d as j,a4 as _,b as v,a3 as I,o as x,E as k,L as A,u as T,F as M,r as S,e as z,j as C,g as O,m as R,f as Z,al as B}from"./@vue.JNsx1iN61726740218347.js";import"./@vueuse.18lbrd2F1726740218347.js";import"./index.aPvPna3R1726740218347.js";import"./@fesjs.Dr_-7VFL1726740218347.js";import"./vue-router.PDZMxRoR1726740218347.js";import"./lodash-es.kYt-_xTG1726740218347.js";import"./@qlin.yHhFDldE1726740218347.js";import"./pinia.WcGzyH851726740218347.js";import"./@floating-ui.BPbuo5Gx1726740218347.js";import"./@juggle.7yjBMqoW1726740218347.js";import"./chalk.w3XuUwyA1726740218347.js";/* empty css                                 */import"./iconify-icon.l-H2-fnN1726740218347.js";import"./@iconify.eRzdeG3K1726740218347.js";import"./utils.QYBb4FEV1726740218347.js";import"./default.vue_vue_type_script_setup_true_lang.uR-dTxY71726740218347.js";import"./three-mesh-ui.module.xas-s3lB1726740218347.js";function E(){const t=["enabled",'{}.constructor("return this")( )',"12695931NZpDZj","action","table","pointerdown","log","gger","warn","7wuZkzA","clientX","chain","666715yswLqs","console","pointerup","firstHitOnly","input","debu","Raycaster","bind","exception","3397244cDyehc","innerHeight","error","constructor","intersectObject","20xpfnkg","1182483YcKlFC","apply","toString","init","touch","addEventListener","prototype","trace","4zabZqS","return (function() ","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","call","stateObject","test","value","9138414SapwSp","3698344fEREcU","string","clientY","pointerType","innerWidth","112369FnLYxC"];return(E=function(){return t})()}!function(t,n){const e=F,r=E();for(;;)try{if(795941===-parseInt(e(501))/1+-parseInt(e(486))/2*(-parseInt(e(478))/3)+-parseInt(e(523))/4+parseInt(e(514))/5+-parseInt(e(495))/6*(parseInt(e(511))/7)+-parseInt(e(496))/8+-parseInt(e(504))/9*(-parseInt(e(477))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[F(479)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function F(t,n){const e=E();return(F=function(t,n){return e[t-=476]})(t,n)}!function(){Y(this,(function(){const t=F,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(489),"i"),r=L(t(481));n[t(493)](r+t(513))&&e.test(r+t(518))?L():r("0")}))()}();const N=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[F(479)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();N(void 0,(function(){const t=F,n=function(){const t=F;let n;try{n=Function(t(487)+t(503)+");")()}catch(e){n=window}return n}(),e=n[t(515)]=n[t(515)]||{},r=[t(508),t(510),"info",t(525),t(522),t(506),t(485)];for(let o=0;o<r[t(488)];o++){const n=N.constructor[t(484)][t(521)](N),s=r[o],i=e[s]||n;n.__proto__=N.bind(N),n[t(480)]=i[t(480)][t(521)](i),e[s]=n}}))();function L(t){function n(t){const e=F;if(typeof t===e(497))return function(t){}[e(526)](e(490))[e(479)]("counter");1!==(""+t/t)[e(488)]||t%20==0?function(){return!0}.constructor("debu"+e(509))[e(491)](e(505)):function(){return!1}[e(526)](e(519)+e(509))[e(479)](e(492)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=V;!function(t,n){const e=V,r=D();for(;;)try{if(337924===parseInt(e(252))/1*(-parseInt(e(250))/2)+-parseInt(e(251))/3+parseInt(e(285))/4+-parseInt(e(288))/5*(-parseInt(e(259))/6)+-parseInt(e(303))/7*(parseInt(e(276))/8)+-parseInt(e(220))/9+parseInt(e(265))/10*(parseInt(e(291))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const X=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[V(245)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){X(this,(function(){const t=V,n=new RegExp(t(246)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=K(t(297));n.test(r+t(299))&&e[t(266)](r+t(240))?K():r("0")}))()}();const W=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[V(245)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();W(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function(t(221)+t(305)+");")()}catch(e){n=window}return n}(),e=n[t(231)]=n[t(231)]||{},r=[t(279),t(260),t(281),t(218),t(296),t(289),t(249)];for(let o=0;o<r[t(236)];o++){const n=W[t(213)][t(294)][t(223)](W),s=r[o],i=e[s]||n;n[t(272)]=W[t(223)](W),n[t(234)]=i.toString[t(223)](i),e[s]=n}}))();const q=["geometry",P(268)],H=[A(P(273),{args:[1,40,40]},null,-1),A(P(293),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)],$=["geometry"],U=[A(P(293),{color:P(301),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)];function V(t,n){const e=D();return(V=function(t,n){return e[t-=213]})(t,n)}function D(){const t=["toString","computeBoundsTree","length","Mesh","getX","intersectsSphere","input","addButton","raycast","action","setZ","apply","function *\\( *\\)","生成模型","setScalar","trace","8Sixcft","439068gtNTAz","92153rOlRoS","gger","invert","needsUpdate","push","attributes","model","108lXaPGl","warn","disposeBoundsTree","enabled","stateObject","containsPoint","2537530fjrybi","test","geometry","material","while (true) {}","setFromCamera","color","__proto__","TresSphereGeometry","setX","active","24PBiZRi","index","matrixWorld","log","点击按钮","info","intersectObject","debu","intersectsBox","1973988MiCxiL","getY","setY","161930VhDeeM","table","instance","11NtQVHx","setUsage","TresMeshStandardMaterial","prototype","Matrix4","exception","init","TresMesh","chain","count","#023249","counter","930734rPLOPn","applyMatrix4",'{}.constructor("return this")( )',"value","constructor","Vector3","string","position","setAttribute","error","boundsTree","705780bmQbyC","return (function() ","shapecast","bind","visible","set","getZ","point","BufferGeometry","controls","BufferAttribute","console","normal","call"];return(D=function(){return t})()}const G=j({__name:P(258),props:{controls:{}},async setup(r){const o=P;let s,j;const S=r;(()=>{const t=V;i[t(228)][t(294)][t(235)]=y,i[t(228)][t(294)][t(261)]=w,i[t(237)].prototype[t(242)]=b})();const z=([s,j]=_((()=>e(f,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,j(),s),C=new c({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),O=new Uint8Array(3*z.attributes[o(216)].count);O.fill(255);const R=new(i[o(230)])(O,3,!0);R[o(292)](u),z[o(217)](o(271),R);const Z=v(null),B=v(null),E=v(!1),Y=v(-1),N=v(.2),L=new a,{camera:X,raycaster:W}=t(),D=15/255,G=78/255,K=85/255;let J=null;I((()=>{const t=o;Z.value&&(console.log("targetMesh.value init",Z.value),Z[t(306)][t(267)].computeBoundsTree(),J=z[t(219)],((t,n,e,r,o,s)=>{const c=F;window[c(483)]("pointermove",(e=>{const r=c;t.x=e[r(512)]/window[r(500)]*2-1,t.y=-e[r(498)]/window[r(524)]*2+1,n[r(494)]=!0})),window[c(483)](c(507),(u=>{const a=c;t.x=u[a(512)]/window[a(500)]*2-1,t.y=-u.clientY/window[a(524)]*2+1,r.value=u.button;const l=new(i[a(520)]);l.setFromCamera(t,e[a(494)]),l[a(517)]=!0;const p=l[a(476)](o[a(494)],!0);n[a(494)]=!0,s[a(502)]=0===p[a(488)]}),!0),window[c(483)](c(516),(t=>{const e=c;r[e(494)]=-1,t[e(499)]===e(482)&&(n[e(494)]=!1)}),!0)})(L,E,X,Y,Z,S[t(229)][t(290)]))}));const{onLoop:Q}=n();Q((()=>{const t=o,n=z[t(277)];if(B[t(306)])if(S[t(229)].instance[t(275)]||!E[t(306)])B[t(306)].visible=!1;else{B.value.scale[t(248)](N[t(306)]),W[t(306)][t(270)](L,X[t(306)]),W.value.firstHitOnly=!0;const e=W[t(306)][t(282)](Z[t(306)],!0);if(e[t(236)]){B[t(306)][t(216)].copy(e[0][t(227)]),S[t(229)][t(290)][t(262)]=!1,B.value[t(224)]=!0;const r=new(i[t(295)]);r.copy(Z.value[t(278)])[t(254)]();const o=new l;o.center.copy(B[t(306)][t(216)])[t(304)](r),o.radius=100*N[t(306)];const s=[],c=new(i[t(214)]);if(null==J||J[t(222)]({intersectsBounds:n=>{const e=t,r=o[e(284)](n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(c[e(225)](0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(264)](c))return g;return h}return r?g:d},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(239)](o)){const t=3*e;s[i(256)](t,t+1,t+2)}return!1}}),0===Y[t(306)]||2===Y[t(306)]){let e=1,r=1,o=1;0===Y.value&&(e=D,r=G,o=K);for(let i=0,c=s[t(236)];i<c;i++){const c=n[t(238)](s[i]);R[t(274)](c,e),R[t(287)](c,r),R[t(244)](c,o)}R[t(255)]=!0}}else B[t(306)][t(224)]=!1,S.controls[t(290)][t(262)]=!0}}));const tt=(new m)[o(241)]({title:o(280),label:o(247)}),nt=new(i[o(228)]);return tt.on("click",(()=>{const t=o,n=[],e=[];for(let o=0;o<R[t(300)];o++)R[t(238)](o)===D&&R[t(286)](o)===G&&R[t(226)](o)===K&&(n[t(256)](z[t(257)][t(216)][t(238)](o),z.attributes[t(216)][t(286)](o),z[t(257)][t(216)][t(226)](o)),e[t(256)](z[t(257)][t(232)].getX(o),z[t(257)][t(232)].getY(o),z.attributes[t(232)][t(226)](o)));const r=new Float32Array(n);nt.setAttribute(t(216),new(i[t(230)])(r,3)),nt.setAttribute(t(232),new p(r,3))})),(t,n)=>{const e=o;return x(),k(M,null,[A(e(298),{ref_key:"targetMesh",ref:Z,geometry:T(z),scale:.005,material:T(C)},null,8,q),A(e(298),{ref_key:"brushMesh",ref:B,visible:!1},H,512),A(e(298),{geometry:T(nt),position:[-2,-2,2],scale:.005},U,8,$)],64)}}});function K(t){function n(t){const e=V;if(typeof t===e(215))return function(t){}[e(213)](e(269)).apply(e(302));1!==(""+t/t)[e(236)]||t%20==0?function(){return!0}[e(213)](e(283)+e(253))[e(233)](e(243)):function(){return!1}[e(213)](e(283)+e(253))[e(245)](e(263)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const J=tt;!function(t,n){const e=tt,r=nt();for(;;)try{if(179505===-parseInt(e(485))/1*(parseInt(e(482))/2)+-parseInt(e(501))/3+-parseInt(e(491))/4*(-parseInt(e(517))/5)+parseInt(e(522))/6*(-parseInt(e(515))/7)+parseInt(e(514))/8+-parseInt(e(510))/9*(parseInt(e(508))/10)+-parseInt(e(499))/11*(-parseInt(e(503))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[tt(523)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function tt(t,n){const e=nt();return(tt=function(t,n){return e[t-=479]})(t,n)}function nt(){const t=["table","error","TresPerspectiveCamera","init","log","stateObject","gger","55kYNveD","string","291105yONHgr","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","524220XWSCae","TresCanvas","info","test","console","433840ehJKKN","pos-y.jpg","36dwmtbY","trace","chain","__proto__","875496fvouYV","168wVpOWw","warn","150ohWKNe","pos-z.jpg","neg-y.jpg","constructor","pos-x.jpg","9408tcMEqX","apply","toString","debu","counter","while (true) {}","12uSrcWr","value","bind","19529jMgOmu","prototype","action","controls","call","length","36936MGmTHu"];return(nt=function(){return t})()}!function(){Q(this,(function(){const t=tt,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=it(t(495));n[t(506)](r+t(512))&&e.test(r+"input")?it():r("0")}))()}();const et=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[tt(523)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();et(void 0,(function(){const t=tt,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(507)]=n.console||{},r=[t(496),t(516),t(505),t(493),"exception",t(492),t(511)];for(let o=0;o<r[t(490)];o++){const n=et.constructor[t(486)][t(484)](et),s=r[o],i=e[s]||n;n[t(513)]=et.bind(et),n[t(524)]=i[t(524)][t(484)](i),e[s]=n}}))();const rt=A(J(494),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1),ot=A("TresAmbientLight",{intensity:1},null,-1),st=j({__name:"collectTriangles",setup(t){const n=S({clearColor:"#999999",antialias:!0}),e=S({autoRotate:!1}),i=v(null);return(t,c)=>{const u=tt,a=z(u(504));return x(),k(M,null,[C(T(s)),C(a,R(n,{"window-size":""}),{default:O((()=>[rt,C(T(r),R({ref_key:"controlsRef",ref:i},e),null,16),ot,(x(),Z(B,null,{default:O((()=>[C(G,{controls:i[u(483)]},null,8,[u(488)])])),_:1})),(x(),Z(B,null,{default:O((()=>[C(T(o),{background:!1,files:[u(521),"neg-x.jpg",u(509),u(519),u(518),"neg-z.jpg"],path:u(502)})])),_:1}))])),_:1},16)],64)}}});function it(t){function n(t){const e=tt;if(typeof t===e(500))return function(t){}.constructor(e(481))[e(523)](e(480));1!==(""+t/t)[e(490)]||t%20==0?function(){return!0}.constructor("debu"+e(498))[e(489)](e(487)):function(){return!1}[e(520)](e(479)+e(498))[e(523)](e(497)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{st as default};

import{b$ as t,a3 as n,C as e,k as r}from"./three.-yu4716U1728613889935.js";import{z as o}from"./@tresjs.BSMy0VpY1728613889935.js";import{R as a}from"./all.three.McWlzrjQ1728613889935.js";import{d as c,b as i,a4 as s,a3 as u,o as l,E as f,L as p,m,u as d}from"./@vue.JNsx1iN61728613889935.js";!function(t,n){const e=x,r=g();for(;;)try{if(410076===-parseInt(e(166))/1*(parseInt(e(181))/2)+parseInt(e(170))/3+parseInt(e(194))/4*(parseInt(e(206))/5)+-parseInt(e(173))/6*(parseInt(e(176))/7)+-parseInt(e(179))/8+-parseInt(e(207))/9*(parseInt(e(185))/10)+-parseInt(e(203))/11*(-parseInt(e(193))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(199)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","140lkPKiB","gger","stateObject","toString","2732980xaVOGH","log","error","while (true) {}","debu","call","table","length","12clkvLG","13548XsGxuS","#include <project_vertex>","warn",'{}.constructor("return this")( )',"__proto__","apply","info","string","replace","22889339QkSuKf","exception","vertexShader","25buWfiH","9dyNRvf","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","function *\\( *\\)","bind","counter","return (function() ","5413WSfAoT","test","fragmentShader","void main() {","1662579suWdAx","console","input","6HjENbe","constructor","chain","5457893aHrRNB","#include <emissivemap_fragment>","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","6479952lIpkFj"];return(g=function(){return t})()}!function(){v(this,(function(){const t=x,n=new RegExp(t(162)),e=new RegExp(t(180),"i"),r=y("init");n[t(167)](r+t(175))&&e[t(167)](r+t(172))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(199)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=g();return(x=function(t,n){return e[t-=162]})(t,n)}h(void 0,(function(){const t=x;let n;try{n=Function(t(165)+t(197)+");")()}catch(o){n=window}const e=n[t(171)]=n.console||{},r=[t(186),t(196),t(200),t(187),t(204),t(191),"trace"];for(let a=0;a<r.length;a++){const n=h[t(174)].prototype[t(163)](h),o=r[a],c=e[o]||n;n[t(198)]=h.bind(h),n[t(184)]=c[t(184)][t(163)](c),e[o]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(201))return function(t){}.constructor(e(188))[e(199)](e(164));1!==(""+t/t)[e(192)]||t%20==0?function(){return!0}[e(174)](e(189)+e(182))[e(190)]("action"):function(){return!1}[e(174)](e(189)+e(182)).apply(e(183)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=C;function I(){const t=["exception","162312iRboVV","value","9143424BMHTLH","uniforms","#444","input","textureMatrix","405jDFJdl","chain","reflectorDiffuse","assign","gger","12NmANVt","init","color","3863335satHLB","reflectMap","log","607637hIpTmt","while (true) {}","1132894dnRAeK","22QgBBaP","update","call","renderTargetUniform",'{}.constructor("return this")( )',"length","console","stateObject","mixStrength","object","error","channel","mirror","warn","toString","counter","4089700XHfCgU","TresMesh","primitive","debu","string","attributes","#ffffff","return (function() ","apply","function *\\( *\\)","TresMeshStandardMaterial","visible","tmsmRef","__proto__","rotation-x","test","constructor","onBeforeRender","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uv1","300825HnttRN","add","textureMatrixUniform","36EGuQyU","2AWhvrp","prototype","showGridHelper"];return(I=function(){return t})()}!function(t,n){const e=C,r=I();for(;;)try{if(512742===-parseInt(e(205))/1*(parseInt(e(183))/2)+-parseInt(e(179))/3*(-parseInt(e(182))/4)+-parseInt(e(202))/5+-parseInt(e(199))/6*(-parseInt(e(207))/7)+parseInt(e(187))/8*(-parseInt(e(194))/9)+parseInt(e(224))/10*(parseInt(e(208))/11)+parseInt(e(189))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(167)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=C,n=new RegExp(t(168)),e=new RegExp(t(177),"i"),r=R(t(200));n[t(174)](r+t(195))&&e[t(174)](r+t(192))?R():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(167)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=I();return(C=function(t,n){return e[t-=160]})(t,n)}w(void 0,(function(){const t=C;let n;try{n=Function(t(166)+t(212)+");")()}catch(o){n=window}const e=n.console=n[t(214)]||{},r=[t(204),t(221),"info",t(218),t(186),"table","trace"];for(let a=0;a<r.length;a++){const n=w[t(175)][t(184)].bind(w),o=r[a],c=e[o]||n;n[t(172)]=w.bind(w),n[t(222)]=c.toString.bind(c),e[o]=n}}))();const M=[b(173)],S=[b(217),b(170)],j=c({__name:b(196),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(165)}},async setup(c){const v=b;let g,h;const y=c,I=new t(9.5,10),_=i(),w=i(),C=i(),j=new a,R={mirror:{value:y[v(220)]},mixStrength:{value:y[v(216)]}},E=([g,h]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,h(),g);for(var T=0;T<3;T++)E[T].wrapS=n,E[T].wrapT=n,E[T].repeat.set(16,16);const z={color:new e(v(191)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},H=t=>{const n=v;t.uniforms[n(203)]=j[n(211)],t[n(190)][n(193)]=j[n(181)],t[n(190)]=Object[n(197)](t[n(190)],R),(t=>{const n=x;t[n(205)]=t[n(205)].replace(n(169),n(178)),t[n(205)]=t[n(205)][n(202)](n(195),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=x;t[n(168)]=t.fragmentShader[n(202)](n(169),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.fragmentShader=t.fragmentShader[n(202)](n(177),n(208))})(t)};return u((()=>{const t=v;_.value&&(_.value[t(164)][t(178)]=_[t(188)][t(164)].uv),C[t(188)]&&(C[t(188)].aoMap[t(219)]=1,C.value.onBeforeCompile=H),w.value&&(w[t(188)][t(180)](j),w[t(188)][t(176)]=(n,e,r)=>{j[t(209)](n,e,r)}),y[t(201)]&&C[t(188)]&&(C[t(188)][t(201)]=new e(y.color))})),(t,n)=>{const e=v;return l(),f("TresGroup",null,[p(e(160),{ref_key:"tmRef",ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:"tpgRef",ref:_,args:[10,10]},null,512),p(e(169),m({ref_key:e(171),ref:C},z),null,16)],8,M),p(e(161),{object:d(I),visible:t[e(185)]},null,8,S)])}}});function R(t){function n(t){const e=C;if(typeof t===e(163))return function(t){}[e(175)](e(206))[e(167)](e(223));1!==(""+t/t)[e(213)]||t%20==0?function(){return!0}[e(175)]("debu"+e(198))[e(210)]("action"):function(){return!1}.constructor(e(162)+"gger").apply(e(215)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

import"./@fesjs.5gYNbdbo1742297875262.js";import{_ as t}from"./jszip.TRpfdbXn1742297875262.js";import{F as n}from"./file-saver.qw9LmheO1742297875262.js";import{_ as e}from"./three.N4lg2KsY1742297875262.js";const s=i;!function(t,n){const e=i,s=r();for(;;)try{if(593124===parseInt(e(298))/1+-parseInt(e(299))/2+-parseInt(e(291))/3+parseInt(e(241))/4+parseInt(e(235))/5*(-parseInt(e(284))/6)+-parseInt(e(329))/7+parseInt(e(328))/8)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function r(){const t=["string","579636Hilvip","720910DlcrpK","scene","file","startsWith","url:images/","image/gif",".json","data","data:image/png;base64,","forEach","input","length","geometries","url:geometries/","catch","Cache","endsWith","data:image/PNG;base64,","toLowerCase","JPEG","setResponseType","image/webp","uuid","exception","error","push","apply","Loader","async","20424512VbasyH","7389228VkyxRZ","type","slice","image/bmp","debu","61505wLXvix","call","substring","data:image/GIF;base64,","loadAsync","onloadend","2315464lrnKJr","data:image/WEBP;base64,",";base64,","result","then","stateObject","split","table","url:","toString","get","images","blob","constructor","data:image/webp;base64,","folder","BufferGeometry","image/png","init","onerror","function *\\( *\\)","base64","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","action","warn","trace","data:image/jpeg;base64,","data:","gger","GIF","PNG","test","非标准文件：不存在 app.json","stringify","log","parse","files","data:image/gif;base64,","FileLoader","data:image/","app.json","application/octet-stream","498ypcPUq","chain","data:image/JPEG;base64,","enabled","WEBP","load","bind","2044200GFgWrx","pop","url","__proto__","info","manager"];return(r=function(){return t})()}!function(){o(this,(function(){const t=i,n=new RegExp(t(261)),e=new RegExp(t(263),"i"),s=b(t(259));n.test(s+t(285))&&e[t(273)](s+t(309))?b():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(325)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=r();return(i=function(t,n){return e[t-=234]})(t,n)}async function c(t){const n=s,o=new(e[n(280)]);return new Promise(((e,s)=>{o[n(289)](t,(t=>e(JSON.parse(t))),void 0,(t=>s(t)))}))}a(void 0,(function(){const t=i,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n.console=n[t(264)]||{},s=[t(276),t(266),t(295),t(323),t(322),t(248),t(267)];for(let o=0;o<s[t(310)];o++){const n=a.constructor.prototype.bind(a),r=s[o],i=e[r]||n;n[t(294)]=a[t(290)](a),n[t(250)]=i[t(250)].bind(i),e[r]=n}}))(),e[s(314)][s(287)]=!0;class u extends e[s(326)]{constructor(t){super(t)}[s(289)](t,n,o,r){const a=s,i=new(e[a(280)])(this[a(296)]);i[a(319)]("json"),i[a(289)](t,(t=>n&&n(t)),o,r)}}async function l(t){const n=s,o=new(e[n(280)]);return new Promise(((e,r)=>{const a=n;o.setResponseType("blob"),o[a(289)](t,(n=>{const o=a,c=new FileReader;c.onloadend=()=>{const n=i,o=function(t){const n=s,e=t[n(247)](".")[n(292)]()[n(317)]();return{jpg:"image/jpeg",jpeg:"image/jpeg",png:n(258),gif:n(304),bmp:n(332),webp:n(320)}[e]||n(283)}(t),r=c[n(244)][n(247)](",")[1];e(n(269)+o+n(243)+r)},c[o(260)]=t=>{r(t)},c.readAsDataURL(n)}),void 0,(t=>r(t)))}))}class p extends e[s(326)]{constructor(t){super(t)}[s(289)](n,o,r,a){const i=s,c=new(e[i(280)])(this[i(296)]);c[i(319)](i(253)),c[i(289)](n,(async n=>{const e=i;try{const s=await t[e(239)](n);o&&o(s)}catch(s){a&&a(s)}}),r,a)}}const f=t=>{const n=s,e=t[n(237)](0,15),o=n(268),r=n(286),a=n(307),i=n(316),c=n(279),u=n(238),l=n(255),p=n(242);return o[n(302)](e)||r[n(302)](e)?n(318):a[n(302)](e)||i[n(302)](e)?n(272):c[n(302)](e)||u.startsWith(e)?n(271):l[n(302)](e||p[n(302)](e))?n(288):"Unknown"},g=e=>{const o=s,r=[];e[o(300)][o(311)]&&e[o(300)].geometries.forEach((t=>{const n=o;t[n(330)]===n(257)&&(r[n(324)]({uuid:t[n(321)],data:t[n(306)]}),t[n(306)]=n(312)+t[n(321)]+".json")}));const a=[];e[o(300)][o(252)]&&e[o(300)][o(252)].forEach((t=>{const n=o;t[n(293)]&&(a[n(324)]({uuid:t.uuid,url:t.url}),t[n(293)][n(330)]?t[n(293)]=n(303)+t.uuid+"."+t[n(293)][n(330)]+".json":t[n(293)]="url:images/"+t[n(321)]+"."+f(t.url))}));const i=new t;if(r[o(310)]){const t=i.folder(o(311));r[o(308)]((n=>{const e=o;t.file(n.uuid+e(305),JSON[e(275)](n[e(306)]))}))}if(a[o(310)]){const t=i[o(256)](o(252));a[o(308)]((n=>{const e=o;n.url[e(330)]?t[e(301)](n[e(321)]+"."+n[e(293)].type+e(305),JSON[e(275)](n[e(293)])):t[e(301)](n[e(321)]+"."+f(n.url),n[e(293)][e(247)](e(243))[e(292)](),{base64:!0})}))}const c=JSON.stringify(e);return i[o(301)](o(282),c),i.generateAsync({type:"blob"})[o(245)]((t=>{n.saveAs(t,"config.zip")}))},d=(t,n,e)=>{const o=s;t.geometries<=0&&t[o(252)]<=0&&e(n)},m=(n,e)=>{const o=s;let r=null;return t.loadAsync(n)[o(245)]((t=>{const n=o;t[n(278)][n(282)]?t.files[n(282)][n(327)]("string")[n(245)]((o=>{var a,i;const c=n;r=JSON[c(277)](o);const u=(t=>{var n,e;const o=s,r={geometries:0,images:0};return null==(n=t[o(300)][o(311)])||n[o(308)]((t=>{const n=o;t.data.startsWith(n(249))&&r[n(311)]++})),null==(e=t.scene.images)||e.forEach((t=>{const n=o;t.url[n(302)](n(249))&&r[n(252)]++})),r})(r);d(u,r,e),null==(a=r[c(300)][c(311)])||a[c(308)]((n=>{const s=c;n[s(306)].startsWith(s(249))&&t.files[n[s(306)][s(331)](4)][s(327)](s(297))[s(245)]((t=>{const o=s;n[o(306)]=JSON[o(277)](t),u.geometries--,d(u,r,e)}))})),null==(i=r[c(300)].images)||i.forEach((n=>{const s=c;if(n[s(293)][s(302)](s(249))){const o=n.url[s(331)](4);o[s(315)](".json")?t.files[o][s(327)](s(297))[s(245)]((t=>{const o=s;n[o(293)]=JSON.parse(t),u[o(252)]--,d(u,r,e)})):t[s(278)][o][s(327)](s(262))[s(245)]((t=>{const a=s,i=o[a(247)]("."),c=i[i[a(310)]-1].toUpperCase();n[a(293)]=a(281)+c+a(243)+t,u.images--,d(u,r,e)}))}}))})):console[n(323)](n(274))}),(t=>{console.error(n.name+": "+t.message)})),r};function b(t){function n(t){const e=i;if(typeof t===e(297))return function(t){}[e(254)]("while (true) {}")[e(325)]("counter");1!==(""+t/t)[e(310)]||t%20==0?function(){return!0}[e(254)](e(234)+e(270))[e(236)](e(265)):function(){return!1}[e(254)]("debu"+e(270)).apply(e(246)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{u as J,p as Z,l as a,g as e,f as g,m as i,c as l};

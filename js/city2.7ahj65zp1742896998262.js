import{e as n,D as e,o as t}from"./@tresjs.KzbsBNvc1742896998262.js";import{n as o,b1 as r,C as i,p as a,a$ as s,a2 as c,ab as l,aP as u,cs as f,ct as p,cu as d,cv as g}from"./three.0CcRceKb1742896998262.js";import{z as m}from"./three-custom-shader-material.IukAW29E1742896998262.js";import{r as v,i as h,s as y}from"./utils.8ZAEjuox1742896998262.js";import{b as _,a as w}from"./buildingsCustomShaderMaterial.hq-IAd4G1742896998262.js";import{d as b,a3 as x,b as S,o as I,H as j,f as C,g as z,N as O,u as k,al as E,j as P,F as U,e as A}from"./@vue.L-brCdZe1742896998262.js";import{_ as B}from"./roadLight.vue_vue_type_script_setup_true_lang.Onya8tsy1742896998262.js";import"./postprocessing.JNDZZkh81742896998262.js";import"./@vueuse.AtktgvWs1742896998262.js";import"./@fesjs.ATKJ6WD31742896998262.js";import"./vue-router.Nr9hetwf1742896998262.js";import"./lodash-es.pklfUAS51742896998262.js";import"./@qlin.o0hjOMCg1742896998262.js";import"./pinia.c7Udjcar1742896998262.js";import"./@floating-ui.HzHndBae1742896998262.js";import"./@juggle.4EyLec-41742896998262.js";import"./three-mesh-bvh.gH28GZxM1742896998262.js";var M=T;function T(n,e){var t=D();return T=function(n,e){return t[n-=285]},T(n,e)}!function(n,e){for(var t=T,o=D();;)try{if(395474===parseInt(t(298))/1+-parseInt(t(311))/2+parseInt(t(333))/3+-parseInt(t(319))/4+-parseInt(t(328))/5+parseInt(t(315))/6*(parseInt(t(326))/7)+parseInt(t(327))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();var W,R=(W=!0,function(n,e){var t=W?function(){if(e){var t=e[T(287)](n,arguments);return e=null,t}}:function(){};return W=!1,t});function D(){var n=["fragmentShader","536172HPhUlr","signalSpeed","fresnelOpacity","\n      #define STANDARD\n      varying vec3 vViewPosition;\n      #ifdef USE_TRANSMISSION\n      varying vec3 vWorldPosition;\n      #endif\n    \n      varying vec2 vUv;\n      varying vec4 vPos;\n      varying vec3 vNormalW;\n      varying vec3 vPositionW;\n\n      #include <common>\n      #include <uv_pars_vertex>\n      #include <envmap_pars_vertex>\n      #include <color_pars_vertex>\n      #include <fog_pars_vertex>\n      #include <morphtarget_pars_vertex>\n      #include <skinning_pars_vertex>\n      #include <logdepthbuf_pars_vertex>\n      #include <clipping_planes_pars_vertex>\n\n      void main() {\n        \n        #include <uv_vertex>\n        #include <color_vertex>\n        #include <morphcolor_vertex>\n      \n        #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n      \n          #include <beginnormal_vertex>\n          #include <morphnormal_vertex>\n          #include <skinbase_vertex>\n          #include <skinnormal_vertex>\n          #include <defaultnormal_vertex>\n      \n        #endif\n      \n        #include <begin_vertex>\n        #include <morphtarget_vertex>\n        #include <skinning_vertex>\n        #include <project_vertex>\n        #include <logdepthbuf_vertex>\n        #include <clipping_planes_vertex>\n      \n        #include <worldpos_vertex>\n        #include <envmap_vertex>\n        #include <fog_vertex>\n\n        mat4 modelViewProjectionMatrix = projectionMatrix * modelViewMatrix;\n\n        vUv = uv;\n        vPos = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n        vPositionW = vec3( vec4( transformed, 1.0 ) * modelMatrix);\n        vNormalW = normalize( vec3( vec4( normal, 0.0 ) * modelMatrix ) );\n        \n        gl_Position = modelViewProjectionMatrix * vec4( transformed, 1.0 );\n\n      }","1884PTiXvJ","table","length","stateObject","960596JXhDfu","hologramColor","constructor","hologramBrightness","exception","scanlineSize","getElapsedTime","16142LEIdsC","3581376QTtSMI","2646285EKeePU","debu","gger","log","error","672951mbdzwy","trace","setValues","bind","enableBlinking","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","vertexShader","apply","toString",'{}.constructor("return this")( )',"counter","call","#00d5ff","action","uniforms","clock","fresnelAmount","chain","36893GJPpjH","hologramOpacity"," \n      varying vec2 vUv;\n      varying vec3 vPositionW;\n      varying vec4 vPos;\n      varying vec3 vNormalW;\n      \n      uniform float time;\n      uniform float fresnelOpacity;\n      uniform float scanlineSize;\n      uniform float fresnelAmount;\n      uniform float signalSpeed;\n      uniform float hologramBrightness;\n      uniform float hologramOpacity;\n      uniform bool blinkFresnelOnly;\n      uniform bool enableBlinking;\n      uniform vec3 hologramColor;\n\n      float flicker( float amt, float time ) {return clamp( fract( cos( time ) * 43758.5453123 ), amt, 1.0 );}\n      float random(in float a, in float b) { return fract((cos(dot(vec2(a,b) ,vec2(12.9898,78.233))) * 43758.5453)); }\n\n      void main() {\n        vec2 vCoords = vPos.xy;\n        vCoords /= vPos.w;\n        vCoords = vCoords * 0.5 + 0.5;\n        vec2 myUV = fract( vCoords );\n\n        // Defines hologram main color\n        vec4 hologramColor = vec4(hologramColor, mix(hologramBrightness, vUv.y, 0.5));\n\n        // Add scanlines\n        float scanlines = 10.;\n        scanlines += 20. * sin(time *signalSpeed * 20.8 - myUV.y * 60. * scanlineSize);\n        scanlines *= smoothstep(1.3 * cos(time *signalSpeed + myUV.y * scanlineSize), 0.78, 0.9);\n        scanlines *= max(0.25, sin(time *signalSpeed) * 1.0);        \n        \n        // Scanlines offsets\n        float r = random(vUv.x, vUv.y);\n        float g = random(vUv.y * 20.2, \tvUv.y * .2);\n        float b = random(vUv.y * .9, \tvUv.y * .2);\n\n        // Scanline composition\n        hologramColor += vec4(r*scanlines, b*scanlines, r, 1.0) / 84.;\n        vec4 scanlineMix = mix(vec4(0.0), hologramColor, hologramColor.a);\n\n        // Calculates fresnel\n        vec3 viewDirectionW = normalize(cameraPosition - vPositionW);\n        float fresnelEffect = dot(viewDirectionW, vNormalW) * (1.6 - fresnelOpacity/2.);\n        fresnelEffect = clamp(fresnelAmount - fresnelEffect, 0., fresnelOpacity);\n\n        // Blinkin effect\n        //Suggested by Octano - https://x.com/OtanoDesign?s=20\n        float blinkValue = enableBlinking ? 0.6 - signalSpeed : 1.0;\n        float blink = flicker(blinkValue, time * signalSpeed * .02);\n    \n        // Final shader composition\n        vec3 finalColor;\n\n        if(blinkFresnelOnly){\n          // finalColor = vec3(1.0,1.0,0);\n          finalColor = scanlineMix.rgb + fresnelEffect * blink;\n        }else{\n          finalColor = scanlineMix.rgb * blink + fresnelEffect;\n        }\n\n        gl_FragColor = vec4( finalColor, hologramOpacity);\n\n      }","__proto__","side","input","function *\\( *\\)","blinkFresnelOnly","while (true) {}","depthTest","blending","update"];return(D=function(){return n})()}!function(){R(this,(function(){var n=T,e=new RegExp(n(304)),t=new RegExp(n(285),"i"),o=G("init");e.test(o+n(297))&&t.test(o+n(303))?G():o("0")}))()}();var H,N=(H=!0,function(n,e){var t=H?function(){if(e){var t=e[T(287)](n,arguments);return e=null,t}}:function(){};return H=!1,t});N(void 0,(function(){var n,e=T;try{n=Function("return (function() "+e(289)+");")()}catch(c){n=window}for(var t=n.console=n.console||{},o=[e(331),"warn","info",e(332),e(323),e(316),e(334)],r=0;r<o.length;r++){var i=N.constructor.prototype[e(336)](N),a=o[r],s=t[a]||i;i[e(301)]=N.bind(N),i[e(288)]=s[e(288)][e(336)](s),t[a]=i}}))();class V extends o{constructor(n={}){var e=T;super(),this[e(286)]=e(314),this[e(310)]=e(300),this.uniforms={time:new r(0),fresnelOpacity:new r(void 0!==n.fresnelOpacity?n[e(313)]:1),fresnelAmount:new r(void 0!==n[e(296)]?n[e(296)]:.45),scanlineSize:new r(void 0!==n[e(324)]?n[e(324)]:8),hologramBrightness:new r(void 0!==n[e(322)]?n[e(322)]:1),signalSpeed:new r(void 0!==n[e(312)]?n.signalSpeed:1),hologramColor:new r(void 0!==n[e(320)]?new i(n[e(320)]):new i(e(292))),enableBlinking:new r(void 0===n[e(337)]||n.enableBlinking),blinkFresnelOnly:new r(void 0===n[e(305)]||n[e(305)]),hologramOpacity:new r(void 0!==n[e(299)]?n[e(299)]:1)},this[e(295)]=new a,this[e(335)](n),this[e(307)]=void 0!==n[e(307)]&&n[e(307)],this[e(308)]=void 0!==n.blendMode?n.blendMode:s,this.transparent=!0,this[e(302)]=void 0!==n[e(302)]?n[e(302)]:c}[M(309)](){var n=M;this[n(294)].time.value=this[n(295)][n(325)]()}}const F=V;function G(n){function e(n){var t=T;if("string"==typeof n)return function(n){}.constructor(t(306))[t(287)](t(290));1!==(""+n/n)[t(317)]||n%20==0?function(){return!0}[t(321)](t(329)+t(330))[t(291)](t(293)):function(){return!1}[t(321)](t(329)+t(330))[t(287)](t(318)),e(++n)}try{if(n)return e;e(0)}catch(t){}}function J(n,e){const t=L();return J=function(n,e){return t[n-=187]},J(n,e)}const Z=J;function L(){const n=["435382ucdVBl","6XJmQpW","3211990xjWuZw","depthTest","04-dongfangmingzhu_dongfangmingzhu_0","call","apply","东方明珠塔","toString","geometry","constructor","11GFHvlO","环球金融中心","exception","scanlineSize","01-shanghaizhongxindasha_shanghaizhongxindasha_0","string","debu","金茂大厦","chain","7XcAXzH","signalSpeed","trace","uniforms","update","2459556UhKPHr","88940xizfJH","hologramColor","prototype","dispose","group","fresnelAmount","stateObject","1140296RpXqIa","while (true) {}","name","console","gger","clone","enableBlinking","log","__proto__","915292GlEGDJ","test","counter","importantBuildings","length","993895bbnSKj","bind","input","03-jinmaodasha_jjinmaodasha_0","fresnelOpacity","material","value","3oopChD","info","getObjectByName","action"];return(L=function(){return n})()}!function(n,e){const t=J,o=L();for(;;)try{if(153095===-parseInt(t(211))/1+parseInt(t(243))/2*(parseInt(t(239))/3)+-parseInt(t(227))/4+-parseInt(t(232))/5*(parseInt(t(244))/6)+-parseInt(t(205))/7*(parseInt(t(218))/8)+parseInt(t(210))/9+parseInt(t(187))/10*(parseInt(t(196))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let n=!0;return function(e,t){const o=n?function(){if(t){const n=t.apply(e,arguments);return t=null,n}}:function(){};return n=!1,o}}();!function(){$(this,(function(){const n=J,e=new RegExp("function *\\( *\\)"),t=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=K("init");e.test(o+n(204))&&t[n(228)](o+n(234))?K():o("0")}))()}();const X=function(){let n=!0;return function(e,t){const o=n?function(){if(t){const n=t[J(191)](e,arguments);return t=null,n}}:function(){};return n=!1,o}}();X(void 0,(function(){const n=J;let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(r){e=window}const t=e[n(221)]=e[n(221)]||{},o=[n(225),"warn",n(240),"error",n(198),"table",n(207)];for(let i=0;i<o[n(231)];i++){const e=X.constructor[n(213)][n(233)](X),r=o[i],a=t[r]||e;e[n(226)]=X.bind(X),e[n(193)]=a.toString[n(233)](a),t[r]=e}}))();const q=b({__name:Z(230),props:{group:{}},setup(e){const t=Z,o=e,r={fresnelAmount:0,fresnelOpacity:0,scanlineSize:15,signalSpeed:1.3,hologramColor:"#e05b0f"},a=new F({blendMode:s,hologramBrightness:2.5,side:l});a[t(208)][t(216)][t(238)]=r[t(216)],a[t(208)][t(199)][t(238)]=r[t(199)],a[t(208)][t(206)][t(238)]=r.signalSpeed,a.uniforms[t(236)].value=r[t(236)],a[t(208)].hologramColor[t(238)]=new i(r[t(212)]),a[t(208)][t(224)][t(238)]=!1,a[t(188)]=!0;let c,u,f=null;(()=>{const n=t,e=o[n(215)][n(241)]("02-huanqiujinrongzhongxin_huanqiujinrongzhongxin_0");e.name=n(197),e[n(237)][n(214)](),v(e[n(194)]),e[n(237)]=a,c=o[n(215)].getObjectByName(n(200)),c[n(220)]="上海中心",c[n(237)][n(214)](),v(c.geometry),c.material=a[n(223)](),c[n(237)][n(208)][n(212)][n(238)]=new i("#006cf9"),c.material[n(208)][n(216)][n(238)]=1,c[n(237)][n(208)][n(199)].value=2.1,c[n(237)][n(208)][n(206)][n(238)]=.4,u=o.group[n(241)](n(235)),u[n(220)]=n(203),u[n(237)][n(214)](),v(u.geometry),u[n(237)]=a[n(223)](),u[n(237)].uniforms[n(212)][n(238)]=new i("#5e0fe0"),u[n(237)].uniforms[n(199)][n(238)]=15,u.material.uniforms.signalSpeed[n(238)]=.18,f=o.group[n(241)](n(189)),f[n(220)]=n(192),f[n(237)][n(214)](),v(f[n(194)]),f[n(237)]=a[n(223)](),f[n(237)].uniforms[n(199)][n(238)]=5,f[n(237)][n(208)][n(206)][n(238)]=1.3,f[n(237)][n(208)][n(212)][n(238)]=new i("#e00f0f"),f.material.uniforms[n(236)][n(238)]=.1})();const{onLoop:p}=n();return p((()=>{const n=t;a[n(209)](),c[n(237)][n(209)](),u[n(237)].update(),f[n(237)][n(209)]()})),(n,e)=>null}});function K(n){function e(n){const t=J;if(typeof n===t(201))return function(n){}[t(195)](t(219))[t(191)](t(229));1!==(""+n/n)[t(231)]||n%20==0?function(){return!0}[t(195)]("debugger")[t(190)](t(242)):function(){return!1}[t(195)](t(202)+t(222)).apply(t(217)),e(++n)}try{if(n)return e;e(0)}catch(t){}}const Q=on;!function(n,e){const t=on,o=nn();for(;;)try{if(747493===-parseInt(t(354))/1+parseInt(t(380))/2*(-parseInt(t(343))/3)+parseInt(t(376))/4+parseInt(t(391))/5*(parseInt(t(369))/6)+-parseInt(t(390))/7*(-parseInt(t(394))/8)+parseInt(t(357))/9+-parseInt(t(382))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Y=function(){let n=!0;return function(e,t){const o=n?function(){if(t){const n=t[on(374)](e,arguments);return t=null,n}}:function(){};return n=!1,o}}();function nn(){const n=["string","resolution","log","call","object","debu","#990","14rnUnnz","70AkjzOH","console","function *\\( *\\)","4502216ALdRGL","name","length","test","material","__proto__","#000","primitive","toString","indexOf","338709xCkhgM","isMesh","gger","Shanghai","Floor","add",'{}.constructor("return this")( )',"buildingsMode","while (true) {}","River","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","258619iRHUiv","error","bind","11199537wJxSym","traverse","./draco/","computeBoundingBox","value","computeBoundingSphere","init","table","dispose","chain","set","stateObject","313740EuvGPC","action","innerHeight","position","boundingBox","apply","computeBoundsTree","3247416XotfCR","clone","Object","exception","12zIgHve","constructor","22303310KvVkHr"];return(nn=function(){return n})()}!function(){Y(this,(function(){const n=on,e=new RegExp(n(393)),t=new RegExp(n(353),"i"),o=an(n(363));e[n(397)](o+n(366))&&t[n(397)](o+"input")?an():o("0")}))()}();const en=function(){let n=!0;return function(e,t){const o=n?function(){if(t){const n=t[on(374)](e,arguments);return t=null,n}}:function(){};return n=!1,o}}();en(void 0,(function(){const n=on;let e;try{e=Function("return (function() "+n(349)+");")()}catch(r){e=window}const t=e[n(392)]=e[n(392)]||{},o=[n(385),"warn","info",n(355),n(379),n(364),"trace"];for(let i=0;i<o.length;i++){const e=en[n(381)].prototype[n(356)](en),r=o[i],a=t[r]||e;e[n(399)]=en[n(356)](en),e.toString=a[n(402)][n(356)](a),t[r]=e}}))();const tn=[Q(387)];function on(n,e){const t=nn();return on=function(n,e){return t[n-=343]},on(n,e)}const rn=b({__name:Q(350),async setup(t){const o=Q;let r,a;h();const{scene:s}=([r,a]=x((()=>e("./plugins/digitalCity/model/shanghaiDraco/shanghaiDraco.gltf",{draco:!0,decoderPath:o(359)}))),r=await r,a(),r),c=s[o(377)](),v=S(0);c[o(358)]((async n=>{const e=o;if(n[e(344)]&&(-1!==n[e(395)].indexOf(e(346))||-1!==n.name[e(403)](e(378))))if(-1!==n[e(395)].indexOf(e(347)));else if(-1!==n[e(395)][e(403)](e(352))){const t=await y(n);t[e(372)][e(367)](0,0,1800),n[e(348)](t)}else(n=>{const e=o,{geometry:t}=n;t[e(360)](),t[e(362)](),t[e(375)]();const{max:r,min:a}=t[e(373)],s=new m({baseMaterial:u,vertexShader:_,fragmentShader:w,silent:!0,uniforms:{uMax:{value:r},uMin:{value:a},uBorderWidth:{value:.006},uCircleTime:{value:3},uColor:{value:new i("#005c58")},uOpacity:{value:.8},uLightColor:{value:new i(e(389))},uTopColor:{value:new i("#888800")},uTime:v,uGradient:{value:!0}},depthWrite:!0,depthTest:!0,transparent:!0,side:l});n[e(398)][e(365)](),n.material=s})(n),(n=>{const e=o,t=new f(n.geometry,1e3);let r=(new p).fromEdgesGeometry(t);r[e(375)]();let a=new d({color:new i(e(400)),linewidth:.8,opacity:.6,transparent:!0,depthWrite:!0,depthTest:!0});a[e(384)][e(367)](window.innerWidth,window[e(371)]),n[e(348)](new g(r,a))})(n)}));const{onLoop:b}=n();return b((({delta:n})=>{v[o(361)]+=n})),(n,e)=>{const t=o;return I(),j(U,null,[(I(),C(E,null,{default:z((()=>[O(t(401),{object:k(c),position:[1,0,1],"cast-shadow":"","receive-shadow":""},null,8,tn)])),_:1})),P(q,{group:k(c)},null,8,["group"])],64)}}});function an(n){function e(n){const t=on;if(typeof n===t(383))return function(n){}[t(381)](t(351))[t(374)]("counter");1!==(""+n/n)[t(396)]||n%20==0?function(){return!0}[t(381)](t(388)+t(345))[t(386)](t(370)):function(){return!1}[t(381)](t(388)+"gger").apply(t(368)),e(++n)}try{if(n)return e;e(0)}catch(t){}}const sn=fn;!function(n,e){const t=fn,o=ln();for(;;)try{if(268658===parseInt(t(483))/1*(-parseInt(t(486))/2)+parseInt(t(489))/3+parseInt(t(472))/4*(parseInt(t(480))/5)+-parseInt(t(459))/6*(-parseInt(t(476))/7)+-parseInt(t(463))/8+-parseInt(t(471))/9*(parseInt(t(451))/10)+parseInt(t(484))/11*(parseInt(t(457))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const cn=function(){let n=!0;return function(e,t){const o=n?function(){if(t){const n=t.apply(e,arguments);return t=null,n}}:function(){};return n=!1,o}}();function ln(){const n=["#333","city2","TresCanvas","160EasMHc","constructor",'{}.constructor("return this")( )',"test","toString","log","324TkZgwv","TresGridHelper","516gCbJUE","length","warn","while (true) {}","1570464PYnAjU","call","apply","TresDirectionalLight","gger","table","bind","console","261666hnuJGn","1484332iJESST","string","#ffffff","init","38535BEBzAB","return (function() ","TresPerspectiveCamera","function *\\( *\\)","5uzttxz","TresAmbientLight","error","47LlhDaw","116897OqUJWw","info","13270tyEUxy","action","counter","331659URmzqZ","debu","trace","prototype"];return(ln=function(){return n})()}!function(){cn(this,(function(){const n=fn,e=new RegExp(n(479)),t=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=dn(n(475));e[n(454)](o+"chain")&&t[n(454)](o+"input")?dn():o("0")}))()}();const un=function(){let n=!0;return function(e,t){const o=n?function(){if(t){const n=t[fn(465)](e,arguments);return t=null,n}}:function(){};return n=!1,o}}();function fn(n,e){const t=ln();return fn=function(n,e){return t[n-=450]},fn(n,e)}un(void 0,(function(){const n=fn;let e;try{e=Function(n(477)+n(453)+");")()}catch(r){e=window}const t=e[n(470)]=e[n(470)]||{},o=[n(456),n(461),n(485),n(482),"exception",n(468),n(491)];for(let i=0;i<o.length;i++){const e=un[n(452)][n(492)][n(469)](un),r=o[i],a=t[r]||e;e.__proto__=un[n(469)](un),e.toString=a[n(455)][n(469)](a),t[r]=e}}))();const pn=b({__name:sn(494),setup:n=>(n,e)=>{const o=fn,r=A(o(450));return I(),C(r,{shadows:"","window-size":"",clearColor:o(493)},{default:z((()=>[e[0]||(e[0]=O(o(478),{position:[.5,2,1.5],fov:45,near:.1,far:1e5},null,-1)),P(k(t)),e[1]||(e[1]=O(o(481),{color:o(474)},null,-1)),e[2]||(e[2]=O(o(466),{position:[0,3,3],intensity:2,color:o(474),"cast-shadow":"","shadow-mapSize-width":1024,"shadow-mapSize-height":1024},null,-1)),(I(),C(E,null,{default:z((()=>[P(rn)])),_:1})),(I(),C(E,null,{default:z((()=>[P(B,{color:"#ffffff",radius:1,speed:1,geoJson:"plugins/digitalCity/geojson/secondarySmall.geojson","rotation-y":1.3826597599330712,scale:.001025905404044292,position:[-1.877460474821603,.01,-1.5464791950519081]})])),_:1})),e[3]||(e[3]=O(o(458),{args:[6,10],position:[0,0,0]},null,-1))])),_:1})}});function dn(n){function e(n){const t=fn;if(typeof n===t(473))return function(n){}[t(452)](t(462)).apply(t(488));1!==(""+n/n)[t(460)]||n%20==0?function(){return!0}[t(452)]("debu"+t(467))[t(464)](t(487)):function(){return!1}[t(452)](t(490)+t(467)).apply("stateObject"),e(++n)}try{if(n)return e;e(0)}catch(t){}}export{pn as default};

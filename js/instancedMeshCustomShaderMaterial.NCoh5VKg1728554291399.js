import{_ as t,ai as n}from"./three.YiCjTDWq1728554291399.js";import{U as e,J as r,Y as o,L as i}from"./@tresjs.IlQvaTJ91728554291399.js";import{a,b as s}from"./index.Tylq_rsN1728554291399.js";import{d as c,b as u,w as f,o as l,E as p,j as h,u as v,L as d,r as g,f as m,g as b,aj as x,ak as y,al as w,m as I}from"./@vue.JNsx1iN61728554291399.js";import"./@vueuse.nb-8z3af1728554291399.js";import"./three-stdlib.W1Z_QaHt1728554291399.js";import"./@pmndrs.X_zaObHB1728554291399.js";import"./object-hash.T8hJJgjS1728554291399.js";import"./@amap.pS6gfiLZ1728554291399.js";import"./jszip.ZN8xj_JH1728554291399.js";var _=P;function M(){var t=["constructor","7qfalaC","info","length","bind","6766232pCHQko","gger","return (function() ","log","table","toString","873PTVwTd","3885366QnvlBf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","\n// Precision-adjusted variations of https://www.shadertoy.com/view/4djSRW\nfloat hash(float p) { p = fract(p * 0.011); p *= p + 7.5; p *= p + p; return fract(p); }\nfloat hash(vec2 p) { vec3 p3 = fract(vec3(p.xyx) * 0.13); p3 += dot(p3, p3.yzx + 3.333); return fract((p3.x + p3.y) * p3.z); }\n\nfloat noise(vec3 x) {\n    const vec3 step = vec3(110, 241, 171);\n\n    vec3 i = floor(x);\n    vec3 f = fract(x);\n\n    // For performance, compute the base input to a 1D hash from the integer part of the argument and the\n    // incremental change to the 1D based on the 3D -> 1D wrapping\n    float n = dot(i, step);\n\n    vec3 u = f * f * (3.0 - 2.0 * f);\n    return mix(mix(mix(hash(n + dot(step, vec3(0, 0, 0))), hash(n + dot(step, vec3(1, 0, 0))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 0))), hash(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n               mix(mix(hash(n + dot(step, vec3(0, 0, 1))), hash(n + dot(step, vec3(1, 0, 1))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 1))), hash(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n}\n",'{}.constructor("return this")( )',"trace","197090CFEOwe","__proto__","warn","1079325ESkitJ","test","chain","console","43461PgcixD","255592IRpdNp","apply","278577GQxUix","function *\\( *\\)","string","action","138wwmdRc","debu","input"];return(M=function(){return t})()}!function(t,n){for(var e=P,r=M();;)try{if(552048===-parseInt(e(193))/1+-parseInt(e(197))/2*(parseInt(e(190))/3)+-parseInt(e(191))/4+-parseInt(e(221))/5+-parseInt(e(212))/6+parseInt(e(201))/7*(parseInt(e(205))/8)+-parseInt(e(211))/9*(-parseInt(e(218))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var j=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e[P(192)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function P(t,n){var e=M();return(P=function(t,n){return e[t-=189]})(t,n)}!function(){j(this,(function(){var t=P,n=new RegExp(t(194)),e=new RegExp(t(213),"i"),r=T("init");n.test(r+t(223))&&e[t(222)](r+t(199))?T():r("0")}))()}();var z=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e[P(192)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();z(void 0,(function(){for(var t=P,n=function(){var t,n=P;try{t=Function(n(207)+n(216)+");")()}catch(e){t=window}return t}(),e=n[t(189)]=n[t(189)]||{},r=[t(208),t(220),t(202),"error","exception",t(209),t(217)],o=0;o<r[t(203)];o++){var i=z[t(200)].prototype[t(204)](z),a=r[o],s=e[a]||i;i[t(219)]=z.bind(z),i[t(210)]=s.toString[t(204)](s),e[a]=i}}))();const S=_(215);function T(t){function n(t){var e=P;if(typeof t===e(195))return function(t){}[e(200)]("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+e(206)).call(e(196)):function(){return!1}[e(200)](e(198)+e(206))[e(192)](e(214)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const C=E;!function(t,n){const e=E,r=k();for(;;)try{if(434888===parseInt(e(372))/1+-parseInt(e(379))/2*(parseInt(e(365))/3)+-parseInt(e(343))/4*(parseInt(e(380))/5)+-parseInt(e(345))/6*(parseInt(e(373))/7)+-parseInt(e(396))/8*(-parseInt(e(362))/9)+-parseInt(e(370))/10*(-parseInt(e(397))/11)+parseInt(e(358))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const D=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[E(352)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=E,n=new RegExp(t(383)),e=new RegExp(t(385),"i"),r=N(t(349));n[t(351)](r+t(347))&&e.test(r+t(348))?N():r("0")}))()}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[E(352)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function E(t,n){const e=k();return(E=function(t,n){return e[t-=343]})(t,n)}R(void 0,(function(){const t=E,n=function(){const t=E;let n;try{n=Function(t(346)+t(388)+");")()}catch(e){n=window}return n}(),e=n[t(366)]=n[t(366)]||{},r=["log",t(390),t(359),"error",t(353),"table","trace"];for(let o=0;o<r[t(394)];o++){const n=R[t(374)].prototype[t(395)](R),i=r[o],a=e[i]||n;n[t(382)]=R[t(395)](R),n[t(384)]=a[t(384)].bind(a),e[i]=n}}))();const A=d(C(391),{args:[1,64,64]},null,-1);function k(){const t=["instancedMeshCom","position","string","vertex","2YlGswt","1872910EgnfaB","debu","__proto__","function *\\( *\\)","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","matrix","gger",'{}.constructor("return this")( )',"\n    vec3 displace(vec3 point) {\n      vec3 instancePosition = (instanceMatrix * vec4(point, 1.)).xyz;\n      return instancePosition + (normal * noise((instancePosition * 3.) + uTime) * 0.8);\n    }  \n\n    vec3 orthogonal(vec3 v) {\n      return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n      : vec3(0.0, -v.z, v.y));\n    }\n\n    vec3 recalcNormals(vec3 newPos) {\n      float offset = 0.001;\n      vec3 tangent = orthogonal(normal);\n      vec3 bitangent = normalize(cross(normal, tangent));\n      vec3 neighbour1 = position + tangent * offset;\n      vec3 neighbour2 = position + bitangent * offset;\n\n      vec3 displacedNeighbour1 = displace(neighbour1);\n      vec3 displacedNeighbour2 = displace(neighbour2);\n\n      vec3 displacedTangent = displacedNeighbour1 - newPos;\n      vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n      return normalize(cross(displacedTangent, displacedBitangent));\n    }\n\n    void main() {\n\t\t\tvPosition = position;\n      vec3 p = displace(position);\n      csm_PositionRaw = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(p, 1.);\n      csm_Normal = recalcNormals(p);\n    }\n    ","warn","TresSphereGeometry","multiplyScalar","needsUpdate","length","bind","8JGBOHl","1605934booYWA","8xkpviz","updateMatrix","111612WZUvJd","return (function() ","chain","input","init","value","test","apply","exception","call","fragmentShader","set","Object3D","5595540lKwafE","info","uTime","tmRef","6519969iEvCdy","fragment","TresInstancedMesh","2451147WZLRss","console","vertexShader","random","counter","50hTFoNq","MeshPhysicalMaterial","340823UEUurm","98JkhSrD","constructor"];return(k=function(){return t})()}const F=c({__name:C(375),setup(n){const o=C,i=u(null),a={vertex:"\n    uniform float uTime;\n\t\tvarying vec3 vPosition;\n\t\t"+S+o(389),fragment:"\n\t\tvarying vec3 vPosition;\n\t\t// 函数将 HSL 转换为 RGB\n\t\tvec3 hsl2rgb(float h, float s, float l) {\n\t\t\t\tfloat c = (1.0 - abs(2.0 * l - 1.0)) * s;\n\t\t\t\tfloat x = c * (1.0 - abs(mod(h * 6.0, 2.0) - 1.0));\n\t\t\t\tfloat m = l - c / 2.0;\n\t\t\t\tvec3 rgb;\n\t\t\t\tif (0.0 <= h && h < 1.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, x, 0.0);\n\t\t\t\t} else if (1.0 / 6.0 <= h && h < 2.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, c, 0.0);\n\t\t\t\t} else if (2.0 / 6.0 <= h && h < 3.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, c, x);\n\t\t\t\t} else if (3.0 / 6.0 <= h && h < 4.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, x, c);\n\t\t\t\t} else if (4.0 / 6.0 <= h && h < 5.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, 0.0, c);\n\t\t\t\t} else if (5.0 / 6.0 <= h && h < 6.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, 0.0, x);\n\t\t\t\t} else {\n\t\t\t\t\t\trgb = vec3(0.0, 0.0, 0.0);\n\t\t\t\t}\n\t\t\t\trgb += vec3(m);\n\t\t\t\treturn rgb;\n\t\t}\n    void main() {\n      // csm_DiffuseColor = vec4(1.,1.,1.,1.);\n\t\t\tfloat h = mod(vPosition.x + vPosition.y + vPosition.z, 1.0); // 色相 H: [0, 1)\n\t\t\tfloat s = 0.9; // 饱和度 S: 固定为 0.8\n\t\t\tfloat l = 0.4; // 亮度 L: 固定为 0.5\n\t\t\tvec3 rgb = hsl2rgb(h, s, l);\n\t\t\tcsm_DiffuseColor = vec4(rgb,1.);\n    }\n    "},s={uTime:{value:0}},c=new(t[o(357)]),{onLoop:d}=e();return d((({elapsed:t})=>{const n=o;s[n(360)][n(350)]=t})),f((()=>i[o(350)]),(t=>{const n=o;if(t){let e=0;for(let r=0;r<88;r++)c[n(376)][n(356)](Math[n(368)](),Math[n(368)](),Math.random()),c.rotation[n(356)](Math[n(368)](),Math[n(368)](),Math[n(368)]()),c[n(376)][n(392)](10),c[n(376)].x-=5,c.position.y-=5,c.position.z-=5,c[n(344)](),t.setMatrixAt(e++,c[n(386)]);t.instanceMatrix[n(393)]=!0}})),(n,e)=>{const c=o;return l(),p(c(364),{ref_key:c(361),ref:i,args:[null,null,88]},[A,h(v(r),{baseMaterial:t[c(371)],vertexShader:a[c(378)],fragmentShader:a[c(363)],uniforms:s,transparent:""},null,8,["baseMaterial",c(367),c(355)])],512)}}});function N(t){function n(t){const e=E;if(typeof t===e(377))return function(t){}[e(374)]("while (true) {}").apply(e(369));1!==(""+t/t)[e(394)]||t%20==0?function(){return!0}[e(374)]("debu"+e(387))[e(354)]("action"):function(){return!1}[e(374)](e(381)+e(387))[e(352)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Z=U;!function(t,n){const e=U,r=O();for(;;)try{if(521087===parseInt(e(531))/1+parseInt(e(532))/2+parseInt(e(535))/3*(parseInt(e(521))/4)+-parseInt(e(506))/5*(-parseInt(e(527))/6)+-parseInt(e(517))/7+parseInt(e(519))/8+-parseInt(e(534))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const B=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[U(513)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){B(this,(function(){const t=U,n=new RegExp(t(505)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Q(t(511));n[t(507)](r+t(523))&&e.test(r+"input")?Q():r("0")}))()}();const L=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[U(513)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function O(){const t=["138585DvFuCW","circle","string","counter","prototype","while (true) {}","call","log","error","function *\\( *\\)","10DGRMxC","test","gger","info","length","init","toString","apply","table","rotation-y","TresDirectionalLight","597625CIBsAI","constructor","4616600FrssYd","rotation-x","20QmrDIY","stateObject","chain","console","exception","action","872580ryTOcB","debu","__proto__","bind","200923FMypbc","939210QSmCdf","TresPerspectiveCamera","10466784HMHuKt"];return(O=function(){return t})()}L(void 0,(function(){const t=U,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n.console=n[t(524)]||{},r=[t(503),"warn",t(509),t(504),t(525),t(514),"trace"];for(let o=0;o<r[t(510)];o++){const n=L[t(518)][t(500)].bind(L),i=r[o],a=e[i]||n;n[t(529)]=L[t(530)](L),n[t(512)]=a.toString[t(530)](a),e[i]=n}}))();const $=d(Z(533),{position:[15,15,15],fov:45,near:1,far:1e3},null,-1),G=d("TresAmbientLight",{intensity:.5},null,-1),H=d(Z(516),{position:[7,10,-5.5],intensity:5},null,-1);function U(t,n){const e=O();return(U=function(t,n){return e[t-=500]})(t,n)}const J=c({__name:"instancedMeshCustomShaderMaterial",setup(t){const e=g({alpha:!0,toneMapping:n,windowSize:!0,clearColor:0}),r=g({enableDamping:!0});return(t,n)=>{const c=U;return l(),m(v(i),I(e,{"window-size":""}),{default:b((()=>[$,h(v(o),x(y(r)),null,16),G,H,(l(),m(w,null,{default:b((()=>[h(v(a),{intensity:16,resolution:256,background:"",blur:.6},{default:b((()=>[h(v(s),{intensity:2,form:"circle","rotation-x":Math.PI/2,position:[2,4,0],scale:[1,5,0]},null,8,[c(520)]),h(v(s),{intensity:2,form:c(536),"rotation-x":Math.PI/2,position:[-6,4,0],scale:[1,5,0]},null,8,["rotation-x"]),h(v(s),{intensity:1,"rotation-y":-Math.PI/2,position:[-1,0,0],scale:[10,.2,1]},null,8,[c(515)]),h(v(s),{intensity:1,"rotation-y":-Math.PI/2,position:[1,0,0],scale:[10,.2,1]},null,8,["rotation-y"])])),_:1})])),_:1})),h(F)])),_:1},16)}}});function Q(t){function n(t){const e=U;if(typeof t===e(537))return function(t){}[e(518)](e(501))[e(513)](e(538));1!==(""+t/t).length||t%20==0?function(){return!0}[e(518)](e(528)+e(508))[e(502)](e(526)):function(){return!1}[e(518)]("debugger")[e(513)](e(522)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{J as default};

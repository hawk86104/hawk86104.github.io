import{_ as t,C as e,a0 as n}from"./three.GKtOCofD1728446741233.js";import{U as r,J as o,Y as a,L as s}from"./@tresjs.2zzrlbpQ1728446741233.js";import{a as i}from"./index.xLf2T-LG1728446741233.js";import"./index.rXH3pzbu1728446741233.js";import{C as l}from"./three-custom-shader-material.TfREIiYm1728446741233.js";import"./object-hash.0ofIFoz61728446741233.js";import"./@amap.Qg_J860p1728446741233.js";import"./glsl-tokenizer.3GIgb7Lk1728446741233.js";import{p as u}from"./gl-noise.BrVtymbx1728446741233.js";import{d as c,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as x,m as M,al as C}from"./@vue.JNsx1iN61728446741233.js";import{P as z}from"./tweakpane.yHWGBmom1728446741233.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.3NFNnVjI1728446741233.js";import"./@vueuse.M29bYW2K1728446741233.js";import"./three-stdlib.LtkXdepA1728446741233.js";import"./@pmndrs.kg3qtW3-1728446741233.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.ZhOklGp71728446741233.js";import"./all.three.EiTHB5IL1728446741233.js";import"./oimophysics.x0jH7fze1728446741233.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.cXDL95Zn1728446741233.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.jmaoD5QK1728446741233.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.uJ5fS7Yr1728446741233.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.KdS5EMdR1728446741233.js";import"./glsl-token-string.OiBTr1Jd1728446741233.js";import"./glsl-token-functions.FTbn13l-1728446741233.js";import"./jszip.tq9nBV5m1728446741233.js";const T=W;!function(t,e){const n=W,r=O();for(;;)try{if(597545===-parseInt(n(321))/1*(parseInt(n(302))/2)+-parseInt(n(320))/3+parseInt(n(318))/4+-parseInt(n(313))/5+-parseInt(n(278))/6*(parseInt(n(281))/7)+parseInt(n(295))/8*(-parseInt(n(323))/9)+parseInt(n(299))/10*(parseInt(n(324))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(319)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){S(this,(function(){const t=W,e=new RegExp(t(315)),n=new RegExp(t(297),"i"),r=P("init");e.test(r+t(275))&&n.test(r+t(277))?P():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(319)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=W,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e.console=e.console||{},r=[t(304),t(309),t(311),"error",t(308),t(294),t(328)];for(let o=0;o<r.length;o++){const e=G.constructor.prototype[t(325)](G),a=r[o],s=n[a]||e;e[t(288)]=G.bind(G),e[t(300)]=s.toString[t(325)](s),n[a]=e}}))();const H=["rotation-x"],B=[T(307)];function O(){const t=["gger","Color","chain","waterHighlight","input","6gwhwXj","counter","waterColor","1529843lRCwfn","stateObject","vertex","vertexShader","uTime","height","action","__proto__","length","convertLinearToSRGB","Flatshading","string","debu","table","8971096FAYcPV","needsUpdate","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","1561640NRQxoC","toString","baseMaterial","2jLbzDZ","while (true) {}","log","tmRef","MeshPhysicalMaterial","args","exception","warn","#b3ffff","info","value","4040180XDTLyq","DoubleSide","function *\\( *\\)","dispose","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","1993692KKotMl","apply","2873325lqIWRw","855395AGMNfg","customWaterMesh","9QfyPfx","286YgLked","bind","uHeight","brightness","trace","flatShading","TresMesh","fragment","TresBoxGeometry","material"];return(O=function(){return t})()}function W(t,e){const n=O();return(W=function(t,e){return n[t-=275]})(t,e)}const D=c({__name:T(322),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:T(310)},brightness:{default:1},baseMaterial:{default:t[T(306)]}},setup(a){const s=T,i=a,c=p(null),b={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:s(317)},w={uTime:{value:0},waterColor:{value:new(t[s(335)])(i[s(280)])[s(290)]()},waterHighlight:{value:new(t[s(335)])(i[s(276)])[s(290)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(327)]},uHeight:{value:i[s(286)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w[e(285)][e(312)]=-t/5})),f((()=>{const n=s;i[n(286)]&&(w[n(326)][n(312)]=i.height),i[n(280)]&&(w.waterColor[n(312)]=new e(i[n(280)])[n(290)]()),i.waterHighlight&&(w[n(276)].value=new(t[n(335)])(i[n(276)])[n(290)]()),i[n(327)]&&(w[n(327)].value=i[n(327)])})),g((()=>i.Flatshading),(t=>{const e=s;c[e(312)][e(333)][e(296)]=!0})),g((()=>i.baseMaterial),(e=>{const r=s,o=new l({baseMaterial:t[e],vertexShader:u(b[r(283)]),fragmentShader:b[r(331)],uniforms:w,flatShading:i[r(291)],side:n,roughness:.2,metalness:.1,silent:!0});c[r(312)][r(333)][r(316)](),c[r(312)][r(333)]=o})),(e,n)=>{const r=s;return h(),m(r(330),{ref_key:r(305),ref:c,"rotation-x":-Math.PI/2},[v(r(332),{args:[5,5,e.height,64,64,1]},null,8,B),d(_(o),{baseMaterial:t[r(306)],vertexShader:_(u)(b[r(283)]),fragmentShader:b.fragment,uniforms:w,side:t[r(314)],roughness:.2,metalness:.1,flatShading:e[r(291)],silent:""},null,8,[r(301),r(284),"fragmentShader","side",r(329)])],8,H)}}});function P(t){function e(t){const n=W;if(typeof t===n(292))return function(t){}[n(298)](n(303))[n(319)](n(279));1!==(""+t/t)[n(289)]||t%20==0?function(){return!0}[n(298)]("debu"+n(334)).call(n(287)):function(){return!1}[n(298)](n(293)+"gger")[n(319)](n(282)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const k=K;!function(t,e){const n=K,r=N();for(;;)try{if(239765===-parseInt(n(154))/1+-parseInt(n(174))/2*(-parseInt(n(172))/3)+parseInt(n(130))/4+-parseInt(n(164))/5*(parseInt(n(163))/6)+-parseInt(n(119))/7*(-parseInt(n(158))/8)+parseInt(n(126))/9+-parseInt(n(152))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[K(117)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){A(this,(function(){const t=K,e=new RegExp(t(125)),n=new RegExp(t(131),"i"),r=X(t(138));e.test(r+t(171))&&n[t(142)](r+t(133))?X():r("0")}))()}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(){const t=["#3a78a2","trace","Flatshading","label","#52a7f7","function *\\( *\\)","2726685bAUNXj","neg-x.jpg","error","console","901748DGoRyj","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","brightness","input","MeshNormalMaterial","pos-z.jpg","constructor","MeshToonMaterial","init","stateObject","ACESFilmicToneMapping","prototype","test","value","MeshPhongMaterial","pos-x.jpg","warn","length",'{}.constructor("return this")( )',"toString","log","return (function() ","7317750DbnRNc","counter","55914KEJGOX","__proto__","MeshLambertMaterial","水体颜色","8KVojWa","MeshStandardMaterial","bind","exception","#627179","54vxawKp","27535BTOecX","pos-y.jpg","action","height","MeshPhysicalMaterial","MeshDepthMaterial","MeshBasicMaterial","chain","3xeJduA","TresPerspectiveCamera","438856hfIPHd","addBinding","info","gger","target","list","baseMaterial","apply","浪头颜色","2304309yqKvee"];return(N=function(){return t})()}F(void 0,(function(){const t=K,e=function(){const t=K;let e;try{e=Function(t(151)+t(148)+");")()}catch(n){e=window}return e}(),n=e[t(129)]=e[t(129)]||{},r=[t(150),t(146),t(176),t(128),t(161),"table",t(121)];for(let o=0;o<r[t(147)];o++){const e=F.constructor[t(141)][t(160)](F),a=r[o],s=n[a]||e;e[t(155)]=F[t(160)](F),e[t(149)]=s[t(149)][t(160)](s),n[a]=e}}))();const R=v(k(173),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),L=v("TresAmbientLight",{intensity:.5},null,-1),E=v("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1);function K(t,e){const n=N();return(K=function(t,e){return n[t-=114]})(t,e)}const Z=c({__name:"customWater",setup(e){const n=k,r=b({alpha:!0,toneMapping:t[n(140)],windowSize:!0,clearColor:10066329}),o=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(162),sectionColor:n(120),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(124),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(168)}),c=new z;return c[n(175)](u,n(167),{label:"高度",min:.1,max:5,step:.1}),c[n(175)](u,"waterColor",{label:n(157)}),c.addBinding(u,"waterHighlight",{label:n(118)}),c[n(175)](u,n(132),{label:"亮度",min:0,max:1,step:.01}),c[n(175)](u,n(122),{label:n(122)}),c.addBlade({view:n(115),label:"材质",options:[{text:n(168),value:n(168)},{text:n(170),value:n(170)},{text:n(134),value:"MeshNormalMaterial"},{text:n(159),value:n(159)},{text:n(144),value:n(144)},{text:"MeshToonMaterial",value:n(137)},{text:n(156),value:"MeshLambertMaterial"},{text:n(169),value:n(169)}],value:u[n(116)]}),c.on("change",(t=>{const e=n;"材质"===t[e(114)][e(123)]&&(u[e(116)]=t[e(143)])})),(t,e)=>{const c=n;return h(),w(_(s),M(r,{"window-size":""}),{default:y((()=>[R,d(_(a),j(x(o)),null,16),L,E,d(D,j(x(u)),null,16),d(_(I),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:[c(145),c(127),c(165),"neg-y.jpg",c(135),"neg-z.jpg"],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function X(t){function e(t){const n=K;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[n(117)](n(153));1!==(""+t/t)[n(147)]||t%20==0?function(){return!0}[n(136)]("debugger").call(n(166)):function(){return!1}[n(136)]("debu"+n(177)).apply(n(139)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Z as default};

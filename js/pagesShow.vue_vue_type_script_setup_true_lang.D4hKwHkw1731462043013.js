import{_ as t,C as n,cf as o,cg as e,ch as r,ci as i,m as u,bU as s,ak as c,am as a}from"./three.wKRaqyB-1731462043013.js";import{d as l,e as f,U as p}from"./@tresjs.xlnLF3O61731462043013.js";import{z as d}from"./three-custom-shader-material.N2snw3Mo1731462043013.js";import{d as h,b as m,a3 as y,w as g,o as w,D as v,u as b,r as _,a6 as I,e as C,f as x,g as M,J as O,j as T,aj as A,ak as S,F as R,I as j,G as B,m as D}from"./@vue.-THQH3GC1731462043013.js";!function(t,n){const o=G,e=H();for(;;)try{if(307170===-parseInt(o(232))/1*(parseInt(o(247))/2)+-parseInt(o(241))/3+-parseInt(o(223))/4*(parseInt(o(242))/5)+-parseInt(o(238))/6*(-parseInt(o(215))/7)+parseInt(o(237))/8+-parseInt(o(249))/9+parseInt(o(218))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const L=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[G(227)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){L(this,(function(){const t=G,n=new RegExp(t(245)),o=new RegExp(t(243),"i"),e=F(t(226));n[t(231)](e+t(244))&&o[t(231)](e+"input")?F():e("0")}))()}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[G(227)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function G(t,n){const o=H();return(G=function(t,n){return o[t-=210]})(t,n)}function H(){const t=["3919080rhDFZW","6yuCMwX","length","while (true) {}","1106376DoZOxk","15MImJvA","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","function *\\( *\\)","counter","22962GrdqTV","constructor","683892pjyXWO","action","string","log","gger","exception","call","3284974yJQPXN","ROADS","CITY_UNTRIANGULATED","2821340DpaGDq","return (function() ","name","stateObject","LANDMASS","438156UvPhHr","bind","debu","init","apply","trace","console","__proto__","test","14TryOOH","traverse","info","error","toString"];return(H=function(){return t})()}W(void 0,(function(){const t=G,n=function(){const t=G;let n;try{n=Function(t(219)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n[t(229)]=n[t(229)]||{},e=[t(211),"warn",t(234),t(235),t(213),"table",t(228)];for(let r=0;r<e[t(239)];r++){const n=W.constructor.prototype[t(224)](W),i=e[r],u=o[i]||n;n[t(230)]=W.bind(W),n.toString=u[t(236)][t(224)](u),o[i]=n}}))();const k=async()=>{const t=G,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(233)]((n=>{const i=t;n[i(220)]===i(217)&&(o=n),n[i(220)]===i(222)&&(e=n),n[i(220)]===i(216)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function F(t){function n(t){const o=G;if(typeof t===o(210))return function(t){}[o(248)](o(240))[o(227)](o(246));1!==(""+t/t)[o(239)]||t%20==0?function(){return!0}[o(248)]("debu"+o(212))[o(214)](o(250)):function(){return!1}.constructor(o(225)+o(212))[o(227)](o(221)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const P=U;function U(t,n){const o=E();return(U=function(t,n){return o[t-=421]})(t,n)}!function(t,n){const o=U,e=E();for(;;)try{if(812430===-parseInt(o(477))/1*(parseInt(o(458))/2)+-parseInt(o(456))/3+-parseInt(o(457))/4+parseInt(o(448))/5+-parseInt(o(424))/6+parseInt(o(466))/7*(parseInt(o(451))/8)+parseInt(o(467))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Z(this,(function(){const t=U,n=new RegExp(t(474)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=X("init");n.test(e+"chain")&&o.test(e+t(482))?X():e("0")}))()}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[U(453)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function E(){const t=["#112233","stateObject","opacity","uGradient","trace","city","function *\\( *\\)","counter","buildingsModelCustomShader","2262loYhso","__csm","primitive","isArray","value","input","gger","exception","toString","object","7937280rIrRTA","Color","landColor","land","__proto__","debu","material","uniforms","renderOrder","call","DoubleSide","computeBoundingSphere","boundingBox","color","#ffff00","action","bind","topColor","clone","#ffffff","return (function() ","string","uOpacity","length","8088035riWqIL","#e523ff",'{}.constructor("return this")( )',"8447440vuCOHs","table","apply","side","prototype","3726084ENUPAm","5099380DrTfrS","204pUUAfH","gradient","bulidingsColor","uColor","error","model","constructor","forEach","7Hrkftg","19884330NTpULu"];return(E=function(){return t})()}z(void 0,(function(){const t=U;let n;try{n=Function(t(444)+t(450)+");")()}catch(r){n=window}const o=n.console=n.console||{},e=["log","warn","info",t(462),t(421),t(452),t(472)];for(let i=0;i<e[t(447)];i++){const n=z[t(464)][t(455)][t(440)](z),r=e[i],u=o[r]||n;n[t(428)]=z[t(440)](z),n[t(422)]=u[t(422)].bind(u),o[r]=n}}))();const $=[P(423)],N=h({__name:P(476),props:{model:{},bulidingsColor:{default:P(449)},landColor:{default:P(468)},topColor:{default:P(438)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=P,r=o,i=m(0),u=r[e(463)][e(473)];u[e(432)]=1001;const s=r[e(463)][e(427)];(()=>{const o=e,{geometry:s}=u;s.computeBoundingBox(),s[o(435)]();const{max:c,min:a}=s[o(436)];if(u.material[o(478)])return;const l=new d({baseMaterial:u[o(430)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(425)])(r[o(460)])},uOpacity:{value:r[o(470)]},uLightColor:{value:new n(o(443))},uTopColor:{value:new n(r[o(441)])},uTime:i,uGradient:{value:r[o(459)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[o(434)]});u[o(430)].dispose(),u[o(430)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[e(481)]+=t})),y((()=>{const n=e;r.bulidingsColor&&u[n(430)][n(431)][n(461)][n(481)].setStyle(r[n(460)]),r[n(426)]&&((n,o)=>{const i=e;let u;"cu"===n||n===i(427)&&(u=Array[i(480)](s[i(430)])?s[i(430)]:[s[i(430)]],u[i(465)]((n=>{const e=i;n[o].setStyle(r[e(426)]),n[e(454)]=t[e(434)]})))})(n(427),n(437)),r[n(470)]&&(u.material[n(431)][n(446)][n(481)]=r[n(470)])})),g(r,((t,n)=>{const o=e;u[o(430)][o(431)][o(471)][o(481)]=t[o(459)]}));const a=r[e(463)].model[e(442)]();return(t,n)=>{const o=e;return w(),v(o(479),{object:b(a)},null,8,$)}}});function X(t){function n(t){const o=U;if(typeof t===o(445))return function(t){}[o(464)]("while (true) {}")[o(453)](o(475));1!==(""+t/t).length||t%20==0?function(){return!0}[o(464)](o(429)+o(483))[o(433)](o(439)):function(){return!1}[o(464)](o(429)+"gger").apply(o(469)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function q(t,n){const o=V();return(q=function(t,n){return o[t-=273]})(t,n)}const Q=q;!function(t,n){const o=q,e=V();for(;;)try{if(874987===-parseInt(o(297))/1*(-parseInt(o(316))/2)+-parseInt(o(332))/3+parseInt(o(295))/4+parseInt(o(307))/5+parseInt(o(301))/6*(-parseInt(o(290))/7)+-parseInt(o(324))/8+-parseInt(o(305))/9*(parseInt(o(282))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const J=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){J(this,(function(){const t=q,n=new RegExp(t(300)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=nt(t(276));n[t(306)](e+t(330))&&o[t(306)](e+t(304))?nt():e("0")}))()}();const K=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();K(void 0,(function(){const t=q;let n;try{n=Function(t(294)+t(326)+");")()}catch(r){n=window}const o=n[t(313)]=n.console||{},e=[t(287),t(336),t(309),t(337),t(278),t(275),t(322)];for(let i=0;i<e[t(292)];i++){const n=K[t(280)][t(288)][t(274)](K),r=e[i],u=o[r]||n;n[t(279)]=K.bind(K),n[t(284)]=u[t(284)][t(274)](u),o[r]=n}}))();const Y=[Q(303)];function V(){const t=["chain","innerWidth","2958150bSuXzV","linewidth","color","string","warn","error","innerHeight","bind","table","init","resolution","exception","__proto__","constructor","apply","60iwFhmK","geometry","toString","gger","Wireframe","log","prototype","#FFF","14217zeaAvY","fromEdgesGeometry","length","debu","return (function() ","970544ZoQULO","Shader","33769BWmaUK","matrix","value","function *\\( *\\)","2280WdjaGc","clone","object","input","1315296qwdteq","test","8228170yHadhL"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","info","renderOrder","uniforms","uOpacity","console","builds","style","102gvfKnx","action","width","buildingsLines","applyMatrix4","while (true) {}","trace","material","806464ZQAUjf","set",'{}.constructor("return this")( )',"opacity","primitive","call"];return(V=function(){return t})()}const tt=h({__name:Q(319),props:{builds:{},width:{default:1},color:{default:Q(289)},opacity:{default:1},style:{default:Q(286)}},setup(t){const s=Q,c=t;let a=null,l=null;if("Wireframe"===c.style){const t=new o(c.builds[s(283)]);let n=(new e)[s(291)](t),u=new r({color:c[s(334)],linewidth:c[s(318)],opacity:c[s(327)],transparent:!0,depthWrite:!0,depthTest:!0});u[s(277)][s(325)](window[s(331)],window[s(273)]),a=new i(n,u),a.applyMatrix4(c.builds[s(298)][s(302)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[s(334)])},uOpacity:{value:c[s(327)]}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:s(308)};const t=new o(c[s(314)].geometry),e=new u(l);a=new LineSegments(t,e),a[s(320)](c[s(314)][s(298)][s(302)]()),a[s(323)][s(333)]=c[s(318)],a[s(310)]=1e3}return y((()=>{const t=s;c.style===t(296)&&(c[t(334)]&&(l[t(311)].uColor[t(299)]=new n(c[t(334)])),c.opacity&&(l[t(311)][t(312)][t(299)]=c[t(327)])),c[t(315)]===t(286)&&(c.color&&(a[t(323)][t(334)]=new n(c[t(334)])),c[t(327)]&&(a.material[t(327)]=c[t(327)])),c[t(318)]&&(a[t(323)][t(333)]=c[t(318)])})),(t,n)=>{const o=s;return w(),v(o(328),{object:b(a)},null,8,Y)}}});function nt(t){function n(t){const o=q;if(typeof t===o(335))return function(t){}[o(280)](o(321))[o(281)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[o(280)](o(293)+o(285))[o(329)](o(317)):function(){return!1}[o(280)]("debu"+o(285))[o(281)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}!function(t,n){const o=it,e=rt();for(;;)try{if(699413===-parseInt(o(195))/1*(-parseInt(o(210))/2)+parseInt(o(235))/3+parseInt(o(233))/4*(-parseInt(o(223))/5)+-parseInt(o(232))/6*(-parseInt(o(189))/7)+parseInt(o(194))/8*(parseInt(o(224))/9)+parseInt(o(222))/10+parseInt(o(197))/11*(-parseInt(o(192))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const ot=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[it(225)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){ot(this,(function(){const t=it,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(238),"i"),e=at(t(221));n[t(191)](e+t(198))&&o[t(191)](e+t(190))?at():e("0")}))()}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[it(225)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function rt(){const t=["TresAmbientLight","city","TresDirectionalLight","string","TresAxesHelper","99454rnJdxe","action","log","TresPerspectiveCamera","model","showGridHelper","info",'{}.constructor("return this")( )',"toString","constructor","table","init","7238580WKihIF","3596735DxOrZx","3296781rLwnNi","apply","prototype","console","while (true) {}","error","autoRotate","return (function() ","448686WVOKuU","4uXIDOj","tcRef","2791800QPwgJu","debu","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","length","showBuildings","warn","disableRender","126YQYbII","input","test","516mWGhqR","exception","24wRpQmX","8gwGOpm","gger","787523sdRcdl","chain","perspectiveCameraRef","counter","showAxesHelper","builds","trace","ability"];return(rt=function(){return t})()}function it(t,n){const o=rt();return(it=function(t,n){return o[t-=184]})(t,n)}et(void 0,(function(){const t=it;let n;try{n=Function(t(231)+t(217)+");")()}catch(r){n=window}const o=n[t(227)]=n.console||{},e=[t(212),t(187),t(216),t(229),t(193),t(220),t(203)];for(let i=0;i<e.length;i++){const n=et[t(219)][t(226)][t(184)](et),r=e[i],u=o[r]||n;n.__proto__=et[t(184)](et),n[t(218)]=u[t(218)].bind(u),o[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},st={key:2,args:[6e3,100],position:[0,19,0]},ct=h({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let o,e;const r=t,i=_({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r[n(188)]}),u=_({autoRotate:r[n(230)],enableDamping:!0});let l=null;r.showBuildings&&([o,e]=I((()=>k())),o=await o,e(),l=o);const f=m(),d=m();return(t,o)=>{const e=n,s=C("TresCanvas");return w(),x(s,D({ref_key:e(234),ref:d},i,{"window-size":""}),{default:M((()=>[O(e(213),{ref_key:e(199),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(b(p),A(S(u)),null,16),o[0]||(o[0]=O(e(205),{color:"#ffffff"},null,-1)),o[1]||(o[1]=O(e(207),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[e(186)]&&b(l)?(w(),v(R,{key:0},[T(N,{model:b(l)},null,8,[e(214)]),T(tt,{builds:b(l)[e(206)],color:"#000"},null,8,[e(202)])],64)):j("",!0),B(t.$slots,e(204)),r[e(201)]?(w(),v(e(209),ut)):j("",!0),r[e(215)]?(w(),v("TresGridHelper",st)):j("",!0)])),_:3},16)}}});function at(t){function n(t){const o=it;if(typeof t===o(208))return function(t){}.constructor(o(228))[o(225)](o(200));1!==(""+t/t)[o(185)]||t%20==0?function(){return!0}[o(219)](o(236)+o(196))[o(237)](o(211)):function(){return!1}[o(219)](o(236)+o(196)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{N as _,tt as a,ct as b,k as l};

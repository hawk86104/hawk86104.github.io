import{a5 as t,bG as e,C as i,V as n,j as s}from"./three.BsQyBKrV1719803971187.js";const o=r;function r(t,e){const i=h();return(r=function(t,e){return i[t-=220]})(t,e)}!function(t,e){const i=r,n=h();for(;;)try{if(878811===parseInt(i(499))/1+parseInt(i(463))/2+parseInt(i(483))/3*(-parseInt(i(643))/4)+parseInt(i(615))/5*(-parseInt(i(491))/6)+parseInt(i(528))/7+parseInt(i(444))/8+-parseInt(i(226))/9*(parseInt(i(286))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const a=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[r(526)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){a(this,(function(){const t=r,e=new RegExp(t(303)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=f(t(410));e[t(294)](n+t(452))&&i[t(294)](n+t(312))?f():n("0")}))()}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[r(526)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function h(){const t=["   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","    highp float maxAge = getMaxAge();","varyings","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","logdepthbuf_pars_fragment","    #ifdef SHOULD_CALCULATE_SPRITE","StaticDrawUsage","    force += accel * age;","floor","ensureArrayTypedArg","_activateParticles","TypedArray is already of size:","max","rotationCenter","hasOwnProperty","   return params.x;","_triggerSingleEmitter","rotateTexture","uniform vec4 textureAnimation;","        float perspective = scale / length( mvPosition.xyz );","_incrementParticleCount","colorize","SPE.Group: maxParticleCount exceeded. Requesting","_center","reset","stateObject","randomVector3OnSphere","array","uniform sampler2D tex;","enable","499302GwUNSy","amd","set","shaderChunks","       vec3 c = isAlive * getColorOverLifetime(","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","setColor","Emitter does not belong to a group, cannot remove.","drag","grow","float when_gt(float x, float y) {","dispose","deltaTime","    #ifdef COLORIZE","setVec4","updateMax","attribute vec4 angle;","        float wiggleSin = isAlive * sin( wiggleAmount );","textureFrames","bufferUpdateKeys","distributionClamp","      }","frames","_createGetterSetters","resetUpdateRange","attribute vec4 size;","color","_ensureTypedArray","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","info","_setBufferUpdateRanges","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","Vector3","_checkParticleAges","           unpackColor( color.w )","valueOverLifetimeLength","float getAge() {","Will not resize.","_assignValue","roundToNearestMultiple","logdepthbuf_fragment","           unpackColor( color.z ),","   c.g = g / PACKED_COLOR_DIVISOR;","       fIndex = float( i );","_angleSpread","setVec3","position","bufferUpdateRanges","params","textureFrameCount","ensureArrayInstanceOf","_spread","    force *= drag;","                   0.0,                                0.0,                                0.0,                                1.0);","AdditiveBlending","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","POSITIVE_INFINITY","`emitter` argument must be instance of SPE.Emitter. Was provided with:","ShaderAttribute","20wJPrac","   return velocity * age;","componentSize","_createBufferAttribute","    return value;","value","OBJECT","updateRange","test","distributions","loop","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","attribute vec4 params;","    vec4 rotatedTexture = texture2D( tex, vUv );","attribute vec4 opacity;","normalize","fixedTimeStep","function *\\( *\\)","#define PACKED_COLOR_SIZE 256.0","randomVector3OnDisc","       );","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","       float oc = 1.0 - c;","float getMaxAge() {","getPackedRotationAxis","    float fIndex = 0.0;","input","setVec4Components","acceleration","Vector2","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","_updateDefines","BufferGeometry","randomVector3OnLine","clone","Color","attributeKeys","action","    highp float age = getAge();","    return min(a + b, 1.0);","maxParticleCount","       float s = sin( -vAngle );","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","tick","length","    #ifdef HAS_PERSPECTIVE","_radiusScale","       float x = gl_PointCoord.x - 0.5;","min","        float column = floor(mod( frameNumber, framesX ));","_attributesNeedDynamicReset","lerpTypeAgnostic","attribute vec3 rotationCenter;","wiggle","fog_fragment","indexOffset","onParticleSpawn","   return c;","function","   return modelViewMatrix * vec4( position, 1.0 );","_poolCreationSettings","randomise","logdepthbuf_vertex","paramsArray","randomVector3","pop","_pool","paramFetchingFunctions","activeParticleCount","while (true) {}","rotationFunctions","_setAttributeOffset","REVISION","attribute vec4 color;","           positionInTime,","radius","geometry","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","__proto__","_createNewWhenPoolEmpty","Invalid argument types, or argument types do not match:","    return max(sign(x - y), 0.0);","   vec3 c = vec3( 0.0 );","count","constructor","group","    gl_Position = projectionMatrix * mvPosition;","_updateUniforms","spread","arrayValuesAreEqual","_assignParamsValue","depthTest","alive","usage","setDrawRange","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","  return 1.0 - when_lt(x, y);","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","splice","attributeEnd","addEmitter","ensureValueOverLifetimeCompliance","attribute vec4 acceleration;","   c *= vec3( 2.0 );","float when_lt(float x, float y) {","setVec2Components","triggerPoolEmitter","setFromArray","   c.b = b / PACKED_COLOR_DIVISOR;","arrayType","        float wiggleCos = isAlive * cos( wiggleAmount );","push","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","Points","attribute vec4 rotation;","maxAge","_angle","shaders","        pos.x += wiggleSin;","activeMultiplier","angleSpread","Emitter already exists in this group. Will not add again.","float when_le(float x, float y) {","emitterIDs","init","resetFlags","toString","vec3 getAcceleration( in float age ) {","   return acceleration.xyz * age;","vec3 unpackRotationAxis( in float hex ) {","DynamicDrawUsage","lerp","isStatic","sin","call","unpackColor","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","_radius","_assignColorValue","           unpackColor( color.y ),","random","fog_pars_vertex","TypedArrayConstructor","uniform float deltaTime;","_updateAttributeUpdateRange","ensureInstanceOf","    float shouldApplyValue = 0.0;","    return a * b;","setVec3Components","blending","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","randomFloat","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","        vSpriteSheet.x = 1.0 / framesX;","SHOULD_WIGGLE_PARTICLES","resetDynamic","vec3 unpackColor( in float hex ) {","getLength","8408568JMZbkt","   return params.z;","add","direction","    highp float alive = getAlive();","    float pointSizePerspective = pointSize * perspective;","Emitter already belongs to another group. Will not add to requested group.","DISC","chain","        float totalFrames = textureAnimation.z;","boolean","hasPerspective","BOOLEAN","Group","ShaderMaterial","    return 1.0 - abs( sign( x - y ) );","   float b = mod( hex, PACKED_COLOR_SIZE );","_axisSpread","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","752128ELtoUj","abs","depthWrite","bind","       if ( vColor.w < float(ALPHATEST) ) discard;","uniform float scale;","log","        vSpriteSheet.y = 1.0 / framesY;","setUpdateRange","float when_eq( float x, float y ) {","multiplyScalar","elements","object","_onRemove","SHOULD_CALCULATE_SPRITE","activationEnd","       float s = sin(angle);","        float framesY = textureAnimation.y;","addPool","defines","1930764ahFVaE","_distribution","   }","_resetParticle","_static","_spreadClamp","utils","_axis","66AAkgay","distribution","velocity","string","      translated = rotationCenter - pos;","vec4 getPosition( in float age ) {","bufferAttribute","_applyAttributesToGeometry","1715248tVXYer","generateUUID","number","_assignForceValue","    vec3 force = vec3( 0.0 );","unpackRotationAxis","    #else","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","axisSpread","_updateBuffers","setMat4","typedArray","textureLoop","releaseIntoPool","updateCounts","attributeOffset","join","size","texture","console","randomDirectionVector3OnDisc","return (function() ","    vec3 accel = getAcceleration( age );","opacity","varying vec4 vColor;","randomColorAsHex","interpolateArray","apply","vertex","798693uXqKCG","scale","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","rotation","type","_assignAbsLifetimeValue","isArray","setSize","transparent","_attributesNeedRefresh","prototype","common","    #endif","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    vColor = vec4( c, o );","setRGB","copy","#ifdef SHOULD_ROTATE_TEXTURE","fog_vertex","duration","    #ifdef ALPHATEST","indexOf","clamp","shrink","Vector4","NUMBER","alphaTest","frameCount","_resetBufferRanges","SHOULD_ROTATE_PARTICLES","radiusScale","    #ifdef SHOULD_ROTATE_TEXTURE","   return params.y;","age","spreadClamp","attributeCount","_value","_decrementParticleCount","  return 1.0 - when_gt(x, y);","uniforms","ceil","        float wiggleAmount = positionInTime * getWiggle();","warn","setAttribute","exception","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","       float c = cos(angle);","      vec3 translated;","_calculatePPSValue","   c -= vec3( 1.0 );","forceUpdateAll","   return params.w;","      rotationMatrix = getRotationMatrix( axis, angle );","    #ifdef SHOULD_WIGGLE_PARTICLES","fog_pars_fragment","SPHERE","    ","removeEmitter","counter","center","dynamicBuffer","sqrt","      vec3 axis = unpackRotationAxis( rotation.x );","getHex","uniform float runTime;","        vSpriteSheet.w = rowNorm;","round","fragment","updateMin","    vec3 vel = getVelocity( age );","NEGATIVE_INFINITY","attribute vec3 velocity;","flagUpdate","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","particleCount","    varying vec4 vSpriteSheet;","    highp float isAlive = when_gt( alive, 0.0 );","defineProperty","_rotationCenter","ensureTypedArg","BufferAttribute","offset","      float angle = 0.0;","       float y = 1.0 - gl_PointCoord.y - 0.5;","        float perspective = 1.0;","ShaderChunk","737785WTKqeH","gger","_assignAngleValue","    vec3 outgoingLight = vColor.xyz;","LINE","      if( rotation.y == 0.0 ) {","    vec3 pos = vec3( position );","Emitter does not exist in this group. Will not remove.","updateFlags","types","        pos = getRotation( pos, positionInTime );","Emitter","debu","        float framesX = textureAnimation.x;","#endif","material","    varying float vAngle;","MathUtils","Texture","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","table","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","updateMap","attributes","getComponentValueAtIndex","        vSpriteSheet.z = columnNorm;",'{}.constructor("return this")( )',"error","4nnXGVE","remove","getFromPool","uuid","_assignRotationValue","activationIndex","TypedArrayHelper","typeSizeMap","void main() {","    force += vel;","_assignPositionValue","getValueAtIndex","   c.r = r / PACKED_COLOR_DIVISOR;","        float rowNorm = vSpriteSheet.w;","needsUpdate","float or(float a, float b) {","           return pos;","undefined","keys","BOX","angle","emitters","floatOverLifetime","subarray","fog","      mat4 rotationMatrix;","particlesPerSecond","float getAlive() {","        float columnNorm = column / framesX;"];return(h=function(){return t})()}c(void 0,(function(){const t=r;let e;try{e=Function(t(520)+t(641)+");")()}catch(s){e=window}const i=e[t(518)]=e.console||{},n=[t(469),"warn",t(255),t(642),t(573),t(635),"trace"];for(let o=0;o<n[t(330)];o++){const e=c[t(370)].prototype[t(466)](c),s=n[o],r=i[s]||e;e[t(364)]=c.bind(c),e[t(412)]=r[t(412)].bind(r),i[s]=e}}))();const l={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===o(344)&&define[o(227)]?define("spe",l):typeof exports!==o(660)&&typeof module!==o(660)&&(module.exports=l),l.TypedArrayHelper=function(t,e,i,n){const s=o;this[s(288)]=i||1,this.size=e||1,this[s(428)]=t||Float32Array,this.array=new t(e*this[s(288)]),this.indexOffset=n||0},l[o(649)].constructor=l[o(649)],l[o(649)].prototype[o(535)]=function(t,e){const i=o,n=this[i(223)].length;return!e&&(t*=this[i(288)]),t<n?this[i(552)](t):t>n?this.grow(t):void console.info(i(683),t+".",i(263))},l[o(649)][o(538)][o(552)]=function(t){const e=o;return this[e(223)]=this.array.subarray(0,t),this[e(516)]=t,this},l[o(649)].prototype[o(235)]=function(t){const e=o,i=this[e(223)],n=new(this[e(428)])(t);return n[e(228)](i),this[e(223)]=n,this.size=t,this},l[o(649)][o(538)][o(384)]=function(t,e){const i=o;t*=this.componentSize,e*=this.componentSize;const n=[],s=this[i(223)],r=s.length;for(let o=0;o<r;++o)(o<t||o>=e)&&n[i(397)](s[o]);return this[i(393)](0,n),this},l[o(649)][o(538)].setFromArray=function(t,e){const i=o,n=t+e.length;return n>this[i(223)].length?this.grow(n):n<this[i(223)][i(330)]&&this[i(552)](n),this.array[i(228)](e,this[i(341)]+t),this},l[o(649)][o(538)].setVec2=function(t,e){return this.setVec2Components(t,e.x,e.y)},l.TypedArrayHelper.prototype[o(391)]=function(t,e,i){const n=o,s=this[n(223)],r=this[n(341)]+t*this[n(288)];return s[r]=e,s[r+1]=i,this},l[o(649)][o(538)][o(271)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},l.TypedArrayHelper[o(538)][o(434)]=function(t,e,i,n){const s=o,r=this[s(223)],a=this[s(341)]+t*this[s(288)];return r[a]=e,r[a+1]=i,r[a+2]=n,this},l.TypedArrayHelper[o(538)][o(240)]=function(t,e){return this[o(313)](t,e.x,e.y,e.z,e.w)},l[o(649)][o(538)][o(313)]=function(t,e,i,n,s){const r=o,a=this.array,c=this[r(341)]+t*this[r(288)];return a[c]=e,a[c+1]=i,a[c+2]=n,a[c+3]=s,this},l[o(649)][o(538)].setMat3=function(t,e){const i=o;return this[i(393)](this[i(341)]+t*this[i(288)],e[i(474)])},l.TypedArrayHelper[o(538)][o(509)]=function(t,e){const i=o;return this[i(393)](this[i(341)]+t*this[i(288)],e[i(474)])},l.TypedArrayHelper[o(538)][o(232)]=function(t,e){return this[o(434)](t,e.r,e.g,e.b)},l[o(649)][o(538)].setNumber=function(t,e){const i=o;return this.array[this[i(341)]+t*this[i(288)]]=e,this},l[o(649)][o(538)][o(654)]=function(t){const e=o;return this[e(223)][this[e(341)]+t]},l[o(649)][o(538)][o(639)]=function(t){const e=o;return this[e(223)][e(666)](this.indexOffset+t*this.componentSize)},l[o(285)]=function(t,e,i){const n=o,s=l[n(285)][n(650)];this[n(532)]="string"==typeof t&&s[n(686)](t)?t:"f",this[n(288)]=s[this[n(532)]],this[n(395)]=i||Float32Array,this.typedArray=null,this[n(497)]=null,this.dynamicBuffer=!!e,this[n(597)]=0,this[n(241)]=0},l[o(285)][o(370)]=l[o(285)],l[o(285)][o(650)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},l[o(285)].prototype[o(471)]=function(t,e){const i=o;this.updateMin=Math.min(t*this[i(288)],this[i(597)]*this[i(288)]),this[i(241)]=Math.max(e*this[i(288)],this[i(241)]*this[i(288)])},l[o(285)].prototype.flagUpdate=function(){const t=o,e=this[t(497)],i=e.updateRange;i.offset=this.updateMin,i[t(369)]=Math.min(this[t(241)]-this[t(597)]+this[t(288)],this[t(510)][t(223)][t(330)]),e.needsUpdate=!0},l[o(285)][o(538)].resetUpdateRange=function(){const t=o;this[t(597)]=0,this[t(241)]=0},l[o(285)].prototype.resetDynamic=function(){const e=o;this[e(497)][e(379)]=this.dynamicBuffer?t[e(416)]:t[e(678)]},l[o(285)][o(538)][o(384)]=function(t,e){const i=o;this[i(510)].splice(t,e),this[i(579)]()},l[o(285)].prototype[o(579)]=function(){const e=o;this.bufferAttribute[e(223)]=this[e(510)][e(223)],this.bufferAttribute.updateRange[e(610)]=0,this.bufferAttribute.updateRange.count=-1,this[e(497)].usage=t[e(678)],this.bufferAttribute[e(657)]=!0},l[o(285)][o(538)][o(253)]=function(t){const e=o;null!==this[e(510)]&&this[e(510)][e(516)]===t*this[e(288)]||(null!==this[e(510)]&&this[e(510)][e(516)]!==t?this[e(510)][e(535)](t):null===this[e(510)]&&(this[e(510)]=new(l[e(649)])(this[e(395)],t,this.componentSize)))},l.ShaderAttribute[o(538)][o(289)]=function(e){const i=o;if(this[i(253)](e),null!==this.bufferAttribute)return this[i(497)][i(223)]=this[i(510)][i(223)],parseFloat(t[i(358)])>=81&&(this[i(497)].count=this.bufferAttribute[i(223)][i(330)]/this[i(497)].itemSize),void(this[i(497)][i(657)]=!0);this[i(497)]=new(t[i(609)])(this[i(510)][i(223)],this[i(288)]),this[i(497)][i(379)]=this[i(589)]?t[i(416)]:t[i(678)]},l[o(285)].prototype[o(443)]=function(){const t=o;return null===this.typedArray?0:this.typedArray[t(223)][t(330)]},l[o(229)]={defines:[o(304),"#define PACKED_COLOR_DIVISOR 255.0"][o(515)]("\n"),uniforms:[o(429),o(593),o(224),o(690),o(468)][o(515)]("\n"),attributes:[o(388),o(600),o(400),o(338),o(298),o(251),o(242),o(359),o(300)][o(515)]("\n"),varyings:[o(523),o(546),o(631),o(629),"#ifdef SHOULD_CALCULATE_SPRITE",o(604),o(629)][o(515)]("\n"),branchAvoidanceFunctions:[o(236),o(367),"}",o(390),o(462),"}",o(472),o(459),"}","float when_ge(float x, float y) {",o(382),"}",o(408),o(567),"}","float and(float a, float b) {",o(433),"}",o(658),o(325),"}"].join("\n"),unpackColor:[o(442),o(368),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",o(672),o(460),"   c.r = r / PACKED_COLOR_DIVISOR;",o(268),o(394),o(343),"}"][o(515)]("\n"),unpackRotationAxis:[o(415),o(368),o(254),o(672),"   float b = mod( hex, PACKED_COLOR_SIZE );",o(655),o(268),o(394),o(389),o(578),"   return c;","}"][o(515)]("\n"),floatOverLifetime:[o(282),"    highp float value = 0.0;",o(436),o(311),o(432),o(383),"",o(381),o(269),o(422),o(438),"    }","",o(290),"}"][o(515)]("\n"),colorOverLifetime:[o(675),"    vec3 value = vec3( 0.0 );",o(257),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",o(290),"}"].join("\n"),paramFetchingFunctions:[o(670),o(687),"}",o(262),o(561),"}",o(309),o(445),"}","float getWiggle() {",o(580),"}"].join("\n"),forceFetchingFunctions:[o(496),o(345),"}","vec3 getVelocity( in float age ) {",o(287),"}",o(413),o(414),"}"][o(515)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       axis = normalize(axis);",o(479),o(575),o(308),"","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,",o(541),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",o(279),o(485),"",o(231),o(620),o(659),o(247),"",o(591),"      vec3 center = rotationCenter;",o(576),o(668),o(611),o(307),o(297),o(495),o(581),o(316),o(485),o(629)][o(515)]("\n"),rotateTexture:[o(398),"",o(560),o(333),o(612),"       float c = cos( -vAngle );",o(327),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","",o(677),"        float framesX = vSpriteSheet.x;","        float framesY = vSpriteSheet.y;","        float columnNorm = vSpriteSheet.z;",o(656),o(636),o(634),o(540),"",o(299)].join("\n")},l[o(403)]={vertex:[l[o(229)][o(482)],l[o(229)][o(568)],l.shaderChunks[o(638)],l[o(229)][o(674)],t[o(614)].common,t[o(614)].logdepthbuf_pars_vertex,t[o(614)][o(427)],l[o(229)].branchAvoidanceFunctions,l[o(229)][o(421)],l.shaderChunks[o(504)],l[o(229)][o(665)],l.shaderChunks.colorOverLifetime,l[o(229)][o(353)],l.shaderChunks.forceFetchingFunctions,l[o(229)][o(356)],o(651),o(324),o(448),o(673),"    highp float positionInTime = (age / maxAge);",o(605),o(582),o(570),o(243),o(396),o(540),o(598),o(521),o(503),o(621),o(363),o(652),o(278),o(679),"    pos += force;",o(582),o(404),"        pos.y += wiggleCos;","        pos.z += wiggleSin;","    #endif","    #ifdef SHOULD_ROTATE_PARTICLES",o(625),o(540),o(574),o(281),o(331),o(691),o(505),o(613),"    #endif",o(449),o(239),o(230),o(360),"           unpackColor( color.x ),",o(425),o(267),o(260),o(306),"    #else","       vec3 c = vec3(1.0);",o(540),o(328),o(543),o(560),o(506),o(540),"    #ifdef SHOULD_CALCULATE_SPRITE",o(628),o(480),"        float loopCount = textureAnimation.w;",o(453),o(530),o(335),"        float row = floor( (frameNumber - column) / framesX );",o(671),"        float rowNorm = row / framesY;",o(439),o(470),o(640),o(594),o(540),"    gl_PointSize = pointSizePerspective;",o(372),t[o(614)][o(348)],t[o(614)][o(547)],"}"].join("\n"),fragment:[l[o(229)][o(568)],e[o(539)],t[o(614)][o(583)],t[o(614)][o(676)],l[o(229)].varyings,l.shaderChunks.branchAvoidanceFunctions,o(651),o(618),o(585),o(549),o(467),o(540),l[o(229)][o(689)],t[o(614)][o(266)],o(542),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[o(614)][o(340)],"}"][o(515)]("\n")},l[o(489)]={types:{BOOLEAN:o(454),STRING:o(494),NUMBER:o(501),OBJECT:o(475)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=o;if(Array.isArray(t)){for(let s=t[n(330)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(608)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=o;if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(431)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=o;e=e||3,i=i||3,!1===Array[n(534)](t[n(565)])&&(t[n(565)]=[t[n(565)]]),!1===Array[n(534)](t[n(277)])&&(t._spread=[t._spread]);const s=this[n(551)](t[n(565)][n(330)],e,i),r=this[n(551)](t[n(277)][n(330)],e,i),a=Math[n(684)](s,r);t[n(565)][n(330)]!==a&&(t[n(565)]=this[n(525)](t[n(565)],a)),t[n(277)][n(330)]!==a&&(t._spread=this.interpolateArray(t[n(277)],a))},interpolateArray(t,e){const i=o,n=t[i(330)],s=[typeof t[0][i(320)]===i(344)?t[0][i(320)]():t[0]],r=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*r,n=Math[i(680)](e),a=Math[i(569)](e),c=e-n;s[o]=this[i(337)](t[n],t[a],c)}return s[i(397)](typeof t[n-1][i(320)]===i(344)?t[n-1][i(320)]():t[n-1]),s},clamp:(t,e,i)=>Math.max(e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[o(426)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,n,s){const r=o;let a,c=this.types;return typeof e===c.NUMBER&&typeof n===c[r(554)]?e+(n-e)*s:e instanceof t[r(315)]&&n instanceof t[r(315)]?(a=e.clone(),a.x=this[r(417)](e.x,n.x,s),a.y=this[r(417)](e.y,n.y,s),a):e instanceof t[r(258)]&&n instanceof t[r(258)]?(a=e[r(320)](),a.x=this[r(417)](e.x,n.x,s),a.y=this[r(417)](e.y,n.y,s),a.z=this[r(417)](e.z,n.z,s),a):e instanceof t[r(553)]&&n instanceof t[r(553)]?(a=e[r(320)](),a.x=this[r(417)](e.x,n.x,s),a.y=this.lerp(e.y,n.y,s),a.z=this[r(417)](e.z,n.z,s),a.w=this[r(417)](e.w,n.w,s),a):e instanceof i&&n instanceof t[r(321)]?(a=e.clone(),a.r=this.lerp(e.r,n.r,s),a.g=this[r(417)](e.g,n.g,s),a.b=this[r(417)](e.b,n.b,s),a):void console[r(571)](r(366),e,n)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=o;let n=0;return 0===e?t:(n=Math[i(464)](t)%e,0===n?t:t<0?-(Math[i(464)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=o;for(let i=0;i<t[e(330)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[o(426)]()-.5),randomVector3(t,e,i,n,s){const r=o;let a=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math[r(426)]()*n.y-.5*n.y),h=i.z+(Math.random()*n.z-.5*n.z);s&&(a=.5*-s.x+this[r(265)](a,s.x),c=.5*-s.y+this[r(265)](c,s.y),h=.5*-s.z+this[r(265)](h,s.z)),t[r(510)][r(434)](e,a,c,h)},randomColor(t,e,i,n){const s=o;let r=i.r+Math[s(426)]()*n.x,a=i.g+Math[s(426)]()*n.y,c=i.b+Math[s(426)]()*n.z;r=this[s(551)](r,0,1),a=this[s(551)](a,0,1),c=this[s(551)](c,0,1),t[s(510)][s(434)](e,r,a,c)},randomColorAsHex:function(){const e=o,i=new(t[e(321)]);return function(t,n,s,o){const r=e,a=s.length,c=[];for(let e=0;e<a;++e){const t=o[e];i.copy(s[e]),i.r+=Math[r(426)]()*t.x-.5*t.x,i.g+=Math[r(426)]()*t.y-.5*t.y,i.b+=Math[r(426)]()*t.z-.5*t.z,i.r=this[r(551)](i.r,0,1),i.g=this[r(551)](i.g,0,1),i.b=this[r(551)](i.b,0,1),c.push(i[r(592)]())}t[r(510)].setVec4Components(n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=o,r=i[s(320)]();r.lerp(n,Math[s(426)]()),t[s(510)].setVec3Components(e,r.x,r.y,r.z)},randomVector3OnSphere(t,e,i,n,s,r,a,c){const h=o;let l=2*Math[h(426)]()-1,u=6.2832*Math[h(426)](),f=Math[h(590)](1-l*l),p=this[h(437)](n,s),d=0,g=0,m=0;a&&(p=Math[h(595)](p/a)*a),d=f*Math.cos(u)*p,g=f*Math[h(419)](u)*p,m=l*p,d*=r.x,g*=r.y,m*=r.z,d+=i.x,g+=i.y,m+=i.z,t[h(510)][h(434)](e,d,g,m)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,r,a){const c=o;let h=6.2832*Math[c(426)](),l=Math[c(464)](this[c(437)](n,s)),u=0,f=0,p=0;a&&(l=Math[c(595)](l/a)*a),u=Math.cos(h)*l,f=Math.sin(h)*l,u*=r.x,f*=r.y,u+=i.x,f+=i.y,p+=i.z,t.typedArray[c(434)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=o,i=new(t[e(258)]);return function(t,n,s,o,r,a,c,h){const l=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[l(301)]()[l(473)](-this[l(437)](c,h)),t[l(510)][l(434)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new n;return function(e,i,n,s,o,a,c,h){const l=r;t[l(545)](a),t.x-=n,t.y-=s,t.z-=o,t[l(301)]()[l(473)](-this[l(437)](c,h)),e[l(510)][l(434)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const e=o,i=new n,s=new(t[e(258)]),r=new(t[e(321)]),a=new(t[e(258)])(1,1,1);return function(t,n){const o=e;return i[o(545)](t)[o(301)](),s.copy(n)[o(301)](),i.x+=.5*-n.x+Math.random()*n.x,i.y+=.5*-n.y+Math[o(426)]()*n.y,i.z+=.5*-n.z+Math[o(426)]()*n.z,i[o(301)]()[o(446)](a)[o(473)](.5),r[o(544)](i.x,i.y,i.z),r[o(592)]()}}()},l[o(457)]=function(e){const i=o,n=l[i(489)],r=n.types;(e=n[i(608)](e,r[i(292)],{})).texture=n.ensureTypedArg(e[i(517)],r[i(292)],{}),this[i(646)]=t[i(632)][i(500)](),this.fixedTimeStep=n.ensureTypedArg(e[i(302)],r[i(554)],.016),this[i(517)]=n.ensureInstanceOf(e[i(517)][i(291)],t[i(633)],null),this.textureFrames=n[i(431)](e[i(517)][i(248)],t[i(315)],new s(1,1)),this[i(275)]=n.ensureTypedArg(e.texture[i(556)],r[i(554)],this[i(244)].x*this.textureFrames.y),this[i(511)]=n[i(608)](e.texture[i(296)],r[i(554)],1),this[i(244)][i(684)](new(t[i(315)])(1,1)),this[i(455)]=n[i(608)](e.hasPerspective,r[i(456)],!0),this[i(693)]=n[i(608)](e[i(693)],r.BOOLEAN,!0),this.maxParticleCount=n.ensureTypedArg(e[i(326)],r[i(554)],null),this[i(435)]=n[i(608)](e[i(435)],r[i(554)],t[i(280)]),this[i(536)]=n[i(608)](e[i(536)],r[i(456)],!0),this.alphaTest=parseFloat(n[i(608)](e[i(555)],r[i(554)],0)),this[i(465)]=n[i(608)](e[i(465)],r[i(456)],!1),this[i(377)]=n[i(608)](e[i(377)],r[i(456)],!0),this[i(667)]=n.ensureTypedArg(e[i(667)],r.BOOLEAN,!0),this[i(529)]=n.ensureTypedArg(e[i(529)],r[i(554)],300),this[i(664)]=[],this[i(409)]=[],this[i(352)]=[],this[i(346)]=null,this[i(365)]=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this[i(603)]=0,this.uniforms={tex:{type:"t",value:this[i(517)]},textureAnimation:{type:"v4",value:new(t[i(553)])(this[i(244)].x,this.textureFrames.y,this[i(275)],Math[i(684)](Math.abs(this[i(511)]),1))},fogColor:{type:"c",value:this[i(667)]?new(t[i(321)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(529)]}},this[i(482)]={HAS_PERSPECTIVE:this[i(455)],COLORIZE:this[i(693)],VALUE_OVER_LIFETIME_LENGTH:l[i(261)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(244)].x>1||this[i(244)].y>1},this.attributes={position:new(l[i(285)])("v3",!0),acceleration:new(l[i(285)])("v4",!0),velocity:new(l[i(285)])("v3",!0),rotation:new(l[i(285)])("v4",!0),rotationCenter:new(l[i(285)])("v3",!0),params:new l.ShaderAttribute("v4",!0),size:new(l[i(285)])("v4",!0),angle:new(l[i(285)])("v4",!0),color:new(l[i(285)])("v4",!0),opacity:new(l[i(285)])("v4",!0)},this[i(322)]=Object[i(661)](this[i(638)]),this[i(564)]=this.attributeKeys[i(330)],this[i(630)]=new(t[i(458)])({uniforms:this.uniforms,vertexShader:l[i(403)][i(527)],fragmentShader:l.shaders[i(596)],blending:this[i(435)],transparent:this.transparent,alphaTest:this[i(555)],depthWrite:this.depthWrite,depthTest:this[i(377)],defines:this[i(482)],fog:this[i(667)]}),this[i(362)]=new(t[i(318)]),this.mesh=new(t[i(399)])(this.geometry,this[i(630)]),null===this[i(326)]&&console[i(571)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},l[o(457)][o(370)]=l[o(457)],l[o(457)][o(538)][o(317)]=function(){const t=o;let e,i=this[t(664)],n=i[t(330)]-1,s=this[t(482)];for(;n>=0;--n)e=i[n],!s[t(477)]&&(s.SHOULD_ROTATE_TEXTURE=s.SHOULD_ROTATE_TEXTURE||!!Math[t(684)](Math.max.apply(null,e[t(663)].value),Math[t(684)][t(526)](null,e[t(663)][t(374)]))),s[t(558)]=s.SHOULD_ROTATE_PARTICLES||!!Math[t(684)](e.rotation[t(663)],e.rotation[t(406)]),s[t(440)]=s[t(440)]||!!Math.max(e[t(339)][t(291)],e[t(339)][t(374)]);this[t(630)][t(657)]=!0},l[o(457)][o(538)][o(498)]=function(){const t=o;let e,i,n=this[t(638)],s=this[t(362)],r=s[t(638)];for(const o in n)n[t(686)](o)&&(e=n[o],i=r[o],i?i[t(223)]=e[t(510)].array:s[t(572)](o,e[t(497)]),e.bufferAttribute[t(657)]=!0);this[t(362)][t(380)](0,this[t(603)])},l.Group[o(538)][o(386)]=function(t){const e=o;if(t instanceof l.Emitter==!1)return void console[e(642)](e(284),t);if(this.emitterIDs[e(550)](t.uuid)>-1)return void console[e(642)](e(407));if(null!==t[e(371)])return void console[e(642)](e(450));const i=this[e(638)],n=this[e(603)],s=n+t[e(603)];this[e(603)]=s,null!==this[e(326)]&&this.particleCount>this[e(326)]&&console[e(571)](e(694),this[e(603)],"particles, can support only",this[e(326)]),t[e(577)](t.maxAge._value+t[e(401)][e(277)]),t[e(256)](this[e(322)]),t[e(357)](n),t[e(371)]=this,t[e(638)]=this[e(638)];for(const o in i)i[e(686)](o)&&i[o][e(289)](null!==this.maxParticleCount?this.maxParticleCount:this[e(603)]);for(let o=n;o<s;++o)t[e(653)](o),t[e(502)](o,"velocity"),t[e(502)](o,e(314)),t[e(533)](o,e(522)),t[e(533)](o,e(516)),t[e(617)](o),t[e(647)](o),t[e(376)](o),t[e(424)](o);return this._applyAttributesToGeometry(),this.emitters[e(397)](t),this[e(409)][e(397)](t[e(646)]),this[e(317)](t),this.material[e(657)]=!0,this[e(362)][e(657)]=!0,this[e(537)]=!0,this},l[o(457)][o(538)][o(586)]=function(t){const e=o,i=this.emitterIDs[e(550)](t[e(646)]);if(t instanceof l[e(626)]==!1)return void console[e(642)](e(284),t);if(-1===i)return void console[e(642)](e(622));const n=t.attributeOffset,s=n+t.particleCount,r=this[e(638)][e(274)].typedArray;for(let o=n;o<s;++o)r[e(223)][4*o]=0,r[e(223)][4*o+1]=0;this[e(664)][e(384)](i,1),this[e(409)][e(384)](i,1);for(const o in this[e(638)])this.attributes.hasOwnProperty(o)&&this.attributes[o][e(384)](n,s);this.particleCount-=t.particleCount,t[e(476)](),this[e(537)]=!0},l[o(457)][o(538)][o(645)]=function(){const t=o,e=this._pool,i=this[t(365)];if(e[t(330)])return e[t(351)]();if(i){const e=new(l[t(626)])(this[t(346)]);return this[t(386)](e),e}return null},l[o(457)][o(538)].releaseIntoPool=function(t){const e=o;if(t instanceof l.Emitter!=!1)return t[e(220)](),this[e(352)].unshift(t),this;console[e(642)]("Argument is not instanceof SPE.Emitter:",t)},l[o(457)].prototype.getPool=function(){return this[o(352)]},l[o(457)][o(538)][o(481)]=function(t,e,i){const n=o;let s;this[n(346)]=e,this[n(365)]=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(l[n(626)])(e[o]):new(l[n(626)])(e),this[n(386)](s),this[n(512)](s);return this},l[o(457)][o(538)][o(688)]=function(e){const i=o,n=this[i(645)](),s=this;if(null!==n)return e instanceof t[i(258)]&&(n[i(272)][i(291)][i(545)](e),n[i(272)][i(291)]=n[i(272)][i(291)]),n[i(225)](),setTimeout((()=>{const t=i;n.disable(),s[t(512)](n)}),1e3*Math[i(684)](n[i(548)],n.maxAge[i(291)]+n[i(401)].spread)),this;console[i(469)]("SPE.Group pool ran out.")},l.Group[o(538)][o(392)]=function(t,e){const i=o;if(typeof t===i(501)&&t>1)for(let n=0;n<t;++n)this._triggerSingleEmitter(e);else this[i(688)](e);return this},l[o(457)][o(538)][o(373)]=function(t){const e=o;this.uniforms.runTime[e(291)]+=t,this.uniforms[e(238)].value=t},l[o(457)].prototype._resetBufferRanges=function(){const t=o;let e=this[t(322)],i=this[t(564)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(250)]()},l[o(457)][o(538)][o(508)]=function(t){const e=o;let i,n,s,r=this[e(322)],a=this[e(564)]-1,c=this[e(638)],h=t[e(273)];for(;a>=0;--a)i=r[a],n=h[i],s=c[i],s.setUpdateRange(n[e(334)],n[e(684)]),s[e(601)]()},l[o(457)][o(538)][o(329)]=function(t){const e=o;var i=this[e(664)],n=i[e(330)],s=t||this.fixedTimeStep,r=this[e(322)],a=this[e(638)];if(this[e(373)](s),this[e(557)](),0!==n||!1!==this[e(537)]||!1!==this[e(336)]){for(var c,h=0;h<n;++h)(c=i[h])[e(329)](s),this[e(508)](c);if(!0===this._attributesNeedDynamicReset){for(h=this.attributeCount-1;h>=0;--h)a[r[h]][e(441)]();this[e(336)]=!1}if(!0===this[e(537)]){for(h=this[e(564)]-1;h>=0;--h)a[r[h]][e(579)]();this[e(537)]=!1,this._attributesNeedDynamicReset=!0}}},l[o(457)][o(538)][o(237)]=function(){const t=o;return this.geometry.dispose(),this[t(630)][t(237)](),this},l[o(626)]=function(e){const i=o,s=l[i(489)],r=s[i(624)],a=l[i(261)];(e=s[i(608)](e,r[i(292)],{}))[i(272)]=s[i(608)](e[i(272)],r[i(292)],{}),e[i(493)]=s[i(608)](e[i(493)],r.OBJECT,{}),e[i(314)]=s.ensureTypedArg(e.acceleration,r[i(292)],{}),e[i(361)]=s.ensureTypedArg(e[i(361)],r.OBJECT,{}),e.drag=s[i(608)](e[i(234)],r.OBJECT,{}),e[i(531)]=s[i(608)](e[i(531)],r[i(292)],{}),e[i(252)]=s[i(608)](e[i(252)],r[i(292)],{}),e[i(522)]=s[i(608)](e[i(522)],r[i(292)],{}),e[i(516)]=s.ensureTypedArg(e[i(516)],r.OBJECT,{}),e.angle=s[i(608)](e[i(663)],r.OBJECT,{}),e.wiggle=s[i(608)](e.wiggle,r.OBJECT,{}),e[i(401)]=s[i(608)](e[i(401)],r[i(292)],{}),e[i(342)]&&console[i(571)](i(602)),this[i(646)]=t[i(632)].generateUUID(),this[i(532)]=s[i(608)](e.type,r.NUMBER,l[i(295)][i(662)]),this[i(272)]={_value:s.ensureInstanceOf(e[i(272)].value,t[i(258)],new(t[i(258)])),_spread:s[i(431)](e[i(272)][i(374)],t[i(258)],new n),_spreadClamp:s[i(431)](e[i(272)][i(563)],t[i(258)],new n),_distribution:s[i(608)](e[i(272)][i(492)],r.NUMBER,this[i(532)]),_randomise:s.ensureTypedArg(e.position[i(347)],r[i(456)],!1),_radius:s[i(608)](e.position.radius,r[i(554)],10),_radiusScale:s[i(431)](e.position[i(559)],t[i(258)],new n(1,1,1)),_distributionClamp:s[i(608)](e[i(272)][i(246)],r[i(554)],0)},this[i(493)]={_value:s[i(431)](e.velocity[i(291)],t[i(258)],new(t[i(258)])),_spread:s[i(431)](e[i(493)].spread,n,new(t[i(258)])),_distribution:s[i(608)](e[i(493)][i(492)],r[i(554)],this[i(532)]),_randomise:s.ensureTypedArg(e[i(272)][i(347)],r[i(456)],!1)},this[i(314)]={_value:s[i(431)](e[i(314)][i(291)],t[i(258)],new n),_spread:s[i(431)](e.acceleration[i(374)],t[i(258)],new(t[i(258)])),_distribution:s[i(608)](e[i(314)][i(492)],r[i(554)],this[i(532)]),_randomise:s[i(608)](e.position.randomise,r[i(456)],!1)},this[i(234)]={_value:s[i(608)](e.drag[i(291)],r[i(554)],0),_spread:s[i(608)](e[i(234)].spread,r.NUMBER,0),_randomise:s[i(608)](e[i(272)][i(347)],r[i(456)],!1)},this[i(339)]={_value:s[i(608)](e.wiggle[i(291)],r[i(554)],0),_spread:s[i(608)](e[i(339)][i(374)],r[i(554)],0)},this[i(531)]={_axis:s[i(431)](e[i(531)].axis,t[i(258)],new n(0,1,0)),_axisSpread:s[i(431)](e.rotation[i(507)],t[i(258)],new(t[i(258)])),_angle:s[i(608)](e[i(531)].angle,r.NUMBER,0),_angleSpread:s.ensureTypedArg(e[i(531)].angleSpread,r[i(554)],0),_static:s[i(608)](e[i(531)].static,r[i(456)],!1),_center:s[i(431)](e[i(531)][i(588)],n,this[i(272)][i(565)].clone()),_randomise:s[i(608)](e[i(272)][i(347)],r[i(456)],!1)},this.maxAge={_value:s[i(608)](e[i(401)].value,r.NUMBER,2),_spread:s.ensureTypedArg(e[i(401)][i(374)],r[i(554)],0)},this.color={_value:s[i(276)](e.color[i(291)],t[i(321)],new(t[i(321)])),_spread:s.ensureArrayInstanceOf(e[i(252)].spread,t[i(258)],new(t[i(258)])),_randomise:s[i(608)](e.position[i(347)],r[i(456)],!1)},this[i(522)]={_value:s[i(681)](e.opacity[i(291)],r[i(554)],1),_spread:s[i(681)](e.opacity[i(374)],r.NUMBER,0),_randomise:s.ensureTypedArg(e[i(272)][i(347)],r[i(456)],!1)},this[i(516)]={_value:s.ensureArrayTypedArg(e[i(516)][i(291)],r[i(554)],1),_spread:s.ensureArrayTypedArg(e[i(516)].spread,r[i(554)],0),_randomise:s.ensureTypedArg(e[i(272)][i(347)],r.BOOLEAN,!1)},this[i(663)]={_value:s[i(681)](e[i(663)][i(291)],r[i(554)],0),_spread:s[i(681)](e.angle[i(374)],r[i(554)],0),_randomise:s[i(608)](e[i(272)][i(347)],r[i(456)],!1)},this[i(603)]=s[i(608)](e[i(603)],r[i(554)],100),this[i(548)]=s[i(608)](e.duration,r[i(554)],null),this[i(418)]=s[i(608)](e[i(418)],r[i(456)],!1),this[i(405)]=s.ensureTypedArg(e[i(405)],r.NUMBER,1),this[i(447)]=s.ensureTypedArg(e[i(447)],r[i(554)],1),this[i(378)]=s.ensureTypedArg(e[i(378)],r.BOOLEAN,!0),this.particlesPerSecond=0,this.activationIndex=0,this[i(514)]=0,this[i(385)]=0,this[i(562)]=0,this.activeParticleCount=0,this[i(371)]=null,this[i(638)]=null,this.paramsArray=null,this[i(411)]={position:s[i(608)](e[i(272)][i(347)],r[i(456)],!1)||s[i(608)](e.radius.randomise,r.BOOLEAN,!1),velocity:s[i(608)](e.velocity[i(347)],r[i(456)],!1),acceleration:s[i(608)](e[i(314)][i(347)],r[i(456)],!1)||s[i(608)](e[i(234)][i(347)],r[i(456)],!1),rotation:s[i(608)](e.rotation[i(347)],r[i(456)],!1),rotationCenter:s[i(608)](e[i(531)][i(347)],r[i(456)],!1),size:s[i(608)](e[i(516)][i(347)],r[i(456)],!1),color:s[i(608)](e[i(252)][i(347)],r[i(456)],!1),opacity:s[i(608)](e[i(522)][i(347)],r.BOOLEAN,!1),angle:s[i(608)](e.angle[i(347)],r[i(456)],!1)},this[i(623)]={},this[i(513)]={},this.updateMap={maxAge:i(274),position:i(272),velocity:i(493),acceleration:"acceleration",drag:"acceleration",wiggle:i(274),rotation:i(531),size:i(516),color:i(252),opacity:i(522),angle:"angle"};for(const t in this[i(637)])this[i(637)].hasOwnProperty(t)&&(this[i(513)][this[i(637)][t]]=0,this[i(623)][this[i(637)][t]]=!1,this[i(249)](this[t],t));this[i(273)]={},this[i(322)]=null,this[i(564)]=0,s[i(387)](this.color,a,a),s[i(387)](this.opacity,a,a),s[i(387)](this[i(516)],a,a),s[i(387)](this.angle,a,a)},l[o(626)][o(370)]=l[o(626)],l[o(626)][o(538)][o(249)]=function(t,e){const i=o,n=this;for(const s in t)if(t[i(686)](s)){const o=s.replace("_","");Object[i(606)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=r,o=n[s(637)][e],a=this[t],c=l.valueOverLifetimeLength;t===s(607)?(n[s(623)][s(685)]=!0,n.updateCounts[s(685)]=0):"_randomise"===t?n[s(411)][o]=i:(n[s(623)][o]=!0,n[s(513)][o]=0),n[s(371)][s(317)](),this[t]=i,Array[s(534)](a)&&l[s(489)].ensureValueOverLifetimeCompliance(n[e],c,c)}}(s)})}},l.Emitter[o(538)][o(256)]=function(t){const e=o;this[e(322)]=t,this[e(564)]=t[e(330)];for(let i=this[e(564)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(283)],max:Number[e(599)]}},l[o(626)].prototype[o(577)]=function(t){const e=o,i=this[e(603)];this[e(548)]?this.particlesPerSecond=i/(t<this.duration?t:this[e(548)]):this[e(669)]=i/t},l.Emitter.prototype._setAttributeOffset=function(t){const e=o;this[e(514)]=t,this.activationIndex=t,this[e(478)]=t+this.particleCount},l[o(626)][o(538)][o(264)]=function(t,e){const i=o;switch(t){case i(272):this[i(653)](e);break;case i(493):case i(314):this[i(502)](e,t);break;case i(516):case"opacity":this[i(533)](e,t);break;case i(663):this[i(617)](e);break;case i(274):this[i(376)](e);break;case i(531):this._assignRotationValue(e);break;case"color":this[i(424)](e)}},l.Emitter.prototype._assignPositionValue=function(t){const e=o,i=l[e(295)],n=l[e(489)],s=this[e(272)],r=this[e(638)][e(272)],a=s[e(565)],c=s._spread;switch(s[e(484)]){case i.BOX:n[e(350)](r,t,a,c,s[e(488)]);break;case i[e(584)]:n[e(222)](r,t,a,s._radius,s._spread.x,s[e(332)],s[e(488)].x,s._distributionClamp||this.particleCount);break;case i[e(451)]:n[e(305)](r,t,a,s[e(423)],s[e(277)].x,s._radiusScale,s[e(488)].x);break;case i[e(619)]:n[e(319)](r,t,a,c)}},l[o(626)][o(538)]._assignForceValue=function(t,e){const i=o;let n,s,r,a,c,h=l[i(295)],u=l[i(489)],f=this[e],p=f[i(565)],d=f[i(277)];switch(f[i(484)]){case h[i(662)]:u[i(350)](this[i(638)][e],t,p,d);break;case h[i(584)]:n=this[i(638)][i(272)][i(510)][i(223)],c=3*t,s=n[c],r=n[c+1],a=n[c+2],u.randomDirectionVector3OnSphere(this[i(638)][e],t,s,r,a,this[i(272)][i(565)],f[i(565)].x,f[i(277)].x);break;case h[i(451)]:n=this[i(638)].position[i(510)][i(223)],c=3*t,s=n[c],r=n[c+1],a=n[c+2],u[i(519)](this[i(638)][e],t,s,r,a,this[i(272)][i(565)],f._value.x,f[i(277)].x);break;case h.LINE:u[i(319)](this[i(638)][e],t,p,d)}if("acceleration"===e){const e=u[i(551)](u[i(437)](this[i(234)][i(565)],this.drag._spread),0,1);this.attributes.acceleration[i(510)].array[4*t+3]=e}},l[o(626)][o(538)]._assignAbsLifetimeValue=function(t,e){const i=o;let n,s=this[i(638)][e].typedArray,r=this[e],a=l.utils;a.arrayValuesAreEqual(r[i(565)])&&a[i(375)](r[i(277)])?(n=Math[i(464)](a[i(437)](r[i(565)][0],r[i(277)][0])),s[i(313)](t,n,n,n,n)):s.setVec4Components(t,Math.abs(a.randomFloat(r[i(565)][0],r[i(277)][0])),Math[i(464)](a[i(437)](r[i(565)][1],r[i(277)][1])),Math[i(464)](a.randomFloat(r._value[2],r[i(277)][2])),Math[i(464)](a[i(437)](r._value[3],r[i(277)][3])))},l[o(626)][o(538)][o(617)]=function(t){const e=o;let i,n=this[e(638)][e(663)][e(510)],s=this[e(663)],r=l.utils;r[e(375)](s[e(565)])&&r.arrayValuesAreEqual(s[e(277)])?(i=r[e(437)](s[e(565)][0],s[e(277)][0]),n.setVec4Components(t,i,i,i,i)):n.setVec4Components(t,r[e(437)](s[e(565)][0],s._spread[0]),r[e(437)](s[e(565)][1],s[e(277)][1]),r[e(437)](s[e(565)][2],s[e(277)][2]),r[e(437)](s[e(565)][3],s._spread[3]))},l[o(626)][o(538)][o(376)]=function(t){const e=o;this[e(638)][e(274)][e(510)][e(313)](t,this[e(418)]?1:0,0,Math[e(464)](l.utils[e(437)](this[e(401)][e(565)],this[e(401)][e(277)])),l[e(489)][e(437)](this[e(339)][e(565)],this[e(339)][e(277)]))},l[o(626)][o(538)][o(647)]=function(t){const e=o;this.attributes.rotation.typedArray[e(434)](t,l[e(489)][e(310)](this[e(531)][e(490)],this[e(531)][e(461)]),l.utils[e(437)](this[e(531)][e(402)],this[e(531)][e(270)]),this[e(531)][e(487)]?0:1),this.attributes.rotationCenter[e(510)][e(271)](t,this[e(531)][e(695)])},l[o(626)][o(538)]._assignColorValue=function(t){const e=o;l[e(489)][e(524)](this[e(638)][e(252)],t,this[e(252)][e(565)],this[e(252)][e(277)])},l[o(626)][o(538)]._resetParticle=function(t){const e=o;let i,n,s=this.resetFlags,r=this[e(623)],a=this[e(513)],c=this[e(322)];for(let o=this[e(564)]-1;o>=0;--o)i=c[o],n=r[i],!0!==s[i]&&!0!==n||(this[e(264)](i,t),this[e(430)](i,t),!0===n&&a[i]===this[e(603)]?(r[i]=!1,a[i]=0):1==n&&++a[i])},l[o(626)][o(538)][o(430)]=function(t,e){const i=o,n=this[i(273)][t];n[i(334)]=Math[i(334)](e,n[i(334)]),n[i(684)]=Math[i(684)](e,n[i(684)])},l[o(626)][o(538)][o(557)]=function(){const t=o;let e,i=this.bufferUpdateRanges,n=this[t(245)],s=this.bufferUpdateCount-1;for(;s>=0;--s)e=n[s],i[e][t(334)]=Number[t(283)],i[e][t(684)]=Number[t(599)]},l.Emitter.prototype._onRemove=function(){const t=o;this[t(669)]=0,this[t(514)]=0,this[t(648)]=0,this[t(354)]=0,this.group=null,this[t(638)]=null,this[t(349)]=null,this[t(562)]=0},l[o(626)][o(538)][o(566)]=function(){--this[o(354)]},l[o(626)].prototype[o(692)]=function(){++this[o(354)]},l[o(626)][o(538)]._checkParticleAges=function(t,e,i,n){const s=o;for(var r,a,c,h,l=e-1;l>=t;--l)0!==(h=i[r=4*l])&&(c=i[r+1],a=i[r+2],1===this[s(447)]?(c+=n)>=a&&(c=0,h=0,this[s(566)]()):(c-=n)<=0&&(c=a,h=0,this._decrementParticleCount()),i[r]=h,i[r+1]=c,this._updateAttributeUpdateRange(s(274),l))},l[o(626)][o(538)]._activateParticles=function(t,e,i,n){const s=o,r=this[s(447)];for(var a,c,h=t;h<e;++h)0!=i[a=4*h]&&1!==this.particleCount||(this._incrementParticleCount(),i[a]=1,this[s(486)](h),c=n*(h-t),i[a+1]=-1===r?i[a+2]-c:c,this[s(430)]("params",h))},l.Emitter[o(538)].tick=function(t){const e=o;if(this[e(418)])return;null===this[e(349)]&&(this[e(349)]=this[e(638)][e(274)][e(510)][e(223)]);const i=this[e(514)],n=i+this[e(603)],s=this[e(349)],r=this[e(669)]*this.activeMultiplier*t,a=this[e(648)];if(this._resetBufferRanges(),this[e(259)](i,n,s,t),!1===this[e(378)])return void(this[e(562)]=0);if(null!==this.duration&&this.age>this[e(548)])return this[e(378)]=!1,void(this.age=0);const c=1===this[e(603)]?a:0|a,h=Math[e(334)](c+r,this[e(478)]),l=h-this[e(648)]|0,u=l>0?t/l:0;this[e(682)](c,h,s,u),this[e(648)]+=r,this.activationIndex>n&&(this[e(648)]=i),this[e(562)]+=t},l[o(626)][o(538)][o(220)]=function(t){const e=o;if(this.age=0,this[e(378)]=!1,!0===t){const t=this[e(514)],s=t+this.particleCount,o=this.paramsArray,r=this[e(638)].params[e(497)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(293)][e(610)]=0,r[e(293)][e(369)]=-1,r.needsUpdate=!0}return this},l.Emitter[o(538)][o(225)]=function(){return this[o(378)]=!0,this},l[o(626)][o(538)].disable=function(){return this[o(378)]=!1,this},l[o(626)][o(538)][o(644)]=function(){const t=o;return null!==this[t(371)]?this.group[t(586)](this):console[t(642)](t(233)),this};const u=l;function f(t){function e(t){const i=r;if("string"==typeof t)return function(t){}[i(370)](i(355)).apply(i(587));1!==(""+t/t).length||t%20==0?function(){return!0}[i(370)](i(627)+i(616))[i(420)](i(323)):function(){return!1}.constructor(i(627)+"gger")[i(526)](i(221)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{u as _};

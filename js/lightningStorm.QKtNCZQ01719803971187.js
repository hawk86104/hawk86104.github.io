import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.AbQGR5j71719803971187.js";import{B as i,V as s,ci as n,aA as e,N as r,h as o,aw as a,Y as h,r as c,C as u,a5 as l}from"./three.BsQyBKrV1719803971187.js";import{r as p,D as d,i as m}from"./@tresjs.rn1P_YDI1719803971187.js";import{c as f}from"./simplex-noise.MycypUyu1719803971187.js";import{d as g,a2 as y,o as b,D as S,u as x,r as v,j as w,g as I,m as _,F as P}from"./@vue.CpOXM7bB1719803971187.js";import"./index.iO2779fl1719803971187.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.VPe_FRYd1719803971187.js";import"./three-custom-shader-material.rzwTEM2R1719803971187.js";import"./object-hash.4kGk0kP-1719803971187.js";import"./@amap.cIAWtN1R1719803971187.js";import"./jszip.Q9Kx2fWV1719803971187.js";import"./glsl-tokenizer.m00Vcg5f1719803971187.js";import"./glsl-token-string.vSzYTBTq1719803971187.js";import"./glsl-token-functions.HqnkbJtH1719803971187.js";import"./@vueuse.T5wlwfAk1719803971187.js";import"./tweakpane.qqn77PB81719803971187.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.0znOHpFl1719803971187.js";import"./all.three.tNx6l8qq1719803971187.js";import"./oimophysics.x0jH7fze1719803971187.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.uAs378Kt1719803971187.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.l1dxJXYM1719803971187.js";import"./index.ABG0hjuI1719803971187.js";import"./three-stdlib.vwixL4nl1719803971187.js";import"./@pmndrs.aJsI2n6-1719803971187.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.mgGILrvK1719803971187.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.WJPZIY9H1719803971187.js";const T=j;!function(t,i){const s=j,n=F();for(;;)try{if(617665===-parseInt(s(109))/1*(-parseInt(s(181))/2)+-parseInt(s(240))/3+parseInt(s(118))/4+parseInt(s(238))/5+-parseInt(s(165))/6+-parseInt(s(223))/7+parseInt(s(179))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(171)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function j(t,i){const s=F();return(j=function(t,i){return s[t-=100]})(t,i)}!function(){V(this,(function(){const t=j,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(162),"i"),n=R(t(178));i[t(187)](n+t(122))&&s[t(187)](n+t(182))?R():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=j,i=function(){const t=j;let i;try{i=Function("return (function() "+t(204)+");")()}catch(s){i=window}return i}(),s=i[t(180)]=i[t(180)]||{},n=[t(101),"warn",t(207),t(237),"exception",t(144),"trace"];for(let e=0;e<n.length;e++){const i=A.constructor[t(167)].bind(A),r=n[e],o=s[r]||i;i.__proto__=A[t(156)](A),i.toString=o[t(102)][t(156)](o),s[r]=i}}))();class C extends i{constructor(t={}){const i=j;super(),this.isLightningStrike=!0,this[i(176)]="LightningStrike",this.init(C[i(241)](t,t)),this.createMesh()}static[T(212)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(216)](Math.random());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(149)]];return n.currentSeed=(n[e(149)]+1)%i,r},getSeed:function(){return n[t(149)]/i},setSeed:function(s){const e=t;n[e(149)]=Math[e(127)](s*i)%i}};return n}static[T(241)](t={},i={}){const n=T,e=function(s){return i===t?s:s[j(164)]()};return t[n(104)]=void 0!==i.sourceOffset?e(i.sourceOffset):new s(0,100,0),t[n(210)]=void 0!==i[n(210)]?e(i[n(210)]):new s(0,0,0),t[n(112)]=void 0!==i[n(112)]?i.timeScale:1,t.roughness=void 0!==i[n(243)]?i[n(243)]:.9,t[n(155)]=void 0!==i.straightness?i[n(155)]:.7,t.up0=void 0!==i[n(130)]?e(i[n(130)]):new s(0,0,1),t.up1=void 0!==i[n(258)]?e(i[n(258)]):new s(0,0,1),t.radius0=void 0!==i[n(256)]?i[n(256)]:1,t[n(172)]=void 0!==i.radius1?i[n(172)]:1,t[n(193)]=void 0!==i.radius0Factor?i.radius0Factor:.5,t.radius1Factor=void 0!==i[n(147)]?i.radius1Factor:.2,t.minRadius=void 0!==i.minRadius?i[n(217)]:.2,t[n(121)]=void 0!==i[n(121)]?i[n(121)]:void 0===i[n(239)]||void 0===i[n(134)],t[n(239)]=i.birthTime,t[n(134)]=i[n(134)],t[n(224)]=void 0!==i[n(224)]?i[n(224)]:.1,t[n(168)]=void 0!==i[n(168)]?i.vanishingTimeFactor:.9,t[n(191)]=void 0!==i.subrayPeriod?i[n(191)]:4,t[n(142)]=void 0!==i[n(142)]?i[n(142)]:.6,t[n(137)]=void 0!==i[n(137)]?i[n(137)]:9,t[n(225)]=void 0!==i[n(225)]&&i[n(225)],t.ramification=void 0!==i[n(211)]?i.ramification:5,t[n(249)]=void 0!==i[n(249)]?i[n(249)]:3,t[n(232)]=void 0!==i[n(232)]?i[n(232)]:.6,t[n(158)]=void 0!==i.generateUVs&&i[n(158)],t.randomGenerator=i[n(132)],t.noiseSeed=i.noiseSeed,t[n(177)]=i[n(177)],t[n(263)]=i[n(263)],t}update(t){const i=T;this[i(225)]||(this.rayParameters.isEternal||this[i(197)][i(239)]<=t&&t<=this[i(197)].deathTime?(this.updateMesh(t),t<this[i(242)][0][i(214)]?this.state=C[i(116)]:t>this[i(242)][0].beginVanishingTime?this[i(228)]=C[i(209)]:this.state=C[i(222)],this[i(113)]=!0):(this[i(113)]=!1,t<this[i(197)].birthTime?this[i(228)]=C[i(266)]:this[i(228)]=C[i(125)]))}[T(178)](t){const i=T;this.rayParameters=t,this.maxIterations=void 0!==t.maxIterations?Math[i(127)](t[i(137)]):9,t[i(137)]=this.maxIterations,this.isStatic=void 0!==t[i(225)]&&t[i(225)],t[i(225)]=this[i(225)],this.ramification=void 0!==t.ramification?Math[i(127)](t.ramification):5,t.ramification=this[i(211)],this.maxSubrayRecursion=void 0!==t[i(249)]?Math[i(127)](t[i(249)]):3,t.maxSubrayRecursion=this.maxSubrayRecursion,this[i(232)]=void 0!==t[i(232)]?t[i(232)]:.6,t[i(232)]=this[i(232)],this[i(158)]=void 0!==t.generateUVs&&t[i(158)],t[i(158)]=this.generateUVs,void 0!==t[i(132)]?(this.randomGenerator=t[i(132)],this[i(148)]=t.randomGenerator,void 0!==t[i(123)]&&this.seedGenerator[i(262)](t.noiseSeed)):(this[i(132)]=C[i(212)](),this[i(148)]=Math),void 0!==t[i(177)]?this[i(177)]=t[i(177)]:(this[i(215)](),void 0!==t.onSubrayCreation&&(this[i(263)]=t[i(263)])),this[i(228)]=C[i(192)],this.maxSubrays=Math.ceil(1+Math.pow(this.ramification,Math.max(0,this.maxSubrayRecursion-1))),t[i(175)]=this[i(175)],this[i(174)]=2*(1<<this[i(137)]),this[i(242)]=[];for(let s=0;s<this.maxSubrays;s++)this.subrays.push(this.createSubray());this[i(166)]=[];for(let s=0;s<this[i(174)];s++)this.raySegments.push(this.createSegment());this.time=0,this[i(131)]=0,this[i(201)]=null,this[i(136)]=this[i(158)]?this.createTriangleVerticesWithUVs:this[i(146)],this[i(226)]=0,this[i(185)]=null,this.currentSegmentIndex=0,this[i(231)]=!1,this[i(128)]=0,this[i(265)]=0,this[i(157)]=0,this[i(108)]=0,this.currentUVCoordinate=0,this[i(233)]=null,this[i(205)]=null,this[i(138)]=null,this.positionAttribute=null,this[i(103)]=null,this[i(133)]=f(this[i(148)][i(106)]),this[i(135)]=f(this[i(148)].random),this[i(244)]=f(this[i(148)].random),this[i(199)]=new s,this[i(246)]=new s,this[i(151)]=new s,this.down=new s,this[i(245)]=new s,this[i(229)]=new s,this[i(200)]=new s,this[i(206)]=new s,this[i(230)]=new s}[T(161)](){const t=T,i=1<<this[t(137)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(175)];this.vertices=new Float32Array(3*s),this[t(138)]=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(2*s)),this[t(140)](0),this[t(114)](new n(this[t(138)],1)),this[t(169)]=new e(this.vertices,3),this[t(154)](t(100),this[t(169)]),this.generateUVs&&(this.uvsAttribute=new e(new Float32Array(this[t(205)]),2),this.setAttribute("uv",this[t(103)])),!this[t(225)]&&(this.index.usage=r,this[t(169)][t(250)]=r,this[t(158)]&&(this[t(103)][t(250)]=r)),this[t(233)]=this[t(169)][t(111)],this.indices=this[t(150)].array,this[t(158)]&&(this[t(205)]=this[t(103)][t(111)])}[T(126)](t){const i=T;this[i(140)](t),this[i(220)][i(235)]=this[i(157)],this[i(150)][i(252)]=!0,this[i(169)][i(252)]=!0,this[i(158)]&&(this[i(103)].needsUpdate=!0)}fillMesh(t){const i=T,s=this;this.currentVertex=0,this[i(157)]=0,this[i(108)]=0,this[i(153)]=0,this[i(236)](t,(function(n){const e=i,r=s[e(185)];t<r[e(239)]||(this[e(197)][e(121)]&&0==s[e(185)][e(254)]?(s[e(160)](n),s[e(177)](n,s)):t<r.endPropagationTime?s[e(131)]>=n[e(186)]*r[e(224)]&&(s[e(160)](n),s[e(177)](n,s)):t<r[e(163)]?(s.createPrism(n),s[e(177)](n,s)):(s[e(131)]<=r[e(168)]+n[e(251)]*(1-r.vanishingTimeFactor)&&s[e(160)](n),s.onDecideSubrayCreation(n,s)))}))}[T(143)](){const t=T;return this[t(242)][this[t(226)]++]}initSubray(t,i){const s=T;t[s(208)].copy(i[s(104)]),t[s(221)][s(145)](i[s(210)]),t[s(130)][s(145)](i.up0),t[s(258)][s(145)](i[s(258)]),t[s(256)]=i.radius0,t.radius1=i[s(172)],t[s(239)]=i.birthTime,t.deathTime=i[s(134)],t[s(112)]=i[s(112)],t.roughness=i[s(243)],t.straightness=i[s(155)],t.propagationTimeFactor=i[s(224)],t[s(168)]=i[s(168)],t[s(137)]=this[s(137)],t[s(227)]=void 0!==i[s(123)]?i[s(123)]:0,t[s(254)]=0}[T(236)](t,i){const s=T;this[s(119)]=t,this.currentSegmentCallback=i,this[s(226)]=0,this.initSubray(this[s(143)](),this[s(197)]);for(let n=0;n<this[s(226)];n++){const i=this[s(242)][n];this[s(185)]=i,this[s(132)][s(262)](i[s(227)]),i.endPropagationTime=o.lerp(i.birthTime,i[s(134)],i[s(224)]),i[s(163)]=o.lerp(i[s(134)],i[s(239)],1-i[s(168)]);const e=this[s(132)][s(106)];i.linPos0[s(203)](e(),e(),e())[s(247)](1e3),i[s(188)][s(203)](e(),e(),e()).multiplyScalar(1e3),this[s(131)]=(t-i.birthTime)/(i[s(134)]-i[s(239)]),this.currentSegmentIndex=0,this[s(231)]=!0;const r=this.getNewSegment();r.iteration=0,r[s(208)][s(145)](i.pos0),r[s(221)][s(145)](i[s(221)]),r[s(259)][s(145)](i[s(259)]),r[s(188)][s(145)](i[s(188)]),r.up0[s(145)](i[s(130)]),r.up1.copy(i[s(258)]),r[s(256)]=i.radius0,r[s(172)]=i[s(172)],r[s(186)]=0,r[s(251)]=1,r[s(124)]=1-i.straightness,this.subrayProbability=this[s(211)]*Math[s(196)](this[s(232)],i[s(254)])/(1<<i.maxIterations),this[s(139)](r)}this[s(201)]=null,this[s(185)]=null}[T(139)](t){const i=T;if(t.iteration>=this[i(185)][i(137)])return void this[i(201)](t);this[i(199)][i(110)](t[i(221)],t[i(208)]);let s=this.forwards.length();s<1e-6&&(this[i(199)][i(203)](0,0,.01),s=this[i(199)][i(173)]());const n=.5*(t[i(256)]+t.radius1),e=.5*(t[i(186)]+t[i(251)]),r=this[i(119)]*this.currentSubray[i(112)]*Math[i(196)](2,t.iteration);this[i(245)][i(184)](t.pos0,t.pos1,.5),this[i(229)][i(184)](t.linPos0,t.linPos1,.5);const o=this[i(229)];this[i(200)][i(203)](this[i(133)](o.x,o.y,o.z,r),this[i(135)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(200)][i(247)](t[i(124)]*s),this[i(200)][i(195)](this[i(245)]);const a=this.getNewSegment();a[i(208)][i(145)](t[i(208)]),a.pos1.copy(this[i(200)]),a[i(259)][i(145)](t[i(259)]),a[i(188)][i(145)](this.middleLinPos),a[i(130)][i(145)](t[i(130)]),a.up1[i(145)](t[i(258)]),a[i(256)]=t[i(256)],a.radius1=n,a[i(186)]=t[i(186)],a[i(251)]=e,a.positionVariationFactor=t.positionVariationFactor*this[i(185)].roughness,a[i(129)]=t[i(129)]+1;const h=this[i(260)]();h[i(208)][i(145)](this[i(200)]),h[i(221)].copy(t[i(221)]),h[i(259)].copy(this[i(229)]),h.linPos1[i(145)](t[i(188)]),this[i(230)][i(152)](t.up0,this[i(199)].normalize()),h.up0.crossVectors(this.forwards,this[i(230)])[i(183)](),h.up1[i(145)](t[i(258)]),h[i(256)]=n,h[i(172)]=t[i(172)],h[i(186)]=e,h[i(251)]=t[i(251)],h.positionVariationFactor=t[i(124)]*this[i(185)][i(243)],h[i(129)]=t.iteration+1,this[i(139)](a),this[i(139)](h)}[T(160)](t){const i=T;this.forwardsFill[i(110)](t.pos1,t.pos0).normalize(),this[i(231)]&&(this[i(136)](t.pos0,t.up0,this[i(246)],t[i(256)],0),this[i(231)]=!1),this.currentCreateTriangleVertices(t[i(221)],t[i(130)],this.forwardsFill,t[i(172)],t.fraction1),this[i(202)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=T;this.side[e(152)](i,s)[e(247)](n*C.COS30DEG),this[e(264)][e(145)](i).multiplyScalar(-n*C.SIN30DEG);const r=this.vPos,o=this.vertices;r[e(145)](t).sub(this.side)[e(195)](this[e(264)]),o[this[e(108)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(t).add(this[e(151)]).add(this[e(264)]),o[this[e(108)]++]=r.x,o[this[e(108)]++]=r.y,o[this[e(108)]++]=r.z,r[e(145)](i)[e(247)](n)[e(195)](t),o[this[e(108)]++]=r.x,o[this[e(108)]++]=r.y,o[this[e(108)]++]=r.z,this.currentVertex+=3}[T(194)](t,i,s,n,e){const r=T;this.side[r(152)](i,s).multiplyScalar(n*C.COS30DEG),this[r(264)].copy(i)[r(247)](-n*C[r(107)]);const o=this[r(206)],a=this.vertices,h=this[r(205)];o.copy(t)[r(248)](this[r(151)])[r(195)](this[r(264)]),a[this[r(108)]++]=o.x,a[this[r(108)]++]=o.y,a[this[r(108)]++]=o.z,h[this[r(153)]++]=e,h[this.currentUVCoordinate++]=0,o.copy(t).add(this[r(151)])[r(195)](this[r(264)]),a[this[r(108)]++]=o.x,a[this[r(108)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(153)]++]=e,h[this[r(153)]++]=.5,o.copy(i).multiplyScalar(n).add(t),a[this[r(108)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(153)]++]=e,h[this.currentUVCoordinate++]=1,this[r(265)]+=3}[T(202)](t){const i=T,s=this.indices;t=this[i(265)]-6,s[this[i(157)]++]=t+1,s[this[i(157)]++]=t+2,s[this[i(157)]++]=t+5,s[this[i(157)]++]=t+1,s[this[i(157)]++]=t+5,s[this[i(157)]++]=t+4,s[this[i(157)]++]=t+0,s[this[i(157)]++]=t+1,s[this[i(157)]++]=t+4,s[this[i(157)]++]=t+0,s[this[i(157)]++]=t+4,s[this[i(157)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(157)]++]=t+0,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+2,s[this[i(157)]++]=t+3,s[this[i(157)]++]=t+5}[T(215)](){const t=T,i=this[t(132)][t(106)];this[t(177)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(197)][e(191)],h=n[e(197)][e(142)],c=n.rayParameters[e(121)]&&0==r[e(254)]?-i()*a:o[e(170)](r[e(239)],r[e(214)],s[e(186)])-i()*a,u=n[e(119)]-c,l=Math[e(127)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r[e(254)]<n[e(249)]&&n[e(226)]<n[e(175)]&&i()<d){const t=n[e(143)](),o=n.randomGenerator[e(105)]();t[e(227)]=p,n[e(132)][e(262)](p),t[e(254)]=r[e(254)]+1,t[e(137)]=Math[e(198)](1,r.maxIterations-1),t[e(259)][e(203)](i(),i(),i())[e(247)](1e3),t.linPos1[e(203)](i(),i(),i())[e(247)](1e3),t[e(130)][e(145)](r[e(130)]),t.up1[e(145)](r[e(258)]),t[e(256)]=s[e(256)]*n[e(197)][e(193)],t[e(172)]=Math[e(159)](n[e(197)][e(217)],s[e(172)]*n[e(197)][e(147)]),t[e(239)]=c+l*a,t.deathTime=t.birthTime+a*h,!n.rayParameters[e(121)]&&0==r[e(254)]&&(t[e(239)]=Math[e(198)](t[e(239)],r[e(239)]),t.deathTime=Math[e(159)](t[e(134)],r.deathTime)),t.timeScale=2*r[e(112)],t[e(243)]=r.roughness,t[e(155)]=r[e(155)],t[e(224)]=r[e(224)],t[e(168)]=r[e(168)],n[e(263)](s,r,t,n),n.randomGenerator.setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(263)]=function(i,s,n,e){e[t(261)](i,s,n,.5,.6,.2)},this[t(115)]=function(s,o,h,c,u,l){const p=t;h.pos0.copy(s[p(208)]),n[p(110)](o[p(221)],o[p(208)]),e[p(145)](n).normalize(),n.multiplyScalar(s[p(186)]+(1-s[p(186)])*(i()*c));const d=n.length();r[p(152)](o[p(130)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(141)](m)),a[p(145)](o.up0)[p(247)](Math[p(189)](m)),h[p(221)][p(145)](r)[p(195)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(195)](n).add(o[p(208)])},this[t(261)]=function(s,o,h,c,u,l){const p=t;h[p(208)].copy(s[p(208)]),n[p(110)](o[p(221)],o.pos0),e.copy(n)[p(183)](),n[p(247)](s.fraction0+(1-s[p(186)])*((2*i()-1)*c));const d=n[p(173)]();r.crossVectors(o[p(130)],e);const m=2*Math.PI*i();r[p(247)](Math.cos(m)),a.copy(o[p(130)]).multiplyScalar(Math.sin(m)),h.pos1[p(145)](r).add(a)[p(247)](d*u*(l+i()*(1-l)))[p(195)](n)[p(195)](o[p(208)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(253)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(260)](){const t=T;return this[t(166)][this[t(190)]++]}[T(145)](t){const i=T;return super[i(145)](t),this[i(178)](C[i(241)]({},t.rayParameters)),this}clone(){const t=T;return new(this[t(219)])(C[t(241)]({},this[t(197)]))}}function R(t){function i(t){const s=j;if(typeof t===s(255))return function(t){}[s(219)](s(257))[s(171)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+s(234))[s(117)]("action"):function(){return!1}.constructor(s(213)+s(234)).apply(s(120)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function F(){const t=["info","pos0","RAY_VANISHING","destOffset","ramification","createRandomGenerator","debu","endPropagationTime","createDefaultSubrayCreationCallbacks","push","minRadius","COS30DEG","constructor","drawRange","pos1","RAY_STEADY","5061882GWLQFK","propagationTimeFactor","isStatic","numSubrays","seed","state","middleLinPos","cross1","isInitialSegment","recursionProbability","vertices","gger","count","fractalRay","error","5830535kHoccm","birthTime","2782440bvJZki","copyParameters","subrays","roughness","simplexZ","middlePos","forwardsFill","multiplyScalar","sub","maxSubrayRecursion","usage","fraction1","needsUpdate","createSegment","recursion","string","radius0","while (true) {}","up1","linPos0","getNewSegment","subrayCylinderPosition","setSeed","onSubrayCreation","down","currentVertex","RAY_UNBORN","position","log","toString","uvsAttribute","sourceOffset","getSeed","random","SIN30DEG","currentCoordinate","124655XWuGoV","subVectors","array","timeScale","visible","setIndex","subrayConePosition","RAY_PROPAGATING","call","2954056safHIM","time","stateObject","isEternal","chain","noiseSeed","positionVariationFactor","RAY_EXTINGUISHED","updateMesh","floor","subrayProbability","iteration","up0","timeFraction","randomGenerator","simplexX","deathTime","simplexY","currentCreateTriangleVertices","maxIterations","indices","fractalRayRecursive","fillMesh","cos","subrayDutyCycle","addNewSubray","table","copy","createTriangleVerticesWithoutUVs","radius1Factor","seedGenerator","currentSeed","index","side","crossVectors","currentUVCoordinate","setAttribute","straightness","bind","currentIndex","generateUVs","min","createPrism","createMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","beginVanishingTime","clone","3375096VlALij","raySegments","prototype","vanishingTimeFactor","positionAttribute","lerp","apply","radius1","length","maxRaySegments","maxSubrays","type","onDecideSubrayCreation","init","5414848ZkOXJB","console","4FDfTha","input","normalize","lerpVectors","currentSubray","fraction0","test","linPos1","sin","currentSegmentIndex","subrayPeriod","RAY_INITIALIZED","radius0Factor","createTriangleVerticesWithUVs","add","pow","rayParameters","max","forwards","newPos","currentSegmentCallback","createPrismFaces","set",'{}.constructor("return this")( )',"uvs","vPos"];return(F=function(){return t})()}C[T(192)]=0,C[T(266)]=1,C[T(116)]=2,C[T(222)]=3,C.RAY_VANISHING=4,C[T(125)]=5,C[T(218)]=Math[T(141)](30*Math.PI/180),C[T(107)]=Math[T(189)](30*Math.PI/180);const D=G;!function(t,i){const s=G,n=O();for(;;)try{if(809403===parseInt(s(316))/1*(parseInt(s(290))/2)+-parseInt(s(322))/3*(-parseInt(s(299))/4)+-parseInt(s(278))/5*(-parseInt(s(334))/6)+parseInt(s(266))/7+parseInt(s(321))/8*(parseInt(s(313))/9)+-parseInt(s(324))/10+parseInt(s(289))/11*(-parseInt(s(319))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=G,i=new RegExp(t(301)),s=new RegExp(t(272),"i"),n=E(t(318));i[t(286)](n+t(270))&&s.test(n+t(293))?E():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function G(t,i){const s=O();return(G=function(t,i){return s[t-=265]})(t,i)}H(void 0,(function(){const t=G;let i;try{i=Function(t(268)+t(292)+");")()}catch(e){i=window}const s=i[t(315)]=i[t(315)]||{},n=["log","warn",t(276),t(281),"exception",t(312),t(336)];for(let r=0;r<n.length;r++){const i=H[t(297)][t(310)][t(331)](H),e=n[r],o=s[e]||i;i.__proto__=H[t(331)](H),i[t(325)]=o[t(325)][t(331)](o),s[e]=i}}))();class U extends a{constructor(t={}){const i=G;super(),this[i(327)]=!0,this[i(282)]=t,t[i(277)]=void 0!==t[i(277)]?t[i(277)]:1e3,t.minHeight=void 0!==t[i(288)]?t[i(288)]:80,t[i(300)]=void 0!==t[i(300)]?t[i(300)]:100,t.maxSlope=void 0!==t[i(285)]?t.maxSlope:1.1,t[i(283)]=void 0!==t.maxLightnings?t.maxLightnings:3,t[i(267)]=void 0!==t[i(267)]?t[i(267)]:3,t[i(307)]=void 0!==t[i(307)]?t.lightningMaxPeriod:7,t[i(295)]=void 0!==t[i(295)]?t[i(295)]:1,t.lightningMaxDuration=void 0!==t.lightningMaxDuration?t[i(284)]:2.5,this[i(298)]=C.copyParameters(t[i(298)],t.lightningParameters),this[i(298)][i(337)]=!1,this[i(332)]=void 0!==t[i(332)]?t[i(332)]:new h({color:11599871}),void 0!==t[i(330)]?this[i(330)]=t[i(330)]:this[i(330)]=function(s,n){const e=i;n[e(308)]((Math[e(335)]()-.5)*t.size,0,(Math.random()-.5)*t[e(277)]);const r=o.lerp(t[e(288)],t[e(300)],Math.random());s[e(308)](t.maxSlope*(2*Math[e(335)]()-1),1,t.maxSlope*(2*Math.random()-1)).multiplyScalar(r)[e(287)](n)},this.onLightningDown=t[i(317)],this[i(323)]=!1,this[i(326)]=0,this[i(304)]=[],this[i(275)]=[];for(let s=0;s<this[i(282)][i(283)];s++){const t=new C(C[i(269)]({},this[i(298)])),s=new c(t,this.lightningMaterial);this[i(275)][i(296)](s)}}[D(302)](t){const i=D;if(!this[i(323)]&&(this[i(326)]=this[i(279)](t)*Math[i(335)](),this.inited=!0),t>=this[i(326)]){const s=this[i(275)][i(329)]();if(s){const n=C.copyParameters(s.geometry[i(271)],this[i(298)]);n[i(306)]=t,n.deathTime=t+o[i(305)](this[i(282)].lightningMinDuration,this[i(282)][i(284)],Math[i(335)]()),this[i(330)](n.sourceOffset,n[i(314)]),n[i(265)]=Math.random(),this[i(287)](s),this.lightningsMeshes[i(296)](s)}this[i(326)]=this[i(279)](t)}let s=0,n=this[i(304)][i(338)];for(;s<n;){const e=this[i(304)][s],r=e.geometry,o=r.state;r[i(302)](t),o===C.RAY_PROPAGATING&&r[i(291)]>o&&this[i(317)]&&this[i(317)](r),r.state===C[i(294)]?(this[i(304)][i(311)](this[i(304)].indexOf(e),1),this[i(275)][i(296)](e),this[i(280)](e),n--):s++}}getNextLightningTime(t){const i=D;return t+o.lerp(this[i(282)][i(267)],this[i(282)][i(307)],Math[i(335)]())/(this.stormParams[i(283)]+1)}[D(273)](t,i){const s=D;return super.copy(t,i),this[s(282)].size=t.stormParams[s(277)],this[s(282)][s(288)]=t[s(282)][s(288)],this[s(282)][s(300)]=t[s(282)][s(300)],this[s(282)].maxSlope=t[s(282)][s(285)],this[s(282)][s(283)]=t[s(282)][s(283)],this[s(282)].lightningMinPeriod=t[s(282)][s(267)],this[s(282)].lightningMaxPeriod=t.stormParams[s(307)],this[s(282)].lightningMinDuration=t[s(282)].lightningMinDuration,this[s(282)][s(284)]=t[s(282)].lightningMaxDuration,this[s(298)]=C.copyParameters({},t[s(298)]),this[s(332)]=t[s(282)][s(332)],this[s(317)]=t[s(317)],this}[D(309)](){const t=D;return new(this[t(297)])(this[t(282)]).copy(this)}}function E(t){function i(t){const s=G;if("string"==typeof t)return function(t){}.constructor(s(303))[s(328)](s(333));1!==(""+t/t)[s(338)]||t%20==0?function(){return!0}.constructor(s(274)+s(320)).call("action"):function(){return!1}[s(297)](s(274)+s(320))[s(328)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function O(){const t=["lightningMaterial","counter","48CMWJwC","random","trace","isEternal","length","noiseSeed","5347489jNXVGX","lightningMinPeriod","return (function() ","copyParameters","chain","rayParameters","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","copy","debu","deadLightningsMeshes","info","size","140960lUGYHV","getNextLightningTime","remove","error","stormParams","maxLightnings","lightningMaxDuration","maxSlope","test","add","minHeight","5962dtpdmN","742682CcbHKK","state",'{}.constructor("return this")( )',"input","RAY_EXTINGUISHED","lightningMinDuration","push","constructor","lightningParameters","2051648IxHbtP","maxHeight","function *\\( *\\)","update","while (true) {}","lightningsMeshes","lerp","birthTime","lightningMaxPeriod","set","clone","prototype","splice","table","5454cfUrvx","destOffset","console","2coMxpP","onLightningDown","init","65028plOOET","gger","13520SjWaTX","6uzVWAR","inited","356080TFdDZJ","toString","nextLightningTime","isLightningStorm","apply","pop","onRayPosition","bind"];return(O=function(){return t})()}const L=Y;!function(t,i){const s=Y,n=W();for(;;)try{if(581560===parseInt(s(454))/1*(parseInt(s(442))/2)+parseInt(s(463))/3+parseInt(s(455))/4+-parseInt(s(428))/5+-parseInt(s(451))/6*(parseInt(s(450))/7)+parseInt(s(406))/8+-parseInt(s(417))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(435)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=Y,i=new RegExp(t(413)),s=new RegExp(t(402),"i"),n=$(t(456));i[t(431)](n+t(461))&&s[t(431)](n+t(416))?$():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(435)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();k(void 0,(function(){const t=Y;let i;try{i=Function(t(420)+t(401)+");")()}catch(e){i=window}const s=i[t(400)]=i[t(400)]||{},n=["log",t(430),t(407),"error",t(446),t(410),t(433)];for(let r=0;r<n[t(426)];r++){const i=k[t(440)][t(460)][t(459)](k),e=n[r],o=s[e]||i;i[t(445)]=k[t(459)](k),i[t(448)]=o[t(448)][t(459)](o),s[e]=i}}))();const Z=["object"];function Y(t,i){const s=W();return(Y=function(t,i){return s[t-=400]})(t,i)}function W(){const t=["maxLightnings","update","return (function() ","debu","gger","call","pos1","lightStorm","length","straightness","2710305MiJkhe","#b0ffff","warn","test","multiplyScalar","trace","string","apply","action","roughness","subVectors","rayParameters","constructor","minHeight","328PLMLPE","add","stateObject","__proto__","exception","Vector3","toString","subrayPeriod","7qkKMMx","3661764DhAtJv","addVectors","stormParams","4813turogk","3154260CWDLHS","init","counter","sourceOffset","bind","prototype","chain","dot","3079947QsZuSn","console",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subrayConePosition","set","primitive","4355064lIeRrv","info","radius1","size","table","color","maxHeight","function *\\( *\\)","radius0","copy","input","12735126YwglUj"];return(W=function(){return t})()}const X=g({__name:L(425),props:{color:{default:L(429)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=L,s=t,n=new u(s.color),e=new h({color:n}),r=new(l[i(447)])(0,-1,0);let o=0;const a=new(l[i(447)]),c=new(l[i(447)]),d={roughness:s.roughness,straightness:s.straightness,radius0:s[i(414)],radius1:s.radius1,timeScale:s.timeScale,subrayPeriod:s[i(449)],subrayDutyCycle:s.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(403)](t,s,n,.6,.6,.5),o=e[h(439)][h(458)].y,a[h(438)](n[h(424)],e[h(439)][h(458)]);const u=r[h(462)](a);c[h(415)](r).multiplyScalar(u),a.sub(c);const l=u/o>.5?o/u:1;c[h(432)](l),a[h(443)](c),n.pos1[h(452)](a,e.rayParameters[h(458)])}},m=new U({size:s[i(409)],minHeight:s.minHeight,maxHeight:s[i(412)],maxSlope:.6,maxLightnings:s[i(418)],lightningParameters:d,lightningMaterial:e});y((()=>{const t=i,n=m[t(453)];n[t(409)]=s[t(409)],n[t(441)]=s[t(441)],n[t(412)]=s[t(412)],e[t(411)][t(404)](s[t(411)]),d[t(437)]=s[t(437)],d[t(427)]=s[t(427)],d.radius0=s[t(414)],d[t(408)]=s[t(408)],d.timeScale=s.timeScale}));const{onLoop:f}=p();return f((({elapsed:t})=>{m[i(419)](t)})),(t,s)=>{const n=i;return b(),S(n(405),{object:x(m),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=Y;if(typeof t===s(434))return function(t){}[s(440)]("while (true) {}")[s(435)](s(457));1!==(""+t/t).length||t%20==0?function(){return!0}[s(440)](s(421)+s(422))[s(423)](s(436)):function(){return!1}[s(440)](s(421)+s(422))[s(435)](s(444)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=K,n=q();for(;;)try{if(223287===parseInt(s(523))/1*(parseInt(s(536))/2)+parseInt(s(526))/3*(-parseInt(s(498))/4)+parseInt(s(531))/5*(parseInt(s(541))/6)+-parseInt(s(495))/7+-parseInt(s(539))/8+-parseInt(s(499))/9*(parseInt(s(542))/10)+parseInt(s(507))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(530)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){J(this,(function(){const t=K,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(515),"i"),n=tt(t(537));i[t(512)](n+t(505))&&s[t(512)](n+t(509))?tt():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=q();return(K=function(t,i){return s[t-=494]})(t,i)}function q(){const t=["maxHeight","call","toString","debu","9UOzlim","color","timeScale","180Grbkmq","length","端部半径","#92399e","apply","112445AIfpOA","return (function() ","table","error","straightness","98574XQSNHH","init","gger","3357064urEqbO","exception","102vTnZHW","4403180UlwDWr","radius1","info","console","414953vpJsCF","直度度","warn","14908CQdapa","9gSERdR","counter","prototype","未部半径","action","bind","chain","粗糙度","5942651ZNsIDj","roughness","input","minHeight","value","test","constructor","#ffbde7","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","stateObject","log"];return(q=function(){return t})()}Q(void 0,(function(){const t=K,i=function(){const t=K;let i;try{i=Function(t(532)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(494)]=i[t(494)]||{},n=[t(518),t(497),t(544),t(534),t(540),t(533),"trace"];for(let e=0;e<n[t(527)];e++){const i=Q[t(513)][t(501)][t(504)](Q),r=n[e],o=s[r]||i;i.__proto__=Q.bind(Q),i[t(521)]=o[t(521)][t(504)](o),s[r]=i}}))();const B=g({__name:"lightningStorm",setup(i){const s=K,n=v({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(529),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(514),roughness:{label:s(506),value:.85,min:0,max:1,step:.01},straightness:{label:s(496),value:.65,min:0,max:1,step:.01},radius0:{label:s(528),value:1,min:.1,max:10,step:.01},radius1:{label:s(502),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),S(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:I((()=>[w(X,{minHeight:x(e).value,maxHeight:x(r)[d(511)],color:x(o)[d(511)],roughness:x(a).value,straightness:x(h)[d(511)],radius0:x(c)[d(511)],radius1:x(u)[d(511)],timeScale:x(l)[d(511)]},null,8,[d(510),d(519),d(524),d(508),d(535),"radius0",d(543),d(525)]),w(x(M),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(x(m))],64)}}});function tt(t){function i(t){const s=K;if("string"==typeof t)return function(t){}[s(513)](s(516))[s(530)](s(500));1!==(""+t/t)[s(527)]||t%20==0?function(){return!0}.constructor(s(522)+s(538))[s(520)](s(503)):function(){return!1}[s(513)]("debu"+s(538))[s(530)](s(517)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{B as default};

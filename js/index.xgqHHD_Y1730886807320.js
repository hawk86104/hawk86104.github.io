var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as w,c3 as S,c4 as M,K as R,f as A,V as E,g as T,_ as D,bI as z,m as P,bm as O,k as C,bz as F,d as k,aj as j,B,a as U,aP as N,e as L,M as H,as as Z,a9 as G,h as W}from"./three._P_a_E_Z1730886807320.js";import{m as V,D as $,e as X}from"./@tresjs.iUmyNPdW1730886807320.js";import{R as q}from"./three-stdlib.-Lz596Q01730886807320.js";import{v as K,b as Y,w as J,a as Q,u as nn,d as tn,U as en,a6 as rn,a4 as on,o as an,D as cn,G as sn,I as un,aa as ln,a3 as fn,q as pn,f as dn,J as hn,ab as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a9 as In,m as bn}from"./@vue.-THQH3GC1730886807320.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.wWpbS2XU1730886807320.js";import{h as Rn}from"./object-hash.rH2Wt7qx1730886807320.js";!function(n,t){for(var e=Dn,r=En();;)try{if(425423===parseInt(e(164))/1*(parseInt(e(167))/2)+-parseInt(e(184))/3+-parseInt(e(202))/4*(-parseInt(e(198))/5)+-parseInt(e(190))/6+-parseInt(e(193))/7*(-parseInt(e(203))/8)+parseInt(e(166))/9*(-parseInt(e(183))/10)+parseInt(e(196))/11*(parseInt(e(187))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function En(){var n=["init",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","1yBaAjk","add","9vMSKqg","421810ZzpmIL","prototype","dispose","console","input","table","apply","exception","counter","traverse","log","return (function() ","info","gger","trace","test","304870IyXiGP","2271618LkxlXz","bind","toString","24ZHjXYD","function *\\( *\\)","material","795108KOSyVS","action","length","5474cwZdXP","constructor","while (true) {}","786709njnvxs","virtualScene","2694565gPhoLw","debu","chain","call","4IAbcTd","4632vxIFfa"];return(En=function(){return n})()}!function(){An(this,(function(){var n=Dn,t=new RegExp(n(188)),e=new RegExp(n(206),"i"),r=Pn(n(204));t[n(182)](r+n(200))&&e[n(182)](r+n(171))?Pn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tn(void 0,(function(){var n,t=Dn;try{n=Function(t(178)+t(205)+");")()}catch(s){n=window}for(var e=n[t(170)]=n[t(170)]||{},r=[t(177),"warn",t(179),"error",t(174),t(172),t(181)],o=0;o<r[t(192)];o++){var i=Tn[t(194)][t(168)].bind(Tn),a=r[o],c=e[a]||i;i.__proto__=Tn[t(185)](Tn),i[t(186)]=c.toString[t(185)](c),e[a]=i}}))();function Dn(n,t){var e=En();return(Dn=function(n,t){return e[n-=164]})(n,t)}const zn=class extends s{constructor(){var n=Dn;super(),this[n(197)]=null,this[n(197)]=new u}add(...n){var t=Dn;return this.virtualScene[t(165)](...n),this}destructor(){var n=Dn;this[n(197)][n(176)]((t=>{var e=n;t instanceof l&&(t.geometry.dispose(),t[e(189)][e(169)](),t[e(189)].map&&t[e(189)].map[e(169)](),this[e(197)].remove(t))})),this.virtualScene=null}};function Pn(n){function t(n){var e=Dn;if(typeof n===e(207))return function(n){}[e(194)](e(195))[e(173)](e(175));1!==(""+n/n)[e(192)]||n%20==0?function(){return!0}[e(194)]("debu"+e(180))[e(201)](e(191)):function(){return!1}[e(194)](e(199)+e(180))[e(173)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=Bn;!function(n,t){const e=Bn,r=kn();for(;;)try{if(576089===parseInt(e(118))/1*(-parseInt(e(128))/2)+parseInt(e(112))/3+-parseInt(e(130))/4*(-parseInt(e(134))/5)+-parseInt(e(129))/6+parseInt(e(114))/7+-parseInt(e(135))/8+parseInt(e(104))/9*(parseInt(e(132))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cn(this,(function(){const n=Bn,t=new RegExp(n(113)),e=new RegExp(n(124),"i"),r=Un("init");t[n(106)](r+"chain")&&e.test(r+n(108))?Un():r("0")}))()}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(141)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(){const n=["error","outdoor/outdoor_umbrellas_1k.hdr","length","795843uNgPKH","action","test","counter","input","bind","string","gger","2144292TWPfol","function *\\( *\\)","6850466IqaRFR","studio/poly_haven_studio_1k.hdr","toString","call","1vJKYcu","kiara/kiara_1_dawn_1k.hdr","info","city/canary_wharf_1k.hdr","stateObject","outdoor/snowy_forest_path_01_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","outood/mossy_forest_1k.hdr","indoor/small_hangar_01_1k.hdr","1386352LjrhGl","10368ANmXFX","4AYyCuZ","city/modern_buildings_2_1k.hdr","50IyIrwa","constructor","749105jJQXSH","8114920PgKfAg","__proto__","indoor/abandoned_games_room_02_1k.hdr","exception","table",'{}.constructor("return this")( )',"apply","debu","venice/venice_sunset_1k.hdr"];return(kn=function(){return n})()}Fn(void 0,(function(){const n=Bn,t=function(){const n=Bn;let t;try{t=Function(n(125)+n(140)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log","warn",n(120),n(144),n(138),n(139),"trace"];for(let o=0;o<r[n(103)];o++){const t=Fn[n(133)].prototype[n(109)](Fn),i=r[o],a=e[i]||t;t[n(136)]=Fn[n(109)](Fn),t[n(116)]=a[n(116)][n(109)](a),e[i]=t}}))();const jn={sunset:On(143),studio:On(115),city:On(121),umbrellas:On(102),night:"outdoor/satara_night_1k.hdr",forest:On(126),snow:On(123),dawn:On(119),hangar:On(127),urban:On(137),modern:On(131),shangai:"city/shanghai_bund_1k.hdr"};function Bn(n,t){const e=kn();return(Bn=function(n,t){return e[n-=102]})(n,t)}function Un(n){function t(n){const e=Bn;if(typeof n===e(110))return function(n){}[e(133)]("while (true) {}")[e(141)](e(107));1!==(""+n/n)[e(103)]||n%20==0?function(){return!0}[e(133)](e(142)+e(111))[e(117)](e(105)):function(){return!1}.constructor(e(142)+e(111))[e(141)](e(122)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Nn=Gn;function Ln(){const n=["bind","while (true) {}","130zTzALC","value","3041133WmcWkK","4434962OqXugR","isArray","log","console","isColor","Preset must be one of: ","setPath","prototype","error","26dBObhW","init","chain","5368MrNoHa","call","13924onkngt","trace","mapping","counter","warn","test","length","2122470pWXfyj",'{}.constructor("return this")( )',"817069roITOV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4PmOSzd","string","2923955wtSgaE","background","debu","__proto__","constructor","toString","exception","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","2205dwBHIL","stateObject","backgroundBlurriness","input","texture","apply","gger"];return(Ln=function(){return n})()}!function(n,t){const e=Gn,r=Ln();for(;;)try{if(752643===-parseInt(e(183))/1*(-parseInt(e(178))/2)+parseInt(e(168))/3*(parseInt(e(194))/4)+-parseInt(e(196))/5+-parseInt(e(190))/6+-parseInt(e(169))/7+parseInt(e(181))/8*(parseInt(e(204))/9)+parseInt(e(166))/10*(parseInt(e(192))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(162)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Gn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(193),"i"),r=Vn(n(179));t[n(188)](r+n(180))&&e[n(188)](r+n(207))?Vn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(162)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Ln();return(Gn=function(n,t){return e[n-=162]})(n,t)}Zn(void 0,(function(){const n=Gn,t=function(){const n=Gn;let t;try{t=Function("return (function() "+n(191)+");")()}catch(e){t=window}return t}(),e=t[n(172)]=t[n(172)]||{},r=[n(171),n(187),"info",n(177),n(202),"table",n(184)];for(let o=0;o<r[n(189)];o++){const t=Zn.constructor[n(176)][n(164)](Zn),i=r[o],a=e[i]||t;t[n(199)]=Zn.bind(Zn),t[n(201)]=a[n(201)].bind(a),e[i]=t}}))();const Wn=Nn(203);function Vn(n){function t(n){const e=Gn;if(typeof n===e(195))return function(n){}[e(200)](e(165))[e(162)](e(186));1!==(""+n/n)[e(189)]||n%20==0?function(){return!0}[e(200)](e(198)+e(163))[e(182)]("action"):function(){return!1}[e(200)]("debugger")[e(162)](e(205)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=Kn;!function(n,t){const e=Kn,r=Jn();for(;;)try{if(583890===parseInt(e(356))/1+-parseInt(e(350))/2+parseInt(e(308))/3*(parseInt(e(344))/4)+-parseInt(e(337))/5*(-parseInt(e(303))/6)+-parseInt(e(312))/7*(parseInt(e(318))/8)+parseInt(e(325))/9+parseInt(e(317))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(341)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Kn,t=new RegExp(n(321)),e=new RegExp(n(343),"i"),r=Qn("init");t[n(304)](r+n(314))&&e[n(304)](r+n(354))?Qn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(n,t){const e=Jn();return(Kn=function(n,t){return e[n-=300]})(n,t)}qn(void 0,(function(){const n=Kn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(319)]=t[n(319)]||{},r=[n(349),n(331),n(301),n(307),n(347),n(353),n(330)];for(let i=0;i<r.length;i++){const t=qn[n(323)][n(332)][n(306)](qn),o=r[i],a=e[o]||t;t[n(315)]=qn[n(306)](qn),t[n(328)]=a[n(328)][n(306)](a),e[o]=t}}))();const Yn=tn({__name:$n(313),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=Y(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=Y(null),x=null;const I=Y(null);en((()=>{var n,t;const e=Kn;null==(n=I[e(309)])||n[e(339)](),null==(t=y[e(309)])||t[e(333)]()}));const{onBeforeLoop:b}=X();let w=1;b((()=>{const n=Kn;x&&I.value&&y[n(309)]&&(i[n(342)]===1/0||w<i.frames)&&(i[n(348)]?x[n(302)](s[n(309)],u[n(309)]):x[n(302)](s[n(309)],ln(I[n(309)][n(355)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Nn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=Y([]),path:s=Y(""),background:u}=K(n);J(n,(()=>{o()}));const l=Y(null),h=Q((()=>Array[e(170)](c[e(167)]))),v=Q((()=>h[e(167)]?f:q));return J([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i.value)){try{l.value=await $(v[r(167)],h[r(167)]?[...nn(n)]:nn(n),(n=>{t&&n[r(175)](nn(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l[r(167)]&&(l[r(167)][r(185)]=h[r(167)]?p:d)}}),{immediate:!0}),J(l,(n=>{r[e(167)]&&n&&(r.value.environment=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(167)]){let e=(null==t?void 0:t.value)?t[i(167)][i(208)]:o,a=r[i(167)][i(197)];!(null==a?void 0:a[i(173)])&&(a=void 0),r[i(167)][i(197)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(167)]),(n=>{const t=e;r[t(167)]&&n&&(r.value[t(206)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(167)]),(async n=>{const t=e;if(n&&n in jn){const e=Wn,i=jn[n];try{l[t(167)]=await $(q,i,(n=>{e&&n[t(175)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l.value&&l[t(167)]&&(l.value[t(185)]=d),o()}else if(n&&!(n in jn))throw new Error(t(174)+Object.keys(jn).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(309)][t(322)]=n[t(352)],i[t(326)]&&(u[t(309)][t(326)]=n.texture)):(u[t(309)].environment=S[t(309)],i.background&&(u[t(309)][t(326)]=S[t(309)]))};J(S,(n=>{const t=Kn;y[t(309)]&&M(y[t(309)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Kn;null==(n=y[t(309)])||n[t(333)](),y[t(309)]=new v(i[t(305)]),x=new m(i.near,i.far,y.value),i[t(348)]?(y[t(309)].texture[t(346)]=g,y[t(309)][t(352)][t(334)]=!1,y[t(309)][t(352)][t(316)]=_,y[t(309)][t(352)].magFilter=_):y.value[t(352)][t(346)]=h,M(y[t(309)])};return J((()=>on()[e(329)]),(n=>{var t,r;const o=e;n&&(!y[o(309)]||y[o(309)].texture[o(346)]!==h)&&(l=n(),Array[o(345)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(346)])!==o(340))?R():(null==(r=y[o(309)])||r.dispose(),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(309)]=S,J((()=>i.useDefaultScene),(n=>{y[e(309)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(338),{key:0,ref_key:r(310),ref:I},[sn(n[r(300)],r(329))],512)):un("",!0)}}});function Jn(){const n=["counter","329mMYlEE","component","chain","__proto__","minFilter","3707200FjpenU","51616bzNWPK","console","string","function *\\( *\\)","environment","constructor","action","1540782QOrxVk","background","debu","toString","default","trace","warn","prototype","dispose","generateMipmaps","call","stateObject","50giIHsg","TresEnvSence","destructor","symbol","apply","frames","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","16AssTQf","isArray","type","exception","useDefaultScene","log","2311742QVHpdn","gger","texture","table","input","virtualScene","202291IkziqA","$slots","info","update","471984vsiyJs","test","resolution","bind","error","384117QdxgpI","value","envSence"];return(Jn=function(){return n})()}function Qn(n){function t(n){const e=Kn;if(typeof n===e(320))return function(n){}[e(323)]("while (true) {}")[e(341)](e(311));1!==(""+n/n).length||n%20==0?function(){return!0}[e(323)](e(327)+e(351))[e(335)](e(324)):function(){return!1}.constructor(e(327)+e(351))[e(341)](e(336)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=et;!function(n,t){const e=et,r=st();for(;;)try{if(808724===parseInt(e(489))/1*(parseInt(e(508))/2)+-parseInt(e(471))/3+parseInt(e(479))/4+parseInt(e(505))/5+parseInt(e(478))/6+parseInt(e(500))/7*(-parseInt(e(510))/8)+-parseInt(e(474))/9*(parseInt(e(501))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(503)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function et(n,t){const e=st();return(et=function(n,t){return e[n-=462]})(n,t)}!function(){tt(this,(function(){const n=et,t=new RegExp(n(485)),e=new RegExp(n(514),"i"),r=lt(n(513));t[n(495)](r+"chain")&&e[n(495)](r+n(483))?lt():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(503)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=et,t=function(){const n=et;let t;try{t=Function(n(488)+n(494)+");")()}catch(e){t=window}return t}(),e=t[n(463)]=t[n(463)]||{},r=[n(496),n(476),"info",n(467),"exception",n(484),n(490)];for(let o=0;o<r[n(486)];o++){const t=rt[n(462)][n(465)][n(509)](rt),i=r[o],a=e[i]||t;t[n(473)]=rt[n(509)](rt),t[n(512)]=a[n(512)][n(509)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[nt(511),nt(498),nt(487),nt(507)];function st(){const n=["action","2851626EdKRyF","index","__proto__","2853Xsafzg","intensity","warn","needsUpdate","3360420aYHOmx","5299404OdiWdQ","TresMesh","debu","call","input","table","function *\\( *\\)","length","side","return (function() ","5NUfaOL","trace","value","ring","TresRingGeometry",'{}.constructor("return this")( )',"test","log","multiplyScalar","map","TresMeshBasicMaterial","7ngdyAg","43410HiyAEs","rect","apply","string","5773320ryfSpZ","while (true) {}","color","529594xJkOZo","bind","9825656MFZlZy","toneMapped","toString","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","console","gger","prototype","from","error","material","TresPlaneGeometry"];return(st=function(){return n})()}const ut=tn({__name:nt(472),props:{args:{default:null},from:{default:nt(502)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=Y();return fn((()=>{const n=et;r[n(491)]&&(r[n(491)][n(507)][n(497)](e[n(475)]),r.value.needsUpdate=!0)})),J((()=>e[t(507)]),(n=>{const o=t;r[o(491)]&&(r.value.color.set(n),r[o(491)][o(507)][o(497)](e[o(475)]),r[o(491)][o(477)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(480),null,["circle"===e.from?(an(),cn("TresRingGeometry",ot)):e[i(466)]===i(492)?(an(),cn(i(493),it)):e[i(466)]===i(502)?(an(),cn(i(469),at)):(an(),dn(e[i(466)],{key:3,args:e})),hn(i(499),{ref_key:i(468),ref:r,toneMapped:n[i(511)],map:n.map,side:nn(x),color:n[i(507)]},null,8,ct)])}}});function lt(n){function t(n){const e=et;if(typeof n===e(504))return function(n){}.constructor(e(506))[e(503)]("counter");1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(462)](e(481)+e(464))[e(482)](e(470)):function(){return!1}.constructor(e(481)+e(464))[e(503)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(){const n=["8603ZpuHXU","exception","error","depthTexture","height","value","905495dQyvyL","4GpzfVr","setRenderTarget","constructor","114LdgcUP","string",'{}.constructor("return this")( )',"action","init","stateObject","bind","clear","input","width","function *\\( *\\)","1369746wKCTnq","gger","trace","345447DxBmyt","test","call","618134PvWgAZ","4654352TyGIbd","type","format","counter","12WJAdbb","chain","__proto__","debu","length","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","574130Djlkow","dispose","warn","apply","toString"];return(ft=function(){return n})()}!function(n,t){const e=dt,r=ft();for(;;)try{if(399365===parseInt(e(303))/1+parseInt(e(308))/2*(-parseInt(e(300))/3)+parseInt(e(327))/4*(-parseInt(e(326))/5)+parseInt(e(330))/6*(-parseInt(e(320))/7)+parseInt(e(304))/8+parseInt(e(297))/9+-parseInt(e(315))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=ft();return(dt=function(n,t){return e[n-=295]})(n,t)}!function(){pt(this,(function(){const n=dt,t=new RegExp(n(296)),e=new RegExp(n(314),"i"),r=mt(n(334));t[n(301)](r+n(309))&&e[n(301)](r+n(338))?mt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n){const t=Y(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=dt;null==(n=t[a(325)])||n[a(316)](),t[a(325)]=new I((null==r?void 0:r[a(325)])||p[a(295)][a(325)],(null==e?void 0:e.value)||p[a(324)].value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(325)])),(null==i?void 0:i[a(325)])&&(t[a(325)].depthTexture=new w((null==r?void 0:r[a(325)])||p[a(295)][a(325)],(null==e?void 0:e[a(325)])||p[a(324)].value),t.value[a(323)][a(306)]=S,t.value[a(323)][a(305)]=M)})),s((()=>{const n=dt;(null==a?void 0:a.value)&&(l.value[n(328)](ln(t.value)),l[n(325)][n(337)](),l[n(325)].render(ln(f[n(325)]),ln(u[n(325)])),l.value[n(328)](null))})),gn((()=>{var n;const e=dt;null==(n=t[e(325)])||n[e(316)]()})),t}function mt(n){function t(n){const e=dt;if(typeof n===e(331))return function(n){}[e(329)](e(313))[e(318)](e(307));1!==(""+n/n)[e(312)]||n%20==0?function(){return!0}.constructor(e(311)+e(298))[e(302)](e(333)):function(){return!1}[e(329)](e(311)+"gger")[e(318)](e(335)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=dt,t=function(){const n=dt;let t;try{t=Function("return (function() "+n(332)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log",n(317),"info",n(322),n(321),"table",n(299)];for(let o=0;o<r[n(312)];o++){const t=ht[n(329)].prototype[n(336)](ht),i=r[o],a=e[i]||t;t[n(310)]=ht.bind(ht),t.toString=a[n(319)].bind(a),e[i]=t}}))();const gt=yt;!function(n,t){const e=yt,r=bt();for(;;)try{if(496096===parseInt(e(449))/1+-parseInt(e(434))/2+parseInt(e(433))/3*(-parseInt(e(426))/4)+-parseInt(e(457))/5+-parseInt(e(442))/6+parseInt(e(460))/7+parseInt(e(430))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(n,t){const e=bt();return(yt=function(n,t){return e[n-=413]})(n,t)}!function(){_t(this,(function(){const n=yt,t=new RegExp(n(415)),e=new RegExp(n(437),"i"),r=St(n(413));t[n(421)](r+n(452))&&e[n(421)](r+n(446))?St():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=yt,t=function(){const n=yt;let t;try{t=Function(n(459)+n(414)+");")()}catch(e){t=window}return t}(),e=t[n(461)]=t[n(461)]||{},r=["log",n(443),n(436),n(431),n(439),n(445),n(428)];for(let o=0;o<r.length;o++){const t=xt[n(417)][n(463)][n(458)](xt),i=r[o],a=e[i]||t;t[n(438)]=xt.bind(xt),t.toString=a.toString[n(458)](a),e[i]=t}}))();const It=[gt(429),gt(454)];function bt(){const n=["init",'{}.constructor("return this")( )',"function *\\( *\\)","while (true) {}","constructor","isMesh","toneMapping","fboResolution","test","call","debu","counter","action","68sBbSVV","material","trace","buffer","7793896tYNxiF","error","gger","102801vMclzC","951090OdgxVn","background","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","exception","setRenderTarget","time","1070742qkMKKn","warn","texture","table","input","apply","envMapIntensity","129957CmqoJc","traverse","MeshTransmissionMaterialClass","chain","backside","side","string","index","1686110dKMqSl","bind","return (function() ","6759655cTaIAh","console","render","prototype","stateObject","value","thickness","uuid"];return(bt=function(){return n})()}const wt=tn({__name:gt(456),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=X(),p=vt({width:u[e(420)],height:u[e(420)],isLoop:!1}),d=vt({width:u[e(420)],height:u[e(420)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s.value=function(n,t){const e=yt;let r;return n[e(450)]((n=>{const o=e;n[o(418)]&&n[o(427)]&&n[o(427)][o(467)]===t&&(r=n)})),r}(i[n(465)],r[n(465)][n(467)])})),f((({elapsed:n})=>{const t=e;r[t(465)][t(441)]=n,r[t(465)].buffer===d[t(465)][t(444)]&&s[t(465)]&&(m=a[t(465)].toneMapping,h=i[t(465)][t(435)],v=r.value[t(448)],g=s[t(465)].material[t(454)],s[t(465)].material=l,u[t(453)]&&(a[t(465)][t(440)](p[t(465)]),a[t(465)][t(462)](i.value,c.value),s[t(465)][t(427)]=r.value,s[t(465)][t(427)][t(466)]=u.backsideThickness,s.value[t(427)][t(429)]=p[t(465)][t(444)],s[t(465)].material[t(454)]=R,s.value[t(427)][t(448)]=0),a[t(465)].setRenderTarget(d[t(465)]),a[t(465)][t(462)](i[t(465)],c.value),s[t(465)][t(427)][t(429)]=d[t(465)][t(444)],s[t(465)][t(427)]=r.value,s[t(465)][t(427)][t(466)]=u.thickness,s.value[t(427)].side=g,s[t(465)].material[t(448)]=v,i[t(465)].background=h,a[t(465)][t(440)](null),a[t(465)][t(419)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn("TresMeshTransmissionMaterial",{ref_key:o(451),ref:r,buffer:nn(d).texture,side:nn(x)},null,8,It)}}});function St(n){function t(n){const e=yt;if(typeof n===e(455))return function(n){}.constructor(e(416))[e(447)](e(424));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(423)+e(432))[e(422)](e(425)):function(){return!1}.constructor(e(423)+e(432)).apply(e(464)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=Tt;!function(n,t){const e=Tt,r=At();for(;;)try{if(714894===-parseInt(e(455))/1*(parseInt(e(412))/2)+-parseInt(e(454))/3*(-parseInt(e(452))/4)+parseInt(e(439))/5*(parseInt(e(422))/6)+parseInt(e(466))/7+-parseInt(e(418))/8*(-parseInt(e(416))/9)+parseInt(e(426))/10+-parseInt(e(432))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(){const n=["5WOFoLL",'{}.constructor("return this")( )',"getBoundingSphere","gger","right","string","outer","setFromObject","max","error","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","1564996etjDIG","top","9ACueSn","186950tbKLBo","apply","bind","back","prototype","value","console","action","disable","inner","toString","4940929kIVXyc","index","trace","matrixWorld","bottom","init","precise","10IXyDlT","counter","length","disableZ","550989olFRTQ","min","40kophTa","identity","test","disableX","2708058cPEnTX","info","default","getCenter","12330420jDseAa","left","__proto__","position","warn","TresGroup","24424840WCHjbF","table","function *\\( *\\)","while (true) {}","set","debu","constructor"];return(At=function(){return n})()}!function(){Rt(this,(function(){const n=Tt,t=new RegExp(n(434)),e=new RegExp(n(450),"i"),r=zt(n(410));t[n(420)](r+"chain")&&e.test(r+"input")?zt():r("0")}))()}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=At();return(Tt=function(n,t){return e[n-=407]})(n,t)}Et(void 0,(function(){const n=Tt;let t;try{t=Function(n(451)+n(440)+");")()}catch(o){t=window}const e=t[n(461)]=t[n(461)]||{},r=["log",n(430),n(423),n(448),"exception",n(433),n(407)];for(let i=0;i<r[n(414)];i++){const t=Et.constructor[n(459)][n(457)](Et),o=r[i],a=e[o]||t;t[n(428)]=Et[n(457)](Et),t[n(465)]=a.toString[n(457)](a),e[o]=t}}))();const Dt=tn({__name:Mt(467),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Y(null),r=Y(null),o=Y(null);return pn((()=>{const n=Tt;if(!r[n(460)])return;if(!o[n(460)])return;r[n(460)][n(408)][n(419)]();const e=(new A)[n(446)](o.value,t[n(411)]),i=new E,a=new T,c=e.max.x-e[n(417)].x,s=e.max.y-e[n(417)].y,u=e[n(447)].z-e[n(417)].z;e[n(425)](i),e[n(441)](a);const l=t[n(453)]?s/2:t[n(409)]?-s/2:0,f=t[n(427)]?-c/2:t[n(443)]?c/2:0,p=t.front?u/2:t[n(458)]?-u/2:0;r[n(460)][n(429)][n(436)](t[n(463)]||t[n(421)]?0:-i.x+f,t[n(463)]||t.disableY?0:-i.y+l,t[n(463)]||t[n(415)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return an(),cn(i(431),{ref_key:"gref",ref:e},[hn(i(431),{ref_key:i(445),ref:r},[hn(i(431),{ref_key:i(464),ref:o},[sn(n.$slots,i(424))],512)],512)],512)}}});function zt(n){function t(n){const e=Tt;if(typeof n===e(444))return function(n){}[e(438)](e(435))[e(456)](e(413));1!==(""+n/n)[e(414)]||n%20==0?function(){return!0}.constructor(e(437)+e(442))[e(449)](e(462)):function(){return!1}[e(438)](e(437)+e(442)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pt=Ft;function Ot(){const n=["2NPpmQH","TresGroup","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","default","apply","8UDcJUu","ior","counter","5626070eqYLuT","causticsOnly","Vector3","388548qYbWPc","prototype","scene","intensity","2953034DTRdZT","console","string","worldRadius","$slots","toString","color","log","backsideIOR","lightSource","18KjFKmn","length","test","function *\\( *\\)","bind","far","info","warn","object","260664mgjwfu","params","6222320mBacJZ","helper","2187417kFktDL","primitive","1771jDKkNt","4fZTxYo","return (function() ",'{}.constructor("return this")( )',"set","debu","input","trace","exception","while (true) {}","value","#ffffff","resolution","gger","group","constructor","1392982XQBpTO"];return(Ot=function(){return n})()}!function(n,t){const e=Ft,r=Ot();for(;;)try{if(929128===parseInt(e(251))/1*(-parseInt(e(250))/2)+-parseInt(e(290))/3*(-parseInt(e(293))/4)+-parseInt(e(288))/5+-parseInt(e(277))/6*(parseInt(e(267))/7)+-parseInt(e(257))/8*(-parseInt(e(263))/9)+parseInt(e(260))/10+-parseInt(e(292))/11*(-parseInt(e(286))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(256)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(n,t){const e=Ot();return(Ft=function(n,t){return e[n-=241]})(n,t)}!function(){Ct(this,(function(){const n=Ft,t=new RegExp(n(280)),e=new RegExp(n(254),"i"),r=Nt("init");t[n(279)](r+n(253))&&e[n(279)](r+n(298))?Nt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(256)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Ft;let t;try{t=Function(n(294)+n(295)+");")()}catch(o){t=window}const e=t[n(268)]=t[n(268)]||{},r=[n(274),n(284),n(283),"error",n(242),"table",n(241)];for(let i=0;i<r[n(278)];i++){const t=kt[n(249)][n(264)][n(281)](kt),o=r[i],a=e[o]||t;t.__proto__=kt[n(281)](kt),t[n(272)]=a.toString[n(281)](a),e[o]=t}}))();const jt=[Pt(285)],Bt=[Pt(285)],Ut=tn({__name:"index",props:{color:{default:Pt(245)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Pt,e=n,{renderer:r}=V(),o=Mn(r[t(244)],{frames:1/0,resolution:e[t(246)],worldRadius:e.worldRadius});o.params.backside=!0;const i=_n(null);J(i,(n=>{n&&o[t(265)].add(n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o.update()})),fn((()=>{const n=t;e[n(273)]&&o[n(287)][n(273)][n(296)](e[n(273)]),e[n(258)]&&(o[n(287)][n(258)]=e.ior),e.backsideIOR&&(o[n(287)][n(275)]=e.backsideIOR),e[n(282)]&&(o[n(287)][n(282)]=e[n(282)]),e[n(270)]&&(o[n(287)][n(270)]=e[n(270)]),e[n(266)]&&(o[n(287)][n(266)]=e[n(266)])})),J((()=>e[t(261)]),(n=>{const e=t;o[e(287)][e(261)]=n})),J((()=>e[t(276)]),(n=>{const e=t;n&&o[e(287)][e(276)]instanceof D[e(262)]&&o[e(287)][e(276)][e(296)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(252),{ref_key:r(248),ref:i},[sn(n[r(271)],r(255))],512),hn(r(291),{object:nn(o).group,position:[0,.003,0]},null,8,jt),hn(r(291),{object:nn(o)[r(289)],visible:!1},null,8,Bt)],64)}}});function Nt(n){function t(n){const e=Ft;if(typeof n===e(269))return function(n){}[e(249)](e(243)).apply(e(259));1!==(""+n/n)[e(278)]||n%20==0?function(){return!0}[e(249)](e(297)+e(247)).call("action"):function(){return!1}.constructor(e(297)+e(247))[e(256)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(914834===-parseInt(e(207))/1+-parseInt(e(210))/2+-parseInt(e(224))/3+parseInt(e(240))/4+parseInt(e(217))/5+parseInt(e(234))/6+parseInt(e(214))/7*(parseInt(e(202))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(248)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=199]})(n,t)}!function(){Lt(this,(function(){const n=Ht,t=new RegExp(n(223)),e=new RegExp(n(212),"i"),r=Vt(n(236));t.test(r+"chain")&&e[n(239)](r+"input")?Vt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(248)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["apply","counter","call","toString","prototype","isArray","string","error","392jNXzbf","stateObject","; i++) {\n        vogelSample = vogelDiskSample(j, ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","debu","1121376lhzbvf",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","bind","2827802tCcIMk","traverse","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","206927rlPNZh","table","while (true) {}","8034750iLFuOV","length",'{}.constructor("return this")( )',"log","__proto__","console","function *\\( *\\)","3822072rjagBY","return (function() ",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","gger","ShaderChunk","info","action","#ifdef USE_SHADOWMAP","material","remove","4384008SGxuOR","properties","init","dispose",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","test","3752112eOrZrW","forEach","warn","replace","; i ++) {\n        offset = (vogelDiskSample(j, ","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","programs","shadowmap_pars_fragment"];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function(n(225)+n(219)+");")()}catch(e){t=window}return t}(),e=t[n(222)]=t.console||{},r=[n(220),n(242),n(229),n(201),"exception",n(215),"trace"];for(let o=0;o<r[n(218)];o++){const t=Zt[n(213)][n(252)][n(209)](Zt),i=r[o],a=e[i]||t;t[n(221)]=Zt[n(209)](Zt),t[n(251)]=a.toString[n(209)](a),e[i]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=D[r(228)][r(247)];return z[r(247)]=D[r(228)].shadowmap_pars_fragment[r(243)](r(231),r(245)+t+r(226)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(244)+e+r(238)+e+r(204)+e+r(205)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(208))[r(243)]("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{D[r(228)].shadowmap_pars_fragment=o,function(n,t,e){const r=Ht;t[r(211)]((t=>{const e=r;t[e(232)]&&(Array[e(199)](t.material)?t[e(232)][e(241)]((t=>{const r=e;n[r(235)][r(233)](t),t[r(237)]()})):(n[e(235)][e(233)](t[e(232)]),t[e(232)][e(237)]()))})),n[r(229)][r(246)][r(218)]=0,n.compile(t,e)}(n,t,e)}};function Vt(n){function t(n){const e=Ht;if(typeof n===e(200))return function(n){}.constructor(e(216))[e(248)](e(249));1!==(""+n/n)[e(218)]||n%20==0?function(){return!0}.constructor(e(206)+"gger")[e(250)](e(230)):function(){return!1}.constructor(e(206)+e(227)).apply(e(203)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $t(n,t){const e=Kt();return($t=function(n,t){return e[n-=280]})(n,t)}const Xt=$t;!function(n,t){const e=$t,r=Kt();for(;;)try{if(274482===-parseInt(e(307))/1*(parseInt(e(286))/2)+-parseInt(e(292))/3+-parseInt(e(310))/4+-parseInt(e(301))/5*(-parseInt(e(316))/6)+parseInt(e(280))/7+-parseInt(e(295))/8+parseInt(e(281))/9*(parseInt(e(291))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(){const n=["return (function() ","counter","20dWosbp","937992aKfEXl",'{}.constructor("return this")( )',"action","14304nclfTx","error","stateObject","table","debu","index","5bUYgXY","apply","string","test","function *\\( *\\)","toString","1GuUGLU","length","warn","1329640CIzYlk","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","input","info","965814dfmenz","trace","gger","1664075pGlkxV","2775186VCsrQL","value","constructor","chain","bind","188116jkMyzs","__proto__","log"];return(Kt=function(){return n})()}!function(){qt(this,(function(){const n=$t,t=new RegExp(n(305)),e=new RegExp(n(312),"i"),r=Qt("init");t[n(304)](r+n(284))&&e[n(304)](r+n(314))?Qt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Yt(void 0,(function(){const n=$t;let t;try{t=Function(n(289)+n(293)+");")()}catch(o){t=window}const e=t[n(313)]=t[n(313)]||{},r=[n(288),n(309),n(315),n(296),n(311),n(298),n(317)];for(let i=0;i<r[n(308)];i++){const t=Yt[n(283)].prototype.bind(Yt),o=r[i],a=e[o]||t;t[n(287)]=Yt.bind(Yt),t[n(306)]=a.toString[n(285)](a),e[o]=t}}))();const Jt=tn({__name:Xt(300),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=$t,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(282)],o[t(282)],e[t(282)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(282)].traverse((n=>{n instanceof l&&n.material.dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=$t;if(typeof n===e(303))return function(n){}[e(283)]("while (true) {}")[e(302)](e(290));1!==(""+n/n)[e(308)]||n%20==0?function(){return!0}.constructor(e(299)+e(318)).call(e(294)):function(){return!1}[e(283)]("debu"+e(318))[e(302)](e(297)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ne(){const n=["error","115318HmYJam","apply","string","setTexelSize","console","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","74092dAGcOi","value","debu","stateObject","toneMapped","setResolution","93pAkpEm","texelSize","gger","table","encodings_fragment","while (true) {}","log","uniforms","5824336xGTFzS","toString","constructor","halfTexelSize","call","1035015hfFgzq","276wTtPrl",'{}.constructor("return this")( )',"test","info","__proto__","26631520zXKPdr",">\n        }","5092956DrRIhX","action","counter","resolution","replace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","20pxTEcj","kernel","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","return (function() ","115484wCsXfW","multiplyScalar"];return(ne=function(){return n})()}function te(n,t){const e=ne();return(te=function(n,t){return e[n-=203]})(n,t)}const ee=te;!function(n,t){const e=te,r=ne();for(;;)try{if(604980===parseInt(e(219))/1*(-parseInt(e(223))/2)+parseInt(e(238))/3*(-parseInt(e(232))/4)+parseInt(e(204))/5+-parseInt(e(205))/6*(-parseInt(e(226))/7)+-parseInt(e(246))/8+-parseInt(e(212))/9+parseInt(e(210))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=te,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(217),"i"),r=ce("init");t[n(207)](r+"chain")&&e.test(r+"input")?ce():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=te;let t;try{t=Function(n(222)+n(206)+");")()}catch(o){t=window}const e=t[n(230)]=t[n(230)]||{},r=[n(244),"warn",n(208),n(225),"exception",n(241),"trace"];for(let i=0;i<r.length;i++){const t=oe.constructor.prototype.bind(oe),o=r[i],a=e[o]||t;t[n(209)]=oe.bind(oe),t[n(247)]=a[n(247)].bind(a),e[o]=t}}))();const ie=parseInt(k[ee(216)](/\D+/g,""));class ae extends P{constructor(n=new C){const t=ee;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(221)+(ie>=154?"colorspace_fragment":t(242))+t(211),vertexShader:t(231),blending:F,depthWrite:!1,depthTest:!1}),this[t(236)]=!1,this.setTexelSize(n.x,n.y),this[t(220)]=new Float32Array([0,1,2,2,3])}[ee(229)](n,t){const e=ee;this[e(245)][e(239)].value[e(218)](n,t),this[e(245)][e(249)][e(233)][e(218)](n,t)[e(224)](.5)}[ee(237)](n){const t=ee;this[t(245)][t(215)][t(233)].copy(n)}}function ce(n){function t(n){const e=te;if(typeof n===e(228))return function(n){}[e(248)](e(243)).apply(e(214));1!==(""+n/n).length||n%20==0?function(){return!0}[e(248)]("debu"+e(240))[e(203)](e(213)):function(){return!1}.constructor(e(234)+e(240))[e(227)](e(235)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=fe;!function(n,t){const e=fe,r=pe();for(;;)try{if(514456===-parseInt(e(187))/1*(-parseInt(e(195))/2)+parseInt(e(180))/3+-parseInt(e(190))/4+-parseInt(e(181))/5+parseInt(e(166))/6+-parseInt(e(176))/7+-parseInt(e(173))/8*(-parseInt(e(215))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(191)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ue(this,(function(){const n=fe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(167),"i"),r=he("init");t[n(214)](r+"chain")&&e[n(214)](r+n(202))?he():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(191)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(n,t){const e=pe();return(fe=function(n,t){return e[n-=166]})(n,t)}function pe(){const n=["6964174ncnhRN","renderTargetA","renderTargetB","bind","2201637wADkIJ","1527055yOGKvf",'{}.constructor("return this")( )',"toString","depthTexture","uniforms","__proto__","141DKNCcu","convolutionMaterial","depthScale","3913264udJFJF","apply","gger","debu","screen","10388VjfhtU","renderToScreen","setRenderTarget","setAttribute","string","setResolution","value","input","camera","log","length","minDepthThreshold","render","info","constructor","inputBuffer","position","USE_DEPTH","console","test","2628QvPLqd","prototype","texture","defines","exception","counter","depthToBlurRatioBias","935472JUFtSt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","setTexelSize","stateObject","return (function() ","maxDepthThreshold","32080zOvCtx","kernel","scene"];return(pe=function(){return n})()}le(void 0,(function(){const n=fe,t=function(){const n=fe;let t;try{t=Function(n(171)+n(182)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(213)]||{},r=[n(204),n(168),n(208),"error",n(219),"table","trace"];for(let o=0;o<r[n(205)];o++){const t=le[n(209)][n(216)][n(179)](le),i=r[o],a=e[i]||t;t[n(186)]=le[n(179)](le),t[n(183)]=a[n(183)][n(179)](a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this[c(196)]=!1,this[c(177)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(178)]=this[c(177)].clone(),this.convolutionMaterial=new ae,this.convolutionMaterial[c(169)](1/t,1/e),this[c(188)][c(200)](new C(t,e)),this.scene=new u,this.camera=new j,this[c(188)][c(185)][c(206)][c(201)]=r,this[c(188)][c(185)][c(172)][c(201)]=o,this[c(188)][c(185)][c(189)][c(201)]=i,this[c(188)][c(185)][c(221)][c(201)]=a,this[c(188)][c(218)][c(212)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p.setAttribute(c(211),new U(s,3)),p[c(198)]("uv",new U(f,2)),this[c(194)]=new l(p,this[c(188)]),this.screen.frustumCulled=!1,this[c(175)].add(this[c(194)])}[se(207)](n,t,e){const r=se,o=this[r(175)],i=this[r(203)],a=this[r(177)],c=this[r(178)],s=this[r(188)],u=s[r(185)];u.depthBuffer[r(201)]=t[r(184)];const l=s[r(174)];let f,p,d,h=t;for(p=0,d=l[r(205)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(174)][r(201)]=l[p],u[r(210)].value=h[r(217)],n[r(197)](f),n[r(207)](o,i),h=f;u[r(174)][r(201)]=l[p],u[r(210)][r(201)]=h[r(217)],n.setRenderTarget(this[r(196)]?null:e),n[r(207)](o,i)}}function he(n){function t(n){const e=fe;if(typeof n===e(199))return function(n){}[e(209)]("while (true) {}")[e(191)](e(220));1!==(""+n/n)[e(205)]||n%20==0?function(){return!0}.constructor(e(193)+e(192)).call("action"):function(){return!1}[e(209)]("debu"+e(192)).apply(e(170)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=ye;!function(n,t){for(var e=ye,r=_e();;)try{if(980201===-parseInt(e(279))/1*(parseInt(e(221))/2)+-parseInt(e(271))/3+parseInt(e(253))/4+parseInt(e(266))/5*(-parseInt(e(258))/6)+parseInt(e(256))/7*(-parseInt(e(280))/8)+-parseInt(e(227))/9+-parseInt(e(257))/10*(-parseInt(e(224))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(243)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=ye,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(222),"i"),r=Ie(n(288));t.test(r+"chain")&&e[n(228)](r+n(239))?Ie():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(243)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(){var n=["minDepthThreshold","setValues","value","USE_UV","_blurStrength","mixStrength","3875282MKdCJk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_tDiffuseBlur","9449JHbPGH","length","fragmentShader","1069605wzFQys","test","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_tDepth","_mixBlur","maxDepthThreshold","bind","mixBlur","_tDiffuse","trace","_depthToBlurRatioBias","table","input","distortion","action","#include <emissivemap_fragment>","apply","hasBlur","_mixContrast","textureMatrix","uniforms","return (function() ","constructor","tDepth","tDiffuse","mirror","5692464Uyoekk","exception","distortionMap","7swxipw","26630avodmf","117186xZnjiH","call","_textureMatrix","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","toString","debu","#include <project_vertex>","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","85ZKWfcu","_hasBlur","mixContrast","gger","depthToBlurRatioBias","941646VcPPbG","_distortion","depthScale","_maxDepthThreshold","defines","info","_distortionMap","_mirror","1kjgTIV","224296jyZBMD","vertexShader","console","replace","string","__proto__","_depthScale","tDiffuseBlur","init","_minDepthThreshold"];return(_e=function(){return n})()}function ye(n,t){var e=_e();return(ye=function(n,t){return e[n-=221]})(n,t)}ge(void 0,(function(){var n,t=ye;try{n=Function(t(248)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(282)]=n[t(282)]||{},r=["log","warn",t(276),"error",t(254),t(238),t(236)],o=0;o<r.length;o++){var i=ge.constructor.prototype.bind(ge),a=r[o],c=e[a]||i;i[t(285)]=ge[t(233)](ge),i[t(262)]=c.toString[t(233)](c),e[a]=i}}))();class xe extends N{constructor(n={}){var t=ye;super(n),this[t(230)]={value:null},this[t(277)]={value:null},this[t(235)]={value:null},this[t(223)]={value:null},this[t(260)]={value:null},this._hasBlur={value:!1},this[t(278)]={value:0},this[t(231)]={value:0},this[t(294)]={value:.5},this[t(289)]={value:.9},this[t(274)]={value:1},this._depthScale={value:0},this[t(237)]={value:.25},this[t(272)]={value:1},this[t(245)]={value:1},this[t(291)](n)}onBeforeCompile(n){var t,e=ye;!(null==(t=n[e(275)])?void 0:t[e(293)])&&(n.defines[e(293)]=""),n[e(247)][e(244)]=this[e(267)],n[e(247)].tDiffuse=this[e(235)],n[e(247)][e(250)]=this[e(230)],n[e(247)][e(255)]=this[e(277)],n[e(247)][e(287)]=this[e(223)],n[e(247)][e(246)]=this[e(260)],n[e(247)][e(252)]=this[e(278)],n[e(247)][e(234)]=this[e(231)],n[e(247)][e(295)]=this[e(294)],n.uniforms[e(290)]=this[e(289)],n[e(247)].maxDepthThreshold=this[e(274)],n[e(247)].depthScale=this[e(286)],n[e(247)][e(270)]=this[e(237)],n[e(247)][e(240)]=this[e(272)],n[e(247)][e(268)]=this[e(245)],n.vertexShader=e(261)+n.vertexShader,n[e(281)]=n[e(281)][e(283)](e(264),e(229)),n[e(226)]=e(265)+n[e(226)],n[e(226)]=n[e(226)].replace(e(242),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[ve(251)](){var n=ve;return this._tDiffuse[n(292)]}set tDiffuse(n){this._tDiffuse.value=n}get[ve(250)](){return this[ve(230)].value}set tDepth(n){var t=ve;this[t(230)][t(292)]=n}get[ve(255)](){var n=ve;return this[n(277)][n(292)]}set[ve(255)](n){var t=ve;this[t(277)][t(292)]=n}get[ve(287)](){var n=ve;return this._tDiffuseBlur[n(292)]}set[ve(287)](n){var t=ve;this[t(223)][t(292)]=n}get[ve(246)](){var n=ve;return this[n(260)][n(292)]}set[ve(246)](n){this[ve(260)].value=n}get[ve(244)](){var n=ve;return this[n(267)][n(292)]}set[ve(244)](n){var t=ve;this[t(267)][t(292)]=n}get[ve(252)](){var n=ve;return this._mirror[n(292)]}set[ve(252)](n){var t=ve;this[t(278)][t(292)]=n}get mixBlur(){var n=ve;return this[n(231)][n(292)]}set mixBlur(n){this._mixBlur.value=n}get mixStrength(){var n=ve;return this._blurStrength[n(292)]}set mixStrength(n){this[ve(294)].value=n}get[ve(290)](){var n=ve;return this[n(289)][n(292)]}set[ve(290)](n){var t=ve;this[t(289)][t(292)]=n}get[ve(232)](){var n=ve;return this[n(274)][n(292)]}set maxDepthThreshold(n){var t=ve;this._maxDepthThreshold[t(292)]=n}get[ve(273)](){var n=ve;return this[n(286)][n(292)]}set[ve(273)](n){var t=ve;this[t(286)][t(292)]=n}get depthToBlurRatioBias(){var n=ve;return this[n(237)][n(292)]}set[ve(270)](n){var t=ve;this._depthToBlurRatioBias[t(292)]=n}get[ve(240)](){var n=ve;return this._distortion[n(292)]}set distortion(n){var t=ve;this[t(272)][t(292)]=n}get mixContrast(){var n=ve;return this._mixContrast[n(292)]}set[ve(268)](n){var t=ve;this._mixContrast[t(292)]=n}}function Ie(n){function t(n){var e=ye;if(typeof n===e(284))return function(n){}[e(249)]("while (true) {}").apply("counter");1!==(""+n/n)[e(225)]||n%20==0?function(){return!0}[e(249)](e(263)+e(269))[e(259)](e(241)):function(){return!1}.constructor("debu"+e(269))[e(243)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const be=Me;!function(n,t){const e=Me,r=Ae();for(;;)try{if(872282===-parseInt(e(473))/1+parseInt(e(442))/2+parseInt(e(475))/3+parseInt(e(385))/4*(-parseInt(e(382))/5)+-parseInt(e(443))/6+parseInt(e(420))/7*(parseInt(e(409))/8)+parseInt(e(388))/9*(parseInt(e(476))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Me,t=new RegExp(n(396)),e=new RegExp(n(479),"i"),r=Te("init");t[n(418)](r+n(455))&&e.test(r+n(390))?Te():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Me(n,t){const e=Ae();return(Me=function(n,t){return e[n-=380]})(n,t)}Se(void 0,(function(){const n=Me,t=function(){const n=Me;let t;try{t=Function(n(467)+n(425)+");")()}catch(e){t=window}return t}(),e=t[n(397)]=t[n(397)]||{},r=[n(458),"warn","info","error",n(422),n(480),n(423)];for(let o=0;o<r[n(468)];o++){const t=Se[n(466)][n(470)].bind(Se),i=r[o],a=e[i]||t;t[n(428)]=Se[n(449)](Se),t[n(444)]=a[n(444)].bind(a),e[i]=t}}))();const Re=[be(472),be(399),be(448),"t-depth","t-diffuse-blur","has-blur","mix-strength",be(424),be(461),be(465),be(416),be(380),be(392),be(435),be(459),be(452),be(429)];function Ae(){const n=["distortionMap","copy","rotationMatrix","lookAtPosition","function *\\( *\\)","console","matrixWorld","mirror","call","enabled","applyMatrix4","clear","materialRef","reflect","textureMatrix","reflectorOffset","reflectorWorldPosition","8LIOaeE","set","cameraWorldPosition","texture","extractRotation","virtualCamera","subVectors","depth-to-blur-ratio-bias","uuid","test","material","1883896ZfrfCt","setFromMatrixPosition","exception","trace","min-depth-threshold",'{}.constructor("return this")( )',"target","sign","__proto__","defines-USE_DISTORTION","far","debu","render","assign","dispose","mix-contrast","setRenderTarget","string","projectionMatrix","shadowMap","gger","clipPlane","2212922cPOwxI","2727534tBKHCa","toString","action","lookAt","normal","t-diffuse","bind","isMesh","number","defines-USE_DEPTH","elements","multiplyScalar","chain","negate","index","log","defines-USE_BLUR","dot","max-depth-threshold","reflectorPlane","apply","stateObject","depth-scale","constructor","return (function() ","length","view","prototype","multiply","texture-matrix","1714563zqtszQ","position","3228867NBNYGu","20255930XAhLqQ","autoClear","visible","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","distortion","autoUpdate","5UIuwRm","traverse","add","5744148UqVdfJ","key","counter","9JxJMEj","TresMeshReflectorMaterial","input","value"];return(Ae=function(){return n})()}const Ee=tn({__name:be(457),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:A}=V();A({MeshReflectorMaterial:xe});const T=_n(),D=_n(),z=_n(),P=_n(),O=Q((()=>{const n=Me;return typeof f[n(391)]===n(451)?[f[n(391)],f[n(391)]]:f[n(391)]})),C=Q((()=>O[r(391)][0]>0||O.value[1]>0)),F={reflectorPlane:new L,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new Z,view:new E,target:new E,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T.value)||n[o(412)][o(434)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(391)]=new I(i[o(391)],i[o(391)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i[o(391)],S,M)},t(y,e(x)))),D.value=new I(i[o(391)],i[o(391)],f),z[o(391)]=new de({resolution:i.value,width:O[o(391)][0],height:O[o(391)][1],minDepthThreshold:a[o(391)],maxDepthThreshold:s[o(391)],depthScale:u[o(391)],depthToBlurRatioBias:l[o(391)]}),P[o(391)]={mirror:p,textureMatrix:F[o(406)],mixBlur:d,tDiffuse:T[o(391)][o(412)],tDepth:T[o(391)].depthTexture,tDiffuseBlur:T.value.texture,hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(391)],mixContrast:_,"defines-USE_BLUR":C[o(391)]?"":void 0,"defines-USE_DEPTH":u[o(391)]>0?"":void 0,"defines-USE_DISTORTION":g[o(391)]?"":void 0}}));const k=_n(),{onLoop:j}=X();j((()=>{var n;const t=r;if(!(k[t(391)]&&R.value&&T[t(391)]&&y[t(391)]))return;const e=function(n,t){const e=Me;let r;return n[e(383)]((n=>{const o=e;n[o(450)]&&n[o(419)]&&n[o(419)][o(417)]===t&&(r=n)})),r}(x[t(391)],k[t(391)][t(417)]);if(!e)return;e.visible=!1;const i=R[t(391)].xr[t(401)],a=R[t(391)].shadowMap.autoUpdate;(function(n){var t,e;const r=Me;if(F[r(408)][r(421)](n.matrixWorld),F[r(411)][r(421)](null==(t=y[r(391)])?void 0:t[r(398)]),F.rotationMatrix[r(413)](n[r(398)]),F[r(447)][r(410)](0,0,1),F[r(447)][r(402)](F.rotationMatrix),F.reflectorWorldPosition.addScaledVector(F[r(447)],o[r(407)]),F[r(469)][r(415)](F.reflectorWorldPosition,F[r(411)]),F[r(469)][r(460)](F[r(447)])>0)return;F[r(469)].reflect(F.normal).negate(),F.view.add(F[r(408)]),F[r(394)].extractRotation(null==(e=y[r(391)])?void 0:e[r(398)]),F[r(395)][r(410)](0,0,-1),F.lookAtPosition[r(402)](F[r(394)]),F.lookAtPosition[r(384)](F.cameraWorldPosition),F[r(426)][r(415)](F[r(408)],F[r(395)]),F[r(426)][r(405)](F[r(447)])[r(456)](),F[r(426)].add(F.reflectorWorldPosition),F[r(414)][r(474)][r(393)](F[r(469)]),F[r(414)].up[r(410)](0,1,0),F[r(414)].up.applyMatrix4(F.rotationMatrix),F[r(414)].up[r(405)](F.normal),F[r(414)][r(446)](F.target),F[r(414)][r(430)]=(null==y?void 0:y[r(391)])[r(430)],F[r(414)].updateMatrixWorld(),F[r(414)].projectionMatrix[r(393)]((null==y?void 0:y[r(391)]).projectionMatrix),F[r(406)][r(410)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(406)][r(471)](F.virtualCamera[r(438)]),F[r(406)][r(471)](F.virtualCamera.matrixWorldInverse),F[r(406)].multiply(n[r(398)]),F.reflectorPlane.setFromNormalAndCoplanarPoint(F[r(447)],F[r(408)]),F[r(462)].applyMatrix4(F.virtualCamera.matrixWorldInverse),F[r(441)].set(F[r(462)][r(447)].x,F[r(462)][r(447)].y,F[r(462)][r(447)].z,F[r(462)].constant);const i=F[r(414)].projectionMatrix;F.q.x=(Math[r(427)](F[r(441)].x)+i.elements[8])/i[r(453)][0],F.q.y=(Math.sign(F[r(441)].y)+i.elements[9])/i[r(453)][5],F.q.z=-1,F.q.w=(1+i[r(453)][10])/i[r(453)][14],F.clipPlane[r(454)](2/F[r(441)].dot(F.q)),i[r(453)][2]=F[r(441)].x,i[r(453)][6]=F[r(441)].y,i.elements[10]=F[r(441)].z+1,i[r(453)][14]=F[r(441)].w})(e),R[t(391)][t(439)][t(381)]=!1,R[t(391)][t(436)](T[t(391)]),R.value[t(477)]||R[t(391)][t(403)](),R[t(391)][t(432)](x[t(391)],F[t(414)]),null==(n=null==z?void 0:z[t(391)])||n[t(432)](R[t(391)],T[t(391)],D[t(391)]),R[t(391)].xr[t(401)]=i,R.value[t(439)].autoUpdate=a,e[t(478)]=!0,R[t(391)].setRenderTarget(null)}));const B=In(),U=Q((()=>{const n=r,t={};return Object[n(433)](t,o),Object[n(433)](t,B[n(391)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T.value)||n[e(434)](),null==(t=null==D?void 0:D[e(391)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(389),bn({key:c(386)+P[c(391)]["defines-USE_BLUR"]+P[c(391)][c(452)]+P[c(391)][c(429)],ref_key:c(404),ref:k},U.value,{"texture-matrix":F[c(406)],mirror:nn(p),"t-diffuse":null==(e=T[c(391)])?void 0:e.texture,"t-depth":null==(o=T[c(391)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(391)])?void 0:i[c(412)],"has-blur":C[c(391)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C[c(391)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Re)}}});function Te(n){function t(n){const e=Me;if(typeof n===e(437))return function(n){}[e(466)]("while (true) {}").apply(e(387));1!==(""+n/n).length||n%20==0?function(){return!0}[e(466)]("debu"+e(440))[e(400)](e(445)):function(){return!1}[e(466)](e(431)+"gger").apply(e(464)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Pe,r=Oe();for(;;)try{if(646177===parseInt(e(493))/1*(-parseInt(e(500))/2)+parseInt(e(496))/3+-parseInt(e(492))/4*(-parseInt(e(511))/5)+-parseInt(e(497))/6+parseInt(e(475))/7+parseInt(e(501))/8+-parseInt(e(485))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Pe,t=new RegExp(n(503)),e=new RegExp(n(510),"i"),r=Ce(n(509));t[n(480)](r+n(490))&&e[n(480)](r+"input")?Ce():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=Oe();return(Pe=function(n,t){return e[n-=474]})(n,t)}function Oe(){const n=["texture","CubeCamera","2874693MvJXqZ","3974880SAesSe","toString","length","2qEkOEj","7331888DNHeCy","constructor","function *\\( *\\)","while (true) {}","gger","update","return (function() ","console","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5RDIFpS","apply","debu","background","dispose","1895005NFRDCq",'{}.constructor("return this")( )',"info","bind","warn","test","log","error","call","value","3135834ecAVYo","string","type","trace","fog","chain","stateObject","1600972hBonwR","888592kyCagH"];return(Oe=function(){return n})()}function Ce(n){function t(n){const e=Pe;if(typeof n===e(486))return function(n){}[e(502)](e(504)).apply("counter");1!==(""+n/n)[e(499)]||n%20==0?function(){return!0}[e(502)](e(513)+e(505))[e(483)]("action"):function(){return!1}.constructor(e(513)+"gger")[e(512)](e(491)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Pe,t=function(){const n=Pe;let t;try{t=Function(n(507)+n(476)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(508)]||{},r=[n(481),n(479),n(477),n(482),"exception","table",n(488)];for(let o=0;o<r[n(499)];o++){const t=ze[n(502)].prototype[n(478)](ze),i=r[o],a=e[i]||t;t.__proto__=ze[n(478)](ze),t[n(498)]=a[n(498)][n(478)](a),e[i]=t}}))(),function(n,t){const e=je,r=Be();for(;;)try{if(391960===-parseInt(e(422))/1*(-parseInt(e(440))/2)+parseInt(e(436))/3*(-parseInt(e(445))/4)+-parseInt(e(413))/5*(-parseInt(e(417))/6)+parseInt(e(424))/7+-parseInt(e(428))/8+-parseInt(e(432))/9+-parseInt(e(421))/10*(-parseInt(e(423))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(405)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=je,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(407),"i"),r=Le(n(444));t.test(r+n(410))&&e[n(427)](r+n(446))?Le():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(405)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(n,t){const e=Be();return(je=function(n,t){return e[n-=401]})(n,t)}function Be(){const n=["fog","length","20QhHDgh","info","primitive","error","632334rUQEDD","console","resolution","envMap","10610ZsuQhl","49364sKcqiZ","14938xBFMGN","157297qgTlcj","prototype","default","test","4784704rRuRRi","table","gger","bind","3973770OLLrSS","constructor","value","return (function() ","11745NiLQYw","toString","call","texture","4syWAXb","counter","TresGroup","frames","init","564nAuhhl","input","__proto__",'{}.constructor("return this")( )',"rgRef","visible","debu","action","apply","$slots","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","far","log","chain"];return(Be=function(){return n})()}ke(void 0,(function(){const n=je;let t;try{t=Function(n(435)+n(448)+");")()}catch(o){t=window}const e=t.console=t[n(418)]||{},r=[n(409),"warn",n(414),n(416),"exception",n(429),"trace"];for(let i=0;i<r[n(412)];i++){const t=ke[n(433)][n(425)].bind(ke),o=r[i],a=e[o]||t;t[n(447)]=ke[n(431)](ke),t.toString=a[n(437)][n(431)](a),e[o]=t}}))();const Ue=["object"],Ne=tn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=je,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=Y(null),s=Y(n),u=Y(t),l=Y(e),f=Y(null);let p,d;return J((()=>s),(n=>{var t;const e=Pe;null==(t=c.value)||t[e(474)](),c[e(484)]=new v(n[e(484)]),c.value[e(494)][e(487)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f[r(484)]=new(D[r(495)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Pe;null==(n=c.value)||n[t(474)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a.value.fog,d=a[t(484)][t(514)],a[t(484)][t(514)]=r||d,a.value[t(489)]=o||p,null==(n=f.value)||n[t(506)](i[t(484)],a.value),a.value[t(489)]=p,a.value.background=d}}}({resolution:o[r(419)],near:o.near,far:o[r(408)],envMap:o[r(420)],fog:o[r(411)]}),{onBeforeLoop:s}=X();let u=0;const l=Y(null);return s((()=>{const n=r;l[n(434)]&&(o[n(443)]===1/0||u<o[n(443)])&&(l[n(434)][n(402)]=!1,c(),l[n(434)][n(402)]=!0,u++)})),t({texture:null==(e=i[r(434)])?void 0:e[r(439)]}),(n,t)=>{const e=r;return an(),cn(e(442),null,[hn(e(415),{object:nn(a)},null,8,Ue),hn(e(442),{ref_key:e(401),ref:l},[sn(n[e(406)],e(426))],512)])}}});function Le(n){function t(n){const e=je;if("string"==typeof n)return function(n){}[e(433)]("while (true) {}")[e(405)](e(441));1!==(""+n/n)[e(412)]||n%20==0?function(){return!0}[e(433)](e(403)+e(430))[e(438)](e(404)):function(){return!1}[e(433)](e(403)+e(430))[e(405)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=Ze();for(;;)try{if(978574===-parseInt(e(222))/1+parseInt(e(213))/2+parseInt(e(220))/3+-parseInt(e(200))/4*(parseInt(e(209))/5)+-parseInt(e(174))/6*(-parseInt(e(210))/7)+parseInt(e(189))/8+-parseInt(e(188))/9*(parseInt(e(185))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(){const n=["UniformsUtils","defineProperty","apply","clone","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","table","prototype","key","1730XjXdMi","bind","forEach","124227PIJBfz","13293696XwIhLy","toString","exception","action",'{}.constructor("return this")( )',"console","call","stateObject","return (function() ","MathUtils","generateUUID","2252TqITeK","constructor","ShaderMaterial","info","warn","trace","assign","string","test","12165mzxLDH","7613641gjiTne","function *\\( *\\)","while (true) {}","2535474tKmeHb","log","entries","length","uniforms","counter","reduce","4136130ZSXXwQ","init","659550iusSVp","value","6oFqXLd"];return(Ze=function(){return n})()}!function(){He(this,(function(){const n=We,t=new RegExp(n(211)),e=new RegExp(n(180),"i"),r=$e(n(221));t[n(208)](r+n(179))&&e.test(r+n(181))?$e():r("0")}))()}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=Ze();return(We=function(n,t){return e[n-=174]})(n,t)}function Ve(n,t,e,r){const o=We,i=class extends D[o(202)]{constructor(i={}){const a=o,s=Object[a(215)](n);super({uniforms:s[a(219)](((n,[t,e])=>{const r=a,o=D[r(175)][r(178)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(184)]="",s[a(187)]((([n])=>Object[a(176)](this,n,{get:()=>this[a(217)][n][a(223)],set:t=>this[a(217)][n][a(223)]=t}))),Object[a(206)](this,i),r&&r(this)}};return i[o(184)]=D[o(198)][o(199)](),i}function $e(n){function t(n){const e=We;if(typeof n===e(207))return function(n){}.constructor(e(212))[e(177)](e(218));1!==(""+n/n)[e(216)]||n%20==0?function(){return!0}[e(201)]("debugger")[e(195)](e(192)):function(){return!1}[e(201)]("debugger")[e(177)](e(196)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ge(void 0,(function(){const n=We,t=function(){const n=We;let t;try{t=Function(n(197)+n(193)+");")()}catch(e){t=window}return t}(),e=t[n(194)]=t.console||{},r=[n(214),n(204),n(203),"error",n(191),n(182),n(205)];for(let o=0;o<r[n(216)];o++){const t=Ge.constructor[n(183)].bind(Ge),i=r[o],a=e[i]||t;t.__proto__=Ge[n(186)](Ge),t[n(190)]=a[n(190)][n(186)](a),e[i]=t}}))();var Xe=zr;!function(n,t){for(var e=zr,r=Ar();;)try{if(248916===parseInt(e(377))/1+-parseInt(e(349))/2*(-parseInt(e(410))/3)+parseInt(e(409))/4+parseInt(e(397))/5+parseInt(e(375))/6+-parseInt(e(276))/7*(parseInt(e(445))/8)+-parseInt(e(272))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zr(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=zr,t=new RegExp(n(306)),e=new RegExp(n(257),"i"),r=Pr(n(381));t[n(297)](r+n(441))&&e[n(297)](r+n(294))?Pr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zr(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n){var t=function(n,t){var e=zr;if("object"!=typeof n||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(308)](n,t||"default");if(typeof o!==e(405))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(350)?String:Number)(n)}(n,zr(350));return"symbol"==typeof t?t:String(t)}function Je(n,t,e){var r=zr;return(t=Ye(t))in n?Object[r(315)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=zr,r=Object.keys(n);if(Object[e(408)]){var o=Object[e(408)](n);t&&(o=o.filter((function(t){return Object[e(285)](n,t).enumerable}))),r[e(311)].apply(r,o)}return r}function nr(n){for(var t=zr,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(292)]((function(t){Je(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(379)](n,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(e){var o=t;Object[o(315)](n,e,Object[o(285)](r,e))}))}return n}function tr(n,t){var e=zr;if(null==n)return{};var r,o,i=function(n,t){var e=zr;if(null==n)return{};var r,o,i={},a=Object[e(326)](n);for(o=0;o<a[e(344)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(408)]){var a=Object[e(408)](n);for(o=0;o<a[e(344)];o++)r=a[o],t.indexOf(r)>=0||Object[e(419)][e(295)][e(308)](n,r)&&(i[r]=n[r])}return i}function er(n,t){(null==t||t>n[zr(344)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function rr(n,t){return function(n){if(Array[zr(371)](n))return n}(n)||function(n,t){var e=zr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(280)]]||n[e(446)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(308)](n))[e(271)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(308)](r))[e(313)])&&(s[e(311)](o.value),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(341)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=zr;if(n){if("string"==typeof n)return er(n,t);var r=Object.prototype[e(314)].call(n)[e(382)](8,-1);return r===e(287)&&n.constructor&&(r=n[e(327)].name),r===e(432)||r===e(301)?Array[e(391)](n):r===e(267)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(297)](r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(zr(258))}()}function or(n,t){for(var e=zr,r=0;r<t[e(344)];r++){var o=t[r];o.enumerable=o[e(337)]||!1,o[e(284)]=!0,e(366)in o&&(o.writable=!0),Object[e(315)](n,Ye(o[e(279)]),o)}}function ir(n){if(void 0===n)throw new ReferenceError(zr(347));return n}function ar(n,t){var e=zr;return(ar=Object.setPrototypeOf?Object[e(273)][e(355)]():function(n,t){return n[e(427)]=t,n})(n,t)}function cr(n){var t=zr;return(cr=Object[t(273)]?Object[t(400)][t(355)]():function(n){var e=t;return n[e(427)]||Object[e(400)](n)})(n)}function sr(n){var t=function(){var n=zr;if(typeof Reflect===n(361)||!Reflect[n(302)])return!1;if(Reflect[n(302)][n(399)])return!1;if(typeof Proxy===n(334))return!0;try{return Boolean[n(419)][n(278)][n(308)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=zr,o=cr(n);if(t){var i=cr(this)[r(327)];e=Reflect[r(302)](o,arguments,i)}else e=o[r(421)](this,arguments);return function(n,t){var e=zr;if(t&&("object"==typeof t||typeof t===e(334)))return t;if(void 0!==t)throw new TypeError(e(259));return ir(n)}(this,e)}}Ke(void 0,(function(){for(var n=zr,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(411)]||{},r=[n(430),n(318),"info",n(325),"exception",n(398),n(338)],o=0;o<r.length;o++){var i=Ke.constructor.prototype[n(355)](Ke),a=r[o],c=e[a]||i;i.__proto__=Ke.bind(Ke),i[n(314)]=c[n(314)].bind(c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:Xe(323),normal:Xe(372),roughness:Xe(321),metalness:Xe(440),emissive:Xe(320),ao:Xe(303),bump:"csm_Bump",clearcoat:Xe(275),clearcoatRoughness:Xe(387),clearcoatNormal:Xe(425),pointSize:"csm_PointSize",fragColor:Xe(330),depthAlpha:Xe(277),position:Xe(418),positionRaw:"csm_PositionRaw"},dr=(Je(ur={},""[Xe(351)](pr[Xe(362)]),"*"),Je(ur,""[Xe(351)](pr.positionRaw),"*"),Je(ur,""[Xe(351)](pr.normal),"*"),Je(ur,"".concat(pr.pointSize),[Xe(343)]),Je(ur,""[Xe(351)](pr[Xe(356)]),"*"),Je(ur,"".concat(pr[Xe(386)]),"*"),Je(ur,""[Xe(351)](pr[Xe(442)]),["MeshStandardMaterial",Xe(368)]),Je(ur,""[Xe(351)](pr[Xe(348)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),Je(ur,""[Xe(351)](pr[Xe(340)]),[Xe(365),Xe(368)]),Je(ur,"".concat(pr.ao),[Xe(365),Xe(368),"MeshBasicMaterial",Xe(288),Xe(345),Xe(444)]),Je(ur,""[Xe(351)](pr[Xe(359)]),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial",Xe(345),Xe(368),Xe(365),"MeshToonMaterial",Xe(328)]),Je(ur,""[Xe(351)](pr[Xe(429)]),["MeshDepthMaterial"]),Je(ur,""[Xe(351)](pr.clearcoat),[Xe(368)]),Je(ur,""[Xe(351)](pr[Xe(300)]),[Xe(368)]),Je(ur,"".concat(pr[Xe(353)]),[Xe(368)]),ur),hr={"#include <lights_physical_fragment>":z[Xe(373)]},vr=(Je(lr={},""[Xe(351)](pr[Xe(360)]),{"#include <beginnormal_vertex>":Xe(401)[Xe(351)](pr[Xe(360)],Xe(435))}),Je(lr,"".concat(pr[Xe(362)]),{"#include <begin_vertex>":Xe(274).concat(pr[Xe(362)],Xe(376))}),Je(lr,""[Xe(351)](pr.positionRaw),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Xe(351)](pr[Xe(437)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Je(lr,""[Xe(351)](pr[Xe(383)]),{"gl_PointSize = size;":Xe(426)[Xe(351)](pr[Xe(383)],Xe(416))}),Je(lr,"".concat(pr[Xe(356)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Xe(351)](pr.diffuse,Xe(376))}),Je(lr,"".concat(pr[Xe(386)]),{"#include <dithering_fragment>":Xe(299)[Xe(351)](pr.fragColor,Xe(376))}),Je(lr,""[Xe(351)](pr[Xe(442)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Xe(351)](pr[Xe(442)],Xe(416))}),Je(lr,""[Xe(351)](pr[Xe(348)]),{"#include <roughnessmap_fragment>":Xe(448)[Xe(351)](pr[Xe(348)],Xe(416))}),Je(lr,""[Xe(351)](pr[Xe(340)]),{"#include <metalnessmap_fragment>":Xe(374)[Xe(351)](pr[Xe(340)],Xe(416))}),Je(lr,"".concat(pr.ao),{"#include <aomap_fragment>":Xe(433)[Xe(351)](pr.ao,Xe(416))}),Je(lr,""[Xe(351)](pr[Xe(359)]),{"#include <normal_fragment_maps>":Xe(270)[Xe(351)](pr[Xe(359)]," - (dot(")[Xe(351)](pr[Xe(359)],Xe(380))}),Je(lr,""[Xe(351)](pr[Xe(429)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(414)[Xe(351)](pr[Xe(429)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(332).concat(pr[Xe(429)],Xe(416))}),Je(lr,""[Xe(351)](pr[Xe(319)]),{"material.clearcoat = clearcoat;":Xe(269)[Xe(351)](pr[Xe(319)],";")}),Je(lr,""[Xe(351)](pr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(392)[Xe(351)](pr[Xe(300)],";")}),Je(lr,"".concat(pr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Xe(404)}),lr),mr=(Je(fr={},"".concat(pr[Xe(362)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(384).concat(pr.position,", 1.0 );\n  ")}),Je(fr,""[Xe(351)](pr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Xe(351)](pr[Xe(362)],";\n  ")}),Je(fr,""[Xe(351)](pr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(364)[Xe(351)](pr[Xe(356)],Xe(376))}),Je(fr,""[Xe(351)](pr[Xe(386)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(364)[Xe(351)](pr[Xe(386)],Xe(376))}),fr),gr={clearcoat:[pr[Xe(319)],pr[Xe(353)],pr[Xe(300)]]},_r=Xe(423),yr=Xe(422),xr=Xe(346),Ir=Xe(369),br=Xe(346),wr=Xe(403),Sr=["baseMaterial",Xe(436),Xe(335),Xe(447),"patchMap",Xe(415),Xe(358)],Mr=function(n,t,e){var r=Xe;return n[r(268)](t)[r(439)](e)},Rr=function(n,t){var e,r,o=Xe;return new RegExp("\\b"[o(351)]((e=t,r=Xe,e[r(354)](/[-\/\\^$*+?.()|[\]{}]/g,r(266))),"\\b"))[o(297)](n)};function Ar(){var n=["csm_ClearcoatNormal","\n    gl_PointSize = ","__proto__","create","depthAlpha","log","\n            ","Map","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ",'". Shader cannot compile.',";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","fragmentShader","positionRaw","Super expression must either be null or a function","join","csm_Metalness","chain","emissive","void ","MeshToonMaterial","48wiHnHD","@@iterator","uniforms","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","Derived constructors may only return object or undefined","is not a constructor"," is not available in ","get","stateObject","RawShaderMaterial","instanceID","\\$&","Arguments","split","material.clearcoat = ","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","next","9969183Vkzshd","setPrototypeOf","\n    vec3 transformed = ","csm_Clearcoat","143570VJwnuJ","csm_DepthAlpha","valueOf","key","iterator","getOwnPropertyDescriptors","filter","_generateMaterial","configurable","getOwnPropertyDescriptor","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","Object","MeshLambertMaterial","while (true) {}","baseMaterial","lastIndexOf","forEach","#define IS_UNKNOWN;\n","input","propertyIsEnumerable","#define IS_","test","onBeforeCompile","\n    #include <dithering_fragment>\n    gl_FragColor  = ","clearcoatRoughness","Set","construct","csm_AO","find","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","function *\\( *\\)","substring","call","cacheHash","assign","push","Material","done","toString","defineProperty","gger","update","warn","clearcoat","csm_Emissive","csm_Roughness","();\n              // #_CSM_#\n          ","csm_DiffuseColor","debu","error","keys","constructor","ShadowMaterial","type","csm_FragColor","Cannot call a class as a function","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","clone","function","vertexShader","patchMap","enumerable","trace","// #_CSM_#","metalness","return","void main()","PointsMaterial","length","MeshPhongMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","this hasn't been initialised - super() hasn't been called","roughness","2VSiZyX","string","concat","counter","clearcoatNormal","replace","bind","diffuse","customProgramCacheKey","silent","bump","normal","undefined","position","();\n            // #_CSM_#\n          ","\n    gl_FragColor = ","MeshStandardMaterial","value","_patchShader","MeshPhysicalMaterial","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","_getCacheHash","isArray","csm_Normal","lights_physical_fragment","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","884670VPYbRO",";\n  ","468261QNyWAB","generateUUID","defineProperties",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","init","slice","pointSize","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","includes","fragColor","csm_ClearcoatRoughness","action","trim","needsUpdate","from","material.clearcoatRoughness = ","\n            \n            void main() {\n          ","isAlreadyExtended","set","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","2263595omcYZU","table","sham","getPrototypeOf","\n    vec3 objectNormal = ","#define IS_VERTEX;\n","\n    \n","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","object","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","__csm","getOwnPropertySymbols","1306928FmrImV","253518oBpKmT","console","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ",'" is required to use output "',"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","cacheKey",";\n    ","entries","csm_Position","prototype","ShaderMaterial","apply","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","indexOf"];return(Ar=function(){return n})()}function Er(n){return n?n[Xe(354)](/\s/g,""):void 0}function Tr(n){return n[Xe(354)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Xe;!function(n,t){var e=zr;if(typeof t!==e(334)&&null!==t)throw new TypeError(e(438));n.prototype=Object[e(428)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(315)](n,"prototype",{writable:!1}),t&&ar(n,t)}(c,n);var e,r,o,i,a=sr(c);function c(n){var t,e,r,o,i,s=zr,u=n.baseMaterial,l=n.fragmentShader,f=n[s(335)],p=n[s(447)],d=n[s(336)],h=n[s(415)],v=n[s(358)],m=tr(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(zr(331))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e.message.indexOf(t(260))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(329)]===s(264))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Xe;e(344),Object[e(310)](n,t);var r=Object[e(400)](t);Object[e(417)](Object[e(281)](r))[e(282)]((function(n){var t=e,r=typeof n[1][t(262)]===t(334),o="function"==typeof n[1][t(395)],i=typeof n[1][t(366)]===t(334),a="constructor"===n[0];return(r||o||i)&&!a}))[e(292)]((function(t){var r=e;typeof n[t[0]]!==r(334)&&Object[r(315)](n,t[0],t[1])}))})(ir(t=a[s(308)](this)),e),t[s(407)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W[s(378)](),type:e[s(329)],isAlreadyExtended:(r=e[s(298)],o=Xe,i=r.toString()[o(389)](),!(0===i.substring(i[o(424)]("{")+1,i[o(291)]("}"))[o(389)]().length)),cacheHash:"",silent:v},t[s(447)]=nr(nr({},t.uniforms||{}),p||{});var g=t[s(407)],_=g[s(436)],y=g[s(335)],x=t[s(447)];return t[s(407)].cacheHash=t[s(370)](),t[s(283)](_,y,x),t}return e=c,r=[{key:t(317),value:function(){var n=t,e=arguments[n(344)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(447)]||this[n(447)],Object[n(310)](this[n(407)],e);var r=this.__csm,o=r[n(436)],i=r[n(335)],a=this[n(447)],c=this[n(370)]();this[n(407)][n(309)]=c,this[n(283)](o,i,a)}},{key:t(333),value:function(){var n=t,e={baseMaterial:this[n(407)][n(290)],fragmentShader:this[n(407)].fragmentShader,vertexShader:this.__csm[n(335)],uniforms:this[n(447)],silent:this[n(407)][n(358)],patchMap:this.__csm[n(336)],cacheKey:this.__csm[n(415)]},r=new(this[n(327)])(e);return Object[n(310)](this,r),r}},{key:t(370),value:function(){var n=t,e=this.__csm,r=e[n(436)],o=e[n(335)],i=this[n(447)],a=[Er(r),Er(o),i].filter((function(n){return void 0!==n}));return a[n(344)]>0?Rn(a,{excludeValues:!0}):this[n(357)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(447)]=r||{},this[o(357)]=function(){return i.__csm.cacheHash};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i._patchShader(Tr(n),t[r(436)],!0);t.fragmentShader=a+c}if(e){var s=i[r(367)](Tr(e),t[r(335)]);t[r(335)]=r(402)+s,t[r(335)]=a+t.vertexShader}t[r(447)]=nr(nr({},t.uniforms),i[r(447)]),i[r(447)]=t[r(447)]}catch(u){console[r(325)](u)}};if(this[o(407)][o(394)]){var c=this.onBeforeCompile;this[o(298)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(390)]=!0}},{key:t(367),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this._getPatchMapForMaterial()),this.__csm[o(336)]);Object.entries(gr)[o(292)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1][e(304)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'.concat(a,e(413))[e(351)](c,e(434)))})),Object[o(417)](hr)[o(292)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object[o(326)](c)[o(292)]((function(t){var e=o;Object[e(326)](c[t])[e(292)]((function(r){var o=e,s=dr[t],u=i.__csm[o(329)];if("*"===t||Rr(n,t)){if(!(!s||Array[o(371)](s)&&s.includes(u)||"*"===s))throw new Error("CSM: ".concat(t,o(261))[o(351)](u,". Shader cannot compile."));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(407)][o(265)][o(354)](/-/g,"_"),h=n[o(354)](/void\s+main\s*\(\s*\)/g,o(443)[o(351)](d,"()")),v=n[o(385)](o(342)),m=a.includes(o(339));return v&&(m&&this[o(407)][o(394)]?(a=a.replace("void main() {",o(431)[o(351)](h,o(393))),s=a,u=o(339),l=o(431)[o(351)](d,o(363)),f=Xe,p=s.lastIndexOf(u),a=-1===p?s:s.substring(0,p)+l+s[f(307)](p+u[f(344)])):a=a[o(354)]("void main() {",o(396).concat(r?br:xr,o(286))[o(351)](_r,"\n    \n            ")[o(351)](h,o(406))[o(351)](yr,o(412))[o(351)](r?wr:Ir,o(305))[o(351)](d,o(322)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(407)][n(329)];return e?n(296)[n(351)](e.toUpperCase(),";\n"):n(293)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this.__csm[n(329)]===n(420)?mr:vr}}],i=zr,r&&or(e[i(419)],r),o&&or(e,o),Object[i(315)](e,i(419),{writable:!1}),c}(D[Xe(312)]);function zr(n,t){var e=Ar();return(zr=function(n,t){return e[n-=257]})(n,t)}function Pr(n){function t(n){var e=zr;if("string"==typeof n)return function(n){}[e(327)](e(289)).apply(e(352));1!==(""+n/n)[e(344)]||n%20==0?function(){return!0}.constructor(e(324)+e(316))[e(308)](e(388)):function(){return!1}[e(327)](e(324)+e(316))[e(421)](e(263)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=Cr;function Cr(n,t){const e=jr();return(Cr=function(n,t){return e[n-=347]})(n,t)}!function(n,t){const e=Cr,r=jr();for(;;)try{if(981068===-parseInt(e(356))/1+-parseInt(e(367))/2*(-parseInt(e(354))/3)+-parseInt(e(389))/4+parseInt(e(369))/5*(-parseInt(e(373))/6)+-parseInt(e(348))/7*(-parseInt(e(370))/8)+parseInt(e(347))/9*(parseInt(e(350))/10)+parseInt(e(353))/11*(-parseInt(e(372))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=Cr,t=new RegExp(n(385)),e=new RegExp(n(360),"i"),r=Nr(n(359));t[n(390)](r+n(361))&&e[n(390)](r+n(368))?Nr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(){const n=["10358698dMvHOv","setStyle","20QWAlkC","table",'{}.constructor("return this")( )',"6536486JSBjHd","1731ibZrLj","clearcoatRoughness","40697CKcmHM","stateObject","primitive","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","object","color","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","length","string","6494rSFvpj","input","5BxJJuC","8gweYao","apply","36oqfifk","5746452vVUXdL","return (function() ","warn","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","toString","clearcoat","prototype","while (true) {}","counter","MeshPhysicalMaterial","__proto__","constructor","function *\\( *\\)","gger","call","console","3430616OhxFpk","test","info","bind","error","roughness","metalness","5699277PBeyjx"];return(jr=function(){return n})()}kr(void 0,(function(){const n=Cr;let t;try{t=Function(n(374)+n(352)+");")()}catch(o){t=window}const e=t[n(388)]=t[n(388)]||{},r=["log",n(375),n(391),n(393),"exception",n(351),"trace"];for(let i=0;i<r[n(365)];i++){const t=kr[n(384)][n(379)][n(392)](kr),o=r[i],a=e[o]||t;t[n(383)]=kr[n(392)](kr),t[n(377)]=a[n(377)][n(392)](a),e[o]=t}}))();const Br=[Or(362)],Ur=tn({__name:"index",props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:D[t(382)],metalness:e.metalness,roughness:e[t(394)],clearcoat:e[t(378)],clearcoatRoughness:e[t(355)],color:e.color,vertexShader:t(364),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(376)},o=new Dr(r);return fn((()=>{const n=t;o[n(363)][n(349)](e[n(363)]),o[n(395)]=e.metalness,o.roughness=e.roughness,o[n(378)]=e[n(378)],o[n(355)]=e[n(355)]})),(n,e)=>{const r=t;return an(),cn(r(358),{object:nn(o)},null,8,Br)}}});function Nr(n){function t(n){const e=Cr;if(typeof n===e(366))return function(n){}[e(384)](e(380))[e(371)](e(381));1!==(""+n/n)[e(365)]||n%20==0?function(){return!0}[e(384)]("debugger")[e(387)]("action"):function(){return!1}[e(384)]("debu"+e(386)).apply(e(357)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Gr();;)try{if(546906===parseInt(e(145))/1*(-parseInt(e(147))/2)+parseInt(e(151))/3*(-parseInt(e(131))/4)+parseInt(e(129))/5*(-parseInt(e(140))/6)+-parseInt(e(157))/7+parseInt(e(149))/8+-parseInt(e(156))/9*(-parseInt(e(141))/10)+parseInt(e(134))/11*(parseInt(e(128))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(126)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Zr,t=new RegExp(n(143)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wr(n(152));t[n(138)](r+"chain")&&e[n(138)](r+n(130))?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(126)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Gr();return(Zr=function(n,t){return e[n-=126]})(n,t)}function Gr(){var n=["55kOsLhO","exception","info","length","test","while (true) {}","516654lJobLD","6888710ajaUzE","action","function *\\( *\\)","error","158201ZSwujJ","debu","10Nxsgtn","bind","7346536XFsjoh","table","3zZtXCC","init","counter","console","stateObject","9rIgbFT","6213844cvFuXT","toString","apply","gger","4274988OKRDem","35pKBIAR","input","2240268vMNony","constructor","warn"];return(Gr=function(){return n})()}function Wr(n){function t(n){var e=Zr;if("string"==typeof n)return function(n){}.constructor(e(139)).apply(e(153));1!==(""+n/n)[e(137)]||n%20==0?function(){return!0}[e(132)](e(146)+e(127)).call(e(142)):function(){return!1}[e(132)](e(146)+e(127))[e(126)](e(155)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){for(var n=Zr,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(154)]=t[n(154)]||{},r=["log",n(133),n(136),n(144),n(135),n(150),"trace"],o=0;o<r[n(137)];o++){var i=Hr[n(132)].prototype[n(148)](Hr),a=r[o],c=e[a]||i;i.__proto__=Hr.bind(Hr),i[n(158)]=c[n(158)][n(148)](c),e[a]=i}}))();export{Ve as C,Ur as _,Yn as a,ut as b,wt as c,Dt as d,Ut as e,Jt as f,Ne as g,Ee as h,vt as u};

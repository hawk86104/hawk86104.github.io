import{importShared as e,Ai as t}from"./3d-tiles-renderer.6uaxtGOi1769565599278.js";import{useTres as n,useLoop as o,OrbitControls_default as r}from"./index.CG-C7MIu1769565599278.js";import{Br as a,Or as i}from"./WMTSCapabilitiesLoader-DkTEM3c8.tMziZGkp1769565599278.js";import{DRACOLoader as s}from"./DRACOLoader.C27Mn6zh1769565599278.js";const{defineComponent:l}=await e("vue"),{unref:u,createElementVNode:c,openBlock:d,createElementBlock:m}=await e("vue"),p=["object"],{watchEffect:w}=await e("vue"),f=await e("three"),v=l({__name:"cesiumIon3DTile",setup(e){const{camera:r,renderer:l,sizes:v}=n();const g=new t;g.registerPlugin(new a({apiToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhM2RlZDE0YS03NWNlLTQ2ZmItODFmZi0zMDQyZGMxZjdjNzQiLCJpZCI6NDYzMzQsImlhdCI6MTYxNjA1MjY2Nn0.3BRsxy7UmJgW0LemXo6cMsD7xwe7YvUDITeQ3RLxOHI",assetId:"354759"})),g.addEventListener("load-tile-set",()=>{const e=new f.Sphere;g.getBoundingSphere(e);const t=e.center.clone(),n=t.length(),o=function(e,t){const n=new f.Quaternion,o=(new f.Vector3).crossVectors(e,t);return n.x=o.x,n.y=o.y,n.z=o.z,n.w=1+e.clone().dot(t),n.normalize(),n}(t.normalize(),new f.Vector3(0,1,0));g.group.quaternion.x=o.x,g.group.quaternion.y=o.y,g.group.quaternion.z=o.z,g.group.quaternion.w=o.w,g.group.position.y=-n}),g.fetchOptions.mode="cors",g.registerPlugin(new i({dracoLoader:(new s).setDecoderPath("./draco/")})),w(()=>{v.width.value&&(g.setCamera(r.value),g.setResolutionFromRenderer(r.value,l))});const{onBeforeRender:x}=o();return x(()=>{r.value&&v.width.value&&g&&(r.value.updateMatrixWorld(),g.update())}),(e,t)=>(d(),m("TresGroup",null,[c("primitive",{object:u(g).group},null,8,p)]))}}),{defineComponent:g}=await e("vue"),{createElementVNode:x,unref:C,createVNode:h,resolveComponent:I,withCtx:z,Fragment:D,openBlock:T,createElementBlock:j}=await e("vue"),y=g({__name:"cesiumIon",setup:e=>(e,t)=>{const n=I("TresCanvas");return T(),j(D,null,[h(n,{clearColor:"#201919","window-size":"",antialias:""},{default:z(()=>[t[0]||(t[0]=x("TresPerspectiveCamera",{position:[1e3,1e3,-100],fov:60,near:1,far:1e4},null,-1)),h(C(r),{enableDamping:""}),h(v),t[1]||(t[1]=x("TresAxesHelper",{args:[100]},null,-1))]),_:1}),t[2]||(t[2]=x("h1",{class:"text-center text-white w-full absolute"},"若没加载成功，请更换自己的Cesium-Key",-1))],64)}});export{y as default};

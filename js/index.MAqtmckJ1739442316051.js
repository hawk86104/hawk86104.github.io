var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,c9 as w,ca as M,K as R,h as E,b as A,e as T,_ as z,l as D,a_ as P,V as O,bp as C,z as F,aj as B,B as j,c as k,aK as U,g as N,M as L,ar as H,a9 as Z,U as G,bN as V,a as W,a6 as $}from"./three.OosFxi571739442316051.js";import{m as Y,l as q,e as K}from"./@tresjs.4XV_x0mI1739442316051.js";import{R as X}from"./three-stdlib.5JCQavfA1739442316051.js";import{y as J,b as Q,w as nn,a as tn,u as en,d as rn,W as on,a3 as an,a0 as cn,o as sn,H as un,J as ln,M as fn,a7 as pn,a2 as dn,q as hn,f as vn,N as mn,a8 as gn,r as _n,B as yn,v as xn,s as In,F as bn,a6 as Sn,m as wn}from"./@vue.NRI7TcgI1739442316051.js";import{M as Mn,a as Rn,C as En}from"./@pmndrs.uSiemGA_1739442316051.js";import{h as An}from"./object-hash.cS-r0IEj1739442316051.js";var Tn=Dn;function zn(){var n=["geometry","__proto__","traverse","table","test","remove","counter","134968mxLgaW","25855rtavoN","log","88193pgXEKm","366924IhJfuy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","input","virtualScene","1008990szJVhH","bind","return (function() ","112HvBKxI","chain","length","string","698740ySdQix",'{}.constructor("return this")( )',"gger","destructor","423882VRcvoe","apply","trace","dispose","constructor","debu","114fdwguY","action","add","material","map","info","function *\\( *\\)","error","toString","warn","110ucjcxk"];return(zn=function(){return n})()}function Dn(n,t){var e=zn();return(Dn=function(n,t){return e[n-=289]})(n,t)}!function(n,t){for(var e=Dn,r=zn();;)try{if(236846===parseInt(e(327))/1+-parseInt(e(295))/2+parseInt(e(332))/3+parseInt(e(291))/4*(parseInt(e(324))/5)+parseInt(e(305))/6*(parseInt(e(326))/7)+parseInt(e(323))/8+-parseInt(e(299))/9*(parseInt(e(315))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(300)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pn(this,(function(){var n=Dn,t=new RegExp(n(311)),e=new RegExp(n(328),"i"),r=Bn("init");t.test(r+n(292))&&e[n(320)](r+n(330))?Bn():r("0")}))()}();var On=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();On(void 0,(function(){var n,t=Dn;try{n=Function(t(290)+t(296)+");")()}catch(s){n=window}for(var e=n.console=n.console||{},r=[t(325),t(314),t(310),t(312),"exception",t(319),t(301)],o=0;o<r[t(293)];o++){var i=On[t(303)][t(329)][t(289)](On),a=r[o],c=e[a]||i;i[t(317)]=On.bind(On),i[t(313)]=c[t(313)].bind(c),e[a]=i}}))();class Cn extends s{constructor(){var n=Dn;super(),this.virtualScene=null,this[n(331)]=new u}add(...n){var t=Dn;return this.virtualScene[t(307)](...n),this}[Tn(298)](){var n=Tn;this[n(331)][n(318)]((t=>{var e=n;t instanceof l&&(t[e(316)][e(302)](),t[e(308)].dispose(),t[e(308)][e(309)]&&t.material[e(309)][e(302)](),this[e(331)][e(321)](t))})),this[n(331)]=null}}const Fn=Cn;function Bn(n){function t(n){var e=Dn;if(typeof n===e(294))return function(n){}[e(303)]("while (true) {}")[e(300)](e(322));1!==(""+n/n)[e(293)]||n%20==0?function(){return!0}[e(303)](e(304)+e(297)).call(e(306)):function(){return!1}[e(303)](e(304)+e(297))[e(300)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function jn(){const n=["294960dCxxWS","indoor/small_hangar_01_1k.hdr","40417huDLye","gger","studio/poly_haven_studio_1k.hdr","return (function() ","kiara/kiara_1_dawn_1k.hdr","city/modern_buildings_2_1k.hdr","5558aNNOLJ","call","length","city/shanghai_bund_1k.hdr","input","function *\\( *\\)","55HqblhT","bind","stateObject","venice/venice_sunset_1k.hdr","prototype","18254MmLKXq","error","1371987EvkghY","outdoor/snowy_forest_path_01_1k.hdr","exception","info","counter","10fzoxdp","log","70NdlkjL","4KctRrP","12502ZzLrDM","chain","500580PXjsfF","string","toString","outdoor/satara_night_1k.hdr","debu","city/canary_wharf_1k.hdr",'{}.constructor("return this")( )',"1463082taInGJ","124FagEpG","apply","init","action","console","while (true) {}","4360JZWFKa","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","outdoor/outdoor_umbrellas_1k.hdr","test"];return(jn=function(){return n})()}const kn=Hn;!function(n,t){const e=Hn,r=jn();for(;;)try{if(806876===-parseInt(e(461))/1*(parseInt(e(492))/2)+parseInt(e(460))/3*(parseInt(e(502))/4)+parseInt(e(501))/5*(-parseInt(e(453))/6)+-parseInt(e(481))/7*(parseInt(e(467))/8)+-parseInt(e(494))/9*(-parseInt(e(499))/10)+-parseInt(e(487))/11*(-parseInt(e(473))/12)+parseInt(e(475))/13*(parseInt(e(503))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hn(462)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=Hn,t=new RegExp(n(486)),e=new RegExp(n(469),"i"),r=Zn(n(463));t[n(472)](r+n(452))&&e[n(472)](r+n(485))?Zn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hn(462)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nn(void 0,(function(){const n=Hn;let t;try{t=Function(n(478)+n(459)+");")()}catch(o){t=window}const e=t[n(465)]=t[n(465)]||{},r=[n(500),"warn",n(497),n(493),n(496),n(468),"trace"];for(let i=0;i<r[n(483)];i++){const t=Nn[n(470)][n(491)][n(488)](Nn),o=r[i],a=e[o]||t;t.__proto__=Nn.bind(Nn),t[n(455)]=a.toString[n(488)](a),e[o]=t}}))();const Ln={sunset:kn(490),studio:kn(477),city:kn(458),umbrellas:kn(471),night:kn(456),forest:"outood/mossy_forest_1k.hdr",snow:kn(495),dawn:kn(479),hangar:kn(474),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:kn(480),shangai:kn(484)};function Hn(n,t){const e=jn();return(Hn=function(n,t){return e[n-=452]})(n,t)}function Zn(n){function t(n){const e=Hn;if(typeof n===e(454))return function(n){}.constructor(e(466)).apply(e(498));1!==(""+n/n)[e(483)]||n%20==0?function(){return!0}[e(470)](e(457)+e(476))[e(482)](e(464)):function(){return!1}[e(470)]("debugger")[e(462)](e(489)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=Yn;!function(n,t){const e=Yn,r=Wn();for(;;)try{if(270372===-parseInt(e(355))/1*(parseInt(e(372))/2)+parseInt(e(378))/3*(parseInt(e(375))/4)+parseInt(e(366))/5+-parseInt(e(361))/6+parseInt(e(340))/7*(parseInt(e(353))/8)+-parseInt(e(334))/9*(parseInt(e(371))/10)+-parseInt(e(337))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["gger","2301144jpwGgM","Failed to load environment map: ","109ohFgof","texture","backgroundBlurriness","function *\\( *\\)","constructor","length","278424jAFiWE","warn","counter","table","apply","1240355Pncdui","init","isColor","while (true) {}","test","114740qBKGBc","82YaBDpK","toString","call","18980Mgbibe","isArray","background","18dKvRaI","console","63Bnxhut","log","action","1788831CQPVfX","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","input","7BAPOpQ","mapping","environment","info","debu","return (function() ","join",'{}.constructor("return this")( )',"bind","prototype","trace","value"];return(Wn=function(){return n})()}!function(){Vn(this,(function(){const n=Yn,t=new RegExp(n(358)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Kn(n(367));t[n(370)](r+"chain")&&e[n(370)](r+n(339))?Kn():r("0")}))()}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Wn();return(Yn=function(n,t){return e[n-=333]})(n,t)}$n(void 0,(function(){const n=Yn;let t;try{t=Function(n(345)+n(347)+");")()}catch(o){t=window}const e=t.console=t[n(333)]||{},r=[n(335),n(362),n(343),"error","exception",n(364),n(350)];for(let i=0;i<r[n(360)];i++){const t=$n[n(359)][n(349)][n(348)]($n),o=r[i],a=e[o]||t;t.__proto__=$n[n(348)]($n),t[n(373)]=a[n(373)][n(348)](a),e[o]=t}}))();const qn=Gn(338);function Kn(n){function t(n){const e=Yn;if("string"==typeof n)return function(n){}[e(359)](e(369))[e(365)](e(363));1!==(""+n/n).length||n%20==0?function(){return!0}[e(359)]("debu"+e(352))[e(374)](e(336)):function(){return!1}[e(359)](e(344)+e(352)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xn(){const n=["log","8754fHpjJS","destructor","info","type","5117jtlkcF","generateMipmaps","frames","update","far","apply","trace","4nUkUWX","9JnNIBn","input","default","value","2062785ctTZGj","envSence","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8230192MOpUpR","near","useDefaultScene","TresEnvSence","counter","1793etoFwT","prototype","warn","symbol","chain","exception","1236072dkHYSQ","minFilter","toString","resolution","constructor","156670ewlLXh","background","$slots","__proto__","environment","test","bind","1913061wVADNK","while (true) {}","stateObject","init","table","length","texture","dispose","console","2346918hrJFDt"];return(Xn=function(){return n})()}!function(n,t){const e=nt,r=Xn();for(;;)try{if(620935===-parseInt(e(523))/1+parseInt(e(491))/2+parseInt(e(482))/3+-parseInt(e(504))/4*(parseInt(e(509))/5)+-parseInt(e(493))/6*(parseInt(e(497))/7)+-parseInt(e(512))/8*(parseInt(e(505))/9)+parseInt(e(475))/10*(parseInt(e(517))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(502)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jn(this,(function(){const n=nt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(511),"i"),r=et(n(485));t[n(480)](r+n(521))&&e[n(480)](r+n(506))?et():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(502)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nt(n,t){const e=Xn();return(nt=function(n,t){return e[n-=475]})(n,t)}Qn(void 0,(function(){const n=nt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(490)]=t[n(490)]||{},r=[n(492),n(519),n(495),"error",n(522),n(486),n(503)];for(let o=0;o<r.length;o++){const t=Qn[n(527)][n(518)][n(481)](Qn),i=r[o],a=e[i]||t;t[n(478)]=Qn[n(481)](Qn),t[n(525)]=a.toString[n(481)](a),e[i]=t}}))();const tt=rn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=nt;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=Y();let l=null,y=Q(null),x=null;const I=Q(null);on((()=>{var n,t;const e=nt;null==(n=I.value)||n[e(494)](),null==(t=y.value)||t[e(489)]()}));const{onBeforeLoop:b}=K();let S=1;b((()=>{const n=nt;x&&I[n(508)]&&y[n(508)]&&(i[n(499)]===1/0||S<i.frames)&&(i.useDefaultScene?x[n(500)](s[n(508)],u.value):x[n(500)](s[n(508)],pn(I.value.virtualScene)),S++)}));const w=([r,o]=an((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=Y(),{preset:i,blur:a,files:c=Q([]),path:s=Q(""),background:u}=J(n);nn(n,(()=>{o()}));const l=Q(null),h=tn((()=>Array[e(376)](c[e(351)]))),v=tn((()=>h[e(351)]?f:X));return nn([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i.value)){try{l[r(351)]=await q(v[r(351)],h.value?[...en(n)]:en(n),(n=>{t&&n.setPath(en(t))}))}catch(o){throw new Error(r(354)+o)}l.value&&(l[r(351)][r(341)]=h[r(351)]?p:d)}}),{immediate:!0}),nn(l,(n=>{const t=e;r.value&&n&&(r[t(351)][t(342)]=n)}),{immediate:!0}),nn([u,l],(([n,o])=>{const i=e;if(r[i(351)]){let e=(null==t?void 0:t[i(351)])?t.value[i(356)]:o,a=r[i(351)].background;!(null==a?void 0:a[i(368)])&&(a=void 0),r.value[i(377)]=n?e:a}}),{immediate:!0}),nn((()=>null==a?void 0:a[e(351)]),(n=>{const t=e;r[t(351)]&&n&&(r[t(351)][t(357)]=n)}),{immediate:!0}),nn((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Ln){const e=qn,i=Ln[n];try{l[t(351)]=await q(X,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l[t(351)]&&l[t(351)]&&(l[t(351)][t(341)]=d),o()}else if(n&&!(n in Ln))throw new Error("Preset must be one of: "+Object.keys(Ln)[t(346)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=nt;n?(u[t(508)][t(479)]=n.texture,i.background&&(u[t(508)][t(476)]=n[t(488)])):(u[t(508)].environment=w.value,i.background&&(u[t(508)][t(476)]=w[t(508)]))};nn(w,(n=>{const t=nt;y.value&&M(y[t(508)])}),{immediate:!0,deep:!0}),c({EnvSence:Fn});const R=()=>{var n;const t=nt;null==(n=y[t(508)])||n[t(489)](),y[t(508)]=new v(i[t(526)]),x=new m(i[t(513)],i[t(501)],y[t(508)]),i[t(514)]?(y[t(508)].texture[t(496)]=g,y[t(508)].texture[t(498)]=!1,y[t(508)][t(488)][t(524)]=_,y[t(508)][t(488)].magFilter=_):y[t(508)].texture.type=h,M(y[t(508)])};return nn((()=>cn()[e(507)]),(n=>{var t,r;const o=e;n&&(!y[o(508)]||y.value.texture[o(496)]!==h)&&(l=n(),Array.isArray(l)&&l[o(487)]>0&&typeof(null==(t=l[0])?void 0:t[o(496)])!==o(520))?R():(null==(r=y[o(508)])||r[o(489)](),y[o(508)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(508)]=w,nn((()=>i.useDefaultScene),(n=>{y[e(508)]&&R()})),(n,t)=>{const r=e;return en(y)?(sn(),un(r(515),{key:0,ref_key:r(510),ref:I},[ln(n[r(477)],r(507))],512)):fn("",!0)}}});function et(n){function t(n){const e=nt;if("string"==typeof n)return function(n){}[e(527)](e(483))[e(502)](e(516));1!==(""+n/n).length||n%20==0?function(){return!0}[e(527)]("debugger").call("action"):function(){return!1}[e(527)]("debugger")[e(502)](e(484)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=ot;function ot(n,t){const e=it();return(ot=function(n,t){return e[n-=200]})(n,t)}function it(){const n=["info","multiplyScalar","TresMeshBasicMaterial","log","9688WAxzfd","655250ABPbTx","function *\\( *\\)","from","action","material","488742qLOUGT","TresMesh","gger","debu","error","apply","trace","string","warn",'{}.constructor("return this")( )',"exception","bind","side","prototype","map","628770zRRYww","stateObject","value","1185636XjigrN","chain","4193BJvNuY","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","console","15sLUtJU","needsUpdate","return (function() ","__proto__","length","toString","intensity","6412041zfRtNZ","ring","color","TresRingGeometry","TresPlaneGeometry","toneMapped","constructor","while (true) {}","rect","index","15320450UXvNfU","3tbWTvJ","set","input"];return(it=function(){return n})()}!function(n,t){const e=ot,r=it();for(;;)try{if(383034===parseInt(e(219))/1+-parseInt(e(224))/2*(-parseInt(e(211))/3)+-parseInt(e(242))/4+-parseInt(e(249))/5*(parseInt(e(239))/6)+parseInt(e(244))/7*(-parseInt(e(218))/8)+-parseInt(e(200))/9+parseInt(e(210))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){at(this,(function(){const n=ot,t=new RegExp(n(220)),e=new RegExp(n(246),"i"),r=dt(n(245));t[n(247)](r+n(243))&&e[n(247)](r+n(213))?dt():r("0")}))()}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ct(void 0,(function(){const n=ot;let t;try{t=Function(n(251)+n(233)+");")()}catch(o){t=window}const e=t[n(248)]=t[n(248)]||{},r=[n(217),n(232),n(214),n(228),n(234),"table",n(230)];for(let i=0;i<r[n(253)];i++){const t=ct[n(206)][n(237)].bind(ct),o=r[i],a=e[o]||t;t[n(252)]=ct[n(235)](ct),t.toString=a[n(254)][n(235)](a),e[o]=t}}))();const st={key:0,args:[0,1,64]},ut={key:1,args:[.5,1,64]},lt={key:2},ft=[rt(205),rt(238),rt(236),rt(202)],pt=rn({__name:rt(209),props:{args:{default:null},from:{default:rt(208)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=rt,e=n,r=Q();return dn((()=>{const n=ot;r[n(241)]&&(r[n(241)][n(202)][n(215)](e[n(255)]),r.value[n(250)]=!0)})),nn((()=>e[t(202)]),(n=>{const o=t;r[o(241)]&&(r[o(241)].color[o(212)](n),r.value[o(202)].multiplyScalar(e.intensity),r[o(241)][o(250)]=!0)})),hn((()=>{})),(n,o)=>{const i=t;return sn(),un(i(225),null,["circle"===e[i(221)]?(sn(),un(i(203),st)):e[i(221)]===i(201)?(sn(),un("TresRingGeometry",ut)):e[i(221)]===i(208)?(sn(),un(i(204),lt)):(sn(),vn(e[i(221)],{key:3,args:e})),mn(i(216),{ref_key:i(223),ref:r,toneMapped:n[i(205)],map:n.map,side:en(x),color:n[i(202)]},null,8,ft)])}}});function dt(n){function t(n){const e=ot;if(typeof n===e(231))return function(n){}[e(206)](e(207))[e(229)]("counter");1!==(""+n/n)[e(253)]||n%20==0?function(){return!0}.constructor(e(227)+e(226)).call(e(222)):function(){return!1}[e(206)](e(227)+e(226))[e(229)](e(240)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=_t,r=mt();for(;;)try{if(882449===parseInt(e(536))/1*(parseInt(e(534))/2)+parseInt(e(511))/3*(-parseInt(e(520))/4)+-parseInt(e(529))/5*(parseInt(e(525))/6)+parseInt(e(514))/7+-parseInt(e(512))/8*(parseInt(e(539))/9)+parseInt(e(521))/10+-parseInt(e(519))/11*(-parseInt(e(537))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(509)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=_t,t=new RegExp(n(533)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=yt(n(535));t[n(500)](r+"chain")&&e[n(500)](r+"input")?yt():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(509)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(){const n=["29262TutBhy","height","error","type","935QoaKEv",'{}.constructor("return this")( )',"depthTexture","format","function *\\( *\\)","2uTxDoi","init","233136QBvsbN","4068552gqpJaq","bind","630nDdSnZ","toString","trace","exception","clear","stateObject","length","test","setRenderTarget","console","while (true) {}","width","warn","debu","call","render","apply","prototype","1028082deBhvr","83528TKjNXn","dispose","2159598izSuRo","__proto__","value","constructor","table","99pUPzvX","16txTEir","3030300aQQwxv","string","counter","gger"];return(mt=function(){return n})()}function gt(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?J(n):J(_n(n)),{onLoop:s}=K(),{camera:u,renderer:l,scene:f,sizes:p}=Y();return dn((()=>{var n;const a=_t;null==(n=t[a(516)])||n[a(513)](),t.value=new I((null==r?void 0:r[a(516)])||p[a(504)].value,(null==e?void 0:e[a(516)])||p.height[a(516)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(516)])),(null==i?void 0:i.value)&&(t.value[a(531)]=new S((null==r?void 0:r.value)||p.width[a(516)],(null==e?void 0:e[a(516)])||p[a(526)][a(516)]),t.value[a(531)][a(532)]=w,t[a(516)][a(531)][a(528)]=M)})),s((()=>{const n=_t;(null==a?void 0:a.value)&&(l[n(516)].setRenderTarget(pn(t[n(516)])),l[n(516)][n(497)](),l.value[n(508)](pn(f[n(516)]),pn(u[n(516)])),l[n(516)][n(501)](null))})),yn((()=>{var n;const e=_t;null==(n=t[e(516)])||n[e(513)]()})),t}function _t(n,t){const e=mt();return(_t=function(n,t){return e[n-=495]})(n,t)}function yt(n){function t(n){const e=_t;if(typeof n===e(522))return function(n){}.constructor(e(503))[e(509)](e(523));1!==(""+n/n)[e(499)]||n%20==0?function(){return!0}[e(517)](e(506)+e(524))[e(507)]("action"):function(){return!1}.constructor(e(506)+e(524))[e(509)](e(498)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=_t;let t;try{t=Function("return (function() "+n(530)+");")()}catch(o){t=window}const e=t.console=t[n(502)]||{},r=["log",n(505),"info",n(527),n(496),n(518),n(495)];for(let i=0;i<r[n(499)];i++){const t=vt[n(517)][n(510)][n(538)](vt),o=r[i],a=e[o]||t;t[n(515)]=vt[n(538)](vt),t[n(540)]=a[n(540)][n(538)](a),e[o]=t}}))();const xt=bt;!function(n,t){const e=bt,r=wt();for(;;)try{if(152710===parseInt(e(418))/1+parseInt(e(420))/2*(-parseInt(e(449))/3)+-parseInt(e(469))/4+-parseInt(e(454))/5*(-parseInt(e(436))/6)+-parseInt(e(441))/7+parseInt(e(452))/8*(-parseInt(e(453))/9)+parseInt(e(421))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function bt(n,t){const e=wt();return(bt=function(n,t){return e[n-=418]})(n,t)}!function(){It(this,(function(){const n=bt,t=new RegExp(n(433)),e=new RegExp(n(458),"i"),r=Et(n(446));t[n(432)](r+"chain")&&e[n(432)](r+n(437))?Et():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function wt(){const n=["render","test","function *\\( *\\)","prototype","counter","6HScVOJ","input","error","side","constructor","761509xtvdRn","TresMeshTransmissionMaterial","exception","length","index","init","fboResolution","setRenderTarget","280332PbBYJS","material","action","640ulFqFM","23535uoOIWw","579115bRQhev","time","background","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","backside","debu","__proto__","log","toneMapping","buffer","apply","string","stateObject","isMesh","1059392WTlnaP","bind","gger","texture","169682IxIBoI","table","6zHwZVm","7303720RjVIhf","info","uuid","return (function() ","value","MeshTransmissionMaterialClass","toString","backsideThickness","envMapIntensity",'{}.constructor("return this")( )'];return(wt=function(){return n})()}St(void 0,(function(){const n=bt;let t;try{t=Function(n(424)+n(430)+");")()}catch(o){t=window}const e=t[n(457)]=t[n(457)]||{},r=[n(462),"warn",n(422),n(438),n(443),n(419),"trace"];for(let i=0;i<r[n(444)];i++){const t=St.constructor[n(434)].bind(St),o=r[i],a=e[o]||t;t[n(461)]=St[n(470)](St),t.toString=a[n(427)][n(470)](a),e[o]=t}}))();const Mt=["buffer",xt(439)],Rt=rn({__name:xt(445),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=Y(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new Rn,{onBeforeLoop:f}=K(),p=gt({width:u[e(447)],height:u[e(447)],isLoop:!1}),d=gt({width:u[e(447)],height:u[e(447)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await In(),s[n(425)]=function(n,t){let e;return n.traverse((n=>{const r=bt;n[r(468)]&&n[r(450)]&&n.material[r(423)]===t&&(e=n)})),e}(i[n(425)],r[n(425)][n(423)])})),f((({elapsed:n})=>{const t=e;r.value[t(455)]=n,r.value.buffer===d.value.texture&&s[t(425)]&&(m=a[t(425)][t(463)],h=i[t(425)][t(456)],v=r[t(425)][t(429)],g=s[t(425)].material[t(439)],s.value[t(450)]=l,u[t(459)]&&(a[t(425)][t(448)](p[t(425)]),a.value[t(431)](i.value,c.value),s[t(425)].material=r[t(425)],s.value[t(450)].thickness=u[t(428)],s[t(425)][t(450)][t(464)]=p[t(425)][t(472)],s[t(425)][t(450)][t(439)]=R,s[t(425)][t(450)].envMapIntensity=0),a.value[t(448)](d[t(425)]),a[t(425)][t(431)](i[t(425)],c.value),s[t(425)][t(450)][t(464)]=d[t(425)][t(472)],s[t(425)][t(450)]=r.value,s[t(425)][t(450)].thickness=u.thickness,s[t(425)][t(450)][t(439)]=g,s[t(425)].material.envMapIntensity=v,i[t(425)][t(456)]=h,a[t(425)][t(448)](null),a[t(425)][t(463)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(442),{ref_key:o(426),ref:r,buffer:en(d)[o(472)],side:en(x)},null,8,Mt)}}});function Et(n){function t(n){const e=bt;if(typeof n===e(466))return function(n){}[e(440)]("while (true) {}").apply(e(435));1!==(""+n/n).length||n%20==0?function(){return!0}[e(440)]("debu"+e(471)).call(e(451)):function(){return!1}[e(440)](e(460)+e(471))[e(465)](e(467)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const At=Dt;!function(n,t){const e=Dt,r=Pt();for(;;)try{if(694992===parseInt(e(189))/1*(parseInt(e(199))/2)+-parseInt(e(169))/3+parseInt(e(184))/4+parseInt(e(209))/5*(-parseInt(e(180))/6)+-parseInt(e(208))/7+-parseInt(e(196))/8+parseInt(e(157))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(186)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tt(this,(function(){const n=Dt,t=new RegExp(n(156)),e=new RegExp(n(200),"i"),r=Ct(n(193));t.test(r+"chain")&&e.test(r+n(187))?Ct():r("0")}))()}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(n,t){const e=Pt();return(Dt=function(n,t){return e[n-=154]})(n,t)}function Pt(){const n=["outer","constructor","663072HognLB","disableZ","table","trace","1085356kxunCd","left","apply","input","front","615158QkxnQm","min","precise",'{}.constructor("return this")( )',"init","bind","prototype","2854984rAApTb","position","toString","4knKGQn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gref","back","TresGroup","__proto__","return (function() ","info","max","9434992eAcNnX","35MjxHqU","index","bottom","function *\\( *\\)","23897394tqRDjt","log","call","set","default","while (true) {}","value","console","setFromObject","error","warn","length","2950848wwtbFj","right","matrixWorld","disableY","disable","$slots","debu","string","identity"];return(Pt=function(){return n})()}zt(void 0,(function(){const n=Dt;let t;try{t=Function(n(205)+n(192)+");")()}catch(o){t=window}const e=t[n(164)]=t.console||{},r=[n(158),n(167),n(206),n(166),"exception",n(182),n(183)];for(let i=0;i<r[n(168)];i++){const t=zt.constructor[n(195)].bind(zt),o=r[i],a=e[o]||t;t[n(204)]=zt[n(194)](zt),t.toString=a[n(198)][n(194)](a),e[o]=t}}))();const Ot=rn({__name:At(154),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return hn((()=>{const n=Dt;if(!r[n(163)])return;if(!o[n(163)])return;r.value[n(171)][n(177)]();const e=(new E)[n(165)](o.value,t[n(191)]),i=new A,a=new T,c=e[n(207)].x-e[n(190)].x,s=e[n(207)].y-e[n(190)].y,u=e[n(207)].z-e[n(190)].z;e.getCenter(i),e.getBoundingSphere(a);const l=t.top?s/2:t[n(155)]?-s/2:0,f=t[n(185)]?-c/2:t[n(170)]?c/2:0,p=t[n(188)]?u/2:t[n(202)]?-u/2:0;r[n(163)][n(197)][n(160)](t[n(173)]||t.disableX?0:-i.x+f,t.disable||t[n(172)]?0:-i.y+l,t[n(173)]||t[n(181)]?0:-i.z+p)})),(n,t)=>{const i=Dt;return sn(),un("TresGroup",{ref_key:i(201),ref:e},[mn(i(203),{ref_key:i(178),ref:r},[mn(i(203),{ref_key:"inner",ref:o},[ln(n[i(174)],i(161))],512)],512)],512)}}});function Ct(n){function t(n){const e=Dt;if(typeof n===e(176))return function(n){}.constructor(e(162))[e(186)]("counter");1!==(""+n/n)[e(168)]||n%20==0?function(){return!0}.constructor(e(175)+"gger")[e(159)]("action"):function(){return!1}[e(179)](e(175)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ft=Ht;!function(n,t){const e=Ht,r=Zt();for(;;)try{if(253151===parseInt(e(170))/1*(-parseInt(e(163))/2)+-parseInt(e(164))/3+parseInt(e(219))/4*(-parseInt(e(168))/5)+parseInt(e(183))/6*(-parseInt(e(165))/7)+-parseInt(e(172))/8+parseInt(e(216))/9*(-parseInt(e(189))/10)+-parseInt(e(208))/11*(-parseInt(e(199))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bt(this,(function(){const n=Ht,t=new RegExp(n(175)),e=new RegExp(n(191),"i"),r=Lt(n(171));t[n(166)](r+n(180))&&e[n(166)](r+n(184))?Lt():r("0")}))()}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function("return (function() "+n(215)+");")()}catch(e){t=window}return t}(),e=t[n(198)]=t[n(198)]||{},r=[n(212),n(222),n(197),"error","exception",n(217),n(179)];for(let o=0;o<r[n(213)];o++){const t=jt[n(177)][n(188)][n(182)](jt),i=r[o],a=e[i]||t;t[n(186)]=jt[n(182)](jt),t[n(194)]=a.toString[n(182)](a),e[i]=t}}))();const kt=["object"],Ut=[Ft(207)],Nt=rn({__name:Ft(205),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ft,e=n,{renderer:r}=Y(),o=En(r.value,{frames:1/0,resolution:e.resolution,worldRadius:e.worldRadius});o[t(174)][t(185)]=!0;const i=xn(null);nn(i,(n=>{n&&o[t(204)].add(n)}));const{onBeforeLoop:a}=K();return a((({elapsed:n})=>{o.update()})),dn((()=>{const n=t;e[n(200)]&&o.params.color[n(187)](e[n(200)]),e[n(214)]&&(o[n(174)].ior=e[n(214)]),e[n(210)]&&(o[n(174)][n(210)]=e[n(210)]),e[n(202)]&&(o.params[n(202)]=e.far),e.worldRadius&&(o[n(174)][n(196)]=e[n(196)]),e[n(190)]&&(o[n(174)].intensity=e[n(190)])})),nn((()=>e[t(173)]),(n=>{const e=t;o[e(174)][e(173)]=n})),nn((()=>e[t(181)]),(n=>{const e=t;n&&o.params.lightSource instanceof z[e(195)]&&o.params.lightSource.set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(bn,null,[mn(r(201),{ref_key:r(206),ref:i},[ln(n[r(176)],"default")],512),mn(r(192),{object:en(o)[r(206)],position:[0,.003,0]},null,8,kt),mn(r(192),{object:en(o)[r(203)],visible:!1},null,8,Ut)],64)}}});function Lt(n){function t(n){const e=Ht;if(typeof n===e(220))return function(n){}[e(177)](e(169)).apply(e(209));1!==(""+n/n)[e(213)]||n%20==0?function(){return!0}[e(177)](e(193)+e(211))[e(178)](e(221)):function(){return!1}[e(177)](e(193)+e(211))[e(218)](e(167)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(n,t){const e=Zt();return(Ht=function(n,t){return e[n-=163]})(n,t)}function Zt(){const n=["params","function *\\( *\\)","$slots","constructor","call","trace","chain","lightSource","bind","421494fPUQTp","input","backside","__proto__","set","prototype","30HSXMoP","intensity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","primitive","debu","toString","Vector3","worldRadius","info","console","191784KPIRcL","color","TresGroup","far","helper","scene","index","group","object","803vMzZkk","counter","backsideIOR","gger","log","length","ior",'{}.constructor("return this")( )',"25344bFhiBb","table","apply","658508eTTkUl","string","action","warn","196YVspqd","132591ciwhWB","35DAjOAg","test","stateObject","5prnUNB","while (true) {}","2436amkUIo","init","850320yYUNLp","causticsOnly"];return(Zt=function(){return n})()}!function(n,t){const e=Wt,r=$t();for(;;)try{if(182692===parseInt(e(176))/1*(parseInt(e(173))/2)+parseInt(e(180))/3+parseInt(e(153))/4+-parseInt(e(193))/5+-parseInt(e(155))/6+parseInt(e(156))/7+parseInt(e(164))/8*(-parseInt(e(187))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gt(this,(function(){const n=Wt,t=new RegExp(n(168)),e=new RegExp(n(158),"i"),r=qt("init");t.test(r+"chain")&&e[n(162)](r+"input")?qt():r("0")}))()}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(181)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(n,t){const e=$t();return(Wt=function(n,t){return e[n-=153]})(n,t)}function $t(){const n=["properties","constructor","debu","counter","warn","1080116zaQXxz","__proto__","1208766JdDpZX","2284023Shwair","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","dispose","#ifdef USE_SHADOWMAP","test",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","3000512ZJfTrM","#if defined( SHADOWMAP_TYPE_PCF )","replace","compile","function *\\( *\\)","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","remove","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","while (true) {}","2GZhQiD",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","error","81497uJNhUR","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","isArray","action","422379fjBFKv","apply","gger","return (function() ","bind","material","traverse","9zZdrIv","; i++) {\n        vogelSample = vogelDiskSample(j, ","length","shadowmap_pars_fragment","toString","; i ++) {\n        offset = (vogelDiskSample(j, ","296955aQAmqV","ShaderChunk","string",'{}.constructor("return this")( )'];return($t=function(){return n})()}Vt(void 0,(function(){const n=Wt;let t;try{t=Function(n(183)+n(196)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(201),"info",n(175),"exception",n(159),"trace"];for(let i=0;i<r[n(189)];i++){const t=Vt[n(198)].prototype[n(184)](Vt),o=r[i],a=e[o]||t;t[n(154)]=Vt[n(184)](Vt),t.toString=a[n(191)][n(184)](a),e[o]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=z[r(194)][r(190)];return z[r(194)][r(190)]=z[r(194)][r(190)][r(166)](r(161),r(169)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(192)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(188)+e+r(174)+t+r(177)+e+r(163))[r(166)](r(165),r(171)),(n,t,e)=>{const i=r;z[i(194)][i(190)]=o,function(n,t,e){const r=Wt;t[r(186)]((t=>{const e=r;t.material&&(Array[e(178)](t[e(185)])?t.material.forEach((t=>{const r=e;n.properties[r(170)](t),t[r(160)]()})):(n[e(197)][e(170)](t[e(185)]),t.material[e(160)]()))})),n.info.programs[r(189)]=0,n[r(167)](t,e)}(n,t,e)}};function qt(n){function t(n){const e=Wt;if(typeof n===e(195))return function(n){}[e(198)](e(172))[e(181)](e(200));1!==(""+n/n)[e(189)]||n%20==0?function(){return!0}[e(198)](e(199)+e(182)).call(e(179)):function(){return!1}[e(198)]("debu"+e(182))[e(181)](e(157)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Kt(){const n=["6CIvYYz","action","console","exception","trace","chain","gger","debu","info","27hXWgPM",'{}.constructor("return this")( )',"752yMxDoI","apply","8845HxurKF","traverse","dispose","call","stateObject","string","prototype","bind","1316240ntPPTj","init","913381VuZBek","index","1006398aflisY","log","length","constructor","toString","6773520FVHsdN","test","value","counter","214SPStot","error","__proto__","21259854cUglGa","material","2780sPUBLa","input"];return(Kt=function(){return n})()}function Xt(n,t){const e=Kt();return(Xt=function(n,t){return e[n-=454]})(n,t)}const Jt=Xt;!function(n,t){const e=Xt,r=Kt();for(;;)try{if(636926===parseInt(e(470))/1*(-parseInt(e(488))/2)+parseInt(e(461))/3+-parseInt(e(475))/4*(parseInt(e(490))/5)+parseInt(e(477))/6*(parseInt(e(459))/7)+-parseInt(e(466))/8+-parseInt(e(486))/9*(-parseInt(e(457))/10)+parseInt(e(473))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qt(this,(function(){const n=Xt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ee(n(458));t[n(467)](r+n(482))&&e[n(467)](r+n(476))?ee():r("0")}))()}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ne(void 0,(function(){const n=Xt;let t;try{t=Function("return (function() "+n(487)+");")()}catch(o){t=window}const e=t.console=t[n(479)]||{},r=[n(462),"warn",n(485),n(471),n(480),"table",n(481)];for(let i=0;i<r[n(463)];i++){const t=ne[n(464)][n(455)][n(456)](ne),o=r[i],a=e[o]||t;t[n(472)]=ne.bind(ne),t[n(465)]=a[n(465)].bind(a),e[o]=t}}))();const te=rn({__name:Jt(460),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=Y();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(468)],o[t(468)],e[t(468)]),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o[t(468)][t(491)]((n=>{const e=t;n instanceof l&&n[e(474)][e(492)]()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function ee(n){function t(n){const e=Xt;if(typeof n===e(454))return function(n){}[e(464)]("while (true) {}").apply(e(469));1!==(""+n/n)[e(463)]||n%20==0?function(){return!0}[e(464)](e(484)+e(483))[e(493)](e(478)):function(){return!1}.constructor("debugger")[e(489)](e(494)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const re=oe;function oe(n,t){const e=se();return(oe=function(n,t){return e[n-=235]})(n,t)}!function(n,t){const e=oe,r=se();for(;;)try{if(963342===-parseInt(e(279))/1+-parseInt(e(263))/2*(parseInt(e(268))/3)+parseInt(e(245))/4*(-parseInt(e(286))/5)+parseInt(e(282))/6+-parseInt(e(262))/7*(parseInt(e(284))/8)+-parseInt(e(266))/9*(parseInt(e(274))/10)+parseInt(e(265))/11*(parseInt(e(269))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(246)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ie(this,(function(){const n=oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(255),"i"),r=le(n(256));t.test(r+n(243))&&e.test(r+n(278))?le():r("0")}))()}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ae(void 0,(function(){const n=oe;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(257)]=t.console||{},r=[n(264),n(237),n(271),n(235),n(249),n(273),n(267)];for(let i=0;i<r.length;i++){const t=ae[n(248)][n(280)][n(259)](ae),o=r[i],a=e[o]||t;t.__proto__=ae.bind(ae),t.toString=a[n(272)][n(259)](a),e[o]=t}}))();const ce=parseInt(F[re(244)](/\D+/g,""));function se(){const n=["while (true) {}","7HOZQOc","124qsvGjL","log","10406TwNmmd","1792035FjjLHT","trace","70710gAMKEr","59652geedfT","gger","info","toString","table","50OgpsZH","colorspace_fragment","string","setResolution","input","1262998SAGTLM","prototype","length","6124542liieVU","texelSize","1704024zGhiDa","setTexelSize","78025nxzGrT","error","set","warn","value",">\n        }","resolution","action","kernel","chain","replace","212CbgbvL","apply","counter","constructor","exception","call","copy","toneMapped","debu","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","console","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","bind","multiplyScalar"];return(se=function(){return n})()}class ue extends D{constructor(n=new O){const t=re;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(258)+(ce>=154?t(275):"encodings_fragment")+t(239),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:C,depthWrite:!1,depthTest:!1}),this[t(252)]=!1,this[t(285)](n.x,n.y),this[t(242)]=new Float32Array([0,1,2,2,3])}[re(285)](n,t){const e=re;this[e(254)][e(283)][e(238)].set(n,t),this[e(254)].halfTexelSize[e(238)][e(236)](n,t)[e(260)](.5)}[re(277)](n){const t=re;this[t(254)][t(240)][t(238)][t(251)](n)}}function le(n){function t(n){const e=oe;if(typeof n===e(276))return function(n){}[e(248)](e(261)).apply(e(247));1!==(""+n/n)[e(281)]||n%20==0?function(){return!0}[e(248)](e(253)+e(270))[e(250)](e(241)):function(){return!1}[e(248)](e(253)+e(270))[e(246)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function fe(){const n=["setRenderTarget","USE_DEPTH","renderTargetB","3624024DMLcvb","function *\\( *\\)","4506342aMoiBV","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","camera","__proto__","315VwwyNP","log","table","clone","error","action","36198lMQyZa","minDepthThreshold","add","3880iMEuXm",'{}.constructor("return this")( )',"texture","setTexelSize","render","renderTargetA","toString","test","position","3468402VvXnbt","gger","apply","console","depthToBlurRatioBias","string","depthScale","6397040fKEBJw","length","setResolution","screen","chain","defines","kernel","trace","depthBuffer","338024zZYWLz","constructor","convolutionMaterial","info","scene","value","counter","uniforms","prototype","4TlMbuf","setAttribute","while (true) {}","716171EZTElh","renderToScreen","maxDepthThreshold"];return(fe=function(){return n})()}const pe=me;!function(n,t){const e=me,r=fe();for(;;)try{if(994712===-parseInt(e(203))/1*(-parseInt(e(200))/2)+-parseInt(e(175))/3+parseInt(e(209))/4+-parseInt(e(182))/5+parseInt(e(211))/6+-parseInt(e(216))/7*(-parseInt(e(191))/8)+-parseInt(e(222))/9*(parseInt(e(225))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[me(177)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){de(this,(function(){const n=me,t=new RegExp(n(210)),e=new RegExp(n(213),"i"),r=ge("init");t[n(173)](r+n(186))&&e[n(173)](r+"input")?ge():r("0")}))()}();const he=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[me(177)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();he(void 0,(function(){const n=me;let t;try{t=Function("return (function() "+n(167)+");")()}catch(o){t=window}const e=t.console=t[n(178)]||{},r=[n(217),"warn",n(194),n(220),"exception",n(218),n(189)];for(let i=0;i<r[n(183)];i++){const t=he[n(192)][n(199)][n(212)](he),o=r[i],a=e[o]||t;t[n(215)]=he[n(212)](he),t[n(172)]=a[n(172)][n(212)](a),e[o]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=me;this[c(204)]=!1,this[c(171)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(208)]=this.renderTargetA[c(219)](),this[c(193)]=new ue,this[c(193)][c(169)](1/t,1/e),this.convolutionMaterial[c(184)](new O(t,e)),this[c(195)]=new u,this[c(214)]=new B,this[c(193)].uniforms[c(223)][c(196)]=r,this[c(193)].uniforms[c(205)][c(196)]=o,this.convolutionMaterial[c(198)][c(181)].value=i,this[c(193)][c(198)][c(179)][c(196)]=a,this[c(193)][c(187)][c(207)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(201)](c(174),new k(s,3)),p[c(201)]("uv",new k(f,2)),this[c(185)]=new l(p,this[c(193)]),this[c(185)].frustumCulled=!1,this[c(195)][c(224)](this.screen)}[pe(170)](n,t,e){const r=pe,o=this[r(195)],i=this.camera,a=this[r(171)],c=this.renderTargetB,s=this.convolutionMaterial,u=s[r(198)];u[r(190)][r(196)]=t.depthTexture;const l=s[r(188)];let f,p,d,h=t;for(p=0,d=l[r(183)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(188)][r(196)]=l[p],u.inputBuffer[r(196)]=h.texture,n[r(206)](f),n[r(170)](o,i),h=f;u.kernel[r(196)]=l[p],u.inputBuffer.value=h[r(168)],n[r(206)](this[r(204)]?null:e),n[r(170)](o,i)}}function me(n,t){const e=fe();return(me=function(n,t){return e[n-=167]})(n,t)}function ge(n){function t(n){const e=me;if(typeof n===e(180))return function(n){}[e(192)](e(202))[e(177)](e(197));1!==(""+n/n)[e(183)]||n%20==0?function(){return!0}[e(192)]("debu"+e(176)).call(e(221)):function(){return!1}[e(192)]("debu"+e(176)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var _e=ye;function ye(n,t){var e=we();return(ye=function(n,t){return e[n-=220]})(n,t)}!function(n,t){for(var e=ye,r=we();;)try{if(934559===parseInt(e(263))/1+-parseInt(e(225))/2+parseInt(e(294))/3+parseInt(e(250))/4*(-parseInt(e(227))/5)+-parseInt(e(269))/6*(-parseInt(e(296))/7)+-parseInt(e(232))/8*(-parseInt(e(248))/9)+-parseInt(e(290))/10*(-parseInt(e(229))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(282)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){var n=ye,t=new RegExp(n(230)),e=new RegExp(n(256),"i"),r=Se(n(224));t[n(221)](r+"chain")&&e[n(221)](r+n(281))?Se():r("0")}))()}();var Ie=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ie(void 0,(function(){var n,t=ye;try{n=Function(t(285)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n.console||{},r=[t(223),t(300),t(242),"error",t(272),t(231),t(239)],o=0;o<r[t(297)];o++){var i=Ie[t(262)][t(295)].bind(Ie),a=r[o],c=e[a]||i;i[t(251)]=Ie.bind(Ie),i[t(237)]=c[t(237)][t(258)](c),e[a]=i}}))();class be extends U{constructor(n={}){var t=ye;super(n),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this[t(234)]={value:!1},this[t(271)]={value:0},this[t(235)]={value:0},this._blurStrength={value:.5},this[t(298)]={value:.9},this[t(266)]={value:1},this[t(259)]={value:0},this[t(245)]={value:.25},this[t(291)]={value:1},this[t(253)]={value:1},this[t(276)](n)}[_e(261)](n){var t,e=_e;!(null==(t=n[e(249)])?void 0:t[e(299)])&&(n[e(249)][e(299)]=""),n[e(244)][e(280)]=this[e(234)],n.uniforms.tDiffuse=this[e(257)],n[e(244)].tDepth=this[e(241)],n[e(244)][e(238)]=this[e(254)],n.uniforms[e(226)]=this[e(270)],n.uniforms.textureMatrix=this[e(274)],n[e(244)][e(236)]=this._mirror,n.uniforms[e(247)]=this._mixBlur,n[e(244)][e(222)]=this[e(220)],n[e(244)][e(289)]=this[e(298)],n[e(244)][e(252)]=this[e(266)],n[e(244)][e(293)]=this[e(259)],n[e(244)][e(260)]=this[e(245)],n[e(244)].distortion=this[e(291)],n[e(244)][e(279)]=this[e(253)],n[e(283)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(283)],n.vertexShader=n[e(283)].replace(e(228),e(255)),n[e(265)]=e(292)+n[e(265)],n[e(265)]=n[e(265)][e(275)](e(264),e(284))}get[_e(288)](){var n=_e;return this._tDiffuse[n(240)]}set tDiffuse(n){var t=_e;this._tDiffuse[t(240)]=n}get[_e(267)](){return this[_e(241)].value}set[_e(267)](n){var t=_e;this._tDepth[t(240)]=n}get[_e(238)](){return this[_e(254)].value}set distortionMap(n){var t=_e;this[t(254)][t(240)]=n}get[_e(226)](){var n=_e;return this[n(270)][n(240)]}set tDiffuseBlur(n){this[_e(270)].value=n}get textureMatrix(){var n=_e;return this._textureMatrix[n(240)]}set[_e(233)](n){var t=_e;this._textureMatrix[t(240)]=n}get[_e(280)](){var n=_e;return this[n(234)][n(240)]}set[_e(280)](n){this[_e(234)].value=n}get mirror(){var n=_e;return this._mirror[n(240)]}set[_e(236)](n){var t=_e;this[t(271)][t(240)]=n}get[_e(247)](){return this._mixBlur.value}set[_e(247)](n){var t=_e;this[t(235)][t(240)]=n}get[_e(222)](){var n=_e;return this._blurStrength[n(240)]}set mixStrength(n){var t=_e;this[t(220)][t(240)]=n}get[_e(289)](){var n=_e;return this[n(298)][n(240)]}set[_e(289)](n){var t=_e;this[t(298)][t(240)]=n}get[_e(252)](){var n=_e;return this[n(266)][n(240)]}set maxDepthThreshold(n){var t=_e;this[t(266)][t(240)]=n}get[_e(293)](){var n=_e;return this[n(259)][n(240)]}set[_e(293)](n){var t=_e;this[t(259)][t(240)]=n}get[_e(260)](){var n=_e;return this[n(245)][n(240)]}set[_e(260)](n){var t=_e;this[t(245)][t(240)]=n}get[_e(246)](){var n=_e;return this._distortion[n(240)]}set[_e(246)](n){var t=_e;this[t(291)][t(240)]=n}get[_e(279)](){return this[_e(253)].value}set[_e(279)](n){var t=_e;this._mixContrast[t(240)]=n}}function Se(n){function t(n){var e=ye;if("string"==typeof n)return function(n){}[e(262)](e(268))[e(282)](e(278));1!==(""+n/n)[e(297)]||n%20==0?function(){return!0}[e(262)]("debugger")[e(286)](e(273)):function(){return!1}[e(262)](e(277)+e(243))[e(282)](e(287)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function we(){var n=["gger","uniforms","_depthToBlurRatioBias","distortion","mixBlur","910017bXaMSo","defines","21844biHikQ","__proto__","maxDepthThreshold","_mixContrast","_distortionMap","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_tDiffuse","bind","_depthScale","depthToBlurRatioBias","onBeforeCompile","constructor","1272271ZPkJdJ","#include <emissivemap_fragment>","fragmentShader","_maxDepthThreshold","tDepth","while (true) {}","1158tGuzVF","_tDiffuseBlur","_mirror","exception","action","_textureMatrix","replace","setValues","debu","counter","mixContrast","hasBlur","input","apply","vertexShader","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","return (function() ","call","stateObject","tDiffuse","minDepthThreshold","940avUMpj","_distortion","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","depthScale","1202682dXKNmH","prototype","18333EPVchU","length","_minDepthThreshold","USE_UV","warn","_blurStrength","test","mixStrength","log","init","1927044FEaYdw","tDiffuseBlur","710iMenZM","#include <project_vertex>","22418AaWgrS","function *\\( *\\)","table","24VOMRfs","textureMatrix","_hasBlur","_mixBlur","mirror","toString","distortionMap","trace","value","_tDepth","info"];return(we=function(){return n})()}function Me(n,t){const e=Ee();return(Me=function(n,t){return e[n-=412]})(n,t)}const Re=Me;function Ee(){const n=["mirror","prototype","sign","autoUpdate","subVectors","isMesh","uuid","while (true) {}","dispose","error","addScaledVector","depthTexture","784819Qrkbqq","action","defines-USE_DEPTH","render","defines-USE_DISTORTION","counter","info","t-diffuse","far","depth-scale","position","303128JZdRoQ","texture","max-depth-threshold","table","clipPlane","assign","apply","12uShqTi","mix-strength","distortionMap","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresMeshReflectorMaterial","string","6RdtVva","autoClear","visible","negate","enabled","debu","multiplyScalar","set","updateMatrixWorld","material","shadowMap","view","t-depth","function *\\( *\\)","multiply","lookAtPosition","setFromMatrixPosition","cameraWorldPosition","dot","1365285ffXtCJ","289307qfbHcP","t-diffuse-blur","console","setFromNormalAndCoplanarPoint","reflectorWorldPosition","reflectorPlane","reflect","479524oqhexV","constructor","distortion","matrixWorldInverse","setRenderTarget","lookAt","applyMatrix4","projectionMatrix","textureMatrix","elements","test","5471937njNVeb","value","gger",'{}.constructor("return this")( )',"extractRotation","copy","2586560YWyaGN","return (function() ","exception","matrixWorld","normal","virtualCamera","has-blur","materialRef","__proto__","length","rotationMatrix","chain","target","bind","warn","toString","log","clear"];return(Ee=function(){return n})()}!function(n,t){const e=Me,r=Ee();for(;;)try{if(201857===-parseInt(e(476))/1+-parseInt(e(443))/2+parseInt(e(456))/3*(-parseInt(e(483))/4)+-parseInt(e(475))/5+parseInt(e(450))/6*(parseInt(e(432))/7)+parseInt(e(500))/8+parseInt(e(494))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ae(this,(function(){const n=Me,t=new RegExp(n(469)),e=new RegExp(n(453),"i"),r=Pe("init");t.test(r+n(413))&&e[n(493)](r+"input")?Pe():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(449)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Te(void 0,(function(){const n=Me,t=function(){const n=Me;let t;try{t=Function(n(501)+n(497)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(478)]||{},r=[n(418),n(416),n(438),n(429),n(502),n(446),"trace"];for(let o=0;o<r[n(509)];o++){const t=Te[n(484)][n(421)].bind(Te),i=r[o],a=e[i]||t;t[n(508)]=Te[n(415)](Te),t[n(417)]=a[n(417)].bind(a),e[i]=t}}))();const ze=["texture-matrix",Re(420),Re(439),Re(468),Re(477),Re(506),Re(451),"min-depth-threshold",Re(445),Re(441),"depth-to-blur-ratio-bias",Re(485),Re(452),"mix-contrast","defines-USE_BLUR","defines-USE_DEPTH",Re(436)],De=rn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Re,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=J(o),{camera:y,scene:x,renderer:R,extend:E}=Y();E({MeshReflectorMaterial:be});const T=xn(),z=xn(),D=xn(),P=xn(),O=tn((()=>{const n=Me;return"number"==typeof f[n(495)]?[f[n(495)],f[n(495)]]:f[n(495)]})),C=tn((()=>O[r(495)][0]>0||O[r(495)][1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};dn((()=>{var n;const o=r;null==(n=T[o(495)])||n[o(444)].dispose();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(495)]=new I(i[o(495)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(495)],i.value,w,M)},t(y,e(x)))),z[o(495)]=new I(i.value,i[o(495)],f),D[o(495)]=new ve({resolution:i[o(495)],width:O[o(495)][0],height:O[o(495)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(495)],depthScale:u[o(495)],depthToBlurRatioBias:l[o(495)]}),P.value={mirror:p,textureMatrix:F[o(491)],mixBlur:d,tDiffuse:T[o(495)][o(444)],tDepth:T[o(495)].depthTexture,tDiffuseBlur:T[o(495)][o(444)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(495)],mixContrast:_,"defines-USE_BLUR":C[o(495)]?"":void 0,"defines-USE_DEPTH":u[o(495)]>0?"":void 0,"defines-USE_DISTORTION":g[o(495)]?"":void 0}}));const B=xn(),{onLoop:j}=K();j((()=>{var n;const t=r;if(!(B[t(495)]&&R[t(495)]&&T[t(495)]&&y[t(495)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Me;n[r(425)]&&n[r(465)]&&n[r(465)][r(426)]===t&&(e=n)})),e}(x.value,B[t(495)][t(426)]);if(!e)return;e[t(458)]=!1;const i=R[t(495)].xr.enabled,a=R[t(495)][t(466)].autoUpdate;(function(n){var t,e;const r=Me;if(F.reflectorWorldPosition[r(472)](n[r(503)]),F[r(473)][r(472)](null==(t=y[r(495)])?void 0:t[r(503)]),F[r(412)][r(498)](n[r(503)]),F[r(504)][r(463)](0,0,1),F.normal.applyMatrix4(F[r(412)]),F[r(480)][r(430)](F[r(504)],o.reflectorOffset),F[r(467)].subVectors(F[r(480)],F[r(473)]),F[r(467)][r(474)](F[r(504)])>0)return;F[r(467)].reflect(F[r(504)])[r(459)](),F[r(467)].add(F[r(480)]),F[r(412)][r(498)](null==(e=y[r(495)])?void 0:e[r(503)]),F[r(471)][r(463)](0,0,-1),F[r(471)][r(489)](F.rotationMatrix),F[r(471)].add(F[r(473)]),F[r(414)][r(424)](F[r(480)],F[r(471)]),F[r(414)].reflect(F[r(504)])[r(459)](),F[r(414)].add(F.reflectorWorldPosition),F[r(505)][r(442)][r(499)](F[r(467)]),F[r(505)].up.set(0,1,0),F.virtualCamera.up[r(489)](F[r(412)]),F[r(505)].up[r(482)](F[r(504)]),F.virtualCamera[r(488)](F.target),F[r(505)][r(440)]=(null==y?void 0:y[r(495)])[r(440)],F.virtualCamera[r(464)](),F[r(505)][r(490)][r(499)]((null==y?void 0:y.value)[r(490)]),F[r(491)][r(463)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(470)](F[r(505)].projectionMatrix),F[r(491)][r(470)](F.virtualCamera[r(486)]),F[r(491)][r(470)](n.matrixWorld),F[r(481)][r(479)](F.normal,F[r(480)]),F[r(481)][r(489)](F[r(505)].matrixWorldInverse),F[r(447)][r(463)](F[r(481)][r(504)].x,F[r(481)].normal.y,F[r(481)].normal.z,F[r(481)].constant);const i=F[r(505)].projectionMatrix;F.q.x=(Math.sign(F[r(447)].x)+i[r(492)][8])/i.elements[0],F.q.y=(Math[r(422)](F.clipPlane.y)+i[r(492)][9])/i[r(492)][5],F.q.z=-1,F.q.w=(1+i[r(492)][10])/i[r(492)][14],F.clipPlane[r(462)](2/F[r(447)].dot(F.q)),i[r(492)][2]=F.clipPlane.x,i[r(492)][6]=F[r(447)].y,i[r(492)][10]=F[r(447)].z+1,i[r(492)][14]=F[r(447)].w})(e),R[t(495)].shadowMap[t(423)]=!1,R.value[t(487)](T.value),R[t(495)][t(457)]||R[t(495)][t(419)](),R[t(495)][t(435)](x.value,F[t(505)]),null==(n=null==D?void 0:D[t(495)])||n[t(435)](R[t(495)],T[t(495)],z[t(495)]),R[t(495)].xr[t(460)]=i,R[t(495)].shadowMap[t(423)]=a,e[t(458)]=!0,R[t(495)][t(487)](null)}));const k=Sn(),U=tn((()=>{const n=r,t={};return Object[n(448)](t,o),Object[n(448)](t,k[n(495)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(495)])||n[e(428)](),null==(t=null==z?void 0:z[e(495)])||t[e(428)]()})),(n,t)=>{var e,o,i;const c=r;return sn(),un(c(454),wn({key:"key"+P.value["defines-USE_BLUR"]+P[c(495)][c(434)]+P[c(495)][c(436)],ref_key:c(507),ref:B},U[c(495)],{"texture-matrix":F[c(491)],mirror:en(p),"t-diffuse":null==(e=T[c(495)])?void 0:e[c(444)],"t-depth":null==(o=T[c(495)])?void 0:o[c(431)],"t-diffuse-blur":null==(i=z[c(495)])?void 0:i[c(444)],"has-blur":C[c(495)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":C[c(495)]?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,ze)}}});function Pe(n){function t(n){const e=Me;if(typeof n===e(455))return function(n){}[e(484)](e(427)).apply(e(437));1!==(""+n/n).length||n%20==0?function(){return!0}[e(484)](e(461)+e(496)).call(e(433)):function(){return!1}[e(484)](e(461)+"gger")[e(449)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Be,r=Fe();for(;;)try{if(804367===-parseInt(e(505))/1*(parseInt(e(499))/2)+parseInt(e(511))/3*(-parseInt(e(506))/4)+-parseInt(e(490))/5+parseInt(e(491))/6+parseInt(e(483))/7+parseInt(e(474))/8+parseInt(e(503))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=Be,t=new RegExp(n(485)),e=new RegExp(n(482),"i"),r=je(n(494));t[n(475)](r+n(493))&&e[n(475)](r+n(510))?je():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(){const n=["input","6upeBCo","fog","length","value","6456488hSupYT","test","exception","CubeCamera","trace","console","while (true) {}","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","592977FsOIgx","apply","function *\\( *\\)","error","toString","update","dispose","4922410BpSOCz","5484492zvZwrl","gger","chain","init","counter","table",'{}.constructor("return this")( )',"bind","16774GJsOVW","constructor","background","prototype","14487336VYujEg","action","131YOgMVI","1056024VdzOVc","call","debu","return (function() "];return(Fe=function(){return n})()}function Be(n,t){const e=Fe();return(Be=function(n,t){return e[n-=471]})(n,t)}function je(n){function t(n){const e=Be;if("string"==typeof n)return function(n){}[e(500)](e(480))[e(484)](e(495));1!==(""+n/n)[e(472)]||n%20==0?function(){return!0}[e(500)](e(508)+e(492))[e(507)](e(504)):function(){return!1}.constructor(e(508)+e(492)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=Be,t=function(){const n=Be;let t;try{t=Function(n(509)+n(497)+");")()}catch(e){t=window}return t}(),e=t[n(479)]=t[n(479)]||{},r=[n(481),"warn","info",n(486),n(476),n(496),n(478)];for(let o=0;o<r.length;o++){const t=Ce.constructor[n(502)][n(498)](Ce),i=r[o],a=e[i]||t;t.__proto__=Ce[n(498)](Ce),t.toString=a[n(487)][n(498)](a),e[i]=t}}))();const ke=Ze;function Ue(){const n=["apply","fog","envMap","2632494ZNYCge",'{}.constructor("return this")( )',"info","value","51079xuNzYF","gger","visible","464608QDFyjf","string","warn","TresGroup","prototype","return (function() ","278792XoJjzC","3606910pJjhZN","test","1173212jiIMPW","chain","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","texture","trace","length","45uroKzs","console","25038970nSqkBD","__proto__","constructor","error","near","function *\\( *\\)","index","frames","debu","bind","counter","default","far","input","rgRef","object","call","resolution","action","log","1rnIfCL","714XqpRZW"];return(Ue=function(){return n})()}!function(n,t){const e=Ze,r=Ue();for(;;)try{if(532754===-parseInt(e(188))/1*(parseInt(e(209))/2)+-parseInt(e(193))/3+-parseInt(e(206))/4+parseInt(e(207))/5+parseInt(e(189))/6*(-parseInt(e(197))/7)+-parseInt(e(200))/8*(parseInt(e(217))/9)+parseInt(e(168))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ne(this,(function(){const n=Ze,t=new RegExp(n(173)),e=new RegExp(n(212),"i"),r=Ve(n(211));t[n(208)](r+n(210))&&e[n(208)](r+n(181))?Ve():r("0")}))()}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(190)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Le(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function(n(205)+n(194)+");")()}catch(e){t=window}return t}(),e=t[n(218)]=t.console||{},r=[n(187),n(202),n(195),n(171),"exception",n(213),n(215)];for(let o=0;o<r[n(216)];o++){const t=Le[n(170)][n(204)].bind(Le),i=r[o],a=e[i]||t;t[n(169)]=Le[n(177)](Le),t.toString=a.toString.bind(a),e[i]=t}}))();const He=[ke(183)];function Ze(n,t){const e=Ue();return(Ze=function(n,t){return e[n-=168]})(n,t)}const Ge=rn({__name:ke(174),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=Y(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return nn((()=>s),(n=>{var t;const e=Be;null==(t=c[e(473)])||t[e(489)](),c[e(473)]=new v(n[e(473)]),c[e(473)].texture.type=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Be;e&&(f[r(473)]=new(z[r(477)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;const t=Be;null==(n=c.value)||n[t(489)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Be;p=a[t(473)][t(471)],d=a[t(473)][t(501)],a[t(473)][t(501)]=r||d,a[t(473)][t(471)]=o||p,null==(n=f.value)||n[t(488)](i[t(473)],a[t(473)]),a[t(473)][t(471)]=p,a[t(473)][t(501)]=d}}}({resolution:o[r(185)],near:o[r(172)],far:o[r(180)],envMap:o[r(192)],fog:o[r(191)]}),{onBeforeLoop:s}=K();let u=0;const l=Q(null);return s((()=>{const n=r;l.value&&(o[n(175)]===1/0||u<o[n(175)])&&(l.value.visible=!1,c(),l.value[n(199)]=!0,u++)})),t({texture:null==(e=i[r(196)])?void 0:e[r(214)]}),(n,t)=>{const e=r;return sn(),un(e(203),null,[mn("primitive",{object:en(a)},null,8,He),mn(e(203),{ref_key:e(182),ref:l},[ln(n.$slots,e(179))],512)])}}});function Ve(n){function t(n){const e=Ze;if(typeof n===e(201))return function(n){}[e(170)]("while (true) {}")[e(190)](e(178));1!==(""+n/n)[e(216)]||n%20==0?function(){return!0}[e(170)](e(176)+e(198))[e(184)](e(186)):function(){return!1}[e(170)](e(176)+e(198)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$e,r=Ye();for(;;)try{if(505096===parseInt(e(522))/1*(-parseInt(e(526))/2)+parseInt(e(531))/3+parseInt(e(524))/4+-parseInt(e(507))/5*(-parseInt(e(514))/6)+parseInt(e(508))/7+parseInt(e(511))/8*(parseInt(e(515))/9)+-parseInt(e(500))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t){const e=Ye();return($e=function(n,t){return e[n-=496]})(n,t)}function Ye(){const n=["call","apply","error","46967ZummVh","console","3400144hwmCjS","ShaderMaterial","18DmzIap","value","bind","key","generateUUID","1609011uJgqjT","test","action","log","init","length","defineProperty","assign","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","trace","uniforms","25213410ORrJPM","prototype","MathUtils","return (function() ","debu","while (true) {}","toString","15pSUCKz","4194890InTdZO","entries","stateObject","912968QgfeNu","gger","info","2014026IWztfh","36nsvONb",'{}.constructor("return this")( )',"reduce","chain"];return(Ye=function(){return n})()}!function(){We(this,(function(){const n=$e,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(496),"i"),r=Xe(n(535));t[n(532)](r+n(518))&&e[n(532)](r+n(497))?Xe():r("0")}))()}();const qe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$e(520)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n,t,e,r){const o=$e,i=class extends z[o(525)]{constructor(i={}){const a=o,s=Object[a(509)](n);super({uniforms:s[a(517)](((n,[t,e])=>{const r=G.clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(529)]="",s.forEach((([n])=>Object[a(537)](this,n,{get:()=>this[a(499)][n][a(527)],set:t=>this[a(499)][n][a(527)]=t}))),Object[a(538)](this,i),r&&r(this)}};return i[o(529)]=z[o(502)][o(530)](),i}function Xe(n){function t(n){const e=$e;if("string"==typeof n)return function(n){}.constructor(e(505))[e(520)]("counter");1!==(""+n/n)[e(536)]||n%20==0?function(){return!0}.constructor(e(504)+e(512))[e(519)](e(533)):function(){return!1}.constructor(e(504)+e(512)).apply(e(510)),t(++n)}try{if(n)return t;t(0)}catch(e){}}qe(void 0,(function(){const n=$e,t=function(){const n=$e;let t;try{t=Function(n(503)+n(516)+");")()}catch(e){t=window}return t}(),e=t[n(523)]=t[n(523)]||{},r=[n(534),"warn",n(513),n(521),"exception","table",n(498)];for(let o=0;o<r[n(536)];o++){const t=qe.constructor[n(501)][n(528)](qe),i=r[o],a=e[i]||t;t.__proto__=qe[n(528)](qe),t[n(506)]=a[n(506)][n(528)](a),e[i]=t}}))();var Je=nr;!function(n,t){for(var e=nr,r=Or();;)try{if(472190===-parseInt(e(371))/1*(-parseInt(e(198))/2)+parseInt(e(256))/3+parseInt(e(348))/4*(parseInt(e(327))/5)+parseInt(e(233))/6+parseInt(e(295))/7*(-parseInt(e(178))/8)+-parseInt(e(312))/9*(parseInt(e(307))/10)+-parseInt(e(359))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[nr(374)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n,t){var e=Or();return(nr=function(n,t){return e[n-=176]})(n,t)}!function(){Qe(this,(function(){var n=nr,t=new RegExp(n(323)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Br("init");t[n(258)](r+n(301))&&e.test(r+n(286))?Br():r("0")}))()}();var tr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function er(n){var t=nr,e=function(n,t){var e=nr;if(typeof n!==e(208)||null===n)return n;var r=n[Symbol[e(177)]];if(void 0!==r){var o=r[e(317)](n,t||e(303));if(typeof o!==e(208))return o;throw new TypeError(e(190))}return("string"===t?String:Number)(n)}(n,t(316));return typeof e===t(324)?e:String(e)}function rr(n,t,e){var r=nr;return(t=er(t))in n?Object[r(342)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=nr,r=Object[e(267)](n);if(Object.getOwnPropertySymbols){var o=Object[e(283)](n);t&&(o=o[e(262)]((function(t){var r=e;return Object[r(310)](n,t)[r(278)]}))),r[e(314)][e(374)](r,o)}return r}function ir(n){for(var t=nr,e=1;e<arguments[t(289)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(t){rr(n,t,r[t])})):Object[t(309)]?Object[t(176)](n,Object.getOwnPropertyDescriptors(r)):or(Object(r))[t(241)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(310)](r,e))}))}return n}function ar(n,t){var e=nr;if(null==n)return{};var r,o,i=function(n,t){var e=nr;if(null==n)return{};var r,o,i={},a=Object[e(267)](n);for(o=0;o<a[e(289)];o++)r=a[o],t[e(264)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(283)]){var a=Object[e(283)](n);for(o=0;o<a[e(289)];o++)r=a[o],t[e(264)](r)>=0||Object[e(246)].propertyIsEnumerable[e(317)](n,r)&&(i[r]=n[r])}return i}function cr(n,t){var e=nr;(null==t||t>n[e(289)])&&(t=n[e(289)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function sr(n,t){return function(n){if(Array[nr(237)](n))return n}(n)||function(n,t){var e=nr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(229)]]||n[e(370)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(317)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(317)](r))[e(297)])&&(s.push(o[e(361)]),s[e(289)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(299)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=nr;if(n){if(typeof n===e(316))return cr(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n[e(294)]&&(r=n[e(294)][e(347)]),"Map"===r||r===e(377)?Array[e(340)](n):r===e(335)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cr(n,t):void 0}}(n,t)||function(){throw new TypeError(nr(300))}()}function ur(n,t){for(var e=nr,r=0;r<t[e(289)];r++){var o=t[r];o[e(278)]=o.enumerable||!1,o[e(184)]=!0,e(361)in o&&(o[e(290)]=!0),Object[e(342)](n,er(o.key),o)}}function lr(n){if(void 0===n)throw new ReferenceError(nr(273));return n}function fr(n,t){var e=nr;return(fr=Object[e(261)]?Object[e(261)][e(311)]():function(n,t){return n[e(242)]=t,n})(n,t)}function pr(n){var t=nr;return(pr=Object[t(261)]?Object.getPrototypeOf[t(311)]():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function dr(n){var t=function(){var n=nr;if(typeof Reflect===n(205)||!Reflect[n(234)])return!1;if(Reflect[n(234)][n(345)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf[n(317)](Reflect[n(234)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=nr,o=pr(n);if(t){var i=pr(this)[r(294)];e=Reflect[r(234)](o,arguments,i)}else e=o[r(374)](this,arguments);return function(n,t){var e=nr;if(t&&(typeof t===e(208)||typeof t===e(275)))return t;if(void 0!==t)throw new TypeError(e(213));return lr(n)}(this,e)}}tr(void 0,(function(){var n,t=nr;try{n=Function(t(230)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(266)]=n.console||{},r=[t(321),t(225),t(269),"error","exception",t(282),t(252)],o=0;o<r.length;o++){var i=tr[t(294)][t(246)][t(311)](tr),a=r[o],c=e[a]||i;i[t(242)]=tr[t(311)](tr),i[t(250)]=c[t(250)][t(311)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:Je(271),normal:Je(201),roughness:"csm_Roughness",metalness:Je(363),emissive:Je(207),ao:Je(357),bump:Je(260),clearcoat:Je(251),clearcoatRoughness:Je(209),clearcoatNormal:Je(257),pointSize:Je(350),fragColor:"csm_FragColor",depthAlpha:Je(188),position:"csm_Position",positionRaw:Je(263)},_r=(rr(hr={},""[Je(332)](gr.position),"*"),rr(hr,""[Je(332)](gr[Je(353)]),"*"),rr(hr,""[Je(332)](gr.normal),"*"),rr(hr,""[Je(332)](gr.pointSize),[Je(196)]),rr(hr,""[Je(332)](gr[Je(235)]),"*"),rr(hr,"".concat(gr[Je(344)]),"*"),rr(hr,"".concat(gr[Je(319)]),["MeshStandardMaterial",Je(215)]),rr(hr,"".concat(gr[Je(232)]),[Je(216),Je(215)]),rr(hr,""[Je(332)](gr[Je(254)]),[Je(216),Je(215)]),rr(hr,"".concat(gr.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial",Je(277),Je(292),Je(358)]),rr(hr,""[Je(332)](gr[Je(240)]),[Je(277),Je(255),Je(368),"MeshPhongMaterial",Je(215),Je(216),"MeshToonMaterial",Je(298)]),rr(hr,""[Je(332)](gr[Je(308)]),[Je(228)]),rr(hr,""[Je(332)](gr[Je(306)]),[Je(215)]),rr(hr,"".concat(gr[Je(365)]),[Je(215)]),rr(hr,""[Je(332)](gr[Je(181)]),[Je(215)]),hr),yr={"#include <lights_physical_fragment>":V[Je(247)]},xr=(rr(vr={},""[Je(332)](gr[Je(284)]),{"#include <beginnormal_vertex>":Je(272)[Je(332)](gr.normal,Je(274))}),rr(vr,""[Je(332)](gr.position),{"#include <begin_vertex>":Je(239)[Je(332)](gr[Je(351)],Je(223))}),rr(vr,""[Je(332)](gr[Je(353)]),{"#include <begin_vertex>":Je(224)[Je(332)](gr[Je(353)],Je(360))}),rr(vr,"".concat(gr[Je(305)]),{"gl_PointSize = size;":Je(379)[Je(332)](gr[Je(305)],";\n    ")}),rr(vr,""[Je(332)](gr[Je(235)]),{"#include <color_fragment>":Je(238)[Je(332)](gr[Je(235)],Je(223))}),rr(vr,""[Je(332)](gr[Je(344)]),{"#include <dithering_fragment>":Je(330)[Je(332)](gr[Je(344)],Je(223))}),rr(vr,""[Je(332)](gr[Je(319)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Je(332)](gr[Je(319)],Je(212))}),rr(vr,""[Je(332)](gr[Je(232)]),{"#include <roughnessmap_fragment>":Je(293).concat(gr[Je(232)],Je(212))}),rr(vr,"".concat(gr[Je(254)]),{"#include <metalnessmap_fragment>":Je(180)[Je(332)](gr[Je(254)],";\n    ")}),rr(vr,""[Je(332)](gr.ao),{"#include <aomap_fragment>":Je(366)[Je(332)](gr.ao,Je(212))}),rr(vr,"".concat(gr[Je(240)]),{"#include <normal_fragment_maps>":Je(199)[Je(332)](gr[Je(240)]," - (dot(")[Je(332)](gr[Je(240)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),rr(vr,"".concat(gr[Je(308)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(279)[Je(332)](gr.depthAlpha," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[Je(332)](gr[Je(308)],Je(212))}),rr(vr,"".concat(gr.clearcoat),{"material.clearcoat = clearcoat;":Je(320)[Je(332)](gr[Je(306)],";")}),rr(vr,""[Je(332)](gr[Je(365)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Je(332)](gr[Je(365)],";")}),rr(vr,"".concat(gr[Je(181)]),{"#include <clearcoat_normal_fragment_begin>":Je(354)}),vr),Ir=(rr(mr={},""[Je(332)](gr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(276)[Je(332)](gr.position,Je(204))}),rr(mr,"".concat(gr[Je(353)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(245)[Je(332)](gr[Je(351)],";\n  ")}),rr(mr,""[Je(332)](gr[Je(235)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(253).concat(gr[Je(235)],";\n  ")}),rr(mr,"".concat(gr[Je(344)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(gr[Je(344)],Je(223))}),mr),br={clearcoat:[gr.clearcoat,gr[Je(181)],gr[Je(365)]]},Sr=Je(288),wr=Je(222),Mr=Je(249),Rr=Je(202),Er=Je(249),Ar=Je(315),Tr=[Je(356),Je(281),Je(325),Je(364),Je(231),Je(291),Je(367)],zr=function(n,t,e){var r=Je;return n[r(259)](t)[r(243)](e)},Dr=function(n,t){var e,r,o=Je;return new RegExp("\\b"[o(332)]((e=t,r=Je,e[r(187)](/[-\/\\^$*+?.()|[\]{}]/g,r(214))),"\\b"))[o(258)](n)};function Pr(n){return n?n[Je(187)](/\s/g,""):void 0}function Or(){var n=["\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","length","writable","cacheKey","MeshPhongMaterial","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","constructor","64841PbCIHX","action","done","ShadowMaterial","return","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","chain","ShaderMaterial","default","counter","pointSize","clearcoat","2430390MvABAj","depthAlpha","getOwnPropertyDescriptors","getOwnPropertyDescriptor","bind","9lGDTqX","void main() {","push","\n    \n","string","call","gger","emissive","material.clearcoat = ","log","create","function *\\( *\\)","symbol","vertexShader","\n            ","385hSskKj","Super expression must either be null or a function","isAlreadyExtended","\n    #include <dithering_fragment>\n    gl_FragColor  = ","onBeforeCompile","concat","CustomShaderMaterial does not support RawShaderMaterial","Material","Arguments","lastIndexOf","needsUpdate","csm_main_","set","from","#define IS_UNKNOWN;\n","defineProperty","assign","fragColor","sham","\n            \n            void main() {\n          ","name","26276ZzKWzR","instanceID","csm_PointSize","position","error","positionRaw","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","#define IS_","baseMaterial","csm_AO","MeshToonMaterial","7197839IQTOwe",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","value","toUpperCase","csm_Metalness","uniforms","clearcoatRoughness","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","silent","MeshNormalMaterial","_getPatchMapForMaterial","@@iterator","532pJibfT","clone","void main()","apply","includes","type","Set","__csm","\n    gl_PointSize = ","defineProperties","toPrimitive","440efABLp","stateObject","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","clearcoatNormal","trim","cacheHash","configurable","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","message","replace","csm_DepthAlpha","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","@@toPrimitive must return a primitive value.","RawShaderMaterial","getPrototypeOf","is not a constructor","#define IS_VERTEX;\n"," is not available in ","PointsMaterial","_getCacheHash","1084YCgifj","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","update","csm_Normal","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","Cannot call a class as a function",", 1.0 );\n  ","undefined","// #_CSM_#","csm_Emissive","object","csm_ClearcoatRoughness","entries","_getMaterialDefine",";\n    ","Derived constructors may only return object or undefined","\\$&","MeshPhysicalMaterial","MeshStandardMaterial","find",'CSM: Property "',"_patchShader","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","substring","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",";\n  ","\n    vec4 csm_internal_positionUnprojected = ","warn","();\n              // #_CSM_#\n          ","void ","MeshDepthMaterial","iterator","return (function() ","patchMap","roughness","3853470aCksuz","construct","diffuse",'" is required to use output "',"isArray","\n    #include <color_fragment>\n    diffuseColor = ","\n    vec3 transformed = ","bump","forEach","__proto__","join",". Shader cannot compile.","\n    gl_Position = ","prototype","lights_physical_fragment","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","toString","csm_Clearcoat","trace","\n    gl_FragColor = ","metalness","MeshMatcapMaterial","1327923VERLcd","csm_ClearcoatNormal","test","split","csm_Bump","setPrototypeOf","filter","csm_PositionRaw","indexOf","_generateMaterial","console","keys","debu","info","customProgramCacheKey","csm_DiffuseColor","\n    vec3 objectNormal = ","this hasn't been initialised - super() hasn't been called",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","function","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","MeshLambertMaterial","enumerable","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","get","fragmentShader","table","getOwnPropertySymbols","normal","while (true) {}","input","();\n            // #_CSM_#\n          "];return(Or=function(){return n})()}function Cr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Fr=function(n){var t=Je;!function(n,t){var e=nr;if(typeof t!==e(275)&&null!==t)throw new TypeError(e(328));n[e(246)]=Object[e(322)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(342)](n,"prototype",{writable:!1}),t&&fr(n,t)}(c,n);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=nr,u=n.baseMaterial,l=n[s(281)],f=n.vertexShader,p=n[s(364)],d=n[s(231)],h=n[s(291)],v=n[s(367)],m=ar(n,Tr);if(function(n,t){if(!(n instanceof t))throw new TypeError(nr(203))}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e[t(186)][t(264)](t(193))>=0)return!1}return!0}(u)?(e=u,Object[s(343)](e,m)):e=new u(m),e.type===s(191))throw new Error(s(333));(function(n,t){var e=Je;e(289),Object.assign(n,t);var r=Object[e(192)](t);Object.entries(Object[e(309)](r)).filter((function(n){var t=e,r="function"==typeof n[1][t(280)],o=typeof n[1][t(339)]===t(275),i=typeof n[1][t(361)]===t(275),a=n[0]===t(294);return(r||o||i)&&!a}))[e(241)]((function(t){var r=e;typeof n[t[0]]!==r(275)&&Object.defineProperty(n,t[0],t[1])}))})(lr(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W.generateUUID(),type:e[s(376)],isAlreadyExtended:(r=e[s(331)],o=Je,i=r[o(250)]()[o(182)](),!(0===i[o(221)](i[o(264)]("{")+1,i[o(336)]("}"))[o(182)]()[o(289)])),cacheHash:"",silent:v},t[s(364)]=ir(ir({},t[s(364)]||{}),p||{});var g=t[s(378)],_=g[s(281)],y=g.vertexShader,x=t[s(364)];return t.__csm[s(183)]=t[s(197)](),t[s(265)](_,y,x),t}return e=c,r=[{key:t(200),value:function(){var n=t,e=arguments[n(289)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(364)]||this[n(364)],Object[n(343)](this[n(378)],e);var r=this.__csm,o=r.fragmentShader,i=r[n(325)],a=this[n(364)],c=this[n(197)]();this[n(378)][n(183)]=c,this._generateMaterial(o,i,a)}},{key:t(372),value:function(){var n=t,e={baseMaterial:this[n(378)].baseMaterial,fragmentShader:this.__csm[n(281)],vertexShader:this[n(378)][n(325)],uniforms:this[n(364)],silent:this[n(378)][n(367)],patchMap:this[n(378)][n(231)],cacheKey:this.__csm.cacheKey},r=new(this[n(294)])(e);return Object[n(343)](this,r),r}},{key:t(197),value:function(){var n=t,e=this.__csm,r=e[n(281)],o=e[n(325)],i=this[n(364)],a=[Pr(r),Pr(o),i].filter((function(n){return void 0!==n}));return a[n(289)]>0?An(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(270)]=function(){var n=o;return i[n(378)][n(183)]};var a=function(t){var r=o;try{var a=i[r(211)]();if(n){var c=i._patchShader(Cr(n),t[r(281)],!0);t[r(281)]=a+c}if(e){var s=i[r(219)](Cr(e),t[r(325)]);t[r(325)]=r(194)+s,t[r(325)]=a+t[r(325)]}t[r(364)]=ir(ir({},t[r(364)]),i.uniforms),i[r(364)]=t[r(364)]}catch(u){console[r(352)](u)}};if(this.__csm[o(329)]){var c=this[o(331)];this[o(331)]=function(n,t){c(n,t),a(n)}}else this[o(331)]=a;this[o(337)]=!0}},{key:t(219),value:function(n,e,r){var o=t,i=this,a=e,c=ir(ir({},this[o(369)]()),this[o(378)][o(231)]);Object[o(210)](br)[o(241)]((function(t){var e=o,r=sr(t,2),a=r[0],c=r[1][e(217)]((function(t){return Dr(n,t)}));if(c&&!i[a])throw new Error(e(218)[e(332)](a,e(236))[e(332)](c,'". Shader cannot compile.'))})),Object[o(210)](yr).forEach((function(n){var t=sr(n,2),e=t[0],r=t[1];a=zr(a,e,r)})),Object.keys(c)[o(241)]((function(t){var e=o;Object[e(267)](c[t])[e(241)]((function(r){var o=e,s=_r[t],u=i.__csm.type;if("*"===t||Dr(n,t)){if(!(!s||Array[o(237)](s)&&s[o(375)](u)||"*"===s))throw new Error("CSM: "[o(332)](t,o(195)).concat(u,o(244)));a=zr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(338)+this[o(378)][o(349)][o(187)](/-/g,"_"),h=n[o(187)](/void\s+main\s*\(\s*\)/g,o(227)[o(332)](d,"()")),v=n.includes(o(373)),m=a[o(375)](o(206));return v&&(m&&this[o(378)][o(329)]?(a=a[o(187)](o(313),"\n            ".concat(h,o(346))),s=a,u=o(206),l=o(326)[o(332)](d,o(287)),p=s[(f=Je)(336)](u),a=-1===p?s:s[f(221)](0,p)+l+s[f(221)](p+u.length)):a=a.replace(o(313),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(332)](r?Er:Mr,o(248)).concat(Sr,"\n    \n            ")[o(332)](h,o(189))[o(332)](wr,o(185))[o(332)](r?Ar:Rr,o(220))[o(332)](d,o(226)))),a}},{key:t(211),value:function(){var n=t,e=this[n(378)].type;return e?n(355).concat(e[n(362)](),";\n"):n(341)}},{key:t(369),value:function(){var n=t;return this[n(378)].type===n(302)?Ir:xr}}],i=nr,r&&ur(e.prototype,r),o&&ur(e,o),Object[i(342)](e,i(246),{writable:!1}),c}(z[Je(334)]);function Br(n){function t(n){var e=nr;if(typeof n===e(316))return function(n){}[e(294)](e(285))[e(374)](e(304));1!==(""+n/n)[e(289)]||n%20==0?function(){return!0}.constructor(e(268)+"gger")[e(317)](e(296)):function(){return!1}[e(294)]("debu"+e(318))[e(374)](e(179)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function jr(n,t){const e=Hr();return(jr=function(n,t){return e[n-=461]})(n,t)}const kr=jr;!function(n,t){const e=jr,r=Hr();for(;;)try{if(534870===parseInt(e(491))/1*(parseInt(e(484))/2)+parseInt(e(469))/3*(-parseInt(e(504))/4)+-parseInt(e(467))/5*(parseInt(e(471))/6)+parseInt(e(468))/7+-parseInt(e(492))/8+-parseInt(e(494))/9+parseInt(e(476))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ur=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(483)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){const n=jr,t=new RegExp(n(505)),e=new RegExp(n(489),"i"),r=Gr(n(474));t[n(465)](r+n(488))&&e[n(465)](r+"input")?Gr():r("0")}))()}();const Nr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(483)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nr(void 0,(function(){const n=jr;let t;try{t=Function(n(463)+n(480)+");")()}catch(o){t=window}const e=t.console=t[n(507)]||{},r=["log",n(500),"info",n(496),n(477),n(503),n(501)];for(let i=0;i<r[n(490)];i++){const t=Nr[n(470)][n(472)][n(485)](Nr),o=r[i],a=e[o]||t;t[n(487)]=Nr[n(485)](Nr),t.toString=a[n(493)].bind(a),e[o]=t}}))();const Lr=[kr(497)];function Hr(){const n=["2509520jDIlQE","toString","4356630nsupIe","clearcoatRoughness","error","object","counter","metalness","warn","trace","primitive","table","12YjETuR","function *\\( *\\)","\n\t\t\t","console","while (true) {}","color","roughness","return (function() ","#ff00fc","test","gger","15GvZywA","1579144bcUbal","72798aNeVpV","constructor","1596750jJLYCF","prototype","stateObject","init","\n      ","9460270uvvRFa","exception","setStyle","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",'{}.constructor("return this")( )',"clearcoat","debu","apply","4SAPnSW","bind","string","__proto__","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","516092OhKfMY"];return(Hr=function(){return n})()}const Zr=rn({__name:"index",props:{color:{default:kr(464)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=kr,e=n,r={baseMaterial:$,metalness:e[t(499)],roughness:e.roughness,clearcoat:e[t(481)],clearcoatRoughness:e[t(495)],color:e[t(461)],vertexShader:t(479),fragmentShader:t(506)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(475)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Fr(r);return dn((()=>{const n=t;o[n(461)][n(478)](e[n(461)]),o[n(499)]=e[n(499)],o[n(462)]=e[n(462)],o[n(481)]=e.clearcoat,o.clearcoatRoughness=e.clearcoatRoughness})),(n,e)=>{const r=t;return sn(),un(r(502),{object:en(o)},null,8,Lr)}}});function Gr(n){function t(n){const e=jr;if(typeof n===e(486))return function(n){}[e(470)](e(508))[e(483)](e(498));1!==(""+n/n)[e(490)]||n%20==0?function(){return!0}[e(470)](e(482)+e(466)).call("action"):function(){return!1}[e(470)](e(482)+e(466))[e(483)](e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Vr(n,t){var e=Yr();return(Vr=function(n,t){return e[n-=180]})(n,t)}!function(n,t){for(var e=Vr,r=Yr();;)try{if(101540===-parseInt(e(185))/1+parseInt(e(210))/2*(-parseInt(e(183))/3)+parseInt(e(208))/4*(parseInt(e(181))/5)+-parseInt(e(184))/6+-parseInt(e(204))/7*(-parseInt(e(193))/8)+parseInt(e(201))/9*(-parseInt(e(180))/10)+parseInt(e(192))/11*(parseInt(e(199))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wr(this,(function(){var n=Vr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(207),"i"),r=qr("init");t.test(r+n(197))&&e[n(189)](r+n(216))?qr():r("0")}))()}();var $r=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yr(){var n=["__proto__","info","toString","while (true) {}","input","debu","gger","exception","30QRzOHf","302145TteCRe","trace","281679tIreEl","802104jIbDRG","70499IqkffY","error","table","warn","test",'{}.constructor("return this")( )',"counter","1518WuyEYZ","8ecwscG","stateObject","prototype","log","chain","string","41844wGSqYJ","bind","570114IqLEbU","length","apply","570381imRgeq","action","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8NzApaA","console","4dKwBDt","constructor"];return(Yr=function(){return n})()}function qr(n){function t(n){var e=Vr;if(typeof n===e(198))return function(n){}[e(211)](e(215))[e(203)](e(191));1!==(""+n/n)[e(202)]||n%20==0?function(){return!0}[e(211)]("debugger")[e(206)](e(205)):function(){return!1}.constructor(e(217)+e(218)).apply(e(194)),t(++n)}try{if(n)return t;t(0)}catch(e){}}$r(void 0,(function(){var n,t=Vr;try{n=Function("return (function() "+t(190)+");")()}catch(s){n=window}for(var e=n[t(209)]=n[t(209)]||{},r=[t(196),t(188),t(213),t(186),t(219),t(187),t(182)],o=0;o<r[t(202)];o++){var i=$r[t(211)][t(195)].bind($r),a=r[o],c=e[a]||i;i[t(212)]=$r[t(200)]($r),i[t(214)]=c.toString.bind(c),e[a]=i}}))();export{Ke as C,Zr as _,tt as a,pt as b,Rt as c,Ot as d,Nt as e,te as f,Ge as g,De as h,gt as u};

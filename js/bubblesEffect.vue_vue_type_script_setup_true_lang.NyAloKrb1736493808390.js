import{_ as n,a0 as t,cA as e,C as o,c2 as i,m as r}from"./three.lAfZYOpc1736493808390.js";import{m as a,e as s,b as l}from"./@tresjs.g7tJPOCI1736493808390.js";import{d as u,b as c,a4 as f,a1 as p,o as m,D as b,J as g,aj as v,ak as y,u as d}from"./@vue.-Mz_IXfk1736493808390.js";function h(){const n=['{}.constructor("return this")( )',"test","60AxkIzP","314826oLdQEp","prototype","xRayEffect","4309065lwJbnz","bind","color","uniforms","model","counter","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","position","debu","call","uOpacity","TresShaderMaterial","TresMeshRef","Mesh","toString","799570ocxIdm","2277264DhoqpB","length","error","trace","info","function *\\( *\\)","while (true) {}","__proto__","45KlQWfa","gger","traverse","TresBufferGeometry","dispose","apply","console","value","stateObject","AdditiveBlending","7zvFeAO","TresMesh","constructor","Color","init","return (function() ","geometry","input","10552jnyIzn","glowColor","#84ccff","offsetY","exception","opacity","1448724jaGbzu","chain","1070406ZvZXEk"];return(h=function(){return n})()}const w=z;!function(n,t){const e=z,o=h();for(;;)try{if(862538===parseInt(e(445))/1+-parseInt(e(426))/2+parseInt(e(429))/3+parseInt(e(472))/4*(parseInt(e(454))/5)+-parseInt(e(478))/6+parseInt(e(464))/7*(-parseInt(e(446))/8)+parseInt(e(480))/9*(-parseInt(e(483))/10))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(459)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function z(n,t){const e=h();return(z=function(n,t){return e[n-=426]})(n,t)}!function(){_(this,(function(){const n=z,t=new RegExp(n(451)),e=new RegExp(n(436),"i"),o=T(n(468));t.test(o+n(479))&&e[n(482)](o+n(471))?T():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(459)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=z;let t;try{t=Function(n(469)+n(481)+");")()}catch(i){t=window}const e=t.console=t[n(460)]||{},o=["log","warn",n(450),n(448),n(476),"table",n(449)];for(let r=0;r<o[n(447)];r++){const t=x[n(466)][n(427)][n(430)](x),i=o[r],a=e[i]||t;t[n(453)]=x[n(430)](x),t[n(444)]=a.toString[n(430)](a),e[i]=t}}))();const P=u({__name:w(428),props:{model:{},color:{default:w(474)},opacity:{default:1}},async setup(i){const r=w;let u,d;const h=i,_=c(),z=[];h[r(433)][r(456)]((t=>{const e=r;t instanceof n[e(443)]&&(t[e(470)].verticesNeedUpdate=!0,z.push(t.geometry))}));const x=([u,d]=f((()=>l({map:"./plugins/medical/image/brainXRayLight.png"}))),u=await u,d(),u),P={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(n[r(467)])(h[r(431)])},lightningTexture:{type:"t",value:x.map},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:h[r(477)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:t,blending:n[r(463)],depthWrite:!1};P.uniforms[r(475)][r(461)]=Math.sin(5);const{camera:T}=a(),{onLoop:S}=s();return S((({delta:n})=>{const t=r;T[t(461)][t(437)]&&_[t(461)]&&(P.uniforms.uTime[t(461)]+=n)})),p((()=>{const n=r;_[n(461)]&&(_[n(461)][n(470)][n(458)](),_[n(461)][n(470)]=e(z)),h[n(431)]&&(P.uniforms[n(473)][n(461)]=new o(h[n(431)])),h[n(477)]&&(P[n(432)][n(440)].value=h[n(477)])})),(n,t)=>{const e=r;return m(),b(e(465),{ref_key:e(442),ref:_},[t[0]||(t[0]=g(e(457),null,null,-1)),g(e(441),v(y(P)),null,16)],512)}}});function T(n){function t(n){const e=z;if(typeof n===e(435))return function(n){}[e(466)](e(452))[e(459)](e(434));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(438)+e(455))[e(439)]("action"):function(){return!1}[e(466)](e(438)+e(455)).apply(e(462)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function S(){const n=["size","stateObject","BufferGeometryRef","#FFF","toString","array","1007151jvOZpb","uSlowTime","info","string","computeBoundingSphere","uTime","attributes","3508264WMfpja","console","function *\\( *\\)","debu","MathUtils","randFloat","traverse","mergeGeometries","1772410hnyclq","TresPoints","episodic","Float32BufferAttribute","4476JsGcHb","analitic","opacity","uOpacity","log","14xupjcR","constructor","prototype","2539992dRLAbn","test","value","warn","color","position","brainstem","input","gger","material","bubblesEffect","bridge","table","apply","10orJnOW","name","aDelayDuration","9155799JEnXRO","184341HlrqEI","counter","glowColor","error","while (true) {}","uniforms","Color","__proto__","semantic","return (function() ","Mesh","bind","exception","AdditiveBlending","TresShaderMaterial","length","TresMeshRef","DoubleSide","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","randInt","afective","TresBufferGeometry","2335fiASvP","map","trace","call","setAttribute","geometry","push",'{}.constructor("return this")( )'];return(S=function(){return n})()}function I(n,t){const e=S();return(I=function(n,t){return e[n-=292]})(n,t)}const C=I;!function(n,t){const e=I,o=S();for(;;)try{if(600603===parseInt(e(357))/1+parseInt(e(327))/2+parseInt(e(312))/3+parseInt(e(331))/4*(-parseInt(e(298))/5)+-parseInt(e(339))/6+-parseInt(e(336))/7*(parseInt(e(319))/8)+parseInt(e(356))/9*(parseInt(e(353))/10))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[I(352)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){M(this,(function(){const n=I,t=new RegExp(n(321)),e=new RegExp(n(294),"i"),o=B(n(293));t[n(340)](o+"chain")&&e[n(340)](o+n(346))?B():o("0")}))()}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[I(352)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();F(void 0,(function(){const n=I;let t;try{t=Function(n(366)+n(305)+");")()}catch(i){t=window}const e=t[n(320)]=t[n(320)]||{},o=[n(335),n(342),n(314),n(360),n(369),n(351),n(300)];for(let r=0;r<o[n(372)];r++){const t=F[n(337)][n(338)][n(368)](F),i=o[r],a=e[i]||t;t[n(364)]=F[n(368)](F),t[n(310)]=a[n(310)][n(368)](a),e[i]=t}}))();const j=u({__name:C(349),props:{model:{},color:{default:C(309)},opacity:{default:1}},setup(t){const e=C,o=t,a=[e(296),e(365),e(329),"process","amigdala",e(345),e(350),"cerebellum",e(332)],l={};o.model[e(325)]((t=>{const o=e;t instanceof n[o(367)]&&a[o(299)]((n=>{const e=o;if(t[e(354)].includes(n)){if(l[n]){const o=[l[n],t.geometry];return l[n]=i[e(326)](o),l}return l[n]=t[e(303)]}return[]}))}));const u=c(),f=new r({uniforms:{glowColor:{type:"c",value:new(n[e(363)])(o[e(343)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:o[e(333)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:n[e(370)],side:n[e(292)],depthTest:!1,vertexColors:!1,transparent:!0});p((()=>{u.value&&(()=>{const t=e,o=[],i=[],r=[],s=[];for(let e=0;e<2e4-3*a[t(372)];e+=1){const u=n[t(323)][t(295)](0,a.length-1),c=a[u],f=l[c][t(318)][t(344)][t(311)][3*e+0]||0,p=l[c][t(318)][t(344)].array[3*e+1]||0,m=l[c].attributes[t(344)].array[3*e+2]||0;if(i[t(304)](f,p,m),o[e]=n[t(323)][t(324)](10,20),e%100==0){const e=n[t(323)].randInt(100,250)+p;s[t(304)](f,e,m,1)}else s[t(304)](f,p,m,0);r[2*e+0]=n[t(323)].randFloat(.5,1.5),r[2*e+1]=2.5}u.value[t(302)](t(355),new(n[t(330)])(r,2)),u[t(341)][t(302)]("bubbles",new(n[t(330)])(s,4)),u[t(341)][t(302)](t(344),new(n[t(330)])(i,3)),u[t(341)].setAttribute("color",new(n[t(330)])([],3)),u[t(341)].setAttribute(t(306),new(n[t(330)])(o,1)),u.value[t(316)]()})()}));const h=c(),{onLoop:w}=s();return w((({delta:t})=>{const i=e;h.value&&(h[i(341)][i(348)][i(362)][i(317)][i(341)]+=.05,h[i(341)][i(348)][i(362)][i(313)].value+=1/400),o[i(343)]&&(f.uniforms[i(359)].value=new(n[i(363)])(o[i(343)])),o[i(333)]&&(f[i(362)][i(334)].value=o[i(333)])})),(n,t)=>{const o=e;return m(),b(o(328),{ref_key:o(373),ref:h},[g(o(297),{ref_key:o(308),ref:u},null,512),g(o(371),v(y(d(f))),null,16)],512)}}});function B(n){function t(n){const e=I;if(typeof n===e(315))return function(n){}.constructor(e(361))[e(352)](e(358));1!==(""+n/n)[e(372)]||n%20==0?function(){return!0}[e(337)](e(322)+e(347))[e(301)]("action"):function(){return!1}[e(337)](e(322)+e(347))[e(352)](e(307)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{P as _,j as a};

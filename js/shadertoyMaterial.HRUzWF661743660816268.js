import{e,a as t,o as n}from"./@tresjs.zc7faK4J1743660816268.js";import{ah as a,ab as r,f as o,V as i,aD as s,m as l,cs as u,l as c}from"./three.2wx8FU0g1743660816268.js";import{z as f}from"./three-custom-shader-material.uMc5A1EX1743660816268.js";import{P as p}from"./tweakpane.ivGeiIdz1743660816268.js";import{a as m}from"./axios.FtfblEUV1743660816268.js";import{d as v,r as h,a4 as d,q as g,e as w,o as y,f as C,g as b,m as j,N as x,j as I,aj as _,ak as T,u as D}from"./@vue.B5PFBfKs1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";function U(e,t){const n=R();return U=function(e,t){return n[e-=107]},U(e,t)}const A=U;!function(e,t){const n=U,a=R();for(;;)try{if(423896===parseInt(n(134))/1+-parseInt(n(132))/2+-parseInt(n(122))/3*(parseInt(n(136))/4)+parseInt(n(138))/5+parseInt(n(140))/6*(parseInt(n(120))/7)+-parseInt(n(143))/8+-parseInt(n(147))/9)break;a.push(a.shift())}catch(r){a.push(a.shift())}}();const E=function(){let e=!0;return function(t,n){const a=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,a}}();function R(){const e=["\t\n            varying vec2 vUv;\n            void main() {\n                csm_Position = position * vec3(1.0);\n                vUv = uv;\n            } ","apply","material","2214981VFIIjI","input","console","varying vec2 vUv;\n","stateObject","replace","call","gger","constructor","return (function() ","toString","info","vUv","string","uniform sampler2D  utexture;\n","umouse","uniforms","chain","table","trace","exception","125783DBqUNy","warn","1707CeEqCE","replaceVariable","action","split","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","uniform vec2 uresolution;\n","error","length","1267306Qrhgqq","csm_DiffuseColor","554311EIXbEC","while (true) {}","3544JRQpIK","bind","3886295gfAfUF","uniform float utime;\n","264qibsCW","test","log","2515312bQnkFg"];return(R=function(){return e})()}!function(){E(this,(function(){const e=U,t=new RegExp(e(128)),n=new RegExp(e(127),"i"),a=G("init");t.test(a+e(116))&&n[e(141)](a+e(148))?G():a("0")}))()}();const k=function(){let e=!0;return function(t,n){const a=e?function(){if(n){const e=n[U(145)](t,arguments);return n=null,e}}:function(){};return e=!1,a}}();k(void 0,(function(){const e=U,t=function(){const e=U;let t;try{t=Function(e(108)+'{}.constructor("return this")( ));')()}catch(n){t=window}return t}(),n=t[e(149)]=t.console||{},a=[e(142),e(121),e(110),e(130),e(119),e(117),e(118)];for(let r=0;r<a[e(131)];r++){const t=k[e(107)].prototype.bind(k),o=a[r],i=n[o]||t;t[e(126)]=k[e(137)](k),t[e(109)]=i[e(109)][e(137)](i),n[o]=t}}))();class q{constructor(e,t){const n=U,o=q.replaceVariable(e),i=new f({baseMaterial:a,vertexShader:n(144),fragmentShader:o,side:r,uniforms:t[n(146)][n(115)]});this[n(146)]=i,console[n(142)](this.material)}static[A(123)](e){const t=A;e=t(150)+e;if(/iTime|iTimeDelta/g[t(141)](e)){let n=e[t(125)]("varying vec2 vUv;\n");e=(e=t(150)+t(139)+n[1])[t(152)](/iTime|iTimeDelta/g,"utime")}if(/iResolution\.[a-zA-Z_]+/g.test(e)){let n=e[t(125)](t(150));e=(e=(e="varying vec2 vUv;\n"+t(129)+n[1])[t(152)](/iResolution\.[a-zA-Z_]+/g,"1."))[t(152)](/iResolution/g,"1.")}if(/iChannel0|iChannel1|iChannel2|iChannel3/g[t(141)](e)){let n=e.split(t(150));e=(e="varying vec2 vUv;\n"+t(113)+n[1]).replace(/iChannel0|iChannel1|iChannel2|iChannel3/g,"utexture")}return e[t(152)](/iMouse/g,t(114)),e[t(152)](/void mainImage\( out vec4 fragColor, in vec2 fragCoord \)/g,"void main()").replace(/fragColor/g,t(133))[t(152)](/fragCoord/g,t(111))}}function G(e){function t(e){const n=U;if(typeof e===n(112))return function(e){}[n(107)](n(135))[n(145)]("counter");1!==(""+e/e)[n(131)]||e%20==0?function(){return!0}[n(107)]("debu"+n(154))[n(153)](n(124)):function(){return!1}[n(107)]("debu"+n(154))[n(145)](n(151)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const S={ref:"perspectiveCameraRef",position:[300,250,-122],fov:45,near:1,far:1e4},z=["object","side"],B=v({__name:"shadertoyMaterial",async setup(a){let f,v;const U={clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0},A={autoRotate:!0,enableDamping:!0},E=new p({title:"参数"}),R=h({addres:"https://www.shadertoy.com/view/mtyGWy",shadervalue:""});let k=([f,v]=d((()=>t(["./plugins/earthSample/image/earthA/moon_ring.png"]))),f=await f,v(),f),G=new o,B=h({material:{uniforms:{utime:{value:0},uresolution:{value:new i(40,40)},utexture:{value:k}}}}),L=new s(100,100,100);E.addBlade({view:"list",label:"shadertoy在线地址",parse:e=>String(e),options:[{text:"1",value:"https://www.shadertoy.com/view/mtyGWy"},{text:"2",value:"https://www.shadertoy.com/view/tlVGDt"},{text:"3",value:"https://www.shadertoy.com/view/ttKGDt"}],value:"https://www.shadertoy.com/view/mtyGWy"}).on("change",(e=>{R.addres=e.value,P(L)}));let V=new s(100,100,100),F=new l(100,100),H=new u(100,10,100,16);E.addBlade({view:"list",label:"几何体",options:[{text:"BOX",value:V},{text:"Plane",value:F},{text:"TorusKnot",value:H}],value:V}).on("change",(e=>{L=e.value,P(L)}));const P=e=>{let t="https://www.shadertoy.com/api/v1/shaders/"+R.addres.split("https://www.shadertoy.com/view/")[1]+"?key=BdHlhH";m.get(t).then((function(t){t.data.Error&&alert(t.data.Error),R.shadervalue=t.data.Shader.renderpass[0].code;let n=new q(R.shadervalue,B);G.clear();let a=new c(e,n.material);G.add(a),W(G,e)})).catch((function(e){console.log(e)}))},W=(e,t)=>{e.children[0].geometry.dispose(),e.children[0].geometry=t},{onLoop:Z}=e();return Z((({delta:e})=>{B.material.uniforms.utime.value+=e})),g((()=>{let e=new s(100,100,100);P(e)})),(e,t)=>{const a=w("TresCanvas");return y(),C(a,j(U,{"window-size":""}),{default:b((()=>[x("TresPerspectiveCamera",S,null,512),I(D(n),_(T(A)),null,16),t[0]||(t[0]=x("TresAmbientLight",{color:"#ffffff"},null,-1)),t[1]||(t[1]=x("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),x("primitive",{object:D(G),side:D(r)},null,8,z),t[2]||(t[2]=x("TresAxesHelper",{args:[1e3],position:[0,19,0]},null,-1)),t[3]||(t[3]=x("TresGridHelper",{args:[6e3,100],position:[0,19,0]},null,-1))])),_:1},16)}}});export{B as default};

import{_ as n,ai as t}from"./three.sBrYSCgq1741007821308.js";import{o as r,J as o,f as e}from"./@tresjs.u6hJLBm41741007821308.js";import{P as i}from"./tweakpane.yDiyAAkA1741007821308.js";import{d as s,a2 as c,o as u,H as a,N as l,aj as f,ak as d,r as v,f as g,g as p,j as h,u as m,al as C,m as x}from"./@vue.NRI7TcgI1741007821308.js";import"./postprocessing.rsQjznIU1741007821308.js";import"./@vueuse.jd1Cg91M1741007821308.js";const y=T;!function(n,t){const r=T,o=W();for(;;)try{if(171497===-parseInt(r(488))/1*(-parseInt(r(495))/2)+-parseInt(r(481))/3+parseInt(r(511))/4*(parseInt(r(485))/5)+-parseInt(r(515))/6*(parseInt(r(469))/7)+-parseInt(r(526))/8*(-parseInt(r(489))/9)+parseInt(r(494))/10*(parseInt(r(484))/11)+-parseInt(r(479))/12*(-parseInt(r(501))/13))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const w=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[T(493)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){w(this,(function(){const n=T,t=new RegExp(n(520)),r=new RegExp(n(498),"i"),o=j(n(499));t.test(o+n(521))&&r[n(500)](o+n(522))?j():o("0")}))()}();const I=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[T(493)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();I(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(497)+n(467)+");")()}catch(r){t=window}return t}(),r=t[n(505)]=t.console||{},o=[n(478),"warn",n(504),"error","exception","table",n(516)];for(let e=0;e<o[n(507)];e++){const t=I[n(496)][n(486)][n(487)](I),i=o[e],s=r[i]||t;t.__proto__=I[n(487)](I),t[n(468)]=s.toString[n(487)](s),r[i]=t}}))();const b=[y(527)];function T(n,t){const r=W();return(T=function(n,t){return r[n-=467]})(n,t)}function W(){const n=["prototype","bind","2127EWgJfJ","1899BRiGkp","action","gridThickness","#c4d6ff","apply","70igelpN","270NGOkpn","constructor","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","test","171847TzhBpq","counter","uFloorColor","info","console","TresPlaneGeometry","length","value","set","DoubleSide","16MTylrj","uGridThickness","string","#ffffff","1402350UmmnSo","trace","gridColor","TresShaderMaterial","uniforms","function *\\( *\\)","chain","input","gger","crossThickness","crossColor","4952lhPhMw","rotate-x","uCrossColor",'{}.constructor("return this")( )',"toString","7HdRSDY","uGridColor","uCross","while (true) {}","call","TresMesh","floorColor","Color","#7a91df","log","84CGGxYS","stateObject","627468ziBXkS","gridFloor","debu","35079qnaOjW","102210ZvGmNL"];return(W=function(){return n})()}const k=s({__name:y(482),props:{gridColor:{default:y(492)},gridThickness:{default:.02},crossColor:{default:y(477)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:y(514)}},setup(t){const r=y,o=t,e={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[r(510)],transparent:!0,uniforms:{uFloorColor:{value:new(n[r(476)])(o[r(475)])},uGridThickness:{value:o[r(491)]},uGridColor:{value:new(n[r(476)])(o[r(517)])},uCrossThickness:{value:o[r(524)]},uCross:{value:o.uCross},uCrossColor:{value:new(n[r(476)])(o[r(525)])}}};return c((()=>{const n=r;e[n(519)][n(503)][n(508)][n(509)](o[n(475)]),e[n(519)][n(470)][n(508)][n(509)](o[n(517)]),e[n(519)][n(528)].value[n(509)](o[n(525)]),e[n(519)][n(512)][n(508)]=o[n(491)],e[n(519)].uCrossThickness[n(508)]=o[n(524)],e[n(519)][n(471)][n(508)]=o[n(471)]})),(n,t)=>{const o=r;return u(),a(o(474),{"rotate-x":-Math.PI/2},[t[0]||(t[0]=l(o(506),{args:[10,10,32,32]},null,-1)),l(o(518),f(d(e)),null,16)],8,b)}}});function j(n){function t(n){const r=T;if(typeof n===r(513))return function(n){}[r(496)](r(472))[r(493)](r(502));1!==(""+n/n)[r(507)]||n%20==0?function(){return!0}[r(496)](r(483)+r(523))[r(473)](r(490)):function(){return!1}[r(496)]("debu"+r(523))[r(493)](r(480)),t(++n)}try{if(n)return t;t(0)}catch(r){}}!function(n,t){const r=_,o=A();for(;;)try{if(266642===-parseInt(r(190))/1*(parseInt(r(187))/2)+-parseInt(r(174))/3*(parseInt(r(200))/4)+parseInt(r(209))/5+parseInt(r(202))/6*(parseInt(r(185))/7)+-parseInt(r(183))/8*(-parseInt(r(212))/9)+parseInt(r(193))/10+-parseInt(r(194))/11)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const D=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r.apply(t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function _(n,t){const r=A();return(_=function(n,t){return r[n-=162]})(n,t)}!function(){D(this,(function(){const n=_,t=new RegExp(n(213)),r=new RegExp(n(167),"i"),o=S("init");t.test(o+"chain")&&r.test(o+n(179))?S():o("0")}))()}();const F=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[_(217)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function A(){const n=["constructor","log","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","neg-y.jpg","gger","gridThickness","addBinding","#000000","TresAmbientLight","15nivcvG","地板颜色","十字厚度","#ffffff","info","input","exception","length","TresTorusKnotGeometry","280Cmernt","网格厚度","2890559jBUhDM","crossThickness","2mlzCQq","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","TresPerspectiveCamera","146314wNxhYE","floorColor","#ef57ff","4753470IFnpxo","9436130TDIjdX","bind","pos-y.jpg",'{}.constructor("return this")( )',"trace","十字颜色","37784KxbVaW","neg-x.jpg","6gmwKRi","TresMesh","gridColor","uCross","call","TresDirectionalLight","TresMeshStandardMaterial","625110BKJplb","toString","console","78354vcVuhB","function *\\( *\\)","debu","error","#ff33ff","apply","__proto__","while (true) {}","return (function() ","pos-z.jpg"];return(A=function(){return n})()}F(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function(n(162)+n(197)+");")()}catch(r){t=window}return t}(),r=t[n(211)]=t[n(211)]||{},o=[n(165),"warn",n(178),n(215),n(180),"table",n(198)];for(let e=0;e<o[n(181)];e++){const t=F[n(164)].prototype[n(195)](F),i=o[e],s=r[i]||t;t[n(218)]=F[n(195)](F),t[n(210)]=s.toString[n(195)](s),r[i]=t}}))();const G=s({__name:"gridFloor",setup(n){const s=_,c=v({alpha:!0,toneMapping:t,windowSize:!0,clearColor:3355443}),a=v({enableDamping:!0,autoRotate:!1}),y=v({gridColor:s(177),crossColor:s(192),floorColor:s(172),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new i;return w.addBinding(y,s(204),{label:"网格颜色"}),w[s(171)](y,s(170),{label:s(184),min:.01,max:1,step:.01}),w[s(171)](y,"crossColor",{label:s(199)}),w[s(171)](y,s(186),{label:s(176),min:.01,max:1,step:.01}),w[s(171)](y,s(205),{label:"十字大小",min:.01,max:1,step:.01}),w.addBinding(y,s(191),{label:s(175)}),(n,t)=>{const i=s;return u(),g(m(e),x(c,{"window-size":""}),{default:p((()=>[t[0]||(t[0]=l(i(189),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),h(m(r),f(d(a)),null,16),t[1]||(t[1]=l(i(173),{intensity:.5},null,-1)),t[2]||(t[2]=l(i(207),{position:[15,15,15],intensity:1},null,-1)),t[3]||(t[3]=l(i(203),{position:[0,.5,0],scale:.2},[l(i(182),{args:[1,.35,100,32]}),l(i(208),{color:i(216),roughness:0,metalness:1})],-1)),h(k,f(d(y)),null,16),(u(),g(C,null,{default:p((()=>[h(m(o),{files:["pos-x.jpg",i(201),i(196),i(168),i(163),"neg-z.jpg"],path:i(188)})])),_:1}))])),_:1},16)}}});function S(n){function t(n){const r=_;if("string"==typeof n)return function(n){}[r(164)](r(219))[r(217)]("counter");1!==(""+n/n)[r(181)]||n%20==0?function(){return!0}.constructor(r(214)+"gger")[r(206)](r(166)):function(){return!1}[r(164)](r(214)+r(169)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{G as default};

import{importShared as r}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_l as v,Kk as x}from"./index.DTe2qqjO1767148983502.js";import{Pane as S}from"./tweakpane.BQRZXf8M1767148983502.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Cxj_Ip691767148983502.js";import{_sfc_main as k}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DYMkkQ781767148983502.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.T7UkXoyg1767148983502.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.BVQWYa0i1767148983502.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.BCd7Uxt-1767148983502.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.x_N2tft71767148983502.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Xg1Eqw4f1767148983502.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.DBVFezcY1767148983502.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.BPVumalx1767148983502.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.BOdU7iQo1767148983502.js";import"./particleBase.vue_vue_type_script_setup_true_lang.CIf_5jma1767148983502.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.BmWDhTNl1767148983502.js";import{useTexture as P}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.B7dQ_CiZ1767148983502.js";import"./index.vue_vue_type_script_setup_true_lang.CjsHShHS1767148983502.js";import{getlinePoints as y}from"./utils.Dy5vlvhc1767148983502.js";const{withAsyncContext:N,defineComponent:T}=await r("vue"),{unref:f,createElementVNode:B,openBlock:E,createElementBlock:M}=await r("vue"),L=["args"],R=["blending","map","side","alphaMap","color"],{watch:V}=await r("vue"),s=await r("three"),C=T({__name:"streamLine",props:{color:{default:"#2bc4dc"},radius:{default:.2},speed:{default:1},radialSegments:{default:6},tubularSegments:{default:64},closed:{type:Boolean,default:!1},clockwise:{type:Boolean,default:!0},fewNum:{default:1},linesList:{default:()=>[[15,0,15],[15,0,-15],[-15,0,-15],[-15,0,10],[15,0,15]]}},async setup(w){let a,i;const t=w,e=([a,i]=N(()=>P("./plugins/digitalCity/image/line2.png")),a=await a,i(),a);e.needsUpdate=!0,e.wrapS=e.wrapT=s.RepeatWrapping,e.repeat.set(t.fewNum,1),e.rotation=t.clockwise?0:Math.PI,e.generateMipmaps=!1,e.magFilter=s.NearestFilter;let n=[];t.linesList.forEach(o=>{n.push(new s.Vector3().fromArray(o))});const u=new s.CatmullRomCurve3(n),{onBeforeRender:h}=v();return h(()=>{e.offset.x+=.002*t.speed}),V(()=>[t.clockwise,t.fewNum],([o,l])=>{e.rotation=o?0:Math.PI,e.repeat.set(l,1)}),(o,l)=>(E(),M("TresMesh",null,[B("TresTubeGeometry",{args:[f(u),t.tubularSegments,t.radius,t.radialSegments,t.closed]},null,8,L),B("TresMeshBasicMaterial",{blending:s.AdditiveBlending,map:f(e),side:s.DoubleSide,alphaMap:f(e),transparent:!0,color:t.color},null,8,R)]))}}),{withAsyncContext:$,defineComponent:A}=await r("vue"),{createElementVNode:z,unref:_,createVNode:p,normalizeProps:G,guardReactiveProps:I,Suspense:g,withCtx:c,openBlock:m,createBlock:d,mergeProps:j,resolveComponent:D}=await r("vue"),{reactive:b}=await r("vue"),se=A({__name:"streamLines",async setup(w){let a,i;const t=b({reflectivity:.1,showGridHelper:!1,scale:5}),e=b({color:"#bd01ff",radius:.2,speed:1,tubularSegments:64,radialSegments:6,closed:!1,clockwise:!1,fewNum:1,linesList:[[15,0,15],[15,0,-15],[-15,0,-15],[-15,0,10],[13,0,15]]}),n=new S;n.addBinding(e,"color",{label:"流光颜色"}),n.addBinding(e,"radius",{label:"管道半径",min:.01,max:1,step:.01}),n.addBinding(e,"speed",{label:"跑动速度",min:.1,max:10,step:.1}),n.addBinding(e,"tubularSegments",{label:"管道路径平滑",min:1,max:100,step:1}),n.addBinding(e,"radialSegments",{label:"管道壁圆润",min:1,max:20,step:1}),n.addBinding(e,"closed",{label:"闭合管道"}),n.addBinding(e,"clockwise",{label:"顺时针流动"}),n.addBinding(e,"fewNum",{label:"流线数量",min:1,max:10,step:1});const u=([a,i]=$(()=>y("./plugins/simpleGIS/json/320000_full.json")),a=await a,i(),a);return(h,o)=>{const l=D("TresCanvas");return m(),d(l,{clearColor:"#201919","window-size":""},{default:c(()=>[o[0]||(o[0]=z("TresPerspectiveCamera",{position:[25,25,25],fov:45,near:.1,far:1e4},null,-1)),p(_(x),{enableDamping:"",autoRotate:""}),(m(),d(g,null,{default:c(()=>[p(C,G(I(e)),null,16)]),_:1})),(m(),d(g,null,{default:c(()=>[p(C,{linesList:_(u),position:[0,0,-4]},null,8,["linesList"])]),_:1})),(m(),d(g,null,{default:c(()=>[p(_(k),j({position:[0,-.5,0]},t),null,16)]),_:1}))]),_:1})}}});export{se as default};

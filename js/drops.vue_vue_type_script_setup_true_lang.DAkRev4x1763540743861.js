import{l as o}from"./lightNoise.Bwk8SPgh1763540743861.js";import{d as n,H as e,o as s,u as t}from"./@vue.Co_gxueH1763540743861.js";import{b as r,j as a,b0 as l,b1 as i}from"./three.rXKzP9fQ1763540743861.js";const m=["material","geometry"],f=n({__name:"drops",props:{globalUniforms:{}},setup(n){const f=n,p=[],d=[];for(let o=0;o<2e4;o++){const o=r.randFloatSpread(35),n=r.randFloat(-5,10),e=r.randFloatSpread(35),s=r.randFloat(.25,.5);p.push(o,n,e,o,n,e),d.push(0,s,1,s)}const v=new a;v.setAttribute("position",new l(p,3)),v.setAttribute("gEnds",new l(d,2));const c=new i({color:8930440,transparent:!0,onBeforeCompile:n=>{n.uniforms.time=f.globalUniforms.time,n.uniforms.noiseTex=f.globalUniforms.noise,n.uniforms.globalBloom=f.globalUniforms.globalBloom,n.vertexShader=`\n      uniform float time;\n      uniform sampler2D noiseTex;\n      attribute vec2 gEnds;\n      varying float vGEnds;\n      varying float vH;\n\n      ${n.vertexShader}\n    `.replace("#include <begin_vertex>","#include <begin_vertex>\n        \n      vec3 pos = position;\n      \n      vec2 nUv = (vec2(pos.x, -pos.z) - vec2(-25.)) / 50.;\n      float h = texture2D(noiseTex, nUv).g;\n      h = (h - 0.5) * 4.;\n      \n      pos.y = -mod(10. - (pos.y - time * 5.), 15.) + 10.;\n      h = pos.y - h;\n      pos.y += gEnds.x * gEnds.y;\n      transformed = pos;\n      vGEnds = gEnds.x;\n      vH = smoothstep(3., 0., h);\n      "),n.fragmentShader=`\n      uniform float time;\n      uniform float globalBloom;\n      varying float vGEnds;\n      varying float vH;\n      ${o}\n      ${n.fragmentShader}\n    `.replace("vec4 diffuseColor = vec4( diffuse, opacity );","\n      float op = 1. - vGEnds;\n      op = pow(op, 3.);\n      float h = (pow(vH, 3.) * 0.5 + 0.5);\n      vec3 col = diffuse * h; // lighter close to the surface\n      col *= 1. + smoothstep(0.99, 1., h); // sparkle at the surface\n      if (globalBloom > 0.5) {\n        //col *= 0.5;\n      }\n      vec4 diffuseColor = vec4( col, op );\n      \n      ")}});return(o,n)=>(s(),e("TresLineSegments",{material:t(c),geometry:t(v)},null,8,m))}});export{f as _};

import{_ as t,cx as n,V as e,ak as o}from"./three.3esZ7Hzr1726652192279.js";import{P as r}from"./tweakpane.yHWGBmom1726652192279.js";import{p as s,U as i}from"./@tresjs.UGbbWZf51726652192279.js";import{P as a,b as c,c as u,M as p,T as l,a as f,d as m}from"./index.NhO6A9SV1726652192279.js";import{d as h,a3 as g,w as d,o as j,E as b,u as w,Y as x,r as y,e as I,j as v,g as M,f as _,al as C,m as z,F as S}from"./@vue.JNsx1iN61726652192279.js";import{_ as k}from"./raycasterEvent.6gMcnTKt1726652192279.js";import{a as B}from"./utils.1aQf3kxY1726652192279.js";import"./@vueuse.OdTlFP151726652192279.js";import"./@mapbox.Vx_c0JiQ1726652192279.js";import"./@amap.-LPMSFvH1726652192279.js";import"./three-mesh-bvh.z6NGMxhR1726652192279.js";import"./three-custom-shader-material.1UWxr2-p1726652192279.js";import"./object-hash.659hUnW-1726652192279.js";import"./jszip.uBbFte4W1726652192279.js";import"./glsl-tokenizer.lP_hSvTG1726652192279.js";import"./glsl-token-string.0mUiHG4f1726652192279.js";import"./glsl-token-functions.lY9NGLSv1726652192279.js";import"./@fesjs.SPWJBM2r1726652192279.js";import"./vue-router.xtoXuUHZ1726652192279.js";import"./lodash-es.kYt-_xTG1726652192279.js";import"./@qlin.yHhFDldE1726652192279.js";import"./pinia.wYsVO5dS1726652192279.js";import"./@floating-ui.BPbuo5Gx1726652192279.js";import"./@juggle.7yjBMqoW1726652192279.js";import"./@tweenjs.J1BAvmPw1726652192279.js";import"./utils.PP2M0YIY1726652192279.js";import"./d3-geo.TgLRV6rk1726652192279.js";import"./d3-array.AhNJy1f41726652192279.js";import"./http.fgGmV5gr1726652192279.js";import"./axios.Ng308AU61726652192279.js";import"./color.NF5_PDy71726652192279.js";import"./color-string.k4Kkxt9P1726652192279.js";import"./color-name.UtNzYDEd1726652192279.js";import"./simple-swizzle.3sIa_Ou41726652192279.js";import"./is-arrayish.Ix_xU4qG1726652192279.js";import"./color-convert.K6qs9kDc1726652192279.js";import"./lodash.e26s0Nqy1726652192279.js";const E=A;!function(t,n){const e=A,o=V();for(;;)try{if(709938===parseInt(e(152))/1*(-parseInt(e(146))/2)+parseInt(e(142))/3+-parseInt(e(139))/4*(parseInt(e(158))/5)+parseInt(e(165))/6+-parseInt(e(173))/7*(parseInt(e(156))/8)+parseInt(e(107))/9*(parseInt(e(166))/10)+parseInt(e(174))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const R=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(110)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){R(this,(function(){const t=A,n=new RegExp(t(121)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=T("init");n[t(136)](o+"chain")&&e[t(136)](o+t(170))?T():o("0")}))()}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(110)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function V(){const t=["genContrast","apply","position","bbox","opposite","string","monochrome","target","update","genBright","mapCenter","isMonochrome","function *\\( *\\)","while (true) {}","primitive","gger","filter","source","table","flatShading","debu","constructor","__proto__","domElement","action","Color","enableDamping","test","abs","length","904THhLEr","value","Vector3","3025956rbrLAg","coordType","warn","far","956682pvjXNS","trace","log","showBoundingBox","PerspectiveCamera","https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}","1WhZgyk","updateProjectionMatrix","stateObject","provider","5944HqslVM","lookAt","7895BEhpEE","genSaturation","toString","rotation","innerWidth","maxZoom","return (function() ","1027848PDtFMY","306700uuVKES","error","minDistance","set","input","#fff","innerHeight","9751HrOzde","7642382UdeDPV","dampingFactor","bind","counter","console","object","207OypFtm","position0"];return(V=function(){return t})()}P(void 0,(function(){const t=A;let n;try{n=Function(t(164)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n.console=n[t(105)]||{},o=[t(148),t(144),"info",t(167),"exception",t(127),t(147)];for(let s=0;s<o[t(138)];s++){const n=P[t(130)].prototype[t(103)](P),r=o[s],i=e[r]||n;n[t(131)]=P[t(103)](P),n.toString=i[t(160)][t(103)](i),e[r]=n}}))();const Z=[E(106),E(161)];function A(t,n){const e=V();return(A=function(t,n){return e[t-=102]})(t,n)}const F=h({__name:"tileMapMesh",props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},opposite:{type:Boolean,default:!1},genBright:{default:1},genContrast:{default:1},genSaturation:{default:1},monochrome:{default:E(171)},isMonochrome:{type:Boolean,default:!1},mapCenter:{},tweenInstance:{default:null}},setup(e,{expose:o}){const r=E,m=e,{renderer:h,scene:x}=s();(new a)[r(143)]=c;const y=new u;y[r(126)]="https://api.maptiler.com/tiles/terrain-rgb-v2/[z]/[x]/[y].webp?key=L55MtSxL94Yb4hQeWewp",y[r(143)]=c;const I=new p;I[r(126)]=r(151),I.showTileNo=!1,I.useWorker=!0;const v=new l(y,I);if(v[r(149)]=!1,v.wireframe=!1,v[r(128)]=!1,v.useStandardMaterial=!1,v.filter={opposite:m[r(113)],monochrome:m[r(120)]?{r:.299,g:.587,b:.114}:null,genBright:m[r(118)],genContrast:m.genContrast,genSaturation:m.genSaturation},m.monochrome){let n=new(t[r(134)])(m[r(115)]);v[r(125)]&&(v[r(125)].monochrome={r:n.r,g:n.g,b:n.b})}const M=new f;M[r(155)]=v,M.bbox=m[r(112)],M[r(163)]=m[r(163)];const _=new(t[r(150)])(60,window[r(162)]/window[r(172)],1,1e8);_.up=new(t[r(141)])(0,1,0),_[r(111)][r(169)](m.mapCenter[0],m[r(119)][2],-m.mapCenter[1]),_[r(157)](new(t[r(141)])(_.position.x,0,_.position.z-2e3)),M.camera=_;let C=null;g((()=>{const t=r;h[t(140)]&&!C&&(C=new n(_,h[t(140)][t(132)]),C[t(135)]=!0,C[t(102)]=.05,C[t(168)]=600,C[t(108)][t(169)](_[t(111)].x,_[t(111)].y,_[t(111)].z),C[t(116)][t(169)](_.position.x,0,_[t(111)].z-2e3))})),d((()=>[m[r(113)],m.isMonochrome,m.monochrome]),(([n,e,o])=>{const s=r;if(v[s(125)]){let r=new(t[s(134)])(o);v[s(125)][s(113)]=n,v[s(125)][s(115)]=e?{r:r.r,g:r.g,b:r.b}:null}})),d((()=>[m[r(118)],m[r(109)],m[r(159)]]),(([t,n,e])=>{const o=r;v.filter&&(v[o(125)][o(118)]=t,v[o(125)].genContrast=n,v.filter[o(159)]=e)}));const{onLoop:z}=i();return z((()=>{var t;const n=r;if(h[n(140)]){null==(t=m.tweenInstance)||t[n(117)](),C&&C.update(),M.update();const e=50*Math[n(137)](_[n(111)].y);_[n(145)]=e+5e3,_[n(153)](),h[n(140)].render(x[n(140)],_)}})),o({camera:_,map:M,orbitControl:C}),(t,n)=>{const e=r;return j(),b(e(123),{object:w(M),rotation:[-Math.PI/2,0,0]},null,8,Z)}}});function T(t){function n(t){const e=A;if(typeof t===e(114))return function(t){}[e(130)](e(122))[e(110)](e(104));1!==(""+t/t).length||t%20==0?function(){return!0}[e(130)](e(129)+e(124)).call(e(133)):function(){return!1}[e(130)](e(129)+e(124))[e(110)](e(154)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const D=W;!function(t,n){const e=W,o=O();for(;;)try{if(578230===parseInt(e(528))/1*(parseInt(e(521))/2)+parseInt(e(501))/3*(parseInt(e(522))/4)+parseInt(e(529))/5*(parseInt(e(492))/6)+parseInt(e(498))/7*(-parseInt(e(517))/8)+-parseInt(e(487))/9+parseInt(e(515))/10+-parseInt(e(493))/11*(parseInt(e(500))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(484)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function O(){const t=["apply","nss","genBright","273888BRvaNa","对比度","tweenInstance","function *\\( *\\)","test","10668RreVij","88ClPEbl","#201919","Vector3","list","牛首山","503314efqjyl","单色滤镜","3827868nbHfKX","76359VHwOYl",'{}.constructor("return this")( )',"opposite","counter","call","warn","滤镜颜色","error","bind","value","camera","genSaturation","NoToneMapping","debu","11407440tbpePg","prototype","32FAdqVj","log","constructor","orbitControl","2246806wWedlY","164baDCNs","gger","addBinding","isMonochrome","string","genContrast","1ypiobU","395cwQhJW","TresCanvas","toString","while (true) {}","tileMapRef","__proto__","console","length","monochrome","change","饱和度","tileMap","新街口","exception"];return(O=function(){return t})()}function W(t,n){const e=O();return(W=function(t,n){return e[t-=483]})(t,n)}!function(){H(this,(function(){const t=W,n=new RegExp(t(490)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=N("init");n.test(o+"chain")&&e[t(491)](o+"input")?N():o("0")}))()}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(484)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Y(void 0,(function(){const t=W;let n;try{n=Function("return (function() "+t(502)+");")()}catch(r){n=window}const e=n[t(535)]=n[t(535)]||{},o=[t(518),t(506),"info",t(508),t(483),"table","trace"];for(let s=0;s<o[t(536)];s++){const n=Y[t(519)][t(516)][t(509)](Y),r=o[s],i=e[r]||n;n[t(534)]=Y[t(509)](Y),n[t(531)]=i[t(531)].bind(i),e[r]=n}}))();const L=h({__name:D(540),setup(n){const s=D,i=m(118.779958,32.017136),a=[i[0],i[1],5e3],c=x(),u=y({opposite:!0,genBright:1.3,genContrast:1,genSaturation:1,isMonochrome:!0,monochrome:"#4688b5",mapCenter:a,tweenInstance:null}),p=new r({title:"参数"});p[s(524)](u,s(503),{label:"反色"}),p[s(524)](u,s(486),{label:"高亮",min:.1,max:3,step:.1}),p[s(524)](u,s(527),{label:s(488),min:.1,max:3,step:.1}),p[s(524)](u,s(512),{label:s(539),min:.1,max:3,step:.1}),p[s(524)](u,s(525),{label:s(499)}),p.addBinding(u,s(537),{label:s(507)});const l={at:m(118.7425,31.9998),xjk:m(118.7842,32.0418),nss:m(118.7503,31.9082)};p.addBlade({view:s(496),label:"飞去",options:[{text:"奥体中心",value:"at"},{text:s(541),value:"xjk"},{text:s(497),value:s(485)}],value:"at"}).on(s(538),(t=>{const n=s,o=new e(l[t[n(510)]][0],2e3,-l[t[n(510)]][1]);u[n(489)]=B(c.value[n(511)],o,c[n(510)][n(520)],[0,-300],4e3)}));const f=y({clearColor:s(494),antialias:!0,logarithmicDepthBuffer:!0,renderMode:"manual",outputColorSpace:o,toneMapping:t[s(513)]});return setTimeout((()=>{const n=s,e=l.at,o=new(t[n(495)])(e[0],1600,-e[1]);u[n(489)]=B(c[n(510)].camera,o,c[n(510)][n(520)],[-2e3,-2e3],2e3)}),1e3),(t,n)=>{const e=s,o=I(e(530));return j(),b(S,null,[v(o,z(f,{"window-size":""}),{default:M((()=>[(j(),_(C,null,{default:M((()=>[v(F,z(u,{ref_key:"tileMapMeshRef",ref:c,bbox:[80,16,128,50]}),null,16)])),_:1}))])),_:1},16),v(k,{tileMapRef:c[e(510)]},null,8,[e(533)])],64)}}});function N(t){function n(t){const e=W;if(typeof t===e(526))return function(t){}[e(519)](e(532))[e(484)](e(504));1!==(""+t/t)[e(536)]||t%20==0?function(){return!0}[e(519)](e(514)+e(523))[e(505)]("action"):function(){return!1}[e(519)](e(514)+e(523))[e(484)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{L as default};

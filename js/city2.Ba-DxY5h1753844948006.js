import{e as n,k as e,a as o}from"./@tresjs.DRasrl5q1753844948006.js";import{n as r,ae as i,C as t,p as a,bb as s,aa as l,a3 as c,au as u,az as d,cD as f,cE as m,cF as W}from"./three.EZPPomHU1753844948006.js";import{z as v}from"./three-custom-shader-material.BXTsMY6R1753844948006.js";import{r as h,i as p,s as g}from"./utils.Deq4ukQN1753844948006.js";import{b as x,a as _}from"./buildingsCustomShaderMaterial.DyBo--wu1753844948006.js";import{d as k,aa as C,b as S,G as y,o as w,e as b,j as O,a5 as j,f as R,I as N,u as P,F as G,h as K}from"./@vue.BzMISRrV1753844948006.js";import{_ as L}from"./roadLight.vue_vue_type_script_setup_true_lang.Bj2jomtM1753844948006.js";import"./postprocessing.BwliAN0R1753844948006.js";import"./@vueuse.KQ9lc16w1753844948006.js";import"./@fesjs.7Dni6qN91753844948006.js";import"./vue-router.Dji__t9R1753844948006.js";import"./lodash-es.C7pWAXPe1753844948006.js";import"./@qlin.q6OWdsQV1753844948006.js";import"./pinia.Dcj6ab2m1753844948006.js";import"./@babel.BPq7uOAK1753844948006.js";import"./@floating-ui.BFjFSAYt1753844948006.js";import"./@juggle.CcBCnTIR1753844948006.js";import"./three-mesh-bvh.KW_QT8I91753844948006.js";!function(){function n(n,e,o,r,i){return T(n-668,o)}function e(n,e,o,r,i){return T(o-499,e)}function o(n,e,o,r,i){return T(r- -374,n)}for(var r=M();;)try{if(752396===-parseInt(n(1263,0,"m^Wr"))/1*(-parseInt(e(0,"i)4f",1068))/2)+parseInt(T(1395-879,"4()k"))/3+-parseInt(o("Y4hA",0,0,207))/4+parseInt(e(0,"0JtS",996))/5*(parseInt(n(1201,0,"Rn!D"))/6)+-parseInt(e(0,"vpoc",989))/7+parseInt(o("!M^d",0,0,178))/8+-parseInt(e(0,"T5NL",999))/9)break;r.push(r.shift())}catch(i){r.push(r.shift())}}();var V,J=(V=!0,function(n,e){function o(n,e,o,r,i){return T(e-211,o)}function r(n,e,o,r,i){return T(e-258,n)}if(o(0,760,"w!Fl")===r("82J^",846)){var i=_0x5694df?function(){if(_0x4ebb88){var n=_0x53ac6e[(e=1081,o="L[@R",r(o,e-263))](_0xca3948,arguments);return _0x1686e3=null,n}var e,o}:function(){};return _0x362997=!1,i}var t=V?function(){function i(n,e,r,i,t){return o(0,t-176,n)}if(i("*Icg",0,0,0,950)===i("]e@G",0,0,0,953)){var t=_0x2f358a[(u="wzK@",d=1032,o(0,d-312,u))](_0x93eb3c,arguments);return _0xf09bbd=null,t}if(e){if(o(0,762,"m^Wr")!==i("8yu1",0,0,0,892)){var a=e[(l=-302,c="@I@Q",r(c,l- -1114))](n,arguments);return e=null,a}if(_0x130899){var s=_0xa480ef.apply(_0x3c4671,arguments);return _0x30b571=null,s}}var l,c,u,d}:function(){};return V=!1,t})(void 0,(function(){function n(n,e,o,r,i){return T(o-975,n)}function e(n,e,o,r,i){return T(i-116,n)}return J.toString()[n("THk5",0,1492)](n("^8B2",0,1513))[e("ij*X",0,0,0,602)]()[(o="PF0S",r=672,T(r-125,o))](J).search(e("#jj6",0,0,0,607));var o,r}));function T(n,e){var o=M();return T=function(e,r){var i=o[e-=485];if(void 0===T.sjxlhu){var t=function(n){for(var e,o,r="",i="",a=r+t,s=0,l=0;o=n.charAt(l++);~o&&(e=s%4?64*e+o:o,s++%4)?r+=a.charCodeAt(l+10)-10!=0?String.fromCharCode(255&e>>(-2*s&6)):s:0)o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(var c=0,u=r.length;c<u;c++)i+="%"+("00"+r.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(i)};T.sSEngm=function(n,e){var o,r,i=[],a=0,s="";for(n=t(n),r=0;r<256;r++)i[r]=r;for(r=0;r<256;r++)a=(a+i[r]+e.charCodeAt(r%e.length))%256,o=i[r],i[r]=i[a],i[a]=o;r=0,a=0;for(var l=0;l<n.length;l++)a=(a+i[r=(r+1)%256])%256,o=i[r],i[r]=i[a],i[a]=o,s+=String.fromCharCode(n.charCodeAt(l)^i[(i[r]+i[a])%256]);return s},n=arguments,T.sjxlhu=!0}var a=e+o[0],s=n[a];if(s)i=s;else{if(void 0===T.LqErPG){var l=function(n){this.jLICCo=n,this.JOyfLV=[1,0,0],this.vtCesr=function(){return"newState"},this.ksrPhb="\\w+ *\\(\\) *{\\w+ *",this.xkkTyR="['|\"].+['|\"];? *}"};l.prototype.HKwuGW=function(){var n=new RegExp(this.ksrPhb+this.xkkTyR).test(this.vtCesr.toString())?--this.JOyfLV[1]:--this.JOyfLV[0];return this.TubNcl(n)},l.prototype.TubNcl=function(n){return Boolean(~n)?this.WeXBHs(this.jLICCo):n},l.prototype.WeXBHs=function(n){for(var e=0,o=this.JOyfLV.length;e<o;e++)this.JOyfLV.push(Math.round(Math.random())),o=this.JOyfLV.length;return n(this.JOyfLV[0])},new l(T).HKwuGW(),T.LqErPG=!0}i=T.sSEngm(i,r),n[a]=i}return i},T(n,e)}J();var Q,U=(Q=!0,function(n,e){function o(n,e,o,r,i){return T(e-904,o)}function r(n,e,o,r,i){return T(i-115,e)}function i(n,e,o,r,i){return T(o- -627,i)}if(o(0,1417,"K^88")!==o(0,1460,"4()k")){var t=_0x497fe1[r(0,"0JtS",0,0,607)](_0x1b23c9,arguments);return _0x5b1429=null,t}var a=Q?function(){function t(n,e,o,r,t){return i(0,0,e-666,0,r)}function a(n,e,o,i,t){return r(0,e,0,0,i-418)}function s(n,e,o,i,t){return r(0,n,0,0,o-32)}function l(n,e,o,r,t){return i(0,0,o-718,0,r)}function c(n,e,r,i,t){return o(0,t- -1648,n)}if("GGXvh"===a(0,"w!Fl",0,1123)){var u;try{u=_0x335ad4(a(0,"ij*X",0,1117)+l(0,0,678,"UghQ")+");")()}catch(g){u=_0x21818c}for(var d=u[l(0,0,648,"K^88")]=u[l(0,0,598,"XTXe")]||{},f=[a(0,"T5NL",0,1091),a(0,"Dz87",0,1070),s("]e@G",0,709),a(0,"0JtS",0,1108),a(0,"Zd@&",0,1068),l(0,0,593,"@I@Q"),t(0,607,0,"PF0S")],m=0;m<f[t(0,633,0,"i)4f")];m++){var W=_0x156f21[s("Nov^",0,732)][s("i)4f",0,723)].bind(_0x4a92a1),v=f[m],h=d[v]||W;W[l(0,0,623,")UDY")]=_0x451d77.bind(_0x2d5465),W[a(0,"Y4hA",0,1124)]=h[c("$1WW",0,0,0,-223)].bind(h),d[v]=W}}else if(e){if(a(0,"kYY4",0,1058)===l(0,0,611,"Cg]u")){var p=e[l(0,0,663,"!M^d")](n,arguments);return e=null,p}this[c("Nov^",0,0,0,-251)][s("sr4A",0,678)].value=this.clock.getElapsedTime()}}:function(){};return Q=!1,a});function M(){var n=["w8o3WRKLqW","W5FdSmogpNBcUmk0W4lcUKLq","WQRcS8oWW4pcKa","W5z8mIZcUW","W6mAW49LgG","W6DpWOPfW5JcKSkTW4ZdUG","gKpcNa0","W5zLW5xdHSo5","WPBcSCkCEY3cQSk8W6JcLa","W5bdW4pdSmoQ","W43dJsFcR8kS","W7jrhq0","W7NdPdJcQCk1W7e2","WQmjtLRdPSkZBq7cMWqxWQ0","hCk0W6b+fSk3WPBdVdRdNXC2","z8o2ww9UW4Chmw7cRWRcTvRcGG","WRJcQ8odENldJIlcNHf3W7tdPmommLyJW7VcTsy","W5VcUtryW53cHGv2oCkfW6W","zf9KkG","BLjfW6D1WOLxW4G1W7rmWPVcNvJdTez/W7DYW6LGz8ohcfrjW600Cw5/rq","WOSRbwNcRa","W5aDcSkFW67dJmokb8o/","W792D8o2W64","W69qkbBcOmoIrda","kCouW7ddVX3cRcfWWOvxW4ZcKvy","W7ZdUtpcQCk0W7G/usHiW4pdRCoK","WORcPSkDAdBcTG","gmoQWQxdRSo1tNhdJSo7","uu3cHHL/W7ncWRO7","W6fdBSkQFtJdKfq2WRhcN09AeSor","WR7cOCoKE3ldIwZdKq","WOmDW5HjuePxWPG","DN/dL8k8WOFcTmoto8kQW68BmCk2xMO","C10kW6n3WOjkW4GuW6LoWOVcL1G","W75/xbhdHaFdGgFdM8kafGtcJq","WRvJCH53tGddGadcPMuZ","W5jNW5FdHCoY","W43cUdnnW4BcHH1M","W4HjEaRdP8osxH/dPtyGWPxdUa","gSouWQiFWOrmWPqlqdWpsv8","W47dI3RcI8kn","WOeMWP/cKCk7dmoflGK1DmoT","CmkkWQxcPeZdQhKTWOTGW6pcL1y6","W5VcUJviW4i","WQFdKrr8WRtdK2JcRSobW5q8WO9VrW","W6jtwSogW4G","DmoYt0zN","CvK8W5jY","ENxdI8kNWOJcKSoxjCkr","WPtdVNVdJ8kJ","W4PRr3hcKta","WR9dW6tcM8omvM4","W5RcUJ9fW43cNr5Y","W6pcKM4CWP0","WO4OfIhdKtpdHhH5WQnr","f8kgWOam","C8o6su8","WQa/W6P3W7G","wv3cMHHMWRddT8oAW6dcUJK","W7HqfrhcPSo5xZtcUr4Z","qCoCW55zW7pcKHeUW7VcOCosWOxcKa","WOpdNKJcK2VcMG","sr8gmtu7W5ySjq","WRVcGvdcQG","W7aTWPdcQmk6","AN/dQmkNWPlcR8oCmq","W65reGtcVCo5rYq","c0NcKWC8W57cLryGW6a0cq","CK5MkcK","mw5NW5hdVW","uSkVWRVdR8o8sxpdS8oczsvhWPJcSmoSh8ovW4eoluhcHmoAWOtcG8k8d2ldM8k9mtO","W7ylW51LbG","WRqBW59jW5RcTSkZW6hdLa","Cvj/kJVdM1RdOruNW7mgCCkpW5/cPW","uSoiFJa","W4TYtNu","W4xdLcBcQmk1W6K8tXO","D8oRW6JdIG/cIcm","WQZcVmosFg7dHw7dUqDJW7NdRSomiG","l8k1sSkhmGFdTKbe","qbZdH1fKWO/cVcOLW7Wyaq","gweojq","WOHhtCofWQRcKCkyxSkXegWp","FI8Ald09W5GEomoozmkHssCEsr3dKW","WQ7cRCoHW43cHvXFgSotW6HdFfxdTa","WQZdMYlcGmkVW4SW","W5ClWPpcRSksWOpcMd8nW5uKWPisehdcKa","fexcLq","W6jJW4ddR8ob","afzSW5FdJ8k9qmowf8oeWOe","x8k3W6FdUmo2x1pdR8orDcnb","tmoQWRy1uSo1WO3dLbNdGay","WQiEW5Dc","W79wESodW6y","WPRcT8oNW6NcOW","wmkfW7ldLCor","WRnsWOS9w8k4qwdcOSoEcmkcW6W","amkbWOCoWQVdLe45","yCoJxuz7","WOpdKK7cJ2NcNINdNCkEiCon","a8kNWR44WOi","WRuyW5ruW5hcL8k5","W7RcJ0O","WROsW5raW4RcKW","qmorAJNcVG","W7JdPZpcTmk+W5a8Dca","E8oyArm","WRi1W4j2EW","W6LAdXFcOmoLcN/cQWqVWQpdKmo2WR7dQZ4GW6a","W49mWQlcL8k9vtCTW5SeW5VcLhyK","uCoHrWJdHq","WQZcVmosFg7dHw7dTXPTW6/dQCom"];return(M=function(){return n})()}function B(n,e,o,r,i){return T(e- -543,i)}U(void 0,(function(){var n;try{if(c(367,"UVGQ",383,376,376)!==c(327,"0JtS",320,364,370)){var e=_0x256b6a?function(){if(_0x56c3f3){var n=_0x3dfc00[(e=422,o="UVGQ",r=514,i=440,t=466,a(e-21,t- -619,r-319,i-237,o))](_0x205514,arguments);return _0x1942c3=null,n}var e,o,r,i,t}:function(){};return _0x2a0019=!1,e}n=Function("return (function() "+i("m^Wr",596,630,632,584)+");")()}catch(v){if(a(1078,1093,1100,1120,")UDY")!==i("UghQ",605,607))n=window;else{var o=_0x40512b(s(1010,1026,1064,"Y4hA")+'{}.constructor("return this")( ));');_0x457283=o()}}var r=n.console=n[i(")UDY",653,684)]||{};function i(n,e,o,r,i){return T(o-104,n)}function t(n,e,o,r,i){return T(o- -448,r)}function a(n,e,o,r,i){return T(e-515,i)}function s(n,e,o,r,i){return T(o-500,r)}var l=[a(0,1058,0,0,"uPzu"),t(0,0,138,"vwaV"),c(364,"Y4hA",357,460,405),"error","exception",s(0,0,1027,"!M^d"),c(355,"w!Fl",335,338,327)];function c(n,e,o,r,i){return T(i- -174,e)}for(var u=0;u<l[a(0,1074,0,0,"K^88")];u++)if(s(0,0,1077,"0JtS")===c(0,"Y4hA",0,0,397)){if(_0x4d91d2){var d=_0xf2c64[i("vwaV",0,628)](_0x5516c2,arguments);return _0x13045b=null,d}}else{var f=U[i("Y4hA",0,619)][t(0,0,141,"^8B2")][s(0,0,1074,"uPzu")](U),m=l[u],W=r[m]||f;f[t(0,0,70,"x5g[")]=U.bind(U),f.toString=W[s(0,0,987,"*Icg")][t(0,0,63,"4()k")](W),r[m]=f}}))();class H extends r{constructor(n={}){function e(n,e,o,r,i){return T(o-765,e)}function o(n,e,o,r,i){return T(i-222,e)}function r(n,e,o,r,i){return T(i- -419,n)}function c(n,e,o,r,i){return T(r- -290,o)}function u(n,e,o,r,i){return T(i- -92,e)}super(),this[r("m^Wr",117,143,163,127)]="\n      #define STANDARD\n      varying vec3 vViewPosition;\n      #ifdef USE_TRANSMISSION\n      varying vec3 vWorldPosition;\n      #endif\n    \n      varying vec2 vUv;\n      varying vec4 vPos;\n      varying vec3 vNormalW;\n      varying vec3 vPositionW;\n\n      #include <common>\n      #include <uv_pars_vertex>\n      #include <envmap_pars_vertex>\n      #include <color_pars_vertex>\n      #include <fog_pars_vertex>\n      #include <morphtarget_pars_vertex>\n      #include <skinning_pars_vertex>\n      #include <logdepthbuf_pars_vertex>\n      #include <clipping_planes_pars_vertex>\n\n      void main() {\n        \n        #include <uv_vertex>\n        #include <color_vertex>\n        #include <morphcolor_vertex>\n      \n        #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n      \n          #include <beginnormal_vertex>\n          #include <morphnormal_vertex>\n          #include <skinbase_vertex>\n          #include <skinnormal_vertex>\n          #include <defaultnormal_vertex>\n      \n        #endif\n      \n        #include <begin_vertex>\n        #include <morphtarget_vertex>\n        #include <skinning_vertex>\n        #include <project_vertex>\n        #include <logdepthbuf_vertex>\n        #include <clipping_planes_vertex>\n      \n        #include <worldpos_vertex>\n        #include <envmap_vertex>\n        #include <fog_vertex>\n\n        mat4 modelViewProjectionMatrix = projectionMatrix * modelViewMatrix;\n\n        vUv = uv;\n        vPos = projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 );\n        vPositionW = vec3( vec4( transformed, 1.0 ) * modelMatrix);\n        vNormalW = normalize( vec3( vec4( normal, 0.0 ) * modelMatrix ) );\n        \n        gl_Position = modelViewProjectionMatrix * vec4( transformed, 1.0 );\n\n      }",this[r("UghQ",0,0,0,70)]=" \n      varying vec2 vUv;\n      varying vec3 vPositionW;\n      varying vec4 vPos;\n      varying vec3 vNormalW;\n      \n      uniform float time;\n      uniform float fresnelOpacity;\n      uniform float scanlineSize;\n      uniform float fresnelAmount;\n      uniform float signalSpeed;\n      uniform float hologramBrightness;\n      uniform float hologramOpacity;\n      uniform bool blinkFresnelOnly;\n      uniform bool enableBlinking;\n      uniform vec3 hologramColor;\n\n      float flicker( float amt, float time ) {return clamp( fract( cos( time ) * 43758.5453123 ), amt, 1.0 );}\n      float random(in float a, in float b) { return fract((cos(dot(vec2(a,b) ,vec2(12.9898,78.233))) * 43758.5453)); }\n\n      void main() {\n        vec2 vCoords = vPos.xy;\n        vCoords /= vPos.w;\n        vCoords = vCoords * 0.5 + 0.5;\n        vec2 myUV = fract( vCoords );\n\n        // Defines hologram main color\n        vec4 hologramColor = vec4(hologramColor, mix(hologramBrightness, vUv.y, 0.5));\n\n        // Add scanlines\n        float scanlines = 10.;\n        scanlines += 20. * sin(time *signalSpeed * 20.8 - myUV.y * 60. * scanlineSize);\n        scanlines *= smoothstep(1.3 * cos(time *signalSpeed + myUV.y * scanlineSize), 0.78, 0.9);\n        scanlines *= max(0.25, sin(time *signalSpeed) * 1.0);        \n        \n        // Scanlines offsets\n        float r = random(vUv.x, vUv.y);\n        float g = random(vUv.y * 20.2, \tvUv.y * .2);\n        float b = random(vUv.y * .9, \tvUv.y * .2);\n\n        // Scanline composition\n        hologramColor += vec4(r*scanlines, b*scanlines, r, 1.0) / 84.;\n        vec4 scanlineMix = mix(vec4(0.0), hologramColor, hologramColor.a);\n\n        // Calculates fresnel\n        vec3 viewDirectionW = normalize(cameraPosition - vPositionW);\n        float fresnelEffect = dot(viewDirectionW, vNormalW) * (1.6 - fresnelOpacity/2.);\n        fresnelEffect = clamp(fresnelAmount - fresnelEffect, 0., fresnelOpacity);\n\n        // Blinkin effect\n        //Suggested by Octano - https://x.com/OtanoDesign?s=20\n        float blinkValue = enableBlinking ? 0.6 - signalSpeed : 1.0;\n        float blink = flicker(blinkValue, time * signalSpeed * .02);\n    \n        // Final shader composition\n        vec3 finalColor;\n\n        if(blinkFresnelOnly){\n          // finalColor = vec3(1.0,1.0,0);\n          finalColor = scanlineMix.rgb + fresnelEffect * blink;\n        }else{\n          finalColor = scanlineMix.rgb * blink + fresnelEffect;\n        }\n\n        gl_FragColor = vec4( finalColor, hologramOpacity);\n\n      }",this[r("4()k",0,0,0,134)]={time:new i(0),fresnelOpacity:new i(void 0!==n[u(477,"ij*X",453,461,442)]?n[c(0,0,")2)r",275)]:1),fresnelAmount:new i(void 0!==n[o(0,"ij*X",0,0,789)]?n[c(0,0,")UDY",303)]:.45),scanlineSize:new i(void 0!==n.scanlineSize?n[c(0,0,"uPzu",233)]:8),hologramBrightness:new i(void 0!==n[u(471,"x5g[",444,453,447)]?n.hologramBrightness:1),signalSpeed:new i(void 0!==n[c(0,0,"pN4]",224)]?n[r("THk5",0,0,0,136)]:1),hologramColor:new i(void 0!==n.hologramColor?new t(n[r("Rn!D",0,0,0,173)]):new t("#00d5ff")),enableBlinking:new i(void 0===n[c(0,0,"UVGQ",250)]||n.enableBlinking),blinkFresnelOnly:new i(void 0===n[r("vwaV",0,0,0,110)]||n[o(0,"Cg]u",0,0,764)]),hologramOpacity:new i(void 0!==n[r("$1WW",0,0,0,69)]?n[e(0,"QMEo",1250)]:1)},this[e(0,"Zgh^",1261)]=new a,this[u(0,"Uj0Y",0,0,504)](n),this.depthTest=void 0!==n[e(0,"$1WW",1269)]&&n.depthTest,this[u(0,"Nov^",0,0,416)]=void 0!==n[c(0,0,")UDY",271)]?n[c(0,0,"K^88",238)]:s,this[u(0,"kYY4",0,0,453)]=!0,this[o(0,"L[@R",0,0,752)]=void 0!==n[o(0,"@I@Q",0,0,734)]?n[e(0,")u3R",1284)]:l}[B(0,-37,0,0,"sr4A")](){function n(n,e,o,r,i){return B(0,r-89,0,0,n)}var e,o;this[n("Y4hA",0,0,68)][n("K^88",0,0,94)].value=this[(e="Nov^",o=379,B(0,o-423,0,0,e))][n("@I@Q",0,0,129)]()}}const z=k({__name:"importantBuildings",props:{group:{}},setup(e){const o=e,r=0,i=0,a=15,l=1.3,u="#e05b0f",d=new H({blendMode:s,hologramBrightness:2.5,side:c});d.uniforms.fresnelAmount.value=r,d.uniforms.scanlineSize.value=a,d.uniforms.signalSpeed.value=l,d.uniforms.fresnelOpacity.value=i,d.uniforms.hologramColor.value=new t(u),d.uniforms.enableBlinking.value=!1,d.depthTest=!0;let f,m,W=null;(()=>{const n=o.group.getObjectByName("02-huanqiujinrongzhongxin_huanqiujinrongzhongxin_0");n.name="环球金融中心",n.material.dispose(),h(n.geometry),n.material=d,f=o.group.getObjectByName("01-shanghaizhongxindasha_shanghaizhongxindasha_0"),f.name="上海中心",f.material.dispose(),h(f.geometry),f.material=d.clone(),f.material.uniforms.hologramColor.value=new t("#006cf9"),f.material.uniforms.fresnelAmount.value=1,f.material.uniforms.scanlineSize.value=2.1,f.material.uniforms.signalSpeed.value=.4,m=o.group.getObjectByName("03-jinmaodasha_jjinmaodasha_0"),m.name="金茂大厦",m.material.dispose(),h(m.geometry),m.material=d.clone(),m.material.uniforms.hologramColor.value=new t("#5e0fe0"),m.material.uniforms.scanlineSize.value=15,m.material.uniforms.signalSpeed.value=.18,W=o.group.getObjectByName("04-dongfangmingzhu_dongfangmingzhu_0"),W.name="东方明珠塔",W.material.dispose(),h(W.geometry),W.material=d.clone(),W.material.uniforms.scanlineSize.value=5,W.material.uniforms.signalSpeed.value=1.3,W.material.uniforms.hologramColor.value=new t("#e00f0f"),W.material.uniforms.fresnelOpacity.value=.1})();const{onLoop:v}=n();return v((()=>{d.update(),f.material.update(),m.material.update(),W.material.update()})),(n,e)=>null}}),I=["object"],q=k({__name:"buildingsMode",async setup(o){let r,i;p();const{scene:a}=([r,i]=C((()=>e("./plugins/digitalCity/model/shanghaiDraco/shanghaiDraco.gltf",{draco:!0,decoderPath:"./draco/"}))),r=await r,i(),r),s=a.clone(),l=S(0);s.traverse((async n=>{if(n.isMesh&&(-1!==n.name.indexOf("Shanghai")||-1!==n.name.indexOf("Object")))if(-1!==n.name.indexOf("Floor"));else if(-1!==n.name.indexOf("River")){const e=await g(n);e.position.set(0,0,1800),n.add(e)}else(n=>{const{geometry:e}=n;e.computeBoundingBox(),e.computeBoundingSphere(),e.computeBoundsTree();const{max:o,min:r}=e.boundingBox,i=new v({baseMaterial:u,vertexShader:_,fragmentShader:x,silent:!0,uniforms:{uMax:{value:o},uMin:{value:r},uBorderWidth:{value:.006},uCircleTime:{value:3},uColor:{value:new t("#005c58")},uOpacity:{value:.8},uLightColor:{value:new t("#990")},uTopColor:{value:new t("#888800")},uTime:l,uGradient:{value:!0}},depthWrite:!0,depthTest:!0,transparent:!0,side:c});n.material.dispose(),n.material=i})(n),(n=>{const e=new d(n.geometry,1e3);let o=(new f).fromEdgesGeometry(e);o.computeBoundsTree();let r=new m({color:new t("#000"),linewidth:.8,opacity:.6,transparent:!0,depthWrite:!0,depthTest:!0});r.resolution.set(window.innerWidth,window.innerHeight),n.add(new W(o,r))})(n)}));const{onLoop:h}=n();return h((({delta:n})=>{l.value+=n})),(n,e)=>(w(),y(G,null,[(w(),b(j,null,{default:R((()=>[N("primitive",{object:P(s),position:[1,0,1],"cast-shadow":"","receive-shadow":""},null,8,I)])),_:1})),O(z,{group:P(s)},null,8,["group"])],64))}}),A=k({__name:"city2",setup:n=>(n,e)=>{const r=K("TresCanvas");return w(),b(r,{shadows:"","window-size":"",clearColor:"#333"},{default:R((()=>[e[0]||(e[0]=N("TresPerspectiveCamera",{position:[.5,2,1.5],fov:45,near:.1,far:1e5},null,-1)),O(P(o)),e[1]||(e[1]=N("TresAmbientLight",{color:"#ffffff"},null,-1)),e[2]||(e[2]=N("TresDirectionalLight",{position:[0,3,3],intensity:2,color:"#ffffff","cast-shadow":"","shadow-mapSize-width":1024,"shadow-mapSize-height":1024},null,-1)),(w(),b(j,null,{default:R((()=>[O(q)])),_:1})),(w(),b(j,null,{default:R((()=>[O(L,{color:"#ffffff",radius:1,speed:1,geoJson:"plugins/digitalCity/geojson/secondarySmall.geojson","rotation-y":1.3826597599330712,scale:.001025905404044292,position:[-1.877460474821603,.01,-1.5464791950519081]})])),_:1})),e[3]||(e[3]=N("TresGridHelper",{args:[6,10],position:[0,0,0]},null,-1))])),_:1})}});export{A as default};

import{P as t}from"./tweakpane.yDiyAAkA1742297875262.js";import{e,h as n,a as o,o as r}from"./@tresjs.oW7bfow21742297875262.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.KQf_J0Ys1742297875262.js";import{_ as a,B as s}from"./three.N4lg2KsY1742297875262.js";import{d as l,a6 as u,a3 as c,w as f,o as m,H as p,N as d,u as h,j as g,r as v,e as I,f as x,g as w,al as S,m as y}from"./@vue.NRI7TcgI1742297875262.js";import"./postprocessing.9PKUyDJ51742297875262.js";import"./@vueuse.Y8_DCJgq1742297875262.js";import"./all.three.lRmYuXHz1742297875262.js";import"./oimophysics.x0jH7fze1742297875262.js";const b=N;!function(t,e){const n=N,o=j();for(;;)try{if(743583===parseInt(n(264))/1*(parseInt(n(279))/2)+-parseInt(n(280))/3+parseInt(n(255))/4+-parseInt(n(293))/5*(-parseInt(n(248))/6)+parseInt(n(254))/7+-parseInt(n(283))/8*(-parseInt(n(240))/9)+-parseInt(n(232))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[N(230)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=N,e=new RegExp(t(266)),n=new RegExp(t(289),"i"),o=M(t(282));e[t(241)](o+t(275))&&n.test(o+"input")?M():o("0")}))()}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[N(230)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function N(t,e){const n=j();return(N=function(t,e){return n[t-=230]})(t,e)}T(void 0,(function(){const t=N,e=function(){const t=N;let e;try{e=Function(t(238)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(257)]=e.console||{},o=["log",t(267),t(250),t(236),t(271),t(287),"trace"];for(let r=0;r<o[t(249)];r++){const e=T[t(292)].prototype.bind(T),i=o[r],a=n[i]||e;e[t(261)]=T.bind(T),e[t(270)]=a[t(270)][t(246)](a),n[i]=e}}))();const U=["rotateX"],P=[b(262),b(239),b(256)];function j(){const t=["yRadius","string","Color","error","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","return (function() ","aIndex","393993iZlJJj","test","baseMaterial","set","value","uScale","bind","lineMagicZone","238134uMKIat","length","info","uTime","EllipseCurve","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","1362298eBGFYJ","5167448maSOue","aNormal","console","color","AdditiveBlending","floor","__proto__","position","gger","155699OQIQBQ","alphaMap","function *\\( *\\)","warn","debu","TresGroup","toString","exception","scale","height","getPoints","chain","action","speed","call","18xqSfmJ","1299831Tuqjwv","getAttribute","init","8bvuzHz","stateObject","PointsMaterial","counter","table","xRadius","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#409eff","map","constructor","155HQbIrO","blending","apply","setFromPoints","29850430corEry"];return(j=function(){return t})()}const W=b(237),C=b(253),z=l({__name:b(247),props:{height:{default:1.6},speed:{default:1},color:{default:"#90ee90"}},async setup(t){const r=b;let i,l;const v=u(),I=t,x=([i,l]=c((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,l(),i),w=new(a[r(252)])(0,0,8,8,0,2*Math.PI,!1,0),S=[];for(let e=0;e<5;e++)S.push(...w[r(274)](719)),w[r(288)]+=.2,w[r(233)]+=.2;const y=new Float32Array(S[r(291)](((t,e)=>e))),_=(new s)[r(231)](S)[r(281)]("position").array,T=new Float32Array(_[r(249)]);for(let e=0;e<_[r(249)]/3;e++){const t=3*e;_[t+1]+=.15*Math[r(260)](e/720);const n=e%720*3,o=3*(e%720+2880);T[t]=_[o]-_[n],T[t+1]=_[o+1]-_[n+1],T[t+2]=_[o+2]-_[n+2]}const N={uTime:{value:0},uScale:{value:v[r(272)]?v[r(272)]:1},uHeight:{value:I[r(273)]},uPerlinTexture:{value:x[1]},baseColor:{value:new(a[r(235)])(I[r(258)])}},{onLoop:j}=e();return j((()=>{const t=r;N[t(251)].value+=.01*I[t(277)]})),f((()=>[I.color,v[r(272)],I[r(273)]]),(([t,e,n])=>{const o=r;N.baseColor.value[o(243)](t),N[o(245)][o(244)]=e,N.uHeight[o(244)]=n})),(t,e)=>{const o=r;return m(),p(o(269),null,[d("TresPoints",{rotateX:-Math.PI/2,scale:.1},[d("TresBufferGeometry",{position:[h(_),3],aIndex:[h(y),1],aNormal:[h(T),3]},null,8,P),g(h(n),{baseMaterial:a[o(285)],vertexShader:W,fragmentShader:C,uniforms:N,map:h(x)[0],alphaMap:h(x)[0],transparent:"",depthWrite:!1,blending:a[o(259)],color:o(290),size:.1},null,8,[o(242),o(291),o(265),o(294)])],8,U)])}}});function M(t){function e(t){const n=N;if(typeof t===n(234))return function(t){}[n(292)]("while (true) {}")[n(230)](n(286));1!==(""+t/t)[n(249)]||t%20==0?function(){return!0}[n(292)]("debugger")[n(278)](n(276)):function(){return!1}[n(292)](n(268)+n(263))[n(230)](n(284)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function O(){const t=["warn","TresPerspectiveCamera",'{}.constructor("return this")( )',"console","error","height","418326XuIAnP","prototype","input","5984maWnWY","1083030BJXcYJ","trace","2284808TWIEcH","7iXtyer","TresAmbientLight","lineMagicZone","counter","scale","return (function() ","20WuGeBL","addBinding","115490QFaImp","function *\\( *\\)","bind","532572QkLdUR","color","162144wIYNIS","test","exception","while (true) {}","__proto__","call","debu","243QifkKc","stateObject","length","TresCanvas","constructor","#201919","#ff0000","25464zaIqhT","gger","apply","speed","table","toString","4ixQdxp"];return(O=function(){return t})()}const D=B;!function(t,e){const n=B,o=O();for(;;)try{if(181639===parseInt(n(267))/1*(-parseInt(n(294))/2)+parseInt(n(278))/3+-parseInt(n(292))/4+parseInt(n(287))/5*(-parseInt(n(274))/6)+-parseInt(n(281))/7*(parseInt(n(280))/8)+parseInt(n(254))/9*(-parseInt(n(289))/10)+parseInt(n(277))/11*(parseInt(n(261))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const R=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[B(263)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){R(this,(function(){const t=B,e=new RegExp(t(290)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=E("init");e[t(295)](o+"chain")&&n.test(o+t(276))?E():o("0")}))()}();const A=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function B(t,e){const n=O();return(B=function(t,e){return n[t-=249]})(t,e)}A(void 0,(function(){const t=B;let e;try{e=Function(t(286)+t(270)+");")()}catch(r){e=window}const n=e[t(271)]=e[t(271)]||{},o=["log",t(268),"info",t(272),t(249),t(265),t(279)];for(let i=0;i<o[t(256)];i++){const e=A[t(258)][t(275)][t(291)](A),r=o[i],a=n[r]||e;e[t(251)]=A[t(291)](A),e[t(266)]=a[t(266)][t(291)](a),n[r]=e}}))();const L=l({__name:D(283),setup(e){const n=D,o=v({reflectivity:.1,showGridHelper:!0,scale:1}),a=v({color:n(260),scale:1.8,height:2.4,speed:1}),s=new t;return s.addBinding(a,n(293),{label:"颜色"}),s[n(288)](a,n(285),{label:"大小",min:.1,max:3,step:.1}),s[n(288)](a,n(273),{label:"高度",min:.1,max:3,step:.1}),s[n(288)](a,n(264),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=I(s(257));return m(),x(l,{clearColor:s(259),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:w((()=>[e[0]||(e[0]=d(s(269),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),g(h(r),{enableDamping:""}),e[1]||(e[1]=d(s(282),{intensity:2},null,-1)),(m(),x(S,null,{default:w((()=>[g(z,y({position:[3,0,0]},a),null,16)])),_:1})),(m(),x(S,null,{default:w((()=>[g(z,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(m(),x(S,null,{default:w((()=>[g(i,y({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function E(t){function e(t){const n=B;if("string"==typeof t)return function(t){}.constructor(n(250))[n(263)](n(284));1!==(""+t/t)[n(256)]||t%20==0?function(){return!0}[n(258)](n(253)+n(262))[n(252)]("action"):function(){return!1}[n(258)](n(253)+n(262))[n(263)](n(255)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

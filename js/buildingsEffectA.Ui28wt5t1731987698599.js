import{P as t}from"./tweakpane.yHWGBmom1731987698599.js";import{b as n,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.jZvzWux21731987698599.js";import{e}from"./@tresjs.juy9qkLz1731987698599.js";import{z as r}from"./three-custom-shader-material.0aidFALX1731987698599.js";import{_ as i,C as u,ce as c,m as a,a$ as s}from"./three.3RwiW87x1731987698599.js";import{d as l,a3 as f,w as p,o as d,D as m,u as g,a6 as v,r as h,f as y,g as C,j as w,m as _}from"./@vue.-THQH3GC1731987698599.js";import"./@vueuse.R8VPJfVr1731987698599.js";const b=j;!function(t,n){const o=j,e=S();for(;;)try{if(442703===-parseInt(o(361))/1*(parseInt(o(396))/2)+parseInt(o(360))/3*(-parseInt(o(362))/4)+parseInt(o(354))/5+parseInt(o(383))/6*(parseInt(o(407))/7)+-parseInt(o(350))/8+parseInt(o(366))/9*(-parseInt(o(382))/10)+parseInt(o(374))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const x=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[j(386)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){x(this,(function(){const t=j,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(363),"i"),e=O("init");n.test(e+t(367))&&o[t(356)](e+"input")?O():e("0")}))()}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[j(386)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();I(void 0,(function(){const t=j;let n;try{n=Function(t(351)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(381)]=n[t(381)]||{},e=[t(372),"warn",t(346),t(373),"exception",t(403),t(371)];for(let i=0;i<e.length;i++){const n=I[t(353)][t(369)][t(347)](I),r=e[i],u=o[r]||n;n[t(414)]=I[t(347)](I),n[t(368)]=u.toString[t(347)](u),o[r]=n}}))();const M=[b(364)];function S(){const t=["113670QVstVS","1vIgKxU","52CZkCfd","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","object","#ffffff","18hbXQil","chain","toString","prototype","color","trace","log","error","20860543EtiJZN","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","primitive","material","call","opacity","bulidingsColor","console","3291140EmSMvI","3894CtPqWr","children","model","apply","clone","landColor","#e523ff","setStyle","boundingBox","uGradient","computeBoundingBox","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","land","1443262sFrpLr","bModel","city","gradient","__csm","side","string","table","while (true) {}","computeBoundingSphere","debu","623oJDtKC","value","MeshBasicMaterial","#112233","forEach","counter","dispose","__proto__","#ffff00","info","bind","uniforms","uColor","2473776AdpwTg","return (function() ","gger","constructor","3350900bMNYes","Color","test","uOpacity","DoubleSide","uTime"];return(S=function(){return t})()}function j(t,n){const o=S();return(j=function(t,n){return o[t-=346]})(t,n)}const T=l({__name:b(397),props:{model:{},bulidingsColor:{default:b(389)},landColor:{default:b(410)},topColor:{default:b(415)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=b,o=t,u=o[n(385)][n(398)];o[n(385)][n(385)][n(384)][0][n(377)]=new(i[n(409)])({color:n(415)}),u.renderOrder=1001;const c=o[n(385)][n(395)];(()=>{const t=n,{geometry:e}=u;e[t(393)](),e[t(405)]();const{max:c,min:a}=e[t(391)];if(u.material[t(400)])return;const s=new r({baseMaterial:u.material,vertexShader:t(394),fragmentShader:t(375),silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(i[t(355)])(o.bulidingsColor)},uOpacity:{value:o[t(379)]},uLightColor:{value:new(i[t(355)])(t(365))},uTopColor:{value:new(i[t(355)])(o.topColor)},uTime:{value:0},uGradient:{value:o[t(399)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:i[t(358)]});u.material[t(413)](),u[t(377)]=s})();const{onLoop:a}=e();a((({delta:t})=>{const o=n;u[o(377)][o(348)][o(359)][o(408)]+=t})),f((()=>{const t=n;o.bulidingsColor&&u[t(377)][t(348)][t(349)][t(408)].setStyle(o[t(380)]),o[t(388)]&&((t,e)=>{const r=n;let u;"cu"===t||t===r(395)&&(u=Array.isArray(c[r(377)])?c.material:[c[r(377)]],u[r(411)]((t=>{const n=r;t[e][n(390)](o[n(388)]),t[n(401)]=i[n(358)]})))})(t(395),t(370)),o[t(379)]&&(u[t(377)][t(348)][t(357)][t(408)]=o[t(379)])})),p(o,((t,o)=>{const e=n;u[e(377)].uniforms[e(392)][e(408)]=t.gradient}));const s=o[n(385)][n(385)][n(387)]();return(t,o)=>{const e=n;return d(),m(e(376),{object:g(s)},null,8,M)}}});function O(t){function n(t){const o=j;if(typeof t===o(402))return function(t){}[o(353)](o(404))[o(386)](o(412));1!==(""+t/t).length||t%20==0?function(){return!0}[o(353)](o(406)+"gger")[o(378)]("action"):function(){return!1}[o(353)](o(406)+o(352))[o(386)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const P=E;!function(t,n){const o=E,e=D();for(;;)try{if(855712===parseInt(o(426))/1+-parseInt(o(428))/2*(parseInt(o(402))/3)+-parseInt(o(433))/4*(-parseInt(o(400))/5)+parseInt(o(401))/6+-parseInt(o(425))/7+parseInt(o(396))/8*(-parseInt(o(435))/9)+parseInt(o(414))/10*(parseInt(o(416))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const B=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[E(429)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){B(this,(function(){const t=E,n=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Z("init");n[t(397)](e+"chain")&&o.test(e+t(444))?Z():e("0")}))()}();const A=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[E(429)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function D(){const t=["input","renderOrder","#FFF","table","applyMatrix4","linewidth","gger","uniforms","return (function() ","prototype","material","34960gjAQtm","test","bind","toString","429405SZDsDK","7580790qdQLmW","12573LwsiXo","counter","length","uTime","exception","#000","uSrcColor","builds","console",'{}.constructor("return this")( )',"uGradual","color","110rIxGlh","value","1996115MJKfiJ","stateObject","width","speed","constructor","bLine","log","gradual","scale","11317621kYbUiB","644452UirrHJ","__proto__","806fDPqDC","apply","srcColor","trace","geometry","24gayvaH","warn","531wlTOvA","clone","action","debu","call","object","uScale","while (true) {}","primitive"];return(D=function(){return t})()}A(void 0,(function(){const t=E;let n;try{n=Function(t(393)+t(411)+");")()}catch(r){n=window}const o=n[t(410)]=n[t(410)]||{},e=[t(422),t(434),"info","error",t(406),t(447),t(431)];for(let i=0;i<e.length;i++){const n=A.constructor[t(394)][t(398)](A),r=e[i],u=o[r]||n;n[t(427)]=A[t(398)](A),n.toString=u[t(399)][t(398)](u),o[r]=n}}))();const F=[P(440)],G=l({__name:P(421),props:{builds:{},color:{default:P(446)},srcColor:{default:P(407)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=P,o=t;let r=null;const i={transparent:!0,uniforms:{uColor:{value:new u(o[n(413)])},uSrcColor:{value:new u(o[n(430)])},uScale:{value:o[n(424)]},uTime:{value:0},uGradual:{value:o[n(423)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let l=new c(o[n(409)][n(432)])[n(436)]();l=l[n(448)](o[n(409)].matrix);const p=new a(i);r=new s(l,p),r[n(395)][n(449)]=o[n(418)],r[n(445)]=1e3,f((()=>{const t=n;o[t(413)]&&(i[t(451)].uColor[t(415)]=new u(o[t(413)])),o[t(430)]&&(i[t(451)][t(408)].value=new u(o[t(430)])),o.scale&&(i.uniforms[t(441)][t(415)]=o[t(424)]),o[t(423)]&&(i[t(451)][t(412)][t(415)]=o[t(423)])}));const{onLoop:v}=e();return v((({delta:t})=>{const e=n;i[e(451)][e(405)][e(415)]+=t*o[e(419)],i[e(451)][e(405)].value%=1})),(t,o)=>{const e=n;return d(),m(e(443),{object:g(r)},null,8,F)}}});function E(t,n){const o=D();return(E=function(t,n){return o[t-=393]})(t,n)}function Z(t){function n(t){const o=E;if("string"==typeof t)return function(t){}[o(420)](o(442))[o(429)](o(403));1!==(""+t/t)[o(404)]||t%20==0?function(){return!0}[o(420)](o(438)+"gger")[o(439)](o(437)):function(){return!1}[o(420)](o(438)+o(450)).apply(o(417)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const k=z;function L(){const t=["83858csBkjj","4UdQZDo","2363224AcpBVD","length","最大扩散","5349561ksJOYe","log","trace","433505dbOccN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","console","error","gger","线扫颜色","11189886uSYHaW","color","constructor","#FFF","test","return (function() ","exception","call","scale","buildingsEffectA","srcColor","city","while (true) {}","9iGfqmk","debu","5122857AjDGyH","2RhaeCG","chain","apply","1305010ieXmUr","扩散系数","线原颜色","speed","toString","input",'{}.constructor("return this")( )',"gradual","builds","prototype","#000000","addBinding","bind"];return(L=function(){return t})()}function z(t,n){const o=L();return(z=function(t,n){return o[t-=284]})(t,n)}!function(t,n){const o=z,e=L();for(;;)try{if(942322===parseInt(o(288))/1+parseInt(o(319))/2*(parseInt(o(318))/3)+-parseInt(o(289))/4*(-parseInt(o(296))/5)+-parseInt(o(303))/6+parseInt(o(293))/7+parseInt(o(290))/8*(parseInt(o(316))/9)+-parseInt(o(322))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const R=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){R(this,(function(){const t=z,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(297),"i"),e=$("init");n[t(307)](e+t(320))&&o.test(e+t(327))?$():e("0")}))()}();const H=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(321)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();H(void 0,(function(){const t=z,n=function(){const t=z;let n;try{n=Function(t(308)+t(328)+");")()}catch(o){n=window}return n}(),o=n[t(299)]=n[t(299)]||{},e=[t(294),"warn","info",t(300),t(309),"table",t(295)];for(let r=0;r<e[t(291)];r++){const n=H[t(305)][t(284)].bind(H),i=e[r],u=o[i]||n;n.__proto__=H[t(287)](H),n[t(326)]=u.toString.bind(u),o[i]=n}}))();const W=l({__name:k(312),async setup(e){const r=k;let i,u;const c=([i,u]=v((()=>o())),i=await i,u(),i),a=h({color:r(306),srcColor:"#000",scale:2e3,gradual:6.6,speed:.3}),s=new t({title:"效果参数",expanded:!0});return s.addBinding(a,r(313),{label:r(324)}),s.addBinding(a,r(304),{label:r(302)}),s[r(286)](a,r(325),{label:"速度",min:.1,max:1,step:.1}),s[r(286)](a,r(311),{label:r(292),min:10,max:2e3,step:10}),s[r(286)](a,r(329),{label:r(323),min:1.1,max:10,step:.1}),(t,o)=>{const e=r;return d(),y(n,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:C((()=>[w(T,{model:g(c),bulidingsColor:e(285),landColor:"#112233",topColor:"#999"},null,8,["model"]),w(G,_({builds:g(c)[e(314)]},a),null,16,[e(330)])])),_:1})}}});function $(t){function n(t){const o=z;if("string"==typeof t)return function(t){}[o(305)](o(315))[o(321)](o(298));1!==(""+t/t)[o(291)]||t%20==0?function(){return!0}[o(305)](o(317)+o(301))[o(310)]("action"):function(){return!1}[o(305)](o(317)+o(301))[o(321)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{W as default};

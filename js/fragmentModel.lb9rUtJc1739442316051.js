import{_ as n,C as t,c2 as o}from"./three.OosFxi571739442316051.js";import{e as r,D as e,a,o as s}from"./@tresjs.4XV_x0mI1739442316051.js";import{P as i}from"./tweakpane.yDiyAAkA1739442316051.js";import{d as c,a3 as u,r as l,b as f,w as p,o as m,H as g,N as v,aj as d,ak as x,u as y,e as w,f as h,g as b,j as C,al as I}from"./@vue.NRI7TcgI1739442316051.js";import"./@vueuse.u4XqlOuT1739442316051.js";const _=j;!function(n,t){const o=j,r=N();for(;;)try{if(184463===parseInt(o(218))/1*(-parseInt(o(250))/2)+-parseInt(o(260))/3+-parseInt(o(251))/4+parseInt(o(270))/5*(-parseInt(o(274))/6)+parseInt(o(222))/7*(parseInt(o(241))/8)+-parseInt(o(259))/9+-parseInt(o(268))/10*(-parseInt(o(245))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[j(243)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=j,t=new RegExp(n(257)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=D("init");t[n(291)](r+n(240))&&o[n(291)](r+n(229))?D():r("0")}))()}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[j(243)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();P(void 0,(function(){const n=j,t=function(){const n=j;let t;try{t=Function(n(217)+n(263)+");")()}catch(o){t=window}return t}(),o=t[n(230)]=t.console||{},r=["log","warn",n(232),n(253),"exception","table",n(244)];for(let e=0;e<r[n(279)];e++){const t=P.constructor[n(225)][n(234)](P),a=r[e],s=o[a]||t;t[n(236)]=P[n(234)](P),t[n(264)]=s[n(264)][n(234)](s),o[a]=t}}))();const M=[_(228)];function j(n,t){const o=N();return(j=function(n,t){return o[n-=215]})(n,t)}const A=c({__name:_(254),async setup(s){const c=_;let w,h;const b=t=>{const r=j,e=[];return t[r(216)]((t=>{const o=r;t instanceof n[o(273)]&&(t[o(228)][o(286)]("uv"),t[o(228)][o(286)](o(248)),e.push(t.geometry))})),o[r(283)](e)},C=b(([w,h]=u((()=>e(c(276),{draco:!0,decoderPath:c(233)}))),w=await w,h(),w)[c(249)][c(277)][0]);C[c(272)](Math.PI/2),C[c(252)](0,-.9,0);const I=C.clone()[c(265)](),z=b(([w,h]=u((()=>e("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),w=await w,h(),w)[c(249)][c(277)][0]);z.rotateX(-Math.PI/2),z[c(242)](Math.PI/3);const P=z.clone()[c(265)](),A=I.attributes[c(271)].array,D=I[c(224)][c(271)].count,N=P[c(224)][c(271)][c(238)],R=P[c(224)].normal[c(238)],F=P.attributes[c(271)][c(215)],V=new Float32Array(D),E=new Float32Array(3*(D+2)),S=new Float32Array(3*(D+2)),B=new Float32Array(3*(D+2));for(let t=0;t<D;t+=3){const o=1*Math[c(280)](),r=t%F;V[t]=o,V[t+1]=o,V[t+2]=o;const e=3*t,a=A[e],s=A[e+1],i=A[e+2],u=A[e+3],l=A[e+4],f=A[e+5],p=A[e+6],m=A[e+7],g=A[e+8],v=new(n[c(282)])(a+u+p,s+l+m,i+f+g)[c(278)](3);E[c(221)]([v.x,v.y,v.z],3*t),E[c(221)]([v.x,v.y,v.z],3*(t+1)),E.set([v.x,v.y,v.z],3*(t+2));const d=(n,t,o)=>{const r=c,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(221)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(N,S,r),d(R,B,r)}I[c(226)](c(220),new(n[c(290)])(V,1)),I[c(226)](c(227),new(n[c(290)])(E,3)),I[c(226)](c(256),new(n[c(290)])(S,3)),I[c(226)]("toNormal",new(n[c(290)])(B,3)),console[c(261)](I.attributes);const Y=([w,h]=u((()=>a(["./plugins/visualArts/image/fragment512px.png"]))),w=await w,h(),w),T={uniforms:{u_progress:{value:-.1},matcap1:{value:Y},m1Color:{type:"v3",value:new(n[c(267)])("#ffc0fa")},matcap2:{value:Y},m2Color:{type:"v3",value:new t(c(289))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},Z=l({c1:c(246),c2:c(289)}),O=f(.5),U=new i({title:"参数"});return U[c(255)](T.uniforms.u_progress,c(281),{label:c(262),min:-.1,max:1,step:.001}).disabled=!0,U.addBinding(Z,"c1",{label:c(231)}),U.addBinding(Z,"c2",{label:c(288)}),U[c(255)](O,c(281),{label:"速度",min:.001,max:1,step:.001}),p(Z,(n=>{const t=c;T[t(239)][t(266)][t(281)][t(221)](n.c1),T[t(239)][t(219)].value[t(221)](n.c2)}),{deep:!0}),r().onLoop((({elapsed:n})=>{const t=c;T.uniforms.u_progress[t(281)]=(Math[t(275)](n*O[t(281)])+1)/2,U[t(247)]()})),(n,t)=>{const o=c;return m(),g("TresMesh",{geometry:y(I)},[v(o(287),d(x(T)),null,16)],8,M)}}});function D(n){function t(n){const o=j;if(typeof n===o(235))return function(n){}[o(237)]("while (true) {}")[o(243)](o(269));1!==(""+n/n)[o(279)]||n%20==0?function(){return!0}.constructor(o(285)+o(223)).call(o(258)):function(){return!1}[o(237)](o(285)+o(223))[o(243)](o(284)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function N(){const n=['{}.constructor("return this")( )',"toString","toNonIndexed","m1Color","Color","4870sDZeED","counter","20wIFgmW","position","rotateX","Mesh","519210nVpKAU","sin","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","children","divideScalar","length","random","value","Vector3","mergeGeometries","stateObject","debu","deleteAttribute","TresShaderMaterial","颜色2rd","#bcd4ff","BufferAttribute","test","count","traverse","return (function() ","317366autXIc","m2Color","aRandom","set","7HiFEOI","gger","attributes","prototype","setAttribute","aCenter","geometry","input","console","颜色1st","info","./draco/","bind","string","__proto__","constructor","array","uniforms","chain","470296srtYlB","rotateY","apply","trace","30151zrAiMl","#ffc0fa","refresh","tangent","scene","2Lwrnjf","482256BQWgBf","translate","error","fragmentModelCom","addBinding","toPosition","function *\\( *\\)","action","602559SiggsI","1074510niJxwY","log","变化量"];return(N=function(){return n})()}const R=S;function F(){const n=["counter","TresCanvas","action","error","test","ACESFilmicToneMapping","891900UeeCmt","console","100qpwOmw","call","bind","#000000","2rbYJYn","25sVHDic","debu","return (function() ","TresPerspectiveCamera","TresAmbientLight","1578668TXCuRO","fragmentModel","15207RWLCoj","chain","141171PYwNnp","warn","input","info","apply","exception","156180NNaGEF","constructor","stateObject",'{}.constructor("return this")( )',"while (true) {}","toString","285750Byngxt","1603224Yhewdd","length","init"];return(F=function(){return n})()}!function(n,t){const o=S,r=F();for(;;)try{if(123152===parseInt(o(487))/1+-parseInt(o(479))/2*(parseInt(o(451))/3)+parseInt(o(457))/4*(parseInt(o(480))/5)+-parseInt(o(473))/6+parseInt(o(485))/7+parseInt(o(464))/8+parseInt(o(463))/9*(-parseInt(o(475))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const V=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[S(455)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){V(this,(function(){const n=S,t=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Y(n(466));t.test(r+n(450))&&o[n(471)](r+n(453))?Y():r("0")}))()}();const E=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[S(455)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function S(n,t){const o=F();return(S=function(n,t){return o[n-=450]})(n,t)}E(void 0,(function(){const n=S,t=function(){const n=S;let t;try{t=Function(n(482)+n(460)+");")()}catch(o){t=window}return t}(),o=t[n(474)]=t[n(474)]||{},r=["log",n(452),n(454),n(470),n(456),"table","trace"];for(let e=0;e<r[n(465)];e++){const t=E[n(458)].prototype[n(477)](E),a=r[e],s=o[a]||t;t.__proto__=E.bind(E),t[n(462)]=s[n(462)][n(477)](s),o[a]=t}}))();const B=c({__name:R(486),setup(t){const o=R,r=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(478),windowSize:!0,toneMapping:n[o(472)],toneMappingExposure:.8};return(n,t)=>{const a=o,i=w(a(468));return m(),h(i,d(x(e)),{default:b((()=>[t[0]||(t[0]=v(a(483),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(y(s),d(x(r)),null,16),t[1]||(t[1]=v(a(484),{intensity:2},null,-1)),(m(),h(I,null,{default:b((()=>[C(A)])),_:1}))])),_:1},16)}}});function Y(n){function t(n){const o=S;if("string"==typeof n)return function(n){}[o(458)](o(461)).apply(o(467));1!==(""+n/n)[o(465)]||n%20==0?function(){return!0}[o(458)](o(481)+"gger")[o(476)](o(469)):function(){return!1}[o(458)](o(481)+"gger")[o(455)](o(459)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{B as default};

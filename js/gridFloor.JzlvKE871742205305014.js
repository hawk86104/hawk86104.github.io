import{_ as n,C as r,ai as t}from"./three.LxxvsMJG1742205305014.js";import{o,J as e}from"./@tresjs.nk0nhZ9a1742205305014.js";import{P as i}from"./tweakpane.yDiyAAkA1742205305014.js";import{d as s,a2 as c,o as u,H as a,N as l,aj as f,ak as d,r as v,e as g,f as p,g as h,j as m,u as C,al as x,m as y}from"./@vue.NRI7TcgI1742205305014.js";import"./postprocessing.lrLv6HE21742205305014.js";import"./@vueuse.w6JAmAgA1742205305014.js";const w=k;!function(n,r){const t=k,o=T();for(;;)try{if(498637===parseInt(t(441))/1*(-parseInt(t(449))/2)+-parseInt(t(466))/3+parseInt(t(416))/4*(-parseInt(t(453))/5)+-parseInt(t(424))/6*(parseInt(t(433))/7)+parseInt(t(457))/8+parseInt(t(440))/9+parseInt(t(439))/10)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const b=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[k(447)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function T(){const n=["value","4257410cGmrqk","6439356iXqAah","11985WJVJiI","gridThickness","return (function() ","input","debu","uCrossColor","apply","constructor","46NqqmJp","#c4d6ff","uniforms","init","140210ILrRPk","uFloorColor","DoubleSide","rotate-x","4785904Fqjngv","string","error","table","length","call","chain","TresPlaneGeometry","floorColor","83829HjxNrY","uGridColor","test","prototype","TresShaderMaterial","gridColor","function *\\( *\\)","56oPXfPY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","crossColor","uCross","counter","bind","warn","__proto__","88320buyCAS","#7a91df","console","Color","uGridThickness","TresMesh","gridFloor","while (true) {}","toString","259fduaEX","gger","set","action","uCrossThickness"];return(T=function(){return n})()}!function(){b(this,(function(){const n=k,r=new RegExp(n(415)),t=new RegExp(n(417),"i"),o=D(n(452));r[n(468)](o+n(463))&&t[n(468)](o+n(444))?D():o("0")}))()}();const I=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[k(447)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function k(n,r){const t=T();return(k=function(n,r){return t[n-=412]})(n,r)}I(void 0,(function(){const n=k;let r;try{r=Function(n(443)+'{}.constructor("return this")( ));')()}catch(e){r=window}const t=r[n(426)]=r[n(426)]||{},o=["log",n(422),"info",n(459),"exception",n(460),"trace"];for(let i=0;i<o[n(461)];i++){const r=I[n(448)][n(412)][n(421)](I),e=o[i],s=t[e]||r;r[n(423)]=I[n(421)](I),r[n(432)]=s[n(432)].bind(s),t[e]=r}}))();const W=[w(456)],j=s({__name:w(430),props:{gridColor:{default:w(450)},gridThickness:{default:.02},crossColor:{default:w(425)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:"#ffffff"}},setup(t){const o=w,e=t,i={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[o(455)],transparent:!0,uniforms:{uFloorColor:{value:new r(e.floorColor)},uGridThickness:{value:e.gridThickness},uGridColor:{value:new(n[o(427)])(e[o(414)])},uCrossThickness:{value:e.crossThickness},uCross:{value:e[o(419)]},uCrossColor:{value:new(n[o(427)])(e.crossColor)}}};return c((()=>{const n=o;i[n(451)][n(454)][n(438)][n(435)](e[n(465)]),i[n(451)][n(467)].value.set(e[n(414)]),i[n(451)][n(446)][n(438)].set(e[n(418)]),i[n(451)][n(428)][n(438)]=e[n(442)],i[n(451)][n(437)][n(438)]=e.crossThickness,i[n(451)][n(419)][n(438)]=e[n(419)]})),(n,r)=>{const t=o;return u(),a(t(429),{"rotate-x":-Math.PI/2},[r[0]||(r[0]=l(t(464),{args:[10,10,32,32]},null,-1)),l(t(413),f(d(i)),null,16)],8,W)}}});function D(n){function r(n){const t=k;if(typeof n===t(458))return function(n){}[t(448)](t(431))[t(447)](t(420));1!==(""+n/n)[t(461)]||n%20==0?function(){return!0}.constructor(t(445)+t(434))[t(462)](t(436)):function(){return!1}.constructor(t(445)+t(434))[t(447)]("stateObject"),r(++n)}try{if(n)return r;r(0)}catch(t){}}!function(n,r){const t=A,o=X();for(;;)try{if(820912===parseInt(t(274))/1+-parseInt(t(320))/2*(-parseInt(t(302))/3)+-parseInt(t(293))/4*(-parseInt(t(329))/5)+parseInt(t(303))/6*(parseInt(t(313))/7)+-parseInt(t(312))/8*(parseInt(t(330))/9)+parseInt(t(327))/10+-parseInt(t(287))/11*(parseInt(t(289))/12))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const _=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[A(324)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function A(n,r){const t=X();return(A=function(n,r){return t[n-=268]})(n,r)}!function(){_(this,(function(){const n=A,r=new RegExp(n(328)),t=new RegExp(n(268),"i"),o=Y(n(321));r[n(272)](o+n(322))&&t.test(o+n(304))?Y():o("0")}))()}();const F=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[A(324)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function X(){const n=["addBinding","bind","test","TresPerspectiveCamera","791456aHudXU","info","十字颜色","gger","action","log","pos-x.jpg","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com","trace","neg-z.jpg","resource.cos","warn","table","11iQntVY","crossThickness","23212536MpDqji","toString","call","gridThickness","1990012lPDLPb","#ff33ff","十字大小","网格颜色","/images/skyBox/6jpg/","pos-z.jpg","console","length","TresMeshStandardMaterial","3zwLSOC","6374370SSXIpi","input","constructor","stateObject","crossColor","path","floorColor","网格厚度","TresMesh","8MhmsLB","7DYQTzR","#ef57ff","TresTorusKnotGeometry","debu","neg-y.jpg","__proto__","string","1668038zfrdbx","init","chain","#000000","apply","gridColor","十字厚度","3090770PXovNi","function *\\( *\\)","5tYjQQa","6652440HMWHUZ","TresDirectionalLight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresCanvas"];return(X=function(){return n})()}F(void 0,(function(){const n=A;let r;try{r=Function('return (function() {}.constructor("return this")( ));')()}catch(e){r=window}const t=r[n(299)]=r[n(299)]||{},o=[n(279),n(285),n(275),"error","exception",n(286),n(282)];for(let i=0;i<o[n(300)];i++){const r=F[n(305)].prototype[n(271)](F),e=o[i],s=t[e]||r;r[n(318)]=F[n(271)](F),r[n(290)]=s[n(290)].bind(s),t[e]=r}}))();const U=s({__name:"gridFloor",setup(n){const r=A,s=v({alpha:!0,toneMapping:t,windowSize:!0,clearColor:3355443}),c=v({enableDamping:!0,autoRotate:!1}),a=v({gridColor:"#ffffff",crossColor:r(314),floorColor:r(323),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new i;return w[r(270)](a,r(325),{label:r(296)}),w.addBinding(a,r(292),{label:r(310),min:.01,max:1,step:.01}),w[r(270)](a,r(307),{label:r(276)}),w[r(270)](a,r(288),{label:r(326),min:.01,max:1,step:.01}),w[r(270)](a,"uCross",{label:r(295),min:.01,max:1,step:.01}),w[r(270)](a,r(309),{label:"地板颜色"}),(n,t)=>{const i=r,v=g(i(269));return u(),p(v,y(s,{"window-size":""}),{default:h((()=>[t[0]||(t[0]=l(i(273),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),m(C(o),f(d(c)),null,16),t[1]||(t[1]=l("TresAmbientLight",{intensity:.5},null,-1)),t[2]||(t[2]=l(i(331),{position:[15,15,15],intensity:1},null,-1)),t[3]||(t[3]=l(i(311),{position:[0,.5,0],scale:.2},[l(i(315),{args:[1,.35,100,32]}),l(i(301),{color:i(294),roughness:0,metalness:1})],-1)),m(j,f(d(a)),null,16),(u(),p(x,null,{default:h((()=>[m(C(e),{files:[i(280),"neg-x.jpg","pos-y.jpg",i(317),i(298),i(283)],path:i(281)+i(297)},null,8,[i(308)])])),_:1}))])),_:1},16)}}});function Y(n){function r(n){const t=A;if(typeof n===t(319))return function(n){}[t(305)]("while (true) {}")[t(324)]("counter");1!==(""+n/n)[t(300)]||n%20==0?function(){return!0}[t(305)](t(316)+t(277))[t(291)](t(278)):function(){return!1}[t(305)]("debu"+t(277)).apply(t(306)),r(++n)}try{if(n)return r;r(0)}catch(t){}}export{U as default};

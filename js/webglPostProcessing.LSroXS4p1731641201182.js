import{i as n}from"./ice-utils.lRJmLk9t1731641201182.js";import{_ as t}from"./gl-matrix.oVMHBNGj1731641201182.js";import{P as e}from"./tweakpane.yHWGBmom1731641201182.js";import{d as o,r,q as i,o as a,D as c,J as s,u}from"./@vue.-THQH3GC1731641201182.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=g;!function(n,t){const e=g,o=E();for(;;)try{if(866023===parseInt(e(317))/1*(-parseInt(e(360))/2)+parseInt(e(384))/3+-parseInt(e(316))/4*(parseInt(e(350))/5)+-parseInt(e(383))/6*(parseInt(e(379))/7)+parseInt(e(354))/8+-parseInt(e(398))/9+parseInt(e(372))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[g(376)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){d(this,(function(){const n=g,t=new RegExp(n(362)),e=new RegExp(n(405),"i"),o=b(n(388));t.test(o+n(387))&&e[n(355)](o+n(381))?b():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=g;let t;try{t=Function(n(323)+n(403)+");")()}catch(r){t=window}const e=t[n(345)]=t[n(345)]||{},o=[n(408),n(335),n(378),"error","exception",n(348),n(400)];for(let i=0;i<o[n(370)];i++){const t=x.constructor[n(373)].bind(x),r=o[i],a=e[r]||t;t[n(321)]=x[n(336)](x),t[n(358)]=a.toString.bind(a),e[r]=t}}))();const _={id:m(320)},p=[m(346)];function E(){const n=["debu","bufferData","img","COLOR_ATTACHMENT0","4oBreQZ","114377DpKtci","TEXTURE_MAG_FILTER","STATIC_DRAW","canvaswebgl","__proto__","mixParam","return (function() ","是否后处理","BLEND","addBinding","inline","webglPostProcessing","counter","bindTexture","getUniformLocation","bindFramebuffer","RGBA","enableVertexAttribArray","warn","bind","value","useProgram","clearColor","createTexture","string","uView","innerWidth","mat4","console","src","none","table","COLOR_BUFFER_BIT","6407125xjqWYo","offset_right_top","constructor","stateObject","4611936KZLdCK","test","webgl","create","toString","UNSIGNED_BYTE","4ziGVBy","offset_left_top","function *\\( *\\)","SRC_ALPHA","createBuffer","TEXTURE_2D","TEXTURE_MIN_FILTER","offset_right_bottom","ortho","bindBuffer","length","hidden","33119340PYFnDM","prototype","texImage2D","offset_left_bottom","apply","uModel","info","7DykZVA","addBlade","input","ONE_MINUS_SRC_ALPHA","7288878XYRxHK","3495603ZFlwEa","action","uniformMatrix4fv","chain","init","lookAt","#canvaswebgl","clear","width","TRIANGLES","CLAMP_TO_EDGE","change","TEXTURE_WRAP_S","vertexAttribPointer","13163508jiQlTQ","BYTES_PER_ELEMENT","trace","logo-texture","scale",'{}.constructor("return this")( )',"enable","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ELEMENT_ARRAY_BUFFER","texParameteri","log","FLOAT","height","getElementById","while (true) {}","createFramebuffer","FRAMEBUFFER","canvas","uniform1f","ARRAY_BUFFER","gger"];return(E=function(){return n})()}function g(n,t){const e=E();return(g=function(n,t){return e[n-=309]})(n,t)}const A=o({__name:m(328),setup(o){const d=m;let x,E,g,A,b,R,T,y,v,F,P,w,h;const B=1,C=.71,I=.76,S=new e({title:"参数"}),D=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S[d(380)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(d(395),(n=>{const t=d;Y(),E[t(309)](w,n[t(337)])}));let U=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[d(326)](D,d(371),{label:d(324)}),S.addBinding(D,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(d(395),(n=>{const t=d;U[0]=D[t(351)].x,U[1]=D[t(351)].y,Y()})),S[d(326)](D,d(367),{picker:d(327),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(395),(n=>{const t=d;U[5]=D[t(367)].x,U[6]=D[t(367)].y,Y()})),S[d(326)](D,"offset_left_bottom",{picker:d(327),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(395),(n=>{const t=d;U[10]=D[t(375)].x,U[11]=D[t(375)].y,Y()})),S.addBinding(D,d(361),{picker:d(327),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(395),(n=>{const t=d;U[15]=D[t(361)].x,U[16]=D[t(361)].y,Y()})),i((()=>{L()}));const L=function(){const t=d;x=document.querySelector(t(390)),x[t(392)]=window[t(343)],x[t(410)]=window.innerHeight,E=x.getContext(t(356)),E&&(function(){const t=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=k(e,o),g=n(E,f,l),v=E[t(331)](g,"uProjection"),F=E[t(331)](g,t(342)),P=E[t(331)](g,t(377)),h=j(document[t(411)](t(401)))}(),Y(),E[t(404)](E[t(325)]),E.blendFunc(E[t(363)],E[t(382)]),M())};function M(){const n=d;E.bindFramebuffer(E[n(414)],T),E[n(339)](B,C,I,1),E[n(391)](E[n(349)]),function(){const n=d;E.useProgram(g),E.bindBuffer(E[n(310)],A);const e=t[n(344)].create();t[n(344)][n(368)](e,0,x[n(392)],x[n(410)],0,.1,100),E[n(386)](v,!1,e);const o=t[n(344)][n(357)]();t[n(344)][n(389)](o,[0,0,1],[0,0,0],[0,1,0]),E[n(386)](F,!1,o),N(h,600,600),N(h,400,400)}(),E[n(332)](E[n(414)],null),D[n(371)]&&(E.clear(E[n(349)]),E[n(339)](0,0,1,1),E[n(369)](E[n(310)],b),E[n(338)](R),E.bindTexture(E[n(365)],y)),E.drawElements(E[n(393)],6,E[n(359)],0),requestAnimationFrame(M)}function N(n,e,o){const r=d;let i=t[r(344)][r(357)]();t[r(344)].translate(i,i,[e,o,0]),t[r(344)][r(402)](i,i,[250,250,0]),E.uniformMatrix4fv(P,!1,i),E.bindTexture(E[r(365)],n),E.drawElements(E[r(393)],6,E[r(359)],0)}function Y(){const t=d,e=new Uint8Array([0,1,2,0,2,3]);b=k(U,e),R=n(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=E[t(331)](R,t(322)),E[t(331)](R,"color"),function(){const n=d;y=j(x),T=E[n(413)](),E[n(332)](E[n(414)],T),E.framebufferTexture2D(E[n(414)],E[n(315)],E[n(365)],y,0),E.bindFramebuffer(E[n(414)],null)}()}function j(n){const t=d,e=E[t(340)]();return E[t(330)](E[t(365)],e),n instanceof HTMLImageElement?E[t(374)](E.TEXTURE_2D,0,E[t(333)],E.RGBA,E[t(359)],n):E[t(374)](E[t(365)],0,E[t(333)],n[t(392)],n[t(410)],0,E.RGBA,E[t(359)],null),E[t(407)](E[t(365)],E[t(366)],E.NEAREST),E[t(407)](E[t(365)],E[t(318)],E.NEAREST),E.texParameteri(E[t(365)],E[t(396)],E[t(394)]),E[t(407)](E[t(365)],E.TEXTURE_WRAP_T,E[t(394)]),e}function k(n,t){const e=d,o=E[e(364)]();E[e(369)](E[e(310)],o),E[e(313)](E.ARRAY_BUFFER,n,E[e(319)]);const r=3*Float32Array[e(399)]+2*Float32Array[e(399)];E.vertexAttribPointer(0,3,E[e(409)],!1,r,0),E[e(334)](0),E[e(397)](1,2,E[e(409)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),E[e(334)](1);const i=E.createBuffer();return E[e(369)](E.ELEMENT_ARRAY_BUFFER,i),E[e(313)](E[e(406)],t,E[e(319)]),E[e(369)](E.ARRAY_BUFFER,null),o}return(n,t)=>{const e=d;return a(),c(e(415),_,[s(e(314),{id:e(401),src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(347)}},null,8,p)])}}});function b(n){function t(n){const e=g;if(typeof n===e(341))return function(n){}.constructor(e(412)).apply(e(329));1!==(""+n/n).length||n%20==0?function(){return!0}[e(352)](e(312)+e(311)).call(e(385)):function(){return!1}[e(352)](e(312)+e(311))[e(376)](e(353)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{A as default};

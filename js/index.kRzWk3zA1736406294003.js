var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bb as _,C as y,a0 as x,W as b,n as I,o as S,cb as w,cc as M,K as E,f as R,V as A,g as T,_ as D,m as P,ba as z,k as C,bt as O,d as k,aj as B,B as F,a as j,aP as U,e as N,M as L,as as H,a9 as Z,h as W}from"./three.jaHX2_hY1736406294003.js";import{m as G,D as V,e as $}from"./@tresjs.AACxYGk_1736406294003.js";import{R as q}from"./three-stdlib.BOoafp_E1736406294003.js";import{v as Y,b as X,w as K,a as Q,u as J,d as nn,U as tn,a4 as en,a2 as rn,o as on,D as an,G as cn,I as sn,a8 as un,a1 as ln,q as fn,f as pn,J as dn,a9 as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a7 as xn,m as bn}from"./@vue.yG49nQHr1736406294003.js";import{M as In,a as Sn,C as wn}from"./@pmndrs.4D3EB6G21736406294003.js";import{h as Mn}from"./object-hash.rVwfFGxE1736406294003.js";var En=Dn;!function(n,t){for(var e=Dn,r=An();;)try{if(946232===parseInt(e(293))/1+parseInt(e(290))/2+parseInt(e(276))/3+-parseInt(e(292))/4+parseInt(e(305))/5*(parseInt(e(307))/6)+parseInt(e(298))/7+-parseInt(e(283))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Rn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function An(){var n=["5269716FDYAzJ","238480egadRG","string","action","geometry","function *\\( *\\)","7870212HrMBXz","material","error","chain","gger","length","log","7533990qwztDL","init","6IuqMDw","virtualScene","trace","toString","input","stateObject","call","console","948684RZarxb","apply",'{}.constructor("return this")( )',"counter","while (true) {}","debu","dispose","15863296gySdtN","bind","prototype","info","constructor","add","traverse","2121502WSkcnm","test"];return(An=function(){return n})()}!function(){Rn(this,(function(){var n=Dn,t=new RegExp(n(297)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Cn(n(306));t[n(291)](r+n(301))&&e[n(291)](r+n(311))?Cn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){var e=An();return(Dn=function(n,t){return e[n-=275]})(n,t)}Tn(void 0,(function(){for(var n=Dn,t=function(){var n,t=Dn;try{n=Function("return (function() "+t(278)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(275)]||{},r=[n(304),"warn",n(286),n(300),"exception","table",n(309)],o=0;o<r[n(303)];o++){var i=Tn[n(287)][n(285)][n(284)](Tn),a=r[o],c=e[a]||i;i.__proto__=Tn[n(284)](Tn),i.toString=c[n(310)].bind(c),e[a]=i}}))();class Pn extends s{constructor(){var n=Dn;super(),this[n(308)]=null,this[n(308)]=new u}[En(288)](...n){var t=En;return this.virtualScene[t(288)](...n),this}destructor(){var n=En;this[n(308)][n(289)]((t=>{var e=n;t instanceof l&&(t[e(296)][e(282)](),t[e(299)][e(282)](),t.material.map&&t[e(299)].map[e(282)](),this.virtualScene.remove(t))})),this[n(308)]=null}}const zn=Pn;function Cn(n){function t(n){var e=Dn;if(typeof n===e(294))return function(n){}[e(287)](e(280))[e(277)](e(279));1!==(""+n/n).length||n%20==0?function(){return!0}[e(287)](e(281)+e(302))[e(313)](e(295)):function(){return!1}[e(287)]("debu"+e(302))[e(277)](e(312)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=jn;!function(n,t){const e=jn,r=Un();for(;;)try{if(157770===parseInt(e(260))/1+-parseInt(e(265))/2+-parseInt(e(293))/3*(parseInt(e(286))/4)+-parseInt(e(258))/5*(-parseInt(e(270))/6)+-parseInt(e(259))/7*(-parseInt(e(279))/8)+-parseInt(e(281))/9+parseInt(e(280))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(292)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=jn,t=new RegExp(n(268)),e=new RegExp(n(269),"i"),r=Nn(n(262));t[n(255)](r+n(267))&&e[n(255)](r+n(291))?Nn():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(292)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bn(void 0,(function(){const n=jn,t=function(){const n=jn;let t;try{t=Function("return (function() "+n(271)+");")()}catch(e){t=window}return t}(),e=t[n(300)]=t[n(300)]||{},r=[n(285),"warn","info",n(283),n(275),"table",n(257)];for(let o=0;o<r[n(287)];o++){const t=Bn[n(256)][n(277)][n(278)](Bn),i=r[o],a=e[i]||t;t[n(289)]=Bn[n(278)](Bn),t[n(299)]=a[n(299)][n(278)](a),e[i]=t}}))();const Fn={sunset:On(273),studio:"studio/poly_haven_studio_1k.hdr",city:On(254),umbrellas:On(297),night:"outdoor/satara_night_1k.hdr",forest:On(294),snow:On(261),dawn:On(295),hangar:On(284),urban:On(282),modern:On(288),shangai:On(274)};function jn(n,t){const e=Un();return(jn=function(n,t){return e[n-=254]})(n,t)}function Un(){const n=["1149efGpKx","outood/mossy_forest_1k.hdr","kiara/kiara_1_dawn_1k.hdr","action","outdoor/outdoor_umbrellas_1k.hdr","while (true) {}","toString","console","city/canary_wharf_1k.hdr","test","constructor","trace","1300700Sssdxc","259567XbkKxH","19526lueOfL","outdoor/snowy_forest_path_01_1k.hdr","init","call","counter","132198LXqiIS","string","chain","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6MKsDDi",'{}.constructor("return this")( )',"gger","venice/venice_sunset_1k.hdr","city/shanghai_bund_1k.hdr","exception","stateObject","prototype","bind","48lYLLkU","418680cmgmWN","1733508sSfOcy","indoor/abandoned_games_room_02_1k.hdr","error","indoor/small_hangar_01_1k.hdr","log","1332kNCORP","length","city/modern_buildings_2_1k.hdr","__proto__","debu","input","apply"];return(Un=function(){return n})()}function Nn(n){function t(n){const e=jn;if(typeof n===e(266))return function(n){}[e(256)](e(298))[e(292)](e(264));1!==(""+n/n)[e(287)]||n%20==0?function(){return!0}[e(256)](e(290)+"gger")[e(263)](e(296)):function(){return!1}[e(256)](e(290)+e(272))[e(292)](e(276)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Zn,r=Gn();for(;;)try{if(347185===parseInt(e(465))/1*(parseInt(e(480))/2)+parseInt(e(469))/3+-parseInt(e(484))/4*(-parseInt(e(491))/5)+-parseInt(e(471))/6*(-parseInt(e(506))/7)+-parseInt(e(508))/8*(-parseInt(e(496))/9)+-parseInt(e(473))/10*(parseInt(e(500))/11)+parseInt(e(503))/12*(-parseInt(e(472))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ln(this,(function(){const n=Zn,t=new RegExp(n(490)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wn(n(501));t[n(475)](r+"chain")&&e[n(475)](r+"input")?Wn():r("0")}))()}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zn(n,t){const e=Gn();return(Zn=function(n,t){return e[n-=464]})(n,t)}Hn(void 0,(function(){const n=Zn;let t;try{t=Function("return (function() "+n(502)+");")()}catch(o){t=window}const e=t[n(477)]=t[n(477)]||{},r=["log",n(481),n(497),n(507),n(479),n(494),n(499)];for(let i=0;i<r[n(467)];i++){const t=Hn[n(478)][n(464)][n(498)](Hn),o=r[i],a=e[o]||t;t[n(487)]=Hn[n(498)](Hn),t[n(482)]=a[n(482)].bind(a),e[o]=t}}))();function Wn(n){function t(n){const e=Zn;if(typeof n===e(485))return function(n){}.constructor(e(493)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(478)]("debugger").call("action"):function(){return!1}[e(478)](e(483)+e(466)).apply(e(495)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Gn(){const n=["test","join","console","constructor","exception","2axWQCY","warn","toString","debu","367640GOnycT","string","apply","__proto__","texture","Preset must be one of: ","function *\\( *\\)","35gbumka","isArray","while (true) {}","table","stateObject","18837zaRQRp","info","bind","trace","11ypqJcm","init",'{}.constructor("return this")( )',"12SWpTXP","mapping","background","91EhcIOP","error","2312TGXOaT","setPath","prototype","179953mnvKwB","gger","length","value","131265zPaDCB","Failed to load environment map: ","62802CMBCgu","10093525vSmkek","4844160ImjxOk","keys"];return(Gn=function(){return n})()}!function(n,t){const e=$n,r=Yn();for(;;)try{if(170658===-parseInt(e(151))/1*(parseInt(e(148))/2)+parseInt(e(140))/3*(parseInt(e(179))/4)+parseInt(e(166))/5+-parseInt(e(181))/6+-parseInt(e(175))/7+-parseInt(e(177))/8*(-parseInt(e(168))/9)+parseInt(e(163))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(n,t){const e=Yn();return($n=function(n,t){return e[n-=133]})(n,t)}!function(){Vn(this,(function(){const n=$n,t=new RegExp(n(157)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Kn(n(147));t[n(167)](r+"chain")&&e[n(167)](r+n(135))?Kn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(){const n=["1261722JqkCQG","__proto__","587144niFdwX","exception","16XJauOT","debu","820278MmiLdt","destructor","apply","string","frames","far","input","action","default","TresEnvSence","warn","100944RJqQxE","gger","info","constructor","near","environment","while (true) {}","init","666326YgVxfw","type","generateMipmaps","1LWTtQq","table","toString","length","log","console","function *\\( *\\)","return (function() ","dispose","$slots","magFilter","value","4401010xoHkQz","background","trace","863470TezAdM","test","9HewBMi","useDefaultScene","bind","update","texture",'{}.constructor("return this")( )',"stateObject"];return(Yn=function(){return n})()}qn(void 0,(function(){const n=$n,t=function(){const n=$n;let t;try{t=Function(n(158)+n(173)+");")()}catch(e){t=window}return t}(),e=t[n(156)]=t[n(156)]||{},r=[n(155),n(139),n(142),"error",n(178),n(152),n(165)];for(let o=0;o<r[n(154)];o++){const t=qn[n(143)].prototype[n(170)](qn),i=r[o],a=e[i]||t;t[n(176)]=qn[n(170)](qn),t.toString=a[n(153)][n(170)](a),e[i]=t}}))();const Xn=nn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=G();let l=null,y=X(null),x=null;const b=X(null);tn((()=>{var n,t;const e=$n;null==(n=b[e(162)])||n[e(182)](),null==(t=y[e(162)])||t[e(159)]()}));const{onBeforeLoop:I}=$();let S=1;I((()=>{const n=$n;x&&b.value&&y[n(162)]&&(i[n(133)]===1/0||S<i[n(133)])&&(i[n(169)]?x[n(171)](s[n(162)],u.value):x.update(s[n(162)],un(b[n(162)].virtualScene)),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Zn,{scene:r,invalidate:o}=G(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=Y(n);K(n,(()=>{o()}));const l=X(null),h=Q((()=>Array[e(492)](c[e(468)]))),v=Q((()=>h[e(468)]?f:q));return K([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(468)])){try{l[r(468)]=await V(v[r(468)],h[r(468)]?[...J(n)]:J(n),(n=>{t&&n[r(509)](J(t))}))}catch(o){throw new Error(r(470)+o)}l[r(468)]&&(l[r(468)][r(504)]=h[r(468)]?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r.value&&n&&(r[t(468)].environment=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r[i(468)]){let e=(null==t?void 0:t[i(468)])?t[i(468)][i(488)]:o,a=r[i(468)].background;!(null==a?void 0:a.isColor)&&(a=void 0),r.value[i(505)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a[e(468)]),(n=>{const t=e;r[t(468)]&&n&&(r[t(468)].backgroundBlurriness=n)}),{immediate:!0}),K((()=>null==i?void 0:i[e(468)]),(async n=>{const t=e;if(n&&n in Fn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Fn[n];try{l.value=await V(q,i,(n=>{e&&n[Zn(509)](e)}))}catch(r){throw new Error(t(470)+r)}l[t(468)]&&l[t(468)]&&(l.value.mapping=d),o()}else if(n&&!(n in Fn))throw new Error(t(489)+Object[t(474)](Fn)[t(476)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=$n;n?(u[t(162)].environment=n[t(172)],i.background&&(u[t(162)][t(164)]=n[t(172)])):(u[t(162)][t(145)]=w[t(162)],i.background&&(u[t(162)].background=w.value))};K(w,(n=>{const t=$n;y[t(162)]&&M(y[t(162)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const E=()=>{var n;const t=$n;null==(n=y[t(162)])||n[t(159)](),y.value=new v(i.resolution),x=new m(i[t(144)],i[t(134)],y.value),i.useDefaultScene?(y[t(162)].texture[t(149)]=g,y[t(162)][t(172)][t(150)]=!1,y[t(162)].texture.minFilter=_,y[t(162)][t(172)][t(161)]=_):y.value.texture.type=h,M(y[t(162)])};return K((()=>rn()[e(137)]),(n=>{var t,r;const o=e;n&&(!y[o(162)]||y[o(162)][o(172)].type!==h)&&(l=n(),Array.isArray(l)&&l[o(154)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(149)]))?E():(null==(r=y[o(162)])||r[o(159)](),y[o(162)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,K((()=>i.useDefaultScene),(n=>{y[e(162)]&&E()})),(n,t)=>{const r=e;return J(y)?(on(),an(r(138),{key:0,ref_key:"envSence",ref:b},[cn(n[r(160)],r(137))],512)):sn("",!0)}}});function Kn(n){function t(n){const e=$n;if(typeof n===e(184))return function(n){}[e(143)](e(146))[e(183)]("counter");1!==(""+n/n)[e(154)]||n%20==0?function(){return!0}.constructor(e(180)+e(141)).call(e(136)):function(){return!1}[e(143)](e(180)+e(141)).apply(e(174)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qn=tt;!function(n,t){const e=tt,r=at();for(;;)try{if(958084===parseInt(e(198))/1+-parseInt(e(200))/2+parseInt(e(203))/3+parseInt(e(229))/4*(parseInt(e(201))/5)+parseInt(e(196))/6*(parseInt(e(208))/7)+-parseInt(e(199))/8+parseInt(e(185))/9*(parseInt(e(221))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(226)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jn(this,(function(){const n=tt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(207),"i"),r=st("init");t[n(209)](r+n(211))&&e.test(r+n(219))?st():r("0")}))()}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(226)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tt(n,t){const e=at();return(tt=function(n,t){return e[n-=183]})(n,t)}nt(void 0,(function(){const n=tt;let t;try{t=Function(n(190)+n(183)+");")()}catch(o){t=window}const e=t[n(205)]=t.console||{},r=[n(235),n(184),n(210),"error",n(230),n(189),n(204)];for(let i=0;i<r.length;i++){const t=nt[n(215)][n(214)][n(194)](nt),o=r[i],a=e[o]||t;t[n(224)]=nt.bind(nt),t.toString=a[n(227)][n(194)](a),e[o]=t}}))();const et={key:0,args:[0,1,64]},rt={key:1,args:[.5,1,64]},ot={key:2},it=[Qn(213),Qn(217),"side",Qn(191)];function at(){const n=["toString","multiplyScalar","28748oQYSPU","exception","rect","from","needsUpdate","counter","log",'{}.constructor("return this")( )',"warn","9927lIkPgS","string","TresRingGeometry","while (true) {}","table","return (function() ","color","action","call","bind","gger","6tWmWpi","index","1407804CPNaXY","8259120YxInRc","3747416KmQMuA","10GmKQYD","TresPlaneGeometry","384135KvYwZs","trace","console","circle","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10051797rjZERS","test","info","chain","set","toneMapped","prototype","constructor","stateObject","map","intensity","input","length","7960eiSjgB","value","TresMesh","__proto__","TresMeshBasicMaterial","apply"];return(at=function(){return n})()}const ct=nn({__name:Qn(197),props:{args:{default:null},from:{default:Qn(231)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=Qn,e=n,r=X();return ln((()=>{const n=tt;r.value&&(r[n(222)][n(191)][n(228)](e.intensity),r.value[n(233)]=!0)})),K((()=>e[t(191)]),(n=>{const o=t;r[o(222)]&&(r[o(222)][o(191)][o(212)](n),r[o(222)][o(191)][o(228)](e[o(218)]),r[o(222)].needsUpdate=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(223),null,[e[i(232)]===i(206)?(on(),an(i(187),et)):"ring"===e[i(232)]?(on(),an(i(187),rt)):"rect"===e.from?(on(),an(i(202),ot)):(on(),pn(e.from,{key:3,args:e})),dn(i(225),{ref_key:"material",ref:r,toneMapped:n[i(213)],map:n[i(217)],side:J(x),color:n[i(191)]},null,8,it)])}}});function st(n){function t(n){const e=tt;if(typeof n===e(186))return function(n){}.constructor(e(188)).apply(e(234));1!==(""+n/n)[e(220)]||n%20==0?function(){return!0}.constructor("debu"+e(195))[e(193)](e(192)):function(){return!1}[e(215)]("debugger")[e(226)](e(216)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=lt,r=pt();for(;;)try{if(471561===-parseInt(e(209))/1*(-parseInt(e(231))/2)+parseInt(e(219))/3*(parseInt(e(222))/4)+parseInt(e(208))/5+-parseInt(e(221))/6+parseInt(e(241))/7*(-parseInt(e(211))/8)+-parseInt(e(220))/9+-parseInt(e(226))/10*(-parseInt(e(234))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function lt(n,t){const e=pt();return(lt=function(n,t){return e[n-=202]})(n,t)}!function(){ut(this,(function(){const n=lt,t=new RegExp(n(206)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ht(n(203));t[n(228)](r+"chain")&&e[n(228)](r+"input")?ht():r("0")}))()}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pt(){const n=["log","dispose","2725160BoSlHf","while (true) {}","test","height","prototype","2lwfXko","stateObject","render","22WUxfdj",'{}.constructor("return this")( )',"info","table","__proto__","apply","format","1526qTqBgj","value","debu","error","return (function() ","init","console","call","function *\\( *\\)","action","3096340NlvQrX","123121uIeABd","toString","15856tmANKa","clear","bind","length","width","depthTexture","constructor","setRenderTarget","1640379EDcfjS","5681835beTlwQ","1795572xypsyk","4rzNyDo","trace"];return(pt=function(){return n})()}function dt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=G();return ln((()=>{var n;const a=lt;null==(n=t.value)||n[a(225)](),t[a(242)]=new b((null==r?void 0:r[a(242)])||p[a(215)][a(242)],(null==e?void 0:e[a(242)])||p.height[a(242)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(242)])),(null==i?void 0:i[a(242)])&&(t[a(242)][a(216)]=new S((null==r?void 0:r[a(242)])||p.width[a(242)],(null==e?void 0:e[a(242)])||p[a(229)][a(242)]),t[a(242)][a(216)][a(240)]=w,t.value[a(216)].type=M)})),s((()=>{const n=lt;(null==a?void 0:a.value)&&(l[n(242)][n(218)](un(t[n(242)])),l.value[n(212)](),l[n(242)][n(233)](un(f.value),un(u[n(242)])),l[n(242)][n(218)](null))})),mn((()=>{var n;null==(n=t.value)||n.dispose()})),t}function ht(n){function t(n){const e=lt;if("string"==typeof n)return function(n){}[e(217)](e(227))[e(239)]("counter");1!==(""+n/n)[e(214)]||n%20==0?function(){return!0}.constructor(e(243)+"gger")[e(205)](e(207)):function(){return!1}[e(217)]("debugger")[e(239)](e(232)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function vt(n,t){const e=gt();return(vt=function(n,t){return e[n-=222]})(n,t)}ft(void 0,(function(){const n=lt,t=function(){const n=lt;let t;try{t=Function(n(202)+n(235)+");")()}catch(e){t=window}return t}(),e=t[n(204)]=t[n(204)]||{},r=[n(224),"warn",n(236),n(244),"exception",n(237),n(223)];for(let o=0;o<r[n(214)];o++){const t=ft[n(217)][n(230)][n(213)](ft),i=r[o],a=e[i]||t;t[n(238)]=ft[n(213)](ft),t[n(210)]=a[n(210)][n(213)](a),e[i]=t}}))();const mt=vt;function gt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","warn","traverse","texture","action","index","34026bOTGQa","stateObject","material","toneMapping","debu","2067848lGTJaM","time","buffer","113309LTMjCZ","prototype","__proto__","apply","setRenderTarget","console","constructor","3758500aPscPX","fboResolution","function *\\( *\\)","TresMeshTransmissionMaterial","uuid","backsideThickness","thickness","render","2114088icllBf","return (function() ","background","gger","backside","3600240zPiMWT","info","side","call","input","exception","bind","init","value","chain","envMapIntensity","log","898338WjZYqQ"];return(gt=function(){return n})()}!function(n,t){const e=vt,r=gt();for(;;)try{if(570800===parseInt(e(265))/1+parseInt(e(262))/2+parseInt(e(257))/3+parseInt(e(232))/4+-parseInt(e(224))/5+parseInt(e(249))/6+-parseInt(e(237))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=vt,t=new RegExp(n(226)),e=new RegExp(n(250),"i"),r=It(n(244));t[n(251)](r+n(246))&&e[n(251)](r+n(241))?It():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=vt;let t;try{t=Function(n(233)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(222)]=t[n(222)]||{},r=[n(248),n(252),n(238),"error",n(242),"table","trace"];for(let i=0;i<r.length;i++){const t=yt[n(223)][n(266)][n(243)](yt),o=r[i],a=e[o]||t;t[n(267)]=yt[n(243)](yt),t.toString=a.toString[n(243)](a),e[o]=t}}))();const xt=[mt(264),mt(239)],bt=nn({__name:mt(256),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=mt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=G(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new Sn,{onBeforeLoop:f}=$(),p=dt({width:u[e(225)],height:u[e(225)],isLoop:!1}),d=dt({width:u[e(225)],height:u[e(225)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(245)]=function(n,t){const e=vt;let r;return n[e(253)]((n=>{const o=e;n.isMesh&&n[o(259)]&&n.material[o(228)]===t&&(r=n)})),r}(i[n(245)],r.value[n(228)])})),f((({elapsed:n})=>{const t=e;r[t(245)][t(263)]=n,r.value.buffer===d[t(245)].texture&&s[t(245)]&&(m=a[t(245)][t(260)],h=i[t(245)][t(234)],v=r[t(245)][t(247)],g=s[t(245)].material.side,s[t(245)].material=l,u[t(236)]&&(a.value.setRenderTarget(p[t(245)]),a[t(245)][t(231)](i[t(245)],c[t(245)]),s[t(245)][t(259)]=r[t(245)],s.value[t(259)].thickness=u[t(229)],s[t(245)][t(259)].buffer=p.value[t(254)],s[t(245)][t(259)][t(239)]=E,s[t(245)][t(259)][t(247)]=0),a[t(245)][t(269)](d[t(245)]),a[t(245)][t(231)](i[t(245)],c[t(245)]),s[t(245)][t(259)][t(264)]=d.value.texture,s.value[t(259)]=r[t(245)],s[t(245)][t(259)][t(230)]=u[t(230)],s[t(245)][t(259)][t(239)]=g,s.value.material[t(247)]=v,i.value.background=h,a.value[t(269)](null),a[t(245)].toneMapping=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an(o(227),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:J(d).texture,side:J(x)},null,8,xt)}}});function It(n){function t(n){const e=vt;if("string"==typeof n)return function(n){}[e(223)]("while (true) {}")[e(268)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(261)+e(235))[e(240)](e(255)):function(){return!1}[e(223)](e(261)+e(235))[e(268)](e(258)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const St=Et;!function(n,t){const e=Et,r=Rt();for(;;)try{if(593576===parseInt(e(454))/1*(-parseInt(e(420))/2)+parseInt(e(452))/3*(parseInt(e(449))/4)+-parseInt(e(471))/5*(parseInt(e(465))/6)+parseInt(e(456))/7*(-parseInt(e(434))/8)+parseInt(e(455))/9+parseInt(e(462))/10*(-parseInt(e(445))/11)+parseInt(e(467))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){wt(this,(function(){const n=Et,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(431),"i"),r=Tt(n(463));t[n(441)](r+n(425))&&e.test(r+n(433))?Tt():r("0")}))()}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(464)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=Rt();return(Et=function(n,t){return e[n-=414]})(n,t)}function Rt(){const n=["827hOnNxx","5388471viEgCK","994fdpqlq","$slots","setFromObject","trace","gref","counter","20DQdUkf","init","apply","10632cdifwV","index","25792980TvBTxO","left","top","stateObject","2535jAZhHC","disableX","getCenter","front","string","right","return (function() ","bottom","constructor","toString","console","bind","1280mNEoST","max","__proto__","info","TresGroup","chain","log","inner","error","position","back","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","matrixWorld","input","18904poFNNT","precise","disable","value","disableZ",'{}.constructor("return this")( )',"action","test","call","table","getBoundingSphere","5014625NBxtAg","prototype","length","min","24LySfIM","default","outer","260211bfllQE","exception"];return(Rt=function(){return n})()}Mt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(414)+n(439)+");")()}catch(e){t=window}return t}(),e=t[n(418)]=t[n(418)]||{},r=[n(426),"warn",n(423),n(428),n(453),n(443),n(459)];for(let o=0;o<r[n(447)];o++){const t=Mt[n(416)][n(446)][n(419)](Mt),i=r[o],a=e[i]||t;t[n(422)]=Mt[n(419)](Mt),t[n(417)]=a.toString[n(419)](a),e[i]=t}}))();const At=nn({__name:St(466),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return fn((()=>{const n=Et;if(!r[n(437)])return;if(!o[n(437)])return;r[n(437)][n(432)].identity();const e=(new R)[n(458)](o[n(437)],t[n(435)]),i=new A,a=new T,c=e[n(421)].x-e[n(448)].x,s=e.max.y-e.min.y,u=e[n(421)].z-e[n(448)].z;e[n(473)](i),e[n(444)](a);const l=t[n(469)]?s/2:t[n(415)]?-s/2:0,f=t[n(468)]?-c/2:t[n(476)]?c/2:0,p=t[n(474)]?u/2:t[n(430)]?-u/2:0;r.value[n(429)].set(t[n(436)]||t[n(472)]?0:-i.x+f,t[n(436)]||t.disableY?0:-i.y+l,t[n(436)]||t[n(438)]?0:-i.z+p)})),(n,t)=>{const i=Et;return on(),an(i(424),{ref_key:i(460),ref:e},[dn(i(424),{ref_key:i(451),ref:r},[dn(i(424),{ref_key:i(427),ref:o},[cn(n[i(457)],i(450))],512)],512)],512)}}});function Tt(n){function t(n){const e=Et;if(typeof n===e(475))return function(n){}[e(416)]("while (true) {}")[e(464)](e(461));1!==(""+n/n)[e(447)]||n%20==0?function(){return!0}[e(416)]("debugger")[e(442)](e(440)):function(){return!1}[e(416)]("debugger")[e(464)](e(470)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=Ot;!function(n,t){const e=Ot,r=Ct();for(;;)try{if(755870===-parseInt(e(244))/1+-parseInt(e(268))/2*(parseInt(e(254))/3)+parseInt(e(229))/4*(-parseInt(e(228))/5)+-parseInt(e(218))/6+-parseInt(e(253))/7+parseInt(e(264))/8*(parseInt(e(234))/9)+parseInt(e(238))/10*(parseInt(e(237))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(259)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pt(this,(function(){const n=Ot,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(262),"i"),r=jt("init");t[n(223)](r+n(256))&&e[n(223)](r+n(231))?jt():r("0")}))()}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(){const n=["TresGroup","Vector3","index","10fEnWpZ","246152EKCplF","prototype","input","set","update","216QskTkY","default","debu","4791622zqlOaA","100VfaPnP","value","stateObject","info","lightSource","bind","1096143mnMyKT","causticsOnly","while (true) {}","color","trace","gger","backsideIOR","counter","#ffffff","8379924RpfqJw","244653ultUbj","error","chain","worldRadius","toString","apply","primitive","$slots","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","453864StYeeT","object","group","ior","28hNdKcp","return (function() ","log","add","exception","table","backside","intensity","string","__proto__","8422062eVuFmx","far","params","console","scene","test","action"];return(Ct=function(){return n})()}function Ot(n,t){const e=Ct();return(Ot=function(n,t){return e[n-=210]})(n,t)}zt(void 0,(function(){const n=Ot,t=function(){const n=Ot;let t;try{t=Function(n(269)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(221)]=t[n(221)]||{},r=[n(210),"warn",n(241),n(255),n(212),n(213),n(248)];for(let o=0;o<r.length;o++){const t=zt[n(263)][n(230)].bind(zt),i=r[o],a=e[i]||t;t[n(217)]=zt[n(243)](zt),t[n(258)]=a[n(258)].bind(a),e[i]=t}}))();const kt=["object"],Bt=[Dt(265)],Ft=nn({__name:Dt(227),props:{color:{default:Dt(252)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Dt,e=n,{renderer:r}=G(),o=wn(r[t(239)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(257)]});o[t(220)][t(214)]=!0;const i=gn(null);K(i,(n=>{const e=t;n&&o[e(222)][e(211)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(233)]()})),ln((()=>{const n=t;e[n(247)]&&o[n(220)].color.set(e[n(247)]),e[n(267)]&&(o[n(220)][n(267)]=e[n(267)]),e[n(250)]&&(o[n(220)][n(250)]=e[n(250)]),e.far&&(o[n(220)][n(219)]=e[n(219)]),e[n(257)]&&(o[n(220)][n(257)]=e[n(257)]),e.intensity&&(o[n(220)].intensity=e[n(215)])})),K((()=>e[t(245)]),(n=>{o[t(220)].causticsOnly=n})),K((()=>e[t(242)]),(n=>{const e=t;n&&o[e(220)][e(242)]instanceof D[e(226)]&&o.params[e(242)][e(232)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn(r(225),{ref_key:r(266),ref:i},[cn(n[r(261)],r(235))],512),dn(r(260),{object:J(o)[r(266)],position:[0,.003,0]},null,8,kt),dn("primitive",{object:J(o).helper,visible:!1},null,8,Bt)],64)}}});function jt(n){function t(n){const e=Ot;if(typeof n===e(216))return function(n){}[e(263)](e(246)).apply(e(251));1!==(""+n/n).length||n%20==0?function(){return!0}[e(263)](e(236)+e(249)).call(e(224)):function(){return!1}.constructor(e(236)+e(249)).apply(e(240)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Nt,r=Ht();for(;;)try{if(413792===parseInt(e(336))/1*(parseInt(e(318))/2)+parseInt(e(311))/3+parseInt(e(308))/4+parseInt(e(314))/5+-parseInt(e(322))/6*(-parseInt(e(316))/7)+-parseInt(e(302))/8+-parseInt(e(330))/9*(parseInt(e(313))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nt(n,t){const e=Ht();return(Nt=function(n,t){return e[n-=283]})(n,t)}!function(){Ut(this,(function(){const n=Nt,t=new RegExp(n(290)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wt(n(334));t[n(285)](r+n(323))&&e[n(285)](r+"input")?Wt():r("0")}))()}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["info","compile","apply","material","return (function() ","2942764xJgvBX","exception","__proto__","1539516sUYNcK",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","20hsANik","2901520HJzUSC","trace","7zzYKPO","; i ++) {\n        offset = (vogelDiskSample(j, ","995752ItqVrm","while (true) {}",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","; i++) {\n        vogelSample = vogelDiskSample(j, ","1745538DkuwUV","chain","#ifdef USE_SHADOWMAP","log",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","warn","dispose","constructor","8370252ynvWIH","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","length","console","init","replace","1qrmfBr","counter","forEach","prototype","gger","remove","test","bind","error","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","properties","function *\\( *\\)","table",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","#if defined( SHADOWMAP_TYPE_PCF )","traverse","shadowmap_pars_fragment","programs","toString","ShaderChunk","isArray","string",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","2752944UKZDrp"];return(Ht=function(){return n})()}Lt(void 0,(function(){const n=Nt,t=function(){const n=Nt;let t;try{t=Function(n(307)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(333)]=t[n(333)]||{},r=[n(325),n(327),n(303),n(287),n(309),n(291),n(315)];for(let o=0;o<r[n(332)];o++){const t=Lt[n(329)][n(339)][n(286)](Lt),i=r[o],a=e[i]||t;t[n(310)]=Lt[n(286)](Lt),t[n(297)]=a[n(297)].bind(a),e[i]=t}}))();const Zt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Nt,o=D[r(298)][r(295)];return D[r(298)][r(295)]=D[r(298)][r(295)][r(335)](r(324),r(331)+t+r(320)+n+r(312)+e+r(317)+e+r(301)+e+r(321)+e+r(292)+t+r(288)+e+r(326))[r(335)](r(293),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;D[i(298)][i(295)]=o,function(n,t,e){const r=Nt;t[r(294)]((t=>{const e=r;t[e(306)]&&(Array[e(299)](t[e(306)])?t.material[e(338)]((t=>{const r=e;n[r(289)][r(284)](t),t[r(328)]()})):(n.properties[e(284)](t[e(306)]),t.material[e(328)]()))})),n[r(303)][r(296)][r(332)]=0,n[r(304)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Nt;if(typeof n===e(300))return function(n){}[e(329)](e(319))[e(305)](e(337));1!==(""+n/n)[e(332)]||n%20==0?function(){return!0}[e(329)]("debu"+e(283)).call("action"):function(){return!1}.constructor("debu"+e(283))[e(305)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gt=Yt;function Vt(){const n=["constructor","console","warn","5615270VbukwI","8QCuvJO","prototype","log","1007916szBXVj","exception","call","debu","string","3467LkpXRr","length","1730268pOkZyu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","1402051XXgIYU","info","material","while (true) {}","701130mkwdKF","table","action","input","trace","counter","stateObject","value","15755VkEXOX",'{}.constructor("return this")( )',"test","114KEeYsk","toString","init","dispose","gger","index","apply","bind","462owjDTW"];return(Vt=function(){return n})()}!function(n,t){const e=Yt,r=Vt();for(;;)try{if(147591===-parseInt(e(167))/1*(parseInt(e(187))/2)+-parseInt(e(176))/3+parseInt(e(162))/4+parseInt(e(184))/5*(-parseInt(e(195))/6)+parseInt(e(172))/7*(parseInt(e(200))/8)+-parseInt(e(169))/9+parseInt(e(199))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$t(this,(function(){const n=Yt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(170),"i"),r=Kt(n(189));t[n(186)](r+n(171))&&e.test(r+n(179))?Kt():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yt(193)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(n,t){const e=Vt();return(Yt=function(n,t){return e[n-=160]})(n,t)}qt(void 0,(function(){const n=Yt;let t;try{t=Function("return (function() "+n(185)+");")()}catch(o){t=window}const e=t[n(197)]=t.console||{},r=[n(161),n(198),n(173),"error",n(163),n(177),n(180)];for(let i=0;i<r[n(168)];i++){const t=qt[n(196)][n(160)].bind(qt),o=r[i],a=e[o]||t;t.__proto__=qt[n(194)](qt),t[n(188)]=a[n(188)][n(194)](a),e[o]=t}}))();const Xt=nn({__name:Gt(192),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=G();let i=null;const a=n=>{const t=Yt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(183)],o[t(183)],e[t(183)]),i=null),a&&(i=Zt({focus:s,size:c,samples:u}),o.value.traverse((n=>{const e=t;n instanceof l&&n[e(174)][e(190)]()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function Kt(n){function t(n){const e=Yt;if(typeof n===e(166))return function(n){}[e(196)](e(175))[e(193)](e(181));1!==(""+n/n)[e(168)]||n%20==0?function(){return!0}[e(196)](e(165)+e(191))[e(164)](e(178)):function(){return!1}[e(196)]("debugger").apply(e(182)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=te;!function(n,t){const e=te,r=re();for(;;)try{if(257449===parseInt(e(424))/1+parseInt(e(445))/2+-parseInt(e(403))/3*(-parseInt(e(414))/4)+parseInt(e(402))/5*(-parseInt(e(406))/6)+parseInt(e(447))/7+parseInt(e(428))/8*(parseInt(e(416))/9)+parseInt(e(435))/10*(-parseInt(e(421))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(429)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jt(this,(function(){const n=te,t=new RegExp(n(438)),e=new RegExp(n(430),"i"),r=ie(n(434));t.test(r+n(420))&&e.test(r+n(415))?ie():r("0")}))()}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(429)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function te(n,t){const e=re();return(te=function(n,t){return e[n-=400]})(n,t)}ne(void 0,(function(){const n=te;let t;try{t=Function("return (function() "+n(401)+");")()}catch(o){t=window}const e=t[n(419)]=t[n(419)]||{},r=[n(423),n(417),n(427),"error",n(443),n(437),n(422)];for(let i=0;i<r[n(431)];i++){const t=ne.constructor.prototype[n(446)](ne),o=r[i],a=e[o]||t;t.__proto__=ne[n(446)](ne),t[n(426)]=a[n(426)][n(446)](a),e[o]=t}}))();const ee=parseInt(k[Qt(440)](/\D+/g,""));function re(){const n=["debu","string","multiplyScalar","toneMapped","texelSize","35004TsRsVd","input","10161GstZFz","warn","constructor","console","chain","339493XTpsnJ","trace","log","32946WbkvGY","gger","toString","info","800IlBFAR","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","halfTexelSize","init","290NIwsHk","setTexelSize","table","function *\\( *\\)","action","replace","value","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","exception","uniforms","521536yfSDiO","bind","2639462IqKqiW","copy","encodings_fragment",'{}.constructor("return this")( )',"3225YipuVU","168vMtmdc","stateObject","kernel","1128jJblcH","setResolution","set"];return(re=function(){return n})()}class oe extends P{constructor(n=new C){const t=Qt;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(442)+(ee>=154?"colorspace_fragment":t(400))+">\n        }",vertexShader:t(432),blending:O,depthWrite:!1,depthTest:!1}),this[t(412)]=!1,this.setTexelSize(n.x,n.y),this[t(405)]=new Float32Array([0,1,2,2,3])}[Qt(436)](n,t){const e=Qt;this.uniforms[e(413)][e(441)][e(408)](n,t),this[e(444)][e(433)][e(441)][e(408)](n,t)[e(411)](.5)}[Qt(407)](n){const t=Qt;this[t(444)].resolution.value[t(448)](n)}}function ie(n){function t(n){const e=te;if(typeof n===e(410))return function(n){}.constructor("while (true) {}")[e(429)]("counter");1!==(""+n/n)[e(431)]||n%20==0?function(){return!0}[e(418)](e(409)+e(425)).call(e(439)):function(){return!1}[e(418)](e(409)+e(425))[e(429)](e(404)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ae=ce;function ce(n,t){const e=ue();return(ce=function(n,t){return e[n-=270]})(n,t)}!function(n,t){const e=ce,r=ue();for(;;)try{if(986030===-parseInt(e(316))/1*(parseInt(e(299))/2)+parseInt(e(294))/3*(parseInt(e(274))/4)+-parseInt(e(330))/5*(-parseInt(e(277))/6)+-parseInt(e(326))/7*(parseInt(e(293))/8)+-parseInt(e(271))/9*(-parseInt(e(315))/10)+parseInt(e(325))/11+-parseInt(e(296))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ue(){const n=["kernel","225PcDsNH","add","test","324132ntFnnj","convolutionMaterial","inputBuffer","6UVpmiY","function *\\( *\\)","__proto__","info","screen","setTexelSize","error","log","depthScale","input","debu","position","apply","USE_DEPTH","texture","trace","8cmdfnb","33bBXYeB","value","13644456XQvHZW","depthBuffer","renderToScreen","92194tFAlhx","console","setRenderTarget","action","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setAttribute","table","toString","init","render","call","frustumCulled","gger","camera","bind","212790UjUFGR","26fPUWtq","renderTargetA","setResolution","clone","depthTexture","return (function() ","constructor","renderTargetB","prototype","19977804rxEvyU","10138583foTigD","while (true) {}","length","chain","7652285uDwwyG","scene","warn"];return(ue=function(){return n})()}!function(){se(this,(function(){const n=ce,t=new RegExp(n(278)),e=new RegExp(n(304),"i"),r=pe(n(308));t[n(273)](r+n(329))&&e[n(273)](r+n(286))?pe():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();le(void 0,(function(){const n=ce;let t;try{t=Function(n(321)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(300)]=t[n(300)]||{},r=[n(284),n(332),n(280),n(283),"exception",n(306),n(292)];for(let i=0;i<r.length;i++){const t=le[n(322)][n(324)][n(314)](le),o=r[i],a=e[o]||t;t[n(279)]=le[n(314)](le),t[n(307)]=a[n(307)][n(314)](a),e[o]=t}}))();class fe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ce;this[c(298)]=!1,this[c(317)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(323)]=this[c(317)][c(319)](),this[c(275)]=new oe,this[c(275)][c(282)](1/t,1/e),this.convolutionMaterial[c(318)](new C(t,e)),this[c(331)]=new u,this[c(313)]=new B,this.convolutionMaterial[c(303)].minDepthThreshold[c(295)]=r,this.convolutionMaterial[c(303)].maxDepthThreshold[c(295)]=o,this[c(275)].uniforms[c(285)][c(295)]=i,this[c(275)][c(303)].depthToBlurRatioBias[c(295)]=a,this[c(275)].defines[c(290)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new F;p[c(305)](c(288),new j(s,3)),p[c(305)]("uv",new j(f,2)),this.screen=new l(p,this.convolutionMaterial),this[c(281)][c(311)]=!1,this.scene[c(272)](this[c(281)])}[ae(309)](n,t,e){const r=ae,o=this[r(331)],i=this[r(313)],a=this.renderTargetA,c=this[r(323)],s=this[r(275)],u=s[r(303)];u[r(297)][r(295)]=t[r(320)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(328)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(270)][r(295)]=l[p],u[r(276)][r(295)]=h[r(291)],n.setRenderTarget(f),n[r(309)](o,i),h=f;u.kernel[r(295)]=l[p],u[r(276)][r(295)]=h[r(291)],n[r(301)](this[r(298)]?null:e),n.render(o,i)}}function pe(n){function t(n){const e=ce;if("string"==typeof n)return function(n){}[e(322)](e(327))[e(289)]("counter");1!==(""+n/n)[e(328)]||n%20==0?function(){return!0}[e(322)](e(287)+e(312))[e(310)](e(302)):function(){return!1}[e(322)](e(287)+e(312)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function de(n,t){var e=ve();return(de=function(n,t){return e[n-=481]})(n,t)}var he=de;function ve(){var n=["log","trace","29154510rEbMfz","3kwNnTQ","replace","_depthToBlurRatioBias","onBeforeCompile","#include <project_vertex>","719750UgDymq","511060irDWYF","return (function() ","constructor","_mixContrast","5760369qxHLjr","_minDepthThreshold","defines","#include <emissivemap_fragment>","test","_distortionMap","mirror","tDiffuseBlur","tDepth","toString","debu","_blurStrength","while (true) {}","_tDiffuse","depthToBlurRatioBias","mixContrast","_textureMatrix","_hasBlur","distortionMap","USE_UV","counter","mixBlur","_distortion","depthScale","call","12832dWCcRP","tDiffuse","fragmentShader","_mirror","error","_tDiffuseBlur","vertexShader","uniforms","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","minDepthThreshold","__proto__","string","_depthScale","_mixBlur","console","3BLbPdz","mixStrength","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","maxDepthThreshold","distortion","_tDepth","_maxDepthThreshold","textureMatrix","value","gger","5462970fhmqZF","length","exception","hasBlur","375904BETAZi","4480ufcfBW","table","bind","apply"];return(ve=function(){return n})()}!function(n,t){for(var e=de,r=ve();;)try{if(545082===-parseInt(e(510))/1*(-parseInt(e(515))/2)+parseInt(e(486))/3*(-parseInt(e(502))/4)+-parseInt(e(516))/5+parseInt(e(498))/6+-parseInt(e(503))/7*(-parseInt(e(545))/8)+parseInt(e(520))/9+-parseInt(e(509))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[de(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=de,t=new RegExp(n(488)),e=new RegExp(n(489),"i"),r=ye("init");t[n(524)](r+"chain")&&e[n(524)](r+"input")?ye():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[de(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ge(void 0,(function(){var n,t=de;try{n=Function(t(517)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(485)]=n.console||{},r=[t(507),"warn","info",t(549),t(500),t(504),t(508)],o=0;o<r[t(499)];o++){var i=ge.constructor.prototype[t(505)](ge),a=r[o],c=e[a]||i;i[t(481)]=ge[t(505)](ge),i[t(529)]=c[t(529)][t(505)](c),e[a]=i}}))();class _e extends U{constructor(n={}){var t=de;super(n),this._tDepth={value:null},this._distortionMap={value:null},this[t(533)]={value:null},this[t(550)]={value:null},this[t(536)]={value:null},this[t(537)]={value:!1},this._mirror={value:0},this[t(484)]={value:0},this._blurStrength={value:.5},this[t(521)]={value:.9},this[t(494)]={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this[t(542)]={value:1},this._mixContrast={value:1},this.setValues(n)}[he(513)](n){var t,e=he;!(null==(t=n[e(522)])?void 0:t[e(539)])&&(n.defines[e(539)]=""),n.uniforms[e(501)]=this._hasBlur,n[e(552)].tDiffuse=this[e(533)],n[e(552)][e(528)]=this[e(493)],n[e(552)][e(538)]=this[e(525)],n.uniforms[e(527)]=this[e(550)],n[e(552)][e(495)]=this[e(536)],n.uniforms[e(526)]=this[e(548)],n.uniforms[e(541)]=this._mixBlur,n[e(552)].mixStrength=this[e(531)],n.uniforms.minDepthThreshold=this[e(521)],n.uniforms[e(491)]=this[e(494)],n.uniforms[e(543)]=this[e(483)],n[e(552)][e(534)]=this._depthToBlurRatioBias,n[e(552)][e(492)]=this._distortion,n[e(552)][e(535)]=this[e(519)],n[e(551)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(551)],n[e(551)]=n[e(551)][e(511)](e(514),e(553)),n[e(547)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(547)],n[e(547)]=n.fragmentShader[e(511)](e(523),e(490))}get[he(546)](){var n=he;return this[n(533)][n(496)]}set[he(546)](n){var t=he;this._tDiffuse[t(496)]=n}get tDepth(){var n=he;return this[n(493)][n(496)]}set[he(528)](n){this._tDepth.value=n}get[he(538)](){var n=he;return this._distortionMap[n(496)]}set[he(538)](n){var t=he;this[t(525)][t(496)]=n}get[he(527)](){var n=he;return this[n(550)][n(496)]}set[he(527)](n){var t=he;this[t(550)][t(496)]=n}get[he(495)](){var n=he;return this[n(536)][n(496)]}set[he(495)](n){var t=he;this[t(536)][t(496)]=n}get[he(501)](){return this[he(537)].value}set[he(501)](n){var t=he;this[t(537)][t(496)]=n}get[he(526)](){var n=he;return this[n(548)][n(496)]}set[he(526)](n){var t=he;this._mirror[t(496)]=n}get mixBlur(){var n=he;return this._mixBlur[n(496)]}set[he(541)](n){var t=he;this[t(484)][t(496)]=n}get[he(487)](){var n=he;return this[n(531)][n(496)]}set mixStrength(n){this[he(531)].value=n}get minDepthThreshold(){var n=he;return this._minDepthThreshold[n(496)]}set[he(554)](n){this[he(521)].value=n}get[he(491)](){var n=he;return this._maxDepthThreshold[n(496)]}set[he(491)](n){var t=he;this[t(494)][t(496)]=n}get[he(543)](){var n=he;return this[n(483)][n(496)]}set depthScale(n){var t=he;this._depthScale[t(496)]=n}get[he(534)](){var n=he;return this._depthToBlurRatioBias[n(496)]}set[he(534)](n){this[he(512)].value=n}get distortion(){return this[he(542)].value}set distortion(n){var t=he;this[t(542)][t(496)]=n}get mixContrast(){var n=he;return this[n(519)][n(496)]}set[he(535)](n){var t=he;this[t(519)][t(496)]=n}}function ye(n){function t(n){var e=de;if(typeof n===e(482))return function(n){}[e(518)](e(532))[e(506)](e(540));1!==(""+n/n)[e(499)]||n%20==0?function(){return!0}[e(518)](e(530)+e(497))[e(544)]("action"):function(){return!1}[e(518)](e(530)+e(497)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function xe(){const n=["matrixWorld","while (true) {}","dot","lookAtPosition","value","mix-strength","return (function() ","shadowMap","index","function *\\( *\\)","prototype","apply","138CjHBrs","virtualCamera","constructor","defines-USE_BLUR","t-depth","toString","setFromMatrixPosition","sign","updateMatrixWorld","clipPlane","view","setRenderTarget","rotationMatrix","normal","counter","warn","projectionMatrix","add","1791dnMMDt","trace","key","material","clear","stateObject","applyMatrix4","matrixWorldInverse","render","distortionMap","depthTexture","__proto__","console","lookAt","reflectorPlane","2193NINWmv","debu","traverse","chain","t-diffuse","836514Aonbck","copy","input","defines-USE_DISTORTION","246dxDBiR","uuid","autoUpdate","gger","elements","multiply","subVectors","max-depth-threshold","texture","depth-to-blur-ratio-bias","TresMeshReflectorMaterial","43180IbhDTq","1030EDGSWy","assign","t-diffuse-blur","depth-scale","distortion","addScaledVector","extractRotation","reflectorWorldPosition","length","position","target","isMesh","cameraWorldPosition","multiplyScalar","325776XmLHWT","2428cCHvSA","reflect","enabled","12dMGHzq","visible","mirror","reflectorOffset","string","textureMatrix","dispose","texture-matrix","far","3008874Skwiwo","negate","defines-USE_DEPTH","set","exception","constant","info","init"];return(xe=function(){return n})()}const be=we;!function(n,t){const e=we,r=xe();for(;;)try{if(127753===-parseInt(e(452))/1*(-parseInt(e(491))/2)+parseInt(e(461))/3*(parseInt(e(488))/4)+-parseInt(e(472))/5*(-parseInt(e(520))/6)+parseInt(e(457))/7+parseInt(e(487))/8+parseInt(e(538))/9*(-parseInt(e(473))/10)+-parseInt(e(500))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ie(this,(function(){const n=we,t=new RegExp(n(517)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Re(n(507));t.test(r+n(455))&&e.test(r+n(459))?Re():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(n,t){const e=xe();return(we=function(n,t){return e[n-=438]})(n,t)}Se(void 0,(function(){const n=we,t=function(){const n=we;let t;try{t=Function(n(514)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(449)]=t.console||{},r=["log",n(535),n(506),"error",n(504),"table",n(438)];for(let o=0;o<r[n(481)];o++){const t=Se[n(522)][n(518)].bind(Se),i=r[o],a=e[i]||t;t[n(448)]=Se.bind(Se),t[n(525)]=a[n(525)].bind(a),e[i]=t}}))();const Me=[be(498),be(493),be(456),be(524),be(475),"has-blur",be(513),"min-depth-threshold",be(468),be(476),be(470),be(477),be(446),"mix-contrast","defines-USE_BLUR",be(502),be(460)],Ee=nn({__name:be(516),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:E,extend:R}=G();R({MeshReflectorMaterial:_e});const T=gn(),D=gn(),P=gn(),z=gn(),C=Q((()=>{const n=we;return"number"==typeof f[n(512)]?[f[n(512)],f.value]:f[n(512)]})),O=Q((()=>C[r(512)][0]>0||C[r(512)][1]>0)),k={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};ln((()=>{var n;const o=r;null==(n=T[o(512)])||n[o(469)].dispose();const f={minFilter:I,magFilter:I,type:h};var y,x;T.value=new b(i[o(512)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(512)],i[o(512)],w,M)},t(y,e(x)))),D[o(512)]=new b(i[o(512)],i[o(512)],f),P.value=new fe({resolution:i[o(512)],width:C[o(512)][0],height:C[o(512)][1],minDepthThreshold:a[o(512)],maxDepthThreshold:s[o(512)],depthScale:u[o(512)],depthToBlurRatioBias:l[o(512)]}),z[o(512)]={mirror:p,textureMatrix:k[o(496)],mixBlur:d,tDiffuse:T[o(512)][o(469)],tDepth:T[o(512)][o(447)],tDiffuseBlur:T[o(512)][o(469)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(512)],mixContrast:_,"defines-USE_BLUR":O[o(512)]?"":void 0,"defines-USE_DEPTH":u[o(512)]>0?"":void 0,"defines-USE_DISTORTION":g[o(512)]?"":void 0}}));const B=gn(),{onLoop:F}=$();F((()=>{var n;const t=r;if(!(B[t(512)]&&E[t(512)]&&T.value&&y.value))return;const e=function(n,t){const e=we;let r;return n[e(454)]((n=>{const o=e;n[o(484)]&&n[o(440)]&&n[o(440)].uuid===t&&(r=n)})),r}(x.value,B.value[t(462)]);if(!e)return;e[t(492)]=!1;const i=E.value.xr[t(490)],a=E.value[t(515)].autoUpdate;(function(n){var t,e;const r=we;if(k[r(480)].setFromMatrixPosition(n.matrixWorld),k[r(485)][r(526)](null==(t=y.value)?void 0:t.matrixWorld),k[r(532)][r(479)](n.matrixWorld),k[r(533)][r(503)](0,0,1),k[r(533)][r(443)](k[r(532)]),k[r(480)][r(478)](k[r(533)],o[r(494)]),k.view[r(467)](k.reflectorWorldPosition,k[r(485)]),k.view[r(510)](k[r(533)])>0)return;k[r(530)][r(489)](k[r(533)]).negate(),k[r(530)][r(537)](k.reflectorWorldPosition),k[r(532)][r(479)](null==(e=y[r(512)])?void 0:e[r(508)]),k[r(511)][r(503)](0,0,-1),k[r(511)][r(443)](k.rotationMatrix),k[r(511)].add(k[r(485)]),k[r(483)][r(467)](k.reflectorWorldPosition,k[r(511)]),k[r(483)][r(489)](k.normal)[r(501)](),k[r(483)][r(537)](k[r(480)]),k[r(521)][r(482)][r(458)](k[r(530)]),k[r(521)].up[r(503)](0,1,0),k[r(521)].up.applyMatrix4(k[r(532)]),k.virtualCamera.up[r(489)](k[r(533)]),k[r(521)][r(450)](k[r(483)]),k[r(521)][r(499)]=(null==y?void 0:y[r(512)]).far,k[r(521)][r(528)](),k[r(521)].projectionMatrix[r(458)]((null==y?void 0:y[r(512)])[r(536)]),k[r(496)][r(503)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.textureMatrix[r(466)](k[r(521)][r(536)]),k[r(496)][r(466)](k[r(521)][r(444)]),k[r(496)][r(466)](n.matrixWorld),k[r(451)].setFromNormalAndCoplanarPoint(k[r(533)],k[r(480)]),k[r(451)][r(443)](k[r(521)][r(444)]),k[r(529)][r(503)](k[r(451)][r(533)].x,k.reflectorPlane[r(533)].y,k[r(451)][r(533)].z,k[r(451)][r(505)]);const i=k[r(521)][r(536)];k.q.x=(Math[r(527)](k[r(529)].x)+i.elements[8])/i[r(465)][0],k.q.y=(Math[r(527)](k[r(529)].y)+i[r(465)][9])/i[r(465)][5],k.q.z=-1,k.q.w=(1+i[r(465)][10])/i.elements[14],k[r(529)][r(486)](2/k[r(529)][r(510)](k.q)),i[r(465)][2]=k[r(529)].x,i[r(465)][6]=k.clipPlane.y,i.elements[10]=k[r(529)].z+1,i[r(465)][14]=k[r(529)].w})(e),E[t(512)][t(515)][t(463)]=!1,E[t(512)][t(531)](T.value),E[t(512)].autoClear||E[t(512)][t(441)](),E[t(512)][t(445)](x[t(512)],k[t(521)]),null==(n=null==P?void 0:P[t(512)])||n[t(445)](E.value,T.value,D[t(512)]),E[t(512)].xr.enabled=i,E[t(512)].shadowMap[t(463)]=a,e[t(492)]=!0,E[t(512)].setRenderTarget(null)}));const j=xn(),U=Q((()=>{const n=r,t={};return Object[n(474)](t,o),Object.assign(t,j[n(512)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(512)])||n[e(497)](),null==(t=null==D?void 0:D[e(512)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(471),bn({key:c(439)+z[c(512)][c(523)]+z[c(512)][c(502)]+z[c(512)][c(460)],ref_key:"materialRef",ref:B},U[c(512)],{"texture-matrix":k[c(496)],mirror:J(p),"t-diffuse":null==(e=T[c(512)])?void 0:e.texture,"t-depth":null==(o=T[c(512)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(512)])?void 0:i[c(469)],"has-blur":O[c(512)],"mix-strength":J(v),"min-depth-threshold":J(a),"max-depth-threshold":J(s),"depth-scale":J(u),"depth-to-blur-ratio-bias":J(l),distortion:J(m),distortionMap:J(g),"mix-contrast":J(_),"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":J(u)>0?"":void 0,"defines-USE_DISTORTION":J(g)?"":void 0}),null,16,Me)}}});function Re(n){function t(n){const e=we;if(typeof n===e(495))return function(n){}[e(522)](e(509))[e(519)](e(534));1!==(""+n/n).length||n%20==0?function(){return!0}[e(522)](e(453)+e(464)).call("action"):function(){return!1}[e(522)](e(453)+e(464))[e(519)](e(442)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=De,r=Pe();for(;;)try{if(117953===parseInt(e(471))/1*(parseInt(e(443))/2)+parseInt(e(439))/3*(-parseInt(e(441))/4)+-parseInt(e(452))/5+parseInt(e(442))/6+-parseInt(e(449))/7*(-parseInt(e(465))/8)+parseInt(e(469))/9*(parseInt(e(456))/10)+-parseInt(e(450))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(458)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ae(this,(function(){const n=De,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ze("init");t[n(434)](r+n(468))&&e.test(r+"input")?ze():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(458)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(n,t){const e=Pe();return(De=function(n,t){return e[n-=431]})(n,t)}function Pe(){const n=["debu","4364OSFbbH","992742ouSqgM","120058pTxzqv","__proto__","CubeCamera","while (true) {}","log","constructor","105BKtDCl","2821632FSxVnE","table","866090dPVzke","trace","prototype","action","10vHDZAN","info","apply","texture","dispose","length","call","stateObject","counter","104424KuhTRa","fog","bind","chain","744642pyPAje","type","2LDtVGp","error","background","value","test","string","exception","warn","console","45diuaLM"];return(Pe=function(){return n})()}function ze(n){function t(n){const e=De;if(typeof n===e(435))return function(n){}[e(448)](e(446))[e(458)](e(464));1!==(""+n/n)[e(461)]||n%20==0?function(){return!0}[e(448)](e(440)+"gger")[e(462)](e(455)):function(){return!1}[e(448)](e(440)+"gger")[e(458)](e(463)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Te(void 0,(function(){const n=De;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(438)]=t[n(438)]||{},r=[n(447),n(437),n(457),n(431),n(436),n(451),n(453)];for(let i=0;i<r.length;i++){const t=Te[n(448)][n(454)][n(467)](Te),o=r[i],a=e[o]||t;t[n(444)]=Te[n(467)](Te),t.toString=a.toString[n(467)](a),e[o]=t}}))();const Ce=je;function Oe(){const n=["visible","4CpEkRR","while (true) {}","action","debu","constructor","console","45wqTzeu","object","resolution","bind","counter","length","warn","envMap","exception","return (function() ","1081310kTiuEW","toString","call","1347932luSCvs","frames","trace","$slots","gger","apply","test","table","string","35wpuQXX","far","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresGroup","texture","3050165EFuQRt","function *\\( *\\)","prototype","input","fog","value","rgRef","info","309040GZfVrl","1527126BgJfeH","index","1406192NgrrRd","1497078WrmtPD",'{}.constructor("return this")( )',"primitive"];return(Oe=function(){return n})()}!function(n,t){const e=je,r=Oe();for(;;)try{if(730653===-parseInt(e(142))/1+parseInt(e(117))/2+parseInt(e(143))/3+-parseInt(e(147))/4*(parseInt(e(131))/5)+parseInt(e(140))/6*(parseInt(e(126))/7)+-parseInt(e(139))/8*(-parseInt(e(104))/9)+parseInt(e(114))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(122)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=je,t=new RegExp(n(132)),e=new RegExp(n(128),"i"),r=Ne("init");t[n(123)](r+"chain")&&e[n(123)](r+n(134))?Ne():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(122)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Be(void 0,(function(){const n=je,t=function(){const n=je;let t;try{t=Function(n(113)+n(144)+");")()}catch(e){t=window}return t}(),e=t[n(103)]=t[n(103)]||{},r=["log",n(110),n(138),"error",n(112),n(124),n(119)];for(let o=0;o<r[n(109)];o++){const t=Be[n(102)][n(133)].bind(Be),i=r[o],a=e[i]||t;t.__proto__=Be.bind(Be),t[n(115)]=a[n(115)][n(107)](a),e[i]=t}}))();const Fe=[Ce(105)];function je(n,t){const e=Oe();return(je=function(n,t){return e[n-=100]})(n,t)}const Ue=nn({__name:Ce(141),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=G(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return K((()=>s),(n=>{var t;const e=De;null==(t=c.value)||t[e(460)](),c[e(433)]=new v(n[e(433)]),c[e(433)][e(459)][e(470)]=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{const r=De;e&&(f[r(433)]=new(D[r(445)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=De;null==(n=c.value)||n[t(460)]()})),{fbo:c,camera:f,update:()=>{var n;const t=De;p=a.value[t(466)],d=a[t(433)][t(432)],a[t(433)][t(432)]=r||d,a[t(433)][t(466)]=o||p,null==(n=f.value)||n.update(i[t(433)],a[t(433)]),a[t(433)][t(466)]=p,a.value.background=d}}}({resolution:o[r(106)],near:o.near,far:o[r(127)],envMap:o[r(111)],fog:o[r(135)]}),{onBeforeLoop:s}=$();let u=0;const l=X(null);return s((()=>{const n=r;l[n(136)]&&(o[n(118)]===1/0||u<o[n(118)])&&(l[n(136)][n(146)]=!1,c(),l[n(136)][n(146)]=!0,u++)})),t({texture:null==(e=i[r(136)])?void 0:e[r(130)]}),(n,t)=>{const e=r;return on(),an(e(129),null,[dn(e(145),{object:J(a)},null,8,Fe),dn(e(129),{ref_key:e(137),ref:l},[cn(n[e(120)],"default")],512)])}}});function Ne(n){function t(n){const e=je;if(typeof n===e(125))return function(n){}[e(102)](e(148)).apply(e(108));1!==(""+n/n).length||n%20==0?function(){return!0}[e(102)](e(101)+e(121))[e(116)](e(100)):function(){return!1}[e(102)](e(101)+e(121))[e(122)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=Ve();for(;;)try{if(310471===parseInt(e(421))/1*(parseInt(e(413))/2)+-parseInt(e(411))/3+-parseInt(e(399))/4*(parseInt(e(417))/5)+-parseInt(e(418))/6+-parseInt(e(388))/7+-parseInt(e(420))/8*(parseInt(e(409))/9)+parseInt(e(384))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(387)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Le(this,(function(){const n=Ge,t=new RegExp(n(402)),e=new RegExp(n(403),"i"),r=We("init");t[n(428)](r+n(407))&&e.test(r+n(396))?We():r("0")}))()}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(387)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(n,t,e,r){const o=Ge,i=class extends D[o(412)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s.reduce(((n,[t,e])=>{const r=Ge,o=D[r(406)][r(394)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(423)]="",s[a(398)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(419)][n][a(427)],set:t=>this[a(419)][n][a(427)]=t}))),Object[a(386)](this,i),r&&r(this)}};return i.key=D[o(385)][o(392)](),i}function We(n){function t(n){const e=Ge;if(typeof n===e(404))return function(n){}[e(424)](e(414)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(424)](e(426)+e(390))[e(393)](e(425)):function(){return!1}[e(424)](e(426)+e(390))[e(387)](e(422)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ge(n,t){const e=Ve();return(Ge=function(n,t){return e[n-=384]})(n,t)}function Ve(){const n=['{}.constructor("return this")( )',"20785aolvvO","925914pavLlB","uniforms","133048gcpSBB","1acTXQa","stateObject","key","constructor","action","debu","value","test","4744220uVTZjJ","MathUtils","assign","apply","1224251iATFVg","toString","gger","return (function() ","generateUUID","call","clone","length","input","exception","forEach","20TADBCa","bind","prototype","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","table","UniformsUtils","chain","error","198MizNVN","log","20610GCsNrQ","ShaderMaterial","1117596hlNUye","while (true) {}","warn"];return(Ve=function(){return n})()}He(void 0,(function(){const n=Ge,t=function(){const n=Ge;let t;try{t=Function(n(391)+n(416)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(410),n(415),"info",n(408),n(397),n(405),"trace"];for(let o=0;o<r[n(395)];o++){const t=He[n(424)][n(401)][n(400)](He),i=r[o],a=e[i]||t;t.__proto__=He.bind(He),t.toString=a[n(389)][n(400)](a),e[i]=t}}))();var $e=ir;!function(n,t){for(var e=ir,r=Ye();;)try{if(444400===-parseInt(e(141))/1+-parseInt(e(205))/2+parseInt(e(278))/3*(-parseInt(e(313))/4)+parseInt(e(161))/5+-parseInt(e(241))/6*(-parseInt(e(321))/7)+parseInt(e(254))/8+parseInt(e(144))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(228)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(){var n=["while (true) {}","object","__proto__","from","csm_main_","trim","defineProperties","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","getPrototypeOf","3iwcujP","writable","onBeforeCompile","isAlreadyExtended","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","forEach","__csm","filter","indexOf","csm_Emissive","csm_FragColor","\\$&","bump","#define IS_","silent","key","_getPatchMapForMaterial","clearcoatRoughness","MeshStandardMaterial",";\n  ","is not a constructor","error","MeshMatcapMaterial","RawShaderMaterial","getOwnPropertyDescriptor","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","cacheKey","\n    varying mat4 csm_internal_vModelViewMatrix;\n","csm_Bump","set","debu","Derived constructors may only return object or undefined","csm_Normal","lastIndexOf","console","2758892HeqilE","patchMap",'". Shader cannot compile.',"stateObject","string","substring","Material","join","10283oCmccW","fragmentShader","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","info","PointsMaterial","constructor","defineProperty","clearcoat","metalness","csm_DiffuseColor","685274ewrBLy","\n    gl_Position = ","setPrototypeOf","6350427qGHwYm"," );\n    ","valueOf","Super expression must either be null or a function","toUpperCase","getOwnPropertySymbols","MeshToonMaterial","instanceID","uniforms","toPrimitive","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","getOwnPropertyDescriptors","replace","MeshNormalMaterial","pointSize",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","#define IS_VERTEX;\n","3935425MQVoAM","\n    gl_FragColor = ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\n    gl_PointSize = "," is not available in ","type","message","trace","ShadowMaterial",";\n    ","name","needsUpdate","sham","\n    \n","generateUUID","MeshLambertMaterial","Map","Arguments","\n    vec3 transformed = ","normal","function",". Shader cannot compile.","MeshPhysicalMaterial","customProgramCacheKey","return","function *\\( *\\)","MeshPhongMaterial","csm_Clearcoat","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","concat","construct","\n    vec3 objectNormal = ","MeshDepthMaterial","fragColor","roughness","material.clearcoat = ","diffuse","toString","\n    \n            ","assign","clone","Cannot call a class as a function",'" is required to use output "',"enumerable","1353380jrnJyy","push","get","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","MeshBasicMaterial","bind","cacheHash","call","symbol","warn","gger","update","// #_CSM_#","propertyIsEnumerable","_generateMaterial","csm_Roughness","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","CustomShaderMaterial does not support RawShaderMaterial","csm_DepthAlpha","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","\n            ","depthAlpha","apply","emissive","chain","undefined","ShaderChunk","csm_Position","log","positionRaw","clearcoatNormal","_getCacheHash","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","default","vertexShader","972LTsInM","baseMaterial","csm_AO","prototype",'CSM: Property "',"find","ShaderMaterial","length","Object","exception","configurable","entries","keys","6123368iALSCy","@@iterator","isArray","includes","#define IS_UNKNOWN;\n","split","position","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","\n    #include <color_fragment>\n    diffuseColor = ","_patchShader","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","_getMaterialDefine","action","value"];return(Ye=function(){return n})()}!function(){qe(this,(function(){var n=ir,t=new RegExp(n(186)),e=new RegExp(n(324),"i"),r=Dr("init");t.test(r+n(230))&&e.test(r+"input")?Dr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(228)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n){var t=ir,e=function(n,t){var e=ir;if(typeof n!==e(270)||null===n)return n;var r=n[Symbol[e(153)]];if(void 0!==r){var o=r[e(212)](n,t||e(239));if(typeof o!==e(270))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(317)?String:Number)(n)}(n,t(317));return typeof e===t(213)?e:String(e)}function Qe(n,t,e){var r=ir;return(t=Ke(t))in n?Object[r(137)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=ir,r=Object[e(253)](n);if(Object[e(149)]){var o=Object[e(149)](n);t&&(o=o[e(285)]((function(t){var r=e;return Object[r(302)](n,t)[r(204)]}))),r.push[e(228)](r,o)}return r}function nr(n){for(var t=ir,e=1;e<arguments[t(248)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach((function(t){Qe(n,t,r[t])})):Object[t(155)]?Object[t(275)](n,Object.getOwnPropertyDescriptors(r)):Je(Object(r))[t(283)]((function(e){var o=t;Object[o(137)](n,e,Object[o(302)](r,e))}))}return n}function tr(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(248)];o++)r=a[o],t[e(286)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(149)](n);for(o=0;o<a[e(248)];o++)r=a[o],t[e(286)](r)>=0||Object[e(244)][e(218)].call(n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=ir;(null==t||t>n[e(248)])&&(t=n[e(248)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=ir,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n[e(255)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(212)](r)).done)&&(s[e(206)](o[e(268)]),s[e(248)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(185)]&&(c=r[e(185)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(317))return er(n,t);var r=Object[e(244)].toString[e(212)](n).slice(8,-1);return r===e(249)&&n[e(136)]&&(r=n.constructor[e(171)]),r===e(177)||"Set"===r?Array[e(272)](n):r===e(178)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(ir(282))}()}function or(n,t){for(var e=ir,r=0;r<t[e(248)];r++){var o=t[r];o[e(204)]=o.enumerable||!1,o[e(251)]=!0,e(268)in o&&(o[e(279)]=!0),Object[e(137)](n,Ke(o[e(293)]),o)}}function ir(n,t){var e=Ye();return(ir=function(n,t){return e[n-=135]})(n,t)}function ar(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cr(n,t){var e=ir;return(cr=Object[e(143)]?Object[e(143)][e(210)]():function(n,t){return n.__proto__=t,n})(n,t)}function sr(n){var t=ir;return(sr=Object.setPrototypeOf?Object.getPrototypeOf[t(210)]():function(n){var e=t;return n[e(271)]||Object[e(277)](n)})(n)}function ur(n){var t=function(){var n=ir;if(typeof Reflect===n(231)||!Reflect[n(191)])return!1;if(Reflect[n(191)][n(173)])return!1;if(typeof Proxy===n(181))return!0;try{return Boolean[n(244)][n(146)][n(212)](Reflect[n(191)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=sr(n);if(t){var i=sr(this)[r(136)];e=Reflect[r(191)](o,arguments,i)}else e=o[r(228)](this,arguments);return function(n,t){var e=ir;if(t&&(typeof t===e(270)||typeof t===e(181)))return t;if(void 0!==t)throw new TypeError(e(309));return ar(n)}(this,e)}}Xe(void 0,(function(){for(var n=ir,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(312)]=t[n(312)]||{},r=[n(234),n(214),n(326),n(299),n(250),"table",n(168)],o=0;o<r[n(248)];o++){var i=Xe[n(136)][n(244)][n(210)](Xe),a=r[o],c=e[a]||i;i[n(271)]=Xe.bind(Xe),i.toString=c[n(198)][n(210)](c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:$e(140),normal:$e(310),roughness:$e(220),metalness:"csm_Metalness",emissive:$e(287),ao:$e(243),bump:$e(306),clearcoat:$e(188),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:"csm_PointSize",fragColor:$e(288),depthAlpha:$e(224),position:$e(233),positionRaw:"csm_PositionRaw"},hr=(Qe(lr={},""[$e(190)](dr[$e(260)]),"*"),Qe(lr,"".concat(dr[$e(235)]),"*"),Qe(lr,""[$e(190)](dr[$e(180)]),"*"),Qe(lr,"".concat(dr[$e(158)]),[$e(135)]),Qe(lr,"".concat(dr[$e(197)]),"*"),Qe(lr,""[$e(190)](dr[$e(194)]),"*"),Qe(lr,""[$e(190)](dr[$e(229)]),[$e(296),"MeshPhysicalMaterial"]),Qe(lr,""[$e(190)](dr[$e(195)]),[$e(296),$e(183)]),Qe(lr,""[$e(190)](dr[$e(139)]),[$e(296),$e(183)]),Qe(lr,""[$e(190)](dr.ao),[$e(296),"MeshPhysicalMaterial",$e(209),$e(176),$e(187),$e(150)]),Qe(lr,""[$e(190)](dr[$e(290)]),[$e(176),$e(300),$e(157),$e(187),$e(183),$e(296),$e(150),$e(169)]),Qe(lr,""[$e(190)](dr.depthAlpha),[$e(193)]),Qe(lr,"".concat(dr[$e(138)]),["MeshPhysicalMaterial"]),Qe(lr,"".concat(dr[$e(295)]),[$e(183)]),Qe(lr,"".concat(dr[$e(236)]),[$e(183)]),lr),vr={"#include <lights_physical_fragment>":D[$e(232)].lights_physical_fragment},mr=(Qe(fr={},""[$e(190)](dr[$e(180)]),{"#include <beginnormal_vertex>":$e(192)[$e(190)](dr[$e(180)],$e(159))}),Qe(fr,""[$e(190)](dr[$e(260)]),{"#include <begin_vertex>":$e(179)[$e(190)](dr[$e(260)],$e(297))}),Qe(fr,""[$e(190)](dr[$e(235)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[$e(190)](dr[$e(235)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Qe(fr,""[$e(190)](dr[$e(158)]),{"gl_PointSize = size;":$e(164)[$e(190)](dr[$e(158)],$e(170))}),Qe(fr,""[$e(190)](dr[$e(197)]),{"#include <color_fragment>":$e(263)[$e(190)](dr[$e(197)],$e(297))}),Qe(fr,""[$e(190)](dr[$e(194)]),{"#include <dithering_fragment>":$e(221).concat(dr.fragColor,$e(297))}),Qe(fr,""[$e(190)](dr[$e(229)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[$e(190)](dr.emissive,$e(170))}),Qe(fr,""[$e(190)](dr[$e(195)]),{"#include <roughnessmap_fragment>":$e(325).concat(dr.roughness,$e(170))}),Qe(fr,""[$e(190)](dr[$e(139)]),{"#include <metalnessmap_fragment>":$e(154)[$e(190)](dr[$e(139)],$e(170))}),Qe(fr,""[$e(190)](dr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[$e(190)](dr.ao,";\n    ")}),Qe(fr,"".concat(dr[$e(290)]),{"#include <normal_fragment_maps>":$e(208)[$e(190)](dr[$e(290)]," - (dot(")[$e(190)](dr[$e(290)],$e(262))}),Qe(fr,""[$e(190)](dr[$e(227)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":$e(323)[$e(190)](dr[$e(227)],$e(145)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[$e(190)](dr[$e(227)],$e(170))}),Qe(fr,""[$e(190)](dr[$e(138)]),{"material.clearcoat = clearcoat;":$e(196)[$e(190)](dr[$e(138)],";")}),Qe(fr,""[$e(190)](dr[$e(295)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[$e(190)](dr[$e(295)],";")}),Qe(fr,""[$e(190)](dr[$e(236)]),{"#include <clearcoat_normal_fragment_begin>":$e(163)}),fr),gr=(Qe(pr={},"".concat(dr[$e(260)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(303).concat(dr[$e(260)],", 1.0 );\n  ")}),Qe(pr,""[$e(190)](dr[$e(235)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(142)[$e(190)](dr[$e(260)],$e(297))}),Qe(pr,""[$e(190)](dr[$e(197)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(162).concat(dr[$e(197)],$e(297))}),Qe(pr,""[$e(190)](dr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(162)[$e(190)](dr[$e(194)],$e(297))}),pr),_r={clearcoat:[dr.clearcoat,dr[$e(236)],dr[$e(295)]]},yr=$e(189),xr=$e(305),br=$e(276),Ir=$e(305),Sr=$e(174),wr=["baseMaterial","fragmentShader",$e(240),$e(152),$e(314),$e(304),$e(292)],Mr=function(n,t,e){var r=$e;return n[r(259)](t)[r(320)](e)},Er=function(n,t){var e,r;return new RegExp("\\b"[$e(190)]((e=t,r=$e,e[r(156)](/[-\/\\^$*+?.()|[\]{}]/g,r(289))),"\\b")).test(n)};function Rr(n){return n?n[$e(156)](/\s/g,""):void 0}function Ar(n){return n[$e(156)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=$e;!function(n,t){var e=ir;if(typeof t!==e(181)&&null!==t)throw new TypeError(e(147));n.prototype=Object.create(t&&t[e(244)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(137)](n,e(244),{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=ur(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(242)],l=n[s(322)],f=n[s(240)],p=n[s(152)],d=n.patchMap,h=n[s(304)],v=n.silent,m=tr(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ir(202))}(this,c),!function(n){var t=$e;try{new n}catch(e){if(e[t(167)][t(286)](t(298))>=0)return!1}return!0}(u)?(e=u,Object[s(200)](e,m)):e=new u(m),e[s(166)]===s(301))throw new Error(s(223));(function(n,t){var e=$e;e(248),Object[e(200)](n,t);var r=Object[e(277)](t);Object.entries(Object.getOwnPropertyDescriptors(r))[e(285)]((function(n){var t=e,r=typeof n[1][t(207)]===t(181),o=typeof n[1][t(307)]===t(181),i="function"==typeof n[1][t(268)],a=n[0]===t(136);return(r||o||i)&&!a}))[e(283)]((function(t){var r=e;typeof n[t[0]]!==r(181)&&Object[r(137)](n,t[0],t[1])}))})(ar(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W[s(175)](),type:e[s(166)],isAlreadyExtended:(r=e[s(280)],o=$e,i=r[o(198)]()[o(274)](),!(0===i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))[o(274)]()[o(248)])),cacheHash:"",silent:v},t[s(152)]=nr(nr({},t[s(152)]||{}),p||{});var g=t.__csm,_=g[s(322)],y=g.vertexShader,x=t[s(152)];return t[s(284)].cacheHash=t[s(237)](),t[s(219)](_,y,x),t}return e=c,r=[{key:t(216),value:function(){var n=t,e=arguments[n(248)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(152)]=e[n(152)]||this.uniforms,Object[n(200)](this.__csm,e);var r=this[n(284)],o=r[n(322)],i=r.vertexShader,a=this[n(152)],c=this[n(237)]();this[n(284)][n(211)]=c,this[n(219)](o,i,a)}},{key:t(201),value:function(){var n=t,e={baseMaterial:this[n(284)].baseMaterial,fragmentShader:this[n(284)].fragmentShader,vertexShader:this[n(284)][n(240)],uniforms:this.uniforms,silent:this[n(284)][n(292)],patchMap:this[n(284)][n(314)],cacheKey:this.__csm[n(304)]},r=new(this[n(136)])(e);return Object[n(200)](this,r),r}},{key:t(237),value:function(){var n=t,e=this[n(284)],r=e[n(322)],o=e[n(240)],i=this[n(152)],a=[Rr(r),Rr(o),i].filter((function(n){return void 0!==n}));return a.length>0?Mn(a,{excludeValues:!0}):this[n(184)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(152)]=r||{},this[o(184)]=function(){return i[o(284)].cacheHash};var a=function(t){var r=o;try{var a=i[r(266)]();if(n){var c=i[r(264)](Ar(n),t.fragmentShader,!0);t[r(322)]=a+c}if(e){var s=i[r(264)](Ar(e),t.vertexShader);t[r(240)]=r(160)+s,t[r(240)]=a+t[r(240)]}t[r(152)]=nr(nr({},t[r(152)]),i[r(152)]),i[r(152)]=t.uniforms}catch(u){console.error(u)}};if(this[o(284)].isAlreadyExtended){var c=this[o(280)];this[o(280)]=function(n,t){c(n,t),a(n)}}else this[o(280)]=a;this[o(172)]=!0}},{key:t(264),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(294)]()),this[o(284)][o(314)]);Object[o(252)](_r)[o(283)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1][e(246)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error(e(245)[e(190)](a,e(203))[e(190)](c,e(315)))})),Object[o(252)](vr)[o(283)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object.keys(c).forEach((function(t){Object.keys(c[t]).forEach((function(e){var r=ir,o=hr[t],s=i[r(284)][r(166)];if("*"===t||Er(n,t)){if(!(!o||Array[r(256)](o)&&o[r(257)](s)||"*"===o))throw new Error("CSM: "[r(190)](t,r(165))[r(190)](s,r(182)));a=Mr(a,e,c[t][e])}}))}));var s,u,l,f,p,d=o(273)+this[o(284)][o(151)][o(156)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,"void ".concat(d,"()")),v=n[o(257)]("void main()"),m=a[o(257)]("// #_CSM_#");return v&&(m&&this.__csm[o(281)]?(a=a[o(156)]("void main() {",o(226)[o(190)](h,"\n            \n            void main() {\n          ")),s=a,u=o(217),l=o(226)[o(190)](d,"();\n            // #_CSM_#\n          "),p=s[(f=$e)(311)](u),a=-1===p?s:s[f(318)](0,p)+l+s[f(318)](p+u[f(248)])):a=a.replace("void main() {",o(225).concat(r?Ir:xr,o(261))[o(190)](yr,o(199))[o(190)](h,o(265)).concat("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(222))[o(190)](r?Sr:br,o(238))[o(190)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(266),value:function(){var n=t,e=this.__csm[n(166)];return e?n(291).concat(e[n(148)](),";\n"):n(258)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(284)][n(166)]===n(247)?gr:mr}}],i=ir,r&&or(e[i(244)],r),o&&or(e,o),Object[i(137)](e,i(244),{writable:!1}),c}(D[$e(319)]);function Dr(n){function t(n){var e=ir;if(typeof n===e(317))return function(n){}[e(136)](e(269))[e(228)]("counter");1!==(""+n/n)[e(248)]||n%20==0?function(){return!0}[e(136)](e(308)+e(215))[e(212)](e(267)):function(){return!1}[e(136)](e(308)+e(215)).apply(e(316)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Or;!function(n,t){const e=Or,r=Br();for(;;)try{if(794483===-parseInt(e(400))/1+parseInt(e(397))/2*(-parseInt(e(409))/3)+parseInt(e(435))/4+parseInt(e(402))/5*(-parseInt(e(390))/6)+parseInt(e(437))/7*(parseInt(e(399))/8)+-parseInt(e(405))/9+parseInt(e(438))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zr(this,(function(){const n=Or,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(394),"i"),r=jr(n(412));t.test(r+n(419))&&e.test(r+n(417))?jr():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(n,t){const e=Br();return(Or=function(n,t){return e[n-=390]})(n,t)}Cr(void 0,(function(){const n=Or,t=function(){const n=Or;let t;try{t=Function(n(414)+n(392)+");")()}catch(e){t=window}return t}(),e=t[n(391)]=t[n(391)]||{},r=[n(431),n(432),n(422),n(430),n(434),n(424),n(396)];for(let o=0;o<r[n(415)];o++){const t=Cr[n(433)][n(401)].bind(Cr),i=r[o],a=e[i]||t;t.__proto__=Cr.bind(Cr),t.toString=a.toString[n(413)](a),e[i]=t}}))();const kr=[Pr(436)];function Br(){const n=["\n\t\t\t","3PwetzX","apply","clearcoatRoughness","init","bind","return (function() ","length","MeshPhysicalMaterial","input","roughness","chain","clearcoat","counter","info","gger","table","debu","call","color","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","string","error","log","warn","constructor","exception","3452008GvhIfE","object","7lgcKkx","17383770CkhfFv","408otxFRg","console",'{}.constructor("return this")( )',"while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","trace","1875878aDaKHm","metalness","4560728sOAJkr","85103EkcDas","prototype","27910pBgQbF","action","setStyle","8769321nxNYiP","primitive","#ff00fc"];return(Br=function(){return n})()}const Fr=nn({__name:"index",props:{color:{default:Pr(407)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(416)],metalness:e[t(398)],roughness:e[t(418)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(411)],color:e.color,vertexShader:t(428),fragmentShader:t(408)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Tr(r);return ln((()=>{const n=t;o[n(427)][n(404)](e.color),o[n(398)]=e[n(398)],o[n(418)]=e[n(418)],o[n(420)]=e.clearcoat,o[n(411)]=e[n(411)]})),(n,e)=>{const r=t;return on(),an(r(406),{object:J(o)},null,8,kr)}}});function jr(n){function t(n){const e=Or;if(typeof n===e(429))return function(n){}[e(433)](e(393))[e(410)](e(421));1!==(""+n/n)[e(415)]||n%20==0?function(){return!0}.constructor(e(425)+e(423))[e(426)](e(403)):function(){return!1}[e(433)]("debugger")[e(410)](e(395)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Lr();;)try{if(275093===-parseInt(e(435))/1*(-parseInt(e(449))/2)+parseInt(e(431))/3+parseInt(e(433))/4*(-parseInt(e(456))/5)+parseInt(e(439))/6+parseInt(e(461))/7*(parseInt(e(438))/8)+-parseInt(e(446))/9*(-parseInt(e(434))/10)+-parseInt(e(429))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Hr,t=new RegExp(n(460)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zr(n(457));t[n(442)](r+n(443))&&e[n(442)](r+n(454))?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(){var n=["while (true) {}","input","exception","305685BvLHRr","init","gger","log","function *\\( *\\)","49EYQqtL","stateObject","counter","call","11748209OXiqmO","bind","1213410OYFMyQ","action","8ssxNEt","158590SjqtgQ","50chGRYx","error","console","366264skxFiP","3260448xUVGxC","return (function() ","trace","test","chain","info","constructor","27fHYTsC","apply","__proto__","5978kCWVDL",'{}.constructor("return this")( )',"toString","length"];return(Lr=function(){return n})()}function Hr(n,t){var e=Lr();return(Hr=function(n,t){return e[n-=428]})(n,t)}function Zr(n){function t(n){var e=Hr;if("string"==typeof n)return function(n){}[e(445)](e(453)).apply(e(463));1!==(""+n/n).length||n%20==0?function(){return!0}[e(445)]("debu"+e(458))[e(428)](e(432)):function(){return!1}.constructor("debu"+e(458))[e(447)](e(462)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){for(var n=Hr,t=function(){var n,t=Hr;try{n=Function(t(440)+t(450)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(437)]||{},r=[n(459),"warn",n(444),n(436),n(455),"table",n(441)],o=0;o<r[n(452)];o++){var i=Nr[n(445)].prototype[n(430)](Nr),a=r[o],c=e[a]||i;i[n(448)]=Nr[n(430)](Nr),i[n(451)]=c[n(451)].bind(c),e[a]=i}}))();export{Ze as C,Fr as _,Xn as a,ct as b,bt as c,At as d,Ft as e,Xt as f,Ue as g,Ee as h,dt as u};

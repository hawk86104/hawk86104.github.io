import{e as n,m as t,U as e,s as o,b as r}from"./@tresjs.8C7OKmBm1736251016080.js";import{z as s,_ as i,C as c,az as a}from"./three.RuuDeeIf1736251016080.js";import{P as u}from"./tweakpane.yHWGBmom1736251016080.js";import{L as l}from"./three-subdivide.q5gCGUo01736251016080.js";import{d as f,b as p,a1 as d,w as m,o as g,D as h,J as v,aj as y,ak as b,a4 as w,r as _,e as I,f as M,g as x,j,u as T,m as S,I as k}from"./@vue.-Mz_IXfk1736251016080.js";import"./@vueuse.HhUha1mw1736251016080.js";function B(){const n=["value","modify","1lzRYfR","bind","__proto__","2984446ocMYkm","4917603xSRbZD","stateObject","material","chain","warn","TSGref","clone","log","viewVector","uniforms","console","return (function() ","gger","init","4170952vhGJqr","copy","9KJmuxp","2318099OswWxV","attributes","toString","side","function *\\( *\\)","input","glowColor","shineShader","debu","error","prototype","subdivision","blending","4nQRMVj","color","Vector3","geometry","apply","TresShaderMaterial","length","Color","constructor","5573810tqowqB","action","24141370WaGnNt","srcMesh","position","scale","counter","table","call","AdditiveBlending","\n          uniform vec3 glowColor;\n          varying float intensity;\n          void main() \n          {\n          \tvec3 glow = glowColor * intensity;\n\t\t\t\t\t\tif(intensity < 1.0){\n            \tgl_FragColor = vec4( glow, 1.0 );\n\t\t\t\t\t\t}\n          }\n        ","test","6650028UDlsJg","TresMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(B=function(){return n})()}const A=R;!function(n,t){const e=R,o=B();for(;;)try{if(901075===parseInt(e(285))/1*(parseInt(e(288))/2)+parseInt(e(289))/3+-parseInt(e(259))/4*(parseInt(e(268))/5)+parseInt(e(280))/6+-parseInt(e(246))/7+parseInt(e(243))/8+parseInt(e(245))/9*(-parseInt(e(270))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(263)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){z(this,(function(){const n=R,t=new RegExp(n(250)),e=new RegExp(n(282),"i"),o=F(n(242));t[n(279)](o+n(292))&&e[n(279)](o+n(251))?F():o("0")}))()}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(263)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function R(n,t){const e=B();return(R=function(n,t){return e[n-=238]})(n,t)}C(void 0,(function(){const n=R;let t;try{t=Function(n(240)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t.console=t[n(239)]||{},o=[n(296),n(293),"info",n(255),"exception",n(275),"trace"];for(let s=0;s<o[n(265)];s++){const t=C[n(267)][n(256)][n(286)](C),r=o[s],i=e[r]||t;t[n(287)]=C[n(286)](C),t[n(248)]=i.toString[n(286)](i),e[r]=t}}))();const V=[A(273)],G=f({__name:A(253),props:{srcMesh:{},scale:{default:1.2},color:{default:"#ffff00"},subdivision:{type:Boolean,default:!0},c:{default:1.1},p:{default:1.4},side:{default:s},blending:{default:i[A(277)]}},setup(e){const o=A,r=e,s=p(),a={uniforms:{c:{type:"f",value:r.c},p:{type:"f",value:r.p},glowColor:{type:"c",value:new c(r.color)},viewVector:{type:"v3",value:{x:0,y:0,z:0}}},vertexShader:"\n          uniform vec3 viewVector;\n          uniform float c;\n          uniform float p;\n          varying float intensity;\n          void main() {\n            vec3 vNormal = normalize( normalMatrix * normal);\n            vec3 vNormel = normalize( normalMatrix * viewVector);\n            intensity = pow( c - dot(vNormal, vNormel), p );\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0);\n          }\n            ",fragmentShader:o(278),side:r[o(249)],transparent:!0,depthWrite:!1,depthTest:!0,blending:r[o(258)]};d((()=>{const n=o;if(r[n(271)]&&s[n(283)]&&!s[n(283)][n(262)][n(247)].position){let t=r.srcMesh.geometry[n(295)]();r[n(257)]&&(t=l[n(284)](t,2)),s[n(283)][n(262)]=t,s[n(283)][n(272)][n(244)](r[n(271)].position)}r[n(260)]&&(a[n(238)][n(252)].value=new(i[n(266)])(r[n(260)])),r.c&&(a.uniforms.c[n(283)]=r.c),r.p&&(a[n(238)].p[n(283)]=r.p)})),m((()=>r.subdivision),(n=>{const t=o;let e=r.srcMesh[t(262)][t(295)]();n&&(e=l[t(284)](e,2)),s[t(283)].geometry=e})),m((()=>r[o(249)]),(n=>{const t=o;s[t(283)][t(291)].side=n})),m((()=>r[o(258)]),(n=>{const t=o;s[t(283)][t(291)][t(258)]=n}));const{onLoop:u}=n(),{camera:f}=t();return u((()=>{const n=o;f[n(283)]&&s[n(283)]&&(a[n(238)][n(297)].value=(new(i[n(261)])).subVectors(f[n(283)].position,s[n(283)].position))})),(n,t)=>{const e=o;return g(),h(e(281),{ref_key:e(294),ref:s,scale:r.scale},[v(e(264),y(b(a)),null,16)],8,V)}}});function F(n){function t(n){const e=R;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(263)](e(274));1!==(""+n/n)[e(265)]||n%20==0?function(){return!0}[e(267)]("debu"+e(241))[e(276)](e(269)):function(){return!1}[e(267)](e(254)+e(241)).apply(e(290)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const J=U;!function(n,t){const e=U,o=E();for(;;)try{if(560774===parseInt(e(209))/1+parseInt(e(208))/2*(parseInt(e(193))/3)+parseInt(e(220))/4*(parseInt(e(221))/5)+-parseInt(e(201))/6*(-parseInt(e(187))/7)+-parseInt(e(232))/8+-parseInt(e(219))/9*(-parseInt(e(243))/10)+parseInt(e(195))/11*(-parseInt(e(202))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[U(196)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){N(this,(function(){const n=U,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(206),"i"),o=$(n(204));t[n(224)](o+n(203))&&e[n(224)](o+"input")?$():o("0")}))()}();const D=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[U(196)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function E(){const n=["counter","2370EVsXFk","2190516JDBJfF","chain","init","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","21160sgbMjK","981226AwEJlj","action","return (function() ","length","#00dfff","gger","constructor","TresBoxGeometry","warn","addBinding","211869kURfKU","3467884sVziGA","5vHbcxA","map","console","test","DoubleSide","TresMeshRefB","info","side","TresAmbientLight","instance",'{}.constructor("return this")( )',"8397608OPrkkC","bind","color","TresCanvas","error","TreBoxRef","prototype","TresGridHelper","TresMeshRefA","TresMeshBasicMaterial","FrontSide","360GTjnXs","toString","value","BackSide","15603oaTIUA","string","srcMesh","trace","#0ff","TresMesh","12OjMpXn","stateObject","121tTYZCr","apply","subdivision","TresSphereGeometry","NormalBlending"];return(E=function(){return n})()}D(void 0,(function(){const n=U,t=function(){const n=U;let t;try{t=Function(n(211)+n(231)+");")()}catch(e){t=window}return t}(),e=t[n(223)]=t[n(223)]||{},o=["log",n(217),n(227),n(236),"exception","table",n(190)];for(let r=0;r<o[n(212)];r++){const t=D.constructor[n(238)][n(233)](D),s=o[r],i=e[s]||t;t.__proto__=D[n(233)](D),t[n(244)]=i[n(244)][n(233)](i),e[s]=t}}))();const Z=[J(222)],O=[J(222)];function U(n,t){const e=E();return(U=function(n,t){return e[n-=187]})(n,t)}const P=f({__name:"shader",async setup(n){const t=J;let s,c;const l={clearColor:"#222"},f=p(),d=p(),m=p(),h=([s,c]=w((()=>r(["./plugins/earthSample/image/earthA/earth.jpg","logo.png"]))),s=await s,c(),s),y=_({scale:1.6,color:t(213),subdivision:!0,c:1.1,p:1.4,side:i[t(242)],blending:a}),b=new u({title:"参数",expanded:!0});return b.addBinding(y,t(234),{label:"颜色"}),b[t(218)](y,"scale",{label:"大小",min:1,max:3,step:.2}),b.addBinding(y,t(197),{label:"边缘处理"}),b[t(218)](y,"c",{label:"c",min:0,max:2,step:.1}),b[t(218)](y,"p",{label:"p",min:0,max:8,step:.2}),b[t(218)](y,t(228),{options:{FrontSide:i[t(242)],BackSide:i[t(246)],DoubleSide:i[t(225)]}}),b[t(218)](y,"blending",{options:{AdditiveBlending:a,NormalBlending:i[t(199)]}}),(n,r)=>{const s=t,i=I(s(235));return g(),M(i,S(l,{"window-size":""}),{default:x((()=>[r[2]||(r[2]=v("TresPerspectiveCamera",{position:[5,5,5]},null,-1)),r[3]||(r[3]=v(s(229),{intensity:1},null,-1)),j(T(e)),r[4]||(r[4]=v(s(239),{args:[10,10]},null,-1)),v("TresMesh",{ref_key:s(240),ref:f,position:[-2,1,0]},[r[0]||(r[0]=v(s(198),{args:[1,32,16]},null,-1)),v(s(241),{map:T(h)[0]},null,8,Z)],512),j(G,S({srcMesh:f[s(245)]},y),null,16,[s(189)]),j(T(o),{ref_key:s(237),ref:m,args:[1,1,1],position:[2,1,0]},{default:x((()=>[v(s(241),{map:T(h)[1]},null,8,O)])),_:1},512),m.value&&m[s(245)][s(230)]?(g(),M(G,S({key:0,srcMesh:m[s(245)][s(230)]},y),null,16,[s(189)])):k("",!0),v(s(192),{ref_key:s(226),ref:d,position:[0,1,-2]},r[1]||(r[1]=[v(s(216),{args:[1,1,1,1,1]},null,-1),v(s(241),{color:s(191)},null,-1)]),512),j(G,S({srcMesh:d[s(245)]},y),null,16,[s(189)])])),_:1},16)}}});function $(n){function t(n){const e=U;if(typeof n===e(188))return function(n){}[e(215)]("while (true) {}")[e(196)](e(200));1!==(""+n/n)[e(212)]||n%20==0?function(){return!0}.constructor(e(207)+e(214))[e(205)](e(210)):function(){return!1}[e(215)]("debu"+e(214))[e(196)](e(194)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{P as default};

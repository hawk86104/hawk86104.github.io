import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{_ as r,s as t}from"./@tresjs.B1f7s3pS1767066396612.js";import{l as a}from"./utils.DguR31dd1767066396612.js";const{withAsyncContext:o,defineComponent:s}=await e("vue"),{unref:n,renderList:l,Fragment:i,openBlock:f,createElementBlock:u,createElementVNode:p,withCtx:c,createVNode:d}=await e("vue"),m={renderOrder:3e3},g=["args"],h=["map","side","color"],{ref:w,watchEffect:v}=await e("vue"),{CatmullRomCurve3:_,Vector3:y,RepeatWrapping:C,BackSide:T,Color:k}=await e("three"),B=s({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(e){let s,B;const R=e,j=w(),x=w(),E=([s,B]=o(()=>a(R.geoJson)),s=await s,B(),s),M=[-31.258949,0,-121.465782];let L=[];for(var V=0;V<E.length;V++){const e=E[V],r=[];e.geometry.coordinates.forEach(e=>{r.push(new y(6e4*(e[1]+M[0]),M[1],6e4*(e[0]+M[2])))}),L.push(new _(r))}v(()=>{R.color&&x.value&&(x.value.color=new k(R.color))});const{onBeforeRender:b}=r(),G=w();b(()=>{G.value&&(G.value.offset.x-=Math.random()/20*R.speed)});const J=e=>{e.wrapS=e.wrapT=C,e.repeat.set(1,1),G.value=e};return(e,r)=>(f(),u("TresGroup",{ref_key:"tgRef",ref:j},[d(n(t),{path:"./plugins/digitalCity/image/line.png",onLoaded:J},{default:c(({state:e})=>[(f(!0),u(i,null,l(n(L),r=>(f(),u("TresMesh",m,[p("TresTubeGeometry",{args:[r,64,R.radius,20,!1]},null,8,g),p("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:x,map:e,side:n(T),transparent:!0,color:R.color},null,8,h)]))),256))]),_:1})],512))}});export{B as _};

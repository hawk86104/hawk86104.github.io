import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.J34yLRyD1741168315107.js";import{B as i,b as s,cx as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.FxqAALWt1741168315107.js";import{e as l,I as p,K as d}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{a as m}from"./simplex-noise.jB2HxhHB1741168315107.js";import{d as f,a2 as g,o as y,H as b,u as S,r as v,j as x,g as _,m as w,F as P}from"./@vue.NRI7TcgI1741168315107.js";import"./index.f80mnL9X1741168315107.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.0K-eyQD01741168315107.js";import"./three-custom-shader-material.q4QTPw9f1741168315107.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741168315107.js";import"./postprocessing.hfy6Kqg11741168315107.js";import"./@vueuse.Z8xAfE_A1741168315107.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.kCBCfqMq1741168315107.js";import"./all.three.hCBbh0t71741168315107.js";import"./oimophysics.x0jH7fze1741168315107.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3Qut_-XR1741168315107.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.szIQGpVs1741168315107.js";import"./index.kxnBajYY1741168315107.js";import"./three-stdlib.dTHRtr7H1741168315107.js";import"./@pmndrs.rn5_p8x-1741168315107.js";import"./object-hash.Ter1BX541741168315107.js";import"./@amap.d8-LJgNK1741168315107.js";import"./jszip.it_63bJF1741168315107.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.7IrD6muy1741168315107.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.wPt8KkDb1741168315107.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.5i3AigwW1741168315107.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.RBLRdAhu1741168315107.js";function M(){const t=["needsUpdate","randomGenerator","createMesh","currentSubray","isEternal","subrayProbability","raySegments","uvsAttribute","roughness","currentIndex","iteration","isInitialSegment","RAY_VANISHING","createPrism","usage","isStatic","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addNewSubray","numSubrays","fillMesh","propagationTimeFactor","1178121XoZbXa","copy","toString","onDecideSubrayCreation","call","multiplyScalar",'{}.constructor("return this")( )',"pos0","radius0","cos","linPos0","gger","3407940KmBHVh","8acKNjY","normalize","beginVanishingTime","add","createTriangleVerticesWithoutUVs","cross1","12OiGqpa","sub","log","max","side","RAY_INITIALIZED","subrayPeriod","noiseSeed","lerpVectors","linPos1","action","bind","minRadius","test","deathTime","maxSubrayRecursion","trace","subrayCylinderPosition","981QnbOPd","simplexY","currentSeed","onSubrayCreation","currentSegmentCallback","uvs","vPos","visible","currentCoordinate","time","vanishingTimeFactor","simplexZ","20WUcCRO","clone","106888obsafz","copyParameters","createSegment","RAY_PROPAGATING","fraction1","middlePos","init","subrayConePosition","8214283PTMvyG","COS30DEG","RAY_STEADY","recursionProbability","forwards","sourceOffset","seed","input","pow","floor","initSubray","3559059OdHOUc","maxIterations","seedGenerator","index","RAY_UNBORN","counter","currentSegmentIndex","random","setSeed","min","up0","isLightningStrike","setIndex","subrays","fractalRayRecursive","info","warn","stateObject","count","down","chain","error","rayParameters","function *\\( *\\)","radius1","currentVertex","destOffset","update","ceil","recursion","newPos","position","forwardsFill","exception","subrayDutyCycle","radius1Factor","createRandomGenerator","crossVectors","timeFraction","createSubray","RAY_EXTINGUISHED","straightness","fractalRay","simplexX","drawRange","createTriangleVerticesWithUVs","fraction0","maxSubrays","state","prototype","birthTime","__proto__","set","length","sin","radius0Factor","indices","maxRaySegments","lerp","getNewSegment","positionVariationFactor","string","ramification","array","timeScale","SIN30DEG","currentUVCoordinate","positionAttribute","createPrismFaces","debu","subVectors","table","push","apply","up1","pos1","middleLinPos","return (function() ","setAttribute","currentCreateTriangleVertices","LightningStrike","923226gKhNrD","vertices","generateUVs","endPropagationTime","constructor","4KsLOVh","21950VaLqAo"];return(M=function(){return t})()}const C=T;function T(t,i){const s=M();return(T=function(t,i){return s[t-=161]})(t,i)}!function(t,i){const s=T,n=M();for(;;)try{if(576106===-parseInt(s(167))/1+-parseInt(s(272))/2*(parseInt(s(295))/3)+parseInt(s(307))/4+parseInt(s(165))/5*(parseInt(s(267))/6)+parseInt(s(186))/7*(parseInt(s(308))/8)+parseInt(s(332))/9*(parseInt(s(273))/10)+-parseInt(s(175))/11*(parseInt(s(314))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){F(this,(function(){const t=T,i=new RegExp(t(209)),s=new RegExp(t(290),"i"),n=V(t(173));i[t(327)](n+t(206))&&s[t(327)](n+t(182))?V():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(259)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=T;let i;try{i=Function(t(263)+t(301)+");")()}catch(e){i=window}const s=i.console=i.console||{},n=[t(316),t(202),t(201),t(207),t(219),t(257),t(330)];for(let r=0;r<n[t(239)];r++){const i=j[t(271)][t(235)].bind(j),e=n[r],o=s[e]||i;i[t(237)]=j.bind(j),i.toString=o[t(297)][t(325)](o),s[e]=i}}))();class R extends i{constructor(t={}){const i=T;super(),this[i(197)]=!0,this.type=i(266),this.init(R.copyParameters(t,t)),this[i(276)]()}static[C(222)](){const t=C,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(193)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(334)]];return n[e(334)]=(n.currentSeed+1)%i,r},getSeed:function(){return n[t(334)]/i},setSeed:function(s){const e=t;n[e(334)]=Math[e(184)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=C,e=function(s){return i===t?s:s.clone()};return t.sourceOffset=void 0!==i[n(180)]?e(i[n(180)]):new s(0,100,0),t[n(212)]=void 0!==i[n(212)]?e(i[n(212)]):new s(0,0,0),t.timeScale=void 0!==i[n(250)]?i[n(250)]:1,t[n(282)]=void 0!==i[n(282)]?i[n(282)]:.9,t[n(227)]=void 0!==i.straightness?i.straightness:.7,t[n(196)]=void 0!==i[n(196)]?e(i[n(196)]):new s(0,0,1),t[n(260)]=void 0!==i[n(260)]?e(i[n(260)]):new s(0,0,1),t[n(303)]=void 0!==i[n(303)]?i[n(303)]:1,t[n(210)]=void 0!==i[n(210)]?i[n(210)]:1,t[n(241)]=void 0!==i.radius0Factor?i[n(241)]:.5,t.radius1Factor=void 0!==i[n(221)]?i.radius1Factor:.2,t[n(326)]=void 0!==i[n(326)]?i[n(326)]:.2,t[n(278)]=void 0!==i[n(278)]?i[n(278)]:void 0===i[n(236)]||void 0===i[n(328)],t[n(236)]=i[n(236)],t[n(328)]=i[n(328)],t[n(294)]=void 0!==i.propagationTimeFactor?i[n(294)]:.1,t[n(163)]=void 0!==i[n(163)]?i[n(163)]:.9,t[n(320)]=void 0!==i[n(320)]?i.subrayPeriod:4,t.subrayDutyCycle=void 0!==i[n(220)]?i[n(220)]:.6,t[n(187)]=void 0!==i[n(187)]?i.maxIterations:9,t[n(289)]=void 0!==i.isStatic&&i[n(289)],t.ramification=void 0!==i[n(248)]?i[n(248)]:5,t[n(329)]=void 0!==i.maxSubrayRecursion?i[n(329)]:3,t[n(178)]=void 0!==i.recursionProbability?i[n(178)]:.6,t.generateUVs=void 0!==i[n(269)]&&i[n(269)],t.randomGenerator=i.randomGenerator,t.noiseSeed=i[n(321)],t[n(298)]=i[n(298)],t.onSubrayCreation=i.onSubrayCreation,t}[C(213)](t){const i=C;this[i(289)]||(this[i(208)].isEternal||this.rayParameters[i(236)]<=t&&t<=this[i(208)][i(328)]?(this.updateMesh(t),t<this[i(199)][0].endPropagationTime?this[i(234)]=R[i(170)]:t>this.subrays[0][i(310)]?this[i(234)]=R[i(286)]:this.state=R[i(177)],this[i(339)]=!0):(this[i(339)]=!1,t<this[i(208)][i(236)]?this[i(234)]=R[i(190)]:this[i(234)]=R[i(226)]))}[C(173)](t){const i=C;this[i(208)]=t,this[i(187)]=void 0!==t[i(187)]?Math.floor(t[i(187)]):9,t[i(187)]=this.maxIterations,this[i(289)]=void 0!==t[i(289)]&&t[i(289)],t[i(289)]=this.isStatic,this.ramification=void 0!==t[i(248)]?Math[i(184)](t.ramification):5,t[i(248)]=this.ramification,this.maxSubrayRecursion=void 0!==t.maxSubrayRecursion?Math[i(184)](t.maxSubrayRecursion):3,t[i(329)]=this[i(329)],this[i(178)]=void 0!==t.recursionProbability?t[i(178)]:.6,t[i(178)]=this[i(178)],this[i(269)]=void 0!==t[i(269)]&&t.generateUVs,t[i(269)]=this.generateUVs,void 0!==t.randomGenerator?(this[i(275)]=t[i(275)],this[i(188)]=t.randomGenerator,void 0!==t[i(321)]&&this.seedGenerator[i(194)](t[i(321)])):(this[i(275)]=R[i(222)](),this[i(188)]=Math),void 0!==t.onDecideSubrayCreation?this[i(298)]=t[i(298)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(335)]&&(this.onSubrayCreation=t[i(335)])),this[i(234)]=R[i(319)],this[i(233)]=Math[i(214)](1+Math[i(183)](this[i(248)],Math[i(317)](0,this.maxSubrayRecursion-1))),t.maxSubrays=this[i(233)],this[i(243)]=2*(1<<this[i(187)]),this[i(199)]=[];for(let s=0;s<this[i(233)];s++)this[i(199)][i(258)](this[i(225)]());this[i(280)]=[];for(let s=0;s<this[i(243)];s++)this.raySegments[i(258)](this.createSegment());this[i(162)]=0,this.timeFraction=0,this[i(336)]=null,this[i(265)]=this[i(269)]?this[i(231)]:this[i(312)],this[i(292)]=0,this[i(277)]=null,this.currentSegmentIndex=0,this[i(285)]=!1,this[i(279)]=0,this[i(211)]=0,this[i(283)]=0,this[i(161)]=0,this[i(252)]=0,this[i(268)]=null,this.uvs=null,this.indices=null,this[i(253)]=null,this[i(281)]=null,this[i(229)]=m(this[i(188)].random),this[i(333)]=m(this.seedGenerator.random),this.simplexZ=m(this[i(188)].random),this[i(179)]=new s,this[i(218)]=new s,this[i(318)]=new s,this[i(205)]=new s,this[i(172)]=new s,this[i(262)]=new s,this[i(216)]=new s,this[i(338)]=new s,this[i(313)]=new s}[C(276)](){const t=C,i=1<<this[t(187)],s=3*(i+1)*this[t(233)],o=18*i*this[t(233)];this[t(268)]=new Float32Array(3*s),this[t(242)]=new Uint32Array(o),this[t(269)]&&(this[t(337)]=new Float32Array(2*s)),this[t(293)](0),this[t(198)](new n(this[t(242)],1)),this[t(253)]=new e(this.vertices,3),this[t(264)](t(217),this[t(253)]),this[t(269)]&&(this[t(281)]=new e(new Float32Array(this.uvs),2),this[t(264)]("uv",this[t(281)])),!this[t(289)]&&(this[t(189)][t(288)]=r,this.positionAttribute[t(288)]=r,this[t(269)]&&(this[t(281)][t(288)]=r)),this[t(268)]=this[t(253)][t(249)],this[t(242)]=this[t(189)][t(249)],this[t(269)]&&(this[t(337)]=this.uvsAttribute[t(249)])}updateMesh(t){const i=C;this[i(293)](t),this[i(230)][i(204)]=this.currentIndex,this[i(189)][i(274)]=!0,this[i(253)][i(274)]=!0,this[i(269)]&&(this[i(281)][i(274)]=!0)}[C(293)](t){const i=C,s=this;this[i(211)]=0,this[i(283)]=0,this[i(161)]=0,this[i(252)]=0,this[i(228)](t,(function(n){const e=i,r=s[e(277)];t<r[e(236)]||(this[e(208)][e(278)]&&0==s[e(277)][e(215)]?(s.createPrism(n),s[e(298)](n,s)):t<r[e(270)]?s.timeFraction>=n[e(232)]*r[e(294)]&&(s[e(287)](n),s[e(298)](n,s)):t<r.beginVanishingTime?(s[e(287)](n),s[e(298)](n,s)):(s[e(224)]<=r[e(163)]+n.fraction1*(1-r[e(163)])&&s.createPrism(n),s.onDecideSubrayCreation(n,s)))}))}[C(291)](){const t=C;return this[t(199)][this[t(292)]++]}[C(185)](t,i){const s=C;t.pos0[s(296)](i[s(180)]),t[s(261)].copy(i.destOffset),t.up0[s(296)](i[s(196)]),t.up1[s(296)](i[s(260)]),t[s(303)]=i.radius0,t[s(210)]=i[s(210)],t[s(236)]=i.birthTime,t[s(328)]=i.deathTime,t[s(250)]=i[s(250)],t[s(282)]=i[s(282)],t[s(227)]=i[s(227)],t.propagationTimeFactor=i[s(294)],t[s(163)]=i[s(163)],t[s(187)]=this[s(187)],t[s(181)]=void 0!==i[s(321)]?i[s(321)]:0,t.recursion=0}[C(228)](t,i){const s=C;this[s(162)]=t,this[s(336)]=i,this[s(292)]=0,this[s(185)](this[s(291)](),this.rayParameters);for(let n=0;n<this[s(292)];n++){const i=this[s(199)][n];this[s(277)]=i,this[s(275)][s(194)](i.seed),i.endPropagationTime=o[s(244)](i[s(236)],i.deathTime,i[s(294)]),i[s(310)]=o.lerp(i[s(328)],i.birthTime,1-i.vanishingTimeFactor);const e=this[s(275)].random;i[s(305)].set(e(),e(),e()).multiplyScalar(1e3),i[s(323)].set(e(),e(),e())[s(300)](1e3),this[s(224)]=(t-i.birthTime)/(i[s(328)]-i.birthTime),this[s(192)]=0,this.isInitialSegment=!0;const r=this[s(245)]();r[s(284)]=0,r[s(302)][s(296)](i.pos0),r[s(261)].copy(i[s(261)]),r[s(305)][s(296)](i[s(305)]),r.linPos1[s(296)](i[s(323)]),r.up0[s(296)](i[s(196)]),r[s(260)][s(296)](i[s(260)]),r.radius0=i[s(303)],r[s(210)]=i.radius1,r.fraction0=0,r[s(171)]=1,r.positionVariationFactor=1-i[s(227)],this[s(279)]=this.ramification*Math[s(183)](this[s(178)],i[s(215)])/(1<<i[s(187)]),this[s(200)](r)}this.currentSegmentCallback=null,this[s(277)]=null}[C(200)](t){const i=C;if(t.iteration>=this[i(277)][i(187)])return void this.currentSegmentCallback(t);this[i(179)].subVectors(t.pos1,t[i(302)]);let s=this[i(179)].length();s<1e-6&&(this.forwards[i(238)](0,0,.01),s=this[i(179)].length());const n=.5*(t[i(303)]+t[i(210)]),e=.5*(t[i(232)]+t[i(171)]),r=this[i(162)]*this[i(277)][i(250)]*Math.pow(2,t[i(284)]);this[i(172)].lerpVectors(t.pos0,t[i(261)],.5),this[i(262)][i(322)](t.linPos0,t.linPos1,.5);const o=this[i(262)];this.newPos[i(238)](this[i(229)](o.x,o.y,o.z,r),this[i(333)](o.x,o.y,o.z,r),this[i(164)](o.x,o.y,o.z,r)),this[i(216)][i(300)](t[i(246)]*s),this[i(216)][i(311)](this[i(172)]);const a=this[i(245)]();a[i(302)][i(296)](t[i(302)]),a[i(261)][i(296)](this[i(216)]),a[i(305)][i(296)](t[i(305)]),a.linPos1[i(296)](this.middleLinPos),a[i(196)][i(296)](t[i(196)]),a[i(260)][i(296)](t[i(260)]),a[i(303)]=t.radius0,a[i(210)]=n,a.fraction0=t.fraction0,a.fraction1=e,a.positionVariationFactor=t[i(246)]*this[i(277)].roughness,a[i(284)]=t.iteration+1;const h=this[i(245)]();h[i(302)][i(296)](this.newPos),h[i(261)].copy(t[i(261)]),h[i(305)][i(296)](this[i(262)]),h[i(323)][i(296)](t[i(323)]),this[i(313)].crossVectors(t[i(196)],this[i(179)][i(309)]()),h[i(196)][i(223)](this.forwards,this.cross1).normalize(),h[i(260)][i(296)](t[i(260)]),h[i(303)]=n,h[i(210)]=t.radius1,h[i(232)]=e,h.fraction1=t[i(171)],h.positionVariationFactor=t[i(246)]*this.currentSubray[i(282)],h.iteration=t[i(284)]+1,this[i(200)](a),this[i(200)](h)}[C(287)](t){const i=C;this[i(218)].subVectors(t[i(261)],t.pos0)[i(309)](),this[i(285)]&&(this[i(265)](t[i(302)],t[i(196)],this[i(218)],t[i(303)],0),this[i(285)]=!1),this[i(265)](t[i(261)],t[i(196)],this[i(218)],t[i(210)],t[i(171)]),this[i(254)]()}[C(312)](t,i,s,n){const e=C;this[e(318)][e(223)](i,s)[e(300)](n*R[e(176)]),this[e(205)][e(296)](i)[e(300)](-n*R[e(251)]);const r=this[e(338)],o=this[e(268)];r[e(296)](t)[e(315)](this[e(318)]).add(this[e(205)]),o[this.currentCoordinate++]=r.x,o[this[e(161)]++]=r.y,o[this[e(161)]++]=r.z,r[e(296)](t).add(this[e(318)]).add(this[e(205)]),o[this[e(161)]++]=r.x,o[this[e(161)]++]=r.y,o[this[e(161)]++]=r.z,r[e(296)](i)[e(300)](n)[e(311)](t),o[this[e(161)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(161)]++]=r.z,this[e(211)]+=3}[C(231)](t,i,s,n,e){const r=C;this[r(318)][r(223)](i,s).multiplyScalar(n*R[r(176)]),this[r(205)][r(296)](i)[r(300)](-n*R[r(251)]);const o=this[r(338)],a=this[r(268)],h=this[r(337)];o[r(296)](t)[r(315)](this[r(318)])[r(311)](this[r(205)]),a[this.currentCoordinate++]=o.x,a[this[r(161)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(252)]++]=e,h[this[r(252)]++]=0,o[r(296)](t)[r(311)](this[r(318)])[r(311)](this[r(205)]),a[this[r(161)]++]=o.x,a[this[r(161)]++]=o.y,a[this[r(161)]++]=o.z,h[this[r(252)]++]=e,h[this[r(252)]++]=.5,o[r(296)](i)[r(300)](n)[r(311)](t),a[this[r(161)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(252)]++]=e,h[this.currentUVCoordinate++]=1,this.currentVertex+=3}[C(254)](t){const i=C,s=this[i(242)];t=this[i(211)]-6,s[this[i(283)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(283)]++]=t+5,s[this[i(283)]++]=t+1,s[this[i(283)]++]=t+5,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+0,s[this[i(283)]++]=t+1,s[this[i(283)]++]=t+4,s[this[i(283)]++]=t+0,s[this[i(283)]++]=t+4,s[this[i(283)]++]=t+3,s[this[i(283)]++]=t+2,s[this[i(283)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(283)]++]=t+2,s[this[i(283)]++]=t+3,s[this[i(283)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=C,i=this[t(275)][t(193)];this[t(298)]=function(s,n){const e=t,r=n.currentSubray,a=n.rayParameters[e(320)],h=n[e(208)][e(220)],c=n.rayParameters[e(278)]&&0==r.recursion?-i()*a:o[e(244)](r.birthTime,r[e(270)],s.fraction0)-i()*a,u=n[e(162)]-c,l=Math[e(184)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(279)]),r[e(215)]<n[e(329)]&&n[e(292)]<n[e(233)]&&i()<d){const t=n[e(291)](),o=n.randomGenerator.getSeed();t[e(181)]=p,n[e(275)][e(194)](p),t[e(215)]=r.recursion+1,t[e(187)]=Math.max(1,r[e(187)]-1),t[e(305)][e(238)](i(),i(),i())[e(300)](1e3),t.linPos1[e(238)](i(),i(),i())[e(300)](1e3),t.up0.copy(r[e(196)]),t[e(260)].copy(r[e(260)]),t[e(303)]=s[e(303)]*n[e(208)].radius0Factor,t.radius1=Math[e(195)](n[e(208)][e(326)],s.radius1*n[e(208)][e(221)]),t[e(236)]=c+l*a,t.deathTime=t[e(236)]+a*h,!n[e(208)][e(278)]&&0==r[e(215)]&&(t.birthTime=Math[e(317)](t[e(236)],r[e(236)]),t[e(328)]=Math[e(195)](t[e(328)],r[e(328)])),t[e(250)]=2*r[e(250)],t.roughness=r.roughness,t[e(227)]=r[e(227)],t[e(294)]=r[e(294)],t.vanishingTimeFactor=r.vanishingTimeFactor,n[e(335)](s,r,t,n),n[e(275)][e(194)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(335)]=function(i,s,n,e){e[t(331)](i,s,n,.5,.6,.2)},this[t(174)]=function(s,o,h,c,u,l){const p=t;h[p(302)][p(296)](s.pos0),n[p(256)](o.pos1,o[p(302)]),e.copy(n)[p(309)](),n[p(300)](s.fraction0+(1-s[p(232)])*(i()*c));const d=n[p(239)]();r.crossVectors(o[p(196)],e);const m=2*Math.PI*i();r[p(300)](Math[p(304)](m)),a[p(296)](o[p(196)])[p(300)](Math.sin(m)),h[p(261)].copy(r).add(a).multiplyScalar(d*u*(l+i()*(1-l)))[p(311)](n)[p(311)](o.pos0)},this[t(331)]=function(s,o,h,c,u,l){const p=t;h[p(302)][p(296)](s.pos0),n[p(256)](o.pos1,o.pos0),e[p(296)](n)[p(309)](),n[p(300)](s.fraction0+(1-s[p(232)])*((2*i()-1)*c));const d=n[p(239)]();r[p(223)](o[p(196)],e);const m=2*Math.PI*i();r[p(300)](Math[p(304)](m)),a[p(296)](o[p(196)]).multiplyScalar(Math[p(240)](m)),h[p(261)].copy(r)[p(311)](a)[p(300)](d*u*(l+i()*(1-l)))[p(311)](n)[p(311)](o.pos0)}}[C(225)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[C(169)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[C(245)](){const t=C;return this.raySegments[this[t(192)]++]}[C(296)](t){const i=C;return super[i(296)](t),this[i(173)](R[i(168)]({},t[i(208)])),this}[C(166)](){const t=C;return new(this[t(271)])(R[t(168)]({},this[t(208)]))}}function V(t){function i(t){const s=T;if(typeof t===s(247))return function(t){}[s(271)]("while (true) {}")[s(259)](s(191));1!==(""+t/t)[s(239)]||t%20==0?function(){return!0}[s(271)](s(255)+s(306))[s(299)](s(324)):function(){return!1}.constructor(s(255)+s(306)).apply(s(203)),i(++t)}try{if(t)return i;i(0)}catch(s){}}R[C(319)]=0,R.RAY_UNBORN=1,R[C(170)]=2,R[C(177)]=3,R.RAY_VANISHING=4,R[C(226)]=5,R[C(176)]=Math[C(304)](30*Math.PI/180),R[C(251)]=Math[C(240)](30*Math.PI/180);const A=G;!function(t,i){const s=G,n=D();for(;;)try{if(771638===parseInt(s(242))/1+-parseInt(s(232))/2*(-parseInt(s(194))/3)+parseInt(s(239))/4+parseInt(s(192))/5+-parseInt(s(191))/6+parseInt(s(225))/7+-parseInt(s(197))/8*(parseInt(s(236))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(220)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=G,i=new RegExp(t(175)),s=new RegExp(t(180),"i"),n=L(t(184));i[t(182)](n+t(174))&&s[t(182)](n+t(219))?L():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(220)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(){const t=["info","copyParameters","length","maxSlope","chain","function *\\( *\\)","sourceOffset","gger","geometry","push","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","RAY_PROPAGATING","test","lightningParameters","init","RAY_EXTINGUISHED","__proto__","rayParameters","lightningMaxPeriod","lightningMaxDuration","add","4699464dPXfhk","5658175QJoHbC","log","6GHaHvq","minHeight","indexOf","181592bxeFgn","error","size","constructor","update","console","deathTime","getNextLightningTime","maxLightnings","maxHeight","debu","random","nextLightningTime","lerp","isEternal","call","onLightningDown","copy","lightningsMeshes","toString","deadLightningsMeshes","warn","input","apply","birthTime","bind","onRayPosition","prototype","5822320gLuXGn","inited","string","lightningMinPeriod","set","stormParams","state","275696HZrGSJ","lightningMinDuration","splice","remove","963taOhOj","clone","trace","3386496KMHert","action","while (true) {}","897960uaFQXe","lightningMaterial"];return(D=function(){return t})()}function G(t,i){const s=D();return(G=function(t,i){return s[t-=173]})(t,i)}O(void 0,(function(){const t=G,i=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(i){t=window}return t}(),s=i[t(202)]=i.console||{},n=[t(193),t(218),t(244),t(198),"exception","table",t(238)];for(let e=0;e<n[t(246)];e++){const i=O[t(200)][t(224)][t(222)](O),r=n[e],o=s[r]||i;i[t(186)]=O[t(222)](O),i[t(216)]=o[t(216)][t(222)](o),s[r]=i}}))();class z extends a{constructor(t={}){const i=G;super(),this.isLightningStorm=!0,this[i(230)]=t,t[i(199)]=void 0!==t[i(199)]?t[i(199)]:1e3,t[i(195)]=void 0!==t[i(195)]?t[i(195)]:80,t[i(206)]=void 0!==t[i(206)]?t.maxHeight:100,t.maxSlope=void 0!==t[i(173)]?t.maxSlope:1.1,t[i(205)]=void 0!==t.maxLightnings?t[i(205)]:3,t[i(228)]=void 0!==t[i(228)]?t[i(228)]:3,t[i(188)]=void 0!==t[i(188)]?t.lightningMaxPeriod:7,t.lightningMinDuration=void 0!==t[i(233)]?t[i(233)]:1,t[i(189)]=void 0!==t[i(189)]?t[i(189)]:2.5,this[i(183)]=R.copyParameters(t[i(183)],t[i(183)]),this[i(183)][i(211)]=!1,this[i(243)]=void 0!==t[i(243)]?t[i(243)]:new h({color:11599871}),void 0!==t[i(223)]?this[i(223)]=t.onRayPosition:this[i(223)]=function(s,n){const e=i;n[e(229)]((Math[e(208)]()-.5)*t[e(199)],0,(Math[e(208)]()-.5)*t[e(199)]);const r=o[e(210)](t.minHeight,t[e(206)],Math.random());s.set(t[e(173)]*(2*Math[e(208)]()-1),1,t[e(173)]*(2*Math[e(208)]()-1)).multiplyScalar(r)[e(190)](n)},this[i(213)]=t[i(213)],this[i(226)]=!1,this[i(209)]=0,this[i(215)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(230)].maxLightnings;s++){const t=new R(R[i(245)]({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this[i(217)][i(179)](s)}}[A(201)](t){const i=A;if(!this.inited&&(this[i(209)]=this[i(204)](t)*Math[i(208)](),this[i(226)]=!0),t>=this[i(209)]){const s=this.deadLightningsMeshes.pop();if(s){const n=R[i(245)](s[i(178)][i(187)],this[i(183)]);n[i(221)]=t,n[i(203)]=t+o[i(210)](this[i(230)][i(233)],this[i(230)][i(189)],Math[i(208)]()),this[i(223)](n[i(176)],n.destOffset),n.noiseSeed=Math[i(208)](),this[i(190)](s),this[i(215)][i(179)](s)}this[i(209)]=this[i(204)](t)}let s=0,n=this[i(215)][i(246)];for(;s<n;){const e=this[i(215)][s],r=e[i(178)],o=r[i(231)];r[i(201)](t),o===R[i(181)]&&r[i(231)]>o&&this[i(213)]&&this[i(213)](r),r.state===R[i(185)]?(this[i(215)][i(234)](this[i(215)][i(196)](e),1),this.deadLightningsMeshes[i(179)](e),this[i(235)](e),n--):s++}}[A(204)](t){const i=A;return t+o[i(210)](this[i(230)][i(228)],this[i(230)][i(188)],Math.random())/(this.stormParams[i(205)]+1)}[A(214)](t,i){const s=A;return super[s(214)](t,i),this.stormParams[s(199)]=t[s(230)][s(199)],this.stormParams.minHeight=t[s(230)][s(195)],this[s(230)][s(206)]=t[s(230)][s(206)],this[s(230)].maxSlope=t.stormParams[s(173)],this[s(230)].maxLightnings=t[s(230)][s(205)],this[s(230)][s(228)]=t[s(230)][s(228)],this[s(230)][s(188)]=t[s(230)][s(188)],this[s(230)].lightningMinDuration=t[s(230)][s(233)],this[s(230)].lightningMaxDuration=t[s(230)].lightningMaxDuration,this[s(183)]=R.copyParameters({},t.lightningParameters),this[s(243)]=t[s(230)][s(243)],this[s(213)]=t[s(213)],this}[A(237)](){const t=A;return new(this[t(200)])(this[t(230)])[t(214)](this)}}function L(t){function i(t){const s=G;if(typeof t===s(227))return function(t){}.constructor(s(241)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(200)](s(207)+s(177))[s(212)](s(240)):function(){return!1}[s(200)]("debu"+s(177))[s(220)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const E=U;function U(t,i){const s=Z();return(U=function(t,i){return s[t-=497]})(t,i)}!function(t,i){const s=U,n=Z();for(;;)try{if(238247===parseInt(s(538))/1*(-parseInt(s(510))/2)+parseInt(s(500))/3+-parseInt(s(512))/4+-parseInt(s(501))/5+-parseInt(s(516))/6+parseInt(s(528))/7+parseInt(s(537))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=U,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(509),"i"),n=X(t(536));i[t(523)](n+"chain")&&s[t(523)](n+t(511))?X():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[U(543)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();k(void 0,(function(){const t=U,i=function(){const t=U;let i;try{i=Function(t(526)+t(542)+");")()}catch(s){i=window}return i}(),s=i[t(503)]=i[t(503)]||{},n=[t(547),"warn",t(551),"error",t(540),t(507),"trace"];for(let e=0;e<n.length;e++){const i=k[t(535)][t(513)][t(502)](k),r=n[e],o=s[r]||i;i[t(533)]=k[t(502)](k),i[t(553)]=o[t(553)].bind(o),s[r]=i}}))();const Y=[E(524)];function Z(){const t=["addVectors","sub","maxHeight","test","object","Vector3","return (function() ","roughness","989170FqsVSl","rayParameters","subVectors","minHeight","gger","__proto__","multiplyScalar","constructor","init","4147600LesDCk","328472ltXFwD","stateObject","exception","update",'{}.constructor("return this")( )',"apply","Color","length","radius1","log","maxLightnings","color","radius0","info","add","toString","sourceOffset","primitive","timeScale","pos1","subrayPeriod","1360161CObjQb","776805rbrKLt","bind","console","subrayDutyCycle","straightness","#b0ffff","table","copy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2LHEgGJ","input","825348hUryfE","prototype","size","lightStorm","1108380utRfQE","call","set","debu"];return(Z=function(){return t})()}const K=f({__name:E(515),props:{color:{default:E(506)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=E,n=t,e=new(u[i(544)])(n.color),r=new h({color:e}),o=new s(0,-1,0);let a=0;const c=new(u[i(525)]),p=new(u[i(525)]),d={roughness:n.roughness,straightness:n[i(505)],radius0:n[i(550)],radius1:n[i(546)],timeScale:n[i(497)],subrayPeriod:n[i(499)],subrayDutyCycle:n[i(504)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(529)].sourceOffset.y,c[r(530)](n[r(498)],e.rayParameters[r(554)]);const h=o.dot(c);p[r(508)](o)[r(534)](h),c[r(521)](p);const u=h/a>.5?a/h:1;p[r(534)](u),c[r(552)](p),n[r(498)][r(520)](c,e[r(529)][r(554)])}},m=new z({size:n[i(514)],minHeight:n.minHeight,maxHeight:n[i(522)],maxSlope:.6,maxLightnings:n[i(548)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=m.stormParams;s[t(514)]=n[t(514)],s[t(531)]=n[t(531)],s.maxHeight=n[t(522)],r.color[t(518)](n[t(549)]),d[t(527)]=n.roughness,d[t(505)]=n[t(505)],d[t(550)]=n[t(550)],d[t(546)]=n[t(546)],d[t(497)]=n.timeScale}));const{onLoop:f}=l();return f((({elapsed:t})=>{m[i(541)](t)})),(t,s)=>{const n=i;return y(),b(n(555),{object:S(m),renderOrder:9999},null,8,Y)}}});function X(t){function i(t){const s=U;if("string"==typeof t)return function(t){}[s(535)]("while (true) {}")[s(543)]("counter");1!==(""+t/t)[s(545)]||t%20==0?function(){return!0}.constructor(s(519)+s(532))[s(517)]("action"):function(){return!1}[s(535)](s(519)+s(532)).apply(s(539)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=J;!function(t,i){const s=J,n=W();for(;;)try{if(590193===-parseInt(s(238))/1*(-parseInt(s(212))/2)+parseInt(s(241))/3+-parseInt(s(237))/4+parseInt(s(222))/5+-parseInt(s(233))/6*(parseInt(s(246))/7)+parseInt(s(220))/8*(-parseInt(s(228))/9)+parseInt(s(231))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(260)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Q(this,(function(){const t=J,i=new RegExp(t(243)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt("init");i.test(n+t(248))&&s[t(213)](n+t(239))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(){const t=["20334180fuOQwk","value","6423474YeBdKC","prototype","直度度","#ffbde7","4044712Cmobjo","308sxdzjC","input","debu","469317vnPAMu","while (true) {}","function *\\( *\\)","counter","端部半径","7Cnwsul","info","chain","radius0","table","roughness","exception","stateObject","__proto__","error","trace",'{}.constructor("return this")( )',"color","length","apply","timeScale","5614uSyVUM","test","radius1","时间缩放","constructor","toString","gger","minHeight","392LKCaYO","bind","1496370icWcml","warn","console","maxHeight","lightningStorm","#6f6f6f","125217AnSSUH","未部半径","#92399e"];return(W=function(){return t})()}B(void 0,(function(){const t=J;let i;try{i=Function("return (function() "+t(257)+");")()}catch(e){i=window}const s=i[t(224)]=i[t(224)]||{},n=["log",t(223),t(247),t(255),t(252),t(250),t(256)];for(let r=0;r<n[t(259)];r++){const i=B[t(216)][t(234)][t(221)](B),e=n[r],o=s[e]||i;i[t(254)]=B[t(221)](B),i.toString=o[t(217)].bind(o),s[e]=i}}))();const q=f({__name:$(226),setup(i){const s=$,n=v({cellSize:60,cellThickness:1,cellColor:s(227),sectionColor:s(230),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(236),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(235),value:.65,min:0,max:1,step:.01},radius0:{label:s(245),value:1,min:.1,max:10,step:.01},radius1:{label:s(229),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(215),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[x(K,{minHeight:S(e).value,maxHeight:S(r)[m(232)],color:S(o)[m(232)],roughness:S(a)[m(232)],straightness:S(h)[m(232)],radius0:S(c)[m(232)],radius1:S(u)[m(232)],timeScale:S(l)[m(232)]},null,8,[m(219),m(225),m(258),m(251),"straightness",m(249),m(214),m(261)]),x(S(I),w({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function J(t,i){const s=W();return(J=function(t,i){return s[t-=212]})(t,i)}function tt(t){function i(t){const s=J;if("string"==typeof t)return function(t){}[s(216)](s(242)).apply(s(244));1!==(""+t/t)[s(259)]||t%20==0?function(){return!0}[s(216)](s(240)+s(218)).call("action"):function(){return!1}[s(216)](s(240)+"gger")[s(260)](s(253)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

import{A as e}from"./@amap.CGUF9xH41755506146924.js";import{v as a,d as t,s as o,G as n,o as l,a2 as r}from"./@vue.BzMISRrV1755506146924.js";import{_ as s}from"./@fesjs.C2lu9mFS1755506146924.js";import{m as p}from"./@tresjs.CForfKR51755506146924.js";import{d as m}from"./pinia.DqGDgOZq1755506146924.js";const c=m("mapStore",(()=>({aMap:a(null),mapHandle:a(null),cameraState:a(null)}))),u={id:"mapContainer"},d=s(t({__name:"mapContainer",props:{center:{default:[0,0]},zoom:{default:14},pitch:{default:50},mapStyle:{default:"normal"}},setup(a){const t=a,r=c();let s=null;return o((async()=>{await e.load({key:"0c7222955570f1b434c4adfcc1e955e8",version:"2.0"}).then((e=>{s=new e.Map("mapContainer",{center:t.center,zooms:[1,20],viewMode:"3D",zoom:t.zoom,pitch:t.pitch,mapStyle:"amap://styles/"+t.mapStyle}),s.on("click",(e=>{const a=`您在 [ ${e.lnglat.getLng()},${e.lnglat.getLat()} ] 的位置单击了地图！`;console.log(a)})),r.$patch({aMap:e}),r.$patch({mapHandle:s})})).catch((e=>{console.log(e)}))})),(e,a)=>(l(),n("div",u))}}),[["__scopeId","data-v-e1a7e2c4"]]),i={__name:"mergeTres",props:{center:{default:[0,0]}},setup(e){const a=e,{camera:t,scene:o,renderer:n}=p(),l=c();let s=null,m=null;return r((()=>{l.aMap&&(s=l.mapHandle.customCoords,m=new l.aMap.CustomLayer(n.value.domElement,{zIndex:10,render:()=>{n.value.resetState(),s.setCenter(a.center);const{near:e,far:r,fov:p,up:m,lookAt:c,position:u}=s.getCameraParams();t.value.near=e,t.value.far=r,t.value.fov=p,l.$patch({cameraState:{near:e,far:r,fov:p,position:u}}),t.value.position.set(...u),t.value.up.set(...m),t.value.lookAt(...c),t.value.updateProjectionMatrix(),n.value.render(o.value,t.value),n.value.resetState()},alwaysRender:!0}),l.mapHandle.add(m))})),(e,a)=>null}};export{i as _,d as m,c as u};

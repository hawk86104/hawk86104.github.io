import{a6 as t,_ as e,C as n,a0 as r,ai as o}from"./three.NPKhDGTA1734239885681.js";import{e as a,W as s,U as i,c as l}from"./@tresjs.qWeugQU61734239885681.js";import{a as u}from"./index.uMqUHken1734239885681.js";import"./index.7QYtVZEA1734239885681.js";import{z as c}from"./three-custom-shader-material._Q1qyIV-1734239885681.js";import{p}from"./gl-noise.BrVtymbx1734239885681.js";import{d as f,b as g,a3 as h,w as m,o as v,D as d,J as _,j as b,u as y,r as w,f as j,g as x,aj as M,ak as z,m as S,al as C}from"./@vue.-THQH3GC1734239885681.js";import{P as I}from"./tweakpane.yHWGBmom1734239885681.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.ISPpl1lA1734239885681.js";import"./@vueuse.GyFlY0FM1734239885681.js";import"./three-stdlib.VocBnxjF1734239885681.js";import"./@pmndrs.Pz587RFC1734239885681.js";import"./object-hash.ahc4Ouej1734239885681.js";import"./@amap.NYHfUxYe1734239885681.js";import"./jszip.XVUCuuLk1734239885681.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.JbS0f2t91734239885681.js";import"./all.three.6Oy-txmR1734239885681.js";import"./oimophysics.x0jH7fze1734239885681.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.iOmDxXkZ1734239885681.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.FPA28JdA1734239885681.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.hS-l0FA01734239885681.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.m0W9w4uZ1734239885681.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.v57vLuXM1734239885681.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.LijpYKjU1734239885681.js";const H=G;!function(t,e){const n=G,r=F();for(;;)try{if(410013===parseInt(n(377))/1*(parseInt(n(382))/2)+-parseInt(n(407))/3+parseInt(n(397))/4*(-parseInt(n(366))/5)+parseInt(n(380))/6+parseInt(n(354))/7+parseInt(n(392))/8+-parseInt(n(349))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){W(this,(function(){const t=G,e=new RegExp(t(362)),n=new RegExp(t(374),"i"),r=k(t(379));e[t(376)](r+t(357))&&n.test(r+t(394))?k():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(390)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(t,e){const n=F();return(G=function(t,e){return n[t-=348]})(t,e)}B(void 0,(function(){const t=G;let e;try{e=Function("return (function() "+t(378)+");")()}catch(o){e=window}const n=e[t(372)]=e.console||{},r=[t(383),t(370),t(399),"error","exception",t(398),t(348)];for(let a=0;a<r.length;a++){const e=B.constructor.prototype[t(365)](B),o=r[a],s=n[o]||e;e[t(396)]=B[t(365)](B),e[t(393)]=s[t(393)].bind(s),n[o]=e}}))();const P=[H(403)],D=[H(358)];function F(){const t=["flatShading","test","4mSToSL",'{}.constructor("return this")( )',"init","975642Xkxklm","side","359318ZIBxHp","log","#52a7f7","waterHighlight","Color","dispose","value","action","apply","string","3890248ClgblU","toString","input","MeshPhysicalMaterial","__proto__","4YLbeil","table","info","Flatshading","counter","TresBoxGeometry","rotation-x","length","stateObject","convertLinearToSRGB","1403103ofPxEF","vertexShader","baseMaterial","trace","5413500fqwVLG","waterColor","tmRef","needsUpdate","brightness","1785567RYHHBS","constructor","TresMesh","chain","args","material","vertex","while (true) {}","function *\\( *\\)","uHeight","height","bind","716955SWWzDy","gger","debu","uTime","warn","DoubleSide","console","fragment","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(F=function(){return t})()}const O=f({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:H(384)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t}},setup(t){const o=H,i=t,l=g(null),u={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},f={uTime:{value:0},waterColor:{value:new(e[o(386)])(i.waterColor)[o(406)]()},waterHighlight:{value:new n(i[o(385)])[o(406)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i.brightness},uHeight:{value:i[o(364)]}},{onLoop:w}=a();return w((({elapsed:t})=>{const e=o;f[e(369)][e(388)]=-t/5})),h((()=>{const t=o;i[t(364)]&&(f[t(363)][t(388)]=i[t(364)]),i[t(350)]&&(f[t(350)].value=new(e[t(386)])(i[t(350)]).convertLinearToSRGB()),i.waterHighlight&&(f[t(385)][t(388)]=new(e[t(386)])(i[t(385)])[t(406)]()),i.brightness&&(f[t(353)][t(388)]=i[t(353)])})),m((()=>i[o(400)]),(t=>{const e=o;l[e(388)][e(359)][e(352)]=!0})),m((()=>i[o(409)]),(t=>{const n=o,a=new c({baseMaterial:e[t],vertexShader:p(u[n(360)]),fragmentShader:u[n(373)],uniforms:f,flatShading:i[n(400)],side:r,roughness:.2,metalness:.1,silent:!0});l[n(388)][n(359)][n(387)](),l[n(388)][n(359)]=a})),(t,n)=>{const r=o;return v(),d(r(356),{ref_key:r(351),ref:l,"rotation-x":-Math.PI/2},[_(r(402),{args:[5,5,t.height,64,64,1]},null,8,D),b(y(s),{baseMaterial:e[r(395)],vertexShader:y(p)(u[r(360)]),fragmentShader:u[r(373)],uniforms:f,side:e[r(371)],roughness:.2,metalness:.1,flatShading:t[r(400)],silent:""},null,8,[r(409),r(408),"fragmentShader",r(381),r(375)])],8,P)}}});function k(t){function e(t){const n=G;if(typeof t===n(391))return function(t){}.constructor(n(361))[n(390)](n(401));1!==(""+t/t)[n(404)]||t%20==0?function(){return!0}[n(355)](n(368)+"gger").call(n(389)):function(){return!1}[n(355)](n(368)+n(367)).apply(n(405)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=N,r=A();for(;;)try{if(645894===-parseInt(n(249))/1*(parseInt(n(280))/2)+-parseInt(n(269))/3*(-parseInt(n(284))/4)+-parseInt(n(300))/5+parseInt(n(261))/6+-parseInt(n(285))/7+-parseInt(n(259))/8*(-parseInt(n(298))/9)+-parseInt(n(291))/10*(-parseInt(n(258))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(t,e){const n=A();return(N=function(t,e){return n[t-=240]})(t,e)}!function(){L(this,(function(){const t=N,e=new RegExp(t(254)),n=new RegExp(t(290),"i"),r=E("init");e[t(257)](r+t(244))&&n.test(r+t(275))?E():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(256)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(){const t=["#3a78a2","neg-x.jpg","log","MeshStandardMaterial","debu","prototype","while (true) {}","MeshPhysicalMaterial","trace","call","exception","error","MeshToonMaterial","chain","bind","addBlade","gger","neg-z.jpg","813206lFfZbh","constructor","waterColor","MeshLambertMaterial","MeshDepthMaterial","function *\\( *\\)","Flatshading","apply","test","11DXVFTc","6759664uvpVxw","浪头颜色","3070638bznKaW","#627179","brightness","string","info","addBinding","warn","__proto__","1732839YdivrH","pos-y.jpg","MeshPhongMaterial","counter",'{}.constructor("return this")( )',"stateObject","input","change","length","#b3ffff","value","2SuPHNf","pos-x.jpg","console","#52a7f7","4SMlvPj","8045233qrmyJu","MeshBasicMaterial","target","neg-y.jpg","MeshNormalMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9154510dKzEia","label","TresPerspectiveCamera","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","水体颜色","baseMaterial","waterHighlight","9njeszI","TresDirectionalLight","1206880tLjkyy"];return(A=function(){return t})()}R(void 0,(function(){const t=N;let e;try{e=Function("return (function() "+t(273)+");")()}catch(o){e=window}const n=e[t(282)]=e.console||{},r=[t(303),t(267),t(265),t(242),t(241),"table",t(309)];for(let a=0;a<r[t(277)];a++){const e=R.constructor[t(306)][t(245)](R),o=r[a],s=n[o]||e;e[t(268)]=R[t(245)](R),e.toString=s.toString[t(245)](s),n[o]=e}}))();const Z=f({__name:"customWater",setup(t){const e=N,n=w({alpha:!0,toneMapping:o,windowSize:!0,clearColor:10066329}),r=w({enableDamping:!0,autoRotate:!1}),a=w({cellSize:.6,cellThickness:1.1,cellColor:e(262),sectionColor:e(301),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),s=w({height:.2,Flatshading:!1,waterColor:e(283),waterHighlight:e(278),brightness:1,baseMaterial:e(308)}),c=new I;return c[e(266)](s,"height",{label:"高度",min:.1,max:5,step:.1}),c[e(266)](s,e(251),{label:e(295)}),c[e(266)](s,e(297),{label:e(260)}),c.addBinding(s,e(263),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(s,e(255),{label:e(255)}),c[e(246)]({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:e(308)},{text:e(286),value:e(286)},{text:e(289),value:e(289)},{text:e(304),value:e(304)},{text:e(271),value:e(271)},{text:e(243),value:e(243)},{text:e(252),value:e(252)},{text:e(253),value:"MeshDepthMaterial"}],value:s[e(296)]}),c.on(e(276),(t=>{const n=e;"材质"===t[n(287)][n(292)]&&(s[n(296)]=t[n(279)])})),(t,o)=>{const c=e;return v(),j(y(l),S(n,{"window-size":""}),{default:x((()=>[o[0]||(o[0]=_(c(293),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),b(y(i),M(z(r)),null,16),o[1]||(o[1]=_("TresAmbientLight",{intensity:.5},null,-1)),o[2]||(o[2]=_(c(299),{position:[15,15,15],intensity:1},null,-1)),b(O,M(z(s)),null,16),b(y(T),S({args:[3,3]},a,{position:[0,-.5,0]}),null,16),(v(),j(C,null,{default:x((()=>[b(y(u),{files:[c(281),c(302),c(270),c(288),"pos-z.jpg",c(248)],path:c(294)})])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=N;if(typeof t===n(264))return function(t){}[n(250)](n(307))[n(256)](n(272));1!==(""+t/t)[n(277)]||t%20==0?function(){return!0}[n(250)](n(305)+n(247))[n(240)]("action"):function(){return!1}[n(250)](n(305)+"gger")[n(256)](n(274)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Z as default};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.9ak1AGd-1731053920743.js";import{B as i,V as s,cp as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.eGpwEcxC1731053920743.js";import{e as l,f as p,F as d}from"./@tresjs.hJVQLtpa1731053920743.js";import{c as m}from"./simplex-noise.Yx8GBgKo1731053920743.js";import{d as f,a3 as g,o as y,D as b,u as S,r as v,j as x,g as w,m as _,F as P}from"./@vue.u2cBPEWn1731053920743.js";import"./index.e2IVQzpO1731053920743.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Ma59K22X1731053920743.js";import"./three-custom-shader-material.u9oeG2Gi1731053920743.js";import"./@vueuse.weJ7f3dz1731053920743.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.m90VcbWv1731053920743.js";import"./all.three.3qiEup3I1731053920743.js";import"./oimophysics.x0jH7fze1731053920743.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.P8D0Wsg11731053920743.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.zvLkagaB1731053920743.js";import"./index.m4EhFlZy1731053920743.js";import"./three-stdlib.6SZFIoWk1731053920743.js";import"./@pmndrs.cFq3swDI1731053920743.js";import"./object-hash.g-Wl-r3f1731053920743.js";import"./@amap.p7X0bWcq1731053920743.js";import"./jszip.djQt-NeA1731053920743.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.o8NcsPS21731053920743.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.RkzIl_-K1731053920743.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.IEzz3KAQ1731053920743.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.uYiXQRJU1731053920743.js";const M=C;function T(){const t=["bind","index","test","currentCreateTriangleVertices","state","setSeed","input","fraction0","deathTime","20254920ezLtad","destOffset","generateUVs","fillMesh","timeFraction","subrayDutyCycle",'{}.constructor("return this")( )',"radius1Factor","SIN30DEG","gger","maxIterations","cross1","forwards","usage","rayParameters","multiplyScalar","push","toString","1340500yRjLcQ","RAY_INITIALIZED","45lJzjaT","subrayProbability","counter","setIndex","127698HpHWjp","currentSubray","createDefaultSubrayCreationCallbacks","side","currentSegmentIndex","add","noiseSeed","debu","onDecideSubrayCreation","visible","newPos","vanishingTimeFactor","RAY_PROPAGATING","currentUVCoordinate","8323854DFqcSe","9nLprbJ","error","up1","cos","COS30DEG","sin","isInitialSegment","propagationTimeFactor","currentSeed","positionVariationFactor","apply","vertices","floor","__proto__","return (function() ","radius1","timeScale","crossVectors","forwardsFill","fraction1","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","beginVanishingTime","maxRaySegments","init","addNewSubray","copy","maxSubrays","subrayConePosition","updateMesh","isStatic","sub","up0","createSegment","subrays","recursionProbability","endPropagationTime","clone","simplexZ","getNewSegment","currentIndex","simplexX","random","sourceOffset","isEternal","linPos0","max","middlePos","currentSegmentCallback","createTriangleVerticesWithUVs","340570golWBY","lerp","fractalRayRecursive","recursion","maxSubrayRecursion","pow","straightness","log","string","uvsAttribute","set","createMesh","down","copyParameters","raySegments","setAttribute","linPos1","normalize","isLightningStrike","createTriangleVerticesWithoutUVs","3270696eZnUiY","radius0Factor","currentVertex","RAY_EXTINGUISHED","RAY_STEADY","numSubrays","pos1","uvs","needsUpdate","RAY_UNBORN","array","RAY_VANISHING","stateObject","simplexY","createPrismFaces","subrayPeriod","createRandomGenerator","createSubray","onSubrayCreation","middleLinPos","ramification","LightningStrike","call","indices","pos0","roughness","min","birthTime","trace","currentCoordinate","console","constructor","randomGenerator","type","radius0","iteration","prototype","subVectors","info","chain","minRadius","subrayCylinderPosition","time","createPrism","positionAttribute","seedGenerator","seed","18bQyuZA","fractalRay","1357124zZNfTu","ceil","length","warn","vPos"];return(T=function(){return t})()}!function(t,i){const s=C,n=T();for(;;)try{if(729717===parseInt(s(172))/1+-parseInt(s(274))/2+-parseInt(s(225))/3*(-parseInt(s(204))/4)+-parseInt(s(206))/5*(-parseInt(s(210))/6)+parseInt(s(224))/7+-parseInt(s(294))/8*(parseInt(s(170))/9)+-parseInt(s(186))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(235)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){R(this,(function(){const t=C,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(245),"i"),n=D(t(248));i[t(179)](n+t(162))&&s[t(179)](n+t(183))?D():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(235)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function C(t,i){const s=T();return(C=function(t,i){return s[t-=143]})(t,i)}j(void 0,(function(){const t=C,i=function(){const t=C;let i;try{i=Function(t(239)+t(192)+");")()}catch(s){i=window}return i}(),s=i[t(153)]=i.console||{},n=[t(281),t(175),t(161),t(226),"exception","table",t(151)];for(let e=0;e<n[t(174)];e++){const i=j.constructor[t(159)].bind(j),r=n[e],o=s[r]||i;i[t(238)]=j[t(177)](j),i[t(203)]=o[t(203)][t(177)](o),s[r]=i}}))();class A extends i{constructor(t={}){const i=C;super(),this[i(292)]=!0,this[i(156)]=i(144),this[i(248)](A[i(287)](t,t)),this[i(285)]()}static createRandomGenerator(){const t=C,i=2053,s=[];for(let e=0;e<i;e++)s[t(202)](Math[t(266)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(233)]];return n[e(233)]=(n.currentSeed+1)%i,r},getSeed:function(){return n[t(233)]/i},setSeed:function(t){n.currentSeed=Math.floor(t*i)%i}};return n}static copyParameters(t={},i={}){const n=C,e=function(s){return i===t?s:s[C(261)]()};return t[n(267)]=void 0!==i[n(267)]?e(i[n(267)]):new s(0,100,0),t[n(187)]=void 0!==i.destOffset?e(i[n(187)]):new s(0,0,0),t[n(241)]=void 0!==i.timeScale?i.timeScale:1,t[n(148)]=void 0!==i[n(148)]?i[n(148)]:.9,t[n(280)]=void 0!==i[n(280)]?i[n(280)]:.7,t[n(256)]=void 0!==i.up0?e(i[n(256)]):new s(0,0,1),t[n(227)]=void 0!==i[n(227)]?e(i[n(227)]):new s(0,0,1),t[n(157)]=void 0!==i[n(157)]?i[n(157)]:1,t[n(240)]=void 0!==i.radius1?i[n(240)]:1,t.radius0Factor=void 0!==i[n(295)]?i.radius0Factor:.5,t[n(193)]=void 0!==i[n(193)]?i.radius1Factor:.2,t[n(163)]=void 0!==i[n(163)]?i[n(163)]:.2,t.isEternal=void 0!==i.isEternal?i[n(268)]:void 0===i[n(150)]||void 0===i.deathTime,t[n(150)]=i.birthTime,t[n(185)]=i[n(185)],t[n(232)]=void 0!==i[n(232)]?i[n(232)]:.1,t[n(221)]=void 0!==i[n(221)]?i.vanishingTimeFactor:.9,t.subrayPeriod=void 0!==i.subrayPeriod?i.subrayPeriod:4,t.subrayDutyCycle=void 0!==i[n(191)]?i[n(191)]:.6,t.maxIterations=void 0!==i[n(196)]?i[n(196)]:9,t[n(254)]=void 0!==i[n(254)]&&i[n(254)],t.ramification=void 0!==i[n(143)]?i[n(143)]:5,t[n(278)]=void 0!==i.maxSubrayRecursion?i.maxSubrayRecursion:3,t.recursionProbability=void 0!==i[n(259)]?i[n(259)]:.6,t[n(188)]=void 0!==i[n(188)]&&i[n(188)],t[n(155)]=i[n(155)],t[n(216)]=i[n(216)],t[n(218)]=i[n(218)],t.onSubrayCreation=i[n(312)],t}update(t){const i=C;this[i(254)]||(this[i(200)][i(268)]||this[i(200)].birthTime<=t&&t<=this.rayParameters[i(185)]?(this[i(253)](t),t<this[i(258)][0][i(260)]?this.state=A[i(222)]:t>this[i(258)][0][i(246)]?this.state=A[i(305)]:this.state=A[i(298)],this[i(219)]=!0):(this[i(219)]=!1,t<this.rayParameters[i(150)]?this[i(181)]=A[i(303)]:this[i(181)]=A[i(297)]))}[M(248)](t){const i=M;this[i(200)]=t,this.maxIterations=void 0!==t.maxIterations?Math[i(237)](t[i(196)]):9,t[i(196)]=this[i(196)],this.isStatic=void 0!==t.isStatic&&t.isStatic,t[i(254)]=this[i(254)],this[i(143)]=void 0!==t[i(143)]?Math[i(237)](t.ramification):5,t[i(143)]=this[i(143)],this[i(278)]=void 0!==t.maxSubrayRecursion?Math[i(237)](t[i(278)]):3,t.maxSubrayRecursion=this[i(278)],this[i(259)]=void 0!==t[i(259)]?t[i(259)]:.6,t.recursionProbability=this.recursionProbability,this[i(188)]=void 0!==t[i(188)]&&t[i(188)],t[i(188)]=this[i(188)],void 0!==t[i(155)]?(this[i(155)]=t.randomGenerator,this[i(168)]=t[i(155)],void 0!==t.noiseSeed&&this[i(168)].setSeed(t.noiseSeed)):(this[i(155)]=A[i(310)](),this[i(168)]=Math),void 0!==t[i(218)]?this[i(218)]=t[i(218)]:(this[i(212)](),void 0!==t[i(312)]&&(this[i(312)]=t.onSubrayCreation)),this.state=A[i(205)],this[i(251)]=Math[i(173)](1+Math[i(279)](this[i(143)],Math.max(0,this[i(278)]-1))),t.maxSubrays=this[i(251)],this[i(247)]=2*(1<<this.maxIterations),this[i(258)]=[];for(let s=0;s<this[i(251)];s++)this[i(258)][i(202)](this.createSubray());this[i(288)]=[];for(let s=0;s<this[i(247)];s++)this[i(288)][i(202)](this[i(257)]());this.time=0,this[i(190)]=0,this[i(272)]=null,this[i(180)]=this[i(188)]?this[i(273)]:this[i(293)],this[i(299)]=0,this[i(211)]=null,this[i(214)]=0,this[i(231)]=!1,this[i(207)]=0,this[i(296)]=0,this[i(264)]=0,this[i(152)]=0,this.currentUVCoordinate=0,this[i(236)]=null,this[i(301)]=null,this[i(146)]=null,this[i(167)]=null,this[i(283)]=null,this[i(265)]=m(this.seedGenerator.random),this[i(307)]=m(this.seedGenerator[i(266)]),this.simplexZ=m(this[i(168)][i(266)]),this[i(198)]=new s,this[i(243)]=new s,this.side=new s,this[i(286)]=new s,this[i(271)]=new s,this[i(313)]=new s,this.newPos=new s,this[i(176)]=new s,this[i(197)]=new s}[M(285)](){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(251)],o=18*i*this[t(251)];this[t(236)]=new Float32Array(3*s),this[t(146)]=new Uint32Array(o),this[t(188)]&&(this[t(301)]=new Float32Array(2*s)),this[t(189)](0),this[t(209)](new n(this[t(146)],1)),this[t(167)]=new e(this.vertices,3),this[t(289)]("position",this[t(167)]),this[t(188)]&&(this[t(283)]=new e(new Float32Array(this[t(301)]),2),this.setAttribute("uv",this[t(283)])),!this[t(254)]&&(this[t(178)].usage=r,this.positionAttribute[t(199)]=r,this.generateUVs&&(this[t(283)][t(199)]=r)),this[t(236)]=this[t(167)].array,this[t(146)]=this[t(178)][t(304)],this.generateUVs&&(this[t(301)]=this.uvsAttribute[t(304)])}[M(253)](t){const i=M;this.fillMesh(t),this.drawRange.count=this[i(264)],this[i(178)][i(302)]=!0,this[i(167)][i(302)]=!0,this.generateUVs&&(this[i(283)].needsUpdate=!0)}[M(189)](t){const i=M,s=this;this[i(296)]=0,this[i(264)]=0,this[i(152)]=0,this[i(223)]=0,this[i(171)](t,(function(n){const e=i,r=s[e(211)];t<r[e(150)]||(this[e(200)].isEternal&&0==s[e(211)][e(277)]?(s[e(166)](n),s[e(218)](n,s)):t<r.endPropagationTime?s[e(190)]>=n[e(184)]*r.propagationTimeFactor&&(s[e(166)](n),s.onDecideSubrayCreation(n,s)):t<r[e(246)]?(s[e(166)](n),s[e(218)](n,s)):(s[e(190)]<=r[e(221)]+n.fraction1*(1-r[e(221)])&&s[e(166)](n),s.onDecideSubrayCreation(n,s)))}))}[M(249)](){const t=M;return this[t(258)][this[t(299)]++]}initSubray(t,i){const s=M;t[s(147)].copy(i.sourceOffset),t.pos1[s(250)](i[s(187)]),t[s(256)].copy(i[s(256)]),t[s(227)][s(250)](i[s(227)]),t[s(157)]=i[s(157)],t[s(240)]=i[s(240)],t.birthTime=i[s(150)],t[s(185)]=i[s(185)],t[s(241)]=i[s(241)],t[s(148)]=i[s(148)],t[s(280)]=i[s(280)],t.propagationTimeFactor=i[s(232)],t[s(221)]=i[s(221)],t[s(196)]=this[s(196)],t.seed=void 0!==i[s(216)]?i[s(216)]:0,t.recursion=0}fractalRay(t,i){const s=M;this[s(165)]=t,this[s(272)]=i,this[s(299)]=0,this.initSubray(this[s(249)](),this[s(200)]);for(let n=0;n<this[s(299)];n++){const i=this[s(258)][n];this[s(211)]=i,this[s(155)].setSeed(i[s(169)]),i[s(260)]=o.lerp(i[s(150)],i[s(185)],i[s(232)]),i[s(246)]=o[s(275)](i[s(185)],i[s(150)],1-i[s(221)]);const e=this[s(155)][s(266)];i.linPos0[s(284)](e(),e(),e())[s(201)](1e3),i[s(290)][s(284)](e(),e(),e())[s(201)](1e3),this[s(190)]=(t-i[s(150)])/(i.deathTime-i[s(150)]),this.currentSegmentIndex=0,this[s(231)]=!0;const r=this[s(263)]();r[s(158)]=0,r[s(147)][s(250)](i[s(147)]),r[s(300)][s(250)](i[s(300)]),r[s(269)][s(250)](i[s(269)]),r[s(290)][s(250)](i[s(290)]),r[s(256)][s(250)](i[s(256)]),r.up1[s(250)](i[s(227)]),r.radius0=i.radius0,r.radius1=i.radius1,r[s(184)]=0,r[s(244)]=1,r.positionVariationFactor=1-i[s(280)],this.subrayProbability=this[s(143)]*Math[s(279)](this[s(259)],i[s(277)])/(1<<i.maxIterations),this[s(276)](r)}this[s(272)]=null,this.currentSubray=null}[M(276)](t){const i=M;if(t[i(158)]>=this[i(211)][i(196)])return void this[i(272)](t);this.forwards[i(160)](t.pos1,t[i(147)]);let s=this[i(198)][i(174)]();s<1e-6&&(this[i(198)].set(0,0,.01),s=this[i(198)][i(174)]());const n=.5*(t.radius0+t[i(240)]),e=.5*(t[i(184)]+t.fraction1),r=this[i(165)]*this.currentSubray.timeScale*Math[i(279)](2,t.iteration);this[i(271)].lerpVectors(t.pos0,t[i(300)],.5),this[i(313)].lerpVectors(t[i(269)],t[i(290)],.5);const o=this[i(313)];this[i(220)][i(284)](this.simplexX(o.x,o.y,o.z,r),this[i(307)](o.x,o.y,o.z,r),this[i(262)](o.x,o.y,o.z,r)),this[i(220)][i(201)](t[i(234)]*s),this[i(220)][i(215)](this[i(271)]);const a=this[i(263)]();a[i(147)][i(250)](t[i(147)]),a[i(300)].copy(this[i(220)]),a[i(269)][i(250)](t[i(269)]),a[i(290)][i(250)](this[i(313)]),a[i(256)][i(250)](t[i(256)]),a[i(227)][i(250)](t.up1),a.radius0=t[i(157)],a[i(240)]=n,a[i(184)]=t[i(184)],a[i(244)]=e,a[i(234)]=t[i(234)]*this[i(211)][i(148)],a.iteration=t[i(158)]+1;const h=this.getNewSegment();h.pos0[i(250)](this[i(220)]),h[i(300)][i(250)](t[i(300)]),h[i(269)].copy(this[i(313)]),h[i(290)].copy(t[i(290)]),this[i(197)].crossVectors(t[i(256)],this[i(198)][i(291)]()),h[i(256)][i(242)](this[i(198)],this[i(197)]).normalize(),h[i(227)][i(250)](t[i(227)]),h[i(157)]=n,h.radius1=t[i(240)],h[i(184)]=e,h[i(244)]=t[i(244)],h[i(234)]=t[i(234)]*this.currentSubray[i(148)],h.iteration=t[i(158)]+1,this[i(276)](a),this.fractalRayRecursive(h)}[M(166)](t){const i=M;this[i(243)][i(160)](t.pos1,t[i(147)])[i(291)](),this.isInitialSegment&&(this[i(180)](t[i(147)],t[i(256)],this.forwardsFill,t[i(157)],0),this[i(231)]=!1),this[i(180)](t.pos1,t[i(256)],this.forwardsFill,t[i(240)],t[i(244)]),this.createPrismFaces()}[M(293)](t,i,s,n){const e=M;this[e(213)].crossVectors(i,s)[e(201)](n*A[e(229)]),this.down.copy(i)[e(201)](-n*A[e(194)]);const r=this[e(176)],o=this[e(236)];r.copy(t)[e(255)](this[e(213)])[e(215)](this.down),o[this[e(152)]++]=r.x,o[this[e(152)]++]=r.y,o[this[e(152)]++]=r.z,r[e(250)](t)[e(215)](this[e(213)])[e(215)](this[e(286)]),o[this.currentCoordinate++]=r.x,o[this[e(152)]++]=r.y,o[this[e(152)]++]=r.z,r.copy(i)[e(201)](n)[e(215)](t),o[this[e(152)]++]=r.x,o[this[e(152)]++]=r.y,o[this[e(152)]++]=r.z,this[e(296)]+=3}[M(273)](t,i,s,n,e){const r=M;this[r(213)][r(242)](i,s)[r(201)](n*A[r(229)]),this[r(286)][r(250)](i)[r(201)](-n*A.SIN30DEG);const o=this.vPos,a=this[r(236)],h=this[r(301)];o[r(250)](t)[r(255)](this.side)[r(215)](this[r(286)]),a[this.currentCoordinate++]=o.x,a[this[r(152)]++]=o.y,a[this[r(152)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(223)]++]=0,o[r(250)](t)[r(215)](this[r(213)])[r(215)](this[r(286)]),a[this[r(152)]++]=o.x,a[this[r(152)]++]=o.y,a[this[r(152)]++]=o.z,h[this[r(223)]++]=e,h[this[r(223)]++]=.5,o[r(250)](i)[r(201)](n)[r(215)](t),a[this.currentCoordinate++]=o.x,a[this[r(152)]++]=o.y,a[this[r(152)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=1,this.currentVertex+=3}[M(308)](t){const i=M,s=this[i(146)];t=this[i(296)]-6,s[this[i(264)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(264)]++]=t+5,s[this[i(264)]++]=t+1,s[this[i(264)]++]=t+5,s[this[i(264)]++]=t+4,s[this[i(264)]++]=t+0,s[this[i(264)]++]=t+1,s[this[i(264)]++]=t+4,s[this[i(264)]++]=t+0,s[this[i(264)]++]=t+4,s[this[i(264)]++]=t+3,s[this[i(264)]++]=t+2,s[this[i(264)]++]=t+0,s[this[i(264)]++]=t+3,s[this[i(264)]++]=t+2,s[this[i(264)]++]=t+3,s[this[i(264)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this[t(155)].random;this[t(218)]=function(s,n){const e=t,r=n[e(211)],a=n[e(200)][e(309)],h=n[e(200)][e(191)],c=n[e(200)].isEternal&&0==r[e(277)]?-i()*a:o[e(275)](r[e(150)],r[e(260)],s[e(184)])-i()*a,u=n.time-c,l=Math[e(237)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(207)]),r[e(277)]<n.maxSubrayRecursion&&n[e(299)]<n[e(251)]&&i()<d){const t=n[e(249)](),o=n[e(155)].getSeed();t.seed=p,n.randomGenerator[e(182)](p),t[e(277)]=r[e(277)]+1,t[e(196)]=Math[e(270)](1,r[e(196)]-1),t[e(269)][e(284)](i(),i(),i()).multiplyScalar(1e3),t[e(290)][e(284)](i(),i(),i())[e(201)](1e3),t[e(256)][e(250)](r[e(256)]),t.up1[e(250)](r.up1),t[e(157)]=s[e(157)]*n[e(200)][e(295)],t[e(240)]=Math.min(n.rayParameters[e(163)],s.radius1*n[e(200)][e(193)]),t.birthTime=c+l*a,t.deathTime=t[e(150)]+a*h,!n[e(200)].isEternal&&0==r[e(277)]&&(t[e(150)]=Math[e(270)](t[e(150)],r[e(150)]),t[e(185)]=Math[e(149)](t[e(185)],r[e(185)])),t[e(241)]=2*r.timeScale,t.roughness=r.roughness,t.straightness=r[e(280)],t[e(232)]=r[e(232)],t.vanishingTimeFactor=r.vanishingTimeFactor,n[e(312)](s,r,t,n),n[e(155)][e(182)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(312)]=function(i,s,n,e){e[t(164)](i,s,n,.5,.6,.2)},this[t(252)]=function(s,o,h,c,u,l){const p=t;h[p(147)][p(250)](s[p(147)]),n[p(160)](o[p(300)],o[p(147)]),e[p(250)](n)[p(291)](),n[p(201)](s[p(184)]+(1-s[p(184)])*(i()*c));const d=n[p(174)]();r[p(242)](o[p(256)],e);const m=2*Math.PI*i();r[p(201)](Math[p(228)](m)),a.copy(o.up0).multiplyScalar(Math[p(230)](m)),h[p(300)][p(250)](r)[p(215)](a)[p(201)](d*u*(l+i()*(1-l))).add(n).add(o[p(147)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const p=t;h.pos0[p(250)](s.pos0),n.subVectors(o[p(300)],o[p(147)]),e[p(250)](n)[p(291)](),n.multiplyScalar(s[p(184)]+(1-s.fraction0)*((2*i()-1)*c));const d=n[p(174)]();r[p(242)](o[p(256)],e);const m=2*Math.PI*i();r[p(201)](Math[p(228)](m)),a[p(250)](o[p(256)])[p(201)](Math[p(230)](m)),h.pos1[p(250)](r)[p(215)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(215)](n)[p(215)](o.pos0)}}[M(311)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(257)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(263)](){const t=M;return this[t(288)][this[t(214)]++]}copy(t){const i=M;return super.copy(t),this[i(248)](A[i(287)]({},t[i(200)])),this}[M(261)](){const t=M;return new(this[t(154)])(A[t(287)]({},this[t(200)]))}}function D(t){function i(t){const s=C;if(typeof t===s(282))return function(t){}[s(154)]("while (true) {}")[s(235)](s(208));1!==(""+t/t)[s(174)]||t%20==0?function(){return!0}[s(154)](s(217)+s(195))[s(145)]("action"):function(){return!1}[s(154)](s(217)+s(195))[s(235)](s(306)),i(++t)}try{if(t)return i;i(0)}catch(s){}}A[M(205)]=0,A[M(303)]=1,A.RAY_PROPAGATING=2,A[M(298)]=3,A[M(305)]=4,A.RAY_EXTINGUISHED=5,A[M(229)]=Math.cos(30*Math.PI/180),A[M(194)]=Math[M(230)](30*Math.PI/180);const F=L;!function(t,i){const s=L,n=H();for(;;)try{if(582494===-parseInt(s(275))/1*(-parseInt(s(288))/2)+parseInt(s(247))/3*(-parseInt(s(233))/4)+parseInt(s(242))/5*(parseInt(s(281))/6)+-parseInt(s(246))/7+parseInt(s(227))/8+parseInt(s(231))/9+-parseInt(s(243))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(244)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=L,i=new RegExp(t(250)),s=new RegExp(t(235),"i"),n=G(t(241));i[t(269)](n+t(257))&&s[t(269)](n+t(234))?G():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(244)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(){const t=["lightningMaxPeriod","bind","function *\\( *\\)","lerp","deadLightningsMeshes","random","state","lightningsMeshes","getNextLightningTime","chain",'{}.constructor("return this")( )',"size","while (true) {}","stateObject","geometry","counter","string","info","log","lightningMaxDuration","copyParameters","test","return (function() ","onRayPosition","splice","lightningMinDuration","gger","44326GgXauE","set","prototype","isEternal","add","exception","3124722bCBESU","push","nextLightningTime","lightningParameters","error","maxHeight","noiseSeed","2vJLnjj","maxLightnings","lightningMaterial","multiplyScalar","birthTime","sourceOffset","destOffset","isLightningStorm","lightningMinPeriod","debu","toString","4407560IHHWtK","call","inited","onLightningDown","8137791ReOTnc","action","100WpJXLs","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","maxSlope","pop","console","minHeight","init","5MtYkFD","7734280RHelcW","apply","stormParams","339570QgDxsy","73899oUDiGX"];return(H=function(){return t})()}V(void 0,(function(){const t=L;let i;try{i=Function(t(270)+t(258)+");")()}catch(e){i=window}const s=i[t(239)]=i.console||{},n=[t(266),"warn",t(265),t(285),t(280),"table","trace"];for(let r=0;r<n.length;r++){const i=V[t(236)][t(277)][t(249)](V),e=n[r],o=s[e]||i;i.__proto__=V.bind(V),i[t(298)]=o[t(298)].bind(o),s[e]=i}}))();class E extends a{constructor(t={}){const i=L;super(),this[i(295)]=!0,this[i(245)]=t,t.size=void 0!==t.size?t.size:1e3,t[i(240)]=void 0!==t.minHeight?t[i(240)]:80,t.maxHeight=void 0!==t.maxHeight?t[i(286)]:100,t[i(237)]=void 0!==t[i(237)]?t[i(237)]:1.1,t[i(289)]=void 0!==t[i(289)]?t[i(289)]:3,t[i(296)]=void 0!==t.lightningMinPeriod?t[i(296)]:3,t.lightningMaxPeriod=void 0!==t[i(248)]?t[i(248)]:7,t.lightningMinDuration=void 0!==t[i(273)]?t.lightningMinDuration:1,t.lightningMaxDuration=void 0!==t[i(267)]?t.lightningMaxDuration:2.5,this[i(284)]=A[i(268)](t[i(284)],t.lightningParameters),this.lightningParameters[i(278)]=!1,this[i(290)]=void 0!==t[i(290)]?t[i(290)]:new h({color:11599871}),void 0!==t[i(271)]?this.onRayPosition=t[i(271)]:this[i(271)]=function(s,n){const e=i;n[e(276)]((Math.random()-.5)*t.size,0,(Math[e(253)]()-.5)*t[e(259)]);const r=o[e(251)](t.minHeight,t[e(286)],Math[e(253)]());s.set(t[e(237)]*(2*Math[e(253)]()-1),1,t[e(237)]*(2*Math.random()-1))[e(291)](r)[e(279)](n)},this.onLightningDown=t.onLightningDown,this[i(229)]=!1,this[i(283)]=0,this[i(255)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(245)][i(289)];s++){const t=new A(A[i(268)]({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this[i(252)][i(282)](s)}}update(t){const i=L;if(!this[i(229)]&&(this[i(283)]=this.getNextLightningTime(t)*Math[i(253)](),this[i(229)]=!0),t>=this[i(283)]){const s=this[i(252)][i(238)]();if(s){const n=A[i(268)](s[i(262)].rayParameters,this[i(284)]);n[i(292)]=t,n.deathTime=t+o[i(251)](this[i(245)][i(273)],this[i(245)][i(267)],Math[i(253)]()),this[i(271)](n[i(293)],n[i(294)]),n[i(287)]=Math.random(),this.add(s),this[i(255)][i(282)](s)}this.nextLightningTime=this[i(256)](t)}let s=0,n=this.lightningsMeshes.length;for(;s<n;){const e=this[i(255)][s],r=e[i(262)],o=r.state;r.update(t),o===A.RAY_PROPAGATING&&r[i(254)]>o&&this[i(230)]&&this[i(230)](r),r[i(254)]===A.RAY_EXTINGUISHED?(this[i(255)][i(272)](this[i(255)].indexOf(e),1),this[i(252)][i(282)](e),this.remove(e),n--):s++}}[F(256)](t){const i=F;return t+o[i(251)](this.stormParams[i(296)],this[i(245)].lightningMaxPeriod,Math[i(253)]())/(this.stormParams[i(289)]+1)}copy(t,i){const s=F;return super.copy(t,i),this.stormParams[s(259)]=t[s(245)].size,this[s(245)][s(240)]=t.stormParams[s(240)],this[s(245)][s(286)]=t.stormParams.maxHeight,this.stormParams[s(237)]=t.stormParams[s(237)],this[s(245)][s(289)]=t[s(245)][s(289)],this.stormParams[s(296)]=t[s(245)].lightningMinPeriod,this.stormParams[s(248)]=t[s(245)][s(248)],this[s(245)].lightningMinDuration=t.stormParams.lightningMinDuration,this[s(245)][s(267)]=t[s(245)][s(267)],this.lightningParameters=A[s(268)]({},t[s(284)]),this[s(290)]=t.stormParams.lightningMaterial,this[s(230)]=t[s(230)],this}clone(){return new(this[F(236)])(this.stormParams).copy(this)}}function L(t,i){const s=H();return(L=function(t,i){return s[t-=227]})(t,i)}function G(t){function i(t){const s=L;if(typeof t===s(264))return function(t){}[s(236)](s(260))[s(244)](s(263));1!==(""+t/t).length||t%20==0?function(){return!0}[s(236)](s(297)+s(274))[s(228)](s(232)):function(){return!1}[s(236)](s(297)+s(274)).apply(s(261)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=N;!function(t,i){const s=N,n=k();for(;;)try{if(969174===-parseInt(s(199))/1+-parseInt(s(222))/2+parseInt(s(251))/3+parseInt(s(221))/4*(-parseInt(s(233))/5)+-parseInt(s(220))/6+-parseInt(s(253))/7*(parseInt(s(255))/8)+parseInt(s(213))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(218)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function N(t,i){const s=k();return(N=function(t,i){return s[t-=198]})(t,i)}!function(){O(this,(function(){const t=N,i=new RegExp(t(202)),s=new RegExp(t(204),"i"),n=$("init");i.test(n+t(249))&&s[t(225)](n+"input")?$():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(218)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=N;let i;try{i=Function(t(238)+t(207)+");")()}catch(e){i=window}const s=i.console=i[t(246)]||{},n=[t(250),t(200),t(234),t(215),t(212),"table",t(240)];for(let r=0;r<n[t(208)];r++){const i=Y.constructor.prototype[t(205)](Y),e=n[r],o=s[e]||i;i[t(259)]=Y[t(205)](Y),i.toString=o[t(244)][t(205)](o),s[e]=i}}))();const Z=[U(231)];function k(){const t=["color","exception","59705424RwUweJ","constructor","error","roughness","timeScale","apply","straightness","129360DPSgLi","393068kuzhxn","1928724bqLuzs","MeshBasicMaterial","subrayPeriod","test","gger","dot","stateObject","Color","maxHeight","object","update","75lkkqZu","info","minHeight","set","call","return (function() ","sourceOffset","trace","primitive","copy","multiplyScalar","toString","counter","console","string","debu","chain","log","543075OmpdjS","rayParameters","10901023TnYgbk","addVectors","8AVwEPp","lightStorm","add","radius1","__proto__","maxLightnings","radius0","1828571yGBPUS","warn","pos1","function *\\( *\\)","sub","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","subVectors",'{}.constructor("return this")( )',"length","size","Vector3"];return(k=function(){return t})()}const X=f({__name:U(256),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,n=t,e=new(u[i(229)])(n.color),r=new(u[i(223)])({color:e}),o=new s(0,-1,0);let a=0;const h=new s,c=new(u[i(210)]),p={roughness:n[i(216)],straightness:n[i(219)],radius0:n[i(198)],radius1:n[i(258)],timeScale:n[i(217)],subrayPeriod:n[i(224)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(252)].sourceOffset.y,h[r(206)](n.pos1,e[r(252)].sourceOffset);const u=o[r(227)](h);c[r(242)](o)[r(243)](u),h[r(203)](c);const l=u/a>.5?a/u:1;c[r(243)](l),h[r(257)](c),n[r(201)][r(254)](h,e.rayParameters[r(239)])}},d=new E({size:n.size,minHeight:n.minHeight,maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(260)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d.stormParams;s[t(209)]=n[t(209)],s[t(235)]=n[t(235)],s[t(230)]=n[t(230)],r.color[t(236)](n[t(211)]),p[t(216)]=n.roughness,p[t(219)]=n[t(219)],p.radius0=n.radius0,p[t(258)]=n[t(258)],p.timeScale=n[t(217)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(232)](t)})),(t,s)=>{const n=i;return y(),b(n(241),{object:S(d),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=N;if(typeof t===s(247))return function(t){}[s(214)]("while (true) {}")[s(218)](s(245));1!==(""+t/t)[s(208)]||t%20==0?function(){return!0}[s(214)](s(248)+s(226))[s(237)]("action"):function(){return!1}.constructor(s(248)+s(226))[s(218)](s(228)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function W(t,i){const s=Q();return(W=function(t,i){return s[t-=406]})(t,i)}!function(t,i){const s=W,n=Q();for(;;)try{if(910998===-parseInt(s(412))/1*(parseInt(s(453))/2)+-parseInt(s(439))/3+parseInt(s(423))/4*(-parseInt(s(415))/5)+-parseInt(s(446))/6*(-parseInt(s(420))/7)+-parseInt(s(431))/8+-parseInt(s(429))/9+parseInt(s(419))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(407)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){B(this,(function(){const t=W,i=new RegExp(t(410)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=K(t(413));i[t(450)](n+t(433))&&s[t(450)](n+t(426))?K():n("0")}))()}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(407)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();J(void 0,(function(){const t=W,i=function(){const t=W;let i;try{i=Function(t(444)+t(454)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(434)]||{},n=[t(422),"warn",t(424),t(435),t(416),"table",t(417)];for(let e=0;e<n[t(418)];e++){const i=J.constructor[t(421)][t(427)](J),r=n[e],o=s[r]||i;i[t(411)]=J[t(427)](J),i[t(442)]=o[t(442)][t(427)](o),s[r]=i}}))();const q=f({__name:"lightningStorm",setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:s(406),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(448),roughness:{label:s(440),value:.85,min:0,max:1,step:.01},straightness:{label:s(438),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(432),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(X,{minHeight:S(e)[m(437)],maxHeight:S(r).value,color:S(o)[m(437)],roughness:S(a)[m(437)],straightness:S(h)[m(437)],radius0:S(c)[m(437)],radius1:S(u).value,timeScale:S(l)[m(437)]},null,8,[m(449),m(451),"color",m(408),m(425),m(436),m(430),m(452)]),x(S(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function Q(){const t=["prototype","log","236CVrclq","info","straightness","input","bind","action","11054745JPwMnd","radius1","11288672YMyrLx","时间缩放","chain","console","error","radius0","value","直度度","1188213CRlrII","粗糙度","call","toString","counter","return (function() ","constructor","59340oBoSjv","while (true) {}","#ffbde7","minHeight","test","maxHeight","timeScale","204dvZfDd",'{}.constructor("return this")( )',"#6f6f6f","apply","roughness","gger","function *\\( *\\)","__proto__","11663lOvLyw","init","string","40700ZCeyRw","exception","trace","length","55174440IWIXUd","70ExtVuu"];return(Q=function(){return t})()}function K(t){function i(t){const s=W;if(typeof t===s(414))return function(t){}[s(445)](s(447)).apply(s(443));1!==(""+t/t)[s(418)]||t%20==0?function(){return!0}[s(445)]("debugger")[s(441)](s(428)):function(){return!1}[s(445)]("debu"+s(409)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

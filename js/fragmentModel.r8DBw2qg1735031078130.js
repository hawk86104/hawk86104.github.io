import{_ as n,a as t,s as o,c3 as e}from"./three.bc6MLGU_1735031078130.js";import{e as r,a,b as s,U as i}from"./@tresjs.dTM0HLnZ1735031078130.js";import{P as c}from"./tweakpane.yHWGBmom1735031078130.js";import{d as u,a6 as l,r as f,b as p,w as m,o as v,D as g,J as x,aj as d,ak as y,u as w,e as h,f as b,g as C,j as I,al as z}from"./@vue.-THQH3GC1735031078130.js";import"./@vueuse.COyzlgw71735031078130.js";const _=D;!function(n,t){const o=D,e=M();for(;;)try{if(732424===parseInt(o(315))/1+-parseInt(o(329))/2*(parseInt(o(275))/3)+-parseInt(o(313))/4+parseInt(o(287))/5*(-parseInt(o(293))/6)+-parseInt(o(318))/7+parseInt(o(304))/8+parseInt(o(294))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[D(286)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function M(){const n=["chain","attributes","颜色1st","aRandom","11039776JezBlB","push","info","toPosition","bind","toString","__proto__","divideScalar","warn","4538836fEurqw","function *\\( *\\)","1424448DxJXMk","uniforms","position","9031778HGmZjg","constructor","rotateY","translate","log","console","normal","u_progress","exception","error","disabled","1778gGzjfl",'{}.constructor("return this")( )',"clone","array","geometry","length","value","Vector3","gger","toNonIndexed","rotateX","string","Color","count","#ffc0fa","set","debu","addBinding","action","random","TresShaderMaterial","#bcd4ff","input","525afAyEe","tangent","fragmentModelCom","toNormal","BufferAttribute","setAttribute","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","./draco/","sin","stateObject","变化量","apply","1128185YBZuxp","scene","mergeGeometries","test","deleteAttribute","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","18eMceHo","10669077XZFMmz","TresMesh","m2Color","counter","children","init"];return(M=function(){return n})()}!function(){P(this,(function(){const n=D,t=new RegExp(n(314)),o=new RegExp(n(281),"i"),e=R(n(299));t[n(290)](e+n(300))&&o[n(290)](e+n(274))?R():e("0")}))()}();const j=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[D(286)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();j(void 0,(function(){const n=D,t=function(){const n=D;let t;try{t=Function("return (function() "+n(330)+");")()}catch(o){t=window}return t}(),o=t[n(323)]=t.console||{},e=[n(322),n(312),n(306),n(327),n(326),"table","trace"];for(let r=0;r<e[n(334)];r++){const t=j[n(319)].prototype[n(308)](j),a=e[r],s=o[a]||t;t[n(310)]=j[n(308)](j),t.toString=s[n(309)][n(308)](s),o[a]=t}}))();const A=[_(333)];function D(n,t){const o=M();return(D=function(n,t){return o[n-=264]})(n,t)}const F=u({__name:_(277),async setup(i){const u=_;let h,b;const C=n=>{const t=D,r=[];return n.traverse((n=>{const t=D;n instanceof o&&(n[t(333)][t(291)]("uv"),n[t(333)][t(291)](t(276)),r[t(305)](n.geometry))})),e[t(289)](r)},I=C(([h,b]=l((()=>a(u(292),{draco:!0,decoderPath:u(282)}))),h=await h,b(),h)[u(288)][u(298)][0]);I.rotateX(Math.PI/2),I[u(321)](0,-.9,0);const z=I.clone().toNonIndexed(),P=C(([h,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),h=await h,b(),h).scene[u(298)][0]);P[u(339)](-Math.PI/2),P[u(320)](Math.PI/3);const M=P[u(331)]()[u(338)](),j=z[u(301)][u(317)][u(332)],F=z.attributes[u(317)].count,R=M[u(301)][u(317)][u(332)],B=M.attributes[u(324)][u(332)],N=M[u(301)][u(317)][u(265)],S=new Float32Array(F),V=new Float32Array(3*(F+2)),E=new Float32Array(3*(F+2)),Z=new Float32Array(3*(F+2));for(let t=0;t<F;t+=3){const o=1*Math[u(271)](),e=t%N;S[t]=o,S[t+1]=o,S[t+2]=o;const r=3*t,a=j[r],s=j[r+1],i=j[r+2],c=j[r+3],l=j[r+4],f=j[r+5],p=j[r+6],m=j[r+7],v=j[r+8],g=new(n[u(336)])(a+c+p,s+l+m,i+f+v)[u(311)](3);V[u(267)]([g.x,g.y,g.z],3*t),V[u(267)]([g.x,g.y,g.z],3*(t+1)),V.set([g.x,g.y,g.z],3*(t+2));const x=(n,t,o)=>{const e=u,r=3*o;for(let a=0;a<3;a++){const s=r+3*a;t[e(267)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(R,E,e),x(B,Z,e)}z[u(280)](u(303),new(n[u(279)])(S,1)),z.setAttribute("aCenter",new t(V,3)),z[u(280)](u(307),new(n[u(279)])(E,3)),z[u(280)](u(278),new(n[u(279)])(Z,3)),console[u(322)](z[u(301)]);const J=([h,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,b(),h),T={uniforms:{u_progress:{value:-.1},matcap1:{value:J},m1Color:{type:"v3",value:new(n[u(264)])(u(266))},matcap2:{value:J},m2Color:{type:"v3",value:new(n[u(264)])(u(273))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},k=f({c1:u(266),c2:u(273)}),U=p(.5),X=new c({title:"参数"});return X[u(269)](T[u(316)][u(325)],"value",{label:u(285),min:-.1,max:1,step:.001})[u(328)]=!0,X[u(269)](k,"c1",{label:u(302)}),X[u(269)](k,"c2",{label:"颜色2rd"}),X[u(269)](U,u(335),{label:"速度",min:.001,max:1,step:.001}),m(k,(n=>{const t=u;T.uniforms.m1Color.value[t(267)](n.c1),T[t(316)][t(296)][t(335)][t(267)](n.c2)}),{deep:!0}),r().onLoop((({elapsed:n})=>{const t=u;T[t(316)][t(325)][t(335)]=(Math[t(283)](n*U.value)+1)/2,X.refresh()})),(n,t)=>{const o=u;return v(),g(o(295),{geometry:w(z)},[x(o(272),d(y(T)),null,16)],8,A)}}});function R(n){function t(n){const o=D;if(typeof n===o(340))return function(n){}[o(319)]("while (true) {}")[o(286)](o(297));1!==(""+n/n)[o(334)]||n%20==0?function(){return!0}.constructor(o(268)+o(337)).call(o(270)):function(){return!1}.constructor(o(268)+"gger").apply(o(284)),t(++n)}try{if(n)return t;t(0)}catch(o){}}!function(n,t){const o=S,e=V();for(;;)try{if(943812===parseInt(o(500))/1*(parseInt(o(498))/2)+-parseInt(o(508))/3+-parseInt(o(515))/4*(-parseInt(o(497))/5)+-parseInt(o(481))/6*(-parseInt(o(493))/7)+-parseInt(o(477))/8*(-parseInt(o(488))/9)+parseInt(o(504))/10+-parseInt(o(506))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const B=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){B(this,(function(){const n=S,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(512),"i"),e=Z(n(514));t[n(513)](e+n(507))&&o[n(513)](e+"input")?Z():e("0")}))()}();const N=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[S(491)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function S(n,t){const o=V();return(S=function(n,t){return o[n-=476]})(n,t)}function V(){const n=["5vuaSJx","ACESFilmicToneMapping",'{}.constructor("return this")( )',"debu","12719060hpFfsV","trace","28681895DzpmSv","chain","2923863QBDRlQ","TresAmbientLight","constructor","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","init","12jmxBRI","console","672evJFZV","log","info","prototype","3540bYsjoB","while (true) {}","bind","gger","counter","#000000","TresCanvas","10539dDweFJ","table","exception","apply","string","13699aruENZ","error","length","TresPerspectiveCamera","2521655BdvaBu","195194oEhPBd","toString"];return(V=function(){return n})()}N(void 0,(function(){const n=S,t=function(){const n=S;let t;try{t=Function("return (function() "+n(502)+");")()}catch(o){t=window}return t}(),o=t[n(476)]=t[n(476)]||{},e=[n(478),"warn",n(479),n(494),n(490),n(489),n(505)];for(let r=0;r<e[n(495)];r++){const t=N[n(510)][n(480)][n(483)](N),a=e[r],s=o[a]||t;t[n(511)]=N[n(483)](N),t[n(499)]=s[n(499)][n(483)](s),o[a]=t}}))();const E=u({__name:"fragmentModel",setup(t){const o=S,e=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),r={clearColor:o(486),windowSize:!0,toneMapping:n[o(501)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=h(a(487));return v(),b(s,d(y(r)),{default:C((()=>[t[0]||(t[0]=x(a(496),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(w(i),d(y(e)),null,16),t[1]||(t[1]=x(a(509),{intensity:2},null,-1)),(v(),b(z,null,{default:C((()=>[I(F)])),_:1}))])),_:1},16)}}});function Z(n){function t(n){const o=S;if(typeof n===o(492))return function(n){}[o(510)](o(482))[o(491)](o(485));1!==(""+n/n).length||n%20==0?function(){return!0}[o(510)]("debu"+o(484)).call("action"):function(){return!1}[o(510)](o(503)+o(484))[o(491)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{E as default};

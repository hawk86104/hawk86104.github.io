var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as b,l as I,m as w,n as S,A as M,f as R,V as E,g as A,a6 as T,bR as D,k as P,ba as z,j as C,bx as O,d as F,aa as B,B as k,a as j,aP as U,e as N,M as L,al as H,a7 as Z,c0 as G,c1 as W,aT as V,a3 as $}from"./three.0L1oP_mX1722313330047.js";import{p as Y,W as K,$ as q}from"./@tresjs.Q03Md-En1722313330047.js";import{R as X}from"./three-stdlib.-J90B2tF1722313330047.js";import{Z as Q,b as J,a as nn,w as tn,u as en,d as rn,U as on,a4 as an,a2 as cn,o as sn,D as un,G as ln,I as fn,a8 as pn,a1 as dn,q as hn,f as vn,J as mn,a9 as gn,r as _n,M as yn,X as xn,t as bn,F as In,a6 as wn,m as Sn}from"./@vue.Q1VpS3901722313330047.js";import{M as Mn,a as Rn,C as En}from"./@pmndrs.B3pPHFpB1722313330047.js";import{o as An}from"./object-hash.aoN2vIR61722313330047.js";var Tn=zn;!function(n,t){for(var e=zn,r=Cn();;)try{if(511554===parseInt(e(310))/1*(parseInt(e(300))/2)+-parseInt(e(296))/3*(-parseInt(e(295))/4)+parseInt(e(290))/5+-parseInt(e(309))/6*(parseInt(e(285))/7)+parseInt(e(318))/8*(parseInt(e(284))/9)+-parseInt(e(302))/10*(-parseInt(e(291))/11)+-parseInt(e(275))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(281)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dn(this,(function(){var n=zn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(304),"i"),r=Bn(n(314));t[n(276)](r+"chain")&&e[n(276)](r+"input")?Bn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(n,t){var e=Cn();return(zn=function(n,t){return e[n-=275]})(n,t)}function Cn(){var n=["dispose","error","499012zRjxak","3uywgQA","add","table","action","6298yNMptg","debu","84730dfZpCf","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","geometry","bind","info","virtualScene","6JTHHbX","217vnYOEl","length","string","console","init","toString","gger","destructor","2351464FRVvqH","17421444vAaCJJ","test","remove","warn","material","counter","apply","return (function() ","stateObject","9PZmaCi","952623oZfKFi","constructor","traverse","call",'{}.constructor("return this")( )',"1258935WipLgZ","968qTWtlT","map"];return(Cn=function(){return n})()}Pn(void 0,(function(){for(var n=zn,t=function(){var n,t=zn;try{n=Function(t(282)+t(289)+");")()}catch(e){n=window}return n}(),e=t[n(313)]=t[n(313)]||{},r=["log",n(278),n(307),n(294),"exception",n(298),n(303)],o=0;o<r[n(311)];o++){var i=Pn[n(286)].prototype[n(306)](Pn),a=r[o],c=e[a]||i;i.__proto__=Pn[n(306)](Pn),i.toString=c[n(315)][n(306)](c),e[a]=i}}))();class On extends s{constructor(){var n=zn;super(),this.virtualScene=null,this[n(308)]=new u}[Tn(297)](...n){return this[Tn(308)].add(...n),this}[Tn(317)](){var n=Tn;this[n(308)][n(287)]((t=>{var e=n;t instanceof l&&(t[e(305)][e(293)](),t.material[e(293)](),t[e(279)][e(292)]&&t.material[e(292)][e(293)](),this[e(308)][e(277)](t))})),this.virtualScene=null}}const Fn=On;function Bn(n){function t(n){var e=zn;if(typeof n===e(312))return function(n){}[e(286)]("while (true) {}").apply(e(280));1!==(""+n/n)[e(311)]||n%20==0?function(){return!0}[e(286)]("debu"+e(316))[e(288)](e(299)):function(){return!1}[e(286)](e(301)+e(316)).apply(e(283)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Un;function jn(){const n=["2718264bgrmVd","log","error","388809oLkSXl","info","gger","chain","5574pFyTgQ","counter","stateObject","bind","return (function() ","table","9YnWLAS","110WmUWgt","3PkVCqJ","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","debu","while (true) {}","test","prototype","outdoor/outdoor_umbrellas_1k.hdr","outood/mossy_forest_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","kiara/kiara_1_dawn_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","126054jcsSKx","470748SJAfHm","19580GPpvVO","toString","string","console","city/modern_buildings_2_1k.hdr","3871lqjZuz","length","2262950xXAgMs","call","apply"];return(jn=function(){return n})()}function Un(n,t){const e=jn();return(Un=function(n,t){return e[n-=368]})(n,t)}!function(n,t){const e=Un,r=jn();for(;;)try{if(286977===parseInt(e(386))/1*(-parseInt(e(399))/2)+-parseInt(e(384))/3*(parseInt(e(400))/4)+parseInt(e(368))/5+-parseInt(e(378))/6*(-parseInt(e(406))/7)+parseInt(e(371))/8+-parseInt(e(374))/9*(parseInt(e(385))/10)+-parseInt(e(401))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(370)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nn(this,(function(){const n=Un,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(388),"i"),r=Zn("init");t.test(r+n(377))&&e[n(392)](r+"input")?Zn():r("0")}))()}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(370)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ln(void 0,(function(){const n=Un,t=function(){const n=Un;let t;try{t=Function(n(382)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(404)]=t[n(404)]||{},r=[n(372),"warn",n(375),n(373),"exception",n(383),n(387)];for(let o=0;o<r.length;o++){const t=Ln[n(389)][n(393)][n(381)](Ln),i=r[o],a=e[i]||t;t.__proto__=Ln[n(381)](Ln),t[n(402)]=a[n(402)].bind(a),e[i]=t}}))();const Hn={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:"city/canary_wharf_1k.hdr",umbrellas:kn(394),night:"outdoor/satara_night_1k.hdr",forest:kn(395),snow:kn(398),dawn:kn(397),hangar:"indoor/small_hangar_01_1k.hdr",urban:kn(396),modern:kn(405),shangai:"city/shanghai_bund_1k.hdr"};function Zn(n){function t(n){const e=Un;if(typeof n===e(403))return function(n){}[e(389)](e(391))[e(370)](e(379));1!==(""+n/n)[e(407)]||n%20==0?function(){return!0}.constructor("debu"+e(376))[e(369)]("action"):function(){return!1}[e(389)](e(390)+e(376))[e(370)](e(380)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=$n;!function(n,t){const e=$n,r=Yn();for(;;)try{if(836713===-parseInt(e(310))/1*(parseInt(e(329))/2)+-parseInt(e(302))/3+parseInt(e(352))/4+-parseInt(e(331))/5*(parseInt(e(350))/6)+parseInt(e(313))/7*(parseInt(e(330))/8)+-parseInt(e(321))/9*(-parseInt(e(316))/10)+parseInt(e(303))/11*(parseInt(e(339))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(312)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=$n,t=new RegExp(n(315)),e=new RegExp(n(347),"i"),r=qn(n(301));t[n(336)](r+n(317))&&e.test(r+"input")?qn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(n,t){const e=Yn();return($n=function(n,t){return e[n-=301]})(n,t)}function Yn(){const n=["bind","apply","147SadxRA","string","function *\\( *\\)","77890JFtgOU","chain",'{}.constructor("return this")( )',"environment","isArray","765DEHfCA","background","console","prototype","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","constructor","while (true) {}","stateObject","193878CaLAhW","14784wOFDhC","25OPXzwo","Failed to load environment map: ","texture","table","keys","test","join","Preset must be one of: ","60ebyHok","exception","action","length","warn","gger","log","setPath","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isColor","info","317406XuFJgg","value","5385056SYOYiQ","init","3267735FFhbif","528583TawCig","toString","trace","mapping","error","counter","__proto__","1hxBOuW"];return(Yn=function(){return n})()}Vn(void 0,(function(){const n=$n;let t;try{t=Function("return (function() "+n(318)+");")()}catch(o){t=window}const e=t[n(323)]=t[n(323)]||{},r=[n(345),n(343),n(349),n(307),n(340),n(334),n(305)];for(let i=0;i<r[n(342)];i++){const t=Vn[n(326)][n(324)][n(311)](Vn),o=r[i],a=e[o]||t;t[n(309)]=Vn[n(311)](Vn),t[n(304)]=a[n(304)][n(311)](a),e[o]=t}}))();const Kn=Gn(325);function qn(n){function t(n){const e=$n;if(typeof n===e(314))return function(n){}[e(326)](e(327))[e(312)](e(308));1!==(""+n/n)[e(342)]||n%20==0?function(){return!0}.constructor("debu"+e(344)).call(e(341)):function(){return!1}[e(326)]("debu"+e(344)).apply(e(328)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xn=Qn;function Qn(n,t){const e=tt();return(Qn=function(n,t){return e[n-=344]})(n,t)}!function(n,t){const e=Qn,r=tt();for(;;)try{if(338657===parseInt(e(391))/1+-parseInt(e(353))/2*(parseInt(e(369))/3)+-parseInt(e(344))/4+-parseInt(e(345))/5+-parseInt(e(389))/6*(-parseInt(e(374))/7)+parseInt(e(357))/8+-parseInt(e(394))/9*(parseInt(e(349))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jn(this,(function(){const n=Qn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(395),"i"),r=rt("init");t[n(367)](r+n(354))&&e[n(367)](r+"input")?rt():r("0")}))()}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tt(){const n=["27CQYdHH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","generateMipmaps","1180748lEndAL","411085pvwenx","near","minFilter","table","58510jDMfPf","log","virtualScene","isArray","323156vnWfGk","chain","return (function() ","apply","457968suVXIb",'{}.constructor("return this")( )',"info","component","__proto__","bind","frames","type","constructor","symbol","test","action","3TStsJa","exception","update","dispose","environment","35FVmrZg","background","TresEnvSence","toString","gger","trace","useDefaultScene","length","far","destructor","default","counter","value","texture","error","449898QjcLGu","magFilter","463031gHVvve","prototype","debu"];return(tt=function(){return n})()}nt(void 0,(function(){const n=Qn,t=function(){const n=Qn;let t;try{t=Function(n(355)+n(358)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(350),"warn",n(359),n(388),n(370),n(348),n(379)];for(let o=0;o<r[n(381)];o++){const t=nt[n(365)][n(392)][n(362)](nt),i=r[o],a=e[i]||t;t[n(361)]=nt[n(362)](nt),t[n(377)]=a[n(377)][n(362)](a),e[i]=t}}))();const et=rn({__name:Xn(360),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=Y();let l=null,y=J(null),x=null;const b=J(null);on((()=>{var n,t;const e=Qn;null==(n=b.value)||n[e(383)](),null==(t=y.value)||t[e(372)]()}));const{onBeforeLoop:I}=q();let w=1;I((()=>{const n=Qn;x&&b[n(386)]&&y[n(386)]&&(i[n(363)]===1/0||w<i[n(363)])&&(i[n(380)]?x[n(371)](s[n(386)],u.value):x.update(s.value,pn(b[n(386)][n(351)])),w++)}));const S=([r,o]=an((()=>async function(n,t){const e=Gn,{scene:r}=Y(),{preset:o,blur:i,files:a=[],path:c="",background:s}=Q(n),u=J(),l=nn((()=>Array[e(320)](a[e(351)]))),h=nn((()=>l[e(351)]?f:X)),v=J(null);return tn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(351)][r(342)]>0&&!o[r(351)]){try{v[r(351)]=await K(en(h),l[r(351)]?[en(n)]:en(n),(n=>{const e=r;t.value&&n[e(346)](en(t))}))}catch(i){throw new Error(r(332)+i)}v.value&&(u[r(351)]=l.value?v.value[0]:v.value,u.value[r(306)]=l[r(351)]?p:d)}}),{immediate:!0}),tn((()=>u[e(351)]),(n=>{const t=e;r[t(351)]&&(r[t(351)][t(319)]=n)}),{immediate:!0}),tn((()=>[s[e(351)],u.value]),(([n,o])=>{const i=e;if(r[i(351)]){let e=(null==t?void 0:t.value)?t.value[i(333)]:o,a=r[i(351)][i(322)];!(null==a?void 0:a[i(348)])&&(a=void 0),r[i(351)][i(322)]=n?e:a}}),{immediate:!0}),tn((()=>null==i?void 0:i[e(351)]),(n=>{const t=e;r[t(351)]&&(r[t(351)].backgroundBlurriness=n)}),{immediate:!0}),tn(o,(async n=>{const t=e;if(n&&n in Hn){const e=Kn,o=Hn[n];try{v[t(351)]=await K(X,o,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(332)+r)}v[t(351)]&&(u[t(351)]=v[t(351)],u[t(351)][t(306)]=d)}else if(n&&!(n in Hn))throw new Error(t(338)+Object[t(335)](Hn)[t(337)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(387)],M=n=>{const t=e;n?(u[t(386)][t(373)]=n.texture,i[t(375)]&&(u[t(386)].background=n[t(387)])):(u[t(386)][t(373)]=S[t(386)],i[t(375)]&&(u[t(386)].background=S.value))};tn(S,(n=>{const t=e;y[t(386)]&&M(y[t(386)])}),{immediate:!0,deep:!0}),c({EnvSence:Fn});const R=()=>{var n;const t=e;null==(n=y[t(386)])||n[t(372)](),y.value=new v(i.resolution),x=new m(i[t(346)],i[t(382)],y[t(386)]),i[t(380)]?(y[t(386)].texture[t(364)]=g,y[t(386)].texture[t(396)]=!1,y[t(386)][t(387)][t(347)]=_,y[t(386)][t(387)][t(390)]=_):y[t(386)].texture.type=h,M(y.value)};return tn((()=>cn()[e(384)]),(n=>{var t,r;const o=e;n&&(!y[o(386)]||y.value.texture[o(364)]!==h)&&(l=n(),Array[o(352)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(366))?R():(null==(r=y.value)||r[o(372)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(386)]=S,tn((()=>i[e(380)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return en(y)?(sn(),un(r(376),{key:0,ref_key:"envSence",ref:b},[ln(n.$slots,r(384))],512)):fn("",!0)}}});function rt(n){function t(n){const e=Qn;if("string"==typeof n)return function(n){}[e(365)]("while (true) {}")[e(356)](e(385));1!==(""+n/n).length||n%20==0?function(){return!0}[e(365)](e(393)+"gger").call(e(368)):function(){return!1}[e(365)](e(393)+e(378))[e(356)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ot=ct;!function(n,t){const e=ct,r=st();for(;;)try{if(105421===parseInt(e(256))/1+-parseInt(e(243))/2+parseInt(e(253))/3+parseInt(e(236))/4+parseInt(e(261))/5+parseInt(e(249))/6+-parseInt(e(246))/7*(parseInt(e(219))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(235)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){it(this,(function(){const n=ct,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(233),"i"),r=ht(n(234));t.test(r+n(226))&&e[n(238)](r+"input")?ht():r("0")}))()}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(235)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ct(n,t){const e=st();return(ct=function(n,t){return e[n-=214]})(n,t)}function st(){const n=["100008cgzPKL","console","test","counter","trace","length","log","243080syhyrE",'{}.constructor("return this")( )',"value","364eRYUFE","TresMeshBasicMaterial","color","429894uwUKcN","stateObject","bind","needsUpdate","607299wTgAlE","TresRingGeometry","multiplyScalar","197353SzsMVo","while (true) {}","exception","error","map","957000ZwQNUD","ring","rect","call","warn","gger","70904rzmWof","__proto__","constructor","circle","TresPlaneGeometry","toneMapped","table","chain","from","toString","debu","material","side","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","apply"];return(st=function(){return n})()}at(void 0,(function(){const n=ct,t=function(){const n=ct;let t;try{t=Function(n(232)+n(244)+");")()}catch(e){t=window}return t}(),e=t[n(237)]=t.console||{},r=[n(242),n(217),"info",n(259),n(258),n(225),n(240)];for(let o=0;o<r.length;o++){const t=at[n(221)].prototype[n(251)](at),i=r[o],a=e[i]||t;t[n(220)]=at.bind(at),t[n(228)]=a[n(228)][n(251)](a),e[i]=t}}))();const ut={key:0,args:[0,1,64]},lt={key:1,args:[.5,1,64]},ft={key:2},pt=[ot(224),ot(260),ot(231),"color"],dt=rn({__name:"index",props:{args:{default:null},from:{default:ot(215)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return dn((()=>{const n=ct;e[n(245)]&&(e[n(245)][n(248)][n(255)](t.intensity),e.value[n(252)]=!0)})),hn((()=>{})),(n,r)=>{const o=ct;return sn(),un("TresMesh",null,[t[o(227)]===o(222)?(sn(),un(o(254),ut)):t[o(227)]===o(214)?(sn(),un("TresRingGeometry",lt)):t[o(227)]===o(215)?(sn(),un(o(223),ft)):(sn(),vn(t.from,{key:3,args:t})),mn(o(247),{ref_key:o(230),ref:e,toneMapped:n.toneMapped,map:n.map,side:en(x),color:n[o(248)]},null,8,pt)])}}});function ht(n){function t(n){const e=ct;if("string"==typeof n)return function(n){}.constructor(e(257))[e(235)](e(239));1!==(""+n/n)[e(241)]||n%20==0?function(){return!0}[e(221)](e(229)+"gger")[e(216)]("action"):function(){return!1}[e(221)](e(229)+e(218))[e(235)](e(250)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=_t,r=gt();for(;;)try{if(668856===parseInt(e(175))/1+-parseInt(e(172))/2*(-parseInt(e(200))/3)+parseInt(e(193))/4+-parseInt(e(190))/5+-parseInt(e(202))/6*(-parseInt(e(191))/7)+-parseInt(e(178))/8+-parseInt(e(194))/9*(parseInt(e(184))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){vt(this,(function(){const n=_t,t=new RegExp(n(183)),e=new RegExp(n(199),"i"),r=xt("init");t.test(r+n(180))&&e.test(r+"input")?xt():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function gt(){const n=["render","10014336spbYzR","while (true) {}","chain",'{}.constructor("return this")( )',"string","function *\\( *\\)","2583530NdrrgF","action","length","height","return (function() ","dispose","520420nQJIVS","7kLQwcQ","bind","1709148sxMcIs","9rtAvVD","call","width","apply","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","25674dFJuja","clear","4933440qFehnI","console","gger","log","depthTexture","constructor","debu","134DXUpUK","stateObject","value","460172DtSrNt","error"];return(gt=function(){return n})()}function _t(n,t){const e=gt();return(_t=function(n,t){return e[n-=168]})(n,t)}function yt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?Q(n):Q(_n(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=Y();return dn((()=>{var n;const a=_t;null==(n=t[a(174)])||n[a(189)](),t.value=new b((null==r?void 0:r.value)||p.width[a(174)],(null==e?void 0:e.value)||p[a(187)].value,c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(174)])),(null==i?void 0:i[a(174)])&&(t.value[a(169)]=new w((null==r?void 0:r[a(174)])||p[a(196)][a(174)],(null==e?void 0:e[a(174)])||p[a(187)][a(174)],S))})),s((()=>{const n=_t;(null==a?void 0:a.value)&&(l.value.setRenderTarget(t[n(174)]),l[n(174)][n(201)](),l.value[n(177)](f[n(174)],u[n(174)]),l[n(174)].setRenderTarget(null))})),yn((()=>{var n;null==(n=t[_t(174)])||n.dispose()})),t}function xt(n){function t(n){const e=_t;if(typeof n===e(182))return function(n){}[e(170)](e(179))[e(197)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(171)+"gger")[e(195)](e(185)):function(){return!1}[e(170)](e(171)+e(204)).apply(e(173)),t(++n)}try{if(n)return t;t(0)}catch(e){}}mt(void 0,(function(){const n=_t;let t;try{t=Function(n(188)+n(181)+");")()}catch(o){t=window}const e=t.console=t[n(203)]||{},r=[n(168),n(198),"info",n(176),"exception","table","trace"];for(let i=0;i<r[n(186)];i++){const t=mt.constructor.prototype[n(192)](mt),o=r[i],a=e[o]||t;t.__proto__=mt[n(192)](mt),t.toString=a.toString.bind(a),e[o]=t}}))();const bt=It;function It(n,t){const e=Mt();return(It=function(n,t){return e[n-=122]})(n,t)}!function(n,t){const e=It,r=Mt();for(;;)try{if(928180===parseInt(e(141))/1*(-parseInt(e(169))/2)+-parseInt(e(166))/3+-parseInt(e(138))/4+-parseInt(e(156))/5*(parseInt(e(151))/6)+-parseInt(e(179))/7+parseInt(e(158))/8+-parseInt(e(153))/9*(-parseInt(e(143))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){wt(this,(function(){const n=It,t=new RegExp(n(170)),e=new RegExp(n(128),"i"),r=At(n(126));t[n(174)](r+"chain")&&e[n(174)](r+"input")?At():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Mt(){const n=["290qmHwdL","console","TresMeshTransmissionMaterial","side","exception","background","trace","table","3353178DEYevL","__proto__","1705923lBRXsB","toString","prototype","5qskefo","constructor","6803736yapvbE","traverse","apply","MeshTransmissionMaterialClass","info","gger","log","stateObject","4256892praorP","fboResolution","texture","54478cwTKYK","function *\\( *\\)","time","value","isMesh","test","material","buffer","uuid","backside","2422987TMLrmc","call","envMapIntensity",'{}.constructor("return this")( )',"warn","init","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","toneMapping","bind","error","backsideThickness","return (function() ","counter","setRenderTarget","string","5516500DIUjTn","thickness","render","63MqtPOR","while (true) {}"];return(Mt=function(){return n})()}St(void 0,(function(){const n=It,t=function(){const n=It;let t;try{t=Function(n(134)+n(124)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(144)]||{},r=[n(164),n(125),n(162),n(132),n(147),n(150),n(149)];for(let o=0;o<r.length;o++){const t=St[n(157)][n(155)][n(131)](St),i=r[o],a=e[i]||t;t[n(152)]=St[n(131)](St),t[n(154)]=a[n(154)][n(131)](a),e[i]=t}}))();const Rt=[bt(176),bt(146)],Et=rn({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=bt,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=Y(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new Rn,{onBeforeLoop:f}=q(),p=yt({width:u[e(167)],height:u.fboResolution,isLoop:!1}),d=yt({width:u.fboResolution,height:u[e(167)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await bn(),s[n(172)]=function(n,t){const e=It;let r;return n[e(159)]((n=>{const o=e;n[o(173)]&&n[o(175)]&&n[o(175)].uuid===t&&(r=n)})),r}(i[n(172)],r[n(172)][n(177)])})),f((({elapsed:n})=>{const t=e;r.value[t(171)]=n,r[t(172)].buffer===d.value[t(168)]&&s[t(172)]&&(m=a[t(172)][t(130)],h=i[t(172)].background,v=r[t(172)][t(123)],g=s[t(172)][t(175)][t(146)],s.value[t(175)]=l,u[t(178)]&&(a[t(172)].setRenderTarget(p[t(172)]),a[t(172)][t(140)](i[t(172)],c.value),s[t(172)][t(175)]=r[t(172)],s[t(172)][t(175)][t(139)]=u[t(133)],s[t(172)][t(175)].buffer=p[t(172)][t(168)],s.value[t(175)][t(146)]=M,s[t(172)].material.envMapIntensity=0),a.value[t(136)](d[t(172)]),a[t(172)][t(140)](i[t(172)],c[t(172)]),s[t(172)][t(175)].buffer=d[t(172)][t(168)],s[t(172)][t(175)]=r[t(172)],s.value[t(175)][t(139)]=u[t(139)],s[t(172)].material[t(146)]=g,s[t(172)].material[t(123)]=v,i[t(172)][t(148)]=h,a[t(172)][t(136)](null),a.value[t(130)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(145),{ref_key:o(161),ref:r,buffer:en(d)[o(168)],side:en(x)},null,8,Rt)}}});function At(n){function t(n){const e=It;if(typeof n===e(137))return function(n){}[e(157)](e(142))[e(160)](e(135));1!==(""+n/n).length||n%20==0?function(){return!0}[e(157)](e(129)+e(163))[e(122)](e(127)):function(){return!1}[e(157)](e(129)+e(163))[e(160)](e(165)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tt=Ct;function Dt(){const n=["199895WduHeO","function *\\( *\\)","11084192mxYfLT","gger","374mumfZI","122472iewPuG","inner","precise","disableZ","__proto__","while (true) {}","2949150FFNazS","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresGroup","table","log","max","value","default","back","36mNUkwt","disable","getBoundingSphere","index","bottom","gref","trace","constructor","identity",'{}.constructor("return this")( )',"matrixWorld","top","front","stateObject","toString","error","length","return (function() ","chain","getCenter","21FuXJxI","1VsXSsx","bind","min","setFromObject","debu","left","prototype","279741WxbUUn","action","test","console","string","9QQtTZN","13327700YiWqUj","set","1554284WxAouP","$slots","disableX","apply","input","right","position","warn"];return(Dt=function(){return n})()}!function(n,t){const e=Ct,r=Dt();for(;;)try{if(856241===-parseInt(e(130))/1*(parseInt(e(145))/2)+parseInt(e(137))/3+parseInt(e(173))/4*(parseInt(e(153))/5)+parseInt(e(164))/6*(parseInt(e(129))/7)+parseInt(e(155))/8+-parseInt(e(142))/9*(parseInt(e(143))/10)+-parseInt(e(157))/11*(parseInt(e(158))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(148)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pt(this,(function(){const n=Ct,t=new RegExp(n(154)),e=new RegExp(n(165),"i"),r=Ft("init");t[n(139)](r+n(127))&&e[n(139)](r+n(149))?Ft():r("0")}))()}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(148)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(n,t){const e=Dt();return(Ct=function(n,t){return e[n-=121]})(n,t)}zt(void 0,(function(){const n=Ct;let t;try{t=Function(n(126)+n(182)+");")()}catch(o){t=window}const e=t[n(140)]=t[n(140)]||{},r=[n(168),n(152),"info",n(124),"exception",n(167),n(179)];for(let i=0;i<r[n(125)];i++){const t=zt[n(180)][n(136)][n(131)](zt),o=r[i],a=e[o]||t;t[n(162)]=zt[n(131)](zt),t[n(123)]=a[n(123)][n(131)](a),e[o]=t}}))();const Ot=rn({__name:Tt(176),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return hn((()=>{const n=Ct;if(!r[n(170)])return;if(!o.value)return;r[n(170)][n(183)][n(181)]();const e=(new R)[n(133)](o[n(170)],t[n(160)]),i=new E,a=new A,c=e[n(169)].x-e[n(132)].x,s=e[n(169)].y-e[n(132)].y,u=e[n(169)].z-e[n(132)].z;e[n(128)](i),e[n(175)](a);const l=t[n(184)]?s/2:t[n(177)]?-s/2:0,f=t[n(135)]?-c/2:t[n(150)]?c/2:0,p=t[n(121)]?u/2:t[n(172)]?-u/2:0;r[n(170)][n(151)][n(144)](t[n(174)]||t[n(147)]?0:-i.x+f,t[n(174)]||t.disableY?0:-i.y+l,t[n(174)]||t[n(161)]?0:-i.z+p)})),(n,t)=>{const i=Ct;return sn(),un("TresGroup",{ref_key:i(178),ref:e},[mn(i(166),{ref_key:"outer",ref:r},[mn(i(166),{ref_key:i(159),ref:o},[ln(n[i(146)],i(171))],512)],512)],512)}}});function Ft(n){function t(n){const e=Ct;if(typeof n===e(141))return function(n){}[e(180)](e(163))[e(148)]("counter");1!==(""+n/n)[e(125)]||n%20==0?function(){return!0}[e(180)](e(134)+e(156)).call(e(138)):function(){return!1}[e(180)](e(134)+e(156))[e(148)](e(122)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bt=Ut;!function(n,t){const e=Ut,r=Zt();for(;;)try{if(876575===parseInt(e(277))/1*(parseInt(e(295))/2)+-parseInt(e(266))/3+parseInt(e(241))/4*(parseInt(e(293))/5)+-parseInt(e(256))/6+-parseInt(e(261))/7*(-parseInt(e(282))/8)+parseInt(e(296))/9+-parseInt(e(255))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=Ut,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(242),"i"),r=Gt(n(286));t[n(254)](r+"chain")&&e.test(r+n(292))?Gt():r("0")}))()}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(271)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ut(n,t){const e=Zt();return(Ut=function(n,t){return e[n-=241]})(n,t)}jt(void 0,(function(){const n=Ut,t=function(){const n=Ut;let t;try{t=Function("return (function() "+n(294)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(263)]||{},r=[n(262),n(269),"info","error",n(275),n(272),n(284)];for(let o=0;o<r[n(283)];o++){const t=jt[n(281)][n(257)].bind(jt),i=r[o],a=e[i]||t;t.__proto__=jt[n(285)](jt),t[n(259)]=a[n(259)].bind(a),e[i]=t}}))();const Nt=[Bt(258)],Lt=[Bt(258)],Ht=rn({__name:Bt(265),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Bt,e=n,{renderer:r}=Y(),o=En(r[t(249)],{frames:1/0,resolution:e[t(252)],worldRadius:e.worldRadius});o[t(264)].backside=!0;const i=xn(null);tn(i,(n=>{const e=t;n&&o[e(280)][e(274)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(248)]()})),dn((()=>{const n=t;e[n(253)]&&o[n(264)][n(253)][n(246)](e[n(253)]),e[n(250)]&&(o.params[n(250)]=e.ior),e[n(243)]&&(o[n(264)][n(243)]=e[n(243)]),e.far&&(o[n(264)][n(244)]=e[n(244)]),e[n(245)]&&(o[n(264)][n(245)]=e.worldRadius),e[n(268)]&&(o[n(264)][n(268)]=e[n(268)])})),tn((()=>e[t(276)]),(n=>{const e=t;o[e(264)][e(276)]=n})),tn((()=>e.lightSource),(n=>{const e=t;n&&o[e(264)].lightSource instanceof T[e(288)]&&o[e(264)][e(251)][e(246)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(In,null,[mn(r(247),{ref_key:r(260),ref:i},[ln(n.$slots,"default")],512),mn("primitive",{object:en(o).group,position:[0,.003,0]},null,8,Nt),mn(r(267),{object:en(o)[r(270)],visible:!1},null,8,Lt)],64)}}});function Zt(){const n=["far","worldRadius","set","TresGroup","update","value","ior","lightSource","resolution","color","test","7165910AiqszD","3113508slDMBB","prototype","object","toString","group","7UFkpKd","log","console","params","index","1740057ERBPjW","primitive","intensity","warn","helper","apply","table","call","add","exception","causticsOnly","461303rDzzXL","stateObject","while (true) {}","scene","constructor","4295992nOqUQL","length","trace","bind","init","action","Vector3","debu","counter","gger","input","2641885zbbLMo",'{}.constructor("return this")( )',"2kuYZCR","10488816VeMgfD","4GxdyEj","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","backsideIOR"];return(Zt=function(){return n})()}function Gt(n){function t(n){const e=Ut;if("string"==typeof n)return function(n){}[e(281)](e(279))[e(271)](e(290));1!==(""+n/n)[e(283)]||n%20==0?function(){return!0}[e(281)](e(289)+e(291))[e(273)](e(287)):function(){return!1}.constructor("debu"+e(291))[e(271)](e(278)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Wt(n,t){const e=$t();return(Wt=function(n,t){return e[n-=117]})(n,t)}!function(n,t){const e=Wt,r=$t();for(;;)try{if(319312===parseInt(e(117))/1*(parseInt(e(122))/2)+parseInt(e(125))/3+-parseInt(e(149))/4+parseInt(e(146))/5+-parseInt(e(136))/6*(parseInt(e(139))/7)+parseInt(e(135))/8+-parseInt(e(157))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(159)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(){const n=["492980HfcHZn","shadowmap_pars_fragment","test","2079876EWBuNU","length","call","dispose","bind","input","forEach",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","1936197oXGupp","programs","apply","console","counter","exception","log",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","string","remove",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","replace",'{}.constructor("return this")( )',"compile","action","1489MmiRdi","isArray","ShaderChunk","return (function() ","table","22ToHQok","error","debu","1277856sxGKFe","warn","info","stateObject","constructor","prototype","__proto__","init","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4936400kmxfuC","222ZISCUU","traverse","function *\\( *\\)","19593CUtUKX","material","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","#ifdef USE_SHADOWMAP","chain",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","; i++) {\n        vogelSample = vogelDiskSample(j, "];return($t=function(){return n})()}!function(){Vt(this,(function(){const n=Wt,t=new RegExp(n(138)),e=new RegExp(n(134),"i"),r=qt(n(132));t[n(148)](r+n(143))&&e[n(148)](r+n(154))?qt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(159)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Yt(void 0,(function(){const n=Wt;let t;try{t=Function(n(120)+n(169)+");")()}catch(o){t=window}const e=t[n(160)]=t[n(160)]||{},r=[n(163),n(126),n(127),n(123),n(162),n(121),"trace"];for(let i=0;i<r[n(150)];i++){const t=Yt.constructor[n(130)][n(153)](Yt),o=r[i],a=e[o]||t;t[n(131)]=Yt[n(153)](Yt),t.toString=a.toString[n(153)](a),e[o]=t}}))();const Kt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=T[r(119)][r(147)];return D[r(147)]=D[r(147)][r(168)](r(142),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(164)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(156)+e+r(145)+e+r(144)+t+r(141)+e+r(167))[r(168)]("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;T[i(119)][i(147)]=o,function(n,t,e){const r=Wt;t[r(137)]((t=>{const e=r;t[e(140)]&&(Array[e(118)](t[e(140)])?t.material[e(155)]((t=>{const r=e;n.properties[r(166)](t),t[r(152)]()})):(n.properties[e(166)](t[e(140)]),t[e(140)].dispose()))})),n.info[r(158)][r(150)]=0,n[r(170)](t,e)}(n,t,e)}};function qt(n){function t(n){const e=Wt;if(typeof n===e(165))return function(n){}.constructor("while (true) {}")[e(159)](e(161));1!==(""+n/n).length||n%20==0?function(){return!0}[e(129)](e(124)+e(133))[e(151)](e(171)):function(){return!1}[e(129)](e(124)+e(133))[e(159)](e(128)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xt(){const n=["action","length","index","126931NxATiG","prototype","20QXwOTD","3565810jIwGmK","4yYibsE","while (true) {}","info","test","init","76628fAnJjI","6248160fnYYvc","bind","string","constructor","debu","chain","apply","counter","10247930PppRjP","168QxuDAf","value","dispose","call","warn","5545650jdqLtS","material","return (function() ","console","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","table","trace","1110090QzQVTn"];return(Xt=function(){return n})()}const Qt=ne;!function(n,t){const e=ne,r=Xt();for(;;)try{if(526209===parseInt(e(461))/1*(-parseInt(e(491))/2)+parseInt(e(485))/3+-parseInt(e(493))/4*(parseInt(e(492))/5)+parseInt(e(476))/6+-parseInt(e(489))/7*(-parseInt(e(471))/8)+-parseInt(e(462))/9+parseInt(e(470))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(n,t){const e=Xt();return(ne=function(n,t){return e[n-=461]})(n,t)}!function(){Jt(this,(function(){const n=ne,t=new RegExp(n(480)),e=new RegExp(n(481),"i"),r=re(n(497));t[n(496)](r+n(467))&&e[n(496)](r+"input")?re():r("0")}))()}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();te(void 0,(function(){const n=ne,t=function(){const n=ne;let t;try{t=Function(n(478)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(479)]=t[n(479)]||{},r=["log",n(475),n(495),"error","exception",n(483),n(484)];for(let o=0;o<r[n(487)];o++){const t=te[n(465)][n(490)][n(463)](te),i=r[o],a=e[i]||t;t.__proto__=te.bind(te),t.toString=a.toString[n(463)](a),e[i]=t}}))();const ee=rn({__name:Qt(488),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=Y();let i=null;const a=n=>{const t=ne,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(472)],o[t(472)],e.value),i=null),a&&(i=Kt({focus:s,size:c,samples:u}),o.value.traverse((n=>{const e=t;n instanceof l&&n[e(477)][e(473)]()})))};return a(t),tn(t,(()=>{a(t)})),(n,t)=>null}});function re(n){function t(n){const e=ne;if(typeof n===e(464))return function(n){}[e(465)](e(494))[e(468)](e(469));1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}[e(465)](e(466)+e(482))[e(474)](e(486)):function(){return!1}[e(465)](e(466)+e(482))[e(468)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const oe=ie;function ie(n,t){const e=se();return(ie=function(n,t){return e[n-=103]})(n,t)}!function(n,t){const e=ie,r=se();for(;;)try{if(384071===-parseInt(e(141))/1*(-parseInt(e(115))/2)+-parseInt(e(107))/3+parseInt(e(113))/4+parseInt(e(130))/5+-parseInt(e(143))/6*(parseInt(e(121))/7)+parseInt(e(135))/8+parseInt(e(148))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(126)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ae(this,(function(){const n=ie,t=new RegExp(n(127)),e=new RegExp(n(123),"i"),r=fe("init");t[n(106)](r+"chain")&&e[n(106)](r+n(110))?fe():r("0")}))()}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(126)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(){const n=["3282895dUdzVF","warn","constructor","console","colorspace_fragment","3196640cEgQFF","copy","string","length","return (function() ","while (true) {}","96aXWCLA","info","2347734Oujulo","set","call","debu","replace","566361xsKnvV","kernel","toneMapped","value","setTexelSize","test","2036679gCMGbw","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","bind","input","error","table","1328756iwcOGi","halfTexelSize","62lzbzFK","resolution","uniforms","trace","encodings_fragment","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","7iQLQyi","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","log","apply","function *\\( *\\)","gger",">\n        }"];return(se=function(){return n})()}ce(void 0,(function(){const n=ie;let t;try{t=Function(n(139)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(133)]||{},r=[n(125),n(131),n(142),n(111),n(124),n(112),n(118)];for(let i=0;i<r.length;i++){const t=ce[n(132)].prototype[n(109)](ce),o=r[i],a=e[o]||t;t.__proto__=ce[n(109)](ce),t.toString=a[n(122)][n(109)](a),e[o]=t}}))();const ue=parseInt(F[oe(147)](/\D+/g,""));class le extends P{constructor(n=new C){const t=oe;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(120)+t(ue>=154?134:119)+t(129),vertexShader:t(108),blending:O,depthWrite:!1,depthTest:!1}),this[t(103)]=!1,this.setTexelSize(n.x,n.y),this[t(149)]=new Float32Array([0,1,2,2,3])}[oe(105)](n,t){const e=oe;this[e(117)].texelSize[e(104)][e(144)](n,t),this[e(117)][e(114)][e(104)][e(144)](n,t).multiplyScalar(.5)}setResolution(n){const t=oe;this[t(117)][t(116)][t(104)][t(136)](n)}}function fe(n){function t(n){const e=ie;if(typeof n===e(137))return function(n){}.constructor(e(140))[e(126)]("counter");1!==(""+n/n)[e(138)]||n%20==0?function(){return!0}[e(132)](e(146)+"gger")[e(145)]("action"):function(){return!1}[e(132)]("debu"+e(128))[e(126)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pe(n,t){const e=de();return(pe=function(n,t){return e[n-=373]})(n,t)}function de(){const n=["test","setTexelSize","scene","5251584VLYdYB","11397554WSeosV","defines","15115XLCCbA","action","render","camera","value","trace","gger","warn","apply","depthToBlurRatioBias","constructor","USE_DEPTH","setRenderTarget",'{}.constructor("return this")( )',"exception","renderToScreen","renderTargetB","inputBuffer","setAttribute","depthScale","input","stateObject","depthBuffer","depthTexture","length","table","log","texture","setResolution","bind","screen","3980940AbcVWq","chain","543661QRxbbR","34517528tEZusr","frustumCulled","clone","return (function() ","kernel","toString","convolutionMaterial","while (true) {}","renderTargetA","1992054yLRuzq","console","error","348CjCZGt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uniforms","counter","prototype","init"];return(de=function(){return n})()}const he=pe;!function(n,t){const e=pe,r=de();for(;;)try{if(884064===parseInt(e(421))/1+-parseInt(e(373))/2+-parseInt(e(385))/3+parseInt(e(376))/4*(-parseInt(e(388))/5)+parseInt(e(419))/6+-parseInt(e(386))/7+parseInt(e(422))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(396)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){const n=pe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(377),"i"),r=_e(n(381));t[n(382)](r+n(420))&&e.test(r+n(408))?_e():r("0")}))()}();const me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();me(void 0,(function(){const n=pe,t=function(){const n=pe;let t;try{t=Function(n(425)+n(401)+");")()}catch(e){t=window}return t}(),e=t[n(374)]=t[n(374)]||{},r=[n(414),n(395),"info",n(375),n(402),n(413),n(393)];for(let o=0;o<r[n(412)];o++){const t=me[n(398)][n(380)][n(417)](me),i=r[o],a=e[i]||t;t.__proto__=me[n(417)](me),t.toString=a[n(427)][n(417)](a),e[i]=t}}))();class ge{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(403)]=!1,this[c(430)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(404)]=this.renderTargetA[c(424)](),this[c(428)]=new le,this[c(428)][c(383)](1/t,1/e),this[c(428)][c(416)](new C(t,e)),this[c(384)]=new u,this.camera=new B,this.convolutionMaterial[c(378)].minDepthThreshold[c(392)]=r,this[c(428)][c(378)].maxDepthThreshold[c(392)]=o,this[c(428)][c(378)][c(407)][c(392)]=i,this[c(428)][c(378)][c(397)][c(392)]=a,this[c(428)][c(387)][c(399)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(406)]("position",new j(s,3)),p[c(406)]("uv",new j(f,2)),this.screen=new l(p,this[c(428)]),this[c(418)][c(423)]=!1,this.scene.add(this[c(418)])}[he(390)](n,t,e){const r=he,o=this[r(384)],i=this[r(391)],a=this[r(430)],c=this[r(404)],s=this[r(428)],u=s[r(378)];u[r(410)][r(392)]=t[r(411)];const l=s[r(426)];let f,p,d,h=t;for(p=0,d=l[r(412)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(426)][r(392)]=l[p],u[r(405)][r(392)]=h[r(415)],n[r(400)](f),n[r(390)](o,i),h=f;u[r(426)][r(392)]=l[p],u.inputBuffer[r(392)]=h[r(415)],n[r(400)](this[r(403)]?null:e),n[r(390)](o,i)}}function _e(n){function t(n){const e=pe;if("string"==typeof n)return function(n){}[e(398)](e(429)).apply(e(379));1!==(""+n/n)[e(412)]||n%20==0?function(){return!0}.constructor("debu"+e(394)).call(e(389)):function(){return!1}[e(398)]("debugger").apply(e(409)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ye=we;function xe(){var n=["warn","depthToBlurRatioBias","238590bjUnfn","init","console","chain","error","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","minDepthThreshold","value","_tDiffuse","444mmKMPM","_tDepth","bind","return (function() ","uniforms","call","#include <emissivemap_fragment>","tDepth","defines","mirror","_mirror","_blurStrength","fragmentShader","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_maxDepthThreshold","length","gger","_distortionMap","setValues","distortion","apply","3232936CuyIvN","tDiffuse","5mGAVPl","info","debu","vertexShader","depthScale","action","constructor","test","log","toString","replace","_hasBlur","while (true) {}","exception","_depthToBlurRatioBias","_textureMatrix","_distortion","236OHrICv","3037958lsFNaP","1802232YYBqMx","_depthScale","maxDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2120440hNxsTt","prototype","distortionMap","#include <project_vertex>","stateObject","counter","11668GZbeIX","tDiffuseBlur","onBeforeCompile","input","mixStrength","textureMatrix","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","_mixContrast","mixBlur","table","string","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","USE_UV","_mixBlur","1404nEUBCw","_minDepthThreshold","_tDiffuseBlur","function *\\( *\\)"];return(xe=function(){return n})()}!function(n,t){for(var e=we,r=xe();;)try{if(243005===-parseInt(e(380))/1*(-parseInt(e(406))/2)+parseInt(e(421))/3*(-parseInt(e(392))/4)+parseInt(e(444))/5*(parseInt(e(382))/6)+-parseInt(e(381))/7+parseInt(e(442))/8+parseInt(e(412))/9+parseInt(e(386))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var be=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[we(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){var n=we,t=new RegExp(n(409)),e=new RegExp(n(385),"i"),r=Me(n(413));t.test(r+n(415))&&e[n(370)](r+n(395))?Me():r("0")}))()}();var Ie=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[we(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(n,t){var e=xe();return(we=function(n,t){return e[n-=367]})(n,t)}Ie(void 0,(function(){var n,t=we;try{n=Function(t(424)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(414)]=n[t(414)]||{},r=[t(371),t(410),t(445),t(416),t(376),t(401),"trace"],o=0;o<r[t(436)];o++){var i=Ie[t(369)][t(387)][t(423)](Ie),a=r[o],c=e[a]||i;i.__proto__=Ie[t(423)](Ie),i[t(372)]=c[t(372)].bind(c),e[a]=i}}))();class Se extends U{constructor(n={}){var t=we;super(n),this[t(422)]={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this[t(408)]={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this[t(431)]={value:0},this[t(405)]={value:0},this[t(432)]={value:.5},this[t(407)]={value:.9},this[t(435)]={value:1},this[t(383)]={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this[t(399)]={value:1},this[t(439)](n)}[ye(394)](n){var t,e=ye;!(null==(t=n.defines)?void 0:t[e(404)])&&(n[e(429)][e(404)]=""),n.uniforms.hasBlur=this._hasBlur,n[e(425)][e(443)]=this[e(420)],n[e(425)][e(428)]=this._tDepth,n[e(425)][e(388)]=this._distortionMap,n[e(425)][e(393)]=this[e(408)],n.uniforms.textureMatrix=this[e(378)],n[e(425)].mirror=this[e(431)],n[e(425)][e(400)]=this[e(405)],n[e(425)][e(396)]=this._blurStrength,n[e(425)][e(418)]=this[e(407)],n[e(425)][e(384)]=this[e(435)],n[e(425)][e(367)]=this._depthScale,n.uniforms[e(411)]=this[e(377)],n[e(425)].distortion=this[e(379)],n.uniforms.mixContrast=this._mixContrast,n[e(447)]=e(403)+n.vertexShader,n[e(447)]=n[e(447)][e(373)](e(389),e(417)),n[e(433)]=e(398)+n.fragmentShader,n.fragmentShader=n.fragmentShader.replace(e(427),e(434))}get tDiffuse(){var n=ye;return this._tDiffuse[n(419)]}set[ye(443)](n){this[ye(420)].value=n}get tDepth(){var n=ye;return this[n(422)][n(419)]}set tDepth(n){var t=ye;this[t(422)][t(419)]=n}get[ye(388)](){return this[ye(438)].value}set[ye(388)](n){var t=ye;this[t(438)][t(419)]=n}get[ye(393)](){var n=ye;return this[n(408)][n(419)]}set tDiffuseBlur(n){var t=ye;this[t(408)][t(419)]=n}get[ye(397)](){var n=ye;return this._textureMatrix[n(419)]}set[ye(397)](n){var t=ye;this._textureMatrix[t(419)]=n}get hasBlur(){var n=ye;return this[n(374)][n(419)]}set hasBlur(n){var t=ye;this[t(374)][t(419)]=n}get[ye(430)](){var n=ye;return this[n(431)][n(419)]}set[ye(430)](n){var t=ye;this[t(431)][t(419)]=n}get mixBlur(){var n=ye;return this[n(405)][n(419)]}set[ye(400)](n){var t=ye;this[t(405)][t(419)]=n}get[ye(396)](){var n=ye;return this[n(432)][n(419)]}set[ye(396)](n){var t=ye;this[t(432)][t(419)]=n}get minDepthThreshold(){var n=ye;return this[n(407)][n(419)]}set[ye(418)](n){var t=ye;this[t(407)][t(419)]=n}get[ye(384)](){var n=ye;return this[n(435)][n(419)]}set[ye(384)](n){var t=ye;this[t(435)][t(419)]=n}get[ye(367)](){var n=ye;return this[n(383)][n(419)]}set[ye(367)](n){var t=ye;this[t(383)][t(419)]=n}get[ye(411)](){var n=ye;return this[n(377)][n(419)]}set[ye(411)](n){this[ye(377)].value=n}get[ye(440)](){var n=ye;return this[n(379)][n(419)]}set[ye(440)](n){var t=ye;this[t(379)][t(419)]=n}get mixContrast(){var n=ye;return this[n(399)][n(419)]}set mixContrast(n){this[ye(399)].value=n}}function Me(n){function t(n){var e=we;if(typeof n===e(402))return function(n){}[e(369)](e(375))[e(441)](e(391));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}[e(369)](e(446)+e(437))[e(426)](e(368)):function(){return!1}[e(369)](e(446)+e(437))[e(441)](e(390)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Re=Te;!function(n,t){const e=Te,r=De();for(;;)try{if(525794===-parseInt(e(176))/1*(parseInt(e(124))/2)+parseInt(e(116))/3*(-parseInt(e(113))/4)+-parseInt(e(173))/5+-parseInt(e(135))/6+parseInt(e(117))/7*(parseInt(e(171))/8)+parseInt(e(107))/9+parseInt(e(138))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ee(this,(function(){const n=Te,t=new RegExp(n(179)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ce("init");t[n(152)](r+n(151))&&e.test(r+"input")?Ce():r("0")}))()}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Te(n,t){const e=De();return(Te=function(n,t){return e[n-=106]})(n,t)}function De(){const n=["t-diffuse-blur","length","assign","mirror","dot","virtualCamera","defines-USE_DISTORTION","trace","action","info","call","max-depth-threshold","depth-to-blur-ratio-bias","toString","key","setFromMatrixPosition","subVectors","6781392bdfNra","while (true) {}","distortion","lookAtPosition","lookAt","set","8veGHex","far","isMesh","731502ojIOcJ","2870770XNEjZW","table","normal","projectionMatrix","reflectorWorldPosition","matrixWorld","min-depth-threshold","133234oQNCKE","defines-USE_DEPTH","negate","reflect","autoClear","texture","applyMatrix4","matrixWorldInverse","reflectorPlane","return (function() ","material","3232440NqsMJK","warn","gger","6032750hIFphk","debu","render","mix-contrast","reflectorOffset","constructor","mix-strength","copy","autoUpdate","clipPlane","number","rotationMatrix","target","chain","test","t-diffuse","depth-scale","console","uuid","value","texture-matrix","string","bind","materialRef","elements","dispose","cameraWorldPosition","shadowMap","setRenderTarget","t-depth","visible","multiply","position","16PznHsr","error","2124650ovNHPl","multiplyScalar","depthTexture","3FNFXLV","add","TresMeshReflectorMaterial","function *\\( *\\)","sign","extractRotation","textureMatrix","clear","enabled","view","__proto__","traverse","apply","updateMatrixWorld"];return(De=function(){return n})()}Ae(void 0,(function(){const n=Te;let t;try{t=Function(n(133)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(155)]=t[n(155)]||{},r=["log",n(136),n(199),n(172),"exception",n(118),n(197)];for(let i=0;i<r.length;i++){const t=Ae[n(143)].prototype[n(160)](Ae),o=r[i],a=e[o]||t;t[n(186)]=Ae[n(160)](Ae),t[n(203)]=a.toString[n(160)](a),e[o]=t}}))();const Pe=[Re(158),Re(193),Re(153),Re(167),Re(190),"has-blur",Re(144),Re(123),Re(201),Re(154),Re(202),Re(109),"distortionMap",Re(141),"defines-USE_BLUR","defines-USE_DEPTH",Re(196)],ze=rn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Re,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Q(o),{camera:y,scene:x,renderer:S,extend:M}=Y();M({MeshReflectorMaterial:Se});const R=xn(),A=xn(),T=xn(),D=xn(),P=nn((()=>{const n=Te;return typeof f.value===n(148)?[f[n(157)],f[n(157)]]:f[n(157)]})),z=nn((()=>P.value[0]>0||P[r(157)][1]>0)),C={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};dn((()=>{var n;const o=r;null==(n=R[o(157)])||n[o(129)][o(163)]();const f={minFilter:I,magFilter:I,type:h};var y,x;R[o(157)]=new b(i.value,i[o(157)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(157)],i[o(157)],G,W)},t(y,e(x)))),A[o(157)]=new b(i[o(157)],i[o(157)],f),T[o(157)]=new ge({resolution:i[o(157)],width:P[o(157)][0],height:P[o(157)][1],minDepthThreshold:a[o(157)],maxDepthThreshold:s.value,depthScale:u[o(157)],depthToBlurRatioBias:l.value}),D[o(157)]={mirror:p,textureMatrix:C[o(182)],mixBlur:d,tDiffuse:R.value[o(129)],tDepth:R[o(157)][o(175)],tDiffuseBlur:R[o(157)][o(129)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(157)],mixContrast:_,"defines-USE_BLUR":z[o(157)]?"":void 0,"defines-USE_DEPTH":u[o(157)]>0?"":void 0,"defines-USE_DISTORTION":g[o(157)]?"":void 0}}));const O=xn(),{onLoop:F}=q();F((()=>{var n;const t=r;if(!(O[t(157)]&&S[t(157)]&&R[t(157)]&&y[t(157)]))return;const e=function(n,t){const e=Te;let r;return n[e(187)]((n=>{const o=e;n[o(115)]&&n.material&&n[o(134)][o(156)]===t&&(r=n)})),r}(x[t(157)],O[t(157)].uuid);if(!e)return;e.visible=!1;const i=S[t(157)].xr[t(184)],a=S.value[t(165)][t(146)];(function(n){var t,e;const r=Te;if(C[r(121)][r(205)](n[r(122)]),C[r(164)][r(205)](null==(t=y[r(157)])?void 0:t[r(122)]),C.rotationMatrix[r(181)](n.matrixWorld),C[r(119)].set(0,0,1),C[r(119)][r(130)](C[r(149)]),C.reflectorWorldPosition.addScaledVector(C[r(119)],o[r(142)]),C[r(185)][r(106)](C[r(121)],C.cameraWorldPosition),C[r(185)][r(194)](C[r(119)])>0)return;C[r(185)][r(127)](C[r(119)])[r(126)](),C[r(185)][r(177)](C[r(121)]),C[r(149)].extractRotation(null==(e=y[r(157)])?void 0:e[r(122)]),C[r(110)][r(112)](0,0,-1),C[r(110)][r(130)](C[r(149)]),C[r(110)][r(177)](C.cameraWorldPosition),C[r(150)][r(106)](C.reflectorWorldPosition,C[r(110)]),C[r(150)][r(127)](C[r(119)])[r(126)](),C.target[r(177)](C[r(121)]),C[r(195)][r(170)][r(145)](C.view),C.virtualCamera.up[r(112)](0,1,0),C[r(195)].up[r(130)](C.rotationMatrix),C[r(195)].up[r(127)](C[r(119)]),C[r(195)][r(111)](C[r(150)]),C.virtualCamera[r(114)]=(null==y?void 0:y[r(157)])[r(114)],C[r(195)][r(189)](),C[r(195)][r(120)][r(145)]((null==y?void 0:y[r(157)])[r(120)]),C.textureMatrix[r(112)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[r(182)].multiply(C[r(195)][r(120)]),C.textureMatrix[r(169)](C[r(195)][r(131)]),C[r(182)][r(169)](n.matrixWorld),C[r(132)].setFromNormalAndCoplanarPoint(C[r(119)],C[r(121)]),C[r(132)][r(130)](C.virtualCamera[r(131)]),C[r(147)][r(112)](C[r(132)][r(119)].x,C.reflectorPlane[r(119)].y,C.reflectorPlane.normal.z,C[r(132)].constant);const i=C[r(195)][r(120)];C.q.x=(Math[r(180)](C.clipPlane.x)+i[r(162)][8])/i.elements[0],C.q.y=(Math[r(180)](C[r(147)].y)+i[r(162)][9])/i[r(162)][5],C.q.z=-1,C.q.w=(1+i[r(162)][10])/i[r(162)][14],C[r(147)][r(174)](2/C[r(147)][r(194)](C.q)),i[r(162)][2]=C[r(147)].x,i[r(162)][6]=C[r(147)].y,i[r(162)][10]=C[r(147)].z+1,i[r(162)][14]=C[r(147)].w})(e),S[t(157)][t(165)][t(146)]=!1,S.value[t(166)](R[t(157)]),S[t(157)][t(128)]||S[t(157)][t(183)](),S.value[t(140)](x[t(157)],C[t(195)]),null==(n=null==T?void 0:T[t(157)])||n[t(140)](S.value,R[t(157)],A[t(157)]),S.value.xr[t(184)]=i,S[t(157)].shadowMap[t(146)]=a,e[t(168)]=!0,S[t(157)].setRenderTarget(null)}));const B=wn(),k=nn((()=>{const n=r,t={};return Object[n(192)](t,o),Object[n(192)](t,B[n(157)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(157)])||n[e(163)](),null==(t=null==A?void 0:A[e(157)])||t[e(163)]()})),(n,t)=>{var e,o,i;const c=r;return sn(),un(c(178),Sn({key:c(204)+D.value["defines-USE_BLUR"]+D[c(157)][c(125)]+D[c(157)][c(196)],ref_key:c(161),ref:O},k[c(157)],{"texture-matrix":C.textureMatrix,mirror:en(p),"t-diffuse":null==(e=R.value)?void 0:e.texture,"t-depth":null==(o=R[c(157)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=A[c(157)])?void 0:i[c(129)],"has-blur":z[c(157)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Pe)}}});function Ce(n){function t(n){const e=Te;if(typeof n===e(159))return function(n){}[e(143)](e(108))[e(188)]("counter");1!==(""+n/n)[e(191)]||n%20==0?function(){return!0}[e(143)](e(139)+"gger")[e(200)](e(198)):function(){return!1}.constructor(e(139)+e(137)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Oe(n,t){const e=ke();return(Oe=function(n,t){return e[n-=132]})(n,t)}!function(n,t){const e=Oe,r=ke();for(;;)try{if(824002===parseInt(e(156))/1*(parseInt(e(171))/2)+parseInt(e(166))/3+-parseInt(e(149))/4*(parseInt(e(143))/5)+parseInt(e(147))/6*(parseInt(e(140))/7)+parseInt(e(163))/8*(-parseInt(e(172))/9)+-parseInt(e(134))/10*(-parseInt(e(161))/11)+parseInt(e(159))/12*(-parseInt(e(136))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(175)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=Oe,t=new RegExp(n(138)),e=new RegExp(n(154),"i"),r=je(n(158));t[n(139)](r+n(160))&&e[n(139)](r+n(141))?je():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(175)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(){const n=["19253smbgJk","table","function *\\( *\\)","test","2763299aWNIiG","input","info","5opJGMx","toString","debu","length","18xfyRSF","constructor","5493952fBRImk","background","console","log","type","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","82cQhArm","counter","init","8868whHzix","chain","15181441DieaPi","trace","624hLqmgV","error","fog","3184701qbEUfg","update","prototype","dispose","texture","20268suaPQY","134424CvXGjl","CubeCamera","gger","apply","value","exception","10wMmsnT","while (true) {}"];return(ke=function(){return n})()}function je(n){function t(n){const e=Oe;if("string"==typeof n)return function(n){}.constructor(e(135))[e(175)](e(157));1!==(""+n/n)[e(146)]||n%20==0?function(){return!0}[e(148)](e(145)+e(174)).call("action"):function(){return!1}[e(148)](e(145)+e(174))[e(175)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ue(n,t){const e=He();return(Ue=function(n,t){return e[n-=470]})(n,t)}Be(void 0,(function(){const n=Oe,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(151)]=t[n(151)]||{},r=[n(152),n(155),n(142),n(164),n(133),n(137),n(162)];for(let o=0;o<r[n(146)];o++){const t=Be[n(148)][n(168)].bind(Be),i=r[o],a=e[i]||t;t.__proto__=Be.bind(Be),t[n(144)]=a[n(144)].bind(a),e[i]=t}}))();const Ne=Ue;!function(n,t){const e=Ue,r=He();for(;;)try{if(264150===parseInt(e(495))/1*(-parseInt(e(477))/2)+parseInt(e(511))/3+-parseInt(e(502))/4+parseInt(e(510))/5+-parseInt(e(483))/6+parseInt(e(497))/7*(-parseInt(e(509))/8)+parseInt(e(500))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function He(){const n=["frames","trace","bind","input","default","1cMWBrp","near","147eyYCYT","gger","rgRef","10974303AtsDQH","length","1319660tCXyeX","exception","constructor","function *\\( *\\)","envMap","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","141856quKZBA","881955XZMbXS","546849KQVyCt","apply","object","warn","TresGroup","counter","visible","action","value","resolution","$slots","817402UKGIlO","return (function() ","info","index","chain","texture","1217418dVcuTU","table","while (true) {}","error","fog","test","debu"];return(He=function(){return n})()}!function(){Le(this,(function(){const n=Ue,t=new RegExp(n(505)),e=new RegExp(n(508),"i"),r=Ve("init");t.test(r+n(481))&&e[n(488)](r+n(493))?Ve():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ze(void 0,(function(){const n=Ue;let t;try{t=Function(n(478)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(507),n(514),n(479),n(486),n(503),n(484),n(491)];for(let i=0;i<r[n(501)];i++){const t=Ze[n(504)].prototype[n(492)](Ze),o=r[i],a=e[o]||t;t.__proto__=Ze[n(492)](Ze),t.toString=a.toString[n(492)](a),e[o]=t}}))();const Ge=[Ne(513)],We=rn({__name:Ne(480),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ne,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=Y(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return tn((()=>s),(n=>{var t;const e=Oe;null==(t=c.value)||t.dispose(),c[e(132)]=new v(n.value),c[e(132)][e(170)][e(153)]=h}),{immediate:!0}),tn([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(132)]=new(T[r(173)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;const t=Oe;null==(n=c.value)||n[t(169)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(132)].fog,d=a[t(132)].background,a[t(132)].background=r||d,a[t(132)][t(165)]=o||p,null==(n=f[t(132)])||n[t(167)](i.value,a[t(132)]),a[t(132)][t(165)]=p,a[t(132)][t(150)]=d}}}({resolution:o[r(475)],near:o[r(496)],far:o.far,envMap:o[r(506)],fog:o[r(487)]}),{onBeforeLoop:s}=q();let u=0;const l=J(null);return s((()=>{const n=r;l[n(474)]&&(o[n(490)]===1/0||u<o[n(490)])&&(l.value[n(472)]=!1,c(),l[n(474)][n(472)]=!0,u++)})),t({texture:null==(e=i[r(474)])?void 0:e[r(482)]}),(n,t)=>{const e=r;return sn(),un(e(470),null,[mn("primitive",{object:en(a)},null,8,Ge),mn(e(470),{ref_key:e(499),ref:l},[ln(n[e(476)],e(494))],512)])}}});function Ve(n){function t(n){const e=Ue;if("string"==typeof n)return function(n){}[e(504)](e(485))[e(512)](e(471));1!==(""+n/n)[e(501)]||n%20==0?function(){return!0}[e(504)](e(489)+e(498)).call(e(473)):function(){return!1}.constructor("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=qe,r=Ke();for(;;)try{if(386188===parseInt(e(401))/1*(parseInt(e(405))/2)+-parseInt(e(393))/3*(parseInt(e(408))/4)+-parseInt(e(387))/5+-parseInt(e(427))/6*(parseInt(e(396))/7)+-parseInt(e(397))/8*(-parseInt(e(392))/9)+-parseInt(e(386))/10*(-parseInt(e(389))/11)+parseInt(e(419))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qe(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$e(this,(function(){const n=qe,t=new RegExp(n(390)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Qe(n(424));t.test(r+"chain")&&e[n(403)](r+n(421))?Qe():r("0")}))()}();const Ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qe(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(){const n=["test","stateObject","49102NdOeBm","uniforms","warn","4bjffgr","table","clone","return (function() ","MathUtils","apply","prototype","value","defineProperty","toString","trace","562752eaMUYS","console","input","info","ShaderMaterial","init","debu","call","6LixPra","gger","5110230mrPTOJ","2211200cYKihL","reduce","11IKMAsM","function *\\( *\\)","UniformsUtils","3322692kYjirM","2103201qKFGpn","constructor","generateUUID","3695167ICiECZ","16faBIKH","entries","length","log","31GLOOEB","forEach"];return(Ke=function(){return n})()}function qe(n,t){const e=Ke();return(qe=function(n,t){return e[n-=385]})(n,t)}function Xe(n,t,e,r){const o=qe,i=class extends T[o(423)]{constructor(i={}){const a=o,s=Object[a(398)](n);super({uniforms:s[a(388)](((n,[t,e])=>{const r=a,o=T[r(391)][r(410)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(402)]((([n])=>Object[a(416)](this,n,{get:()=>this.uniforms[n][a(415)],set:t=>this[a(406)][n][a(415)]=t}))),Object.assign(this,i),r&&r(this)}};return i.key=T[o(412)][o(395)](),i}function Qe(n){function t(n){const e=qe;if("string"==typeof n)return function(n){}[e(394)]("while (true) {}")[e(413)]("counter");1!==(""+n/n)[e(399)]||n%20==0?function(){return!0}.constructor(e(425)+e(385))[e(426)]("action"):function(){return!1}[e(394)](e(425)+e(385))[e(413)](e(404)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ye(void 0,(function(){const n=qe;let t;try{t=Function(n(411)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(420)]=t[n(420)]||{},r=[n(400),n(407),n(422),"error","exception",n(409),n(418)];for(let i=0;i<r[n(399)];i++){const t=Ye.constructor[n(414)].bind(Ye),o=r[i],a=e[o]||t;t.__proto__=Ye.bind(Ye),t[n(417)]=a.toString.bind(a),e[o]=t}}))();var Je=sr;!function(n,t){for(var e=sr,r=cr();;)try{if(842260===-parseInt(e(358))/1+parseInt(e(252))/2*(parseInt(e(415))/3)+parseInt(e(410))/4+parseInt(e(326))/5+-parseInt(e(403))/6*(-parseInt(e(245))/7)+parseInt(e(378))/8*(-parseInt(e(296))/9)+parseInt(e(277))/10*(-parseInt(e(323))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[sr(392)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nr(this,(function(){var n=sr,t=new RegExp(n(313)),e=new RegExp(n(241),"i"),r=kr(n(269));t[n(258)](r+"chain")&&e.test(r+n(398))?kr():r("0")}))()}();var tr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[sr(392)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function er(n){var t=sr,e=function(n,t){var e=sr;if(typeof n!==e(257)||null===n)return n;var r=n[Symbol[e(291)]];if(void 0!==r){var o=r[e(377)](n,t||e(309));if(typeof o!==e(257))return o;throw new TypeError(e(304))}return(t===e(373)?String:Number)(n)}(n,t(373));return typeof e===t(382)?e:String(e)}function rr(n,t,e){var r=sr;return(t=er(t))in n?Object[r(334)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=sr,r=Object[e(303)](n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(242)]((function(t){return Object[e(260)](n,t).enumerable}))),r.push[e(392)](r,o)}return r}function ir(n){for(var t=sr,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(t){rr(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(294)](n,Object[t(259)](r)):or(Object(r)).forEach((function(e){var o=t;Object.defineProperty(n,e,Object[o(260)](r,e))}))}return n}function ar(n,t){var e=sr;if(null==n)return{};var r,o,i=function(n,t){var e=sr;if(null==n)return{};var r,o,i={},a=Object[e(303)](n);for(o=0;o<a[e(400)];o++)r=a[o],t[e(268)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(368)](n);for(o=0;o<a[e(400)];o++)r=a[o],t[e(268)](r)>=0||Object[e(391)][e(248)].call(n,r)&&(i[r]=n[r])}return i}function cr(){var n=["positionRaw","action","toUpperCase","clearcoatNormal","csm_Clearcoat","next","table","590480MVndRG","return","setPrototypeOf","error",". Shader cannot compile.","csm_Position","pointSize","Object","csm_Bump",'{}.constructor("return this")( )',"getOwnPropertySymbols","csm_DiffuseColor","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","metalness","patchMap","string",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","type","#define IS_UNKNOWN;\n","call","2183672bdtZMQ","silent","MathUtils","emissive","symbol","normal","message","MeshBasicMaterial"," is not available in ",", 1.0 );\n  ","sham","Derived constructors may only return object or undefined","concat","prototype","apply","void main()","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","getPrototypeOf","debu","csm_ClearcoatNormal","input","\n    vec3 totalEmissiveRadiance = ","length","clone","depthAlpha","6wXJQBV","_getMaterialDefine","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","_generateMaterial","vertexShader","MeshDepthMaterial","2069704dEoYbQ","csm_AO","set","value","trim","507KBZBsK","lights_physical_fragment","Map","lastIndexOf","valueOf","void ","construct","bump","position","join","_patchShader","MeshToonMaterial",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","this hasn't been initialised - super() hasn't been called","material.clearcoat = ","constructor","\n    \n            ","csm_main_",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","from","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","filter","clearcoat","void main() {","4669462SYUcVX","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","_getCacheHash","propertyIsEnumerable","@@iterator","\n    #include <dithering_fragment>\n    gl_FragColor  = ",";\n  ","2846sIjSgJ","MeshPhongMaterial","MeshMatcapMaterial","isAlreadyExtended","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","object","test","getOwnPropertyDescriptors","getOwnPropertyDescriptor","uniforms","entries","csm_PositionRaw","writable","counter","return (function() ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","indexOf","init","iterator","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","name","undefined","\n    vec3 transformed = ","\n    \n","773110BIvoRU"," - (dot(","csm_ClearcoatRoughness","();\n            // #_CSM_#\n          ","includes","clearcoatRoughness","ShaderChunk","gger","Set","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","MeshPhysicalMaterial","cacheHash","assign","toPrimitive","find","isArray","defineProperties","toString","27jXAjhZ","generateUUID","onBeforeCompile","done","customProgramCacheKey","\n    vec4 csm_internal_positionUnprojected = ","ShadowMaterial","keys","@@toPrimitive must return a primitive value.","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","create","fragmentShader","\n            ","default","PointsMaterial","warn","\n    varying mat4 csm_internal_vModelViewMatrix;\n","function *\\( *\\)","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","Cannot call a class as a function","();\n              // #_CSM_#\n          ","slice","csm_Normal","\n    #include <color_fragment>\n    diffuseColor = ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","diffuse","forEach","44ZRJyZg","replace","fragColor","5679410NGkryl","bind","\n    vec3 objectNormal = ","\n            \n            void main() {\n          ","substring","__proto__","roughness","__csm","defineProperty",'". Shader cannot compile.',"// #_CSM_#","function","MeshLambertMaterial","MeshStandardMaterial","CustomShaderMaterial does not support RawShaderMaterial","enumerable","_getPatchMapForMaterial","key","RawShaderMaterial","baseMaterial","Super expression must either be null or a function","material.clearcoatRoughness = ",";\n    ","info","csm_DepthAlpha"];return(cr=function(){return n})()}function sr(n,t){var e=cr();return(sr=function(n,t){return e[n-=230]})(n,t)}function ur(n,t){var e=sr;(null==t||t>n[e(400)])&&(t=n[e(400)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function lr(n,t){return function(n){if(Array[sr(293)](n))return n}(n)||function(n,t){var e=sr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(270)]]||n[e(249)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(356)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(377)](r))[e(299)])&&(s.push(o[e(413)]),s[e(400)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(359)]&&(c=r[e(359)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=sr;if(n){if("string"==typeof n)return ur(n,t);var r=Object[e(391)][e(295)][e(377)](n)[e(317)](8,-1);return r===e(365)&&n[e(236)]&&(r=n.constructor[e(273)]),r===e(417)||r===e(285)?Array[e(240)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ur(n,t):void 0}}(n,t)||function(){throw new TypeError(sr(405))}()}function fr(n,t){for(var e=sr,r=0;r<t[e(400)];r++){var o=t[r];o[e(341)]=o[e(341)]||!1,o.configurable=!0,e(413)in o&&(o[e(264)]=!0),Object.defineProperty(n,er(o[e(343)]),o)}}function pr(n){if(void 0===n)throw new ReferenceError(sr(234));return n}function dr(n,t){var e=sr;return(dr=Object.setPrototypeOf?Object[e(360)][e(327)]():function(n,t){return n[e(331)]=t,n})(n,t)}function hr(n){var t=sr;return(hr=Object[t(360)]?Object[t(395)][t(327)]():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function vr(n){var t=function(){var n=sr;if(typeof Reflect===n(274)||!Reflect[n(421)])return!1;if(Reflect.construct[n(388)])return!1;if(typeof Proxy===n(337))return!0;try{return Boolean.prototype[n(419)][n(377)](Reflect[n(421)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=sr,o=hr(n);if(t){var i=hr(this)[r(236)];e=Reflect[r(421)](o,arguments,i)}else e=o[r(392)](this,arguments);return function(n,t){var e=sr;if(t&&(typeof t===e(257)||typeof t===e(337)))return t;if(void 0!==t)throw new TypeError(e(389));return pr(n)}(this,e)}}tr(void 0,(function(){var n,t=sr;try{n=Function(t(266)+t(367)+");")()}catch(s){n=window}for(var e=n.console=n.console||{},r=["log",t(311),t(349),t(361),"exception",t(357),"trace"],o=0;o<r.length;o++){var i=tr[t(236)][t(391)][t(327)](tr),a=r[o],c=e[a]||i;i[t(331)]=tr.bind(tr),i[t(295)]=c[t(295)][t(327)](c),e[a]=i}}))();var mr,gr,_r,yr={diffuse:Je(369),normal:Je(318),roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:Je(411),bump:Je(366),clearcoat:Je(355),clearcoatRoughness:Je(279),clearcoatNormal:Je(397),pointSize:"csm_PointSize",fragColor:"csm_FragColor",depthAlpha:Je(350),position:Je(363),positionRaw:Je(263)},xr=(rr(mr={},""[Je(390)](yr[Je(423)]),"*"),rr(mr,""[Je(390)](yr[Je(351)]),"*"),rr(mr,""[Je(390)](yr[Je(383)]),"*"),rr(mr,"".concat(yr[Je(364)]),[Je(310)]),rr(mr,""[Je(390)](yr[Je(321)]),"*"),rr(mr,""[Je(390)](yr.fragColor),"*"),rr(mr,""[Je(390)](yr[Je(381)]),[Je(339),Je(288)]),rr(mr,""[Je(390)](yr[Je(332)]),[Je(339),Je(288)]),rr(mr,"".concat(yr[Je(371)]),[Je(339),Je(288)]),rr(mr,""[Je(390)](yr.ao),[Je(339),Je(288),Je(385),Je(338),Je(253),Je(232)]),rr(mr,""[Je(390)](yr[Je(422)]),[Je(338),Je(254),"MeshNormalMaterial",Je(253),Je(288),Je(339),"MeshToonMaterial",Je(302)]),rr(mr,""[Je(390)](yr.depthAlpha),[Je(409)]),rr(mr,"".concat(yr.clearcoat),[Je(288)]),rr(mr,""[Je(390)](yr[Je(282)]),[Je(288)]),rr(mr,""[Je(390)](yr[Je(354)]),[Je(288)]),mr),br={"#include <lights_physical_fragment>":T[Je(283)][Je(416)]},Ir=(rr(gr={},""[Je(390)](yr[Je(383)]),{"#include <beginnormal_vertex>":Je(328)[Je(390)](yr[Je(383)],Je(239))}),rr(gr,""[Je(390)](yr.position),{"#include <begin_vertex>":Je(275)[Je(390)](yr[Je(423)],Je(251))}),rr(gr,""[Je(390)](yr[Je(351)]),{"#include <begin_vertex>":Je(301)[Je(390)](yr[Je(351)],Je(374))}),rr(gr,"".concat(yr[Je(364)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Je(390)](yr[Je(364)],Je(348))}),rr(gr,""[Je(390)](yr[Je(321)]),{"#include <color_fragment>":Je(319)[Je(390)](yr.diffuse,Je(251))}),rr(gr,""[Je(390)](yr[Je(325)]),{"#include <dithering_fragment>":Je(250)[Je(390)](yr[Je(325)],Je(251))}),rr(gr,""[Je(390)](yr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Je(399)[Je(390)](yr[Je(381)],Je(348))}),rr(gr,"".concat(yr[Je(332)]),{"#include <roughnessmap_fragment>":Je(314)[Je(390)](yr.roughness,Je(348))}),rr(gr,"".concat(yr[Je(371)]),{"#include <metalnessmap_fragment>":Je(286)[Je(390)](yr[Je(371)],";\n    ")}),rr(gr,""[Je(390)](yr.ao),{"#include <aomap_fragment>":Je(256)[Je(390)](yr.ao,Je(348))}),rr(gr,"".concat(yr[Je(422)]),{"#include <normal_fragment_maps>":Je(272).concat(yr.bump,Je(278))[Je(390)](yr[Je(422)],Je(233))}),rr(gr,""[Je(390)](yr[Je(402)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[Je(390)](yr[Je(402)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Je(394)[Je(390)](yr[Je(402)],Je(348))}),rr(gr,"".concat(yr[Je(243)]),{"material.clearcoat = clearcoat;":Je(235).concat(yr[Je(243)],";")}),rr(gr,""[Je(390)](yr[Je(282)]),{"material.clearcoatRoughness = clearcoatRoughness;":Je(347)[Je(390)](yr[Je(282)],";")}),rr(gr,""[Je(390)](yr[Je(354)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),gr),wr=(rr(_r={},""[Je(390)](yr[Je(423)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(320)[Je(390)](yr[Je(423)],Je(387))}),rr(_r,""[Je(390)](yr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Je(390)](yr[Je(423)],Je(251))}),rr(_r,""[Je(390)](yr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(yr[Je(321)],Je(251))}),rr(_r,""[Je(390)](yr[Je(325)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(yr[Je(325)],Je(251))}),_r),Sr={clearcoat:[yr.clearcoat,yr.clearcoatNormal,yr.clearcoatRoughness]},Mr=Je(406),Rr=Je(271),Er=Je(312),Ar=Je(246),Tr=Je(312),Dr=Je(276),Pr=[Je(345),Je(307),Je(408),"uniforms",Je(372),"cacheKey","silent"],zr=function(n,t,e){var r=Je;return n.split(t)[r(230)](e)},Cr=function(n,t){var e,r=Je;return new RegExp("\\b"[r(390)]((e=t,e[Je(324)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(258)](n)};function Or(n){return n?n.replace(/\s/g,""):void 0}function Fr(n){return n[Je(324)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Br=function(n){var t=Je;!function(n,t){var e=sr;if(typeof t!==e(337)&&null!==t)throw new TypeError(e(346));n[e(391)]=Object[e(306)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(334)](n,e(391),{writable:!1}),t&&dr(n,t)}(c,V);var e,r,o,i,a=vr(c);function c(n){var t,e,r,o,i,s=sr,u=n.baseMaterial,l=n[s(307)],f=n[s(408)],p=n[s(261)],d=n[s(372)],h=n.cacheKey,v=n[s(379)],m=ar(n,Pr);if(function(n,t){if(!(n instanceof t))throw new TypeError(sr(315))}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e[t(384)][t(268)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e.type===s(344))throw new Error(s(340));(function(n,t){var e=Je;Object.assign(n,t);var r=Object[e(395)](t);Object[e(262)](Object.getOwnPropertyDescriptors(r)).filter((function(n){var t=e,r="function"==typeof n[1].get,o=typeof n[1][t(412)]===t(337),i=typeof n[1][t(413)]===t(337),a=n[0]===t(236);return(r||o||i)&&!a}))[e(322)]((function(t){var r=e;typeof n[t[0]]!==r(337)&&Object[r(334)](n,t[0],t[1])}))})(pr(t=a[s(377)](this)),e),t[s(333)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(380)][s(297)](),type:e.type,isAlreadyExtended:(r=e[s(298)],o=Je,i=r[o(295)]()[o(414)](),!(0===i.substring(i.indexOf("{")+1,i[o(418)]("}"))[o(414)]()[o(400)])),cacheHash:"",silent:v},t[s(261)]=ir(ir({},t.uniforms||{}),p||{});var g=t[s(333)],_=g.fragmentShader,y=g[s(408)],x=t[s(261)];return t[s(333)][s(289)]=t[s(247)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=sr,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(261)]=t[n(261)]||this[n(261)],Object[n(290)](this[n(333)],t);var e=this[n(333)],r=e[n(307)],o=e[n(408)],i=this[n(261)],a=this[n(247)]();this.__csm.cacheHash=a,this[n(407)](r,o,i)}},{key:t(401),value:function(){var n=t,e={baseMaterial:this[n(333)][n(345)],fragmentShader:this[n(333)].fragmentShader,vertexShader:this[n(333)][n(408)],uniforms:this[n(261)],silent:this[n(333)][n(379)],patchMap:this[n(333)][n(372)],cacheKey:this[n(333)].cacheKey},r=new(this[n(236)])(e);return Object[n(290)](this,r),r}},{key:t(247),value:function(){var n=t,e=this[n(333)],r=e[n(307)],o=e[n(408)],i=this[n(261)],a=[Or(r),Or(o),i][n(242)]((function(n){return void 0!==n}));return a[n(400)]>0?An(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(407),value:function(n,e,r){var o=t,i=this;this[o(261)]=r||{},this[o(300)]=function(){var n=o;return i[n(333)][n(289)]};var a=function(t){var r=o;try{var a=i[r(404)]();if(n){var c=i._patchShader(Fr(n),t[r(307)],!0);t[r(307)]=a+c}if(e){var s=i[r(231)](Fr(e),t[r(408)]);t[r(408)]="#define IS_VERTEX;\n"+s,t[r(408)]=a+t.vertexShader}t[r(261)]=ir(ir({},t[r(261)]),i[r(261)]),i.uniforms=t[r(261)]}catch(u){console.error(u)}};if(this[o(333)].isAlreadyExtended){var c=this[o(298)];this[o(298)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this.needsUpdate=!0}},{key:t(231),value:function(n,e,r){var o=t,i=this,a=e,c=ir(ir({},this[o(342)]()),this[o(333)].patchMap);Object[o(262)](Sr)[o(322)]((function(t){var e=o,r=lr(t,2),a=r[0],c=r[1][e(292)]((function(t){return Cr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(390)](a,'" is required to use output "')[e(390)](c,e(335)))})),Object[o(262)](br)[o(322)]((function(n){var t=lr(n,2),e=t[0],r=t[1];a=zr(a,e,r)})),Object[o(303)](c)[o(322)]((function(t){var e=o;Object[e(303)](c[t])[e(322)]((function(r){var o=e,s=xr[t],u=i[o(333)][o(375)];if("*"===t||Cr(n,t)){if(!(!s||Array[o(293)](s)&&s[o(281)](u)||"*"===s))throw new Error("CSM: "[o(390)](t,o(386)).concat(u,o(362)));a=zr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(238)+this[o(333)].instanceID[o(324)](/-/g,"_"),h=n[o(324)](/void\s+main\s*\(\s*\)/g,o(420)[o(390)](d,"()")),v=n[o(281)](o(393)),m=a[o(281)]("// #_CSM_#");return v&&(m&&this[o(333)][o(255)]?(a=a[o(324)](o(244),"\n            ".concat(h,o(329))),s=a,u=o(336),l=o(308)[o(390)](d,o(280)),f=Je,p=s.lastIndexOf(u),a=-1===p?s:s[f(330)](0,p)+l+s[f(330)](p+u.length)):a=a[o(324)](o(244),o(305)[o(390)](r?Tr:Er,o(370)).concat(Mr,o(237))[o(390)](h,o(267))[o(390)](Rr,o(287))[o(390)](r?Dr:Ar,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(390)](d,o(316)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(333)][n(375)];return e?"#define IS_"[n(390)](e[n(353)](),";\n"):n(376)}},{key:"_getPatchMapForMaterial",value:function(){return"ShaderMaterial"===this[t(333)].type?wr:Ir}}],i=sr,r&&fr(e.prototype,r),o&&fr(e,o),Object[i(334)](e,i(391),{writable:!1}),c}();function kr(n){function t(n){var e=sr;if("string"==typeof n)return function(n){}[e(236)]("while (true) {}")[e(392)](e(265));1!==(""+n/n)[e(400)]||n%20==0?function(){return!0}[e(236)](e(396)+e(284)).call(e(352)):function(){return!1}[e(236)](e(396)+e(284))[e(392)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const jr=Hr;!function(n,t){const e=Hr,r=Nr();for(;;)try{if(564263===-parseInt(e(277))/1*(-parseInt(e(299))/2)+-parseInt(e(272))/3*(parseInt(e(283))/4)+-parseInt(e(297))/5*(parseInt(e(306))/6)+-parseInt(e(264))/7*(-parseInt(e(268))/8)+parseInt(e(307))/9+parseInt(e(298))/10+-parseInt(e(295))/11*(parseInt(e(303))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ur=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hr(284)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(){const n=["90jivpKh","string","#ff00fc","constructor","164664OddEuV","color","init","140358JjRFBy","4969359uSDfyA","log","clearcoat","warn","2030UobIqH","function *\\( *\\)","bind","return (function() ","10104tTwyMh","test","stateObject","exception","66wILsaL","clearcoatRoughness","length","console","chain","6865XBSCWw","debu","roughness","table","index","prototype","144108TCKwWM","apply","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","error","toString","object","counter","metalness","action","gger","\n      ","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","231olGfHU","__proto__","25jxroJT","5346380KRfCxx"];return(Nr=function(){return n})()}!function(){Ur(this,(function(){const n=Hr,t=new RegExp(n(265)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wr(n(305));t[n(269)](r+n(276))&&e.test(r+"input")?Wr():r("0")}))()}();const Lr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hr(284)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(n,t){const e=Nr();return(Hr=function(n,t){return e[n-=261]})(n,t)}Lr(void 0,(function(){const n=Hr;let t;try{t=Function(n(267)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(275)]=t[n(275)]||{},r=[n(261),n(263),"info",n(286),n(271),n(280),"trace"];for(let i=0;i<r[n(274)];i++){const t=Lr.constructor[n(282)][n(266)](Lr),o=r[i],a=e[o]||t;t[n(296)]=Lr[n(266)](Lr),t[n(287)]=a.toString[n(266)](a),e[o]=t}}))();const Zr=[jr(288)],Gr=rn({__name:jr(281),props:{color:{default:jr(301)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=jr,e=n,r={baseMaterial:$,metalness:e[t(290)],roughness:e.roughness,clearcoat:e[t(262)],clearcoatRoughness:e.clearcoatRoughness,color:e[t(304)],vertexShader:t(294),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(293)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(285)},o=new Br(r);return dn((()=>{const n=t;o[n(304)].setStyle(e[n(304)]),o.metalness=e[n(290)],o[n(279)]=e[n(279)],o[n(262)]=e.clearcoat,o.clearcoatRoughness=e[n(273)]})),(n,t)=>(sn(),un("primitive",{object:en(o)},null,8,Zr))}});function Wr(n){function t(n){const e=Hr;if(typeof n===e(300))return function(n){}[e(302)]("while (true) {}")[e(284)](e(289));1!==(""+n/n)[e(274)]||n%20==0?function(){return!0}.constructor(e(278)+e(292)).call(e(291)):function(){return!1}[e(302)](e(278)+e(292))[e(284)](e(270)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Kr,r=Yr();;)try{if(339572===parseInt(e(361))/1+-parseInt(e(372))/2*(-parseInt(e(376))/3)+-parseInt(e(390))/4*(parseInt(e(360))/5)+parseInt(e(377))/6+parseInt(e(384))/7*(-parseInt(e(365))/8)+parseInt(e(366))/9+-parseInt(e(375))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Vr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vr(this,(function(){var n=Kr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(387),"i"),r=qr("init");t[n(370)](r+n(371))&&e[n(370)](r+n(381))?qr():r("0")}))()}();var $r=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Kr(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yr(){var n=["error","call","855512iErBZd","string","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","gger","4canvOw","constructor","warn","return (function() ","583595aAKNJi","620881fndIJP","stateObject","trace","action","40UQaNgx","3727062dssBmH","prototype","log","info","test","chain","2dJcNSv","length","__proto__","4072380GQHABA","595659ZjyqeW","1446342rtLghD","console","toString","bind","input"];return(Yr=function(){return n})()}function Kr(n,t){var e=Yr();return(Kr=function(n,t){return e[n-=358]})(n,t)}function qr(n){function t(n){var e=Kr;if(typeof n===e(385))return function(n){}[e(391)](e(386)).apply("counter");1!==(""+n/n)[e(373)]||n%20==0?function(){return!0}[e(391)]("debu"+e(389))[e(383)](e(364)):function(){return!1}[e(391)]("debu"+e(389))[e(388)](e(362)),t(++n)}try{if(n)return t;t(0)}catch(e){}}$r(void 0,(function(){for(var n=Kr,t=function(){var n,t=Kr;try{n=Function(t(359)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(378)]=t[n(378)]||{},r=[n(368),n(358),n(369),n(382),"exception","table",n(363)],o=0;o<r[n(373)];o++){var i=$r[n(391)][n(367)][n(380)]($r),a=r[o],c=e[a]||i;i[n(374)]=$r[n(380)]($r),i[n(379)]=c[n(379)][n(380)](c),e[a]=i}}))();export{Xe as C,Gr as _,et as a,dt as b,Et as c,Ot as d,Ht as e,ee as f,We as g,ze as h,yt as u};

import{P as t}from"./tweakpane.yHWGBmom1720750938663.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.JP4MOAqv1720750938663.js";import{_ as r}from"./heatmap.js-fix.5i0rkKwY1720750938663.js";import{h as i,a5 as s,bU as c,M as u,k as a}from"./three.c_4mN3mZ1720750938663.js";import{r as p}from"./utils.w2KUWsKA1720750938663.js";import{d as f}from"./pinia.1mscjV6X1720750938663.js";import{b as l,d as h,a2 as m,o as d,D as g,J as v,u as y,F as w,q as b,U as I,N as _,P as j,H as x,L as k,a3 as S,r as D,j as R,g as z,m as E}from"./@vue.ApkyOKE71720750938663.js";import{c as M,d as A,a as B}from"./three-mesh-bvh.q2XDEzjn1720750938663.js";import{_ as O}from"./@fesjs.hPzU4o281720750938663.js";import"./@tresjs.toBU36DO1720750938663.js";import"./@vueuse.NiHn2U_k1720750938663.js";import"./three-custom-shader-material.vDIhSa4e1720750938663.js";import"./object-hash.uK40h2Gd1720750938663.js";import"./@amap.aVWyhucH1720750938663.js";import"./jszip.U0Bj1EHt1720750938663.js";import"./glsl-tokenizer.bTdSVbty1720750938663.js";import"./glsl-token-string.Geqk9Ccy1720750938663.js";import"./glsl-token-functions.EGRZ6BGB1720750938663.js";import"./vue-router.cSmWJIl41720750938663.js";import"./lodash-es.nFpJXAf-1720750938663.js";import"./@qlin.yHhFDldE1720750938663.js";import"./@floating-ui.BPbuo5Gx1720750938663.js";import"./@juggle.7yjBMqoW1720750938663.js";!function(t,n){const e=Z,o=H();for(;;)try{if(272502===parseInt(e(373))/1*(parseInt(e(325))/2)+parseInt(e(370))/3+parseInt(e(336))/4+-parseInt(e(324))/5+parseInt(e(351))/6*(parseInt(e(352))/7)+-parseInt(e(344))/8+parseInt(e(343))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(341)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=Z,n=new RegExp(t(375)),e=new RegExp(t(364),"i"),o=$("init");n[t(368)](o+t(326))&&e[t(368)](o+t(369))?$():o("0")}))()}();const T=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(341)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();T(void 0,(function(){const t=Z;let n;try{n=Function(t(361)+t(334)+");")()}catch(r){n=window}const e=n[t(374)]=n[t(374)]||{},o=[t(350),"warn","info",t(345),t(362),t(335),t(355)];for(let i=0;i<o.length;i++){const n=T[t(329)].prototype[t(339)](T),r=o[i],s=e[r]||n;n[t(371)]=T[t(339)](T),n[t(340)]=s[t(340)][t(339)](s),e[r]=n}}))();const U=(t,n)=>t[Z(342)](n)+-10;function Z(t,n){const e=H();return(Z=function(t,n){return e[t-=324]})(t,n)}function H(){const t=["constructor","rgb(0,255,0)","appendChild","createElement","_config",'{}.constructor("return this")( )',"table","1603620wzASOl","top","push","bind","toString","apply","getValueAt","412137IvVgtq","3041384KLkNcm","error","while (true) {}","width","length","string","log","755016EXaODH","7zvTZHU","yellow","gger","trace","action","setData","create","body","left","return (function() ","exception","randInt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","height","rgb(0,0,255)","rgb(255,0,0)","test","input","1111149fQtxQs","__proto__","stateObject","1cjpSxN","console","function *\\( *\\)","debu","style","1829715CNQxZb","151402wPYmhq","chain","absolute","none"];return(H=function(){return t})()}function $(t){function n(t){const e=Z;if(typeof t===e(349))return function(t){}[e(329)](e(346))[e(341)]("counter");1!==(""+t/t)[e(348)]||t%20==0?function(){return!0}.constructor(e(376)+e(354)).call(e(356)):function(){return!1}[e(329)](e(376)+e(354)).apply(e(372)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const F=X;function G(){const t=["7149715iFoBab","return (function() ","console","error","log","warn","3782800UcNprZ","44583012xfJbzL","prototype","info",'{}.constructor("return this")( )',"call","toString","1052384oYrCTs","test","chain","stateObject","debu","value","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1268478sDrHDo","while (true) {}","buildingsHeatmap","2388xGXTBm","length","2007114kHJpfu","function *\\( *\\)","exception","table","action","32158RMXflI","input","gger","bind","8ATgssN","apply","string","constructor"];return(G=function(){return t})()}!function(t,n){const e=X,o=G();for(;;)try{if(964583===parseInt(e(362))/1+parseInt(e(393))/2+parseInt(e(367))/3*(parseInt(e(376))/4)+parseInt(e(380))/5+parseInt(e(365))/6*(parseInt(e(372))/7)+-parseInt(e(386))/8+-parseInt(e(387))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[X(377)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){L(this,(function(){const t=X,n=new RegExp(t(368)),e=new RegExp(t(361),"i"),o=Y("init");n[t(355)](o+t(356))&&e[t(355)](o+t(373))?Y():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[X(377)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function X(t,n){const e=G();return(X=function(t,n){return e[t-=355]})(t,n)}Q(void 0,(function(){const t=X;let n;try{n=Function(t(381)+t(390)+");")()}catch(r){n=window}const e=n[t(382)]=n[t(382)]||{},o=[t(384),t(385),t(389),t(383),t(369),t(370),"trace"];for(let i=0;i<o[t(366)];i++){const n=Q[t(379)][t(388)][t(375)](Q),r=o[i],s=e[r]||n;n.__proto__=Q[t(375)](Q),n[t(392)]=s.toString[t(375)](s),e[r]=n}}))();const N=f(F(364),(()=>{const t=l(!1),n=l(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[X(359)]=n},setTemperature:function(t){n[X(359)]=t}}}));function Y(t){function n(t){const e=X;if(typeof t===e(378))return function(t){}[e(379)](e(363)).apply(e(360));1!==(""+t/t)[e(366)]||t%20==0?function(){return!0}[e(379)](e(358)+e(374))[e(391)](e(371)):function(){return!1}[e(379)](e(358)+e(374))[e(377)](e(357)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const q=V;!function(t,n){const e=V,o=C();for(;;)try{if(636970===-parseInt(e(435))/1*(-parseInt(e(420))/2)+parseInt(e(418))/3*(parseInt(e(464))/4)+parseInt(e(466))/5+parseInt(e(427))/6*(-parseInt(e(470))/7)+parseInt(e(440))/8*(parseInt(e(472))/9)+-parseInt(e(450))/10+parseInt(e(484))/11*(-parseInt(e(431))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(451)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){J(this,(function(){const t=V,n=new RegExp(t(486)),e=new RegExp(t(429),"i"),o=et("init");n[t(419)](o+t(443))&&e.test(o+t(437))?et():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(451)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function C(){const t=["360eUqWSm","Mesh","attributes","uniforms","412014AvYPlp","model","input","computeBoundsTree","matrix","145736ivEDIu","console","trace","chain","debu","stateObject","constructor","opacity",'{}.constructor("return this")( )',"info","6741540oOGlPL","apply","warn","length","value","normal","geometry","BufferGeometry","rotation-x","bind","toString","DoubleSide","height","_renderer","8paDPMF","return (function() ","5724730saupWy","applyMatrix4","setTemperature","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","8183182BlGpHy","action","612YatQBu","primitive","land","disposeBoundsTree","_config","clone","object","city","__proto__","prototype","table","makeRotationX","518738vnyjVv","while (true) {}","function *\\( *\\)","1648761QzXyIB","test","2uReoKD","Texture","mergeGeometries","数值：","setShowDiv","call","children","6QEbSXW","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger"];return(C=function(){return t})()}function V(t,n){const e=C();return(V=function(t,n){return e[t-=418]})(t,n)}W(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function(t(465)+t(448)+");")()}catch(e){n=window}return n}(),e=n[t(441)]=n[t(441)]||{},o=["log",t(452),t(449),"error","exception",t(482),t(442)];for(let r=0;r<o[t(453)];r++){const n=W[t(446)][t(481)][t(459)](W),i=o[r],s=e[i]||n;n[t(480)]=W.bind(W),n[t(460)]=s.toString.bind(s),e[i]=n}}))();const K=[q(478),q(458)],tt=[q(478)],nt=h({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=q;(()=>{const t=V;s[t(457)][t(481)][t(438)]=M,s[t(457)].prototype[t(475)]=A,s[t(432)][t(481)].raycast=B})();const e=t,o=((t=250,n=250,e=!0)=>{const o=Z,i=document[o(332)]("heatmap-canvas");return i[o(377)].position=o(327),!e&&(i.style.display=o(328)),i.style[o(337)]="0",i[o(377)][o(360)]="0",document[o(359)][o(331)](i),r[o(358)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(366),.55:o(330),.85:o(353),1:o(367)}})})();((t,n)=>{const e=Z;if(!n){let o=0;for(n=[];o<1e3;)n[e(338)]({x:i[e(363)](1,t[e(333)][e(347)]),y:i[e(363)](1,t[e(333)][e(365)]),value:i[e(363)](-10,36)}),o++}t[e(357)]({max:36,min:-10,data:n})})(o);const f=new(s[n(421)])(o[n(463)].canvas);f.needsUpdate=!0;const l=e[n(436)][n(479)][n(477)]();delete l[n(456)][n(433)].normal,delete l[n(456)].attributes.uv;const h=l[n(456)].clone()[n(467)](l[n(439)]),b=e[n(436)][n(474)][n(477)]();delete b.geometry[n(433)][n(455)];const I=b[n(456)][n(477)]()[n(467)](b[n(439)]),_=c[n(422)]([h,I]);_[n(467)]((new u)[n(483)](Math.PI/2)),p(_),_[n(438)]();const j=(t=>{const o=n;return new a({vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t",fragmentShader:o(469),uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:s[o(461)]})})(f),x=new(s[n(432)])(_,j);m((()=>{const t=n;e.opacity&&(j[t(434)].uOpacity[t(454)]=e[t(447)])}));const k=N(),S=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(476)].width,y:(1-t.uv.y)*o[e(476)][e(462)]};console.log(e(423),t),console.log("数值———：",U(o,n)),k[e(468)](U(o,n))}},D=t=>{t&&k.$patch({showDiv:!0})},R=t=>{t&&k[n(424)](!1)};return(t,o)=>{const r=n;return d(),g(w,null,[v("primitive",{object:y(x),"rotation-x":-Math.PI/2,onPointerMove:S,onPointerEnter:D,onPointerLeave:R},null,40,K),v(r(473),{object:e[r(436)][r(436)][r(426)][0][r(477)]()},null,8,tt)],64)}}});function et(t){function n(t){const e=V;if(typeof t===e(428))return function(t){}.constructor(e(485))[e(451)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(446)](e(444)+e(430))[e(425)](e(471)):function(){return!1}[e(446)](e(444)+e(430))[e(451)](e(445)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const ot=O({__name:"dataDiv",setup(t){const n=N(),e=l({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return b((()=>{window.addEventListener("mousemove",o)})),I((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>_((d(),g("div",{class:"title",style:k(e.value)},"温度："+x(y(n).temperature)+"℃ ",5)),[[j,y(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),rt=it;function it(t,n){const e=ut();return(it=function(t,n){return e[t-=383]})(t,n)}!function(t,n){const e=it,o=ut();for(;;)try{if(825313===parseInt(e(411))/1*(-parseInt(e(384))/2)+parseInt(e(408))/3+parseInt(e(393))/4*(parseInt(e(400))/5)+-parseInt(e(397))/6+-parseInt(e(387))/7+parseInt(e(407))/8*(parseInt(e(399))/9)+-parseInt(e(403))/10*(parseInt(e(409))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(406)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=it,n=new RegExp(t(424)),e=new RegExp(t(404),"i"),o=pt(t(413));n[t(423)](o+"chain")&&e[t(423)](o+t(414))?pt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(406)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(){const t=["bind","透明度","401406GkHRev","toString","1370907BRjgif","50fGkFcg","opacity","length","10jzKkHu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"apply","56BMkQiQ","1738482YrcXtw","2471689swIYnN","#000","844xUdzlJ","constructor","init","input","city","gger","error","model","table","__proto__","counter","debu","test","function *\\( *\\)","trace","152fRRHTQ","builds","value","3684646AhRLkG","heatmap2","while (true) {}","console","log","warn","24672BgvOLG","return (function() "];return(ut=function(){return t})()}ct(void 0,(function(){const t=it,n=function(){const t=it;let n;try{n=Function(t(394)+t(405)+");")()}catch(e){n=window}return n}(),e=n[t(390)]=n.console||{},o=[t(391),t(392),"info",t(417),"exception",t(419),t(383)];for(let r=0;r<o.length;r++){const n=ct[t(412)].prototype[t(395)](ct),i=o[r],s=e[i]||n;n[t(420)]=ct.bind(ct),n.toString=s[t(398)][t(395)](s),e[i]=n}}))();const at=h({__name:rt(388),async setup(r){const i=rt;let s,c;const u=l(!1),a=([s,c]=S((()=>o())),s=await s,c(),s);u[i(386)]=!0;const p=D({width:1,color:i(410),opacity:1,show:!0}),f=D({opacity:.9});return new t({title:"参数",expanded:!0}).addBinding(f,i(401),{label:i(396),min:0,max:1,step:.1}),(t,o)=>{const r=i;return d(),g(w,null,[R(e,{showBuildings:!1,autoRotate:!1},{ability:z((()=>[R(nt,E({model:y(a)},f),null,16,[r(418)]),R(n,E(p,{builds:y(a)[r(415)]}),null,16,[r(385)])])),_:1}),R(ot)],64)}}});function pt(t){function n(t){const e=it;if("string"==typeof t)return function(t){}[e(412)](e(389))[e(406)](e(421));1!==(""+t/t)[e(402)]||t%20==0?function(){return!0}[e(412)](e(422)+"gger").call("action"):function(){return!1}.constructor(e(422)+e(416))[e(406)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{at as default};

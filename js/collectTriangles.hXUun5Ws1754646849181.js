import{m as t,e,D as n,a as o,t as r}from"./@tresjs.EkZ_QTfE1754646849181.js";import"./index.DuRViGas1754646849181.js";import{T as s,au as i,c as a,bg as c,a as u,M as W,S as l,V as d,B as f,l as p,cm as m}from"./three.BWo_6did1754646849181.js";import{P as h}from"./tweakpane.C0HtAJSg1754646849181.js";import{I as g,C as x,N as k,c as v,d as S,a as b}from"./three-mesh-bvh.CqL5lyhn1754646849181.js";import{d as y,aa as _,b as w,a2 as C,G as j,o as q,F as G,I as P,u as R,r as O,h as T,j as Z,f as Q,e as A,m as L,a5 as B}from"./@vue.BzMISRrV1754646849181.js";import{_ as H}from"./randomLoading.vue_vue_type_script_setup_true_lang.DtQknfzm1754646849181.js";import"./postprocessing.DILjcRc91754646849181.js";import"./@vueuse.uWD-2GR_1754646849181.js";import"./utils.DnJ-RFK_1754646849181.js";import"./@fesjs.C_xmqVvB1754646849181.js";import"./vue-router.bKRZXZZg1754646849181.js";import"./lodash-es.C7pWAXPe1754646849181.js";import"./@qlin.q6OWdsQV1754646849181.js";import"./pinia.C_jiKjvU1754646849181.js";import"./@babel.BPq7uOAK1754646849181.js";import"./@floating-ui.BFjFSAYt1754646849181.js";import"./@juggle.CcBCnTIR1754646849181.js";import"./index.qnYdS7XQ1754646849181.js";import"./three-mesh-ui.module.Bqi_8VPG1754646849181.js";/* empty css                                                              */import"./starLoading.Cdr7aycT1754646849181.js";import"./cssLoaders.DtQQ_sv01754646849181.js";import"./bubbleLoading.BMQhBZUj1754646849181.js";import"./yangyangLoading.do8-xdPL1754646849181.js";function M(){const t=["mSoRWQBcNg8","n8oFWRdcNNJdVG","W6NcTMHjW6junCkv","W6VcQCo0FSo0Bve","w8o+lZNdVq","W6ddKHacW754WQ/cOmohiGO","W73cR8kmWOZcMZpcJNFdNXW8WPqN","W7pdNmkgqSoY","kSkTeSoBDq","WO49W7i1WQW","WPv5qxhcNG","W77cTvjyW75jaG","WOlcGConACkJWPVcJCorqmo6W5O","W6VcUfDiW7u","W7meW7T5WP8","ASooWOKQE8kZW6ldP8kNtmo4uq","AmoxWPpcKv5mas8tW4S","W6P0WPewtK/cHG","W43dVZGecq","W5/dM8ktuWi","kea0iSk4p0bX","nmooWQdcR2hdTCouzmkvWP9cWPNcH8oRt14","W5RcUqlcK8k1iwxdL8ojqCk+cq","W488e8oGcSo6yCk1vCo9EG","ECkFxmopgG","m8klW41HnW","W5RdICkKvbi","WQHTW63dOZa","e1BdLZ4p","W4H0W44dW4bvW6/cSSkGWPlcPSoLqSo9cYW","nG1gW4pdHG","WPBcUGzzW6tcN8oiWPBdVCkZW6ZdOSozW6y4tSkYl28","i8oml8kWW48","iCofWRhcIx8","W4rkWQq5Dq","gmoHjSkrW7FcQq","xmkSymoyWQJdQmokW7NcHu4vrG","W7zpWOOttW","smovcsK","WPDarLpcLa","W7/cSfvz","W43cQCkmcrVdKGS","q8oscsJdMSkXggG2W7ddHq","W4LFW7ldHqC6WOy","W7yaW7z+WPNcOW","W5qGhJldIdxdIIFcPaLoW4hcUG","aSkut2pcG8oqvIH6WRhcMSkF","WRXAvHpcP8kxW7KFCgS","W7ZcMLqhttqQiwu","WPtcSbTcW6lcLmkAW6RdOSk2W6C","WR/dMq4bCGScjwO","vgtdRYe4CLm","nNhdR8oiWRy","hNzyrCo1hSkNyqBcHCkJWOhcPu4aESklccG0mKyeW4rgWRLMW6DXWO9bWPq","W7rTeSk1","fSovdqBdHW","jaTbW5pdMSocW68hWQZcL8oAW4S","nanFW5xdIW","FmkVtxLp","WQrsAvpcRG","CSoCWPZcHK9Z","nLFcGCoVWQ89WPrqWQTkW5LzqG","W6bLemkKCG","cSo1WRtcMhJdPmovt8kg","W4D7yfTkWQj0W6xcHSo1na","a8o9fJ3dKq","yKBdHmk/eCoXW5ZcMSo+gmoP","nSkbW47dGH8SwdGkW6PPWQvf","CCoxWPr2amorWPJcUSoM","ys45WQ4e","gmkeuHxdNSkblhaK","mwnlWOFcLCkXWR3dN2C","W4FcQ8klcqFdRJzNWPDjW5q","W5eTgtddGZBdIIlcUIXAW5lcQq","wSkkBhzC","WOjOxwJcGG","W6PiW7NdRsy","W5b7xvXmWRLVW6e","p8kYmCodFSoqWRRcJa","WO3dUmk5tcNdONC","WQpcL0zpWQnDWPFcM8oX","WO4WuCkr","W7TpWRyTrG","WPf9wxhcIwZdMNZcRZvgW5RcJ1zmWRXcWQ4D","WQtdKwryda1AhmowxmoadCkD","zSkBW7FdMeddGCozySkRWR4","WQWdW5iDWONdHCo3rCkFW7VcU8kPWRFdRKO","WO3cSrXjW6tcPSkbW5RdR8kU","bKFdHt4t","W6ncWO8drcZcMq","W4ecW59AWPi","r8kcBNrpWRC","EmkhWPOhWRy","W6X8EaWG","CuBdG8kIcSo4W4S","bmolhapdVa","W6xcGsqQrLyhkCoexCoxfmkU","qmk3CmohWRFdSCowW6JdNqTXleTo","CfOgW7JdMmoYW5CcWPy","W4D4z01qWQry","W7RcOmoPBSoODYJcSSoJC8kMW55nWOZdL8kjWOCZbW","cSokWOmPWRW","W7tdMmkvrSoa","B8kAWPuxWRZcKIe","W416ye1mWODOW6lcHSoY","W6vHhCkJDmot","W6RcQhzKW5S","WOZcOCoshmkDuff5WRv7C8k5WP0","fSoTjSks","yaJdMSkTW694W5nAWRfHW40","W5P+W4SVW7q","W5bLW7VdSdTKaMfO"];return(M=function(){return t})()}!function(){function t(t,e,n,o,r){return K(n-114,r)}function e(t,e,n,o,r){return K(t-898,n)}const n=M();function o(t,e,n,o,r){return K(t-145,o)}for(;;)try{if(490164===parseInt(e(1099,0,"hTJ1"))/1*(-parseInt((r="DHSb",s=-540,K(s- -740,r)))/2)+-parseInt(e(1102,0,"wSgO"))/3*(parseInt(e(1158,0,"HGTn"))/4)+-parseInt(t(0,0,365,0,"by0Y"))/5*(parseInt(o(415,0,0,"bbtB"))/6)+-parseInt(e(1094,0,"uDS0"))/7*(parseInt(K(287-16,"rwB*"))/8)+-parseInt(e(1147,0,"4WP1"))/9+-parseInt(t(0,0,312,0,"Dnaw"))/10+parseInt(o(395,0,0,"WhoZ"))/11)break;n.push(n.shift())}catch(i){n.push(n.shift())}var r,s}();const F=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return K(e-287,t)}function r(t,e,n,o,r){return K(r- -643,e)}if(r(0,"*EZH",0,0,-395)===r(0,"XE8!",0,0,-380)){const r=t?function(){function t(t,e,n,r,s){return o(t,n- -923)}if("VeoTN"!==t("uDS0",0,-344)){let t;try{t=_0x2dbacb(o("q)Wo",1010-427)+'{}.constructor("return this")( ));')()}catch(i){t=_0x3fd8af}return t}if(n){if("WHgFL"===t("WhoZ",0,-339)){const t=n.apply(e,arguments);return n=null,t}_0x1b981a[(r=816,s="YAF2",K(r-783- -246,s))]=-1,_0x472a2e[t("q)Wo",0,-434)]===t("A7k0",0,-338)&&(_0x16d936.value=!1)}var r,s}:function(){};return t=!1,r}var s,i,a,c;_0x489351.x=_0x2ec970.clientX/_0x35d929[(a=1214,c="q)Wo",K(a-974,c))]*2-1,_0x552e3d.y=-_0x31b5db[r(0,"dg9q",0,0,-367)]/_0x45939f[(s=60,i="qPFa",K(s- -228,i))]*2+1,_0x1819e9.value=!0}}()(void 0,(function(){function t(t,e,n,o,r){return K(o- -339,r)}return F.toString()[t(0,0,0,-81,"GIS9")](t(0,0,0,-38,"WhoZ")).toString()[t(0,0,0,-122,"jiqp")](F).search(K(937-650,"J&X5"))}));F();const I=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return K(e-388,o)}if("LJbmZ"===o(0,660,0,"HGTn")){const r=t?function(){function t(t,e,n,r,s){return o(0,e- -1016,0,t)}function r(t,e,n,r,s){return o(0,r-63,0,n)}function s(t,e,n,r,s){return o(0,t- -575,0,r)}if(r(0,0,"1uLw",741)!==t("&*Xq",-401)){const e=_0x296335[s(90,0,0,"URVB")][s(46,0,0,"bbtB")][t("GIS9",-421)](_0x5296ed),n=_0x1fef2e[_0x4edb96],o=_0x37f44a[n]||e;e[r(0,0,"A7k0",667)]=_0x1a4736[t("1jRo",-325)](_0x931ebd),e[t("&3g6",-397)]=o.toString[t("WhoZ",-367)](o),_0x24d41a[n]=e}else if(n){if(s(117,0,0,"Dnaw")===r(0,0,"*EZH",669)){const t=n[r(0,0,"wSgO",692)](e,arguments);return n=null,t}{const t=_0x30b9d9?function(){if(_0x30612d){const t=_0x348706.apply(_0x41161b,arguments);return _0x5a5a25=null,t}}:function(){};return _0x3e1786=!1,t}}}:function(){};return t=!1,r}{const t=_0x2bd9bf?function(){if(_0x10a31e){const n=_0x234426[(t="*EZH",e=665,o(0,e-69,0,t))](_0x3dad98,arguments);return _0x5d8762=null,n}var t,e}:function(){};return _0x2aa4ad=!1,t}}}();I(void 0,(function(){function t(t,e,n,o,r){return K(t- -13,r)}const e=function(){function t(t,e,n,o,r){return K(e- -72,r)}function e(t,e,n,o,r){return K(n-124,o)}if(e(0,0,415,"Y(d)")!==e(0,0,359,"@Qvp")){let o;try{if(e(0,0,383,"dg9q")===K(-130- -399,"1jRo")){const e=_0xb9e06d[t(0,174,0,0,"j2wi")](_0x555072,arguments);return _0x105379=null,e}o=Function(e(0,0,377,"tiGv")+'{}.constructor("return this")( ));')()}catch(n){if(t(0,171,0,0,"YAF2")!==K(-94- -316,"h6Kp")){if(_0x23778){const e=_0x5a5aa3[t(0,212,0,0,"Y(d)")](_0x3a3c20,arguments);return _0x5d58eb=null,e}}else o=window}return o}_0x3598b6=_0x565351}();function n(t,e,n,o,r){return K(r-261,e)}function o(t,e,n,o,r){return K(o- -534,n)}const r=e[t(234,0,0,0,"4LiV")]=e[n(0,"u3Wn",0,0,517)]||{};const s=["log","warn",n(0,"AmsF",0,0,495),n(0,"I2!H",0,0,490),"exception",t(280,0,0,0,"wSgO"),o(0,0,"u3Wn",-289)];function i(t,e,n,o,r){return K(t- -194,n)}for(let u=0;u<s[i(106,0,"WhoZ")];u++)if(n(0,"A7k0",0,0,526)===o(0,0,"&*Xq",-323))_0x13008d[t(270,0,0,0,"#&xZ")]=!1;else{const e=I[i(68,0,"szMM")][t(190,0,0,0,"hTJ1")].bind(I),o=s[u],W=r[o]||e;e[(a=-33,c="I2!H",K(a- -297,c))]=I[i(111,0,"dg9q")](I),e[i(36,0,"jiqp")]=W[n(0,"n$yw",0,0,546)].bind(W),r[o]=e}var a,c}))();const N=(t,e,n,o,r,i)=>{function a(t,e,n,o,r){return K(e-727,o)}function c(t,e,n,o,r){return K(r- -7,e)}window[c(0,"A7k0",0,0,279)]("pointermove",(n=>{function o(t,e,n,o,r){return c(0,t,0,0,r-173)}if("pYVYx"===o("R#da",0,0,0,371)){const t=_0x282b0a[o("Dnaw",0,0,0,394)](_0x283e08,arguments);return _0x4e2a48=null,t}var r,s,i,a;t.x=n[(i=-419,a="ebWQ",c(0,a,0,0,i- -654))]/window[o("jiqp",0,0,0,423)]*2-1,t.y=-n[(r=-110,s="jiqp",c(0,s,0,0,r- -355))]/window[o("1jRo",0,0,0,361)]*2+1,e.value=!0})),window.addEventListener(a(0,946,0,"4LiV"),(u=>{function W(t,e,n,o,r){return c(0,e,0,0,r-480)}function l(t,e,n,o,r){return a(0,t- -1718,0,o)}function d(t,e,n,o,r){return c(0,t,0,0,e-675)}function f(t,e,n,o,r){return a(0,o- -935,0,n)}function p(t,e,n,o,r){return c(0,e,0,0,n-663)}if(f(0,0,"kvk9",66)!==l(-692,0,0,"@Qvp"))return _0x49b4d5[f(0,0,"dg9q",59)]()[l(-794,0,0,"YAF2")](W(0,"1jRo",0,0,672)).toString()[W(0,"jiqp",0,0,690)](_0x5e6a98)[l(-778,0,0,")g5Z")](l(-711,0,0,"1uLw"));{t.x=u[f(0,0,"Gl]Q",98)]/window[f(0,0,")g5Z",73)]*2-1,t.y=-u[l(-723,0,0,"tiGv")]/window[d("Gl]Q",893)]*2+1,o[d("by0Y",878)]=u[W(0,"A7k0",0,0,739)];const a=new(s[W(0,"(EY1",0,0,697)]);a[p(0,"4WP1",893)](t,n[p(0,"ebWQ",958)]),a[l(-782,0,0,"by0Y")]=!0;const c=a[l(-752,0,0,"kvk9")](r[p(0,"GIS9",871)],!0);e[l(-702,0,0,"wRCf")]=!0,i[f(0,0,"@Qvp",74)]=0===c[l(-747,0,0,"&*Xq")]}}),!0),window[a(0,1021,0,"XE8!")]("pointerup",(t=>{function n(t,e,n,o,r){return c(0,e,0,0,o- -192)}function r(t,e,n,o,r){return c(0,n,0,0,t- -405)}if("vxeVW"!==a(0,62- -919,0,"1YlB"))_0x57c011=_0xd49bba(r(-176,0,"Dnaw")+r(-206,0,"&ra#")+");")();else if(o[n(0,"dg9q",0,79)]=-1,t.pointerType===c(0,"by0Y",0,0,-398- -686))if(n(0,"Dnaw",0,13)===n(0,"HGTn",0,56)){if(_0x5508a3){const t=_0x4ed523[r(-139,0,"&3g6")](_0x5d4230,arguments);return _0x587fe3=null,t}}else e[(s="Dnaw",i=92,a(0,i- -910,0,s))]=!1;var s,i}),!0)};function K(t,e){const n=M();return K=function(e,o){let r=n[e-=195];if(void 0===K.gGffWH){var s=function(t){let e="",n="",o=e+s;for(let r,s,i=0,a=0;s=t.charAt(a++);~s&&(r=i%4?64*r+s:s,i++%4)?e+=o.charCodeAt(a+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=e.length;r<s;r++)n+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};const e=function(t,e){let n,o,r=[],i=0,a="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)i=(i+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[i],r[i]=n;o=0,i=0;for(let s=0;s<t.length;s++)o=(o+1)%256,i=(i+r[o])%256,n=r[o],r[o]=r[i],r[i]=n,a+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[i])%256]);return a};K.omDarQ=e,t=arguments,K.gGffWH=!0}const i=e+n[0],a=t[i];if(a)r=a;else{if(void 0===K.fZadwW){const t=function(t){this.FPEzPo=t,this.GtAdKB=[1,0,0],this.gnGVTQ=function(){return"newState"},this.CcYPLb="\\w+ *\\(\\) *{\\w+ *",this.nqcygw="['|\"].+['|\"];? *}"};t.prototype.LEUgJZ=function(){const t=new RegExp(this.CcYPLb+this.nqcygw).test(this.gnGVTQ.toString())?--this.GtAdKB[1]:--this.GtAdKB[0];return this.aphcFn(t)},t.prototype.aphcFn=function(t){return Boolean(~t)?this.rbPYxB(this.FPEzPo):t},t.prototype.rbPYxB=function(t){for(let e=0,n=this.GtAdKB.length;e<n;e++)this.GtAdKB.push(Math.round(Math.random())),n=this.GtAdKB.length;return t(this.GtAdKB[0])},new t(K).LEUgJZ(),K.fZadwW=!0}r=K.omDarQ(r,o),t[i]=r}return r},K(t,e)}const Y=["geometry","material"],D=["geometry"],J=y({__name:"model",props:{controls:{}},async setup(o){let r,s;const y=o;f.prototype.computeBoundsTree=v,f.prototype.disposeBoundsTree=S,p.prototype.raycast=b;const O=([r,s]=_((()=>n(m,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,s(),r),T=new i({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),Z=new Uint8Array(3*O.attributes.position.count);Z.fill(255);const Q=new a(Z,3,!0);Q.setUsage(c),O.setAttribute("color",Q);const A=w(null),L=w(null),B=w(!1),H=w(-1),M=w(.2),F=new u,{camera:I,raycaster:K}=t(),J=15/255,X=78/255,z=85/255;let V=null;C((()=>{A.value&&(console.log("targetMesh.value init",A.value),A.value.geometry.computeBoundsTree(),V=O.boundsTree,N(F,B,I,H,A,y.controls.instance))}));const{onLoop:E}=e();E((()=>{const t=O.index;if(L.value)if(y.controls.instance.active||!B.value)L.value.visible=!1;else{L.value.scale.setScalar(M.value),K.value.setFromCamera(F,I.value),K.value.firstHitOnly=!0;const e=K.value.intersectObject(A.value,!0);if(e.length){L.value.position.copy(e[0].point),y.controls.instance.enabled=!1,L.value.visible=!0;const n=new W;n.copy(A.value.matrixWorld).invert();const o=new l;o.center.copy(L.value.position).applyMatrix4(n),o.radius=100*M.value;const r=[],s=new d;if(V?.shapecast({intersectsBounds:t=>{const e=o.intersectsBox(t),{min:n,max:r}=t;if(e){for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let i=0;i<=1;i++)if(s.set(0===t?n.x:r.x,0===e?n.y:r.y,0===i?n.z:r.z),!o.containsPoint(s))return g;return x}return e?g:k},intersectsTriangle:(t,e,n)=>{if(n||t.intersectsSphere(o)){const t=3*e;r.push(t,t+1,t+2)}return!1}}),0===H.value||2===H.value){let e=1,n=1,o=1;0===H.value&&(e=J,n=X,o=z);for(let s=0,i=r.length;s<i;s++){const i=t.getX(r[s]);Q.setX(i,e),Q.setY(i,n),Q.setZ(i,o)}Q.needsUpdate=!0}}else L.value.visible=!1,y.controls.instance.enabled=!0}}));const U=(new h).addButton({title:"点击按钮",label:"生成模型"}),$=new f;return U.on("click",(()=>{const t=[],e=[];for(let o=0;o<Q.count;o++)Q.getX(o)===J&&Q.getY(o)===X&&Q.getZ(o)===z&&(t.push(O.attributes.position.getX(o),O.attributes.position.getY(o),O.attributes.position.getZ(o)),e.push(O.attributes.normal.getX(o),O.attributes.normal.getY(o),O.attributes.normal.getZ(o)));const n=new Float32Array(t);$.setAttribute("position",new a(n,3)),$.setAttribute("normal",new a(n,3))})),(t,e)=>(q(),j(G,null,[P("TresMesh",{ref_key:"targetMesh",ref:A,geometry:R(O),scale:.005,material:R(T)},null,8,Y),P("TresMesh",{ref_key:"brushMesh",ref:L,visible:!1},e[0]||(e[0]=[P("TresSphereGeometry",{args:[1,40,40]},null,-1),P("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),P("TresMesh",{geometry:R($),position:[-2,-2,2],scale:.005},e[1]||(e[1]=[P("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,D)],64))}}),X=y({__name:"collectTriangles",setup(t){const e=O({clearColor:"#999999",antialias:!0}),n=O({autoRotate:!1}),s=w(null);return(t,i)=>{const a=T("TresCanvas");return q(),j(G,null,[Z(R(H)),Z(a,L(e,{"window-size":""}),{default:Q((()=>[i[0]||(i[0]=P("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),Z(R(o),L({ref_key:"controlsRef",ref:s},n),null,16),i[1]||(i[1]=P("TresAmbientLight",{intensity:1},null,-1)),(q(),A(B,null,{default:Q((()=>[Z(J,{controls:s.value},null,8,["controls"])])),_:1})),(q(),A(B,null,{default:Q((()=>[Z(R(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{X as default};

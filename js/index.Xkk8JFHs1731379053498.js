var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as w,c4 as S,c5 as M,K as E,f as R,V as A,g as T,_ as D,bI as z,m as P,bm as C,k as F,bz as O,d as k,aj as B,B as j,a as U,aP as N,e as L,M as H,as as Z,a9 as G,a_ as W}from"./three.bXjbKLxC1731379053498.js";import{m as $,D as V,e as Y}from"./@tresjs.bLKO3xyw1731379053498.js";import{R as K}from"./three-stdlib.yR_asc1t1731379053498.js";import{v as q,b as X,w as Q,a as J,u as nn,d as tn,U as en,a6 as rn,a4 as on,o as an,D as cn,G as sn,I as un,aa as ln,a3 as fn,q as pn,f as dn,J as hn,ab as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a9 as bn,m as In}from"./@vue.-THQH3GC1731379053498.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.WRC-eauj1731379053498.js";import{h as En}from"./object-hash.ODhiDasX1731379053498.js";var Rn=zn;function An(){var n=["stateObject","input","479015RwPnCm","235602HuMXYA","constructor","prototype","traverse","destructor","218676iAZFkB","string","dispose","length","chain","12532432yNppaT","function *\\( *\\)","680vlAbrF","debu","counter","map","10ihYWWK","virtualScene","info","action","test","console","apply","table",'{}.constructor("return this")( )',"1505155cSzZXT","toString","return (function() ","486mCpfyn","bind","material","gger","1989752KiQOMs","4HEjELX","trace","remove","add","call","145446FaKXxd"];return(An=function(){return n})()}!function(n,t){for(var e=zn,r=An();;)try{if(980305===parseInt(e(168))/1+parseInt(e(159))/2*(parseInt(e(148))/3)+-parseInt(e(134))/4*(parseInt(e(142))/5)+parseInt(e(129))/6*(-parseInt(e(139))/7)+parseInt(e(133))/8+parseInt(e(143))/9*(parseInt(e(155))/10)+-parseInt(e(153))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(165)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=zn,t=new RegExp(n(154)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fn("init");t[n(163)](r+n(152))&&e.test(r+n(141))?Fn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(165)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(n,t){var e=An();return(zn=function(n,t){return e[n-=128]})(n,t)}Dn(void 0,(function(){for(var n=zn,t=function(){var n,t=zn;try{n=Function(t(128)+t(167)+");")()}catch(e){n=window}return n}(),e=t[n(164)]=t.console||{},r=["log","warn",n(161),"error","exception",n(166),n(135)],o=0;o<r[n(151)];o++){var i=Dn[n(144)][n(145)].bind(Dn),a=r[o],c=e[a]||i;i.__proto__=Dn[n(130)](Dn),i[n(169)]=c[n(169)].bind(c),e[a]=i}}))();class Pn extends s{constructor(){var n=zn;super(),this[n(160)]=null,this.virtualScene=new u}[Rn(137)](...n){var t=Rn;return this.virtualScene[t(137)](...n),this}[Rn(147)](){var n=Rn;this[n(160)][n(146)]((t=>{var e=n;t instanceof l&&(t.geometry[e(150)](),t[e(131)][e(150)](),t[e(131)][e(158)]&&t.material.map[e(150)](),this[e(160)][e(136)](t))})),this[n(160)]=null}}const Cn=Pn;function Fn(n){function t(n){var e=zn;if(typeof n===e(149))return function(n){}[e(144)]("while (true) {}").apply(e(157));1!==(""+n/n).length||n%20==0?function(){return!0}[e(144)](e(156)+e(132))[e(138)](e(162)):function(){return!1}.constructor(e(156)+"gger")[e(165)](e(140)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=Un;!function(n,t){const e=Un,r=Bn();for(;;)try{if(776892===-parseInt(e(332))/1+parseInt(e(327))/2*(-parseInt(e(333))/3)+parseInt(e(334))/4+-parseInt(e(315))/5+parseInt(e(307))/6+-parseInt(e(336))/7*(parseInt(e(302))/8)+parseInt(e(320))/9*(parseInt(e(314))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(){const n=["trace","outdoor/snowy_forest_path_01_1k.hdr","9JyrXKx","__proto__","outdoor/satara_night_1k.hdr",'{}.constructor("return this")( )',"error","gger","outdoor/outdoor_umbrellas_1k.hdr","526sKxwFR","bind","table","constructor","studio/poly_haven_studio_1k.hdr","1120084ElKtvF","11733aWPxrn","1806740AHusob","indoor/abandoned_games_room_02_1k.hdr","441NlioiW","toString","log","action","return (function() ","kiara/kiara_1_dawn_1k.hdr","196744tDCAbB","apply","prototype","outood/mossy_forest_1k.hdr","city/canary_wharf_1k.hdr","1296324hCcbMC","while (true) {}","string","city/shanghai_bund_1k.hdr","test","length","chain","39753030tGtdUK","840570OYMZMv","counter","city/modern_buildings_2_1k.hdr"];return(Bn=function(){return n})()}!function(){kn(this,(function(){const n=Un,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ln("init");t.test(r+n(313))&&e[n(311)](r+"input")?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(n,t){const e=Bn();return(Un=function(n,t){return e[n-=298]})(n,t)}jn(void 0,(function(){const n=Un;let t;try{t=Function(n(300)+n(323)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(298),"warn","info",n(324),"exception",n(329),n(318)];for(let i=0;i<r[n(312)];i++){const t=jn[n(330)][n(304)][n(328)](jn),o=r[i],a=e[o]||t;t[n(321)]=jn[n(328)](jn),t.toString=a[n(337)].bind(a),e[o]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:On(331),city:On(306),umbrellas:On(326),night:On(322),forest:On(305),snow:On(319),dawn:On(301),hangar:"indoor/small_hangar_01_1k.hdr",urban:On(335),modern:On(317),shangai:On(310)};function Ln(n){function t(n){const e=Un;if(typeof n===e(309))return function(n){}[e(330)](e(308))[e(303)](e(316));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(325)).call(e(299)):function(){return!1}[e(330)]("debu"+e(325))[e(303)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=$n;!function(n,t){const e=$n,r=Gn();for(;;)try{if(841593===-parseInt(e(123))/1+parseInt(e(145))/2*(parseInt(e(141))/3)+parseInt(e(129))/4*(-parseInt(e(133))/5)+-parseInt(e(116))/6+parseInt(e(150))/7+-parseInt(e(128))/8*(-parseInt(e(135))/9)+-parseInt(e(152))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(139)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(){const n=["setPath","apply","value","3fjAphk","stateObject","prototype","Preset must be one of: ","1944874BzAcEt","isColor","backgroundBlurriness","debu","gger","10809932AYoyKx","isArray","8598870BpclfB","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","texture","keys","Failed to load environment map: ","length","join","return (function() ","__proto__","741810WnuIBb","constructor","background","chain","toString","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","exception","718434hkEdoH","table","console","test","input","604424vimREg","545916WUlFbo","action",'{}.constructor("return this")( )',"call","35xthMtk","info","117tSyAwo","bind","mapping"];return(Gn=function(){return n})()}!function(){Zn(this,(function(){const n=$n,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(154),"i"),r=Yn("init");t[n(126)](r+n(119))&&e[n(126)](r+n(127))?Yn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(139)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(n,t){const e=Gn();return($n=function(n,t){return e[n-=113]})(n,t)}Wn(void 0,(function(){const n=$n;let t;try{t=Function(n(114)+n(131)+");")()}catch(o){t=window}const e=t[n(125)]=t.console||{},r=[n(153),"warn",n(134),"error",n(122),n(124),n(155)];for(let i=0;i<r[n(159)];i++){const t=Wn[n(117)][n(143)][n(136)](Wn),o=r[i],a=e[o]||t;t[n(115)]=Wn.bind(Wn),t[n(120)]=a[n(120)][n(136)](a),e[o]=t}}))();const Vn=Hn(121);function Yn(n){function t(n){const e=$n;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(139)]("counter");1!==(""+n/n)[e(159)]||n%20==0?function(){return!0}[e(117)](e(148)+e(149))[e(132)](e(130)):function(){return!1}[e(117)](e(148)+e(149)).apply(e(142)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Xn,r=nt();for(;;)try{if(799483===-parseInt(e(171))/1+parseInt(e(174))/2*(parseInt(e(181))/3)+-parseInt(e(139))/4+parseInt(e(159))/5+-parseInt(e(167))/6+-parseInt(e(162))/7+parseInt(e(180))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Xn,t=new RegExp(n(176)),e=new RegExp(n(149),"i"),r=Jn(n(163));t[n(143)](r+"chain")&&e.test(r+n(145))?Jn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(n,t){const e=nt();return(Xn=function(n,t){return e[n-=133]})(n,t)}qn(void 0,(function(){const n=Xn;let t;try{t=Function(n(168)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(177)]=t[n(177)]||{},r=[n(137),n(152),n(138),n(173),n(140),"table",n(160)];for(let i=0;i<r[n(133)];i++){const t=qn[n(146)][n(144)][n(148)](qn),o=r[i],a=e[o]||t;t.__proto__=qn.bind(qn),t.toString=a[n(134)][n(148)](a),e[o]=t}}))();const Qn=tn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=X(null),x=null;const b=X(null);en((()=>{var n,t;const e=Xn;null==(n=b.value)||n[e(142)](),null==(t=y[e(158)])||t[e(172)]()}));const{onBeforeLoop:I}=Y();let w=1;I((()=>{const n=Xn;x&&b[n(158)]&&y.value&&(i.frames===1/0||w<i[n(154)])&&(i[n(156)]?x.update(s[n(158)],u[n(158)]):x[n(151)](s[n(158)],ln(b[n(158)][n(175)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=q(n);Q(n,(()=>{o()}));const l=X(null),h=J((()=>Array[e(151)](c[e(140)]))),v=J((()=>h[e(140)]?f:K));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(140)])){try{l[r(140)]=await V(v[r(140)],h.value?[...nn(n)]:nn(n),(n=>{t&&n[r(138)](nn(t))}))}catch(o){throw new Error(r(158)+o)}l[r(140)]&&(l[r(140)].mapping=h[r(140)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(140)]&&n&&(r[t(140)].environment=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(140)]){let e=(null==t?void 0:t[i(140)])?t[i(140)][i(156)]:o,a=r[i(140)][i(118)];!(null==a?void 0:a[i(146)])&&(a=void 0),r.value.background=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(140)]),(n=>{const t=e;r.value&&n&&(r[t(140)][t(147)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Nn){const e=Vn,i=Nn[n];try{l[t(140)]=await V(K,i,(n=>{e&&n[t(138)](e)}))}catch(r){throw new Error(t(158)+r)}l[t(140)]&&l.value&&(l[t(140)][t(137)]=d),o()}else if(n&&!(n in Nn))throw new Error(t(144)+Object[t(157)](Nn)[t(113)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Xn;n?(u[t(158)].environment=n[t(183)],i[t(136)]&&(u[t(158)].background=n[t(183)])):(u.value.environment=S[t(158)],i[t(136)]&&(u[t(158)][t(136)]=S.value))};Q(S,(n=>{const t=Xn;y[t(158)]&&M(y[t(158)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const E=()=>{var n;const t=Xn;null==(n=y[t(158)])||n[t(172)](),y.value=new v(i.resolution),x=new m(i.near,i[t(147)],y[t(158)]),i.useDefaultScene?(y[t(158)].texture.type=g,y[t(158)].texture[t(169)]=!1,y[t(158)].texture.minFilter=_,y.value[t(183)][t(179)]=_):y[t(158)][t(183)][t(141)]=h,M(y.value)};return Q((()=>on()[e(153)]),(n=>{var t,r;const o=e;n&&(!y[o(158)]||y[o(158)][o(183)][o(141)]!==h)&&(l=n(),Array.isArray(l)&&l[o(133)]>0&&typeof(null==(t=l[0])?void 0:t[o(141)])!==o(161))?E():(null==(r=y.value)||r.dispose(),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(158)]=S,Q((()=>i[e(156)]),(n=>{y.value&&E()})),(n,t)=>{const r=e;return nn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:r(135),ref:b},[sn(n[r(178)],r(153))],512)):un("",!0)}}});function Jn(n){function t(n){const e=Xn;if(typeof n===e(165))return function(n){}[e(146)](e(170))[e(157)](e(155));1!==(""+n/n)[e(133)]||n%20==0?function(){return!0}.constructor("debugger")[e(164)](e(182)):function(){return!1}.constructor(e(150)+e(166))[e(157)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function nt(){const n=["11113824PXtauQ","65247TqMWQn","action","texture","length","toString","envSence","background","log","info","3178736tYZJYL","exception","type","destructor","test","prototype","input","constructor","far","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","update","warn","default","frames","counter","useDefaultScene","apply","value","7989510pRxMYh","trace","symbol","8930446xSgPHw","init","call","string","gger","1439736oSKJOJ","return (function() ","generateMipmaps","while (true) {}","725440zceRRV","dispose","error","78EVSTfU","virtualScene","function *\\( *\\)","console","$slots","magFilter"];return(nt=function(){return n})()}const tt=et;function et(n,t){const e=ut();return(et=function(n,t){return e[n-=242]})(n,t)}!function(n,t){const e=et,r=ut();for(;;)try{if(930155===parseInt(e(285))/1*(parseInt(e(263))/2)+parseInt(e(295))/3*(-parseInt(e(251))/4)+parseInt(e(275))/5+parseInt(e(250))/6*(-parseInt(e(271))/7)+-parseInt(e(260))/8*(parseInt(e(244))/9)+-parseInt(e(255))/10+parseInt(e(288))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(242)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=et,t=new RegExp(n(273)),e=new RegExp(n(245),"i"),r=ft(n(247));t[n(277)](r+n(279))&&e.test(r+n(246))?ft():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(242)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ot(void 0,(function(){const n=et;let t;try{t=Function(n(274)+n(257)+");")()}catch(o){t=window}const e=t[n(294)]=t[n(294)]||{},r=[n(281),"warn",n(270),"error",n(278),n(249),n(284)];for(let i=0;i<r[n(282)];i++){const t=ot[n(259)].prototype[n(264)](ot),o=r[i],a=e[o]||t;t[n(290)]=ot[n(264)](ot),t[n(280)]=a.toString.bind(a),e[o]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[tt(258),"map","side","color"];function ut(){const n=["bind","string","rect","needsUpdate","set","TresMeshBasicMaterial","info","127876bDGCPy","gger","function *\\( *\\)","return (function() ","558295zoslvl","color","test","exception","chain","toString","log","length","intensity","trace","70809beoaYT","TresRingGeometry","debu","37226244uKposd","counter","__proto__","stateObject","from","TresPlaneGeometry","console","3InFZlh","apply","map","13761fnAnph","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","init","TresMesh","table","402ozQbVB","337432NloxZt","value","call","material","14950860fGEmQD","index",'{}.constructor("return this")( )',"toneMapped","constructor","7648lhiomN","multiplyScalar","action","48FQXrfR"];return(ut=function(){return n})()}const lt=tn({__name:tt(256),props:{args:{default:null},from:{default:tt(266)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=X();return fn((()=>{const n=et;r[n(252)]&&(r[n(252)][n(276)][n(261)](e[n(283)]),r[n(252)][n(267)]=!0)})),Q((()=>e[t(276)]),(n=>{const o=t;r[o(252)]&&(r[o(252)].color[o(268)](n),r[o(252)][o(276)][o(261)](e[o(283)]),r[o(252)][o(267)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(248),null,["circle"===e[i(292)]?(an(),cn(i(286),it)):"ring"===e.from?(an(),cn(i(286),at)):e.from===i(266)?(an(),cn(i(293),ct)):(an(),dn(e[i(292)],{key:3,args:e})),hn(i(269),{ref_key:i(254),ref:r,toneMapped:n.toneMapped,map:n[i(243)],side:nn(x),color:n[i(276)]},null,8,st)])}}});function ft(n){function t(n){const e=et;if(typeof n===e(265))return function(n){}.constructor("while (true) {}")[e(242)](e(289));1!==(""+n/n).length||n%20==0?function(){return!0}[e(259)]("debu"+e(272))[e(253)](e(262)):function(){return!1}.constructor(e(287)+e(272))[e(242)](e(291)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=dt,r=vt();for(;;)try{if(917378===parseInt(e(346))/1+-parseInt(e(368))/2+parseInt(e(352))/3*(parseInt(e(351))/4)+parseInt(e(379))/5*(-parseInt(e(365))/6)+-parseInt(e(381))/7*(-parseInt(e(353))/8)+-parseInt(e(350))/9+parseInt(e(359))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=vt();return(dt=function(n,t){return e[n-=346]})(n,t)}!function(){pt(this,(function(){const n=dt,t=new RegExp(n(360)),e=new RegExp(n(361),"i"),r=gt(n(372));t.test(r+n(369))&&e.test(r+n(348))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(376)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(){const n=["12859614KsuxFH","3836FplTUc","1146cmpayr","53464xrRqRB","length","toString","bind","value","warn","26613610ynkKGS","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","stateObject","width","150GsaPJq","exception","dispose","2711640WCFZcP","chain","type","action","init","log","depthTexture","counter","apply","error","__proto__","164150dtmaTv","table","1498RykUhf",'{}.constructor("return this")( )',"string","info","debu","height","64933FZkwxv","render","input","gger"];return(vt=function(){return n})()}function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?q(n):q(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=$();return fn((()=>{var n;const a=dt;null==(n=t[a(357)])||n[a(367)](),t[a(357)]=new b((null==r?void 0:r[a(357)])||p.width.value,(null==e?void 0:e[a(357)])||p.height[a(357)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(357)])),(null==i?void 0:i[a(357)])&&(t[a(357)].depthTexture=new w((null==r?void 0:r[a(357)])||p[a(364)][a(357)],(null==e?void 0:e[a(357)])||p[a(386)].value),t[a(357)].depthTexture.format=S,t.value[a(374)][a(370)]=M)})),s((()=>{const n=dt;(null==a?void 0:a[n(357)])&&(l[n(357)].setRenderTarget(ln(t[n(357)])),l[n(357)].clear(),l[n(357)][n(347)](ln(f[n(357)]),ln(u[n(357)])),l[n(357)].setRenderTarget(null))})),gn((()=>{var n;const e=dt;null==(n=t.value)||n[e(367)]()})),t}function gt(n){function t(n){const e=dt;if(typeof n===e(383))return function(n){}[e(362)]("while (true) {}").apply(e(375));1!==(""+n/n)[e(354)]||n%20==0?function(){return!0}.constructor("debu"+e(349)).call(e(371)):function(){return!1}.constructor(e(385)+e(349)).apply(e(363)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=dt;let t;try{t=Function("return (function() "+n(382)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(373),n(358),n(384),n(377),n(366),n(380),"trace"];for(let i=0;i<r[n(354)];i++){const t=ht[n(362)].prototype[n(356)](ht),o=r[i],a=e[o]||t;t[n(378)]=ht.bind(ht),t.toString=a[n(355)][n(356)](a),e[o]=t}}))();const _t=wt;!function(n,t){const e=wt,r=It();for(;;)try{if(643432===parseInt(e(302))/1*(parseInt(e(321))/2)+-parseInt(e(308))/3*(parseInt(e(314))/4)+parseInt(e(309))/5*(-parseInt(e(343))/6)+parseInt(e(339))/7+parseInt(e(296))/8*(parseInt(e(319))/9)+parseInt(e(306))/10*(-parseInt(e(300))/11)+parseInt(e(311))/12*(parseInt(e(344))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[wt(350)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=wt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(329),"i"),r=Mt(n(322));t[n(337)](r+n(336))&&e.test(r+n(310))?Mt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[wt(350)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=wt,t=function(){const n=wt;let t;try{t=Function(n(323)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(313),"warn",n(331),n(335),n(345),n(305),n(326)];for(let o=0;o<r[n(318)];o++){const t=xt[n(299)][n(312)][n(330)](xt),i=r[o],a=e[i]||t;t[n(316)]=xt[n(330)](xt),t[n(303)]=a[n(303)].bind(a),e[i]=t}}))();const bt=[_t(297),_t(348)];function It(){const n=["129tBYIIz","2155QRxYFA","input","12rNbufz","prototype","log","55756ErJQmF","fboResolution","__proto__","backside","length","167022qvomfF","setRenderTarget","32804lshtTW","init","return (function() ","gger","envMapIntensity","trace","value","time","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","info","stateObject","background","debu","error","chain","test","TresMeshTransmissionMaterial","4232578oPOpKs","render","material","backsideThickness","16422TkDsMd","14012518lQjABt","exception","while (true) {}","call","side","thickness","apply","counter","uuid","272nWdlnI","buffer","traverse","constructor","11IsssFg","index","61KDOHMD","toString","texture","table","8915780FdYnVb","MeshTransmissionMaterialClass"];return(It=function(){return n})()}function wt(n,t){const e=It();return(wt=function(n,t){return e[n-=295]})(n,t)}const St=tn({__name:_t(301),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=Y(),p=mt({width:u[e(315)],height:u[e(315)],isLoop:!1}),d=mt({width:u.fboResolution,height:u[e(315)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(327)]=function(n,t){const e=wt;let r;return n[e(298)]((n=>{const o=e;n.isMesh&&n[o(341)]&&n[o(341)].uuid===t&&(r=n)})),r}(i[n(327)],r[n(327)][n(295)])})),f((({elapsed:n})=>{const t=e;r[t(327)][t(328)]=n,r[t(327)].buffer===d[t(327)][t(304)]&&s[t(327)]&&(m=a[t(327)].toneMapping,h=i[t(327)][t(333)],v=r.value[t(325)],g=s[t(327)][t(341)][t(348)],s.value.material=l,u[t(317)]&&(a[t(327)][t(320)](p[t(327)]),a[t(327)][t(340)](i[t(327)],c[t(327)]),s.value.material=r[t(327)],s[t(327)][t(341)][t(349)]=u[t(342)],s[t(327)][t(341)].buffer=p[t(327)][t(304)],s[t(327)][t(341)][t(348)]=E,s.value[t(341)][t(325)]=0),a.value[t(320)](d[t(327)]),a.value.render(i[t(327)],c[t(327)]),s[t(327)][t(341)][t(297)]=d[t(327)].texture,s[t(327)][t(341)]=r[t(327)],s[t(327)][t(341)][t(349)]=u[t(349)],s[t(327)].material[t(348)]=g,s[t(327)][t(341)][t(325)]=v,i[t(327)].background=h,a.value[t(320)](null),a.value.toneMapping=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn(o(338),{ref_key:o(307),ref:r,buffer:nn(d).texture,side:nn(x)},null,8,bt)}}});function Mt(n){function t(n){const e=wt;if("string"==typeof n)return function(n){}.constructor(e(346))[e(350)](e(351));1!==(""+n/n)[e(318)]||n%20==0?function(){return!0}.constructor(e(334)+e(324))[e(347)]("action"):function(){return!1}[e(299)](e(334)+e(324))[e(350)](e(332)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=Dt;!function(n,t){const e=Dt,r=Tt();for(;;)try{if(870645===parseInt(e(381))/1+-parseInt(e(350))/2+-parseInt(e(351))/3*(parseInt(e(354))/4)+-parseInt(e(333))/5+-parseInt(e(369))/6*(-parseInt(e(378))/7)+parseInt(e(339))/8*(parseInt(e(353))/9)+parseInt(e(368))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(356)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rt(this,(function(){const n=Dt,t=new RegExp(n(340)),e=new RegExp(n(352),"i"),r=Pt(n(370));t[n(321)](r+n(372))&&e[n(321)](r+n(376))?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["bottom","apply","toString","default","string","disableX","console","debu","bind","action",'{}.constructor("return this")( )',"while (true) {}","inner","32642310CCufKa","1150944ZRWkMU","init","constructor","chain","error","table","identity","input","disable","21nlDlkI","position","__proto__","1231119odUqdf","precise","test","right","value","back","stateObject","info","min","gger","set","getBoundingSphere","disableY","setFromObject","8401950scElDh","gref","outer","log","return (function() ","getCenter","248OtuPeM","function *\\( *\\)","max","length","exception","warn","trace","left","$slots","TresGroup","index","2822068rXKSiB","4776036ebcXqR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","140301slIvHZ","4moKbgS"];return(Tt=function(){return n})()}function Dt(n,t){const e=Tt();return(Dt=function(n,t){return e[n-=320]})(n,t)}At(void 0,(function(){const n=Dt;let t;try{t=Function(n(337)+n(365)+");")()}catch(o){t=window}const e=t[n(361)]=t.console||{},r=[n(336),n(344),n(326),n(373),n(343),n(374),n(345)];for(let i=0;i<r.length;i++){const t=At[n(371)].prototype[n(363)](At),o=r[i],a=e[o]||t;t[n(380)]=At[n(363)](At),t.toString=a[n(357)].bind(a),e[o]=t}}))();const zt=tn({__name:Et(349),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=Dt;if(!r[n(323)])return;if(!o[n(323)])return;r.value.matrixWorld[n(375)]();const e=(new R)[n(332)](o.value,t[n(320)]),i=new A,a=new T,c=e[n(341)].x-e[n(327)].x,s=e.max.y-e[n(327)].y,u=e[n(341)].z-e[n(327)].z;e[n(338)](i),e[n(330)](a);const l=t.top?s/2:t[n(355)]?-s/2:0,f=t[n(346)]?-c/2:t[n(322)]?c/2:0,p=t.front?u/2:t[n(324)]?-u/2:0;r[n(323)][n(379)][n(329)](t[n(377)]||t[n(360)]?0:-i.x+f,t.disable||t[n(331)]?0:-i.y+l,t[n(377)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Dt;return an(),cn(i(348),{ref_key:i(334),ref:e},[hn(i(348),{ref_key:i(335),ref:r},[hn("TresGroup",{ref_key:i(367),ref:o},[sn(n[i(347)],i(358))],512)],512)],512)}}});function Pt(n){function t(n){const e=Dt;if(typeof n===e(359))return function(n){}[e(371)](e(366))[e(356)]("counter");1!==(""+n/n)[e(342)]||n%20==0?function(){return!0}.constructor(e(362)+e(328)).call(e(364)):function(){return!1}.constructor(e(362)+e(328))[e(356)](e(325)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=jt;!function(n,t){const e=jt,r=Lt();for(;;)try{if(400987===-parseInt(e(192))/1*(-parseInt(e(140))/2)+parseInt(e(141))/3*(-parseInt(e(199))/4)+parseInt(e(146))/5+parseInt(e(178))/6+parseInt(e(148))/7+-parseInt(e(189))/8+parseInt(e(149))/9*(parseInt(e(170))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(167)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=jt,t=new RegExp(n(191)),e=new RegExp(n(160),"i"),r=Nt("init");t[n(174)](r+n(150))&&e[n(174)](r+n(190))?Nt():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(167)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ot(void 0,(function(){const n=jt,t=function(){const n=jt;let t;try{t=Function(n(197)+n(172)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(183)]||{},r=[n(165),n(195),n(188),"error",n(181),n(163),n(155)];for(let o=0;o<r[n(193)];o++){const t=Ot[n(175)][n(151)][n(173)](Ot),i=r[o],a=e[i]||t;t.__proto__=Ot.bind(Ot),t[n(169)]=a[n(169)][n(173)](a),e[i]=t}}))();const kt=["object"],Bt=[Ct(182)];function jt(n,t){const e=Lt();return(jt=function(n,t){return e[n-=140]})(n,t)}const Ut=tn({__name:"index",props:{color:{default:Ct(186)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=$(),o=Mn(r[t(176)],{frames:1/0,resolution:e[t(194)],worldRadius:e[t(179)]});o.params[t(196)]=!0;const i=_n(null);Q(i,(n=>{const e=t;n&&o[e(159)][e(168)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(162)]()})),fn((()=>{const n=t;e[n(185)]&&o[n(157)][n(185)][n(144)](e[n(185)]),e.ior&&(o[n(157)].ior=e[n(161)]),e.backsideIOR&&(o.params[n(152)]=e[n(152)]),e[n(156)]&&(o[n(157)][n(156)]=e[n(156)]),e.worldRadius&&(o[n(157)][n(179)]=e[n(179)]),e[n(164)]&&(o.params[n(164)]=e[n(164)])})),Q((()=>e[t(158)]),(n=>{const e=t;o[e(157)][e(158)]=n})),Q((()=>e[t(187)]),(n=>{const e=t;n&&o[e(157)].lightSource instanceof D[e(154)]&&o.params[e(187)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(184),{ref_key:r(166),ref:i},[sn(n.$slots,r(143))],512),hn(r(142),{object:nn(o)[r(166)],position:[0,.003,0]},null,8,kt),hn(r(142),{object:nn(o)[r(145)],visible:!1},null,8,Bt)],64)}}});function Nt(n){function t(n){const e=jt;if("string"==typeof n)return function(n){}[e(175)](e(147))[e(167)](e(177));1!==(""+n/n).length||n%20==0?function(){return!0}[e(175)](e(171)+e(180))[e(198)]("action"):function(){return!1}[e(175)]("debu"+e(180))[e(167)](e(153)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Lt(){const n=["Vector3","trace","far","params","causticsOnly","scene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ior","update","table","intensity","log","group","apply","add","toString","2274530oGYpXX","debu",'{}.constructor("return this")( )',"bind","test","constructor","value","counter","1968828cYWECJ","worldRadius","gger","exception","object","console","TresGroup","color","#ffffff","lightSource","info","5608912xEEqNP","input","function *\\( *\\)","7gUMcVm","length","resolution","warn","backside","return (function() ","call","862908ytPcsb","80778yCIyDN","9TVgCiR","primitive","default","set","helper","3045840OmpWKm","while (true) {}","2112600PXYVfv","9NXHSkO","chain","prototype","backsideIOR","stateObject"];return(Lt=function(){return n})()}!function(n,t){const e=Wt,r=Gt();for(;;)try{if(177517===-parseInt(e(228))/1*(-parseInt(e(234))/2)+-parseInt(e(215))/3*(parseInt(e(226))/4)+-parseInt(e(249))/5*(-parseInt(e(199))/6)+parseInt(e(241))/7+parseInt(e(212))/8*(-parseInt(e(246))/9)+-parseInt(e(245))/10+-parseInt(e(253))/11*(-parseInt(e(240))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(201)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ht(this,(function(){const n=Wt,t=new RegExp(n(232)),e=new RegExp(n(242),"i"),r=Vt(n(220));t.test(r+"chain")&&e[n(217)](r+n(219))?Vt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(201)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","2291817qzxaKB","info","isArray","remove","trace","exception","shadowmap_pars_fragment","222zLzLjw","return (function() ","apply","debu","action",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","console","traverse","prototype","forEach","warn","gger","string","56016edFyAS","#ifdef USE_SHADOWMAP","table","308283uYOnuv","stateObject","test",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","input","init","bind","dispose",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","constructor","material","12kSJqCe","; i++) {\n        vogelSample = vogelDiskSample(j, ","3403KuPbfC",'{}.constructor("return this")( )',"while (true) {}","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","function *\\( *\\)","compile","206lXYbfE","toString","length","ShaderChunk","replace","properties","12jKfXFZ","343756xrQUFT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","1251590jFrISn","261hPOwuw",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","27845Foxmos","counter","__proto__"];return(Gt=function(){return n})()}function Wt(n,t){const e=Gt();return(Wt=function(n,t){return e[n-=198]})(n,t)}Zt(void 0,(function(){const n=Wt;let t;try{t=Function(n(200)+n(229)+");")()}catch(o){t=window}const e=t.console=t[n(205)]||{},r=[n(243),n(209),n(254),"error",n(258),n(214),n(257)];for(let i=0;i<r[n(236)];i++){const t=Zt[n(224)][n(207)][n(221)](Zt),o=r[i],a=e[o]||t;t[n(251)]=Zt[n(221)](Zt),t.toString=a[n(235)][n(221)](a),e[o]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=D[r(237)].shadowmap_pars_fragment;return D[r(237)][r(198)]=D[r(237)].shadowmap_pars_fragment[r(238)](r(213),r(248)+t+r(244)+n+r(247)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(204)+e+r(227)+e+r(218)+t+r(252)+e+r(223))[r(238)]("#if defined( SHADOWMAP_TYPE_PCF )",r(231)),(n,t,e)=>{z[r(198)]=o,function(n,t,e){const r=Wt;t[r(206)]((t=>{const e=r;t[e(225)]&&(Array[e(255)](t[e(225)])?t[e(225)][e(208)]((t=>{n.properties.remove(t),t.dispose()})):(n[e(239)][e(256)](t[e(225)]),t[e(225)][e(222)]()))})),n[r(254)].programs[r(236)]=0,n[r(233)](t,e)}(n,t,e)}};function Vt(n){function t(n){const e=Wt;if(typeof n===e(211))return function(n){}[e(224)](e(230))[e(201)](e(250));1!==(""+n/n)[e(236)]||n%20==0?function(){return!0}[e(224)](e(202)+"gger").call(e(203)):function(){return!1}[e(224)]("debu"+e(210))[e(201)](e(216)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=Xt;!function(n,t){const e=Xt,r=qt();for(;;)try{if(477530===parseInt(e(388))/1+-parseInt(e(401))/2+-parseInt(e(374))/3+-parseInt(e(382))/4+parseInt(e(369))/5+-parseInt(e(384))/6+parseInt(e(400))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(366)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","264238RvFVsC","gger","trace","bind","counter","prototype","toString","info","index",'{}.constructor("return this")( )',"string","stateObject","8907591EtMAxC","746700NCcCTT","console","while (true) {}","apply","length","debu","1440110QWFsZo","constructor","exception","__proto__","input","293649lWOJOM","warn","value","error","chain","call","function *\\( *\\)","action","2998176AGUKGL","log","758796nTQSQs","test"];return(qt=function(){return n})()}function Xt(n,t){const e=qt();return(Xt=function(n,t){return e[n-=366]})(n,t)}!function(){Kt(this,(function(){const n=Xt,t=new RegExp(n(380)),e=new RegExp(n(386),"i"),r=ne("init");t.test(r+n(378))&&e[n(385)](r+n(373))?ne():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(366)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Qt(void 0,(function(){const n=Xt,t=function(){const n=Xt;let t;try{t=Function("return (function() "+n(397)+");")()}catch(e){t=window}return t}(),e=t[n(402)]=t[n(402)]||{},r=[n(383),n(375),n(395),n(377),n(371),"table",n(390)];for(let o=0;o<r[n(367)];o++){const t=Qt[n(370)][n(393)][n(391)](Qt),i=r[o],a=e[i]||t;t[n(372)]=Qt[n(391)](Qt),t.toString=a[n(394)][n(391)](a),e[i]=t}}))();const Jt=tn({__name:Yt(396),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(376)],o[t(376)],e[t(376)]),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o[t(376)].traverse((n=>{const e=t;n instanceof l&&n.material[e(387)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Xt;if(typeof n===e(398))return function(n){}[e(370)](e(403))[e(366)](e(392));1!==(""+n/n)[e(367)]||n%20==0?function(){return!0}[e(370)](e(368)+e(389))[e(379)](e(381)):function(){return!1}[e(370)](e(368)+"gger")[e(366)](e(399)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=re;!function(n,t){const e=re,r=ae();for(;;)try{if(169700===parseInt(e(335))/1*(parseInt(e(292))/2)+-parseInt(e(321))/3*(parseInt(e(301))/4)+-parseInt(e(317))/5*(-parseInt(e(336))/6)+-parseInt(e(329))/7*(parseInt(e(324))/8)+-parseInt(e(331))/9*(parseInt(e(295))/10)+-parseInt(e(310))/11+parseInt(e(302))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(n,t){const e=ae();return(re=function(n,t){return e[n-=286]})(n,t)}!function(){ee(this,(function(){const n=re,t=new RegExp(n(316)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=se(n(337));t.test(r+n(286))&&e.test(r+"input")?se():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=re,t=function(){const n=re;let t;try{t=Function(n(306)+n(326)+");")()}catch(e){t=window}return t}(),e=t[n(287)]=t[n(287)]||{},r=["log",n(328),n(298),n(315),n(311),n(294),n(305)];for(let o=0;o<r[n(300)];o++){const t=oe[n(318)][n(303)][n(322)](oe),i=r[o],a=e[i]||t;t[n(297)]=oe[n(322)](oe),t[n(312)]=a[n(312)].bind(a),e[i]=t}}))();const ie=parseInt(k.replace(/\D+/g,""));function ae(){const n=["halfTexelSize","44214zYjyko","bind","stateObject","3288DXzUrD","string",'{}.constructor("return this")( )',"apply","warn","5516lmqPeB","resolution","27FdlHhs","while (true) {}","setResolution","set","3812FQQKyv","78NvMarn","init","chain","console","copy","gger",">\n        }","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","136xqqvQi","colorspace_fragment","table","924790IpkxIr","value","__proto__","info","toneMapped","length","4hgqaIj","4523136QTvDsX","prototype","counter","trace","return (function() ","uniforms","setTexelSize","encodings_fragment","982608rqzfFs","exception","toString","texelSize","action","error","function *\\( *\\)","91895rBKVoF","constructor","call"];return(ae=function(){return n})()}class ce extends P{constructor(n=new F){const t=re;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new F),texelSize:new C(new F),halfTexelSize:new C(new F),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(291)+t(ie>=154?293:309)+t(290),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:O,depthWrite:!1,depthTest:!1}),this[t(299)]=!1,this[t(308)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[te(308)](n,t){const e=te;this[e(307)][e(313)][e(296)][e(334)](n,t),this[e(307)][e(320)][e(296)][e(334)](n,t).multiplyScalar(.5)}[te(333)](n){const t=te;this[t(307)][t(330)][t(296)][t(288)](n)}}function se(n){function t(n){const e=re;if(typeof n===e(325))return function(n){}[e(318)](e(332))[e(327)](e(304));1!==(""+n/n)[e(300)]||n%20==0?function(){return!0}.constructor("debu"+e(289))[e(319)](e(314)):function(){return!1}.constructor("debugger")[e(327)](e(323)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=pe,r=le();for(;;)try{if(329672===-parseInt(e(438))/1+-parseInt(e(407))/2*(-parseInt(e(409))/3)+-parseInt(e(412))/4*(-parseInt(e(439))/5)+parseInt(e(448))/6*(-parseInt(e(420))/7)+parseInt(e(421))/8+-parseInt(e(414))/9+parseInt(e(429))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["value","error","setResolution","screen","return (function() ","debu","8651890jzmWQq","counter","console","table",'{}.constructor("return this")( )',"info","log","camera","setTexelSize","437449JNxewj","1622105fKcvBA","renderToScreen","setRenderTarget","minDepthThreshold","toString","maxDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uniforms","apply","7764NTBtiB","texture","depthScale","function *\\( *\\)","render","renderTargetB","test","add","clone","input","constructor","exception","gger","depthToBlurRatioBias","init","setAttribute","kernel","length","position","string","298ypwxDn","defines","1419UEKVWr","bind","inputBuffer","4wfCnIF","USE_DEPTH","2539089yerDsO","renderTargetA","warn","scene","while (true) {}","convolutionMaterial","1274wikFYA","197304xDFbDX","action"];return(le=function(){return n})()}!function(){ue(this,(function(){const n=pe,t=new RegExp(n(451)),e=new RegExp(n(445),"i"),r=he(n(401));t[n(454)](r+"chain")&&e[n(454)](r+n(396))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(n,t){const e=le();return(pe=function(n,t){return e[n-=394]})(n,t)}fe(void 0,(function(){const n=pe;let t;try{t=Function(n(427)+n(433)+");")()}catch(o){t=window}const e=t[n(431)]=t[n(431)]||{},r=[n(435),n(416),n(434),n(424),n(398),n(432),"trace"];for(let i=0;i<r[n(404)];i++){const t=fe[n(397)].prototype.bind(fe),o=r[i],a=e[o]||t;t.__proto__=fe[n(410)](fe),t.toString=a[n(443)].bind(a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this.renderToScreen=!1,this[c(415)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(453)]=this[c(415)][c(395)](),this[c(419)]=new ce,this.convolutionMaterial[c(437)](1/t,1/e),this[c(419)][c(425)](new F(t,e)),this.scene=new u,this[c(436)]=new B,this[c(419)].uniforms[c(442)][c(423)]=r,this[c(419)][c(446)][c(444)][c(423)]=o,this[c(419)][c(446)][c(450)][c(423)]=i,this[c(419)][c(446)][c(400)][c(423)]=a,this[c(419)][c(408)][c(413)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(402)](c(405),new U(s,3)),p[c(402)]("uv",new U(f,2)),this[c(426)]=new l(p,this.convolutionMaterial),this.screen.frustumCulled=!1,this[c(417)][c(394)](this.screen)}render(n,t,e){const r=pe,o=this[r(417)],i=this.camera,a=this[r(415)],c=this[r(453)],s=this[r(419)],u=s[r(446)];u.depthBuffer.value=t.depthTexture;const l=s[r(403)];let f,p,d,h=t;for(p=0,d=l[r(404)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(423)]=l[p],u[r(411)][r(423)]=h[r(449)],n[r(441)](f),n.render(o,i),h=f;u.kernel[r(423)]=l[p],u[r(411)][r(423)]=h[r(449)],n[r(441)](this[r(440)]?null:e),n[r(452)](o,i)}}function he(n){function t(n){const e=pe;if(typeof n===e(406))return function(n){}[e(397)](e(418)).apply(e(430));1!==(""+n/n)[e(404)]||n%20==0?function(){return!0}[e(397)]("debu"+e(399)).call(e(422)):function(){return!1}.constructor(e(428)+e(399))[e(447)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=ye;!function(n,t){for(var e=ye,r=_e();;)try{if(511400===-parseInt(e(410))/1+parseInt(e(430))/2+parseInt(e(421))/3*(-parseInt(e(411))/4)+parseInt(e(371))/5*(parseInt(e(384))/6)+-parseInt(e(434))/7+parseInt(e(386))/8+parseInt(e(373))/9*(-parseInt(e(418))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(400)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=ye,t=new RegExp(n(383)),e=new RegExp(n(375),"i"),r=be("init");t.test(r+n(413))&&e.test(r+"input")?be():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(400)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(){var n=["setValues","info","_minDepthThreshold","toString","_depthScale","tDepth","string","428004LXoSFf","61816UjwgBA","log","chain","_blurStrength","fragmentShader","maxDepthThreshold","USE_UV","96170oLrsjk","mirror","bind","18IJUiDs","_hasBlur","textureMatrix","tDiffuse","depthScale","_tDiffuse","mixStrength","hasBlur","depthToBlurRatioBias","2017036ONVIiL","minDepthThreshold","trace","_depthToBlurRatioBias","2031771mxCyed","value","_mirror","distortion","_textureMatrix","#include <project_vertex>","return (function() ","uniforms","debu","vertexShader","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mixBlur","error","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","2010115ymQFDG","_mixContrast","657wALqdu","tDiffuseBlur","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","constructor","mixContrast","action","prototype","table","onBeforeCompile","function *\\( *\\)","6eHCioG","counter","4911048YqwCEy","_tDiffuseBlur","defines","mixBlur","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_distortionMap","while (true) {}","call","length","_distortion","distortionMap","warn","#include <emissivemap_fragment>","replace","apply","_tDepth","stateObject"];return(_e=function(){return n})()}function ye(n,t){var e=_e();return(ye=function(n,t){return e[n-=361]})(n,t)}ge(void 0,(function(){for(var n=ye,t=function(){var n,t=ye;try{n=Function(t(363)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=[n(412),n(397),n(404),n(369),n(376),n(381),n(432)],o=0;o<r.length;o++){var i=ge.constructor[n(380)][n(420)](ge),a=r[o],c=e[a]||i;i.__proto__=ge[n(420)](ge),i.toString=c[n(406)][n(420)](c),e[a]=i}}))();class xe extends N{constructor(n={}){var t=ye;super(n),this[t(401)]={value:null},this[t(391)]={value:null},this._tDiffuse={value:null},this[t(387)]={value:null},this[t(361)]={value:null},this[t(422)]={value:!1},this._mirror={value:0},this[t(368)]={value:0},this[t(414)]={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this[t(372)]={value:1},this[t(403)](n)}[ve(382)](n){var t,e=ve;!(null==(t=n[e(388)])?void 0:t.USE_UV)&&(n.defines[e(417)]=""),n[e(364)][e(428)]=this[e(422)],n[e(364)][e(424)]=this[e(426)],n[e(364)][e(408)]=this[e(401)],n[e(364)][e(396)]=this[e(391)],n.uniforms[e(374)]=this[e(387)],n[e(364)][e(423)]=this[e(361)],n[e(364)].mirror=this[e(436)],n[e(364)][e(389)]=this[e(368)],n[e(364)][e(427)]=this._blurStrength,n[e(364)].minDepthThreshold=this[e(405)],n[e(364)][e(416)]=this._maxDepthThreshold,n[e(364)][e(425)]=this[e(407)],n.uniforms[e(429)]=this._depthToBlurRatioBias,n.uniforms[e(437)]=this[e(395)],n[e(364)][e(378)]=this[e(372)],n[e(366)]=e(390)+n[e(366)],n.vertexShader=n[e(366)][e(399)](e(362),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader=e(370)+n[e(415)],n[e(415)]=n.fragmentShader.replace(e(398),e(367))}get[ve(424)](){return this[ve(426)].value}set[ve(424)](n){var t=ve;this[t(426)][t(435)]=n}get[ve(408)](){var n=ve;return this[n(401)][n(435)]}set tDepth(n){var t=ve;this._tDepth[t(435)]=n}get[ve(396)](){var n=ve;return this._distortionMap[n(435)]}set[ve(396)](n){var t=ve;this[t(391)][t(435)]=n}get[ve(374)](){var n=ve;return this[n(387)][n(435)]}set[ve(374)](n){var t=ve;this[t(387)][t(435)]=n}get[ve(423)](){return this[ve(361)].value}set[ve(423)](n){this[ve(361)].value=n}get hasBlur(){var n=ve;return this[n(422)][n(435)]}set[ve(428)](n){var t=ve;this[t(422)][t(435)]=n}get[ve(419)](){var n=ve;return this[n(436)][n(435)]}set[ve(419)](n){this[ve(436)].value=n}get mixBlur(){var n=ve;return this._mixBlur[n(435)]}set[ve(389)](n){this[ve(368)].value=n}get[ve(427)](){var n=ve;return this[n(414)][n(435)]}set[ve(427)](n){var t=ve;this[t(414)][t(435)]=n}get[ve(431)](){var n=ve;return this[n(405)][n(435)]}set[ve(431)](n){var t=ve;this[t(405)][t(435)]=n}get maxDepthThreshold(){return this._maxDepthThreshold.value}set[ve(416)](n){var t=ve;this._maxDepthThreshold[t(435)]=n}get[ve(425)](){return this[ve(407)].value}set[ve(425)](n){var t=ve;this[t(407)][t(435)]=n}get[ve(429)](){var n=ve;return this[n(433)][n(435)]}set[ve(429)](n){this[ve(433)].value=n}get[ve(437)](){var n=ve;return this[n(395)][n(435)]}set[ve(437)](n){var t=ve;this[t(395)][t(435)]=n}get[ve(378)](){return this[ve(372)].value}set[ve(378)](n){var t=ve;this[t(372)][t(435)]=n}}function be(n){function t(n){var e=ye;if(typeof n===e(409))return function(n){}[e(377)](e(392))[e(400)](e(385));1!==(""+n/n)[e(394)]||n%20==0?function(){return!0}.constructor(e(365)+"gger")[e(393)](e(379)):function(){return!1}.constructor(e(365)+"gger")[e(400)](e(402)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Se;!function(n,t){const e=Se,r=Ee();for(;;)try{if(133077===parseInt(e(504))/1+-parseInt(e(470))/2+-parseInt(e(460))/3*(-parseInt(e(539))/4)+parseInt(e(543))/5*(-parseInt(e(524))/6)+-parseInt(e(529))/7+-parseInt(e(548))/8+parseInt(e(489))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(508)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(n,t){const e=Ee();return(Se=function(n,t){return e[n-=453]})(n,t)}!function(){we(this,(function(){const n=Se,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(496),"i"),r=Te(n(454));t[n(521)](r+n(516))&&e[n(521)](r+"input")?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ee(){const n=["elements","init","autoUpdate",'{}.constructor("return this")( )',"depth-scale","bind","setRenderTarget","33DENTNu","position","defines-USE_DEPTH","multiply","applyMatrix4","enabled","far","__proto__","projectionMatrix","matrixWorld","18772wffJcy","visible","constructor","stateObject","error","setFromMatrixPosition","string","shadowMap","debu","cameraWorldPosition","reflectorWorldPosition","warn","rotationMatrix","assign","matrixWorldInverse","mix-strength","info","multiplyScalar","dot","1369737bPTBXs","min-depth-threshold","uuid","number","defines-USE_BLUR","reflectorOffset","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subVectors","mix-contrast","has-blur","negate","textureMatrix","material","add","153075skQdjp","materialRef","t-diffuse","texture","apply","length","exception","normal","depthTexture","log","addScaledVector","set","chain","isMesh","dispose","key","view","test","trace","max-depth-threshold","24714nHPUHP","prototype","sign","reflect","render","1402590tixidN","mirror","reflectorPlane","virtualCamera","call","distortion","target","clipPlane","copy","extractRotation","28652IhyFAY","return (function() ","console","toString","35zdiHSP","lookAtPosition","distortionMap","depth-to-blur-ratio-bias","texture-matrix","99160GzMJZw","counter","updateMatrixWorld","index","value","defines-USE_DISTORTION"];return(Ee=function(){return n})()}Me(void 0,(function(){const n=Se,t=function(){const n=Se;let t;try{t=Function(n(540)+n(456)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(541)]||{},r=[n(513),n(481),n(486),n(474),n(510),"table",n(522)];for(let o=0;o<r[n(509)];o++){const t=Me.constructor[n(525)][n(458)](Me),i=r[o],a=e[i]||t;t[n(467)]=Me[n(458)](Me),t[n(542)]=a[n(542)][n(458)](a),e[i]=t}}))();const Re=[Ie(547),Ie(530),Ie(506),"t-depth","t-diffuse-blur",Ie(499),Ie(485),Ie(490),Ie(523),Ie(457),Ie(546),Ie(534),Ie(545),Ie(498),Ie(493),"defines-USE_DEPTH",Ie(553)],Ae=tn({__name:Ie(551),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=q(o),{camera:y,scene:x,renderer:E,extend:R}=$();R({MeshReflectorMaterial:xe});const T=_n(),D=_n(),z=_n(),P=_n(),C=J((()=>{const n=Se;return typeof f[n(552)]===n(492)?[f[n(552)],f[n(552)]]:f[n(552)]})),F=J((()=>C[r(552)][0]>0||C[r(552)][1]>0)),O={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(552)])||n.texture[o(518)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(552)]=new b(i.value,i[o(552)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(552)],i.value,S,M)},t(y,e(x)))),D[o(552)]=new b(i[o(552)],i[o(552)],f),z.value=new de({resolution:i[o(552)],width:C[o(552)][0],height:C.value[1],minDepthThreshold:a[o(552)],maxDepthThreshold:s[o(552)],depthScale:u[o(552)],depthToBlurRatioBias:l[o(552)]}),P[o(552)]={mirror:p,textureMatrix:O[o(501)],mixBlur:d,tDiffuse:T.value[o(507)],tDepth:T[o(552)][o(512)],tDiffuseBlur:T.value.texture,hasBlur:F,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(552)],mixContrast:_,"defines-USE_BLUR":F[o(552)]?"":void 0,"defines-USE_DEPTH":u[o(552)]>0?"":void 0,"defines-USE_DISTORTION":g[o(552)]?"":void 0}}));const k=_n(),{onLoop:B}=Y();B((()=>{var n;const t=r;if(!(k[t(552)]&&E[t(552)]&&T[t(552)]&&y.value))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Se;n[r(517)]&&n.material&&n[r(502)][r(491)]===t&&(e=n)})),e}(x.value,k[t(552)][t(491)]);if(!e)return;e[t(471)]=!1;const i=E[t(552)].xr[t(465)],a=E[t(552)][t(477)][t(455)];(function(n){var t,e;const r=Se;if(O[r(480)][r(475)](n[r(469)]),O[r(479)][r(475)](null==(t=y.value)?void 0:t[r(469)]),O[r(482)].extractRotation(n.matrixWorld),O.normal[r(515)](0,0,1),O[r(511)].applyMatrix4(O[r(482)]),O[r(480)][r(514)](O.normal,o[r(494)]),O[r(520)][r(497)](O[r(480)],O.cameraWorldPosition),O[r(520)][r(488)](O[r(511)])>0)return;O[r(520)][r(527)](O[r(511)])[r(500)](),O.view[r(503)](O[r(480)]),O.rotationMatrix[r(538)](null==(e=y[r(552)])?void 0:e[r(469)]),O[r(544)].set(0,0,-1),O.lookAtPosition[r(464)](O.rotationMatrix),O[r(544)][r(503)](O.cameraWorldPosition),O[r(535)][r(497)](O.reflectorWorldPosition,O[r(544)]),O[r(535)][r(527)](O[r(511)]).negate(),O[r(535)][r(503)](O[r(480)]),O[r(532)][r(461)][r(537)](O[r(520)]),O[r(532)].up[r(515)](0,1,0),O[r(532)].up.applyMatrix4(O[r(482)]),O[r(532)].up.reflect(O.normal),O[r(532)].lookAt(O[r(535)]),O[r(532)][r(466)]=(null==y?void 0:y[r(552)])[r(466)],O[r(532)][r(550)](),O[r(532)][r(468)].copy((null==y?void 0:y[r(552)])[r(468)]),O[r(501)][r(515)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(501)][r(463)](O[r(532)].projectionMatrix),O[r(501)][r(463)](O.virtualCamera[r(484)]),O[r(501)][r(463)](n[r(469)]),O[r(531)].setFromNormalAndCoplanarPoint(O.normal,O.reflectorWorldPosition),O.reflectorPlane[r(464)](O.virtualCamera[r(484)]),O[r(536)][r(515)](O.reflectorPlane[r(511)].x,O.reflectorPlane[r(511)].y,O[r(531)][r(511)].z,O[r(531)].constant);const i=O[r(532)][r(468)];O.q.x=(Math[r(526)](O[r(536)].x)+i[r(453)][8])/i[r(453)][0],O.q.y=(Math[r(526)](O[r(536)].y)+i[r(453)][9])/i[r(453)][5],O.q.z=-1,O.q.w=(1+i[r(453)][10])/i[r(453)][14],O[r(536)][r(487)](2/O[r(536)][r(488)](O.q)),i[r(453)][2]=O[r(536)].x,i.elements[6]=O[r(536)].y,i[r(453)][10]=O[r(536)].z+1,i.elements[14]=O[r(536)].w})(e),E[t(552)][t(477)].autoUpdate=!1,E[t(552)][t(459)](T[t(552)]),E[t(552)].autoClear||E[t(552)].clear(),E[t(552)][t(528)](x[t(552)],O[t(532)]),null==(n=null==z?void 0:z[t(552)])||n[t(528)](E[t(552)],T[t(552)],D[t(552)]),E[t(552)].xr[t(465)]=i,E[t(552)][t(477)][t(455)]=a,e.visible=!0,E[t(552)][t(459)](null)}));const j=bn(),U=J((()=>{const n=r,t={};return Object[n(483)](t,o),Object[n(483)](t,j[n(552)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(552)])||n[e(518)](),null==(t=null==D?void 0:D.value)||t[e(518)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn("TresMeshReflectorMaterial",In({key:c(519)+P[c(552)][c(493)]+P[c(552)][c(462)]+P[c(552)]["defines-USE_DISTORTION"],ref_key:c(505),ref:k},U[c(552)],{"texture-matrix":O[c(501)],mirror:nn(p),"t-diffuse":null==(e=T[c(552)])?void 0:e[c(507)],"t-depth":null==(o=T.value)?void 0:o[c(512)],"t-diffuse-blur":null==(i=D[c(552)])?void 0:i[c(507)],"has-blur":F[c(552)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":F[c(552)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Re)}}});function Te(n){function t(n){const e=Se;if(typeof n===e(476))return function(n){}[e(472)]("while (true) {}")[e(508)](e(549));1!==(""+n/n)[e(509)]||n%20==0?function(){return!0}[e(472)](e(478)+"gger")[e(533)](e(495)):function(){return!1}.constructor(e(478)+"gger")[e(508)](e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(){const n=["bind","action","exception","counter","200FGjznp","gger","4612ftTuaN","console","string","trace","169014mNwldT","571038wTTYGv","table","log","3165525weQvhf","apply","call","return (function() ","texture","toString","warn","while (true) {}","prototype","constructor","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","fog","420489IPyaog","1172VdpJqg","init","chain","dispose","info","length","background","552153XbjCcT","value","8hfnNHw","10jcoBAG","test","type","stateObject","308EHgbRd","input"];return(De=function(){return n})()}!function(n,t){const e=Pe,r=De();for(;;)try{if(122502===parseInt(e(341))/1*(parseInt(e(311))/2)+parseInt(e(323))/3+-parseInt(e(319))/4*(-parseInt(e(317))/5)+parseInt(e(324))/6+parseInt(e(304))/7+parseInt(e(306))/8*(-parseInt(e(340))/9)+-parseInt(e(307))/10*(parseInt(e(327))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(328)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=De();return(Pe=function(n,t){return e[n-=303]})(n,t)}!function(){ze(this,(function(){const n=Pe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(338),"i"),r=Fe(n(342));t[n(308)](r+n(343))&&e.test(r+n(312))?Fe():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(328)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(n){function t(n){const e=Pe;if(typeof n===e(321))return function(n){}[e(336)](e(334)).apply(e(316));1!==(""+n/n)[e(346)]||n%20==0?function(){return!0}[e(336)]("debu"+e(318))[e(329)](e(314)):function(){return!1}[e(336)]("debu"+e(318))[e(328)](e(310)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Oe(){const n=["resolution","input","5601712jeBinD","log","frames","init","string","stateObject","default","3435588NegKxl","13705PhkeTY","bind","44Hjivcu","2cwgmod","counter","chain",'{}.constructor("return this")( )',"5824614sbgzdt","TresGroup","table","return (function() ","far","function *\\( *\\)","error","2226585LLWswx","debu","1503dslgFx","fog","10560KwRRTs","while (true) {}","132WDfvOz","warn","near","constructor","gger","action","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rgRef","apply","index","object","777081BIleNZ","info","visible","texture","7qHELil","exception","console","trace","toString","value","test","call"];return(Oe=function(){return n})()}Ce(void 0,(function(){const n=Pe;let t;try{t=Function(n(330)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(320)]=t[n(320)]||{},r=[n(326),n(333),n(345),"error",n(315),n(325),n(322)];for(let i=0;i<r[n(346)];i++){const t=Ce[n(336)][n(335)][n(313)](Ce),o=r[i],a=e[o]||t;t[n(337)]=Ce[n(313)](Ce),t[n(332)]=a[n(332)][n(313)](a),e[o]=t}}))();const ke=Ne;!function(n,t){const e=Ne,r=Oe();for(;;)try{if(757706===-parseInt(e(186))/1+-parseInt(e(211))/2*(-parseInt(e(168))/3)+parseInt(e(174))/4*(parseInt(e(208))/5)+parseInt(e(215))/6+parseInt(e(190))/7*(parseInt(e(200))/8)+parseInt(e(170))/9*(parseInt(e(172))/10)+-parseInt(e(210))/11*(parseInt(e(207))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Ne,t=new RegExp(n(220)),e=new RegExp(n(181),"i"),r=He(n(203));t.test(r+n(213))&&e[n(196)](r+n(199))?He():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Ne,t=function(){const n=Ne;let t;try{t=Function(n(218)+n(214)+");")()}catch(e){t=window}return t}(),e=t[n(192)]=t[n(192)]||{},r=[n(201),n(175),n(187),n(167),n(191),n(217),n(193)];for(let o=0;o<r.length;o++){const t=je[n(177)].prototype.bind(je),i=r[o],a=e[i]||t;t[n(180)]=je[n(209)](je),t.toString=a[n(194)][n(209)](a),e[i]=t}}))();const Ue=[ke(185)];function Ne(n,t){const e=Oe();return(Ne=function(n,t){return e[n-=167]})(n,t)}const Le=tn({__name:ke(184),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return Q((()=>s),(n=>{var t;const e=Pe;null==(t=c.value)||t[e(344)](),c[e(305)]=new v(n[e(305)]),c[e(305)][e(331)][e(309)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{e&&(f[Pe(305)]=new m(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Pe;null==(n=c[t(305)])||n[t(344)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a[t(305)][t(339)],d=a.value[t(303)],a[t(305)][t(303)]=r||d,a.value[t(339)]=o||p,null==(n=f[t(305)])||n.update(i.value,a[t(305)]),a[t(305)][t(339)]=p,a.value[t(303)]=d}}}({resolution:o[r(198)],near:o[r(176)],far:o[r(219)],envMap:o.envMap,fog:o[r(171)]}),{onBeforeLoop:s}=Y();let u=0;const l=X(null);return s((()=>{const n=r;l[n(195)]&&(o[n(202)]===1/0||u<o[n(202)])&&(l[n(195)][n(188)]=!1,c(),l.value.visible=!0,u++)})),t({texture:null==(e=i[r(195)])?void 0:e[r(189)]}),(n,t)=>{const e=r;return an(),cn(e(216),null,[hn("primitive",{object:nn(a)},null,8,Ue),hn(e(216),{ref_key:e(182),ref:l},[sn(n.$slots,e(206))],512)])}}});function He(n){function t(n){const e=Ne;if(typeof n===e(204))return function(n){}[e(177)](e(173))[e(183)](e(212));1!==(""+n/n).length||n%20==0?function(){return!0}[e(177)](e(169)+"gger")[e(197)](e(179)):function(){return!1}[e(177)](e(169)+e(178))[e(183)](e(205)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=$e();for(;;)try{if(249160===-parseInt(e(390))/1+parseInt(e(389))/2+parseInt(e(360))/3+-parseInt(e(359))/4+-parseInt(e(356))/5*(parseInt(e(366))/6)+-parseInt(e(371))/7*(parseInt(e(372))/8)+parseInt(e(393))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=$e();return(Ge=function(n,t){return e[n-=353]})(n,t)}!function(){Ze(this,(function(){const n=Ge,t=new RegExp(n(379)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ye(n(383));t.test(r+n(355))&&e.test(r+"input")?Ye():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(){const n=["generateUUID","info","function *\\( *\\)","key","length","call","init","defineProperty","uniforms","debu","while (true) {}","return (function() ","809880QfAHbZ","345412aPpCNc","apply","entries","7207938udDGvo","__proto__","console","error","bind","UniformsUtils","chain","5bHLfxA","MathUtils","ShaderMaterial","1865088GQKLvG","814596svMdeG","constructor","value","toString","assign","gger","913476wbzLLk","trace","exception","table","counter","11011bZUhvl","1344Hqlfih","clone","stateObject","action","log"];return($e=function(){return n})()}function Ve(n,t,e,r){const o=Ge,i=class extends D[o(358)]{constructor(i={}){const a=o,s=Object[a(392)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=a,o=D[r(354)][r(373)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(380)]="",s.forEach((([n])=>Object[a(384)](this,n,{get:()=>this[a(385)][n][a(362)],set:t=>this[a(385)][n][a(362)]=t}))),Object[a(364)](this,i),r&&r(this)}};return i.key=D[o(357)][o(377)](),i}function Ye(n){function t(n){const e=Ge;if("string"==typeof n)return function(n){}[e(361)](e(387))[e(391)](e(370));1!==(""+n/n)[e(381)]||n%20==0?function(){return!0}[e(361)](e(386)+e(365))[e(382)](e(375)):function(){return!1}[e(361)]("debu"+e(365))[e(391)](e(374)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ge,t=function(){const n=Ge;let t;try{t=Function(n(388)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(395)]=t[n(395)]||{},r=[n(376),"warn",n(378),n(396),n(368),n(369),n(367)];for(let o=0;o<r[n(381)];o++){const t=We.constructor.prototype[n(353)](We),i=r[o],a=e[i]||t;t[n(394)]=We[n(353)](We),t[n(363)]=a[n(363)].bind(a),e[i]=t}}))();var Ke=ir;!function(n,t){for(var e=ir,r=Xe();;)try{if(397219===-parseInt(e(338))/1+parseInt(e(434))/2*(-parseInt(e(307))/3)+parseInt(e(415))/4+-parseInt(e(289))/5+parseInt(e(403))/6+parseInt(e(273))/7+parseInt(e(328))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(315)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(){var n=["cacheHash","Set","generateUUID","defineProperties","csm_Normal","csm_Bump","ShaderChunk","length","next","\n            ","7960360soxizV","sham","find","\\$&","configurable","getOwnPropertyDescriptors","object","();\n              // #_CSM_#\n          ","MeshToonMaterial","construct","476469lDXnRc","position","return",'". Shader cannot compile.',"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","Super expression must either be null or a function","pointSize","value","Object","setPrototypeOf","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","getOwnPropertySymbols","csm_AO","normal","silent","toUpperCase","diffuse","#define IS_VERTEX;\n","init","getPrototypeOf","valueOf","clearcoatRoughness","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","fragColor","clearcoatNormal","indexOf","MeshPhongMaterial","csm_ClearcoatNormal","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","csm_ClearcoatRoughness","depthAlpha","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","MeshStandardMaterial","MeshMatcapMaterial","name","fragmentShader","MeshBasicMaterial",";\n    ","customProgramCacheKey","\n    gl_FragColor = ","error","uniforms","input","\n    vec3 totalEmissiveRadiance = ","table","console","csm_Metalness","csm_Position","\n    \n","MeshNormalMaterial","key","csm_PositionRaw","update","CustomShaderMaterial does not support RawShaderMaterial","trim","trace","roughness","void main() {","stateObject","type","symbol","emissive","instanceID","assign","575850PBHqEn","@@toPrimitive must return a primitive value.","includes","message","get","isArray","RawShaderMaterial","lastIndexOf","replace","_getPatchMapForMaterial","toPrimitive",", 1.0 );\n  ","1063796wVHPDJ","csm_DiffuseColor","return (function() ","forEach","__proto__","test",";\n  ","is not a constructor","substring","CSM: ","concat","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","string","__csm","filter","onBeforeCompile","writable","debu","\n    gl_Position = ","47128hOOgDU","bind","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","positionRaw","csm_FragColor","MeshPhysicalMaterial","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","call","#define IS_UNKNOWN;\n","#define IS_","\n    varying mat4 csm_internal_vModelViewMatrix;\n","csm_Roughness","Map","_patchShader","_getCacheHash",". Shader cannot compile.","patchMap","bump","prototype","constructor","default","split",'{}.constructor("return this")( )',"656320WgRtlW","\n    \n            ","cacheKey","ShaderMaterial","function","isAlreadyExtended","entries","clearcoat","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ",'CSM: Property "',"keys","MathUtils","toString","gger","action","log","2178285SaRcKl","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","from","push","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshLambertMaterial","baseMaterial","counter","csm_DepthAlpha","Arguments","enumerable","this hasn't been initialised - super() hasn't been called","propertyIsEnumerable","csm_main_","void main()","metalness"," - (dot(","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","18axolmZ","// #_CSM_#","while (true) {}","warn","defineProperty","undefined","vertexShader","\n    vec4 csm_internal_positionUnprojected = ","apply","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","getOwnPropertyDescriptor"];return(Xe=function(){return n})()}!function(){qe(this,(function(){var n=ir,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(293),"i"),r=Pr(n(357));t[n(420)](r+"chain")&&e.test(r+n(381))?Pr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(315)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=ir,e=function(n,t){var e=ir;if(typeof n!==e(334)||null===n)return n;var r=n[Symbol[e(413)]];if(void 0!==r){var o=r[e(257)](n,t||e(270));if(typeof o!==e(334))return o;throw new TypeError(e(404))}return(t===e(427)?String:Number)(n)}(n,t(427));return typeof e===t(399)?e:String(e)}function nr(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=ir,r=Object[e(283)](n);if(Object[e(350)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(429)]((function(t){var r=e;return Object[r(317)](n,t)[r(299)]}))),r.push[e(315)](r,o)}return r}function er(n){for(var t=ir,e=1;e<arguments[t(325)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(418)]((function(t){nr(n,t,r[t])})):Object[t(333)]?Object[t(321)](n,Object[t(333)](r)):tr(Object(r))[t(418)]((function(e){var o=t;Object[o(311)](n,e,Object[o(317)](r,e))}))}return n}function rr(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(325)];o++)r=a[o],t[e(364)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(350)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(325)];o++)r=a[o],t[e(364)](r)>=0||Object.prototype[e(301)][e(257)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=ir;(null==t||t>n[e(325)])&&(t=n[e(325)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){var e=Xe();return(ir=function(n,t){return e[n-=254]})(n,t)}function ar(n,t){return function(n){if(Array[ir(408)](n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(312)!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(257)](n))[e(326)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(257)](r)).done)&&(s[e(292)](o[e(346)]),s[e(325)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(340)]&&(c=r[e(340)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(427))return or(n,t);var r=Object[e(268)][e(285)][e(257)](n).slice(8,-1);return r===e(347)&&n[e(269)]&&(r=n[e(269)][e(373)]),r===e(262)||r===e(319)?Array[e(291)](n):r===e(298)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(ir(367))}()}function cr(n,t){for(var e=ir,r=0;r<t[e(325)];r++){var o=t[r];o[e(299)]=o[e(299)]||!1,o[e(332)]=!0,e(346)in o&&(o[e(431)]=!0),Object.defineProperty(n,Je(o[e(389)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(ir(300));return n}function ur(n,t){var e=ir;return(ur=Object[e(348)]?Object[e(348)][e(435)]():function(n,t){return n[e(419)]=t,n})(n,t)}function lr(n){var t=ir;return(lr=Object[t(348)]?Object[t(358)][t(435)]():function(n){var e=t;return n[e(419)]||Object[e(358)](n)})(n)}function fr(n){var t=function(){var n=ir;if("undefined"==typeof Reflect||!Reflect[n(337)])return!1;if(Reflect[n(337)][n(329)])return!1;if(typeof Proxy===n(277))return!0;try{return Boolean[n(268)][n(359)].call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=lr(n);if(t){var i=lr(this)[r(269)];e=Reflect[r(337)](o,arguments,i)}else e=o[r(315)](this,arguments);return function(n,t){if(t&&(typeof t===ir(334)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(n)}(this,e)}}Qe(void 0,(function(){var n,t=ir;try{n=Function(t(417)+t(272)+");")()}catch(s){n=window}for(var e=n[t(384)]=n[t(384)]||{},r=[t(288),t(310),"info",t(379),"exception",t(383),t(394)],o=0;o<r.length;o++){var i=Qe[t(269)][t(268)][t(435)](Qe),a=r[o],c=e[a]||i;i[t(419)]=Qe[t(435)](Qe),i.toString=c[t(285)][t(435)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Ke(416),normal:Ke(322),roughness:Ke(261),metalness:Ke(385),emissive:"csm_Emissive",ao:Ke(351),bump:Ke(323),clearcoat:"csm_Clearcoat",clearcoatRoughness:Ke(368),clearcoatNormal:Ke(366),pointSize:"csm_PointSize",fragColor:Ke(254),depthAlpha:Ke(297),position:Ke(386),positionRaw:Ke(390)},mr=(nr(pr={},""[Ke(425)](vr[Ke(339)]),"*"),nr(pr,""[Ke(425)](vr[Ke(437)]),"*"),nr(pr,""[Ke(425)](vr[Ke(352)]),"*"),nr(pr,"".concat(vr.pointSize),["PointsMaterial"]),nr(pr,""[Ke(425)](vr[Ke(355)]),"*"),nr(pr,""[Ke(425)](vr[Ke(362)]),"*"),nr(pr,""[Ke(425)](vr[Ke(400)]),[Ke(371),Ke(255)]),nr(pr,""[Ke(425)](vr[Ke(395)]),["MeshStandardMaterial",Ke(255)]),nr(pr,"".concat(vr[Ke(304)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),nr(pr,""[Ke(425)](vr.ao),["MeshStandardMaterial",Ke(255),Ke(375),Ke(294),Ke(365),Ke(336)]),nr(pr,"".concat(vr[Ke(267)]),[Ke(294),Ke(372),Ke(388),Ke(365),Ke(255),Ke(371),"MeshToonMaterial","ShadowMaterial"]),nr(pr,""[Ke(425)](vr.depthAlpha),["MeshDepthMaterial"]),nr(pr,""[Ke(425)](vr[Ke(280)]),["MeshPhysicalMaterial"]),nr(pr,""[Ke(425)](vr[Ke(360)]),[Ke(255)]),nr(pr,"".concat(vr[Ke(363)]),[Ke(255)]),pr),gr={"#include <lights_physical_fragment>":D[Ke(324)].lights_physical_fragment},_r=(nr(dr={},""[Ke(425)](vr[Ke(352)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[Ke(425)](vr[Ke(352)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),nr(dr,"".concat(vr[Ke(339)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[Ke(425)](vr[Ke(339)],";\n  ")}),nr(dr,""[Ke(425)](vr.positionRaw),{"#include <begin_vertex>":Ke(314)[Ke(425)](vr[Ke(437)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),nr(dr,"".concat(vr.pointSize),{"gl_PointSize = size;":"\n    gl_PointSize = "[Ke(425)](vr[Ke(345)],Ke(376))}),nr(dr,""[Ke(425)](vr[Ke(355)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Ke(425)](vr[Ke(355)],Ke(421))}),nr(dr,"".concat(vr[Ke(362)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(vr[Ke(362)],Ke(421))}),nr(dr,""[Ke(425)](vr[Ke(400)]),{"vec3 totalEmissiveRadiance = emissive;":Ke(382).concat(vr[Ke(400)],Ke(376))}),nr(dr,"".concat(vr[Ke(395)]),{"#include <roughnessmap_fragment>":Ke(290)[Ke(425)](vr.roughness,Ke(376))}),nr(dr,""[Ke(425)](vr[Ke(304)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = ".concat(vr[Ke(304)],Ke(376))}),nr(dr,"".concat(vr.ao),{"#include <aomap_fragment>":Ke(370)[Ke(425)](vr.ao,";\n    ")}),nr(dr,""[Ke(425)](vr[Ke(267)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ke(425)](vr[Ke(267)],Ke(305))[Ke(425)](vr[Ke(267)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),nr(dr,""[Ke(425)](vr[Ke(369)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(436)[Ke(425)](vr[Ke(369)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ke(256)[Ke(425)](vr[Ke(369)],Ke(376))}),nr(dr,"".concat(vr[Ke(280)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ke(425)](vr.clearcoat,";")}),nr(dr,""[Ke(425)](vr[Ke(360)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Ke(425)](vr[Ke(360)],";")}),nr(dr,""[Ke(425)](vr[Ke(363)]),{"#include <clearcoat_normal_fragment_begin>":Ke(343)}),dr),yr=(nr(hr={},""[Ke(425)](vr[Ke(339)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(342)[Ke(425)](vr[Ke(339)],Ke(414))}),nr(hr,""[Ke(425)](vr[Ke(437)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(433).concat(vr[Ke(339)],Ke(421))}),nr(hr,""[Ke(425)](vr[Ke(355)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(378)[Ke(425)](vr[Ke(355)],Ke(421))}),nr(hr,"".concat(vr[Ke(362)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ke(425)](vr[Ke(362)],Ke(421))}),hr),xr={clearcoat:[vr[Ke(280)],vr[Ke(363)],vr[Ke(360)]]},br=Ke(316),Ir=Ke(426),wr=Ke(260),Sr=Ke(306),Mr=Ke(387),Er=[Ke(295),Ke(374),Ke(313),Ke(380),Ke(266),Ke(275),Ke(353)],Rr=function(n,t,e){return n[Ke(271)](t).join(e)},Ar=function(n,t){var e,r,o=Ke;return new RegExp("\\b"[o(425)]((e=t,r=Ke,e[r(411)](/[-\/\\^$*+?.()|[\]{}]/g,r(331))),"\\b"))[o(420)](n)};function Tr(n){return n?n[Ke(411)](/\s/g,""):void 0}function Dr(n){return n[Ke(411)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Ke;!function(n,t){var e=ir;if(typeof t!==e(277)&&null!==t)throw new TypeError(e(344));n[e(268)]=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(311)](n,e(268),{writable:!1}),t&&ur(n,t)}(c,W);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(295)],l=n[s(374)],f=n[s(313)],p=n[s(380)],d=n.patchMap,h=n.cacheKey,v=n[s(353)],m=rr(n,Er);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e[t(406)][t(364)](t(422))>=0)return!1}return!0}(u)?(e=u,Object[s(402)](e,m)):e=new u(m),e[s(398)]===s(409))throw new Error(s(392));(function(n,t){var e=Ke;e(325),Object.assign(n,t);var r=Object[e(358)](t);Object.entries(Object[e(333)](r))[e(429)]((function(n){var t=e,r="function"==typeof n[1][t(407)],o="function"==typeof n[1].set,i=typeof n[1].value===t(277),a=n[0]===t(269);return(r||o||i)&&!a}))[e(418)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(311)](n,t[0],t[1])}))})(sr(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(284)][s(320)](),type:e[s(398)],isAlreadyExtended:(r=e[s(430)],o=Ke,i=r[o(285)]()[o(393)](),!(0===i[o(423)](i[o(364)]("{")+1,i[o(410)]("}"))[o(393)]()[o(325)])),cacheHash:"",silent:v},t[s(380)]=er(er({},t.uniforms||{}),p||{});var g=t[s(428)],_=g[s(374)],y=g[s(313)],x=t[s(380)];return t.__csm[s(318)]=t[s(264)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(391),value:function(){var n=t,e=arguments[n(325)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(380)]=e.uniforms||this[n(380)],Object.assign(this[n(428)],e);var r=this[n(428)],o=r.fragmentShader,i=r[n(313)],a=this[n(380)],c=this[n(264)]();this[n(428)][n(318)]=c,this._generateMaterial(o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(428)].baseMaterial,fragmentShader:this[n(428)][n(374)],vertexShader:this[n(428)].vertexShader,uniforms:this[n(380)],silent:this[n(428)][n(353)],patchMap:this[n(428)][n(266)],cacheKey:this[n(428)][n(275)]},r=new(this[n(269)])(e);return Object[n(402)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(428)],r=e[n(374)],o=e[n(313)],i=this.uniforms,a=[Tr(r),Tr(o),i][n(429)]((function(n){return void 0!==n}));return a[n(325)]>0?En(a,{excludeValues:!0}):this[n(377)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(380)]=r||{},this[o(377)]=function(){var n=o;return i[n(428)][n(318)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(263)](Dr(n),t.fragmentShader,!0);t[r(374)]=a+c}if(e){var s=i._patchShader(Dr(e),t[r(313)]);t[r(313)]=r(356)+s,t[r(313)]=a+t.vertexShader}t[r(380)]=er(er({},t[r(380)]),i.uniforms),i[r(380)]=t[r(380)]}catch(u){console[r(379)](u)}};if(this[o(428)][o(278)]){var c=this[o(430)];this[o(430)]=function(n,t){c(n,t),a(n)}}else this[o(430)]=a;this.needsUpdate=!0}},{key:t(263),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(412)]()),this[o(428)][o(266)]);Object[o(279)](xr)[o(418)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(330)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error(e(282).concat(a,'" is required to use output "').concat(c,e(341)))})),Object[o(279)](gr).forEach((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(283)](c)[o(418)]((function(t){var e=o;Object[e(283)](c[t])[e(418)]((function(r){var o=e,s=mr[t],u=i[o(428)][o(398)];if("*"===t||Ar(n,t)){if(!(!s||Array.isArray(s)&&s[o(405)](u)||"*"===s))throw new Error(o(424)[o(425)](t," is not available in ").concat(u,o(265)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(302)+this[o(428)][o(401)][o(411)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,"void "[o(425)](d,"()")),v=n[o(405)](o(303)),m=a[o(405)](o(308));return v&&(m&&this[o(428)].isAlreadyExtended?(a=a[o(411)](o(396),o(327)[o(425)](h,"\n            \n            void main() {\n          ")),s=a,u=o(308),l=o(327)[o(425)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Ke)(410)](u),a=-1===p?s:s[f(423)](0,p)+l+s[f(423)](p+u[f(325)])):a=a[o(411)](o(396),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(425)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":wr,o(349))[o(425)](br,o(274))[o(425)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(425)](Ir,o(361))[o(425)](r?Mr:Sr,o(281))[o(425)](d,o(335)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(428)][n(398)];return e?n(259)[n(425)](e[n(354)](),";\n"):n(258)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(428)].type===n(276)?yr:_r}}],i=ir,r&&cr(e[i(268)],r),o&&cr(e,o),Object[i(311)](e,"prototype",{writable:!1}),c}();function Pr(n){function t(n){var e=ir;if(typeof n===e(427))return function(n){}[e(269)](e(309)).apply(e(296));1!==(""+n/n)[e(325)]||n%20==0?function(){return!0}.constructor(e(432)+e(286)).call(e(287)):function(){return!1}[e(269)]("debu"+e(286))[e(315)](e(397)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=Br;!function(n,t){const e=Br,r=kr();for(;;)try{if(776838===-parseInt(e(183))/1+-parseInt(e(212))/2+-parseInt(e(187))/3*(parseInt(e(186))/4)+-parseInt(e(211))/5*(-parseInt(e(205))/6)+-parseInt(e(223))/7*(parseInt(e(188))/8)+parseInt(e(214))/9+parseInt(e(182))/10*(parseInt(e(201))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=Br,t=new RegExp(n(189)),e=new RegExp(n(219),"i"),r=Nr(n(220));t[n(181)](r+n(227))&&e[n(181)](r+n(225))?Nr():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(228)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kr(){const n=["prototype","length","\n\t\t\t","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","5GIZoam","1376502dwvjxN","warn","10241370ySbtSh","error","__proto__","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","clearcoatRoughness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","debu","roughness","938231hpINjh","console","input","return (function() ","chain","apply",'{}.constructor("return this")( )',"object","clearcoat","stateObject","test","420YixUjH","868621emSRQY","bind","while (true) {}","1117460xUzvuC","3pxQtnc","16LMSdwv","function *\\( *\\)","MeshPhysicalMaterial","gger","\n      ","action","trace","counter","constructor","log","toString","index","string","340362ECJbnn","#ff00fc","exception","metalness","2661882KDnvWA","color"];return(kr=function(){return n})()}function Br(n,t){const e=kr();return(Br=function(n,t){return e[n-=178]})(n,t)}Or(void 0,(function(){const n=Br;let t;try{t=Function(n(226)+n(229)+");")()}catch(o){t=window}const e=t[n(224)]=t[n(224)]||{},r=[n(197),n(213),"info",n(215),n(203),"table",n(194)];for(let i=0;i<r[n(208)];i++){const t=Or.constructor[n(207)][n(184)](Or),o=r[i],a=e[o]||t;t[n(216)]=Or[n(184)](Or),t[n(198)]=a.toString[n(184)](a),e[o]=t}}))();const jr=[Cr(178)],Ur=tn({__name:Cr(199),props:{color:{default:Cr(202)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:D[t(190)],metalness:e[t(204)],roughness:e[t(222)],clearcoat:e[t(179)],clearcoatRoughness:e[t(218)],color:e.color,vertexShader:t(217),fragmentShader:t(209)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(192)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(210)},o=new zr(r);return fn((()=>{const n=t;o[n(206)].setStyle(e[n(206)]),o[n(204)]=e[n(204)],o.roughness=e.roughness,o[n(179)]=e[n(179)],o.clearcoatRoughness=e[n(218)]})),(n,t)=>(an(),cn("primitive",{object:nn(o)},null,8,jr))}});function Nr(n){function t(n){const e=Br;if(typeof n===e(200))return function(n){}.constructor(e(185))[e(228)](e(195));1!==(""+n/n)[e(208)]||n%20==0?function(){return!0}.constructor(e(221)+e(191)).call(e(193)):function(){return!1}[e(196)]("debu"+e(191)).apply(e(180)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Zr();;)try{if(564463===parseInt(e(176))/1*(-parseInt(e(180))/2)+parseInt(e(164))/3+-parseInt(e(184))/4+-parseInt(e(161))/5+parseInt(e(157))/6*(-parseInt(e(173))/7)+parseInt(e(190))/8+parseInt(e(182))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Gr,t=new RegExp(n(167)),e=new RegExp(n(178),"i"),r=Wr(n(170));t[n(163)](r+n(166))&&e[n(163)](r+"input")?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["init","debu","apply","168xCbZZg","exception","log","29yzLnHg","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","44282WfmDml","gger","19330848VxMTrC","constructor","1064056lYYbrz","while (true) {}","error","console","__proto__","prototype","7410784CTZgBA","231498UNwOmQ","trace","table","bind","5524495sybSfT","counter","test","1287711XVuBWw",'{}.constructor("return this")( )',"chain","function *\\( *\\)","string","info"];return(Zr=function(){return n})()}function Gr(n,t){var e=Zr();return(Gr=function(n,t){return e[n-=157]})(n,t)}function Wr(n){function t(n){var e=Gr;if(typeof n===e(168))return function(n){}.constructor(e(185)).apply(e(162));1!==(""+n/n)[e(179)]||n%20==0?function(){return!0}[e(183)](e(171)+e(181)).call("action"):function(){return!1}[e(183)](e(171)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Gr;try{n=Function("return (function() "+t(165)+");")()}catch(s){n=window}for(var e=n[t(187)]=n[t(187)]||{},r=[t(175),"warn",t(169),t(186),t(174),t(159),t(158)],o=0;o<r[t(179)];o++){var i=Hr[t(183)][t(189)][t(160)](Hr),a=r[o],c=e[a]||i;i[t(188)]=Hr[t(160)](Hr),i[t(177)]=c[t(177)].bind(c),e[a]=i}}))();export{Ve as C,Ur as _,Qn as a,lt as b,St as c,zt as d,Ut as e,Jt as f,Le as g,Ae as h,mt as u};

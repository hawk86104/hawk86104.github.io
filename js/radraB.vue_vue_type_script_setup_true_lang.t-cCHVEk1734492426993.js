import{b as n,e as t}from"./@tresjs.WiFlZbqU1734492426993.js";import{d as o,a6 as e,r,X as i,a3 as a,o as s,D as u,J as c,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.-THQH3GC1734492426993.js";import{aB as v,a0 as m,C as y,M as x,co as w,V as _}from"./three.-W-Avfc61734492426993.js";const M=R;!function(n,t){const o=R,e=A();for(;;)try{if(687941===-parseInt(o(393))/1*(parseInt(o(401))/2)+-parseInt(o(406))/3+parseInt(o(423))/4*(-parseInt(o(388))/5)+parseInt(o(411))/6*(-parseInt(o(407))/7)+parseInt(o(385))/8*(parseInt(o(400))/9)+parseInt(o(431))/10+parseInt(o(410))/11*(parseInt(o(420))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){I(this,(function(){const n=R,t=new RegExp(n(416)),o=new RegExp(n(417),"i"),e=F("init");t[n(394)](e+n(429))&&o[n(394)](e+"input")?F():e("0")}))()}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[R(432)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function A(){const n=["test","prototype","TresSpriteMaterial","offset","error","99999","45QsSKOE","4JvZLIF","img","value","info","clone","230769oxZukZ","378035DdWnsN","sizeAttenuation","__proto__","11VcTXDb","78GlelPO","constructor","call","scale","counter","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","warn","16121988TozFCA","exception",'{}.constructor("return this")( )',"1835740wfMeRq","string","action","position","tsRef","buildingsMarkA","chain","map","12914730XVEbts","apply","debu","bind","TresSprite","1532072kWpSHr","gger","toString","10lYfAZr","table","translate","foremost","geometry","603859IHxLDP"];return(A=function(){return n})()}b(void 0,(function(){const n=R,t=function(){const n=R;let t;try{t=Function("return (function() "+n(422)+");")()}catch(o){t=window}return t}(),o=t[n(418)]=t[n(418)]||{},e=["log",n(419),n(404),n(398),n(421),n(389),"trace"];for(let r=0;r<e.length;r++){const t=b[n(412)][n(395)][n(383)](b),i=e[r],a=o[i]||t;t[n(409)]=b[n(383)](b),t[n(387)]=a[n(387)][n(383)](a),o[i]=t}}))();const T=["position","scale"],P=[M(430)];function R(n,t){const o=A();return(R=function(n,t){return o[n-=382]})(n,t)}const S=o({__name:M(428),props:{color:{default:"#fff"},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(402)]}))),p=await p,d(),p),v=r({color:g.color,transparent:!0,depthWrite:!1,sizeAttenuation:g[o(408)],toneMapped:!1,depthTest:!g[o(391)]}),m=i(null);return a((()=>{const n=o;m.value&&(m[n(403)][n(392)]=m[n(403)][n(392)][n(405)](),m.value[n(392)][n(390)](g[n(397)][0],g[n(397)][1],0))})),(n,t)=>{const e=o;return s(),u(e(384),{ref_key:e(427),ref:m,position:g[e(426)],scale:g[e(414)],renderOrder:e(399)},[c(e(396),l(v,{map:f(h)}),null,16,P)],8,T)}}});function F(n){function t(n){const o=R;if(typeof n===o(424))return function(n){}.constructor("while (true) {}").apply(o(415));1!==(""+n/n).length||n%20==0?function(){return!0}[o(412)]("debu"+o(386))[o(413)](o(425)):function(){return!1}[o(412)](o(382)+o(386))[o(432)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const k=j;function j(n,t){const o=E();return(j=function(n,t){return o[n-=140]})(n,t)}!function(n,t){const o=j,e=E();for(;;)try{if(301911===-parseInt(o(178))/1+parseInt(o(180))/2*(-parseInt(o(182))/3)+-parseInt(o(184))/4+parseInt(o(158))/5+-parseInt(o(157))/6*(-parseInt(o(164))/7)+parseInt(o(171))/8+parseInt(o(168))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){z(this,(function(){const n=j,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(143),"i"),e=O(n(160));t[n(153)](e+n(145))&&o.test(e+n(142))?O():e("0")}))()}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();C(void 0,(function(){const n=j,t=function(){const n=j;let t;try{t=Function(n(173)+n(181)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(170)]||{},e=["log",n(156),n(177),n(148),"exception","table",n(172)];for(let r=0;r<e[n(154)];r++){const t=C[n(185)][n(189)][n(187)](C),i=e[r],a=o[i]||t;t[n(176)]=C.bind(C),t[n(144)]=a[n(144)][n(187)](a),o[i]=t}}))();const W=["position"],Z=[k(167)];function E(){const n=["1918MkZaOk",'{}.constructor("return this")( )',"1050sySUXV","TresShaderMaterial","1857028SRXMWj","constructor","debu","bind","counter","prototype","TresMesh","ncolor","radraA","stateObject","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","chain","gger","radius","error","string","makeRotationX","apply","call","test","length","MeshRef","warn","2521152ysCGax","1027155cizThb","uniforms","init","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","value","TresCircleGeometry","7nJnsfu","color","size","args","1996452tICWEu","followWidth","console","2324304VUldYL","trace","return (function() ","uRadius","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","__proto__","info","36171latxuj","#ffff00"];return(E=function(){return n})()}const G=o({__name:k(140),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:k(179)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=k,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[j(162)]+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(175),fragmentShader:e(161),uniforms:{uSpeed:{value:r.speed},uRadius:{value:r[e(147)]},uTime:l,uFollowWidth:{value:r[e(169)]},ncolor:{value:new y(r[e(165)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(150)](-Math.PI/180*90);f.value.applyMatrix4(n)}}));const _=p();return a((()=>{const n=e;r[n(165)]&&(w[n(159)][n(191)].value=new y(r[n(165)])),r[n(147)]&&(w[n(159)][n(174)].value=r[n(147)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),u(o(190),{ref_key:o(155),ref:_,position:r.position},[c(o(163),{ref_key:"TresCircleGeometryRef",ref:f,args:[r[o(166)],1e3]},null,8,Z),c(o(183),g(h(w)),null,16)],8,W)}}});function O(n){function t(n){const o=j;if(typeof n===o(149))return function(n){}.constructor("while (true) {}")[o(151)](o(188));1!==(""+n/n)[o(154)]||n%20==0?function(){return!0}[o(185)]("debugger")[o(152)]("action"):function(){return!1}[o(185)](o(186)+o(146)).apply(o(141)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function X(){const n=["return (function() ","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","updateMatrix","warn","args","__proto__","trace","function *\\( *\\)","string","color","test","11942990sYybnp","scale","call",'{}.constructor("return this")( )',"position","283000GjxMAF","radius","exception","counter","period","17652kdcTSm","uniforms","gger","123dxeCxC","TresTubeGeometryRef","height","9080kZGGrw","432YvaaZW","value","computeBoundingBox","MeshRef","length","debu","12494XPkQYL","constructor","prototype","chain","11462RovOQg","while (true) {}","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","input","copy","525102TELxby","uColor","makeScale","TresTubeGeometry","7wUzfES","console","2177665jXhXUy","bind","table","boundingBox","applyMatrix4","apply","1110DQuene","toString","info","min"];return(X=function(){return n})()}const B=L;function L(n,t){const o=X();return(L=function(n,t){return o[n-=351]})(n,t)}!function(n,t){const o=L,e=X();for(;;)try{if(939982===-parseInt(o(382))/1*(-parseInt(o(392))/2)+parseInt(o(354))/3*(-parseInt(o(385))/4)+-parseInt(o(407))/5+-parseInt(o(401))/6*(-parseInt(o(405))/7)+-parseInt(o(374))/8*(-parseInt(o(386))/9)+parseInt(o(369))/10+-parseInt(o(396))/11*(parseInt(o(379))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[L(353)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){V(this,(function(){const n=L,t=new RegExp(n(365)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=U("init");t[n(368)](e+n(395))&&o[n(368)](e+n(399))?U():e("0")}))()}();const $=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[L(353)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();$(void 0,(function(){const n=L;let t;try{t=Function(n(358)+n(372)+");")()}catch(r){t=window}const o=t[n(406)]=t[n(406)]||{},e=["log",n(361),n(356),"error",n(376),n(409),n(364)];for(let i=0;i<e[n(390)];i++){const t=$.constructor[n(394)][n(408)]($),r=e[i],a=o[r]||t;t[n(363)]=$[n(408)]($),t[n(355)]=a[n(355)][n(408)](a),o[r]=t}}))();const D=[B(373)],Y=[B(362)],Q=o({__name:"radraB",props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:"#ffff00"},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=B,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(367)],opacity:r.opacity,transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(359),fragmentShader:e(398),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(367)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M.value[o(388)](),l[o(387)]=M[o(387)][o(351)].max,f[o(387)]=M[o(387)][o(351)][o(357)],I=i[o(387)][o(370)].clone())}));const b=p(new w(new _(0,0,0),new _(0,r[e(384)],0)));a((()=>{const n=e;r[n(367)]&&(v[n(380)][n(402)].value=new y(r[n(367)]))}));const{onLoop:A}=t(),T={value:0};return A((({delta:n})=>{const t=e;T.value+=n;const o=(T.value%r[t(378)]/r[t(378)]*(r.maxRadius-r[t(375)])+r.radius)/r[t(375)],a=(new x)[t(403)](o,1,o);I&&(i[t(387)][t(370)][t(400)](I.clone()[t(352)](a)),i[t(387)][t(360)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),u("TresMesh",{ref_key:o(389),ref:i,position:r[o(373)],renderOrder:2e3},[c(o(404),{ref_key:o(383),ref:M,args:[b.value,20,r.radius,100,!1]},null,8,Y),c("TresShaderMaterial",g(h(v)),null,16)],8,D)}}});function U(n){function t(n){const o=L;if(typeof n===o(366))return function(n){}.constructor(o(397))[o(353)](o(377));1!==(""+n/n)[o(390)]||n%20==0?function(){return!0}[o(393)](o(391)+o(381))[o(371)]("action"):function(){return!1}[o(393)](o(391)+o(381))[o(353)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{S as _,G as a,Q as b};

import{a as e}from"./@tresjs.CnmCKMfV1751615890160.js";import{P as t}from"./tweakpane.C0HtAJSg1751615890160.js";import"./index.CwfrHSHq1751615890160.js";import{d as r,b as a,w as o,G as i,o as l,I as n,u as d,r as s,h as u,e as p,f as m,j as c,m as b}from"./@vue.Mugdq9o81751615890160.js";import{ai as f,b$ as g}from"./three.-xXgCQua1751615890160.js";import"./postprocessing.CkX0KHoZ1751615890160.js";import"./@vueuse.DfywP5Cl1751615890160.js";import"./utils.iCYabrEg1751615890160.js";import"./@fesjs.D8NC7S7m1751615890160.js";import"./vue-router.d155M_MI1751615890160.js";import"./lodash-es.C7pWAXPe1751615890160.js";import"./@qlin.q6OWdsQV1751615890160.js";import"./pinia.CLDqH1C51751615890160.js";import"./@babel.BPq7uOAK1751615890160.js";import"./@floating-ui.BFjFSAYt1751615890160.js";import"./@juggle.CcBCnTIR1751615890160.js";import"./index.BMcPdNY81751615890160.js";import"./three-mesh-ui.module.D6dQPNsB1751615890160.js";const h=["scale","center"],x=["map","blending"],j=r({__name:"bannerLabel",props:{text:{default:"标识"},fontSize:{default:32},fontColor:{default:"#000000"},backgroundColor:{default:"rgba(255,255,255,0.2)"},padding:{default:{y:10,x:20}},align:{default:"left-center"},fontFamily:{default:"sans-serif"},scaleFactor:{default:.01},borderColor:{default:"#000000"},borderWidth:{default:1},borderRadius:{default:2},dpi:{default:2}},setup(e){const t={"left-top":[0,1],"left-center":[0,.5],"left-bottom":[0,0],"center-top":[.5,1],center:[.5,.5],"center-bottom":[.5,0],"right-top":[1,1],"right-center":[1,.5],"right-bottom":[1,0]},r=e;let s=null,u=null,p=0,m=0,c=a(null);const b=()=>{s=document.createElement("canvas");const e=s.getContext("2d"),t=r.padding.y,a=r.padding.x;e.font=`bold ${r.fontSize}px ${r.fontFamily}`;const o=e.measureText(r.text).width,i=r.fontSize;p=o+2*a+2*r.borderWidth,m=i+2*t+2*r.borderWidth,s.width=p*r.dpi,s.height=m*r.dpi,e.scale(r.dpi,r.dpi),e.clearRect(0,0,s.width,s.height),e.font=`${r.fontSize}px ${r.fontFamily}`,e.textBaseline="top",e.fillStyle=r.backgroundColor,function(e,t,r,a,o,i){e.beginPath(),e.moveTo(t+i,r),e.lineTo(t+a-i,r),e.quadraticCurveTo(t+a,r,t+a,r+i),e.lineTo(t+a,r+o-i),e.quadraticCurveTo(t+a,r+o,t+a-i,r+o),e.lineTo(t+i,r+o),e.quadraticCurveTo(t,r+o,t,r+o-i),e.lineTo(t,r+i),e.quadraticCurveTo(t,r,t+i,r),e.closePath()}(e,r.borderWidth,r.borderWidth,p-2*r.borderWidth,m-2*r.borderWidth,r.borderRadius),e.fill(),r.borderWidth>0&&(e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.stroke()),e.fillStyle=r.fontColor;let l=r.borderWidth+a,n=r.borderWidth+t;return r.align.includes("center")?l=(p-o)/2:r.align.includes("right")&&(l=p-o-r.borderWidth-a),r.align.includes("middle")||r.align.includes("center")?n=(m-i)/2:r.align.includes("bottom")&&(n=m-i-r.borderWidth-t),e.fillText(r.text,l,n),e},j=e=>{c.value&&c.value.dispose(),c.value=new g(s),c.value.premultiplyAlpha=!1,c.value.needsUpdate=!0};return u=b(),j(),o((()=>r),(()=>{u&&(u=b(),j())}),{deep:!0}),(a,o)=>(l(),i("TresSprite",{scale:[d(p)*r.scaleFactor,d(m)*r.scaleFactor,1],center:t[e.align]||[.5,.5]},[n("TresSpriteMaterial",{map:d(c),transparent:"",depthTest:"",blending:f},null,8,x)],8,h))}}),v=r({__name:"bannerLabel",setup(r){const a=s({text:"标识",fontSize:32,fontColor:"#000000",backgroundColor:"#ffaa0066",padding:{y:10,x:20},align:"left-center",scaleFactor:.01,borderColor:"#000000",borderWidth:1,borderRadius:2,dpi:2}),o=new t({title:"参数",expanded:!0});o.addBinding(a,"text",{label:"文字内容"}),o.addBinding(a,"fontSize",{label:"文字大小",min:1,max:100}),o.addBinding(a,"fontColor",{label:"文字颜色"}),o.addBinding(a,"backgroundColor",{label:"背景色"}),o.addBinding(a,"padding",{label:"内边距",x:{min:1,max:50},y:{min:1,max:50}});const i=["left-top","left-center","left-bottom","center-top","center","center-bottom","right-top","right-center","right-bottom"].map((e=>({text:e,value:e})));return o.addBlade({view:"list",label:"定位",options:i,value:a.align}).on("change",(e=>{a.align=e.value})),o.addBinding(a,"scaleFactor",{label:"缩放因子",min:9e-4,max:.02}),o.addBinding(a,"borderColor",{label:"边框颜色"}),o.addBinding(a,"borderWidth",{label:"边框粗细",min:1,max:10,step:.01}),o.addBinding(a,"borderRadius",{label:"边框外弧度",min:0,max:20,step:.1}),o.addBinding(a,"dpi",{label:"清晰度",min:1,max:10,step:.1}),(t,r)=>{const o=u("TresCanvas");return l(),p(o,{clearColor:"#999","window-size":""},{default:m((()=>[r[0]||(r[0]=n("TresPerspectiveCamera",{position:[5,5,5]},null,-1)),c(d(e)),r[1]||(r[1]=n("TresMesh",null,[n("TresBoxGeometry"),n("TresMeshNormalMaterial")],-1)),c(d(j),b({position:[.5,1,0]},a),null,16)])),_:1})}}});export{v as default};

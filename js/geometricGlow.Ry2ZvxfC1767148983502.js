import{importShared as m}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{Kk as T}from"./index.DTe2qqjO1767148983502.js";import{Pane as M}from"./tweakpane.BQRZXf8M1767148983502.js";function f(l,o){if(!l.isBufferGeometry){console.error("The geometry must be a BufferGeometry.");return}l.attributes.normal||l.computeVertexNormals();const i=l.attributes.position,c=l.attributes.normal,r=i.array,t=c.array;for(let a=0;a<i.count;a++){const e=a*3;r[e]+=t[e]*o,r[e+1]+=t[e+1]*o,r[e+2]+=t[e+2]*o}i.needsUpdate=!0}var p=`varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
varying vec4 vFragColor;
void main() {
  vVertexNormal = normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,g=`uniform vec3 glowColor;
uniform float coeficient;
uniform float power;
varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
varying vec4 vFragColor;
void main() {
  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex = (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity =
      pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);
  gl_FragColor = vec4(glowColor, intensity);
}`;const{defineComponent:V}=await m("vue"),{unref:w,mergeProps:C,createElementVNode:u,openBlock:h,createElementBlock:B}=await m("vue"),P=["geometry"],b=["blending","side"],G=["geometry"],N=["blending","side"],{watch:y}=await m("vue"),s=await m("three"),k=V({__name:"geometricGlowMesh",props:{geometry:Object,inColor:{default:"hotpink"},outColor:{default:"hotpink"},inPower:{default:1.4},outPower:{default:1.2},inCoeficient:{default:1.1},outCoeficient:{default:.1}},setup(l){const o=l,i=o.geometry.clone();f(i,.01);const c=o.geometry.clone();f(c,.2);const r={uniforms:{coeficient:{value:o.inCoeficient},power:{value:o.inPower},glowColor:{value:new s.Color(o.inColor)},viewVector:{value:new s.Vector3(0,0,1)}},vertexShader:p,fragmentShader:g},t={uniforms:{coeficient:{value:o.outCoeficient},power:{value:o.outPower},glowColor:{value:new s.Color(o.outColor)},viewVector:{value:new s.Vector3(0,0,1)}},vertexShader:p,fragmentShader:g};return y(()=>[o.inColor,o.outColor],([a,e])=>{r.uniforms.glowColor.value.set(a),t.uniforms.glowColor.value.set(e)}),y(()=>[o.inPower,o.outPower,o.inCoeficient,o.outCoeficient],([a,e,v,x])=>{r.uniforms.power.value=a,t.uniforms.power.value=e,r.uniforms.coeficient.value=v,t.uniforms.coeficient.value=x}),(a,e)=>(h(),B("TresGroup",null,[u("TresMesh",{geometry:w(i)},[u("TresShaderMaterial",C(r,{blending:s.AdditiveBlending,transparent:"",depthWrite:!1,side:s.FontSide}),null,16,b)],8,P),u("TresMesh",{geometry:w(c),visible:!0},[u("TresShaderMaterial",C(t,{blending:s.AdditiveBlending,transparent:"",depthWrite:!1,side:s.BackSide}),null,16,N)],8,G)]))}}),{defineComponent:$}=await m("vue"),{createElementVNode:n,unref:d,createVNode:_,mergeProps:E,resolveComponent:S,withCtx:W,openBlock:z,createBlock:A}=await m("vue"),F=["geometry"],H=["geometry"],j=["geometry"],K=["geometry"],O=["geometry"],{reactive:R}=await m("vue"),U=await m("three"),J=$({__name:"geometricGlow",setup(l){const o=new U.TorusKnotGeometry(.75,.25,64),i=o.clone();f(i,-.1);const c=o.clone();f(c,.1);const r=R({inColor:"#0078ff",outColor:"#ff00ba",inPower:1.4,outPower:1.2,inCoeficient:1.1,outCoeficient:.1}),t=new M;return t.addBinding(r,"inColor",{label:"内发光色"}),t.addBinding(r,"inPower",{label:"内发光强度",step:.01,min:0,max:4}),t.addBinding(r,"inCoeficient",{step:.01,min:0,max:4}),t.addBinding(r,"outColor",{label:"外发光色"}),t.addBinding(r,"outPower",{label:"外发光强度",step:.01,min:0,max:6}),t.addBinding(r,"outCoeficient",{step:.01,min:0,max:4}),(a,e)=>{const v=S("TresCanvas");return z(),A(v,{"window-size":"",clearColor:"#333333"},{default:W(()=>[e[5]||(e[5]=n("TresPerspectiveCamera",{position:[5,5,5]},null,-1)),_(d(T)),n("TresMesh",{position:[0,1,-4],geometry:d(o)},[e[1]||(e[1]=n("TresMeshNormalMaterial",{transparent:"",opacity:.8},null,-1)),n("TresMesh",{geometry:d(i)},[...e[0]||(e[0]=[n("TresMeshBasicMaterial",{wireframe:"",color:"#000"},null,-1)])],8,H)],8,F),n("TresMesh",{position:[0,1,4],geometry:d(o)},[e[3]||(e[3]=n("TresMeshNormalMaterial",{transparent:"",opacity:.9},null,-1)),n("TresMesh",{geometry:d(c)},[...e[2]||(e[2]=[n("TresMeshBasicMaterial",{wireframe:"",color:"#000"},null,-1)])],8,K)],8,j),n("TresMesh",{position:[0,1,0],geometry:d(o),renderOrder:1},[e[4]||(e[4]=n("TresMeshBasicMaterial",{color:"gray"},null,-1)),_(k,E({geometry:d(o)},r),null,16,["geometry"])],8,O),e[6]||(e[6]=n("TresGridHelper",{args:[10,10]},null,-1))]),_:1})}}});export{J as default};

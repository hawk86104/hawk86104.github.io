import{c0 as t,a3 as n,C as e,k as r}from"./three._P_a_E_Z1730886807320.js";import{b as o}from"./@tresjs.iUmyNPdW1730886807320.js";import{R as c}from"./all.three.Tqp1MSK71730886807320.js";import{d as i,b as a,a6 as s,a3 as u,o as l,D as f,J as p,m,u as d}from"./@vue.-THQH3GC1730886807320.js";function v(){const t=["apply","init","while (true) {}","info","6cHmrbK","bind","gger","6749834XtPyVt","8AGBuDQ","224414DhOmEs","input","prototype","6762664OhvYNi","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","length","#include <project_vertex>",'{}.constructor("return this")( )',"373563ohvYtn","500887uNClHZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","25592328XnHHEK","error","table","fragmentShader","toString","replace","trace","string","function *\\( *\\)","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","constructor","void main() {","return (function() ","__proto__","console","log","action","#include <emissivemap_fragment>","6980180VSIeDq","stateObject","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","warn","vertexShader","test"];return(v=function(){return t})()}!function(t,n){const e=x,r=v();for(;;)try{if(704349===-parseInt(e(488))/1+-parseInt(e(479))/2+parseInt(e(487))/3*(-parseInt(e(522))/4)+-parseInt(e(508))/5+-parseInt(e(518))/6*(-parseInt(e(521))/7)+-parseInt(e(482))/8+parseInt(e(490))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(514)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp(t(498)),e=new RegExp(t(489),"i"),r=y(t(515));n.test(r+"chain")&&e[t(513)](r+t(480))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=x;let n;try{n=Function(t(502)+t(486)+");")()}catch(o){n=window}const e=n[t(504)]=n.console||{},r=[t(505),t(511),t(517),t(491),"exception",t(492),t(496)];for(let c=0;c<r[t(484)];c++){const n=g[t(500)][t(481)].bind(g),o=r[c],i=e[o]||n;n[t(503)]=g[t(519)](g),n[t(494)]=i.toString.bind(i),e[o]=n}}))();function x(t,n){const e=v();return(x=function(t,n){return e[t-=479]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(497))return function(t){}[e(500)](e(516))[e(514)]("counter");1!==(""+t/t)[e(484)]||t%20==0?function(){return!0}[e(500)]("debu"+e(520)).call(e(506)):function(){return!1}[e(500)]("debu"+e(520))[e(514)](e(509)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=S;!function(t,n){const e=S,r=M();for(;;)try{if(582008===-parseInt(e(279))/1*(parseInt(e(281))/2)+-parseInt(e(289))/3*(parseInt(e(276))/4)+-parseInt(e(331))/5+parseInt(e(317))/6*(-parseInt(e(297))/7)+-parseInt(e(305))/8*(-parseInt(e(278))/9)+-parseInt(e(307))/10*(parseInt(e(299))/11)+parseInt(e(293))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(291)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=S,n=new RegExp(t(324)),e=new RegExp(t(303),"i"),r=E(t(314));n[t(336)](r+"chain")&&e[t(336)](r+t(315))?E():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(291)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=S;let n;try{n=Function(t(319)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(280)]=n.console||{},r=[t(334),t(323),t(332),"error",t(292),t(286),t(318)];for(let c=0;c<r.length;c++){const n=I.constructor[t(301)][t(308)](I),o=r[c],i=e[o]||n;n[t(338)]=I[t(308)](I),n[t(310)]=i[t(310)][t(308)](i),e[o]=n}}))();const w=[b(335)],C=[b(284),b(329)];function M(){const t=["390orlDre","bind","value","toString","action","wrapS","showGridHelper","init","input","TresMesh","174BVsENP","trace","return (function() ","string","mirror","tmRef","warn","function *\\( *\\)","wrapT","call","repeat","length","visible","tpgRef","2595755dCIYwE","info","gger","log","rotation-x","test","TresMeshStandardMaterial","__proto__","textureMatrixUniform","194604lAHREo","color","10285092iYXXUR","8XyuWxO","console","184086ZucPPd","uniforms","renderTargetUniform","object","stateObject","table","TresGroup","reflectorDiffuse","21bSYPyK","uv1","apply","exception","25749540LWUCoO","TresPlaneGeometry","while (true) {}","constructor","161672kxVtJx","debu","124311CkvnlM","reflectMap","prototype","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mixStrength","8YlfIRZ","aoMap"];return(M=function(){return t})()}function S(t,n){const e=M();return(S=function(t,n){return e[t-=276]})(t,n)}const j=i({__name:b(288),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const v=b;let h,g;const y=i,_=new t(9.5,10),I=a(),M=a(),S=a(),j=new c,E={mirror:{value:y[v(321)]},mixStrength:{value:y[v(304)]}},R=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var z=0;z<3;z++)R[z][v(312)]=n,R[z][v(325)]=n,R[z][v(327)].set(16,16);const T={color:new e("#444"),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},D=t=>{const n=v;t.uniforms[n(300)]=j[n(283)],t[n(282)].textureMatrix=j[n(339)],t[n(282)]=Object.assign(t[n(282)],E),(t=>{const n=x;t[n(512)]=t.vertexShader[n(495)]("void main() {",n(483)),t[n(512)]=t[n(512)].replace(n(485),n(510))})(t),(t=>{const n=x;t[n(493)]=t.fragmentShader.replace(n(501),n(499)),t.fragmentShader=t[n(493)][n(495)](n(507),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=v;I.value&&(I[t(309)].attributes[t(290)]=I[t(309)].attributes.uv),S.value&&(S.value[t(306)].channel=1,S[t(309)].onBeforeCompile=D),M[t(309)]&&(M[t(309)][t(302)](j),M[t(309)].onBeforeRender=(t,n,e)=>{j.update(t,n,e)}),y.color&&S[t(309)]&&(S[t(309)][t(277)]=new e(y[t(277)]))})),(t,n)=>{const e=v;return l(),f(e(287),null,[p(e(316),{ref_key:e(322),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(294),{ref_key:e(330),ref:I,args:[10,10]},null,512),p(e(337),m({ref_key:"tmsmRef",ref:S},T),null,16)],8,w),p("primitive",{object:d(_),visible:t[e(313)]},null,8,C)])}}});function E(t){function n(t){const e=S;if(typeof t===e(320))return function(t){}[e(296)](e(295))[e(291)]("counter");1!==(""+t/t)[e(328)]||t%20==0?function(){return!0}[e(296)](e(298)+"gger")[e(326)](e(311)):function(){return!1}[e(296)]("debu"+e(333))[e(291)](e(285)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

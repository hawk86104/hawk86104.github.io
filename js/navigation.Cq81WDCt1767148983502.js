import{importShared as m}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_export_sfc as y,NA as N,Kk as P}from"./index.DTe2qqjO1767148983502.js";import{OrbitControls as $}from"./OrbitControls.CSbAbrSE1767148983502.js";const{defineComponent:V}=await m("vue"),{openBlock:R,createElementBlock:M}=await m("vue"),T={id:"containerNav"},{onMounted:z,watchEffect:H}=await m("vue"),a=await m("three"),I=V({__name:"navigation",props:{message:{}},setup(g){const t=g;let r=null,l=null,u=null,i=null,p=null,E=()=>{i=document.getElementById("containerNav"),r=new a.Scene,r.background=new a.Color("#f7f7f9"),l=new a.PerspectiveCamera(75,i.clientWidth/i.clientHeight,.1,1e4),l.position.z=2500,u=new a.WebGLRenderer({antialias:!0,canvas:i}),u.setSize(i.clientWidth,i.clientHeight),u.setPixelRatio(window.devicePixelRatio);var n=new a.AmbientLight(16777215);r.add(n);var e=new a.DirectionalLight(16777215,1);e.position.set(1,1,1).normalize(),r.add(e);const s=new $(l,u.domElement);s.enableDamping=!0,s.dampingFactor=.05,s.enabled=!0,s.enableZoom=!0,s.enableRotate=!0,s.enablePan=!1;const f=new a.AxesHelper(5);r.add(f);function o(){requestAnimationFrame(o),u.render(r,l)}o()},S=()=>{let n=new a.BoxGeometry(1800,1800,1800),e=x();p=new a.Mesh(n,e),p.position.set(0,0,0),r.add(p),B(e)},x=()=>{let e=[];return["右","左","上","下","前","后"].forEach(function(f){var o=document.createElement("canvas");o.width=256,o.height=256;var c=o.getContext("2d");c.fillStyle="#f6fcff",c.fillRect(0,0,o.width,o.height),c.fillStyle="black",c.font="bold 100px arial",c.textAlign="center",c.textBaseline="middle",c.fillText(f,o.width/2,o.height/2);var d=new a.Texture(o);d.needsUpdate=!0;var _=new a.MeshStandardMaterial({map:d,color:16777215,emissive:0,side:a.DoubleSide});e.push(_)}),e},B=n=>{var e=new a.Raycaster,s=new a.Vector2;function f(o){s.x=o.offsetX/i.clientWidth*2-1,s.y=-(o.offsetY/i.clientHeight)*2+1,e.setFromCamera(s,l);for(var c=e.intersectObjects([p]),d=0;d<n.length;d++)n[d].emissive.set(0);if(c.length>0){let _=c[0].face.materialIndex;A(_),n[_].emissive.set("#eb780a")}}u.domElement.addEventListener("click",f,!1)},A=n=>{console.log("message",t.message);let e=50;n==4?t.message.position.set(0,0,e):n==5?t.message.position.set(0,0,-e):n==1?t.message.position.set(-e,0,0):n==0?t.message.position.set(e,0,0):n==3?t.message.position.set(0,-e,0):n==2&&t.message.position.set(0,e,0),t.message.lookAt(new a.Vector3(0,0,0))};return z(()=>{E(),S()}),H(()=>{}),(n,e)=>(R(),M("canvas",T))}}),L=y(I,[["__scopeId","data-v-67395f0d"]]),{withAsyncContext:D,defineComponent:Z}=await m("vue"),{unref:h,openBlock:W,createElementBlock:j,createCommentVNode:F}=await m("vue"),G=["object"],{onMounted:O,watchEffect:q}=await m("vue"),K=Z({__name:"navScene",async setup(g){let t,r;const{state:l}=([t,r]=D(()=>N("https://opensource.cdn.icegl.cn/model/operationTool/湖中小亭/湖中小亭.gltf")),t=await t,r(),t);return O(()=>{}),q(()=>{}),(u,i)=>h(l)?(W(),j("primitive",{key:0,object:h(l)?.scene},null,8,G)):F("",!0)}}),{defineComponent:U}=await m("vue"),{createElementVNode:w,unref:X,normalizeProps:Y,guardReactiveProps:J,createVNode:v,Suspense:Q,withCtx:C,openBlock:k,createBlock:ee,resolveComponent:te,mergeProps:ne,createElementBlock:ae}=await m("vue"),{reactive:b,ref:oe}=await m("vue"),le=U({__name:"navigation",setup(g){const t=oe(null),r=b({windowSize:!0,alpha:!0,antialias:!0}),l=b({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(u,i)=>{const p=te("TresCanvas");return k(),ae("div",null,[v(p,ne({clearColor:"#201919"},r),{default:C(()=>[w("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,50],"look-at":[0,0,0],ref_key:"navSceneCamera",ref:t},null,512),i[0]||(i[0]=w("TresAmbientLight",{intensity:2},null,-1)),v(X(P),Y(J(l)),null,16),(k(),ee(Q,null,{default:C(()=>[v(K)]),_:1}))]),_:1},16),v(L,{message:t.value},null,8,["message"])])}}});export{le as default};

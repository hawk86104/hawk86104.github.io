import{_ as t,C as e,a0 as n}from"./three.LxxvsMJG1742205305014.js";import{e as r,h as a,o}from"./@tresjs.nk0nhZ9a1742205305014.js";import{a as s}from"./index.KoRDsF6I1742205305014.js";import"./index.HMyLg5t_1742205305014.js";import{z as i}from"./three-custom-shader-material.8lD1n5aS1742205305014.js";import{p as l}from"./gl-noise.BrVtymbx1742205305014.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,e as b,f as w,g as y,aj as j,ak as M,m as x,al as z}from"./@vue.NRI7TcgI1742205305014.js";import{P as T}from"./tweakpane.yDiyAAkA1742205305014.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.4dws__UE1742205305014.js";import"./postprocessing.lrLv6HE21742205305014.js";import"./@vueuse.w6JAmAgA1742205305014.js";import"./three-stdlib.VHPWJjlE1742205305014.js";import"./@pmndrs.kWqDV5VA1742205305014.js";import"./object-hash.dbNkxbaC1742205305014.js";import"./@amap.sbhX68WO1742205305014.js";import"./jszip.SZt2c-at1742205305014.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.-Me78jqg1742205305014.js";import"./all.three.Cv1ruM2n1742205305014.js";import"./oimophysics.x0jH7fze1742205305014.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.UW0Qa0NX1742205305014.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.aMiJjTNa1742205305014.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.xautV1lQ1742205305014.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.GGQ2SI8f1742205305014.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.QZS-Eo2j1742205305014.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.7ipRBBx91742205305014.js";const I=S;function S(t,e){const n=P();return(S=function(t,e){return n[t-=227]})(t,e)}!function(t,e){const n=S,r=P();for(;;)try{if(452159===parseInt(n(271))/1+-parseInt(n(285))/2+parseInt(n(241))/3+parseInt(n(252))/4*(-parseInt(n(246))/5)+-parseInt(n(279))/6*(parseInt(n(284))/7)+-parseInt(n(282))/8*(parseInt(n(239))/9)+parseInt(n(263))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=S,e=new RegExp(t(278)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=W(t(267));e[t(228)](r+"chain")&&n[t(228)](r+t(245))?W():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[S(275)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=S;let e;try{e=Function(t(281)+t(242)+");")()}catch(a){e=window}const n=e.console=e[t(235)]||{},r=[t(230),"warn",t(272),t(255),t(233),t(288),t(237)];for(let o=0;o<r[t(238)];o++){const e=G[t(277)].prototype.bind(G),a=r[o],s=n[a]||e;e[t(269)]=G[t(248)](G),e[t(268)]=s[t(268)][t(248)](s),n[a]=e}}))();const B=[I(232)],O=[I(251)];function P(){const t=["height","18414670YAlPve","value","brightness","MeshPhysicalMaterial","init","toString","__proto__","side","318974pQitYI","info","fragmentShader","convertLinearToSRGB","apply","#b3ffff","constructor","function *\\( *\\)","134082wkhzJc","uTime","return (function() ","15288wEGaAJ","fragment","210HULPyO","565750XwIyJu","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","stateObject","table","Color","test","uHeight","log","waterColor","rotation-x","exception","waterHighlight","console","dispose","trace","length","792rzfAzP","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","610272oqYDHn",'{}.constructor("return this")( )',"vertex","tmRef","input","2615QJYqFO","vertexShader","bind","debu","DoubleSide","args","6044FtriPF","baseMaterial","TresMesh","error","string","material","gger","customWaterMesh","flatShading","Flatshading"];return(P=function(){return t})()}const F=u({__name:I(259),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:I(276)},brightness:{default:1},baseMaterial:{default:t[I(266)]}},setup(o){const s=I,u=o,_=c(null),b={vertex:s(240),fragment:s(286)},w={uTime:{value:0},waterColor:{value:new(t[s(227)])(u.waterColor)[s(274)]()},waterHighlight:{value:new e(u.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:u[s(265)]},uHeight:{value:u.height}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w[e(280)][e(264)]=-t/5})),p((()=>{const n=s;u.height&&(w[n(229)][n(264)]=u[n(262)]),u[n(231)]&&(w[n(231)][n(264)]=new e(u[n(231)])[n(274)]()),u[n(234)]&&(w[n(234)][n(264)]=new(t[n(227)])(u.waterHighlight).convertLinearToSRGB()),u[n(265)]&&(w.brightness.value=u[n(265)])})),f((()=>u[s(261)]),(t=>{const e=s;_.value[e(257)].needsUpdate=!0})),f((()=>u[s(253)]),(e=>{const r=s,a=new i({baseMaterial:t[e],vertexShader:l(b[r(243)]),fragmentShader:b[r(283)],uniforms:w,flatShading:u[r(261)],side:n,roughness:.2,metalness:.1,silent:!0});_[r(264)].material[r(236)](),_[r(264)].material=a})),(e,n)=>{const r=s;return g(),h(r(254),{ref_key:r(244),ref:_,"rotation-x":-Math.PI/2},[m("TresBoxGeometry",{args:[5,5,e[r(262)],64,64,1]},null,8,O),v(d(a),{baseMaterial:t[r(266)],vertexShader:d(l)(b[r(243)]),fragmentShader:b[r(283)],uniforms:w,side:t[r(250)],roughness:.2,metalness:.1,flatShading:e[r(261)],silent:""},null,8,["baseMaterial",r(247),r(273),r(270),r(260)])],8,B)}}});function W(t){function e(t){const n=S;if(typeof t===n(256))return function(t){}.constructor("while (true) {}")[n(275)]("counter");1!==(""+t/t)[n(238)]||t%20==0?function(){return!0}[n(277)](n(249)+n(258)).call("action"):function(){return!1}[n(277)]("debu"+n(258)).apply(n(287)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const k=D;!function(t,e){const n=D,r=E();for(;;)try{if(133521===-parseInt(n(204))/1*(parseInt(n(167))/2)+-parseInt(n(192))/3+-parseInt(n(200))/4+parseInt(n(157))/5*(parseInt(n(221))/6)+parseInt(n(210))/7*(parseInt(n(198))/8)+parseInt(n(213))/9+parseInt(n(202))/10*(-parseInt(n(217))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[D(152)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){A(this,(function(){const t=D,e=new RegExp(t(212)),n=new RegExp(t(187),"i"),r=R("init");e[t(188)](r+t(170))&&n.test(r+t(166))?R():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[D(152)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function D(t,e){const n=E();return(D=function(t,e){return n[t-=152]})(t,e)}L(void 0,(function(){const t=D,e=function(){const t=D;let e;try{e=Function("return (function() "+t(201)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(163)]||{},r=[t(203),"warn",t(185),t(196),t(177),t(158),t(168)];for(let a=0;a<r[t(193)];a++){const e=L[t(154)][t(164)][t(205)](L),o=r[a],s=n[o]||e;e.__proto__=L.bind(L),e[t(165)]=s.toString.bind(s),n[o]=e}}))();const N=u({__name:k(172),setup(e){const n=k,r=_({alpha:!0,toneMapping:t[n(226)],windowSize:!0,clearColor:10066329}),a=_({enableDamping:!0,autoRotate:!1}),i=_({cellSize:.6,cellThickness:1.1,cellColor:n(197),sectionColor:n(214),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),l=_({height:.2,Flatshading:!1,waterColor:n(225),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(171)}),u=new T;return u.addBinding(l,n(227),{label:"高度",min:.1,max:5,step:.1}),u[n(176)](l,n(191),{label:n(162)}),u.addBinding(l,n(195),{label:n(190)}),u[n(176)](l,n(207),{label:"亮度",min:0,max:1,step:.01}),u[n(176)](l,n(215),{label:"Flatshading"}),u[n(222)]({view:n(211),label:"材质",options:[{text:n(171),value:n(171)},{text:n(183),value:n(183)},{text:n(209),value:n(209)},{text:n(218),value:"MeshStandardMaterial"},{text:n(159),value:n(159)},{text:n(156),value:n(156)},{text:n(173),value:"MeshLambertMaterial"},{text:n(219),value:n(219)}],value:l[n(180)]}),u.on("change",(t=>{const e=n;"材质"===t.target[e(186)]&&(l[e(180)]=t[e(184)])})),(t,e)=>{const u=n,c=b(u(153));return g(),w(c,x(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=m(u(161),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(o),j(M(a)),null,16),e[1]||(e[1]=m("TresAmbientLight",{intensity:.5},null,-1)),e[2]||(e[2]=m("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),v(F,j(M(l)),null,16),v(d(C),x({args:[3,3]},i,{position:[0,-.5,0]}),null,16),(g(),w(z,null,{default:y((()=>[v(d(s),{files:[u(155),u(208),u(178),u(174),u(182),u(169)],path:u(216)+u(179)},null,8,[u(199)])])),_:1}))])),_:1},16)}}});function R(t){function e(t){const n=D;if(typeof t===n(220))return function(t){}[n(154)](n(206))[n(152)](n(189));1!==(""+t/t)[n(193)]||t%20==0?function(){return!0}.constructor("debu"+n(223))[n(194)](n(160)):function(){return!1}[n(154)](n(224)+"gger")[n(152)](n(175)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function E(){const t=["string","6IwXfHv","addBlade","gger","debu","#52a7f7","ACESFilmicToneMapping","height","apply","TresCanvas","constructor","pos-x.jpg","MeshToonMaterial","831170IKzTlo","table","MeshPhongMaterial","action","TresPerspectiveCamera","水体颜色","console","prototype","toString","input","498jaMVyj","trace","neg-z.jpg","chain","MeshPhysicalMaterial","customWater","MeshLambertMaterial","neg-y.jpg","stateObject","addBinding","exception","pos-y.jpg","/images/skyBox/6jpg/","baseMaterial","resource.cos","pos-z.jpg","MeshBasicMaterial","value","info","label","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","counter","浪头颜色","waterColor","361185wqgVNV","length","call","waterHighlight","error","#627179","112TGSNEz","path","213492HAeQMM",'{}.constructor("return this")( )',"3530LyEhHg","log","631JkLbEX","bind","while (true) {}","brightness","neg-x.jpg","MeshNormalMaterial","115829LtwUpq","list","function *\\( *\\)","2050533pJlAqd","#3a78a2","Flatshading","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com","5027JeMXjm","MeshStandardMaterial","MeshDepthMaterial"];return(E=function(){return t})()}export{N as default};

import"./@fesjs.5qm9mpwh1741007821308.js";import{_ as n}from"./jszip.tXNnSWcU1741007821308.js";import{F as t}from"./file-saver.LP7cr5na1741007821308.js";import{cN as e,_ as s}from"./three.sBrYSCgq1741007821308.js";const o=c;!function(n,t){const e=c,s=i();for(;;)try{if(311554===parseInt(e(491))/1+parseInt(e(480))/2*(-parseInt(e(464))/3)+-parseInt(e(437))/4*(-parseInt(e(415))/5)+parseInt(e(445))/6*(parseInt(e(483))/7)+-parseInt(e(497))/8+parseInt(e(498))/9*(-parseInt(e(434))/10)+parseInt(e(418))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[c(402)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){r(this,(function(){const n=c,t=new RegExp(n(417)),e=new RegExp(n(479),"i"),s=b(n(440));t[n(496)](s+n(432))&&e[n(496)](s+n(470))?b():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[c(402)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function c(n,t){const e=i();return(c=function(n,t){return e[n-=402]})(n,t)}function i(){const n=["pop","forEach","input","config.zip","data:image/PNG;base64,","slice","table","FileLoader",".json",";base64,","scene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","142qqiuHp","setResponseType","exception","474642ayvrxO","GIF","images","loadAsync","data:image/png;base64,",'{}.constructor("return this")( )',"BufferGeometry","image/bmp","232485tDunvD","data:image/gif;base64,","readAsDataURL","get","file","test","3570872BbCaXB","144Dxaejf","string","url:images/","while (true) {}","uuid","type","PNG","debu","apply","非标准文件：不存在 app.json","image/gif","catch","constructor","parse","endsWith","data:","data","toLowerCase","name","app.json","geometries","4490oVfvLS","application/octet-stream","function *\\( *\\)","13156693AqMtYK","url","log","load","stringify","blob","trace","data:image/","split","warn","image/jpeg","generateAsync","message","WEBP","chain","toString","340680zNlgGO","url:geometries/","startsWith","1060yKnqbI","async","counter","init","JPEG","gger","error","onerror","18zneRgA","onloadend","push","substring","data:image/JPEG;base64,","folder","url:","info","files","length","console","stateObject","action","enabled","data:image/WEBP;base64,","__proto__","image/png","prototype","then","23955mFuimU","image/webp","Unknown","call"];return(i=function(){return n})()}async function u(n){const t=o,e=new(s[t(475)]);return new Promise(((s,o)=>{const r=t;e[r(421)](n,(n=>s(JSON[r(407)](n))),void 0,(n=>o(n)))}))}async function p(n){const t=o,e=new(s[t(475)]);return new Promise(((s,r)=>{const a=t;e[a(481)](a(423)),e[a(421)](n,(t=>{const e=a,c=new FileReader;c[e(446)]=()=>{const t=e,r=function(n){const t=o,e=n.split(".")[t(468)]()[t(411)]();return{jpg:t(428),jpeg:t(428),png:t(461),gif:t(404),bmp:t(490),webp:t(465)}[e]||t(416)}(n),a=c.result[t(426)](",")[1];s(t(409)+r+t(477)+a)},c.onerror=n=>{r(n)},c.readAsDataURL(t)}),void 0,(n=>r(n)))}))}a(void 0,(function(){const n=c;let t;try{t=Function("return (function() "+n(488)+");")()}catch(o){t=window}const e=t[n(455)]=t[n(455)]||{},s=[n(420),n(427),n(452),n(443),n(482),n(474),n(424)];for(let r=0;r<s[n(454)];r++){const t=a[n(406)][n(462)].bind(a),o=s[r],c=e[o]||t;t[n(460)]=a.bind(a),t[n(433)]=c[n(433)].bind(c),e[o]=t}}))(),e[o(458)]=!0;const f=t=>{const e=o,r=new(s[e(475)]);return r[e(481)](e(423)),new Promise(((s,o)=>{const a=e;r[a(421)](t,(async t=>{const e=a;s(await n[e(486)](t))}),void 0,(n=>o(n)))}))},l=n=>{const t=o,e=n[t(448)](0,15),s=t(449),r=t(487),a=t(472),c=t(492),i=t(459);return"data:image/jpeg;base64,"[t(436)](e)||s.startsWith(e)?t(441):r[t(436)](e)||a[t(436)](e)?t(504):c[t(436)](e)||"data:image/GIF;base64,"[t(436)](e)?t(484):"data:image/webp;base64,".startsWith(e||i[t(436)](e))?t(431):t(466)},g=e=>{const s=o,r=[];e[s(478)][s(414)]&&e[s(478)][s(414)].forEach((n=>{const t=s;n.type===t(489)&&(r[t(447)]({uuid:n[t(502)],data:n[t(410)]}),n.data=t(435)+n[t(502)]+t(476))}));const a=[];e[s(478)][s(485)]&&e.scene[s(485)][s(469)]((n=>{const t=s;n.url&&(a[t(447)]({uuid:n[t(502)],url:n[t(419)]}),n[t(419)][t(503)]?n[t(419)]=t(500)+n.uuid+"."+n[t(419)][t(503)]+".json":n[t(419)]=t(500)+n.uuid+"."+l(n[t(419)]))}));const c=new n;if(r[s(454)]){const n=c[s(450)](s(414));r.forEach((t=>{const e=s;n[e(495)](t[e(502)]+e(476),JSON[e(422)](t.data))}))}if(a[s(454)]){const n=c.folder(s(485));a[s(469)]((t=>{const e=s;t[e(419)].type?n[e(495)](t[e(502)]+"."+t.url[e(503)]+".json",JSON[e(422)](t[e(419)])):n[e(495)](t[e(502)]+"."+l(t.url),t[e(419)][e(426)](e(477))[e(468)](),{base64:!0})}))}const i=JSON.stringify(e);return c[s(495)]("app.json",i),c[s(429)]({type:s(423)}).then((n=>{const e=s;t.saveAs(n,e(471))}))},d=(n,t,e)=>{const s=o;n.geometries<=0&&n[s(485)]<=0&&e(t)},m=(t,e)=>{const s=o;let r=null;return n[s(486)](t)[s(463)]((n=>{const t=s;n[t(453)]["app.json"]?n[t(453)][t(413)][t(438)](t(499)).then((s=>{var a,c;const i=t;r=JSON[i(407)](s);const u=(n=>{var t,e;const s=o,r={geometries:0,images:0};return null==(t=n.scene[s(414)])||t[s(469)]((n=>{const t=s;n[t(410)][t(436)](t(451))&&r[t(414)]++})),null==(e=n[s(478)][s(485)])||e[s(469)]((n=>{const t=s;n[t(419)][t(436)](t(451))&&r[t(485)]++})),r})(r);d(u,r,e),null==(a=r.scene[i(414)])||a[i(469)]((t=>{const s=i;t[s(410)].startsWith(s(451))&&n[s(453)][t.data[s(473)](4)][s(438)](s(499)).then((n=>{const o=s;t[o(410)]=JSON[o(407)](n),u[o(414)]--,d(u,r,e)}))})),null==(c=r[i(478)].images)||c.forEach((t=>{const s=i;if(t[s(419)][s(436)](s(451))){const o=t[s(419)][s(473)](4);o[s(408)](s(476))?n[s(453)][o].async(s(499))[s(463)]((n=>{const o=s;t[o(419)]=JSON[o(407)](n),u[o(485)]--,d(u,r,e)})):n[s(453)][o][s(438)]("base64")[s(463)]((n=>{const a=s,c=o[a(426)]("."),i=c[c[a(454)]-1].toUpperCase();t[a(419)]=a(425)+i+a(477)+n,u[a(485)]--,d(u,r,e)}))}}))})):console.error(t(403))}),(n=>{const e=s;console[e(443)](t[e(412)]+": "+n[e(430)])})),r};function b(n){function t(n){const e=c;if(typeof n===e(499))return function(n){}[e(406)](e(501))[e(402)](e(439));1!==(""+n/n)[e(454)]||n%20==0?function(){return!0}[e(406)](e(505)+e(442))[e(467)](e(457)):function(){return!1}.constructor("debugger")[e(402)](e(456)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{f as a,p as b,g as e,l as g,m as i,u as l};

import{i as t}from"./ice-utils.6v9ytGbH1741594518249.js";import{m as n,_ as e}from"./gl-matrix.oVMHBNGj1741594518249.js";import{P as o}from"./tweakpane.yDiyAAkA1741594518249.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.NRI7TcgI1741594518249.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=b;!function(t,n){const e=b,o=E();for(;;)try{if(227418===parseInt(e(470))/1+-parseInt(e(466))/2*(parseInt(e(441))/3)+parseInt(e(462))/4+parseInt(e(446))/5+parseInt(e(406))/6+parseInt(e(502))/7*(parseInt(e(423))/8)+parseInt(e(416))/9*(-parseInt(e(435))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[b(430)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=b,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(485),"i"),o=T(t(425));n[t(438)](o+t(421))&&e[t(438)](o+t(419))?T():o("0")}))()}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[b(430)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function E(){const t=["drawElements","COLOR_BUFFER_BIT","TRIANGLES","change","debu","1153372lfynSa","ortho","CLAMP_TO_EDGE","trace","3118RrURFc","getUniformLocation","innerHeight","addBinding","193424npbqSX","constructor","console","clear","logo-texture","ELEMENT_ARRAY_BUFFER","bindBuffer","STATIC_DRAW","ONE_MINUS_SRC_ALPHA","create","value","TEXTURE_2D","while (true) {}","inline","是否后处理","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","RGBA","bufferData","height","info","scale","querySelector","TEXTURE_WRAP_T","slider","BYTES_PER_ELEMENT","uProjection","offset_right_top","hidden","canvaswebgl","SRC_ALPHA","width","715659PmFjWs","getContext","error","webglPostProcessing","enable","toString","TEXTURE_WRAP_S","useProgram","enableVertexAttribArray","936222RTjzQc","ARRAY_BUFFER","blendFunc","lookAt","mat4","TEXTURE_MIN_FILTER","offset_right_bottom","bindFramebuffer","uniformMatrix4fv","exception","18bqdYix","uModel","UNSIGNED_BYTE","input","uniform1f","chain","string","32lIUhtI","bindTexture","init","innerWidth","mixParam","gger","clearColor","apply","TEXTURE_MAG_FILTER","canvas","color","FLOAT","3289370sOeJNs","bind","stateObject","test","getElementById",'{}.constructor("return this")( )',"417FyRSLi","prototype","texImage2D","offset_left_bottom","webgl","276205jTeLZQ","createFramebuffer","addBlade","FRAMEBUFFER","texParameteri","COLOR_ATTACHMENT0","createBuffer","NEAREST","length","BLEND","offset_left_top"];return(E=function(){return t})()}x(void 0,(function(){const t=b;let n;try{n=Function("return (function() "+t(440)+");")()}catch(r){n=window}const e=n[t(472)]=n[t(472)]||{},o=["log","warn",t(490),t(504),t(415),"table",t(465)];for(let i=0;i<o[t(454)];i++){const n=x.constructor[t(442)][t(436)](x),r=o[i],a=e[r]||n;n.__proto__=x[t(436)](x),n[t(402)]=a[t(402)][t(436)](a),e[r]=n}}))();const p={id:_(499)},g=["src"];function b(t,n){const e=E();return(b=function(t,n){return e[t-=401]})(t,n)}const R=r({__name:_(505),setup(r){const d=_;let x,E,b,R,T,A,y,F,v,h,P,w,I;const B=1,C=.71,U=.76,S=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S[d(448)]({view:d(494),label:"颜色",min:0,max:1,value:.5}).on(d(460),(t=>{const n=d;Y(),E[n(420)](w,t[n(480)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[d(469)](L,d(498),{label:d(484)}),S[d(469)](L,d(497),{picker:d(483),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=d;D[0]=L[n(497)].x,D[1]=L[n(497)].y,Y()})),S[d(469)](L,"offset_right_bottom",{picker:d(483),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(460),(t=>{const n=d;D[5]=L[n(412)].x,D[6]=L.offset_right_bottom.y,Y()})),S[d(469)](L,"offset_left_bottom",{picker:d(483),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(460),(t=>{const n=d;D[10]=L[n(444)].x,D[11]=L[n(444)].y,Y()})),S.addBinding(L,d(456),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(460),(t=>{const n=d;D[15]=L[n(456)].x,D[16]=L.offset_left_top.y,Y()})),a((()=>{N()}));const N=function(){const n=d;x=document[n(492)]("#canvaswebgl"),x[n(501)]=window[n(426)],x[n(489)]=window[n(468)],E=x[n(503)](n(445)),E&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=G(e,o),b=t(E,l,m),v=E[n(467)](b,n(496)),h=E[n(467)](b,"uView"),P=E[n(467)](b,n(417)),I=O(document[n(439)](n(474)))}(),Y(),E[n(401)](E[n(455)]),E[n(408)](E[n(500)],E[n(478)]),M())};function M(){const t=d;E.bindFramebuffer(E.FRAMEBUFFER,y),E.clearColor(B,C,U,1),E[t(473)](E[t(458)]),function(){const t=d;E[t(404)](b),E.bindBuffer(E[t(407)],R);const o=n[t(479)]();n[t(463)](o,0,x.width,x[t(489)],0,.1,100),E[t(414)](v,!1,o);const r=n[t(479)]();e[t(410)][t(409)](r,[0,0,1],[0,0,0],[0,1,0]),E[t(414)](h,!1,r),j(I,600,600),j(I,400,400)}(),E.bindFramebuffer(E[t(449)],null),L[t(498)]&&(E[t(473)](E[t(458)]),E[t(429)](0,0,1,1),E.bindBuffer(E.ARRAY_BUFFER,T),E[t(404)](A),E[t(424)](E[t(481)],F)),E[t(457)](E[t(459)],6,E[t(418)],0),requestAnimationFrame(M)}function j(t,o,r){const i=d;let a=n[i(479)]();e[i(410)].translate(a,a,[o,r,0]),e[i(410)][i(491)](a,a,[250,250,0]),E[i(414)](P,!1,a),E[i(424)](E[i(481)],t),E[i(457)](E[i(459)],6,E[i(418)],0)}function Y(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);T=G(D,e),A=t(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=E.getUniformLocation(A,n(427)),E[n(467)](A,n(433)),function(){const t=d;F=O(x),y=E[t(447)](),E.bindFramebuffer(E[t(449)],y),E.framebufferTexture2D(E[t(449)],E[t(451)],E[t(481)],F,0),E[t(413)](E[t(449)],null)}()}function O(t){const n=d,e=E.createTexture();return E[n(424)](E[n(481)],e),t instanceof HTMLImageElement?E[n(443)](E[n(481)],0,E[n(487)],E[n(487)],E.UNSIGNED_BYTE,t):E.texImage2D(E[n(481)],0,E.RGBA,t[n(501)],t[n(489)],0,E[n(487)],E.UNSIGNED_BYTE,null),E[n(450)](E[n(481)],E[n(411)],E[n(453)]),E.texParameteri(E[n(481)],E[n(431)],E[n(453)]),E[n(450)](E[n(481)],E[n(403)],E[n(464)]),E[n(450)](E.TEXTURE_2D,E[n(493)],E[n(464)]),e}function G(t,n){const e=d,o=E[e(452)]();E.bindBuffer(E[e(407)],o),E.bufferData(E.ARRAY_BUFFER,t,E[e(477)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(495)];E.vertexAttribPointer(0,3,E[e(434)],!1,r,0),E[e(405)](0),E.vertexAttribPointer(1,2,E[e(434)],!1,r,3*Float32Array[e(495)]),E[e(405)](1);const i=E[e(452)]();return E[e(476)](E[e(475)],i),E[e(488)](E[e(475)],n,E[e(477)]),E[e(476)](E[e(407)],null),o}return(t,n)=>{const e=d;return c(),s(e(432),p,[u("img",{id:e(474),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,g)])}}});function T(t){function n(t){const e=b;if(typeof t===e(422))return function(t){}[e(471)](e(482))[e(430)]("counter");1!==(""+t/t)[e(454)]||t%20==0?function(){return!0}[e(471)](e(461)+e(428))[e(486)]("action"):function(){return!1}[e(471)](e(461)+e(428))[e(430)](e(437)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as default};

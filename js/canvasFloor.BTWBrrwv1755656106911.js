import{P as t}from"./tweakpane.C0HtAJSg1755656106911.js";import{e,a as s}from"./@tresjs.DiA_9BZG1755656106911.js";import{d as a,j as i,a6 as r,r as n,w as o,G as h,o as l,I as p,a7 as d,a8 as c,h as u,e as g,f,u as m}from"./@vue.BzMISRrV1755656106911.js";import{c5 as y,aL as x,bL as T,a3 as w,C as b}from"./three.QlBabAUP1755656106911.js";import"./postprocessing.DMvYFiwL1755656106911.js";import"./@vueuse.DfjcWOXI1755656106911.js";function M(t,e){return Math.random()*(e-t)+t}function v(t,e){return Math.floor(t+Math.random()*(e-t+1))}let j=0,C=0,k=null;let P=0;const A=[];let D=10;class L{constructor(){this.path=[],this.rspeed=M(1,2),this.count=v(10,30),this.x=j/2+1,this.y=C/2+1,this.target={x:j/2,y:C/2},this.dist=0,this.angle=0,this.hue=P/5,this.life=1,this.updateAngle(),this.updateDist()}step(t){this.speed=this.rspeed*D,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed,this.updateDist(),this.dist<this.speed&&(this.x=this.target.x,this.y=this.target.y,this.changeTarget()),this.path.push({x:this.x,y:this.y}),this.path.length>this.count&&this.path.shift(),this.life-=.001,this.life<=0&&(this.path=null,A.splice(t,1))}updateDist(){const t=this.target.x-this.x,e=this.target.y-this.y;this.dist=Math.sqrt(t*t+e*e)}updateAngle(){const t=this.target.x-this.x,e=this.target.y-this.y;this.angle=Math.atan2(e,t)}changeTarget(){switch(v(0,3)){case 0:this.target.y=this.y-30;break;case 1:this.target.x=this.x+30;break;case 2:this.target.y=this.y+30;break;case 3:this.target.x=this.x-30}this.updateAngle()}draw(){k.beginPath();const t=M(0,10);for(let s=0,a=this.path.length;s<a;s++)k[0===s?"moveTo":"lineTo"](this.path[s].x+M(-t,t),this.path[s].y+M(-t,t));let e=this.hue;e=30,k.strokeStyle=`hsla(${M(0,30)}, 0%, 80%, ${this.life/3})`,k.lineWidth=M(.1,2),k.stroke()}}const S=()=>{P%10==0&&A.push(new L),function(){let t=A.length;for(;t--;)A[t].step(t)}(),k.globalCompositeOperation="destination-out",k.fillStyle="hsla(0, 0%, 10%, 0.1)",k.fillRect(0,0,j,C),k.globalCompositeOperation="lighter",function(){k.save(),k.translate(j/2,C/2),k.translate(-j/2,-C/2);let t=A.length;for(;t--;)A[t].draw(t);k.restore()}(),P++},_=["rotation-x"],B=["args"],G=a({__name:"lightningPattern",props:{size:{default:[10,10]},color:{default:"#fff"},opacity:{default:.95},textureRepeat:{default:[1,1]},speed:{default:10}},setup(t){const s=t,a=i("canvas",{width:1024,height:768,style:{backgroundColor:"green"}});r(a,document.createElement("div")),((t,e,s,a)=>{j=t,C=e,k=s,P=0,D=a;for(let i=0;i<10;i++)A.push(new L)})(1024,768,a.el.getContext("2d"),s.speed);const u=new y(a.el);u.wrapS=x,u.wrapT=x,u.repeat.set(s.textureRepeat[0],s.textureRepeat[1]);const g=n({color:s.color,map:u,side:w,transparent:!0,opacity:s.opacity,blending:T,flatShading:!0,depthTest:!0});o((()=>s.color),(t=>{g.color=new b(t)})),o((()=>s.opacity),(t=>{g.opacity=t})),o((()=>s.speed),(t=>{var e;e=s.speed,D=e}));const{onLoop:f}=e();return f((()=>{S(),u.needsUpdate=!0})),(t,e)=>(l(),h("TresMesh",{"rotation-x":-Math.PI/2},[p("TresPlaneGeometry",{args:s.size},null,8,B),p("TresMeshStandardMaterial",d(c(g)),null,16)],8,_))}}),R=a({__name:"canvasFloor",setup(e){const a=n({color:"#1a79fe",opacity:.95,speed:10}),r=new t({title:"canvas地面",expanded:!0});return r.addBinding(a,"color",{label:"颜色"}),r.addBinding(a,"opacity",{label:"透明度",min:0,max:1,step:.01}),r.addBinding(a,"speed",{label:"速度",min:0,max:20,step:1}),(t,e)=>{const r=u("TresCanvas");return l(),g(r,{clearColor:"#000000","window-size":""},{default:f((()=>[e[0]||(e[0]=p("TresPerspectiveCamera",{position:[15,20,0],fov:45,near:.1,far:1e4},null,-1)),i(m(s),{enableDamping:"","auto-rotate":""}),e[1]||(e[1]=p("TresAmbientLight",{intensity:6},null,-1)),e[2]||(e[2]=p("TresDirectionalLight",{position:[0,8,0],intensity:1,color:"#fff"},null,-1)),e[3]||(e[3]=p("TresMesh",{position:[0,1,0]},[p("TresBoxGeometry",{args:[1,1,1]}),p("TresMeshNormalMaterial")],-1)),i(G,d(c(a)),null,16),e[4]||(e[4]=p("TresAxesHelper",{args:[10],position:[0,0,0]},null,-1)),e[5]||(e[5]=p("TresGridHelper",{args:[10,10],position:[0,0,0]},null,-1))])),_:1})}}});export{R as default};

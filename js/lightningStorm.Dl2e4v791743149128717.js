import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.RZO-bOMi1743149128717.js";import{B as i,b as s,cG as n,aj as e,a8 as r,a as o,au as a,A as c,l as h,_ as u}from"./three.hBhj0ayh1743149128717.js";import{e as l,I as d,K as p}from"./@tresjs.GCV-1VTd1743149128717.js";import{a as m}from"./simplex-noise.jB2HxhHB1743149128717.js";import{d as f,a2 as g,o as y,H as b,u as S,r as v,j as w,g as x,m as _,F as I}from"./@vue.L-brCdZe1743149128717.js";import"./index.fQglrCFX1743149128717.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.xndDvmMk1743149128717.js";import"./three-custom-shader-material.bIkXJfH11743149128717.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1743149128717.js";import"./postprocessing.JYKQQ2FM1743149128717.js";import"./@vueuse.K3OHOx4F1743149128717.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.sbQzkb7M1743149128717.js";import"./all.three.I-k2KxK_1743149128717.js";import"./oimophysics.WhCxc1Ho1743149128717.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.8hkhq6hK1743149128717.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.UEeH8PAo1743149128717.js";import"./index.PmOAufZy1743149128717.js";import"./three-stdlib.WxcFbdsf1743149128717.js";import"./@pmndrs.ln9AfXsI1743149128717.js";import"./object-hash.7UG-M_Ap1743149128717.js";import"./@amap.vd0D2A1W1743149128717.js";import"./jszip.i7DSFoEV1743149128717.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.9oOcJ0Ay1743149128717.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.xvuN9ipv1743149128717.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.dbyAXyPH1743149128717.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.vQz40eJV1743149128717.js";const M=A;function T(){const t=["RAY_STEADY","RAY_VANISHING","updateMesh","COS30DEG","positionVariationFactor","input","position","toString","currentVertex","down","maxSubrayRecursion","vPos","simplexX","currentSeed","middlePos","recursion","side","maxIterations","positionAttribute","roughness","log","8554JFQSOf","maxRaySegments","isInitialSegment","copy","700OuFNoV","straightness","test","indices","RAY_UNBORN","floor","recursionProbability","currentCreateTriangleVertices","generateUVs","beginVanishingTime","radius0Factor","ramification","action","3348992DWHvHS","isEternal","getNewSegment","onDecideSubrayCreation","minRadius","length","constructor","fractalRay","setSeed","subVectors","simplexY","set","exception","currentCoordinate","seed","endPropagationTime","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","SIN30DEG","usage","warn","fractalRayRecursive","isStatic","iteration","crossVectors","copyParameters","timeFraction","maxSubrays","destOffset","init","addNewSubray","pos0","subrayCylinderPosition","time","currentSegmentIndex","vanishingTimeFactor","seedGenerator","raySegments","currentSubray","onSubrayCreation","createSegment","lerpVectors","uvs","gger","radius1","343327PIQthu","push","fillMesh","randomGenerator","chain","lerp","array","max","middleLinPos","sub","RAY_EXTINGUISHED","setAttribute","return (function() ","fraction0","createDefaultSubrayCreationCallbacks","clone","createSubray","birthTime","cos","apply","noiseSeed","uvsAttribute","fraction1","createRandomGenerator","1485520UYzRTI","deathTime",'{}.constructor("return this")( )',"rayParameters","visible","initSubray","currentSegmentCallback","sourceOffset","subrayDutyCycle","LightningStrike","add","pow","isLightningStrike","prototype","needsUpdate","subrays","timeScale","380588CvcYsu","multiplyScalar","propagationTimeFactor","linPos0","normalize","currentIndex","RAY_INITIALIZED","sin","up1","RAY_PROPAGATING","subrayPeriod","4479yIUzcO","vertices","bind","index","2411514KrdEGa","__proto__","min","radius1Factor","newPos","table","radius0","numSubrays","state","subrayConePosition","drawRange","linPos1","createPrism","random","simplexZ","up0","error","subrayProbability","forwardsFill","pos1","cross1","forwards","createMesh","createTriangleVerticesWithoutUVs","stateObject","debu","trace","currentUVCoordinate","getSeed","console"];return(T=function(){return t})()}!function(t,i){const s=A,n=T();for(;;)try{if(206789===parseInt(s(261))/1+-parseInt(s(134))/2+-parseInt(s(145))/3*(parseInt(s(204))/4)+parseInt(s(117))/5+-parseInt(s(149))/6+parseInt(s(200))/7+parseInt(s(217))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(112)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){R(this,(function(){const t=A,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(233),"i"),n=F("init");i[t(206)](n+t(265))&&s.test(n+t(184))?F():n("0")}))()}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(t,i){const s=T();return A=function(t,i){return s[t-=107]},A(t,i)}C(void 0,(function(){const t=A;let i;try{i=Function(t(273)+t(119)+");")()}catch(e){i=window}const s=i[t(178)]=i.console||{},n=[t(199),t(236),"info",t(165),t(229),t(154),t(175)];for(let r=0;r<n[t(222)];r++){const i=C[t(223)][t(130)].bind(C),e=n[r],o=s[e]||i;i[t(150)]=C[t(147)](C),i[t(186)]=o[t(186)][t(147)](o),s[e]=i}}))();class j extends i{constructor(t={}){const i=A;super(),this[i(129)]=!0,this.type=i(126),this[i(245)](j[i(241)](t,t)),this.createMesh()}static createRandomGenerator(){const t=A,i=2053,s=[];for(let e=0;e<i;e++)s[t(262)](Math.random());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(192)]];return n[e(192)]=(n[e(192)]+1)%i,r},getSeed:function(){return n[t(192)]/i},setSeed:function(s){n[t(192)]=Math.floor(s*i)%i}};return n}static[M(241)](t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t[n(124)]=void 0!==i.sourceOffset?e(i[n(124)]):new s(0,100,0),t.destOffset=void 0!==i[n(244)]?e(i[n(244)]):new s(0,0,0),t[n(133)]=void 0!==i.timeScale?i[n(133)]:1,t[n(198)]=void 0!==i[n(198)]?i[n(198)]:.9,t[n(205)]=void 0!==i[n(205)]?i[n(205)]:.7,t.up0=void 0!==i[n(164)]?e(i.up0):new s(0,0,1),t.up1=void 0!==i[n(142)]?e(i.up1):new s(0,0,1),t[n(155)]=void 0!==i[n(155)]?i[n(155)]:1,t.radius1=void 0!==i[n(260)]?i.radius1:1,t.radius0Factor=void 0!==i.radius0Factor?i[n(214)]:.5,t.radius1Factor=void 0!==i[n(152)]?i[n(152)]:.2,t[n(221)]=void 0!==i[n(221)]?i[n(221)]:.2,t[n(218)]=void 0!==i[n(218)]?i[n(218)]:void 0===i[n(110)]||void 0===i[n(118)],t[n(110)]=i[n(110)],t.deathTime=i[n(118)],t[n(136)]=void 0!==i.propagationTimeFactor?i[n(136)]:.1,t.vanishingTimeFactor=void 0!==i.vanishingTimeFactor?i[n(251)]:.9,t[n(144)]=void 0!==i[n(144)]?i[n(144)]:4,t.subrayDutyCycle=void 0!==i.subrayDutyCycle?i[n(125)]:.6,t.maxIterations=void 0!==i[n(196)]?i.maxIterations:9,t[n(238)]=void 0!==i[n(238)]&&i.isStatic,t[n(215)]=void 0!==i[n(215)]?i[n(215)]:5,t[n(189)]=void 0!==i[n(189)]?i.maxSubrayRecursion:3,t.recursionProbability=void 0!==i[n(210)]?i.recursionProbability:.6,t.generateUVs=void 0!==i[n(212)]&&i[n(212)],t[n(264)]=i[n(264)],t[n(113)]=i[n(113)],t[n(220)]=i[n(220)],t[n(255)]=i[n(255)],t}update(t){const i=M;this.isStatic||(this.rayParameters[i(218)]||this[i(120)][i(110)]<=t&&t<=this[i(120)][i(118)]?(this.updateMesh(t),t<this.subrays[0].endPropagationTime?this[i(157)]=j[i(143)]:t>this.subrays[0][i(213)]?this[i(157)]=j[i(180)]:this[i(157)]=j[i(179)],this[i(121)]=!0):(this.visible=!1,t<this[i(120)][i(110)]?this.state=j[i(208)]:this[i(157)]=j[i(271)]))}init(t){const i=M;this[i(120)]=t,this.maxIterations=void 0!==t[i(196)]?Math[i(209)](t[i(196)]):9,t[i(196)]=this.maxIterations,this[i(238)]=void 0!==t[i(238)]&&t.isStatic,t.isStatic=this[i(238)],this.ramification=void 0!==t[i(215)]?Math[i(209)](t[i(215)]):5,t[i(215)]=this[i(215)],this[i(189)]=void 0!==t[i(189)]?Math[i(209)](t[i(189)]):3,t[i(189)]=this[i(189)],this[i(210)]=void 0!==t.recursionProbability?t[i(210)]:.6,t.recursionProbability=this[i(210)],this[i(212)]=void 0!==t[i(212)]&&t[i(212)],t[i(212)]=this[i(212)],void 0!==t[i(264)]?(this[i(264)]=t[i(264)],this[i(252)]=t[i(264)],void 0!==t[i(113)]&&this.seedGenerator.setSeed(t[i(113)])):(this.randomGenerator=j[i(116)](),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this[i(220)]=t[i(220)]:(this[i(107)](),void 0!==t[i(255)]&&(this.onSubrayCreation=t[i(255)])),this.state=j[i(140)],this[i(243)]=Math.ceil(1+Math.pow(this[i(215)],Math.max(0,this[i(189)]-1))),t.maxSubrays=this.maxSubrays,this.maxRaySegments=2*(1<<this[i(196)]),this[i(132)]=[];for(let s=0;s<this[i(243)];s++)this[i(132)][i(262)](this.createSubray());this.raySegments=[];for(let s=0;s<this[i(201)];s++)this[i(253)][i(262)](this[i(256)]());this[i(249)]=0,this[i(242)]=0,this.currentSegmentCallback=null,this[i(211)]=this[i(212)]?this.createTriangleVerticesWithUVs:this[i(172)],this[i(156)]=0,this[i(254)]=null,this.currentSegmentIndex=0,this[i(202)]=!1,this.subrayProbability=0,this[i(187)]=0,this.currentIndex=0,this[i(230)]=0,this.currentUVCoordinate=0,this[i(146)]=null,this[i(258)]=null,this[i(207)]=null,this[i(197)]=null,this[i(114)]=null,this[i(191)]=m(this[i(252)][i(162)]),this[i(227)]=m(this[i(252)][i(162)]),this[i(163)]=m(this[i(252)].random),this[i(170)]=new s,this[i(167)]=new s,this[i(195)]=new s,this[i(188)]=new s,this[i(193)]=new s,this.middleLinPos=new s,this[i(153)]=new s,this[i(190)]=new s,this.cross1=new s}[M(171)](){const t=M,i=1<<this[t(196)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(243)];this[t(146)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(212)]&&(this[t(258)]=new Float32Array(2*s)),this[t(263)](0),this.setIndex(new n(this[t(207)],1)),this[t(197)]=new e(this[t(146)],3),this[t(272)](t(185),this[t(197)]),this[t(212)]&&(this[t(114)]=new e(new Float32Array(this[t(258)]),2),this.setAttribute("uv",this[t(114)])),!this[t(238)]&&(this[t(148)][t(235)]=r,this[t(197)].usage=r,this[t(212)]&&(this.uvsAttribute[t(235)]=r)),this[t(146)]=this[t(197)].array,this[t(207)]=this.index[t(267)],this[t(212)]&&(this[t(258)]=this[t(114)][t(267)])}[M(181)](t){const i=M;this.fillMesh(t),this[i(159)].count=this[i(139)],this[i(148)][i(131)]=!0,this[i(197)][i(131)]=!0,this[i(212)]&&(this[i(114)][i(131)]=!0)}fillMesh(t){const i=M,s=this;this[i(187)]=0,this[i(139)]=0,this[i(230)]=0,this[i(176)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(254)];t<r[e(110)]||(this[e(120)].isEternal&&0==s[e(254)][e(194)]?(s[e(161)](n),s[e(220)](n,s)):t<r[e(232)]?s.timeFraction>=n.fraction0*r[e(136)]&&(s.createPrism(n),s[e(220)](n,s)):t<r[e(213)]?(s[e(161)](n),s.onDecideSubrayCreation(n,s)):(s[e(242)]<=r[e(251)]+n[e(115)]*(1-r[e(251)])&&s[e(161)](n),s.onDecideSubrayCreation(n,s)))}))}[M(246)](){return this[M(132)][this.numSubrays++]}[M(122)](t,i){const s=M;t[s(247)][s(203)](i.sourceOffset),t[s(168)][s(203)](i[s(244)]),t[s(164)][s(203)](i[s(164)]),t.up1.copy(i.up1),t[s(155)]=i.radius0,t[s(260)]=i[s(260)],t[s(110)]=i[s(110)],t[s(118)]=i[s(118)],t[s(133)]=i[s(133)],t.roughness=i[s(198)],t[s(205)]=i[s(205)],t[s(136)]=i[s(136)],t[s(251)]=i[s(251)],t[s(196)]=this.maxIterations,t.seed=void 0!==i[s(113)]?i[s(113)]:0,t.recursion=0}[M(224)](t,i){const s=M;this.time=t,this.currentSegmentCallback=i,this[s(156)]=0,this.initSubray(this[s(246)](),this[s(120)]);for(let n=0;n<this[s(156)];n++){const i=this[s(132)][n];this[s(254)]=i,this[s(264)].setSeed(i[s(231)]),i.endPropagationTime=o[s(266)](i.birthTime,i[s(118)],i.propagationTimeFactor),i[s(213)]=o[s(266)](i.deathTime,i.birthTime,1-i[s(251)]);const e=this[s(264)][s(162)];i[s(137)][s(228)](e(),e(),e())[s(135)](1e3),i[s(160)][s(228)](e(),e(),e()).multiplyScalar(1e3),this[s(242)]=(t-i.birthTime)/(i[s(118)]-i[s(110)]),this[s(250)]=0,this[s(202)]=!0;const r=this.getNewSegment();r[s(239)]=0,r.pos0[s(203)](i[s(247)]),r[s(168)][s(203)](i[s(168)]),r[s(137)][s(203)](i[s(137)]),r.linPos1.copy(i[s(160)]),r.up0.copy(i[s(164)]),r[s(142)][s(203)](i[s(142)]),r[s(155)]=i[s(155)],r[s(260)]=i[s(260)],r[s(274)]=0,r[s(115)]=1,r[s(183)]=1-i[s(205)],this[s(166)]=this[s(215)]*Math[s(128)](this[s(210)],i[s(194)])/(1<<i[s(196)]),this[s(237)](r)}this[s(123)]=null,this[s(254)]=null}[M(237)](t){const i=M;if(t[i(239)]>=this[i(254)][i(196)])return void this[i(123)](t);this[i(170)].subVectors(t[i(168)],t[i(247)]);let s=this[i(170)].length();s<1e-6&&(this[i(170)][i(228)](0,0,.01),s=this.forwards.length());const n=.5*(t[i(155)]+t[i(260)]),e=.5*(t[i(274)]+t.fraction1),r=this.time*this[i(254)].timeScale*Math[i(128)](2,t.iteration);this[i(193)][i(257)](t[i(247)],t[i(168)],.5),this[i(269)][i(257)](t.linPos0,t[i(160)],.5);const o=this.middleLinPos;this[i(153)][i(228)](this[i(191)](o.x,o.y,o.z,r),this[i(227)](o.x,o.y,o.z,r),this[i(163)](o.x,o.y,o.z,r)),this[i(153)][i(135)](t[i(183)]*s),this.newPos.add(this[i(193)]);const a=this.getNewSegment();a.pos0.copy(t[i(247)]),a[i(168)][i(203)](this.newPos),a.linPos0[i(203)](t.linPos0),a[i(160)][i(203)](this.middleLinPos),a[i(164)].copy(t[i(164)]),a[i(142)][i(203)](t[i(142)]),a[i(155)]=t[i(155)],a[i(260)]=n,a[i(274)]=t.fraction0,a[i(115)]=e,a[i(183)]=t[i(183)]*this[i(254)][i(198)],a[i(239)]=t[i(239)]+1;const c=this[i(219)]();c[i(247)][i(203)](this[i(153)]),c[i(168)][i(203)](t[i(168)]),c.linPos0[i(203)](this[i(269)]),c[i(160)][i(203)](t[i(160)]),this[i(169)].crossVectors(t[i(164)],this[i(170)][i(138)]()),c[i(164)][i(240)](this[i(170)],this[i(169)]).normalize(),c[i(142)][i(203)](t.up1),c.radius0=n,c.radius1=t.radius1,c[i(274)]=e,c.fraction1=t[i(115)],c[i(183)]=t.positionVariationFactor*this[i(254)][i(198)],c.iteration=t[i(239)]+1,this[i(237)](a),this.fractalRayRecursive(c)}createPrism(t){const i=M;this[i(167)][i(226)](t[i(168)],t[i(247)])[i(138)](),this[i(202)]&&(this[i(211)](t[i(247)],t[i(164)],this.forwardsFill,t[i(155)],0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(t[i(168)],t[i(164)],this.forwardsFill,t[i(260)],t[i(115)]),this.createPrismFaces()}[M(172)](t,i,s,n){const e=M;this[e(195)][e(240)](i,s).multiplyScalar(n*j[e(182)]),this[e(188)][e(203)](i)[e(135)](-n*j[e(234)]);const r=this.vPos,o=this[e(146)];r[e(203)](t)[e(270)](this[e(195)]).add(this[e(188)]),o[this[e(230)]++]=r.x,o[this[e(230)]++]=r.y,o[this[e(230)]++]=r.z,r[e(203)](t).add(this.side).add(this.down),o[this.currentCoordinate++]=r.x,o[this[e(230)]++]=r.y,o[this[e(230)]++]=r.z,r[e(203)](i)[e(135)](n).add(t),o[this[e(230)]++]=r.x,o[this[e(230)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(187)]+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=M;this[r(195)][r(240)](i,s)[r(135)](n*j[r(182)]),this.down[r(203)](i)[r(135)](-n*j[r(234)]);const o=this[r(190)],a=this.vertices,c=this[r(258)];o.copy(t).sub(this[r(195)])[r(127)](this[r(188)]),a[this[r(230)]++]=o.x,a[this[r(230)]++]=o.y,a[this[r(230)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(176)]++]=0,o[r(203)](t)[r(127)](this[r(195)])[r(127)](this[r(188)]),a[this.currentCoordinate++]=o.x,a[this[r(230)]++]=o.y,a[this[r(230)]++]=o.z,c[this[r(176)]++]=e,c[this[r(176)]++]=.5,o[r(203)](i)[r(135)](n)[r(127)](t),a[this[r(230)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(230)]++]=o.z,c[this[r(176)]++]=e,c[this.currentUVCoordinate++]=1,this[r(187)]+=3}createPrismFaces(t){const i=M,s=this.indices;t=this[i(187)]-6,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+2,s[this[i(139)]++]=t+5,s[this[i(139)]++]=t+1,s[this[i(139)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(139)]++]=t+0,s[this[i(139)]++]=t+1,s[this[i(139)]++]=t+4,s[this[i(139)]++]=t+0,s[this[i(139)]++]=t+4,s[this[i(139)]++]=t+3,s[this[i(139)]++]=t+2,s[this[i(139)]++]=t+0,s[this[i(139)]++]=t+3,s[this[i(139)]++]=t+2,s[this.currentIndex++]=t+3,s[this[i(139)]++]=t+5}[M(107)](){const t=M,i=this[t(264)][t(162)];this[t(220)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(120)].subrayPeriod,c=n[e(120)][e(125)],h=n[e(120)][e(218)]&&0==r[e(194)]?-i()*a:o[e(266)](r[e(110)],r.endPropagationTime,s[e(274)])-i()*a,u=n.time-h,l=Math[e(209)](u/a),d=i()*(l+1);let p=0;if(u%a<=c*a&&(p=n.subrayProbability),r[e(194)]<n[e(189)]&&n.numSubrays<n[e(243)]&&i()<p){const t=n[e(246)](),o=n[e(264)][e(177)]();t[e(231)]=d,n[e(264)][e(225)](d),t[e(194)]=r[e(194)]+1,t[e(196)]=Math[e(268)](1,r[e(196)]-1),t[e(137)][e(228)](i(),i(),i()).multiplyScalar(1e3),t[e(160)][e(228)](i(),i(),i())[e(135)](1e3),t[e(164)].copy(r[e(164)]),t[e(142)][e(203)](r[e(142)]),t[e(155)]=s[e(155)]*n[e(120)][e(214)],t.radius1=Math.min(n[e(120)].minRadius,s.radius1*n.rayParameters.radius1Factor),t.birthTime=h+l*a,t[e(118)]=t[e(110)]+a*c,!n[e(120)][e(218)]&&0==r[e(194)]&&(t.birthTime=Math[e(268)](t[e(110)],r[e(110)]),t[e(118)]=Math[e(151)](t.deathTime,r.deathTime)),t.timeScale=2*r[e(133)],t[e(198)]=r[e(198)],t[e(205)]=r[e(205)],t[e(136)]=r[e(136)],t[e(251)]=r[e(251)],n[e(255)](s,r,t,n),n[e(264)][e(225)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(255)]=function(i,s,n,e){e[t(248)](i,s,n,.5,.6,.2)},this[t(158)]=function(s,o,c,h,u,l){const d=t;c[d(247)][d(203)](s.pos0),n[d(226)](o[d(168)],o[d(247)]),e[d(203)](n).normalize(),n[d(135)](s[d(274)]+(1-s.fraction0)*(i()*h));const p=n[d(222)]();r.crossVectors(o[d(164)],e);const m=2*Math.PI*i();r[d(135)](Math.cos(m)),a[d(203)](o[d(164)])[d(135)](Math[d(141)](m)),c[d(168)][d(203)](r)[d(127)](a)[d(135)](p*u*(l+i()*(1-l))).add(n).add(o[d(247)])},this[t(248)]=function(s,o,c,h,u,l){const d=t;c[d(247)].copy(s.pos0),n.subVectors(o.pos1,o[d(247)]),e[d(203)](n).normalize(),n.multiplyScalar(s[d(274)]+(1-s[d(274)])*((2*i()-1)*h));const p=n[d(222)]();r[d(240)](o[d(164)],e);const m=2*Math.PI*i();r[d(135)](Math[d(111)](m)),a.copy(o.up0)[d(135)](Math[d(141)](m)),c[d(168)].copy(r).add(a)[d(135)](p*u*(l+i()*(1-l))).add(n).add(o.pos0)}}[M(109)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(253)][this[t(250)]++]}[M(203)](t){const i=M;return super[i(203)](t),this.init(j.copyParameters({},t[i(120)])),this}[M(108)](){const t=M;return new(this[t(223)])(j.copyParameters({},this[t(120)]))}}function F(t){function i(t){const s=A;if("string"==typeof t)return function(t){}[s(223)]("while (true) {}")[s(112)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(223)]("debu"+s(259)).call(s(216)):function(){return!1}[s(223)](s(174)+s(259))[s(112)](s(173)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j.RAY_INITIALIZED=0,j[M(208)]=1,j[M(143)]=2,j[M(179)]=3,j[M(180)]=4,j[M(271)]=5,j[M(182)]=Math[M(111)](30*Math.PI/180),j[M(234)]=Math[M(141)](30*Math.PI/180);const z=D;!function(t,i){const s=D,n=H();for(;;)try{if(521601===parseInt(s(166))/1+-parseInt(s(225))/2*(parseInt(s(201))/3)+parseInt(s(188))/4+-parseInt(s(178))/5*(-parseInt(s(191))/6)+-parseInt(s(224))/7+-parseInt(s(176))/8+-parseInt(s(218))/9*(-parseInt(s(192))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(180)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(t,i){const s=H();return D=function(t,i){return s[t-=159]},D(t,i)}function H(){const t=["269196CkpvbJ","6970xodFNO","onRayPosition","call","lerp","function *\\( *\\)","remove","set","clone","trace","8964rBQcbQ","splice","random","debu","push","__proto__","stateObject","pop","sourceOffset","lightningMaterial","deadLightningsMeshes","size","rayParameters","isLightningStorm","RAY_PROPAGATING","indexOf","exception","3285ORUphH","lightningMinDuration","nextLightningTime",'{}.constructor("return this")( )',"console","onLightningDown","4449788wcBiNO","4UmrvCs","length","maxLightnings","lightningParameters","string","gger","getNextLightningTime","init","lightningMinPeriod","error","log","inited","stormParams","lightningMaxDuration","copyParameters","bind","while (true) {}","copy","isEternal","1001445vKAYqA","geometry","multiplyScalar","add","maxSlope","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","constructor","toString","minHeight","6642720FBXVhj","RAY_EXTINGUISHED","65UpyGgH","deathTime","apply","lightningsMeshes","destOffset","prototype","counter","test","state","warn","617972RLzKaW","maxHeight","lightningMaxPeriod"];return(H=function(){return t})()}!function(){V(this,(function(){const t=D,i=new RegExp(t(196)),s=new RegExp(t(171),"i"),n=G(t(232));i[t(185)](n+"chain")&&s.test(n+"input")?G():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(180)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();O(void 0,(function(){const t=D,i=function(){const t=D;let i;try{i=Function(t(172)+t(221)+");")()}catch(s){i=window}return i}(),s=i[t(222)]=i[t(222)]||{},n=[t(235),t(187),"info",t(234),t(217),"table",t(200)];for(let e=0;e<n.length;e++){const i=O[t(173)][t(183)].bind(O),r=n[e],o=s[r]||i;i[t(206)]=O[t(162)](O),i.toString=o[t(174)][t(162)](o),s[r]=i}}))();class L extends a{constructor(t={}){const i=D;super(),this[i(214)]=!0,this[i(159)]=t,t.size=void 0!==t[i(212)]?t[i(212)]:1e3,t[i(175)]=void 0!==t[i(175)]?t[i(175)]:80,t[i(189)]=void 0!==t[i(189)]?t.maxHeight:100,t[i(170)]=void 0!==t.maxSlope?t[i(170)]:1.1,t[i(227)]=void 0!==t[i(227)]?t[i(227)]:3,t[i(233)]=void 0!==t[i(233)]?t.lightningMinPeriod:3,t[i(190)]=void 0!==t[i(190)]?t[i(190)]:7,t.lightningMinDuration=void 0!==t[i(219)]?t[i(219)]:1,t[i(160)]=void 0!==t[i(160)]?t[i(160)]:2.5,this[i(228)]=j[i(161)](t[i(228)],t.lightningParameters),this[i(228)][i(165)]=!1,this.lightningMaterial=void 0!==t[i(210)]?t[i(210)]:new c({color:11599871}),void 0!==t.onRayPosition?this.onRayPosition=t[i(193)]:this.onRayPosition=function(s,n){const e=i;n[e(198)]((Math.random()-.5)*t[e(212)],0,(Math[e(203)]()-.5)*t[e(212)]);const r=o[e(195)](t.minHeight,t[e(189)],Math.random());s[e(198)](t[e(170)]*(2*Math[e(203)]()-1),1,t[e(170)]*(2*Math[e(203)]()-1))[e(168)](r).add(n)},this[i(223)]=t.onLightningDown,this.inited=!1,this[i(220)]=0,this[i(181)]=[],this[i(211)]=[];for(let s=0;s<this[i(159)][i(227)];s++){const t=new j(j[i(161)]({},this[i(228)])),s=new h(t,this[i(210)]);this[i(211)][i(205)](s)}}update(t){const i=D;if(!this[i(236)]&&(this[i(220)]=this[i(231)](t)*Math.random(),this[i(236)]=!0),t>=this[i(220)]){const s=this.deadLightningsMeshes[i(208)]();if(s){const n=j[i(161)](s[i(167)][i(213)],this[i(228)]);n.birthTime=t,n[i(179)]=t+o[i(195)](this[i(159)].lightningMinDuration,this[i(159)].lightningMaxDuration,Math[i(203)]()),this[i(193)](n[i(209)],n[i(182)]),n.noiseSeed=Math[i(203)](),this[i(169)](s),this[i(181)][i(205)](s)}this[i(220)]=this.getNextLightningTime(t)}let s=0,n=this[i(181)][i(226)];for(;s<n;){const e=this[i(181)][s],r=e.geometry,o=r.state;r.update(t),o===j[i(215)]&&r[i(186)]>o&&this[i(223)]&&this[i(223)](r),r[i(186)]===j[i(177)]?(this[i(181)][i(202)](this[i(181)][i(216)](e),1),this[i(211)][i(205)](e),this[i(197)](e),n--):s++}}[z(231)](t){const i=z;return t+o[i(195)](this.stormParams[i(233)],this[i(159)][i(190)],Math[i(203)]())/(this[i(159)][i(227)]+1)}[z(164)](t,i){const s=z;return super[s(164)](t,i),this[s(159)][s(212)]=t[s(159)].size,this[s(159)][s(175)]=t[s(159)][s(175)],this.stormParams.maxHeight=t[s(159)][s(189)],this[s(159)][s(170)]=t[s(159)][s(170)],this[s(159)][s(227)]=t[s(159)][s(227)],this.stormParams[s(233)]=t.stormParams.lightningMinPeriod,this[s(159)][s(190)]=t[s(159)][s(190)],this[s(159)][s(219)]=t[s(159)][s(219)],this[s(159)].lightningMaxDuration=t[s(159)][s(160)],this[s(228)]=j[s(161)]({},t[s(228)]),this[s(210)]=t[s(159)][s(210)],this.onLightningDown=t[s(223)],this}[z(199)](){const t=z;return new(this[t(173)])(this[t(159)])[t(164)](this)}}function G(t){function i(t){const s=D;if(typeof t===s(229))return function(t){}[s(173)](s(163))[s(180)](s(184));1!==(""+t/t)[s(226)]||t%20==0?function(){return!0}.constructor("debugger")[s(194)]("action"):function(){return!1}[s(173)](s(204)+s(230))[s(180)](s(207)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=Z;function U(){const t=["sourceOffset","3509ynbqLf","timeScale","copy","bind",'{}.constructor("return this")( )',"radius0","16iskdIA","toString","__proto__","constructor","object","stormParams","exception","#b0ffff","apply","lightStorm","add","MeshBasicMaterial","color","sub","stateObject","console","1011033OUKTWv","table","4187616iuXZmq","chain","input","warn","call","straightness","function *\\( *\\)","roughness","prototype","maxHeight","size","subrayConePosition","150nknNeY","Vector3","subVectors","set","multiplyScalar","primitive","46952fBhPyK","gger","dot","debu","length","counter","pos1","Color","7iudwqe","rayParameters","subrayDutyCycle","test","addVectors","1236648GQZZvk","while (true) {}","maxLightnings","67325NGYkSW","37330DSIteQ","string","7907xiRtLf","radius1","info","minHeight"];return(U=function(){return t})()}!function(t,i){const s=Z,n=U();for(;;)try{if(322199===-parseInt(s(303))/1*(parseInt(s(314))/2)+parseInt(s(278))/3*(-parseInt(s(284))/4)+-parseInt(s(300))/5+parseInt(s(297))/6+-parseInt(s(292))/7*(parseInt(s(266))/8)+parseInt(s(264))/9+-parseInt(s(301))/10*(-parseInt(s(308))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(322)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){E(this,(function(){const t=Z,i=new RegExp(t(272)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=B("init");i.test(n+t(267))&&s[t(295)](n+t(268))?B():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();k(void 0,(function(){const t=Z,i=function(){const t=Z;let i;try{i=Function("return (function() "+t(312)+");")()}catch(s){i=window}return i}(),s=i[t(263)]=i[t(263)]||{},n=["log",t(269),t(305),"error",t(320),t(265),"trace"];for(let e=0;e<n[t(288)];e++){const i=k.constructor[t(274)][t(311)](k),r=n[e],o=s[r]||i;i[t(316)]=k[t(311)](k),i.toString=o[t(315)].bind(o),s[r]=i}}))();const Y=[N(318)];function Z(t,i){const s=U();return Z=function(t,i){return s[t-=262]},Z(t,i)}const $=f({__name:N(323),props:{color:{default:N(321)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,s=t,n=new(u[i(291)])(s[i(326)]),e=new(u[i(325)])({color:n}),r=new(u[i(279)])(0,-1,0);let o=0;const a=new(u[i(279)]),c=new(u[i(279)]),h={roughness:s[i(273)],straightness:s.straightness,radius0:s[i(313)],radius1:s[i(304)],timeScale:s.timeScale,subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(294)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(277)](t,s,n,.6,.6,.5),o=e.rayParameters[h(307)].y,a[h(280)](n[h(290)],e[h(293)][h(307)]);const u=r[h(286)](a);c[h(310)](r)[h(282)](u),a[h(327)](c);const l=u/o>.5?o/u:1;c[h(282)](l),a[h(324)](c),n[h(290)][h(296)](a,e[h(293)][h(307)])}},d=new L({size:s[i(276)],minHeight:s[i(306)],maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s[i(299)],lightningParameters:h,lightningMaterial:e});g((()=>{const t=i,n=d[t(319)];n[t(276)]=s.size,n[t(306)]=s[t(306)],n[t(275)]=s.maxHeight,e[t(326)][t(281)](s[t(326)]),h[t(273)]=s.roughness,h[t(271)]=s.straightness,h.radius0=s[t(313)],h[t(304)]=s[t(304)],h[t(309)]=s[t(309)]}));const{onLoop:p}=l();return p((({elapsed:t})=>{d.update(t)})),(t,s)=>{const n=i;return y(),b(n(283),{object:S(d),renderOrder:9999},null,8,Y)}}});function B(t){function i(t){const s=Z;if(typeof t===s(302))return function(t){}[s(317)](s(298))[s(322)](s(289));1!==(""+t/t)[s(288)]||t%20==0?function(){return!0}[s(317)](s(287)+"gger")[s(270)]("action"):function(){return!1}.constructor(s(287)+s(285))[s(322)](s(262)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const W=q;function q(t,i){const s=J();return q=function(t,i){return s[t-=346]},q(t,i)}!function(t,i){const s=q,n=J();for(;;)try{if(376375===parseInt(s(370))/1*(parseInt(s(373))/2)+-parseInt(s(376))/3+parseInt(s(385))/4*(parseInt(s(383))/5)+parseInt(s(368))/6*(parseInt(s(382))/7)+-parseInt(s(356))/8*(parseInt(s(381))/9)+-parseInt(s(388))/10*(parseInt(s(393))/11)+parseInt(s(349))/12*(parseInt(s(360))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(392)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Q(this,(function(){const t=q,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt(t(366));i.test(n+"chain")&&s.test(n+"input")?tt():n("0")}))()}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(392)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["bind","860568OngSWZ","counter","straightness","debu","return (function() ","2582505UnoJwU","16471EXzeAY","55DqBtEO","call","123356qqMDmz","radius0","warn","48610gVRedg","action",'{}.constructor("return this")( )',"exception","apply","781JcJyAJ","minHeight","constructor","stateObject","96zAHwng","error","table","roughness","log","trace","__proto__","8hCOpMh","直度度","info","value","593398OTSPjY","lightningStorm","string","color","gger","console","init","while (true) {}","1002gtCBpk","未部半径","197959jcVpyv","length","端部半径","2PikbHi","timeScale"];return(J=function(){return t})()}X(void 0,(function(){const t=q;let i;try{i=Function(t(380)+t(390)+");")()}catch(e){i=window}const s=i[t(365)]=i.console||{},n=[t(353),t(387),t(358),t(350),t(391),t(351),t(354)];for(let r=0;r<n[t(371)];r++){const i=X[t(347)].prototype[t(375)](X),e=n[r],o=s[e]||i;i[t(355)]=X[t(375)](X),i.toString=o.toString.bind(o),s[e]=i}}))();const K=f({__name:W(361),setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(357),value:.65,min:0,max:1,step:.01},radius0:{label:s(372),value:1,min:.1,max:10,step:.01},radius1:{label:s(369),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:x((()=>[w($,{minHeight:S(e).value,maxHeight:S(r)[m(359)],color:S(o)[m(359)],roughness:S(a)[m(359)],straightness:S(c)[m(359)],radius0:S(h)[m(359)],radius1:S(u)[m(359)],timeScale:S(l)[m(359)]},null,8,[m(346),"maxHeight",m(363),m(352),m(378),m(386),"radius1",m(374)]),w(S(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(S(p))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(362))return function(t){}[s(347)](s(367))[s(392)](s(377));1!==(""+t/t)[s(371)]||t%20==0?function(){return!0}.constructor(s(379)+s(364))[s(384)](s(389)):function(){return!1}.constructor(s(379)+s(364)).apply(s(348)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

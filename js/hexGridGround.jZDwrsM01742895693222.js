import{e as n,h as t,a as e,o as i}from"./@tresjs.xCsT8yve1742895693222.js";import{P as o}from"./tweakpane.ivGeiIdz1742895693222.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.TZOFwjHG1742895693222.js";import{_ as s}from"./three.DqHgeVY11742895693222.js";import{d as a,a3 as u,w as c,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as b}from"./@vue.C4dqouNn1742895693222.js";import"./postprocessing.vTwfsnPH1742895693222.js";import"./@vueuse.q8TRDI1e1742895693222.js";import"./all.three.HdzEZEmD1742895693222.js";import"./oimophysics.WhCxc1Ho1742895693222.js";const y=M;!function(n,t){const e=M,i=S();for(;;)try{if(665346===parseInt(e(162))/1*(parseInt(e(132))/2)+-parseInt(e(137))/3+parseInt(e(146))/4+parseInt(e(152))/5*(-parseInt(e(155))/6)+parseInt(e(165))/7*(parseInt(e(133))/8)+-parseInt(e(109))/9+-parseInt(e(147))/10*(-parseInt(e(149))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[M(159)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){_(this,(function(){const n=M,t=new RegExp(n(158)),e=new RegExp(n(151),"i"),i=j(n(120));t[n(130)](i+n(123))&&e[n(130)](i+n(119))?j():i("0")}))()}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[M(159)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(n,t){const e=S();return M=function(n,t){return e[n-=109]},M(n,t)}I(void 0,(function(){const n=M,t=function(){const n=M;let t;try{t=Function(n(143)+n(111)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(161)]||{},i=[n(124),n(163),n(118),n(160),n(131),n(127),"trace"];for(let o=0;o<i[n(110)];o++){const t=I[n(128)][n(141)][n(126)](I),r=i[o],s=e[r]||t;t[n(142)]=I[n(126)](I),t[n(150)]=s[n(150)][n(126)](s),e[r]=t}}))();const k=y(114);function S(){const n=["division","hasMaskTexture","isReversed","info","input","init","action","MeshPhongMaterial","chain","log","direction","bind","table","constructor","side","test","exception","434602SBLxEH","2448mBeQOv","call","maskTexture","stateObject","2964909bJVAsl","wavePow","hexGridMaterial","DoubleSide","prototype","__proto__","return (function() ","value","while (true) {}","4270460nDGhSh","10ToUfMO","divisionScaleX","4288526XrnuMY","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1765bEFeRs","baseMaterial","time","21114YtdqkI","fragmentShader","waveFrequency","function *\\( *\\)","apply","error","console","5NSNwSU","warn","raisedBottom","28406ABdFLD","8008902VmOGTp","length",'{}.constructor("return this")( )',"gger","debu","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n"];return(S=function(){return n})()}const T=a({__name:y(139),props:{baseMaterial:{default:new(s[y(122)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=y;let r,a;const p=i,v={gridWeight:{value:p.gridWeight},raisedBottom:{value:p[o(164)]},waveFrequency:{value:p[o(157)]},wavePow:{value:p[o(138)]},direction:{value:p[o(125)]},isReversed:{value:p.isReversed},hasMaskTexture:{value:p.hasMaskTexture},maskTexture:{value:null},division:{value:p.division},divisionScaleX:{value:p[o(148)]},time:{value:0}};p[o(135)]&&(v[o(135)][o(144)]=([r,a]=u((()=>e([p[o(135)]]))),r=await r,a(),r)),c((()=>[p.gridWeight,p[o(164)],p[o(157)],p[o(138)],p[o(115)],p[o(148)],p[o(125)],p[o(117)],p[o(116)]]),(([n,t,e,i,r,s,a,u,c])=>{const l=o;v.gridWeight[l(144)]=n,v[l(164)][l(144)]=t,v[l(157)].value=e,v[l(138)][l(144)]=i,v[l(115)].value=r,v.divisionScaleX.value=s,v[l(125)][l(144)]=a,v.isReversed[l(144)]=u,v[l(116)][l(144)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;v[t(154)][t(144)]+=n*p.speed})),(n,e)=>{const r=o;return l(),f(d(t),{baseMaterial:i[r(153)],vertexShader:k,side:s[r(140)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[r(153),r(129),r(156)])}}});function j(n){function t(n){const e=M;if("string"==typeof n)return function(n){}[e(128)](e(145))[e(159)]("counter");1!==(""+n/n)[e(110)]||n%20==0?function(){return!0}.constructor(e(113)+e(112))[e(134)](e(121)):function(){return!1}.constructor(e(113)+e(112)).apply(e(136)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const B=P;!function(n,t){const e=P,i=A();for(;;)try{if(381611===-parseInt(e(163))/1*(parseInt(e(196))/2)+-parseInt(e(197))/3+-parseInt(e(181))/4*(-parseInt(e(168))/5)+-parseInt(e(203))/6+-parseInt(e(191))/7+parseInt(e(177))/8*(-parseInt(e(202))/9)+parseInt(e(178))/10)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const R=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[P(164)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){R(this,(function(){const n=P,t=new RegExp(n(172)),e=new RegExp(n(195),"i"),i=W(n(201));t[n(175)](i+n(176))&&e[n(175)](i+"input")?W():i("0")}))()}();const D=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function P(n,t){const e=A();return P=function(n,t){return e[n-=163]},P(n,t)}function A(){const n=["chain","16yjWYBi","21201520JcjRQd","bind","hexGridMesh","228JlEqOk","prototype","error","warn","length","debu","counter","constructor","console","exception","3474513ATobpv","info","gger","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","469682mhfojw","410934SFoBMn","string","rotation","__proto__","init","1232586MyWdgj","2286642UWmkOR","3bOmcxE","apply","MeshBasicMaterial","TresPlaneGeometry","TresMesh","22310GsxmXm","stateObject","trace","$attrs","function *\\( *\\)","baseMaterial","while (true) {}","test"];return(A=function(){return n})()}D(void 0,(function(){const n=P,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(189)]=t[n(189)]||{},i=["log",n(184),n(192),n(183),n(190),"table",n(170)];for(let o=0;o<i[n(185)];o++){const t=D[n(188)][n(182)][n(179)](D),r=i[o],s=e[r]||t;t[n(200)]=D[n(179)](D),t.toString=s[n(194)].bind(s),e[r]=t}}))();const C=[B(199)],F=a({__name:B(180),setup(n){const t=B,e=new(s[t(165)]);return(n,i)=>{const o=t;return l(),p(o(167),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=v(o(166),{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(T,g({baseMaterial:d(e)},n[o(171)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(173)])])),_:1}))],8,C)}}});function W(n){function t(n){const e=P;if(typeof n===e(198))return function(n){}[e(188)](e(174))[e(164)](e(187));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(186)+e(193)).call("action"):function(){return!1}[e(188)](e(186)+e(193)).apply(e(169)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const X=O;!function(n,t){const e=O,i=J();for(;;)try{if(724374===-parseInt(e(458))/1*(-parseInt(e(464))/2)+-parseInt(e(497))/3+parseInt(e(453))/4+-parseInt(e(492))/5+-parseInt(e(487))/6+parseInt(e(455))/7+-parseInt(e(484))/8)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[O(485)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){q(this,(function(){const n=O,t=new RegExp(n(481)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=z(n(450));t[n(465)](i+n(462))&&e.test(i+n(488))?z():i("0")}))()}();const E=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();E(void 0,(function(){const n=O;let t;try{t=Function(n(459)+n(463)+");")()}catch(o){t=window}const e=t[n(470)]=t[n(470)]||{},i=[n(480),"warn",n(479),n(493),n(471),n(474),n(491)];for(let r=0;r<i[n(496)];r++){const t=E[n(490)].prototype[n(466)](E),o=i[r],s=e[o]||t;t[n(476)]=E[n(466)](E),t[n(449)]=s.toString[n(466)](s),e[o]=t}}))();const G=a({__name:X(467),setup(n){const t=X,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:t(473),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(467),expanded:!0});return a[t(472)](s,t(475),{label:"图片纹理"}),a.addBinding(s,t(461),{label:"颜色"}),a[t(472)](s,t(456),{label:"速度",min:-5,max:5,step:.1}),a[t(472)](s,"gridWeight",{label:"网格宽度",min:.001,max:.5,step:.001}),a[t(472)](s,"raisedBottom",{label:t(469),min:.001,max:1,step:.001}),a[t(472)](s,t(452),{label:"分段",min:.001,max:1,step:.001}),a[t(472)](s,t(451),{label:t(448),min:1,max:30,step:.1}),a.addBinding(s,t(446),{label:"网格整体缩放",min:.1,max:50,step:.1}),a[t(472)](s,t(482),{label:t(486),min:.1,max:10,step:.1}),a[t(472)](s,t(477),{label:t(478)}),a[t(472)](s,"direction",{label:"方向类别",min:3,max:6,step:1}),(n,o)=>{const a=t,u=b(a(483));return l(),f(u,{clearColor:a(468),"window-size":""},{default:m((()=>[o[0]||(o[0]=v(a(460),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(i),{enableDamping:"",autoRotate:""}),h(F,g(s,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function z(n){function t(n){const e=O;if(typeof n===e(494))return function(n){}[e(490)](e(447))[e(485)](e(489));1!==(""+n/n)[e(496)]||n%20==0?function(){return!0}.constructor("debu"+e(495)).call("action"):function(){return!1}[e(490)](e(457)+e(495))[e(485)](e(454)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function O(n,t){const e=J();return O=function(n,t){return e[n-=446]},O(n,t)}function J(){const n=["stateObject","5005014msAjvJ","speed","debu","1SXosxT","return (function() ","TresPerspectiveCamera","color","chain",'{}.constructor("return this")( )',"2313886luqgKG","test","bind","hexGridGround","#666666","渐变宽度","console","exception","addBinding","#de62f2","table","hasMaskTexture","__proto__","isReversed","颜色取反","info","log","function *\\( *\\)","divisionScaleX","TresCanvas","2390704yxwTPQ","apply","网格横向缩放","90570ADiWJp","input","counter","constructor","trace","3406960JQgmwa","error","string","gger","length","1575861EYeBJq","division","while (true) {}","渐变强度","toString","init","wavePow","waveFrequency","1492164yJADVw"];return(J=function(){return n})()}export{G as default};

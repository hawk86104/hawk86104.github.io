import{a0 as t,_ as n,ck as e,cl as o,cm as r,cn as i,C as c,m as s,c0 as u,ak as a,am as l}from"./three.RuuDeeIf1736251016080.js";import{f,e as p,U as d}from"./@tresjs.8C7OKmBm1736251016080.js";import{z as h}from"./three-custom-shader-material.zkLsy8Lq1736251016080.js";import{b as y,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1736251016080.js";import{d as m,b as w,a1 as b,w as I,o as v,D as _,u as C,r as x,a4 as A,e as S,f as B,g as O,J as R,j as T,aj as j,ak as E,F as M,I as k,G as L,m as F}from"./@vue.-Mz_IXfk1736251016080.js";!function(t,n){const e=H,o=D();for(;;)try{if(878868===-parseInt(e(427))/1+parseInt(e(432))/2*(parseInt(e(423))/3)+-parseInt(e(445))/4+parseInt(e(437))/5+parseInt(e(418))/6+parseInt(e(417))/7+-parseInt(e(451))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){z(this,(function(){const t=H,n=new RegExp(t(444)),e=new RegExp(t(416),"i"),o=Z(t(414));n[t(428)](o+t(426))&&e.test(o+t(438))?Z():o("0")}))()}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(433)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function H(t,n){const e=D();return(H=function(t,n){return e[t-=412]})(t,n)}G(void 0,(function(){const t=H;let n;try{n=Function(t(446)+t(425)+");")()}catch(r){n=window}const e=n[t(439)]=n.console||{},o=["log",t(441),t(448),t(431),t(450),t(419),t(412)];for(let i=0;i<o[t(434)];i++){const n=G.constructor[t(429)][t(435)](G),r=o[i],c=e[r]||n;n[t(421)]=G.bind(G),n[t(449)]=c[t(449)][t(435)](c),e[r]=n}}))();const W=async()=>{const t=H,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(447)]((n=>{const i=t;n[i(415)]===i(420)&&(e=n),n[i(415)]===i(440)&&(o=n),"ROADS"===n[i(415)]&&(r=n)})),{model:n,city:e,land:o,roads:r}};function D(){const t=["5723564IaRbDY","9235428GlELWs","table","CITY_UNTRIANGULATED","__proto__","constructor","31422nAwgBH","call",'{}.constructor("return this")( )',"chain","808397aMRfRl","test","prototype","gger","error","328NchFrr","apply","length","bind","stateObject","7382830BpnmBB","input","console","LANDMASS","warn","action","string","function *\\( *\\)","1811696rCRMMV","return (function() ","traverse","info","toString","exception","27288024WcJYBh","trace","debu","init","name","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(D=function(){return t})()}function Z(t){function n(t){const e=H;if(typeof t===e(443))return function(t){}[e(422)]("while (true) {}")[e(433)]("counter");1!==(""+t/t)[e(434)]||t%20==0?function(){return!0}.constructor(e(413)+e(430))[e(424)](e(442)):function(){return!1}[e(422)](e(413)+e(430))[e(433)](e(436)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const U=Q;!function(t,n){const e=Q,o=V();for(;;)try{if(731531===parseInt(e(310))/1+parseInt(e(311))/2+-parseInt(e(351))/3*(parseInt(e(332))/4)+parseInt(e(358))/5+-parseInt(e(344))/6*(parseInt(e(354))/7)+parseInt(e(347))/8*(-parseInt(e(308))/9)+parseInt(e(345))/10*(parseInt(e(309))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(331)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){$(this,(function(){const t=Q,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(364),"i"),o=X("init");n.test(o+t(337))&&e[t(343)](o+t(312))?X():o("0")}))()}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(331)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();N(void 0,(function(){const t=Q;let n;try{n=Function(t(335)+t(322)+");")()}catch(r){n=window}const e=n[t(367)]=n[t(367)]||{},o=[t(318),t(319),t(316),"error",t(317),"table",t(339)];for(let i=0;i<o.length;i++){const n=N.constructor.prototype[t(366)](N),r=o[i],c=e[r]||n;n.__proto__=N[t(366)](N),n[t(349)]=c[t(349)][t(366)](c),e[r]=n}}))();const Y=[U(320)];function Q(t,n){const e=V();return(Q=function(t,n){return e[t-=308]})(t,n)}function V(){const t=["land","#e523ff","#ffff00","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","forEach","bind","console","uColor","length","uGradient","uOpacity","__csm","call","clone","primitive","1467pvUyvd","11xOcNOA","1255359AsafJt","938864rtWSTc","input","constructor","value","city","info","exception","log","warn","object","computeBoundingBox",'{}.constructor("return this")( )',"bulidingsColor","DoubleSide","landColor","model","stateObject","renderOrder","action","Color","apply","116rbmfGe","#112233","boundingBox","return (function() ","gradient","chain","dispose","trace","string","gger","topColor","test","1896nylPGE","348830EejyTb","computeBoundingSphere","68312BczWFS","#ffffff","toString","material","35439zQwhAo","debu","uniforms","11599YytatV","setStyle","counter","color","6149515avLLzW","opacity"];return(V=function(){return t})()}const J=m({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:U(361)},landColor:{default:U(333)},topColor:{default:U(362)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=U,r=e,i=w(0),c=r[o(326)][o(315)];c[o(328)]=1001;const s=r[o(326)][o(360)];(()=>{const t=o,{geometry:e}=c;e[t(321)](),e[t(346)]();const{max:s,min:u}=e[t(334)];if(c[t(350)][t(372)])return;const a=new h({baseMaterial:c[t(350)],vertexShader:y,fragmentShader:g,silent:!0,uniforms:{uMax:{value:s},uMin:{value:u},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(330)])(r[t(323)])},uOpacity:{value:r[t(359)]},uLightColor:{value:new(n[t(330)])(t(348))},uTopColor:{value:new(n[t(330)])(r[t(342)])},uTime:i,uGradient:{value:r[t(336)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(324)]});c[t(350)][t(338)](),c[t(350)]=a})();const{onLoop:u}=p();u((({delta:t})=>{i.value+=t})),b((()=>{const n=o;r[n(323)]&&c.material[n(353)][n(368)][n(314)][n(355)](r[n(323)]),r[n(325)]&&((n,e)=>{const i=o;let c;"cu"===n||n===i(360)&&(c=Array.isArray(s[i(350)])?s[i(350)]:[s[i(350)]],c[i(365)]((n=>{const o=i;n[e][o(355)](r[o(325)]),n.side=t})))})(n(360),n(357)),r[n(359)]&&(c[n(350)].uniforms[n(371)][n(314)]=r.opacity)})),I(r,((t,n)=>{const e=o;c.material.uniforms[e(370)][e(314)]=t[e(336)]}));const a=r.model[o(326)][o(374)]();return(t,n)=>{const e=o;return v(),_(e(375),{object:C(a)},null,8,Y)}}});function X(t){function n(t){const e=Q;if(typeof t===e(340))return function(t){}.constructor(e(363))[e(331)](e(356));1!==(""+t/t)[e(369)]||t%20==0?function(){return!0}[e(313)](e(352)+e(341))[e(373)](e(329)):function(){return!1}.constructor(e(352)+"gger").apply(e(327)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=ot;!function(t,n){const e=ot,o=nt();for(;;)try{if(589919===parseInt(e(285))/1+-parseInt(e(310))/2*(parseInt(e(286))/3)+-parseInt(e(275))/4+-parseInt(e(306))/5*(-parseInt(e(288))/6)+-parseInt(e(313))/7+parseInt(e(304))/8+parseInt(e(328))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ot(276)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){K(this,(function(){const t=ot,n=new RegExp(t(316)),e=new RegExp(t(321),"i"),o=rt("init");n[t(317)](o+t(291))&&e.test(o+t(271))?rt():o("0")}))()}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ot(276)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();q(void 0,(function(){const t=ot;let n;try{n=Function(t(287)+t(302)+");")()}catch(r){n=window}const e=n[t(301)]=n.console||{},o=[t(277),t(280),t(324),t(289),"exception",t(327),t(283)];for(let i=0;i<o[t(326)];i++){const n=q.constructor[t(290)].bind(q),r=o[i],c=e[r]||n;n[t(312)]=q[t(272)](q),n[t(325)]=c[t(325)][t(272)](c),e[r]=n}}))();const tt=[P(284)];function nt(){const t=["test","geometry","Wireframe","matrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","opacity","uniforms","info","toString","length","table","1307196biFZkv","stateObject","applyMatrix4","innerHeight","input","bind","resolution","gger","1908768UvpFZG","apply","log","innerWidth","value","warn","clone","fromEdgesGeometry","trace","object","894227mvGCrV","3OCTubt","return (function() ","6sJbSAf","error","prototype","chain","uOpacity","width"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","action","linewidth","counter","set","style","constructor","console",'{}.constructor("return this")( )',"#FFF","2133232xDVXoA","material","2476240TblUIj","color","uColor","renderOrder","358132CULcst","buildingsLines","__proto__","3886372pfUkhL","debu","builds","function *\\( *\\)"];return(nt=function(){return t})()}const et=m({__name:P(311),props:{builds:{},width:{default:1},color:{default:P(303)},opacity:{default:1},style:{default:P(319)}},setup(t){const n=P,u=t;let a=null,l=null;if(u[n(299)]===n(319)){const t=new e(u[n(315)][n(318)]);let c=(new o)[n(282)](t),s=new r({color:u.color,linewidth:u.width,opacity:u[n(322)],transparent:!0,depthWrite:!0,depthTest:!0});s[n(273)][n(298)](window[n(278)],window[n(270)]),a=new i(c,s),a[n(269)](u.builds.matrix[n(281)]())}else{l={transparent:!0,uniforms:{uColor:{value:new c(u[n(307)])},uOpacity:{value:u.opacity}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:n(294)};const t=new e(u[n(315)][n(318)]),o=new s(l);a=new LineSegments(t,o),a[n(269)](u[n(315)][n(320)][n(281)]()),a[n(305)][n(296)]=u[n(293)],a[n(309)]=1e3}return b((()=>{const t=n;"Shader"===u.style&&(u.color&&(l[t(323)][t(308)][t(279)]=new c(u[t(307)])),u.opacity&&(l[t(323)][t(292)][t(279)]=u[t(322)])),u[t(299)]===t(319)&&(u[t(307)]&&(a[t(305)][t(307)]=new c(u[t(307)])),u.opacity&&(a[t(305)][t(322)]=u[t(322)])),u[t(293)]&&(a[t(305)][t(296)]=u[t(293)])})),(t,n)=>(v(),_("primitive",{object:C(a)},null,8,tt))}});function ot(t,n){const e=nt();return(ot=function(t,n){return e[t-=268]})(t,n)}function rt(t){function n(t){const e=ot;if("string"==typeof t)return function(t){}[e(300)]("while (true) {}")[e(276)](e(297));1!==(""+t/t)[e(326)]||t%20==0?function(){return!0}.constructor(e(314)+"gger").call(e(295)):function(){return!1}.constructor("debu"+e(274))[e(276)](e(268)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=ut;!function(t,n){const e=ut,o=ft();for(;;)try{if(111711===-parseInt(e(271))/1*(parseInt(e(299))/2)+parseInt(e(285))/3+parseInt(e(274))/4+parseInt(e(279))/5*(parseInt(e(300))/6)+-parseInt(e(268))/7+parseInt(e(319))/8+parseInt(e(291))/9*(-parseInt(e(272))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ct(this,(function(){const t=ut,n=new RegExp(t(283)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=dt("init");n[t(278)](o+t(317))&&e[t(278)](o+t(311))?dt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(276)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(t,n){const e=ft();return(ut=function(t,n){return e[t-=268]})(t,n)}st(void 0,(function(){const t=ut,n=function(){const t=ut;let n;try{n=Function(t(281)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(308)]||{},o=["log",t(301),"info",t(273),t(312),t(303),t(315)];for(let r=0;r<o[t(287)];r++){const n=st[t(306)].prototype[t(294)](st),i=o[r],c=e[i]||n;n[t(307)]=st[t(294)](st),n[t(314)]=c[t(314)][t(294)](c),e[i]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(){const t=["TresCanvas","427488ekOQBW","TresAmbientLight","length","call","debu","TresAxesHelper","126vEEpMM","TresPerspectiveCamera","pagesShow","bind","autoRotate","#000000","showBuildings","#ffffff","6KYOOve","24TBKOQH","warn","model","table","while (true) {}","tcRef","constructor","__proto__","console","action","gger","input","exception","#000","toString","trace","ability","chain","city","1352104ytOHQI","1411620OwUYDg","builds","disableRender","17026vbfmrT","163080XSbHXc","error","845824NQziMT","showGridHelper","apply","perspectiveCameraRef","test","87245ogSfEh","string","return (function() ","TresDirectionalLight","function *\\( *\\)"];return(ft=function(){return t})()}const pt=m({__name:it(293),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=x({clearColor:n(296),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:a,toneMapping:l,disableRender:r[n(270)]}),c=x({autoRotate:r[n(295)],enableDamping:!0});let s=null;r[n(297)]&&([e,o]=A((()=>W())),e=await e,o(),s=e);const f=w(),p=w();return(t,e)=>{const o=n,u=S(o(284));return v(),B(u,F({ref_key:o(305),ref:p},i,{"window-size":""}),{default:O((()=>[R(o(292),{ref_key:o(277),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(C(d),j(E(c)),null,16),e[0]||(e[0]=R(o(286),{color:o(298)},null,-1)),e[1]||(e[1]=R(o(282),{position:[100,100,0],intensity:.5,color:o(298)},null,-1)),r[o(297)]&&C(s)?(v(),_(M,{key:0},[T(J,{model:C(s)},null,8,[o(302)]),T(et,{builds:C(s)[o(318)],color:o(313)},null,8,[o(269)])],64)):k("",!0),L(t.$slots,o(316)),r.showAxesHelper?(v(),_(o(290),at)):k("",!0),r[o(275)]?(v(),_("TresGridHelper",lt)):k("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=ut;if(typeof t===e(280))return function(t){}.constructor(e(304))[e(276)]("counter");1!==(""+t/t)[e(287)]||t%20==0?function(){return!0}.constructor(e(289)+e(310))[e(288)](e(309)):function(){return!1}[e(306)](e(289)+e(310)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{J as _,et as a,pt as b,W as l};

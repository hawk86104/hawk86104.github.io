import{importShared as a}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{BatchedRenderer as T,ConstantColor as E,QuarksLoader as S}from"./three.quarks.esm.B4t1posA1767148983502.js";import{instance as l}from"./Resource.DwxffO9V1767148983502.js";import{loading$2 as b}from"./generalFont.vue_vue_type_script_setup_true_lang.Cx7Vff0m1767148983502.js";import"./default.vue_vue_type_script_setup_true_lang.Bjy6WD1C1767148983502.js";import"./three-mesh-ui.module.Cv5lk1vQ1767148983502.js";import"./domPanel.vue_vue_type_style_index_0_lang.DqrQKbSz1767148983502.js";import{_l as N,Kk as P}from"./index.DTe2qqjO1767148983502.js";import{Pane as V}from"./tweakpane.BQRZXf8M1767148983502.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Cxj_Ip691767148983502.js";import{_sfc_main as $}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DYMkkQ781767148983502.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.T7UkXoyg1767148983502.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.BVQWYa0i1767148983502.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.BCd7Uxt-1767148983502.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.x_N2tft71767148983502.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Xg1Eqw4f1767148983502.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.DBVFezcY1767148983502.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.BPVumalx1767148983502.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.BOdU7iQo1767148983502.js";import"./particleBase.vue_vue_type_script_setup_true_lang.CIf_5jma1767148983502.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.BmWDhTNl1767148983502.js";const{defineComponent:j}=await a("vue"),{unref:w,createElementVNode:B,Fragment:R,openBlock:F,createElementBlock:G}=await a("vue"),x=["object"],I=["object","position","scale","rotation"],g=await a("three"),{watch:L}=await a("vue"),C=j({__name:"cartoonMagic",props:{color:{default:"#00ffff"},position:{default:[0,0,0]},scale:{default:1},rotation:{default:[0,0,0]}},setup(v){const m=v,s=o=>{const r=new g.Color(m.color),p=new g.Vector4(r.r,r.g,r.b,o);return new E(p)},n=new T,f=new g.Group,e=l.getItem("CartoonMagicZone.json").clone(!0);e.traverse(o=>{if(o.type==="ParticleEmitter"){o.name==="BasicZoneRedEmitter"&&o.rotation.set(Math.PI/2,0,0);const r=o.system;r.startColor=s(r.startColor.color.w),n.addSystem(r)}}),e.type==="ParticleEmitter"&&n.addSystem(e.system),f.add(e);const{onBeforeRender:_}=N();return _(({delta:o})=>{n.update(o)}),L(()=>[m.color],([o])=>{n.systemToBatchIndex.forEach((r,p)=>{p.startColor=s(p.startColor.color.w)})}),(o,r)=>(F(),G(R,null,[B("primitive",{object:w(f)},null,8,x),B("primitive",{object:w(n),position:o.position,scale:o.scale,rotation:o.rotation},null,8,I)],64))}}),{defineComponent:A}=await a("vue"),{unref:i,createVNode:u,createElementVNode:t,mergeProps:k,openBlock:c,createBlock:d,createCommentVNode:h,Suspense:Q,withCtx:y,resolveComponent:Z,Fragment:H,createElementBlock:z}=await a("vue"),{reactive:M}=await a("vue"),de=A({__name:"customLoading",setup(v){const m=M({reflectivity:.1,showGridHelper:!0,scale:1}),s=M({color:"#ffffff",scale:1});l.loaderMapping.QuarksLoader=S,l.loadResources([{functionName:"QuarksLoader",url:"./plugins/floor/json/CartoonMagicZone.json"}]);const n=new V;return n.addBinding(s,"color",{label:"颜色"}),n.addBinding(s,"scale",{label:"大小",min:.1,max:3,step:.1}),(f,e)=>{const _=Z("TresCanvas");return c(),z(H,null,[u(i(b),{useResourceManager:""}),u(_,{clearColor:"#201919","window-size":""},{default:y(()=>[e[0]||(e[0]=t("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),u(i(P),{enableDamping:""}),i(l).hasAllFinished.value?(c(),d(C,k({key:0},s,{position:[0,0,0]}),null,16)):h("",!0),i(l).hasAllFinished.value?(c(),d(C,{key:1,color:"red",position:[3,0,0],rotation:[-Math.PI,1,45]},null,8,["rotation"])):h("",!0),i(l).hasAllFinished.value?(c(),d(C,{key:2,color:"green",position:[-2,0,0]})):h("",!0),e[1]||(e[1]=t("TresMesh",{position:[3,0,0]},[t("TresSphereGeometry",{args:[1,32,32]}),t("TresMeshBasicMaterial",{color:"red"})],-1)),e[2]||(e[2]=t("TresMesh",{position:[-2,0,0]},[t("TresSphereGeometry",{args:[1,32,32]}),t("TresMeshBasicMaterial",{color:"green"})],-1)),e[3]||(e[3]=t("TresMesh",{position:[0,0,0]},[t("TresSphereGeometry",{args:[1,32,32]}),t("TresMeshBasicMaterial",{color:"white"})],-1)),(c(),d(Q,null,{default:y(()=>[u(i($),k({position:[0,-.5,0]},m),null,16)]),_:1}))]),_:1})],64)}}});export{de as default};

import{a as n,r as t,d as e,S as r,N as o}from"./@tresjs.yMGhEK7G1718787583077.js";import{x as s,a5 as i,C as a,V as c,y as u,aM as l}from"./three.OZpCYxlY1718787583077.js";import{P as f}from"./tweakpane.qqn77PB81718787583077.js";import{L as p}from"./three-subdivide.enkzZIwI1718787583077.js";import{d,b as m,a2 as g,w as h,o as v,D as y,J as b,aj as w,ak as M,a3 as I,r as _,e as x,f as T,g as S,j,u as B,m as A}from"./@vue.CpOXM7bB1718787583077.js";import"./@vueuse.jAwx0y-e1718787583077.js";function k(){const n=["attributes","log","uniforms","toString","\n          uniform vec3 glowColor;\n          varying float intensity;\n          void main() \n          {\n          \tvec3 glow = glowColor * intensity;\n\t\t\t\t\t\tif(intensity < 1.0){\n            \tgl_FragColor = vec4( glow, 1.0 );\n\t\t\t\t\t\t}\n          }\n        ","copy","TSGref","TresShaderMaterial","504270qHnAHe","blending","scale","position","22cIvtkG","gger","input","15255reTMEp","Color","8008IjdXIN","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","color","counter","1238880ImqEUc",'{}.constructor("return this")( )',"760poDvSc","info","apply","prototype","action","material","glowColor","side","modify","viewVector","subdivision","exception","1654275sdFdnD","shineShader","subVectors","geometry","TresMesh","while (true) {}","return (function() ","1868fHQprE","constructor","chain","1180OWzxlk","test","function *\\( *\\)","error","634536MNmvTn","clone","AdditiveBlending","bind","call","string","value","length","srcMesh"];return(k=function(){return n})()}const C=F;!function(n,t){const e=F,r=k();for(;;)try{if(126579===parseInt(e(304))/1*(parseInt(e(299))/2)+parseInt(e(278))/3+parseInt(e(271))/4*(parseInt(e(274))/5)+-parseInt(e(295))/6+-parseInt(e(264))/7+parseInt(e(311))/8*(parseInt(e(302))/9)+-parseInt(e(309))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[F(313)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=F,t=new RegExp(n(276)),e=new RegExp(n(306),"i"),r=G("init");t[n(275)](r+n(273))&&e[n(275)](r+n(301))?G():r("0")}))()}();const R=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();R(void 0,(function(){const n=F;let t;try{t=Function(n(270)+n(310)+");")()}catch(o){t=window}const e=t[n(305)]=t[n(305)]||{},r=[n(288),"warn",n(312),n(277),n(263),"table","trace"];for(let s=0;s<r[n(285)];s++){const t=R[n(272)][n(255)][n(281)](R),o=r[s],i=e[o]||t;t.__proto__=R[n(281)](R),t[n(290)]=i[n(290)].bind(i),e[o]=t}}))();const E=[C(297)],N=d({__name:C(265),props:{srcMesh:{},scale:{default:1.2},color:{default:"#ffff00"},subdivision:{type:Boolean,default:!0},c:{default:1.1},p:{default:1.4},side:{default:s},blending:{default:i[C(280)]}},setup(e){const r=C,o=e,s=m(),u={uniforms:{c:{type:"f",value:o.c},p:{type:"f",value:o.p},glowColor:{type:"c",value:new(i[r(303)])(o[r(307)])},viewVector:{type:"v3",value:{x:0,y:0,z:0}}},vertexShader:"\n          uniform vec3 viewVector;\n          uniform float c;\n          uniform float p;\n          varying float intensity;\n          void main() {\n            vec3 vNormal = normalize( normalMatrix * normal);\n            vec3 vNormel = normalize( normalMatrix * viewVector);\n            intensity = pow( c - dot(vNormal, vNormel), p );\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0);\n          }\n            ",fragmentShader:r(291),side:o[r(259)],transparent:!0,depthWrite:!1,depthTest:!0,blending:o[r(296)]};g((()=>{const n=r;if(o.srcMesh&&!s[n(284)][n(267)][n(287)][n(298)]){let t=o[n(286)].geometry[n(279)]();o.subdivision&&(t=p[n(260)](t,2)),s[n(284)][n(267)]=t,s.value.position[n(292)](o[n(286)][n(298)])}o[n(307)]&&(u.uniforms[n(258)][n(284)]=new a(o[n(307)])),o.c&&(u[n(289)].c[n(284)]=o.c),o.p&&(u[n(289)].p[n(284)]=o.p)})),h((()=>o[r(262)]),(n=>{const t=r;let e=o.srcMesh[t(267)][t(279)]();n&&(e=p[t(260)](e,2)),s[t(284)].geometry=e})),h((()=>o.side),(n=>{const t=r;s[t(284)][t(257)].side=n})),h((()=>o[r(296)]),(n=>{const t=r;s.value.material[t(296)]=n}));const{onLoop:l}=t(),{camera:f}=n();return l((()=>{const n=r;f[n(284)]&&s.value&&(u[n(289)][n(261)][n(284)]=(new c)[n(266)](f[n(284)][n(298)],s[n(284)][n(298)]))})),(n,t)=>{const e=r;return v(),y(e(268),{ref_key:e(293),ref:s,scale:o[e(297)]},[b(e(294),w(M(u)),null,16)],8,E)}}});function F(n,t){const e=k();return(F=function(n,t){return e[n-=255]})(n,t)}function G(n){function t(n){const e=F;if(typeof n===e(283))return function(n){}.constructor(e(269)).apply(e(308));1!==(""+n/n).length||n%20==0?function(){return!0}[e(272)]("debu"+e(300))[e(282)](e(256)):function(){return!1}.constructor("debu"+e(300))[e(313)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const V=q;!function(n,t){const e=q,r=X();for(;;)try{if(299843===-parseInt(e(372))/1+parseInt(e(351))/2+parseInt(e(344))/3*(parseInt(e(353))/4)+parseInt(e(362))/5*(parseInt(e(327))/6)+parseInt(e(334))/7+parseInt(e(337))/8+parseInt(e(340))/9*(-parseInt(e(355))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const H=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[q(368)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){H(this,(function(){const n=q,t=new RegExp(n(328)),e=new RegExp(n(357),"i"),r=W(n(335));t[n(325)](r+n(326))&&e[n(325)](r+n(329))?W():r("0")}))()}();const D=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();D(void 0,(function(){const n=q;let t;try{t=Function(n(346)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(341)]=t[n(341)]||{},r=[n(359),n(371),"info",n(317),n(356),n(349),n(347)];for(let s=0;s<r[n(360)];s++){const t=D[n(348)][n(331)][n(336)](D),o=r[s],i=e[o]||t;t.__proto__=D.bind(D),t[n(366)]=i[n(366)][n(336)](i),e[o]=t}}))();const P=b("TresPerspectiveCamera",{position:[5,5,5]},null,-1),Z=b("TresAmbientLight",{intensity:1},null,-1),$=b(V(363),{args:[10,10]},null,-1),L=b(V(367),{args:[1,32,16]},null,-1),O=[V(330)],U=[V(330)],Y=[b(V(324),{args:[1,1,1,1,1]},null,-1),b(V(365),{color:V(322)},null,-1)];function q(n,t){const e=X();return(q=function(n,t){return e[n-=317]})(n,t)}const J=d({__name:"shader",async setup(n){const t=V;let s,a;const c={clearColor:"#222"},p=m(),d=m(),g=m(),h=([s,a]=I((()=>o(["./plugins/earthSample/image/earthA/earth.jpg",t(342)]))),s=await s,a(),s),y=_({scale:1.6,color:t(375),subdivision:!0,c:1.1,p:1.4,side:i[t(339)],blending:i[t(319)]}),w=new f({title:"参数",expanded:!0});return w[t(354)](y,t(364),{label:"颜色"}),w.addBinding(y,t(352),{label:"大小",min:1,max:3,step:.2}),w[t(354)](y,t(361),{label:"边缘处理"}),w[t(354)](y,"c",{label:"c",min:0,max:2,step:.1}),w[t(354)](y,"p",{label:"p",min:0,max:8,step:.2}),w[t(354)](y,"side",{options:{FrontSide:i[t(339)],BackSide:u,DoubleSide:i[t(370)]}}),w[t(354)](y,t(343),{options:{AdditiveBlending:l,NormalBlending:i[t(345)]}}),(n,o)=>{const s=t,i=x("TresCanvas");return v(),T(i,A(c,{"window-size":""}),{default:S((()=>[P,Z,j(B(e)),$,b(s(321),{ref_key:s(358),ref:p,position:[-2,1,0]},[L,b("TresMeshBasicMaterial",{map:B(h)[0]},null,8,O)],512),j(N,A({srcMesh:p[s(369)]},y),null,16,[s(323)]),j(B(r),{ref_key:"TreBoxRef",ref:g,args:[1,1,1],position:[2,1,0]},{default:S((()=>[b("TresMeshBasicMaterial",{map:B(h)[1]},null,8,U)])),_:1},512),j(N,A({srcMesh:g[s(369)]&&g.value.value},y),null,16,[s(323)]),b(s(321),{ref_key:s(332),ref:d,position:[0,1,-2]},Y,512),j(N,A({srcMesh:d[s(369)]},y),null,16,[s(323)])])),_:1},16)}}});function W(n){function t(n){const e=q;if(typeof n===e(320))return function(n){}[e(348)](e(373)).apply(e(374));1!==(""+n/n)[e(360)]||n%20==0?function(){return!0}[e(348)]("debugger")[e(318)](e(333)):function(){return!1}.constructor("debu"+e(350))[e(368)](e(338)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function X(){const n=["apply","value","DoubleSide","warn","519698wmUEEs","while (true) {}","counter","#00dfff","error","call","AdditiveBlending","string","TresMesh","#0ff","srcMesh","TresBoxGeometry","test","chain","12gjGvKt","function *\\( *\\)","input","map","prototype","TresMeshRefB","action","2219266HzaUws","init","bind","3034720jYRAIX","stateObject","FrontSide","2063871fHBGJf","console","logo.png","blending","3gCYRvP","NormalBlending","return (function() ","trace","constructor","table","gger","671872unybSx","scale","31048uMSnAM","addBinding","30eoPbwR","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresMeshRefA","log","length","subdivision","1168555vFYTBo","TresGridHelper","color","TresMeshBasicMaterial","toString","TresSphereGeometry"];return(X=function(){return n})()}export{J as default};

import{a as t,d as n}from"./@tresjs.DDzpLB7Q1725236486446.js";import{P as e}from"./tweakpane.yHWGBmom1725236486446.js";import{a6 as r,ab as o,ac as a}from"./three.0IuNGJsA1725236486446.js";import{_ as s}from"./heatmap.js-fix.u6rO9dXL1725236486446.js";import{d as i,a4 as u,a1 as c,o as l,D as p,u as f,r as d,e as h,f as m,g,j as v,al as y,aj as b,ak as w,m as x,J as I}from"./@vue.9bHx4gg21725236486446.js";import"./@vueuse.XXpXaOwX1725236486446.js";import"./@amap.YiJorLHg1725236486446.js";const _=S;!function(t,n){const e=S,r=B();for(;;)try{if(329149===parseInt(e(221))/1+-parseInt(e(229))/2*(-parseInt(e(242))/3)+parseInt(e(282))/4+-parseInt(e(230))/5+parseInt(e(215))/6*(-parseInt(e(213))/7)+-parseInt(e(277))/8*(parseInt(e(279))/9)+-parseInt(e(249))/10*(parseInt(e(220))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const j=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(219)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){j(this,(function(){const t=S,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(262),"i"),r=T(t(226));n[t(211)](r+t(260))&&e[t(211)](r+t(207))?T():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(219)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function S(t,n){const e=B();return(S=function(t,n){return e[t-=206]})(t,n)}function B(){const t=["radius","chain","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","heatmapClickCom","deleteAttribute","scale","table","block","getX","position","exception","create","toString","Texture","set","layerY","material","2410248tAJkSm","border","9lvIrIm","constructor","top","1265600SUgBIB","length","onclick","input","left","setScalar","console","test","push","2077397RLmpoh","stateObject","6hhZsQv","attributes","_renderer","prototype","apply","2576013znHGqc","461145EaAnUo","mesh_0","\n\tuniform sampler2D heightMap;\n\tuniform float uOpacity;\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n\t}\n\t","none","error","init","needsUpdate","getZ","14CuSdJp","937470DBukay","1px solid #5384ff","show2dCanvas","string","absolute","BufferAttribute","action","debu","count","40px","appendChild","log","244857nfYLxc","canvas","addData","gger","setAttribute","info","boundingBox","10UsSbRG","while (true) {}","display","ShaderMaterial","style","DoubleSide","return (function() ","./draco/","bind","primitive"];return(B=function(){return t})()}C(void 0,(function(){const t=S;let n;try{n=Function(t(255)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(210)]=n[t(210)]||{},r=[t(241),"warn",t(247),t(225),t(270),t(266),"trace"];for(let a=0;a<r[t(283)];a++){const n=C[t(280)][t(218)][t(257)](C),o=r[a],s=e[o]||n;n.__proto__=C[t(257)](C),n.toString=s[t(272)][t(257)](s),e[o]=n}}))();const k=["object"],A=i({__name:_(263),props:{show2dCanvas:{type:Boolean,default:!0},radius:{default:20}},async setup(n){const e=_;let o,a;const i=n,{nodes:d}=([o,a]=u((()=>t("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/heatmap/test.glb",{draco:!0,decoderPath:e(256)}))),o=await o,a(),o);d[e(222)][e(269)][e(274)](-5088.96,-3.08,39374.7),d[e(222)][e(265)][e(209)](.01);let h=null,m=null,g=null;m=new(r[e(273)])((()=>{const t=e;return g=document.createElement("heatmap-canvas"),g[t(253)][t(269)]=t(234),g[t(253)][t(281)]=t(239),g[t(253)][t(208)]="0",document.body[t(240)](g),h=s[t(271)]({container:g,width:256,height:256,blur:"0.8",radius:i.radius}),h._renderer[t(243)][t(253)][t(278)]=t(231),h._renderer[t(243)][t(206)]=function(n){const e=t;h[e(244)]({x:n.layerX,y:n[e(275)],value:1,radius:i[e(259)]}),h.setDataMax(1),m&&(m[e(227)]=!0)},h})()[e(217)][e(243)]);const v={vertexShader:"\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\tvUv = uv;\n\t}\n\t",fragmentShader:e(223),uniforms:{uOpacity:{value:1},heightMap:{type:"t",value:m}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[e(254)]},y=new(r[e(252)])(v);d[e(222)][e(276)]=y;return(t=>{const n=e;t.computeBoundingBox();const{max:o,min:a}=t[n(248)];t[n(264)]("uv");const s=o.x-a.x,i=o.z-a.z,u=[];for(let e=0;e<t.attributes[n(269)][n(238)];e++)u[n(212)]((t[n(216)].position[n(268)](e)-a.x)/s),u.push((t[n(216)][n(269)][n(228)](e)-a.z)/i);const c=new Float32Array(u);t[n(246)]("uv",new(r[n(235)])(c,2))})(d[e(222)].geometry),c((()=>{const t=e;g.style[t(251)]=""+(i[t(232)]?t(267):t(224))})),(t,n)=>{const r=e;return l(),p(r(258),{object:f(d).mesh_0},null,8,k)}}});function T(t){function n(t){const e=S;if(typeof t===e(233))return function(t){}[e(280)](e(250))[e(219)]("counter");1!==(""+t/t)[e(283)]||t%20==0?function(){return!0}.constructor("debu"+e(245))[e(261)](e(236)):function(){return!1}[e(280)](e(237)+e(245))[e(219)](e(214)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function z(){const t=["3756856MQcLJU","radius","3141VrTCBH","34QBBlrw","call","apply","TresCanvas","toString","#ffffff","warn","TresDirectionalLight","init","length","TresGridHelper","return (function() ","396KCJiTa","#030311","圆圈的大小","5jfnETs","3234yWiaTj","input","TresPerspectiveCamera","38118tEEXNF","while (true) {}","log","console","show2dCanvas","2528682ChmdGW","exception","constructor","点击左侧蓝色画框",'{}.constructor("return this")( )',"gger","chain","__proto__","10284rfIELS","16zkADRi","stateObject","20810sQAxWg","addBinding","error","counter","1025220alnyKb","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","trace"];return(z=function(){return t})()}const E=D;function D(t,n){const e=z();return(D=function(t,n){return e[t-=127]})(t,n)}!function(t,n){const e=D,r=z();for(;;)try{if(250793===-parseInt(e(155))/1*(parseInt(e(156))/2)+-parseInt(e(129))/3*(parseInt(e(143))/4)+parseInt(e(171))/5*(-parseInt(e(134))/6)+parseInt(e(149))/7+parseInt(e(153))/8+parseInt(e(168))/9*(-parseInt(e(145))/10)+-parseInt(e(172))/11*(-parseInt(e(142))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const M=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){M(this,(function(){const t=D,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(150),"i"),r=J(t(164));n.test(r+t(140))&&e.test(r+t(127))?J():r("0")}))()}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();R(void 0,(function(){const t=D;let n;try{n=Function(t(167)+t(138)+");")()}catch(o){n=window}const e=n[t(132)]=n[t(132)]||{},r=[t(131),t(162),"info",t(147),t(135),"table",t(152)];for(let a=0;a<r.length;a++){const n=R[t(136)].prototype[t(151)](R),o=r[a],s=e[o]||n;n[t(141)]=R[t(151)](R),n[t(160)]=s[t(160)].bind(s),e[o]=n}}))();const U=I(E(128),{position:[21,34,55],fov:60,near:1,far:1e5},null,-1),L=I(E(163),{position:[5,10,7.5],color:E(161),intensity:5},null,-1),Z=I(E(166),{args:[50,25]},null,-1),F=i({__name:"heatmapClick",setup(t){const r=E,s={clearColor:r(169),shadows:!0,alpha:!0,outputColorSpace:o,shadowMapType:a,useLegacyLights:!0,antialias:!0},i=d({show2dCanvas:!0,radius:20}),u=new e({title:"参数",expanded:!0});return u[r(146)](i,r(133),{label:"显示二维图"}),u.addBinding(i,r(154),{label:r(170),min:.1,max:30,step:.1}),u.addButton({title:r(137)}),(t,e)=>{const o=h(r(159));return l(),m(o,x(s,{"window-size":""}),{default:g((()=>[U,v(f(n),{autoRotate:!1,autoRotateSpeed:2}),L,Z,(l(),m(y,null,{default:g((()=>[v(A,b(w(i)),null,16)])),_:1}))])),_:1},16)}}});function J(t){function n(t){const e=D;if("string"==typeof t)return function(t){}[e(136)](e(130))[e(158)](e(148));1!==(""+t/t)[e(165)]||t%20==0?function(){return!0}[e(136)]("debu"+e(139))[e(157)]("action"):function(){return!1}[e(136)]("debu"+e(139))[e(158)](e(144)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{F as default};

import{_ as t,bI as e,C as i,k as n,V as o,h as s}from"./three.eGpwEcxC1731053920743.js";const r=u;!function(t,e){const i=u,n=c();for(;;)try{if(155967===-parseInt(i(314))/1*(parseInt(i(247))/2)+parseInt(i(229))/3*(-parseInt(i(552))/4)+-parseInt(i(627))/5*(-parseInt(i(383))/6)+parseInt(i(273))/7+parseInt(i(463))/8+-parseInt(i(385))/9+parseInt(i(291))/10)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const a=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(467)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function c(){const t=["    vec3 force = vec3( 0.0 );","  return 1.0 - when_gt(x, y);","age","Emitter","maxAge","deltaTime","setVec4Components","return (function() ","float getMaxAge() {","_assignParamsValue","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","releaseIntoPool","utils","BufferAttribute","bufferAttribute","float when_le(float x, float y) {","subarray","        vSpriteSheet.x = 1.0 / framesX;","        float perspective = 1.0;","SHOULD_ROTATE_PARTICLES","Color","disable","radius","    vec3 accel = getAcceleration( age );","        vSpriteSheet.w = rowNorm;","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","updateCounts","getPackedRotationAxis","counter","    return a * b;","       vec3 c = isAlive * getColorOverLifetime(","_applyAttributesToGeometry","addPool","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","float and(float a, float b) {","    ","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","paramFetchingFunctions","getValueAtIndex","arrayType","depthWrite","    vec3 outgoingLight = vColor.xyz;","    highp float isAlive = when_gt( alive, 0.0 );","velocity","randomColorAsHex","activeParticleCount","shrink","gger","elements","isArray","setMat4","dynamicBuffer","    highp float age = getAge();","        pos.z += wiggleSin;","Vector4","hasOwnProperty","2172040cHiXEF","float when_gt(float x, float y) {","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","rotation","apply","setVec2Components","shaders","vec3 getVelocity( in float age ) {","bufferUpdateCount","_attributesNeedRefresh","_assignForceValue","angleSpread","static","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    vColor = vec4( c, o );","_assignPositionValue","Texture","ensureArrayInstanceOf","vec4 getPosition( in float age ) {","Vector2","logdepthbuf_fragment","StaticDrawUsage","toString","   c *= vec3( 2.0 );","getPool","SHOULD_WIGGLE_PARTICLES","setFromArray","duration","BOX","       vec3 c = vec3(1.0);","randomVector3OnLine","common","fog_pars_vertex","      vec3 translated;","value","fog_pars_fragment","           unpackColor( color.z ),","_resetParticle","logdepthbuf_pars_fragment","floor","_pool","_assignColorValue","removeEmitter","branchAvoidanceFunctions","flagUpdate","typeSizeMap","#endif","textureFrameCount","#define PACKED_COLOR_SIZE 256.0","   }","_rotationCenter","setVec2","addEmitter","_distribution","_randomise","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","particleCount","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","arrayValuesAreEqual","center","    return value;","LINE","_setAttributeOffset","generateUUID","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","       if ( vColor.w < float(ALPHATEST) ) discard;","OBJECT","MathUtils","TypedArrayConstructor","    force += accel * age;","shaderChunks","_spreadClamp","_assignAngleValue","keys","setAttribute","AdditiveBlending","setRGB","usage","reset","    #ifdef SHOULD_CALCULATE_SPRITE","_decrementParticleCount","ShaderAttribute","constructor","colorize","add","warn","defines","_createNewWhenPoolEmpty","Vector3","1150568AouGdp","Will not resize.","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","ensureInstanceOf","_assignValue","dispose","float getWiggle() {","setDrawRange","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","blending","updateMin","max","_center","    float shouldApplyValue = 0.0;","       float s = sin( -vAngle );","    gl_PointSize = pointSizePerspective;","POSITIVE_INFINITY","direction","getFromPool","grow","scale","       float x = gl_PointCoord.x - 0.5;","Emitter already exists in this group. Will not add again.","resetUpdateRange","randomDirectionVector3OnDisc","    highp float alive = getAlive();","error","geometry","sin","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","stateObject","ensureArrayTypedArg","cos","prototype","        pos = getRotation( pos, positionInTime );","log","#ifdef SHOULD_CALCULATE_SPRITE","floatOverLifetime","roundToNearestMultiple","_checkParticleAges","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Points","angle","types","wiggle","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","  return 1.0 - when_lt(x, y);","chain","string","SHOULD_CALCULATE_SPRITE","        pos.y += wiggleCos;","randomDirectionVector3OnSphere","`emitter` argument must be instance of SPE.Emitter. Was provided with:","_poolCreationSettings","      vec3 axis = unpackRotationAxis( rotation.x );","_updateUniforms","_calculatePPSValue","rotationCenter","transparent","_angle","        float totalFrames = textureAnimation.z;","group","round","#define PACKED_COLOR_DIVISOR 255.0","uuid","           return pos;","setSize","        float loopCount = textureAnimation.w;","attributeCount","_triggerSingleEmitter","updateMap","    gl_Position = projectionMatrix * mvPosition;","       float s = sin(angle);","_updateAttributeUpdateRange","        float rowNorm = row / framesY;","5HBwBnL","    #ifdef COLORIZE","fog","attributeEnd","bufferUpdateRanges","attribute vec4 params;","clone","float getAlive() {","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","spread","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","pop","   return acceleration.xyz * age;","DynamicDrawUsage","tick","    #else","valueOverLifetimeLength","_createBufferAttribute","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","textureFrames","   return params.w;","uniform sampler2D tex;","randomVector3OnDisc","debu","setColor","      float angle = 0.0;","array","        float framesX = vSpriteSheet.x;","Invalid argument types, or argument types do not match:","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","paramsArray","           unpackColor( color.w )","axis","count","    #ifdef SHOULD_WIGGLE_PARTICLES","ShaderChunk","exports","      rotationMatrix = getRotationMatrix( axis, angle );","    varying float vAngle;","remove","resetFlags","Emitter does not exist in this group. Will not remove.","bind","function","getLength","    return max(sign(x - y), 0.0);","size","activationEnd","logdepthbuf_pars_vertex","abs","float getAge() {","        vSpriteSheet.y = 1.0 / framesY;","   c.b = b / PACKED_COLOR_DIVISOR;","getHex","   c.g = g / PACKED_COLOR_DIVISOR;","setVec3","alive","        float framesX = textureAnimation.x;","_angleSpread","opacity","SPHERE","DISC","   c -= vec3( 1.0 );","resetDynamic","radiusScale","vec3 getAcceleration( in float age ) {","                   0.0,                                0.0,                                0.0,                                1.0);","    #endif","spreadClamp","random","frameCount","varyings","table","    return min(a + b, 1.0);","depthTest","      if( rotation.y == 0.0 ) {","unpackRotationAxis","frames","position","normalize","3HqWOQP","        float framesY = vSpriteSheet.y;","info","acceleration","attribute vec4 size;","Argument is not instanceof SPE.Emitter:","drag","BufferGeometry","attribute vec4 rotation;","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","params","TypedArray is already of size:","    float pointSizePerspective = pointSize * perspective;","_onRemove","SHOULD_ROTATE_TEXTURE","typedArray","   return velocity * age;","   return c;","2XKkYWW","_resetBufferRanges","color","min","splice","    #ifdef SHOULD_ROTATE_PARTICLES","        float columnNorm = vSpriteSheet.z;","isStatic","offset","object","activeMultiplier","#ifdef SHOULD_ROTATE_PARTICLES","updateFlags","fixedTimeStep","activationIndex","setVec4","SPE.Group pool ran out.","        float perspective = scale / length( mvPosition.xyz );","_assignAbsLifetimeValue","updateMax","updateRange","componentSize","attribute vec4 opacity;","    }","distributions","   return params.y;","1581237NngBkN","   return modelViewMatrix * vec4( position, 1.0 );","Emitter already belongs to another group. Will not add to requested group.","logdepthbuf_vertex","fog_fragment","fog_vertex","fragment","set","setNumber","ensureValueOverLifetimeCompliance","_updateDefines","    vec4 rotatedTexture = texture2D( tex, vUv );","        float framesY = textureAnimation.y;","    float fIndex = 0.0;","attribute vec4 angle;","clamp","number","randomVector3","2045150yFxMAP","sqrt","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","maxParticleCount","onParticleSpawn","TypedArrayHelper","interpolateArray","copy","material","       axis = normalize(axis);","join","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","lerp","itemSize","           unpackColor( color.x ),","_incrementParticleCount","attributes","push","    vec3 vel = getVelocity( age );","float or(float a, float b) {","_spread","attribute vec4 acceleration;","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","169921mIlLrX","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","_ensureTypedArray","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","bufferUpdateKeys","ensureTypedArg","    #ifdef SHOULD_ROTATE_TEXTURE","ShaderMaterial","_setBufferUpdateRanges","       float oc = 1.0 - c;","loop","_value","randomise","vec3 unpackRotationAxis( in float hex ) {","_axis","   return params.x;","indexOffset","Group","emitterIDs","_activateParticles","       float y = 1.0 - gl_PointCoord.y - 0.5;","       fIndex = float( i );","distribution","runTime","texture","   vec3 c = vec3( 0.0 );","attribute vec4 color;","init","    force += vel;","attributeKeys","uniform float scale;","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","_updateBuffers","emitters","       float c = cos(angle);","multiplyScalar","hasPerspective","_radius","       float c = cos( -vAngle );","ceil","    pos += force;","particlesPerSecond","type","vertex","uniforms","__proto__","    highp float positionInTime = (age / maxAge);","mesh","console","setMat3","        float row = floor( (frameNumber - column) / framesX );","    force *= drag;","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","indexOf","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    #ifdef ALPHATEST","textureLoop","attributeOffset","    #ifdef HAS_PERSPECTIVE","rotationFunctions","setVec3Components","NUMBER","trace","randomFloat","length","_assignRotationValue","forceUpdateAll","test","185214glwYfZ","unshift","1073250qCeGQl","           unpackColor( color.y ),","unpackColor","void main() {","alphaTest","_attributesNeedDynamicReset","needsUpdate","forceFetchingFunctions","distributionClamp","_radiusScale","enable","amd","   float b = mod( hex, PACKED_COLOR_SIZE );","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        float wiggleSin = isAlive * sin( wiggleAmount );","#ifdef SHOULD_ROTATE_TEXTURE","   c.r = r / PACKED_COLOR_DIVISOR;","NEGATIVE_INFINITY","BOOLEAN","action","REVISION"];return(c=function(){return t})()}!function(){a(this,(function(){const t=u,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(592),"i"),n=p(t(342));e[t(382)](n+t(599))&&i[t(382)](n+"input")?p():n("0")}))()}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(467)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(t,e){const i=c();return(u=function(t,e){return i[t-=223]})(t,e)}h(void 0,(function(){const t=u,e=function(){const t=u;let e;try{e=Function(t(413)+'{}.constructor("return this")( ));')()}catch(i){e=window}return e}(),i=e[t(363)]=e[t(363)]||{},n=["log",t(548),t(231),t(578),"exception",t(699),t(377)];for(let o=0;o<n[t(379)];o++){const e=h.constructor[t(585)][t(669)](h),s=n[o],r=i[s]||e;e[t(360)]=h.bind(h),e[t(485)]=r[t(485)][t(669)](r),i[s]=e}}))();const l={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define[r(396)]?define("spe",l):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module[r(663)]=l),l[r(296)]=function(t,e,i,n){const o=r;this[o(268)]=i||1,this.size=e||1,this[o(531)]=t||Float32Array,this[o(653)]=new t(e*this.componentSize),this.indexOffset=n||0},l[r(296)][r(545)]=l[r(296)],l.TypedArrayHelper[r(585)][r(618)]=function(t,e){const i=r,n=this[i(653)].length;return!e&&(t*=this[i(268)]),t<n?this[i(453)](t):t>n?this[i(571)](t):void console.info(i(240),t+".",i(553))},l[r(296)].prototype.shrink=function(t){const e=r;return this[e(653)]=this[e(653)][e(422)](0,t),this[e(673)]=t,this},l[r(296)][r(585)][r(571)]=function(t){const e=r,i=this.array,n=new(this[e(531)])(t);return n[e(280)](i),this.array=n,this[e(673)]=t,this},l[r(296)][r(585)][r(251)]=function(t,e){const i=r;t*=this.componentSize,e*=this.componentSize;const n=[],o=this[i(653)],s=o.length;for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(308)](o[r]);return this[i(489)](0,n),this},l[r(296)][r(585)][r(489)]=function(t,e){const i=r,n=t+e[i(379)];return n>this[i(653)][i(379)]?this[i(571)](n):n<this[i(653)][i(379)]&&this[i(453)](n),this.array[i(280)](e,this[i(331)]+t),this},l[r(296)][r(585)][r(514)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},l[r(296)][r(585)][r(468)]=function(t,e,i){const n=r,o=this.array,s=this.indexOffset+t*this[n(268)];return o[s]=e,o[s+1]=i,this},l.TypedArrayHelper.prototype[r(682)]=function(t,e){return this[r(375)](t,e.x,e.y,e.z)},l[r(296)].prototype[r(375)]=function(t,e,i,n){const o=r,s=this[o(653)],a=this[o(331)]+t*this[o(268)];return s[a]=e,s[a+1]=i,s[a+2]=n,this},l[r(296)][r(585)][r(262)]=function(t,e){return this[r(412)](t,e.x,e.y,e.z,e.w)},l.TypedArrayHelper[r(585)][r(412)]=function(t,e,i,n,o){const s=r,a=this[s(653)],c=this[s(331)]+t*this[s(268)];return a[c]=e,a[c+1]=i,a[c+2]=n,a[c+3]=o,this},l[r(296)][r(585)][r(364)]=function(t,e){const i=r;return this[i(489)](this[i(331)]+t*this[i(268)],e[i(455)])},l[r(296)][r(585)][r(457)]=function(t,e){const i=r;return this[i(489)](this[i(331)]+t*this.componentSize,e[i(455)])},l[r(296)][r(585)][r(651)]=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},l.TypedArrayHelper.prototype[r(281)]=function(t,e){const i=r;return this[i(653)][this[i(331)]+t*this.componentSize]=e,this},l.TypedArrayHelper.prototype[r(445)]=function(t){const e=r;return this[e(653)][this[e(331)]+t]},l[r(296)][r(585)].getComponentValueAtIndex=function(t){const e=r;return this[e(653)][e(422)](this[e(331)]+t*this.componentSize)},l.ShaderAttribute=function(t,e,i){const n=r,o=l[n(544)][n(508)];this[n(357)]=typeof t===n(600)&&o[n(462)](t)?t:"f",this[n(268)]=o[this[n(357)]],this[n(446)]=i||Float32Array,this[n(244)]=null,this[n(420)]=null,this[n(458)]=!!e,this[n(562)]=0,this[n(266)]=0},l[r(544)][r(545)]=l[r(544)],l[r(544)][r(508)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},l.ShaderAttribute[r(585)].setUpdateRange=function(t,e){const i=r;this[i(562)]=Math[i(250)](t*this[i(268)],this[i(562)]*this.componentSize),this[i(266)]=Math[i(563)](e*this[i(268)],this[i(266)]*this[i(268)])},l[r(544)][r(585)][r(507)]=function(){const t=r,e=this[t(420)],i=e[t(267)];i.offset=this.updateMin,i[t(660)]=Math.min(this.updateMax-this[t(562)]+this[t(268)],this[t(244)][t(653)].length),e[t(391)]=!0},l[r(544)][r(585)][r(575)]=function(){const t=r;this.updateMin=0,this[t(266)]=0},l[r(544)][r(585)][r(690)]=function(){const e=r;this[e(420)][e(540)]=this[e(458)]?t[e(640)]:t[e(484)]},l[r(544)][r(585)][r(251)]=function(t,e){const i=r;this[i(244)][i(251)](t,e),this[i(381)]()},l[r(544)].prototype[r(381)]=function(){const e=r;this[e(420)][e(653)]=this[e(244)].array,this[e(420)][e(267)][e(255)]=0,this[e(420)][e(267)][e(660)]=-1,this.bufferAttribute[e(540)]=t[e(484)],this[e(420)].needsUpdate=!0},l.ShaderAttribute[r(585)][r(317)]=function(t){const e=r;null!==this[e(244)]&&this[e(244)][e(673)]===t*this[e(268)]||(null!==this[e(244)]&&this[e(244)][e(673)]!==t?this.typedArray[e(618)](t):null===this[e(244)]&&(this[e(244)]=new(l[e(296)])(this[e(446)],t,this[e(268)])))},l[r(544)][r(585)]._createBufferAttribute=function(e){const i=r;if(this[i(317)](e),null!==this[i(420)])return this.bufferAttribute[i(653)]=this[i(244)][i(653)],parseFloat(t[i(405)])>=81&&(this[i(420)][i(660)]=this[i(420)][i(653)][i(379)]/this[i(420)][i(304)]),void(this[i(420)][i(391)]=!0);this[i(420)]=new(t[i(419)])(this[i(244)][i(653)],this.componentSize),this[i(420)][i(540)]=this.dynamicBuffer?t[i(640)]:t[i(484)]},l[r(544)][r(585)][r(671)]=function(){const t=r;return null===this[t(244)]?0:this[t(244)][t(653)][t(379)]},l[r(533)]={defines:[r(511),r(615)][r(301)]("\n"),uniforms:["uniform float deltaTime;","uniform float runTime;",r(648),"uniform vec4 textureAnimation;",r(345)][r(301)]("\n"),attributes:[r(312),"attribute vec3 velocity;",r(237),"attribute vec3 rotationCenter;",r(632),r(233),r(287),r(341),r(269)].join("\n"),varyings:["varying vec4 vColor;",r(400),r(665),"#endif",r(588),"    varying vec4 vSpriteSheet;","#endif"][r(301)]("\n"),branchAvoidanceFunctions:[r(464),r(672),"}","float when_lt(float x, float y) {",r(416),"}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}","float when_ge(float x, float y) {",r(598),"}",r(421),r(407),"}",r(441),r(436),"}",r(310),r(700),"}"][r(301)]("\n"),unpackColor:["vec3 unpackColor( in float hex ) {",r(340),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",r(397),r(401),r(681),r(679),r(246),"}"][r(301)]("\n"),unpackRotationAxis:[r(328),r(340),r(645),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",r(397),r(401),"   c.g = g / PACKED_COLOR_DIVISOR;",r(679),r(486),r(689),r(246),"}"][r(301)]("\n"),floatOverLifetime:[r(637),"    highp float value = 0.0;",r(318),r(286),r(565),r(520),"",r(581),r(336),r(315),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",r(270),"",r(523),"}"][r(301)]("\n"),colorOverLifetime:[r(476),"    vec3 value = vec3( 0.0 );",r(527),r(431),r(465),r(523),"}"][r(301)]("\n"),paramFetchingFunctions:[r(634),r(330),"}",r(677),r(272),"}",r(414),"   return params.z;","}",r(558),r(647),"}"][r(301)]("\n"),forceFetchingFunctions:[r(481),r(274),"}",r(470),r(245),"}",r(692),r(639),"}"][r(301)]("\n"),rotationFunctions:[r(258),r(316),r(300),r(624),r(349),r(324),"",r(293),r(440),r(302),r(693),r(512),"",r(443),r(224),r(617),"      }","",r(606),"      vec3 center = rotationCenter;",r(496),"      mat4 rotationMatrix;",r(652),"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",r(656),"      translated = rotationCenter - pos;",r(664),r(313),r(512),r(509)][r(301)]("\n"),rotateTexture:[r(554),"",r(321),r(573),r(335),r(353),r(566),r(560),r(694),"",r(542),r(654),r(230),r(253),"        float rowNorm = vSpriteSheet.w;",r(398),r(432),"    #endif","",r(284)][r(301)]("\n")},l[r(469)]={vertex:[l[r(533)][r(549)],l[r(533)][r(359)],l[r(533)][r(307)],l[r(533)].varyings,e[r(494)],e[r(675)],t[r(662)][r(495)],l[r(533)][r(506)],l[r(533)][r(387)],l[r(533)][r(225)],l[r(533)][r(589)],l.shaderChunks.colorOverLifetime,l[r(533)][r(444)],l.shaderChunks[r(392)],l[r(533)][r(374)],r(388),r(459),r(577),"    highp float maxAge = getMaxAge();",r(361),r(449),r(661),"        float wiggleAmount = positionInTime * getWiggle();",r(399),"        float wiggleCos = isAlive * cos( wiggleAmount );",r(694),r(309),r(429),r(406),"    vec3 pos = vec3( position );",r(597),r(343),r(366),r(532),r(355),r(661),"        pos.x += wiggleSin;",r(602),r(460),r(694),r(252),r(586),r(694),r(238),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",r(373),r(264),r(642),r(424),"    #endif",r(241),r(628),r(437),"           positionInTime,",r(305),r(386),r(499),r(658),"       );",r(642),r(492),r(694),r(518),r(477),r(321),r(635),r(694),r(542),r(684),r(285),r(619),r(612),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));",r(365),"        float columnNorm = column / framesX;",r(626),r(423),r(678),"        vSpriteSheet.z = columnNorm;",r(430),"    #endif",r(567),r(623),e[r(276)],e[r(278)],"}"][r(301)]("\n"),fragment:[l[r(533)][r(359)],t[r(662)].common,e[r(498)],e[r(501)],l[r(533)][r(698)],l[r(533)][r(506)],r(388),r(448),r(442),r(370),r(528),"    #endif",l[r(533)].rotateTexture,t[r(662)][r(483)],r(369),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[r(662)][r(277)],"}"][r(301)]("\n")},l[r(418)]={types:{BOOLEAN:"boolean",STRING:r(600),NUMBER:r(289),OBJECT:r(256)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=r;if(Array.isArray(t)){for(let o=t[n(379)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(320)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=r;if(Array.isArray(t)){for(let o=t[n(379)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(555)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=r;e=e||3,i=i||3,!1===Array[n(456)](t._value)&&(t[n(326)]=[t[n(326)]]),!1===Array[n(456)](t[n(311)])&&(t[n(311)]=[t[n(311)]]);const o=this[n(288)](t._value[n(379)],e,i),s=this[n(288)](t[n(311)][n(379)],e,i),a=Math[n(563)](o,s);t[n(326)][n(379)]!==a&&(t[n(326)]=this.interpolateArray(t._value,a)),t[n(311)][n(379)]!==a&&(t[n(311)]=this[n(297)](t._spread,a))},interpolateArray(t,e){const i=r,n=t[i(379)],o=["function"==typeof t[0][i(633)]?t[0][i(633)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(502)](e),a=Math[i(354)](e),c=e-n;o[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return o[i(308)](typeof t[n-1][i(633)]===i(670)?t[n-1].clone():t[n-1]),o},clamp:(t,e,i)=>Math.max(e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[r(696)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,n,o){const s=r;let a,c=this.types;return typeof e===c[s(376)]&&typeof n===c.NUMBER?e+(n-e)*o:e instanceof t[s(482)]&&n instanceof t[s(482)]?(a=e[s(633)](),a.x=this[s(303)](e.x,n.x,o),a.y=this[s(303)](e.y,n.y,o),a):e instanceof t[s(551)]&&n instanceof t[s(551)]?(a=e[s(633)](),a.x=this[s(303)](e.x,n.x,o),a.y=this[s(303)](e.y,n.y,o),a.z=this[s(303)](e.z,n.z,o),a):e instanceof t[s(461)]&&n instanceof t[s(461)]?(a=e[s(633)](),a.x=this[s(303)](e.x,n.x,o),a.y=this[s(303)](e.y,n.y,o),a.z=this[s(303)](e.z,n.z,o),a.w=this[s(303)](e.w,n.w,o),a):e instanceof t[s(426)]&&n instanceof i?(a=e[s(633)](),a.r=this[s(303)](e.r,n.r,o),a.g=this[s(303)](e.g,n.g,o),a.b=this[s(303)](e.b,n.b,o),a):void console[s(548)](s(655),e,n)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=r;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(676)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=r;for(let i=0;i<t[e(379)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[r(696)]()-.5),randomVector3(t,e,i,n,o){const s=r;let a=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math.random()*n.y-.5*n.y),h=i.z+(Math[s(696)]()*n.z-.5*n.z);o&&(a=.5*-o.x+this[s(590)](a,o.x),c=.5*-o.y+this[s(590)](c,o.y),h=.5*-o.z+this.roundToNearestMultiple(h,o.z)),t[s(244)][s(375)](e,a,c,h)},randomColor(t,e,i,n){const o=r;let s=i.r+Math.random()*n.x,a=i.g+Math[o(696)]()*n.y,c=i.b+Math[o(696)]()*n.z;s=this.clamp(s,0,1),a=this[o(288)](a,0,1),c=this[o(288)](c,0,1),t[o(244)][o(375)](e,s,a,c)},randomColorAsHex:function(){const e=r,i=new(t[e(426)]);return function(t,n,o,s){const r=e,a=o[r(379)],c=[];for(let e=0;e<a;++e){const t=s[e];i[r(298)](o[e]),i.r+=Math.random()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math[r(696)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this[r(288)](i.g,0,1),i.b=this.clamp(i.b,0,1),c[r(308)](i[r(680)]())}t[r(244)][r(412)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=r,s=i[o(633)]();s[o(303)](n,Math[o(696)]()),t[o(244)].setVec3Components(e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,a,c){const h=r;let u=2*Math[h(696)]()-1,l=6.2832*Math.random(),f=Math[h(292)](1-u*u),p=this[h(378)](n,o),d=0,m=0,g=0;a&&(p=Math[h(614)](p/a)*a),d=f*Math.cos(l)*p,m=f*Math[h(580)](l)*p,g=u*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(375)](e,d,m,g)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,a){const c=r;let h=6.2832*Math.random(),u=Math[c(676)](this[c(378)](n,o)),l=0,f=0,p=0;a&&(u=Math[c(614)](u/a)*a),l=Math[c(584)](h)*u,f=Math[c(580)](h)*u,l*=s.x,f*=s.y,l+=i.x,f+=i.y,p+=i.z,t[c(244)].setVec3Components(e,l,f,p)},randomDirectionVector3OnSphere:function(){const e=r,i=new(t[e(551)]);return function(t,n,o,s,r,a,c,h){const u=e;i[u(298)](a),i.x-=o,i.y-=s,i.z-=r,i[u(228)]()[u(350)](-this[u(378)](c,h)),t[u(244)][u(375)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=r,i=new(t[e(551)]);return function(t,n,o,s,r,a,c,h){const u=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i[u(228)]()[u(350)](-this[u(378)](c,h)),t[u(244)][u(375)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=r,i=new(t[e(551)]),n=new(t[e(551)]),o=new(t[e(426)]),s=new(t[e(551)])(1,1,1);return function(t,r){const a=e;return i.copy(t)[a(228)](),n.copy(r).normalize(),i.x+=.5*-r.x+Math.random()*r.x,i.y+=.5*-r.y+Math[a(696)]()*r.y,i.z+=.5*-r.z+Math[a(696)]()*r.z,i[a(228)]()[a(547)](s)[a(350)](.5),o[a(539)](i.x,i.y,i.z),o[a(680)]()}}()},l.Group=function(e){const i=r,o=l[i(418)],s=o[i(595)];(e=o[i(320)](e,s.OBJECT,{}))[i(339)]=o[i(320)](e[i(339)],s.OBJECT,{}),this[i(616)]=t[i(530)][i(526)](),this[i(260)]=o[i(320)](e[i(260)],s[i(376)],.016),this[i(339)]=o.ensureInstanceOf(e[i(339)].value,t[i(479)],null),this.textureFrames=o[i(555)](e[i(339)][i(226)],n,new(t[i(482)])(1,1)),this[i(510)]=o[i(320)](e[i(339)][i(697)],s.NUMBER,this[i(646)].x*this.textureFrames.y),this.textureLoop=o.ensureTypedArg(e[i(339)][i(325)],s.NUMBER,1),this[i(646)][i(563)](new n(1,1)),this.hasPerspective=o[i(320)](e[i(351)],s[i(403)],!0),this.colorize=o[i(320)](e[i(546)],s[i(403)],!0),this[i(294)]=o[i(320)](e.maxParticleCount,s[i(376)],null),this[i(561)]=o.ensureTypedArg(e[i(561)],s.NUMBER,t[i(538)]),this.transparent=o[i(320)](e[i(610)],s[i(403)],!0),this.alphaTest=parseFloat(o.ensureTypedArg(e[i(389)],s[i(376)],0)),this[i(447)]=o[i(320)](e[i(447)],s[i(403)],!1),this[i(223)]=o[i(320)](e[i(223)],s[i(403)],!0),this[i(629)]=o.ensureTypedArg(e[i(629)],s[i(403)],!0),this[i(572)]=o.ensureTypedArg(e[i(572)],s[i(376)],300),this[i(348)]=[],this[i(333)]=[],this[i(503)]=[],this[i(605)]=null,this._createNewWhenPoolEmpty=0,this[i(472)]=!1,this._attributesNeedDynamicReset=!1,this[i(519)]=0,this[i(359)]={tex:{type:"t",value:this[i(339)]},textureAnimation:{type:"v4",value:new(t[i(461)])(this[i(646)].x,this.textureFrames.y,this.textureFrameCount,Math[i(563)](Math.abs(this[i(371)]),1))},fogColor:{type:"c",value:this[i(629)]?new(t[i(426)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(572)]}},this[i(549)]={HAS_PERSPECTIVE:this[i(351)],COLORIZE:this[i(546)],VALUE_OVER_LIFETIME_LENGTH:l[i(643)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(646)].x>1||this.textureFrames.y>1},this.attributes={position:new l.ShaderAttribute("v3",!0),acceleration:new(l[i(544)])("v4",!0),velocity:new(l[i(544)])("v3",!0),rotation:new(l[i(544)])("v4",!0),rotationCenter:new(l[i(544)])("v3",!0),params:new(l[i(544)])("v4",!0),size:new l.ShaderAttribute("v4",!0),angle:new(l[i(544)])("v4",!0),color:new l.ShaderAttribute("v4",!0),opacity:new(l[i(544)])("v4",!0)},this[i(344)]=Object[i(536)](this.attributes),this.attributeCount=this[i(344)][i(379)],this.material=new(t[i(322)])({uniforms:this[i(359)],vertexShader:l.shaders[i(358)],fragmentShader:l[i(469)][i(279)],blending:this[i(561)],transparent:this[i(610)],alphaTest:this.alphaTest,depthWrite:this[i(447)],depthTest:this[i(223)],defines:this[i(549)],fog:this.fog}),this[i(579)]=new(t[i(236)]),this[i(362)]=new(t[i(593)])(this.geometry,this[i(299)]),null===this[i(294)]&&console[i(548)](i(346))},l[r(332)][r(545)]=l[r(332)],l[r(332)][r(585)]._updateDefines=function(){const t=r;let e,i=this[t(348)],n=i[t(379)]-1,o=this[t(549)];for(;n>=0;--n)e=i[n],!o[t(601)]&&(o[t(243)]=o[t(243)]||!!Math.max(Math[t(563)][t(467)](null,e[t(594)][t(497)]),Math[t(563)][t(467)](null,e[t(594)][t(636)]))),o[t(425)]=o[t(425)]||!!Math[t(563)](e.rotation[t(594)],e[t(466)][t(474)]),o.SHOULD_WIGGLE_PARTICLES=o[t(488)]||!!Math[t(563)](e[t(596)][t(497)],e[t(596)][t(636)]);this[t(299)][t(391)]=!0},l[r(332)][r(585)]._applyAttributesToGeometry=function(){const t=r;let e,i,n=this.attributes,o=this[t(579)],s=o[t(307)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=s[r],i?i[t(653)]=e[t(244)][t(653)]:o[t(537)](r,e.bufferAttribute),e[t(420)][t(391)]=!0);this[t(579)][t(559)](0,this[t(519)])},l.Group[r(585)][r(515)]=function(t){const e=r;if(t instanceof l[e(409)]==!1)return void console.error(e(604),t);if(this[e(333)][e(368)](t[e(616)])>-1)return void console[e(578)](e(574));if(null!==t[e(613)])return void console[e(578)](e(275));const i=this[e(307)],n=this.particleCount,o=n+t[e(519)];this[e(519)]=o,null!==this.maxParticleCount&&this[e(519)]>this[e(294)]&&console[e(548)]("SPE.Group: maxParticleCount exceeded. Requesting",this.particleCount,"particles, can support only",this[e(294)]),t[e(608)](t[e(410)][e(326)]+t[e(410)][e(311)]),t[e(323)](this.attributeKeys),t._setAttributeOffset(n),t[e(613)]=this,t[e(307)]=this[e(307)];for(const s in i)i[e(462)](s)&&i[s][e(644)](null!==this[e(294)]?this[e(294)]:this[e(519)]);for(let s=n;s<o;++s)t[e(478)](s),t[e(473)](s,e(450)),t._assignForceValue(s,e(232)),t[e(265)](s,e(686)),t._assignAbsLifetimeValue(s,e(673)),t[e(535)](s),t._assignRotationValue(s),t[e(415)](s),t._assignColorValue(s);return this[e(438)](),this[e(348)][e(308)](t),this.emitterIDs[e(308)](t.uuid),this[e(283)](t),this[e(299)][e(391)]=!0,this.geometry[e(391)]=!0,this[e(472)]=!0,this},l[r(332)][r(585)].removeEmitter=function(t){const e=r,i=this[e(333)][e(368)](t[e(616)]);if(t instanceof l[e(409)]==!1)return void console[e(578)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(578)](e(668));const n=t[e(372)],o=n+t.particleCount,s=this[e(307)][e(239)].typedArray;for(let r=n;r<o;++r)s[e(653)][4*r]=0,s.array[4*r+1]=0;this[e(348)][e(251)](i,1),this[e(333)][e(251)](i,1);for(const r in this.attributes)this[e(307)][e(462)](r)&&this[e(307)][r][e(251)](n,o);this[e(519)]-=t[e(519)],t._onRemove(),this[e(472)]=!0},l[r(332)][r(585)][r(570)]=function(){const t=r,e=this[t(503)],i=this._createNewWhenPoolEmpty;if(e[t(379)])return e[t(638)]();if(i){const e=new(l[t(409)])(this[t(605)]);return this[t(515)](e),e}return null},l.Group[r(585)][r(417)]=function(t){const e=r;if(t instanceof l[e(409)]!=!1)return t[e(541)](),this[e(503)][e(384)](t),this;console[e(578)](e(234),t)},l[r(332)][r(585)][r(487)]=function(){return this._pool},l[r(332)][r(585)][r(439)]=function(t,e,i){const n=r;let o;this[n(605)]=e,this[n(550)]=!!i;for(let s=0;s<t;++s)o=Array.isArray(e)?new(l[n(409)])(e[s]):new(l[n(409)])(e),this.addEmitter(o),this[n(417)](o);return this},l.Group.prototype[r(621)]=function(t){const e=r,i=this[e(570)](),n=this;if(null!==i)return t instanceof o&&(i.position[e(497)][e(298)](t),i[e(227)].value=i[e(227)][e(497)]),i[e(395)](),setTimeout((()=>{const t=e;i[t(427)](),n[t(417)](i)}),1e3*Math.max(i[e(490)],i[e(410)][e(497)]+i[e(410)].spread)),this;console[e(587)](e(263))},l[r(332)][r(585)].triggerPoolEmitter=function(t,e){const i=r;if(typeof t===i(289)&&t>1)for(let n=0;n<t;++n)this[i(621)](e);else this[i(621)](e);return this},l.Group[r(585)]._updateUniforms=function(t){const e=r;this[e(359)][e(338)].value+=t,this[e(359)][e(411)][e(497)]=t},l[r(332)].prototype._resetBufferRanges=function(){const t=r;let e=this.attributeKeys,i=this[t(620)]-1,n=this[t(307)];for(;i>=0;--i)n[e[i]][t(575)]()},l[r(332)].prototype[r(347)]=function(t){const e=r;let i,n,o,s=this[e(344)],a=this.attributeCount-1,c=this[e(307)],h=t.bufferUpdateRanges;for(;a>=0;--a)i=s[a],n=h[i],o=c[i],o.setUpdateRange(n.min,n[e(563)]),o[e(507)]()},l.Group.prototype[r(641)]=function(t){const e=r;var i=this[e(348)],n=i.length,o=t||this.fixedTimeStep,s=this[e(344)],a=this[e(307)];if(this[e(607)](o),this[e(248)](),0!==n||!1!==this[e(472)]||!1!==this[e(390)]){for(var c,h=0;h<n;++h)(c=i[h])[e(641)](o),this._updateBuffers(c);if(!0===this[e(390)]){for(h=this[e(620)]-1;h>=0;--h)a[s[h]][e(690)]();this[e(390)]=!1}if(!0===this[e(472)]){for(h=this.attributeCount-1;h>=0;--h)a[s[h]][e(381)]();this._attributesNeedRefresh=!1,this[e(390)]=!0}}},l.Group[r(585)][r(557)]=function(){const t=r;return this[t(579)].dispose(),this[t(299)][t(557)](),this},l[r(409)]=function(e){const i=r,n=l[i(418)],a=n[i(595)],c=l[i(643)];(e=n[i(320)](e,a[i(529)],{})).position=n.ensureTypedArg(e[i(227)],a[i(529)],{}),e[i(450)]=n[i(320)](e[i(450)],a[i(529)],{}),e.acceleration=n[i(320)](e.acceleration,a.OBJECT,{}),e[i(428)]=n[i(320)](e.radius,a[i(529)],{}),e[i(235)]=n[i(320)](e.drag,a[i(529)],{}),e.rotation=n[i(320)](e[i(466)],a.OBJECT,{}),e[i(249)]=n[i(320)](e[i(249)],a.OBJECT,{}),e[i(686)]=n.ensureTypedArg(e[i(686)],a[i(529)],{}),e.size=n.ensureTypedArg(e[i(673)],a[i(529)],{}),e[i(594)]=n[i(320)](e[i(594)],a[i(529)],{}),e[i(596)]=n.ensureTypedArg(e[i(596)],a.OBJECT,{}),e[i(410)]=n.ensureTypedArg(e[i(410)],a[i(529)],{}),e[i(295)]&&console[i(548)](i(367)),this[i(616)]=s[i(526)](),this[i(357)]=n.ensureTypedArg(e[i(357)],a[i(376)],l[i(271)].BOX),this[i(227)]={_value:n[i(555)](e[i(227)][i(497)],t[i(551)],new o),_spread:n[i(555)](e[i(227)].spread,t[i(551)],new(t[i(551)])),_spreadClamp:n[i(555)](e[i(227)][i(695)],t[i(551)],new(t[i(551)])),_distribution:n[i(320)](e[i(227)][i(337)],a[i(376)],this.type),_randomise:n[i(320)](e[i(227)].randomise,a[i(403)],!1),_radius:n[i(320)](e[i(227)][i(428)],a[i(376)],10),_radiusScale:n[i(555)](e.position[i(691)],t[i(551)],new(t[i(551)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e[i(227)][i(393)],a[i(376)],0)},this[i(450)]={_value:n[i(555)](e[i(450)][i(497)],t[i(551)],new(t[i(551)])),_spread:n[i(555)](e.velocity[i(636)],o,new o),_distribution:n[i(320)](e[i(450)][i(337)],a[i(376)],this[i(357)]),_randomise:n[i(320)](e.position[i(327)],a[i(403)],!1)},this[i(232)]={_value:n[i(555)](e[i(232)].value,t[i(551)],new(t[i(551)])),_spread:n[i(555)](e.acceleration[i(636)],t[i(551)],new(t[i(551)])),_distribution:n[i(320)](e[i(232)].distribution,a[i(376)],this[i(357)]),_randomise:n[i(320)](e[i(227)][i(327)],a[i(403)],!1)},this[i(235)]={_value:n.ensureTypedArg(e[i(235)][i(497)],a.NUMBER,0),_spread:n[i(320)](e[i(235)][i(636)],a.NUMBER,0),_randomise:n.ensureTypedArg(e[i(227)][i(327)],a[i(403)],!1)},this[i(596)]={_value:n[i(320)](e[i(596)].value,a[i(376)],0),_spread:n[i(320)](e[i(596)][i(636)],a[i(376)],0)},this[i(466)]={_axis:n[i(555)](e.rotation[i(659)],o,new(t[i(551)])(0,1,0)),_axisSpread:n[i(555)](e[i(466)].axisSpread,t[i(551)],new(t[i(551)])),_angle:n[i(320)](e[i(466)][i(594)],a.NUMBER,0),_angleSpread:n[i(320)](e.rotation.angleSpread,a.NUMBER,0),_static:n[i(320)](e[i(466)][i(475)],a[i(403)],!1),_center:n.ensureInstanceOf(e[i(466)][i(522)],t[i(551)],this[i(227)][i(326)].clone()),_randomise:n[i(320)](e[i(227)][i(327)],a.BOOLEAN,!1)},this.maxAge={_value:n[i(320)](e[i(410)][i(497)],a.NUMBER,2),_spread:n[i(320)](e[i(410)][i(636)],a.NUMBER,0)},this.color={_value:n.ensureArrayInstanceOf(e[i(249)][i(497)],t[i(426)],new(t[i(426)])),_spread:n[i(480)](e[i(249)][i(636)],t[i(551)],new(t[i(551)])),_randomise:n.ensureTypedArg(e[i(227)][i(327)],a[i(403)],!1)},this.opacity={_value:n[i(583)](e.opacity[i(497)],a[i(376)],1),_spread:n[i(583)](e[i(686)][i(636)],a[i(376)],0),_randomise:n[i(320)](e[i(227)][i(327)],a[i(403)],!1)},this[i(673)]={_value:n[i(583)](e[i(673)][i(497)],a[i(376)],1),_spread:n.ensureArrayTypedArg(e.size[i(636)],a[i(376)],0),_randomise:n[i(320)](e.position[i(327)],a[i(403)],!1)},this[i(594)]={_value:n.ensureArrayTypedArg(e[i(594)][i(497)],a[i(376)],0),_spread:n.ensureArrayTypedArg(e[i(594)][i(636)],a[i(376)],0),_randomise:n[i(320)](e[i(227)][i(327)],a[i(403)],!1)},this[i(519)]=n[i(320)](e.particleCount,a[i(376)],100),this[i(490)]=n[i(320)](e[i(490)],a[i(376)],null),this[i(254)]=n[i(320)](e[i(254)],a[i(403)],!1),this[i(257)]=n[i(320)](e.activeMultiplier,a[i(376)],1),this[i(569)]=n.ensureTypedArg(e[i(569)],a[i(376)],1),this.alive=n.ensureTypedArg(e[i(683)],a.BOOLEAN,!0),this[i(356)]=0,this.activationIndex=0,this.attributeOffset=0,this[i(630)]=0,this[i(408)]=0,this[i(452)]=0,this[i(613)]=null,this[i(307)]=null,this[i(657)]=null,this[i(667)]={position:n[i(320)](e.position[i(327)],a[i(403)],!1)||n[i(320)](e[i(428)][i(327)],a.BOOLEAN,!1),velocity:n[i(320)](e[i(450)][i(327)],a.BOOLEAN,!1),acceleration:n[i(320)](e.acceleration[i(327)],a[i(403)],!1)||n[i(320)](e[i(235)][i(327)],a[i(403)],!1),rotation:n[i(320)](e[i(466)][i(327)],a[i(403)],!1),rotationCenter:n[i(320)](e[i(466)][i(327)],a[i(403)],!1),size:n[i(320)](e[i(673)][i(327)],a[i(403)],!1),color:n[i(320)](e[i(249)][i(327)],a[i(403)],!1),opacity:n[i(320)](e.opacity[i(327)],a[i(403)],!1),angle:n[i(320)](e[i(594)][i(327)],a[i(403)],!1)},this.updateFlags={},this[i(433)]={},this[i(622)]={maxAge:i(239),position:i(227),velocity:"velocity",acceleration:i(232),drag:i(232),wiggle:i(239),rotation:i(466),size:"size",color:"color",opacity:i(686),angle:"angle"};for(const t in this.updateMap)this[i(622)][i(462)](t)&&(this[i(433)][this[i(622)][t]]=0,this[i(259)][this[i(622)][t]]=!1,this._createGetterSetters(this[t],t));this[i(631)]={},this[i(344)]=null,this[i(620)]=0,n.ensureValueOverLifetimeCompliance(this[i(249)],c,c),n[i(282)](this[i(686)],c,c),n.ensureValueOverLifetimeCompliance(this[i(673)],c,c),n[i(282)](this[i(594)],c,c)},l[r(409)][r(545)]=l[r(409)],l[r(409)].prototype._createGetterSetters=function(t,e){const i=this;for(const n in t)if(t.hasOwnProperty(n)){const o=n.replace("_","");Object.defineProperty(t,o,{get:function(t){return function(){return this[t]}}(n),set:function(t){return function(n){const o=u,s=i[o(622)][e],r=this[t],a=l.valueOverLifetimeLength;t===o(513)?(i[o(259)][o(609)]=!0,i[o(433)].rotationCenter=0):t===o(517)?i[o(667)][s]=n:(i[o(259)][s]=!0,i[o(433)][s]=0),i[o(613)][o(283)](),this[t]=n,Array[o(456)](r)&&l.utils.ensureValueOverLifetimeCompliance(i[e],a,a)}}(n)})}},l[r(409)][r(585)]._setBufferUpdateRanges=function(t){const e=r;this[e(344)]=t,this[e(620)]=t[e(379)];for(let i=this[e(620)]-1;i>=0;--i)this[e(631)][t[i]]={min:Number.POSITIVE_INFINITY,max:Number[e(402)]}},l[r(409)][r(585)]._calculatePPSValue=function(t){const e=r,i=this[e(519)];this.duration?this[e(356)]=i/(t<this[e(490)]?t:this[e(490)]):this[e(356)]=i/t},l[r(409)][r(585)][r(525)]=function(t){const e=r;this.attributeOffset=t,this[e(261)]=t,this[e(674)]=t+this[e(519)]},l.Emitter.prototype[r(556)]=function(t,e){const i=r;switch(t){case i(227):this[i(478)](e);break;case i(450):case i(232):this[i(473)](e,t);break;case"size":case i(686):this[i(265)](e,t);break;case i(594):this[i(535)](e);break;case i(239):this[i(415)](e);break;case"rotation":this._assignRotationValue(e);break;case i(249):this[i(504)](e)}},l.Emitter[r(585)][r(478)]=function(t){const e=r,i=l[e(271)],n=l.utils,o=this[e(227)],s=this[e(307)][e(227)],a=o[e(326)],c=o._spread;switch(o._distribution){case i[e(491)]:n[e(290)](s,t,a,c,o[e(534)]);break;case i[e(687)]:n.randomVector3OnSphere(s,t,a,o._radius,o[e(311)].x,o[e(394)],o._spreadClamp.x,o._distributionClamp||this[e(519)]);break;case i[e(688)]:n[e(649)](s,t,a,o[e(352)],o[e(311)].x,o._radiusScale,o[e(534)].x);break;case i[e(524)]:n[e(493)](s,t,a,c)}},l[r(409)].prototype._assignForceValue=function(t,e){const i=r;let n,o,s,a,c,h=l[i(271)],u=l.utils,f=this[e],p=f[i(326)],d=f[i(311)];switch(f[i(516)]){case h[i(491)]:u[i(290)](this[i(307)][e],t,p,d);break;case h[i(687)]:n=this[i(307)][i(227)][i(244)][i(653)],c=3*t,o=n[c],s=n[c+1],a=n[c+2],u[i(603)](this.attributes[e],t,o,s,a,this.position[i(326)],f[i(326)].x,f._spread.x);break;case h[i(688)]:n=this.attributes[i(227)].typedArray[i(653)],c=3*t,o=n[c],s=n[c+1],a=n[c+2],u[i(576)](this.attributes[e],t,o,s,a,this[i(227)][i(326)],f[i(326)].x,f[i(311)].x);break;case h[i(524)]:u[i(493)](this[i(307)][e],t,p,d)}if(e===i(232)){const e=u[i(288)](u[i(378)](this[i(235)][i(326)],this[i(235)][i(311)]),0,1);this.attributes[i(232)][i(244)].array[4*t+3]=e}},l.Emitter[r(585)][r(265)]=function(t,e){const i=r;let n,o=this[i(307)][e][i(244)],s=this[e],a=l.utils;a[i(521)](s._value)&&a[i(521)](s[i(311)])?(n=Math[i(676)](a[i(378)](s[i(326)][0],s[i(311)][0])),o.setVec4Components(t,n,n,n,n)):o.setVec4Components(t,Math[i(676)](a[i(378)](s[i(326)][0],s._spread[0])),Math[i(676)](a[i(378)](s._value[1],s._spread[1])),Math[i(676)](a[i(378)](s._value[2],s[i(311)][2])),Math[i(676)](a.randomFloat(s[i(326)][3],s[i(311)][3])))},l.Emitter.prototype._assignAngleValue=function(t){const e=r;let i,n=this[e(307)][e(594)][e(244)],o=this[e(594)],s=l[e(418)];s.arrayValuesAreEqual(o[e(326)])&&s.arrayValuesAreEqual(o[e(311)])?(i=s[e(378)](o._value[0],o[e(311)][0]),n[e(412)](t,i,i,i,i)):n[e(412)](t,s.randomFloat(o[e(326)][0],o[e(311)][0]),s[e(378)](o[e(326)][1],o[e(311)][1]),s[e(378)](o[e(326)][2],o[e(311)][2]),s[e(378)](o[e(326)][3],o[e(311)][3]))},l[r(409)].prototype[r(415)]=function(t){const e=r;this[e(307)][e(239)][e(244)][e(412)](t,this.isStatic?1:0,0,Math.abs(l.utils.randomFloat(this[e(410)][e(326)],this[e(410)]._spread)),l[e(418)][e(378)](this.wiggle[e(326)],this.wiggle[e(311)]))},l.Emitter[r(585)][r(380)]=function(t){const e=r;this.attributes.rotation[e(244)][e(375)](t,l[e(418)][e(434)](this[e(466)][e(329)],this[e(466)]._axisSpread),l[e(418)][e(378)](this[e(466)][e(611)],this[e(466)][e(685)]),this[e(466)]._static?0:1),this.attributes.rotationCenter[e(244)][e(682)](t,this[e(466)][e(564)])},l[r(409)][r(585)][r(504)]=function(t){const e=r;l[e(418)][e(451)](this[e(307)].color,t,this[e(249)]._value,this[e(249)][e(311)])},l[r(409)][r(585)]._resetParticle=function(t){const e=r;let i,n,o=this.resetFlags,s=this[e(259)],a=this.updateCounts,c=this[e(344)];for(let r=this[e(620)]-1;r>=0;--r)i=c[r],n=s[i],!0!==o[i]&&!0!==n||(this[e(556)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&a[i]===this[e(519)]?(s[i]=!1,a[i]=0):1==n&&++a[i])},l.Emitter[r(585)][r(625)]=function(t,e){const i=r,n=this[i(631)][t];n.min=Math[i(250)](e,n[i(250)]),n[i(563)]=Math[i(563)](e,n[i(563)])},l.Emitter.prototype[r(248)]=function(){const t=r;let e,i=this[t(631)],n=this[t(319)],o=this[t(471)]-1;for(;o>=0;--o)e=n[o],i[e].min=Number[t(568)],i[e][t(563)]=Number[t(402)]},l.Emitter[r(585)][r(242)]=function(){const t=r;this.particlesPerSecond=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this[t(613)]=null,this[t(307)]=null,this.paramsArray=null,this.age=0},l[r(409)].prototype[r(543)]=function(){--this[r(452)]},l.Emitter.prototype[r(306)]=function(){++this[r(452)]},l.Emitter.prototype[r(591)]=function(t,e,i,n){const o=r;for(var s,a,c,h,u=e-1;u>=t;--u)0!==(h=i[s=4*u])&&(c=i[s+1],a=i[s+2],1===this[o(569)]?(c+=n)>=a&&(c=0,h=0,this._decrementParticleCount()):(c-=n)<=0&&(c=a,h=0,this[o(543)]()),i[s]=h,i[s+1]=c,this[o(625)]("params",u))},l[r(409)][r(585)][r(334)]=function(t,e,i,n){const o=r,s=this[o(569)];for(var a,c,h=t;h<e;++h)0!=i[a=4*h]&&1!==this[o(519)]||(this._incrementParticleCount(),i[a]=1,this[o(500)](h),c=n*(h-t),i[a+1]=-1===s?i[a+2]-c:c,this._updateAttributeUpdateRange(o(239),h))},l[r(409)][r(585)][r(641)]=function(t){const e=r;if(this[e(254)])return;null===this[e(657)]&&(this[e(657)]=this[e(307)][e(239)][e(244)][e(653)]);const i=this[e(372)],n=i+this[e(519)],o=this.paramsArray,s=this[e(356)]*this[e(257)]*t,a=this.activationIndex;if(this._resetBufferRanges(),this._checkParticleAges(i,n,o,t),!1===this[e(683)])return void(this[e(408)]=0);if(null!==this[e(490)]&&this.age>this[e(490)])return this[e(683)]=!1,void(this[e(408)]=0);const c=1===this[e(519)]?a:0|a,h=Math.min(c+s,this[e(674)]),u=h-this[e(261)]|0,l=u>0?t/u:0;this[e(334)](c,h,o,l),this.activationIndex+=s,this[e(261)]>n&&(this[e(261)]=i),this[e(408)]+=t},l[r(409)].prototype.reset=function(t){const e=r;if(this[e(408)]=0,this[e(683)]=!1,!0===t){const t=this[e(372)],o=t+this[e(519)],s=this[e(657)],r=this[e(307)].params.bufferAttribute;for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(267)][e(255)]=0,r.updateRange.count=-1,r[e(391)]=!0}return this},l.Emitter[r(585)][r(395)]=function(){return this[r(683)]=!0,this},l[r(409)][r(585)][r(427)]=function(){return this[r(683)]=!1,this},l[r(409)][r(585)][r(666)]=function(){const t=r;return null!==this[t(613)]?this[t(613)][t(505)](this):console.error("Emitter does not belong to a group, cannot remove."),this};const f=l;function p(t){function e(t){const i=u;if(typeof t===i(600))return function(t){}[i(545)]("while (true) {}")[i(467)](i(435));1!==(""+t/t)[i(379)]||t%20==0?function(){return!0}[i(545)](i(650)+i(454)).call(i(404)):function(){return!1}[i(545)]("debu"+i(454))[i(467)](i(582)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{f as _};

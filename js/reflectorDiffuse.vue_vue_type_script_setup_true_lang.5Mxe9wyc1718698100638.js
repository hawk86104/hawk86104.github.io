import{b_ as t,a0 as n,C as e,j as r}from"./three.erXpfL-r1718698100638.js";import{N as o}from"./@tresjs.aawOCoPx1718698100638.js";import{R as c}from"./all.three.Qw9uPAR91718698100638.js";import{d as a,b as i,a3 as s,a2 as u,w as f,o as l,D as p,J as m,m as d,u as h}from"./@vue.CpOXM7bB1718698100638.js";!function(t,n){const e=x,r=y();for(;;)try{if(526725===parseInt(e(317))/1*(-parseInt(e(303))/2)+parseInt(e(285))/3*(parseInt(e(291))/4)+-parseInt(e(316))/5+-parseInt(e(301))/6+-parseInt(e(311))/7*(-parseInt(e(288))/8)+parseInt(e(300))/9*(-parseInt(e(319))/10)+parseInt(e(313))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(307)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=x,n=new RegExp(t(308)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=b(t(309));n[t(305)](r+"chain")&&e[t(305)](r+t(325))?b():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(307)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=y();return(x=function(t,n){return e[t-=285]})(t,n)}g(void 0,(function(){const t=x;let n;try{n=Function("return (function() "+t(321)+");")()}catch(o){n=window}const e=n[t(299)]=n[t(299)]||{},r=[t(302),"warn",t(304),t(306),t(297),t(290),"trace"];for(let c=0;c<r[t(324)];c++){const n=g.constructor[t(312)][t(323)](g),o=r[c],a=e[o]||n;n.__proto__=g[t(323)](g),n[t(289)]=a[t(289)][t(323)](a),e[o]=n}}))();function y(){const t=["377056PTTlAX","info","test","error","apply","function *\\( *\\)","init","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","849583lcqmsf","prototype","18754769fmwhtp","void main() {","fragmentShader","4880415OyEgfD","4hCqvVJ","gger","190ORLePM","constructor",'{}.constructor("return this")( )',"action","bind","length","input","3000RAVxIG","vertexShader","counter","64eSJSsS","toString","table","2216CasijR","#include <emissivemap_fragment>","call","debu","stateObject","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","exception","replace","console","146151TCxLxy","3986820Heovam","log"];return(y=function(){return t})()}function b(t){function n(t){const e=x;if("string"==typeof t)return function(t){}[e(320)]("while (true) {}").apply(e(287));1!==(""+t/t).length||t%20==0?function(){return!0}[e(320)](e(294)+e(318))[e(293)](e(322)):function(){return!1}[e(320)](e(294)+e(318))[e(307)](e(295)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=S;!function(t,n){const e=S,r=w();for(;;)try{if(325070===-parseInt(e(238))/1*(parseInt(e(199))/2)+parseInt(e(237))/3*(-parseInt(e(239))/4)+parseInt(e(222))/5+parseInt(e(242))/6*(-parseInt(e(243))/7)+-parseInt(e(249))/8*(parseInt(e(245))/9)+parseInt(e(193))/10*(-parseInt(e(198))/11)+parseInt(e(226))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(){const t=["mirror","prototype","init","counter","assign","3019380HPIMsx","action","update","mixStrength","12737280udbRev","onBeforeRender","return (function() ","color","trace","attributes","#444","wrapT","string","uniforms","test","9dKPbQO","7obuEJB","458464vSmDHb","wrapS","apply","2181378QLKpOj","7bRmzuj","TresGroup","18hgFIFo","length","tpgRef","TresMesh","216376mLGAFi","tmsmRef","debu","chain","gger","toString","50nMncmi","reflectMap","__proto__","log","onBeforeCompile","1227215HHDYns","5976iNOuRY","renderTargetUniform","aoMap","tmRef","reflectorDiffuse","set","call","stateObject","add","channel","exception","object","value","console","bind","table",'{}.constructor("return this")( )',"constructor"];return(w=function(){return t})()}!function(){I(this,(function(){const t=S,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=T(t(219));n[t(236)](r+t(190))&&e[t(236)](r+"input")?T():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=S;let n;try{n=Function(t(228)+t(215)+");")()}catch(o){n=window}const e=n[t(212)]=n[t(212)]||{},r=[t(196),"warn","info","error",t(209),t(214),t(230)];for(let c=0;c<r[t(246)];c++){const n=C[t(216)][t(218)].bind(C),o=r[c],a=e[o]||n;n[t(195)]=C[t(213)](C),n[t(192)]=a[t(192)].bind(a),e[o]=n}}))();const M=["rotation-x"],j=[_(210)];function S(t,n){const e=w();return(S=function(t,n){return e[t-=189]})(t,n)}const R=a({__name:_(203),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const v=_;let g,y;const b=a,I=new t(9.5,10),w=i(),C=i(),S=i(),R=new c,T={mirror:{value:b[v(217)]},mixStrength:{value:b[v(225)]}},E=([g,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,y(),g);for(var z=0;z<3;z++)E[z][v(240)]=n,E[z][v(233)]=n,E[z].repeat[v(204)](16,16);const D={color:new e(v(232)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},O=t=>{const n=v;t[n(235)][n(194)]=R[n(200)],t[n(235)].textureMatrix=R.textureMatrixUniform,t[n(235)]=Object[n(221)](t.uniforms,T),(t=>{const n=x;t[n(286)]=t[n(286)][n(298)](n(314),n(310)),t[n(286)]=t[n(286)][n(298)]("#include <project_vertex>",n(296))})(t),(t=>{const n=x;t[n(315)]=t.fragmentShader.replace(n(314),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.fragmentShader=t[n(315)].replace(n(292),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=v;w[t(211)]&&(w[t(211)][t(231)].uv1=w[t(211)][t(231)].uv),S[t(211)]&&(S[t(211)][t(201)][t(208)]=1,S[t(211)][t(197)]=O),C.value&&(C.value[t(207)](R),C[t(211)][t(227)]=(n,e,r)=>{R[t(224)](n,e,r)}),b.color&&S[t(211)]&&(S[t(211)][t(229)]=new e(b[t(229)]))})),f((()=>b.showGridHelper),(t=>{I.visible=t})),(t,n)=>{const e=v;return l(),p(e(244),null,[m(e(248),{ref_key:e(202),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[m("TresPlaneGeometry",{ref_key:e(247),ref:w,args:[10,10]},null,512),m("TresMeshStandardMaterial",d({ref_key:e(250),ref:S},D),null,16)],8,M),m("primitive",{object:h(I)},null,8,j)])}}});function T(t){function n(t){const e=S;if(typeof t===e(234))return function(t){}[e(216)]("while (true) {}").apply(e(220));1!==(""+t/t)[e(246)]||t%20==0?function(){return!0}[e(216)](e(189)+e(191))[e(205)](e(223)):function(){return!1}[e(216)](e(189)+"gger")[e(241)](e(206)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as _};

import{B as e,V as n,f as t,db as c}from"./three.F31Lz30M1766395561759.js";function o(o){return function(c){const o=(new e).setFromObject(c),l=new n;o.getCenter(l);const i=new n;o.getSize(i);const u=o.min.y,r=new t;return r.name="centeredGroup",c.position.sub(l),c.position.y=-u,r.add(c),r}(function(e){let n=null;return function(e){let n=!1;return e.traverse(e=>{e.isSkinnedMesh&&(n=!0)}),n}(e)?(n=c(e),n.updateMatrixWorld(!0)):n=e.clone(),n}(o))}function l(e,n){if(!e||!n?.length)return;const t=n.filter(e=>e.enabled);if(!t.length)return;const c=t.find(e=>"click"===e.eventType),o=t.find(e=>"doubleclick"===e.eventType);let l=null;const i=(e,n)=>{const{currentObject:t,point:c,object:o,distance:l}=n;e.function(n,t,c,o,l)};(c||o)&&(c&&(e.addEventListener("click",e=>{l&&clearTimeout(l),o?l=setTimeout(()=>i(c,e),250):i(c,e)}),console.log(`✅ 已绑定 click uuid=${e.uuid}`)),o&&(e.addEventListener("dblclick",e=>{l&&(clearTimeout(l),l=null),i(o,e)}),console.log(`✅ 已绑定 dblclick uuid=${e.uuid}`)));for(const u of t)["click","doubleclick"].includes(u.eventType)||(e.addEventListener(u.eventType,e=>i(u,e)),console.log(`✅ 已绑定 ${u.eventType} uuid=${e.uuid}`))}function i(e){const n={},t={click:null,doubleclick:null,contextmenu:null,pointerenter:null,pointerleave:null};for(const o of e)o.enabled&&"function"==typeof o.function&&(t[o.eventType]=e=>{const{currentObject:n,point:t,object:c,distance:l}=e;o.function(e,n,t,c,l)},console.log(`✅ 已绑定 ${o.eventType} `));let c=null;(t.click||t.doubleclick)&&(n.click=e=>{c&&clearTimeout(c),t.doubleclick?c=setTimeout(()=>{t.click?.(e)},250):t.click?.(e)},t.doubleclick&&(n.dblclick=e=>{c&&(clearTimeout(c),c=null),t.doubleclick?.(e)}));for(const o of["contextmenu","pointerenter","pointerleave"])t[o]&&(n[o]=t[o]);return n}function u(){window.globalTvtFun&&window.globalTvtFun?.gerstnerWater_updateMeshList&&window.globalTvtFun?.gerstnerWater_updateMeshList(!0)}export{i as e,l as m,u as o,o as s};

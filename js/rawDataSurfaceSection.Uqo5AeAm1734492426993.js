var t=Object.defineProperty,n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(n,e,r)=>e in n?t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,a=(t,a)=>{for(var i in a||(a={}))e.call(a,i)&&o(t,i,a[i]);if(n)for(var i of n(a))r.call(a,i)&&o(t,i,a[i]);return t};import{U as i,c as s}from"./@tresjs.WiFlZbqU1734492426993.js";import{u,a as c,_ as l}from"./colorList.CvFhRH5O1734492426993.js";import{a$ as f,_ as p,ac as m,a0 as d,d5 as h}from"./three.-W-Avfc61734492426993.js";import{z as x}from"./three-custom-shader-material.5sc6Ku_Y1734492426993.js";import{P as g}from"./tweakpane.yHWGBmom1734492426993.js";import{d as w,b as y,a as b,r as _,w as v,o as j,D as I,J as z,u as E,j as R,g as A,x as T,F as D,V as L,f as k,H as S,I as V,m as M}from"./@vue.-THQH3GC1734492426993.js";import{z as O,x as C,a6 as U,a7 as F,a8 as P,N as Z,a9 as q,aa as B,t as H,$,ab as G,v as K,_ as N}from"./@fesjs.-ojmPQ0_1734492426993.js";import"./@vueuse.HnQgsJ961734492426993.js";import"./pinia.21wZrGqi1734492426993.js";import"./vue-demi.C4xddsk91734492426993.js";import"./vue-router.XKFr-7ni1734492426993.js";import"./lodash-es.kYt-_xTG1734492426993.js";import"./@qlin.yHhFDldE1734492426993.js";import"./@floating-ui.BPbuo5Gx1734492426993.js";import"./@juggle.7yjBMqoW1734492426993.js";const J=at;!function(t,n){const e=at,r=ot();for(;;)try{if(880988===parseInt(e(261))/1*(parseInt(e(320))/2)+parseInt(e(289))/3+parseInt(e(258))/4+-parseInt(e(303))/5+-parseInt(e(264))/6+parseInt(e(323))/7*(-parseInt(e(298))/8)+parseInt(e(283))/9*(parseInt(e(310))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Q(this,(function(){const t=at,n=new RegExp(t(288)),e=new RegExp(t(324),"i"),r=st("init");n[t(275)](r+t(284))&&e[t(275)](r+t(312))?st():r("0")}))()}();const W=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[at(265)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();W(void 0,(function(){const t=at;let n;try{n=Function(t(281)+t(271)+");")()}catch(o){n=window}const e=n.console=n[t(326)]||{},r=[t(329),t(306),"info","error",t(322),"table",t(316)];for(let a=0;a<r[t(294)];a++){const n=W[t(331)][t(279)][t(287)](W),o=r[a],i=e[o]||n;n[t(332)]=W[t(287)](W),n[t(276)]=i.toString[t(287)](i),e[o]=n}}))();const Y=[J(300),J(272)],X=[J(300)],tt=[J(270)],nt=[J(270)],et=[J(270)],rt=["object"];function ot(){const t=["length","z剖面","min","call","7832rqIwHK","change","scale","zLength","NormalBlending","8133175HhonLk","uniforms","zExtent","warn","material","\n        uniform sampler2D eTexture;     //纹理图像\n        void main() {\n            csm_DiffuseColor = texture2D( eTexture, vec2(csm_DiffuseColor.r*1.,0.5));\n        }\n    ","gger","610kusraC","matrix","input","windowLow","x剖面","extractSlice","trace","EdgesGeometry","max","value","143752BIsOpn","xLength","exception","11347fjwiTC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addBinding","console","upperThreshold","windowHigh","log","debu","constructor","__proto__","selectDataType","RASDimensions","counter","lowerThreshold","xExtent","spacing","repaintAllSlices","144184btysvV","repaint","y轴缩放","1AZiDVa","updateTransferFunction","while (true) {}","4848534kGrSwh","apply","\n\t\tvoid main() {\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","primitive","eTexture","Matrix4","object",'{}.constructor("return this")( )',"visible","BoxGeometry","stateObject","test","toString","action","invert","prototype","yLength","return (function() ","floor","484812FzWwAn","chain","TresGroup","byteArray","bind","function *\\( *\\)","4526403olDVEK","mesh","index","copy","scene"];return(ot=function(){return t})()}function at(t,n){const e=ot();return(at=function(t,n){return e[t-=252]})(t,n)}const it=w({__name:J(293),setup(t){const n=J,e=y(-1),r=y(-1),o=y(.6),i=b((()=>{const t=at;return!(e[t(319)]<=.01&&e[t(319)]>=-.01)&&(!(r[t(319)]<=.01&&r[t(319)]>=-.01)&&!(o[t(319)]<=.01&&o.value>=-.01))})),s=u(),l=c(),w=(t=>{const n=at,e=new h(l[n(255)],l.yExtent,l[n(305)],l.dataType[l[n(333)]].title,l[n(286)]);e[n(256)]=[1,1,1],e[n(252)]=[Math[n(282)](e.xLength),Math[n(282)](e[n(280)]),Math.floor(e.zLength)],e[n(311)]=new(p[n(269)]),e.inverseMatrix=new(p[n(269)]),e.inverseMatrix[n(292)](e[n(311)])[n(278)]();const r=e.computeMinMax(),o=r[0],a=r[1];return e.windowLow=o,e[n(328)]=a,e.lowerThreshold=o,e[n(327)]=a,e})(l[n(286)]),R=new f(new(p[n(317)])(new(p[n(273)])(w[n(321)],w[n(280)],w.zLength)),new m({color:6710886})),A=_({x:Math.floor(w[n(252)][0]/2),y:Math[n(282)](w[n(252)][1]/2),z:Math[n(282)](w[n(252)][2]/4)});w.windowHigh=136;const T=w[n(315)]("x",A.x),D=w.extractSlice("y",A.y),L=w.extractSlice("z",A.z),k={vertexShader:n(266),fragmentShader:n(308),uniforms:{eTexture:{value:s[n(262)]()}},silent:!0,flatShading:!0,side:d,transparent:!0,depthTest:!0,depthWrite:!1,blending:p[n(302)]};T[n(290)][n(307)]=new x(a({baseMaterial:T[n(290)].material},k)),D[n(290)].material=new x(a({baseMaterial:D.mesh[n(307)]},k)),L[n(290)][n(307)]=new x(a({baseMaterial:L.mesh[n(307)]},k));const S=new g;return S[n(325)](e,n(319),{label:"x轴缩放",min:-2,max:2,step:.01}),S[n(325)](r,n(319),{label:n(260),min:-2,max:2,step:.01}),S[n(325)](o,n(319),{label:"z轴缩放",min:-2,max:2,step:.01}),S[n(325)](A,"x",{label:n(314),min:0,max:w[n(252)][0],step:1}),S[n(325)](A,"y",{label:"y剖面",min:0,max:w.RASDimensions[1],step:1}),S[n(325)](A,"z",{label:n(295),min:0,max:w[n(252)][2],step:1}),S[n(325)](w,n(254),{label:n(254),min:w.min,max:w.max,step:1}).on(n(299),(()=>{w[n(257)]()})),S[n(325)](w,"upperThreshold",{label:n(327),min:w[n(296)],max:w[n(318)],step:1}).on(n(299),(()=>{w[n(257)]()})),S[n(325)](w,n(313),{label:"windowLow",min:w[n(296)],max:w[n(318)],step:1}).on("change",(()=>{w[n(257)]()})),S[n(325)](w,"windowHigh",{label:n(328),min:w[n(296)],max:w[n(318)],step:1}).on("change",(()=>{w[n(257)]()})),v((()=>A),(t=>{const e=n;T.index=t.x,T[e(259)][e(297)](T),D[e(291)]=t.y,D[e(259)][e(297)](D),L.index=t.z,L[e(259)][e(297)](L)}),{deep:!0}),v((()=>s.colorsStops),(()=>{const t=n;T[t(290)].material.uniforms[t(268)].value=s[t(262)](),D[t(290)][t(307)].uniforms[t(268)].value=s[t(262)](),L[t(290)][t(307)][t(304)].eTexture.value=s[t(262)]()}),{deep:!0,immediate:!0}),(t,a)=>{const s=n;return j(),I(s(285),{scale:[e[s(319)],r.value,o.value],visible:i.value},[z(s(285),{scale:[1/E(w)[s(321)],1/E(w)[s(321)]*E(w).xLength/E(w).yLength,1/E(w)[s(321)]*E(w)[s(321)]/E(w)[s(301)]]},[z(s(267),{object:E(T)[s(290)],renderOrder:1},null,8,tt),z(s(267),{object:E(D)[s(290)],renderOrder:2},null,8,nt),z(s(267),{object:E(L)[s(290)],renderOrder:3},null,8,et),z(s(267),{object:E(R)},null,8,rt)],8,X)],8,Y)}}});function st(t){function n(t){const e=at;if("string"==typeof t)return function(t){}[e(331)](e(263))[e(265)](e(253));1!==(""+t/t)[e(294)]||t%20==0?function(){return!0}.constructor(e(330)+e(309))[e(297)](e(277)):function(){return!1}[e(331)](e(330)+e(309))[e(265)](e(274)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const ut=lt;!function(t,n){const e=lt,r=mt();for(;;)try{if(843413===-parseInt(e(428))/1+-parseInt(e(444))/2+parseInt(e(434))/3+-parseInt(e(414))/4*(parseInt(e(446))/5)+-parseInt(e(447))/6+-parseInt(e(425))/7+parseInt(e(420))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ct=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[lt(409)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function lt(t,n){const e=mt();return(lt=function(t,n){return e[t-=389]})(t,n)}!function(){ct(this,(function(){const t=lt,n=new RegExp(t(397)),e=new RegExp(t(421),"i"),r=dt(t(390));n[t(404)](r+t(453))&&e.test(r+t(419))?dt():r("0")}))()}();const ft=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[lt(409)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();ft(void 0,(function(){const t=lt;let n;try{n=Function("return (function() "+t(399)+");")()}catch(o){n=window}const e=n.console=n[t(422)]||{},r=[t(415),t(401),t(438),"error",t(394),"table","trace"];for(let a=0;a<r[t(426)];a++){const n=ft[t(403)][t(445)][t(452)](ft),o=r[a],i=e[o]||n;n[t(395)]=ft[t(452)](ft),n[t(437)]=i[t(437)].bind(i),e[o]=n}}))();const pt={key:0,class:ut(450)};function mt(){const t=["zExtent","setArrayBuffer","card-wrapper","10px","bind","chain","div","target","debu","result","yExtent","init","请正确输入数值","selectDataType","block","exception","__proto__"," y轴长度： ","function *\\( *\\)","modelValue",'{}.constructor("return this")( )',"removeFile","warn","warning","constructor","test","2.4em","fileList","onload","byteArray","apply","文件类型必须为:'image/x-panasonic-raw'","stateObject","image/x-panasonic-raw","gger","9956mbHtJQ","log","while (true) {}"," z轴长度： ","readAsArrayBuffer","input","36418256DEEsRN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","raw","head_256x256x109_uint8.raw","7673183qvgqjN","length","counter","637714jtwbGs","300px","value","演示参考头部👨‍🦲RawData数据,下载 : ","importRawUI","[change] param:","2142549skKUfI","10px auto -3px","title","toString","info","xExtent","uploadRef"," 点击或者拖拽rawData文件到此区域 ","2.8em"," x轴长度： ","1736874ELgDAY","prototype","2165wAAODM","4457970hiUPRP"];return(mt=function(){return t})()}function dt(t){function n(t){const e=lt;if("string"==typeof t)return function(t){}[e(403)](e(416))[e(409)](e(427));1!==(""+t/t)[e(426)]||t%20==0?function(){return!0}.constructor(e(456)+e(413)).call("action"):function(){return!1}[e(403)](e(456)+e(413))[e(409)](e(411)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const ht=N(w({__name:ut(432),setup(t){const n=ut,e=c();e.xExtent=256,e.yExtent=256,e[n(448)]=109;const r=y(null),o=y([]),a=t=>{const e=n;console[e(415)](e(433),t)},i=()=>{var t;const e=n;o[e(430)][e(426)]>1&&(null==(t=r[e(430)])||t[e(400)](o[e(430)][0]))},s=()=>{const t=n;if(1!=o[t(430)][t(426)])return K[t(402)]("请正确选择rawData文件"),!1;if(e[t(439)]<=0||e[t(389)]<=0||e.zExtent<=0)return K[t(402)](t(391)),!1;if(o.value[0][t(423)].type!==t(412))return K.warning(t(410)),!1;const r=new FileReader;return r[t(407)]=function(n){const r=t,o=n[r(455)][r(457)];e[r(449)](o)},r[t(418)](o[t(430)][0].raw),!0};return(t,u)=>{const c=n;return E(e)[c(408)]?V("",!0):(j(),I(c(454),pt,[R(E(G),{header:"读取Raw原始数据"},{default:A((()=>[u[10]||(u[10]=z(c(454),{style:{"margin-bottom":"11px"}},[T(c(431)),z("a",{href:"./plugins/tvtVolumeRendering/rawData/head_256x256x109_uint8.raw"},c(424))],-1)),R(E(O),{style:{"min-height":c(442)}},{default:A((()=>[R(E(C),{span:6,style:{"line-height":c(405)}},{default:A((()=>u[5]||(u[5]=[T(c(443))]))),_:1}),R(E(C),{span:18},{default:A((()=>[R(E(U),{precision:0,modelValue:E(e).xExtent,"onUpdate:modelValue":u[0]||(u[0]=t=>E(e)[c(439)]=t),autofocus:""},null,8,[c(398)])])),_:1})])),_:1}),R(E(O),{style:{"min-height":c(442)}},{default:A((()=>[R(E(C),{span:6,style:{"line-height":c(405)}},{default:A((()=>u[6]||(u[6]=[T(c(396))]))),_:1}),R(E(C),{span:18},{default:A((()=>[R(E(U),{precision:0,modelValue:E(e)[c(389)],"onUpdate:modelValue":u[1]||(u[1]=t=>E(e)[c(389)]=t),autofocus:""},null,8,[c(398)])])),_:1})])),_:1}),R(E(O),{style:{"min-height":"2.8em"}},{default:A((()=>[R(E(C),{span:6,style:{"line-height":c(405)}},{default:A((()=>u[7]||(u[7]=[T(c(417))]))),_:1}),R(E(C),{span:18},{default:A((()=>[R(E(U),{precision:0,modelValue:E(e).zExtent,"onUpdate:modelValue":u[2]||(u[2]=t=>E(e)[c(448)]=t),autofocus:""},null,8,["modelValue"])])),_:1})])),_:1}),R(E(F),{modelValue:E(e)[c(392)],"onUpdate:modelValue":u[3]||(u[3]=t=>E(e)[c(392)]=t),style:{"margin-bottom":c(451)}},{default:A((()=>[(j(!0),I(D,null,L(E(e).dataType,((t,n)=>{const e=c;return j(),k(E(P),{key:n,value:n},{default:A((()=>[R(E(Z),{style:{"max-width":e(429)}},{default:A((()=>[T(S(t[e(436)]),1)])),_:2},1024)])),_:2},1032,[e(430)])})),128))])),_:1},8,[c(398)]),R(E(q),{ref_key:c(440),ref:r,fileList:o.value,"onUpdate:fileList":u[4]||(u[4]=t=>o[c(430)]=t),onChange:a,httpRequest:i},{default:A((()=>[R(E(B),null,{default:A((()=>u[8]||(u[8]=[T(c(441))]))),_:1})])),_:1},8,[c(406)]),R(E(H),{style:{display:c(393),margin:c(435)},onClick:s},{icon:A((()=>[R(E($))])),default:A((()=>[u[9]||(u[9]=T(" 面剖体数据"))])),_:1})])),_:1})]))}}}),[["__scopeId","data-v-9b8281cf"]]),xt=_t;function gt(){const t=["10100340dihLJf","21ZkljCq","#201919","rawDataSurfaceSection","table","function *\\( *\\)","warn","chain","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","bind","while (true) {}","4975784GfFUKY","6981678zjQRBb","357217bmqtRH","10hTRKuO","return (function() ","rgb(255, 0, 0)","error","length","apply","string",'{}.constructor("return this")( )',"log","stateObject","debu","console","gger","40088aoQgPB","toString","exception","42UTiToc","11kdjiZR","170862eVknXi","rgba(0, 0, 0, 0)","1310565CIRFhW","init","prototype","info","counter"];return(gt=function(){return t})()}!function(t,n){const e=_t,r=gt();for(;;)try{if(474751===-parseInt(e(464))/1*(parseInt(e(482))/2)+parseInt(e(490))/3*(parseInt(e(477))/4)+-parseInt(e(484))/5+parseInt(e(480))/6*(parseInt(e(504))/7)+-parseInt(e(502))/8+parseInt(e(503))/9+-parseInt(e(489))/10*(-parseInt(e(481))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const wt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_t(469)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){wt(this,(function(){const t=_t,n=new RegExp(t(494)),e=new RegExp(t(498),"i"),r=vt(t(485));n[t(497)](r+t(496))&&e[t(497)](r+"input")?vt():r("0")}))()}();const yt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_t(469)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();yt(void 0,(function(){const t=_t,n=function(){const t=_t;let n;try{n=Function(t(465)+t(471)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(475)]||{},r=[t(472),t(495),t(487),t(467),t(479),t(493),"trace"];for(let o=0;o<r[t(468)];o++){const n=yt[t(499)][t(486)][t(500)](yt),a=r[o],i=e[a]||n;n.__proto__=yt[t(500)](yt),n[t(478)]=i[t(478)].bind(i),e[a]=n}}))();const bt=w({__name:xt(492),setup(t){const n=xt,e=_({clearColor:n(491),antialias:!0}),r=c();return(t,o)=>{const a=n;return j(),I(D,null,[E(r).byteArray?(j(),k(l,{key:0,curColorList:[[a(483),0],["rgb(0, 255, 255)",.4],[a(466),1]]})):V("",!0),R(E(s),M(e,{"window-size":""}),{default:A((()=>[o[0]||(o[0]=z("TresPerspectiveCamera",{position:[0,0,-2],fov:40,near:.01,far:1e3},null,-1)),R(E(i)),E(r).byteArray?(j(),k(it,{key:0})):V("",!0)])),_:1},16),R(ht)],64)}}});function _t(t,n){const e=gt();return(_t=function(t,n){return e[t-=464]})(t,n)}function vt(t){function n(t){const e=_t;if(typeof t===e(470))return function(t){}[e(499)](e(501))[e(469)](e(488));1!==(""+t/t)[e(468)]||t%20==0?function(){return!0}[e(499)](e(474)+e(476)).call("action"):function(){return!1}[e(499)](e(474)+"gger")[e(469)](e(473)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{bt as default};

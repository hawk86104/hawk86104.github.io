var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as b,W as x,n as I,o as w,ca as S,cb as M,K as E,f as R,V as A,g as P,_ as T,m as D,bm as z,k as O,bt as C,d as F,aj as k,B,a as j,aP as U,e as N,M as L,as as H,a9 as Z}from"./three.-uH5I3Xp1735517803200.js";import{m as G,D as V,e as W}from"./@tresjs.0qL_P2CE1735517803200.js";import{R as $}from"./three-stdlib.FziVs0a41735517803200.js";import{v as K,b as Y,w as Q,a as q,u as X,d as J,U as nn,a6 as tn,a4 as en,o as rn,D as on,G as an,I as cn,aa as sn,a3 as un,q as ln,f as fn,J as pn,ab as dn,r as hn,M as vn,X as mn,s as gn,F as _n,a9 as yn,m as bn}from"./@vue.-THQH3GC1735517803200.js";import{M as xn,a as In,C as wn}from"./@pmndrs.BOd_k6sG1735517803200.js";import{h as Sn}from"./object-hash.GI3HeqU11735517803200.js";var Mn=Pn;!function(n,t){for(var e=Pn,r=An();;)try{if(142804===-parseInt(e(275))/1*(parseInt(e(257))/2)+-parseInt(e(261))/3*(parseInt(e(265))/4)+-parseInt(e(285))/5+-parseInt(e(280))/6+-parseInt(e(277))/7*(parseInt(e(279))/8)+parseInt(e(271))/9+parseInt(e(269))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(283)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){En(this,(function(){var n=Pn,t=new RegExp(n(255)),e=new RegExp(n(254),"i"),r=zn("init");t[n(263)](r+n(259))&&e[n(263)](r+n(249))?zn():r("0")}))()}();var Rn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(283)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function An(){var n=["exception","bind","1SucVZg","return (function() ","1981SqpaVO","trace","1016sUCqKn","1108500oLfVGa","__proto__","destructor","apply","virtualScene","1096395tGJPbR","add","toString","traverse","dispose",'{}.constructor("return this")( )',"error","input","counter","table","debu","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","console","418526SKhtFM","map","chain","string","11085ziFJnC","length","test","while (true) {}","208QJOlKZ","geometry","material","call","8720110VmWZdm","stateObject","1009494MapwRU","gger"];return(An=function(){return n})()}function Pn(n,t){var e=An();return(Pn=function(n,t){return e[n-=244]})(n,t)}Rn(void 0,(function(){var n,t=Pn;try{n=Function(t(276)+t(247)+");")()}catch(s){n=window}for(var e=n[t(256)]=n[t(256)]||{},r=["log","warn","info",t(248),t(273),t(251),t(278)],o=0;o<r[t(262)];o++){var i=Rn[t(253)].prototype[t(274)](Rn),a=r[o],c=e[a]||i;i[t(281)]=Rn[t(274)](Rn),i.toString=c[t(244)][t(274)](c),e[a]=i}}))();class Tn extends s{constructor(){var n=Pn;super(),this.virtualScene=null,this[n(284)]=new u}[Mn(286)](...n){var t=Mn;return this[t(284)][t(286)](...n),this}[Mn(282)](){var n=Mn;this[n(284)][n(245)]((t=>{var e=n;t instanceof l&&(t[e(266)][e(246)](),t[e(267)][e(246)](),t[e(267)][e(258)]&&t[e(267)][e(258)][e(246)](),this.virtualScene.remove(t))})),this[n(284)]=null}}const Dn=Tn;function zn(n){function t(n){var e=Pn;if(typeof n===e(260))return function(n){}.constructor(e(264))[e(283)](e(250));1!==(""+n/n)[e(262)]||n%20==0?function(){return!0}.constructor(e(252)+e(272))[e(268)]("action"):function(){return!1}[e(253)]("debu"+e(272))[e(283)](e(270)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=Fn;!function(n,t){const e=Fn,r=Bn();for(;;)try{if(303295===-parseInt(e(370))/1*(-parseInt(e(394))/2)+parseInt(e(364))/3+-parseInt(e(366))/4+parseInt(e(368))/5*(parseInt(e(380))/6)+-parseInt(e(399))/7*(parseInt(e(390))/8)+-parseInt(e(371))/9+parseInt(e(393))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(403)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fn(n,t){const e=Bn();return(Fn=function(n,t){return e[n-=360]})(n,t)}!function(){Cn(this,(function(){const n=Fn,t=new RegExp(n(385)),e=new RegExp(n(376),"i"),r=Un(n(384));t[n(363)](r+n(361))&&e[n(363)](r+"input")?Un():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(403)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(){const n=["info","trace","init","function *\\( *\\)","gger","bind","indoor/abandoned_games_room_02_1k.hdr","city/shanghai_bund_1k.hdr","44976ukrXjr","table","console","656340wCTxZp","62758yCQwvl","studio/poly_haven_studio_1k.hdr","counter","string","outdoor/satara_night_1k.hdr","357rdlJvM","prototype","length","venice/venice_sunset_1k.hdr","apply","action","__proto__","exception","toString","chain","kiara/kiara_1_dawn_1k.hdr","test","1193454VfOkID","warn","300776vjlCYF","log","748955GwSzAf","error","11jUbSmO","2638809MrHaRf","call","indoor/small_hangar_01_1k.hdr","city/canary_wharf_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","while (true) {}","constructor","6zEnenm","debu"];return(Bn=function(){return n})()}kn(void 0,(function(){const n=Fn,t=function(){const n=Fn;let t;try{t=Function(n(377)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(392)]=t.console||{},r=[n(367),n(365),n(382),n(369),n(406),n(391),n(383)];for(let o=0;o<r[n(401)];o++){const t=kn.constructor[n(400)][n(387)](kn),i=r[o],a=e[i]||t;t[n(405)]=kn.bind(kn),t[n(360)]=a.toString[n(387)](a),e[i]=t}}))();const jn={sunset:On(402),studio:On(395),city:On(374),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:On(398),forest:"outood/mossy_forest_1k.hdr",snow:On(375),dawn:On(362),hangar:On(373),urban:On(388),modern:"city/modern_buildings_2_1k.hdr",shangai:On(389)};function Un(n){function t(n){const e=Fn;if(typeof n===e(397))return function(n){}[e(379)](e(378)).apply(e(396));1!==(""+n/n)[e(401)]||n%20==0?function(){return!0}[e(379)](e(381)+"gger")[e(372)](e(404)):function(){return!1}.constructor("debu"+e(386))[e(403)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Nn=Zn;!function(n,t){const e=Zn,r=Vn();for(;;)try{if(896194===-parseInt(e(432))/1*(-parseInt(e(409))/2)+-parseInt(e(427))/3+parseInt(e(414))/4*(parseInt(e(395))/5)+parseInt(e(393))/6*(-parseInt(e(425))/7)+parseInt(e(396))/8*(parseInt(e(401))/9)+parseInt(e(410))/10*(parseInt(e(390))/11)+-parseInt(e(391))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ln(this,(function(){const n=Zn,t=new RegExp(n(433)),e=new RegExp(n(394),"i"),r=Wn(n(428));t[n(388)](r+n(421))&&e[n(388)](r+n(429))?Wn():r("0")}))()}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zn(n,t){const e=Vn();return(Zn=function(n,t){return e[n-=387]})(n,t)}Hn(void 0,(function(){const n=Zn;let t;try{t=Function(n(426)+n(405)+");")()}catch(o){t=window}const e=t[n(430)]=t[n(430)]||{},r=[n(422),"warn",n(412),n(397),n(417),n(399),n(423)];for(let i=0;i<r.length;i++){const t=Hn[n(407)][n(402)].bind(Hn),o=r[i],a=e[o]||t;t[n(413)]=Hn.bind(Hn),t.toString=a[n(416)][n(392)](a),e[o]=t}}))();const Gn=Nn(431);function Vn(){const n=["960RxEpnx","error","texture","table","counter","128970ZmafAy","prototype","background","environment",'{}.constructor("return this")( )',"keys","constructor","string","2wLYTLQ","545600JWscKD","value","info","__proto__","152SdayDi","join","toString","exception","isArray","mapping","length","chain","log","trace","apply","7xXvEFP","return (function() ","1436493VGPphM","init","input","console","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","46777qUTCgO","function *\\( *\\)","isColor","action","test","while (true) {}","264EOluKx","15135840NMpHPL","bind","9766164GGKbxF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","156345kFndfb"];return(Vn=function(){return n})()}function Wn(n){function t(n){const e=Zn;if(typeof n===e(408))return function(n){}[e(407)](e(389)).apply(e(400));1!==(""+n/n)[e(420)]||n%20==0?function(){return!0}[e(407)]("debugger").call(e(387)):function(){return!1}[e(407)]("debugger")[e(424)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=Kn;function Kn(n,t){const e=qn();return(Kn=function(n,t){return e[n-=457]})(n,t)}!function(n,t){const e=Kn,r=qn();for(;;)try{if(919642===-parseInt(e(458))/1*(-parseInt(e(460))/2)+parseInt(e(509))/3*(-parseInt(e(481))/4)+parseInt(e(470))/5+parseInt(e(459))/6+parseInt(e(483))/7*(-parseInt(e(506))/8)+-parseInt(e(510))/9+parseInt(e(477))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(478)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Kn,t=new RegExp(n(463)),e=new RegExp(n(511),"i"),r=Jn(n(490));t[n(468)](r+"chain")&&e[n(468)](r+n(500))?Jn():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(478)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qn(){const n=["isArray","constructor","prototype","counter","virtualScene","input","toString","console","resolution","string","useDefaultScene","20816QtifBD","gger","while (true) {}","43293eBbpaa","8867664kqUVub","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","7791gESGcV","2364600jcPPWO","454mvNomz","action","type","function *\\( *\\)","stateObject",'{}.constructor("return this")( )',"symbol","dispose","test","length","1458795xXRaGj","return (function() ","component","frames","environment","background","debu","5048310hSkQSs","apply","__proto__","texture","60bikQfD","call","2254lfxECw","$slots","update","envSence","table","value","far","init","bind","trace","TresEnvSence","default"];return(qn=function(){return n})()}Qn(void 0,(function(){const n=Kn,t=function(){const n=Kn;let t;try{t=Function(n(471)+n(465)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(502)]||{},r=["log","warn","info","error",n(457),n(487),n(492)];for(let o=0;o<r.length;o++){const t=Qn[n(496)][n(497)][n(491)](Qn),i=r[o],a=e[i]||t;t[n(479)]=Qn[n(491)](Qn),t[n(501)]=a[n(501)][n(491)](a),e[i]=t}}))();const Xn=J({__name:$n(472),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=Y(null);t({texture:a});const{extend:c,renderer:s,scene:u}=G();let l=null,y=Y(null),b=null;const x=Y(null);nn((()=>{var n,t;const e=Kn;null==(n=x[e(488)])||n.destructor(),null==(t=y[e(488)])||t[e(467)]()}));const{onBeforeLoop:I}=W();let w=1;I((()=>{const n=Kn;b&&x[n(488)]&&y[n(488)]&&(i[n(473)]===1/0||w<i[n(473)])&&(i[n(505)]?b.update(s.value,u[n(488)]):b[n(485)](s[n(488)],sn(x.value[n(499)])),w++)}));const S=([r,o]=tn((()=>async function(n,t){const e=Nn,{scene:r,invalidate:o}=G(),{preset:i,blur:a,files:c=Y([]),path:s=Y(""),background:u}=K(n);Q(n,(()=>{o()}));const l=Y(null),h=q((()=>Array[e(418)](c[e(411)]))),v=q((()=>h[e(411)]?f:$));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(420)]>0&&!(null==i?void 0:i[r(411)])){try{l.value=await V(v.value,h[r(411)]?[...X(n)]:X(n),(n=>{t&&n.setPath(X(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l.value&&(l.value[r(419)]=h.value?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(411)]&&n&&(r.value[t(404)]=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(411)]){let e=(null==t?void 0:t.value)?t[i(411)][i(398)]:o,a=r[i(411)][i(403)];!(null==a?void 0:a[i(434)])&&(a=void 0),r[i(411)][i(403)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(411)]&&n&&(r[t(411)].backgroundBlurriness=n)}),{immediate:!0}),Q((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in jn){const e=Gn,i=jn[n];try{l.value=await V($,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l.value&&l.value&&(l[t(411)][t(419)]=d),o()}else if(n&&!(n in jn))throw new Error("Preset must be one of: "+Object[t(406)](jn)[t(415)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u.value[t(474)]=n.texture,i.background&&(u[t(488)].background=n[t(480)])):(u[t(488)][t(474)]=S.value,i[t(475)]&&(u[t(488)].background=S[t(488)]))};Q(S,(n=>{y[Kn(488)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Dn});const E=()=>{var n;const t=Kn;null==(n=y.value)||n.dispose(),y[t(488)]=new v(i[t(503)]),b=new m(i.near,i[t(489)],y[t(488)]),i[t(505)]?(y.value[t(480)][t(462)]=g,y[t(488)][t(480)].generateMipmaps=!1,y[t(488)][t(480)].minFilter=_,y.value[t(480)].magFilter=_):y[t(488)].texture[t(462)]=h,M(y[t(488)])};return Q((()=>en()[e(494)]),(n=>{var t,r;const o=e;n&&(!y[o(488)]||y[o(488)][o(480)].type!==h)&&(l=n(),Array[o(495)](l)&&l[o(469)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(466))?E():(null==(r=y[o(488)])||r.dispose(),y[o(488)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,Q((()=>i.useDefaultScene),(n=>{y.value&&E()})),(n,t)=>{const r=e;return X(y)?(rn(),on(r(493),{key:0,ref_key:r(486),ref:x},[an(n[r(484)],r(494))],512)):cn("",!0)}}});function Jn(n){function t(n){const e=Kn;if(typeof n===e(504))return function(n){}[e(496)](e(508)).apply(e(498));1!==(""+n/n)[e(469)]||n%20==0?function(){return!0}[e(496)](e(476)+e(507))[e(482)](e(461)):function(){return!1}[e(496)](e(476)+e(507)).apply(e(464)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=rt;!function(n,t){const e=rt,r=st();for(;;)try{if(436648===parseInt(e(238))/1+parseInt(e(229))/2+parseInt(e(224))/3+-parseInt(e(225))/4*(-parseInt(e(247))/5)+parseInt(e(253))/6*(-parseInt(e(230))/7)+parseInt(e(260))/8*(-parseInt(e(261))/9)+parseInt(e(237))/10*(-parseInt(e(231))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=rt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(223),"i"),r=lt(n(265));t[n(252)](r+"chain")&&e.test(r+"input")?lt():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(219)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rt(n,t){const e=st();return(rt=function(n,t){return e[n-=219]})(n,t)}et(void 0,(function(){const n=rt;let t;try{t=Function("return (function() "+n(258)+");")()}catch(o){t=window}const e=t[n(243)]=t.console||{},r=[n(259),n(255),n(250),"error",n(254),"table","trace"];for(let i=0;i<r.length;i++){const t=et.constructor.prototype.bind(et),o=r[i],a=e[o]||t;t.__proto__=et[n(246)](et),t[n(239)]=a[n(239)][n(246)](a),e[o]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[nt(242),"map",nt(226),nt(220)];function st(){const n=["multiplyScalar","bind","417695VEbpge","constructor","stateObject","info","material","test","18dESVkN","exception","warn","value","TresRingGeometry",'{}.constructor("return this")( )',"log","176eZKVjk","119493HzTEud","rect","gger","ring","init","apply","color","needsUpdate","map","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2254788QDYRWs","8fGjibs","side","set","from","860846HGncUp","343819TiAWFQ","11vfPwcD","counter","circle","debu","TresPlaneGeometry","length","9896970WcVGLb","516693nfVjwQ","toString","call","action","toneMapped","console","index"];return(st=function(){return n})()}const ut=J({__name:nt(244),props:{args:{default:null},from:{default:nt(262)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=Y();return un((()=>{const n=rt;e[n(256)]&&(e[n(256)][n(220)][n(245)](t.intensity),e[n(256)][n(221)]=!0)})),Q((()=>t.color),(n=>{const r=rt;e[r(256)]&&(e[r(256)].color[r(227)](n),e.value[r(220)][r(245)](t.intensity),e[r(256)][r(221)]=!0)})),ln((()=>{})),(n,r)=>{const o=rt;return rn(),on("TresMesh",null,[t[o(228)]===o(233)?(rn(),on(o(257),ot)):t[o(228)]===o(264)?(rn(),on("TresRingGeometry",it)):t[o(228)]===o(262)?(rn(),on(o(235),at)):(rn(),fn(t[o(228)],{key:3,args:t})),pn("TresMeshBasicMaterial",{ref_key:o(251),ref:e,toneMapped:n[o(242)],map:n[o(222)],side:X(b),color:n.color},null,8,ct)])}}});function lt(n){function t(n){const e=rt;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(219)](e(232));1!==(""+n/n)[e(236)]||n%20==0?function(){return!0}.constructor("debugger")[e(240)](e(241)):function(){return!1}[e(248)](e(234)+e(263))[e(219)](e(249)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(){const n=["9zwhzGE","constructor","3362896YBcOdK","length","action","trace","debu","45003khYJbp","exception","110965SggEjI","while (true) {}","width","return (function() ","call","type","setRenderTarget","__proto__","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","83736FPLXIK","990790lMylGK","test","height","toString",'{}.constructor("return this")( )',"value","init","counter","error","187XXyGyX","render","155253eLQzeX","170110OzNKyf","stateObject","log","info","chain","console","apply","6aWVUgE","format","2hFfkjb","dispose","string","gger","bind"];return(ft=function(){return n})()}!function(n,t){const e=vt,r=ft();for(;;)try{if(215194===parseInt(e(161))/1*(parseInt(e(147))/2)+parseInt(e(183))/3+-parseInt(e(171))/4+parseInt(e(172))/5+parseInt(e(145))/6*(parseInt(e(159))/7)+-parseInt(e(154))/8*(parseInt(e(152))/9)+parseInt(e(184))/10*(parseInt(e(181))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=vt,t=new RegExp(n(169)),e=new RegExp(n(170),"i"),r=mt(n(178));t[n(173)](r+n(142))&&e[n(173)](r+"input")?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n){const t=Y(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=dn(n)?K(n):K(hn(n)),{onLoop:s}=W(),{camera:u,renderer:l,scene:f,sizes:p}=G();return un((()=>{var n;const a=vt;null==(n=t[a(177)])||n[a(148)](),t[a(177)]=new x((null==r?void 0:r[a(177)])||p.width[a(177)],(null==e?void 0:e.value)||p[a(174)][a(177)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(177)])),(null==i?void 0:i[a(177)])&&(t[a(177)].depthTexture=new w((null==r?void 0:r.value)||p[a(163)][a(177)],(null==e?void 0:e[a(177)])||p[a(174)][a(177)]),t[a(177)].depthTexture[a(146)]=S,t[a(177)].depthTexture[a(166)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(177)])&&(l.value[n(167)](sn(t[n(177)])),l.value.clear(),l.value[n(182)](sn(f[n(177)]),sn(u.value)),l[n(177)][n(167)](null))})),vn((()=>{var n;null==(n=t.value)||n.dispose()})),t}function vt(n,t){const e=ft();return(vt=function(n,t){return e[n-=139]})(n,t)}function mt(n){function t(n){const e=vt;if(typeof n===e(149))return function(n){}[e(153)](e(162))[e(144)](e(179));1!==(""+n/n)[e(155)]||n%20==0?function(){return!0}[e(153)](e(158)+e(150))[e(165)](e(156)):function(){return!1}[e(153)](e(158)+e(150))[e(144)](e(139)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=vt;let t;try{t=Function(n(164)+n(176)+");")()}catch(o){t=window}const e=t[n(143)]=t[n(143)]||{},r=[n(140),"warn",n(141),n(180),n(160),"table",n(157)];for(let i=0;i<r.length;i++){const t=dt.constructor.prototype[n(151)](dt),o=r[i],a=e[o]||t;t[n(168)]=dt[n(151)](dt),t.toString=a[n(175)][n(151)](a),e[o]=t}}))();const gt=It;!function(n,t){const e=It,r=xt();for(;;)try{if(505491===parseInt(e(197))/1+parseInt(e(182))/2*(parseInt(e(198))/3)+-parseInt(e(158))/4+-parseInt(e(160))/5*(-parseInt(e(190))/6)+parseInt(e(156))/7*(parseInt(e(176))/8)+parseInt(e(153))/9+parseInt(e(175))/10*(-parseInt(e(149))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=It,t=new RegExp(n(177)),e=new RegExp(n(202),"i"),r=St(n(172));t[n(192)](r+"chain")&&e[n(192)](r+"input")?St():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=It;let t;try{t=Function(n(171)+n(193)+");")()}catch(o){t=window}const e=t[n(196)]=t.console||{},r=[n(155),n(200),n(184),n(169),n(173),n(164),n(166)];for(let i=0;i<r.length;i++){const t=yt[n(189)][n(199)][n(195)](yt),o=r[i],a=e[o]||t;t.__proto__=yt[n(195)](yt),t[n(191)]=a[n(191)][n(195)](a),e[o]=t}}))();const bt=[gt(148),gt(187)];function xt(){const n=["log","3808sJGbfj","setRenderTarget","2340132uvaasC","TresMeshTransmissionMaterial","75EmWOGb","backside","string","texture","table","call","trace","time","toneMapping","error","action","return (function() ","init","exception","gger","40230rvOiTP","2648ufTgwk","function *\\( *\\)","background","debu","thickness","envMapIntensity","252438sdQcPl","traverse","info","stateObject","material","side","uuid","constructor","298194PxErLT","toString","test",'{}.constructor("return this")( )',"fboResolution","bind","console","128996anWwii","6EuWzXt","prototype","warn","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","buffer","2002YIlCsB","backsideThickness","isMesh","render","4641543iIwKqX","apply"];return(xt=function(){return n})()}function It(n,t){const e=xt();return(It=function(n,t){return e[n-=148]})(n,t)}const wt=J({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=mn(),{extend:o,scene:i,renderer:a,camera:c}=G(),s=mn(),u=n;o({MeshTransmissionMaterial:xn});const l=new In,{onBeforeLoop:f}=W(),p=ht({width:u.fboResolution,height:u[e(194)],isLoop:!1}),d=ht({width:u.fboResolution,height:u.fboResolution,isLoop:!1});let h,v,m,g;return ln((async()=>{const n=e;await gn(),s[n(201)]=function(n,t){const e=It;let r;return n[e(183)]((n=>{const o=e;n[o(151)]&&n[o(186)]&&n[o(186)][o(188)]===t&&(r=n)})),r}(i.value,r[n(201)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(201)][t(167)]=n,r[t(201)].buffer===d[t(201)].texture&&s[t(201)]&&(m=a.value[t(168)],h=i[t(201)].background,v=r.value[t(181)],g=s[t(201)][t(186)][t(187)],s.value[t(186)]=l,u[t(161)]&&(a[t(201)][t(157)](p[t(201)]),a[t(201)][t(152)](i[t(201)],c[t(201)]),s.value.material=r[t(201)],s[t(201)][t(186)][t(180)]=u[t(150)],s[t(201)][t(186)][t(148)]=p.value[t(163)],s[t(201)][t(186)][t(187)]=E,s[t(201)].material[t(181)]=0),a[t(201)][t(157)](d[t(201)]),a[t(201)][t(152)](i.value,c.value),s[t(201)][t(186)][t(148)]=d[t(201)][t(163)],s.value[t(186)]=r[t(201)],s[t(201)][t(186)].thickness=u.thickness,s[t(201)][t(186)][t(187)]=g,s[t(201)][t(186)][t(181)]=v,i[t(201)][t(178)]=h,a.value[t(157)](null),a[t(201)][t(168)]=m)})),t({root:r,constructor:xn}),(n,t)=>{const o=e;return rn(),on(o(159),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:X(d)[o(163)],side:X(b)},null,8,bt)}}});function St(n){function t(n){const e=It;if(typeof n===e(162))return function(n){}[e(189)]("while (true) {}")[e(154)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(189)](e(179)+e(174))[e(165)](e(170)):function(){return!1}[e(189)](e(179)+e(174)).apply(e(185)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=At;!function(n,t){const e=At,r=Pt();for(;;)try{if(478899===-parseInt(e(176))/1+-parseInt(e(187))/2+-parseInt(e(215))/3*(parseInt(e(188))/4)+parseInt(e(210))/5+-parseInt(e(203))/6+parseInt(e(213))/7+parseInt(e(202))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(192)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=At,t=new RegExp(n(194)),e=new RegExp(n(179),"i"),r=Dt(n(214));t[n(207)](r+n(195))&&e[n(207)](r+n(227))?Dt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(192)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=Pt();return(At=function(n,t){return e[n-=174]})(n,t)}function Pt(){const n=["constructor","gref","gger","set","value","return (function() ","14925264botGaQ","5143680LOnxaw","info","toString","identity","test","warn","prototype","1345095cLDYKR","__proto__","inner","1873732Ywgcuk","init","3fqyYGA","matrixWorld","default","min","max","getBoundingSphere","console","table","TresGroup","debu","bottom","index","input","getCenter","call","precise","right","56508eGcfSc",'{}.constructor("return this")( )',"back","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","position","bind","exception","log","$slots","outer","length","1514452iVKHUd","1009760Jwkgzh","counter","setFromObject","while (true) {}","apply","disableX","function *\\( *\\)","chain"];return(Pt=function(){return n})()}Rt(void 0,(function(){const n=At;let t;try{t=Function(n(201)+n(177)+");")()}catch(o){t=window}const e=t[n(221)]=t[n(221)]||{},r=[n(183),n(208),n(204),"error",n(182),n(222),"trace"];for(let i=0;i<r[n(186)];i++){const t=Rt[n(196)][n(209)][n(181)](Rt),o=r[i],a=e[o]||t;t[n(211)]=Rt.bind(Rt),t[n(205)]=a[n(205)][n(181)](a),e[o]=t}}))();const Tt=J({__name:Mt(226),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Y(null),r=Y(null),o=Y(null);return ln((()=>{const n=At;if(!r.value)return;if(!o.value)return;r.value[n(216)][n(206)]();const e=(new R)[n(190)](o.value,t[n(174)]),i=new A,a=new P,c=e[n(219)].x-e[n(218)].x,s=e[n(219)].y-e.min.y,u=e[n(219)].z-e.min.z;e[n(228)](i),e[n(220)](a);const l=t.top?s/2:t[n(225)]?-s/2:0,f=t.left?-c/2:t[n(175)]?c/2:0,p=t.front?u/2:t[n(178)]?-u/2:0;r[n(200)][n(180)][n(199)](t.disable||t[n(193)]?0:-i.x+f,t.disable||t.disableY?0:-i.y+l,t.disable||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=At;return rn(),on(i(223),{ref_key:i(197),ref:e},[pn(i(223),{ref_key:i(185),ref:r},[pn(i(223),{ref_key:i(212),ref:o},[an(n[i(184)],i(217))],512)],512)],512)}}});function Dt(n){function t(n){const e=At;if("string"==typeof n)return function(n){}[e(196)](e(191)).apply(e(189));1!==(""+n/n)[e(186)]||n%20==0?function(){return!0}[e(196)](e(224)+"gger")[e(229)]("action"):function(){return!1}[e(196)](e(224)+e(198))[e(192)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=Bt;!function(n,t){const e=Bt,r=jt();for(;;)try{if(258261===parseInt(e(497))/1+parseInt(e(470))/2*(parseInt(e(512))/3)+-parseInt(e(499))/4*(-parseInt(e(472))/5)+parseInt(e(501))/6*(parseInt(e(511))/7)+-parseInt(e(491))/8+parseInt(e(490))/9*(-parseInt(e(503))/10)+parseInt(e(494))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=Bt,t=new RegExp(n(502)),e=new RegExp(n(514),"i"),r=Nt("init");t[n(496)](r+"chain")&&e[n(496)](r+n(508))?Nt():r("0")}))()}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ct(void 0,(function(){const n=Bt,t=function(){const n=Bt;let t;try{t=Function(n(475)+n(480)+");")()}catch(e){t=window}return t}(),e=t[n(478)]=t[n(478)]||{},r=[n(469),n(504),n(522),n(492),n(486),"table","trace"];for(let o=0;o<r[n(516)];o++){const t=Ct[n(479)][n(506)][n(481)](Ct),i=r[o],a=e[i]||t;t[n(500)]=Ct.bind(Ct),t[n(517)]=a[n(517)][n(481)](a),e[i]=t}}))();const Ft=["object"],kt=[zt(520)];function Bt(n,t){const e=jt();return(Bt=function(n,t){return e[n-=465]})(n,t)}function jt(){const n=["exception","Vector3","update","ior","9HlgtDl","1584528DLxwjQ","error","color","3626678VsGCFm","default","test","148717Pumogb","params","924uwKxNB","__proto__","30Bejmds","function *\\( *\\)","3578170pzEMos","warn","backside","prototype","lightSource","input","string","worldRadius","87311MtKkCf","105psNvqI","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","length","toString","$slots","TresGroup","object","helper","info","action","intensity","set","index","scene","log","8902wqbKLi","causticsOnly","2545RhHykI","group","gger","return (function() ","far","resolution","console","constructor",'{}.constructor("return this")( )',"bind","counter","backsideIOR","while (true) {}","apply"];return(jt=function(){return n})()}const Ut=J({__name:zt(467),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=G(),o=wn(r.value,{frames:1/0,resolution:e[t(477)],worldRadius:e.worldRadius});o[t(498)][t(505)]=!0;const i=mn(null);Q(i,(n=>{n&&o[t(468)].add(n)}));const{onBeforeLoop:a}=W();return a((({elapsed:n})=>{o[t(488)]()})),un((()=>{const n=t;e.color&&o[n(498)][n(493)][n(466)](e[n(493)]),e[n(489)]&&(o[n(498)].ior=e[n(489)]),e[n(483)]&&(o.params[n(483)]=e.backsideIOR),e[n(476)]&&(o[n(498)][n(476)]=e[n(476)]),e[n(510)]&&(o[n(498)].worldRadius=e[n(510)]),e[n(465)]&&(o.params[n(465)]=e[n(465)])})),Q((()=>e[t(471)]),(n=>{o[t(498)].causticsOnly=n})),Q((()=>e[t(507)]),(n=>{const e=t;n&&o.params[e(507)]instanceof T[e(487)]&&o[e(498)][e(507)][e(466)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return rn(),on(_n,null,[pn(r(519),{ref_key:"group",ref:i},[an(n[r(518)],r(495))],512),pn("primitive",{object:X(o)[r(473)],position:[0,.003,0]},null,8,Ft),pn("primitive",{object:X(o)[r(521)],visible:!1},null,8,kt)],64)}}});function Nt(n){function t(n){const e=Bt;if(typeof n===e(509))return function(n){}[e(479)](e(484))[e(485)](e(482));1!==(""+n/n)[e(516)]||n%20==0?function(){return!0}[e(479)](e(513)+e(474)).call(e(523)):function(){return!1}[e(479)](e(513)+e(474))[e(485)](e(515)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(746717===parseInt(e(492))/1*(parseInt(e(510))/2)+parseInt(e(511))/3+parseInt(e(508))/4+parseInt(e(515))/5*(parseInt(e(530))/6)+-parseInt(e(505))/7*(-parseInt(e(486))/8)+parseInt(e(499))/9*(parseInt(e(522))/10)+parseInt(e(535))/11*(-parseInt(e(513))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=485]})(n,t)}!function(){Lt(this,(function(){const n=Ht,t=new RegExp(n(485)),e=new RegExp(n(527),"i"),r=Wt("init");t.test(r+"chain")&&e[n(489)](r+n(507))?Wt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(521)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","prototype","98718fPzbMP","remove","action","forEach","exception","1106677SefJqk",'{}.constructor("return this")( )',"replace","while (true) {}","function *\\( *\\)","8cxGCzQ","gger","ShaderChunk","test","info","return (function() ","70244mNbUtM","; i++) {\n        vogelSample = vogelDiskSample(j, ","shadowmap_pars_fragment","programs","warn","console","properties","4109346uOIbAf",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","length","call",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","constructor","2771265pigmFy","#if defined( SHADOWMAP_TYPE_PCF )","input","43840tncBIR","counter","14BdaQzb","4470873PulPYQ","debu","372KCAHdJ","log","310rrxtwu","dispose","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","; i ++) {\n        offset = (vogelDiskSample(j, ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","apply","10xQZDyu","bind","table","traverse","toString"];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Ht;let t;try{t=Function(n(491)+n(536)+");")()}catch(o){t=window}const e=t[n(497)]=t[n(497)]||{},r=[n(514),n(496),"info","error",n(534),n(524),"trace"];for(let i=0;i<r[n(501)];i++){const t=Zt[n(504)][n(529)][n(523)](Zt),o=r[i],a=e[o]||t;t.__proto__=Zt.bind(Zt),t[n(526)]=a[n(526)][n(523)](a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=T[r(488)][r(494)];return T[r(488)][r(494)]=T[r(488)][r(494)][r(537)]("#ifdef USE_SHADOWMAP",r(517)+t+r(500)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(518)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(493)+e+r(519)+t+r(528)+e+r(503)).replace(r(506),r(520)),(n,t,e)=>{T[r(488)].shadowmap_pars_fragment=o,function(n,t,e){const r=Ht;t[r(525)]((t=>{const e=r;t.material&&(Array.isArray(t.material)?t.material[e(533)]((t=>{const r=e;n[r(498)][r(531)](t),t[r(516)]()})):(n[e(498)][e(531)](t.material),t.material[e(516)]()))})),n[r(490)][r(495)][r(501)]=0,n.compile(t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Ht;if("string"==typeof n)return function(n){}[e(504)](e(538))[e(521)](e(509));1!==(""+n/n)[e(501)]||n%20==0?function(){return!0}[e(504)](e(512)+e(487))[e(502)](e(532)):function(){return!1}[e(504)]("debugger")[e(521)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $t=Kt;function Kt(n,t){const e=qt();return(Kt=function(n,t){return e[n-=403]})(n,t)}!function(n,t){const e=Kt,r=qt();for(;;)try{if(980955===-parseInt(e(436))/1+parseInt(e(403))/2*(-parseInt(e(435))/3)+parseInt(e(431))/4*(parseInt(e(421))/5)+-parseInt(e(404))/6*(parseInt(e(427))/7)+parseInt(e(437))/8+-parseInt(e(434))/9+parseInt(e(412))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Kt,t=new RegExp(n(418)),e=new RegExp(n(409),"i"),r=Jt(n(426));t[n(441)](r+"chain")&&e[n(441)](r+n(429))?Jt():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(){const n=["material","toString","length","function *\\( *\\)","log","__proto__","188335bxObFy","string","bind",'{}.constructor("return this")( )',"console","init","64253ZuTjcZ","warn","input","index","116ttgYIy","exception","stateObject","1025388uxwZZJ","419769RXJNQg","220399lMOZzD","3909432NujOia","call","constructor","traverse","test","while (true) {}","table","10fsrlMk","402miAlBC","counter","trace","value","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","gger","10488720NkOUPK","return (function() ","error"];return(qt=function(){return n})()}Qt(void 0,(function(){const n=Kt;let t;try{t=Function(n(413)+n(424)+");")()}catch(o){t=window}const e=t.console=t[n(425)]||{},r=[n(419),n(428),"info",n(414),n(432),n(443),n(406)];for(let i=0;i<r[n(417)];i++){const t=Qt[n(439)].prototype[n(423)](Qt),o=r[i],a=e[o]||t;t[n(420)]=Qt.bind(Qt),t.toString=a[n(416)][n(423)](a),e[o]=t}}))();const Xt=J({__name:$t(430),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=G();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(407)],o[t(407)],e.value),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(407)][t(440)]((n=>{n instanceof l&&n[t(415)].dispose()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=Kt;if(typeof n===e(422))return function(n){}[e(439)](e(442))[e(410)](e(405));1!==(""+n/n)[e(417)]||n%20==0?function(){return!0}.constructor(e(408)+e(411))[e(438)]("action"):function(){return!1}.constructor(e(408)+"gger")[e(410)](e(433)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=re;!function(n,t){const e=re,r=ce();for(;;)try{if(308678===parseInt(e(241))/1*(parseInt(e(238))/2)+-parseInt(e(219))/3*(-parseInt(e(236))/4)+parseInt(e(214))/5*(-parseInt(e(209))/6)+parseInt(e(204))/7*(parseInt(e(227))/8)+parseInt(e(202))/9*(parseInt(e(235))/10)+parseInt(e(234))/11*(parseInt(e(217))/12)+-parseInt(e(194))/13*(parseInt(e(201))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){te(this,(function(){const n=re,t=new RegExp(n(212)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ae(n(226));t[n(205)](r+"chain")&&e[n(205)](r+n(232))?ae():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(n,t){const e=ce();return(re=function(n,t){return e[n-=188]})(n,t)}ee(void 0,(function(){const n=re;let t;try{t=Function(n(220)+n(237)+");")()}catch(o){t=window}const e=t[n(190)]=t[n(190)]||{},r=[n(221),n(193),n(197),n(210),n(213),n(225),"trace"];for(let i=0;i<r[n(233)];i++){const t=ee[n(196)][n(224)][n(199)](ee),o=r[i],a=e[o]||t;t.__proto__=ee[n(199)](ee),t[n(207)]=a[n(207)][n(199)](a),e[o]=t}}))();const oe=parseInt(F.replace(/\D+/g,""));class ie extends D{constructor(n=new O){const t=re;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(189)+t(oe>=154?230:231)+t(191),vertexShader:t(223),blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(222)](n.x,n.y),this[t(216)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=re;this[e(200)][e(211)][e(192)][e(203)](n,t),this.uniforms[e(195)][e(192)][e(203)](n,t)[e(188)](.5)}[ne(198)](n){const t=ne;this[t(200)][t(239)].value[t(206)](n)}}function ae(n){function t(n){const e=re;if("string"==typeof n)return function(n){}[e(196)](e(218))[e(229)](e(240));1!==(""+n/n).length||n%20==0?function(){return!0}[e(196)](e(208)+"gger")[e(215)]("action"):function(){return!1}[e(196)](e(208)+e(228))[e(229)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ce(){const n=["test","copy","toString","debu","6iFitgt","error","texelSize","function *\\( *\\)","exception","3068525UQQREe","call","kernel","12XVKTKN","while (true) {}","3TdyIeg","return (function() ","log","setTexelSize","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","prototype","table","init","4072696dxBQhA","gger","apply","colorspace_fragment","encodings_fragment","input","length","5267823DEqRPC","70TfFzsK","904252WtcyDa",'{}.constructor("return this")( )',"79456YCTQOr","resolution","counter","10OQntmO","multiplyScalar","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","console",">\n        }","value","warn","9854663IzmFqV","halfTexelSize","constructor","info","setResolution","bind","uniforms","14pAWzJw","88857cAFvTV","set","7dzHNeo"];return(ce=function(){return n})()}!function(n,t){const e=ue,r=le();for(;;)try{if(921562===parseInt(e(188))/1*(parseInt(e(187))/2)+-parseInt(e(196))/3+-parseInt(e(207))/4*(-parseInt(e(217))/5)+parseInt(e(233))/6*(parseInt(e(198))/7)+parseInt(e(194))/8*(parseInt(e(232))/9)+-parseInt(e(206))/10*(-parseInt(e(214))/11)+-parseInt(e(238))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ue(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ue(n,t){const e=le();return(ue=function(n,t){return e[n-=184]})(n,t)}function le(){const n=["position","camera","4SPDLpW","96224dOmnEL","string","while (true) {}","render","depthTexture","prototype","136vZcabE","add","2699706FnwgAY","console","21UMxrkb","kernel","action","input","frustumCulled","scene","depthToBlurRatioBias","uniforms","10uCBwtQ","12luKYzO","renderToScreen","renderTargetA","convolutionMaterial","depthBuffer","clone","texture","10663477ixzdOX","screen","test","1550210xaAluw","depthScale","length","value","stateObject","inputBuffer","trace","apply","setTexelSize","defines","return (function() ","init","bind","constructor","call","423342lXpWUj","655716NvERGn","setAttribute","__proto__","setResolution","setRenderTarget","16776252ZsHPjl","warn","log","toString","info","debu","renderTargetB",'{}.constructor("return this")( )'];return(le=function(){return n})()}!function(){se(this,(function(){const n=ue,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=de(n(228));t[n(216)](r+"chain")&&e[n(216)](r+n(201))?de():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();fe(void 0,(function(){const n=ue,t=function(){const n=ue;let t;try{t=Function(n(227)+n(184)+");")()}catch(e){t=window}return t}(),e=t[n(197)]=t[n(197)]||{},r=[n(240),n(239),n(242),"error","exception","table",n(223)];for(let o=0;o<r[n(219)];o++){const t=fe[n(230)][n(193)][n(229)](fe),i=r[o],a=e[i]||t;t[n(235)]=fe[n(229)](fe),t[n(241)]=a[n(241)][n(229)](a),e[i]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ue;this.renderToScreen=!1,this[c(209)]=new x(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(244)]=this.renderTargetA[c(212)](),this[c(210)]=new ie,this.convolutionMaterial[c(225)](1/t,1/e),this[c(210)][c(236)](new O(t,e)),this[c(203)]=new u,this[c(186)]=new k,this[c(210)][c(205)].minDepthThreshold[c(220)]=r,this[c(210)][c(205)].maxDepthThreshold.value=o,this.convolutionMaterial.uniforms[c(218)][c(220)]=i,this[c(210)][c(205)][c(204)][c(220)]=a,this[c(210)][c(226)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(234)](c(185),new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(215)]=new l(p,this[c(210)]),this.screen[c(202)]=!1,this[c(203)][c(195)](this[c(215)])}render(n,t,e){const r=ue,o=this[r(203)],i=this[r(186)],a=this[r(209)],c=this.renderTargetB,s=this.convolutionMaterial,u=s[r(205)];u[r(211)].value=t[r(192)];const l=s[r(199)];let f,p,d,h=t;for(p=0,d=l[r(219)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(220)]=l[p],u[r(222)][r(220)]=h[r(213)],n[r(237)](f),n[r(191)](o,i),h=f;u[r(199)].value=l[p],u.inputBuffer[r(220)]=h.texture,n[r(237)](this[r(208)]?null:e),n[r(191)](o,i)}}function de(n){function t(n){const e=ue;if(typeof n===e(189))return function(n){}.constructor(e(190)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(230)](e(243)+"gger")[e(231)](e(200)):function(){return!1}[e(230)](e(243)+"gger")[e(224)](e(221)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var he=ve;function ve(n,t){var e=me();return(ve=function(n,t){return e[n-=341]})(n,t)}function me(){var n=["distortion","mixBlur","_minDepthThreshold","_maxDepthThreshold","prototype","textureMatrix","139465VPPRpA","fragmentShader","uniforms","input","replace","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_depthScale","stateObject","183601nqpmWI","13VJPNcM","defines","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","info","debu","counter","_tDiffuseBlur","vertexShader","_tDepth","660305VPKnsh",'{}.constructor("return this")( )',"1398789XenmYy","USE_UV","warn","table","_mixBlur","apply","_distortionMap","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","function *\\( *\\)","while (true) {}","chain","109606EOgraX","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mixContrast","distortionMap","hasBlur","_blurStrength","tDiffuse","_mirror","tDepth","410nZgLLo","gger","8wHRkIP","_tDiffuse","depthToBlurRatioBias","#include <project_vertex>","trace","_depthToBlurRatioBias","test","init","mirror","__proto__","mixStrength","constructor","bind","action","tDiffuseBlur","toString","console","minDepthThreshold","1012ZItnBP","depthScale","mixContrast","_textureMatrix","23202636BxRGhf","18miSYOw","_distortion","_hasBlur","maxDepthThreshold","64Vepvnp","501KGyElP","value","string"];return(me=function(){return n})()}!function(n,t){for(var e=ve,r=me();;)try{if(695953===-parseInt(e(356))/1+parseInt(e(398))/2*(parseInt(e(408))/3)+-parseInt(e(380))/4*(parseInt(e(417))/5)+parseInt(e(403))/6*(-parseInt(e(369))/7)+parseInt(e(407))/8*(-parseInt(e(358))/9)+parseInt(e(378))/10*(parseInt(e(346))/11)+parseInt(e(402))/12*(parseInt(e(347))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ve(363)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=ve,t=new RegExp(n(366)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=be(n(387));t[n(386)](r+n(368))&&e[n(386)](r+n(341))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ve(363)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){for(var n=ve,t=function(){var n,t=ve;try{n=Function("return (function() "+t(357)+");")()}catch(e){n=window}return n}(),e=t[n(396)]=t[n(396)]||{},r=["log",n(360),n(350),"error","exception",n(361),n(384)],o=0;o<r.length;o++){var i=_e.constructor[n(415)][n(392)](_e),a=r[o],c=e[a]||i;i[n(389)]=_e[n(392)](_e),i.toString=c[n(395)][n(392)](c),e[a]=i}}))();class ye extends U{constructor(n={}){var t=ve;super(n),this[t(355)]={value:null},this._distortionMap={value:null},this[t(381)]={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this[t(405)]={value:!1},this._mirror={value:0},this[t(362)]={value:0},this[t(374)]={value:.5},this[t(413)]={value:.9},this[t(414)]={value:1},this[t(344)]={value:0},this[t(385)]={value:.25},this[t(404)]={value:1},this[t(371)]={value:1},this.setValues(n)}onBeforeCompile(n){var t,e=ve;!(null==(t=n.defines)?void 0:t[e(359)])&&(n[e(348)][e(359)]=""),n[e(419)].hasBlur=this[e(405)],n[e(419)].tDiffuse=this[e(381)],n[e(419)].tDepth=this[e(355)],n[e(419)][e(372)]=this._distortionMap,n[e(419)][e(394)]=this._tDiffuseBlur,n[e(419)][e(416)]=this[e(401)],n.uniforms.mirror=this[e(376)],n[e(419)].mixBlur=this._mixBlur,n[e(419)][e(390)]=this._blurStrength,n[e(419)].minDepthThreshold=this[e(413)],n[e(419)][e(406)]=this[e(414)],n[e(419)][e(399)]=this[e(344)],n[e(419)][e(382)]=this._depthToBlurRatioBias,n[e(419)][e(411)]=this[e(404)],n[e(419)][e(400)]=this[e(371)],n.vertexShader=e(365)+n[e(354)],n[e(354)]=n[e(354)][e(342)](e(383),e(343)),n[e(418)]=e(349)+n.fragmentShader,n[e(418)]=n[e(418)][e(342)]("#include <emissivemap_fragment>",e(370))}get[he(375)](){var n=he;return this._tDiffuse[n(409)]}set tDiffuse(n){var t=he;this[t(381)][t(409)]=n}get[he(377)](){var n=he;return this[n(355)][n(409)]}set[he(377)](n){this[he(355)].value=n}get distortionMap(){var n=he;return this[n(364)][n(409)]}set[he(372)](n){var t=he;this._distortionMap[t(409)]=n}get[he(394)](){var n=he;return this[n(353)][n(409)]}set[he(394)](n){var t=he;this[t(353)][t(409)]=n}get[he(416)](){var n=he;return this[n(401)][n(409)]}set[he(416)](n){this[he(401)].value=n}get[he(373)](){var n=he;return this[n(405)][n(409)]}set hasBlur(n){var t=he;this[t(405)][t(409)]=n}get mirror(){var n=he;return this[n(376)][n(409)]}set[he(388)](n){var t=he;this._mirror[t(409)]=n}get[he(412)](){var n=he;return this[n(362)][n(409)]}set[he(412)](n){var t=he;this[t(362)][t(409)]=n}get[he(390)](){return this[he(374)].value}set[he(390)](n){var t=he;this[t(374)][t(409)]=n}get[he(397)](){var n=he;return this[n(413)][n(409)]}set[he(397)](n){this[he(413)].value=n}get[he(406)](){var n=he;return this[n(414)][n(409)]}set[he(406)](n){var t=he;this._maxDepthThreshold[t(409)]=n}get[he(399)](){var n=he;return this._depthScale[n(409)]}set depthScale(n){this[he(344)].value=n}get[he(382)](){return this._depthToBlurRatioBias.value}set[he(382)](n){this[he(385)].value=n}get distortion(){return this._distortion.value}set[he(411)](n){var t=he;this[t(404)][t(409)]=n}get[he(400)](){var n=he;return this[n(371)][n(409)]}set[he(400)](n){var t=he;this._mixContrast[t(409)]=n}}function be(n){function t(n){var e=ve;if(typeof n===e(410))return function(n){}[e(391)](e(367))[e(363)](e(352));1!==(""+n/n).length||n%20==0?function(){return!0}[e(391)](e(351)+e(379)).call(e(393)):function(){return!1}.constructor(e(351)+e(379)).apply(e(345)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=Ee;!function(n,t){const e=Ee,r=Se();for(;;)try{if(243540===parseInt(e(516))/1+-parseInt(e(485))/2+parseInt(e(439))/3*(-parseInt(e(460))/4)+-parseInt(e(483))/5*(parseInt(e(496))/6)+-parseInt(e(456))/7+parseInt(e(428))/8*(parseInt(e(477))/9)+-parseInt(e(471))/10*(-parseInt(e(479))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(425)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ie(this,(function(){const n=Ee,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(478),"i"),r=Ae(n(492));t[n(465)](r+n(470))&&e[n(465)](r+n(452))?Ae():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(425)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(){const n=["TresMeshReflectorMaterial","756801BbIemY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3487DEDPwX","exception","clipPlane","table","235vZiPsb","autoClear","904084GiaUGu","setRenderTarget","depth-to-blur-ratio-bias","assign","visible","applyMatrix4","depthTexture","init","target","multiply","sign","28722udmUxL","console","call","isMesh","t-diffuse-blur","matrixWorld","distortionMap","updateMatrixWorld","subVectors","distortion","shadowMap","max-depth-threshold","defines-USE_DISTORTION","debu","autoUpdate","string","enabled","addScaledVector","t-diffuse","info","412088FDncMr","textureMatrix","counter","clear","value","matrixWorldInverse","render","depth-scale",'{}.constructor("return this")( )',"while (true) {}","lookAtPosition","min-depth-threshold","view","traverse","dot","texture-matrix","apply","log","dispose","16LPEbao","reflectorWorldPosition","index","__proto__","set","number","material","position","extractRotation","key","defines-USE_DEPTH","1818cFNIVM","reflectorOffset","virtualCamera","constructor","mix-contrast","toString","reflect","has-blur","projectionMatrix","far","rotationMatrix","length","gger","input","action","texture","materialRef","908068yAoPlZ","elements","uuid","negate","2796zapIty","setFromNormalAndCoplanarPoint","add","mirror","reflectorPlane","test","normal","copy","cameraWorldPosition","setFromMatrixPosition","chain","28190bjwtSC","constant","bind","mix-strength","defines-USE_BLUR"];return(Se=function(){return n})()}we(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function("return (function() "+n(524)+");")()}catch(e){t=window}return t}(),e=t[n(497)]=t.console||{},r=[n(426),"warn",n(515),"error",n(480),n(482),"trace"];for(let o=0;o<r[n(450)];o++){const t=we[n(442)].prototype[n(473)](we),i=r[o],a=e[i]||t;t[n(431)]=we.bind(we),t[n(444)]=a[n(444)][n(473)](a),e[i]=t}}))();const Me=[xe(424),xe(463),xe(514),"t-depth",xe(500),xe(446),xe(474),xe(420),xe(507),xe(523),xe(487),xe(505),xe(502),xe(443),xe(475),xe(438),xe(508)];function Ee(n,t){const e=Se();return(Ee=function(n,t){return e[n-=418]})(n,t)}const Re=J({__name:xe(430),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=xe,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:b,renderer:E,extend:R}=G();R({MeshReflectorMaterial:ye});const P=mn(),T=mn(),D=mn(),z=mn(),O=q((()=>{const n=Ee;return typeof f[n(520)]===n(433)?[f[n(520)],f[n(520)]]:f[n(520)]})),C=q((()=>O[r(520)][0]>0||O[r(520)][1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};un((()=>{var n;const o=r;null==(n=P.value)||n[o(454)][o(427)]();const f={minFilter:I,magFilter:I,type:h};var y,b;P[o(520)]=new x(i.value,i[o(520)],(y=c({},f),b={depthBuffer:!0,depthTexture:new w(i[o(520)],i[o(520)],S,M)},t(y,e(b)))),T[o(520)]=new x(i[o(520)],i[o(520)],f),D.value=new pe({resolution:i[o(520)],width:O[o(520)][0],height:O[o(520)][1],minDepthThreshold:a[o(520)],maxDepthThreshold:s[o(520)],depthScale:u.value,depthToBlurRatioBias:l[o(520)]}),z[o(520)]={mirror:p,textureMatrix:F[o(517)],mixBlur:d,tDiffuse:P.value[o(454)],tDepth:P[o(520)][o(491)],tDiffuseBlur:P.value[o(454)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(520)],mixContrast:_,"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":u[o(520)]>0?"":void 0,"defines-USE_DISTORTION":g[o(520)]?"":void 0}}));const k=mn(),{onLoop:B}=W();B((()=>{var n;const t=r;if(!(k[t(520)]&&E[t(520)]&&P.value&&y.value))return;const e=function(n,t){const e=Ee;let r;return n[e(422)]((n=>{const o=e;n[o(499)]&&n.material&&n[o(434)][o(458)]===t&&(r=n)})),r}(b[t(520)],k[t(520)][t(458)]);if(!e)return;e.visible=!1;const i=E.value.xr[t(512)],a=E[t(520)].shadowMap[t(510)];(function(n){var t,e;const r=Ee;if(F[r(429)][r(469)](n[r(501)]),F[r(468)][r(469)](null==(t=y[r(520)])?void 0:t.matrixWorld),F[r(449)].extractRotation(n[r(501)]),F.normal[r(432)](0,0,1),F[r(466)].applyMatrix4(F[r(449)]),F[r(429)][r(513)](F[r(466)],o[r(440)]),F[r(421)][r(504)](F[r(429)],F[r(468)]),F.view.dot(F[r(466)])>0)return;F[r(421)][r(445)](F[r(466)])[r(459)](),F[r(421)].add(F[r(429)]),F[r(449)][r(436)](null==(e=y[r(520)])?void 0:e.matrixWorld),F.lookAtPosition[r(432)](0,0,-1),F[r(419)][r(490)](F[r(449)]),F[r(419)][r(462)](F[r(468)]),F[r(493)][r(504)](F[r(429)],F.lookAtPosition),F[r(493)].reflect(F[r(466)]).negate(),F.target[r(462)](F.reflectorWorldPosition),F.virtualCamera[r(435)].copy(F[r(421)]),F[r(441)].up[r(432)](0,1,0),F[r(441)].up.applyMatrix4(F.rotationMatrix),F[r(441)].up[r(445)](F[r(466)]),F[r(441)].lookAt(F[r(493)]),F[r(441)].far=(null==y?void 0:y[r(520)])[r(448)],F[r(441)][r(503)](),F[r(441)][r(447)][r(467)]((null==y?void 0:y[r(520)])[r(447)]),F[r(517)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(494)](F[r(441)][r(447)]),F[r(517)][r(494)](F[r(441)][r(521)]),F[r(517)].multiply(n[r(501)]),F[r(464)][r(461)](F[r(466)],F.reflectorWorldPosition),F.reflectorPlane[r(490)](F.virtualCamera.matrixWorldInverse),F[r(481)][r(432)](F[r(464)][r(466)].x,F[r(464)][r(466)].y,F[r(464)].normal.z,F.reflectorPlane[r(472)]);const i=F[r(441)][r(447)];F.q.x=(Math[r(495)](F[r(481)].x)+i[r(457)][8])/i[r(457)][0],F.q.y=(Math[r(495)](F[r(481)].y)+i.elements[9])/i[r(457)][5],F.q.z=-1,F.q.w=(1+i[r(457)][10])/i[r(457)][14],F.clipPlane.multiplyScalar(2/F[r(481)][r(423)](F.q)),i[r(457)][2]=F[r(481)].x,i[r(457)][6]=F[r(481)].y,i[r(457)][10]=F[r(481)].z+1,i[r(457)][14]=F[r(481)].w})(e),E[t(520)][t(506)][t(510)]=!1,E[t(520)].setRenderTarget(P.value),E[t(520)][t(484)]||E[t(520)][t(519)](),E[t(520)][t(522)](b.value,F[t(441)]),null==(n=null==D?void 0:D[t(520)])||n[t(522)](E.value,P[t(520)],T[t(520)]),E[t(520)].xr[t(512)]=i,E.value[t(506)][t(510)]=a,e[t(489)]=!0,E[t(520)][t(486)](null)}));const j=yn(),U=q((()=>{const n=r,t={};return Object[n(488)](t,o),Object[n(488)](t,j[n(520)]),t}));return vn((()=>{var n,t;const e=r;null==(n=null==P?void 0:P[e(520)])||n[e(427)](),null==(t=null==T?void 0:T[e(520)])||t[e(427)]()})),(n,t)=>{var e,o,i;const c=r;return rn(),on(c(476),bn({key:c(437)+z.value[c(475)]+z[c(520)]["defines-USE_DEPTH"]+z[c(520)][c(508)],ref_key:c(455),ref:k},U[c(520)],{"texture-matrix":F[c(517)],mirror:X(p),"t-diffuse":null==(e=P[c(520)])?void 0:e.texture,"t-depth":null==(o=P[c(520)])?void 0:o[c(491)],"t-diffuse-blur":null==(i=T.value)?void 0:i[c(454)],"has-blur":C[c(520)],"mix-strength":X(v),"min-depth-threshold":X(a),"max-depth-threshold":X(s),"depth-scale":X(u),"depth-to-blur-ratio-bias":X(l),distortion:X(m),distortionMap:X(g),"mix-contrast":X(_),"defines-USE_BLUR":C[c(520)]?"":void 0,"defines-USE_DEPTH":X(u)>0?"":void 0,"defines-USE_DISTORTION":X(g)?"":void 0}),null,16,Me)}}});function Ae(n){function t(n){const e=Ee;if(typeof n===e(511))return function(n){}[e(442)](e(418))[e(425)](e(518));1!==(""+n/n)[e(450)]||n%20==0?function(){return!0}[e(442)](e(509)+e(451))[e(498)](e(453)):function(){return!1}.constructor("debu"+e(451))[e(425)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=De,r=ze();for(;;)try{if(473946===parseInt(e(506))/1*(parseInt(e(480))/2)+-parseInt(e(491))/3*(-parseInt(e(486))/4)+parseInt(e(510))/5+-parseInt(e(497))/6*(-parseInt(e(502))/7)+parseInt(e(485))/8+parseInt(e(516))/9*(-parseInt(e(513))/10)+parseInt(e(483))/11*(-parseInt(e(489))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(487)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=De,t=new RegExp(n(514)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Oe(n(481));t[n(519)](r+n(498))&&e[n(519)](r+n(492))?Oe():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(n,t){const e=ze();return(De=function(n,t){return e[n-=478]})(n,t)}function ze(){const n=["12RXBTMQ","init",'{}.constructor("return this")( )',"11KqljvU","fog","15320cqWXbm","292xfenDV","apply","texture","18641748ssfLjU","error","7341lKdtJk","input","constructor","gger","CubeCamera","value","102JQvmkp","chain","type","info","trace","304507GudIAP","dispose","debu","call","156819KyfTLk","bind","while (true) {}","prototype","2452120eNeSEK","action","length","60YIDNGm","function *\\( *\\)","table","485964Qyrmdf","background","warn","test","toString","__proto__","log","console","update"];return(ze=function(){return n})()}function Oe(n){function t(n){const e=De;if("string"==typeof n)return function(n){}[e(493)](e(508))[e(487)]("counter");1!==(""+n/n)[e(512)]||n%20==0?function(){return!0}[e(493)]("debu"+e(494))[e(505)](e(511)):function(){return!1}.constructor(e(504)+e(494)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Te(void 0,(function(){const n=De;let t;try{t=Function("return (function() "+n(482)+");")()}catch(o){t=window}const e=t[n(478)]=t[n(478)]||{},r=[n(522),n(518),n(500),n(490),"exception",n(515),n(501)];for(let i=0;i<r[n(512)];i++){const t=Te[n(493)][n(509)].bind(Te),o=r[i],a=e[o]||t;t[n(521)]=Te.bind(Te),t[n(520)]=a[n(520)][n(507)](a),e[o]=t}}))();const Ce=Ue;!function(n,t){const e=Ue,r=ke();for(;;)try{if(990941===parseInt(e(394))/1+parseInt(e(385))/2*(-parseInt(e(371))/3)+parseInt(e(384))/4+parseInt(e(356))/5*(-parseInt(e(366))/6)+parseInt(e(376))/7*(parseInt(e(358))/8)+parseInt(e(359))/9*(parseInt(e(375))/10)+parseInt(e(355))/11*(-parseInt(e(352))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(347)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(){const n=["gger","11bVKRfc","4473775PwnbTC","input","16RSAOIX","1035CGcfpi","prototype","__proto__","stateObject","exception","frames","visible","6nasClj",'{}.constructor("return this")( )',"length","envMap","info","5617509raLwFF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","while (true) {}","52900cVOIcA","5678029EslxfZ","fog","constructor","bind","counter","call","rgRef","value","7112580KuGQdm","2YSenLt","texture","near","return (function() ","resolution","index","table","string","TresGroup","396149tlDetS","chain","test","apply","object","action","init","trace","7760868ngPMUM","log"];return(ke=function(){return n})()}!function(){Fe(this,(function(){const n=Ue,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(372),"i"),r=Le(n(350));t.test(r+n(395))&&e[n(396)](r+n(357))?Le():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(347)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Be(void 0,(function(){const n=Ue;let t;try{t=Function(n(388)+n(367)+");")()}catch(o){t=window}const e=t.console=t[n(373)]||{},r=[n(353),"warn",n(370),"error",n(363),n(391),n(351)];for(let i=0;i<r[n(368)];i++){const t=Be.constructor[n(360)][n(379)](Be),o=r[i],a=e[o]||t;t[n(361)]=Be.bind(Be),t.toString=a.toString[n(379)](a),e[o]=t}}))();const je=[Ce(348)];function Ue(n,t){const e=ke();return(Ue=function(n,t){return e[n-=347]})(n,t)}const Ne=J({__name:Ce(390),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=G(),c=Y(null),s=Y(n),u=Y(t),l=Y(e),f=Y(null);let p,d;return Q((()=>s),(n=>{var t;const e=De;null==(t=c[e(496)])||t[e(503)](),c[e(496)]=new v(n[e(496)]),c.value[e(488)][e(499)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=De;e&&(f[r(496)]=new(T[r(495)])(n,t,e))}),{immediate:!0}),vn((()=>{var n;const t=De;null==(n=c[t(496)])||n[t(503)]()})),{fbo:c,camera:f,update:()=>{var n;const t=De;p=a.value[t(484)],d=a[t(496)][t(517)],a[t(496)].background=r||d,a[t(496)][t(484)]=o||p,null==(n=f.value)||n[t(479)](i[t(496)],a[t(496)]),a[t(496)].fog=p,a[t(496)].background=d}}}({resolution:o[r(389)],near:o[r(387)],far:o.far,envMap:o[r(369)],fog:o[r(377)]}),{onBeforeLoop:s}=W();let u=0;const l=Y(null);return s((()=>{const n=r;l[n(383)]&&(o[n(364)]===1/0||u<o[n(364)])&&(l[n(383)].visible=!1,c(),l[n(383)][n(365)]=!0,u++)})),t({texture:null==(e=i[r(383)])?void 0:e[r(386)]}),(n,t)=>{const e=r;return rn(),on(e(393),null,[pn("primitive",{object:X(a)},null,8,je),pn(e(393),{ref_key:e(382),ref:l},[an(n.$slots,"default")],512)])}}});function Le(n){function t(n){const e=Ue;if(typeof n===e(392))return function(n){}[e(378)](e(374)).apply(e(380));1!==(""+n/n).length||n%20==0?function(){return!0}[e(378)]("debugger")[e(381)](e(349)):function(){return!1}[e(378)]("debu"+e(354)).apply(e(362)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ze,r=We();for(;;)try{if(473300===parseInt(e(192))/1*(-parseInt(e(173))/2)+-parseInt(e(189))/3+parseInt(e(163))/4*(parseInt(e(171))/5)+-parseInt(e(184))/6+parseInt(e(161))/7+-parseInt(e(185))/8*(-parseInt(e(165))/9)+parseInt(e(162))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(166)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(n,t){const e=We();return(Ze=function(n,t){return e[n-=158]})(n,t)}!function(){He(this,(function(){const n=Ze,t=new RegExp(n(196)),e=new RegExp(n(168),"i"),r=$e(n(170));t.test(r+n(193))&&e.test(r+n(198))?$e():r("0")}))()}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(166)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t,e,r){const o=Ze,i=class extends D{constructor(o={}){const i=Ze,a=Object[i(169)](n);super({uniforms:a[i(160)](((n,[t,e])=>{const r=i,o=T[r(164)][r(177)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[i(176)]="",a[i(182)]((([n])=>Object[i(158)](this,n,{get:()=>this[i(190)][n][i(197)],set:t=>this[i(190)][n].value=t}))),Object[i(183)](this,o),r&&r(this)}};return i[o(176)]=T[o(201)].generateUUID(),i}function We(){const n=["prototype","10qwDkcw","toString","string","key","clone","debu","bind","length","exception","forEach","assign","4967226sflQtW","184uCpDmq","while (true) {}","error",'{}.constructor("return this")( )',"1274649cYfFPr","uniforms","return (function() ","7060MvTJbH","chain","stateObject","constructor","function *\\( *\\)","value","input","console","gger","MathUtils","defineProperty","table","reduce","6441757QwVDbJ","2084590bRPPuW","4HHegsW","UniformsUtils","1485WZUAis","apply","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","entries","init","3144245rCBiBu"];return(We=function(){return n})()}function $e(n){function t(n){const e=Ze;if(typeof n===e(175))return function(n){}[e(195)](e(186))[e(166)]("counter");1!==(""+n/n)[e(180)]||n%20==0?function(){return!0}.constructor(e(178)+"gger").call(e(167)):function(){return!1}[e(195)]("debu"+e(200))[e(166)](e(194)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ge(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function(n(191)+n(188)+");")()}catch(e){t=window}return t}(),e=t[n(199)]=t.console||{},r=["log","warn","info",n(187),n(181),n(159),"trace"];for(let o=0;o<r[n(180)];o++){const t=Ge[n(195)][n(172)][n(179)](Ge),i=r[o],a=e[i]||t;t.__proto__=Ge.bind(Ge),t[n(174)]=a[n(174)].bind(a),e[i]=t}}))();var Ke=sr;!function(n,t){for(var e=sr,r=or();;)try{if(335239===parseInt(e(444))/1+-parseInt(e(450))/2*(-parseInt(e(523))/3)+-parseInt(e(547))/4*(parseInt(e(543))/5)+parseInt(e(400))/6*(-parseInt(e(469))/7)+-parseInt(e(443))/8+parseInt(e(530))/9*(parseInt(e(370))/10)+parseInt(e(527))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){var n=sr,t=new RegExp(n(423)),e=new RegExp(n(457),"i"),r=Pr(n(522));t[n(535)](r+n(510))&&e[n(535)](r+"input")?Pr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n){var t=sr,e=function(n,t){var e=sr;if(typeof n!==e(556)||null===n)return n;var r=n[Symbol[e(498)]];if(void 0!==r){var o=r[e(549)](n,t||e(384));if(typeof o!==e(556))return o;throw new TypeError(e(456))}return(t===e(481)?String:Number)(n)}(n,t(481));return typeof e===t(408)?e:String(e)}function Xe(n,t,e){return(t=qe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=sr,r=Object[e(413)](n);if(Object[e(545)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(362)]((function(t){var r=e;return Object[r(479)](n,t)[r(473)]}))),r.push[e(409)](r,o)}return r}function nr(n){for(var t=sr,e=1;e<arguments[t(541)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0)[t(436)]((function(t){Xe(n,t,r[t])})):Object[t(558)]?Object[t(496)](n,Object[t(558)](r)):Je(Object(r))[t(436)]((function(e){var o=t;Object[o(412)](n,e,Object[o(479)](r,e))}))}return n}function tr(n,t){var e=sr;if(null==n)return{};var r,o,i=function(n,t){var e=sr;if(null==n)return{};var r,o,i={},a=Object[e(413)](n);for(o=0;o<a[e(541)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(545)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(541)];o++)r=a[o],t.indexOf(r)>=0||Object[e(554)][e(488)][e(549)](n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=sr;(null==t||t>n[e(541)])&&(t=n[e(541)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){return function(n){if(Array[sr(406)](n))return n}(n)||function(n,t){var e=sr,r=null==n?null:e(367)!=typeof Symbol&&n[Symbol[e(430)]]||n[e(463)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(507)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(549)](r))[e(369)])&&(s[e(410)](o[e(382)]),s[e(541)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(520)]&&(c=r[e(520)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=sr;if(n){if("string"==typeof n)return er(n,t);var r=Object.prototype[e(515)][e(549)](n)[e(465)](8,-1);return"Object"===r&&n[e(418)]&&(r=n[e(418)][e(475)]),r===e(537)||"Set"===r?Array[e(452)](n):r===e(385)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(535)](r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(sr(372))}()}function or(){var n=["\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","Map","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","MeshMatcapMaterial","depthAlpha","length",'{}.constructor("return this")( )',"65wBnOre","_getCacheHash","getOwnPropertySymbols","MathUtils","144916gtdIHI","position","call","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n    varying mat4 csm_internal_vModelViewMatrix;\n",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","PointsMaterial","prototype","\n            ","object","\n    #include <color_fragment>\n    diffuseColor = ","getOwnPropertyDescriptors","emissive","filter","Derived constructors may only return object or undefined"," is not available in ","();\n            // #_CSM_#\n          ","getPrototypeOf","undefined","return (function() ","done","400Veearo","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","while (true) {}","clone","csm_Clearcoat","construct","_generateMaterial",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","__proto__","info","value","_getMaterialDefine","default","Arguments","ShaderMaterial","MeshLambertMaterial","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","RawShaderMaterial","patchMap","void ","MeshNormalMaterial","substring","lastIndexOf","uniforms","csm_PointSize","gger","csm_Metalness","ShaderChunk","28554TohAsq","generateUUID","setPrototypeOf","warn","diffuse","material.clearcoat = ","isArray","MeshDepthMaterial","symbol","apply","push","type","defineProperty","keys","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",";\n    ","entries","Super expression must either be null or a function","constructor",", 1.0 );\n  ","bump","\n    vec3 totalEmissiveRadiance = ","csm_main_","function *\\( *\\)","fragmentShader","error","\n    gl_PointSize = ","table","replace","csm_Bump","iterator","csm_ClearcoatRoughness","clearcoat","MeshPhongMaterial","lights_physical_fragment","onBeforeCompile","forEach","isAlreadyExtended","csm_PositionRaw","\n    #include <dithering_fragment>\n    gl_FragColor  = ","MeshToonMaterial","assign","trim","2325192HcdLQx","295493JXuffz","positionRaw","valueOf","csm_Roughness","bind","void main() {","696pFVvOQ","toUpperCase","from","__csm","counter","pointSize","@@toPrimitive must return a primitive value.","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","this hasn't been initialised - super() hasn't been called","console","configurable","csm_Normal","Material","@@iterator","MeshStandardMaterial","slice","ShadowMaterial","cacheKey","debu","777bpdbNm","csm_Emissive","join","material.clearcoatRoughness = ","enumerable","includes","name","action","csm_FragColor","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","getOwnPropertyDescriptor","\n    gl_FragColor = ","string",'CSM: Property "',"CSM: ","concat",". Shader cannot compile.","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","roughness","propertyIsEnumerable","void main()","clearcoatNormal","Cannot call a class as a function","cacheHash","vertexShader","\\$&","function","defineProperties","baseMaterial","toPrimitive","#define IS_UNKNOWN;\n","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","is not a constructor","_patchShader"," - (dot(","customProgramCacheKey","csm_Position","update","next","\n    \n            ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","chain","CustomShaderMaterial does not support RawShaderMaterial","_getPatchMapForMaterial","normal","sham","toString","find",";\n  ","metalness","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","return","instanceID","init","2649UbSkQv","clearcoatRoughness","csm_AO","\n    vec3 objectNormal = ","9339187PjwuEc","fragColor","exception","38997WcIHCc","split","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","#define IS_VERTEX;\n","MeshPhysicalMaterial","test"];return(or=function(){return n})()}function ir(n,t){for(var e=sr,r=0;r<t[e(541)];r++){var o=t[r];o.enumerable=o[e(473)]||!1,o[e(460)]=!0,e(382)in o&&(o.writable=!0),Object[e(412)](n,qe(o.key),o)}}function ar(n){if(void 0===n)throw new ReferenceError(sr(458));return n}function cr(n,t){var e=sr;return(cr=Object[e(402)]?Object[e(402)].bind():function(n,t){return n[e(380)]=t,n})(n,t)}function sr(n,t){var e=or();return(sr=function(n,t){return e[n-=361]})(n,t)}function ur(n){var t=sr;return(ur=Object.setPrototypeOf?Object.getPrototypeOf[t(448)]():function(n){var e=t;return n[e(380)]||Object[e(366)](n)})(n)}function lr(n){var t=function(){var n=sr;if("undefined"==typeof Reflect||!Reflect[n(376)])return!1;if(Reflect[n(376)][n(514)])return!1;if(typeof Proxy===n(495))return!0;try{return Boolean[n(554)][n(446)][n(549)](Reflect[n(376)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=sr,o=ur(n);if(t){var i=ur(this)[r(418)];e=Reflect[r(376)](o,arguments,i)}else e=o[r(409)](this,arguments);return function(n,t){var e=sr;if(t&&(typeof t===e(556)||typeof t===e(495)))return t;if(void 0!==t)throw new TypeError(e(363));return ar(n)}(this,e)}}Qe(void 0,(function(){for(var n=sr,t=function(){var n,t=sr;try{n=Function(t(368)+t(542)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(459)]||{},r=["log",n(403),n(381),"error",n(529),n(427),"trace"],o=0;o<r.length;o++){var i=Qe[n(418)][n(554)].bind(Qe),a=r[o],c=e[a]||i;i[n(380)]=Qe.bind(Qe),i[n(515)]=c[n(515)][n(448)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:"csm_DiffuseColor",normal:Ke(461),roughness:Ke(447),metalness:Ke(398),emissive:Ke(470),ao:Ke(525),bump:Ke(429),clearcoat:Ke(375),clearcoatRoughness:Ke(431),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ke(396),fragColor:Ke(477),depthAlpha:"csm_DepthAlpha",position:Ke(505),positionRaw:Ke(438)},vr=(Xe(fr={},""[Ke(484)](hr[Ke(548)]),"*"),Xe(fr,"".concat(hr[Ke(445)]),"*"),Xe(fr,""[Ke(484)](hr[Ke(513)]),"*"),Xe(fr,"".concat(hr[Ke(455)]),[Ke(553)]),Xe(fr,""[Ke(484)](hr[Ke(404)]),"*"),Xe(fr,"".concat(hr[Ke(528)]),"*"),Xe(fr,""[Ke(484)](hr[Ke(361)]),[Ke(464),Ke(534)]),Xe(fr,""[Ke(484)](hr[Ke(487)]),[Ke(464),Ke(534)]),Xe(fr,""[Ke(484)](hr[Ke(518)]),[Ke(464),Ke(534)]),Xe(fr,""[Ke(484)](hr.ao),[Ke(464),Ke(534),"MeshBasicMaterial","MeshLambertMaterial",Ke(433),"MeshToonMaterial"]),Xe(fr,""[Ke(484)](hr[Ke(420)]),[Ke(387),Ke(539),Ke(392),Ke(433),Ke(534),Ke(464),Ke(440),Ke(466)]),Xe(fr,""[Ke(484)](hr[Ke(540)]),[Ke(407)]),Xe(fr,""[Ke(484)](hr[Ke(432)]),["MeshPhysicalMaterial"]),Xe(fr,""[Ke(484)](hr[Ke(524)]),["MeshPhysicalMaterial"]),Xe(fr,"".concat(hr.clearcoatNormal),["MeshPhysicalMaterial"]),fr),mr={"#include <lights_physical_fragment>":T[Ke(399)][Ke(434)]},gr=(Xe(pr={},""[Ke(484)](hr.normal),{"#include <beginnormal_vertex>":Ke(526)[Ke(484)](hr[Ke(513)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Xe(pr,""[Ke(484)](hr[Ke(548)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[Ke(484)](hr[Ke(548)],Ke(517))}),Xe(pr,"".concat(hr[Ke(445)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Ke(484)](hr[Ke(445)],Ke(378))}),Xe(pr,"".concat(hr[Ke(455)]),{"gl_PointSize = size;":Ke(426)[Ke(484)](hr.pointSize,Ke(415))}),Xe(pr,"".concat(hr.diffuse),{"#include <color_fragment>":Ke(557).concat(hr[Ke(404)],Ke(517))}),Xe(pr,""[Ke(484)](hr[Ke(528)]),{"#include <dithering_fragment>":Ke(439)[Ke(484)](hr[Ke(528)],Ke(517))}),Xe(pr,""[Ke(484)](hr[Ke(361)]),{"vec3 totalEmissiveRadiance = emissive;":Ke(421)[Ke(484)](hr.emissive,";\n    ")}),Xe(pr,""[Ke(484)](hr[Ke(487)]),{"#include <roughnessmap_fragment>":Ke(478).concat(hr[Ke(487)],Ke(415))}),Xe(pr,"".concat(hr[Ke(518)]),{"#include <metalnessmap_fragment>":Ke(550)[Ke(484)](hr[Ke(518)],Ke(415))}),Xe(pr,""[Ke(484)](hr.ao),{"#include <aomap_fragment>":Ke(388)[Ke(484)](hr.ao,Ke(415))}),Xe(pr,""[Ke(484)](hr[Ke(420)]),{"#include <normal_fragment_maps>":Ke(536)[Ke(484)](hr[Ke(420)],Ke(503))[Ke(484)](hr.bump,Ke(552))}),Xe(pr,"".concat(hr[Ke(540)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(379)[Ke(484)](hr[Ke(540)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ke(538)[Ke(484)](hr.depthAlpha,Ke(415))}),Xe(pr,""[Ke(484)](hr[Ke(432)]),{"material.clearcoat = clearcoat;":Ke(405)[Ke(484)](hr.clearcoat,";")}),Xe(pr,"".concat(hr[Ke(524)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ke(472).concat(hr[Ke(524)],";")}),Xe(pr,"".concat(hr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Ke(500)}),pr),_r=(Xe(dr={},"".concat(hr[Ke(548)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Ke(484)](hr[Ke(548)],Ke(419))}),Xe(dr,""[Ke(484)](hr[Ke(445)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Ke(484)](hr[Ke(548)],";\n  ")}),Xe(dr,"".concat(hr[Ke(404)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(480).concat(hr.diffuse,Ke(517))}),Xe(dr,""[Ke(484)](hr[Ke(528)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(480)[Ke(484)](hr[Ke(528)],Ke(517))}),dr),yr={clearcoat:[hr[Ke(432)],hr[Ke(490)],hr[Ke(524)]]},br=Ke(532),xr=Ke(551),Ir=Ke(414),wr=[Ke(497),Ke(424),"vertexShader",Ke(395),Ke(390),Ke(467),"silent"],Sr=function(n,t,e){var r=Ke;return n[r(531)](t)[r(471)](e)},Mr=function(n,t){var e,r,o=Ke;return new RegExp("\\b".concat((e=t,r=Ke,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(494))),"\\b"))[o(535)](n)};function Er(n){return n?n[Ke(428)](/\s/g,""):void 0}function Rr(n){return n[Ke(428)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Ar=function(n){var t=Ke;!function(n,t){var e=sr;if("function"!=typeof t&&null!==t)throw new TypeError(e(417));n[e(554)]=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(554),{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=sr,u=n.baseMaterial,l=n[s(424)],f=n[s(493)],p=n[s(395)],d=n[s(390)],h=n[s(467)],v=n.silent,m=tr(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(sr(491))}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e.message.indexOf(t(501))>=0)return!1}return!0}(u)?(e=u,Object[s(441)](e,m)):e=new u(m),e[s(411)]===s(389))throw new Error(s(511));(function(n,t){var e=Ke;e(541),Object[e(441)](n,t);var r=Object[e(366)](t);Object[e(416)](Object.getOwnPropertyDescriptors(r))[e(362)]((function(n){var t=e,r=typeof n[1].get===t(495),o=typeof n[1].set===t(495),i="function"==typeof n[1][t(382)],a=n[0]===t(418);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(495)&&Object[r(412)](n,t[0],t[1])}))})(ar(t=a[s(549)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(546)][s(401)](),type:e[s(411)],isAlreadyExtended:(r=e[s(435)],o=Ke,i=r[o(515)]()[o(442)](),!(0===i[o(393)](i.indexOf("{")+1,i[o(394)]("}")).trim()[o(541)])),cacheHash:"",silent:v},t[s(395)]=nr(nr({},t[s(395)]||{}),p||{});var g=t[s(453)],_=g[s(424)],y=g[s(493)],b=t[s(395)];return t[s(453)][s(492)]=t._getCacheHash(),t[s(377)](_,y,b),t}return e=c,r=[{key:t(506),value:function(){var n=t,e=arguments[n(541)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e.uniforms||this[n(395)],Object[n(441)](this.__csm,e);var r=this[n(453)],o=r.fragmentShader,i=r[n(493)],a=this[n(395)],c=this[n(544)]();this[n(453)][n(492)]=c,this._generateMaterial(o,i,a)}},{key:t(374),value:function(){var n=t,e={baseMaterial:this[n(453)][n(497)],fragmentShader:this[n(453)][n(424)],vertexShader:this.__csm[n(493)],uniforms:this[n(395)],silent:this[n(453)].silent,patchMap:this[n(453)][n(390)],cacheKey:this[n(453)].cacheKey},r=new this.constructor(e);return Object[n(441)](this,r),r}},{key:t(544),value:function(){var n=t,e=this.__csm,r=e.fragmentShader,o=e[n(493)],i=this[n(395)],a=[Er(r),Er(o),i].filter((function(n){return void 0!==n}));return a.length>0?Sn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(504)]=function(){var n=o;return i[n(453)][n(492)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(502)](Rr(n),t[r(424)],!0);t[r(424)]=a+c}if(e){var s=i._patchShader(Rr(e),t[r(493)]);t[r(493)]=r(533)+s,t[r(493)]=a+t[r(493)]}t[r(395)]=nr(nr({},t[r(395)]),i.uniforms),i[r(395)]=t.uniforms}catch(u){console[r(425)](u)}};if(this[o(453)][o(437)]){var c=this.onBeforeCompile;this[o(435)]=function(n,t){c(n,t),a(n)}}else this[o(435)]=a;this.needsUpdate=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(512)]()),this[o(453)].patchMap);Object[o(416)](yr)[o(436)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1][e(516)]((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error(e(482)[e(484)](a,'" is required to use output "')[e(484)](c,'". Shader cannot compile.'))})),Object.entries(mr)[o(436)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object[o(413)](c)[o(436)]((function(t){var e=o;Object[e(413)](c[t])[e(436)]((function(r){var o=e,s=vr[t],u=i[o(453)].type;if("*"===t||Mr(n,t)){if(!(!s||Array[o(406)](s)&&s[o(474)](u)||"*"===s))throw new Error(o(483).concat(t,o(364))[o(484)](u,o(485)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(422)+this[o(453)][o(521)][o(428)](/-/g,"_"),h=n[o(428)](/void\s+main\s*\(\s*\)/g,o(391)[o(484)](d,"()")),v=n[o(474)](o(489)),m=a[o(474)]("// #_CSM_#");return v&&(m&&this[o(453)][o(437)]?(a=a[o(428)]("void main() {","\n            "[o(484)](h,"\n            \n            void main() {\n          ")),s=a,u="// #_CSM_#",l=o(555)[o(484)](d,o(365)),p=s[(f=Ke)(394)](u),a=-1===p?s:s.substring(0,p)+l+s[f(393)](p+u[f(541)])):a=a.replace(o(449),o(486)[o(484)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":xr,o(509))[o(484)](br,o(508))[o(484)](h,o(371))[o(484)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ").concat(r?"\n    \n":Ir,o(519)).concat(d,"();\n              // #_CSM_#\n          "))),a}},{key:t(383),value:function(){var n=t,e=this.__csm.type;return e?"#define IS_".concat(e[n(451)](),";\n"):n(499)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(453)][n(411)]===n(386)?_r:gr}}],i=sr,r&&ir(e[i(554)],r),o&&ir(e,o),Object[i(412)](e,i(554),{writable:!1}),c}(T[Ke(462)]);function Pr(n){function t(n){var e=sr;if("string"==typeof n)return function(n){}.constructor(e(373))[e(409)](e(454));1!==(""+n/n)[e(541)]||n%20==0?function(){return!0}[e(418)](e(468)+"gger")[e(549)](e(476)):function(){return!1}[e(418)](e(468)+e(397))[e(409)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tr=Dr;function Dr(n,t){const e=Fr();return(Dr=function(n,t){return e[n-=491]})(n,t)}!function(n,t){const e=Dr,r=Fr();for(;;)try{if(382724===-parseInt(e(535))/1+-parseInt(e(492))/2+-parseInt(e(515))/3*(parseInt(e(525))/4)+-parseInt(e(512))/5+-parseInt(e(513))/6*(-parseInt(e(493))/7)+parseInt(e(501))/8*(parseInt(e(519))/9)+parseInt(e(497))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dr(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zr(this,(function(){const n=Dr,t=new RegExp(n(524)),e=new RegExp(n(517),"i"),r=Br(n(534));t[n(526)](r+n(516))&&e[n(526)](r+"input")?Br():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dr(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Or(void 0,(function(){const n=Dr;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(521)]=t.console||{},r=[n(499),"warn",n(518),n(532),n(502),"table",n(509)];for(let i=0;i<r[n(506)];i++){const t=Or[n(508)][n(533)][n(536)](Or),o=r[i],a=e[o]||t;t[n(498)]=Or[n(536)](Or),t[n(537)]=a[n(537)][n(536)](a),e[o]=t}}))();const Cr=[Tr(496)];function Fr(){const n=["init","366445RXLTjW","bind","toString","\n      ","#ff00fc","292162CiAqOA","10423eoCbXo","clearcoat","counter","object","7985200rdcyeh","__proto__","log","color","225736ppHIIH","exception","index","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","metalness","length","call","constructor","trace","apply","MeshPhysicalMaterial","1329585zyVNkf","1422occHxL","action","24FTAsQv","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","162iDtHlG","primitive","console","gger","clearcoatRoughness","function *\\( *\\)","249076byTysd","test","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","stateObject","setStyle","roughness","string","error","prototype"];return(Fr=function(){return n})()}const kr=J({__name:Tr(503),props:{color:{default:Tr(491)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Tr,e=n,r={baseMaterial:T[t(511)],metalness:e[t(505)],roughness:e[t(530)],clearcoat:e[t(494)],clearcoatRoughness:e[t(523)],color:e[t(500)],vertexShader:t(527),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(538)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(504)},o=new Ar(r);return un((()=>{const n=t;o[n(500)][n(529)](e.color),o[n(505)]=e.metalness,o[n(530)]=e[n(530)],o.clearcoat=e.clearcoat,o[n(523)]=e[n(523)]})),(n,e)=>{const r=t;return rn(),on(r(520),{object:X(o)},null,8,Cr)}}});function Br(n){function t(n){const e=Dr;if(typeof n===e(531))return function(n){}[e(508)]("while (true) {}")[e(510)](e(495));1!==(""+n/n).length||n%20==0?function(){return!0}[e(508)]("debugger")[e(507)](e(514)):function(){return!1}[e(508)]("debu"+e(522))[e(510)](e(528)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Nr,r=Lr();;)try{if(941889===parseInt(e(484))/1+parseInt(e(479))/2*(-parseInt(e(489))/3)+parseInt(e(486))/4+-parseInt(e(474))/5+parseInt(e(482))/6+-parseInt(e(467))/7+parseInt(e(481))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var jr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){var n=Nr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(495),"i"),r=Hr(n(478));t.test(r+n(494))&&e[n(470)](r+"input")?Hr():r("0")}))()}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(466)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(n,t){var e=Lr();return(Nr=function(n,t){return e[n-=464]})(n,t)}function Lr(){var n=["action","console","trace","prototype","apply","1236620SGlZIc","stateObject","info","test","debu","table","call","9102240RBFyGC","bind","counter","warn","init","2WxMBfV","log","1650560BAcfFb","8320674obDAOI",'{}.constructor("return this")( )',"830320HYRWXJ","exception","2788740oqffAA","gger","toString","544821trprQx","while (true) {}","length","return (function() ","constructor","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Lr=function(){return n})()}function Hr(n){function t(n){var e=Nr;if("string"==typeof n)return function(n){}[e(493)](e(490)).apply(e(476));1!==(""+n/n)[e(491)]||n%20==0?function(){return!0}[e(493)](e(471)+e(487))[e(473)](e(496)):function(){return!1}[e(493)](e(471)+e(487)).apply(e(468)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ur(void 0,(function(){var n,t=Nr;try{n=Function(t(492)+t(483)+");")()}catch(s){n=window}for(var e=n.console=n[t(497)]||{},r=[t(480),t(477),t(469),"error",t(485),t(472),t(464)],o=0;o<r[t(491)];o++){var i=Ur[t(493)][t(465)][t(475)](Ur),a=r[o],c=e[a]||i;i.__proto__=Ur.bind(Ur),i[t(488)]=c.toString.bind(c),e[a]=i}}))();export{Ve as C,kr as _,Xn as a,ut as b,wt as c,Tt as d,Ut as e,Xt as f,Ne as g,Re as h,ht as u};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.E2JG-lK41739444016646.js";import{B as i,b as n,cw as s,ab as e,X as r,a as o,an as a,$ as c,r as h,_ as u}from"./three.W6GmiHfn1739444016646.js";import{e as l,I as p,K as d}from"./@tresjs.Q4_KYO2a1739444016646.js";import{a as m}from"./simplex-noise.jB2HxhHB1739444016646.js";import{d as f,a2 as g,o as y,H as b,u as S,r as x,j as v,g as w,m as _,F as I}from"./@vue.NRI7TcgI1739444016646.js";import"./index.IpjFUco91739444016646.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.lMUEJiXC1739444016646.js";import"./three-custom-shader-material.kf-ieBUt1739444016646.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1739444016646.js";import"./@vueuse.6yH4xZkk1739444016646.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.b-TY7oSr1739444016646.js";import"./all.three.jD4iRnJs1739444016646.js";import"./oimophysics.x0jH7fze1739444016646.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.wmn3SQkr1739444016646.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ZSUFvMsu1739444016646.js";import"./index.gpAaVrpj1739444016646.js";import"./three-stdlib.p59O9BRw1739444016646.js";import"./@pmndrs.G4ph9toA1739444016646.js";import"./object-hash.1aeUIJEf1739444016646.js";import"./@amap.KAEokh9M1739444016646.js";import"./jszip.kB071t9j1739444016646.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.or7FQKEc1739444016646.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.IoXxOWkl1739444016646.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.6lmVhMXT1739444016646.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.8hrVkTwP1739444016646.js";const M=V;!function(t,i){const n=V,s=A();for(;;)try{if(323859===-parseInt(n(531))/1*(parseInt(n(399))/2)+-parseInt(n(490))/3*(parseInt(n(524))/4)+-parseInt(n(436))/5*(-parseInt(n(538))/6)+-parseInt(n(519))/7+-parseInt(n(407))/8+-parseInt(n(421))/9*(-parseInt(n(428))/10)+parseInt(n(457))/11*(parseInt(n(453))/12))break;s.push(s.shift())}catch(e){s.push(s.shift())}}();const C=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[V(459)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();!function(){C(this,(function(){const t=V,i=new RegExp("function *\\( *\\)"),n=new RegExp(t(503),"i"),s=F(t(508));i[t(400)](s+t(430))&&n.test(s+t(425))?F():s("0")}))()}();const T=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[V(459)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();function A(){const t=["input","drawRange","currentCoordinate","5336350NjXSds","RAY_INITIALIZED","chain","while (true) {}","RAY_PROPAGATING","fractalRayRecursive","RAY_STEADY","randomGenerator","15sZuQPH","exception","fraction0","getSeed","timeFraction","SIN30DEG","createPrism","currentVertex","birthTime","radius0","log","numSubrays","simplexX","prototype","fillMesh","add","maxSubrays","132WeeNxq","crossVectors","needsUpdate","createTriangleVerticesWithoutUVs","564597VxLLcx","positionVariationFactor","apply","pos1","subrays","maxSubrayRecursion","currentSegmentIndex","propagationTimeFactor","vanishingTimeFactor","onDecideSubrayCreation","newPos","destOffset","toString","lerp","currentIndex","onSubrayCreation","seed","currentSubray","recursionProbability","maxIterations","indices","side","isLightningStrike","createTriangleVerticesWithUVs","middleLinPos","update","copy","currentSegmentCallback","push","state","timeScale","currentCreateTriangleVertices",'{}.constructor("return this")( )',"1037661mwTqZY","radius0Factor","floor","type","setIndex","subrayProbability","recursion","maxRaySegments","subrayPeriod","sin","seedGenerator","simplexZ","count","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","random","RAY_EXTINGUISHED","set","isInitialSegment","init","sourceOffset","cross1","time","generateUVs","subrayCylinderPosition","positionAttribute","ramification","clone","radius1Factor","up1","90636rGnsXp","subrayDutyCycle","rayParameters","length","roughness","4QAEBza","gger","linPos0","warn","createSegment","createMesh","updateMesh","1wJZfsD","pos0","counter","initSubray","action","cos","index","175206hOlyBK","array","multiplyScalar","normalize","setAttribute","bind","fractalRay","sub","RAY_VANISHING","createDefaultSubrayCreationCallbacks","lerpVectors","error","return (function() ","createRandomGenerator","up0","simplexY","position","createSubray","minRadius","uvs","COS30DEG","linPos1","max","addNewSubray","stateObject","endPropagationTime","deathTime","createPrismFaces","visible","setSeed","usage","constructor","raySegments","noiseSeed","506318bqJAwn","test","uvsAttribute","currentUVCoordinate","straightness","beginVanishingTime","currentSeed","fraction1","1999856efAYZw","middlePos","isStatic","vPos","down","forwards","subVectors","forwardsFill","isEternal","RAY_UNBORN","min","copyParameters","getNewSegment","vertices","9yyDabE","radius1","pow","iteration"];return(A=function(){return t})()}T(void 0,(function(){const t=V;let i;try{i=Function(t(377)+t(489)+");")()}catch(e){i=window}const n=i.console=i.console||{},s=[t(446),t(527),"info",t(549),t(437),"table","trace"];for(let r=0;r<s.length;r++){const i=T[t(396)][t(449)][t(543)](T),e=s[r],o=n[e]||i;i.__proto__=T[t(543)](T),i[t(469)]=o.toString.bind(o),n[e]=i}}))();class R extends i{constructor(t={}){const i=V;super(),this[i(479)]=!0,this[i(493)]="LightningStrike",this.init(R[i(418)](t,t)),this[i(529)]()}static createRandomGenerator(){const t=V,i=2053,n=[];for(let e=0;e<i;e++)n[t(485)](Math[t(504)]());const s={currentSeed:0,random:function(){const e=t,r=n[s.currentSeed];return s.currentSeed=(s[e(405)]+1)%i,r},getSeed:function(){return s[t(405)]/i},setSeed:function(n){const e=t;s[e(405)]=Math[e(492)](n*i)%i}};return s}static[M(418)](t={},i={}){const s=M,e=function(n){return i===t?n:n[V(516)]()};return t[s(509)]=void 0!==i.sourceOffset?e(i.sourceOffset):new n(0,100,0),t[s(468)]=void 0!==i[s(468)]?e(i[s(468)]):new n(0,0,0),t.timeScale=void 0!==i[s(487)]?i[s(487)]:1,t.roughness=void 0!==i[s(523)]?i[s(523)]:.9,t[s(403)]=void 0!==i.straightness?i[s(403)]:.7,t.up0=void 0!==i[s(379)]?e(i[s(379)]):new n(0,0,1),t[s(518)]=void 0!==i[s(518)]?e(i[s(518)]):new n(0,0,1),t.radius0=void 0!==i[s(445)]?i.radius0:1,t[s(422)]=void 0!==i[s(422)]?i[s(422)]:1,t.radius0Factor=void 0!==i[s(491)]?i[s(491)]:.5,t.radius1Factor=void 0!==i[s(517)]?i[s(517)]:.2,t[s(383)]=void 0!==i[s(383)]?i.minRadius:.2,t[s(415)]=void 0!==i[s(415)]?i[s(415)]:void 0===i[s(444)]||void 0===i[s(391)],t[s(444)]=i[s(444)],t[s(391)]=i[s(391)],t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i[s(464)]:.1,t.vanishingTimeFactor=void 0!==i.vanishingTimeFactor?i.vanishingTimeFactor:.9,t[s(498)]=void 0!==i[s(498)]?i[s(498)]:4,t[s(520)]=void 0!==i[s(520)]?i[s(520)]:.6,t[s(476)]=void 0!==i[s(476)]?i[s(476)]:9,t[s(409)]=void 0!==i[s(409)]&&i.isStatic,t.ramification=void 0!==i[s(515)]?i[s(515)]:5,t[s(462)]=void 0!==i[s(462)]?i[s(462)]:3,t.recursionProbability=void 0!==i[s(475)]?i[s(475)]:.6,t.generateUVs=void 0!==i.generateUVs&&i[s(512)],t[s(435)]=i[s(435)],t.noiseSeed=i.noiseSeed,t[s(466)]=i[s(466)],t.onSubrayCreation=i.onSubrayCreation,t}[M(482)](t){const i=M;this[i(409)]||(this[i(521)][i(415)]||this[i(521)].birthTime<=t&&t<=this[i(521)][i(391)]?(this[i(530)](t),t<this.subrays[0][i(390)]?this[i(486)]=R[i(432)]:t>this[i(461)][0][i(404)]?this.state=R[i(546)]:this[i(486)]=R[i(434)],this[i(393)]=!0):(this[i(393)]=!1,t<this[i(521)][i(444)]?this[i(486)]=R[i(416)]:this[i(486)]=R[i(505)]))}init(t){const i=M;this.rayParameters=t,this.maxIterations=void 0!==t.maxIterations?Math.floor(t.maxIterations):9,t[i(476)]=this[i(476)],this.isStatic=void 0!==t.isStatic&&t[i(409)],t[i(409)]=this[i(409)],this[i(515)]=void 0!==t[i(515)]?Math[i(492)](t[i(515)]):5,t[i(515)]=this.ramification,this[i(462)]=void 0!==t[i(462)]?Math[i(492)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this[i(462)],this[i(475)]=void 0!==t[i(475)]?t[i(475)]:.6,t.recursionProbability=this[i(475)],this[i(512)]=void 0!==t[i(512)]&&t.generateUVs,t[i(512)]=this[i(512)],void 0!==t.randomGenerator?(this[i(435)]=t.randomGenerator,this[i(500)]=t.randomGenerator,void 0!==t[i(398)]&&this[i(500)][i(394)](t[i(398)])):(this[i(435)]=R[i(378)](),this[i(500)]=Math),void 0!==t[i(466)]?this[i(466)]=t[i(466)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(472)]&&(this.onSubrayCreation=t.onSubrayCreation)),this.state=R[i(429)],this[i(452)]=Math.ceil(1+Math[i(423)](this[i(515)],Math.max(0,this[i(462)]-1))),t.maxSubrays=this[i(452)],this.maxRaySegments=2*(1<<this.maxIterations),this[i(461)]=[];for(let n=0;n<this.maxSubrays;n++)this.subrays[i(485)](this.createSubray());this[i(397)]=[];for(let n=0;n<this[i(497)];n++)this[i(397)][i(485)](this.createSegment());this[i(511)]=0,this[i(440)]=0,this[i(484)]=null,this[i(488)]=this[i(512)]?this[i(480)]:this[i(456)],this[i(447)]=0,this[i(474)]=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this[i(495)]=0,this.currentVertex=0,this.currentIndex=0,this[i(427)]=0,this[i(402)]=0,this[i(420)]=null,this.uvs=null,this[i(477)]=null,this.positionAttribute=null,this[i(401)]=null,this.simplexX=m(this.seedGenerator[i(504)]),this[i(380)]=m(this[i(500)].random),this[i(501)]=m(this[i(500)][i(504)]),this[i(412)]=new n,this[i(414)]=new n,this[i(478)]=new n,this[i(411)]=new n,this[i(408)]=new n,this[i(481)]=new n,this.newPos=new n,this.vPos=new n,this[i(510)]=new n}[M(529)](){const t=M,i=1<<this.maxIterations,n=3*(i+1)*this[t(452)],o=18*i*this.maxSubrays;this[t(420)]=new Float32Array(3*n),this[t(477)]=new Uint32Array(o),this.generateUVs&&(this[t(384)]=new Float32Array(2*n)),this.fillMesh(0),this[t(494)](new s(this[t(477)],1)),this.positionAttribute=new e(this[t(420)],3),this[t(542)](t(381),this.positionAttribute),this[t(512)]&&(this.uvsAttribute=new e(new Float32Array(this.uvs),2),this[t(542)]("uv",this[t(401)])),!this[t(409)]&&(this.index[t(395)]=r,this[t(514)].usage=r,this[t(512)]&&(this[t(401)][t(395)]=r)),this[t(420)]=this[t(514)][t(539)],this[t(477)]=this[t(537)][t(539)],this.generateUVs&&(this[t(384)]=this[t(401)][t(539)])}[M(530)](t){const i=M;this[i(450)](t),this[i(426)][i(502)]=this.currentIndex,this[i(537)][i(455)]=!0,this[i(514)][i(455)]=!0,this.generateUVs&&(this.uvsAttribute[i(455)]=!0)}fillMesh(t){const i=M,n=this;this[i(443)]=0,this[i(471)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(t,(function(s){const e=i,r=n[e(474)];t<r.birthTime||(this[e(521)][e(415)]&&0==n[e(474)][e(496)]?(n[e(442)](s),n.onDecideSubrayCreation(s,n)):t<r[e(390)]?n.timeFraction>=s[e(438)]*r.propagationTimeFactor&&(n[e(442)](s),n.onDecideSubrayCreation(s,n)):t<r[e(404)]?(n[e(442)](s),n.onDecideSubrayCreation(s,n)):(n[e(440)]<=r[e(465)]+s[e(406)]*(1-r[e(465)])&&n[e(442)](s),n.onDecideSubrayCreation(s,n)))}))}[M(388)](){const t=M;return this[t(461)][this[t(447)]++]}[M(534)](t,i){const n=M;t[n(532)].copy(i[n(509)]),t.pos1[n(483)](i[n(468)]),t[n(379)][n(483)](i[n(379)]),t[n(518)][n(483)](i[n(518)]),t[n(445)]=i[n(445)],t[n(422)]=i[n(422)],t[n(444)]=i[n(444)],t[n(391)]=i[n(391)],t[n(487)]=i[n(487)],t[n(523)]=i[n(523)],t[n(403)]=i.straightness,t.propagationTimeFactor=i[n(464)],t.vanishingTimeFactor=i[n(465)],t[n(476)]=this.maxIterations,t[n(473)]=void 0!==i[n(398)]?i[n(398)]:0,t[n(496)]=0}[M(544)](t,i){const n=M;this[n(511)]=t,this[n(484)]=i,this[n(447)]=0,this[n(534)](this[n(388)](),this[n(521)]);for(let s=0;s<this[n(447)];s++){const i=this[n(461)][s];this.currentSubray=i,this[n(435)][n(394)](i[n(473)]),i.endPropagationTime=o[n(470)](i.birthTime,i[n(391)],i[n(464)]),i[n(404)]=o.lerp(i.deathTime,i.birthTime,1-i[n(465)]);const e=this.randomGenerator[n(504)];i.linPos0.set(e(),e(),e())[n(540)](1e3),i[n(386)][n(506)](e(),e(),e()).multiplyScalar(1e3),this.timeFraction=(t-i[n(444)])/(i[n(391)]-i.birthTime),this[n(463)]=0,this[n(507)]=!0;const r=this[n(419)]();r[n(424)]=0,r.pos0.copy(i[n(532)]),r[n(460)].copy(i[n(460)]),r.linPos0.copy(i[n(526)]),r.linPos1.copy(i[n(386)]),r[n(379)][n(483)](i[n(379)]),r[n(518)].copy(i.up1),r[n(445)]=i.radius0,r.radius1=i[n(422)],r[n(438)]=0,r[n(406)]=1,r[n(458)]=1-i[n(403)],this.subrayProbability=this[n(515)]*Math[n(423)](this[n(475)],i[n(496)])/(1<<i[n(476)]),this.fractalRayRecursive(r)}this[n(484)]=null,this.currentSubray=null}[M(433)](t){const i=M;if(t[i(424)]>=this[i(474)][i(476)])return void this[i(484)](t);this[i(412)][i(413)](t.pos1,t[i(532)]);let n=this[i(412)][i(522)]();n<1e-6&&(this[i(412)][i(506)](0,0,.01),n=this[i(412)].length());const s=.5*(t[i(445)]+t.radius1),e=.5*(t.fraction0+t[i(406)]),r=this[i(511)]*this[i(474)][i(487)]*Math[i(423)](2,t[i(424)]);this.middlePos[i(548)](t[i(532)],t[i(460)],.5),this.middleLinPos[i(548)](t.linPos0,t.linPos1,.5);const o=this[i(481)];this[i(467)][i(506)](this[i(448)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(501)](o.x,o.y,o.z,r)),this[i(467)][i(540)](t.positionVariationFactor*n),this[i(467)][i(451)](this[i(408)]);const a=this.getNewSegment();a.pos0[i(483)](t[i(532)]),a[i(460)].copy(this[i(467)]),a.linPos0.copy(t[i(526)]),a[i(386)][i(483)](this.middleLinPos),a[i(379)][i(483)](t[i(379)]),a.up1.copy(t.up1),a.radius0=t[i(445)],a.radius1=s,a[i(438)]=t[i(438)],a[i(406)]=e,a[i(458)]=t[i(458)]*this[i(474)][i(523)],a.iteration=t[i(424)]+1;const c=this.getNewSegment();c.pos0[i(483)](this[i(467)]),c[i(460)][i(483)](t[i(460)]),c[i(526)][i(483)](this[i(481)]),c[i(386)][i(483)](t.linPos1),this[i(510)][i(454)](t[i(379)],this.forwards[i(541)]()),c[i(379)].crossVectors(this[i(412)],this[i(510)])[i(541)](),c[i(518)][i(483)](t.up1),c[i(445)]=s,c[i(422)]=t[i(422)],c[i(438)]=e,c.fraction1=t.fraction1,c[i(458)]=t[i(458)]*this[i(474)][i(523)],c[i(424)]=t[i(424)]+1,this[i(433)](a),this[i(433)](c)}[M(442)](t){const i=M;this[i(414)][i(413)](t[i(460)],t[i(532)])[i(541)](),this[i(507)]&&(this[i(488)](t[i(532)],t[i(379)],this[i(414)],t[i(445)],0),this[i(507)]=!1),this.currentCreateTriangleVertices(t[i(460)],t[i(379)],this.forwardsFill,t[i(422)],t[i(406)]),this[i(392)]()}[M(456)](t,i,n,s){const e=M;this.side[e(454)](i,n).multiplyScalar(s*R.COS30DEG),this[e(411)][e(483)](i)[e(540)](-s*R[e(441)]);const r=this[e(410)],o=this[e(420)];r[e(483)](t).sub(this[e(478)])[e(451)](this[e(411)]),o[this[e(427)]++]=r.x,o[this[e(427)]++]=r.y,o[this[e(427)]++]=r.z,r[e(483)](t)[e(451)](this.side).add(this[e(411)]),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(427)]++]=r.z,r[e(483)](i).multiplyScalar(s)[e(451)](t),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(427)]++]=r.z,this[e(443)]+=3}[M(480)](t,i,n,s,e){const r=M;this[r(478)].crossVectors(i,n)[r(540)](s*R[r(385)]),this[r(411)][r(483)](i)[r(540)](-s*R[r(441)]);const o=this[r(410)],a=this[r(420)],c=this[r(384)];o[r(483)](t)[r(545)](this[r(478)])[r(451)](this.down),a[this[r(427)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,c[this[r(402)]++]=e,c[this.currentUVCoordinate++]=0,o[r(483)](t)[r(451)](this.side)[r(451)](this[r(411)]),a[this[r(427)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,c[this[r(402)]++]=e,c[this[r(402)]++]=.5,o.copy(i).multiplyScalar(s)[r(451)](t),a[this[r(427)]++]=o.x,a[this[r(427)]++]=o.y,a[this.currentCoordinate++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(402)]++]=1,this[r(443)]+=3}[M(392)](t){const i=M,n=this[i(477)];t=this.currentVertex-6,n[this[i(471)]++]=t+1,n[this.currentIndex++]=t+2,n[this[i(471)]++]=t+5,n[this[i(471)]++]=t+1,n[this[i(471)]++]=t+5,n[this.currentIndex++]=t+4,n[this.currentIndex++]=t+0,n[this[i(471)]++]=t+1,n[this.currentIndex++]=t+4,n[this[i(471)]++]=t+0,n[this.currentIndex++]=t+4,n[this[i(471)]++]=t+3,n[this.currentIndex++]=t+2,n[this[i(471)]++]=t+0,n[this.currentIndex++]=t+3,n[this[i(471)]++]=t+2,n[this[i(471)]++]=t+3,n[this[i(471)]++]=t+5}[M(547)](){const t=M,i=this[t(435)].random;this.onDecideSubrayCreation=function(n,s){const e=t,r=s.currentSubray,a=s.rayParameters[e(498)],c=s[e(521)][e(520)],h=s[e(521)][e(415)]&&0==r[e(496)]?-i()*a:o[e(470)](r[e(444)],r.endPropagationTime,n[e(438)])-i()*a,u=s[e(511)]-h,l=Math[e(492)](u/a),p=i()*(l+1);let d=0;if(u%a<=c*a&&(d=s[e(495)]),r[e(496)]<s[e(462)]&&s.numSubrays<s.maxSubrays&&i()<d){const t=s[e(388)](),o=s[e(435)][e(439)]();t[e(473)]=p,s.randomGenerator[e(394)](p),t[e(496)]=r[e(496)]+1,t.maxIterations=Math.max(1,r[e(476)]-1),t[e(526)][e(506)](i(),i(),i()).multiplyScalar(1e3),t[e(386)][e(506)](i(),i(),i())[e(540)](1e3),t[e(379)][e(483)](r[e(379)]),t[e(518)][e(483)](r[e(518)]),t.radius0=n[e(445)]*s[e(521)][e(491)],t[e(422)]=Math[e(417)](s[e(521)][e(383)],n[e(422)]*s[e(521)][e(517)]),t[e(444)]=h+l*a,t.deathTime=t[e(444)]+a*c,!s[e(521)][e(415)]&&0==r[e(496)]&&(t[e(444)]=Math[e(387)](t[e(444)],r.birthTime),t[e(391)]=Math[e(417)](t[e(391)],r.deathTime)),t[e(487)]=2*r[e(487)],t.roughness=r[e(523)],t.straightness=r[e(403)],t[e(464)]=r[e(464)],t[e(465)]=r[e(465)],s[e(472)](n,r,t,s),s[e(435)][e(394)](o)}};const s=new n,e=new n,r=new n,a=new n;this.onSubrayCreation=function(i,n,s,e){e[t(513)](i,n,s,.5,.6,.2)},this.subrayConePosition=function(n,o,c,h,u,l){const p=t;c.pos0.copy(n[p(532)]),s[p(413)](o[p(460)],o[p(532)]),e[p(483)](s)[p(541)](),s[p(540)](n[p(438)]+(1-n[p(438)])*(i()*h));const d=s.length();r[p(454)](o.up0,e);const m=2*Math.PI*i();r[p(540)](Math.cos(m)),a.copy(o[p(379)])[p(540)](Math[p(499)](m)),c[p(460)][p(483)](r)[p(451)](a).multiplyScalar(d*u*(l+i()*(1-l))).add(s)[p(451)](o[p(532)])},this.subrayCylinderPosition=function(n,o,c,h,u,l){const p=t;c.pos0[p(483)](n[p(532)]),s.subVectors(o.pos1,o[p(532)]),e.copy(s).normalize(),s[p(540)](n.fraction0+(1-n[p(438)])*((2*i()-1)*h));const d=s[p(522)]();r[p(454)](o[p(379)],e);const m=2*Math.PI*i();r[p(540)](Math[p(536)](m)),a.copy(o[p(379)])[p(540)](Math[p(499)](m)),c[p(460)][p(483)](r)[p(451)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(451)](s)[p(451)](o[p(532)])}}[M(382)](){return{seed:0,maxIterations:0,recursion:0,pos0:new n,pos1:new n,linPos0:new n,linPos1:new n,up0:new n,up1:new n,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(528)](){return{iteration:0,pos0:new n,pos1:new n,linPos0:new n,linPos1:new n,up0:new n,up1:new n,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(419)](){return this[M(397)][this.currentSegmentIndex++]}[M(483)](t){const i=M;return super[i(483)](t),this[i(508)](R[i(418)]({},t[i(521)])),this}[M(516)](){const t=M;return new this.constructor(R[t(418)]({},this[t(521)]))}}function V(t,i){const n=A();return(V=function(t,i){return n[t-=377]})(t,i)}function F(t){function i(t){const n=V;if("string"==typeof t)return function(t){}[n(396)](n(431))[n(459)](n(533));1!==(""+t/t)[n(522)]||t%20==0?function(){return!0}[n(396)]("debu"+n(525)).call(n(535)):function(){return!1}[n(396)]("debu"+n(525)).apply(n(389)),i(++t)}try{if(t)return i;i(0)}catch(n){}}R[M(429)]=0,R[M(416)]=1,R[M(432)]=2,R[M(434)]=3,R[M(546)]=4,R[M(505)]=5,R[M(385)]=Math[M(536)](30*Math.PI/180),R.SIN30DEG=Math[M(499)](30*Math.PI/180);const j=G;function z(){const t=["lightningMinDuration","destOffset","init","random","warn","return (function() ","set","lightningParameters","deathTime","console","while (true) {}","multiplyScalar","140HmHOIU","copy","onRayPosition","test","inited","lightningMaxDuration","counter","function *\\( *\\)","pop","action","deadLightningsMeshes","birthTime","add","4633224OOtkqC","maxLightnings","RAY_EXTINGUISHED","info","remove","lerp","1960430XHVjXS","trace","size","maxSlope","lightningMaxPeriod","splice","stateObject","nextLightningTime","push","isLightningStorm","gger","maxHeight","2989240SMBMNY","state","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","1375926MqdYet","prototype","lightningMinPeriod","debu","1lOQvKv","rayParameters","minHeight","string","stormParams","RAY_PROPAGATING","bind","exception","indexOf","49231QzWLBU","chain","lightningMaterial","copyParameters","noiseSeed","update","984JFcaCO","onLightningDown","lightningsMeshes","geometry","getNextLightningTime","toString","3699756MNveir","439551xioqoN"];return(z=function(){return t})()}!function(t,i){const n=G,s=z();for(;;)try{if(622390===parseInt(n(183))/1*(-parseInt(n(179))/2)+parseInt(n(204))/3+-parseInt(n(231))/4+parseInt(n(237))/5+parseInt(n(198))/6*(parseInt(n(192))/7)+parseInt(n(174))/8+-parseInt(n(205))/9*(parseInt(n(218))/10))break;s.push(s.shift())}catch(e){s.push(s.shift())}}();const D=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[G(178)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();!function(){D(this,(function(){const t=G,i=new RegExp(t(225)),n=new RegExp(t(177),"i"),s=O(t(208));i.test(s+t(193))&&n[t(221)](s+"input")?O():s("0")}))()}();const H=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[G(178)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();function G(t,i){const n=z();return(G=function(t,i){return n[t-=165]})(t,i)}H(void 0,(function(){const t=G;let i;try{i=Function(t(211)+'{}.constructor("return this")( ));')()}catch(e){i=window}const n=i[t(215)]=i[t(215)]||{},s=["log",t(210),t(234),"error",t(190),"table",t(238)];for(let r=0;r<s.length;r++){const i=H[t(176)][t(180)][t(189)](H),e=s[r],o=n[e]||i;i.__proto__=H[t(189)](H),i[t(203)]=o[t(203)].bind(o),n[e]=i}}))();class L extends a{constructor(t={}){const i=G;super(),this[i(171)]=!0,this.stormParams=t,t[i(239)]=void 0!==t[i(239)]?t.size:1e3,t[i(185)]=void 0!==t[i(185)]?t[i(185)]:80,t[i(173)]=void 0!==t[i(173)]?t[i(173)]:100,t[i(165)]=void 0!==t[i(165)]?t.maxSlope:1.1,t[i(232)]=void 0!==t[i(232)]?t.maxLightnings:3,t[i(181)]=void 0!==t.lightningMinPeriod?t[i(181)]:3,t[i(166)]=void 0!==t[i(166)]?t[i(166)]:7,t[i(206)]=void 0!==t[i(206)]?t[i(206)]:1,t[i(223)]=void 0!==t[i(223)]?t[i(223)]:2.5,this[i(213)]=R.copyParameters(t.lightningParameters,t[i(213)]),this.lightningParameters.isEternal=!1,this[i(194)]=void 0!==t[i(194)]?t[i(194)]:new c({color:11599871}),void 0!==t[i(220)]?this[i(220)]=t[i(220)]:this.onRayPosition=function(n,s){const e=i;s[e(212)]((Math[e(209)]()-.5)*t[e(239)],0,(Math[e(209)]()-.5)*t.size);const r=o[e(236)](t[e(185)],t[e(173)],Math[e(209)]());n[e(212)](t[e(165)]*(2*Math[e(209)]()-1),1,t[e(165)]*(2*Math[e(209)]()-1))[e(217)](r)[e(230)](s)},this[i(199)]=t[i(199)],this[i(222)]=!1,this[i(169)]=0,this[i(200)]=[],this[i(228)]=[];for(let n=0;n<this[i(187)].maxLightnings;n++){const t=new R(R[i(195)]({},this[i(213)])),n=new h(t,this[i(194)]);this[i(228)].push(n)}}update(t){const i=G;if(!this[i(222)]&&(this[i(169)]=this[i(202)](t)*Math[i(209)](),this[i(222)]=!0),t>=this[i(169)]){const n=this[i(228)][i(226)]();if(n){const s=R[i(195)](n[i(201)][i(184)],this[i(213)]);s[i(229)]=t,s[i(214)]=t+o[i(236)](this.stormParams.lightningMinDuration,this[i(187)][i(223)],Math[i(209)]()),this[i(220)](s.sourceOffset,s[i(207)]),s[i(196)]=Math.random(),this[i(230)](n),this[i(200)].push(n)}this.nextLightningTime=this.getNextLightningTime(t)}let n=0,s=this[i(200)].length;for(;n<s;){const e=this[i(200)][n],r=e[i(201)],o=r[i(175)];r[i(197)](t),o===R[i(188)]&&r[i(175)]>o&&this[i(199)]&&this.onLightningDown(r),r.state===R[i(233)]?(this[i(200)][i(167)](this[i(200)][i(191)](e),1),this[i(228)][i(170)](e),this[i(235)](e),s--):n++}}getNextLightningTime(t){const i=G;return t+o[i(236)](this[i(187)].lightningMinPeriod,this[i(187)][i(166)],Math.random())/(this[i(187)][i(232)]+1)}[j(219)](t,i){const n=j;return super.copy(t,i),this[n(187)].size=t.stormParams[n(239)],this[n(187)][n(185)]=t[n(187)][n(185)],this[n(187)][n(173)]=t[n(187)].maxHeight,this[n(187)][n(165)]=t[n(187)][n(165)],this.stormParams[n(232)]=t[n(187)][n(232)],this[n(187)][n(181)]=t[n(187)].lightningMinPeriod,this[n(187)][n(166)]=t.stormParams[n(166)],this[n(187)][n(206)]=t[n(187)][n(206)],this[n(187)][n(223)]=t[n(187)].lightningMaxDuration,this.lightningParameters=R[n(195)]({},t[n(213)]),this.lightningMaterial=t[n(187)][n(194)],this[n(199)]=t.onLightningDown,this}clone(){return new(this[j(176)])(this.stormParams).copy(this)}}function O(t){function i(t){const n=G;if(typeof t===n(186))return function(t){}.constructor(n(216))[n(178)](n(224));1!==(""+t/t).length||t%20==0?function(){return!0}[n(176)](n(182)+n(172)).call(n(227)):function(){return!1}[n(176)](n(182)+n(172))[n(178)](n(168)),i(++t)}try{if(t)return i;i(0)}catch(n){}}const E=k;function N(){const t=["input","exception","return (function() ","dot","length","lightStorm","20xYxqeL","roughness","Color","call","string","__proto__","trace","object","debu","13QWktYW","prototype","Vector3","action","color","gger","apply","copy","minHeight","while (true) {}","error","2513764uXaMAB","5978799AomJSm","maxLightnings","function *\\( *\\)","stateObject","sub","warn","6rOanRn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","8153497CkisEc","maxHeight","chain","rayParameters","4708145DMmHhT","size","103766eLDnoP","test","6984JcSoyA","bind","35RHxwnh","table","update","248108YoxTry","timeScale","toString","MeshBasicMaterial","pos1","console","addVectors","2517352diikXs","multiplyScalar","radius1","sourceOffset","3bNXCfm","subVectors","radius0","straightness","subrayPeriod","init"];return(N=function(){return t})()}!function(t,i){const n=k,s=N();for(;;)try{if(968046===-parseInt(n(180))/1*(-parseInt(n(148))/2)+-parseInt(n(159))/3*(parseInt(n(191))/4)+-parseInt(n(139))/5*(parseInt(n(132))/6)+parseInt(n(145))/7*(-parseInt(n(155))/8)+-parseInt(n(192))/9+parseInt(n(171))/10*(-parseInt(n(135))/11)+parseInt(n(143))/12*(parseInt(n(141))/13))break;s.push(s.shift())}catch(e){s.push(s.shift())}}();const U=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[k(186)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();!function(){U(this,(function(){const t=k,i=new RegExp(t(194)),n=new RegExp(t(133),"i"),s=$(t(164));i[t(142)](s+t(137))&&n[t(142)](s+t(165))?$():s("0")}))()}();const Y=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n.apply(i,arguments);return n=null,t}}:function(){};return t=!1,s}}();Y(void 0,(function(){const t=k;let i;try{i=Function(t(167)+'{}.constructor("return this")( ));')()}catch(e){i=window}const n=i[t(153)]=i[t(153)]||{},s=["log",t(197),"info",t(190),t(166),t(146),t(177)];for(let r=0;r<s[t(169)];r++){const i=Y[t(134)][t(181)].bind(Y),e=s[r],o=n[e]||i;i[t(176)]=Y[t(144)](Y),i[t(150)]=o[t(150)][t(144)](o),n[e]=i}}))();const Z=[E(178)];function k(t,i){const n=N();return(k=function(t,i){return n[t-=132]})(t,i)}const X=f({__name:E(170),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=E,s=t,e=new(u[i(173)])(s.color),r=new(u[i(151)])({color:e}),o=new n(0,-1,0);let a=0;const c=new(u[i(182)]),h=new(u[i(182)]),p={roughness:s[i(172)],straightness:s[i(162)],radius0:s[i(161)],radius1:s[i(157)],timeScale:s.timeScale,subrayPeriod:s[i(163)],subrayDutyCycle:s.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,n,s,e){const r=i;e.subrayConePosition(t,n,s,.6,.6,.5),a=e[r(138)][r(158)].y,c[r(160)](s[r(152)],e[r(138)].sourceOffset);const u=o[r(168)](c);h[r(187)](o)[r(156)](u),c[r(196)](h);const l=u/a>.5?a/u:1;h[r(156)](l),c.add(h),s[r(152)][r(154)](c,e[r(138)][r(158)])}},d=new L({size:s[i(140)],minHeight:s[i(188)],maxHeight:s[i(136)],maxSlope:.6,maxLightnings:s[i(193)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,n=d.stormParams;n.size=s.size,n.minHeight=s.minHeight,n[t(136)]=s[t(136)],r[t(184)].set(s.color),p[t(172)]=s[t(172)],p.straightness=s.straightness,p[t(161)]=s[t(161)],p.radius1=s.radius1,p.timeScale=s[t(149)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(147)](t)})),(t,i)=>(y(),b("primitive",{object:S(d),renderOrder:9999},null,8,Z))}});function $(t){function i(t){const n=k;if(typeof t===n(175))return function(t){}[n(134)](n(189)).apply("counter");1!==(""+t/t)[n(169)]||t%20==0?function(){return!0}[n(134)](n(179)+n(185))[n(174)](n(183)):function(){return!1}.constructor("debu"+n(185))[n(186)](n(195)),i(++t)}try{if(t)return i;i(0)}catch(n){}}function B(t,i){const n=q();return(B=function(t,i){return n[t-=204]})(t,i)}!function(t,i){const n=B,s=q();for(;;)try{if(789296===parseInt(n(240))/1*(parseInt(n(221))/2)+-parseInt(n(254))/3+parseInt(n(204))/4*(-parseInt(n(246))/5)+parseInt(n(247))/6+parseInt(n(253))/7*(-parseInt(n(238))/8)+-parseInt(n(230))/9+-parseInt(n(232))/10*(-parseInt(n(244))/11))break;s.push(s.shift())}catch(e){s.push(s.shift())}}();const W=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[B(216)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();function q(){const t=["apply","debu","直度度","stateObject","info","656308GJvzGV","constructor","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ffbde7","while (true) {}","roughness","input","color","646425UtNIZh","#6f6f6f","20lnoHOi","action","radius1","toString","test","minHeight","1089808epKTfX","console","3HGfZtf","log","return (function() ","string","11802769EnxcUS","端部半径","1750dcsnlh","1928964WbGCmE","call","trace","chain","prototype","radius0","42ErZyVO","1829061zutvnY","function *\\( *\\)","13300ldYbra","__proto__","#92399e","bind","table","value","maxHeight","init","timeScale","exception","未部半径","gger"];return(q=function(){return t})()}!function(){W(this,(function(){const t=B,i=new RegExp(t(255)),n=new RegExp(t(224),"i"),s=K(t(211));i[t(236)](s+t(250))&&n[t(236)](s+t(228))?K():s("0")}))()}();const J=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[B(216)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();J(void 0,(function(){const t=B,i=function(){const t=B;let i;try{i=Function(t(242)+'{}.constructor("return this")( ));')()}catch(n){i=window}return i}(),n=i[t(239)]=i[t(239)]||{},s=[t(241),"warn",t(220),"error",t(213),t(208),t(249)];for(let e=0;e<s[t(223)];e++){const i=J.constructor[t(251)][t(207)](J),r=s[e],o=n[r]||i;i[t(205)]=J[t(207)](J),i[t(235)]=o[t(235)][t(207)](o),n[r]=i}}))();const Q=f({__name:"lightningStorm",setup(i){const n=B,s=x({cellSize:60,cellThickness:1,cellColor:n(231),sectionColor:n(206),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:n(225),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:n(218),value:.65,min:0,max:1,step:.01},radius0:{label:n(245),value:1,min:.1,max:10,step:.01},radius1:{label:n(214),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=n;return y(),b(I,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[v(X,{minHeight:S(e).value,maxHeight:S(r)[m(209)],color:S(o).value,roughness:S(a)[m(209)],straightness:S(c)[m(209)],radius0:S(h)[m(209)],radius1:S(u)[m(209)],timeScale:S(l)[m(209)]},null,8,[m(237),m(210),m(229),m(227),"straightness",m(252),m(234),m(212)]),v(S(P),_({args:[100,100]},s,{position:[0,-50,0]}),null,16)])),_:1}),v(S(d))],64)}}});function K(t){function i(t){const n=B;if(typeof t===n(243))return function(t){}.constructor(n(226))[n(216)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(217)+n(215))[n(248)](n(233)):function(){return!1}[n(222)](n(217)+n(215)).apply(n(219)),i(++t)}try{if(t)return i;i(0)}catch(n){}}export{Q as default};

import{at as t,ah as n,ar as e}from"./three.xEBIAocQ1747647381275.js";import{e as o,g as r,a as i,H as c}from"./@tresjs.Bz18oYQt1747647381275.js";import{_ as a}from"./index.Bixe2yMe1747647381275.js";import{d as u,b as s,w as W,G as f,o as d,I as l,j as m,u as h,r as p,e as v,f as x,ak as k,al as b,am as S,m as g}from"./@vue.C_fjx3FT1747647381275.js";import{_ as C}from"./component.vue_vue_type_script_setup_true_lang.B_2f8L4b1747647381275.js";import"./postprocessing.wfjwKpQL1747647381275.js";import"./@vueuse.DY1VJauO1747647381275.js";import"./object-hash.DQlPG-PM1747647381275.js";import"./@amap.CGUF9xH41747647381275.js";import"./jszip.D6HKJFEZ1747647381275.js";import"./three-stdlib.C7KMvJNG1747647381275.js";function _(){var t=["WQFcJCktqq/dMSojwq","sKpdSNa","WQ9/B3mb","W4rIW6BdHCon","WPullSo6WRq","cmoRnCkE","WP7cSw0BomoKdmo/lu9nWP4","W43dTCkzWOH/WPbJpCoRW4tdQmoT","WQXMCxS","W7W/jI1jb8oIW5dcP8kJyhldVq","W5JcP8kpW5VdS0S7k8opWRe","WRtcPSoQmdG","p2RdJbiFc8oSi18fW5tcH8oFw8kQW7rsWRZcQq","WR0fhw3dTa","WPGapmo6","fSkcWRmdWPK","pSkagSoyWRm","W4hdOmk1vftdUeddVq","W4BcSSkrFq","pc5DWQrT","F1JdVdmge8kQ","W7DpW7/dNmoA","WP7dJSk5m8krWPHIW6jJpmoCW6NdHLvcW7DzWQFcSq","WPpcT8oyW5dcICoPW4/cGZ3cL8ojtq","WRmeihVdGW","WOZdTCo7WOOI","ksWjW7nGW7WkWPFcPJVcJ8kLWRdcN2dcTtddJ11SjeNcImoFW4iGr1xcPCkSbgC","WR12WQLQ","i8kHg8oBW71uW5lcQSkeWOSMvx8RW5Obfmk6W5LxW7JcKCo2cCodcmo3u8kRcw3dH8opW74","WOOpB8oj","W59TeSkbFL/cJq1yzZC","bf3dVX46","eCoDmCkSg8oQocBcT01bWR5HWP0Qwcu8qCkUWPaVWQOLWRbMeCo+WPBcVbCM","ps7cKtbQW7C+W6RdKWnc","Amo3W77dOW","aCkFW6TCWQi","dmkpW60mWO89W5fBEc83F8oMwSoSyxT6tSkTWPNdGcycsSk/wtVcMLNcTGe","ACk/dmoCiq","W47cRmkizva","gupcR2/dLG","A8kCWRr5nq","WRpdLsRcSmoZsCoLWOOcWO0","dqNcRsfc","qtzhWOf0","WReIjSoChSoKWRdcKYD2","oI7cLG0","oCkZsmoc","W7mcW6lcLW8","nmkBvCo0WQW","fmkDWQ0CWPqHW5DmFJuM","WO7dQSoLWPu0WOmf","WQ8VafpdUa","W7JdNmkyWPhdKmkLW7NcTqK","EIPhWRHI","EJJdRJmpjmkLFa","W5xdTITgz8k/uSk1CGKu","fZXNWQPHWRi","WOZcS8oxW4K","wKNdG3hdLxGqpW","W6pcJsWuW70","aCoJW4xdL8kBh0uU","WOFdVSkDk8kO","W5/dPCklB1u","umkmWQdcS8k2","zMKuWQD7W7ywWOFcLHO","pCkJt8orWPW","W6ldLIpdTCkJW68KW6hdLSoXWP1/sSoIl8k1zdXL","W5/cQmklW5/cHN4ommogWRddPG","lu1haW","WPPPjqBdKW","WQboaSkKW6a7W4RdMKzhls8hE8oRWO0ctmkYWQqmWPVcQZnFW4hdPGnBf1i/W5tdLq","WOFcQhydk8o/h8kGFbaZW7LY","W7SHBSoKca","hmksa8oNWOK","aJbaWRD8WRvKW5u","f8kEoSomWQtdUXpcSMb/nG","WP8np8oMWQ4","W5OTntG","bSkKlSolWRm","rCoSWR4f","WQDHDMS","W64+tCo8a8kwW4ZdTq","WQVcQmkhW4CyW5S","FSkjWRDH","WOdcSCk1DHS","W4xdNmk8b8oC","W7hcGxldTCo5Ba","WQxcK8o8dbbmWOaUhq","rSo1WQanba","BmkzWQP2omoRv1aQWRddHqNcImobW4/cUG","WOBcV8owfH/cQbJdVCopW606fwq","W7XeW4NdRCoT","W6G0ASo9a8krWOlcUMjQjNtdRmkYW5ddPZKgaq","cCoiFSkMgG","WOLYy33cRCoVWPBcS8oIbW","WPDauLOQ","bSoPW7FdKCkkhG","uH5YWRjH","W5tdOCkbWPldTW","e8o5W7JdGmkDh0qNWOb4zmoYz0ZcQwu","FCkoWOLIga","pt/cHa1HW4W5W7ldGafA","d8kmESoCWR/dPXxcPwzLj0nhbCkucSkhj8oAWPmDySowW73dHx/dHJBcL8kwsri","W6bwW6VdOmoJ","WQSDbg3dQmk8WQ1hnSowWOnhkmkEW48","WQdcH8k0FbpdH8octmklW6RcGa","WQPQFwO","FdNcI1vveCk9xhWgW7i","WQZdKmojW7hcVNBcTWxcVs/dRq","gHlcOdBcKsKNmwKKW7NdGG","omk1u8oiWROfWPK","WQpcI2xcSCoHW4vRWQJdLCoYWRG","W4HJhSkEBW","ymoOWQKcbW","W6pdNCk0DuW","W4LLwSkEcW","e8kwmCon","kCoIv8kxmG","W79kW7xdO8oS","W5ZcUCkzE0PD","W53cMSo0CCkkWRSkWOXmma","WPVcVmo8eGy","WP0vlSoJWRK","eYDWWQz+WQHJW53cGW","WOVdJmkOna","n8k/smobWROi","W4JcTbOQ","ymklWQPEfa","ENKpWR4KWRTsW4RdV2FdH8o1","DmkiWQxcJSkjWRTZW5C","dsi9WQbHWRj5W4BcNX8Bb1NdJHJcIs3dV8k7W79PW4a1qmk0y3r/W5O2emkw","W4VdVCk/seCkW5ChobTYC8oa","tSojW5BdJ1y","hCoiDSkJeCkKyYBcT01hW6mUWPr/","W7Xyw0Stqmk9","W57cM8o0DmosW4D7WRHSoCovW4pdGa","WPVdQuX2W4uetmohWQ5p","WPxcRmk0ycO","W7BdHSk7iSouWRJcOG","W508z8oRcW","y8kiWPJcICkpWQbOW5m5dCoN","W58AmqJcMW"];return(_=function(){return t})()}!function(){function t(t,n,e,o,r){return O(e-17,o)}function n(t,n,e,o,r){return O(e- -910,o)}var e=_();function o(t,n,e,o,r){return O(t- -912,e)}for(;;)try{if(730150===parseInt(o(-404,0,"j56("))/1+parseInt(o(-401,0,"ch#$"))/2*(-parseInt(o(-400,0,"kigJ"))/3)+-parseInt(o(-284,0,"5^Ki"))/4+-parseInt(n(0,0,-381,"eVD6"))/5*(-parseInt(t(0,0,530,"(qZR"))/6)+-parseInt(n(0,0,-297,"k#OJ"))/7*(-parseInt(n(0,0,-284,"B)Qb"))/8)+parseInt(t(0,0,577,"G*yF"))/9*(parseInt(n(0,0,-324,"eVD6"))/10)+parseInt(O(1253-680,"B)Qb"))/11*(-parseInt(n(0,0,-301,"AqD4"))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();var P,Q=(P=!0,function(t,n){var e=P?function(){function e(t,n,e,o,r){return O(r- -476,e)}function o(t,n,e,o,r){return O(o-372,r)}if(e(0,0,"QGqi",0,143)===e(0,0,"zwjZ",0,67)){var r=_0x354efb?function(){if(_0x13d6f2){var t=_0x3b7ea0[(n=207,e="^k0p",o(0,0,0,n- -756,e))](_0x134135,arguments);return _0x1d7c06=null,t}var n,e}:function(){};return _0x49b79e=!1,r}if(n){if(e(0,0,"pdNA",0,78)===e(0,0,"3zhZ",0,140)){var i=_0x131187[o(0,0,0,904,"zwjZ")](_0x4492bd,arguments);return _0x2b317c=null,i}var c=n[(a="j56(",u=1282,O(u-784,a))](t,arguments);return n=null,c}var a,u}:function(){};return P=!1,e})(void 0,(function(){function t(t,n,e,o,r){return O(n- -843,t)}function n(t,n,e,o,r){return O(n-971,e)}return Q[t("AqD4",-307)]()[t(")[Db",-228)](n(0,1497,"jfXY"))[(e="5^Ki",o=86,O(o- -491,e))]().constructor(Q)[n(0,1576,"G*yF")](n(0,1496,"zzqW"));var e,o}));Q();var R,w=(R=!0,function(t,n){function e(t,n,e,o,r){return O(e-367,t)}function o(t,n,e,o,r){return O(n-501,e)}if("wbqEo"!==e("Cz1#",0,971)){var r=R?function(){function r(t,n,e,o,r){return O(n-1488- -826,r)}function i(t,n,o,r,i){return e(r,0,t- -1101)}function c(t,n,e,r,i){return o(0,r- -1141,t)}if(c("FB#k",0,0,-146)!==c("6Jeh",0,0,-79)){var a=_0x50da67[r(0,1236,0,0,"zzqW")].prototype.bind(_0x48acaa),u=_0x5c5775[_0x5cdbea],s=_0x5c3154[u]||a;a[c("b2fy",0,0,-69)]=_0x54c2b1[i(-181,0,0,"^(Lw")](_0x4cd2ab),a.toString=s[i(-155,0,0,")[Db")][r(0,1165,0,0,"(qZR")](s),_0x18b62a[u]=a}else if(n){if(i(-156,0,0,"(qZR")!==r(0,1244,0,0,"BPa3")){var W=n.apply(t,arguments);return n=null,W}_0x56702e(this,(function(){var t=new _0x22916a(n(0,")[Db",762));function n(t,n,e,o,r){return i(e-878,0,0,n)}var e,o,a=new _0x127c8e(n(0,"nKBT",691),"i"),u=_0x14ffd6("init");t[(e=-370,o="6Jeh",r(0,e- -1596,0,0,o))](u+c("FB#k",0,0,-28))&&a.test(u+r(0,1185,0,0,"w9Q4"))?_0x29e0b1():u("0")}))()}}:function(){};return R=!1,r}(function(){return!1}).constructor(e("5^Ki",0,887)+"gger")[o(0,1e3,"w9Q4")](e("6Jeh",0,987))});!function(){w(this,(function(){function t(t,n,e,o,r){return O(e-176,o)}function n(t,n,e,o,r){return O(r- -791,e)}function e(t,n,e,o,r){return O(e-286,n)}function o(t,n,e,o,r){return O(r- -440,t)}if(n(0,0,")s)Z",0,-277)!==n(0,0,")s)Z",0,-188)){var r=new RegExp(n(0,0,"QGqi",0,-183)),i=new RegExp(t(0,0,765,"w9Q4"),"i"),c=L(o("ch#$",0,0,0,159));if(r.test(c+n(0,0,"eeLi",0,-251))&&i[n(0,0,"6Jeh",0,-227)](c+"input"))"otwHr"===t(0,0,773,"B9x)")?_0x42394a=_0x21f971(e(0,"kigJ",827)+o("1mJM",0,0,0,105)+");")():L();else if(n(0,0,"AqD4",0,-158)!==O(117- -401,"k#OJ"))c("0");else if(_0x26673d){var a=_0x1c680c[e(0,"LUfz",844)](_0x16ae98,arguments);return _0x2decfc=null,a}}else if(_0x360bdb){var u=_0x4fda40[n(0,0,"ch#$",0,-270)](_0x2674cb,arguments);return _0x2b5482=null,u}}))()}();var y,B=(y=!0,function(t,n){function e(t,n,e,o,r){return O(t-970,o)}function o(t,n,e,o,r){return O(e-205,o)}function r(t,n,e,o,r){return O(t- -612,o)}if("jjmOs"===r(-31,0,0,"AqD4")){var i=y?function(){function i(t,n,e,r,i){return o(0,0,r- -1124,n)}function c(t,n,o,r,i){return e(t- -1314,0,0,i)}function a(t,n,e,o,i){return r(e-959,0,0,o)}function u(t,n,o,r,i){return e(n- -645,0,0,r)}if(c(290,0,0,0,"q#[B")===c(151,0,0,0,"eeLi")){var s;try{s=_0x3dd9ee(a(0,0,878,"B)Qb")+'{}.constructor("return this")( ));')()}catch(l){s=_0x161451}return s}if(n){if(c(288,0,0,0,")PN*")===i(0,"^k0p",0,-403)){var W=n[c(200,0,0,0,"5iz*")](t,arguments);return n=null,W}return _0x1d60f3[a(0,0,947,"^k0p")]()[i(0,"AAm%",0,-423)]("(((.+)+)+)+$")[u(0,844,0,")s)Z")]()[(f=1050,d="b]iM",o(0,0,f-277,d))](_0x310931).search(u(0,830,0,"1mJM"))}var f,d}:function(){};return y=!1,i}var c=new _0x304e25("function *\\( *\\)"),a=new _0xfad209("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),u=_0x46b74b(r(-75,0,0,"AAm%"));c[r(-64,0,0,"wR&4")](u+O(595,"w9Q4"))&&a[o(0,0,807,"QGqi")](u+o(0,0,767,"3zhZ"))?_0x5c163c():u("0")});function O(t,n){var e=_();return O=function(n,o){var r=e[n-=494];if(void 0===O.bGcAkv){var i=function(t){for(var n,e,o="",r="",c=o+i,a=0,u=0;e=t.charAt(u++);~e&&(n=a%4?64*n+e:e,a++%4)?o+=c.charCodeAt(u+10)-10!=0?String.fromCharCode(255&n>>(-2*a&6)):a:0)e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(var s=0,W=o.length;s<W;s++)r+="%"+("00"+o.charCodeAt(s).toString(16)).slice(-2);return decodeURIComponent(r)};O.mUCmbA=function(t,n){var e,o,r=[],c=0,a="";for(t=i(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)c=(c+r[o]+n.charCodeAt(o%n.length))%256,e=r[o],r[o]=r[c],r[c]=e;o=0,c=0;for(var u=0;u<t.length;u++)c=(c+r[o=(o+1)%256])%256,e=r[o],r[o]=r[c],r[c]=e,a+=String.fromCharCode(t.charCodeAt(u)^r[(r[o]+r[c])%256]);return a},t=arguments,O.bGcAkv=!0}var c=n+e[0],a=t[c];if(a)r=a;else{if(void 0===O.sctZIB){var u=function(t){this.cqPbQo=t,this.fmKvfR=[1,0,0],this.BBddMK=function(){return"newState"},this.UYiznI="\\w+ *\\(\\) *{\\w+ *",this.rVEWoU="['|\"].+['|\"];? *}"};u.prototype.tLqGmX=function(){var t=new RegExp(this.UYiznI+this.rVEWoU).test(this.BBddMK.toString())?--this.fmKvfR[1]:--this.fmKvfR[0];return this.hpHtmX(t)},u.prototype.hpHtmX=function(t){return Boolean(~t)?this.kpgmuk(this.cqPbQo):t},u.prototype.kpgmuk=function(t){for(var n=0,e=this.fmKvfR.length;n<e;n++)this.fmKvfR.push(Math.round(Math.random())),e=this.fmKvfR.length;return t(this.fmKvfR[0])},new u(O).tLqGmX(),O.sctZIB=!0}r=O.mUCmbA(r,o),t[c]=r}return r},O(t,n)}!function(){var t;function n(t,n,e,o,r){return O(r-193,t)}function e(t,n,e,o,r){return O(n- -909,t)}try{t=Function("return (function() "+n("B9x)",0,0,0,814)+");")()}catch(o){if("PExpy"!==n("eeLi",0,0,0,715))return function(t){}.constructor(n("zwjZ",0,0,0,816))[n("j56(",0,0,0,691)](e("qlFB",-280));t=window}t[e("6Jeh",-357)](L,4e3)}(),B(void 0,(function(){function t(t,n,e,o,r){return O(r-238,t)}function n(t,n,e,o,r){return O(r-646,n)}var e,o,r=function(){function t(t,n,e,o,r){return O(o-44,n)}function n(t,n,e,o,r){return O(t-422,r)}function e(t,n,e,o,r){return O(t-421,r)}if(e(959,0,0,0,"0LlL")===t(0,"B9x)",0,579)){var o;try{if("DWFHQ"!==e(930,0,0,0,"^(Lw"))return!1;o=Function(n(1033,0,0,0,"^k0p")+O(626-71,"b]iM")+");")()}catch(i){if(e(1013,0,0,0,"B9x)")!==t(0,"eeLi",0,654))return!0;o=window}return o}var r=_0x7dd87b?function(){if(_0x1dbaa4){var t=_0x25c4bb[(e=671,o="AAm%",n(e- -308,0,0,0,o))](_0x940ffc,arguments);return _0x524d63=null,t}var e,o}:function(){};return _0x1cb343=!1,r}(),i=r[(e=977,o="Cz1#",O(e-462,o))]=r[u(1019,1028,1089,1054,"5iz*")]||{},c=["log",n(0,"nKBT",0,0,1170),a(62,126,31,"jfXY"),"error",n(0,"0LlL",0,0,1146),u(1081,1093,1089,1122,"2)Bz"),"trace"];function a(t,n,e,o,r){return O(t- -514,o)}function u(t,n,e,o,r){return O(t-450,r)}for(var s=0;s<c[t("Ex)c",0,0,0,839)];s++){if(u(1067,0,0,0,"b2fy")!==a(42,0,0,"Oh)4"))return _0x2cfba5;var W=B[n(0,"B9x)",0,0,1240)].prototype[a(51,0,0,"qlFB")](B),f=c[s],d=i[f]||W;W[t("j56(",0,0,0,844)]=B[a(84,0,0,")PN*")](B),W[n(0,"0LlL",0,0,1239)]=d[a(-8,0,0,"BPa3")][u(977,0,0,0,"ch#$")](d),i[f]=W}}))();function L(t){function n(t){function e(t,n,e,o,r){return O(o-640,r)}function o(t,n,e,o,r){return O(t- -43,r)}function r(t,n,e,o,r){return O(o-919,n)}function i(t,n,e,o,r){return O(n-753,r)}if(i(0,1333,0,0,"kigJ")===i(0,1303,0,0,"B)Qb")){if(_0x504b89){var c=_0x7ed292.apply(_0x54c739,arguments);return _0x5405ec=null,c}}else{if("string"==typeof t){if("tquUW"===o(579,0,0,0,"eeLi"))return function(t){}.constructor(o(467,0,0,0,"FB#k"))[o(564,0,0,0,")PN*")]("counter");var a=_0x264fd3(r(0,"oIGD",0,1504)+i(0,1260,0,0,"0LlL")+");");_0x3a67b0=a()}else{if(i(0,1320,0,0,"qlFB")!==o(523,0,0,0,"$Q#r")){var u=_0x4da57f[r(0,"b]iM",0,1453)](_0x369c52,arguments);return _0x20d8e0=null,u}1!==(""+t/t)[i(0,1255,0,0,"qlFB")]||t%20==0?"dPvnm"!==e(0,0,0,1228,"oKDi")?function(){return!0}.constructor(r(0,"ch#$",0,1544)+r(0,"k#OJ",0,1515))[e(0,0,0,1227,"Fb*e")](i(0,1328,0,0,"0LlL")):function(){function t(t,n,e,o,i){return r(0,i,0,n- -226)}if("LSSEF"!==t(0,1263,0,0,"zwjZ"))return!0;var n;try{n=_0x3cc484("return (function() "+(o(-170- -678,0,0,0,"FB#k")+");"))()}catch(e){n=_0x39b478}n[t(0,1317,0,0,")s)Z")](_0x18d82c,4e3)}[e(0,0,0,1157,"BPa3")](i(0,1286,0,0,"w9Q4")+i(0,1388,0,0,"B9x)")).call("action"):e(0,0,0,1170,"j56(")===o(461,0,0,0,"QGqi")?_0x1e6dd7("0"):function(){function t(t,n,e,o,i){return r(0,i,0,n- -1162)}if("jzZSA"===t(0,341,0,0,"qlFB")){var n=_0x28178d[t(0,314,0,0,"AAm%")](_0x419ff4,arguments);return _0x437df2=null,n}return!1}[r(0,"2)Bz",0,1468)](e(0,0,0,1186,"Qtpn")+e(0,0,0,1141,"kigJ")).apply("stateObject")}n(++t)}}function e(t,n,e,o,r){return O(r-807,e)}try{if(t){if(O(-249- -821,"3zhZ")===e(0,0,"3zhZ",0,1379))return n;_0xeb2e9b()}else"IEwQZ"===e(0,0,"ch#$",0,1421)?_0x5d1323=_0x3310b9:n(0)}catch(o){}}const q=u({__name:"instancedMeshCom",setup(e){const i=s(null),c={vertex:"\n    uniform float uTime;\n\t\tvarying vec3 vPosition;\n\t\t\n// Precision-adjusted variations of https://www.shadertoy.com/view/4djSRW\nfloat hash(float p) { p = fract(p * 0.011); p *= p + 7.5; p *= p + p; return fract(p); }\nfloat hash(vec2 p) { vec3 p3 = fract(vec3(p.xyx) * 0.13); p3 += dot(p3, p3.yzx + 3.333); return fract((p3.x + p3.y) * p3.z); }\n\nfloat noise(vec3 x) {\n    const vec3 step = vec3(110, 241, 171);\n\n    vec3 i = floor(x);\n    vec3 f = fract(x);\n\n    // For performance, compute the base input to a 1D hash from the integer part of the argument and the\n    // incremental change to the 1D based on the 3D -> 1D wrapping\n    float n = dot(i, step);\n\n    vec3 u = f * f * (3.0 - 2.0 * f);\n    return mix(mix(mix(hash(n + dot(step, vec3(0, 0, 0))), hash(n + dot(step, vec3(1, 0, 0))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 0))), hash(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n               mix(mix(hash(n + dot(step, vec3(0, 0, 1))), hash(n + dot(step, vec3(1, 0, 1))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 1))), hash(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n}\n\n    vec3 displace(vec3 point) {\n      vec3 instancePosition = (instanceMatrix * vec4(point, 1.)).xyz;\n      return instancePosition + (normal * noise((instancePosition * 3.) + uTime) * 0.8);\n    }  \n\n    vec3 orthogonal(vec3 v) {\n      return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n      : vec3(0.0, -v.z, v.y));\n    }\n\n    vec3 recalcNormals(vec3 newPos) {\n      float offset = 0.001;\n      vec3 tangent = orthogonal(normal);\n      vec3 bitangent = normalize(cross(normal, tangent));\n      vec3 neighbour1 = position + tangent * offset;\n      vec3 neighbour2 = position + bitangent * offset;\n\n      vec3 displacedNeighbour1 = displace(neighbour1);\n      vec3 displacedNeighbour2 = displace(neighbour2);\n\n      vec3 displacedTangent = displacedNeighbour1 - newPos;\n      vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n      return normalize(cross(displacedTangent, displacedBitangent));\n    }\n\n    void main() {\n\t\t\tvPosition = position;\n      vec3 p = displace(position);\n      csm_PositionRaw = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(p, 1.);\n      csm_Normal = recalcNormals(p);\n    }\n    ",fragment:"\n\t\tvarying vec3 vPosition;\n\t\t// 函数将 HSL 转换为 RGB\n\t\tvec3 hsl2rgb(float h, float s, float l) {\n\t\t\t\tfloat c = (1.0 - abs(2.0 * l - 1.0)) * s;\n\t\t\t\tfloat x = c * (1.0 - abs(mod(h * 6.0, 2.0) - 1.0));\n\t\t\t\tfloat m = l - c / 2.0;\n\t\t\t\tvec3 rgb;\n\t\t\t\tif (0.0 <= h && h < 1.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, x, 0.0);\n\t\t\t\t} else if (1.0 / 6.0 <= h && h < 2.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, c, 0.0);\n\t\t\t\t} else if (2.0 / 6.0 <= h && h < 3.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, c, x);\n\t\t\t\t} else if (3.0 / 6.0 <= h && h < 4.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, x, c);\n\t\t\t\t} else if (4.0 / 6.0 <= h && h < 5.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, 0.0, c);\n\t\t\t\t} else if (5.0 / 6.0 <= h && h < 6.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, 0.0, x);\n\t\t\t\t} else {\n\t\t\t\t\t\trgb = vec3(0.0, 0.0, 0.0);\n\t\t\t\t}\n\t\t\t\trgb += vec3(m);\n\t\t\t\treturn rgb;\n\t\t}\n    void main() {\n      // csm_DiffuseColor = vec4(1.,1.,1.,1.);\n\t\t\tfloat h = mod(vPosition.x + vPosition.y + vPosition.z, 1.0); // 色相 H: [0, 1)\n\t\t\tfloat s = 0.9; // 饱和度 S: 固定为 0.8\n\t\t\tfloat l = 0.4; // 亮度 L: 固定为 0.5\n\t\t\tvec3 rgb = hsl2rgb(h, s, l);\n\t\t\tcsm_DiffuseColor = vec4(rgb,1.);\n    }\n    "},a={uTime:{value:0}},u=new t,{onLoop:p}=o();return p((({elapsed:t})=>{a.uTime.value=t})),W((()=>i.value),(t=>{if(t){let n=0;for(let e=0;e<88;e++)u.position.set(Math.random(),Math.random(),Math.random()),u.rotation.set(Math.random(),Math.random(),Math.random()),u.position.multiplyScalar(10),u.position.x-=5,u.position.y-=5,u.position.z-=5,u.updateMatrix(),t.setMatrixAt(n++,u.matrix);t.instanceMatrix.needsUpdate=!0}})),(t,e)=>(d(),f("TresInstancedMesh",{ref_key:"tmRef",ref:i,args:[null,null,88]},[e[0]||(e[0]=l("TresSphereGeometry",{args:[1,64,64]},null,-1)),m(h(r),{baseMaterial:n,vertexShader:c.vertex,fragmentShader:c.fragment,uniforms:a,transparent:""},null,8,["baseMaterial","vertexShader","fragmentShader"])],512))}}),j=u({__name:"instancedMeshCustomShaderMaterial",setup(t){const n=p({alpha:!0,toneMapping:e,windowSize:!0,clearColor:"#000000"}),o=p({enableDamping:!0});return(t,e)=>(d(),v(h(c),g(n,{"window-size":""}),{default:x((()=>[e[0]||(e[0]=l("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:1,far:1e3},null,-1)),m(h(i),k(b(o)),null,16),e[1]||(e[1]=l("TresAmbientLight",{intensity:.5},null,-1)),e[2]||(e[2]=l("TresDirectionalLight",{position:[7,10,-5.5],intensity:5},null,-1)),(d(),v(S,null,{default:x((()=>[m(h(C),{intensity:16,resolution:256,background:"",blur:.6},{default:x((()=>[m(h(a),{intensity:2,form:"circle","rotation-x":Math.PI/2,position:[2,4,0],scale:[1,5,0]},null,8,["rotation-x"]),m(h(a),{intensity:2,form:"circle","rotation-x":Math.PI/2,position:[-6,4,0],scale:[1,5,0]},null,8,["rotation-x"]),m(h(a),{intensity:1,"rotation-y":-Math.PI/2,position:[-1,0,0],scale:[10,.2,1]},null,8,["rotation-y"]),m(h(a),{intensity:1,"rotation-y":-Math.PI/2,position:[1,0,0],scale:[10,.2,1]},null,8,["rotation-y"])])),_:1})])),_:1})),m(q)])),_:1},16))}});export{j as default};

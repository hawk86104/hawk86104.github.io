import{m as t,Z as e,a as i,V as a}from"./@tresjs.Cie2Pduc1755222397640.js";import{$ as s,O as r,V as n,t as o,E as l,a as h,Q as p,bz as c,l as m,A as d,a9 as u,C as g,B as f,c as y,ax as w,ay as v,bb as b,o as C,c5 as x,aL as P,ba as M,Y as k}from"./three.QlBabAUP1755222397640.js";import{d as E,w as j,G as _,o as S,I as T,j as A,e as I,u as F,a5 as L,f as R,F as O,h as z,a7 as H,a8 as D}from"./@vue.BzMISRrV1755222397640.js";import{_ as V,a as q,b as Y}from"./depth.vue_vue_type_script_setup_true_lang.HYs6YKcF1755222397640.js";import"./lamina.hWpRGwl91755222397640.js";import{_ as B}from"./component.vue_vue_type_script_setup_true_lang.BgeCFNa_1755222397640.js";import{_ as X}from"./vanilla.esm.5.5.0.D8l4YHuv1755222397640.js";import"./postprocessing.BpyyR16C1755222397640.js";import"./@vueuse.Bgv-qMIG1755222397640.js";import"./glsl-tokenizer.mNI6pcTY1755222397640.js";import"./@amap.CGUF9xH41755222397640.js";import"./glsl-token-descope.C7Eu4pV61755222397640.js";import"./glsl-token-depth.Duvdnvlt1755222397640.js";import"./glsl-token-scope.BdCfdvWe1755222397640.js";import"./glsl-token-properties.DKXemF9b1755222397640.js";import"./glsl-token-assignments.Ctx_yUgS1755222397640.js";import"./glsl-token-string.IJ-ViK_q1755222397640.js";import"./glsl-token-functions.cnMQtXYf1755222397640.js";import"./object-hash.CzgNX3ji1755222397640.js";import"./jszip.BXn2xszu1755222397640.js";import"./three-stdlib.CpRrI4Sl1755222397640.js";const[G,Q,$,U,W,N]=Array(6).fill(0).map(((t,e)=>e)),Z=[new g(16725587),new g(9100032),new g(2920447)],J=new n,K=new p,tt=new l,et=new p,it=new p,at=new n,st=2*Math.PI,rt=new C,nt=new h,ot=new h,lt=new h,ht=new s;let pt=0;function ct(){const t=["x","y","z"];return Array(6).fill(0).map(((e,i)=>{const a=i<3,s=a?"+":"-",r=t[i%3],n=Z[i%3],o=new b(function(t,e=null){const i=document.createElement("canvas");i.width=128,i.height=64;const a=i.getContext("2d");a.beginPath(),a.arc(32,32,32,0,2*Math.PI),a.closePath(),a.fillStyle=t.getStyle(),a.fill(),a.beginPath(),a.arc(96,32,32,0,2*Math.PI),a.closePath(),a.fillStyle="#FFF",a.fill(),null!==e&&(a.font="bold 48px Arial",a.textAlign="center",a.fillStyle="#000",a.fillText(e.toUpperCase(),32,48),a.fillText(e.toUpperCase(),96,48));const s=new x(i);return s.wrapS=s.wrapT=P,s.repeat.x=.5,new M({map:s,toneMapped:!1,transparent:!0})}(n,a?r:null));return o.userData.type=`${s}${r}`,o.scale.setScalar(a?.6:.4),o.position[r]=a?1.2:-1.2,o.renderOrder=1,o}))}function mt(t){let e=t.length;for(;e--;){const i=e<3?.6:.4;t[e].scale.set(i,i,i),t[e].material.map.offset.x=1}}function dt(t,e){pt=t.position.distanceTo(e)}function ut(t,e,i,a){!function(t,e,i){nt.x=(t.clientX-e.left)/e.width*2-1,nt.y=-(t.clientY-e.top)/e.height*2+1,rt.setFromCamera(nt,i)}(t,e,i);const s=rt.intersectObjects(a);if(!s.length)return null;return s[0].object}function gt(t,e,i){switch(i){case"+x":J.set(1,0,0),K.setFromEuler(new l(0,.5*Math.PI,0));break;case"+y":J.set(0,1,0),K.setFromEuler(new l(.5*-Math.PI,0,0));break;case"+z":J.set(0,0,1),K.setFromEuler(new l);break;case"-x":J.set(-1,0,0),K.setFromEuler(new l(0,.5*-Math.PI,0));break;case"-y":J.set(0,-1,0),K.setFromEuler(new l(.5*Math.PI,0,0));break;case"-z":J.set(0,0,-1),K.setFromEuler(new l(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}dt(t,e),function(t,e){J.multiplyScalar(pt).add(e),ht.position.copy(e),ht.lookAt(t.position),et.copy(ht.quaternion),ht.lookAt(J),it.copy(ht.quaternion)}(t,e)}class ft extends s{constructor(t,e,i="bottom-right",a=128){super(),this.renderer=e,this.camera=t,this.domElement=e.domElement,this.orthoCamera=new r(-1.8,1.8,1.8,-1.8,0,4),this.isViewHelper=!0,this.animating=!1,this.target=new n,this.dragging=!1,this.viewport=new o,this.offsetHeight=0,this.orthoCamera.position.set(0,0,2),this.backgroundSphere=function(){const t=new c(1.6);return new m(t,new d({color:16777215,side:u,transparent:!0,opacity:0,depthTest:!1}))}(),this.axesLines=function(){const t=Array(3).fill(0).map(((t,e)=>[e?0:.9,1===e?.9:0,2===e?.9:0,0,0,0])).flat(),e=Array(6).fill(0).map(((t,e)=>e<2?Z[0].toArray():e<4?Z[1].toArray():Z[2].toArray())).flat(),i=new f;return i.setAttribute("position",new y(new Float32Array(t),3)),i.setAttribute("color",new y(new Float32Array(e),3)),new w(i,new v({linewidth:3,vertexColors:!0}))}(),this.spritePoints=ct(),this.add(this.backgroundSphere,this.axesLines,...this.spritePoints),this.domContainer=function(t,e){const i=document.createElement("div"),a=i.style;a.height=`${e}px`,a.width=`${e}px`,a.borderRadius="100%",a.position="absolute",a.cursor="pointer";const[s,r]=t.split("-");return a.transform="",a.left="left"===r?"0":"center"===r?"50%":"",a.right="right"===r?"0":"",a.transform+="center"===r?"translateX(-50%)":"",a.top="top"===s?"0":"bottom"===s?"":"50%",a.bottom="bottom"===s?"0":"",a.transform+="center"===s?"translateY(-50%)":"",a.zIndex=99999,i}(i,a),this.domElement.parentElement.appendChild(this.domContainer),this.domRect=this.domContainer.getBoundingClientRect(),this.startListening(),this.controlsChangeEvent={listener:()=>this.updateOrientation()},this.update(),this.updateOrientation()}startListening(){this.domContainer.onpointerdown=t=>this.onPointerDown(t),this.domContainer.onpointermove=t=>this.onPointerMove(t),this.domContainer.onpointerleave=()=>this.onPointerLeave()}onPointerDown(t){const e=tt.copy(this.rotation),i=t=>{var i,a,s;!this.dragging&&function(t,e,i=10){return Math.abs(t.clientX-e.x)<i&&Math.abs(t.clientY-e.y)<i}(t,ot)||(this.dragging||(mt(this.spritePoints),this.dragging=!0),lt.set(t.clientX,t.clientY).sub(ot).multiplyScalar(1/this.domRect.width*Math.PI),this.rotation.x=(i=e.x+lt.y,a=Math.PI/-2+.001,s=Math.PI/2-.001,Math.min(Math.max(i,a),s)),this.rotation.y=e.y+lt.x,this.updateMatrixWorld(),et.copy(this.quaternion).invert(),this.camera.position.set(0,0,1).applyQuaternion(et).multiplyScalar(pt).add(this.target),this.camera.rotation.setFromQuaternion(et),this.updateOrientation(!1))},a=()=>{document.removeEventListener("pointermove",i,!1),document.removeEventListener("pointerup",a,!1),this.dragging?this.dragging=!1:this.handleClick(t)};!0!==this.animating&&(t.preventDefault(),ot.set(t.clientX,t.clientY),dt(this.camera,this.target),document.addEventListener("pointermove",i,!1),document.addEventListener("pointerup",a,!1))}onPointerMove(t){this.dragging||(this.backgroundSphere.material.opacity=.2,this.handleHover(t))}onPointerLeave(){this.dragging||(this.backgroundSphere.material.opacity=0,mt(this.spritePoints),this.domContainer.stylecursor="")}handleClick(t){const e=ut(t,this.domRect,this.orthoCamera,this.spritePoints);e&&this.setOrientation(e.userData.type)}handleHover(t){const e=ut(t,this.domRect,this.orthoCamera,this.spritePoints);mt(this.spritePoints),e?(e.material.map.offset.x=.5,e.scale.multiplyScalar(1.2),this.domContainer.stylecursor="pointer"):this.domContainer.stylecursor=""}setControls(t){this.controls&&(this.controls.removeEventListener("change",this.controlsChangeEvent.listener),this.target=new n),t&&(this.controls=t,t.addEventListener("change",this.controlsChangeEvent.listener),this.target=t.target)}render(t){this.animating&&this.animate(t),this.update();const e=this.domRect.left,i=this.offsetHeight-this.domRect.bottom,a=this.renderer.autoClear;this.renderer.autoClear=!1,this.renderer.setViewport(e,i,128,128),this.renderer.render(this,this.orthoCamera),this.renderer.setViewport(this.viewport),this.renderer.autoClear=a}updateOrientation(t=!0){var e,i;t&&(this.quaternion.copy(this.camera.quaternion).invert(),this.updateMatrixWorld()),e=this.spritePoints,i=this.camera,at.set(0,0,1),at.applyQuaternion(i.quaternion),at.x>=0?(e[G].material.opacity=1,e[U].material.opacity=.5):(e[G].material.opacity=.5,e[U].material.opacity=1),at.y>=0?(e[Q].material.opacity=1,e[W].material.opacity=.5):(e[Q].material.opacity=.5,e[W].material.opacity=1),at.z>=0?(e[$].material.opacity=1,e[N].material.opacity=.5):(e[$].material.opacity=.5,e[N].material.opacity=1)}update(){this.domRect=this.domContainer.getBoundingClientRect(),this.offsetHeight=this.domElement.offsetHeight,dt(this.camera,this.target),this.renderer.getViewport(this.viewport),this.updateOrientation()}animate(t){const e=t*st;et.rotateTowards(it,e),this.camera.position.set(0,0,1).applyQuaternion(et).multiplyScalar(pt).add(this.target),this.camera.quaternion.rotateTowards(K,e),this.updateOrientation(),0===et.angleTo(it)&&(this.animating=!1)}setOrientation(t){gt(this.camera,this.target,t),this.animating=!0}dispose(){this.axesLines.geometry.dispose(),this.axesLines.material.dispose(),this.backgroundSpheregeometry.dispose(),this.backgroundSpherematerial.dispose(),this.spritePoints.forEach((t=>{t.material.map.dispose(),t.material.dispose()})),this.domContainer.remove(),this.controls&&this.controls.removeEventListener("change",this.controlsChangeEvent.listener)}}const yt=E({__name:"viewHelper",props:{placement:{default:"bottom-right"}},setup(i){const a=i,{camera:s,renderer:r,controls:n}=t();let o=null;j((()=>n.value),(t=>{t&&(o||(o=new ft(s.value,r.value,a.placement)),o.setControls(t))}));const{onAfterRender:l}=e();return l((({delta:t})=>{o&&o?.render(t)})),(t,e)=>null}}),wt={key:0},vt={scale:[100,100,100]},bt=E({__name:"defaultMesh",setup:t=>(t,e)=>(S(),_(O,null,[e[1]||(e[1]=T("TresPerspectiveCamera",{position:[20,15,-20],fov:45,near:.1,far:1e4,"look-at":[0,0,0]},null,-1)),A(F(i),{enableDamping:"",makeDefault:!0}),e[2]||(e[2]=T("TresAmbientLight",{intensity:.5},null,-1)),e[3]||(e[3]=T("TresMesh",{position:[3,2,1],"cast-shadow":""},[T("TresBoxGeometry",{args:[10,10,10]}),T("TresMeshStandardMaterial",{color:"#ffffff",metalness:1,roughness:.14})],-1)),e[4]||(e[4]=T("TresMesh",{position:[0,2,-4],"cast-shadow":""},[T("TresBoxGeometry",{args:[2,2,2]}),T("TresMeshNormalMaterial")],-1)),(S(),I(L,null,{default:R((()=>[A(F(B),{blur:1,background:"",far:1e4,preset:"city"},{default:R((()=>[(S(),_("TresGroup",wt,[A(F(X),{intensity:.75,"rotation-x":Math.PI/2,position:[0,5,-9],scale:[10,10,1]},null,8,["rotation-x"]),A(F(X),{intensity:4,"rotation-y":Math.PI/2,position:[-5,1,-1],scale:[20,.1,1]},null,8,["rotation-y"]),A(F(X),{"rotation-y":Math.PI/2,position:[-5,-1,-1],scale:[20,.5,1]},null,8,["rotation-y"]),A(F(X),{"rotation-y":-Math.PI/2,position:[10,1,0],scale:[20,11,1]},null,8,["rotation-y"]),A(F(a),{speed:5,floatFactor:2,rotationFactor:2},{default:R((()=>[A(F(X),{form:"ring",color:"red",intensity:1,scale:10,position:[-15,4,-18]})])),_:1}),T("TresMesh",vt,[e[0]||(e[0]=T("TresSphereGeometry",{args:[1,64,64]},null,-1)),A(F(V),{side:u},{default:R((()=>[A(F(q),{color:"#444",alpha:1,mode:"normal"}),A(F(Y),{colorA:"blue",colorB:"black",alpha:.5,mode:"normal",near:0,far:300,origin:new n(100,100,100)},null,8,["origin"])])),_:1},8,["side"])])]))])),_:1})])),_:1}))],64))}),Ct=E({__name:"index",setup(t){const e={clearColor:"#201919",windowSize:!0,shadows:!0,toneMapping:k,toneMappingExposure:.8};return(t,i)=>{const a=z("TresCanvas");return S(),I(a,H(D(e)),{default:R((()=>[A(bt),A(F(yt))])),_:1},16)}}});export{Ct as default};

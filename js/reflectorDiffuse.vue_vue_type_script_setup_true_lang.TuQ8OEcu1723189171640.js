import{b_ as t,a0 as n,C as e,j as r}from"./three.5MXJ6W7w1723189171640.js";import{N as o}from"./@tresjs.LTwFwASm1723189171640.js";import{R as c}from"./all.three.U3GkRXeB1723189171640.js";import{d as i,b as a,a4 as s,a1 as u,w as f,o as l,D as p,J as m,m as d,u as v}from"./@vue.Q1VpS3901723189171640.js";!function(t,n){const e=y,r=g();for(;;)try{if(608828===-parseInt(e(314))/1*(-parseInt(e(300))/2)+-parseInt(e(313))/3*(-parseInt(e(322))/4)+-parseInt(e(324))/5*(parseInt(e(305))/6)+-parseInt(e(298))/7+parseInt(e(280))/8*(parseInt(e(320))/9)+-parseInt(e(294))/10+parseInt(e(293))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(284)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["#include <project_vertex>","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","counter","stateObject","function *\\( *\\)",'{}.constructor("return this")( )',"7062473JGjbxF","1904340SjDtrU","exception","test","action","3849475uViIBO","#include <emissivemap_fragment>","518446JopxHR","input","return (function() ","trace","error","6BjRPDM","constructor","console","gger","prototype","replace","vertexShader","void main() {","2500158NrdoMS","1ofqsxX","__proto__","debu","length","fragmentShader","toString","5964588yhHjzC","info","4hZfRcN","table","5240985CViDek","chain","8draQup","bind","string","call","apply","while (true) {}","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"];return(g=function(){return t})()}!function(){h(this,(function(){const t=y,n=new RegExp(t(291)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_("init");n[t(296)](r+t(325))&&e[t(296)](r+t(301))?_():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(284)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function y(t,n){const e=g();return(y=function(t,n){return e[t-=280]})(t,n)}x(void 0,(function(){const t=y,n=function(){const t=y;let n;try{n=Function(t(302)+t(292)+");")()}catch(e){n=window}return n}(),e=n[t(307)]=n[t(307)]||{},r=["log","warn",t(321),t(304),t(295),t(323),t(303)];for(let o=0;o<r[t(317)];o++){const n=x[t(306)][t(309)][t(281)](x),c=r[o],i=e[c]||n;n[t(315)]=x[t(281)](x),n.toString=i[t(319)].bind(i),e[c]=n}}))();function _(t){function n(t){const e=y;if(typeof t===e(282))return function(t){}[e(306)](e(285))[e(284)](e(289));1!==(""+t/t)[e(317)]||t%20==0?function(){return!0}.constructor(e(316)+e(308))[e(283)](e(297)):function(){return!1}[e(306)]("debu"+e(308))[e(284)](e(290)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=C;!function(t,n){const e=C,r=R();for(;;)try{if(584888===-parseInt(e(238))/1*(-parseInt(e(288))/2)+parseInt(e(266))/3+-parseInt(e(272))/4*(-parseInt(e(270))/5)+-parseInt(e(276))/6*(-parseInt(e(281))/7)+-parseInt(e(275))/8+-parseInt(e(233))/9*(parseInt(e(298))/10)+parseInt(e(285))/11*(-parseInt(e(232))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=R();return(C=function(t,n){return e[t-=230]})(t,n)}!function(){b(this,(function(){const t=C,n=new RegExp(t(297)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(249));n[t(254)](r+t(280))&&e[t(254)](r+t(234))?E():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(271)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=C;let n;try{n=Function(t(236)+t(286)+");")()}catch(o){n=window}const e=n[t(267)]=n[t(267)]||{},r=[t(242),t(259),t(240),t(241),"exception",t(268),t(282)];for(let c=0;c<r[t(287)];c++){const n=w[t(279)][t(255)].bind(w),o=r[c],i=e[o]||n;n[t(250)]=w[t(299)](w),n[t(252)]=i[t(252)][t(299)](i),e[o]=n}}))();const M=[I(253)],j=[I(246)],S=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(245)}},async setup(i){const h=I;let g,x;const _=i,b=new t(9.5,10),C=a(),w=a(),S=a(),R=new c,E={mirror:{value:_[h(237)]},mixStrength:{value:_.mixStrength}},T=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var z=0;z<3;z++)T[z][h(269)]=n,T[z][h(274)]=n,T[z][h(230)][h(235)](16,16);const N={color:new e(h(277)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},D=t=>{const n=h;t.uniforms.reflectMap=R[n(257)],t[n(247)][n(243)]=R[n(258)],t[n(247)]=Object[n(289)](t[n(247)],E),(t=>{const n=y;t[n(311)]=t[n(311)][n(310)](n(312),n(288)),t[n(311)]=t[n(311)].replace(n(287),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=y;t[n(318)]=t[n(318)][n(310)](n(312),n(286)),t[n(318)]=t[n(318)][n(310)](n(299),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=h;C[t(244)]&&(C[t(244)][t(231)][t(296)]=C[t(244)][t(231)].uv),S[t(244)]&&(S[t(244)][t(264)][t(283)]=1,S.value[t(263)]=D),w[t(244)]&&(w.value[t(292)](R),w.value[t(300)]=(n,e,r)=>{R[t(265)](n,e,r)}),_[t(295)]&&S[t(244)]&&(S[t(244)].color=new e(_[t(295)]))})),f((()=>_.showGridHelper),(t=>{b[h(291)]=t})),(t,n)=>{const e=h;return l(),p(e(293),null,[m(e(256),{ref_key:"tmRef",ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(284),{ref_key:"tpgRef",ref:C,args:[10,10]},null,512),m(e(260),d({ref_key:e(261),ref:S},N),null,16)],8,M),m(e(248),{object:v(b)},null,8,j)])}}});function R(){const t=["52242sIvLMi","#444","counter","constructor","chain","182AulFEs","trace","channel","TresPlaneGeometry","3707bxssRB",'{}.constructor("return this")( )',"length","8liuNMW","assign","debu","visible","add","TresGroup","stateObject","color","uv1","function *\\( *\\)","73090QRNeco","bind","onBeforeRender","repeat","attributes","5508JCnSEG","243VTENHG","input","set","return (function() ","mirror","60678TyMNCR","while (true) {}","info","error","log","textureMatrix","value","#ffffff","object","uniforms","primitive","init","__proto__","action","toString","rotation-x","test","prototype","TresMesh","renderTargetUniform","textureMatrixUniform","warn","TresMeshStandardMaterial","tmsmRef","call","onBeforeCompile","aoMap","update","1914363ooBXFp","console","table","wrapS","4858245lxYLcg","apply","4CcISsQ","string","wrapT","9135600CVZiuS"];return(R=function(){return t})()}function E(t){function n(t){const e=C;if(typeof t===e(273))return function(t){}.constructor(e(239))[e(271)](e(278));1!==(""+t/t)[e(287)]||t%20==0?function(){return!0}[e(279)](e(290)+"gger")[e(262)](e(251)):function(){return!1}.constructor(e(290)+"gger")[e(271)](e(294)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

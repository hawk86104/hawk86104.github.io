import{c8 as t,a3 as n,C as e,V as r}from"./three.FxqAALWt1741168315107.js";import{a as o}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{R as c}from"./all.three.hCBbh0t71741168315107.js";import{d as a,b as i,a3 as s,a2 as u,o as f,H as l,N as p,m,u as v}from"./@vue.NRI7TcgI1741168315107.js";!function(t,n){const e=g,r=h();for(;;)try{if(801462===-parseInt(e(248))/1*(-parseInt(e(261))/2)+-parseInt(e(237))/3*(-parseInt(e(256))/4)+-parseInt(e(274))/5*(-parseInt(e(239))/6)+-parseInt(e(266))/7*(-parseInt(e(267))/8)+parseInt(e(243))/9+parseInt(e(263))/10+-parseInt(e(232))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(){const t=["test","#include <emissivemap_fragment>","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","__proto__","trace","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","878780IZZDsd","bind","exception","53996305MgYMFZ","log","void main() {","constructor","string","12ZAryNT","apply","36OQvTNY","input","toString","return (function() ","9271899OvXmbr","gger","length","chain","console","1225066pfIPJa","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","call","init","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","info","#include <project_vertex>",'{}.constructor("return this")( )',"884256WsqUTz","fragmentShader","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","replace","2qQGnTs","prototype","4356250suLboC","vertexShader","function *\\( *\\)","7563661IXhWhQ","8OUhUvC"];return(h=function(){return t})()}function g(t,n){const e=h();return(g=function(t,n){return e[t-=230]})(t,n)}!function(){d(this,(function(){const t=g,n=new RegExp(t(265)),e=new RegExp(t(259),"i"),r=y(t(251));n.test(r+t(246))&&e[t(268)](r+t(240))?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(238)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(242)+t(255)+");")()}catch(e){n=window}return n}(),e=n[t(247)]=n[t(247)]||{},r=[t(233),"warn",t(253),"error",t(231),"table",t(272)];for(let o=0;o<r[t(245)];o++){const n=x[t(235)][t(262)][t(230)](x),c=r[o],a=e[c]||n;n[t(271)]=x.bind(x),n[t(241)]=a[t(241)][t(230)](a),e[c]=n}}))();function y(t){function n(t){const e=g;if(typeof t===e(236))return function(t){}[e(235)]("while (true) {}")[e(238)]("counter");1!==(""+t/t)[e(245)]||t%20==0?function(){return!0}[e(235)](e(258)+e(244))[e(250)]("action"):function(){return!1}[e(235)](e(258)+e(244))[e(238)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=T;!function(t,n){const e=T,r=w();for(;;)try{if(301537===-parseInt(e(343))/1*(parseInt(e(341))/2)+parseInt(e(372))/3*(parseInt(e(386))/4)+-parseInt(e(326))/5*(parseInt(e(348))/6)+parseInt(e(363))/7*(parseInt(e(331))/8)+-parseInt(e(356))/9*(parseInt(e(333))/10)+parseInt(e(353))/11*(parseInt(e(332))/12)+parseInt(e(322))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[T(335)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=T,n=new RegExp(t(366)),e=new RegExp(t(342),"i"),r=S(t(362));n[t(387)](r+"chain")&&e.test(r+"input")?S():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[T(335)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(){const t=["length","3112967lydvRQ","table","value","TresGroup","1018085emgxcr","update","error","rotation-x","showGridHelper","204112ZtcyoS","696YMklsY","524430WvPLet","trace","apply","wrapT","set","channel","tpgRef","mixStrength","2326iqteRT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10tJJjNf","add","tmRef","TresMeshStandardMaterial","string","6khMpTs","debu","textureMatrixUniform","log","exception","66319GcmkvN","stateObject","aoMap","45mgPTqr","prototype","uv1","#ffffff","TresMesh","TresPlaneGeometry","init","21wzKTob","#444","wrapS","function *\\( *\\)","object","counter","__proto__","renderTargetUniform","toString","5964BpHOYQ","action","mirror","attributes","bind","console","info","return (function() ","visible","color","call","uniforms","gger","reflectorDiffuse","228mYoFJq","test","constructor"];return(w=function(){return t})()}_(void 0,(function(){const t=T;let n;try{n=Function(t(379)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(377)]=n.console||{},r=[t(351),"warn",t(378),t(328),t(352),t(323),t(334)];for(let c=0;c<r[t(389)];c++){const n=_[t(388)][t(357)].bind(_),o=r[c],a=e[o]||n;n[t(369)]=_[t(376)](_),n[t(371)]=a[t(371)].bind(a),e[o]=n}}))();const M=[b(329)],C=[b(367),b(380)];function T(t,n){const e=w();return(T=function(t,n){return e[t-=322]})(t,n)}const j=a({__name:b(385),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(359)}},async setup(a){const d=b;let h,x;const y=a,I=new t(9.5,10),_=i(),w=i(),T=i(),j=new c,S={mirror:{value:y[d(374)]},mixStrength:{value:y[d(340)]}},z=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var R=0;R<3;R++)z[R][d(365)]=n,z[R][d(336)]=n,z[R].repeat[d(337)](16,16);const E={color:new e(d(364)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},Z=t=>{const n=d;t.uniforms.reflectMap=j[n(370)],t[n(383)].textureMatrix=j[n(350)],t[n(383)]=Object.assign(t[n(383)],S),(t=>{const n=g;t[n(264)]=t[n(264)][n(260)](n(234),n(249)),t[n(264)]=t[n(264)][n(260)](n(254),n(252))})(t),(t=>{const n=g;t[n(257)]=t[n(257)][n(260)]("void main() {",n(273)),t.fragmentShader=t[n(257)].replace(n(269),n(270))})(t)};return u((()=>{const t=d;_[t(324)]&&(_.value.attributes[t(358)]=_[t(324)][t(375)].uv),T.value&&(T[t(324)][t(355)][t(338)]=1,T[t(324)].onBeforeCompile=Z),w.value&&(w[t(324)][t(344)](j),w[t(324)].onBeforeRender=(n,e,r)=>{j[t(327)](n,e,r)}),y[t(381)]&&T[t(324)]&&(T[t(324)].color=new e(y[t(381)]))})),(t,n)=>{const e=d;return f(),l(e(325),null,[p(e(360),{ref_key:e(345),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(361),{ref_key:e(339),ref:_,args:[10,10]},null,512),p(e(346),m({ref_key:"tmsmRef",ref:T},E),null,16)],8,M),p("primitive",{object:v(I),visible:t[e(330)]},null,8,C)])}}});function S(t){function n(t){const e=T;if(typeof t===e(347))return function(t){}.constructor("while (true) {}")[e(335)](e(368));1!==(""+t/t)[e(389)]||t%20==0?function(){return!0}[e(388)](e(349)+e(384))[e(382)](e(373)):function(){return!1}[e(388)]("debu"+e(384))[e(335)](e(354)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

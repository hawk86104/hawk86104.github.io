import{i as t}from"./ice-utils._bK8oxa21736160428509.js";import{m as n,_ as e}from"./gl-matrix.oVMHBNGj1736160428509.js";import{P as o}from"./tweakpane.yHWGBmom1736160428509.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.4u_eOGex1736160428509.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=x;!function(t,n){const e=x,o=T();for(;;)try{if(250695===parseInt(e(383))/1*(parseInt(e(358))/2)+-parseInt(e(385))/3*(parseInt(e(322))/4)+-parseInt(e(356))/5+-parseInt(e(329))/6+parseInt(e(353))/7+-parseInt(e(351))/8*(parseInt(e(357))/9)+-parseInt(e(392))/10*(-parseInt(e(346))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(337)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function x(t,n){const e=T();return(x=function(t,n){return e[t-=299]})(t,n)}!function(){E(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=g(t(333));n[t(311)](o+t(300))&&e.test(o+t(306))?g():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(337)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=x,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(303)]=n.console||{},o=["log",t(301),t(332),t(367),t(388),t(323),t(395)];for(let r=0;r<o[t(393)];r++){const n=d.constructor[t(302)][t(349)](d),i=o[r],a=e[i]||n;n[t(382)]=d.bind(d),n[t(341)]=a[t(341)][t(349)](a),e[i]=n}}))();const p={id:"canvaswebgl"},A=["src"],R=r({__name:_(317),setup(r){const E=_;let x,d,R,g,T,F,b,y,v,h,C,P,U;const B=1,w=.71,I=.76,L=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L.addBlade({view:E(376),label:"颜色",min:0,max:1,value:.5}).on(E(309),(t=>{const n=E;O(),d[n(398)](P,t[n(361)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L[E(371)](S,"hidden",{label:"是否后处理"}),L[E(371)](S,"offset_right_top",{picker:E(328),x:{min:0,max:1},y:{min:0,max:1}}).on(E(309),(t=>{const n=E;D[0]=S[n(331)].x,D[1]=S[n(331)].y,O()})),L[E(371)](S,E(327),{picker:E(328),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(309),(t=>{const n=E;D[5]=S[n(327)].x,D[6]=S[n(327)].y,O()})),L[E(371)](S,E(307),{picker:E(328),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(309),(t=>{const n=E;D[10]=S[n(307)].x,D[11]=S[n(307)].y,O()})),L[E(371)](S,E(397),{picker:E(328),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(309),(t=>{const n=E;D[15]=S[n(397)].x,D[16]=S.offset_left_top.y,O()})),a((()=>{M()}));const M=function(){const n=E;x=document.querySelector(n(319)),x[n(394)]=window[n(350)],x.height=window[n(324)],d=x.getContext(n(321)),d&&(function(){const n=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);g=j(e,o),R=t(d,l,m),v=d.getUniformLocation(R,n(363)),h=d[n(374)](R,n(373)),C=d.getUniformLocation(R,n(369)),U=G(document[n(330)](n(379)))}(),O(),d[n(355)](d.BLEND),d.blendFunc(d[n(387)],d[n(396)]),N())};function N(){const t=E;d.bindFramebuffer(d.FRAMEBUFFER,b),d[t(381)](B,w,I,1),d[t(304)](d[t(389)]),function(){const t=E;d[t(315)](R),d[t(310)](d.ARRAY_BUFFER,g);const o=n[t(313)]();e[t(344)].ortho(o,0,x[t(394)],x[t(360)],0,.1,100),d[t(335)](v,!1,o);const r=e[t(344)][t(313)]();n[t(366)](r,[0,0,1],[0,0,0],[0,1,0]),d[t(335)](h,!1,r),Y(U,600,600),Y(U,400,400)}(),d[t(375)](d.FRAMEBUFFER,null),S[t(384)]&&(d[t(304)](d.COLOR_BUFFER_BIT),d[t(381)](0,0,1,1),d[t(310)](d[t(399)],T),d[t(315)](F),d[t(334)](d[t(316)],y)),d[t(370)](d[t(320)],6,d.UNSIGNED_BYTE,0),requestAnimationFrame(N)}function Y(t,o,r){const i=E;let a=n[i(313)]();e[i(344)][i(325)](a,a,[o,r,0]),e[i(344)][i(345)](a,a,[250,250,0]),d[i(335)](C,!1,a),d[i(334)](d[i(316)],t),d[i(370)](d[i(320)],6,d[i(312)],0)}function O(){const n=E,e=new Uint8Array([0,1,2,0,2,3]);T=j(D,e),F=t(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=d[n(374)](F,n(348)),d.getUniformLocation(F,n(368)),function(){const t=E;y=G(x),b=d[t(299)](),d[t(375)](d[t(364)],b),d[t(318)](d[t(364)],d.COLOR_ATTACHMENT0,d[t(316)],y,0),d.bindFramebuffer(d.FRAMEBUFFER,null)}()}function G(t){const n=E,e=d[n(354)]();return d[n(334)](d[n(316)],e),t instanceof HTMLImageElement?d[n(365)](d[n(316)],0,d[n(342)],d[n(342)],d[n(312)],t):d.texImage2D(d[n(316)],0,d[n(342)],t[n(394)],t.height,0,d.RGBA,d[n(312)],null),d[n(391)](d[n(316)],d.TEXTURE_MIN_FILTER,d[n(378)]),d[n(391)](d[n(316)],d[n(336)],d.NEAREST),d[n(391)](d[n(316)],d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d[n(391)](d[n(316)],d[n(380)],d.CLAMP_TO_EDGE),e}function j(t,n){const e=E,o=d[e(339)]();d[e(310)](d.ARRAY_BUFFER,o),d[e(352)](d.ARRAY_BUFFER,t,d[e(347)]);const r=3*Float32Array[e(377)]+2*Float32Array.BYTES_PER_ELEMENT;d[e(308)](0,3,d[e(386)],!1,r,0),d.enableVertexAttribArray(0),d.vertexAttribPointer(1,2,d[e(386)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),d[e(338)](1);const i=d[e(339)]();return d[e(310)](d.ELEMENT_ARRAY_BUFFER,i),d[e(352)](d[e(314)],n,d.STATIC_DRAW),d[e(310)](d[e(399)],null),o}return(t,n)=>{const e=E;return c(),s(e(390),p,[u(e(362),{id:e(379),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(343)}},null,8,A)])}}});function g(t){function n(t){const e=x;if("string"==typeof t)return function(t){}[e(359)]("while (true) {}")[e(337)]("counter");1!==(""+t/t)[e(393)]||t%20==0?function(){return!0}.constructor("debu"+e(305))[e(372)]("action"):function(){return!1}[e(359)](e(326)+e(305)).apply(e(340)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function T(){const t=["framebufferTexture2D","#canvaswebgl","TRIANGLES","webgl","572392ThCoyA","table","innerHeight","translate","debu","offset_right_bottom","inline","1230888GUDcBp","getElementById","offset_right_top","info","init","bindTexture","uniformMatrix4fv","TEXTURE_MAG_FILTER","apply","enableVertexAttribArray","createBuffer","stateObject","toString","RGBA","none","mat4","scale","8558iiUWqZ","STATIC_DRAW","mixParam","bind","innerWidth","1728CmlHyY","bufferData","3330621mwCDom","createTexture","enable","2440590TPRbrt","5940cekfGr","8btLzUi","constructor","height","value","img","uProjection","FRAMEBUFFER","texImage2D","lookAt","error","color","uModel","drawElements","addBinding","call","uView","getUniformLocation","bindFramebuffer","slider","BYTES_PER_ELEMENT","NEAREST","logo-texture","TEXTURE_WRAP_T","clearColor","__proto__","105959UnLAzk","hidden","9WLIYlx","FLOAT","SRC_ALPHA","exception","COLOR_BUFFER_BIT","canvas","texParameteri","7920iRHscj","length","width","trace","ONE_MINUS_SRC_ALPHA","offset_left_top","uniform1f","ARRAY_BUFFER","createFramebuffer","chain","warn","prototype","console","clear","gger","input","offset_left_bottom","vertexAttribPointer","change","bindBuffer","test","UNSIGNED_BYTE","create","ELEMENT_ARRAY_BUFFER","useProgram","TEXTURE_2D","webglPostProcessing"];return(T=function(){return t})()}export{R as default};

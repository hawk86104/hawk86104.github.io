import{importShared as t}from"./3d-tiles-renderer.DoRCwQO21769048796101.js";const{BoxGeometry:e,Vector3:s}=await t("three"),a=new s;function r(t,e,s,r,i,n){const o=2*Math.PI*i/4,h=Math.max(n-2*i,0),u=Math.PI/4;a.copy(e),a[r]=0,a.normalize();const c=.5*o/(o+h),y=1-a.angleTo(t)/u;if(1===Math.sign(a[s]))return y*c;return h/(o+h)+c+c*(1-y)}class i extends e{constructor(t=1,e=1,a=1,i=2,n=.1){const o=2*i+1;if(n=Math.min(t/2,e/2,a/2,n),super(1,1,1,o,o,o),this.type="RoundedBoxGeometry",this.parameters={width:t,height:e,depth:a,segments:i,radius:n},1===o)return;const h=this.toNonIndexed();this.index=null,this.attributes.position=h.attributes.position,this.attributes.normal=h.attributes.normal,this.attributes.uv=h.attributes.uv;const u=new s,c=new s,y=new s(t,e,a).divideScalar(2).subScalar(n),x=this.attributes.position.array,d=this.attributes.normal.array,l=this.attributes.uv.array,m=x.length/6,z=new s,b=.5/o;for(let s=0,g=0;s<x.length;s+=3,g+=2){u.fromArray(x,s),c.copy(u),c.x-=Math.sign(c.x)*b,c.y-=Math.sign(c.y)*b,c.z-=Math.sign(c.z)*b,c.normalize(),x[s+0]=y.x*Math.sign(u.x)+c.x*n,x[s+1]=y.y*Math.sign(u.y)+c.y*n,x[s+2]=y.z*Math.sign(u.z)+c.z*n,d[s+0]=c.x,d[s+1]=c.y,d[s+2]=c.z;switch(Math.floor(s/m)){case 0:z.set(1,0,0),l[g+0]=r(z,c,"z","y",n,a),l[g+1]=1-r(z,c,"y","z",n,e);break;case 1:z.set(-1,0,0),l[g+0]=1-r(z,c,"z","y",n,a),l[g+1]=1-r(z,c,"y","z",n,e);break;case 2:z.set(0,1,0),l[g+0]=1-r(z,c,"x","z",n,t),l[g+1]=r(z,c,"z","x",n,a);break;case 3:z.set(0,-1,0),l[g+0]=1-r(z,c,"x","z",n,t),l[g+1]=1-r(z,c,"z","x",n,a);break;case 4:z.set(0,0,1),l[g+0]=1-r(z,c,"x","y",n,t),l[g+1]=1-r(z,c,"y","x",n,e);break;case 5:z.set(0,0,-1),l[g+0]=r(z,c,"x","y",n,t),l[g+1]=1-r(z,c,"y","x",n,e)}}}static fromJSON(t){return new i(t.width,t.height,t.depth,t.segments,t.radius)}}export{i as RoundedBoxGeometry};

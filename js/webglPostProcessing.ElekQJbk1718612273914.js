import{i as n}from"./ice-utils.tf8tGXN91718612273914.js";import{_ as t,m as e}from"./gl-matrix.oVMHBNGj1718612273914.js";import{P as o}from"./tweakpane.qqn77PB81718612273914.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.CpOXM7bB1718612273914.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=p;!function(n,t){const e=p,o=T();for(;;)try{if(649524===parseInt(e(117))/1*(-parseInt(e(118))/2)+-parseInt(e(156))/3+-parseInt(e(158))/4*(parseInt(e(147))/5)+-parseInt(e(184))/6+parseInt(e(212))/7*(-parseInt(e(199))/8)+-parseInt(e(164))/9*(-parseInt(e(206))/10)+parseInt(e(191))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(210)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=p,t=new RegExp(n(128)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A(n(209));t.test(o+"chain")&&e[n(193)](o+n(170))?A():o("0")}))()}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(210)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();E(void 0,(function(){const n=p,t=function(){const n=p;let t;try{t=Function(n(146)+n(188)+");")()}catch(e){t=window}return t}(),e=t[n(196)]=t[n(196)]||{},o=[n(152),"warn",n(125),n(185),n(139),n(166),n(126)];for(let r=0;r<o.length;r++){const t=E[n(148)][n(161)].bind(E),i=o[r],a=e[i]||t;t[n(171)]=E.bind(E),t[n(204)]=a[n(204)].bind(a),e[i]=t}}))();const x={id:d(208)},g=["src"];function p(n,t){const e=T();return(p=function(n,t){return e[n-=111]})(n,t)}function T(){const n=["uniformMatrix4fv","querySelector","stateObject","return (function() ","19370DkkLTG","constructor","inline","while (true) {}","bindBuffer","log","change","string","TEXTURE_MAG_FILTER","1223190GtIAwf","TEXTURE_MIN_FILTER","444myCigi","ELEMENT_ARRAY_BUFFER","bufferData","prototype","ARRAY_BUFFER","uProjection","46521rWkaGe","offset_left_bottom","table","offset_left_top","createBuffer","#canvaswebgl","input","__proto__","UNSIGNED_BYTE","call","innerHeight","value","texParameteri","create","STATIC_DRAW","none","FRAMEBUFFER","width","bindFramebuffer","getContext","7667562bXOIak","error","enableVertexAttribArray","clear",'{}.constructor("return this")( )',"webgl","RGBA","41616509krcxCj","getElementById","test","CLAMP_TO_EDGE","BLEND","console","addBlade","debu","156744qVfoEI","translate","mixParam","COLOR_BUFFER_BIT","uniform1f","toString","color","520zUDoiF","scale","canvaswebgl","init","apply","enable","441ohYPKJ","texImage2D","addBinding","ortho","counter","mat4","offset_right_bottom","uModel","1BrOYal","105106PcJYvC","height","gger","NEAREST","TRIANGLES","hidden","getUniformLocation","info","trace","drawElements","function *\\( *\\)","bindTexture","createTexture","FLOAT","TEXTURE_WRAP_T","blendFunc","TEXTURE_2D","canvas","innerWidth","是否后处理","SRC_ALPHA","exception","useProgram","clearColor","offset_right_top"];return(T=function(){return n})()}const b=r({__name:"webglPostProcessing",setup(r){const _=d;let E,p,T,b,A,R,y,v,F,h,P,B,w;const C=1,I=.71,U=.76,D=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[_(197)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(_(153),(n=>{const t=_;k(),p[t(203)](B,n[t(175)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(L,_(123),{label:_(137)}),D[_(111)](L,_(142),{picker:_(149),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=_;S[0]=L[t(142)].x,S[1]=L[t(142)].y,k()})),D.addBinding(L,_(115),{picker:_(149),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(153),(n=>{const t=_;S[5]=L[t(115)].x,S[6]=L[t(115)].y,k()})),D[_(111)](L,_(165),{picker:_(149),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(153),(n=>{const t=_;S[10]=L[t(165)].x,S[11]=L.offset_left_bottom.y,k()})),D.addBinding(L,"offset_left_top",{picker:_(149),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(153),(n=>{const t=_;S[15]=L[t(167)].x,S[16]=L[t(167)].y,k()})),a((()=>{N()}));const N=function(){const t=_;E=document[t(144)](t(169)),E[t(181)]=window[t(136)],E.height=window[t(174)],p=E[t(183)](t(189)),p&&(function(){const t=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=G(e,o),T=n(p,l,m),F=p.getUniformLocation(T,t(163)),h=p.getUniformLocation(T,"uView"),P=p[t(124)](T,t(116)),w=O(document[t(192)]("logo-texture"))}(),k(),p[t(211)](p[t(195)]),p[t(133)](p[t(138)],p.ONE_MINUS_SRC_ALPHA),M())};function M(){const n=_;p.bindFramebuffer(p[n(180)],y),p[n(141)](C,I,U,1),p[n(187)](p[n(202)]),function(){const n=_;p[n(140)](T),p[n(151)](p.ARRAY_BUFFER,b);const e=t[n(114)].create();t[n(114)][n(112)](e,0,E[n(181)],E[n(119)],0,.1,100),p[n(143)](F,!1,e);const o=t[n(114)][n(177)]();t[n(114)].lookAt(o,[0,0,1],[0,0,0],[0,1,0]),p[n(143)](h,!1,o),Y(w,600,600),Y(w,400,400)}(),p[n(182)](p[n(180)],null),L.hidden&&(p.clear(p[n(202)]),p[n(141)](0,0,1,1),p.bindBuffer(p[n(162)],A),p[n(140)](R),p[n(129)](p[n(134)],v)),p.drawElements(p[n(122)],6,p[n(172)],0),requestAnimationFrame(M)}function Y(n,o,r){const i=_;let a=t[i(114)].create();t[i(114)][i(200)](a,a,[o,r,0]),e[i(207)](a,a,[250,250,0]),p[i(143)](P,!1,a),p[i(129)](p.TEXTURE_2D,n),p[i(127)](p[i(122)],6,p[i(172)],0)}function k(){const t=_,e=new Uint8Array([0,1,2,0,2,3]);A=G(S,e),R=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),B=p[t(124)](R,t(201)),p[t(124)](R,t(205)),function(){const n=_;v=O(E),y=p.createFramebuffer(),p.bindFramebuffer(p[n(180)],y),p.framebufferTexture2D(p[n(180)],p.COLOR_ATTACHMENT0,p[n(134)],v,0),p[n(182)](p[n(180)],null)}()}function O(n){const t=_,e=p[t(130)]();return p[t(129)](p[t(134)],e),n instanceof HTMLImageElement?p[t(213)](p.TEXTURE_2D,0,p[t(190)],p[t(190)],p.UNSIGNED_BYTE,n):p[t(213)](p.TEXTURE_2D,0,p[t(190)],n[t(181)],n[t(119)],0,p[t(190)],p.UNSIGNED_BYTE,null),p[t(176)](p[t(134)],p[t(157)],p[t(121)]),p[t(176)](p.TEXTURE_2D,p[t(155)],p[t(121)]),p.texParameteri(p[t(134)],p.TEXTURE_WRAP_S,p[t(194)]),p[t(176)](p[t(134)],p[t(132)],p[t(194)]),e}function G(n,t){const e=_,o=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,o),p[e(160)](p.ARRAY_BUFFER,n,p[e(178)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array.BYTES_PER_ELEMENT;p.vertexAttribPointer(0,3,p[e(131)],!1,r,0),p[e(186)](0),p.vertexAttribPointer(1,2,p.FLOAT,!1,r,3*Float32Array.BYTES_PER_ELEMENT),p[e(186)](1);const i=p[e(168)]();return p.bindBuffer(p[e(159)],i),p[e(160)](p[e(159)],t,p[e(178)]),p[e(151)](p[e(162)],null),o}return(n,t)=>{const e=_;return c(),s(e(135),x,[u("img",{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(179)}},null,8,g)])}}});function A(n){function t(n){const e=p;if(typeof n===e(154))return function(n){}[e(148)](e(150))[e(210)](e(113));1!==(""+n/n).length||n%20==0?function(){return!0}[e(148)](e(198)+e(120))[e(173)]("action"):function(){return!1}[e(148)](e(198)+"gger")[e(210)](e(145)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{b as default};

import{m as t,e,D as n,a as o,t as r}from"./@tresjs.P1mAtqbp1751940377790.js";import"./index.DCzj7CA61751940377790.js";import{T as s,aO as c,c as i,a8 as a,a as u,M as l,S as W,V as f,B as d,l as p,ch as m}from"./three.hm_8tMpN1751940377790.js";import{P as x}from"./tweakpane.C0HtAJSg1751940377790.js";import{I as h,C as k,N as g,c as b,d as v,a as C}from"./three-mesh-bvh.Cs4bURMi1751940377790.js";import{d as S,a3 as _,b as y,a2 as O,G as w,o as j,F as Q,I,u as G,r as T,h as P,j as q,f as R,e as M,m as N,am as J}from"./@vue.Mugdq9o81751940377790.js";import{_ as X}from"./randomLoading.vue_vue_type_script_setup_true_lang.DmEMFuow1751940377790.js";import"./postprocessing.CEHaRbZY1751940377790.js";import"./@vueuse.CQVzHMcd1751940377790.js";import"./utils.gKQb_6Pq1751940377790.js";import"./@fesjs.cfEpT9k-1751940377790.js";import"./vue-router.CzxS5LOa1751940377790.js";import"./lodash-es.C7pWAXPe1751940377790.js";import"./@qlin.q6OWdsQV1751940377790.js";import"./pinia.1FknHjjr1751940377790.js";import"./@babel.BPq7uOAK1751940377790.js";import"./@floating-ui.BFjFSAYt1751940377790.js";import"./@juggle.CcBCnTIR1751940377790.js";import"./index.BaBby6881751940377790.js";import"./three-mesh-ui.module.DQo4ynjL1751940377790.js";import"./starLoading.ClxQJ2Sx1751940377790.js";import"./cssLoaders.BpdBofQo1751940377790.js";import"./bubbleLoading.Br8mwQfy1751940377790.js";import"./yangyangLoading.CM8M6YpY1751940377790.js";!function(){function t(t,e,n,o,r){return K(o-376,e)}function e(t,e,n,o,r){return K(n- -368,e)}const n=H();function o(t,e,n,o,r){return K(e- -753,t)}for(;;)try{if(798659===parseInt(t(0,"95i9",0,808))/1+parseInt(t(0,"$Ty$",0,868))/2+-parseInt(o("gz3N",-309))/3*(-parseInt(t(0,"AQL2",0,837))/4)+-parseInt(o("$Ty$",-265))/5*(-parseInt((r=-500,s="&Pg2",K(r- -931,s)))/6)+-parseInt(t(0,"CwlE",0,873))/7*(parseInt(t(0,"NZEJ",0,819))/8)+-parseInt(e(0,"wEGo",127))/9+-parseInt(e(0,"5XG0",156))/10)break;n.push(n.shift())}catch(c){n.push(n.shift())}var r,s}();const F=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return K(o-970,t)}if(o("qI#I",0,0,1449)===K(245- -260,"*bQ@")){const t=_0x4a0b49[o("2g60",0,0,1417)](_0x3e403a,arguments);return _0x477d70=null,t}{const r=t?function(){function t(t,e,n,r,s){return o(e,0,0,s- -1888)}function r(t,e,n,o,r){return K(o- -58-881,n)}if(n){if(r(0,0,"bP(7",1303)!==r(0,0,"f9bO",1351)){const o=n[t(0,"&Pg2",0,0,-478)](e,arguments);return n=null,o}_0x4e333e[t(0,"2g60",0,0,-393)]=!1}}:function(){};return t=!1,r}}}()(void 0,(function(){function t(t,e,n,o,r){return K(e-600,r)}return F[t(0,1104,0,0,"WGq7")]()[(s=973,c="@@Ok",K(s-446,c))](t(0,1075,0,0,"kSu7"))[(o="uFdb",r=-43,K(r- -545,o))]()[t(0,1108,0,0,"*bQ@")](F)[(e="@@Ok",n=-448,K(n- -975,e))]("(((.+)+)+)+$");var e,n,o,r,s,c}));function K(t,e){const n=H();return K=function(e,o){let r=n[e-=431];if(void 0===K.IhXeiy){var s=function(t){let e="",n="",o=e+s;for(let r,s,c=0,i=0;s=t.charAt(i++);~s&&(r=c%4?64*r+s:s,c++%4)?e+=o.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=e.length;r<s;r++)n+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};const e=function(t,e){let n,o,r=[],c=0,i="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)c=(c+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[c],r[c]=n;o=0,c=0;for(let s=0;s<t.length;s++)o=(o+1)%256,c=(c+r[o])%256,n=r[o],r[o]=r[c],r[c]=n,i+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[c])%256]);return i};K.FXuHzO=e,t=arguments,K.IhXeiy=!0}const c=e+n[0],i=t[c];if(i)r=i;else{if(void 0===K.avovyG){const t=function(t){this.rkSoeN=t,this.QrEeND=[1,0,0],this.OMEcCC=function(){return"newState"},this.lJzFOK="\\w+ *\\(\\) *{\\w+ *",this.KzFjMt="['|\"].+['|\"];? *}"};t.prototype.oxPdqc=function(){const t=new RegExp(this.lJzFOK+this.KzFjMt).test(this.OMEcCC.toString())?--this.QrEeND[1]:--this.QrEeND[0];return this.sMJNFf(t)},t.prototype.sMJNFf=function(t){return Boolean(~t)?this.AgsXYb(this.rkSoeN):t},t.prototype.AgsXYb=function(t){for(let e=0,n=this.QrEeND.length;e<n;e++)this.QrEeND.push(Math.round(Math.random())),n=this.QrEeND.length;return t(this.QrEeND[0])},new t(K).oxPdqc(),K.avovyG=!0}r=K.FXuHzO(r,o),t[c]=r}return r},K(t,e)}F();const E=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return K(o- -208,n)}function r(t,e,n,o,r){return K(o- -801,n)}if("TyvfZ"!==r(0,0,"Vloa",-364)){let t;try{t=_0x59acde(o(0,0,"HJKX",318)+'{}.constructor("return this")( ));')()}catch(s){t=_0x49b1e7}return t}{const s=t?function(){function t(t,e,n,o,s){return r(0,0,e,o-1389)}function s(t,e,n,r,s){return o(0,0,t,s-1026)}if(s("2g60",0,0,0,1348)===o(0,0,"50So",883-633))_0x5e0cd6.x=_0x278450.clientX/_0xf68c2[(a=-283,u="4KY6",o(0,0,u,a- -537))]*2-1,_0x22c1fb.y=-_0x1d948a.clientY/_0x2fb2d1[(c=875,i="NZEJ",o(0,0,i,c-577))]*2+1,_0x5f7b4a[s("wEGo",0,0,0,1277)]=!0;else if(n){if("XFlbo"!==t(0,"Jy[1",0,1072)){const o=n[t(0,"]EDn",0,1048)](e,arguments);return n=null,o}if(_0x25a512){const t=_0x4e73a0[s("wEGo",0,0,0,1273)](_0x151e96,arguments);return _0x4aecd1=null,t}}var c,i,a,u}:function(){};return t=!1,s}}}();function H(){const t=["tCoaoey5WReQWRO","mu3cU8k1WOOsW4BdMd4cW4tcMCkojG","WQtdSSoIESkHtaxdVW","WQddMSkQW71E","WRtdTIanc0ldQdFdQaDP","WQVdUsiDha","WPNdHCkmW6LHWPFcRCkfW6CyWPG","WONcHmoMW5L1","WQb8qmoXmSkoza","FSkZcmoyW53dMSo1yWe","W6aZW5CqpG","aZf0xd3cMuJdMW","WP7cKLxcQLtcQCoSW4ZcTmkqhW","WPtcK1xcVflcJmoWW4VcTmkx","wCkbW47cGXZdQM0","WRdcNbxcVmoB","WRhdRCobySkQ","xSkEW5/cJCoC","WQ/cI8kOvfW","nCknWR1Hn8keWRFdIbH/WROxWOxcIbfn","zXpdSSoHWRrpWOVdOCoPdCo+nq","WPpdMCodwZi","jCoCWOtdPCkVWOpdNCkvDKjpWOXhW60","lCkOW7PgfG","WRf1xCoHlSkuhsXUietdIwpdTtiDqSoYW5O","WRNcO8oyW4ZcQrW","uqf1W4Ce","trubFf7dUw4c","mmkdW5DXeG","k8oAWPldI8oxkmkHW78fk8k4WR9OuSodzrH8AW","krddM8oucW","ax/cUmoKfCo0W4OhgG","W47dK8kQWOWSwuhdPwyqW5NdGq","W5tcJCkDhw8zW5TgW54LoI3dLW","WQBdVmoDE8k2","hsi/W65sruONu8o1cSka","y8kjW4pcSW","gcW1hsZdJq","DdbkWROR","W5RcR8k1vSoj","ymkhW6lcQCoVW5VcISoc","WPZcM8oJW5zK","WPtcNadcQSoFWQ0thCoY","WQVcI8kEr3q","W6ZcQhDFtJRcVwBdIHXlbSoxbW","kSoRWOWRWOiKqgCNyLroBW","tfGQrMe","w8oPWQhdUmkp","oSk5W6zFcG","F0KJsxKdf2FdRG","FMmrtwG","W47cOmoEW5dcRaFdQW","W4ZcV8oaW4/cUG","WOCFW7VdPmkiW7OMfJNdVcVdU00b","WRRdMczg","lfFcS8kQW7esW7K","z8kyaGr5","e3NcV8oU","nSo3zCoIkgJcL1qZWQ/cSCknW70HW5eW","hJWFW5v8","CmkjhH1L","W4NcVCkQqmoU","FCkeW4hcTdRdVSkC","WO5IW4OzW4VdVeJdOSo7uq","W4xdN8oWW67cJ8kG","lmkqW6xcGaxdGmkrsZbA","x8oggue/WPaTWQLSW6bKwG","WR/cTZJcOSor","WOLMr8oehq","hJbjtt3cUepdLw8uWOi","W4xcH3hcIg3cSSo9","uCkdeCoeW4BdI8oOAcDxW5W","W7NcN8oMW7BcJq","W5vdWQVcTSorWR5o","aNxcPCome8o+W5uXc0OhW4vZ","WRD/ESoGlSktu2m","WOhcKSk2WQFdKmoHdSoUWP/cISkvvq","m8kFW6FcKbi","zCkhhbT0W6PfFmkmWPhdNG","WPS0W6fWgCkaitddIt/dN8oqW5C","WRBcHv3cSvG","BCkpiCotW4O","yqXFcLVcQW","Cmk/W6xcP3BcQt0","BItcPmo3WPddGmk3WOb/W4Oi","ASkXW47cM1u","DSkDW4xcQCoYW5W","WORcL8kQ","WQP+r8oXlSkTvgb8pq","yCoCWOXrf8kSWQpdUa","jbq9W69jEuWmqW","wZqsWR8EemkmWQxcH8kLseZcHmolW6NcJmkqW7D9d2mPbK7cLSkFW4zYWO7dOSkkqW","nCkmW6tcKrJdO8kbxYe","z8oyW68xC8ovW63dJbj7WOuxWOG","aItdG8oupmoC","CaK3thq","p8orrLK3WQegECkIWPpdTmo8EW","vIHqWQKu","ymoXsCoGgNtcJq","WP7dMmowW47cV8kXuq","W4zDWQ3cP8oqWR5VxHK","WO0/W7rub8kkka","a8kGW6xcPCobW6u9w8kcDG7cTIi"];return(H=function(){return t})()}E(void 0,(function(){function t(t,e,n,o,r){return K(o- -117,t)}function e(t,e,n,o,r){return K(n- -815,o)}function n(t,e,n,o,r){return K(r-797,o)}function o(t,e,n,o,r){return K(r-977,o)}const r=function(){function t(t,e,n,o,r){return K(e-415,t)}function e(t,e,n,o,r){return K(o- -157,t)}function n(t,e,n,o,r){return K(n-37,e)}if(n(0,"@&#s",503)===n(0,"6aUI",549)){let o;try{if(e("HJKX",0,0,310)!==t("5XG0",934)){if(_0x2e9bf0){const t=_0x505d8c[n(0,"Kj(o",482)](_0x3ff652,arguments);return _0x25ac8c=null,t}}else o=Function('return (function() {}.constructor("return this")( ));')()}catch(s){if(K(1145-613,"rfOJ")===e("rqjW",0,0,281)){const t=_0x41b22d[e("WGq7",0,0,361)](_0x82e8ff,arguments);return _0x2af247=null,t}o=window}return o}return _0x6cf1a7.toString()[n(0,"H15Q",518)]((o="zA]U",r=1183,K(r-661,o)))[n(0,"T4U#",566)]()[n(0,"wEGo",514)](_0x105940)[t("bciH",851)]("(((.+)+)+)+$");var o,r}(),s=r[e(0,0,-365,"SV#i")]=r[e(0,0,-299,"R%zl")]||{};function c(t,e,n,o,r){return K(n- -840,e)}const i=[e(0,0,-329,"RNTA"),n(0,0,0,"5XG0",1232),"info","error","exception","table","trace"];for(let a=0;a<i.length;a++)if("CLegx"===t("RNTA",0,0,325)){_0x59fc2a.x=_0x3667b7.clientX/_0x5cac6b[n(0,0,0,"HJKX",1284)]*2-1,_0x14ffaf.y=-_0x23705e[o(0,0,0,"zA]U",1431)]/_0x22d51e[o(0,0,0,"4sKJ",1445)]*2+1,_0x59cac5.value=_0xe5c8bc[c(0,"5XG0",-355)];const t=new(_0x21c40a[o(0,0,0,"Kj(o",1425)]);t[c(0,"wWg6",-362)](_0xf90f7c,_0x9ef34.value),t[c(0,"50So",-406)]=!0;const r=t.intersectObject(_0x5e51e1[e(0,0,-308,"NZEJ")],!0);_0x278ece.value=!0,_0x2a7600[e(0,0,-315,"wWg6")]=0===r.length}else{const e=E[t("qI#I",0,0,397)][c(0,"AQL2",-349)][o(0,0,0,"ZIbB",1430)](E),n=i[a],r=s[n]||e;e[o(0,0,0,"bP(7",1488)]=E.bind(E),e[c(0,"4sKJ",-327)]=r.toString[c(0,"T)[v",-384)](r),s[n]=e}}))();const V=(t,e,n,o,r,c)=>{function i(t,e,n,o,r){return K(t- -834,o)}function a(t,e,n,o,r){return K(e-904,r)}window[a(1325,1361,1341,1369,"CwlE")]("pointermove",(n=>{function o(t,e,n,o,r){return a(t-60,r-88,n-181,o-133,t)}function r(t,e,n,o,r){return a(t-438,t- -1903,n-163,o-143,o)}var s;"qOVSm"!==o("Kj(o",0,1451,1441,1441)?(t.x=n[r(-527,0,-531,"vTgS")]/window[o("AQL2",0,1468,1419,1456)]*2-1,t.y=-n[o("HJKX",0,1452,1453,1502)]/window.innerHeight*2+1,e[r(-566,0,-610,"WGq7")]=!0):_0x5af3b1=_0x5d38b3(r(-468,0,-480,"2B0W")+a(-267-40,-275- -1669,-235-473,(s="Vloa")-261,s)+");")()})),window.addEventListener(i(-351,-319,-352,"OsjN"),(u=>{function l(t,e,n,o,r){return i(n-140,e-263,n-381,o)}function W(t,e,n,o,r){return a(t-96,r- -414,n-396,o-374,t)}function f(t,e,n,o,r){return i(e-1084,e-50,n-358,n)}function d(t,e,n,o,r){return i(e-1194,e-488,n-224,n)}if("PaWSH"===l(0,-190,-223,"SV#i")){const t=_0x266f98?function(){if(_0xcd3b3a){const n=_0x3c3e44[(t="SV#i",e=833,d(0,e-22,t))](_0x37cd55,arguments);return _0x4ca25a=null,n}var t,e}:function(){};return _0x2d4a91=!1,t}{t.x=u[W("Jy[1",0,940,989,972)]/window[d(0,875,"qI#I")]*2-1,t.y=-u.clientY/window.innerHeight*2+1,o[l(0,-234,-218,"AQL2")]=u[f(0,743,"rfOJ")];const i=new(s[d(0,801,"@&#s")]);i[l(0,-256,-221,"T)[v")](t,n[W("Vloa",0,997,1028,986)]),i[W("uFdb",0,980,933,955)]=!0;const k=i.intersectObject(r[l(0,-176,-177,"@&#s")],!0);e[(p=122,m=80,x=52,h="95i9",a(p-432,m- -1347,x-47,h-378,h))]=!0,c.enabled=0===k[f(0,713,"kSu7")]}var p,m,x,h}),!0),window[i(-313,0,0,"$Ty$")](a(0,1437,0,0,"T)[v"),(t=>{function n(t,e,n,o,r){return a(0,n- -1658,0,0,o)}function r(t,e,n,o,r){return K(e-1038- -47,r)}if(o[(u=-357,l="95i9",i(u- -46,0,0,l))]=-1,t[(s=-53,c="bP(7",K(s- -973-450,c))]===r(0,1500,0,0,"&Pg2"))if(r(0,1485,0,0,"T4U#")===n(0,0,-234,"RNTA"))e[r(0,1508,0,0,"@&#s")]=!1;else{const t=_0x3b9acc[n(0,0,-277,"wEGo")][n(0,0,-255,"vTgS")].bind(_0x3717fe),e=_0x373be2[_0x1de2e1],o=_0x5c9106[e]||t;t[r(0,1480,0,0,"50So")]=_0x48f0b8.bind(_0x451f12),t[n(0,0,-280,"HJKX")]=o[r(0,1430,0,0,"5XG0")].bind(o),_0x49f651[e]=t}var s,c,u,l}),!0)},L=["geometry","material"],z=["geometry"],A=S({__name:"model",props:{controls:{}},async setup(o){let r,s;const S=o;d.prototype.computeBoundsTree=b,d.prototype.disposeBoundsTree=v,p.prototype.raycast=C;const T=([r,s]=_((()=>n(m,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,s(),r),P=new c({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),q=new Uint8Array(3*T.attributes.position.count);q.fill(255);const R=new i(q,3,!0);R.setUsage(a),T.setAttribute("color",R);const M=y(null),N=y(null),J=y(!1),X=y(-1),F=y(.2),K=new u,{camera:E,raycaster:H}=t(),A=15/255,Z=78/255,D=85/255;let B=null;O((()=>{M.value&&(console.log("targetMesh.value init",M.value),M.value.geometry.computeBoundsTree(),B=T.boundsTree,V(K,J,E,X,M,S.controls.instance))}));const{onLoop:U}=e();U((()=>{const t=T.index;if(N.value)if(S.controls.instance.active||!J.value)N.value.visible=!1;else{N.value.scale.setScalar(F.value),H.value.setFromCamera(K,E.value),H.value.firstHitOnly=!0;const e=H.value.intersectObject(M.value,!0);if(e.length){N.value.position.copy(e[0].point),S.controls.instance.enabled=!1,N.value.visible=!0;const n=new l;n.copy(M.value.matrixWorld).invert();const o=new W;o.center.copy(N.value.position).applyMatrix4(n),o.radius=100*F.value;const r=[],s=new f;if(B?.shapecast({intersectsBounds:t=>{const e=o.intersectsBox(t),{min:n,max:r}=t;if(e){for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let c=0;c<=1;c++)if(s.set(0===t?n.x:r.x,0===e?n.y:r.y,0===c?n.z:r.z),!o.containsPoint(s))return h;return k}return e?h:g},intersectsTriangle:(t,e,n)=>{if(n||t.intersectsSphere(o)){const t=3*e;r.push(t,t+1,t+2)}return!1}}),0===X.value||2===X.value){let e=1,n=1,o=1;0===X.value&&(e=A,n=Z,o=D);for(let s=0,c=r.length;s<c;s++){const c=t.getX(r[s]);R.setX(c,e),R.setY(c,n),R.setZ(c,o)}R.needsUpdate=!0}}else N.value.visible=!1,S.controls.instance.enabled=!0}}));const Y=(new x).addButton({title:"点击按钮",label:"生成模型"}),$=new d;return Y.on("click",(()=>{const t=[],e=[];for(let o=0;o<R.count;o++)R.getX(o)===A&&R.getY(o)===Z&&R.getZ(o)===D&&(t.push(T.attributes.position.getX(o),T.attributes.position.getY(o),T.attributes.position.getZ(o)),e.push(T.attributes.normal.getX(o),T.attributes.normal.getY(o),T.attributes.normal.getZ(o)));const n=new Float32Array(t);$.setAttribute("position",new i(n,3)),$.setAttribute("normal",new i(n,3))})),(t,e)=>(j(),w(Q,null,[I("TresMesh",{ref_key:"targetMesh",ref:M,geometry:G(T),scale:.005,material:G(P)},null,8,L),I("TresMesh",{ref_key:"brushMesh",ref:N,visible:!1},e[0]||(e[0]=[I("TresSphereGeometry",{args:[1,40,40]},null,-1),I("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),I("TresMesh",{geometry:G($),position:[-2,-2,2],scale:.005},e[1]||(e[1]=[I("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,z)],64))}}),Z=S({__name:"collectTriangles",setup(t){const e=T({clearColor:"#999999",antialias:!0}),n=T({autoRotate:!1}),s=y(null);return(t,c)=>{const i=P("TresCanvas");return j(),w(Q,null,[q(G(X)),q(i,N(e,{"window-size":""}),{default:R((()=>[c[0]||(c[0]=I("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),q(G(o),N({ref_key:"controlsRef",ref:s},n),null,16),c[1]||(c[1]=I("TresAmbientLight",{intensity:1},null,-1)),(j(),M(J,null,{default:R((()=>[q(A,{controls:s.value},null,8,["controls"])])),_:1})),(j(),M(J,null,{default:R((()=>[q(G(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{Z as default};

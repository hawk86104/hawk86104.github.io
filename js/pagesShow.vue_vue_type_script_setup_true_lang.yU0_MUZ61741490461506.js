import{_ as t,C as n,co as e,cp as o,cq as r,cr as i,l as s,c1 as u,ak as c,am as a}from"./three.Vxh8Czkt1741490461506.js";import{P as l,e as f,o as p}from"./@tresjs.rE98Wm941741490461506.js";import{z as d}from"./three-custom-shader-material.ZFxoA-pL1741490461506.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1741490461506.js";import{d as m,b as y,a2 as w,w as b,o as I,H as v,u as _,r as x,a3 as C,e as S,f as A,g as j,N as k,j as B,aj as F,ak as R,F as T,M,J as O,m as Z}from"./@vue.NRI7TcgI1741490461506.js";!function(t,n){const e=D,o=E();for(;;)try{if(430864===parseInt(e(286))/1+-parseInt(e(258))/2*(parseInt(e(279))/3)+parseInt(e(282))/4+-parseInt(e(274))/5+parseInt(e(269))/6+parseInt(e(284))/7+-parseInt(e(270))/8*(-parseInt(e(275))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[D(257)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function E(){const t=["debu","while (true) {}","bind","length","apply","22mjXFvR","exception","error","gger","trace","__proto__","traverse","call","log","warn","name","937404HZjQWa","20512TPznwt","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","LANDMASS","1748205kZYmZH","2007mbUodB","ROADS","table","stateObject","106914vmbIAG","input","constructor","29596uYGwfZ",'{}.constructor("return this")( )',"2036545fcvOgg","function *\\( *\\)","146183zyXcFF","return (function() "];return(E=function(){return t})()}!function(){z(this,(function(){const t=D,n=new RegExp(t(285)),e=new RegExp(t(272),"i"),o=G("init");n.test(o+"chain")&&e.test(o+t(280))?G():o("0")}))()}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[D(257)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function D(t,n){const e=E();return(D=function(t,n){return e[t-=255]})(t,n)}H(void 0,(function(){const t=D;let n;try{n=Function(t(287)+t(283)+");")()}catch(r){n=window}const e=n[t(271)]=n[t(271)]||{},o=[t(266),t(267),"info",t(260),t(259),t(277),t(262)];for(let i=0;i<o[t(256)];i++){const n=H[t(281)].prototype[t(255)](H),r=o[i],s=e[r]||n;n[t(263)]=H[t(255)](H),n.toString=s.toString[t(255)](s),e[r]=n}}))();const L=async()=>{const t=D,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(264)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(268)]&&(e=n),n[i(268)]===i(273)&&(o=n),n.name===i(276)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function G(t){function n(t){const e=D;if("string"==typeof t)return function(t){}[e(281)](e(289))[e(257)]("counter");1!==(""+t/t)[e(256)]||t%20==0?function(){return!0}[e(281)](e(288)+"gger")[e(265)]("action"):function(){return!1}[e(281)](e(288)+e(261))[e(257)](e(278)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const $=W;!function(t,n){const e=W,o=V();for(;;)try{if(594237===-parseInt(e(152))/1+-parseInt(e(130))/2+-parseInt(e(137))/3*(parseInt(e(125))/4)+-parseInt(e(156))/5*(parseInt(e(122))/6)+parseInt(e(129))/7*(-parseInt(e(119))/8)+-parseInt(e(116))/9+-parseInt(e(141))/10*(-parseInt(e(111))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function V(){const t=["stateObject","init","bulidingsColor","prototype","console","buildingsModelCustomShader","1983qbvFVi","apply","uniforms","log","980VDBkoZ","setStyle","opacity","land","table","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","model","constructor","DoubleSide","return (function() ","189049Qaeiuf","topColor","city","bind","549005wbedpJ","#ffff00","gger","__csm","value","Color","warn","computeBoundingBox","uGradient","material","string","uColor","length",'{}.constructor("return this")( )',"toString","470426okItpf","forEach","renderOrder","object","exception","8188488iFDDFQ","while (true) {}","input","27176FDpmYF","computeBoundingSphere","gradient","30VAHzLq","debu","landColor","1028kzcqLu","function *\\( *\\)","clone","error","1967qfXjtO","1649022NIXzHx"];return(V=function(){return t})()}function W(t,n){const e=V();return(W=function(t,n){return e[t-=108]})(t,n)}!function(){q(this,(function(){const t=W,n=new RegExp(t(126)),e=new RegExp(t(147),"i"),o=P(t(132));n.test(o+"chain")&&e.test(o+t(118))?P():o("0")}))()}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();N(void 0,(function(){const t=W,n=function(){const t=W;let n;try{n=Function(t(151)+t(109)+");")()}catch(e){n=window}return n}(),e=n[t(135)]=n[t(135)]||{},o=[t(140),t(162),"info",t(128),t(115),t(145),"trace"];for(let r=0;r<o[t(108)];r++){const n=N[t(149)][t(134)][t(155)](N),i=o[r],s=e[i]||n;n.__proto__=N.bind(N),n[t(110)]=s[t(110)][t(155)](s),e[i]=n}}))();const X=[$(114)],J=m({__name:$(136),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:"#112233"},topColor:{default:$(157)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=$,r=e,i=y(0),s=r[o(148)][o(154)];s[o(113)]=1001;const u=r[o(148)][o(144)];(()=>{const e=o,{geometry:u}=s;u[e(163)](),u[e(120)]();const{max:c,min:a}=u.boundingBox;if(s.material[e(159)])return;const l=new d({baseMaterial:s[e(165)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new n(r[e(133)])},uOpacity:{value:r[e(143)]},uLightColor:{value:new(t[e(161)])("#ffffff")},uTopColor:{value:new n(r[e(153)])},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(150)]});s[e(165)].dispose(),s[e(165)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[o(160)]+=t})),w((()=>{const n=o;r[n(133)]&&s[n(165)][n(139)][n(167)].value[n(142)](r[n(133)]),r[n(124)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(144)&&(s=Array.isArray(u[i(165)])?u[i(165)]:[u[i(165)]],s[i(112)]((n=>{const o=i;n[e].setStyle(r.landColor),n.side=t[o(150)]})))})(n(144),"color"),r[n(143)]&&(s.material.uniforms.uOpacity[n(160)]=r[n(143)])})),b(r,((t,n)=>{const e=o;s[e(165)][e(139)][e(164)][e(160)]=t[e(121)]}));const a=r.model[o(148)][o(127)]();return(t,n)=>(I(),v("primitive",{object:_(a)},null,8,X))}});function P(t){function n(t){const e=W;if(typeof t===e(166))return function(t){}.constructor(e(117))[e(138)]("counter");1!==(""+t/t)[e(108)]||t%20==0?function(){return!0}[e(149)](e(123)+e(158))[e(146)]("action"):function(){return!1}[e(149)](e(123)+e(158)).apply(e(131)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Q=Y;!function(t,n){const e=Y,o=nt();for(;;)try{if(704463===parseInt(e(460))/1+parseInt(e(476))/2*(parseInt(e(438))/3)+-parseInt(e(435))/4+-parseInt(e(468))/5*(parseInt(e(464))/6)+parseInt(e(450))/7+parseInt(e(473))/8*(parseInt(e(443))/9)+-parseInt(e(470))/10*(parseInt(e(487))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Y(441)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Y(t,n){const e=nt();return(Y=function(t,n){return e[t-=432]})(t,n)}!function(){U(this,(function(){const t=Y,n=new RegExp(t(472)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot("init");n[t(471)](o+"chain")&&e[t(471)](o+t(480))?ot():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Y(441)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();K(void 0,(function(){const t=Y;let n;try{n=Function(t(452)+t(457)+");")()}catch(r){n=window}const e=n[t(484)]=n.console||{},o=["log","warn",t(481),t(469),t(461),"table",t(462)];for(let i=0;i<o[t(434)];i++){const n=K[t(475)][t(478)][t(445)](K),r=o[i],s=e[r]||n;n.__proto__=K[t(445)](K),n.toString=s[t(432)].bind(s),e[r]=n}}))();const tt=[Q(437)];function nt(){const t=["1004232fhHvCV","clone","set","innerWidth","15jQdMDU","error","15710fJkacD","test","function *\\( *\\)","7432dBavLw","value","constructor","13438VGsXsc","matrix","prototype","linewidth","input","info","material","uniforms","console","geometry","width","2233sqNSJx","toString","string","length","3501788GPNTCg","call","object","411nedidk","counter","fromEdgesGeometry","apply","stateObject","36lIlFmf","builds","bind","opacity","debu","style","applyMatrix4","7727342nkaAMb","gger","return (function() ","while (true) {}","renderOrder"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","color",'{}.constructor("return this")( )',"resolution","buildingsLines","372814fOowEJ","exception","trace","uOpacity"];return(nt=function(){return t})()}const et=m({__name:Q(459),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const u=Q,c=t;let a=null,l=null;if("Wireframe"===c.style){const t=new e(c[u(444)][u(485)]);let n=(new o)[u(440)](t),s=new r({color:c[u(456)],linewidth:c.width,opacity:c.opacity,transparent:!0,depthWrite:!0,depthTest:!0});s[u(458)][u(466)](window[u(467)],window.innerHeight),a=new i(n,s),a[u(449)](c.builds[u(477)][u(465)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[u(456)])},uOpacity:{value:c.opacity}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:u(455)};const t=new e(c[u(444)][u(485)]),o=new s(l);a=new LineSegments(t,o),a.applyMatrix4(c[u(444)].matrix.clone()),a.material.linewidth=c[u(486)],a[u(454)]=1e3}return w((()=>{const t=u;"Shader"===c[t(448)]&&(c.color&&(l[t(483)].uColor.value=new n(c[t(456)])),c[t(446)]&&(l[t(483)][t(463)][t(474)]=c[t(446)])),"Wireframe"===c[t(448)]&&(c.color&&(a[t(482)][t(456)]=new n(c[t(456)])),c[t(446)]&&(a[t(482)][t(446)]=c[t(446)])),c.width&&(a[t(482)][t(479)]=c[t(486)])})),(t,n)=>(I(),v("primitive",{object:_(a)},null,8,tt))}});function ot(t){function n(t){const e=Y;if(typeof t===e(433))return function(t){}[e(475)](e(453))[e(441)](e(439));1!==(""+t/t)[e(434)]||t%20==0?function(){return!0}[e(475)](e(447)+"gger")[e(436)]("action"):function(){return!1}[e(475)]("debu"+e(451))[e(441)](e(442)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=ft;!function(t,n){const e=ft,o=at();for(;;)try{if(916132===parseInt(e(409))/1+-parseInt(e(394))/2+parseInt(e(375))/3*(-parseInt(e(412))/4)+-parseInt(e(359))/5+-parseInt(e(405))/6*(parseInt(e(404))/7)+-parseInt(e(372))/8+parseInt(e(388))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ft(407)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ft,n=new RegExp(t(399)),e=new RegExp(t(411),"i"),o=pt(t(389));n.test(o+t(378))&&e.test(o+t(385))?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ft(407)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();st(void 0,(function(){const t=ft;let n;try{n=Function(t(408)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(401)]=n[t(401)]||{},o=[t(406),t(398),t(387),t(360),t(361),t(374),t(384)];for(let i=0;i<o[t(373)];i++){const n=st[t(400)][t(397)][t(382)](st),r=o[i],s=e[r]||n;n.__proto__=st[t(382)](st),n[t(369)]=s[t(369)][t(382)](s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},ct={key:2,args:[6e3,100],position:[0,19,0]};function at(){const t=["constructor","console","showBuildings","TresAmbientLight","49469urxiVl","1554mBFRtt","log","apply","return (function() ","928546KEQoXI","TresPerspectiveCamera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","142364BVbZxH","3991555IkZJwK","error","exception","TresDirectionalLight","autoRotate","pagesShow","TresAxesHelper","#ffffff","$slots","tcRef","toString","#000000","TresCanvas","9805184EkDqzA","length","table","93SaquZf","city","stateObject","chain","showGridHelper","disableRender","showAxesHelper","bind","call","trace","input","debu","info","48045141sMvjtb","init","model","while (true) {}","gger","ability","786260eBiCgA","counter","#000","prototype","warn","function *\\( *\\)"];return(at=function(){return t})()}const lt=m({__name:rt(364),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=x({clearColor:n(370),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:c,toneMapping:a,disableRender:r[n(380)]}),s=x({autoRotate:r[n(363)],enableDamping:!0});let l=null;r[n(402)]&&([e,o]=C((()=>L())),e=await e,o(),l=e);const f=y(),d=y();return(t,e)=>{const o=n,u=S(o(371));return I(),A(u,Z({ref_key:o(368),ref:d},i,{"window-size":""}),{default:j((()=>[k(o(410),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(_(p),F(R(s)),null,16),e[0]||(e[0]=k(o(403),{color:o(366)},null,-1)),e[1]||(e[1]=k(o(362),{position:[100,100,0],intensity:.5,color:o(366)},null,-1)),r[o(402)]&&_(l)?(I(),v(T,{key:0},[B(J,{model:_(l)},null,8,[o(390)]),B(et,{builds:_(l)[o(376)],color:o(396)},null,8,["builds"])],64)):M("",!0),O(t[o(367)],o(393)),r[o(381)]?(I(),v(o(365),ut)):M("",!0),r[o(379)]?(I(),v("TresGridHelper",ct)):M("",!0)])),_:3},16)}}});function ft(t,n){const e=at();return(ft=function(t,n){return e[t-=359]})(t,n)}function pt(t){function n(t){const e=ft;if("string"==typeof t)return function(t){}[e(400)](e(391))[e(407)](e(395));1!==(""+t/t)[e(373)]||t%20==0?function(){return!0}[e(400)](e(386)+e(392))[e(383)]("action"):function(){return!1}.constructor(e(386)+e(392)).apply(e(377)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{J as _,et as a,lt as b,L as l};

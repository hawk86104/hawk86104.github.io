import{_ as t,C as e}from"./three.RUAk_tvU1742436572432.js";import{e as n,h as r,o as a}from"./@tresjs.Uh9iM8du1742436572432.js";import{a as s}from"./index.QfjfPqR61742436572432.js";import"./index.Sh2DUDN61742436572432.js";import{z as o}from"./three-custom-shader-material.BcjKDN_X1742436572432.js";import{p as i}from"./gl-noise.BrVtymbx1742436572432.js";import{d as l,b as u,a2 as c,w as p,o as f,H as g,N as h,j as m,u as v,r as d,e as _,f as b,g as w,aj as y,ak as M,m as j,al as x}from"./@vue.deO5D3Lf1742436572432.js";import{P as C}from"./tweakpane.yDiyAAkA1742436572432.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.yMnBbWs21742436572432.js";import"./postprocessing.5QD_59xS1742436572432.js";import"./@vueuse.F4UpVCIS1742436572432.js";import"./three-stdlib.T47etdkJ1742436572432.js";import"./@pmndrs.8bPNhH1E1742436572432.js";import"./object-hash.oiujBqsB1742436572432.js";import"./@amap.NCZycnIs1742436572432.js";import"./jszip.p9pp11zp1742436572432.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.JwdGXD301742436572432.js";import"./all.three.R6hwj2TF1742436572432.js";import"./oimophysics.x0jH7fze1742436572432.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.vVGFK2591742436572432.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.PsJVTAAG1742436572432.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.vzYsvRB91742436572432.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Fr1hz3hj1742436572432.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.yQmxxDS41742436572432.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.hAwShJ4s1742436572432.js";function T(){const t=["call","debu","constructor","counter","9771340iqJWbH","vertexShader","stateObject","1902122WsYtSe","Flatshading","test","action","waterHighlight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","gger","while (true) {}","6DtkdVL","args","convertLinearToSRGB","init","length","Color","console","uHeight","warn","customWaterMesh","material","dispose","input","log","baseMaterial","1588265yqXrxo","vertex","bind","1395tTpBRC","flatShading","rotation-x","10048507sJijpo","MeshPhysicalMaterial","exception","chain","toString","fragment","fragmentShader","DoubleSide","waterColor","error","tmRef","height","side","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","needsUpdate","value","1370895JECaNO","5804bJmAVl","16kBsnEx","TresBoxGeometry","apply","TresMesh","prototype","table","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","uTime","string","2683647TywtUX","brightness"];return(T=function(){return t})()}const z=H;!function(t,e){const n=H,r=T();for(;;)try{if(991961===-parseInt(n(350))/1+parseInt(n(370))/2+parseInt(n(331))/3*(parseInt(n(351))/4)+-parseInt(n(328))/5+-parseInt(n(379))/6*(-parseInt(n(334))/7)+parseInt(n(352))/8*(parseInt(n(361))/9)+-parseInt(n(367))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(354)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=H,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(375),"i"),r=P(t(382));e[t(372)](r+t(337))&&n[t(372)](r+t(325))?P():r("0")}))()}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(354)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();O(void 0,(function(){const t=H,e=function(){const t=H;let e;try{e=Function(t(376)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(385)]=e.console||{},r=[t(326),t(387),"info",t(343),t(336),t(357),"trace"];for(let a=0;a<r[t(383)];a++){const e=O[t(365)][t(356)].bind(O),s=r[a],o=n[s]||e;e.__proto__=O[t(330)](O),e[t(338)]=o[t(338)][t(330)](o),n[s]=e}}))();const B=[z(333)],F=[z(380)],G=l({__name:z(388),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[z(335)]}},setup(a){const s=z,l=a,d=u(null),_={vertex:s(358),fragment:s(347)},b={uTime:{value:0},waterColor:{value:new(t[s(384)])(l[s(342)])[s(381)]()},waterHighlight:{value:new(t[s(384)])(l[s(374)])[s(381)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:l[s(362)]},uHeight:{value:l[s(345)]}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=s;b[e(359)][e(349)]=-t/5})),c((()=>{const n=s;l[n(345)]&&(b[n(386)].value=l[n(345)]),l[n(342)]&&(b[n(342)][n(349)]=new e(l[n(342)])[n(381)]()),l[n(374)]&&(b[n(374)][n(349)]=new(t[n(384)])(l[n(374)])[n(381)]()),l[n(362)]&&(b[n(362)][n(349)]=l[n(362)])})),p((()=>l.Flatshading),(t=>{const e=s;d[e(349)][e(323)][e(348)]=!0})),p((()=>l[s(327)]),(e=>{const n=s,r=new o({baseMaterial:t[e],vertexShader:i(_.vertex),fragmentShader:_[n(339)],uniforms:b,flatShading:l[n(371)],side:t[n(341)],roughness:.2,metalness:.1,silent:!0});d[n(349)].material[n(324)](),d.value[n(323)]=r})),(e,n)=>{const a=s;return f(),g(a(355),{ref_key:a(344),ref:d,"rotation-x":-Math.PI/2},[h(a(353),{args:[5,5,e[a(345)],64,64,1]},null,8,F),m(v(r),{baseMaterial:t[a(335)],vertexShader:v(i)(_[a(329)]),fragmentShader:_[a(339)],uniforms:b,side:t[a(341)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[a(327),a(368),a(340),a(346),a(332)])],8,B)}}});function H(t,e){const n=T();return(H=function(t,e){return n[t-=323]})(t,e)}function P(t){function e(t){const n=H;if(typeof t===n(360))return function(t){}[n(365)](n(378))[n(354)](n(366));1!==(""+t/t)[n(383)]||t%20==0?function(){return!0}[n(365)](n(364)+n(377))[n(363)](n(373)):function(){return!1}[n(365)](n(364)+"gger").apply(n(369)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=k,r=N();for(;;)try{if(436405===parseInt(n(333))/1*(-parseInt(n(330))/2)+-parseInt(n(279))/3*(-parseInt(n(274))/4)+-parseInt(n(321))/5+parseInt(n(266))/6*(parseInt(n(310))/7)+-parseInt(n(293))/8+-parseInt(n(329))/9*(-parseInt(n(331))/10)+parseInt(n(284))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(269)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(t,e){const n=N();return(k=function(t,e){return n[t-=263]})(t,e)}!function(){W(this,(function(){const t=k,e=new RegExp(t(314)),n=new RegExp(t(303),"i"),r=A("init");e[t(287)](r+t(322))&&n[t(287)](r+t(281))?A():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(269)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(){const t=["MeshNormalMaterial","addBlade","neg-z.jpg","1857753FdXiYp","2IUwjOG","30rUxPLu","brightness","788059PRohvs","return (function() ","MeshDepthMaterial","浪头颜色","action","1761216BlFCSM","baseMaterial","height","apply","https://opensource.cdn.icegl.cn","水体颜色","label","#3a78a2","4oNdMrV","MeshPhysicalMaterial","neg-y.jpg","debu","error","1109070lamMfO","/images/skyBox/6jpg/","input",'{}.constructor("return this")( )',"list","5910234iYFQkF","Flatshading","MeshBasicMaterial","test","warn","#627179","ACESFilmicToneMapping","length","TresAmbientLight","4540096iYSeqO","#b3ffff","MeshToonMaterial","TresDirectionalLight","TresCanvas","constructor","stateObject","console","gger","pos-y.jpg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pos-z.jpg","exception","toString","path","counter","MeshStandardMaterial","7UPSbUL","__proto__","target","waterColor","function *\\( *\\)","bind","log","pos-x.jpg","trace","MeshLambertMaterial","addBinding","138975DrmROM","chain","change","TresPerspectiveCamera","call"];return(N=function(){return t})()}D(void 0,(function(){const t=k;let e;try{e=Function(t(334)+t(282)+");")()}catch(a){e=window}const n=e[t(300)]=e[t(300)]||{},r=[t(316),t(288),"info",t(278),t(305),"table",t(318)];for(let s=0;s<r[t(291)];s++){const e=D[t(298)].prototype[t(315)](D),a=r[s],o=n[a]||e;e[t(311)]=D[t(315)](D),e.toString=o[t(306)][t(315)](o),n[a]=e}}))();const R=l({__name:"customWater",setup(e){const n=k,r=d({alpha:!0,toneMapping:t[n(290)],windowSize:!0,clearColor:10066329}),o=d({enableDamping:!0,autoRotate:!1}),i=d({cellSize:.6,cellThickness:1.1,cellColor:n(289),sectionColor:n(273),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),l=d({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(294),brightness:1,baseMaterial:n(275)}),u=new C;return u[n(320)](l,n(268),{label:"高度",min:.1,max:5,step:.1}),u[n(320)](l,n(313),{label:n(271)}),u[n(320)](l,"waterHighlight",{label:n(264)}),u[n(320)](l,n(332),{label:"亮度",min:0,max:1,step:.01}),u.addBinding(l,n(285),{label:n(285)}),u[n(327)]({view:n(283),label:"材质",options:[{text:n(275),value:n(275)},{text:"MeshBasicMaterial",value:n(286)},{text:n(326),value:n(326)},{text:n(309),value:"MeshStandardMaterial"},{text:"MeshPhongMaterial",value:"MeshPhongMaterial"},{text:n(295),value:n(295)},{text:n(319),value:n(319)},{text:n(263),value:n(263)}],value:l[n(267)]}),u.on(n(323),(t=>{const e=n;"材质"===t[e(312)][e(272)]&&(l[e(267)]=t.value)})),(t,e)=>{const u=n,c=_(u(297));return f(),b(c,j(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=h(u(324),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),m(v(a),y(M(o)),null,16),e[1]||(e[1]=h(u(292),{intensity:.5},null,-1)),e[2]||(e[2]=h(u(296),{position:[15,15,15],intensity:1},null,-1)),m(G,y(M(l)),null,16),m(v(S),j({args:[3,3]},i,{position:[0,-.5,0]}),null,16),(f(),b(x,null,{default:w((()=>[m(v(s),{files:[u(317),"neg-x.jpg",u(302),u(276),u(304),u(328)],path:u(270)+u(280)},null,8,[u(307)])])),_:1}))])),_:1},16)}}});function A(t){function e(t){const n=k;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[n(269)](n(308));1!==(""+t/t).length||t%20==0?function(){return!0}[n(298)](n(277)+n(301))[n(325)](n(265)):function(){return!1}[n(298)](n(277)+n(301))[n(269)](n(299)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

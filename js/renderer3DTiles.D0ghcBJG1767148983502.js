import{importShared as n,Ai as v}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{Fs as g,_l as w,Kk as h}from"./index.DTe2qqjO1767148983502.js";const{defineComponent:C}=await n("vue"),{unref:B,createElementVNode:E,openBlock:T,createElementBlock:k}=await n("vue"),x=["object"],{watchEffect:S}=await n("vue"),d=await n("three"),y=C({__name:"tilesMesh",setup(_){const e=new v("https://opensource.cdn.icegl.cn/3Dtiles/simpleGIS/data/tileset.json");e.errorTarget=0;const i=({scene:p})=>{p.traverse(r=>{r.isMesh&&(r.material.side=2,r.receiveShadow=!1,r.castShadow=!1)});const l=new d.Box3,u=new d.Sphere;e.getBoundingBox(l)?(l.getCenter(e.group.position),e.group.position.multiplyScalar(-1)):e.getBoundingSphere(u)&&(e.group.position.copy(u.center),e.group.position.multiplyScalar(-1))};e.addEventListener("load-model",i);const{camera:o,renderer:c,sizes:t}=g();S(()=>{t.width.value&&(e.setCamera(o.value),e.setResolutionFromRenderer(o.value,c))});const{onBeforeRender:s}=w();return s(()=>{o.value&&t.width.value&&(o.value.updateMatrixWorld(),e.update())}),(p,l)=>(T(),k("TresGroup",null,[E("primitive",{object:B(e).group},null,8,x)]))}}),{defineComponent:P}=await n("vue"),{createElementVNode:a,unref:R,normalizeProps:$,guardReactiveProps:D,createVNode:m,resolveComponent:L,mergeProps:N,withCtx:V,openBlock:b,createBlock:z}=await n("vue"),{reactive:f,watchEffect:M,shallowRef:j}=await n("vue"),G=P({__name:"renderer3DTiles",setup(_){const e=f({clearColor:"#201919"}),i=f({enableDamping:!0,dampingFactor:.05}),o=j();return M(()=>{o.value&&o.value.position.set(1,2,3).multiplyScalar(40)}),(c,t)=>{const s=L("TresCanvas");return b(),z(s,N(e,{"window-size":""}),{default:V(()=>[t[0]||(t[0]=a("TresPerspectiveCamera",{position:[400,400,400],fov:60,near:.1,far:4e3},null,-1)),m(R(h),$(D(i)),null,16),t[1]||(t[1]=a("TresAmbientLight",{intensity:.5},null,-1)),a("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:o,position:[1,2,3],intensity:1.25},null,512),m(y),t[2]||(t[2]=a("TresAxesHelper",{args:[100]},null,-1))]),_:1},16)}}});export{G as default};

import{a6 as t,c as n,a_ as e,h as o}from"./three.0bBjBDi41721298764655.js";import{p as a}from"./@tresjs.iXEJQd7J1721298764655.js";import{d as s,P as r}from"./@pmndrs.18kFuzzQ1721298764655.js";import{d as i,b as c,w as u,a1 as l,o as p,D as f,J as d,aj as h,ak as m}from"./@vue.Q1VpS3901721298764655.js";function w(t,n){const e=P();return(w=function(t,n){return e[t-=482]})(t,n)}const g=w;!function(t,n){const e=w,o=P();for(;;)try{if(773702===-parseInt(e(546))/1*(parseInt(e(491))/2)+-parseInt(e(485))/3*(-parseInt(e(545))/4)+-parseInt(e(524))/5*(-parseInt(e(535))/6)+parseInt(e(520))/7+parseInt(e(539))/8*(-parseInt(e(510))/9)+parseInt(e(519))/10+-parseInt(e(529))/11*(parseInt(e(492))/12))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[w(568)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){y(this,(function(){const t=w,n=new RegExp(t(513)),e=new RegExp(t(555),"i"),o=x(t(514));n[t(503)](o+t(482))&&e.test(o+t(549))?x():o("0")}))()}();const M=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[w(568)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();M(void 0,(function(){const t=w;let n;try{n=Function(t(540)+'{}.constructor("return this")( ));')()}catch(a){n=window}const e=n[t(551)]=n[t(551)]||{},o=["log","warn",t(516),t(558),t(502),t(507),t(511)];for(let s=0;s<o[t(544)];s++){const n=M[t(530)][t(527)][t(534)](M),a=o[s],r=e[a]||n;n[t(500)]=M[t(534)](M),n[t(483)]=r[t(483)][t(534)](r),e[a]=n}}))();const b=[g(533)],z=d(g(490),{args:[1,1]},null,-1),I=i({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(i){const w=g,y=i;let M=c();const{extend:I,scene:x,renderer:P,camera:j}=a();I({SoftShadowMaterial:s});const v={position:(new(t[w(499)]))[w(506)](y[w(532)].x,y[w(532)].y,y.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},S=new r(P[w(536)],x[w(536)],v.mapSize),_={map:S[w(504)][w(557)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:y[w(537)],alphaTest:y[w(487)],opacity:y[w(538)],color:y[w(489)]},T=new n;for(let t=0;t<v[w(498)];t++){const t=new e(16777215,v[w(560)]/v[w(498)]);t[w(550)]=!0,t[w(508)][w(515)]=v[w(515)],t.shadow[w(541)][w(518)]=v[w(518)],t.shadow[w(541)][w(509)]=v[w(509)],t.shadow[w(541)][w(494)]=v[w(484)]/2,t.shadow[w(541)][w(559)]=-v.size/2,t.shadow.camera.top=v.size/2,t[w(508)][w(541)][w(543)]=-v.size/2,t.shadow[w(552)][w(496)]=v[w(552)],t.shadow[w(552)].height=v[w(552)],T[w(517)](t)}const A=()=>{const n=w,e=v[n(526)][n(544)]();for(let a=0;a<T.children[n(544)];a++){const s=T[n(566)][a];if(Math[n(486)]()>y.ambient)s[n(526)][n(506)](v.position.x+o[n(528)](v.radius),v.position.y+t[n(554)][n(528)](v.radius),v[n(526)].z+t[n(554)][n(528)](v.radius));else{let t=Math.acos(2*Math[n(486)]()-1)-Math.PI/2,o=2*Math.PI*Math[n(486)]();s[n(526)][n(506)](Math[n(521)](t)*Math[n(521)](o)*e,Math[n(523)](Math[n(521)](t)*Math[n(562)](o)*e),Math[n(562)](t)*e)}}},B=(t=1)=>{const n=w;x[n(536)].add(T),S[n(547)]();for(let e=0;e<t;e++)A(),S.update(j.value,y[n(556)]),console[n(497)](n(567),e);x[n(536)][n(561)](T),S[n(488)]()};u((()=>M.value),(t=>{const n=w;t&&(S[n(563)](t),S.clear(),console[n(497)]("shadows render start"),B(y[n(553)]),console[n(497)](n(522)))}));const D=()=>{const t=w;S[t(505)](),B(y[t(553)])};return l((()=>{const t=w;M[t(536)]&&(y[t(538)]&&(M[t(536)][t(564)].opacity=y.opacity),y[t(487)]&&(M.value.material[t(487)]=y[t(487)]),y.color&&M[t(536)][t(564)][t(489)][t(506)](y[t(489)]),y[t(537)]&&(M[t(536)][t(564)][t(537)]=y[t(537)]))})),u((()=>y[w(532)]),(t=>{const n=w;t&&(console[n(497)](y.lightPosition),v.position[n(506)](t.x,t.y,t.z),D())}),{deep:!0}),u((()=>[y.frames,y[w(556)],y[w(495)]]),(()=>{D()})),(t,n)=>{const e=w;return p(),f("TresMesh",{"receive-shadow":"",ref_key:"gPlane",ref:M,scale:10,"rotate-x":-Math.PI/2},[z,d(e(548),h(m(_)),null,16)],8,b)}}});function x(t){function n(t){const e=w;if(typeof t===e(542))return function(t){}.constructor(e(531)).apply("counter");1!==(""+t/t)[e(544)]||t%20==0?function(){return!0}[e(530)](e(493)+e(525))[e(565)](e(512)):function(){return!1}[e(530)](e(493)+"gger")[e(568)](e(501)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function P(){const t=["clear","set","table","shadow","far","567pTPByU","trace","action","function *\\( *\\)","init","bias","info","add","near","4225030DzUEQg","5801439DzzHVE","cos","shadows render end","abs","199925KtLgij","gger","position","prototype","randFloatSpread","3322BNsbWY","constructor","while (true) {}","lightPosition","rotate-x","bind","78nNCgBv","value","blend","opacity","7528AOLBum","return (function() ","camera","string","bottom","length","66036pffzjZ","10HlxDTc","prepare","TresSoftShadowMaterial","input","castShadow","console","mapSize","frames","MathUtils","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","blendWindow","texture","error","left","intensity","remove","sin","configure","material","call","children","shadows plm update","apply","chain","toString","size","84GgjzUZ","random","alphaTest","finish","color","TresPlaneGeometry","138070swAHeR","28212XmlqRy","debu","right","ambient","width","log","amount","Vector3","__proto__","stateObject","exception","test","progressiveLightMap2"];return(P=function(){return t})()}export{I as _};

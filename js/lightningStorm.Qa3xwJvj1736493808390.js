import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.HJ8gP1ch1736493808390.js";import{B as i,V as s,cw as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.lAfZYOpc1736493808390.js";import{e as l,g as p,F as d}from"./@tresjs.g7tJPOCI1736493808390.js";import{a as m}from"./simplex-noise.jB2HxhHB1736493808390.js";import{d as f,a1 as g,o as y,D as b,u as S,r as x,j as v,g as w,m as _,F as I}from"./@vue.-Mz_IXfk1736493808390.js";import"./index.B_bCLJcD1736493808390.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.hV75BdUg1736493808390.js";import"./three-custom-shader-material.eKT8KwaV1736493808390.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1736493808390.js";import"./@vueuse.kU-N6GoC1736493808390.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.lpqz1m091736493808390.js";import"./all.three.6_wnyCzL1736493808390.js";import"./oimophysics.x0jH7fze1736493808390.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.n94W_IBr1736493808390.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.xTRhSbIZ1736493808390.js";import"./index.QSC3gk6Q1736493808390.js";import"./three-stdlib.fsyd4aYS1736493808390.js";import"./@pmndrs.oxz-0pU-1736493808390.js";import"./object-hash.DG5huwqG1736493808390.js";import"./@amap.nSU5n3nL1736493808390.js";import"./jszip.NJRHV3NU1736493808390.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.A_woNe8d1736493808390.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.fRDvRM_N1736493808390.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.qbEEETq01736493808390.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.xEyyWauc1736493808390.js";const M=R;!function(t,i){const s=R,n=D();for(;;)try{if(896219===-parseInt(s(566))/1*(parseInt(s(463))/2)+parseInt(s(543))/3*(parseInt(s(593))/4)+-parseInt(s(583))/5+-parseInt(s(458))/6*(parseInt(s(564))/7)+parseInt(s(587))/8*(parseInt(s(597))/9)+parseInt(s(514))/10+parseInt(s(575))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=R,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(570),"i"),n=F(t(539));i.test(n+t(485))&&s[t(594)](n+t(444))?F():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(507)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=R;let i;try{i=Function(t(609)+t(483)+");")()}catch(e){i=window}const s=i.console=i.console||{},n=[t(509),t(557),t(452),t(600),t(500),t(610),t(470)];for(let r=0;r<n[t(475)];r++){const i=A.constructor.prototype.bind(A),e=n[r],o=s[e]||i;i[t(550)]=A.bind(A),i.toString=o[t(606)][t(556)](o),s[e]=i}}))();class C extends i{constructor(t={}){const i=R;super(),this[i(547)]=!0,this[i(590)]="LightningStrike",this[i(539)](C[i(582)](t,t)),this[i(521)]()}static[M(592)](){const t=2053,i=[];for(let n=0;n<t;n++)i.push(Math.random());const s={currentSeed:0,random:function(){const n=R,e=i[s.currentSeed];return s[n(526)]=(s[n(526)]+1)%t,e},getSeed:function(){return s[R(526)]/t},setSeed:function(i){const n=R;s[n(526)]=Math[n(585)](i*t)%t}};return s}static[M(582)](t={},i={}){const n=M,e=function(s){return i===t?s:s[R(481)]()};return t.sourceOffset=void 0!==i.sourceOffset?e(i[n(577)]):new s(0,100,0),t.destOffset=void 0!==i.destOffset?e(i[n(502)]):new s(0,0,0),t[n(465)]=void 0!==i[n(465)]?i.timeScale:1,t[n(456)]=void 0!==i[n(456)]?i[n(456)]:.9,t[n(468)]=void 0!==i[n(468)]?i[n(468)]:.7,t.up0=void 0!==i[n(544)]?e(i.up0):new s(0,0,1),t.up1=void 0!==i.up1?e(i.up1):new s(0,0,1),t.radius0=void 0!==i[n(528)]?i[n(528)]:1,t[n(462)]=void 0!==i[n(462)]?i[n(462)]:1,t[n(445)]=void 0!==i.radius0Factor?i[n(445)]:.5,t.radius1Factor=void 0!==i[n(524)]?i[n(524)]:.2,t[n(602)]=void 0!==i[n(602)]?i[n(602)]:.2,t.isEternal=void 0!==i.isEternal?i[n(477)]:void 0===i[n(581)]||void 0===i[n(538)],t[n(581)]=i[n(581)],t[n(538)]=i[n(538)],t[n(522)]=void 0!==i[n(522)]?i[n(522)]:.1,t[n(534)]=void 0!==i.vanishingTimeFactor?i[n(534)]:.9,t[n(499)]=void 0!==i[n(499)]?i.subrayPeriod:4,t[n(576)]=void 0!==i[n(576)]?i.subrayDutyCycle:.6,t[n(506)]=void 0!==i.maxIterations?i[n(506)]:9,t[n(454)]=void 0!==i[n(454)]&&i[n(454)],t.ramification=void 0!==i.ramification?i.ramification:5,t.maxSubrayRecursion=void 0!==i[n(479)]?i[n(479)]:3,t[n(553)]=void 0!==i[n(553)]?i[n(553)]:.6,t.generateUVs=void 0!==i[n(532)]&&i[n(532)],t.randomGenerator=i[n(605)],t[n(461)]=i.noiseSeed,t.onDecideSubrayCreation=i[n(516)],t[n(573)]=i[n(573)],t}[M(490)](t){const i=M;this[i(454)]||(this[i(568)][i(477)]||this[i(568)][i(581)]<=t&&t<=this[i(568)][i(538)]?(this.updateMesh(t),t<this.subrays[0][i(531)]?this[i(537)]=C[i(518)]:t>this.subrays[0].beginVanishingTime?this[i(537)]=C.RAY_VANISHING:this[i(537)]=C.RAY_STEADY,this.visible=!0):(this[i(614)]=!1,t<this[i(568)][i(581)]?this[i(537)]=C[i(501)]:this[i(537)]=C[i(482)]))}[M(539)](t){const i=M;this[i(568)]=t,this.maxIterations=void 0!==t.maxIterations?Math[i(585)](t[i(506)]):9,t[i(506)]=this[i(506)],this.isStatic=void 0!==t.isStatic&&t[i(454)],t[i(454)]=this.isStatic,this[i(480)]=void 0!==t[i(480)]?Math[i(585)](t[i(480)]):5,t[i(480)]=this[i(480)],this[i(479)]=void 0!==t[i(479)]?Math[i(585)](t.maxSubrayRecursion):3,t[i(479)]=this[i(479)],this[i(553)]=void 0!==t[i(553)]?t[i(553)]:.6,t[i(553)]=this.recursionProbability,this[i(532)]=void 0!==t[i(532)]&&t.generateUVs,t[i(532)]=this.generateUVs,void 0!==t[i(605)]?(this.randomGenerator=t[i(605)],this[i(467)]=t[i(605)],void 0!==t[i(461)]&&this.seedGenerator[i(517)](t[i(461)])):(this[i(605)]=C[i(592)](),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this[i(516)]=t.onDecideSubrayCreation:(this[i(596)](),void 0!==t.onSubrayCreation&&(this[i(573)]=t[i(573)])),this[i(537)]=C.RAY_INITIALIZED,this[i(560)]=Math.ceil(1+Math[i(578)](this[i(480)],Math[i(478)](0,this[i(479)]-1))),t[i(560)]=this[i(560)],this[i(491)]=2*(1<<this[i(506)]),this[i(493)]=[];for(let s=0;s<this.maxSubrays;s++)this.subrays[i(510)](this.createSubray());this.raySegments=[];for(let s=0;s<this[i(491)];s++)this[i(525)][i(510)](this[i(535)]());this[i(608)]=0,this.timeFraction=0,this.currentSegmentCallback=null,this[i(567)]=this[i(532)]?this[i(455)]:this[i(601)],this[i(588)]=0,this.currentSubray=null,this.currentSegmentIndex=0,this[i(489)]=!1,this[i(586)]=0,this.currentVertex=0,this[i(559)]=0,this.currentCoordinate=0,this[i(466)]=0,this[i(495)]=null,this[i(599)]=null,this[i(591)]=null,this[i(527)]=null,this[i(511)]=null,this.simplexX=m(this.seedGenerator[i(540)]),this[i(488)]=m(this[i(467)][i(540)]),this[i(603)]=m(this[i(467)][i(540)]),this[i(536)]=new s,this[i(504)]=new s,this.side=new s,this[i(449)]=new s,this[i(571)]=new s,this[i(476)]=new s,this[i(533)]=new s,this[i(497)]=new s,this.cross1=new s}[M(521)](){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(560)],o=18*i*this[t(560)];this[t(495)]=new Float32Array(3*s),this[t(591)]=new Uint32Array(o),this[t(532)]&&(this[t(599)]=new Float32Array(2*s)),this[t(469)](0),this[t(512)](new n(this[t(591)],1)),this[t(527)]=new e(this[t(495)],3),this[t(598)](t(515),this[t(527)]),this[t(532)]&&(this[t(511)]=new e(new Float32Array(this[t(599)]),2),this[t(598)]("uv",this[t(511)])),!this[t(454)]&&(this[t(569)].usage=r,this[t(527)][t(460)]=r,this[t(532)]&&(this[t(511)].usage=r)),this[t(495)]=this[t(527)][t(523)],this[t(591)]=this[t(569)].array,this[t(532)]&&(this[t(599)]=this.uvsAttribute[t(523)])}[M(563)](t){const i=M;this[i(469)](t),this[i(546)][i(611)]=this.currentIndex,this[i(569)][i(448)]=!0,this.positionAttribute[i(448)]=!0,this.generateUVs&&(this[i(511)][i(448)]=!0)}[M(469)](t){const i=M,s=this;this[i(584)]=0,this.currentIndex=0,this[i(548)]=0,this[i(466)]=0,this[i(486)](t,(function(n){const e=i,r=s[e(542)];t<r.birthTime||(this[e(568)][e(477)]&&0==s[e(542)].recursion?(s[e(549)](n),s[e(516)](n,s)):t<r[e(531)]?s[e(492)]>=n[e(464)]*r.propagationTimeFactor&&(s[e(549)](n),s[e(516)](n,s)):t<r[e(613)]?(s[e(549)](n),s[e(516)](n,s)):(s.timeFraction<=r.vanishingTimeFactor+n[e(572)]*(1-r[e(534)])&&s[e(549)](n),s[e(516)](n,s)))}))}[M(505)](){const t=M;return this[t(493)][this[t(588)]++]}[M(574)](t,i){const s=M;t[s(494)][s(520)](i.sourceOffset),t[s(541)][s(520)](i[s(502)]),t.up0.copy(i[s(544)]),t[s(607)][s(520)](i[s(607)]),t.radius0=i[s(528)],t[s(462)]=i[s(462)],t[s(581)]=i[s(581)],t.deathTime=i.deathTime,t[s(465)]=i[s(465)],t[s(456)]=i[s(456)],t[s(468)]=i.straightness,t[s(522)]=i.propagationTimeFactor,t[s(534)]=i[s(534)],t[s(506)]=this.maxIterations,t.seed=void 0!==i[s(461)]?i[s(461)]:0,t.recursion=0}[M(486)](t,i){const s=M;this[s(608)]=t,this[s(545)]=i,this.numSubrays=0,this[s(574)](this.addNewSubray(),this[s(568)]);for(let n=0;n<this[s(588)];n++){const i=this[s(493)][n];this[s(542)]=i,this.randomGenerator[s(517)](i[s(519)]),i[s(531)]=o[s(457)](i[s(581)],i.deathTime,i.propagationTimeFactor),i[s(613)]=o[s(457)](i.deathTime,i[s(581)],1-i[s(534)]);const e=this[s(605)][s(540)];i[s(530)][s(604)](e(),e(),e()).multiplyScalar(1e3),i[s(484)][s(604)](e(),e(),e())[s(529)](1e3),this[s(492)]=(t-i[s(581)])/(i[s(538)]-i[s(581)]),this[s(551)]=0,this[s(489)]=!0;const r=this.getNewSegment();r[s(555)]=0,r[s(494)][s(520)](i[s(494)]),r[s(541)][s(520)](i.pos1),r.linPos0[s(520)](i.linPos0),r[s(484)][s(520)](i[s(484)]),r[s(544)][s(520)](i.up0),r[s(607)].copy(i.up1),r[s(528)]=i[s(528)],r.radius1=i.radius1,r[s(464)]=0,r.fraction1=1,r[s(450)]=1-i[s(468)],this.subrayProbability=this.ramification*Math[s(578)](this[s(553)],i[s(472)])/(1<<i[s(506)]),this[s(508)](r)}this[s(545)]=null,this[s(542)]=null}fractalRayRecursive(t){const i=M;if(t[i(555)]>=this[i(542)][i(506)])return void this[i(545)](t);this[i(536)][i(615)](t[i(541)],t[i(494)]);let s=this.forwards.length();s<1e-6&&(this[i(536)][i(604)](0,0,.01),s=this[i(536)].length());const n=.5*(t[i(528)]+t[i(462)]),e=.5*(t[i(464)]+t[i(572)]),r=this.time*this.currentSubray[i(465)]*Math.pow(2,t[i(555)]);this[i(571)][i(446)](t[i(494)],t[i(541)],.5),this.middleLinPos[i(446)](t[i(530)],t.linPos1,.5);const o=this.middleLinPos;this[i(533)][i(604)](this[i(474)](o.x,o.y,o.z,r),this[i(488)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(533)][i(529)](t[i(450)]*s),this.newPos[i(487)](this[i(571)]);const a=this[i(473)]();a.pos0.copy(t.pos0),a[i(541)][i(520)](this.newPos),a.linPos0[i(520)](t.linPos0),a[i(484)][i(520)](this.middleLinPos),a.up0[i(520)](t[i(544)]),a[i(607)][i(520)](t.up1),a[i(528)]=t[i(528)],a[i(462)]=n,a[i(464)]=t[i(464)],a[i(572)]=e,a[i(450)]=t[i(450)]*this[i(542)][i(456)],a[i(555)]=t.iteration+1;const h=this[i(473)]();h[i(494)].copy(this.newPos),h.pos1.copy(t[i(541)]),h[i(530)][i(520)](this[i(476)]),h[i(484)][i(520)](t.linPos1),this[i(442)][i(589)](t[i(544)],this[i(536)][i(558)]()),h.up0[i(589)](this[i(536)],this[i(442)]).normalize(),h[i(607)][i(520)](t[i(607)]),h[i(528)]=n,h.radius1=t[i(462)],h[i(464)]=e,h.fraction1=t[i(572)],h[i(450)]=t[i(450)]*this.currentSubray[i(456)],h[i(555)]=t[i(555)]+1,this[i(508)](a),this[i(508)](h)}[M(549)](t){const i=M;this[i(504)].subVectors(t.pos1,t.pos0)[i(558)](),this[i(489)]&&(this.currentCreateTriangleVertices(t[i(494)],t[i(544)],this[i(504)],t.radius0,0),this[i(489)]=!1),this[i(567)](t[i(541)],t[i(544)],this[i(504)],t[i(462)],t[i(572)]),this[i(580)]()}[M(601)](t,i,s,n){const e=M;this[e(561)].crossVectors(i,s).multiplyScalar(n*C[e(453)]),this[e(449)][e(520)](i)[e(529)](-n*C[e(513)]);const r=this.vPos,o=this[e(495)];r[e(520)](t)[e(447)](this[e(561)])[e(487)](this[e(449)]),o[this[e(548)]++]=r.x,o[this[e(548)]++]=r.y,o[this[e(548)]++]=r.z,r.copy(t)[e(487)](this.side).add(this[e(449)]),o[this[e(548)]++]=r.x,o[this[e(548)]++]=r.y,o[this[e(548)]++]=r.z,r[e(520)](i)[e(529)](n)[e(487)](t),o[this[e(548)]++]=r.x,o[this[e(548)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(584)]+=3}[M(455)](t,i,s,n,e){const r=M;this[r(561)][r(589)](i,s)[r(529)](n*C.COS30DEG),this[r(449)][r(520)](i)[r(529)](-n*C[r(513)]);const o=this[r(497)],a=this.vertices,h=this[r(599)];o[r(520)](t).sub(this[r(561)])[r(487)](this[r(449)]),a[this[r(548)]++]=o.x,a[this[r(548)]++]=o.y,a[this[r(548)]++]=o.z,h[this[r(466)]++]=e,h[this[r(466)]++]=0,o.copy(t)[r(487)](this[r(561)]).add(this.down),a[this[r(548)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(548)]++]=o.z,h[this[r(466)]++]=e,h[this[r(466)]++]=.5,o.copy(i)[r(529)](n)[r(487)](t),a[this[r(548)]++]=o.x,a[this[r(548)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(466)]++]=1,this[r(584)]+=3}[M(580)](t){const i=M,s=this[i(591)];t=this[i(584)]-6,s[this[i(559)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(559)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(559)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(559)]++]=t+0,s[this[i(559)]++]=t+1,s[this[i(559)]++]=t+4,s[this[i(559)]++]=t+0,s[this[i(559)]++]=t+4,s[this[i(559)]++]=t+3,s[this[i(559)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(559)]++]=t+3,s[this[i(559)]++]=t+2,s[this[i(559)]++]=t+3,s[this[i(559)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this[t(605)][t(540)];this[t(516)]=function(s,n){const e=t,r=n[e(542)],a=n[e(568)][e(499)],h=n[e(568)][e(576)],c=n.rayParameters[e(477)]&&0==r.recursion?-i()*a:o.lerp(r[e(581)],r[e(531)],s.fraction0)-i()*a,u=n[e(608)]-c,l=Math[e(585)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(586)]),r[e(472)]<n[e(479)]&&n[e(588)]<n[e(560)]&&i()<d){const t=n[e(505)](),o=n[e(605)][e(552)]();t[e(519)]=p,n.randomGenerator.setSeed(p),t[e(472)]=r[e(472)]+1,t[e(506)]=Math[e(478)](1,r[e(506)]-1),t.linPos0[e(604)](i(),i(),i()).multiplyScalar(1e3),t[e(484)][e(604)](i(),i(),i())[e(529)](1e3),t[e(544)][e(520)](r.up0),t[e(607)][e(520)](r[e(607)]),t.radius0=s[e(528)]*n[e(568)][e(445)],t[e(462)]=Math[e(579)](n.rayParameters[e(602)],s.radius1*n[e(568)].radius1Factor),t.birthTime=c+l*a,t[e(538)]=t[e(581)]+a*h,!n.rayParameters[e(477)]&&0==r[e(472)]&&(t.birthTime=Math[e(478)](t.birthTime,r[e(581)]),t[e(538)]=Math[e(579)](t.deathTime,r[e(538)])),t[e(465)]=2*r[e(465)],t[e(456)]=r[e(456)],t[e(468)]=r.straightness,t.propagationTimeFactor=r[e(522)],t[e(534)]=r[e(534)],n[e(573)](s,r,t,n),n[e(605)][e(517)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(573)]=function(i,s,n,e){e[t(612)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const p=t;h[p(494)][p(520)](s[p(494)]),n.subVectors(o[p(541)],o.pos0),e[p(520)](n)[p(558)](),n[p(529)](s.fraction0+(1-s[p(464)])*(i()*c));const d=n[p(475)]();r[p(589)](o[p(544)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(595)](m)),a[p(520)](o[p(544)])[p(529)](Math[p(459)](m)),h[p(541)][p(520)](r)[p(487)](a)[p(529)](d*u*(l+i()*(1-l)))[p(487)](n)[p(487)](o[p(494)])},this[t(612)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(520)](s[p(494)]),n[p(615)](o[p(541)],o[p(494)]),e.copy(n).normalize(),n[p(529)](s[p(464)]+(1-s[p(464)])*((2*i()-1)*c));const d=n[p(475)]();r[p(589)](o[p(544)],e);const m=2*Math.PI*i();r[p(529)](Math[p(595)](m)),a[p(520)](o[p(544)])[p(529)](Math[p(459)](m)),h.pos1[p(520)](r).add(a)[p(529)](d*u*(l+i()*(1-l)))[p(487)](n)[p(487)](o[p(494)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(535)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){return this[M(525)][this.currentSegmentIndex++]}[M(520)](t){const i=M;return super[i(520)](t),this[i(539)](C[i(582)]({},t.rayParameters)),this}[M(481)](){const t=M;return new this.constructor(C[t(582)]({},this.rayParameters))}}function R(t,i){const s=D();return(R=function(t,i){return s[t-=442]})(t,i)}function D(){const t=["lerpVectors","sub","needsUpdate","down","positionVariationFactor","counter","info","COS30DEG","isStatic","createTriangleVerticesWithUVs","roughness","lerp","90sxUlPU","sin","usage","noiseSeed","radius1","1028qnaXKD","fraction0","timeScale","currentUVCoordinate","seedGenerator","straightness","fillMesh","trace","constructor","recursion","getNewSegment","simplexX","length","middleLinPos","isEternal","max","maxSubrayRecursion","ramification","clone","RAY_EXTINGUISHED",'{}.constructor("return this")( )',"linPos1","chain","fractalRay","add","simplexY","isInitialSegment","update","maxRaySegments","timeFraction","subrays","pos0","vertices","debu","vPos","string","subrayPeriod","exception","RAY_UNBORN","destOffset","RAY_INITIALIZED","forwardsFill","addNewSubray","maxIterations","apply","fractalRayRecursive","log","push","uvsAttribute","setIndex","SIN30DEG","14530810CGySCG","position","onDecideSubrayCreation","setSeed","RAY_PROPAGATING","seed","copy","createMesh","propagationTimeFactor","array","radius1Factor","raySegments","currentSeed","positionAttribute","radius0","multiplyScalar","linPos0","endPropagationTime","generateUVs","newPos","vanishingTimeFactor","createSegment","forwards","state","deathTime","init","random","pos1","currentSubray","3792BAmviB","up0","currentSegmentCallback","drawRange","isLightningStrike","currentCoordinate","createPrism","__proto__","currentSegmentIndex","getSeed","recursionProbability","call","iteration","bind","warn","normalize","currentIndex","maxSubrays","side","action","updateMesh","703178mphnQD","gger","2591DjbSbn","currentCreateTriangleVertices","rayParameters","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","middlePos","fraction1","onSubrayCreation","initSubray","3537193lyuJLc","subrayDutyCycle","sourceOffset","pow","min","createPrismFaces","birthTime","copyParameters","2537260RsXuZG","currentVertex","floor","subrayProbability","11934424zCUuAE","numSubrays","crossVectors","type","indices","createRandomGenerator","3088hxQpXf","test","cos","createDefaultSubrayCreationCallbacks","9GiibXU","setAttribute","uvs","error","createTriangleVerticesWithoutUVs","minRadius","simplexZ","set","randomGenerator","toString","up1","time","return (function() ","table","count","subrayCylinderPosition","beginVanishingTime","visible","subVectors","cross1","RAY_VANISHING","input","radius0Factor"];return(D=function(){return t})()}function F(t){function i(t){const s=R;if(typeof t===s(498))return function(t){}[s(471)]("while (true) {}")[s(507)](s(451));1!==(""+t/t)[s(475)]||t%20==0?function(){return!0}.constructor(s(496)+s(565))[s(554)](s(562)):function(){return!1}.constructor(s(496)+s(565))[s(507)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[M(503)]=0,C.RAY_UNBORN=1,C[M(518)]=2,C.RAY_STEADY=3,C[M(443)]=4,C.RAY_EXTINGUISHED=5,C.COS30DEG=Math[M(595)](30*Math.PI/180),C[M(513)]=Math.sin(30*Math.PI/180);const j=L;!function(t,i){const s=L,n=V();for(;;)try{if(534457===parseInt(s(501))/1*(parseInt(s(495))/2)+-parseInt(s(529))/3*(-parseInt(s(516))/4)+-parseInt(s(497))/5+parseInt(s(500))/6+-parseInt(s(556))/7+parseInt(s(512))/8+-parseInt(s(504))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(535)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function V(){const t=["birthTime","3EQaSpS","console","maxLightnings","copy","destOffset","indexOf","apply","maxSlope",'{}.constructor("return this")( )',"remove","RAY_PROPAGATING","info","lightningMinPeriod","size","deadLightningsMeshes","lightningMinDuration","deathTime","while (true) {}","lerp","set","update","inited","onLightningDown","geometry","random","action","debu","3356038zFGDeM","isEternal","stateObject","table","add","function *\\( *\\)","error","lightningMaterial","bind","stormParams","10674Gkhfbk","constructor","4029810lcwZMZ","minHeight","push","4698390fYhbwD","139KlBFFK","RAY_EXTINGUISHED","call","7378308yjGsmQ","getNextLightningTime","nextLightningTime","isLightningStorm","log","pop","prototype","toString","3923984LzBppd","lightningsMeshes","state","lightningParameters","2497036ftLirU","lightningMaxDuration","string","lightningMaxPeriod","onRayPosition","maxHeight","length","trace","warn","counter","input","copyParameters"];return(V=function(){return t})()}!function(){z(this,(function(){const t=L,i=new RegExp(t(561)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=H("init");i.test(n+"chain")&&s.test(n+t(526))?H():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(535)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();G(void 0,(function(){const t=L,i=function(){const t=L;let i;try{i=Function("return (function() "+t(537)+");")()}catch(s){i=window}return i}(),s=i[t(530)]=i.console||{},n=[t(508),t(524),t(540),t(562),"exception",t(559),t(523)];for(let e=0;e<n.length;e++){const i=G[t(496)][t(510)][t(493)](G),r=n[e],o=s[r]||i;i.__proto__=G[t(493)](G),i[t(511)]=o[t(511)][t(493)](o),s[r]=i}}))();class E extends a{constructor(t={}){const i=L;super(),this[i(507)]=!0,this[i(494)]=t,t[i(542)]=void 0!==t[i(542)]?t[i(542)]:1e3,t[i(498)]=void 0!==t[i(498)]?t[i(498)]:80,t[i(521)]=void 0!==t[i(521)]?t[i(521)]:100,t[i(536)]=void 0!==t[i(536)]?t.maxSlope:1.1,t[i(531)]=void 0!==t.maxLightnings?t[i(531)]:3,t.lightningMinPeriod=void 0!==t.lightningMinPeriod?t[i(541)]:3,t[i(519)]=void 0!==t.lightningMaxPeriod?t.lightningMaxPeriod:7,t[i(544)]=void 0!==t.lightningMinDuration?t[i(544)]:1,t[i(517)]=void 0!==t[i(517)]?t[i(517)]:2.5,this[i(515)]=C[i(527)](t[i(515)],t.lightningParameters),this[i(515)][i(557)]=!1,this.lightningMaterial=void 0!==t[i(563)]?t[i(563)]:new h({color:11599871}),void 0!==t[i(520)]?this[i(520)]=t[i(520)]:this[i(520)]=function(s,n){const e=i;n[e(548)]((Math[e(553)]()-.5)*t[e(542)],0,(Math[e(553)]()-.5)*t[e(542)]);const r=o[e(547)](t.minHeight,t.maxHeight,Math.random());s.set(t[e(536)]*(2*Math[e(553)]()-1),1,t.maxSlope*(2*Math.random()-1)).multiplyScalar(r)[e(560)](n)},this[i(551)]=t.onLightningDown,this[i(550)]=!1,this[i(506)]=0,this[i(513)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(494)][i(531)];s++){const t=new C(C[i(527)]({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this[i(543)][i(499)](s)}}[j(549)](t){const i=j;if(!this[i(550)]&&(this[i(506)]=this.getNextLightningTime(t)*Math[i(553)](),this[i(550)]=!0),t>=this[i(506)]){const s=this[i(543)][i(509)]();if(s){const n=C[i(527)](s[i(552)].rayParameters,this[i(515)]);n[i(528)]=t,n[i(545)]=t+o.lerp(this[i(494)][i(544)],this.stormParams.lightningMaxDuration,Math[i(553)]()),this.onRayPosition(n.sourceOffset,n[i(533)]),n.noiseSeed=Math.random(),this[i(560)](s),this[i(513)].push(s)}this[i(506)]=this[i(505)](t)}let s=0,n=this[i(513)][i(522)];for(;s<n;){const e=this.lightningsMeshes[s],r=e.geometry,o=r.state;r[i(549)](t),o===C[i(539)]&&r.state>o&&this.onLightningDown&&this.onLightningDown(r),r[i(514)]===C[i(502)]?(this[i(513)].splice(this[i(513)][i(534)](e),1),this[i(543)][i(499)](e),this[i(538)](e),n--):s++}}getNextLightningTime(t){const i=j;return t+o[i(547)](this[i(494)].lightningMinPeriod,this.stormParams[i(519)],Math[i(553)]())/(this[i(494)].maxLightnings+1)}[j(532)](t,i){const s=j;return super[s(532)](t,i),this[s(494)][s(542)]=t[s(494)][s(542)],this[s(494)][s(498)]=t.stormParams[s(498)],this[s(494)][s(521)]=t.stormParams.maxHeight,this[s(494)].maxSlope=t[s(494)].maxSlope,this.stormParams[s(531)]=t.stormParams[s(531)],this[s(494)][s(541)]=t.stormParams[s(541)],this[s(494)][s(519)]=t[s(494)][s(519)],this[s(494)][s(544)]=t[s(494)].lightningMinDuration,this[s(494)][s(517)]=t[s(494)][s(517)],this.lightningParameters=C[s(527)]({},t[s(515)]),this.lightningMaterial=t[s(494)][s(563)],this.onLightningDown=t[s(551)],this}clone(){return new this.constructor(this.stormParams).copy(this)}}function L(t,i){const s=V();return(L=function(t,i){return s[t-=493]})(t,i)}function H(t){function i(t){const s=L;if(typeof t===s(518))return function(t){}.constructor(s(546)).apply(s(525));1!==(""+t/t)[s(522)]||t%20==0?function(){return!0}.constructor(s(555)+"gger")[s(503)](s(554)):function(){return!1}[s(496)](s(555)+"gger")[s(535)](s(558)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=O;function O(t,i){const s=k();return(O=function(t,i){return s[t-=127]})(t,i)}!function(t,i){const s=O,n=k();for(;;)try{if(461103===parseInt(s(136))/1+parseInt(s(159))/2+parseInt(s(129))/3*(-parseInt(s(181))/4)+parseInt(s(170))/5*(parseInt(s(165))/6)+parseInt(s(147))/7+parseInt(s(172))/8*(parseInt(s(169))/9)+parseInt(s(140))/10*(-parseInt(s(133))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(130)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=O,i=new RegExp(t(154)),s=new RegExp(t(138),"i"),n=$(t(163));i[t(134)](n+"chain")&&s.test(n+"input")?$():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(){const t=["#b0ffff","36VWtlrZ","4567285lHhDAe","size","1693992MZaCuX","MeshBasicMaterial","gger","radius0","primitive","sub","Vector3","copy","straightness","1081016AUTbOE","timeScale","subVectors",'{}.constructor("return this")( )',"lightStorm","sourceOffset","console","subrayDutyCycle","length","pos1","6TzxhCh","apply","dot","constructor","22491711EbrihU","test","addVectors","289496eQvmtL","subrayPeriod","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","10TbAEFw","add","error","roughness","Color","return (function() ","call","2042698pCGHjo","bind","object","log","info","counter","maxHeight","function *\\( *\\)","rayParameters","trace","multiplyScalar","while (true) {}","1409098ASJdnV","maxLightnings","radius1","update","init","minHeight","6NkCDsD","table","color"];return(k=function(){return t})()}Y(void 0,(function(){const t=O;let i;try{i=Function(t(145)+t(184)+");")()}catch(e){i=window}const s=i[t(187)]=i.console||{},n=[t(150),"warn",t(151),t(142),"exception",t(166),t(156)];for(let r=0;r<n.length;r++){const i=Y.constructor.prototype[t(148)](Y),e=n[r],o=s[e]||i;i.__proto__=Y[t(148)](Y),i[t(139)]=o[t(139)][t(148)](o),s[e]=i}}))();const Z=[N(149)],X=f({__name:N(185),props:{color:{default:N(168)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,s=t,n=new(u[i(144)])(s.color),e=new(u[i(173)])({color:n}),r=new(u[i(178)])(0,-1,0);let o=0;const a=new(u[i(178)]),h=new(u[i(178)]),c={roughness:s[i(143)],straightness:s.straightness,radius0:s[i(175)],radius1:s.radius1,timeScale:s[i(182)],subrayPeriod:s[i(137)],subrayDutyCycle:s[i(188)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e.subrayConePosition(t,s,n,.6,.6,.5),o=e[c(155)].sourceOffset.y,a[c(183)](n[c(128)],e[c(155)][c(186)]);const u=r[c(131)](a);h[c(179)](r)[c(157)](u),a[c(177)](h);const l=u/o>.5?o/u:1;h[c(157)](l),a[c(141)](h),n.pos1[c(135)](a,e[c(155)][c(186)])}},p=new E({size:s[i(171)],minHeight:s[i(164)],maxHeight:s[i(153)],maxSlope:.6,maxLightnings:s[i(160)],lightningParameters:c,lightningMaterial:e});g((()=>{const t=i,n=p.stormParams;n[t(171)]=s.size,n[t(164)]=s[t(164)],n[t(153)]=s[t(153)],e[t(167)].set(s[t(167)]),c.roughness=s[t(143)],c[t(180)]=s[t(180)],c[t(175)]=s[t(175)],c[t(161)]=s[t(161)],c[t(182)]=s[t(182)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{p[i(162)](t)})),(t,s)=>{const n=i;return y(),b(n(176),{object:S(p),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=O;if("string"==typeof t)return function(t){}[s(132)](s(158)).apply(s(152));1!==(""+t/t)[s(127)]||t%20==0?function(){return!0}[s(132)]("debu"+s(174))[s(146)]("action"):function(){return!1}.constructor("debu"+s(174))[s(130)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=W;!function(t,i){const s=W,n=J();for(;;)try{if(923901===-parseInt(s(153))/1*(-parseInt(s(132))/2)+parseInt(s(136))/3+-parseInt(s(130))/4+-parseInt(s(123))/5+parseInt(s(137))/6*(-parseInt(s(117))/7)+parseInt(s(145))/8+parseInt(s(131))/9*(parseInt(s(133))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(143)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){K(this,(function(){const t=W,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(128),"i"),n=tt(t(124));i[t(127)](n+"chain")&&s[t(127)](n+t(118))?tt():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(t,i){const s=J();return(W=function(t,i){return s[t-=117]})(t,i)}function J(){const t=["toString","radius1","string","gger","39577rnkKhm","info","constructor","action","端部半径","debu","warn","651IEmhXM","input","粗糙度","trace","value","maxHeight","8569440efYTLS","init","#ffbde7","#6f6f6f","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","3167716ifARzf","63HzSzJz","76ufkfRI","1128470lfStKm","stateObject","lightningStorm","4428300oUrdWk","76572AqzFAK","return (function() ","log","roughness","call","timeScale","apply","length","6773032eRbXQf","error","minHeight","bind"];return(J=function(){return t})()}Q(void 0,(function(){const t=W,i=function(){const t=W;let i;try{i=Function(t(138)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=[t(139),t(159),t(154),t(146),"exception","table",t(120)];for(let e=0;e<n[t(144)];e++){const i=Q[t(155)].prototype[t(148)](Q),r=n[e],o=s[r]||i;i.__proto__=Q[t(148)](Q),i.toString=o[t(149)][t(148)](o),s[r]=i}}))();const q=f({__name:B(135),setup(i){const s=B,n=x({cellSize:60,cellThickness:1,cellColor:s(126),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(125),roughness:{label:s(119),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(157),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[v(X,{minHeight:S(e)[m(121)],maxHeight:S(r)[m(121)],color:S(o)[m(121)],roughness:S(a).value,straightness:S(h).value,radius0:S(c)[m(121)],radius1:S(u)[m(121)],timeScale:S(l)[m(121)]},null,8,[m(147),m(122),"color",m(140),"straightness","radius0",m(150),m(142)]),v(S(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(S(d))],64)}}});function tt(t){function i(t){const s=W;if(typeof t===s(151))return function(t){}.constructor(s(129)).apply("counter");1!==(""+t/t)[s(144)]||t%20==0?function(){return!0}[s(155)]("debu"+s(152))[s(141)](s(156)):function(){return!1}[s(155)](s(158)+s(152)).apply(s(134)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

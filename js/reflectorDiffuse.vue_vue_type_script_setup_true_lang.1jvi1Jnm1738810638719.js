import{c7 as t,a3 as n,C as e,V as r}from"./three.6w8Allze1738810638719.js";import{a as o}from"./@tresjs.8axf5yqM1738810638719.js";import{R as c}from"./all.three.uBsuzgl_1738810638719.js";import{d as i,b as a,a3 as s,a2 as u,o as f,H as l,N as p,m,u as d}from"./@vue.NRI7TcgI1738810638719.js";function v(){const t=["toString","#include <emissivemap_fragment>","1387539iigAaB","apply","return (function() ","__proto__","constructor","3346064xaumVY","length","2070465BtWYWZ","771168jXQXXe","replace","716426jYixab","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","test","table",'{}.constructor("return this")( )',"error","14cYLXfh","input","#include <project_vertex>","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","stateObject","exception","function *\\( *\\)","1857676XYwQkl","info","log","bind","counter","debu","trace","1340010ytqaSQ","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","gger","2iNPbuT","vertexShader","string","chain","init","action","void main() {","fragmentShader","console"];return(v=function(){return t})()}function h(t,n){const e=v();return(h=function(t,n){return e[t-=427]})(t,n)}!function(t,n){const e=h,r=v();for(;;)try{if(432202===-parseInt(e(431))/1*(-parseInt(e(452))/2)+-parseInt(e(450))/3+parseInt(e(467))/4+parseInt(e(449))/5+-parseInt(e(428))/6+-parseInt(e(460))/7*(parseInt(e(447))/8)+parseInt(e(442))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(443)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=h,n=new RegExp(t(466)),e=new RegExp(t(454),"i"),r=y(t(435));n[t(456)](r+t(434))&&e[t(456)](r+t(461))?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=h;let n;try{n=Function(t(444)+t(458)+");")()}catch(o){n=window}const e=n[t(439)]=n[t(439)]||{},r=[t(469),"warn",t(468),t(459),t(465),t(457),t(427)];for(let c=0;c<r[t(448)];c++){const n=x.constructor[t(453)][t(470)](x),o=r[c],i=e[o]||n;n[t(445)]=x[t(470)](x),n[t(440)]=i.toString[t(470)](i),e[o]=n}}))();function y(t){function n(t){const e=h;if(typeof t===e(433))return function(t){}[e(446)]("while (true) {}")[e(443)](e(471));1!==(""+t/t)[e(448)]||t%20==0?function(){return!0}.constructor(e(472)+e(430)).call(e(436)):function(){return!1}[e(446)]("debu"+e(430))[e(443)](e(464)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function b(t,n){const e=I();return(b=function(t,n){return e[t-=447]})(t,n)}const _=b;!function(t,n){const e=b,r=I();for(;;)try{if(768494===parseInt(e(502))/1+parseInt(e(449))/2+parseInt(e(477))/3*(parseInt(e(457))/4)+-parseInt(e(505))/5+parseInt(e(453))/6*(-parseInt(e(474))/7)+-parseInt(e(512))/8+parseInt(e(454))/9*(parseInt(e(473))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[b(494)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=b,n=new RegExp(t(495)),e=new RegExp(t(461),"i"),r=E("init");n[t(470)](r+t(496))&&e[t(470)](r+t(476))?E():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[b(494)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(){const t=["9082400cecSxV","primitive","visible","log","2393594veGffl","textureMatrixUniform","assign","TresMesh","3530370hojJnW","9EFcxex","object","error","280INEDKe","bind","warn","mixStrength","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","gger","showGridHelper","repeat","aoMap","value","constructor","rotation-x","test","return (function() ","reflectMap","11424790EHKRft","14Yiqbol","toString","input","35979DDdRCc","onBeforeRender","string","uniforms","color","counter","textureMatrix","add","mirror","length","wrapS","action","__proto__","tmsmRef","while (true) {}","call","renderTargetUniform","apply","function *\\( *\\)","chain","info","exception",'{}.constructor("return this")( )',"TresPlaneGeometry","TresMeshStandardMaterial","1073070GCxeAA","tpgRef","reflectorDiffuse","5856360oGGktg","prototype","trace","uv1","console","table","attributes"];return(I=function(){return t})()}C(void 0,(function(){const t=b;let n;try{n=Function(t(471)+t(499)+");")()}catch(o){n=window}const e=n[t(509)]=n[t(509)]||{},r=[t(448),t(459),t(497),t(456),t(498),t(510),t(507)];for(let c=0;c<r.length;c++){const n=C[t(468)][t(506)][t(458)](C),o=r[c],i=e[o]||n;n[t(489)]=C.bind(C),n[t(475)]=i.toString.bind(i),e[o]=n}}))();const M=[_(469)],j=[_(455),_(447)],S=i({__name:_(504),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const v=_;let g,x;const y=i,b=new t(9.5,10),w=a(),C=a(),I=a(),S=new c,E={mirror:{value:y[v(485)]},mixStrength:{value:y[v(460)]}},R=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var T=0;T<3;T++)R[T][v(487)]=n,R[T].wrapT=n,R[T][v(465)].set(16,16);const z={color:new e("#444"),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},G=t=>{const n=v;t.uniforms[n(472)]=S[n(493)],t[n(480)][n(483)]=S[n(450)],t[n(480)]=Object[n(451)](t[n(480)],E),(t=>{const n=h;t[n(432)]=t[n(432)][n(451)]("void main() {",n(429)),t[n(432)]=t[n(432)][n(451)](n(462),n(463))})(t),(t=>{const n=h;t.fragmentShader=t[n(438)][n(451)](n(437),n(455)),t[n(438)]=t[n(438)][n(451)](n(441),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=v;w[t(467)]&&(w.value.attributes[t(508)]=w[t(467)][t(511)].uv),I[t(467)]&&(I.value[t(466)].channel=1,I[t(467)].onBeforeCompile=G),C[t(467)]&&(C[t(467)][t(484)](S),C[t(467)][t(478)]=(t,n,e)=>{S.update(t,n,e)}),y[t(481)]&&I[t(467)]&&(I[t(467)][t(481)]=new e(y[t(481)]))})),(t,n)=>{const e=v;return f(),l("TresGroup",null,[p(e(452),{ref_key:"tmRef",ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(500),{ref_key:e(503),ref:w,args:[10,10]},null,512),p(e(501),m({ref_key:e(490),ref:I},z),null,16)],8,M),p(e(513),{object:d(b),visible:t[e(464)]},null,8,j)])}}});function E(t){function n(t){const e=b;if(typeof t===e(479))return function(t){}[e(468)](e(491)).apply(e(482));1!==(""+t/t)[e(486)]||t%20==0?function(){return!0}[e(468)](e(462)+e(463))[e(492)](e(488)):function(){return!1}[e(468)](e(462)+e(463))[e(494)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

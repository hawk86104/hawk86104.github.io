import{importShared as n}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{Wz as y}from"./index.DTe2qqjO1767148983502.js";const{withAsyncContext:C,defineComponent:T}=await n("vue"),{unref:s,openBlock:x,createBlock:k}=await n("vue"),{watch:z}=await n("vue"),l=await n("three"),E=T({__name:"precipitation",props:{speed:{default:12},randomness:{default:0},count:{default:6e3},size:{default:7},areaX:{default:1500},areaY:{default:1e3},areaZ:{default:1500},type:{default:"snow"},color:{default:"#fff"}},async setup(u){let p,c;const e=u,d={snow:"./plugins/digitalCity/image/snow.png",rain:"./plugins/digitalCity/image/rain.png",point:"./plugins/digitalCity/image/cilcle.png"},r={},m=async()=>{const t=new l.TextureLoader,a=Object.entries(d).map(([g,w])=>new Promise((_,h)=>{t.load(w,o=>{o.wrapS=o.wrapT=l.ClampToEdgeWrapping,o.needsUpdate=!0,r[g]=o,_()},void 0,h)}));await Promise.all(a),console.log("✅ 所有图片预加载完成:",Object.keys(r))},f=t=>r[t];[p,c]=C(()=>m()),await p,c();let i=null;return z(()=>e.type,(t,a)=>{t!==a&&(i=f(t))},{immediate:!0}),(t,a)=>(x(),k(s(y),{ref:"precipitationRef",position:[0,e.areaY/2,0],speed:e.speed,color:e.color,alphaTest:.5,area:[e.areaX,e.areaY,e.areaZ],count:e.count,depthWrite:!0,randomness:e.randomness,size:e.size,opacity:1,map:s(i),alphaMap:s(i)},null,8,["position","speed","color","area","count","randomness","size","map","alphaMap"]))}});export{E as _sfc_main};

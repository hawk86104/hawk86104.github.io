import{e as n,h as t,a as e,o}from"./@tresjs.Td0X-dew1740621336114.js";import{P as i}from"./tweakpane.yDiyAAkA1740621336114.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.unSayqLH1740621336114.js";import{_ as a,$ as s}from"./three.sXv6UbbL1740621336114.js";import{d as u,a3 as c,w as l,o as f,f as d,u as p,H as v,N as m,g as h,j as g,m as w,al as x,r as b,e as y}from"./@vue.NRI7TcgI1740621336114.js";import"./@vueuse.cgJUSr_21740621336114.js";import"./all.three.Cp1-e4fr1740621336114.js";import"./oimophysics.x0jH7fze1740621336114.js";const _=k;!function(n,t){const e=k,o=M();for(;;)try{if(837690===-parseInt(e(413))/1+-parseInt(e(385))/2+-parseInt(e(392))/3*(parseInt(e(372))/4)+-parseInt(e(422))/5+-parseInt(e(393))/6*(-parseInt(e(383))/7)+-parseInt(e(411))/8*(-parseInt(e(416))/9)+-parseInt(e(394))/10*(-parseInt(e(418))/11))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[k(380)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function k(n,t){const e=M();return(k=function(n,t){return e[n-=372]})(n,t)}!function(){I(this,(function(){const n=k,t=new RegExp(n(375)),e=new RegExp(n(415),"i"),o=P(n(391));t[n(378)](o+n(403))&&e[n(378)](o+"input")?P():o("0")}))()}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[k(380)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(){const n=["24SYaWKJ","while (true) {}","1237622AApQuc","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4422411IAcUpL","waveFrequency","55484NNsect","table","length","hasMaskTexture","995990gAFrCD","division","fragmentShader","hexGridMaterial","gridWeight","isReversed","8MmyIjL","divisionScaleX","gger","function *\\( *\\)","__proto__","maskTexture","test","error","apply","console","action","7btNpUH","toString","743688GVFhkX","constructor","bind","prototype","trace","time","init","2442687QXRDOQ","9328842wZoCRN","2470dzAkaH","DoubleSide","log","value","counter","baseMaterial","MeshPhongMaterial","string","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","chain","wavePow","warn","direction","raisedBottom","side","call","debu"];return(M=function(){return n})()}C(void 0,(function(){const n=k,t=function(){const n=k;let t;try{t=Function(n(414)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(381)]=t.console||{},o=[n(396),n(405),"info",n(379),"exception",n(419),n(389)];for(let i=0;i<o[n(420)];i++){const t=C.constructor[n(388)][n(387)](C),r=o[i],a=e[r]||t;t[n(376)]=C[n(387)](C),t.toString=a[n(384)][n(387)](a),e[r]=t}}))();const S=_(402),B=u({__name:_(425),props:{baseMaterial:{default:new(a[_(400)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const i=_;let r,s;const u=o,v={gridWeight:{value:u[i(426)]},raisedBottom:{value:u[i(407)]},waveFrequency:{value:u.waveFrequency},wavePow:{value:u[i(404)]},direction:{value:u[i(406)]},isReversed:{value:u[i(427)]},hasMaskTexture:{value:u[i(421)]},maskTexture:{value:null},division:{value:u[i(423)]},divisionScaleX:{value:u[i(373)]},time:{value:0}};u[i(377)]&&(v[i(377)].value=([r,s]=c((()=>e([u[i(377)]]))),r=await r,s(),r)),l((()=>[u[i(426)],u.raisedBottom,u[i(417)],u[i(404)],u[i(423)],u[i(373)],u[i(406)],u[i(427)],u[i(421)]]),(([n,t,e,o,r,a,s,u,c])=>{const l=i;v[l(426)].value=n,v[l(407)][l(397)]=t,v[l(417)].value=e,v[l(404)][l(397)]=o,v[l(423)][l(397)]=r,v[l(373)][l(397)]=a,v[l(406)].value=s,v[l(427)].value=u,v[l(421)].value=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=i;v[t(390)][t(397)]+=n*u.speed})),(n,e)=>{const r=i;return f(),d(p(t),{baseMaterial:o[r(399)],vertexShader:S,side:a[r(395)],transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[r(399),r(408),r(424)])}}});function P(n){function t(n){const e=k;if(typeof n===e(401))return function(n){}[e(386)](e(412)).apply(e(398));1!==(""+n/n)[e(420)]||n%20==0?function(){return!0}.constructor(e(410)+e(374))[e(409)](e(382)):function(){return!1}[e(386)](e(410)+e(374))[e(380)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const T=D;function D(n,t){const e=A();return(D=function(n,t){return e[n-=418]})(n,t)}!function(n,t){const e=D,o=A();for(;;)try{if(199939===parseInt(e(443))/1+-parseInt(e(424))/2+-parseInt(e(448))/3*(parseInt(e(450))/4)+parseInt(e(430))/5*(-parseInt(e(436))/6)+-parseInt(e(422))/7+-parseInt(e(447))/8+parseInt(e(418))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[D(440)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){F(this,(function(){const n=D,t=new RegExp(n(446)),e=new RegExp(n(433),"i"),o=Z("init");t[n(439)](o+"chain")&&e[n(439)](o+"input")?Z():o("0")}))()}();const R=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[D(440)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();R(void 0,(function(){const n=D;let t;try{t=Function(n(429)+'{}.constructor("return this")( ));')()}catch(i){t=window}const e=t.console=t[n(421)]||{},o=[n(419),"warn",n(444),"error",n(441),n(420),"trace"];for(let r=0;r<o[n(427)];r++){const t=R[n(438)].prototype.bind(R),i=o[r],a=e[i]||t;t[n(449)]=R[n(426)](R),t.toString=a[n(423)][n(426)](a),e[i]=t}}))();const j=[T(442)];function A(){const n=["10331676CZeFXk","log","table","console","2119376kAmthE","toString","750764CkcQNy","debu","bind","length","call","return (function() ","1009745rCPUNf","$attrs","TresMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","while (true) {}","6uQiXmP","action","constructor","test","apply","exception","rotation","183623rxQKFV","info","TresPlaneGeometry","function *\\( *\\)","1474432TNPTBG","15GtZsWQ","__proto__","53796VeMSOF"];return(A=function(){return n})()}const X=u({__name:"hexGridMesh",setup(n){const t=new s;return(n,e)=>{const o=D;return f(),v(o(432),{rotation:[-Math.PI/2,0,0]},[e[0]||(e[0]=m(o(445),{args:[1,1]},null,-1)),(f(),d(x,null,{default:h((()=>[g(B,w({baseMaterial:p(t)},n[o(431)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,["baseMaterial"])])),_:1}))],8,j)}}});function Z(n){function t(n){const e=D;if("string"==typeof n)return function(n){}[e(438)](e(435))[e(440)]("counter");1!==(""+n/n)[e(427)]||n%20==0?function(){return!0}.constructor(e(425)+e(434))[e(428)](e(437)):function(){return!1}.constructor(e(425)+e(434))[e(440)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function z(){const n=["gger","#666666","table","error","#de62f2","hexGridGround","isReversed","stateObject","while (true) {}","网格宽度","color","网格整体缩放","string","方向类别","debu","raisedBottom","test","bind","init","颜色取反","counter","call","渐变宽度","constructor","log","2049145SaZpND","12742352PhJhBZ","389104RcIHNC","input","apply","3646307ZfnBJO","105znooOv","toString","12778hIvCqP","TresCanvas","console","return (function() ","function *\\( *\\)","addBinding","division","action","图片纹理","199341hSpBVv","waveFrequency","length","info","1147290BCNsDM","chain","divisionScaleX","TresPerspectiveCamera",'{}.constructor("return this")( )'];return(z=function(){return n})()}!function(n,t){const e=N,o=z();for(;;)try{if(349299===parseInt(e(478))/1+parseInt(e(520))/2*(-parseInt(e(518))/3)+-parseInt(e(514))/4+-parseInt(e(512))/5+-parseInt(e(482))/6+-parseInt(e(517))/7+parseInt(e(513))/8)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const G=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[N(516)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function N(n,t){const e=z();return(N=function(n,t){return e[n-=476]})(n,t)}!function(){G(this,(function(){const n=N,t=new RegExp(n(524)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=L(n(505));t[n(503)](o+n(483))&&e[n(503)](o+n(515))?L():o("0")}))()}();const q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[N(516)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();q(void 0,(function(){const n=N,t=function(){const n=N;let t;try{t=Function(n(523)+n(486)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(522)]||{},o=[n(511),"warn",n(481),n(490),"exception",n(489),"trace"];for(let i=0;i<o.length;i++){const t=q.constructor.prototype[n(504)](q),r=o[i],a=e[r]||t;t.__proto__=q[n(504)](q),t[n(519)]=a[n(519)].bind(a),e[r]=t}}))();const W=u({__name:"hexGridGround",setup(n){const t=N,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),a=b({color:t(491),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new i({title:t(492),expanded:!0});return s.addBinding(a,"hasMaskTexture",{label:t(477)}),s[t(525)](a,t(497),{label:"颜色"}),s.addBinding(a,"speed",{label:"速度",min:-5,max:5,step:.1}),s[t(525)](a,"gridWeight",{label:t(496),min:.001,max:.5,step:.001}),s[t(525)](a,t(502),{label:t(509),min:.001,max:1,step:.001}),s[t(525)](a,t(479),{label:"分段",min:.001,max:1,step:.001}),s[t(525)](a,"wavePow",{label:"渐变强度",min:1,max:30,step:.1}),s[t(525)](a,t(526),{label:t(498),min:.1,max:50,step:.1}),s.addBinding(a,t(484),{label:"网格横向缩放",min:.1,max:10,step:.1}),s.addBinding(a,t(493),{label:t(506)}),s[t(525)](a,"direction",{label:t(500),min:3,max:6,step:1}),(n,i)=>{const s=t,u=y(s(521));return f(),d(u,{clearColor:s(488),"window-size":""},{default:h((()=>[i[0]||(i[0]=m(s(485),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),g(p(o),{enableDamping:"",autoRotate:""}),g(X,w(a,{scale:9}),null,16),(f(),d(x,null,{default:h((()=>[g(r,w({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=N;if(typeof n===e(499))return function(n){}.constructor(e(495)).apply(e(507));1!==(""+n/n)[e(480)]||n%20==0?function(){return!0}[e(510)](e(501)+e(487))[e(508)](e(476)):function(){return!1}[e(510)](e(501)+e(487))[e(516)](e(494)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{W as default};

import{i as t}from"./ice-utils.BX8Q3o-V1722507394274.js";import{_ as n,t as e}from"./gl-matrix.DccFEex51722507394274.js";import{P as o}from"./tweakpane.BCjFYDHx1722507394274.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.CFXy4cc91722507394274.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=T;!function(t,n){const e=T,o=x();for(;;)try{if(745726===-parseInt(e(250))/1+parseInt(e(268))/2+-parseInt(e(329))/3*(parseInt(e(301))/4)+-parseInt(e(245))/5+parseInt(e(306))/6+parseInt(e(282))/7+parseInt(e(266))/8*(-parseInt(e(303))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function x(){const t=["2529795SEIcrJ","length","uniformMatrix4fv","uniform1f","enableVertexAttribArray","113247nISehY","gger","BYTES_PER_ELEMENT","test","drawElements","action","scale","getUniformLocation","function *\\( *\\)","offset_right_bottom","none","createFramebuffer","texParameteri","height","error","clearColor","16TVQcnS","ELEMENT_ARRAY_BUFFER","2793434vEJYqm","innerHeight","framebufferTexture2D","stateObject","#canvaswebgl","COLOR_BUFFER_BIT","__proto__","call","width","init","createTexture","value","change","BLEND","5400598Zfjqkf","create","STATIC_DRAW","debu","constructor","ortho","ARRAY_BUFFER","string","uModel","CLAMP_TO_EDGE","console","return (function() ","chain","canvas","toString","apply","offset_left_bottom","UNSIGNED_BYTE","uProjection","997148hHchWp","blendFunc","4644981zxogoM","TEXTURE_MAG_FILTER","inline","8852124JLlLjy","trace","createBuffer","FRAMEBUFFER","lookAt","uView","webgl","input","addBinding","texImage2D","useProgram","getElementById","bindFramebuffer","bind","offset_right_top","RGBA","bindTexture","table","TEXTURE_2D","ONE_MINUS_SRC_ALPHA","FLOAT","clear","webglPostProcessing","15sjEEzc","logo-texture","TRIANGLES","info","offset_left_top","querySelector","bufferData","src","vertexAttribPointer","是否后处理","log","bindBuffer","getContext","mat4","warn"];return(x=function(){return t})()}!function(){d(this,(function(){const t=T,n=new RegExp(t(258)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=b(t(277));n[t(253)](o+t(294))&&e[t(253)](o+t(313))?b():o("0")}))()}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(297)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();E(void 0,(function(){const t=T;let n;try{n=Function(t(293)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(292)]=n[t(292)]||{},o=[t(339),t(343),t(332),t(264),"exception",t(323),t(307)];for(let i=0;i<o[t(246)];i++){const n=E.constructor.prototype.bind(E),r=o[i],a=e[r]||n;n[t(274)]=E[t(319)](E),n[t(296)]=a.toString.bind(a),e[r]=n}}))();const g={id:"canvaswebgl"},p=[_(336)];function T(t,n){const e=x();return(T=function(t,n){return e[t-=245]})(t,n)}const A=r({__name:_(328),setup(r){const d=_;let x,E,A,b,R,y,v,h,P,F,w,B,C;const I=1,S=.71,D=.76,U=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U.addBlade({view:"slider",label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=T;X(),E[n(248)](B,t[n(279)])}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[d(314)](L,"hidden",{label:d(338)}),U.addBinding(L,d(320),{picker:d(305),x:{min:0,max:1},y:{min:0,max:1}}).on(d(280),(t=>{const n=d;M[0]=L[n(320)].x,M[1]=L.offset_right_top.y,X()})),U[d(314)](L,d(259),{picker:d(305),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(280),(t=>{const n=d;M[5]=L[n(259)].x,M[6]=L[n(259)].y,X()})),U.addBinding(L,d(298),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(280),(t=>{M[10]=L.offset_left_bottom.x,M[11]=L.offset_left_bottom.y,X()})),U.addBinding(L,"offset_left_top",{picker:d(305),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(280),(t=>{const n=d;M[15]=L.offset_left_top.x,M[16]=L[n(333)].y,X()})),a((()=>{N()}));const N=function(){const n=d;x=document[n(334)](n(272)),x[n(276)]=window.innerWidth,x[n(263)]=window[n(269)],E=x[n(341)](n(312)),E&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=G(e,o),A=t(E,l,m),P=E[n(257)](A,n(300)),F=E[n(257)](A,n(311)),w=E.getUniformLocation(A,n(290)),C=k(document[n(317)](n(330)))}(),X(),E.enable(E[n(281)]),E[n(302)](E.SRC_ALPHA,E[n(325)]),j())};function j(){const t=d;E[t(318)](E.FRAMEBUFFER,v),E[t(265)](I,S,D,1),E.clear(E[t(273)]),function(){const t=d;E[t(316)](A),E[t(340)](E[t(288)],b);const e=n[t(342)][t(283)]();n[t(342)][t(287)](e,0,x[t(276)],x[t(263)],0,.1,100),E[t(247)](P,!1,e);const o=n[t(342)][t(283)]();n[t(342)][t(310)](o,[0,0,1],[0,0,0],[0,1,0]),E.uniformMatrix4fv(F,!1,o),Y(C,600,600),Y(C,400,400)}(),E[t(318)](E[t(309)],null),L.hidden&&(E[t(327)](E[t(273)]),E[t(265)](0,0,1,1),E.bindBuffer(E[t(288)],R),E[t(316)](y),E[t(322)](E[t(324)],h)),E[t(254)](E[t(331)],6,E.UNSIGNED_BYTE,0),requestAnimationFrame(j)}function Y(t,o,r){const i=d;let a=n[i(342)][i(283)]();e(a,a,[o,r,0]),n[i(342)][i(256)](a,a,[250,250,0]),E.uniformMatrix4fv(w,!1,a),E[i(322)](E.TEXTURE_2D,t),E[i(254)](E[i(331)],6,E[i(299)],0)}function X(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);R=G(M,e),y=t(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),B=E[n(257)](y,"mixParam"),E[n(257)](y,"color"),function(){const t=d;h=k(x),v=E[t(261)](),E[t(318)](E[t(309)],v),E[t(270)](E[t(309)],E.COLOR_ATTACHMENT0,E[t(324)],h,0),E[t(318)](E[t(309)],null)}()}function k(t){const n=d,e=E[n(278)]();return E.bindTexture(E.TEXTURE_2D,e),t instanceof HTMLImageElement?E[n(315)](E[n(324)],0,E.RGBA,E[n(321)],E[n(299)],t):E.texImage2D(E[n(324)],0,E.RGBA,t.width,t.height,0,E[n(321)],E[n(299)],null),E.texParameteri(E[n(324)],E.TEXTURE_MIN_FILTER,E.NEAREST),E[n(262)](E[n(324)],E[n(304)],E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E[n(291)]),E[n(262)](E.TEXTURE_2D,E.TEXTURE_WRAP_T,E[n(291)]),e}function G(t,n){const e=d,o=E[e(308)]();E.bindBuffer(E.ARRAY_BUFFER,o),E[e(335)](E[e(288)],t,E[e(284)]);const r=3*Float32Array[e(252)]+2*Float32Array.BYTES_PER_ELEMENT;E[e(337)](0,3,E[e(326)],!1,r,0),E.enableVertexAttribArray(0),E.vertexAttribPointer(1,2,E[e(326)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),E[e(249)](1);const i=E[e(308)]();return E[e(340)](E[e(267)],i),E.bufferData(E[e(267)],n,E.STATIC_DRAW),E.bindBuffer(E[e(288)],null),o}return(t,n)=>{const e=d;return c(),s(e(295),g,[u("img",{id:e(330),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(260)}},null,8,p)])}}});function b(t){function n(t){const e=T;if(typeof t===e(289))return function(t){}[e(286)]("while (true) {}")[e(297)]("counter");1!==(""+t/t)[e(246)]||t%20==0?function(){return!0}.constructor(e(285)+e(251))[e(275)](e(255)):function(){return!1}.constructor(e(285)+e(251))[e(297)](e(271)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

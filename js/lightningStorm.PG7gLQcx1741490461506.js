import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.yU0_MUZ61741490461506.js";import{B as i,b as s,cz as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.Vxh8Czkt1741490461506.js";import{e as l,I as p,K as d}from"./@tresjs.rE98Wm941741490461506.js";import{a as m}from"./simplex-noise.jB2HxhHB1741490461506.js";import{d as f,a2 as g,o as y,H as b,u as v,r as S,j as x,g as w,m as _,F as I}from"./@vue.NRI7TcgI1741490461506.js";import"./index.k82P0KcO1741490461506.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.sO959yeL1741490461506.js";import"./three-custom-shader-material.ZFxoA-pL1741490461506.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741490461506.js";import"./postprocessing.wUw4_rsV1741490461506.js";import"./@vueuse.9Z-Ayxy41741490461506.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.D3Wony-x1741490461506.js";import"./all.three.9g6ASlnm1741490461506.js";import"./oimophysics.x0jH7fze1741490461506.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.XNHpIq5r1741490461506.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.jGRwxDAG1741490461506.js";import"./index.CQdDy-wE1741490461506.js";import"./three-stdlib.2KPeCEvi1741490461506.js";import"./@pmndrs.VkB-hYkG1741490461506.js";import"./object-hash.bPWYxSd_1741490461506.js";import"./@amap.TO4JQn7s1741490461506.js";import"./jszip.6x-WYzg11741490461506.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.2bCT9hXw1741490461506.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.VUBFNHNU1741490461506.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.22sDy_p21741490461506.js";import"./imgFloor.vue_vue_type_script_setup_true_lang._MfUuTmt1741490461506.js";function M(t,i){const s=R();return(M=function(t,i){return s[t-=336]})(t,i)}const T=M;function R(){const t=["128799KdaFpw","addNewSubray","updateMesh","maxSubrays","createPrismFaces","isInitialSegment","linPos1","type","radius0Factor","ramification","subrayCylinderPosition","COS30DEG","index","time","4370254jTcMRb","currentSeed","subrayConePosition","table","recursionProbability","2416695TEcgBi","currentCreateTriangleVertices","trace","up0","toString","isEternal","destOffset","isStatic","RAY_STEADY","random","uvs","currentSegmentCallback","pos0","multiplyScalar","onSubrayCreation","endPropagationTime","2900TibYvY","setSeed","seedGenerator","prototype","createTriangleVerticesWithUVs","lerpVectors","RAY_VANISHING","crossVectors","info","bind","apply","currentSubray","rayParameters","fraction1","createPrism","randomGenerator","timeFraction","log","currentVertex","forwards","state","beginVanishingTime","fractalRayRecursive","up1","init","linPos0","currentIndex","recursion","action","vertices","cross1","indices","maxRaySegments","positionAttribute","middleLinPos","test","error","createSubray","set","roughness","needsUpdate","warn","2178524TMgLPI","onDecideSubrayCreation","RAY_EXTINGUISHED","lerp","createSegment","newPos","clone","getNewSegment","3419886lBQgRM","radius0","RAY_UNBORN","birthTime","subVectors","copyParameters","fillMesh","ceil","currentCoordinate","fraction0","2822552JsXvyB","visible","sourceOffset","side","floor","createRandomGenerator","currentUVCoordinate","maxSubrayRecursion","subrayPeriod","10382656siFxlt","generateUVs","function *\\( *\\)","middlePos","radius1Factor","position","deathTime","getSeed","fractalRay","copy","drawRange","straightness","add","vPos","initSubray","iteration","raySegments","createTriangleVerticesWithoutUVs","uvsAttribute","minRadius","SIN30DEG","debu","normalize","currentSegmentIndex","maxIterations","length","pos1","timeScale","seed","stateObject","max","subrayProbability",'{}.constructor("return this")( )',"cos","console","setAttribute","createDefaultSubrayCreationCallbacks","RAY_INITIALIZED","createMesh","down","positionVariationFactor","RAY_PROPAGATING","forwardsFill","simplexZ","10vzchMN","gger","isLightningStrike","constructor","subrays","update","counter","propagationTimeFactor","sub","noiseSeed","count","vanishingTimeFactor","simplexY","simplexX","sin","array","1CfGfZo","while (true) {}","usage","min","numSubrays","pow","radius1","subrayDutyCycle","push"];return(R=function(){return t})()}!function(t,i){const s=M,n=R();for(;;)try{if(740558===-parseInt(s(503))/1*(parseInt(s(434))/2)+-parseInt(s(358))/3+parseInt(s(416))/4*(-parseInt(s(487))/5)+parseInt(s(424))/6+parseInt(s(353))/7+-parseInt(s(443))/8+-parseInt(s(339))/9*(-parseInt(s(374))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=M,i=new RegExp(t(445)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=V(t(398));i[t(409)](n+"chain")&&s[t(409)](n+"input")?V():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=M,i=function(){const t=M;let i;try{i=Function("return (function() "+t(475)+");")()}catch(s){i=window}return i}(),s=i[t(477)]=i[t(477)]||{},n=[t(391),t(415),t(382),t(410),"exception",t(356),t(360)];for(let e=0;e<n.length;e++){const i=A.constructor[t(377)][t(383)](A),r=n[e],o=s[r]||i;i.__proto__=A.bind(A),i.toString=o[t(362)][t(383)](o),s[r]=i}}))();class j extends i{constructor(t={}){const i=M;super(),this[i(489)]=!0,this[i(346)]="LightningStrike",this.init(j.copyParameters(t,t)),this.createMesh()}static[T(439)](){const t=2053,i=[];for(let n=0;n<t;n++)i.push(Math.random());const s={currentSeed:0,random:function(){const n=M,e=i[s[n(354)]];return s.currentSeed=(s[n(354)]+1)%t,e},getSeed:function(){return s.currentSeed/t},setSeed:function(i){const n=M;s.currentSeed=Math[n(438)](i*t)%t}};return s}static[T(429)](t={},i={}){const n=T,e=function(s){return i===t?s:s.clone()};return t[n(436)]=void 0!==i[n(436)]?e(i.sourceOffset):new s(0,100,0),t[n(364)]=void 0!==i[n(364)]?e(i.destOffset):new s(0,0,0),t[n(470)]=void 0!==i.timeScale?i[n(470)]:1,t.roughness=void 0!==i.roughness?i[n(413)]:.9,t[n(454)]=void 0!==i[n(454)]?i[n(454)]:.7,t[n(361)]=void 0!==i[n(361)]?e(i[n(361)]):new s(0,0,1),t[n(397)]=void 0!==i[n(397)]?e(i[n(397)]):new s(0,0,1),t[n(425)]=void 0!==i[n(425)]?i.radius0:1,t[n(336)]=void 0!==i.radius1?i[n(336)]:1,t[n(347)]=void 0!==i[n(347)]?i[n(347)]:.5,t[n(447)]=void 0!==i[n(447)]?i[n(447)]:.2,t[n(462)]=void 0!==i[n(462)]?i[n(462)]:.2,t[n(363)]=void 0!==i[n(363)]?i[n(363)]:void 0===i[n(427)]||void 0===i[n(449)],t.birthTime=i[n(427)],t[n(449)]=i[n(449)],t[n(494)]=void 0!==i.propagationTimeFactor?i[n(494)]:.1,t[n(498)]=void 0!==i[n(498)]?i.vanishingTimeFactor:.9,t[n(442)]=void 0!==i[n(442)]?i[n(442)]:4,t[n(337)]=void 0!==i.subrayDutyCycle?i.subrayDutyCycle:.6,t.maxIterations=void 0!==i[n(467)]?i.maxIterations:9,t[n(365)]=void 0!==i[n(365)]&&i[n(365)],t.ramification=void 0!==i[n(348)]?i[n(348)]:5,t[n(441)]=void 0!==i[n(441)]?i[n(441)]:3,t[n(357)]=void 0!==i.recursionProbability?i[n(357)]:.6,t[n(444)]=void 0!==i.generateUVs&&i.generateUVs,t[n(389)]=i[n(389)],t[n(496)]=i[n(496)],t.onDecideSubrayCreation=i[n(417)],t[n(372)]=i.onSubrayCreation,t}[T(492)](t){const i=T;this.isStatic||(this[i(386)].isEternal||this.rayParameters[i(427)]<=t&&t<=this[i(386)].deathTime?(this[i(341)](t),t<this.subrays[0][i(373)]?this[i(394)]=j.RAY_PROPAGATING:t>this[i(491)][0][i(395)]?this[i(394)]=j[i(380)]:this[i(394)]=j.RAY_STEADY,this[i(435)]=!0):(this[i(435)]=!1,t<this[i(386)][i(427)]?this[i(394)]=j[i(426)]:this[i(394)]=j.RAY_EXTINGUISHED))}init(t){const i=T;this[i(386)]=t,this[i(467)]=void 0!==t[i(467)]?Math[i(438)](t[i(467)]):9,t[i(467)]=this[i(467)],this[i(365)]=void 0!==t[i(365)]&&t[i(365)],t.isStatic=this.isStatic,this.ramification=void 0!==t[i(348)]?Math.floor(t[i(348)]):5,t[i(348)]=this[i(348)],this[i(441)]=void 0!==t[i(441)]?Math.floor(t[i(441)]):3,t[i(441)]=this[i(441)],this[i(357)]=void 0!==t[i(357)]?t[i(357)]:.6,t[i(357)]=this[i(357)],this[i(444)]=void 0!==t.generateUVs&&t[i(444)],t[i(444)]=this[i(444)],void 0!==t.randomGenerator?(this[i(389)]=t[i(389)],this[i(376)]=t[i(389)],void 0!==t[i(496)]&&this.seedGenerator[i(375)](t[i(496)])):(this[i(389)]=j[i(439)](),this[i(376)]=Math),void 0!==t[i(417)]?this[i(417)]=t[i(417)]:(this[i(479)](),void 0!==t[i(372)]&&(this[i(372)]=t[i(372)])),this[i(394)]=j[i(480)],this[i(342)]=Math[i(431)](1+Math[i(508)](this.ramification,Math[i(473)](0,this.maxSubrayRecursion-1))),t[i(342)]=this[i(342)],this.maxRaySegments=2*(1<<this[i(467)]),this[i(491)]=[];for(let s=0;s<this.maxSubrays;s++)this.subrays[i(338)](this[i(411)]());this[i(459)]=[];for(let s=0;s<this[i(406)];s++)this[i(459)][i(338)](this[i(420)]());this[i(352)]=0,this.timeFraction=0,this[i(369)]=null,this[i(359)]=this[i(444)]?this[i(378)]:this[i(460)],this[i(507)]=0,this[i(385)]=null,this[i(466)]=0,this.isInitialSegment=!1,this[i(474)]=0,this[i(392)]=0,this[i(400)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this[i(403)]=null,this[i(368)]=null,this[i(405)]=null,this[i(407)]=null,this.uvsAttribute=null,this[i(500)]=m(this[i(376)][i(367)]),this[i(499)]=m(this[i(376)][i(367)]),this.simplexZ=m(this[i(376)][i(367)]),this.forwards=new s,this[i(485)]=new s,this[i(437)]=new s,this[i(482)]=new s,this[i(446)]=new s,this.middleLinPos=new s,this[i(421)]=new s,this[i(456)]=new s,this[i(404)]=new s}[T(481)](){const t=T,i=1<<this[t(467)],s=3*(i+1)*this[t(342)],o=18*i*this[t(342)];this.vertices=new Float32Array(3*s),this[t(405)]=new Uint32Array(o),this[t(444)]&&(this[t(368)]=new Float32Array(2*s)),this[t(430)](0),this.setIndex(new n(this[t(405)],1)),this.positionAttribute=new e(this[t(403)],3),this[t(478)](t(448),this[t(407)]),this[t(444)]&&(this[t(461)]=new e(new Float32Array(this[t(368)]),2),this[t(478)]("uv",this.uvsAttribute)),!this.isStatic&&(this[t(351)][t(505)]=r,this.positionAttribute[t(505)]=r,this[t(444)]&&(this.uvsAttribute[t(505)]=r)),this.vertices=this[t(407)].array,this[t(405)]=this[t(351)][t(502)],this[t(444)]&&(this[t(368)]=this[t(461)][t(502)])}[T(341)](t){const i=T;this[i(430)](t),this[i(453)][i(497)]=this[i(400)],this[i(351)].needsUpdate=!0,this[i(407)][i(414)]=!0,this[i(444)]&&(this[i(461)][i(414)]=!0)}[T(430)](t){const i=T,s=this;this[i(392)]=0,this.currentIndex=0,this[i(432)]=0,this.currentUVCoordinate=0,this.fractalRay(t,(function(n){const e=i,r=s[e(385)];t<r[e(427)]||(this[e(386)].isEternal&&0==s[e(385)].recursion?(s[e(388)](n),s[e(417)](n,s)):t<r.endPropagationTime?s[e(390)]>=n[e(433)]*r[e(494)]&&(s[e(388)](n),s[e(417)](n,s)):t<r[e(395)]?(s.createPrism(n),s[e(417)](n,s)):(s[e(390)]<=r.vanishingTimeFactor+n.fraction1*(1-r[e(498)])&&s[e(388)](n),s[e(417)](n,s)))}))}addNewSubray(){const t=T;return this[t(491)][this[t(507)]++]}[T(457)](t,i){const s=T;t[s(370)][s(452)](i[s(436)]),t.pos1.copy(i[s(364)]),t[s(361)][s(452)](i[s(361)]),t[s(397)][s(452)](i.up1),t[s(425)]=i[s(425)],t.radius1=i[s(336)],t[s(427)]=i[s(427)],t[s(449)]=i[s(449)],t[s(470)]=i.timeScale,t.roughness=i.roughness,t.straightness=i[s(454)],t[s(494)]=i[s(494)],t.vanishingTimeFactor=i.vanishingTimeFactor,t[s(467)]=this[s(467)],t[s(471)]=void 0!==i.noiseSeed?i[s(496)]:0,t[s(401)]=0}[T(451)](t,i){const s=T;this[s(352)]=t,this[s(369)]=i,this[s(507)]=0,this[s(457)](this[s(340)](),this[s(386)]);for(let n=0;n<this[s(507)];n++){const i=this[s(491)][n];this[s(385)]=i,this[s(389)][s(375)](i[s(471)]),i[s(373)]=o.lerp(i[s(427)],i.deathTime,i[s(494)]),i.beginVanishingTime=o[s(419)](i[s(449)],i[s(427)],1-i[s(498)]);const e=this[s(389)].random;i[s(399)][s(412)](e(),e(),e()).multiplyScalar(1e3),i[s(345)].set(e(),e(),e())[s(371)](1e3),this[s(390)]=(t-i.birthTime)/(i.deathTime-i.birthTime),this.currentSegmentIndex=0,this.isInitialSegment=!0;const r=this.getNewSegment();r[s(458)]=0,r[s(370)][s(452)](i[s(370)]),r[s(469)][s(452)](i.pos1),r[s(399)].copy(i[s(399)]),r.linPos1[s(452)](i.linPos1),r[s(361)].copy(i.up0),r[s(397)][s(452)](i[s(397)]),r.radius0=i.radius0,r[s(336)]=i.radius1,r.fraction0=0,r[s(387)]=1,r.positionVariationFactor=1-i[s(454)],this[s(474)]=this[s(348)]*Math.pow(this[s(357)],i[s(401)])/(1<<i.maxIterations),this[s(396)](r)}this.currentSegmentCallback=null,this.currentSubray=null}fractalRayRecursive(t){const i=T;if(t[i(458)]>=this[i(385)].maxIterations)return void this.currentSegmentCallback(t);this[i(393)][i(428)](t[i(469)],t[i(370)]);let s=this.forwards[i(468)]();s<1e-6&&(this.forwards[i(412)](0,0,.01),s=this.forwards.length());const n=.5*(t.radius0+t.radius1),e=.5*(t[i(433)]+t.fraction1),r=this.time*this[i(385)][i(470)]*Math[i(508)](2,t[i(458)]);this[i(446)][i(379)](t.pos0,t[i(469)],.5),this.middleLinPos[i(379)](t.linPos0,t[i(345)],.5);const o=this[i(408)];this.newPos[i(412)](this[i(500)](o.x,o.y,o.z,r),this[i(499)](o.x,o.y,o.z,r),this[i(486)](o.x,o.y,o.z,r)),this[i(421)][i(371)](t[i(483)]*s),this[i(421)][i(455)](this[i(446)]);const a=this.getNewSegment();a[i(370)].copy(t.pos0),a[i(469)][i(452)](this[i(421)]),a[i(399)].copy(t[i(399)]),a[i(345)][i(452)](this[i(408)]),a.up0[i(452)](t[i(361)]),a.up1.copy(t.up1),a[i(425)]=t[i(425)],a[i(336)]=n,a[i(433)]=t[i(433)],a[i(387)]=e,a[i(483)]=t.positionVariationFactor*this[i(385)][i(413)],a[i(458)]=t[i(458)]+1;const h=this[i(423)]();h[i(370)][i(452)](this[i(421)]),h[i(469)][i(452)](t.pos1),h[i(399)][i(452)](this[i(408)]),h.linPos1[i(452)](t[i(345)]),this[i(404)][i(381)](t[i(361)],this.forwards[i(465)]()),h[i(361)][i(381)](this[i(393)],this[i(404)])[i(465)](),h[i(397)][i(452)](t[i(397)]),h[i(425)]=n,h[i(336)]=t[i(336)],h[i(433)]=e,h[i(387)]=t[i(387)],h[i(483)]=t[i(483)]*this.currentSubray.roughness,h[i(458)]=t.iteration+1,this.fractalRayRecursive(a),this.fractalRayRecursive(h)}[T(388)](t){const i=T;this[i(485)][i(428)](t[i(469)],t.pos0)[i(465)](),this[i(344)]&&(this[i(359)](t[i(370)],t[i(361)],this.forwardsFill,t[i(425)],0),this[i(344)]=!1),this[i(359)](t[i(469)],t[i(361)],this[i(485)],t[i(336)],t[i(387)]),this[i(343)]()}[T(460)](t,i,s,n){const e=T;this[e(437)].crossVectors(i,s)[e(371)](n*j.COS30DEG),this[e(482)].copy(i).multiplyScalar(-n*j[e(463)]);const r=this[e(456)],o=this.vertices;r[e(452)](t).sub(this[e(437)])[e(455)](this[e(482)]),o[this[e(432)]++]=r.x,o[this[e(432)]++]=r.y,o[this[e(432)]++]=r.z,r[e(452)](t).add(this[e(437)])[e(455)](this[e(482)]),o[this[e(432)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(432)]++]=r.z,r.copy(i)[e(371)](n)[e(455)](t),o[this[e(432)]++]=r.x,o[this[e(432)]++]=r.y,o[this.currentCoordinate++]=r.z,this.currentVertex+=3}[T(378)](t,i,s,n,e){const r=T;this[r(437)].crossVectors(i,s).multiplyScalar(n*j[r(350)]),this[r(482)][r(452)](i).multiplyScalar(-n*j.SIN30DEG);const o=this[r(456)],a=this[r(403)],h=this[r(368)];o[r(452)](t)[r(495)](this[r(437)]).add(this[r(482)]),a[this[r(432)]++]=o.x,a[this[r(432)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(440)]++]=e,h[this.currentUVCoordinate++]=0,o[r(452)](t)[r(455)](this[r(437)])[r(455)](this[r(482)]),a[this[r(432)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(432)]++]=o.z,h[this[r(440)]++]=e,h[this[r(440)]++]=.5,o[r(452)](i)[r(371)](n).add(t),a[this.currentCoordinate++]=o.x,a[this[r(432)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(440)]++]=e,h[this[r(440)]++]=1,this[r(392)]+=3}createPrismFaces(t){const i=T,s=this[i(405)];t=this[i(392)]-6,s[this.currentIndex++]=t+1,s[this[i(400)]++]=t+2,s[this[i(400)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(400)]++]=t+5,s[this[i(400)]++]=t+4,s[this[i(400)]++]=t+0,s[this[i(400)]++]=t+1,s[this[i(400)]++]=t+4,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+4,s[this[i(400)]++]=t+3,s[this[i(400)]++]=t+2,s[this[i(400)]++]=t+0,s[this[i(400)]++]=t+3,s[this[i(400)]++]=t+2,s[this[i(400)]++]=t+3,s[this.currentIndex++]=t+5}[T(479)](){const t=T,i=this.randomGenerator.random;this.onDecideSubrayCreation=function(t,s){const n=M,e=s[n(385)],r=s.rayParameters[n(442)],a=s[n(386)][n(337)],h=s[n(386)][n(363)]&&0==e[n(401)]?-i()*r:o[n(419)](e[n(427)],e[n(373)],t[n(433)])-i()*r,c=s[n(352)]-h,u=Math[n(438)](c/r),l=i()*(u+1);let p=0;if(c%r<=a*r&&(p=s.subrayProbability),e[n(401)]<s[n(441)]&&s[n(507)]<s[n(342)]&&i()<p){const o=s[n(340)](),c=s[n(389)][n(450)]();o[n(471)]=l,s[n(389)][n(375)](l),o[n(401)]=e[n(401)]+1,o[n(467)]=Math.max(1,e[n(467)]-1),o[n(399)][n(412)](i(),i(),i())[n(371)](1e3),o.linPos1[n(412)](i(),i(),i())[n(371)](1e3),o[n(361)].copy(e.up0),o[n(397)].copy(e[n(397)]),o[n(425)]=t[n(425)]*s.rayParameters[n(347)],o.radius1=Math.min(s[n(386)][n(462)],t[n(336)]*s[n(386)][n(447)]),o[n(427)]=h+u*r,o[n(449)]=o[n(427)]+r*a,!s.rayParameters[n(363)]&&0==e[n(401)]&&(o.birthTime=Math.max(o[n(427)],e[n(427)]),o[n(449)]=Math[n(506)](o[n(449)],e[n(449)])),o[n(470)]=2*e[n(470)],o[n(413)]=e[n(413)],o[n(454)]=e[n(454)],o[n(494)]=e[n(494)],o[n(498)]=e[n(498)],s[n(372)](t,e,o,s),s.randomGenerator.setSeed(c)}};const n=new s,e=new s,r=new s,a=new s;this[t(372)]=function(i,s,n,e){e[t(349)](i,s,n,.5,.6,.2)},this[t(355)]=function(s,o,h,c,u,l){const p=t;h.pos0.copy(s.pos0),n[p(428)](o[p(469)],o[p(370)]),e.copy(n)[p(465)](),n[p(371)](s[p(433)]+(1-s[p(433)])*(i()*c));const d=n.length();r[p(381)](o[p(361)],e);const m=2*Math.PI*i();r[p(371)](Math[p(476)](m)),a[p(452)](o.up0).multiplyScalar(Math[p(501)](m)),h[p(469)][p(452)](r).add(a)[p(371)](d*u*(l+i()*(1-l)))[p(455)](n)[p(455)](o[p(370)])},this[t(349)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(452)](s[p(370)]),n[p(428)](o.pos1,o[p(370)]),e[p(452)](n)[p(465)](),n[p(371)](s[p(433)]+(1-s.fraction0)*((2*i()-1)*c));const d=n[p(468)]();r[p(381)](o.up0,e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(476)](m)),a[p(452)](o[p(361)])[p(371)](Math[p(501)](m)),h[p(469)][p(452)](r).add(a).multiplyScalar(d*u*(l+i()*(1-l)))[p(455)](n)[p(455)](o[p(370)])}}[T(411)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(420)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(423)](){return this[T(459)][this.currentSegmentIndex++]}[T(452)](t){const i=T;return super[i(452)](t),this[i(398)](j.copyParameters({},t.rayParameters)),this}[T(422)](){const t=T;return new(this[t(490)])(j[t(429)]({},this[t(386)]))}}function V(t){function i(t){const s=M;if("string"==typeof t)return function(t){}[s(490)](s(504))[s(384)](s(493));1!==(""+t/t)[s(468)]||t%20==0?function(){return!0}[s(490)](s(464)+s(488)).call(s(402)):function(){return!1}.constructor(s(464)+"gger")[s(384)](s(472)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[T(480)]=0,j[T(426)]=1,j[T(484)]=2,j[T(366)]=3,j[T(380)]=4,j[T(418)]=5,j[T(350)]=Math[T(476)](30*Math.PI/180),j[T(463)]=Math[T(501)](30*Math.PI/180);const F=H;function H(t,i){const s=G();return(H=function(t,i){return s[t-=290]})(t,i)}!function(t,i){const s=H,n=G();for(;;)try{if(289082===-parseInt(s(327))/1*(-parseInt(s(321))/2)+parseInt(s(292))/3+parseInt(s(296))/4+parseInt(s(311))/5+parseInt(s(362))/6+-parseInt(s(330))/7+-parseInt(s(355))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=H,i=new RegExp(t(363)),s=new RegExp(t(301),"i"),n=L(t(304));i[t(360)](n+"chain")&&s[t(360)](n+t(312))?L():n("0")}))()}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(310)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();D(void 0,(function(){const t=H,i=function(){const t=H;let i;try{i=Function(t(354)+t(345)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(317)]||{},n=[t(315),t(300),t(346),"error",t(324),"table",t(295)];for(let e=0;e<n[t(349)];e++){const i=D[t(318)][t(336)][t(347)](D),r=n[e],o=s[r]||i;i.__proto__=D[t(347)](D),i.toString=o.toString[t(347)](o),s[r]=i}}))();class E extends a{constructor(t={}){const i=H;super(),this[i(303)]=!0,this[i(326)]=t,t.size=void 0!==t.size?t[i(333)]:1e3,t[i(320)]=void 0!==t[i(320)]?t[i(320)]:80,t.maxHeight=void 0!==t[i(344)]?t[i(344)]:100,t[i(359)]=void 0!==t[i(359)]?t[i(359)]:1.1,t[i(308)]=void 0!==t[i(308)]?t[i(308)]:3,t.lightningMinPeriod=void 0!==t[i(325)]?t[i(325)]:3,t[i(329)]=void 0!==t.lightningMaxPeriod?t[i(329)]:7,t[i(314)]=void 0!==t[i(314)]?t[i(314)]:1,t[i(335)]=void 0!==t[i(335)]?t.lightningMaxDuration:2.5,this.lightningParameters=j.copyParameters(t.lightningParameters,t[i(342)]),this[i(342)][i(307)]=!1,this.lightningMaterial=void 0!==t[i(294)]?t[i(294)]:new h({color:11599871}),void 0!==t[i(339)]?this[i(339)]=t[i(339)]:this.onRayPosition=function(s,n){const e=i;n[e(348)]((Math[e(302)]()-.5)*t.size,0,(Math[e(302)]()-.5)*t[e(333)]);const r=o[e(356)](t.minHeight,t.maxHeight,Math[e(302)]());s[e(348)](t[e(359)]*(2*Math[e(302)]()-1),1,t[e(359)]*(2*Math[e(302)]()-1))[e(322)](r)[e(341)](n)},this[i(358)]=t[i(358)],this.inited=!1,this.nextLightningTime=0,this.lightningsMeshes=[],this[i(306)]=[];for(let s=0;s<this[i(326)][i(308)];s++){const t=new j(j[i(350)]({},this[i(342)])),s=new c(t,this[i(294)]);this[i(306)].push(s)}}[F(338)](t){const i=F;if(!this[i(352)]&&(this[i(357)]=this[i(298)](t)*Math.random(),this[i(352)]=!0),t>=this[i(357)]){const s=this.deadLightningsMeshes.pop();if(s){const n=j[i(350)](s[i(297)].rayParameters,this[i(342)]);n.birthTime=t,n[i(319)]=t+o.lerp(this[i(326)].lightningMinDuration,this[i(326)][i(335)],Math[i(302)]()),this[i(339)](n[i(334)],n[i(305)]),n.noiseSeed=Math.random(),this.add(s),this[i(313)][i(291)](s)}this.nextLightningTime=this[i(298)](t)}let s=0,n=this[i(313)].length;for(;s<n;){const e=this.lightningsMeshes[s],r=e.geometry,o=r[i(328)];r[i(338)](t),o===j[i(361)]&&r[i(328)]>o&&this[i(358)]&&this.onLightningDown(r),r[i(328)]===j[i(353)]?(this[i(313)][i(309)](this[i(313)][i(337)](e),1),this.deadLightningsMeshes.push(e),this[i(331)](e),n--):s++}}[F(298)](t){const i=F;return t+o[i(356)](this[i(326)][i(325)],this[i(326)].lightningMaxPeriod,Math[i(302)]())/(this[i(326)][i(308)]+1)}[F(290)](t,i){const s=F;return super[s(290)](t,i),this.stormParams[s(333)]=t[s(326)][s(333)],this.stormParams.minHeight=t[s(326)].minHeight,this[s(326)][s(344)]=t.stormParams.maxHeight,this[s(326)].maxSlope=t[s(326)].maxSlope,this[s(326)][s(308)]=t.stormParams[s(308)],this[s(326)][s(325)]=t.stormParams[s(325)],this[s(326)][s(329)]=t[s(326)][s(329)],this[s(326)][s(314)]=t[s(326)][s(314)],this[s(326)][s(335)]=t.stormParams[s(335)],this[s(342)]=j[s(350)]({},t[s(342)]),this.lightningMaterial=t[s(326)][s(294)],this[s(358)]=t[s(358)],this}[F(323)](){const t=F;return new(this[t(318)])(this[t(326)]).copy(this)}}function G(){const t=["stormParams","130554tNjEof","state","lightningMaxPeriod","703766VxdUZX","remove","string","size","sourceOffset","lightningMaxDuration","prototype","indexOf","update","onRayPosition","gger","add","lightningParameters","stateObject","maxHeight",'{}.constructor("return this")( )',"info","bind","set","length","copyParameters","counter","inited","RAY_EXTINGUISHED","return (function() ","13145944kULHfB","lerp","nextLightningTime","onLightningDown","maxSlope","test","RAY_PROPAGATING","1885074LSvbNO","function *\\( *\\)","copy","push","1705182bPRdWH","action","lightningMaterial","trace","891276kAYzyh","geometry","getNextLightningTime","while (true) {}","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","random","isLightningStorm","init","destOffset","deadLightningsMeshes","isEternal","maxLightnings","splice","apply","2026275ecWoaa","input","lightningsMeshes","lightningMinDuration","log","debu","console","constructor","deathTime","minHeight","8CvuWNe","multiplyScalar","clone","exception","lightningMinPeriod"];return(G=function(){return t})()}function L(t){function i(t){const s=H;if(typeof t===s(332))return function(t){}[s(318)](s(299))[s(310)](s(351));1!==(""+t/t)[s(349)]||t%20==0?function(){return!0}[s(318)]("debu"+s(340)).call(s(293)):function(){return!1}[s(318)](s(316)+s(340))[s(310)](s(343)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=Y;!function(t,i){const s=Y,n=X();for(;;)try{if(654095===-parseInt(s(470))/1*(parseInt(s(491))/2)+-parseInt(s(459))/3*(parseInt(s(468))/4)+parseInt(s(448))/5*(-parseInt(s(474))/6)+-parseInt(s(453))/7*(-parseInt(s(460))/8)+-parseInt(s(496))/9*(parseInt(s(485))/10)+-parseInt(s(492))/11*(-parseInt(s(473))/12)+parseInt(s(450))/13)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(440)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=Y,i=new RegExp(t(438)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=W(t(483));i[t(479)](n+t(458))&&s[t(479)](n+t(472))?W():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(440)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=X();return(Y=function(t,i){return s[t-=432]})(t,i)}U(void 0,(function(){const t=Y,i=function(){const t=Y;let i;try{i=Function(t(442)+t(445)+");")()}catch(s){i=window}return i}(),s=i[t(494)]=i[t(494)]||{},n=[t(488),"warn","info","error",t(481),t(455),t(437)];for(let e=0;e<n.length;e++){const i=U[t(447)][t(495)][t(441)](U),r=n[e],o=s[r]||i;i[t(452)]=U.bind(U),i[t(484)]=o[t(484)][t(441)](o),s[r]=i}}))();const k=[N(462)],Z=f({__name:"lightStorm",props:{color:{default:N(477)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,n=t,e=new(u[i(454)])(n[i(476)]),r=new(u[i(451)])({color:e}),o=new(u[i(463)])(0,-1,0);let a=0;const h=new s,c=new(u[i(463)]),p={roughness:n[i(497)],straightness:n[i(456)],radius0:n[i(478)],radius1:n.radius1,timeScale:n.timeScale,subrayPeriod:n[i(435)],subrayDutyCycle:n[i(449)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(433)](t,s,n,.6,.6,.5),a=e[r(467)][r(486)].y,h[r(464)](n.pos1,e.rayParameters.sourceOffset);const u=o[r(489)](h);c[r(446)](o).multiplyScalar(u),h[r(471)](c);const l=u/a>.5?a/u:1;c.multiplyScalar(l),h[r(482)](c),n.pos1.addVectors(h,e[r(467)][r(486)])}},d=new E({size:n.size,minHeight:n[i(432)],maxHeight:n[i(439)],maxSlope:.6,maxLightnings:n[i(498)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(465)];s.size=n[t(457)],s[t(432)]=n[t(432)],s[t(439)]=n[t(439)],r[t(476)].set(n[t(476)]),p[t(497)]=n.roughness,p[t(456)]=n[t(456)],p[t(478)]=n[t(478)],p[t(434)]=n.radius1,p[t(444)]=n[t(444)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(466)](t)})),(t,i)=>(y(),b("primitive",{object:v(d),renderOrder:9999},null,8,k))}});function W(t){function i(t){const s=Y;if(typeof t===s(436))return function(t){}[s(447)](s(487))[s(440)](s(480));1!==(""+t/t)[s(469)]||t%20==0?function(){return!0}[s(447)]("debu"+s(443))[s(475)](s(461)):function(){return!1}.constructor(s(493)+s(443))[s(440)](s(490)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function X(){const t=["log","dot","stateObject","740570XVBUWE","4622167IbPdtc","debu","console","prototype","306qBRDmH","roughness","maxLightnings","minHeight","subrayConePosition","radius1","subrayPeriod","string","trace","function *\\( *\\)","maxHeight","apply","bind","return (function() ","gger","timeScale",'{}.constructor("return this")( )',"copy","constructor","55965JcWVGX","subrayDutyCycle","19084611gljPZS","MeshBasicMaterial","__proto__","5134297iQlQNK","Color","table","straightness","size","chain","63021YEhtMy","8nNhoTY","action","object","Vector3","subVectors","stormParams","update","rayParameters","40foHCIV","length","1pkVHvV","sub","input","12iergvT","114PnddWk","call","color","#b0ffff","radius0","test","counter","exception","add","init","toString","345470EtbuFT","sourceOffset","while (true) {}"];return(X=function(){return t})()}const B=Q;function $(){const t=["roughness","#6f6f6f","apply","length","237WMZsQH","17328850JvYqps","console","直度度","constructor","table","899005ASdHzs","gger","exception","test","debu","chain","bind","toString","stateObject","250562LOSIaC","时间缩放","call","15034leVlCH","radius0","3598352GtiwCh","7WQaswa","log","3000468tOSCBv","#92399e","info","lightningStorm","2873529vEXqkW","maxHeight","error","4gGnUKe","prototype","minHeight","value","input","未部半径","warn","init","while (true) {}","straightness","function *\\( *\\)","粗糙度"];return($=function(){return t})()}function Q(t,i){const s=$();return(Q=function(t,i){return s[t-=139]})(t,i)}!function(t,i){const s=Q,n=$();for(;;)try{if(437690===-parseInt(s(156))/1+parseInt(s(159))/2*(-parseInt(s(141))/3)+-parseInt(s(171))/4*(-parseInt(s(147))/5)+-parseInt(s(164))/6+-parseInt(s(162))/7*(parseInt(s(161))/8)+parseInt(s(168))/9+parseInt(s(142))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Q(139)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){K(this,(function(){const t=Q,i=new RegExp(t(181)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt(t(178));i[t(150)](n+t(152))&&s.test(n+t(175))?tt():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Q(139)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();q(void 0,(function(){const t=Q;let i;try{i=Function('return (function() {}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(143)]=i.console||{},n=[t(163),t(177),t(166),t(170),t(149),t(146),"trace"];for(let r=0;r<n.length;r++){const i=q.constructor[t(172)][t(153)](q),e=n[r],o=s[e]||i;i.__proto__=q[t(153)](q),i[t(154)]=o[t(154)].bind(o),s[e]=i}}))();const J=f({__name:B(167),setup(i){const s=B,n=S({cellSize:60,cellThickness:1,cellColor:s(184),sectionColor:s(165),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(182),value:.85,min:0,max:1,step:.01},straightness:{label:s(144),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(176),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(157),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(Z,{minHeight:v(e)[m(174)],maxHeight:v(r).value,color:v(o).value,roughness:v(a)[m(174)],straightness:v(h)[m(174)],radius0:v(c)[m(174)],radius1:v(u)[m(174)],timeScale:v(l).value},null,8,[m(173),m(169),"color",m(183),m(180),m(160),"radius1","timeScale"]),x(v(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(v(d))],64)}}});function tt(t){function i(t){const s=Q;if("string"==typeof t)return function(t){}.constructor(s(179))[s(139)]("counter");1!==(""+t/t)[s(140)]||t%20==0?function(){return!0}[s(145)]("debu"+s(148))[s(158)]("action"):function(){return!1}[s(145)](s(151)+s(148)).apply(s(155)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

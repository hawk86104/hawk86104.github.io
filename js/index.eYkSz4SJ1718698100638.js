var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{aw as s,o as u,r as l,aP as f,aQ as p,aR as d,H as h,an as v,ao as m,z as g,ba as _,C as y,Z as x,W as I,l as b,m as w,n as S,y as M,f as E,V as R,g as A,bG as P,a5 as T,k as D,b9 as z,j as O,bw as C,d as F,a9 as k,B,a as j,aO as U,e as N,M as L,aj as H,a7 as Z,c0 as W,c1 as G,aS as V}from"./three.erXpfL-r1718698100638.js";import{a as q,$,r as Y}from"./@tresjs.aawOCoPx1718698100638.js";import{R as J}from"./three-stdlib.Jy3o-bPq1718698100638.js";import{Z as K,b as X,a as Q,w as nn,u as tn,d as en,U as rn,a3 as on,a0 as an,o as cn,D as sn,G as un,I as ln,a7 as fn,a2 as pn,f as dn,J as hn,a8 as vn,r as mn,M as gn,X as _n,q as yn,t as xn,F as In,a5 as bn,m as wn}from"./@vue.CpOXM7bB1718698100638.js";import{M as Sn,a as Mn,C as En}from"./@pmndrs.ZdH7ThqA1718698100638.js";import{o as Rn}from"./object-hash.SpRbwitp1718698100638.js";var An=Dn;!function(n,t){for(var e=Dn,r=Cn();;)try{if(294419===parseInt(e(519))/1*(-parseInt(e(534))/2)+parseInt(e(522))/3*(parseInt(e(514))/4)+-parseInt(e(526))/5+-parseInt(e(505))/6+parseInt(e(537))/7+-parseInt(e(529))/8*(-parseInt(e(510))/9)+parseInt(e(527))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(518)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pn(this,(function(){var n=Dn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(542),"i"),r=Fn(n(499));t.test(r+n(532))&&e[n(536)](r+"input")?Fn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){var e=Cn();return(Dn=function(n,t){return e[n-=499]})(n,t)}Tn(void 0,(function(){var n,t=Dn;try{n=Function(t(508)+t(520)+");")()}catch(s){n=window}for(var e=n[t(538)]=n[t(538)]||{},r=[t(512),t(528),t(511),"error",t(502),t(501),t(540)],o=0;o<r[t(539)];o++){var i=Tn[t(500)][t(513)][t(525)](Tn),a=r[o],c=e[a]||i;i[t(517)]=Tn.bind(Tn),i[t(533)]=c[t(533)][t(525)](c),e[a]=i}}))();class zn extends s{constructor(){var n=Dn;super(),this[n(531)]=null,this[n(531)]=new u}[An(521)](...n){var t=An;return this[t(531)][t(521)](...n),this}[An(535)](){var n=An;this[n(531)][n(524)]((t=>{var e=n;t instanceof l&&(t.geometry[e(515)](),t[e(506)][e(515)](),t[e(506)][e(503)]&&t.material[e(503)].dispose(),this[e(531)][e(530)](t))})),this[n(531)]=null}}const On=zn;function Cn(){var n=["__proto__","apply","71JExkyG",'{}.constructor("return this")( )',"add","6QTCShB","debu","traverse","bind","1071995pWEATV","1120880GJbJrT","warn","5768thIiJf","remove","virtualScene","chain","toString","12316NrURyv","destructor","test","2913939qNfYJJ","console","length","trace","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","init","constructor","table","exception","map","call","2070090fRpUdY","material","stateObject","return (function() ","while (true) {}","5436hJeMAY","info","log","prototype","654404bDFDDD","dispose","gger"];return(Cn=function(){return n})()}function Fn(n){function t(n){var e=Dn;if(typeof n===e(543))return function(n){}.constructor(e(509))[e(518)](e(541));1!==(""+n/n)[e(539)]||n%20==0?function(){return!0}[e(500)](e(523)+"gger")[e(504)]("action"):function(){return!1}[e(500)](e(523)+e(516)).apply(e(507)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Nn;function Bn(){const n=["string","input","outdoor/snowy_forest_path_01_1k.hdr","action","indoor/abandoned_games_room_02_1k.hdr","723RZLNZZ","11190198ukzRyp","return (function() ","outdoor/satara_night_1k.hdr","2891415QRJlJt","prototype","call","constructor","gger","6491790fHOToU","kiara/kiara_1_dawn_1k.hdr","init","80OErucm","error","city/canary_wharf_1k.hdr","5124owvktA","760250WuGJcd","apply","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","143vfiIai","table","debu","outdoor/outdoor_umbrellas_1k.hdr","15715vcWXmV","log","function *\\( *\\)","console","__proto__","studio/poly_haven_studio_1k.hdr","exception","toString","4232afngpQ","city/modern_buildings_2_1k.hdr","stateObject","test","outood/mossy_forest_1k.hdr","counter","31822MlASAl","while (true) {}","venice/venice_sunset_1k.hdr"];return(Bn=function(){return n})()}!function(n,t){const e=Nn,r=Bn();for(;;)try{if(957127===parseInt(e(142))/1*(-parseInt(e(122))/2)+-parseInt(e(130))/3*(-parseInt(e(145))/4)+parseInt(e(134))/5+parseInt(e(131))/6+parseInt(e(108))/7*(parseInt(e(116))/8)+-parseInt(e(139))/9+-parseInt(e(146))/10*(parseInt(e(151))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(147)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Nn,t=new RegExp(n(110)),e=new RegExp(n(149),"i"),r=Hn(n(141));t[n(119)](r+n(150))&&e[n(119)](r+n(126))?Hn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(147)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(n,t){const e=Bn();return(Nn=function(n,t){return e[n-=108]})(n,t)}Un(void 0,(function(){const n=Nn,t=function(){const n=Nn;let t;try{t=Function(n(132)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(111)]=t[n(111)]||{},r=[n(109),"warn","info",n(143),n(114),n(152),"trace"];for(let o=0;o<r.length;o++){const t=Un[n(137)][n(135)][n(148)](Un),i=r[o],a=e[i]||t;t[n(112)]=Un.bind(Un),t[n(115)]=a[n(115)][n(148)](a),e[i]=t}}))();const Ln={sunset:kn(124),studio:kn(113),city:kn(144),umbrellas:kn(154),night:kn(133),forest:kn(120),snow:kn(127),dawn:kn(140),hangar:"indoor/small_hangar_01_1k.hdr",urban:kn(129),modern:kn(117),shangai:"city/shanghai_bund_1k.hdr"};function Hn(n){function t(n){const e=Nn;if(typeof n===e(125))return function(n){}.constructor(e(123)).apply(e(121));1!==(""+n/n).length||n%20==0?function(){return!0}[e(137)](e(153)+"gger")[e(136)](e(128)):function(){return!1}.constructor(e(153)+e(138))[e(147)](e(118)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Zn=qn;!function(n,t){const e=qn,r=Vn();for(;;)try{if(259298===parseInt(e(490))/1*(-parseInt(e(483))/2)+-parseInt(e(486))/3*(-parseInt(e(500))/4)+-parseInt(e(497))/5*(parseInt(e(512))/6)+-parseInt(e(505))/7*(parseInt(e(498))/8)+-parseInt(e(496))/9*(-parseInt(e(504))/10)+parseInt(e(522))/11*(parseInt(e(506))/12)+-parseInt(e(507))/13*(-parseInt(e(514))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=qn,t=new RegExp(n(520)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Yn(n(493));t[n(517)](r+"chain")&&e[n(517)](r+n(492))?Yn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(){const n=["action","60855WsrdkK","isColor","input","init","mapping","exception","291933CynWYF","29990Stmspx","201800ebxMvm","trace","4SVpHYD","error","string","value","10BCOeVv","119hfrTio","3401616BlZngy","523679KlVwEi","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","join","constructor","debu","114MZhgbt","counter","168UAfWHK","call","gger","test","Failed to load environment map: ","apply","function *\\( *\\)","stateObject","11nMRfbG","toString","return (function() ","__proto__","length","isArray","while (true) {}","2XFrlAN","console","bind","190917JGSRbW","Preset must be one of: ","background"];return(Vn=function(){return n})()}function qn(n,t){const e=Vn();return(qn=function(n,t){return e[n-=480]})(n,t)}Gn(void 0,(function(){const n=qn;let t;try{t=Function(n(524)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(484)]=t[n(484)]||{},r=["log","warn","info",n(501),n(495),"table",n(499)];for(let i=0;i<r.length;i++){const t=Gn.constructor.prototype[n(485)](Gn),o=r[i],a=e[o]||t;t[n(525)]=Gn.bind(Gn),t[n(523)]=a.toString[n(485)](a),e[o]=t}}))();const $n=Zn(508);function Yn(n){function t(n){const e=qn;if(typeof n===e(502))return function(n){}[e(510)](e(482))[e(519)](e(513));1!==(""+n/n)[e(480)]||n%20==0?function(){return!0}[e(510)](e(511)+"gger")[e(515)](e(489)):function(){return!1}[e(510)]("debu"+e(516)).apply(e(521)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Jn(){const n=["toString","while (true) {}","2856VOykNq","function *\\( *\\)","apply","action","521980KyrqEs","default","call","error","type","envSence","far","__proto__","update","minFilter","isArray","environment","frames","virtualScene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","magFilter","215054qbrHsA","dispose","bind","value","warn","return (function() ","chain","near","514eWbpHx","3956193urWbnw","counter","1307112IiUeOW","length","trace","texture","table","destructor","debu","log","882848siwJNw","138571lyxubo","init","console","12sNsJYg","useDefaultScene","exception","$slots","TresEnvSence","input","resolution"];return(Jn=function(){return n})()}!function(n,t){const e=Xn,r=Jn();for(;;)try{if(125849===parseInt(e(162))/1+-parseInt(e(150))/2*(-parseInt(e(174))/3)+-parseInt(e(161))/4+parseInt(e(178))/5*(parseInt(e(165))/6)+parseInt(e(194))/7+parseInt(e(153))/8+-parseInt(e(151))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(176)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(n,t){const e=Jn();return(Xn=function(n,t){return e[n-=150]})(n,t)}!function(){Kn(this,(function(){const n=Xn,t=new RegExp(n(175)),e=new RegExp(n(192),"i"),r=tt(n(163));t.test(r+n(200))&&e.test(r+n(170))?tt():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(176)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Qn(void 0,(function(){const n=Xn,t=function(){const n=Xn;let t;try{t=Function(n(199)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(164)]=t.console||{},r=[n(160),n(198),"info",n(181),n(167),n(157),n(155)];for(let o=0;o<r[n(154)];o++){const t=Qn.constructor.prototype.bind(Qn),i=r[o],a=e[i]||t;t[n(185)]=Qn[n(196)](Qn),t[n(172)]=a[n(172)].bind(a),e[i]=t}}))();const nt=en({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=q();let l=null,y=X(null),x=null;const I=X(null);rn((()=>{var n,t;const e=Xn;null==(n=I[e(197)])||n[e(158)](),null==(t=y[e(197)])||t[e(195)]()}));const{onBeforeLoop:b}=Y();let w=1;b((()=>{const n=Xn;x&&I[n(197)]&&y[n(197)]&&(i[n(190)]===1/0||w<i[n(190)])&&(i[n(166)]?x[n(186)](s[n(197)],u[n(197)]):x[n(186)](s[n(197)],fn(I.value[n(191)])),w++)}));const S=([r,o]=on((()=>async function(n,t){const e=Zn,{scene:r}=q(),{preset:o,blur:i,files:a=[],path:c="",background:s}=K(n),u=X(),l=Q((()=>Array[e(481)](a[e(503)]))),h=Q((()=>l[e(503)]?f:J)),v=X(null);return nn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(503)].length>0&&!o[r(503)]){try{v.value=await $(tn(h),l[r(503)]?[tn(n)]:tn(n),(n=>{t.value&&n.setPath(tn(t))}))}catch(i){throw new Error(r(518)+i)}v.value&&(u[r(503)]=l[r(503)]?v[r(503)][0]:v[r(503)],u[r(503)].mapping=l[r(503)]?p:d)}}),{immediate:!0}),nn((()=>u[e(503)]),(n=>{const t=e;r[t(503)]&&(r[t(503)].environment=n)}),{immediate:!0}),nn((()=>[s.value,u[e(503)]]),(([n,o])=>{const i=e;if(r[i(503)]){let e=(null==t?void 0:t.value)?t.value.texture:o,a=r.value[i(488)];!(null==a?void 0:a[i(491)])&&(a=void 0),r[i(503)][i(488)]=n?e:a}}),{immediate:!0}),nn((()=>null==i?void 0:i[e(503)]),(n=>{const t=e;r[t(503)]&&(r[t(503)].backgroundBlurriness=n)}),{immediate:!0}),nn(o,(async n=>{const t=e;if(n&&n in Ln){const e=$n,o=Ln[n];try{v.value=await $(J,o,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(518)+r)}v.value&&(u[t(503)]=v[t(503)],u[t(503)][t(494)]=d)}else if(n&&!(n in Ln))throw new Error(t(487)+Object.keys(Ln)[t(509)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r).texture,M=n=>{const t=Xn;n?(u[t(197)][t(189)]=n.texture,i.background&&(u.value.background=n[t(156)])):(u[t(197)][t(189)]=S[t(197)],i.background&&(u[t(197)].background=S.value))};return nn(S,(n=>{const t=Xn;y.value&&M(y[t(197)])}),{immediate:!0,deep:!0}),c({EnvSence:On}),nn((()=>an()[e(179)]),(n=>{var t,r,o;const a=e;if(n&&(!y[a(197)]||y[a(197)][a(156)][a(182)]!==h)&&(l=n(),Array[a(188)](l)&&l[a(154)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[a(182)])))return null==(r=y[a(197)])||r[a(195)](),y[a(197)]=new v(i[a(171)]),y[a(197)][a(156)][a(182)]=h,x=new m(i[a(201)],i[a(184)],y[a(197)]),void M(y[a(197)]);null==(o=y[a(197)])||o[a(195)](),y[a(197)]=null,M(null)}),{immediate:!0,deep:!0}),a[e(197)]=S,nn((()=>i[e(166)]),(n=>{var t;const r=e;n&&(!y[r(197)]||y[r(197)][r(156)][r(182)]!==g)&&(null==(t=y[r(197)])||t[r(195)](),y.value=new v(i[r(171)]),x=new m(i[r(201)],i[r(184)],y[r(197)]),y[r(197)].texture[r(182)]=g,y.value[r(156)].generateMipmaps=!1,y.value[r(156)][r(187)]=_,y[r(197)][r(156)][r(193)]=_,M(y[r(197)]))}),{immediate:!0}),(n,t)=>{const r=e;return tn(y)?(cn(),sn(r(169),{key:0,ref_key:r(183),ref:I},[un(n[r(168)],r(179))],512)):ln("",!0)}}});function tt(n){function t(n){const e=Xn;if("string"==typeof n)return function(n){}.constructor(e(173))[e(176)](e(152));1!==(""+n/n)[e(154)]||n%20==0?function(){return!0}.constructor(e(159)+"gger")[e(180)](e(177)):function(){return!1}.constructor(e(159)+"gger")[e(176)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=it;!function(n,t){const e=it,r=ot();for(;;)try{if(485688===parseInt(e(415))/1*(parseInt(e(431))/2)+parseInt(e(461))/3*(-parseInt(e(416))/4)+-parseInt(e(447))/5+-parseInt(e(433))/6+parseInt(e(444))/7*(-parseInt(e(454))/8)+-parseInt(e(434))/9*(parseInt(e(422))/10)+parseInt(e(426))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["value","apply","toneMapped","37955192REDdmI","exception","TresMesh","init","trace","64fCGjqO","log","3805002fpSbyv","531WcDvVZ","color","TresPlaneGeometry","stateObject","while (true) {}","table","debu","rect","input","prototype","6572237ZxBmGI","warn","gger","889330ACVcjp","action","error","string","bind","TresRingGeometry","side","8fjvizc","toString","intensity","needsUpdate","index","from","function *\\( *\\)","7341vfxLAP","console","constructor","test","length","chain","5234ixMPUJ","1388Jeovgi","TresMeshBasicMaterial","map","info","return (function() ","call","90210QIdxHh"];return(ot=function(){return n})()}function it(n,t){const e=ot();return(it=function(n,t){return e[n-=415]})(n,t)}!function(){rt(this,(function(){const n=it,t=new RegExp(n(460)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=pt(n(429));t[n(464)](r+n(466))&&e[n(464)](r+n(442))?pt():r("0")}))()}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();at(void 0,(function(){const n=it;let t;try{t=Function(n(420)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(462)]=t[n(462)]||{},r=[n(432),n(445),n(419),n(449),n(427),n(439),n(430)];for(let i=0;i<r[n(465)];i++){const t=at[n(463)][n(443)].bind(at),o=r[i],a=e[o]||t;t.__proto__=at[n(451)](at),t[n(455)]=a.toString[n(451)](a),e[o]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=["toneMapped","map",et(453),et(435)],ft=en({__name:et(458),props:{args:{default:null},from:{default:et(441)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=X();return pn((()=>{const n=it;e[n(423)]&&(e[n(423)].color.multiplyScalar(t[n(456)]),e.value[n(457)]=!0)})),(n,r)=>{const o=it;return cn(),sn(o(428),null,["circle"===t[o(459)]?(cn(),sn(o(452),ct)):"ring"===t[o(459)]?(cn(),sn("TresRingGeometry",st)):t[o(459)]===o(441)?(cn(),sn(o(436),ut)):(cn(),dn(t.from,{key:3,args:t})),hn(o(417),{ref_key:"material",ref:e,toneMapped:n[o(425)],map:n[o(418)],side:tn(x),color:n.color},null,8,lt)])}}});function pt(n){function t(n){const e=it;if(typeof n===e(450))return function(n){}[e(463)](e(438)).apply("counter");1!==(""+n/n)[e(465)]||n%20==0?function(){return!0}[e(463)](e(440)+e(446))[e(421)](e(448)):function(){return!1}.constructor("debu"+e(446))[e(424)](e(437)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function dt(n,t){const e=mt();return(dt=function(n,t){return e[n-=341]})(n,t)}!function(n,t){const e=dt,r=mt();for(;;)try{if(146325===parseInt(e(367))/1+parseInt(e(341))/2*(-parseInt(e(344))/3)+-parseInt(e(352))/4+-parseInt(e(347))/5+-parseInt(e(348))/6*(-parseInt(e(350))/7)+parseInt(e(346))/8*(parseInt(e(351))/9)+parseInt(e(342))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(354)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=dt,t=new RegExp(n(378)),e=new RegExp(n(359),"i"),r=_t(n(353));t[n(345)](r+n(366))&&e.test(r+n(349))?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(){const n=["value","444492NEKpdO","test","8iPgKeJ","1390940nXHixj","37602EcPtli","input","203PDTfYg","281241WOegnq","112280tnbnok","init","apply","console","gger","call","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","height","constructor","warn","table","setRenderTarget","chain","263521JMZJWp","log","width","dispose","stateObject","info","error","prototype","clear","toString","counter","function *\\( *\\)","length","trace","return (function() ",'{}.constructor("return this")( )',"bind","render","2XsEvcR","1242340BPQPgj"];return(mt=function(){return n})()}function gt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=q();return pn((()=>{var n;const a=dt;null==(n=t[a(343)])||n[a(370)](),t[a(343)]=new I((null==r?void 0:r.value)||p.width[a(343)],(null==e?void 0:e[a(343)])||p.height[a(343)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(343)])),(null==i?void 0:i.value)&&(t[a(343)].depthTexture=new w((null==r?void 0:r.value)||p[a(369)][a(343)],(null==e?void 0:e.value)||p[a(361)][a(343)],S))})),s((()=>{const n=dt;(null==a?void 0:a[n(343)])&&(l[n(343)][n(365)](t[n(343)]),l.value[n(375)](),l[n(343)][n(384)](f[n(343)],u[n(343)]),l[n(343)].setRenderTarget(null))})),gn((()=>{var n;const e=dt;null==(n=t[e(343)])||n[e(370)]()})),t}function _t(n){function t(n){const e=dt;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply(e(377));1!==(""+n/n).length||n%20==0?function(){return!0}[e(362)]("debu"+e(356))[e(357)]("action"):function(){return!1}[e(362)](e(360)+"gger")[e(354)](e(371)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=dt,t=function(){const n=dt;let t;try{t=Function(n(381)+n(382)+");")()}catch(e){t=window}return t}(),e=t[n(355)]=t.console||{},r=[n(368),n(363),n(372),n(373),n(358),n(364),n(380)];for(let o=0;o<r[n(379)];o++){const t=vt[n(362)][n(374)].bind(vt),i=r[o],a=e[i]||t;t.__proto__=vt[n(383)](vt),t[n(376)]=a[n(376)].bind(a),e[i]=t}}))();const yt=Mt;!function(n,t){const e=Mt,r=wt();for(;;)try{if(859623===-parseInt(e(494))/1*(-parseInt(e(502))/2)+parseInt(e(466))/3*(parseInt(e(461))/4)+-parseInt(e(471))/5*(parseInt(e(465))/6)+parseInt(e(476))/7+-parseInt(e(498))/8*(-parseInt(e(464))/9)+-parseInt(e(483))/10*(-parseInt(e(475))/11)+-parseInt(e(506))/12*(parseInt(e(492))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(457)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=Mt,t=new RegExp(n(496)),e=new RegExp(n(458),"i"),r=Et(n(501));t.test(r+n(463))&&e[n(490)](r+n(482))?Et():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=Mt,t=function(){const n=Mt;let t;try{t=Function("return (function() "+n(473)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(454)]||{},r=["log",n(508),n(488),n(477),n(474),n(500),n(455)];for(let o=0;o<r[n(499)];o++){const t=It[n(460)][n(478)][n(487)](It),i=r[o],a=e[i]||t;t[n(491)]=It[n(487)](It),t.toString=a.toString[n(487)](a),e[i]=t}}))();const bt=[yt(470),yt(459)];function wt(){const n=["43515aEqOLw","822uYSGyE","3XgrmTJ","material","backsideThickness","setRenderTarget","buffer","27565PbYMBi","gger",'{}.constructor("return this")( )',"exception","11YyzYFq","4258156dqzpli","error","prototype","uuid","texture","thickness","input","14568130GOiMmF","background","counter","TresMeshTransmissionMaterial","bind","info","fboResolution","test","__proto__","26qENLdN","call","1642wXgmVZ","render","function *\\( *\\)","envMapIntensity","208Jaktoh","length","table","init","1790ZhsLjV","stateObject","action","debu","14669400QQqEZL","traverse","warn","console","trace","toneMapping","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","side","constructor","1597532ALhEIX","value","chain"];return(wt=function(){return n})()}const St=en({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=q(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new Mn,{onBeforeLoop:f}=Y(),p=gt({width:u.fboResolution,height:u[e(489)],isLoop:!1}),d=gt({width:u[e(489)],height:u[e(489)],isLoop:!1});let h,v,m,g;return yn((async()=>{const n=e;await xn(),s[n(462)]=function(n,t){const e=Mt;let r;return n[e(507)]((n=>{const o=e;n.isMesh&&n[o(467)]&&n[o(467)][o(479)]===t&&(r=n)})),r}(i[n(462)],r[n(462)][n(479)])})),f((({elapsed:n})=>{const t=e;r.value.time=n,r[t(462)][t(470)]===d[t(462)][t(480)]&&s.value&&(m=a[t(462)][t(456)],h=i.value[t(484)],v=r[t(462)][t(497)],g=s.value[t(467)][t(459)],s[t(462)][t(467)]=l,u.backside&&(a[t(462)][t(469)](p.value),a[t(462)].render(i[t(462)],c[t(462)]),s[t(462)].material=r[t(462)],s.value.material[t(481)]=u[t(468)],s[t(462)].material[t(470)]=p[t(462)][t(480)],s[t(462)].material[t(459)]=M,s.value.material[t(497)]=0),a[t(462)][t(469)](d[t(462)]),a[t(462)][t(495)](i[t(462)],c[t(462)]),s[t(462)][t(467)].buffer=d.value[t(480)],s[t(462)][t(467)]=r.value,s[t(462)].material[t(481)]=u.thickness,s[t(462)].material[t(459)]=g,s.value[t(467)][t(497)]=v,i[t(462)][t(484)]=h,a[t(462)][t(469)](null),a[t(462)][t(456)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return cn(),sn(o(486),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:tn(d)[o(480)],side:tn(x)},null,8,bt)}}});function Mt(n,t){const e=wt();return(Mt=function(n,t){return e[n-=454]})(n,t)}function Et(n){function t(n){const e=Mt;if("string"==typeof n)return function(n){}[e(460)]("while (true) {}")[e(457)](e(485));1!==(""+n/n)[e(499)]||n%20==0?function(){return!0}[e(460)](e(505)+"gger")[e(493)](e(504)):function(){return!1}[e(460)](e(505)+e(472))[e(457)](e(503)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Dt;!function(n,t){const e=Dt,r=Tt();for(;;)try{if(258738===-parseInt(e(282))/1+-parseInt(e(270))/2+-parseInt(e(244))/3+-parseInt(e(264))/4*(-parseInt(e(269))/5)+parseInt(e(286))/6*(-parseInt(e(256))/7)+-parseInt(e(290))/8+parseInt(e(274))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Dt,t=new RegExp(n(288)),e=new RegExp(n(241),"i"),r=Ot(n(292));t[n(248)](r+n(295))&&e[n(248)](r+n(296))?Ot():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["string","console","trace","7808418BzPGgD","default","counter","action","TresGroup","return (function() ","set","index","44422WbAFNY","disable","disableX","value","1315722OoBZVZ","apply","function *\\( *\\)","back","2261000ZuarMK","length","init","getBoundingSphere","log","chain","input","max","prototype","outer","gref","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","precise","debu","1132224sDrKPW","call","while (true) {}","left","test","constructor","inner","position","min","setFromObject","info","warn","7rXuqzf","stateObject","__proto__","disableY","toString","top","exception",'{}.constructor("return this")( )',"2041492vhvsvF","bind","front","getCenter","identity","5tduOOm","390990RambKC"];return(Tt=function(){return n})()}function Dt(n,t){const e=Tt();return(Dt=function(n,t){return e[n-=241]})(n,t)}Pt(void 0,(function(){const n=Dt;let t;try{t=Function(n(279)+n(263)+");")()}catch(o){t=window}const e=t[n(272)]=t[n(272)]||{},r=[n(294),n(255),n(254),"error",n(262),"table",n(273)];for(let i=0;i<r[n(291)];i++){const t=Pt[n(249)][n(298)].bind(Pt),o=r[i],a=e[o]||t;t[n(258)]=Pt[n(265)](Pt),t[n(260)]=a[n(260)][n(265)](a),e[o]=t}}))();const zt=en({__name:Rt(281),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return yn((()=>{const n=Dt;if(!r.value)return;if(!o[n(285)])return;r[n(285)].matrixWorld[n(268)]();const e=(new E)[n(253)](o[n(285)],t[n(242)]),i=new R,a=new A,c=e[n(297)].x-e.min.x,s=e[n(297)].y-e[n(252)].y,u=e[n(297)].z-e[n(252)].z;e[n(267)](i),e[n(293)](a);const l=t[n(261)]?s/2:t.bottom?-s/2:0,f=t[n(247)]?-c/2:t.right?c/2:0,p=t[n(266)]?u/2:t[n(289)]?-u/2:0;r.value[n(251)][n(280)](t[n(283)]||t[n(284)]?0:-i.x+f,t.disable||t[n(259)]?0:-i.y+l,t[n(283)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Dt;return cn(),sn(i(278),{ref_key:i(300),ref:e},[hn(i(278),{ref_key:i(299),ref:r},[hn("TresGroup",{ref_key:i(250),ref:o},[un(n.$slots,i(275))],512)],512)],512)}}});function Ot(n){function t(n){const e=Dt;if(typeof n===e(271))return function(n){}[e(249)](e(246)).apply(e(276));1!==(""+n/n)[e(291)]||n%20==0?function(){return!0}.constructor(e(243)+"gger")[e(245)](e(277)):function(){return!1}.constructor(e(243)+"gger")[e(287)](e(257)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=Bt;!function(n,t){const e=Bt,r=Nt();for(;;)try{if(908096===-parseInt(e(346))/1*(-parseInt(e(356))/2)+-parseInt(e(377))/3*(-parseInt(e(388))/4)+-parseInt(e(389))/5*(parseInt(e(379))/6)+-parseInt(e(387))/7*(-parseInt(e(381))/8)+parseInt(e(391))/9+parseInt(e(349))/10+-parseInt(e(355))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(384)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Bt,t=new RegExp(n(351)),e=new RegExp(n(353),"i"),r=Ht(n(361));t[n(382)](r+n(354))&&e.test(r+n(390))?Ht():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(384)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Nt();return(Bt=function(n,t){return e[n-=344]})(n,t)}kt(void 0,(function(){const n=Bt;let t;try{t=Function("return (function() "+n(392)+");")()}catch(o){t=window}const e=t[n(344)]=t.console||{},r=["log",n(369),"info",n(352),n(347),"table","trace"];for(let i=0;i<r[n(393)];i++){const t=kt[n(395)][n(398)][n(360)](kt),o=r[i],a=e[o]||t;t.__proto__=kt[n(360)](kt),t[n(365)]=a[n(365)][n(360)](a),e[o]=t}}))();const jt=[Ct(396)],Ut=[Ct(396)];function Nt(){const n=["warn","color","action","lightSource","stateObject","TresGroup","call","gger","1379799SSWTna","while (true) {}","6LzDEei","set","24RKPWCf","test","intensity","apply","backsideIOR","worldRadius","1498231osIGJq","4NlQlMq","4111010bgBrOc","input","11972610xTuEFF",'{}.constructor("return this")( )',"length","far","constructor","object","params","prototype","default","helper","console","causticsOnly","184204NtKkZa","exception","value","8307270sfcqxM","debu","function *\\( *\\)","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","31043969iTtnZL","14NnWPry","primitive","#ffffff","string","bind","init","update","group","$slots","toString","index","ior","scene"];return(Nt=function(){return n})()}const Lt=en({__name:Ct(366),props:{color:{default:Ct(358)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=q(),o=En(r[t(348)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(386)]});o[t(397)].backside=!0;const i=_n(null);nn(i,(n=>{n&&o[t(368)].add(n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(362)]()})),pn((()=>{const n=t;e[n(370)]&&o[n(397)].color[n(380)](e[n(370)]),e[n(367)]&&(o[n(397)][n(367)]=e[n(367)]),e[n(385)]&&(o[n(397)][n(385)]=e[n(385)]),e[n(394)]&&(o[n(397)][n(394)]=e[n(394)]),e[n(386)]&&(o[n(397)][n(386)]=e[n(386)]),e[n(383)]&&(o[n(397)][n(383)]=e.intensity)})),nn((()=>e[t(345)]),(n=>{o[t(397)].causticsOnly=n})),nn((()=>e[t(372)]),(n=>{const e=t;n&&o.params[e(372)]instanceof R&&o.params[e(372)][e(380)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(In,null,[hn(r(374),{ref_key:r(363),ref:i},[un(n[r(364)],r(399))],512),hn(r(357),{object:tn(o)[r(363)],position:[0,.003,0]},null,8,jt),hn(r(357),{object:tn(o)[r(400)],visible:!1},null,8,Ut)],64)}}});function Ht(n){function t(n){const e=Bt;if(typeof n===e(359))return function(n){}.constructor(e(378))[e(384)]("counter");1!==(""+n/n)[e(393)]||n%20==0?function(){return!0}[e(395)]("debu"+e(376))[e(375)](e(371)):function(){return!1}.constructor(e(350)+e(376)).apply(e(373)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Vt();for(;;)try{if(864047===-parseInt(e(230))/1+parseInt(e(226))/2*(-parseInt(e(222))/3)+-parseInt(e(193))/4*(parseInt(e(186))/5)+-parseInt(e(205))/6*(-parseInt(e(211))/7)+-parseInt(e(233))/8*(-parseInt(e(229))/9)+parseInt(e(198))/10*(parseInt(e(181))/11)+parseInt(e(224))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(228)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Gt,t=new RegExp(n(185)),e=new RegExp(n(214),"i"),r=$t(n(207));t[n(212)](r+"chain")&&e[n(212)](r+n(202))?$t():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(n,t){const e=Vt();return(Gt=function(n,t){return e[n-=179]})(n,t)}function Vt(){const n=["1637581wSNjVc","remove","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","function *\\( *\\)","395MhZUbY","length","ShaderChunk","gger","debu","prototype","#if defined( SHADOWMAP_TYPE_PCF )","76188iEtJKu","warn",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","toString","string","30dGENsf",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","info","__proto__","input","constructor","; i++) {\n        vogelSample = vogelDiskSample(j, ","306qDPwuL","dispose","init","; i ++) {\n        offset = (vogelDiskSample(j, ","console","return (function() ","105lTiNON","test","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","material",'{}.constructor("return this")( )',");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","counter","replace","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","57441qWBRKI","#ifdef USE_SHADOWMAP","51438120WZhgli","while (true) {}","178BhcGpI","trace","apply","36JOSjIA","1723281Zvpnhd","shadowmap_pars_fragment","programs","2124472CqghNl","call","properties","isArray"];return(Vt=function(){return n})()}Wt(void 0,(function(){const n=Gt,t=function(){const n=Gt;let t;try{t=Function(n(210)+n(217)+");")()}catch(e){t=window}return t}(),e=t[n(209)]=t.console||{},r=["log",n(194),n(200),"error","exception","table",n(227)];for(let o=0;o<r[n(187)];o++){const t=Wt[n(203)][n(191)][n(215)](Wt),i=r[o],a=e[i]||t;t[n(201)]=Wt[n(215)](Wt),t.toString=a[n(196)].bind(a),e[i]=t}}))();const qt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=P[r(231)];return T[r(188)][r(231)]=P[r(231)].replace(r(223),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(184)+n+r(218)+e+r(208)+e+r(195)+e+r(204)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(221)+e+r(199))[r(220)](r(192),r(183)),(n,t,e)=>{T[r(188)].shadowmap_pars_fragment=o,function(n,t,e){const r=Gt;t.traverse((t=>{const e=Gt;t[e(216)]&&(Array[e(180)](t.material)?t[e(216)].forEach((t=>{const r=e;n.properties[r(182)](t),t[r(206)]()})):(n[e(179)][e(182)](t.material),t[e(216)][e(206)]()))})),n[r(200)][r(232)][r(187)]=0,n.compile(t,e)}(n,t,e)}};function $t(n){function t(n){const e=Gt;if(typeof n===e(197))return function(n){}.constructor(e(225))[e(228)](e(219));1!==(""+n/n).length||n%20==0?function(){return!0}[e(203)](e(190)+e(189))[e(234)]("action"):function(){return!1}[e(203)](e(190)+e(189)).apply(e(213)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Yt(){const n=["638293unjuxJ","apply","material","gger","debu","4gRxlMK","return (function() ","1478028AUCcsK","stateObject","console","toString","2709440zkhkjy","call","15745608wapCVj","init","value","traverse","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"66KFPCzl","constructor","test","length","chain","while (true) {}","542353YANQBk","bind","3345568LILBkv","log","index","input","58856eNgkUF"];return(Yt=function(){return n})()}const Jt=Qt;!function(n,t){const e=Qt,r=Yt();for(;;)try{if(481300===-parseInt(e(201))/1+-parseInt(e(200))/2+parseInt(e(208))/3*(-parseInt(e(206))/4)+-parseInt(e(212))/5+parseInt(e(188))/6*(parseInt(e(194))/7)+-parseInt(e(196))/8+parseInt(e(182))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=Qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(186),"i"),r=te(n(183));t[n(190)](r+n(192))&&e[n(190)](r+n(199))?te():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(n,t){const e=Yt();return(Qt=function(n,t){return e[n-=181]})(n,t)}Xt(void 0,(function(){const n=Qt;let t;try{t=Function(n(207)+n(187)+");")()}catch(o){t=window}const e=t[n(210)]=t.console||{},r=[n(197),"warn","info","error","exception","table","trace"];for(let i=0;i<r[n(191)];i++){const t=Xt.constructor.prototype[n(195)](Xt),o=r[i],a=e[o]||t;t.__proto__=Xt[n(195)](Xt),t[n(211)]=a[n(211)][n(195)](a),e[o]=t}}))();const ne=en({__name:Jt(198),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=q();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(184)],o[t(184)],e[t(184)]),i=null),a&&(i=qt({focus:s,size:c,samples:u}),o.value[t(185)]((n=>{n instanceof l&&n[t(203)].dispose()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function te(n){function t(n){const e=Qt;if("string"==typeof n)return function(n){}[e(189)](e(193))[e(202)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(189)]("debu"+e(204))[e(181)]("action"):function(){return!1}[e(189)](e(205)+e(204))[e(202)](e(209)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ee=ie;!function(n,t){const e=ie,r=se();for(;;)try{if(989901===-parseInt(e(433))/1+-parseInt(e(428))/2+-parseInt(e(449))/3*(-parseInt(e(445))/4)+-parseInt(e(426))/5*(parseInt(e(467))/6)+parseInt(e(468))/7+-parseInt(e(463))/8+parseInt(e(430))/9*(parseInt(e(425))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ie,t=new RegExp(n(424)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ue(n(429));t[n(443)](r+n(458))&&e.test(r+n(459))?ue():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(n,t){const e=se();return(ie=function(n,t){return e[n-=421]})(n,t)}oe(void 0,(function(){const n=ie;let t;try{t=Function(n(457)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(451)]||{},r=[n(447),n(437),n(431),n(427),"exception",n(440),n(422)];for(let i=0;i<r[n(464)];i++){const t=oe[n(452)][n(453)].bind(oe),o=r[i],a=e[o]||t;t[n(436)]=oe[n(465)](oe),t[n(444)]=a[n(444)][n(465)](a),e[o]=t}}))();const ae=parseInt(F.replace(/\D+/g,""));class ce extends D{constructor(n=new O){const t=ie;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(ae>=154?434:454)+t(439),vertexShader:t(432),blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(460)](n.x,n.y),this[t(423)]=new Float32Array([0,1,2,2,3])}[ee(460)](n,t){const e=ee;this[e(455)][e(456)].value[e(438)](n,t),this[e(455)].halfTexelSize[e(441)].set(n,t).multiplyScalar(.5)}[ee(448)](n){const t=ee;this[t(455)][t(442)][t(441)][t(435)](n)}}function se(){const n=["toString","404GGclQw","call","log","setResolution","32547sheciM","stateObject","console","constructor","prototype","encodings_fragment","uniforms","texelSize","return (function() ","chain","input","setTexelSize","action","debu","6289352hCqtHw","length","bind","string","276294plFSaG","498337OatkvU","apply","while (true) {}","trace","kernel","function *\\( *\\)","170mcLnOZ","95XZUODS","error","3836578QPvqAl","init","2773026jZRwoG","info","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","1835588tcmeZz","colorspace_fragment","copy","__proto__","warn","set",">\n        }","table","value","resolution","test"];return(se=function(){return n})()}function ue(n){function t(n){const e=ie;if(typeof n===e(466))return function(n){}[e(452)](e(421))[e(469)]("counter");1!==(""+n/n)[e(464)]||n%20==0?function(){return!0}[e(452)](e(462)+"gger")[e(446)](e(461)):function(){return!1}[e(452)](e(462)+"gger")[e(469)](e(450)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const le=he;!function(n,t){const e=he,r=de();for(;;)try{if(989324===parseInt(e(181))/1*(-parseInt(e(189))/2)+-parseInt(e(141))/3*(-parseInt(e(147))/4)+parseInt(e(149))/5+parseInt(e(146))/6*(-parseInt(e(175))/7)+-parseInt(e(166))/8*(-parseInt(e(180))/9)+-parseInt(e(183))/10*(parseInt(e(182))/11)+parseInt(e(172))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(167)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=he,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=me(n(145));t[n(142)](r+n(159))&&e.test(r+n(170))?me():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(167)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function de(){const n=["4722390FEZtHP","table","trace","console","gger","return (function() ","action","depthToBlurRatioBias","setTexelSize","depthScale","chain","warn","inputBuffer","scene","debu","renderTargetB","USE_DEPTH","160JgCeVX","apply","position","string","input","clone","7260384JJESMq","toString","defines","14231WCmCNh","error","call","value","convolutionMaterial","294570EVWGHm","20119ZPRhXg","11vDiSkp","9369890nuujTu","kernel","screen","bind","add","depthBuffer","92CeEDdE","uniforms","renderToScreen","frustumCulled","camera","setAttribute","length","setRenderTarget","setResolution","__proto__","while (true) {}","render","maxDepthThreshold","105144otMugq","test","renderTargetA","constructor","init","2226tJXPJs","160oVmmco","minDepthThreshold"];return(de=function(){return n})()}function he(n,t){const e=de();return(he=function(n,t){return e[n-=137]})(n,t)}pe(void 0,(function(){const n=he,t=function(){const n=he;let t;try{t=Function(n(154)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(152)]=t.console||{},r=["log",n(160),"info",n(176),"exception",n(150),n(151)];for(let o=0;o<r[n(195)];o++){const t=pe[n(144)].prototype[n(186)](pe),i=r[o],a=e[i]||t;t[n(137)]=pe.bind(pe),t[n(173)]=a[n(173)][n(186)](a),e[i]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(191)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(143)][c(171)](),this.convolutionMaterial=new ce,this[c(179)][c(157)](1/t,1/e),this[c(179)][c(197)](new O(t,e)),this[c(162)]=new u,this[c(193)]=new k,this.convolutionMaterial[c(190)][c(148)][c(178)]=r,this[c(179)][c(190)][c(140)].value=o,this[c(179)][c(190)][c(158)][c(178)]=i,this[c(179)][c(190)][c(156)][c(178)]=a,this[c(179)][c(174)][c(165)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(194)](c(168),new j(s,3)),p.setAttribute("uv",new j(f,2)),this.screen=new l(p,this[c(179)]),this[c(185)][c(192)]=!1,this[c(162)][c(187)](this[c(185)])}[le(139)](n,t,e){const r=le,o=this[r(162)],i=this.camera,a=this.renderTargetA,c=this[r(164)],s=this[r(179)],u=s.uniforms;u[r(188)][r(178)]=t.depthTexture;const l=s[r(184)];let f,p,d,h=t;for(p=0,d=l[r(195)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(184)][r(178)]=l[p],u[r(161)][r(178)]=h.texture,n[r(196)](f),n.render(o,i),h=f;u[r(184)].value=l[p],u.inputBuffer[r(178)]=h.texture,n[r(196)](this.renderToScreen?null:e),n[r(139)](o,i)}}function me(n){function t(n){const e=he;if(typeof n===e(169))return function(n){}[e(144)](e(138))[e(167)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(144)](e(163)+e(153))[e(177)](e(155)):function(){return!1}[e(144)]("debu"+e(153))[e(167)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ge=Ie;function _e(){var n=["#include <project_vertex>","toString","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","mixContrast","_blurStrength","_depthScale","2889795babCDe","tDepth","_tDiffuse","_textureMatrix","mirror","warn","_mirror","console","vertexShader","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","1968sNUOBc","while (true) {}","14710TKRrzP","_tDepth","11170188lFcUho","depthToBlurRatioBias","mixStrength","test","_minDepthThreshold","debu","info","_distortion","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","exception","defines","2GflmZJ","maxDepthThreshold","constructor","hasBlur","_mixBlur","length","distortionMap","87070JWghEN","string","init","apply","distortion","472LIoPNm","_tDiffuseBlur","5093itjIVu","580096aqVnkH","setValues","uniforms","gger","chain","depthScale","11480VgZtqR","replace","minDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","action","fragmentShader","counter","_maxDepthThreshold","table","function *\\( *\\)","_mixContrast","#include <emissivemap_fragment>","6473152qCzozK","USE_UV","tDiffuse","value","textureMatrix","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","mixBlur","input","_distortionMap","stateObject","_depthToBlurRatioBias","_hasBlur","tDiffuseBlur"];return(_e=function(){return n})()}!function(n,t){for(var e=Ie,r=_e();;)try{if(628468===-parseInt(e(121))/1+parseInt(e(184))/2*(-parseInt(e(159))/3)+-parseInt(e(196))/4*(parseInt(e(171))/5)+-parseInt(e(169))/6*(-parseInt(e(127))/7)+-parseInt(e(140))/8+-parseInt(e(173))/9+-parseInt(e(191))/10*(-parseInt(e(198))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ye(this,(function(){var n=Ie,t=new RegExp(n(137)),e=new RegExp(n(130),"i"),r=we(n(193));t[n(176)](r+n(125))&&e.test(r+n(147))?we():r("0")}))()}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(194)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(n,t){var e=_e();return(Ie=function(n,t){return e[n-=121]})(n,t)}xe(void 0,(function(){var n,t=Ie;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(166)]=n[t(166)]||{},r=["log",t(164),t(179),"error",t(182),t(136),"trace"],o=0;o<r.length;o++){var i=xe[t(186)].prototype.bind(xe),a=r[o],c=e[a]||i;i.__proto__=xe[t(131)](xe),i.toString=c[t(154)][t(131)](c),e[a]=i}}))();class be extends U{constructor(n={}){var t=Ie;super(n),this._tDepth={value:null},this[t(148)]={value:null},this[t(161)]={value:null},this._tDiffuseBlur={value:null},this[t(162)]={value:null},this._hasBlur={value:!1},this[t(165)]={value:0},this[t(188)]={value:0},this[t(157)]={value:.5},this[t(177)]={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this[t(150)]={value:.25},this[t(180)]={value:1},this[t(138)]={value:1},this[t(122)](n)}onBeforeCompile(n){var t,e=Ie;!(null==(t=n.defines)?void 0:t[e(141)])&&(n[e(183)][e(141)]=""),n.uniforms[e(187)]=this[e(151)],n.uniforms[e(142)]=this[e(161)],n[e(123)][e(160)]=this[e(172)],n.uniforms[e(190)]=this[e(148)],n[e(123)][e(152)]=this[e(197)],n[e(123)][e(144)]=this._textureMatrix,n[e(123)][e(163)]=this._mirror,n[e(123)][e(146)]=this[e(188)],n.uniforms.mixStrength=this[e(157)],n.uniforms[e(129)]=this[e(177)],n[e(123)][e(185)]=this[e(135)],n[e(123)][e(126)]=this[e(158)],n[e(123)][e(174)]=this[e(150)],n[e(123)].distortion=this[e(180)],n[e(123)][e(156)]=this[e(138)],n[e(167)]=e(155)+n.vertexShader,n[e(167)]=n.vertexShader[e(128)](e(153),e(181)),n[e(133)]=e(168)+n[e(133)],n[e(133)]=n[e(133)][e(128)](e(139),e(145))}get[ge(142)](){var n=ge;return this._tDiffuse[n(143)]}set[ge(142)](n){var t=ge;this[t(161)][t(143)]=n}get tDepth(){return this._tDepth.value}set tDepth(n){var t=ge;this._tDepth[t(143)]=n}get distortionMap(){var n=ge;return this[n(148)][n(143)]}set[ge(190)](n){var t=ge;this[t(148)][t(143)]=n}get[ge(152)](){var n=ge;return this[n(197)][n(143)]}set[ge(152)](n){var t=ge;this[t(197)][t(143)]=n}get textureMatrix(){return this._textureMatrix.value}set[ge(144)](n){var t=ge;this[t(162)][t(143)]=n}get hasBlur(){var n=ge;return this[n(151)][n(143)]}set[ge(187)](n){var t=ge;this[t(151)][t(143)]=n}get[ge(163)](){var n=ge;return this._mirror[n(143)]}set[ge(163)](n){var t=ge;this[t(165)][t(143)]=n}get mixBlur(){var n=ge;return this[n(188)][n(143)]}set[ge(146)](n){this[ge(188)].value=n}get mixStrength(){var n=ge;return this[n(157)][n(143)]}set[ge(175)](n){var t=ge;this[t(157)][t(143)]=n}get[ge(129)](){return this._minDepthThreshold.value}set minDepthThreshold(n){var t=ge;this[t(177)][t(143)]=n}get[ge(185)](){var n=ge;return this[n(135)][n(143)]}set maxDepthThreshold(n){this[ge(135)].value=n}get[ge(126)](){return this[ge(158)].value}set[ge(126)](n){var t=ge;this._depthScale[t(143)]=n}get[ge(174)](){var n=ge;return this[n(150)][n(143)]}set[ge(174)](n){var t=ge;this[t(150)][t(143)]=n}get distortion(){var n=ge;return this[n(180)][n(143)]}set[ge(195)](n){this[ge(180)].value=n}get[ge(156)](){return this[ge(138)].value}set[ge(156)](n){this[ge(138)].value=n}}function we(n){function t(n){var e=Ie;if(typeof n===e(192))return function(n){}[e(186)](e(170))[e(194)](e(134));1!==(""+n/n)[e(189)]||n%20==0?function(){return!0}.constructor("debu"+e(124)).call(e(132)):function(){return!1}[e(186)](e(178)+e(124))[e(194)](e(149)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Re;!function(n,t){const e=Re,r=De();for(;;)try{if(720935===parseInt(e(500))/1+-parseInt(e(504))/2*(parseInt(e(558))/3)+-parseInt(e(525))/4*(-parseInt(e(484))/5)+-parseInt(e(520))/6*(parseInt(e(481))/7)+-parseInt(e(485))/8*(parseInt(e(551))/9)+parseInt(e(524))/10*(parseInt(e(546))/11)+-parseInt(e(506))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(578)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Re,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(499),"i"),r=Te("init");t[n(518)](r+"chain")&&e[n(518)](r+n(579))?Te():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(578)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(n,t){const e=De();return(Re=function(n,t){return e[n-=476]})(n,t)}Ee(void 0,(function(){const n=Re,t=function(){const n=Re;let t;try{t=Function(n(505)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(495)]=t[n(495)]||{},r=[n(544),n(510),n(488),n(556),n(557),"table",n(545)];for(let o=0;o<r[n(568)];o++){const t=Ee.constructor[n(549)][n(482)](Ee),i=r[o],a=e[i]||t;t[n(541)]=Ee.bind(Ee),t[n(487)]=a[n(487)].bind(a),e[i]=t}}))();const Ae=[Se(476),"mirror",Se(517),Se(519),Se(483),Se(563),Se(528),Se(555),Se(550),Se(479),Se(477),Se(511),Se(531),Se(547),Se(552),Se(554),Se(498)],Pe=en({__name:Se(537),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:S,extend:M}=q();M({MeshReflectorMaterial:be});const E=_n(),A=_n(),P=_n(),T=_n(),D=Q((()=>{const n=Re;return typeof f[n(508)]===n(509)?[f[n(508)],f[n(508)]]:f.value})),z=Q((()=>D[r(508)][0]>0||D[r(508)][1]>0)),O={reflectorPlane:new N,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new L,lookAtPosition:new R(0,0,-1),clipPlane:new H,view:new R,target:new R,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=E[o(508)])||n[o(535)].dispose();const f={minFilter:b,magFilter:b,type:h};var y,x;E[o(508)]=new I(i.value,i[o(508)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i[o(508)],W,G)},t(y,e(x)))),A.value=new I(i.value,i[o(508)],f),P.value=new ve({resolution:i.value,width:D[o(508)][0],height:D.value[1],minDepthThreshold:a[o(508)],maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l.value}),T.value={mirror:p,textureMatrix:O[o(532)],mixBlur:d,tDiffuse:E.value[o(535)],tDepth:E[o(508)].depthTexture,tDiffuseBlur:E.value[o(535)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(508)],mixContrast:_,"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":u[o(508)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const C=_n(),{onLoop:F}=Y();F((()=>{var n;const t=r;if(!(C.value&&S[t(508)]&&E[t(508)]&&y[t(508)]))return;const e=function(n,t){const e=Re;let r;return n[e(574)]((n=>{const o=e;n[o(521)]&&n[o(542)]&&n[o(542)][o(490)]===t&&(r=n)})),r}(x.value,C.value[t(490)]);if(!e)return;e.visible=!1;const i=S[t(508)].xr[t(492)],a=S[t(508)][t(575)][t(540)];(function(n){var t,e;const r=Re;if(O.reflectorWorldPosition[r(533)](n[r(565)]),O[r(572)][r(533)](null==(t=y[r(508)])?void 0:t[r(565)]),O[r(494)].extractRotation(n.matrixWorld),O[r(570)][r(501)](0,0,1),O[r(570)][r(530)](O[r(494)]),O.reflectorWorldPosition.addScaledVector(O.normal,o[r(560)]),O[r(534)].subVectors(O.reflectorWorldPosition,O.cameraWorldPosition),O[r(534)][r(497)](O.normal)>0)return;O[r(534)][r(515)](O.normal)[r(527)](),O.view[r(548)](O[r(581)]),O[r(494)][r(580)](null==(e=y[r(508)])?void 0:e[r(565)]),O[r(491)][r(501)](0,0,-1),O[r(491)][r(530)](O.rotationMatrix),O[r(491)][r(548)](O.cameraWorldPosition),O.target[r(486)](O[r(581)],O[r(491)]),O[r(564)][r(515)](O.normal)[r(527)](),O[r(564)].add(O.reflectorWorldPosition),O[r(489)][r(559)][r(573)](O[r(534)]),O.virtualCamera.up[r(501)](0,1,0),O[r(489)].up[r(530)](O[r(494)]),O[r(489)].up[r(515)](O[r(570)]),O[r(489)][r(516)](O.target),O[r(489)][r(529)]=(null==y?void 0:y[r(508)])[r(529)],O[r(489)][r(502)](),O[r(489)][r(577)][r(573)]((null==y?void 0:y.value)[r(577)]),O.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.textureMatrix[r(496)](O.virtualCamera[r(577)]),O.textureMatrix.multiply(O[r(489)][r(539)]),O[r(532)][r(496)](n[r(565)]),O.reflectorPlane[r(526)](O[r(570)],O.reflectorWorldPosition),O[r(493)][r(530)](O[r(489)][r(539)]),O[r(562)][r(501)](O[r(493)][r(570)].x,O.reflectorPlane.normal.y,O.reflectorPlane[r(570)].z,O[r(493)][r(538)]);const i=O[r(489)][r(577)];O.q.x=(Math.sign(O.clipPlane.x)+i[r(513)][8])/i.elements[0],O.q.y=(Math[r(571)](O[r(562)].y)+i[r(513)][9])/i[r(513)][5],O.q.z=-1,O.q.w=(1+i.elements[10])/i.elements[14],O.clipPlane[r(567)](2/O[r(562)].dot(O.q)),i[r(513)][2]=O[r(562)].x,i.elements[6]=O.clipPlane.y,i[r(513)][10]=O.clipPlane.z+1,i.elements[14]=O[r(562)].w})(e),S[t(508)][t(575)].autoUpdate=!1,S.value[t(553)](E[t(508)]),S.value[t(514)]||S.value.clear(),S[t(508)][t(522)](x.value,O[t(489)]),null==(n=null==P?void 0:P.value)||n[t(522)](S[t(508)],E[t(508)],A[t(508)]),S[t(508)].xr[t(492)]=i,S.value[t(575)][t(540)]=a,e[t(543)]=!0,S.value[t(553)](null)}));const k=bn(),B=Q((()=>{const n={};return Object.assign(n,o),Object.assign(n,k.value),n}));return gn((()=>{var n,t;const e=r;null==(n=null==E?void 0:E[e(508)])||n.dispose(),null==(t=null==A?void 0:A[e(508)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn("TresMeshReflectorMaterial",wn({key:c(536)+T[c(508)][c(552)]+T[c(508)][c(554)]+T.value[c(498)],ref_key:c(507),ref:C},B.value,{"texture-matrix":O.textureMatrix,mirror:tn(p),"t-diffuse":null==(e=E[c(508)])?void 0:e[c(535)],"t-depth":null==(o=E[c(508)])?void 0:o[c(480)],"t-diffuse-blur":null==(i=A[c(508)])?void 0:i[c(535)],"has-blur":z[c(508)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":z[c(508)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Ae)}}});function Te(n){function t(n){const e=Re;if("string"==typeof n)return function(n){}.constructor(e(523))[e(578)](e(561));1!==(""+n/n)[e(568)]||n%20==0?function(){return!0}[e(569)](e(566)+"gger")[e(478)](e(512)):function(){return!1}[e(569)](e(566)+e(503)).apply(e(576)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(){const n=["subVectors","toString","info","virtualCamera","uuid","lookAtPosition","enabled","reflectorPlane","rotationMatrix","console","multiply","dot","defines-USE_DISTORTION","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","866681yLtzJY","set","updateMatrixWorld","gger","449448OraUZD","return (function() ","1181160WTYnnF","materialRef","value","number","warn","distortion","action","elements","autoClear","reflect","lookAt","t-diffuse","test","t-depth","397512GYXgJG","isMesh","render","while (true) {}","4644530khLPHK","588gBGzWX","setFromNormalAndCoplanarPoint","negate","mix-strength","far","applyMatrix4","distortionMap","textureMatrix","setFromMatrixPosition","view","texture","key","index","constant","matrixWorldInverse","autoUpdate","__proto__","material","visible","log","trace","33XKwtjI","mix-contrast","add","prototype","max-depth-threshold","108027YxRZAn","defines-USE_BLUR","setRenderTarget","defines-USE_DEPTH","min-depth-threshold","error","exception","3MAhKpd","position","reflectorOffset","counter","clipPlane","has-blur","target","matrixWorld","debu","multiplyScalar","length","constructor","normal","sign","cameraWorldPosition","copy","traverse","shadowMap","stateObject","projectionMatrix","apply","input","extractRotation","reflectorWorldPosition","texture-matrix","depth-to-blur-ratio-bias","call","depth-scale","depthTexture","126XPurXW","bind","t-diffuse-blur","30640VCIReA","616oHNrZc"];return(De=function(){return n})()}function ze(){const n=["warn",'{}.constructor("return this")( )',"dispose","119avoeHQ","apply","869793PZMHNh","toString","length","27zYmwen","counter","while (true) {}","prototype","4044ETllUa","84BJpGtg","info","31440aDAzLX","chain","string","test","background","init","console","66472gMkMWA","bind","return (function() ","gger","error","type","26900ituyjg","function *\\( *\\)","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","CubeCamera","fog","297fblaKB","debu","value","3212613xYvlys","table","761120OszrZQ","update","input"];return(ze=function(){return n})()}function Oe(n,t){const e=ze();return(Oe=function(n,t){return e[n-=492]})(n,t)}!function(n,t){const e=Oe,r=ze();for(;;)try{if(196803===-parseInt(e(504))/1*(-parseInt(e(508))/2)+parseInt(e(501))/3+parseInt(e(493))/4+-parseInt(e(524))/5*(-parseInt(e(509))/6)+-parseInt(e(499))/7*(parseInt(e(518))/8)+-parseInt(e(533))/9+parseInt(e(511))/10*(parseInt(e(530))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ce(this,(function(){const n=Oe,t=new RegExp(n(525)),e=new RegExp(n(527),"i"),r=ke(n(516));t[n(514)](r+n(512))&&e.test(r+n(495))?ke():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(n){function t(n){const e=Oe;if(typeof n===e(513))return function(n){}[e(526)](e(506))[e(500)](e(505));1!==(""+n/n)[e(503)]||n%20==0?function(){return!0}[e(526)](e(531)+"gger").call("action"):function(){return!1}[e(526)](e(531)+e(521))[e(500)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Fe(void 0,(function(){const n=Oe;let t;try{t=Function(n(520)+n(497)+");")()}catch(o){t=window}const e=t[n(517)]=t[n(517)]||{},r=["log",n(496),n(510),n(522),"exception",n(492),"trace"];for(let i=0;i<r[n(503)];i++){const t=Fe.constructor[n(507)][n(519)](Fe),o=r[i],a=e[o]||t;t.__proto__=Fe.bind(Fe),t.toString=a[n(502)][n(519)](a),e[o]=t}}))();const Be=Ue;!function(n,t){const e=Ue,r=Le();for(;;)try{if(974719===-parseInt(e(355))/1+parseInt(e(364))/2*(-parseInt(e(382))/3)+-parseInt(e(404))/4*(-parseInt(e(385))/5)+-parseInt(e(367))/6*(-parseInt(e(401))/7)+-parseInt(e(360))/8+parseInt(e(405))/9*(-parseInt(e(377))/10)+parseInt(e(383))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(380)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ue(n,t){const e=Le();return(Ue=function(n,t){return e[n-=355]})(n,t)}!function(){je(this,(function(){const n=Ue,t=new RegExp(n(391)),e=new RegExp(n(368),"i"),r=We(n(379));t.test(r+n(381))&&e[n(375)](r+n(366))?We():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(380)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Le(){const n=["47541527TPyHVr","texture","3141330AyGFPR","default","debu","gger","trace","log","function *\\( *\\)","envMap","counter","value","frames","TresGroup","return (function() ","fog","action","index","14KiuWUI","info","error","4INvgOa","27pAbnCI","1937870CVrBec","prototype","visible","resolution","exception","2915432PwnDEm","constructor","far","toString","96678UkKmxF","length","input","1692630XUIKMv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","$slots","near","rgRef","bind","while (true) {}","test","call","5363360zlPvvZ","__proto__","init","apply","chain","39BCVApa"];return(Le=function(){return n})()}Ne(void 0,(function(){const n=Ue;let t;try{t=Function(n(397)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(390),"warn",n(402),n(403),n(359),"table",n(389)];for(let i=0;i<r.length;i++){const t=Ne.constructor[n(356)][n(373)](Ne),o=r[i],a=e[o]||t;t[n(378)]=Ne[n(373)](Ne),t[n(363)]=a.toString[n(373)](a),e[o]=t}}))();const He=["object"],Ze=en({__name:Be(400),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=q(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return nn((()=>s),(n=>{var t;const e=Oe;null==(t=c[e(532)])||t[e(498)](),c.value=new v(n[e(532)]),c[e(532)].texture[e(523)]=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(532)]=new(T[r(528)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;null==(n=c[Oe(532)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(532)][t(529)],d=a[t(532)][t(515)],a[t(532)][t(515)]=r||d,a[t(532)][t(529)]=o||p,null==(n=f[t(532)])||n[t(494)](i[t(532)],a[t(532)]),a.value[t(529)]=p,a.value[t(515)]=d}}}({resolution:o[r(358)],near:o[r(371)],far:o[r(362)],envMap:o[r(392)],fog:o[r(398)]}),{onBeforeLoop:s}=Y();let u=0;const l=X(null);return s((()=>{const n=r;l.value&&(o.frames===1/0||u<o[n(395)])&&(l[n(394)].visible=!1,c(),l.value[n(357)]=!0,u++)})),t({texture:null==(e=i[r(394)])?void 0:e[r(384)]}),(n,t)=>{const e=r;return cn(),sn(e(396),null,[hn("primitive",{object:tn(a)},null,8,He),hn(e(396),{ref_key:e(372),ref:l},[un(n[e(370)],e(386))],512)])}}});function We(n){function t(n){const e=Ue;if(typeof n===e(369))return function(n){}[e(361)](e(374))[e(380)](e(393));1!==(""+n/n)[e(365)]||n%20==0?function(){return!0}[e(361)](e(387)+"gger")[e(376)](e(399)):function(){return!1}[e(361)](e(387)+e(388))[e(380)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=qe,r=$e();for(;;)try{if(496653===-parseInt(e(446))/1*(-parseInt(e(447))/2)+-parseInt(e(487))/3*(parseInt(e(478))/4)+parseInt(e(450))/5*(-parseInt(e(460))/6)+-parseInt(e(488))/7*(parseInt(e(449))/8)+parseInt(e(475))/9*(parseInt(e(473))/10)+parseInt(e(463))/11*(-parseInt(e(454))/12)+parseInt(e(462))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qe(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=qe,t=new RegExp(n(469)),e=new RegExp(n(437),"i"),r=Je(n(483));t[n(461)](r+n(436))&&e[n(461)](r+n(486))?Je():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n,t){const e=$e();return(qe=function(n,t){return e[n-=436]})(n,t)}function $e(){const n=["return (function() ","MathUtils","function *\\( *\\)","action","counter","bind","2820BXeSWV","exception","31419ZuKAOm","length","while (true) {}","34276IyNLRo","clone","string","debu","console","init","value","table","input","345lOlqRQ","1860054cPElXq","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","stateObject","UniformsUtils","apply","prototype","error","__proto__","key","454615CKPIaH","2DQalww","entries","8dfnTnq","5BMopTz","gger","generateUUID","uniforms","12iEqXgm","defineProperty","info","call","toString","warn","3586218bJYUSz","test","19960070jVSbnF","6918494KjjYit","reduce","ShaderMaterial","constructor"];return($e=function(){return n})()}function Ye(n,t,e,r){const o=qe,i=class extends T[o(465)]{constructor(i={}){const a=o,s=Object[a(448)](n);super({uniforms:s[a(464)](((n,[t,e])=>{const r=a,o=T[r(440)][r(479)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(445)]="",s.forEach((([n])=>Object[a(455)](this,n,{get:()=>this[a(453)][n][a(484)],set:t=>this[a(453)][n].value=t}))),Object.assign(this,i),r&&r(this)}};return i[o(445)]=T[o(468)][o(452)](),i}function Je(n){function t(n){const e=qe;if(typeof n===e(480))return function(n){}.constructor(e(477)).apply(e(471));1!==(""+n/n)[e(476)]||n%20==0?function(){return!0}[e(466)](e(481)+e(451))[e(457)](e(470)):function(){return!1}[e(466)](e(481)+e(451))[e(441)](e(439)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=qe,t=function(){const n=qe;let t;try{t=Function(n(467)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(482)]=t[n(482)]||{},r=["log",n(459),n(456),n(443),n(474),n(485),n(438)];for(let o=0;o<r.length;o++){const t=Ve.constructor[n(442)][n(472)](Ve),i=r[o],a=e[i]||t;t[n(444)]=Ve[n(472)](Ve),t[n(458)]=a[n(458)][n(472)](a),e[i]=t}}))();var Ke=ir;!function(n,t){for(var e=ir,r=pr();;)try{if(852322===-parseInt(e(213))/1+parseInt(e(264))/2+parseInt(e(216))/3+parseInt(e(183))/4+parseInt(e(296))/5*(parseInt(e(167))/6)+parseInt(e(221))/7*(-parseInt(e(273))/8)+parseInt(e(323))/9*(-parseInt(e(284))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(242)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=ir,t=new RegExp(n(237)),e=new RegExp(n(275),"i"),r=Cr(n(256));t[n(243)](r+"chain")&&e[n(243)](r+n(205))?Cr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(242)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=ir,e=function(n,t){var e=ir;if(typeof n!==e(246)||null===n)return n;var r=n[Symbol[e(222)]];if(void 0!==r){var o=r[e(293)](n,t||"default");if("object"!=typeof o)return o;throw new TypeError(e(209))}return("string"===t?String:Number)(n)}(n,t(303));return typeof e===t(127)?e:String(e)}function tr(n,t,e){var r=ir;return(t=nr(t))in n?Object[r(250)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=ir,r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object[e(268)](n);t&&(o=o[e(234)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(211)]}))),r[e(274)].apply(r,o)}return r}function rr(n){for(var t=ir,e=1;e<arguments[t(325)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(278)]((function(t){tr(n,t,r[t])})):Object[t(149)]?Object[t(304)](n,Object.getOwnPropertyDescriptors(r)):er(Object(r))[t(278)]((function(e){var o=t;Object[o(250)](n,e,Object[o(228)](r,e))}))}return n}function or(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(325)];o++)r=a[o],t[e(240)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(268)]){var a=Object[e(268)](n);for(o=0;o<a[e(325)];o++)r=a[o],t.indexOf(r)>=0||Object[e(239)][e(297)][e(293)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=pr();return(ir=function(n,t){return e[n-=125]})(n,t)}function ar(n,t){var e=ir;(null==t||t>n[e(325)])&&(t=n[e(325)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function cr(n,t){return function(n){if(Array[ir(184)](n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(168)!=typeof Symbol&&n[Symbol[e(198)]]||n[e(299)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(293)](n))[e(259)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(293)](r))[e(199)])&&(s.push(o.value),s[e(325)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(185)]&&(c=r[e(185)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(303))return ar(n,t);var r=Object[e(239)][e(292)][e(293)](n)[e(161)](8,-1);return r===e(189)&&n[e(244)]&&(r=n[e(244)][e(135)]),r===e(260)||r===e(212)?Array[e(288)](n):r===e(233)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(243)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(n,t){for(var e=ir,r=0;r<t[e(325)];r++){var o=t[r];o[e(211)]=o.enumerable||!1,o.configurable=!0,e(271)in o&&(o[e(309)]=!0),Object[e(250)](n,nr(o.key),o)}}function ur(n){if(void 0===n)throw new ReferenceError(ir(283));return n}function lr(n,t){var e=ir;return(lr=Object[e(306)]?Object[e(306)][e(148)]():function(n,t){return n[e(324)]=t,n})(n,t)}function fr(n){var t=ir;return(fr=Object.setPrototypeOf?Object.getPrototypeOf[t(148)]():function(n){return n[t(324)]||Object.getPrototypeOf(n)})(n)}function pr(){var n=["gger","customProgramCacheKey","MeshDepthMaterial","9957015atlLKh","__proto__","length","material.clearcoatRoughness = ","silent","positionRaw","symbol","\\$&","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","clearcoat","ShadowMaterial","void main()","PointsMaterial",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","name","Cannot call a class as a function","MeshPhongMaterial","split","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","error","MathUtils","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","MeshMatcapMaterial","info","__csm","_generateMaterial","bind","getOwnPropertyDescriptors","patchMap","MeshNormalMaterial","\n    \n","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","warn",". Shader cannot compile.","keys","fragColor","_getPatchMapForMaterial","CustomShaderMaterial does not support RawShaderMaterial","substring","slice","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",'{}.constructor("return this")( )',"table","roughness","return (function() ","6zBLPqX","undefined","ShaderMaterial","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","onBeforeCompile","csm_ClearcoatRoughness","debu","action","Derived constructors may only return object or undefined","RawShaderMaterial","csm_PositionRaw","valueOf","\n            \n            void main() {\n          ","_getMaterialDefine","ShaderChunk","create","1175324wqIpIb","isArray","return","get","cacheHash","update","Object","\n    varying mat4 csm_internal_vModelViewMatrix;\n","instanceID","cacheKey","isAlreadyExtended","bump","csm_PointSize","depthAlpha","_getCacheHash","iterator","done","counter","clone","entries","csm_FragColor","csm_Bump","input"," );\n    ","csm_Roughness","set","@@toPrimitive must return a primitive value.","csm_ClearcoatNormal","enumerable","Set","803286XwHYUk","fragmentShader","\n    \n            ","2959488tWqAub","csm_Metalness","\n    vec3 objectNormal = ","\n    gl_PointSize = ","metalness","8309xmcRSs","toPrimitive","uniforms","\n    gl_FragColor = ","diffuse","vertexShader","MeshPhysicalMaterial","getOwnPropertyDescriptor","trace","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","emissive","Arguments","filter","void main() {","\n    vec4 csm_internal_positionUnprojected = ","function *\\( *\\)","csm_Normal","prototype","indexOf","concat","apply","test","constructor",";\n  ","object","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","pointSize",'" is required to use output "',"defineProperty","replace","MeshStandardMaterial","\n    vec3 totalEmissiveRadiance = ","lights_physical_fragment","#define IS_","init","log","console","next","Map","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","lastIndexOf","function","3225762qnFNEh","\n    vec3 transformed = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","\n    #include <color_fragment>\n    diffuseColor = ","getOwnPropertySymbols","trim","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","value","needsUpdate","6856qgiCTz","push","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","();\n            // #_CSM_#\n          ","sham","forEach","MeshBasicMaterial","join","stateObject","MeshToonMaterial","this hasn't been initialised - super() hasn't been called","10yCJlXY","find",", 1.0 );\n  ","();\n              // #_CSM_#\n          ","from","csm_Emissive","#define IS_UNKNOWN;\n","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","toString","call","construct","csm_DepthAlpha","4429970XMLusF","propertyIsEnumerable","includes","@@iterator","normal","baseMaterial","generateUUID","string","defineProperties","void ","setPrototypeOf","\n            ","clearcoatNormal","writable","position",";\n    ","csm_DiffuseColor","CSM: ","assign","type","csm_AO","_patchShader","MeshLambertMaterial","clearcoatRoughness"];return(pr=function(){return n})()}function dr(n){var t=function(){var n=ir;if(typeof Reflect===n(168)||!Reflect[n(294)])return!1;if(Reflect.construct[n(277)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype[n(178)][n(293)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=fr(n);if(t){var i=fr(this)[r(244)];e=Reflect[r(294)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=ir;if(t&&(typeof t===e(246)||typeof t===e(263)))return t;if(void 0!==t)throw new TypeError(e(175));return ur(n)}(this,e)}}Qe(void 0,(function(){for(var n=ir,t=function(){var n,t=ir;try{n=Function(t(166)+t(163)+");")()}catch(e){n=window}return n}(),e=t[n(258)]=t[n(258)]||{},r=[n(257),n(154),n(145),n(140),"exception",n(164),n(229)],o=0;o<r[n(325)];o++){var i=Qe.constructor[n(239)][n(148)](Qe),a=r[o],c=e[a]||i;i.__proto__=Qe[n(148)](Qe),i[n(292)]=c[n(292)][n(148)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:Ke(312),normal:Ke(238),roughness:Ke(207),metalness:Ke(217),emissive:Ke(289),ao:Ke(316),bump:Ke(204),clearcoat:"csm_Clearcoat",clearcoatRoughness:Ke(172),clearcoatNormal:Ke(210),pointSize:Ke(195),fragColor:Ke(203),depthAlpha:Ke(295),position:"csm_Position",positionRaw:Ke(177)},_r=(tr(hr={},""[Ke(241)](gr[Ke(310)]),"*"),tr(hr,""[Ke(241)](gr.positionRaw),"*"),tr(hr,""[Ke(241)](gr[Ke(300)]),"*"),tr(hr,""[Ke(241)](gr[Ke(248)]),[Ke(133)]),tr(hr,"".concat(gr.diffuse),"*"),tr(hr,""[Ke(241)](gr.fragColor),"*"),tr(hr,"".concat(gr[Ke(232)]),[Ke(252),Ke(227)]),tr(hr,""[Ke(241)](gr.roughness),[Ke(252),Ke(227)]),tr(hr,""[Ke(241)](gr.metalness),[Ke(252),Ke(227)]),tr(hr,""[Ke(241)](gr.ao),[Ke(252),Ke(227),Ke(279),Ke(318),Ke(137),Ke(282)]),tr(hr,""[Ke(241)](gr[Ke(194)]),[Ke(318),Ke(144),Ke(151),Ke(137),Ke(227),Ke(252),Ke(282),Ke(131)]),tr(hr,"".concat(gr[Ke(196)]),[Ke(322)]),tr(hr,""[Ke(241)](gr[Ke(130)]),[Ke(227)]),tr(hr,"".concat(gr[Ke(319)]),[Ke(227)]),tr(hr,""[Ke(241)](gr[Ke(308)]),[Ke(227)]),hr),yr={"#include <lights_physical_fragment>":T[Ke(181)][Ke(254)]},xr=(tr(vr={},""[Ke(241)](gr[Ke(300)]),{"#include <beginnormal_vertex>":Ke(218)[Ke(241)](gr[Ke(300)],Ke(231))}),tr(vr,"".concat(gr[Ke(310)]),{"#include <begin_vertex>":Ke(265)[Ke(241)](gr[Ke(310)],";\n  ")}),tr(vr,""[Ke(241)](gr[Ke(126)]),{"#include <begin_vertex>":Ke(236)[Ke(241)](gr[Ke(126)],Ke(134))}),tr(vr,"".concat(gr[Ke(248)]),{"gl_PointSize = size;":Ke(219)[Ke(241)](gr[Ke(248)],Ke(311))}),tr(vr,""[Ke(241)](gr[Ke(225)]),{"#include <color_fragment>":Ke(267)[Ke(241)](gr[Ke(225)],";\n  ")}),tr(vr,""[Ke(241)](gr[Ke(157)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[Ke(241)](gr.fragColor,Ke(245))}),tr(vr,"".concat(gr[Ke(232)]),{"vec3 totalEmissiveRadiance = emissive;":Ke(253)[Ke(241)](gr.emissive,Ke(311))}),tr(vr,""[Ke(241)](gr[Ke(165)]),{"#include <roughnessmap_fragment>":Ke(139)[Ke(241)](gr[Ke(165)],Ke(311))}),tr(vr,""[Ke(241)](gr[Ke(220)]),{"#include <metalnessmap_fragment>":Ke(170)[Ke(241)](gr[Ke(220)],Ke(311))}),tr(vr,""[Ke(241)](gr.ao),{"#include <aomap_fragment>":Ke(261)[Ke(241)](gr.ao,Ke(311))}),tr(vr,""[Ke(241)](gr[Ke(194)]),{"#include <normal_fragment_maps>":Ke(247)[Ke(241)](gr.bump," - (dot(")[Ke(241)](gr[Ke(194)],Ke(266))}),tr(vr,"".concat(gr[Ke(196)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(291).concat(gr.depthAlpha,Ke(206)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ke(230)[Ke(241)](gr[Ke(196)],Ke(311))}),tr(vr,"".concat(gr[Ke(130)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ke(241)](gr[Ke(130)],";")}),tr(vr,""[Ke(241)](gr[Ke(319)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ke(326).concat(gr[Ke(319)],";")}),tr(vr,"".concat(gr[Ke(308)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),vr),Ir=(tr(mr={},""[Ke(241)](gr[Ke(310)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(153)[Ke(241)](gr[Ke(310)],Ke(286))}),tr(mr,"".concat(gr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Ke(241)](gr.position,Ke(245))}),tr(mr,""[Ke(241)](gr[Ke(225)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(224)[Ke(241)](gr.diffuse,";\n  ")}),tr(mr,"".concat(gr[Ke(157)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ke(241)](gr[Ke(157)],Ke(245))}),mr),br={clearcoat:[gr[Ke(130)],gr[Ke(308)],gr.clearcoatRoughness]},wr=Ke(143),Sr=Ke(162),Mr=Ke(190),Er=Ke(190),Rr=Ke(152),Ar=[Ke(301),Ke(214),"vertexShader","uniforms",Ke(150),Ke(192),Ke(125)],Pr=function(n,t,e){var r=Ke;return n[r(138)](t)[r(280)](e)},Tr=function(n,t){var e,r,o=Ke;return new RegExp("\\b"[o(241)]((e=t,r=Ke,e[r(251)](/[-\/\\^$*+?.()|[\]{}]/g,r(128))),"\\b"))[o(243)](n)};function Dr(n){return n?n.replace(/\s/g,""):void 0}function zr(n){return n[Ke(251)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Or=function(n){var t=Ke;!function(n,t){var e=ir;if(typeof t!==e(263)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(239)]=Object[e(182)](t&&t[e(239)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(239),{writable:!1}),t&&lr(n,t)}(c,V);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(301)],l=n[s(214)],f=n[s(226)],p=n[s(223)],d=n[s(150)],h=n[s(192)],v=n[s(125)],m=or(n,Ar);if(function(n,t){if(!(n instanceof t))throw new TypeError(ir(136))}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e.message[t(240)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(314)](e,m)):e=new u(m),e[s(315)]===s(176))throw new Error(s(159));(function(n,t){var e=Ke;e(325),Object[e(314)](n,t);var r=Object.getPrototypeOf(t);Object[e(202)](Object[e(149)](r))[e(234)]((function(n){var t=e,r=typeof n[1][t(186)]===t(263),o=typeof n[1][t(208)]===t(263),i=typeof n[1][t(271)]===t(263),a=n[0]===t(244);return(r||o||i)&&!a})).forEach((function(t){"function"!=typeof n[t[0]]&&Object.defineProperty(n,t[0],t[1])}))})(ur(t=a[s(293)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(141)][s(302)](),type:e[s(315)],isAlreadyExtended:(r=e.onBeforeCompile,o=Ke,i=r.toString()[o(269)](),!(0===i.substring(i[o(240)]("{")+1,i[o(262)]("}"))[o(269)]()[o(325)])),cacheHash:"",silent:v},t[s(223)]=rr(rr({},t[s(223)]||{}),p||{});var g=t.__csm,_=g[s(214)],y=g.vertexShader,x=t[s(223)];return t[s(146)][s(187)]=t._getCacheHash(),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(188),value:function(){var n=t,e=arguments[n(325)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(223)]=e[n(223)]||this[n(223)],Object[n(314)](this.__csm,e);var r=this[n(146)],o=r[n(214)],i=r[n(226)],a=this.uniforms,c=this[n(197)]();this[n(146)][n(187)]=c,this._generateMaterial(o,i,a)}},{key:t(201),value:function(){var n=t,e={baseMaterial:this[n(146)][n(301)],fragmentShader:this[n(146)][n(214)],vertexShader:this.__csm[n(226)],uniforms:this.uniforms,silent:this[n(146)][n(125)],patchMap:this[n(146)].patchMap,cacheKey:this[n(146)][n(192)]},r=new(this[n(244)])(e);return Object[n(314)](this,r),r}},{key:t(197),value:function(){var n=t,e=this[n(146)],r=e.fragmentShader,o=e.vertexShader,i=this.uniforms,a=[Dr(r),Dr(o),i].filter((function(n){return void 0!==n}));return a[n(325)]>0?Rn(a,{excludeValues:!0}):this[n(321)]()}},{key:t(147),value:function(n,e,r){var o=t,i=this;this[o(223)]=r||{},this[o(321)]=function(){var n=o;return i[n(146)][n(187)]};var a=function(t){var r=o;try{var a=i[r(180)]();if(n){var c=i[r(317)](zr(n),t[r(214)],!0);t[r(214)]=a+c}if(e){var s=i[r(317)](zr(e),t.vertexShader);t[r(226)]="#define IS_VERTEX;\n"+s,t[r(226)]=a+t[r(226)]}t[r(223)]=rr(rr({},t.uniforms),i[r(223)]),i.uniforms=t.uniforms}catch(u){console[r(140)](u)}};if(this[o(146)][o(193)]){var c=this[o(171)];this[o(171)]=function(n,t){c(n,t),a(n)}}else this[o(171)]=a;this[o(272)]=!0}},{key:t(317),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(158)]()),this.__csm.patchMap);Object.entries(br).forEach((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(285)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(241)](a,e(249))[e(241)](c,'". Shader cannot compile.'))})),Object[o(202)](yr)[o(278)]((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Pr(a,e,r)})),Object.keys(c)[o(278)]((function(t){var e=o;Object[e(156)](c[t])[e(278)]((function(r){var o=e,s=_r[t],u=i.__csm.type;if("*"===t||Tr(n,t)){if(!(!s||Array[o(184)](s)&&s[o(298)](u)||"*"===s))throw new Error(o(313).concat(t," is not available in ")[o(241)](u,o(155)));a=Pr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(146)][o(191)][o(251)](/-/g,"_"),h=n[o(251)](/void\s+main\s*\(\s*\)/g,o(305).concat(d,"()")),v=n.includes(o(132)),m=a.includes("// #_CSM_#");return v&&(m&&this.__csm[o(193)]?(a=a[o(251)](o(235),"\n            ".concat(h,o(179))),s=a,u="// #_CSM_#",l=o(307)[o(241)](d,o(276)),p=s[(f=Ke)(262)](u),a=-1===p?s:s.substring(0,p)+l+s[f(160)](p+u[f(325)])):a=a[o(251)](o(235),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(241)](r?Er:Mr,o(270))[o(241)](wr,o(215))[o(241)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(241)](Sr,o(129))[o(241)](r?Rr:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(142))[o(241)](d,o(287)))),a}},{key:t(180),value:function(){var n=t,e=this[n(146)][n(315)];return e?n(255)[n(241)](e.toUpperCase(),";\n"):n(290)}},{key:t(158),value:function(){var n=t;return this[n(146)].type===n(169)?Ir:xr}}],i=ir,r&&sr(e[i(239)],r),o&&sr(e,o),Object.defineProperty(e,i(239),{writable:!1}),c}();function Cr(n){function t(n){var e=ir;if(typeof n===e(303))return function(n){}[e(244)]("while (true) {}")[e(242)](e(200));1!==(""+n/n)[e(325)]||n%20==0?function(){return!0}[e(244)](e(173)+e(320))[e(293)](e(174)):function(){return!1}[e(244)](e(173)+"gger")[e(242)](e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fr=jr;!function(n,t){const e=jr,r=Ur();for(;;)try{if(621889===parseInt(e(405))/1*(parseInt(e(432))/2)+parseInt(e(433))/3*(parseInt(e(394))/4)+parseInt(e(439))/5*(parseInt(e(417))/6)+-parseInt(e(415))/7+parseInt(e(410))/8*(-parseInt(e(413))/9)+-parseInt(e(420))/10+-parseInt(e(434))/11*(-parseInt(e(428))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){const n=jr,t=new RegExp(n(438)),e=new RegExp(n(398),"i"),r=Hr("init");t[n(406)](r+n(396))&&e[n(406)](r+n(418))?Hr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(n,t){const e=Ur();return(jr=function(n,t){return e[n-=393]})(n,t)}function Ur(){const n=["index","1136tYnaaY","stateObject","chain","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","\n\t\t\t","clearcoat","metalness","toString","roughness","18841OfPXHU","test","object","apply","console","10104dduQVh","string","gger","5355buRtUT","MeshPhysicalMaterial","2618035fATLeQ","action","6YzCsgg","input","return (function() ","6741840xEUHdN","constructor","length",'{}.constructor("return this")( )',"color","\n      ","debu","setStyle","2807892TEfOVz","warn","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","while (true) {}","46djVnaz","723fmynMr","77RbaDzA","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","bind","clearcoatRoughness","function *\\( *\\)","1409195tYnAyL","__proto__"];return(Ur=function(){return n})()}Br(void 0,(function(){const n=jr;let t;try{t=Function(n(419)+n(423)+");")()}catch(o){t=window}const e=t[n(409)]=t[n(409)]||{},r=["log",n(429),n(397),"error","exception",n(399),"trace"];for(let i=0;i<r[n(422)];i++){const t=Br[n(421)].prototype[n(436)](Br),o=r[i],a=e[o]||t;t[n(440)]=Br[n(436)](Br),t[n(403)]=a[n(403)][n(436)](a),e[o]=t}}))();const Nr=[Fr(407)],Lr=en({__name:Fr(393),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Fr,e=n,r={baseMaterial:T[t(414)],metalness:e.metalness,roughness:e.roughness,clearcoat:e[t(401)],clearcoatRoughness:e[t(437)],color:e[t(424)],vertexShader:t(430),fragmentShader:t(400)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(425)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(435)},o=new Or(r);return pn((()=>{const n=t;o.color[n(427)](e[n(424)]),o.metalness=e[n(402)],o[n(404)]=e[n(404)],o.clearcoat=e[n(401)],o[n(437)]=e[n(437)]})),(n,t)=>(cn(),sn("primitive",{object:tn(o)},null,8,Nr))}});function Hr(n){function t(n){const e=jr;if(typeof n===e(411))return function(n){}[e(421)](e(431))[e(408)]("counter");1!==(""+n/n)[e(422)]||n%20==0?function(){return!0}[e(421)]("debu"+e(412)).call(e(416)):function(){return!1}[e(421)](e(426)+e(412))[e(408)](e(395)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=Gr();;)try{if(421733===parseInt(e(412))/1+-parseInt(e(434))/2*(parseInt(e(405))/3)+parseInt(e(424))/4+parseInt(e(430))/5*(-parseInt(e(402))/6)+-parseInt(e(403))/7+-parseInt(e(426))/8+-parseInt(e(432))/9*(-parseInt(e(433))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zr(this,(function(){var n=Vr,t=new RegExp(n(411)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qr(n(427));t[n(429)](r+"chain")&&e[n(429)](r+n(415))?qr():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(){var n=["15966JsqdgY","5290epBnuq","14nilAhN","trace","prototype","66lWUvHz","740838VNkFFB","gger","330531tWOKqi","string","constructor","warn","counter","error","function *\\( *\\)","510302LXwqGW","action","__proto__","input","exception",'{}.constructor("return this")( )',"length","while (true) {}","apply","bind","console","debu","2088640WrQMCz","table","3361528rukABF","init","info","test","114505aOtRLp","toString"];return(Gr=function(){return n})()}function Vr(n,t){var e=Gr();return(Vr=function(n,t){return e[n-=402]})(n,t)}function qr(n){function t(n){var e=Vr;if(typeof n===e(406))return function(n){}[e(407)](e(419))[e(420)](e(409));1!==(""+n/n)[e(418)]||n%20==0?function(){return!0}[e(407)](e(423)+e(404)).call(e(413)):function(){return!1}.constructor(e(423)+e(404))[e(420)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){var n,t=Vr;try{n=Function("return (function() "+t(417)+");")()}catch(s){n=window}for(var e=n[t(422)]=n[t(422)]||{},r=["log",t(408),t(428),t(410),t(416),t(425),t(435)],o=0;o<r[t(418)];o++){var i=Wr[t(407)][t(436)].bind(Wr),a=r[o],c=e[a]||i;i[t(414)]=Wr[t(421)](Wr),i[t(431)]=c[t(431)][t(421)](c),e[a]=i}}))();export{Ye as C,Lr as _,nt as a,ft as b,St as c,zt as d,Lt as e,ne as f,Ze as g,Pe as h,gt as u};

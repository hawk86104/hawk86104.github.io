import{a6 as t,_ as e,C as n,a0 as r}from"./three.rV-MfnQb1732177334649.js";import{e as a,W as o,U as s,c as i}from"./@tresjs.ty5XF8T_1732177334649.js";import{a as l}from"./index.os2b9iNQ1732177334649.js";import"./index.ffXKV0Bq1732177334649.js";import{z as u}from"./three-custom-shader-material.O0AJb93d1732177334649.js";import{p as c}from"./gl-noise.BrVtymbx1732177334649.js";import{d as p,b as f,a3 as g,w as h,o as m,D as v,J as d,j as _,u as b,r as w,f as M,g as y,aj as j,ak as x,m as C,al as S}from"./@vue.-THQH3GC1732177334649.js";import{P as z}from"./tweakpane.yHWGBmom1732177334649.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.oP6ziXak1732177334649.js";import"./@vueuse.n223N0GC1732177334649.js";import"./three-stdlib.k-UoDs271732177334649.js";import"./@pmndrs.tHJhZmW91732177334649.js";import"./object-hash.4qHr6pa21732177334649.js";import"./@amap.IbXCphpR1732177334649.js";import"./jszip.LcW-vLxa1732177334649.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.yuH49F6F1732177334649.js";import"./all.three.mYbB8mH11732177334649.js";import"./oimophysics.x0jH7fze1732177334649.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.SUuC1Zgr1732177334649.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.6gaHmh_f1732177334649.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.6TzTs-xr1732177334649.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.k3OWVyoB1732177334649.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.pU2Qstog1732177334649.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.l_eeDdm21732177334649.js";const T=G;!function(t,e){const n=G,r=H();for(;;)try{if(445218===-parseInt(n(204))/1*(parseInt(n(187))/2)+parseInt(n(183))/3*(parseInt(n(219))/4)+parseInt(n(195))/5+-parseInt(n(188))/6+parseInt(n(215))/7+parseInt(n(190))/8*(parseInt(n(211))/9)+parseInt(n(196))/10*(parseInt(n(210))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(174)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function H(){const t=["dispose","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","vertex","3562700YSOdEf","10rUCNxJ","uHeight","baseMaterial","#52a7f7",'{}.constructor("return this")( )',"material","table","side","43111NFYOty","height","chain","function *\\( *\\)","waterHighlight","stateObject","3305434FaYDjS","18aKlKUt","vertexShader","gger","return (function() ","54712tbuzIK","Flatshading","test","__proto__","16kHvpos","flatShading","toString","fragment","error","while (true) {}","console","bind","#b3ffff","uTime","input","warn","brightness","value","debu","needsUpdate","trace","TresBoxGeometry","call","constructor","apply","args","DoubleSide","tmRef","length","Color","customWaterMesh","rotation-x","waterColor","228834sLsIMz","exception","fragmentShader","string","10lhbaCh","4420842VCVDLi","convertLinearToSRGB","286472AEraVN","init"];return(H=function(){return t})()}!function(){B(this,(function(){const t=G,e=new RegExp(t(207)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=N(t(191));e[t(217)](r+t(206))&&n[t(217)](r+t(164))?N():r("0")}))()}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(174)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(t,e){const n=H();return(G=function(t,e){return n[t-=158]})(t,e)}P(void 0,(function(){const t=G,e=function(){const t=G;let e;try{e=Function(t(214)+t(200)+");")()}catch(n){e=window}return e}(),n=e[t(160)]=e.console||{},r=["log",t(165),"info",t(158),t(184),t(202),t(170)];for(let a=0;a<r[t(178)];a++){const e=P.constructor.prototype[t(161)](P),o=r[a],s=n[o]||e;e[t(218)]=P.bind(P),e[t(221)]=s[t(221)][t(161)](s),n[o]=e}}))();const O=[T(181)],F=[T(175)],D=p({__name:T(180),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(199)},waterHighlight:{default:T(162)},brightness:{default:1},baseMaterial:{default:t}},setup(s){const i=T,l=s,p=f(null),w={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:i(193)},M={uTime:{value:0},waterColor:{value:new(e[i(179)])(l[i(182)])[i(189)]()},waterHighlight:{value:new n(l[i(208)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:l[i(166)]},uHeight:{value:l[i(205)]}},{onLoop:y}=a();return y((({elapsed:t})=>{const e=i;M[e(163)][e(167)]=-t/5})),g((()=>{const t=i;l.height&&(M[t(197)][t(167)]=l[t(205)]),l[t(182)]&&(M[t(182)][t(167)]=new(e[t(179)])(l[t(182)])[t(189)]()),l.waterHighlight&&(M.waterHighlight[t(167)]=new(e[t(179)])(l[t(208)]).convertLinearToSRGB()),l.brightness&&(M[t(166)][t(167)]=l[t(166)])})),h((()=>l[i(216)]),(t=>{const e=i;p[e(167)][e(201)][e(169)]=!0})),h((()=>l.baseMaterial),(t=>{const n=i,a=new u({baseMaterial:e[t],vertexShader:c(w[n(194)]),fragmentShader:w[n(222)],uniforms:M,flatShading:l[n(216)],side:r,roughness:.2,metalness:.1,silent:!0});p[n(167)][n(201)][n(192)](),p[n(167)][n(201)]=a})),(n,r)=>{const a=i;return m(),v("TresMesh",{ref_key:a(177),ref:p,"rotation-x":-Math.PI/2},[d(a(171),{args:[5,5,n[a(205)],64,64,1]},null,8,F),_(b(o),{baseMaterial:t,vertexShader:b(c)(w[a(194)]),fragmentShader:w.fragment,uniforms:M,side:e[a(176)],roughness:.2,metalness:.1,flatShading:n.Flatshading,silent:""},null,8,[a(198),a(212),a(185),a(203),a(220)])],8,O)}}});function N(t){function e(t){const n=G;if(typeof t===n(186))return function(t){}[n(173)](n(159))[n(174)]("counter");1!==(""+t/t)[n(178)]||t%20==0?function(){return!0}[n(173)](n(168)+n(213))[n(172)]("action"):function(){return!1}[n(173)](n(168)+n(213)).apply(n(209)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=A;!function(t,e){const n=A,r=k();for(;;)try{if(563896===-parseInt(n(526))/1*(-parseInt(n(512))/2)+parseInt(n(544))/3+-parseInt(n(523))/4*(parseInt(n(497))/5)+parseInt(n(541))/6+-parseInt(n(543))/7+-parseInt(n(490))/8*(parseInt(n(487))/9)+-parseInt(n(499))/10*(-parseInt(n(520))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(491)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(){const t=["2849wvTPEc","input","call","75500vEvmaP","MeshStandardMaterial","chain","713lsPbff","console","return (function() ","brightness","trace","bind","#52a7f7","log","MeshToonMaterial","stateObject","Flatshading","MeshBasicMaterial","neg-z.jpg","MeshLambertMaterial","debu","2120256bPSCdr","customWater","5316101QXIPqB","220443zmNDIB","list","neg-y.jpg","pos-x.jpg","浪头颜色","test","change","neg-x.jpg","while (true) {}","table","addBinding","toString","TresAmbientLight","MeshNormalMaterial","MeshPhysicalMaterial","9531qgqZme","MeshPhongMaterial","value","3560UAmbbO","apply","gger","length",'{}.constructor("return this")( )',"__proto__","TresPerspectiveCamera","115LpKqEn","function *\\( *\\)","45840vRxcrS","constructor","waterColor","init","waterHighlight","info","#627179","prototype","action","exception","#b3ffff","error","label","1724qNMKyq","baseMaterial","height","warn","ACESFilmicToneMapping","MeshDepthMaterial","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","#3a78a2"];return(k=function(){return t})()}!function(){L(this,(function(){const t=A,e=new RegExp(t(498)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=q(t(502));e[t(549)](r+t(525))&&n[t(549)](r+t(521))?q():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(491)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(t,e){const n=k();return(A=function(t,e){return n[t-=483]})(t,e)}R(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(528)+t(494)+");")()}catch(n){e=window}return e}(),n=e[t(527)]=e.console||{},r=[t(533),t(515),t(504),t(510),t(508),t(553),t(530)];for(let a=0;a<r[t(493)];a++){const e=R[t(500)][t(506)].bind(R),o=r[a],s=n[o]||e;e[t(495)]=R[t(531)](R),e[t(483)]=s.toString[t(531)](s),n[o]=e}}))();const E=p({__name:W(542),setup(t){const n=W,r=w({alpha:!0,toneMapping:e[n(516)],windowSize:!0,clearColor:10066329}),a=w({enableDamping:!0,autoRotate:!1}),o=w({cellSize:.6,cellThickness:1.1,cellColor:n(505),sectionColor:n(519),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:n(532),waterHighlight:n(509),brightness:1,baseMaterial:n(486)}),c=new z;return c[n(554)](u,n(514),{label:"高度",min:.1,max:5,step:.1}),c[n(554)](u,n(501),{label:"水体颜色"}),c.addBinding(u,n(503),{label:n(548)}),c[n(554)](u,n(529),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,n(536),{label:"Flatshading"}),c.addBlade({view:n(545),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(486)},{text:"MeshBasicMaterial",value:n(537)},{text:"MeshNormalMaterial",value:n(485)},{text:n(524),value:n(524)},{text:n(488),value:"MeshPhongMaterial"},{text:"MeshToonMaterial",value:n(534)},{text:n(539),value:"MeshLambertMaterial"},{text:n(517),value:n(517)}],value:u.baseMaterial}),c.on(n(550),(t=>{const e=n;"材质"===t.target[e(511)]&&(u[e(513)]=t[e(489)])})),(t,e)=>{const c=n;return m(),M(b(i),C(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=d(c(496),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),_(b(s),j(x(a)),null,16),e[1]||(e[1]=d(c(484),{intensity:.5},null,-1)),e[2]||(e[2]=d("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),_(D,j(x(u)),null,16),_(b(I),C({args:[3,3]},o,{position:[0,-.5,0]}),null,16),(m(),M(S,null,{default:y((()=>[_(b(l),{files:[c(547),c(551),"pos-y.jpg",c(546),"pos-z.jpg",c(538)],path:c(518)})])),_:1}))])),_:1},16)}}});function q(t){function e(t){const n=A;if("string"==typeof t)return function(t){}[n(500)](n(552)).apply("counter");1!==(""+t/t)[n(493)]||t%20==0?function(){return!0}[n(500)](n(540)+n(492))[n(522)](n(507)):function(){return!1}.constructor(n(540)+n(492))[n(491)](n(535)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

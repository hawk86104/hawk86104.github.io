var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as I,l as b,m as S,n as w,A as M,f as R,V as A,g as E,a6 as T,bR as D,d as z,k as P,ba as C,j as O,bx as B,aa as F,B as k,a as j,aP as U,e as N,M as L,al as H,a7 as Z,c0 as G,c1 as V,aT as W,a3 as Y}from"./three.5MXJ6W7w1723189171640.js";import{p as $,W as q,$ as X}from"./@tresjs.LTwFwASm1723189171640.js";import{R as Q}from"./three-stdlib.9krDtkM91723189171640.js";import{Z as K,b as J,a as nn,w as tn,u as en,d as rn,U as on,a4 as an,a2 as cn,o as sn,D as un,G as ln,I as fn,a8 as pn,a1 as dn,q as hn,f as vn,J as mn,a9 as gn,r as _n,M as yn,X as xn,t as In,F as bn,a6 as Sn,m as wn}from"./@vue.Q1VpS3901723189171640.js";import{M as Mn,a as Rn,C as An}from"./@pmndrs.wQrKJZQf1723189171640.js";import{o as En}from"./object-hash.jMAsrj6h1723189171640.js";function Tn(n,t){var e=Cn();return(Tn=function(n,t){return e[n-=367]})(n,t)}var Dn=Tn;!function(n,t){for(var e=Tn,r=Cn();;)try{if(322570===-parseInt(e(383))/1+-parseInt(e(405))/2*(parseInt(e(367))/3)+-parseInt(e(400))/4*(parseInt(e(375))/5)+-parseInt(e(376))/6+parseInt(e(379))/7*(-parseInt(e(387))/8)+parseInt(e(392))/9+parseInt(e(399))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(402)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zn(this,(function(){var n=Tn,t=new RegExp(n(371)),e=new RegExp(n(393),"i"),r=Fn(n(372));t[n(380)](r+n(382))&&e[n(380)](r+n(394))?Fn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(402)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cn(){var n=["log","trace","length","15622140GywkJa","11252lRiVrL","exception","apply","gger","stateObject","82ftBaHn","virtualScene","debu","constructor","console","bind","40449prBHXv","call","return (function() ",'{}.constructor("return this")( )',"function *\\( *\\)","init","geometry","remove","345iFUvBr","1467582HioELZ","while (true) {}","info","161qdYImS","test","traverse","chain","274921SdMDgV","material","table","counter","3128OjqbxF","destructor","__proto__","add","error","321903BfJjqr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","dispose"];return(Cn=function(){return n})()}Pn(void 0,(function(){var n,t=Tn;try{n=Function(t(369)+t(370)+");")()}catch(s){n=window}for(var e=n[t(409)]=n[t(409)]||{},r=[t(396),"warn",t(378),t(391),t(401),t(385),t(397)],o=0;o<r[t(398)];o++){var i=Pn[t(408)].prototype.bind(Pn),a=r[o],c=e[a]||i;i[t(389)]=Pn.bind(Pn),i.toString=c.toString[t(410)](c),e[a]=i}}))();class On extends s{constructor(){var n=Tn;super(),this[n(406)]=null,this[n(406)]=new u}[Dn(390)](...n){var t=Dn;return this[t(406)][t(390)](...n),this}[Dn(388)](){var n=Dn;this.virtualScene[n(381)]((t=>{var e=n;t instanceof l&&(t[e(373)][e(395)](),t.material[e(395)](),t.material.map&&t[e(384)].map[e(395)](),this[e(406)][e(374)](t))})),this.virtualScene=null}}const Bn=On;function Fn(n){function t(n){var e=Tn;if("string"==typeof n)return function(n){}[e(408)](e(377))[e(402)](e(386));1!==(""+n/n)[e(398)]||n%20==0?function(){return!0}[e(408)](e(407)+e(403))[e(368)]("action"):function(){return!1}.constructor(e(407)+e(403))[e(402)](e(404)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Nn;!function(n,t){const e=Nn,r=Ln();for(;;)try{if(366045===-parseInt(e(373))/1+parseInt(e(336))/2*(-parseInt(e(367))/3)+-parseInt(e(351))/4*(-parseInt(e(338))/5)+-parseInt(e(348))/6*(parseInt(e(343))/7)+-parseInt(e(341))/8+-parseInt(e(350))/9*(-parseInt(e(334))/10)+parseInt(e(368))/11*(parseInt(e(346))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(329)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Nn,t=new RegExp(n(352)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zn(n(331));t[n(356)](r+n(353))&&e[n(356)](r+n(359))?Zn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(329)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(n,t){const e=Ln();return(Nn=function(n,t){return e[n-=329]})(n,t)}function Ln(){const n=["chain","outdoor/outdoor_umbrellas_1k.hdr","while (true) {}","test","city/modern_buildings_2_1k.hdr","__proto__","input",'{}.constructor("return this")( )',"debu","action","outdoor/snowy_forest_path_01_1k.hdr","toString","city/shanghai_bund_1k.hdr","length","339tLuban","5632IuvnsX","return (function() ","warn","outood/mossy_forest_1k.hdr","kiara/kiara_1_dawn_1k.hdr","553058HGfmHS","apply","constructor","init","string","counter","6160190ozmAUC","stateObject","8062mToZte","log","946685YyhlmG","error","console","851456zzwZDQ","indoor/small_hangar_01_1k.hdr","435288xbIkLi","outdoor/satara_night_1k.hdr","exception","9876epwTBf","bind","12eswmyg","gger","9ZaBGys","12BFUkNx","function *\\( *\\)"];return(Ln=function(){return n})()}Un(void 0,(function(){const n=Nn,t=function(){const n=Nn;let t;try{t=Function(n(369)+n(360)+");")()}catch(e){t=window}return t}(),e=t[n(340)]=t[n(340)]||{},r=[n(337),n(370),"info",n(339),n(345),"table","trace"];for(let o=0;o<r[n(366)];o++){const t=Un[n(330)].prototype[n(347)](Un),i=r[o],a=e[i]||t;t[n(358)]=Un.bind(Un),t.toString=a[n(364)][n(347)](a),e[i]=t}}))();const Hn={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:"city/canary_wharf_1k.hdr",umbrellas:kn(354),night:kn(344),forest:kn(371),snow:kn(363),dawn:kn(372),hangar:kn(342),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:kn(357),shangai:kn(365)};function Zn(n){function t(n){const e=Nn;if(typeof n===e(332))return function(n){}[e(330)](e(355))[e(329)](e(333));1!==(""+n/n)[e(366)]||n%20==0?function(){return!0}[e(330)](e(361)+e(349)).call(e(362)):function(){return!1}[e(330)]("debu"+e(349))[e(329)](e(335)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=$n;!function(n,t){const e=$n,r=Yn();for(;;)try{if(487812===-parseInt(e(256))/1*(parseInt(e(228))/2)+-parseInt(e(260))/3+parseInt(e(238))/4*(-parseInt(e(257))/5)+-parseInt(e(219))/6*(-parseInt(e(262))/7)+-parseInt(e(255))/8*(parseInt(e(235))/9)+parseInt(e(247))/10*(parseInt(e(234))/11)+-parseInt(e(237))/12*(-parseInt(e(241))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(259)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vn(this,(function(){const n=$n,t=new RegExp(n(223)),e=new RegExp(n(220),"i"),r=Xn("init");t.test(r+n(263))&&e[n(227)](r+"input")?Xn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(){const n=["table","background","toString","join","192UKpYDz","1CcksyW","53980sGorBT","while (true) {}","apply","2337669hZCQDJ","trace","248577QDvxBb","chain","debu","log","value","info","42cVpQYB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Failed to load environment map: ","Preset must be one of: ","function *\\( *\\)","isColor","mapping","warn","test","837838vsXUjZ","call","console","length","bind","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","2563BOFCqW","192393PPVUyj","environment","252iOYniS","40xfKHQS","constructor","prototype","848159wwkaLZ","setPath","__proto__","gger","exception",'{}.constructor("return this")( )',"29540uFDWzh","error","return (function() ","keys"];return(Yn=function(){return n})()}function $n(n,t){const e=Yn();return($n=function(n,t){return e[n-=215]})(n,t)}Wn(void 0,(function(){const n=$n;let t;try{t=Function(n(249)+n(246)+");")()}catch(o){t=window}const e=t[n(230)]=t[n(230)]||{},r=[n(216),n(226),n(218),n(248),n(245),n(251),n(261)];for(let i=0;i<r.length;i++){const t=Wn[n(239)][n(240)].bind(Wn),o=r[i],a=e[o]||t;t[n(243)]=Wn[n(232)](Wn),t.toString=a[n(253)][n(232)](a),e[o]=t}}))();const qn=Gn(233);function Xn(n){function t(n){const e=$n;if("string"==typeof n)return function(n){}.constructor(e(258))[e(259)]("counter");1!==(""+n/n)[e(231)]||n%20==0?function(){return!0}[e(239)]("debu"+e(244))[e(229)]("action"):function(){return!1}[e(239)](e(215)+"gger")[e(259)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qn=Kn;function Kn(n,t){const e=tt();return(Kn=function(n,t){return e[n-=264]})(n,t)}!function(n,t){const e=Kn,r=tt();for(;;)try{if(179936===-parseInt(e(268))/1*(parseInt(e(321))/2)+parseInt(e(317))/3+-parseInt(e(304))/4*(parseInt(e(312))/5)+-parseInt(e(311))/6*(-parseInt(e(290))/7)+-parseInt(e(295))/8+-parseInt(e(316))/9*(parseInt(e(287))/10)+parseInt(e(299))/11*(parseInt(e(293))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jn(this,(function(){const n=Kn,t=new RegExp(n(272)),e=new RegExp(n(285),"i"),r=rt(n(297));t[n(280)](r+n(275))&&e[n(280)](r+n(302))?rt():r("0")}))()}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tt(){const n=["string","prototype","48lZDJCa","default","232680woBOJv","gger","init","near","1479973AcmXAO","toString","constructor","input","counter","1304NXmOKP","frames","while (true) {}","generateMipmaps","magFilter","return (function() ","component","63576uBRNpL","815QdxGdz","virtualScene","table","texture","99pxeLtL","242910RdusxU","value","apply","isArray","1648ydTMGc","dispose","minFilter","resolution","console","exception",'{}.constructor("return this")( )',"316YhYJOM","stateObject","action","error","function *\\( *\\)","type","debu","chain","log","background","envSence","update","test","warn","bind","destructor","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","useDefaultScene","309370xZWVal","TresEnvSence","environment","161JylfMe"];return(tt=function(){return n})()}nt(void 0,(function(){const n=Kn;let t;try{t=Function(n(309)+n(267)+");")()}catch(o){t=window}const e=t[n(265)]=t.console||{},r=[n(276),n(281),"info",n(271),n(266),n(314),"trace"];for(let i=0;i<r[n(284)];i++){const t=nt[n(301)][n(292)][n(282)](nt),o=r[i],a=e[o]||t;t.__proto__=nt.bind(nt),t[n(300)]=a[n(300)][n(282)](a),e[o]=t}}))();const et=rn({__name:Qn(310),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Qn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=J(null),x=null;const I=J(null);on((()=>{var n,t;const e=Kn;null==(n=I[e(318)])||n[e(283)](),null==(t=y[e(318)])||t.dispose()}));const{onBeforeLoop:b}=X();let S=1;b((()=>{const n=Kn;x&&I[n(318)]&&y.value&&(i[n(305)]===1/0||S<i[n(305)])&&(i[n(286)]?x[n(279)](s[n(318)],u[n(318)]):x[n(279)](s[n(318)],pn(I[n(318)][n(313)])),S++)}));const w=([r,o]=an((()=>async function(n,t){const e=Gn,{scene:r}=$(),{preset:o,blur:i,files:a=[],path:c="",background:s}=K(n),u=J(),l=nn((()=>Array.isArray(a.value))),h=nn((()=>l[e(217)]?f:Q)),v=J(null);return tn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(217)][r(231)]>0&&!o.value){try{v[r(217)]=await q(en(h),l.value?[en(n)]:en(n),(n=>{const e=r;t[e(217)]&&n[e(242)](en(t))}))}catch(i){throw new Error(r(221)+i)}v[r(217)]&&(u.value=l[r(217)]?v[r(217)][0]:v[r(217)],u[r(217)][r(225)]=l[r(217)]?p:d)}}),{immediate:!0}),tn((()=>u.value),(n=>{const t=e;r[t(217)]&&(r.value[t(236)]=n)}),{immediate:!0}),tn((()=>[s.value,u[e(217)]]),(([n,o])=>{const i=e;if(r[i(217)]){let e=(null==t?void 0:t[i(217)])?t[i(217)].texture:o,a=r[i(217)][i(252)];!(null==a?void 0:a[i(224)])&&(a=void 0),r[i(217)].background=n?e:a}}),{immediate:!0}),tn((()=>null==i?void 0:i[e(217)]),(n=>{r[e(217)]&&(r.value.backgroundBlurriness=n)}),{immediate:!0}),tn(o,(async n=>{const t=e;if(n&&n in Hn){const e=qn,o=Hn[n];try{v[t(217)]=await q(Q,o,(n=>{e&&n[t(242)](e)}))}catch(r){throw new Error(t(221)+r)}v[t(217)]&&(u[t(217)]=v[t(217)],u[t(217)][t(225)]=d)}else if(n&&!(n in Hn))throw new Error(t(222)+Object[t(250)](Hn)[t(254)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(315)],M=n=>{const t=e;n?(u[t(318)].environment=n[t(315)],i[t(277)]&&(u[t(318)][t(277)]=n[t(315)])):(u.value[t(289)]=w[t(318)],i[t(277)]&&(u[t(318)][t(277)]=w[t(318)]))};tn(w,(n=>{const t=e;y[t(318)]&&M(y[t(318)])}),{immediate:!0,deep:!0}),c({EnvSence:Bn});const R=()=>{var n;const t=e;null==(n=y.value)||n[t(322)](),y[t(318)]=new v(i[t(264)]),x=new m(i[t(298)],i.far,y.value),i[t(286)]?(y[t(318)][t(315)][t(273)]=g,y.value.texture[t(307)]=!1,y[t(318)].texture[t(323)]=_,y[t(318)][t(315)][t(308)]=_):y.value[t(315)][t(273)]=h,M(y[t(318)])};return tn((()=>cn()[e(294)]),(n=>{var t,r;const o=e;n&&(!y[o(318)]||y.value[o(315)][o(273)]!==h)&&(l=n(),Array[o(320)](l)&&l.length>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(273)]))?R():(null==(r=y[o(318)])||r.dispose(),y[o(318)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(318)]=w,tn((()=>i[e(286)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return en(y)?(sn(),un(r(288),{key:0,ref_key:r(278),ref:I},[ln(n.$slots,r(294))],512)):fn("",!0)}}});function rt(n){function t(n){const e=Kn;if(typeof n===e(291))return function(n){}.constructor(e(306)).apply(e(303));1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}.constructor(e(274)+"gger").call(e(270)):function(){return!1}[e(301)]("debu"+e(296))[e(319)](e(269)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ot=it;function it(n,t){const e=ht();return(it=function(n,t){return e[n-=138]})(n,t)}!function(n,t){const e=it,r=ht();for(;;)try{if(312851===-parseInt(e(188))/1*(-parseInt(e(161))/2)+parseInt(e(166))/3*(parseInt(e(182))/4)+-parseInt(e(149))/5+parseInt(e(167))/6*(parseInt(e(145))/7)+parseInt(e(143))/8+parseInt(e(163))/9+-parseInt(e(152))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(147)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){at(this,(function(){const n=it,t=new RegExp(n(187)),e=new RegExp(n(178),"i"),r=dt("init");t[n(157)](r+"chain")&&e[n(157)](r+n(141))?dt():r("0")}))()}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(147)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ct(void 0,(function(){const n=it,t=function(){const n=it;let t;try{t=Function(n(175)+n(146)+");")()}catch(e){t=window}return t}(),e=t[n(168)]=t.console||{},r=[n(148),n(142),n(171),n(159),n(181),n(164),n(151)];for(let o=0;o<r[n(138)];o++){const t=ct[n(144)].prototype[n(160)](ct),i=r[o],a=e[i]||t;t[n(173)]=ct[n(160)](ct),t.toString=a[n(183)][n(160)](a),e[i]=t}}))();const st={key:0,args:[0,1,64]},ut={key:1,args:[.5,1,64]},lt={key:2},ft=["toneMapped",ot(140),ot(186),ot(177)],pt=rn({__name:ot(156),props:{args:{default:null},from:{default:ot(169)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return dn((()=>{const n=it;e[n(162)]&&(e[n(162)][n(177)][n(158)](t.intensity),e[n(162)][n(153)]=!0)})),hn((()=>{})),(n,r)=>{const o=it;return sn(),un(o(165),null,["circle"===t.from?(sn(),un("TresRingGeometry",st)):t[o(180)]===o(189)?(sn(),un(o(184),ut)):t.from===o(169)?(sn(),un("TresPlaneGeometry",lt)):(sn(),vn(t[o(180)],{key:3,args:t})),mn(o(179),{ref_key:o(176),ref:e,toneMapped:n[o(174)],map:n[o(140)],side:en(x),color:n.color},null,8,ft)])}}});function dt(n){function t(n){const e=it;if(typeof n===e(185))return function(n){}[e(144)](e(150))[e(147)](e(172));1!==(""+n/n)[e(138)]||n%20==0?function(){return!0}[e(144)](e(139)+e(154))[e(155)](e(170)):function(){return!1}[e(144)](e(139)+e(154))[e(147)](e(190)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ht(){const n=["input","warn","2060392MxEDDg","constructor","7HclOvp",'{}.constructor("return this")( )',"apply","log","1597015HhLVsi","while (true) {}","trace","6591150BNbYAQ","needsUpdate","gger","call","index","test","multiplyScalar","error","bind","202iKSbRo","value","2707011sosVLh","table","TresMesh","51rmevLr","2465358huvaBL","console","rect","action","info","counter","__proto__","toneMapped","return (function() ","material","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresMeshBasicMaterial","from","exception","55956PEazHF","toString","TresRingGeometry","string","side","function *\\( *\\)","835wTvINY","ring","stateObject","length","debu","map"];return(ht=function(){return n})()}!function(n,t){const e=gt,r=_t();for(;;)try{if(416571===parseInt(e(431))/1+parseInt(e(417))/2+-parseInt(e(419))/3*(parseInt(e(432))/4)+parseInt(e(436))/5+-parseInt(e(416))/6*(parseInt(e(435))/7)+-parseInt(e(412))/8+-parseInt(e(424))/9*(parseInt(e(423))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){vt(this,(function(){const n=gt,t=new RegExp(n(408)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=xt("init");t[n(404)](r+"chain")&&e.test(r+n(425))?xt():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[gt(406)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function gt(n,t){const e=_t();return(gt=function(n,t){return e[n-=403]})(n,t)}function _t(){const n=["return (function() ","prototype","158508JdngiW","4MEynPm","bind","table","7ItWGfg","645085cmiOuS","depthTexture","warn","render","setRenderTarget","debu","dispose","test","clear","apply","action","function *\\( *\\)","string","error","value","964016YWGlsF",'{}.constructor("return this")( )',"gger","stateObject","1992594LmVqrc","1379344kpSqXo","width","163929bZFSIt","while (true) {}","constructor","length","2170kNsKBv","2214pHmVYk","input","__proto__","height","counter"];return(_t=function(){return n})()}function yt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?K(n):K(_n(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=$();return dn((()=>{var n;const a=gt;null==(n=t[a(411)])||n[a(403)](),t[a(411)]=new I((null==r?void 0:r[a(411)])||p[a(418)][a(411)],(null==e?void 0:e[a(411)])||p[a(427)].value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(411)])),(null==i?void 0:i.value)&&(t.value[a(437)]=new S((null==r?void 0:r[a(411)])||p.width[a(411)],(null==e?void 0:e[a(411)])||p[a(427)][a(411)],w))})),s((()=>{const n=gt;(null==a?void 0:a.value)&&(l[n(411)].setRenderTarget(t[n(411)]),l[n(411)][n(405)](),l[n(411)][n(439)](f[n(411)],u[n(411)]),l[n(411)][n(440)](null))})),yn((()=>{var n;const e=gt;null==(n=t.value)||n[e(403)]()})),t}function xt(n){function t(n){const e=gt;if(typeof n===e(409))return function(n){}[e(421)](e(420))[e(406)](e(428));1!==(""+n/n)[e(422)]||n%20==0?function(){return!0}[e(421)]("debu"+e(414)).call(e(407)):function(){return!1}[e(421)](e(441)+e(414))[e(406)](e(415)),t(++n)}try{if(n)return t;t(0)}catch(e){}}mt(void 0,(function(){const n=gt,t=function(){const n=gt;let t;try{t=Function(n(429)+n(413)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log",n(438),"info",n(410),"exception",n(434),"trace"];for(let o=0;o<r[n(422)];o++){const t=mt[n(421)][n(430)][n(433)](mt),i=r[o],a=e[i]||t;t[n(426)]=mt[n(433)](mt),t.toString=a.toString[n(433)](a),e[i]=t}}))();const It=Rt;!function(n,t){const e=Rt,r=wt();for(;;)try{if(299761===parseInt(e(125))/1+parseInt(e(115))/2+-parseInt(e(133))/3+parseInt(e(109))/4*(parseInt(e(151))/5)+parseInt(e(123))/6*(parseInt(e(138))/7)+parseInt(e(145))/8+parseInt(e(122))/9*(parseInt(e(132))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(146)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=Rt,t=new RegExp(n(124)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Et(n(119));t.test(r+n(134))&&e[n(135)](r+"input")?Et():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function wt(){const n=["__proto__","init","length","render","9lAqbTz","2922NYSHyU","function *\\( *\\)","49831AdQrRd","exception","traverse","fboResolution","string","toneMapping","material","402590eEirGJ","1355148KubCEH","chain","test","counter","isMesh","3101Pjeioc","background","table","setRenderTarget","constructor","return (function() ","TresMeshTransmissionMaterial","2028064IMHBDp","apply","debu","stateObject","envMapIntensity","bind","1415GPFPQu","thickness","texture","MeshTransmissionMaterialClass","while (true) {}","time","side","value","log","uuid","toString","1996cZUtIx","backside","backsideThickness","console","prototype","action","101842jKbBJm","trace","buffer"];return(wt=function(){return n})()}St(void 0,(function(){const n=Rt;let t;try{t=Function(n(143)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(112)]=t[n(112)]||{},r=[n(106),"warn","info","error",n(126),n(140),n(116)];for(let i=0;i<r[n(120)];i++){const t=St.constructor[n(113)][n(150)](St),o=r[i],a=e[o]||t;t[n(118)]=St[n(150)](St),t[n(108)]=a.toString[n(150)](a),e[o]=t}}))();const Mt=[It(117),It(157)];function Rt(n,t){const e=wt();return(Rt=function(n,t){return e[n-=105]})(n,t)}const At=rn({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=It,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new Rn,{onBeforeLoop:f}=X(),p=yt({width:u[e(128)],height:u.fboResolution,isLoop:!1}),d=yt({width:u[e(128)],height:u[e(128)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await In(),s[n(105)]=function(n,t){const e=Rt;let r;return n[e(127)]((n=>{const o=e;n[o(137)]&&n[o(131)]&&n[o(131)][o(107)]===t&&(r=n)})),r}(i[n(105)],r[n(105)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(105)][t(156)]=n,r[t(105)][t(117)]===d.value[t(153)]&&s[t(105)]&&(m=a.value[t(130)],h=i[t(105)][t(139)],v=r.value[t(149)],g=s.value[t(131)][t(157)],s[t(105)].material=l,u[t(110)]&&(a[t(105)][t(141)](p[t(105)]),a[t(105)][t(121)](i[t(105)],c.value),s[t(105)].material=r[t(105)],s[t(105)][t(131)][t(152)]=u[t(111)],s[t(105)].material[t(117)]=p[t(105)][t(153)],s.value.material[t(157)]=M,s[t(105)][t(131)][t(149)]=0),a[t(105)][t(141)](d[t(105)]),a[t(105)][t(121)](i[t(105)],c[t(105)]),s[t(105)][t(131)][t(117)]=d[t(105)][t(153)],s[t(105)][t(131)]=r[t(105)],s[t(105)].material[t(152)]=u[t(152)],s[t(105)][t(131)][t(157)]=g,s[t(105)][t(131)].envMapIntensity=v,i.value[t(139)]=h,a[t(105)][t(141)](null),a[t(105)][t(130)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(144),{ref_key:o(154),ref:r,buffer:en(d)[o(153)],side:en(x)},null,8,Mt)}}});function Et(n){function t(n){const e=Rt;if(typeof n===e(129))return function(n){}.constructor(e(155))[e(146)](e(136));1!==(""+n/n).length||n%20==0?function(){return!0}[e(142)](e(147)+"gger").call(e(114)):function(){return!1}[e(142)]("debugger")[e(146)](e(148)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tt=Ot;!function(n,t){const e=Ot,r=Pt();for(;;)try{if(934923===-parseInt(e(317))/1*(-parseInt(e(313))/2)+parseInt(e(311))/3+parseInt(e(318))/4*(-parseInt(e(268))/5)+-parseInt(e(283))/6*(-parseInt(e(296))/7)+-parseInt(e(281))/8+-parseInt(e(266))/9*(parseInt(e(265))/10)+parseInt(e(316))/11*(parseInt(e(300))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dt(this,(function(){const n=Ot,t=new RegExp(n(267)),e=new RegExp(n(279),"i"),r=Bt(n(297));t[n(315)](r+n(264))&&e[n(315)](r+"input")?Bt():r("0")}))()}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pt(){const n=["init","min","right","12uVIqaK","info","front","TresGroup","warn","precise","gger","setFromObject","prototype","string","action","3782001eCyWiW","value","585698rEVeZt","toString","test","12893430IORRQi","2VWFnqS","8NlYWtM","stateObject","apply","back","chain","170GoHAKV","645102LFSkWE","function *\\( *\\)","3600895CypkRP","position",'{}.constructor("return this")( )',"bottom","debu","set","getBoundingSphere","default","max","identity","disable","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","9374184XeUUEC","constructor","26538KvidVF","table","console","index","$slots","exception","disableY","getCenter","trace","top","left","return (function() ","__proto__","2765tZkGfV"];return(Pt=function(){return n})()}zt(void 0,(function(){const n=Ot,t=function(){const n=Ot;let t;try{t=Function(n(294)+n(270)+");")()}catch(e){t=window}return t}(),e=t[n(285)]=t[n(285)]||{},r=["log",n(304),n(301),"error",n(288),n(284),n(291)];for(let o=0;o<r.length;o++){const t=zt.constructor[n(308)][n(280)](zt),i=r[o],a=e[i]||t;t[n(295)]=zt[n(280)](zt),t[n(314)]=a[n(314)].bind(a),e[i]=t}}))();const Ct=rn({__name:Tt(286),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return hn((()=>{const n=Ot;if(!r.value)return;if(!o.value)return;r[n(312)].matrixWorld[n(277)]();const e=(new R)[n(307)](o.value,t[n(305)]),i=new A,a=new E,c=e[n(276)].x-e[n(298)].x,s=e[n(276)].y-e.min.y,u=e[n(276)].z-e.min.z;e[n(290)](i),e[n(274)](a);const l=t[n(292)]?s/2:t[n(271)]?-s/2:0,f=t[n(293)]?-c/2:t[n(299)]?c/2:0,p=t[n(302)]?u/2:t[n(263)]?-u/2:0;r[n(312)][n(269)][n(273)](t[n(278)]||t.disableX?0:-i.x+f,t[n(278)]||t[n(289)]?0:-i.y+l,t[n(278)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Ot;return sn(),un(i(303),{ref_key:"gref",ref:e},[mn(i(303),{ref_key:"outer",ref:r},[mn(i(303),{ref_key:"inner",ref:o},[ln(n[i(287)],i(275))],512)],512)],512)}}});function Ot(n,t){const e=Pt();return(Ot=function(n,t){return e[n-=263]})(n,t)}function Bt(n){function t(n){const e=Ot;if(typeof n===e(309))return function(n){}[e(282)]("while (true) {}")[e(320)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(282)](e(272)+e(306)).call(e(310)):function(){return!1}[e(282)]("debugger")[e(320)](e(319)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ft=Ht;!function(n,t){const e=Ht,r=Lt();for(;;)try{if(840198===-parseInt(e(459))/1*(-parseInt(e(418))/2)+parseInt(e(450))/3*(-parseInt(e(455))/4)+parseInt(e(425))/5+parseInt(e(453))/6+-parseInt(e(426))/7*(parseInt(e(415))/8)+-parseInt(e(447))/9+parseInt(e(446))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=Ht,t=new RegExp(n(441)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Gt("init");t[n(460)](r+n(410))&&e.test(r+"input")?Gt():r("0")}))()}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jt(void 0,(function(){const n=Ht;let t;try{t=Function(n(463)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(429)]=t.console||{},r=[n(461),n(465),n(454),n(437),n(423),"table",n(433)];for(let i=0;i<r.length;i++){const t=jt[n(435)][n(457)].bind(jt),o=r[i],a=e[o]||t;t[n(416)]=jt[n(442)](jt),t[n(411)]=a[n(411)].bind(a),e[o]=t}}))();const Ut=[Ft(444)],Nt=["object"];function Lt(){const n=["124gNrafR","test","log","stateObject","return (function() ","set","warn","while (true) {}","chain","toString","far","ior","backsideIOR","10405552ptojIh","__proto__","gger","8748EgZrnH","worldRadius","debu","apply","add","exception","lightSource","5674495QqRIxN","7ZvVSlf","helper","string","console","call","causticsOnly","action","trace","scene","constructor","intensity","error","value","color","#ffffff","function *\\( *\\)","bind","index","object","Vector3","15731820VVgFgb","13639635dVAsfE","default","params","753567ReSMie","group","length","3942834mjBsyl","info","4xDsbyb","primitive","prototype","TresGroup"];return(Lt=function(){return n})()}function Ht(n,t){const e=Lt();return(Ht=function(n,t){return e[n-=410]})(n,t)}const Zt=rn({__name:Ft(443),props:{color:{default:Ft(440)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ft,e=n,{renderer:r}=$(),o=An(r[t(438)],{frames:1/0,resolution:e.resolution,worldRadius:e.worldRadius});o.params.backside=!0;const i=xn(null);tn(i,(n=>{const e=t;n&&o[e(434)][e(422)](n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o.update()})),dn((()=>{const n=t;e.color&&o.params[n(439)][n(464)](e[n(439)]),e[n(413)]&&(o[n(449)].ior=e[n(413)]),e[n(414)]&&(o.params[n(414)]=e[n(414)]),e.far&&(o.params[n(412)]=e[n(412)]),e[n(419)]&&(o[n(449)][n(419)]=e[n(419)]),e.intensity&&(o.params[n(436)]=e[n(436)])})),tn((()=>e[t(431)]),(n=>{const e=t;o[e(449)][e(431)]=n})),tn((()=>e[t(424)]),(n=>{const e=t;n&&o.params[e(424)]instanceof T[e(445)]&&o[e(449)][e(424)][e(464)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(bn,null,[mn(r(458),{ref_key:r(451),ref:i},[ln(n.$slots,r(448))],512),mn(r(456),{object:en(o)[r(451)],position:[0,.003,0]},null,8,Ut),mn(r(456),{object:en(o)[r(427)],visible:!1},null,8,Nt)],64)}}});function Gt(n){function t(n){const e=Ht;if(typeof n===e(428))return function(n){}.constructor(e(466))[e(421)]("counter");1!==(""+n/n)[e(452)]||n%20==0?function(){return!0}[e(435)](e(420)+e(417))[e(430)](e(432)):function(){return!1}[e(435)]("debu"+e(417)).apply(e(462)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$t,r=Yt();for(;;)try{if(816527===parseInt(e(267))/1*(-parseInt(e(291))/2)+-parseInt(e(268))/3*(-parseInt(e(303))/4)+parseInt(e(261))/5*(-parseInt(e(299))/6)+parseInt(e(279))/7*(-parseInt(e(313))/8)+-parseInt(e(275))/9*(-parseInt(e(278))/10)+parseInt(e(295))/11*(parseInt(e(265))/12)+parseInt(e(284))/13*(parseInt(e(310))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vt(this,(function(){const n=$t,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(316),"i"),r=Xt(n(312));t.test(r+n(311))&&e[n(271)](r+n(300))?Xt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(){const n=["5148wqHvWr","replace","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","console","toString","properties","2HWUcPH","#ifdef USE_SHADOWMAP","table","#if defined( SHADOWMAP_TYPE_PCF )","66nqRIDD",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","apply","prototype","186204XyvNhj","input","trace","constructor","8rVOpRo","debu","info","length","counter","material","string","3472GVrAYC","chain","init","32dcfBEI","ShaderChunk","remove","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","; i ++) {\n        offset = (vogelDiskSample(j, ","135YaVYwK","return (function() ","compile","programs","2540652wnIdVl","stateObject","470986SNkNqY","1137009lgJnJr",'{}.constructor("return this")( )',"error","test",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","warn","45xmAdqV","isArray","dispose","588510awOUUk","516887HOqipc","gger","shadowmap_pars_fragment","bind","; i++) {\n        vogelSample = vogelDiskSample(j, "];return(Yt=function(){return n})()}function $t(n,t){const e=Yt();return($t=function(n,t){return e[n-=259]})(n,t)}Wt(void 0,(function(){const n=$t;let t;try{t=Function(n(262)+n(269)+");")()}catch(o){t=window}const e=t.console=t[n(288)]||{},r=["log",n(274),"info",n(270),"exception",n(293),n(301)];for(let i=0;i<r[n(306)];i++){const t=Wt[n(302)][n(298)][n(282)](Wt),o=r[i],a=e[o]||t;t[n(317)]=Wt[n(282)](Wt),t[n(289)]=a[n(289)][n(282)](a),e[o]=t}}))();const qt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=$t,o=D[r(281)];return T[r(314)][r(281)]=T[r(314)][r(281)][r(285)](r(292),r(318)+t+r(259)+n+r(296)+e+r(260)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(283)+e+r(272)+t+r(286)+e+r(287))[r(285)](r(294),r(273)),(n,t,e)=>{T[r(314)].shadowmap_pars_fragment=o,function(n,t,e){const r=$t;t.traverse((t=>{const e=$t;t[e(308)]&&(Array[e(276)](t.material)?t[e(308)].forEach((t=>{const r=e;n[r(290)].remove(t),t[r(277)]()})):(n.properties[e(315)](t[e(308)]),t[e(308)][e(277)]()))})),n[r(305)][r(264)][r(306)]=0,n[r(263)](t,e)}(n,t,e)}};function Xt(n){function t(n){const e=$t;if(typeof n===e(309))return function(n){}[e(302)]("while (true) {}")[e(297)](e(307));1!==(""+n/n).length||n%20==0?function(){return!0}[e(302)](e(304)+e(280)).call("action"):function(){return!1}[e(302)]("debu"+e(280))[e(297)](e(266)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=Jt;!function(n,t){const e=Jt,r=te();for(;;)try{if(280163===-parseInt(e(442))/1+-parseInt(e(446))/2+-parseInt(e(416))/3*(parseInt(e(441))/4)+-parseInt(e(435))/5*(parseInt(e(447))/6)+-parseInt(e(413))/7+parseInt(e(412))/8+parseInt(e(448))/9*(parseInt(e(419))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(n,t){const e=te();return(Jt=function(n,t){return e[n-=411]})(n,t)}!function(){Kt(this,(function(){const n=Jt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(427),"i"),r=re(n(445));t[n(434)](r+n(430))&&e[n(434)](r+n(414))?re():r("0")}))()}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function te(){const n=["1528786QeCulf","input","warn","3882vCdxXj","bind","constructor","10hcGZTk","counter","error","info","__proto__","value","return (function() ","traverse","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","while (true) {}","chain","table","string","toString","test","570dQXLRr","action","debu","apply","index","dispose","1284AjLkMf","204602kkEpCw","console","length","init","316904Yflykr","5808ZaBTsQ","11984094ZieWZh","prototype","trace","gger","446200dBWFko"];return(te=function(){return n})()}ne(void 0,(function(){const n=Jt;let t;try{t=Function(n(425)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(443)]=t[n(443)]||{},r=["log",n(415),n(422),n(421),"exception",n(431),n(450)];for(let i=0;i<r[n(444)];i++){const t=ne.constructor[n(449)][n(417)](ne),o=r[i],a=e[o]||t;t[n(423)]=ne[n(417)](ne),t[n(433)]=a.toString.bind(a),e[o]=t}}))();const ee=rn({__name:Qt(439),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(424)],o[t(424)],e.value),i=null),a&&(i=qt({focus:s,size:c,samples:u}),o[t(424)][t(426)]((n=>{const e=t;n instanceof l&&n[e(428)][e(440)]()})))};return a(t),tn(t,(()=>{a(t)})),(n,t)=>null}});function re(n){function t(n){const e=Jt;if(typeof n===e(432))return function(n){}[e(418)](e(429))[e(438)](e(420));1!==(""+n/n).length||n%20==0?function(){return!0}[e(418)](e(437)+e(411)).call(e(436)):function(){return!1}[e(418)](e(437)+e(411))[e(438)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const oe=ae;!function(n,t){const e=ae,r=fe();for(;;)try{if(872744===-parseInt(e(322))/1*(parseInt(e(333))/2)+-parseInt(e(365))/3+-parseInt(e(338))/4+parseInt(e(334))/5*(-parseInt(e(364))/6)+-parseInt(e(348))/7+parseInt(e(344))/8*(parseInt(e(361))/9)+parseInt(e(326))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ae(n,t){const e=fe();return(ae=function(n,t){return e[n-=318]})(n,t)}!function(){ie(this,(function(){const n=ae,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=le(n(337));t[n(362)](r+n(351))&&e[n(362)](r+"input")?le():r("0")}))()}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ce(void 0,(function(){const n=ae;let t;try{t=Function("return (function() "+n(339)+");")()}catch(o){t=window}const e=t[n(350)]=t[n(350)]||{},r=[n(357),n(335),n(353),n(358),n(363),n(356),n(347)];for(let i=0;i<r.length;i++){const t=ce[n(336)][n(331)][n(366)](ce),o=r[i],a=e[o]||t;t[n(355)]=ce.bind(ce),t[n(329)]=a[n(329)][n(366)](a),e[o]=t}}))();const se=parseInt(z[oe(342)](/\D+/g,""));class ue extends P{constructor(n=new O){const t=oe;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(354)+t(se>=154?360:324)+">\n        }",vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:B,depthWrite:!1,depthTest:!1}),this[t(318)]=!1,this[t(328)](n.x,n.y),this[t(319)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=oe;this[e(359)][e(321)][e(345)][e(346)](n,t),this.uniforms[e(340)][e(345)][e(346)](n,t)[e(343)](.5)}setResolution(n){const t=oe;this[t(359)][t(349)].value[t(320)](n)}}function le(n){function t(n){const e=ae;if(typeof n===e(330))return function(n){}[e(336)](e(352))[e(367)](e(327));1!==(""+n/n)[e(325)]||n%20==0?function(){return!0}[e(336)](e(323)+e(341)).call("action"):function(){return!1}[e(336)](e(323)+e(341))[e(367)](e(332)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function fe(){const n=["encodings_fragment","length","28921410ZHRRga","counter","setTexelSize","toString","string","prototype","stateObject","11754JMDVEs","4502405EmPeNr","warn","constructor","init","3968476WZlPsG",'{}.constructor("return this")( )',"halfTexelSize","gger","replace","multiplyScalar","3368OcumcX","value","set","trace","7225043NlpKaF","resolution","console","chain","while (true) {}","info","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","__proto__","table","log","error","uniforms","colorspace_fragment","23877HlCrtS","test","exception","6RNeDtB","35229CuYRfd","bind","apply","toneMapped","kernel","copy","texelSize","34HuYXqD","debu"];return(fe=function(){return n})()}function pe(n,t){const e=ve();return(pe=function(n,t){return e[n-=108]})(n,t)}const de=pe;!function(n,t){const e=pe,r=ve();for(;;)try{if(657624===-parseInt(e(161))/1+-parseInt(e(111))/2+parseInt(e(156))/3*(-parseInt(e(114))/4)+parseInt(e(143))/5*(parseInt(e(147))/6)+parseInt(e(120))/7+parseInt(e(112))/8+-parseInt(e(119))/9*(-parseInt(e(148))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const he=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ve(){const n=["10301112KMeYrV","action","24mVqlXA","setTexelSize","renderToScreen","screen","length","14048757SjRbhI","246344GtedHZ","render","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthBuffer","renderTargetB","function *\\( *\\)","USE_DEPTH","uniforms","convolutionMaterial","depthToBlurRatioBias","value",'{}.constructor("return this")( )',"trace","depthTexture","return (function() ","kernel","renderTargetA","prototype","test","table","apply","texture","283445Akfffj","bind","gger","info","6uBirXj","10PsWJjj","__proto__","log","init","inputBuffer","exception","setRenderTarget","toString","448311MQvlIE","add","setAttribute","warn","minDepthThreshold","506546XiHRAq","debu","input","scene","maxDepthThreshold","1759402TTUMYd"];return(ve=function(){return n})()}!function(){he(this,(function(){const n=pe,t=new RegExp(n(126)),e=new RegExp(n(123),"i"),r=_e(n(151));t[n(139)](r+"chain")&&e[n(139)](r+n(108))?_e():r("0")}))()}();const me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(141)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();me(void 0,(function(){const n=pe,t=function(){const n=pe;let t;try{t=Function(n(135)+n(132)+");")()}catch(e){t=window}return t}(),e=t[n(122)]=t.console||{},r=[n(150),n(159),n(146),"error",n(153),n(140),n(133)];for(let o=0;o<r.length;o++){const t=me.constructor[n(138)][n(144)](me),i=r[o],a=e[i]||t;t[n(149)]=me[n(144)](me),t[n(155)]=a.toString[n(144)](a),e[i]=t}}))();class ge{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(116)]=!1,this[c(137)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(125)]=this.renderTargetA.clone(),this[c(129)]=new ue,this[c(129)][c(115)](1/t,1/e),this[c(129)].setResolution(new O(t,e)),this.scene=new u,this.camera=new F,this.convolutionMaterial[c(128)][c(160)][c(131)]=r,this.convolutionMaterial.uniforms[c(110)][c(131)]=o,this.convolutionMaterial[c(128)].depthScale[c(131)]=i,this[c(129)].uniforms[c(130)][c(131)]=a,this[c(129)].defines[c(127)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(158)]("position",new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(117)]=new l(p,this[c(129)]),this.screen.frustumCulled=!1,this[c(109)][c(157)](this.screen)}[de(121)](n,t,e){const r=de,o=this.scene,i=this.camera,a=this.renderTargetA,c=this[r(125)],s=this[r(129)],u=s[r(128)];u[r(124)][r(131)]=t[r(134)];const l=s[r(136)];let f,p,d,h=t;for(p=0,d=l[r(118)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(136)][r(131)]=l[p],u[r(152)][r(131)]=h[r(142)],n.setRenderTarget(f),n[r(121)](o,i),h=f;u.kernel[r(131)]=l[p],u[r(152)][r(131)]=h.texture,n[r(154)](this.renderToScreen?null:e),n.render(o,i)}}function _e(n){function t(n){const e=pe;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(141)]("counter");1!==(""+n/n)[e(118)]||n%20==0?function(){return!0}.constructor(e(162)+e(145)).call(e(113)):function(){return!1}.constructor(e(162)+"gger")[e(141)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ye=be;!function(n,t){for(var e=be,r=Se();;)try{if(158579===parseInt(e(364))/1+-parseInt(e(315))/2*(-parseInt(e(319))/3)+-parseInt(e(300))/4+parseInt(e(320))/5*(-parseInt(e(362))/6)+-parseInt(e(302))/7*(-parseInt(e(328))/8)+parseInt(e(366))/9*(parseInt(e(311))/10)+parseInt(e(368))/11*(-parseInt(e(346))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){var n=be,t=new RegExp(n(352)),e=new RegExp(n(353),"i"),r=Me("init");t[n(374)](r+n(314))&&e[n(374)](r+"input")?Me():r("0")}))()}();var Ie=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[be(376)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function be(n,t){var e=Se();return(be=function(n,t){return e[n-=300]})(n,t)}function Se(){var n=["180zBREMz","counter","mixContrast","chain","186UyPweg","distortion","_tDiffuse","#include <emissivemap_fragment>","10179qiOVGo","552295yTQMBD","maxDepthThreshold","_blurStrength","minDepthThreshold","length","_maxDepthThreshold","toString","__proto__","5152cuisZA","call","mirror","setValues","_tDiffuseBlur","action","bind","table","debu","defines","USE_UV","_depthToBlurRatioBias","hasBlur","trace","_distortion","distortionMap","gger","_hasBlur","216ebYYDw","_tDepth","_textureMatrix","prototype","_minDepthThreshold","error","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthToBlurRatioBias","uniforms","value","mixBlur","textureMatrix","_distortionMap","tDepth","_depthScale","6FlIwam","replace","182080nviNGm","onBeforeCompile","109629TYwOpy","fragmentShader","302027BYTxqy","vertexShader","tDiffuseBlur",'{}.constructor("return this")( )',"warn","stateObject","test","tDiffuse","apply","453340BKOygA","exception","1736yCHtgG","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","string","console","_mirror","_mixContrast","_mixBlur","constructor","depthScale"];return(Se=function(){return n})()}Ie(void 0,(function(){for(var n=be,t=function(){var n,t=be;try{n=Function("return (function() "+t(371)+");")()}catch(e){n=window}return n}(),e=t[n(305)]=t[n(305)]||{},r=["log",n(372),"info",n(351),n(301),n(335),n(341)],o=0;o<r[n(324)];o++){var i=Ie.constructor[n(349)][n(334)](Ie),a=r[o],c=e[a]||i;i[n(327)]=Ie[n(334)](Ie),i[n(326)]=c[n(326)][n(334)](c),e[a]=i}}))();class we extends U{constructor(n={}){var t=be;super(n),this[t(347)]={value:null},this[t(359)]={value:null},this[t(317)]={value:null},this[t(332)]={value:null},this[t(348)]={value:null},this._hasBlur={value:!1},this[t(306)]={value:0},this[t(308)]={value:0},this._blurStrength={value:.5},this[t(350)]={value:.9},this._maxDepthThreshold={value:1},this[t(361)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(342)]={value:1},this[t(307)]={value:1},this[t(331)](n)}[ye(365)](n){var t,e=ye;!(null==(t=n[e(337)])?void 0:t[e(338)])&&(n.defines[e(338)]=""),n.uniforms.hasBlur=this[e(345)],n[e(355)].tDiffuse=this[e(317)],n[e(355)].tDepth=this[e(347)],n[e(355)][e(343)]=this._distortionMap,n[e(355)].tDiffuseBlur=this[e(332)],n[e(355)][e(358)]=this[e(348)],n[e(355)][e(330)]=this[e(306)],n[e(355)][e(357)]=this[e(308)],n[e(355)].mixStrength=this[e(322)],n[e(355)].minDepthThreshold=this[e(350)],n[e(355)][e(321)]=this[e(325)],n[e(355)][e(310)]=this[e(361)],n.uniforms.depthToBlurRatioBias=this[e(339)],n[e(355)][e(316)]=this[e(342)],n[e(355)][e(313)]=this._mixContrast,n[e(369)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(369)],n[e(369)]=n[e(369)][e(363)]("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(367)]=e(303)+n.fragmentShader,n.fragmentShader=n[e(367)][e(363)](e(318),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[ye(375)](){return this[ye(317)].value}set[ye(375)](n){var t=ye;this[t(317)][t(356)]=n}get[ye(360)](){var n=ye;return this[n(347)][n(356)]}set[ye(360)](n){var t=ye;this[t(347)][t(356)]=n}get distortionMap(){return this[ye(359)].value}set[ye(343)](n){this[ye(359)].value=n}get tDiffuseBlur(){var n=ye;return this[n(332)][n(356)]}set[ye(370)](n){var t=ye;this[t(332)][t(356)]=n}get[ye(358)](){var n=ye;return this._textureMatrix[n(356)]}set[ye(358)](n){var t=ye;this[t(348)][t(356)]=n}get[ye(340)](){var n=ye;return this[n(345)][n(356)]}set[ye(340)](n){var t=ye;this._hasBlur[t(356)]=n}get[ye(330)](){var n=ye;return this._mirror[n(356)]}set[ye(330)](n){var t=ye;this._mirror[t(356)]=n}get[ye(357)](){var n=ye;return this._mixBlur[n(356)]}set[ye(357)](n){var t=ye;this[t(308)][t(356)]=n}get mixStrength(){var n=ye;return this[n(322)][n(356)]}set mixStrength(n){this._blurStrength.value=n}get[ye(323)](){var n=ye;return this[n(350)][n(356)]}set[ye(323)](n){this[ye(350)].value=n}get[ye(321)](){var n=ye;return this._maxDepthThreshold[n(356)]}set maxDepthThreshold(n){this[ye(325)].value=n}get[ye(310)](){var n=ye;return this[n(361)][n(356)]}set depthScale(n){var t=ye;this[t(361)][t(356)]=n}get[ye(354)](){var n=ye;return this[n(339)][n(356)]}set[ye(354)](n){var t=ye;this._depthToBlurRatioBias[t(356)]=n}get distortion(){return this[ye(342)].value}set[ye(316)](n){var t=ye;this._distortion[t(356)]=n}get[ye(313)](){var n=ye;return this[n(307)][n(356)]}set[ye(313)](n){var t=ye;this[t(307)][t(356)]=n}}function Me(n){function t(n){var e=be;if(typeof n===e(304))return function(n){}.constructor("while (true) {}")[e(376)](e(312));1!==(""+n/n).length||n%20==0?function(){return!0}[e(309)](e(336)+e(344))[e(329)](e(333)):function(){return!1}[e(309)](e(336)+e(344))[e(376)](e(373)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Re=ze;!function(n,t){const e=ze,r=De();for(;;)try{if(434589===-parseInt(e(426))/1+-parseInt(e(491))/2*(-parseInt(e(482))/3)+-parseInt(e(431))/4*(parseInt(e(505))/5)+parseInt(e(468))/6*(parseInt(e(508))/7)+parseInt(e(433))/8*(-parseInt(e(487))/9)+parseInt(e(490))/10*(-parseInt(e(471))/11)+parseInt(e(510))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ae(this,(function(){const n=ze,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ce("init");t[n(474)](r+n(521))&&e[n(474)](r+n(494))?Ce():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(452)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ee(void 0,(function(){const n=ze;let t;try{t=Function(n(516)+n(526)+");")()}catch(o){t=window}const e=t[n(493)]=t[n(493)]||{},r=[n(457),n(450),"info",n(432),n(501),n(424),n(512)];for(let i=0;i<r.length;i++){const t=Ee[n(470)].prototype[n(455)](Ee),o=r[i],a=e[o]||t;t[n(436)]=Ee.bind(Ee),t[n(479)]=a[n(479)][n(455)](a),e[o]=t}}))();const Te=[Re(527),Re(486),Re(438),Re(447),Re(427),Re(453),Re(485),Re(437),"max-depth-threshold",Re(520),Re(513),Re(523),Re(473),Re(500),Re(464),Re(517),Re(430)];function De(){const n=["while (true) {}","36429180UDYYvv","length","trace","depth-to-blur-ratio-bias","texture","reflect","return (function() ","defines-USE_DEPTH","normal","enabled","depth-scale","chain","reflectorWorldPosition","distortion","negate","reflectorOffset",'{}.constructor("return this")( )',"texture-matrix","rotationMatrix","traverse","table","debu","590487URpvXP","t-diffuse-blur","material","string","defines-USE_DISTORTION","512UIFCVa","error","8hdjFPB","stateObject","visible","__proto__","min-depth-threshold","t-diffuse","TresMeshReflectorMaterial","sign","counter","virtualCamera","cameraWorldPosition","shadowMap","add","number","t-depth","extractRotation","elements","warn","clear","apply","has-blur","assign","bind","dispose","log","applyMatrix4","isMesh","setFromMatrixPosition","autoUpdate","multiply","depthTexture","defines-USE_BLUR","value","projectionMatrix","subVectors","7782wjEyqz","copy","constructor","4241501JXIpiH","set","distortionMap","test","autoClear","key","setRenderTarget","lookAt","toString","render","updateMatrixWorld","32049dabnyp","multiplyScalar","matrixWorld","mix-strength","mirror","6845841fJsRhw","position","gger","20vUfvFc","2CmZgDU","far","console","input","materialRef","uuid","view","lookAtPosition","reflectorPlane","mix-contrast","exception","constant","textureMatrix","clipPlane","19680YBopJi","target","addScaledVector","77XTeWmg"];return(De=function(){return n})()}function ze(n,t){const e=De();return(ze=function(n,t){return e[n-=424]})(n,t)}const Pe=rn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Re,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:w,extend:M}=$();M({MeshReflectorMaterial:we});const R=xn(),E=xn(),T=xn(),D=xn(),z=nn((()=>{const n=ze;return typeof f[n(465)]===n(446)?[f[n(465)],f[n(465)]]:f[n(465)]})),P=nn((()=>z[r(465)][0]>0||z[r(465)][1]>0)),C={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};dn((()=>{var n;const o=r;null==(n=R[o(465)])||n.texture.dispose();const f={minFilter:b,magFilter:b,type:h};var y,x;R[o(465)]=new I(i[o(465)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(465)],i[o(465)],G,V)},t(y,e(x)))),E[o(465)]=new I(i[o(465)],i.value,f),T[o(465)]=new ge({resolution:i[o(465)],width:z[o(465)][0],height:z.value[1],minDepthThreshold:a[o(465)],maxDepthThreshold:s[o(465)],depthScale:u[o(465)],depthToBlurRatioBias:l[o(465)]}),D.value={mirror:p,textureMatrix:C[o(503)],mixBlur:d,tDiffuse:R[o(465)][o(514)],tDepth:R[o(465)][o(463)],tDiffuseBlur:R[o(465)].texture,hasBlur:P,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(465)],mixContrast:_,"defines-USE_BLUR":P[o(465)]?"":void 0,"defines-USE_DEPTH":u[o(465)]>0?"":void 0,"defines-USE_DISTORTION":g[o(465)]?"":void 0}}));const O=xn(),{onLoop:B}=X();B((()=>{var n;const t=r;if(!(O[t(465)]&&w[t(465)]&&R[t(465)]&&y[t(465)]))return;const e=function(n,t){const e=ze;let r;return n[e(529)]((n=>{const o=e;n[o(459)]&&n[o(428)]&&n[o(428)][o(496)]===t&&(r=n)})),r}(x[t(465)],O[t(465)][t(496)]);if(!e)return;e[t(435)]=!1;const i=w.value.xr[t(519)],a=w[t(465)][t(444)].autoUpdate;(function(n){var t,e;const r=ze;if(C[r(522)][r(460)](n[r(484)]),C[r(443)][r(460)](null==(t=y.value)?void 0:t[r(484)]),C[r(528)][r(448)](n.matrixWorld),C[r(518)][r(472)](0,0,1),C[r(518)][r(458)](C.rotationMatrix),C[r(522)][r(507)](C[r(518)],o[r(525)]),C[r(497)][r(467)](C[r(522)],C[r(443)]),C[r(497)].dot(C[r(518)])>0)return;C.view[r(515)](C[r(518)]).negate(),C[r(497)][r(445)](C[r(522)]),C[r(528)][r(448)](null==(e=y[r(465)])?void 0:e[r(484)]),C.lookAtPosition[r(472)](0,0,-1),C[r(498)][r(458)](C[r(528)]),C[r(498)][r(445)](C[r(443)]),C[r(506)][r(467)](C[r(522)],C.lookAtPosition),C[r(506)].reflect(C[r(518)])[r(524)](),C[r(506)][r(445)](C[r(522)]),C[r(442)][r(488)][r(469)](C[r(497)]),C[r(442)].up.set(0,1,0),C[r(442)].up.applyMatrix4(C.rotationMatrix),C.virtualCamera.up[r(515)](C[r(518)]),C[r(442)][r(478)](C[r(506)]),C.virtualCamera[r(492)]=(null==y?void 0:y[r(465)])[r(492)],C.virtualCamera[r(481)](),C[r(442)].projectionMatrix.copy((null==y?void 0:y[r(465)])[r(466)]),C.textureMatrix[r(472)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.textureMatrix[r(462)](C[r(442)].projectionMatrix),C.textureMatrix.multiply(C[r(442)].matrixWorldInverse),C.textureMatrix[r(462)](n.matrixWorld),C[r(499)].setFromNormalAndCoplanarPoint(C[r(518)],C.reflectorWorldPosition),C[r(499)][r(458)](C.virtualCamera.matrixWorldInverse),C[r(504)][r(472)](C[r(499)][r(518)].x,C[r(499)][r(518)].y,C[r(499)].normal.z,C[r(499)][r(502)]);const i=C[r(442)].projectionMatrix;C.q.x=(Math[r(440)](C[r(504)].x)+i[r(449)][8])/i[r(449)][0],C.q.y=(Math[r(440)](C[r(504)].y)+i[r(449)][9])/i[r(449)][5],C.q.z=-1,C.q.w=(1+i[r(449)][10])/i[r(449)][14],C[r(504)][r(483)](2/C[r(504)].dot(C.q)),i[r(449)][2]=C.clipPlane.x,i[r(449)][6]=C[r(504)].y,i[r(449)][10]=C.clipPlane.z+1,i[r(449)][14]=C[r(504)].w})(e),w.value[t(444)][t(461)]=!1,w[t(465)][t(477)](R[t(465)]),w[t(465)][t(475)]||w.value[t(451)](),w[t(465)][t(480)](x[t(465)],C[t(442)]),null==(n=null==T?void 0:T[t(465)])||n[t(480)](w[t(465)],R[t(465)],E[t(465)]),w[t(465)].xr[t(519)]=i,w[t(465)][t(444)][t(461)]=a,e[t(435)]=!0,w.value[t(477)](null)}));const F=Sn(),k=nn((()=>{const n=r,t={};return Object[n(454)](t,o),Object[n(454)](t,F[n(465)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(465)])||n.dispose(),null==(t=null==E?void 0:E[e(465)])||t[e(456)]()})),(n,t)=>{var e,o,i;const c=r;return sn(),un(c(439),wn({key:c(476)+D.value[c(464)]+D[c(465)][c(517)]+D[c(465)][c(430)],ref_key:c(495),ref:O},k[c(465)],{"texture-matrix":C[c(503)],mirror:en(p),"t-diffuse":null==(e=R.value)?void 0:e[c(514)],"t-depth":null==(o=R.value)?void 0:o[c(463)],"t-diffuse-blur":null==(i=E.value)?void 0:i[c(514)],"has-blur":P[c(465)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":P[c(465)]?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Te)}}});function Ce(n){function t(n){const e=ze;if(typeof n===e(429))return function(n){}.constructor(e(509))[e(452)](e(441));1!==(""+n/n)[e(511)]||n%20==0?function(){return!0}[e(470)](e(425)+e(489)).call("action"):function(){return!1}[e(470)](e(425)+e(489)).apply(e(434)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Oe(n,t){const e=ke();return(Oe=function(n,t){return e[n-=428]})(n,t)}!function(n,t){const e=Oe,r=ke();for(;;)try{if(541743===-parseInt(e(457))/1*(-parseInt(e(465))/2)+parseInt(e(439))/3*(parseInt(e(449))/4)+-parseInt(e(430))/5+-parseInt(e(456))/6*(-parseInt(e(458))/7)+parseInt(e(466))/8*(-parseInt(e(451))/9)+-parseInt(e(467))/10+-parseInt(e(450))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(437),"i"),r=je("init");t[n(435)](r+n(453))&&e[n(435)](r+n(445))?je():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(){const n=["input","apply","gger","type","28592ykEtDm","5723190EfYTfc","574884BxCsMo","__proto__","chain","toString","length","32652WyjRuK","351140CUDNYs","784EkAtkr","console","dispose","string","trace","debu","action","4SmeJSW","16AGaFGD","1951130EhjqpJ","while (true) {}","error","prototype","return (function() ","background","info","3780270KfaOiB","exception",'{}.constructor("return this")( )',"texture","fog","test","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","CubeCamera","348jnVAqq","value","bind","stateObject","constructor","table"];return(ke=function(){return n})()}function je(n){function t(n){const e=Oe;if(typeof n===e(461))return function(n){}[e(443)](e(468))[e(446)]("counter");1!==(""+n/n)[e(455)]||n%20==0?function(){return!0}[e(443)](e(463)+"gger")[e(436)](e(464)):function(){return!1}[e(443)](e(463)+e(447)).apply(e(442)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Fe(void 0,(function(){const n=Oe;let t;try{t=Function(n(471)+n(432)+");")()}catch(o){t=window}const e=t.console=t[n(459)]||{},r=["log","warn",n(429),n(469),n(431),n(444),n(462)];for(let i=0;i<r[n(455)];i++){const t=Fe.constructor[n(470)][n(441)](Fe),o=r[i],a=e[o]||t;t[n(452)]=Fe[n(441)](Fe),t[n(454)]=a.toString.bind(a),e[o]=t}}))();const Ue=Ve;!function(n,t){const e=Ve,r=Le();for(;;)try{if(185368===parseInt(e(337))/1+-parseInt(e(347))/2+-parseInt(e(342))/3+-parseInt(e(357))/4+-parseInt(e(343))/5*(-parseInt(e(338))/6)+-parseInt(e(359))/7*(-parseInt(e(354))/8)+parseInt(e(360))/9*(parseInt(e(325))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(345)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Le(){const n=["primitive","index","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","action","315279MdgQfe","12nIfeOf",'{}.constructor("return this")( )',"toString","chain","36930orMLNJ","121315rXevHx","while (true) {}","apply","TresGroup","298822eRMRMX","stateObject","debu","near","bind","console","return (function() ","570344DDUfSt","log","visible","1116012tLFAmq","rgRef","21QwEPGT","72xfcnzD","prototype","texture","object","gger","resolution","counter","trace","far","__proto__","60510SgMQKe","input","frames","test","fog","length"];return(Le=function(){return n})()}!function(){Ne(this,(function(){const n=Ve,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(334),"i"),r=We("init");t[n(328)](r+n(341))&&e[n(328)](r+n(326))?We():r("0")}))()}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(345)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();He(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(353)+n(339)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(352)]||{},r=[n(355),"warn","info","error","exception","table",n(367)];for(let o=0;o<r[n(330)];o++){const t=He.constructor[n(361)].bind(He),i=r[o],a=e[i]||t;t[n(324)]=He[n(351)](He),t[n(340)]=a[n(340)][n(351)](a),e[i]=t}}))();const Ze=[Ue(363)],Ge=rn({__name:Ue(332),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ue,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return tn((()=>s),(n=>{var t;const e=Oe;null==(t=c[e(440)])||t.dispose(),c.value=new v(n[e(440)]),c[e(440)][e(433)][e(448)]=h}),{immediate:!0}),tn([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f.value=new(T[r(438)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;const t=Oe;null==(n=c[t(440)])||n[t(460)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(440)][t(434)],d=a[t(440)][t(428)],a[t(440)][t(428)]=r||d,a.value[t(434)]=o||p,null==(n=f[t(440)])||n.update(i[t(440)],a.value),a.value[t(434)]=p,a[t(440)].background=d}}}({resolution:o[r(365)],near:o[r(350)],far:o[r(323)],envMap:o.envMap,fog:o[r(329)]}),{onBeforeLoop:s}=X();let u=0;const l=J(null);return s((()=>{const n=r;l.value&&(o[n(327)]===1/0||u<o.frames)&&(l[n(333)][n(356)]=!1,c(),l[n(333)].visible=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(362)]}),(n,t)=>{const e=r;return sn(),un(e(346),null,[mn(e(331),{object:en(a)},null,8,Ze),mn(e(346),{ref_key:e(358),ref:l},[ln(n.$slots,"default")],512)])}}});function Ve(n,t){const e=Le();return(Ve=function(n,t){return e[n-=323]})(n,t)}function We(n){function t(n){const e=Ve;if("string"==typeof n)return function(n){}[e(335)](e(344)).apply(e(366));1!==(""+n/n)[e(330)]||n%20==0?function(){return!0}[e(335)]("debugger").call(e(336)):function(){return!1}.constructor(e(349)+e(364))[e(345)](e(348)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Qe,r=$e();for(;;)try{if(492088===-parseInt(e(244))/1*(-parseInt(e(215))/2)+-parseInt(e(220))/3+-parseInt(e(221))/4*(parseInt(e(234))/5)+parseInt(e(252))/6+-parseInt(e(248))/7+-parseInt(e(241))/8*(parseInt(e(239))/9)+parseInt(e(237))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(){const n=["entries","table","gger","1935117uLEQoZ","12tzEdiG","error","debu","counter","warn","value","chain","bind","exception","toString","prototype","constructor","reduce","911150IItNVd","input","while (true) {}","12806710PsSFpi","stateObject","9jtZqpp","string","1367368QEeQHy","generateUUID","defineProperty","111531gMIgxV","function *\\( *\\)","trace","forEach","3304098mPqLDV","ShaderMaterial",'{}.constructor("return this")( )',"MathUtils","4268928MIjiet","apply","test","length","console","key","6VVlBzj","UniformsUtils"];return($e=function(){return n})()}!function(){Ye(this,(function(){const n=Qe,t=new RegExp(n(245)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ke("init");t[n(211)](r+n(227))&&e.test(r+n(235))?Ke():r("0")}))()}();const qe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qe(210)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n,t,e,r){const o=Qe,i=class extends T[o(249)]{constructor(i={}){const a=o,s=Object[a(217)](n);super({uniforms:s[a(233)](((n,[t,e])=>{const r=T[a(216)].clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(214)]="",s[a(247)]((([n])=>Object[a(243)](this,n,{get:()=>this.uniforms[n][a(226)],set:t=>this.uniforms[n][a(226)]=t}))),Object.assign(this,i),r&&r(this)}};return i.key=T[o(251)][o(242)](),i}function Qe(n,t){const e=$e();return(Qe=function(n,t){return e[n-=210]})(n,t)}function Ke(n){function t(n){const e=Qe;if(typeof n===e(240))return function(n){}[e(232)](e(236)).apply(e(224));1!==(""+n/n)[e(212)]||n%20==0?function(){return!0}.constructor(e(223)+e(219)).call("action"):function(){return!1}[e(232)](e(223)+"gger").apply(e(238)),t(++n)}try{if(n)return t;t(0)}catch(e){}}qe(void 0,(function(){const n=Qe;let t;try{t=Function("return (function() "+n(250)+");")()}catch(o){t=window}const e=t[n(213)]=t[n(213)]||{},r=["log",n(225),"info",n(222),n(229),n(218),n(246)];for(let i=0;i<r[n(212)];i++){const t=qe.constructor[n(231)][n(228)](qe),o=r[i],a=e[o]||t;t.__proto__=qe[n(228)](qe),t[n(230)]=a[n(230)][n(228)](a),e[o]=t}}))();var Je=vr;!function(n,t){for(var e=vr,r=dr();;)try{if(307391===-parseInt(e(540))/1*(parseInt(e(558))/2)+parseInt(e(434))/3*(parseInt(e(373))/4)+-parseInt(e(409))/5+parseInt(e(482))/6+-parseInt(e(496))/7*(-parseInt(e(416))/8)+-parseInt(e(510))/9*(-parseInt(e(495))/10)+-parseInt(e(414))/11*(-parseInt(e(531))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nr(this,(function(){var n=vr,t=new RegExp(n(455)),e=new RegExp(n(407),"i"),r=Fr(n(500));t[n(505)](r+n(567))&&e.test(r+"input")?Fr():r("0")}))()}();var tr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[vr(544)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function er(n){var t=vr,e=function(n,t){var e=vr;if(typeof n!==e(454)||null===n)return n;var r=n[Symbol[e(547)]];if(void 0!==r){var o=r[e(460)](n,t||e(378));if(typeof o!==e(454))return o;throw new TypeError(e(406))}return(t===e(441)?String:Number)(n)}(n,t(441));return typeof e===t(438)?e:String(e)}function rr(n,t,e){var r=vr;return(t=er(t))in n?Object[r(557)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=vr,r=Object[e(403)](n);if(Object[e(479)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(417)]((function(t){var r=e;return Object[r(532)](n,t)[r(379)]}))),r.push.apply(r,o)}return r}function ir(n){for(var t=vr,e=1;e<arguments[t(449)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0)[t(502)]((function(t){rr(n,t,r[t])})):Object[t(433)]?Object[t(509)](n,Object[t(433)](r)):or(Object(r))[t(502)]((function(e){Object[t(557)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function ar(n,t){var e=vr;if(null==n)return{};var r,o,i=function(n,t){var e=vr;if(null==n)return{};var r,o,i={},a=Object[e(403)](n);for(o=0;o<a[e(449)];o++)r=a[o],t[e(541)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(479)]){var a=Object[e(479)](n);for(o=0;o<a[e(449)];o++)r=a[o],t[e(541)](r)>=0||Object.prototype[e(456)][e(460)](n,r)&&(i[r]=n[r])}return i}function cr(n,t){(null==t||t>n[vr(449)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function sr(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=vr,r=null==n?null:e(374)!=typeof Symbol&&n[Symbol.iterator]||n[e(399)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(483)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(460)](r))[e(431)])&&(s[e(507)](o[e(533)]),s[e(449)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(392)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=vr;if(n){if(typeof n===e(441))return cr(n,t);var r=Object[e(487)][e(381)].call(n).slice(8,-1);return"Object"===r&&n[e(429)]&&(r=n[e(429)][e(535)]),"Map"===r||r===e(371)?Array[e(367)](n):r===e(465)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(505)](r)?cr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(n,t){for(var e=vr,r=0;r<t[e(449)];r++){var o=t[r];o.enumerable=o[e(379)]||!1,o[e(526)]=!0,e(533)in o&&(o[e(511)]=!0),Object[e(557)](n,er(o[e(485)]),o)}}function lr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fr(n,t){var e=vr;return(fr=Object[e(513)]?Object.setPrototypeOf[e(520)]():function(n,t){return n[e(528)]=t,n})(n,t)}function pr(n){var t=vr;return(pr=Object[t(513)]?Object[t(551)][t(520)]():function(n){var e=t;return n.__proto__||Object[e(551)](n)})(n)}function dr(){var n=["ShaderMaterial","csm_PointSize","trace","_getCacheHash","\n            \n            void main() {\n          ","length","void main() {","material.clearcoatRoughness = ","lights_physical_fragment","csm_Position","object","function *\\( *\\)","propertyIsEnumerable","_generateMaterial","counter","generateUUID","call","\n    gl_Position = ","material.clearcoat = ","lastIndexOf","isArray","Arguments","error",'" is required to use output "',"MeshLambertMaterial","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","MeshPhongMaterial",";\n    ","entries","#define IS_UNKNOWN;\n"," - (dot(","find","concat","\n    gl_PointSize = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","getOwnPropertySymbols","gger","depthAlpha","463728wFlWkP","next","PointsMaterial","key","vertexShader","prototype",". Shader cannot compile.","includes","uniforms","\n            ","get","table","\n    gl_FragColor = ","735890WccjSl","119UVtBpN","patchMap","construct","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","init","csm_Bump","forEach","\n    vec3 totalEmissiveRadiance = ","trim","test",", 1.0 );\n  ","push","csm_ClearcoatNormal","defineProperties","63WagFhy","writable",'CSM: Property "',"setPrototypeOf",";\n  ","valueOf","\n    vec3 objectNormal = ","replace","clearcoatRoughness","message","bind","CSM: ","cacheHash","_getMaterialDefine","_patchShader","while (true) {}","configurable","needsUpdate","__proto__","fragColor","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","60yvHNwQ","getOwnPropertyDescriptor","value","warn","name","set",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","roughness","clearcoatNormal","7tcItuU","indexOf","MeshDepthMaterial","onBeforeCompile","apply",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","MeshNormalMaterial","toPrimitive","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","__csm","bump","getPrototypeOf","update","\n    vec4 csm_internal_positionUnprojected = ","MathUtils","isAlreadyExtended","debu","defineProperty","114058SotCAr","substring","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","clearcoat","ShaderChunk","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","fragmentShader","_getPatchMapForMaterial","csm_Metalness","chain","();\n            // #_CSM_#\n          ","from","RawShaderMaterial","MeshToonMaterial","();\n              // #_CSM_#\n          ","Set","type","217244bmSOID","undefined","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","#define IS_VERTEX;\n","normal","default","enumerable","ShadowMaterial","toString","\n    \n            ","#define IS_","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","create","baseMaterial","function","silent","sham","exception","emissive","return","csm_Emissive","assign","positionRaw","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","csm_DepthAlpha","join","@@iterator","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","// #_CSM_#","customProgramCacheKey","keys","\\$&","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","@@toPrimitive must return a primitive value.","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","metalness","2725305eIGXWk",'". Shader cannot compile.',"\n    \n","pointSize"," is not available in ","147895LzYfVd","csm_Normal","23016pxPAbP","filter","CustomShaderMaterial does not support RawShaderMaterial","console","csm_FragColor","position","MeshStandardMaterial","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","csm_Roughness","\n    varying mat4 csm_internal_vModelViewMatrix;\n","cacheKey","action"," );\n    ","constructor","diffuse","done","\n    vec3 transformed = ","getOwnPropertyDescriptors","30uBJAtF","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","split","clone","symbol","csm_main_","MeshPhysicalMaterial","string","csm_Clearcoat","csm_AO"];return(dr=function(){return n})()}function hr(n){var t=function(){var n=vr;if(typeof Reflect===n(374)||!Reflect[n(498)])return!1;if(Reflect[n(498)][n(389)])return!1;if(typeof Proxy===n(387))return!0;try{return Boolean.prototype[n(515)][n(460)](Reflect[n(498)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=vr,o=pr(n);if(t){var i=pr(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o[r(544)](this,arguments);return function(n,t){if(t&&(typeof t===vr(454)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lr(n)}(this,e)}}function vr(n,t){var e=dr();return(vr=function(n,t){return e[n-=367]})(n,t)}tr(void 0,(function(){for(var n=vr,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(419)]||{},r=["log",n(534),"info","error",n(390),n(493),n(446)],o=0;o<r[n(449)];o++){var i=tr[n(429)][n(487)][n(520)](tr),a=r[o],c=e[a]||i;i.__proto__=tr.bind(tr),i[n(381)]=c[n(381)][n(520)](c),e[a]=i}}))();var mr,gr,_r,yr={diffuse:"csm_DiffuseColor",normal:Je(415),roughness:Je(424),metalness:Je(566),emissive:Je(393),ao:Je(443),bump:Je(501),clearcoat:Je(442),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Je(508),pointSize:Je(445),fragColor:Je(420),depthAlpha:Je(397),position:Je(453),positionRaw:"csm_PositionRaw"},xr=(rr(mr={},""[Je(476)](yr.position),"*"),rr(mr,"".concat(yr.positionRaw),"*"),rr(mr,""[Je(476)](yr[Je(377)]),"*"),rr(mr,""[Je(476)](yr[Je(412)]),[Je(484)]),rr(mr,""[Je(476)](yr[Je(430)]),"*"),rr(mr,"".concat(yr[Je(529)]),"*"),rr(mr,""[Je(476)](yr.emissive),["MeshStandardMaterial",Je(440)]),rr(mr,""[Je(476)](yr[Je(538)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),rr(mr,""[Je(476)](yr[Je(408)]),["MeshStandardMaterial",Je(440)]),rr(mr,"".concat(yr.ao),["MeshStandardMaterial",Je(440),"MeshBasicMaterial",Je(468),Je(470),"MeshToonMaterial"]),rr(mr,""[Je(476)](yr.bump),[Je(468),"MeshMatcapMaterial",Je(546),Je(470),Je(440),Je(422),Je(369),Je(380)]),rr(mr,""[Je(476)](yr[Je(481)]),[Je(542)]),rr(mr,""[Je(476)](yr[Je(561)]),[Je(440)]),rr(mr,""[Je(476)](yr.clearcoatRoughness),["MeshPhysicalMaterial"]),rr(mr,""[Je(476)](yr.clearcoatNormal),[Je(440)]),mr),Ir={"#include <lights_physical_fragment>":T[Je(562)][Je(452)]},br=(rr(gr={},""[Je(476)](yr[Je(377)]),{"#include <beginnormal_vertex>":Je(516)[Je(476)](yr.normal,Je(537))}),rr(gr,"".concat(yr[Je(421)]),{"#include <begin_vertex>":Je(432).concat(yr[Je(421)],Je(514))}),rr(gr,"".concat(yr[Je(395)]),{"#include <begin_vertex>":Je(553)[Je(476)](yr[Je(395)],Je(545))}),rr(gr,"".concat(yr[Je(412)]),{"gl_PointSize = size;":Je(477)[Je(476)](yr.pointSize,";\n    ")}),rr(gr,""[Je(476)](yr[Je(430)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Je(476)](yr[Je(430)],Je(514))}),rr(gr,"".concat(yr[Je(529)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[Je(476)](yr.fragColor,Je(514))}),rr(gr,""[Je(476)](yr[Je(391)]),{"vec3 totalEmissiveRadiance = emissive;":Je(503)[Je(476)](yr[Je(391)],Je(471))}),rr(gr,""[Je(476)](yr.roughness),{"#include <roughnessmap_fragment>":Je(405)[Je(476)](yr.roughness,Je(471))}),rr(gr,"".concat(yr.metalness),{"#include <metalnessmap_fragment>":Je(396).concat(yr[Je(408)],Je(471))}),rr(gr,""[Je(476)](yr.ao),{"#include <aomap_fragment>":Je(530)[Je(476)](yr.ao,Je(471))}),rr(gr,""[Je(476)](yr[Je(550)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ".concat(yr[Je(550)],Je(474))[Je(476)](yr[Je(550)],Je(478))}),rr(gr,"".concat(yr[Je(481)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(435)[Je(476)](yr.depthAlpha,Je(428)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Je(469)[Je(476)](yr.depthAlpha,Je(471))}),rr(gr,""[Je(476)](yr.clearcoat),{"material.clearcoat = clearcoat;":Je(462).concat(yr[Je(561)],";")}),rr(gr,"".concat(yr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":Je(451)[Je(476)](yr[Je(518)],";")}),rr(gr,""[Je(476)](yr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Je(499)}),gr),Sr=(rr(_r={},""[Je(476)](yr[Je(421)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(563)[Je(476)](yr[Je(421)],Je(506))}),rr(_r,"".concat(yr[Je(395)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(461).concat(yr.position,";\n  ")}),rr(_r,"".concat(yr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(yr.diffuse,";\n  ")}),rr(_r,""[Je(476)](yr[Je(529)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(494)[Je(476)](yr[Je(529)],Je(514))}),_r),wr={clearcoat:[yr.clearcoat,yr[Je(539)],yr[Je(518)]]},Mr=Je(560),Rr=Je(425),Ar=Je(384),Er=Je(425),Tr=Je(411),Dr=[Je(386),Je(564),Je(486),Je(490),Je(497),"cacheKey",Je(388)],zr=function(n,t,e){var r=Je;return n[r(436)](t)[r(398)](e)},Pr=function(n,t){var e,r,o=Je;return new RegExp("\\b"[o(476)]((e=t,r=Je,e[r(517)](/[-\/\\^$*+?.()|[\]{}]/g,r(404))),"\\b"))[o(505)](n)};function Cr(n){return n?n[Je(517)](/\s/g,""):void 0}function Or(n){return n[Je(517)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Br=function(n){var t=Je;!function(n,t){var e=vr;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(487)]=Object[e(385)](t&&t[e(487)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(557)](n,e(487),{writable:!1}),t&&fr(n,t)}(c,W);var e,r,o,i,a=hr(c);function c(n){var t,e,r,o,i,s=vr,u=n[s(386)],l=n.fragmentShader,f=n[s(486)],p=n[s(490)],d=n[s(497)],h=n[s(426)],v=n.silent,m=ar(n,Dr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e[t(519)][t(541)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(394)](e,m)):e=new u(m),e.type===s(368))throw new Error(s(418));(function(n,t){var e=Je;e(449),Object[e(394)](n,t);var r=Object[e(551)](t);Object[e(472)](Object[e(433)](r))[e(417)]((function(n){var t=e,r=typeof n[1][t(492)]===t(387),o=typeof n[1][t(536)]===t(387),i=typeof n[1][t(533)]===t(387),a=n[0]===t(429);return(r||o||i)&&!a}))[e(502)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(557)](n,t[0],t[1])}))})(lr(t=a.call(this)),e),t[s(549)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(554)][s(459)](),type:e.type,isAlreadyExtended:(r=e[s(543)],o=Je,i=r[o(381)]()[o(504)](),!(0===i.substring(i.indexOf("{")+1,i[o(463)]("}"))[o(504)]()[o(449)])),cacheHash:"",silent:v},t[s(490)]=ir(ir({},t.uniforms||{}),p||{});var g=t[s(549)],_=g.fragmentShader,y=g[s(486)],x=t[s(490)];return t.__csm[s(522)]=t._getCacheHash(),t[s(457)](_,y,x),t}return e=c,r=[{key:t(552),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(490)]||this[n(490)],Object[n(394)](this[n(549)],e);var r=this.__csm,o=r[n(564)],i=r.vertexShader,a=this[n(490)],c=this[n(447)]();this[n(549)].cacheHash=c,this._generateMaterial(o,i,a)}},{key:t(437),value:function(){var n=t,e={baseMaterial:this.__csm[n(386)],fragmentShader:this[n(549)].fragmentShader,vertexShader:this[n(549)].vertexShader,uniforms:this.uniforms,silent:this[n(549)][n(388)],patchMap:this.__csm[n(497)],cacheKey:this[n(549)][n(426)]},r=new(this[n(429)])(e);return Object[n(394)](this,r),r}},{key:t(447),value:function(){var n=t,e=this[n(549)],r=e[n(564)],o=e[n(486)],i=this.uniforms,a=[Cr(r),Cr(o),i][n(417)]((function(n){return void 0!==n}));return a[n(449)]>0?En(a,{excludeValues:!0}):this[n(402)]()}},{key:t(457),value:function(n,e,r){var o=t,i=this;this[o(490)]=r||{},this[o(402)]=function(){var n=o;return i[n(549)][n(522)]};var a=function(t){var r=o;try{var a=i[r(523)]();if(n){var c=i[r(524)](Or(n),t[r(564)],!0);t[r(564)]=a+c}if(e){var s=i[r(524)](Or(e),t.vertexShader);t.vertexShader=r(376)+s,t[r(486)]=a+t[r(486)]}t.uniforms=ir(ir({},t.uniforms),i.uniforms),i.uniforms=t.uniforms}catch(u){console[r(466)](u)}};if(this[o(549)].isAlreadyExtended){var c=this[o(543)];this[o(543)]=function(n,t){c(n,t),a(n)}}else this[o(543)]=a;this[o(527)]=!0}},{key:t(524),value:function(n,e,r){var o=t,i=this,a=e,c=ir(ir({},this[o(565)]()),this[o(549)][o(497)]);Object[o(472)](wr)[o(502)]((function(t){var e=o,r=sr(t,2),a=r[0],c=r[1][e(475)]((function(t){return Pr(n,t)}));if(c&&!i[a])throw new Error(e(512)[e(476)](a,e(467)).concat(c,e(410)))})),Object[o(472)](Ir)[o(502)]((function(n){var t=sr(n,2),e=t[0],r=t[1];a=zr(a,e,r)})),Object.keys(c)[o(502)]((function(t){var e=o;Object[e(403)](c[t])[e(502)]((function(r){var o=e,s=xr[t],u=i[o(549)][o(372)];if("*"===t||Pr(n,t)){if(!(!s||Array[o(464)](s)&&s[o(489)](u)||"*"===s))throw new Error(o(521)[o(476)](t,o(413))[o(476)](u,o(488)));a=zr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(439)+this[o(549)].instanceID[o(517)](/-/g,"_"),h=n[o(517)](/void\s+main\s*\(\s*\)/g,"void "[o(476)](d,"()")),v=n[o(489)]("void main()"),m=a[o(489)](o(401));return v&&(m&&this[o(549)][o(555)]?(a=a[o(517)]("void main() {",o(491)[o(476)](h,o(448))),s=a,u=o(401),l="\n            "[o(476)](d,o(568)),p=s[(f=Je)(463)](u),a=-1===p?s:s[f(559)](0,p)+l+s[f(559)](p+u[f(449)])):a=a[o(517)](o(450),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?Er:Rr,o(375))[o(476)](Mr,o(382))[o(476)](h,o(400))[o(476)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(423))[o(476)](r?Tr:Ar,o(548))[o(476)](d,o(370)))),a}},{key:t(523),value:function(){var n=t,e=this.__csm[n(372)];return e?n(383)[n(476)](e.toUpperCase(),";\n"):n(473)}},{key:t(565),value:function(){var n=t;return this[n(549)][n(372)]===n(444)?Sr:br}}],i=vr,r&&ur(e[i(487)],r),o&&ur(e,o),Object[i(557)](e,i(487),{writable:!1}),c}();function Fr(n){function t(n){var e=vr;if(typeof n===e(441))return function(n){}[e(429)](e(525))[e(544)](e(458));1!==(""+n/n)[e(449)]||n%20==0?function(){return!0}[e(429)](e(556)+e(480))[e(460)](e(427)):function(){return!1}.constructor(e(556)+e(480))[e(544)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kr=Lr;!function(n,t){const e=Lr,r=Gr();for(;;)try{if(144317===-parseInt(e(368))/1+parseInt(e(341))/2*(-parseInt(e(343))/3)+parseInt(e(349))/4*(-parseInt(e(365))/5)+-parseInt(e(334))/6*(parseInt(e(374))/7)+parseInt(e(372))/8+-parseInt(e(337))/9*(-parseInt(e(344))/10)+parseInt(e(348))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lr(347)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){const n=Lr,t=new RegExp(n(376)),e=new RegExp(n(354),"i"),r=Zr(n(355));t[n(335)](r+n(351))&&e[n(335)](r+n(360))?Zr():r("0")}))()}();const Ur=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lr(347)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ur(void 0,(function(){const n=Lr,t=function(){const n=Lr;let t;try{t=Function(n(346)+n(373)+");")()}catch(e){t=window}return t}(),e=t[n(356)]=t[n(356)]||{},r=[n(357),"warn",n(332),n(336),n(358),"table",n(363)];for(let o=0;o<r[n(339)];o++){const t=Ur[n(369)][n(375)][n(350)](Ur),i=r[o],a=e[i]||t;t.__proto__=Ur[n(350)](Ur),t[n(338)]=a[n(338)][n(350)](a),e[i]=t}}))();const Nr=["object"];function Lr(n,t){const e=Gr();return(Lr=function(n,t){return e[n-=332]})(n,t)}const Hr=rn({__name:kr(352),props:{color:{default:kr(366)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=kr,e=n,r={baseMaterial:Y,metalness:e.metalness,roughness:e[t(333)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(367)],color:e[t(362)],vertexShader:t(371),fragmentShader:t(364)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Br(r);return dn((()=>{const n=t;o[n(362)][n(370)](e[n(362)]),o.metalness=e.metalness,o[n(333)]=e[n(333)],o.clearcoat=e.clearcoat,o[n(367)]=e[n(367)]})),(n,e)=>{const r=t;return sn(),un(r(353),{object:en(o)},null,8,Nr)}}});function Zr(n){function t(n){const e=Lr;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply("counter");1!==(""+n/n)[e(339)]||n%20==0?function(){return!0}[e(369)](e(345)+e(342))[e(361)](e(359)):function(){return!1}[e(369)](e(345)+e(342))[e(347)](e(340)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Gr(){const n=["stateObject","44WNRraZ","gger","4806nucYYi","10xPKSTX","debu","return (function() ","apply","3025770ljipqh","4hrixQJ","bind","chain","index","primitive","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","console","log","exception","action","input","call","color","trace","\n\t\t\t","1228490rMVcUd","#ff00fc","clearcoatRoughness","25920SdqxgQ","constructor","setStyle","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","2120248dZkxVO",'{}.constructor("return this")( )',"14oDTGNb","prototype","function *\\( *\\)","info","roughness","351498ziPnvv","test","error","254196hUkvwF","toString","length"];return(Gr=function(){return n})()}!function(n,t){for(var e=Yr,r=$r();;)try{if(883069===-parseInt(e(499))/1*(-parseInt(e(493))/2)+-parseInt(e(514))/3+parseInt(e(508))/4*(parseInt(e(497))/5)+-parseInt(e(495))/6*(parseInt(e(496))/7)+parseInt(e(491))/8*(-parseInt(e(519))/9)+parseInt(e(507))/10+-parseInt(e(512))/11*(parseInt(e(517))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Vr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Yr(521)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vr(this,(function(){var n=Yr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(490),"i"),r=qr(n(515));t[n(509)](r+n(505))&&e[n(509)](r+n(494))?qr():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Yr(521)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yr(n,t){var e=$r();return(Yr=function(n,t){return e[n-=489]})(n,t)}function $r(){var n=["11085AVsXhd","__proto__","11949aQlfvD","counter","prototype","toString","while (true) {}","info","chain","constructor","9970870EtHIAL","3092bGhNXV","test","call",'{}.constructor("return this")( )',"4029377NXBJyL","table","664299YpNXmh","init","length","12BQljIz","bind","10062gkAhtj","string","apply","gger","log","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9456YRdlBF","debu","138JbfHqd","input","1114536bkQAaI","28MYziQC"];return($r=function(){return n})()}function qr(n){function t(n){var e=Yr;if(typeof n===e(520))return function(n){}.constructor(e(503))[e(521)](e(500));1!==(""+n/n)[e(516)]||n%20==0?function(){return!0}[e(506)](e(492)+"gger")[e(510)]("action"):function(){return!1}.constructor("debu"+e(522))[e(521)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){var n,t=Yr;try{n=Function("return (function() "+t(511)+");")()}catch(s){n=window}for(var e=n.console=n.console||{},r=[t(523),"warn",t(504),t(489),"exception",t(513),"trace"],o=0;o<r[t(516)];o++){var i=Wr.constructor[t(501)][t(518)](Wr),a=r[o],c=e[a]||i;i[t(498)]=Wr.bind(Wr),i[t(502)]=c[t(502)].bind(c),e[a]=i}}))();export{Xe as C,Hr as _,et as a,pt as b,At as c,Ct as d,Zt as e,ee as f,Ge as g,Pe as h,yt as u};

import{a6 as t,bR as e,C as i,V as n,j as s,aN as r}from"./three.p-9BQwc31724983368286.js";const o=h;!function(t,e){const i=h,n=l();for(;;)try{if(345340===parseInt(i(680))/1+-parseInt(i(534))/2*(parseInt(i(358))/3)+parseInt(i(384))/4*(parseInt(i(571))/5)+parseInt(i(329))/6+parseInt(i(469))/7+parseInt(i(528))/8*(parseInt(i(524))/9)+-parseInt(i(448))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const a=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(428)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){a(this,(function(){const t=h,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(453),"i"),n=p(t(739));e[t(434)](n+t(679))&&i[t(434)](n+t(762))?p():n("0")}))()}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(428)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function h(t,e){const i=l();return(h=function(t,e){return i[t-=323]})(t,e)}function l(){const t=["Argument is not instanceof SPE.Emitter:","boolean","vec3 getAcceleration( in float age ) {","radius","_checkParticleAges","call","group","offset","_updateDefines","attribute vec4 angle;","amd","distribution","setVec4","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","rotateTexture","float when_ge(float x, float y) {","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","127689VMmjoM","function","ceil","MathUtils","_randomise","setNumber","   return acceleration.xyz * age;","opacity","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","attribute vec4 opacity;","depthTest","attributeCount","        float framesY = vSpriteSheet.y;","Vector4","branchAvoidanceFunctions","_assignAngleValue","isStatic","array","attributeKeys","blending","Invalid argument types, or argument types do not match:","size","SHOULD_WIGGLE_PARTICLES","SHOULD_ROTATE_PARTICLES","   return params.x;","        float framesX = vSpriteSheet.x;","113724nXabZT","radiusScale","_radius","subarray","      }","attribute vec4 params;","while (true) {}","BufferAttribute","uniform vec4 textureAnimation;","#define PACKED_COLOR_SIZE 256.0","       );","color","depthWrite","POSITIVE_INFINITY","        float loopCount = textureAnimation.w;","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","ensureTypedArg","common","setVec3Components","_rotationCenter","   return c;","DISC","texture","valueOverLifetimeLength","addEmitter","object","    force *= drag;","    highp float maxAge = getMaxAge();","Emitter already belongs to another group. Will not add to requested group.","frameCount","    float pointSizePerspective = pointSize * perspective;","   c.r = r / PACKED_COLOR_DIVISOR;","NEGATIVE_INFINITY","reset","Emitter","fog_pars_fragment","colorOverLifetime","fog_vertex","        float wiggleSin = isAlive * sin( wiggleAmount );","    vec3 force = vec3( 0.0 );","    gl_PointSize = pointSizePerspective;","material","   return params.w;","REVISION","apply","   c -= vec3( 1.0 );","unshift","       vec3 c = isAlive * getColorOverLifetime(","_static","_decrementParticleCount","test","    #ifdef SHOULD_ROTATE_TEXTURE","Will not resize.","replace","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","ensureInstanceOf","attribute vec4 size;","updateMax","utils","prototype","vertex","    }","textureFrames","paramFetchingFunctions","19616090ElNKnj","attribute vec4 color;","    highp float positionInTime = (age / maxAge);","                   0.0,                                0.0,                                0.0,                                1.0);","getFromPool","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Color","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","remove","LINE","    highp float value = 0.0;","getPool","grow","    return value;","randomColorAsHex","float when_gt(float x, float y) {","_attributesNeedDynamicReset","updateFlags","randomDirectionVector3OnDisc",'{}.constructor("return this")( )',"randomise","4416034DRtOXK","randomVector3OnDisc","setVec3","      rotationMatrix = getRotationMatrix( axis, angle );","center","    #ifdef SHOULD_WIGGLE_PARTICLES","OBJECT","    vec3 pos = vec3( position );","    varying float vAngle;","fog_fragment","Group","scale","        float perspective = 1.0;","min","tick","rotation","componentSize","rotationCenter","float or(float a, float b) {","       float oc = 1.0 - c;","join","drag","static","  return 1.0 - when_lt(x, y);","_assignValue","exports","usage","        float perspective = scale / length( mvPosition.xyz );","setSize","vec3 unpackRotationAxis( in float hex ) {","resetUpdateRange","   return params.y;","logdepthbuf_pars_vertex","emitterIDs","           unpackColor( color.w )","alive","    float fIndex = 0.0;","TypedArrayConstructor","lerp","attribute vec3 velocity;","_assignForceValue","acceleration","params","randomDirectionVector3OnSphere","multiplyScalar","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","releaseIntoPool","_pool","distributions","loop","   return params.z;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","ShaderMaterial","setMat4","_applyAttributesToGeometry","27FCEFXY","particles, can support only","       axis = normalize(axis);","SHOULD_ROTATE_TEXTURE","957896jGMzIM","           unpackColor( color.y ),","    varying vec4 vSpriteSheet;","hasPerspective","_assignColorValue","TypedArrayHelper","2sejzXw","uniform sampler2D tex;","    force += accel * age;","varying vec4 vColor;","        pos.z += wiggleSin;","string","           positionInTime,","uniforms","randomVector3OnLine","setMat3","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","maxParticleCount","runTime","attribute vec4 rotation;","random","_distribution","ensureArrayInstanceOf","_ensureTypedArray","stateObject","_triggerSingleEmitter","removeEmitter","indexOf","_axis","    #else","_angle","float getWiggle() {","    return 1.0 - abs( sign( x - y ) );","_setBufferUpdateRanges","gger","   c.g = g / PACKED_COLOR_DIVISOR;","vec3 unpackColor( in float hex ) {","  return 1.0 - when_gt(x, y);","    return max(sign(x - y), 0.0);","clamp","   return velocity * age;","      vec3 axis = unpackRotationAxis( rotation.x );","shaderChunks","40APnMgy","warn","debu","_onRemove","_resetParticle","onParticleSpawn","_activateParticles","DynamicDrawUsage","max","#define PACKED_COLOR_DIVISOR 255.0","NUMBER","        float framesX = textureAnimation.x;","unpackRotationAxis","duration","       float s = sin( -vAngle );","interpolateArray","updateMin","_assignParamsValue","abs","_calculatePPSValue","logdepthbuf_pars_fragment","float when_eq( float x, float y ) {","      float angle = 0.0;","    ","geometry","   float b = mod( hex, PACKED_COLOR_SIZE );","setVec2","        pos.x += wiggleSin;","length","deltaTime","_value","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","    vec3 vel = getVelocity( age );","textureLoop","triggerPoolEmitter","      vec3 center = rotationCenter;","        float rowNorm = row / framesY;","SPE.Group pool ran out.","_center","direction","   }","error","_spread","type","setFromArray","attribute vec4 acceleration;","colorize","   c *= vec3( 2.0 );","void main() {","trace","fragment","resetFlags","defines","       if ( vColor.w < float(ALPHATEST) ) discard;","    vec3 accel = getAcceleration( age );","    #ifdef HAS_PERSPECTIVE","_updateBuffers","normalize","Texture","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","#endif","BOX","wiggle","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","transparent","needsUpdate","           unpackColor( color.z ),","spread","float when_le(float x, float y) {","StaticDrawUsage","float getAlive() {","sin","copy","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","info","floatOverLifetime","   vec3 c = vec3( 0.0 );","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","       vec3 c = vec3(1.0);","        pos.y += wiggleCos;","push","    vec3 value = vec3( 0.0 );","randomVector3OnSphere","age","forceUpdateAll","undefined","shrink","spreadClamp","    #ifdef COLORIZE","cos","alphaTest","isArray","floor","BOOLEAN","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","updateRange","_assignRotationValue","setUpdateRange","ensureArrayTypedArg","bufferUpdateRanges","    pos += force;","generateUUID","console","bufferAttribute","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","angleSpread","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","        float columnNorm = column / framesX;","chain","690478wVPMYP","_setAttributeOffset","textureFrameCount","setColor","paramsArray","BufferGeometry","sqrt","fog","        float totalFrames = textureAnimation.z;","shaders","indexOffset","      translated = rotationCenter - pos;","_createNewWhenPoolEmpty","attributes","float and(float a, float b) {","randomFloat","arrayValuesAreEqual","updateMap","activationEnd","particleCount","    highp float alive = getAlive();","        float wiggleAmount = positionInTime * getWiggle();","_assignAbsLifetimeValue","angle","clone","_updateUniforms","constructor","keys","attributeOffset","    #endif","           unpackColor( color.x ),","typedArray","    #ifdef SHOULD_CALCULATE_SPRITE","distributionClamp","dispose","toString","       float y = 1.0 - gl_PointCoord.y - 0.5;","    vec3 outgoingLight = vColor.xyz;","        vSpriteSheet.z = columnNorm;","Vector3","uuid","axisSpread","TypedArray is already of size:","attribute vec3 rotationCenter;","activationIndex","activeMultiplier","hasOwnProperty","particlesPerSecond","    float shouldApplyValue = 0.0;","updateCounts","SPHERE","setVec2Components","set","getHex","elements","`emitter` argument must be instance of SPE.Emitter. Was provided with:","_updateAttributeUpdateRange","resetDynamic","number","init","_assignPositionValue","Vector2","Emitter does not belong to a group, cannot remove.","fixedTimeStep","ShaderChunk","getValueAtIndex","Emitter does not exist in this group. Will not remove.","ensureValueOverLifetimeCompliance","bufferUpdateCount","types","SPE.Group: maxParticleCount exceeded. Requesting","#ifdef SHOULD_CALCULATE_SPRITE","bind","bufferUpdateKeys","       float x = gl_PointCoord.x - 0.5;","exception","flagUpdate","getPackedRotationAxis","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","position","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","return (function() ","input","setVec4Components","_poolCreationSettings","value","vec4 getPosition( in float age ) {","       float c = cos(angle);","velocity","dynamicBuffer","round","_distributionClamp","SHOULD_CALCULATE_SPRITE","count","_radiusScale","splice","_attributesNeedRefresh","ShaderAttribute","Points","_createBufferAttribute","_resetBufferRanges","log","activeParticleCount","randomVector3","emitters","2649078RADEyg","roundToNearestMultiple","    return a * b;","frames","_spreadClamp","maxAge","    vColor = vec4( c, o );","arrayType","__proto__","_createGetterSetters","mesh","add"];return(l=function(){return t})()}c(void 0,(function(){const t=h;let e;try{e=Function(t(761)+t(467)+");")()}catch(s){e=window}const i=e[t(673)]=e[t(673)]||{},n=[t(325),t(572),t(645),"error",t(755),"table",t(620)];for(let r=0;r<n[t(599)];r++){const e=c[t(706)][t(443)][t(752)](c),s=n[r],o=i[s]||e;e[t(337)]=c.bind(c),e[t(715)]=o[t(715)].bind(o),i[s]=e}}))();const u={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===o(359)&&define[o(351)]?define("spe",u):typeof exports!==o(656)&&"undefined"!=typeof module&&(module[o(494)]=u),u[o(533)]=function(t,e,i,n){const s=o;this.componentSize=i||1,this[s(379)]=e||1,this[s(506)]=t||Float32Array,this.array=new t(e*this[s(485)]),this[s(690)]=n||0},u[o(533)].constructor=u[o(533)],u[o(533)][o(443)][o(497)]=function(t,e){const i=o,n=this[i(375)].length;return!e&&(t*=this[i(485)]),t<n?this[i(657)](t):t>n?this.grow(t):void console[i(645)](i(722),t+".",i(436))},u[o(533)][o(443)][o(657)]=function(t){const e=o;return this.array=this[e(375)][e(387)](0,t),this.size=t,this},u.TypedArrayHelper[o(443)][o(460)]=function(t){const e=o,i=this[e(375)],n=new this.TypedArrayConstructor(t);return n.set(i),this[e(375)]=n,this.size=t,this},u[o(533)].prototype.splice=function(t,e){const i=o;t*=this[i(485)],e*=this[i(485)];const n=[],s=this[i(375)],r=s.length;for(let o=0;o<r;++o)(o<t||o>=e)&&n[i(651)](s[o]);return this[i(615)](0,n),this},u[o(533)][o(443)].setFromArray=function(t,e){const i=o,n=t+e[i(599)];return n>this[i(375)][i(599)]?this[i(460)](n):n<this[i(375)][i(599)]&&this.shrink(n),this.array[i(732)](e,this[i(690)]+t),this},u[o(533)][o(443)][o(597)]=function(t,e){return this[o(731)](t,e.x,e.y)},u.TypedArrayHelper[o(443)][o(731)]=function(t,e,i){const n=o,s=this.array,r=this.indexOffset+t*this[n(485)];return s[r]=e,s[r+1]=i,this},u[o(533)].prototype[o(471)]=function(t,e){return this[o(402)](t,e.x,e.y,e.z)},u[o(533)][o(443)][o(402)]=function(t,e,i,n){const s=o,r=this[s(375)],a=this[s(690)]+t*this[s(485)];return r[a]=e,r[a+1]=i,r[a+2]=n,this},u[o(533)][o(443)][o(353)]=function(t,e){return this[o(763)](t,e.x,e.y,e.z,e.w)},u[o(533)][o(443)][o(763)]=function(t,e,i,n,s){const r=o,a=this[r(375)],c=this[r(690)]+t*this[r(485)];return a[c]=e,a[c+1]=i,a[c+2]=n,a[c+3]=s,this},u[o(533)][o(443)][o(543)]=function(t,e){const i=o;return this.setFromArray(this.indexOffset+t*this.componentSize,e[i(734)])},u[o(533)][o(443)][o(522)]=function(t,e){const i=o;return this.setFromArray(this[i(690)]+t*this.componentSize,e.elements)},u[o(533)][o(443)][o(683)]=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},u[o(533)][o(443)][o(363)]=function(t,e){const i=o;return this[i(375)][this[i(690)]+t*this[i(485)]]=e,this},u[o(533)][o(443)][o(745)]=function(t){const e=o;return this[e(375)][this[e(690)]+t]},u[o(533)][o(443)].getComponentValueAtIndex=function(t){const e=o;return this[e(375)].subarray(this[e(690)]+t*this[e(485)])},u[o(777)]=function(t,e,i){const n=o,s=u[n(777)].typeSizeMap;this[n(614)]=typeof t===n(539)&&s[n(726)](t)?t:"f",this[n(485)]=s[this[n(614)]],this[n(336)]=i||Float32Array,this[n(711)]=null,this[n(674)]=null,this[n(769)]=!!e,this.updateMin=0,this[n(441)]=0},u[o(777)].constructor=u[o(777)],u.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},u.ShaderAttribute[o(443)][o(668)]=function(t,e){const i=o;this.updateMin=Math[i(482)](t*this[i(485)],this[i(587)]*this[i(485)]),this[i(441)]=Math[i(579)](e*this[i(485)],this[i(441)]*this.componentSize)},u[o(777)][o(443)][o(756)]=function(){const t=o,e=this.bufferAttribute,i=e[t(666)];i[t(348)]=this[t(587)],i[t(773)]=Math.min(this[t(441)]-this[t(587)]+this[t(485)],this.typedArray[t(375)][t(599)]),e[t(636)]=!0},u[o(777)][o(443)][o(499)]=function(){const t=o;this[t(587)]=0,this[t(441)]=0},u[o(777)].prototype[o(737)]=function(){const e=o;this.bufferAttribute.usage=this.dynamicBuffer?t[e(578)]:t[e(640)]},u[o(777)][o(443)][o(775)]=function(t,e){const i=o;this[i(711)].splice(t,e),this[i(655)]()},u.ShaderAttribute[o(443)][o(655)]=function(){const e=o;this[e(674)][e(375)]=this.typedArray[e(375)],this[e(674)][e(666)][e(348)]=0,this[e(674)].updateRange[e(773)]=-1,this[e(674)][e(495)]=t[e(640)],this[e(674)].needsUpdate=!0},u[o(777)][o(443)][o(551)]=function(t){const e=o;null!==this.typedArray&&this[e(711)][e(379)]===t*this[e(485)]||(null!==this[e(711)]&&this[e(711)][e(379)]!==t?this[e(711)][e(497)](t):null===this[e(711)]&&(this[e(711)]=new(u[e(533)])(this.arrayType,t,this.componentSize)))},u[o(777)][o(443)][o(323)]=function(e){const i=o;if(this._ensureTypedArray(e),null!==this[i(674)])return this[i(674)][i(375)]=this.typedArray[i(375)],parseFloat(t[i(427)])>=81&&(this[i(674)][i(773)]=this[i(674)][i(375)].length/this[i(674)].itemSize),void(this[i(674)].needsUpdate=!0);this[i(674)]=new(t[i(391)])(this[i(711)].array,this[i(485)]),this[i(674)][i(495)]=this.dynamicBuffer?t[i(578)]:t[i(640)]},u[o(777)][o(443)].getLength=function(){const t=o;return null===this[t(711)]?0:this[t(711)][t(375)].length},u[o(570)]={defines:[o(393),o(580)][o(489)]("\n"),uniforms:["uniform float deltaTime;","uniform float runTime;",o(535),o(392),"uniform float scale;"].join("\n"),attributes:[o(616),o(508),o(547),o(723),o(389),o(440),o(350),o(449),o(367)][o(489)]("\n"),varyings:[o(537),"#ifdef SHOULD_ROTATE_TEXTURE",o(477),o(631),o(751),o(530),"#endif"].join("\n"),branchAvoidanceFunctions:[o(463),o(566),"}","float when_lt(float x, float y) {",o(602),"}",o(592),o(560),"}",o(356),o(492),"}",o(639),o(565),"}",o(694),o(331),"}",o(487),"    return min(a + b, 1.0);","}"][o(489)]("\n"),unpackColor:[o(564),"   vec3 c = vec3( 0.0 );",o(677),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",o(596),"   c.r = r / PACKED_COLOR_DIVISOR;",o(563),"   c.b = b / PACKED_COLOR_DIVISOR;",o(404),"}"][o(489)]("\n"),unpackRotationAxis:[o(498),o(647),o(677),o(366),o(596),o(415),o(563),"   c.b = b / PACKED_COLOR_DIVISOR;",o(618),o(429),"   return c;","}"][o(489)]("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",o(458),o(520),o(505),o(728),o(648),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",o(445),"",o(461),"}"].join("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",o(652),o(455),o(675),o(357),o(461),"}"][o(489)]("\n"),paramFetchingFunctions:[o(641),o(382),"}","float getAge() {",o(500),"}","float getMaxAge() {",o(519),"}",o(559),o(426),"}"][o(489)]("\n"),forceFetchingFunctions:[o(766),"   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {",o(568),"}",o(343),o(364),"}"].join("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",o(760),o(526),"       float s = sin(angle);",o(767),o(488),"",o(514),o(758),o(544),o(451),"   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","      if( rotation.y == 0.0 ) {","           return pos;",o(388),"",o(569),o(606),"      vec3 translated;","      mat4 rotationMatrix;",o(593),o(630),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",o(691),o(472),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",o(611),o(631)][o(489)]("\n"),rotateTexture:[o(399),"","    #ifdef SHOULD_ROTATE_TEXTURE",o(754),o(716),"       float c = cos( -vAngle );",o(585),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",o(709),"","    #ifdef SHOULD_CALCULATE_SPRITE",o(383),o(370),"        float columnNorm = vSpriteSheet.z;","        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;",o(644),o(709),"","    vec4 rotatedTexture = texture2D( tex, vUv );"][o(489)]("\n")},u[o(689)]={vertex:[u.shaderChunks.defines,u[o(570)][o(541)],u.shaderChunks[o(693)],u[o(570)].varyings,e[o(401)],t[o(744)][o(501)],t[o(744)].fog_pars_vertex,u[o(570)][o(372)],u[o(570)].unpackColor,u[o(570)][o(583)],u[o(570)][o(646)],u[o(570)][o(420)],u.shaderChunks[o(447)],u[o(570)].forceFetchingFunctions,u[o(570)].rotationFunctions,o(619),"    highp float age = getAge();",o(700),o(411),o(450),"    highp float isAlive = when_gt( alive, 0.0 );",o(474),o(701),o(422),"        float wiggleCos = isAlive * cos( wiggleAmount );",o(709),o(603),o(625),o(423),o(476),"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;",o(410),o(536),o(671),o(474),o(598),o(650),o(538),"    #endif","    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );",o(709),o(634),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",o(626),o(496),o(557),o(481),o(709),o(414),o(659),o(431),o(540),o(710),o(529),o(637),o(503),o(394),o(557),o(649),"    #endif",o(438),o(335),o(435),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",o(709),o(712),o(582),"        float framesY = textureAnimation.y;",o(398),o(688),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));","        float row = floor( (frameNumber - column) / framesX );",o(678),o(607),"        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;",o(718),"        vSpriteSheet.w = rowNorm;",o(709),o(424),"    gl_Position = projectionMatrix * mvPosition;",e.logdepthbuf_vertex,t[o(744)][o(421)],"}"][o(489)]("\n"),fragment:[u.shaderChunks.uniforms,t[o(744)][o(401)],t[o(744)][o(419)],e[o(591)],u[o(570)].varyings,u.shaderChunks[o(372)],"void main() {",o(717),o(594),"    #ifdef ALPHATEST",o(624),"    #endif",u[o(570)][o(355)],t[o(744)].logdepthbuf_fragment,"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",o(665),t[o(744)][o(478)],"}"][o(489)]("\n")},u.utils={types:{BOOLEAN:o(342),STRING:o(539),NUMBER:o(738),OBJECT:o(409)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=o;if(Array[n(662)](t)){for(let s=t[n(599)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(400)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=o;if(Array[n(662)](t)){for(let s=t[n(599)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(439)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=o;e=e||3,i=i||3,!1===Array[n(662)](t[n(601)])&&(t[n(601)]=[t[n(601)]]),!1===Array[n(662)](t[n(613)])&&(t._spread=[t._spread]);const s=this[n(567)](t[n(601)][n(599)],e,i),r=this[n(567)](t[n(613)].length,e,i),a=Math[n(579)](s,r);t._value[n(599)]!==a&&(t[n(601)]=this[n(586)](t[n(601)],a)),t[n(613)].length!==a&&(t[n(613)]=this[n(586)](t._spread,a))},interpolateArray(t,e){const i=o,n=t.length,s=["function"==typeof t[0][i(704)]?t[0][i(704)]():t[0]],r=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*r,n=Math[i(663)](e),a=Math[i(360)](e),c=e-n;s[o]=this.lerpTypeAgnostic(t[n],t[a],c)}return s[i(651)](typeof t[n-1][i(704)]===i(359)?t[n-1].clone():t[n-1]),s},clamp(t,e,i){const n=o;return Math[n(579)](e,Math[n(482)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[o(548)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,n,s){const r=o;let a,c=this[r(749)];return typeof e===c[r(581)]&&typeof n===c[r(581)]?e+(n-e)*s:e instanceof t[r(741)]&&n instanceof t[r(741)]?(a=e[r(704)](),a.x=this.lerp(e.x,n.x,s),a.y=this[r(507)](e.y,n.y,s),a):e instanceof t[r(719)]&&n instanceof t[r(719)]?(a=e[r(704)](),a.x=this.lerp(e.x,n.x,s),a.y=this[r(507)](e.y,n.y,s),a.z=this.lerp(e.z,n.z,s),a):e instanceof t[r(371)]&&n instanceof t[r(371)]?(a=e[r(704)](),a.x=this[r(507)](e.x,n.x,s),a.y=this.lerp(e.y,n.y,s),a.z=this[r(507)](e.z,n.z,s),a.w=this.lerp(e.w,n.w,s),a):e instanceof t[r(454)]&&n instanceof i?(a=e[r(704)](),a.r=this[r(507)](e.r,n.r,s),a.g=this[r(507)](e.g,n.g,s),a.b=this.lerp(e.b,n.b,s),a):void console.warn(r(378),e,n)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=o;let n=0;return 0===e?t:(n=Math[i(589)](t)%e,0===n?t:t<0?-(Math[i(589)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=o;for(let i=0;i<t[e(599)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[o(548)]()-.5),randomVector3(t,e,i,n,s){const r=o;let a=i.x+(Math[r(548)]()*n.x-.5*n.x),c=i.y+(Math[r(548)]()*n.y-.5*n.y),h=i.z+(Math[r(548)]()*n.z-.5*n.z);s&&(a=.5*-s.x+this[r(330)](a,s.x),c=.5*-s.y+this.roundToNearestMultiple(c,s.y),h=.5*-s.z+this[r(330)](h,s.z)),t[r(711)][r(402)](e,a,c,h)},randomColor(t,e,i,n){const s=o;let r=i.r+Math[s(548)]()*n.x,a=i.g+Math.random()*n.y,c=i.b+Math[s(548)]()*n.z;r=this.clamp(r,0,1),a=this[s(567)](a,0,1),c=this[s(567)](c,0,1),t[s(711)][s(402)](e,r,a,c)},randomColorAsHex:function(){const e=o,i=new(t[e(454)]);return function(t,n,s,r){const o=e,a=s.length,c=[];for(let e=0;e<a;++e){const t=r[e];i.copy(s[e]),i.r+=Math[o(548)]()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math[o(548)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this[o(567)](i.g,0,1),i.b=this[o(567)](i.b,0,1),c[o(651)](i[o(733)]())}t[o(711)][o(763)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=o,r=i.clone();r.lerp(n,Math[s(548)]()),t.typedArray[s(402)](e,r.x,r.y,r.z)},randomVector3OnSphere(t,e,i,n,s,r,a,c){const h=o;let l=2*Math[h(548)]()-1,u=6.2832*Math[h(548)](),f=Math[h(686)](1-l*l),p=this[h(695)](n,s),d=0,g=0,m=0;a&&(p=Math[h(770)](p/a)*a),d=f*Math[h(660)](u)*p,g=f*Math.sin(u)*p,m=l*p,d*=r.x,g*=r.y,m*=r.z,d+=i.x,g+=i.y,m+=i.z,t[h(711)][h(402)](e,d,g,m)},seededRandom(t){const e=1e4*Math[o(642)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,r,a){const c=o;let h=6.2832*Math[c(548)](),l=Math.abs(this[c(695)](n,s)),u=0,f=0,p=0;a&&(l=Math[c(770)](l/a)*a),u=Math[c(660)](h)*l,f=Math[c(642)](h)*l,u*=r.x,f*=r.y,u+=i.x,f+=i.y,p+=i.z,t[c(711)][c(402)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=o,i=new(t[e(719)]);return function(t,n,s,r,o,a,c,h){const l=e;i[l(643)](a),i.x-=s,i.y-=r,i.z-=o,i.normalize()[l(513)](-this[l(695)](c,h)),t[l(711)][l(402)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=o,i=new(t[e(719)]);return function(t,n,s,r,o,a,c,h){const l=e;i[l(643)](a),i.x-=s,i.y-=r,i.z-=o,i[l(628)]().multiplyScalar(-this.randomFloat(c,h)),t[l(711)][l(402)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=o,i=new(t[e(719)]),s=new n,r=new(t[e(454)]),a=new(t[e(719)])(1,1,1);return function(t,n){const o=e;return i[o(643)](t)[o(628)](),s[o(643)](n)[o(628)](),i.x+=.5*-n.x+Math[o(548)]()*n.x,i.y+=.5*-n.y+Math.random()*n.y,i.z+=.5*-n.z+Math[o(548)]()*n.z,i.normalize()[o(340)](a)[o(513)](.5),r.setRGB(i.x,i.y,i.z),r[o(733)]()}}()},u[o(479)]=function(e){const i=o,n=u[i(442)],a=n[i(749)];(e=n[i(400)](e,a[i(475)],{})).texture=n[i(400)](e[i(406)],a.OBJECT,{}),this.uuid=t[i(361)][i(672)](),this[i(743)]=n[i(400)](e.fixedTimeStep,a[i(581)],.016),this[i(406)]=n.ensureInstanceOf(e[i(406)][i(765)],t[i(629)],null),this[i(446)]=n[i(439)](e[i(406)][i(332)],s,new(t[i(741)])(1,1)),this[i(682)]=n[i(400)](e[i(406)][i(413)],a[i(581)],this[i(446)].x*this[i(446)].y),this[i(604)]=n[i(400)](e[i(406)][i(518)],a.NUMBER,1),this[i(446)][i(579)](new(t[i(741)])(1,1)),this[i(531)]=n[i(400)](e[i(531)],a.BOOLEAN,!0),this[i(617)]=n[i(400)](e.colorize,a[i(664)],!0),this[i(545)]=n[i(400)](e.maxParticleCount,a[i(581)],null),this[i(377)]=n.ensureTypedArg(e[i(377)],a[i(581)],r),this[i(635)]=n.ensureTypedArg(e[i(635)],a[i(664)],!0),this[i(661)]=parseFloat(n[i(400)](e[i(661)],a[i(581)],0)),this[i(396)]=n[i(400)](e[i(396)],a[i(664)],!1),this[i(368)]=n[i(400)](e.depthTest,a[i(664)],!0),this[i(687)]=n[i(400)](e.fog,a[i(664)],!0),this[i(480)]=n[i(400)](e[i(480)],a.NUMBER,300),this[i(328)]=[],this[i(502)]=[],this[i(516)]=[],this[i(764)]=null,this[i(692)]=0,this[i(776)]=!1,this._attributesNeedDynamicReset=!1,this[i(699)]=0,this[i(541)]={tex:{type:"t",value:this[i(406)]},textureAnimation:{type:"v4",value:new(t[i(371)])(this[i(446)].x,this.textureFrames.y,this[i(682)],Math[i(579)](Math[i(589)](this[i(604)]),1))},fogColor:{type:"c",value:this.fog?new(t[i(454)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(480)]}},this.defines={HAS_PERSPECTIVE:this[i(531)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:u[i(407)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this.textureFrames.y>1},this[i(693)]={position:new(u[i(777)])("v3",!0),acceleration:new u.ShaderAttribute("v4",!0),velocity:new u.ShaderAttribute("v3",!0),rotation:new u.ShaderAttribute("v4",!0),rotationCenter:new(u[i(777)])("v3",!0),params:new(u[i(777)])("v4",!0),size:new(u[i(777)])("v4",!0),angle:new u.ShaderAttribute("v4",!0),color:new(u[i(777)])("v4",!0),opacity:new u.ShaderAttribute("v4",!0)},this[i(376)]=Object[i(707)](this.attributes),this[i(369)]=this[i(376)][i(599)],this[i(425)]=new(t[i(521)])({uniforms:this[i(541)],vertexShader:u[i(689)][i(444)],fragmentShader:u[i(689)][i(621)],blending:this.blending,transparent:this[i(635)],alphaTest:this[i(661)],depthWrite:this[i(396)],depthTest:this[i(368)],defines:this[i(623)],fog:this[i(687)]}),this.geometry=new(t[i(685)]),this[i(339)]=new(t[i(778)])(this.geometry,this[i(425)]),null===this.maxParticleCount&&console[i(572)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},u[o(479)][o(706)]=u[o(479)],u[o(479)][o(443)]._updateDefines=function(){const t=o;let e,i=this[t(328)],n=i.length-1,s=this.defines;for(;n>=0;--n)e=i[n],!s[t(772)]&&(s.SHOULD_ROTATE_TEXTURE=s[t(527)]||!!Math.max(Math[t(579)].apply(null,e[t(703)][t(765)]),Math[t(579)][t(428)](null,e[t(703)][t(638)]))),s[t(381)]=s.SHOULD_ROTATE_PARTICLES||!!Math[t(579)](e[t(484)][t(703)],e[t(484)][t(676)]),s.SHOULD_WIGGLE_PARTICLES=s[t(380)]||!!Math[t(579)](e[t(633)].value,e[t(633)][t(638)]);this.material.needsUpdate=!0},u[o(479)][o(443)][o(523)]=function(){const t=o;let e,i,n=this[t(693)],s=this[t(595)],r=s.attributes;for(const o in n)n.hasOwnProperty(o)&&(e=n[o],i=r[o],i?i[t(375)]=e.typedArray[t(375)]:s.setAttribute(o,e[t(674)]),e.bufferAttribute[t(636)]=!0);this[t(595)].setDrawRange(0,this[t(699)])},u[o(479)][o(443)].addEmitter=function(t){const e=o;if(t instanceof u[e(418)]==!1)return void console[e(612)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(502)][e(555)](t[e(720)])>-1)return void console[e(612)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(347)])return void console[e(612)](e(412));const i=this[e(693)],n=this[e(699)],s=n+t[e(699)];this[e(699)]=s,null!==this[e(545)]&&this[e(699)]>this[e(545)]&&console[e(572)](e(750),this.particleCount,e(525),this[e(545)]),t[e(590)](t[e(334)]._value+t[e(334)]._spread),t[e(561)](this[e(376)]),t[e(681)](n),t.group=this,t[e(693)]=this[e(693)];for(const r in i)i[e(726)](r)&&i[r][e(323)](null!==this[e(545)]?this[e(545)]:this[e(699)]);for(let r=n;r<s;++r)t[e(740)](r),t[e(509)](r,"velocity"),t[e(509)](r,e(510)),t._assignAbsLifetimeValue(r,e(365)),t[e(702)](r,e(379)),t[e(373)](r),t[e(667)](r),t[e(588)](r),t._assignColorValue(r);return this[e(523)](),this[e(328)].push(t),this.emitterIDs[e(651)](t[e(720)]),this._updateDefines(t),this[e(425)][e(636)]=!0,this.geometry[e(636)]=!0,this._attributesNeedRefresh=!0,this},u[o(479)].prototype[o(554)]=function(t){const e=o,i=this[e(502)][e(555)](t[e(720)]);if(t instanceof u[e(418)]==!1)return void console.error(e(735),t);if(-1===i)return void console.error(e(746));const n=t[e(708)],s=n+t[e(699)],r=this[e(693)][e(511)][e(711)];for(let o=n;o<s;++o)r[e(375)][4*o]=0,r[e(375)][4*o+1]=0;this[e(328)][e(775)](i,1),this[e(502)][e(775)](i,1);for(const o in this[e(693)])this.attributes[e(726)](o)&&this[e(693)][o][e(775)](n,s);this[e(699)]-=t[e(699)],t[e(574)](),this[e(776)]=!0},u[o(479)].prototype[o(452)]=function(){const t=o,e=this[t(516)],i=this[t(692)];if(e[t(599)])return e.pop();if(i){const e=new u.Emitter(this._poolCreationSettings);return this[t(408)](e),e}return null},u[o(479)].prototype[o(515)]=function(t){const e=o;if(t instanceof u.Emitter!=!1)return t[e(417)](),this[e(516)][e(430)](t),this;console[e(612)](e(341),t)},u[o(479)][o(443)][o(459)]=function(){return this[o(516)]},u[o(479)].prototype.addPool=function(t,e,i){const n=o;let s;this[n(764)]=e,this[n(692)]=!!i;for(let r=0;r<t;++r)s=Array.isArray(e)?new(u[n(418)])(e[r]):new(u[n(418)])(e),this[n(408)](s),this[n(515)](s);return this},u.Group.prototype[o(553)]=function(e){const i=o,n=this[i(452)](),s=this;if(null!==n)return e instanceof t[i(719)]&&(n[i(759)][i(765)][i(643)](e),n[i(759)].value=n[i(759)][i(765)]),n.enable(),setTimeout((()=>{n.disable(),s.releaseIntoPool(n)}),1e3*Math[i(579)](n[i(584)],n[i(334)].value+n[i(334)][i(638)])),this;console[i(325)](i(608))},u.Group[o(443)][o(605)]=function(t,e){const i=o;if(typeof t===i(738)&&t>1)for(let n=0;n<t;++n)this[i(553)](e);else this[i(553)](e);return this},u[o(479)][o(443)]._updateUniforms=function(t){const e=o;this[e(541)][e(546)].value+=t,this.uniforms[e(600)][e(765)]=t},u[o(479)][o(443)][o(324)]=function(){const t=o;let e=this[t(376)],i=this.attributeCount-1,n=this[t(693)];for(;i>=0;--i)n[e[i]][t(499)]()},u[o(479)][o(443)][o(627)]=function(t){const e=o;let i,n,s,r=this.attributeKeys,a=this[e(369)]-1,c=this.attributes,h=t[e(670)];for(;a>=0;--a)i=r[a],n=h[i],s=c[i],s.setUpdateRange(n[e(482)],n[e(579)]),s.flagUpdate()},u[o(479)].prototype[o(483)]=function(t){const e=o;var i=this[e(328)],n=i.length,s=t||this[e(743)],r=this[e(376)],a=this[e(693)];if(this[e(705)](s),this[e(324)](),0!==n||!1!==this[e(776)]||!1!==this._attributesNeedDynamicReset){for(var c,h=0;h<n;++h)(c=i[h])[e(483)](s),this[e(627)](c);if(!0===this[e(464)]){for(h=this[e(369)]-1;h>=0;--h)a[r[h]][e(737)]();this[e(464)]=!1}if(!0===this[e(776)]){for(h=this.attributeCount-1;h>=0;--h)a[r[h]][e(655)]();this[e(776)]=!1,this._attributesNeedDynamicReset=!0}}},u[o(479)][o(443)][o(714)]=function(){const t=o;return this[t(595)][t(714)](),this[t(425)][t(714)](),this},u.Emitter=function(e){const i=o,s=u[i(442)],r=s[i(749)],a=u[i(407)];(e=s.ensureTypedArg(e,r[i(475)],{}))[i(759)]=s[i(400)](e[i(759)],r.OBJECT,{}),e[i(768)]=s[i(400)](e[i(768)],r.OBJECT,{}),e[i(510)]=s[i(400)](e.acceleration,r[i(475)],{}),e[i(344)]=s[i(400)](e.radius,r[i(475)],{}),e[i(490)]=s[i(400)](e.drag,r[i(475)],{}),e[i(484)]=s[i(400)](e[i(484)],r[i(475)],{}),e[i(395)]=s.ensureTypedArg(e[i(395)],r[i(475)],{}),e[i(365)]=s[i(400)](e[i(365)],r[i(475)],{}),e[i(379)]=s[i(400)](e[i(379)],r[i(475)],{}),e[i(703)]=s[i(400)](e[i(703)],r[i(475)],{}),e[i(633)]=s.ensureTypedArg(e[i(633)],r[i(475)],{}),e.maxAge=s[i(400)](e.maxAge,r.OBJECT,{}),e[i(576)]&&console.warn(i(354)),this.uuid=t[i(361)].generateUUID(),this[i(614)]=s[i(400)](e[i(614)],r[i(581)],u[i(517)][i(632)]),this[i(759)]={_value:s[i(439)](e[i(759)][i(765)],t[i(719)],new n),_spread:s[i(439)](e[i(759)].spread,t[i(719)],new(t[i(719)])),_spreadClamp:s[i(439)](e[i(759)][i(658)],t[i(719)],new(t[i(719)])),_distribution:s[i(400)](e[i(759)][i(352)],r.NUMBER,this[i(614)]),_randomise:s.ensureTypedArg(e[i(759)][i(468)],r[i(664)],!1),_radius:s.ensureTypedArg(e.position[i(344)],r[i(581)],10),_radiusScale:s[i(439)](e[i(759)][i(385)],t[i(719)],new(t[i(719)])(1,1,1)),_distributionClamp:s.ensureTypedArg(e[i(759)][i(713)],r.NUMBER,0)},this[i(768)]={_value:s[i(439)](e[i(768)][i(765)],t[i(719)],new(t[i(719)])),_spread:s.ensureInstanceOf(e[i(768)].spread,t[i(719)],new(t[i(719)])),_distribution:s[i(400)](e.velocity[i(352)],r[i(581)],this[i(614)]),_randomise:s[i(400)](e[i(759)][i(468)],r[i(664)],!1)},this[i(510)]={_value:s.ensureInstanceOf(e[i(510)].value,n,new(t[i(719)])),_spread:s[i(439)](e[i(510)][i(638)],t[i(719)],new(t[i(719)])),_distribution:s[i(400)](e[i(510)][i(352)],r[i(581)],this.type),_randomise:s[i(400)](e[i(759)][i(468)],r[i(664)],!1)},this[i(490)]={_value:s[i(400)](e[i(490)][i(765)],r.NUMBER,0),_spread:s.ensureTypedArg(e.drag[i(638)],r[i(581)],0),_randomise:s.ensureTypedArg(e.position[i(468)],r[i(664)],!1)},this.wiggle={_value:s[i(400)](e[i(633)][i(765)],r[i(581)],0),_spread:s.ensureTypedArg(e.wiggle[i(638)],r.NUMBER,0)},this[i(484)]={_axis:s[i(439)](e[i(484)].axis,n,new(t[i(719)])(0,1,0)),_axisSpread:s[i(439)](e.rotation[i(721)],t[i(719)],new(t[i(719)])),_angle:s[i(400)](e.rotation[i(703)],r[i(581)],0),_angleSpread:s.ensureTypedArg(e.rotation.angleSpread,r[i(581)],0),_static:s[i(400)](e.rotation[i(491)],r.BOOLEAN,!1),_center:s[i(439)](e[i(484)][i(473)],n,this[i(759)]._value[i(704)]()),_randomise:s.ensureTypedArg(e[i(759)].randomise,r.BOOLEAN,!1)},this[i(334)]={_value:s.ensureTypedArg(e[i(334)].value,r[i(581)],2),_spread:s[i(400)](e[i(334)][i(638)],r[i(581)],0)},this[i(395)]={_value:s[i(550)](e[i(395)][i(765)],t[i(454)],new(t[i(454)])),_spread:s[i(550)](e[i(395)][i(638)],t[i(719)],new n),_randomise:s[i(400)](e[i(759)][i(468)],r[i(664)],!1)},this.opacity={_value:s[i(669)](e[i(365)][i(765)],r[i(581)],1),_spread:s[i(669)](e[i(365)][i(638)],r.NUMBER,0),_randomise:s[i(400)](e[i(759)][i(468)],r.BOOLEAN,!1)},this[i(379)]={_value:s[i(669)](e[i(379)][i(765)],r[i(581)],1),_spread:s.ensureArrayTypedArg(e[i(379)][i(638)],r[i(581)],0),_randomise:s[i(400)](e[i(759)][i(468)],r[i(664)],!1)},this.angle={_value:s.ensureArrayTypedArg(e[i(703)][i(765)],r[i(581)],0),_spread:s[i(669)](e[i(703)].spread,r[i(581)],0),_randomise:s[i(400)](e[i(759)].randomise,r[i(664)],!1)},this[i(699)]=s.ensureTypedArg(e.particleCount,r[i(581)],100),this[i(584)]=s[i(400)](e[i(584)],r.NUMBER,null),this[i(374)]=s[i(400)](e[i(374)],r[i(664)],!1),this[i(725)]=s[i(400)](e[i(725)],r[i(581)],1),this[i(610)]=s.ensureTypedArg(e[i(610)],r.NUMBER,1),this.alive=s[i(400)](e.alive,r[i(664)],!0),this[i(727)]=0,this[i(724)]=0,this[i(708)]=0,this.attributeEnd=0,this[i(654)]=0,this[i(326)]=0,this[i(347)]=null,this.attributes=null,this[i(684)]=null,this.resetFlags={position:s.ensureTypedArg(e[i(759)][i(468)],r[i(664)],!1)||s[i(400)](e.radius[i(468)],r[i(664)],!1),velocity:s[i(400)](e[i(768)][i(468)],r.BOOLEAN,!1),acceleration:s[i(400)](e[i(510)][i(468)],r[i(664)],!1)||s[i(400)](e[i(490)].randomise,r.BOOLEAN,!1),rotation:s.ensureTypedArg(e[i(484)][i(468)],r[i(664)],!1),rotationCenter:s.ensureTypedArg(e[i(484)][i(468)],r[i(664)],!1),size:s[i(400)](e[i(379)][i(468)],r.BOOLEAN,!1),color:s[i(400)](e.color.randomise,r[i(664)],!1),opacity:s[i(400)](e[i(365)][i(468)],r[i(664)],!1),angle:s[i(400)](e[i(703)][i(468)],r[i(664)],!1)},this.updateFlags={},this[i(729)]={},this[i(697)]={maxAge:i(511),position:i(759),velocity:i(768),acceleration:i(510),drag:i(510),wiggle:i(511),rotation:i(484),size:i(379),color:i(395),opacity:i(365),angle:i(703)};for(const t in this[i(697)])this.updateMap[i(726)](t)&&(this.updateCounts[this[i(697)][t]]=0,this[i(465)][this.updateMap[t]]=!1,this[i(338)](this[t],t));this[i(670)]={},this[i(376)]=null,this.attributeCount=0,s[i(747)](this[i(395)],a,a),s[i(747)](this[i(365)],a,a),s[i(747)](this[i(379)],a,a),s.ensureValueOverLifetimeCompliance(this.angle,a,a)},u[o(418)].constructor=u.Emitter,u.Emitter.prototype[o(338)]=function(t,e){const i=o,n=this;for(const s in t)if(t[i(726)](s)){const r=s[i(437)]("_","");Object.defineProperty(t,r,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=h,r=n[s(697)][e],o=this[t],a=u[s(407)];t===s(403)?(n[s(465)][s(486)]=!0,n[s(729)][s(486)]=0):t===s(362)?n.resetFlags[r]=i:(n.updateFlags[r]=!0,n[s(729)][r]=0),n[s(347)][s(349)](),this[t]=i,Array.isArray(o)&&u[s(442)][s(747)](n[e],a,a)}}(s)})}},u[o(418)][o(443)]._setBufferUpdateRanges=function(t){const e=o;this[e(376)]=t,this[e(369)]=t.length;for(let i=this.attributeCount-1;i>=0;--i)this[e(670)][t[i]]={min:Number[e(397)],max:Number.NEGATIVE_INFINITY}},u[o(418)].prototype[o(590)]=function(t){const e=o,i=this[e(699)];this[e(584)]?this[e(727)]=i/(t<this[e(584)]?t:this[e(584)]):this[e(727)]=i/t},u.Emitter[o(443)][o(681)]=function(t){const e=o;this[e(708)]=t,this.activationIndex=t,this[e(698)]=t+this[e(699)]},u[o(418)].prototype[o(493)]=function(t,e){const i=o;switch(t){case i(759):this[i(740)](e);break;case"velocity":case"acceleration":this._assignForceValue(e,t);break;case i(379):case i(365):this[i(702)](e,t);break;case i(703):this[i(373)](e);break;case i(511):this._assignParamsValue(e);break;case i(484):this[i(667)](e);break;case i(395):this[i(532)](e)}},u[o(418)][o(443)][o(740)]=function(t){const e=o,i=u[e(517)],n=u[e(442)],s=this[e(759)],r=this.attributes[e(759)],a=s[e(601)],c=s[e(613)];switch(s[e(549)]){case i[e(632)]:n[e(327)](r,t,a,c,s[e(333)]);break;case i.SPHERE:n[e(653)](r,t,a,s._radius,s[e(613)].x,s[e(774)],s[e(333)].x,s[e(771)]||this[e(699)]);break;case i[e(405)]:n[e(470)](r,t,a,s[e(386)],s[e(613)].x,s._radiusScale,s[e(333)].x);break;case i[e(457)]:n[e(542)](r,t,a,c)}},u[o(418)][o(443)]._assignForceValue=function(t,e){const i=o;let n,s,r,a,c,h=u[i(517)],l=u[i(442)],f=this[e],p=f[i(601)],d=f[i(613)];switch(f._distribution){case h[i(632)]:l[i(327)](this[i(693)][e],t,p,d);break;case h[i(730)]:n=this[i(693)][i(759)][i(711)].array,c=3*t,s=n[c],r=n[c+1],a=n[c+2],l[i(512)](this[i(693)][e],t,s,r,a,this[i(759)][i(601)],f[i(601)].x,f[i(613)].x);break;case h.DISC:n=this[i(693)].position[i(711)][i(375)],c=3*t,s=n[c],r=n[c+1],a=n[c+2],l[i(466)](this.attributes[e],t,s,r,a,this.position[i(601)],f._value.x,f[i(613)].x);break;case h.LINE:l[i(542)](this[i(693)][e],t,p,d)}if("acceleration"===e){const e=l.clamp(l[i(695)](this[i(490)][i(601)],this[i(490)][i(613)]),0,1);this[i(693)][i(510)][i(711)].array[4*t+3]=e}},u[o(418)].prototype[o(702)]=function(t,e){const i=o;let n,s=this.attributes[e][i(711)],r=this[e],a=u.utils;a[i(696)](r._value)&&a[i(696)](r[i(613)])?(n=Math[i(589)](a.randomFloat(r[i(601)][0],r[i(613)][0])),s[i(763)](t,n,n,n,n)):s[i(763)](t,Math[i(589)](a[i(695)](r[i(601)][0],r._spread[0])),Math.abs(a.randomFloat(r[i(601)][1],r[i(613)][1])),Math[i(589)](a[i(695)](r[i(601)][2],r._spread[2])),Math[i(589)](a[i(695)](r[i(601)][3],r[i(613)][3])))},u[o(418)][o(443)][o(373)]=function(t){const e=o;let i,n=this.attributes.angle.typedArray,s=this[e(703)],r=u[e(442)];r[e(696)](s[e(601)])&&r.arrayValuesAreEqual(s._spread)?(i=r.randomFloat(s[e(601)][0],s._spread[0]),n[e(763)](t,i,i,i,i)):n[e(763)](t,r.randomFloat(s[e(601)][0],s[e(613)][0]),r.randomFloat(s[e(601)][1],s._spread[1]),r[e(695)](s[e(601)][2],s[e(613)][2]),r[e(695)](s[e(601)][3],s._spread[3]))},u.Emitter[o(443)]._assignParamsValue=function(t){const e=o;this[e(693)][e(511)][e(711)][e(763)](t,this[e(374)]?1:0,0,Math.abs(u[e(442)][e(695)](this[e(334)]._value,this[e(334)][e(613)])),u[e(442)][e(695)](this.wiggle[e(601)],this[e(633)][e(613)]))},u[o(418)].prototype._assignRotationValue=function(t){const e=o;this[e(693)].rotation[e(711)].setVec3Components(t,u[e(442)][e(757)](this.rotation[e(556)],this[e(484)]._axisSpread),u[e(442)][e(695)](this[e(484)][e(558)],this.rotation._angleSpread),this[e(484)][e(432)]?0:1),this.attributes[e(486)].typedArray[e(471)](t,this[e(484)][e(609)])},u[o(418)].prototype[o(532)]=function(t){const e=o;u[e(442)][e(462)](this.attributes.color,t,this.color[e(601)],this.color[e(613)])},u[o(418)].prototype[o(575)]=function(t){const e=o;let i,n,s=this[e(622)],r=this[e(465)],a=this[e(729)],c=this[e(376)];for(let o=this[e(369)]-1;o>=0;--o)i=c[o],n=r[i],!0!==s[i]&&!0!==n||(this[e(493)](i,t),this[e(736)](i,t),!0===n&&a[i]===this[e(699)]?(r[i]=!1,a[i]=0):1==n&&++a[i])},u[o(418)][o(443)]._updateAttributeUpdateRange=function(t,e){const i=o,n=this.bufferUpdateRanges[t];n[i(482)]=Math[i(482)](e,n[i(482)]),n[i(579)]=Math[i(579)](e,n[i(579)])},u.Emitter.prototype[o(324)]=function(){const t=o;let e,i=this[t(670)],n=this[t(753)],s=this[t(748)]-1;for(;s>=0;--s)e=n[s],i[e][t(482)]=Number[t(397)],i[e][t(579)]=Number[t(416)]},u.Emitter[o(443)][o(574)]=function(){const t=o;this.particlesPerSecond=0,this[t(708)]=0,this[t(724)]=0,this[t(326)]=0,this[t(347)]=null,this[t(693)]=null,this[t(684)]=null,this[t(654)]=0},u[o(418)][o(443)]._decrementParticleCount=function(){--this[o(326)]},u[o(418)].prototype._incrementParticleCount=function(){++this[o(326)]},u[o(418)][o(443)]._checkParticleAges=function(t,e,i,n){const s=o;for(var r,a,c,h,l=e-1;l>=t;--l)0!==(h=i[r=4*l])&&(c=i[r+1],a=i[r+2],1===this[s(610)]?(c+=n)>=a&&(c=0,h=0,this[s(433)]()):(c-=n)<=0&&(c=a,h=0,this._decrementParticleCount()),i[r]=h,i[r+1]=c,this[s(736)](s(511),l))},u[o(418)][o(443)][o(577)]=function(t,e,i,n){const s=o,r=this.direction;for(var a,c,h=t;h<e;++h)0!=i[a=4*h]&&1!==this.particleCount||(this._incrementParticleCount(),i[a]=1,this[s(575)](h),c=n*(h-t),i[a+1]=-1===r?i[a+2]-c:c,this[s(736)](s(511),h))},u[o(418)][o(443)][o(483)]=function(t){const e=o;if(this[e(374)])return;null===this[e(684)]&&(this[e(684)]=this[e(693)][e(511)][e(711)][e(375)]);const i=this[e(708)],n=i+this[e(699)],s=this.paramsArray,r=this[e(727)]*this[e(725)]*t,a=this[e(724)];if(this[e(324)](),this[e(345)](i,n,s,t),!1===this[e(504)])return void(this.age=0);if(null!==this[e(584)]&&this[e(654)]>this.duration)return this[e(504)]=!1,void(this[e(654)]=0);const c=1===this[e(699)]?a:0|a,h=Math.min(c+r,this[e(698)]),l=h-this.activationIndex|0,u=l>0?t/l:0;this._activateParticles(c,h,s,u),this[e(724)]+=r,this[e(724)]>n&&(this.activationIndex=i),this.age+=t},u[o(418)][o(443)][o(417)]=function(t){const e=o;if(this.age=0,this[e(504)]=!1,!0===t){const t=this[e(708)],s=t+this[e(699)],r=this[e(684)],o=this[e(693)][e(511)][e(674)];for(var i,n=s-1;n>=t;--n)r[i=4*n]=0,r[i+1]=0;o[e(666)].offset=0,o[e(666)][e(773)]=-1,o[e(636)]=!0}return this},u[o(418)].prototype.enable=function(){return this[o(504)]=!0,this},u.Emitter[o(443)].disable=function(){return this[o(504)]=!1,this},u[o(418)][o(443)][o(456)]=function(){const t=o;return null!==this.group?this[t(347)][t(554)](this):console[t(612)](t(742)),this};const f=u;function p(t){function e(t){const i=h;if(typeof t===i(539))return function(t){}[i(706)](i(390)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[i(706)](i(573)+i(562))[i(346)]("action"):function(){return!1}[i(706)]("debu"+i(562))[i(428)](i(552)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{f as _};

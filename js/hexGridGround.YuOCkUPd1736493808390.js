import{e as n,W as t,b as e,U as i}from"./@tresjs.g7tJPOCI1736493808390.js";import{P as r}from"./tweakpane.yHWGBmom1736493808390.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.n94W_IBr1736493808390.js";import{bh as a,_ as s}from"./three.lAfZYOpc1736493808390.js";import{d as u,a4 as c,w as l,o as f,f as d,u as p,D as v,J as m,g as h,j as g,m as w,al as x,r as b,e as y}from"./@vue.-Mz_IXfk1736493808390.js";import"./@vueuse.kU-N6GoC1736493808390.js";import"./all.three.6_wnyCzL1736493808390.js";import"./oimophysics.x0jH7fze1736493808390.js";const _=T;function I(){const n=["call","1jkGfIv",'{}.constructor("return this")( )',"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","gridWeight","toString","info","prototype","fragmentShader","exception","bind","while (true) {}","12GTaums","test","length","division","direction","7ZeIdrf","divisionScaleX","constructor","apply","2668990YVPTij","time","log","512576SlmdWo","chain","5FrqBqQ","error","12736BrOuVw","counter","string","hasMaskTexture","DoubleSide","waveFrequency","27497717RyrVZw","trace","baseMaterial","hexGridMaterial","wavePow","10VuVAhj","__proto__","maskTexture","action","11390368okZRQZ","6394314mjVxAE","1290663YmHLLH","isReversed","gger","function *\\( *\\)","return (function() ","3MIWRyF","console","debu","value","input","raisedBottom"];return(I=function(){return n})()}!function(n,t){const e=T,i=I();for(;;)try{if(736812===-parseInt(e(366))/1*(parseInt(e(386))/2)+parseInt(e(359))/3*(parseInt(e(333))/4)+-parseInt(e(335))/5*(parseInt(e(353))/6)+parseInt(e(382))/7*(parseInt(e(337))/8)+-parseInt(e(354))/9+parseInt(e(348))/10*(parseInt(e(352))/11)+parseInt(e(377))/12*(parseInt(e(343))/13))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const M=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[T(385)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){M(this,(function(){const n=T,t=new RegExp(n(357)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=R("init");t[n(378)](i+n(334))&&e[n(378)](i+n(363))?R():i("0")}))()}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function T(n,t){const e=I();return(T=function(n,t){return e[n-=332]})(n,t)}k(void 0,(function(){const n=T;let t;try{t=Function(n(358)+n(367)+");")()}catch(r){t=window}const e=t[n(360)]=t[n(360)]||{},i=[n(332),"warn",n(371),n(336),n(374),"table",n(344)];for(let o=0;o<i.length;o++){const t=k[n(384)][n(372)].bind(k),r=i[o],a=e[r]||t;t[n(349)]=k[n(375)](k),t[n(370)]=a[n(370)].bind(a),e[r]=t}}))();const j=_(368),B=u({__name:_(346),props:{baseMaterial:{default:new a},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const r=_;let o,a;const u=i,v={gridWeight:{value:u.gridWeight},raisedBottom:{value:u[r(364)]},waveFrequency:{value:u[r(342)]},wavePow:{value:u[r(347)]},direction:{value:u[r(381)]},isReversed:{value:u[r(355)]},hasMaskTexture:{value:u[r(340)]},maskTexture:{value:null},division:{value:u[r(380)]},divisionScaleX:{value:u.divisionScaleX},time:{value:0}};u.maskTexture&&(v.maskTexture.value=([o,a]=c((()=>e([u[r(350)]]))),o=await o,a(),o)),l((()=>[u[r(369)],u[r(364)],u[r(342)],u[r(347)],u[r(380)],u[r(383)],u[r(381)],u[r(355)],u.hasMaskTexture]),(([n,t,e,i,o,a,s,u,c])=>{const l=r;v[l(369)][l(362)]=n,v.raisedBottom[l(362)]=t,v[l(342)][l(362)]=e,v[l(347)][l(362)]=i,v[l(380)][l(362)]=o,v[l(383)][l(362)]=a,v[l(381)][l(362)]=s,v[l(355)][l(362)]=u,v.hasMaskTexture[l(362)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{v[r(387)].value+=n*u.speed})),(n,e)=>{const o=r;return f(),d(p(t),{baseMaterial:i[o(345)],vertexShader:j,side:s[o(341)],transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial","side",o(373)])}}});function R(n){function t(n){const e=T;if(typeof n===e(339))return function(n){}[e(384)](e(376))[e(385)](e(338));1!==(""+n/n)[e(379)]||n%20==0?function(){return!0}[e(384)](e(361)+e(356))[e(365)](e(351)):function(){return!1}[e(384)](e(361)+"gger")[e(385)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const S=F;!function(n,t){const e=F,i=P();for(;;)try{if(729893===-parseInt(e(170))/1+-parseInt(e(177))/2*(-parseInt(e(197))/3)+parseInt(e(166))/4*(-parseInt(e(167))/5)+-parseInt(e(169))/6+-parseInt(e(168))/7*(parseInt(e(163))/8)+-parseInt(e(202))/9+parseInt(e(191))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const D=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[F(178)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){D(this,(function(){const n=F,t=new RegExp(n(201)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=q(n(173));t[n(189)](i+n(194))&&e[n(189)](i+n(190))?q():i("0")}))()}();const C=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[F(178)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function P(){const n=["test","input","32434480myRlbV","bind","error","chain","toString","rotation","49323ODFzos","stateObject","baseMaterial","__proto__","function *\\( *\\)","1037781aiVrFh","call","TresMesh","460792yRiQYs","MeshBasicMaterial","$attrs","11392ylaKat","435emtEKn","91IbBpJw","8372790IBiEnc","598094aaeyjJ","console","string","init","table","while (true) {}","debu","72hpYyAZ","apply","length","warn","hexGridMesh","exception","log","action","TresPlaneGeometry","gger","counter","constructor"];return(P=function(){return n})()}function F(n,t){const e=P();return(F=function(n,t){return e[n-=162]})(n,t)}C(void 0,(function(){const n=F,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(171)]=t[n(171)]||{},i=[n(183),n(180),"info",n(193),n(182),n(174),"trace"];for(let r=0;r<i[n(179)];r++){const t=C.constructor.prototype.bind(C),o=i[r],a=e[o]||t;t[n(200)]=C[n(192)](C),t[n(195)]=a.toString[n(192)](a),e[o]=t}}))();const A=[S(196)],Z=u({__name:S(181),setup(n){const t=S,e=new(s[t(164)]);return(n,i)=>{const r=t;return f(),v(r(162),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=m(r(185),{args:[1,1]},null,-1)),(f(),d(x,null,{default:h((()=>[g(B,w({baseMaterial:p(e)},n[r(165)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[r(199)])])),_:1}))],8,A)}}});function q(n){function t(n){const e=F;if(typeof n===e(172))return function(n){}[e(188)](e(175)).apply(e(187));1!==(""+n/n)[e(179)]||n%20==0?function(){return!0}.constructor(e(176)+e(186))[e(203)](e(184)):function(){return!1}[e(188)](e(176)+e(186))[e(178)](e(198)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const V=z;!function(n,t){const e=z,i=G();for(;;)try{if(791411===parseInt(e(335))/1+-parseInt(e(318))/2+parseInt(e(339))/3+parseInt(e(309))/4*(-parseInt(e(345))/5)+-parseInt(e(340))/6*(-parseInt(e(327))/7)+-parseInt(e(320))/8+parseInt(e(323))/9)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const W=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function z(n,t){const e=G();return(z=function(n,t){return e[n-=306]})(n,t)}!function(){W(this,(function(){const n=z,t=new RegExp(n(344)),e=new RegExp(n(310),"i"),i=L(n(348));t[n(314)](i+n(306))&&e[n(314)](i+n(356))?L():i("0")}))()}();const E=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[z(322)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function G(){const n=["length","hexGridGround","waveFrequency","图片纹理","chain","gger","constructor","4esKwEM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","division","bind","test","颜色取反","log","渐变宽度","1715170dwqgMG","divisionScaleX","2448464OlnZKi","action","apply","16594164HqRbMw","toString","prototype","exception","7xUIBjn","info","debu","stateObject","counter","table","#666666","#de62f2","870481vUQQJJ","网格横向缩放","TresCanvas","trace","829947pijOJv","2747874MDoUmG","TresPerspectiveCamera","网格整体缩放","raisedBottom","function *\\( *\\)","7469255dhjgUB","hasMaskTexture","网格宽度","init","direction","__proto__","addBinding","warn","gridWeight","console","error","input"];return(G=function(){return n})()}E(void 0,(function(){const n=z;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(354)]=t[n(354)]||{},i=[n(316),n(352),n(328),n(355),n(326),n(332),n(338)];for(let o=0;o<i[n(357)];o++){const t=E[n(308)][n(325)][n(313)](E),r=i[o],a=e[r]||t;t[n(350)]=E[n(313)](E),t[n(324)]=a[n(324)].bind(a),e[r]=t}}))();const X=u({__name:V(358),setup(n){const t=V,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),a=b({color:t(334),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new r({title:t(358),expanded:!0});return s[t(351)](a,t(346),{label:t(360)}),s.addBinding(a,"color",{label:"颜色"}),s[t(351)](a,"speed",{label:"速度",min:-5,max:5,step:.1}),s[t(351)](a,t(353),{label:t(347),min:.001,max:.5,step:.001}),s[t(351)](a,t(343),{label:t(317),min:.001,max:1,step:.001}),s[t(351)](a,t(359),{label:"分段",min:.001,max:1,step:.001}),s[t(351)](a,"wavePow",{label:"渐变强度",min:1,max:30,step:.1}),s[t(351)](a,t(312),{label:t(342),min:.1,max:50,step:.1}),s[t(351)](a,t(319),{label:t(336),min:.1,max:10,step:.1}),s[t(351)](a,"isReversed",{label:t(315)}),s.addBinding(a,t(349),{label:"方向类别",min:3,max:6,step:1}),(n,r)=>{const s=t,u=y(s(337));return f(),d(u,{clearColor:s(333),"window-size":""},{default:h((()=>[r[0]||(r[0]=m(s(341),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),g(p(i),{enableDamping:"",autoRotate:""}),g(Z,w(a,{scale:9}),null,16),(f(),d(x,null,{default:h((()=>[g(o,w({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=z;if("string"==typeof n)return function(n){}.constructor(e(311)).apply(e(331));1!==(""+n/n)[e(357)]||n%20==0?function(){return!0}.constructor(e(329)+"gger").call(e(321)):function(){return!1}.constructor(e(329)+e(307))[e(322)](e(330)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{X as default};

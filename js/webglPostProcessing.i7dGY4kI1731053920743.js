import{i as t}from"./ice-utils.A0Vr3KoZ1731053920743.js";import{_ as n,m as e,l as o}from"./gl-matrix.JIt_wwg31731053920743.js";import{P as r}from"./tweakpane.yHWGBmom1731053920743.js";import{d as i,r as a,q as c,o as s,D as u,J as f,u as l}from"./@vue.u2cBPEWn1731053920743.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",_="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=b;!function(t,n){const e=b,o=T();for(;;)try{if(587246===parseInt(e(390))/1+-parseInt(e(343))/2*(-parseInt(e(358))/3)+parseInt(e(344))/4*(-parseInt(e(413))/5)+-parseInt(e(330))/6+parseInt(e(370))/7*(-parseInt(e(399))/8)+parseInt(e(430))/9*(parseInt(e(378))/10)+-parseInt(e(348))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[b(419)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=b,n=new RegExp(t(396)),e=new RegExp(t(407),"i"),o=R(t(411));n[t(340)](o+t(354))&&e.test(o+"input")?R():o("0")}))()}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[b(419)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();E(void 0,(function(){const t=b,n=function(){const t=b;let n;try{n=Function(t(359)+t(414)+");")()}catch(e){n=window}return n}(),e=n[t(398)]=n[t(398)]||{},o=[t(420),"warn",t(429),"error","exception",t(365),t(337)];for(let r=0;r<o[t(372)];r++){const n=E[t(373)][t(349)].bind(E),i=o[r],a=e[i]||n;n[t(338)]=E[t(347)](E),n[t(387)]=a[t(387)].bind(a),e[i]=n}}))();const p={id:x(384)},g=[x(388)];function T(){const t=["vertexAttribPointer","translate","TRIANGLES","addBlade","28DibKHv","innerWidth","length","constructor","stateObject","offset_left_bottom","height","enable","124130qLAqxx","bindFramebuffer","uniform1f","clearColor","STATIC_DRAW","webglPostProcessing","canvaswebgl","TEXTURE_MAG_FILTER","counter","toString","src","bindTexture","379286GUrvWI","logo-texture","是否后处理","getElementById","ARRAY_BUFFER","texImage2D","function *\\( *\\)","drawElements","console","223072UCQaXm","texParameteri","debu","mat4","useProgram","BYTES_PER_ELEMENT","innerHeight","change","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","img","offset_right_top","value","init","SRC_ALPHA","890235hWFPua",'{}.constructor("return this")( )',"framebufferTexture2D","canvas","offset_right_bottom","hidden","apply","log","action","FLOAT","width","uView","mixParam","ELEMENT_ARRAY_BUFFER","uniformMatrix4fv","call","info","495sZCakg","RGBA","TEXTURE_MIN_FILTER","addBinding","createTexture","blendFunc","1284234PiwUsW","UNSIGNED_BYTE","ONE_MINUS_SRC_ALPHA","FRAMEBUFFER","string","ortho","COLOR_BUFFER_BIT","trace","__proto__","uModel","test","gger","enableVertexAttribArray","2261858MxIknm","12xztPhE","uProjection","TEXTURE_2D","bind","8205648YukFEP","prototype","getUniformLocation","inline","COLOR_ATTACHMENT0","clear","chain","TEXTURE_WRAP_S","querySelector","CLAMP_TO_EDGE","3yQSfxw","return (function() ","createFramebuffer","create","while (true) {}","bindBuffer","color","table"];return(T=function(){return t})()}function b(t,n){const e=T();return(b=function(t,n){return e[t-=328]})(t,n)}const A=i({__name:x(383),setup(i){const d=x;let E,T,b,A,R,y,v,F,h,P,I,w,C;const U=1,B=.71,D=.76,S=new r({title:"参数"}),L=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S[d(369)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(d(406),(t=>{const n=d;X(),T[n(380)](w,t[n(410)])}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[d(433)](L,d(418),{label:d(392)}),S[d(433)](L,d(409),{picker:d(351),x:{min:0,max:1},y:{min:0,max:1}}).on(d(406),(t=>{const n=d;N[0]=L.offset_right_top.x,N[1]=L[n(409)].y,X()})),S[d(433)](L,d(417),{picker:d(351),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(406),(t=>{const n=d;N[5]=L[n(417)].x,N[6]=L[n(417)].y,X()})),S.addBinding(L,d(375),{picker:d(351),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(406),(t=>{const n=d;N[10]=L[n(375)].x,N[11]=L[n(375)].y,X()})),S[d(433)](L,"offset_left_top",{picker:d(351),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(406),(t=>{N[15]=L.offset_left_top.x,N[16]=L.offset_left_top.y,X()})),c((()=>{M()}));const M=function(){const n=d;E=document[n(356)]("#canvaswebgl"),E[n(423)]=window[n(371)],E[n(376)]=window[n(405)],T=E.getContext("webgl"),T&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=G(e,o),b=t(T,m,_),h=T[n(350)](b,n(345)),P=T[n(350)](b,n(424)),I=T[n(350)](b,n(339)),C=j(document[n(393)]("logo-texture"))}(),X(),T[n(377)](T.BLEND),T[n(329)](T[n(412)],T[n(332)]),O())};function O(){const t=d;T[t(379)](T[t(333)],v),T[t(381)](U,B,D,1),T[t(353)](T[t(336)]),function(){const t=d;T[t(403)](b),T[t(363)](T[t(394)],A);const r=n[t(402)][t(361)]();e[t(335)](r,0,E[t(423)],E.height,0,.1,100),T[t(427)](h,!1,r);const i=e[t(361)]();o(i,[0,0,1],[0,0,0],[0,1,0]),T[t(427)](P,!1,i),k(C,600,600),k(C,400,400)}(),T.bindFramebuffer(T[t(333)],null),L[t(418)]&&(T[t(353)](T.COLOR_BUFFER_BIT),T[t(381)](0,0,1,1),T.bindBuffer(T[t(394)],R),T[t(403)](y),T[t(389)](T.TEXTURE_2D,F)),T[t(397)](T[t(368)],6,T[t(331)],0),requestAnimationFrame(O)}function k(t,o,r){const i=d;let a=n[i(402)][i(361)]();e[i(367)](a,a,[o,r,0]),n[i(402)].scale(a,a,[250,250,0]),T[i(427)](I,!1,a),T[i(389)](T[i(346)],t),T[i(397)](T[i(368)],6,T.UNSIGNED_BYTE,0)}function X(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);R=G(N,e),y=t(T,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=T[n(350)](y,n(425)),T[n(350)](y,n(364)),function(){const t=d;F=j(E),v=T[t(360)](),T.bindFramebuffer(T[t(333)],v),T[t(415)](T[t(333)],T[t(352)],T[t(346)],F,0),T[t(379)](T.FRAMEBUFFER,null)}()}function j(t){const n=d,e=T[n(328)]();return T[n(389)](T.TEXTURE_2D,e),t instanceof HTMLImageElement?T[n(395)](T.TEXTURE_2D,0,T[n(431)],T[n(431)],T[n(331)],t):T.texImage2D(T[n(346)],0,T[n(431)],t[n(423)],t.height,0,T[n(431)],T.UNSIGNED_BYTE,null),T[n(400)](T[n(346)],T[n(432)],T.NEAREST),T[n(400)](T[n(346)],T[n(385)],T.NEAREST),T[n(400)](T[n(346)],T[n(355)],T[n(357)]),T[n(400)](T[n(346)],T.TEXTURE_WRAP_T,T[n(357)]),e}function G(t,n){const e=d,o=T.createBuffer();T[e(363)](T[e(394)],o),T.bufferData(T[e(394)],t,T.STATIC_DRAW);const r=3*Float32Array[e(404)]+2*Float32Array.BYTES_PER_ELEMENT;T.vertexAttribPointer(0,3,T[e(422)],!1,r,0),T[e(342)](0),T[e(366)](1,2,T[e(422)],!1,r,3*Float32Array[e(404)]),T[e(342)](1);const i=T.createBuffer();return T[e(363)](T[e(426)],i),T.bufferData(T[e(426)],n,T[e(382)]),T[e(363)](T[e(394)],null),o}return(t,n)=>{const e=d;return s(),u(e(416),p,[f(e(408),{id:e(391),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,g)])}}});function R(t){function n(t){const e=b;if(typeof t===e(334))return function(t){}[e(373)](e(362))[e(419)](e(386));1!==(""+t/t)[e(372)]||t%20==0?function(){return!0}[e(373)](e(401)+e(341))[e(428)](e(421)):function(){return!1}[e(373)](e(401)+e(341))[e(419)](e(374)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

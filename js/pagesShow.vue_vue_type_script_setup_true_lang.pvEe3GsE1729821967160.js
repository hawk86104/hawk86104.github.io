import{_ as t,cf as n,cg as o,ch as e,ci as r,C as i,m as u,bU as c,ak as s,am as a}from"./three.x4oqFJNT1729821967160.js";import{c as l,U as f,Y as p}from"./@tresjs.QjD7q5YC1729821967160.js";import{C as d}from"./three-custom-shader-material.WGQvdF_T1729821967160.js";import"./object-hash.nNsVfdic1729821967160.js";import"./@amap.Y4sQVtej1729821967160.js";import"./glsl-tokenizer.kwkA-85M1729821967160.js";import{d as m,b as h,a3 as y,w as g,o as w,E as v,u as _,r as b,a4 as C,e as x,f as I,g as M,L as T,j,aj as A,ak as O,F as S,J as R,H as B,m as L}from"./@vue.JNsx1iN61729821967160.js";function k(){const t=["exception","call","log","24HRKwWr","74845ymcyLO","stateObject","2692887ggHCcD","constructor","error","debu","warn","1949479NAqtPU","info","traverse","length","console","89236arIudi","30dIKUvV","ROADS","table","46KYjABU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","gger","function *\\( *\\)","trace","action","input","init","return (function() ","bind","12048970DDVIKF","name","__proto__","9808398sAGAll","test","apply","25507XrYQLK"];return(k=function(){return t})()}!function(t,n){const o=D,e=k();for(;;)try{if(587062===-parseInt(o(228))/1*(-parseInt(o(211))/2)+-parseInt(o(235))/3+parseInt(o(207))/4+parseInt(o(233))/5*(-parseInt(o(208))/6)+parseInt(o(240))/7*(parseInt(o(232))/8)+-parseInt(o(225))/9+parseInt(o(222))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[D(227)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function D(t,n){const o=k();return(D=function(t,n){return o[t-=206]})(t,n)}!function(){z(this,(function(){const t=D,n=new RegExp(t(215)),o=new RegExp(t(212),"i"),e=H(t(219));n.test(e+"chain")&&o[t(226)](e+t(218))?H():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[D(227)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();F(void 0,(function(){const t=D,n=function(){const t=D;let n;try{n=Function(t(220)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n[t(206)]=n.console||{},e=[t(231),t(239),t(241),t(237),t(229),t(210),t(216)];for(let r=0;r<e[t(243)];r++){const n=F[t(236)].prototype[t(221)](F),i=e[r],u=o[i]||n;n[t(224)]=F[t(221)](F),n.toString=u.toString[t(221)](u),o[i]=n}}))();const G=async()=>{const t=D,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(242)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(223)]&&(o=n),"LANDMASS"===n.name&&(e=n),n[i(223)]===i(209)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function H(t){function n(t){const o=D;if("string"==typeof t)return function(t){}.constructor("while (true) {}").apply(o(213));1!==(""+t/t)[o(243)]||t%20==0?function(){return!0}[o(236)](o(238)+o(214))[o(230)](o(217)):function(){return!1}.constructor("debu"+o(214))[o(227)](o(234)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const P=W;!function(t,n){const o=W,e=$();for(;;)try{if(250096===-parseInt(o(392))/1+parseInt(o(381))/2*(parseInt(o(377))/3)+-parseInt(o(387))/4+-parseInt(o(379))/5+-parseInt(o(385))/6+-parseInt(o(416))/7+parseInt(o(412))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[W(364)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){E(this,(function(){const t=W,n=new RegExp(t(367)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=N(t(365));n[t(375)](e+"chain")&&o[t(375)](e+t(369))?N():e("0")}))()}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[W(364)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();Z(void 0,(function(){const t=W;let n;try{n=Function("return (function() "+t(414)+");")()}catch(r){n=window}const o=n.console=n[t(396)]||{},e=[t(383),t(394),t(388),t(376),"exception",t(417),t(399)];for(let i=0;i<e.length;i++){const n=Z[t(373)][t(395)].bind(Z),r=e[i],u=o[r]||n;n[t(408)]=Z[t(382)](Z),n[t(384)]=u[t(384)][t(382)](u),o[r]=n}}))();const U=[P(401)];function W(t,n){const o=$();return(W=function(t,n){return o[t-=363]})(t,n)}function $(){const t=["error","226461pxkwyr","land","1541660GOHYlM","stateObject","8oXetAJ","bind","log","toString","306858cOesLR","string","1286132xUFguf","info","#ffffff","__csm","model","442455zTUJjQ","gradient","warn","prototype","console","#112233","uOpacity","trace","color","object","renderOrder","bulidingsColor","opacity","gger","isArray","city","__proto__","value","DoubleSide","while (true) {}","8865136emSQDY","side",'{}.constructor("return this")( )',"material","255717qeRXuf","table","setStyle","debu","boundingBox","computeBoundingSphere","landColor","apply","init","buildingsModelCustomShader","function *\\( *\\)","#ffff00","input","uniforms","Color","call","constructor","counter","test"];return($=function(){return t})()}const J=m({__name:P(366),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:P(397)},topColor:{default:P(368)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const o=P,e=n,r=h(0),i=e[o(391)][o(407)];i[o(402)]=1001;const u=e[o(391)][o(378)];(()=>{const n=o,{geometry:u}=i;u.computeBoundingBox(),u[n(421)]();const{max:c,min:s}=u[n(420)];if(i.material[n(390)])return;const a=new d({baseMaterial:i.material,vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(371)])(e[n(403)])},uOpacity:{value:e[n(404)]},uLightColor:{value:new(t[n(371)])(n(389))},uTopColor:{value:new(t[n(371)])(e.topColor)},uTime:r,uGradient:{value:e[n(393)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(410)]});i[n(415)].dispose(),i.material=a})();const{onLoop:c}=f();c((({delta:t})=>{r[o(409)]+=t})),y((()=>{const n=o;e[n(403)]&&i[n(415)][n(370)].uColor[n(409)][n(418)](e[n(403)]),e[n(363)]&&((n,r)=>{const i=o;let c;"cu"===n||n===i(378)&&(c=Array[i(406)](u[i(415)])?u[i(415)]:[u[i(415)]],c.forEach((n=>{const o=i;n[r][o(418)](e[o(363)]),n[o(413)]=t[o(410)]})))})("land",n(400)),e[n(404)]&&(i[n(415)].uniforms[n(398)][n(409)]=e[n(404)])})),g(e,((t,n)=>{const e=o;i.material.uniforms.uGradient[e(409)]=t[e(393)]}));const s=e[o(391)][o(391)].clone();return(t,n)=>(w(),v("primitive",{object:_(s)},null,8,U))}});function N(t){function n(t){const o=W;if(typeof t===o(386))return function(t){}.constructor(o(411))[o(364)](o(374));1!==(""+t/t).length||t%20==0?function(){return!0}[o(373)]("debu"+o(405))[o(372)]("action"):function(){return!1}.constructor(o(419)+o(405))[o(364)](o(380)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const X=K;!function(t,n){const o=K,e=q();for(;;)try{if(410153===-parseInt(o(257))/1+-parseInt(o(242))/2+-parseInt(o(239))/3+parseInt(o(272))/4*(-parseInt(o(261))/5)+parseInt(o(243))/6+-parseInt(o(270))/7*(-parseInt(o(254))/8)+parseInt(o(263))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Y=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[K(259)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function K(t,n){const o=q();return(K=function(t,n){return o[t-=238]})(t,n)}!function(){Y(this,(function(){const t=K,n=new RegExp(t(278)),o=new RegExp(t(288),"i"),e=nt("init");n[t(252)](e+t(253))&&o[t(252)](e+t(248))?nt():e("0")}))()}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[K(259)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();V(void 0,(function(){const t=K;let n;try{n=Function(t(284)+t(268)+");")()}catch(r){n=window}const o=n[t(256)]=n.console||{},e=[t(238),"warn",t(280),"error","exception","table","trace"];for(let i=0;i<e[t(282)];i++){const n=V[t(277)][t(281)].bind(V),r=e[i],u=o[r]||n;n[t(246)]=V.bind(V),n[t(240)]=u[t(240)][t(262)](u),o[r]=n}}))();const Q=[X(274)];function q(){const t=["style","uOpacity","while (true) {}","uniforms","matrix","value","opacity","log","688344jAwaXt","toString","primitive","40290CMSFeP","3756072gnIoJN","stateObject","string","__proto__","set","input","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      "," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","innerWidth","test","chain","8gfTPZe","counter","console","35489LPxNWx","call","apply","builds","1142430ujTOEb","bind","2976912ToZFfJ","gger","#FFF","action","uColor",'{}.constructor("return this")( )',"buildingsLines","1367989BGJRSI","Wireframe","8fnMinj","width","object","geometry","applyMatrix4","constructor","function *\\( *\\)","clone","info","prototype","length","debu","return (function() ","resolution","color","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","renderOrder"];return(q=function(){return t})()}const tt=m({__name:X(269),props:{builds:{},width:{default:1},color:{default:X(265)},opacity:{default:1},style:{default:X(271)}},setup(t){const c=X,s=t;let a=null,l=null;if(s[c(290)]===c(271)){const t=new n(s[c(260)][c(275)]);let i=(new o).fromEdgesGeometry(t),u=new e({color:s[c(286)],linewidth:s[c(273)],opacity:s[c(296)],transparent:!0,depthWrite:!0,depthTest:!0});u[c(285)][c(247)](window[c(251)],window.innerHeight),a=new r(i,u),a[c(276)](s[c(260)][c(294)][c(279)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(s[c(286)])},uOpacity:{value:s[c(296)]}},vertexShader:c(249),fragmentShader:c(250)};const t=new n(s[c(260)][c(275)]),o=new u(l);a=new LineSegments(t,o),a[c(276)](s[c(260)][c(294)][c(279)]()),a[c(287)].linewidth=s.width,a[c(289)]=1e3}return y((()=>{const t=c;"Shader"===s[t(290)]&&(s[t(286)]&&(l[t(293)][t(267)][t(295)]=new i(s[t(286)])),s[t(296)]&&(l.uniforms[t(291)].value=s[t(296)])),s.style===t(271)&&(s.color&&(a[t(287)][t(286)]=new i(s[t(286)])),s[t(296)]&&(a[t(287)][t(296)]=s.opacity)),s[t(273)]&&(a.material.linewidth=s.width)})),(t,n)=>{const o=c;return w(),v(o(241),{object:_(a)},null,8,Q)}}});function nt(t){function n(t){const o=K;if(typeof t===o(245))return function(t){}[o(277)](o(292)).apply(o(255));1!==(""+t/t)[o(282)]||t%20==0?function(){return!0}.constructor(o(283)+o(264))[o(258)](o(266)):function(){return!1}.constructor("debu"+o(264))[o(259)](o(244)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const ot=at;!function(t,n){const o=at,e=lt();for(;;)try{if(451231===-parseInt(o(232))/1+parseInt(o(229))/2+parseInt(o(199))/3+-parseInt(o(202))/4+parseInt(o(225))/5+parseInt(o(240))/6+parseInt(o(222))/7)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[at(198)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){et(this,(function(){const t=at,n=new RegExp(t(214)),o=new RegExp(t(243),"i"),e=pt(t(226));n[t(233)](e+t(195))&&o[t(233)](e+t(247))?pt():e("0")}))()}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[at(198)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();rt(void 0,(function(){const t=at;let n;try{n=Function(t(212)+t(239)+");")()}catch(r){n=window}const o=n.console=n[t(200)]||{},e=[t(216),t(230),t(219),t(221),t(228),t(194),t(197)];for(let i=0;i<e[t(220)];i++){const n=rt[t(223)][t(205)][t(213)](rt),r=e[i],u=o[r]||n;n[t(208)]=rt[t(213)](rt),n[t(211)]=u[t(211)][t(213)](u),o[r]=n}}))();const it=T(ot(245),{color:"#ffffff"},null,-1),ut=T(ot(209),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1),ct={key:1,args:[1e3],position:[0,19,0]},st={key:2,args:[6e3,100],position:[0,19,0]};function at(t,n){const o=lt();return(at=function(t,n){return o[t-=192]})(t,n)}function lt(){const t=["showGridHelper","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","TresAmbientLight","while (true) {}","input","city","$slots","table","chain","showBuildings","trace","apply","170856yslZdG","console","gger","1153416XsPBGz","#000","builds","prototype","action","#000000","__proto__","TresDirectionalLight","debu","toString","return (function() ","bind","function *\\( *\\)","string","log","pagesShow","ability","info","length","error","839734yVcyxp","constructor","showAxesHelper","199505dLaCRT","init","stateObject","exception","918306VmozOU","warn","model","388009ckWxIw","test","TresPerspectiveCamera","disableRender","tcRef","autoRotate","perspectiveCameraRef",'{}.constructor("return this")( )',"2709756HTtufQ","TresAxesHelper"];return(lt=function(){return t})()}const ft=m({__name:ot(217),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let o,e;const r=t,i=b({clearColor:n(207),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:s,toneMapping:a,disableRender:r[n(235)]}),u=b({autoRotate:r[n(237)],enableDamping:!0});let l=null;r[n(196)]&&([o,e]=C((()=>G())),o=await o,e(),l=o);const f=h(),d=h();return(t,o)=>{const e=n,c=x("TresCanvas");return w(),I(c,L({ref_key:e(236),ref:d},i,{"window-size":""}),{default:M((()=>[T(e(234),{ref_key:e(238),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(_(p),A(O(u)),null,16),it,ut,r[e(196)]&&_(l)?(w(),v(S,{key:0},[j(J,{model:_(l)},null,8,[e(231)]),j(tt,{builds:_(l)[e(192)],color:e(203)},null,8,[e(204)])],64)):R("",!0),B(t[e(193)],e(218)),r[e(224)]?(w(),v(e(241),ct)):R("",!0),r[e(242)]?(w(),v("TresGridHelper",st)):R("",!0)])),_:3},16)}}});function pt(t){function n(t){const o=at;if(typeof t===o(215))return function(t){}.constructor(o(246))[o(198)](o(244));1!==(""+t/t).length||t%20==0?function(){return!0}[o(223)](o(210)+o(201)).call(o(206)):function(){return!1}.constructor(o(210)+o(201))[o(198)](o(227)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{J as _,tt as a,ft as b,G as l};

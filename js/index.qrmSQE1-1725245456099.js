var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as I,l as b,m as w,n as S,A as M,f as R,V as E,g as A,a6 as T,bR as D,k as P,ba as z,j as C,bx as O,d as F,aa as B,B as k,a as U,aP as j,e as N,M as L,al as H,a7 as Z,c1 as G,c2 as V}from"./three.KG2-8r0_1725245456099.js";import{p as $,W,$ as q}from"./@tresjs.j5vdYITq1725245456099.js";import{R as Y}from"./three-stdlib.7palOSci1725245456099.js";import{Z as K,b as X,a as J,w as Q,u as nn,d as tn,U as en,a4 as rn,a2 as on,o as an,D as cn,G as sn,I as un,a8 as ln,a1 as fn,q as pn,f as dn,J as hn,a9 as vn,r as mn,M as gn,X as _n,t as yn,F as xn,a6 as In,m as bn}from"./@vue.Q1VpS3901725245456099.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.Ip0yUZ_e1725245456099.js";import{o as Rn}from"./object-hash.ycpyO56T1725245456099.js";!function(n,t){for(var e=An,r=Dn();;)try{if(851381===parseInt(e(372))/1*(-parseInt(e(369))/2)+-parseInt(e(373))/3*(parseInt(e(354))/4)+-parseInt(e(367))/5+-parseInt(e(360))/6*(parseInt(e(370))/7)+-parseInt(e(356))/8*(-parseInt(e(351))/9)+parseInt(e(344))/10+parseInt(e(355))/11*(parseInt(e(352))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function An(n,t){var e=Dn();return(An=function(n,t){return e[n-=340]})(n,t)}!function(){En(this,(function(){var n=An,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zn(n(350));t.test(r+n(357))&&e[n(349)](r+n(377))?zn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(){var n=["bind","183724FzRMcJ","22ubSvGM","9406528aaVPvN","chain","toString","dispose","6293922VsZLdV","stateObject","apply","gger","prototype","traverse","action","2479050nKiaYD","table","2356694oYmBbo","7tRaLXv","length","1cXllQj","51VqliTj","trace","log","return (function() ","input","exception","map","string","console","call","remove","counter","add","error","virtualScene","info","13974580ytjlwA","geometry","debu",'{}.constructor("return this")( )',"constructor","test","init","9MeBdGt","10692468wDUBaP"];return(Dn=function(){return n})()}Tn(void 0,(function(){var n,t=An;try{n=Function(t(376)+t(347)+");")()}catch(s){n=window}for(var e=n[t(381)]=n[t(381)]||{},r=[t(375),"warn",t(343),t(341),t(378),t(368),t(374)],o=0;o<r.length;o++){var i=Tn.constructor[t(364)][t(353)](Tn),a=r[o],c=e[a]||i;i.__proto__=Tn.bind(Tn),i[t(358)]=c.toString.bind(c),e[a]=i}}))();const Pn=class extends s{constructor(){var n=An;super(),this[n(342)]=null,this[n(342)]=new u}add(...n){var t=An;return this[t(342)][t(340)](...n),this}destructor(){var n=An;this.virtualScene[n(365)]((t=>{var e=n;t instanceof l&&(t[e(345)][e(359)](),t.material.dispose(),t.material[e(379)]&&t.material[e(379)].dispose(),this[e(342)][e(383)](t))})),this.virtualScene=null}};function zn(n){function t(n){var e=An;if(typeof n===e(380))return function(n){}[e(348)]("while (true) {}")[e(362)](e(384));1!==(""+n/n)[e(371)]||n%20==0?function(){return!0}[e(348)](e(346)+e(363))[e(382)](e(366)):function(){return!1}.constructor(e(346)+"gger")[e(362)](e(361)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=Bn;!function(n,t){const e=Bn,r=Un();for(;;)try{if(452717===parseInt(e(384))/1*(parseInt(e(392))/2)+-parseInt(e(404))/3*(parseInt(e(414))/4)+parseInt(e(380))/5+-parseInt(e(411))/6+-parseInt(e(418))/7*(parseInt(e(395))/8)+-parseInt(e(402))/9*(parseInt(e(417))/10)+-parseInt(e(415))/11*(-parseInt(e(416))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const On=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){On(this,(function(){const n=Bn,t=new RegExp(n(393)),e=new RegExp(n(425),"i"),r=jn(n(403));t[n(408)](r+"chain")&&e[n(408)](r+n(381))?jn():r("0")}))()}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(n,t){const e=Un();return(Bn=function(n,t){return e[n-=380]})(n,t)}Fn(void 0,(function(){const n=Bn;let t;try{t=Function(n(421)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(389)]=t[n(389)]||{},r=["log",n(407),"info","error",n(397),n(412),n(423)];for(let i=0;i<r.length;i++){const t=Fn.constructor[n(382)][n(388)](Fn),o=r[i],a=e[o]||t;t[n(420)]=Fn[n(388)](Fn),t[n(385)]=a[n(385)][n(388)](a),e[o]=t}}))();const kn={sunset:Cn(396),studio:Cn(399),city:"city/canary_wharf_1k.hdr",umbrellas:Cn(413),night:Cn(398),forest:Cn(419),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Cn(400),hangar:Cn(422),urban:Cn(406),modern:Cn(405),shangai:Cn(387)};function Un(){const n=["exception","outdoor/satara_night_1k.hdr","studio/poly_haven_studio_1k.hdr","kiara/kiara_1_dawn_1k.hdr","action","1307403VkhptH","init","24UGGRWe","city/modern_buildings_2_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","warn","test","string","constructor","4327566HSABwJ","table","outdoor/outdoor_umbrellas_1k.hdr","202424ujyteP","363bEKgDp","486660cTszme","20CeSPDH","484351EUKTjK","outood/mossy_forest_1k.hdr","__proto__","return (function() ","indoor/small_hangar_01_1k.hdr","trace","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","839910mpZuMI","input","prototype","debu","2VMlyJY","toString","length","city/shanghai_bund_1k.hdr","bind","console","call","apply","709028kvmCKn","function *\\( *\\)","stateObject","40bAkIpI","venice/venice_sunset_1k.hdr"];return(Un=function(){return n})()}function jn(n){function t(n){const e=Bn;if(typeof n===e(409))return function(n){}.constructor("while (true) {}")[e(391)]("counter");1!==(""+n/n)[e(386)]||n%20==0?function(){return!0}.constructor("debu"+e(424))[e(390)](e(401)):function(){return!1}[e(410)](e(383)+e(424))[e(391)](e(394)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nn(n,t){const e=Vn();return(Nn=function(n,t){return e[n-=397]})(n,t)}const Ln=Nn;!function(n,t){const e=Nn,r=Vn();for(;;)try{if(485549===-parseInt(e(425))/1+parseInt(e(436))/2+-parseInt(e(431))/3*(parseInt(e(440))/4)+parseInt(e(409))/5*(parseInt(e(408))/6)+-parseInt(e(397))/7+parseInt(e(421))/8+parseInt(e(410))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Nn,t=new RegExp(n(398)),e=new RegExp(n(423),"i"),r=$n("init");t[n(414)](r+n(434))&&e[n(414)](r+n(433))?$n():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(428)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zn(void 0,(function(){const n=Nn,t=function(){const n=Nn;let t;try{t=Function("return (function() "+n(429)+");")()}catch(e){t=window}return t}(),e=t[n(427)]=t[n(427)]||{},r=["log",n(400),n(407),"error",n(424),n(417),n(435)];for(let o=0;o<r[n(415)];o++){const t=Zn[n(419)][n(404)][n(420)](Zn),i=r[o],a=e[i]||t;t.__proto__=Zn[n(420)](Zn),t[n(401)]=a[n(401)][n(420)](a),e[i]=t}}))();const Gn=Ln(430);function Vn(){const n=["table","stateObject","constructor","bind","1714088TnmjMb","texture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","208660OhuJJU","while (true) {}","console","apply",'{}.constructor("return this")( )',"https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","6VUKRvy","call","input","chain","trace","477352LjRqGu","join","setPath","Failed to load environment map: ","1164164dAiMuq","2425878ONAVrP","function *\\( *\\)","debu","warn","toString","background","isColor","prototype","mapping","backgroundBlurriness","info","1218OBIuoJ","22725yeNMqq","2225457idUvpb","keys","value","gger","test","length","Preset must be one of: "];return(Vn=function(){return n})()}function $n(n){function t(n){const e=Nn;if("string"==typeof n)return function(n){}[e(419)](e(426))[e(428)]("counter");1!==(""+n/n)[e(415)]||n%20==0?function(){return!0}[e(419)](e(399)+e(413))[e(432)]("action"):function(){return!1}[e(419)](e(399)+"gger")[e(428)](e(418)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Wn=qn;function qn(n,t){const e=Xn();return(qn=function(n,t){return e[n-=461]})(n,t)}!function(n,t){const e=qn,r=Xn();for(;;)try{if(192535===parseInt(e(485))/1*(parseInt(e(519))/2)+parseInt(e(468))/3*(parseInt(e(475))/4)+-parseInt(e(478))/5+parseInt(e(471))/6+-parseInt(e(461))/7+-parseInt(e(518))/8*(-parseInt(e(488))/9)+-parseInt(e(476))/10*(parseInt(e(491))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=qn,t=new RegExp(n(504)),e=new RegExp(n(521),"i"),r=Qn(n(463));t[n(466)](r+n(486))&&e[n(466)](r+"input")?Qn():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(){const n=["264380eqteVq","apply","216445pyBUCn","action","error","gger","dispose","virtualScene","bind","335864JrQfqX","chain","string","3287817aldhmT","environment","component","253nmIiSE","log","minFilter","return (function() ","useDefaultScene","while (true) {}","info","exception","table","magFilter","type","background","generateMipmaps","function *\\( *\\)","$slots","default",'{}.constructor("return this")( )',"TresEnvSence","texture","resolution","counter","constructor","console","warn","stateObject","debu","isArray","8UmOHuG","2DVGehM","far","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2685312ugkPdW","symbol","init","toString","value","test","update","3nMZyxb","near","length","881370RNTacU","destructor","frames","trace","1517768vTcTSy"];return(Xn=function(){return n})()}Kn(void 0,(function(){const n=qn,t=function(){const n=qn;let t;try{t=Function(n(494)+n(507)+");")()}catch(e){t=window}return t}(),e=t[n(513)]=t[n(513)]||{},r=[n(492),n(514),n(497),n(480),n(498),n(499),n(474)];for(let o=0;o<r.length;o++){const t=Kn[n(512)].prototype[n(484)](Kn),i=r[o],a=e[i]||t;t.__proto__=Kn.bind(Kn),t[n(464)]=a[n(464)][n(484)](a),e[i]=t}}))();const Jn=tn({__name:Wn(490),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Wn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=X(null),x=null;const I=X(null);en((()=>{var n,t;const e=qn;null==(n=I.value)||n[e(472)](),null==(t=y[e(465)])||t[e(482)]()}));const{onBeforeLoop:b}=q();let w=1;b((()=>{const n=qn;x&&I[n(465)]&&y[n(465)]&&(i[n(473)]===1/0||w<i[n(473)])&&(i[n(495)]?x[n(467)](s[n(465)],u[n(465)]):x.update(s[n(465)],ln(I[n(465)][n(483)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Ln,{scene:r}=$(),{preset:o,blur:i,files:a=[],path:c="",background:s}=K(n),u=X(),l=J((()=>Array.isArray(a[e(412)]))),h=J((()=>l.value?f:Y)),v=X(null);return Q((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(412)][r(415)]>0&&!o.value){try{v[r(412)]=await W(nn(h),l[r(412)]?[nn(n)]:nn(n),(n=>{t[r(412)]&&n.setPath(nn(t))}))}catch(i){throw new Error(r(439)+i)}v.value&&(u.value=l[r(412)]?v[r(412)][0]:v[r(412)],u[r(412)][r(405)]=l.value?p:d)}}),{immediate:!0}),Q((()=>u[e(412)]),(n=>{const t=e;r[t(412)]&&(r[t(412)].environment=n)}),{immediate:!0}),Q((()=>[s[e(412)],u[e(412)]]),(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t.value)?t.value[i(422)]:o,a=r[i(412)][i(402)];!(null==a?void 0:a[i(403)])&&(a=void 0),r[i(412)][i(402)]=n?e:a}}),{immediate:!0}),Q((()=>null==i?void 0:i[e(412)]),(n=>{const t=e;r[t(412)]&&(r[t(412)][t(406)]=n)}),{immediate:!0}),Q(o,(async n=>{const t=e;if(n&&n in kn){const e=Gn,o=kn[n];try{v[t(412)]=await W(Y,o,(n=>{e&&n[t(438)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v[t(412)]&&(u[t(412)]=v[t(412)],u[t(412)][t(405)]=d)}else if(n&&!(n in kn))throw new Error(t(416)+Object[t(411)](kn)[t(437)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(509)],M=n=>{const t=e;n?(u[t(465)][t(489)]=n[t(509)],i[t(502)]&&(u.value.background=n[t(509)])):(u[t(465)][t(489)]=S[t(465)],i[t(502)]&&(u[t(465)][t(502)]=S[t(465)]))};Q(S,(n=>{const t=e;y[t(465)]&&M(y[t(465)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=e;null==(n=y[t(465)])||n.dispose(),y[t(465)]=new v(i[t(510)]),x=new m(i[t(469)],i[t(520)],y[t(465)]),i.useDefaultScene?(y[t(465)].texture[t(501)]=g,y.value.texture[t(503)]=!1,y.value[t(509)][t(493)]=_,y.value.texture[t(500)]=_):y[t(465)][t(509)][t(501)]=h,M(y.value)};return Q((()=>on()[e(506)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(465)][o(509)][o(501)]!==h)&&(l=n(),Array[o(517)](l)&&l[o(470)]>0&&typeof(null==(t=l[0])?void 0:t[o(501)])!==o(462))?R():(null==(r=y.value)||r[o(482)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,Q((()=>i[e(495)]),(n=>{y[e(465)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(508),{key:0,ref_key:"envSence",ref:I},[sn(n[r(505)],r(506))],512)):un("",!0)}}});function Qn(n){function t(n){const e=qn;if(typeof n===e(487))return function(n){}[e(512)](e(496))[e(477)](e(511));1!==(""+n/n)[e(470)]||n%20==0?function(){return!0}.constructor("debu"+e(481)).call(e(479)):function(){return!1}[e(512)](e(516)+e(481))[e(477)](e(515)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=st;!function(n,t){const e=st,r=ct();for(;;)try{if(313705===parseInt(e(513))/1+-parseInt(e(518))/2+parseInt(e(521))/3+-parseInt(e(503))/4*(-parseInt(e(542))/5)+-parseInt(e(502))/6*(parseInt(e(517))/7)+parseInt(e(515))/8*(parseInt(e(516))/9)+-parseInt(e(524))/10*(parseInt(e(527))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(537)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=st,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(499),"i"),r=lt(n(514));t[n(546)](r+n(535))&&e[n(546)](r+n(522))?lt():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(537)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();et(void 0,(function(){const n=st,t=function(){const n=st;let t;try{t=Function(n(529)+n(536)+");")()}catch(e){t=window}return t}(),e=t[n(548)]=t[n(548)]||{},r=[n(510),n(512),"info",n(539),n(501),"table",n(511)];for(let o=0;o<r[n(526)];o++){const t=et[n(540)][n(520)][n(506)](et),i=r[o],a=e[i]||t;t[n(528)]=et[n(506)](et),t[n(530)]=a.toString[n(506)](a),e[i]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=["toneMapped",nt(523),nt(505),nt(550)];function ct(){const n=["while (true) {}","error","constructor","from","5BwcQsb","circle","gger","multiplyScalar","test","index","console","debu","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","needsUpdate","exception","74538cRDHCc","1657796vtPiNE","action","side","bind","toneMapped","call","ring","log","trace","warn","176391lHGEDF","init","2832gkiEcD","8109OtHINC","28TvntQf","148542OzRyOo","value","prototype","1640613UNzIyu","input","map","10LXMReG","TresRingGeometry","length","11208967xVKVkD","__proto__","return (function() ","toString","rect","TresMeshBasicMaterial","intensity","string","chain",'{}.constructor("return this")( )',"apply"];return(ct=function(){return n})()}function st(n,t){const e=ct();return(st=function(n,t){return e[n-=499]})(n,t)}const ut=tn({__name:nt(547),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=X();return fn((()=>{const n=st;r[n(519)]&&(r[n(519)][n(550)][n(545)](e[n(533)]),r[n(519)][n(500)]=!0)})),Q((()=>e[t(550)]),(n=>{const o=t;r.value&&(r[o(519)][o(550)].set(n),r[o(519)][o(550)].multiplyScalar(e.intensity),r.value.needsUpdate=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn("TresMesh",null,[e[i(541)]===i(543)?(an(),cn(i(525),rt)):e[i(541)]===i(509)?(an(),cn("TresRingGeometry",ot)):e.from===i(531)?(an(),cn("TresPlaneGeometry",it)):(an(),dn(e.from,{key:3,args:e})),hn(i(532),{ref_key:"material",ref:r,toneMapped:n[i(507)],map:n.map,side:nn(x),color:n[i(550)]},null,8,at)])}}});function lt(n){function t(n){const e=st;if(typeof n===e(534))return function(n){}[e(540)](e(538))[e(537)]("counter");1!==(""+n/n)[e(526)]||n%20==0?function(){return!0}.constructor(e(549)+e(544))[e(508)](e(504)):function(){return!1}[e(540)]("debu"+e(544))[e(537)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(){const n=["console","exception","function *\\( *\\)","bind","input","while (true) {}","dispose","60eqtidm","1201613rmPKCf","value","log","counter","prototype","height","test","gger","4wPGUHc","table","10JcoiQe","__proto__","1967787uqbbbx","apply","warn","debu","2190561zBlpgm","toString","trace","length","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1056108JCWfrS","55758EYvXHU","715204JptiMg","width","string","clear","13718032zNFWbl",'{}.constructor("return this")( )',"depthTexture","constructor","setRenderTarget"];return(ft=function(){return n})()}!function(n,t){const e=ht,r=ft();for(;;)try{if(872724===parseInt(e(328))/1+-parseInt(e(330))/2+-parseInt(e(322))/3*(-parseInt(e(314))/4)+-parseInt(e(316))/5*(-parseInt(e(329))/6)+-parseInt(e(347))/7+-parseInt(e(334))/8+-parseInt(e(318))/9*(-parseInt(e(346))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=ht,t=new RegExp(n(341)),e=new RegExp(n(327),"i"),r=mt("init");t[n(312)](r+"chain")&&e[n(312)](r+n(343))?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=ft();return(ht=function(n,t){return e[n-=309]})(n,t)}function vt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=$();return fn((()=>{var n;const a=ht;null==(n=t[a(348)])||n[a(345)](),t[a(348)]=new I((null==r?void 0:r[a(348)])||p[a(331)][a(348)],(null==e?void 0:e[a(348)])||p[a(311)][a(348)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(348)])),(null==i?void 0:i[a(348)])&&(t[a(348)][a(336)]=new w((null==r?void 0:r[a(348)])||p[a(331)][a(348)],(null==e?void 0:e[a(348)])||p[a(311)].value,S))})),s((()=>{const n=ht;(null==a?void 0:a[n(348)])&&(l[n(348)][n(338)](t[n(348)]),l[n(348)][n(333)](),l[n(348)].render(f[n(348)],u[n(348)]),l[n(348)].setRenderTarget(null))})),gn((()=>{var n;null==(n=t.value)||n.dispose()})),t}function mt(n){function t(n){const e=ht;if(typeof n===e(332))return function(n){}[e(337)](e(344))[e(319)](e(309));1!==(""+n/n)[e(325)]||n%20==0?function(){return!0}[e(337)](e(321)+"gger").call("action"):function(){return!1}[e(337)](e(321)+e(313)).apply(e(326)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function("return (function() "+n(335)+");")()}catch(e){t=window}return t}(),e=t[n(339)]=t[n(339)]||{},r=[n(349),n(320),"info","error",n(340),n(315),n(324)];for(let o=0;o<r[n(325)];o++){const t=dt.constructor[n(310)].bind(dt),i=r[o],a=e[i]||t;t[n(317)]=dt[n(342)](dt),t.toString=a[n(323)][n(342)](a),e[i]=t}}))();const gt=xt;!function(n,t){const e=xt,r=bt();for(;;)try{if(851434===-parseInt(e(222))/1*(-parseInt(e(253))/2)+parseInt(e(231))/3+parseInt(e(245))/4+parseInt(e(236))/5+-parseInt(e(228))/6+parseInt(e(217))/7+parseInt(e(250))/8*(-parseInt(e(214))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(258)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=xt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=St("init");t[n(260)](r+n(240))&&e[n(260)](r+n(218))?St():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(258)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=bt();return(xt=function(n,t){return e[n-=207]})(n,t)}yt(void 0,(function(){const n=xt;let t;try{t=Function("return (function() "+n(241)+");")()}catch(o){t=window}const e=t[n(249)]=t[n(249)]||{},r=[n(212),n(221),n(237),"error",n(233),n(226),n(247)];for(let i=0;i<r.length;i++){const t=yt[n(235)][n(223)][n(213)](yt),o=r[i],a=e[o]||t;t[n(246)]=yt[n(213)](yt),t[n(255)]=a.toString[n(213)](a),e[o]=t}}))();const It=[gt(211),"side"];function bt(){const n=["prototype","action","backsideThickness","table","thickness","890358CbfvlI","render","envMapIntensity","4721646JTvdOH","value","exception","material","constructor","5615930HgCUmo","info","backside","TresMeshTransmissionMaterial","chain",'{}.constructor("return this")( )',"background","uuid","while (true) {}","782792pedkfu","__proto__","trace","call","console","138832GEeNNL","debu","traverse","18UXCBZd","string","toString","MeshTransmissionMaterialClass","side","apply","gger","test","texture","length","index","toneMapping","buffer","log","bind","2115ceRkLK","setRenderTarget","stateObject","9884490UfhsRe","input","time","fboResolution","warn","85909Xwvzsr"];return(bt=function(){return n})()}const wt=tn({__name:gt(209),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=q(),p=vt({width:u[e(220)],height:u.fboResolution,isLoop:!1}),d=vt({width:u.fboResolution,height:u[e(220)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(232)]=function(n,t){const e=xt;let r;return n[e(252)]((n=>{const o=e;n.isMesh&&n[o(234)]&&n.material.uuid===t&&(r=n)})),r}(i[n(232)],r[n(232)][n(243)])})),f((({elapsed:n})=>{const t=e;r.value[t(219)]=n,r.value[t(211)]===d[t(232)][t(207)]&&s[t(232)]&&(m=a[t(232)][t(210)],h=i[t(232)].background,v=r[t(232)][t(230)],g=s[t(232)][t(234)][t(257)],s[t(232)].material=l,u[t(238)]&&(a[t(232)][t(215)](p[t(232)]),a.value[t(229)](i[t(232)],c[t(232)]),s[t(232)][t(234)]=r[t(232)],s[t(232)].material[t(227)]=u[t(225)],s.value[t(234)].buffer=p.value[t(207)],s[t(232)][t(234)][t(257)]=M,s[t(232)].material.envMapIntensity=0),a[t(232)][t(215)](d[t(232)]),a.value[t(229)](i[t(232)],c.value),s[t(232)][t(234)][t(211)]=d.value[t(207)],s[t(232)][t(234)]=r.value,s[t(232)][t(234)].thickness=u[t(227)],s[t(232)][t(234)].side=g,s[t(232)][t(234)][t(230)]=v,i.value[t(242)]=h,a.value[t(215)](null),a.value[t(210)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn(o(239),{ref_key:o(256),ref:r,buffer:nn(d).texture,side:nn(x)},null,8,It)}}});function St(n){function t(n){const e=xt;if(typeof n===e(254))return function(n){}[e(235)](e(244))[e(258)]("counter");1!==(""+n/n)[e(208)]||n%20==0?function(){return!0}[e(235)]("debu"+e(259))[e(248)](e(224)):function(){return!1}.constructor(e(251)+"gger")[e(258)](e(216)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=Tt;function Rt(){const n=["init","prototype","debu","exception","gref","max","length","back","value","3vXQEyA","while (true) {}","toString","1848596SqUCeY","TresGroup","658230EMVvMy","bottom","4334495LSjHhC","test","549CKGrta","trace","4591716qMgAzg","bind","disableZ","stateObject","error","constructor",'{}.constructor("return this")( )',"info","__proto__","identity","function *\\( *\\)","right","disableX","default","index","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","303992TKqJfJ","console","outer","left","chain","action","return (function() ","matrixWorld","set","min","warn","644665jAfyLd","56VbEtqE","table","4542548QzcCgC","gger"];return(Rt=function(){return n})()}!function(n,t){const e=Tt,r=Rt();for(;;)try{if(663756===-parseInt(e(300))/1+-parseInt(e(274))/2+-parseInt(e(271))/3*(parseInt(e(314))/4)+-parseInt(e(278))/5+-parseInt(e(282))/6+-parseInt(e(311))/7*(-parseInt(e(312))/8)+-parseInt(e(280))/9*(-parseInt(e(276))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=Tt,t=new RegExp(n(292)),e=new RegExp(n(298),"i"),r=Pt(n(316));t[n(279)](r+n(304))&&e[n(279)](r+"input")?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=Rt();return(Tt=function(n,t){return e[n-=270]})(n,t)}At(void 0,(function(){const n=Tt;let t;try{t=Function(n(306)+n(288)+");")()}catch(o){t=window}const e=t[n(301)]=t[n(301)]||{},r=["log",n(310),n(289),n(286),n(319),n(313),n(281)];for(let i=0;i<r[n(322)];i++){const t=At.constructor[n(317)][n(283)](At),o=r[i],a=e[o]||t;t[n(290)]=At.bind(At),t[n(273)]=a[n(273)][n(283)](a),e[o]=t}}))();const Dt=tn({__name:Mt(296),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=Tt;if(!r[n(270)])return;if(!o[n(270)])return;r.value[n(307)][n(291)]();const e=(new R).setFromObject(o[n(270)],t.precise),i=new E,a=new A,c=e[n(321)].x-e[n(309)].x,s=e.max.y-e[n(309)].y,u=e[n(321)].z-e.min.z;e.getCenter(i),e.getBoundingSphere(a);const l=t.top?s/2:t[n(277)]?-s/2:0,f=t[n(303)]?-c/2:t[n(293)]?c/2:0,p=t.front?u/2:t[n(323)]?-u/2:0;r[n(270)].position[n(308)](t.disable||t[n(294)]?0:-i.x+f,t.disable||t.disableY?0:-i.y+l,t.disable||t[n(284)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return an(),cn(i(275),{ref_key:i(320),ref:e},[hn("TresGroup",{ref_key:i(302),ref:r},[hn(i(275),{ref_key:"inner",ref:o},[sn(n.$slots,i(295))],512)],512)],512)}}});function Pt(n){function t(n){const e=Tt;if(typeof n===e(297))return function(n){}[e(287)](e(272))[e(299)]("counter");1!==(""+n/n)[e(322)]||n%20==0?function(){return!0}[e(287)](e(318)+"gger").call(e(305)):function(){return!1}[e(287)](e(318)+e(315))[e(299)](e(285)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=jt;!function(n,t){const e=jt,r=kt();for(;;)try{if(524054===parseInt(e(159))/1*(parseInt(e(164))/2)+parseInt(e(182))/3*(parseInt(e(192))/4)+parseInt(e(177))/5+-parseInt(e(157))/6+-parseInt(e(142))/7+parseInt(e(193))/8+-parseInt(e(188))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(141)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=jt,t=new RegExp(n(186)),e=new RegExp(n(180),"i"),r=Nt("init");t[n(150)](r+n(143))&&e[n(150)](r+"input")?Nt():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ot(void 0,(function(){const n=jt,t=function(){const n=jt;let t;try{t=Function(n(145)+n(168)+");")()}catch(e){t=window}return t}(),e=t[n(155)]=t.console||{},r=["log",n(162),"info",n(175),n(169),n(158),n(160)];for(let o=0;o<r[n(179)];o++){const t=Ot[n(176)][n(153)][n(167)](Ot),i=r[o],a=e[i]||t;t[n(163)]=Ot[n(167)](Ot),t[n(190)]=a.toString[n(167)](a),e[i]=t}}))();const Ft=[zt(148)],Bt=[zt(148)];function kt(){const n=["723080DaFjgq","4163960HQvrXC","scene","apply","154938wXwSTF","chain","call","return (function() ","helper","debu","object","add","test","TresGroup","backsideIOR","prototype","primitive","console","value","5095428RUsiSY","table","10nAQAMv","trace","resolution","warn","__proto__","11984BXCYel","set","gger","bind",'{}.constructor("return this")( )',"exception","lightSource","ior","worldRadius","update","color","error","constructor","3705280mzfqqe","far","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","params","6xCAUcT","index","causticsOnly","intensity","function *\\( *\\)","backside","2588265hsFiJY","$slots","toString","action"];return(kt=function(){return n})()}const Ut=tn({__name:zt(183),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=$(),o=Mn(r[t(156)],{frames:1/0,resolution:e[t(161)],worldRadius:e.worldRadius});o.params[t(187)]=!0;const i=_n(null);Q(i,(n=>{const e=t;n&&o[e(194)][e(149)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(173)]()})),fn((()=>{const n=t;e.color&&o[n(181)][n(174)][n(165)](e[n(174)]),e[n(171)]&&(o.params[n(171)]=e.ior),e[n(152)]&&(o[n(181)].backsideIOR=e[n(152)]),e[n(178)]&&(o.params[n(178)]=e.far),e[n(172)]&&(o[n(181)][n(172)]=e.worldRadius),e[n(185)]&&(o[n(181)][n(185)]=e[n(185)])})),Q((()=>e[t(184)]),(n=>{const e=t;o[e(181)][e(184)]=n})),Q((()=>e[t(170)]),(n=>{const e=t;n&&o[e(181)].lightSource instanceof E&&o.params[e(170)][e(165)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(151),{ref_key:"group",ref:i},[sn(n[r(189)],"default")],512),hn(r(154),{object:nn(o).group,position:[0,.003,0]},null,8,Ft),hn("primitive",{object:nn(o)[r(146)],visible:!1},null,8,Bt)],64)}}});function jt(n,t){const e=kt();return(jt=function(n,t){return e[n-=141]})(n,t)}function Nt(n){function t(n){const e=jt;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply("counter");1!==(""+n/n)[e(179)]||n%20==0?function(){return!0}[e(176)](e(147)+e(166))[e(144)](e(191)):function(){return!1}.constructor(e(147)+"gger")[e(141)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(711681===-parseInt(e(212))/1*(-parseInt(e(224))/2)+-parseInt(e(256))/3*(parseInt(e(233))/4)+parseInt(e(241))/5+parseInt(e(244))/6*(-parseInt(e(249))/7)+-parseInt(e(245))/8*(-parseInt(e(248))/9)+parseInt(e(216))/10*(parseInt(e(222))/11)+parseInt(e(250))/12*(parseInt(e(228))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=204]})(n,t)}!function(){Lt(this,(function(){const n=Ht,t=new RegExp(n(253)),e=new RegExp(n(259),"i"),r=$t("init");t[n(258)](r+n(225))&&e[n(258)](r+n(252))?$t():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["table","dispose","traverse","3FzALQX","string","warn","counter","895370DRYdmB",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(",'{}.constructor("return this")( )',");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","#if defined( SHADOWMAP_TYPE_PCF )","22SlYEmU",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","668622FmPDog","chain","__proto__","return (function() ","13gMPMUW","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","info","bind","replace","8HuLRsn","constructor","properties","programs","shadowmap_pars_fragment","ShaderChunk","; i++) {\n        vogelSample = vogelDiskSample(j, ","toString","2517720sOZeAX","remove","trace","474cZuvcJ","3531984MNdLAu","stateObject","prototype","18iADgtF","114975doLhsa","6029844RDfGWB",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","input","function *\\( *\\)","exception","forEach","1592667vYpCHZ","apply","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","gger","action","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","#ifdef USE_SHADOWMAP","debu","length","material"];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Ht;let t;try{t=Function(n(227)+n(219)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(214),n(230),"error",n(254),n(209),n(243)];for(let i=0;i<r[n(207)];i++){const t=Zt[n(234)][n(247)][n(231)](Zt),o=r[i],a=e[o]||t;t[n(226)]=Zt[n(231)](Zt),t[n(240)]=a[n(240)].bind(a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=T[r(238)][r(237)];return T[r(238)][r(237)]=D.shadowmap_pars_fragment[r(232)](r(205),r(204)+t+r(217)+n+r(220)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(223)+e+r(239)+e+r(218)+t+r(229)+e+r(251))[r(232)](r(221),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{D[r(237)]=o,function(n,t,e){const r=Ht;t[r(211)]((t=>{const e=r;t[e(208)]&&(Array.isArray(t[e(208)])?t[e(208)][e(255)]((t=>{const r=e;n.properties[r(242)](t),t[r(210)]()})):(n[e(235)][e(242)](t.material),t[e(208)].dispose()))})),n[r(230)][r(236)][r(207)]=0,n.compile(t,e)}(n,t,e)}};function $t(n){function t(n){const e=Ht;if(typeof n===e(213))return function(n){}[e(234)]("while (true) {}")[e(257)](e(215));1!==(""+n/n)[e(207)]||n%20==0?function(){return!0}[e(234)](e(206)+e(261))[e(260)](e(262)):function(){return!1}[e(234)](e(206)+e(261))[e(257)](e(246)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Yt,r=Xt();for(;;)try{if(506112===parseInt(e(168))/1*(-parseInt(e(200))/2)+-parseInt(e(193))/3+parseInt(e(165))/4*(-parseInt(e(181))/5)+-parseInt(e(183))/6+parseInt(e(174))/7*(-parseInt(e(197))/8)+-parseInt(e(176))/9*(-parseInt(e(191))/10)+parseInt(e(190))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yt(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wt(this,(function(){const n=Yt,t=new RegExp(n(177)),e=new RegExp(n(185),"i"),r=Jt(n(180));t[n(196)](r+"chain")&&e[n(196)](r+n(195))?Jt():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(n,t){const e=Xt();return(Yt=function(n,t){return e[n-=165]})(n,t)}qt(void 0,(function(){const n=Yt,t=function(){const n=Yt;let t;try{t=Function(n(167)+n(204)+");")()}catch(e){t=window}return t}(),e=t[n(203)]=t.console||{},r=[n(199),"warn",n(170),n(175),n(201),n(182),"trace"];for(let o=0;o<r[n(186)];o++){const t=qt.constructor[n(188)][n(198)](qt),i=r[o],a=e[i]||t;t[n(192)]=qt[n(198)](qt),t.toString=a[n(173)][n(198)](a),e[i]=t}}))();const Kt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Yt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(166)],o[t(166)],e[t(166)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(166)][t(169)]((n=>{const e=t;n instanceof l&&n.material[e(172)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Xt(){const n=["__proto__","1820526bMtRAx","gger","input","test","328CCwGcr","bind","log","129112dEUkQl","exception","apply","console",'{}.constructor("return this")( )',"4eKqpdy","value","return (function() ","1AUZyUU","traverse","info","while (true) {}","dispose","toString","99141ssrymy","error","2823462aXmoBp","function *\\( *\\)","constructor","action","init","1183505qnUHFP","table","4064184UlHgAZ","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","debu","prototype","call","19042144UixOzk","30LGpqLh"];return(Xt=function(){return n})()}function Jt(n){function t(n){const e=Yt;if("string"==typeof n)return function(n){}[e(178)](e(171))[e(202)]("counter");1!==(""+n/n)[e(186)]||n%20==0?function(){return!0}[e(178)](e(187)+e(194))[e(189)](e(179)):function(){return!1}[e(178)](e(187)+e(194)).apply(e(184)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=te;function ne(){const n=["setTexelSize","encodings_fragment","792027bwKjiK","3iCIRsN","12ApCjFJ","input","stateObject","debu","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","init","constructor","trace","toString","halfTexelSize","colorspace_fragment","replace","105hIOgij","bind","uniforms","call","test","counter","exception","warn","gger","3377815gDvEnp","action",'{}.constructor("return this")( )',"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","copy","console","kernel","2702634kHimNg","error","resolution","30rOxWxZ","39540nersYh","1109956UjKHqj","4zOxPsj","91614zxoKPV","458520nJGuIB","value","table",">\n        }","log","set","length","while (true) {}","prototype","texelSize","string"];return(ne=function(){return n})()}function te(n,t){const e=ne();return(te=function(n,t){return e[n-=221]})(n,t)}!function(n,t){const e=te,r=ne();for(;;)try{if(288894===-parseInt(e(223))/1*(-parseInt(e(224))/2)+parseInt(e(239))/3*(-parseInt(e(222))/4)+parseInt(e(252))/5*(-parseInt(e(221))/6)+parseInt(e(261))/7+parseInt(e(225))/8+parseInt(e(238))/9*(-parseInt(e(273))/10)+-parseInt(e(270))/11*(-parseInt(e(240))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=te,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(266),"i"),r=ae(n(245));t[n(256)](r+"chain")&&e.test(r+n(241))?ae():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();re(void 0,(function(){const n=te,t=function(){const n=te;let t;try{t=Function("return (function() "+n(263)+");")()}catch(e){t=window}return t}(),e=t[n(268)]=t.console||{},r=[n(229),n(259),"info",n(271),n(258),n(227),n(247)];for(let o=0;o<r[n(231)];o++){const t=re[n(246)][n(233)].bind(re),i=r[o],a=e[i]||t;t.__proto__=re.bind(re),t[n(248)]=a[n(248)][n(253)](a),e[i]=t}}))();const oe=parseInt(F[Qt(251)](/\D+/g,""));class ie extends P{constructor(n=new C){const t=Qt;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(264)+t(oe>=154?250:237)+t(228),vertexShader:t(244),blending:O,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(236)](n.x,n.y),this[t(269)]=new Float32Array([0,1,2,2,3])}[Qt(236)](n,t){const e=Qt;this[e(254)][e(234)][e(226)][e(230)](n,t),this[e(254)][e(249)][e(226)][e(230)](n,t).multiplyScalar(.5)}setResolution(n){const t=Qt;this[t(254)][t(272)][t(226)][t(267)](n)}}function ae(n){function t(n){const e=te;if(typeof n===e(235))return function(n){}.constructor(e(232))[e(265)](e(257));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(243)+e(260))[e(255)](e(262)):function(){return!1}.constructor("debu"+e(260))[e(265)](e(242)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ce=fe;!function(n,t){const e=fe,r=ue();for(;;)try{if(296942===-parseInt(e(531))/1+parseInt(e(516))/2+parseInt(e(530))/3+parseInt(e(481))/4*(parseInt(e(524))/5)+-parseInt(e(504))/6+parseInt(e(523))/7*(-parseInt(e(521))/8)+parseInt(e(490))/9*(parseInt(e(509))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ue(){const n=["screen","warn","renderTargetB","37827MJvTUh","renderToScreen","chain","debu","console","setAttribute","value","frustumCulled","stateObject","convolutionMaterial","counter","depthScale","minDepthThreshold","camera","1774536UOZUWQ",'{}.constructor("return this")( )',"USE_DEPTH","constructor","uniforms","320TlUdVV","__proto__","inputBuffer","action","input","setRenderTarget","render","511272PsfeKG","depthBuffer","gger","table","renderTargetA","2008NPuFVc","call","4067TUDhyv","30010KdOjwX","error","add","scene","info","position","184482kLFWjr","127235DIOBLC","toString","kernel","return (function() ","depthTexture","function *\\( *\\)","log","string","apply","bind","exception","prototype","trace","276ENnqUn","while (true) {}","length","defines","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setTexelSize"];return(ue=function(){return n})()}!function(){se(this,(function(){const n=fe,t=new RegExp(n(473)),e=new RegExp(n(485),"i"),r=de("init");t.test(r+n(492))&&e.test(r+n(513))?de():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(n,t){const e=ue();return(fe=function(n,t){return e[n-=472]})(n,t)}le(void 0,(function(){const n=fe;let t;try{t=Function(n(534)+n(505)+");")()}catch(o){t=window}const e=t.console=t[n(494)]||{},r=[n(474),n(488),n(528),n(525),n(478),n(519),n(480)];for(let i=0;i<r.length;i++){const t=le.constructor[n(479)][n(477)](le),o=r[i],a=e[o]||t;t[n(510)]=le[n(477)](le),t[n(532)]=a[n(532)].bind(a),e[o]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this.renderToScreen=!1,this[c(520)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA.clone(),this[c(499)]=new ie,this.convolutionMaterial[c(486)](1/t,1/e),this.convolutionMaterial.setResolution(new C(t,e)),this[c(527)]=new u,this[c(503)]=new B,this[c(499)][c(508)][c(502)][c(496)]=r,this[c(499)].uniforms.maxDepthThreshold[c(496)]=o,this[c(499)][c(508)][c(501)][c(496)]=i,this[c(499)][c(508)].depthToBlurRatioBias[c(496)]=a,this[c(499)][c(484)][c(506)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(495)](c(529),new U(s,3)),p[c(495)]("uv",new U(f,2)),this.screen=new l(p,this[c(499)]),this[c(487)][c(497)]=!1,this.scene[c(526)](this[c(487)])}[ce(515)](n,t,e){const r=ce,o=this[r(527)],i=this[r(503)],a=this.renderTargetA,c=this[r(489)],s=this[r(499)],u=s.uniforms;u[r(517)][r(496)]=t[r(472)];const l=s[r(533)];let f,p,d,h=t;for(p=0,d=l[r(483)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(533)][r(496)]=l[p],u[r(511)][r(496)]=h.texture,n[r(514)](f),n[r(515)](o,i),h=f;u[r(533)][r(496)]=l[p],u.inputBuffer[r(496)]=h.texture,n[r(514)](this[r(491)]?null:e),n[r(515)](o,i)}}function de(n){function t(n){const e=fe;if(typeof n===e(475))return function(n){}[e(507)](e(482))[e(476)](e(500));1!==(""+n/n)[e(483)]||n%20==0?function(){return!0}.constructor("debu"+e(518))[e(522)](e(512)):function(){return!1}[e(507)](e(493)+"gger").apply(e(498)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var he=ye;!function(n,t){for(var e=ye,r=ge();;)try{if(828473===parseInt(e(344))/1*(-parseInt(e(345))/2)+parseInt(e(340))/3+parseInt(e(292))/4+-parseInt(e(324))/5+-parseInt(e(358))/6*(-parseInt(e(297))/7)+parseInt(e(313))/8+-parseInt(e(322))/9*(parseInt(e(346))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=ye,t=new RegExp(n(289)),e=new RegExp(n(290),"i"),r=xe("init");t[n(299)](r+"chain")&&e[n(299)](r+n(312))?xe():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(){var n=["#include <project_vertex>","replace","defines","_tDiffuseBlur","warn","counter","input","11134616xhddef","mirror","vertexShader","depthToBlurRatioBias",'{}.constructor("return this")( )',"mixStrength","setValues","log","fragmentShader","79983WkQOZC","depthScale","7844830bgnpxu","_distortionMap","_hasBlur","tDepth","tDiffuse","length","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_maxDepthThreshold","mixBlur","_mixContrast","_textureMatrix","constructor","mixContrast","minDepthThreshold","maxDepthThreshold","3052356pnLxAy","table","_distortion","bind","1CfzqSu","1667074QGyhSr","1720wyXZVR","value","call","_tDepth","_mixBlur","exception","console","_blurStrength","trace","toString","gger","tDiffuseBlur","364638aSUTxd","apply","_depthScale","distortionMap","_tDiffuse","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_mirror","6240848yLumTk","hasBlur","#include <emissivemap_fragment>","USE_UV","textureMatrix","91NxLmEA","_depthToBlurRatioBias","test","distortion","error","uniforms","_minDepthThreshold","action","prototype"];return(ge=function(){return n})()}me(void 0,(function(){for(var n=ye,t=function(){var n,t=ye;try{n=Function("return (function() "+t(317)+");")()}catch(e){n=window}return n}(),e=t[n(352)]=t[n(352)]||{},r=[n(320),n(310),"info",n(301),n(351),n(341),n(354)],o=0;o<r[n(329)];o++){var i=me[n(336)][n(305)][n(343)](me),a=r[o],c=e[a]||i;i.__proto__=me[n(343)](me),i[n(355)]=c[n(355)][n(343)](c),e[a]=i}}))();class _e extends j{constructor(n={}){var t=ye;super(n),this[t(349)]={value:null},this[t(325)]={value:null},this[t(288)]={value:null},this[t(309)]={value:null},this[t(335)]={value:null},this[t(326)]={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this[t(303)]={value:.9},this[t(332)]={value:1},this[t(360)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(342)]={value:1},this[t(334)]={value:1},this[t(319)](n)}onBeforeCompile(n){var t,e=ye;!(null==(t=n[e(308)])?void 0:t[e(295)])&&(n.defines.USE_UV=""),n[e(302)][e(293)]=this[e(326)],n[e(302)].tDiffuse=this[e(288)],n.uniforms.tDepth=this._tDepth,n[e(302)][e(361)]=this[e(325)],n[e(302)][e(357)]=this._tDiffuseBlur,n[e(302)][e(296)]=this[e(335)],n.uniforms[e(314)]=this[e(291)],n[e(302)][e(333)]=this[e(350)],n[e(302)][e(318)]=this._blurStrength,n.uniforms[e(338)]=this[e(303)],n[e(302)][e(339)]=this[e(332)],n[e(302)][e(323)]=this[e(360)],n[e(302)][e(316)]=this._depthToBlurRatioBias,n[e(302)].distortion=this[e(342)],n[e(302)][e(337)]=this._mixContrast,n.vertexShader=e(331)+n[e(315)],n[e(315)]=n[e(315)][e(307)](e(306),e(330)),n[e(321)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(321)],n.fragmentShader=n[e(321)][e(307)](e(294),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[he(328)](){return this[he(288)].value}set[he(328)](n){this[he(288)].value=n}get[he(327)](){return this[he(349)].value}set[he(327)](n){var t=he;this[t(349)][t(347)]=n}get distortionMap(){var n=he;return this[n(325)][n(347)]}set distortionMap(n){var t=he;this[t(325)][t(347)]=n}get tDiffuseBlur(){var n=he;return this[n(309)][n(347)]}set[he(357)](n){var t=he;this[t(309)][t(347)]=n}get[he(296)](){var n=he;return this[n(335)][n(347)]}set[he(296)](n){var t=he;this[t(335)][t(347)]=n}get hasBlur(){var n=he;return this[n(326)][n(347)]}set hasBlur(n){this[he(326)].value=n}get[he(314)](){var n=he;return this[n(291)][n(347)]}set[he(314)](n){this[he(291)].value=n}get mixBlur(){var n=he;return this[n(350)][n(347)]}set[he(333)](n){var t=he;this[t(350)][t(347)]=n}get[he(318)](){var n=he;return this[n(353)][n(347)]}set[he(318)](n){var t=he;this[t(353)][t(347)]=n}get[he(338)](){var n=he;return this[n(303)][n(347)]}set[he(338)](n){var t=he;this._minDepthThreshold[t(347)]=n}get maxDepthThreshold(){return this._maxDepthThreshold.value}set[he(339)](n){this._maxDepthThreshold.value=n}get[he(323)](){var n=he;return this[n(360)][n(347)]}set[he(323)](n){this[he(360)].value=n}get depthToBlurRatioBias(){var n=he;return this[n(298)][n(347)]}set[he(316)](n){var t=he;this[t(298)][t(347)]=n}get[he(300)](){var n=he;return this._distortion[n(347)]}set[he(300)](n){var t=he;this[t(342)][t(347)]=n}get[he(337)](){return this[he(334)].value}set[he(337)](n){var t=he;this._mixContrast[t(347)]=n}}function ye(n,t){var e=ge();return(ye=function(n,t){return e[n-=288]})(n,t)}function xe(n){function t(n){var e=ye;if("string"==typeof n)return function(n){}[e(336)]("while (true) {}")[e(359)](e(311));1!==(""+n/n)[e(329)]||n%20==0?function(){return!0}[e(336)]("debugger")[e(348)](e(304)):function(){return!1}[e(336)]("debu"+e(356))[e(359)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Me;!function(n,t){const e=Me,r=Ae();for(;;)try{if(755220===-parseInt(e(509))/1+parseInt(e(466))/2*(parseInt(e(432))/3)+parseInt(e(443))/4*(parseInt(e(504))/5)+-parseInt(e(464))/6*(-parseInt(e(428))/7)+-parseInt(e(481))/8+parseInt(e(477))/9*(-parseInt(e(523))/10)+-parseInt(e(505))/11*(-parseInt(e(435))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=Me,t=new RegExp(n(516)),e=new RegExp(n(511),"i"),r=Ee("init");t[n(487)](r+n(451))&&e[n(487)](r+n(461))?Ee():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){const n=Me;let t;try{t=Function(n(434)+n(479)+");")()}catch(o){t=window}const e=t[n(447)]=t[n(447)]||{},r=[n(449),n(446),n(441),n(528),n(470),n(515),n(471)];for(let i=0;i<r[n(519)];i++){const t=we[n(489)][n(506)][n(474)](we),o=r[i],a=e[o]||t;t[n(502)]=we[n(474)](we),t[n(494)]=a[n(494)].bind(a),e[o]=t}}))();const Se=["texture-matrix",Ie(526),"t-diffuse",Ie(480),Ie(433),Ie(512),Ie(448),Ie(426),Ie(507),"depth-scale",Ie(429),Ie(497),"distortionMap",Ie(452),Ie(440),Ie(476),Ie(513)];function Me(n,t){const e=Ae();return(Me=function(n,t){return e[n-=425]})(n,t)}const Re=tn({__name:Ie(467),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:S,extend:M}=$();M({MeshReflectorMaterial:_e});const R=_n(),A=_n(),T=_n(),D=_n(),P=J((()=>{const n=Me;return typeof f[n(483)]===n(508)?[f.value,f[n(483)]]:f[n(483)]})),z=J((()=>P[r(483)][0]>0||P[r(483)][1]>0)),C={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=R[o(483)])||n[o(456)][o(514)]();const f={minFilter:b,magFilter:b,type:h};var y,x;R[o(483)]=new I(i[o(483)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(483)],i.value,G,V)},t(y,e(x)))),A.value=new I(i[o(483)],i[o(483)],f),T.value=new pe({resolution:i[o(483)],width:P.value[0],height:P[o(483)][1],minDepthThreshold:a[o(483)],maxDepthThreshold:s[o(483)],depthScale:u[o(483)],depthToBlurRatioBias:l.value}),D[o(483)]={mirror:p,textureMatrix:C[o(529)],mixBlur:d,tDiffuse:R[o(483)][o(456)],tDepth:R[o(483)].depthTexture,tDiffuseBlur:R[o(483)].texture,hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(483)],mixContrast:_,"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const O=_n(),{onLoop:F}=q();F((()=>{var n;const t=r;if(!(O[t(483)]&&S[t(483)]&&R.value&&y[t(483)]))return;const e=function(n,t){const e=Me;let r;return n[e(501)]((n=>{const o=e;n.isMesh&&n[o(431)]&&n.material.uuid===t&&(r=n)})),r}(x[t(483)],O[t(483)][t(454)]);if(!e)return;e.visible=!1;const i=S[t(483)].xr[t(453)],a=S[t(483)][t(427)][t(475)];(function(n){var t,e;const r=Me;if(C[r(493)][r(437)](n[r(482)]),C[r(520)][r(437)](null==(t=y.value)?void 0:t[r(482)]),C[r(524)][r(430)](n[r(482)]),C[r(490)][r(496)](0,0,1),C.normal[r(527)](C[r(524)]),C[r(493)][r(488)](C[r(490)],o.reflectorOffset),C[r(439)][r(444)](C.reflectorWorldPosition,C.cameraWorldPosition),C.view[r(455)](C[r(490)])>0)return;C.view[r(522)](C.normal)[r(450)](),C[r(439)][r(442)](C[r(493)]),C.rotationMatrix[r(430)](null==(e=y[r(483)])?void 0:e[r(482)]),C.lookAtPosition.set(0,0,-1),C[r(425)].applyMatrix4(C[r(524)]),C[r(425)][r(442)](C[r(520)]),C.target[r(444)](C[r(493)],C.lookAtPosition),C[r(436)][r(522)](C[r(490)])[r(450)](),C.target[r(442)](C.reflectorWorldPosition),C[r(485)][r(492)][r(445)](C.view),C[r(485)].up[r(496)](0,1,0),C[r(485)].up[r(527)](C[r(524)]),C[r(485)].up[r(522)](C[r(490)]),C[r(485)][r(458)](C[r(436)]),C[r(485)][r(468)]=(null==y?void 0:y[r(483)]).far,C[r(485)][r(472)](),C[r(485)][r(491)][r(445)]((null==y?void 0:y.value)[r(491)]),C[r(529)][r(496)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[r(529)][r(521)](C.virtualCamera[r(491)]),C[r(529)][r(521)](C.virtualCamera.matrixWorldInverse),C[r(529)][r(521)](n[r(482)]),C[r(486)].setFromNormalAndCoplanarPoint(C[r(490)],C[r(493)]),C.reflectorPlane[r(527)](C[r(485)][r(517)]),C[r(518)].set(C[r(486)][r(490)].x,C.reflectorPlane[r(490)].y,C[r(486)].normal.z,C[r(486)][r(469)]);const i=C.virtualCamera[r(491)];C.q.x=(Math[r(484)](C.clipPlane.x)+i.elements[8])/i[r(460)][0],C.q.y=(Math[r(484)](C[r(518)].y)+i[r(460)][9])/i.elements[5],C.q.z=-1,C.q.w=(1+i.elements[10])/i[r(460)][14],C.clipPlane.multiplyScalar(2/C[r(518)][r(455)](C.q)),i[r(460)][2]=C[r(518)].x,i.elements[6]=C[r(518)].y,i[r(460)][10]=C.clipPlane.z+1,i[r(460)][14]=C[r(518)].w})(e),S[t(483)][t(427)][t(475)]=!1,S[t(483)][t(478)](R[t(483)]),S.value[t(500)]||S[t(483)][t(498)](),S[t(483)].render(x.value,C[t(485)]),null==(n=null==T?void 0:T[t(483)])||n[t(457)](S[t(483)],R.value,A[t(483)]),S.value.xr[t(453)]=i,S[t(483)][t(427)][t(475)]=a,e[t(495)]=!0,S[t(483)][t(478)](null)}));const B=In(),k=J((()=>{const n=r,t={};return Object[n(503)](t,o),Object[n(503)](t,B[n(483)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(483)])||n[e(514)](),null==(t=null==A?void 0:A[e(483)])||t[e(514)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn("TresMeshReflectorMaterial",bn({key:"key"+D[c(483)][c(440)]+D[c(483)][c(476)]+D.value["defines-USE_DISTORTION"],ref_key:c(510),ref:O},k[c(483)],{"texture-matrix":C[c(529)],mirror:nn(p),"t-diffuse":null==(e=R[c(483)])?void 0:e[c(456)],"t-depth":null==(o=R[c(483)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=A[c(483)])?void 0:i[c(456)],"has-blur":z[c(483)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Se)}}});function Ee(n){function t(n){const e=Me;if(typeof n===e(438))return function(n){}[e(489)](e(462))[e(465)]("counter");1!==(""+n/n)[e(519)]||n%20==0?function(){return!0}[e(489)](e(525)+e(459))[e(499)](e(473)):function(){return!1}[e(489)](e(525)+e(459))[e(465)](e(463)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ae(){const n=["__proto__","assign","280045IbXVxq","187TecPnJ","prototype","max-depth-threshold","number","1367725SxFiQV","materialRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","has-blur","defines-USE_DISTORTION","dispose","table","function *\\( *\\)","matrixWorldInverse","clipPlane","length","cameraWorldPosition","multiply","reflect","11274310JFaMTf","rotationMatrix","debu","mirror","applyMatrix4","error","textureMatrix","lookAtPosition","min-depth-threshold","shadowMap","2250787IumXdp","depth-to-blur-ratio-bias","extractRotation","material","3ounYlA","t-diffuse-blur","return (function() ","1619508fVCqGV","target","setFromMatrixPosition","string","view","defines-USE_BLUR","info","add","4sQRIWT","subVectors","copy","warn","console","mix-strength","log","negate","chain","mix-contrast","enabled","uuid","dot","texture","render","lookAt","gger","elements","input","while (true) {}","stateObject","6bKICMF","apply","2168284QXkkBY","index","far","constant","exception","trace","updateMatrixWorld","action","bind","autoUpdate","defines-USE_DEPTH","9QkNPha","setRenderTarget",'{}.constructor("return this")( )',"t-depth","4044952PvGDOW","matrixWorld","value","sign","virtualCamera","reflectorPlane","test","addScaledVector","constructor","normal","projectionMatrix","position","reflectorWorldPosition","toString","visible","set","distortion","clear","call","autoClear","traverse"];return(Ae=function(){return n})()}function Te(n,t){const e=ze();return(Te=function(n,t){return e[n-=218]})(n,t)}!function(n,t){const e=Te,r=ze();for(;;)try{if(739986===-parseInt(e(241))/1+parseInt(e(223))/2*(-parseInt(e(225))/3)+-parseInt(e(231))/4*(-parseInt(e(251))/5)+parseInt(e(224))/6*(parseInt(e(220))/7)+-parseInt(e(250))/8*(parseInt(e(222))/9)+-parseInt(e(237))/10+parseInt(e(259))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Te,t=new RegExp(n(254)),e=new RegExp(n(221),"i"),r=Ce(n(242));t.test(r+n(229))&&e[n(249)](r+"input")?Ce():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(){const n=["value","counter","call","background","24277418RQODzJ","warn","apply","stateObject","7070DAgEOg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","171NAtIvk","2rRPTom","3054cTjYub","1617918xZNLjG","error","constructor","trace","chain","length","48afSvyS","while (true) {}","type","gger","action","__proto__","13703410JYLtHy","CubeCamera","bind","debu","432210Iqhmar","init","fog","prototype","dispose","table","toString","info","test","429592OgpeNt","575415PWDfMc","texture","log","function *\\( *\\)"];return(ze=function(){return n})()}function Ce(n){function t(n){const e=Te;if("string"==typeof n)return function(n){}[e(227)](e(232))[e(218)](e(256));1!==(""+n/n)[e(230)]||n%20==0?function(){return!0}[e(227)](e(240)+e(234))[e(257)](e(235)):function(){return!1}[e(227)](e(240)+"gger")[e(218)](e(219)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=Te;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(253),n(260),n(248),n(226),"exception",n(246),n(228)];for(let i=0;i<r.length;i++){const t=Pe.constructor[n(244)][n(239)](Pe),o=r[i],a=e[o]||t;t[n(236)]=Pe[n(239)](Pe),t[n(247)]=a[n(247)][n(239)](a),e[o]=t}}))(),function(n,t){const e=ke,r=je();for(;;)try{if(937299===parseInt(e(287))/1+-parseInt(e(286))/2*(-parseInt(e(273))/3)+parseInt(e(281))/4+-parseInt(e(267))/5+-parseInt(e(299))/6+parseInt(e(304))/7+-parseInt(e(275))/8*(-parseInt(e(277))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=ke,t=new RegExp(n(271)),e=new RegExp(n(305),"i"),r=Ne("init");t[n(270)](r+n(302))&&e[n(270)](r+"input")?Ne():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fe(void 0,(function(){const n=ke,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(303)]=t[n(303)]||{},r=["log",n(283),"info",n(296),n(274),"table",n(278)];for(let o=0;o<r[n(292)];o++){const t=Fe[n(307)][n(279)][n(310)](Fe),i=r[o],a=e[i]||t;t[n(308)]=Fe[n(310)](Fe),t[n(288)]=a[n(288)][n(310)](a),e[i]=t}}))();const Be=["object"];function ke(n,t){const e=je();return(ke=function(n,t){return e[n-=267]})(n,t)}const Ue=tn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return Q((()=>s),(n=>{var t;const e=Te;null==(t=c[e(255)])||t.dispose(),c[e(255)]=new v(n[e(255)]),c[e(255)][e(252)][e(233)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Te;e&&(f[r(255)]=new(T[r(238)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Te;null==(n=c.value)||n[t(245)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Te;p=a[t(255)][t(243)],d=a[t(255)][t(258)],a[t(255)][t(258)]=r||d,a[t(255)][t(243)]=o||p,null==(n=f[t(255)])||n.update(i[t(255)],a[t(255)]),a[t(255)][t(243)]=p,a[t(255)][t(258)]=d}}}({resolution:o[r(306)],near:o[r(276)],far:o[r(309)],envMap:o[r(284)],fog:o[r(300)]}),{onBeforeLoop:s}=q();let u=0;const l=X(null);return s((()=>{const n=r;l[n(285)]&&(o[n(269)]===1/0||u<o[n(269)])&&(l[n(285)][n(301)]=!1,c(),l[n(285)].visible=!0,u++)})),t({texture:null==(e=i[r(285)])?void 0:e[r(290)]}),(n,t)=>{const e=r;return an(),cn(e(293),null,[hn(e(311),{object:nn(a)},null,8,Be),hn("TresGroup",{ref_key:e(282),ref:l},[sn(n.$slots,e(298))],512)])}}});function je(){const n=["texture","stateObject","length","TresGroup","action","call","error","debu","default","5098260pzELEe","fog","visible","chain","console","2750209lsREMs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","resolution","constructor","__proto__","far","bind","primitive","5294350QgrRMg","apply","frames","test","function *\\( *\\)","counter","9LEDbQq","exception","15472UDpVqB","near","711yHZjSA","trace","prototype","gger","6669976tNsxwv","rgRef","warn","envMap","value","416104RfKhDZ","8556QVtAqc","toString","while (true) {}"];return(je=function(){return n})()}function Ne(n){function t(n){const e=ke;if("string"==typeof n)return function(n){}.constructor(e(289))[e(268)](e(272));1!==(""+n/n)[e(292)]||n%20==0?function(){return!0}[e(307)]("debugger")[e(295)](e(294)):function(){return!1}[e(307)](e(297)+e(280)).apply(e(291)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Le(){const n=["1uyRLNn","7jmJmAT","function *\\( *\\)","2918592HZHnWv","test","assign","2916588ZuatOr","counter","defineProperty","while (true) {}","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","entries","2418170VCyqOd","6273siibJH","toString","value","UniformsUtils","chain","ShaderMaterial","action","forEach",'{}.constructor("return this")( )',"error","debu","reduce","bind","MathUtils","info","call","3554436AzECEb","__proto__","constructor","exception","input","key","12056390sAfhDh","apply","2067545gMsUFH","uniforms","table","log","generateUUID","3048VYAUxE","clone","console","length","trace","prototype"];return(Le=function(){return n})()}!function(n,t){const e=Ge,r=Le();for(;;)try{if(691617===-parseInt(e(402))/1*(-parseInt(e(416))/2)+parseInt(e(405))/3+-parseInt(e(408))/4+-parseInt(e(441))/5+parseInt(e(433))/6*(parseInt(e(403))/7)+-parseInt(e(446))/8*(-parseInt(e(417))/9)+-parseInt(e(439))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Ge,t=new RegExp(n(404)),e=new RegExp(n(413),"i"),r=$e("init");t[n(406)](r+n(421))&&e[n(406)](r+n(437))?$e():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(440)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=Le();return(Ge=function(n,t){return e[n-=397]})(n,t)}function Ve(n,t,e,r){const o=Ge,i=class extends T[o(422)]{constructor(i={}){const a=o,s=Object[a(415)](n);super({uniforms:s[a(428)](((n,[t,e])=>{const r=a,o=T[r(420)][r(397)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(424)]((([n])=>Object[a(410)](this,n,{get:()=>this[a(442)][n][a(419)],set:t=>this.uniforms[n][a(419)]=t}))),Object[a(407)](this,i),r&&r(this)}};return i[o(438)]=T[o(430)][o(445)](),i}function $e(n){function t(n){const e=Ge;if("string"==typeof n)return function(n){}[e(435)](e(411))[e(440)](e(409));1!==(""+n/n)[e(399)]||n%20==0?function(){return!0}[e(435)](e(427)+e(412))[e(432)](e(423)):function(){return!1}[e(435)](e(427)+e(412))[e(440)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Ge;let t;try{t=Function("return (function() "+n(425)+");")()}catch(o){t=window}const e=t[n(398)]=t[n(398)]||{},r=[n(444),n(414),n(431),n(426),n(436),n(443),n(400)];for(let i=0;i<r[n(399)];i++){const t=Ze.constructor[n(401)][n(429)](Ze),o=r[i],a=e[o]||t;t[n(434)]=Ze[n(429)](Ze),t[n(418)]=a.toString[n(429)](a),e[o]=t}}))();var We=br;!function(n,t){for(var e=br,r=Rr();;)try{if(135364===-parseInt(e(348))/1+-parseInt(e(364))/2*(parseInt(e(240))/3)+parseInt(e(356))/4+-parseInt(e(228))/5+-parseInt(e(396))/6+-parseInt(e(339))/7*(parseInt(e(358))/8)+-parseInt(e(262))/9*(-parseInt(e(287))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[br(245)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=br,t=new RegExp(n(244)),e=new RegExp(n(393),"i"),r=Er(n(341));t[n(261)](r+n(282))&&e.test(r+n(283))?Er():r("0")}))()}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[br(245)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n){var t=br,e=function(n,t){var e=br;if(typeof n!==e(347)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(322)](n,t||e(298));if(typeof o!==e(347))return o;throw new TypeError(e(418))}return(t===e(359)?String:Number)(n)}(n,t(359));return typeof e===t(297)?e:String(e)}function Xe(n,t,e){var r=br;return(t=Ke(t))in n?Object[r(365)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=br,r=Object[e(311)](n);if(Object[e(325)]){var o=Object[e(325)](n);t&&(o=o.filter((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(249)]}))),r[e(345)][e(245)](r,o)}return r}function Qe(n){for(var t=br,e=1;e<arguments[t(352)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach((function(t){Xe(n,t,r[t])})):Object[t(263)]?Object[t(271)](n,Object.getOwnPropertyDescriptors(r)):Je(Object(r))[t(276)]((function(e){Object[t(365)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function nr(n,t){var e=br;if(null==n)return{};var r,o,i=function(n,t){var e=br;if(null==n)return{};var r,o,i={},a=Object[e(311)](n);for(o=0;o<a[e(352)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(325)]){var a=Object[e(325)](n);for(o=0;o<a[e(352)];o++)r=a[o],t.indexOf(r)>=0||Object[e(277)][e(332)].call(n,r)&&(i[r]=n[r])}return i}function tr(n,t){var e=br;(null==t||t>n[e(352)])&&(t=n[e(352)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function er(n,t){return function(n){if(Array[br(404)](n))return n}(n)||function(n,t){var e=br,r=null==n?null:e(256)!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(322)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(322)](r))[e(355)])&&(s[e(345)](o[e(306)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(321)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=br;if(n){if("string"==typeof n)return tr(n,t);var r=Object[e(277)][e(402)][e(322)](n)[e(309)](8,-1);return r===e(316)&&n.constructor&&(r=n.constructor[e(239)]),r===e(238)||"Set"===r?Array[e(337)](n):r===e(354)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(261)](r)?tr(n,t):void 0}}(n,t)||function(){throw new TypeError(br(378))}()}function rr(n,t){for(var e=br,r=0;r<t[e(352)];r++){var o=t[r];o[e(249)]=o[e(249)]||!1,o[e(374)]=!0,e(306)in o&&(o.writable=!0),Object[e(365)](n,Ke(o.key),o)}}function or(n){if(void 0===n)throw new ReferenceError(br(414));return n}function ir(n,t){var e=br;return(ir=Object[e(330)]?Object[e(330)][e(373)]():function(n,t){return n[e(259)]=t,n})(n,t)}function ar(n){var t=br;return(ar=Object[t(330)]?Object[t(227)].bind():function(n){var e=t;return n[e(259)]||Object[e(227)](n)})(n)}function cr(n){var t=function(){var n=br;if(typeof Reflect===n(256)||!Reflect[n(415)])return!1;if(Reflect[n(415)][n(366)])return!1;if(typeof Proxy===n(334))return!0;try{return Boolean[n(277)][n(381)][n(322)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=br,o=ar(n);if(t){var i=ar(this)[r(237)];e=Reflect[r(415)](o,arguments,i)}else e=o[r(245)](this,arguments);return function(n,t){var e=br;if(t&&(typeof t===e(347)||typeof t===e(334)))return t;if(void 0!==t)throw new TypeError(e(409));return or(n)}(this,e)}}Ye(void 0,(function(){var n,t=br;try{n=Function(t(312)+t(390)+");")()}catch(s){n=window}for(var e=n.console=n[t(363)]||{},r=[t(246),"warn",t(294),"error",t(397),t(243),t(267)],o=0;o<r[t(352)];o++){var i=Ye[t(237)][t(277)][t(373)](Ye),a=r[o],c=e[a]||i;i[t(259)]=Ye[t(373)](Ye),i[t(402)]=c[t(402)][t(373)](c),e[a]=i}}))();var sr,ur,lr,fr={diffuse:We(419),normal:"csm_Normal",roughness:We(413),metalness:We(405),emissive:"csm_Emissive",ao:We(386),bump:"csm_Bump",clearcoat:We(394),clearcoatRoughness:We(350),clearcoatNormal:We(408),pointSize:We(229),fragColor:We(383),depthAlpha:We(247),position:"csm_Position",positionRaw:We(376)},pr=(Xe(sr={},""[We(258)](fr[We(333)]),"*"),Xe(sr,""[We(258)](fr[We(272)]),"*"),Xe(sr,""[We(258)](fr[We(310)]),"*"),Xe(sr,"".concat(fr[We(264)]),[We(388)]),Xe(sr,""[We(258)](fr[We(323)]),"*"),Xe(sr,""[We(258)](fr.fragColor),"*"),Xe(sr,""[We(258)](fr[We(250)]),[We(280),We(296)]),Xe(sr,""[We(258)](fr[We(411)]),[We(280),"MeshPhysicalMaterial"]),Xe(sr,"".concat(fr[We(360)]),["MeshStandardMaterial",We(296)]),Xe(sr,""[We(258)](fr.ao),[We(280),We(296),We(422),We(302),"MeshPhongMaterial",We(335)]),Xe(sr,""[We(258)](fr.bump),[We(302),We(299),"MeshNormalMaterial",We(331),We(296),"MeshStandardMaterial",We(335),We(342)]),Xe(sr,""[We(258)](fr[We(398)]),[We(251)]),Xe(sr,""[We(258)](fr[We(357)]),[We(296)]),Xe(sr,""[We(258)](fr.clearcoatRoughness),["MeshPhysicalMaterial"]),Xe(sr,""[We(258)](fr[We(343)]),["MeshPhysicalMaterial"]),sr),dr={"#include <lights_physical_fragment>":T[We(234)][We(372)]},hr=(Xe(ur={},"".concat(fr.normal),{"#include <beginnormal_vertex>":We(292)[We(258)](fr[We(310)],We(273))}),Xe(ur,""[We(258)](fr[We(333)]),{"#include <begin_vertex>":We(368)[We(258)](fr.position,";\n  ")}),Xe(ur,"".concat(fr[We(272)]),{"#include <begin_vertex>":We(324)[We(258)](fr[We(272)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Xe(ur,""[We(258)](fr[We(264)]),{"gl_PointSize = size;":We(286)[We(258)](fr[We(264)],We(274))}),Xe(ur,""[We(258)](fr.diffuse),{"#include <color_fragment>":We(326)[We(258)](fr[We(323)],We(387))}),Xe(ur,""[We(258)](fr.fragColor),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(fr[We(307)],We(387))}),Xe(ur,""[We(258)](fr[We(250)]),{"vec3 totalEmissiveRadiance = emissive;":We(260)[We(258)](fr[We(250)],";\n    ")}),Xe(ur,""[We(258)](fr[We(411)]),{"#include <roughnessmap_fragment>":We(304).concat(fr[We(411)],We(274))}),Xe(ur,""[We(258)](fr[We(360)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[We(258)](fr.metalness,We(274))}),Xe(ur,""[We(258)](fr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(fr.ao,We(274))}),Xe(ur,""[We(258)](fr.bump),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[We(258)](fr[We(336)],We(278)).concat(fr[We(336)],We(293))}),Xe(ur,""[We(258)](fr[We(398)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":We(382)[We(258)](fr[We(398)],We(362)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":We(389)[We(258)](fr[We(398)],We(274))}),Xe(ur,""[We(258)](fr[We(357)]),{"material.clearcoat = clearcoat;":We(407)[We(258)](fr[We(357)],";")}),Xe(ur,"".concat(fr[We(421)]),{"material.clearcoatRoughness = clearcoatRoughness;":We(295).concat(fr[We(421)],";")}),Xe(ur,""[We(258)](fr[We(343)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),ur),vr=(Xe(lr={},""[We(258)](fr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[We(258)](fr[We(333)],We(403))}),Xe(lr,""[We(258)](fr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":We(328)[We(258)](fr[We(333)],We(387))}),Xe(lr,"".concat(fr[We(323)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":We(275)[We(258)](fr.diffuse,We(387))}),Xe(lr,""[We(258)](fr[We(307)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[We(258)](fr[We(307)],We(387))}),lr),mr={clearcoat:[fr[We(357)],fr.clearcoatNormal,fr[We(421)]]},gr=We(392),_r=We(384),yr=[We(290),We(367),"vertexShader",We(351),"patchMap",We(266),We(236)],xr=function(n,t,e){var r=We;return n[r(288)](t)[r(230)](e)},Ir=function(n,t){var e,r,o=We;return new RegExp("\\b".concat((e=t,r=We,e[r(279)](/[-\/\\^$*+?.()|[\]{}]/g,r(255))),"\\b"))[o(261)](n)};function br(n,t){var e=Rr();return(br=function(n,t){return e[n-=227]})(n,t)}function wr(n){return n?n[We(279)](/\s/g,""):void 0}function Sr(n){return n[We(279)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Mr=function(n){var t=We;!function(n,t){var e=br;if(typeof t!==e(334)&&null!==t)throw new TypeError(e(252));n[e(277)]=Object.create(t&&t[e(277)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(365)](n,"prototype",{writable:!1}),t&&ir(n,t)}(c,n);var e,r,o,i,a=cr(c);function c(n){var t,e,r,o,i,s=br,u=n[s(290)],l=n[s(367)],f=n[s(233)],p=n[s(351)],d=n.patchMap,h=n[s(266)],v=n[s(236)],m=nr(n,yr);if(function(n,t){if(!(n instanceof t))throw new TypeError(br(300))}(this,c),!function(n){var t=We;try{new n}catch(e){if(e.message.indexOf(t(281))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(349)]===s(353))throw new Error(s(391));(function(n,t){var e=We;Object.assign(n,t);var r=Object[e(227)](t);Object.entries(Object[e(263)](r))[e(410)]((function(n){var t=e,r=typeof n[1][t(253)]===t(334),o=typeof n[1][t(395)]===t(334),i=typeof n[1][t(306)]===t(334),a=n[0]===t(237);return(r||o||i)&&!a}))[e(276)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(365)](n,t[0],t[1])}))})(or(t=a[s(322)](this)),e),t[s(385)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(420)].generateUUID(),type:e.type,isAlreadyExtended:(r=e[s(268)],o=We,i=r[o(402)]()[o(317)](),!(0===i.substring(i[o(232)]("{")+1,i[o(269)]("}"))[o(317)]().length)),cacheHash:"",silent:v},t.uniforms=Qe(Qe({},t[s(351)]||{}),p||{});var g=t.__csm,_=g[s(367)],y=g[s(233)],x=t[s(351)];return t[s(385)][s(320)]=t[s(412)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=br,t=arguments[n(352)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(351)]=t[n(351)]||this[n(351)],Object[n(380)](this[n(385)],t);var e=this[n(385)],r=e[n(367)],o=e[n(233)],i=this[n(351)],a=this._getCacheHash();this[n(385)][n(320)]=a,this._generateMaterial(r,o,i)}},{key:t(329),value:function(){var n=t,e={baseMaterial:this[n(385)][n(290)],fragmentShader:this[n(385)][n(367)],vertexShader:this.__csm[n(233)],uniforms:this.uniforms,silent:this[n(385)][n(236)],patchMap:this.__csm.patchMap,cacheKey:this[n(385)].cacheKey},r=new(this[n(237)])(e);return Object[n(380)](this,r),r}},{key:t(412),value:function(){var n=t,e=this[n(385)],r=e[n(367)],o=e[n(233)],i=this.uniforms,a=[wr(r),wr(o),i][n(410)]((function(n){return void 0!==n}));return a[n(352)]>0?Rn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(370),value:function(n,e,r){var o=t,i=this;this[o(351)]=r||{},this[o(375)]=function(){var n=o;return i.__csm[n(320)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(406)](Sr(n),t.fragmentShader,!0);t[r(367)]=a+c}if(e){var s=i._patchShader(Sr(e),t[r(233)]);t[r(233)]=r(305)+s,t[r(233)]=a+t[r(233)]}t[r(351)]=Qe(Qe({},t[r(351)]),i[r(351)]),i[r(351)]=t[r(351)]}catch(u){console[r(289)](u)}};if(this[o(385)][o(270)]){var c=this.onBeforeCompile;this[o(268)]=function(n,t){c(n,t),a(n)}}else this[o(268)]=a;this[o(315)]=!0}},{key:t(406),value:function(n,e,r){var o=t,i=this,a=e,c=Qe(Qe({},this[o(231)]()),this.__csm[o(248)]);Object[o(265)](mr).forEach((function(t){var e=o,r=er(t,2),a=r[0],c=r[1][e(314)]((function(t){return Ir(n,t)}));if(c&&!i[a])throw new Error(e(285)[e(258)](a,e(235))[e(258)](c,e(340)))})),Object[o(265)](dr)[o(276)]((function(n){var t=er(n,2),e=t[0],r=t[1];a=xr(a,e,r)})),Object[o(311)](c)[o(276)]((function(t){var e=o;Object[e(311)](c[t])[e(276)]((function(r){var o=e,s=pr[t],u=i.__csm[o(349)];if("*"===t||Ir(n,t)){if(!(!s||Array[o(404)](s)&&s.includes(u)||"*"===s))throw new Error(o(301).concat(t," is not available in ")[o(258)](u,o(401)));a=xr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(385)][o(417)][o(279)](/-/g,"_"),h=n[o(279)](/void\s+main\s*\(\s*\)/g,"void "[o(258)](d,"()")),v=n[o(241)](o(399)),m=a[o(241)]("// #_CSM_#");return v&&(m&&this[o(385)][o(270)]?(a=a[o(279)](o(313),o(319)[o(258)](h,o(371))),s=a,u=o(361),l="\n            "[o(258)](d,o(308)),p=s[(f=We)(269)](u),a=-1===p?s:s[f(346)](0,p)+l+s[f(346)](p+u[f(352)])):a=a[o(279)](o(313),o(400).concat("\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(318))[o(258)](gr,o(416))[o(258)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ").concat("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(254))[o(258)](r?_r:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(379))[o(258)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(257),value:function(){var n=t,e=this[n(385)].type;return e?n(369)[n(258)](e[n(327)](),";\n"):n(377)}},{key:t(231),value:function(){var n=t;return this[n(385)][n(349)]===n(303)?vr:hr}}],i=br,r&&rr(e.prototype,r),o&&rr(e,o),Object[i(365)](e,i(277),{writable:!1}),c}(T[We(242)]);function Rr(){var n=["\n    vec4 csm_internal_positionUnprojected = ","getOwnPropertySymbols","\n    #include <color_fragment>\n    diffuseColor = ","toUpperCase","\n    gl_Position = ","clone","setPrototypeOf","MeshPhongMaterial","propertyIsEnumerable","position","function","MeshToonMaterial","bump","from","gger","14sfJJWj",'". Shader cannot compile.',"init","ShadowMaterial","clearcoatNormal","action","push","substring","object","266413hkthwa","type","csm_ClearcoatRoughness","uniforms","length","RawShaderMaterial","Arguments","done","333072MIExjb","clearcoat","579432xvtdCQ","string","metalness","// #_CSM_#"," );\n    ","console","15038bHczwP","defineProperty","sham","fragmentShader","\n    vec3 transformed = ","#define IS_","_generateMaterial","\n            \n            void main() {\n          ","lights_physical_fragment","bind","configurable","customProgramCacheKey","csm_PositionRaw","#define IS_UNKNOWN;\n","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","assign","valueOf","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","csm_FragColor","\n    \n","__csm","csm_AO",";\n  ","PointsMaterial","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ",'{}.constructor("return this")( )',"CustomShaderMaterial does not support RawShaderMaterial","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","csm_Clearcoat","set","608670KAbMic","exception","depthAlpha","void main()","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ",". Shader cannot compile.","toString",", 1.0 );\n  ","isArray","csm_Metalness","_patchShader","material.clearcoat = ","csm_ClearcoatNormal","Derived constructors may only return object or undefined","filter","roughness","_getCacheHash","csm_Roughness","this hasn't been initialised - super() hasn't been called","construct","\n    \n            ","instanceID","@@toPrimitive must return a primitive value.","csm_DiffuseColor","MathUtils","clearcoatRoughness","MeshBasicMaterial","getPrototypeOf","1300525UXmQzs","csm_PointSize","join","_getPatchMapForMaterial","indexOf","vertexShader","ShaderChunk",'" is required to use output "',"silent","constructor","Map","name","33wVCxxf","includes","Material","table","function *\\( *\\)","apply","log","csm_DepthAlpha","patchMap","enumerable","emissive","MeshDepthMaterial","Super expression must either be null or a function","get","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\\$&","undefined","_getMaterialDefine","concat","__proto__","\n    vec3 totalEmissiveRadiance = ","test","18yOEPMd","getOwnPropertyDescriptors","pointSize","entries","cacheKey","trace","onBeforeCompile","lastIndexOf","isAlreadyExtended","defineProperties","positionRaw",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ",";\n    ","\n    gl_FragColor = ","forEach","prototype"," - (dot(","replace","MeshStandardMaterial","is not a constructor","chain","input","counter",'CSM: Property "',"\n    gl_PointSize = ","4538130jEAEBz","split","error","baseMaterial","debu","\n    vec3 objectNormal = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","info","material.clearcoatRoughness = ","MeshPhysicalMaterial","symbol","default","MeshMatcapMaterial","Cannot call a class as a function","CSM: ","MeshLambertMaterial","ShaderMaterial","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","#define IS_VERTEX;\n","value","fragColor","();\n            // #_CSM_#\n          ","slice","normal","keys","return (function() ","void main() {","find","needsUpdate","Object","trim","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","\n            ","cacheHash","return","call","diffuse"];return(Rr=function(){return n})()}function Er(n){function t(n){var e=br;if(typeof n===e(359))return function(n){}.constructor("while (true) {}")[e(245)](e(284));1!==(""+n/n)[e(352)]||n%20==0?function(){return!0}.constructor(e(291)+"gger")[e(322)](e(344)):function(){return!1}[e(237)](e(291)+e(338)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ar=Or;!function(n,t){const e=Or,r=Pr();for(;;)try{if(408803===-parseInt(e(475))/1+-parseInt(e(514))/2*(parseInt(e(476))/3)+-parseInt(e(474))/4*(parseInt(e(491))/5)+parseInt(e(515))/6*(-parseInt(e(501))/7)+parseInt(e(504))/8+-parseInt(e(493))/9+parseInt(e(479))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tr(this,(function(){const n=Or,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fr(n(509));t.test(r+n(508))&&e.test(r+n(503))?Fr():r("0")}))()}();const Dr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pr(){const n=["2004751AMPavg","clearcoatRoughness","input","2826280PoPBkv","gger","debu","#ff00fc","chain","init","while (true) {}","action","counter","length","26OQEFXo","12jvJlmV","__proto__","roughness","16PFUYKk","539421FRQasn","89049pNfMcA","return (function() ","metalness","21285630LhkbyB","MeshPhysicalMaterial","trace","color","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","string","log","bind","\n      ","setStyle","console",'{}.constructor("return this")( )',"30865iHuywH","index","4952403sEuHNN","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","table","prototype","clearcoat","constructor","toString","apply"];return(Pr=function(){return n})()}Dr(void 0,(function(){const n=Or;let t;try{t=Function(n(477)+n(490)+");")()}catch(o){t=window}const e=t[n(489)]=t[n(489)]||{},r=[n(485),"warn","info","error","exception",n(495),n(481)];for(let i=0;i<r[n(513)];i++){const t=Dr[n(498)][n(496)][n(486)](Dr),o=r[i],a=e[o]||t;t[n(472)]=Dr[n(486)](Dr),t[n(499)]=a[n(499)][n(486)](a),e[o]=t}}))();const zr=["object"],Cr=tn({__name:Ar(492),props:{color:{default:Ar(507)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Ar,e=n,r={baseMaterial:T[t(480)],metalness:e[t(478)],roughness:e[t(473)],clearcoat:e[t(497)],clearcoatRoughness:e[t(502)],color:e[t(482)],vertexShader:t(494),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(487)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(483)},o=new Mr(r);return fn((()=>{const n=t;o[n(482)][n(488)](e[n(482)]),o[n(478)]=e.metalness,o[n(473)]=e[n(473)],o[n(497)]=e.clearcoat,o[n(502)]=e[n(502)]})),(n,t)=>(an(),cn("primitive",{object:nn(o)},null,8,zr))}});function Or(n,t){const e=Pr();return(Or=function(n,t){return e[n-=472]})(n,t)}function Fr(n){function t(n){const e=Or;if(typeof n===e(484))return function(n){}.constructor(e(510)).apply(e(512));1!==(""+n/n).length||n%20==0?function(){return!0}[e(498)]("debu"+e(505)).call(e(511)):function(){return!1}[e(498)](e(506)+e(505))[e(500)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Br(){var n=["call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4465668sxRcPr","14pBeekv","log","toString","27whONDT","97249FVAVui","chain","1562040GPpBfQ","action","32OIIZGC","input","52481fOumbj","return (function() ","7250iLLdRR","exception","test","apply","bind","prototype","info","4508210EbJVyx","326286HvRrfs","table","constructor","312904bvZcNq","stateObject","gger","console","debu","init","trace","length"];return(Br=function(){return n})()}!function(n,t){for(var e=jr,r=Br();;)try{if(518498===parseInt(e(356))/1*(-parseInt(e(352))/2)+-parseInt(e(355))/3*(parseInt(e(341))/4)+-parseInt(e(358))/5+-parseInt(e(351))/6+-parseInt(e(337))/7+-parseInt(e(360))/8*(-parseInt(e(338))/9)+parseInt(e(364))/10*(parseInt(e(362))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var kr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){var n=jr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(350),"i"),r=Nr(n(346));t.test(r+n(357))&&e[n(366)](r+n(361))?Nr():r("0")}))()}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[jr(367)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(n,t){var e=Br();return(jr=function(n,t){return e[n-=335]})(n,t)}function Nr(n){function t(n){var e=jr;if("string"==typeof n)return function(n){}[e(340)]("while (true) {}")[e(367)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(340)](e(345)+e(343))[e(349)](e(359)):function(){return!1}[e(340)]("debu"+e(343)).apply(e(342)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ur(void 0,(function(){for(var n=jr,t=function(){var n,t=jr;try{n=Function(t(363)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t.console=t[n(344)]||{},r=[n(353),"warn",n(336),"error",n(365),n(339),n(347)],o=0;o<r[n(348)];o++){var i=Ur[n(340)][n(335)][n(368)](Ur),a=r[o],c=e[a]||i;i.__proto__=Ur[n(368)](Ur),i[n(354)]=c[n(354)][n(368)](c),e[a]=i}}))();export{Ve as C,Cr as _,Jn as a,ut as b,wt as c,Dt as d,Ut as e,Kt as f,Ue as g,Re as h,vt as u};

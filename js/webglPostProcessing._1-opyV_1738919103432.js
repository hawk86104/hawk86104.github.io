import{i as t}from"./ice-utils.DsoDCSQ51738919103432.js";import{_ as n,s as e}from"./gl-matrix.O3cq04PS1738919103432.js";import{P as o}from"./tweakpane.yDiyAAkA1738919103432.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.NRI7TcgI1738919103432.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=A;!function(t,n){const e=A,o=g();for(;;)try{if(546524===parseInt(e(520))/1+-parseInt(e(544))/2*(-parseInt(e(540))/3)+-parseInt(e(481))/4+parseInt(e(461))/5+-parseInt(e(533))/6*(-parseInt(e(469))/7)+-parseInt(e(526))/8+parseInt(e(515))/9*(-parseInt(e(507))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=A,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(536),"i"),o=T(t(512));n.test(o+t(553))&&e[t(531)](o+t(505))?T():o("0")}))()}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["innerWidth","offset_left_bottom","input","getUniformLocation","7871420Grfdwy","log","addBinding","uniformMatrix4fv","useProgram","init","length","STATIC_DRAW","9eHrOoX","createBuffer","TEXTURE_WRAP_S","createFramebuffer","width","783431kvVCJd","TEXTURE_MAG_FILTER","TRIANGLES","uProjection","BLEND","bufferData","5922224euZJRa","ONE_MINUS_SRC_ALPHA","slider","#canvaswebgl","enable","test","logo-texture","6VxNgJt","while (true) {}","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","querySelector","webglPostProcessing","trace","789jMVKtg","table","SRC_ALPHA","FLOAT","3070CGdfvv","vertexAttribPointer","gger","counter","BYTES_PER_ELEMENT","getContext","uView","hidden","texImage2D","chain","prototype","uniform1f","FRAMEBUFFER","TEXTURE_MIN_FILTER","uModel","enableVertexAttribArray","apply","offset_right_top","webgl","2470350pJliEL","value","bind","ARRAY_BUFFER","TEXTURE_2D","stateObject","clear","none","3189977vZftmP","drawElements","constructor","create","COLOR_BUFFER_BIT","bindTexture","console","TEXTURE_WRAP_T","CLAMP_TO_EDGE","bindFramebuffer","canvas","height","251892LStmOZ","inline","NEAREST","toString","COLOR_ATTACHMENT0","change","clearColor","ortho","mat4","ELEMENT_ARRAY_BUFFER","blendFunc","bindBuffer","offset_right_bottom","offset_left_top","UNSIGNED_BYTE","debu","texParameteri","color","info","RGBA","__proto__","call"];return(g=function(){return t})()}x(void 0,(function(){const t=A,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(475)]=n[t(475)]||{},o=[t(508),"warn",t(499),t(535),"exception",t(541),t(539)];for(let r=0;r<o.length;r++){const n=x[t(471)][t(554)][t(463)](x),i=o[r],a=e[i]||n;n[t(501)]=x[t(463)](x),n[t(484)]=a.toString[t(463)](a),e[i]=n}}))();const p={id:"canvaswebgl"},E=["src"],R=r({__name:_(538),setup(r){const d=_;let x,g,R,A,T,y,b,v,F,h,w,P,C;const B=1,U=.71,I=.76,S=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S.addBlade({view:d(528),label:"颜色",min:0,max:1,value:.5}).on(d(486),(t=>{const n=d;G(),g[n(555)](P,t[n(462)])}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[d(509)](L,d(551),{label:"是否后处理"}),S[d(509)](L,d(459),{picker:d(482),x:{min:0,max:1},y:{min:0,max:1}}).on(d(486),(t=>{const n=d;N[0]=L[n(459)].x,N[1]=L.offset_right_top.y,G()})),S[d(509)](L,d(493),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(486),(t=>{const n=d;N[5]=L[n(493)].x,N[6]=L.offset_right_bottom.y,G()})),S.addBinding(L,d(504),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=d;N[10]=L[n(504)].x,N[11]=L.offset_left_bottom.y,G()})),S[d(509)](L,d(494),{picker:d(482),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(486),(t=>{const n=d;N[15]=L[n(494)].x,N[16]=L[n(494)].y,G()})),a((()=>{M()}));const M=function(){const n=d;x=document[n(537)](n(529)),x[n(519)]=window[n(503)],x[n(480)]=window.innerHeight,g=x[n(549)](n(460)),g&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=Y(e,o),R=t(g,l,m),F=g.getUniformLocation(R,n(523)),h=g[n(506)](R,n(550)),w=g[n(506)](R,n(456)),C=O(document.getElementById(n(532)))}(),G(),g[n(530)](g[n(524)]),g[n(491)](g[n(542)],g[n(527)]),D())};function D(){const t=d;g[t(478)](g[t(556)],b),g[t(487)](B,U,I,1),g[t(467)](g[t(473)]),function(){const t=d;g[t(511)](R),g[t(492)](g.ARRAY_BUFFER,A);const e=n[t(489)][t(472)]();n[t(489)][t(488)](e,0,x[t(519)],x.height,0,.1,100),g[t(510)](F,!1,e);const o=n[t(489)][t(472)]();n[t(489)].lookAt(o,[0,0,1],[0,0,0],[0,1,0]),g[t(510)](h,!1,o),j(C,600,600),j(C,400,400)}(),g[t(478)](g[t(556)],null),L.hidden&&(g[t(467)](g[t(473)]),g[t(487)](0,0,1,1),g[t(492)](g[t(464)],T),g[t(511)](y),g.bindTexture(g[t(465)],v)),g[t(470)](g[t(522)],6,g.UNSIGNED_BYTE,0),requestAnimationFrame(D)}function j(t,o,r){const i=d;let a=n[i(489)][i(472)]();n[i(489)].translate(a,a,[o,r,0]),e(a,a,[250,250,0]),g.uniformMatrix4fv(w,!1,a),g[i(474)](g[i(465)],t),g[i(470)](g[i(522)],6,g.UNSIGNED_BYTE,0)}function G(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);T=Y(N,e),y=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=g.getUniformLocation(y,"mixParam"),g[n(506)](y,n(498)),function(){const t=d;v=O(x),b=g[t(518)](),g[t(478)](g.FRAMEBUFFER,b),g.framebufferTexture2D(g[t(556)],g[t(485)],g[t(465)],v,0),g[t(478)](g[t(556)],null)}()}function O(t){const n=d,e=g.createTexture();return g[n(474)](g.TEXTURE_2D,e),t instanceof HTMLImageElement?g[n(552)](g[n(465)],0,g[n(500)],g.RGBA,g[n(495)],t):g[n(552)](g[n(465)],0,g[n(500)],t[n(519)],t.height,0,g[n(500)],g[n(495)],null),g[n(497)](g[n(465)],g[n(557)],g[n(483)]),g.texParameteri(g[n(465)],g[n(521)],g.NEAREST),g[n(497)](g[n(465)],g[n(517)],g[n(477)]),g[n(497)](g[n(465)],g[n(476)],g[n(477)]),e}function Y(t,n){const e=d,o=g[e(516)]();g[e(492)](g.ARRAY_BUFFER,o),g[e(525)](g[e(464)],t,g[e(514)]);const r=3*Float32Array[e(548)]+2*Float32Array[e(548)];g[e(545)](0,3,g[e(543)],!1,r,0),g[e(457)](0),g[e(545)](1,2,g[e(543)],!1,r,3*Float32Array[e(548)]),g[e(457)](1);const i=g[e(516)]();return g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,i),g[e(525)](g[e(490)],n,g[e(514)]),g[e(492)](g.ARRAY_BUFFER,null),o}return(t,n)=>{const e=d;return c(),s(e(479),p,[u("img",{id:e(532),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(468)}},null,8,E)])}}});function A(t,n){const e=g();return(A=function(t,n){return e[t-=456]})(t,n)}function T(t){function n(t){const e=A;if("string"==typeof t)return function(t){}.constructor(e(534))[e(458)](e(547));1!==(""+t/t)[e(513)]||t%20==0?function(){return!0}[e(471)](e(496)+"gger")[e(502)]("action"):function(){return!1}[e(471)](e(496)+e(546))[e(458)](e(466)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as default};

import{b as e,m as a,a as t}from"./@tresjs.CIKSfeCC1746335712058.js";import{_ as o,l as s}from"./three-tile.DbpHuU8y1746335712058.js";import{s as n,c as r,a as l,i}from"./informationDiv.BW3ggXCE1746335712058.js";import{d as p,a5 as c,w as m,H as u,o as d,u as g,J as _,r as h,b as f,F as v,e as S,f as y,j,m as b,am as D,h as x,ak as w,al as I}from"./@vue.DK6ok9LJ1746335712058.js";import{b9 as M,C as F,ab as T,a9 as G,V as B}from"./three.Bj3hPI0l1746335712058.js";import{P as L}from"./tweakpane.C0HtAJSg1746335712058.js";import"./postprocessing.Dxg1zmor1746335712058.js";import"./@vueuse.BtSShokC1746335712058.js";/* empty css                                                                                    */import"./@fesjs.B__Hyo051746335712058.js";import"./vue-router.CeDYLsLY1746335712058.js";import"./lodash-es.BOsRjQhS1746335712058.js";import"./@qlin.q6OWdsQV1746335712058.js";import"./pinia.C9yokyLV1746335712058.js";import"./@babel.BPq7uOAK1746335712058.js";import"./@floating-ui.BFjFSAYt1746335712058.js";import"./@juggle.CcBCnTIR1746335712058.js";const C=["position"],k=["scale","material","rotateX","position-y"],P=p({__name:"cloundSateShow",props:{map:{},height:{default:100},color:{default:"#cccccc"},opacity:{default:.6}},async setup(a){let t,o;const s=a,r=new M({displacementMap:new G,transparent:!0,side:T,opacity:s.opacity,color:new F(s.color)});r.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * 0.5 + 0.0 );"),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","\n            #include <alphamap_fragment>\n            float h = texture2D(map, vMapUv ).a;\n            diffuseColor.rgb *= h;\n            diffuseColor.a = clamp(diffuseColor.a * 2.0, 0.0, 1.0);\n            ")};const l=s.map.geo2pos(new B(105,34,0));l.applyMatrix4(s.map.matrix);const i=n(s.map,{x:67,y:11},{x:140,y:57},s.height),p=["https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171300.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171400.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171500.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171600.HDF.png"];let h=0;const f=([t,o]=c((()=>e(p))),t=await t,o(),t);r.map=f[h],m((()=>[s.color,s.opacity]),(([e,a])=>{r.color.setStyle(e),r.opacity=a}));let v=null,S=!1;return S?(clearInterval(v),v=null,S=!1):(v=setInterval((()=>{h=h<p.length-1?h+1:0,r.map=f[h],r.needsUpdate=!0,console.log(h)}),1e3),S=!0),(e,a)=>(d(),u("TresGroup",{position:[...g(l)]},[_("TresMesh",{scale:[g(i).x,g(i).y,e.height],material:g(r),rotateX:-Math.PI/2,renderOrder:9999,"position-y":e.height/5},a[0]||(a[0]=[_("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)]),8,k)],8,C))}}),W=["object"],A=p({__name:"mapBoxShow2",setup(e){const t=h({height:500,color:"#cccccc",opacity:.6}),n=new L({title:"参数"});n.addBinding(t,"color",{label:"颜色"}),n.addBinding(t,"height",{label:"高度",min:10,max:5e3,step:10}),n.addBinding(t,"opacity",{label:"透明度",min:0,max:1,step:.1});const i=new o({imgSource:[new s.GDSource({style:"6"}),new s.GDSource({style:"8"})],lon0:90,minLevel:2,maxLevel:20});i.rotateX(-Math.PI/2);const p=new B(105,34,0),c=new B(110,0,1e4),x=i.localToWorld(i.geo2pos(p)),w=i.localToWorld(i.geo2pos(c)),I=f(),{camera:M,controls:F,scene:T,renderer:G}=a();return M.value&&M.value.position.copy(w),m((()=>F.value),(e=>{e&&(e.target.copy(x),r(e,M.value,T.value))})),m((()=>I.value),(e=>{e&&e.target.position.copy(x)})),l(M.value,G.value.domElement,i),(e,a)=>(d(),u(v,null,[_("TresDirectionalLight",{ref_key:"tdLight",ref:I,position:[0,2e3,1e3],intensity:1},null,512),_("primitive",{object:g(i)},null,8,W),(d(),S(D,null,{default:y((()=>[j(P,b({map:g(i)},t),null,16,["map"])])),_:1}))],64))}}),E=p({__name:"cloundSate",setup(e){const a=h({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),o=h({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,s)=>{const n=x("TresCanvas");return d(),u(v,null,[j(n,b(a,{"window-size":""}),{default:y((()=>[s[0]||(s[0]=_("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),j(g(t),w(I(o)),null,16),s[1]||(s[1]=_("TresAmbientLight",{intensity:1},null,-1)),j(A)])),_:1},16),j(i)],64)}}});export{E as default};

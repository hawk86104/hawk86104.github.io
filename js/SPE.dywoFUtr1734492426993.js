import{X as t,_ as e,cs as i,bQ as n,as as s,C as o,V as r}from"./three.-W-Avfc61734492426993.js";const a=u;!function(t,e){const i=u,n=l();for(;;)try{if(281535===-parseInt(i(693))/1*(parseInt(i(620))/2)+parseInt(i(854))/3*(parseInt(i(498))/4)+-parseInt(i(622))/5*(parseInt(i(495))/6)+-parseInt(i(820))/7*(parseInt(i(789))/8)+parseInt(i(841))/9+parseInt(i(799))/10*(-parseInt(i(823))/11)+-parseInt(i(707))/12*(-parseInt(i(790))/13))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){c(this,(function(){const t=u,e=new RegExp("function *\\( *\\)"),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=d("init");e[t(543)](n+t(829))&&i[t(543)](n+"input")?d():n("0")}))()}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(526)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(t,e){const i=l();return(u=function(t,e){return i[t-=414]})(t,e)}function l(){const t=["TypedArray is already of size:","_angle","group","_incrementParticleCount","    vec3 outgoingLight = vColor.xyz;","setVec3Components","activeMultiplier","gger","center","ensureValueOverLifetimeCompliance","constructor","REVISION","unpackRotationAxis","    vec3 pos = vec3( position );","age","logdepthbuf_pars_fragment","resetFlags","subarray","_onRemove","spreadClamp","grow","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","vec3 unpackRotationAxis( in float hex ) {","valueOverLifetimeLength","float when_gt(float x, float y) {","triggerPoolEmitter","_updateBuffers","       if ( vColor.w < float(ALPHATEST) ) discard;","       axis = normalize(axis);","amd","BOX","activationEnd","ShaderChunk","       float s = sin( -vAngle );","rotationCenter","    gl_Position = projectionMatrix * mvPosition;","      translated = rotationCenter - pos;","   return velocity * age;","_createGetterSetters","hasPerspective","   return params.y;","paramFetchingFunctions","attributeOffset","fog_vertex","       float y = 1.0 - gl_PointCoord.y - 0.5;","wiggle","Vector4","   c.b = b / PACKED_COLOR_DIVISOR;","    vec3 value = vec3( 0.0 );","ceil","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","_attributesNeedRefresh","clone","dispose","ShaderMaterial","   }","spread","        float wiggleSin = isAlive * sin( wiggleAmount );","varyings","common","attribute vec3 velocity;","        float columnNorm = column / framesX;","    #ifdef COLORIZE","SHOULD_ROTATE_PARTICLES","_assignAngleValue","   c *= vec3( 2.0 );","    #ifdef ALPHATEST","randomVector3OnDisc","generateUUID","5ursPZp","uniform float runTime;","_calculatePPSValue","   c -= vec3( 1.0 );","roundToNearestMultiple","_pool","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","_assignColorValue","        float framesX = vSpriteSheet.x;","randomFloat","    highp float age = getAge();","floatOverLifetime","fog_pars_fragment","cos","5446320VjJpFv","shrink","        pos.z += wiggleSin;","_value","ShaderAttribute","    highp float positionInTime = (age / maxAge);","shaders","undefined","_checkParticleAges","call","spe","unshift","    vec3 force = vec3( 0.0 );","_distributionClamp","    #ifdef HAS_PERSPECTIVE","randomColorAsHex","indexOffset","trace","      mat4 rotationMatrix;","    #ifdef SHOULD_ROTATE_PARTICLES","addEmitter","attribute vec4 size;","Emitter does not exist in this group. Will not remove.","transparent","itemSize","bufferAttribute","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","setVec3","uniform vec4 textureAnimation;","   c.g = g / PACKED_COLOR_DIVISOR;","_assignValue","_rotationCenter","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","_axisSpread","BOOLEAN","    highp float isAlive = when_gt( alive, 0.0 );","uuid","textureFrameCount","_applyAttributesToGeometry","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","number","count","dynamicBuffer","_radius","isStatic","       vec3 c = isAlive * getColorOverLifetime(","_randomise","forceUpdateAll","#ifdef SHOULD_ROTATE_PARTICLES","vec3 getAcceleration( in float age ) {","_static","distributionClamp","typeSizeMap","       float c = cos(angle);","    #endif","object","      }","_spread","sqrt","defineProperty","splice","console","arrayType",'{}.constructor("return this")( )',"BufferAttribute","logdepthbuf_vertex","_updateAttributeUpdateRange","velocity","setUpdateRange","updateMap","TypedArrayHelper","        vSpriteSheet.z = columnNorm;","_assignPositionValue","        pos.x += wiggleSin;","add","    #ifdef SHOULD_CALCULATE_SPRITE","setVec2Components","float getWiggle() {","unpackColor","getPool","       );","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","24xcXWHE","13BbzFBE","copy","angleSpread","setVec4Components","exports","colorize","geometry","      float angle = 0.0;","bind","165840DJYdbC","_setBufferUpdateRanges","replace","normalize","needsUpdate","removeEmitter","logdepthbuf_pars_vertex","flagUpdate","      vec3 axis = unpackRotationAxis( rotation.x );","attribute vec4 acceleration;","bufferUpdateKeys","_radiusScale","warn","attribute vec4 params;","        float row = floor( (frameNumber - column) / framesX );","reset","Group","resetUpdateRange","depthWrite","attribute vec4 color;","        float framesY = vSpriteSheet.y;","748881DVWEah","_resetBufferRanges","isArray","44CpLrUs","Color","randomise","_assignRotationValue","getLength","randomVector3","chain","fog_fragment","    force *= drag;","_attributesNeedDynamicReset","    #ifdef SHOULD_WIGGLE_PARTICLES","    return 1.0 - abs( sign( x - y ) );","action","radius","logdepthbuf_fragment","    float pointSizePerspective = pointSize * perspective;","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","OBJECT","3677085vERatH","rotation","LINE","getComponentValueAtIndex","setColor","Vector2","getPackedRotationAxis","rotateTexture","_triggerSingleEmitter","alive","    return min(a + b, 1.0);","float when_ge(float x, float y) {","   float b = mod( hex, PACKED_COLOR_SIZE );","24AlwoiH","    #else","_createBufferAttribute","       float s = sin(angle);","__proto__","lerpTypeAgnostic","maxAge","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","       vec3 c = vec3(1.0);","string","_createNewWhenPoolEmpty","_spreadClamp","_angleSpread","setDrawRange","       float x = gl_PointCoord.x - 0.5;","bufferUpdateCount","        float wiggleCos = isAlive * cos( wiggleAmount );","maxParticleCount","max","counter","Argument is not instanceof SPE.Emitter:","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","Emitter","fragment","       fIndex = float( i );","ensureInstanceOf","emitterIDs","#define PACKED_COLOR_SIZE 256.0","        float framesX = textureAnimation.x;","particlesPerSecond","interpolateArray","blending","material","updateFlags","exception","setSize","setMat4","attributeEnd","           unpackColor( color.y ),","resetDynamic","fixedTimeStep","particles, can support only","sin","join","floor","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","arrayValuesAreEqual","emitters","SPHERE","indexOf","color","setMat3","AdditiveBlending","tick","setFromArray","setNumber","POSITIVE_INFINITY","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","attribute vec4 rotation;","#ifdef SHOULD_CALCULATE_SPRITE","NUMBER","multiplyScalar","colorOverLifetime","round","opacity","mesh","attributeCount","getHex","ensureArrayTypedArg","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","        float rowNorm = row / framesY;","DISC","vec3 getVelocity( in float age ) {","_updateDefines","abs","alphaTest","           unpackColor( color.z ),","_ensureTypedArray","paramsArray","    return a * b;","Emitter already exists in this group. Will not add again.","log","Emitter does not belong to a group, cannot remove.","textureLoop","getValueAtIndex","setAttribute","updateRange","float when_le(float x, float y) {","Will not resize.","    pos += force;","uniform float scale;","info","value","    highp float maxAge = getMaxAge();","_assignAbsLifetimeValue","    vec3 accel = getAcceleration( age );","    vColor = vec4( c, o );","deltaTime","activeParticleCount","usage","uniform float deltaTime;","        float perspective = scale / length( mvPosition.xyz );","angle","hasOwnProperty","function","fog_pars_vertex","depthTest","15234qmPOyH","   return params.x;","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","258864TIUdCr","  return 1.0 - when_gt(x, y);","_distribution","   return acceleration.xyz * age;","array","           unpackColor( color.x ),","length","vec3 unpackColor( in float hex ) {","   c.r = r / PACKED_COLOR_DIVISOR;","distributions","texture","   return modelViewMatrix * vec4( position, 1.0 );","_setAttributeOffset","           positionInTime,","updateCounts","    return value;","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    }","Points","randomVector3OnLine","set","    return max(sign(x - y), 0.0);","SPE.Group: maxParticleCount exceeded. Requesting","uniform sampler2D tex;","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","pop","BufferGeometry","debu","apply","type","enable","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      vec3 center = rotationCenter;","MathUtils","componentSize","       float oc = 1.0 - c;","bufferUpdateRanges","_axis","_activateParticles","acceleration","random","setVec4","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","attributeKeys","   return c;","test","push","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","SHOULD_WIGGLE_PARTICLES","#endif","lerp","activationIndex","shaderChunks","_assignParamsValue","uniforms","position","getFromPool","particleCount","           return pos;","setRGB","    varying float vAngle;","float getAlive() {","setVec2","ensureArrayInstanceOf","_updateUniforms","disable","branchAvoidanceFunctions","SHOULD_ROTATE_TEXTURE","StaticDrawUsage","typedArray","_poolCreationSettings","updateMin","_decrementParticleCount","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","return (function() ","void main() {","vertex","duration","releaseIntoPool","Texture","ensureTypedArg","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","   vec3 c = vec3( 0.0 );","updateMax","utils","`emitter` argument must be instance of SPE.Emitter. Was provided with:","boolean","        float rowNorm = vSpriteSheet.w;","textureFrames","direction","    varying vec4 vSpriteSheet;","TypedArrayConstructor","axisSpread","fog","params","distribution","prototype","offset","elements","    ","        float perspective = 1.0;","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","attributes","keys","Vector3","size","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","drag","       float c = cos( -vAngle );","float when_eq( float x, float y ) {","        vSpriteSheet.x = 1.0 / framesX;","min","        float columnNorm = vSpriteSheet.z;","defines","error","_assignForceValue","SPE.Group pool ran out.","    #ifdef SHOULD_ROTATE_TEXTURE","    float fIndex = 0.0;","      vec3 translated;","clamp","toString","155552vmHVuu","table","635TDwhas","forceFetchingFunctions"];return(l=function(){return t})()}h(void 0,(function(){const t=u;let e;try{e=Function(t(572)+t(770)+");")()}catch(s){e=window}const i=e[t(768)]=e[t(768)]||{},n=["log","warn",t(479),t(612),t(422),t(621),t(724)];for(let o=0;o<n[t(504)];o++){const e=h[t(634)][t(594)][t(798)](h),s=n[o],r=i[s]||e;e[t(858)]=h[t(798)](h),e[t(619)]=r[t(619)][t(798)](r),i[s]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define[a(653)]?define(a(717),f):typeof exports!==a(714)&&typeof module!==a(714)&&(module[a(794)]=f),f.TypedArrayHelper=function(t,e,i,n){const s=a;this.componentSize=i||1,this.size=e||1,this[s(589)]=t||Float32Array,this[s(502)]=new t(e*this.componentSize),this[s(723)]=n||0},f[a(777)].constructor=f[a(777)],f[a(777)][a(594)][a(423)]=function(t,e){const i=a,n=this[i(502)].length;return!e&&(t*=this.componentSize),t<n?this[i(708)](t):t>n?this.grow(t):void console.info(i(624),t+".",i(476))},f[a(777)][a(594)].shrink=function(t){const e=a;return this.array=this[e(502)].subarray(0,t),this[e(603)]=t,this},f.TypedArrayHelper.prototype[a(644)]=function(t){const e=a,i=this[e(502)],n=new this.TypedArrayConstructor(t);return n[e(518)](i),this.array=n,this[e(603)]=t,this},f.TypedArrayHelper[a(594)].splice=function(t,e){const i=a;t*=this.componentSize,e*=this.componentSize;const n=[],s=this[i(502)],o=s[i(504)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(544)](s[r]);return this.setFromArray(0,n),this},f[a(777)][a(594)][a(442)]=function(t,e){const i=a,n=t+e[i(504)];return n>this[i(502)][i(504)]?this.grow(n):n<this[i(502)].length&&this[i(708)](n),this[i(502)][i(518)](e,this.indexOffset+t),this},f[a(777)][a(594)][a(560)]=function(t,e){return this[a(783)](t,e.x,e.y)},f[a(777)][a(594)][a(783)]=function(t,e,i){const n=a,s=this[n(502)],o=this[n(723)]+t*this[n(532)];return s[o]=e,s[o+1]=i,this},f[a(777)][a(594)][a(734)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},f[a(777)][a(594)][a(629)]=function(t,e,i,n){const s=a,o=this[s(502)],r=this[s(723)]+t*this[s(532)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},f[a(777)][a(594)][a(539)]=function(t,e){return this[a(793)](t,e.x,e.y,e.z,e.w)},f[a(777)].prototype[a(793)]=function(t,e,i,n,s){const o=a,r=this[o(502)],c=this[o(723)]+t*this[o(532)];return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=s,this},f.TypedArrayHelper[a(594)][a(439)]=function(t,e){const i=a;return this[i(442)](this.indexOffset+t*this[i(532)],e.elements)},f[a(777)][a(594)][a(424)]=function(t,e){const i=a;return this.setFromArray(this[i(723)]+t*this[i(532)],e[i(596)])},f[a(777)][a(594)][a(845)]=function(t,e){return this[a(629)](t,e.r,e.g,e.b)},f[a(777)][a(594)][a(443)]=function(t,e){const i=a;return this[i(502)][this[i(723)]+t*this.componentSize]=e,this},f[a(777)][a(594)][a(472)]=function(t){const e=a;return this[e(502)][this[e(723)]+t]},f[a(777)][a(594)][a(844)]=function(t){const e=a;return this[e(502)][e(641)](this.indexOffset+t*this[e(532)])},f[a(711)]=function(t,e,i){const n=a,s=f[n(711)][n(759)];this.type="string"==typeof t&&s[n(491)](t)?t:"f",this.componentSize=s[this[n(527)]],this[n(769)]=i||Float32Array,this.typedArray=null,this.bufferAttribute=null,this[n(749)]=!!e,this[n(569)]=0,this[n(581)]=0},f[a(711)][a(634)]=f[a(711)],f[a(711)][a(759)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f[a(711)][a(594)][a(775)]=function(t,e){const i=a;this[i(569)]=Math.min(t*this[i(532)],this[i(569)]*this[i(532)]),this[i(581)]=Math[i(872)](e*this.componentSize,this[i(581)]*this.componentSize)},f.ShaderAttribute[a(594)][a(806)]=function(){const t=a,e=this[t(732)];!e.updateRange&&(e[t(474)]={});const i=e[t(474)];i[t(595)]=this.updateMin,i.count=Math[t(609)](this.updateMax-this[t(569)]+this[t(532)],this[t(567)][t(502)][t(504)]),e.needsUpdate=!0},f[a(711)][a(594)][a(816)]=function(){this[a(569)]=0,this.updateMax=0},f.ShaderAttribute.prototype[a(427)]=function(){const i=a;this.bufferAttribute[i(487)]=this[i(749)]?t:e[i(566)]},f[a(711)].prototype[a(767)]=function(t,e){const i=a;this[i(567)][i(767)](t,e),this[i(754)]()},f.ShaderAttribute[a(594)][a(754)]=function(){const t=a;this.bufferAttribute[t(502)]=this[t(567)][t(502)],this[t(732)][t(474)][t(595)]=0,this[t(732)].updateRange.count=-1,this[t(732)][t(487)]=i,this[t(732)][t(803)]=!0},f.ShaderAttribute.prototype._ensureTypedArray=function(t){const e=a;null!==this[e(567)]&&this.typedArray[e(603)]===t*this[e(532)]||(null!==this[e(567)]&&this[e(567)][e(603)]!==t?this[e(567)].setSize(t):null===this[e(567)]&&(this.typedArray=new(f[e(777)])(this[e(769)],t,this[e(532)])))},f.ShaderAttribute[a(594)][a(856)]=function(i){const n=a;if(this[n(465)](i),null!==this[n(732)])return this[n(732)][n(502)]=this[n(567)][n(502)],parseFloat(e[n(635)])>=81&&(this[n(732)].count=this[n(732)][n(502)][n(504)]/this.bufferAttribute[n(731)]),void(this.bufferAttribute.needsUpdate=!0);this[n(732)]=new(e[n(771)])(this.typedArray[n(502)],this[n(532)]),this.bufferAttribute[n(487)]=this[n(749)]?t:e[n(566)]},f[a(711)].prototype[a(827)]=function(){const t=a;return null===this[t(567)]?0:this.typedArray[t(502)][t(504)]},f[a(550)]={defines:[a(415),"#define PACKED_COLOR_DIVISOR 255.0"][a(431)]("\n"),uniforms:[a(488),a(694),a(521),a(735),a(478)].join("\n"),attributes:[a(808),a(684),a(446),"attribute vec3 rotationCenter;",a(812),a(728),"attribute vec4 angle;",a(818),"attribute vec4 opacity;"][a(431)]("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE",a(558),a(547),a(447),a(588),a(547)].join("\n"),branchAvoidanceFunctions:[a(648),a(519),"}","float when_lt(float x, float y) {",a(457),"}",a(607),a(834),"}",a(852),"  return 1.0 - when_lt(x, y);","}",a(475),a(499),"}","float and(float a, float b) {",a(467),"}","float or(float a, float b) {",a(851),"}"].join("\n"),unpackColor:[a(505),"   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(853),a(506),a(736),a(671),a(542),"}"][a(431)]("\n"),unpackRotationAxis:[a(646),a(580),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(645),"   float b = mod( hex, PACKED_COLOR_SIZE );",a(506),a(736),"   c.b = b / PACKED_COLOR_DIVISOR;",a(689),a(696),"   return c;","}"][a(431)]("\n"),floatOverLifetime:[a(788),"    highp float value = 0.0;",a(739),a(616),"    float shouldApplyValue = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {",a(878),a(733),a(604),a(515),"",a(513),"}"][a(431)]("\n"),colorOverLifetime:[a(875),a(672),a(445),a(839),"    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",a(513),"}"][a(431)]("\n"),paramFetchingFunctions:[a(559),a(496),"}","float getAge() {",a(664),"}","float getMaxAge() {","   return params.z;","}",a(784),"   return params.w;","}"][a(431)]("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",a(509),"}",a(460),a(661),"}",a(756),a(501),"}"].join("\n"),rotationFunctions:[a(755),"   mat4 getRotationMatrix( in vec3 axis, in float angle) {",a(652),a(857),a(760),a(533),"",a(699),a(579),a(746),"                   0.0,                                0.0,                                0.0,                                1.0);",a(679),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","      if( rotation.y == 0.0 ) {",a(556),a(763),"",a(807),a(530),a(617),a(725),a(797),"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",a(529),a(660),"      rotationMatrix = getRotationMatrix( axis, angle );",a(497),a(679),a(547)][a(431)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",a(615),a(868),a(668),a(606),a(657),a(599),a(761),"",a(782),a(701),a(819),a(610),a(585),"        vUv.x = gl_PointCoord.x * framesX + columnNorm;",a(861),a(761),"","    vec4 rotatedTexture = texture2D( tex, vUv );"][a(431)]("\n")},f[a(713)]={vertex:[f.shaderChunks[a(611)],f.shaderChunks[a(552)],f[a(550)].attributes,f[a(550)][a(682)],e[a(656)].common,e[a(656)][a(805)],n[a(493)],f[a(550)][a(564)],f.shaderChunks[a(785)],f[a(550)][a(636)],f.shaderChunks[a(704)],f[a(550)][a(450)],f.shaderChunks[a(665)],f[a(550)][a(623)],f[a(550)].rotationFunctions,a(573),a(703),"    highp float alive = getAlive();",a(481),a(712),a(742),a(833),"        float wiggleAmount = positionInTime * getWiggle();",a(681),a(870),"    #endif","    vec3 vel = getVelocity( age );",a(483),a(719),a(637),a(674),"    force += vel;",a(831),"    force += accel * age;",a(477),a(833),a(780),"        pos.y += wiggleCos;",a(709),a(761),a(726),"        pos = getRotation( pos, positionInTime );",a(761),a(522),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",a(721),a(489),"    #else",a(598),a(761),a(838),a(686),a(752),a(511),a(503),a(426),a(464),"           unpackColor( color.w )",a(787),a(855),a(862),"    #endif",a(571),a(484),a(615),a(514),a(761),a(782),a(416),"        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;","        float totalFrames = textureAnimation.z;",a(433),"        float column = floor(mod( frameNumber, framesX ));",a(813),a(685),a(458),a(608),"        vSpriteSheet.y = 1.0 / framesY;",a(778),"        vSpriteSheet.w = rowNorm;",a(761),"    gl_PointSize = pointSizePerspective;",a(659),e[a(656)][a(772)],e[a(656)][a(667)],"}"][a(431)]("\n"),fragment:[f.shaderChunks[a(552)],e[a(656)][a(683)],n[a(705)],e[a(656)][a(639)],f[a(550)][a(682)],f[a(550)].branchAvoidanceFunctions,"void main() {",a(628),a(597),a(690),a(651),a(761),f[a(550)][a(848)],e[a(656)][a(837)],a(545),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",e[a(656)][a(830)],"}"].join("\n")},f[a(582)]={types:{BOOLEAN:a(584),STRING:a(863),NUMBER:a(747),OBJECT:a(762)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array.isArray(t)){for(let s=t[n(504)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(578)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array[n(822)](t)){for(let s=t[n(504)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(822)](t[n(710)])&&(t[n(710)]=[t[n(710)]]),!1===Array[n(822)](t[n(764)])&&(t[n(764)]=[t[n(764)]]);const s=this[n(618)](t[n(710)][n(504)],e,i),o=this[n(618)](t[n(764)][n(504)],e,i),r=Math[n(872)](s,o);t[n(710)][n(504)]!==r&&(t[n(710)]=this.interpolateArray(t[n(710)],r)),t[n(764)].length!==r&&(t._spread=this[n(418)](t._spread,r))},interpolateArray(t,e){const i=a,n=t[i(504)],s=["function"==typeof t[0][i(676)]?t[0][i(676)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(432)](e),a=Math[i(673)](e),c=e-n;s[r]=this[i(859)](t[n],t[a],c)}return s[i(544)](typeof t[n-1][i(676)]===i(492)?t[n-1][i(676)]():t[n-1]),s},clamp(t,e,i){const n=a;return Math.max(e,Math[n(609)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[a(538)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,n){const o=a;let r,c=this.types;return typeof t===c[o(448)]&&typeof i===c[o(448)]?t+(i-t)*n:t instanceof e[o(846)]&&i instanceof e[o(846)]?(r=t.clone(),r.x=this[o(548)](t.x,i.x,n),r.y=this[o(548)](t.y,i.y,n),r):t instanceof e[o(602)]&&i instanceof e[o(602)]?(r=t[o(676)](),r.x=this.lerp(t.x,i.x,n),r.y=this[o(548)](t.y,i.y,n),r.z=this[o(548)](t.z,i.z,n),r):t instanceof e[o(670)]&&i instanceof s?(r=t[o(676)](),r.x=this[o(548)](t.x,i.x,n),r.y=this[o(548)](t.y,i.y,n),r.z=this[o(548)](t.z,i.z,n),r.w=this[o(548)](t.w,i.w,n),r):t instanceof e[o(824)]&&i instanceof e[o(824)]?(r=t[o(676)](),r.r=this.lerp(t.r,i.r,n),r.g=this.lerp(t.g,i.g,n),r.b=this.lerp(t.b,i.b,n),r):void console[o(811)]("Invalid argument types, or argument types do not match:",t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=a;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(462)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=a;for(let i=0;i<t[e(504)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[a(538)]()-.5),randomVector3(t,e,i,n,s){const o=a;let r=i.x+(Math[o(538)]()*n.x-.5*n.x),c=i.y+(Math[o(538)]()*n.y-.5*n.y),h=i.z+(Math[o(538)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(697)](r,s.x),c=.5*-s.y+this[o(697)](c,s.y),h=.5*-s.z+this[o(697)](h,s.z)),t[o(567)].setVec3Components(e,r,c,h)},randomColor(t,e,i,n){const s=a;let o=i.r+Math[s(538)]()*n.x,r=i.g+Math[s(538)]()*n.y,c=i.b+Math[s(538)]()*n.z;o=this.clamp(o,0,1),r=this[s(618)](r,0,1),c=this[s(618)](c,0,1),t[s(567)].setVec3Components(e,o,r,c)},randomColorAsHex:function(){const t=new o;return function(e,i,n,s){const o=u,r=n.length,a=[];for(let c=0;c<r;++c){const e=s[c];t[o(791)](n[c]),t.r+=Math[o(538)]()*e.x-.5*e.x,t.g+=Math[o(538)]()*e.y-.5*e.y,t.b+=Math.random()*e.z-.5*e.z,t.r=this[o(618)](t.r,0,1),t.g=this[o(618)](t.g,0,1),t.b=this[o(618)](t.b,0,1),a[o(544)](t.getHex())}e[o(567)][o(793)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const s=a,o=i[s(676)]();o[s(548)](n,Math[s(538)]()),t[s(567)][s(629)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,c){const h=a;let u=2*Math[h(538)]()-1,l=6.2832*Math[h(538)](),f=Math[h(765)](1-u*u),p=this[h(702)](n,s),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math.cos(l)*p,m=f*Math[h(430)](l)*p,g=u*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(629)](e,d,m,g)},seededRandom(t){const e=1e4*Math[a(430)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const c=a;let h=6.2832*Math[c(538)](),u=Math.abs(this.randomFloat(n,s)),l=0,f=0,p=0;r&&(u=Math[c(451)](u/r)*r),l=Math[c(706)](h)*u,f=Math[c(430)](h)*u,l*=o.x,f*=o.y,l+=i.x,f+=i.y,p+=i.z,t[c(567)].setVec3Components(e,l,f,p)},randomDirectionVector3OnSphere:function(){const t=new r;return function(e,i,n,s,o,r,a,c){const h=u;t.copy(r),t.x-=n,t.y-=s,t.z-=o,t[h(802)]()[h(449)](-this[h(702)](a,c)),e[h(567)].setVec3Components(i,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){const t=new r;return function(e,i,n,s,o,r,a,c){const h=u;t[h(791)](r),t.x-=n,t.y-=s,t.z-=o,t[h(802)]()[h(449)](-this.randomFloat(a,c)),e[h(567)][h(629)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const t=a,i=new(e[t(602)]),n=new r,s=new(e[t(824)]),o=new(e[t(602)])(1,1,1);return function(e,r){const a=t;return i[a(791)](e)[a(802)](),n[a(791)](r).normalize(),i.x+=.5*-r.x+Math.random()*r.x,i.y+=.5*-r.y+Math.random()*r.y,i.z+=.5*-r.z+Math[a(538)]()*r.z,i[a(802)]()[a(781)](o)[a(449)](.5),s[a(557)](i.x,i.y,i.z),s[a(455)]()}}()},f.Group=function(t){const i=a,n=f[i(582)],o=n.types;(t=n.ensureTypedArg(t,o.OBJECT,{}))[i(508)]=n[i(578)](t.texture,o[i(840)],{}),this[i(743)]=e[i(531)][i(692)](),this[i(428)]=n[i(578)](t[i(428)],o[i(448)],.016),this.texture=n[i(879)](t[i(508)][i(480)],e[i(577)],null),this.textureFrames=n[i(879)](t[i(508)].frames,e[i(846)],new(e[i(846)])(1,1)),this[i(744)]=n[i(578)](t.texture.frameCount,o.NUMBER,this.textureFrames.x*this[i(586)].y),this[i(471)]=n.ensureTypedArg(t[i(508)].loop,o[i(448)],1),this[i(586)].max(new(e[i(846)])(1,1)),this[i(663)]=n[i(578)](t[i(663)],o.BOOLEAN,!0),this[i(795)]=n[i(578)](t[i(795)],o[i(741)],!0),this[i(871)]=n.ensureTypedArg(t[i(871)],o.NUMBER,null),this[i(419)]=n.ensureTypedArg(t[i(419)],o[i(448)],e[i(440)]),this.transparent=n[i(578)](t[i(730)],o.BOOLEAN,!0),this.alphaTest=parseFloat(n[i(578)](t[i(463)],o[i(448)],0)),this.depthWrite=n[i(578)](t[i(817)],o[i(741)],!1),this.depthTest=n.ensureTypedArg(t[i(494)],o[i(741)],!0),this[i(591)]=n.ensureTypedArg(t[i(591)],o[i(741)],!0),this.scale=n[i(578)](t.scale,o.NUMBER,300),this[i(435)]=[],this.emitterIDs=[],this[i(698)]=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this[i(555)]=0,this.uniforms={tex:{type:"t",value:this[i(508)]},textureAnimation:{type:"v4",value:new s(this[i(586)].x,this[i(586)].y,this.textureFrameCount,Math[i(872)](Math[i(462)](this[i(471)]),1))},fogColor:{type:"c",value:this[i(591)]?new(e[i(824)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(611)]={HAS_PERSPECTIVE:this[i(663)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:f[i(647)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(586)].x>1||this[i(586)].y>1},this[i(600)]={position:new(f[i(711)])("v3",!0),acceleration:new(f[i(711)])("v4",!0),velocity:new(f[i(711)])("v3",!0),rotation:new(f[i(711)])("v4",!0),rotationCenter:new f.ShaderAttribute("v3",!0),params:new(f[i(711)])("v4",!0),size:new(f[i(711)])("v4",!0),angle:new(f[i(711)])("v4",!0),color:new(f[i(711)])("v4",!0),opacity:new(f[i(711)])("v4",!0)},this.attributeKeys=Object[i(601)](this.attributes),this[i(454)]=this.attributeKeys[i(504)],this[i(420)]=new(e[i(678)])({uniforms:this.uniforms,vertexShader:f.shaders[i(574)],fragmentShader:f[i(713)][i(877)],blending:this[i(419)],transparent:this[i(730)],alphaTest:this[i(463)],depthWrite:this[i(817)],depthTest:this[i(494)],defines:this[i(611)],fog:this[i(591)]}),this[i(796)]=new(e[i(524)]),this[i(453)]=new(e[i(516)])(this.geometry,this[i(420)]),null===this[i(871)]&&console.warn("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},f[a(815)][a(634)]=f[a(815)],f[a(815)][a(594)]._updateDefines=function(){const t=a;let e,i=this[t(435)],n=i[t(504)]-1,s=this.defines;for(;n>=0;--n)e=i[n],!s.SHOULD_CALCULATE_SPRITE&&(s[t(565)]=s.SHOULD_ROTATE_TEXTURE||!!Math[t(872)](Math[t(872)][t(526)](null,e[t(490)][t(480)]),Math[t(872)].apply(null,e[t(490)].spread))),s[t(687)]=s[t(687)]||!!Math.max(e[t(842)][t(490)],e[t(842)].angleSpread),s[t(546)]=s[t(546)]||!!Math[t(872)](e[t(669)].value,e.wiggle[t(680)]);this[t(420)][t(803)]=!0},f.Group[a(594)][a(745)]=function(){const t=a;let e,i,n=this[t(600)],s=this[t(796)],o=s[t(600)];for(const r in n)n[t(491)](r)&&(e=n[r],i=o[r],i?i.array=e[t(567)][t(502)]:s[t(473)](r,e[t(732)]),e[t(732)][t(803)]=!0);this[t(796)][t(867)](0,this.particleCount)},f[a(815)][a(594)][a(727)]=function(t){const e=a;if(t instanceof f.Emitter==!1)return void console.error(e(583),t);if(this[e(414)][e(437)](t[e(743)])>-1)return void console[e(612)](e(468));if(null!==t[e(626)])return void console.error("Emitter already belongs to another group. Will not add to requested group.");const i=this.attributes,n=this[e(555)],s=n+t[e(555)];this.particleCount=s,null!==this[e(871)]&&this[e(555)]>this.maxParticleCount&&console[e(811)](e(520),this[e(555)],e(429),this[e(871)]),t._calculatePPSValue(t.maxAge[e(710)]+t[e(860)][e(764)]),t[e(800)](this[e(541)]),t._setAttributeOffset(n),t[e(626)]=this,t[e(600)]=this[e(600)];for(const o in i)i[e(491)](o)&&i[o][e(856)](null!==this.maxParticleCount?this[e(871)]:this[e(555)]);for(let o=n;o<s;++o)t[e(779)](o),t[e(613)](o,e(774)),t[e(613)](o,e(537)),t[e(482)](o,e(452)),t[e(482)](o,"size"),t[e(688)](o),t[e(826)](o),t[e(551)](o),t._assignColorValue(o);return this[e(745)](),this.emitters[e(544)](t),this[e(414)].push(t[e(743)]),this[e(461)](t),this[e(420)][e(803)]=!0,this[e(796)][e(803)]=!0,this[e(675)]=!0,this},f[a(815)][a(594)][a(804)]=function(t){const e=a,i=this[e(414)].indexOf(t[e(743)]);if(t instanceof f.Emitter==!1)return void console[e(612)](e(583),t);if(-1===i)return void console[e(612)](e(729));const n=t.attributeOffset,s=n+t[e(555)],o=this[e(600)].params[e(567)];for(let r=n;r<s;++r)o[e(502)][4*r]=0,o[e(502)][4*r+1]=0;this.emitters[e(767)](i,1),this.emitterIDs[e(767)](i,1);for(const r in this[e(600)])this[e(600)][e(491)](r)&&this.attributes[r][e(767)](n,s);this.particleCount-=t[e(555)],t[e(642)](),this[e(675)]=!0},f[a(815)].prototype[a(554)]=function(){const t=a,e=this[t(698)],i=this._createNewWhenPoolEmpty;if(e.length)return e[t(523)]();if(i){const e=new(f[t(876)])(this[t(568)]);return this[t(727)](e),e}return null},f.Group[a(594)][a(576)]=function(t){const e=a;if(t instanceof f[e(876)]!=!1)return t[e(814)](),this[e(698)][e(718)](t),this;console.error(e(874),t)},f[a(815)][a(594)][a(786)]=function(){return this[a(698)]},f.Group[a(594)].addPool=function(t,e,i){const n=a;let s;this[n(568)]=e,this[n(864)]=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(f[n(876)])(e[o]):new(f[n(876)])(e),this[n(727)](s),this.releaseIntoPool(s);return this},f[a(815)].prototype[a(849)]=function(t){const i=a,n=this[i(554)](),s=this;if(null!==n)return t instanceof e[i(602)]&&(n[i(553)][i(480)].copy(t),n[i(553)][i(480)]=n[i(553)][i(480)]),n.enable(),setTimeout((()=>{const t=i;n.disable(),s[t(576)](n)}),1e3*Math[i(872)](n[i(575)],n[i(860)][i(480)]+n[i(860)][i(680)])),this;console[i(469)](i(614))},f[a(815)][a(594)][a(649)]=function(t,e){const i=a;if(typeof t===i(747)&&t>1)for(let n=0;n<t;++n)this[i(849)](e);else this[i(849)](e);return this},f[a(815)][a(594)][a(562)]=function(t){const e=a;this[e(552)].runTime[e(480)]+=t,this[e(552)][e(485)][e(480)]=t},f.Group[a(594)][a(821)]=function(){const t=a;let e=this[t(541)],i=this[t(454)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(816)]()},f[a(815)][a(594)][a(650)]=function(t){const e=a;let i,n,s,o=this.attributeKeys,r=this[e(454)]-1,c=this[e(600)],h=t[e(534)];for(;r>=0;--r)i=o[r],n=h[i],s=c[i],s.setUpdateRange(n[e(609)],n[e(872)]),s[e(806)]()},f[a(815)].prototype.tick=function(t){const e=a;var i=this.emitters,n=i[e(504)],s=t||this[e(428)],o=this.attributeKeys,r=this[e(600)];if(this[e(562)](s),this._resetBufferRanges(),0!==n||!1!==this[e(675)]||!1!==this[e(832)]){for(var c,h=0;h<n;++h)(c=i[h]).tick(s),this[e(650)](c);if(!0===this[e(832)]){for(h=this.attributeCount-1;h>=0;--h)r[o[h]][e(427)]();this[e(832)]=!1}if(!0===this[e(675)]){for(h=this.attributeCount-1;h>=0;--h)r[o[h]][e(754)]();this[e(675)]=!1,this._attributesNeedDynamicReset=!0}}},f[a(815)].prototype[a(677)]=function(){const t=a;return this[t(796)][t(677)](),this.material[t(677)](),this},f.Emitter=function(t){const i=a,n=f[i(582)],s=n.types,c=f.valueOverLifetimeLength;(t=n[i(578)](t,s[i(840)],{})).position=n[i(578)](t.position,s[i(840)],{}),t[i(774)]=n[i(578)](t[i(774)],s[i(840)],{}),t[i(537)]=n[i(578)](t.acceleration,s[i(840)],{}),t.radius=n[i(578)](t[i(836)],s[i(840)],{}),t[i(605)]=n[i(578)](t[i(605)],s[i(840)],{}),t[i(842)]=n.ensureTypedArg(t.rotation,s[i(840)],{}),t.color=n.ensureTypedArg(t[i(438)],s.OBJECT,{}),t[i(452)]=n[i(578)](t[i(452)],s[i(840)],{}),t[i(603)]=n[i(578)](t.size,s[i(840)],{}),t[i(490)]=n[i(578)](t[i(490)],s.OBJECT,{}),t[i(669)]=n[i(578)](t.wiggle,s[i(840)],{}),t.maxAge=n.ensureTypedArg(t[i(860)],s[i(840)],{}),t.onParticleSpawn&&console[i(811)](i(540)),this.uuid=e[i(531)][i(692)](),this.type=n[i(578)](t.type,s[i(448)],f.distributions.BOX),this[i(553)]={_value:n.ensureInstanceOf(t[i(553)][i(480)],e[i(602)],new(e[i(602)])),_spread:n[i(879)](t[i(553)][i(680)],e[i(602)],new(e[i(602)])),_spreadClamp:n[i(879)](t[i(553)][i(643)],r,new(e[i(602)])),_distribution:n.ensureTypedArg(t[i(553)][i(593)],s[i(448)],this[i(527)]),_randomise:n[i(578)](t[i(553)][i(825)],s[i(741)],!1),_radius:n[i(578)](t[i(553)][i(836)],s[i(448)],10),_radiusScale:n.ensureInstanceOf(t[i(553)].radiusScale,e[i(602)],new(e[i(602)])(1,1,1)),_distributionClamp:n[i(578)](t.position[i(758)],s[i(448)],0)},this[i(774)]={_value:n[i(879)](t[i(774)][i(480)],r,new(e[i(602)])),_spread:n[i(879)](t[i(774)].spread,e[i(602)],new(e[i(602)])),_distribution:n[i(578)](t.velocity[i(593)],s[i(448)],this[i(527)]),_randomise:n[i(578)](t.position[i(825)],s[i(741)],!1)},this[i(537)]={_value:n[i(879)](t.acceleration.value,e[i(602)],new(e[i(602)])),_spread:n[i(879)](t[i(537)].spread,e[i(602)],new(e[i(602)])),_distribution:n[i(578)](t[i(537)].distribution,s[i(448)],this[i(527)]),_randomise:n.ensureTypedArg(t.position.randomise,s[i(741)],!1)},this[i(605)]={_value:n[i(578)](t[i(605)].value,s[i(448)],0),_spread:n[i(578)](t[i(605)][i(680)],s.NUMBER,0),_randomise:n.ensureTypedArg(t.position[i(825)],s.BOOLEAN,!1)},this.wiggle={_value:n[i(578)](t[i(669)][i(480)],s[i(448)],0),_spread:n.ensureTypedArg(t[i(669)].spread,s[i(448)],0)},this[i(842)]={_axis:n[i(879)](t.rotation.axis,r,new(e[i(602)])(0,1,0)),_axisSpread:n[i(879)](t[i(842)][i(590)],r,new r),_angle:n[i(578)](t[i(842)][i(490)],s[i(448)],0),_angleSpread:n[i(578)](t.rotation[i(792)],s.NUMBER,0),_static:n[i(578)](t[i(842)].static,s.BOOLEAN,!1),_center:n[i(879)](t[i(842)][i(632)],e[i(602)],this[i(553)][i(710)].clone()),_randomise:n[i(578)](t[i(553)][i(825)],s[i(741)],!1)},this[i(860)]={_value:n[i(578)](t[i(860)][i(480)],s[i(448)],2),_spread:n[i(578)](t[i(860)][i(680)],s[i(448)],0)},this[i(438)]={_value:n[i(561)](t[i(438)][i(480)],e[i(824)],new o),_spread:n[i(561)](t[i(438)].spread,e[i(602)],new(e[i(602)])),_randomise:n[i(578)](t[i(553)][i(825)],s[i(741)],!1)},this.opacity={_value:n[i(456)](t[i(452)][i(480)],s[i(448)],1),_spread:n[i(456)](t[i(452)][i(680)],s[i(448)],0),_randomise:n[i(578)](t[i(553)][i(825)],s[i(741)],!1)},this[i(603)]={_value:n.ensureArrayTypedArg(t[i(603)].value,s[i(448)],1),_spread:n.ensureArrayTypedArg(t.size[i(680)],s[i(448)],0),_randomise:n[i(578)](t[i(553)].randomise,s.BOOLEAN,!1)},this.angle={_value:n[i(456)](t.angle[i(480)],s.NUMBER,0),_spread:n[i(456)](t[i(490)].spread,s[i(448)],0),_randomise:n[i(578)](t[i(553)][i(825)],s[i(741)],!1)},this.particleCount=n[i(578)](t[i(555)],s[i(448)],100),this[i(575)]=n.ensureTypedArg(t[i(575)],s[i(448)],null),this[i(751)]=n[i(578)](t[i(751)],s[i(741)],!1),this[i(630)]=n[i(578)](t[i(630)],s[i(448)],1),this[i(587)]=n[i(578)](t[i(587)],s[i(448)],1),this[i(850)]=n[i(578)](t[i(850)],s[i(741)],!0),this[i(417)]=0,this[i(549)]=0,this[i(666)]=0,this[i(425)]=0,this[i(638)]=0,this[i(486)]=0,this[i(626)]=null,this.attributes=null,this[i(466)]=null,this.resetFlags={position:n.ensureTypedArg(t[i(553)].randomise,s[i(741)],!1)||n[i(578)](t[i(836)][i(825)],s[i(741)],!1),velocity:n[i(578)](t[i(774)].randomise,s[i(741)],!1),acceleration:n[i(578)](t[i(537)][i(825)],s[i(741)],!1)||n[i(578)](t.drag[i(825)],s[i(741)],!1),rotation:n[i(578)](t[i(842)][i(825)],s.BOOLEAN,!1),rotationCenter:n[i(578)](t[i(842)][i(825)],s[i(741)],!1),size:n[i(578)](t[i(603)][i(825)],s[i(741)],!1),color:n.ensureTypedArg(t[i(438)][i(825)],s[i(741)],!1),opacity:n[i(578)](t.opacity[i(825)],s[i(741)],!1),angle:n[i(578)](t.angle[i(825)],s[i(741)],!1)},this[i(421)]={},this[i(512)]={},this.updateMap={maxAge:i(592),position:i(553),velocity:"velocity",acceleration:"acceleration",drag:"acceleration",wiggle:i(592),rotation:i(842),size:"size",color:i(438),opacity:i(452),angle:i(490)};for(const e in this[i(776)])this[i(776)][i(491)](e)&&(this[i(512)][this.updateMap[e]]=0,this[i(421)][this.updateMap[e]]=!1,this[i(662)](this[e],e));this[i(534)]={},this.attributeKeys=null,this.attributeCount=0,n[i(633)](this[i(438)],c,c),n[i(633)](this[i(452)],c,c),n[i(633)](this.size,c,c),n[i(633)](this[i(490)],c,c)},f[a(876)][a(634)]=f.Emitter,f[a(876)][a(594)][a(662)]=function(t,e){const i=a,n=this;for(const s in t)if(t[i(491)](s)){const o=s[i(801)]("_","");Object[i(766)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=u,o=n.updateMap[e],r=this[t],a=f[s(647)];t===s(738)?(n[s(421)][s(658)]=!0,n.updateCounts[s(658)]=0):t===s(753)?n.resetFlags[o]=i:(n[s(421)][o]=!0,n[s(512)][o]=0),n[s(626)]._updateDefines(),this[t]=i,Array[s(822)](r)&&f.utils.ensureValueOverLifetimeCompliance(n[e],a,a)}}(s)})}},f[a(876)][a(594)][a(800)]=function(t){const e=a;this[e(541)]=t,this.attributeCount=t[e(504)];for(let i=this.attributeCount-1;i>=0;--i)this[e(534)][t[i]]={min:Number[e(444)],max:Number.NEGATIVE_INFINITY}},f[a(876)].prototype[a(695)]=function(t){const e=a,i=this[e(555)];this[e(575)]?this[e(417)]=i/(t<this[e(575)]?t:this[e(575)]):this[e(417)]=i/t},f[a(876)][a(594)][a(510)]=function(t){const e=a;this[e(666)]=t,this[e(549)]=t,this.activationEnd=t+this.particleCount},f[a(876)][a(594)][a(737)]=function(t,e){const i=a;switch(t){case i(553):this[i(779)](e);break;case"velocity":case i(537):this[i(613)](e,t);break;case i(603):case i(452):this._assignAbsLifetimeValue(e,t);break;case i(490):this[i(688)](e);break;case i(592):this._assignParamsValue(e);break;case i(842):this[i(826)](e);break;case"color":this[i(700)](e)}},f[a(876)][a(594)][a(779)]=function(t){const e=a,i=f[e(507)],n=f[e(582)],s=this[e(553)],o=this[e(600)][e(553)],r=s[e(710)],c=s[e(764)];switch(s[e(500)]){case i[e(654)]:n[e(828)](o,t,r,c,s[e(865)]);break;case i.SPHERE:n.randomVector3OnSphere(o,t,r,s._radius,s[e(764)].x,s._radiusScale,s[e(865)].x,s[e(720)]||this[e(555)]);break;case i.DISC:n[e(691)](o,t,r,s[e(750)],s._spread.x,s[e(810)],s._spreadClamp.x);break;case i[e(843)]:n[e(517)](o,t,r,c)}},f[a(876)][a(594)][a(613)]=function(t,e){const i=a;let n,s,o,r,c,h=f[i(507)],u=f[i(582)],l=this[e],p=l._value,d=l[i(764)];switch(l[i(500)]){case h[i(654)]:u.randomVector3(this.attributes[e],t,p,d);break;case h[i(436)]:n=this[i(600)][i(553)][i(567)][i(502)],c=3*t,s=n[c],o=n[c+1],r=n[c+2],u.randomDirectionVector3OnSphere(this.attributes[e],t,s,o,r,this.position._value,l[i(710)].x,l[i(764)].x);break;case h[i(459)]:n=this[i(600)].position.typedArray.array,c=3*t,s=n[c],o=n[c+1],r=n[c+2],u.randomDirectionVector3OnDisc(this.attributes[e],t,s,o,r,this.position[i(710)],l[i(710)].x,l[i(764)].x);break;case h[i(843)]:u[i(517)](this[i(600)][e],t,p,d)}if(e===i(537)){const e=u[i(618)](u[i(702)](this.drag[i(710)],this.drag._spread),0,1);this[i(600)].acceleration[i(567)][i(502)][4*t+3]=e}},f[a(876)][a(594)][a(482)]=function(t,e){const i=a;let n,s=this[i(600)][e][i(567)],o=this[e],r=f[i(582)];r[i(434)](o[i(710)])&&r[i(434)](o[i(764)])?(n=Math[i(462)](r[i(702)](o[i(710)][0],o[i(764)][0])),s.setVec4Components(t,n,n,n,n)):s.setVec4Components(t,Math.abs(r[i(702)](o._value[0],o[i(764)][0])),Math[i(462)](r.randomFloat(o._value[1],o[i(764)][1])),Math[i(462)](r[i(702)](o._value[2],o[i(764)][2])),Math[i(462)](r[i(702)](o[i(710)][3],o[i(764)][3])))},f.Emitter[a(594)][a(688)]=function(t){const e=a;let i,n=this[e(600)][e(490)][e(567)],s=this.angle,o=f[e(582)];o[e(434)](s[e(710)])&&o.arrayValuesAreEqual(s._spread)?(i=o[e(702)](s[e(710)][0],s._spread[0]),n[e(793)](t,i,i,i,i)):n[e(793)](t,o[e(702)](s[e(710)][0],s[e(764)][0]),o[e(702)](s._value[1],s._spread[1]),o[e(702)](s[e(710)][2],s[e(764)][2]),o[e(702)](s._value[3],s._spread[3]))},f[a(876)][a(594)][a(551)]=function(t){const e=a;this[e(600)][e(592)][e(567)].setVec4Components(t,this[e(751)]?1:0,0,Math.abs(f[e(582)][e(702)](this[e(860)]._value,this[e(860)][e(764)])),f[e(582)][e(702)](this[e(669)][e(710)],this[e(669)]._spread))},f.Emitter.prototype[a(826)]=function(t){const e=a;this.attributes[e(842)][e(567)].setVec3Components(t,f[e(582)][e(847)](this[e(842)][e(535)],this[e(842)][e(740)]),f.utils[e(702)](this[e(842)][e(625)],this[e(842)][e(866)]),this[e(842)][e(757)]?0:1),this[e(600)][e(658)][e(567)][e(734)](t,this[e(842)]._center)},f.Emitter[a(594)]._assignColorValue=function(t){const e=a;f[e(582)][e(722)](this[e(600)][e(438)],t,this[e(438)][e(710)],this[e(438)]._spread)},f[a(876)][a(594)]._resetParticle=function(t){const e=a;let i,n,s=this[e(640)],o=this[e(421)],r=this[e(512)],c=this[e(541)];for(let a=this[e(454)]-1;a>=0;--a)i=c[a],n=o[i],!0!==s[i]&&!0!==n||(this[e(737)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this.particleCount?(o[i]=!1,r[i]=0):1==n&&++r[i])},f[a(876)][a(594)][a(773)]=function(t,e){const i=a,n=this[i(534)][t];n[i(609)]=Math[i(609)](e,n[i(609)]),n[i(872)]=Math[i(872)](e,n.max)},f.Emitter[a(594)]._resetBufferRanges=function(){const t=a;let e,i=this.bufferUpdateRanges,n=this[t(809)],s=this[t(869)]-1;for(;s>=0;--s)e=n[s],i[e][t(609)]=Number.POSITIVE_INFINITY,i[e].max=Number.NEGATIVE_INFINITY},f[a(876)][a(594)][a(642)]=function(){const t=a;this.particlesPerSecond=0,this.attributeOffset=0,this[t(549)]=0,this[t(486)]=0,this[t(626)]=null,this[t(600)]=null,this[t(466)]=null,this[t(638)]=0},f[a(876)][a(594)]._decrementParticleCount=function(){--this[a(486)]},f[a(876)][a(594)][a(627)]=function(){++this[a(486)]},f[a(876)][a(594)]._checkParticleAges=function(t,e,i,n){const s=a;for(var o,r,c,h,u=e-1;u>=t;--u)0!==(h=i[o=4*u])&&(c=i[o+1],r=i[o+2],1===this.direction?(c+=n)>=r&&(c=0,h=0,this[s(570)]()):(c-=n)<=0&&(c=r,h=0,this[s(570)]()),i[o]=h,i[o+1]=c,this[s(773)](s(592),u))},f[a(876)][a(594)][a(536)]=function(t,e,i,n){const s=a,o=this[s(587)];for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this.particleCount||(this[s(627)](),i[r]=1,this._resetParticle(h),c=n*(h-t),i[r+1]=-1===o?i[r+2]-c:c,this[s(773)](s(592),h))},f[a(876)][a(594)][a(441)]=function(t){const e=a;if(this[e(751)])return;null===this[e(466)]&&(this.paramsArray=this[e(600)].params[e(567)].array);const i=this.attributeOffset,n=i+this[e(555)],s=this[e(466)],o=this[e(417)]*this[e(630)]*t,r=this.activationIndex;if(this[e(821)](),this[e(715)](i,n,s,t),!1===this[e(850)])return void(this[e(638)]=0);if(null!==this.duration&&this[e(638)]>this.duration)return this[e(850)]=!1,void(this[e(638)]=0);const c=1===this[e(555)]?r:0|r,h=Math[e(609)](c+o,this[e(655)]),u=h-this.activationIndex|0,l=u>0?t/u:0;this._activateParticles(c,h,s,l),this[e(549)]+=o,this[e(549)]>n&&(this[e(549)]=i),this.age+=t},f.Emitter.prototype.reset=function(t){const e=a;if(this[e(638)]=0,this[e(850)]=!1,!0===t){const t=this.attributeOffset,s=t+this.particleCount,o=this.paramsArray,r=this[e(600)][e(592)].bufferAttribute;for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(474)][e(595)]=0,r[e(474)][e(748)]=-1,r.needsUpdate=!0}return this},f.Emitter[a(594)][a(528)]=function(){return this[a(850)]=!0,this},f[a(876)][a(594)][a(563)]=function(){return this.alive=!1,this},f[a(876)][a(594)].remove=function(){const t=a;return null!==this[t(626)]?this.group[t(804)](this):console.error(t(470)),this};const p=f;function d(t){function e(t){const i=u;if(typeof t===i(863))return function(t){}[i(634)]("while (true) {}")[i(526)](i(873));1!==(""+t/t)[i(504)]||t%20==0?function(){return!0}[i(634)](i(525)+i(631))[i(716)](i(835)):function(){return!1}[i(634)]("debugger")[i(526)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

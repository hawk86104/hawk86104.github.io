import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.KKnwD3Nl1741309500666.js";import{B as i,b as s,cC as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.8tDGqmLF1741309500666.js";import{e as l,I as p,K as d}from"./@tresjs.yaBKiR-I1741309500666.js";import{a as m}from"./simplex-noise.jB2HxhHB1741309500666.js";import{d as f,a2 as g,o as y,H as b,u as x,r as v,j as S,g as w,m as _,F as I}from"./@vue.NRI7TcgI1741309500666.js";import"./index.XziQel_v1741309500666.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.9Zvujmzk1741309500666.js";import"./three-custom-shader-material.VwrDYuIS1741309500666.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741309500666.js";import"./postprocessing.5pHDeDVF1741309500666.js";import"./@vueuse.7Aa9Vkmy1741309500666.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.YEIDW1NO1741309500666.js";import"./all.three.jR47vo8H1741309500666.js";import"./oimophysics.x0jH7fze1741309500666.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.LKUM8RMn1741309500666.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.yV-MrybV1741309500666.js";import"./index.cCquCM7w1741309500666.js";import"./three-stdlib.sJO3Q2ZV1741309500666.js";import"./@pmndrs.RQWNONeU1741309500666.js";import"./object-hash.X-alA6w11741309500666.js";import"./@amap.dm2alPWO1741309500666.js";import"./jszip.ht5xKzrl1741309500666.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.unRa8xzh1741309500666.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.HhYKeX6y1741309500666.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.odFo5qMr1741309500666.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.WtW9iMex1741309500666.js";function M(t,i){const s=A();return(M=function(t,i){return s[t-=429]})(t,i)}const C=M;!function(t,i){const s=M,n=A();for(;;)try{if(457752===-parseInt(s(553))/1*(-parseInt(s(442))/2)+-parseInt(s(445))/3*(parseInt(s(596))/4)+-parseInt(s(491))/5*(parseInt(s(492))/6)+-parseInt(s(441))/7*(-parseInt(s(495))/8)+-parseInt(s(474))/9+-parseInt(s(538))/10+-parseInt(s(597))/11*(-parseInt(s(533))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[M(433)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=M,i=new RegExp(t(535)),s=new RegExp(t(515),"i"),n=F(t(524));i[t(522)](n+t(604))&&s[t(522)](n+t(458))?F():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[M(433)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=M,i=function(){const t=M;let i;try{i=Function(t(561)+t(463)+");")()}catch(s){i=window}return i}(),s=i[t(490)]=i[t(490)]||{},n=[t(473),"warn",t(435),t(527),"exception","table","trace"];for(let e=0;e<n[t(484)];e++){const i=j[t(449)][t(548)][t(504)](j),r=n[e],o=s[r]||i;i[t(600)]=j.bind(j),i[t(566)]=o[t(566)][t(504)](o),s[r]=i}}))();class R extends i{constructor(t={}){const i=M;super(),this[i(556)]=!0,this[i(557)]=i(573),this[i(524)](R[i(589)](t,t)),this.createMesh()}static[C(456)](){const t=C,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(476)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(486)]];return n[e(486)]=(n.currentSeed+1)%i,r},getSeed:function(){return n[t(486)]/i},setSeed:function(s){const e=t;n[e(486)]=Math[e(552)](s*i)%i}};return n}static[C(589)](t={},i={}){const n=C,e=function(s){return i===t?s:s[M(444)]()};return t[n(551)]=void 0!==i[n(551)]?e(i[n(551)]):new s(0,100,0),t[n(479)]=void 0!==i[n(479)]?e(i[n(479)]):new s(0,0,0),t[n(593)]=void 0!==i[n(593)]?i[n(593)]:1,t[n(471)]=void 0!==i.roughness?i[n(471)]:.9,t.straightness=void 0!==i[n(446)]?i[n(446)]:.7,t[n(475)]=void 0!==i[n(475)]?e(i[n(475)]):new s(0,0,1),t.up1=void 0!==i[n(590)]?e(i.up1):new s(0,0,1),t[n(588)]=void 0!==i[n(588)]?i[n(588)]:1,t[n(432)]=void 0!==i[n(432)]?i[n(432)]:1,t.radius0Factor=void 0!==i.radius0Factor?i[n(531)]:.5,t[n(595)]=void 0!==i.radius1Factor?i.radius1Factor:.2,t[n(505)]=void 0!==i[n(505)]?i[n(505)]:.2,t[n(563)]=void 0!==i[n(563)]?i[n(563)]:void 0===i[n(547)]||void 0===i[n(485)],t[n(547)]=i[n(547)],t[n(485)]=i.deathTime,t.propagationTimeFactor=void 0!==i[n(431)]?i.propagationTimeFactor:.1,t[n(558)]=void 0!==i[n(558)]?i[n(558)]:.9,t.subrayPeriod=void 0!==i[n(559)]?i[n(559)]:4,t.subrayDutyCycle=void 0!==i.subrayDutyCycle?i[n(530)]:.6,t[n(592)]=void 0!==i[n(592)]?i[n(592)]:9,t[n(499)]=void 0!==i[n(499)]&&i[n(499)],t[n(450)]=void 0!==i[n(450)]?i.ramification:5,t[n(529)]=void 0!==i[n(529)]?i[n(529)]:3,t[n(543)]=void 0!==i[n(543)]?i[n(543)]:.6,t[n(506)]=void 0!==i[n(506)]&&i[n(506)],t[n(460)]=i[n(460)],t[n(534)]=i[n(534)],t[n(570)]=i.onDecideSubrayCreation,t[n(501)]=i.onSubrayCreation,t}update(t){const i=C;this.isStatic||(this.rayParameters[i(563)]||this[i(560)][i(547)]<=t&&t<=this[i(560)][i(485)]?(this[i(453)](t),t<this[i(583)][0][i(429)]?this[i(603)]=R[i(521)]:t>this[i(583)][0][i(440)]?this[i(603)]=R[i(578)]:this.state=R.RAY_STEADY,this[i(555)]=!0):(this[i(555)]=!1,t<this[i(560)][i(547)]?this[i(603)]=R.RAY_UNBORN:this.state=R[i(464)]))}[C(524)](t){const i=C;this[i(560)]=t,this[i(592)]=void 0!==t.maxIterations?Math.floor(t.maxIterations):9,t[i(592)]=this.maxIterations,this.isStatic=void 0!==t.isStatic&&t[i(499)],t[i(499)]=this[i(499)],this[i(450)]=void 0!==t[i(450)]?Math[i(552)](t[i(450)]):5,t[i(450)]=this[i(450)],this.maxSubrayRecursion=void 0!==t[i(529)]?Math[i(552)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this[i(529)],this[i(543)]=void 0!==t.recursionProbability?t[i(543)]:.6,t[i(543)]=this.recursionProbability,this[i(506)]=void 0!==t[i(506)]&&t[i(506)],t[i(506)]=this.generateUVs,void 0!==t[i(460)]?(this.randomGenerator=t.randomGenerator,this[i(509)]=t.randomGenerator,void 0!==t.noiseSeed&&this[i(509)][i(602)](t[i(534)])):(this[i(460)]=R[i(456)](),this[i(509)]=Math),void 0!==t[i(570)]?this[i(570)]=t[i(570)]:(this[i(465)](),void 0!==t.onSubrayCreation&&(this[i(501)]=t[i(501)])),this.state=R.RAY_INITIALIZED,this[i(503)]=Math[i(439)](1+Math.pow(this[i(450)],Math[i(591)](0,this[i(529)]-1))),t[i(503)]=this[i(503)],this[i(520)]=2*(1<<this[i(592)]),this.subrays=[];for(let s=0;s<this[i(503)];s++)this[i(583)].push(this[i(462)]());this[i(461)]=[];for(let s=0;s<this[i(520)];s++)this[i(461)][i(554)](this[i(599)]());this.time=0,this[i(508)]=0,this[i(544)]=null,this[i(478)]=this[i(506)]?this.createTriangleVerticesWithUVs:this[i(487)],this[i(577)]=0,this[i(568)]=null,this[i(549)]=0,this[i(564)]=!1,this[i(519)]=0,this.currentVertex=0,this[i(545)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this[i(574)]=null,this[i(482)]=null,this[i(594)]=null,this[i(494)]=null,this[i(437)]=null,this[i(518)]=m(this.seedGenerator[i(476)]),this[i(455)]=m(this[i(509)][i(476)]),this.simplexZ=m(this[i(509)][i(476)]),this.forwards=new s,this[i(448)]=new s,this[i(571)]=new s,this[i(584)]=new s,this[i(540)]=new s,this.middleLinPos=new s,this[i(576)]=new s,this.vPos=new s,this[i(447)]=new s}[C(454)](){const t=C,i=1<<this[t(592)],s=3*(i+1)*this[t(503)],o=18*i*this[t(503)];this[t(574)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this.generateUVs&&(this[t(482)]=new Float32Array(2*s)),this.fillMesh(0),this[t(457)](new n(this[t(594)],1)),this[t(494)]=new e(this[t(574)],3),this[t(493)](t(459),this[t(494)]),this[t(506)]&&(this[t(437)]=new e(new Float32Array(this[t(482)]),2),this[t(493)]("uv",this[t(437)])),!this.isStatic&&(this[t(452)][t(481)]=r,this.positionAttribute[t(481)]=r,this[t(506)]&&(this[t(437)][t(481)]=r)),this[t(574)]=this[t(494)][t(562)],this[t(594)]=this[t(452)][t(562)],this[t(506)]&&(this[t(482)]=this[t(437)][t(562)])}[C(453)](t){const i=C;this[i(523)](t),this[i(541)][i(513)]=this[i(545)],this[i(452)][i(514)]=!0,this[i(494)][i(514)]=!0,this[i(506)]&&(this[i(437)][i(514)]=!0)}fillMesh(t){const i=C,s=this;this.currentVertex=0,this[i(545)]=0,this[i(581)]=0,this[i(434)]=0,this[i(466)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(547)]||(this[e(560)][e(563)]&&0==s[e(568)][e(572)]?(s[e(438)](n),s[e(570)](n,s)):t<r[e(429)]?s[e(508)]>=n.fraction0*r[e(431)]&&(s[e(438)](n),s[e(570)](n,s)):t<r[e(440)]?(s[e(438)](n),s[e(570)](n,s)):(s.timeFraction<=r[e(558)]+n[e(477)]*(1-r[e(558)])&&s[e(438)](n),s[e(570)](n,s)))}))}[C(483)](){const t=C;return this[t(583)][this[t(577)]++]}[C(575)](t,i){const s=C;t.pos0.copy(i[s(551)]),t[s(587)][s(546)](i[s(479)]),t[s(475)].copy(i[s(475)]),t.up1[s(546)](i.up1),t[s(588)]=i[s(588)],t[s(432)]=i[s(432)],t.birthTime=i[s(547)],t.deathTime=i[s(485)],t.timeScale=i.timeScale,t[s(471)]=i[s(471)],t[s(446)]=i[s(446)],t.propagationTimeFactor=i[s(431)],t[s(558)]=i[s(558)],t.maxIterations=this[s(592)],t[s(451)]=void 0!==i[s(534)]?i[s(534)]:0,t.recursion=0}[C(466)](t,i){const s=C;this.time=t,this.currentSegmentCallback=i,this[s(577)]=0,this.initSubray(this[s(483)](),this[s(560)]);for(let n=0;n<this[s(577)];n++){const i=this.subrays[n];this[s(568)]=i,this[s(460)][s(602)](i[s(451)]),i[s(429)]=o[s(488)](i[s(547)],i[s(485)],i.propagationTimeFactor),i[s(440)]=o[s(488)](i[s(485)],i[s(547)],1-i[s(558)]);const e=this[s(460)][s(476)];i[s(542)].set(e(),e(),e()).multiplyScalar(1e3),i[s(468)][s(469)](e(),e(),e())[s(498)](1e3),this[s(508)]=(t-i.birthTime)/(i.deathTime-i[s(547)]),this[s(549)]=0,this[s(564)]=!0;const r=this[s(497)]();r.iteration=0,r[s(537)][s(546)](i[s(537)]),r[s(587)][s(546)](i[s(587)]),r.linPos0[s(546)](i.linPos0),r[s(468)][s(546)](i[s(468)]),r[s(475)].copy(i[s(475)]),r[s(590)][s(546)](i[s(590)]),r.radius0=i.radius0,r.radius1=i[s(432)],r[s(507)]=0,r[s(477)]=1,r[s(480)]=1-i[s(446)],this[s(519)]=this[s(450)]*Math.pow(this[s(543)],i[s(572)])/(1<<i.maxIterations),this.fractalRayRecursive(r)}this.currentSegmentCallback=null,this[s(568)]=null}[C(517)](t){const i=C;if(t[i(443)]>=this[i(568)][i(592)])return void this[i(544)](t);this.forwards.subVectors(t[i(587)],t.pos0);let s=this.forwards[i(484)]();s<1e-6&&(this[i(582)][i(469)](0,0,.01),s=this[i(582)][i(484)]());const n=.5*(t[i(588)]+t[i(432)]),e=.5*(t[i(507)]+t[i(477)]),r=this[i(502)]*this.currentSubray[i(593)]*Math[i(511)](2,t[i(443)]);this[i(540)][i(567)](t.pos0,t.pos1,.5),this[i(580)][i(567)](t[i(542)],t[i(468)],.5);const o=this[i(580)];this.newPos[i(469)](this[i(518)](o.x,o.y,o.z,r),this[i(455)](o.x,o.y,o.z,r),this[i(532)](o.x,o.y,o.z,r)),this[i(576)][i(498)](t[i(480)]*s),this[i(576)][i(510)](this[i(540)]);const a=this.getNewSegment();a.pos0[i(546)](t[i(537)]),a.pos1[i(546)](this[i(576)]),a[i(542)].copy(t.linPos0),a.linPos1[i(546)](this.middleLinPos),a[i(475)][i(546)](t.up0),a[i(590)][i(546)](t.up1),a.radius0=t.radius0,a.radius1=n,a[i(507)]=t[i(507)],a[i(477)]=e,a[i(480)]=t[i(480)]*this[i(568)][i(471)],a.iteration=t[i(443)]+1;const h=this[i(497)]();h[i(537)].copy(this[i(576)]),h.pos1[i(546)](t.pos1),h.linPos0.copy(this.middleLinPos),h.linPos1[i(546)](t[i(468)]),this[i(447)][i(430)](t[i(475)],this[i(582)][i(436)]()),h[i(475)][i(430)](this.forwards,this[i(447)]).normalize(),h[i(590)].copy(t[i(590)]),h[i(588)]=n,h.radius1=t[i(432)],h[i(507)]=e,h[i(477)]=t.fraction1,h[i(480)]=t[i(480)]*this[i(568)][i(471)],h[i(443)]=t[i(443)]+1,this[i(517)](a),this.fractalRayRecursive(h)}[C(438)](t){const i=C;this[i(448)][i(528)](t.pos1,t[i(537)])[i(436)](),this[i(564)]&&(this.currentCreateTriangleVertices(t[i(537)],t[i(475)],this[i(448)],t.radius0,0),this[i(564)]=!1),this[i(478)](t[i(587)],t[i(475)],this[i(448)],t[i(432)],t[i(477)]),this.createPrismFaces()}[C(487)](t,i,s,n){const e=C;this[e(571)].crossVectors(i,s).multiplyScalar(n*R[e(512)]),this.down[e(546)](i)[e(498)](-n*R[e(489)]);const r=this.vPos,o=this[e(574)];r.copy(t)[e(550)](this[e(571)])[e(510)](this[e(584)]),o[this[e(581)]++]=r.x,o[this[e(581)]++]=r.y,o[this[e(581)]++]=r.z,r.copy(t)[e(510)](this.side).add(this[e(584)]),o[this.currentCoordinate++]=r.x,o[this[e(581)]++]=r.y,o[this[e(581)]++]=r.z,r.copy(i)[e(498)](n)[e(510)](t),o[this.currentCoordinate++]=r.x,o[this[e(581)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(467)]+=3}[C(472)](t,i,s,n,e){const r=C;this[r(571)][r(430)](i,s)[r(498)](n*R[r(512)]),this[r(584)][r(546)](i)[r(498)](-n*R.SIN30DEG);const o=this.vPos,a=this[r(574)],h=this[r(482)];o.copy(t).sub(this[r(571)]).add(this[r(584)]),a[this[r(581)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(434)]++]=e,h[this[r(434)]++]=0,o[r(546)](t)[r(510)](this[r(571)])[r(510)](this[r(584)]),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(581)]++]=o.z,h[this[r(434)]++]=e,h[this[r(434)]++]=.5,o[r(546)](i)[r(498)](n)[r(510)](t),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(434)]++]=e,h[this.currentUVCoordinate++]=1,this[r(467)]+=3}[C(598)](t){const i=C,s=this[i(594)];t=this[i(467)]-6,s[this[i(545)]++]=t+1,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+5,s[this[i(545)]++]=t+1,s[this[i(545)]++]=t+5,s[this[i(545)]++]=t+4,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+1,s[this[i(545)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(545)]++]=t+4,s[this[i(545)]++]=t+3,s[this[i(545)]++]=t+2,s[this[i(545)]++]=t+0,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+2,s[this[i(545)]++]=t+3,s[this.currentIndex++]=t+5}createDefaultSubrayCreationCallbacks(){const t=C,i=this[t(460)].random;this[t(570)]=function(s,n){const e=t,r=n[e(568)],a=n[e(560)][e(559)],h=n.rayParameters[e(530)],c=n.rayParameters.isEternal&&0==r[e(572)]?-i()*a:o[e(488)](r[e(547)],r[e(429)],s[e(507)])-i()*a,u=n[e(502)]-c,l=Math[e(552)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(519)]),r[e(572)]<n[e(529)]&&n.numSubrays<n.maxSubrays&&i()<d){const t=n[e(483)](),o=n[e(460)][e(539)]();t[e(451)]=p,n[e(460)].setSeed(p),t[e(572)]=r[e(572)]+1,t[e(592)]=Math.max(1,r[e(592)]-1),t[e(542)].set(i(),i(),i())[e(498)](1e3),t[e(468)][e(469)](i(),i(),i())[e(498)](1e3),t[e(475)].copy(r.up0),t[e(590)][e(546)](r[e(590)]),t[e(588)]=s[e(588)]*n[e(560)][e(531)],t.radius1=Math[e(516)](n.rayParameters[e(505)],s[e(432)]*n[e(560)][e(595)]),t[e(547)]=c+l*a,t[e(485)]=t[e(547)]+a*h,!n[e(560)][e(563)]&&0==r[e(572)]&&(t[e(547)]=Math[e(591)](t.birthTime,r[e(547)]),t[e(485)]=Math[e(516)](t[e(485)],r[e(485)])),t[e(593)]=2*r[e(593)],t.roughness=r[e(471)],t[e(446)]=r[e(446)],t[e(431)]=r.propagationTimeFactor,t.vanishingTimeFactor=r[e(558)],n[e(501)](s,r,t,n),n.randomGenerator[e(602)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(501)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(585)]=function(s,o,h,c,u,l){const p=t;h[p(537)][p(546)](s[p(537)]),n[p(528)](o[p(587)],o[p(537)]),e[p(546)](n)[p(436)](),n.multiplyScalar(s[p(507)]+(1-s[p(507)])*(i()*c));const d=n.length();r.crossVectors(o[p(475)],e);const m=2*Math.PI*i();r[p(498)](Math[p(536)](m)),a[p(546)](o.up0).multiplyScalar(Math[p(496)](m)),h[p(587)][p(546)](r)[p(510)](a)[p(498)](d*u*(l+i()*(1-l)))[p(510)](n).add(o[p(537)])},this[t(526)]=function(s,o,h,c,u,l){const p=t;h[p(537)][p(546)](s[p(537)]),n[p(528)](o[p(587)],o[p(537)]),e[p(546)](n).normalize(),n[p(498)](s[p(507)]+(1-s[p(507)])*((2*i()-1)*c));const d=n.length();r[p(430)](o[p(475)],e);const m=2*Math.PI*i();r.multiplyScalar(Math.cos(m)),a.copy(o[p(475)])[p(498)](Math[p(496)](m)),h[p(587)][p(546)](r)[p(510)](a)[p(498)](d*u*(l+i()*(1-l)))[p(510)](n)[p(510)](o[p(537)])}}[C(462)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[C(497)](){const t=C;return this[t(461)][this[t(549)]++]}[C(546)](t){const i=C;return super[i(546)](t),this.init(R[i(589)]({},t[i(560)])),this}[C(444)](){const t=C;return new(this[t(449)])(R.copyParameters({},this[t(560)]))}}function A(){const t=["seedGenerator","add","pow","COS30DEG","count","needsUpdate","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","min","fractalRayRecursive","simplexX","subrayProbability","maxRaySegments","RAY_PROPAGATING","test","fillMesh","init","debu","subrayCylinderPosition","error","subVectors","maxSubrayRecursion","subrayDutyCycle","radius0Factor","simplexZ","4971228acqzGF","noiseSeed","function *\\( *\\)","cos","pos0","8789590GyJWLk","getSeed","middlePos","drawRange","linPos0","recursionProbability","currentSegmentCallback","currentIndex","copy","birthTime","prototype","currentSegmentIndex","sub","sourceOffset","floor","177837jZYEdm","push","visible","isLightningStrike","type","vanishingTimeFactor","subrayPeriod","rayParameters","return (function() ","array","isEternal","isInitialSegment","gger","toString","lerpVectors","currentSubray","call","onDecideSubrayCreation","side","recursion","LightningStrike","vertices","initSubray","newPos","numSubrays","RAY_VANISHING","counter","middleLinPos","currentCoordinate","forwards","subrays","down","subrayConePosition","RAY_UNBORN","pos1","radius0","copyParameters","up1","max","maxIterations","timeScale","indices","radius1Factor","4Lpgnjd","66McHtms","createPrismFaces","createSegment","__proto__","RAY_INITIALIZED","setSeed","state","chain","endPropagationTime","crossVectors","propagationTimeFactor","radius1","apply","currentUVCoordinate","info","normalize","uvsAttribute","createPrism","ceil","beginVanishingTime","56jnFGfV","4jhGqCj","iteration","clone","2140077CjvOoH","straightness","cross1","forwardsFill","constructor","ramification","seed","index","updateMesh","createMesh","simplexY","createRandomGenerator","setIndex","input","position","randomGenerator","raySegments","createSubray",'{}.constructor("return this")( )',"RAY_EXTINGUISHED","createDefaultSubrayCreationCallbacks","fractalRay","currentVertex","linPos1","set","action","roughness","createTriangleVerticesWithUVs","log","8016804KfKTLX","up0","random","fraction1","currentCreateTriangleVertices","destOffset","positionVariationFactor","usage","uvs","addNewSubray","length","deathTime","currentSeed","createTriangleVerticesWithoutUVs","lerp","SIN30DEG","console","3385eHQxiv","1668HAIPPL","setAttribute","positionAttribute","287744JyidnI","sin","getNewSegment","multiplyScalar","isStatic","while (true) {}","onSubrayCreation","time","maxSubrays","bind","minRadius","generateUVs","fraction0","timeFraction"];return(A=function(){return t})()}function F(t){function i(t){const s=M;if("string"==typeof t)return function(t){}[s(449)](s(500))[s(433)](s(579));1!==(""+t/t)[s(484)]||t%20==0?function(){return!0}.constructor(s(525)+s(565))[s(569)](s(470)):function(){return!1}[s(449)](s(525)+s(565)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}R[C(601)]=0,R[C(586)]=1,R[C(521)]=2,R.RAY_STEADY=3,R[C(578)]=4,R[C(464)]=5,R.COS30DEG=Math[C(536)](30*Math.PI/180),R[C(489)]=Math[C(496)](30*Math.PI/180);const D=L;!function(t,i){const s=L,n=V();for(;;)try{if(678416===-parseInt(s(240))/1*(parseInt(s(249))/2)+parseInt(s(260))/3*(parseInt(s(285))/4)+parseInt(s(273))/5*(-parseInt(s(242))/6)+parseInt(s(294))/7+parseInt(s(232))/8*(-parseInt(s(237))/9)+parseInt(s(256))/10+parseInt(s(244))/11*(parseInt(s(292))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(272)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function V(){const t=["lightningParameters","destOffset","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","update","12phXDpn","stormParams","6913907VfzUOg","size","return (function() ","info","minHeight","toString","function *\\( *\\)","bind","lightningMinDuration","isLightningStorm","geometry","push","deathTime","add","birthTime","lightningsMeshes","state","counter","884024tWSFmi","prototype","gger","constructor","indexOf","9swHWcK","lightningMaxPeriod","maxSlope","337AdfDXj","sourceOffset","25302cktoPb","lerp","5426751xrvRDU","maxLightnings","length","pop","lightningMinPeriod","3058sAKkYX","debu","table","input","while (true) {}","lightningMaxDuration","exception","495460rEvsAu","remove","nextLightningTime","warn","3aUWaDk","noiseSeed","deadLightningsMeshes","copy","onLightningDown",'{}.constructor("return this")( )',"rayParameters","lightningMaterial","onRayPosition","multiplyScalar","call","__proto__","apply","1075eWDzaK","inited","random","action","string","copyParameters","trace","maxHeight","error","set","chain","test","2721036tOuoCR","console"];return(V=function(){return t})()}function L(t,i){const s=V();return(L=function(t,i){return s[t-=216]})(t,i)}!function(){z(this,(function(){const t=L,i=new RegExp(t(220)),s=new RegExp(t(290),"i"),n=E(t(289));i[t(284)](n+t(283))&&s[t(284)](n+t(252))?E():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(272)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();H(void 0,(function(){const t=L,i=function(){const t=L;let i;try{i=Function(t(216)+t(265)+");")()}catch(s){i=window}return i}(),s=i[t(286)]=i[t(286)]||{},n=["log",t(259),t(217),t(281),t(255),t(251),t(279)];for(let e=0;e<n.length;e++){const i=H[t(235)][t(233)][t(221)](H),r=n[e],o=s[r]||i;i[t(271)]=H[t(221)](H),i[t(219)]=o[t(219)].bind(o),s[r]=i}}))();class G extends a{constructor(t={}){const i=L;super(),this[i(223)]=!0,this[i(293)]=t,t[i(295)]=void 0!==t.size?t[i(295)]:1e3,t[i(218)]=void 0!==t[i(218)]?t.minHeight:80,t[i(280)]=void 0!==t[i(280)]?t[i(280)]:100,t[i(239)]=void 0!==t.maxSlope?t[i(239)]:1.1,t.maxLightnings=void 0!==t.maxLightnings?t.maxLightnings:3,t[i(248)]=void 0!==t[i(248)]?t[i(248)]:3,t[i(238)]=void 0!==t[i(238)]?t[i(238)]:7,t[i(222)]=void 0!==t[i(222)]?t[i(222)]:1,t[i(254)]=void 0!==t.lightningMaxDuration?t[i(254)]:2.5,this.lightningParameters=R[i(278)](t[i(287)],t[i(287)]),this[i(287)].isEternal=!1,this[i(267)]=void 0!==t[i(267)]?t[i(267)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(268)]=t[i(268)]:this.onRayPosition=function(s,n){const e=i;n.set((Math[e(275)]()-.5)*t.size,0,(Math[e(275)]()-.5)*t[e(295)]);const r=o[e(243)](t.minHeight,t[e(280)],Math[e(275)]());s[e(282)](t[e(239)]*(2*Math[e(275)]()-1),1,t[e(239)]*(2*Math[e(275)]()-1))[e(269)](r)[e(227)](n)},this.onLightningDown=t.onLightningDown,this[i(274)]=!1,this[i(258)]=0,this[i(229)]=[],this[i(262)]=[];for(let s=0;s<this[i(293)][i(245)];s++){const t=new R(R[i(278)]({},this[i(287)])),s=new c(t,this.lightningMaterial);this[i(262)][i(225)](s)}}[D(291)](t){const i=D;if(!this[i(274)]&&(this.nextLightningTime=this.getNextLightningTime(t)*Math[i(275)](),this[i(274)]=!0),t>=this[i(258)]){const s=this[i(262)][i(247)]();if(s){const n=R[i(278)](s.geometry[i(266)],this.lightningParameters);n[i(228)]=t,n[i(226)]=t+o.lerp(this.stormParams[i(222)],this[i(293)][i(254)],Math[i(275)]()),this[i(268)](n[i(241)],n[i(288)]),n[i(261)]=Math.random(),this[i(227)](s),this[i(229)][i(225)](s)}this[i(258)]=this.getNextLightningTime(t)}let s=0,n=this[i(229)][i(246)];for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(224)],o=r[i(230)];r[i(291)](t),o===R.RAY_PROPAGATING&&r.state>o&&this[i(264)]&&this[i(264)](r),r[i(230)]===R.RAY_EXTINGUISHED?(this[i(229)].splice(this.lightningsMeshes[i(236)](e),1),this[i(262)].push(e),this[i(257)](e),n--):s++}}getNextLightningTime(t){const i=D;return t+o[i(243)](this[i(293)].lightningMinPeriod,this[i(293)][i(238)],Math[i(275)]())/(this[i(293)][i(245)]+1)}[D(263)](t,i){const s=D;return super[s(263)](t,i),this[s(293)][s(295)]=t[s(293)][s(295)],this[s(293)][s(218)]=t[s(293)][s(218)],this[s(293)][s(280)]=t[s(293)][s(280)],this[s(293)][s(239)]=t[s(293)][s(239)],this[s(293)][s(245)]=t[s(293)][s(245)],this[s(293)][s(248)]=t[s(293)].lightningMinPeriod,this.stormParams[s(238)]=t[s(293)].lightningMaxPeriod,this[s(293)].lightningMinDuration=t[s(293)][s(222)],this[s(293)][s(254)]=t[s(293)].lightningMaxDuration,this.lightningParameters=R[s(278)]({},t[s(287)]),this[s(267)]=t[s(293)].lightningMaterial,this[s(264)]=t[s(264)],this}clone(){const t=D;return new(this[t(235)])(this[t(293)])[t(263)](this)}}function E(t){function i(t){const s=L;if(typeof t===s(277))return function(t){}[s(235)](s(253))[s(272)](s(231));1!==(""+t/t).length||t%20==0?function(){return!0}[s(235)](s(250)+s(234))[s(270)](s(276)):function(){return!1}[s(235)](s(250)+s(234))[s(272)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=Z;!function(t,i){const s=Z,n=k();for(;;)try{if(821966===parseInt(s(240))/1+parseInt(s(211))/2+parseInt(s(239))/3+-parseInt(s(215))/4+parseInt(s(229))/5+-parseInt(s(217))/6+parseInt(s(214))/7*(-parseInt(s(245))/8))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(220)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=Z,i=new RegExp(t(241)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=X("init");i[t(233)](n+t(222))&&s[t(233)](n+t(238))?X():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(220)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=Z;let i;try{i=Function('return (function() {}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(252)]=i[t(252)]||{},n=["log",t(232),"info",t(242),t(251),t(236),t(226)];for(let r=0;r<n.length;r++){const i=U.constructor[t(224)].bind(U),e=n[r],o=s[e]||i;i[t(219)]=U[t(201)](U),i.toString=o.toString[t(201)](o),s[e]=i}}))();const Y=[O(200)];function k(){const t=["primitive","set","color","object","bind","add","counter","while (true) {}","#b0ffff","minHeight","radius0","roughness","stormParams","gger","2524942DzxNej","pos1","sourceOffset","1610819WTtyio","2267944ORQrPc","debu","4242996YJHTEL","Vector3","__proto__","apply","Color","chain","radius1","prototype","dot","trace","string","copy","5565720UIqYPe","rayParameters","maxLightnings","warn","test","timeScale","action","table","subrayPeriod","input","4890588uCSFOr","391477kveaAj","function *\\( *\\)","error","maxHeight","stateObject","80xsNhYY","straightness","constructor","size","lightStorm","subVectors","exception","console"];return(k=function(){return t})()}function Z(t,i){const s=k();return(Z=function(t,i){return s[t-=200]})(t,i)}const W=f({__name:O(249),props:{color:{default:O(205)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,n=t,e=new(u[i(221)])(n[i(255)]),r=new h({color:e}),o=new(u[i(218)])(0,-1,0);let a=0;const c=new s,p=new s,d={roughness:n[i(208)],straightness:n.straightness,radius0:n[i(207)],radius1:n[i(223)],timeScale:n[i(234)],subrayPeriod:n[i(237)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(230)][r(213)].y,c[r(250)](n[r(212)],e[r(230)].sourceOffset);const h=o[r(225)](c);p[r(228)](o).multiplyScalar(h),c.sub(p);const u=h/a>.5?a/h:1;p.multiplyScalar(u),c[r(202)](p),n[r(212)].addVectors(c,e[r(230)][r(213)])}},m=new G({size:n[i(248)],minHeight:n[i(206)],maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(231)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=m[t(209)];s.size=n.size,s[t(206)]=n[t(206)],s[t(243)]=n.maxHeight,r[t(255)][t(254)](n[t(255)]),d[t(208)]=n.roughness,d.straightness=n[t(246)],d[t(207)]=n[t(207)],d[t(223)]=n.radius1,d[t(234)]=n[t(234)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{m.update(t)})),(t,s)=>{const n=i;return y(),b(n(253),{object:x(m),renderOrder:9999},null,8,Y)}}});function X(t){function i(t){const s=Z;if(typeof t===s(227))return function(t){}[s(247)](s(204))[s(220)](s(203));1!==(""+t/t).length||t%20==0?function(){return!0}[s(247)](s(216)+s(210)).call(s(235)):function(){return!1}[s(247)](s(216)+s(210))[s(220)](s(244)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=K;function K(t,i){const s=J();return(K=function(t,i){return s[t-=176]})(t,i)}!function(t,i){const s=K,n=J();for(;;)try{if(440361===parseInt(s(208))/1+-parseInt(s(201))/2+parseInt(s(217))/3+parseInt(s(202))/4+-parseInt(s(194))/5*(-parseInt(s(177))/6)+-parseInt(s(214))/7+-parseInt(s(223))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){q(this,(function(){const t=K,i=new RegExp(t(189)),s=new RegExp(t(216),"i"),n=tt(t(225));i[t(191)](n+t(183))&&s[t(191)](n+t(213))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["stateObject","constructor","粗糙度","string","input","2343145YgyLPP","maxHeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2225736iAfdvq","call","#6f6f6f","#ffbde7","length","table","4445744rYIZmN","console","init","return (function() ","494118FCmOXf","bind","radius0","roughness","warn","#92399e","chain","exception","log","apply","gger","color","function *\\( *\\)","minHeight","test","error","toString","5UjWyAa","未部半径","info","counter","debu","lightningStorm","直度度","1263572hBwjXJ","1696900CTnrnn","时间缩放","trace","action","straightness","value","714110TDkKWy"];return(J=function(){return t})()}B(void 0,(function(){const t=K,i=function(){const t=K;let i;try{i=Function(t(176)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(224)]=i.console||{},n=[t(185),t(181),t(196),t(192),t(184),t(222),t(204)];for(let e=0;e<n.length;e++){const i=B.constructor.prototype[t(178)](B),r=n[e],o=s[r]||i;i.__proto__=B.bind(B),i[t(193)]=o[t(193)][t(178)](o),s[r]=i}}))();const Q=f({__name:$(199),setup(i){const s=$,n=v({cellSize:60,cellThickness:1,cellColor:s(219),sectionColor:s(182),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(220),roughness:{label:s(211),value:.85,min:0,max:1,step:.01},straightness:{label:s(200),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(195),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(203),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(W,{minHeight:x(e)[m(207)],maxHeight:x(r)[m(207)],color:x(o)[m(207)],roughness:x(a)[m(207)],straightness:x(h)[m(207)],radius0:x(c).value,radius1:x(u)[m(207)],timeScale:x(l).value},null,8,[m(190),m(215),m(188),m(180),m(206),m(179),"radius1","timeScale"]),S(x(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(x(d))],64)}}});function tt(t){function i(t){const s=K;if(typeof t===s(212))return function(t){}[s(210)]("while (true) {}").apply(s(197));1!==(""+t/t)[s(221)]||t%20==0?function(){return!0}.constructor(s(198)+s(187))[s(218)](s(205)):function(){return!1}[s(210)]("debu"+s(187))[s(186)](s(209)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

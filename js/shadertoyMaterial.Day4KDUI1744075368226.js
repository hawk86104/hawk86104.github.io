import{e,a as t,b as n}from"./@tresjs.DYJWvbJh1744075368226.js";import{ab as a,ah as r,f as o,a as s,ax as i,m as l,ct as u,l as c}from"./three.Cqu7jvck1744075368226.js";import{z as f}from"./three-custom-shader-material.Dnty1Adq1744075368226.js";import{P as p}from"./tweakpane.C0HtAJSg1744075368226.js";import{a as m}from"./axios.DLTVXJci1744075368226.js";import{d as h,r as v,a5 as d,s as w,h as g,e as y,o as x,f as C,J as b,j,u as _,ak as I,al as T,m as L}from"./@vue.DK6ok9LJ1744075368226.js";import"./postprocessing.BQUpsS8o1744075368226.js";import"./@vueuse.3dpzNfMJ1744075368226.js";function S(){const e=["4608894KvVxZb","test","varying vec2 vUv;\n","counter","length","split","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","4WSOoLa","bind","umouse","input","toString","7672710tkJpwa","311420rMLcur","replace","126sacPLf","debu","\t\n            varying vec2 vUv;\n            void main() {\n                csm_Position = position * vec3(1.0);\n                vUv = uv;\n            } ","58WqEnrp","uniform sampler2D  utexture;\n","string","replaceVariable","action","7HHOCES","30798966eLeoyP","uniform float utime;\n","console","error","prototype","while (true) {}","constructor",'{}.constructor("return this")( )',"call","log","utexture","material","651304jgWotR","void main()","54897wamvoL","chain","1151503QhxaQk","apply","utime"];return(S=function(){return e})()}const k=A;!function(){const e=A,t=S();for(;;)try{if(977886===-parseInt(e(374))/1+parseInt(e(396))/2*(parseInt(e(372))/3)+-parseInt(e(385))/4*(parseInt(e(391))/5)+-parseInt(e(377))/6*(-parseInt(e(357))/7)+parseInt(e(370))/8*(-parseInt(e(393))/9)+-parseInt(e(390))/10+parseInt(e(358))/11)break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const D=function(){let e=!0;return function(t,n){const a=e?function(){if(n){const e=n[A(375)](t,arguments);return n=null,e}}:function(){};return e=!1,a}}();!function(){D(this,(function(){const e=A,t=new RegExp("function *\\( *\\)"),n=new RegExp(e(383),"i"),a=G("init");t.test(a+e(373))&&n.test(a+e(388))?G():a("0")}))()}();const R=function(){let e=!0;return function(t,n){const a=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,a}}();function A(e,t){const n=S();return A=function(e,t){return n[e-=354]},A(e,t)}R(void 0,(function(){const e=A,t=function(){const e=A;let t;try{t=Function("return (function() "+e(365)+");")()}catch(n){t=window}return t}(),n=t.console=t[e(360)]||{},a=[e(367),"warn","info",e(361),"exception","table","trace"];for(let r=0;r<a[e(381)];r++){const t=R[e(364)][e(362)][e(386)](R),o=a[r],s=n[o]||t;t.__proto__=R[e(386)](R),t[e(389)]=s.toString.bind(s),n[o]=t}}))();class E{constructor(e,t){const n=A,o=E[n(355)](e),s=new f({baseMaterial:r,vertexShader:n(395),fragmentShader:o,side:a,uniforms:t[n(369)].uniforms});this.material=s,console[n(367)](this[n(369)])}static[k(355)](e){const t=k;e=t(379)+e;if(/iTime|iTimeDelta/g[t(378)](e)){let n=e.split(t(379));e=(e=t(379)+t(359)+n[1]).replace(/iTime|iTimeDelta/g,t(376))}if(/iResolution\.[a-zA-Z_]+/g[t(378)](e)){let n=e[t(382)](t(379));e=(e=(e="varying vec2 vUv;\nuniform vec2 uresolution;\n"+n[1])[t(392)](/iResolution\.[a-zA-Z_]+/g,"1."))[t(392)](/iResolution/g,"1.")}if(/iChannel0|iChannel1|iChannel2|iChannel3/g[t(378)](e)){let n=e[t(382)](t(379));e=(e=t(379)+t(397)+n[1])[t(392)](/iChannel0|iChannel1|iChannel2|iChannel3/g,t(368))}return e.replace(/iMouse/g,t(387)),e[t(392)](/void mainImage\( out vec4 fragColor, in vec2 fragCoord \)/g,t(371))[t(392)](/fragColor/g,"csm_DiffuseColor")[t(392)](/fragCoord/g,"vUv")}}function G(e){function t(e){const n=A;if(typeof e===n(354))return function(e){}[n(364)](n(363)).apply(n(380));1!==(""+e/e)[n(381)]||e%20==0?function(){return!0}[n(364)](n(394)+n(384))[n(366)](n(356)):function(){return!1}[n(364)](n(394)+n(384)).apply("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}const H={ref:"perspectiveCameraRef",position:[300,250,-122],fov:45,near:1,far:1e4},P=["object","side"],W=h({__name:"shadertoyMaterial",async setup(r){let f,h;const S={clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0},k={autoRotate:!0,enableDamping:!0},D=new p({title:"参数"}),R=v({addres:"https://www.shadertoy.com/view/mtyGWy",shadervalue:""});let A=([f,h]=d((()=>n(["./plugins/earthSample/image/earthA/moon_ring.png"]))),f=await f,h(),f),G=new o,W=v({material:{uniforms:{utime:{value:0},uresolution:{value:new s(40,40)},utexture:{value:A}}}}),z=new i(100,100,100);D.addBlade({view:"list",label:"shadertoy在线地址",parse:e=>String(e),options:[{text:"1",value:"https://www.shadertoy.com/view/mtyGWy"},{text:"2",value:"https://www.shadertoy.com/view/tlVGDt"},{text:"3",value:"https://www.shadertoy.com/view/ttKGDt"}],value:"https://www.shadertoy.com/view/mtyGWy"}).on("change",(e=>{R.addres=e.value,M(z)}));let U=new i(100,100,100),Z=new l(100,100),B=new u(100,10,100,16);D.addBlade({view:"list",label:"几何体",options:[{text:"BOX",value:U},{text:"Plane",value:Z},{text:"TorusKnot",value:B}],value:U}).on("change",(e=>{z=e.value,M(z)}));const M=e=>{let t="https://www.shadertoy.com/api/v1/shaders/"+R.addres.split("https://www.shadertoy.com/view/")[1]+"?key=BdHlhH";m.get(t).then((function(t){t.data.Error&&alert(t.data.Error),R.shadervalue=t.data.Shader.renderpass[0].code;let n=new E(R.shadervalue,W);G.clear();let a=new c(e,n.material);G.add(a),O(G,e)})).catch((function(e){console.log(e)}))},O=(e,t)=>{e.children[0].geometry.dispose(),e.children[0].geometry=t},{onLoop:K}=e();return K((({delta:e})=>{W.material.uniforms.utime.value+=e})),w((()=>{let e=new i(100,100,100);M(e)})),(e,n)=>{const r=g("TresCanvas");return x(),y(r,L(S,{"window-size":""}),{default:C((()=>[b("TresPerspectiveCamera",H,null,512),j(_(t),I(T(k)),null,16),n[0]||(n[0]=b("TresAmbientLight",{color:"#ffffff"},null,-1)),n[1]||(n[1]=b("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),b("primitive",{object:_(G),side:_(a)},null,8,P),n[2]||(n[2]=b("TresAxesHelper",{args:[1e3],position:[0,19,0]},null,-1)),n[3]||(n[3]=b("TresGridHelper",{args:[6e3,100],position:[0,19,0]},null,-1))])),_:1},16)}}});export{W as default};

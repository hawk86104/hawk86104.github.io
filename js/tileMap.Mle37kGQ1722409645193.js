import{a6 as t,a7 as n,V as e,cv as o}from"./three.6E5muTWJ1722409645193.js";import{P as r}from"./tweakpane.yHWGBmom1722409645193.js";import{_ as s}from"./@tweenjs.A250bPqH1722409645193.js";import{p as i,$ as a}from"./@tresjs.qmCJ68Vp1722409645193.js";import{P as c,b as u,c as p,M as l,T as f,a as m,d as g}from"./index.LAJu_7wL1722409645193.js";import{d as h,a1 as d,w as j,o as b,D as w,u as x,X as v,r as y,e as I,j as M,g as _,f as z,al as C,m as S,F as B}from"./@vue.9bHx4gg21722409645193.js";import{_ as k}from"./raycasterEvent.1Fvxbj-X1722409645193.js";import{a as R}from"./utils.sTBnA47H1722409645193.js";import"./@vueuse.NFOCyQQL1722409645193.js";import"./@mapbox.IzHUVOuR1722409645193.js";import"./@amap.VDWlHANn1722409645193.js";import"./three-mesh-bvh.7hCYy4D71722409645193.js";import"./three-custom-shader-material.Tfk8gm3s1722409645193.js";import"./object-hash.Une5niKX1722409645193.js";import"./jszip.EBLL5bdU1722409645193.js";import"./glsl-tokenizer.bKHxJMPW1722409645193.js";import"./glsl-token-string.tLooI1vy1722409645193.js";import"./glsl-token-functions.9RlG2kRC1722409645193.js";import"./@fesjs.QnrTigdw1722409645193.js";import"./vue-router.14za1TD_1722409645193.js";import"./lodash-es.nFpJXAf-1722409645193.js";import"./@qlin.yHhFDldE1722409645193.js";import"./pinia.QNLxZzKW1722409645193.js";import"./@floating-ui.BPbuo5Gx1722409645193.js";import"./@juggle.7yjBMqoW1722409645193.js";import"./http.e0EUp9YU1722409645193.js";import"./axios.FVFoCDiv1722409645193.js";import"./color.EvPmLA7Z1722409645193.js";import"./color-string.Sx_9fK051722409645193.js";import"./color-name.R-YOVbSm1722409645193.js";import"./simple-swizzle.3eHrbmos1722409645193.js";import"./is-arrayish.JfXWMpwR1722409645193.js";import"./color-convert.NGrq_oie1722409645193.js";import"./lodash.1PcY92Kn1722409645193.js";import"./naive-ui.DK0Qrh0T1722409645193.js";import"./css-render.cbfqmmLY1722409645193.js";import"./@emotion.ZD_ZYAgY1722409645193.js";import"./@css-render.4cLijQW71722409645193.js";import"./seemly.SjiSeX2v1722409645193.js";import"./vooks.zTKDTkXb1722409645193.js";import"./evtd.DtfwxtIl1722409645193.js";import"./vueuc.E3bosZ881722409645193.js";import"./vdirs.O87yKYOt1722409645193.js";import"./date-fns.zmTBW_S91722409645193.js";import"./treemate.dcEdf2le1722409645193.js";import"./date-fns-tz.e4BN60-u1722409645193.js";import"./async-validator.-YBkpS4I1722409645193.js";import"./utils.qo3aX1Gv1722409645193.js";import"./d3-geo.xerNAvcw1722409645193.js";import"./d3-array.E5C1cfJ61722409645193.js";const E=q;!function(t,n){const e=q,o=D();for(;;)try{if(915739===parseInt(e(291))/1*(parseInt(e(293))/2)+parseInt(e(353))/3+parseInt(e(333))/4+parseInt(e(292))/5*(-parseInt(e(338))/6)+-parseInt(e(320))/7*(parseInt(e(316))/8)+parseInt(e(302))/9*(parseInt(e(311))/10)+-parseInt(e(348))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const T=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){T(this,(function(){const t=q,n=new RegExp(t(336)),e=new RegExp(t(349),"i"),o=N(t(356));n.test(o+t(299))&&e.test(o+t(352))?N():o("0")}))()}();const A=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(309)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();A(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function("return (function() "+t(318)+");")()}catch(e){n=window}return n}(),e=n[t(326)]=n[t(326)]||{},o=[t(330),"warn",t(304),"error","exception",t(296),t(359)];for(let r=0;r<o[t(346)];r++){const n=A.constructor.prototype.bind(A),s=o[r],i=e[s]||n;n[t(290)]=A[t(325)](A),n[t(332)]=i[t(332)].bind(i),e[s]=n}}))();const Z=[E(324),E(329)];function D(){const t=["table","#fff","provider","chain","tileMapMesh","mapCenter","12294JUBmEy","Vector3","info","far","showTileNo","opposite","string","apply","gger","6190aCNhMK","update","genContrast","source","call","49760LBzXLw","set",'{}.constructor("return this")( )',"render","287hgoSTE","monochrome","flatShading","genSaturation","object","bind","console","useWorker","Color","rotation","log","coordType","toString","4902932DDNcNZ","dampingFactor","isMonochrome","function *\\( *\\)","innerWidth","38670KKAwPV","maxZoom","filter","lookAt","while (true) {}","minDistance","showBoundingBox","domElement","length","abs","9778285TkmxZr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","camera","value","input","1801131pObCGo","constructor","updateProjectionMatrix","init","debu","bbox","trace","wireframe","position","__proto__","4613udgUvg","940IdEqSE","260IGjCfw","genBright","counter"];return(D=function(){return t})()}function q(t,n){const e=D();return(q=function(t,n){return e[t-=290]})(t,n)}const L=h({__name:E(300),props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},opposite:{type:Boolean,default:!1},genBright:{default:1},genContrast:{default:1},genSaturation:{default:1},monochrome:{default:E(297)},isMonochrome:{type:Boolean,default:!1},mapCenter:{}},setup(r,{expose:g}){const h=E,v=r,{renderer:y,scene:I}=i();(new c)[h(331)]=u;const M=new p;M[h(314)]="https://api.maptiler.com/tiles/terrain-rgb-v2/[z]/[x]/[y].webp?key=L55MtSxL94Yb4hQeWewp",M[h(331)]=u;const _=new l;_.source="https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}",_[h(306)]=!1,_[h(327)]=!0;const z=new f(M,_);if(z[h(344)]=!1,z[h(360)]=!1,z[h(322)]=!1,z.useStandardMaterial=!1,z.filter={opposite:v[h(307)],monochrome:v[h(335)]?{r:.299,g:.587,b:.114}:null,genBright:v.genBright,genContrast:v[h(313)],genSaturation:v[h(323)]},v.monochrome){let n=new(t[h(328)])(v[h(321)]);z[h(340)]&&(z[h(340)][h(321)]={r:n.r,g:n.g,b:n.b})}const C=new m;C[h(298)]=z,C[h(358)]=v[h(358)],C[h(339)]=v[h(339)];const S=new n(60,window[h(337)]/window.innerHeight,1,1e8);S.up=new(t[h(303)])(0,1,0),S[h(361)][h(317)](v[h(301)][0],v[h(301)][2],-v[h(301)][1]),S[h(341)](new e(S[h(361)].x,0,S[h(361)].z-2e3)),C[h(350)]=S;let B=null;d((()=>{const n=h;if(y[n(351)]&&!B&&(B=new o(S,y[n(351)][n(345)]),B.enableDamping=!0,B[n(334)]=.05,B[n(343)]=600,B.position0[n(317)](S[n(361)].x,S[n(361)].y,S[n(361)].z),B.target[n(317)](S.position.x,0,S.position.z-2e3)),v.genBright&&z[n(340)]&&(z.filter[n(294)]=v[n(294)]),v.genContrast&&z[n(340)]&&(z.filter[n(313)]=v[n(313)]),v.genSaturation&&z.filter&&(z[n(340)].genSaturation=v.genSaturation),v[n(335)]&&v[n(321)]&&z.filter){let e=new(t[n(328)])(v[n(321)]);z[n(340)][n(321)]={r:e.r,g:e.g,b:e.b}}})),j((()=>v[h(307)]),(t=>{const n=h;z.filter&&(z.filter[n(307)]=t)})),j((()=>v.isMonochrome),(n=>{const e=h;let o=new(t[e(328)])(v.monochrome);z[e(340)]&&(z.filter[e(321)]=n?{r:o.r,g:o.g,b:o.b}:null)}));const{onLoop:k}=a();return k((()=>{const t=h;if(y.value){s[t(312)](),B&&B.update(),C[t(312)]();const n=50*Math[t(347)](S[t(361)].y);S[t(305)]=n+5e3,S[t(355)](),B.target.y=0,y[t(351)][t(319)](I[t(351)],S)}})),g({camera:S,map:C,orbitControl:B}),(t,n)=>(b(),w("primitive",{object:x(C),rotation:[-Math.PI/2,0,0]},null,8,Z))}});function N(t){function n(t){const e=q;if(typeof t===e(308))return function(t){}[e(354)](e(342))[e(309)](e(295));1!==(""+t/t).length||t%20==0?function(){return!0}[e(354)](e(357)+e(310))[e(315)]("action"):function(){return!1}.constructor(e(357)+e(310))[e(309)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=O,o=$();for(;;)try{if(428941===-parseInt(e(121))/1*(-parseInt(e(148))/2)+parseInt(e(140))/3+-parseInt(e(159))/4*(parseInt(e(130))/5)+-parseInt(e(160))/6+parseInt(e(147))/7+parseInt(e(128))/8+-parseInt(e(136))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[O(164)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=O,n=new RegExp(t(131)),e=new RegExp(t(138),"i"),o=G(t(162));n[t(120)](o+"chain")&&e.test(o+t(155))?G():o("0")}))()}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[O(164)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function O(t,n){const e=$();return(O=function(t,n){return e[t-=112]})(t,n)}F(void 0,(function(){const t=O,n=function(){const t=O;let n;try{n=Function(t(171)+t(157)+");")()}catch(e){n=window}return n}(),e=n[t(116)]=n.console||{},o=[t(127),t(142),t(144),t(117),t(132),t(133),"trace"];for(let r=0;r<o.length;r++){const n=F[t(123)].prototype[t(153)](F),s=o[r],i=e[s]||n;n.__proto__=F[t(153)](F),n[t(134)]=i[t(134)][t(153)](i),e[s]=n}}))();const V=h({__name:"tileMap",setup(n){const o=O,s=g(118.779958,32.017136),i=[s[0],s[1],5e3],a=v(),c=y({opposite:!0,genBright:1.3,genContrast:1,genSaturation:1,isMonochrome:!0,monochrome:o(125),mapCenter:i}),u=new r({title:"参数"});u[o(172)](c,o(141),{label:"反色"}),u.addBinding(c,o(118),{label:"高亮",min:.1,max:3,step:.1}),u[o(172)](c,"genContrast",{label:"对比度",min:.1,max:3,step:.1}),u[o(172)](c,"genSaturation",{label:o(129),min:.1,max:3,step:.1}),u[o(172)](c,o(135),{label:o(168)}),u[o(172)](c,o(113),{label:"滤镜颜色"});const p={at:g(118.7425,31.9998),xjk:g(118.7842,32.0418),nss:g(118.7503,31.9082)};u[o(137)]({view:o(145),label:"飞去",options:[{text:"奥体中心",value:"at"},{text:o(158),value:o(167)},{text:"牛首山",value:o(115)}],value:"at"}).on(o(163),(n=>{const e=o,r=new(t[e(152)])(p[n[e(119)]][0],2e3,-p[n[e(119)]][1]);R(a[e(119)][e(161)],r,a[e(119)][e(112)],[0,-300],4e3)}));const l=y({clearColor:o(156),antialias:!0,logarithmicDepthBuffer:!0,disableRender:!0,outputColorSpace:t[o(143)],toneMapping:t[o(166)],precision:o(122)});return setTimeout((()=>{const t=o,n=p.at,r=new e(n[0],1600,-n[1]);R(a.value.camera,r,a[t(119)][t(112)],[-2e3,-2e3],2e3)}),1e3),(t,n)=>{const e=o,r=I(e(114));return b(),w(B,null,[M(r,S(l,{"window-size":""}),{default:_((()=>[(b(),z(C,null,{default:_((()=>[M(L,S(c,{ref_key:e(150),ref:a,bbox:[80,16,128,50]}),null,16)])),_:1}))])),_:1},16),M(k,{tileMapRef:a.value},null,8,[e(169)])],64)}}});function $(){const t=["418luSiJb","call","tileMapMeshRef","stateObject","Vector3","bind","while (true) {}","input","#201919",'{}.constructor("return this")( )',"新街口","268rCNoUR","3559854RejXRr","camera","init","change","apply","string","NoToneMapping","xjk","单色滤镜","tileMapRef","action","return (function() ","addBinding","orbitControl","monochrome","TresCanvas","nss","console","error","genBright","value","test","1003hTMqLz","highp","constructor","debu","#4688b5","gger","log","6470304qJPFEA","饱和度","48255jiEQsr","function *\\( *\\)","exception","table","toString","isMonochrome","3843828dqvnWb","addBlade","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","1822644AOKaGV","opposite","warn","SRGBColorSpace","info","list","counter","3289972DpMzlT"];return($=function(){return t})()}function G(t){function n(t){const e=O;if(typeof t===e(165))return function(t){}.constructor(e(154))[e(164)](e(146));1!==(""+t/t)[e(139)]||t%20==0?function(){return!0}[e(123)](e(124)+"gger")[e(149)](e(170)):function(){return!1}[e(123)](e(124)+e(126))[e(164)](e(151)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as default};

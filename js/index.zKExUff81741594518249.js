var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&i(t,o,a[o]);if(e)for(var o of e(a))r.call(a,o)&&i(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.brNulbgA1741594518249.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.cVFL7d4w1741594518249.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.-qSN0BPz1741594518249.js";import{V as o,U as s,C as l,l as c,W as p,aU as u,a as f,g as x,_ as v,A as m,b as w,Q as h}from"./three.8y0_KTxz1741594518249.js";import{m as g,e as d}from"./@tresjs.gjafZgVK1741594518249.js";import{u as S}from"./index.gRDhHVVn1741594518249.js";import{F as y,C as P}from"./three-stdlib.uPGGcbR71741594518249.js";import{d as _}from"./@vue.NRI7TcgI1741594518249.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.xkRhjhkW1741594518249.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.BpDhqM3p1741594518249.js";import"./videoFloor.vue_vue_type_script_setup_true_lang._UAswL2Y1741594518249.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.Wy4jmlsy1741594518249.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.aCG6FUlR1741594518249.js";const z=b;function b(t,e){const n=E();return(b=function(t,e){return n[t-=147]})(t,e)}!function(t,e){const n=b,r=E();for(;;)try{if(551326===parseInt(n(159))/1+parseInt(n(168))/2*(-parseInt(n(151))/3)+-parseInt(n(176))/4*(parseInt(n(162))/5)+-parseInt(n(166))/6*(-parseInt(n(171))/7)+-parseInt(n(180))/8*(-parseInt(n(160))/9)+parseInt(n(161))/10*(-parseInt(n(156))/11)+parseInt(n(157))/12*(parseInt(n(169))/13))break;r.push(r.shift())}catch(i){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[b(170)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function E(){const t=["while (true) {}","4336688krpWDw","bind","toString",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"warn","string","counter","220953XaErKc","function *\\( *\\)","error","console","chain","297ahrPMR","84xONRhi","input","638126DxLpDE","18hWYmDE","236450GJbmPO","204395SlmrtB","constructor","test","exception","36PnHhMP","length","2eTEqbh","342030pNlPSw","apply","489741rtqgIV","__proto__",'{}.constructor("return this")( )',"debu","gger","104HPYgOv","prototype","info"];return(E=function(){return t})()}!function(){I(this,(function(){const t=b,e=new RegExp(t(152)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=D("init");e[t(164)](r+t(155))&&n[t(164)](r+t(158))?D():r("0")}))()}();const M=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();M(void 0,(function(){const t=b;let e;try{e=Function("return (function() "+t(173)+");")()}catch(i){e=window}const n=e[t(154)]=e.console||{},r=["log",t(148),t(178),t(153),t(165),"table","trace"];for(let a=0;a<r[t(167)];a++){const e=M[t(163)][t(177)][t(181)](M),i=r[a],o=n[i]||e;e[t(172)]=M[t(181)](M),e[t(182)]=o.toString[t(181)](o),n[i]=e}}))();const A=z(147);function D(t){function e(t){const n=b;if(typeof t===n(149))return function(t){}.constructor(n(179))[n(170)](n(150));1!==(""+t/t)[n(167)]||t%20==0?function(){return!0}[n(163)](n(174)+n(175)).call("action"):function(){return!1}[n(163)](n(174)+n(175)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const L=V;!function(t,e){const n=V,r=T();for(;;)try{if(510113===-parseInt(n(402))/1+-parseInt(n(396))/2*(-parseInt(n(410))/3)+parseInt(n(416))/4*(-parseInt(n(419))/5)+-parseInt(n(401))/6+parseInt(n(408))/7*(-parseInt(n(425))/8)+parseInt(n(398))/9*(-parseInt(n(413))/10)+parseInt(n(417))/11*(parseInt(n(430))/12))break;r.push(r.shift())}catch(i){r.push(r.shift())}}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){O(this,(function(){const t=V,e=new RegExp(t(397)),n=new RegExp(t(418),"i"),r=W("init");e[t(405)](r+t(404))&&n.test(r+t(415))?W():r("0")}))()}();const U=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[V(414)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function V(t,e){const n=T();return(V=function(t,e){return n[t-=395]})(t,e)}function T(){const t=["13530060lESwsa","log","uniforms","warn","6wXvARf","function *\\( *\\)","27nPmmsm","info","while (true) {}","1023732WJbLPl","798528WiUAHS","defines","chain","test","__proto__","toString","854qhFxnx","length","103557HrtCrE","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","gger","1566790mopzfD","apply","input","4HtierB","33WiQLVT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3312600EuUMWF","prototype","constructor","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","console","error","57328axiiXm","string","bind","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","debu"];return(T=function(){return t})()}function j(t){const e=V,n=a({},t);return e(403)in t&&(n[e(403)]=a({},t.defines)),e(432)in t&&(n[e(432)]=s.clone(t[e(432)])),n}U(void 0,(function(){const t=V;let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(i){e=window}const n=e[t(423)]=e.console||{},r=[t(431),t(395),t(399),t(424),"exception","table","trace"];for(let a=0;a<r[t(409)];a++){const e=U[t(421)][t(420)].bind(U),i=r[a],o=n[i]||e;e[t(406)]=U[t(427)](U),e[t(407)]=o[t(407)][t(427)](o),n[i]=e}}))();const R={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:L(422),fragmentShader:L(411)+A+L(428)};function W(t){function e(t){const n=V;if(typeof t===n(426))return function(t){}.constructor(n(400))[n(414)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(421)]("debugger").call("action"):function(){return!1}[n(421)](n(429)+n(412))[n(414)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const H=k;!function(t,e){const n=k,r=F();for(;;)try{if(933109===parseInt(n(165))/1*(parseInt(n(148))/2)+-parseInt(n(176))/3+parseInt(n(205))/4*(-parseInt(n(143))/5)+parseInt(n(190))/6*(parseInt(n(156))/7)+parseInt(n(188))/8+-parseInt(n(191))/9*(parseInt(n(192))/10)+-parseInt(n(175))/11*(-parseInt(n(172))/12))break;r.push(r.shift())}catch(i){r.push(r.shift())}}();const C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(158)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=k,e=new RegExp(t(200)),n=new RegExp(t(164),"i"),r=G("init");e[t(157)](r+t(204))&&n.test(r+t(160))?G():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(t,e){const n=F();return(k=function(t,e){return n[t-=142]})(t,e)}function F(){const t=["counter","type","constructor","height","setRenderTarget","gger","exception","3282888fpiRaF","__proto__","4362sAVamM","20322pkvVfe","2000dpNmzW","setClearColor","setClearAlpha","map","floor","getClearAlpha","bind","magFilter","function *\\( *\\)","X_IS_EVEN","toString","defines","chain","19472jSXbMe","material","texture","Y_IS_EVEN","copy","set","error","parentMapSize","log","_swapTarget","table","debu","parentLevel","setViewOffset",'{}.constructor("return this")( )',"autoClear","605sDaypa","console","uniforms","_mipMaterials","update","20LDDeEZ","dispose","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","getRenderTarget","clear","camera","while (true) {}","setSize","5971QYCNAj","test","apply","fragmentShader","input","length","image","floorPowerOfTwo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","93814AKdDOh","minFilter","replace","_copyQuad","isWebGLRenderTarget","prototype","value","12606168PzuVMO","warn","string","11LgtCSP","3136227HAFlFD","info","tDiffuse","_mipQuad","width"];return(F=function(){return t})()}N(void 0,(function(){const t=k,e=function(){const t=k;let e;try{e=Function("return (function() "+t(219)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(144)]||{},r=[t(213),t(173),t(177),t(211),t(187),t(215),"trace"];for(let i=0;i<r[t(161)];i++){const e=N[t(183)][t(170)][t(198)](N),a=r[i],o=n[a]||e;e[t(189)]=N.bind(N),e[t(202)]=o[t(202)][t(198)](o),n[a]=e}}))();const X=new l;class Z{constructor(t){const e=k;!t&&(t=e(150));const n=j(R);n[e(159)]=n[e(159)][e(167)](/<mipmap_logic>/g,t);const r=new Array(4);r[0]=new c(j(n)),r[0][e(203)][e(201)]=0,r[0].defines[e(208)]=0,r[1]=new c(j(n)),r[1][e(203)].X_IS_EVEN=1,r[1][e(203)][e(208)]=0,r[2]=new c(j(n)),r[2][e(203)][e(201)]=0,r[2][e(203)][e(208)]=1,r[3]=new c(j(n)),r[3][e(203)][e(201)]=1,r[3][e(203)].Y_IS_EVEN=1;const i=new p;i[e(207)][e(166)]=u,i[e(207)][e(199)]=u,this[e(214)]=i,this[e(168)]=new y(new c(P)),this[e(179)]=new y(null),this[e(146)]=r}[H(147)](t,e,n,r=!1){const i=H;t[i(169)]&&(t=t.texture);const o=n[i(142)],s=n[i(197)](),l=n[i(151)]();n.getClearColor(X);const c=this[i(168)],p=this._mipQuad,u=this._swapTarget,x=this._mipMaterials;let v,m;r?(v=f.floorPowerOfTwo(t[i(162)][i(180)]),m=f[i(163)](t.image[i(184)])):(v=Math[i(196)](t[i(162)][i(180)]),m=Math.floor(t[i(162)][i(184)]));const w=Math[i(196)](1.5*v),h=Math.floor(m);e[i(155)](w,h),u.texture[i(182)]!==e[i(207)][i(182)]?(u[i(149)](),u[i(209)](e),u.texture[i(162)]=a({},u.texture[i(162)])):u.setSize(w,h),n[i(142)]=!1,n.setClearColor(0),n[i(194)](),c[i(206)][i(145)][i(178)].value=t,c[i(153)].setViewOffset(v,m,0,0,w,h),n[i(185)](e),n[i(152)](),c.render(n),n[i(185)](u),n.clear(),c.render(n);let g=v,d=m,S=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[i(145)][i(195)][i(171)]=u[i(207)],t[i(145)][i(217)].value=S,t[i(145)][i(212)].value[i(210)](g,d),t[i(145)].originalMapSize[i(171)][i(210)](v,m),p[i(206)]=t,g=Math[i(196)](g/2),d=Math.floor(d/2);const r=h-2*d;n[i(185)](e),p[i(153)][i(218)](g,d,-v,-r,w,h),p.render(n),n[i(185)](u),t[i(145)][i(195)][i(171)]=e[i(207)],p.render(n),S++}return n.setRenderTarget(l),n.setClearAlpha(s),n[i(193)](X),n[i(142)]=o,S+1}[H(149)](){const t=H;this[t(214)].dispose(),this[t(179)][t(149)](),this[t(168)][t(149)](),this[t(146)].forEach((e=>e[t(149)]()))}}function G(t){function e(t){const n=k;if(typeof t===n(174))return function(t){}.constructor(n(154))[n(158)](n(181));1!==(""+t/t).length||t%20==0?function(){return!0}[n(183)]("debu"+n(186)).call("action"):function(){return!1}[n(183)](n(216)+n(186))[n(158)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=$,r=K();for(;;)try{if(435020===-parseInt(n(451))/1*(-parseInt(n(438))/2)+parseInt(n(443))/3*(-parseInt(n(437))/4)+parseInt(n(428))/5*(parseInt(n(495))/6)+parseInt(n(445))/7+parseInt(n(448))/8*(-parseInt(n(480))/9)+-parseInt(n(440))/10+-parseInt(n(465))/11*(-parseInt(n(460))/12))break;r.push(r.shift())}catch(i){r.push(r.shift())}}();const Q=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[$(491)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){Q(this,(function(){const t=$,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(470),"i"),r=J(t(454));e.test(r+t(441))&&n.test(r+"input")?J():r("0")}))()}();const Y=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[$(491)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function $(t,e){const n=K();return($=function(t,e){return n[t-=418]})(t,e)}Y(void 0,(function(){const t=$,e=function(){const t=$;let e;try{e=Function(t(475)+t(486)+");")()}catch(n){e=window}return e}(),n=e[t(435)]=e[t(435)]||{},r=["log",t(463),t(471),t(467),t(442),t(493),"trace"];for(let i=0;i<r[t(431)];i++){const e=Y.constructor.prototype[t(427)](Y),a=r[i],o=n[a]||e;e[t(496)]=Y[t(427)](Y),e[t(492)]=o[t(492)][t(427)](o),n[a]=e}}))();const B=_({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=$,r=t,i=new x,a=new(v[n(436)]),o=new(v[n(466)]),s=new Z,l=S({width:r[n(477)],height:r[n(477)],settings:{type:m}}),c=S({width:r[n(477)],height:r.resolution,settings:{type:m}}),{camera:p,renderer:u,scene:f}=g(),{onBeforeLoop:y}=d();return y((()=>{const t=n;(()=>{const t=n;if(!p[t(444)])return;i[t(418)](new w(0,1,0),0),i[t(430)](r.parent[t(433)]),o[t(461)](p[t(444)]);const e=new(v[t(484)])(0,0,1)[t(487)]().negate(),s=p[t(444)].getWorldPosition(new(v[t(484)]));e[t(489)](i[t(452)]);const c=new(v[t(484)]);i[t(474)](s,c);const x=c[t(487)]();x[t(421)](s),x.add(c),o[t(464)][t(461)](x);const m=new(v[t(484)])(0,0,-1);m[t(472)](p.value[t(473)](new(v[t(457)]))),m[t(456)](s);const g=new(v[t(484)]);r[t(469)][t(476)](g),g[t(421)](m),g[t(489)](i.normal)[t(459)](),g[t(456)](r.parent[t(476)](new w)),o.up[t(418)](0,1,0),o[t(472)](p[t(444)].getWorldQuaternion(new h)),o.up.reflect(i.normal),o[t(432)](g),o.updateMatrixWorld();const d=new(v[t(436)]);d[t(418)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d[t(420)](o[t(490)]),d[t(420)](o.matrixWorldInverse),a[t(461)](d),i[t(430)](o.matrixWorldInverse);const S=new(v[t(450)])(i[t(452)].x,i[t(452)].y,i[t(452)].z,i[t(419)]),y=o[t(490)],P=new(v[t(450)]);P.x=(Math[t(453)](S.x)+y[t(468)][8])/y[t(468)][0],P.y=(Math[t(453)](S.y)+y[t(468)][9])/y[t(468)][5],P.z=-1,P.w=(1+y.elements[10])/y.elements[14],S[t(455)](2/S[t(425)](P)),y[t(468)][2]=S.x,y[t(468)][6]=S.y,y[t(468)][10]=S.z+1,y[t(468)][14]=S.w;const _=u[t(444)][t(462)]();u[t(444)][t(424)](l.value),u[t(444)][t(494)][t(478)][t(434)][t(458)](!0),!1===u.value[t(482)]&&u.value[t(439)](),r[t(447)][t(479)]((e=>e[t(488)]=!1)),u.value[t(446)](f[t(444)],o),r[t(447)][t(479)]((t=>t.visible=!0)),u[t(444)][t(424)](_)})(),l[t(444)]&&c[t(444)]&&u[t(444)]&&s[t(422)](l[t(444)].texture,c[t(444)],u[t(444)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function J(t){function e(t){const n=$;if(typeof t===n(483))return function(t){}[n(449)]("while (true) {}")[n(491)](n(426));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(429)+n(485))[n(481)]("action"):function(){return!1}[n(449)]("debu"+n(485))[n(491)](n(423)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function K(){const t=["init","multiplyScalar","add","Quaternion","setMask","negate","180HHzflz","copy","getRenderTarget","warn","position","705199NyvWcn","PerspectiveCamera","error","elements","parent","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","applyQuaternion","getWorldQuaternion","projectPoint","return (function() ","getWorldPosition","resolution","buffers","forEach","36HwgooD","call","autoClear","string","Vector3","gger",'{}.constructor("return this")( )',"clone","visible","reflect","projectionMatrix","apply","toString","table","state","11658guZUMm","__proto__","set","constant","multiply","sub","update","stateObject","setRenderTarget","dot","counter","bind","1165YHASfK","debu","applyMatrix4","length","lookAt","matrixWorld","depth","console","Matrix4","8RBrMEQ","2XBpwzS","clear","4988120Oldbdy","chain","exception","844575sZPvgJ","value","607586aTwzCb","render","ignoreObjects","71112OHCflT","constructor","Vector4","31286wAzHfW","normal","sign"];return(K=function(){return t})()}!function(t,e){for(var n=nt,r=et();;)try{if(957231===-parseInt(n(306))/1*(parseInt(n(311))/2)+parseInt(n(322))/3*(-parseInt(n(321))/4)+-parseInt(n(301))/5+-parseInt(n(313))/6*(parseInt(n(318))/7)+-parseInt(n(302))/8+parseInt(n(317))/9+parseInt(n(330))/10*(parseInt(n(305))/11))break;r.push(r.shift())}catch(i){r.push(r.shift())}}();var q=function(){var t=!0;return function(e,n){var r=t?function(){if(n){var t=n[nt(325)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){q(this,(function(){var t=nt,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(319),"i"),r=rt(t(299));e.test(r+t(312))&&n[t(310)](r+"input")?rt():r("0")}))()}();var tt=function(){var t=!0;return function(e,n){var r=t?function(){if(n){var t=n[nt(325)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function et(){var t=["28GngGJC","chain","1547316PsaJEO","return (function() ","error","table","12255291JjyIfX","35NMzYgt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","16oNVyKI","249201rUFQfn","action","bind","apply","trace","__proto__","console","exception","43869310EgnDgA","counter","call","init","gger","4861395VMiSsR","5344608RfbKpB","log","string","11iXsgFX","109239vGZGBz","length","constructor","debu","test"];return(et=function(){return t})()}function nt(t,e){var n=et();return(nt=function(t,e){return n[t-=297]})(t,e)}function rt(t){function e(t){var n=nt;if(typeof t===n(304))return function(t){}[n(308)]("while (true) {}").apply(n(297));1!==(""+t/t)[n(307)]||t%20==0?function(){return!0}[n(308)](n(309)+n(300))[n(298)](n(323)):function(){return!1}[n(308)]("debu"+n(300))[n(325)](n(320)),e(++t)}try{if(t)return e;e(0)}catch(n){}}tt(void 0,(function(){for(var t=nt,e=function(){var t,e=nt;try{t=Function(e(314)+'{}.constructor("return this")( ));')()}catch(n){t=window}return t}(),n=e[t(328)]=e[t(328)]||{},r=[t(303),"warn","info",t(315),t(329),t(316),t(326)],i=0;i<r[t(307)];i++){var a=tt.constructor.prototype[t(324)](tt),o=r[i],s=n[o]||a;a[t(327)]=tt[t(324)](tt),a.toString=s.toString[t(324)](s),n[o]=a}}))();export{B as _};

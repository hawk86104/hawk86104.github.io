import{c7 as t,a3 as n,C as e,V as r}from"./three.W6GmiHfn1739444016646.js";import{a as o}from"./@tresjs.Q4_KYO2a1739444016646.js";import{R as c}from"./all.three.jD4iRnJs1739444016646.js";import{d as i,b as a,a3 as s,a2 as u,o as f,H as l,N as p,m,u as d}from"./@vue.NRI7TcgI1739444016646.js";!function(t,n){const e=h,r=x();for(;;)try{if(987874===parseInt(e(144))/1+parseInt(e(113))/2+-parseInt(e(126))/3*(-parseInt(e(132))/4)+-parseInt(e(114))/5*(-parseInt(e(135))/6)+-parseInt(e(106))/7+-parseInt(e(140))/8*(parseInt(e(124))/9)+-parseInt(e(128))/10*(parseInt(e(107))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(123)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(t,n){const e=x();return(h=function(t,n){return e[t-=101]})(t,n)}!function(){v(this,(function(){const t=h,n=new RegExp(t(145)),e=new RegExp(t(133),"i"),r=y(t(136));n[t(134)](r+t(146))&&e.test(r+t(122))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(){const t=["11pWtQTd","#include <emissivemap_fragment>","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t",'{}.constructor("return this")( )',"info","__proto__","3004180lMOkYL","27820cwfser","#include <project_vertex>","while (true) {}","action","gger","debu","string","bind","input","apply","3395961FDgiyF","exception","60DDatLv","toString","14626980QXOmTI","trace","warn","stateObject","101328xQrSZN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","1152EcSDSF","init","console","constructor","replace","8iHGElw","vertexShader","fragmentShader","log","782152JIigVP","function *\\( *\\)","chain","error","length","return (function() ","call","void main() {","7218883puUjKl"];return(x=function(){return t})()}g(void 0,(function(){const t=h;let n;try{n=Function(t(103)+t(110)+");")()}catch(o){n=window}const e=n[t(137)]=n.console||{},r=[t(143),t(130),t(111),t(101),t(125),"table",t(129)];for(let c=0;c<r[t(102)];c++){const n=g[t(138)].prototype.bind(g),o=r[c],i=e[o]||n;n[t(112)]=g[t(121)](g),n[t(127)]=i[t(127)][t(121)](i),e[o]=n}}))();function y(t){function n(t){const e=h;if(typeof t===e(120))return function(t){}[e(138)](e(116))[e(123)]("counter");1!==(""+t/t)[e(102)]||t%20==0?function(){return!0}[e(138)](e(119)+e(118))[e(104)](e(117)):function(){return!1}[e(138)](e(119)+"gger")[e(123)](e(131)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=w;function w(t,n){const e=S();return(w=function(t,n){return e[t-=175]})(t,n)}!function(t,n){const e=w,r=S();for(;;)try{if(622018===parseInt(e(240))/1+-parseInt(e(229))/2*(-parseInt(e(238))/3)+parseInt(e(180))/4+-parseInt(e(215))/5*(parseInt(e(196))/6)+parseInt(e(203))/7+parseInt(e(188))/8+-parseInt(e(217))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(177)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=w,n=new RegExp(t(181)),e=new RegExp(t(225),"i"),r=E(t(200));n[t(221)](r+t(213))&&e[t(221)](r+t(197))?E():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(177)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=w,n=function(){const t=w;let n;try{n=Function(t(224)+t(176)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},r=[t(201),"warn",t(178),t(195),t(236),t(194),t(234)];for(let o=0;o<r[t(185)];o++){const n=I.constructor[t(222)][t(209)](I),c=r[o],i=e[c]||n;n[t(239)]=I[t(209)](I),n[t(211)]=i[t(211)].bind(i),e[c]=n}}))();const M=[_(189)],C=[_(202),_(228)];function S(){const t=["textureMatrix",'{}.constructor("return this")( )',"apply","info","add","938592eQxWAo","function *\\( *\\)","tmRef","#ffffff","onBeforeRender","length","TresMesh","channel","6032496vBGZMn","rotation-x","attributes","gger","wrapS","TresMeshStandardMaterial","table","error","1897128UbmCdE","input","uniforms","renderTargetUniform","init","log","object","202391jcqpqO","repeat","update","#444","uv1","wrapT","bind","counter","toString","string","chain","showGridHelper","5hWAVYo","debu","18152811YDYssh","assign","value","stateObject","test","prototype","reflectorDiffuse","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tpgRef","constructor","visible","6gWQRiE","reflectMap","textureMatrixUniform","onBeforeCompile","color","trace","action","exception","primitive","965487vehckX","__proto__","972075BIxsyz"];return(S=function(){return t})()}const j=i({__name:_(223),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(183)}},async setup(i){const v=_;let g,x;const y=i,w=new t(9.5,10),b=a(),I=a(),S=a(),j=new c,E={mirror:{value:y.mirror},mixStrength:{value:y.mixStrength}},T=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var z=0;z<3;z++)T[z][v(192)]=n,T[z][v(208)]=n,T[z][v(204)].set(16,16);const R={color:new e(v(206)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},D=t=>{const n=v;t[n(198)][n(230)]=j[n(199)],t.uniforms[n(175)]=j[n(231)],t.uniforms=Object[n(218)](t[n(198)],E),(t=>{const n=h;t[n(141)]=t.vertexShader[n(139)]("void main() {",n(109)),t.vertexShader=t[n(141)][n(139)](n(115),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=h;t.fragmentShader=t.fragmentShader[n(139)](n(105),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(142)]=t.fragmentShader[n(139)](n(108),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=v;b.value&&(b[t(219)][t(190)][t(207)]=b[t(219)][t(190)].uv),S.value&&(S[t(219)].aoMap[t(187)]=1,S[t(219)][t(232)]=D),I.value&&(I.value[t(179)](j),I[t(219)][t(184)]=(n,e,r)=>{j[t(205)](n,e,r)}),y[t(233)]&&S[t(219)]&&(S[t(219)][t(233)]=new e(y.color))})),(t,n)=>{const e=v;return f(),l("TresGroup",null,[p(e(186),{ref_key:e(182),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(226),ref:b,args:[10,10]},null,512),p(e(193),m({ref_key:"tmsmRef",ref:S},R),null,16)],8,M),p(e(237),{object:d(w),visible:t[e(214)]},null,8,C)])}}});function E(t){function n(t){const e=w;if(typeof t===e(212))return function(t){}[e(227)]("while (true) {}")[e(177)](e(210));1!==(""+t/t).length||t%20==0?function(){return!0}[e(227)](e(216)+e(191)).call(e(235)):function(){return!1}[e(227)](e(216)+e(191))[e(177)](e(220)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

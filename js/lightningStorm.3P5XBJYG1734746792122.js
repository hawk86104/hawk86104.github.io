import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.0q7P_q931734746792122.js";import{B as i,V as s,cy as n,ab as e,X as r,h as o,an as a,$ as h,s as c,C as u,_ as l}from"./three.1FILWcBb1734746792122.js";import{e as d,g as p,F as m}from"./@tresjs.vA_UT8oy1734746792122.js";import{c as f}from"./simplex-noise.Yx8GBgKo1734746792122.js";import{d as g,a3 as y,o as b,D as v,u as S,r as x,j as w,g as _,m as P,F as I}from"./@vue.-THQH3GC1734746792122.js";import"./index.sj3xct-T1734746792122.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.e0bu2hHg1734746792122.js";import"./three-custom-shader-material.uwcZNtd-1734746792122.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1734746792122.js";import"./@vueuse.lqJslAkC1734746792122.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.N4e8HhDS1734746792122.js";import"./all.three.EfBg0caK1734746792122.js";import"./oimophysics.x0jH7fze1734746792122.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.lDhdz_P01734746792122.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.Z2xL5Chm1734746792122.js";import"./index.5EJM2L-T1734746792122.js";import"./three-stdlib.1ZAvCJOA1734746792122.js";import"./@pmndrs.53rYJjok1734746792122.js";import"./object-hash.J27X2Uyf1734746792122.js";import"./@amap.zNgKkCGX1734746792122.js";import"./jszip.shhf2-t61734746792122.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.S-n0nLMk1734746792122.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.l6Fck9j-1734746792122.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.06nnfEks1734746792122.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.hzuf3Ma31734746792122.js";const T=R;function R(t,i){const s=C();return(R=function(t,i){return s[t-=132]})(t,i)}!function(t,i){const s=R,n=C();for(;;)try{if(864176===parseInt(s(296))/1+parseInt(s(154))/2+-parseInt(s(250))/3*(-parseInt(s(254))/4)+-parseInt(s(217))/5+-parseInt(s(280))/6+-parseInt(s(260))/7+parseInt(s(291))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(264)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function C(){const t=["simplexX","radius0Factor","toString","subVectors","roughness","prototype","simplexZ","seedGenerator","input","radius0","getNewSegment","forwardsFill","floor","updateMesh","createPrismFaces","copy","destOffset","gger","subrayDutyCycle","radius1","straightness","up0","RAY_STEADY","minRadius","index","addNewSubray","currentCoordinate","positionVariationFactor","trace","count","state","currentCreateTriangleVertices","setSeed","currentSubray",'{}.constructor("return this")( )',"initSubray","seed","linPos0","visible","array","constructor","add","subrayPeriod","currentVertex","warn","RAY_PROPAGATING","linPos1","deathTime","cos","currentUVCoordinate","getSeed","usage","radius1Factor","up1","pos0","7309665mfUJXJ","init","RAY_EXTINGUISHED","SIN30DEG","test","normalize","raySegments","needsUpdate","recursionProbability","subrayProbability","onDecideSubrayCreation","vertices","createTriangleVerticesWithUVs","clone","stateObject","random","isInitialSegment","createRandomGenerator","maxSubrays","drawRange","fraction0","currentSegmentIndex","subrayCylinderPosition","sin","length","positionAttribute","sourceOffset","currentIndex","recursion","currentSeed","newPos","rayParameters","function *\\( *\\)","84636TfaPMz","fraction1","middlePos","side","228iAqHTh","isEternal","numSubrays","fillMesh","randomGenerator","RAY_INITIALIZED","7854721uCsVsz","exception","fractalRayRecursive","push","apply","vanishingTimeFactor","birthTime","info","cross1","table","ramification","subrays","uvs","fractalRay","createSubray","copyParameters","pos1","time","maxRaySegments","max","9983916KMKHrE","simplexY","uvsAttribute","debu","generateUVs","endPropagationTime","RAY_VANISHING","indices","action","middleLinPos","lerp","11218936YZoVvK","createPrism","update","createMesh","setAttribute","1439151vUgrNh","pow","return (function() ","LightningStrike","subrayConePosition","iteration","call","multiplyScalar","crossVectors","noiseSeed","RAY_UNBORN","maxSubrayRecursion","isStatic","lerpVectors","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","beginVanishingTime","vPos","createSegment","currentSegmentCallback","sub","propagationTimeFactor","COS30DEG","bind","onSubrayCreation","maxIterations","down","timeFraction","1325192BpdzIz","log","createDefaultSubrayCreationCallbacks","timeScale","chain","set","min","forwards"];return(C=function(){return t})()}!function(){A(this,(function(){const t=R,i=new RegExp(t(249)),s=new RegExp(t(141),"i"),n=z("init");i.test(n+t(158))&&s[t(221)](n+t(170))?z():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(264)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();V(void 0,(function(){const t=R,i=function(){const t=R;let i;try{i=Function(t(298)+t(196)+");")()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=[t(155),t(206),t(267),"error",t(261),t(269),t(190)];for(let e=0;e<n[t(241)];e++){const i=V[t(202)][t(167)].bind(V),r=n[e],o=s[r]||i;i.__proto__=V.bind(V),i.toString=o[t(164)][t(149)](o),s[r]=i}}))();class j extends i{constructor(t={}){const i=R;super(),this.isLightningStrike=!0,this.type=i(299),this[i(218)](j[i(275)](t,t)),this[i(294)]()}static createRandomGenerator(){const t=R,i=2053,s=[];for(let e=0;e<i;e++)s[t(263)](Math[t(232)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(246)]];return n[e(246)]=(n[e(246)]+1)%i,r},getSeed:function(){return n[t(246)]/i},setSeed:function(s){n[t(246)]=Math.floor(s*i)%i}};return n}static[T(275)](t={},i={}){const n=T,e=function(s){return i===t?s:s.clone()};return t[n(243)]=void 0!==i[n(243)]?e(i[n(243)]):new s(0,100,0),t[n(178)]=void 0!==i[n(178)]?e(i[n(178)]):new s(0,0,0),t[n(157)]=void 0!==i[n(157)]?i[n(157)]:1,t[n(166)]=void 0!==i[n(166)]?i[n(166)]:.9,t.straightness=void 0!==i[n(182)]?i[n(182)]:.7,t[n(183)]=void 0!==i.up0?e(i[n(183)]):new s(0,0,1),t[n(215)]=void 0!==i[n(215)]?e(i[n(215)]):new s(0,0,1),t[n(171)]=void 0!==i[n(171)]?i[n(171)]:1,t[n(181)]=void 0!==i[n(181)]?i.radius1:1,t[n(163)]=void 0!==i.radius0Factor?i[n(163)]:.5,t[n(214)]=void 0!==i[n(214)]?i[n(214)]:.2,t[n(185)]=void 0!==i[n(185)]?i[n(185)]:.2,t[n(255)]=void 0!==i[n(255)]?i.isEternal:void 0===i[n(266)]||void 0===i[n(209)],t[n(266)]=i[n(266)],t[n(209)]=i[n(209)],t[n(147)]=void 0!==i[n(147)]?i[n(147)]:.1,t[n(265)]=void 0!==i[n(265)]?i[n(265)]:.9,t[n(204)]=void 0!==i[n(204)]?i[n(204)]:4,t[n(180)]=void 0!==i[n(180)]?i[n(180)]:.6,t[n(151)]=void 0!==i[n(151)]?i[n(151)]:9,t.isStatic=void 0!==i[n(139)]&&i.isStatic,t[n(270)]=void 0!==i.ramification?i[n(270)]:5,t[n(138)]=void 0!==i[n(138)]?i.maxSubrayRecursion:3,t[n(225)]=void 0!==i.recursionProbability?i.recursionProbability:.6,t[n(284)]=void 0!==i[n(284)]&&i.generateUVs,t[n(258)]=i[n(258)],t.noiseSeed=i[n(136)],t[n(227)]=i.onDecideSubrayCreation,t[n(150)]=i[n(150)],t}[T(293)](t){const i=T;this[i(139)]||(this[i(248)].isEternal||this[i(248)][i(266)]<=t&&t<=this.rayParameters[i(209)]?(this[i(175)](t),t<this[i(271)][0].endPropagationTime?this[i(192)]=j[i(207)]:t>this[i(271)][0][i(142)]?this[i(192)]=j[i(286)]:this[i(192)]=j[i(184)],this.visible=!0):(this[i(200)]=!1,t<this[i(248)].birthTime?this[i(192)]=j[i(137)]:this[i(192)]=j[i(219)]))}[T(218)](t){const i=T;this[i(248)]=t,this[i(151)]=void 0!==t[i(151)]?Math[i(174)](t[i(151)]):9,t[i(151)]=this[i(151)],this[i(139)]=void 0!==t[i(139)]&&t[i(139)],t[i(139)]=this[i(139)],this[i(270)]=void 0!==t[i(270)]?Math[i(174)](t[i(270)]):5,t[i(270)]=this.ramification,this.maxSubrayRecursion=void 0!==t[i(138)]?Math[i(174)](t[i(138)]):3,t[i(138)]=this[i(138)],this[i(225)]=void 0!==t.recursionProbability?t[i(225)]:.6,t.recursionProbability=this[i(225)],this[i(284)]=void 0!==t[i(284)]&&t[i(284)],t[i(284)]=this[i(284)],void 0!==t[i(258)]?(this[i(258)]=t[i(258)],this[i(169)]=t[i(258)],void 0!==t.noiseSeed&&this.seedGenerator[i(194)](t[i(136)])):(this.randomGenerator=j[i(234)](),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this[i(227)]=t.onDecideSubrayCreation:(this[i(156)](),void 0!==t[i(150)]&&(this[i(150)]=t[i(150)])),this[i(192)]=j[i(259)],this[i(235)]=Math.ceil(1+Math[i(297)](this.ramification,Math[i(279)](0,this.maxSubrayRecursion-1))),t[i(235)]=this[i(235)],this[i(278)]=2*(1<<this.maxIterations),this.subrays=[];for(let s=0;s<this[i(235)];s++)this[i(271)][i(263)](this[i(274)]());this[i(223)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(223)][i(263)](this[i(144)]());this.time=0,this[i(153)]=0,this[i(145)]=null,this.currentCreateTriangleVertices=this[i(284)]?this[i(229)]:this.createTriangleVerticesWithoutUVs,this[i(256)]=0,this[i(195)]=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this.subrayProbability=0,this[i(205)]=0,this[i(244)]=0,this[i(188)]=0,this[i(211)]=0,this[i(228)]=null,this[i(272)]=null,this[i(287)]=null,this[i(242)]=null,this[i(282)]=null,this[i(162)]=f(this[i(169)].random),this[i(281)]=f(this[i(169)][i(232)]),this[i(168)]=f(this.seedGenerator.random),this[i(161)]=new s,this.forwardsFill=new s,this[i(253)]=new s,this.down=new s,this[i(252)]=new s,this[i(289)]=new s,this.newPos=new s,this[i(143)]=new s,this[i(268)]=new s}[T(294)](){const t=T,i=1<<this[t(151)],s=3*(i+1)*this[t(235)],o=18*i*this[t(235)];this[t(228)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(284)]&&(this[t(272)]=new Float32Array(2*s)),this[t(257)](0),this.setIndex(new n(this[t(287)],1)),this.positionAttribute=new e(this[t(228)],3),this[t(295)]("position",this[t(242)]),this[t(284)]&&(this[t(282)]=new e(new Float32Array(this[t(272)]),2),this[t(295)]("uv",this.uvsAttribute)),!this.isStatic&&(this.index[t(213)]=r,this.positionAttribute[t(213)]=r,this[t(284)]&&(this.uvsAttribute[t(213)]=r)),this.vertices=this[t(242)].array,this[t(287)]=this.index[t(201)],this[t(284)]&&(this.uvs=this[t(282)][t(201)])}[T(175)](t){const i=T;this[i(257)](t),this[i(236)][i(191)]=this[i(244)],this[i(186)][i(224)]=!0,this[i(242)][i(224)]=!0,this[i(284)]&&(this.uvsAttribute.needsUpdate=!0)}[T(257)](t){const i=T,s=this;this[i(205)]=0,this[i(244)]=0,this[i(188)]=0,this[i(211)]=0,this[i(273)](t,(function(n){const e=i,r=s[e(195)];t<r[e(266)]||(this[e(248)][e(255)]&&0==s[e(195)][e(245)]?(s[e(292)](n),s.onDecideSubrayCreation(n,s)):t<r[e(285)]?s[e(153)]>=n[e(237)]*r[e(147)]&&(s[e(292)](n),s[e(227)](n,s)):t<r.beginVanishingTime?(s[e(292)](n),s[e(227)](n,s)):(s.timeFraction<=r[e(265)]+n[e(251)]*(1-r[e(265)])&&s[e(292)](n),s[e(227)](n,s)))}))}[T(187)](){const t=T;return this[t(271)][this[t(256)]++]}[T(197)](t,i){const s=T;t[s(216)][s(177)](i.sourceOffset),t.pos1[s(177)](i[s(178)]),t[s(183)][s(177)](i[s(183)]),t.up1.copy(i[s(215)]),t[s(171)]=i.radius0,t[s(181)]=i.radius1,t[s(266)]=i[s(266)],t.deathTime=i.deathTime,t[s(157)]=i.timeScale,t.roughness=i[s(166)],t[s(182)]=i.straightness,t.propagationTimeFactor=i[s(147)],t.vanishingTimeFactor=i[s(265)],t.maxIterations=this[s(151)],t[s(198)]=void 0!==i[s(136)]?i[s(136)]:0,t[s(245)]=0}[T(273)](t,i){const s=T;this[s(277)]=t,this.currentSegmentCallback=i,this.numSubrays=0,this[s(197)](this[s(187)](),this[s(248)]);for(let n=0;n<this[s(256)];n++){const i=this.subrays[n];this[s(195)]=i,this.randomGenerator[s(194)](i[s(198)]),i.endPropagationTime=o[s(290)](i[s(266)],i[s(209)],i[s(147)]),i[s(142)]=o[s(290)](i.deathTime,i.birthTime,1-i[s(265)]);const e=this.randomGenerator.random;i.linPos0.set(e(),e(),e())[s(134)](1e3),i[s(208)][s(159)](e(),e(),e())[s(134)](1e3),this[s(153)]=(t-i[s(266)])/(i[s(209)]-i[s(266)]),this[s(238)]=0,this[s(233)]=!0;const r=this[s(172)]();r[s(132)]=0,r[s(216)][s(177)](i.pos0),r[s(276)][s(177)](i[s(276)]),r[s(199)][s(177)](i[s(199)]),r[s(208)][s(177)](i.linPos1),r[s(183)].copy(i[s(183)]),r[s(215)][s(177)](i[s(215)]),r[s(171)]=i[s(171)],r[s(181)]=i[s(181)],r[s(237)]=0,r[s(251)]=1,r[s(189)]=1-i[s(182)],this[s(226)]=this.ramification*Math[s(297)](this[s(225)],i[s(245)])/(1<<i[s(151)]),this.fractalRayRecursive(r)}this[s(145)]=null,this[s(195)]=null}[T(262)](t){const i=T;if(t[i(132)]>=this[i(195)][i(151)])return void this[i(145)](t);this[i(161)].subVectors(t[i(276)],t[i(216)]);let s=this.forwards[i(241)]();s<1e-6&&(this[i(161)][i(159)](0,0,.01),s=this[i(161)][i(241)]());const n=.5*(t[i(171)]+t.radius1),e=.5*(t[i(237)]+t.fraction1),r=this[i(277)]*this[i(195)][i(157)]*Math[i(297)](2,t[i(132)]);this[i(252)][i(140)](t.pos0,t[i(276)],.5),this[i(289)][i(140)](t.linPos0,t[i(208)],.5);const o=this[i(289)];this[i(247)][i(159)](this[i(162)](o.x,o.y,o.z,r),this[i(281)](o.x,o.y,o.z,r),this[i(168)](o.x,o.y,o.z,r)),this[i(247)][i(134)](t[i(189)]*s),this[i(247)][i(203)](this[i(252)]);const a=this.getNewSegment();a.pos0[i(177)](t[i(216)]),a[i(276)].copy(this[i(247)]),a.linPos0[i(177)](t[i(199)]),a[i(208)][i(177)](this[i(289)]),a[i(183)][i(177)](t.up0),a[i(215)][i(177)](t.up1),a.radius0=t[i(171)],a[i(181)]=n,a[i(237)]=t[i(237)],a[i(251)]=e,a.positionVariationFactor=t.positionVariationFactor*this[i(195)].roughness,a.iteration=t.iteration+1;const h=this.getNewSegment();h.pos0[i(177)](this[i(247)]),h[i(276)][i(177)](t[i(276)]),h[i(199)][i(177)](this[i(289)]),h[i(208)].copy(t[i(208)]),this[i(268)][i(135)](t[i(183)],this.forwards[i(222)]()),h[i(183)].crossVectors(this[i(161)],this[i(268)]).normalize(),h[i(215)].copy(t[i(215)]),h[i(171)]=n,h[i(181)]=t[i(181)],h.fraction0=e,h[i(251)]=t[i(251)],h[i(189)]=t[i(189)]*this.currentSubray[i(166)],h[i(132)]=t.iteration+1,this.fractalRayRecursive(a),this.fractalRayRecursive(h)}createPrism(t){const i=T;this.forwardsFill[i(165)](t[i(276)],t[i(216)])[i(222)](),this.isInitialSegment&&(this[i(193)](t[i(216)],t[i(183)],this[i(173)],t.radius0,0),this[i(233)]=!1),this[i(193)](t[i(276)],t.up0,this[i(173)],t.radius1,t.fraction1),this[i(176)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=T;this[e(253)][e(135)](i,s)[e(134)](n*j[e(148)]),this.down[e(177)](i)[e(134)](-n*j[e(220)]);const r=this[e(143)],o=this[e(228)];r[e(177)](t)[e(146)](this[e(253)])[e(203)](this[e(152)]),o[this[e(188)]++]=r.x,o[this[e(188)]++]=r.y,o[this[e(188)]++]=r.z,r[e(177)](t)[e(203)](this[e(253)])[e(203)](this[e(152)]),o[this[e(188)]++]=r.x,o[this[e(188)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(177)](i).multiplyScalar(n)[e(203)](t),o[this[e(188)]++]=r.x,o[this[e(188)]++]=r.y,o[this[e(188)]++]=r.z,this[e(205)]+=3}[T(229)](t,i,s,n,e){const r=T;this[r(253)][r(135)](i,s)[r(134)](n*j.COS30DEG),this[r(152)][r(177)](i)[r(134)](-n*j[r(220)]);const o=this.vPos,a=this[r(228)],h=this[r(272)];o[r(177)](t)[r(146)](this.side)[r(203)](this[r(152)]),a[this.currentCoordinate++]=o.x,a[this[r(188)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(211)]++]=e,h[this[r(211)]++]=0,o[r(177)](t).add(this.side)[r(203)](this.down),a[this.currentCoordinate++]=o.x,a[this[r(188)]++]=o.y,a[this[r(188)]++]=o.z,h[this[r(211)]++]=e,h[this[r(211)]++]=.5,o[r(177)](i)[r(134)](n)[r(203)](t),a[this.currentCoordinate++]=o.x,a[this[r(188)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(211)]++]=1,this.currentVertex+=3}[T(176)](t){const i=T,s=this[i(287)];t=this.currentVertex-6,s[this.currentIndex++]=t+1,s[this[i(244)]++]=t+2,s[this[i(244)]++]=t+5,s[this[i(244)]++]=t+1,s[this[i(244)]++]=t+5,s[this[i(244)]++]=t+4,s[this[i(244)]++]=t+0,s[this[i(244)]++]=t+1,s[this.currentIndex++]=t+4,s[this[i(244)]++]=t+0,s[this[i(244)]++]=t+4,s[this[i(244)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(244)]++]=t+0,s[this[i(244)]++]=t+3,s[this[i(244)]++]=t+2,s[this[i(244)]++]=t+3,s[this.currentIndex++]=t+5}createDefaultSubrayCreationCallbacks(){const t=T,i=this[t(258)][t(232)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(195)],a=n[e(248)][e(204)],h=n[e(248)][e(180)],c=n.rayParameters[e(255)]&&0==r[e(245)]?-i()*a:o[e(290)](r[e(266)],r.endPropagationTime,s[e(237)])-i()*a,u=n[e(277)]-c,l=Math[e(174)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n.subrayProbability),r.recursion<n.maxSubrayRecursion&&n.numSubrays<n.maxSubrays&&i()<p){const t=n.addNewSubray(),o=n[e(258)][e(212)]();t[e(198)]=d,n[e(258)][e(194)](d),t[e(245)]=r[e(245)]+1,t[e(151)]=Math.max(1,r[e(151)]-1),t[e(199)][e(159)](i(),i(),i())[e(134)](1e3),t[e(208)][e(159)](i(),i(),i())[e(134)](1e3),t.up0[e(177)](r.up0),t[e(215)].copy(r[e(215)]),t[e(171)]=s.radius0*n[e(248)].radius0Factor,t[e(181)]=Math.min(n.rayParameters.minRadius,s[e(181)]*n.rayParameters[e(214)]),t[e(266)]=c+l*a,t[e(209)]=t.birthTime+a*h,!n[e(248)][e(255)]&&0==r[e(245)]&&(t.birthTime=Math[e(279)](t[e(266)],r[e(266)]),t[e(209)]=Math[e(160)](t[e(209)],r[e(209)])),t[e(157)]=2*r[e(157)],t.roughness=r[e(166)],t[e(182)]=r[e(182)],t[e(147)]=r[e(147)],t.vanishingTimeFactor=r[e(265)],n.onSubrayCreation(s,r,t,n),n[e(258)][e(194)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(150)]=function(i,s,n,e){e[t(239)](i,s,n,.5,.6,.2)},this[t(300)]=function(s,o,h,c,u,l){const d=t;h[d(216)].copy(s.pos0),n[d(165)](o[d(276)],o[d(216)]),e.copy(n)[d(222)](),n[d(134)](s[d(237)]+(1-s.fraction0)*(i()*c));const p=n.length();r.crossVectors(o[d(183)],e);const m=2*Math.PI*i();r[d(134)](Math[d(210)](m)),a[d(177)](o[d(183)]).multiplyScalar(Math[d(240)](m)),h[d(276)][d(177)](r).add(a)[d(134)](p*u*(l+i()*(1-l))).add(n)[d(203)](o[d(216)])},this[t(239)]=function(s,o,h,c,u,l){const d=t;h[d(216)][d(177)](s[d(216)]),n[d(165)](o[d(276)],o.pos0),e[d(177)](n).normalize(),n.multiplyScalar(s[d(237)]+(1-s.fraction0)*((2*i()-1)*c));const p=n[d(241)]();r[d(135)](o[d(183)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[d(210)](m)),a[d(177)](o.up0)[d(134)](Math.sin(m)),h[d(276)].copy(r)[d(203)](a)[d(134)](p*u*(l+i()*(1-l))).add(n).add(o[d(216)])}}[T(274)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(144)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(172)](){return this[T(223)][this.currentSegmentIndex++]}copy(t){const i=T;return super[i(177)](t),this[i(218)](j[i(275)]({},t[i(248)])),this}[T(230)](){const t=T;return new this.constructor(j.copyParameters({},this[t(248)]))}}function z(t){function i(t){const s=R;if("string"==typeof t)return function(t){}[s(202)]("while (true) {}").apply("counter");1!==(""+t/t)[s(241)]||t%20==0?function(){return!0}[s(202)](s(283)+s(179))[s(133)](s(288)):function(){return!1}[s(202)](s(283)+s(179))[s(264)](s(231)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[T(259)]=0,j[T(137)]=1,j[T(207)]=2,j.RAY_STEADY=3,j[T(286)]=4,j.RAY_EXTINGUISHED=5,j[T(148)]=Math[T(210)](30*Math.PI/180),j[T(220)]=Math.sin(30*Math.PI/180);const F=G;function D(){const t=["maxLightnings","lightningMaxPeriod","return (function() ","call","2736PQcblI","lightningMinDuration","isLightningStorm","console","set","bind","geometry","__proto__","push","RAY_PROPAGATING","288096NplkMB","43679VBdMco","maxHeight","destOffset","14bPtLoF","lerp","rayParameters","size","879340zYYKGi","error","minHeight","deadLightningsMeshes","496084WtALwW","3681HdOlcR","chain","multiplyScalar","counter","nextLightningTime","add","random","constructor","state","noiseSeed","update","debu","init","lightningsMeshes","30DaiFuC","599376IQxPAE","remove","lightningMaterial","stateObject","clone","lightningMinPeriod","while (true) {}","lightningMaxDuration","stormParams","indexOf","3UzAjyv","inited","pop","apply","onLightningDown","splice","copyParameters","sourceOffset","test","length","getNextLightningTime","RAY_EXTINGUISHED","902121uCxfcN","trace","gger","maxSlope","lightningParameters","string","action","warn","birthTime","onRayPosition","toString","copy"];return(D=function(){return t})()}!function(t,i){const s=G,n=D();for(;;)try{if(105883===parseInt(s(174))/1+-parseInt(s(173))/2+-parseInt(s(135))/3*(-parseInt(s(185))/4)+parseInt(s(181))/5+-parseInt(s(125))/6*(parseInt(s(177))/7)+parseInt(s(163))/8*(-parseInt(s(186))/9)+-parseInt(s(124))/10*(-parseInt(s(147))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(138)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=G,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=L(t(198));i[t(143)](n+t(187))&&s[t(143)](n+"input")?L():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(138)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function G(t,i){const s=D();return(G=function(t,i){return s[t-=123]})(t,i)}E(void 0,(function(){const t=G;let i;try{i=Function(t(161)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(166)]=i[t(166)]||{},n=["log",t(154),"info",t(182),"exception","table",t(148)];for(let r=0;r<n[t(144)];r++){const i=E[t(193)].prototype[t(168)](E),e=n[r],o=s[e]||i;i[t(170)]=E[t(168)](E),i.toString=o[t(157)][t(168)](o),s[e]=i}}))();class O extends a{constructor(t={}){const i=G;super(),this[i(165)]=!0,this[i(133)]=t,t.size=void 0!==t.size?t[i(180)]:1e3,t.minHeight=void 0!==t[i(183)]?t[i(183)]:80,t[i(175)]=void 0!==t[i(175)]?t.maxHeight:100,t[i(150)]=void 0!==t[i(150)]?t[i(150)]:1.1,t[i(159)]=void 0!==t[i(159)]?t[i(159)]:3,t[i(130)]=void 0!==t.lightningMinPeriod?t[i(130)]:3,t[i(160)]=void 0!==t[i(160)]?t[i(160)]:7,t[i(164)]=void 0!==t[i(164)]?t[i(164)]:1,t[i(132)]=void 0!==t.lightningMaxDuration?t[i(132)]:2.5,this[i(151)]=j[i(141)](t[i(151)],t[i(151)]),this[i(151)].isEternal=!1,this[i(127)]=void 0!==t[i(127)]?t[i(127)]:new h({color:11599871}),void 0!==t[i(156)]?this[i(156)]=t[i(156)]:this[i(156)]=function(s,n){const e=i;n[e(167)]((Math[e(192)]()-.5)*t[e(180)],0,(Math.random()-.5)*t[e(180)]);const r=o[e(178)](t[e(183)],t[e(175)],Math.random());s.set(t[e(150)]*(2*Math[e(192)]()-1),1,t[e(150)]*(2*Math[e(192)]()-1))[e(188)](r)[e(191)](n)},this[i(139)]=t[i(139)],this[i(136)]=!1,this[i(190)]=0,this[i(123)]=[],this[i(184)]=[];for(let s=0;s<this[i(133)][i(159)];s++){const t=new j(j[i(141)]({},this[i(151)])),s=new c(t,this[i(127)]);this.deadLightningsMeshes[i(171)](s)}}[F(196)](t){const i=F;if(!this.inited&&(this[i(190)]=this[i(145)](t)*Math[i(192)](),this[i(136)]=!0),t>=this[i(190)]){const s=this[i(184)][i(137)]();if(s){const n=j[i(141)](s.geometry[i(179)],this[i(151)]);n[i(155)]=t,n.deathTime=t+o[i(178)](this[i(133)][i(164)],this[i(133)][i(132)],Math[i(192)]()),this[i(156)](n[i(142)],n[i(176)]),n[i(195)]=Math[i(192)](),this.add(s),this[i(123)][i(171)](s)}this.nextLightningTime=this[i(145)](t)}let s=0,n=this[i(123)][i(144)];for(;s<n;){const e=this[i(123)][s],r=e[i(169)],o=r.state;r[i(196)](t),o===j[i(172)]&&r[i(194)]>o&&this[i(139)]&&this[i(139)](r),r[i(194)]===j[i(146)]?(this[i(123)][i(140)](this[i(123)][i(134)](e),1),this[i(184)][i(171)](e),this[i(126)](e),n--):s++}}[F(145)](t){const i=F;return t+o[i(178)](this[i(133)][i(130)],this[i(133)][i(160)],Math[i(192)]())/(this.stormParams.maxLightnings+1)}[F(158)](t,i){const s=F;return super[s(158)](t,i),this[s(133)][s(180)]=t[s(133)].size,this[s(133)][s(183)]=t[s(133)][s(183)],this[s(133)][s(175)]=t[s(133)][s(175)],this.stormParams.maxSlope=t[s(133)][s(150)],this[s(133)][s(159)]=t[s(133)].maxLightnings,this[s(133)][s(130)]=t[s(133)][s(130)],this[s(133)].lightningMaxPeriod=t.stormParams[s(160)],this[s(133)][s(164)]=t[s(133)][s(164)],this[s(133)].lightningMaxDuration=t.stormParams[s(132)],this[s(151)]=j[s(141)]({},t.lightningParameters),this.lightningMaterial=t[s(133)].lightningMaterial,this[s(139)]=t[s(139)],this}[F(129)](){const t=F;return new(this[t(193)])(this[t(133)])[t(158)](this)}}function L(t){function i(t){const s=G;if(typeof t===s(152))return function(t){}[s(193)](s(131)).apply(s(189));1!==(""+t/t)[s(144)]||t%20==0?function(){return!0}.constructor("debugger")[s(162)](s(153)):function(){return!1}[s(193)](s(197)+s(149))[s(138)](s(128)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=Y,n=k();for(;;)try{if(440233===-parseInt(s(393))/1+parseInt(s(365))/2*(-parseInt(s(424))/3)+-parseInt(s(378))/4*(parseInt(s(397))/5)+parseInt(s(390))/6+-parseInt(s(389))/7*(-parseInt(s(423))/8)+parseInt(s(405))/9+parseInt(s(416))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=Y,i=new RegExp(t(413)),s=new RegExp(t(380),"i"),n=X(t(418));i[t(379)](n+"chain")&&s[t(379)](n+t(373))?X():n("0")}))()}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=k();return(Y=function(t,i){return s[t-=365]})(t,i)}function k(){const t=["primitive","radius0","length","15868SXHPTK","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","warn","constructor","size","console","action","multiplyScalar","copy","14SsMYHQ","3397698XAeMOw","maxHeight","subrayConePosition","738223kTbafu","update","apply","add","995nPkofO","counter","roughness","dot","subVectors","maxLightnings","debu","call","7667190dgeKhn","minHeight","error","MeshBasicMaterial","trace","sub","__proto__","exception","function *\\( *\\)","pos1","stateObject","3031870cmzmqx","timeScale","init","subrayPeriod","gger","table",'{}.constructor("return this")( )',"2209064ZHLVUk","1923tCVvck","color","954AVPYvQ","rayParameters","sourceOffset","straightness","toString","radius1","set","prototype","input","Vector3"];return(k=function(){return t})()}N(void 0,(function(){const t=Y;let i;try{i=Function("return (function() "+t(422)+");")()}catch(e){i=window}const s=i[t(385)]=i[t(385)]||{},n=["log",t(382),"info",t(407),t(412),t(421),t(409)];for(let r=0;r<n[t(377)];r++){const i=N[t(383)][t(372)].bind(N),e=n[r],o=s[e]||i;i[t(411)]=N[t(381)](N),i[t(369)]=o[t(369)][t(381)](o),s[e]=i}}))();const Z=["object"],$=g({__name:"lightStorm",props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=Y,n=t,e=new u(n[i(425)]),r=new(l[i(408)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(l[i(374)]),c=new(l[i(374)]),p={roughness:n[i(399)],straightness:n.straightness,radius0:n[i(376)],radius1:n.radius1,timeScale:n.timeScale,subrayPeriod:n[i(419)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(392)](t,s,n,.6,.6,.5),a=e[r(366)].sourceOffset.y,h[r(401)](n[r(414)],e.rayParameters.sourceOffset);const u=o[r(400)](h);c[r(388)](o).multiplyScalar(u),h[r(410)](c);const l=u/a>.5?a/u:1;c[r(387)](l),h[r(396)](c),n[r(414)].addVectors(h,e[r(366)][r(367)])}},m=new O({size:n.size,minHeight:n[i(406)],maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(402)],lightningParameters:p,lightningMaterial:r});y((()=>{const t=i,s=m.stormParams;s[t(384)]=n[t(384)],s[t(406)]=n[t(406)],s[t(391)]=n.maxHeight,r[t(425)][t(371)](n[t(425)]),p.roughness=n.roughness,p[t(368)]=n[t(368)],p[t(376)]=n.radius0,p.radius1=n[t(370)],p[t(417)]=n[t(417)]}));const{onLoop:f}=d();return f((({elapsed:t})=>{m[i(394)](t)})),(t,s)=>{const n=i;return b(),v(n(375),{object:S(m),renderOrder:9999},null,8,Z)}}});function X(t){function i(t){const s=Y;if("string"==typeof t)return function(t){}[s(383)]("while (true) {}")[s(395)](s(398));1!==(""+t/t).length||t%20==0?function(){return!0}[s(383)](s(403)+"gger")[s(404)](s(386)):function(){return!1}.constructor("debu"+s(420))[s(395)](s(415)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=q;function W(){const t=['{}.constructor("return this")( )',"constructor","端部半径","4379292WEYVLR","1045GvcWsi","chain","stateObject","gger","error","apply","bind","lightningStorm","string","#92399e","info","12873969igAdyk","action","8vlFEMm","color","minHeight","2nmORSU","debu","while (true) {}","exception","log","未部半径","#ffbde7","58754AiEDiu","table","length","prototype","warn","67194340vnRbQO","__proto__","counter","7055755LlBURv","console","timeScale","trace","call","粗糙度","value","1504116IhYBXZ","function *\\( *\\)","straightness","maxHeight","test","roughness","#6f6f6f","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","radius1","50424xnvOov"];return(W=function(){return t})()}!function(t,i){const s=q,n=W();for(;;)try{if(987151===parseInt(s(177))/1+parseInt(s(170))/2*(-parseInt(s(140))/3)+-parseInt(s(153))/4+parseInt(s(154))/5*(-parseInt(s(149))/6)+-parseInt(s(133))/7+-parseInt(s(167))/8*(parseInt(s(165))/9)+parseInt(s(130))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(159)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){K(this,(function(){const t=q,i=new RegExp(t(141)),s=new RegExp(t(147),"i"),n=tt("init");i[t(144)](n+t(155))&&s.test(n+"input")?tt():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(159)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=W();return(q=function(t,i){return s[t-=129]})(t,i)}Q(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function("return (function() "+t(150)+");")()}catch(s){i=window}return i}(),s=i[t(134)]=i[t(134)]||{},n=[t(174),t(129),t(164),t(158),t(173),t(178),t(136)];for(let e=0;e<n[t(179)];e++){const i=Q.constructor[t(180)][t(160)](Q),r=n[e],o=s[r]||i;i[t(131)]=Q.bind(Q),i.toString=o.toString.bind(o),s[r]=i}}))();const J=g({__name:B(161),setup(i){const s=B,n=x({cellSize:60,cellThickness:1,cellColor:s(146),sectionColor:s(163),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(176),roughness:{label:s(138),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(152),value:1,min:.1,max:10,step:.01},radius1:{label:s(175),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const p=s;return b(),v(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[w($,{minHeight:S(e)[p(139)],maxHeight:S(r).value,color:S(o)[p(139)],roughness:S(a).value,straightness:S(h)[p(139)],radius0:S(c)[p(139)],radius1:S(u).value,timeScale:S(l)[p(139)]},null,8,[p(169),p(143),p(168),p(145),p(142),"radius0",p(148),p(135)]),w(S(M),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(S(m))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(162))return function(t){}[s(151)](s(172)).apply(s(132));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(171)+s(157))[s(137)](s(166)):function(){return!1}[s(151)](s(171)+s(157))[s(159)](s(156)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

import{_ as t,C as n,cf as o,cg as e,ch as r,ci as i,m as u,bU as c,ak as s,am as a}from"./three.3b9CEYeV1731055558423.js";import{d as l,e as f,U as p}from"./@tresjs.KsuCtVXf1731055558423.js";import{z as d}from"./three-custom-shader-material.JEUeb9V91731055558423.js";import{d as h,b as y,a3 as m,w as g,o as w,D as v,u as b,r as _,a6 as I,e as C,f as x,g as M,J as O,j as T,aj as S,ak as A,F as B,I as R,G as j,m as k}from"./@vue.u2cBPEWn1731055558423.js";!function(t,n){const o=F,e=G();for(;;)try{if(637890===-parseInt(o(302))/1*(parseInt(o(290))/2)+-parseInt(o(309))/3*(parseInt(o(300))/4)+-parseInt(o(272))/5+parseInt(o(294))/6*(-parseInt(o(304))/7)+parseInt(o(283))/8*(-parseInt(o(291))/9)+-parseInt(o(301))/10*(parseInt(o(306))/11)+parseInt(o(276))/12*(parseInt(o(286))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=F,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(284),"i"),e=z("init");n[t(285)](e+t(277))&&o[t(285)](e+t(289))?z():e("0")}))()}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[F(279)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function F(t,n){const o=G();return(F=function(t,n){return o[t-=270]})(t,n)}E(void 0,(function(){const t=F;let n;try{n=Function("return (function() "+t(296)+");")()}catch(r){n=window}const o=n[t(303)]=n[t(303)]||{},e=[t(273),t(287),t(281),t(299),t(295),t(292),t(307)];for(let i=0;i<e[t(308)];i++){const n=E.constructor[t(293)].bind(E),r=e[i],u=o[r]||n;n.__proto__=E.bind(E),n.toString=u[t(288)].bind(u),o[r]=n}}))();const H=async()=>{const t=F,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(271)]((n=>{const i=t;n[i(282)]===i(310)&&(o=n),n[i(282)]===i(278)&&(e=n),n[i(282)]===i(280)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function z(t){function n(t){const o=F;if(typeof t===o(274))return function(t){}[o(270)]("while (true) {}")[o(279)]("counter");1!==(""+t/t)[o(308)]||t%20==0?function(){return!0}[o(270)](o(297)+o(298))[o(275)](o(305)):function(){return!1}.constructor(o(297)+o(298))[o(279)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}function G(){const t=["error","680DjIuqe","59990hpXXQE","4tnYwgS","console","1017779xIzEAz","action","1463GkhxBD","trace","length","10953mQYHEL","CITY_UNTRIANGULATED","constructor","traverse","1088475KMdZtx","log","string","call","12sBigyI","chain","LANDMASS","apply","ROADS","info","name","8376HVhTgD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","45925633AFWMBB","warn","toString","input","80566UspORn","1935pcFOkk","table","prototype","36NfNsvl","exception",'{}.constructor("return this")( )',"debu","gger"];return(G=function(){return t})()}const L=N;!function(t,n){const o=N,e=U();for(;;)try{if(101356===parseInt(o(360))/1+parseInt(o(345))/2+-parseInt(o(350))/3+-parseInt(o(395))/4*(parseInt(o(363))/5)+parseInt(o(336))/6*(-parseInt(o(334))/7)+parseInt(o(342))/8+parseInt(o(366))/9*(-parseInt(o(349))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){W(this,(function(){const t=N,n=new RegExp(t(352)),o=new RegExp(t(340),"i"),e=Y("init");n.test(e+t(367))&&o[t(377)](e+t(348))?Y():e("0")}))()}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function N(t,n){const o=U();return(N=function(t,n){return o[t-=334]})(t,n)}Z(void 0,(function(){const t=N,n=function(){const t=N;let n;try{n=Function(t(384)+t(354)+");")()}catch(o){n=window}return n}(),o=n[t(369)]=n.console||{},e=[t(376),t(362),t(371),t(353),t(372),t(386),t(392)];for(let r=0;r<e[t(357)];r++){const n=Z.constructor.prototype[t(380)](Z),i=e[r],u=o[i]||n;n[t(389)]=Z[t(380)](Z),n[t(379)]=u[t(379)][t(380)](u),o[i]=n}}))();const P=["object"];function U(){const t=["uColor","uOpacity","return (function() ","string","table","gger","call","__proto__","Color","dispose","trace","DoubleSide","computeBoundingBox","4cABYai","1022BOfKYf","isArray","1698uZgqJA","bulidingsColor","model","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","489680mMUvgs","action","setStyle","305412kYbXlc","#e523ff","landColor","input","171070iiPExj","77784yuWplh","#ffff00","function *\\( *\\)","error",'{}.constructor("return this")( )',"clone","uGradient","length","land","opacity","142800NCiPFJ","debu","warn","855035CIWsKC","__csm","uniforms","9TFHCdu","chain","constructor","console","boundingBox","info","exception","material","buildingsModelCustomShader","computeBoundingSphere","log","test","#112233","toString","bind","apply"];return(U=function(){return t})()}const $=h({__name:L(374),props:{model:{},bulidingsColor:{default:L(346)},landColor:{default:L(378)},topColor:{default:L(351)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=L,r=o,i=y(0),u=r[e(338)].city;u.renderOrder=1001;const c=r.model[e(358)];(()=>{const o=e,{geometry:c}=u;c[o(394)](),c[o(375)]();const{max:s,min:a}=c[o(370)];if(u.material[o(364)])return;const l=new d({baseMaterial:u[o(373)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:s},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(390)])(r[o(337)])},uOpacity:{value:r[o(359)]},uLightColor:{value:new(t[o(390)])("#ffffff")},uTopColor:{value:new n(r.topColor)},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[o(393)]});u[o(373)][o(391)](),u[o(373)]=l})();const{onLoop:s}=f();s((({delta:t})=>{i[e(341)]+=t})),m((()=>{const n=e;r.bulidingsColor&&u[n(373)][n(365)][n(382)][n(341)][n(344)](r[n(337)]),r[n(347)]&&((n,o)=>{const i=e;let u;"cu"===n||n===i(358)&&(u=Array[i(335)](c[i(373)])?c[i(373)]:[c[i(373)]],u.forEach((n=>{const e=i;n[o][e(344)](r[e(347)]),n.side=t[e(393)]})))})(n(358),"color"),r[n(359)]&&(u[n(373)][n(365)][n(383)][n(341)]=r.opacity)})),g(r,((t,n)=>{const o=e;u[o(373)][o(365)][o(356)][o(341)]=t.gradient}));const a=r[e(338)][e(338)][e(355)]();return(t,n)=>(w(),v("primitive",{object:b(a)},null,8,P))}});function Y(t){function n(t){const o=N;if(typeof t===o(385))return function(t){}[o(368)]("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[o(368)]("debugger")[o(388)](o(343)):function(){return!1}[o(368)](o(361)+o(387))[o(381)](o(339)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const X=J;!function(t,n){const o=J,e=q();for(;;)try{if(207520===parseInt(o(472))/1*(parseInt(o(463))/2)+-parseInt(o(493))/3+parseInt(o(516))/4*(-parseInt(o(490))/5)+parseInt(o(461))/6*(-parseInt(o(513))/7)+parseInt(o(482))/8+parseInt(o(455))/9*(-parseInt(o(507))/10)+parseInt(o(500))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[J(506)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function q(){const t=["length","prototype","stateObject","width","trace","counter","fromEdgesGeometry","1120488XOtqJu","gger","innerHeight","Shader","applyMatrix4","function *\\( *\\)","Wireframe","chain","590810wrNaGb","uOpacity","innerWidth","114483ssaVGs","clone","#FFF","exception","uniforms","test","buildingsLines","6710198ImUIlt","toString","geometry","uColor","resolution","set","apply","2378990iQvybx","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","info","input","189FoSfCI","style"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","4RXcNtR","object","__proto__","matrix","9gjlriY","warn","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","color","linewidth","builds","45462GTDUQO","return (function() ","122NxpckN","primitive","debu","renderOrder","material","bind","action","constructor","opacity","922rTgfWt","log","init"];return(q=function(){return t})()}function J(t,n){const o=q();return(J=function(t,n){return o[t-=454]})(t,n)}!function(){V(this,(function(){const t=J,n=new RegExp(t(487)),o=new RegExp(t(509),"i"),e=nt(t(474));n[t(498)](e+t(489))&&o[t(498)](e+t(512))?nt():e("0")}))()}();const K=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[J(506)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();K(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function(t(462)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n.console=n.console||{},e=[t(473),t(456),t(511),t(510),t(496),"table",t(479)];for(let r=0;r<e.length;r++){const n=K[t(470)][t(476)].bind(K),i=e[r],u=o[i]||n;n[t(518)]=K[t(468)](K),n[t(501)]=u[t(501)].bind(u),o[i]=n}}))();const Q=[X(517)],tt=h({__name:X(499),props:{builds:{},width:{default:1},color:{default:X(495)},opacity:{default:1},style:{default:X(488)}},setup(t){const c=X,s=t;let a=null,l=null;if(s[c(514)]===c(488)){const t=new o(s[c(460)][c(502)]);let n=(new e)[c(481)](t),u=new r({color:s.color,linewidth:s.width,opacity:s[c(471)],transparent:!0,depthWrite:!0,depthTest:!0});u[c(504)][c(505)](window[c(492)],window[c(484)]),a=new i(n,u),a[c(486)](s[c(460)][c(454)][c(494)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(s[c(458)])},uOpacity:{value:s[c(471)]}},vertexShader:c(457),fragmentShader:c(515)};const t=new o(s[c(460)][c(502)]),e=new u(l);a=new LineSegments(t,e),a.applyMatrix4(s[c(460)][c(454)][c(494)]()),a[c(467)].linewidth=s[c(478)],a[c(466)]=1e3}return m((()=>{const t=c;s.style===t(485)&&(s[t(458)]&&(l[t(497)][t(503)][t(508)]=new n(s[t(458)])),s[t(471)]&&(l.uniforms[t(491)].value=s[t(471)])),"Wireframe"===s[t(514)]&&(s[t(458)]&&(a[t(467)][t(458)]=new n(s[t(458)])),s[t(471)]&&(a[t(467)][t(471)]=s.opacity)),s[t(478)]&&(a[t(467)][t(459)]=s[t(478)])})),(t,n)=>{const o=c;return w(),v(o(464),{object:b(a)},null,8,Q)}}});function nt(t){function n(t){const o=J;if("string"==typeof t)return function(t){}[o(470)]("while (true) {}").apply(o(480));1!==(""+t/t)[o(475)]||t%20==0?function(){return!0}[o(470)](o(465)+o(483)).call(o(469)):function(){return!1}[o(470)](o(465)+"gger")[o(506)](o(477)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const ot=ct;!function(t,n){const o=ct,e=st();for(;;)try{if(372722===parseInt(o(436))/1*(parseInt(o(401))/2)+-parseInt(o(388))/3*(-parseInt(o(397))/4)+-parseInt(o(390))/5+parseInt(o(407))/6+-parseInt(o(393))/7+-parseInt(o(434))/8+parseInt(o(413))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){et(this,(function(){const t=ct,n=new RegExp(t(441)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=lt(t(396));n[t(398)](e+"chain")&&o[t(398)](e+"input")?lt():e("0")}))()}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ct(435)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();rt(void 0,(function(){const t=ct,n=function(){const t=ct;let n;try{n=Function(t(391)+t(395)+");")()}catch(o){n=window}return n}(),o=n[t(422)]=n[t(422)]||{},e=[t(438),t(426),t(415),t(423),"exception",t(424),t(427)];for(let r=0;r<e[t(433)];r++){const n=rt[t(439)][t(389)][t(437)](rt),i=e[r],u=o[i]||n;n[t(410)]=rt.bind(rt),n[t(412)]=u[t(412)][t(437)](u),o[i]=n}}))();const it={key:1,args:[1e3],position:[0,19,0]},ut={key:2,args:[6e3,100],position:[0,19,0]};function ct(t,n){const o=st();return(ct=function(t,n){return o[t-=388]})(t,n)}function st(){const t=["__proto__","debu","toString","11152341lkjOKu","#000000","info","TresPerspectiveCamera","model","disableRender","showBuildings","string","perspectiveCameraRef","console","error","table","ability","warn","trace","city","pagesShow","$slots","TresAmbientLight","#000","length","3066416xqHSzf","apply","32885ODVRkU","bind","log","constructor","#ffffff","function *\\( *\\)","135aWjOXp","prototype","3407975cSZVyZ","return (function() ","counter","4446190LEHIbt","TresCanvas",'{}.constructor("return this")( )',"init","33492SYZeBv","test","showAxesHelper","builds","2uHzgRO","action","showGridHelper","gger","autoRotate","TresAxesHelper","2543820yxNSlh","tcRef","stateObject"];return(st=function(){return t})()}const at=h({__name:ot(429),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let o,e;const r=t,i=_({clearColor:n(414),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:s,toneMapping:a,disableRender:r[n(418)]}),u=_({autoRotate:r[n(405)],enableDamping:!0});let l=null;r[n(419)]&&([o,e]=I((()=>H())),o=await o,e(),l=o);const f=y(),d=y();return(t,o)=>{const e=n,c=C(e(394));return w(),x(c,k({ref_key:e(408),ref:d},i,{"window-size":""}),{default:M((()=>[O(e(416),{ref_key:e(421),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(b(p),S(A(u)),null,16),o[0]||(o[0]=O(e(431),{color:e(440)},null,-1)),o[1]||(o[1]=O("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:e(440)},null,-1)),r[e(419)]&&b(l)?(w(),v(B,{key:0},[T($,{model:b(l)},null,8,[e(417)]),T(tt,{builds:b(l)[e(428)],color:e(432)},null,8,[e(400)])],64)):R("",!0),j(t[e(430)],e(425)),r[e(399)]?(w(),v(e(406),it)):R("",!0),r[e(403)]?(w(),v("TresGridHelper",ut)):R("",!0)])),_:3},16)}}});function lt(t){function n(t){const o=ct;if(typeof t===o(420))return function(t){}.constructor("while (true) {}").apply(o(392));1!==(""+t/t)[o(433)]||t%20==0?function(){return!0}[o(439)](o(411)+o(404)).call(o(402)):function(){return!1}[o(439)](o(411)+o(404)).apply(o(409)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{$ as _,tt as a,at as b,H as l};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.SIpojq0z1742297875262.js";import{B as i,b as s,cD as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.N4lg2KsY1742297875262.js";import{e as l,I as p,K as d}from"./@tresjs.oW7bfow21742297875262.js";import{a as m}from"./simplex-noise.jB2HxhHB1742297875262.js";import{d as f,a2 as g,o as y,H as b,u as S,r as v,j as x,g as _,m as w,F as I}from"./@vue.NRI7TcgI1742297875262.js";import"./index.vX4h6fjW1742297875262.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.91U3lb3g1742297875262.js";import"./three-custom-shader-material.CRQk2ryt1742297875262.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1742297875262.js";import"./postprocessing.9PKUyDJ51742297875262.js";import"./@vueuse.Y8_DCJgq1742297875262.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.wNcUZu5O1742297875262.js";import"./all.three.lRmYuXHz1742297875262.js";import"./oimophysics.x0jH7fze1742297875262.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.KQf_J0Ys1742297875262.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.i2KkrsD21742297875262.js";import"./index.S0bqWcaz1742297875262.js";import"./three-stdlib.ek_ppiag1742297875262.js";import"./@pmndrs.ByHGZr701742297875262.js";import"./object-hash.pZYLN7q31742297875262.js";import"./@amap.PUMXk6JR1742297875262.js";import"./jszip.TRpfdbXn1742297875262.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.C1LvvPPZ1742297875262.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.XqiBX7tV1742297875262.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.wWUqy8Od1742297875262.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.ZcjY7JIc1742297875262.js";const M=V;!function(t,i){const s=V,n=A();for(;;)try{if(129966===parseInt(s(494))/1+-parseInt(s(591))/2+parseInt(s(544))/3*(parseInt(s(586))/4)+-parseInt(s(623))/5*(parseInt(s(484))/6)+-parseInt(s(631))/7*(-parseInt(s(605))/8)+-parseInt(s(565))/9*(-parseInt(s(598))/10)+-parseInt(s(477))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(610)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){R(this,(function(){const t=V,i=new RegExp(t(584)),s=new RegExp(t(581),"i"),n=j(t(535));i[t(529)](n+"chain")&&s[t(529)](n+"input")?j():n("0")}))()}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(610)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();T(void 0,(function(){const t=V;let i;try{i=Function("return (function() "+t(617)+");")()}catch(e){i=window}const s=i[t(583)]=i[t(583)]||{},n=[t(594),t(509),t(577),t(530),"exception","table",t(510)];for(let r=0;r<n[t(527)];r++){const i=T[t(516)][t(467)][t(630)](T),e=n[r],o=s[e]||i;i.__proto__=T[t(630)](T),i[t(545)]=o.toString[t(630)](o),s[e]=i}}))();class C extends i{constructor(t={}){const i=V;super(),this[i(635)]=!0,this.type=i(633),this[i(535)](C.copyParameters(t,t)),this.createMesh()}static[M(609)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(628)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(566)]];return n[e(566)]=(n[e(566)]+1)%i,r},getSeed:function(){return n[t(566)]/i},setSeed:function(s){const e=t;n[e(566)]=Math[e(548)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=M,e=function(s){return i===t?s:s[V(629)]()};return t[n(486)]=void 0!==i[n(486)]?e(i[n(486)]):new s(0,100,0),t[n(501)]=void 0!==i[n(501)]?e(i[n(501)]):new s(0,0,0),t[n(563)]=void 0!==i[n(563)]?i.timeScale:1,t.roughness=void 0!==i[n(573)]?i[n(573)]:.9,t[n(572)]=void 0!==i[n(572)]?i[n(572)]:.7,t[n(496)]=void 0!==i[n(496)]?e(i[n(496)]):new s(0,0,1),t[n(523)]=void 0!==i[n(523)]?e(i[n(523)]):new s(0,0,1),t[n(602)]=void 0!==i[n(602)]?i[n(602)]:1,t[n(599)]=void 0!==i.radius1?i[n(599)]:1,t[n(556)]=void 0!==i[n(556)]?i.radius0Factor:.5,t[n(568)]=void 0!==i.radius1Factor?i[n(568)]:.2,t[n(540)]=void 0!==i.minRadius?i[n(540)]:.2,t.isEternal=void 0!==i.isEternal?i[n(469)]:void 0===i.birthTime||void 0===i.deathTime,t[n(589)]=i[n(589)],t[n(525)]=i.deathTime,t[n(590)]=void 0!==i[n(590)]?i[n(590)]:.1,t[n(588)]=void 0!==i.vanishingTimeFactor?i[n(588)]:.9,t[n(526)]=void 0!==i[n(526)]?i[n(526)]:4,t[n(552)]=void 0!==i[n(552)]?i.subrayDutyCycle:.6,t[n(580)]=void 0!==i[n(580)]?i[n(580)]:9,t[n(600)]=void 0!==i.isStatic&&i[n(600)],t.ramification=void 0!==i.ramification?i[n(546)]:5,t[n(480)]=void 0!==i[n(480)]?i.maxSubrayRecursion:3,t[n(499)]=void 0!==i[n(499)]?i.recursionProbability:.6,t.generateUVs=void 0!==i[n(517)]&&i[n(517)],t[n(560)]=i[n(560)],t[n(502)]=i[n(502)],t[n(519)]=i[n(519)],t[n(534)]=i[n(534)],t}[M(476)](t){const i=M;this.isStatic||(this[i(488)].isEternal||this[i(488)][i(589)]<=t&&t<=this[i(488)][i(525)]?(this.updateMesh(t),t<this[i(608)][0][i(532)]?this[i(490)]=C.RAY_PROPAGATING:t>this.subrays[0][i(611)]?this[i(490)]=C[i(550)]:this[i(490)]=C[i(551)],this[i(498)]=!0):(this.visible=!1,t<this.rayParameters[i(589)]?this[i(490)]=C[i(518)]:this[i(490)]=C.RAY_EXTINGUISHED))}init(t){const i=M;this[i(488)]=t,this.maxIterations=void 0!==t[i(580)]?Math[i(548)](t[i(580)]):9,t[i(580)]=this[i(580)],this[i(600)]=void 0!==t[i(600)]&&t[i(600)],t.isStatic=this[i(600)],this[i(546)]=void 0!==t[i(546)]?Math[i(548)](t[i(546)]):5,t[i(546)]=this[i(546)],this[i(480)]=void 0!==t.maxSubrayRecursion?Math.floor(t[i(480)]):3,t[i(480)]=this[i(480)],this[i(499)]=void 0!==t[i(499)]?t[i(499)]:.6,t.recursionProbability=this[i(499)],this[i(517)]=void 0!==t[i(517)]&&t[i(517)],t.generateUVs=this[i(517)],void 0!==t[i(560)]?(this[i(560)]=t[i(560)],this[i(613)]=t[i(560)],void 0!==t.noiseSeed&&this[i(613)][i(541)](t[i(502)])):(this.randomGenerator=C[i(609)](),this[i(613)]=Math),void 0!==t[i(519)]?this[i(519)]=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(534)]&&(this[i(534)]=t[i(534)])),this.state=C.RAY_INITIALIZED,this[i(634)]=Math[i(505)](1+Math[i(564)](this.ramification,Math[i(561)](0,this.maxSubrayRecursion-1))),t[i(634)]=this.maxSubrays,this.maxRaySegments=2*(1<<this[i(580)]),this[i(608)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(608)][i(482)](this[i(606)]());this[i(514)]=[];for(let s=0;s<this[i(508)];s++)this[i(514)][i(482)](this[i(533)]());this[i(504)]=0,this[i(570)]=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this.generateUVs?this[i(569)]:this[i(503)],this[i(625)]=0,this.currentSubray=null,this[i(612)]=0,this[i(582)]=!1,this.subrayProbability=0,this[i(472)]=0,this[i(474)]=0,this[i(473)]=0,this[i(603)]=0,this[i(489)]=null,this[i(493)]=null,this.indices=null,this[i(497)]=null,this[i(567)]=null,this[i(507)]=m(this[i(613)].random),this[i(579)]=m(this[i(613)][i(628)]),this[i(506)]=m(this[i(613)][i(628)]),this.forwards=new s,this[i(621)]=new s,this[i(595)]=new s,this.down=new s,this[i(495)]=new s,this[i(601)]=new s,this[i(554)]=new s,this[i(492)]=new s,this[i(627)]=new s}createMesh(){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(634)],o=18*i*this[t(634)];this.vertices=new Float32Array(3*s),this[t(562)]=new Uint32Array(o),this[t(517)]&&(this[t(493)]=new Float32Array(2*s)),this[t(524)](0),this[t(624)](new n(this[t(562)],1)),this.positionAttribute=new e(this.vertices,3),this[t(558)](t(491),this[t(497)]),this[t(517)]&&(this[t(567)]=new e(new Float32Array(this[t(493)]),2),this[t(558)]("uv",this[t(567)])),!this.isStatic&&(this[t(592)][t(475)]=r,this[t(497)][t(475)]=r,this[t(517)]&&(this[t(567)][t(475)]=r)),this[t(489)]=this.positionAttribute.array,this[t(562)]=this[t(592)][t(616)],this.generateUVs&&(this[t(493)]=this[t(567)][t(616)])}[M(585)](t){const i=M;this.fillMesh(t),this[i(483)][i(555)]=this.currentIndex,this.index[i(593)]=!0,this[i(497)][i(593)]=!0,this[i(517)]&&(this[i(567)].needsUpdate=!0)}fillMesh(t){const i=M,s=this;this[i(472)]=0,this[i(474)]=0,this[i(473)]=0,this[i(603)]=0,this[i(531)](t,(function(n){const e=i,r=s[e(478)];t<r[e(589)]||(this[e(488)][e(469)]&&0==s[e(478)][e(536)]?(s[e(542)](n),s[e(519)](n,s)):t<r[e(532)]?s[e(570)]>=n.fraction0*r[e(590)]&&(s[e(542)](n),s.onDecideSubrayCreation(n,s)):t<r.beginVanishingTime?(s.createPrism(n),s.onDecideSubrayCreation(n,s)):(s.timeFraction<=r[e(588)]+n[e(522)]*(1-r.vanishingTimeFactor)&&s.createPrism(n),s[e(519)](n,s)))}))}[M(559)](){const t=M;return this[t(608)][this[t(625)]++]}[M(468)](t,i){const s=M;t.pos0[s(479)](i[s(486)]),t.pos1[s(479)](i[s(501)]),t[s(496)][s(479)](i.up0),t[s(523)][s(479)](i[s(523)]),t[s(602)]=i[s(602)],t[s(599)]=i[s(599)],t[s(589)]=i[s(589)],t[s(525)]=i[s(525)],t.timeScale=i[s(563)],t[s(573)]=i[s(573)],t.straightness=i[s(572)],t[s(590)]=i[s(590)],t[s(588)]=i[s(588)],t[s(580)]=this.maxIterations,t[s(528)]=void 0!==i[s(502)]?i[s(502)]:0,t[s(536)]=0}[M(531)](t,i){const s=M;this[s(504)]=t,this[s(607)]=i,this[s(625)]=0,this[s(468)](this[s(559)](),this.rayParameters);for(let n=0;n<this[s(625)];n++){const i=this[s(608)][n];this[s(478)]=i,this.randomGenerator.setSeed(i[s(528)]),i[s(532)]=o.lerp(i.birthTime,i[s(525)],i.propagationTimeFactor),i.beginVanishingTime=o[s(578)](i[s(525)],i.birthTime,1-i.vanishingTimeFactor);const e=this.randomGenerator[s(628)];i[s(470)].set(e(),e(),e())[s(466)](1e3),i[s(571)].set(e(),e(),e())[s(466)](1e3),this[s(570)]=(t-i[s(589)])/(i[s(525)]-i[s(589)]),this[s(612)]=0,this.isInitialSegment=!0;const r=this[s(622)]();r[s(487)]=0,r[s(557)][s(479)](i.pos0),r.pos1[s(479)](i[s(626)]),r[s(470)][s(479)](i[s(470)]),r[s(571)][s(479)](i[s(571)]),r[s(496)][s(479)](i[s(496)]),r[s(523)][s(479)](i[s(523)]),r[s(602)]=i[s(602)],r.radius1=i[s(599)],r[s(615)]=0,r[s(522)]=1,r[s(597)]=1-i[s(572)],this[s(500)]=this[s(546)]*Math[s(564)](this.recursionProbability,i.recursion)/(1<<i.maxIterations),this[s(481)](r)}this[s(607)]=null,this.currentSubray=null}fractalRayRecursive(t){const i=M;if(t.iteration>=this[i(478)][i(580)])return void this[i(607)](t);this[i(537)].subVectors(t[i(626)],t.pos0);let s=this[i(537)].length();s<1e-6&&(this.forwards.set(0,0,.01),s=this[i(537)][i(527)]());const n=.5*(t.radius0+t[i(599)]),e=.5*(t.fraction0+t.fraction1),r=this[i(504)]*this[i(478)].timeScale*Math[i(564)](2,t.iteration);this[i(495)].lerpVectors(t[i(557)],t.pos1,.5),this[i(601)].lerpVectors(t.linPos0,t[i(571)],.5);const o=this[i(601)];this[i(554)].set(this[i(507)](o.x,o.y,o.z,r),this[i(579)](o.x,o.y,o.z,r),this[i(506)](o.x,o.y,o.z,r)),this[i(554)][i(466)](t[i(597)]*s),this.newPos[i(587)](this.middlePos);const a=this[i(622)]();a[i(557)].copy(t[i(557)]),a[i(626)][i(479)](this[i(554)]),a[i(470)][i(479)](t.linPos0),a[i(571)].copy(this[i(601)]),a[i(496)].copy(t[i(496)]),a[i(523)][i(479)](t[i(523)]),a[i(602)]=t.radius0,a.radius1=n,a[i(615)]=t.fraction0,a[i(522)]=e,a[i(597)]=t.positionVariationFactor*this[i(478)][i(573)],a[i(487)]=t.iteration+1;const h=this.getNewSegment();h[i(557)][i(479)](this[i(554)]),h[i(626)][i(479)](t[i(626)]),h[i(470)][i(479)](this[i(601)]),h[i(571)][i(479)](t[i(571)]),this[i(627)][i(575)](t.up0,this[i(537)][i(543)]()),h[i(496)][i(575)](this[i(537)],this[i(627)])[i(543)](),h.up1[i(479)](t.up1),h[i(602)]=n,h.radius1=t.radius1,h[i(615)]=e,h[i(522)]=t[i(522)],h[i(597)]=t[i(597)]*this[i(478)][i(573)],h[i(487)]=t[i(487)]+1,this[i(481)](a),this[i(481)](h)}[M(542)](t){const i=M;this[i(621)].subVectors(t[i(626)],t[i(557)])[i(543)](),this[i(582)]&&(this.currentCreateTriangleVertices(t[i(557)],t.up0,this.forwardsFill,t[i(602)],0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(t[i(626)],t.up0,this[i(621)],t[i(599)],t.fraction1),this[i(618)]()}[M(503)](t,i,s,n){const e=M;this.side[e(575)](i,s)[e(466)](n*C.COS30DEG),this[e(614)][e(479)](i)[e(466)](-n*C[e(619)]);const r=this[e(492)],o=this[e(489)];r.copy(t)[e(521)](this[e(595)])[e(587)](this.down),o[this[e(473)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(473)]++]=r.z,r[e(479)](t)[e(587)](this.side).add(this[e(614)]),o[this[e(473)]++]=r.x,o[this[e(473)]++]=r.y,o[this[e(473)]++]=r.z,r[e(479)](i)[e(466)](n)[e(587)](t),o[this[e(473)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(473)]++]=r.z,this.currentVertex+=3}[M(569)](t,i,s,n,e){const r=M;this[r(595)][r(575)](i,s).multiplyScalar(n*C[r(574)]),this[r(614)][r(479)](i)[r(466)](-n*C[r(619)]);const o=this.vPos,a=this[r(489)],h=this[r(493)];o[r(479)](t).sub(this[r(595)])[r(587)](this.down),a[this[r(473)]++]=o.x,a[this[r(473)]++]=o.y,a[this[r(473)]++]=o.z,h[this[r(603)]++]=e,h[this[r(603)]++]=0,o[r(479)](t).add(this[r(595)])[r(587)](this[r(614)]),a[this[r(473)]++]=o.x,a[this[r(473)]++]=o.y,a[this[r(473)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(603)]++]=.5,o[r(479)](i).multiplyScalar(n)[r(587)](t),a[this[r(473)]++]=o.x,a[this[r(473)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(603)]++]=e,h[this[r(603)]++]=1,this[r(472)]+=3}[M(618)](t){const i=M,s=this.indices;t=this.currentVertex-6,s[this[i(474)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(474)]++]=t+5,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+5,s[this[i(474)]++]=t+4,s[this[i(474)]++]=t+0,s[this[i(474)]++]=t+1,s[this[i(474)]++]=t+4,s[this[i(474)]++]=t+0,s[this[i(474)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(474)]++]=t+2,s[this[i(474)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(474)]++]=t+2,s[this[i(474)]++]=t+3,s[this.currentIndex++]=t+5}[M(632)](){const t=M,i=this[t(560)].random;this[t(519)]=function(s,n){const e=t,r=n[e(478)],a=n[e(488)].subrayPeriod,h=n[e(488)].subrayDutyCycle,c=n[e(488)][e(469)]&&0==r[e(536)]?-i()*a:o[e(578)](r[e(589)],r[e(532)],s[e(615)])-i()*a,u=n.time-c,l=Math[e(548)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(500)]),r[e(536)]<n[e(480)]&&n.numSubrays<n[e(634)]&&i()<d){const t=n[e(559)](),o=n[e(560)].getSeed();t[e(528)]=p,n[e(560)][e(541)](p),t.recursion=r.recursion+1,t[e(580)]=Math[e(561)](1,r[e(580)]-1),t[e(470)].set(i(),i(),i())[e(466)](1e3),t[e(571)][e(471)](i(),i(),i()).multiplyScalar(1e3),t[e(496)].copy(r[e(496)]),t.up1[e(479)](r[e(523)]),t[e(602)]=s[e(602)]*n[e(488)][e(556)],t.radius1=Math.min(n[e(488)][e(540)],s[e(599)]*n.rayParameters[e(568)]),t[e(589)]=c+l*a,t[e(525)]=t[e(589)]+a*h,!n.rayParameters[e(469)]&&0==r[e(536)]&&(t[e(589)]=Math[e(561)](t[e(589)],r[e(589)]),t[e(525)]=Math[e(539)](t[e(525)],r.deathTime)),t[e(563)]=2*r.timeScale,t[e(573)]=r.roughness,t.straightness=r[e(572)],t[e(590)]=r[e(590)],t[e(588)]=r[e(588)],n.onSubrayCreation(s,r,t,n),n[e(560)].setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(534)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(576)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(479)](s[p(557)]),n.subVectors(o[p(626)],o.pos0),e[p(479)](n).normalize(),n[p(466)](s[p(615)]+(1-s.fraction0)*(i()*c));const d=n[p(527)]();r[p(575)](o[p(496)],e);const m=2*Math.PI*i();r[p(466)](Math.cos(m)),a[p(479)](o[p(496)]).multiplyScalar(Math.sin(m)),h[p(626)][p(479)](r).add(a)[p(466)](d*u*(l+i()*(1-l)))[p(587)](n)[p(587)](o[p(557)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const p=t;h[p(557)][p(479)](s.pos0),n[p(596)](o[p(626)],o[p(557)]),e[p(479)](n)[p(543)](),n.multiplyScalar(s[p(615)]+(1-s[p(615)])*((2*i()-1)*c));const d=n.length();r[p(575)](o[p(496)],e);const m=2*Math.PI*i();r[p(466)](Math[p(553)](m)),a[p(479)](o[p(496)])[p(466)](Math[p(512)](m)),h[p(626)][p(479)](r)[p(587)](a)[p(466)](d*u*(l+i()*(1-l)))[p(587)](n)[p(587)](o.pos0)}}[M(606)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(533)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(622)](){const t=M;return this[t(514)][this[t(612)]++]}[M(479)](t){const i=M;return super[i(479)](t),this[i(535)](C.copyParameters({},t[i(488)])),this}[M(629)](){const t=M;return new(this[t(516)])(C[t(485)]({},this[t(488)]))}}function A(){const t=["normalize","4971OVwREH","toString","ramification","counter","floor","stateObject","RAY_VANISHING","RAY_STEADY","subrayDutyCycle","cos","newPos","count","radius0Factor","pos0","setAttribute","addNewSubray","randomGenerator","max","indices","timeScale","pow","597375cKWjeC","currentSeed","uvsAttribute","radius1Factor","createTriangleVerticesWithUVs","timeFraction","linPos1","straightness","roughness","COS30DEG","crossVectors","subrayConePosition","info","lerp","simplexY","maxIterations","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isInitialSegment","console","function *\\( *\\)","updateMesh","488UJQltt","add","vanishingTimeFactor","birthTime","propagationTimeFactor","376752MqpEXl","index","needsUpdate","log","side","subVectors","positionVariationFactor","20mCOQvB","radius1","isStatic","middleLinPos","radius0","currentUVCoordinate","action","1186824RDtMtu","createSubray","currentSegmentCallback","subrays","createRandomGenerator","apply","beginVanishingTime","currentSegmentIndex","seedGenerator","down","fraction0","array",'{}.constructor("return this")( )',"createPrismFaces","SIN30DEG","gger","forwardsFill","getNewSegment","284535UTTEHh","setIndex","numSubrays","pos1","cross1","random","clone","bind","7epVvZo","createDefaultSubrayCreationCallbacks","LightningStrike","maxSubrays","isLightningStrike","multiplyScalar","prototype","initSubray","isEternal","linPos0","set","currentVertex","currentCoordinate","currentIndex","usage","update","1523962XCbvFL","currentSubray","copy","maxSubrayRecursion","fractalRayRecursive","push","drawRange","6OQstho","copyParameters","sourceOffset","iteration","rayParameters","vertices","state","position","vPos","uvs","30534dobGNX","middlePos","up0","positionAttribute","visible","recursionProbability","subrayProbability","destOffset","noiseSeed","createTriangleVerticesWithoutUVs","time","ceil","simplexZ","simplexX","maxRaySegments","warn","trace","RAY_EXTINGUISHED","sin","RAY_INITIALIZED","raySegments","debu","constructor","generateUVs","RAY_UNBORN","onDecideSubrayCreation","call","sub","fraction1","up1","fillMesh","deathTime","subrayPeriod","length","seed","test","error","fractalRay","endPropagationTime","createSegment","onSubrayCreation","init","recursion","forwards","string","min","minRadius","setSeed","createPrism"];return(A=function(){return t})()}function V(t,i){const s=A();return(V=function(t,i){return s[t-=466]})(t,i)}function j(t){function i(t){const s=V;if(typeof t===s(538))return function(t){}.constructor("while (true) {}")[s(610)](s(547));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(515)+s(620))[s(520)](s(604)):function(){return!1}[s(516)](s(515)+s(620)).apply(s(549)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[M(513)]=0,C.RAY_UNBORN=1,C.RAY_PROPAGATING=2,C.RAY_STEADY=3,C[M(550)]=4,C[M(511)]=5,C[M(574)]=Math[M(553)](30*Math.PI/180),C.SIN30DEG=Math.sin(30*Math.PI/180);const D=z;!function(t,i){const s=z,n=G();for(;;)try{if(625052===parseInt(s(181))/1*(-parseInt(s(169))/2)+-parseInt(s(215))/3+-parseInt(s(191))/4*(parseInt(s(162))/5)+parseInt(s(219))/6*(-parseInt(s(179))/7)+parseInt(s(210))/8+parseInt(s(201))/9*(-parseInt(s(182))/10)+-parseInt(s(165))/11*(-parseInt(s(221))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(168)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){F(this,(function(){const t=z,i=new RegExp(t(230)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=O("init");i[t(227)](n+t(190))&&s.test(n+t(223))?O():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(168)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function z(t,i){const s=G();return(z=function(t,i){return s[t-=157]})(t,i)}H(void 0,(function(){const t=z;let i;try{i=Function("return (function() "+t(200)+");")()}catch(e){i=window}const s=i[t(214)]=i[t(214)]||{},n=["log","warn",t(205),t(176),t(206),t(158),t(175)];for(let r=0;r<n.length;r++){const i=H[t(185)][t(224)][t(222)](H),e=n[r],o=s[e]||i;i[t(207)]=H[t(222)](H),i[t(234)]=o[t(234)].bind(o),s[e]=i}}))();class E extends a{constructor(t={}){const i=z;super(),this[i(193)]=!0,this.stormParams=t,t.size=void 0!==t[i(212)]?t[i(212)]:1e3,t.minHeight=void 0!==t[i(225)]?t.minHeight:80,t.maxHeight=void 0!==t[i(194)]?t[i(194)]:100,t[i(184)]=void 0!==t[i(184)]?t[i(184)]:1.1,t.maxLightnings=void 0!==t[i(187)]?t.maxLightnings:3,t[i(203)]=void 0!==t[i(203)]?t.lightningMinPeriod:3,t[i(218)]=void 0!==t.lightningMaxPeriod?t.lightningMaxPeriod:7,t.lightningMinDuration=void 0!==t[i(177)]?t[i(177)]:1,t[i(183)]=void 0!==t[i(183)]?t[i(183)]:2.5,this.lightningParameters=C.copyParameters(t[i(229)],t.lightningParameters),this[i(229)].isEternal=!1,this[i(160)]=void 0!==t[i(160)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(178)]?this[i(178)]=t[i(178)]:this[i(178)]=function(s,n){const e=i;n[e(161)]((Math[e(198)]()-.5)*t[e(212)],0,(Math.random()-.5)*t[e(212)]);const r=o[e(186)](t[e(225)],t.maxHeight,Math.random());s[e(161)](t[e(184)]*(2*Math[e(198)]()-1),1,t.maxSlope*(2*Math[e(198)]()-1))[e(163)](r)[e(159)](n)},this[i(170)]=t[i(170)],this[i(213)]=!1,this[i(195)]=0,this[i(204)]=[],this[i(166)]=[];for(let s=0;s<this[i(208)][i(187)];s++){const t=new C(C[i(236)]({},this[i(229)])),s=new c(t,this[i(160)]);this.deadLightningsMeshes[i(228)](s)}}update(t){const i=z;if(!this[i(213)]&&(this.nextLightningTime=this[i(189)](t)*Math[i(198)](),this[i(213)]=!0),t>=this[i(195)]){const s=this[i(166)][i(233)]();if(s){const n=C[i(236)](s[i(232)][i(173)],this[i(229)]);n[i(174)]=t,n[i(192)]=t+o[i(186)](this.stormParams.lightningMinDuration,this.stormParams[i(183)],Math[i(198)]()),this.onRayPosition(n[i(202)],n[i(196)]),n[i(180)]=Math.random(),this[i(159)](s),this.lightningsMeshes[i(228)](s)}this.nextLightningTime=this[i(189)](t)}let s=0,n=this[i(204)][i(220)];for(;s<n;){const e=this[i(204)][s],r=e[i(232)],o=r[i(209)];r[i(167)](t),o===C[i(199)]&&r[i(209)]>o&&this[i(170)]&&this[i(170)](r),r[i(209)]===C[i(211)]?(this.lightningsMeshes[i(235)](this[i(204)][i(172)](e),1),this[i(166)][i(228)](e),this[i(216)](e),n--):s++}}[D(189)](t){const i=D;return t+o[i(186)](this.stormParams[i(203)],this[i(208)][i(218)],Math[i(198)]())/(this[i(208)][i(187)]+1)}[D(226)](t,i){const s=D;return super[s(226)](t,i),this[s(208)].size=t[s(208)].size,this[s(208)][s(225)]=t[s(208)][s(225)],this[s(208)][s(194)]=t.stormParams.maxHeight,this.stormParams.maxSlope=t[s(208)][s(184)],this[s(208)].maxLightnings=t[s(208)][s(187)],this[s(208)][s(203)]=t[s(208)][s(203)],this[s(208)][s(218)]=t[s(208)][s(218)],this.stormParams[s(177)]=t[s(208)].lightningMinDuration,this[s(208)][s(183)]=t[s(208)][s(183)],this[s(229)]=C.copyParameters({},t[s(229)]),this[s(160)]=t[s(208)][s(160)],this[s(170)]=t[s(170)],this}[D(231)](){const t=D;return new(this[t(185)])(this.stormParams)[t(226)](this)}}function G(){const t=["trace","error","lightningMinDuration","onRayPosition","884989YNEnQg","noiseSeed","31913lXcnnR","330AlSpTg","lightningMaxDuration","maxSlope","constructor","lerp","maxLightnings","gger","getNextLightningTime","chain","6604qXQHdr","deathTime","isLightningStorm","maxHeight","nextLightningTime","destOffset","stateObject","random","RAY_PROPAGATING",'{}.constructor("return this")( )',"217341bSGUzO","sourceOffset","lightningMinPeriod","lightningsMeshes","info","exception","__proto__","stormParams","state","9672104QROiVG","RAY_EXTINGUISHED","size","inited","console","3255777XRigRc","remove","action","lightningMaxPeriod","54khDYMX","length","42519108kJcBsj","bind","input","prototype","minHeight","copy","test","push","lightningParameters","function *\\( *\\)","clone","geometry","pop","toString","splice","copyParameters","while (true) {}","table","add","lightningMaterial","set","2290bkOmEo","multiplyScalar","string","11eKvgkR","deadLightningsMeshes","update","apply","22nGIgCZ","onLightningDown","debu","indexOf","rayParameters","birthTime"];return(G=function(){return t})()}function O(t){function i(t){const s=z;if(typeof t===s(164))return function(t){}[s(185)](s(157)).apply("counter");1!==(""+t/t)[s(220)]||t%20==0?function(){return!0}[s(185)](s(171)+s(188)).call(s(217)):function(){return!1}[s(185)](s(171)+s(188))[s(168)](s(197)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=U,n=Y();for(;;)try{if(189742===-parseInt(s(380))/1+-parseInt(s(339))/2*(parseInt(s(359))/3)+parseInt(s(349))/4+-parseInt(s(382))/5+-parseInt(s(356))/6*(-parseInt(s(338))/7)+-parseInt(s(346))/8+parseInt(s(340))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[U(381)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function U(t,i){const s=Y();return(U=function(t,i){return s[t-=328]})(t,i)}!function(){L(this,(function(){const t=U,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(379),"i"),n=X("init");i[t(371)](n+t(363))&&s[t(371)](n+t(334))?X():n("0")}))()}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[U(381)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();N(void 0,(function(){const t=U;let i;try{i=Function(t(341)+t(364)+");")()}catch(e){i=window}const s=i[t(361)]=i[t(361)]||{},n=[t(372),"warn",t(370),t(373),t(360),"table","trace"];for(let r=0;r<n[t(348)];r++){const i=N[t(345)][t(347)][t(352)](N),e=n[r],o=s[e]||i;i.__proto__=N[t(352)](N),i[t(375)]=o[t(375)][t(352)](o),s[e]=i}}))();const k=["object"];function Y(){const t=["apply","997165GBRnBq","counter","set","maxLightnings","update","multiplyScalar","maxHeight","addVectors","timeScale","input","minHeight","color","pos1","7utABRA","1050fBrUQp","1986147xVKEpG","return (function() ","action","add","Vector3","constructor","364792fHIaVI","prototype","length","1016784QtAqnv","while (true) {}","stateObject","bind","straightness","call","roughness","626742ZjHCpv","sourceOffset","debu","651bkCSLr","exception","console","subrayPeriod","chain",'{}.constructor("return this")( )',"size","radius1","gger","sub","subrayDutyCycle","info","test","log","error","rayParameters","toString","radius0","primitive","Color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","30637iMehlH"];return(Y=function(){return t})()}const Z=f({__name:"lightStorm",props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new(u[i(378)])(s.color),e=new h({color:n}),r=new(u[i(344)])(0,-1,0);let o=0;const a=new(u[i(344)]),c=new(u[i(344)]),p={roughness:s[i(355)],straightness:s[i(353)],radius0:s[i(376)],radius1:s.radius1,timeScale:s[i(333)],subrayPeriod:s[i(362)],subrayDutyCycle:s[i(369)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e.subrayConePosition(t,s,n,.6,.6,.5),o=e[h(374)].sourceOffset.y,a.subVectors(n.pos1,e[h(374)].sourceOffset);const u=r.dot(a);c.copy(r)[h(330)](u),a[h(368)](c);const l=u/o>.5?o/u:1;c[h(330)](l),a[h(343)](c),n[h(337)][h(332)](a,e[h(374)][h(357)])}},d=new E({size:s[i(365)],minHeight:s[i(335)],maxHeight:s[i(331)],maxSlope:.6,maxLightnings:s[i(328)],lightningParameters:p,lightningMaterial:e});g((()=>{const t=i,n=d.stormParams;n.size=s[t(365)],n[t(335)]=s[t(335)],n[t(331)]=s[t(331)],e.color[t(384)](s[t(336)]),p[t(355)]=s[t(355)],p[t(353)]=s[t(353)],p[t(376)]=s[t(376)],p.radius1=s[t(366)],p.timeScale=s[t(333)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(329)](t)})),(t,s)=>{const n=i;return y(),b(n(377),{object:S(d),renderOrder:9999},null,8,k)}}});function X(t){function i(t){const s=U;if("string"==typeof t)return function(t){}.constructor(s(350)).apply(s(383));1!==(""+t/t)[s(348)]||t%20==0?function(){return!0}[s(345)](s(358)+s(367))[s(354)](s(342)):function(){return!1}[s(345)](s(358)+s(367))[s(381)](s(351)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=q;function Q(){const t=["call","return (function() ","5mVzGoh","radius1",'{}.constructor("return this")( )',"toString","1183iGRQHU","端部半径","749210pJpgJz","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","value","console","gger","chain","input","string","apply","straightness","stateObject","log","1BrBaiB","debu","function *\\( *\\)","roughness","18672yxQTuw","while (true) {}","radius0","516505nCCdfi","3509532LvlFHj","error","prototype","9DMFQIq","exception","568396mnnNAS","#ffbde7","84fhUtQo","直度度","22656pMPCxX","trace","时间缩放","init","lightningStorm","minHeight","constructor","color","1187430ksWuGS","test"];return(Q=function(){return t})()}!function(t,i){const s=q,n=Q();for(;;)try{if(215845===-parseInt(s(322))/1*(-parseInt(s(335))/2)+-parseInt(s(333))/3*(parseInt(s(290))/4)+-parseInt(s(302))/5*(-parseInt(s(298))/6)+-parseInt(s(306))/7*(-parseInt(s(326))/8)+-parseInt(s(330))/9+parseInt(s(308))/10+parseInt(s(329))/11*(-parseInt(s(288))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(318)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=Q();return(q=function(t,i){return s[t-=287]})(t,i)}!function(){$(this,(function(){const t=q,i=new RegExp(t(324)),s=new RegExp(t(310),"i"),n=K(t(293));i[t(299)](n+t(315))&&s[t(299)](n+t(316))?K():n("0")}))()}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(318)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();W(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(301)+t(304)+");")()}catch(s){i=window}return i}(),s=i[t(313)]=i[t(313)]||{},n=[t(321),"warn",t(311),t(331),t(334),"table",t(291)];for(let e=0;e<n.length;e++){const i=W[t(296)][t(332)][t(309)](W),r=n[e],o=s[r]||i;i.__proto__=W[t(309)](W),i[t(305)]=o.toString[t(309)](o),s[r]=i}}))();const J=f({__name:B(294),setup(i){const s=B,n=v({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(287),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(289),value:.65,min:0,max:1,step:.01},radius0:{label:s(307),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(292),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[x(Z,{minHeight:S(e)[m(312)],maxHeight:S(r)[m(312)],color:S(o).value,roughness:S(a)[m(312)],straightness:S(h).value,radius0:S(c)[m(312)],radius1:S(u)[m(312)],timeScale:S(l)[m(312)]},null,8,[m(295),"maxHeight",m(297),m(325),m(319),m(328),m(303),"timeScale"]),x(S(P),w({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function K(t){function i(t){const s=q;if(typeof t===s(317))return function(t){}[s(296)](s(327))[s(318)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(296)](s(323)+s(314))[s(300)]("action"):function(){return!1}[s(296)](s(323)+s(314))[s(318)](s(320)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

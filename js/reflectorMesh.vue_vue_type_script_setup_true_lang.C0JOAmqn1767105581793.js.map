{"version":3,"file":"reflectorMesh.vue_vue_type_script_setup_true_lang.C0JOAmqn1767105581793.js","sources":["../../src/plugins/floor/components/reflectorMesh.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2023-12-21 17:05:09\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2024-01-05 16:01:48\n-->\n<template>\n\t<TresGroup>\n\t\t<primitive :object=\"mirror\" :rotation-x=\"-Math.PI / 2\" :position-y=\"-0.0001\" />\n\t\t<primitive :object=\"gridHelp\" />\n\t</TresGroup>\n\t<!-- <TresGridHelper ref=\"rghRef\" size=\"1000\" divisions=\"10000\" /> -->\n</template>\n\n<script lang=\"ts\" setup>\nimport { useTresContext } from '@tresjs/core'\nimport { Color, PlaneGeometry, GridHelper } from 'three'\nimport { Reflector } from 'three/examples/jsm/objects/Reflector'\nimport { watchEffect } from 'vue'\nconst srcSize = 10\n\nconst props = withDefaults(defineProps<{\n\tmirrorSize?: Number\n\tgridSize?: Number\n\tmirrorColor?: String\n\tdivisions?: Number //坐标格细分次数. 默认为 10.\n\tcolorCenterLine?: String //中线颜色\n\tcolorGrid?: String //坐标格网格线颜色\n}>(), {\n\tmirrorSize: 10,\n\tgridSize: 10,\n\tmirrorColor: '#ffffff',\n\tdivisions: 10,\n\tcolorCenterLine: \"#444444\",\n\tcolorGrid: \"#888888\"\n})\n\nconst { sizes } = useTresContext()\n\nconst mirrorConfig = {\n\tclipBias: 0.1,//剪裁偏移值，用于控制剪裁平面的位置，可以用于解决渲染的反射对象和原始对象之间的闪烁问题，默认值是 0。\n\t//shader: 用于渲染反射效果的着色器程序，可以是一个 three.js 的 ShaderMaterial 对象，默认值是 undefined，表示使用内置的着色器。\n\t//encoding: 反射纹理的编码格式，默认值是 LinearEncoding。\n\ttextureWidth: sizes.width.value * window.devicePixelRatio, //反射纹理的宽度，单位是像素，默认值是 512。\n\ttextureHeight: sizes.height.value * window.devicePixelRatio, //反射纹理的高度，单位是像素，默认值是 512。\n\tmultisample: 0, //反射纹理的多重采样级别，用于抗锯齿，默认值是 0，表示不使用多重采样。\n\tcolor: new Color(props.mirrorColor), //color: 反射面的颜色，可以是一个 CSS 颜色字符串或是一个 three.js 的 Color 对象，默认值是 0x7F7F7F。\n}\nconst mirror = new Reflector(new PlaneGeometry(srcSize, srcSize), mirrorConfig)\n// mirror.receiveShadow = true\nconst gridHelp = new GridHelper(srcSize, props.divisions, props.colorCenterLine, props.colorGrid);\nwatchEffect(() => {\n\tif (props.mirrorColor) {\n\t\tmirror.material.uniforms.color.value = new Color(props.mirrorColor)\n\t}\n\tif (props.mirrorSize) {\n\t\tmirror.scale.set(props.mirrorSize / srcSize, props.mirrorSize / srcSize, 1)\n\t}\n\tif (props.gridSize) {\n\t\tif (gridHelp) {\n\t\t\tgridHelp.scale.set(props.gridSize / srcSize, props.gridSize / srcSize, props.gridSize / srcSize)\n\t\t}\n\t}\n\n})\n</script>"],"names":["useTresContext"],"mappings":"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"}
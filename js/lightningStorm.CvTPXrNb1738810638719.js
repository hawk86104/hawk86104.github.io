import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.Y1YyTabW1738810638719.js";import{B as i,b as s,cw as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.6w8Allze1738810638719.js";import{e as l,I as p,K as d}from"./@tresjs.8axf5yqM1738810638719.js";import{a as m}from"./simplex-noise.jB2HxhHB1738810638719.js";import{d as g,a2 as f,o as y,H as b,u as S,r as v,j as x,g as w,m as _,F as P}from"./@vue.NRI7TcgI1738810638719.js";import"./index.OEsm1E5I1738810638719.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.I7LmzNsd1738810638719.js";import"./three-custom-shader-material.srZQa-4o1738810638719.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1738810638719.js";import"./@vueuse.hJpps2zM1738810638719.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.1jvi1Jnm1738810638719.js";import"./all.three.uBsuzgl_1738810638719.js";import"./oimophysics.x0jH7fze1738810638719.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ULtosTB91738810638719.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ndDRfzJW1738810638719.js";import"./index.HkkGeLOW1738810638719.js";import"./three-stdlib.LzGCk-lJ1738810638719.js";import"./@pmndrs.lrUatEzS1738810638719.js";import"./object-hash.IcDxbfA01738810638719.js";import"./@amap.OmDF_WNh1738810638719.js";import"./jszip.DL2I3nsH1738810638719.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.vXWLupKq1738810638719.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.whC-8BEM1738810638719.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.4eLhixsp1738810638719.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.UQoVQE_H1738810638719.js";const M=j;!function(t,i){const s=j,n=F();for(;;)try{if(236866===parseInt(s(550))/1+parseInt(s(477))/2*(-parseInt(s(433))/3)+parseInt(s(502))/4*(-parseInt(s(401))/5)+-parseInt(s(544))/6*(parseInt(s(519))/7)+-parseInt(s(484))/8+-parseInt(s(455))/9*(-parseInt(s(393))/10)+parseInt(s(490))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(524)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=j,i=new RegExp(t(398)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=R(t(413));i[t(391)](n+"chain")&&s[t(391)](n+t(422))?R():n("0")}))()}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(524)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();C(void 0,(function(){const t=j;let i;try{i=Function(t(512)+t(504)+");")()}catch(e){i=window}const s=i[t(515)]=i[t(515)]||{},n=[t(494),t(467),"info",t(546),t(452),t(392),t(402)];for(let r=0;r<n[t(496)];r++){const i=C.constructor[t(538)].bind(C),e=n[r],o=s[e]||i;i[t(553)]=C[t(506)](C),i[t(407)]=o[t(407)][t(506)](o),s[e]=i}}))();class A extends i{constructor(t={}){const i=j;super(),this[i(549)]=!0,this.type="LightningStrike",this[i(413)](A[i(523)](t,t)),this[i(423)]()}static[M(465)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(400)](Math[t(535)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(505)]=(n[e(505)]+1)%i,r},getSeed:function(){return n[t(505)]/i},setSeed:function(s){n[t(505)]=Math.floor(s*i)%i}};return n}static copyParameters(t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t[n(456)]=void 0!==i[n(456)]?e(i.sourceOffset):new s(0,100,0),t.destOffset=void 0!==i[n(551)]?e(i[n(551)]):new s(0,0,0),t[n(459)]=void 0!==i[n(459)]?i[n(459)]:1,t[n(507)]=void 0!==i.roughness?i.roughness:.9,t[n(485)]=void 0!==i[n(485)]?i.straightness:.7,t.up0=void 0!==i[n(481)]?e(i[n(481)]):new s(0,0,1),t.up1=void 0!==i[n(466)]?e(i[n(466)]):new s(0,0,1),t[n(395)]=void 0!==i[n(395)]?i[n(395)]:1,t[n(441)]=void 0!==i[n(441)]?i[n(441)]:1,t[n(520)]=void 0!==i[n(520)]?i[n(520)]:.5,t[n(386)]=void 0!==i.radius1Factor?i[n(386)]:.2,t.minRadius=void 0!==i.minRadius?i[n(475)]:.2,t[n(480)]=void 0!==i[n(480)]?i.isEternal:void 0===i.birthTime||void 0===i[n(389)],t[n(517)]=i[n(517)],t[n(389)]=i.deathTime,t[n(451)]=void 0!==i.propagationTimeFactor?i.propagationTimeFactor:.1,t[n(414)]=void 0!==i.vanishingTimeFactor?i[n(414)]:.9,t.subrayPeriod=void 0!==i[n(543)]?i[n(543)]:4,t[n(403)]=void 0!==i[n(403)]?i[n(403)]:.6,t[n(426)]=void 0!==i[n(426)]?i[n(426)]:9,t[n(513)]=void 0!==i[n(513)]&&i[n(513)],t[n(488)]=void 0!==i[n(488)]?i.ramification:5,t[n(533)]=void 0!==i[n(533)]?i[n(533)]:3,t[n(522)]=void 0!==i.recursionProbability?i.recursionProbability:.6,t.generateUVs=void 0!==i[n(483)]&&i[n(483)],t.randomGenerator=i[n(424)],t.noiseSeed=i[n(388)],t[n(487)]=i[n(487)],t.onSubrayCreation=i.onSubrayCreation,t}[M(462)](t){const i=M;this.isStatic||(this[i(469)][i(480)]||this.rayParameters[i(517)]<=t&&t<=this[i(469)].deathTime?(this[i(503)](t),t<this[i(552)][0][i(531)]?this[i(421)]=A[i(442)]:t>this[i(552)][0][i(476)]?this[i(421)]=A[i(420)]:this.state=A.RAY_STEADY,this[i(460)]=!0):(this[i(460)]=!1,t<this.rayParameters.birthTime?this[i(421)]=A[i(492)]:this.state=A[i(457)]))}[M(413)](t){const i=M;this[i(469)]=t,this[i(426)]=void 0!==t[i(426)]?Math[i(429)](t[i(426)]):9,t.maxIterations=this[i(426)],this[i(513)]=void 0!==t[i(513)]&&t[i(513)],t.isStatic=this[i(513)],this[i(488)]=void 0!==t.ramification?Math[i(429)](t[i(488)]):5,t.ramification=this[i(488)],this[i(533)]=void 0!==t.maxSubrayRecursion?Math[i(429)](t.maxSubrayRecursion):3,t[i(533)]=this[i(533)],this[i(522)]=void 0!==t[i(522)]?t[i(522)]:.6,t[i(522)]=this[i(522)],this[i(483)]=void 0!==t.generateUVs&&t[i(483)],t[i(483)]=this[i(483)],void 0!==t[i(424)]?(this[i(424)]=t.randomGenerator,this[i(454)]=t[i(424)],void 0!==t[i(388)]&&this[i(454)][i(495)](t[i(388)])):(this[i(424)]=A[i(465)](),this[i(454)]=Math),void 0!==t[i(487)]?this.onDecideSubrayCreation=t[i(487)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(501)]&&(this[i(501)]=t[i(501)])),this[i(421)]=A[i(486)],this.maxSubrays=Math[i(427)](1+Math[i(470)](this[i(488)],Math[i(431)](0,this[i(533)]-1))),t[i(435)]=this.maxSubrays,this[i(410)]=2*(1<<this[i(426)]),this[i(552)]=[];for(let s=0;s<this[i(435)];s++)this[i(552)][i(400)](this[i(461)]());this[i(498)]=[];for(let s=0;s<this[i(410)];s++)this[i(498)][i(400)](this[i(493)]());this[i(438)]=0,this[i(511)]=0,this[i(473)]=null,this[i(514)]=this.generateUVs?this[i(425)]:this[i(405)],this[i(399)]=0,this[i(471)]=null,this.currentSegmentIndex=0,this[i(463)]=!1,this.subrayProbability=0,this[i(521)]=0,this[i(440)]=0,this[i(491)]=0,this[i(516)]=0,this[i(453)]=null,this[i(387)]=null,this[i(474)]=null,this.positionAttribute=null,this.uvsAttribute=null,this[i(479)]=m(this[i(454)][i(535)]),this.simplexY=m(this[i(454)][i(535)]),this[i(432)]=m(this[i(454)][i(535)]),this[i(529)]=new s,this[i(530)]=new s,this[i(397)]=new s,this.down=new s,this[i(534)]=new s,this[i(472)]=new s,this[i(500)]=new s,this.vPos=new s,this[i(527)]=new s}[M(423)](){const t=M,i=1<<this[t(426)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(435)];this[t(453)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(483)]&&(this[t(387)]=new Float32Array(2*s)),this[t(412)](0),this[t(406)](new n(this[t(474)],1)),this[t(541)]=new e(this.vertices,3),this[t(547)](t(428),this.positionAttribute),this[t(483)]&&(this[t(537)]=new e(new Float32Array(this[t(387)]),2),this[t(547)]("uv",this[t(537)])),!this[t(513)]&&(this[t(409)].usage=r,this.positionAttribute[t(430)]=r,this[t(483)]&&(this[t(537)].usage=r)),this[t(453)]=this[t(541)][t(382)],this[t(474)]=this[t(409)][t(382)],this[t(483)]&&(this[t(387)]=this[t(537)][t(382)])}[M(503)](t){const i=M;this[i(412)](t),this.drawRange.count=this[i(440)],this[i(409)].needsUpdate=!0,this[i(541)][i(489)]=!0,this.generateUVs&&(this[i(537)].needsUpdate=!0)}[M(412)](t){const i=M,s=this;this[i(521)]=0,this[i(440)]=0,this[i(491)]=0,this[i(516)]=0,this[i(497)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(517)]||(this[e(469)][e(480)]&&0==s[e(471)][e(532)]?(s.createPrism(n),s[e(487)](n,s)):t<r.endPropagationTime?s[e(511)]>=n[e(446)]*r.propagationTimeFactor&&(s[e(394)](n),s.onDecideSubrayCreation(n,s)):t<r.beginVanishingTime?(s[e(394)](n),s[e(487)](n,s)):(s[e(511)]<=r[e(414)]+n[e(390)]*(1-r[e(414)])&&s[e(394)](n),s[e(487)](n,s)))}))}[M(508)](){const t=M;return this[t(552)][this[t(399)]++]}initSubray(t,i){const s=M;t.pos0[s(417)](i[s(456)]),t[s(499)][s(417)](i[s(551)]),t[s(481)].copy(i[s(481)]),t[s(466)][s(417)](i[s(466)]),t[s(395)]=i.radius0,t[s(441)]=i[s(441)],t.birthTime=i[s(517)],t[s(389)]=i.deathTime,t[s(459)]=i.timeScale,t[s(507)]=i[s(507)],t.straightness=i.straightness,t.propagationTimeFactor=i[s(451)],t[s(414)]=i[s(414)],t[s(426)]=this[s(426)],t.seed=void 0!==i[s(388)]?i.noiseSeed:0,t[s(532)]=0}[M(497)](t,i){const s=M;this.time=t,this.currentSegmentCallback=i,this.numSubrays=0,this[s(458)](this[s(508)](),this[s(469)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(552)][n];this[s(471)]=i,this[s(424)].setSeed(i.seed),i.endPropagationTime=o.lerp(i.birthTime,i.deathTime,i.propagationTimeFactor),i.beginVanishingTime=o.lerp(i[s(389)],i[s(517)],1-i[s(414)]);const e=this[s(424)][s(535)];i.linPos0[s(478)](e(),e(),e())[s(418)](1e3),i[s(450)].set(e(),e(),e()).multiplyScalar(1e3),this[s(511)]=(t-i[s(517)])/(i[s(389)]-i[s(517)]),this[s(510)]=0,this.isInitialSegment=!0;const r=this[s(384)]();r[s(416)]=0,r[s(509)].copy(i[s(509)]),r[s(499)][s(417)](i.pos1),r[s(540)][s(417)](i.linPos0),r[s(450)][s(417)](i[s(450)]),r.up0[s(417)](i.up0),r[s(466)].copy(i[s(466)]),r[s(395)]=i[s(395)],r[s(441)]=i[s(441)],r[s(446)]=0,r[s(390)]=1,r.positionVariationFactor=1-i.straightness,this[s(525)]=this[s(488)]*Math[s(470)](this[s(522)],i.recursion)/(1<<i[s(426)]),this[s(437)](r)}this.currentSegmentCallback=null,this[s(471)]=null}[M(437)](t){const i=M;if(t.iteration>=this[i(471)].maxIterations)return void this[i(473)](t);this[i(529)][i(449)](t.pos1,t[i(509)]);let s=this[i(529)][i(496)]();s<1e-6&&(this.forwards[i(478)](0,0,.01),s=this.forwards[i(496)]());const n=.5*(t[i(395)]+t.radius1),e=.5*(t[i(446)]+t[i(390)]),r=this[i(438)]*this[i(471)].timeScale*Math[i(470)](2,t[i(416)]);this[i(534)].lerpVectors(t[i(509)],t[i(499)],.5),this.middleLinPos.lerpVectors(t[i(540)],t[i(450)],.5);const o=this[i(472)];this[i(500)][i(478)](this[i(479)](o.x,o.y,o.z,r),this[i(542)](o.x,o.y,o.z,r),this[i(432)](o.x,o.y,o.z,r)),this[i(500)][i(418)](t.positionVariationFactor*s),this[i(500)][i(548)](this.middlePos);const a=this.getNewSegment();a[i(509)][i(417)](t.pos0),a[i(499)][i(417)](this[i(500)]),a[i(540)][i(417)](t[i(540)]),a[i(450)][i(417)](this[i(472)]),a.up0[i(417)](t[i(481)]),a[i(466)][i(417)](t[i(466)]),a[i(395)]=t[i(395)],a.radius1=n,a[i(446)]=t[i(446)],a[i(390)]=e,a[i(482)]=t[i(482)]*this[i(471)][i(507)],a.iteration=t[i(416)]+1;const h=this[i(384)]();h[i(509)][i(417)](this[i(500)]),h[i(499)][i(417)](t[i(499)]),h.linPos0[i(417)](this[i(472)]),h.linPos1.copy(t[i(450)]),this[i(527)].crossVectors(t[i(481)],this[i(529)].normalize()),h[i(481)][i(443)](this[i(529)],this[i(527)])[i(408)](),h[i(466)].copy(t[i(466)]),h[i(395)]=n,h[i(441)]=t[i(441)],h.fraction0=e,h[i(390)]=t[i(390)],h.positionVariationFactor=t.positionVariationFactor*this[i(471)].roughness,h[i(416)]=t[i(416)]+1,this[i(437)](a),this[i(437)](h)}[M(394)](t){const i=M;this[i(530)].subVectors(t[i(499)],t[i(509)])[i(408)](),this.isInitialSegment&&(this[i(514)](t[i(509)],t.up0,this[i(530)],t[i(395)],0),this[i(463)]=!1),this[i(514)](t[i(499)],t.up0,this[i(530)],t[i(441)],t[i(390)]),this[i(436)]()}[M(405)](t,i,s,n){const e=M;this[e(397)][e(443)](i,s)[e(418)](n*A[e(448)]),this[e(545)][e(417)](i)[e(418)](-n*A[e(396)]);const r=this.vPos,o=this[e(453)];r[e(417)](t)[e(439)](this[e(397)])[e(548)](this[e(545)]),o[this[e(491)]++]=r.x,o[this[e(491)]++]=r.y,o[this[e(491)]++]=r.z,r[e(417)](t).add(this.side)[e(548)](this[e(545)]),o[this[e(491)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(491)]++]=r.z,r[e(417)](i).multiplyScalar(n).add(t),o[this[e(491)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(491)]++]=r.z,this.currentVertex+=3}[M(425)](t,i,s,n,e){const r=M;this[r(397)][r(443)](i,s)[r(418)](n*A.COS30DEG),this[r(545)][r(417)](i).multiplyScalar(-n*A.SIN30DEG);const o=this[r(536)],a=this[r(453)],h=this[r(387)];o[r(417)](t)[r(439)](this[r(397)])[r(548)](this[r(545)]),a[this.currentCoordinate++]=o.x,a[this[r(491)]++]=o.y,a[this[r(491)]++]=o.z,h[this[r(516)]++]=e,h[this[r(516)]++]=0,o[r(417)](t).add(this.side).add(this[r(545)]),a[this[r(491)]++]=o.x,a[this[r(491)]++]=o.y,a[this[r(491)]++]=o.z,h[this[r(516)]++]=e,h[this[r(516)]++]=.5,o[r(417)](i)[r(418)](n)[r(548)](t),a[this.currentCoordinate++]=o.x,a[this[r(491)]++]=o.y,a[this[r(491)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=1,this.currentVertex+=3}[M(436)](t){const i=M,s=this[i(474)];t=this[i(521)]-6,s[this[i(440)]++]=t+1,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+5,s[this[i(440)]++]=t+1,s[this[i(440)]++]=t+5,s[this[i(440)]++]=t+4,s[this[i(440)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(440)]++]=t+4,s[this[i(440)]++]=t+0,s[this[i(440)]++]=t+4,s[this[i(440)]++]=t+3,s[this[i(440)]++]=t+2,s[this[i(440)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(440)]++]=t+2,s[this[i(440)]++]=t+3,s[this[i(440)]++]=t+5}[M(434)](){const t=M,i=this.randomGenerator[t(535)];this[t(487)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(469)].subrayPeriod,h=n[e(469)].subrayDutyCycle,c=n[e(469)][e(480)]&&0==r[e(532)]?-i()*a:o[e(445)](r[e(517)],r[e(531)],s[e(446)])-i()*a,u=n[e(438)]-c,l=Math[e(429)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(525)]),r[e(532)]<n[e(533)]&&n[e(399)]<n[e(435)]&&i()<d){const t=n[e(508)](),o=n[e(424)][e(539)]();t[e(468)]=p,n[e(424)][e(495)](p),t[e(532)]=r[e(532)]+1,t.maxIterations=Math[e(431)](1,r[e(426)]-1),t[e(540)].set(i(),i(),i()).multiplyScalar(1e3),t[e(450)].set(i(),i(),i())[e(418)](1e3),t[e(481)][e(417)](r.up0),t[e(466)][e(417)](r[e(466)]),t.radius0=s[e(395)]*n[e(469)][e(520)],t[e(441)]=Math[e(444)](n[e(469)][e(475)],s[e(441)]*n.rayParameters.radius1Factor),t[e(517)]=c+l*a,t[e(389)]=t[e(517)]+a*h,!n[e(469)][e(480)]&&0==r[e(532)]&&(t[e(517)]=Math[e(431)](t[e(517)],r.birthTime),t[e(389)]=Math[e(444)](t[e(389)],r[e(389)])),t[e(459)]=2*r[e(459)],t[e(507)]=r[e(507)],t[e(485)]=r.straightness,t[e(451)]=r[e(451)],t[e(414)]=r[e(414)],n.onSubrayCreation(s,r,t,n),n[e(424)][e(495)](o)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(i,s,n,e){e[t(415)](i,s,n,.5,.6,.2)},this[t(518)]=function(s,o,h,c,u,l){const p=t;h[p(509)][p(417)](s[p(509)]),n[p(449)](o[p(499)],o[p(509)]),e.copy(n).normalize(),n[p(418)](s[p(446)]+(1-s[p(446)])*(i()*c));const d=n[p(496)]();r.crossVectors(o[p(481)],e);const m=2*Math.PI*i();r[p(418)](Math[p(411)](m)),a.copy(o[p(481)])[p(418)](Math[p(447)](m)),h[p(499)][p(417)](r)[p(548)](a)[p(418)](d*u*(l+i()*(1-l)))[p(548)](n)[p(548)](o[p(509)])},this[t(415)]=function(s,o,h,c,u,l){const p=t;h[p(509)][p(417)](s.pos0),n[p(449)](o[p(499)],o.pos0),e.copy(n)[p(408)](),n[p(418)](s[p(446)]+(1-s.fraction0)*((2*i()-1)*c));const d=n[p(496)]();r[p(443)](o[p(481)],e);const m=2*Math.PI*i();r[p(418)](Math.cos(m)),a[p(417)](o.up0).multiplyScalar(Math[p(447)](m)),h[p(499)].copy(r).add(a)[p(418)](d*u*(l+i()*(1-l))).add(n)[p(548)](o[p(509)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(493)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(384)](){return this[M(498)][this.currentSegmentIndex++]}[M(417)](t){const i=M;return super[i(417)](t),this[i(413)](A.copyParameters({},t.rayParameters)),this}[M(526)](){const t=M;return new(this[t(383)])(A.copyParameters({},this[t(469)]))}}function j(t,i){const s=F();return(j=function(t,i){return s[t-=382]})(t,i)}function F(){const t=["index","maxRaySegments","cos","fillMesh","init","vanishingTimeFactor","subrayCylinderPosition","iteration","copy","multiplyScalar","RAY_STEADY","RAY_VANISHING","state","input","createMesh","randomGenerator","createTriangleVerticesWithUVs","maxIterations","ceil","position","floor","usage","max","simplexZ","1245tqmsCs","createDefaultSubrayCreationCallbacks","maxSubrays","createPrismFaces","fractalRayRecursive","time","sub","currentIndex","radius1","RAY_PROPAGATING","crossVectors","min","lerp","fraction0","sin","COS30DEG","subVectors","linPos1","propagationTimeFactor","exception","vertices","seedGenerator","33426FGLcnX","sourceOffset","RAY_EXTINGUISHED","initSubray","timeScale","visible","createSubray","update","isInitialSegment","stateObject","createRandomGenerator","up1","warn","seed","rayParameters","pow","currentSubray","middleLinPos","currentSegmentCallback","indices","minRadius","beginVanishingTime","1306IWcHBs","set","simplexX","isEternal","up0","positionVariationFactor","generateUVs","2785952JNLxoj","straightness","RAY_INITIALIZED","onDecideSubrayCreation","ramification","needsUpdate","3904835rGjHNS","currentCoordinate","RAY_UNBORN","createSegment","log","setSeed","length","fractalRay","raySegments","pos1","newPos","onSubrayCreation","40408WEBmqA","updateMesh",'{}.constructor("return this")( )',"currentSeed","bind","roughness","addNewSubray","pos0","currentSegmentIndex","timeFraction","return (function() ","isStatic","currentCreateTriangleVertices","console","currentUVCoordinate","birthTime","subrayConePosition","2569ZTMvXL","radius0Factor","currentVertex","recursionProbability","copyParameters","apply","subrayProbability","clone","cross1","debu","forwards","forwardsFill","endPropagationTime","recursion","maxSubrayRecursion","middlePos","random","vPos","uvsAttribute","prototype","getSeed","linPos0","positionAttribute","simplexY","subrayPeriod","42AeFoFj","down","error","setAttribute","add","isLightningStrike","438471vzmUzm","destOffset","subrays","__proto__","array","constructor","getNewSegment","gger","radius1Factor","uvs","noiseSeed","deathTime","fraction1","test","table","230FCHQXG","createPrism","radius0","SIN30DEG","side","function *\\( *\\)","numSubrays","push","10wKcpvB","trace","subrayDutyCycle","while (true) {}","createTriangleVerticesWithoutUVs","setIndex","toString","normalize"];return(F=function(){return t})()}function R(t){function i(t){const s=j;if("string"==typeof t)return function(t){}[s(383)](s(404))[s(524)]("counter");1!==(""+t/t)[s(496)]||t%20==0?function(){return!0}[s(383)](s(528)+s(385)).call("action"):function(){return!1}[s(383)]("debugger")[s(524)](s(464)),i(++t)}try{if(t)return i;i(0)}catch(s){}}A[M(486)]=0,A[M(492)]=1,A[M(442)]=2,A[M(419)]=3,A[M(420)]=4,A[M(457)]=5,A[M(448)]=Math[M(411)](30*Math.PI/180),A.SIN30DEG=Math.sin(30*Math.PI/180);const V=z;function z(t,i){const s=G();return(z=function(t,i){return s[t-=401]})(t,i)}!function(t,i){const s=z,n=G();for(;;)try{if(430459===-parseInt(s(441))/1+parseInt(s(451))/2*(parseInt(s(426))/3)+-parseInt(s(445))/4*(parseInt(s(463))/5)+-parseInt(s(480))/6+-parseInt(s(469))/7+-parseInt(s(474))/8+-parseInt(s(410))/9*(-parseInt(s(450))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(472)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=z,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(428),"i"),n=L(t(467));i[t(429)](n+t(437))&&s[t(429)](n+t(420))?L():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(472)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();H(void 0,(function(){const t=z;let i;try{i=Function(t(419)+t(424)+");")()}catch(e){i=window}const s=i[t(440)]=i[t(440)]||{},n=[t(434),t(473),t(403),t(447),t(439),"table",t(413)];for(let r=0;r<n.length;r++){const i=H.constructor.prototype.bind(H),e=n[r],o=s[e]||i;i[t(477)]=H[t(456)](H),i[t(446)]=o[t(446)][t(456)](o),s[e]=i}}))();class E extends a{constructor(t={}){const i=z;super(),this[i(471)]=!0,this[i(462)]=t,t[i(414)]=void 0!==t[i(414)]?t[i(414)]:1e3,t[i(468)]=void 0!==t[i(468)]?t[i(468)]:80,t[i(406)]=void 0!==t.maxHeight?t.maxHeight:100,t.maxSlope=void 0!==t[i(443)]?t[i(443)]:1.1,t[i(411)]=void 0!==t[i(411)]?t.maxLightnings:3,t[i(458)]=void 0!==t[i(458)]?t.lightningMinPeriod:3,t[i(407)]=void 0!==t[i(407)]?t[i(407)]:7,t[i(412)]=void 0!==t[i(412)]?t[i(412)]:1,t.lightningMaxDuration=void 0!==t[i(470)]?t[i(470)]:2.5,this[i(421)]=A.copyParameters(t.lightningParameters,t[i(421)]),this.lightningParameters[i(476)]=!1,this.lightningMaterial=void 0!==t.lightningMaterial?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(415)]?this[i(415)]=t[i(415)]:this[i(415)]=function(s,n){const e=i;n[e(432)]((Math.random()-.5)*t.size,0,(Math.random()-.5)*t.size);const r=o.lerp(t[e(468)],t[e(406)],Math.random());s[e(432)](t.maxSlope*(2*Math.random()-1),1,t[e(443)]*(2*Math[e(460)]()-1))[e(433)](r)[e(427)](n)},this[i(454)]=t[i(454)],this[i(479)]=!1,this[i(448)]=0,this[i(453)]=[],this[i(402)]=[];for(let s=0;s<this[i(462)][i(411)];s++){const t=new A(A[i(425)]({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this[i(402)].push(s)}}update(t){const i=z;if(!this[i(479)]&&(this[i(448)]=this[i(482)](t)*Math[i(460)](),this[i(479)]=!0),t>=this[i(448)]){const s=this.deadLightningsMeshes[i(401)]();if(s){const n=A[i(425)](s[i(436)][i(430)],this[i(421)]);n[i(461)]=t,n[i(444)]=t+o[i(417)](this[i(462)].lightningMinDuration,this[i(462)][i(470)],Math[i(460)]()),this.onRayPosition(n[i(459)],n[i(475)]),n[i(416)]=Math[i(460)](),this[i(427)](s),this.lightningsMeshes[i(423)](s)}this[i(448)]=this[i(482)](t)}let s=0,n=this[i(453)][i(431)];for(;s<n;){const e=this.lightningsMeshes[s],r=e.geometry,o=r[i(442)];r[i(478)](t),o===A[i(422)]&&r[i(442)]>o&&this[i(454)]&&this[i(454)](r),r.state===A[i(405)]?(this[i(453)][i(408)](this[i(453)].indexOf(e),1),this[i(402)][i(423)](e),this[i(455)](e),n--):s++}}[V(482)](t){const i=V;return t+o.lerp(this[i(462)][i(458)],this[i(462)][i(407)],Math.random())/(this[i(462)][i(411)]+1)}[V(404)](t,i){const s=V;return super[s(404)](t,i),this[s(462)][s(414)]=t[s(462)].size,this.stormParams[s(468)]=t[s(462)].minHeight,this.stormParams.maxHeight=t[s(462)][s(406)],this[s(462)][s(443)]=t[s(462)].maxSlope,this[s(462)][s(411)]=t[s(462)][s(411)],this[s(462)][s(458)]=t[s(462)].lightningMinPeriod,this.stormParams[s(407)]=t.stormParams.lightningMaxPeriod,this[s(462)].lightningMinDuration=t[s(462)][s(412)],this.stormParams.lightningMaxDuration=t[s(462)].lightningMaxDuration,this[s(421)]=A.copyParameters({},t[s(421)]),this[s(449)]=t[s(462)][s(449)],this[s(454)]=t.onLightningDown,this}[V(481)](){return new(this[V(465)])(this.stormParams).copy(this)}}function G(){const t=["noiseSeed","lerp","action","return (function() ","input","lightningParameters","RAY_PROPAGATING","push",'{}.constructor("return this")( )',"copyParameters","3Zdtxkb","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","rayParameters","length","set","multiplyScalar","log","debu","geometry","chain","while (true) {}","exception","console","55188mEfdmC","state","maxSlope","deathTime","975556ktazvx","toString","error","nextLightningTime","lightningMaterial","80060wozQoB","395522ujiLTS","gger","lightningsMeshes","onLightningDown","remove","bind","string","lightningMinPeriod","sourceOffset","random","birthTime","stormParams","10vkomUd","call","constructor","counter","init","minHeight","632296sDQRoD","lightningMaxDuration","isLightningStorm","apply","warn","3409920tSANkv","destOffset","isEternal","__proto__","update","inited","1421484aznbNL","clone","getNextLightningTime","pop","deadLightningsMeshes","info","copy","RAY_EXTINGUISHED","maxHeight","lightningMaxPeriod","splice","stateObject","1719cQCHJP","maxLightnings","lightningMinDuration","trace","size","onRayPosition"];return(G=function(){return t})()}function L(t){function i(t){const s=z;if(typeof t===s(457))return function(t){}.constructor(s(438)).apply(s(466));1!==(""+t/t)[s(431)]||t%20==0?function(){return!0}[s(465)]("debu"+s(452))[s(464)](s(418)):function(){return!1}[s(465)](s(435)+s(452))[s(472)](s(409)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=Z;!function(t,i){const s=Z,n=k();for(;;)try{if(386014===-parseInt(s(260))/1*(parseInt(s(233))/2)+parseInt(s(244))/3+-parseInt(s(229))/4*(parseInt(s(250))/5)+-parseInt(s(212))/6*(-parseInt(s(201))/7)+-parseInt(s(214))/8+-parseInt(s(247))/9*(-parseInt(s(218))/10)+-parseInt(s(246))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(240)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=Z,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=X(t(259));i[t(210)](n+"chain")&&s.test(n+t(232))?X():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(240)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(){const t=["1761792nXADRK","straightness","3306567OEPucE","18EtCDDa","minHeight","#b0ffff","765WrtJYp","gger","exception","lightStorm","bind","rayParameters","subrayPeriod","subVectors","prototype","init","478154Svablx","subrayConePosition","table","trace","console","6825RpaCOu","update","info","error","log","counter","stormParams","color","addVectors","test",'{}.constructor("return this")( )',"4626xuclcw","size","2690784ltCVnu","subrayDutyCycle","sourceOffset","radius0","2764430zrJrcd","Vector3","radius1","dot","while (true) {}","roughness","call","set","timeScale","stateObject","object","10216JijQNl","__proto__","warn","input","2rvzoct","constructor","Color","maxLightnings","maxHeight","length","toString","apply","debu","copy","multiplyScalar"];return(k=function(){return t})()}U(void 0,(function(){const t=Z;let i;try{i=Function("return (function() "+t(211)+");")()}catch(e){i=window}const s=i[t(200)]=i[t(200)]||{},n=[t(205),t(231),t(203),t(204),t(252),t(262),t(263)];for(let r=0;r<n.length;r++){const i=U[t(234)][t(258)][t(254)](U),e=n[r],o=s[e]||i;i[t(230)]=U[t(254)](U),i.toString=o[t(239)].bind(o),s[e]=i}}))();const Y=[N(228)];function Z(t,i){const s=k();return(Z=function(t,i){return s[t-=200]})(t,i)}const $=g({__name:N(253),props:{color:{default:N(249)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,n=t,e=new(u[i(235)])(n[i(208)]),r=new h({color:e}),o=new s(0,-1,0);let a=0;const c=new(u[i(219)]),p=new(u[i(219)]),d={roughness:n[i(223)],straightness:n.straightness,radius0:n[i(217)],radius1:n[i(220)],timeScale:n[i(226)],subrayPeriod:n[i(256)],subrayDutyCycle:n[i(215)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(261)](t,s,n,.6,.6,.5),a=e[r(255)].sourceOffset.y,c[r(257)](n.pos1,e.rayParameters.sourceOffset);const h=o[r(221)](c);p[r(242)](o)[r(243)](h),c.sub(p);const u=h/a>.5?a/h:1;p[r(243)](u),c.add(p),n.pos1[r(209)](c,e.rayParameters[r(216)])}},m=new E({size:n.size,minHeight:n[i(248)],maxHeight:n[i(237)],maxSlope:.6,maxLightnings:n[i(236)],lightningParameters:d,lightningMaterial:r});f((()=>{const t=i,s=m[t(207)];s[t(213)]=n[t(213)],s[t(248)]=n.minHeight,s[t(237)]=n[t(237)],r.color[t(225)](n.color),d[t(223)]=n[t(223)],d[t(245)]=n[t(245)],d[t(217)]=n[t(217)],d[t(220)]=n[t(220)],d.timeScale=n.timeScale}));const{onLoop:g}=l();return g((({elapsed:t})=>{m[i(202)](t)})),(t,i)=>(y(),b("primitive",{object:S(m),renderOrder:9999},null,8,Y))}});function X(t){function i(t){const s=Z;if("string"==typeof t)return function(t){}[s(234)](s(222)).apply(s(206));1!==(""+t/t)[s(238)]||t%20==0?function(){return!0}[s(234)](s(241)+s(251))[s(224)]("action"):function(){return!1}[s(234)](s(241)+s(251))[s(240)](s(227)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=J;!function(t,i){const s=J,n=Q();for(;;)try{if(714237===parseInt(s(263))/1+parseInt(s(245))/2+-parseInt(s(253))/3*(-parseInt(s(248))/4)+parseInt(s(273))/5*(parseInt(s(285))/6)+-parseInt(s(257))/7+-parseInt(s(274))/8+parseInt(s(281))/9*(-parseInt(s(240))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(279)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Q(){const t=["1232700ASNKrW","prototype","straightness","length","info",'{}.constructor("return this")( )',"value","时间缩放","table","console","30hoBgHW","9974560jRkcyK","#ffbde7","toString","function *\\( *\\)","端部半径","apply","stateObject","9AsqgOG","radius0","test","radius1","577542aLcNHM","color","roughness","while (true) {}","7023490NcOjiI","action","timeScale","init","粗糙度","1503058KZKUdU","constructor","maxHeight","4AtPyjw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#92399e","lightningStorm","error","628689ydycuF","未部半径","debu","minHeight","755496GUaQIy","直度度","exception","chain","gger","bind"];return(Q=function(){return t})()}!function(){K(this,(function(){const t=J,i=new RegExp(t(277)),s=new RegExp(t(249),"i"),n=tt(t(243));i[t(283)](n+t(260))&&s[t(283)](n+"input")?tt():n("0")}))()}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(279)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(t,i){const s=Q();return(J=function(t,i){return s[t-=239]})(t,i)}W(void 0,(function(){const t=J;let i;try{i=Function("return (function() "+t(268)+");")()}catch(e){i=window}const s=i[t(272)]=i[t(272)]||{},n=["log","warn",t(267),t(252),t(259),t(271),"trace"];for(let r=0;r<n[t(266)];r++){const i=W[t(246)][t(264)][t(262)](W),e=n[r],o=s[e]||i;i.__proto__=W[t(262)](W),i[t(276)]=o[t(276)][t(262)](o),s[e]=i}}))();const q=g({__name:B(251),setup(i){const s=B,n=v({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(250),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(275),roughness:{label:s(244),value:.85,min:0,max:1,step:.01},straightness:{label:s(258),value:.65,min:0,max:1,step:.01},radius0:{label:s(278),value:1,min:.1,max:10,step:.01},radius1:{label:s(254),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(270),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x($,{minHeight:S(e)[m(269)],maxHeight:S(r)[m(269)],color:S(o).value,roughness:S(a).value,straightness:S(h)[m(269)],radius0:S(c).value,radius1:S(u)[m(269)],timeScale:S(l).value},null,8,[m(256),m(247),m(286),m(287),m(265),m(282),m(284),m(242)]),x(S(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function tt(t){function i(t){const s=J;if("string"==typeof t)return function(t){}[s(246)](s(239))[s(279)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(255)+s(261)).call(s(241)):function(){return!1}.constructor(s(255)+s(261)).apply(s(280)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

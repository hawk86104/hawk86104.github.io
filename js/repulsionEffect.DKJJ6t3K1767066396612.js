import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{ao as o}from"./three.BD1hRFgo1767066396612.js";import{g as t}from"./gsap.CY1N3EIL1767066396612.js";import"./customShaderMaterial.vue_vue_type_script_setup_true_lang.DS9PWjZT1767066396612.js";import"./index.vue_vue_type_script_setup_true_lang.iYOGhvYh1767066396612.js";import{u as i}from"./useSeek.D1f6FARu1767066396612.js";import{A as s,S as n}from"./@tresjs.B1f7s3pS1767066396612.js";import{_ as a}from"./@fesjs.BK66sTPr1767066396612.js";const{defineComponent:r}=await e("vue"),{createElementVNode:l,unref:c,withCtx:u,createVNode:p,renderList:h,Fragment:d,openBlock:m,createElementBlock:f,createBlock:y}=await e("vue"),v=["position"],g=["position"],{shallowRef:w,computed:_,watch:T,reactive:x}=await e("vue"),z=r({__name:"repulsionEffectSence",setup(e){const a=w(null),r=w(null),z=x({rows:6,cols:14,gutter:2.2}),M=_(()=>({x:(z.cols-1)*z.gutter/2,z:(z.rows-1)*z.gutter/2})),{seekAll:k}=i();T(r,()=>{a.value=k(r.value,"type","Mesh"),a.value.forEach(e=>{e.initialRotation={x:"torus"===e.name?o(90):e.rotation.x,y:e.rotation.y,z:"cone"===e.name||"cylinder"===e.name?o(-180):e.rotation.z},e.rotation.x=e.initialRotation.x,e.rotation.y=e.initialRotation.y,e.rotation.z=e.initialRotation.z})});const P=({point:e})=>{if(!a.value)return;const{x:i,y:s,z:n}=e;a.value.forEach(e=>{const s=R(i,n,e.position.x,e.position.z),a=j(s,7,0,0,6);t.to(e.position,{y:a<1?1:a,duration:.3});const r=e.position.y/1.2,l=r<1?1:r;t.to(e.scale,{ease:"expo.out",x:l,y:l,z:l,duration:.3}),t.to(e.rotation,{duration:.7,ease:"expo.out",x:j(e.position.y,-1,1,o(270),e.initialRotation.x),z:j(e.position.y,-1,1,o(-90),e.initialRotation.z),y:j(e.position.y,-1,1,o(45),e.initialRotation.y)})})},R=(e,o,t,i)=>Math.sqrt((e-t)**2+(o-i)**2),j=(e,o,t,i,s)=>(e-o)/(t-o)*(s-i)+i,C=(e,o)=>{const t=Math.floor(3*Math.random());return 0===t?"torus":1===t?"cone":"cylinder"},E=(e,o)=>[(e-1)*z.gutter-M.value.x,0,(o-1)*z.gutter-M.value.z];return(e,o)=>(m(),f(d,null,[p(c(s),{"receive-shadow":"",args:[100,100],"rotation-x":-Math.PI/2,position:[0,0,0],onPointermove:P},{default:u(()=>[...o[0]||(o[0]=[l("TresShadowMaterial",{transparent:"",opacity:.3},null,-1)])]),_:1},8,["rotation-x"]),l("TresGroup",{ref_key:"shapesGroupRef",ref:r,name:"shapes"},[(m(!0),f(d,null,h(z.rows,e=>(m(),f("TresGroup",{key:`row-${e}`},[(m(!0),f(d,null,h(z.cols,t=>(m(),f("TresGroup",{key:`col-${t}-${e}`},["torus"===C()?(m(),f("TresMesh",{key:0,name:"torus","cast-shadow":"","receive-shadow":"",position:E(t,e)},[...o[1]||(o[1]=[l("TresTorusGeometry",{args:[.25,.08,30,200]},null,-1),l("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,v)):"cone"===C()?(m(),y(c(n),{key:1,name:"cone",args:[.3,.5,32],"cast-shadow":"","receive-shadow":"",position:E(t,e)},{default:u(()=>[...o[2]||(o[2]=[l("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])]),_:1},8,["position"])):(m(),f("TresMesh",{key:2,name:"cylinder","cast-shadow":"","receive-shadow":"",position:E(t,e)},[...o[3]||(o[3]=[l("TresCylinderGeometry",{args:[.3,.3,.2,64]},null,-1),l("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,g))]))),128))]))),128))],512)],64))}}),{defineComponent:M}=await e("vue"),{createElementVNode:k,createVNode:P,resolveComponent:R,normalizeProps:j,guardReactiveProps:C,withCtx:E,Fragment:L,openBlock:S,createElementBlock:G}=await e("vue"),b=a(M({__name:"repulsionEffect",setup(e){const o={alpha:!0,shadows:!0,powerPreference:"high-performance",windowSize:!0,clearAlpha:0};return(e,t)=>{const i=R("TresCanvas");return S(),G(L,null,[t[8]||(t[8]=k("div",{class:"repulsion-effect__content"},[k("h2",null,"ICE.GL"),k("h3",null,"图形学社区")],-1)),t[9]||(t[9]=k("div",{class:"repulsion-effect__bg"},null,-1)),P(i,j(C(o)),{default:E(()=>[t[0]||(t[0]=k("TresPerspectiveCamera",{position:[0,65,0],"rotation-x":-1.57,fov:20},null,-1)),t[1]||(t[1]=k("TresAmbientLight",{color:"#ffffff"},null,-1)),t[2]||(t[2]=k("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,-20]},null,-1)),t[3]||(t[3]=k("TresPointLight",{color:"#79573e",intensity:5,decay:0,position:[35,5,0]},null,-1)),t[4]||(t[4]=k("TresPointLight",{color:"#c27439",intensity:5,decay:0,position:[-35,5,0]},null,-1)),t[5]||(t[5]=k("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,20]},null,-1)),t[6]||(t[6]=k("TresSpotLight",{color:"#7bccd7",decay:0,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048,position:[0,25,0]},null,-1)),t[7]||(t[7]=k("TresRectAreaLight",{color:"#341212",decay:0,width:1e3,height:1e3,position:[5,20,50],"look-at":[0,0,0]},null,-1)),P(z)]),_:1},16)],64)}}}),[["__scopeId","data-v-b3b1ae04"]]);export{b as default};

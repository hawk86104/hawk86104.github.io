import{_ as t,C as n,cm as e,cn as o,co as r,cp as i,l as s,c1 as c,ak as u,am as a}from"./three.sBrYSCgq1741007821308.js";import{P as l,e as f,o as p}from"./@tresjs.u6hJLBm41741007821308.js";import{z as d}from"./three-custom-shader-material.3n-EBY0H1741007821308.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1741007821308.js";import{d as y,b as w,a2 as m,w as b,o as I,H as _,u as v,r as C,a3 as S,e as x,f as R,g as A,N as j,j as T,aj as B,ak as z,F as L,M,J as k,m as E}from"./@vue.NRI7TcgI1741007821308.js";!function(t,n){const e=H,o=F();for(;;)try{if(520289===parseInt(e(113))/1*(parseInt(e(137))/2)+-parseInt(e(132))/3+-parseInt(e(102))/4*(parseInt(e(107))/5)+-parseInt(e(114))/6+-parseInt(e(101))/7+-parseInt(e(131))/8+parseInt(e(125))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const O=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(106)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){O(this,(function(){const t=H,n=new RegExp(t(108)),e=new RegExp(t(117),"i"),o=W("init");n.test(o+t(133))&&e[t(112)](o+"input")?W():o("0")}))()}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(106)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function F(){const t=["26188IFSzfv","toString","console","info","apply","530OwanTN","function *\\( *\\)","length","warn","bind","test","22573IHfUYO","359808uydnCT",'{}.constructor("return this")( )',"name","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","constructor","prototype","error","LANDMASS","counter","return (function() ","12726909MfDxRX","ROADS","debu","call","__proto__","gger","667360ShLpRT","2411286QWwCKt","chain","log","table","exception","80lNQftZ","1089200sASDrD"];return(F=function(){return t})()}function H(t,n){const e=F();return(H=function(t,n){return e[t-=101]})(t,n)}D(void 0,(function(){const t=H,n=function(){const t=H;let n;try{n=Function(t(124)+t(115)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(104)]||{},o=[t(134),t(110),t(105),t(121),t(136),t(135),"trace"];for(let r=0;r<o[t(109)];r++){const n=D.constructor[t(120)][t(111)](D),i=o[r],s=e[i]||n;n[t(129)]=D[t(111)](D),n[t(103)]=s[t(103)].bind(s),e[i]=n}}))();const Z=async()=>{const t=await l("./plugins/digitalCity/model/shanghai.FBX");let n=null,e=null,o=null;return t.traverse((t=>{const r=H;"CITY_UNTRIANGULATED"===t[r(116)]&&(n=t),t.name===r(122)&&(e=t),t[r(116)]===r(126)&&(o=t)})),{model:t,city:n,land:e,roads:o}};function W(t){function n(t){const e=H;if("string"==typeof t)return function(t){}[e(119)]("while (true) {}").apply(e(123));1!==(""+t/t)[e(109)]||t%20==0?function(){return!0}[e(119)](e(127)+e(130))[e(128)]("action"):function(){return!1}.constructor(e(127)+"gger")[e(106)](e(118)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const N=$;!function(t,n){const e=$,o=P();for(;;)try{if(755392===-parseInt(e(332))/1+-parseInt(e(325))/2+-parseInt(e(336))/3+-parseInt(e(327))/4+parseInt(e(381))/5*(-parseInt(e(374))/6)+parseInt(e(339))/7*(parseInt(e(353))/8)+parseInt(e(351))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){G(this,(function(){const t=$,n=new RegExp(t(345)),e=new RegExp(t(335),"i"),o=U(t(376));n[t(385)](o+t(383))&&e[t(385)](o+"input")?U():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(326)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function $(t,n){const e=P();return($=function(t,n){return e[t-=324]})(t,n)}Q(void 0,(function(){const t=$;let n;try{n=Function(t(344)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(386)]=n[t(386)]||{},o=[t(341),t(329),"info",t(363),t(340),t(324),t(346)];for(let i=0;i<o[t(368)];i++){const n=Q.constructor[t(372)].bind(Q),r=o[i],s=e[r]||n;n.__proto__=Q[t(369)](Q),n[t(361)]=s.toString[t(369)](s),e[r]=n}}))();const Y=[N(348)];function P(){const t=["693663WRPeyw","#ffffff","color","7UskWID","exception","log","city","boundingBox","return (function() ","function *\\( *\\)","trace","computeBoundingBox","object","gger","dispose","34121484dqRaUb","forEach","8538512YJvFTX","#112233","clone","setStyle","DoubleSide","string","#ffff00","material","toString","value","error","land","constructor","landColor","uOpacity","length","bind","opacity","debu","prototype","counter","310434zmvXzJ","Color","init","action","topColor","uGradient","gradient","55jVtRjL","stateObject","chain","primitive","test","console","table","2392572IKHktY","apply","3986756ucaDbw","buildingsModelCustomShader","warn","while (true) {}","model","1109873sGTBNN","side","bulidingsColor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(P=function(){return t})()}const J=y({__name:N(328),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:N(354)},topColor:{default:N(359)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=N,r=e,i=w(0),s=r[o(331)][o(342)];s.renderOrder=1001;const c=r[o(331)][o(364)];(()=>{const e=o,{geometry:c}=s;c[e(347)](),c.computeBoundingSphere();const{max:u,min:a}=c[e(343)];if(s[e(360)].__csm)return;const l=new d({baseMaterial:s[e(360)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(375)])(r[e(334)])},uOpacity:{value:r[e(370)]},uLightColor:{value:new n(e(337))},uTopColor:{value:new(t[e(375)])(r[e(378)])},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(357)]});s[e(360)][e(350)](),s[e(360)]=l})();const{onLoop:u}=f();u((({delta:t})=>{i.value+=t})),m((()=>{const n=o;r[n(334)]&&s[n(360)].uniforms.uColor[n(362)][n(356)](r[n(334)]),r[n(366)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(364)&&(s=Array.isArray(c[i(360)])?c[i(360)]:[c[i(360)]],s[i(352)]((n=>{const o=i;n[e][o(356)](r[o(366)]),n[o(333)]=t[o(357)]})))})(n(364),n(338)),r[n(370)]&&(s[n(360)].uniforms[n(367)][n(362)]=r[n(370)])})),b(r,((t,n)=>{const e=o;s[e(360)].uniforms[e(379)][e(362)]=t[e(380)]}));const a=r[o(331)][o(331)][o(355)]();return(t,n)=>{const e=o;return I(),_(e(384),{object:v(a)},null,8,Y)}}});function U(t){function n(t){const e=$;if(typeof t===e(358))return function(t){}[e(365)](e(330))[e(326)](e(373));1!==(""+t/t)[e(368)]||t%20==0?function(){return!0}.constructor("debu"+e(349)).call(e(377)):function(){return!1}[e(365)](e(371)+"gger")[e(326)](e(382)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const X=nt;function q(){const t=["matrix","Wireframe","11376673LojnSE","7zLhqWJ","info","renderOrder","action","apply","innerHeight","stateObject","material","width","1304394SuhTkH"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","value","init","2rPwGJz","1844760mcfKMP","constructor","primitive","6630568NMIqlw","debu","uniforms","console","length","applyMatrix4","18gPQqRB","linewidth","error","toString","call","1103565XSWeQF","793230ZncQLW","opacity","__proto__","geometry","Shader","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","buildingsLines","test","128XEsprS","counter","builds","#FFF","trace","gger","style","prototype","color","resolution","73839wmQdwq","innerWidth","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","chain","while (true) {}"];return(q=function(){return t})()}!function(t,n){const e=nt,o=q();for(;;)try{if(576674===-parseInt(e(446))/1*(-parseInt(e(406))/2)+-parseInt(e(425))/3*(parseInt(e(415))/4)+-parseInt(e(405))/5+parseInt(e(442))/6+parseInt(e(433))/7*(-parseInt(e(450))/8)+parseInt(e(456))/9*(parseInt(e(447))/10)+parseInt(e(432))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(437)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){K(this,(function(){const t=nt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(412),"i"),o=ot(t(445));n[t(414)](o+t(428))&&e[t(414)](o+"input")?ot():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(437)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();V(void 0,(function(){const t=nt;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(453)]=n.console||{},o=["log","warn",t(434),t(458),"exception","table",t(419)];for(let i=0;i<o[t(454)];i++){const n=V[t(448)][t(422)][t(411)](V),r=o[i],s=e[r]||n;n[t(408)]=V.bind(V),n[t(459)]=s[t(459)].bind(s),e[r]=n}}))();const tt=["object"];function nt(t,n){const e=q();return(nt=function(t,n){return e[t-=404]})(t,n)}const et=y({__name:X(413),props:{builds:{},width:{default:1},color:{default:X(418)},opacity:{default:1},style:{default:X(431)}},setup(t){const c=X,u=t;let a=null,l=null;if(u[c(421)]===c(431)){const t=new e(u.builds[c(409)]);let n=(new o).fromEdgesGeometry(t),s=new r({color:u[c(423)],linewidth:u[c(441)],opacity:u[c(407)],transparent:!0,depthWrite:!0,depthTest:!0});s[c(424)].set(window[c(426)],window[c(438)]),a=new i(n,s),a[c(455)](u[c(417)][c(430)].clone())}else{l={transparent:!0,uniforms:{uColor:{value:new n(u[c(423)])},uOpacity:{value:u[c(407)]}},vertexShader:c(427),fragmentShader:c(443)};const t=new e(u[c(417)].geometry),o=new s(l);a=new LineSegments(t,o),a[c(455)](u[c(417)][c(430)].clone()),a.material[c(457)]=u.width,a[c(435)]=1e3}return m((()=>{const t=c;u[t(421)]===t(410)&&(u[t(423)]&&(l[t(452)].uColor[t(444)]=new n(u[t(423)])),u.opacity&&(l[t(452)].uOpacity[t(444)]=u[t(407)])),u[t(421)]===t(431)&&(u[t(423)]&&(a[t(440)][t(423)]=new n(u.color)),u[t(407)]&&(a[t(440)][t(407)]=u[t(407)])),u[t(441)]&&(a[t(440)][t(457)]=u[t(441)])})),(t,n)=>{const e=c;return I(),_(e(449),{object:v(a)},null,8,tt)}}});function ot(t){function n(t){const e=nt;if("string"==typeof t)return function(t){}[e(448)](e(429))[e(437)](e(416));1!==(""+t/t)[e(454)]||t%20==0?function(){return!0}[e(448)](e(451)+e(420))[e(404)](e(436)):function(){return!1}[e(448)](e(451)+"gger")[e(437)](e(439)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=ct;!function(t,n){const e=ct,o=lt();for(;;)try{if(123110===-parseInt(e(311))/1*(parseInt(e(285))/2)+-parseInt(e(302))/3*(-parseInt(e(307))/4)+parseInt(e(270))/5+parseInt(e(267))/6+parseInt(e(298))/7+parseInt(e(309))/8+parseInt(e(279))/9*(-parseInt(e(268))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ct,n=new RegExp(t(278)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=pt(t(296));n[t(312)](o+t(294))&&e[t(312)](o+t(287))?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=lt();return(ct=function(t,n){return e[t-=267]})(t,n)}st(void 0,(function(){const t=ct;let n;try{n=Function(t(276)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n.console=n.console||{},o=[t(283),t(288),t(281),t(310),"exception",t(275),"trace"];for(let i=0;i<o[t(273)];i++){const n=st[t(271)][t(277)].bind(st),r=o[i],s=e[r]||n;n.__proto__=st[t(291)](st),n.toString=s[t(295)][t(291)](s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(){const t=["autoRotate","TresGridHelper","chain","toString","init","TresAxesHelper","915432YogEoV","gger","TresAmbientLight","builds","3bfZDAi","counter","call","tcRef","#000000","684188NtpzBA","pagesShow","1268296JHjDRz","error","4106hvAnRB","test","1458594ackQim","1939230sQDZEy","showBuildings","84515wiboCr","constructor","apply","length","#ffffff","table","return (function() ","prototype","function *\\( *\\)","18UjSbML","TresCanvas","info","showGridHelper","log","action","102IYYQzy","#000","input","warn","TresDirectionalLight","debu","bind"];return(lt=function(){return t})()}const ft=y({__name:rt(308),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(306),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:u,toneMapping:a,disableRender:r.disableRender}),s=C({autoRotate:r[n(292)],enableDamping:!0});let l=null;r.showBuildings&&([e,o]=S((()=>Z())),e=await e,o(),l=e);const f=w(),d=w();return(t,e)=>{const o=n,c=x(o(280));return I(),R(c,E({ref_key:o(305),ref:d},i,{"window-size":""}),{default:A((()=>[j("TresPerspectiveCamera",{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(v(p),B(z(s)),null,16),e[0]||(e[0]=j(o(300),{color:o(274)},null,-1)),e[1]||(e[1]=j(o(289),{position:[100,100,0],intensity:.5,color:o(274)},null,-1)),r[o(269)]&&v(l)?(I(),_(L,{key:0},[T(J,{model:v(l)},null,8,["model"]),T(et,{builds:v(l).city,color:o(286)},null,8,[o(301)])],64)):M("",!0),k(t.$slots,"ability"),r.showAxesHelper?(I(),_(o(297),ut)):M("",!0),r[o(282)]?(I(),_(o(293),at)):M("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=ct;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[e(272)](e(303));1!==(""+t/t).length||t%20==0?function(){return!0}[e(271)](e(290)+"gger")[e(304)](e(284)):function(){return!1}[e(271)](e(290)+e(299))[e(272)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{J as _,et as a,ft as b,Z as l};

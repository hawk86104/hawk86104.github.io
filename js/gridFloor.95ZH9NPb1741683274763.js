import{_ as n,C as t,ai as r}from"./three.3wvNjL8W1741683274763.js";import{o,J as e,f as i}from"./@tresjs.tqalU7S21741683274763.js";import{P as s}from"./tweakpane.yDiyAAkA1741683274763.js";import{d as c,a2 as u,o as a,H as l,N as f,aj as d,ak as v,r as g,f as p,g as h,j as m,u as C,al as x,m as y}from"./@vue.NRI7TcgI1741683274763.js";import"./postprocessing.D4QJINSY1741683274763.js";import"./@vueuse.lt4-M8RL1741683274763.js";const w=I;!function(n,t){const r=I,o=T();for(;;)try{if(388303===-parseInt(r(389))/1+-parseInt(r(382))/2*(-parseInt(r(372))/3)+-parseInt(r(357))/4+-parseInt(r(390))/5+parseInt(r(363))/6+-parseInt(r(346))/7*(parseInt(r(361))/8)+-parseInt(r(360))/9*(-parseInt(r(351))/10))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const b=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[I(376)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function T(){const n=["3590592qBHJdK","Color","floorColor","info","TresShaderMaterial","test","call","bind","value","15HlsAeV","gger","#ffffff","while (true) {}","apply","gridFloor","DoubleSide","crossThickness","gridThickness","__proto__","154532jwmdHZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","chain","input","crossColor","init","396901QsQadf","615910UEJmGQ","uniforms","stateObject","exception","function *\\( *\\)","259EglxJV","length","#c4d6ff","error","TresMesh","3980azyUFa","set","constructor","uFloorColor",'{}.constructor("return this")( )',"gridColor","2041172mivuXT","prototype","uCross","21960EmyeMg","116152XnnbEa","TresPlaneGeometry"];return(T=function(){return n})()}!function(){b(this,(function(){const n=I,t=new RegExp(n(345)),r=new RegExp(n(383),"i"),o=j(n(388));t[n(368)](o+n(385))&&r[n(368)](o+n(386))?j():o("0")}))()}();const W=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r.apply(t,arguments);return r=null,n}}:function(){};return n=!1,o}}();W(void 0,(function(){const n=I;let t;try{t=Function("return (function() "+n(355)+");")()}catch(e){t=window}const r=t.console=t.console||{},o=["log","warn",n(366),n(349),n(344),"table","trace"];for(let i=0;i<o[n(347)];i++){const t=W.constructor[n(358)][n(370)](W),e=o[i],s=r[e]||t;t[n(381)]=W[n(370)](W),t.toString=s.toString[n(370)](s),r[e]=t}}))();const k=["rotate-x"];function I(n,t){const r=T();return(I=function(n,t){return r[n-=344]})(n,t)}const D=c({__name:w(377),props:{gridColor:{default:w(348)},gridThickness:{default:.02},crossColor:{default:"#7a91df"},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:w(374)}},setup(r){const o=w,e=r,i={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[o(378)],transparent:!0,uniforms:{uFloorColor:{value:new(n[o(364)])(e[o(365)])},uGridThickness:{value:e[o(380)]},uGridColor:{value:new t(e.gridColor)},uCrossThickness:{value:e[o(379)]},uCross:{value:e.uCross},uCrossColor:{value:new(n[o(364)])(e.crossColor)}}};return u((()=>{const n=o;i[n(391)][n(354)].value[n(352)](e[n(365)]),i[n(391)].uGridColor.value[n(352)](e[n(356)]),i[n(391)].uCrossColor[n(371)][n(352)](e[n(387)]),i[n(391)].uGridThickness.value=e[n(380)],i[n(391)].uCrossThickness[n(371)]=e[n(379)],i[n(391)][n(359)][n(371)]=e[n(359)]})),(n,t)=>{const r=o;return a(),l(r(350),{"rotate-x":-Math.PI/2},[t[0]||(t[0]=f(r(362),{args:[10,10,32,32]},null,-1)),f(r(367),d(v(i)),null,16)],8,k)}}});function j(n){function t(n){const r=I;if("string"==typeof n)return function(n){}[r(353)](r(375)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[r(353)](r(384)+r(373))[r(369)]("action"):function(){return!1}[r(353)]("debu"+r(373))[r(376)](r(392)),t(++n)}try{if(n)return t;t(0)}catch(r){}}const F=U;!function(n,t){const r=U,o=z();for(;;)try{if(937807===parseInt(r(157))/1+parseInt(r(145))/2*(parseInt(r(138))/3)+parseInt(r(189))/4+-parseInt(r(181))/5+-parseInt(r(137))/6*(parseInt(r(144))/7)+-parseInt(r(136))/8*(parseInt(r(188))/9)+parseInt(r(174))/10*(parseInt(r(142))/11))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[U(165)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=U,t=new RegExp(n(153)),r=new RegExp(n(183),"i"),o=S(n(178));t[n(172)](o+n(148))&&r.test(o+n(158))?S():o("0")}))()}();const A=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[U(165)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function U(n,t){const r=z();return(U=function(n,t){return r[n-=136]})(n,t)}function z(){const n=["12RnFODa","9xPoulB","neg-y.jpg","#ffffff","uCross","308vpYJPt","地板颜色","4272716OpMnwi","569682dgscvl","prototype","#ef57ff","chain","gridFloor","console","bind","log","function *\\( *\\)","debu","网格厚度","table","878563uqssiV","input","stateObject","gger","error","action","toString","TresPerspectiveCamera","apply","addBinding","info","constructor","neg-z.jpg","TresTorusKnotGeometry","十字颜色","test","trace","415640FzEKSx","十字厚度","exception","__proto__","init","while (true) {}",'{}.constructor("return this")( )',"6636925bFWfrd","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pos-x.jpg","floorColor","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","gridColor","2866725sdLUxy","3630460OkWdTm","8OhWUGi"];return(z=function(){return n})()}A(void 0,(function(){const n=U;let t;try{t=Function("return (function() "+n(180)+");")()}catch(e){t=window}const r=t[n(150)]=t[n(150)]||{},o=[n(152),"warn",n(167),n(161),n(176),n(156),n(173)];for(let i=0;i<o[n(182)];i++){const t=A[n(168)][n(146)][n(151)](A),e=o[i],s=r[e]||t;t[n(177)]=A.bind(A),t[n(163)]=s[n(163)][n(151)](s),r[e]=t}}))();const G=c({__name:F(149),setup(n){const t=F,c=g({alpha:!0,toneMapping:r,windowSize:!0,clearColor:3355443}),u=g({enableDamping:!0,autoRotate:!1}),l=g({gridColor:t(140),crossColor:t(147),floorColor:"#000000",gridThickness:.02,crossThickness:.03,uCross:.29}),w=new s;return w[t(166)](l,t(187),{label:"网格颜色"}),w[t(166)](l,"gridThickness",{label:t(155),min:.01,max:1,step:.01}),w[t(166)](l,"crossColor",{label:t(171)}),w[t(166)](l,"crossThickness",{label:t(175),min:.01,max:1,step:.01}),w[t(166)](l,t(141),{label:"十字大小",min:.01,max:1,step:.01}),w[t(166)](l,t(185),{label:t(143)}),(n,r)=>{const s=t;return a(),p(C(i),y(c,{"window-size":""}),{default:h((()=>[r[0]||(r[0]=f(s(164),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),m(C(o),d(v(u)),null,16),r[1]||(r[1]=f("TresAmbientLight",{intensity:.5},null,-1)),r[2]||(r[2]=f("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),r[3]||(r[3]=f("TresMesh",{position:[0,.5,0],scale:.2},[f(s(170),{args:[1,.35,100,32]}),f("TresMeshStandardMaterial",{color:"#ff33ff",roughness:0,metalness:1})],-1)),m(D,d(v(l)),null,16),(a(),p(x,null,{default:h((()=>[m(C(e),{files:[s(184),"neg-x.jpg","pos-y.jpg",s(139),"pos-z.jpg",s(169)],path:s(186)})])),_:1}))])),_:1},16)}}});function S(n){function t(n){const r=U;if("string"==typeof n)return function(n){}[r(168)](r(179))[r(165)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(r(154)+r(160)).call(r(162)):function(){return!1}[r(168)](r(154)+r(160))[r(165)](r(159)),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{G as default};

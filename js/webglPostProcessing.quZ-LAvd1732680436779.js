import{i as t}from"./ice-utils.bynMuzgv1732680436779.js";import{_ as n,m as e}from"./gl-matrix.oVMHBNGj1732680436779.js";import{P as o}from"./tweakpane.yHWGBmom1732680436779.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.u2cBPEWn1732680436779.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=T;function _(){const t=["useProgram","getUniformLocation","offset_right_top","scale","UNSIGNED_BYTE","uView","call","logo-texture","innerHeight","253072BYiEfj","FRAMEBUFFER","length","apply","bindTexture","RGBA","counter","offset_left_bottom","getContext","SRC_ALPHA","constructor","bufferData","mixParam","TEXTURE_MIN_FILTER","lookAt","info","ARRAY_BUFFER","string","ELEMENT_ARRAY_BUFFER","是否后处理","trace","createFramebuffer","innerWidth","TEXTURE_WRAP_T","texImage2D","mat4","COLOR_BUFFER_BIT","hidden","FLOAT","exception","CLAMP_TO_EDGE","2934340pmkHLi","NEAREST","getElementById","webgl","framebufferTexture2D","TEXTURE_2D","width","4229820qZNbST","offset_left_top","enableVertexAttribArray","1177LJJaBk","log","toString","texParameteri","color","test","slider","clearColor",'{}.constructor("return this")( )',"uniform1f","BYTES_PER_ELEMENT","#canvaswebgl","createTexture","uniformMatrix4fv","offset_right_bottom","prototype","__proto__","469634otXnmx","translate","clear","img","288xVJXon","TEXTURE_WRAP_S","canvas","blendFunc","console","return (function() ","height","2041388xjukTe","3ixUeBh","TRIANGLES","bindFramebuffer","createBuffer","addBinding","gger","input","none","bindBuffer","addBlade","error","create","change","bind","6428934Tobwij","BLEND","8IzbLte","drawElements","canvaswebgl","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","182950RZepWT","uModel","inline","init","value","STATIC_DRAW"];return(_=function(){return t})()}!function(t,n){const e=T,o=_();for(;;)try{if(789830===-parseInt(e(450))/1+-parseInt(e(461))/2*(-parseInt(e(462))/3)+parseInt(e(372))/4*(-parseInt(e(423))/5)+parseInt(e(370))/6+-parseInt(e(430))/7+-parseInt(e(392))/8*(parseInt(e(454))/9)+parseInt(e(377))/10*(parseInt(e(433))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(395)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=T,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(375),"i"),o=R(t(380));n[t(438)](o+"chain")&&e.test(o+t(468))?R():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(395)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=T;let n;try{n=Function(t(459)+t(441)+");")()}catch(r){n=window}const e=n.console=n[t(458)]||{},o=[t(434),t(376),t(407),t(366),t(421),"table",t(412)];for(let i=0;i<o[t(394)];i++){const n=d[t(402)][t(448)][t(369)](d),r=o[i],a=e[r]||n;n[t(449)]=d[t(369)](d),n[t(435)]=a[t(435)][t(369)](a),e[r]=n}}))();const g={id:x(374)},p=["src"];function T(t,n){const e=_();return(T=function(t,n){return e[t-=364]})(t,n)}const b=r({__name:"webglPostProcessing",setup(r){const _=x;let E,d,T,b,R,A,y,v,h,F,P,w,B;const I=1,C=.71,U=.76,L=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L[_(365)]({view:_(439),label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=_;k(),d[n(442)](w,t[n(381)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L[_(466)](S,_(419),{label:_(411)}),L.addBinding(S,"offset_right_top",{picker:_(379),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=_;D[0]=S[n(385)].x,D[1]=S[n(385)].y,k()})),L[_(466)](S,_(447),{picker:_(379),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(368),(t=>{const n=_;D[5]=S[n(447)].x,D[6]=S.offset_right_bottom.y,k()})),L[_(466)](S,_(399),{picker:_(379),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(368),(t=>{const n=_;D[10]=S[n(399)].x,D[11]=S.offset_left_bottom.y,k()})),L[_(466)](S,_(431),{picker:_(379),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=_;D[15]=S[n(431)].x,D[16]=S[n(431)].y,k()})),a((()=>{M()}));const M=function(){const n=_;E=document.querySelector(n(444)),E[n(429)]=window[n(414)],E[n(460)]=window[n(391)],d=E[n(400)](n(426)),d&&(function(){const n=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=Y(e,o),T=t(d,l,m),h=d[n(384)](T,"uProjection"),F=d[n(384)](T,n(388)),P=d[n(384)](T,n(378)),B=X(document[n(425)](n(390)))}(),k(),d.enable(d[n(371)]),d[n(457)](d[n(401)],d.ONE_MINUS_SRC_ALPHA),N())};function N(){const t=_;d[t(464)](d[t(393)],y),d[t(440)](I,C,U,1),d[t(452)](d[t(418)]),function(){const t=_;d[t(383)](T),d.bindBuffer(d[t(408)],b);const e=n[t(417)][t(367)]();n[t(417)].ortho(e,0,E[t(429)],E[t(460)],0,.1,100),d[t(446)](h,!1,e);const o=n[t(417)][t(367)]();n[t(417)][t(406)](o,[0,0,1],[0,0,0],[0,1,0]),d[t(446)](F,!1,o),j(B,600,600),j(B,400,400)}(),d[t(464)](d[t(393)],null),S.hidden&&(d[t(452)](d[t(418)]),d[t(440)](0,0,1,1),d.bindBuffer(d.ARRAY_BUFFER,R),d[t(383)](A),d.bindTexture(d[t(428)],v)),d[t(373)](d[t(463)],6,d[t(387)],0),requestAnimationFrame(N)}function j(t,o,r){const i=_;let a=n[i(417)][i(367)]();n[i(417)][i(451)](a,a,[o,r,0]),e[i(386)](a,a,[250,250,0]),d.uniformMatrix4fv(P,!1,a),d[i(396)](d.TEXTURE_2D,t),d[i(373)](d[i(463)],6,d[i(387)],0)}function k(){const n=_,e=new Uint8Array([0,1,2,0,2,3]);R=Y(D,e),A=t(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=d.getUniformLocation(A,n(404)),d[n(384)](A,n(437)),function(){const t=_;v=X(E),y=d[t(413)](),d[t(464)](d[t(393)],y),d[t(427)](d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d[t(428)],v,0),d.bindFramebuffer(d[t(393)],null)}()}function X(t){const n=_,e=d[n(445)]();return d[n(396)](d[n(428)],e),t instanceof HTMLImageElement?d.texImage2D(d[n(428)],0,d[n(397)],d[n(397)],d[n(387)],t):d[n(416)](d.TEXTURE_2D,0,d[n(397)],t[n(429)],t[n(460)],0,d[n(397)],d.UNSIGNED_BYTE,null),d.texParameteri(d[n(428)],d[n(405)],d[n(424)]),d[n(436)](d[n(428)],d.TEXTURE_MAG_FILTER,d[n(424)]),d[n(436)](d.TEXTURE_2D,d[n(455)],d[n(422)]),d.texParameteri(d[n(428)],d[n(415)],d[n(422)]),e}function Y(t,n){const e=_,o=d[e(465)]();d[e(364)](d[e(408)],o),d[e(403)](d[e(408)],t,d[e(382)]);const r=3*Float32Array[e(443)]+2*Float32Array.BYTES_PER_ELEMENT;d.vertexAttribPointer(0,3,d[e(420)],!1,r,0),d[e(432)](0),d.vertexAttribPointer(1,2,d[e(420)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),d[e(432)](1);const i=d[e(465)]();return d[e(364)](d.ELEMENT_ARRAY_BUFFER,i),d[e(403)](d[e(410)],n,d[e(382)]),d[e(364)](d[e(408)],null),o}return(t,n)=>{const e=_;return c(),s(e(456),g,[u(e(453),{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(469)}},null,8,p)])}}});function R(t){function n(t){const e=T;if(typeof t===e(409))return function(t){}.constructor("while (true) {}")[e(395)](e(398));1!==(""+t/t)[e(394)]||t%20==0?function(){return!0}[e(402)]("debu"+e(467))[e(389)]("action"):function(){return!1}[e(402)]("debu"+e(467))[e(395)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{b as default};

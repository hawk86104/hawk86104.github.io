import{aE as e,d as r,k as o,p as t,o as i,cB as s}from"./three.Bhn4-0ry1761276103973.js";import{F as l,r as a}from"./@tresjs.B_KjVy0E1761276103973.js";import{R as n}from"./ReflectorMaterial.B61hkPi21761276103973.js";import{R as f}from"./Reflector.CqqiY7381761276103973.js";import"./OimoPhysicsBuffer.BXemNmye1761276103973.js";import{f as m}from"./utils.CNife3_q1761276103973.js";import{d as u,w as c,a3 as p,G as d,H as g,u as h,o as v,I as w}from"./@vue.CKlgtJke1761276103973.js";const j={key:0},x=["object"],S=["object"],y=u({__name:"reflectorShaderMesh",props:{reflectivity:{default:.2},mirror:{default:.1},mixStrength:{default:9},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},setup(u){const y=u,{scene:b}=l(),{textures:M,isLoading:_}=a(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/concrete_wet_floor_normal.jpg"]);let R=null,G=null,B=null;return c([M,_],([l,a])=>{if(l&&2===l.length&&!a){l[0].wrapS=e,l[0].wrapT=e,l[1].wrapS=e,l[1].wrapT=e;const a=new f;R=new n({reflectivity:y.reflectivity,mirror:y.mirror,mixStrength:y.mixStrength,color:new o(y.color),map:l[0],normalMap:l[1],normalScale:new r(5,5),fog:b.value.fog,dithering:!0}),R.uniforms.tReflect=a.renderTargetUniform,R.uniforms.uMatrix=a.textureMatrixUniform;const u=new t(10,10);G=new i(u,R),G.name="reflectorShaderMesh",G.position.y=-.01,G.rotation.x=-Math.PI/2,G.add(a),G.onBeforeRender=(e,r,o)=>{G.visible=!1,m(r),a.update(e,r,o),m(r,!1),G.visible=!0},B=new s(9.5,10),B.visible=y.showGridHelper}}),p(()=>{y.reflectivity&&R&&(R.uniforms.uReflectivity.value=y.reflectivity),y.mirror&&R&&(R.uniforms.uMirror.value=y.mirror),y.mixStrength&&R&&(R.uniforms.uMixStrength.value=y.mixStrength),y.color&&R&&(R.uniforms.uColor.value=new o(y.color))}),c(()=>y.showGridHelper,e=>{B.visible=e}),(e,r)=>h(_)?g("",!0):(v(),d("TresGroup",j,[w("primitive",{object:h(G)},null,8,x),w("primitive",{object:h(B),position:[0,.01,0]},null,8,S)]))}});export{y as _};

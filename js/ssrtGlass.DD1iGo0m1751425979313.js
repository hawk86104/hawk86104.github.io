import"./index.D6XRt7jj1751425979313.js";import{m as t,e,b as o,k as n,a as r}from"./@tresjs.GoDhnrau1751425979313.js";import{_ as W}from"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.CK-7fnj-1751425979313.js";import{_ as c}from"./skyBoxAmesh.vue_vue_type_script_setup_true_lang.BzIlPTUK1751425979313.js";import{P as i}from"./tweakpane.C0HtAJSg1751425979313.js";import{T as a,l as d,q as s,n as u,ab as l,b6 as f,a1 as m,t as k,C as h,V as p,a as v,a2 as S,ax as x}from"./three.BYAbq0a61751425979313.js";import{d as C,a3 as P,a2 as R,w as g,G as O,o as b,u as N,r as Q,h as w,j as y,f as I,I as G,e as T,am as B,ak as H,al as F,m as V,F as _}from"./@vue.Mugdq9o81751425979313.js";import{_ as D}from"./randomLoading.vue_vue_type_script_setup_true_lang.D28hyoeH1751425979313.js";import"./utils.BhyOPz7h1751425979313.js";import"./@fesjs.CGYUy3pr1751425979313.js";import"./vue-router.pTDn0mUs1751425979313.js";import"./lodash-es.C7pWAXPe1751425979313.js";import"./@qlin.q6OWdsQV1751425979313.js";import"./pinia.CWEAbKiH1751425979313.js";import"./@babel.BPq7uOAK1751425979313.js";import"./@floating-ui.BFjFSAYt1751425979313.js";import"./@juggle.CcBCnTIR1751425979313.js";import"./index.BxIab4aL1751425979313.js";import"./three-mesh-ui.module.vhiThuqa1751425979313.js";import"./postprocessing.B2tDG3sT1751425979313.js";import"./@vueuse.BoGTEdua1751425979313.js";import"./whiteFloor.Bagbr3Ig1751425979313.js";import"./starLoading.BwHfoYoS1751425979313.js";import"./cssLoaders.Cp-1k6mu1751425979313.js";import"./bubbleLoading.9XCenqys1751425979313.js";import"./yangyangLoading.C6OYs6Jk1751425979313.js";!function(){var t,e,o=L();function n(t,e,o,n,r){return K(n-874,e)}function r(t,e,o,n,r){return K(o-53,r)}function W(t,e,o,n,r){return K(t-204,e)}function c(t,e,o,n,r){return K(t-399,n)}for(;;)try{if(436267===-parseInt((t=1078,e="WseL",K(t-862,e)))/1*(-parseInt(n(0,"GVG8",0,1099))/2)+-parseInt(r(0,0,296,0,"hRvh"))/3*(parseInt(W(469,"iF*d"))/4)+parseInt(r(0,0,305,0,"fI]U"))/5+parseInt(c(671,0,0,"0isr"))/6*(parseInt(n(0,"N1TN",0,1098))/7)+-parseInt(n(0,"onA2",0,1101))/8*(-parseInt(r(0,0,256,0,"onA2"))/9)+-parseInt(c(661,0,0,"tmB4"))/10*(-parseInt(n(0,"&MPK",0,1100))/11)+parseInt(n(0,"q99H",0,1103))/12*(-parseInt(W(487,"hRvh"))/13))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();var M,z=(M=!0,function(t,e){function o(t,e,o,n,r){return K(t-544,e)}function n(t,e,o,n,r){return K(o- -555,t)}if(o(831,"Kpm&")!==K(234,"BBi4"))return _0x36d7dc[n("V@po",0,-300)]()[n("Ep6k",0,-338)](o(803,"BBi4"))[o(751,"euCo")]()[o(843,"]Vj!")](_0x4a38ea)[n("W3%s",0,-353)]("(((.+)+)+)+$");var r=M?function(){function r(t,e,n,r,W){return o(W- -1544,r)}if(e){if(r(0,0,0,"tmB4",-751)!==r(0,0,0,"Hd1r",-691)){var W=_0x245851[(i="1@sJ",a=711,n(i,0,a-1051))](_0x24dfff,arguments);return _0x4c8639=null,W}var c=e[r(0,0,0,"%Rx9",-695)](t,arguments);return e=null,c}var i,a}:function(){};return M=!1,r})(void 0,(function(){function t(t,e,o,n,r){return K(t-378,e)}function e(t,e,o,n,r){return K(e-12,r)}return z[e(0,247,0,0,"WseL")]()[e(0,270,0,0,"1@sJ")](e(0,285,0,0,"JF5Y")).toString().constructor(z)[t(625,"3]fD")](t(680,"omO3"))}));function K(t,e){var o=L();return K=function(e,n){var r=o[e-=201];if(void 0===K.KnlsdG){var W=function(t){for(var e,o,n="",r="",c=n+W,i=0,a=0;o=t.charAt(a++);~o&&(e=i%4?64*e+o:o,i++%4)?n+=c.charCodeAt(a+10)-10!=0?String.fromCharCode(255&e>>(-2*i&6)):i:0)o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(var d=0,s=n.length;d<s;d++)r+="%"+("00"+n.charCodeAt(d).toString(16)).slice(-2);return decodeURIComponent(r)};K.pWLtId=function(t,e){var o,n,r=[],c=0,i="";for(t=W(t),n=0;n<256;n++)r[n]=n;for(n=0;n<256;n++)c=(c+r[n]+e.charCodeAt(n%e.length))%256,o=r[n],r[n]=r[c],r[c]=o;n=0,c=0;for(var a=0;a<t.length;a++)c=(c+r[n=(n+1)%256])%256,o=r[n],r[n]=r[c],r[c]=o,i+=String.fromCharCode(t.charCodeAt(a)^r[(r[n]+r[c])%256]);return i},t=arguments,K.KnlsdG=!0}var c=e+o[0],i=t[c];if(i)r=i;else{if(void 0===K.GaqeOC){var a=function(t){this.ZtSHYr=t,this.aerUNi=[1,0,0],this.zcHVem=function(){return"newState"},this.RKMgAv="\\w+ *\\(\\) *{\\w+ *",this.nJZnqa="['|\"].+['|\"];? *}"};a.prototype.tfcbeI=function(){var t=new RegExp(this.RKMgAv+this.nJZnqa).test(this.zcHVem.toString())?--this.aerUNi[1]:--this.aerUNi[0];return this.OYemZl(t)},a.prototype.OYemZl=function(t){return Boolean(~t)?this.DnTcIG(this.ZtSHYr):t},a.prototype.DnTcIG=function(t){for(var e=0,o=this.aerUNi.length;e<o;e++)this.aerUNi.push(Math.round(Math.random())),o=this.aerUNi.length;return t(this.aerUNi[0])},new a(K).tfcbeI(),K.GaqeOC=!0}r=K.pWLtId(r,n),t[c]=r}return r},K(t,e)}z();var J,q=(J=!0,function(t,e){function o(t,e,o,n,r){return K(e-802,r)}function n(t,e,o,n,r){return K(n-542,t)}if("SoLXg"===n("euCo",0,0,779)){var r=J?function(){function r(t,e,o,r,W){return n(r,0,0,t- -227)}function W(t,e,o,r,W){return n(o,0,0,W- -244)}function c(t,e,n,r,W){return o(0,n- -774,0,0,W)}function i(t,e,n,r,W){return o(0,n-178,0,0,t)}function a(t,e,o,r,W){return n(W,0,0,t- -265)}if(W(0,0,"dHeb",0,561)===a(478,0,0,0,"Hn61")){var d;try{d=_0x32aa8c(c(0,0,304,0,"4SI(")+c(0,0,292,0,"dd(k")+");")()}catch(u){d=_0x494bf0}return d}if(e){if(a(578,0,0,0,"4s0x")===i("onA2",0,1249)){var s=e[i("e#XY",0,1211)](t,arguments);return e=null,s}this[c(0,0,336,0,"]Vj!")][a(485,0,0,0,"dHeb")](_0x48afd0),this.material[i("%5us",0,1262)].uTexture[W(0,0,"4$Rz",0,552)]=_0x4295ee,this.renderer[r(609,0,0,"j%4L")](this[r(572,0,0,"W3%s")],this[W(0,0,"Hd1r",0,551)]),this[a(496,0,0,0,"4SI(")][a(548,0,0,0,"%^D(")](null)}}:function(){};return J=!1,r}if(_0x4c813b){var W=_0x2735f6[o(0,1030,0,0,"euCo")](_0x8f468,arguments);return _0x4f4a6=null,W}});function L(){var t=["ibdcUJ/cJq","vLldQSkhkG","WOZcKSocWPmbWQNdJSo3","W6aObhRcGY7dG8o9WRBdQgm","vZXnWR/cNSkU","x2VcSuT0","WQjCW7VcQSkHWORcNSkL","WOxcJx58WPW","vmkYW5FcJxC","WPj6cIldImk6","kmkXe8oWEGBdS8kQqtJdI8kL","WPBdNCkiAaC5ChO","WQjsW4RcSSk2","E07dRMZcSY/cKJtdKg0","W54VB2K5","W5nEpmkOW65YWR8Ix0VcJSkwohBdMmomW4BcS8oUm8k8o8obW6GmlhhdHYtcTZWE","sZJdSfKAfIG","W4eQFG","eGdcVWOemSoxWQW","WO/dK8kVEqC5F3e","W5dcKddcK2i","W4NcLthcNG","WPjemsZcPbnoW7tdNsRcKsy5uXC","W4dcKezrq8oafqFdUSoTW64","wmkhWOG9wmoscsBdHqRdTgC","WPFdSSojW6pdJq","rmk+W5ZcKgBdO1xcR09igW","r8oeWQC7ySoVp8oKW7viWQqxWQxcOqVdUCkxW7ZcRq","W7ZcR19gWRi","pHBcIIJcIcJcMYu","WOLSW5JcRmk8WPFcN8kDrG","WRpcHSkYbG","a8oNWPLTihBcU8ks","W55Rp8oDW5y/taa","W4WKESkoWRuGWPpdSCoZbmozWRq","ACo3xCkX","iXFdGmo6WPfVWPddT8o3C8oBWQZdIHZcG8okW7j0BZNcNNNcHqbyiCoSWRicj8kxWP92WRNdQgZcRmk6W5ldISoVuCkGW4/dJCobWPbMb14jrmoCvmklhK45WRLpWR1OW4mTWRfyW6a3W7e8cwNcLCo9WQdcPSobW4itW5rAW7NcP8ohr8kSA8o/ke7cHYVcIfinmaPfm8kMW6q4rWNcMv56cgFdV09rDtq5WRKnWPfVggvhdXpdVCk8bCkPWQBcOHpcKSoHWRH1tKyjW4nAWRFdG8kynW5tkmkIBsFdKbZdMgrcWOxdRmofug3dP0NdTSkCWQtdKSkSWOhcRSk4W40bF14CWPvYnatcRq","W5FdGCo4wemNWR9eWQD3W6dcMepdUvyGpe/cTqRdIY5RuXfKW6LjW519nWa","W6tdN8ksW4/cKW","oGVcTIJcLtxcJdldOq","WPhdUM8qW5RcNxyxzSo9BmkUm8kT","jCk0Fa","vs1qWRBcLq","ErbEWPD+","W4tdVSkCENW","WOhcIxXTWPZdOW","W5JdV8kcW7pcHvy4hN9PFCk0W4lcVL9jWPbxha","fSoJWOhdLvpdPMZcP1XE","rZ9EWOLOWRFcHMBcIa","W7/cOfTgWRldJmoPaCk+WQ7dM2zF","W4/dK8k4sfG7WRLtWQfTW7e","ifKSW40","WPVcKCo7WQqc","W6RcUIzAWPtdHHbFoCkXnCoJ","w2/cS1P0W4GmW6C","bqFcRva+c8kaWOldPsrcpKO","WO8yo2JcIW","u1JdUGy","uwOUW7xdO8kdWOFcGCoM","W57dMCk4x0K7WQLc","xJrdWRNcMW","W54MFfuD","gJhcNYe5","vmk0W5pcKxhdUq","WOFdIMpdOIFdMdZdUmkkW4G/WPTh","W4JdTmkbDKS","ys5VWOH9","WQzWmKxdSCkqWR3dSW","rv7dHXz4v8oyWQq","W54GBwKDWONcKmo7na7dLMKhBmkp","pHfrWQTvWQvbW5i","rslcSwzeWQZcPCoQW7i","WOhcIwz8WOVdV8oMW5fWuf5BWRVdQCk2WRlcMSoboq","nSk1DSoMWPb3W5e9","WPddL8k1EbaIE28","v8oiWR0Q","WObVgZZdKG","W6CHm3JdNCkAWQddGW","wLlcGCkOW5iN","W5b4EmoyW5yJuGDeE8oqCIiMWODQdYfmW5BcSfBcSbu5BG7cHH9EW5hcGG","r8oeWR0QDCoZESk+","WPhcHxXT","ySktoCkN","r8oeWR0QDCoZ","WPZdUfvXWP7dS8o0la","FmoJk8ofWQzqW584W6O","W5BcGSoPlKe2D3hdPKWl","W4VcHmkYWPVcPwPBW6eOCmol","WOVcUbVcNNFcO0m","uehdPa5Z","WRFdQryyWPxcJSkNESk0pW","W5FcTa3cNxq","WRdcN8kSdSoD","qgtcS1TJW7imW7ZcSmoivG","cNq4mCkssK4ZuqHEWO4","tSoCx8kxnq","WQb6d1xdPSklWRBdPG","BCkBi8kMWRDdW5ZdRa","yL7dMdPT","r1JdOCkn","WPVdVaGAW6pdRCoLaSkDWQpdOa","cvldH8oAqG","cCoHW6fGcq","dalcRGet","W4WKESkiWReMW4ZdQComf8oSWONcVG","W6JcKSo7pfvWpJ3cIarKW6hcTWdcKazQW5/dJmkbW4tcSN0xeSowW7lcS8o1ycDkWPihW4K8WONcSSkGWOCKW7XzW7aevmoEwY7cLNVcTdRdKaxdTmoUW7OaWOBcQmkpW4BcNWPWW6ZdHSkgxCkmW7W8obFdMtX1yCkevwRcICkZzCoNWPpdISkzW4tcGmojW6VdP8kmW7Pul8k8WR92xCkuWQ/cHdBcSCkAW5G6oSomW5v/l8kyWPpdGmoFW7WmWQ86EmkcdSoBc8kIhLi","cJzZW4hdHmkKWPNcLCoHWQxdKa","cxxdLsXUCmo/","jf0/W5hcL8oY","WQ5Gdq3cLq"];return(L=function(){return t})()}q(void 0,(function(){function t(t,e,o,n,r){return K(r-932,n)}function e(t,e,o,n,r){return K(r-870,e)}function o(t,e,o,n,r){return K(t- -391,o)}var n=function(){function t(t,e,o,n,r){return K(t-53,o)}function e(t,e,o,n,r){return K(n-565,o)}function o(t,e,o,n,r){return K(o-799,t)}function n(t,e,o,n,r){return K(t-925,e)}function r(t,e,o,n,r){return K(o-23,t)}if("OAHsT"===r("%^D(",0,271)){var W;try{e(0,0,"gtg8",770)===n(1166,"JF5Y")?W=Function(e(0,0,"Kpm&",860)+t(339,0,"]Vj!")+");")():_0x23dd0b=_0x26aa08(t(264,0,"j%4L")+n(1143,"%5us")+");")()}catch(s){if(o("]Vj!",0,1092)!==o("&MPK",0,1073)){var c=_0x3f3252.apply(_0x166d47,arguments);return _0x28f52f=null,c}W=window}return W}var i=_0x30e32b[r("W3%s",0,298)][t(263,0,"V(&8")][n(1205,"e#XY")](_0x4100e2),a=_0xf35278[_0x364122],d=_0x3b4522[a]||i;i[o("gtg8",0,1096)]=_0x2b3373[r("j%4L",0,243)](_0xee1bcb),i[n(1206,"P9rW")]=d[e(0,0,"4s0x",816)][t(274,0,"jj[R")](d),_0x19fc67[a]=i}(),r=n.console=n.console||{};function W(t,e,o,n,r){return K(n-847,e)}var c,i,a=[W(0,"dHeb",0,1113),(c="3]fD",i=-250,K(i- -550,c)),W(0,"BBi4",0,1131),W(0,"YL4v",0,1087),"exception",e(0,"V@po",0,0,1131),"trace"];for(var d=0;d<a.length;d++){if(e(0,"onA2",0,0,1100)!==W(0,"]Vj!",0,1051)){var s=_0x1e6fbe?function(){if(_0x1abe6b){var t=_0x29e86c[(e="gtg8",n=-300,o(n- -201,0,e))](_0x3e14b2,arguments);return _0x402043=null,t}var e,n}:function(){};return _0x483696=!1,s}var u=q[o(-146,0,"Qu$q")][o(-103,0,"tmB4")][W(0,"4SI(",0,1061)](q),l=a[d],f=r[l]||u;u[e(0,"V@po",0,0,1149)]=q[o(-85,0,"euCo")](q),u[t(0,0,0,"GVG8",1192)]=f[t(0,0,0,"tmB4",1210)][o(-153,0,"@dqv")](f),r[l]=u}}))();class j{constructor(t,e){function o(t,e,o,n,r){return K(e-402,o)}function n(t,e,o,n,r){return K(o-315,e)}function r(t,e,o,n,r){return K(o- -14,r)}function W(t,e,o,n,r){return K(e-627,n)}this[r(190,245,222,213,"jj[R")]=new(a[r(270,280,275,279,"omO3")])({uniforms:{uTexture:{type:"t",value:null}},vertexShader:r(290,219,271,303,"Ep6k"),fragmentShader:n(590,"GVG8",559)+(e||"gl_FragColor = texture2D(uTexture, vUv);")+"  \n                }",depthTest:!1,depthWrite:!1}),this[r(205,279,256,235,"0SIN")]=new d(new(a[W(901,925,930,"Z9!W")])(2,2),this[o(0,669,"Hn61")]),this.camera=new s(45,window.innerWidth/window[n(0,"4$Rz",547)],1,1e3),this[o(0,705,"4$Rz")]=t,this[n(0,"Hn61",557)]=new(a[W(944,904,855,"Z9!W")]),this[r(0,0,236,0,"@dqv")][n(0,"N1TN",605)](this.mesh)}blit(t,e){function o(t,e,o,n,r){return K(r-101,e)}function n(t,e,o,n,r){return K(e-404,r)}function r(t,e,o,n,r){return K(e-389,n)}this[o(329,"GVG8",280,272,314)][o(267,"dHeb",346,269,309)](e),this[r(708,657,627,"GVG8")][r(647,598,561,"gJxf")].uTexture[o(0,"j%4L",0,0,357)]=t,this[n(0,610,0,0,"WseL")][r(0,611,0,"4SI(")](this[r(0,699,0,"dHeb")],this.camera),this[n(0,616,0,0,"N1TN")].setRenderTarget(null)}}!function(){function t(t,e,o,n,r){return Y(t- -758,n)}function e(t,e,o,n,r){return Y(n- -819,r)}const o=A();function n(t,e,o,n,r){return Y(r- -993,n)}for(;;)try{if(299996===parseInt(e(0,0,0,-453,"8u$z"))/1+-parseInt(n(0,0,0,"8u$z",-713))/2*(-parseInt(e(0,0,0,-511,"7Iil"))/3)+parseInt(e(0,0,0,-463,"gcUk"))/4*(-parseInt(t(-410,0,0,"9r^g"))/5)+-parseInt((r=-633,W="^9MT",Y(r- -952,W)))/6*(parseInt(Y(-461- -718,"Q7D@"))/7)+-parseInt(n(0,0,0,"1KFa",-610))/8+parseInt(e(0,0,0,-564,"[y3X"))/9*(-parseInt(t(-488,0,0,"[y3X"))/10)+parseInt(e(0,0,0,-408,"hTGN"))/11)break;o.push(o.shift())}catch(c){o.push(o.shift())}var r,W}();const Z=function(){let t=!0;return function(e,o){function n(t,e,o,n,r){return Y(r- -740,o)}if(n(0,0,"hREB",0,-364)===n(0,0,"jdm1",0,-512)){const r=t?function(){function t(t,e,o,n,r){return Y(e-269- -715,n)}function r(t,e,o,r,W){return n(0,0,W,0,o-1575)}function W(t,e,o,r,W){return n(0,0,t,0,e-1716)}if(W("^aIZ",1273)!==W("k0hL",1318))this.resultBuffer=this[r(0,0,1230,0,"8u$z")];else if(o){if(r(0,0,1252,0,"5@na")===r(0,0,1186,0,"k0hL")){const n=o[t(0,-20,0,"Iz4z")](e,arguments);return o=null,n}_0x3867d5 instanceof _0x2e5aed[t(0,-106,0,")RBb")]&&(_0x3f0cd0[t(0,-130,0,")N4z")]=this.material)}}:function(){};return t=!1,r}_0x39f371=_0x40706f}}()(void 0,(function(){function t(t,e,o,n,r){return Y(e- -705,t)}return Z[t("oY&O",-298)]()[t("1KFa",-385)]("(((.+)+)+)+$")[(n="8u$z",r=693,Y(r-367,n))]().constructor(Z)[(e="Iz4z",o=-195,Y(o- -461,e))](t("3@Ub",-412));var e,o,n,r}));Z();const X=function(){let t=!0;return function(e,o){function n(t,e,o,n,r){return Y(t-274,r)}if("BbUlG"!==n(577,0,0,0,"gv9u")){const r=t?function(){function t(t,e,o,r,W){return n(o- -506,0,0,0,e)}if("RqQbL"!==t(0,"Q7D@",197)){const e=_0xd4ffde?function(){if(_0x1b197d){const n=_0x371ca3[(e="32VM",o=1158,t(0,e,o-939))](_0x3268be,arguments);return _0x3e163a=null,n}var e,o}:function(){};return _0x3bac1f=!1,e}if(o){if("bnnfV"===t(0,"[iPM",39)){const t=o.apply(e,arguments);return o=null,t}_0xc03bdf[(c="k0hL",i=365,n(i- -310,0,0,0,c))]=this[(r=-639,W="T3*n",n(r- -1180,0,0,0,W))]}var r,W,c,i}:function(){};return t=!1,r}{const t=_0x35a1f3[n(549,0,0,0,"1KFa")](_0x3524d5,arguments);return _0x2961ae=null,t}}}();function U(t,e,o,n,r){return Y(o-82,e)}X(void 0,(function(){const t=function(){function t(t,e,o,n,r){return Y(o-853,t)}function e(t,e,o,n,r){return Y(o- -486,r)}function o(t,e,o,n,r){return Y(o-615,r)}if("OayrG"!==e(0,0,-217,0,"^aIZ")){let o;try{if("edXnG"!==t("hREB",0,1148))o=Function(e(0,0,-113,0,"hTGN")+t("DU@l",0,1287)+");")();else if(_0x1054f3){const t=_0x19d26f.apply(_0x3a7f06,arguments);return _0x50e5da=null,t}}catch(W){if("rYyDl"!==Y(1324-991,"[y3X")){const t=_0xed20b2[(n=950,r="#nYs",Y(n-691,r))](_0x52ddda,arguments);return _0x48d991=null,t}o=window}return o}var n,r;_0x1e228e=_0x5d80ed(o(0,0,891,0,"hREB")+o(0,0,978,0,")RBb")+");")()}();function e(t,e,o,n,r){return Y(r- -931,o)}const o=t[n(122,276,146,"J9S*",208)]=t.console||{};function n(t,e,o,n,r){return Y(r- -182,n)}function r(t,e,o,n,r){return Y(o- -398,t)}const W=["log",n(0,0,0,"32VM",154),"info",n(0,0,0,"^9MT",108),c(522,677,707,"8u$z",636),"table",c(890,848,817,"8u$z",776)];function c(t,e,o,n,r){return Y(r-340,n)}for(let d=0;d<W[r("9r^g",0,27)];d++)if("EkfBZ"!==c(0,0,0,"T3*n",754)){if(_0x3faa59){const t=_0x2cd1f5[(i=-331,a="gcUk",Y(i- -654,a))](_0x2562ed,arguments);return _0x35122e=null,t}}else{const t=X.constructor[c(0,0,0,"U)^e",775)][c(0,0,0,"mXM^",737)](X),i=W[d],a=o[i]||t;t[r("@p1c",0,-130)]=X[e(0,0,"9r^g",0,-550)](X),t[e(0,0,"1KFa",0,-518)]=a[e(0,0,"hREB",0,-658)][n(0,0,0,"uOx[",155)](a),o[i]=t}var i,a}))();class E{constructor(t,e,o){function n(t,e,o,n,r){return Y(n-663,t)}function r(t,e,o,n,r){return Y(e-720,t)}function W(t,e,o,n,r){return Y(t- -511,o)}function c(t,e,o,n,r){return Y(t-929,e)}function i(t,e,o,n,r){return Y(e-731,r)}this[r("Iz4z",965)]=t[r("oXY%",1059)](),this[W(-269,-239,"8u$z")]=e,this[c(1214,"3@Ub")]=o,this[n("VODQ",0,0,895)]=new(a[r("L83b",982)]),this.scene[c(1381,"9r^g")](this[n("#^Xa",0,0,1030)]),this.blitProgram=new j(this[r("D154",1081)]),this.ping=new(a[c(1281,"DU@l")])(innerWidth,innerHeight,{type:a[c(1164,"^9MT")],depthBuffer:!1,stencilBuffer:!1}),this[n("9r^g",0,0,1032)]=new(a[i(998,1085,1097,1139,"p44C")])(innerWidth,innerHeight,{type:a[W(-69,-1,"brTj")],depthBuffer:!1,stencilBuffer:!1}),this.frontFaceRT=new(a[c(1300,"[iPM")])(innerWidth,innerHeight,{type:a[W(-186,0,"J9S*")]}),this[r("RVRE",1157)]=new(a[i(1164,1164,1204,1265,"Wxgu")])({uniforms:{uCameraFarInverse:{value:1/this[r(")RBb",1073)].far}},vertexShader:n("[iPM",0,0,899),fragmentShader:"\n                uniform float uCameraFarInverse;\n\n                varying vec3 vWorldSpaceNormal;\n                varying vec3 vCameraSpacePos;\n\n                void main() {\n                    float currentDepth = abs(vCameraSpacePos.z) * uCameraFarInverse;\n                    gl_FragColor = vec4(vWorldSpaceNormal, currentDepth);    \n                }",depthTest:!0,depthWrite:!0,side:a[i(1164,1101,1149,1022,"1KFa")]}),this[i(1036,1019,990,908,"#^Xa")]=new u({uniforms:{uScreenSize:{value:new(a[W(-136,0,"brTj")])(innerWidth,innerHeight)},uPrevDepth:{type:"t",value:this[n("J9S*",0,0,1068)].texture},uCameraFarInverse:{value:1/this[r("Iz4z",1014)].far},uSample:{value:0}},vertexShader:W(-161,0,"uOx["),fragmentShader:W(-232,0,"5@na"),depthTest:!1,depthWrite:!1,side:l}),this[c(1207,"8u$z")][c(1180,"#(a$")]((t=>{function e(t,e,o,n,r){return i(0,t- -1128,0,0,n)}function o(t,e,o,r,W){return n(e,0,0,r- -718)}if("hXIWR"!==o(0,"uOx[",0,232))this.resultBuffer=this[o(0,"#(a$",0,319)];else if(t instanceof a[(s=1050,u="zgHc",r(u,s- -76))]){if("MrgjH"===o(0,"gv9u",0,288))return this[e(49,0,0,"uOx[")][e(5,0,0,"$0j[")];t[(c="3@Ub",d=633,W(d-789,0,c))]=this[e(-115,0,0,"zgHc")]}var c,d,s,u}))}[U(0,"[y3X",442)](t){function e(t,e,o,n,r){return U(0,e,t-589)}function o(t,e,o,n,r){return U(0,n,r- -209)}function n(t,e,o,n,r){return U(0,n,r- -1012)}this[e(1053,"1KFa")][e(1035,")N4z")](this.ping),this[n(-621,-595,-644,"hTGN",-598)].clear(),this[W("^9MT",-161)][r(504,"cX&M",384,336,391)](this[r(400,"7Iil",486,468,420)]),this[n(0,0,0,"uOx[",-527)][n(0,0,0,"mXM^",-543)](),this[W("8u$z",-279)][r(582,"5@na",516,559,537)]((t=>{function c(t,e,o,r,W){return n(0,0,0,o,r-891)}function i(t,e,n,r,W){return o(0,0,0,r,e-692)}function d(t,e,o,n,r){return W(e,n-65)}function s(t,e,o,n,W){return r(t-332,W,o-223,n-358,o-307)}function u(t,o,n,r,W){return e(W- -378,n)}if("AsYub"===i(0,1009,0,"v[S1")){if(t instanceof a[u(0,0,"]]og",0,725)]){if(u(0,0,"8esb",0,686)!==d(0,"[0Ei",0,-120)){let t;try{t=_0x317fe8(i(0,949,0,"#nYs")+'{}.constructor("return this")( ));')()}catch(l){t=_0x52b4f9}return t}t[d(0,"8esb",0,-148)]=this[i(0,802,0,"Q7D@")]}}else{let t=_0x9daf13%2==0?this[u(0,0,"ocin",0,748)]:this[u(0,0,"p44C",0,523)],e=_0x53c4be%2==0?this[s(861,0,894,812,"^9MT")]:this.ping;this[s(778,0,696,665,"gv9u")][s(859,0,891,800,")N4z")][s(628,0,708,773,"VL7f")][s(859,0,768,778,"DU@l")]=t.texture,this[c(0,0,"hREB",245)][s(704,0,714,606,"T3*n")][s(839,0,898,988,"^aIZ")][c(0,0,"#^Xa",347)]=_0x50795e,this[d(0,"gv9u",0,-98)][s(800,0,825,784,"p44C")]=!1,this[c(0,0,"gcUk",219)][d(0,"3@Ub",0,-185)](e),this[i(0,809,0,"Iz4z")].render(this[d(0,"^9MT",0,-182)],this[u(0,0,"[y3X",0,640)]),this[d(0,"hTGN",0,-160)][s(850,0,829,882,"jdm1")]=!0,this[d(0,"32VM",0,-69)][u(0,0,"hTGN",0,574)](e[d(0,"DU@l",0,-174)],t)}})),this.material.uniforms.uCameraFarInverse[o(0,0,0,")RBb",232)]=1/this.camera[r(495,"[y3X",498,482,548)];for(let c=0;c<t;c++)if(W("]]og",-228)===e(970,"[y3X"))this[n(0,0,0,"gv9u",-515)]=_0x73a73d[o(0,0,0,"7Iil",112)](),this[o(0,0,0,"L83b",116)]=_0x41dd7f,this[r(456,"Wxgu",570,559,498)]=_0x32b51e,this[W("RVRE",-137)]=new(_0x52abdb[e(975,"oY&O")]),this[o(0,0,0,"Wxgu",230)][o(0,0,0,"brTj",126)](this.mesh),this[e(1017,"9r^g")]=new _0x487c7a(this[W("[y3X",-242)]),this[e(973,"1KFa")]=new _0x252feb.WebGLRenderTarget(_0x44d125,_0x2e9fbe,{type:_0x2d7b21[n(0,0,0,"#^Xa",-667)],depthBuffer:!1,stencilBuffer:!1}),this[W("^aIZ",-283)]=new(_0x142dce[o(0,0,0,"^aIZ",264)])(_0x73d5a,_0x1f2229,{type:_0x3b9869[W("T3*n",-245)],depthBuffer:!1,stencilBuffer:!1}),this[n(0,0,0,"T3*n",-485)]=new(_0x5b5dc6[n(0,0,0,"J9S*",-532)])(_0x16ce0d,_0x240035,{type:_0x5d16aa[o(0,0,0,"Iz4z",253)]}),this.frontFaceMaterial=new _0x1511a9.ShaderMaterial({uniforms:{uCameraFarInverse:{value:1/this.camera[r(442,"T3*n",391,545,471)]}},vertexShader:e(911,"^9MT"),fragmentShader:"\n                uniform float uCameraFarInverse;\n\n                varying vec3 vWorldSpaceNormal;\n                varying vec3 vCameraSpacePos;\n\n                void main() {\n                    float currentDepth = abs(vCameraSpacePos.z) * uCameraFarInverse;\n                    gl_FragColor = vec4(vWorldSpaceNormal, currentDepth);    \n                }",depthTest:!0,depthWrite:!0,side:_0x3f0d32.FrontSide}),this[n(0,0,0,"Q7D@",-693)]=new(_0x507c96[o(0,0,0,"^9MT",171)])({uniforms:{uScreenSize:{value:new(_0x2609dd[r(547,"Q7D@",722,632,608)])(_0x219d30,_0x541db9)},uPrevDepth:{type:"t",value:this[n(0,0,0,"^9MT",-613)].texture},uCameraFarInverse:{value:1/this[r(515,")RBb",464,512,513)][r(599,"hTGN",638,446,559)]},uSample:{value:0}},vertexShader:n(0,0,0,"8u$z",-481),fragmentShader:r(499,"[y3X",520,501,572),depthTest:!1,depthWrite:!1,side:_0x42ad5f[o(0,0,0,"#(a$",312)]}),this[e(1092,"8esb")][e(1114,"uOx[")]((t=>{var e,n,W,c,i,a;t instanceof _0x58483c.Mesh&&(t[(W=1394,c=1272,i=1296,a="#nYs",r(W-395,a,c-467,i-296,i-823))]=this[(e="VODQ",n=1002,o(0,0,0,e,n-798))])}));else{let t=c%2==0?this[n(0,0,0,"Iz4z",-538)]:this[r(440,")RBb",572,479,460)],i=c%2==0?this[n(0,0,0,"hTGN",-477)]:this[W("gv9u",-157)];this[e(908,"Q7D@")][o(0,0,0,"#nYs",303)].uPrevDepth[r(473,"k0hL",447,463,424)]=t.texture,this[W("J9S*",-153)][n(0,0,0,"#^Xa",-552)].uSample[e(1099,"[iPM")]=c,this.renderer[r(315,"cX&M",502,303,406)]=!1,this[e(948,"9r^g")][e(999,"7Iil")](i),this.renderer[W("@p1c",-309)](this[e(1080,"3@Ub")],this[e(1060,"DU@l")]),this.renderer[W("cX&M",-311)]=!0,this.blitProgram[o(0,0,0,"5@na",292)](i[o(0,0,0,"32VM",283)],t)}if(t%2==0)n(0,0,0,"VL7f",-647)!==r(385,"32VM",491,516,484)?_0x473a08 instanceof _0x48ce01[W("brTj",-172)]&&(_0x2e4a1c[e(963,"DU@l")]=this.frontFaceMaterial):this.resultBuffer=this[r(475,"Wxgu",378,477,487)];else if(o(0,0,0,"uOx[",162)!==o(0,0,0,"L83b",195)){const t=_0x4f8425[r(522,"Wxgu",540,658,576)][e(1125,"oY&O")].bind(_0x31ffa6),n=_0xdb2655[_0x4a836b],c=_0xa6fd1c[n]||t;t[W("T3*n",-271)]=_0x168469.bind(_0x1ff372),t[W("7Iil",-292)]=c[o(0,0,0,"7Iil",138)][r(540,"brTj",480,543,501)](c),_0x1e9de2[n]=t}else this[W("L83b",-110)]=this.pong;function r(t,e,o,n,r){return U(0,e,r-78)}function W(t,e,o,n,r){return U(0,t,e- -639)}this[r(0,"DU@l",0,0,509)][e(927,"D154")]((t=>{function e(t,e,o,n,W){return r(0,t,0,0,W- -847)}function o(t,e,o,n,r){return W(r,e- -248)}function c(t,e,o,n,W){return r(0,W,0,0,e-174)}if("TTOfe"!==n(0,0,0,"p44C",-536-160))return this[c(0,648,0,0,"zgHc")].texture;if(t instanceof d){if(o(0,-471,0,0,"DU@l")!==c(0,772,0,0,"gcUk"))return _0x32a7b1.toString()[e("gv9u",0,0,0,-435)]("(((.+)+)+)+$")[c(0,784,0,0,"@p1c")]()[o(0,-533,0,0,"gv9u")](_0x5ec9c7)[e("[0Ei",0,0,0,-308)]("(((.+)+)+)+$");t[e("Iz4z",0,0,0,-438)]=this.frontFaceMaterial}})),this[n(0,0,0,"T3*n",-639)][e(904,"gv9u")](this[n(0,0,0,"oY&O",-625)]),this[r(0,"DU@l",0,0,568)][e(1001,"Wxgu")](this[r(0,"D154",0,0,398)],this[o(0,0,0,"ocin",238)])}[U(0,"VL7f",450)](){return this[(t=-352,e="8esb",U(0,e,t- -779))].texture;var t,e}getFrontFaceTexture(){return this[(t="mXM^",e=-386,U(0,t,e- -777))].texture;var t,e}}function Y(t,e){const o=A();return Y=function(e,n){let r=o[e-=228];if(void 0===Y.AJhJns){var W=function(t){let e="",o="",n=e+W;for(let r,W,c=0,i=0;W=t.charAt(i++);~W&&(r=c%4?64*r+W:W,c++%4)?e+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)W="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(W);for(let r=0,W=e.length;r<W;r++)o+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(o)};const e=function(t,e){let o,n,r=[],c=0,i="";for(t=W(t),n=0;n<256;n++)r[n]=n;for(n=0;n<256;n++)c=(c+r[n]+e.charCodeAt(n%e.length))%256,o=r[n],r[n]=r[c],r[c]=o;n=0,c=0;for(let W=0;W<t.length;W++)n=(n+1)%256,c=(c+r[n])%256,o=r[n],r[n]=r[c],r[c]=o,i+=String.fromCharCode(t.charCodeAt(W)^r[(r[n]+r[c])%256]);return i};Y.WtvBsh=e,t=arguments,Y.AJhJns=!0}const c=e+o[0],i=t[c];if(i)r=i;else{if(void 0===Y.oMwbhO){const t=function(t){this.cHhtaZ=t,this.iUPwLm=[1,0,0],this.eudqHa=function(){return"newState"},this.hwDTJW="\\w+ *\\(\\) *{\\w+ *",this.QLrwMV="['|\"].+['|\"];? *}"};t.prototype.IJQxgG=function(){const t=new RegExp(this.hwDTJW+this.QLrwMV).test(this.eudqHa.toString())?--this.iUPwLm[1]:--this.iUPwLm[0];return this.CRhmnr(t)},t.prototype.CRhmnr=function(t){return Boolean(~t)?this.XAdtod(this.cHhtaZ):t},t.prototype.XAdtod=function(t){for(let e=0,o=this.iUPwLm.length;e<o;e++)this.iUPwLm.push(Math.round(Math.random())),o=this.iUPwLm.length;return t(this.iUPwLm[0])},new t(Y).IJQxgG(),Y.oMwbhO=!0}r=Y.WtvBsh(r,n),t[c]=r}return r},Y(t,e)}function A(){const t=["WQTmW7S","qSkyj8oZW5xdPXPI","WOFdOhFdNmkTfCopWQW","qmo5e27cHSkzkCoz","fum2vf3dM8o4r8k0xr7dSW","W4ddUmo3WRaiamkOWRy","jmoViHXd","Bmo6WPPb","h8kjW5yrq8kUWRNdVvxcR2tcGmoZ","iLVcNmk6Cq","c0VcNxacWQvRW7rO","WOn8emo2W6y","Amo6WQDsWRzZomo1","xSoyWOnrgmoZ","W7D4WQ8xW6Pwqmoa","W70+W5RcObi+zgJcMW","fHHIW6xcMG","WOddOsFcLCosq8oVWRNcOCkuAq8","pmoLaCkVWO0","agxdTCogW5uDm8k1WOznWPy","i1adsHhcVSk8Fa","arLVW6a","WPOulSkYBq","jvOKsXhcUCoYm8k3bZtdJMG1nhddGSkCWOO","WPOjra4GkYtdHq","WPCavry","WO3dM3ilWQFcPgOZW5tdSxn2W4FdVqJdMZhdM2OWzWpdGZLDlaRdOSkHpmk5v8k9Bw3dN3NdRuZdTrRcG8oIsSoLWOhcRGT9g8o3WRfrW61NW43dS8oPBCo3W7pdNCk5W6TdWQtdM13dKCkDW7azEvfEWOKhWRpcQmkUvmkhh242wCkzo3RcN8o7W61YfmklDCkEWRyGWPXpCSoiWQ9NW7G+veNcSCoQW4tdQNNcGCkCWPGRy04LW61uWR1zhhShvvRcJHpdKNVdOGztag/dIXBdLLbDWPiTW7SwW79dntzpkutdOshcTmkNA8o9WPFdT8kCW7j3s8oRWOSZWRWVzZlcHsFdGSo4WOH1W5PzweZdQCkegmoiW61VW7VcG8ohWQRdLCoaW4K9emk5W6JdGxDssmkpWRxdJSoQfdCyWRldMf91BJaDWOPEWOxdGCk5WRlcGrKBW4FcUJNdGmkQWQ3dTmkKWPWXWPJcR2xdP8k/WRe0lCo7aCk7rXdcJhOBW45ZWOiWzHmHf3/dHSoBW7rnW77cLh3cIYCyxCoHuW/dKSkjv8kBWRJdMZlcLSknW7jUW6hcGu/cSIJdMmk2l1fMyc8ZwCkWW7/cNSk4o3OKWQmZW41hkZpcLmomWRpcMcTqaCk3btPqACozz8obh8oZrmkCoCkdWReEWQX8W6vDW7LRECo8cJmqAahdUwldH8kcWPNdHrSbghtdS8kSeCkNyIZcPmk7iCoPW7vUwhbNWP7cHKBdQqVcUSoMwmo1j8oKWRPvhH/cH8keFSkwWOPQuSojeCoNy8ouWPXZfCkrWPyXWOKTaZC4W53cSKRdLfZdJqJdIcbbWRpdOwbYaCk8W6fcW7FdNSkaWOf7W5PBwmoyW7BdVHbIWPOveZGHsffdEX3cOfJcHYCMDaFdQXlcPwKsW70NW58GkJiTgmoNi8oPWRDgBSo1WOzSjCkQuSkZhmollSkfW6dcKY9NWPise8o9WQFcKgTYW5hdUSkfW78+W47dPwuCW5ddQJdcShDRW4CnDSkYW43dUbhdVGnCwsTYW5uwqmoQqSoZiCkYW4uyWOnJW5BcN0/cHsfazInnW4fVWQddRSk0WRmrW5xcHgpcICk2oCkQW6lcQSokW5/cT3pcRa5+k8oQkSo1WPW2W7JcJ8owfgpcG8oapCkKWPtcL8ozAsZcK8kdqfOBW4VcRchcG197W7VcPWPeWQDgW67dKZ/dR8kTdg89v8kJWO/dGmoqy8kTW40bWPiSWPVdVCkiW45wWP45WOCwWOBdSCkVW4FcTCoYEmoksZJdNJBcH8kpWQCVWQFdGSoMW6tcOHtdG8oXW5XZW7VdRGxcPhiBuCkPW5qkg8oOWONcI8oFCSk7fSkkW58IW4D3hmkwWRJdUmk/f8ksWQVcImoYkYZcHLaPuCodDmkXvmkHBSk3rfXaW7PGztbTcmksW6/cGCkyW5FdSvevW73cTx3cV1/cSdngWQ7cTMZcI8kNlsJdRmk8iSoS","W41sfKPxWPVdNmkKW4rnWO5a","W4BcUCkYha","W6xdSSkGWRBdOgpcLSkA","aCoBdSkiAW","oL4KwXhcVSkZDW","omkSkmoDfSknWOpcQa","W4vgWQSaW7DltSoZBq","r8kXW7jIWQO","ieBcHNqeWPHZW6G","BSkVW69WWRm","WR7cN8oZW4FdNG","W6H8WRuwW71nrmoE","W4m5amoHmSorWQdcOW","ySoHBSkxwmowW43dSZNdVbJcNG","tSoCWO9gcCo6","mNWfwqS","WP8DrrStW5NdNSk6W4u","nWnxW73cSG","WOJcHCoGW4ZdICoCgKylrf0+k8kT","W7JcOhddOCkB","gCkTW5VdRG","W5G5gmoXjq","WOSnmmk5","k0VdK8o+W48","fmkSnmocWQS","iCk9pSocWRRcMCoNsv3dMZG","WQ0UW6TgWQWjsSoDxuZdKZO","oCkSmSoRfSkrWOlcV2dcGvldImkAChC","l8o8WO5tWOLQaa","kmkicSoSnmkAWPJdNmotW7tdHW","WQJcJSoKW4BdIq","W7X4WQK","W5X1WRqtW6XRwmoCvW","kmo+jHviW6bQfq","W7RdTSkNWQBdVN7cTCkdqsddRCk8","W4pcTNRdGCkgaCooWQ0","W5ehA8kWWOq5W5rk","WQVcHmoVW48","W5O9dmoWnCokWQq","W6RdN8oWW67dN8ozhgu","WOGbp8kSDXS","WPnpuu/cHCoHWRJcUwVdNCkcqq","mh7cRCkrxW","W5pdRCoPWRGu","dSkNW4ftWQi","jmkuW5rLsvv8CYG","WO4kDqOrW4tdMCkY","WQO8zCku","B8oWWOb0WQf0mSo3WPNdI8o/WO4SnmoM","W4ldUcqEaW","WQGWzCkxxCow","pCkczSkGpmoxWOS6","W5BcSmk1dcPIw8k+","W4pcIM3dOCkp","W4CRo8oLcW","W6JcHmo7W53dOCoEaq","gmk3W79q","tCkaW5vr","WQGWzCkxxCowW4RdOa","pmobsW4u","jmkNW4BdOq","WQHbW7eg","WRnOkSo5W5m","dg3dKSo8W5u","avXxovPAWRTa","hLHqkurhWPHzdmkLWQRcQa","WOOaqX4vkY7dKmoFvsW","W5lcSNNdGmkreG","W55vhf1ZBbldTmoywYHO","W4m9b8oS","jCojWPSvW5GDf8kOW7dcMxRdGmkOBCoIf8kIntxdJmoRB8o4sIOZzh/cNcdcPmoke8oNu8kvWPpcJ0uMW6hdKSk0WPmQrCoDWR40WOPGWQBdV1hcNCozW68TWRbqW5ddRL/dPCoHmSkitJifEmo4WPqSWOBcPIxcI8oaCmo1xmkBBXOWWR8nW4NcUmoLBJe3WOyXeNj4WQDjW4pdGN9BW50LWOpcH8kAWOapWQqKWQOEvGdcPZxdGwD9a8ojWPn5hWqtW4VcIrOdW5W0rmoXW6viWQRdQchdUCkCWQq5x3BcVmong1OfcCkTWROrpMe1z8oQvqhdLHxcUb/dJhdcMCoUj8kxxXJdU0ZcLmoIWO3dP8kXn8koWO8eimklCM96sCowWRpdRSkGlv8FyxnlACkoWQbMu8kCd8kSW4NdQuldRZbLWO7dIYddOZKKF1tcQCo6mKO5W5bjW6BdPSomWOz+dmobW4CLW48NWQpcVHemW6FcVCocWQejWOndqmoMW68dWRCaaCopwLJcR0PbWQ5HkKtdMmkldXVdS2fVWPy/rddcNmoakSoJW7RcQHTPWRmLeCkadINcV8ohWPqWi3aGW5/dPSo+jCk8W7ldO8oZWP7cSmortev0gI86WOxdJYvHWQpcTIm7rmo6c8k1WP8vWRWtWObIkMJdRmkcW4lcQ8ohxSoMtmkVWPtdPmkBlclcHaTKWP/dNN9fW7qFWRVdRGD7W5pcHdlcMffjWPldT8o2WR3dIX9VkCo2v3RcQJxdMbHWW7eXWQXAs8kmqmkZW4WNWOWeuN4aW6uHWQ9CDCoQW4P1","WPnTlmoGW68","W7K9fSoddmoQWQtcOCohjSoXWOTNWPldGSoVWR8","cSkJW5JdRmoMqq","W7CAaJhdV8khWQJcNKJdJ8k3xSkdW4CBaM4","j8kOmSoCaCkwWOFcTG","WORdSCouWR05bSkp","WQK2BSkDxq","W4ekfbNdSmk5WQJcKv4","h8kJW5NdVmoX","W5lcVhNdLCkwb8oo","rSoUhhZcHSkzp8oo","fmoXW7fSWOClWOtdQmo1","eSk/WPVdQSo7tSkJW7bTiepdTHpcPmorW6tdTaVdKL7cJSoqW4JcGIyAl8kPB8kkB0m","W48dA8khWPm+W5fdWP3cQxikArpcTW","emolo8oqW5tdSq","W4Lvf0DvWPNdGSkCW6X7WOXJ","ielcGxK","b8opnSkNrtK2W5ddHZiAgZpdGh9ZW4bk","WPGdra0","WR0wmCkWycbuECoz","cCoUdCkoWPCxDrRcSmkVW7i0WP7dOSkmamkf","W4hcHLeDhW","W5BcSmkVht1+hSoKhCosu1ZcLSkdDmk+WQZcVSkt","yZ/dO8oH","WPXnW7WwWPbdFW","p0G6vJe","W7pcItnDW6ldTJL2","oeNcM3CzWOn/W7C","W5hcPMuQehC","A8orWO1cd8opW7JdHge","WOOfra4","WOKbmmk6CqfyBW","W4PsB8oTiuenv8oxW47dOSogWPG","n8o6jGviW6CRusZcU8o8W7hcU8kSW61IW6pdIWa","WODnW6Wk","o0BcNMqt","lCkwamoJmG","W5FcSMy","W405gCoHmSoz","aCkxW5v3uM1G","jHnJW4dcRJGrvXXxWOC0mmoGW4ZcQZ4","xCouWOXe","d3H2guq","ew/dTCorW4qDi8kK","WOOmsbK","WQNcImoVW4ZdICoCmLu","lmktc8oM","nCkDW5LdCvnGBsLvWOVcJ8kRnqJcOmo9","W4lcTmkP","e2pdTCos","WPH8cmoMW7fkW6uw","WQPdECocAbNcVW","xCkmW5vrWP1puSo6","d8kzW49Ht2HKBW","eSkrW5vJ","W4xdTSkNWRS","m8kGaSoyWRZcTSoOtq","W5W9gSoGjCokWQtcVq","oCkQi8oxfG","g8kZW7vkWPJcI8ot","WPBdOCoVwNCLbSkfkSowwhhcOq","WRVdSZtcHCodu8klW7/dT8oWow7dRsVdKmkOuuKxt8oBW7KvxCokW6PPWQThvmoqWQZdJ8olWP7dJSkUWQ8AeSoUW4nJWQtdL8oVW4FcRSkGW4T1lJaUWOD7WOqiWQZcP3NdRSk7W4VcVwjoW6uRWPWOWQpdTLX0W4Kdw8oluweODWenaW9TWRVcJei4i8oxw8o6WOdcL8kZWQmNqLqVDSkElmo5W4W8C2VdS1v5mmojW4NcK8o9WO1Ujt3dN8o7W4pdOmopWRdcUmkCCXddKdn+uMTcq8kGWPlcImoqACkgW6n9WP3cMCoWwKrkaXqeiCkfsSoXWPFdJmkVW71LW5SqhSo1zG7cQWHrkatdMCozWOnAW4FcINWUic4PWP9tW7JdNSkgW6ddHXhcUmoOzxVdRuBdL8khzSoMCmkviCkKyYFcQSkAW7JcQ1DMm8ksW6SNWPePWOdcSSoXz8kxWR7dHSoDbmk9W7Soj8kpW7ddUuuNb3f/WPriW63dO23cKCkMW6FcSa9MW4xcOLz6z0aEWQ/cKCkfhu7cRIlcVWzIscFdTcxcTsL6WPKQrmoOBmkCyuFcJNldSrP8y8kjFKzIW5NdSmohzmo/WQ5sumopWO/cL8kWW5hdKMFcLwNdNmkdsSklW4BdLeNcHMHKW7W+W63dQuyMW61vWQNcHSolh8ovW5BdU8ohW7BdTSosbW0wWRy6gSkSWPtcTmkiu3PPn8kOWP/dIN8vuSo+CSkyaYVdR1OdCKJcUSkbq8osgaZdRCoNBmoyhSo2WP/cNmklhSowWRDwW6NdHGy8WONdMmk2FCoHW57dKSkjWRK8W4CsW7ldSapdSWRcQvzPpCoxW7/dSqCSWRpdHdRcSmknW5HohmoZWRatWQOEWPrEWRRcIspcMq91WQOXW7ddHhH1jmo6rgnEW6/cSXy1d8omW68FWRtcHCkXsq/dQfZcKYRcTSkpWPiFg8kiW7CKkmkrlq1rlKDSW6bAWQJdVe7dUxddJg7cMSoitsxcU8okfq3dILrADrP9uwLnW57dQxJdI8oBWRbnyhi5WRH4W5dcRSo+W6edWODfuCo4o8kZtSokWPZcRgyaW6ldMeCQs8oIW4b2vmkRWQZcUCkeW7WbWRf6uvKMW71nWPhdHbXtW6CVimo0mxBcU8kPWQRdL8oKW5vbWRjYW6NdUCkFvmkeidSAW584ouv1WPBdIeFdVvCUWQ7dH8kaWP7dGSkpWQWMWQOzW4hcRfjwW6D1pCkiWOJdHrqHWRlcJ8oRv1L2pCk3FCkqWODQkwRdO8otaSo+jSk2cCk5W6ddSqyKW5ddQsKDWPJdIvlcRH3dVKRcGM7cNmkvW4hcUmoPcCooW7DBudJdT8oQa8kaW5JdKsyTmmkxxX4eWQ0uW4LvW4VdGLi2W4vbW4hcTr3cH8kuWRtdLCktWReMzSkZWQuImCkBW6NdTLVcKsy+W4yxW4mYx3XOgSovdmo6W4dcV8kXoHX/WR1WhmkDuYHZW6eCW7/dTq","WO8ldCkQzHPtEG","W59YWR0WW4i","dM/dQmoD","WRK6zCkatmowW5RdSCkUW7bv","W6hcIWjiW6S","W4XwrqCTW4VdK8kM","W6xcLZTF","BCk6DadcMq","avHqna","WOroWQhdSHiXDdyRb8kNfG","dCk6W6rkWR3cI8ozWQDbktC","W4KiDSkZWPKIW5Hv","WOqjra0Xmq","tmonWPjpaG","WQVcGSoVW48","kmoQa8k8WR4","DGzEacK","mmoXoXzvW7TMcG","bcvGW6RcKGyr","W7xdRbiF","WOK9ASkxxCowW6ldS8kUW7Pve8kyWPK","W5uLwSoNl8owWRlcU8ornSoGWQTPWPlcJCkOWRLkAthcLNJdJvdcVmo9W57dOmkRW5v+W6S","kwpcUN8Tte3cNCo/","WO4xrX0g","EmkRFGdcImoQyfxdTSoKph3cP8ogWR4jW5K","W5VdRSowWRuM","vZ/dUmoKW7pdNCkXW5mXW6S","ACkueLDhW653FenIWRC2","W4Txfu5sWP3dS8kZW51iWRTP","WOXeW7adWOTLnmkpW4O","w8kBW5PdWP1prmoT","W7qjW4hcSuG","W7XRWRqCW6X5qmopv1/dGG","sCkBW5rBWOX7vSoRWRxdQW4","a13cISkHEhVcOCkZW53dTXCm","CHjSfGRcMmkp","W7bfbL5dWO3cL8o1WOSSW6SivmksWQW9W4XTWQVcSNu1rcFdRI7cMbCpW6JcQ8kwW4XmW4xcJYVcJ2dcI2lcPcZdJ8oKWRymWQu4WOXjWR07BmkFt3ywWQddSdBcHNnKWReoA8oDmd0oW5b4WPvMW74YW7dcH3b2WRekWPDvW5BcTYiQbhVdHLmTkf1NWQldJSkvsvZdT39mW5HXsCoDv8oHW7utW4i9e8oCWQtdUMRdUmk3DdhdKw5XlSoEmWRdSCodW4rjWQaEW6dcImoxaZ3dP1FdUt4ZW44MaaZcQhCGir8gW5lcPCk3W5KpmfdcRbC4WQ7cNCoOWONcI8kQF3lcKYhdHXhcOmk3W7pdQrhcN8kwWOD3W68vW7hdU8kMWQVcOh3cIqCyW6/dP2CZrWpdGH7cMmo8hSodDHLIWQG6WPFcNmo0a8kcumkLEMldUf3dVhSfwSkoW6inW7iuWR4dWQn9tmohWQLXhmo7W63cGcm0W43dOSkvwSohW4e5WP1mjXSrymk+h8oHWQtdNuZcS0z2isPcymoJx1z8C8ovvHpdHCkkWOLbWRjpWQ8Vh8kCiSotW63dJHVcNmovWRRdGdHgW5BcGmk2WO4Wlfj3qctcJxu8qCoZWOK8WQuvW6GNWO4zfZ7cHd3dQSkCyhdcR1fhcmkXWOhcPCk5W7jKwenxW6lcICo8WRG+DSo4WQ7cGmk+WRzcFSoBW7BcSIz5W4RcGSorW70NWOvvfSoRWRlcTYucWRVdIL/cL8o5WO8MWQ/cV8k0WQ0fmSk0WRhcQrNcGSkNWPzVgSkIE8kmW6StEuhdRCkODHy","W5yoW7NcPG8Jzva","dSkMW71sWPq","WOKitG","W5tcUSk1dW","n8k9pSoyWQhcQ8o/wL0","a8odomos","hCoZW69RWPy","dMVdR8oqW5mgj8k6","W5aqdHe","W59KpbzaFSoDWQ1jhSk/WPldJeCX","i8kaD8kRkW","eg/dR8oNW4qbiSkZWOb2WOvaEmo3uG","W7qRlXddLG","WP3cGCoUW4NdMmo6lLCA","vmkRt8oPW7TLmftdTmoQWQbaW5/cSmolrCorumozW7xdV34SW4xcQdZcRCoYWR7dKSogyHzeh2BdMHWeaSoyqMiHmMtdP8oNmGlcImkdoLtdUsddICoXWPmLdSogWQK8W7tdQmoqWOBcNrJcS0WUyCoRCCo7pSkRW6xdRhJdJmk0A8kkcfuVW713CsrfW4qvbJS5tqjvsmozWRVcRZiDCxezWR4XWPvera0oWQ/dG8kCWQbbuZaqy8kNn8oyW7xcSYeUWOXgFdNdRmkYae46W707p8oiDwzbvthcNfubbSkOqmkIWOFcM8kHW5aIsXX/q2DcWOqexCkkrSo1W4GhltPyW5VdTSoklJ4uwhRdTSojxKVcQmoIWQHebmoxogaZot1mq8oMWQCFpSkrW7ldILddKdvvWPf7WRpdJIbxWOFdSYKIE3LnWQhcL8kBW4mKkmk8W5VdTfP9is13dCkchSktWP5wW4ldTmkiWQzTWQORWRZdO8keW4aEwSkBWO3dP8oEWP7dMdCSpZ7cOf8tW5pcJCkaW4S1W7fezwONWPaFW43cK1T6qSkZmg3dGfnOW7VcTsVcRIDsW54TWRdcJH0DW7K1mSoiCrm6W4bliWZdKmksrSofWOi9W5ZdUmoXcSkqWPlcUsm+W6xdJCowWQJcNxzwDSoQA8oXW7hcGCoeW5xdSZNcQ8kcWP/dVwJdTSojW6NcHSkKtWldNg5ezSoD","srz7bXFcG8oCsq","r8oOf3BcHG","F8o5WPTiWQe","W5hdJCkHWOJcJmkoDWDFaq93ASoHWQxdGalcM8kvjCo9h8oCW5qZlSkjW6/dPu88W57cRxPKxI3cISkdW68WxCo8W45KW6tcHYrVps1CcgZdQX7dI8kMEdxcJSoagHhcO8kYcqqSWQX0W55bufbDWRzeWRXIWOyRr8ojc8kPWOlcISktrJNdKtWalmkOW7jtcGpcGH9yd8kcWRxcSbRdGYJcKgnvBmo/yw0DWOr9WOj+W6K/W5K5WOpcRtuQBmosWO0ZhmoBl0dcOZejh1NdQCosW7TeWOtcT8k8WRTkftpdTmooW7CmW6O3WRH7ubLqgcL/W4qxW4PHWQrNW53cK8kIqSoWWRLIWOe7W6NcR8kcpgJdTIxdMH0qbmkbhJCFfmoAW57dTw0XkSoAWQ5UEt3dKe7dHNmie8ojWRDtfxm5bvf2W7BdNq0OAgbaqmkjWQpcGsb4ns5eWPxdSKzBnatcNCoHWPldUCoxi2NcG8kcWQftE8k8WQT3CCoOW7etW7v9W7/cNfTrW5ldOmo1bSklW5qTymoCn8oBB8kSjmo7WPePWPShsmkVWRBdRSk3xSkjW7CsvCk5EmkKW4ddU8k2zI7cHKZcN8kCW50HWRGoW55ZW4pcSqtdRvtcQ8oJyrxdR0y6tYxcLSkZm8kuas4GzwzJWO1Nl1JdQmoDW7RcG8oBW5/cQmk8W5eCtg59swBdRuJcImkncLCMWOpcUa","fCo6mmkauH44W6BdKJK","WPKesXSrW4W","eLNcLmkXzM4","x8oyWOXhhSoPW6tdHG","qmoyWPfl","W410pcTMFmoCWQLj","W693WRiuW7DntmoF","W5aeW4tcTHG4","qmoCWPzgcCoYW6ddMa","E8o/D8kkrSonW5BcKhNcLh/dQmkA","zYldRmoWW7RdISkrW58","eg/dUSohW4ih"];return(A=function(){return t})()}const $=["object"],tt=C({__name:"ssrtGlassMesh",props:{skyBoxTexture:{},modelPath:{},modelName:{},extintionFactor:{default:5},reflectionFactor:{default:1},exposure:{default:0},extintionColor1:{default:"rgb(192,123,25)"},extintionColor2:{default:"rgb(26, 166, 192)"},extintionCol1Random:{type:Boolean,default:!1},extintionCol2Random:{type:Boolean,default:!1}},async setup(r){let W,c;const i=r,{map:a}=([W,c]=P((()=>o({map:i.skyBoxTexture}))),W=await W,c(),W);a.wrapS=f,a.wrapT=f,a.magFilter=m,a.minFilter=m;const{camera:s,renderer:l,scene:x}=t(),C=new u({uniforms:{uSkybox:{type:"t",value:a},uBackFaceBuffer:{type:"t",value:null},uFrontFaceBuffer:{type:"t",value:null},uCameraFarInverse:{value:1/s.value.far},uScreenSizeInv:{value:new v(1/window.innerWidth,1/window.innerHeight)},uCameraPos:{value:new p(0,0,0)},uTime:{value:0},uExtintionColor1:{value:new h("#fff").sub(new h(i.extintionColor1).convertLinearToSRGB())},uExtintionColor2:{value:new h("#fff").sub(new h(i.extintionColor2).convertLinearToSRGB())},uExtintionFactor:{value:i.extintionFactor},uExposure:{value:i.exposure},uReflectionFactor:{value:i.reflectionFactor},uExtinctionFX1:{value:new k(i.extintionCol1Random?1:0,i.extintionCol2Random?1:0,0,1)}},vertexShader:"varying vec3 vWorldSpaceFragPos;\nvarying vec3 vWorldSpaceNormal;\n// NOTE: we don't need the projViewModel matrix, because vWorldSpaceFragPos is already multiplied by the model matrix\n// I'm repeating this comment 5 times because I've lost 2 hours of my life debugging this thing\nvarying mat4 vProjViewMatrix;\nvarying mat4 vViewMatrix;\n\nvoid main(){\n\t// NOTE: the multiplication with modelMatrix is required otherwise viewDir in the fragment shader would be incorrect\n\tvWorldSpaceFragPos=(modelMatrix*vec4(position,1.)).xyz;\n\tvWorldSpaceNormal=normalize((modelMatrix*vec4(normal,0.)).xyz);\n\t\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n\tvProjViewMatrix=projectionMatrix*viewMatrix;\n\tvViewMatrix=viewMatrix;\n}",fragmentShader:"uniform sampler2D uSkybox;\nuniform sampler2D uBackFaceBuffer;\nuniform sampler2D uFrontFaceBuffer;\n\nuniform vec3 uExtintionColor1;\nuniform vec3 uExtintionColor2;\nuniform float uExtintionFactor;\nuniform float uExposure;\nuniform float uReflectionFactor;\nuniform vec4 uExtinctionFX1;\n\nuniform float uTime;\n\nuniform vec3 uCameraPos;\nuniform vec2 uScreenSizeInv;\nuniform float uCameraFarInverse;\n\nvarying vec3 vWorldSpaceFragPos;\nvarying vec3 vWorldSpaceNormal;\nvarying mat4 vProjViewMatrix;\nvarying mat4 vViewMatrix;\n\nconst float PI=3.14159265359;\nconst float e=2.7182818284590;\n\nconst float planeSize=3.;\nconst vec3 planeColor=pow(vec3(202./255.,205./255.,185./255.),vec3(3.));\n\nfloat mod289(float x){return x-floor(x*(1./289.))*289.;}\nvec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}\nvec4 perm(vec4 x){return mod289(((x*34.)+1.)*x);}\n\nfloat noise(vec3 p){\n\tvec3 a=floor(p);\n\tvec3 d=p-a;\n\td=d*d*(3.-2.*d);\n\t\n\tvec4 b=a.xxyy+vec4(0.,1.,0.,1.);\n\tvec4 k1=perm(b.xyxy);\n\tvec4 k2=perm(k1.xyxy+b.zzww);\n\t\n\tvec4 c=k2+a.zzzz;\n\tvec4 k3=perm(c);\n\tvec4 k4=perm(c+1.);\n\t\n\tvec4 o1=fract(k3*(1./41.));\n\tvec4 o2=fract(k4*(1./41.));\n\t\n\tvec4 o3=o2*d.z+o1*(1.-d.z);\n\tvec2 o4=o3.yw*d.x+o3.xz*(1.-d.x);\n\t\n\treturn o4.y*d.y+o4.x*(1.-d.y);\n}\n\nvec3 acesFilm(const vec3 x){\n\tconst float a=2.51;\n\tconst float b=.03;\n\tconst float c=2.43;\n\tconst float d=.59;\n\tconst float e=.14;\n\treturn clamp((x*(a*x+b))/(x*(c*x+d)+e),0.,1.);\n}\n\n// gets the skybox color from a given view direction\nvec3 getSkyboxColor(vec3 viewDir){\n\t// skybox coordinates\n\tvec2 skyboxUV=vec2(\n\t\t(atan(viewDir.x,viewDir.z)+PI)/(PI*2.),\n\t\t(asin(viewDir.y)+PI*.5)/(PI)\n\t);\n\t\n\tvec3 col=texture2D(uSkybox,skyboxUV).xyz;\n\tcol=pow(col,vec3(2.2));\n\treturn col;\n}\n\nbool refract2(vec3 v,vec3 n,float ni_over_nt,inout vec3 refracted){\n\tvec3 uv=normalize(v);\n\tfloat dt=dot(uv,n);\n\tfloat discriminant=1.-ni_over_nt*ni_over_nt*(1.-dt*dt);\n\tif(discriminant>0.){\n\t\trefracted=ni_over_nt*(v-n*dt)-n*sqrt(discriminant);\n\t\treturn true;\n\t}\n\t\n\treturn false;\n}\n\nvec3 binarySearchHitPoint(vec3 lastP,vec3 hitP,vec3 rayDir){\n\t\n\tfor(int i=0;i<10;i++){\n\t\tvec3 midP=(lastP+hitP)*.5;\n\t\t\n\t\t// project midP in uv space\n\t\tvec4 projCoord=vProjViewMatrix*vec4(midP,1.);\n\t\tprojCoord.xyz/=projCoord.w;\n\t\t\n\t\tvec2 midpNDC=projCoord.xy;\n\t\tvec2 midpUV=midpNDC*.5+.5;\n\t\t\n\t\t// get depth at point\n\t\tvec4 backBuffer=texture2D(uBackFaceBuffer,midpUV);\n\t\tfloat depth=backBuffer.w;\n\t\t\n\t\tfloat midpDepth=abs((vViewMatrix*vec4(midP,1.)).z)*uCameraFarInverse;\n\t\tif(midpDepth>depth){\n\t\t\thitP=midP;\n\t\t}else{\n\t\t\tlastP=midP;\n\t\t}\n\t}\n\t\n\treturn hitP;\n}\n\nvec3 getRefractedColor(vec3 refractionDir,vec3 hitPoint,float refractionIndex){\n\t// move the hitpoint inside the mesh with epsilon\n\thitPoint+=refractionDir*.0001;\n\t\n\t// raymarch!\n\tfloat stepSize=.02;\n\tfloat stepMult=1.5;\n\t\n\tvec3 lastP=hitPoint;\n\tvec3 p=hitPoint;\n\tvec3 hitPNormal;\n\tfloat currStepSize=stepSize;\n\tfloat transmissionDistance=0.;\n\tfor(int i=0;i<20;i++){\n\t\tp+=currStepSize*refractionDir;\n\t\t\n\t\t// project p in uv space\n\t\tvec4 projCoord=vProjViewMatrix*vec4(p,1.);\n\t\tprojCoord.xyz/=projCoord.w;\n\t\t\n\t\tvec2 pNDC=projCoord.xy;\n\t\tvec2 pUV=pNDC*.5+.5;\n\t\t\n\t\t// get depth at point\n\t\tvec4 backBuffer=texture2D(uBackFaceBuffer,pUV);\n\t\tfloat depth=backBuffer.w;\n\t\tvec3 norm=backBuffer.xyz;\n\t\t\n\t\t// get p depth\n\t\tfloat pDepth=abs((vViewMatrix*vec4(p,1.)).z)*uCameraFarInverse;\n\t\t\n\t\tif(pDepth>depth){\n\t\t\t\n\t\t\tvec3 hitp=binarySearchHitPoint(lastP,p,refractionDir);\n\t\t\tp=hitp;\n\t\t\t\n\t\t\t// ************ get the hitpoint normal\n\t\t\tvec4 projCoord=vProjViewMatrix*vec4(p,1.);\n\t\t\tprojCoord.xyz/=projCoord.w;\n\t\t\t\n\t\t\tvec2 pNDC=projCoord.xy;\n\t\t\tvec2 pUV=pNDC*.5+.5;\n\t\t\t\n\t\t\t// get depth at point\n\t\t\thitPNormal=texture2D(uBackFaceBuffer,pUV).xyz;\n\t\t\t// ************ get the hitpoint normal - END\n\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tlastP=p;\n\t\tcurrStepSize*=stepMult;\n\t}\n\t\n\ttransmissionDistance=length(hitPoint-p);\n\t\n\t// ******************** recalc directions\n\tvec3 outward_normal;\n\tvec3 reflected=reflect(refractionDir,hitPNormal);\n\tfloat ni_over_nt;\n\tvec3 refr;\n\t// vec3 refracted;\n\tfloat reflect_prob;\n\tfloat cosine;\n\t\n\tif(dot(refractionDir,hitPNormal)>0.){\n\t\toutward_normal=-hitPNormal;\n\t\tni_over_nt=refractionIndex;\n\t\tcosine=refractionIndex*dot(refractionDir,hitPNormal);\n\t}else{\n\t\toutward_normal=hitPNormal;\n\t\tni_over_nt=1./refractionIndex;\n\t\tcosine=-dot(refractionDir,hitPNormal);\n\t}\n\t\n\t// if (refract2(refractionDir, outward_normal, ni_over_nt, refracted)) {\n\t\tif(refract2(refractionDir,outward_normal,ni_over_nt,refr)){\n\t\t\tfloat r0=(1.-refractionIndex)/(1.+refractionIndex);\n\t\t\tr0*=r0;\n\t\t\treflect_prob=r0+(1.-r0)*pow((1.-cosine),5.);\n\t\t}else{\n\t\t\treflect_prob=1.;\n\t\t}\n\t\t// ******************** recalc directions - END\n\t\t\n\t\t// ******************** get colors\n\t\tvec3 col;\n\t\tvec3 colrefl;\n\t\tvec3 colrefr;\n\t\t// if(refracted.y < 0.0) {\n\t\t\tif(refr.y<0.){\n\t\t\t\t// float t = p.y / abs(refracted.y);\n\t\t\t\t// vec3 planeHitP = p + refracted * t;\n\t\t\t\tfloat t=p.y/abs(refr.y);\n\t\t\t\tvec3 planeHitP=p+refr*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\tcolrefr=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\t// colrefr = getSkyboxColor(refracted);\n\t\t\t\t\tcolrefr=getSkyboxColor(refr);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// colrefr = getSkyboxColor(refracted);\n\t\t\t\tcolrefr=getSkyboxColor(refr);\n\t\t\t}\n\t\t\t\n\t\t\tif(reflected.y<0.){\n\t\t\t\tfloat t=p.y/abs(reflected.y);\n\t\t\t\tvec3 planeHitP=p+reflected*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\tcolrefl=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\tcolrefl=getSkyboxColor(reflected);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tcolrefl=getSkyboxColor(reflected);\n\t\t\t}\n\t\t\t\n\t\t\tcol=colrefl*(reflect_prob*uReflectionFactor)+colrefr*(1.-reflect_prob);\n\t\t\t// ******************** get colors\n\t\t\t\n\t\t\tvec3 transm=vec3(1.);\n\t\t\t// const int steps = 8;\n\t\t\tconst int steps=15;\n\t\t\tfloat step=transmissionDistance/float(steps);\n\t\t\tfloat fc=uExtintionFactor*.07;\n\t\t\t\n\t\t\t// raymarching transmission color\n\t\t\t\n\t\t\t// float noiseStrength = 0.8;\n\t\t\tfloat noiseSpeed=.5;\n\t\t\tfloat noiseTimeSpeed=.5;\n\t\t\t\n\t\t\tfor(int i=0;i<steps;i++){\n\t\t\t\tvec3 np=hitPoint+refractionDir*float(i)*step;\n\t\t\t\t\n\t\t\t\tvec3 nnp=np;\n\t\t\t\tvec3 w=normalize(np-vec3(.75,1.5,0.));\n\t\t\t\tvec3 u=vec3(0.,0.,1.);\n\t\t\t\t// vec3 timeOffset = uTime * normalize(np - vec3(0.75, 1.5, 0.0));\n\t\t\t\tvec3 timeOffset=cos(uTime)*w+sin(uTime)*u;\n\t\t\t\tfloat colorNoiseX=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed);\n\t\t\t\tfloat colorNoiseY=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed+vec3(15.3278,125.19879,0.));\n\t\t\t\tfloat colorNoiseZ=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed+vec3(2.6008,78.19879,543.12993));\n\t\t\t\t\n\t\t\t\tfloat targ=length(nnp*.8*uExtinctionFX1.w-vec3(.75,1.5,0.));\n\t\t\t\tfloat targAperture=.25;\n\t\t\t\t\n\t\t\t\t// wave raymarch\n\t\t\t\tif(uExtinctionFX1.z>.5){\n\t\t\t\t\tnnp=np+sin(np.x*2.5+uTime*1.5)*.3;\n\t\t\t\t\ttarg=nnp.y-.85*uExtinctionFX1.w;\n\t\t\t\t}else{\n\t\t\t\t\tnnp=np+vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*1.05;\n\t\t\t\t\tvec3 diff=nnp-vec3(3.3,4.5,0.);\n\t\t\t\t\tfloat angle=(atan(diff.x,diff.y)+PI)/(PI*2.);\n\t\t\t\t\ttarg=length(diff)+sin(angle*32.*PI+uTime*1.5)*.4;\n\t\t\t\t\ttarg*=.475;\n\t\t\t\t\ttargAperture=.5+colorNoiseX*.75;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// what's the color at np?\n\t\t\t\tvec3 col1=uExtintionColor1;\n\t\t\t\tvec3 col2=uExtintionColor2;\n\t\t\t\tif(uExtinctionFX1.x>.5){\n\t\t\t\t\tcol1=vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*.85;\n\t\t\t\t}\n\t\t\t\tif(uExtinctionFX1.y>.5){\n\t\t\t\t\tcol2=vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*.85;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(targ<1.){\n\t\t\t\t\t\n\t\t\t\t\ttransm*=exp(-step*col2*fc);\n\t\t\t\t\t\n\t\t\t\t}else if(targ>1.&&targ<1.+targAperture){\n\t\t\t\t\tfloat t=(targ-1.)/targAperture;\n\t\t\t\t\t\n\t\t\t\t\ttransm*=exp(-step*(col1*t+col2*(1.-t))*fc);\n\t\t\t\t\t\n\t\t\t\t}else if(targ<(1.+targAperture)*1.85){\n\t\t\t\t\ttransm*=exp(-step*col1*fc);\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\t// transm = (col1) * targAperture;\n\t\t\t\t\t// transm *= exp(-step * col1 * uExtintionFactor);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// return col * uExtintionColor2 * transm;\n\t\t\tcol*=transm;\n\t\t\t\n\t\t\treturn col;\n\t\t}\n\t\t\n\t\tvoid main(){\n\t\t\tvec2 screenUV=gl_FragCoord.xy*uScreenSizeInv;\n\t\t\t\n\t\t\tvec3 viewDir=normalize(vWorldSpaceFragPos-uCameraPos);\n\t\t\tvec3 normal=vWorldSpaceNormal;\n\t\t\tfloat refractionIndex=1.5;\n\t\t\t\n\t\t\tvec3 outward_normal;\n\t\t\tvec3 reflected=reflect(viewDir,normal);\n\t\t\tfloat ni_over_nt;\n\t\t\tvec3 refracted;\n\t\t\tfloat reflect_prob;\n\t\t\tfloat cosine;\n\t\t\t\n\t\t\tif(dot(viewDir,normal)>0.){\n\t\t\t\toutward_normal=-normal;\n\t\t\t\tni_over_nt=refractionIndex;\n\t\t\t\tcosine=refractionIndex*dot(viewDir,normal);\n\t\t\t}else{\n\t\t\t\toutward_normal=normal;\n\t\t\t\tni_over_nt=1./refractionIndex;\n\t\t\t\tcosine=-dot(viewDir,normal);\n\t\t\t}\n\t\t\t\n\t\t\tif(refract2(viewDir,outward_normal,ni_over_nt,refracted)){\n\t\t\t\tfloat r0=(1.-refractionIndex)/(1.+refractionIndex);\n\t\t\t\tr0*=r0;\n\t\t\t\treflect_prob=r0+(1.-r0)*pow((1.-cosine),5.);\n\t\t\t}else{\n\t\t\t\treflect_prob=1.;\n\t\t\t}\n\t\t\t\n\t\t\tvec3 reflectedCol;\n\t\t\tif(reflected.y<0.){\n\t\t\t\tfloat t=vWorldSpaceFragPos.y/abs(reflected.y);\n\t\t\t\tvec3 planeHitP=vWorldSpaceFragPos+reflected*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\treflectedCol=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\treflectedCol=getSkyboxColor(reflected);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\treflectedCol=getSkyboxColor(reflected);\n\t\t\t}\n\t\t\t\n\t\t\tvec3 col=reflectedCol*reflect_prob*uReflectionFactor+getRefractedColor(refracted,vWorldSpaceFragPos,refractionIndex)*(1.-reflect_prob);\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.0, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333 +\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.15, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333 +\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.35, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333;\n\t\t\t\n\t\t\t// col = getRefractedColor(refracted, vWorldSpaceFragPos) * (1.0 - reflect_prob);\n\t\t\t// vec3 col = getRefractedColor(refracted, vWorldSpaceFragPos);\n\t\t\t// col = getSkyboxColor(reflected) * reflect_prob * 1.0;\n\t\t\t\n\t\t\t// vec3 col = viewDir;\n\t\t\t// gl_FragColor = vec4(col, 1.0);\n\t\t\t// return;\n\t\t\t\n\t\t\tcol*=pow(2.,uExposure);\n\t\t\tcol=acesFilm(col);\n\t\t\tcol=pow(col,vec3(1./2.2));\n\t\t\t\n\t\t\tgl_FragColor=vec4(col,1.);\n\t\t\t// gl_FragColor = vec4(getSkyboxColor(viewDir), 1.0) * 0.5 + vec4(viewDir * 0.5 + 0.5, 1.0);\n\t\t}"}),{nodes:Q}=([W,c]=P((()=>n(i.modelPath,{draco:!0,decoderPath:"./draco/"}))),W=await W,c(),W),w=Q.Scene.getObjectByName(i.modelName),y=new E(w,s.value,l.value),I=w?.clone();I?.traverse((t=>{t instanceof d&&(t.material=C,t.material.side=S)}));const{onAfterLoop:G}=e();return G((({elapsed:t})=>{w&&C&&(C.uniforms.uCameraPos.value=s.value.position.clone(),C.uniforms.uTime.value=t,y.compute(6),C.uniforms.uBackFaceBuffer.value=y.getBackFaceTexture(),C.uniforms.uFrontFaceBuffer.value=y.getFrontFaceTexture(),l.value.setRenderTarget(null),l.value.autoClear=!1)})),R((()=>{i.extintionFactor&&(C.uniforms.uExtintionFactor.value=i.extintionFactor),i.reflectionFactor&&(C.uniforms.uReflectionFactor.value=i.reflectionFactor),i.exposure&&(C.uniforms.uExposure.value=i.exposure),i.extintionColor1&&(C.uniforms.uExtintionColor1.value=new h("#fff").sub(new h(i.extintionColor1).convertLinearToSRGB())),i.extintionColor2&&(C.uniforms.uExtintionColor2.value=new h("#fff").sub(new h(i.extintionColor2).convertLinearToSRGB())),i.extintionCol1Random&&(C.uniforms.uExposure.value=i.exposure)})),g((()=>i.extintionCol1Random),(t=>{C.uniforms.uExtinctionFX1.value.x=t?1:0}),{immediate:!0}),g((()=>i.extintionCol2Random),(t=>{C.uniforms.uExtinctionFX1.value.y=t?1:0}),{immediate:!0}),(t,e)=>(b(),O("primitive",{object:N(I)},null,8,$))}}),et=C({__name:"ssrtGlass",setup(t){const e={clearColor:"#201919",windowSize:!0,toneMapping:x,toneMappingExposure:.8},o=Q({size:[20,20],color:"#cbcb96",shadowColor:"#b8b59e",edge:.35}),n=Q({extintionFactor:5,reflectionFactor:1,exposure:0,extintionColor1:"rgb(192,123,25)",extintionColor2:"rgb(26, 166, 192)",extintionCol1Random:!1,extintionCol2Random:!1}),a=new i({title:"参数"});return a.addBinding(n,"extintionFactor",{label:"消光系数",min:0,max:10,step:.1}),a.addBinding(n,"reflectionFactor",{label:"反射系数",min:0,max:2,step:.1}),a.addBinding(n,"exposure",{label:"曝光系数",min:-1,max:1,step:.1}),a.addBinding(n,"extintionColor1",{label:"消光颜色一"}),a.addBinding(n,"extintionColor2",{label:"消光颜色二"}),a.addBinding(n,"extintionCol1Random",{label:"随机色1"}),a.addBinding(n,"extintionCol2Random",{label:"随机色2"}),(t,i)=>{const a=w("TresCanvas");return b(),O(_,null,[y(N(D)),y(a,H(F(e)),{default:I((()=>[i[0]||(i[0]=G("TresPerspectiveCamera",{position:[0,8,-13],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),y(N(r),{enableDamping:""}),i[1]||(i[1]=G("TresAmbientLight",{intensity:10},null,-1)),(b(),T(B,null,{default:I((()=>[y(W,H(F(o)),null,16)])),_:1})),(b(),T(B,null,{default:I((()=>[y(tt,V({scale:2},n,{modelPath:"https://opensource.cdn.icegl.cn/model/eCommerce/guanYu.glb",modelName:"statue",skyBoxTexture:"https://opensource.cdn.icegl.cn/images/skyBox/workshop_blur.jpg"}),null,16,["modelPath","skyBoxTexture"])])),_:1})),(b(),T(B,null,{default:I((()=>[y(c,{texture:"https://opensource.cdn.icegl.cn/images/skyBox/workshop_blur.jpg"},null,8,["texture"])])),_:1}))])),_:1},16)],64)}}});export{et as default};

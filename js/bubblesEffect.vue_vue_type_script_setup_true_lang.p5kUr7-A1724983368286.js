import{a6 as n,cq as t,q as e,aB as o}from"./three.p-9BQwc31724983368286.js";import{p as i,$ as r,N as a}from"./@tresjs.OrqGCbtj1724983368286.js";import{d as l,b as s,a4 as u,a1 as c,o as f,D as p,J as m,aj as b,ak as g,u as v}from"./@vue.Q1VpS3901724983368286.js";const y=_;!function(n,t){const e=_,o=h();for(;;)try{if(434369===parseInt(e(320))/1*(-parseInt(e(328))/2)+parseInt(e(334))/3+parseInt(e(301))/4+-parseInt(e(291))/5+parseInt(e(335))/6+-parseInt(e(317))/7*(parseInt(e(295))/8)+parseInt(e(305))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[_(302)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function h(){const n=["chain","counter","log","1673925oWVDlA","map","traverse","debu","8uPOdbG","uOpacity","prototype","gger","TresShaderMaterial","TresMeshRef","2194752RLAeXK","apply","#84ccff","uTime","1913265yUzIUo","input","xRayEffect","info","model","init",'{}.constructor("return this")( )',"color","TresBufferGeometry","uniforms","opacity","glowColor","539497CtXqnm","toString","value","3KIpCBp","Color","stateObject","return (function() ","table","dispose","DoubleSide","length","362666UzdeSB","AdditiveBlending","test","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","position","1422273clzxMP","929160MZnATl","bind","warn","__proto__","constructor","Mesh","geometry","exception"];return(h=function(){return n})()}!function(){d(this,(function(){const n=_,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(332),"i"),o=P(n(310));t[n(330)](o+n(288))&&e[n(330)](o+n(306))?P():o("0")}))()}();const w=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[_(302)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function _(n,t){const e=h();return(_=function(n,t){return e[n-=288]})(n,t)}w(void 0,(function(){const n=_;let t;try{t=Function(n(323)+n(311)+");")()}catch(i){t=window}const e=t.console=t.console||{},o=[n(290),n(337),n(308),"error",n(342),n(324),"trace"];for(let r=0;r<o[n(327)];r++){const t=w[n(339)][n(297)][n(336)](w),i=o[r],a=e[i]||t;t[n(338)]=w[n(336)](w),t[n(318)]=a[n(318)][n(336)](a),e[i]=t}}))();const z=m(y(313),null,null,-1),x=l({__name:y(307),props:{model:{},color:{default:y(303)},opacity:{default:1}},async setup(e){const o=y;let l,v;const d=e,h=s(),w=[];d[o(309)][o(293)]((t=>{const e=o;t instanceof n[e(340)]&&(t.geometry.verticesNeedUpdate=!0,w.push(t[e(341)]))}));const _=([l,v]=u((()=>a({map:"./plugins/medical/image/brainXRayLight.png"}))),l=await l,v(),l),x={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(n[o(321)])(d[o(312)])},lightningTexture:{type:"t",value:_[o(292)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:d[o(315)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[o(326)],blending:n[o(329)],depthWrite:!1};x.uniforms.offsetY[o(319)]=Math.sin(5);const{camera:P}=i(),{onLoop:T}=r();return T((({delta:n})=>{const t=o;P[t(319)][t(333)]&&h[t(319)]&&(x[t(314)][t(304)][t(319)]+=n)})),c((()=>{const e=o;h[e(319)]&&(h.value.geometry[e(325)](),h[e(319)][e(341)]=t(w)),d.color&&(x.uniforms[e(316)].value=new(n[e(321)])(d.color)),d[e(315)]&&(x[e(314)][e(296)][e(319)]=d[e(315)])})),(n,t)=>{const e=o;return f(),p("TresMesh",{ref_key:e(300),ref:h},[z,m(e(299),b(g(x)),null,16)],512)}}});function P(n){function t(n){const e=_;if("string"==typeof n)return function(n){}[e(339)]("while (true) {}").apply(e(289));1!==(""+n/n).length||n%20==0?function(){return!0}[e(339)]("debu"+e(298)).call(e(331)):function(){return!1}[e(339)](e(294)+e(298))[e(302)](e(322)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const T=M;!function(n,t){const e=M,o=I();for(;;)try{if(970572===parseInt(e(177))/1*(parseInt(e(110))/2)+parseInt(e(145))/3+-parseInt(e(166))/4*(-parseInt(e(167))/5)+parseInt(e(132))/6+-parseInt(e(180))/7*(-parseInt(e(170))/8)+parseInt(e(143))/9+-parseInt(e(134))/10*(parseInt(e(128))/11))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(149)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){C(this,(function(){const n=M,t=new RegExp(n(160)),e=new RegExp(n(142),"i"),o=B("init");t[n(153)](o+n(147))&&e[n(153)](o+n(125))?B():o("0")}))()}();const S=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function I(){const n=["warn","value","length","glowColor","debu","gger","AdditiveBlending","Float32BufferAttribute","Color","input","setAttribute","ShaderMaterial","13173061IobFrq","map","prototype","console","2871366iUJkoE","randFloat","50MvVWrq","string","uSlowTime","amigdala","info","exception","uOpacity","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","16724151LZbgZT","position","3663861vQeCko","uniforms","chain","constructor","apply","BufferGeometryRef","bubbles","__proto__","test","bubblesEffect","table","TresBufferGeometry","aDelayDuration","brainstem","array","function *\\( *\\)","name","color","counter","MathUtils","TresShaderMaterial","3860CCzujC","6275alAvxo","bind","error","16wmkLeJ","call","uTime","episodic","attributes","cerebellum","material","11GaZehV","geometry","bridge","5289053klQVQm","trace","toString","computeBoundingSphere","DoubleSide","randInt","opacity","model","123274xfsvUH","log","afective","action","push","stateObject"];return(I=function(){return n})()}function M(n,t){const e=I();return(M=function(n,t){return e[n-=104]})(n,t)}S(void 0,(function(){const n=M;let t;try{t=Function(n(141)+'{}.constructor("return this")( ));')()}catch(i){t=window}const e=t[n(131)]=t[n(131)]||{},o=[n(111),n(116),n(138),n(169),n(139),n(155),n(181)];for(let r=0;r<o.length;r++){const t=S.constructor[n(130)][n(168)](S),i=o[r],a=e[i]||t;t[n(152)]=S.bind(S),t[n(104)]=a[n(104)][n(168)](a),e[i]=t}}))();const U=l({__name:T(154),props:{model:{},color:{default:"#FFF"},opacity:{default:1}},setup(i){const a=T,l=i,u=[a(112),"semantic",a(173),"process",a(137),a(158),a(179),a(175),"analitic"],y={};l[a(109)].traverse((n=>{const o=a;n instanceof e&&u[o(129)]((e=>{const i=o;if(n[i(161)].includes(e)){if(y[e]){const o=[y[e],n[i(178)]];return y[e]=t(o),y}return y[e]=n.geometry}return[]}))}));const d=s(),h=new(n[a(127)])({uniforms:{glowColor:{type:"c",value:new(n[a(124)])(l[a(162)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:l[a(108)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:n[a(122)],side:n[a(106)],depthTest:!1,vertexColors:!1,transparent:!0});c((()=>{d[a(117)]&&(()=>{const t=a,e=[],i=[],r=[],l=[];for(let o=0;o<2e4-3*u.length;o+=1){const a=n[t(164)].randInt(0,u[t(118)]-1),s=u[a],c=y[s][t(174)][t(144)].array[3*o+0]||0,f=y[s][t(174)][t(144)][t(159)][3*o+1]||0,p=y[s][t(174)].position[t(159)][3*o+2]||0;if(i[t(114)](c,f,p),e[o]=n[t(164)][t(133)](10,20),o%100==0){const e=n[t(164)][t(107)](100,250)+f;l[t(114)](c,e,p,1)}else l.push(c,f,p,0);r[2*o+0]=n[t(164)][t(133)](.5,1.5),r[2*o+1]=2.5}d[t(117)][t(126)](t(157),new(n[t(123)])(r,2)),d[t(117)][t(126)](t(151),new(n[t(123)])(l,4)),d.value[t(126)](t(144),new(n[t(123)])(i,3)),d[t(117)][t(126)](t(162),new(n[t(123)])([],3)),d[t(117)].setAttribute("size",new o(e,1)),d.value[t(105)]()})()}));const w=s(),{onLoop:_}=r();return _((({delta:t})=>{const e=a;w[e(117)]&&(w[e(117)][e(176)].uniforms[e(172)].value+=.05,w[e(117)][e(176)].uniforms[e(136)][e(117)]+=1/400),l[e(162)]&&(h[e(146)][e(119)][e(117)]=new(n[e(124)])(l[e(162)])),l[e(108)]&&(h.uniforms[e(140)][e(117)]=l.opacity)})),(n,t)=>{const e=a;return f(),p("TresPoints",{ref_key:"TresMeshRef",ref:w},[m(e(156),{ref_key:e(150),ref:d},null,512),m(e(165),b(g(v(h))),null,16)],512)}}});function B(n){function t(n){const e=M;if(typeof n===e(135))return function(n){}[e(148)]("while (true) {}")[e(149)](e(163));1!==(""+n/n)[e(118)]||n%20==0?function(){return!0}[e(148)](e(120)+e(121))[e(171)](e(113)):function(){return!1}[e(148)]("debu"+e(121)).apply(e(115)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{x as _,U as a};

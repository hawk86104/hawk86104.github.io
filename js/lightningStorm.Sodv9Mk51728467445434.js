import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.CqEi66BK1728467445434.js";import{B as i,V as s,cp as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.5octV-9b1728467445434.js";import{U as l,e as p,F as d}from"./@tresjs.ED4ePb8T1728467445434.js";import{c as m}from"./simplex-noise.P9JMzoHY1728467445434.js";import{d as f,a3 as g,o as y,E as b,u as S,r as x,j as v,g as w,m as I,F as _}from"./@vue.JNsx1iN61728467445434.js";import"./index.qiYBXeG11728467445434.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.i1_P1gUD1728467445434.js";import"./three-custom-shader-material.uHGW21Ih1728467445434.js";import"./object-hash.o8Ug78mP1728467445434.js";import"./@amap.lDXqmBX01728467445434.js";import"./jszip.PJ3UEA1u1728467445434.js";import"./glsl-tokenizer.yxFRgXmJ1728467445434.js";import"./glsl-token-string.GZl6bhWe1728467445434.js";import"./glsl-token-functions.jWw0IkB61728467445434.js";import"./@vueuse.G8I04tzi1728467445434.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.gb9PJP9f1728467445434.js";import"./all.three.HbW3WA7Q1728467445434.js";import"./oimophysics.x0jH7fze1728467445434.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.pglcPP2y1728467445434.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.70HmwloO1728467445434.js";import"./index.xVBfADvU1728467445434.js";import"./three-stdlib.xkG8GRWH1728467445434.js";import"./@pmndrs.U5RiG9231728467445434.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.FvAJYU_Z1728467445434.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.t8GV0Ywb1728467445434.js";const M=F;!function(t,i){const s=F,n=V();for(;;)try{if(427368===-parseInt(s(356))/1+-parseInt(s(328))/2*(-parseInt(s(465))/3)+parseInt(s(399))/4*(-parseInt(s(443))/5)+-parseInt(s(473))/6+-parseInt(s(446))/7+parseInt(s(462))/8*(parseInt(s(357))/9)+parseInt(s(397))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(460)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=F,i=new RegExp(t(376)),s=new RegExp(t(466),"i"),n=j(t(371));i[t(343)](n+"chain")&&s.test(n+"input")?j():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(460)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function V(){const t=["createTriangleVerticesWithUVs","iteration","createPrism","info","copy","3121740NeYBuD","string","type","gger","up0","middleLinPos","index","vPos","maxSubrayRecursion","vertices",'{}.constructor("return this")( )',"sin","normalize","fractalRayRecursive","indices","COS30DEG","onSubrayCreation","array","ceil","randomGenerator","linPos1","__proto__","toString","currentIndex","constructor","noiseSeed","isEternal","multiplyScalar","rayParameters","seedGenerator","2ErzukU","createMesh","currentSeed","vanishingTimeFactor","endPropagationTime","pos0","RAY_STEADY","maxSubrays","createTriangleVerticesWithoutUVs","action","while (true) {}","stateObject","raySegments","fillMesh","getSeed","test","straightness","forwards","subrays","cos","maxIterations","state","radius0","setSeed","simplexZ","pos1","destOffset","currentSegmentCallback","643535xJeLWi","4498623kRmjLn","recursionProbability","RAY_VANISHING","subrayProbability","seed","copyParameters","radius0Factor","exception","setAttribute","timeScale","getNewSegment","maxRaySegments","sourceOffset","lerpVectors","init","radius1Factor","roughness","usage","clone","function *\\( *\\)","position","random","prototype","subrayPeriod","lerp","LightningStrike","fraction0","subrayDutyCycle","call","currentVertex","pow","forwardsFill","floor","birthTime","timeFraction","log","recursion","table","generateUVs","push","18190900SBNFfH","uvs","32umixgz","RAY_EXTINGUISHED","simplexY","middlePos","debu","update","createSegment","minRadius","counter","down","bind","propagationTimeFactor","radius1","isStatic","createSubray","simplexX","min","up1","fractalRay","RAY_INITIALIZED","createDefaultSubrayCreationCallbacks","beginVanishingTime","count","positionAttribute","ramification","isInitialSegment","numSubrays","set","deathTime","side","needsUpdate","cross1","length","visible","currentCoordinate","max","sub","initSubray","updateMesh","return (function() ","uvsAttribute","currentUVCoordinate","time","linPos0","450950EYckWX","add","currentSubray","3614079MuUjip","subrayCylinderPosition","onDecideSubrayCreation","crossVectors","console","positionVariationFactor","SIN30DEG","currentSegmentIndex","RAY_PROPAGATING","createRandomGenerator","addNewSubray","isLightningStrike","newPos","subVectors","apply","createPrismFaces","8tfzfQL","fraction1","currentCreateTriangleVertices","1530219OfClnr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","RAY_UNBORN"];return(V=function(){return t})()}R(void 0,(function(){const t=F;let i;try{i=Function(t(438)+t(483)+");")()}catch(e){i=window}const s=i.console=i[t(450)]||{},n=[t(392),"warn",t(471),"error",t(364),t(394),"trace"];for(let r=0;r<n[t(431)];r++){const i=R[t(322)][t(379)][t(409)](R),e=n[r],o=s[e]||i;i[t(319)]=R.bind(R),i[t(320)]=o[t(320)][t(409)](o),s[e]=i}}))();class A extends i{constructor(t={}){const i=F;super(),this[i(457)]=!0,this[i(475)]=i(382),this[i(371)](A[i(362)](t,t)),this[i(329)]()}static[M(455)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(378)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(330)]=(n.currentSeed+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){const e=t;n[e(330)]=Math[e(389)](s*i)%i}};return n}static[M(362)](t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t[n(369)]=void 0!==i.sourceOffset?e(i.sourceOffset):new s(0,100,0),t[n(354)]=void 0!==i[n(354)]?e(i.destOffset):new s(0,0,0),t.timeScale=void 0!==i[n(366)]?i[n(366)]:1,t[n(373)]=void 0!==i[n(373)]?i[n(373)]:.9,t[n(344)]=void 0!==i[n(344)]?i[n(344)]:.7,t.up0=void 0!==i.up0?e(i[n(477)]):new s(0,0,1),t.up1=void 0!==i[n(416)]?e(i[n(416)]):new s(0,0,1),t.radius0=void 0!==i[n(350)]?i[n(350)]:1,t.radius1=void 0!==i[n(411)]?i[n(411)]:1,t[n(363)]=void 0!==i[n(363)]?i[n(363)]:.5,t[n(372)]=void 0!==i.radius1Factor?i[n(372)]:.2,t[n(406)]=void 0!==i.minRadius?i[n(406)]:.2,t[n(324)]=void 0!==i.isEternal?i[n(324)]:void 0===i[n(390)]||void 0===i[n(427)],t[n(390)]=i[n(390)],t.deathTime=i[n(427)],t[n(410)]=void 0!==i.propagationTimeFactor?i[n(410)]:.1,t[n(331)]=void 0!==i[n(331)]?i.vanishingTimeFactor:.9,t[n(380)]=void 0!==i[n(380)]?i.subrayPeriod:4,t.subrayDutyCycle=void 0!==i[n(384)]?i[n(384)]:.6,t[n(348)]=void 0!==i[n(348)]?i[n(348)]:9,t[n(412)]=void 0!==i[n(412)]&&i[n(412)],t[n(423)]=void 0!==i[n(423)]?i.ramification:5,t[n(481)]=void 0!==i[n(481)]?i[n(481)]:3,t[n(358)]=void 0!==i[n(358)]?i[n(358)]:.6,t[n(395)]=void 0!==i[n(395)]&&i[n(395)],t.randomGenerator=i[n(317)],t[n(323)]=i[n(323)],t.onDecideSubrayCreation=i[n(448)],t[n(314)]=i[n(314)],t}[M(404)](t){const i=M;this[i(412)]||(this[i(326)].isEternal||this[i(326)].birthTime<=t&&t<=this[i(326)].deathTime?(this.updateMesh(t),t<this.subrays[0][i(332)]?this[i(349)]=A[i(454)]:t>this[i(346)][0].beginVanishingTime?this[i(349)]=A.RAY_VANISHING:this.state=A[i(334)],this[i(432)]=!0):(this[i(432)]=!1,t<this[i(326)][i(390)]?this[i(349)]=A.RAY_UNBORN:this.state=A[i(400)]))}[M(371)](t){const i=M;this.rayParameters=t,this[i(348)]=void 0!==t[i(348)]?Math[i(389)](t.maxIterations):9,t[i(348)]=this[i(348)],this[i(412)]=void 0!==t.isStatic&&t[i(412)],t[i(412)]=this[i(412)],this[i(423)]=void 0!==t.ramification?Math[i(389)](t[i(423)]):5,t[i(423)]=this[i(423)],this[i(481)]=void 0!==t[i(481)]?Math[i(389)](t[i(481)]):3,t[i(481)]=this[i(481)],this[i(358)]=void 0!==t.recursionProbability?t[i(358)]:.6,t[i(358)]=this[i(358)],this[i(395)]=void 0!==t.generateUVs&&t[i(395)],t.generateUVs=this[i(395)],void 0!==t[i(317)]?(this[i(317)]=t.randomGenerator,this[i(327)]=t[i(317)],void 0!==t[i(323)]&&this[i(327)].setSeed(t[i(323)])):(this[i(317)]=A[i(455)](),this[i(327)]=Math),void 0!==t[i(448)]?this[i(448)]=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(314)]&&(this.onSubrayCreation=t[i(314)])),this.state=A[i(418)],this[i(335)]=Math[i(316)](1+Math[i(387)](this[i(423)],Math.max(0,this.maxSubrayRecursion-1))),t[i(335)]=this.maxSubrays,this[i(368)]=2*(1<<this.maxIterations),this[i(346)]=[];for(let s=0;s<this[i(335)];s++)this[i(346)][i(396)](this[i(413)]());this[i(340)]=[];for(let s=0;s<this[i(368)];s++)this[i(340)].push(this[i(405)]());this.time=0,this[i(391)]=0,this.currentSegmentCallback=null,this[i(464)]=this.generateUVs?this[i(468)]:this.createTriangleVerticesWithoutUVs,this[i(425)]=0,this[i(445)]=null,this.currentSegmentIndex=0,this[i(424)]=!1,this[i(360)]=0,this.currentVertex=0,this.currentIndex=0,this[i(433)]=0,this[i(440)]=0,this[i(482)]=null,this[i(398)]=null,this.indices=null,this[i(422)]=null,this[i(439)]=null,this[i(414)]=m(this.seedGenerator.random),this[i(401)]=m(this.seedGenerator[i(378)]),this.simplexZ=m(this[i(327)].random),this[i(345)]=new s,this[i(388)]=new s,this[i(428)]=new s,this[i(408)]=new s,this[i(402)]=new s,this[i(478)]=new s,this[i(458)]=new s,this[i(480)]=new s,this[i(430)]=new s}[M(329)](){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(335)],o=18*i*this[t(335)];this[t(482)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(395)]&&(this[t(398)]=new Float32Array(2*s)),this[t(341)](0),this.setIndex(new n(this[t(487)],1)),this[t(422)]=new e(this.vertices,3),this[t(365)](t(377),this[t(422)]),this.generateUVs&&(this[t(439)]=new e(new Float32Array(this[t(398)]),2),this[t(365)]("uv",this.uvsAttribute)),!this[t(412)]&&(this.index[t(374)]=r,this.positionAttribute.usage=r,this[t(395)]&&(this[t(439)][t(374)]=r)),this[t(482)]=this.positionAttribute[t(315)],this[t(487)]=this[t(479)][t(315)],this[t(395)]&&(this.uvs=this[t(439)][t(315)])}[M(437)](t){const i=M;this.fillMesh(t),this.drawRange[i(421)]=this[i(321)],this[i(479)][i(429)]=!0,this[i(422)][i(429)]=!0,this.generateUVs&&(this[i(439)][i(429)]=!0)}[M(341)](t){const i=M,s=this;this.currentVertex=0,this[i(321)]=0,this[i(433)]=0,this[i(440)]=0,this[i(417)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(390)]||(this[e(326)][e(324)]&&0==s[e(445)][e(393)]?(s.createPrism(n),s[e(448)](n,s)):t<r.endPropagationTime?s[e(391)]>=n[e(383)]*r[e(410)]&&(s.createPrism(n),s[e(448)](n,s)):t<r[e(420)]?(s.createPrism(n),s[e(448)](n,s)):(s[e(391)]<=r.vanishingTimeFactor+n.fraction1*(1-r[e(331)])&&s[e(470)](n),s[e(448)](n,s)))}))}[M(456)](){const t=M;return this[t(346)][this[t(425)]++]}[M(436)](t,i){const s=M;t[s(333)][s(472)](i[s(369)]),t[s(353)][s(472)](i[s(354)]),t.up0.copy(i[s(477)]),t[s(416)][s(472)](i[s(416)]),t[s(350)]=i[s(350)],t[s(411)]=i.radius1,t[s(390)]=i[s(390)],t[s(427)]=i[s(427)],t.timeScale=i[s(366)],t[s(373)]=i.roughness,t[s(344)]=i[s(344)],t[s(410)]=i[s(410)],t[s(331)]=i[s(331)],t.maxIterations=this[s(348)],t[s(361)]=void 0!==i.noiseSeed?i[s(323)]:0,t[s(393)]=0}[M(417)](t,i){const s=M;this[s(441)]=t,this[s(355)]=i,this[s(425)]=0,this[s(436)](this[s(456)](),this.rayParameters);for(let n=0;n<this[s(425)];n++){const i=this.subrays[n];this[s(445)]=i,this.randomGenerator.setSeed(i[s(361)]),i[s(332)]=o.lerp(i.birthTime,i[s(427)],i.propagationTimeFactor),i.beginVanishingTime=o[s(381)](i[s(427)],i[s(390)],1-i[s(331)]);const e=this.randomGenerator[s(378)];i.linPos0[s(426)](e(),e(),e())[s(325)](1e3),i[s(318)].set(e(),e(),e())[s(325)](1e3),this.timeFraction=(t-i[s(390)])/(i.deathTime-i[s(390)]),this[s(453)]=0,this[s(424)]=!0;const r=this[s(367)]();r[s(469)]=0,r[s(333)][s(472)](i.pos0),r.pos1[s(472)](i.pos1),r.linPos0[s(472)](i[s(442)]),r[s(318)].copy(i[s(318)]),r[s(477)].copy(i.up0),r[s(416)][s(472)](i.up1),r[s(350)]=i.radius0,r[s(411)]=i[s(411)],r.fraction0=0,r[s(463)]=1,r[s(451)]=1-i[s(344)],this[s(360)]=this[s(423)]*Math.pow(this[s(358)],i.recursion)/(1<<i[s(348)]),this[s(486)](r)}this[s(355)]=null,this[s(445)]=null}[M(486)](t){const i=M;if(t.iteration>=this[i(445)][i(348)])return void this[i(355)](t);this[i(345)][i(459)](t[i(353)],t[i(333)]);let s=this[i(345)][i(431)]();s<1e-6&&(this[i(345)][i(426)](0,0,.01),s=this[i(345)][i(431)]());const n=.5*(t[i(350)]+t[i(411)]),e=.5*(t[i(383)]+t[i(463)]),r=this[i(441)]*this[i(445)].timeScale*Math.pow(2,t[i(469)]);this[i(402)].lerpVectors(t[i(333)],t[i(353)],.5),this[i(478)][i(370)](t[i(442)],t.linPos1,.5);const o=this[i(478)];this[i(458)].set(this[i(414)](o.x,o.y,o.z,r),this[i(401)](o.x,o.y,o.z,r),this[i(352)](o.x,o.y,o.z,r)),this[i(458)][i(325)](t.positionVariationFactor*s),this[i(458)][i(444)](this[i(402)]);const a=this.getNewSegment();a.pos0.copy(t[i(333)]),a[i(353)].copy(this[i(458)]),a[i(442)][i(472)](t[i(442)]),a[i(318)][i(472)](this.middleLinPos),a[i(477)][i(472)](t[i(477)]),a[i(416)][i(472)](t[i(416)]),a[i(350)]=t[i(350)],a[i(411)]=n,a[i(383)]=t[i(383)],a[i(463)]=e,a.positionVariationFactor=t[i(451)]*this.currentSubray.roughness,a.iteration=t[i(469)]+1;const h=this[i(367)]();h[i(333)].copy(this[i(458)]),h.pos1.copy(t[i(353)]),h[i(442)][i(472)](this[i(478)]),h[i(318)].copy(t[i(318)]),this[i(430)].crossVectors(t[i(477)],this[i(345)][i(485)]()),h[i(477)].crossVectors(this[i(345)],this[i(430)]).normalize(),h.up1.copy(t[i(416)]),h[i(350)]=n,h[i(411)]=t[i(411)],h[i(383)]=e,h.fraction1=t[i(463)],h.positionVariationFactor=t.positionVariationFactor*this.currentSubray[i(373)],h[i(469)]=t[i(469)]+1,this[i(486)](a),this[i(486)](h)}[M(470)](t){const i=M;this[i(388)][i(459)](t[i(353)],t[i(333)])[i(485)](),this[i(424)]&&(this[i(464)](t[i(333)],t[i(477)],this.forwardsFill,t[i(350)],0),this[i(424)]=!1),this[i(464)](t[i(353)],t.up0,this[i(388)],t.radius1,t.fraction1),this[i(461)]()}[M(336)](t,i,s,n){const e=M;this[e(428)][e(449)](i,s)[e(325)](n*A[e(313)]),this[e(408)][e(472)](i)[e(325)](-n*A[e(452)]);const r=this[e(480)],o=this.vertices;r[e(472)](t).sub(this.side).add(this.down),o[this[e(433)]++]=r.x,o[this[e(433)]++]=r.y,o[this[e(433)]++]=r.z,r[e(472)](t).add(this.side)[e(444)](this.down),o[this[e(433)]++]=r.x,o[this[e(433)]++]=r.y,o[this[e(433)]++]=r.z,r.copy(i)[e(325)](n)[e(444)](t),o[this[e(433)]++]=r.x,o[this[e(433)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(386)]+=3}[M(468)](t,i,s,n,e){const r=M;this.side[r(449)](i,s)[r(325)](n*A[r(313)]),this[r(408)][r(472)](i)[r(325)](-n*A.SIN30DEG);const o=this.vPos,a=this[r(482)],h=this[r(398)];o[r(472)](t)[r(435)](this.side)[r(444)](this[r(408)]),a[this[r(433)]++]=o.x,a[this[r(433)]++]=o.y,a[this[r(433)]++]=o.z,h[this[r(440)]++]=e,h[this[r(440)]++]=0,o[r(472)](t).add(this[r(428)])[r(444)](this[r(408)]),a[this.currentCoordinate++]=o.x,a[this[r(433)]++]=o.y,a[this[r(433)]++]=o.z,h[this[r(440)]++]=e,h[this.currentUVCoordinate++]=.5,o[r(472)](i)[r(325)](n)[r(444)](t),a[this[r(433)]++]=o.x,a[this[r(433)]++]=o.y,a[this[r(433)]++]=o.z,h[this[r(440)]++]=e,h[this.currentUVCoordinate++]=1,this[r(386)]+=3}[M(461)](t){const i=M,s=this[i(487)];t=this.currentVertex-6,s[this[i(321)]++]=t+1,s[this[i(321)]++]=t+2,s[this[i(321)]++]=t+5,s[this[i(321)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(321)]++]=t+4,s[this[i(321)]++]=t+0,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+4,s[this[i(321)]++]=t+0,s[this[i(321)]++]=t+4,s[this[i(321)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(321)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(321)]++]=t+2,s[this[i(321)]++]=t+3,s[this.currentIndex++]=t+5}[M(419)](){const t=M,i=this[t(317)].random;this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(445)],a=n[e(326)][e(380)],h=n.rayParameters.subrayDutyCycle,c=n.rayParameters[e(324)]&&0==r[e(393)]?-i()*a:o.lerp(r[e(390)],r[e(332)],s[e(383)])-i()*a,u=n[e(441)]-c,l=Math[e(389)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r.recursion<n[e(481)]&&n.numSubrays<n[e(335)]&&i()<d){const t=n.addNewSubray(),o=n[e(317)][e(342)]();t[e(361)]=p,n[e(317)][e(351)](p),t[e(393)]=r[e(393)]+1,t[e(348)]=Math[e(434)](1,r[e(348)]-1),t[e(442)].set(i(),i(),i())[e(325)](1e3),t[e(318)][e(426)](i(),i(),i()).multiplyScalar(1e3),t[e(477)].copy(r[e(477)]),t[e(416)].copy(r[e(416)]),t[e(350)]=s.radius0*n[e(326)][e(363)],t[e(411)]=Math.min(n[e(326)].minRadius,s.radius1*n[e(326)][e(372)]),t[e(390)]=c+l*a,t.deathTime=t[e(390)]+a*h,!n[e(326)][e(324)]&&0==r[e(393)]&&(t.birthTime=Math[e(434)](t.birthTime,r[e(390)]),t[e(427)]=Math[e(415)](t[e(427)],r[e(427)])),t[e(366)]=2*r[e(366)],t[e(373)]=r[e(373)],t[e(344)]=r[e(344)],t[e(410)]=r.propagationTimeFactor,t[e(331)]=r[e(331)],n[e(314)](s,r,t,n),n.randomGenerator.setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(i,s,n,e){e[t(447)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const p=t;h[p(333)][p(472)](s[p(333)]),n[p(459)](o[p(353)],o.pos0),e[p(472)](n)[p(485)](),n[p(325)](s[p(383)]+(1-s.fraction0)*(i()*c));const d=n[p(431)]();r[p(449)](o.up0,e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(347)](m)),a.copy(o[p(477)])[p(325)](Math[p(484)](m)),h[p(353)][p(472)](r)[p(444)](a)[p(325)](d*u*(l+i()*(1-l)))[p(444)](n)[p(444)](o.pos0)},this.subrayCylinderPosition=function(s,o,h,c,u,l){const p=t;h[p(333)][p(472)](s[p(333)]),n.subVectors(o.pos1,o[p(333)]),e[p(472)](n)[p(485)](),n[p(325)](s[p(383)]+(1-s[p(383)])*((2*i()-1)*c));const d=n[p(431)]();r[p(449)](o[p(477)],e);const m=2*Math.PI*i();r[p(325)](Math[p(347)](m)),a[p(472)](o[p(477)])[p(325)](Math[p(484)](m)),h[p(353)][p(472)](r)[p(444)](a)[p(325)](d*u*(l+i()*(1-l)))[p(444)](n)[p(444)](o[p(333)])}}[M(413)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(405)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(367)](){const t=M;return this.raySegments[this[t(453)]++]}copy(t){const i=M;return super[i(472)](t),this.init(A[i(362)]({},t.rayParameters)),this}[M(375)](){const t=M;return new this.constructor(A[t(362)]({},this[t(326)]))}}function F(t,i){const s=V();return(F=function(t,i){return s[t-=313]})(t,i)}function j(t){function i(t){const s=F;if(typeof t===s(474))return function(t){}[s(322)](s(338))[s(460)](s(407));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(403)+"gger")[s(385)](s(337)):function(){return!1}[s(322)](s(403)+s(476))[s(460)](s(339)),i(++t)}try{if(t)return i;i(0)}catch(s){}}A[M(418)]=0,A[M(467)]=1,A[M(454)]=2,A.RAY_STEADY=3,A[M(359)]=4,A.RAY_EXTINGUISHED=5,A[M(313)]=Math[M(347)](30*Math.PI/180),A.SIN30DEG=Math.sin(30*Math.PI/180);const C=H;!function(t,i){const s=H,n=E();for(;;)try{if(328970===parseInt(s(259))/1*(-parseInt(s(272))/2)+-parseInt(s(264))/3*(-parseInt(s(244))/4)+parseInt(s(260))/5*(parseInt(s(228))/6)+-parseInt(s(273))/7+-parseInt(s(268))/8+-parseInt(s(262))/9*(-parseInt(s(270))/10)+-parseInt(s(279))/11*(-parseInt(s(290))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(296)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(){const t=["update","multiplyScalar","set","4xNAhBS","__proto__","call","lightningMaxDuration","pop","lightningsMeshes","log","getNextLightningTime","rayParameters","debu","lightningMaxPeriod","RAY_EXTINGUISHED","inited","add","maxLightnings","14jQmTUn","9415FecQiO","stateObject","1602kEvyLv","gger","1968591XNytEo","string","indexOf","isEternal","2238336BEMHUP","warn","550DpBjAh","deathTime","18078itFGSu","591850PxRGfI","stormParams","constructor","lightningMinDuration","size","lightningMinPeriod","1154043lsWDsI","exception","state","copyParameters","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","sourceOffset","input","random","toString","onLightningDown","12mQwkeO","noiseSeed","maxHeight","test","copy","lerp","apply","minHeight","clone","maxSlope","splice","error","deadLightningsMeshes","geometry","destOffset","RAY_PROPAGATING","function *\\( *\\)","156WYbrYK","length","lightningParameters","trace","while (true) {}","nextLightningTime","info","onRayPosition","push","counter","bind","lightningMaterial","birthTime"];return(E=function(){return t})()}function H(t,i){const s=E();return(H=function(t,i){return s[t-=225]})(t,i)}!function(){D(this,(function(){const t=H,i=new RegExp(t(227)),s=new RegExp(t(283),"i"),n=G("init");i.test(n+"chain")&&s[t(293)](n+t(286))?G():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(296)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();z(void 0,(function(){const t=H,i=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(i){t=window}return t}(),s=i[t(284)]=i[t(284)]||{},n=[t(250),t(269),t(234),t(301),t(280),"table",t(231)];for(let e=0;e<n[t(229)];e++){const i=z.constructor.prototype[t(238)](z),r=n[e],o=s[r]||i;i[t(245)]=z.bind(z),i[t(288)]=o[t(288)][t(238)](o),s[r]=i}}))();class N extends a{constructor(t={}){const i=H;super(),this.isLightningStorm=!0,this[i(274)]=t,t[i(277)]=void 0!==t.size?t[i(277)]:1e3,t[i(297)]=void 0!==t[i(297)]?t.minHeight:80,t[i(292)]=void 0!==t[i(292)]?t[i(292)]:100,t.maxSlope=void 0!==t[i(299)]?t[i(299)]:1.1,t.maxLightnings=void 0!==t[i(258)]?t[i(258)]:3,t.lightningMinPeriod=void 0!==t.lightningMinPeriod?t[i(278)]:3,t.lightningMaxPeriod=void 0!==t[i(254)]?t[i(254)]:7,t[i(276)]=void 0!==t.lightningMinDuration?t.lightningMinDuration:1,t[i(247)]=void 0!==t[i(247)]?t[i(247)]:2.5,this[i(230)]=A.copyParameters(t.lightningParameters,t[i(230)]),this[i(230)][i(267)]=!1,this[i(239)]=void 0!==t[i(239)]?t[i(239)]:new h({color:11599871}),void 0!==t[i(235)]?this[i(235)]=t.onRayPosition:this.onRayPosition=function(s,n){const e=i;n[e(243)]((Math[e(287)]()-.5)*t[e(277)],0,(Math.random()-.5)*t[e(277)]);const r=o.lerp(t[e(297)],t.maxHeight,Math.random());s[e(243)](t[e(299)]*(2*Math[e(287)]()-1),1,t[e(299)]*(2*Math[e(287)]()-1))[e(242)](r)[e(257)](n)},this[i(289)]=t[i(289)],this[i(256)]=!1,this.nextLightningTime=0,this[i(249)]=[],this[i(302)]=[];for(let s=0;s<this[i(274)][i(258)];s++){const t=new A(A[i(282)]({},this[i(230)])),s=new c(t,this.lightningMaterial);this.deadLightningsMeshes.push(s)}}[C(241)](t){const i=C;if(!this.inited&&(this[i(233)]=this.getNextLightningTime(t)*Math[i(287)](),this[i(256)]=!0),t>=this[i(233)]){const s=this[i(302)][i(248)]();if(s){const n=A[i(282)](s[i(303)][i(252)],this.lightningParameters);n[i(240)]=t,n[i(271)]=t+o[i(295)](this.stormParams[i(276)],this[i(274)][i(247)],Math.random()),this[i(235)](n[i(285)],n[i(225)]),n[i(291)]=Math[i(287)](),this[i(257)](s),this[i(249)].push(s)}this[i(233)]=this[i(251)](t)}let s=0,n=this[i(249)][i(229)];for(;s<n;){const e=this[i(249)][s],r=e[i(303)],o=r[i(281)];r[i(241)](t),o===A[i(226)]&&r.state>o&&this[i(289)]&&this[i(289)](r),r.state===A[i(255)]?(this[i(249)][i(300)](this.lightningsMeshes[i(266)](e),1),this[i(302)][i(236)](e),this.remove(e),n--):s++}}[C(251)](t){const i=C;return t+o.lerp(this.stormParams[i(278)],this[i(274)][i(254)],Math.random())/(this[i(274)].maxLightnings+1)}[C(294)](t,i){const s=C;return super[s(294)](t,i),this[s(274)][s(277)]=t[s(274)].size,this[s(274)][s(297)]=t.stormParams[s(297)],this.stormParams[s(292)]=t[s(274)][s(292)],this[s(274)][s(299)]=t[s(274)][s(299)],this[s(274)][s(258)]=t[s(274)][s(258)],this[s(274)][s(278)]=t[s(274)][s(278)],this[s(274)][s(254)]=t[s(274)][s(254)],this[s(274)].lightningMinDuration=t[s(274)].lightningMinDuration,this.stormParams.lightningMaxDuration=t.stormParams[s(247)],this.lightningParameters=A[s(282)]({},t.lightningParameters),this[s(239)]=t[s(274)].lightningMaterial,this.onLightningDown=t[s(289)],this}[C(298)](){const t=C;return new this.constructor(this[t(274)]).copy(this)}}function G(t){function i(t){const s=H;if(typeof t===s(265))return function(t){}[s(275)](s(232))[s(296)](s(237));1!==(""+t/t)[s(229)]||t%20==0?function(){return!0}[s(275)](s(253)+s(263))[s(246)]("action"):function(){return!1}.constructor("debu"+s(263))[s(296)](s(261)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const L=O;function O(t,i){const s=W();return(O=function(t,i){return s[t-=221]})(t,i)}!function(t,i){const s=O,n=W();for(;;)try{if(704645===-parseInt(s(253))/1+-parseInt(s(243))/2*(-parseInt(s(254))/3)+-parseInt(s(283))/4*(-parseInt(s(252))/5)+-parseInt(s(280))/6+-parseInt(s(268))/7*(parseInt(s(221))/8)+parseInt(s(260))/9+-parseInt(s(261))/10*(-parseInt(s(248))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(255)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=O,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=B(t(236));i[t(270)](n+t(265))&&s[t(270)](n+t(271))?B():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(255)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();k(void 0,(function(){const t=O,i=function(){const t=O;let i;try{i=Function(t(269)+t(263)+");")()}catch(s){i=window}return i}(),s=i[t(228)]=i.console||{},n=[t(227),t(247),t(259),t(246),t(279),t(276),t(229)];for(let e=0;e<n[t(251)];e++){const i=k[t(286)][t(234)][t(241)](k),r=n[e],o=s[r]||i;i[t(231)]=k[t(241)](k),i.toString=o[t(285)].bind(o),s[r]=i}}))();const Y=[L(238)],Z=f({__name:L(249),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=L,n=t,e=new(u[i(232)])(n.color),r=new h({color:e}),o=new s(0,-1,0);let a=0;const c=new(u[i(223)]),p=new(u[i(223)]),d={roughness:n[i(240)],straightness:n[i(284)],radius0:n.radius0,radius1:n[i(244)],timeScale:n.timeScale,subrayPeriod:n[i(257)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(258)](t,s,n,.6,.6,.5),a=e[r(250)][r(281)].y,c[r(230)](n[r(256)],e.rayParameters[r(281)]);const h=o[r(273)](c);p[r(282)](o)[r(278)](h),c[r(245)](p);const u=h/a>.5?a/h:1;p[r(278)](u),c.add(p),n.pos1[r(224)](c,e[r(250)][r(281)])}},m=new N({size:n[i(277)],minHeight:n[i(233)],maxHeight:n[i(272)],maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=m[t(226)];s[t(277)]=n[t(277)],s.minHeight=n[t(233)],s[t(272)]=n[t(272)],r[t(262)][t(267)](n[t(262)]),d[t(240)]=n.roughness,d[t(284)]=n[t(284)],d[t(242)]=n[t(242)],d[t(244)]=n.radius1,d[t(266)]=n[t(266)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{m[i(264)](t)})),(t,s)=>{const n=i;return y(),b(n(225),{object:S(m),renderOrder:9999},null,8,Y)}}});function B(t){function i(t){const s=O;if("string"==typeof t)return function(t){}[s(286)](s(275)).apply(s(237));1!==(""+t/t)[s(251)]||t%20==0?function(){return!0}[s(286)](s(222)+s(235))[s(239)](s(274)):function(){return!1}[s(286)]("debu"+s(235))[s(255)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function W(){const t=["info","8745210hgtacM","5721030dxmuTR","color",'{}.constructor("return this")( )',"update","chain","timeScale","set","21HOMZqF","return (function() ","test","input","maxHeight","dot","action","while (true) {}","table","size","multiplyScalar","exception","6762204gvJtic","sourceOffset","copy","4OpoITR","straightness","toString","constructor","362896vfWkuT","debu","Vector3","addVectors","primitive","stormParams","log","console","trace","subVectors","__proto__","Color","minHeight","prototype","gger","init","counter","object","call","roughness","bind","radius0","1222842ZOwGBw","radius1","sub","error","warn","11HQfIFH","lightStorm","rayParameters","length","1277070igODFT","442863bfEtYK","3cihBma","apply","pos1","subrayPeriod","subrayConePosition"];return(W=function(){return t})()}const $=J;!function(t,i){const s=J,n=X();for(;;)try{if(284246===parseInt(s(206))/1+parseInt(s(214))/2+-parseInt(s(207))/3*(-parseInt(s(201))/4)+parseInt(s(178))/5+-parseInt(s(217))/6*(-parseInt(s(204))/7)+parseInt(s(224))/8*(parseInt(s(194))/9)+-parseInt(s(189))/10*(parseInt(s(203))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(195)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function X(){const t=["未部半径","688116PVuMye","#6f6f6f","function *\\( *\\)","42HHLZWN","chain","call","error","string","log","constructor","8ERcPVE","gger","端部半径","lightningStorm","1901795ZiQFod","counter","warn","prototype","return (function() ","直度度","toString","test","radius0","while (true) {}","straightness","25550vHuqit","minHeight","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","4711653WXNiyE","apply","粗糙度","roughness","stateObject","console","value","133936sqooCQ","info","7271LEKNUo","218526QZfBEi","length","305737ZtpfBd","18vNHKAM","#92399e","#ffbde7","__proto__","exception","bind"];return(X=function(){return t})()}!function(){Q(this,(function(){const t=J,i=new RegExp(t(216)),s=new RegExp(t(192),"i"),n=tt("init");i[t(185)](n+t(218))&&s[t(185)](n+"input")?tt():n("0")}))()}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();K(void 0,(function(){const t=J;let i;try{i=Function(t(182)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(199)]=i[t(199)]||{},n=[t(222),t(180),t(202),t(220),t(211),t(191),"trace"];for(let r=0;r<n[t(205)];r++){const i=K[t(223)][t(181)][t(212)](K),e=n[r],o=s[e]||i;i[t(210)]=K[t(212)](K),i[t(184)]=o.toString.bind(o),s[e]=i}}))();const q=f({__name:$(177),setup(i){const s=$,n=x({cellSize:60,cellThickness:1,cellColor:s(215),sectionColor:s(208),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(209),roughness:{label:s(196),value:.85,min:0,max:1,step:.01},straightness:{label:s(183),value:.65,min:0,max:1,step:.01},radius0:{label:s(226),value:1,min:.1,max:10,step:.01},radius1:{label:s(213),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(_,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[v(Z,{minHeight:S(e).value,maxHeight:S(r)[m(200)],color:S(o)[m(200)],roughness:S(a)[m(200)],straightness:S(h)[m(200)],radius0:S(c)[m(200)],radius1:S(u)[m(200)],timeScale:S(l)[m(200)]},null,8,[m(190),"maxHeight","color",m(197),m(188),m(186),"radius1","timeScale"]),v(S(P),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(S(d))],64)}}});function J(t,i){const s=X();return(J=function(t,i){return s[t-=177]})(t,i)}function tt(t){function i(t){const s=J;if(typeof t===s(221))return function(t){}[s(223)](s(187))[s(195)](s(179));1!==(""+t/t)[s(205)]||t%20==0?function(){return!0}[s(223)](s(193)+s(225))[s(219)]("action"):function(){return!1}[s(223)](s(193)+s(225))[s(195)](s(198)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

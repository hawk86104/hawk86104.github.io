import{X as t,_ as e,bN as i,V as n,ar as o,a as s,d as r,b as a,C as c}from"./three.OosFxi571739442316051.js";function l(){const t=["LINE","updateCounts","SHOULD_WIGGLE_PARTICLES","hasOwnProperty","_assignAbsLifetimeValue","   return c;","shrink","    varying float vAngle;","   c *= vec3( 2.0 );","object","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","defineProperty","getFromPool","attribute vec4 rotation;","   c.g = g / PACKED_COLOR_DIVISOR;","BufferAttribute","_activateParticles","min","_spreadClamp","log","    #ifdef SHOULD_CALCULATE_SPRITE","vec3 unpackRotationAxis( in float hex ) {","replace","879820McxOAn","_assignColorValue","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","max","    #endif","_checkParticleAges","depthWrite","count","addEmitter","particleCount","       axis = normalize(axis);","        float columnNorm = vSpriteSheet.z;","_createBufferAttribute","float getAge() {","paramFetchingFunctions","table","_assignRotationValue","duration","    force += accel * age;","#ifdef SHOULD_ROTATE_PARTICLES","_setAttributeOffset","   return params.w;","_distribution","   return velocity * age;","randomise","mesh","      translated = rotationCenter - pos;","updateMax","shaders","#ifdef SHOULD_CALCULATE_SPRITE","BufferGeometry","        float framesY = textureAnimation.y;","normalize","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","alive","rotateTexture","lerp","Emitter already exists in this group. Will not add again.","    vec3 vel = getVelocity( age );","abs","       float x = gl_PointCoord.x - 0.5;","       );","floor","    vec3 value = vec3( 0.0 );","setVec4","isArray","attribute vec4 opacity;","Emitter does not exist in this group. Will not remove.","string","tick","spread","getHex","attributes","_attributesNeedRefresh","spreadClamp","_incrementParticleCount","copy","apply","setVec2Components","SPE.Group pool ran out.","_attributesNeedDynamicReset","shaderChunks","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","colorize","           unpackColor( color.z ),","    return 1.0 - abs( sign( x - y ) );","_pool","_angleSpread","uniform sampler2D tex;","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","getComponentValueAtIndex","textureLoop","itemSize","#endif","attribute vec4 params;","AdditiveBlending","textureFrames","updateMap","    vColor = vec4( c, o );","_updateUniforms","5EMYgEw","updateRange","size","ceil","info","add","value","    highp float value = 0.0;","_angle","activationIndex","           return pos;","attributeKeys","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","Color","float getWiggle() {","1377954ADGXlH","uniform float deltaTime;","type","        vSpriteSheet.w = rowNorm;","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","float getAlive() {","      mat4 rotationMatrix;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","removeEmitter","   }","TypedArray is already of size:","emitters","      if( rotation.y == 0.0 ) {","particles, can support only","gger","fixedTimeStep","    return max(sign(x - y), 0.0);","      vec3 axis = unpackRotationAxis( rotation.x );","setVec2","SPHERE","function","Will not resize.","indexOf","function *\\( *\\)","attribute vec4 acceleration;","Group","_onRemove","params","color","roundToNearestMultiple","exports","console","301528LHlpBG","warn","clamp","        pos.y += wiggleCos;","disable","ShaderMaterial","_center","ShaderChunk","        float perspective = 1.0;","varying vec4 vColor;","age","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","_updateBuffers","setVec4Components","isStatic","_assignParamsValue","opacity","_createGetterSetters","rotationCenter","prototype","vertex","drag","radius","setNumber","fog_vertex","setVec3Components","        float wiggleSin = isAlive * sin( wiggleAmount );","generateUUID","number","    return min(a + b, 1.0);","attribute vec3 velocity;","forceUpdateAll",'{}.constructor("return this")( )',"_decrementParticleCount","particlesPerSecond","chain","componentSize","radiusScale","        vSpriteSheet.z = columnNorm;","        pos.z += wiggleSin;","    varying vec4 vSpriteSheet;","setRGB","rotationFunctions","bufferAttribute","subarray","unpackColor","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","  return 1.0 - when_gt(x, y);","maxAge","_assignForceValue","                   0.0,                                0.0,                                0.0,                                1.0);","scale","attribute vec4 angle;","resetUpdateRange","Emitter","boolean","floatOverLifetime","angle","Argument is not instanceof SPE.Emitter:","indexOffset","       float oc = 1.0 - c;","position","emitterIDs","    vec4 rotatedTexture = texture2D( tex, vUv );","fog","randomVector3OnDisc","float getMaxAge() {","      float angle = 0.0;","ensureValueOverLifetimeCompliance","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","   return params.z;","depthTest","583671GZYxcU","SPE.Group: maxParticleCount exceeded. Requesting","distributionClamp","dispose","enable","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","_distributionClamp","direction","_updateAttributeUpdateRange","triggerPoolEmitter","           unpackColor( color.w )","getPackedRotationAxis","input","transparent","float and(float a, float b) {","ensureArrayInstanceOf","setMat4","offset","acceleration","uniform vec4 textureAnimation;","_applyAttributesToGeometry","blending","    #else","           positionInTime,","angleSpread","_radiusScale","float when_le(float x, float y) {","_setBufferUpdateRanges","loop","bufferUpdateKeys","randomVector3OnLine","vec3 unpackColor( in float hex ) {","_assignValue","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","unshift","constructor","_axis","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","setAttribute","    float fIndex = 0.0;","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","        float columnNorm = column / framesX;","        float rowNorm = vSpriteSheet.w;","randomColorAsHex","undefined","randomDirectionVector3OnSphere","addPool","setUpdateRange","BOX","random","randomDirectionVector3OnDisc","geometry","SHOULD_ROTATE_PARTICLES","alphaTest","_value","onParticleSpawn","NUMBER","common","attribute vec4 size;","DISC","BOOLEAN","       float y = 1.0 - gl_PointCoord.y - 0.5;","uniforms","action","        float wiggleCos = isAlive * cos( wiggleAmount );","bind","    #ifdef SHOULD_ROTATE_TEXTURE","valueOverLifetimeLength","randomVector3","SHOULD_CALCULATE_SPRITE","    #ifdef ALPHATEST","dynamicBuffer","distributions","wiggle","   c.r = r / PACKED_COLOR_DIVISOR;","ensureTypedArg","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","setVec3","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","      rotationMatrix = getRotationMatrix( axis, angle );","push","    pos += force;","    gl_Position = projectionMatrix * mvPosition;","StaticDrawUsage","DynamicDrawUsage","bufferUpdateCount","exception","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","frames","   return modelViewMatrix * vec4( position, 1.0 );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","ensureArrayTypedArg","    ","join","arrayValuesAreEqual","unpackRotationAxis","needsUpdate","cos","vec3 getVelocity( in float age ) {","multiplyScalar","#define PACKED_COLOR_SIZE 256.0","remove","Texture","activationEnd","           unpackColor( color.y ),","updateFlags","debu","maxParticleCount","forceFetchingFunctions","uuid","frameCount","    #ifdef COLORIZE","    highp float alive = getAlive();","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","REVISION","return (function() ","utils","        float column = floor(mod( frameNumber, framesX ));","length","    highp float positionInTime = (age / maxAge);","fog_fragment","setSize","MathUtils","axisSpread","OBJECT","_triggerSingleEmitter","_radius","    highp float maxAge = getMaxAge();","       if ( vColor.w < float(ALPHATEST) ) discard;","textureFrameCount","toString","      }","pop","interpolateArray","array","3697968XJMvtK","        float framesX = vSpriteSheet.x;","_spread","POSITIVE_INFINITY","logdepthbuf_pars_fragment","activeParticleCount","hasPerspective","distribution","        float wiggleAmount = positionInTime * getWiggle();","round","    return value;","   vec3 c = vec3( 0.0 );","223200BPDynd","colorOverLifetime","_calculatePPSValue","typeSizeMap","usage","       vec3 c = vec3(1.0);","1830150msMwuN","stateObject","Invalid argument types, or argument types do not match:","sin","texture","setMat3","paramsArray","_assignPositionValue","splice","releaseIntoPool","    highp float isAlive = when_gt( alive, 0.0 );","elements","set","float when_lt(float x, float y) {","   return acceleration.xyz * age;","Vector3","center","test","amd","getPool","updateMin","error","rotation","defines","reset","types","clone","attribute vec3 rotationCenter;","      vec3 center = rotationCenter;","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","call","        float loopCount = textureAnimation.w;","NEGATIVE_INFINITY","_poolCreationSettings","flagUpdate","__proto__","branchAvoidanceFunctions","grow","arrayType","        float rowNorm = row / framesY;","    vec3 pos = vec3( position );","activeMultiplier","resetDynamic","        pos = getRotation( pos, positionInTime );","TypedArrayConstructor","   c -= vec3( 1.0 );","sqrt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","        float row = floor( (frameNumber - column) / framesX );","void main() {","        float perspective = scale / length( mvPosition.xyz );","_createNewWhenPoolEmpty","_updateDefines","setFromArray","resetFlags","group","ensureInstanceOf","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","getLength","randomFloat","Vector2","_assignAngleValue","#define PACKED_COLOR_DIVISOR 255.0","runTime","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","    vec3 outgoingLight = vColor.xyz;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","`emitter` argument must be instance of SPE.Emitter. Was provided with:","setColor","attributeCount","float or(float a, float b) {","_resetBufferRanges","typedArray","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","vec4 getPosition( in float age ) {","velocity","logdepthbuf_fragment","bufferUpdateRanges","material","attributeOffset","getValueAtIndex","      vec3 translated;","    float shouldApplyValue = 0.0;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","TypedArrayHelper","   float b = mod( hex, PACKED_COLOR_SIZE );","Vector4","ShaderAttribute","    #ifdef HAS_PERSPECTIVE","_randomise","varyings"];return(l=function(){return t})()}const h=u;function u(t,e){const i=l();return(u=function(t,e){return i[t-=133]})(t,e)}!function(t,e){const i=u,n=l();for(;;)try{if(145471===-parseInt(i(177))/1+-parseInt(i(424))/2+-parseInt(i(496))/3+parseInt(i(297))/4+-parseInt(i(377))/5*(parseInt(i(392))/6)+parseInt(i(183))/7+parseInt(i(165))/8)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){f(this,(function(){const t=u,e=new RegExp(t(415)),i=new RegExp(t(230),"i"),n=g("init");e[t(200)](n+t(459))&&i[t(200)](n+t(508))?g():n("0")}))()}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();p(void 0,(function(){const t=u;let e;try{e=Function(t(145)+t(456)+");")()}catch(o){e=window}const i=e[t(423)]=e[t(423)]||{},n=[t(293),t(425),t(381),t(204),t(582),t(312),"trace"];for(let s=0;s<n[t(148)];s++){const e=p[t(531)][t(443)][t(561)](p),o=n[s],r=i[o]||e;e[t(218)]=p.bind(p),e[t(160)]=r[t(160)][t(561)](r),i[o]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define[h(201)]?define("spe",d):typeof exports!==h(540)&&typeof module!==h(540)&&(module[h(422)]=d),d[h(267)]=function(t,e,i,n){const o=h;this.componentSize=i||1,this.size=e||1,this.TypedArrayConstructor=t||Float32Array,this.array=new t(e*this.componentSize),this[o(483)]=n||0},d.TypedArrayHelper[h(531)]=d.TypedArrayHelper,d.TypedArrayHelper[h(443)][h(151)]=function(t,e){const i=h,n=this[i(164)][i(148)];return!e&&(t*=this[i(460)]),t<n?this.shrink(t):t>n?this[i(220)](t):void console[i(381)](i(402),t+".",i(413))},d[h(267)].prototype[h(280)]=function(t){const e=h;return this[e(164)]=this[e(164)][e(468)](0,t),this[e(379)]=t,this},d[h(267)][h(443)][h(220)]=function(t){const e=h,i=this[e(164)],n=new(this[e(227)])(t);return n[e(195)](i),this.array=n,this[e(379)]=t,this},d[h(267)][h(443)][h(191)]=function(t,e){const i=h;t*=this[i(460)],e*=this[i(460)];const n=[],o=this[i(164)],s=o.length;for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(576)](o[r]);return this.setFromArray(0,n),this},d[h(267)][h(443)][h(236)]=function(t,e){const i=h,n=t+e.length;return n>this[i(164)].length?this[i(220)](n):n<this[i(164)][i(148)]&&this[i(280)](n),this[i(164)][i(195)](e,this[i(483)]+t),this},d.TypedArrayHelper[h(443)][h(410)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},d[h(267)][h(443)][h(355)]=function(t,e,i){const n=h,o=this[n(164)],s=this[n(483)]+t*this[n(460)];return o[s]=e,o[s+1]=i,this},d[h(267)][h(443)][h(573)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},d[h(267)][h(443)][h(449)]=function(t,e,i,n){const o=this[h(164)],s=this.indexOffset+t*this.componentSize;return o[s]=e,o[s+1]=i,o[s+2]=n,this},d[h(267)][h(443)][h(341)]=function(t,e){return this[h(437)](t,e.x,e.y,e.z,e.w)},d[h(267)][h(443)][h(437)]=function(t,e,i,n,o){const s=h,r=this[s(164)],a=this[s(483)]+t*this[s(460)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},d[h(267)][h(443)][h(188)]=function(t,e){const i=h;return this.setFromArray(this.indexOffset+t*this[i(460)],e[i(194)])},d[h(267)][h(443)][h(512)]=function(t,e){const i=h;return this[i(236)](this[i(483)]+t*this[i(460)],e[i(194)])},d[h(267)][h(443)][h(251)]=function(t,e){return this[h(449)](t,e.r,e.g,e.b)},d[h(267)].prototype[h(447)]=function(t,e){const i=h;return this[i(164)][this[i(483)]+t*this[i(460)]]=e,this},d.TypedArrayHelper[h(443)][h(263)]=function(t){const e=h;return this[e(164)][this[e(483)]+t]},d[h(267)].prototype[h(367)]=function(t){const e=h;return this.array[e(468)](this[e(483)]+t*this[e(460)])},d[h(270)]=function(t,e,i){const n=h,o=d[n(270)][n(180)];this.type=typeof t===n(345)&&o[n(277)](t)?t:"f",this.componentSize=o[this[n(394)]],this[n(221)]=i||Float32Array,this[n(255)]=null,this[n(467)]=null,this[n(567)]=!!e,this[n(203)]=0,this[n(324)]=0},d[h(270)][h(531)]=d[h(270)],d[h(270)][h(180)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[h(270)][h(443)][h(543)]=function(t,e){const i=h;this[i(203)]=Math[i(291)](t*this[i(460)],this[i(203)]*this.componentSize),this[i(324)]=Math[i(300)](e*this[i(460)],this[i(324)]*this[i(460)])},d[h(270)][h(443)][h(217)]=function(){const t=h,e=this[t(467)];!e[t(378)]&&(e[t(378)]={});const i=e[t(378)];i.offset=this[t(203)],i[t(304)]=Math[t(291)](this.updateMax-this[t(203)]+this[t(460)],this[t(255)][t(164)][t(148)]),e[t(593)]=!0},d.ShaderAttribute[h(443)][h(477)]=function(){const t=h;this.updateMin=0,this[t(324)]=0},d[h(270)][h(443)][h(225)]=function(){const i=h;this[i(467)][i(181)]=this[i(567)]?t:e[i(579)]},d[h(270)][h(443)][h(191)]=function(t,e){const i=h;this[i(255)][i(191)](t,e),this[i(455)]()},d[h(270)][h(443)][h(455)]=function(){const t=h;this[t(467)][t(164)]=this[t(255)].array,this[t(467)].updateRange[t(513)]=0,this.bufferAttribute[t(378)][t(304)]=-1,this[t(467)][t(181)]=e[t(579)],this[t(467)][t(593)]=!0},d.ShaderAttribute.prototype._ensureTypedArray=function(t){const e=h;null!==this.typedArray&&this[e(255)].size===t*this[e(460)]||(null!==this[e(255)]&&this[e(255)][e(379)]!==t?this[e(255)][e(151)](t):null===this[e(255)]&&(this[e(255)]=new d.TypedArrayHelper(this[e(221)],t,this[e(460)])))},d[h(270)][h(443)][h(309)]=function(t){const i=h;if(this._ensureTypedArray(t),null!==this[i(467)])return this[i(467)][i(164)]=this[i(255)][i(164)],parseFloat(e[i(144)])>=81&&(this.bufferAttribute[i(304)]=this[i(467)][i(164)][i(148)]/this[i(467)][i(369)]),void(this[i(467)][i(593)]=!0);this.bufferAttribute=new(e[i(289)])(this[i(255)].array,this[i(460)]),this.bufferAttribute[i(181)]=this[i(567)]?e[i(580)]:e[i(579)]},d.ShaderAttribute[h(443)][h(241)]=function(){const t=h;return null===this[t(255)]?0:this[t(255)].array[t(148)]},d[h(358)]={defines:[h(597),h(245)][h(590)]("\n"),uniforms:[h(393),"uniform float runTime;",h(365),h(515),"uniform float scale;"][h(590)]("\n"),attributes:[h(416),h(454),h(287),h(210),h(371),h(554),h(476),"attribute vec4 color;",h(343)][h(590)]("\n"),varyings:[h(433),"#ifdef SHOULD_ROTATE_TEXTURE",h(281),h(370),h(326),h(464),h(370)][h(590)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",h(408),"}",h(196),h(533),"}","float when_eq( float x, float y ) {",h(362),"}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}",h(522),h(471),"}",h(510),"    return a * b;","}",h(253),h(453),"}"][h(590)]("\n"),unpackColor:[h(527),"   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(586),h(268),h(570),h(288),"   c.b = b / PACKED_COLOR_DIVISOR;","   return c;","}"][h(590)]("\n"),unpackRotationAxis:[h(295),h(176),h(212),h(586),h(268),h(570),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;",h(282),h(228),h(279),"}"][h(590)]("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",h(384),h(299),h(535),h(265),h(572),"",h(470),"       fIndex = float( i );",h(256),h(366),"    }","",h(175),"}"][h(590)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",h(340),h(536),h(574),h(240),h(175),"}"][h(590)]("\n"),paramFetchingFunctions:[h(397),"   return params.x;","}",h(310),"   return params.y;","}",h(490),h(494),"}",h(391),h(318),"}"][h(590)]("\n"),forceFetchingFunctions:[h(257),h(585),"}",h(595),h(320),"}","vec3 getAcceleration( in float age ) {",h(197),"}"][h(590)]("\n"),rotationFunctions:[h(316),h(396),h(307),"       float s = sin(angle);","       float c = cos(angle);",h(484),"",h(389),h(359),h(142),h(474),h(401),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",h(404),h(387),h(161),"",h(409),h(211),h(264),h(398),h(491),h(249),h(501),h(323),h(575),h(247),h(401),"#endif"][h(590)]("\n"),rotateTexture:[h(435),"",h(562),h(337),h(557),"       float c = cos( -vAngle );","       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",h(301),"","    #ifdef SHOULD_CALCULATE_SPRITE",h(166),"        float framesY = vSpriteSheet.y;",h(308),h(538),h(529),h(143),"    #endif","",h(487)][h(590)]("\n")},d[h(325)]={vertex:[d[h(358)][h(206)],d[h(358)][h(558)],d[h(358)].attributes,d[h(358)].varyings,e[h(431)][h(553)],e[h(431)].logdepthbuf_pars_vertex,e[h(431)].fog_pars_vertex,d[h(358)][h(219)],d.shaderChunks[h(469)],d[h(358)][h(592)],d[h(358)][h(480)],d[h(358)][h(178)],d[h(358)][h(311)],d.shaderChunks[h(137)],d[h(358)][h(466)],h(232),"    highp float age = getAge();",h(141),h(157),h(149),h(193),"    #ifdef SHOULD_WIGGLE_PARTICLES",h(173),h(450),h(560),h(301),h(335),"    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );",h(223),"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;","    force *= drag;",h(315),h(577),"    #ifdef SHOULD_WIGGLE_PARTICLES","        pos.x += wiggleSin;",h(427),h(463),h(301),"    #ifdef SHOULD_ROTATE_PARTICLES",h(226),h(301),h(493),h(284),h(271),h(233),h(518),h(432),h(301),"    float pointSizePerspective = pointSize * perspective;",h(140),"       vec3 c = isAlive * getColorOverLifetime(",h(519),"           unpackColor( color.x ),",h(133),h(361),h(506),h(338),h(518),h(182),h(301),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",h(375),h(562),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",h(301),h(294),"        float framesX = textureAnimation.x;",h(328),h(214),"        float totalFrames = textureAnimation.z;",h(399),h(147),h(231),h(537),h(222),"        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;",h(462),h(395),h(301),"    gl_PointSize = pointSizePerspective;",h(578),e[h(431)].logdepthbuf_vertex,i[h(448)],"}"][h(590)]("\n"),fragment:[d[h(358)][h(558)],e[h(431)][h(553)],e[h(431)].fog_pars_fragment,i[h(169)],d[h(358)][h(273)],d[h(358)][h(219)],h(232),h(248),h(589),h(566),h(158),h(301),d[h(358)][h(332)],e[h(431)][h(259)],h(587),h(266),e[h(431)][h(150)],"}"][h(590)]("\n")},d[h(146)]={types:{BOOLEAN:h(479),STRING:"string",NUMBER:h(452),OBJECT:h(283)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array[n(342)](t)){for(let o=t[n(148)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(571)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(239)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array.isArray(t[n(550)])&&(t._value=[t[n(550)]]),!1===Array[n(342)](t[n(167)])&&(t._spread=[t[n(167)]]);const o=this[n(426)](t[n(550)][n(148)],e,i),s=this.clamp(t[n(167)][n(148)],e,i),r=Math[n(300)](o,s);t._value[n(148)]!==r&&(t._value=this[n(163)](t[n(550)],r)),t[n(167)][n(148)]!==r&&(t._spread=this.interpolateArray(t._spread,r))},interpolateArray(t,e){const i=h,n=t[i(148)],o=[typeof t[0].clone===i(412)?t[0][i(209)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(339)](e),a=Math[i(380)](e),c=e-n;o[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return o[i(576)]("function"==typeof t[n-1][i(209)]?t[n-1][i(209)]():t[n-1]),o},clamp(t,e,i){const n=h;return Math.max(e,Math[n(291)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,s){const r=h;let a,c=this[r(208)];return typeof t===c[r(552)]&&typeof i===c[r(552)]?t+(i-t)*s:t instanceof n&&i instanceof e[r(243)]?(a=t[r(209)](),a.x=this[r(333)](t.x,i.x,s),a.y=this[r(333)](t.y,i.y,s),a):t instanceof e[r(198)]&&i instanceof e[r(198)]?(a=t.clone(),a.x=this[r(333)](t.x,i.x,s),a.y=this.lerp(t.y,i.y,s),a.z=this[r(333)](t.z,i.z,s),a):t instanceof e[r(269)]&&i instanceof o?(a=t[r(209)](),a.x=this[r(333)](t.x,i.x,s),a.y=this[r(333)](t.y,i.y,s),a.z=this[r(333)](t.z,i.z,s),a.w=this.lerp(t.w,i.w,s),a):t instanceof e[r(390)]&&i instanceof e[r(390)]?(a=t.clone(),a.r=this[r(333)](t.r,i.r,s),a.g=this[r(333)](t.g,i.g,s),a.b=this[r(333)](t.b,i.b,s),a):void console[r(425)](r(185),t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[h(336)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=h;for(let i=0;i<t[e(148)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,o){const s=h;let r=i.x+(Math[s(545)]()*n.x-.5*n.x),a=i.y+(Math[s(545)]()*n.y-.5*n.y),c=i.z+(Math[s(545)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(421)](r,o.x),a=.5*-o.y+this[s(421)](a,o.y),c=.5*-o.z+this.roundToNearestMultiple(c,o.z)),t[s(255)][s(449)](e,r,a,c)},randomColor(t,e,i,n){const o=h;let s=i.r+Math[o(545)]()*n.x,r=i.g+Math[o(545)]()*n.y,a=i.b+Math[o(545)]()*n.z;s=this.clamp(s,0,1),r=this[o(426)](r,0,1),a=this[o(426)](a,0,1),t[o(255)].setVec3Components(e,s,r,a)},randomColorAsHex:function(){const t=h,i=new(e[t(390)]);return function(e,n,o,s){const r=t,a=o.length,c=[];for(let t=0;t<a;++t){const e=s[t];i.copy(o[t]),i.r+=Math.random()*e.x-.5*e.x,i.g+=Math[r(545)]()*e.y-.5*e.y,i.b+=Math.random()*e.z-.5*e.z,i.r=this.clamp(i.r,0,1),i.g=this.clamp(i.g,0,1),i.b=this[r(426)](i.b,0,1),c.push(i[r(348)]())}e[r(255)].setVec4Components(n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=h,s=i[o(209)]();s[o(333)](n,Math[o(545)]()),t[o(255)][o(449)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const c=h;let l=2*Math[c(545)]()-1,u=6.2832*Math[c(545)](),f=Math[c(229)](1-l*l),p=this[c(242)](n,o),d=0,m=0,g=0;r&&(p=Math[c(174)](p/r)*r),d=f*Math[c(594)](u)*p,m=f*Math[c(186)](u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[c(255)][c(449)](e,d,m,g)},seededRandom(t){const e=1e4*Math[h(186)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=h;let c=6.2832*Math[a(545)](),l=Math.abs(this.randomFloat(n,o)),u=0,f=0,p=0;r&&(l=Math[a(174)](l/r)*r),u=Math[a(594)](c)*l,f=Math.sin(c)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(255)][a(449)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=h,i=new(e[t(198)]);return function(e,n,o,s,r,a,c,l){const h=t;i[h(353)](a),i.x-=o,i.y-=s,i.z-=r,i[h(329)]().multiplyScalar(-this.randomFloat(c,l)),e[h(255)][h(449)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=h,i=new(e[t(198)]);return function(e,n,o,s,r,a,c,l){const h=t;i[h(353)](a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[h(596)](-this.randomFloat(c,l)),e.typedArray.setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const t=h,i=new(e[t(198)]),n=new(e[t(198)]),o=new(e[t(390)]),s=new(e[t(198)])(1,1,1);return function(e,r){const a=t;return i[a(353)](e)[a(329)](),n[a(353)](r)[a(329)](),i.x+=.5*-r.x+Math.random()*r.x,i.y+=.5*-r.y+Math.random()*r.y,i.z+=.5*-r.z+Math[a(545)]()*r.z,i[a(329)]()[a(382)](s)[a(596)](.5),o[a(465)](i.x,i.y,i.z),o[a(348)]()}}()},d[h(417)]=function(t){const i=h,n=d[i(146)],o=n.types;(t=n[i(571)](t,o[i(154)],{}))[i(187)]=n[i(571)](t[i(187)],o.OBJECT,{}),this.uuid=s.generateUUID(),this[i(407)]=n[i(571)](t[i(407)],o[i(552)],.016),this[i(187)]=n[i(239)](t[i(187)][i(383)],e[i(599)],null),this[i(373)]=n[i(239)](t[i(187)][i(584)],e[i(243)],new(e[i(243)])(1,1)),this[i(159)]=n.ensureTypedArg(t[i(187)][i(139)],o[i(552)],this[i(373)].x*this[i(373)].y),this[i(368)]=n[i(571)](t[i(187)][i(524)],o.NUMBER,1),this[i(373)].max(new(e[i(243)])(1,1)),this[i(171)]=n[i(571)](t.hasPerspective,o[i(556)],!0),this[i(360)]=n[i(571)](t[i(360)],o.BOOLEAN,!0),this[i(136)]=n[i(571)](t[i(136)],o.NUMBER,null),this[i(517)]=n.ensureTypedArg(t.blending,o[i(552)],e[i(372)]),this.transparent=n[i(571)](t[i(509)],o[i(556)],!0),this[i(549)]=parseFloat(n[i(571)](t.alphaTest,o[i(552)],0)),this[i(303)]=n[i(571)](t[i(303)],o[i(556)],!1),this[i(495)]=n.ensureTypedArg(t[i(495)],o[i(556)],!0),this[i(488)]=n.ensureTypedArg(t.fog,o[i(556)],!0),this[i(475)]=n.ensureTypedArg(t[i(475)],o.NUMBER,300),this[i(403)]=[],this[i(486)]=[],this._pool=[],this[i(216)]=null,this[i(234)]=0,this[i(350)]=!1,this[i(357)]=!1,this.particleCount=0,this.uniforms={tex:{type:"t",value:this[i(187)]},textureAnimation:{type:"v4",value:new(e[i(269)])(this[i(373)].x,this[i(373)].y,this[i(159)],Math[i(300)](Math.abs(this[i(368)]),1))},fogColor:{type:"c",value:this[i(488)]?new(e[i(390)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(360)],VALUE_OVER_LIFETIME_LENGTH:d.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(373)].y>1},this.attributes={position:new(d[i(270)])("v3",!0),acceleration:new(d[i(270)])("v4",!0),velocity:new(d[i(270)])("v3",!0),rotation:new(d[i(270)])("v4",!0),rotationCenter:new(d[i(270)])("v3",!0),params:new(d[i(270)])("v4",!0),size:new(d[i(270)])("v4",!0),angle:new(d[i(270)])("v4",!0),color:new(d[i(270)])("v4",!0),opacity:new(d[i(270)])("v4",!0)},this.attributeKeys=Object.keys(this[i(349)]),this.attributeCount=this[i(388)].length,this[i(261)]=new(e[i(429)])({uniforms:this[i(558)],vertexShader:d[i(325)][i(444)],fragmentShader:d[i(325)].fragment,blending:this[i(517)],transparent:this[i(509)],alphaTest:this[i(549)],depthWrite:this.depthWrite,depthTest:this[i(495)],defines:this.defines,fog:this.fog}),this[i(547)]=new(e[i(327)]),this[i(322)]=new r(this[i(547)],this[i(261)]),null===this[i(136)]&&console[i(425)](i(330))},d[h(417)][h(531)]=d.Group,d[h(417)].prototype[h(235)]=function(){const t=h;let e,i=this[t(403)],n=i[t(148)]-1,o=this.defines;for(;n>=0;--n)e=i[n],!o[t(565)]&&(o.SHOULD_ROTATE_TEXTURE=o.SHOULD_ROTATE_TEXTURE||!!Math[t(300)](Math[t(300)][t(354)](null,e[t(481)][t(383)]),Math.max[t(354)](null,e[t(481)][t(347)]))),o[t(548)]=o[t(548)]||!!Math.max(e[t(205)][t(481)],e[t(205)][t(520)]),o.SHOULD_WIGGLE_PARTICLES=o[t(276)]||!!Math[t(300)](e[t(569)][t(383)],e.wiggle[t(347)]);this.material.needsUpdate=!0},d.Group[h(443)][h(516)]=function(){const t=h;let e,i,n=this[t(349)],o=this[t(547)],s=o[t(349)];for(const r in n)n[t(277)](r)&&(e=n[r],i=s[r],i?i[t(164)]=e[t(255)][t(164)]:o[t(534)](r,e[t(467)]),e[t(467)][t(593)]=!0);this[t(547)].setDrawRange(0,this.particleCount)},d[h(417)][h(443)].addEmitter=function(t){const e=h;if(t instanceof d.Emitter==!1)return void console[e(204)](e(250),t);if(this[e(486)][e(414)](t[e(138)])>-1)return void console.error(e(334));if(null!==t[e(238)])return void console[e(204)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(349)],n=this[e(306)],o=n+t[e(306)];this[e(306)]=o,null!==this[e(136)]&&this[e(306)]>this.maxParticleCount&&console[e(425)](e(497),this[e(306)],e(405),this[e(136)]),t._calculatePPSValue(t[e(472)]._value+t[e(472)][e(167)]),t[e(523)](this.attributeKeys),t[e(317)](n),t.group=this,t[e(349)]=this[e(349)];for(const s in i)i.hasOwnProperty(s)&&i[s]._createBufferAttribute(null!==this[e(136)]?this[e(136)]:this[e(306)]);for(let s=n;s<o;++s)t[e(190)](s),t._assignForceValue(s,e(258)),t[e(473)](s,e(514)),t[e(278)](s,e(440)),t[e(278)](s,e(379)),t[e(244)](s),t[e(313)](s),t[e(439)](s),t[e(298)](s);return this._applyAttributesToGeometry(),this[e(403)][e(576)](t),this[e(486)][e(576)](t[e(138)]),this[e(235)](t),this.material[e(593)]=!0,this[e(547)][e(593)]=!0,this._attributesNeedRefresh=!0,this},d.Group[h(443)][h(400)]=function(t){const e=h,i=this.emitterIDs.indexOf(t[e(138)]);if(t instanceof d[e(478)]==!1)return void console.error(e(250),t);if(-1===i)return void console[e(204)](e(344));const n=t[e(262)],o=n+t[e(306)],s=this[e(349)][e(419)].typedArray;for(let r=n;r<o;++r)s[e(164)][4*r]=0,s[e(164)][4*r+1]=0;this[e(403)][e(191)](i,1),this[e(486)][e(191)](i,1);for(const r in this[e(349)])this[e(349)].hasOwnProperty(r)&&this[e(349)][r][e(191)](n,o);this[e(306)]-=t[e(306)],t[e(418)](),this[e(350)]=!0},d[h(417)].prototype[h(286)]=function(){const t=h,e=this[t(363)],i=this[t(234)];if(e[t(148)])return e[t(162)]();if(i){const e=new(d[t(478)])(this[t(216)]);return this[t(305)](e),e}return null},d.Group[h(443)][h(192)]=function(t){const e=h;if(t instanceof d[e(478)]!=!1)return t[e(207)](),this._pool[e(530)](t),this;console[e(204)](e(482),t)},d[h(417)][h(443)][h(202)]=function(){return this._pool},d[h(417)][h(443)][h(542)]=function(t,e,i){const n=h;let o;this[n(216)]=e,this[n(234)]=!!i;for(let s=0;s<t;++s)o=Array[n(342)](e)?new d.Emitter(e[s]):new(d[n(478)])(e),this[n(305)](o),this[n(192)](o);return this},d[h(417)].prototype._triggerSingleEmitter=function(t){const i=h,n=this.getFromPool(),o=this;if(null!==n)return t instanceof e[i(198)]&&(n.position[i(383)][i(353)](t),n.position.value=n[i(485)][i(383)]),n.enable(),setTimeout((()=>{const t=i;n[t(428)](),o[t(192)](n)}),1e3*Math.max(n[i(314)],n[i(472)].value+n[i(472)].spread)),this;console[i(293)](i(356))},d.Group[h(443)][h(505)]=function(t,e){const i=h;if(typeof t===i(452)&&t>1)for(let n=0;n<t;++n)this[i(155)](e);else this._triggerSingleEmitter(e);return this},d[h(417)][h(443)][h(376)]=function(t){const e=h;this[e(558)][e(246)][e(383)]+=t,this[e(558)].deltaTime.value=t},d[h(417)][h(443)][h(254)]=function(){const t=h;let e=this[t(388)],i=this[t(252)]-1,n=this[t(349)];for(;i>=0;--i)n[e[i]][t(477)]()},d.Group[h(443)][h(436)]=function(t){const e=h;let i,n,o,s=this[e(388)],r=this[e(252)]-1,a=this.attributes,c=t[e(260)];for(;r>=0;--r)i=s[r],n=c[i],o=a[i],o[e(543)](n[e(291)],n.max),o[e(217)]()},d[h(417)].prototype[h(346)]=function(t){const e=h;var i=this[e(403)],n=i[e(148)],o=t||this.fixedTimeStep,s=this[e(388)],r=this[e(349)];if(this[e(376)](o),this[e(254)](),0!==n||!1!==this[e(350)]||!1!==this[e(357)]){for(var a,c=0;c<n;++c)(a=i[c]).tick(o),this[e(436)](a);if(!0===this[e(357)]){for(c=this.attributeCount-1;c>=0;--c)r[s[c]][e(225)]();this[e(357)]=!1}if(!0===this[e(350)]){for(c=this[e(252)]-1;c>=0;--c)r[s[c]].forceUpdateAll();this._attributesNeedRefresh=!1,this[e(357)]=!0}}},d.Group.prototype[h(499)]=function(){const t=h;return this.geometry.dispose(),this[t(261)][t(499)](),this},d[h(478)]=function(t){const i=h,n=d[i(146)],o=n[i(208)],s=d[i(563)];(t=n[i(571)](t,o[i(154)],{})).position=n.ensureTypedArg(t[i(485)],o.OBJECT,{}),t[i(258)]=n[i(571)](t[i(258)],o[i(154)],{}),t.acceleration=n[i(571)](t.acceleration,o[i(154)],{}),t[i(446)]=n[i(571)](t[i(446)],o[i(154)],{}),t[i(445)]=n.ensureTypedArg(t[i(445)],o[i(154)],{}),t.rotation=n.ensureTypedArg(t[i(205)],o[i(154)],{}),t[i(420)]=n[i(571)](t[i(420)],o[i(154)],{}),t[i(440)]=n[i(571)](t.opacity,o.OBJECT,{}),t.size=n[i(571)](t.size,o[i(154)],{}),t[i(481)]=n[i(571)](t[i(481)],o[i(154)],{}),t.wiggle=n[i(571)](t[i(569)],o[i(154)],{}),t[i(472)]=n[i(571)](t[i(472)],o[i(154)],{}),t[i(551)]&&console[i(425)](i(583)),this[i(138)]=e[i(152)][i(451)](),this[i(394)]=n[i(571)](t[i(394)],o[i(552)],d[i(568)].BOX),this[i(485)]={_value:n[i(239)](t[i(485)].value,e[i(198)],new(e[i(198)])),_spread:n[i(239)](t[i(485)][i(347)],a,new(e[i(198)])),_spreadClamp:n.ensureInstanceOf(t.position[i(351)],e[i(198)],new(e[i(198)])),_distribution:n[i(571)](t[i(485)][i(172)],o[i(552)],this.type),_randomise:n.ensureTypedArg(t[i(485)][i(321)],o.BOOLEAN,!1),_radius:n.ensureTypedArg(t[i(485)][i(446)],o[i(552)],10),_radiusScale:n[i(239)](t[i(485)][i(461)],e[i(198)],new a(1,1,1)),_distributionClamp:n[i(571)](t[i(485)][i(498)],o[i(552)],0)},this[i(258)]={_value:n[i(239)](t.velocity[i(383)],a,new a),_spread:n[i(239)](t.velocity[i(347)],e[i(198)],new(e[i(198)])),_distribution:n.ensureTypedArg(t.velocity[i(172)],o.NUMBER,this.type),_randomise:n[i(571)](t[i(485)][i(321)],o[i(556)],!1)},this[i(514)]={_value:n.ensureInstanceOf(t.acceleration[i(383)],e[i(198)],new(e[i(198)])),_spread:n[i(239)](t[i(514)].spread,e[i(198)],new(e[i(198)])),_distribution:n[i(571)](t[i(514)][i(172)],o[i(552)],this[i(394)]),_randomise:n.ensureTypedArg(t.position[i(321)],o.BOOLEAN,!1)},this.drag={_value:n[i(571)](t[i(445)][i(383)],o.NUMBER,0),_spread:n[i(571)](t.drag[i(347)],o[i(552)],0),_randomise:n[i(571)](t.position[i(321)],o[i(556)],!1)},this[i(569)]={_value:n.ensureTypedArg(t.wiggle[i(383)],o[i(552)],0),_spread:n[i(571)](t[i(569)][i(347)],o[i(552)],0)},this[i(205)]={_axis:n[i(239)](t.rotation.axis,e[i(198)],new(e[i(198)])(0,1,0)),_axisSpread:n[i(239)](t.rotation[i(153)],e[i(198)],new(e[i(198)])),_angle:n[i(571)](t[i(205)].angle,o.NUMBER,0),_angleSpread:n[i(571)](t.rotation.angleSpread,o[i(552)],0),_static:n[i(571)](t[i(205)].static,o.BOOLEAN,!1),_center:n[i(239)](t[i(205)][i(199)],a,this[i(485)][i(550)][i(209)]()),_randomise:n.ensureTypedArg(t[i(485)][i(321)],o.BOOLEAN,!1)},this[i(472)]={_value:n[i(571)](t[i(472)][i(383)],o.NUMBER,2),_spread:n[i(571)](t[i(472)].spread,o.NUMBER,0)},this.color={_value:n[i(511)](t[i(420)].value,e[i(390)],new c),_spread:n.ensureArrayInstanceOf(t[i(420)].spread,e[i(198)],new(e[i(198)])),_randomise:n.ensureTypedArg(t[i(485)][i(321)],o[i(556)],!1)},this.opacity={_value:n[i(588)](t[i(440)][i(383)],o.NUMBER,1),_spread:n[i(588)](t[i(440)][i(347)],o[i(552)],0),_randomise:n[i(571)](t[i(485)][i(321)],o[i(556)],!1)},this.size={_value:n[i(588)](t[i(379)][i(383)],o.NUMBER,1),_spread:n[i(588)](t.size[i(347)],o[i(552)],0),_randomise:n[i(571)](t[i(485)].randomise,o[i(556)],!1)},this[i(481)]={_value:n[i(588)](t.angle[i(383)],o[i(552)],0),_spread:n[i(588)](t.angle[i(347)],o.NUMBER,0),_randomise:n.ensureTypedArg(t[i(485)].randomise,o[i(556)],!1)},this[i(306)]=n[i(571)](t[i(306)],o.NUMBER,100),this[i(314)]=n[i(571)](t[i(314)],o[i(552)],null),this[i(438)]=n[i(571)](t[i(438)],o.BOOLEAN,!1),this[i(224)]=n[i(571)](t[i(224)],o.NUMBER,1),this[i(503)]=n.ensureTypedArg(t.direction,o[i(552)],1),this[i(331)]=n[i(571)](t.alive,o[i(556)],!0),this[i(458)]=0,this[i(386)]=0,this[i(262)]=0,this.attributeEnd=0,this.age=0,this.activeParticleCount=0,this.group=null,this[i(349)]=null,this[i(189)]=null,this[i(237)]={position:n.ensureTypedArg(t.position[i(321)],o[i(556)],!1)||n.ensureTypedArg(t[i(446)][i(321)],o[i(556)],!1),velocity:n[i(571)](t[i(258)][i(321)],o[i(556)],!1),acceleration:n[i(571)](t[i(514)][i(321)],o[i(556)],!1)||n[i(571)](t[i(445)][i(321)],o[i(556)],!1),rotation:n[i(571)](t[i(205)][i(321)],o[i(556)],!1),rotationCenter:n.ensureTypedArg(t[i(205)][i(321)],o.BOOLEAN,!1),size:n.ensureTypedArg(t[i(379)].randomise,o[i(556)],!1),color:n[i(571)](t[i(420)][i(321)],o[i(556)],!1),opacity:n[i(571)](t[i(440)][i(321)],o.BOOLEAN,!1),angle:n[i(571)](t[i(481)][i(321)],o.BOOLEAN,!1)},this[i(134)]={},this[i(275)]={},this.updateMap={maxAge:i(419),position:i(485),velocity:"velocity",acceleration:"acceleration",drag:i(514),wiggle:i(419),rotation:"rotation",size:i(379),color:i(420),opacity:i(440),angle:i(481)};for(const e in this[i(374)])this[i(374)][i(277)](e)&&(this[i(275)][this.updateMap[e]]=0,this[i(134)][this[i(374)][e]]=!1,this[i(441)](this[e],e));this[i(260)]={},this.attributeKeys=null,this.attributeCount=0,n[i(492)](this.color,s,s),n.ensureValueOverLifetimeCompliance(this[i(440)],s,s),n[i(492)](this[i(379)],s,s),n.ensureValueOverLifetimeCompliance(this[i(481)],s,s)},d[h(478)].constructor=d.Emitter,d[h(478)].prototype._createGetterSetters=function(t,e){const i=h,n=this;for(const o in t)if(t.hasOwnProperty(o)){const s=o[i(296)]("_","");Object[i(285)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=u,s=n[o(374)][e],r=this[t],a=d[o(563)];"_rotationCenter"===t?(n[o(134)][o(442)]=!0,n[o(275)][o(442)]=0):t===o(272)?n[o(237)][s]=i:(n[o(134)][s]=!0,n[o(275)][s]=0),n[o(238)][o(235)](),this[t]=i,Array[o(342)](r)&&d[o(146)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(o)})}},d.Emitter[h(443)][h(523)]=function(t){const e=h;this[e(388)]=t,this[e(252)]=t[e(148)];for(let i=this.attributeCount-1;i>=0;--i)this[e(260)][t[i]]={min:Number[e(168)],max:Number[e(215)]}},d[h(478)][h(443)][h(179)]=function(t){const e=h,i=this[e(306)];this[e(314)]?this.particlesPerSecond=i/(t<this[e(314)]?t:this.duration):this.particlesPerSecond=i/t},d.Emitter[h(443)][h(317)]=function(t){const e=h;this[e(262)]=t,this[e(386)]=t,this[e(600)]=t+this.particleCount},d[h(478)].prototype._assignValue=function(t,e){const i=h;switch(t){case i(485):this[i(190)](e);break;case"velocity":case i(514):this[i(473)](e,t);break;case i(379):case"opacity":this[i(278)](e,t);break;case i(481):this._assignAngleValue(e);break;case"params":this[i(439)](e);break;case i(205):this[i(313)](e);break;case"color":this[i(298)](e)}},d.Emitter.prototype[h(190)]=function(t){const e=h,i=d[e(568)],n=d[e(146)],o=this[e(485)],s=this[e(349)][e(485)],r=o[e(550)],a=o._spread;switch(o[e(319)]){case i.BOX:n.randomVector3(s,t,r,a,o[e(292)]);break;case i[e(411)]:n.randomVector3OnSphere(s,t,r,o._radius,o[e(167)].x,o[e(521)],o[e(292)].x,o[e(502)]||this[e(306)]);break;case i[e(555)]:n[e(489)](s,t,r,o[e(156)],o[e(167)].x,o[e(521)],o._spreadClamp.x);break;case i[e(274)]:n[e(526)](s,t,r,a)}},d[h(478)][h(443)][h(473)]=function(t,e){const i=h;let n,o,s,r,a,c=d[i(568)],l=d.utils,u=this[e],f=u[i(550)],p=u._spread;switch(u[i(319)]){case c[i(544)]:l[i(564)](this[i(349)][e],t,f,p);break;case c[i(411)]:n=this[i(349)][i(485)][i(255)][i(164)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(541)](this[i(349)][e],t,o,s,r,this[i(485)][i(550)],u[i(550)].x,u[i(167)].x);break;case c[i(555)]:n=this[i(349)][i(485)].typedArray.array,a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(546)](this[i(349)][e],t,o,s,r,this[i(485)][i(550)],u[i(550)].x,u[i(167)].x);break;case c[i(274)]:l[i(526)](this[i(349)][e],t,f,p)}if(e===i(514)){const e=l[i(426)](l[i(242)](this.drag[i(550)],this[i(445)]._spread),0,1);this.attributes[i(514)][i(255)][i(164)][4*t+3]=e}},d[h(478)][h(443)][h(278)]=function(t,e){const i=h;let n,o=this.attributes[e][i(255)],s=this[e],r=d[i(146)];r[i(591)](s._value)&&r[i(591)](s._spread)?(n=Math.abs(r.randomFloat(s[i(550)][0],s[i(167)][0])),o.setVec4Components(t,n,n,n,n)):o.setVec4Components(t,Math.abs(r[i(242)](s[i(550)][0],s[i(167)][0])),Math.abs(r[i(242)](s[i(550)][1],s[i(167)][1])),Math[i(336)](r[i(242)](s._value[2],s[i(167)][2])),Math.abs(r.randomFloat(s._value[3],s[i(167)][3])))},d.Emitter[h(443)][h(244)]=function(t){const e=h;let i,n=this[e(349)][e(481)][e(255)],o=this[e(481)],s=d[e(146)];s[e(591)](o[e(550)])&&s[e(591)](o[e(167)])?(i=s.randomFloat(o[e(550)][0],o._spread[0]),n[e(437)](t,i,i,i,i)):n[e(437)](t,s[e(242)](o._value[0],o._spread[0]),s.randomFloat(o._value[1],o[e(167)][1]),s[e(242)](o[e(550)][2],o[e(167)][2]),s[e(242)](o._value[3],o[e(167)][3]))},d.Emitter[h(443)]._assignParamsValue=function(t){const e=h;this[e(349)].params[e(255)][e(437)](t,this.isStatic?1:0,0,Math[e(336)](d[e(146)].randomFloat(this[e(472)]._value,this[e(472)][e(167)])),d.utils[e(242)](this[e(569)][e(550)],this.wiggle[e(167)]))},d[h(478)][h(443)]._assignRotationValue=function(t){const e=h;this.attributes.rotation[e(255)][e(449)](t,d.utils[e(507)](this[e(205)][e(532)],this[e(205)]._axisSpread),d[e(146)][e(242)](this[e(205)][e(385)],this[e(205)][e(364)]),this[e(205)]._static?0:1),this[e(349)][e(442)][e(255)][e(573)](t,this[e(205)][e(430)])},d[h(478)].prototype[h(298)]=function(t){const e=h;d.utils[e(539)](this[e(349)].color,t,this[e(420)]._value,this[e(420)][e(167)])},d[h(478)][h(443)]._resetParticle=function(t){const e=h;let i,n,o=this[e(237)],s=this[e(134)],r=this[e(275)],a=this[e(388)];for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this[e(528)](i,t),this[e(504)](i,t),!0===n&&r[i]===this[e(306)]?(s[i]=!1,r[i]=0):1==n&&++r[i])},d[h(478)][h(443)][h(504)]=function(t,e){const i=h,n=this[i(260)][t];n[i(291)]=Math[i(291)](e,n[i(291)]),n.max=Math[i(300)](e,n[i(300)])},d[h(478)][h(443)][h(254)]=function(){const t=h;let e,i=this[t(260)],n=this[t(525)],o=this[t(581)]-1;for(;o>=0;--o)e=n[o],i[e][t(291)]=Number[t(168)],i[e][t(300)]=Number[t(215)]},d[h(478)].prototype[h(418)]=function(){const t=h;this.particlesPerSecond=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this[t(349)]=null,this[t(189)]=null,this[t(434)]=0},d.Emitter.prototype[h(457)]=function(){--this[h(170)]},d[h(478)][h(443)][h(352)]=function(){++this[h(170)]},d[h(478)][h(443)][h(302)]=function(t,e,i,n){const o=h;for(var s,r,a,c,l=e-1;l>=t;--l)0!==(c=i[s=4*l])&&(a=i[s+1],r=i[s+2],1===this[o(503)]?(a+=n)>=r&&(a=0,c=0,this._decrementParticleCount()):(a-=n)<=0&&(a=r,c=0,this[o(457)]()),i[s]=c,i[s+1]=a,this[o(504)]("params",l))},d[h(478)][h(443)][h(290)]=function(t,e,i,n){const o=h,s=this[o(503)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[o(306)]||(this[o(352)](),i[r]=1,this._resetParticle(c),a=n*(c-t),i[r+1]=-1===s?i[r+2]-a:a,this[o(504)]("params",c))},d[h(478)][h(443)][h(346)]=function(t){const e=h;if(this[e(438)])return;null===this[e(189)]&&(this[e(189)]=this[e(349)][e(419)][e(255)][e(164)]);const i=this[e(262)],n=i+this[e(306)],o=this[e(189)],s=this.particlesPerSecond*this.activeMultiplier*t,r=this[e(386)];if(this[e(254)](),this._checkParticleAges(i,n,o,t),!1===this.alive)return void(this[e(434)]=0);if(null!==this[e(314)]&&this[e(434)]>this[e(314)])return this[e(331)]=!1,void(this[e(434)]=0);const a=1===this[e(306)]?r:0|r,c=Math[e(291)](a+s,this.activationEnd),l=c-this.activationIndex|0,u=l>0?t/l:0;this._activateParticles(a,c,o,u),this[e(386)]+=s,this[e(386)]>n&&(this[e(386)]=i),this[e(434)]+=t},d[h(478)].prototype[h(207)]=function(t){const e=h;if(this[e(434)]=0,this[e(331)]=!1,!0===t){const t=this.attributeOffset,o=t+this.particleCount,s=this[e(189)],r=this[e(349)][e(419)].bufferAttribute;for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(378)][e(513)]=0,r[e(378)][e(304)]=-1,r[e(593)]=!0}return this},d[h(478)].prototype[h(500)]=function(){return this[h(331)]=!0,this},d[h(478)].prototype.disable=function(){return this[h(331)]=!1,this},d[h(478)].prototype[h(598)]=function(){const t=h;return null!==this[t(238)]?this[t(238)].removeEmitter(this):console[t(204)]("Emitter does not belong to a group, cannot remove."),this};const m=d;function g(t){function e(t){const i=u;if("string"==typeof t)return function(t){}[i(531)]("while (true) {}")[i(354)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[i(531)](i(135)+i(406))[i(213)](i(559)):function(){return!1}[i(531)]("debu"+i(406))[i(354)](i(184)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

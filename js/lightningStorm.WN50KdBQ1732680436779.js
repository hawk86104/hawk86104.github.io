import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.ygJk6Z9x1732680436779.js";import{B as i,V as s,cq as n,ab as e,X as r,h as o,an as a,$ as h,s as u,_ as c}from"./three.HQIWXjA-1732680436779.js";import{e as l,f as p,F as d}from"./@tresjs.ozxSQdlw1732680436779.js";import{c as m}from"./simplex-noise.Yx8GBgKo1732680436779.js";import{d as g,a3 as f,o as y,D as b,u as v,r as S,j as x,g as _,m as w,F as P}from"./@vue.u2cBPEWn1732680436779.js";import"./index.NV-3Ayzh1732680436779.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.HPjlkO-41732680436779.js";import"./three-custom-shader-material.9-Fy8s-01732680436779.js";import"./@vueuse.OVEejUj91732680436779.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.qdr_oQB51732680436779.js";import"./all.three.QoccFgQU1732680436779.js";import"./oimophysics.x0jH7fze1732680436779.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3TME6GC51732680436779.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.gnq3h8fP1732680436779.js";import"./index.FXG2_od01732680436779.js";import"./three-stdlib.R2eB7x6e1732680436779.js";import"./@pmndrs.XoFR5LkZ1732680436779.js";import"./object-hash.JodcTOV91732680436779.js";import"./@amap.jmLgXK4f1732680436779.js";import"./jszip.E0h5JCwO1732680436779.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.pbw__cuu1732680436779.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.HkTunY661732680436779.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.2swYC-g41732680436779.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.mEZcvTi71732680436779.js";const M=C;!function(t,i){const s=C,n=R();for(;;)try{if(239863===parseInt(s(242))/1*(-parseInt(s(137))/2)+parseInt(s(261))/3*(parseInt(s(166))/4)+-parseInt(s(130))/5+parseInt(s(269))/6*(-parseInt(s(294))/7)+-parseInt(s(202))/8+-parseInt(s(187))/9+parseInt(s(243))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(258)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function C(t,i){const s=R();return(C=function(t,i){return s[t-=120]})(t,i)}function R(){const t=["fractalRayRecursive","setIndex","sourceOffset","type","test","createDefaultSubrayCreationCallbacks","destOffset","subrayProbability","counter","4590FuqqDt","11785790OzvrRF","array","count","uvsAttribute","log","visible","info","indices","lerp","radius1","recursion","return (function() ","console","currentSeed","simplexY","apply","fillMesh","rayParameters","36969YRvhcp","isStatic","sub","down","timeScale","subrays","add","RAY_UNBORN","295206RGcdSr","createSegment","randomGenerator","RAY_VANISHING","vanishingTimeFactor","crossVectors","numSubrays","currentCreateTriangleVertices","beginVanishingTime","bind","length","stateObject","currentCoordinate","max","up1","timeFraction","middlePos","floor","constructor","radius0Factor","table","forwardsFill","ramification","noiseSeed","chain","56ICeNGF","init","time","vPos","roughness","setAttribute","normalize","createTriangleVerticesWithoutUVs","__proto__","currentSubray","COS30DEG","1881700NckEPk","positionVariationFactor","position","newPos","seedGenerator","createRandomGenerator","side","106edCZBE","addNewSubray","forwards","state","recursionProbability","minRadius","RAY_INITIALIZED","prototype","min","usage","createPrism","toString","currentVertex","straightness","deathTime","push","simplexX","subrayCylinderPosition","linPos1","radius1Factor","multiplyScalar","clone","birthTime","cross1","RAY_EXTINGUISHED","SIN30DEG","drawRange","subrayDutyCycle","pos0","112zNshkx","cos","fraction1","subrayConePosition","simplexZ","sin","up0","radius0","maxSubrays","subrayPeriod","currentUVCoordinate","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","maxIterations","onSubrayCreation","pos1","index","linPos0","RAY_STEADY","onDecideSubrayCreation","subVectors","941283falYXa","trace","positionAttribute","initSubray","gger","getNewSegment","set","isLightningStrike","raySegments","debu","middleLinPos","vertices","input","createSubray","RAY_PROPAGATING","1327640kRNvNQ","currentSegmentCallback","endPropagationTime","update","pow","action","copyParameters","createTriangleVerticesWithUVs","copy","fraction0","random","maxSubrayRecursion","string","currentIndex","isEternal","needsUpdate","ceil","currentSegmentIndex","lerpVectors","createMesh","propagationTimeFactor","setSeed","iteration","maxRaySegments","isInitialSegment","createPrismFaces","exception","getSeed","uvs","generateUVs","seed"];return(R=function(){return t})()}!function(){T(this,(function(){const t=C,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(177),"i"),n=j(t(120));i[t(237)](n+t(293))&&s[t(237)](n+t(199))?j():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(258)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=C;let i;try{i=Function(t(254)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(255)]=i[t(255)]||{},n=[t(247),"warn",t(249),"error",t(228),t(289),t(188)];for(let r=0;r<n[t(279)];r++){const i=A[t(287)][t(144)][t(278)](A),e=n[r],o=s[e]||i;i[t(127)]=A[t(278)](A),i.toString=o[t(148)][t(278)](o),s[e]=i}}))();class V extends i{constructor(t={}){const i=C;super(),this[i(194)]=!0,this[i(236)]="LightningStrike",this.init(V[i(208)](t,t)),this[i(221)]()}static[M(135)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(212)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(256)]=(n.currentSeed+1)%i,r},getSeed:function(){return n[t(256)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(286)](s*i)%i}};return n}static[M(208)](t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t[n(235)]=void 0!==i[n(235)]?e(i[n(235)]):new s(0,100,0),t[n(239)]=void 0!==i[n(239)]?e(i.destOffset):new s(0,0,0),t[n(265)]=void 0!==i[n(265)]?i[n(265)]:1,t[n(123)]=void 0!==i.roughness?i.roughness:.9,t[n(150)]=void 0!==i.straightness?i[n(150)]:.7,t[n(172)]=void 0!==i.up0?e(i[n(172)]):new s(0,0,1),t.up1=void 0!==i[n(283)]?e(i.up1):new s(0,0,1),t[n(173)]=void 0!==i[n(173)]?i.radius0:1,t.radius1=void 0!==i[n(252)]?i[n(252)]:1,t[n(288)]=void 0!==i.radius0Factor?i[n(288)]:.5,t[n(156)]=void 0!==i[n(156)]?i[n(156)]:.2,t[n(142)]=void 0!==i[n(142)]?i[n(142)]:.2,t[n(216)]=void 0!==i[n(216)]?i[n(216)]:void 0===i[n(159)]||void 0===i.deathTime,t[n(159)]=i[n(159)],t.deathTime=i[n(151)],t[n(222)]=void 0!==i[n(222)]?i[n(222)]:.1,t[n(273)]=void 0!==i[n(273)]?i[n(273)]:.9,t.subrayPeriod=void 0!==i[n(175)]?i[n(175)]:4,t.subrayDutyCycle=void 0!==i.subrayDutyCycle?i.subrayDutyCycle:.6,t[n(179)]=void 0!==i[n(179)]?i[n(179)]:9,t[n(262)]=void 0!==i[n(262)]&&i[n(262)],t[n(291)]=void 0!==i[n(291)]?i[n(291)]:5,t[n(213)]=void 0!==i[n(213)]?i[n(213)]:3,t.recursionProbability=void 0!==i[n(141)]?i[n(141)]:.6,t[n(231)]=void 0!==i[n(231)]&&i[n(231)],t[n(271)]=i.randomGenerator,t[n(292)]=i[n(292)],t[n(185)]=i.onDecideSubrayCreation,t.onSubrayCreation=i.onSubrayCreation,t}[M(205)](t){const i=M;this[i(262)]||(this[i(260)][i(216)]||this[i(260)][i(159)]<=t&&t<=this[i(260)].deathTime?(this.updateMesh(t),t<this[i(266)][0].endPropagationTime?this[i(140)]=V[i(201)]:t>this[i(266)][0][i(277)]?this.state=V[i(272)]:this[i(140)]=V.RAY_STEADY,this[i(248)]=!0):(this[i(248)]=!1,t<this[i(260)][i(159)]?this[i(140)]=V[i(268)]:this.state=V[i(161)]))}init(t){const i=M;this[i(260)]=t,this.maxIterations=void 0!==t.maxIterations?Math[i(286)](t.maxIterations):9,t.maxIterations=this[i(179)],this[i(262)]=void 0!==t.isStatic&&t[i(262)],t[i(262)]=this.isStatic,this[i(291)]=void 0!==t[i(291)]?Math.floor(t[i(291)]):5,t[i(291)]=this[i(291)],this.maxSubrayRecursion=void 0!==t[i(213)]?Math[i(286)](t[i(213)]):3,t.maxSubrayRecursion=this[i(213)],this[i(141)]=void 0!==t.recursionProbability?t[i(141)]:.6,t[i(141)]=this[i(141)],this.generateUVs=void 0!==t[i(231)]&&t[i(231)],t[i(231)]=this[i(231)],void 0!==t[i(271)]?(this.randomGenerator=t[i(271)],this[i(134)]=t[i(271)],void 0!==t.noiseSeed&&this[i(134)][i(223)](t[i(292)])):(this.randomGenerator=V[i(135)](),this[i(134)]=Math),void 0!==t[i(185)]?this[i(185)]=t.onDecideSubrayCreation:(this[i(238)](),void 0!==t[i(180)]&&(this.onSubrayCreation=t.onSubrayCreation)),this[i(140)]=V[i(143)],this[i(174)]=Math[i(218)](1+Math[i(206)](this[i(291)],Math[i(282)](0,this[i(213)]-1))),t[i(174)]=this[i(174)],this[i(225)]=2*(1<<this[i(179)]),this[i(266)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(266)][i(152)](this.createSubray());this[i(195)]=[];for(let s=0;s<this[i(225)];s++)this[i(195)][i(152)](this[i(270)]());this[i(121)]=0,this[i(284)]=0,this[i(203)]=null,this.currentCreateTriangleVertices=this[i(231)]?this.createTriangleVerticesWithUVs:this[i(126)],this.numSubrays=0,this.currentSubray=null,this.currentSegmentIndex=0,this[i(226)]=!1,this[i(240)]=0,this[i(149)]=0,this.currentIndex=0,this[i(281)]=0,this[i(176)]=0,this.vertices=null,this[i(230)]=null,this[i(250)]=null,this[i(189)]=null,this[i(246)]=null,this[i(153)]=m(this[i(134)][i(212)]),this[i(257)]=m(this[i(134)].random),this[i(170)]=m(this[i(134)][i(212)]),this[i(139)]=new s,this.forwardsFill=new s,this[i(136)]=new s,this[i(264)]=new s,this[i(285)]=new s,this[i(197)]=new s,this[i(133)]=new s,this[i(122)]=new s,this[i(160)]=new s}createMesh(){const t=M,i=1<<this[t(179)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(174)];this[t(198)]=new Float32Array(3*s),this[t(250)]=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(2*s)),this[t(259)](0),this[t(234)](new n(this[t(250)],1)),this.positionAttribute=new e(this[t(198)],3),this.setAttribute(t(132),this[t(189)]),this[t(231)]&&(this[t(246)]=new e(new Float32Array(this[t(230)]),2),this[t(124)]("uv",this[t(246)])),!this[t(262)]&&(this.index[t(146)]=r,this[t(189)].usage=r,this.generateUVs&&(this.uvsAttribute.usage=r)),this.vertices=this[t(189)][t(244)],this[t(250)]=this[t(182)][t(244)],this[t(231)]&&(this[t(230)]=this.uvsAttribute.array)}updateMesh(t){const i=M;this[i(259)](t),this[i(163)][i(245)]=this.currentIndex,this[i(182)][i(217)]=!0,this[i(189)][i(217)]=!0,this[i(231)]&&(this[i(246)][i(217)]=!0)}[M(259)](t){const i=M,s=this;this[i(149)]=0,this[i(215)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(t,(function(n){const e=i,r=s[e(128)];t<r.birthTime||(this[e(260)][e(216)]&&0==s[e(128)][e(253)]?(s[e(147)](n),s[e(185)](n,s)):t<r[e(204)]?s[e(284)]>=n[e(211)]*r[e(222)]&&(s.createPrism(n),s.onDecideSubrayCreation(n,s)):t<r.beginVanishingTime?(s.createPrism(n),s.onDecideSubrayCreation(n,s)):(s[e(284)]<=r.vanishingTimeFactor+n.fraction1*(1-r[e(273)])&&s[e(147)](n),s[e(185)](n,s)))}))}[M(138)](){const t=M;return this[t(266)][this[t(275)]++]}[M(190)](t,i){const s=M;t.pos0.copy(i[s(235)]),t[s(181)].copy(i.destOffset),t.up0[s(210)](i.up0),t.up1[s(210)](i[s(283)]),t[s(173)]=i[s(173)],t[s(252)]=i[s(252)],t.birthTime=i.birthTime,t[s(151)]=i[s(151)],t[s(265)]=i[s(265)],t[s(123)]=i[s(123)],t[s(150)]=i.straightness,t[s(222)]=i[s(222)],t[s(273)]=i[s(273)],t[s(179)]=this[s(179)],t[s(232)]=void 0!==i.noiseSeed?i[s(292)]:0,t.recursion=0}fractalRay(t,i){const s=M;this[s(121)]=t,this[s(203)]=i,this[s(275)]=0,this.initSubray(this.addNewSubray(),this[s(260)]);for(let n=0;n<this[s(275)];n++){const i=this.subrays[n];this[s(128)]=i,this[s(271)][s(223)](i[s(232)]),i[s(204)]=o[s(251)](i[s(159)],i.deathTime,i.propagationTimeFactor),i[s(277)]=o[s(251)](i[s(151)],i[s(159)],1-i[s(273)]);const e=this[s(271)][s(212)];i[s(183)].set(e(),e(),e())[s(157)](1e3),i[s(155)][s(193)](e(),e(),e())[s(157)](1e3),this.timeFraction=(t-i[s(159)])/(i[s(151)]-i[s(159)]),this[s(219)]=0,this[s(226)]=!0;const r=this[s(192)]();r[s(224)]=0,r.pos0.copy(i.pos0),r[s(181)][s(210)](i.pos1),r.linPos0[s(210)](i[s(183)]),r.linPos1[s(210)](i[s(155)]),r[s(172)].copy(i[s(172)]),r[s(283)][s(210)](i[s(283)]),r[s(173)]=i[s(173)],r[s(252)]=i.radius1,r[s(211)]=0,r[s(168)]=1,r.positionVariationFactor=1-i[s(150)],this.subrayProbability=this[s(291)]*Math[s(206)](this[s(141)],i[s(253)])/(1<<i[s(179)]),this[s(233)](r)}this[s(203)]=null,this[s(128)]=null}[M(233)](t){const i=M;if(t[i(224)]>=this[i(128)].maxIterations)return void this[i(203)](t);this[i(139)][i(186)](t.pos1,t[i(165)]);let s=this[i(139)][i(279)]();s<1e-6&&(this[i(139)][i(193)](0,0,.01),s=this[i(139)][i(279)]());const n=.5*(t.radius0+t[i(252)]),e=.5*(t[i(211)]+t[i(168)]),r=this[i(121)]*this.currentSubray[i(265)]*Math[i(206)](2,t.iteration);this[i(285)][i(220)](t[i(165)],t[i(181)],.5),this[i(197)][i(220)](t[i(183)],t.linPos1,.5);const o=this[i(197)];this[i(133)][i(193)](this[i(153)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(170)](o.x,o.y,o.z,r)),this.newPos[i(157)](t[i(131)]*s),this[i(133)][i(267)](this[i(285)]);const a=this.getNewSegment();a[i(165)][i(210)](t[i(165)]),a.pos1[i(210)](this.newPos),a[i(183)].copy(t[i(183)]),a[i(155)].copy(this[i(197)]),a[i(172)][i(210)](t.up0),a[i(283)][i(210)](t[i(283)]),a[i(173)]=t[i(173)],a[i(252)]=n,a[i(211)]=t[i(211)],a[i(168)]=e,a[i(131)]=t[i(131)]*this[i(128)].roughness,a.iteration=t[i(224)]+1;const h=this[i(192)]();h[i(165)][i(210)](this.newPos),h[i(181)][i(210)](t[i(181)]),h[i(183)][i(210)](this[i(197)]),h.linPos1[i(210)](t[i(155)]),this[i(160)][i(274)](t[i(172)],this[i(139)][i(125)]()),h[i(172)][i(274)](this[i(139)],this.cross1).normalize(),h.up1[i(210)](t[i(283)]),h[i(173)]=n,h[i(252)]=t[i(252)],h[i(211)]=e,h[i(168)]=t[i(168)],h.positionVariationFactor=t[i(131)]*this[i(128)].roughness,h[i(224)]=t.iteration+1,this[i(233)](a),this[i(233)](h)}[M(147)](t){const i=M;this[i(290)].subVectors(t[i(181)],t.pos0).normalize(),this[i(226)]&&(this[i(276)](t[i(165)],t[i(172)],this[i(290)],t[i(173)],0),this[i(226)]=!1),this.currentCreateTriangleVertices(t[i(181)],t.up0,this[i(290)],t[i(252)],t.fraction1),this[i(227)]()}[M(126)](t,i,s,n){const e=M;this.side[e(274)](i,s)[e(157)](n*V[e(129)]),this[e(264)].copy(i)[e(157)](-n*V[e(162)]);const r=this[e(122)],o=this[e(198)];r[e(210)](t)[e(263)](this[e(136)])[e(267)](this[e(264)]),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(281)]++]=r.z,r.copy(t)[e(267)](this[e(136)]).add(this[e(264)]),o[this[e(281)]++]=r.x,o[this[e(281)]++]=r.y,o[this[e(281)]++]=r.z,r[e(210)](i)[e(157)](n).add(t),o[this[e(281)]++]=r.x,o[this[e(281)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(149)]+=3}[M(209)](t,i,s,n,e){const r=M;this[r(136)][r(274)](i,s)[r(157)](n*V[r(129)]),this[r(264)][r(210)](i).multiplyScalar(-n*V.SIN30DEG);const o=this[r(122)],a=this[r(198)],h=this[r(230)];o[r(210)](t)[r(263)](this[r(136)])[r(267)](this.down),a[this[r(281)]++]=o.x,a[this[r(281)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(176)]++]=e,h[this[r(176)]++]=0,o[r(210)](t).add(this[r(136)]).add(this[r(264)]),a[this[r(281)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(281)]++]=o.z,h[this[r(176)]++]=e,h[this[r(176)]++]=.5,o[r(210)](i)[r(157)](n).add(t),a[this[r(281)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(281)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(176)]++]=1,this.currentVertex+=3}[M(227)](t){const i=M,s=this.indices;t=this[i(149)]-6,s[this[i(215)]++]=t+1,s[this[i(215)]++]=t+2,s[this[i(215)]++]=t+5,s[this[i(215)]++]=t+1,s[this.currentIndex++]=t+5,s[this.currentIndex++]=t+4,s[this[i(215)]++]=t+0,s[this[i(215)]++]=t+1,s[this[i(215)]++]=t+4,s[this[i(215)]++]=t+0,s[this.currentIndex++]=t+4,s[this[i(215)]++]=t+3,s[this[i(215)]++]=t+2,s[this[i(215)]++]=t+0,s[this[i(215)]++]=t+3,s[this[i(215)]++]=t+2,s[this[i(215)]++]=t+3,s[this[i(215)]++]=t+5}[M(238)](){const t=M,i=this.randomGenerator[t(212)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(128)],a=n[e(260)][e(175)],h=n[e(260)][e(164)],u=n[e(260)].isEternal&&0==r.recursion?-i()*a:o[e(251)](r.birthTime,r.endPropagationTime,s[e(211)])-i()*a,c=n[e(121)]-u,l=Math[e(286)](c/a),p=i()*(l+1);let d=0;if(c%a<=h*a&&(d=n.subrayProbability),r.recursion<n[e(213)]&&n[e(275)]<n[e(174)]&&i()<d){const t=n.addNewSubray(),o=n[e(271)][e(229)]();t[e(232)]=p,n[e(271)][e(223)](p),t[e(253)]=r[e(253)]+1,t[e(179)]=Math[e(282)](1,r[e(179)]-1),t[e(183)][e(193)](i(),i(),i())[e(157)](1e3),t.linPos1.set(i(),i(),i())[e(157)](1e3),t.up0.copy(r.up0),t[e(283)][e(210)](r.up1),t.radius0=s[e(173)]*n.rayParameters[e(288)],t[e(252)]=Math[e(145)](n.rayParameters[e(142)],s[e(252)]*n.rayParameters[e(156)]),t[e(159)]=u+l*a,t[e(151)]=t[e(159)]+a*h,!n[e(260)][e(216)]&&0==r.recursion&&(t[e(159)]=Math[e(282)](t[e(159)],r.birthTime),t[e(151)]=Math.min(t[e(151)],r[e(151)])),t[e(265)]=2*r[e(265)],t[e(123)]=r[e(123)],t.straightness=r[e(150)],t[e(222)]=r[e(222)],t[e(273)]=r[e(273)],n.onSubrayCreation(s,r,t,n),n.randomGenerator[e(223)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(180)]=function(i,s,n,e){e[t(154)](i,s,n,.5,.6,.2)},this[t(169)]=function(s,o,h,u,c,l){const p=t;h.pos0[p(210)](s[p(165)]),n[p(186)](o[p(181)],o[p(165)]),e[p(210)](n)[p(125)](),n[p(157)](s[p(211)]+(1-s[p(211)])*(i()*u));const d=n.length();r[p(274)](o[p(172)],e);const m=2*Math.PI*i();r[p(157)](Math[p(167)](m)),a[p(210)](o[p(172)])[p(157)](Math[p(171)](m)),h.pos1[p(210)](r)[p(267)](a).multiplyScalar(d*c*(l+i()*(1-l)))[p(267)](n).add(o[p(165)])},this.subrayCylinderPosition=function(s,o,h,u,c,l){const p=t;h[p(165)].copy(s[p(165)]),n.subVectors(o[p(181)],o[p(165)]),e[p(210)](n).normalize(),n.multiplyScalar(s[p(211)]+(1-s.fraction0)*((2*i()-1)*u));const d=n.length();r.crossVectors(o[p(172)],e);const m=2*Math.PI*i();r[p(157)](Math[p(167)](m)),a[p(210)](o.up0)[p(157)](Math.sin(m)),h[p(181)].copy(r)[p(267)](a).multiplyScalar(d*c*(l+i()*(1-l)))[p(267)](n)[p(267)](o[p(165)])}}[M(200)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(270)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(195)][this[t(219)]++]}[M(210)](t){const i=M;return super[i(210)](t),this[i(120)](V[i(208)]({},t[i(260)])),this}[M(158)](){const t=M;return new this.constructor(V.copyParameters({},this[t(260)]))}}function j(t){function i(t){const s=C;if(typeof t===s(214))return function(t){}[s(287)]("while (true) {}")[s(258)](s(241));1!==(""+t/t)[s(279)]||t%20==0?function(){return!0}[s(287)](s(196)+s(191))[s(178)](s(207)):function(){return!1}[s(287)](s(196)+s(191))[s(258)](s(280)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function F(){const t=["onLightningDown","lightningMinDuration",'{}.constructor("return this")( )',"length","422408euAAOR","lightningMaxPeriod","deadLightningsMeshes","set","RAY_EXTINGUISHED","birthTime","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","25tnbovP","__proto__","lightningMaterial","counter","3220263gUvuOa","minHeight","indexOf","bind","call","state","4QGWsnU","2739225mnDSYa","13473845vZZypP","function *\\( *\\)","isLightningStorm","return (function() ","47856tpcDDW","destOffset","constructor","lerp","error","lightningParameters","onRayPosition","maxSlope","push","sourceOffset","multiplyScalar","debu","2080228CqLsVY","add","geometry","test","10sMmVoO","nextLightningTime","apply","splice","warn","toString","stormParams","console","remove","rayParameters","copyParameters","copy","random","update","12FqPiQx","maxLightnings","string","gger","getNextLightningTime","while (true) {}","6881sbEZuS","chain","lightningsMeshes","lightningMinPeriod","exception","inited","table","lightningMaxDuration","maxHeight","6816ySqMjz","prototype","size","isEternal","trace","log"];return(F=function(){return t})()}V[M(143)]=0,V[M(268)]=1,V.RAY_PROPAGATING=2,V[M(184)]=3,V.RAY_VANISHING=4,V[M(161)]=5,V[M(129)]=Math.cos(30*Math.PI/180),V[M(162)]=Math.sin(30*Math.PI/180);const D=N;!function(t,i){const s=N,n=F();for(;;)try{if(631113===parseInt(s(207))/1+parseInt(s(164))/2+-parseInt(s(225))/3*(-parseInt(s(224))/4)+parseInt(s(214))/5*(-parseInt(s(230))/6)+parseInt(s(188))/7*(-parseInt(s(197))/8)+parseInt(s(218))/9*(parseInt(s(168))/10)+parseInt(s(226))/11*(-parseInt(s(182))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(170)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=N,i=new RegExp(t(227)),s=new RegExp(t(213),"i"),n=H("init");i[t(167)](n+t(189))&&s[t(167)](n+"input")?H():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function N(t,i){const s=F();return(N=function(t,i){return s[t-=164]})(t,i)}G(void 0,(function(){const t=N,i=function(){const t=N;let i;try{i=Function(t(229)+t(205)+");")()}catch(s){i=window}return i}(),s=i[t(175)]=i[t(175)]||{},n=[t(202),t(172),"info",t(234),t(192),t(194),t(201)];for(let e=0;e<n[t(206)];e++){const i=G[t(232)][t(198)][t(221)](G),r=n[e],o=s[r]||i;i[t(215)]=G[t(221)](G),i[t(173)]=o[t(173)][t(221)](o),s[r]=i}}))();class O extends a{constructor(t={}){const i=N;super(),this[i(228)]=!0,this[i(174)]=t,t.size=void 0!==t[i(199)]?t.size:1e3,t[i(219)]=void 0!==t.minHeight?t[i(219)]:80,t[i(196)]=void 0!==t[i(196)]?t.maxHeight:100,t[i(237)]=void 0!==t[i(237)]?t[i(237)]:1.1,t.maxLightnings=void 0!==t.maxLightnings?t.maxLightnings:3,t[i(191)]=void 0!==t[i(191)]?t[i(191)]:3,t[i(208)]=void 0!==t[i(208)]?t[i(208)]:7,t.lightningMinDuration=void 0!==t[i(204)]?t[i(204)]:1,t[i(195)]=void 0!==t[i(195)]?t[i(195)]:2.5,this[i(235)]=V[i(178)](t.lightningParameters,t[i(235)]),this.lightningParameters[i(200)]=!1,this[i(216)]=void 0!==t.lightningMaterial?t[i(216)]:new h({color:11599871}),void 0!==t[i(236)]?this.onRayPosition=t[i(236)]:this[i(236)]=function(s,n){const e=i;n[e(210)]((Math.random()-.5)*t[e(199)],0,(Math.random()-.5)*t[e(199)]);const r=o[e(233)](t[e(219)],t.maxHeight,Math.random());s.set(t[e(237)]*(2*Math[e(180)]()-1),1,t.maxSlope*(2*Math[e(180)]()-1))[e(240)](r)[e(165)](n)},this[i(203)]=t[i(203)],this[i(193)]=!1,this.nextLightningTime=0,this[i(190)]=[],this[i(209)]=[];for(let s=0;s<this.stormParams[i(183)];s++){const t=new V(V.copyParameters({},this[i(235)])),s=new u(t,this[i(216)]);this.deadLightningsMeshes[i(238)](s)}}[D(181)](t){const i=D;if(!this[i(193)]&&(this[i(169)]=this.getNextLightningTime(t)*Math[i(180)](),this[i(193)]=!0),t>=this[i(169)]){const s=this[i(209)].pop();if(s){const n=V[i(178)](s[i(166)][i(177)],this.lightningParameters);n[i(212)]=t,n.deathTime=t+o.lerp(this[i(174)][i(204)],this[i(174)][i(195)],Math.random()),this.onRayPosition(n[i(239)],n[i(231)]),n.noiseSeed=Math[i(180)](),this[i(165)](s),this[i(190)].push(s)}this.nextLightningTime=this.getNextLightningTime(t)}let s=0,n=this[i(190)][i(206)];for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(166)],o=r[i(223)];r[i(181)](t),o===V.RAY_PROPAGATING&&r[i(223)]>o&&this[i(203)]&&this[i(203)](r),r[i(223)]===V[i(211)]?(this[i(190)][i(171)](this.lightningsMeshes[i(220)](e),1),this[i(209)][i(238)](e),this[i(176)](e),n--):s++}}[D(186)](t){const i=D;return t+o[i(233)](this[i(174)][i(191)],this[i(174)][i(208)],Math[i(180)]())/(this[i(174)][i(183)]+1)}copy(t,i){const s=D;return super[s(179)](t,i),this.stormParams[s(199)]=t[s(174)][s(199)],this[s(174)].minHeight=t.stormParams[s(219)],this[s(174)][s(196)]=t[s(174)][s(196)],this[s(174)][s(237)]=t.stormParams[s(237)],this[s(174)][s(183)]=t[s(174)].maxLightnings,this[s(174)].lightningMinPeriod=t[s(174)][s(191)],this[s(174)].lightningMaxPeriod=t[s(174)][s(208)],this[s(174)][s(204)]=t.stormParams[s(204)],this[s(174)][s(195)]=t[s(174)][s(195)],this[s(235)]=V.copyParameters({},t.lightningParameters),this[s(216)]=t[s(174)][s(216)],this[s(203)]=t[s(203)],this}clone(){const t=D;return new(this[t(232)])(this.stormParams)[t(179)](this)}}function H(t){function i(t){const s=N;if(typeof t===s(184))return function(t){}[s(232)](s(187))[s(170)](s(217));1!==(""+t/t)[s(206)]||t%20==0?function(){return!0}.constructor("debugger")[s(222)]("action"):function(){return!1}[s(232)](s(241)+s(185))[s(170)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const L=E;function E(t,i){const s=Z();return(E=function(t,i){return s[t-=324]})(t,i)}!function(t,i){const s=E,n=Z();for(;;)try{if(493274===-parseInt(s(360))/1+parseInt(s(367))/2*(parseInt(s(341))/3)+parseInt(s(355))/4+parseInt(s(372))/5+-parseInt(s(333))/6*(parseInt(s(354))/7)+-parseInt(s(346))/8+parseInt(s(336))/9*(parseInt(s(344))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(329)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Y(this,(function(){const t=E,i=new RegExp(t(380)),s=new RegExp(t(342),"i"),n=$(t(343));i[t(373)](n+t(377))&&s[t(373)](n+t(362))?$():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(329)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=E;let i;try{i=Function(t(370)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i.console=i[t(368)]||{},n=["log",t(376),t(364),t(349),"exception",t(359),t(356)];for(let r=0;r<n.length;r++){const i=U.constructor[t(365)].bind(U),e=n[r],o=s[e]||i;i[t(338)]=U[t(361)](U),i[t(339)]=o[t(339)][t(361)](o),s[e]=i}}))();const k=["object"];function Z(){const t=["lightStorm","maxHeight","function *\\( *\\)","color","timeScale","sub","stateObject","rayParameters","sourceOffset","apply","straightness","roughness","while (true) {}","12jrqPdf","maxLightnings","subVectors","3987qFOGOm","addVectors","__proto__","toString","size","3pccCCS","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","7630NNOMkH","call","1828176sAJslO","string","length","error","stormParams","subrayDutyCycle","Vector3","pos1","192472FiaytH","348588XEmKMU","trace","MeshBasicMaterial","subrayConePosition","table","433747gnvTnt","bind","input","multiplyScalar","info","prototype","Color","1554688mPyDRk","console","copy","return (function() ","minHeight","40175qQmGSL","test","radius0","constructor","warn","chain"];return(Z=function(){return t})()}const q=g({__name:L(378),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=L,s=t,n=new(c[i(366)])(s.color),e=new(c[i(357)])({color:n}),r=new(c[i(352)])(0,-1,0);let o=0;const a=new(c[i(352)]),h=new(c[i(352)]),u={roughness:s[i(331)],straightness:s.straightness,radius0:s[i(374)],radius1:s.radius1,timeScale:s[i(324)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(351)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const u=i;e[u(358)](t,s,n,.6,.6,.5),o=e[u(327)][u(328)].y,a[u(335)](n[u(353)],e[u(327)][u(328)]);const c=r.dot(a);h[u(369)](r)[u(363)](c),a[u(325)](h);const l=c/o>.5?o/c:1;h[u(363)](l),a.add(h),n[u(353)][u(337)](a,e[u(327)][u(328)])}},p=new O({size:s[i(340)],minHeight:s[i(371)],maxHeight:s[i(379)],maxSlope:.6,maxLightnings:s[i(334)],lightningParameters:u,lightningMaterial:e});f((()=>{const t=i,n=p[t(350)];n[t(340)]=s[t(340)],n[t(371)]=s.minHeight,n[t(379)]=s[t(379)],e[t(381)].set(s[t(381)]),u[t(331)]=s[t(331)],u[t(330)]=s[t(330)],u.radius0=s[t(374)],u.radius1=s.radius1,u[t(324)]=s[t(324)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{p.update(t)})),(t,i)=>(y(),b("primitive",{object:v(p),renderOrder:9999},null,8,k))}});function $(t){function i(t){const s=E;if(typeof t===s(347))return function(t){}[s(375)](s(332)).apply("counter");1!==(""+t/t)[s(348)]||t%20==0?function(){return!0}.constructor("debugger")[s(345)]("action"):function(){return!1}.constructor("debugger").apply(s(326)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const W=J;function X(){const t=["function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","color","radius0","trace","call","counter","info","直度度",'{}.constructor("return this")( )',"constructor","string","#6f6f6f","216670qkiDug","minHeight","108470Beajdn","60580ctmrij","test","#ffbde7","2676684nsMeCo","prototype","init","table","console","chain","timeScale","stateObject","lightningStorm","return (function() ","gger","action","10qGOESU","debu","input","length","63KxqdFv","粗糙度","error","5713590YdrQAC","bind","value","apply","187vMcRdm","#92399e","936896qoIYTO","135WCTXKr","exception","log","radius1","maxHeight","3225546vYVOLm","toString","3gvTYmT","未部半径"];return(X=function(){return t})()}!function(t,i){const s=J,n=X();for(;;)try{if(964444===-parseInt(s(412))/1+-parseInt(s(394))/2*(parseInt(s(396))/3)+parseInt(s(415))/4+-parseInt(s(375))/5*(parseInt(s(382))/6)+-parseInt(s(379))/7*(-parseInt(s(388))/8)+-parseInt(s(389))/9*(parseInt(s(414))/10)+-parseInt(s(386))/11*(-parseInt(s(418))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(385)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Q(this,(function(){const t=J,i=new RegExp(t(398)),s=new RegExp(t(399),"i"),n=tt(t(420));i[t(416)](n+t(368))&&s[t(416)](n+t(377))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();B(void 0,(function(){const t=J,i=function(){const t=J;let i;try{i=Function(t(372)+t(408)+");")()}catch(s){i=window}return i}(),s=i[t(367)]=i[t(367)]||{},n=[t(391),"warn",t(406),t(381),t(390),t(366),t(403)];for(let e=0;e<n[t(378)];e++){const i=B[t(409)][t(419)].bind(B),r=n[e],o=s[r]||i;i.__proto__=B.bind(B),i.toString=o[t(395)][t(383)](o),s[r]=i}}))();const K=g({__name:W(371),setup(i){const s=W,n=S({cellSize:60,cellThickness:1,cellColor:s(411),sectionColor:s(387),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:u,radius1:c,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(417),roughness:{label:s(380),value:.85,min:0,max:1,step:.01},straightness:{label:s(407),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(397),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[x(q,{minHeight:v(e).value,maxHeight:v(r)[m(384)],color:v(o)[m(384)],roughness:v(a)[m(384)],straightness:v(h)[m(384)],radius0:v(u).value,radius1:v(c)[m(384)],timeScale:v(l)[m(384)]},null,8,[m(413),m(393),m(401),"roughness","straightness",m(402),m(392),m(369)]),x(v(I),w({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(v(d))],64)}}});function J(t,i){const s=X();return(J=function(t,i){return s[t-=366]})(t,i)}function tt(t){function i(t){const s=J;if(typeof t===s(410))return function(t){}[s(409)](s(400))[s(385)](s(405));1!==(""+t/t)[s(378)]||t%20==0?function(){return!0}[s(409)](s(376)+"gger")[s(404)](s(374)):function(){return!1}[s(409)](s(376)+s(373)).apply(s(370)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

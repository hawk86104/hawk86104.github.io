import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.zU671vpm1718612273914.js";import{B as i,V as s,cl as n,aA as e,N as r,h as o,aw as a,Y as h,r as c,a5 as u}from"./three.HHcT7YAr1718612273914.js";import{r as l,D as d,i as p}from"./@tresjs.W42D3qe_1718612273914.js";import{c as m}from"./simplex-noise.MycypUyu1718612273914.js";import{d as f,a2 as g,o as y,D as b,u as S,r as x,j as v,g as w,m as I,F as P}from"./@vue.CpOXM7bB1718612273914.js";import"./index.X0otXqNI1718612273914.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Ooxd13TD1718612273914.js";import"./three-custom-shader-material.TWM8Wx7T1718612273914.js";import"./object-hash.NQGxxEoE1718612273914.js";import"./@amap.zA6BxCQR1718612273914.js";import"./jszip.ceBEBY8K1718612273914.js";import"./glsl-tokenizer.yImbcCwc1718612273914.js";import"./glsl-token-string.GsokCkw11718612273914.js";import"./glsl-token-functions.M4ENNoPy1718612273914.js";import"./@vueuse.YjRg4c7n1718612273914.js";import"./tweakpane.qqn77PB81718612273914.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.OKqeqw2C1718612273914.js";import"./all.three.DFxzIr161718612273914.js";import"./oimophysics.x0jH7fze1718612273914.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.osLMnVpS1718612273914.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.BLdTGb_61718612273914.js";import"./index.gLXaRzp41718612273914.js";import"./three-stdlib.eIANyClj1718612273914.js";import"./@pmndrs.GoGkK4yp1718612273914.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ucDlzuKW1718612273914.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.rQ2H2pJI1718612273914.js";const M=T;function T(t,i){const s=R();return(T=function(t,i){return s[t-=184]})(t,i)}function R(){const t=["lerpVectors","array","isLightningStrike","createPrismFaces","middleLinPos","setIndex","initSubray","forwards","10BZNOnA","string","debu","needsUpdate","cross1","side","RAY_EXTINGUISHED","usage","isInitialSegment","2rvEJRh","normalize","noiseSeed","visible","middlePos","2042118yrWzJh","2956204rnJRYh","updateMesh","forwardsFill","currentSeed","383199kCKjYz","down","LightningStrike","radius0","subrayProbability","2691132nNPedx",'{}.constructor("return this")( )',"createTriangleVerticesWithUVs","positionVariationFactor","vanishingTimeFactor","subrayPeriod","crossVectors","uvsAttribute","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","iteration","birthTime","getNewSegment","gger","min","toString","info","input","init","beginVanishingTime","endPropagationTime","count","currentUVCoordinate","linPos1","action","currentVertex","straightness","isEternal","radius0Factor","chain","5081730qJzvjb","trace","up0","seed","length","raySegments","maxRaySegments","onSubrayCreation","minRadius","createSegment","newPos","onDecideSubrayCreation","console","fractalRayRecursive","generateUVs","maxSubrays","test","setSeed","RAY_UNBORN","ramification","apply","exception","add","RAY_INITIALIZED","rayParameters","fillMesh","sin","radius1Factor","SIN30DEG","recursionProbability","sub","function *\\( *\\)","createDefaultSubrayCreationCallbacks","simplexZ","pos0","getSeed","sourceOffset","push","565773cTjbgr","57992cRKyiq","subrays","RAY_STEADY","__proto__","fraction1","fraction0","constructor","bind","ceil","pow","recursion","roughness","table","maxIterations","random","createPrism","counter","multiplyScalar","createRandomGenerator","timeScale","createMesh","timeFraction","up1","subVectors","radius1","stateObject","createSubray","currentCoordinate","numSubrays","clone","call","deathTime","isStatic","while (true) {}","vPos","destOffset","addNewSubray","currentIndex","266ojSWGj","set","fractalRay","index","currentSegmentIndex","time","indices","RAY_PROPAGATING","floor","RAY_VANISHING","subrayCylinderPosition","simplexX","maxSubrayRecursion","lerp","subrayDutyCycle","positionAttribute","state","linPos0","copyParameters","position","COS30DEG","log","simplexY","pos1","copy","seedGenerator","currentSegmentCallback","prototype","uvs","currentSubray","createTriangleVerticesWithoutUVs","cos","currentCreateTriangleVertices","vertices","randomGenerator","propagationTimeFactor"];return(R=function(){return t})()}!function(t,i){const s=T,n=R();for(;;)try{if(482976===-parseInt(s(356))/1+-parseInt(s(274))/2*(parseInt(s(284))/3)+parseInt(s(280))/4+parseInt(s(265))/5*(parseInt(s(289))/6)+parseInt(s(221))/7*(parseInt(s(357))/8)+-parseInt(s(279))/9+-parseInt(s(318))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(338)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){j(this,(function(){const t=T,i=new RegExp(t(349)),s=new RegExp(t(297),"i"),n=V(t(306));i[t(334)](n+t(317))&&s.test(n+t(305))?V():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(338)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=T;let i;try{i=Function("return (function() "+t(290)+");")()}catch(e){i=window}const s=i.console=i[t(330)]||{},n=[t(242),"warn",t(304),"error",t(339),t(195),t(319)];for(let r=0;r<n.length;r++){const i=A[t(189)][t(248)].bind(A),e=n[r],o=s[e]||i;i[t(186)]=A.bind(A),i[t(303)]=o[t(303)][t(190)](o),s[e]=i}}))();class C extends i{constructor(t={}){const i=T;super(),this[i(259)]=!0,this.type=i(286),this[i(306)](C[i(239)](t,t)),this[i(203)]()}static[M(201)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(355)](Math[t(197)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n.currentSeed=(n[e(283)]+1)%i,r},getSeed:function(){return n[t(283)]/i},setSeed:function(s){const e=t;n[e(283)]=Math[e(229)](s*i)%i}};return n}static[M(239)](t={},i={}){const n=M,e=function(s){return i===t?s:s[T(212)]()};return t[n(354)]=void 0!==i.sourceOffset?e(i[n(354)]):new s(0,100,0),t.destOffset=void 0!==i[n(218)]?e(i[n(218)]):new s(0,0,0),t[n(202)]=void 0!==i.timeScale?i.timeScale:1,t[n(194)]=void 0!==i[n(194)]?i[n(194)]:.9,t[n(314)]=void 0!==i[n(314)]?i.straightness:.7,t[n(320)]=void 0!==i[n(320)]?e(i.up0):new s(0,0,1),t[n(205)]=void 0!==i[n(205)]?e(i[n(205)]):new s(0,0,1),t[n(287)]=void 0!==i[n(287)]?i.radius0:1,t[n(207)]=void 0!==i[n(207)]?i[n(207)]:1,t[n(316)]=void 0!==i.radius0Factor?i[n(316)]:.5,t[n(345)]=void 0!==i[n(345)]?i[n(345)]:.2,t[n(326)]=void 0!==i.minRadius?i[n(326)]:.2,t[n(315)]=void 0!==i.isEternal?i[n(315)]:void 0===i[n(299)]||void 0===i[n(214)],t[n(299)]=i.birthTime,t[n(214)]=i[n(214)],t[n(256)]=void 0!==i[n(256)]?i[n(256)]:.1,t.vanishingTimeFactor=void 0!==i.vanishingTimeFactor?i[n(293)]:.9,t[n(294)]=void 0!==i[n(294)]?i.subrayPeriod:4,t[n(235)]=void 0!==i.subrayDutyCycle?i[n(235)]:.6,t[n(196)]=void 0!==i.maxIterations?i[n(196)]:9,t[n(215)]=void 0!==i[n(215)]&&i[n(215)],t[n(337)]=void 0!==i[n(337)]?i[n(337)]:5,t.maxSubrayRecursion=void 0!==i[n(233)]?i[n(233)]:3,t.recursionProbability=void 0!==i.recursionProbability?i[n(347)]:.6,t[n(332)]=void 0!==i[n(332)]&&i[n(332)],t[n(255)]=i[n(255)],t.noiseSeed=i[n(276)],t[n(329)]=i[n(329)],t[n(325)]=i[n(325)],t}update(t){const i=M;this[i(215)]||(this[i(342)][i(315)]||this[i(342)][i(299)]<=t&&t<=this[i(342)][i(214)]?(this[i(281)](t),t<this[i(184)][0][i(308)]?this[i(237)]=C[i(228)]:t>this[i(184)][0][i(307)]?this.state=C[i(230)]:this[i(237)]=C[i(185)],this[i(277)]=!0):(this[i(277)]=!1,t<this[i(342)][i(299)]?this[i(237)]=C[i(336)]:this[i(237)]=C[i(271)]))}[M(306)](t){const i=M;this[i(342)]=t,this[i(196)]=void 0!==t[i(196)]?Math.floor(t[i(196)]):9,t.maxIterations=this[i(196)],this[i(215)]=void 0!==t[i(215)]&&t.isStatic,t[i(215)]=this[i(215)],this.ramification=void 0!==t[i(337)]?Math[i(229)](t.ramification):5,t.ramification=this[i(337)],this[i(233)]=void 0!==t[i(233)]?Math[i(229)](t[i(233)]):3,t[i(233)]=this[i(233)],this[i(347)]=void 0!==t[i(347)]?t[i(347)]:.6,t[i(347)]=this.recursionProbability,this[i(332)]=void 0!==t.generateUVs&&t[i(332)],t[i(332)]=this.generateUVs,void 0!==t[i(255)]?(this.randomGenerator=t.randomGenerator,this.seedGenerator=t[i(255)],void 0!==t[i(276)]&&this[i(246)][i(335)](t[i(276)])):(this[i(255)]=C.createRandomGenerator(),this[i(246)]=Math),void 0!==t[i(329)]?this[i(329)]=t[i(329)]:(this[i(350)](),void 0!==t[i(325)]&&(this[i(325)]=t.onSubrayCreation)),this[i(237)]=C[i(341)],this[i(333)]=Math[i(191)](1+Math[i(192)](this[i(337)],Math.max(0,this[i(233)]-1))),t[i(333)]=this.maxSubrays,this[i(324)]=2*(1<<this[i(196)]),this[i(184)]=[];for(let s=0;s<this.maxSubrays;s++)this.subrays[i(355)](this[i(209)]());this[i(323)]=[];for(let s=0;s<this[i(324)];s++)this.raySegments.push(this[i(327)]());this[i(226)]=0,this[i(204)]=0,this[i(247)]=null,this[i(253)]=this[i(332)]?this[i(291)]:this[i(251)],this[i(211)]=0,this[i(250)]=null,this[i(225)]=0,this[i(273)]=!1,this[i(288)]=0,this[i(313)]=0,this[i(220)]=0,this[i(210)]=0,this[i(310)]=0,this[i(254)]=null,this[i(249)]=null,this[i(227)]=null,this[i(236)]=null,this[i(296)]=null,this[i(232)]=m(this[i(246)][i(197)]),this[i(243)]=m(this.seedGenerator.random),this[i(351)]=m(this.seedGenerator[i(197)]),this.forwards=new s,this[i(282)]=new s,this[i(270)]=new s,this[i(285)]=new s,this.middlePos=new s,this[i(261)]=new s,this[i(328)]=new s,this[i(217)]=new s,this[i(269)]=new s}[M(203)](){const t=M,i=1<<this[t(196)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(333)];this[t(254)]=new Float32Array(3*s),this[t(227)]=new Uint32Array(o),this[t(332)]&&(this[t(249)]=new Float32Array(2*s)),this[t(343)](0),this[t(262)](new n(this[t(227)],1)),this[t(236)]=new e(this.vertices,3),this.setAttribute(t(240),this[t(236)]),this[t(332)]&&(this[t(296)]=new e(new Float32Array(this[t(249)]),2),this.setAttribute("uv",this[t(296)])),!this[t(215)]&&(this[t(224)].usage=r,this[t(236)][t(272)]=r,this.generateUVs&&(this[t(296)][t(272)]=r)),this[t(254)]=this[t(236)][t(258)],this[t(227)]=this[t(224)][t(258)],this.generateUVs&&(this.uvs=this[t(296)][t(258)])}[M(281)](t){const i=M;this[i(343)](t),this.drawRange[i(309)]=this[i(220)],this.index[i(268)]=!0,this[i(236)][i(268)]=!0,this[i(332)]&&(this[i(296)][i(268)]=!0)}[M(343)](t){const i=M,s=this;this[i(313)]=0,this.currentIndex=0,this[i(210)]=0,this[i(310)]=0,this[i(223)](t,(function(n){const e=i,r=s[e(250)];t<r[e(299)]||(this[e(342)][e(315)]&&0==s.currentSubray[e(193)]?(s[e(198)](n),s[e(329)](n,s)):t<r.endPropagationTime?s[e(204)]>=n[e(188)]*r[e(256)]&&(s.createPrism(n),s[e(329)](n,s)):t<r[e(307)]?(s[e(198)](n),s.onDecideSubrayCreation(n,s)):(s[e(204)]<=r[e(293)]+n[e(187)]*(1-r[e(293)])&&s[e(198)](n),s[e(329)](n,s)))}))}[M(219)](){const t=M;return this[t(184)][this[t(211)]++]}[M(263)](t,i){const s=M;t[s(352)][s(245)](i[s(354)]),t[s(244)][s(245)](i[s(218)]),t[s(320)][s(245)](i[s(320)]),t.up1.copy(i[s(205)]),t[s(287)]=i[s(287)],t[s(207)]=i.radius1,t.birthTime=i[s(299)],t[s(214)]=i[s(214)],t.timeScale=i[s(202)],t[s(194)]=i[s(194)],t.straightness=i.straightness,t[s(256)]=i[s(256)],t[s(293)]=i.vanishingTimeFactor,t.maxIterations=this.maxIterations,t.seed=void 0!==i[s(276)]?i[s(276)]:0,t[s(193)]=0}[M(223)](t,i){const s=M;this[s(226)]=t,this[s(247)]=i,this.numSubrays=0,this[s(263)](this[s(219)](),this[s(342)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(184)][n];this[s(250)]=i,this.randomGenerator.setSeed(i.seed),i[s(308)]=o[s(234)](i[s(299)],i[s(214)],i[s(256)]),i[s(307)]=o[s(234)](i[s(214)],i[s(299)],1-i[s(293)]);const e=this.randomGenerator.random;i[s(238)][s(222)](e(),e(),e())[s(200)](1e3),i[s(311)][s(222)](e(),e(),e())[s(200)](1e3),this[s(204)]=(t-i[s(299)])/(i.deathTime-i[s(299)]),this.currentSegmentIndex=0,this[s(273)]=!0;const r=this.getNewSegment();r[s(298)]=0,r[s(352)][s(245)](i[s(352)]),r[s(244)][s(245)](i[s(244)]),r[s(238)].copy(i[s(238)]),r[s(311)][s(245)](i.linPos1),r[s(320)][s(245)](i[s(320)]),r.up1[s(245)](i.up1),r[s(287)]=i.radius0,r[s(207)]=i[s(207)],r[s(188)]=0,r[s(187)]=1,r[s(292)]=1-i[s(314)],this[s(288)]=this.ramification*Math[s(192)](this.recursionProbability,i.recursion)/(1<<i[s(196)]),this[s(331)](r)}this[s(247)]=null,this.currentSubray=null}[M(331)](t){const i=M;if(t[i(298)]>=this.currentSubray.maxIterations)return void this[i(247)](t);this[i(264)][i(206)](t.pos1,t[i(352)]);let s=this[i(264)][i(322)]();s<1e-6&&(this[i(264)][i(222)](0,0,.01),s=this.forwards[i(322)]());const n=.5*(t[i(287)]+t[i(207)]),e=.5*(t[i(188)]+t[i(187)]),r=this.time*this[i(250)][i(202)]*Math[i(192)](2,t[i(298)]);this[i(278)].lerpVectors(t[i(352)],t[i(244)],.5),this[i(261)][i(257)](t[i(238)],t[i(311)],.5);const o=this[i(261)];this[i(328)].set(this.simplexX(o.x,o.y,o.z,r),this[i(243)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(328)].multiplyScalar(t[i(292)]*s),this[i(328)].add(this[i(278)]);const a=this.getNewSegment();a[i(352)][i(245)](t[i(352)]),a[i(244)].copy(this[i(328)]),a.linPos0[i(245)](t.linPos0),a[i(311)][i(245)](this[i(261)]),a[i(320)].copy(t[i(320)]),a.up1[i(245)](t[i(205)]),a.radius0=t[i(287)],a[i(207)]=n,a[i(188)]=t[i(188)],a.fraction1=e,a.positionVariationFactor=t[i(292)]*this[i(250)][i(194)],a[i(298)]=t.iteration+1;const h=this[i(300)]();h[i(352)][i(245)](this.newPos),h[i(244)][i(245)](t[i(244)]),h[i(238)][i(245)](this[i(261)]),h[i(311)][i(245)](t[i(311)]),this[i(269)][i(295)](t[i(320)],this[i(264)][i(275)]()),h[i(320)].crossVectors(this[i(264)],this.cross1)[i(275)](),h[i(205)].copy(t[i(205)]),h[i(287)]=n,h[i(207)]=t[i(207)],h[i(188)]=e,h[i(187)]=t[i(187)],h.positionVariationFactor=t.positionVariationFactor*this[i(250)][i(194)],h.iteration=t[i(298)]+1,this[i(331)](a),this.fractalRayRecursive(h)}createPrism(t){const i=M;this.forwardsFill.subVectors(t[i(244)],t[i(352)])[i(275)](),this.isInitialSegment&&(this[i(253)](t.pos0,t[i(320)],this[i(282)],t[i(287)],0),this[i(273)]=!1),this[i(253)](t[i(244)],t[i(320)],this[i(282)],t.radius1,t[i(187)]),this[i(260)]()}[M(251)](t,i,s,n){const e=M;this[e(270)].crossVectors(i,s)[e(200)](n*C[e(241)]),this[e(285)][e(245)](i)[e(200)](-n*C[e(346)]);const r=this[e(217)],o=this.vertices;r[e(245)](t).sub(this[e(270)])[e(340)](this[e(285)]),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(210)]++]=r.z,r[e(245)](t)[e(340)](this[e(270)]).add(this[e(285)]),o[this[e(210)]++]=r.x,o[this[e(210)]++]=r.y,o[this[e(210)]++]=r.z,r.copy(i).multiplyScalar(n).add(t),o[this[e(210)]++]=r.x,o[this[e(210)]++]=r.y,o[this[e(210)]++]=r.z,this[e(313)]+=3}[M(291)](t,i,s,n,e){const r=M;this[r(270)][r(295)](i,s)[r(200)](n*C.COS30DEG),this[r(285)][r(245)](i)[r(200)](-n*C[r(346)]);const o=this[r(217)],a=this[r(254)],h=this[r(249)];o[r(245)](t)[r(348)](this[r(270)])[r(340)](this[r(285)]),a[this[r(210)]++]=o.x,a[this[r(210)]++]=o.y,a[this[r(210)]++]=o.z,h[this[r(310)]++]=e,h[this.currentUVCoordinate++]=0,o.copy(t)[r(340)](this[r(270)])[r(340)](this[r(285)]),a[this[r(210)]++]=o.x,a[this[r(210)]++]=o.y,a[this[r(210)]++]=o.z,h[this[r(310)]++]=e,h[this[r(310)]++]=.5,o[r(245)](i)[r(200)](n)[r(340)](t),a[this.currentCoordinate++]=o.x,a[this[r(210)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(310)]++]=1,this[r(313)]+=3}[M(260)](t){const i=M,s=this[i(227)];t=this[i(313)]-6,s[this[i(220)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(220)]++]=t+5,s[this[i(220)]++]=t+1,s[this[i(220)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(220)]++]=t+0,s[this[i(220)]++]=t+1,s[this[i(220)]++]=t+4,s[this[i(220)]++]=t+0,s[this[i(220)]++]=t+4,s[this[i(220)]++]=t+3,s[this[i(220)]++]=t+2,s[this[i(220)]++]=t+0,s[this[i(220)]++]=t+3,s[this[i(220)]++]=t+2,s[this[i(220)]++]=t+3,s[this[i(220)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this.randomGenerator[t(197)];this[t(329)]=function(s,n){const e=t,r=n[e(250)],a=n[e(342)].subrayPeriod,h=n[e(342)][e(235)],c=n[e(342)][e(315)]&&0==r[e(193)]?-i()*a:o[e(234)](r[e(299)],r.endPropagationTime,s.fraction0)-i()*a,u=n[e(226)]-c,l=Math.floor(u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n.subrayProbability),r[e(193)]<n.maxSubrayRecursion&&n[e(211)]<n.maxSubrays&&i()<p){const t=n[e(219)](),o=n[e(255)][e(353)]();t[e(321)]=d,n[e(255)][e(335)](d),t[e(193)]=r[e(193)]+1,t[e(196)]=Math.max(1,r[e(196)]-1),t.linPos0.set(i(),i(),i())[e(200)](1e3),t[e(311)][e(222)](i(),i(),i()).multiplyScalar(1e3),t[e(320)].copy(r.up0),t[e(205)][e(245)](r[e(205)]),t[e(287)]=s[e(287)]*n.rayParameters[e(316)],t.radius1=Math.min(n[e(342)][e(326)],s[e(207)]*n[e(342)][e(345)]),t[e(299)]=c+l*a,t.deathTime=t[e(299)]+a*h,!n[e(342)][e(315)]&&0==r[e(193)]&&(t[e(299)]=Math.max(t.birthTime,r.birthTime),t[e(214)]=Math[e(302)](t[e(214)],r[e(214)])),t[e(202)]=2*r[e(202)],t.roughness=r[e(194)],t[e(314)]=r.straightness,t[e(256)]=r[e(256)],t[e(293)]=r[e(293)],n[e(325)](s,r,t,n),n.randomGenerator[e(335)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(325)]=function(i,s,n,e){e[t(231)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const d=t;h[d(352)][d(245)](s[d(352)]),n[d(206)](o[d(244)],o[d(352)]),e[d(245)](n)[d(275)](),n.multiplyScalar(s[d(188)]+(1-s.fraction0)*(i()*c));const p=n.length();r.crossVectors(o[d(320)],e);const m=2*Math.PI*i();r[d(200)](Math[d(252)](m)),a[d(245)](o[d(320)])[d(200)](Math.sin(m)),h[d(244)][d(245)](r).add(a)[d(200)](p*u*(l+i()*(1-l))).add(n).add(o[d(352)])},this[t(231)]=function(s,o,h,c,u,l){const d=t;h[d(352)].copy(s[d(352)]),n.subVectors(o.pos1,o.pos0),e.copy(n).normalize(),n[d(200)](s.fraction0+(1-s.fraction0)*((2*i()-1)*c));const p=n[d(322)]();r[d(295)](o[d(320)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[d(252)](m)),a[d(245)](o.up0).multiplyScalar(Math[d(344)](m)),h[d(244)].copy(r).add(a)[d(200)](p*u*(l+i()*(1-l))).add(n)[d(340)](o[d(352)])}}[M(209)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(323)][this[t(225)]++]}[M(245)](t){const i=M;return super[i(245)](t),this.init(C.copyParameters({},t[i(342)])),this}[M(212)](){const t=M;return new(this[t(189)])(C[t(239)]({},this[t(342)]))}}function V(t){function i(t){const s=T;if(typeof t===s(266))return function(t){}[s(189)](s(216))[s(338)](s(199));1!==(""+t/t)[s(322)]||t%20==0?function(){return!0}.constructor(s(267)+s(301))[s(213)](s(312)):function(){return!1}[s(189)](s(267)+"gger").apply(s(208)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C.RAY_INITIALIZED=0,C[M(336)]=1,C[M(228)]=2,C[M(185)]=3,C.RAY_VANISHING=4,C.RAY_EXTINGUISHED=5,C.COS30DEG=Math[M(252)](30*Math.PI/180),C[M(346)]=Math[M(344)](30*Math.PI/180);const z=G;function D(){const t=["deadLightningsMeshes","random","while (true) {}","clone","info","4904cbepXk","destOffset","onLightningDown","2017611wbzbgA","copy","init","error","add","state","deathTime","getNextLightningTime","geometry","input","update","lerp","stormParams","5623475QNhkKS","call","size","maxLightnings","2638476pGwUFL",'{}.constructor("return this")( )',"lightningsMeshes","433419pdQGiS","test","853753eiewuC","stateObject","chain","birthTime","remove","counter","maxSlope","table","splice","debu","gger","bind","minHeight","return (function() ","96rAJGUy","prototype","maxHeight","lightningMinPeriod","string","56NrIkPz","multiplyScalar","push","lightningParameters","5613096cbYTQN","onRayPosition","lightningMaterial","warn","__proto__","RAY_EXTINGUISHED","apply","isLightningStorm","copyParameters","lightningMaxPeriod","set","length","rayParameters","lightningMaxDuration","action","nextLightningTime","inited","toString","sourceOffset","log","console","noiseSeed","lightningMinDuration","constructor"];return(D=function(){return t})()}!function(t,i){const s=G,n=D();for(;;)try{if(584089===parseInt(s(455))/1+-parseInt(s(430))/2*(parseInt(s(392))/3)+-parseInt(s(450))/4+-parseInt(s(446))/5+parseInt(s(401))/6+parseInt(s(453))/7*(parseInt(s(397))/8)+parseInt(s(433))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function G(t,i){const s=D();return(G=function(t,i){return s[t-=383]})(t,i)}!function(){F(this,(function(){const t=G,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=E(t(435));i.test(n+t(457))&&s[t(454)](n+t(442))?E():n("0")}))()}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(407)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();N(void 0,(function(){const t=G,i=function(){const t=G;let i;try{i=Function(t(391)+t(451)+");")()}catch(s){i=window}return i}(),s=i[t(421)]=i[t(421)]||{},n=[t(420),t(404),t(429),t(436),"exception",t(385),"trace"];for(let e=0;e<n[t(412)];e++){const i=N[t(424)][t(393)][t(389)](N),r=n[e],o=s[r]||i;i[t(405)]=N.bind(N),i.toString=o[t(418)][t(389)](o),s[r]=i}}))();class H extends a{constructor(t={}){const i=G;super(),this[i(408)]=!0,this[i(445)]=t,t[i(448)]=void 0!==t[i(448)]?t.size:1e3,t[i(390)]=void 0!==t[i(390)]?t.minHeight:80,t.maxHeight=void 0!==t.maxHeight?t[i(394)]:100,t[i(384)]=void 0!==t[i(384)]?t[i(384)]:1.1,t[i(449)]=void 0!==t[i(449)]?t[i(449)]:3,t[i(395)]=void 0!==t[i(395)]?t[i(395)]:3,t.lightningMaxPeriod=void 0!==t.lightningMaxPeriod?t.lightningMaxPeriod:7,t.lightningMinDuration=void 0!==t[i(423)]?t[i(423)]:1,t.lightningMaxDuration=void 0!==t[i(414)]?t[i(414)]:2.5,this[i(400)]=C[i(409)](t[i(400)],t.lightningParameters),this[i(400)].isEternal=!1,this[i(403)]=void 0!==t[i(403)]?t[i(403)]:new h({color:11599871}),void 0!==t[i(402)]?this.onRayPosition=t[i(402)]:this.onRayPosition=function(s,n){const e=i;n[e(411)]((Math[e(426)]()-.5)*t[e(448)],0,(Math[e(426)]()-.5)*t[e(448)]);const r=o.lerp(t[e(390)],t[e(394)],Math[e(426)]());s[e(411)](t.maxSlope*(2*Math[e(426)]()-1),1,t[e(384)]*(2*Math[e(426)]()-1))[e(398)](r).add(n)},this[i(432)]=t[i(432)],this.inited=!1,this.nextLightningTime=0,this[i(452)]=[],this[i(425)]=[];for(let s=0;s<this[i(445)][i(449)];s++){const t=new C(C.copyParameters({},this[i(400)])),s=new c(t,this[i(403)]);this[i(425)][i(399)](s)}}update(t){const i=G;if(!this.inited&&(this[i(416)]=this.getNextLightningTime(t)*Math[i(426)](),this[i(417)]=!0),t>=this[i(416)]){const s=this.deadLightningsMeshes.pop();if(s){const n=C[i(409)](s[i(441)][i(413)],this.lightningParameters);n[i(458)]=t,n[i(439)]=t+o[i(444)](this.stormParams[i(423)],this[i(445)][i(414)],Math[i(426)]()),this[i(402)](n[i(419)],n[i(431)]),n[i(422)]=Math.random(),this[i(437)](s),this.lightningsMeshes[i(399)](s)}this[i(416)]=this[i(440)](t)}let s=0,n=this.lightningsMeshes[i(412)];for(;s<n;){const e=this[i(452)][s],r=e[i(441)],o=r[i(438)];r[i(443)](t),o===C.RAY_PROPAGATING&&r.state>o&&this[i(432)]&&this[i(432)](r),r[i(438)]===C[i(406)]?(this.lightningsMeshes[i(386)](this[i(452)].indexOf(e),1),this[i(425)].push(e),this[i(459)](e),n--):s++}}getNextLightningTime(t){const i=G;return t+o[i(444)](this.stormParams[i(395)],this[i(445)][i(410)],Math[i(426)]())/(this[i(445)][i(449)]+1)}[z(434)](t,i){const s=z;return super[s(434)](t,i),this[s(445)][s(448)]=t[s(445)][s(448)],this.stormParams[s(390)]=t[s(445)].minHeight,this[s(445)][s(394)]=t[s(445)][s(394)],this[s(445)][s(384)]=t.stormParams.maxSlope,this[s(445)][s(449)]=t[s(445)][s(449)],this[s(445)][s(395)]=t[s(445)][s(395)],this[s(445)][s(410)]=t[s(445)][s(410)],this.stormParams[s(423)]=t[s(445)][s(423)],this[s(445)].lightningMaxDuration=t[s(445)].lightningMaxDuration,this.lightningParameters=C[s(409)]({},t.lightningParameters),this[s(403)]=t.stormParams[s(403)],this[s(432)]=t[s(432)],this}[z(428)](){const t=z;return new(this[t(424)])(this[t(445)]).copy(this)}}function E(t){function i(t){const s=G;if(typeof t===s(396))return function(t){}.constructor(s(427))[s(407)](s(383));1!==(""+t/t).length||t%20==0?function(){return!0}[s(424)](s(387)+s(388))[s(447)](s(415)):function(){return!1}[s(424)](s(387)+s(388))[s(407)](s(456)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=Z;!function(t,i){const s=Z,n=Y();for(;;)try{if(410086===-parseInt(s(520))/1+parseInt(s(490))/2*(parseInt(s(506))/3)+parseInt(s(502))/4+-parseInt(s(495))/5*(parseInt(s(537))/6)+-parseInt(s(544))/7*(-parseInt(s(514))/8)+parseInt(s(515))/9+-parseInt(s(531))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(517)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){L(this,(function(){const t=Z,i=new RegExp(t(526)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=$("init");i[t(536)](n+t(521))&&s[t(536)](n+t(519))?$():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(517)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=Z;let i;try{i=Function(t(504)+t(496)+");")()}catch(e){i=window}const s=i[t(533)]=i.console||{},n=[t(525),"warn",t(524),"error",t(528),t(529),"trace"];for(let r=0;r<n.length;r++){const i=U.constructor[t(507)][t(539)](U),e=n[r],o=s[e]||i;i[t(516)]=U[t(539)](U),i[t(540)]=o[t(540)][t(539)](o),s[e]=i}}))();const k=[O(503)];function Y(){const t=["exception","table","subVectors","8892170USpvzo","lightStorm","console","subrayDutyCycle","multiplyScalar","test","980592nOXuZY","Color","bind","toString","subrayConePosition","maxLightnings","timeScale","7ifAwQN","debu","3020OgrdJv","radius1","roughness","pos1","stateObject","10EEELuq",'{}.constructor("return this")( )',"sourceOffset","size","Vector3","minHeight","rayParameters","1895484PIkQtD","object","return (function() ","primitive","1554sipBwX","prototype","dot","straightness","gger","color","copy","while (true) {}","5344448sXZmnC","2690343UldRCT","__proto__","apply","constructor","input","596867YsqRir","chain","maxHeight","add","info","log","function *\\( *\\)","radius0"];return(Y=function(){return t})()}function Z(t,i){const s=Y();return(Z=function(t,i){return s[t-=489]})(t,i)}const X=f({__name:O(532),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,n=t,e=new(u[i(538)])(n[i(511)]),r=new h({color:e}),o=new(u[i(499)])(0,-1,0);let a=0;const c=new s,d=new(u[i(499)]),p={roughness:n[i(492)],straightness:n.straightness,radius0:n[i(527)],radius1:n[i(491)],timeScale:n[i(543)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(534)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(541)](t,s,n,.6,.6,.5),a=e[r(501)][r(497)].y,c[r(530)](n.pos1,e[r(501)][r(497)]);const h=o[r(508)](c);d[r(512)](o)[r(535)](h),c.sub(d);const u=h/a>.5?a/h:1;d[r(535)](u),c[r(523)](d),n[r(493)].addVectors(c,e[r(501)][r(497)])}},m=new H({size:n[i(498)],minHeight:n[i(500)],maxHeight:n[i(522)],maxSlope:.6,maxLightnings:n[i(542)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=m.stormParams;s.size=n[t(498)],s[t(500)]=n.minHeight,s[t(522)]=n[t(522)],r[t(511)].set(n[t(511)]),p[t(492)]=n.roughness,p.straightness=n[t(509)],p.radius0=n[t(527)],p[t(491)]=n.radius1,p[t(543)]=n[t(543)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{m.update(t)})),(t,s)=>{const n=i;return y(),b(n(505),{object:S(m),renderOrder:9999},null,8,k)}}});function $(t){function i(t){const s=Z;if("string"==typeof t)return function(t){}.constructor(s(513))[s(517)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(518)]("debu"+s(510)).call("action"):function(){return!1}[s(518)](s(489)+"gger")[s(517)](s(494)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=W,n=J();for(;;)try{if(123902===-parseInt(s(143))/1*(-parseInt(s(170))/2)+parseInt(s(156))/3+-parseInt(s(132))/4+-parseInt(s(158))/5+-parseInt(s(150))/6*(-parseInt(s(137))/7)+-parseInt(s(166))/8+parseInt(s(161))/9*(-parseInt(s(171))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(129)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){B(this,(function(){const t=W,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=K(t(131));i[t(130)](n+"chain")&&s[t(130)](n+"input")?K():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(129)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["518615xNILYp","toString","trace","880686yvNtHj","color","radius0","__proto__","minHeight","635088jbBXQN","warn","debu","直度度","8JduVfc","10IBpTAy","radius1","apply","test","init","28944CBIxmz","info","maxHeight","log","while (true) {}","1386728DBzHPQ","constructor","straightness","action","端部半径","call","41168vpezIA","value",'{}.constructor("return this")( )',"exception","prototype","粗糙度","bind","6WsvVyM","#ffbde7","length","#6f6f6f","table","gger","147975vTogOD","stateObject"];return(J=function(){return t})()}function W(t,i){const s=J();return(W=function(t,i){return s[t-=128]})(t,i)}Q(void 0,(function(){const t=W,i=function(){const t=W;let i;try{i=Function("return (function() "+t(145)+");")()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=[t(135),t(167),t(133),"error",t(146),t(154),t(160)];for(let e=0;e<n.length;e++){const i=Q[t(138)][t(147)][t(149)](Q),r=n[e],o=s[r]||i;i[t(164)]=Q.bind(Q),i[t(159)]=o[t(159)][t(149)](o),s[r]=i}}))();const q=f({__name:"lightningStorm",setup(i){const s=W,n=x({cellSize:60,cellThickness:1,cellColor:s(153),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(151),roughness:{label:s(148),value:.85,min:0,max:1,step:.01},straightness:{label:s(169),value:.65,min:0,max:1,step:.01},radius0:{label:s(141),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(P,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[v(X,{minHeight:S(e)[m(144)],maxHeight:S(r)[m(144)],color:S(o)[m(144)],roughness:S(a)[m(144)],straightness:S(h)[m(144)],radius0:S(c)[m(144)],radius1:S(u).value,timeScale:S(l)[m(144)]},null,8,[m(165),m(134),m(162),"roughness",m(139),m(163),m(128),"timeScale"]),v(S(_),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(S(p))],64)}}});function K(t){function i(t){const s=W;if("string"==typeof t)return function(t){}[s(138)](s(136))[s(129)]("counter");1!==(""+t/t)[s(152)]||t%20==0?function(){return!0}[s(138)](s(168)+s(155))[s(142)](s(140)):function(){return!1}[s(138)](s(168)+s(155))[s(129)](s(157)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

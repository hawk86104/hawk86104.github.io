import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.flNBAz211718698100638.js";import{r as o}from"./@tresjs.aawOCoPx1718698100638.js";import{C as e}from"./three-custom-shader-material.tCYfd9sl1718698100638.js";import"./object-hash.SpRbwitp1718698100638.js";import{a5 as r,C as i,ca as u,k as c,a$ as a}from"./three.erXpfL-r1718698100638.js";import"./@amap.TW6HTmRb1718698100638.js";import"./glsl-tokenizer.RLlRtTA81718698100638.js";import{d as s,a2 as l,w as f,o as p,D as d,u as m,a3 as g,r as v,f as h,g as y,j as w,m as C}from"./@vue.CpOXM7bB1718698100638.js";import{P as _}from"./tweakpane.qqn77PB81718698100638.js";import"./@vueuse.TW6-TkVF1718698100638.js";import"./glsl-token-string.IbwI77yI1718698100638.js";import"./glsl-token-functions.LDKY2qLw1718698100638.js";import"./jszip.KspeudHJ1718698100638.js";const b=S;function x(){const t=["uGradient","4608844mMFImM","forEach","chain","debu","12658ElLmfH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","land","Color","table","#ffff00","uColor","uTime",'{}.constructor("return this")( )',"value","info","console","constructor","gger","setStyle","topColor","object","gradient","DoubleSide","3990135AthevI","clone","color","14686lQDlwG","#ffffff","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","computeBoundingSphere","171ZzODEA","uOpacity","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","MeshBasicMaterial","bModel","material","city","function *\\( *\\)","19xXyBwW","4434aSjvVt","toString","isArray","bind","opacity","log","__csm","#112233","children","computeBoundingBox","test","error","83060GHgvrf","83552aHkvoI","length","exception","input","apply","uniforms","boundingBox","model","string","stateObject","bulidingsColor","#e523ff","205230uTRANK"];return(x=function(){return t})()}!function(t,n){const o=S,e=x();for(;;)try{if(938795===parseInt(o(159))/1*(-parseInt(o(125))/2)+parseInt(o(144))/3+parseInt(o(187))/4+-parseInt(o(185))/5+parseInt(o(160))/6*(-parseInt(o(147))/7)+parseInt(o(173))/8+-parseInt(o(151))/9*(-parseInt(o(172))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[S(177)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){I(this,(function(){const t=S,n=new RegExp(t(158)),o=new RegExp(t(126),"i"),e=O("init");n[t(170)](e+t(189))&&o.test(e+t(176))?O():e("0")}))()}();const M=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[S(177)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();M(void 0,(function(){const t=S,n=function(){const t=S;let n;try{n=Function("return (function() "+t(133)+");")()}catch(o){n=window}return n}(),o=n[t(136)]=n[t(136)]||{},e=[t(165),"warn",t(135),t(171),t(175),t(129),"trace"];for(let r=0;r<e[t(174)];r++){const n=M.constructor.prototype[t(163)](M),i=e[r],u=o[i]||n;n.__proto__=M[t(163)](M),n[t(161)]=u.toString[t(163)](u),o[i]=n}}))();const j=[b(141)];function S(t,n){const o=x();return(S=function(t,n){return o[t-=124]})(t,n)}const T=s({__name:b(155),props:{model:{},bulidingsColor:{default:b(184)},landColor:{default:b(167)},topColor:{default:b(130)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=b,u=t,c=u[n(180)][n(157)];u.model[n(180)][n(168)][0][n(156)]=new(r[n(154)])({color:n(130)}),c.renderOrder=1001;const a=u[n(180)][n(127)];(()=>{const t=n,{geometry:o}=c;o[t(169)](),o[t(150)]();const{max:a,min:s}=o[t(179)];if(c.material[t(166)])return;const l=new e({baseMaterial:c[t(156)],vertexShader:t(153),fragmentShader:t(149),silent:!0,uniforms:{uMax:{value:a},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new i(u[t(183)])},uOpacity:{value:u.opacity},uLightColor:{value:new(r[t(128)])(t(148))},uTopColor:{value:new(r[t(128)])(u[t(140)])},uTime:{value:0},uGradient:{value:u[t(142)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(143)]});c[t(156)].dispose(),c[t(156)]=l})();const{onLoop:s}=o();s((({delta:t})=>{const o=n;c[o(156)][o(178)][o(132)][o(134)]+=t})),l((()=>{const t=n;u[t(183)]&&c.material[t(178)][t(131)][t(134)][t(139)](u.bulidingsColor),u.landColor&&((t,o)=>{const e=n;let i;"cu"===t||"land"===t&&(i=Array[e(162)](a[e(156)])?a[e(156)]:[a[e(156)]],i[e(188)]((t=>{const n=e;t[o].setStyle(u.landColor),t.side=r[n(143)]})))})(t(127),t(146)),u.opacity&&(c[t(156)].uniforms[t(152)][t(134)]=u[t(164)])})),f(u,((t,o)=>{const e=n;c[e(156)].uniforms[e(186)][e(134)]=t[e(142)]}));const g=u[n(180)][n(180)][n(145)]();return(t,n)=>(p(),d("primitive",{object:m(g)},null,8,j))}});function O(t){function n(t){const o=S;if(typeof t===o(181))return function(t){}[o(137)]("while (true) {}")[o(177)]("counter");1!==(""+t/t)[o(174)]||t%20==0?function(){return!0}[o(137)](o(124)+"gger").call("action"):function(){return!1}[o(137)](o(124)+o(138))[o(177)](o(182)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function P(){const t=["150756XnHeMC","value","2432090CIIgqa","1062Wdgcgv","1140cPdyVQ","uSrcColor","speed","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","material","primitive","applyMatrix4","bind","exception","error","string","geometry","object","debu","22gpsiKb","1103268UdoiBO","12ioQEEt","#FFF","bLine","warn","gger","builds","action","init","__proto__","prototype","table",'{}.constructor("return this")( )',"178OGgjgd","trace","console","srcColor","13097FakOMw","linewidth","#000","uniforms","test","91528jvYuzH","gradual","renderOrder","9QufKcq","clone","call","uTime","constructor","apply","return (function() ","965715NuwPhB","length","input","scale","uGradual"];return(P=function(){return t})()}const B=F;function F(t,n){const o=P();return(F=function(t,n){return o[t-=261]})(t,n)}!function(t,n){const o=F,e=P();for(;;)try{if(166434===-parseInt(o(261))/1*(-parseInt(o(289))/2)+parseInt(o(307))/3*(parseInt(o(285))/4)+-parseInt(o(280))/5+-parseInt(o(288))/6*(parseInt(o(265))/7)+parseInt(o(270))/8+parseInt(o(273))/9*(parseInt(o(287))/10)+-parseInt(o(305))/11*(-parseInt(o(306))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[F(278)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){z(this,(function(){const t=F,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(293),"i"),e=k(t(314));n[t(269)](e+"chain")&&o[t(269)](e+t(282))?k():e("0")}))()}();const A=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[F(278)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();A(void 0,(function(){const t=F,n=function(){const t=F;let n;try{n=Function(t(279)+t(318)+");")()}catch(o){n=window}return n}(),o=n[t(263)]=n.console||{},e=["log",t(310),"info",t(300),t(299),t(317),t(262)];for(let r=0;r<e[t(281)];r++){const n=A[t(277)][t(316)][t(298)](A),i=e[r],u=o[i]||n;n[t(315)]=A.bind(A),n[t(292)]=u[t(292)][t(298)](u),o[i]=n}}))();const G=[B(303)],E=s({__name:B(309),props:{builds:{},color:{default:B(308)},srcColor:{default:B(267)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=B,e=t;let r=null;const s={transparent:!0,uniforms:{uColor:{value:new i(e.color)},uSrcColor:{value:new i(e[n(264)])},uScale:{value:e[n(283)]},uTime:{value:0},uGradual:{value:e[n(271)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let f=new u(e[n(312)][n(302)])[n(274)]();f=f[n(297)](e[n(312)].matrix);const g=new c(s);r=new a(f,g),r[n(295)][n(266)]=e.width,r[n(272)]=1e3,l((()=>{const t=n;e.color&&(s[t(268)].uColor[t(286)]=new i(e.color)),e[t(264)]&&(s[t(268)][t(290)][t(286)]=new i(e.srcColor)),e.scale&&(s[t(268)].uScale[t(286)]=e.scale),e[t(271)]&&(s[t(268)][t(284)][t(286)]=e[t(271)])}));const{onLoop:v}=o();return v((({delta:t})=>{const o=n;s[o(268)][o(276)][o(286)]+=t*e[o(291)],s.uniforms.uTime[o(286)]%=1})),(t,o)=>{const e=n;return p(),d(e(296),{object:m(r)},null,8,G)}}});function k(t){function n(t){const o=F;if(typeof t===o(301))return function(t){}[o(277)]("while (true) {}")[o(278)](o(294));1!==(""+t/t)[o(281)]||t%20==0?function(){return!0}[o(277)]("debu"+o(311))[o(275)](o(313)):function(){return!1}[o(277)](o(304)+o(311))[o(278)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}!function(t,n){const o=W,e=R();for(;;)try{if(276135===parseInt(o(382))/1*(-parseInt(o(375))/2)+-parseInt(o(384))/3*(parseInt(o(423))/4)+parseInt(o(388))/5*(-parseInt(o(407))/6)+-parseInt(o(425))/7*(-parseInt(o(415))/8)+-parseInt(o(427))/9*(-parseInt(o(390))/10)+-parseInt(o(377))/11+parseInt(o(395))/12*(parseInt(o(414))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=W,n=new RegExp(t(412)),o=new RegExp(t(418),"i"),e=Z("init");n[t(389)](e+t(406))&&o.test(e+t(404))?Z():e("0")}))()}();const H=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function R(){const t=["prototype","model","#000","constructor","16PdfSmx","log","49LaeuyO","action","18xuFTTD","apply","string","exception","#000000","725792TWvcbg","__proto__","2879547UnGnsf","console","builds","#FFF","return (function() ","1JxwpHC","bind","19986rWtimZ","addBinding","#999","table","135085wAajQw","test","1199570YDKoXG","效果参数","toString","gradual","counter","168RLNHif","speed","最大扩散","length","srcColor","debu","stateObject","city","线原颜色","input",'{}.constructor("return this")( )',"chain","102RpIDBd","info","#112233","call","while (true) {}","function *\\( *\\)","scale","680966eHtopp","472552bMzGzb","扩散系数","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(R=function(){return t})()}H(void 0,(function(){const t=W,n=function(){const t=W;let n;try{n=Function(t(381)+t(405)+");")()}catch(o){n=window}return n}(),o=n.console=n[t(378)]||{},e=[t(424),"warn",t(408),"error",t(430),t(387),"trace"];for(let r=0;r<e[t(398)];r++){const n=H[t(422)][t(419)][t(383)](H),i=e[r],u=o[i]||n;n[t(376)]=H[t(383)](H),n[t(392)]=u[t(392)][t(383)](u),o[i]=n}}))();const L=s({__name:"buildingsEffectA",async setup(o){const e=W;let r,i;const u=([r,i]=g((()=>n())),r=await r,i(),r),c=v({color:e(380),srcColor:e(421),scale:2e3,gradual:6.6,speed:.3}),a=new _({title:e(391),expanded:!0});return a[e(385)](c,e(399),{label:e(403)}),a.addBinding(c,"color",{label:"线扫颜色"}),a[e(385)](c,e(396),{label:"速度",min:.1,max:1,step:.1}),a[e(385)](c,e(413),{label:e(397),min:10,max:2e3,step:10}),a[e(385)](c,e(393),{label:e(416),min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return p(),h(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:y((()=>[w(T,{model:m(u),bulidingsColor:r(374),landColor:r(409),topColor:r(386)},null,8,[r(420)]),w(E,C({builds:m(u)[r(402)]},c),null,16,[r(379)])])),_:1})}}});function W(t,n){const o=R();return(W=function(t,n){return o[t-=374]})(t,n)}function Z(t){function n(t){const o=W;if(typeof t===o(429))return function(t){}[o(422)](o(411))[o(428)](o(394));1!==(""+t/t)[o(398)]||t%20==0?function(){return!0}[o(422)](o(400)+"gger")[o(410)](o(426)):function(){return!1}[o(422)](o(400)+o(417))[o(428)](o(401)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{L as default};

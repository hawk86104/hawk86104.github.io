import{b as t,_ as e}from"./three.CYhYNU4g1738919103432.js";import{m as n}from"./@tresjs.G4idgyWs1738919103432.js";import{d as a,P as o}from"./@pmndrs.Y-O4vSg11738919103432.js";import{d as r,b as s,w as i,a2 as c,o as u,H as l,N as p,aj as f,ak as h}from"./@vue.NRI7TcgI1738919103432.js";const d=y;function m(){const t=["Group","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","opacity","camera","constructor","2768795yuRVyM","init","set","50bKUIkT","bind","8WyYIBS","update","length","left","width","rotate-x","action","apply","prototype","counter","material","while (true) {}","blendWindow","4794732idzeGm","console","top","add","shadows render end","randFloatSpread","castShadow","sin","DirectionalLight","log","right","alphaTest","28ECYayJ","random","accumulativeShadowsCom","frames","function *\\( *\\)","amount","string","747352RUTOcB","acos","1592397CYMAUG","value","position","toString","TresPlaneGeometry","size","ambient","progressiveLightMap2","shadow","shadows render start","color","#000000","test","return (function() ","error","TresSoftShadowMaterial",'{}.constructor("return this")( )',"stateObject","texture","TresMesh","far","clear","table","cos","909147ApPGZR","prepare","12397660grUaIW","input","blend","gPlane","finish","lightPosition","call","near","chain","211RSZPqT","intensity","3638bVwcXA","bias","mapSize","MathUtils","radius","info","height","children"];return(m=function(){return t})()}!function(t,e){const n=y,a=m();for(;;)try{if(507457===parseInt(n(339))/1*(-parseInt(n(341))/2)+-parseInt(n(328))/3*(-parseInt(n(359))/4)+-parseInt(n(354))/5+-parseInt(n(372))/6+-parseInt(n(295))/7*(parseInt(n(302))/8)+-parseInt(n(304))/9*(-parseInt(n(357))/10)+parseInt(n(330))/11)break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const w=function(){let t=!0;return function(e,n){const a=t?function(){if(n){const t=n[y(366)](e,arguments);return n=null,t}}:function(){};return t=!1,a}}();!function(){w(this,(function(){const t=y,e=new RegExp(t(299)),n=new RegExp(t(350),"i"),a=I(t(355));e[t(316)](a+t(338))&&n[t(316)](a+t(331))?I():a("0")}))()}();const g=function(){let t=!0;return function(e,n){const a=t?function(){if(n){const t=n[y(366)](e,arguments);return n=null,t}}:function(){};return t=!1,a}}();g(void 0,(function(){const t=y;let e;try{e=Function(t(317)+t(320)+");")()}catch(o){e=window}const n=e[t(373)]=e[t(373)]||{},a=["log","warn",t(346),t(318),"exception",t(326),"trace"];for(let r=0;r<a[t(361)];r++){const e=g[t(353)][t(367)][t(358)](g),o=a[r],s=n[o]||e;e.__proto__=g[t(358)](g),e[t(307)]=s[t(307)][t(358)](s),n[o]=e}}))();const b=[d(364)];function y(t,e){const n=m();return(y=function(t,e){return n[t-=295]})(t,e)}const M=r({__name:d(297),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:d(315)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=d,w=r;let g=s();const{extend:y,scene:M,renderer:I,camera:v}=n();y({SoftShadowMaterial:a});const z={position:(new t).set(w.lightPosition.x,w[m(335)].y,w[m(335)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},P=new o(I.value,M[m(305)],z[m(343)]),S={map:P[m(311)][m(322)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:w.blend,alphaTest:w[m(383)],opacity:w[m(351)],color:w.color},x=new(e[m(349)]);for(let t=0;t<z[m(300)];t++){const t=new(e[m(380)])(16777215,z[m(340)]/z[m(300)]);t[m(378)]=!0,t[m(312)][m(342)]=z[m(342)],t[m(312)].camera[m(337)]=z.near,t[m(312)][m(352)][m(324)]=z[m(324)],t.shadow[m(352)][m(382)]=z[m(309)]/2,t[m(312)].camera[m(362)]=-z[m(309)]/2,t.shadow[m(352)][m(374)]=z.size/2,t[m(312)][m(352)].bottom=-z[m(309)]/2,t[m(312)][m(343)][m(363)]=z[m(343)],t.shadow[m(343)][m(347)]=z.mapSize,x[m(375)](t)}const _=()=>{const t=m,n=z[t(306)][t(361)]();for(let a=0;a<x[t(348)].length;a++){const o=x[t(348)][a];if(Math[t(296)]()>w[t(310)])o.position[t(356)](z[t(306)].x+e[t(344)][t(377)](z.radius),z[t(306)].y+e[t(344)][t(377)](z[t(345)]),z[t(306)].z+e[t(344)][t(377)](z.radius));else{let e=Math[t(303)](2*Math[t(296)]()-1)-Math.PI/2,a=2*Math.PI*Math[t(296)]();o[t(306)][t(356)](Math.cos(e)*Math[t(327)](a)*n,Math.abs(Math[t(327)](e)*Math[t(379)](a)*n),Math[t(379)](e)*n)}}},T=(t=1)=>{const e=m;M[e(305)][e(375)](x),P[e(329)]();for(let n=0;n<t;n++)_(),P[e(360)](v[e(305)],w[e(371)]),console[e(381)]("shadows plm update",n);M.value.remove(x),P[e(334)]()};i((()=>g[m(305)]),(t=>{const e=m;t&&(P.configure(t),P[e(325)](),console.log(e(313)),T(w[e(298)]),console[e(381)](e(376)))}));const j=()=>{P[m(325)](),T(w.frames)};return c((()=>{const t=m;g.value&&(w[t(351)]&&(g.value[t(369)][t(351)]=w[t(351)]),w.alphaTest&&(g.value.material[t(383)]=w[t(383)]),w[t(314)]&&g.value.material[t(314)][t(356)](w[t(314)]),w[t(332)]&&(g[t(305)][t(369)][t(332)]=w[t(332)]))})),i((()=>w[m(335)]),(t=>{const e=m;t&&(console[e(381)](w.lightPosition),z[e(306)][e(356)](t.x,t.y,t.z),j())}),{deep:!0}),i((()=>[w.frames,w[m(371)],w[m(310)]]),(()=>{j()})),(t,e)=>{const n=m;return u(),l(n(323),{"receive-shadow":"",ref_key:n(333),ref:g,scale:10,"rotate-x":-Math.PI/2},[e[0]||(e[0]=p(n(308),{args:[1,1]},null,-1)),p(n(319),f(h(S)),null,16)],8,b)}}});function I(t){function e(t){const n=y;if(typeof t===n(301))return function(t){}.constructor(n(370))[n(366)](n(368));1!==(""+t/t)[n(361)]||t%20==0?function(){return!0}[n(353)]("debugger")[n(336)](n(365)):function(){return!1}[n(353)]("debugger").apply(n(321)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{M as _};

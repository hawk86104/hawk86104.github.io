import"./@fesjs.OMA0Tumj1719803971187.js";import{_ as t}from"./jszip.Q9Kx2fWV1719803971187.js";import{F as n}from"./file-saver.uhY1U8HL1719803971187.js";import{a5 as e,aI as s}from"./three.BsQyBKrV1719803971187.js";const o=m;!function(t,n){const e=m,s=i();for(;;)try{if(970933===parseInt(e(466))/1+parseInt(e(544))/2*(parseInt(e(534))/3)+parseInt(e(531))/4*(parseInt(e(514))/5)+-parseInt(e(528))/6+-parseInt(e(494))/7+-parseInt(e(486))/8+parseInt(e(545))/9)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[m(546)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=m,n=new RegExp(t(505)),e=new RegExp(t(537),"i"),s=b(t(490));n[t(536)](s+t(469))&&e[t(536)](s+"input")?b():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[m(546)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(){const t=["call","enabled","data:image/webp;base64,","Cache","type","catch","toUpperCase","trace","3048832ACgLZJ","toLowerCase","debu","table","init","load","data:","get","11422313ACJowD","geometries","PNG","stateObject","file","data:image/gif;base64,",";base64,",'{}.constructor("return this")( )',"string","uuid","length","function *\\( *\\)","data:image/png;base64,","constructor","forEach","url","data","loadAsync","async","bind","10bwlyRT","setResponseType","data:image/PNG;base64,","__proto__","data:image/","action","readAsDataURL","scene","app.json","FileLoader","slice","generateAsync","warn","data:image/WEBP;base64,","3729960asASBg","substring","data:image/jpeg;base64,","315272tiIRYj","split","GIF","5847xktDUb","gger","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pop","then","log","image/webp","folder","exception","1352wfziyJ","13808025kJrIBn","apply","stringify","image/png","push","JPEG","error","image/jpeg","endsWith","WEBP","prototype","images","url:","596071JyGQxu","toString",".json","chain","data:image/JPEG;base64,","非标准文件：不存在 app.json","startsWith","base64","files","info","parse","blob"];return(i=function(){return t})()}async function c(t){const n=o,s=new(e[n(523)]);return new Promise(((e,o)=>{s[n(491)](t,(t=>e(JSON.parse(t))),void 0,(t=>o(t)))}))}async function u(t){const n=new s;return new Promise(((e,s)=>{const r=m;n[r(515)](r(477)),n[r(491)](t,(n=>{const a=r,i=new FileReader;i.onloadend=()=>{const n=m,s=function(t){const n=o,e=t.split(".")[n(538)]()[n(487)]();return{jpg:n(552),jpeg:"image/jpeg",png:n(548),gif:"image/gif",bmp:"image/bmp",webp:n(541)}[e]||"application/octet-stream"}(t),r=i.result[n(532)](",")[1];e(n(492)+s+n(500)+r)},i.onerror=t=>{s(t)},i[a(520)](n)}),void 0,(t=>s(t)))}))}a(void 0,(function(){const t=m,n=function(){const t=m;let n;try{n=Function("return (function() "+t(501)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},s=[t(540),t(526),t(475),t(551),t(543),t(489),t(485)];for(let o=0;o<s.length;o++){const n=a[t(507)][t(555)][t(513)](a),r=s[o],i=e[r]||n;n[t(517)]=a[t(513)](a),n[t(467)]=i[t(467)][t(513)](i),e[r]=n}}))(),e[o(481)][o(479)]=!0;const l=n=>{const e=o,r=new s;return r.setResponseType(e(477)),new Promise(((e,s)=>{r.load(n,(async n=>{const s=m;e(await t[s(511)](n))}),void 0,(t=>s(t)))}))},f=t=>{const n=o,e=t[n(529)](0,15),s=n(530),r=n(470),a=n(506),i=n(516),c=n(499),u=n(480),l=n(527);return s.startsWith(e)||r[n(472)](e)?n(550):a[n(472)](e)||i[n(472)](e)?n(496):c.startsWith(e)||"data:image/GIF;base64,"[n(472)](e)?n(533):u[n(472)](e||l[n(472)](e))?n(554):"Unknown"},p=e=>{const s=o,r=[];e[s(521)].geometries&&e[s(521)][s(495)][s(508)]((t=>{const n=s;"BufferGeometry"===t[n(482)]&&(r[n(549)]({uuid:t[n(503)],data:t[n(510)]}),t[n(510)]="url:geometries/"+t[n(503)]+n(468))}));const a=[];e[s(521)][s(464)]&&e[s(521)].images[s(508)]((t=>{const n=s;t[n(509)]&&(a[n(549)]({uuid:t.uuid,url:t[n(509)]}),t.url[n(482)]?t.url="url:images/"+t[n(503)]+"."+t.url[n(482)]+n(468):t[n(509)]="url:images/"+t[n(503)]+"."+f(t[n(509)]))}));const i=new t;if(r[s(504)]){const t=i[s(542)]("geometries");r[s(508)]((n=>{const e=s;t.file(n[e(503)]+".json",JSON.stringify(n[e(510)]))}))}if(a[s(504)]){const t=i[s(542)]("images");a.forEach((n=>{const e=s;n[e(509)][e(482)]?t.file(n[e(503)]+"."+n.url[e(482)]+".json",JSON[e(547)](n[e(509)])):t[e(498)](n[e(503)]+"."+f(n[e(509)]),n[e(509)][e(532)](e(500))[e(538)](),{base64:!0})}))}const c=JSON[s(547)](e);return i[s(498)]("app.json",c),i[s(525)]({type:s(477)})[s(539)]((t=>{n.saveAs(t,"config.zip")}))},g=(t,n,e)=>{const s=o;t.geometries<=0&&t[s(464)]<=0&&e(n)};function m(t,n){const e=i();return(m=function(t,n){return e[t-=464]})(t,n)}const d=(n,e)=>{const s=o;let r=null;return t[s(511)](n)[s(539)]((t=>{const n=s;t[n(474)][n(522)]?t[n(474)][n(522)][n(512)](n(502))[n(539)]((s=>{var a,i;const c=n;r=JSON[c(476)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(521)][s(495)])||n[s(508)]((t=>{const n=s;t[n(510)][n(472)](n(465))&&r[n(495)]++})),null==(e=t[s(521)][s(464)])||e[s(508)]((t=>{const n=s;t[n(509)].startsWith(n(465))&&r[n(464)]++})),r})(r);g(u,r,e),null==(a=r[c(521)][c(495)])||a[c(508)]((n=>{const s=c;n[s(510)].startsWith(s(465))&&t[s(474)][n[s(510)][s(524)](4)][s(512)](s(502))[s(539)]((t=>{const o=s;n[o(510)]=JSON[o(476)](t),u[o(495)]--,g(u,r,e)}))})),null==(i=r[c(521)][c(464)])||i.forEach((n=>{const s=c;if(n.url[s(472)](s(465))){const o=n.url[s(524)](4);o[s(553)](s(468))?t[s(474)][o].async(s(502))[s(539)]((t=>{const o=s;n[o(509)]=JSON[o(476)](t),u[o(464)]--,g(u,r,e)})):t.files[o][s(512)](s(473)).then((t=>{const a=s,i=o[a(532)]("."),c=i[i.length-1][a(484)]();n.url=a(518)+c+a(500)+t,u.images--,g(u,r,e)}))}}))})):console[n(551)](n(471))}),(t=>{console[s(551)](n.name+": "+t.message)})),r};function b(t){function n(t){const e=m;if(typeof t===e(502))return function(t){}.constructor("while (true) {}")[e(546)]("counter");1!==(""+t/t)[e(504)]||t%20==0?function(){return!0}[e(507)](e(488)+e(535))[e(478)](e(519)):function(){return!1}[e(507)]("debugger")[e(546)](e(497)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,u as b,p as e,f as g,d as i,c as l};

import{importShared as e}from"./3d-tiles-renderer.HXNTGnH81769411460564.js";import{useLoop as t,customShaderMaterial_default as a}from"./index.KfH1904l1769411460564.js";import{buildRoundedPath as l}from"./buildFlexiblePipe.DcXQGbTC1769411460564.js";const{defineComponent:r}=await e("vue"),{createElementVNode:o,unref:n,createVNode:i,openBlock:u,createElementBlock:s}=await e("vue"),d={renderOrder:9999},f=["args"],{watch:c,ref:v}=await e("vue"),m=await e("three"),p=r({__name:"flexiblePipe2",props:{color:{default:"0xff0000"},uGapColor:{default:"#ffffff"},radius:{default:.1},bodyLength:{default:2},headLength:{default:1},headAngle:{default:0},radialSegments:{default:16},tailAngle:{default:0},tailLength:{default:.5},filletRadius:{default:.3},speed:{default:.01},uStripeScale:{default:10},metalness:{default:.3},roughness:{default:.5},reflectivity:{default:.5},ior:{default:1.5}},setup(e){const r=e,p=v(new m.CurvePath);c(()=>[r.bodyLength,r.headLength,r.headAngle,r.tailAngle,r.tailLength,r.filletRadius,r.radialSegments],([e,t,a,r,o,n,i])=>{const u=e/2,s=new m.Vector3(0,0,-u),d=new m.Vector3(0,0,u),f=m.MathUtils.degToRad(a),c=new m.Vector3(Math.cos(f),Math.sin(f),0),v=d.clone().add(c.multiplyScalar(t)),h=m.MathUtils.degToRad(r),g=new m.Vector3(Math.cos(h),Math.sin(h),0),S=[s.clone().add(g.multiplyScalar(o)),s,d,v];p.value=l(S,n,i)},{immediate:!0});const h={uTime:{value:0},uStripeScale:{value:10},uGapColor:{value:new m.Color(r.uGapColor)}};c(()=>[r.uGapColor,r.uStripeScale],([e,t])=>{h.uStripeScale.value=t,h.uGapColor.value.setStyle(e)},{immediate:!0});const{onBeforeRender:g}=t();return g(()=>{h.uTime.value+=r.speed}),(e,t)=>(u(),s("TresMesh",d,[o("TresTubeGeometry",{args:[p.value,64,e.radius,e.radialSegments,!1]},null,8,f),i(n(a),{baseMaterial:m.MeshPhysicalMaterial,color:e.color,metalness:e.metalness,roughness:e.roughness,reflectivity:e.reflectivity,ior:e.ior,side:m.DoubleSide,transparent:"",vertexShader:"\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tvUv = vec3( uv, 1 ).xy; \n\t}\n",fragmentShader:"\n  uniform float uTime;\n  varying vec2 vUv;\n  uniform vec3 uGapColor;\n\tuniform float uStripeScale;\n\n\tvoid main() {\n\t\tvec2 vUV;  \n\t\tvUV=vUv;\n\t\tvUV.x+=uTime/uStripeScale;\n\n\t\tfloat ssColor = smoothstep(.31,.49,fract(vUV.x*uStripeScale));\n\t\tvec3 finalColor = mix(uGapColor, csm_DiffuseColor.xyz, ssColor);\n    csm_DiffuseColor=vec4(finalColor,1.0);\n\t}\n",uniforms:h},null,8,["baseMaterial","color","metalness","roughness","reflectivity","ior","side"])]))}});export{p as _sfc_main};

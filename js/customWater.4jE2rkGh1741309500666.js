import{e as t,h as e,o as n,f as r}from"./@tresjs.yaBKiR-I1741309500666.js";import{a}from"./index.cCquCM7w1741309500666.js";import"./index.XziQel_v1741309500666.js";import{_ as o,a0 as s,ai as i}from"./three.8tDGqmLF1741309500666.js";import{z as l}from"./three-custom-shader-material.VwrDYuIS1741309500666.js";import{p as u}from"./gl-noise.BrVtymbx1741309500666.js";import{d as c,b as p,a2 as f,w as g,o as h,H as m,N as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as z}from"./@vue.NRI7TcgI1741309500666.js";import{P as T}from"./tweakpane.yDiyAAkA1741309500666.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.9Zvujmzk1741309500666.js";import"./postprocessing.5pHDeDVF1741309500666.js";import"./@vueuse.7Aa9Vkmy1741309500666.js";import"./three-stdlib.sJO3Q2ZV1741309500666.js";import"./@pmndrs.RQWNONeU1741309500666.js";import"./object-hash.X-alA6w11741309500666.js";import"./@amap.dm2alPWO1741309500666.js";import"./jszip.ht5xKzrl1741309500666.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.YEIDW1NO1741309500666.js";import"./all.three.jR47vo8H1741309500666.js";import"./oimophysics.x0jH7fze1741309500666.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.LKUM8RMn1741309500666.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.yV-MrybV1741309500666.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.unRa8xzh1741309500666.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.HhYKeX6y1741309500666.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.odFo5qMr1741309500666.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.WtW9iMex1741309500666.js";function H(t,e){const n=O();return(H=function(t,e){return n[t-=152]})(t,e)}const I=H;!function(t,e){const n=H,r=O();for(;;)try{if(391507===-parseInt(n(161))/1+parseInt(n(187))/2*(parseInt(n(153))/3)+-parseInt(n(192))/4*(-parseInt(n(164))/5)+-parseInt(n(174))/6*(-parseInt(n(207))/7)+parseInt(n(216))/8+-parseInt(n(191))/9*(parseInt(n(152))/10)+-parseInt(n(177))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){S(this,(function(){const t=H,e=new RegExp(t(171)),n=new RegExp(t(202),"i"),r=F(t(167));e[t(159)](r+t(183))&&n[t(159)](r+t(205))?F():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(215)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function O(){const t=["error","baseMaterial","function *\\( *\\)","DoubleSide","table","6HfFsEk","MeshPhysicalMaterial","stateObject","791692PWWWlM","height","brightness","rotation-x","waterColor","uHeight","chain","console","args","material","140lVBfKS","customWaterMesh","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","TresBoxGeometry","7110RdTJSn","28qydjCZ","string","needsUpdate","exception","vertex","gger","fragmentShader","side","Color","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","fragment","trace","input","toString","4189094FeTthf","uTime","__proto__","call","convertLinearToSRGB","value","waterHighlight","debu","apply","4169128HtFHyO","#b3ffff",'{}.constructor("return this")( )',"5690QFcyIg","1995JVTHDD","constructor","info","vertexShader","prototype","log","test","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","670862JOdOpT","Flatshading","#52a7f7","298370BzqbtN","while (true) {}","length","init","counter"];return(O=function(){return t})()}B(void 0,(function(){const t=H,e=function(){const t=H;let e;try{e=Function("return (function() "+t(218)+");")()}catch(n){e=window}return e}(),n=e[t(184)]=e.console||{},r=[t(158),"warn",t(155),t(169),t(195),t(173),t(204)];for(let a=0;a<r.length;a++){const e=B.constructor[t(157)].bind(B),o=r[a],s=n[o]||e;e[t(209)]=B.bind(B),e[t(206)]=s.toString[t(201)](s),n[o]=e}}))();const P=[I(180)],W=[I(185)],D=c({__name:I(188),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(163)},waterHighlight:{default:I(217)},brightness:{default:1},baseMaterial:{default:o[I(175)]}},setup(n){const r=I,a=n,i=p(null),c={vertex:r(160),fragment:r(189)},b={uTime:{value:0},waterColor:{value:new(o[r(200)])(a[r(181)])[r(211)]()},waterHighlight:{value:new(o[r(200)])(a[r(213)])[r(211)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:a[r(179)]},uHeight:{value:a[r(178)]}},{onLoop:w}=t();return w((({elapsed:t})=>{const e=r;b[e(208)][e(212)]=-t/5})),f((()=>{const t=r;a[t(178)]&&(b[t(182)][t(212)]=a[t(178)]),a.waterColor&&(b.waterColor[t(212)]=new(o[t(200)])(a[t(181)])[t(211)]()),a.waterHighlight&&(b.waterHighlight.value=new(o[t(200)])(a[t(213)])[t(211)]()),a[t(179)]&&(b[t(179)][t(212)]=a.brightness)})),g((()=>a[r(162)]),(t=>{const e=r;i[e(212)][e(186)][e(194)]=!0})),g((()=>a[r(170)]),(t=>{const e=r,n=new l({baseMaterial:o[t],vertexShader:u(c[e(196)]),fragmentShader:c[e(203)],uniforms:b,flatShading:a[e(162)],side:s,roughness:.2,metalness:.1,silent:!0});i[e(212)][e(186)].dispose(),i[e(212)][e(186)]=n})),(t,n)=>{const a=r;return h(),m("TresMesh",{ref_key:"tmRef",ref:i,"rotation-x":-Math.PI/2},[v(a(190),{args:[5,5,t[a(178)],64,64,1]},null,8,W),d(_(e),{baseMaterial:o[a(175)],vertexShader:_(u)(c.vertex),fragmentShader:c[a(203)],uniforms:b,side:o[a(172)],roughness:.2,metalness:.1,flatShading:t.Flatshading,silent:""},null,8,["baseMaterial",a(156),a(198),a(199),"flatShading"])],8,P)}}});function F(t){function e(t){const n=H;if(typeof t===n(193))return function(t){}[n(154)](n(165))[n(215)](n(168));1!==(""+t/t)[n(166)]||t%20==0?function(){return!0}[n(154)](n(214)+"gger")[n(210)]("action"):function(){return!1}[n(154)]("debu"+n(197))[n(215)](n(176)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=L,r=k();for(;;)try{if(711504===parseInt(n(482))/1*(-parseInt(n(458))/2)+parseInt(n(508))/3+-parseInt(n(487))/4*(parseInt(n(479))/5)+parseInt(n(498))/6*(parseInt(n(495))/7)+parseInt(n(512))/8*(-parseInt(n(493))/9)+-parseInt(n(520))/10+parseInt(n(499))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(461)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){G(this,(function(){const t=L,e=new RegExp(t(494)),n=new RegExp(t(514),"i"),r=A(t(491));e[t(463)](r+t(457))&&n.test(r+t(455))?A():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(461)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(){const t=["__proto__","2060442fvvKOl","stateObject","MeshPhysicalMaterial","MeshPhongMaterial","553912jDnsot","neg-z.jpg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","label","baseMaterial","addBinding","height","水体颜色","9765400zbBQPs",'{}.constructor("return this")( )',"input","neg-y.jpg","chain","240332rDMUND","console","warn","apply","addBlade","test","Flatshading","value","TresPerspectiveCamera","return (function() ","gger","#52a7f7","brightness","MeshStandardMaterial","constructor","MeshToonMaterial","waterColor","pos-y.jpg","pos-z.jpg","#627179","MeshNormalMaterial","410Epjnpx","TresDirectionalLight","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","2HniAlp","TresAmbientLight","MeshLambertMaterial","info","toString","14020BJPNLc","debu","pos-x.jpg","MeshDepthMaterial","init","length","72hMMnKd","function *\\( *\\)","56LXwmPN","MeshBasicMaterial","call","1038822YyLvMh","7675668HqyUOv","while (true) {}","error","#3a78a2","log","table","bind","string"];return(k=function(){return t})()}function L(t,e){const n=k();return(L=function(t,e){return n[t-=454]})(t,e)}N(void 0,(function(){const t=L,e=function(){const t=L;let e;try{e=Function(t(467)+t(454)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(459)]||{},r=[t(503),t(460),t(485),t(501),"exception",t(504),"trace"];for(let a=0;a<r[t(492)];a++){const e=N[t(472)].prototype[t(505)](N),o=r[a],s=n[o]||e;e[t(507)]=N[t(505)](N),e.toString=s[t(486)][t(505)](s),n[o]=e}}))();const R=c({__name:"customWater",setup(t){const e=L,o=b({alpha:!0,toneMapping:i,windowSize:!0,clearColor:10066329}),s=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:e(477),sectionColor:e(502),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:e(469),waterHighlight:"#b3ffff",brightness:1,baseMaterial:e(510)}),c=new T;return c.addBinding(u,e(518),{label:"高度",min:.1,max:5,step:.1}),c[e(517)](u,e(474),{label:e(519)}),c.addBinding(u,"waterHighlight",{label:"浪头颜色"}),c[e(517)](u,e(470),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,e(464),{label:"Flatshading"}),c[e(462)]({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:e(510)},{text:e(496),value:e(496)},{text:e(478),value:"MeshNormalMaterial"},{text:e(471),value:e(471)},{text:e(511),value:e(511)},{text:"MeshToonMaterial",value:e(473)},{text:"MeshLambertMaterial",value:e(484)},{text:e(490),value:"MeshDepthMaterial"}],value:u[e(516)]}),c.on("change",(t=>{const n=e;"材质"===t.target[n(515)]&&(u[n(516)]=t[n(465)])})),(t,i)=>{const c=e;return h(),w(_(r),x(o,{"window-size":""}),{default:y((()=>[i[0]||(i[0]=v(c(466),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(n),M(j(s)),null,16),i[1]||(i[1]=v(c(483),{intensity:.5},null,-1)),i[2]||(i[2]=v(c(480),{position:[15,15,15],intensity:1},null,-1)),d(D,M(j(u)),null,16),d(_(C),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(a),{files:[c(489),"neg-x.jpg",c(475),c(456),c(476),c(513)],path:c(481)})])),_:1}))])),_:1},16)}}});function A(t){function e(t){const n=L;if(typeof t===n(506))return function(t){}.constructor(n(500))[n(461)]("counter");1!==(""+t/t)[n(492)]||t%20==0?function(){return!0}[n(472)](n(488)+"gger")[n(497)]("action"):function(){return!1}[n(472)](n(488)+n(468))[n(461)](n(509)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

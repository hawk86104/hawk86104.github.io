import{_ as t,cj as n,ck as e,cl as o,cm as r,C as i,m as s,c0 as u,ak as a,am as c}from"./three.lAfZYOpc1736493808390.js";import{f as l,e as f,U as p}from"./@tresjs.g7tJPOCI1736493808390.js";import{z as d}from"./three-custom-shader-material.eKT8KwaV1736493808390.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1736493808390.js";import{d as y,b as m,a1 as w,w as I,o as b,D as _,u as v,r as C,a4 as x,e as S,f as T,g as R,J as A,j as k,aj as j,ak as M,F as O,I as B,G as Z,m as F}from"./@vue.-Mz_IXfk1736493808390.js";function E(t,n){const e=H();return(E=function(t,n){return e[t-=294]})(t,n)}!function(t,n){const e=E,o=H();for(;;)try{if(138037===parseInt(e(318))/1*(parseInt(e(329))/2)+parseInt(e(321))/3*(parseInt(e(302))/4)+-parseInt(e(301))/5+parseInt(e(328))/6+parseInt(e(313))/7*(-parseInt(e(310))/8)+-parseInt(e(316))/9*(parseInt(e(314))/10)+-parseInt(e(311))/11*(parseInt(e(325))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[E(294)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function H(){const t=["input","log","101148IRwCte","test","return (function() ","1275048lUEDkA","1198YkyxBd","bind","apply","console","traverse","gger","trace","toString","constructor","323870lGVoFp","20rCTjPL","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","name","__proto__","table","string","LANDMASS","96uHgxSI","110IMsaZJ","stateObject","119749kKwdWY","20EbakgT",'{}.constructor("return this")( )',"1039275eyVtOa","while (true) {}","433qYIsPa","counter","prototype","150876PwpTOg","CITY_UNTRIANGULATED"];return(H=function(){return t})()}!function(){G(this,(function(){const t=E,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(304),"i"),o=D("init");n[t(326)](o+"chain")&&e.test(o+t(323))?D():o("0")}))()}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();L(void 0,(function(){const t=E;let n;try{n=Function(t(327)+t(315)+");")()}catch(r){n=window}const e=n[t(295)]=n[t(295)]||{},o=[t(324),"warn","info","error","exception",t(307),t(298)];for(let i=0;i<o[t(303)];i++){const n=L[t(300)][t(320)][t(330)](L),r=o[i],s=e[r]||n;n[t(306)]=L[t(330)](L),n[t(299)]=s[t(299)][t(330)](s),e[r]=n}}))();const Y=async()=>{const t=E,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(296)]((n=>{const i=t;n[i(305)]===i(322)&&(e=n),n[i(305)]===i(309)&&(o=n),"ROADS"===n[i(305)]&&(r=n)})),{model:n,city:e,land:o,roads:r}};function D(t){function n(t){const e=E;if(typeof t===e(308))return function(t){}[e(300)](e(317))[e(294)](e(319));1!==(""+t/t).length||t%20==0?function(){return!0}[e(300)]("debu"+e(297)).call("action"):function(){return!1}.constructor("debu"+e(297))[e(294)](e(312)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=$;!function(t,n){const e=$,o=U();for(;;)try{if(881689===parseInt(e(434))/1*(-parseInt(e(492))/2)+-parseInt(e(446))/3+-parseInt(e(444))/4+-parseInt(e(475))/5*(-parseInt(e(464))/6)+-parseInt(e(456))/7+-parseInt(e(453))/8*(parseInt(e(490))/9)+parseInt(e(448))/10*(parseInt(e(449))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function $(t,n){const e=U();return($=function(t,n){return e[t-=427]})(t,n)}!function(){z(this,(function(){const t=$,n=new RegExp(t(445)),e=new RegExp(t(487),"i"),o=J(t(485));n[t(477)](o+"chain")&&e.test(o+t(484))?J():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(463)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Q(void 0,(function(){const t=$;let n;try{n=Function(t(437)+t(471)+");")()}catch(r){n=window}const e=n[t(489)]=n[t(489)]||{},o=[t(459),t(479),t(450),t(443),t(431),t(493),t(452)];for(let i=0;i<o[t(474)];i++){const n=Q[t(467)][t(432)][t(468)](Q),r=o[i],s=e[r]||n;n.__proto__=Q[t(468)](Q),n[t(482)]=s[t(482)][t(468)](s),e[r]=n}}))();const W=[P(436)],q=y({__name:P(447),props:{model:{},bulidingsColor:{default:P(458)},landColor:{default:P(461)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=P,o=n,r=m(0),i=o[e(466)][e(438)];i[e(491)]=1001;const s=o[e(466)].land;(()=>{const n=e,{geometry:s}=i;s.computeBoundingBox(),s[n(469)]();const{max:u,min:a}=s[n(478)];if(i[n(441)].__csm)return;const c=new d({baseMaterial:i[n(441)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(472)])(o.bulidingsColor)},uOpacity:{value:o[n(476)]},uLightColor:{value:new(t[n(472)])(n(454))},uTopColor:{value:new(t[n(472)])(o[n(428)])},uTime:r,uGradient:{value:o.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(430)]});i[n(441)][n(480)](),i[n(441)]=c})();const{onLoop:u}=f();u((({delta:t})=>{r.value+=t})),w((()=>{const n=e;o[n(462)]&&i[n(441)][n(465)][n(442)][n(473)][n(488)](o.bulidingsColor),o[n(433)]&&((n,r)=>{const i=e;let u;"cu"===n||n===i(451)&&(u=Array.isArray(s[i(441)])?s.material:[s.material],u.forEach((n=>{const e=i;n[r][e(488)](o[e(433)]),n[e(427)]=t[e(430)]})))})(n(451),n(470)),o[n(476)]&&(i[n(441)][n(465)][n(494)][n(473)]=o[n(476)])})),I(o,((t,n)=>{const o=e;i[o(441)][o(465)][o(440)].value=t[o(455)]}));const a=o[e(466)].model[e(429)]();return(t,n)=>{const o=e;return b(),_(o(486),{object:v(a)},null,8,W)}}});function J(t){function n(t){const e=$;if("string"==typeof t)return function(t){}[e(467)](e(460))[e(463)](e(439));1!==(""+t/t)[e(474)]||t%20==0?function(){return!0}[e(467)](e(457)+e(481)).call(e(435)):function(){return!1}[e(467)](e(457)+e(481))[e(463)](e(483)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function U(){const t=["bulidingsColor","apply","6kvGcXn","uniforms","model","constructor","bind","computeBoundingSphere","color",'{}.constructor("return this")( )',"Color","value","length","4432565MZZBuU","opacity","test","boundingBox","warn","dispose","gger","toString","stateObject","input","init","primitive","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setStyle","console","274509xgPRNk","renderOrder","154kqUYDs","table","uOpacity","side","topColor","clone","DoubleSide","exception","prototype","landColor","19453GOvlLh","action","object","return (function() ","city","counter","uGradient","material","uColor","error","5728976xYTaDn","function *\\( *\\)","1629963KvmTpZ","buildingsModelCustomShader","1150FZhncq","467005xdRiQT","info","land","trace","64SacAJp","#ffffff","gradient","8187865eYMrGd","debu","#e523ff","log","while (true) {}","#112233"];return(U=function(){return t})()}function V(t,n){const e=nt();return(V=function(t,n){return e[t-=184]})(t,n)}const X=V;!function(t,n){const e=V,o=nt();for(;;)try{if(591851===parseInt(e(203))/1*(-parseInt(e(230))/2)+parseInt(e(223))/3+-parseInt(e(233))/4*(-parseInt(e(206))/5)+-parseInt(e(194))/6+-parseInt(e(225))/7*(parseInt(e(210))/8)+-parseInt(e(232))/9*(-parseInt(e(201))/10)+-parseInt(e(231))/11*(-parseInt(e(188))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(239)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){K(this,(function(){const t=V,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot(t(187));n[t(213)](o+t(227))&&e[t(213)](o+t(222))?ot():o("0")}))()}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();N(void 0,(function(){const t=V;let n;try{n=Function(t(208)+t(198)+");")()}catch(r){n=window}const e=n[t(199)]=n[t(199)]||{},o=[t(211),"warn","info",t(214),t(228),"table","trace"];for(let i=0;i<o[t(186)];i++){const n=N.constructor.prototype.bind(N),r=o[i],s=e[r]||n;n[t(189)]=N[t(192)](N),n[t(212)]=s[t(212)].bind(s),e[r]=n}}))();const tt=[X(193)];function nt(){const t=["object","6830532YaOdQd","uOpacity","primitive","innerHeight",'{}.constructor("return this")( )',"console","opacity","10IPGncu","color","34RLtdFF","width","matrix","16670Yeeucm","geometry","return (function() ","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","8bRgqXY","log","toString","test","error","fromEdgesGeometry","Shader","uColor","#FFF","linewidth","gger","Wireframe","input","1246581ThBfes","string","4545821MNOCry","constructor","chain","exception","while (true) {}","14548oxOiES","4957271IJQueT","5495166ZVQVyd","1380HSPoQi","counter","applyMatrix4","builds","value","material","apply"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","debu","style","buildingsLines","length","init","12lCHMQf","__proto__","uniforms","stateObject","bind"];return(nt=function(){return t})()}const et=y({__name:X(185),props:{builds:{},width:{default:1},color:{default:X(218)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const u=X,a=t;let c=null,l=null;if(a[u(184)]===u(221)){const t=new n(a.builds[u(207)]);let i=(new e)[u(215)](t),s=new o({color:a[u(202)],linewidth:a[u(204)],opacity:a.opacity,transparent:!0,depthWrite:!0,depthTest:!0});s.resolution.set(window.innerWidth,window[u(197)]),c=new r(i,s),c[u(235)](a[u(236)][u(205)].clone())}else{l={transparent:!0,uniforms:{uColor:{value:new i(a.color)},uOpacity:{value:a.opacity}},vertexShader:u(209),fragmentShader:u(240)};const t=new n(a.builds[u(207)]),e=new s(l);c=new LineSegments(t,e),c[u(235)](a[u(236)][u(205)].clone()),c.material[u(219)]=a[u(204)],c.renderOrder=1e3}return w((()=>{const t=u;a[t(184)]===t(216)&&(a.color&&(l[t(190)][t(217)][t(237)]=new i(a[t(202)])),a[t(200)]&&(l[t(190)][t(195)][t(237)]=a[t(200)])),a[t(184)]===t(221)&&(a[t(202)]&&(c.material[t(202)]=new i(a.color)),a[t(200)]&&(c.material.opacity=a[t(200)])),a.width&&(c[t(238)][t(219)]=a[t(204)])})),(t,n)=>{const e=u;return b(),_(e(196),{object:v(c)},null,8,tt)}}});function ot(t){function n(t){const e=V;if(typeof t===e(224))return function(t){}[e(226)](e(229))[e(239)](e(234));1!==(""+t/t)[e(186)]||t%20==0?function(){return!0}[e(226)](e(241)+e(220)).call("action"):function(){return!1}[e(226)](e(241)+e(220))[e(239)](e(191)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=st;!function(t,n){const e=st,o=at();for(;;)try{if(450962===parseInt(e(500))/1*(parseInt(e(522))/2)+parseInt(e(496))/3*(parseInt(e(495))/4)+-parseInt(e(526))/5+parseInt(e(507))/6*(-parseInt(e(494))/7)+parseInt(e(524))/8*(-parseInt(e(509))/9)+parseInt(e(514))/10*(-parseInt(e(482))/11)+parseInt(e(501))/12*(parseInt(e(518))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(528)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function st(t,n){const e=at();return(st=function(t,n){return e[t-=475]})(t,n)}!function(){it(this,(function(){const t=st,n=new RegExp(t(478)),e=new RegExp(t(503),"i"),o=pt(t(477));n.test(o+t(516))&&e.test(o+"input")?pt():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function at(){const t=["10825788QDWCyX","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info",'{}.constructor("return this")( )',"TresDirectionalLight","4070244HMogZS","length","31545kgVIvJ","pagesShow","tcRef","builds","action","2410mgChnw","#000","chain","showBuildings","13MqMqYU","disableRender","perspectiveCameraRef","TresCanvas","1447190fXqIsx","TresGridHelper","848PnHfCX","warn","1028810FObwYt","constructor","apply","ability","stateObject","init","function *\\( *\\)","#000000","gger","model","13827KZsJyT","trace","toString","city","showGridHelper","$slots","__proto__","#ffffff","showAxesHelper","string","bind","debu","7bkIVSC","1535284ymbQKj","3JaAHro","while (true) {}","exception","console","1FyEPMK"];return(at=function(){return t})()}ut(void 0,(function(){const t=st,n=function(){const t=st;let n;try{n=Function("return (function() "+t(505)+");")()}catch(e){n=window}return n}(),e=n[t(499)]=n[t(499)]||{},o=[t(502),t(525),t(504),"error",t(498),"table",t(483)];for(let r=0;r<o[t(508)];r++){const n=ut[t(527)].prototype[t(492)](ut),i=o[r],s=e[i]||n;n[t(488)]=ut[t(492)](ut),n[t(484)]=s[t(484)].bind(s),e[i]=n}}))();const ct={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=y({__name:rt(510),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(479),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:a,toneMapping:c,disableRender:r[n(519)]}),s=C({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r[n(517)]&&([e,o]=x((()=>Y())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,u=S(o(521));return b(),T(u,F({ref_key:o(511),ref:d},i,{"window-size":""}),{default:R((()=>[A("TresPerspectiveCamera",{ref_key:o(520),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),k(v(p),j(M(s)),null,16),e[0]||(e[0]=A("TresAmbientLight",{color:o(489)},null,-1)),e[1]||(e[1]=A(o(506),{position:[100,100,0],intensity:.5,color:o(489)},null,-1)),r[o(517)]&&v(l)?(b(),_(O,{key:0},[k(q,{model:v(l)},null,8,[o(481)]),k(et,{builds:v(l)[o(485)],color:o(515)},null,8,[o(512)])],64)):B("",!0),Z(t[o(487)],o(475)),r[o(490)]?(b(),_("TresAxesHelper",ct)):B("",!0),r[o(486)]?(b(),_(o(523),lt)):B("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=st;if(typeof t===e(491))return function(t){}[e(527)](e(497))[e(528)]("counter");1!==(""+t/t)[e(508)]||t%20==0?function(){return!0}[e(527)](e(493)+e(480)).call(e(513)):function(){return!1}[e(527)]("debugger")[e(528)](e(476)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{q as _,et as a,ft as b,Y as l};

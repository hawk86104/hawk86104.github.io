import{c8 as t,a3 as n,C as e,k as r}from"./three.jaHX2_hY1736406294003.js";import{b as o}from"./@tresjs.AACxYGk_1736406294003.js";import{R as c}from"./all.three.PHlVv3xt1736406294003.js";import{d as a,b as i,a4 as s,a1 as u,o as f,D as l,J as p,m,u as v}from"./@vue.yG49nQHr1736406294003.js";function d(t,n){const e=g();return(d=function(t,n){return e[t-=229]})(t,n)}!function(t,n){const e=d,r=g();for(;;)try{if(143304===parseInt(e(236))/1+parseInt(e(243))/2+-parseInt(e(242))/3+parseInt(e(264))/4+parseInt(e(270))/5*(-parseInt(e(271))/6)+-parseInt(e(252))/7+-parseInt(e(230))/8*(-parseInt(e(247))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[d(237)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["toString","constructor","405fYtTbm","table","input","prototype","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","1726319QZTQIJ",'{}.constructor("return this")( )',"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","gger","#include <project_vertex>","debu","bind","function *\\( *\\)","return (function() ","while (true) {}","vertexShader","chain","716292AWHYZY","replace","#include <emissivemap_fragment>","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","1395naXQgK","1932bgrIen","string","fragmentShader","23032ZlOBhV","stateObject","test","log","counter","exception","119682ykmTXJ","apply","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","trace","call","638652HmCFFe","528666FxPOHk","length"];return(g=function(){return t})()}!function(){h(this,(function(){const t=d,n=new RegExp(t(259)),e=new RegExp(t(268),"i"),r=y("init");n[t(232)](r+t(263))&&e[t(232)](r+t(249))?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[d(237)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=d;let n;try{n=Function(t(260)+t(253)+");")()}catch(o){n=window}const e=n[t(269)]=n[t(269)]||{},r=[t(233),"warn","info","error",t(235),t(248),t(240)];for(let c=0;c<r.length;c++){const n=x.constructor[t(250)][t(258)](x),o=r[c],a=e[o]||n;n[t(267)]=x[t(258)](x),n[t(245)]=a.toString.bind(a),e[o]=n}}))();function y(t){function n(t){const e=d;if(typeof t===e(272))return function(t){}[e(246)](e(261))[e(237)](e(234));1!==(""+t/t)[e(244)]||t%20==0?function(){return!0}[e(246)]("debu"+e(255))[e(241)]("action"):function(){return!1}[e(246)](e(257)+e(255))[e(237)](e(231)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function b(){const t=["error","#ffffff","24oajVjR","258480vXHVhX","exception","info","test","140868teKIzi","tpgRef","trace","channel","350270ttaEVP","init","textureMatrixUniform","visible","TresPlaneGeometry","while (true) {}","showGridHelper","log","tmRef","table","length","primitive","input","reflectorDiffuse","stateObject","uniforms",'{}.constructor("return this")( )',"aoMap","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","add","mirror","constructor","apply","3138792qmQzIY","TresGroup","prototype","__proto__","color","attributes","string","renderTargetUniform","onBeforeRender","TresMesh","assign","set","mixStrength","value","13176IPbDXc","1140135JsOQCH","update","console","object","textureMatrix","gger","return (function() ","debu","toString","warn","wrapS","2950178GmjJHh","3390VILHEx","wrapT","2zCQKWQ","chain"];return(b=function(){return t})()}const _=j;!function(t,n){const e=j,r=b();for(;;)try{if(211848===-parseInt(e(393))/1+parseInt(e(384))/2*(parseInt(e(370))/3)+-parseInt(e(389))/4+parseInt(e(397))/5*(-parseInt(e(388))/6)+parseInt(e(381))/7+parseInt(e(355))/8+parseInt(e(369))/9*(-parseInt(e(382))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(420)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=j,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(416),"i"),r=z(t(398));n[t(392)](r+t(385))&&e[t(392)](r+t(409))?z():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=j;let n;try{n=Function(t(376)+t(413)+");")()}catch(o){n=window}const e=n[t(372)]=n[t(372)]||{},r=[t(404),t(379),t(391),t(386),t(390),t(406),t(395)];for(let c=0;c<r[t(407)];c++){const n=w.constructor[t(357)][t(415)](w),o=r[c],a=e[o]||n;n[t(358)]=w[t(415)](w),n[t(378)]=a[t(378)][t(415)](a),e[o]=n}}))();const C=["rotation-x"],M=[_(373),_(400)];function j(t,n){const e=b();return(j=function(t,n){return e[t-=355]})(t,n)}const S=a({__name:_(410),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(387)}},async setup(a){const h=_;let g,x;const y=a,b=new t(9.5,10),I=i(),w=i(),j=i(),S=new c,z={mirror:{value:y[h(418)]},mixStrength:{value:y[h(367)]}},T=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var E=0;E<3;E++)T[E][h(380)]=n,T[E][h(383)]=n,T[E].repeat[h(366)](16,16);const R={color:new e("#444"),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},H=t=>{const n=h;t[n(412)].reflectMap=S[n(362)],t[n(412)][n(374)]=S[n(399)],t.uniforms=Object[n(365)](t.uniforms,z),(t=>{const n=d;t[n(262)]=t[n(262)][n(265)]("void main() {",n(251)),t.vertexShader=t[n(262)].replace(n(256),n(239))})(t),(t=>{const n=d;t[n(229)]=t[n(229)][n(265)]("void main() {",n(254)),t.fragmentShader=t[n(229)][n(265)](n(266),n(238))})(t)};return u((()=>{const t=h;I[t(368)]&&(I.value[t(360)].uv1=I[t(368)][t(360)].uv),j[t(368)]&&(j[t(368)][t(414)][t(396)]=1,j[t(368)].onBeforeCompile=H),w.value&&(w.value[t(417)](S),w.value[t(363)]=(n,e,r)=>{S[t(371)](n,e,r)}),y[t(359)]&&j[t(368)]&&(j.value[t(359)]=new e(y[t(359)]))})),(t,n)=>{const e=h;return f(),l(e(356),null,[p(e(364),{ref_key:e(405),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(401),{ref_key:e(394),ref:I,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:"tmsmRef",ref:j},R),null,16)],8,C),p(e(408),{object:v(b),visible:t[e(403)]},null,8,M)])}}});function z(t){function n(t){const e=j;if(typeof t===e(361))return function(t){}.constructor(e(402))[e(420)]("counter");1!==(""+t/t)[e(407)]||t%20==0?function(){return!0}[e(419)](e(377)+e(375)).call("action"):function(){return!1}[e(419)](e(377)+e(375))[e(420)](e(411)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

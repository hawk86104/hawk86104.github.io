import{b$ as t,a3 as n,C as e,k as r}from"./three.874nNzAX1726273176332.js";import{z as o}from"./@tresjs.BFyWuCYn1726273176332.js";import{R as c}from"./all.three.9jnNjfTG1726273176332.js";import{d as a,b as i,a4 as s,a3 as u,o as l,E as f,L as p,m,u as d}from"./@vue.JNsx1iN61726273176332.js";!function(t,n){const e=g,r=y();for(;;)try{if(886401===parseInt(e(446))/1+parseInt(e(470))/2*(parseInt(e(453))/3)+-parseInt(e(466))/4*(parseInt(e(459))/5)+-parseInt(e(479))/6+-parseInt(e(465))/7*(parseInt(e(455))/8)+parseInt(e(471))/9*(-parseInt(e(462))/10)+parseInt(e(443))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(454)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(448),"i"),r=x(t(480));n[t(441)](r+t(450))&&e[t(441)](r+t(468))?x():r("0")}))()}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(454)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();v(void 0,(function(){const t=g;let n;try{n=Function(t(476)+t(451)+");")()}catch(o){n=window}const e=n[t(467)]=n[t(467)]||{},r=[t(472),t(452),"info",t(469),"exception",t(447),t(457)];for(let c=0;c<r[t(464)];c++){const n=v[t(477)][t(474)][t(445)](v),o=r[c],a=e[o]||n;n[t(444)]=v.bind(v),n[t(475)]=a[t(475)][t(445)](a),e[o]=n}}))();function g(t,n){const e=y();return(g=function(t,n){return e[t-=441]})(t,n)}function x(t){function n(t){const e=g;if("string"==typeof t)return function(t){}[e(477)]("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(477)]("debu"+e(449)).call(e(442)):function(){return!1}[e(477)]("debu"+e(449))[e(454)](e(473)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function y(){const t=["\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","length","6388466VmLECY","4AwVnGX","console","input","error","2plOcse","9aQwuUL","log","stateObject","prototype","toString","return (function() ","constructor","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","9442626dJWMGm","init","void main() {","test","action","31104337ftBcvg","__proto__","bind","617074BtRnKc","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","chain",'{}.constructor("return this")( )',"warn","2012679TUGMiV","apply","8knPkId","#include <project_vertex>","trace","fragmentShader","2930335Fhxyrb","replace","vertexShader","1567570ZWOJtH"];return(y=function(){return t})()}const b=C;!function(t,n){const e=C,r=S();for(;;)try{if(326010===-parseInt(e(274))/1+parseInt(e(296))/2+parseInt(e(233))/3+parseInt(e(290))/4*(-parseInt(e(282))/5)+-parseInt(e(287))/6*(-parseInt(e(280))/7)+parseInt(e(253))/8+parseInt(e(236))/9*(parseInt(e(288))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(254)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=C,n=new RegExp(t(284)),e=new RegExp(t(291),"i"),r=T("init");n.test(r+t(252))&&e[t(247)](r+t(285))?T():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();_(void 0,(function(){const t=C;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n[t(270)]||{},r=[t(240),t(286),"info","error","exception","table",t(248)];for(let c=0;c<r[t(238)];c++){const n=_[t(289)][t(237)][t(249)](_),o=r[c],a=e[o]||n;n[t(251)]=_[t(249)](_),n[t(281)]=a[t(281)][t(249)](a),e[o]=n}}))();const I=[b(243)],M=[b(261),b(235)];function C(t,n){const e=S();return(C=function(t,n){return e[t-=233]})(t,n)}const j=a({__name:b(239),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const h=b;let v,x;const y=a,w=new t(9.5,10),_=i(),C=i(),j=i(),S=new c,T={mirror:{value:y[h(255)]},mixStrength:{value:y[h(293)]}},E=([v,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,x(),v);for(var R=0;R<3;R++)E[R][h(277)]=n,E[R][h(294)]=n,E[R][h(242)][h(275)](16,16);const z={color:new e("#444"),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},U=t=>{const n=h;t[n(264)][n(267)]=S.renderTargetUniform,t[n(264)][n(263)]=S[n(279)],t[n(264)]=Object[n(292)](t[n(264)],T),(t=>{const n=g;t[n(461)]=t.vertexShader.replace(n(481),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(461)]=t[n(461)][n(460)](n(456),n(463))})(t),(t=>{const n=g;t.fragmentShader=t.fragmentShader.replace(n(481),n(478)),t[n(458)]=t[n(458)].replace("#include <emissivemap_fragment>","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=h;_.value&&(_[t(271)].attributes[t(241)]=_[t(271)].attributes.uv),j[t(271)]&&(j[t(271)][t(272)][t(258)]=1,j[t(271)][t(245)]=U),C[t(271)]&&(C.value.add(S),C[t(271)][t(273)]=(n,e,r)=>{S[t(265)](n,e,r)}),y[t(250)]&&j[t(271)]&&(j.value[t(250)]=new e(y.color))})),(t,n)=>{const e=h;return l(),f(e(234),null,[p(e(246),{ref_key:"tmRef",ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(295),{ref_key:e(262),ref:_,args:[10,10]},null,512),p(e(278),m({ref_key:e(283),ref:j},z),null,16)],8,I),p(e(244),{object:d(w),visible:t[e(268)]},null,8,M)])}}});function S(){const t=["value","aoMap","onBeforeRender","385442uTycsh","set","call","wrapS","TresMeshStandardMaterial","textureMatrixUniform","42JcWliU","toString","15PxObKp","tmsmRef","function *\\( *\\)","input","warn","41070jyBRXh","10270JDiZPX","constructor","684428FwnwJI","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","assign","mixStrength","wrapT","TresPlaneGeometry","838714XhfbRr","825363TFvpnP","TresGroup","visible","2952QHKHZM","prototype","length","reflectorDiffuse","log","uv1","repeat","rotation-x","primitive","onBeforeCompile","TresMesh","test","trace","bind","color","__proto__","chain","1218952IWLUlA","apply","mirror","gger","action","channel","stateObject","debu","object","tpgRef","textureMatrix","uniforms","update","while (true) {}","reflectMap","showGridHelper","counter","console"];return(S=function(){return t})()}function T(t){function n(t){const e=C;if("string"==typeof t)return function(t){}[e(289)](e(266))[e(254)](e(269));1!==(""+t/t)[e(238)]||t%20==0?function(){return!0}.constructor(e(260)+e(256))[e(276)](e(257)):function(){return!1}[e(289)](e(260)+"gger").apply(e(259)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

import{_ as t,a0 as e}from"./three.MbBECAu81726740218347.js";import{U as n,J as r,Y as o,L as a}from"./@tresjs.C5O8roW51726740218347.js";import{a as s}from"./index.qxajnOUQ1726740218347.js";import"./index.qigBQEwZ1726740218347.js";import{C as i}from"./three-custom-shader-material.hw4Mip3d1726740218347.js";import"./object-hash.rW_XvzOw1726740218347.js";import"./@amap.bfr68PX11726740218347.js";import"./glsl-tokenizer.37TL9LuE1726740218347.js";import{p as l}from"./gl-noise.BrVtymbx1726740218347.js";import{d as u,b as c,a3 as p,w as f,o as g,E as h,L as m,j as v,u as d,r as _,f as b,g as w,aj as y,ak as j,m as x,al as M}from"./@vue.JNsx1iN61726740218347.js";import{P as z}from"./tweakpane.yHWGBmom1726740218347.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.9SmWhN-b1726740218347.js";import"./@vueuse.18lbrd2F1726740218347.js";import"./three-stdlib.vORGfiSP1726740218347.js";import"./@pmndrs.WMHo6lO61726740218347.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.L9jqS59i1726740218347.js";import"./all.three.YUIovSpZ1726740218347.js";import"./oimophysics.x0jH7fze1726740218347.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.R40ficSl1726740218347.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.SwnHBoWx1726740218347.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.Yj7VJo9j1726740218347.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.T5Jbf9k01726740218347.js";import"./glsl-token-string.AVYfh4t_1726740218347.js";import"./glsl-token-functions.cO5bFsqa1726740218347.js";import"./jszip.Axb7QGa61726740218347.js";const C=k;!function(t,e){const n=k,r=H();for(;;)try{if(793942===-parseInt(n(486))/1*(parseInt(n(485))/2)+parseInt(n(487))/3+-parseInt(n(522))/4+parseInt(n(507))/5*(parseInt(n(490))/6)+-parseInt(n(535))/7+-parseInt(n(497))/8+-parseInt(n(508))/9*(-parseInt(n(513))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(505)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=k,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(534),"i"),r=O(t(502));e.test(r+t(526))&&n[t(495)](r+t(520))?O():r("0")}))()}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(505)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=k;let e;try{e=Function("return (function() "+t(539)+");")()}catch(o){e=window}const n=e[t(517)]=e[t(517)]||{},r=[t(532),t(492),t(503),"error",t(498),t(523),"trace"];for(let a=0;a<r.length;a++){const e=I[t(529)][t(515)][t(491)](I),o=r[a],s=n[o]||e;e.__proto__=I[t(491)](I),e.toString=s[t(510)][t(491)](s),n[o]=e}}))();const G=["rotation-x"],B=[C(489)];function k(t,e){const n=H();return(k=function(t,e){return n[t-=484]})(t,e)}function H(){const t=["debu","vertex","dispose","init","info","brightness","apply","DoubleSide","6115ekMsGr","45jVSvGT","stateObject","toString","gger","MeshPhysicalMaterial","3149980AOPpxZ","height","prototype","material","console","fragment","string","input","uTime","6249616fAefrh","table","convertLinearToSRGB","waterColor","chain","value","waterHighlight","constructor","length","tmRef","log","#52a7f7","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5630807aDophB","side","call","baseMaterial",'{}.constructor("return this")( )',"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","action","fragmentShader","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","2ztwgWQ","647758NtgyBA","3123870yxzkrK","Flatshading","args","6636RvKFkb","bind","warn","counter","TresMesh","test","Color","1283304MIefMt","exception"];return(H=function(){return t})()}const W=u({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:C(533)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[C(512)]}},setup(o){const a=C,s=o,u=c(null),_={vertex:a(484),fragment:a(540)},b={uTime:{value:0},waterColor:{value:new(t[a(496)])(s[a(525)])[a(524)]()},waterHighlight:{value:new(t[a(496)])(s[a(528)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[a(504)]},uHeight:{value:s.height}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=a;b[e(521)][e(527)]=-t/5})),p((()=>{const e=a;s[e(514)]&&(b.uHeight[e(527)]=s[e(514)]),s[e(525)]&&(b[e(525)].value=new(t[e(496)])(s[e(525)])[e(524)]()),s[e(528)]&&(b.waterHighlight.value=new(t[e(496)])(s.waterHighlight).convertLinearToSRGB()),s[e(504)]&&(b[e(504)][e(527)]=s[e(504)])})),f((()=>s[a(488)]),(t=>{u[a(527)].material.needsUpdate=!0})),f((()=>s[a(538)]),(n=>{const r=a,o=new i({baseMaterial:t[n],vertexShader:l(_[r(500)]),fragmentShader:_[r(518)],uniforms:b,flatShading:s[r(488)],side:e,roughness:.2,metalness:.1,silent:!0});u[r(527)][r(516)][r(501)](),u.value[r(516)]=o})),(e,n)=>{const o=a;return g(),h(o(494),{ref_key:o(531),ref:u,"rotation-x":-Math.PI/2},[m("TresBoxGeometry",{args:[5,5,e[o(514)],64,64,1]},null,8,B),v(d(r),{baseMaterial:t[o(512)],vertexShader:d(l)(_[o(500)]),fragmentShader:_[o(518)],uniforms:b,side:t[o(506)],roughness:.2,metalness:.1,flatShading:e[o(488)],silent:""},null,8,["baseMaterial","vertexShader",o(542),o(536),"flatShading"])],8,G)}}});function O(t){function e(t){const n=k;if(typeof t===n(519))return function(t){}[n(529)]("while (true) {}")[n(505)](n(493));1!==(""+t/t)[n(530)]||t%20==0?function(){return!0}[n(529)](n(499)+n(511))[n(537)](n(541)):function(){return!1}[n(529)](n(499)+n(511))[n(505)](n(509)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=F;!function(t,e){const n=F,r=E();for(;;)try{if(439929===parseInt(n(156))/1*(-parseInt(n(184))/2)+-parseInt(n(192))/3+parseInt(n(199))/4+-parseInt(n(202))/5+-parseInt(n(185))/6+parseInt(n(176))/7+parseInt(n(180))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){A(this,(function(){const t=F,e=new RegExp(t(187)),n=new RegExp(t(195),"i"),r=q("init");e[t(173)](r+"chain")&&n.test(r+t(177))?q():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(183)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function F(t,e){const n=E();return(F=function(t,e){return n[t-=151]})(t,e)}D(void 0,(function(){const t=F,e=function(){const t=F;let e;try{e=Function(t(154)+t(205)+");")()}catch(n){e=window}return e}(),n=e[t(164)]=e[t(164)]||{},r=[t(213),t(200),t(157),t(193),"exception",t(201),"trace"];for(let o=0;o<r[t(181)];o++){const e=D.constructor[t(167)][t(198)](D),a=r[o],s=n[a]||e;e[t(162)]=D[t(198)](D),e[t(206)]=s[t(206)][t(198)](s),n[a]=e}}))();const R=m(P(189),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),N=m(P(159),{intensity:.5},null,-1),L=m(P(178),{position:[15,15,15],intensity:1},null,-1);function E(){const t=["MeshDepthMaterial","2468543YoToPi","input","TresDirectionalLight","MeshPhongMaterial","10350672idkCmV","length","Flatshading","apply","579674cnvmor","5049144qOqWmf","MeshStandardMaterial","function *\\( *\\)","浪头颜色","TresPerspectiveCamera","change","value","29391bJNMKz","error","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","neg-y.jpg","customWater","bind","2574116PEBxom","warn","table","3544625eAcdqK","#52a7f7","MeshBasicMaterial",'{}.constructor("return this")( )',"toString","debu","ACESFilmicToneMapping","MeshToonMaterial","#3a78a2","action","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","log","constructor","MeshLambertMaterial","pos-x.jpg","return (function() ","MeshPhysicalMaterial","1AzVPWy","info","MeshNormalMaterial","TresAmbientLight","baseMaterial","waterColor","__proto__","waterHighlight","console","addBinding","target","prototype","#627179","#b3ffff","brightness","call","gger","test","while (true) {}"];return(E=function(){return t})()}const Z=u({__name:P(197),setup(e){const n=P,r=_({alpha:!0,toneMapping:t[n(208)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(168),sectionColor:n(210),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(203),waterHighlight:n(169),brightness:1,baseMaterial:n(155)}),c=new z;return c[n(165)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(165)](u,n(161),{label:"水体颜色"}),c[n(165)](u,n(163),{label:n(188)}),c[n(165)](u,n(170),{label:"亮度",min:0,max:1,step:.01}),c[n(165)](u,n(182),{label:n(182)}),c.addBlade({view:"list",label:"材质",options:[{text:n(155),value:n(155)},{text:n(204),value:n(204)},{text:n(158),value:n(158)},{text:n(186),value:"MeshStandardMaterial"},{text:n(179),value:n(179)},{text:n(209),value:n(209)},{text:n(152),value:n(152)},{text:n(175),value:n(175)}],value:u.baseMaterial}),c.on(n(190),(t=>{const e=n;"材质"===t[e(166)].label&&(u[e(160)]=t[e(191)])})),(t,e)=>{const c=n;return g(),b(d(a),x(r,{"window-size":""}),{default:w((()=>[R,v(d(o),y(j(i)),null,16),N,L,v(W,y(j(u)),null,16),v(d(S),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(M,null,{default:w((()=>[v(d(s),{files:[c(153),"neg-x.jpg","pos-y.jpg",c(196),"pos-z.jpg","neg-z.jpg"],path:c(212)})])),_:1}))])),_:1},16)}}});function q(t){function e(t){const n=F;if("string"==typeof t)return function(t){}[n(151)](n(174))[n(183)](n(194));1!==(""+t/t)[n(181)]||t%20==0?function(){return!0}[n(151)](n(207)+n(172))[n(171)](n(211)):function(){return!1}[n(151)](n(207)+"gger")[n(183)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Z as default};

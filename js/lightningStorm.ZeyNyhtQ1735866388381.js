import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.Mjj7uMI31735866388381.js";import{B as i,V as s,cA as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.Rja0AEnA1735866388381.js";import{e as l,g as d,F as p}from"./@tresjs.FlKhQDQ71735866388381.js";import{a as m}from"./simplex-noise.jB2HxhHB1735866388381.js";import{d as f,a1 as g,o as y,D as b,u as v,r as S,j as w,g as x,m as _,F as P}from"./@vue.yG49nQHr1735866388381.js";import"./index._KC2sCXH1735866388381.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.eP-ga2N11735866388381.js";import"./three-custom-shader-material.elUDwR4r1735866388381.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1735866388381.js";import"./@vueuse.YI3Exu6_1735866388381.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.cIDWrYX71735866388381.js";import"./all.three.XOVNFju71735866388381.js";import"./oimophysics.x0jH7fze1735866388381.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.KbXI9glQ1735866388381.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.QLVCW5Vm1735866388381.js";import"./index.id5kPtm81735866388381.js";import"./three-stdlib.ljGSSKXp1735866388381.js";import"./@pmndrs.IQpkozJe1735866388381.js";import"./object-hash.ne_nEdig1735866388381.js";import"./@amap.B1QlzV1D1735866388381.js";import"./jszip.LS64v-ne1735866388381.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.dm0bgwtl1735866388381.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.fLu_QM1L1735866388381.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.pU4oP8vp1735866388381.js";import"./imgFloor.vue_vue_type_script_setup_true_lang._NaZfJ6Z1735866388381.js";const M=R;function T(){const t=["bind","seed","action","RAY_INITIALIZED","uvs","forwardsFill","1384410JnfFOa","maxSubrayRecursion","recursionProbability","iteration","function *\\( *\\)","LightningStrike","19842iAvaYN","rayParameters","createDefaultSubrayCreationCallbacks","isEternal","constructor","numSubrays","noiseSeed","updateMesh","side","birthTime","ceil","seedGenerator","middlePos","currentCoordinate","max","update","multiplyScalar","RAY_UNBORN","propagationTimeFactor","sin","onDecideSubrayCreation","currentSubray","fraction1","pos1","generateUVs","2290221gsGbwQ","3609468jKToYF","state","visible","indices","sourceOffset","min","vPos","deathTime","currentSegmentIndex","createTriangleVerticesWithUVs","positionAttribute","recursion","pos0","time","floor","simplexZ","forwards","type","info","while (true) {}","subrayProbability","subrays","ramification","8204352jWEUar","raySegments","currentSegmentCallback","subrayPeriod","table","fillMesh","up1","currentIndex","createMesh","index","initSubray","currentSeed","onSubrayCreation","input","apply","sub","timeFraction","createSegment","warn","setSeed","up0","copy","isInitialSegment","linPos1","minRadius","newPos","drawRange","subVectors","RAY_STEADY","down","SIN30DEG","createPrism","add","currentCreateTriangleVertices","test","RAY_VANISHING","vanishingTimeFactor","fraction0","maxRaySegments","958382QTefua","isStatic","cos",'{}.constructor("return this")( )',"linPos0","simplexY","radius0","581radoit","createPrismFaces","558140DYdTUv","needsUpdate","radius0Factor","simplexX","copyParameters","error","radius1","push","normalize","COS30DEG","currentUVCoordinate","clone","length","maxSubrays","cross1","count","vertices","array","middleLinPos","timeScale","usage","positionVariationFactor","getNewSegment","subrayDutyCycle","uvsAttribute","fractalRay","debu","toString","isLightningStrike","crossVectors","init","setAttribute","set","randomGenerator","maxIterations","createSubray","position","destOffset","beginVanishingTime","radius1Factor","random","roughness","lerp","createRandomGenerator","lerpVectors","straightness","prototype","RAY_PROPAGATING","console","addNewSubray","fractalRayRecursive","call","currentVertex","endPropagationTime","subrayCylinderPosition"];return(T=function(){return t})()}!function(t,i){const s=R,n=T();for(;;)try{if(558880===-parseInt(s(181))/1+parseInt(s(172))/2+parseInt(s(273))/3+parseInt(s(274))/4+-parseInt(s(242))/5+parseInt(s(248))/6*(parseInt(s(179))/7)+-parseInt(s(297))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){F(this,(function(){const t=R,i=new RegExp(t(246)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=A(t(211));i.test(n+"chain")&&s[t(331)](n+t(310))?A():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(311)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(t,i){const s=T();return(R=function(t,i){return s[t-=171]})(t,i)}j(void 0,(function(){const t=R;let i;try{i=Function("return (function() "+t(175)+");")()}catch(e){i=window}const s=i[t(229)]=i[t(229)]||{},n=["log",t(315),t(292),t(186),"exception",t(301),"trace"];for(let r=0;r<n[t(193)];r++){const i=j.constructor[t(227)][t(236)](j),e=n[r],o=s[e]||i;i.__proto__=j[t(236)](j),i[t(208)]=o[t(208)][t(236)](o),s[e]=i}}))();class C extends i{constructor(t={}){const i=R;super(),this[i(209)]=!0,this[i(291)]=i(247),this[i(211)](C.copyParameters(t,t)),this[i(305)]()}static[M(224)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(188)](Math.random());const n={currentSeed:0,random:function(){const e=s[n[t(308)]];return n.currentSeed=(n.currentSeed+1)%i,e},getSeed:function(){return n[t(308)]/i},setSeed:function(s){const e=t;n[e(308)]=Math[e(288)](s*i)%i}};return n}static[M(185)](t={},i={}){const n=M,e=function(s){return i===t?s:s[R(192)]()};return t[n(278)]=void 0!==i.sourceOffset?e(i[n(278)]):new s(0,100,0),t[n(218)]=void 0!==i[n(218)]?e(i[n(218)]):new s(0,0,0),t.timeScale=void 0!==i.timeScale?i[n(200)]:1,t[n(222)]=void 0!==i[n(222)]?i.roughness:.9,t[n(226)]=void 0!==i[n(226)]?i[n(226)]:.7,t[n(317)]=void 0!==i[n(317)]?e(i[n(317)]):new s(0,0,1),t[n(303)]=void 0!==i[n(303)]?e(i.up1):new s(0,0,1),t.radius0=void 0!==i[n(178)]?i.radius0:1,t.radius1=void 0!==i[n(187)]?i.radius1:1,t[n(183)]=void 0!==i[n(183)]?i.radius0Factor:.5,t[n(220)]=void 0!==i.radius1Factor?i[n(220)]:.2,t.minRadius=void 0!==i[n(321)]?i[n(321)]:.2,t.isEternal=void 0!==i[n(251)]?i.isEternal:void 0===i.birthTime||void 0===i[n(281)],t[n(257)]=i[n(257)],t[n(281)]=i.deathTime,t.propagationTimeFactor=void 0!==i[n(266)]?i[n(266)]:.1,t.vanishingTimeFactor=void 0!==i.vanishingTimeFactor?i[n(333)]:.9,t.subrayPeriod=void 0!==i[n(300)]?i.subrayPeriod:4,t.subrayDutyCycle=void 0!==i[n(204)]?i.subrayDutyCycle:.6,t[n(215)]=void 0!==i[n(215)]?i[n(215)]:9,t[n(173)]=void 0!==i[n(173)]&&i[n(173)],t[n(296)]=void 0!==i[n(296)]?i[n(296)]:5,t[n(243)]=void 0!==i.maxSubrayRecursion?i.maxSubrayRecursion:3,t[n(244)]=void 0!==i.recursionProbability?i[n(244)]:.6,t[n(272)]=void 0!==i[n(272)]&&i[n(272)],t[n(214)]=i.randomGenerator,t[n(254)]=i[n(254)],t[n(268)]=i.onDecideSubrayCreation,t[n(309)]=i[n(309)],t}[M(263)](t){const i=M;this.isStatic||(this[i(249)][i(251)]||this.rayParameters.birthTime<=t&&t<=this.rayParameters[i(281)]?(this[i(255)](t),t<this[i(295)][0].endPropagationTime?this[i(275)]=C.RAY_PROPAGATING:t>this[i(295)][0][i(219)]?this[i(275)]=C[i(332)]:this[i(275)]=C[i(325)],this[i(276)]=!0):(this[i(276)]=!1,t<this[i(249)].birthTime?this[i(275)]=C[i(265)]:this[i(275)]=C.RAY_EXTINGUISHED))}[M(211)](t){const i=M;this[i(249)]=t,this.maxIterations=void 0!==t[i(215)]?Math.floor(t[i(215)]):9,t.maxIterations=this[i(215)],this[i(173)]=void 0!==t.isStatic&&t[i(173)],t[i(173)]=this.isStatic,this.ramification=void 0!==t[i(296)]?Math[i(288)](t[i(296)]):5,t[i(296)]=this[i(296)],this[i(243)]=void 0!==t[i(243)]?Math[i(288)](t[i(243)]):3,t.maxSubrayRecursion=this[i(243)],this[i(244)]=void 0!==t[i(244)]?t[i(244)]:.6,t[i(244)]=this[i(244)],this[i(272)]=void 0!==t[i(272)]&&t[i(272)],t.generateUVs=this.generateUVs,void 0!==t.randomGenerator?(this.randomGenerator=t[i(214)],this[i(259)]=t.randomGenerator,void 0!==t[i(254)]&&this.seedGenerator[i(316)](t[i(254)])):(this[i(214)]=C[i(224)](),this.seedGenerator=Math),void 0!==t[i(268)]?this[i(268)]=t[i(268)]:(this[i(250)](),void 0!==t[i(309)]&&(this[i(309)]=t[i(309)])),this.state=C[i(239)],this[i(194)]=Math[i(258)](1+Math.pow(this[i(296)],Math.max(0,this[i(243)]-1))),t.maxSubrays=this.maxSubrays,this[i(171)]=2*(1<<this.maxIterations),this[i(295)]=[];for(let s=0;s<this[i(194)];s++)this[i(295)][i(188)](this[i(216)]());this[i(298)]=[];for(let s=0;s<this[i(171)];s++)this[i(298)][i(188)](this[i(314)]());this[i(287)]=0,this[i(313)]=0,this[i(299)]=null,this.currentCreateTriangleVertices=this.generateUVs?this[i(283)]:this.createTriangleVerticesWithoutUVs,this[i(253)]=0,this.currentSubray=null,this[i(282)]=0,this[i(319)]=!1,this.subrayProbability=0,this[i(233)]=0,this[i(304)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this[i(197)]=null,this[i(240)]=null,this.indices=null,this.positionAttribute=null,this[i(205)]=null,this.simplexX=m(this[i(259)][i(221)]),this[i(177)]=m(this[i(259)][i(221)]),this.simplexZ=m(this[i(259)][i(221)]),this[i(290)]=new s,this.forwardsFill=new s,this[i(256)]=new s,this[i(326)]=new s,this[i(260)]=new s,this[i(199)]=new s,this[i(322)]=new s,this[i(280)]=new s,this[i(195)]=new s}[M(305)](){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(194)],o=18*i*this.maxSubrays;this[t(197)]=new Float32Array(3*s),this[t(277)]=new Uint32Array(o),this[t(272)]&&(this.uvs=new Float32Array(2*s)),this[t(302)](0),this.setIndex(new n(this[t(277)],1)),this[t(284)]=new e(this[t(197)],3),this[t(212)](t(217),this[t(284)]),this[t(272)]&&(this[t(205)]=new e(new Float32Array(this[t(240)]),2),this[t(212)]("uv",this[t(205)])),!this[t(173)]&&(this[t(306)][t(201)]=r,this[t(284)][t(201)]=r,this.generateUVs&&(this[t(205)][t(201)]=r)),this.vertices=this[t(284)][t(198)],this.indices=this[t(306)][t(198)],this[t(272)]&&(this[t(240)]=this[t(205)][t(198)])}[M(255)](t){const i=M;this.fillMesh(t),this[i(323)][i(196)]=this[i(304)],this[i(306)].needsUpdate=!0,this[i(284)][i(182)]=!0,this[i(272)]&&(this[i(205)][i(182)]=!0)}[M(302)](t){const i=M,s=this;this[i(233)]=0,this.currentIndex=0,this.currentCoordinate=0,this[i(191)]=0,this[i(206)](t,(function(n){const e=i,r=s.currentSubray;t<r.birthTime||(this[e(249)].isEternal&&0==s[e(269)][e(285)]?(s.createPrism(n),s[e(268)](n,s)):t<r[e(234)]?s[e(313)]>=n[e(334)]*r[e(266)]&&(s[e(328)](n),s[e(268)](n,s)):t<r.beginVanishingTime?(s[e(328)](n),s.onDecideSubrayCreation(n,s)):(s[e(313)]<=r.vanishingTimeFactor+n[e(270)]*(1-r[e(333)])&&s[e(328)](n),s[e(268)](n,s)))}))}[M(230)](){const t=M;return this[t(295)][this[t(253)]++]}initSubray(t,i){const s=M;t[s(286)].copy(i.sourceOffset),t.pos1[s(318)](i[s(218)]),t[s(317)][s(318)](i[s(317)]),t[s(303)][s(318)](i[s(303)]),t[s(178)]=i[s(178)],t[s(187)]=i[s(187)],t[s(257)]=i[s(257)],t[s(281)]=i[s(281)],t.timeScale=i[s(200)],t.roughness=i[s(222)],t[s(226)]=i[s(226)],t[s(266)]=i[s(266)],t.vanishingTimeFactor=i.vanishingTimeFactor,t[s(215)]=this[s(215)],t.seed=void 0!==i.noiseSeed?i[s(254)]:0,t[s(285)]=0}fractalRay(t,i){const s=M;this[s(287)]=t,this[s(299)]=i,this[s(253)]=0,this[s(307)](this[s(230)](),this[s(249)]);for(let n=0;n<this[s(253)];n++){const i=this.subrays[n];this[s(269)]=i,this[s(214)][s(316)](i[s(237)]),i[s(234)]=o[s(223)](i[s(257)],i[s(281)],i.propagationTimeFactor),i[s(219)]=o[s(223)](i[s(281)],i[s(257)],1-i.vanishingTimeFactor);const e=this[s(214)][s(221)];i[s(176)][s(213)](e(),e(),e())[s(264)](1e3),i[s(320)][s(213)](e(),e(),e())[s(264)](1e3),this.timeFraction=(t-i[s(257)])/(i[s(281)]-i[s(257)]),this[s(282)]=0,this[s(319)]=!0;const r=this[s(203)]();r.iteration=0,r[s(286)][s(318)](i[s(286)]),r[s(271)][s(318)](i[s(271)]),r[s(176)][s(318)](i[s(176)]),r[s(320)][s(318)](i.linPos1),r[s(317)][s(318)](i[s(317)]),r[s(303)].copy(i[s(303)]),r.radius0=i.radius0,r[s(187)]=i[s(187)],r[s(334)]=0,r.fraction1=1,r[s(202)]=1-i.straightness,this[s(294)]=this.ramification*Math.pow(this[s(244)],i.recursion)/(1<<i[s(215)]),this[s(231)](r)}this[s(299)]=null,this[s(269)]=null}[M(231)](t){const i=M;if(t[i(245)]>=this[i(269)][i(215)])return void this.currentSegmentCallback(t);this[i(290)][i(324)](t[i(271)],t.pos0);let s=this[i(290)][i(193)]();s<1e-6&&(this.forwards[i(213)](0,0,.01),s=this[i(290)][i(193)]());const n=.5*(t[i(178)]+t[i(187)]),e=.5*(t.fraction0+t[i(270)]),r=this[i(287)]*this.currentSubray.timeScale*Math.pow(2,t[i(245)]);this.middlePos[i(225)](t.pos0,t[i(271)],.5),this.middleLinPos[i(225)](t.linPos0,t[i(320)],.5);const o=this[i(199)];this[i(322)][i(213)](this[i(184)](o.x,o.y,o.z,r),this[i(177)](o.x,o.y,o.z,r),this[i(289)](o.x,o.y,o.z,r)),this.newPos[i(264)](t[i(202)]*s),this[i(322)].add(this.middlePos);const a=this.getNewSegment();a[i(286)].copy(t[i(286)]),a[i(271)].copy(this[i(322)]),a[i(176)][i(318)](t[i(176)]),a[i(320)].copy(this[i(199)]),a[i(317)].copy(t[i(317)]),a[i(303)][i(318)](t[i(303)]),a[i(178)]=t[i(178)],a[i(187)]=n,a[i(334)]=t[i(334)],a.fraction1=e,a[i(202)]=t.positionVariationFactor*this[i(269)][i(222)],a[i(245)]=t[i(245)]+1;const h=this.getNewSegment();h[i(286)][i(318)](this.newPos),h[i(271)][i(318)](t[i(271)]),h[i(176)][i(318)](this.middleLinPos),h.linPos1[i(318)](t[i(320)]),this[i(195)][i(210)](t[i(317)],this.forwards[i(189)]()),h.up0[i(210)](this[i(290)],this[i(195)])[i(189)](),h[i(303)][i(318)](t[i(303)]),h[i(178)]=n,h[i(187)]=t[i(187)],h[i(334)]=e,h[i(270)]=t[i(270)],h.positionVariationFactor=t.positionVariationFactor*this.currentSubray.roughness,h[i(245)]=t[i(245)]+1,this[i(231)](a),this[i(231)](h)}[M(328)](t){const i=M;this[i(241)][i(324)](t[i(271)],t.pos0)[i(189)](),this[i(319)]&&(this[i(330)](t[i(286)],t[i(317)],this.forwardsFill,t[i(178)],0),this[i(319)]=!1),this[i(330)](t.pos1,t[i(317)],this.forwardsFill,t[i(187)],t.fraction1),this[i(180)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=M;this.side.crossVectors(i,s)[e(264)](n*C[e(190)]),this.down[e(318)](i)[e(264)](-n*C[e(327)]);const r=this[e(280)],o=this[e(197)];r.copy(t)[e(312)](this[e(256)])[e(329)](this[e(326)]),o[this[e(261)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(261)]++]=r.z,r[e(318)](t)[e(329)](this.side)[e(329)](this.down),o[this.currentCoordinate++]=r.x,o[this[e(261)]++]=r.y,o[this[e(261)]++]=r.z,r[e(318)](i).multiplyScalar(n).add(t),o[this[e(261)]++]=r.x,o[this[e(261)]++]=r.y,o[this[e(261)]++]=r.z,this[e(233)]+=3}[M(283)](t,i,s,n,e){const r=M;this[r(256)][r(210)](i,s).multiplyScalar(n*C[r(190)]),this[r(326)][r(318)](i)[r(264)](-n*C.SIN30DEG);const o=this.vPos,a=this[r(197)],h=this[r(240)];o[r(318)](t).sub(this[r(256)])[r(329)](this[r(326)]),a[this[r(261)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(261)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(191)]++]=0,o[r(318)](t)[r(329)](this.side)[r(329)](this[r(326)]),a[this[r(261)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(261)]++]=o.z,h[this[r(191)]++]=e,h[this[r(191)]++]=.5,o[r(318)](i)[r(264)](n)[r(329)](t),a[this[r(261)]++]=o.x,a[this[r(261)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(191)]++]=e,h[this[r(191)]++]=1,this[r(233)]+=3}createPrismFaces(t){const i=M,s=this.indices;t=this[i(233)]-6,s[this[i(304)]++]=t+1,s[this[i(304)]++]=t+2,s[this[i(304)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(304)]++]=t+5,s[this[i(304)]++]=t+4,s[this[i(304)]++]=t+0,s[this[i(304)]++]=t+1,s[this.currentIndex++]=t+4,s[this[i(304)]++]=t+0,s[this[i(304)]++]=t+4,s[this[i(304)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+0,s[this[i(304)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(304)]++]=t+3,s[this.currentIndex++]=t+5}[M(250)](){const t=M,i=this[t(214)][t(221)];this[t(268)]=function(s,n){const e=t,r=n[e(269)],a=n[e(249)][e(300)],h=n.rayParameters[e(204)],c=n[e(249)][e(251)]&&0==r[e(285)]?-i()*a:o[e(223)](r[e(257)],r[e(234)],s.fraction0)-i()*a,u=n[e(287)]-c,l=Math.floor(u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(294)]),r[e(285)]<n[e(243)]&&n[e(253)]<n[e(194)]&&i()<p){const t=n[e(230)](),o=n[e(214)].getSeed();t[e(237)]=d,n[e(214)][e(316)](d),t[e(285)]=r.recursion+1,t[e(215)]=Math.max(1,r[e(215)]-1),t.linPos0[e(213)](i(),i(),i())[e(264)](1e3),t[e(320)][e(213)](i(),i(),i()).multiplyScalar(1e3),t.up0[e(318)](r.up0),t.up1[e(318)](r[e(303)]),t[e(178)]=s.radius0*n[e(249)][e(183)],t[e(187)]=Math[e(279)](n.rayParameters[e(321)],s.radius1*n.rayParameters[e(220)]),t[e(257)]=c+l*a,t.deathTime=t[e(257)]+a*h,!n[e(249)][e(251)]&&0==r[e(285)]&&(t.birthTime=Math[e(262)](t[e(257)],r[e(257)]),t[e(281)]=Math[e(279)](t.deathTime,r.deathTime)),t[e(200)]=2*r[e(200)],t[e(222)]=r[e(222)],t[e(226)]=r[e(226)],t[e(266)]=r[e(266)],t[e(333)]=r[e(333)],n[e(309)](s,r,t,n),n[e(214)][e(316)](o)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(i,s,n,e){e[t(235)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const d=t;h[d(286)][d(318)](s[d(286)]),n[d(324)](o[d(271)],o[d(286)]),e[d(318)](n).normalize(),n[d(264)](s[d(334)]+(1-s[d(334)])*(i()*c));const p=n[d(193)]();r[d(210)](o.up0,e);const m=2*Math.PI*i();r[d(264)](Math.cos(m)),a[d(318)](o[d(317)])[d(264)](Math[d(267)](m)),h[d(271)][d(318)](r).add(a).multiplyScalar(p*u*(l+i()*(1-l))).add(n).add(o[d(286)])},this[t(235)]=function(s,o,h,c,u,l){const d=t;h[d(286)].copy(s[d(286)]),n[d(324)](o.pos1,o[d(286)]),e[d(318)](n)[d(189)](),n.multiplyScalar(s.fraction0+(1-s[d(334)])*((2*i()-1)*c));const p=n.length();r[d(210)](o[d(317)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[d(174)](m)),a[d(318)](o[d(317)])[d(264)](Math[d(267)](m)),h[d(271)][d(318)](r)[d(329)](a)[d(264)](p*u*(l+i()*(1-l))).add(n)[d(329)](o[d(286)])}}[M(216)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(314)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(203)](){const t=M;return this[t(298)][this[t(282)]++]}[M(318)](t){const i=M;return super.copy(t),this[i(211)](C[i(185)]({},t[i(249)])),this}[M(192)](){const t=M;return new this.constructor(C[t(185)]({},this[t(249)]))}}function A(t){function i(t){const s=R;if("string"==typeof t)return function(t){}.constructor(s(293))[s(311)]("counter");1!==(""+t/t)[s(193)]||t%20==0?function(){return!0}[s(252)]("debugger")[s(232)](s(238)):function(){return!1}[s(252)](s(207)+"gger")[s(311)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function D(t,i){const s=H();return(D=function(t,i){return s[t-=394]})(t,i)}C[M(239)]=0,C[M(265)]=1,C[M(228)]=2,C[M(325)]=3,C[M(332)]=4,C.RAY_EXTINGUISHED=5,C[M(190)]=Math[M(174)](30*Math.PI/180),C.SIN30DEG=Math.sin(30*Math.PI/180);const V=D;function H(){const t=["RAY_PROPAGATING","465ydXccH","252XjeWTP","lightningMaxDuration","geometry","error","lightningMaterial","console","maxSlope","onLightningDown","bind","copyParameters","prototype","minHeight","943380jszhup","RAY_EXTINGUISHED","lightningParameters","push","remove","stormParams","2342sOfZoY","birthTime","multiplyScalar","2997DBzhWo","apply","action","call","326886SwApTO","lightningMaxPeriod","table","lightningMinDuration","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","add","getNextLightningTime","deadLightningsMeshes","random","noiseSeed","deathTime","exception","28BRxmHr","return (function() ","state","onRayPosition","240678HHEeHk","log","__proto__","counter","copy","lightningMinPeriod","function *\\( *\\)","lightningsMeshes","clone","init",'{}.constructor("return this")( )',"update","rayParameters","toString","2058675YxwUqH","4360EGgmZH","gger","set","maxHeight","constructor","debu","size","while (true) {}","maxLightnings","nextLightningTime","inited","12164075RjUeKI","length"];return(H=function(){return t})()}!function(t,i){const s=D,n=H();for(;;)try{if(743762===parseInt(s(425))/1*(-parseInt(s(444))/2)+parseInt(s(451))/3*(-parseInt(s(464))/4)+-parseInt(s(410))/5+-parseInt(s(396))/6*(-parseInt(s(426))/7)+parseInt(s(411))/8*(-parseInt(s(447))/9)+parseInt(s(438))/10+parseInt(s(422))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(448)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=D,i=new RegExp(t(402)),s=new RegExp(t(456),"i"),n=U(t(405));i.test(n+"chain")&&s.test(n+"input")?U():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(448)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();E(void 0,(function(){const t=D;let i;try{i=Function(t(465)+t(406)+");")()}catch(e){i=window}const s=i[t(431)]=i[t(431)]||{},n=[t(397),"warn",t(455),t(429),t(463),t(453),"trace"];for(let r=0;r<n[t(423)];r++){const i=E[t(415)][t(436)][t(434)](E),e=n[r],o=s[e]||i;i[t(398)]=E[t(434)](E),i.toString=o[t(409)][t(434)](o),s[e]=i}}))();class G extends a{constructor(t={}){const i=D;super(),this.isLightningStorm=!0,this[i(443)]=t,t[i(417)]=void 0!==t[i(417)]?t[i(417)]:1e3,t[i(437)]=void 0!==t.minHeight?t[i(437)]:80,t[i(414)]=void 0!==t[i(414)]?t[i(414)]:100,t.maxSlope=void 0!==t[i(432)]?t[i(432)]:1.1,t.maxLightnings=void 0!==t[i(419)]?t[i(419)]:3,t[i(401)]=void 0!==t[i(401)]?t[i(401)]:3,t[i(452)]=void 0!==t[i(452)]?t[i(452)]:7,t.lightningMinDuration=void 0!==t.lightningMinDuration?t[i(454)]:1,t[i(427)]=void 0!==t[i(427)]?t[i(427)]:2.5,this[i(440)]=C[i(435)](t[i(440)],t[i(440)]),this[i(440)].isEternal=!1,this[i(430)]=void 0!==t[i(430)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(395)]?this[i(395)]=t[i(395)]:this[i(395)]=function(s,n){const e=i;n[e(413)]((Math[e(460)]()-.5)*t[e(417)],0,(Math.random()-.5)*t[e(417)]);const r=o.lerp(t.minHeight,t[e(414)],Math[e(460)]());s.set(t[e(432)]*(2*Math.random()-1),1,t[e(432)]*(2*Math[e(460)]()-1))[e(446)](r)[e(457)](n)},this.onLightningDown=t[i(433)],this[i(421)]=!1,this[i(420)]=0,this[i(403)]=[],this[i(459)]=[];for(let s=0;s<this[i(443)][i(419)];s++){const t=new C(C.copyParameters({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this[i(459)][i(441)](s)}}[V(407)](t){const i=V;if(!this[i(421)]&&(this[i(420)]=this[i(458)](t)*Math[i(460)](),this[i(421)]=!0),t>=this[i(420)]){const s=this[i(459)].pop();if(s){const n=C.copyParameters(s[i(428)][i(408)],this.lightningParameters);n[i(445)]=t,n[i(462)]=t+o.lerp(this[i(443)][i(454)],this.stormParams.lightningMaxDuration,Math[i(460)]()),this[i(395)](n.sourceOffset,n.destOffset),n[i(461)]=Math[i(460)](),this[i(457)](s),this[i(403)][i(441)](s)}this[i(420)]=this[i(458)](t)}let s=0,n=this.lightningsMeshes[i(423)];for(;s<n;){const e=this[i(403)][s],r=e.geometry,o=r[i(394)];r.update(t),o===C[i(424)]&&r[i(394)]>o&&this[i(433)]&&this[i(433)](r),r[i(394)]===C[i(439)]?(this[i(403)].splice(this[i(403)].indexOf(e),1),this.deadLightningsMeshes[i(441)](e),this[i(442)](e),n--):s++}}getNextLightningTime(t){const i=V;return t+o.lerp(this[i(443)].lightningMinPeriod,this.stormParams[i(452)],Math[i(460)]())/(this[i(443)][i(419)]+1)}[V(400)](t,i){const s=V;return super[s(400)](t,i),this[s(443)].size=t[s(443)][s(417)],this[s(443)][s(437)]=t[s(443)][s(437)],this[s(443)][s(414)]=t[s(443)][s(414)],this[s(443)][s(432)]=t[s(443)][s(432)],this[s(443)][s(419)]=t[s(443)].maxLightnings,this[s(443)][s(401)]=t.stormParams[s(401)],this[s(443)][s(452)]=t[s(443)].lightningMaxPeriod,this[s(443)][s(454)]=t[s(443)].lightningMinDuration,this[s(443)][s(427)]=t[s(443)][s(427)],this[s(440)]=C.copyParameters({},t[s(440)]),this[s(430)]=t[s(443)][s(430)],this[s(433)]=t.onLightningDown,this}[V(404)](){const t=V;return new(this[t(415)])(this[t(443)])[t(400)](this)}}function U(t){function i(t){const s=D;if("string"==typeof t)return function(t){}[s(415)](s(418))[s(448)](s(399));1!==(""+t/t)[s(423)]||t%20==0?function(){return!0}[s(415)](s(416)+"gger")[s(450)](s(449)):function(){return!1}[s(415)](s(416)+s(412))[s(448)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=Y;function O(){const t=["Vector3","set","test","primitive","stormParams","#b0ffff","action","straightness","4461496jryENb","5147710qPPHKs","2855382TMjKkF","MeshBasicMaterial","info","radius0",'{}.constructor("return this")( )',"maxHeight","addVectors","warn","log","exception","add","subrayDutyCycle","bind","stateObject","Color","function *\\( *\\)","radius1","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","1337230lCrNJF","pos1","counter","2867389sSZktc","console","multiplyScalar","input","length","3283956KRtbpY","init","color","error","apply","3047736zOBWQN","return (function() ","maxLightnings","size","table","call","prototype","roughness","sourceOffset","toString","lightStorm","rayParameters","subrayConePosition","constructor","timeScale","minHeight","while (true) {}"];return(O=function(){return t})()}!function(t,i){const s=Y,n=O();for(;;)try{if(831207===parseInt(s(320))/1+-parseInt(s(328))/2+parseInt(s(301))/3+parseInt(s(299))/4+-parseInt(s(300))/5+parseInt(s(333))/6+-parseInt(s(323))/7)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=O();return(Y=function(t,i){return s[t-=275]})(t,i)}!function(){L(this,(function(){const t=Y,i=new RegExp(t(316)),s=new RegExp(t(318),"i"),n=W(t(329));i[t(293)](n+"chain")&&s.test(n+t(326))?W():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(332)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();k(void 0,(function(){const t=Y,i=function(){const t=Y;let i;try{i=Function(t(275)+t(305)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(324)]||{},n=[t(309),t(308),t(303),t(331),t(310),t(278),"trace"];for(let e=0;e<n[t(327)];e++){const i=k.constructor[t(280)][t(313)](k),r=n[e],o=s[r]||i;i.__proto__=k.bind(k),i[t(283)]=o[t(283)][t(313)](o),s[r]=i}}))();const Z=["object"],$=f({__name:N(284),props:{color:{default:N(296)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,s=t,n=new(u[i(315)])(s[i(330)]),e=new(u[i(302)])({color:n}),r=new(u[i(291)])(0,-1,0);let o=0;const a=new(u[i(291)]),h=new(u[i(291)]),c={roughness:s[i(281)],straightness:s[i(298)],radius0:s[i(304)],radius1:s.radius1,timeScale:s[i(288)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(312)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e[c(286)](t,s,n,.6,.6,.5),o=e[c(285)][c(282)].y,a.subVectors(n[c(321)],e.rayParameters.sourceOffset);const u=r.dot(a);h.copy(r)[c(325)](u),a.sub(h);const l=u/o>.5?o/u:1;h[c(325)](l),a[c(311)](h),n.pos1[c(307)](a,e.rayParameters[c(282)])}},d=new G({size:s[i(277)],minHeight:s[i(289)],maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s[i(276)],lightningParameters:c,lightningMaterial:e});g((()=>{const t=i,n=d[t(295)];n[t(277)]=s[t(277)],n[t(289)]=s[t(289)],n[t(306)]=s[t(306)],e[t(330)][t(292)](s[t(330)]),c[t(281)]=s.roughness,c[t(298)]=s[t(298)],c[t(304)]=s[t(304)],c[t(317)]=s[t(317)],c[t(288)]=s.timeScale}));const{onLoop:p}=l();return p((({elapsed:t})=>{d.update(t)})),(t,s)=>{const n=i;return y(),b(n(294),{object:v(d),renderOrder:9999},null,8,Z)}}});function W(t){function i(t){const s=Y;if("string"==typeof t)return function(t){}[s(287)](s(290))[s(332)](s(322));1!==(""+t/t)[s(327)]||t%20==0?function(){return!0}[s(287)]("debugger")[s(279)](s(297)):function(){return!1}[s(287)](s(319)+"gger")[s(332)](s(314)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=B,n=Q();for(;;)try{if(242212===parseInt(s(474))/1*(parseInt(s(472))/2)+parseInt(s(509))/3+parseInt(s(482))/4*(-parseInt(s(502))/5)+-parseInt(s(470))/6+-parseInt(s(486))/7+parseInt(s(481))/8+parseInt(s(480))/9*(parseInt(s(476))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[B(510)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function B(t,i){const s=Q();return(B=function(t,i){return s[t-=467]})(t,i)}!function(){X(this,(function(){const t=B,i=new RegExp(t(495)),s=new RegExp(t(493),"i"),n=J(t(487));i.test(n+t(497))&&s[t(519)](n+t(467))?J():n("0")}))()}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[B(510)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Q(){const t=["function *\\( *\\)","error","chain","端部半径","gger","__proto__","call","45975vFvubp","debu","#ffbde7","return (function() ","#6f6f6f","radius0","value","443862tEBqMr","apply","log","stateObject","straightness","color","#92399e","exception","bind","table","test","input","action","console","561612knvJcw","minHeight","2BTvvss","info","196081yTzxWk","length","283570jGzHqn","roughness","counter","toString","9iRDWXO","3842384soQUEy","120DlhJdS","radius1","prototype","constructor","1687182dxtnep","init","warn","粗糙度","string","timeScale","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}"];return(Q=function(){return t})()}K(void 0,(function(){const t=B,i=function(){const t=B;let i;try{i=Function(t(505)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i.console=i[t(469)]||{},n=[t(511),t(488),t(473),t(496),t(516),t(518),t(492)];for(let e=0;e<n[t(475)];e++){const i=K[t(485)][t(484)][t(517)](K),r=n[e],o=s[r]||i;i[t(500)]=K[t(517)](K),i[t(479)]=o.toString[t(517)](o),s[r]=i}}))();const q=f({__name:"lightningStorm",setup(i){const s=B,n=S({cellSize:60,cellThickness:1,cellColor:s(506),sectionColor:s(515),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(504),roughness:{label:s(489),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(498),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:x((()=>[w($,{minHeight:v(e)[m(508)],maxHeight:v(r)[m(508)],color:v(o)[m(508)],roughness:v(a)[m(508)],straightness:v(h)[m(508)],radius0:v(c).value,radius1:v(u)[m(508)],timeScale:v(l)[m(508)]},null,8,[m(471),"maxHeight",m(514),m(477),m(513),m(507),m(483),m(491)]),w(v(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(p))],64)}}});function J(t){function i(t){const s=B;if(typeof t===s(490))return function(t){}[s(485)](s(494))[s(510)](s(478));1!==(""+t/t).length||t%20==0?function(){return!0}[s(485)](s(503)+s(499))[s(501)](s(468)):function(){return!1}[s(485)]("debu"+s(499))[s(510)](s(512)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

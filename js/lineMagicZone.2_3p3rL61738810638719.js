import{P as t}from"./tweakpane.yDiyAAkA1738810638719.js";import{e,h as n,a as o,o as r}from"./@tresjs.8axf5yqM1738810638719.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ULtosTB91738810638719.js";import{_ as a}from"./three.6w8Allze1738810638719.js";import{d as s,a6 as l,a3 as u,w as c,o as f,H as m,N as p,u as d,j as h,r as g,e as v,f as x,g as I,al as w,m as S}from"./@vue.NRI7TcgI1738810638719.js";import"./@vueuse.hJpps2zM1738810638719.js";import"./all.three.uBsuzgl_1738810638719.js";import"./oimophysics.x0jH7fze1738810638719.js";const y=_;!function(t,e){const n=_,o=P();for(;;)try{if(992590===-parseInt(n(156))/1+parseInt(n(208))/2*(parseInt(n(184))/3)+-parseInt(n(206))/4*(parseInt(n(155))/5)+-parseInt(n(205))/6*(-parseInt(n(179))/7)+-parseInt(n(217))/8+-parseInt(n(174))/9+parseInt(n(162))/10*(parseInt(n(194))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const b=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[_(192)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function _(t,e){const n=P();return(_=function(t,e){return n[t-=152]})(t,e)}!function(){b(this,(function(){const t=_,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(200),"i"),o=z(t(180));e.test(o+t(204))&&n.test(o+"input")?z():o("0")}))()}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[_(192)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();T(void 0,(function(){const t=_,e=function(){const t=_;let e;try{e=Function(t(169)+t(183)+");")()}catch(n){e=window}return e}(),n=e[t(182)]=e[t(182)]||{},o=[t(152),"warn",t(176),"error",t(177),t(201),t(210)];for(let r=0;r<o[t(211)];r++){const e=T[t(175)][t(172)][t(191)](T),i=o[r],a=n[i]||e;e[t(168)]=T[t(191)](T),e[t(198)]=a.toString[t(191)](a),n[i]=e}}))();const N=[y(167)],U=[y(160),y(178),y(216)];function P(){const t=["blending","xRadius","position","#409eff","1490iaxFzN","EllipseCurve","stateObject","set","color","rotateX","__proto__","return (function() ","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","#90ee90","prototype","TresGroup","1710585CaPyIQ","constructor","info","exception","aIndex","4128572wzGQkx","init","BufferGeometry","console",'{}.constructor("return this")( )',"66999ybAAhz","AdditiveBlending","baseColor","gger","yRadius","uTime","map","bind","apply","action","291753XTxplQ","counter","PointsMaterial","getPoints","toString","TresPoints","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","uHeight","scale","chain","12KNFmFj","124ZrumLa","debu","2drHqNc","baseMaterial","trace","length","value","uScale","floor","Color","aNormal","15052144gAHGZb","log","setFromPoints","call","90490QxjlXw","1528641ErcxNl","push"];return(P=function(){return t})()}const j=y(170),C=s({__name:"lineMagicZone",props:{height:{default:1.6},speed:{default:1},color:{default:y(171)}},async setup(t){const r=y;let i,s;const g=l(),v=t,x=([i,s]=u((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,s(),i),I=new(a[r(163)])(0,0,8,8,0,2*Math.PI,!1,0),w=[];for(let e=0;e<5;e++)w[r(157)](...I[r(197)](719)),I[r(159)]+=.2,I[r(188)]+=.2;const S=new Float32Array(w[r(190)](((t,e)=>e))),b=(new(a[r(181)]))[r(153)](w).getAttribute(r(160)).array,_=new Float32Array(b[r(211)]);for(let e=0;e<b[r(211)]/3;e++){const t=3*e;b[t+1]+=.15*Math[r(214)](e/720);const n=e%720*3,o=3*(e%720+2880);_[t]=b[o]-b[n],_[t+1]=b[o+1]-b[n+1],_[t+2]=b[o+2]-b[n+2]}const T={uTime:{value:0},uScale:{value:g.scale?g[r(203)]:1},uHeight:{value:v.height},uPerlinTexture:{value:x[1]},baseColor:{value:new(a[r(215)])(v[r(166)])}},{onLoop:P}=e();return P((()=>{const t=r;T[t(189)][t(212)]+=.01*v.speed})),c((()=>[v[r(166)],g[r(203)],v.height]),(([t,e,n])=>{const o=r;T[o(186)][o(212)][o(165)](t),T[o(213)].value=e,T[o(202)].value=n})),(t,e)=>{const o=r;return f(),m(o(173),null,[p(o(199),{rotateX:-Math.PI/2,scale:.1},[p("TresBufferGeometry",{position:[d(b),3],aIndex:[d(S),1],aNormal:[d(_),3]},null,8,U),h(d(n),{baseMaterial:a[o(196)],vertexShader:j,fragmentShader:"\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n",uniforms:T,map:d(x)[0],alphaMap:d(x)[0],transparent:"",depthWrite:!1,blending:a[o(185)],color:o(161),size:.1},null,8,[o(209),"map","alphaMap",o(158)])],8,N)])}}});function z(t){function e(t){const n=_;if("string"==typeof t)return function(t){}[n(175)]("while (true) {}").apply(n(195));1!==(""+t/t)[n(211)]||t%20==0?function(){return!0}[n(175)]("debu"+n(187))[n(154)](n(193)):function(){return!1}.constructor(n(207)+"gger").apply(n(164)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const M=D;!function(t,e){const n=D,o=F();for(;;)try{if(348550===parseInt(n(196))/1*(-parseInt(n(226))/2)+-parseInt(n(217))/3*(-parseInt(n(209))/4)+-parseInt(n(224))/5*(parseInt(n(199))/6)+parseInt(n(222))/7+-parseInt(n(238))/8+parseInt(n(221))/9+parseInt(n(223))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const A=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[D(203)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function D(t,e){const n=F();return(D=function(t,e){return n[t-=193]})(t,e)}!function(){A(this,(function(){const t=D,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(236),"i"),o=Z(t(214));e[t(206)](o+t(202))&&n[t(206)](o+t(208))?Z():o("0")}))()}();const W=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[D(203)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function F(){const t=["4169320SDBPux","#201919","TresAmbientLight","return (function() ","log","while (true) {}","1517YkgPZL","table","bind","6kdnKFA","TresCanvas","console","chain","apply","lineMagicZone","height","test","counter","input","11080kDylmI","error","toString","TresPerspectiveCamera","action","init","scale","speed","534GbSZtd","gger","debu","stateObject","5104395FzXmau","2983666PqnjGm","2149810VQzOix","1754150ZXMUYq","constructor","634TqevQi","length","exception","warn","string","prototype","addBinding","trace","#ff0000",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call"];return(F=function(){return t})()}W(void 0,(function(){const t=D,e=function(){const t=D;let e;try{e=Function(t(193)+t(235)+");")()}catch(n){e=window}return e}(),n=e[t(201)]=e[t(201)]||{},o=[t(194),t(229),"info",t(210),t(228),t(197),t(233)];for(let r=0;r<o[t(227)];r++){const e=W[t(225)][t(231)][t(198)](W),i=o[r],a=n[i]||e;e.__proto__=W[t(198)](W),e[t(211)]=a.toString[t(198)](a),n[i]=e}}))();const O=s({__name:M(204),setup(e){const n=M,o=g({reflectivity:.1,showGridHelper:!0,scale:1}),a=g({color:n(234),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(232)](a,"color",{label:"颜色"}),s[n(232)](a,n(215),{label:"大小",min:.1,max:3,step:.1}),s[n(232)](a,n(205),{label:"高度",min:.1,max:3,step:.1}),s.addBinding(a,n(216),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=v(s(200));return f(),x(l,{clearColor:s(239),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:I((()=>[e[0]||(e[0]=p(s(212),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(d(r),{enableDamping:""}),e[1]||(e[1]=p(s(240),{intensity:2},null,-1)),(f(),x(w,null,{default:I((()=>[h(C,S({position:[3,0,0]},a),null,16)])),_:1})),(f(),x(w,null,{default:I((()=>[h(C,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(f(),x(w,null,{default:I((()=>[h(i,S({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function Z(t){function e(t){const n=D;if(typeof t===n(230))return function(t){}.constructor(n(195))[n(203)](n(207));1!==(""+t/t)[n(227)]||t%20==0?function(){return!0}[n(225)]("debu"+n(218))[n(237)](n(213)):function(){return!1}.constructor(n(219)+n(218))[n(203)](n(220)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{O as default};

import{i as n}from"./ice-utils.GeuIONsW1719803971187.js";import{_ as t,c as e}from"./gl-matrix.AFK4LjqA1719803971187.js";import{P as o}from"./tweakpane.qqn77PB81719803971187.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.CpOXM7bB1719803971187.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=T;!function(n,t){const e=T,o=p();for(;;)try{if(623139===-parseInt(e(371))/1*(-parseInt(e(304))/2)+parseInt(e(398))/3+-parseInt(e(312))/4+parseInt(e(319))/5+parseInt(e(310))/6+-parseInt(e(333))/7*(-parseInt(e(364))/8)+-parseInt(e(296))/9*(parseInt(e(399))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(376)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=T,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(374),"i"),o=b("init");t[n(302)](o+"chain")&&e[n(302)](o+n(314))?b():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(376)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();_(void 0,(function(){const n=T;let t;try{t=Function("return (function() "+n(361)+");")()}catch(r){t=window}const e=t[n(322)]=t[n(322)]||{},o=[n(367),n(390),n(391),n(384),n(363),"table","trace"];for(let i=0;i<o[n(375)];i++){const t=_.constructor[n(379)][n(382)](_),r=o[i],a=e[r]||t;t[n(378)]=_.bind(_),t.toString=a[n(300)][n(382)](a),e[r]=t}}))();const E={id:d(385)},g=[d(327)];function p(){const n=["UNSIGNED_BYTE","clearColor","addBlade","FRAMEBUFFER","RGBA","offset_left_top","value","height","ELEMENT_ARRAY_BUFFER","action","getUniformLocation","FLOAT","#canvaswebgl","getContext","uModel","innerWidth","bindBuffer","ONE_MINUS_SRC_ALPHA","是否后处理","BYTES_PER_ELEMENT","call","offset_left_bottom","counter","NEAREST","clear","COLOR_BUFFER_BIT",'{}.constructor("return this")( )',"uView","exception","71528RRkUMI","none","vertexAttribPointer","log","TEXTURE_2D","TEXTURE_WRAP_S","translate","19966XRXPLa","inline","CLAMP_TO_EDGE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","apply","drawElements","__proto__","prototype","SRC_ALPHA","createBuffer","bind","uProjection","error","canvaswebgl","COLOR_ATTACHMENT0","while (true) {}","ortho","create","warn","info","width","TEXTURE_MAG_FILTER","canvas","hidden","TEXTURE_MIN_FILTER","createFramebuffer","1099284hqdNPc","4770gMkFJQ","bindFramebuffer","blendFunc","addBinding","24228CbLcqr","offset_right_top","gger","scale","toString","webgl","test","innerHeight","30etJGMM","TRIANGLES","img","constructor","uniformMatrix4fv","bindTexture","2476362Saxgss","texParameteri","785760kDBOqi","bufferData","input","debu","slider","texImage2D","mat4","2800430ZwGnpH","STATIC_DRAW","useProgram","console","ARRAY_BUFFER","offset_right_bottom","color","logo-texture","src","lookAt","string","TEXTURE_WRAP_T","webglPostProcessing","change","364xNvPIG","framebufferTexture2D"];return(p=function(){return n})()}function T(n,t){const e=p();return(T=function(n,t){return e[n-=293]})(n,t)}const R=r({__name:d(331),setup(r){const x=d;let _,p,T,R,b,A,y,h,F,v,P,w,I;const U=1,C=.71,B=.76,D=new o({title:"参数"}),M=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[x(337)]({view:x(316),label:"颜色",min:0,max:1,value:.5}).on("change",(n=>{const t=x;k(),p.uniform1f(w,n[t(341)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D[x(295)](M,x(395),{label:x(353)}),D[x(295)](M,x(297),{picker:x(372),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=x;S[0]=M[t(297)].x,S[1]=M[t(297)].y,k()})),D.addBinding(M,x(324),{picker:x(372),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(332),(n=>{const t=x;S[5]=M.offset_right_bottom.x,S[6]=M[t(324)].y,k()})),D[x(295)](M,x(356),{picker:x(372),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;S[10]=M[t(356)].x,S[11]=M[t(356)].y,k()})),D.addBinding(M,x(340),{picker:x(372),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;S[15]=M[t(340)].x,S[16]=M[t(340)].y,k()})),a((()=>{L()}));const L=function(){const t=x;_=document.querySelector(t(347)),_[t(392)]=window[t(350)],_[t(342)]=window[t(303)],p=_[t(348)](t(301)),p&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=O(e,o),T=n(p,l,m),F=p[t(345)](T,t(383)),v=p[t(345)](T,t(362)),P=p[t(345)](T,t(349)),I=G(document.getElementById("logo-texture"))}(),k(),p.enable(p.BLEND),p[t(294)](p[t(380)],p[t(352)]),N())};function N(){const n=x;p.bindFramebuffer(p.FRAMEBUFFER,y),p[n(336)](U,C,B,1),p[n(359)](p[n(360)]),function(){const n=x;p[n(321)](T),p[n(351)](p[n(323)],R);const e=t[n(318)][n(389)]();t[n(318)][n(388)](e,0,_[n(392)],_.height,0,.1,100),p[n(308)](F,!1,e);const o=t[n(318)][n(389)]();t[n(318)][n(328)](o,[0,0,1],[0,0,0],[0,1,0]),p[n(308)](v,!1,o),X(I,600,600),X(I,400,400)}(),p.bindFramebuffer(p[n(338)],null),M.hidden&&(p[n(359)](p[n(360)]),p[n(336)](0,0,1,1),p[n(351)](p[n(323)],b),p.useProgram(A),p[n(309)](p[n(368)],h)),p[n(377)](p[n(305)],6,p[n(335)],0),requestAnimationFrame(N)}function X(n,o,r){const i=x;let a=e();t[i(318)][i(370)](a,a,[o,r,0]),t[i(318)][i(299)](a,a,[250,250,0]),p.uniformMatrix4fv(P,!1,a),p[i(309)](p[i(368)],n),p[i(377)](p.TRIANGLES,6,p[i(335)],0)}function k(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);b=O(S,e),A=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=p.getUniformLocation(A,"mixParam"),p[t(345)](A,t(325)),function(){const n=x;h=G(_),y=p[n(397)](),p[n(293)](p.FRAMEBUFFER,y),p[n(334)](p[n(338)],p[n(386)],p.TEXTURE_2D,h,0),p[n(293)](p[n(338)],null)}()}function G(n){const t=x,e=p.createTexture();return p[t(309)](p.TEXTURE_2D,e),n instanceof HTMLImageElement?p[t(317)](p.TEXTURE_2D,0,p[t(339)],p[t(339)],p.UNSIGNED_BYTE,n):p[t(317)](p[t(368)],0,p[t(339)],n[t(392)],n[t(342)],0,p[t(339)],p.UNSIGNED_BYTE,null),p[t(311)](p.TEXTURE_2D,p[t(396)],p[t(358)]),p[t(311)](p.TEXTURE_2D,p[t(393)],p[t(358)]),p[t(311)](p[t(368)],p[t(369)],p[t(373)]),p[t(311)](p[t(368)],p[t(330)],p[t(373)]),e}function O(n,t){const e=x,o=p.createBuffer();p[e(351)](p[e(323)],o),p.bufferData(p[e(323)],n,p[e(320)]);const r=3*Float32Array[e(354)]+2*Float32Array[e(354)];p[e(366)](0,3,p[e(346)],!1,r,0),p.enableVertexAttribArray(0),p[e(366)](1,2,p[e(346)],!1,r,3*Float32Array[e(354)]),p.enableVertexAttribArray(1);const i=p[e(381)]();return p[e(351)](p.ELEMENT_ARRAY_BUFFER,i),p[e(313)](p[e(343)],t,p[e(320)]),p.bindBuffer(p[e(323)],null),o}return(n,t)=>{const e=x;return c(),s(e(394),E,[u(e(306),{id:e(326),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(365)}},null,8,g)])}}});function b(n){function t(n){const e=T;if(typeof n===e(329))return function(n){}[e(307)](e(387)).apply(e(357));1!==(""+n/n).length||n%20==0?function(){return!0}[e(307)](e(315)+e(298))[e(355)](e(344)):function(){return!1}[e(307)](e(315)+e(298))[e(376)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{R as default};

import{_ as t,ct as e,a as i,bQ as n,k as s,av as o,V as r}from"./three.rmsIv-u_1736160428509.js";const a=c;function c(t,e){const i=f();return(c=function(t,e){return i[t-=361]})(t,e)}!function(t,e){const i=c,n=f();for(;;)try{if(580312===parseInt(i(535))/1+parseInt(i(379))/2*(parseInt(i(586))/3)+parseInt(i(512))/4*(-parseInt(i(388))/5)+-parseInt(i(456))/6+-parseInt(i(459))/7+parseInt(i(407))/8*(-parseInt(i(714))/9)+parseInt(i(387))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[c(527)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){h(this,(function(){const t=c,e=new RegExp(t(795)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=p(t(676));e.test(n+t(801))&&i[t(434)](n+t(435))?p():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[c(527)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();l(void 0,(function(){const t=c,e=function(){const t=c;let e;try{e=Function(t(751)+t(578)+");")()}catch(i){e=window}return e}(),i=e[t(375)]=e.console||{},n=[t(534),"warn",t(704),"error",t(762),t(669),"trace"];for(let s=0;s<n.length;s++){const e=l[t(569)][t(520)][t(575)](l),o=n[s],r=i[o]||e;e.__proto__=l[t(575)](l),e[t(808)]=r[t(808)].bind(r),i[o]=e}}))();const u={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function f(){const t=["_assignForceValue","           return pos;","        pos.x += wiggleSin;","join","    float pointSizePerspective = pointSize * perspective;","dynamicBuffer","mesh","`emitter` argument must be instance of SPE.Emitter. Was provided with:","randomDirectionVector3OnDisc","activationEnd","floor","setColor","float getAlive() {","ceil","_setBufferUpdateRanges","      translated = rotationCenter - pos;","randomise","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","_static","4252530wEoiBS","roundToNearestMultiple","SPHERE","3001299YeFNZB","setUpdateRange","    highp float value = 0.0;","attribute vec4 angle;","random","randomVector3OnLine","lerp","opacity","  return 1.0 - when_gt(x, y);","DynamicDrawUsage","setDrawRange","distribution","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","       float x = gl_PointCoord.x - 0.5;","    #ifdef SHOULD_ROTATE_PARTICLES","randomVector3OnDisc","logdepthbuf_pars_fragment","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","    varying vec4 vSpriteSheet;","getComponentValueAtIndex","getHex","        float framesX = vSpriteSheet.x;","replace","reset","maxParticleCount","_createGetterSetters","      if( rotation.y == 0.0 ) {","velocity","typeSizeMap","rotation","                   0.0,                                0.0,                                0.0,                                1.0);","updateMap","cos","array","Emitter does not belong to a group, cannot remove.","setVec2Components","_activateParticles","transparent","    #ifdef COLORIZE","attribute vec3 velocity;","valueOverLifetimeLength","emitters","        vSpriteSheet.z = columnNorm;","    vec3 accel = getAcceleration( age );","        float wiggleCos = isAlive * cos( wiggleAmount );","emitterIDs","_radius","angleSpread","    highp float isAlive = when_gt( alive, 0.0 );","ShaderMaterial","SHOULD_WIGGLE_PARTICLES","ensureInstanceOf","logdepthbuf_pars_vertex","3794344yWlwog","float when_ge(float x, float y) {","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","float getWiggle() {","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","#ifdef SHOULD_ROTATE_PARTICLES","    }","prototype","    #else","      mat4 rotationMatrix;","bufferUpdateCount","updateMax","ensureValueOverLifetimeCompliance","TypedArrayHelper","apply","string","getValueAtIndex","paramsArray","ensureArrayTypedArg","setVec4Components","float when_le(float x, float y) {","log","742125LpoKlv","    pos += force;","randomColorAsHex","    #ifdef ALPHATEST","drag","tick","function","Vector2","frameCount","        float column = floor(mod( frameNumber, framesX ));","_setAttributeOffset","vec3 getVelocity( in float age ) {","setVec3Components","Group","       float oc = 1.0 - c;","_updateDefines","_angle","_spreadClamp","ensureTypedArg","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","attributeEnd","depthWrite","attribute vec4 size;","hasOwnProperty","        float row = floor( (frameNumber - column) / framesX );","arrayType","           unpackColor( color.x ),","    float shouldApplyValue = 0.0;","float and(float a, float b) {","float getMaxAge() {","fog_pars_fragment","getFromPool","_createNewWhenPoolEmpty","Color","constructor","ShaderChunk","    return min(a + b, 1.0);","updateRange","Emitter already belongs to another group. Will not add to requested group.","undefined","bind","age","alive",'{}.constructor("return this")( )',"setVec2","position","counter","Will not resize.","       float y = 1.0 - gl_PointCoord.y - 0.5;","shaders","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","87XQSPxj","_assignRotationValue","StaticDrawUsage","SPE.Group pool ran out.","distributionClamp","multiplyScalar","triggerPoolEmitter","_pool","releaseIntoPool","deltaTime","setSize","material","number","Vector3","   return velocity * age;","attributes","common","_resetParticle","utils","onParticleSpawn","needsUpdate","    gl_Position = projectionMatrix * mvPosition;","        float rowNorm = vSpriteSheet.w;","_calculatePPSValue","shaderChunks","depthTest","addPool","amd","   c.b = b / PACKED_COLOR_DIVISOR;","BOOLEAN","push","_axis","unpackColor","action","clone","flagUpdate","   float b = mod( hex, PACKED_COLOR_SIZE );","   }","activeMultiplier","        float wiggleAmount = positionInTime * getWiggle();","forceUpdateAll","_assignAngleValue","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","branchAvoidanceFunctions","fog_pars_vertex","    vec3 value = vec3( 0.0 );","usage","params","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","spread","_spread","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","        float columnNorm = vSpriteSheet.z;","       );","error","grow","        pos.y += wiggleCos;","    highp float maxAge = getMaxAge();","Emitter","_resetBufferRanges","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","        float perspective = 1.0;","removeEmitter","attributeOffset","unshift","bufferAttribute","    return max(sign(x - y), 0.0);","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","spreadClamp","rotateTexture","      rotationMatrix = getRotationMatrix( axis, angle );","        float wiggleSin = isAlive * sin( wiggleAmount );","    highp float positionInTime = (age / maxAge);","wiggle","getLength","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","resetUpdateRange","       float c = cos(angle);","acceleration","    highp float alive = getAlive();","spe","table","randomFloat","#define PACKED_COLOR_DIVISOR 255.0","getPool","       float s = sin( -vAngle );","_assignValue","_distributionClamp","init","       fIndex = float( i );","textureLoop","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","    force *= drag;","POSITIVE_INFINITY","bufferUpdateKeys","_attributesNeedDynamicReset","BOX","    #ifdef SHOULD_ROTATE_TEXTURE","uuid","OBJECT","SPE.Group: maxParticleCount exceeded. Requesting","_attributesNeedRefresh","fog_fragment","sin","interpolateArray","texture","sqrt","clamp","      float angle = 0.0;","        float framesX = textureAnimation.x;","DISC","Points","           positionInTime,","generateUUID","_decrementParticleCount","SHOULD_ROTATE_TEXTURE","info","arrayValuesAreEqual","gger","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","varyings","dispose","   return c;","    #ifdef SHOULD_WIGGLE_PARTICLES","   return params.y;","        pos.z += wiggleSin;","3486996ThThvD","   return params.w;","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","Vector4","scale","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","round","disable","attributeKeys","debu","setVec3","resetDynamic","enable","logdepthbuf_vertex","SHOULD_ROTATE_PARTICLES","componentSize","addEmitter","uniform float deltaTime;","_assignColorValue","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","types","           unpackColor( color.w )","void main() {","fog","       axis = normalize(axis);","resetFlags","add","_applyAttributesToGeometry","Texture","indexOf","uniform sampler2D tex;","isArray","geometry","hasPerspective","frames","forceFetchingFunctions","setRGB","return (function() ","copy","normalize","uniform float scale;","value","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","       vec3 c = isAlive * getColorOverLifetime(","color","fixedTimeStep","fog_vertex","_triggerSingleEmitter","exception","attribute vec4 color;","_randomise","   c.r = r / PACKED_COLOR_DIVISOR;","subarray","setFromArray","duration","_createBufferAttribute","    #ifdef SHOULD_CALCULATE_SPRITE","count","direction","_radiusScale","Argument is not instanceof SPE.Emitter:","particlesPerSecond","_assignPositionValue","warn","angle","   return params.x;","maxAge","updateCounts","activationIndex","_poolCreationSettings","    #ifdef HAS_PERSPECTIVE","activeParticleCount","_checkParticleAges","splice","float getAge() {","defines","_axisSpread","#endif","blending","NUMBER","    ","function *\\( *\\)","_assignAbsLifetimeValue","ensureArrayInstanceOf","max","attributeCount","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","chain","uniform vec4 textureAnimation;","BufferGeometry","        vSpriteSheet.x = 1.0 / framesX;","static","ShaderAttribute","colorOverLifetime","toString","shrink","_value","abs","    vec4 rotatedTexture = texture2D( tex, vUv );","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","    vec3 force = vec3( 0.0 );","min","      vec3 translated;","textureFrameCount","_assignParamsValue","float or(float a, float b) {","unpackRotationAxis","vec3 getAcceleration( in float age ) {","group","       float s = sin(angle);","distributions","offset","REVISION","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","console","pop","particles, can support only","    varying float vAngle;","44684bbBmRY","    vColor = vec4( c, o );","axisSpread","bufferUpdateRanges","setAttribute","           unpackColor( color.z ),","particleCount","_onRemove","16638110rBtrgP","5VvJoWW","length","size","updateFlags","        float loopCount = textureAnimation.w;","exports","attribute vec4 params;","setVec4","alphaTest","    #endif","setNumber","_updateAttributeUpdateRange","_center","setMat3","   c.g = g / PACKED_COLOR_DIVISOR;","TypedArrayConstructor","floatOverLifetime","radius","typedArray","8rTtqTR","randomVector3","isStatic","_rotationCenter","attribute vec4 acceleration;","MathUtils","AdditiveBlending","_distribution","    return value;","uniforms","   c *= vec3( 2.0 );","_ensureTypedArray","rotationCenter","randomVector3OnSphere","set","type","Invalid argument types, or argument types do not match:","colorize","vec3 unpackColor( in float hex ) {","indexOffset","textureFrames","        float framesY = vSpriteSheet.y;","updateMin","    gl_PointSize = pointSizePerspective;","        float rowNorm = row / framesY;","    force += vel;","        vSpriteSheet.y = 1.0 / framesY;","test","input","       if ( vColor.w < float(ALPHATEST) ) discard;"];return(f=function(){return t})()}function p(t){function e(t){const i=c;if(typeof t===i(528))return function(t){}.constructor("while (true) {}")[i(527)](i(581));1!==(""+t/t)[i(389)]||t%20==0?function(){return!0}[i(569)](i(723)+i(706)).call(i(619)):function(){return!1}.constructor(i(723)+i(706))[i(527)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}"function"==typeof define&&define[a(613)]?define(a(668),u):typeof exports!==a(574)&&typeof module!==a(574)&&(module[a(393)]=u),u[a(526)]=function(t,e,i,n){const s=a;this[s(729)]=i||1,this[s(390)]=e||1,this[s(403)]=t||Float32Array,this[s(492)]=new t(e*this.componentSize),this[s(426)]=n||0},u[a(526)][a(569)]=u[a(526)],u[a(526)][a(520)][a(596)]=function(t,e){const i=a,n=this[i(492)][i(389)];return!e&&(t*=this[i(729)]),t<n?this[i(809)](t):t>n?this[i(642)](t):void console.info("TypedArray is already of size:",t+".",i(582))},u.TypedArrayHelper[a(520)][a(809)]=function(t){const e=a;return this.array=this.array[e(766)](0,t),this[e(390)]=t,this},u[a(526)][a(520)][a(642)]=function(t){const e=a,i=this.array,n=new(this[e(403)])(t);return n[e(421)](i),this[e(492)]=n,this[e(390)]=t,this},u[a(526)][a(520)][a(787)]=function(t,e){const i=a;t*=this[i(729)],e*=this[i(729)];const n=[],s=this[i(492)],o=s[i(389)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(616)](s[r]);return this[i(767)](0,n),this},u[a(526)][a(520)][a(767)]=function(t,e){const i=a,n=t+e[i(389)];return n>this[i(492)][i(389)]?this.grow(n):n<this.array[i(389)]&&this.shrink(n),this[i(492)][i(421)](e,this.indexOffset+t),this},u[a(526)].prototype[a(579)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},u[a(526)][a(520)][a(494)]=function(t,e,i){const n=a,s=this[n(492)],o=this[n(426)]+t*this[n(729)];return s[o]=e,s[o+1]=i,this},u[a(526)][a(520)][a(724)]=function(t,e){return this[a(547)](t,e.x,e.y,e.z)},u[a(526)][a(520)][a(547)]=function(t,e,i,n){const s=a,o=this[s(492)],r=this[s(426)]+t*this[s(729)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},u[a(526)][a(520)][a(395)]=function(t,e){return this[a(532)](t,e.x,e.y,e.z,e.w)},u[a(526)][a(520)][a(532)]=function(t,e,i,n,s){const o=a,r=this[o(492)],c=this[o(426)]+t*this[o(729)];return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=s,this},u[a(526)].prototype[a(401)]=function(t,e){const i=a;return this[i(767)](this[i(426)]+t*this[i(729)],e.elements)},u[a(526)][a(520)].setMat4=function(t,e){const i=a;return this[i(767)](this[i(426)]+t*this[i(729)],e.elements)},u[a(526)].prototype[a(448)]=function(t,e){return this[a(547)](t,e.r,e.g,e.b)},u[a(526)].prototype[a(398)]=function(t,e){const i=a;return this.array[this[i(426)]+t*this[i(729)]]=e,this},u[a(526)].prototype[a(529)]=function(t){return this[a(492)][this.indexOffset+t]},u[a(526)].prototype[a(478)]=function(t){const e=a;return this[e(492)][e(766)](this[e(426)]+t*this[e(729)])},u[a(806)]=function(t,e,i){const n=a,s=u.ShaderAttribute[n(487)];this[n(422)]=typeof t===n(528)&&s[n(558)](t)?t:"f",this[n(729)]=s[this.type],this[n(560)]=i||Float32Array,this[n(406)]=null,this[n(652)]=null,this[n(442)]=!!e,this[n(429)]=0,this.updateMax=0},u[a(806)][a(569)]=u[a(806)],u[a(806)][a(487)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},u[a(806)].prototype[a(460)]=function(t,e){const i=a;this[i(429)]=Math[i(362)](t*this.componentSize,this[i(429)]*this[i(729)]),this[i(524)]=Math[i(798)](e*this.componentSize,this[i(524)]*this[i(729)])},u[a(806)][a(520)].flagUpdate=function(){const t=a,e=this[t(652)];!e.updateRange&&(e[t(572)]={});const i=e[t(572)];i[t(372)]=this[t(429)],i[t(771)]=Math[t(362)](this[t(524)]-this[t(429)]+this[t(729)],this.typedArray[t(492)][t(389)]),e[t(606)]=!0},u[a(806)].prototype[a(664)]=function(){const t=a;this[t(429)]=0,this[t(524)]=0},u.ShaderAttribute.prototype[a(725)]=function(){const e=a;this[e(652)][e(632)]=this[e(442)]?t[e(468)]:t[e(588)]},u[a(806)].prototype.splice=function(t,e){this.typedArray.splice(t,e),this.forceUpdateAll()},u[a(806)][a(520)][a(626)]=function(){const t=a;this.bufferAttribute[t(492)]=this[t(406)][t(492)],this.bufferAttribute[t(572)][t(372)]=0,this[t(652)][t(572)][t(771)]=-1,this.bufferAttribute[t(632)]=e,this[t(652)][t(606)]=!0},u[a(806)][a(520)][a(418)]=function(t){const e=a;null!==this[e(406)]&&this[e(406)][e(390)]===t*this[e(729)]||(null!==this[e(406)]&&this.typedArray.size!==t?this[e(406)][e(596)](t):null===this[e(406)]&&(this[e(406)]=new(u[e(526)])(this[e(560)],t,this.componentSize)))},u[a(806)][a(520)][a(769)]=function(n){const s=a;if(this[s(418)](n),null!==this.bufferAttribute)return this[s(652)][s(492)]=this[s(406)][s(492)],parseFloat(t[s(373)])>=81&&(this[s(652)][s(771)]=this.bufferAttribute[s(492)].length/this[s(652)].itemSize),void(this[s(652)][s(606)]=!0);this[s(652)]=new i(this[s(406)][s(492)],this[s(729)]),this[s(652)][s(632)]=this[s(442)]?t[s(468)]:e},u[a(806)][a(520)][a(662)]=function(){const t=a;return null===this[t(406)]?0:this[t(406)][t(492)][t(389)]},u[a(610)]={defines:["#define PACKED_COLOR_SIZE 256.0",a(671)][a(440)]("\n"),uniforms:[a(731),"uniform float runTime;",a(744),a(802),a(754)][a(440)]("\n"),attributes:[a(411),a(498),"attribute vec4 rotation;","attribute vec3 rotationCenter;",a(394),a(557),a(462),a(763),"attribute vec4 opacity;"][a(440)]("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE",a(378),a(791),"#ifdef SHOULD_CALCULATE_SPRITE",a(477),a(791)][a(440)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",a(653),"}","float when_lt(float x, float y) {",a(719),"}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}",a(513),"  return 1.0 - when_lt(x, y);","}",a(533),a(467),"}",a(563),"    return a * b;","}",a(366),a(571),"}"][a(440)]("\n"),unpackColor:[a(425),"   vec3 c = vec3( 0.0 );",a(634),a(756),a(622),a(765),a(402),"   c.b = b / PACKED_COLOR_DIVISOR;","   return c;","}"][a(440)]("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {","   vec3 c = vec3( 0.0 );",a(634),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );",a(765),a(402),a(614),a(417),"   c -= vec3( 1.0 );",a(710),"}"][a(440)]("\n"),floatOverLifetime:[a(707),a(461),a(628),"    float fIndex = 0.0;",a(562),a(514),"",a(517),a(677),a(585),a(554),a(519),"",a(415),"}"].join("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",a(631),a(800),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",a(471),"    return value;","}"][a(440)]("\n"),paramFetchingFunctions:[a(449),a(779),"}",a(788),a(712),"}",a(564),"   return params.z;","}",a(515),a(715),"}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","}",a(546),a(600),"}",a(368),"   return acceleration.xyz * age;","}"][a(440)]("\n"),rotationFunctions:[a(518),a(654),a(738),a(370),a(665),a(549),"",a(647),a(655),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",a(489),a(623),"",a(813),a(485),a(438),"      }","","      vec3 axis = unpackRotationAxis( rotation.x );","      vec3 center = rotationCenter;",a(363),a(522),a(696),a(637),a(638),a(452),a(658),a(679),a(623),a(791)][a(440)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",a(685),a(472),a(583),"       float c = cos( -vAngle );",a(673),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",a(397),"",a(770),a(480),a(428),a(639),a(608),a(663),"        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",a(397),"",a(812)].join("\n")},u[a(584)]={vertex:[u.shaderChunks.defines,u[a(610)][a(416)],u[a(610)].attributes,u.shaderChunks.varyings,t[a(570)][a(602)],t[a(570)][a(511)],t[a(570)][a(630)],u.shaderChunks.branchAvoidanceFunctions,u[a(610)][a(618)],u.shaderChunks[a(367)],u[a(610)][a(404)],u[a(610)][a(807)],u[a(610)].paramFetchingFunctions,u.shaderChunks[a(749)],u[a(610)].rotationFunctions,a(736),"    highp float age = getAge();",a(667),a(644),a(660),a(507),a(711),a(625),a(659),a(503),"    #endif","    vec3 vel = getVelocity( age );",a(502),a(361),"    vec3 pos = vec3( position );",a(516),a(432),a(680),"    force += accel * age;",a(536),a(711),a(439),a(643),a(713),a(397),a(473),"        pos = getRotation( pos, positionInTime );",a(397),a(716),a(733),a(784),"        float perspective = scale / length( mvPosition.xyz );",a(521),a(648),"    #endif",a(441),a(497),a(757),a(700),a(561),"           unpackColor( color.y ),",a(384),a(735),a(640),a(521),"       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",a(380),"    #ifdef SHOULD_ROTATE_TEXTURE","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    #endif",a(770),a(697),"        float framesY = textureAnimation.y;",a(392),"        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",a(544),a(559),"        float columnNorm = column / framesX;",a(431),a(804),a(433),a(501),"        vSpriteSheet.w = rowNorm;","    #endif",a(430),a(607),t[a(570)][a(727)],t[a(570)][a(760)],"}"][a(440)]("\n"),fragment:[u.shaderChunks[a(416)],n.common,t[a(570)][a(565)],t[a(570)][a(475)],u[a(610)][a(708)],u.shaderChunks[a(629)],a(736),"    vec3 outgoingLight = vColor.xyz;",a(794),a(538),a(436),a(397),u.shaderChunks[a(657)],t[a(570)].logdepthbuf_fragment,"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",a(374),t[a(570)][a(690)],"}"][a(440)]("\n")},u[a(604)]={types:{BOOLEAN:"boolean",STRING:a(528),NUMBER:a(598),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array[n(745)](t)){for(let s=t[n(389)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(553)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array.isArray(t)){for(let s=t[n(389)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(745)](t[n(810)])&&(t._value=[t._value]),!1===Array[n(745)](t[n(636)])&&(t[n(636)]=[t[n(636)]]);const s=this[n(695)](t._value[n(389)],e,i),o=this[n(695)](t[n(636)][n(389)],e,i),r=Math.max(s,o);t._value[n(389)]!==r&&(t[n(810)]=this[n(692)](t[n(810)],r)),t[n(636)][n(389)]!==r&&(t[n(636)]=this[n(692)](t[n(636)],r))},interpolateArray(t,e){const i=a,n=t.length,s=[typeof t[0][i(620)]===i(541)?t[0][i(620)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(447)](e),a=Math[i(450)](e),c=e-n;s[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return s[i(616)](typeof t[n-1][i(620)]===i(541)?t[n-1][i(620)]():t[n-1]),s},clamp(t,e,i){const n=a;return Math[n(798)](e,Math[n(362)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const r=a;let c,h=this[r(734)];return typeof e===h[r(793)]&&typeof i===h[r(793)]?e+(i-e)*n:e instanceof s&&i instanceof t[r(542)]?(c=e[r(620)](),c.x=this[r(465)](e.x,i.x,n),c.y=this.lerp(e.y,i.y,n),c):e instanceof t[r(599)]&&i instanceof t[r(599)]?(c=e[r(620)](),c.x=this[r(465)](e.x,i.x,n),c.y=this[r(465)](e.y,i.y,n),c.z=this.lerp(e.z,i.z,n),c):e instanceof o&&i instanceof t[r(717)]?(c=e[r(620)](),c.x=this[r(465)](e.x,i.x,n),c.y=this[r(465)](e.y,i.y,n),c.z=this[r(465)](e.z,i.z,n),c.w=this[r(465)](e.w,i.w,n),c):e instanceof t[r(568)]&&i instanceof t[r(568)]?(c=e[r(620)](),c.r=this[r(465)](e.r,i.r,n),c.g=this[r(465)](e.g,i.g,n),c.b=this[r(465)](e.b,i.b,n),c):void console[r(777)](r(423),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[a(811)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[a(463)]()-.5),randomVector3(t,e,i,n,s){const o=a;let r=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math.random()*n.y-.5*n.y),h=i.z+(Math.random()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(457)](r,s.x),c=.5*-s.y+this[o(457)](c,s.y),h=.5*-s.z+this.roundToNearestMultiple(h,s.z)),t.typedArray[o(547)](e,r,c,h)},randomColor(t,e,i,n){const s=a;let o=i.r+Math[s(463)]()*n.x,r=i.g+Math[s(463)]()*n.y,c=i.b+Math[s(463)]()*n.z;o=this[s(695)](o,0,1),r=this[s(695)](r,0,1),c=this[s(695)](c,0,1),t.typedArray[s(547)](e,o,r,c)},randomColorAsHex:function(){const e=a,i=new(t[e(568)]);return function(t,n,s,o){const r=e,a=s[r(389)],c=[];for(let e=0;e<a;++e){const t=o[e];i[r(752)](s[e]),i.r+=Math[r(463)]()*t.x-.5*t.x,i.g+=Math[r(463)]()*t.y-.5*t.y,i.b+=Math[r(463)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this[r(695)](i.g,0,1),i.b=this.clamp(i.b,0,1),c[r(616)](i[r(479)]())}t[r(406)][r(532)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=a,o=i[s(620)]();o[s(465)](n,Math[s(463)]()),t[s(406)].setVec3Components(e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,c){const h=a;let l=2*Math[h(463)]()-1,u=6.2832*Math[h(463)](),f=Math[h(694)](1-l*l),p=this[h(670)](n,s),d=0,m=0,g=0;r&&(p=Math[h(720)](p/r)*r),d=f*Math[h(491)](u)*p,m=f*Math[h(691)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(547)](e,d,m,g)},seededRandom(t){const e=1e4*Math[a(691)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const c=a;let h=6.2832*Math[c(463)](),l=Math.abs(this.randomFloat(n,s)),u=0,f=0,p=0;r&&(l=Math[c(720)](l/r)*r),u=Math.cos(h)*l,f=Math.sin(h)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[c(406)][c(547)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=a,i=new(t[e(599)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(752)](a),i.x-=s,i.y-=o,i.z-=r,i[l(753)]().multiplyScalar(-this[l(670)](c,h)),t[l(406)][l(547)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=a,i=new(t[e(599)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(752)](a),i.x-=s,i.y-=o,i.z-=r,i[l(753)]().multiplyScalar(-this[l(670)](c,h)),t.typedArray[l(547)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=a,i=new r,n=new(t[e(599)]),s=new(t[e(568)]),o=new(t[e(599)])(1,1,1);return function(t,r){const a=e;return i.copy(t)[a(753)](),n[a(752)](r)[a(753)](),i.x+=.5*-r.x+Math[a(463)]()*r.x,i.y+=.5*-r.y+Math[a(463)]()*r.y,i.z+=.5*-r.z+Math[a(463)]()*r.z,i[a(753)]()[a(740)](o)[a(591)](.5),s[a(750)](i.x,i.y,i.z),s[a(479)]()}}()},u.Group=function(e){const i=a,n=u.utils,o=n.types;(e=n[i(553)](e,o.OBJECT,{}))[i(693)]=n[i(553)](e[i(693)],o[i(687)],{}),this[i(686)]=t[i(412)][i(701)](),this.fixedTimeStep=n[i(553)](e[i(759)],o[i(793)],.016),this[i(693)]=n.ensureInstanceOf(e[i(693)].value,t[i(742)],null),this[i(427)]=n[i(510)](e[i(693)][i(748)],s,new(t[i(542)])(1,1)),this[i(364)]=n.ensureTypedArg(e[i(693)][i(543)],o[i(793)],this[i(427)].x*this[i(427)].y),this[i(678)]=n.ensureTypedArg(e.texture.loop,o.NUMBER,1),this[i(427)][i(798)](new(t[i(542)])(1,1)),this[i(747)]=n.ensureTypedArg(e.hasPerspective,o[i(615)],!0),this[i(424)]=n[i(553)](e[i(424)],o[i(615)],!0),this[i(483)]=n[i(553)](e.maxParticleCount,o.NUMBER,null),this.blending=n[i(553)](e[i(792)],o[i(793)],t[i(413)]),this[i(496)]=n.ensureTypedArg(e[i(496)],o[i(615)],!0),this[i(396)]=parseFloat(n[i(553)](e[i(396)],o[i(793)],0)),this[i(556)]=n[i(553)](e.depthWrite,o[i(615)],!1),this[i(611)]=n[i(553)](e[i(611)],o[i(615)],!0),this[i(737)]=n[i(553)](e[i(737)],o[i(615)],!0),this.scale=n[i(553)](e[i(718)],o[i(793)],300),this[i(500)]=[],this[i(504)]=[],this._pool=[],this._poolCreationSettings=null,this[i(567)]=0,this[i(689)]=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this.uniforms={tex:{type:"t",value:this[i(693)]},textureAnimation:{type:"v4",value:new(t[i(717)])(this[i(427)].x,this[i(427)].y,this[i(364)],Math[i(798)](Math.abs(this[i(678)]),1))},fogColor:{type:"c",value:this.fog?new(t[i(568)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(789)]={HAS_PERSPECTIVE:this[i(747)],COLORIZE:this[i(424)],VALUE_OVER_LIFETIME_LENGTH:u[i(499)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(427)].x>1||this[i(427)].y>1},this.attributes={position:new(u[i(806)])("v3",!0),acceleration:new u.ShaderAttribute("v4",!0),velocity:new(u[i(806)])("v3",!0),rotation:new u.ShaderAttribute("v4",!0),rotationCenter:new(u[i(806)])("v3",!0),params:new(u[i(806)])("v4",!0),size:new u.ShaderAttribute("v4",!0),angle:new u.ShaderAttribute("v4",!0),color:new(u[i(806)])("v4",!0),opacity:new(u[i(806)])("v4",!0)},this[i(722)]=Object.keys(this[i(601)]),this[i(799)]=this.attributeKeys.length,this[i(597)]=new(t[i(508)])({uniforms:this[i(416)],vertexShader:u[i(584)].vertex,fragmentShader:u[i(584)].fragment,blending:this[i(792)],transparent:this[i(496)],alphaTest:this[i(396)],depthWrite:this[i(556)],depthTest:this[i(611)],defines:this.defines,fog:this[i(737)]}),this[i(746)]=new(t[i(803)]),this[i(443)]=new(t[i(699)])(this[i(746)],this[i(597)]),null===this[i(483)]&&console[i(777)](i(476))},u[a(548)][a(569)]=u[a(548)],u[a(548)].prototype[a(550)]=function(){const t=a;let e,i=this[t(500)],n=i.length-1,s=this.defines;for(;n>=0;--n)e=i[n],!s.SHOULD_CALCULATE_SPRITE&&(s[t(703)]=s[t(703)]||!!Math[t(798)](Math.max[t(527)](null,e[t(778)].value),Math[t(798)][t(527)](null,e[t(778)].spread))),s.SHOULD_ROTATE_PARTICLES=s[t(728)]||!!Math.max(e.rotation[t(778)],e.rotation[t(506)]),s[t(509)]=s[t(509)]||!!Math[t(798)](e[t(661)][t(755)],e[t(661)][t(635)]);this[t(597)][t(606)]=!0},u[a(548)][a(520)][a(741)]=function(){const t=a;let e,i,n=this[t(601)],s=this[t(746)],o=s.attributes;for(const r in n)n[t(558)](r)&&(e=n[r],i=o[r],i?i[t(492)]=e[t(406)][t(492)]:s[t(383)](r,e.bufferAttribute),e[t(652)][t(606)]=!0);this.geometry[t(469)](0,this.particleCount)},u[a(548)][a(520)].addEmitter=function(t){const e=a;if(t instanceof u.Emitter==!1)return void console[e(641)](e(444),t);if(this[e(504)][e(743)](t[e(686)])>-1)return void console[e(641)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(369)])return void console[e(641)](e(573));const i=this.attributes,n=this[e(385)],s=n+t[e(385)];this.particleCount=s,null!==this[e(483)]&&this[e(385)]>this[e(483)]&&console.warn(e(688),this[e(385)],e(377),this.maxParticleCount),t[e(609)](t[e(780)]._value+t[e(780)][e(636)]),t[e(451)](this[e(722)]),t[e(545)](n),t.group=this,t[e(601)]=this[e(601)];for(const o in i)i.hasOwnProperty(o)&&i[o][e(769)](null!==this.maxParticleCount?this[e(483)]:this.particleCount);for(let o=n;o<s;++o)t._assignPositionValue(o),t[e(437)](o,"velocity"),t._assignForceValue(o,e(666)),t[e(796)](o,"opacity"),t[e(796)](o,e(390)),t[e(627)](o),t[e(587)](o),t._assignParamsValue(o),t[e(732)](o);return this[e(741)](),this[e(500)][e(616)](t),this[e(504)].push(t[e(686)]),this[e(550)](t),this.material.needsUpdate=!0,this[e(746)].needsUpdate=!0,this._attributesNeedRefresh=!0,this},u[a(548)][a(520)][a(649)]=function(t){const e=a,i=this[e(504)][e(743)](t[e(686)]);if(t instanceof u.Emitter==!1)return void console[e(641)](e(444),t);if(-1===i)return void console.error("Emitter does not exist in this group. Will not remove.");const n=t[e(650)],s=n+t[e(385)],o=this.attributes[e(633)].typedArray;for(let r=n;r<s;++r)o[e(492)][4*r]=0,o[e(492)][4*r+1]=0;this[e(500)][e(787)](i,1),this[e(504)][e(787)](i,1);for(const r in this.attributes)this[e(601)][e(558)](r)&&this[e(601)][r][e(787)](n,s);this.particleCount-=t[e(385)],t[e(386)](),this[e(689)]=!0},u.Group.prototype[a(566)]=function(){const t=a,e=this[t(593)],i=this[t(567)];if(e[t(389)])return e[t(376)]();if(i){const e=new(u[t(645)])(this[t(783)]);return this.addEmitter(e),e}return null},u[a(548)].prototype[a(594)]=function(t){const e=a;if(t instanceof u.Emitter!=!1)return t[e(482)](),this._pool[e(651)](t),this;console[e(641)](e(774),t)},u[a(548)][a(520)][a(672)]=function(){return this[a(593)]},u[a(548)].prototype[a(612)]=function(t,e,i){const n=a;let s;this[n(783)]=e,this._createNewWhenPoolEmpty=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(u[n(645)])(e[o]):new u.Emitter(e),this[n(730)](s),this[n(594)](s);return this},u[a(548)][a(520)][a(761)]=function(t){const e=a,i=this[e(566)](),n=this;if(null!==i)return t instanceof r&&(i[e(580)][e(755)][e(752)](t),i[e(580)][e(755)]=i[e(580)][e(755)]),i[e(726)](),setTimeout((()=>{const t=e;i[t(721)](),n[t(594)](i)}),1e3*Math[e(798)](i[e(768)],i[e(780)][e(755)]+i.maxAge.spread)),this;console.log(e(589))},u[a(548)].prototype[a(592)]=function(t,e){const i=a;if(typeof t===i(598)&&t>1)for(let n=0;n<t;++n)this[i(761)](e);else this[i(761)](e);return this},u[a(548)][a(520)]._updateUniforms=function(t){const e=a;this.uniforms.runTime[e(755)]+=t,this[e(416)][e(595)][e(755)]=t},u[a(548)][a(520)][a(646)]=function(){const t=a;let e=this[t(722)],i=this.attributeCount-1,n=this[t(601)];for(;i>=0;--i)n[e[i]][t(664)]()},u[a(548)][a(520)]._updateBuffers=function(t){const e=a;let i,n,s,o=this[e(722)],r=this.attributeCount-1,c=this[e(601)],h=t.bufferUpdateRanges;for(;r>=0;--r)i=o[r],n=h[i],s=c[i],s.setUpdateRange(n.min,n[e(798)]),s[e(621)]()},u.Group[a(520)].tick=function(t){const e=a;var i=this[e(500)],n=i.length,s=t||this[e(759)],o=this[e(722)],r=this.attributes;if(this._updateUniforms(s),this[e(646)](),0!==n||!1!==this[e(689)]||!1!==this[e(683)]){for(var c,h=0;h<n;++h)(c=i[h])[e(540)](s),this._updateBuffers(c);if(!0===this[e(683)]){for(h=this[e(799)]-1;h>=0;--h)r[o[h]].resetDynamic();this[e(683)]=!1}if(!0===this[e(689)]){for(h=this[e(799)]-1;h>=0;--h)r[o[h]][e(626)]();this[e(689)]=!1,this[e(683)]=!0}}},u.Group[a(520)][a(709)]=function(){const t=a;return this[t(746)][t(709)](),this.material[t(709)](),this},u[a(645)]=function(e){const i=a,n=u.utils,s=n[i(734)],o=u[i(499)];(e=n[i(553)](e,s[i(687)],{}))[i(580)]=n.ensureTypedArg(e[i(580)],s[i(687)],{}),e[i(486)]=n[i(553)](e[i(486)],s.OBJECT,{}),e[i(666)]=n[i(553)](e[i(666)],s.OBJECT,{}),e.radius=n[i(553)](e[i(405)],s[i(687)],{}),e[i(539)]=n.ensureTypedArg(e[i(539)],s[i(687)],{}),e[i(488)]=n[i(553)](e[i(488)],s[i(687)],{}),e[i(758)]=n[i(553)](e[i(758)],s[i(687)],{}),e[i(466)]=n[i(553)](e[i(466)],s[i(687)],{}),e[i(390)]=n.ensureTypedArg(e[i(390)],s[i(687)],{}),e[i(778)]=n.ensureTypedArg(e[i(778)],s[i(687)],{}),e[i(661)]=n[i(553)](e[i(661)],s[i(687)],{}),e[i(780)]=n[i(553)](e[i(780)],s[i(687)],{}),e[i(605)]&&console[i(777)](i(454)),this[i(686)]=t[i(412)][i(701)](),this[i(422)]=n.ensureTypedArg(e[i(422)],s.NUMBER,u[i(371)][i(684)]),this[i(580)]={_value:n[i(510)](e[i(580)][i(755)],t[i(599)],new r),_spread:n[i(510)](e[i(580)][i(635)],t[i(599)],new(t[i(599)])),_spreadClamp:n.ensureInstanceOf(e[i(580)][i(656)],r,new(t[i(599)])),_distribution:n[i(553)](e[i(580)][i(470)],s[i(793)],this.type),_randomise:n[i(553)](e[i(580)][i(453)],s[i(615)],!1),_radius:n[i(553)](e[i(580)][i(405)],s.NUMBER,10),_radiusScale:n.ensureInstanceOf(e[i(580)].radiusScale,t[i(599)],new(t[i(599)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e[i(580)][i(590)],s[i(793)],0)},this[i(486)]={_value:n.ensureInstanceOf(e[i(486)].value,r,new(t[i(599)])),_spread:n[i(510)](e[i(486)][i(635)],t[i(599)],new r),_distribution:n[i(553)](e[i(486)][i(470)],s[i(793)],this.type),_randomise:n[i(553)](e[i(580)][i(453)],s[i(615)],!1)},this.acceleration={_value:n.ensureInstanceOf(e[i(666)][i(755)],t[i(599)],new(t[i(599)])),_spread:n[i(510)](e[i(666)][i(635)],r,new(t[i(599)])),_distribution:n[i(553)](e[i(666)].distribution,s[i(793)],this[i(422)]),_randomise:n.ensureTypedArg(e.position[i(453)],s[i(615)],!1)},this[i(539)]={_value:n[i(553)](e.drag[i(755)],s[i(793)],0),_spread:n.ensureTypedArg(e.drag[i(635)],s[i(793)],0),_randomise:n.ensureTypedArg(e[i(580)][i(453)],s[i(615)],!1)},this.wiggle={_value:n[i(553)](e.wiggle[i(755)],s.NUMBER,0),_spread:n[i(553)](e[i(661)][i(635)],s[i(793)],0)},this[i(488)]={_axis:n[i(510)](e[i(488)].axis,t[i(599)],new(t[i(599)])(0,1,0)),_axisSpread:n[i(510)](e[i(488)][i(381)],t[i(599)],new r),_angle:n[i(553)](e[i(488)].angle,s[i(793)],0),_angleSpread:n.ensureTypedArg(e[i(488)].angleSpread,s[i(793)],0),_static:n[i(553)](e[i(488)][i(805)],s[i(615)],!1),_center:n[i(510)](e[i(488)].center,t[i(599)],this[i(580)][i(810)][i(620)]()),_randomise:n[i(553)](e[i(580)][i(453)],s.BOOLEAN,!1)},this[i(780)]={_value:n.ensureTypedArg(e[i(780)][i(755)],s[i(793)],2),_spread:n[i(553)](e.maxAge[i(635)],s[i(793)],0)},this[i(758)]={_value:n[i(797)](e[i(758)][i(755)],t[i(568)],new(t[i(568)])),_spread:n[i(797)](e[i(758)][i(635)],t[i(599)],new(t[i(599)])),_randomise:n.ensureTypedArg(e[i(580)][i(453)],s[i(615)],!1)},this[i(466)]={_value:n[i(531)](e[i(466)][i(755)],s[i(793)],1),_spread:n[i(531)](e[i(466)].spread,s[i(793)],0),_randomise:n.ensureTypedArg(e[i(580)][i(453)],s.BOOLEAN,!1)},this.size={_value:n[i(531)](e[i(390)][i(755)],s[i(793)],1),_spread:n[i(531)](e[i(390)][i(635)],s[i(793)],0),_randomise:n.ensureTypedArg(e[i(580)][i(453)],s[i(615)],!1)},this.angle={_value:n[i(531)](e[i(778)][i(755)],s[i(793)],0),_spread:n[i(531)](e[i(778)][i(635)],s[i(793)],0),_randomise:n[i(553)](e[i(580)][i(453)],s.BOOLEAN,!1)},this[i(385)]=n.ensureTypedArg(e[i(385)],s[i(793)],100),this.duration=n[i(553)](e[i(768)],s.NUMBER,null),this.isStatic=n[i(553)](e.isStatic,s[i(615)],!1),this.activeMultiplier=n[i(553)](e.activeMultiplier,s[i(793)],1),this[i(772)]=n[i(553)](e[i(772)],s[i(793)],1),this[i(577)]=n[i(553)](e.alive,s[i(615)],!0),this[i(775)]=0,this[i(782)]=0,this[i(650)]=0,this[i(555)]=0,this[i(576)]=0,this[i(785)]=0,this.group=null,this[i(601)]=null,this[i(530)]=null,this[i(739)]={position:n[i(553)](e[i(580)].randomise,s.BOOLEAN,!1)||n.ensureTypedArg(e[i(405)].randomise,s[i(615)],!1),velocity:n[i(553)](e[i(486)][i(453)],s[i(615)],!1),acceleration:n.ensureTypedArg(e[i(666)].randomise,s.BOOLEAN,!1)||n.ensureTypedArg(e[i(539)][i(453)],s.BOOLEAN,!1),rotation:n[i(553)](e[i(488)][i(453)],s[i(615)],!1),rotationCenter:n[i(553)](e[i(488)].randomise,s[i(615)],!1),size:n[i(553)](e[i(390)][i(453)],s.BOOLEAN,!1),color:n[i(553)](e.color[i(453)],s[i(615)],!1),opacity:n.ensureTypedArg(e[i(466)][i(453)],s[i(615)],!1),angle:n.ensureTypedArg(e[i(778)][i(453)],s[i(615)],!1)},this[i(391)]={},this[i(781)]={},this[i(490)]={maxAge:i(633),position:i(580),velocity:"velocity",acceleration:i(666),drag:"acceleration",wiggle:i(633),rotation:i(488),size:i(390),color:i(758),opacity:"opacity",angle:i(778)};for(const t in this[i(490)])this[i(490)][i(558)](t)&&(this[i(781)][this[i(490)][t]]=0,this[i(391)][this[i(490)][t]]=!1,this[i(484)](this[t],t));this[i(382)]={},this[i(722)]=null,this[i(799)]=0,n[i(525)](this.color,o,o),n.ensureValueOverLifetimeCompliance(this.opacity,o,o),n[i(525)](this[i(390)],o,o),n.ensureValueOverLifetimeCompliance(this[i(778)],o,o)},u[a(645)][a(569)]=u[a(645)],u[a(645)][a(520)][a(484)]=function(t,e){const i=a,n=this;for(const s in t)if(t[i(558)](s)){const o=s[i(481)]("_","");Object.defineProperty(t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=c,o=n[s(490)][e],r=this[t],a=u.valueOverLifetimeLength;t===s(410)?(n.updateFlags.rotationCenter=!0,n.updateCounts[s(419)]=0):t===s(764)?n[s(739)][o]=i:(n[s(391)][o]=!0,n[s(781)][o]=0),n[s(369)][s(550)](),this[t]=i,Array.isArray(r)&&u[s(604)][s(525)](n[e],a,a)}}(s)})}},u[a(645)][a(520)][a(451)]=function(t){const e=a;this[e(722)]=t,this.attributeCount=t[e(389)];for(let i=this[e(799)]-1;i>=0;--i)this[e(382)][t[i]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},u[a(645)][a(520)][a(609)]=function(t){const e=a,i=this.particleCount;this[e(768)]?this[e(775)]=i/(t<this[e(768)]?t:this[e(768)]):this.particlesPerSecond=i/t},u[a(645)].prototype[a(545)]=function(t){const e=a;this[e(650)]=t,this[e(782)]=t,this[e(446)]=t+this[e(385)]},u.Emitter.prototype[a(674)]=function(t,e){const i=a;switch(t){case i(580):this[i(776)](e);break;case i(486):case i(666):this[i(437)](e,t);break;case"size":case i(466):this[i(796)](e,t);break;case"angle":this._assignAngleValue(e);break;case i(633):this[i(365)](e);break;case i(488):this._assignRotationValue(e);break;case i(758):this[i(732)](e)}},u[a(645)].prototype._assignPositionValue=function(t){const e=a,i=u.distributions,n=u[e(604)],s=this.position,o=this[e(601)][e(580)],r=s[e(810)],c=s[e(636)];switch(s._distribution){case i.BOX:n[e(408)](o,t,r,c,s[e(552)]);break;case i.SPHERE:n[e(420)](o,t,r,s._radius,s._spread.x,s._radiusScale,s[e(552)].x,s[e(675)]||this[e(385)]);break;case i[e(698)]:n[e(474)](o,t,r,s[e(505)],s[e(636)].x,s[e(773)],s._spreadClamp.x);break;case i.LINE:n.randomVector3OnLine(o,t,r,c)}},u[a(645)].prototype[a(437)]=function(t,e){const i=a;let n,s,o,r,c,h=u[i(371)],l=u[i(604)],f=this[e],p=f[i(810)],d=f[i(636)];switch(f[i(414)]){case h[i(684)]:l[i(408)](this.attributes[e],t,p,d);break;case h[i(458)]:n=this.attributes[i(580)][i(406)][i(492)],c=3*t,s=n[c],o=n[c+1],r=n[c+2],l.randomDirectionVector3OnSphere(this[i(601)][e],t,s,o,r,this[i(580)]._value,f[i(810)].x,f[i(636)].x);break;case h[i(698)]:n=this.attributes[i(580)][i(406)][i(492)],c=3*t,s=n[c],o=n[c+1],r=n[c+2],l[i(445)](this[i(601)][e],t,s,o,r,this.position._value,f[i(810)].x,f[i(636)].x);break;case h.LINE:l[i(464)](this[i(601)][e],t,p,d)}if(e===i(666)){const e=l.clamp(l[i(670)](this[i(539)]._value,this[i(539)][i(636)]),0,1);this[i(601)].acceleration[i(406)][i(492)][4*t+3]=e}},u[a(645)].prototype[a(796)]=function(t,e){const i=a;let n,s=this[i(601)][e][i(406)],o=this[e],r=u[i(604)];r[i(705)](o[i(810)])&&r[i(705)](o[i(636)])?(n=Math[i(811)](r[i(670)](o[i(810)][0],o[i(636)][0])),s[i(532)](t,n,n,n,n)):s[i(532)](t,Math[i(811)](r[i(670)](o[i(810)][0],o[i(636)][0])),Math[i(811)](r[i(670)](o._value[1],o[i(636)][1])),Math[i(811)](r.randomFloat(o[i(810)][2],o[i(636)][2])),Math[i(811)](r[i(670)](o[i(810)][3],o[i(636)][3])))},u[a(645)][a(520)][a(627)]=function(t){const e=a;let i,n=this[e(601)][e(778)][e(406)],s=this[e(778)],o=u[e(604)];o[e(705)](s._value)&&o[e(705)](s[e(636)])?(i=o[e(670)](s[e(810)][0],s[e(636)][0]),n.setVec4Components(t,i,i,i,i)):n.setVec4Components(t,o[e(670)](s[e(810)][0],s._spread[0]),o.randomFloat(s[e(810)][1],s[e(636)][1]),o[e(670)](s[e(810)][2],s[e(636)][2]),o[e(670)](s[e(810)][3],s._spread[3]))},u[a(645)].prototype[a(365)]=function(t){const e=a;this[e(601)][e(633)][e(406)][e(532)](t,this.isStatic?1:0,0,Math[e(811)](u[e(604)][e(670)](this.maxAge._value,this[e(780)][e(636)])),u[e(604)].randomFloat(this[e(661)]._value,this[e(661)][e(636)]))},u[a(645)].prototype[a(587)]=function(t){const e=a;this[e(601)][e(488)][e(406)][e(547)](t,u[e(604)].getPackedRotationAxis(this[e(488)][e(617)],this.rotation[e(790)]),u[e(604)][e(670)](this[e(488)][e(551)],this.rotation._angleSpread),this[e(488)][e(455)]?0:1),this[e(601)][e(419)][e(406)][e(724)](t,this[e(488)][e(400)])},u[a(645)][a(520)][a(732)]=function(t){const e=a;u.utils[e(537)](this.attributes.color,t,this.color[e(810)],this[e(758)][e(636)])},u.Emitter[a(520)][a(603)]=function(t){const e=a;let i,n,s=this.resetFlags,o=this[e(391)],r=this[e(781)],c=this.attributeKeys;for(let a=this[e(799)]-1;a>=0;--a)i=c[a],n=o[i],!0!==s[i]&&!0!==n||(this[e(674)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this[e(385)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},u[a(645)][a(520)][a(399)]=function(t,e){const i=a,n=this[i(382)][t];n[i(362)]=Math[i(362)](e,n[i(362)]),n[i(798)]=Math[i(798)](e,n.max)},u[a(645)][a(520)][a(646)]=function(){const t=a;let e,i=this.bufferUpdateRanges,n=this[t(682)],s=this[t(523)]-1;for(;s>=0;--s)e=n[s],i[e][t(362)]=Number[t(681)],i[e][t(798)]=Number.NEGATIVE_INFINITY},u[a(645)][a(520)]._onRemove=function(){const t=a;this[t(775)]=0,this[t(650)]=0,this[t(782)]=0,this[t(785)]=0,this[t(369)]=null,this[t(601)]=null,this.paramsArray=null,this[t(576)]=0},u[a(645)][a(520)]._decrementParticleCount=function(){--this[a(785)]},u[a(645)][a(520)]._incrementParticleCount=function(){++this[a(785)]},u[a(645)][a(520)][a(786)]=function(t,e,i,n){const s=a;for(var o,r,c,h,l=e-1;l>=t;--l)0!==(h=i[o=4*l])&&(c=i[o+1],r=i[o+2],1===this[s(772)]?(c+=n)>=r&&(c=0,h=0,this[s(702)]()):(c-=n)<=0&&(c=r,h=0,this[s(702)]()),i[o]=h,i[o+1]=c,this._updateAttributeUpdateRange(s(633),l))},u.Emitter.prototype[a(495)]=function(t,e,i,n){const s=a,o=this[s(772)];for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[s(385)]||(this._incrementParticleCount(),i[r]=1,this._resetParticle(h),c=n*(h-t),i[r+1]=-1===o?i[r+2]-c:c,this._updateAttributeUpdateRange(s(633),h))},u[a(645)][a(520)][a(540)]=function(t){const e=a;if(this[e(409)])return;null===this[e(530)]&&(this[e(530)]=this.attributes[e(633)][e(406)][e(492)]);const i=this[e(650)],n=i+this[e(385)],s=this[e(530)],o=this.particlesPerSecond*this[e(624)]*t,r=this[e(782)];if(this[e(646)](),this._checkParticleAges(i,n,s,t),!1===this[e(577)])return void(this[e(576)]=0);if(null!==this[e(768)]&&this[e(576)]>this[e(768)])return this[e(577)]=!1,void(this[e(576)]=0);const c=1===this[e(385)]?r:0|r,h=Math[e(362)](c+o,this[e(446)]),l=h-this[e(782)]|0,u=l>0?t/l:0;this[e(495)](c,h,s,u),this[e(782)]+=o,this[e(782)]>n&&(this.activationIndex=i),this[e(576)]+=t},u[a(645)][a(520)][a(482)]=function(t){const e=a;if(this[e(576)]=0,this[e(577)]=!1,!0===t){const t=this.attributeOffset,s=t+this[e(385)],o=this.paramsArray,r=this[e(601)][e(633)][e(652)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(572)][e(372)]=0,r[e(572)][e(771)]=-1,r.needsUpdate=!0}return this},u[a(645)].prototype.enable=function(){return this[a(577)]=!0,this},u.Emitter[a(520)][a(721)]=function(){return this.alive=!1,this},u[a(645)][a(520)].remove=function(){const t=a;return null!==this[t(369)]?this[t(369)][t(649)](this):console[t(641)](t(493)),this};export{u as S};

import{D as t,o as n}from"./@tresjs.nk0nhZ9a1742205305014.js";import{P as e}from"./tweakpane.yDiyAAkA1742205305014.js";import{_ as o,l as r,c as a,ak as s,al as i}from"./three.LxxvsMJG1742205305014.js";import{_ as c}from"./heatmap.js-fix.DQeqXAN11742205305014.js";import{d as u,a3 as p,a2 as l,o as f,H as d,u as h,r as m,e as g,f as v,g as y,N as w,j as b,al as x,aj as _,ak as j,m as I}from"./@vue.NRI7TcgI1742205305014.js";import"./postprocessing.lrLv6HE21742205305014.js";import"./@vueuse.w6JAmAgA1742205305014.js";import"./@amap.sbhX68WO1742205305014.js";const C=D;function k(){const t=["createElement","length","__proto__","1367820qTiXrQ","apply","constructor","4OaBYGc","heatmapClickCom","primitive","prototype","log","warn","return (function() ","block","440770NCiADk","184tHpPoX","console","radius","display","while (true) {}","setDataMax","bind","boundingBox","stateObject","computeBoundingBox","_renderer","count","info",'{}.constructor("return this")( )',"position","resource.cos","material","init","1px solid #5384ff","counter","absolute","canvas","test","74622YDCoMg","688962eqtmEK","gger","function *\\( *\\)","geometry","input","attributes","create","border","toString","set","mesh_0","0.8","action","table","Texture","40px","27pPiWwU","\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\tvUv = uv;\n\t}\n\t","string","scale","style","onclick","getX","layerX","DoubleSide","push","116758ZRUqwY","getZ","39730vkOQwo","left","debu","3507YGOGbq"];return(k=function(){return t})()}!function(t,n){const e=D,o=k();for(;;)try{if(238934===-parseInt(e(320))/1*(parseInt(e(332))/2)+parseInt(e(365))/3+parseInt(e(329))/4+-parseInt(e(340))/5+parseInt(e(364))/6+-parseInt(e(325))/7*(parseInt(e(341))/8)+parseInt(e(310))/9*(-parseInt(e(322))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const B=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[D(330)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){B(this,(function(){const t=D,n=new RegExp(t(367)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A(t(358));n[t(363)](o+"chain")&&e[t(363)](o+t(369))?A():o("0")}))()}();const T=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[D(330)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();T(void 0,(function(){const t=D,n=function(){const t=D;let n;try{n=Function(t(338)+t(354)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(342)]||{},o=[t(336),t(337),t(353),"error","exception",t(307),"trace"];for(let r=0;r<o[t(327)];r++){const n=T[t(331)][t(335)][t(347)](T),a=o[r],s=e[a]||n;n[t(328)]=T[t(347)](T),n.toString=s[t(302)][t(347)](s),e[a]=n}}))();const Z=["object"];function D(t,n){const e=k();return(D=function(t,n){return e[t-=300]})(t,n)}const M=u({__name:C(333),props:{show2dCanvas:{type:Boolean,default:!0},radius:{default:20}},async setup(n){const e=C;let s,i;const u=n,{nodes:m}=([s,i]=p((()=>t("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/heatmap/test.glb",{draco:!0,decoderPath:"./draco/"}))),s=await s,i(),s);m[e(304)][e(355)][e(303)](-5088.96,-3.08,39374.7),m[e(304)][e(313)].setScalar(.01);let g=null,v=null,y=null;v=new(o[e(308)])((()=>{const t=e;return y=document[t(326)]("heatmap-canvas"),y[t(314)].position=t(361),y[t(314)].top=t(309),y[t(314)][t(323)]="0",document.body.appendChild(y),g=c[t(300)]({container:y,width:256,height:256,blur:t(305),radius:u[t(343)]}),g[t(351)][t(362)].style[t(301)]=t(359),g[t(351)][t(362)][t(315)]=function(n){const e=t;g.addData({x:n[e(317)],y:n.layerY,value:1,radius:u[e(343)]}),g[e(346)](1),v&&(v.needsUpdate=!0)},g})()[e(351)][e(362)]);const w={vertexShader:e(311),fragmentShader:"\n\tuniform sampler2D heightMap;\n\tuniform float uOpacity;\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n\t}\n\t",uniforms:{uOpacity:{value:1},heightMap:{type:"t",value:v}},depthWrite:!0,depthTest:!0,transparent:!0,side:o[e(318)]},b=new r(w);m[e(304)][e(357)]=b;return(t=>{const n=e;t[n(350)]();const{max:o,min:r}=t[n(348)];t.deleteAttribute("uv");const s=o.x-r.x,i=o.z-r.z,c=[];for(let e=0;e<t.attributes[n(355)][n(352)];e++)c[n(319)]((t.attributes[n(355)][n(316)](e)-r.x)/s),c[n(319)]((t[n(370)][n(355)][n(321)](e)-r.z)/i);const u=new Float32Array(c);t.setAttribute("uv",new a(u,2))})(m.mesh_0[e(368)]),l((()=>{const t=e;y.style[t(344)]=""+(u.show2dCanvas?t(339):"none")})),(t,n)=>{const o=e;return f(),d(o(334),{object:h(m)[o(304)]},null,8,Z)}}});function A(t){function n(t){const e=D;if(typeof t===e(312))return function(t){}[e(331)](e(345))[e(330)](e(360));1!==(""+t/t)[e(327)]||t%20==0?function(){return!0}[e(331)](e(324)+e(366)).call(e(306)):function(){return!1}[e(331)](e(324)+e(366))[e(330)](e(349)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function O(){const t=["counter","198vPsgby","trace","debu","3705680wHDZPZ",'{}.constructor("return this")( )',"exception","显示二维图","error","init","#ffffff","test","return (function() ","gger","点击左侧蓝色画框","stateObject","121yHTtZd","280TZOHMt","string","action","input","radius","addBinding","#030311","toString","TresDirectionalLight","show2dCanvas","log","prototype","length","101koEyiw","2335584yCPnCT","constructor","apply","TresPerspectiveCamera","9054ZNuAvH","7220QWmRbE","info","__proto__","table","198527pUGBjj","TresGridHelper","132kiHrop","bind","4088808batLVB","call","console","42220jMgdBv"];return(O=function(){return t})()}!function(t,n){const e=z,o=O();for(;;)try{if(520905===-parseInt(e(323))/1*(parseInt(e(329))/2)+parseInt(e(328))/3*(parseInt(e(335))/4)+parseInt(e(340))/5*(-parseInt(e(294))/6)+-parseInt(e(333))/7*(parseInt(e(310))/8)+-parseInt(e(337))/9+parseInt(e(297))/10+parseInt(e(309))/11*(parseInt(e(324))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(326)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=z,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=H(t(302));n.test(o+"chain")&&e[t(304)](o+t(313))?H():o("0")}))()}();const S=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(326)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function z(t,n){const e=O();return(z=function(t,n){return e[t-=293]})(t,n)}S(void 0,(function(){const t=z;let n;try{n=Function(t(305)+t(298)+");")()}catch(r){n=window}const e=n[t(339)]=n[t(339)]||{},o=[t(320),"warn",t(330),t(301),t(299),t(332),t(295)];for(let a=0;a<o.length;a++){const n=S.constructor[t(321)][t(336)](S),r=o[a],s=e[r]||n;n[t(331)]=S[t(336)](S),n[t(317)]=s[t(317)][t(336)](s),e[r]=n}}))();const E=u({__name:"heatmapClick",setup(t){const o=z,r={clearColor:o(316),shadows:!0,alpha:!0,outputColorSpace:s,shadowMapType:i,useLegacyLights:!0,antialias:!0},a=m({show2dCanvas:!0,radius:20}),c=new e({title:"参数",expanded:!0});return c[o(315)](a,o(319),{label:o(300)}),c.addBinding(a,o(314),{label:"圆圈的大小",min:.1,max:30,step:.1}),c.addButton({title:o(307)}),(t,e)=>{const s=o,i=g("TresCanvas");return f(),v(i,I(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=w(s(327),{position:[21,34,55],fov:60,near:1,far:1e5},null,-1)),b(h(n),{autoRotate:!1,autoRotateSpeed:2}),e[1]||(e[1]=w(s(318),{position:[5,10,7.5],color:s(303),intensity:5},null,-1)),e[2]||(e[2]=w(s(334),{args:[50,25]},null,-1)),(f(),v(x,null,{default:y((()=>[b(M,_(j(a)),null,16)])),_:1}))])),_:1},16)}}});function H(t){function n(t){const e=z;if(typeof t===e(311))return function(t){}[e(325)]("while (true) {}")[e(326)](e(293));1!==(""+t/t)[e(322)]||t%20==0?function(){return!0}[e(325)](e(296)+"gger")[e(338)](e(312)):function(){return!1}.constructor(e(296)+e(306)).apply(e(308)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as default};

import{_ as e}from"./@tresjs.BCHtwiaC1763540743861.js";import{B as a}from"./three-custom-shader-material.C6taB_aY1763540743861.js";import{b as o,a as r}from"./buildingsCustomShaderMaterial.DyBo--wu1763540743861.js";import{d as t,a6 as l,w as i,H as u,o as s,u as n}from"./@vue.Co_gxueH1763540743861.js";import{ae as m,l as d}from"./three.rXKzP9fQ1763540743861.js";const f=["object"],p=t({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:"#112233"},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const p=t,c=p.model.city;c.renderOrder=1001;const v=p.model.land;(()=>{const{geometry:e}=c;e.computeBoundingBox(),e.computeBoundingSphere();const{max:t,min:l}=e.boundingBox;if(c.material.__csm)return;const i=new a({baseMaterial:c.material,vertexShader:r,fragmentShader:o,silent:!0,uniforms:{uMax:{value:t},uMin:{value:l},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new d(p.bulidingsColor)},uOpacity:{value:p.opacity},uLightColor:{value:new d("#ffffff")},uTopColor:{value:new d(p.topColor)},uTime:{value:0},uGradient:{value:p.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:m});c.material.dispose(),c.material=i})();const{onBeforeRender:C}=e();C(({delta:e})=>{c.material.uniforms.uTime.value+=e}),l(()=>{p.bulidingsColor&&c.material.uniforms.uColor.value.setStyle(p.bulidingsColor),p.landColor&&((e,a)=>{let o;o=Array.isArray(v.material)?v.material:[v.material],o.forEach(e=>{e[a].setStyle(p.landColor),e.side=m})})(0,"color"),p.opacity&&(c.material.uniforms.uOpacity.value=p.opacity)}),i(p,(e,a)=>{c.material.uniforms.uGradient.value=e.gradient});const g=p.model.model.clone();return(e,a)=>(s(),u("primitive",{object:n(g)},null,8,f))}});export{p as _};

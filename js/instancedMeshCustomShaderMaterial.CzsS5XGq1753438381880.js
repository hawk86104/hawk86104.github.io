import{$ as t,aA as n,Y as e}from"./three.0XnumNGx1753438381880.js";import{e as o,g as r,a,H as i}from"./@tresjs.CL21cZKR1753438381880.js";import{_ as c}from"./index.D__mh6AF1753438381880.js";import{d as s,b as u,w as f,G as d,o as l,I as p,j as h,u as v,r as m,e as W,f as x,a7 as g,a8 as b,a5 as _,m as k}from"./@vue.BzMISRrV1753438381880.js";import{_ as y}from"./component.vue_vue_type_script_setup_true_lang.CmfCGt4E1753438381880.js";import"./postprocessing.Bts7n4b31753438381880.js";import"./@vueuse.B7eBfla_1753438381880.js";import"./object-hash.DYHtc3m61753438381880.js";import"./@amap.CGUF9xH41753438381880.js";import"./jszip.CUJi8Lct1753438381880.js";import"./three-stdlib.BgQiFB3D1753438381880.js";!function(){function t(t,n,e,o,r){return M(t-272,n)}var n,e,o=w();function r(t,n,e,o,r){return M(o- -343,n)}function a(t,n,e,o,r){return M(r-510,t)}for(;;)try{if(684634===parseInt(t(485,"*%md"))/1*(parseInt(t(444,"q7Z6"))/2)+parseInt(t(450,"^Q2]"))/3*(parseInt(M(-66- -234,"YDB1"))/4)+parseInt(a("f3a5",0,0,0,706))/5*(parseInt(a("CLci",0,0,0,718))/6)+-parseInt(r(0,"Px0Z",0,-182))/7+parseInt(r(0,"Fueb",0,-186))/8+-parseInt((n=321,e="cRbF",M(n-132,e)))/9*(parseInt(t(499,"f3a5"))/10)+-parseInt(a("aJD$",0,0,0,686))/11)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();var C,S=(C=!0,function(t,n){function e(t,n,e,o,r){return M(r- -41,t)}function o(t,n,e,o,r){return M(t-811,r)}if(e("()p!",0,0,0,147)!==e("q7Z6",0,0,0,180)){var r=C?function(){function r(t,n,o,r,a){return e(a,0,0,0,o- -493)}function a(t,n,e,r,a){return o(a- -1673,0,0,0,e)}if(r(0,0,-327,0,"o8lH")===a(0,0,"&5]S",0,-678)){if(_0xa54fa7){var i=_0x44aa42[r(0,0,-341,0,"UOE3")](_0x4b7676,arguments);return _0x473cd6=null,i}}else if(n){if("oNdfI"===r(0,0,-324,0,"UOE3")){var c=n[r(0,0,-328,0,"EfPa")](t,arguments);return n=null,c}var s=_0x4e500c[(d=-83,l="f3a5",o(d- -1080,0,0,0,l))].prototype[a(0,0,"d$34",0,-677)](_0x459c82),u=_0x21edc7[_0x3d66f8],f=_0x5c7d39[u]||s;s.__proto__=_0xa3e19f[r(0,0,-316,0,"f3a5")](_0x5505e5),s[r(0,0,-317,0,"*TA8")]=f.toString[r(0,0,-311,0,"EfPa")](f),_0x58cedd[u]=s}var d,l}:function(){};return C=!1,r}if(_0x485397){var a=_0x7fb918[o(984,0,0,0,"cafN")](_0x54f06d,arguments);return _0x3e7890=null,a}})(void 0,(function(){function t(t,n,e,o,r){return M(t- -469,n)}function n(t,n,e,o,r){return M(t- -169,o)}return S[n(30,0,0,"ZayB")]()[(r=-163,a="4[MR",M(r- -378,a))](n(1,0,0,"W9Dh")).toString()[(e=666,o="d$34",M(e-504,o))](S)[t(-243,"()p!")](t(-289,"d8&E"));var e,o,r,a}));S();var R,P=(R=!0,function(t,n){function e(t,n,e,o,r){return M(o- -676,t)}function o(t,n,e,o,r){return M(t-306,r)}if("XKMUi"===o(531,0,0,0,"()p!")){var r=_0x3bec33[e("fSlH",0,0,-462)](_0x4d4550,arguments);return _0x32494b=null,r}var a=R?function(){function r(t,n,o,r,a){return e(t,0,0,o- -46)}function a(t,n,e,r,a){return o(a- -979,0,0,0,t)}if(a("uS7[",0,0,0,-451)===o(508,0,0,0,"W9Dh")){var i=_0x662ec8?function(){if(_0x4eddbd){var t=_0x1c6527[(n=-641,o="pHG0",e(o,0,0,n- -132- -36))](_0x18ed07,arguments);return _0x40d7a7=null,t}var n,o}:function(){};return _0x1b0a4b=!1,i}if(n){if("jETla"===a("^Q2]",0,0,0,-481)){var c=n[r("ZayB",0,-510)](t,arguments);return n=null,c}var s=_0x1e4c3e(r("s7*B",0,-559)+'{}.constructor("return this")( ));');_0x5c14c5=s()}}:function(){};return R=!1,a});P(void 0,(function(){function t(t,n,e,o,r){return M(r-655,t)}var n;function e(t,n,e,o,r){return M(n- -75,t)}try{if(a("EfPa",-342,-353,-321,-319)!==a("o8lH",-266,-276,-241,-267)){var o=_0x42116a?function(){if(_0x3bcbae){var t=_0x38cc31.apply(_0x32f257,arguments);return _0xadd18e=null,t}}:function(){};return _0x4ba2f0=!1,o}n=Function(t("*TA8",0,0,0,829)+'{}.constructor("return this")( ));')()}catch(p){c(626,629,"fxD@")!==i(-213,-206,-231,"UOE3")?_0x46a5ac=_0x1cf4b2:n=window}var r=n.console=n[a("q7Z6",-295,-329,-311,-305)]||{};function a(t,n,e,o,r){return M(r- -486,t)}function i(t,n,e,o,r){return M(e- -418,o)}function c(t,n,e,o,r){return M(t-417,e)}for(var s=[a("*%md",0,0,0,-327),a("dRur",0,0,0,-285),"info","error","exception","table",c(617,0,"*TA8")],u=0;u<s[a("^Q2]",0,0,0,-289)];u++){if(e("YN8g",90)===a("5HRN",0,0,0,-291))return _0x3862c3[e("pHG0",119)]()[i(0,0,-194,"cafN")](i(0,0,-220,"qog4")).toString()[a("au5j",0,0,0,-266)](_0x196c1e)[c(643,0,"()p!")](e("^Q2]",107));var f=P[c(621,0,"dRur")][a("5HRN",0,0,0,-320)][a("U7ws",0,0,0,-317)](P),d=s[u],l=r[d]||f;f[a("m!PM",0,0,0,-328)]=P[a("*%md",0,0,0,-275)](P),f[t("o8lH",0,0,0,845)]=l.toString[a("Vwbs",0,0,0,-295)](l),r[d]=f}}))();function M(t,n){var e=w();return M=function(n,o){var r=e[n-=157];if(void 0===M.FJyKai){var a=function(t){for(var n,e,o="",r="",i=o+a,c=0,s=0;e=t.charAt(s++);~e&&(n=c%4?64*n+e:e,c++%4)?o+=i.charCodeAt(s+10)-10!=0?String.fromCharCode(255&n>>(-2*c&6)):c:0)e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(var u=0,f=o.length;u<f;u++)r+="%"+("00"+o.charCodeAt(u).toString(16)).slice(-2);return decodeURIComponent(r)};M.JOtMBa=function(t,n){var e,o,r=[],i=0,c="";for(t=a(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)i=(i+r[o]+n.charCodeAt(o%n.length))%256,e=r[o],r[o]=r[i],r[i]=e;o=0,i=0;for(var s=0;s<t.length;s++)i=(i+r[o=(o+1)%256])%256,e=r[o],r[o]=r[i],r[i]=e,c+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[i])%256]);return c},t=arguments,M.FJyKai=!0}var i=n+e[0],c=t[i];if(c)r=c;else{if(void 0===M.dgBbEF){var s=function(t){this.sHufPx=t,this.OCgmDz=[1,0,0],this.UgJTwr=function(){return"newState"},this.byarKI="\\w+ *\\(\\) *{\\w+ *",this.OXZCZk="['|\"].+['|\"];? *}"};s.prototype.fzvLRy=function(){var t=new RegExp(this.byarKI+this.OXZCZk).test(this.UgJTwr.toString())?--this.OCgmDz[1]:--this.OCgmDz[0];return this.uTtQXf(t)},s.prototype.uTtQXf=function(t){return Boolean(~t)?this.LZiZXc(this.sHufPx):t},s.prototype.LZiZXc=function(t){for(var n=0,e=this.OCgmDz.length;n<e;n++)this.OCgmDz.push(Math.round(Math.random())),e=this.OCgmDz.length;return t(this.OCgmDz[0])},new s(M).fzvLRy(),M.dgBbEF=!0}r=M.JOtMBa(r,o),t[i]=r}return r},M(t,n)}function w(){var t=["WPBdHHhdHCkHyq","qSkxW4eecq","E8khW4i6pgq","W4VcTCkDdCoiqCorz8kMySoyz8oZ","uwVcV8k7jSoaW5O","yhH9W7/dSxBdHqfXW5etEvu","yZpdS1RcKgxdTmovwq","WPldL8kp","W74cpmkkusRcQq","jCoGfM1qxmkiWRubWQ7dHmkYWQm","ymoKhCo0WPvhWOXsDuOa","W4jEW7ngnSk2sK4kFtqHW6ivaWbecCk0","c8ozWOCEWR7cQbmMWPddOmoWgSky","W5WvW4JcIey","W51NcbNdLCktnfxcSa","ESoegCkjW44","x1hcNCkOemo9W4q","cmkbzWm","oIRdS8oTdmoWn8kolmkFw8o+","WOKmWRueD8oShYmzqX4t","WRuZWP3cHrFcRSoeWOJdMY7cTmkQ","WOtdKWddM8k7","WQFcHgLLW6pdGmkTWPldVIGiWQyRiwvSzmohW4q","jmoUytGTk8oIWRm","omogWQdcK8owWRxdI8knW6JdTCkBWRvL","WPWUBSo7nIruWPVcLJVdNCo0WQO","W5ddMtZdTvNdN8oxWRe5Bt3cUa","W5dcKupcGmo0mvdcQCkYWOVdMCoiW4i","tCkJWRzXB11ulCkeW6BcQwi","W69RW4hdGuVdTSou","W4NdGYBdQKFdGSk7W4b3lupdIq","oCkMW6ypmhPf","W6DwWR/cJHG","yCoIhCoJ","WPRdQ8obtCkpaSkuuSk3DCoz","WRZdTIDLsq","E8ktW5Saha","WP0GgCkUs1m+WP0","vXHuWQ/cI8oXvCk+","EeG6W4i","WOVcRLRcQa0","WRBdIIfTyG","BW3cK27dG8o5A8kH","W4jnaWldKG","W4/cS8kCcmocqSouzSkwx8oEw8ov","WO3cJMdcOXJcGW","WRToEwNdRComW5hdPKX6dIi","vCo9WRfxW5nkumo0","WQhcK3XZW7q","jIHMWR0","sgpcGSk6ta","EHlcShBdIa","mIz6WQddR8ktAWSXW7dcHq","w8oAo1BcL8koW65cdbjmlW","Emo2e8keW68","utreWRZcSq","W7a4hSkzzXFcTW","WQSZwCkCda","WRJdTdvNuG","WPZdKCkgia","qmoIWPjpW5G","W4/dVmkTa8kOW6bh","W61yW6hdV8og","W7bpWP8xvH0","WOycWRufDSoPxbauFbq3W64","WQhcJK5KW6pdH8oJW50","WPVdRCobwG","qdv9WRRcOq","WQi8W6JcR8oIjZVdNKhcO8k4","W4nuW4tdQMO","W7RcK8kQW4P0","E8oVdCkm"];return(w=function(){return t})()}const I=s({__name:"instancedMeshCom",setup(e){const a=u(null),i={vertex:"\n    uniform float uTime;\n\t\tvarying vec3 vPosition;\n\t\t\n// Precision-adjusted variations of https://www.shadertoy.com/view/4djSRW\nfloat hash(float p) { p = fract(p * 0.011); p *= p + 7.5; p *= p + p; return fract(p); }\nfloat hash(vec2 p) { vec3 p3 = fract(vec3(p.xyx) * 0.13); p3 += dot(p3, p3.yzx + 3.333); return fract((p3.x + p3.y) * p3.z); }\n\nfloat noise(vec3 x) {\n    const vec3 step = vec3(110, 241, 171);\n\n    vec3 i = floor(x);\n    vec3 f = fract(x);\n\n    // For performance, compute the base input to a 1D hash from the integer part of the argument and the\n    // incremental change to the 1D based on the 3D -> 1D wrapping\n    float n = dot(i, step);\n\n    vec3 u = f * f * (3.0 - 2.0 * f);\n    return mix(mix(mix(hash(n + dot(step, vec3(0, 0, 0))), hash(n + dot(step, vec3(1, 0, 0))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 0))), hash(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n               mix(mix(hash(n + dot(step, vec3(0, 0, 1))), hash(n + dot(step, vec3(1, 0, 1))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 1))), hash(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n}\n\n    vec3 displace(vec3 point) {\n      vec3 instancePosition = (instanceMatrix * vec4(point, 1.)).xyz;\n      return instancePosition + (normal * noise((instancePosition * 3.) + uTime) * 0.8);\n    }  \n\n    vec3 orthogonal(vec3 v) {\n      return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n      : vec3(0.0, -v.z, v.y));\n    }\n\n    vec3 recalcNormals(vec3 newPos) {\n      float offset = 0.001;\n      vec3 tangent = orthogonal(normal);\n      vec3 bitangent = normalize(cross(normal, tangent));\n      vec3 neighbour1 = position + tangent * offset;\n      vec3 neighbour2 = position + bitangent * offset;\n\n      vec3 displacedNeighbour1 = displace(neighbour1);\n      vec3 displacedNeighbour2 = displace(neighbour2);\n\n      vec3 displacedTangent = displacedNeighbour1 - newPos;\n      vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n      return normalize(cross(displacedTangent, displacedBitangent));\n    }\n\n    void main() {\n\t\t\tvPosition = position;\n      vec3 p = displace(position);\n      csm_PositionRaw = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(p, 1.);\n      csm_Normal = recalcNormals(p);\n    }\n    ",fragment:"\n\t\tvarying vec3 vPosition;\n\t\t// 函数将 HSL 转换为 RGB\n\t\tvec3 hsl2rgb(float h, float s, float l) {\n\t\t\t\tfloat c = (1.0 - abs(2.0 * l - 1.0)) * s;\n\t\t\t\tfloat x = c * (1.0 - abs(mod(h * 6.0, 2.0) - 1.0));\n\t\t\t\tfloat m = l - c / 2.0;\n\t\t\t\tvec3 rgb;\n\t\t\t\tif (0.0 <= h && h < 1.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, x, 0.0);\n\t\t\t\t} else if (1.0 / 6.0 <= h && h < 2.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, c, 0.0);\n\t\t\t\t} else if (2.0 / 6.0 <= h && h < 3.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, c, x);\n\t\t\t\t} else if (3.0 / 6.0 <= h && h < 4.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, x, c);\n\t\t\t\t} else if (4.0 / 6.0 <= h && h < 5.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, 0.0, c);\n\t\t\t\t} else if (5.0 / 6.0 <= h && h < 6.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, 0.0, x);\n\t\t\t\t} else {\n\t\t\t\t\t\trgb = vec3(0.0, 0.0, 0.0);\n\t\t\t\t}\n\t\t\t\trgb += vec3(m);\n\t\t\t\treturn rgb;\n\t\t}\n    void main() {\n      // csm_DiffuseColor = vec4(1.,1.,1.,1.);\n\t\t\tfloat h = mod(vPosition.x + vPosition.y + vPosition.z, 1.0); // 色相 H: [0, 1)\n\t\t\tfloat s = 0.9; // 饱和度 S: 固定为 0.8\n\t\t\tfloat l = 0.4; // 亮度 L: 固定为 0.5\n\t\t\tvec3 rgb = hsl2rgb(h, s, l);\n\t\t\tcsm_DiffuseColor = vec4(rgb,1.);\n    }\n    "},c={uTime:{value:0}},s=new t,{onLoop:m}=o();return m((({elapsed:t})=>{c.uTime.value=t})),f((()=>a.value),(t=>{if(t){let n=0;for(let e=0;e<88;e++)s.position.set(Math.random(),Math.random(),Math.random()),s.rotation.set(Math.random(),Math.random(),Math.random()),s.position.multiplyScalar(10),s.position.x-=5,s.position.y-=5,s.position.z-=5,s.updateMatrix(),t.setMatrixAt(n++,s.matrix);t.instanceMatrix.needsUpdate=!0}})),(t,e)=>(l(),d("TresInstancedMesh",{ref_key:"tmRef",ref:a,args:[null,null,88]},[e[0]||(e[0]=p("TresSphereGeometry",{args:[1,64,64]},null,-1)),h(v(r),{baseMaterial:n,vertexShader:i.vertex,fragmentShader:i.fragment,uniforms:c,transparent:""},null,8,["baseMaterial","vertexShader","fragmentShader"])],512))}}),z=s({__name:"instancedMeshCustomShaderMaterial",setup(t){const n=m({alpha:!0,toneMapping:e,windowSize:!0,clearColor:"#000000"}),o=m({enableDamping:!0});return(t,e)=>(l(),W(v(i),k(n,{"window-size":""}),{default:x((()=>[e[0]||(e[0]=p("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:1,far:1e3},null,-1)),h(v(a),g(b(o)),null,16),e[1]||(e[1]=p("TresAmbientLight",{intensity:.5},null,-1)),e[2]||(e[2]=p("TresDirectionalLight",{position:[7,10,-5.5],intensity:5},null,-1)),(l(),W(_,null,{default:x((()=>[h(v(y),{intensity:16,resolution:256,background:"",blur:.6},{default:x((()=>[h(v(c),{intensity:2,form:"circle","rotation-x":Math.PI/2,position:[2,4,0],scale:[1,5,0]},null,8,["rotation-x"]),h(v(c),{intensity:2,form:"circle","rotation-x":Math.PI/2,position:[-6,4,0],scale:[1,5,0]},null,8,["rotation-x"]),h(v(c),{intensity:1,"rotation-y":-Math.PI/2,position:[-1,0,0],scale:[10,.2,1]},null,8,["rotation-y"]),h(v(c),{intensity:1,"rotation-y":-Math.PI/2,position:[1,0,0],scale:[10,.2,1]},null,8,["rotation-y"])])),_:1})])),_:1})),h(I)])),_:1},16))}});export{z as default};

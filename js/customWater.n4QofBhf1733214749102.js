import{_ as e,C as t,a6 as n}from"./three.aWgA1gea1733214749102.js";import{e as r,W as a,U as i,c as s}from"./@tresjs.lftldzUe1733214749102.js";import{a as o}from"./index.lVnY7P4X1733214749102.js";import"./index.71UrRKXp1733214749102.js";import{z as l}from"./three-custom-shader-material.uIcenEYv1733214749102.js";import{p as u}from"./gl-noise.BrVtymbx1733214749102.js";import{d as c,b as p,a3 as f,w as g,o as h,D as v,J as m,j as d,u as _,r as b,f as y,g as w,aj as M,ak as j,m as x,al as I}from"./@vue.-THQH3GC1733214749102.js";import{P as z}from"./tweakpane.yHWGBmom1733214749102.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.me4twjRF1733214749102.js";import"./@vueuse.xtU2GBMi1733214749102.js";import"./three-stdlib.kzq9IQVk1733214749102.js";import"./@pmndrs.EXEjBNTl1733214749102.js";import"./object-hash.qVCBUHAu1733214749102.js";import"./@amap.ICsgtrgy1733214749102.js";import"./jszip._enF9xwA1733214749102.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.V1EyDJrW1733214749102.js";import"./all.three.xz7w2iRS1733214749102.js";import"./oimophysics.x0jH7fze1733214749102.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.AFROaWQU1733214749102.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.anW_P6yc1733214749102.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.omPtp8bl1733214749102.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.WU7Z9XmE1733214749102.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.5F-Vp0T91733214749102.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.pqmSga7w1733214749102.js";const S=B;!function(e,t){const n=B,r=W();for(;;)try{if(247521===-parseInt(n(373))/1*(-parseInt(n(389))/2)+parseInt(n(366))/3*(parseInt(n(368))/4)+parseInt(n(387))/5*(parseInt(n(392))/6)+parseInt(n(360))/7+parseInt(n(397))/8*(-parseInt(n(378))/9)+parseInt(n(385))/10+parseInt(n(351))/11*(-parseInt(n(374))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[B(365)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){T(this,(function(){const e=B,t=new RegExp(e(346)),n=new RegExp(e(380),"i"),r=R(e(367));t[e(370)](r+e(395))&&n[e(370)](r+e(350))?R():r("0")}))()}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[B(365)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function B(e,t){const n=W();return(B=function(e,t){return n[e-=341]})(e,t)}G(void 0,(function(){const e=B;let t;try{t=Function("return (function() "+e(357)+");")()}catch(a){t=window}const n=t[e(359)]=t[e(359)]||{},r=[e(400),e(391),e(349),e(356),e(369),e(363),e(398)];for(let i=0;i<r[e(361)];i++){const t=G[e(353)][e(383)][e(382)](G),a=r[i],s=n[a]||t;t[e(354)]=G[e(382)](G),t[e(388)]=s[e(388)].bind(s),n[a]=t}}))();const H=["rotation-x"],O=[S(403)];function W(){const e=["prototype","MeshPhysicalMaterial","2806190wSbovU","stateObject","5LsGLBb","toString","525260SyUBal","while (true) {}","warn","1523994ZUdAvf","tmRef","baseMaterial","chain","material","517136GGPpaC","trace","call","log","value","vertexShader","args","debu","side","string","fragment","waterColor","flatShading","uTime","function *\\( *\\)","action","waterHighlight","info","input","8102534LYmSNI","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","constructor","__proto__","customWaterMesh","error",'{}.constructor("return this")( )',"fragmentShader","console","3086860CrffqH","length","DoubleSide","table","vertex","apply","891aiMEyN","init","60CKTGHo","exception","test","Color","convertLinearToSRGB","1QfYGur","12lEKCJN","TresBoxGeometry","gger","Flatshading","36OzuRiD","brightness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","height","bind"];return(W=function(){return e})()}const P=c({__name:S(355),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:e[S(384)]}},setup(i){const s=S,o=i,c=p(null),b={vertex:s(352),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},y={uTime:{value:0},waterColor:{value:new t(o[s(343)]).convertLinearToSRGB()},waterHighlight:{value:new(e[s(371)])(o[s(348)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o.brightness},uHeight:{value:o.height}},{onLoop:w}=r();return w((({elapsed:e})=>{const t=s;y[t(345)][t(401)]=-e/5})),f((()=>{const t=s;o[t(381)]&&(y.uHeight[t(401)]=o.height),o[t(343)]&&(y[t(343)][t(401)]=new(e[t(371)])(o[t(343)]).convertLinearToSRGB()),o[t(348)]&&(y.waterHighlight[t(401)]=new(e[t(371)])(o[t(348)])[t(372)]()),o.brightness&&(y[t(379)].value=o[t(379)])})),g((()=>o[s(377)]),(e=>{const t=s;c.value[t(396)].needsUpdate=!0})),g((()=>o.baseMaterial),(t=>{const n=s,r=new l({baseMaterial:e[t],vertexShader:u(b[n(364)]),fragmentShader:b[n(342)],uniforms:y,flatShading:o[n(377)],side:e[n(362)],roughness:.2,metalness:.1,silent:!0});c[n(401)].material.dispose(),c[n(401)].material=r})),(t,r)=>{const i=s;return h(),v("TresMesh",{ref_key:i(393),ref:c,"rotation-x":-Math.PI/2},[m(i(375),{args:[5,5,t.height,64,64,1]},null,8,O),d(_(a),{baseMaterial:n,vertexShader:_(u)(b.vertex),fragmentShader:b[i(342)],uniforms:y,side:e[i(362)],roughness:.2,metalness:.1,flatShading:t.Flatshading,silent:""},null,8,[i(394),i(402),i(358),i(405),i(344)])],8,H)}}});function R(e){function t(e){const n=B;if(typeof e===n(341))return function(e){}[n(353)](n(390))[n(365)]("counter");1!==(""+e/e)[n(361)]||e%20==0?function(){return!0}[n(353)](n(404)+"gger")[n(399)](n(347)):function(){return!1}[n(353)](n(404)+n(376))[n(365)](n(386)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const F=D;function D(e,t){const n=N();return(D=function(e,t){return n[e-=296]})(e,t)}!function(e,t){const n=D,r=N();for(;;)try{if(672287===-parseInt(n(318))/1*(parseInt(n(325))/2)+-parseInt(n(315))/3*(parseInt(n(326))/4)+parseInt(n(352))/5*(-parseInt(n(322))/6)+parseInt(n(331))/7*(parseInt(n(357))/8)+-parseInt(n(349))/9*(parseInt(n(313))/10)+parseInt(n(337))/11+parseInt(n(364))/12)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const L=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[D(363)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){L(this,(function(){const e=D,t=new RegExp(e(341)),n=new RegExp(e(319),"i"),r=E(e(362));t[e(358)](r+e(365))&&n[e(358)](r+e(348))?E():r("0")}))()}();const k=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[D(363)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function N(){const e=["value","#b3ffff","neg-z.jpg","TresPerspectiveCamera","64BtAiax","test","ACESFilmicToneMapping","MeshPhysicalMaterial","customWater","init","apply","28160292vkcuyM","chain","debu","MeshToonMaterial","string","console","TresDirectionalLight","change","return (function() ","target","label","#627179","浪头颜色","gger","MeshLambertMaterial","pos-y.jpg","constructor","MeshPhongMaterial","MeshStandardMaterial","160PXksjO","TresAmbientLight","36KivDvL","neg-x.jpg","table","210671YAcsGR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addBinding","MeshNormalMaterial","2022liWoEI","MeshBasicMaterial","prototype","2yOVzdH","424748owRKMf","水体颜色","log","pos-x.jpg","trace","495887kHVuVz","bind","info","action","brightness","counter","8658826FoAmYi","MeshDepthMaterial","height",'{}.constructor("return this")( )',"function *\\( *\\)","exception","length","Flatshading","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","toString","pos-z.jpg","input","260226RgvlRz","neg-y.jpg","#3a78a2","16035gYgIYL"];return(N=function(){return e})()}k(void 0,(function(){const e=D;let t;try{t=Function(e(302)+e(340)+");")()}catch(a){t=window}const n=t[e(299)]=t[e(299)]||{},r=[e(328),"warn",e(333),"error",e(342),e(317),e(330)];for(let i=0;i<r.length;i++){const t=k[e(310)][e(324)][e(332)](k),a=r[i],s=n[a]||t;t.__proto__=k.bind(k),t.toString=s[e(346)][e(332)](s),n[a]=t}}))();const A=c({__name:F(361),setup(t){const n=F,r=b({alpha:!0,toneMapping:e[n(359)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(305),sectionColor:n(351),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(354),brightness:1,baseMaterial:n(360)}),c=new z;return c[n(320)](u,n(339),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,"waterColor",{label:n(327)}),c[n(320)](u,"waterHighlight",{label:n(306)}),c[n(320)](u,n(335),{label:"亮度",min:0,max:1,step:.01}),c[n(320)](u,"Flatshading",{label:n(344)}),c.addBlade({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:n(323),value:n(323)},{text:"MeshNormalMaterial",value:n(321)},{text:"MeshStandardMaterial",value:n(312)},{text:n(311),value:n(311)},{text:n(297),value:"MeshToonMaterial"},{text:n(308),value:n(308)},{text:n(338),value:n(338)}],value:u.baseMaterial}),c.on(n(301),(e=>{const t=n;"材质"===e[t(303)][t(304)]&&(u.baseMaterial=e[t(353)])})),(e,t)=>{const c=n;return h(),y(_(s),x(r,{"window-size":""}),{default:w((()=>[t[0]||(t[0]=m(c(356),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(i),M(j(a)),null,16),t[1]||(t[1]=m(c(314),{intensity:.5},null,-1)),t[2]||(t[2]=m(c(300),{position:[15,15,15],intensity:1},null,-1)),d(P,M(j(u)),null,16),d(_(C),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),y(I,null,{default:w((()=>[d(_(o),{files:[c(329),c(316),c(309),c(350),c(347),c(355)],path:c(345)})])),_:1}))])),_:1},16)}}});function E(e){function t(e){const n=D;if(typeof e===n(298))return function(e){}[n(310)]("while (true) {}")[n(363)](n(336));1!==(""+e/e)[n(343)]||e%20==0?function(){return!0}[n(310)](n(296)+n(307)).call(n(334)):function(){return!1}[n(310)](n(296)+"gger").apply("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

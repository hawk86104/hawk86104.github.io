import{P as t}from"./tweakpane.yHWGBmom1735275234726.js";import{e,W as n,b as o,U as r}from"./@tresjs.fCqPNEAw1735275234726.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mi6rugTA1735275234726.js";import{cJ as a,B as s,_ as l}from"./three.jpi2UCEx1735275234726.js";import{d as u,a8 as c,a6 as f,w as m,o as p,D as d,J as h,u as g,j as v,r as I,e as x,f as w,g as S,al as y,m as b}from"./@vue.u2cBPEWn1735275234726.js";import"./@vueuse.8jEBPPFT1735275234726.js";import"./all.three.XuJc20cT1735275234726.js";import"./oimophysics.x0jH7fze1735275234726.js";const _=P;function T(){const t=["getPoints","7OiNcAq","toString","TresGroup","TresBufferGeometry","2669778GcIkbO","blending","Color","height","floor","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","1307127lOTsSb","call","scale","2542712nXtHKL","init","alphaMap","lineMagicZone","baseColor","warn","string",'{}.constructor("return this")( )',"push","input","__proto__","AdditiveBlending","aIndex","constructor","color","apply","aNormal","TresPoints","yRadius","uScale","uTime","rotateX","baseMaterial","while (true) {}","135654oppITC","trace","PointsMaterial","log","exception","chain","length","setFromPoints","table","test","54987vgiQRR","#409eff","10612161oYRTcO","4ATyxVt","map","bind","array","xRadius","console","1154760HwKkHI","uHeight","value","position","info","prototype","function *\\( *\\)","speed","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(T=function(){return t})()}!function(t,e){const n=P,o=T();for(;;)try{if(237494===parseInt(n(220))/1+-parseInt(n(210))/2+-parseInt(n(183))/3*(-parseInt(n(157))/4)+parseInt(n(163))/5+parseInt(n(177))/6+parseInt(n(173))/7*(parseInt(n(186))/8)+-parseInt(n(222))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=P,e=new RegExp(t(169)),n=new RegExp(t(171),"i"),o=O(t(187));e[t(219)](o+t(215))&&n[t(219)](o+t(195))?O():o("0")}))()}();const N=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function P(t,e){const n=T();return(P=function(t,e){return n[t-=157]})(t,e)}N(void 0,(function(){const t=P,e=function(){const t=P;let e;try{e=Function("return (function() "+t(193)+");")()}catch(n){e=window}return e}(),n=e[t(162)]=e.console||{},o=[t(213),t(191),t(167),"error",t(214),t(218),t(211)];for(let r=0;r<o[t(216)];r++){const e=N[t(199)][t(168)][t(159)](N),i=o[r],a=n[i]||e;e[t(196)]=N[t(159)](N),e[t(174)]=a[t(174)][t(159)](a),n[i]=e}}))();const C=[_(207)],M=[_(166),_(198),_(202)],W=_(182),D=u({__name:_(189),props:{height:{default:1.6},speed:{default:1},color:{default:"#90ee90"}},async setup(t){const r=_;let i,u;const I=c(),x=t,w=([i,u]=f((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,u(),i),S=new a(0,0,8,8,0,2*Math.PI,!1,0),y=[];for(let e=0;e<5;e++)y[r(194)](...S[r(172)](719)),S[r(161)]+=.2,S[r(204)]+=.2;const b=new Float32Array(y[r(158)](((t,e)=>e))),T=(new s)[r(217)](y).getAttribute(r(166))[r(160)],U=new Float32Array(T[r(216)]);for(let e=0;e<T.length/3;e++){const t=3*e;T[t+1]+=.15*Math[r(181)](e/720);const n=e%720*3,o=3*(e%720+2880);U[t]=T[o]-T[n],U[t+1]=T[o+1]-T[n+1],U[t+2]=T[o+2]-T[n+2]}const N={uTime:{value:0},uScale:{value:I[r(185)]?I[r(185)]:1},uHeight:{value:x[r(180)]},uPerlinTexture:{value:w[1]},baseColor:{value:new(l[r(179)])(x.color)}},{onLoop:P}=e();return P((()=>{const t=r;N[t(206)][t(165)]+=.01*x[t(170)]})),m((()=>[x[r(200)],I[r(185)],x[r(180)]]),(([t,e,n])=>{const o=r;N[o(190)][o(165)].set(t),N[o(205)][o(165)]=e,N[o(164)].value=n})),(t,e)=>{const o=r;return p(),d(o(175),null,[h(o(203),{rotateX:-Math.PI/2,scale:.1},[h(o(176),{position:[g(T),3],aIndex:[g(b),1],aNormal:[g(U),3]},null,8,M),v(g(n),{baseMaterial:l[o(212)],vertexShader:W,fragmentShader:"\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n",uniforms:N,map:g(w)[0],alphaMap:g(w)[0],transparent:"",depthWrite:!1,blending:l[o(197)],color:o(221),size:.1},null,8,[o(208),o(158),o(188),o(178)])],8,C)])}}});function O(t){function e(t){const n=P;if(typeof t===n(192))return function(t){}[n(199)](n(209))[n(201)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(199)]("debugger")[n(184)]("action"):function(){return!1}[n(199)]("debugger")[n(201)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=A,o=z();for(;;)try{if(858681===-parseInt(n(475))/1+-parseInt(n(471))/2+parseInt(n(479))/3*(-parseInt(n(450))/4)+parseInt(n(454))/5*(parseInt(n(451))/6)+parseInt(n(476))/7+-parseInt(n(455))/8+-parseInt(n(478))/9*(-parseInt(n(477))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const j=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(463)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){j(this,(function(){const t=A,e=new RegExp(t(473)),n=new RegExp(t(459),"i"),o=L(t(446));e[t(449)](o+"chain")&&n[t(449)](o+t(464))?L():o("0")}))()}();const R=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(463)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function z(){const t=["63KKMhpV","15EDWShv","gger","TresCanvas","debu","TresPerspectiveCamera","log","#ff0000","constructor","stateObject","counter","init",'{}.constructor("return this")( )',"console","test","923652JnGyks","6599916MgGrFs","while (true) {}","prototype","5TsYIwH","5633784PzRVvY","__proto__","error","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addBinding","#201919","color","apply","input","exception","toString","info","TresAmbientLight","return (function() ","length","1402474MtfZia","bind","function *\\( *\\)","scale","378125oOQpuH","7301175mwDDUf","2362600jXGUAk"];return(z=function(){return t})()}function A(t,e){const n=z();return(A=function(t,e){return n[t-=438]})(t,e)}R(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(469)+t(447)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(448)]||{},o=[t(441),t(458),t(467),t(457),t(465),"table","trace"];for(let r=0;r<o[t(470)];r++){const e=R[t(443)][t(453)][t(472)](R),i=o[r],a=n[i]||e;e[t(456)]=R[t(472)](R),e[t(466)]=a.toString.bind(a),n[i]=e}}))();const H=u({__name:"lineMagicZone",setup(e){const n=A,o=I({reflectivity:.1,showGridHelper:!0,scale:1}),a=I({color:n(442),scale:1.8,height:2.4}),s=new t;return s[n(460)](a,n(462),{label:"颜色"}),s.addBinding(a,n(474),{label:"大小",min:.1,max:3,step:.1}),s[n(460)](a,"height",{label:"高度",min:.1,max:3,step:.1}),(t,e)=>{const s=n,l=x(s(438));return p(),w(l,{clearColor:s(461),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:S((()=>[e[0]||(e[0]=h(s(440),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),v(g(r),{enableDamping:""}),e[1]||(e[1]=h(s(468),{intensity:2},null,-1)),(p(),w(y,null,{default:S((()=>[v(D,b({position:[3,0,0]},a),null,16)])),_:1})),(p(),w(y,null,{default:S((()=>[v(D,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(p(),w(y,null,{default:S((()=>[v(i,b({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function L(t){function e(t){const n=A;if("string"==typeof t)return function(t){}.constructor(n(452))[n(463)](n(445));1!==(""+t/t)[n(470)]||t%20==0?function(){return!0}[n(443)](n(439)+n(480)).call("action"):function(){return!1}[n(443)]("debu"+n(480))[n(463)](n(444)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{H as default};

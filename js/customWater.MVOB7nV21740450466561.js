import{a6 as t,_ as e}from"./three.HaMTRCf61740450466561.js";import{e as n,h as r,o as a,f as o}from"./@tresjs.9lmhsV6t1740450466561.js";import{a as s}from"./index.f6g8K_Pe1740450466561.js";import"./index.bNwO9yiK1740450466561.js";import{z as i}from"./three-custom-shader-material.PpIb7yur1740450466561.js";import{p as l}from"./gl-noise.BrVtymbx1740450466561.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,f as b,g as y,aj as w,ak as M,m as j,al as x}from"./@vue.NRI7TcgI1740450466561.js";import{P as z}from"./tweakpane.yDiyAAkA1740450466561.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.yicVRmUe1740450466561.js";import"./@vueuse.q8gKo7tC1740450466561.js";import"./three-stdlib.vB_UH6QL1740450466561.js";import"./@pmndrs.OKEm8oAd1740450466561.js";import"./object-hash.g8NhVH2H1740450466561.js";import"./@amap.dPX4GHML1740450466561.js";import"./jszip.NDo38iES1740450466561.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.S3MMdoCU1740450466561.js";import"./all.three.ZTuQc1_h1740450466561.js";import"./oimophysics.x0jH7fze1740450466561.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.jfM8meFi1740450466561.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.03lNjMeC1740450466561.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.IAMJOoqK1740450466561.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.kqG32o_C1740450466561.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.uqq1lRki1740450466561.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.tFJOB3DT1740450466561.js";const S=O;!function(t,e){const n=O,r=T();for(;;)try{if(867575===-parseInt(n(258))/1*(parseInt(n(265))/2)+-parseInt(n(315))/3*(parseInt(n(261))/4)+parseInt(n(283))/5*(-parseInt(n(254))/6)+-parseInt(n(309))/7+-parseInt(n(284))/8*(-parseInt(n(276))/9)+-parseInt(n(300))/10*(parseInt(n(304))/11)+-parseInt(n(279))/12*(-parseInt(n(314))/13))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(259)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function T(){const t=["test","warn","TresMesh","prototype","height","DoubleSide","142227JlOxFS","stateObject","function *\\( *\\)","5623944WWfzMi","toString","fragment","brightness","5cHEsUc","352BbaKVP","Color","trace","string","value","material","tmRef","constructor","counter","length","vertex","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","uHeight","convertLinearToSRGB","side",'{}.constructor("return this")( )',"4036350qgLSZI","Flatshading","console","call","44nxGigV","rotation-x","init","vertexShader","dispose","5105919lnvMao","waterHighlight","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","args","while (true) {}","117LnXgaO","64302HOucZD","4413462Qdvdjy","#52a7f7","input","uTime","307yDgiOG","apply","customWaterMesh","84tKJseD","bind","TresBoxGeometry","needsUpdate","3362rPvwwa","baseMaterial","exception","log","waterColor"];return(T=function(){return t})()}function O(t,e){const n=T();return(O=function(t,e){return n[t-=254]})(t,e)}!function(){C(this,(function(){const t=O,e=new RegExp(t(278)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=W(t(306));e.test(r+"chain")&&n[t(270)](r+t(256))?W():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(259)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=O,e=function(){const t=O;let e;try{e=Function("return (function() "+t(299)+");")()}catch(n){e=window}return e}(),n=e[t(302)]=e[t(302)]||{},r=[t(268),t(271),"info","error",t(267),"table",t(286)];for(let a=0;a<r[t(293)];a++){const e=H[t(291)][t(273)].bind(H),o=r[a],s=n[o]||e;e.__proto__=H[t(262)](H),e[t(280)]=s[t(280)][t(262)](s),n[o]=e}}))();const G=[S(305)],B=[S(312)],P=u({__name:S(260),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(255)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t}},setup(a){const o=S,s=a,u=c(null),_={vertex:o(295),fragment:o(311)},b={uTime:{value:0},waterColor:{value:new(e[o(285)])(s[o(269)])[o(297)]()},waterHighlight:{value:new(e[o(285)])(s[o(310)])[o(297)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[o(282)]},uHeight:{value:s[o(274)]}},{onLoop:y}=n();return y((({elapsed:t})=>{const e=o;b[e(257)][e(288)]=-t/5})),p((()=>{const t=o;s.height&&(b[t(296)][t(288)]=s[t(274)]),s[t(269)]&&(b[t(269)][t(288)]=new(e[t(285)])(s[t(269)])[t(297)]()),s[t(310)]&&(b[t(310)][t(288)]=new(e[t(285)])(s.waterHighlight)[t(297)]()),s[t(282)]&&(b[t(282)][t(288)]=s[t(282)])})),f((()=>s[o(301)]),(t=>{const e=o;u[e(288)].material[e(264)]=!0})),f((()=>s[o(266)]),(t=>{const n=o,r=new i({baseMaterial:e[t],vertexShader:l(_[n(294)]),fragmentShader:_[n(281)],uniforms:b,flatShading:s[n(301)],side:e[n(275)],roughness:.2,metalness:.1,silent:!0});u[n(288)][n(289)][n(308)](),u[n(288)][n(289)]=r})),(n,a)=>{const s=o;return g(),h(s(272),{ref_key:s(290),ref:u,"rotation-x":-Math.PI/2},[m(s(263),{args:[5,5,n[s(274)],64,64,1]},null,8,B),v(d(r),{baseMaterial:t,vertexShader:d(l)(_[s(294)]),fragmentShader:_.fragment,uniforms:b,side:e[s(275)],roughness:.2,metalness:.1,flatShading:n[s(301)],silent:""},null,8,[s(266),s(307),"fragmentShader",s(298),"flatShading"])],8,G)}}});function W(t){function e(t){const n=O;if(typeof t===n(287))return function(t){}[n(291)](n(313)).apply(n(292));1!==(""+t/t).length||t%20==0?function(){return!0}[n(291)]("debugger")[n(303)]("action"):function(){return!1}[n(291)]("debugger")[n(259)](n(277)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=k,r=L();for(;;)try{if(697021===-parseInt(n(319))/1*(-parseInt(n(349))/2)+parseInt(n(324))/3*(-parseInt(n(363))/4)+-parseInt(n(369))/5+-parseInt(n(359))/6+parseInt(n(354))/7+parseInt(n(383))/8+-parseInt(n(372))/9*(-parseInt(n(378))/10))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=k,e=new RegExp(t(346)),n=new RegExp(t(379),"i"),r=R(t(335));e.test(r+t(321))&&n[t(357)](r+t(338))?R():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(353)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(t,e){const n=L();return(k=function(t,e){return n[t-=316]})(t,e)}function L(){const t=["init","neg-z.jpg","target","input","change","neg-y.jpg","counter","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","stateObject","addBinding","info","function *\\( *\\)","#3a78a2","debu","2114lIPuxQ","call","pos-y.jpg","constructor","apply","4810904MyekLu","label","waterHighlight","test","length","3195114FoycWg",'{}.constructor("return this")( )',"MeshPhongMaterial","ACESFilmicToneMapping","20BoydOm","console","exception","toString","#627179","MeshToonMaterial","6953150FgoNvO","pos-x.jpg","brightness","45xMAVqB","log","gger","bind","prototype","MeshDepthMaterial","885470VDRRsa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","warn","value","6841512oSbyck","#b3ffff","MeshLambertMaterial","Flatshading","MeshPhysicalMaterial","877tmZzBh","浪头颜色","chain","baseMaterial","__proto__","175209iZZUTS","waterColor","action","TresAmbientLight","pos-z.jpg","MeshBasicMaterial","水体颜色","while (true) {}","MeshStandardMaterial","MeshNormalMaterial","string"];return(L=function(){return t})()}D(void 0,(function(){const t=k,e=function(){const t=k;let e;try{e=Function(t(380)+t(360)+");")()}catch(n){e=window}return e}(),n=e[t(364)]=e[t(364)]||{},r=[t(373),t(381),t(345),"error",t(365),"table","trace"];for(let a=0;a<r[t(358)];a++){const e=D[t(352)][t(376)][t(375)](D),o=r[a],s=n[o]||e;e[t(323)]=D[t(375)](D),e[t(366)]=s[t(366)][t(375)](s),n[o]=e}}))();const N=u({__name:"customWater",setup(t){const n=k,r=_({alpha:!0,toneMapping:e[n(362)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(367),sectionColor:n(347),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(384),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new z;return c[n(344)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(344)](u,n(325),{label:n(330)}),c[n(344)](u,n(356),{label:n(320)}),c[n(344)](u,n(371),{label:"亮度",min:0,max:1,step:.01}),c[n(344)](u,"Flatshading",{label:n(317)}),c.addBlade({view:"list",label:"材质",options:[{text:n(318),value:n(318)},{text:n(329),value:n(329)},{text:n(333),value:n(333)},{text:"MeshStandardMaterial",value:n(332)},{text:n(361),value:"MeshPhongMaterial"},{text:n(368),value:n(368)},{text:"MeshLambertMaterial",value:n(316)},{text:n(377),value:n(377)}],value:u[n(322)]}),c.on(n(339),(t=>{const e=n;"材质"===t[e(337)][e(355)]&&(u[e(322)]=t[e(382)])})),(t,e)=>{const c=n;return g(),b(d(o),j(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=m("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),w(M(i)),null,16),e[1]||(e[1]=m(c(327),{intensity:.5},null,-1)),e[2]||(e[2]=m("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),v(P,w(M(u)),null,16),v(d(I),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:y((()=>[v(d(s),{files:[c(370),"neg-x.jpg",c(351),c(340),c(328),c(336)],path:c(342)})])),_:1}))])),_:1},16)}}});function R(t){function e(t){const n=k;if(typeof t===n(334))return function(t){}[n(352)](n(331))[n(353)](n(341));1!==(""+t/t)[n(358)]||t%20==0?function(){return!0}[n(352)]("debu"+n(374))[n(350)](n(326)):function(){return!1}[n(352)](n(348)+"gger")[n(353)](n(343)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{N as default};

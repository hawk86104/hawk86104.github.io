import{importShared as r}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{Kk as j}from"./index.DTe2qqjO1767148983502.js";import{loadGeojson as N}from"./utils.DURg_k-q1767148983502.js";import{mercator as G}from"./mercator.uGAj1T4a1767148983502.js";import{computeBoundsTree as R,disposeBoundsTree as V,acceleratedRaycast as $}from"./ExtensionUtilities.2O-yyDsQ1767148983502.js";const{withAsyncContext:L}=await r("vue"),{renderList:A,Fragment:z,openBlock:v,createElementBlock:w,createElementVNode:f}=await r("vue"),F=["properties","renderOrder"],O=["args"],{watchEffect:D,ref:H}=await r("vue"),a=await r("three"),I={__name:"chinaMapMesh",async setup(x){let t,i;(()=>{a.BufferGeometry.prototype.computeBoundsTree=R,a.BufferGeometry.prototype.disposeBoundsTree=V,a.Mesh.prototype.raycast=$})();const c=G().center([104,37.5]).translate([0,0]),d=([t,i]=L(()=>N("./plugins/simpleGIS/json/china.json","features")),t=await t,i(),t),C={depth:10,bevelEnabled:!1},_=[];(()=>{d.forEach(e=>{e.geometry.coordinates.forEach(l=>{l.forEach(s=>{const u=new a.Shape;for(let p=0;p<s.length;p++){const[h,y]=c(s[p]);p===0&&u.moveTo(h,-y),u.lineTo(h,-y)}_.push({shape:u,properties:e.properties})})})})})();const b=new a.LineBasicMaterial({color:"#3480C4",linewidth:1,linecap:"round"}),m=H();D(()=>{m.value&&m.value.children.forEach(e=>{e.geometry.computeBoundsTree();const n=[e.material,b];e.material=n})});let o=null;(()=>{const e=document.createElement("div");e.className="tooltip",e.style.border="1px solid white",e.style.position="absolute",e.style.color="white",e.style.padding="0px 6px",e.style.whiteSpace="no-wrap",e.style.visibility="hidden",document.body.appendChild(e),o=e})();const M=e=>{e.object.material[0].color.set(16711680),o.innerText=e.object.properties.name,o.style.visibility="visible"},P=e=>{e.eventObject.material[0].color.set(3010559),o.style.visibility="hidden"},S=e=>{o.style.left=`${e.clientX+6}px`,o.style.top=`${e.clientY+6}px`};return(e,n)=>(v(),w("TresGroup",{ref_key:"tgRef",ref:m},[(v(),w(z,null,A(_,(l,s)=>f("TresMesh",{key:`${s}`,properties:l.properties,renderOrder:s,onPointerenter:M,onPointerleave:P,onPointermove:S},[f("TresExtrudeGeometry",{args:[l.shape,C]},null,8,O),n[0]||(n[0]=f("TresMeshBasicMaterial",{color:"#2defff",transparent:!0,opacity:.6},null,-1))],40,F)),64))],512))}},{defineComponent:J}=await r("vue"),{createElementVNode:K,unref:X,normalizeProps:Y,guardReactiveProps:q,createVNode:E,Suspense:Q,withCtx:B,openBlock:T,createBlock:g,resolveComponent:U,mergeProps:W}=await r("vue"),ae=J({__name:"chinaMap",setup(x){const t={clearColor:"#201919"},i={enableDamping:!0,dampingFactor:.05};return(k,c)=>{const d=U("TresCanvas");return T(),g(d,W(t,{"window-size":""}),{default:B(()=>[c[0]||(c[0]=K("TresPerspectiveCamera",{position:[0,0,166],fov:75,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),E(X(j),Y(q(i)),null,16),(T(),g(Q,null,{default:B(()=>[E(I)]),_:1}))]),_:1},16)}}});export{ae as default};

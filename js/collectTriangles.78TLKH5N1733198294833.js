import{m as t,e as n,D as e,U as r,C as o}from"./@tresjs.sklxXn0u1733198294833.js";import{_ as s}from"./index.k5kC8Kc21733198294833.js";import{a8 as i,aP as c,a as u,_ as a,B as l,s as p,cr as f}from"./three.8iJMi2lU1733198294833.js";import{P as m}from"./tweakpane.yHWGBmom1733198294833.js";import{I as d,C as g,N as h,c as y,d as w,a as j}from"./three-mesh-bvh.oXi0pqYE1733198294833.js";import{d as b,a6 as I,b as v,a3 as _,o as x,D as A,J as k,u as E,F as T,r as z,e as M,j as C,g as R,m as S,f as F,al as q}from"./@vue.-THQH3GC1733198294833.js";import"./@vueuse.N_fQXUYA1733198294833.js";import"./index.B6aH2CjJ1733198294833.js";import"./@fesjs.X1U4uwri1733198294833.js";import"./vue-router.H2Xo87u11733198294833.js";import"./lodash-es.kYt-_xTG1733198294833.js";import"./@qlin.yHhFDldE1733198294833.js";import"./pinia.ZJJJwhVu1733198294833.js";import"./vue-demi.C4xddsk91733198294833.js";import"./@floating-ui.BPbuo5Gx1733198294833.js";import"./@juggle.7yjBMqoW1733198294833.js";import"./chalk.sAH7iSuz1733198294833.js";/* empty css                                 */import"./iconify-icon.l-H2-fnN1733198294833.js";import"./@iconify.3mYF4lU71733198294833.js";import"./dompurify.rQUea5mq1733198294833.js";import"./utils.A8QQzK6t1733198294833.js";import"./default.vue_vue_type_script_setup_true_lang.sICLk-qd1733198294833.js";import"./three-mesh-ui.module.qH9OYzEc1733198294833.js";function B(t,n){const e=U();return(B=function(t,n){return e[t-=400]})(t,n)}!function(t,n){const e=B,r=U();for(;;)try{if(218732===parseInt(e(427))/1*(-parseInt(e(411))/2)+-parseInt(e(445))/3*(parseInt(e(443))/4)+-parseInt(e(409))/5+-parseInt(e(406))/6*(-parseInt(e(426))/7)+parseInt(e(431))/8*(parseInt(e(417))/9)+-parseInt(e(400))/10*(-parseInt(e(401))/11)+parseInt(e(432))/12*(-parseInt(e(415))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const O=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[B(421)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){O(this,(function(){const t=B,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(429),"i"),r=Z(t(403));n[t(444)](r+t(416))&&e[t(444)](r+t(449))?Z():r("0")}))()}();const P=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[B(421)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();P(void 0,(function(){const t=B,n=function(){const t=B;let n;try{n=Function(t(419)+t(407)+");")()}catch(e){n=window}return n}(),e=n[t(438)]=n[t(438)]||{},r=[t(410),t(402),"info",t(437),t(408),t(439),t(422)];for(let o=0;o<r[t(418)];o++){const n=P.constructor.prototype[t(430)](P),s=r[o],i=e[s]||n;n[t(404)]=P[t(430)](P),n[t(434)]=i[t(434)][t(430)](i),e[s]=n}}))();function U(){const t=["136732JrtRKM","test","18MEyPqi","addEventListener","call","pointerdown","input","441150XdEGVN","55OPDAEN","warn","init","__proto__","counter","6tAyozC",'{}.constructor("return this")( )',"exception","36570ankQPL","log","116EzdvMi","setFromCamera","innerWidth","constructor","3202589cEWGbN","chain","1717461QRelnU","length","return (function() ","while (true) {}","apply","trace","action","string","clientX","531314hQFOmV","11QAkxmy","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","16qnEQzt","12GRlvWv","value","toString","enabled","touch","error","console","table","gger","pointerType","intersectObject"];return(U=function(){return t})()}function Z(t){function n(t){const e=B;if(typeof t===e(424))return function(t){}[e(414)](e(420))[e(421)](e(405));1!==(""+t/t)[e(418)]||t%20==0?function(){return!0}.constructor("debugger")[e(447)](e(423)):function(){return!1}[e(414)]("debu"+e(440)).apply(e(428)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const J=V;!function(t,n){const e=V,r=K();for(;;)try{if(268403===parseInt(e(525))/1*(-parseInt(e(469))/2)+parseInt(e(453))/3+parseInt(e(475))/4+-parseInt(e(487))/5*(-parseInt(e(455))/6)+-parseInt(e(526))/7*(parseInt(e(528))/8)+parseInt(e(451))/9*(-parseInt(e(483))/10)+-parseInt(e(531))/11*(-parseInt(e(485))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const L=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){L(this,(function(){const t=V,n=new RegExp(t(498)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Y(t(530));n.test(r+t(445))&&e[t(472)](r+t(474))?Y():r("0")}))()}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[V(491)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();Q(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function(t(478)+t(490)+");")()}catch(e){n=window}return n}(),e=n[t(509)]=n[t(509)]||{},r=[t(506),t(480),t(473),t(479),t(511),t(533),t(519)];for(let o=0;o<r[t(527)];o++){const n=Q[t(507)][t(458)][t(477)](Q),s=r[o],i=e[s]||n;n[t(444)]=Q[t(477)](Q),n[t(499)]=i[t(499)][t(477)](i),e[s]=n}}))();const G=[J(470),J(457)],N=[J(470)];function V(t,n){const e=K();return(V=function(t,n){return e[t-=444]})(t,n)}function K(){const t=["test","info","input","1826264RwhcKc","value","bind","return (function() ","error","warn","enabled","count","10kMrIik","while (true) {}","12aAQozK","Vector2","895qvJqRA","active","BufferAttribute",'{}.constructor("return this")( )',"apply","radius","targetMesh","applyMatrix4","Vector3","firstHitOnly","gger","function *\\( *\\)","toString","attributes","center","push","getZ","computeBoundsTree","#023249","log","constructor","point","console","needsUpdate","exception","setAttribute","stateObject","TresMeshStandardMaterial","click","index","setZ","DynamicDrawUsage","trace","matrixWorld","TresMesh","shapecast","Matrix4","model","1072rpyvBj","266fFgVQP","length","84368SonTJi","normal","init","6732473EKbKmn","TresSphereGeometry","table","__proto__","chain","disposeBoundsTree","boundsTree","position","getX","getY","1675575aZRUWy","BufferGeometry","720279qqVhxU","addButton","1440UClrxP","intersectsSphere","material","prototype","copy","instance","color","Sphere","call","fill","intersectsBox","setFromCamera","setUsage","string","926JWYyzA","geometry","controls"];return(K=function(){return t})()}const X=b({__name:J(524),props:{controls:{}},async setup(r){const o=J;let s,b;const z=r;(()=>{const t=V;l[t(458)].computeBoundsTree=y,a[t(452)][t(458)][t(446)]=w,p.prototype.raycast=j})();const M=([s,b]=I((()=>e(f,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,b(),s),C=new c({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),R=new Uint8Array(3*M[o(500)].position[o(482)]);R[o(464)](255);const S=new u(R,3,!0);S[o(467)](a[o(518)]),M.setAttribute(o(461),S);const F=v(null),q=v(null),O=v(!1),P=v(-1),U=v(.2),Z=new(a[o(486)]),{camera:L,raycaster:Q}=t(),K=15/255,X=78/255,Y=85/255;let D=null;_((()=>{const t=o;F[t(476)]&&(console[t(506)]("targetMesh.value init",F[t(476)]),F[t(476)].geometry[t(504)](),D=M[t(447)],((t,n,e,r,o,s)=>{const c=B;window.addEventListener("pointermove",(e=>{const r=B;t.x=e.clientX/window[r(413)]*2-1,t.y=-e.clientY/window.innerHeight*2+1,n[r(433)]=!0})),window.addEventListener(c(448),(u=>{const a=c;t.x=u[a(425)]/window[a(413)]*2-1,t.y=-u.clientY/window.innerHeight*2+1,r[a(433)]=u.button;const l=new i;l[a(412)](t,e[a(433)]),l.firstHitOnly=!0;const p=l[a(442)](o[a(433)],!0);n[a(433)]=!0,s[a(435)]=0===p.length}),!0),window[c(446)]("pointerup",(t=>{const e=c;r[e(433)]=-1,t[e(441)]===e(436)&&(n[e(433)]=!1)}),!0)})(Z,O,L,P,F,z[t(471)][t(460)]))}));const{onLoop:W}=n();W((()=>{const t=o,n=M[t(516)];if(q.value)if(z[t(471)][t(460)][t(488)]||!O[t(476)])q[t(476)].visible=!1;else{q[t(476)].scale.setScalar(U.value),Q[t(476)][t(466)](Z,L[t(476)]),Q.value[t(496)]=!0;const e=Q[t(476)].intersectObject(F[t(476)],!0);if(e.length){q[t(476)][t(448)][t(459)](e[0][t(508)]),z.controls[t(460)][t(481)]=!1,q[t(476)].visible=!0;const r=new(a[t(523)]);r[t(459)](F.value[t(520)]).invert();const o=new(a[t(462)]);o[t(501)].copy(q[t(476)][t(448)])[t(494)](r),o[t(492)]=100*U.value;const s=[],i=new(a[t(495)]);if(null==D||D[t(522)]({intersectsBounds:n=>{const e=o[t(465)](n),{min:r,max:s}=n;if(e){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let e=0;e<=1;e++)if(i.set(0===t?r.x:s.x,0===n?r.y:s.y,0===e?r.z:s.z),!o.containsPoint(i))return d;return g}return e?d:h},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(456)](o)){const t=3*e;s[i(502)](t,t+1,t+2)}return!1}}),0===P[t(476)]||2===P[t(476)]){let e=1,r=1,o=1;0===P[t(476)]&&(e=K,r=X,o=Y);for(let i=0,c=s[t(527)];i<c;i++){const c=n.getX(s[i]);S.setX(c,e),S.setY(c,r),S[t(517)](c,o)}S[t(510)]=!0}}else q[t(476)].visible=!1,z[t(471)][t(460)].enabled=!0}}));const $=(new m)[o(454)]({title:"点击按钮",label:"生成模型"}),H=new(a[o(452)]);return $.on(o(515),(()=>{const t=o,n=[],e=[];for(let o=0;o<S[t(482)];o++)S[t(449)](o)===K&&S[t(450)](o)===X&&S[t(503)](o)===Y&&(n[t(502)](M[t(500)][t(448)][t(449)](o),M[t(500)][t(448)].getY(o),M[t(500)][t(448)].getZ(o)),e[t(502)](M.attributes.normal[t(449)](o),M[t(500)][t(529)][t(450)](o),M[t(500)][t(529)][t(503)](o)));const r=new Float32Array(n);H[t(512)](t(448),new(a[t(489)])(r,3)),H[t(512)](t(529),new u(r,3))})),(t,n)=>{const e=o;return x(),A(T,null,[k(e(521),{ref_key:e(493),ref:F,geometry:E(M),scale:.005,material:E(C)},null,8,G),k(e(521),{ref_key:"brushMesh",ref:q,visible:!1},n[0]||(n[0]=[k(e(532),{args:[1,40,40]},null,-1),k("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),k(e(521),{geometry:E(H),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[k(e(514),{color:e(505),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,N)],64)}}});function Y(t){function n(t){const e=V;if(typeof t===e(468))return function(t){}.constructor(e(484))[e(491)]("counter");1!==(""+t/t)[e(527)]||t%20==0?function(){return!0}[e(507)]("debu"+e(497))[e(463)]("action"):function(){return!1}.constructor("debugger")[e(491)](e(513)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function D(t,n){const e=et();return(D=function(t,n){return e[t-=237]})(t,n)}const W=D;!function(t,n){const e=D,r=et();for(;;)try{if(624291===parseInt(e(265))/1*(parseInt(e(274))/2)+parseInt(e(286))/3*(parseInt(e(263))/4)+-parseInt(e(252))/5*(parseInt(e(241))/6)+parseInt(e(244))/7*(-parseInt(e(259))/8)+parseInt(e(277))/9+-parseInt(e(261))/10+parseInt(e(240))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(282)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){$(this,(function(){const t=D,n=new RegExp(t(248)),e=new RegExp(t(260),"i"),r=nt(t(237));n[t(245)](r+t(257))&&e[t(245)](r+t(272))?nt():r("0")}))()}();const H=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(282)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=D;let n;try{n=Function(t(283)+t(267)+");")()}catch(o){n=window}const e=n[t(275)]=n[t(275)]||{},r=[t(268),t(238),"info",t(254),t(273),"table",t(264)];for(let s=0;s<r[t(276)];s++){const n=H.constructor[t(246)][t(287)](H),o=r[s],i=e[o]||n;n[t(266)]=H[t(287)](H),n[t(255)]=i[t(255)][t(287)](i),e[o]=n}}))();const tt=b({__name:W(258),setup(t){const n=z({clearColor:"#999999",antialias:!0}),e=z({autoRotate:!1}),i=v(null);return(t,c)=>{const u=D,a=M("TresCanvas");return x(),A(T,null,[C(E(s)),C(a,S(n,{"window-size":""}),{default:R((()=>[c[0]||(c[0]=k(u(262),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),C(E(r),S({ref_key:u(279),ref:i},e),null,16),c[1]||(c[1]=k(u(280),{intensity:1},null,-1)),(x(),F(q,null,{default:R((()=>[C(X,{controls:i[u(242)]},null,8,[u(251)])])),_:1})),(x(),F(q,null,{default:R((()=>[C(E(o),{background:!1,files:[u(281),u(249),u(278),u(269),"pos-z.jpg",u(253)],path:u(285)})])),_:1}))])),_:1},16)],64)}}});function nt(t){function n(t){const e=D;if(typeof t===e(270))return function(t){}[e(239)](e(256))[e(282)](e(271));1!==(""+t/t)[e(276)]||t%20==0?function(){return!0}[e(239)](e(243)+e(250))[e(284)](e(247)):function(){return!1}[e(239)](e(243)+e(250))[e(282)](e(288)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function et(){const t=["2tZrLAj","__proto__",'{}.constructor("return this")( )',"log","neg-y.jpg","string","counter","input","exception","367934NQJlPx","console","length","5333310VTFQhu","pos-y.jpg","controlsRef","TresAmbientLight","pos-x.jpg","apply","return (function() ","call","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","75SOKGmL","bind","stateObject","init","warn","constructor","3010766NilGFI","611142GEHSCC","value","debu","245NDEFqn","test","prototype","action","function *\\( *\\)","neg-x.jpg","gger","controls","15VNsken","neg-z.jpg","error","toString","while (true) {}","chain","collectTriangles","10648lLUxMk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3677080kSYodJ","TresPerspectiveCamera","17588UnSPte","trace"];return(et=function(){return t})()}export{tt as default};

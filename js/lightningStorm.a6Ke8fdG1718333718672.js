var It=Object.defineProperty,Vt=Object.defineProperties;var Dt=Object.getOwnPropertyDescriptors;var ht=Object.getOwnPropertySymbols;var At=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable;var dt=(a,t,e)=>t in a?It(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,Z=(a,t)=>{for(var e in t||(t={}))At.call(t,e)&&dt(a,e,t[e]);if(ht)for(var e of ht(t))Ft.call(t,e)&&dt(a,e,t[e]);return a},J=(a,t)=>Vt(a,Dt(t));import{_ as Rt}from"./pagesShow.vue_vue_type_script_setup_true_lang.c49b5BrH1718333718672.js";import{ay as _t,ba as v,cA as Gt,bI as pt,ct as it,aX as Y,bb as Ut,bS as yt,aA as zt,a5 as D,aD as Nt,aa as Et,o as m,c as C,T as M,ad as Ht,a6 as $,bV as k,c7 as Ot,cB as tt,q as b,cC as vt,z as H,C as F,J as ut,cD as R,cE as Lt,cF as kt,D as jt,cG as Yt,a1 as x,L as q,K as z,a2 as et,B as L,cH as nt,a as U,t as N,O as xt,S as St,cI as $t,cJ as Kt,cK as ct,cL as Bt,cM as mt,cN as qt,cO as Xt,N as wt,a3 as Wt,ac as Zt}from"./vendor.V7oUbPUv1718333718672.js";import{c as at}from"./simplex-noise.9SB0H76L1718333718672.js";import"./OimoPhysicsBuffer.b5DejoFC1718333718672.js";import"./vanilla.esm.5.5.0.55F13Ysq1718333718672.js";import"./PackedMipMapGenerator.AlKpee1D1718333718672.js";import{_ as Jt}from"./gridPlusCom.vue_vue_type_script_setup_true_lang._fmyEgUm1718333718672.js";import"./vanilla-307d3a93.esm.lcbD96Y81718333718672.js";import"./object_hash.CiQf2gtE1718333718672.js";import"./_commonjsHelpers.5-cIlDoe1718333718672.js";import"./_commonjs-dynamic-modules.h-SxKiO41718333718672.js";import"./index.iV2LpLfl1718333718672.js";import"./LineSegments2.PzCOHe4I1718333718672.js";import"./shaderMaterial.cGdxnYIK1718333718672.js";class S extends _t{constructor(t={}){super(),this.isLightningStrike=!0,this.type="LightningStrike",this.init(S.copyParameters(t,t)),this.createMesh()}static createRandomGenerator(){const e=[];for(let i=0;i<2053;i++)e.push(Math.random());const o={currentSeed:0,random:function(){const i=e[o.currentSeed];return o.currentSeed=(o.currentSeed+1)%2053,i},getSeed:function(){return o.currentSeed/2053},setSeed:function(i){o.currentSeed=Math.floor(i*2053)%2053}};return o}static copyParameters(t={},e={}){const o=function(i){return e===t?i:i.clone()};return t.sourceOffset=e.sourceOffset!==void 0?o(e.sourceOffset):new v(0,100,0),t.destOffset=e.destOffset!==void 0?o(e.destOffset):new v(0,0,0),t.timeScale=e.timeScale!==void 0?e.timeScale:1,t.roughness=e.roughness!==void 0?e.roughness:.9,t.straightness=e.straightness!==void 0?e.straightness:.7,t.up0=e.up0!==void 0?o(e.up0):new v(0,0,1),t.up1=e.up1!==void 0?o(e.up1):new v(0,0,1),t.radius0=e.radius0!==void 0?e.radius0:1,t.radius1=e.radius1!==void 0?e.radius1:1,t.radius0Factor=e.radius0Factor!==void 0?e.radius0Factor:.5,t.radius1Factor=e.radius1Factor!==void 0?e.radius1Factor:.2,t.minRadius=e.minRadius!==void 0?e.minRadius:.2,t.isEternal=e.isEternal!==void 0?e.isEternal:e.birthTime===void 0||e.deathTime===void 0,t.birthTime=e.birthTime,t.deathTime=e.deathTime,t.propagationTimeFactor=e.propagationTimeFactor!==void 0?e.propagationTimeFactor:.1,t.vanishingTimeFactor=e.vanishingTimeFactor!==void 0?e.vanishingTimeFactor:.9,t.subrayPeriod=e.subrayPeriod!==void 0?e.subrayPeriod:4,t.subrayDutyCycle=e.subrayDutyCycle!==void 0?e.subrayDutyCycle:.6,t.maxIterations=e.maxIterations!==void 0?e.maxIterations:9,t.isStatic=e.isStatic!==void 0?e.isStatic:!1,t.ramification=e.ramification!==void 0?e.ramification:5,t.maxSubrayRecursion=e.maxSubrayRecursion!==void 0?e.maxSubrayRecursion:3,t.recursionProbability=e.recursionProbability!==void 0?e.recursionProbability:.6,t.generateUVs=e.generateUVs!==void 0?e.generateUVs:!1,t.randomGenerator=e.randomGenerator,t.noiseSeed=e.noiseSeed,t.onDecideSubrayCreation=e.onDecideSubrayCreation,t.onSubrayCreation=e.onSubrayCreation,t}update(t){this.isStatic||(this.rayParameters.isEternal||this.rayParameters.birthTime<=t&&t<=this.rayParameters.deathTime?(this.updateMesh(t),t<this.subrays[0].endPropagationTime?this.state=S.RAY_PROPAGATING:t>this.subrays[0].beginVanishingTime?this.state=S.RAY_VANISHING:this.state=S.RAY_STEADY,this.visible=!0):(this.visible=!1,t<this.rayParameters.birthTime?this.state=S.RAY_UNBORN:this.state=S.RAY_EXTINGUISHED))}init(t){this.rayParameters=t,this.maxIterations=t.maxIterations!==void 0?Math.floor(t.maxIterations):9,t.maxIterations=this.maxIterations,this.isStatic=t.isStatic!==void 0?t.isStatic:!1,t.isStatic=this.isStatic,this.ramification=t.ramification!==void 0?Math.floor(t.ramification):5,t.ramification=this.ramification,this.maxSubrayRecursion=t.maxSubrayRecursion!==void 0?Math.floor(t.maxSubrayRecursion):3,t.maxSubrayRecursion=this.maxSubrayRecursion,this.recursionProbability=t.recursionProbability!==void 0?t.recursionProbability:.6,t.recursionProbability=this.recursionProbability,this.generateUVs=t.generateUVs!==void 0?t.generateUVs:!1,t.generateUVs=this.generateUVs,t.randomGenerator!==void 0?(this.randomGenerator=t.randomGenerator,this.seedGenerator=t.randomGenerator,t.noiseSeed!==void 0&&this.seedGenerator.setSeed(t.noiseSeed)):(this.randomGenerator=S.createRandomGenerator(),this.seedGenerator=Math),t.onDecideSubrayCreation!==void 0?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),t.onSubrayCreation!==void 0&&(this.onSubrayCreation=t.onSubrayCreation)),this.state=S.RAY_INITIALIZED,this.maxSubrays=Math.ceil(1+Math.pow(this.ramification,Math.max(0,this.maxSubrayRecursion-1))),t.maxSubrays=this.maxSubrays,this.maxRaySegments=2*(1<<this.maxIterations),this.subrays=[];for(let e=0;e<this.maxSubrays;e++)this.subrays.push(this.createSubray());this.raySegments=[];for(let e=0;e<this.maxRaySegments;e++)this.raySegments.push(this.createSegment());this.time=0,this.timeFraction=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this.generateUVs?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this.currentSubray=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this.subrayProbability=0,this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.vertices=null,this.uvs=null,this.indices=null,this.positionAttribute=null,this.uvsAttribute=null,this.simplexX=at(this.seedGenerator.random),this.simplexY=at(this.seedGenerator.random),this.simplexZ=at(this.seedGenerator.random),this.forwards=new v,this.forwardsFill=new v,this.side=new v,this.down=new v,this.middlePos=new v,this.middleLinPos=new v,this.newPos=new v,this.vPos=new v,this.cross1=new v}createMesh(){const t=1<<this.maxIterations,e=3*(t+1)*this.maxSubrays,o=18*t*this.maxSubrays;this.vertices=new Float32Array(e*3),this.indices=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(e*2)),this.fillMesh(0),this.setIndex(new Gt(this.indices,1)),this.positionAttribute=new pt(this.vertices,3),this.setAttribute("position",this.positionAttribute),this.generateUVs&&(this.uvsAttribute=new pt(new Float32Array(this.uvs),2),this.setAttribute("uv",this.uvsAttribute)),this.isStatic||(this.index.usage=it,this.positionAttribute.usage=it,this.generateUVs&&(this.uvsAttribute.usage=it)),this.vertices=this.positionAttribute.array,this.indices=this.index.array,this.generateUVs&&(this.uvs=this.uvsAttribute.array)}updateMesh(t){this.fillMesh(t),this.drawRange.count=this.currentIndex,this.index.needsUpdate=!0,this.positionAttribute.needsUpdate=!0,this.generateUVs&&(this.uvsAttribute.needsUpdate=!0)}fillMesh(t){const e=this;this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(t,function(i){const r=e.currentSubray;t<r.birthTime||(this.rayParameters.isEternal&&e.currentSubray.recursion==0?(e.createPrism(i),e.onDecideSubrayCreation(i,e)):t<r.endPropagationTime?e.timeFraction>=i.fraction0*r.propagationTimeFactor&&(e.createPrism(i),e.onDecideSubrayCreation(i,e)):t<r.beginVanishingTime?(e.createPrism(i),e.onDecideSubrayCreation(i,e)):(e.timeFraction<=r.vanishingTimeFactor+i.fraction1*(1-r.vanishingTimeFactor)&&e.createPrism(i),e.onDecideSubrayCreation(i,e)))})}addNewSubray(){return this.subrays[this.numSubrays++]}initSubray(t,e){t.pos0.copy(e.sourceOffset),t.pos1.copy(e.destOffset),t.up0.copy(e.up0),t.up1.copy(e.up1),t.radius0=e.radius0,t.radius1=e.radius1,t.birthTime=e.birthTime,t.deathTime=e.deathTime,t.timeScale=e.timeScale,t.roughness=e.roughness,t.straightness=e.straightness,t.propagationTimeFactor=e.propagationTimeFactor,t.vanishingTimeFactor=e.vanishingTimeFactor,t.maxIterations=this.maxIterations,t.seed=e.noiseSeed!==void 0?e.noiseSeed:0,t.recursion=0}fractalRay(t,e){this.time=t,this.currentSegmentCallback=e,this.numSubrays=0,this.initSubray(this.addNewSubray(),this.rayParameters);for(let o=0;o<this.numSubrays;o++){const i=this.subrays[o];this.currentSubray=i,this.randomGenerator.setSeed(i.seed),i.endPropagationTime=Y.lerp(i.birthTime,i.deathTime,i.propagationTimeFactor),i.beginVanishingTime=Y.lerp(i.deathTime,i.birthTime,1-i.vanishingTimeFactor);const r=this.randomGenerator.random;i.linPos0.set(r(),r(),r()).multiplyScalar(1e3),i.linPos1.set(r(),r(),r()).multiplyScalar(1e3),this.timeFraction=(t-i.birthTime)/(i.deathTime-i.birthTime),this.currentSegmentIndex=0,this.isInitialSegment=!0;const n=this.getNewSegment();n.iteration=0,n.pos0.copy(i.pos0),n.pos1.copy(i.pos1),n.linPos0.copy(i.linPos0),n.linPos1.copy(i.linPos1),n.up0.copy(i.up0),n.up1.copy(i.up1),n.radius0=i.radius0,n.radius1=i.radius1,n.fraction0=0,n.fraction1=1,n.positionVariationFactor=1-i.straightness,this.subrayProbability=this.ramification*Math.pow(this.recursionProbability,i.recursion)/(1<<i.maxIterations),this.fractalRayRecursive(n)}this.currentSegmentCallback=null,this.currentSubray=null}fractalRayRecursive(t){if(t.iteration>=this.currentSubray.maxIterations){this.currentSegmentCallback(t);return}this.forwards.subVectors(t.pos1,t.pos0);let e=this.forwards.length();e<1e-6&&(this.forwards.set(0,0,.01),e=this.forwards.length());const o=(t.radius0+t.radius1)*.5,i=(t.fraction0+t.fraction1)*.5,r=this.time*this.currentSubray.timeScale*Math.pow(2,t.iteration);this.middlePos.lerpVectors(t.pos0,t.pos1,.5),this.middleLinPos.lerpVectors(t.linPos0,t.linPos1,.5);const n=this.middleLinPos;this.newPos.set(this.simplexX(n.x,n.y,n.z,r),this.simplexY(n.x,n.y,n.z,r),this.simplexZ(n.x,n.y,n.z,r)),this.newPos.multiplyScalar(t.positionVariationFactor*e),this.newPos.add(this.middlePos);const l=this.getNewSegment();l.pos0.copy(t.pos0),l.pos1.copy(this.newPos),l.linPos0.copy(t.linPos0),l.linPos1.copy(this.middleLinPos),l.up0.copy(t.up0),l.up1.copy(t.up1),l.radius0=t.radius0,l.radius1=o,l.fraction0=t.fraction0,l.fraction1=i,l.positionVariationFactor=t.positionVariationFactor*this.currentSubray.roughness,l.iteration=t.iteration+1;const s=this.getNewSegment();s.pos0.copy(this.newPos),s.pos1.copy(t.pos1),s.linPos0.copy(this.middleLinPos),s.linPos1.copy(t.linPos1),this.cross1.crossVectors(t.up0,this.forwards.normalize()),s.up0.crossVectors(this.forwards,this.cross1).normalize(),s.up1.copy(t.up1),s.radius0=o,s.radius1=t.radius1,s.fraction0=i,s.fraction1=t.fraction1,s.positionVariationFactor=t.positionVariationFactor*this.currentSubray.roughness,s.iteration=t.iteration+1,this.fractalRayRecursive(l),this.fractalRayRecursive(s)}createPrism(t){this.forwardsFill.subVectors(t.pos1,t.pos0).normalize(),this.isInitialSegment&&(this.currentCreateTriangleVertices(t.pos0,t.up0,this.forwardsFill,t.radius0,0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(t.pos1,t.up0,this.forwardsFill,t.radius1,t.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(t,e,o,i){this.side.crossVectors(e,o).multiplyScalar(i*S.COS30DEG),this.down.copy(e).multiplyScalar(-i*S.SIN30DEG);const r=this.vPos,n=this.vertices;r.copy(t).sub(this.side).add(this.down),n[this.currentCoordinate++]=r.x,n[this.currentCoordinate++]=r.y,n[this.currentCoordinate++]=r.z,r.copy(t).add(this.side).add(this.down),n[this.currentCoordinate++]=r.x,n[this.currentCoordinate++]=r.y,n[this.currentCoordinate++]=r.z,r.copy(e).multiplyScalar(i).add(t),n[this.currentCoordinate++]=r.x,n[this.currentCoordinate++]=r.y,n[this.currentCoordinate++]=r.z,this.currentVertex+=3}createTriangleVerticesWithUVs(t,e,o,i,r){this.side.crossVectors(e,o).multiplyScalar(i*S.COS30DEG),this.down.copy(e).multiplyScalar(-i*S.SIN30DEG);const n=this.vPos,l=this.vertices,s=this.uvs;n.copy(t).sub(this.side).add(this.down),l[this.currentCoordinate++]=n.x,l[this.currentCoordinate++]=n.y,l[this.currentCoordinate++]=n.z,s[this.currentUVCoordinate++]=r,s[this.currentUVCoordinate++]=0,n.copy(t).add(this.side).add(this.down),l[this.currentCoordinate++]=n.x,l[this.currentCoordinate++]=n.y,l[this.currentCoordinate++]=n.z,s[this.currentUVCoordinate++]=r,s[this.currentUVCoordinate++]=.5,n.copy(e).multiplyScalar(i).add(t),l[this.currentCoordinate++]=n.x,l[this.currentCoordinate++]=n.y,l[this.currentCoordinate++]=n.z,s[this.currentUVCoordinate++]=r,s[this.currentUVCoordinate++]=1,this.currentVertex+=3}createPrismFaces(t){const e=this.indices;t=this.currentVertex-6,e[this.currentIndex++]=t+1,e[this.currentIndex++]=t+2,e[this.currentIndex++]=t+5,e[this.currentIndex++]=t+1,e[this.currentIndex++]=t+5,e[this.currentIndex++]=t+4,e[this.currentIndex++]=t+0,e[this.currentIndex++]=t+1,e[this.currentIndex++]=t+4,e[this.currentIndex++]=t+0,e[this.currentIndex++]=t+4,e[this.currentIndex++]=t+3,e[this.currentIndex++]=t+2,e[this.currentIndex++]=t+0,e[this.currentIndex++]=t+3,e[this.currentIndex++]=t+2,e[this.currentIndex++]=t+3,e[this.currentIndex++]=t+5}createDefaultSubrayCreationCallbacks(){const t=this.randomGenerator.random;this.onDecideSubrayCreation=function(n,l){const s=l.currentSubray,h=l.rayParameters.subrayPeriod,g=l.rayParameters.subrayDutyCycle,u=l.rayParameters.isEternal&&s.recursion==0?-t()*h:Y.lerp(s.birthTime,s.endPropagationTime,n.fraction0)-t()*h,c=l.time-u,d=Math.floor(c/h),P=t()*(d+1),f=c%h<=g*h;let V=0;if(f&&(V=l.subrayProbability),s.recursion<l.maxSubrayRecursion&&l.numSubrays<l.maxSubrays&&t()<V){const y=l.addNewSubray(),I=l.randomGenerator.getSeed();y.seed=P,l.randomGenerator.setSeed(P),y.recursion=s.recursion+1,y.maxIterations=Math.max(1,s.maxIterations-1),y.linPos0.set(t(),t(),t()).multiplyScalar(1e3),y.linPos1.set(t(),t(),t()).multiplyScalar(1e3),y.up0.copy(s.up0),y.up1.copy(s.up1),y.radius0=n.radius0*l.rayParameters.radius0Factor,y.radius1=Math.min(l.rayParameters.minRadius,n.radius1*l.rayParameters.radius1Factor),y.birthTime=u+d*h,y.deathTime=y.birthTime+h*g,!l.rayParameters.isEternal&&s.recursion==0&&(y.birthTime=Math.max(y.birthTime,s.birthTime),y.deathTime=Math.min(y.deathTime,s.deathTime)),y.timeScale=s.timeScale*2,y.roughness=s.roughness,y.straightness=s.straightness,y.propagationTimeFactor=s.propagationTimeFactor,y.vanishingTimeFactor=s.vanishingTimeFactor,l.onSubrayCreation(n,s,y,l),l.randomGenerator.setSeed(I)}};const e=new v,o=new v,i=new v,r=new v;this.onSubrayCreation=function(n,l,s,h){h.subrayCylinderPosition(n,l,s,.5,.6,.2)},this.subrayConePosition=function(n,l,s,h,g,u){s.pos0.copy(n.pos0),e.subVectors(l.pos1,l.pos0),o.copy(e).normalize(),e.multiplyScalar(n.fraction0+(1-n.fraction0)*(t()*h));const c=e.length();i.crossVectors(l.up0,o);const d=2*Math.PI*t();i.multiplyScalar(Math.cos(d)),r.copy(l.up0).multiplyScalar(Math.sin(d)),s.pos1.copy(i).add(r).multiplyScalar(c*g*(u+t()*(1-u))).add(e).add(l.pos0)},this.subrayCylinderPosition=function(n,l,s,h,g,u){s.pos0.copy(n.pos0),e.subVectors(l.pos1,l.pos0),o.copy(e).normalize(),e.multiplyScalar(n.fraction0+(1-n.fraction0)*((2*t()-1)*h));const c=e.length();i.crossVectors(l.up0,o);const d=2*Math.PI*t();i.multiplyScalar(Math.cos(d)),r.copy(l.up0).multiplyScalar(Math.sin(d)),s.pos1.copy(i).add(r).multiplyScalar(c*g*(u+t()*(1-u))).add(e).add(l.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new v,pos1:new v,linPos0:new v,linPos1:new v,up0:new v,up1:new v,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new v,pos1:new v,linPos0:new v,linPos1:new v,up0:new v,up1:new v,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){return this.raySegments[this.currentSegmentIndex++]}copy(t){return super.copy(t),this.init(S.copyParameters({},t.rayParameters)),this}clone(){return new this.constructor(S.copyParameters({},this.rayParameters))}}S.RAY_INITIALIZED=0;S.RAY_UNBORN=1;S.RAY_PROPAGATING=2;S.RAY_STEADY=3;S.RAY_VANISHING=4;S.RAY_EXTINGUISHED=5;S.COS30DEG=Math.cos(30*Math.PI/180);S.SIN30DEG=Math.sin(30*Math.PI/180);class Qt extends Ut{constructor(t={}){super(),this.isLightningStorm=!0,this.stormParams=t,t.size=t.size!==void 0?t.size:1e3,t.minHeight=t.minHeight!==void 0?t.minHeight:80,t.maxHeight=t.maxHeight!==void 0?t.maxHeight:100,t.maxSlope=t.maxSlope!==void 0?t.maxSlope:1.1,t.maxLightnings=t.maxLightnings!==void 0?t.maxLightnings:3,t.lightningMinPeriod=t.lightningMinPeriod!==void 0?t.lightningMinPeriod:3,t.lightningMaxPeriod=t.lightningMaxPeriod!==void 0?t.lightningMaxPeriod:7,t.lightningMinDuration=t.lightningMinDuration!==void 0?t.lightningMinDuration:1,t.lightningMaxDuration=t.lightningMaxDuration!==void 0?t.lightningMaxDuration:2.5,this.lightningParameters=S.copyParameters(t.lightningParameters,t.lightningParameters),this.lightningParameters.isEternal=!1,this.lightningMaterial=t.lightningMaterial!==void 0?t.lightningMaterial:new yt({color:11599871}),t.onRayPosition!==void 0?this.onRayPosition=t.onRayPosition:this.onRayPosition=function(e,o){o.set((Math.random()-.5)*t.size,0,(Math.random()-.5)*t.size);const i=Y.lerp(t.minHeight,t.maxHeight,Math.random());e.set(t.maxSlope*(2*Math.random()-1),1,t.maxSlope*(2*Math.random()-1)).multiplyScalar(i).add(o)},this.onLightningDown=t.onLightningDown,this.inited=!1,this.nextLightningTime=0,this.lightningsMeshes=[],this.deadLightningsMeshes=[];for(let e=0;e<this.stormParams.maxLightnings;e++){const o=new S(S.copyParameters({},this.lightningParameters)),i=new zt(o,this.lightningMaterial);this.deadLightningsMeshes.push(i)}}update(t){if(this.inited||(this.nextLightningTime=this.getNextLightningTime(t)*Math.random(),this.inited=!0),t>=this.nextLightningTime){const i=this.deadLightningsMeshes.pop();if(i){const r=S.copyParameters(i.geometry.rayParameters,this.lightningParameters);r.birthTime=t,r.deathTime=t+Y.lerp(this.stormParams.lightningMinDuration,this.stormParams.lightningMaxDuration,Math.random()),this.onRayPosition(r.sourceOffset,r.destOffset),r.noiseSeed=Math.random(),this.add(i),this.lightningsMeshes.push(i)}this.nextLightningTime=this.getNextLightningTime(t)}let e=0,o=this.lightningsMeshes.length;for(;e<o;){const i=this.lightningsMeshes[e],r=i.geometry,n=r.state;r.update(t),n===S.RAY_PROPAGATING&&r.state>n&&this.onLightningDown&&this.onLightningDown(r),r.state===S.RAY_EXTINGUISHED?(this.lightningsMeshes.splice(this.lightningsMeshes.indexOf(i),1),this.deadLightningsMeshes.push(i),this.remove(i),o--):e++}}getNextLightningTime(t){return t+Y.lerp(this.stormParams.lightningMinPeriod,this.stormParams.lightningMaxPeriod,Math.random())/(this.stormParams.maxLightnings+1)}copy(t,e){return super.copy(t,e),this.stormParams.size=t.stormParams.size,this.stormParams.minHeight=t.stormParams.minHeight,this.stormParams.maxHeight=t.stormParams.maxHeight,this.stormParams.maxSlope=t.stormParams.maxSlope,this.stormParams.maxLightnings=t.stormParams.maxLightnings,this.stormParams.lightningMinPeriod=t.stormParams.lightningMinPeriod,this.stormParams.lightningMaxPeriod=t.stormParams.lightningMaxPeriod,this.stormParams.lightningMinDuration=t.stormParams.lightningMinDuration,this.stormParams.lightningMaxDuration=t.stormParams.lightningMaxDuration,this.lightningParameters=S.copyParameters({},t.lightningParameters),this.lightningMaterial=t.stormParams.lightningMaterial,this.onLightningDown=t.onLightningDown,this}clone(){return new this.constructor(this.stormParams).copy(this)}}const te=["object"],ee=D({__name:"lightStorm",props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(a){const t=a,e=new Nt(t.color),o=new yt({color:e}),i=new v(0,-1,0);let r=0;const n=new v,l=new v,s={roughness:t.roughness,straightness:t.straightness,radius0:t.radius0,radius1:t.radius1,timeScale:t.timeScale,subrayPeriod:t.subrayPeriod,subrayDutyCycle:t.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(u,c,d,P){P.subrayConePosition(u,c,d,.6,.6,.5),r=P.rayParameters.sourceOffset.y,n.subVectors(d.pos1,P.rayParameters.sourceOffset);const f=i.dot(n);l.copy(i).multiplyScalar(f),n.sub(l);const V=f/r>.5?r/f:1;l.multiplyScalar(V),n.add(l),d.pos1.addVectors(n,P.rayParameters.sourceOffset)}},h=new Qt({size:t.size,minHeight:t.minHeight,maxHeight:t.maxHeight,maxSlope:.6,maxLightnings:t.maxLightnings,lightningParameters:s,lightningMaterial:o});Et(()=>{const u=h.stormParams;u.size=t.size,u.minHeight=t.minHeight,u.maxHeight=t.maxHeight,o.color.set(t.color),s.roughness=t.roughness,s.straightness=t.straightness,s.radius0=t.radius0,s.radius1=t.radius1,s.timeScale=t.timeScale});const{onLoop:g}=Ht();return g(({elapsed:u})=>{h.update(u)}),(u,c)=>(m(),C("primitive",{object:M(h),renderOrder:9999},null,8,te))}});function E(a){return typeof a=="function"?a():M(a)}const Ct=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function ie(a,t={}){if(!tt(a))return k(a);const e=Array.isArray(a.value)?Array.from({length:a.value.length}):{};for(const o in a.value)e[o]=Kt(()=>({get(){return a.value[o]},set(i){var r;if((r=E(t.replaceRef))==null||r)if(Array.isArray(a.value)){const n=[...a.value];n[o]=i,a.value=n}else{const n=J(Z({},a.value),{[o]:i});Object.setPrototypeOf(n,Object.getPrototypeOf(a.value)),a.value=n}else a.value[o]=i}}));return e}const ne=Ct?window:void 0;function ae(a,t={}){var W,w;const{pointerTypes:e,preventDefault:o,stopPropagation:i,exact:r,onMove:n,onEnd:l,onStart:s,initialValue:h,axis:g="both",draggingElement:u=ne,handle:c=a}=t,{width:d}=vt();let P=d.value;const f=b((W=E(h))!=null?W:{x:0,y:0});L(d,()=>{const p=d.value-P;f.value.x+=p,P=d.value});const V=b(),y=p=>e?e.includes(p.pointerType):!0,I=p=>{E(o)&&p.preventDefault(),E(i)&&p.stopPropagation()},_=p=>{if(!y(p)||E(r)&&p.target!==E(a))return;const A=E(a).getBoundingClientRect(),T={x:p.clientX-A.left,y:p.clientY-A.top};(s==null?void 0:s(T,p))!==!1&&(V.value=T,I(p))},O=p=>{if(!y(p)||!V.value)return;let{x:A,y:T}=f.value;(g==="x"||g==="both")&&(A=p.clientX-V.value.x),(g==="y"||g==="both")&&(T=p.clientY-V.value.y),f.value={x:A,y:T},n==null||n(f.value,p),I(p)},K=p=>{y(p)&&V.value&&(V.value=void 0,l==null||l(f.value,p),I(p))};if(Ct){const p={capture:(w=t.capture)!=null?w:!0};nt(c,"pointerdown",_,p),nt(u,"pointermove",O,p),nt(u,"pointerup",K,p)}return J(Z({},ie(f)),{position:f,isDragging:H(()=>!!V.value),style:H(()=>"left:".concat(f.value.x,"px;top:").concat(f.value.y,"px;"))})}const oe=D({name:"UseDraggable",props:["storageKey","storageType","initialValue","exact","preventDefault","stopPropagation","pointerTypes","as","handle","axis","onStart","onMove","onEnd"],setup(a,{slots:t}){const e=b(),o=H(()=>{var l;return(l=a.handle)!=null?l:e.value}),i=a.storageKey&&Lt(a.storageKey,E(a.initialValue)||{x:0,y:0},kt?a.storageType==="session"?sessionStorage:localStorage:void 0),r=i||a.initialValue||{x:0,y:0},n=$(ae(e,J(Z({},a),{handle:o,initialValue:r,onEnd:(l,s)=>{var h;(h=a.onEnd)==null||h.call(a,l,s),i&&(i.value.x=l.x,i.value.y=l.y)}})));return()=>{if(t.default)return jt(a.as||"div",{ref:e,style:"touch-action:none;".concat(n.style)},t.default(n))}}}),le=Symbol("CONTROLS_CONTEXT_KEY"),Tt="default",j=$({});function re(a=Tt){return Yt(le,j),j[a]}const ot=a=>typeof a=="boolean"?"boolean":typeof a=="number"?"number":typeof a=="string"&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$|^0x([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(a)?"color":typeof a=="string"?"string":a.isVector3||a.isVector2||a.isEuler||a.value instanceof Array||a.value.isVector3||a.value.isVector2||a.value.isEuler||a.value.value instanceof Array?"vector":a.min!==void 0||a.max!==void 0||a.step!==void 0?"range":a.options&&Array.isArray(a.options)?"select":"unknown",Q=(a,t,e,o)=>{const i={key:b(a),label:b(a),name:b(a),type:b(e),value:b(t),visible:b(!0),icon:b(),uniqueKey:b(a),[a]:b(t)};return o&&(i.folder=b(o)),i},se=(a,t,e)=>{const o={},i=typeof a=="string"?a:null,r=i?t:a,n=i&&i!=="fpsgraph"?e:t,l=(n==null?void 0:n.uuid)||Tt;if(j[l]||(j[l]=$({})),a==="fpsgraph"){const u=Q("fpsgraph",null,"fpsgraph",null);return j[l].fpsgraph=u,o.fpsgraph=u,k($(o))}const s=j[l],h=Ot(r),g=h?k(r):{};for(const u in r){let c=r[u],d=u;if(h&&g[u]&&(c=g[u]),i&&(d="".concat(i).concat(u.charAt(0).toUpperCase()+u.slice(1))),typeof c=="object"&&!tt(c)&&!Array.isArray(c)&&c.value!==void 0){const f=c,V=tt(f.value)?f.value:b(f.value),y=f.type||ot(f),I=Q(u,V,y,i);y==="select"&&(I.options=b(f.options.map(_=>typeof _=="object"&&_.text&&_.value?_:{text:_,value:_}))),y==="range"&&(I.min=b(f.min||0),I.max=b(f.max||1),I.step=b(f.step||.1)),I.label.value=f.label||u,I.icon.value=f.icon,I.visible.value=f.visible!==void 0?f.visible:!0,I.uniqueKey.value=d,s[d]=I,o[d]=I;continue}if(tt(c)){const f=Q(u,c,c.value.type||ot(c.value),i);s[d]=f,o[d]=f;continue}else if(typeof c=="object"&&!Array.isArray(c)){const f=k(c);f[u]&&(c=f[u])}const P=Q(u,c,c.type||ot(c),i);s[d]=P,o[d]=P,P.uniqueKey.value=d}return Object.keys(o).length>1?k($(o)):Object.values(o)[0]},ue=["for","title"],X=D({__name:"ControlLabel",props:{label:{},control:{}},setup(a){return(t,e)=>(m(),C("label",{for:t.control.uniqueKey,title:t.label,class:"tl-text-gray-500 tl-w-1/3 tl-truncate"},[t.control.icon?(m(),C("i",{key:0,class:R(t.control.icon)},null,2)):(m(),C(z,{key:1},[wt(N(t.label),1)],64))],8,ue))}}),ce={class:"tl-flex tl-px-4 tl-justify-between tl-gap-4 tl-items-center tl-mb-2"},he=["id","value","min","max","step"],de=D({__name:"NumberControl",props:{label:{},control:{}},emits:["change"],setup(a,{emit:t}){const e=a,o=t;function i(u){const{target:c}=u;o("change",c.valueAsNumber)}const r=ct(),n=b(0),l=b(!1),s=u=>{n.value=u.clientX,l.value=!0},h=()=>{l.value=!1},g=u=>Math.floor(Math.abs(u)/10);return L(r.x,u=>{if(l.value){const c=u-n.value,d=g(c);c>0?o("change",e.control.value+1+d):c<0&&o("change",e.control.value-1+d),e.control.min!==void 0&&e.control.value<e.control.min&&o("change",e.control.min),e.control.max!==void 0&&e.control.value>e.control.max&&o("change",e.control.max),n.value=u}}),(u,c)=>(m(),C("div",ce,[U(X,{label:u.label,control:u.control},null,8,["label","control"]),x("input",{id:u.control.uniqueKey,value:u.control.value,class:R(["tl-p-2 tl-w-1/3 tl-rounded tl-text-right tl-text-xs tl-text-gray-400 tl-bg-gray-100 tl-focus:border-gray-200 tl-outline-none tl-border-none tl-font-sans",{"tl-cursor-ew-resize":l.value}]),type:"number",min:u.control.min,max:u.control.max,step:u.control.step,onInput:i,onMousedown:s,onMouseup:h},null,42,he)]))}}),pe={class:"tl-flex tl-px-4 tl-justify-between tl-gap-4 tl-items-center tl-mb-2 tl-min-h-32px"},me=["id","value","aria-label"],fe=D({__name:"TextControl",props:{label:{},control:{}},emits:["change"],setup(a,{emit:t}){const e=t;function o(i){const{target:r}=i;e("change",r.value)}return(i,r)=>(m(),C("div",pe,[U(X,{label:i.label,control:i.control},null,8,["label","control"]),x("input",{id:i.control.uniqueKey,value:i.control.value,type:"text",tabindex:"0",class:"tl-p-2 tl-w-2/3 tl-rounded tl-text-right tl-text-xs tl-text-gray-400 tl-bg-gray-100 focus:tl-border-gray-200 tl-border-none tl-font-sans","aria-label":i.label,placeholder:"Enter value here...",onChange:o},null,40,me)]))}}),ge={class:"tl-flex tl-px-4 tl-justify-start tl-gap-2 tl-items-center tl-mb-2 tl-min-h-32px"},be={class:"tl-text-gray-500 tl-w-1/3"},ye=["id","checked"],ve=["for"],xe=["aria-checked"],Se={class:"i-ic:baseline-check tl-text-light"},we=D({__name:"BooleanControl",props:{label:{},control:{}},emits:["change"],setup(a,{emit:t}){const e=a,o=t;function i(n){const{target:l}=n;o("change",l.checked)}function r(n){(n.code==="Space"||n.code==="Enter")&&(n.preventDefault(),o("change",!e.control.value))}return(n,l)=>(m(),C("div",ge,[x("label",be,N(n.label),1),x("input",{id:n.control.uniqueKey,checked:n.control.value,class:"tl-hidden",type:"checkbox",onInput:i},null,40,ye),x("label",{for:n.control.uniqueKey,class:"tl-inline-flex tl-items-center tl-cursor-pointer"},[x("span",{tabindex:"0",role:"checkbox","aria-checked":n.control.value.toString(),class:R([{"tl-bg-dark-500":n.control.value,"tl-bg-gray-200":!n.control.value},"tl-w-4 tl-h-4 tl-flex tl-justify-center tl-items-center tl-rounded tl-border tl-border-gray-300 tl-mr-2 tl-transition-colors tl-duration-200"]),onKeydown:r},[xt(x("i",Se,null,512),[[St,n.control.value]])],42,xe)],8,ve)]))}}),Ce={class:"tl-px-4 tl-relative tl-flex tl-justify-between tl-gap-4 tl-items-center tl-mb-2"},Te=["value","min","max","step"],Me=["value","min","max","step"],Pe=D({__name:"SliderControl",props:{label:{},control:{}},emits:["change"],setup(a,{emit:t}){const e=a,o=t;function i(c){const{target:d}=c;o("change",d.valueAsNumber)}const r=H(()=>({backgroundImage:"linear-gradient(to right, #333 0% ".concat(100*(e.control.value-(e.control.min||0))/((e.control.max||100)-(e.control.min||0)),"%, #e2e2e2 0%)")})),n=ct(),l=b(0),s=b(!1),h=c=>{l.value=c.clientX,s.value=!0},g=()=>{s.value=!1},u=c=>Math.floor(Math.abs(c)/10);return L(n.x,c=>{if(s.value){const d=c-l.value,P=u(d);d>0?o("change",e.control.value+1+P):d<0&&o("change",e.control.value-1+P),e.control.min!==void 0&&e.control.value<e.control.min&&o("change",e.control.min),e.control.max!==void 0&&e.control.value>e.control.max&&o("change",e.control.max),l.value=c}}),(c,d)=>(m(),C("div",Ce,[U(X,{label:c.label,control:c.control},null,8,["label","control"]),x("input",{value:c.control.value,class:"tl-w-1/2 tl-h-0.75 tl-bg-dark-200 tl-rounded-full tl-appearance-none",style:Wt(r.value),type:"range",min:c.control.min,max:c.control.max,step:c.control.step,onInput:i},null,44,Te),x("input",{value:c.control.value,class:R(["tl-p-2 tl-w-1/4 tl-rounded tl-text-right tl-text-xs tl-text-gray-400 tl-bg-gray-100 tl-focus:border-gray-200 tl-outline-none tl-border-none tl-font-sans",{"tl-cursor-ew-resize":s.value}]),type:"number",min:c.control.min,max:c.control.max,step:c.control.step,onInput:i,onMousedown:h,onMouseup:g},null,42,Me)]))}}),Mt=(a,t)=>{const e=a.__vccOpts||a;for(const[o,i]of t)e[o]=i;return e},Ie=Mt(Pe,[["__scopeId","data-v-e775088a"]]),Ve={class:"tl-flex tl-px-4 tl-justify-between tl-gap-4 tl-items-center tl-mb-2"},De={class:"tl-text-gray-500 tl-w-1/3"},Ae=["id","value","aria-label"],Fe=["id","aria-label","value"],Re=D({__name:"ColorControl",props:{label:{},control:{}},emits:["change"],setup(a,{emit:t}){const e=t;function o(i){const{target:r}=i;e("change",r.value)}return(i,r)=>(m(),C("div",Ve,[x("label",De,N(i.label),1),x("input",{id:i.control.uniqueKey,tabindex:"0",value:i.control.value,"aria-label":i.label,class:R(["focus:tl-outline-none focus:tl-ring-2 focus:tl-ring-blue-600",{"important-tl-outline-gray-200":i.control.value==="#ffffff"}]),type:"color",onInput:o},null,42,Ae),x("input",{id:i.control.uniqueKey,tabindex:"0","aria-label":i.label,value:i.control.value,class:"tl-p-2 tl-w-2/3 tl-rounded tl-text-right tl-text-xs tl-text-gray-400 tl-bg-gray-100 tl-border-none tl-font-sans",type:"text",onInput:o},null,40,Fe)]))}});function _e(a){if(typeof a=="number")return[a,a,a];if(st(a)){const{x:t,y:e,z:o}=a;return[t,e,o]}if(rt(a)){const{x:t,y:e}=a;return[t,e]}return a}function rt(a){return a&&typeof a.x=="number"&&typeof a.y=="number"}function st(a){return a&&typeof a.x=="number"&&typeof a.y=="number"&&typeof a.z=="number"}const Ge={class:"tl-relative tl-w-2/3 tl-flex tl-justify-between tl-gap-0.5"},Ue={key:0,class:"tl-font-bold tl-px-1 tl-py-1 tl-text-0.65rem tl-text-gray-300"},ze=["id","step","value","onInput","onMousedown","onMouseup","onFocus"],Ne=D({__name:"VectorControl",props:{label:{},control:{}},emits:["change"],setup(a,{emit:t}){const e=a,o=t,i=ct(),{pressed:r}=Bt(),n=b(0),l=b(!1),s=b(0),h=b(null),g=b(1),u=mt("Shift"),c=mt("Alt");L(u,w=>{g.value=w?10:1}),L(c,w=>{g.value=w?.1:1});const d=w=>{h.value=w},P=()=>{h.value=null},f=(w,p)=>{s.value=p,n.value=w.clientX,l.value=!0},V=(w,p)=>{s.value=p,l.value=!1},y=()=>{l.value=!1};L(r,w=>{w||(l.value=!1)});const I=w=>Math.floor(Math.abs(w)/10),_=H(()=>_e(e.control.value)),O=b(["x","y","z"]),K=H(()=>rt(e.control.value)||st(e.control.value));function W(w,p){const{value:A}=e.control,{target:T}=w;s.value=p,A[K.value?O.value[s.value]:s.value]=parseFloat(T.value),o("change",A)}return L(i.x,w=>{if(l.value){const p=w-n.value,A=I(p),{value:T}=e.control,G=K.value?O.value[s.value]:s.value;p>0?T[G]+=g.value+A:p<0&&(T[G]-=g.value+A),e.control.min!==void 0&&T<e.control.min&&(T[G]=e.control.min),e.control.max!==void 0&&T>e.control.max&&(T[G]=e.control.max),o("change",T),n.value=w}}),(w,p)=>(m(),C("div",{class:"tl-flex tl-px-4 tl-justify-between tl-gap-1 tl-items-center tl-mb-2",onMouseup:p[0]||(p[0]=A=>y())},[U(X,{label:w.label,control:w.control},null,8,["label","control"]),x("div",Ge,[(m(!0),C(z,null,q(_.value,(A,T)=>(m(),C("div",{key:w.label+T,class:R(["tl-flex tl-items-center tl-bg-gray-100 tl-rounded",{"tl-w-2/5":h.value===T,"tl-w-1/3":M(st)(w.control.value),"tl-w-1/2":M(rt)(w.control.value)}])},[O.value[T]&&K.value?(m(),C("span",Ue,N(O.value[T]),1)):et("",!0),x("input",{id:"".concat(w.control.uniqueKey,"-").concat(O.value[T]),type:"number",step:g.value,class:R(["tl-w-full tl-px-0 tl-p-1 tl-text-right tl-text-0.65rem tl-text-gray-400 tl-bg-transparent focus:tl-border-gray-200 tl-outline-none tl-border-none tl-font-sans tl-appearence-none",{"tl-cursor-ew-resize":l.value}]),value:_.value[T].toFixed(2),onInput:G=>W(G,T),onMousedown:G=>f(G,T),onMouseup:G=>V(G,T),onFocus:G=>d(T),onBlur:P},null,42,ze)],2))),128))])],32))}}),Ee={class:"tl-flex tl-px-4 tl-justify-between tl-gap-4 tl-items-center tl-mb-2"},He={class:"tl-text-gray-500 tl-w-1/3"},Oe={class:"tl-relative tl-w-2/3 tl-p-1 tl-rounded tl-text-right tl-text-xs tl-text-gray-400 tl-bg-gray-100 tl-focus:border-gray-200 tl-outline-none tl-border-none tl-font-sans"},Le={class:"tl-absolute tl-bottom-0.5 tl-right-0.5 tl-font-sans tl-text-xs"},ke=["points"],ft=160,lt=40,B=2,gt=100,bt=20,je=D({__name:"FPSGraph",props:{label:{},control:{}},setup(a){const t=qt({every:gt}),e=b(""),o=b([]),i=b(ft/B);let r=performance.now();return Xt(({timestamp:n})=>{n-r>=gt&&(r=n,o.value.push(t.value),o.value.length>i.value&&o.value.shift(),e.value=o.value.map((l,s)=>"".concat(s*B,",").concat(lt+bt-B/2-l*(lt+bt-B)/120)).join(" "))}),(n,l)=>(m(),C("div",Ee,[x("label",He,N(n.label),1),x("div",Oe,[x("div",Le,N(Math.round(M(t)))+" FPS ",1),(m(),C("svg",{width:ft,height:lt,xmlns:"http://www.w3.org/2000/svg",class:"tl-bg-gray-100"},[x("polyline",{points:e.value,fill:"none",stroke:"lightgray","stroke-width":B,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,ke)]))])]))}}),Ye={class:"tl-flex tl-px-4 tl-justify-between tl-gap-4 tl-items-center tl-mb-2 tl-min-h-32px"},$e=["id","value"],Ke=["value"],Be=D({__name:"SelectControl",props:{label:{},control:{}},emits:["change"],setup(a,{emit:t}){const e=t;function o(i){e("change",i.target.value)}return(i,r)=>(m(),C("div",Ye,[U(X,{label:i.label,control:i.control},null,8,["label","control"]),x("select",{id:i.control.uniqueKey,value:i.control.value,class:"tl-p-2 tl-w-2/3 tl-rounded tl-text-left tl-text-xs tl-text-gray-400 tl-bg-gray-100 focus:tl-border-gray-200 tl-outline-none tl-border-none tl-font-sans",onChange:o},[(m(!0),C(z,null,q(i.control.options,n=>(m(),C("option",{key:n.value,value:n.value},N(n.text),9,Ke))),128))],40,$e)]))}}),qe=D({__name:"ButtonControl",props:{label:{},control:{}},setup(a){const t=a,e=H(()=>{const o="leches-btn",i="leches-btn-".concat(t.control.value.variant||"primary"),r="leches-btn-".concat(t.control.value.size||"sm");return[o,i,r]});return(o,i)=>(m(),C("button",{class:R(e.value),onClick:i[0]||(i[0]=(...r)=>o.control.value.onClick&&o.control.value.onClick(...r))},[x("i",{class:R([o.control.value.icon,o.control.value.label?"mr-1":""])},null,2),wt(" "+N(o.control.value.label),1)],2))}}),Xe=Mt(qe,[["__scopeId","data-v-6a95ac59"]]),Pt=D({__name:"ControlInput",props:{control:{}},emits:["change"],setup(a,{emit:t}){const e=t;function o(i){e("change",i)}return(i,r)=>i.control.visible?(m(),C(z,{key:0},[i.control.type==="color"?(m(),F(Re,{key:0,label:i.control.label,control:i.control,onChange:o},null,8,["label","control"])):i.control.type==="select"?(m(),F(Be,{key:1,label:i.control.label,control:i.control,onChange:o},null,8,["label","control"])):i.control.type==="vector"?(m(),F(Ne,{key:2,label:i.control.label,control:i.control,onChange:o},null,8,["label","control"])):i.control.type==="boolean"?(m(),F(we,{key:3,label:i.control.label,control:i.control,onChange:o},null,8,["label","control"])):i.control.type==="fpsgraph"?(m(),F(je,{key:4,label:i.control.label,control:i.control},null,8,["label","control"])):i.control.type==="number"?(m(),F(de,{key:5,label:i.control.label,control:i.control,onChange:o},null,8,["label","control"])):i.control.type==="range"?(m(),F(Ie,{key:6,label:i.control.label,control:i.control,onChange:o},null,8,["label","control"])):i.control.type==="button"?(m(),C("div",{key:7,class:R(["tl-p-2",i.control.value.size==="tl-block"?"tl-flex":"tl-inline-flex"])},[U(Xe,{label:i.control.label,control:i.control},null,8,["label","control"])],2)):(m(),F(fe,{key:8,label:i.control.label,control:i.control,onChange:o},null,8,["label","control"]))],64)):et("",!0)}}),We={class:"tl-mb-4"},Ze=["aria-expanded","data-folder"],Je={class:"tl-bg-white tl-rounded-b tl-pt-4",role:"menu"},Qe=D({__name:"Folder",props:{controls:{},label:{}},setup(a){function t(i,r){r.value=i}const e=b(!1),o=()=>{e.value=!e.value};return(i,r)=>(m(),C("div",We,[x("button",{class:"tl-flex tl-items-center tl-justify-between tl-w-full tl-py-2 tl-px-4 tl-bg-gray-100 tl-border-none tl-text-gray-400 tl-font-bold tl-text-xs tl-font-sans tl-cursor-pointer","aria-expanded":e.value,"aria-haspopup":"true",role:"button","data-folder":i.label,tabindex:"0",onClick:o},[x("span",null,N(i.label),1),x("i",{class:R(e.value?"i-ic:baseline-keyboard-arrow-up":"i-ic:baseline-keyboard-arrow-down")},null,2)],8,Ze),U($t,{name:"slide","enter-active-class":"tl-animate-fade-in tl-animate-duration-200 tl-animate-ease-in-out","leave-active-class":"tl-animate-fade-out tl-animate-duration-200 tl-animate-ease-in-out"},{default:ut(()=>[xt(x("div",Je,[(m(!0),C(z,null,q(i.controls,n=>(m(),F(Pt,{key:n.label,control:n,role:"menuitem",onChange:l=>t(l,n)},null,8,["control","onChange"]))),128))],512),[[St,e.value]])]),_:1})]))}}),ti={tabindex:"0",class:"tl-bg-white tl-shadow-xl tl-rounded tl-border-4 tl-border-solid tl-border-black"},ei=x("i",{class:"tl-h-4 tl-w-4 tl-p-1.5 tl-flex tl-items-center tl-line-height-0 tl-rounded-full tl-bg-gray-100 tl-text-xs"},"🍰",-1),ii=x("div",null,[x("i",{class:"i-ic-baseline-drag-indicator"}),x("i",{class:"i-ic-baseline-drag-indicator"}),x("i",{class:"i-ic-baseline-drag-indicator"})],-1),ni=x("div",null,null,-1),ai=[ei,ii,ni],oi=280,li=D({__name:"TresLeches",props:{uuid:{}},setup(a){const t=a,{uuid:e}=k(t),{width:o}=vt(),i=b(null),r=re(e==null?void 0:e.value);function n(s,h){r[M(s)].value=h,r[M(s)][M(s)]=h}const l=H(()=>{const s={};for(const h in r){const g=r[h],u=g.folder||"default";s[u]||(s[u]=[]),s[u].push(g)}return s});return(s,h)=>(m(),F(M(oe),{id:M(e),"initial-value":{x:M(o)-oi-40,y:10},class:R(["tl-absolute tl-select-none tl-z-24 tl-w-280px tl-font-sans tl-text-xs",s.$attrs.class]),handle:i.value},{default:ut(()=>[x("div",ti,[x("header",{ref_key:"handle",ref:i,class:"tl-relative tl-cursor-grabbing tl-p-4 tl-flex tl-justify-between tl-text-gray-200 tl-relative"},ai,512),(m(!0),C(z,null,q(l.value,(g,u)=>(m(),C(z,{key:u},[u!=="default"?(m(),F(Qe,{key:0,label:u,controls:g},null,8,["label","controls"])):et("",!0),u==="default"?(m(!0),C(z,{key:1},q(g,c=>(m(),F(Pt,{key:c.label,control:c,onChange:d=>n(c.key,d)},null,8,["control","onChange"]))),128)):et("",!0)],64))),128))])]),_:1},8,["id","initial-value","class","handle"]))}}),wi=D({__name:"lightningStorm",setup(a){const t=$({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:o,color:i,roughness:r,straightness:n,radius0:l,radius1:s,timeScale:h}=se({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(g,u)=>(m(),C(z,null,[U(Rt,{showAxesHelper:!1,showGridHelper:!1},{ability:ut(()=>[U(ee,{minHeight:M(e).value,maxHeight:M(o).value,color:M(i).value,roughness:M(r).value,straightness:M(n).value,radius0:M(l).value,radius1:M(s).value,timeScale:M(h).value},null,8,["minHeight","maxHeight","color","roughness","straightness","radius0","radius1","timeScale"]),U(M(Jt),Zt({args:[100,100]},t,{position:[0,-50,0]}),null,16)]),_:1}),U(M(li))],64))}});export{wi as default};

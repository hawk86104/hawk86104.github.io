import{m as e,e as s,E as a,o as r}from"./@tresjs.zc7faK4J1743660816268.js";import{c7 as l,c8 as n,V as t,c9 as o}from"./three.2wx8FU0g1743660816268.js";import{d as u,b as i,a2 as v,o as c,H as m,j as f,u as p,N as d,F as y,e as h,f as T,g}from"./@vue.B5PFBfKs1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";const _=u({__name:"ecLayers",setup(r){const{camera:u,renderer:h,scene:T,sizes:g}=e(),_=i(),j=i(),w=i();let x=null;const M=0,k=.972,B=.21;v((()=>{_.value&&_.value.instance.layers.set(0),j.value&&j.value.layers.set(1),w.value&&w.value.layers.set(2),g.width.value&&((e,s,a,r,u)=>{const i=new l(e,s),v=new n(new t(r,u),k,B,M);x=new o(a),x.addPass(i),x.addPass(v)})(T.value,u.value,h.value,g.width.value,g.height.value)}));const{onLoop:C}=s();return C((()=>{x&&u.value&&(h.value.clear(),u.value.layers.set(1),x.render(),h.value.clearDepth(),u.value.layers.set(0),h.value.render(T.value,u.value))})),(e,s)=>(c(),m(y,null,[f(p(a),{ref_key:"normalBox",ref:_,args:[1,1,1],color:"orange",position:[3,2,1]},null,512),d("TresMesh",{ref_key:"shineBox",ref:j,position:[0,2,-4]},s[0]||(s[0]=[d("TresBoxGeometry",{args:[1,1,1]},null,-1),d("TresMeshNormalMaterial",null,null,-1)]),512),d("TresMesh",{ref_key:"filmBox",ref:w,position:[1,2,3]},s[1]||(s[1]=[d("TresBoxGeometry",{args:[1,1,1]},null,-1),d("TresMeshNormalMaterial",null,null,-1)]),512)],64))}}),j=u({__name:"effectComposerLayers",setup(e){const s=i();return v((()=>{if(s.value){s.value.context.renderer.value.autoClear=!1}})),(e,a)=>{const l=h("TresCanvas");return c(),T(l,{ref_key:"tcRef",ref:s,renderMode:"manual","window-size":""},{default:g((()=>[a[0]||(a[0]=d("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),a[1]||(a[1]=d("TresAmbientLight",{intensity:1},null,-1)),f(p(r)),a[2]||(a[2]=d("TresGridHelper",{args:[10,10]},null,-1)),f(_)])),_:1},512)}}});export{j as default};

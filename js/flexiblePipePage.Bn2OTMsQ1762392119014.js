import{_ as e,K as a}from"./@tresjs.hGs-POUu1762392119014.js";import"./OimoPhysicsBuffer.Bm1-uN4Y1762392119014.js";import{_ as t}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.CNrw3GKO1762392119014.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DZ0IZ-Ox1762392119014.js";import{i as s}from"./Resource.S1Cir9aE1762392119014.js";import"./PackedMipMapGenerator.vFejDEUx1762392119014.js";import{P as i}from"./tweakpane.CqZAnw7f1762392119014.js";import{b as l}from"./buildFlexiblePipe.BXS4_4XU1762392119014.js";import{d as n,a as r,w as o,G as d,o as p,I as m,r as u,g,b as f,e as c,h,u as b,a9 as j,aa as _,m as v}from"./@vue.DQUdVfVE1762392119014.js";import{aa as x,V as y,b as L,aE as w,a6 as B}from"./three.CDsL_76W1762392119014.js";import"./postprocessing.fZnJ7mZA1762392119014.js";import"./@vueuse.CnFTmRHc1762392119014.js";import"./oimophysics.CfVKSiAm1762392119014.js";import"./dither.glsl.tNAdkJUa1762392119014.js";import"./Reflector.CNoJMSWJ1762392119014.js";import"./vite-plugin-qiankun.B06WoCqG1762392119014.js";import"./utils.CNife3_q1762392119014.js";import"./object-hash.CF39HzT91762392119014.js";import"./@amap.fjyZdsU91762392119014.js";import"./jszip.LyM0NlAT1762392119014.js";import"./three-stdlib.DtFXvC-s1762392119014.js";const T={renderOrder:9999},R=["args"],A=["color","side","map"],M=n({__name:"flexiblePipe",props:{color:{default:"0xff0000"},radius:{default:.1},bodyLength:{default:2},headLength:{default:1},headAngle:{default:0},radialSegments:{default:16},tailAngle:{default:0},tailLength:{default:.5},filletRadius:{default:.3},speed:{default:.01}},setup(a){const t=a,i=r(new x);o(()=>[t.bodyLength,t.headLength,t.headAngle,t.tailAngle,t.tailLength,t.filletRadius,t.radialSegments],([e,a,t,s,n,r,o])=>{const d=e/2,p=new y(0,0,-d),m=new y(0,0,d),u=L.degToRad(t),g=new y(Math.cos(u),Math.sin(u),0),f=m.clone().add(g.multiplyScalar(a)),c=L.degToRad(s),h=new y(Math.cos(c),Math.sin(c),0),b=[p.clone().add(h.multiplyScalar(n)),p,m,f];i.value=l(b,r,o)},{immediate:!0}),s.getResource("TextureLoader","./plugins/digitalCity/image/line.png","line.png");const n=s.getReactiveItem("line.png"),u=r(null);o(n,e=>{e?.isTexture&&(u.value=e.clone(),u.value.wrapS=u.value.wrapT=w,u.value.needsUpdate=!0)},{immediate:!0});const g=r(null),{onBeforeRender:f}=e();return f(()=>{u.value&&(u.value.offset.x-=t.speed)}),(e,a)=>(p(),d("TresMesh",T,[m("TresTubeGeometry",{args:[i.value,64,e.radius,e.radialSegments,!1]},null,8,R),m("TresMeshBasicMaterial",{ref_key:"tmsmRef",ref:g,color:e.color,metalness:.3,roughness:.5,side:B,transparent:"",map:u.value?u.value:null},null,8,A)]))}}),S=n({__name:"flexiblePipePage",setup(e){const s={clearColor:"#15151a",antialias:!1,logarithmicDepthBuffer:!0},l={autoRotate:!0},n=u({color:"#ff0000",radius:.1,bodyLength:2,headLength:1,tailLength:.5,headAngle:0,radialSegments:16,tailAngle:0,speed:.01}),r=new i({title:"参数"});return r.addBinding(n,"color",{label:"颜色"}),r.addBinding(n,"radius",{label:"管道粗细",min:.001,max:1,step:.001}),r.addBinding(n,"bodyLength",{label:"中间长度",min:.1,max:10,step:.1}),r.addBinding(n,"headLength",{label:"前段长度",min:0,max:10,step:.1}),r.addBinding(n,"headAngle",{label:"前段角度",min:0,max:359,step:1}),r.addBinding(n,"tailLength",{label:"后段长度",min:0,max:10,step:.1}),r.addBinding(n,"tailAngle",{label:"后段角度",min:0,max:359,step:1}),r.addBinding(n,"radialSegments",{label:"管平滑",min:2,max:16,step:1}),r.addBinding(n,"speed",{label:"速度",min:-.1,max:.1,step:.001}),(e,i)=>{const r=g("TresCanvas");return p(),f(r,v(s,{"window-size":""}),{default:c(()=>[i[0]||(i[0]=m("TresPerspectiveCamera",{position:[0,10,15],fov:25,near:.1,far:1e4},null,-1)),h(b(a),j(_(l)),null,16),i[1]||(i[1]=m("TresAmbientLight",{color:"#ffffff",intensity:2},null,-1)),h(b(t),{position:[0,-1.562,0],reflectivity:2.6,showGridHelper:!1,scale:1.5}),h(M,j(_(n)),null,16)]),_:1},16)}}});export{S as default};

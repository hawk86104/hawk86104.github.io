import{P as e}from"./tweakpane.CqZAnw7f1763541780170.js";import{F as o,n as a,N as s,K as t}from"./@tresjs.MD0a_GHJ1763541780170.js";import"./OimoPhysicsBuffer.BCl5B0L-1763541780170.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DxkUPSMe1763541780170.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.D34gkB8O1763541780170.js";import"./Resource.Cw8OnALu1763541780170.js";import"./PackedMipMapGenerator.lj9KyKtn1763541780170.js";import{aE as i,o as n,V as l,E as p,dx as m,dy as d}from"./three.F31Lz30M1763541780170.js";import{g as c}from"./gsap.CY1N3EIL1763541780170.js";import{d as f,w as u,G as g,o as v,H as y,u as h,r as j,g as _,b as M,e as b,I as x,h as w,ah as C,m as I}from"./@vue.D9fSGD371763541780170.js";import"./postprocessing.CQ_CcmSv1763541780170.js";import"./@vueuse.C5rlNtd31763541780170.js";import"./oimophysics.CfVKSiAm1763541780170.js";import"./dither.glsl.tNAdkJUa1763541780170.js";import"./Reflector.CODhdXeQ1763541780170.js";import"./vite-plugin-qiankun.B06WoCqG1763541780170.js";import"./utils.CNife3_q1763541780170.js";import"./object-hash.Bg6hZt921763541780170.js";import"./@amap.fjyZdsU91763541780170.js";import"./jszip.DlMTIJ0v1763541780170.js";import"./three-stdlib.lHESeGzj1763541780170.js";const P=["object"],R=f({__name:"hexagonalFloor",props:{floorColor:{default:"#ff0000"},floorMetalness:{default:.8},floorRoughness:{default:.2},floorEnvMapIntensity:{default:2.5},sideColor:{default:"#ffffff"},sideOpacity:{default:.9},speed:{default:.3}},setup(e){const{renderer:t,scene:r}=o(),f=e,{state:j}=a("./plugins/floor/image/concrete_wet_floor_basecolor.jpg");u(j,e=>{e&&(e.wrapS=i,e.wrapT=i,e.repeat.set(10,10))});const{state:_}=s("https://opensource.cdn.icegl.cn/model/floor/baseModelI.glb",{draco:!0,decoderPath:"./draco/"}),M=[],b=c.timeline();u(()=>_.value,e=>{if(!e.scene)return;e.scene.traverse(e=>{if(e instanceof n){const o=e.position.clone(),a=e.rotation.clone(),s=Math.random()-.5,t=new l(o.x,o.y+s,o.z),r=Math.PI/12,i=new p(a.x+(Math.random()-.5)*r,a.y+(Math.random()-.5)*r,a.z);M.push({mesh:e,originalPosition:o,scatteredPosition:t,originalRotation:a,scatteredRotation:i}),e.name.includes("_")?(e.material.emissiveIntensity=2,e.material.metalness=1,e.material.roughness=0,e.material.transparent=!0):e.material.map=j.value,e.material.needsUpdate=!0}}),M.forEach(({mesh:e,scatteredPosition:o,scatteredRotation:a},s)=>{b.to(e.position,{x:o.x,y:o.y,z:o.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0),b.to(e.rotation,{x:a.x,y:a.y,z:a.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0)}),x()});const x=()=>{const e=new m(t),o=new d,a=e.fromScene(o).texture;r.value.environment=a,_.value.scene.traverse(e=>{e instanceof n&&e.material&&(e.material.envMap=a,e.material.needsUpdate=!0)}),o.dispose(),w(f.sideColor,f.floorColor,f.sideOpacity,f.floorMetalness,f.floorRoughness,f.floorEnvMapIntensity)},w=(e,o,a,s,t,r)=>{_.value?.scene&&_.value.scene.traverse(i=>{i instanceof n&&i.material&&(i.name.includes("_")?(i.material.emissive.set(e),i.material.opacity=a):(i.material.color.set(o),i.material.metalness=s,i.material.roughness=t,i.material.envMapIntensity=r))})};return u(()=>[f.sideColor,f.floorColor,f.sideOpacity,f.floorMetalness,f.floorRoughness,f.floorEnvMapIntensity],([e,o,a,s,t,r])=>{w(e,o,a,s,t,r)}),u(()=>[f.speed],([e])=>{b.timeScale(e)},{immediate:!0}),(e,o)=>(v(),g("TresGroup",null,[h(_)?(v(),g("primitive",{key:0,object:h(_)?.scene,position:[0,-.1,0]},null,8,P)):y("",!0)]))}}),z=f({__name:"hexagonalFloorPage",setup(o){const a=j({floorColor:"#ff0000",floorMetalness:.8,floorRoughness:.2,floorEnvMapIntensity:2.5,sideColor:"#000000",sideOpacity:.56,speed:.1}),s=new e({expanded:!0});return s.addBinding(a,"floorColor",{label:"地板颜色"}),s.addBinding(a,"floorMetalness",{label:"地板金属度",min:0,max:1}),s.addBinding(a,"floorRoughness",{label:"地板粗糙度",min:0,max:1}),s.addBinding(a,"floorEnvMapIntensity",{label:"地板环境光强度",min:0,max:10}),s.addBinding(a,"sideColor",{label:"侧面颜色"}),s.addBinding(a,"sideOpacity",{label:"侧面透明度",min:0,max:1}),s.addBinding(a,"speed",{label:"动画速度",min:0,max:1,step:.01}),(e,o)=>{const s=_("TresCanvas");return v(),M(s,{clearColor:"#000000","window-size":""},{default:b(()=>[o[0]||(o[0]=x("TresPerspectiveCamera",{position:[6,6,0],fov:45,near:.1,far:1e4},null,-1)),w(h(t),{enableDamping:""}),(v(),M(C,null,{default:b(()=>[w(h(R),I(a,{scale:2,position:[0,.5,0]}),null,16)]),_:1})),w(r,{reflectivity:1,showGridHelper:!1,scale:2})]),_:1})}}});export{z as default};

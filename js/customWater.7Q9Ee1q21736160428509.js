import{_ as e,C as t,a0 as n}from"./three.rmsIv-u_1736160428509.js";import{e as r,W as a,U as o,c as s}from"./@tresjs.8MtVPQyb1736160428509.js";import{b as i}from"./index.er1mwMyA1736160428509.js";import"./index.Igg9XOw61736160428509.js";import{z as l}from"./three-custom-shader-material._2dHD2wr1736160428509.js";import{p as u}from"./gl-noise.BrVtymbx1736160428509.js";import{d as c,b as p,a1 as f,w as g,o as h,D as v,J as m,j as d,u as _,r as b,f as y,g as w,aj as M,ak as x,m as j,al as C}from"./@vue.4u_eOGex1736160428509.js";import{P as S}from"./tweakpane.yHWGBmom1736160428509.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.TnTPNj2i1736160428509.js";import"./@vueuse.GObPVvIB1736160428509.js";import"./three-stdlib.MDmepMCW1736160428509.js";import"./@pmndrs.4WMPGHRZ1736160428509.js";import"./object-hash.6_ROEVvk1736160428509.js";import"./@amap.uuGbEc9W1736160428509.js";import"./jszip.gYriRClA1736160428509.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Gb__Qx-y1736160428509.js";import"./all.three._2K49LgC1736160428509.js";import"./oimophysics.x0jH7fze1736160428509.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.NEfY280X1736160428509.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.OmKZXs_e1736160428509.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.5qYCEkqW1736160428509.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.YtuzXWEt1736160428509.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.p-vnqqOj1736160428509.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.8zE_avPN1736160428509.js";const I=H;!function(e,t){const n=H,r=B();for(;;)try{if(258117===-parseInt(n(410))/1*(parseInt(n(404))/2)+-parseInt(n(453))/3+-parseInt(n(432))/4+-parseInt(n(405))/5*(parseInt(n(406))/6)+-parseInt(n(418))/7*(parseInt(n(402))/8)+-parseInt(n(393))/9*(parseInt(n(397))/10)+parseInt(n(421))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[H(407)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function B(){const e=["height","17916052wmkQsY","TresBoxGeometry","waterHighlight","exception","debu","__proto__","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","input","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","986192uMyQBn","vertexShader","MeshPhysicalMaterial","info","Color","value","args","gger","fragment","console","return (function() ","Flatshading","DoubleSide","action","tmRef","log","test","flatShading","convertLinearToSRGB","trace",'{}.constructor("return this")( )',"652317UZpPEn","2323071EbEQkJ","#b3ffff","length","dispose","10egqaBZ","vertex","material","warn","baseMaterial","24uIWdzy","string","2sxKWRa","10SCJNqu","533622IdQCwX","apply","TresMesh","chain","455878iZpPmS","init","toString","bind","function *\\( *\\)","#52a7f7","brightness","waterColor","34433XThPIM","error"];return(B=function(){return e})()}!function(){T(this,(function(){const e=H,t=new RegExp(e(414)),n=new RegExp(e(430),"i"),r=P(e(411));t.test(r+e(409))&&n[e(448)](r+e(428))?P():r("0")}))()}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[H(407)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();G(void 0,(function(){const e=H,t=function(){const e=H;let t;try{t=Function(e(442)+e(452)+");")()}catch(n){t=window}return t}(),n=t.console=t[e(441)]||{},r=[e(447),e(400),e(435),e(419),e(424),"table",e(451)];for(let a=0;a<r[e(395)];a++){const t=G[e(431)].prototype[e(413)](G),o=r[a],s=n[o]||t;t[e(426)]=G[e(413)](G),t[e(412)]=s.toString[e(413)](s),n[o]=t}}))();const W=["rotation-x"],D=[I(438)];function H(e,t){const n=B();return(H=function(e,t){return n[e-=393]})(e,t)}const O=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(415)},waterHighlight:{default:I(394)},brightness:{default:1},baseMaterial:{default:e[I(434)]}},setup(o){const s=I,i=o,c=p(null),b={vertex:s(427),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},y={uTime:{value:0},waterColor:{value:new t(i[s(417)])[s(450)]()},waterHighlight:{value:new t(i[s(423)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i.brightness},uHeight:{value:i[s(420)]}},{onLoop:w}=r();return w((({elapsed:e})=>{y.uTime.value=-e/5})),f((()=>{const t=s;i.height&&(y.uHeight[t(437)]=i[t(420)]),i[t(417)]&&(y[t(417)][t(437)]=new(e[t(436)])(i[t(417)])[t(450)]()),i[t(423)]&&(y[t(423)].value=new(e[t(436)])(i[t(423)]).convertLinearToSRGB()),i[t(416)]&&(y[t(416)][t(437)]=i[t(416)])})),g((()=>i[s(443)]),(e=>{const t=s;c.value[t(399)].needsUpdate=!0})),g((()=>i[s(401)]),(t=>{const r=s,a=new l({baseMaterial:e[t],vertexShader:u(b.vertex),fragmentShader:b[r(440)],uniforms:y,flatShading:i[r(443)],side:n,roughness:.2,metalness:.1,silent:!0});c.value[r(399)][r(396)](),c[r(437)][r(399)]=a})),(t,n)=>{const r=s;return h(),v(r(408),{ref_key:r(446),ref:c,"rotation-x":-Math.PI/2},[m(r(422),{args:[5,5,t[r(420)],64,64,1]},null,8,D),d(_(a),{baseMaterial:e[r(434)],vertexShader:_(u)(b[r(398)]),fragmentShader:b[r(440)],uniforms:y,side:e[r(444)],roughness:.2,metalness:.1,flatShading:t[r(443)],silent:""},null,8,[r(401),r(433),"fragmentShader","side",r(449)])],8,W)}}});function P(e){function t(e){const n=H;if(typeof e===n(403))return function(e){}[n(431)](n(429))[n(407)]("counter");1!==(""+e/e).length||e%20==0?function(){return!0}[n(431)](n(425)+n(439)).call(n(445)):function(){return!1}[n(431)](n(425)+n(439))[n(407)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}function k(e,t){const n=R();return(k=function(e,t){return n[e-=215]})(e,t)}!function(e,t){const n=k,r=R();for(;;)try{if(373918===-parseInt(n(238))/1*(parseInt(n(228))/2)+parseInt(n(256))/3*(parseInt(n(235))/4)+parseInt(n(261))/5+-parseInt(n(219))/6+-parseInt(n(259))/7+-parseInt(n(278))/8+parseInt(n(223))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[k(222)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){F(this,(function(){const e=k,t=new RegExp(e(269)),n=new RegExp(e(237),"i"),r=L(e(255));t[e(221)](r+e(275))&&n[e(221)](r+e(215))?L():r("0")}))()}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[k(222)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function R(){const e=["action","水体颜色","MeshDepthMaterial","neg-y.jpg","MeshBasicMaterial","MeshNormalMaterial","change","MeshPhongMaterial","return (function() ","waterHighlight","pos-y.jpg","constructor","toString","init","3afchMp","prototype","#627179","1467893VNQbJD","TresPerspectiveCamera","1638810qaafKJ","#3a78a2","#52a7f7","ACESFilmicToneMapping","label","gger","while (true) {}","value","function *\\( *\\)","MeshToonMaterial","debu","brightness","stateObject","target","chain","TresAmbientLight","height","4563328lulAJL","bind","input","MeshPhysicalMaterial","trace","counter","3824622upuDNX","length","test","apply","11669175CknSfL","addBinding","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","neg-x.jpg","TresDirectionalLight","230xysoYt","console","Flatshading","MeshLambertMaterial","string","info","baseMaterial","980412CmvZcb","addBlade","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","678kSnOCy","neg-z.jpg","exception","table"];return(R=function(){return e})()}N(void 0,(function(){const e=k;let t;try{t=Function(e(250)+'{}.constructor("return this")( ));')()}catch(a){t=window}const n=t[e(229)]=t.console||{},r=["log","warn",e(233),"error",e(240),e(241),e(217)];for(let o=0;o<r[e(220)];o++){const t=N[e(253)][e(257)][e(279)](N),a=r[o],s=n[a]||t;t.__proto__=N[e(279)](N),t[e(254)]=s[e(254)][e(279)](s),n[a]=t}}))();const A=c({__name:"customWater",setup(t){const n=k,r=b({alpha:!0,toneMapping:e[n(264)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(258),sectionColor:n(262),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(263),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(216)}),c=new S;return c[n(224)](u,n(277),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,"waterColor",{label:n(243)}),c[n(224)](u,n(251),{label:"浪头颜色"}),c[n(224)](u,n(272),{label:"亮度",min:0,max:1,step:.01}),c[n(224)](u,n(230),{label:"Flatshading"}),c[n(236)]({view:"list",label:"材质",options:[{text:n(216),value:n(216)},{text:n(246),value:n(246)},{text:n(247),value:n(247)},{text:"MeshStandardMaterial",value:"MeshStandardMaterial"},{text:n(249),value:n(249)},{text:n(270),value:n(270)},{text:n(231),value:n(231)},{text:"MeshDepthMaterial",value:n(244)}],value:u[n(234)]}),c.on(n(248),(e=>{const t=n;"材质"===e[t(274)][t(265)]&&(u.baseMaterial=e[t(268)])})),(e,t)=>{const c=n;return h(),y(_(s),j(r,{"window-size":""}),{default:w((()=>[t[0]||(t[0]=m(c(260),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),M(x(a)),null,16),t[1]||(t[1]=m(c(276),{intensity:.5},null,-1)),t[2]||(t[2]=m(c(227),{position:[15,15,15],intensity:1},null,-1)),d(O,M(x(u)),null,16),d(_(z),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),y(C,null,{default:w((()=>[d(_(i),{files:["pos-x.jpg",c(226),c(252),c(245),"pos-z.jpg",c(239)],path:c(225)})])),_:1}))])),_:1},16)}}});function L(e){function t(e){const n=k;if(typeof e===n(232))return function(e){}[n(253)](n(267)).apply(n(218));1!==(""+e/e)[n(220)]||e%20==0?function(){return!0}[n(253)](n(271)+"gger").call(n(242)):function(){return!1}[n(253)](n(271)+n(266)).apply(n(273)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

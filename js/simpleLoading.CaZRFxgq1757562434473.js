import{e as t,a as e,d as o}from"./@tresjs.Cox_Ej0K1757562434473.js";import{i as a}from"./Resource.BowyBt9V1757562434473.js";import"./@fesjs.B-eV0iDW1757562434473.js";/* empty css                                                                             */import{l as s}from"./yangyangLoading.CrSUe6I31757562434473.js";import"./three-mesh-ui.module.CVvu0VoA1757562434473.js";/* empty css                                                              */import{d as n,w as i,G as r,o as l,u as p,F as u,I as d,j as c,W as m,h,f as g,e as j,H as f,m as _}from"./@vue.pEDXJ_3Z1757562434473.js";import"./three.CMHPKQCP1757562434473.js";import"./postprocessing.mBO420ZZ1757562434473.js";import"./@vueuse.CO9YPEko1757562434473.js";import"./vue-router.DJjrSDwT1757562434473.js";import"./lodash-es.C7pWAXPe1757562434473.js";import"./pinia.BfnF9Own1757562434473.js";import"./@qlin.q6OWdsQV1757562434473.js";import"./@babel.BPq7uOAK1757562434473.js";import"./@floating-ui.BFjFSAYt1757562434473.js";import"./@juggle.CcBCnTIR1757562434473.js";import"./utils.CsnUis9b1757562434473.js";const y=["object"],M=n({__name:"airplane",props:{planet:{}},setup(e){const o=e,{scene:s}=a.getItem("airplane.gltf"),n=s;n.rotation.set(0,Math.PI,0),s.traverse((t=>{t.isMesh&&(t.castShadow=!0)})),n.updateMatrixWorld();const{onLoop:u}=t();i((()=>o.planet),(t=>{if(!t)return;t.geometry.computeBoundingSphere();const e=Math.abs(1|t.geometry.boundingSphere?.radius);n.position.set(e,0,0),n.lookAt(t.position)}));let d=0;return u((({delta:t})=>{if(!n||!o.planet)return;const e=Math.abs(o.planet.geometry.boundingSphere.radius)+.5;d+=.2*t;const a=e*Math.cos(d),s=e*Math.sin(d);n.position.x=a,n.position.z=s,n.rotation.z=-Math.PI/2,n.rotation.y=-d,n.updateMatrixWorld()})),(t,e)=>(l(),r("primitive",{object:p(n)},null,8,y))}}),v=["object"],L=n({__name:"cloud",props:{planet:{}},setup(e){const o=e,{scene:s}=a.getItem("cloud.gltf"),n=s.children[0];function u(t,e){const o=Math.random()*(e-t)+t;return Math.random()<.5?-o:o}n.castShadow=!0,n.position.set(u(-8,8),u(.5,1),u(-8,8));const d=u(.5,1);n.scale.set(d,d,d),n.updateMatrixWorld(),i((()=>o.planet),(t=>{t&&(n.lookAt(t.position),n.updateMatrixWorld())}));const{onLoop:c}=t();let m=u(-1,1)*Math.PI;const h=Math.random()/10;return c((({delta:t})=>{if(!n)return;const e=Math.abs(o.planet.geometry.boundingSphere.radius-.5);m+=t*h;const a=e*Math.cos(m),s=e*Math.sin(m);n.position.x=a,n.position.z=s,n.rotation.y=-m,n.lookAt(o.planet.position),n.updateMatrixWorld()})),(t,e)=>(l(),r("primitive",{object:p(s),"cast-shadow":""},null,8,v))}}),b=["object"],w=n({__name:"planet",setup(e){const{nodes:o}=a.getItem("planet.gltf"),s=o.Planet,n=o.Icosphere;s.traverse((t=>{t.isMesh&&(t.receiveShadow=!0)}));const{onLoop:i}=t();return i((({delta:t})=>{s&&(s.rotation.y+=.04*t,s.rotation.z+=.02*t,s.rotation.x+=.05*t,s.updateMatrixWorld())})),(t,e)=>(l(),r(u,null,[d("primitive",{object:p(s)},null,8,b),c(M,{planet:p(n)},null,8,["planet"]),(l(),r(u,null,m([1,2,3,4,5,6,7,8,9],(t=>c(L,{key:t,planet:p(n)},null,8,["planet"]))),64))],64))}}),x=n({__name:"simpleLoading",setup(t){const n={alpha:!1,clearColor:"#11101B",shadows:!0,useLegacyLights:!0};return a.loadResources([{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/planet.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/airplane.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/cloud.gltf"}]),(t,i)=>{const m=h("TresCanvas");return l(),r(u,null,[c(p(s),{useResourceManager:""}),c(m,_(n,{"window-size":""}),{default:g((()=>[i[0]||(i[0]=d("TresPerspectiveCamera",{position:[0,.5,3],fov:75,near:.1,far:1e3},null,-1)),c(p(e)),i[1]||(i[1]=d("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),i[2]||(i[2]=d("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),i[3]||(i[3]=d("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1)),c(p(o),{radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0}),p(a).hasAllFinished.value?(l(),j(w,{key:0})):f("",!0)])),_:1},16)],64)}}});export{x as default};

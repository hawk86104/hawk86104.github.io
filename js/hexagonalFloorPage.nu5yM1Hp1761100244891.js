import{P as e}from"./tweakpane.CqZAnw7f1761100244891.js";import{F as a,n as o,N as s,K as t}from"./@tresjs.DqJWjmrH1761100244891.js";import"./OimoPhysicsBuffer.RP9_cA631761100244891.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.C3soJrEE1761100244891.js";import"./vanilla.esm.5.5.0.CsbunUBT1761100244891.js";import"./Resource.mX5inOAT1761100244891.js";import"./PackedMipMapGenerator.D8sBv6ND1761100244891.js";import{aE as i,o as n,V as l,E as p,c_ as m,c$ as d}from"./three.DvmzhRS91761100244891.js";import{g as c}from"./gsap.CY1N3EIL1761100244891.js";import{d as f,w as u,G as g,o as v,H as h,u as y,r as j,g as M,b as _,e as b,I as x,h as w,ap as C,m as I}from"./@vue.CKlgtJke1761100244891.js";import"./postprocessing.CYU4Fj-U1761100244891.js";import"./@vueuse.mZcBai3M1761100244891.js";import"./oimophysics.CfVKSiAm1761100244891.js";import"./dither.glsl.tNAdkJUa1761100244891.js";import"./Reflector.C-cnab8L1761100244891.js";import"./vite-plugin-qiankun.B06WoCqG1761100244891.js";import"./utils.CNife3_q1761100244891.js";import"./object-hash.zo7S6bgL1761100244891.js";import"./@amap.fjyZdsU91761100244891.js";import"./jszip.DTlig5CR1761100244891.js";import"./three-stdlib.Bkbtr8od1761100244891.js";const P=["object"],R=f({__name:"hexagonalFloor",props:{floorColor:{default:"#ff0000"},floorMetalness:{default:.8},floorRoughness:{default:.2},floorEnvMapIntensity:{default:2.5},sideColor:{default:"#ffffff"},sideOpacity:{default:.9},speed:{default:.3}},setup(e){const{renderer:t,scene:r}=a(),f=e,{state:j}=o("./plugins/floor/image/concrete_wet_floor_basecolor.jpg");u(j,e=>{e&&(e.wrapS=i,e.wrapT=i,e.repeat.set(10,10))});const{state:M}=s("https://opensource.cdn.icegl.cn/model/floor/baseModelI.glb",{draco:!0,decoderPath:"./draco/"}),_=[],b=c.timeline();u(()=>M.value,e=>{if(!e.scene)return;e.scene.traverse(e=>{if(e instanceof n){const a=e.position.clone(),o=e.rotation.clone(),s=Math.random()-.5,t=new l(a.x,a.y+s,a.z),r=Math.PI/12,i=new p(o.x+(Math.random()-.5)*r,o.y+(Math.random()-.5)*r,o.z);_.push({mesh:e,originalPosition:a,scatteredPosition:t,originalRotation:o,scatteredRotation:i}),e.name.includes("_")?(e.material.emissiveIntensity=2,e.material.metalness=1,e.material.roughness=0,e.material.transparent=!0):e.material.map=j.value,e.material.needsUpdate=!0}}),_.forEach(({mesh:e,scatteredPosition:a,scatteredRotation:o},s)=>{b.to(e.position,{x:a.x,y:a.y,z:a.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0),b.to(e.rotation,{x:o.x,y:o.y,z:o.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0)}),x()});const x=()=>{const e=new m(t),a=new d,o=e.fromScene(a).texture;r.value.environment=o,M.value.scene.traverse(e=>{e instanceof n&&e.material&&(e.material.envMap=o,e.material.needsUpdate=!0)}),a.dispose(),w(f.sideColor,f.floorColor,f.sideOpacity,f.floorMetalness,f.floorRoughness,f.floorEnvMapIntensity)},w=(e,a,o,s,t,r)=>{M.value?.scene&&M.value.scene.traverse(i=>{i instanceof n&&i.material&&(i.name.includes("_")?(i.material.emissive.set(e),i.material.opacity=o):(i.material.color.set(a),i.material.metalness=s,i.material.roughness=t,i.material.envMapIntensity=r))})};return u(()=>[f.sideColor,f.floorColor,f.sideOpacity,f.floorMetalness,f.floorRoughness,f.floorEnvMapIntensity],([e,a,o,s,t,r])=>{w(e,a,o,s,t,r)}),u(()=>[f.speed],([e])=>{b.timeScale(e)},{immediate:!0}),(e,a)=>(v(),g("TresGroup",null,[y(M)?(v(),g("primitive",{key:0,object:y(M)?.scene,position:[0,-.1,0]},null,8,P)):h("",!0)]))}}),z=f({__name:"hexagonalFloorPage",setup(a){const o=j({floorColor:"#ff0000",floorMetalness:.8,floorRoughness:.2,floorEnvMapIntensity:2.5,sideColor:"#000000",sideOpacity:.56,speed:.1}),s=new e({expanded:!0});return s.addBinding(o,"floorColor",{label:"地板颜色"}),s.addBinding(o,"floorMetalness",{label:"地板金属度",min:0,max:1}),s.addBinding(o,"floorRoughness",{label:"地板粗糙度",min:0,max:1}),s.addBinding(o,"floorEnvMapIntensity",{label:"地板环境光强度",min:0,max:10}),s.addBinding(o,"sideColor",{label:"侧面颜色"}),s.addBinding(o,"sideOpacity",{label:"侧面透明度",min:0,max:1}),s.addBinding(o,"speed",{label:"动画速度",min:0,max:1,step:.01}),(e,a)=>{const s=M("TresCanvas");return v(),_(s,{clearColor:"#000000","window-size":""},{default:b(()=>[a[0]||(a[0]=x("TresPerspectiveCamera",{position:[6,6,0],fov:45,near:.1,far:1e4},null,-1)),w(y(t),{enableDamping:""}),(v(),_(C,null,{default:b(()=>[w(y(R),I(o,{scale:2,position:[0,.5,0]}),null,16)]),_:1})),w(r,{reflectivity:1,showGridHelper:!1,scale:2})]),_:1})}}});export{z as default};

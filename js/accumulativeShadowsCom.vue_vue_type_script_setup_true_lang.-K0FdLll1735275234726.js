import{V as t,c as n,_ as e}from"./three.jpi2UCEx1735275234726.js";import{m as o}from"./@tresjs.fCqPNEAw1735275234726.js";import{d as a,P as r}from"./@pmndrs.fIuOSuk41735275234726.js";import{d as s,b as i,w as c,a3 as u,o as l,D as p,J as d,aj as f,ak as h}from"./@vue.u2cBPEWn1735275234726.js";const m=M;function w(){const t=["46efMVpK","height","32427cpeAJn","shadows render end","top","init","lightPosition","DirectionalLight","28PFgDZK","#000000","random","radius","blendWindow","update","accumulativeShadowsCom","near","trace","470XolVgb","texture","counter","rotate-x","return (function() ",'{}.constructor("return this")( )',"abs","119160aCSEKJ","length","width","test","TresMesh","constructor","prototype","gPlane","randFloatSpread","position","amount","children","9308871mcfvBT","56HVxImi","prepare","material","camera","TresSoftShadowMaterial","warn","1878425APNcqm","info","shadow","string","clear","cos","1240144EtqnDQ","gger","stateObject","remove","apply","intensity","debu","2419086EIKRKP","ambient","value","mapSize","bottom","chain","bind","far","MathUtils","error","toString","frames","action","bias","sin","configure","color","set","size","3658adohrQ","shadows plm update","opacity","add","exception","blend","alphaTest","input","progressiveLightMap2","acos","log"];return(w=function(){return t})()}!function(t,n){const e=M,o=w();for(;;)try{if(501298===parseInt(e(464))/1*(-parseInt(e(453))/2)+parseInt(e(402))/3*(parseInt(e(415))/4)+parseInt(e(421))/5+-parseInt(e(434))/6+-parseInt(e(472))/7*(parseInt(e(427))/8)+-parseInt(e(466))/9*(parseInt(e(395))/10)+parseInt(e(414))/11)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){g(this,(function(){const t=M,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=S(t(469));n[t(405)](o+t(439))&&e[t(405)](o+t(460))?S():o("0")}))()}();const b=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(431)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function M(t,n){const e=w();return(M=function(t,n){return e[t-=390]})(t,n)}b(void 0,(function(){const t=M;let n;try{n=Function(t(399)+t(400)+");")()}catch(a){n=window}const e=n.console=n.console||{},o=[t(463),t(420),t(422),t(443),t(457),"table",t(394)];for(let r=0;r<o[t(403)];r++){const n=b.constructor[t(408)].bind(b),a=o[r],s=e[a]||n;n.__proto__=b[t(440)](b),n.toString=s[t(444)][t(440)](s),e[a]=n}}))();const y=[m(398)],I=s({__name:m(392),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(473)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,g=s;let b=i();const{extend:M,scene:I,renderer:S,camera:v}=o();M({SoftShadowMaterial:a});const x={position:(new t)[w(451)](g[w(470)].x,g[w(470)].y,g.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},P=new r(S.value,I[w(436)],x[w(437)]),z={map:P[w(461)][w(396)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(458)],alphaTest:g[w(459)],opacity:g.opacity,color:g.color},_=new n;for(let t=0;t<x[w(412)];t++){const t=new(e[w(471)])(16777215,x[w(432)]/x[w(412)]);t.castShadow=!0,t[w(423)][w(447)]=x.bias,t.shadow[w(418)][w(393)]=x.near,t.shadow[w(418)][w(441)]=x.far,t[w(423)][w(418)].right=x[w(452)]/2,t[w(423)].camera.left=-x[w(452)]/2,t.shadow.camera[w(468)]=x[w(452)]/2,t[w(423)][w(418)][w(438)]=-x.size/2,t[w(423)][w(437)][w(404)]=x[w(437)],t.shadow[w(437)][w(465)]=x.mapSize,_[w(456)](t)}const j=()=>{const t=w,n=x.position[t(403)]();for(let o=0;o<_.children[t(403)];o++){const a=_[t(413)][o];if(Math.random()>g[t(435)])a[t(411)][t(451)](x[t(411)].x+e[t(442)].randFloatSpread(x.radius),x[t(411)].y+e[t(442)][t(410)](x[t(475)]),x.position.z+e[t(442)][t(410)](x[t(475)]));else{let e=Math[t(462)](2*Math.random()-1)-Math.PI/2,o=2*Math.PI*Math[t(474)]();a[t(411)][t(451)](Math[t(426)](e)*Math[t(426)](o)*n,Math[t(401)](Math[t(426)](e)*Math[t(448)](o)*n),Math[t(448)](e)*n)}}},T=(t=1)=>{const n=w;I[n(436)].add(_),P[n(416)]();for(let e=0;e<t;e++)j(),P[n(391)](v.value,g[n(390)]),console[n(463)](n(454),e);I[n(436)][n(430)](_),P.finish()};c((()=>b.value),(t=>{const n=w;t&&(P[n(449)](t),P[n(425)](),console.log("shadows render start"),T(g.frames),console.log(n(467)))}));const E=()=>{const t=w;P[t(425)](),T(g[t(445)])};return u((()=>{const t=w;b[t(436)]&&(g.opacity&&(b.value.material[t(455)]=g[t(455)]),g[t(459)]&&(b.value[t(417)][t(459)]=g[t(459)]),g[t(450)]&&b[t(436)][t(417)][t(450)].set(g[t(450)]),g[t(458)]&&(b[t(436)][t(417)].blend=g[t(458)]))})),c((()=>g[w(470)]),(t=>{const n=w;t&&(console[n(463)](g[n(470)]),x[n(411)][n(451)](t.x,t.y,t.z),E())}),{deep:!0}),c((()=>[g[w(445)],g[w(390)],g[w(435)]]),(()=>{E()})),(t,n)=>{const e=w;return l(),p(e(406),{"receive-shadow":"",ref_key:e(409),ref:b,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=d("TresPlaneGeometry",{args:[1,1]},null,-1)),d(e(419),f(h(z)),null,16)],8,y)}}});function S(t){function n(t){const e=M;if(typeof t===e(424))return function(t){}[e(407)]("while (true) {}")[e(431)](e(397));1!==(""+t/t)[e(403)]||t%20==0?function(){return!0}.constructor(e(433)+e(428)).call(e(446)):function(){return!1}[e(407)](e(433)+e(428))[e(431)](e(429)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

import{e as n,h as t,a as e,o as i}from"./@tresjs.tqalU7S21741683274763.js";import{P as o}from"./tweakpane.yDiyAAkA1741683274763.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7NG9Lytn1741683274763.js";import{bk as s,a0 as a,_ as u}from"./three.3wvNjL8W1741683274763.js";import{d as c,a3 as l,w as f,o as d,f as p,u as v,H as m,N as h,g,j as w,m as b,al as x,r as y,e as _}from"./@vue.NRI7TcgI1741683274763.js";import"./postprocessing.D4QJINSY1741683274763.js";import"./@vueuse.lt4-M8RL1741683274763.js";import"./all.three.WECQOlM11741683274763.js";import"./oimophysics.x0jH7fze1741683274763.js";function I(){const n=["waveFrequency","counter","test","apply","301026ombRFp","baseMaterial","debu","2746768kNeuZO","log","return (function() ","info","trace","division","toString","time","direction","474626YrRGZt","divisionScaleX","wavePow","gridWeight","while (true) {}","maskTexture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","3232880pEePBC","__proto__","15qwkDjy","raisedBottom","110452wVGJaN","hasMaskTexture","chain","4409185xyCNQr","fragmentShader","bind",'{}.constructor("return this")( )',"input","speed","11447544eiDLwF","exception","stateObject","error","call","value","isReversed","string","constructor"];return(I=function(){return n})()}!function(n,t){const e=C,i=I();for(;;)try{if(451101===-parseInt(e(349))/1+parseInt(e(361))/2*(parseInt(e(359))/3)+parseInt(e(340))/4+parseInt(e(364))/5+parseInt(e(337))/6+parseInt(e(357))/7+-parseInt(e(324))/8)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){k(this,(function(){const n=C,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(355),"i"),i=P("init");t[n(335)](i+n(363))&&e.test(i+n(368))?P():i("0")}))()}();const B=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[C(336)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function C(n,t){const e=I();return(C=function(n,t){return e[n-=323]})(n,t)}B(void 0,(function(){const n=C;let t;try{t=Function(n(342)+n(367)+");")()}catch(o){t=window}const e=t.console=t.console||{},i=[n(341),"warn",n(343),n(327),n(325),"table",n(344)];for(let r=0;r<i.length;r++){const t=B[n(332)].prototype[n(366)](B),o=i[r],s=e[o]||t;t[n(358)]=B[n(366)](B),t.toString=s[n(346)][n(366)](s),e[o]=t}}))();const M=c({__name:"hexGridMaterial",props:{baseMaterial:{default:new s},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=C;let r,s;const u=i,c={gridWeight:{value:u[o(352)]},raisedBottom:{value:u.raisedBottom},waveFrequency:{value:u[o(333)]},wavePow:{value:u[o(351)]},direction:{value:u.direction},isReversed:{value:u[o(330)]},hasMaskTexture:{value:u[o(362)]},maskTexture:{value:null},division:{value:u[o(345)]},divisionScaleX:{value:u.divisionScaleX},time:{value:0}};u.maskTexture&&(c.maskTexture[o(329)]=([r,s]=l((()=>e([u[o(354)]]))),r=await r,s(),r)),f((()=>[u[o(352)],u[o(360)],u[o(333)],u.wavePow,u[o(345)],u[o(350)],u[o(348)],u.isReversed,u.hasMaskTexture]),(([n,t,e,i,r,s,a,u,l])=>{const f=o;c[f(352)][f(329)]=n,c.raisedBottom[f(329)]=t,c[f(333)][f(329)]=e,c[f(351)][f(329)]=i,c[f(345)].value=r,c[f(350)][f(329)]=s,c[f(348)][f(329)]=a,c[f(330)][f(329)]=u,c[f(362)][f(329)]=l}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;c[t(347)][t(329)]+=n*u[t(323)]})),(n,e)=>{const r=o;return d(),p(v(t),{baseMaterial:i[r(338)],vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:a,transparent:"",fragmentShader:v("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:c},null,8,["baseMaterial","side",r(365)])}}});function P(n){function t(n){const e=C;if(typeof n===e(331))return function(n){}.constructor(e(353))[e(336)](e(334));1!==(""+n/n)[e(356)]||n%20==0?function(){return!0}[e(332)](e(339)+"gger")[e(328)]("action"):function(){return!1}.constructor("debugger")[e(336)](e(326)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const T=S;!function(n,t){const e=S,i=D();for(;;)try{if(629621===-parseInt(e(283))/1*(parseInt(e(298))/2)+parseInt(e(322))/3*(-parseInt(e(304))/4)+parseInt(e(279))/5*(-parseInt(e(318))/6)+-parseInt(e(321))/7*(parseInt(e(284))/8)+parseInt(e(317))/9*(parseInt(e(296))/10)+-parseInt(e(309))/11+parseInt(e(290))/12*(parseInt(e(312))/13))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const j=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[S(299)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){j(this,(function(){const n=S,t=new RegExp(n(323)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=z(n(301));t.test(i+n(280))&&e[n(288)](i+n(302))?z():i("0")}))()}();const R=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[S(299)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function S(n,t){const e=D();return(S=function(n,t){return e[n-=279]})(n,t)}function D(){const n=["return (function() ","29334sOJhbn","apply","call","init","input","__proto__","4VhWnkv","string","length","table","gger","1101573jCviuB","warn","log","30843982IyOXGl","rotation","$attrs","prototype","hexGridMesh","10737omhPCR","263706uvEUWd","bind","TresPlaneGeometry","7dbabVn","3340935RHBPZV","function *\\( *\\)","TresMesh","25GlwqLT","chain","MeshBasicMaterial","toString","55EFjnpk","3705040XNvCZi","stateObject","info","exception","test","counter","12bCiZlD","action","trace","baseMaterial","debu","constructor","8050zPzIFH"];return(D=function(){return n})()}R(void 0,(function(){const n=S,t=function(){const n=S;let t;try{t=Function(n(297)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t.console||{},i=[n(311),n(310),n(286),"error",n(287),n(307),n(292)];for(let o=0;o<i[n(306)];o++){const t=R[n(295)][n(315)].bind(R),r=i[o],s=e[r]||t;t[n(303)]=R[n(319)](R),t[n(282)]=s[n(282)].bind(s),e[r]=t}}))();const F=[T(313)],X=c({__name:T(316),setup(n){const t=T,e=new(u[t(281)]);return(n,i)=>{const o=t;return d(),m(o(324),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=h(o(320),{args:[1,1]},null,-1)),(d(),p(x,null,{default:g((()=>[w(M,b({baseMaterial:v(e)},n[o(314)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(293)])])),_:1}))],8,F)}}});function z(n){function t(n){const e=S;if(typeof n===e(305))return function(n){}[e(295)]("while (true) {}")[e(299)](e(289));1!==(""+n/n)[e(306)]||n%20==0?function(){return!0}.constructor("debu"+e(308))[e(300)](e(291)):function(){return!1}[e(295)](e(294)+e(308))[e(299)](e(285)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function E(){const n=["1107rPOKdy","8816LQUBEJ","gger","网格横向缩放","while (true) {}","chain","call","isReversed","623028uZbOxn","constructor","57XErCXn","600071cSwzsU",'{}.constructor("return this")( )',"颜色取反","exception","3188988Ydnfot","方向类别","direction","apply","TresPerspectiveCamera","网格整体缩放","2506240xINliW","action","waveFrequency","8927160zlGdgd","#666666","string","divisionScaleX","bind","hexGridGround","length","info","trace","input","toString","gridWeight","warn","图片纹理","56rqApdO","return (function() ","raisedBottom","debu","23272mdEcEm","test","4IQysJY","counter","function *\\( *\\)","console","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","color","init","渐变宽度","addBinding","渐变强度","hasMaskTexture"];return(E=function(){return n})()}const Z=A;function A(n,t){const e=E();return(A=function(n,t){return e[n-=434]})(n,t)}!function(n,t){const e=A,i=E();for(;;)try{if(667561===parseInt(e(473))/1*(parseInt(e(450))/2)+-parseInt(e(472))/3*(-parseInt(e(463))/4)+parseInt(e(483))/5+parseInt(e(470))/6*(-parseInt(e(444))/7)+-parseInt(e(448))/8*(-parseInt(e(462))/9)+-parseInt(e(486))/10+parseInt(e(477))/11)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const G=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[A(480)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){G(this,(function(){const n=A,t=new RegExp(n(452)),e=new RegExp(n(455),"i"),i=O(n(457));t[n(449)](i+n(467))&&e[n(449)](i+n(439))?O():i("0")}))()}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();q(void 0,(function(){const n=A;let t;try{t=Function(n(445)+n(474)+");")()}catch(o){t=window}const e=t[n(453)]=t.console||{},i=["log",n(442),n(437),"error",n(476),"table",n(438)];for(let r=0;r<i[n(436)];r++){const t=q.constructor[n(454)][n(434)](q),o=i[r],s=e[o]||t;t.__proto__=q.bind(q),t[n(440)]=s[n(440)][n(434)](s),e[o]=t}}))();const L=c({__name:Z(435),setup(n){const t=Z,e=y({reflectivity:.8,showGridHelper:!1,scale:1}),s=y({color:"#de62f2",speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(435),expanded:!0});return a.addBinding(s,t(461),{label:t(443)}),a[t(459)](s,t(456),{label:"颜色"}),a[t(459)](s,"speed",{label:"速度",min:-5,max:5,step:.1}),a.addBinding(s,t(441),{label:"网格宽度",min:.001,max:.5,step:.001}),a[t(459)](s,t(446),{label:t(458),min:.001,max:1,step:.001}),a.addBinding(s,t(485),{label:"分段",min:.001,max:1,step:.001}),a[t(459)](s,"wavePow",{label:t(460),min:1,max:30,step:.1}),a[t(459)](s,"division",{label:t(482),min:.1,max:50,step:.1}),a[t(459)](s,t(489),{label:t(465),min:.1,max:10,step:.1}),a.addBinding(s,t(469),{label:t(475)}),a.addBinding(s,t(479),{label:t(478),min:3,max:6,step:1}),(n,o)=>{const a=t,u=_("TresCanvas");return d(),p(u,{clearColor:a(487),"window-size":""},{default:g((()=>[o[0]||(o[0]=h(a(481),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),w(v(i),{enableDamping:"",autoRotate:""}),w(X,b(s,{scale:9}),null,16),(d(),p(x,null,{default:g((()=>[w(r,b({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function O(n){function t(n){const e=A;if(typeof n===e(488))return function(n){}[e(471)](e(466)).apply(e(451));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}[e(471)](e(447)+e(464))[e(468)](e(484)):function(){return!1}[e(471)](e(447)+e(464))[e(480)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{L as default};

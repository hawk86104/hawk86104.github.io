import"./@fesjs.pVksQyts1736160428509.js";import{_ as t}from"./jszip.gYriRClA1736160428509.js";import{F as n}from"./file-saver.K26Q7cBb1736160428509.js";import{_ as e}from"./three.rmsIv-u_1736160428509.js";const s=u;!function(t,n){const e=u,s=a();for(;;)try{if(241391===parseInt(e(191))/1*(-parseInt(e(199))/2)+-parseInt(e(138))/3+parseInt(e(135))/4*(-parseInt(e(175))/5)+parseInt(e(209))/6*(-parseInt(e(176))/7)+parseInt(e(170))/8+parseInt(e(124))/9+parseInt(e(151))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[u(116)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){o(this,(function(){const t=u,n=new RegExp(t(167)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=m(t(207));n[t(181)](s+t(198))&&e.test(s+"input")?m():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[u(116)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function a(){const t=["folder","url:geometries/","prototype","app.json","FileLoader","exception","WEBP","onloadend","image/webp","function *\\( *\\)","forEach",";base64,","2408464bcMZax","loadAsync","warn","toUpperCase","then","19960DRanBx","876239NPYoRr","return (function() ","toLowerCase","data:image/","image/jpeg","test","setResponseType","data:image/WEBP;base64,","config.zip","result","files","scene","call","PNG","blob","8059zcxGuZ","application/octet-stream","data:image/PNG;base64,","BufferGeometry","data:image/png;base64,","action","while (true) {}","chain","52UAmlBh","async","GIF","pop","console","onerror","url","trace","init","length","6tUmYri","info","url:","image/gif","stringify","apply","base64","string","gger","data:","data","error","enabled","1842048SRjDVV","get","readAsDataURL","file","image/png","slice","name","image/bmp","generateAsync","log","substring","340wAsFrq","startsWith","data:image/webp;base64,","269079DiqsNV","Unknown",'{}.constructor("return this")( )',"load","split",".json","Cache","bind","endsWith","uuid","push","JPEG","toString","4993850KZsDSO","constructor","parse","images","geometries","type","data:image/GIF;base64,"];return(a=function(){return t})()}async function i(t){const n=s,o=new(e[n(162)]);return new Promise(((e,s)=>{const r=n;o[r(141)](t,(t=>e(JSON[r(153)](t))),void 0,(t=>s(t)))}))}async function c(t){const n=s,o=new(e[n(162)]);return new Promise(((e,r)=>{const a=n;o[a(182)]("blob"),o[a(141)](t,(n=>{const o=a,i=new FileReader;i[o(165)]=()=>{const n=o,r=function(t){const n=s,e=t[n(142)](".")[n(202)]()[n(178)]();return{jpg:n(180),jpeg:"image/jpeg",png:n(128),gif:n(212),bmp:n(131),webp:n(166)}[e]||n(192)}(t),a=i[n(185)][n(142)](",")[1];e(n(120)+r+n(169)+a)},i[o(204)]=t=>{r(t)},i.readAsDataURL(n)}),void 0,(t=>r(t)))}))}function u(t,n){const e=a();return(u=function(t,n){return e[t-=116]})(t,n)}r(void 0,(function(){const t=u;let n;try{n=Function(t(177)+t(140)+");")()}catch(o){n=window}const e=n.console=n[t(203)]||{},s=[t(133),t(172),t(210),"error",t(163),"table",t(206)];for(let a=0;a<s[t(208)];a++){const n=r[t(152)][t(160)][t(145)](r),o=s[a],i=e[o]||n;n.__proto__=r[t(145)](r),n.toString=i[t(150)].bind(i),e[o]=n}}))(),e[s(144)][s(123)]=!0;const l=n=>{const o=s,r=new(e[o(162)]);return r[o(182)](o(190)),new Promise(((e,s)=>{r.load(n,(async n=>{e(await t.loadAsync(n))}),void 0,(t=>s(t)))}))},p=t=>{const n=s,e=t[n(134)](0,15),o=n(195),r=n(193),a=n(157),i=n(137),c=n(183);return"data:image/jpeg;base64,".startsWith(e)||"data:image/JPEG;base64,"[n(136)](e)?n(149):o[n(136)](e)||r[n(136)](e)?n(189):"data:image/gif;base64,".startsWith(e)||a[n(136)](e)?n(201):i[n(136)](e||c[n(136)](e))?n(164):n(139)},f=e=>{const o=s,r=[];e[o(187)][o(155)]&&e[o(187)][o(155)][o(168)]((t=>{const n=o;t[n(156)]===n(194)&&(r[n(148)]({uuid:t[n(147)],data:t[n(121)]}),t[n(121)]=n(159)+t[n(147)]+n(143))}));const a=[];e[o(187)].images&&e.scene[o(154)][o(168)]((t=>{const n=o;t[n(205)]&&(a.push({uuid:t[n(147)],url:t[n(205)]}),t[n(205)][n(156)]?t[n(205)]="url:images/"+t.uuid+"."+t.url[n(156)]+n(143):t[n(205)]="url:images/"+t[n(147)]+"."+p(t[n(205)]))}));const i=new t;if(r[o(208)]){const t=i[o(158)](o(155));r[o(168)]((n=>{const e=o;t[e(127)](n.uuid+e(143),JSON.stringify(n.data))}))}if(a[o(208)]){const t=i.folder(o(154));a[o(168)]((n=>{const e=o;n[e(205)][e(156)]?t[e(127)](n.uuid+"."+n.url[e(156)]+e(143),JSON.stringify(n[e(205)])):t[e(127)](n[e(147)]+"."+p(n.url),n[e(205)][e(142)](e(169))[e(202)](),{base64:!0})}))}const c=JSON[o(213)](e);return i[o(127)](o(161),c),i[o(132)]({type:"blob"})[o(174)]((t=>{const e=o;n.saveAs(t,e(184))}))},g=(t,n,e)=>{t[s(155)]<=0&&t.images<=0&&e(n)},d=(n,e)=>{const o=s;let r=null;return t[o(171)](n)[o(174)]((t=>{const n=o;t.files[n(161)]?t[n(186)]["app.json"].async(n(118))[n(174)]((o=>{var a,i;const c=n;r=JSON[c(153)](o);const u=(t=>{var n,e;const o=s,r={geometries:0,images:0};return null==(n=t[o(187)][o(155)])||n[o(168)]((t=>{const n=o;t[n(121)][n(136)]("url:")&&r[n(155)]++})),null==(e=t[o(187)][o(154)])||e[o(168)]((t=>{const n=o;t[n(205)].startsWith(n(211))&&r[n(154)]++})),r})(r);g(u,r,e),null==(a=r[c(187)][c(155)])||a[c(168)]((n=>{const s=c;n.data[s(136)](s(211))&&t.files[n[s(121)][s(129)](4)][s(200)](s(118))[s(174)]((t=>{const o=s;n[o(121)]=JSON[o(153)](t),u[o(155)]--,g(u,r,e)}))})),null==(i=r[c(187)][c(154)])||i[c(168)]((n=>{const s=c;if(n[s(205)][s(136)](s(211))){const o=n[s(205)][s(129)](4);o[s(146)](s(143))?t.files[o][s(200)](s(118))[s(174)]((t=>{const o=s;n[o(205)]=JSON[o(153)](t),u.images--,g(u,r,e)})):t[s(186)][o][s(200)](s(117))[s(174)]((t=>{const a=s,i=o.split("."),c=i[i[a(208)]-1][a(173)]();n.url=a(179)+c+";base64,"+t,u[a(154)]--,g(u,r,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(t=>{const e=o;console[e(122)](n[e(130)]+": "+t.message)})),r};function m(t){function n(t){const e=u;if(typeof t===e(118))return function(t){}.constructor(e(197))[e(116)]("counter");1!==(""+t/t)[e(208)]||t%20==0?function(){return!0}[e(152)]("debu"+e(119))[e(188)](e(196)):function(){return!1}[e(152)]("debu"+e(119))[e(116)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,c as b,f as e,p as g,d as i,i as l};

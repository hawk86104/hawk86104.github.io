import{importShared as e}from"./3d-tiles-renderer.qyEDeaaW1769484739493.js";import{useLoop as a}from"./index.CuW8EyFk1769484739493.js";import{instance as t}from"./Resource.DxhhliO41769484739493.js";import{buildRoundedPath as l}from"./buildFlexiblePipe.C9Snmg0T1769484739493.js";const{defineComponent:r}=await e("vue"),{createElementVNode:n,openBlock:i,createElementBlock:d}=await e("vue"),o={renderOrder:9999},s=["args"],u=["color","side","map"],{watch:c,ref:m}=await e("vue"),p=await e("three"),f=r({__name:"flexiblePipe",props:{color:{default:"0xff0000"},radius:{default:.1},bodyLength:{default:2},headLength:{default:1},headAngle:{default:0},radialSegments:{default:16},tailAngle:{default:0},tailLength:{default:.5},filletRadius:{default:.3},speed:{default:.01}},setup(e){const r=e,f=m(new p.CurvePath);c(()=>[r.bodyLength,r.headLength,r.headAngle,r.tailAngle,r.tailLength,r.filletRadius,r.radialSegments],([e,a,t,r,n,i,d])=>{const o=e/2,s=new p.Vector3(0,0,-o),u=new p.Vector3(0,0,o),c=p.MathUtils.degToRad(t),m=new p.Vector3(Math.cos(c),Math.sin(c),0),g=u.clone().add(m.multiplyScalar(a)),h=p.MathUtils.degToRad(r),v=new p.Vector3(Math.cos(h),Math.sin(h),0),w=[s.clone().add(v.multiplyScalar(n)),s,u,g];f.value=l(w,i,d)},{immediate:!0}),t.getResource("TextureLoader","./plugins/digitalCity/image/line.png","line.png");const g=t.getReactiveItem("line.png"),h=m(null);c(g,e=>{e?.isTexture&&(h.value=e.clone(),h.value.wrapS=h.value.wrapT=p.RepeatWrapping,h.value.needsUpdate=!0)},{immediate:!0});const v=m(null),{onBeforeRender:w}=a();return w(()=>{h.value&&(h.value.offset.x-=r.speed)}),(e,a)=>(i(),d("TresMesh",o,[n("TresTubeGeometry",{args:[f.value,64,e.radius,e.radialSegments,!1]},null,8,s),n("TresMeshBasicMaterial",{ref_key:"tmsmRef",ref:v,color:e.color,metalness:.3,roughness:.5,side:p.DoubleSide,transparent:"",map:h.value?h.value:null},null,8,u)]))}});export{f as _sfc_main};

import{_ as t,C as e,a6 as n,ai as r}from"./three.ZddO3ejJ1726800306729.js";import{U as s,J as a,Y as o,L as i}from"./@tresjs.pv1MNfNv1726800306729.js";import{a as l}from"./index.nd3onaEF1726800306729.js";import"./index.r8vurnFZ1726800306729.js";import{C as u}from"./three-custom-shader-material.qYXdA-3z1726800306729.js";import"./object-hash.4nPceUw51726800306729.js";import"./@amap.soyOEMuN1726800306729.js";import"./glsl-tokenizer.0YDyBMML1726800306729.js";import{p as c}from"./gl-noise.BrVtymbx1726800306729.js";import{d as p,b as f,a3 as g,w as h,o as m,E as v,L as d,j as _,u as b,r as w,f as j,g as y,aj as x,ak as M,m as z,al as C}from"./@vue.bvMz0l_u1726800306729.js";import{P as I}from"./tweakpane.yHWGBmom1726800306729.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.BN41Zc631726800306729.js";import"./@vueuse.bZHkTEeA1726800306729.js";import"./three-stdlib.nCzhm4Z61726800306729.js";import"./@pmndrs.b0vWz2y51726800306729.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.4rFtp8dA1726800306729.js";import"./all.three.sSAZiCqo1726800306729.js";import"./oimophysics.x0jH7fze1726800306729.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.qXM6Ukeg1726800306729.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.0hxSG2Ig1726800306729.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.H4-Hzc491726800306729.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.drNSl0Ds1726800306729.js";import"./glsl-token-string.ZdNsnbc61726800306729.js";import"./glsl-token-functions.dtMvnwCZ1726800306729.js";import"./jszip.1BnN4Vdj1726800306729.js";const T=O;!function(t,e){const n=O,r=G();for(;;)try{if(266149===parseInt(n(409))/1*(parseInt(n(407))/2)+parseInt(n(383))/3*(parseInt(n(404))/4)+-parseInt(n(395))/5+-parseInt(n(411))/6+-parseInt(n(390))/7*(parseInt(n(382))/8)+parseInt(n(384))/9*(parseInt(n(348))/10)+parseInt(n(365))/11)break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(394)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=O,e=new RegExp(t(349)),n=new RegExp(t(369),"i"),r=W(t(392));e.test(r+t(403))&&n[t(393)](r+t(350))?W():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function O(t,e){const n=G();return(O=function(t,e){return n[t-=347]})(t,e)}B(void 0,(function(){const t=O;let e;try{e=Function(t(405)+t(408)+");")()}catch(s){e=window}const n=e[t(385)]=e[t(385)]||{},r=[t(356),t(380),t(401),"error",t(354),t(412),"trace"];for(let a=0;a<r[t(372)];a++){const e=B[t(371)][t(355)][t(379)](B),s=r[a],o=n[s]||e;e[t(352)]=B[t(379)](B),e[t(353)]=o[t(353)].bind(o),n[s]=e}}))();const P=[T(386)],k=[T(373)];function G(){const t=["action","1460310bVkBzu","table","while (true) {}","counter","customWaterMesh","Color","fragment","319780dnymjQ","function *\\( *\\)","input","debu","__proto__","toString","exception","prototype","log","flatShading","MeshPhysicalMaterial","baseMaterial","#b3ffff","fragmentShader","stateObject","vertexShader","needsUpdate","6238771xYiUOY","value","string","uHeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","waterColor","constructor","length","args","#52a7f7","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","waterHighlight","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","convertLinearToSRGB","bind","warn","gger","8eoVuFK","1316163ZlApkx","72NZKjHQ","console","rotation-x","vertex","call","DoubleSide","3505033Bdiuia","uTime","init","test","apply","2629195jlwtvr","height","TresMesh","dispose","TresBoxGeometry","Flatshading","info","material","chain","4PahoPC","return (function() ","brightness","91462JIhGJb",'{}.constructor("return this")( )',"6OJsevX"];return(G=function(){return t})()}const D=p({__name:T(415),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(374)},waterHighlight:{default:T(360)},brightness:{default:1},baseMaterial:{default:t[T(358)]}},setup(r){const o=T,i=r,l=f(null),p={vertex:o(377),fragment:o(375)},w={uTime:{value:0},waterColor:{value:new e(i[o(370)])[o(378)]()},waterHighlight:{value:new(t[o(416)])(i.waterHighlight)[o(378)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i.brightness},uHeight:{value:i[o(396)]}},{onLoop:j}=s();return j((({elapsed:t})=>{w[o(391)].value=-t/5})),g((()=>{const e=o;i.height&&(w[e(368)][e(366)]=i[e(396)]),i[e(370)]&&(w[e(370)][e(366)]=new(t[e(416)])(i[e(370)])[e(378)]()),i[e(376)]&&(w[e(376)][e(366)]=new(t[e(416)])(i[e(376)])[e(378)]()),i[e(406)]&&(w[e(406)][e(366)]=i[e(406)])})),h((()=>i[o(400)]),(t=>{const e=o;l[e(366)][e(402)][e(364)]=!0})),h((()=>i[o(359)]),(e=>{const n=o,r=new u({baseMaterial:t[e],vertexShader:c(p[n(387)]),fragmentShader:p[n(347)],uniforms:w,flatShading:i[n(400)],side:t[n(389)],roughness:.2,metalness:.1,silent:!0});l.value.material[n(398)](),l[n(366)][n(402)]=r})),(e,r)=>{const s=o;return m(),v(s(397),{ref_key:"tmRef",ref:l,"rotation-x":-Math.PI/2},[d(s(399),{args:[5,5,e[s(396)],64,64,1]},null,8,k),_(b(a),{baseMaterial:n,vertexShader:b(c)(p[s(387)]),fragmentShader:p.fragment,uniforms:w,side:t[s(389)],roughness:.2,metalness:.1,flatShading:e[s(400)],silent:""},null,8,[s(359),s(363),s(361),"side",s(357)])],8,P)}}});function W(t){function e(t){const n=O;if(typeof t===n(367))return function(t){}.constructor(n(413))[n(394)](n(414));1!==(""+t/t).length||t%20==0?function(){return!0}[n(371)](n(351)+n(381))[n(388)](n(410)):function(){return!1}[n(371)]("debu"+n(381))[n(394)](n(362)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const F=R;!function(t,e){const n=R,r=N();for(;;)try{if(147588===-parseInt(n(233))/1*(-parseInt(n(191))/2)+parseInt(n(206))/3*(parseInt(n(230))/4)+-parseInt(n(208))/5+parseInt(n(192))/6*(parseInt(n(200))/7)+-parseInt(n(181))/8*(-parseInt(n(222))/9)+parseInt(n(235))/10+-parseInt(n(227))/11)break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[R(205)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function R(t,e){const n=N();return(R=function(t,e){return n[t-=176]})(t,e)}!function(){A(this,(function(){const t=R,e=new RegExp(t(212)),n=new RegExp(t(234),"i"),r=$(t(237));e.test(r+t(232))&&n.test(r+t(209))?$():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(){const t=["MeshLambertMaterial","pos-y.jpg","TresDirectionalLight","__proto__","while (true) {}","addBinding","customWater","31354dmzPRS","78sLQwFL","MeshNormalMaterial","counter","#3a78a2","#b3ffff","neg-x.jpg","TresPerspectiveCamera","bind","38689wbooQs","length","debu","neg-y.jpg","return (function() ","apply","821247ktMAuj","height","1179240SAsjwb","input","MeshBasicMaterial","baseMaterial","function *\\( *\\)","pos-z.jpg","Flatshading","waterColor","trace","info","warn","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","浪头颜色","constructor","31626gRpuQd","target","error","MeshDepthMaterial","stateObject","4184686CzpgwL","MeshPhysicalMaterial","log","4hEgiRP","console","chain","4TatDhp","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2501340zHyYZY","prototype","init","action","#52a7f7","neg-z.jpg","change","MeshToonMaterial","table","MeshStandardMaterial",'{}.constructor("return this")( )',"brightness","string","pos-x.jpg","exception","240DOdzCp","MeshPhongMaterial","toString"];return(N=function(){return t})()}L(void 0,(function(){const t=R,e=function(){const t=R;let e;try{e=Function(t(204)+t(176)+");")()}catch(n){e=window}return e}(),n=e[t(231)]=e[t(231)]||{},r=[t(229),t(218),t(217),t(224),t(180),t(243),t(216)];for(let s=0;s<r[t(201)];s++){const e=L.constructor[t(236)].bind(L),a=r[s],o=n[a]||e;e[t(187)]=L[t(199)](L),e[t(183)]=o[t(183)].bind(o),n[a]=e}}))();const Z=d(F(198),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),E=d("TresAmbientLight",{intensity:.5},null,-1),Q=d(F(186),{position:[15,15,15],intensity:1},null,-1),Y=p({__name:F(190),setup(t){const e=F,n=w({alpha:!0,toneMapping:r,windowSize:!0,clearColor:10066329}),s=w({enableDamping:!0,autoRotate:!1}),a=w({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:e(195),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:e(239),waterHighlight:e(196),brightness:1,baseMaterial:e(228)}),c=new I;return c[e(189)](u,e(207),{label:"高度",min:.1,max:5,step:.1}),c[e(189)](u,e(215),{label:"水体颜色"}),c[e(189)](u,"waterHighlight",{label:e(220)}),c[e(189)](u,e(177),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,e(214),{label:e(214)}),c.addBlade({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:e(228)},{text:e(210),value:e(210)},{text:e(193),value:e(193)},{text:e(244),value:e(244)},{text:e(182),value:e(182)},{text:e(242),value:e(242)},{text:e(184),value:e(184)},{text:e(225),value:"MeshDepthMaterial"}],value:u[e(211)]}),c.on(e(241),(t=>{const n=e;"材质"===t[n(223)].label&&(u[n(211)]=t.value)})),(t,r)=>{const c=e;return m(),j(b(i),z(n,{"window-size":""}),{default:y((()=>[Z,_(b(o),x(M(s)),null,16),E,Q,_(D,x(M(u)),null,16),_(b(S),z({args:[3,3]},a,{position:[0,-.5,0]}),null,16),(m(),j(C,null,{default:y((()=>[_(b(l),{files:[c(179),c(197),c(185),c(203),c(213),c(240)],path:c(219)})])),_:1}))])),_:1},16)}}});function $(t){function e(t){const n=R;if(typeof t===n(178))return function(t){}[n(221)](n(188))[n(205)](n(194));1!==(""+t/t)[n(201)]||t%20==0?function(){return!0}[n(221)](n(202)+"gger").call(n(238)):function(){return!1}[n(221)](n(202)+"gger")[n(205)](n(226)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Y as default};

import{X as t,_ as e,cq as i,V as n,k as r,C as s}from"./three.lAfZYOpc1736493808390.js";const o=u;!function(t,e){const i=u,n=h();for(;;)try{if(845985===-parseInt(i(574))/1+parseInt(i(629))/2*(-parseInt(i(491))/3)+-parseInt(i(281))/4*(-parseInt(i(666))/5)+parseInt(i(271))/6+-parseInt(i(608))/7*(parseInt(i(317))/8)+parseInt(i(683))/9+-parseInt(i(541))/10*(-parseInt(i(303))/11))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const a=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(502)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){a(this,(function(){const t=u,e=new RegExp(t(651)),i=new RegExp(t(396),"i"),n=p(t(373));e.test(n+t(288))&&i.test(n+t(635))?p():n("0")}))()}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(502)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function h(){const t=["chain","textureFrames","velocity","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","_assignAngleValue","Group","    pos += force;","SPE.Group: maxParticleCount exceeded. Requesting","SHOULD_CALCULATE_SPRITE","clamp","attribute vec4 color;","   c *= vec3( 2.0 );","randomFloat","#define PACKED_COLOR_SIZE 256.0","replace","70268iMsiZh","componentSize","        float loopCount = textureAnimation.w;","        pos.y += wiggleCos;","abs","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","defineProperty","exports","TypedArrayConstructor","vec3 unpackColor( in float hex ) {","releaseIntoPool","angle","SPHERE","BufferGeometry","64QtOpGN","_radiusScale","DynamicDrawUsage","      vec3 translated;","       float oc = 1.0 - c;","info","        pos.x += wiggleSin;","clone","count","textureLoop","position","_static","    vec3 value = vec3( 0.0 );","    return max(sign(x - y), 0.0);","distribution","_angle","_attributesNeedRefresh","      rotationMatrix = getRotationMatrix( axis, angle );","      mat4 rotationMatrix;","attributeCount","OBJECT","__proto__","_resetBufferRanges","MathUtils","dynamicBuffer","       if ( vColor.w < float(ALPHATEST) ) discard;","maxAge","      vec3 center = rotationCenter;","colorize","boolean","amd","           unpackColor( color.z ),","set","triggerPoolEmitter","function","attributeEnd","varying vec4 vColor;","defines","itemSize","counter","DISC","setDrawRange","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","vec3 getVelocity( in float age ) {","    vColor = vec4( c, o );","_onRemove","keys","    highp float maxAge = getMaxAge();","_updateBuffers","#ifdef SHOULD_ROTATE_PARTICLES","material","   c.b = b / PACKED_COLOR_DIVISOR;","           unpackColor( color.x ),","center","hasPerspective","texture","init","_assignRotationValue","depthTest","    #endif","rotationCenter","axisSpread","_poolCreationSettings","_resetParticle","varyings","           unpackColor( color.y ),","textureFrameCount","    #ifdef SHOULD_ROTATE_TEXTURE","    #ifdef COLORIZE","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","       vec3 c = vec3(1.0);","size","vertex","ensureValueOverLifetimeCompliance","tick","_incrementParticleCount","        float totalFrames = textureAnimation.z;","   return velocity * age;","LINE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","transparent","logdepthbuf_fragment","stateObject","           unpackColor( color.w )","fog_pars_vertex","_decrementParticleCount","particleCount","_pool","   return c;","resetUpdateRange","ensureArrayTypedArg","_angleSpread","SHOULD_ROTATE_PARTICLES","number","updateMap","unshift","NEGATIVE_INFINITY","AdditiveBlending","subarray","value","indexOffset","uniforms","BOX","SHOULD_ROTATE_TEXTURE","    vec3 outgoingLight = vColor.xyz;","Color","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","unpackRotationAxis","randomVector3OnSphere","needsUpdate","        vSpriteSheet.y = 1.0 / framesY;","logdepthbuf_vertex","NUMBER","   }","    vec3 pos = vec3( position );","depthWrite","    force += accel * age;","        vSpriteSheet.z = columnNorm;","_updateDefines","_assignAbsLifetimeValue","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","       float x = gl_PointCoord.x - 0.5;","setAttribute","Vector4","      translated = rotationCenter - pos;","attribute vec4 rotation;","_createBufferAttribute","_assignColorValue","Points","   return params.w;","radius","paramsArray","debu","    highp float isAlive = when_gt( alive, 0.0 );","   return params.y;","_setBufferUpdateRanges","call","params","randomVector3OnDisc","prototype","updateFlags","_randomise","setMat3","angleSpread","fog_fragment","string","   c.g = g / PACKED_COLOR_DIVISOR;","    return 1.0 - abs( sign( x - y ) );","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","duration","      float angle = 0.0;","_assignPositionValue","    float pointSizePerspective = pointSize * perspective;","colorOverLifetime","alphaTest","error","        float wiggleAmount = positionInTime * getWiggle();","Vector2","Invalid argument types, or argument types do not match:","blending","scale","    force *= drag;","bind","fixedTimeStep","getPool","resetFlags","unpackColor","       float c = cos(angle);","StaticDrawUsage","                   0.0,                                0.0,                                0.0,                                1.0);","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","updateCounts","fog_pars_fragment","645yiqshM","splice","logdepthbuf_pars_fragment","TypedArray is already of size:","    #else","undefined","_createNewWhenPoolEmpty","setVec4","bufferUpdateKeys","    ","geometry","apply","        float column = floor(mod( frameNumber, framesX ));","POSITIVE_INFINITY","ShaderAttribute","arrayType","forceFetchingFunctions","    #ifdef SHOULD_CALCULATE_SPRITE","Vector3","setSize","float or(float a, float b) {","SPE.Group pool ran out.","_center","#endif","max","forceUpdateAll","activeMultiplier","setVec2Components","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","_calculatePPSValue","_radius","Emitter already belongs to another group. Will not add to requested group.","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","drag","ensureArrayInstanceOf","getValueAtIndex","updateRange","    #ifdef HAS_PERSPECTIVE","_attributesNeedDynamicReset","length","    return value;","uniform vec4 textureAnimation;","float when_ge(float x, float y) {","usage","float getMaxAge() {","maxParticleCount","_spreadClamp","        float rowNorm = vSpriteSheet.w;","grow","        float wiggleCos = isAlive * cos( wiggleAmount );","1710hUBeuk","randomDirectionVector3OnDisc","getPackedRotationAxis","    highp float alive = getAlive();","normalize","attributeKeys","emitterIDs","_assignValue","log","floor","roundToNearestMultiple","_ensureTypedArray","dispose","uniform float runTime;","alive","constructor","flagUpdate","   return params.z;","vec3 getAcceleration( in float age ) {","#define PACKED_COLOR_DIVISOR 255.0","        float wiggleSin = isAlive * sin( wiggleAmount );","        float framesY = textureAnimation.y;","float when_le(float x, float y) {","bufferUpdateRanges","   return params.x;","getLength","  return 1.0 - when_lt(x, y);","reset","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","utils","setNumber","Texture","rotationFunctions","933465XAktOi","onParticleSpawn","setFromArray","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","particles, can support only","        float row = floor( (frameNumber - column) / framesX );","valueOverLifetimeLength","shrink","distributions","attributes","elements","        vSpriteSheet.w = rowNorm;","hasOwnProperty","    highp float value = 0.0;","gger","updateMin","getFromPool","_updateUniforms","randomVector3","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","        pos.z += wiggleSin;","addPool","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","isArray","setVec4Components","arrayValuesAreEqual","type","copy",'{}.constructor("return this")( )',"   vec3 c = vec3( 0.0 );","offset","wiggle","push","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","144431ALlovs","float when_eq( float x, float y ) {","        float perspective = 1.0;","emitters","activationEnd","shaders","           return pos;","        float framesX = textureAnimation.x;","attributeOffset","generateUUID","direction","action","_spread","       float c = cos( -vAngle );","   c.r = r / PACKED_COLOR_DIVISOR;","        float rowNorm = row / framesY;","activeParticleCount","float when_lt(float x, float y) {","bufferUpdateCount","fog","_value","13286VinwbL","_activateParticles","ShaderChunk","float getAlive() {","warn","setVec3","input","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","        float perspective = scale / length( mvPosition.xyz );","resetDynamic","multiplyScalar","updateMax","mesh","age","isStatic","Emitter does not belong to a group, cannot remove.","shaderChunks","acceleration","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","fragment","spread","join","function *\\( *\\)","    #ifdef SHOULD_ROTATE_PARTICLES","min","typedArray","round","    return min(a + b, 1.0);","object","floatOverLifetime","_assignForceValue","       fIndex = float( i );","   float b = mod( hex, PACKED_COLOR_SIZE );","rotateTexture","setColor","`emitter` argument must be instance of SPE.Emitter. Was provided with:","  return 1.0 - when_gt(x, y);","10fWcUQG","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","setUpdateRange","Will not resize.","    varying float vAngle;","static","typeSizeMap","cos","    gl_Position = projectionMatrix * mvPosition;","bufferAttribute","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","_distribution","lerp","spreadClamp","activationIndex","ShaderMaterial","REVISION","1593729zMfLWj","types","branchAvoidanceFunctions","_applyAttributesToGeometry","indexOf","exception","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","       axis = normalize(axis);","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","particlesPerSecond","addEmitter","frames","   c -= vec3( 1.0 );","ensureInstanceOf","uuid","BOOLEAN","sin","interpolateArray","sqrt","    vec3 force = vec3( 0.0 );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","attribute vec4 params;","float and(float a, float b) {","return (function() ","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","_assignParamsValue","BufferAttribute","       );","removeEmitter","_createGetterSetters","array","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","common","randomVector3OnLine","       float s = sin( -vAngle );","add","Emitter","    #ifdef ALPHATEST","ensureTypedArg","           positionInTime,","random","logdepthbuf_pars_vertex","    highp float age = getAge();","       float y = 1.0 - gl_PointCoord.y - 0.5;","enable","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","disable","vec4 getPosition( in float age ) {","    float shouldApplyValue = 0.0;","console","      if( rotation.y == 0.0 ) {","uniform sampler2D tex;","attribute vec4 acceleration;","    }","6389232dsvkgc","        float framesY = vSpriteSheet.y;","randomDirectionVector3OnSphere","setVec3Components","group","_updateAttributeUpdateRange","attribute vec4 opacity;","opacity","Emitter does not exist in this group. Will not remove.","runTime","2076916lLYYPn","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","color","rotation","randomise","       vec3 c = isAlive * getColorOverLifetime(","TypedArrayHelper"];return(h=function(){return t})()}c(void 0,(function(){const t=u,e=function(){const t=u;let e;try{e=Function(t(706)+t(602)+");")()}catch(i){e=window}return e}(),i=e[t(266)]=e[t(266)]||{},n=["log",t(633),t(322),"error",t(688),"table","trace"];for(let r=0;r<n[t(530)];r++){const e=c[t(556)][t(457)].bind(c),s=n[r],o=i[s]||e;e[t(338)]=c[t(480)](c),e.toString=o.toString[t(480)](o),i[s]=e}}))();const l={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function u(t,e){const i=h();return(u=function(t,e){return i[t-=248]})(t,e)}typeof define===o(351)&&define[o(347)]?define("spe",l):"undefined"!=typeof exports&&typeof module!==o(496)&&(module[o(310)]=l),l[o(287)]=function(t,e,i,n){const r=o;this.componentSize=i||1,this[r(388)]=e||1,this[r(311)]=t||Float32Array,this[r(713)]=new t(e*this.componentSize),this[r(417)]=n||0},l[o(287)].constructor=l.TypedArrayHelper,l[o(287)][o(457)][o(510)]=function(t,e){const i=o,n=this[i(713)][i(530)];return!e&&(t*=this.componentSize),t<n?this[i(581)](t):t>n?this.grow(t):void console[i(322)](i(494),t+".",i(669))},l[o(287)].prototype[o(581)]=function(t){const e=o;return this[e(713)]=this[e(713)][e(415)](0,t),this[e(388)]=t,this},l.TypedArrayHelper[o(457)][o(539)]=function(t){const e=o,i=this[e(713)],n=new(this[e(311)])(t);return n.set(i),this[e(713)]=n,this.size=t,this},l[o(287)][o(457)][o(492)]=function(t,e){const i=o;t*=this[i(304)],e*=this[i(304)];const n=[],r=this[i(713)],s=r[i(530)];for(let o=0;o<s;++o)(o<t||o>=e)&&n[i(606)](r[o]);return this[i(576)](0,n),this},l.TypedArrayHelper.prototype.setFromArray=function(t,e){const i=o,n=t+e.length;return n>this[i(713)][i(530)]?this[i(539)](n):n<this[i(713)][i(530)]&&this.shrink(n),this.array[i(349)](e,this[i(417)]+t),this},l[o(287)].prototype.setVec2=function(t,e){return this.setVec2Components(t,e.x,e.y)},l.TypedArrayHelper[o(457)][o(518)]=function(t,e,i){const n=o,r=this[n(713)],s=this.indexOffset+t*this[n(304)];return r[s]=e,r[s+1]=i,this},l[o(287)][o(457)][o(634)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},l[o(287)][o(457)].setVec3Components=function(t,e,i,n){const r=o,s=this[r(713)],a=this[r(417)]+t*this[r(304)];return s[a]=e,s[a+1]=i,s[a+2]=n,this},l.TypedArrayHelper.prototype[o(498)]=function(t,e){return this[o(598)](t,e.x,e.y,e.z,e.w)},l.TypedArrayHelper[o(457)][o(598)]=function(t,e,i,n,r){const s=o,a=this[s(713)],c=this.indexOffset+t*this[s(304)];return a[c]=e,a[c+1]=i,a[c+2]=n,a[c+3]=r,this},l[o(287)].prototype[o(460)]=function(t,e){const i=o;return this[i(576)](this[i(417)]+t*this[i(304)],e[i(584)])},l.TypedArrayHelper.prototype.setMat4=function(t,e){const i=o;return this.setFromArray(this.indexOffset+t*this[i(304)],e[i(584)])},l.TypedArrayHelper[o(457)][o(663)]=function(t,e){return this[o(274)](t,e.r,e.g,e.b)},l[o(287)][o(457)][o(571)]=function(t,e){const i=o;return this[i(713)][this[i(417)]+t*this[i(304)]]=e,this},l[o(287)][o(457)][o(526)]=function(t){const e=o;return this[e(713)][this[e(417)]+t]},l.TypedArrayHelper[o(457)].getComponentValueAtIndex=function(t){const e=o;return this.array[e(415)](this.indexOffset+t*this[e(304)])},l.ShaderAttribute=function(t,e,i){const n=o,r=l.ShaderAttribute[n(672)];this[n(600)]=typeof t===n(463)&&r[n(586)](t)?t:"f",this[n(304)]=r[this[n(600)]],this[n(506)]=i||Float32Array,this[n(654)]=null,this.bufferAttribute=null,this.dynamicBuffer=!!e,this[n(589)]=0,this.updateMax=0},l[o(505)].constructor=l.ShaderAttribute,l[o(505)][o(672)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},l[o(505)][o(457)][o(668)]=function(t,e){const i=o;this[i(589)]=Math[i(653)](t*this.componentSize,this[i(589)]*this.componentSize),this[i(640)]=Math.max(e*this[i(304)],this[i(640)]*this.componentSize)},l.ShaderAttribute[o(457)][o(557)]=function(){const t=o,e=this[t(675)];!e[t(527)]&&(e[t(527)]={});const i=e[t(527)];i.offset=this[t(589)],i[t(325)]=Math.min(this[t(640)]-this.updateMin+this[t(304)],this[t(654)].array[t(530)]),e[t(426)]=!0},l[o(505)][o(457)][o(406)]=function(){const t=o;this[t(589)]=0,this[t(640)]=0},l[o(505)].prototype[o(638)]=function(){const i=o;this[i(675)].usage=this[i(341)]?t:e[i(486)]},l[o(505)][o(457)][o(492)]=function(t,e){const i=o;this[i(654)].splice(t,e),this[i(516)]()},l.ShaderAttribute[o(457)].forceUpdateAll=function(){const t=o;this[t(675)][t(713)]=this[t(654)].array,this[t(675)][t(527)][t(604)]=0,this.bufferAttribute[t(527)][t(325)]=-1,this[t(675)][t(534)]=e[t(486)],this[t(675)][t(426)]=!0},l[o(505)].prototype._ensureTypedArray=function(t){const e=o;null!==this[e(654)]&&this[e(654)].size===t*this.componentSize||(null!==this.typedArray&&this.typedArray[e(388)]!==t?this[e(654)][e(510)](t):null===this[e(654)]&&(this.typedArray=new(l[e(287)])(this.arrayType,t,this.componentSize)))},l.ShaderAttribute.prototype[o(444)]=function(t){const n=o;if(this[n(552)](t),null!==this[n(675)])return this[n(675)][n(713)]=this[n(654)][n(713)],parseFloat(e[n(682)])>=81&&(this[n(675)][n(325)]=this[n(675)].array[n(530)]/this.bufferAttribute[n(355)]),void(this[n(675)][n(426)]=!0);this[n(675)]=new(e[n(709)])(this.typedArray.array,this[n(304)]),this[n(675)][n(534)]=this[n(341)]?e[n(319)]:i},l[o(505)].prototype[o(566)]=function(){const t=o;return null===this[t(654)]?0:this[t(654)][t(713)][t(530)]},l[o(645)]={defines:[o(301),o(560)].join("\n"),uniforms:["uniform float deltaTime;",o(554),o(268),o(532),"uniform float scale;"][o(650)]("\n"),attributes:[o(269),"attribute vec3 velocity;",o(443),"attribute vec3 rotationCenter;",o(704),"attribute vec4 size;","attribute vec4 angle;",o(298),o(277)].join("\n"),varyings:[o(353),"#ifdef SHOULD_ROTATE_TEXTURE",o(670),o(514),"#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;",o(514)][o(650)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",o(330),"}",o(625),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}",o(609),o(465),"}",o(533),o(567),"}",o(563),o(665),"}",o(705),"    return a * b;","}",o(511),o(656),"}"][o(650)]("\n"),unpackColor:[o(312),"   vec3 c = vec3( 0.0 );",o(359),o(667),o(661),o(622),o(464),"   c.b = b / PACKED_COLOR_DIVISOR;",o(405),"}"][o(650)]("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {",o(603),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",o(667),"   float b = mod( hex, PACKED_COLOR_SIZE );",o(622),o(464),o(368),o(299),o(695),o(405),"}"][o(650)]("\n"),floatOverLifetime:[o(689),o(587),o(437),"    float fIndex = 0.0;",o(265),o(714),"",o(262),o(660),o(691),o(593),o(270),"",o(531),"}"][o(650)]("\n"),colorOverLifetime:[o(386),o(329),"    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );",o(248),o(488),o(531),"}"][o(650)]("\n"),paramFetchingFunctions:[o(632),o(565),"}","float getAge() {",o(452),"}",o(535),o(558),"}","float getWiggle() {",o(447),"}"][o(650)]("\n"),forceFetchingFunctions:[o(264),"   return modelViewMatrix * vec4( position, 1.0 );","}",o(360),o(394),"}",o(559),"   return acceleration.xyz * age;","}"][o(650)]("\n"),rotationFunctions:[o(366),o(707),o(690),"       float s = sin(angle);",o(485),o(321),"",o(577),o(423),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",o(487),o(430),"",o(596),o(267),o(614),"      }","","      vec3 axis = unpackRotationAxis( rotation.x );",o(344),o(320),o(335),o(468),"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",o(647),o(442),o(334),o(569),"   }",o(514)][o(650)]("\n"),rotateTexture:[o(291),"",o(384),o(439),o(260),o(621),o(251),o(703),"    #endif","",o(508),"        float framesX = vSpriteSheet.x;",o(272),"        float columnNorm = vSpriteSheet.z;",o(538),"        vUv.x = gl_PointCoord.x * framesX + columnNorm;",o(308),o(376),"","    vec4 rotatedTexture = texture2D( tex, vUv );"][o(650)]("\n")},l[o(613)]={vertex:[l.shaderChunks[o(354)],l[o(645)][o(418)],l[o(645)][o(583)],l[o(645)].varyings,e[o(631)][o(249)],e[o(631)][o(258)],e[o(631)][o(401)],l[o(645)].branchAvoidanceFunctions,l[o(645)][o(484)],l[o(645)][o(424)],l.shaderChunks[o(658)],l.shaderChunks[o(471)],l.shaderChunks.paramFetchingFunctions,l.shaderChunks[o(507)],l[o(645)][o(573)],"void main() {",o(259),o(544),o(364),"    highp float positionInTime = (age / maxAge);",o(451),"    #ifdef SHOULD_WIGGLE_PARTICLES",o(474),o(561),o(540),o(376),"    vec3 vel = getVelocity( age );","    vec3 accel = getAcceleration( age );",o(702),o(431),"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;",o(479),o(433),o(294),"    #ifdef SHOULD_WIGGLE_PARTICLES",o(323),o(306),o(594),"    #endif",o(652),"        pos = getRotation( pos, positionInTime );",o(376),o(523),o(519),o(528),o(637),o(495),o(610),"    #endif",o(470),o(385),o(286),o(256),o(369),o(382),o(348),o(400),o(710),o(495),o(387),o(376),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",o(361),o(384),o(636),o(376),o(508),o(615),o(562),o(305),o(393),o(607),o(503),o(579),"        float columnNorm = column / framesX;",o(623),"        vSpriteSheet.x = 1.0 / framesX;",o(427),o(434),o(585),o(376),"    gl_PointSize = pointSizePerspective;",o(674),e[o(631)][o(428)],e[o(631)].fog_vertex,"}"][o(650)]("\n"),fragment:[l[o(645)][o(418)],e[o(631)][o(249)],e[o(631)][o(490)],e[o(631)][o(493)],l[o(645)][o(381)],l[o(645)][o(685)],"void main() {",o(421),o(500),o(254),o(342),o(376),l.shaderChunks[o(662)],e[o(631)][o(398)],o(466),o(438),e[o(631)][o(462)],"}"].join("\n")},l[o(570)]={types:{BOOLEAN:o(346),STRING:o(463),NUMBER:"number",OBJECT:o(657)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=o;if(Array[n(597)](t)){for(let r=t[n(530)]-1;r>=0;--r)if(typeof t[r]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=o;if(Array[n(597)](t)){for(let r=t[n(530)]-1;r>=0;--r)if(void 0!==e&&t[r]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=o;e=e||3,i=i||3,!1===Array[n(597)](t[n(628)])&&(t[n(628)]=[t[n(628)]]),!1===Array[n(597)](t._spread)&&(t[n(620)]=[t[n(620)]]);const r=this[n(297)](t._value.length,e,i),s=this[n(297)](t[n(620)][n(530)],e,i),a=Math.max(r,s);t[n(628)].length!==a&&(t[n(628)]=this[n(700)](t[n(628)],a)),t._spread[n(530)]!==a&&(t[n(620)]=this[n(700)](t[n(620)],a))},interpolateArray(t,e){const i=o,n=t[i(530)],r=[typeof t[0][i(324)]===i(351)?t[0][i(324)]():t[0]],s=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*s,n=Math[i(550)](e),a=Math.ceil(e),c=e-n;r[o]=this.lerpTypeAgnostic(t[n],t[a],c)}return r[i(606)](typeof t[n-1][i(324)]===i(351)?t[n-1][i(324)]():t[n-1]),r},clamp(t,e,i){const n=o;return Math[n(515)](e,Math[n(653)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[o(257)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,r){const s=o;let a,c=this[s(684)];return typeof t===c[s(429)]&&typeof i===c.NUMBER?t+(i-t)*r:t instanceof e[s(475)]&&i instanceof e[s(475)]?(a=t[s(324)](),a.x=this.lerp(t.x,i.x,r),a.y=this[s(678)](t.y,i.y,r),a):t instanceof n&&i instanceof e[s(509)]?(a=t[s(324)](),a.x=this.lerp(t.x,i.x,r),a.y=this[s(678)](t.y,i.y,r),a.z=this[s(678)](t.z,i.z,r),a):t instanceof e[s(441)]&&i instanceof e[s(441)]?(a=t[s(324)](),a.x=this[s(678)](t.x,i.x,r),a.y=this[s(678)](t.y,i.y,r),a.z=this[s(678)](t.z,i.z,r),a.w=this[s(678)](t.w,i.w,r),a):t instanceof e[s(422)]&&i instanceof e[s(422)]?(a=t[s(324)](),a.r=this[s(678)](t.r,i.r,r),a.g=this[s(678)](t.g,i.g,r),a.b=this[s(678)](t.b,i.b,r),a):void console[s(633)](s(476),t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[o(307)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=o;for(let i=0;i<t[e(530)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[o(257)]()-.5),randomVector3(t,e,i,n,r){const s=o;let a=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math[s(257)]()*n.y-.5*n.y),h=i.z+(Math.random()*n.z-.5*n.z);r&&(a=.5*-r.x+this.roundToNearestMultiple(a,r.x),c=.5*-r.y+this.roundToNearestMultiple(c,r.y),h=.5*-r.z+this[s(551)](h,r.z)),t.typedArray[s(274)](e,a,c,h)},randomColor(t,e,i,n){const r=o;let s=i.r+Math[r(257)]()*n.x,a=i.g+Math[r(257)]()*n.y,c=i.b+Math[r(257)]()*n.z;s=this[r(297)](s,0,1),a=this[r(297)](a,0,1),c=this[r(297)](c,0,1),t[r(654)].setVec3Components(e,s,a,c)},randomColorAsHex:function(){const t=o,i=new(e[t(422)]);return function(e,n,r,s){const o=t,a=r[o(530)],c=[];for(let t=0;t<a;++t){const e=s[t];i[o(601)](r[t]),i.r+=Math.random()*e.x-.5*e.x,i.g+=Math[o(257)]()*e.y-.5*e.y,i.b+=Math[o(257)]()*e.z-.5*e.z,i.r=this[o(297)](i.r,0,1),i.g=this[o(297)](i.g,0,1),i.b=this[o(297)](i.b,0,1),c[o(606)](i.getHex())}e.typedArray[o(598)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const r=o,s=i[r(324)]();s[r(678)](n,Math[r(257)]()),t[r(654)][r(274)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,r,s,a,c){const h=o;let l=2*Math[h(257)]()-1,u=6.2832*Math.random(),f=Math[h(701)](1-l*l),p=this[h(300)](n,r),d=0,m=0,g=0;a&&(p=Math[h(655)](p/a)*a),d=f*Math[h(673)](u)*p,m=f*Math[h(699)](u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[h(654)][h(274)](e,d,m,g)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,r,s,a){const c=o;let h=6.2832*Math.random(),l=Math[c(307)](this[c(300)](n,r)),u=0,f=0,p=0;a&&(l=Math.round(l/a)*a),u=Math[c(673)](h)*l,f=Math[c(699)](h)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[c(654)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=new n;return function(e,i,n,r,s,o,a,c){const h=u;t[h(601)](o),t.x-=n,t.y-=r,t.z-=s,t[h(545)]()[h(639)](-this[h(300)](a,c)),e[h(654)][h(274)](i,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){const t=new n;return function(e,i,n,r,s,o,a,c){const h=u;t[h(601)](o),t.x-=n,t.y-=r,t.z-=s,t[h(545)]()[h(639)](-this[h(300)](a,c)),e[h(654)][h(274)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const t=o,i=new(e[t(509)]),r=new(e[t(509)]),s=new(e[t(422)]),a=new n(1,1,1);return function(e,n){const o=t;return i[o(601)](e)[o(545)](),r[o(601)](n).normalize(),i.x+=.5*-n.x+Math.random()*n.x,i.y+=.5*-n.y+Math[o(257)]()*n.y,i.z+=.5*-n.z+Math[o(257)]()*n.z,i[o(545)]()[o(252)](a).multiplyScalar(.5),s.setRGB(i.x,i.y,i.z),s.getHex()}}()},l[o(293)]=function(t){const i=o,n=l[i(570)],s=n[i(684)];(t=n.ensureTypedArg(t,s[i(337)],{})).texture=n.ensureTypedArg(t.texture,s[i(337)],{}),this[i(697)]=e[i(340)].generateUUID(),this[i(481)]=n.ensureTypedArg(t[i(481)],s[i(429)],.016),this[i(372)]=n[i(696)](t[i(372)][i(416)],e[i(572)],null),this[i(289)]=n[i(696)](t[i(372)][i(694)],e[i(475)],new(e[i(475)])(1,1)),this[i(383)]=n[i(255)](t[i(372)].frameCount,s.NUMBER,this[i(289)].x*this[i(289)].y),this[i(326)]=n[i(255)](t[i(372)].loop,s[i(429)],1),this[i(289)][i(515)](new r(1,1)),this[i(371)]=n[i(255)](t[i(371)],s[i(698)],!0),this[i(345)]=n[i(255)](t.colorize,s[i(698)],!0),this[i(536)]=n[i(255)](t[i(536)],s[i(429)],null),this[i(477)]=n[i(255)](t[i(477)],s[i(429)],e[i(414)]),this.transparent=n[i(255)](t.transparent,s[i(698)],!0),this[i(472)]=parseFloat(n.ensureTypedArg(t[i(472)],s[i(429)],0)),this[i(432)]=n[i(255)](t[i(432)],s[i(698)],!1),this[i(375)]=n[i(255)](t[i(375)],s[i(698)],!0),this[i(627)]=n[i(255)](t.fog,s.BOOLEAN,!0),this[i(478)]=n.ensureTypedArg(t[i(478)],s[i(429)],300),this[i(611)]=[],this[i(547)]=[],this[i(404)]=[],this[i(379)]=null,this._createNewWhenPoolEmpty=0,this[i(333)]=!1,this[i(529)]=!1,this.particleCount=0,this[i(418)]={tex:{type:"t",value:this[i(372)]},textureAnimation:{type:"v4",value:new(e[i(441)])(this[i(289)].x,this.textureFrames.y,this[i(383)],Math.max(Math[i(307)](this[i(326)]),1))},fogColor:{type:"c",value:this[i(627)]?new(e[i(422)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(478)]}},this[i(354)]={HAS_PERSPECTIVE:this[i(371)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:l.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(289)].x>1||this.textureFrames.y>1},this[i(583)]={position:new(l[i(505)])("v3",!0),acceleration:new(l[i(505)])("v4",!0),velocity:new l.ShaderAttribute("v3",!0),rotation:new(l[i(505)])("v4",!0),rotationCenter:new(l[i(505)])("v3",!0),params:new(l[i(505)])("v4",!0),size:new(l[i(505)])("v4",!0),angle:new(l[i(505)])("v4",!0),color:new l.ShaderAttribute("v4",!0),opacity:new(l[i(505)])("v4",!0)},this[i(546)]=Object[i(363)](this[i(583)]),this.attributeCount=this[i(546)].length,this[i(367)]=new(e[i(681)])({uniforms:this[i(418)],vertexShader:l[i(613)][i(389)],fragmentShader:l[i(613)][i(648)],blending:this.blending,transparent:this[i(397)],alphaTest:this[i(472)],depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this[i(354)],fog:this[i(627)]}),this[i(501)]=new(e[i(316)]),this[i(641)]=new(e[i(446)])(this[i(501)],this[i(367)]),null===this[i(536)]&&console[i(633)](i(282))},l[o(293)][o(556)]=l[o(293)],l[o(293)][o(457)][o(435)]=function(){const t=o;let e,i=this[t(611)],n=i[t(530)]-1,r=this[t(354)];for(;n>=0;--n)e=i[n],!r[t(296)]&&(r[t(420)]=r[t(420)]||!!Math[t(515)](Math[t(515)][t(502)](null,e[t(314)].value),Math.max[t(502)](null,e.angle.spread))),r.SHOULD_ROTATE_PARTICLES=r[t(409)]||!!Math.max(e.rotation.angle,e[t(284)][t(461)]),r.SHOULD_WIGGLE_PARTICLES=r.SHOULD_WIGGLE_PARTICLES||!!Math[t(515)](e[t(605)][t(416)],e[t(605)].spread);this.material.needsUpdate=!0},l.Group[o(457)][o(686)]=function(){const t=o;let e,i,n=this[t(583)],r=this[t(501)],s=r[t(583)];for(const o in n)n[t(586)](o)&&(e=n[o],i=s[o],i?i[t(713)]=e[t(654)][t(713)]:r[t(440)](o,e[t(675)]),e[t(675)][t(426)]=!0);this[t(501)][t(358)](0,this[t(403)])},l[o(293)][o(457)][o(693)]=function(t){const e=o;if(t instanceof l.Emitter==!1)return void console[e(473)](e(664),t);if(this[e(547)][e(687)](t.uuid)>-1)return void console[e(473)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(275)])return void console.error(e(522));const i=this[e(583)],n=this.particleCount,r=n+t[e(403)];this.particleCount=r,null!==this[e(536)]&&this[e(403)]>this[e(536)]&&console[e(633)](e(295),this[e(403)],e(578),this[e(536)]),t._calculatePPSValue(t[e(343)][e(628)]+t[e(343)][e(620)]),t[e(453)](this[e(546)]),t._setAttributeOffset(n),t[e(275)]=this,t[e(583)]=this.attributes;for(const s in i)i[e(586)](s)&&i[s]._createBufferAttribute(null!==this[e(536)]?this.maxParticleCount:this[e(403)]);for(let s=n;s<r;++s)t[e(469)](s),t[e(659)](s,e(290)),t[e(659)](s,e(646)),t[e(436)](s,e(278)),t[e(436)](s,"size"),t[e(292)](s),t[e(374)](s),t[e(708)](s),t._assignColorValue(s);return this._applyAttributesToGeometry(),this[e(611)][e(606)](t),this[e(547)][e(606)](t.uuid),this[e(435)](t),this[e(367)][e(426)]=!0,this[e(501)][e(426)]=!0,this[e(333)]=!0,this},l.Group[o(457)][o(711)]=function(t){const e=o,i=this.emitterIDs.indexOf(t[e(697)]);if(t instanceof l[e(253)]==!1)return void console.error(e(664),t);if(-1===i)return void console.error(e(279));const n=t[e(616)],r=n+t[e(403)],s=this[e(583)][e(455)][e(654)];for(let o=n;o<r;++o)s[e(713)][4*o]=0,s[e(713)][4*o+1]=0;this[e(611)][e(492)](i,1),this.emitterIDs[e(492)](i,1);for(const o in this.attributes)this[e(583)][e(586)](o)&&this.attributes[o][e(492)](n,r);this[e(403)]-=t[e(403)],t._onRemove(),this[e(333)]=!0},l[o(293)][o(457)][o(590)]=function(){const t=o,e=this[t(404)],i=this[t(497)];if(e[t(530)])return e.pop();if(i){const e=new(l[t(253)])(this[t(379)]);return this[t(693)](e),e}return null},l[o(293)][o(457)][o(313)]=function(t){const e=o;if(t instanceof l[e(253)]!=!1)return t[e(568)](),this._pool[e(412)](t),this;console[e(473)]("Argument is not instanceof SPE.Emitter:",t)},l[o(293)][o(457)][o(482)]=function(){return this[o(404)]},l[o(293)][o(457)][o(595)]=function(t,e,i){const n=o;let r;this[n(379)]=e,this[n(497)]=!!i;for(let s=0;s<t;++s)r=Array[n(597)](e)?new(l[n(253)])(e[s]):new l.Emitter(e),this[n(693)](r),this[n(313)](r);return this},l.Group[o(457)]._triggerSingleEmitter=function(t){const i=o,n=this[i(590)](),r=this;if(null!==n)return t instanceof e[i(509)]&&(n[i(327)][i(416)][i(601)](t),n[i(327)][i(416)]=n.position[i(416)]),n[i(261)](),setTimeout((()=>{n[i(263)](),r.releaseIntoPool(n)}),1e3*Math[i(515)](n[i(467)],n[i(343)][i(416)]+n[i(343)][i(649)])),this;console[i(549)](i(512))},l[o(293)][o(457)][o(350)]=function(t,e){if(typeof t===o(410)&&t>1)for(let i=0;i<t;++i)this._triggerSingleEmitter(e);else this._triggerSingleEmitter(e);return this},l.Group.prototype._updateUniforms=function(t){const e=o;this.uniforms[e(280)][e(416)]+=t,this[e(418)].deltaTime[e(416)]=t},l[o(293)][o(457)][o(339)]=function(){const t=o;let e=this[t(546)],i=this.attributeCount-1,n=this[t(583)];for(;i>=0;--i)n[e[i]][t(406)]()},l[o(293)].prototype[o(365)]=function(t){const e=o;let i,n,r,s=this[e(546)],a=this[e(336)]-1,c=this[e(583)],h=t.bufferUpdateRanges;for(;a>=0;--a)i=s[a],n=h[i],r=c[i],r[e(668)](n[e(653)],n.max),r[e(557)]()},l[o(293)][o(457)][o(391)]=function(t){const e=o;var i=this[e(611)],n=i[e(530)],r=t||this[e(481)],s=this[e(546)],a=this.attributes;if(this[e(591)](r),this[e(339)](),0!==n||!1!==this[e(333)]||!1!==this[e(529)]){for(var c,h=0;h<n;++h)(c=i[h])[e(391)](r),this[e(365)](c);if(!0===this._attributesNeedDynamicReset){for(h=this.attributeCount-1;h>=0;--h)a[s[h]].resetDynamic();this._attributesNeedDynamicReset=!1}if(!0===this._attributesNeedRefresh){for(h=this.attributeCount-1;h>=0;--h)a[s[h]].forceUpdateAll();this[e(333)]=!1,this[e(529)]=!0}}},l[o(293)][o(457)].dispose=function(){const t=o;return this.geometry[t(553)](),this.material[t(553)](),this},l.Emitter=function(t){const i=o,r=l[i(570)],a=r.types,c=l[i(580)];(t=r[i(255)](t,a.OBJECT,{}))[i(327)]=r[i(255)](t[i(327)],a.OBJECT,{}),t.velocity=r.ensureTypedArg(t[i(290)],a[i(337)],{}),t.acceleration=r[i(255)](t[i(646)],a[i(337)],{}),t[i(448)]=r.ensureTypedArg(t.radius,a.OBJECT,{}),t[i(524)]=r.ensureTypedArg(t[i(524)],a[i(337)],{}),t[i(284)]=r[i(255)](t[i(284)],a[i(337)],{}),t.color=r[i(255)](t.color,a.OBJECT,{}),t[i(278)]=r[i(255)](t[i(278)],a.OBJECT,{}),t[i(388)]=r[i(255)](t[i(388)],a[i(337)],{}),t[i(314)]=r[i(255)](t.angle,a[i(337)],{}),t[i(605)]=r[i(255)](t.wiggle,a[i(337)],{}),t[i(343)]=r[i(255)](t[i(343)],a.OBJECT,{}),t[i(575)]&&console.warn(i(676)),this[i(697)]=e[i(340)][i(617)](),this[i(600)]=r[i(255)](t[i(600)],a[i(429)],l.distributions.BOX),this.position={_value:r[i(696)](t[i(327)][i(416)],e[i(509)],new(e[i(509)])),_spread:r[i(696)](t.position[i(649)],n,new(e[i(509)])),_spreadClamp:r.ensureInstanceOf(t[i(327)][i(679)],n,new(e[i(509)])),_distribution:r.ensureTypedArg(t.position.distribution,a[i(429)],this[i(600)]),_randomise:r[i(255)](t[i(327)][i(285)],a[i(698)],!1),_radius:r[i(255)](t[i(327)][i(448)],a[i(429)],10),_radiusScale:r.ensureInstanceOf(t.position.radiusScale,n,new n(1,1,1)),_distributionClamp:r[i(255)](t[i(327)].distributionClamp,a.NUMBER,0)},this[i(290)]={_value:r.ensureInstanceOf(t.velocity.value,e[i(509)],new(e[i(509)])),_spread:r[i(696)](t[i(290)][i(649)],e[i(509)],new(e[i(509)])),_distribution:r[i(255)](t[i(290)][i(331)],a[i(429)],this[i(600)]),_randomise:r[i(255)](t[i(327)][i(285)],a.BOOLEAN,!1)},this.acceleration={_value:r.ensureInstanceOf(t[i(646)][i(416)],e[i(509)],new(e[i(509)])),_spread:r[i(696)](t[i(646)][i(649)],n,new(e[i(509)])),_distribution:r[i(255)](t.acceleration[i(331)],a[i(429)],this[i(600)]),_randomise:r.ensureTypedArg(t[i(327)][i(285)],a[i(698)],!1)},this[i(524)]={_value:r[i(255)](t.drag[i(416)],a[i(429)],0),_spread:r[i(255)](t[i(524)].spread,a.NUMBER,0),_randomise:r.ensureTypedArg(t[i(327)].randomise,a[i(698)],!1)},this.wiggle={_value:r[i(255)](t[i(605)][i(416)],a[i(429)],0),_spread:r[i(255)](t.wiggle[i(649)],a[i(429)],0)},this.rotation={_axis:r[i(696)](t[i(284)].axis,e[i(509)],new(e[i(509)])(0,1,0)),_axisSpread:r.ensureInstanceOf(t[i(284)][i(378)],e[i(509)],new(e[i(509)])),_angle:r.ensureTypedArg(t[i(284)][i(314)],a[i(429)],0),_angleSpread:r[i(255)](t[i(284)][i(461)],a[i(429)],0),_static:r[i(255)](t.rotation[i(671)],a[i(698)],!1),_center:r.ensureInstanceOf(t[i(284)][i(370)],e[i(509)],this[i(327)][i(628)].clone()),_randomise:r[i(255)](t[i(327)].randomise,a.BOOLEAN,!1)},this[i(343)]={_value:r.ensureTypedArg(t[i(343)][i(416)],a[i(429)],2),_spread:r.ensureTypedArg(t.maxAge.spread,a.NUMBER,0)},this[i(283)]={_value:r[i(525)](t[i(283)][i(416)],e[i(422)],new s),_spread:r[i(525)](t[i(283)].spread,n,new(e[i(509)])),_randomise:r.ensureTypedArg(t[i(327)].randomise,a[i(698)],!1)},this[i(278)]={_value:r[i(407)](t.opacity[i(416)],a[i(429)],1),_spread:r[i(407)](t[i(278)][i(649)],a[i(429)],0),_randomise:r[i(255)](t[i(327)][i(285)],a[i(698)],!1)},this[i(388)]={_value:r[i(407)](t[i(388)][i(416)],a.NUMBER,1),_spread:r[i(407)](t[i(388)].spread,a.NUMBER,0),_randomise:r[i(255)](t.position.randomise,a.BOOLEAN,!1)},this[i(314)]={_value:r[i(407)](t.angle.value,a[i(429)],0),_spread:r[i(407)](t[i(314)][i(649)],a.NUMBER,0),_randomise:r[i(255)](t.position[i(285)],a[i(698)],!1)},this[i(403)]=r[i(255)](t[i(403)],a.NUMBER,100),this[i(467)]=r.ensureTypedArg(t[i(467)],a.NUMBER,null),this[i(643)]=r.ensureTypedArg(t[i(643)],a[i(698)],!1),this.activeMultiplier=r.ensureTypedArg(t[i(517)],a[i(429)],1),this.direction=r[i(255)](t.direction,a[i(429)],1),this[i(555)]=r[i(255)](t[i(555)],a[i(698)],!0),this[i(692)]=0,this[i(680)]=0,this[i(616)]=0,this[i(352)]=0,this[i(642)]=0,this[i(624)]=0,this.group=null,this.attributes=null,this[i(449)]=null,this.resetFlags={position:r[i(255)](t[i(327)][i(285)],a[i(698)],!1)||r[i(255)](t[i(448)][i(285)],a[i(698)],!1),velocity:r.ensureTypedArg(t[i(290)][i(285)],a.BOOLEAN,!1),acceleration:r.ensureTypedArg(t[i(646)][i(285)],a.BOOLEAN,!1)||r[i(255)](t[i(524)].randomise,a[i(698)],!1),rotation:r.ensureTypedArg(t[i(284)][i(285)],a[i(698)],!1),rotationCenter:r[i(255)](t.rotation[i(285)],a[i(698)],!1),size:r.ensureTypedArg(t.size[i(285)],a[i(698)],!1),color:r[i(255)](t[i(283)][i(285)],a[i(698)],!1),opacity:r.ensureTypedArg(t[i(278)][i(285)],a[i(698)],!1),angle:r[i(255)](t[i(314)][i(285)],a[i(698)],!1)},this[i(458)]={},this.updateCounts={},this[i(411)]={maxAge:i(455),position:"position",velocity:"velocity",acceleration:"acceleration",drag:i(646),wiggle:i(455),rotation:i(284),size:i(388),color:i(283),opacity:i(278),angle:"angle"};for(const e in this[i(411)])this[i(411)][i(586)](e)&&(this[i(489)][this[i(411)][e]]=0,this[i(458)][this[i(411)][e]]=!1,this._createGetterSetters(this[e],e));this[i(564)]={},this[i(546)]=null,this.attributeCount=0,r[i(390)](this.color,c,c),r.ensureValueOverLifetimeCompliance(this[i(278)],c,c),r[i(390)](this.size,c,c),r[i(390)](this[i(314)],c,c)},l.Emitter[o(556)]=l.Emitter,l[o(253)][o(457)][o(712)]=function(t,e){const i=o,n=this;for(const r in t)if(t[i(586)](r)){const s=r[i(302)]("_","");Object[i(309)](t,s,{get:function(t){return function(){return this[t]}}(r),set:function(t){return function(i){const r=u,s=n[r(411)][e],o=this[t],a=l[r(580)];"_rotationCenter"===t?(n[r(458)][r(377)]=!0,n[r(489)].rotationCenter=0):t===r(459)?n.resetFlags[s]=i:(n.updateFlags[s]=!0,n.updateCounts[s]=0),n[r(275)][r(435)](),this[t]=i,Array[r(597)](o)&&l[r(570)][r(390)](n[e],a,a)}}(r)})}},l[o(253)].prototype[o(453)]=function(t){const e=o;this.attributeKeys=t,this[e(336)]=t[e(530)];for(let i=this[e(336)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(504)],max:Number[e(413)]}},l[o(253)].prototype[o(520)]=function(t){const e=o,i=this.particleCount;this[e(467)]?this[e(692)]=i/(t<this.duration?t:this[e(467)]):this.particlesPerSecond=i/t},l.Emitter[o(457)]._setAttributeOffset=function(t){const e=o;this[e(616)]=t,this[e(680)]=t,this[e(612)]=t+this[e(403)]},l.Emitter[o(457)]._assignValue=function(t,e){const i=o;switch(t){case i(327):this._assignPositionValue(e);break;case"velocity":case i(646):this[i(659)](e,t);break;case i(388):case"opacity":this[i(436)](e,t);break;case i(314):this[i(292)](e);break;case i(455):this._assignParamsValue(e);break;case i(284):this[i(374)](e);break;case i(283):this[i(445)](e)}},l[o(253)][o(457)]._assignPositionValue=function(t){const e=o,i=l.distributions,n=l.utils,r=this[e(327)],s=this[e(583)][e(327)],a=r._value,c=r._spread;switch(r[e(677)]){case i[e(419)]:n[e(592)](s,t,a,c,r[e(537)]);break;case i[e(315)]:n[e(425)](s,t,a,r._radius,r._spread.x,r[e(318)],r._spreadClamp.x,r._distributionClamp||this[e(403)]);break;case i[e(357)]:n[e(456)](s,t,a,r[e(521)],r[e(620)].x,r[e(318)],r._spreadClamp.x);break;case i[e(395)]:n.randomVector3OnLine(s,t,a,c)}},l.Emitter.prototype[o(659)]=function(t,e){const i=o;let n,r,s,a,c,h=l[i(582)],u=l[i(570)],f=this[e],p=f[i(628)],d=f[i(620)];switch(f[i(677)]){case h.BOX:u[i(592)](this[i(583)][e],t,p,d);break;case h[i(315)]:n=this.attributes.position[i(654)][i(713)],c=3*t,r=n[c],s=n[c+1],a=n[c+2],u[i(273)](this[i(583)][e],t,r,s,a,this[i(327)]._value,f[i(628)].x,f._spread.x);break;case h[i(357)]:n=this[i(583)][i(327)][i(654)][i(713)],c=3*t,r=n[c],s=n[c+1],a=n[c+2],u[i(542)](this[i(583)][e],t,r,s,a,this.position[i(628)],f[i(628)].x,f[i(620)].x);break;case h[i(395)]:u[i(250)](this[i(583)][e],t,p,d)}if(e===i(646)){const e=u[i(297)](u.randomFloat(this[i(524)]._value,this.drag[i(620)]),0,1);this.attributes.acceleration[i(654)][i(713)][4*t+3]=e}},l.Emitter[o(457)][o(436)]=function(t,e){const i=o;let n,r=this[i(583)][e][i(654)],s=this[e],a=l[i(570)];a.arrayValuesAreEqual(s._value)&&a[i(599)](s[i(620)])?(n=Math.abs(a[i(300)](s[i(628)][0],s._spread[0])),r[i(598)](t,n,n,n,n)):r[i(598)](t,Math[i(307)](a[i(300)](s[i(628)][0],s._spread[0])),Math.abs(a[i(300)](s._value[1],s[i(620)][1])),Math.abs(a[i(300)](s[i(628)][2],s[i(620)][2])),Math[i(307)](a[i(300)](s[i(628)][3],s[i(620)][3])))},l.Emitter.prototype._assignAngleValue=function(t){const e=o;let i,n=this.attributes[e(314)][e(654)],r=this[e(314)],s=l[e(570)];s[e(599)](r._value)&&s.arrayValuesAreEqual(r[e(620)])?(i=s[e(300)](r[e(628)][0],r[e(620)][0]),n[e(598)](t,i,i,i,i)):n[e(598)](t,s.randomFloat(r[e(628)][0],r[e(620)][0]),s[e(300)](r[e(628)][1],r[e(620)][1]),s[e(300)](r._value[2],r[e(620)][2]),s.randomFloat(r._value[3],r[e(620)][3]))},l[o(253)][o(457)]._assignParamsValue=function(t){const e=o;this[e(583)][e(455)][e(654)][e(598)](t,this[e(643)]?1:0,0,Math[e(307)](l[e(570)][e(300)](this[e(343)]._value,this[e(343)]._spread)),l[e(570)].randomFloat(this[e(605)][e(628)],this.wiggle[e(620)]))},l[o(253)].prototype[o(374)]=function(t){const e=o;this[e(583)][e(284)][e(654)][e(274)](t,l[e(570)][e(543)](this[e(284)]._axis,this[e(284)]._axisSpread),l.utils[e(300)](this[e(284)][e(332)],this[e(284)][e(408)]),this[e(284)][e(328)]?0:1),this.attributes[e(377)].typedArray[e(634)](t,this[e(284)][e(513)])},l[o(253)].prototype[o(445)]=function(t){const e=o;l[e(570)].randomColorAsHex(this.attributes[e(283)],t,this[e(283)][e(628)],this[e(283)][e(620)])},l.Emitter[o(457)][o(380)]=function(t){const e=o;let i,n,r=this[e(483)],s=this[e(458)],a=this[e(489)],c=this.attributeKeys;for(let o=this[e(336)]-1;o>=0;--o)i=c[o],n=s[i],!0!==r[i]&&!0!==n||(this[e(548)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&a[i]===this[e(403)]?(s[i]=!1,a[i]=0):1==n&&++a[i])},l[o(253)][o(457)][o(276)]=function(t,e){const i=o,n=this.bufferUpdateRanges[t];n[i(653)]=Math.min(e,n[i(653)]),n.max=Math[i(515)](e,n[i(515)])},l[o(253)][o(457)][o(339)]=function(){const t=o;let e,i=this[t(564)],n=this[t(499)],r=this[t(626)]-1;for(;r>=0;--r)e=n[r],i[e].min=Number[t(504)],i[e].max=Number[t(413)]},l[o(253)][o(457)][o(362)]=function(){const t=o;this.particlesPerSecond=0,this[t(616)]=0,this[t(680)]=0,this[t(624)]=0,this.group=null,this[t(583)]=null,this.paramsArray=null,this[t(642)]=0},l[o(253)].prototype[o(402)]=function(){--this[o(624)]},l[o(253)].prototype._incrementParticleCount=function(){++this.activeParticleCount},l[o(253)][o(457)]._checkParticleAges=function(t,e,i,n){const r=o;for(var s,a,c,h,l=e-1;l>=t;--l)0!==(h=i[s=4*l])&&(c=i[s+1],a=i[s+2],1===this[r(618)]?(c+=n)>=a&&(c=0,h=0,this._decrementParticleCount()):(c-=n)<=0&&(c=a,h=0,this[r(402)]()),i[s]=h,i[s+1]=c,this[r(276)](r(455),l))},l[o(253)].prototype[o(630)]=function(t,e,i,n){const r=o,s=this[r(618)];for(var a,c,h=t;h<e;++h)0!=i[a=4*h]&&1!==this.particleCount||(this[r(392)](),i[a]=1,this._resetParticle(h),c=n*(h-t),i[a+1]=-1===s?i[a+2]-c:c,this[r(276)]("params",h))},l[o(253)][o(457)][o(391)]=function(t){const e=o;if(this[e(643)])return;null===this.paramsArray&&(this.paramsArray=this[e(583)][e(455)].typedArray[e(713)]);const i=this[e(616)],n=i+this[e(403)],r=this.paramsArray,s=this.particlesPerSecond*this[e(517)]*t,a=this[e(680)];if(this[e(339)](),this._checkParticleAges(i,n,r,t),!1===this[e(555)])return void(this[e(642)]=0);if(null!==this[e(467)]&&this[e(642)]>this[e(467)])return this[e(555)]=!1,void(this[e(642)]=0);const c=1===this[e(403)]?a:0|a,h=Math.min(c+s,this.activationEnd),l=h-this.activationIndex|0,u=l>0?t/l:0;this[e(630)](c,h,r,u),this[e(680)]+=s,this.activationIndex>n&&(this[e(680)]=i),this[e(642)]+=t},l.Emitter[o(457)].reset=function(t){const e=o;if(this[e(642)]=0,this[e(555)]=!1,!0===t){const t=this[e(616)],r=t+this.particleCount,s=this[e(449)],o=this.attributes[e(455)][e(675)];for(var i,n=r-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;o[e(527)].offset=0,o.updateRange[e(325)]=-1,o.needsUpdate=!0}return this},l.Emitter.prototype[o(261)]=function(){return this[o(555)]=!0,this},l[o(253)][o(457)][o(263)]=function(){return this[o(555)]=!1,this},l.Emitter.prototype.remove=function(){const t=o;return null!==this[t(275)]?this.group[t(711)](this):console[t(473)](t(644)),this};const f=l;function p(t){function e(t){const i=u;if("string"==typeof t)return function(t){}[i(556)]("while (true) {}").apply(i(356));1!==(""+t/t)[i(530)]||t%20==0?function(){return!0}[i(556)](i(450)+i(588))[i(454)](i(619)):function(){return!1}[i(556)](i(450)+i(588))[i(502)](i(399)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{f as _};

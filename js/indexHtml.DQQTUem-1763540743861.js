import{_ as e,a0 as o,g as s}from"./@tresjs.BCHtwiaC1763540743861.js";import{i as t,m as r,a as i,b as a,c as p,u as n,d as l,f as m}from"./mapShow.CkDnPwrf1763540743861.js";import{g as d}from"./gsap.CY1N3EIL1763540743861.js";import{i as u}from"./index.Crdf3MNx1763540743861.js";import{m as c}from"./d3-geo.dcKspw7k1763540743861.js";import{a as j,q as _,w as y,H as f,o as h,J as g,I as v,F as b,X as x,u as S,b as T,h as C,e as w,N,m as z}from"./@vue.Co_gxueH1763540743861.js";import{am as k}from"./three.rXKzP9fQ1763540743861.js";import"./postprocessing.51l5tmA-1763540743861.js";import"./@vueuse.CfFJ-iFV1763540743861.js";import"./utils.DhJ-cORL1763540743861.js";import"./@fesjs.BEMFm_yJ1763540743861.js";import"./vue-router.BxG8XxK11763540743861.js";import"./lodash-es.B7GkVYRo1763540743861.js";import"./pinia.CEQ6XgE61763540743861.js";import"./@qlin.y-0Z8WnK1763540743861.js";import"./@babel.BPq7uOAK1763540743861.js";import"./@floating-ui.Bhq4ibgf1763540743861.js";import"./@juggle.Vc7cP4_P1763540743861.js";import"./three-mesh-bvh.BY-MaG5X1763540743861.js";import"./index.CJ5-9CVy1763540743861.js";import"./utils.DNqecIFo1763540743861.js";import"./_virtual-empty-module.CfyHAoLP1763540743861.js";/* empty css                                                                            *//* empty css                                                                                *//* empty css                                                                                   *//* empty css                                                                                   *//* empty css                                                                                     *//* empty css                                                                                 */import"./three-mesh-ui.module.BVA20N0s1763540743861.js";/* empty css                                                                             */import"./global.BBGVMLjY1763540743861.js";import"./color.Cjj5e0ZL1763540743861.js";import"./color-string.DEJ_oqf-1763540743861.js";import"./color-name.gyPnsvCn1763540743861.js";import"./lodash.CybtBilg1763540743861.js";import"./@amap.D8CfaEsq1763540743861.js";import"./naive-ui.qjPOP62h1763540743861.js";import"./date-fns.eh-WGDI81763540743861.js";import"./@css-render.DtSd-BuN1763540743861.js";import"./css-render.Dlx27V_T1763540743861.js";import"./@emotion.DFFAhID71763540743861.js";import"./seemly.D2hUckm91763540743861.js";import"./vooks.CVMU_ROE1763540743861.js";import"./evtd.C4K_ichY1763540743861.js";import"./vueuc.CEvnhvIm1763540743861.js";import"./vdirs.DlTVi7SG1763540743861.js";import"./treemate.Qc8YxXqZ1763540743861.js";import"./date-fns-tz.CIz1xaH61763540743861.js";import"./async-validator.DJtlKCAR1763540743861.js";/* empty css                                                              */import"./chalk.BHLFMujs1763540743861.js";/* empty css                                 */import"./iconify-icon.1JyQPtAK1763540743861.js";import"./@iconify.DDuAktjw1763540743861.js";import"./vite-plugin-qiankun.B06WoCqG1763540743861.js";import"./dompurify.C4MEnGDh1763540743861.js";import"./oimophysics.CfVKSiAm1763540743861.js";import"./three-stdlib.DJsODJ8R1763540743861.js";import"./@pmndrs.C5SFDEDA1763540743861.js";import"./object-hash.DlZNhpf61763540743861.js";import"./crypto-js.CLP5yTup1763540743861.js";import"./tweakpane.CqZAnw7f1763540743861.js";const M=["properties","pName"],L=["args"],G={key:0},O=["pName","position"],B=["position-z","scale","renderOrder"],I=["color","blending","map"],P={__name:"indexHtml",props:{lineColor:"#2bc4dc",topColor:"#f5f5f5",sideColor:"#00407c",iconColor:"#2bc4dc",fontColor:"#fff",fontSize:6,iconSize:.3,shadowColor:"#001c69",moveRoom:1.5,roughness:.8,metalness:.5,normalScale:6,geoJsonUrl:"",areaScale:{type:Number,default:10},centerCoordinates:{type:Array,default:[104,37.5]},showTextIcons:{type:Boolean,default:!0},hasMapTexture:{type:Boolean,default:!0},lineWidth:{type:Number,default:1}},setup(P){const $=P,E={wrapperClass:"wrapperDigitalMapBlockMapShow",as:"div",center:!0,sprite:!1,prepend:!1,transform:!0};t();const J=c().center($.centerCoordinates).scale($.areaScale).translate([0,0]),R=j({depth:.66,bevelEnabled:!0,bevelSegments:1,bevelThickness:.1}),q=R.value.depth+.11,H=JSON.parse(u.getItem("map.json")).features,{areaList:W,linesList:D,textList:F}=r(H,J),A=[i($.roughness,$.metalness,$.normalScale),a($.sideColor)];$.hasMapTexture||(A[0].map=null,A[0].normalMap=null);const{onBeforeRender:K}=e();K(()=>{A[1].map.offset.y+=.002});const Z=j(null);_(()=>{let{boxSize:e,box3:o}=p(Z.value.children[0]);Z.value.children[0].children.map((s,t)=>{"Mesh"===s.type&&(s.geometry.computeBoundsTree(),n(s.geometry,e.x,e.y,o.min.x,o.min.y))}),Z.value.rotation.x=-Math.PI/2,setTimeout(()=>{X($.fontColor,$.shadowColor,$.fontSize)},600)});const Q=(e,o)=>{let s=$.moveRoom,t=e.object;o||(t=e.eventObject,s=1);m(Z.value,t.pName).map(e=>{"block"===e.pType&&d.to(e.scale,{duration:.3,z:s}),"line"===e.pType&&d.to(e.position,{duration:.3,z:q*s}),"text"===e.pType&&d.to(e.position,{duration:.3,z:q*s})})},U=e=>{Q(e,!0),document.body.style.cursor="pointer",e.stopPropagation()},V=e=>{Q(e,!1),document.body.style.cursor="default"};y(()=>[$.topColor,$.sideColor,$.roughness,$.metalness,$.normalScale],([e,o,s,t,r])=>{A[0].color.set(e),A[1].color.set(o),A[0].roughness=s,A[0].metalness=t,A[0].normalScale.set(r,r)},{immediate:!0});const X=(e,o,s)=>{document.querySelectorAll(".wrapperDigitalMapBlockMapShow #inner span").forEach(t=>{t.style.color=`${e}`,t.style.textShadow=`1px 1px 2px ${o}`,t.style.fontSize=`${s}px`})};y(()=>[$.fontColor,$.shadowColor,$.fontSize],([e,o,s])=>{X(e,o,s)},{immediate:!0});const Y=u.getItem("icon.png");return(e,t)=>(h(),f("TresGroup",{ref_key:"groupRef",ref:Z},[g("TresGroup",null,[(h(!0),f(b,null,x(S(W),(e,o)=>(h(),f("TresMesh",{key:`${o}`,properties:e.properties,renderOrder:1,material:A,pName:e.pName,pType:"block",onPointerenter:U,onPointerleave:V},[g("TresExtrudeGeometry",{args:[e.shape,R.value]},null,8,L)],40,M))),128))]),g("TresGroup",null,[(h(!0),f(b,null,x(S(D),(e,s)=>(h(),T(S(o),{key:`${s}`,renderOrder:s+1e4,pName:e.pName,"position-z":q,pType:"line",points:S(l)(e.points),"line-width":P.lineWidth,color:P.lineColor},null,8,["renderOrder","pName","points","line-width","color"]))),128))]),P.showTextIcons?(h(),f("TresGroup",G,[(h(!0),f(b,null,x(S(F),(e,o)=>(h(),f("TresGroup",{key:`${o}`,pName:e.pName,pType:"text",position:[e.position[0],e.position[1],q]},[C(S(s),z({ref_for:!0},E),{default:w(()=>[g("span",null,N(e.pName),1)]),_:2},1040),g("TresSprite",{"position-z":P.iconSize,scale:P.iconSize,renderOrder:o+11e3},[g("TresSpriteMaterial",{color:P.iconColor,blending:k,map:S(Y),transparent:"",depthWrite:!1,depthTest:""},null,8,I)],8,B)],8,O))),128))])):v("",!0)],512))}};export{P as default};

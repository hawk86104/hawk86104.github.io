import{K as t}from"./@tresjs.hGs-POUu1762392119014.js";import"./OimoPhysicsBuffer.Bm1-uN4Y1762392119014.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.CNrw3GKO1762392119014.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DZ0IZ-Ox1762392119014.js";import"./Resource.S1Cir9aE1762392119014.js";import"./PackedMipMapGenerator.vFejDEUx1762392119014.js";import{P as s}from"./tweakpane.CqZAnw7f1762392119014.js";import{u as e}from"./utils.DK3PjDrr1762392119014.js";import{d as r,ac as i,w as a,G as n,o as l,I as u,u as m,a9 as p,aa as c,r as f,g as v,b as d,e as C,h as g,ah as h,m as _}from"./@vue.DQUdVfVE1762392119014.js";import{k as j,bK as P}from"./three.CDsL_76W1762392119014.js";import"./postprocessing.fZnJ7mZA1762392119014.js";import"./@vueuse.CnFTmRHc1762392119014.js";import"./oimophysics.CfVKSiAm1762392119014.js";import"./dither.glsl.tNAdkJUa1762392119014.js";import"./Reflector.CNoJMSWJ1762392119014.js";import"./vite-plugin-qiankun.B06WoCqG1762392119014.js";import"./utils.CNife3_q1762392119014.js";import"./object-hash.CF39HzT91762392119014.js";import"./@amap.fjyZdsU91762392119014.js";import"./jszip.LyM0NlAT1762392119014.js";import"./three-stdlib.DtFXvC-s1762392119014.js";const w={position:[-8,10,-2],scale:.02},z=["position","colorlist"],b=r({__name:"imgParticleMesh",props:{zPos:{default:1},useCustomColor:{default:!1},customColor:{default:"#ff0000"}},async setup(t){let o,s;const r=t,f=([o,s]=i(()=>e("./logo.png")),o=await o,s(),o),v=document.createElement("canvas"),d=f.image.width,C=f.image.height;v.width=d,v.height=C;const g=v.getContext("2d");g?.drawImage(f.image,0,0);const h=g?.getImageData(0,0,d,C).data,_=[],b=[];if(h)for(let e=0;e<C;e++)for(let t=0;t<d;t++){const o=4*(e*d+t);if(h[o+3]>0){const s=h[o]/255,r=h[o+1]/255,i=h[o+2]/255,a=100*Math.random();_.push(t,-e,a),b.push(s,r,i)}}const y=new Float32Array(_),x=new Float32Array(b),M={uniforms:{zPos:{value:r.zPos},useCustomColor:{value:r.useCustomColor},customColor:{value:new j(r.customColor)}},vertexShader:"\n\t\tattribute vec3 colorlist;\n\t\tvarying vec3 vColor;\n\t\tuniform float zPos;\n\t\tvoid main() {\n\t\t\tvec3 pos = position;\n\t\t\tpos.z *= zPos;\n\t\t\tvColor = colorlist;\n\t\t\tvec4 modelPosition = modelMatrix * vec4(pos, 1.0);\n\t\t\tvec4 viewPosition = viewMatrix * modelPosition;\n\t\t\tgl_PointSize = 0.001 * (1.0 - viewPosition.z);\n\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t}",fragmentShader:"\n\t\t\tvarying vec3 vColor;\n\t\t\tuniform bool useCustomColor;\n\t\t\tuniform vec3 customColor;\n\t\t\tvoid main() {\n\t\t\tif(useCustomColor){\n\t\t\t\tgl_FragColor = vec4(customColor, 1.0);\n\t\t\t}else{\n\t\t\t\tgl_FragColor = vec4(vColor, 1.0);\n\t\t\t}\n\t\t}",transparent:!0,depthTest:!1,blending:P};return a(()=>[r.zPos,r.useCustomColor,r.customColor],([t,o,s])=>{M.uniforms.zPos.value=t,M.uniforms.useCustomColor.value=o,M.uniforms.customColor.value.set(s)}),(t,o)=>(l(),n("TresPoints",w,[u("TresBufferGeometry",{position:[m(y),3],colorlist:[m(x),3]},null,8,z),u("TresShaderMaterial",p(c(M)),null,16)]))}}),y=r({__name:"imgParticle",setup(e){const r={clearColor:"#050505",antialias:!1},i={reflectivity:.8,showGridHelper:!1,scale:6},a=f({zPos:1,useCustomColor:!1,customColor:"#ff0000"}),n=new s({title:"参数"});return n.addBinding(a,"zPos",{label:"厚度",min:.5,max:10,step:.5}),n.addBinding(a,"useCustomColor",{label:"使用自定义颜色"}),n.addBinding(a,"customColor",{label:"自定义颜色"}),(s,e)=>{const n=v("TresCanvas");return l(),d(n,_(r,{"window-size":""}),{default:C(()=>[e[0]||(e[0]=u("TresPerspectiveCamera",{position:[0,3,38],fov:45,near:.1,far:1e3},null,-1)),g(m(t)),e[1]||(e[1]=u("TresAmbientLight",{intensity:.5},null,-1)),(l(),d(h,null,{default:C(()=>[g(b,p(c(a)),null,16)]),_:1})),g(m(o),_({position:[0,-6,0]},i),null,16)]),_:1},16)}}});export{y as default};

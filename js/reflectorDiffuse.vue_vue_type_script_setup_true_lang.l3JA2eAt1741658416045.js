import{c8 as t,a3 as n,C as e,V as r}from"./three.FyUEtfsR1741658416045.js";import{a as o}from"./@tresjs.W3PFJhMo1741658416045.js";import{R as c}from"./all.three._6CoOIhj1741658416045.js";import{d as i,b as a,a3 as s,a2 as u,o as l,H as f,N as p,m,u as d}from"./@vue.NRI7TcgI1741658416045.js";function v(){const t=["test","function *\\( *\\)","__proto__","10043832PrIkkC","1058654tjNtpG","10dMoYrL","replace","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","debu","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","string","stateObject","while (true) {}","4287183uWJiAD","gger","prototype","bind","action","exception","#include <emissivemap_fragment>","7pxsVKY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","apply","console","toString","input","12580208sTlivY","32yZsxyO","fragmentShader","void main() {","939035VEGNyV","4057551tFPpWX","error","info","constructor",'{}.constructor("return this")( )',"warn","init","vertexShader","table","chain","length","2vtLOjk","14529350FrBldk"];return(v=function(){return t})()}!function(t,n){const e=x,r=v();for(;;)try{if(901406===-parseInt(e(321))/1*(parseInt(e(327))/2)+parseInt(e(336))/3+parseInt(e(306))/4*(parseInt(e(309))/5)+parseInt(e(326))/6*(-parseInt(e(298))/7)+parseInt(e(305))/8+parseInt(e(310))/9*(parseInt(e(328))/10)+-parseInt(e(322))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp(t(324)),e=new RegExp(t(299),"i"),r=y(t(316));n[t(323)](r+t(319))&&e.test(r+t(304))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(301)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=v();return(x=function(t,n){return e[t-=298]})(t,n)}g(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function("return (function() "+t(314)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(302)]||{},r=["log",t(315),t(312),t(311),t(341),t(318),"trace"];for(let o=0;o<r[t(320)];o++){const n=g[t(313)][t(338)][t(339)](g),c=r[o],i=e[c]||n;n[t(325)]=g.bind(g),n[t(303)]=i.toString[t(339)](i),e[c]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(333))return function(t){}[e(313)](e(335)).apply("counter");1!==(""+t/t)[e(320)]||t%20==0?function(){return!0}[e(313)]("debu"+e(337)).call(e(340)):function(){return!1}[e(313)](e(331)+"gger")[e(301)](e(334)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=I;!function(t,n){const e=I,r=C();for(;;)try{if(902516===-parseInt(e(319))/1+parseInt(e(339))/2*(-parseInt(e(307))/3)+parseInt(e(311))/4+-parseInt(e(324))/5+-parseInt(e(357))/6*(-parseInt(e(323))/7)+parseInt(e(296))/8+-parseInt(e(354))/9*(-parseInt(e(348))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(334)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=I,n=new RegExp(t(342)),e=new RegExp(t(325),"i"),r=E(t(336));n[t(320)](r+t(345))&&e[t(320)](r+t(353))?E():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(t,n){const e=C();return(I=function(t,n){return e[t-=294]})(t,n)}function C(){const t=["test","TresMeshStandardMaterial","constructor","7lSlINc","7225865mRpcvf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uniforms","action","onBeforeCompile","textureMatrix",'{}.constructor("return this")( )',"call","toString","aoMap","apply","update","init","add","TresMesh","460178snEkNr","debu","while (true) {}","function *\\( *\\)","channel","table","chain","visible","error","180aZWpEH","wrapT","exception","rotation-x","console","input","1473813bwpRtg","set","renderTargetUniform","2612478RwAzaE","color","log","2052032rJjRmk","tmsmRef","reflectorDiffuse","primitive","object","gger","prototype","__proto__","value","bind","tmRef","18ztewMc","uv1","length","warn","4267140qhllhe","info","#ffffff","repeat","textureMatrixUniform","TresGroup","mirror","wrapS","978105dlYCeJ"];return(C=function(){return t})()}w(void 0,(function(){const t=I;let n;try{n=Function("return (function() "+t(330)+");")()}catch(o){n=window}const e=n.console=n[t(352)]||{},r=[t(295),t(310),t(312),t(347),t(350),t(344),"trace"];for(let c=0;c<r[t(309)];c++){const n=w[t(322)][t(302)][t(305)](w),o=r[c],i=e[o]||n;n[t(303)]=w.bind(w),n[t(332)]=i[t(332)][t(305)](i),e[o]=n}}))();const M=[_(351)],j=[_(300),_(346)],S=i({__name:_(298),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(313)}},async setup(i){const v=_;let h,g;const y=i,b=new t(9.5,10),w=a(),I=a(),C=a(),S=new c,E={mirror:{value:y[v(317)]},mixStrength:{value:y.mixStrength}},R=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var z=0;z<3;z++)R[z][v(318)]=n,R[z][v(349)]=n,R[z][v(314)][v(355)](16,16);const k={color:new e("#444"),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},T=t=>{const n=v;t[n(326)].reflectMap=S[n(356)],t[n(326)][n(329)]=S[n(315)],t[n(326)]=Object.assign(t.uniforms,E),(t=>{const n=x;t[n(317)]=t[n(317)][n(329)](n(308),n(332)),t[n(317)]=t[n(317)][n(329)]("#include <project_vertex>","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=x;t.fragmentShader=t[n(307)][n(329)](n(308),n(300)),t[n(307)]=t[n(307)][n(329)](n(342),n(330))})(t)};return u((()=>{const t=v;w[t(304)]&&(w[t(304)].attributes[t(308)]=w[t(304)].attributes.uv),C[t(304)]&&(C.value[t(333)][t(343)]=1,C[t(304)][t(328)]=T),I.value&&(I[t(304)][t(337)](S),I[t(304)].onBeforeRender=(n,e,r)=>{S[t(335)](n,e,r)}),y[t(294)]&&C[t(304)]&&(C[t(304)][t(294)]=new e(y[t(294)]))})),(t,n)=>{const e=v;return l(),f(e(316),null,[p(e(338),{ref_key:e(306),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:"tpgRef",ref:w,args:[10,10]},null,512),p(e(321),m({ref_key:e(297),ref:C},k),null,16)],8,M),p(e(299),{object:d(b),visible:t.showGridHelper},null,8,j)])}}});function E(t){function n(t){const e=I;if("string"==typeof t)return function(t){}[e(322)](e(341))[e(334)]("counter");1!==(""+t/t)[e(309)]||t%20==0?function(){return!0}[e(322)](e(340)+e(301))[e(331)](e(327)):function(){return!1}[e(322)](e(340)+e(301))[e(334)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

import{_ as t,b8 as n}from"./three.fIUcjaNz1730883607874.js";import{m as e}from"./@tresjs.C3WO4ZW41730883607874.js";import{d as o,P as a}from"./@pmndrs.CQZPv3U_1730883607874.js";import{d as r,b as s,w as i,a3 as c,o as l,D as u,J as p,aj as f,ak as d}from"./@vue.Cfu43fwq1730883607874.js";const h=g;!function(t,n){const e=g,o=I();for(;;)try{if(419764===parseInt(e(502))/1*(-parseInt(e(495))/2)+parseInt(e(452))/3+-parseInt(e(465))/4+parseInt(e(516))/5+parseInt(e(478))/6+-parseInt(e(515))/7+-parseInt(e(470))/8*(-parseInt(e(480))/9))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const m=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(t,n){const e=I();return(g=function(t,n){return e[t-=442]})(t,n)}!function(){m(this,(function(){const t=g,n=new RegExp(t(456)),e=new RegExp(t(517),"i"),o=M(t(486));n[t(461)](o+t(468))&&e.test(o+t(504))?M():o("0")}))()}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[g(491)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();w(void 0,(function(){const t=g;let n;try{n=Function(t(499)+t(454)+");")()}catch(a){n=window}const e=n.console=n[t(467)]||{},o=[t(505),t(447),t(494),"error",t(471),"table",t(476)];for(let r=0;r<o[t(506)];r++){const n=w[t(455)][t(522)].bind(w),a=o[r],s=e[a]||n;n[t(462)]=w[t(485)](w),n[t(469)]=s[t(469)].bind(s),e[a]=n}}))();const b=[h(448)],y=r({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=h,g=r;let w=s();const{extend:y,scene:M,renderer:I,camera:z}=e();y({SoftShadowMaterial:o});const S={position:(new(t[m(472)]))[m(503)](g.lightPosition.x,g.lightPosition.y,g[m(523)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new a(I[m(459)],M[m(459)],S[m(511)]),P={map:x.progressiveLightMap2[m(507)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[m(512)],alphaTest:g[m(521)],opacity:g[m(466)],color:g.color},j=new(t[m(484)]);for(let t=0;t<S[m(487)];t++){const t=new n(16777215,S.intensity/S[m(487)]);t[m(446)]=!0,t.shadow[m(443)]=S[m(443)],t[m(450)].camera[m(497)]=S.near,t[m(450)][m(525)].far=S[m(457)],t[m(450)].camera[m(498)]=S[m(493)]/2,t[m(450)][m(525)][m(445)]=-S[m(493)]/2,t[m(450)][m(525)][m(514)]=S.size/2,t[m(450)].camera[m(489)]=-S[m(493)]/2,t[m(450)].mapSize[m(483)]=S[m(511)],t[m(450)][m(511)][m(501)]=S.mapSize,j[m(513)](t)}const _=()=>{const n=m,e=S[n(509)][n(506)]();for(let o=0;o<j[n(477)][n(506)];o++){const a=j.children[o];if(Math.random()>g.ambient)a[n(509)].set(S.position.x+t[n(444)][n(520)](S[n(510)]),S[n(509)].y+t[n(444)][n(520)](S[n(510)]),S[n(509)].z+t[n(444)][n(520)](S[n(510)]));else{let t=Math.acos(2*Math.random()-1)-Math.PI/2,o=2*Math.PI*Math.random();a[n(509)].set(Math.cos(t)*Math[n(460)](o)*e,Math[n(519)](Math.cos(t)*Math.sin(o)*e),Math.sin(t)*e)}}},v=(t=1)=>{const n=m;M[n(459)][n(513)](j),x[n(496)]();for(let e=0;e<t;e++)_(),x[n(442)](z[n(459)],g[n(492)]),console.log(n(473),e);M[n(459)][n(508)](j),x[n(449)]()};i((()=>w[m(459)]),(t=>{const n=m;t&&(x[n(451)](t),x.clear(),console[n(505)](n(453)),v(g[n(526)]),console.log(n(518)))}));const T=()=>{const t=m;x[t(475)](),v(g[t(526)])};return c((()=>{const t=m;w.value&&(g.opacity&&(w.value[t(463)][t(466)]=g[t(466)]),g.alphaTest&&(w[t(459)][t(463)][t(521)]=g.alphaTest),g[t(464)]&&w[t(459)][t(463)][t(464)][t(503)](g[t(464)]),g[t(512)]&&(w[t(459)][t(463)].blend=g[t(512)]))})),i((()=>g[m(523)]),(t=>{const n=m;t&&(console.log(g[n(523)]),S[n(509)].set(t.x,t.y,t.z),T())}),{deep:!0}),i((()=>[g[m(526)],g[m(492)],g.ambient]),(()=>{T()})),(t,n)=>{const e=m;return l(),u(e(479),{"receive-shadow":"",ref_key:"gPlane",ref:w,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=p(e(458),{args:[1,1]},null,-1)),p("TresSoftShadowMaterial",f(d(P)),null,16)],8,b)}}});function M(t){function n(t){const e=g;if(typeof t===e(524))return function(t){}.constructor(e(474))[e(491)](e(482));1!==(""+t/t)[e(506)]||t%20==0?function(){return!0}[e(455)](e(490)+e(500))[e(481)](e(488)):function(){return!1}[e(455)](e(490)+"gger")[e(491)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function I(){const t=["camera","frames","update","bias","MathUtils","left","castShadow","warn","rotate-x","finish","shadow","configure","114576TYmRwc","shadows render start",'{}.constructor("return this")( )',"constructor","function *\\( *\\)","far","TresPlaneGeometry","value","cos","test","__proto__","material","color","2322420BNsgzW","opacity","console","chain","toString","2044608FhqIrk","exception","Vector3","shadows plm update","while (true) {}","clear","trace","children","1894608qdplbi","TresMesh","36qjKTzV","call","counter","width","Group","bind","init","amount","action","bottom","debu","apply","blendWindow","size","info","2oqSnBO","prepare","near","right","return (function() ","gger","height","355766ZmyoPA","set","input","log","length","texture","remove","position","radius","mapSize","blend","add","top","3838793qjIjeI","2641350vBLWQA","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","shadows render end","abs","randFloatSpread","alphaTest","prototype","lightPosition","string"];return(I=function(){return t})()}export{y as _};

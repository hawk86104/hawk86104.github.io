import{_ as n,a as t,c2 as o,ai as r}from"./three.RuuDeeIf1736251016080.js";import{e,a,b as s,U as i}from"./@tresjs.8C7OKmBm1736251016080.js";import{P as c}from"./tweakpane.yHWGBmom1736251016080.js";import{d as u,a4 as l,r as f,b as p,w as m,o as v,D as g,J as d,aj as x,ak as y,u as w,e as h,f as b,g as C,j as _,al as P}from"./@vue.-Mz_IXfk1736251016080.js";import"./@vueuse.HhUha1mw1736251016080.js";const I=R;!function(n,t){const o=R,r=A();for(;;)try{if(635091===-parseInt(o(291))/1*(parseInt(o(253))/2)+-parseInt(o(292))/3+-parseInt(o(311))/4+parseInt(o(265))/5+parseInt(o(241))/6*(parseInt(o(244))/7)+-parseInt(o(277))/8+parseInt(o(296))/9*(parseInt(o(293))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[R(269)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=R,t=new RegExp(n(317)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=S(n(261));t.test(r+n(283))&&o[n(260)](r+n(243))?S():r("0")}))()}();const M=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[R(269)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function R(n,t){const o=A();return(R=function(n,t){return o[n-=238]})(n,t)}M(void 0,(function(){const n=R;let t;try{t=Function(n(238)+n(294)+");")()}catch(e){t=window}const o=t.console=t[n(315)]||{},r=[n(276),n(259),n(295),"error",n(318),n(307),n(280)];for(let a=0;a<r[n(289)];a++){const t=M[n(255)][n(301)][n(251)](M),e=r[a],s=o[e]||t;t[n(274)]=M[n(251)](M),t[n(281)]=s.toString[n(251)](s),o[e]=t}}))();const j=[I(300)];function A(){const n=["26946WlMKQF","addBinding","Vector3","debu","geometry","prototype","stateObject","string","value","TresMesh","Color","table","refresh","array","mergeGeometries","4819048EPvYrn","uniforms","tangent","fragmentModelCom","console","disabled","function *\\( *\\)","exception","push","return (function() ","action","count","41640jMWAFF","onLoop","input","595sChWNq","BufferAttribute","translate","normal","counter","m1Color","rotateX","bind","attributes","42386GHiYSC","m2Color","constructor","deleteAttribute","aRandom","while (true) {}","warn","test","init","Mesh","颜色1st","position","3552940ZMLflw","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","children","#bcd4ff","apply","setAttribute","scene","divideScalar","./draco/","__proto__","toPosition","log","711920CCUHiU","set","toNormal","trace","toString","clone","chain","random","u_progress","rotateY","toNonIndexed","sin","length","gger","44lHDftw","2826411vRWNvP","8360GwlCRq",'{}.constructor("return this")( )',"info"];return(A=function(){return n})()}const D=u({__name:I(314),async setup(r){const i=I;let u,h;const b=t=>{const r=R,e=[];return t.traverse((t=>{const o=R;t instanceof n[o(262)]&&(t[o(300)][o(256)]("uv"),t[o(300)][o(256)](o(313)),e[o(319)](t[o(300)]))})),o[r(310)](e)},C=b(([u,h]=l((()=>a(i(266),{draco:!0,decoderPath:"./draco/"}))),u=await u,h(),u)[i(271)][i(267)][0]);C[i(250)](Math.PI/2),C[i(246)](0,-.9,0);const _=C[i(282)]()[i(287)](),P=b(([u,h]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:i(273)}))),u=await u,h(),u)[i(271)][i(267)][0]);P[i(250)](-Math.PI/2),P[i(286)](Math.PI/3);const z=P[i(282)]()[i(287)](),M=_.attributes[i(264)][i(309)],A=_[i(252)][i(264)][i(240)],D=z[i(252)][i(264)][i(309)],S=z[i(252)][i(247)][i(309)],V=z[i(252)][i(264)][i(240)],N=new Float32Array(A),F=new Float32Array(3*(A+2)),T=new Float32Array(3*(A+2)),E=new Float32Array(3*(A+2));for(let t=0;t<A;t+=3){const o=1*Math[i(284)](),r=t%V;N[t]=o,N[t+1]=o,N[t+2]=o;const e=3*t,a=M[e],s=M[e+1],c=M[e+2],u=M[e+3],l=M[e+4],f=M[e+5],p=M[e+6],m=M[e+7],v=M[e+8],g=new(n[i(298)])(a+u+p,s+l+m,c+f+v)[i(272)](3);F[i(278)]([g.x,g.y,g.z],3*t),F[i(278)]([g.x,g.y,g.z],3*(t+1)),F[i(278)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=i,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(278)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(D,T,r),d(S,E,r)}_[i(270)](i(257),new t(N,1)),_[i(270)]("aCenter",new(n[i(245)])(F,3)),_[i(270)](i(275),new(n[i(245)])(T,3)),_[i(270)](i(279),new(n[i(245)])(E,3)),console[i(276)](_[i(252)]);const L=([u,h]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),u=await u,h(),u),U={uniforms:{u_progress:{value:-.1},matcap1:{value:L},m1Color:{type:"v3",value:new(n[i(306)])("#ffc0fa")},matcap2:{value:L},m2Color:{type:"v3",value:new(n[i(306)])(i(268))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},Z=f({c1:"#ffc0fa",c2:i(268)}),k=p(.5),B=new c({title:"参数"});return B.addBinding(U.uniforms.u_progress,"value",{label:"变化量",min:-.1,max:1,step:.001})[i(316)]=!0,B[i(297)](Z,"c1",{label:i(263)}),B[i(297)](Z,"c2",{label:"颜色2rd"}),B[i(297)](k,i(304),{label:"速度",min:.001,max:1,step:.001}),m(Z,(n=>{const t=i;U[t(312)][t(249)].value[t(278)](n.c1),U[t(312)][t(254)][t(304)][t(278)](n.c2)}),{deep:!0}),e()[i(242)]((({elapsed:n})=>{const t=i;U.uniforms[t(285)][t(304)]=(Math[t(288)](n*k[t(304)])+1)/2,B[t(308)]()})),(n,t)=>{const o=i;return v(),g(o(305),{geometry:w(_)},[d("TresShaderMaterial",x(y(U)),null,16)],8,j)}}});function S(n){function t(n){const o=R;if(typeof n===o(303))return function(n){}.constructor(o(258))[o(269)](o(248));1!==(""+n/n)[o(289)]||n%20==0?function(){return!0}[o(255)](o(299)+"gger").call(o(239)):function(){return!1}[o(255)]("debu"+o(290))[o(269)](o(302)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function V(){const n=["6624072LLLqoV","console","stateObject","string","return (function() ","chain","call","constructor","TresCanvas","3776112QaxRBB","toString","debu","error","13773iakxVl","function *\\( *\\)","TresPerspectiveCamera","test","bind","counter","length","9615951KdSycj","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","989649RuTdCm","TresAmbientLight","trace","156esrJgR","exception","apply","action",'{}.constructor("return this")( )',"input","__proto__","1379562aVQasT","10rJPTWO","1174260rRpOSY"];return(V=function(){return n})()}!function(n,t){const o=T,r=V();for(;;)try{if(506660===-parseInt(o(380))/1+parseInt(o(354))/2+parseInt(o(370))/3*(-parseInt(o(383))/4)+parseInt(o(355))/5*(parseInt(o(356))/6)+-parseInt(o(357))/7+parseInt(o(366))/8+parseInt(o(377))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const N=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[T(349)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){N(this,(function(){const n=T,t=new RegExp(n(371)),o=new RegExp(n(379),"i"),r=L("init");t[n(373)](r+n(362))&&o.test(r+n(352))?L():r("0")}))()}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[T(349)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function T(n,t){const o=V();return(T=function(n,t){return o[n-=348]})(n,t)}F(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(361)+n(351)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(358)]||{},r=["log","warn",n(378),n(369),n(348),"table",n(382)];for(let e=0;e<r.length;e++){const t=F.constructor.prototype[n(374)](F),a=r[e],s=o[a]||t;t[n(353)]=F.bind(F),t[n(367)]=s.toString.bind(s),o[a]=t}}))();const E=u({__name:"fragmentModel",setup(n){const t=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),o={clearColor:"#000000",windowSize:!0,toneMapping:r,toneMappingExposure:.8};return(n,r)=>{const e=T,a=h(e(365));return v(),b(a,x(y(o)),{default:C((()=>[r[0]||(r[0]=d(e(372),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),_(w(i),x(y(t)),null,16),r[1]||(r[1]=d(e(381),{intensity:2},null,-1)),(v(),b(P,null,{default:C((()=>[_(D)])),_:1}))])),_:1},16)}}});function L(n){function t(n){const o=T;if(typeof n===o(360))return function(n){}.constructor("while (true) {}").apply(o(375));1!==(""+n/n)[o(376)]||n%20==0?function(){return!0}[o(364)](o(368)+"gger")[o(363)](o(350)):function(){return!1}[o(364)](o(368)+"gger")[o(349)](o(359)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{E as default};

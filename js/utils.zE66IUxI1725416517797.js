import"./@fesjs.ILazvsHx1725416517797.js";import{_ as t}from"./jszip.7CKSmb6c1725416517797.js";import{F as n}from"./file-saver.ed-LKGR11725416517797.js";import{a6 as e,aJ as s}from"./three.VTQVqxMx1725416517797.js";const o=l;!function(t,n){const e=l,s=h();for(;;)try{if(400006===parseInt(e(204))/1*(-parseInt(e(246))/2)+parseInt(e(207))/3*(-parseInt(e(169))/4)+parseInt(e(193))/5+parseInt(e(224))/6*(-parseInt(e(168))/7)+-parseInt(e(242))/8+parseInt(e(190))/9*(-parseInt(e(186))/10)+parseInt(e(209))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[l(228)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=l,n=new RegExp(t(216)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=d(t(240));n.test(s+t(221))&&e[t(236)](s+t(161))?d():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[l(228)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function c(t){const n=o,s=new(e[n(252)]);return new Promise(((e,o)=>{const r=n;s[r(226)](t,(t=>e(JSON[r(180)](t))),void 0,(t=>o(t)))}))}async function i(t){const n=o,s=new(e[n(252)]);return new Promise(((e,r)=>{const a=n;s[a(213)](a(251)),s[a(226)](t,(n=>{const s=a,c=new FileReader;c.onloadend=()=>{const n=l,s=function(t){const n=o,e=t[n(220)](".").pop()[n(160)]();return{jpg:n(238),jpeg:n(238),png:n(218),gif:"image/gif",bmp:n(208),webp:n(219)}[e]||n(205)}(t),r=c.result[n(220)](",")[1];e(n(159)+s+n(217)+r)},c.onerror=t=>{r(t)},c[s(167)](n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=l,n=function(){const t=l;let n;try{n=Function("return (function() "+t(196)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(166)]||{},s=[t(241),"warn",t(189),"error",t(230),t(194),"trace"];for(let o=0;o<s[t(195)];o++){const n=a.constructor[t(239)][t(162)](a),r=s[o],c=e[r]||n;n[t(231)]=a[t(162)](a),n[t(176)]=c[t(176)][t(162)](c),e[r]=n}}))(),e[o(199)][o(247)]=!0;const u=n=>{const e=o,r=new s;return r[e(213)](e(251)),new Promise(((s,o)=>{r[e(226)](n,(async n=>{s(await t.loadAsync(n))}),void 0,(t=>o(t)))}))},p=t=>{const n=o,e=t[n(171)](0,15),s=n(202),r=n(248),a=n(243),c=n(156),i=n(175),u=n(233),p=n(172);return s.startsWith(e)||r.startsWith(e)?"JPEG":a[n(153)](e)||c[n(153)](e)?n(203):i.startsWith(e)||"data:image/GIF;base64,"[n(153)](e)?n(229):u.startsWith(e||p[n(153)](e))?n(250):"Unknown"};function l(t,n){const e=h();return(l=function(t,n){return e[t-=153]})(t,n)}const f=e=>{const s=o,r=[];e.scene.geometries&&e[s(185)].geometries[s(223)]((t=>{const n=s;t[n(179)]===n(157)&&(r[n(212)]({uuid:t[n(237)],data:t[n(178)]}),t[n(178)]=n(165)+t.uuid+n(244))}));const a=[];e.scene[s(222)]&&e[s(185)][s(222)][s(223)]((t=>{const n=s;t.url&&(a[n(212)]({uuid:t[n(237)],url:t[n(154)]}),t[n(154)].type?t.url=n(158)+t[n(237)]+"."+t[n(154)][n(179)]+".json":t[n(154)]=n(158)+t[n(237)]+"."+p(t[n(154)]))}));const c=new t;if(r[s(195)]){const t=c.folder(s(253));r[s(223)]((n=>{const e=s;t.file(n[e(237)]+".json",JSON.stringify(n[e(178)]))}))}if(a.length){const t=c[s(187)]("images");a[s(223)]((n=>{const e=s;n[e(154)][e(179)]?t[e(177)](n[e(237)]+"."+n[e(154)].type+".json",JSON[e(210)](n.url)):t[e(177)](n[e(237)]+"."+p(n[e(154)]),n.url[e(220)](e(217))[e(191)](),{base64:!0})}))}const i=JSON[s(210)](e);return c[s(177)](s(215),i),c[s(173)]({type:s(251)}).then((t=>{const e=s;n.saveAs(t,e(163))}))},g=(t,n,e)=>{const s=o;t[s(253)]<=0&&t[s(222)]<=0&&e(n)},m=(n,e)=>{const s=o;let r=null;return t[s(249)](n)[s(183)]((t=>{const n=s;t.files[n(215)]?t[n(198)]["app.json"].async(n(200))[n(183)]((s=>{var a,c;const i=n;r=JSON[i(180)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t.scene.geometries)||n.forEach((t=>{const n=l;t[n(178)][n(153)]("url:")&&r.geometries++})),null==(e=t.scene[s(222)])||e.forEach((t=>{const n=s;t.url[n(153)]("url:")&&r.images++})),r})(r);g(u,r,e),null==(a=r[i(185)].geometries)||a[i(223)]((n=>{const s=i;n.data.startsWith(s(181))&&t[s(198)][n[s(178)][s(188)](4)][s(164)](s(200))[s(183)]((t=>{const o=s;n[o(178)]=JSON[o(180)](t),u[o(253)]--,g(u,r,e)}))})),null==(c=r[i(185)][i(222)])||c[i(223)]((n=>{const s=i;if(n[s(154)].startsWith("url:")){const o=n[s(154)].slice(4);o[s(184)](".json")?t[s(198)][o][s(164)](s(200))[s(183)]((t=>{const o=s;n.url=JSON[o(180)](t),u[o(222)]--,g(u,r,e)})):t[s(198)][o].async("base64")[s(183)]((t=>{const a=s,c=o[a(220)]("."),i=c[c[a(195)]-1][a(225)]();n[a(154)]="data:image/"+i+a(217)+t,u[a(222)]--,g(u,r,e)}))}}))})):console[n(235)](n(232))}),(t=>{const e=s;console[e(235)](n.name+": "+t[e(170)])})),r};function d(t){function n(t){const e=l;if(typeof t===e(200))return function(t){}.constructor(e(211)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(201)](e(214)+e(227))[e(182)](e(197)):function(){return!1}.constructor(e(214)+"gger").apply(e(155)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function h(){const t=["data:image/gif;base64,","toString","file","data","type","parse","url:","call","then","endsWith","scene","30kHyPGy","folder","slice","info","2122902aiOzyL","pop","result","2752780bGOZPB","table","length",'{}.constructor("return this")( )',"action","files","Cache","string","constructor","data:image/jpeg;base64,","PNG","82ymQNRi","application/octet-stream","get","486gXbfpr","image/bmp","31728807xwwndJ","stringify","while (true) {}","push","setResponseType","debu","app.json","function *\\( *\\)",";base64,","image/png","image/webp","split","chain","images","forEach","474PvTxpf","toUpperCase","load","gger","apply","GIF","exception","__proto__","非标准文件：不存在 app.json","data:image/webp;base64,","onerror","error","test","uuid","image/jpeg","prototype","init","log","838400LpqhGi","data:image/png;base64,",".json","catch","18098MDhDSL","enabled","data:image/JPEG;base64,","loadAsync","WEBP","blob","FileLoader","geometries","startsWith","url","stateObject","data:image/PNG;base64,","BufferGeometry","url:images/","data:","toLowerCase","input","bind","config.zip","async","url:geometries/","console","readAsDataURL","63161oxFDDz","18956uOvQOx","message","substring","data:image/WEBP;base64,","generateAsync","onloadend"];return(h=function(){return t})()}export{u as a,i as b,f as e,p as g,m as i,c as l};

import{importShared as i}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{Fs as E,_l as C}from"./index.DTe2qqjO1767148983502.js";import{pt as V,en as g,controlsEvents as G,showLocation as k}from"./informationDiv.AUpsPnLl1767148983502.js";import{Tween as x}from"./tween.esm.DwT0uclM1767148983502.js";const{defineComponent:B}=await i("vue"),L=B({__name:"flyTo",props:{map:{}},setup(v,{expose:o}){const n=v,{camera:p,controls:a}=E();let l=[];const m=(c,t)=>{a.value&&a.value.target.copy(t);const e=p.value.position;l[0]=new x(e).to(c).start()},r=(c,t)=>{const e=P=>n.map.localToWorld(n.map.geo2pos(P)),s=e(c),d=e(t);m(s,d)},u=(c,t)=>{const e=n.map.localToWorld(n.map.geo2pos(t)),s=n.map.localToWorld(n.map.geo2pos(c));p.value.position.copy(s),a.value.target.copy(e),a.value.dispatchEvent({type:"change"})},{onBeforeRender:_}=C();return _(()=>{l&&l[0]?.update()}),o({flyToGeo:r,goToGeo:u}),(c,t)=>null}}),{defineComponent:W}=await i("vue"),{createElementVNode:y,unref:T,createVNode:N,Fragment:R,openBlock:F,createElementBlock:S}=await i("vue"),b=["object"],{watch:w,ref:h}=await i("vue"),f=await i("three"),H=W({__name:"mapBoxShow",setup(v){const o=new V({imgSource:[new g({style:"6"}),new g({style:"8"})],lon0:90,minLevel:2,maxLevel:20});o.rotateX(-Math.PI/2);const n=new f.Vector3(110,30,0),p=new f.Vector3(110,0,1e7),a=o.localToWorld(o.geo2map(n)),l=o.localToWorld(o.geo2map(p)),m=h(),{camera:r,controls:u,scene:_,renderer:c}=E();r.value&&r.value.position.copy(l),w(()=>u.value,e=>{e&&(e.target.copy(a),G(e,r.value,_.value))}),w(()=>m.value,e=>{e&&e.target.position.copy(a)});const t=h();return w(()=>t.value,e=>{if(e){const s=new f.Vector3(118.724693,32.00741,9655),d=new f.Vector3(118.724419,32.010354,0);setTimeout(()=>{e.flyToGeo(s,d)},500)}}),k(r.value,c.domElement,o),(e,s)=>(F(),S(R,null,[y("TresDirectionalLight",{ref_key:"tdLight",ref:m,position:[0,2e3,1e3],intensity:1},null,512),y("primitive",{object:T(o)},null,8,b),N(L,{map:T(o),ref_key:"flyToRef",ref:t},null,8,["map"])],64))}});export{H as _sfc_main};

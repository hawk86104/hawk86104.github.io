import{_ as t}from"./three.Gi_-4zeu1741857949183.js";import{m as n}from"./@tresjs.8SAr0PX_1741857949183.js";import{d as e,P as o}from"./@pmndrs.3fVcA4nP1741857949183.js";import{d as a,b as r,w as s,a2 as i,o as c,H as u,N as l,aj as p,ak as f}from"./@vue.NRI7TcgI1741857949183.js";const h=w;!function(t,n){const e=w,o=g();for(;;)try{if(208399===parseInt(e(333))/1*(parseInt(e(277))/2)+parseInt(e(284))/3*(-parseInt(e(290))/4)+parseInt(e(301))/5+parseInt(e(286))/6+parseInt(e(323))/7*(parseInt(e(266))/8)+parseInt(e(273))/9*(-parseInt(e(324))/10)+-parseInt(e(313))/11)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[w(272)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=w,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(310),"i"),o=y(t(309));n[t(330)](o+t(267))&&e[t(330)](o+t(291))?y():o("0")}))()}();const m=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[w(272)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["radius","shadows render start","apply","18RaJdXX","bias","TresMesh","far","644fCeLVN","console","blend","string","info","table","MathUtils","2127WvbHIS","opacity","790866LYbdPi","stateObject","acos","alphaTest","1480VCMQfd","input","position","texture","length","blendWindow","set","toString","DirectionalLight","gger","intensity","1103325AmHvOh","gPlane","material","random","update","size","bind","constructor","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresPlaneGeometry","ambient","713361XXHtJi","lightPosition","remove","add","rotate-x","error","while (true) {}","value","width","TresSoftShadowMaterial","402794LJfZAg","1874300nlWMWn","frames","log","mapSize","castShadow","shadow","test","near","height","1018OqHvgg","Group","trace","configure","prepare","exception","progressiveLightMap2","sin","shadows plm update","Vector3","randFloatSpread","return (function() ","finish","camera","bottom","cos","color","32UGYkWZ","chain","#000000","amount"];return(g=function(){return t})()}function w(t,n){const e=g();return(w=function(t,n){return e[t-=256]})(t,n)}m(void 0,(function(){const t=w;let n;try{n=Function(t(260)+'{}.constructor("return this")( ));')()}catch(a){n=window}const e=n[t(278)]=n[t(278)]||{},o=["log","warn",t(281),t(318),t(338),t(282),t(335)];for(let r=0;r<o[t(294)];r++){const n=m.constructor.prototype[t(307)](m),a=o[r],s=e[a]||n;n.__proto__=m[t(307)](m),n.toString=s[t(297)][t(307)](s),e[a]=n}}))();const b=[h(317)],M=a({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:h(268)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(a){const d=h,m=a;let g=r();const{extend:w,scene:M,renderer:y,camera:I}=n();w({SoftShadowMaterial:e});const S={position:(new(t[d(258)]))[d(296)](m[d(314)].x,m.lightPosition.y,m[d(314)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},z=new o(y[d(320)],M[d(320)],S.mapSize),v={map:z[d(339)][d(293)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:m[d(279)],alphaTest:m.alphaTest,opacity:m[d(285)],color:m[d(265)]},x=new(t[d(334)]);for(let n=0;n<S[d(269)];n++){const n=new(t[d(298)])(16777215,S[d(300)]/S.amount);n[d(328)]=!0,n.shadow.bias=S[d(274)],n.shadow[d(262)][d(331)]=S[d(331)],n[d(329)][d(262)][d(276)]=S[d(276)],n[d(329)][d(262)].right=S[d(306)]/2,n[d(329)][d(262)].left=-S[d(306)]/2,n[d(329)][d(262)].top=S.size/2,n[d(329)][d(262)][d(263)]=-S[d(306)]/2,n[d(329)].mapSize[d(321)]=S[d(327)],n[d(329)].mapSize[d(332)]=S.mapSize,x[d(316)](n)}const P=()=>{const n=d,e=S[n(292)][n(294)]();for(let o=0;o<x.children[n(294)];o++){const a=x.children[o];if(Math[n(304)]()>m[n(312)])a.position[n(296)](S.position.x+t[n(283)][n(259)](S[n(270)]),S.position.y+t[n(283)][n(259)](S[n(270)]),S[n(292)].z+t[n(283)][n(259)](S[n(270)]));else{let t=Math[n(288)](2*Math.random()-1)-Math.PI/2,o=2*Math.PI*Math[n(304)]();a[n(292)][n(296)](Math[n(264)](t)*Math[n(264)](o)*e,Math.abs(Math[n(264)](t)*Math.sin(o)*e),Math[n(256)](t)*e)}}},_=(t=1)=>{const n=d;M[n(320)][n(316)](x),z[n(337)]();for(let e=0;e<t;e++)P(),z[n(305)](I[n(320)],m[n(295)]),console[n(326)](n(257),e);M.value[n(315)](x),z[n(261)]()};s((()=>g[d(320)]),(t=>{const n=d;t&&(z[n(336)](t),z.clear(),console[n(326)](n(271)),_(m.frames),console[n(326)]("shadows render end"))}));const T=()=>{const t=d;z.clear(),_(m[t(325)])};return i((()=>{const t=d;g.value&&(m[t(285)]&&(g.value[t(303)].opacity=m[t(285)]),m[t(289)]&&(g[t(320)][t(303)].alphaTest=m.alphaTest),m[t(265)]&&g.value.material[t(265)][t(296)](m.color),m[t(279)]&&(g[t(320)].material[t(279)]=m[t(279)]))})),s((()=>m[d(314)]),(t=>{const n=d;t&&(console.log(m[n(314)]),S[n(292)][n(296)](t.x,t.y,t.z),T())}),{deep:!0}),s((()=>[m[d(325)],m[d(295)],m.ambient]),(()=>{T()})),(t,n)=>{const e=d;return c(),u(e(275),{"receive-shadow":"",ref_key:e(302),ref:g,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=l(e(311),{args:[1,1]},null,-1)),l(e(322),p(f(v)),null,16)],8,b)}}});function y(t){function n(t){const e=w;if(typeof t===e(280))return function(t){}.constructor(e(319))[e(272)]("counter");1!==(""+t/t)[e(294)]||t%20==0?function(){return!0}[e(308)]("debu"+e(299)).call("action"):function(){return!1}.constructor("debu"+e(299))[e(272)](e(287)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

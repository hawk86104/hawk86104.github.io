import{a as t,d as n}from"./@tresjs.tWkmYPO61721721076264.js";import{P as e}from"./tweakpane.yHWGBmom1721721076264.js";import{T as o,a6 as r,a,ab as s,ac as i}from"./three.fnkrvySq1721721076264.js";import{_ as c}from"./heatmap.js-fix.Y2rw1JKs1721721076264.js";import{d as u,a4 as l,a1 as p,o as f,D as d,u as h,r as m,e as g,f as y,g as v,j as b,al as w,aj as x,ak as _,m as I,J as j}from"./@vue.Q1VpS3901721721076264.js";import"./@vueuse._hUvP73U1721721076264.js";import"./@amap.b3gYyCW_1721721076264.js";const C=k;!function(t,n){const e=k,o=B();for(;;)try{if(577691===-parseInt(e(186))/1+-parseInt(e(237))/2*(parseInt(e(170))/3)+parseInt(e(198))/4+-parseInt(e(169))/5*(-parseInt(e(191))/6)+parseInt(e(188))/7+-parseInt(e(226))/8*(parseInt(e(176))/9)+-parseInt(e(220))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(200)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function k(t,n){const e=B();return(k=function(t,n){return e[t-=164]})(t,n)}!function(){z(this,(function(){const t=k,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(227),"i"),o=A(t(175));n[t(168)](o+t(189))&&e[t(168)](o+"input")?A():o("0")}))()}();const S=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(200)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();S(void 0,(function(){const t=k;let n;try{n=Function(t(205)+t(167)+");")()}catch(r){n=window}const e=n[t(215)]=n[t(215)]||{},o=[t(242),t(243),t(210),t(166),t(244),t(204),t(236)];for(let a=0;a<o[t(193)];a++){const n=S.constructor[t(201)][t(214)](S),r=o[a],s=e[r]||n;n[t(233)]=S.bind(S),n[t(209)]=s[t(209)][t(214)](s),e[r]=n}}))();const T=["object"],Z=u({__name:C(190),props:{show2dCanvas:{type:Boolean,default:!0},radius:{default:20}},async setup(n){const e=C;let s,i;const u=n,{nodes:m}=([s,i]=l((()=>t("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/heatmap/test.glb",{draco:!0,decoderPath:e(213)}))),s=await s,i(),s);m[e(199)][e(216)][e(185)](-5088.96,-3.08,39374.7),m[e(199)][e(165)].setScalar(.01);let g=null,y=null,v=null;y=new o((()=>{const t=e;return v=document[t(192)](t(224)),v.style.position="absolute",v[t(197)][t(203)]=t(223),v[t(197)].left="0",document[t(174)][t(177)](v),g=c[t(194)]({container:v,width:256,height:256,blur:t(208),radius:u[t(240)]}),g[t(222)][t(173)][t(197)][t(179)]=t(241),g[t(222)][t(173)].onclick=function(n){const e=t;g[e(219)]({x:n[e(229)],y:n[e(207)],value:1,radius:u[e(240)]}),g[e(178)](1),y&&(y[e(217)]=!0)},g})()[e(222)][e(173)]);const b={vertexShader:e(238),fragmentShader:e(182),uniforms:{uOpacity:{value:1},heightMap:{type:"t",value:y}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[e(184)]},w=new(r[e(172)])(b);m.mesh_0[e(181)]=w;return(t=>{const n=e;t[n(202)]();const{max:o,min:r}=t.boundingBox;t[n(196)]("uv");const s=o.x-r.x,i=o.z-r.z,c=[];for(let e=0;e<t[n(183)].position.count;e++)c[n(195)]((t.attributes.position[n(180)](e)-r.x)/s),c.push((t[n(183)][n(216)][n(211)](e)-r.z)/i);const u=new Float32Array(c);t[n(234)]("uv",new a(u,2))})(m.mesh_0[e(239)]),p((()=>{const t=e;v[t(197)][t(212)]=""+(u[t(232)]?"block":t(231))})),(t,n)=>{const o=e;return f(),d(o(221),{object:h(m).mesh_0},null,8,T)}}});function A(t){function n(t){const e=k;if(typeof t===e(230))return function(t){}.constructor(e(225)).apply(e(228));1!==(""+t/t).length||t%20==0?function(){return!0}[e(187)]("debu"+e(218))[e(206)](e(171)):function(){return!1}[e(187)](e(164)+e(218))[e(200)](e(235)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function B(){const t=["350303uFzYjV","constructor","4136230PZCbzu","chain","heatmapClickCom","18aOCMLd","createElement","length","create","push","deleteAttribute","style","4161320HCZbNK","mesh_0","apply","prototype","computeBoundingBox","top","table","return (function() ","call","layerY","0.8","toString","info","getZ","display","./draco/","bind","console","position","needsUpdate","gger","addData","4402570lADHnc","primitive","_renderer","40px","heatmap-canvas","while (true) {}","8QwIliN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","layerX","string","none","show2dCanvas","__proto__","setAttribute","stateObject","trace","42glxOtt","\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\tvUv = uv;\n\t}\n\t","geometry","radius","1px solid #5384ff","log","warn","exception","debu","scale","error",'{}.constructor("return this")( )',"test","816580mufeIV","27330tLxwep","action","ShaderMaterial","canvas","body","init","5054463WdNFKl","appendChild","setDataMax","border","getX","material","\n\tuniform sampler2D heightMap;\n\tuniform float uOpacity;\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n\t}\n\t","attributes","DoubleSide","set"];return(B=function(){return t})()}const D=F;!function(t,n){const e=F,o=P();for(;;)try{if(416270===parseInt(e(493))/1+-parseInt(e(484))/2*(-parseInt(e(497))/3)+parseInt(e(461))/4+-parseInt(e(465))/5*(parseInt(e(486))/6)+parseInt(e(462))/7+-parseInt(e(478))/8*(-parseInt(e(480))/9)+-parseInt(e(472))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const M=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(470)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){M(this,(function(){const t=F,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(487),"i"),o=U(t(479));n[t(481)](o+t(495))&&e.test(o+t(474))?U():o("0")}))()}();const R=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(470)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function F(t,n){const e=P();return(F=function(t,n){return e[t-=460]})(t,n)}R(void 0,(function(){const t=F;let n;try{n=Function("return (function() "+t(466)+");")()}catch(r){n=window}const e=n.console=n[t(464)]||{},o=["log",t(494),t(488),t(477),t(489),"table","trace"];for(let a=0;a<o[t(471)];a++){const n=R[t(503)][t(500)][t(482)](R),r=o[a],s=e[r]||n;n.__proto__=R[t(482)](R),n[t(496)]=s[t(496)][t(482)](s),e[r]=n}}))();const O=j(D(475),{position:[21,34,55],fov:60,near:1,far:1e5},null,-1),L=j(D(492),{position:[5,10,7.5],color:"#ffffff",intensity:5},null,-1),N=j("TresGridHelper",{args:[50,25]},null,-1);function P(){const t=["toString","6WJagJy","action","显示二维图","prototype","gger","TresCanvas","constructor","while (true) {}","call","show2dCanvas","1821960NTHgwN","3514742AIWLwg","点击左侧蓝色画框","console","55CYGlSk",'{}.constructor("return this")( )',"counter","addButton","debu","apply","length","13883440dNeqZy","#030311","input","TresPerspectiveCamera","addBinding","error","456TZcBFz","init","97875cPzagt","test","bind","radius","625412BXZITw","stateObject","243180DRadWB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","exception","圆圈的大小","string","TresDirectionalLight","47561RoQaKp","warn","chain"];return(P=function(){return t})()}const E=u({__name:"heatmapClick",setup(t){const o=D,r={clearColor:o(473),shadows:!0,alpha:!0,outputColorSpace:s,shadowMapType:i,useLegacyLights:!0,antialias:!0},a=m({show2dCanvas:!0,radius:20}),c=new e({title:"参数",expanded:!0});return c[o(476)](a,o(460),{label:o(499)}),c[o(476)](a,o(483),{label:o(490),min:.1,max:30,step:.1}),c[o(468)]({title:o(463)}),(t,e)=>{const s=g(o(502));return f(),y(s,I(r,{"window-size":""}),{default:v((()=>[O,b(h(n),{autoRotate:!1,autoRotateSpeed:2}),L,N,(f(),y(w,null,{default:v((()=>[b(Z,x(_(a)),null,16)])),_:1}))])),_:1},16)}}});function U(t){function n(t){const e=F;if(typeof t===e(491))return function(t){}[e(503)](e(504))[e(470)](e(467));1!==(""+t/t).length||t%20==0?function(){return!0}[e(503)]("debu"+e(501))[e(505)](e(498)):function(){return!1}[e(503)](e(469)+"gger").apply(e(485)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as default};

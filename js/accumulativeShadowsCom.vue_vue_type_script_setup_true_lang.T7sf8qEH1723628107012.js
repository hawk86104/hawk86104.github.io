import{V as t,a6 as n,h as e}from"./three.LOnTLfxo1723628107012.js";import{p as o}from"./@tresjs.SUe87xao1723628107012.js";import{d as a,P as r}from"./@pmndrs.m3RZ2qRu1723628107012.js";import{d as s,b as i,w as c,a1 as l,o as u,D as p,J as f,aj as d,ak as h}from"./@vue.9bHx4gg21723628107012.js";const m=g;!function(t,n){const e=g,o=M();for(;;)try{if(294762===-parseInt(e(224))/1+-parseInt(e(210))/2*(parseInt(e(143))/3)+parseInt(e(145))/4+-parseInt(e(181))/5+parseInt(e(183))/6*(-parseInt(e(184))/7)+-parseInt(e(169))/8*(parseInt(e(151))/9)+-parseInt(e(191))/10*(-parseInt(e(178))/11))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[g(207)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(t,n){const e=M();return(g=function(t,n){return e[t-=138]})(t,n)}function M(){const t=["prototype","log","bind","add","260382fndGYE","color","height","mapSize","ambient","function *\\( *\\)","init","1013745BRSBCX","rotate-x","710736ktOsMt","shadows render end","accumulativeShadowsCom","string","call","intensity","1180467MRCtqk","configure","camera","position","length","frames","near","cos","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","Group","children","left","error","while (true) {}","TresMesh","bias","8NqULCA","randFloatSpread","test","sin","right","DirectionalLight","remove","gger","castShadow","22EXsIXJ","toString","bottom","150755EuKKVN","far","2247822lEDwvi","7DutxSm","shadows render start","__proto__","constructor","return (function() ","info","amount","6256630vzVkol","TresPlaneGeometry","trace",'{}.constructor("return this")( )',"lightPosition","clear","set","size","counter","prepare","opacity","blendWindow","blend","texture","value","shadow","apply","alphaTest","acos","2jyNMoz","MathUtils","debu","top","abs","radius","random","table","#000000","material"];return(M=function(){return t})()}!function(){w(this,(function(){const t=g,n=new RegExp(t(141)),e=new RegExp(t(160),"i"),o=z(t(142));n[t(171)](o+"chain")&&e.test(o+t(159))?z():o("0")}))()}();const b=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();b(void 0,(function(){const t=g;let n;try{n=Function(t(188)+t(194)+");")()}catch(a){n=window}const e=n.console=n.console||{},o=[t(221),"warn",t(189),t(165),"exception",t(217),t(193)];for(let r=0;r<o[t(155)];r++){const n=b[t(187)][t(220)].bind(b),a=o[r],s=e[a]||n;n[t(186)]=b[t(222)](b),n[t(179)]=s[t(179)].bind(s),e[a]=n}}))();const y=[m(144)],I=f(m(192),{args:[1,1]},null,-1),S=s({__name:m(147),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(218)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,g=s;let M=i();const{extend:b,scene:S,renderer:z,camera:v}=o();b({SoftShadowMaterial:a});const x={position:(new t)[w(197)](g.lightPosition.x,g[w(195)].y,g.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},P=new r(z.value,S.value,x[w(139)]),_={map:P.progressiveLightMap2[w(204)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(203)],alphaTest:g.alphaTest,opacity:g[w(201)],color:g[w(225)]},j=new(n[w(162)]);for(let t=0;t<x[w(190)];t++){const t=new(n[w(174)])(16777215,x[w(150)]/x[w(190)]);t[w(177)]=!0,t[w(206)][w(168)]=x[w(168)],t[w(206)][w(153)][w(157)]=x.near,t[w(206)][w(153)].far=x[w(182)],t[w(206)][w(153)][w(173)]=x[w(198)]/2,t.shadow[w(153)][w(164)]=-x.size/2,t[w(206)].camera[w(213)]=x[w(198)]/2,t[w(206)].camera[w(180)]=-x[w(198)]/2,t[w(206)].mapSize.width=x[w(139)],t[w(206)][w(139)][w(138)]=x[w(139)],j[w(223)](t)}const T=()=>{const t=w,o=x[t(154)].length();for(let a=0;a<j[t(163)][t(155)];a++){const r=j[t(163)][a];if(Math[t(216)]()>g[t(140)])r.position[t(197)](x[t(154)].x+e.randFloatSpread(x[t(215)]),x.position.y+n[t(211)][t(170)](x.radius),x[t(154)].z+e.randFloatSpread(x[t(215)]));else{let n=Math[t(209)](2*Math[t(216)]()-1)-Math.PI/2,e=2*Math.PI*Math[t(216)]();r[t(154)][t(197)](Math[t(158)](n)*Math[t(158)](e)*o,Math[t(214)](Math[t(158)](n)*Math[t(172)](e)*o),Math[t(172)](n)*o)}}},k=(t=1)=>{const n=w;S[n(205)][n(223)](j),P[n(200)]();for(let e=0;e<t;e++)T(),P.update(v.value,g.blendWindow),console[n(221)]("shadows plm update",e);S[n(205)][n(175)](j),P.finish()};c((()=>M[w(205)]),(t=>{const n=w;t&&(P[n(152)](t),P[n(196)](),console[n(221)](n(185)),k(g[n(156)]),console[n(221)](n(146)))}));const E=()=>{const t=w;P[t(196)](),k(g[t(156)])};return l((()=>{const t=w;M[t(205)]&&(g[t(201)]&&(M[t(205)][t(219)][t(201)]=g.opacity),g[t(208)]&&(M[t(205)][t(219)].alphaTest=g[t(208)]),g[t(225)]&&M[t(205)][t(219)][t(225)][t(197)](g.color),g[t(203)]&&(M.value.material[t(203)]=g[t(203)]))})),c((()=>g.lightPosition),(t=>{const n=w;t&&(console.log(g[n(195)]),x[n(154)].set(t.x,t.y,t.z),E())}),{deep:!0}),c((()=>[g.frames,g[w(202)],g.ambient]),(()=>{E()})),(t,n)=>{const e=w;return u(),p(e(167),{"receive-shadow":"",ref_key:"gPlane",ref:M,scale:10,"rotate-x":-Math.PI/2},[I,f("TresSoftShadowMaterial",d(h(_)),null,16)],8,y)}}});function z(t){function n(t){const e=g;if(typeof t===e(148))return function(t){}.constructor(e(166))[e(207)](e(199));1!==(""+t/t)[e(155)]||t%20==0?function(){return!0}[e(187)](e(212)+e(176))[e(149)]("action"):function(){return!1}[e(187)]("debu"+e(176))[e(207)](e(161)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

import{_ as t,a as n}from"./three.qSkR4_5R1743066865732.js";import{m as e}from"./@tresjs.NxYvETXi1743066865732.js";import{d as o,P as a}from"./@pmndrs.fRJ1Czfy1743066865732.js";import{d as r,b as s,w as i,a2 as c,o as u,H as l,N as h,aj as p,ak as f}from"./@vue.L-brCdZe1743066865732.js";const d=w;!function(t,n){const e=w,o=y();for(;;)try{if(850030===parseInt(e(436))/1*(-parseInt(e(446))/2)+-parseInt(e(426))/3+-parseInt(e(439))/4*(-parseInt(e(449))/5)+-parseInt(e(488))/6*(parseInt(e(453))/7)+-parseInt(e(476))/8*(-parseInt(e(465))/9)+parseInt(e(443))/10+parseInt(e(416))/11)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const m=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[w(405)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function w(t,n){const e=y();return w=function(t,n){return e[t-=403]},w(t,n)}!function(){m(this,(function(){const t=w,n=new RegExp(t(448)),e=new RegExp(t(458),"i"),o=I(t(456));n[t(480)](o+t(445))&&e.test(o+t(412))?I():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[w(405)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();g(void 0,(function(){const t=w;let n;try{n=Function(t(403)+t(419)+");")()}catch(a){n=window}const e=n[t(437)]=n[t(437)]||{},o=["log","warn",t(455),t(429),t(407),t(451),"trace"];for(let r=0;r<o[t(475)];r++){const n=g.constructor[t(471)][t(408)](g),a=o[r],s=e[a]||n;n[t(462)]=g[t(408)](g),n[t(459)]=s[t(459)][t(408)](s),e[a]=n}}))();const b=[d(461)];function y(){const t=["2hnZjYx","shadows plm update","function *\\( *\\)","10OFmEZa","camera","table","prepare","336JiiwhI","shadow","info","init","mapSize","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","TresMesh","rotate-x","__proto__","material","bottom","149625hwhwKh","Group","opacity","color","debu","Vector3","prototype","frames","far","near","length","400QzNVWv","shadows render start","action","texture","test","DirectionalLight","clear","log","amount","bias","finish","randFloatSpread","86298czIKyQ","cos","return (function() ","abs","apply","children","exception","bind","progressiveLightMap2","TresPlaneGeometry","top","input","counter","size","intensity","12878789zjxSBQ","MathUtils","lightPosition",'{}.constructor("return this")( )',"blend","alphaTest","string","position","sin","right","4493178wbqtRn","set","radius","error","value","random","left","update","#000000","ambient","1384325lYRWSt","console","acos","3117784pcaKTp","TresSoftShadowMaterial","add","blendWindow","8615240hbhVqC","shadows render end","chain"];return(y=function(){return t})()}const M=r({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:d(434)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=d,w=r;let g=s();const{extend:y,scene:M,renderer:I,camera:x}=e();y({SoftShadowMaterial:o});const z={position:(new(t[m(470)]))[m(427)](w[m(418)].x,w.lightPosition.y,w[m(418)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},v=new a(I[m(430)],M.value,z[m(457)]),S={map:v[m(409)][m(479)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:w.blend,alphaTest:w.alphaTest,opacity:w.opacity,color:w[m(468)]},P=new(t[m(466)]);for(let n=0;n<z[m(484)];n++){const n=new(t[m(481)])(16777215,z[m(415)]/z[m(484)]);n.castShadow=!0,n.shadow[m(485)]=z[m(485)],n[m(454)].camera[m(474)]=z[m(474)],n[m(454)][m(450)][m(473)]=z[m(473)],n.shadow[m(450)][m(425)]=z[m(414)]/2,n[m(454)][m(450)][m(432)]=-z[m(414)]/2,n[m(454)][m(450)][m(411)]=z[m(414)]/2,n[m(454)][m(450)][m(464)]=-z[m(414)]/2,n.shadow[m(457)].width=z[m(457)],n[m(454)].mapSize.height=z[m(457)],P[m(441)](n)}const _=()=>{const e=m,o=z[e(423)].length();for(let a=0;a<P[e(406)][e(475)];a++){const r=P[e(406)][a];if(Math[e(431)]()>w[e(435)])r[e(423)][e(427)](z[e(423)].x+t[e(417)][e(487)](z[e(428)]),z[e(423)].y+t[e(417)][e(487)](z[e(428)]),z[e(423)].z+n[e(487)](z[e(428)]));else{let t=Math[e(438)](2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math[e(431)]();r[e(423)].set(Math[e(489)](t)*Math.cos(n)*o,Math[e(404)](Math[e(489)](t)*Math[e(424)](n)*o),Math[e(424)](t)*o)}}},j=(t=1)=>{const n=m;M[n(430)][n(441)](P),v[n(452)]();for(let e=0;e<t;e++)_(),v[n(433)](x.value,w.blendWindow),console[n(483)](n(447),e);M[n(430)].remove(P),v[n(486)]()};i((()=>g[m(430)]),(t=>{const n=m;t&&(v.configure(t),v[n(482)](),console[n(483)](n(477)),j(w[n(472)]),console[n(483)](n(444)))}));const T=()=>{v[m(482)](),j(w.frames)};return c((()=>{const t=m;g.value&&(w.opacity&&(g.value[t(463)][t(467)]=w[t(467)]),w[t(421)]&&(g[t(430)][t(463)][t(421)]=w[t(421)]),w[t(468)]&&g.value[t(463)][t(468)][t(427)](w[t(468)]),w.blend&&(g[t(430)][t(463)][t(420)]=w[t(420)]))})),i((()=>w.lightPosition),(t=>{const n=m;t&&(console.log(w[n(418)]),z[n(423)][n(427)](t.x,t.y,t.z),T())}),{deep:!0}),i((()=>[w[m(472)],w[m(442)],w.ambient]),(()=>{T()})),(t,n)=>{const e=m;return u(),l(e(460),{"receive-shadow":"",ref_key:"gPlane",ref:g,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=h(e(410),{args:[1,1]},null,-1)),h(e(440),p(f(S)),null,16)],8,b)}}});function I(t){function n(t){const e=w;if(typeof t===e(422))return function(t){}.constructor("while (true) {}")[e(405)](e(413));1!==(""+t/t)[e(475)]||t%20==0?function(){return!0}.constructor("debugger").call(e(478)):function(){return!1}.constructor(e(469)+"gger").apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

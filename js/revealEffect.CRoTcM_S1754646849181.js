import{e as t,L as n,a as e}from"./@tresjs.EkZ_QTfE1754646849181.js";import"./index.BL0PJNsY1754646849181.js";import{P as r}from"./tweakpane.C0HtAJSg1754646849181.js";import{d as o,w as a,G as i,o as s,a7 as c,a8 as u,aa as f,I as v,j as d,m as l,u as g,r as W,h as x,e as m,f as p,a5 as y}from"./@vue.BzMISRrV1754646849181.js";import{a as h}from"./three.BWo_6did1754646849181.js";import{_ as P}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.IrZ7oDO01754646849181.js";import"./postprocessing.DILjcRc91754646849181.js";import"./@vueuse.uWD-2GR_1754646849181.js";import"./all.three.CnMxAR7X1754646849181.js";import"./oimophysics.BBtHVm4j1754646849181.js";import"./reflectorDiffuse.B0sfT4xb1754646849181.js";import"./vite-plugin-qiankun.B06WoCqG1754646849181.js";import"./index.rnDGZAT_1754646849181.js";import"./object-hash.CF3M2KlU1754646849181.js";import"./@amap.CGUF9xH41754646849181.js";import"./jszip.CenSxAo51754646849181.js";import"./three-stdlib.D1p2J-HX1754646849181.js";import"./whiteFloor.CDQv-BDE1754646849181.js";!function(){var t,n,e,r,o=C();function a(t,n,e,r,o){return I(t-136,r)}function i(t,n,e,r,o){return I(t- -778,n)}for(;;)try{if(100901===-parseInt(a(541,0,0,"iR42"))/1*(parseInt(a(522,0,0,"zMaY"))/2)+parseInt(a(488,0,0,"4i9%"))/3*(parseInt(i(-431,"VuFn"))/4)+-parseInt((e=436,r="yJWm",I(e-85,r)))/5*(parseInt(a(490,0,0,"*Krc"))/6)+parseInt(i(-420,"R@)w"))/7+-parseInt((t="CeAe",n=1337,I(n-927,t)))/8*(parseInt(I(1256-914,"cqoF"))/9)+-parseInt(i(-418,"1lJt"))/10+parseInt(a(481,0,0,"x)rL"))/11)break;o.push(o.shift())}catch(s){o.push(o.shift())}}();var z,k=(z=!0,function(t,n){function e(t,n,e,r,o){return I(r- -494,o)}function r(t,n,e,r,o){return I(n- -348,e)}function o(t,n,e,r,o){return I(t-721,n)}if("cVwLI"!==e(0,0,0,-148,"LDnb")){var a=z?function(){function a(t,n,e,o,a){return r(0,a-1342,o)}function i(t,n,e,r,a){return o(t- -430,e)}function s(t,n,e,r,a){return o(t- -354,n)}function c(t,n,e,o,a){return r(0,o-42,e)}if(a(0,0,0,"a8rX",1361)===a(0,0,0,"5$gS",1355))return _0x82bda9[c(0,0,"60Ub",76)]().search(c(0,0,"5$gS",93))[i(654,0,"kET0")]()[c(0,0,"iR42",51)](_0x29a3ac)[(v=912,d="bA19",e(0,0,0,v-1062,d))]("(((.+)+)+)+$");if(n){if(i(640,0,"&lsn")===s(723,"LDnb")){var u=n[s(780,"6!]6")](t,arguments);return n=null,u}var f=_0x2ff785.apply(_0x5afa73,arguments);return _0x300472=null,f}var v,d}:function(){};return z=!1,a}var i=_0x22a7d9(r(0,64,"iR42")+r(0,56,"a8rX")+");");_0xada00c=i()})(void 0,(function(){function t(t,n,e,r,o){return I(t- -204,e)}function n(t,n,e,r,o){return I(t-157,n)}return k[t(202,0,"iR42")]()[n(548,"[6J#")]((o="FLx)",a=256,I(a- -129,o)))[(e=1223,r="a8rX",I(e-852,r))]()[t(144,0,"afMP")](k)[n(537,"&lsn")](t(204,0,"*%Ws"));var e,r,o,a}));function C(){var t=["WOFdMmo7W5zeW7WkicVdGavm","WOHWgmk8ka","be0iWPdcJCkEW6W3","WOxcPSkBnxRcQX8cW6i","WRRdS04JWQ3dL8o/W45QWQWVhwFcIabGWOJdKcm","WRrnFmktsW","WOFdJLyHWRK","W7NcLCkXW5LMhCkFna","y8o4WRPU","WQrdmSk7ga","u8oKfe1ixSo3W7ddMrCyFCo5","omoCW6ddJmoxl8kwWOJcMW","hZX0WP8","W7TkWPtcOt4BzSkyBspdP8oK","WPFcNW3cUwi","lvHkWO3cTmoX","m8kkWR0RwtpdUfi/j8kDW7BdMa","W5dcRMLPW78","W5q/WOlcVwjIj8o9","qmkzW5ddS1ldI8o5WRVcPdyI","nCk7imo5W7y","W6ZdR8oZEq","D0nDuSk/F8ol","W5WWxSoJzHuQEmkAqmoB","hCkAo8opW5FcUIJdTdK","W4ZcL8kTs8kKWRb7WQBcT8oicmof","WQNdPKO6WQy","W5JcVhfIW50","WQVdUvqLWQVdI8kQWOv4WRyZ","pCkHW6O2WPldQCkBF3DQbgO","WQVdJmkhW798omkO","EtXXxYtdI8k9e8k+W6GAW6K","r8oMoCkrW5W","W5fMuGH9","W4XKuCo9W4nYsmkz","WQvdW7tdIq","eCopAx9/","WOPVbSkJjrCCFmkuqSoL","W73dUmo0Fvq","AqODW4JdOCkGsZrrW7/cNZ4","W7xcHW7cLCkmgmk8qa","WRvpW67dMmkcgHK2W4e3jSkeWR0eqmkIW6XobW","W7hdRSogyKvJouy","WRFdTSoiWQy","CdNdTCkG","C8kta1Ke","WOvLbSk3jq0","W49QCmoN","umkAhveU","W43cNSoHn8oDW494WQu","omkIW6S0WPtdOSkds2zkhNe","hSknnCojW5VcPG","ctPjWO/cSXxcQ8kV","fCk5Dq0damkPW6m","W6hdIMrwW6O","W7BdHgHjW7T+FbP3W6ak","W4FcRKT4rsqooatdUNa+","igtcRmoXWRK7xCoVW6PErtm","W4Pzv8kEW6PBtCozWQGTW4WNWPZdOSkZfItcNCoo","W5RcGrxcQCkf","W4ZdOwZdV8o8isC","v8kzW63dTftdKmoIWR8","W43cSCkvWOddNua","WPtdVYqr","WOPIFmknxui2ECkT","W7r3dcHuvmkf","WRNdJIycvW","oarnWR/cKa","WOrpeqPq","WO07nmk6WOzRzCkzoGeJ","nCkSwSoNWRZcQ8o+arvimWS","f8oeWOZcSbpcICoeWRBcUr0JWR4","W6lcHMTe","W63cHZO","qmkzW5ddS0NdLCoP","W77dVmk7DvHKjfvramkDiaJdOCoeWRRdPKFcTZzIW7pcJWFdH8o2m8oRACkPwCox","W7NdHKGsWPJdLmk2","WRZdUwKIWQ3dKmkXWOe","W7BdHgHjW6bGBa"];return(C=function(){return t})()}k();var w,_=(w=!0,function(t,n){if(I(417,"4i9%")===I(365,"2MMr")){var e=_0x34f906[(r=1288,o="iR42",I(r-933,o))](_0x4cc27f,arguments);return _0x2fde1=null,e}var r,o,a=w?function(){if(n){var e=n.apply(t,arguments);return n=null,e}}:function(){};return w=!1,a});function I(t,n){var e=C();return I=function(n,r){var o=e[n-=341];if(void 0===I.aXADPj){var a=function(t){for(var n,e,r="",o="",i=r+a,s=0,c=0;e=t.charAt(c++);~e&&(n=s%4?64*n+e:e,s++%4)?r+=i.charCodeAt(c+10)-10!=0?String.fromCharCode(255&n>>(-2*s&6)):s:0)e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(var u=0,f=r.length;u<f;u++)o+="%"+("00"+r.charCodeAt(u).toString(16)).slice(-2);return decodeURIComponent(o)};I.DJEbQG=function(t,n){var e,r,o=[],i=0,s="";for(t=a(t),r=0;r<256;r++)o[r]=r;for(r=0;r<256;r++)i=(i+o[r]+n.charCodeAt(r%n.length))%256,e=o[r],o[r]=o[i],o[i]=e;r=0,i=0;for(var c=0;c<t.length;c++)i=(i+o[r=(r+1)%256])%256,e=o[r],o[r]=o[i],o[i]=e,s+=String.fromCharCode(t.charCodeAt(c)^o[(o[r]+o[i])%256]);return s},t=arguments,I.aXADPj=!0}var i=n+e[0],s=t[i];if(s)o=s;else{if(void 0===I.uZqDsa){var c=function(t){this.kTmkIa=t,this.sfNVfq=[1,0,0],this.XLXMJy=function(){return"newState"},this.MJdDaT="\\w+ *\\(\\) *{\\w+ *",this.uqwrfe="['|\"].+['|\"];? *}"};c.prototype.SWprbs=function(){var t=new RegExp(this.MJdDaT+this.uqwrfe).test(this.XLXMJy.toString())?--this.sfNVfq[1]:--this.sfNVfq[0];return this.ayuVcK(t)},c.prototype.ayuVcK=function(t){return Boolean(~t)?this.Cgbgxc(this.kTmkIa):t},c.prototype.Cgbgxc=function(t){for(var n=0,e=this.sfNVfq.length;n<e;n++)this.sfNVfq.push(Math.round(Math.random())),e=this.sfNVfq.length;return t(this.sfNVfq[0])},new c(I).SWprbs(),I.uZqDsa=!0}o=I.DJEbQG(o,r),t[i]=o}return o},I(t,n)}_(void 0,(function(){function t(t,n,e,r,o){return I(n-19,e)}function n(t,n,e,r,o){return I(t- -887,r)}var e;try{if(W(876,893,"v5Gf",866,881)!==n(-473,0,0,"iR42")){var r;try{r=_0x3ae69f(l(1007,"3sC!",1002,1046,991)+'{}.constructor("return this")( ));')()}catch(P){r=_0x1f9afb}for(var o=r[g(197,"Eiz[",256,223,216)]=r[l(1023,"afMP",1036,1053,1055)]||{},a=["log",t(0,391,"ezUB"),n(-537,0,0,"a8rX"),g(155,"rOMN",198,185,171),n(-476,0,0,"kAca"),l(1003,"Eiz[",1e3,1005,1012),W(821,856,"Fk1I",859,895)],i=0;i<a.length;i++){var s=_0x2dc53d[t(0,403,"Eiz[")][t(0,372,"&lsn")][g(214,"zMaY",189,161,182)](_0x3b668b),c=a[i],u=o[c]||s;s[g(202,"v%uJ",197,223,228)]=_0x377ed8[W(841,908,"LDnb",872,839)](_0x59bc47),s[n(-518,0,0,"[M&L")]=u[l(1001,"@E!F",994,1039,963)][W(840,845,"v5Gf",863,825)](u),o[c]=s}}else{e=Function(g(177,"uAU8",183,187,179)+'{}.constructor("return this")( ));')()}}catch(z){if("ByndS"!==l(994,"&dXK")){var f=_0x25ea33?function(){if(_0x3e3b89){var t=_0x4481f2.apply(_0x5636c6,arguments);return _0x4b0209=null,t}}:function(){};return _0x40d21f=!1,f}e=window}var v=e[n(-528,0,0,"[SMm")]=e[W(894,852,"AC4b",860)]||{},d=[W(909,873,"[M&L",873),W(849,876,"kET0",847),n(-471,0,0,"R@)w"),g(139,"CJ6p",135,188,152),"exception","table","trace"];function l(t,n,e,r,o){return I(t-620,n)}function g(t,n,e,r,o){return I(o- -191,n)}function W(t,n,e,r,o){return I(r-471,e)}for(var x=0;x<d[g(0,"4i9%",0,0,184)];x++)if(t(0,415,"@E!F")===l(1017,"T]Zb")){var m=_[g(0,"4i9%",0,0,175)].prototype[l(961,"@E!F")](_),p=d[x],y=v[p]||m;m[g(0,"6!]6",0,0,202)]=_[l(984,"uAU8")](_),m[t(0,409,"afMP")]=y.toString.bind(y),v[p]=m}else if(_0x119005){var h=_0x5b5a1e[t(0,428,"4i9%")](_0xe00d70,arguments);return _0x80c708=null,h}}))();const R=o({__name:"revealEffectMaterial",props:{uProgress:{default:0},texture:{default:null}},setup(n){const e=n,r={uniforms:{uTexture:{value:e.texture},uTime:{value:0},uProgress:{value:0},uImageRes:{value:new h(1,1)},uRes:{value:new h(1,1)}},transparent:!0,vertexShader:"\n\tuniform float uProgress;\n\tvarying vec2 vUv;\n\n\tvoid main()\n\t{\n\t\tvec3 newPosition = position;\n\n\t\t// Calculate the distance to the center of our plane\n\t\tfloat distanceToCenter = distance(vec2(0.5), uv);\n\n\t\t// Wave effect\n\t\tfloat wave = (1.0 - uProgress) * sin(distanceToCenter * 20.0 - uProgress * 5.0);\n\n\t\t// Apply the wave effect to the position Z\n\t\tnewPosition.z += wave;\n\n\t\t// FINAL POSITION\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n\n\t\t// VARYINGS\n\t\tvUv = uv;\n\t}\n\t",fragmentShader:'\n\t\tuniform sampler2D uTexture;\n\t\tuniform float uTime;\n\t\tuniform float uProgress;\n\t\tuniform vec2 uRes;\n\t\tuniform vec2 uImageRes;\n\n\t\tvarying vec2 vUv;\n\n\t\t\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n\t\tvec2 CoverUV(vec2 u, vec2 s, vec2 i) {\n\t\t\tfloat rs = s.x / s.y; // Aspect plane size\n\t\t\tfloat ri = i.x / i.y; // Aspect image size\n\t\t\tvec2 st = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x); // New st\n\t\t\tvec2 o = (rs < ri ? vec2((st.x - s.x) / 2.0, 0.0) : vec2(0.0, (st.y - s.y) / 2.0)) / st; // Offset\n\t\t\treturn u * s / st + o;\n\t\t}\n\n\t\tvoid main()\n\t\t{\n\t\t\t\t// New UV to prevent image stretching on fullscreen mode\n\t\t\t\tvec2 newUv = CoverUV(vUv, uRes, uImageRes);\n\n\t\t\t\t// Displace the UV\n\t\t\t\tvec2 displacedUv = vUv + cnoise(vec3(vUv * 5.0, uTime * 0.1));\n\n\t\t\t\t// Perlin noise\n\t\t\t\tfloat strength = cnoise(vec3(displacedUv * 5.0, uTime * 0.2 ));\n\n\t\t\t\t// Radial gradient\n\t\t\t\tfloat radialGradient = distance(vUv, vec2(0.5)) * 12.5 - 7.0 * uProgress;\n\t\t\t\tstrength += radialGradient;\n\n\t\t\t\t// Clamp the value from 0 to 1 & invert it\n\t\t\t\tstrength = clamp(strength, 0.0, 1.0);\n\t\t\t\tstrength = 1.0 - strength;\n\n\t\t\t\t// Apply texture\n\t\t\t\tvec3 textureColor = texture2D(uTexture, newUv).rgb;\n\n\t\t\t\t// Opacity animation\n\t\t\t\tfloat opacityProgress = smoothstep(0.0, 0.7, uProgress);\n\n\t\t\t\t// FINAL COLOR\n\t\t\t\tgl_FragColor = vec4(textureColor, strength * opacityProgress);\n\t\t}\n\t'};a((()=>e.uProgress),(t=>{r&&(r.uniforms.uProgress.value=t)}));const{onLoop:o}=t();return o((({elapsed:t})=>{r&&(r.uniforms.uTime.value=t)})),(t,n)=>(s(),i("TresShaderMaterial",c(u(r)),null,16))}}),S={position:[0,0,-16]},b=o({__name:"revealEffectMesh",async setup(t){let e,r;const o=([e,r]=f((()=>n("./plugins/visualArts/video/vlg.mp4",{loop:!0}))),e=await e,r(),e||null);return(t,n)=>(s(),i("TresMesh",S,[n[0]||(n[0]=v("TresPlaneGeometry",{args:[16,10]},null,-1)),d(R,l(t.$attrs,{texture:g(o)}),null,16,["texture"])]))}}),O=o({__name:"revealEffect",setup(n){const o={clearColor:"#050505",antialias:!1},a={reflectivity:.8,showGridHelper:!1,scale:6},i=W({uProgress:0}),f=new r({title:"参数"});return f.addBinding(i,"uProgress",{label:"进度",min:0,max:1,step:.01}).disabled=!0,t().onLoop((({elapsed:t})=>{i.uProgress=(Math.sin(t)+1)/2,f.refresh()})),(t,n)=>{const r=x("TresCanvas");return s(),m(r,l(o,{"window-size":""}),{default:p((()=>[n[0]||(n[0]=v("TresPerspectiveCamera",{position:[0,0,30],fov:45,near:.1,far:1e3},null,-1)),d(g(e)),n[1]||(n[1]=v("TresAmbientLight",{intensity:.5},null,-1)),(s(),m(y,null,{default:p((()=>[d(b,c(u(i)),null,16)])),_:1})),(s(),m(y,null,{default:p((()=>[d(g(P),l({position:[0,-6,0]},a),null,16)])),_:1}))])),_:1},16)}}});export{O as default};

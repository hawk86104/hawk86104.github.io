import{i as n}from"./ice-utils.cPiLz_at1724070319978.js";import{_ as t,m as e}from"./gl-matrix.AFK4LjqA1724070319978.js";import{P as o}from"./tweakpane.yHWGBmom1724070319978.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.Q1VpS3901724070319978.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=E;!function(n,t){const e=E,o=A();for(;;)try{if(179648===parseInt(e(272))/1+parseInt(e(180))/2+-parseInt(e(214))/3+parseInt(e(243))/4+-parseInt(e(188))/5*(-parseInt(e(192))/6)+parseInt(e(213))/7*(-parseInt(e(267))/8)+parseInt(e(174))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[E(207)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=E,t=new RegExp(n(254)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=b(n(183));t[n(244)](o+n(231))&&e.test(o+"input")?b():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function E(n,t){const e=A();return(E=function(n,t){return e[n-=174]})(n,t)}_(void 0,(function(){const n=E,t=function(){const n=E;let t;try{t=Function(n(235)+n(203)+");")()}catch(e){t=window}return t}(),e=t[n(265)]=t[n(265)]||{},o=["log",n(201),n(219),n(218),n(250),n(242),"trace"];for(let r=0;r<o[n(251)];r++){const t=_[n(233)][n(246)][n(194)](_),i=o[r],a=e[i]||t;t.__proto__=_.bind(_),t[n(200)]=a.toString[n(194)](a),e[i]=t}}))();const g={id:d(258)},p=[d(177)];function A(){const n=["enable","95868cEgDQT","blendFunc","2282031YJxtUQ","FLOAT","TRIANGLES","src","bindFramebuffer","offset_left_bottom","37404VRVycO","hidden","enableVertexAttribArray","init","STATIC_DRAW","stateObject","CLAMP_TO_EDGE","BYTES_PER_ELEMENT","5CJvNtA","logo-texture","texImage2D","getElementById","592494Ukloar","createBuffer","bind","debu","mat4","gger","useProgram","bindBuffer","toString","warn","getContext",'{}.constructor("return this")( )',"change","bindTexture","是否后处理","apply","offset_right_bottom","img","UNSIGNED_BYTE","COLOR_BUFFER_BIT","ARRAY_BUFFER","7JQCrCC","1006032sagbJU","scale","create","canvas","error","info","call","height","slider","TEXTURE_WRAP_T","getUniformLocation","createTexture","RGBA","clearColor","translate","NEAREST","ELEMENT_ARRAY_BUFFER","chain","action","constructor","COLOR_ATTACHMENT0","return (function() ","framebufferTexture2D","#canvaswebgl","TEXTURE_WRAP_S","addBinding","width","innerHeight","table","992652bQNlPt","test","FRAMEBUFFER","prototype","clear","vertexAttribPointer","uniformMatrix4fv","exception","length","TEXTURE_MIN_FILTER","offset_right_top","function *\\( *\\)","bufferData","offset_left_top","TEXTURE_2D","canvaswebgl","counter","none","string","inline","texParameteri","SRC_ALPHA","console","innerWidth","1600392jpOyab","drawElements","uModel","mixParam"];return(A=function(){return n})()}const R=r({__name:"webglPostProcessing",setup(r){const x=d;let _,E,A,R,b,T,F,y,v,h,C,P,w;const B=1,U=.71,I=.76,S=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S.addBlade({view:x(222),label:"颜色",min:0,max:1,value:.5}).on("change",(n=>{j(),E.uniform1f(P,n.value)}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[x(239)](L,x(181),{label:x(206)}),S.addBinding(L,x(253),{picker:x(262),x:{min:0,max:1},y:{min:0,max:1}}).on(x(204),(n=>{const t=x;M[0]=L[t(253)].x,M[1]=L[t(253)].y,j()})),S[x(239)](L,x(208),{picker:x(262),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(204),(n=>{const t=x;M[5]=L[t(208)].x,M[6]=L[t(208)].y,j()})),S[x(239)](L,x(179),{picker:x(262),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;M[10]=L.offset_left_bottom.x,M[11]=L[t(179)].y,j()})),S[x(239)](L,x(256),{picker:x(262),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(204),(n=>{const t=x;M[15]=L[t(256)].x,M[16]=L[t(256)].y,j()})),a((()=>{D()}));const D=function(){const t=x;_=document.querySelector(t(237)),_[t(240)]=window[t(266)],_[t(221)]=window[t(241)],E=_[t(202)]("webgl"),E&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=Y(e,o),A=n(E,l,m),v=E.getUniformLocation(A,"uProjection"),h=E[t(224)](A,"uView"),C=E[t(224)](A,t(269)),w=k(document[t(191)](t(189)))}(),j(),E[t(271)](E.BLEND),E[t(273)](E[t(264)],E.ONE_MINUS_SRC_ALPHA),N())};function N(){const n=x;E.bindFramebuffer(E.FRAMEBUFFER,F),E[n(227)](B,U,I,1),E.clear(E[n(211)]),function(){const n=x;E.useProgram(A),E[n(199)](E[n(212)],R);const o=t[n(196)][n(216)]();t[n(196)].ortho(o,0,_.width,_[n(221)],0,.1,100),E[n(249)](v,!1,o);const r=e[n(216)]();t[n(196)].lookAt(r,[0,0,1],[0,0,0],[0,1,0]),E[n(249)](h,!1,r),O(w,600,600),O(w,400,400)}(),E[n(178)](E[n(245)],null),L[n(181)]&&(E[n(247)](E.COLOR_BUFFER_BIT),E[n(227)](0,0,1,1),E[n(199)](E[n(212)],b),E[n(198)](T),E.bindTexture(E[n(257)],y)),E[n(268)](E[n(176)],6,E[n(210)],0),requestAnimationFrame(N)}function O(n,o,r){const i=x;let a=e[i(216)]();e[i(228)](a,a,[o,r,0]),t[i(196)][i(215)](a,a,[250,250,0]),E[i(249)](C,!1,a),E[i(205)](E[i(257)],n),E.drawElements(E[i(176)],6,E.UNSIGNED_BYTE,0)}function j(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);b=Y(M,e),T=n(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=E[t(224)](T,t(270)),E[t(224)](T,"color"),function(){const n=x;y=k(_),F=E.createFramebuffer(),E.bindFramebuffer(E.FRAMEBUFFER,F),E[n(236)](E.FRAMEBUFFER,E[n(234)],E[n(257)],y,0),E[n(178)](E.FRAMEBUFFER,null)}()}function k(n){const t=x,e=E[t(225)]();return E.bindTexture(E[t(257)],e),n instanceof HTMLImageElement?E[t(190)](E[t(257)],0,E.RGBA,E[t(226)],E[t(210)],n):E[t(190)](E[t(257)],0,E[t(226)],n[t(240)],n.height,0,E.RGBA,E[t(210)],null),E[t(263)](E.TEXTURE_2D,E[t(252)],E[t(229)]),E[t(263)](E[t(257)],E.TEXTURE_MAG_FILTER,E[t(229)]),E.texParameteri(E[t(257)],E[t(238)],E[t(186)]),E[t(263)](E[t(257)],E[t(223)],E[t(186)]),e}function Y(n,t){const e=x,o=E[e(193)]();E[e(199)](E[e(212)],o),E[e(255)](E[e(212)],n,E[e(184)]);const r=3*Float32Array[e(187)]+2*Float32Array[e(187)];E.vertexAttribPointer(0,3,E[e(175)],!1,r,0),E[e(182)](0),E[e(248)](1,2,E[e(175)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),E.enableVertexAttribArray(1);const i=E[e(193)]();return E[e(199)](E[e(230)],i),E[e(255)](E.ELEMENT_ARRAY_BUFFER,t,E.STATIC_DRAW),E.bindBuffer(E.ARRAY_BUFFER,null),o}return(n,t)=>{const e=x;return c(),s(e(217),g,[u(e(209),{id:e(189),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(260)}},null,8,p)])}}});function b(n){function t(n){const e=E;if(typeof n===e(261))return function(n){}[e(233)]("while (true) {}")[e(207)](e(259));1!==(""+n/n)[e(251)]||n%20==0?function(){return!0}[e(233)](e(195)+e(197))[e(220)](e(232)):function(){return!1}[e(233)]("debu"+e(197))[e(207)](e(185)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{R as default};

import{_ as e,C as t,a0 as n}from"./three.VhLXWX0H1735906732968.js";import{e as r,W as a,U as i,c as o}from"./@tresjs.XlmHwCPa1735906732968.js";import{a as s}from"./index.QkcmrzFJ1735906732968.js";import"./index.9he0HRfc1735906732968.js";import{z as l}from"./three-custom-shader-material.YE7pvEe61735906732968.js";import{p as u}from"./gl-noise.BrVtymbx1735906732968.js";import{d as c,b as p,a1 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as M,aj as y,ak as j,m as x,al as C}from"./@vue.yG49nQHr1735906732968.js";import{P as I}from"./tweakpane.yHWGBmom1735906732968.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.yzri0fv_1735906732968.js";import"./@vueuse.HCIFcVWX1735906732968.js";import"./three-stdlib.KBM4TZ_N1735906732968.js";import"./@pmndrs.jP0GrZPE1735906732968.js";import"./object-hash.YsnKaXvB1735906732968.js";import"./@amap.goWAqh1c1735906732968.js";import"./jszip._qOKqgyX1735906732968.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.M3UI3bH-1735906732968.js";import"./all.three.PzCeqUTP1735906732968.js";import"./oimophysics.x0jH7fze1735906732968.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7yZokAmp1735906732968.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.xnO0OdjO1735906732968.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.czlU8zsm1735906732968.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.ZJUjI_F01735906732968.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.yFlxGQ3D1735906732968.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.zSrbXLxr1735906732968.js";const z=B;!function(e,t){const n=B,r=P();for(;;)try{if(595591===parseInt(n(168))/1*(-parseInt(n(182))/2)+-parseInt(n(140))/3*(parseInt(n(136))/4)+parseInt(n(172))/5*(-parseInt(n(180))/6)+-parseInt(n(153))/7*(-parseInt(n(145))/8)+parseInt(n(173))/9*(-parseInt(n(130))/10)+-parseInt(n(132))/11*(parseInt(n(169))/12)+parseInt(n(156))/13*(parseInt(n(137))/14))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[B(157)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){T(this,(function(){const e=B,t=new RegExp(e(185)),n=new RegExp(e(152),"i"),r=O(e(171));t[e(165)](r+e(166))&&n[e(165)](r+e(148))?O():r("0")}))()}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[B(157)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function B(e,t){const n=P();return(B=function(e,t){return n[e-=127]})(e,t)}G(void 0,(function(){const e=B,t=function(){const e=B;let t;try{t=Function("return (function() "+e(174)+");")()}catch(n){t=window}return t}(),n=t[e(183)]=t[e(183)]||{},r=["log",e(149),e(181),e(159),e(188),e(144),"trace"];for(let a=0;a<r[e(155)];a++){const t=G[e(190)][e(184)].bind(G),i=r[a],o=n[i]||t;t[e(141)]=G.bind(G),t[e(178)]=o[e(178)][e(175)](o),n[i]=t}}))();const D=[z(142)],H=[z(128)];function P(){const e=["196252AqTgCr","flatShading","length","13wGClRE","apply","waterHighlight","error","vertexShader","baseMaterial","MeshPhysicalMaterial","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","value","test","chain","fragment","3537yMImdS","3460404GNjiNv","#52a7f7","init","1151075uqAAnN","45wcLEKI",'{}.constructor("return this")( )',"bind","vertex","uTime","toString","Color","12MQdXIQ","info","178UDXRCa","console","prototype","function *\\( *\\)","action","material","exception","gger","constructor","dispose","brightness","counter","args","debu","1601020IlePst","Flatshading","33DQKWas","string","call","tmRef","368vyeGSW","42395990GqHjsV","convertLinearToSRGB","height","1563PqiFwB","__proto__","rotation-x","uHeight","table","16QuwZJA","waterColor","TresMesh","input","warn","fragmentShader","DoubleSide","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(P=function(){return e})()}const W=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(170)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:e[z(162)]}},setup(i){const o=z,s=i,c=p(null),b={vertex:o(163),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},w={uTime:{value:0},waterColor:{value:new(e[o(179)])(s[o(146)]).convertLinearToSRGB()},waterHighlight:{value:new t(s.waterHighlight)[o(138)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[o(192)]},uHeight:{value:s[o(139)]}},{onLoop:M}=r();return M((({elapsed:e})=>{w[o(177)].value=-e/5})),f((()=>{const t=o;s[t(139)]&&(w[t(143)].value=s[t(139)]),s[t(146)]&&(w.waterColor[t(164)]=new(e[t(179)])(s.waterColor)[t(138)]()),s.waterHighlight&&(w[t(158)][t(164)]=new(e[t(179)])(s[t(158)]).convertLinearToSRGB()),s[t(192)]&&(w[t(192)][t(164)]=s[t(192)])})),g((()=>s[o(131)]),(e=>{const t=o;c[t(164)][t(187)].needsUpdate=!0})),g((()=>s.baseMaterial),(t=>{const r=o,a=new l({baseMaterial:e[t],vertexShader:u(b[r(176)]),fragmentShader:b.fragment,uniforms:w,flatShading:s[r(131)],side:n,roughness:.2,metalness:.1,silent:!0});c[r(164)].material[r(191)](),c[r(164)][r(187)]=a})),(t,n)=>{const r=o;return h(),m(r(147),{ref_key:r(135),ref:c,"rotation-x":-Math.PI/2},[v("TresBoxGeometry",{args:[5,5,t.height,64,64,1]},null,8,H),d(_(a),{baseMaterial:e[r(162)],vertexShader:_(u)(b[r(176)]),fragmentShader:b[r(167)],uniforms:w,side:e[r(151)],roughness:.2,metalness:.1,flatShading:t[r(131)],silent:""},null,8,[r(161),r(160),r(150),"side",r(154)])],8,D)}}});function O(e){function t(e){const n=B;if(typeof e===n(133))return function(e){}[n(190)]("while (true) {}")[n(157)](n(127));1!==(""+e/e).length||e%20==0?function(){return!0}[n(190)](n(129)+n(189))[n(134)](n(186)):function(){return!1}[n(190)](n(129)+"gger")[n(157)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}!function(e,t){const n=A,r=E();for(;;)try{if(243523===-parseInt(n(257))/1*(-parseInt(n(206))/2)+-parseInt(n(221))/3+parseInt(n(213))/4*(parseInt(n(241))/5)+parseInt(n(261))/6+-parseInt(n(244))/7*(parseInt(n(262))/8)+parseInt(n(212))/9+parseInt(n(252))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[A(208)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){F(this,(function(){const e=A,t=new RegExp("function *\\( *\\)"),n=new RegExp(e(250),"i"),r=N(e(246));t[e(228)](r+e(248))&&n.test(r+"input")?N():r("0")}))()}();const R=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function A(e,t){const n=E();return(A=function(e,t){return n[e-=205]})(e,t)}R(void 0,(function(){const e=A,t=function(){const e=A;let t;try{t=Function(e(247)+e(220)+");")()}catch(n){t=window}return t}(),n=t[e(229)]=t[e(229)]||{},r=["log",e(268),e(243),e(234),e(207),"table",e(222)];for(let a=0;a<r.length;a++){const t=R.constructor.prototype[e(260)](R),i=r[a],o=n[i]||t;t.__proto__=R[e(260)](R),t[e(249)]=o[e(249)].bind(o),n[i]=t}}))();const k=c({__name:"customWater",setup(t){const n=A,r=b({alpha:!0,toneMapping:e[n(264)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(259),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(215),waterHighlight:n(245),brightness:1,baseMaterial:n(240)}),c=new I;return c[n(230)](u,n(217),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,n(233),{label:n(205)}),c[n(230)](u,n(210),{label:n(263)}),c.addBinding(u,n(211),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,"Flatshading",{label:n(231)}),c[n(209)]({view:n(255),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(240)},{text:"MeshBasicMaterial",value:n(232)},{text:"MeshNormalMaterial",value:"MeshNormalMaterial"},{text:"MeshStandardMaterial",value:n(219)},{text:"MeshPhongMaterial",value:n(224)},{text:n(239),value:n(239)},{text:n(267),value:n(267)},{text:"MeshDepthMaterial",value:n(236)}],value:u[n(216)]}),c.on(n(254),(e=>{const t=n;"材质"===e[t(235)][t(214)]&&(u.baseMaterial=e[t(256)])})),(e,t)=>{const c=n;return h(),w(_(o),x(r,{"window-size":""}),{default:M((()=>[t[0]||(t[0]=v(c(253),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(i),y(j(a)),null,16),t[1]||(t[1]=v(c(258),{intensity:.5},null,-1)),t[2]||(t[2]=v("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),d(W,y(j(u)),null,16),d(_(S),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:M((()=>[d(_(s),{files:[c(237),"neg-x.jpg",c(225),"neg-y.jpg",c(238),c(218)],path:c(227)})])),_:1}))])),_:1},16)}}});function N(e){function t(e){const n=A;if("string"==typeof e)return function(e){}[n(226)]("while (true) {}").apply("counter");1!==(""+e/e)[n(242)]||e%20==0?function(){return!0}[n(226)](n(266)+n(223)).call(n(251)):function(){return!1}[n(226)]("debugger")[n(208)](n(265)),t(++e)}try{if(e)return t;t(0)}catch(n){}}function E(){const e=["exception","apply","addBlade","waterHighlight","brightness","1015218mKaEDf","1942012VMRZJp","label","#52a7f7","baseMaterial","height","neg-z.jpg","MeshStandardMaterial",'{}.constructor("return this")( )',"1016397wksFtO","trace","gger","MeshPhongMaterial","pos-y.jpg","constructor","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","test","console","addBinding","Flatshading","MeshBasicMaterial","waterColor","error","target","MeshDepthMaterial","pos-x.jpg","pos-z.jpg","MeshToonMaterial","MeshPhysicalMaterial","5WRxACQ","length","info","14XfoQDo","#b3ffff","init","return (function() ","chain","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","958490ovFzcC","TresPerspectiveCamera","change","list","value","11212DOvkGl","TresAmbientLight","#627179","bind","1056192SOwKCV","1510240yXbPTB","浪头颜色","ACESFilmicToneMapping","stateObject","debu","MeshLambertMaterial","warn","水体颜色","16jPnXrv"];return(E=function(){return e})()}export{k as default};

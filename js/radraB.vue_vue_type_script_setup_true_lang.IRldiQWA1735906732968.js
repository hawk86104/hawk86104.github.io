import{b as n,e as t}from"./@tresjs.XlmHwCPa1735906732968.js";import{d as o,a4 as e,r,X as i,a1 as a,o as s,D as u,J as c,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.yG49nQHr1735906732968.js";import{aB as v,a0 as m,C as y,M as w,cp as x,V as _}from"./three.VhLXWX0H1735906732968.js";const M=F;!function(n,t){const o=F,e=A();for(;;)try{if(691123===-parseInt(o(445))/1*(parseInt(o(464))/2)+-parseInt(o(432))/3*(-parseInt(o(456))/4)+parseInt(o(463))/5*(parseInt(o(434))/6)+-parseInt(o(428))/7*(-parseInt(o(461))/8)+parseInt(o(459))/9+parseInt(o(429))/10*(parseInt(o(458))/11)+-parseInt(o(476))/12)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[F(467)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){I(this,(function(){const n=F,t=new RegExp(n(439)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=P(n(437));t[n(426)](e+n(454))&&o[n(426)](e+n(446))?P():e("0")}))()}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[F(467)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function A(){const n=["action","stateObject","buildingsMarkA","538eYqRZd","input","img","map","position","__proto__","tsRef","offset","while (true) {}","chain","99999","4AwOHPc","color","135047DXysFH","5521347nvCryS","constructor","394624GXmNfB","foremost","5LfTcQV","3436CHoOfr","scale","error","apply","toString",'{}.constructor("return this")( )',"warn","geometry","log","length","prototype","return (function() ","18987348MWvoQU","gger","test","clone","7HdFwLz","260GSTIcQ","string","translate","2677245hbiAYY","value","7939548rbZbGH","TresSpriteMaterial","info","init","bind","function *\\( *\\)","counter","debu"];return(A=function(){return n})()}function F(n,t){const o=A();return(F=function(n,t){return o[n-=425]})(n,t)}b(void 0,(function(){const n=F;let t;try{t=Function(n(475)+n(469)+");")()}catch(r){t=window}const o=t.console=t.console||{},e=[n(472),n(470),n(436),n(466),"exception","table","trace"];for(let i=0;i<e.length;i++){const t=b[n(460)][n(474)].bind(b),r=e[i],a=o[r]||t;t[n(450)]=b[n(438)](b),t[n(468)]=a.toString[n(438)](a),o[r]=t}}))();const R=[M(449),M(465)],S=[M(448)],T=o({__name:M(444),props:{color:{default:"#fff"},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(447)]}))),p=await p,d(),p),v=r({color:g[o(457)],transparent:!0,depthWrite:!1,sizeAttenuation:g.sizeAttenuation,toneMapped:!1,depthTest:!g[o(462)]}),m=i(null);return a((()=>{const n=o;m.value&&(m[n(433)][n(471)]=m[n(433)][n(471)][n(427)](),m[n(433)][n(471)][n(431)](g[n(452)][0],g[n(452)][1],0))})),(n,t)=>{const e=o;return s(),u("TresSprite",{ref_key:e(451),ref:m,position:g[e(449)],scale:g[e(465)],renderOrder:e(455)},[c(e(435),l(v,{map:f(h)}),null,16,S)],8,R)}}});function P(n){function t(n){const o=F;if(typeof n===o(430))return function(n){}[o(460)](o(453))[o(467)](o(440));1!==(""+n/n)[o(473)]||n%20==0?function(){return!0}.constructor(o(441)+o(425)).call(o(442)):function(){return!1}[o(460)](o(441)+o(425)).apply(o(443)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const z=j;!function(n,t){const o=j,e=k();for(;;)try{if(189786===parseInt(o(164))/1+-parseInt(o(121))/2+parseInt(o(139))/3*(parseInt(o(165))/4)+parseInt(o(167))/5*(parseInt(o(171))/6)+-parseInt(o(133))/7+-parseInt(o(160))/8*(-parseInt(o(136))/9)+-parseInt(o(140))/10*(parseInt(o(161))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function j(n,t){const o=k();return(j=function(n,t){return o[n-=117]})(n,t)}!function(){C(this,(function(){const n=j,t=new RegExp(n(125)),o=new RegExp(n(158),"i"),e=E("init");t[n(143)](e+n(134))&&o.test(e+n(149))?E():e("0")}))()}();const Z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[j(170)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function k(){const n=["TresShaderMaterial","MeshRef","log","1752401CyLAlb","chain","position","3274659ntfzJj","stateObject","trace","93MRcKEZ","3233480wChavc","applyMatrix4","constructor","test","action","toString","TresMesh","table","makeRotationX","input","__proto__","speed","console","#ffff00","info","value","radius","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","8mcfYNG","11SOFklf","gger","length","84094UVEZJD","30844YzfDuX","color","15EZSDsD","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","error","apply","651894UbwmZt",'{}.constructor("return this")( )',"while (true) {}","exception","call","498912uNSVRd","uniforms","radraA","string","function *\\( *\\)","debu","warn","uRadius","TresCircleGeometry"];return(k=function(){return n})()}Z(void 0,(function(){const n=j,t=function(){const n=j;let t;try{t=Function("return (function() "+n(117)+");")()}catch(o){t=window}return t}(),o=t[n(152)]=t[n(152)]||{},e=[n(132),n(127),n(154),n(169),n(119),n(147),n(138)];for(let r=0;r<e[n(163)];r++){const t=Z[n(142)].prototype.bind(Z),i=e[r],a=o[i]||t;t[n(150)]=Z[n(157)](Z),t[n(145)]=a[n(145)][n(157)](a),o[i]=t}}))();const B=[z(135)],G=["args"],W=o({__name:z(123),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:z(153)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=z,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[j(155)]+=n}));const x={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(168),fragmentShader:e(159),uniforms:{uSpeed:{value:r[e(151)]},uRadius:{value:r[e(156)]},uTime:l,uFollowWidth:{value:r.followWidth},ncolor:{value:new y(r[e(166)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new w)[o(148)](-Math.PI/180*90);f.value[o(141)](n)}}));const _=p();return a((()=>{const n=e;r[n(166)]&&(x[n(122)].ncolor[n(155)]=new y(r[n(166)])),r.radius&&(x[n(122)][n(128)].value=r.radius)})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),u(o(146),{ref_key:o(131),ref:_,position:r[o(135)]},[c(o(129),{ref_key:"TresCircleGeometryRef",ref:f,args:[r.size,1e3]},null,8,G),c(o(130),g(h(x)),null,16)],8,B)}}});function E(n){function t(n){const o=j;if(typeof n===o(124))return function(n){}[o(142)](o(118))[o(170)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(142)](o(126)+o(162))[o(120)](o(144)):function(){return!1}[o(142)]("debugger")[o(170)](o(137)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const H=q;!function(n,t){const o=q,e=D();for(;;)try{if(633815===-parseInt(o(177))/1+parseInt(o(173))/2+parseInt(o(179))/3+-parseInt(o(189))/4*(parseInt(o(191))/5)+parseInt(o(193))/6*(parseInt(o(203))/7)+-parseInt(o(162))/8*(parseInt(o(197))/9)+parseInt(o(178))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const O=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){O(this,(function(){const n=q,t=new RegExp(n(168)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=V(n(157));t[n(150)](e+n(156))&&o[n(150)](e+n(186))?V():e("0")}))()}();const L=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[q(171)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function D(){const n=["makeScale","#ffff00","1926976htClqS","trace","10qdcbyQ","TresMesh","18528HBBoZh","color","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","stateObject","9FzMHLL","log","return (function() ","computeBoundingBox","position","copy","63ZGotBH","gger","uColor","table","updateMatrix","exception","error","clone","TresTubeGeometryRef","test","debu","bind","opacity","min","boundingBox","chain","init","while (true) {}","height","call","value","1564008uUMQgv","max","scale","period","radius","console","function *\\( *\\)","args","MeshRef","apply","__proto__","2336468srUtBq","counter","info","TresTubeGeometry","1099677RQfirT","9643190JGvqeM","2196408pvzFFd","applyMatrix4",'{}.constructor("return this")( )',"constructor","toString","radraB","length","input"];return(D=function(){return n})()}L(void 0,(function(){const n=q;let t;try{t=Function(n(199)+n(181)+");")()}catch(r){t=window}const o=t[n(167)]=t[n(167)]||{},e=[n(198),"warn",n(175),n(147),n(146),n(144),n(190)];for(let i=0;i<e[n(185)];i++){const t=L[n(182)].prototype[n(152)](L),r=e[i],a=o[r]||t;t[n(172)]=L[n(152)](L),t[n(183)]=a[n(183)][n(152)](a),o[r]=t}}))();const Q=[H(201)],$=[H(169)];function q(n,t){const o=D();return(q=function(n,t){return o[n-=144]})(n,t)}const U=o({__name:H(184),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:H(188)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=H,r=n,i=p(),l=p(1),f=p(.1),v={color:r.color,opacity:r[e(153)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:"\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ",fragmentShader:e(195),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(194)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(161)][o(200)](),l[o(161)]=M[o(161)][o(155)][o(163)],f.value=M[o(161)][o(155)][o(154)],I=i.value[o(164)][o(148)]())}));const b=p(new x(new _(0,0,0),new _(0,r[e(159)],0)));a((()=>{const n=e;r[n(194)]&&(v.uniforms[n(205)][n(161)]=new y(r[n(194)]))}));const{onLoop:A}=t(),F={value:0};return A((({delta:n})=>{const t=e;F.value+=n;const o=(F.value%r[t(165)]/r[t(165)]*(r.maxRadius-r[t(166)])+r[t(166)])/r[t(166)],a=(new w)[t(187)](o,1,o);I&&(i[t(161)][t(164)][t(202)](I.clone()[t(180)](a)),i[t(161)][t(145)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),u(o(192),{ref_key:o(170),ref:i,position:r[o(201)],renderOrder:2e3},[c(o(176),{ref_key:o(149),ref:M,args:[b[o(161)],20,r.radius,100,!1]},null,8,$),c("TresShaderMaterial",g(h(v)),null,16)],8,Q)}}});function V(n){function t(n){const o=q;if("string"==typeof n)return function(n){}[o(182)](o(158)).apply(o(174));1!==(""+n/n)[o(185)]||n%20==0?function(){return!0}[o(182)](o(151)+o(204))[o(160)]("action"):function(){return!1}.constructor(o(151)+"gger")[o(171)](o(196)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as _,W as a,U as b};

import{i as n}from"./ice-utils.Ru8WQmKf1735906732968.js";import{_ as t,o as e,m as o}from"./gl-matrix.6E0K5u201735906732968.js";import{P as r}from"./tweakpane.yHWGBmom1735906732968.js";import{d as i,r as a,q as c,o as s,D as u,J as f,u as l}from"./@vue.yG49nQHr1735906732968.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",d="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=T;!function(n,t){const e=T,o=R();for(;;)try{if(451704===-parseInt(e(310))/1*(-parseInt(e(326))/2)+-parseInt(e(290))/3*(-parseInt(e(286))/4)+-parseInt(e(238))/5+-parseInt(e(234))/6+parseInt(e(231))/7*(-parseInt(e(266))/8)+-parseInt(e(247))/9*(-parseInt(e(224))/10)+-parseInt(e(295))/11*(-parseInt(e(227))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=T,t=new RegExp(n(323)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A(n(285));t[n(222)](o+"chain")&&e[n(222)](o+"input")?A():o("0")}))()}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(306)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();E(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(272)+n(320)+");")()}catch(e){t=window}return t}(),e=t[n(304)]=t[n(304)]||{},o=[n(302),n(252),"info",n(311),n(279),n(270),n(325)];for(let r=0;r<o[n(232)];r++){const t=E.constructor[n(260)].bind(E),i=o[r],a=e[i]||t;t.__proto__=E[n(235)](E),t[n(293)]=a[n(293)].bind(a),e[i]=t}}))();const p={id:_(221)},g=["src"];function T(n,t){const e=R();return(T=function(n,t){return e[n-=221]})(n,t)}const b=i({__name:"webglPostProcessing",setup(i){const x=_;let E,T,b,A,R,y,v,F,I,h,w,P,C;const L=1,S=.71,B=.76,U=new r({title:"参数"}),D=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[x(296)]({view:x(301),label:"颜色",min:0,max:1,value:.5}).on("change",(n=>{const t=x;G(),T[t(265)](P,n[t(281)])}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[x(256)](D,"hidden",{label:"是否后处理"}),U[x(256)](D,x(303),{picker:x(264),x:{min:0,max:1},y:{min:0,max:1}}).on(x(321),(n=>{const t=x;N[0]=D[t(303)].x,N[1]=D[t(303)].y,G()})),U.addBinding(D,x(300),{picker:x(264),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(321),(n=>{const t=x;N[5]=D[t(300)].x,N[6]=D[t(300)].y,G()})),U[x(256)](D,"offset_left_bottom",{picker:x(264),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(321),(n=>{const t=x;N[10]=D.offset_left_bottom.x,N[11]=D[t(322)].y,G()})),U[x(256)](D,"offset_left_top",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(321),(n=>{const t=x;N[15]=D[t(309)].x,N[16]=D[t(309)].y,G()})),c((()=>{M()}));const M=function(){const t=x;E=document[t(275)](t(282)),E.width=window.innerWidth,E[t(237)]=window[t(258)],T=E[t(230)](t(314)),T&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=H(e,o),b=n(T,m,d),I=T[t(319)](b,t(280)),h=T[t(319)](b,t(317)),w=T[t(319)](b,t(277)),C=j(document[t(245)](t(297)))}(),G(),T[t(269)](T.BLEND),T[t(313)](T[t(226)],T[t(259)]),Y())};function Y(){const n=x;T[n(233)](T[n(278)],v),T[n(273)](L,S,B,1),T[n(223)](T[n(312)]),function(){const n=x;T[n(276)](b),T.bindBuffer(T[n(253)],A);const r=t[n(318)][n(308)]();e(r,0,E[n(271)],E[n(237)],0,.1,100),T[n(254)](I,!1,r);const i=t[n(318)][n(308)]();o[n(239)](i,[0,0,1],[0,0,0],[0,1,0]),T[n(254)](h,!1,i),O(C,600,600),O(C,400,400)}(),T.bindFramebuffer(T[n(278)],null),D[n(251)]&&(T.clear(T[n(312)]),T.clearColor(0,0,1,1),T[n(242)](T.ARRAY_BUFFER,R),T[n(276)](y),T[n(246)](T[n(274)],F)),T.drawElements(T.TRIANGLES,6,T[n(244)],0),requestAnimationFrame(Y)}function O(n,e,o){const r=x;let i=t[r(318)][r(308)]();t[r(318)][r(257)](i,i,[e,o,0]),t[r(318)][r(267)](i,i,[250,250,0]),T[r(254)](w,!1,i),T.bindTexture(T[r(274)],n),T.drawElements(T.TRIANGLES,6,T.UNSIGNED_BYTE,0)}function G(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);R=H(N,e),y=n(T,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=T.getUniformLocation(y,t(307)),T[t(319)](y,t(289)),function(){const n=x;F=j(E),v=T[n(261)](),T[n(233)](T[n(278)],v),T[n(268)](T[n(278)],T[n(284)],T[n(274)],F,0),T.bindFramebuffer(T[n(278)],null)}()}function j(n){const t=x,e=T[t(225)]();return T[t(246)](T[t(274)],e),n instanceof HTMLImageElement?T.texImage2D(T.TEXTURE_2D,0,T[t(248)],T[t(248)],T[t(244)],n):T[t(283)](T[t(274)],0,T[t(248)],n.width,n[t(237)],0,T[t(248)],T.UNSIGNED_BYTE,null),T[t(241)](T[t(274)],T[t(294)],T[t(288)]),T[t(241)](T[t(274)],T[t(298)],T[t(288)]),T[t(241)](T[t(274)],T[t(328)],T[t(327)]),T[t(241)](T[t(274)],T[t(240)],T[t(327)]),e}function H(n,t){const e=x,o=T[e(292)]();T[e(242)](T[e(253)],o),T[e(228)](T[e(253)],n,T.STATIC_DRAW);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(291)];T[e(287)](0,3,T.FLOAT,!1,r,0),T[e(305)](0),T.vertexAttribPointer(1,2,T[e(324)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),T.enableVertexAttribArray(1);const i=T[e(292)]();return T[e(242)](T[e(316)],i),T[e(228)](T[e(316)],t,T[e(249)]),T[e(242)](T[e(253)],null),o}return(n,t)=>{const e=x;return s(),u(e(262),p,[f("img",{id:e(297),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(255)}},null,8,g)])}}});function A(n){function t(n){const e=T;if("string"==typeof n)return function(n){}.constructor(e(236))[e(306)](e(229));1!==(""+n/n)[e(232)]||n%20==0?function(){return!0}.constructor(e(315)+e(243))[e(250)]("action"):function(){return!1}[e(263)](e(315)+e(243))[e(306)](e(299)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function R(){const n=["scale","framebufferTexture2D","enable","table","width","return (function() ","clearColor","TEXTURE_2D","querySelector","useProgram","uModel","FRAMEBUFFER","exception","uProjection","value","#canvaswebgl","texImage2D","COLOR_ATTACHMENT0","init","787144xWMQRp","vertexAttribPointer","NEAREST","color","6tlRgul","BYTES_PER_ELEMENT","createBuffer","toString","TEXTURE_MIN_FILTER","44pHyEXQ","addBlade","logo-texture","TEXTURE_MAG_FILTER","stateObject","offset_right_bottom","slider","log","offset_right_top","console","enableVertexAttribArray","apply","mixParam","create","offset_left_top","33LHnqiv","error","COLOR_BUFFER_BIT","blendFunc","webgl","debu","ELEMENT_ARRAY_BUFFER","uView","mat4","getUniformLocation",'{}.constructor("return this")( )',"change","offset_left_bottom","function *\\( *\\)","FLOAT","trace","46754IozRXm","CLAMP_TO_EDGE","TEXTURE_WRAP_S","canvaswebgl","test","clear","10fWJRvQ","createTexture","SRC_ALPHA","2340024UMhHTn","bufferData","counter","getContext","76069GEjaIO","length","bindFramebuffer","3133806LVYNBR","bind","while (true) {}","height","3350500dGnTOa","lookAt","TEXTURE_WRAP_T","texParameteri","bindBuffer","gger","UNSIGNED_BYTE","getElementById","bindTexture","3648951bYvSQY","RGBA","STATIC_DRAW","call","hidden","warn","ARRAY_BUFFER","uniformMatrix4fv","none","addBinding","translate","innerHeight","ONE_MINUS_SRC_ALPHA","prototype","createFramebuffer","canvas","constructor","inline","uniform1f","520eYLHuM"];return(R=function(){return n})()}export{b as default};

import{m as e,e as o,o as a}from"./@tresjs.zc7faK4J1743660816268.js";import{U as s,h as t}from"./three-tile.jByjiGER1743660816268.js";import{T as n}from"./@tweenjs.l8nCRm4N1743660816268.js";import{d as r,b as l,w as i,o as p,H as m,N as u,u as c,j as f,F as v,r as g,e as j,g as d,m as y,aj as h,ak as T}from"./@vue.B5PFBfKs1743660816268.js";import{a as _,c as w,i as b}from"./informationDiv.1CFxbEEa1743660816268.js";import{b as D}from"./three.2wx8FU0g1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";/* empty css                                                                                    */import"./@fesjs.9AUNBPBQ1743660816268.js";import"./vue-router.K4ys0Z-O1743660816268.js";import"./lodash-es.IJc9G_SW1743660816268.js";import"./@qlin.o0hjOMCg1743660816268.js";import"./pinia.0dYyFDku1743660816268.js";import"./@floating-ui.HzHndBae1743660816268.js";import"./@juggle.4EyLec-41743660816268.js";const x=r({__name:"flyTo",props:{map:{}},setup(a,{expose:s}){const t=a,{camera:r,controls:l}=e();let i=[];const{onBeforeLoop:p}=o();return p((()=>{i&&i[0]?.update()})),s({flyToGeo:(e,o)=>{const a=e=>t.map.localToWorld(t.map.geo2pos(e));((e,o)=>{l.value&&l.value.target.copy(o);const a=r.value.position;i[0]=new n(a).to(e).start()})(a(e),a(o))},goToGeo:(e,o)=>{const a=t.map.localToWorld(t.map.geo2pos(o)),s=t.map.localToWorld(t.map.geo2pos(e));r.value.position.copy(s),l.value.target.copy(a),l.value.dispatchEvent({type:"change"})}}),(e,o)=>null}}),k=["object"],L=r({__name:"mapBoxShow",setup(o){const a=new s({imgSource:[new t.GDSource({style:"6"}),new t.GDSource({style:"8"})],lon0:90,minLevel:2,maxLevel:20});a.rotateX(-Math.PI/2);const n=new D(110,30,0),r=new D(110,0,1e4),g=a.localToWorld(a.geo2pos(n)),j=a.localToWorld(a.geo2pos(r)),d=l(),{camera:y,controls:h,scene:T,renderer:b}=e();y.value&&y.value.position.copy(j),i((()=>h.value),(e=>{e&&(e.target.copy(g),w(e,y.value,T.value))})),i((()=>d.value),(e=>{e&&e.target.position.copy(g)}));const L=l();return i((()=>L.value),(e=>{if(e){const o=new D(118.724693,32.00741,9.655599),a=new D(118.724419,32.010354,0);setTimeout((()=>{e.flyToGeo(o,a)}),500)}})),_(y.value,b.value.domElement,a),(e,o)=>(p(),m(v,null,[u("TresDirectionalLight",{ref_key:"tdLight",ref:d,position:[0,2e3,1e3],intensity:1},null,512),u("primitive",{object:c(a)},null,8,k),f(x,{map:c(a),ref_key:"flyToRef",ref:L},null,8,["map"])],64))}}),S=r({__name:"threeTileEx",setup(e){const o=g({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=g({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,minDistance:.1,maxDistance:3e4,maxPolarAngle:1.2,dampingFactor:.035,keyPanSpeed:5});return(e,t)=>{const n=j("TresCanvas");return p(),m(v,null,[f(n,y(o,{"window-size":""}),{default:d((()=>[t[0]||(t[0]=u("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),f(c(a),h(T(s)),null,16),t[1]||(t[1]=u("TresAmbientLight",{intensity:1},null,-1)),f(L)])),_:1},16),f(b)],64)}}});export{S as default};

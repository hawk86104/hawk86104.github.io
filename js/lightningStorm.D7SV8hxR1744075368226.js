import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.BLxdqB941744075368226.js";import{e as i,I as s,K as e}from"./@tresjs.DYJWvbJh1744075368226.js";import{B as n,V as r,cF as a,an as o,a8 as h,b as u,at as c,A as l,l as m,C as d}from"./three.Cqu7jvck1744075368226.js";import{a as p}from"./simplex-noise.DjNkejFf1744075368226.js";import{d as g,a3 as f,H as y,o as b,u as x,r as S,j as v,f as w,m as P,F as I}from"./@vue.DK6ok9LJ1744075368226.js";import"./index.BdnxkXg_1744075368226.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.D2SxI6Qq1744075368226.js";import"./three-custom-shader-material.Dnty1Adq1744075368226.js";import"./buildingsCustomShaderMaterial.DyBo--wu1744075368226.js";import"./postprocessing.BQUpsS8o1744075368226.js";import"./@vueuse.3dpzNfMJ1744075368226.js";import"./all.three.CFZkxNVv1744075368226.js";import"./oimophysics.BBtHVm4j1744075368226.js";import"./reflectorDiffuse.B6uce8F71744075368226.js";import"./vite-plugin-qiankun.B06WoCqG1744075368226.js";import"./index.Di1ws_Vv1744075368226.js";import"./object-hash.DHf9ZeaO1744075368226.js";import"./@amap.CGUF9xH41744075368226.js";import"./jszip.DBEZcNAn1744075368226.js";import"./three-stdlib.DdM8bY8B1744075368226.js";import"./whiteFloor.BwqCJp7N1744075368226.js";import"./@pmndrs.BnqYidBI1744075368226.js";const T=_;!function(){const t=_,i=A();for(;;)try{if(568401===-parseInt(t(227))/1+parseInt(t(197))/2+parseInt(t(156))/3*(-parseInt(t(173))/4)+-parseInt(t(283))/5*(parseInt(t(307))/6)+-parseInt(t(259))/7+parseInt(t(265))/8+parseInt(t(155))/9*(parseInt(t(187))/10))break;i.push(i.shift())}catch(s){i.push(i.shift())}}();const R=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function _(t,i){const s=A();return _=function(t,i){return s[t-=138]},_(t,i)}!function(){R(this,(function(){const t=_,i=new RegExp(t(146)),s=new RegExp(t(300),"i"),e=H(t(249));i[t(239)](e+"chain")&&s[t(239)](e+t(148))?H():e("0")}))()}();const V=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[_(186)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();V(void 0,(function(){const t=_;let i;try{i=Function(t(166)+t(297)+");")()}catch(n){i=window}const s=i[t(267)]=i[t(267)]||{},e=[t(258),t(216),t(195),t(151),"exception",t(234),t(175)];for(let r=0;r<e[t(189)];r++){const i=V.constructor.prototype.bind(V),n=e[r],a=s[n]||i;i[t(266)]=V[t(167)](V),i[t(162)]=a[t(162)].bind(a),s[n]=i}}))();class C extends n{constructor(t={}){const i=_;super(),this.isLightningStrike=!0,this[i(271)]="LightningStrike",this[i(249)](C[i(273)](t,t)),this[i(233)]()}static[T(222)](){const t=T,i=2053,s=[];for(let n=0;n<i;n++)s.push(Math[t(184)]());const e={currentSeed:0,random:function(){const n=t,r=s[e[n(218)]];return e[n(218)]=(e[n(218)]+1)%i,r},getSeed:function(){return e[t(218)]/i},setSeed:function(s){const n=t;e.currentSeed=Math[n(210)](s*i)%i}};return e}static[T(273)](t={},i={}){const s=T,e=function(s){return i===t?s:s[_(147)]()};return t[s(211)]=void 0!==i[s(211)]?e(i.sourceOffset):new r(0,100,0),t[s(262)]=void 0!==i[s(262)]?e(i.destOffset):new r(0,0,0),t[s(246)]=void 0!==i.timeScale?i[s(246)]:1,t[s(247)]=void 0!==i[s(247)]?i.roughness:.9,t[s(171)]=void 0!==i[s(171)]?i[s(171)]:.7,t.up0=void 0!==i[s(289)]?e(i.up0):new r(0,0,1),t[s(203)]=void 0!==i[s(203)]?e(i[s(203)]):new r(0,0,1),t.radius0=void 0!==i[s(178)]?i.radius0:1,t[s(204)]=void 0!==i[s(204)]?i[s(204)]:1,t[s(294)]=void 0!==i[s(294)]?i[s(294)]:.5,t[s(268)]=void 0!==i[s(268)]?i[s(268)]:.2,t[s(261)]=void 0!==i.minRadius?i[s(261)]:.2,t[s(229)]=void 0!==i[s(229)]?i[s(229)]:void 0===i[s(252)]||void 0===i[s(235)],t[s(252)]=i[s(252)],t[s(235)]=i[s(235)],t[s(240)]=void 0!==i[s(240)]?i[s(240)]:.1,t[s(255)]=void 0!==i[s(255)]?i[s(255)]:.9,t[s(198)]=void 0!==i[s(198)]?i.subrayPeriod:4,t[s(248)]=void 0!==i[s(248)]?i[s(248)]:.6,t.maxIterations=void 0!==i[s(309)]?i[s(309)]:9,t[s(221)]=void 0!==i[s(221)]&&i[s(221)],t[s(150)]=void 0!==i[s(150)]?i[s(150)]:5,t.maxSubrayRecursion=void 0!==i.maxSubrayRecursion?i.maxSubrayRecursion:3,t[s(225)]=void 0!==i[s(225)]?i[s(225)]:.6,t[s(164)]=void 0!==i[s(164)]&&i[s(164)],t[s(168)]=i.randomGenerator,t[s(163)]=i[s(163)],t[s(250)]=i[s(250)],t[s(275)]=i[s(275)],t}[T(292)](t){const i=T;this[i(221)]||(this.rayParameters[i(229)]||this.rayParameters[i(252)]<=t&&t<=this[i(231)][i(235)]?(this.updateMesh(t),t<this[i(277)][0][i(220)]?this[i(215)]=C[i(295)]:t>this[i(277)][0].beginVanishingTime?this.state=C[i(238)]:this[i(215)]=C[i(254)],this[i(179)]=!0):(this[i(179)]=!1,t<this[i(231)][i(252)]?this[i(215)]=C[i(214)]:this[i(215)]=C[i(202)]))}[T(249)](t){const i=T;this[i(231)]=t,this[i(309)]=void 0!==t[i(309)]?Math[i(210)](t.maxIterations):9,t[i(309)]=this[i(309)],this[i(221)]=void 0!==t[i(221)]&&t[i(221)],t[i(221)]=this[i(221)],this.ramification=void 0!==t[i(150)]?Math.floor(t[i(150)]):5,t[i(150)]=this.ramification,this.maxSubrayRecursion=void 0!==t[i(160)]?Math[i(210)](t[i(160)]):3,t[i(160)]=this.maxSubrayRecursion,this[i(225)]=void 0!==t[i(225)]?t.recursionProbability:.6,t.recursionProbability=this[i(225)],this[i(164)]=void 0!==t[i(164)]&&t.generateUVs,t[i(164)]=this[i(164)],void 0!==t[i(168)]?(this[i(168)]=t[i(168)],this[i(209)]=t[i(168)],void 0!==t[i(163)]&&this[i(209)].setSeed(t.noiseSeed)):(this[i(168)]=C[i(222)](),this.seedGenerator=Math),void 0!==t[i(250)]?this[i(250)]=t[i(250)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this[i(275)]=t[i(275)])),this.state=C[i(306)],this.maxSubrays=Math[i(207)](1+Math[i(236)](this[i(150)],Math[i(159)](0,this.maxSubrayRecursion-1))),t[i(153)]=this[i(153)],this.maxRaySegments=2*(1<<this.maxIterations),this.subrays=[];for(let s=0;s<this[i(153)];s++)this[i(277)].push(this[i(296)]());this[i(280)]=[];for(let s=0;s<this[i(241)];s++)this.raySegments.push(this[i(285)]());this.time=0,this[i(298)]=0,this[i(284)]=null,this[i(305)]=this[i(164)]?this[i(174)]:this[i(188)],this[i(304)]=0,this[i(142)]=null,this[i(140)]=0,this.isInitialSegment=!1,this[i(191)]=0,this[i(176)]=0,this[i(303)]=0,this[i(256)]=0,this[i(293)]=0,this[i(264)]=null,this[i(192)]=null,this[i(263)]=null,this.positionAttribute=null,this[i(287)]=null,this.simplexX=p(this[i(209)][i(184)]),this[i(217)]=p(this[i(209)][i(184)]),this[i(286)]=p(this[i(209)].random),this.forwards=new r,this[i(193)]=new r,this[i(213)]=new r,this.down=new r,this.middlePos=new r,this[i(182)]=new r,this[i(244)]=new r,this[i(152)]=new r,this[i(157)]=new r}createMesh(){const t=T,i=1<<this.maxIterations,s=3*(i+1)*this[t(153)],e=18*i*this[t(153)];this[t(264)]=new Float32Array(3*s),this[t(263)]=new Uint32Array(e),this[t(164)]&&(this[t(192)]=new Float32Array(2*s)),this[t(196)](0),this[t(206)](new a(this[t(263)],1)),this[t(200)]=new o(this[t(264)],3),this[t(270)](t(223),this[t(200)]),this[t(164)]&&(this[t(287)]=new o(new Float32Array(this[t(192)]),2),this.setAttribute("uv",this[t(287)])),!this[t(221)]&&(this[t(145)][t(253)]=h,this[t(200)][t(253)]=h,this.generateUVs&&(this[t(287)][t(253)]=h)),this.vertices=this.positionAttribute[t(269)],this[t(263)]=this[t(145)][t(269)],this[t(164)]&&(this[t(192)]=this[t(287)][t(269)])}[T(208)](t){const i=T;this[i(196)](t),this.drawRange[i(177)]=this[i(303)],this[i(145)][i(232)]=!0,this[i(200)][i(232)]=!0,this[i(164)]&&(this[i(287)][i(232)]=!0)}[T(196)](t){const i=T,s=this;this[i(176)]=0,this[i(303)]=0,this[i(256)]=0,this[i(293)]=0,this.fractalRay(t,(function(e){const n=i,r=s[n(142)];t<r.birthTime||(this[n(231)].isEternal&&0==s[n(142)][n(278)]?(s.createPrism(e),s[n(250)](e,s)):t<r[n(220)]?s[n(298)]>=e.fraction0*r[n(240)]&&(s.createPrism(e),s.onDecideSubrayCreation(e,s)):t<r.beginVanishingTime?(s[n(199)](e),s[n(250)](e,s)):(s[n(298)]<=r.vanishingTimeFactor+e[n(299)]*(1-r[n(255)])&&s.createPrism(e),s[n(250)](e,s)))}))}[T(290)](){return this.subrays[this.numSubrays++]}[T(181)](t,i){const s=T;t.pos0[s(212)](i.sourceOffset),t[s(165)][s(212)](i[s(262)]),t[s(289)][s(212)](i[s(289)]),t.up1.copy(i[s(203)]),t[s(178)]=i[s(178)],t[s(204)]=i[s(204)],t[s(252)]=i[s(252)],t[s(235)]=i[s(235)],t[s(246)]=i[s(246)],t[s(247)]=i[s(247)],t[s(171)]=i.straightness,t[s(240)]=i[s(240)],t[s(255)]=i[s(255)],t[s(309)]=this[s(309)],t[s(201)]=void 0!==i[s(163)]?i.noiseSeed:0,t[s(278)]=0}fractalRay(t,i){const s=T;this[s(274)]=t,this[s(284)]=i,this[s(304)]=0,this[s(181)](this[s(290)](),this[s(231)]);for(let e=0;e<this[s(304)];e++){const i=this.subrays[e];this[s(142)]=i,this[s(168)][s(180)](i[s(201)]),i[s(220)]=u[s(302)](i[s(252)],i[s(235)],i[s(240)]),i[s(219)]=u[s(302)](i[s(235)],i[s(252)],1-i[s(255)]);const n=this[s(168)][s(184)];i.linPos0.set(n(),n(),n())[s(205)](1e3),i[s(172)][s(138)](n(),n(),n())[s(205)](1e3),this.timeFraction=(t-i[s(252)])/(i[s(235)]-i.birthTime),this[s(140)]=0,this[s(230)]=!0;const r=this.getNewSegment();r[s(161)]=0,r[s(257)][s(212)](i[s(257)]),r[s(165)][s(212)](i[s(165)]),r[s(243)][s(212)](i[s(243)]),r[s(172)].copy(i.linPos1),r[s(289)][s(212)](i.up0),r.up1.copy(i.up1),r[s(178)]=i.radius0,r[s(204)]=i.radius1,r.fraction0=0,r[s(299)]=1,r[s(260)]=1-i.straightness,this[s(191)]=this[s(150)]*Math[s(236)](this[s(225)],i.recursion)/(1<<i.maxIterations),this[s(237)](r)}this[s(284)]=null,this[s(142)]=null}[T(237)](t){const i=T;if(t[i(161)]>=this[i(142)][i(309)])return void this[i(284)](t);this.forwards.subVectors(t[i(165)],t.pos0);let s=this[i(272)].length();s<1e-6&&(this.forwards.set(0,0,.01),s=this.forwards.length());const e=.5*(t[i(178)]+t[i(204)]),n=.5*(t.fraction0+t[i(299)]),r=this[i(274)]*this[i(142)][i(246)]*Math[i(236)](2,t[i(161)]);this.middlePos[i(190)](t[i(257)],t[i(165)],.5),this[i(182)][i(190)](t[i(243)],t[i(172)],.5);const a=this[i(182)];this[i(244)][i(138)](this[i(154)](a.x,a.y,a.z,r),this[i(217)](a.x,a.y,a.z,r),this[i(286)](a.x,a.y,a.z,r)),this.newPos.multiplyScalar(t[i(260)]*s),this[i(244)][i(291)](this.middlePos);const o=this[i(242)]();o[i(257)][i(212)](t[i(257)]),o[i(165)][i(212)](this.newPos),o[i(243)][i(212)](t[i(243)]),o[i(172)].copy(this[i(182)]),o[i(289)][i(212)](t[i(289)]),o.up1[i(212)](t.up1),o.radius0=t[i(178)],o[i(204)]=e,o[i(224)]=t[i(224)],o[i(299)]=n,o[i(260)]=t[i(260)]*this[i(142)][i(247)],o[i(161)]=t[i(161)]+1;const h=this[i(242)]();h.pos0[i(212)](this[i(244)]),h[i(165)].copy(t[i(165)]),h[i(243)].copy(this[i(182)]),h[i(172)][i(212)](t[i(172)]),this[i(157)][i(183)](t.up0,this[i(272)][i(143)]()),h[i(289)][i(183)](this.forwards,this[i(157)])[i(143)](),h[i(203)][i(212)](t[i(203)]),h.radius0=e,h[i(204)]=t[i(204)],h[i(224)]=n,h[i(299)]=t.fraction1,h.positionVariationFactor=t[i(260)]*this[i(142)][i(247)],h[i(161)]=t[i(161)]+1,this[i(237)](o),this[i(237)](h)}createPrism(t){const i=T;this[i(193)][i(251)](t[i(165)],t[i(257)])[i(143)](),this[i(230)]&&(this[i(305)](t[i(257)],t[i(289)],this[i(193)],t[i(178)],0),this[i(230)]=!1),this[i(305)](t[i(165)],t.up0,this[i(193)],t[i(204)],t.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(t,i,s,e){const n=T;this[n(213)][n(183)](i,s)[n(205)](e*C[n(194)]),this.down[n(212)](i)[n(205)](-e*C[n(279)]);const r=this[n(152)],a=this[n(264)];r[n(212)](t)[n(185)](this[n(213)]).add(this.down),a[this[n(256)]++]=r.x,a[this[n(256)]++]=r.y,a[this[n(256)]++]=r.z,r[n(212)](t)[n(291)](this.side)[n(291)](this[n(139)]),a[this.currentCoordinate++]=r.x,a[this[n(256)]++]=r.y,a[this[n(256)]++]=r.z,r[n(212)](i)[n(205)](e)[n(291)](t),a[this[n(256)]++]=r.x,a[this[n(256)]++]=r.y,a[this[n(256)]++]=r.z,this[n(176)]+=3}[T(174)](t,i,s,e,n){const r=T;this[r(213)].crossVectors(i,s).multiplyScalar(e*C.COS30DEG),this[r(139)].copy(i)[r(205)](-e*C[r(279)]);const a=this[r(152)],o=this[r(264)],h=this[r(192)];a[r(212)](t).sub(this[r(213)])[r(291)](this[r(139)]),o[this[r(256)]++]=a.x,o[this[r(256)]++]=a.y,o[this.currentCoordinate++]=a.z,h[this[r(293)]++]=n,h[this.currentUVCoordinate++]=0,a[r(212)](t)[r(291)](this[r(213)])[r(291)](this[r(139)]),o[this[r(256)]++]=a.x,o[this[r(256)]++]=a.y,o[this[r(256)]++]=a.z,h[this.currentUVCoordinate++]=n,h[this.currentUVCoordinate++]=.5,a[r(212)](i).multiplyScalar(e).add(t),o[this[r(256)]++]=a.x,o[this[r(256)]++]=a.y,o[this[r(256)]++]=a.z,h[this[r(293)]++]=n,h[this[r(293)]++]=1,this[r(176)]+=3}[T(226)](t){const i=T,s=this[i(263)];t=this.currentVertex-6,s[this[i(303)]++]=t+1,s[this[i(303)]++]=t+2,s[this[i(303)]++]=t+5,s[this[i(303)]++]=t+1,s[this[i(303)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(303)]++]=t+0,s[this[i(303)]++]=t+1,s[this[i(303)]++]=t+4,s[this[i(303)]++]=t+0,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+0,s[this[i(303)]++]=t+3,s[this[i(303)]++]=t+2,s[this[i(303)]++]=t+3,s[this[i(303)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=T,i=this[t(168)][t(184)];this.onDecideSubrayCreation=function(s,e){const n=t,r=e[n(142)],a=e[n(231)][n(198)],o=e[n(231)][n(248)],h=e[n(231)][n(229)]&&0==r.recursion?-i()*a:u.lerp(r[n(252)],r[n(220)],s[n(224)])-i()*a,c=e.time-h,l=Math[n(210)](c/a),m=i()*(l+1);let d=0;if(c%a<=o*a&&(d=e[n(191)]),r[n(278)]<e[n(160)]&&e[n(304)]<e.maxSubrays&&i()<d){const t=e[n(290)](),u=e.randomGenerator[n(141)]();t.seed=m,e[n(168)].setSeed(m),t.recursion=r[n(278)]+1,t[n(309)]=Math[n(159)](1,r.maxIterations-1),t[n(243)][n(138)](i(),i(),i())[n(205)](1e3),t[n(172)][n(138)](i(),i(),i())[n(205)](1e3),t[n(289)][n(212)](r[n(289)]),t[n(203)][n(212)](r[n(203)]),t.radius0=s[n(178)]*e[n(231)].radius0Factor,t[n(204)]=Math[n(169)](e[n(231)][n(261)],s[n(204)]*e.rayParameters[n(268)]),t[n(252)]=h+l*a,t[n(235)]=t[n(252)]+a*o,!e[n(231)][n(229)]&&0==r[n(278)]&&(t.birthTime=Math[n(159)](t[n(252)],r[n(252)]),t[n(235)]=Math[n(169)](t.deathTime,r[n(235)])),t.timeScale=2*r[n(246)],t[n(247)]=r.roughness,t[n(171)]=r[n(171)],t.propagationTimeFactor=r[n(240)],t[n(255)]=r[n(255)],e[n(275)](s,r,t,e),e[n(168)][n(180)](u)}};const s=new r,e=new r,n=new r,a=new r;this[t(275)]=function(i,s,e,n){n[t(281)](i,s,e,.5,.6,.2)},this[t(288)]=function(r,o,h,u,c,l){const m=t;h.pos0[m(212)](r[m(257)]),s[m(251)](o.pos1,o.pos0),e[m(212)](s).normalize(),s.multiplyScalar(r[m(224)]+(1-r[m(224)])*(i()*u));const d=s[m(189)]();n[m(183)](o[m(289)],e);const p=2*Math.PI*i();n[m(205)](Math.cos(p)),a[m(212)](o[m(289)])[m(205)](Math[m(158)](p)),h[m(165)][m(212)](n)[m(291)](a)[m(205)](d*c*(l+i()*(1-l))).add(s)[m(291)](o[m(257)])},this[t(281)]=function(r,o,h,u,c,l){const m=t;h[m(257)].copy(r[m(257)]),s.subVectors(o[m(165)],o[m(257)]),e[m(212)](s).normalize(),s[m(205)](r[m(224)]+(1-r[m(224)])*((2*i()-1)*u));const d=s[m(189)]();n[m(183)](o.up0,e);const p=2*Math.PI*i();n[m(205)](Math[m(301)](p)),a[m(212)](o[m(289)])[m(205)](Math[m(158)](p)),h[m(165)][m(212)](n).add(a).multiplyScalar(d*c*(l+i()*(1-l))).add(s).add(o[m(257)])}}[T(296)](){return{seed:0,maxIterations:0,recursion:0,pos0:new r,pos1:new r,linPos0:new r,linPos1:new r,up0:new r,up1:new r,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(285)](){return{iteration:0,pos0:new r,pos1:new r,linPos0:new r,linPos1:new r,up0:new r,up1:new r,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=T;return this[t(280)][this[t(140)]++]}[T(212)](t){const i=T;return super[i(212)](t),this[i(249)](C.copyParameters({},t.rayParameters)),this}[T(147)](){const t=T;return new(this[t(170)])(C[t(273)]({},this[t(231)]))}}function A(){const t=["setSeed","initSubray","middleLinPos","crossVectors","random","sub","apply","4383030emfgXX","createTriangleVerticesWithoutUVs","length","lerpVectors","subrayProbability","uvs","forwardsFill","COS30DEG","info","fillMesh","1200678fUuAiE","subrayPeriod","createPrism","positionAttribute","seed","RAY_EXTINGUISHED","up1","radius1","multiplyScalar","setIndex","ceil","updateMesh","seedGenerator","floor","sourceOffset","copy","side","RAY_UNBORN","state","warn","simplexY","currentSeed","beginVanishingTime","endPropagationTime","isStatic","createRandomGenerator","position","fraction0","recursionProbability","createPrismFaces","433589FgASfa","call","isEternal","isInitialSegment","rayParameters","needsUpdate","createMesh","table","deathTime","pow","fractalRayRecursive","RAY_VANISHING","test","propagationTimeFactor","maxRaySegments","getNewSegment","linPos0","newPos","counter","timeScale","roughness","subrayDutyCycle","init","onDecideSubrayCreation","subVectors","birthTime","usage","RAY_STEADY","vanishingTimeFactor","currentCoordinate","pos0","log","35644lZVrXp","positionVariationFactor","minRadius","destOffset","indices","vertices","7076376IHvQiy","__proto__","console","radius1Factor","array","setAttribute","type","forwards","copyParameters","time","onSubrayCreation","gger","subrays","recursion","SIN30DEG","raySegments","subrayCylinderPosition","debu","1447045Cciigw","currentSegmentCallback","createSegment","simplexZ","uvsAttribute","subrayConePosition","up0","addNewSubray","add","update","currentUVCoordinate","radius0Factor","RAY_PROPAGATING","createSubray",'{}.constructor("return this")( )',"timeFraction","fraction1","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","cos","lerp","currentIndex","numSubrays","currentCreateTriangleVertices","RAY_INITIALIZED","6TuzaEX","while (true) {}","maxIterations","set","down","currentSegmentIndex","getSeed","currentSubray","normalize","string","index","function *\\( *\\)","clone","input","stateObject","ramification","error","vPos","maxSubrays","simplexX","18VcIpQZ","9051NUCfhr","cross1","sin","max","maxSubrayRecursion","iteration","toString","noiseSeed","generateUVs","pos1","return (function() ","bind","randomGenerator","min","constructor","straightness","linPos1","1412HeJGyh","createTriangleVerticesWithUVs","trace","currentVertex","count","radius0","visible"];return(A=function(){return t})()}function H(t){function i(t){const s=_;if(typeof t===s(144))return function(t){}[s(170)](s(308))[s(186)](s(245));1!==(""+t/t)[s(189)]||t%20==0?function(){return!0}.constructor(s(282)+"gger")[s(228)]("action"):function(){return!1}.constructor(s(282)+s(276)).apply(s(149)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[T(306)]=0,C[T(214)]=1,C[T(295)]=2,C[T(254)]=3,C.RAY_VANISHING=4,C[T(202)]=5,C[T(194)]=Math.cos(30*Math.PI/180),C[T(279)]=Math[T(158)](30*Math.PI/180);const j=O;!function(){const t=O,i=G();for(;;)try{if(126786===-parseInt(t(338))/1*(-parseInt(t(302))/2)+-parseInt(t(296))/3*(parseInt(t(345))/4)+parseInt(t(305))/5*(-parseInt(t(358))/6)+-parseInt(t(359))/7*(-parseInt(t(336))/8)+-parseInt(t(297))/9*(-parseInt(t(295))/10)+-parseInt(t(314))/11+parseInt(t(332))/12)break;i.push(i.shift())}catch(s){i.push(i.shift())}}();const F=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){F(this,(function(){const t=O,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(304),"i"),e=N(t(355));i[t(319)](e+t(285))&&s[t(319)](e+t(309))?N():e("0")}))()}();const z=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();z(void 0,(function(){const t=O,i=function(){const t=O;let i;try{i=Function(t(327)+t(316)+");")()}catch(s){i=window}return i}(),s=i[t(289)]=i[t(289)]||{},e=[t(303),t(317),t(315),"error",t(282),t(301),"trace"];for(let n=0;n<e[t(337)];n++){const i=z[t(353)][t(340)].bind(z),r=e[n],a=s[r]||i;i[t(333)]=z[t(291)](z),i[t(347)]=a[t(347)][t(291)](a),s[r]=i}}))();class D extends c{constructor(t={}){const i=O;super(),this[i(298)]=!0,this[i(321)]=t,t[i(357)]=void 0!==t.size?t[i(357)]:1e3,t[i(311)]=void 0!==t[i(311)]?t[i(311)]:80,t[i(307)]=void 0!==t[i(307)]?t.maxHeight:100,t[i(349)]=void 0!==t[i(349)]?t[i(349)]:1.1,t.maxLightnings=void 0!==t[i(290)]?t[i(290)]:3,t[i(294)]=void 0!==t[i(294)]?t[i(294)]:3,t.lightningMaxPeriod=void 0!==t[i(310)]?t[i(310)]:7,t[i(364)]=void 0!==t.lightningMinDuration?t[i(364)]:1,t.lightningMaxDuration=void 0!==t[i(362)]?t[i(362)]:2.5,this[i(328)]=C[i(351)](t[i(328)],t[i(328)]),this[i(328)][i(325)]=!1,this.lightningMaterial=void 0!==t[i(283)]?t[i(283)]:new l({color:11599871}),void 0!==t[i(318)]?this.onRayPosition=t[i(318)]:this[i(318)]=function(s,e){const n=i;e[n(342)]((Math[n(326)]()-.5)*t[n(357)],0,(Math[n(326)]()-.5)*t[n(357)]);const r=u[n(312)](t[n(311)],t[n(307)],Math[n(326)]());s[n(342)](t[n(349)]*(2*Math[n(326)]()-1),1,t.maxSlope*(2*Math.random()-1))[n(339)](r)[n(360)](e)},this[i(330)]=t[i(330)],this[i(322)]=!1,this[i(334)]=0,this[i(281)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(321)][i(290)];s++){const t=new C(C[i(351)]({},this.lightningParameters)),s=new m(t,this.lightningMaterial);this[i(287)][i(286)](s)}}[j(352)](t){const i=j;if(!this[i(322)]&&(this[i(334)]=this[i(350)](t)*Math[i(326)](),this.inited=!0),t>=this.nextLightningTime){const s=this[i(287)][i(299)]();if(s){const e=C.copyParameters(s[i(323)][i(329)],this[i(328)]);e[i(341)]=t,e[i(343)]=t+u[i(312)](this[i(321)][i(364)],this[i(321)][i(362)],Math[i(326)]()),this[i(318)](e[i(284)],e[i(320)]),e[i(354)]=Math.random(),this[i(360)](s),this[i(281)][i(286)](s)}this[i(334)]=this.getNextLightningTime(t)}let s=0,e=this[i(281)][i(337)];for(;s<e;){const n=this[i(281)][s],r=n[i(323)],a=r.state;r[i(352)](t),a===C.RAY_PROPAGATING&&r[i(361)]>a&&this[i(330)]&&this[i(330)](r),r[i(361)]===C[i(356)]?(this.lightningsMeshes[i(308)](this.lightningsMeshes[i(293)](n),1),this[i(287)][i(286)](n),this[i(292)](n),e--):s++}}getNextLightningTime(t){const i=j;return t+u.lerp(this[i(321)].lightningMinPeriod,this.stormParams[i(310)],Math.random())/(this[i(321)][i(290)]+1)}[j(346)](t,i){const s=j;return super.copy(t,i),this.stormParams[s(357)]=t.stormParams[s(357)],this[s(321)].minHeight=t[s(321)][s(311)],this[s(321)][s(307)]=t[s(321)].maxHeight,this.stormParams[s(349)]=t[s(321)][s(349)],this[s(321)][s(290)]=t[s(321)][s(290)],this[s(321)][s(294)]=t[s(321)][s(294)],this.stormParams[s(310)]=t[s(321)][s(310)],this.stormParams[s(364)]=t.stormParams[s(364)],this[s(321)].lightningMaxDuration=t[s(321)][s(362)],this[s(328)]=C[s(351)]({},t[s(328)]),this[s(283)]=t[s(321)].lightningMaterial,this.onLightningDown=t.onLightningDown,this}[j(306)](){const t=j;return new(this[t(353)])(this[t(321)])[t(346)](this)}}function N(t){function i(t){const s=O;if(typeof t===s(348))return function(t){}.constructor(s(363)).apply(s(288));1!==(""+t/t)[s(337)]||t%20==0?function(){return!0}.constructor("debu"+s(335))[s(324)](s(313)):function(){return!1}[s(353)](s(344)+s(335))[s(331)](s(300)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function O(t,i){const s=G();return O=function(t,i){return s[t-=281]},O(t,i)}function G(){const t=["console","maxLightnings","bind","remove","indexOf","lightningMinPeriod","10mofQyf","51MZiOxJ","357381HbtVtR","isLightningStorm","pop","stateObject","table","4lJjpny","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8825uGfzKc","clone","maxHeight","splice","input","lightningMaxPeriod","minHeight","lerp","action","1765973JMFVOe","info",'{}.constructor("return this")( )',"warn","onRayPosition","test","destOffset","stormParams","inited","geometry","call","isEternal","random","return (function() ","lightningParameters","rayParameters","onLightningDown","apply","5726484otvmOv","__proto__","nextLightningTime","gger","1155720xePkel","length","18121hTNRRF","multiplyScalar","prototype","birthTime","set","deathTime","debu","58748oatFgU","copy","toString","string","maxSlope","getNextLightningTime","copyParameters","update","constructor","noiseSeed","init","RAY_EXTINGUISHED","size","546oNxqDs","7tvQteZ","add","state","lightningMaxDuration","while (true) {}","lightningMinDuration","lightningsMeshes","exception","lightningMaterial","sourceOffset","chain","push","deadLightningsMeshes","counter"];return(G=function(){return t})()}const L=["object"],E=g({__name:"lightStorm",props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const s=t,e=new d(s.color),n=new l({color:e}),a=new r(0,-1,0);let o=0;const h=new r,u=new r,c={roughness:s.roughness,straightness:s.straightness,radius0:s.radius0,radius1:s.radius1,timeScale:s.timeScale,subrayPeriod:s.subrayPeriod,subrayDutyCycle:s.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,i,s,e){e.subrayConePosition(t,i,s,.6,.6,.5),o=e.rayParameters.sourceOffset.y,h.subVectors(s.pos1,e.rayParameters.sourceOffset);const n=a.dot(h);u.copy(a).multiplyScalar(n),h.sub(u);const r=n/o>.5?o/n:1;u.multiplyScalar(r),h.add(u),s.pos1.addVectors(h,e.rayParameters.sourceOffset)}},m=new D({size:s.size,minHeight:s.minHeight,maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s.maxLightnings,lightningParameters:c,lightningMaterial:n});f((()=>{const t=m.stormParams;t.size=s.size,t.minHeight=s.minHeight,t.maxHeight=s.maxHeight,n.color.set(s.color),c.roughness=s.roughness,c.straightness=s.straightness,c.radius0=s.radius0,c.radius1=s.radius1,c.timeScale=s.timeScale}));const{onLoop:p}=i();return p((({elapsed:t})=>{m.update(t)})),(t,i)=>(b(),y("primitive",{object:x(m),renderOrder:9999},null,8,L))}}),U=g({__name:"lightningStorm",setup(i){const n=S({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:r,maxHeight:a,color:o,roughness:h,straightness:u,radius0:c,radius1:l,timeScale:m}=s({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,s)=>(b(),y(I,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[v(E,{minHeight:x(r).value,maxHeight:x(a).value,color:x(o).value,roughness:x(h).value,straightness:x(u).value,radius0:x(c).value,radius1:x(l).value,timeScale:x(m).value},null,8,["minHeight","maxHeight","color","roughness","straightness","radius0","radius1","timeScale"]),v(x(M),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(x(e))],64))}});export{U as default};

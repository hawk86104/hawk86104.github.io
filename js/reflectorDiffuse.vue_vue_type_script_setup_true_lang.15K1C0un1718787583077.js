import{bZ as t,a0 as n,C as e,j as r}from"./three.OZpCYxlY1718787583077.js";import{N as o}from"./@tresjs.yMGhEK7G1718787583077.js";import{R as c}from"./all.three.11YPfZz61718787583077.js";import{d as a,b as i,a3 as s,a2 as u,w as f,o as l,D as p,J as m,m as d,u as h}from"./@vue.CpOXM7bB1718787583077.js";function v(){const t=["warn","vertexShader","return (function() ","6780609FCazQr","21279370tsfSWs","constructor","354557mtywLC","fragmentShader","init","string","test","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","counter","exception","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","function *\\( *\\)","console","#include <emissivemap_fragment>","gger","470826GkSjtA","__proto__","while (true) {}","toString","prototype","bind","5CyOwUk","replace","1736850GGAGWQ",'{}.constructor("return this")( )',"1JPnZWx","apply","1902728GwniWr","length","8ScwKTk","void main() {","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","#include <project_vertex>","5799978OModPY","input","stateObject","chain","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace"];return(v=function(){return t})()}!function(t,n){const e=x,r=v();for(;;)try{if(489367===parseInt(e(437))/1*(parseInt(e(427))/2)+-parseInt(e(435))/3+parseInt(e(439))/4*(parseInt(e(433))/5)+-parseInt(e(445))/6+-parseInt(e(414))/7*(parseInt(e(441))/8)+-parseInt(e(411))/9+parseInt(e(412))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(438)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=v();return(x=function(t,n){return e[t-=408]})(t,n)}!function(){g(this,(function(){const t=x,n=new RegExp(t(423)),e=new RegExp(t(450),"i"),r=w(t(416));n[t(418)](r+t(448))&&e[t(418)](r+t(446))?w():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(438)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(410)+t(436)+");")()}catch(e){n=window}return n}(),e=n[t(424)]=n[t(424)]||{},r=["log",t(408),"info","error",t(421),"table",t(451)];for(let o=0;o<r[t(440)];o++){const n=y[t(413)][t(431)][t(432)](y),c=r[o],a=e[c]||n;n[t(428)]=y[t(432)](y),n[t(430)]=a.toString[t(432)](a),e[c]=n}}))();function w(t){function n(t){const e=x;if(typeof t===e(417))return function(t){}.constructor(e(429)).apply(e(420));1!==(""+t/t)[e(440)]||t%20==0?function(){return!0}[e(413)](e(449)+e(426)).call("action"):function(){return!1}[e(413)](e(449)+e(426))[e(438)](e(447)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=z;!function(t,n){const e=z,r=C();for(;;)try{if(411831===parseInt(e(229))/1*(-parseInt(e(238))/2)+parseInt(e(201))/3*(parseInt(e(235))/4)+parseInt(e(203))/5*(-parseInt(e(218))/6)+-parseInt(e(205))/7+parseInt(e(200))/8+-parseInt(e(182))/9*(parseInt(e(232))/10)+parseInt(e(209))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[z(178)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(){const t=["rotation-x","10855wjotXs","table","1438605kwOVbs","update","exception","color","24133494GppPWY","input","renderTargetUniform","object","showGridHelper","attributes","error","prototype","test","2130kRPCzL","onBeforeCompile","gger","aoMap","tmRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","uniforms","TresPlaneGeometry","console","log","623111GcWJuj","mixStrength","mirror","76810eidtmX","__proto__","set","2596uJHvvp","string","action","2VxVRAy","init","tmsmRef","toString","apply","bind","counter","value","639jeQsNj","while (true) {}","textureMatrix","assign","length","reflectMap","wrapT","add","debu","info","function *\\( *\\)","wrapS","tpgRef","constructor","onBeforeRender","trace","TresGroup","return (function() ","1140384FBXaJW","1017YePrPI"];return(C=function(){return t})()}!function(){b(this,(function(){const t=z,n=new RegExp(t(192)),e=new RegExp(t(223),"i"),r=G(t(239));n[t(217)](r+t(224))&&e[t(217)](r+t(210))?G():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=z;let n;try{n=Function(t(199)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(227)]=n[t(227)]||{},r=[t(228),"warn",t(191),t(215),t(207),t(204),t(197)];for(let c=0;c<r[t(186)];c++){const n=I[t(195)][t(216)].bind(I),o=r[c],a=e[o]||n;n[t(233)]=I[t(179)](I),n[t(177)]=a[t(177)][t(179)](a),e[o]=n}}))();const j=[_(202)],M=[_(212)],S=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const v=_;let g,y;const w=a,b=new t(9.5,10),C=i(),I=i(),S=i(),z=new c,G={mirror:{value:w[v(231)]},mixStrength:{value:w[v(230)]}},R=([g,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,y(),g);for(var T=0;T<3;T++)R[T][v(193)]=n,R[T][v(188)]=n,R[T].repeat[v(234)](16,16);const k={color:new e("#444"),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},E=t=>{const n=v;t[n(225)][n(187)]=z[n(211)],t.uniforms[n(184)]=z.textureMatrixUniform,t[n(225)]=Object[n(185)](t[n(225)],G),(t=>{const n=x;t[n(409)]=t.vertexShader[n(434)](n(442),n(419)),t[n(409)]=t[n(409)].replace(n(444),n(422))})(t),(t=>{const n=x;t.fragmentShader=t.fragmentShader.replace(n(442),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(415)]=t[n(415)][n(434)](n(425),n(443))})(t)};return u((()=>{const t=v;C[t(181)]&&(C.value[t(214)].uv1=C[t(181)].attributes.uv),S[t(181)]&&(S[t(181)][t(221)].channel=1,S[t(181)][t(219)]=E),I[t(181)]&&(I[t(181)][t(189)](z),I[t(181)][t(196)]=(n,e,r)=>{z[t(206)](n,e,r)}),w[t(208)]&&S[t(181)]&&(S[t(181)][t(208)]=new e(w[t(208)]))})),f((()=>w[v(213)]),(t=>{b.visible=t})),(t,n)=>{const e=v;return l(),p(e(198),null,[m("TresMesh",{ref_key:e(222),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(226),{ref_key:e(194),ref:C,args:[10,10]},null,512),m("TresMeshStandardMaterial",d({ref_key:e(240),ref:S},k),null,16)],8,j),m("primitive",{object:h(b)},null,8,M)])}}});function z(t,n){const e=C();return(z=function(t,n){return e[t-=177]})(t,n)}function G(t){function n(t){const e=z;if(typeof t===e(236))return function(t){}[e(195)](e(183)).apply(e(180));1!==(""+t/t).length||t%20==0?function(){return!0}[e(195)](e(190)+e(220)).call(e(237)):function(){return!1}[e(195)](e(190)+"gger")[e(178)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

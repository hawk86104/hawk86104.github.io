import{z as n,U as t}from"./@tresjs.2zzrlbpQ1728446741233.js";import{d as o,a4 as e,r,Y as i,a3 as a,o as u,E as c,L as s,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.JNsx1iN61728446741233.js";import{aN as v,a0 as m,C as y,M as x,ch as w,V as _}from"./three.GKtOCofD1728446741233.js";const M=T;function I(){const n=['{}.constructor("return this")( )',"toString","string","info","call","translate","3208541RyuETn","foremost","img","console","position","trace","6xmZYeG","color","586544pNIath","chain","init","geometry","#fff","constructor","prototype","33337ARjUTX","return (function() ","scale","sizeAttenuation","bind","warn","counter","test","buildingsMarkA","TresSpriteMaterial","tsRef","190683ecKkcc","value","length","exception","clone","238000QUlKna","while (true) {}","12948804LWfxyZ","offset","10MrJSij","error","__proto__","693568jnzqPV","table","TresSprite","log","99999","apply"];return(I=function(){return n})()}!function(n,t){const o=T,e=I();for(;;)try{if(273189===-parseInt(o(357))/1+-parseInt(o(380))/2+-parseInt(o(368))/3+-parseInt(o(350))/4*(parseInt(o(377))/5)+-parseInt(o(348))/6*(parseInt(o(342))/7)+parseInt(o(373))/8+parseInt(o(375))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[T(385)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){b(this,(function(){const n=T,t=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=j(n(352));t[n(364)](e+n(351))&&o[n(364)](e+"input")?j():e("0")}))()}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[T(385)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();A(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(358)+n(386)+");")()}catch(o){t=window}return t}(),o=t[n(345)]=t[n(345)]||{},e=[n(383),n(362),n(339),n(378),n(371),n(381),n(347)];for(let r=0;r<e[n(370)];r++){const t=A.constructor[n(356)][n(361)](A),i=e[r],a=o[i]||t;t[n(379)]=A[n(361)](A),t.toString=a[n(337)][n(361)](a),o[i]=t}}))();const R=["position",M(359)],P=["map"];function T(n,t){const o=I();return(T=function(n,t){return o[n-=337]})(n,t)}const F=o({__name:M(365),props:{color:{default:M(354)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(344)]}))),p=await p,d(),p),v=r({color:g[o(349)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(360)],toneMapped:!1,depthTest:!g[o(343)]}),m=i(null);return a((()=>{const n=o;m[n(369)]&&(m[n(369)][n(353)]=m[n(369)][n(353)][n(372)](),m[n(369)].geometry[n(341)](g.offset[0],g[n(376)][1],0))})),(n,t)=>{const e=o;return u(),c(e(382),{ref_key:e(367),ref:m,position:g[e(346)],scale:g[e(359)],renderOrder:e(384)},[s(e(366),l(v,{map:f(h)}),null,16,P)],8,R)}}});function j(n){function t(n){const o=T;if(typeof n===o(338))return function(n){}[o(355)](o(374))[o(385)](o(363));1!==(""+n/n)[o(370)]||n%20==0?function(){return!0}[o(355)]("debugger")[o(340)]("action"):function(){return!1}.constructor("debugger")[o(385)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const z=S;function S(n,t){const o=k();return(S=function(n,t){return o[n-=240]})(n,t)}function k(){const n=["while (true) {}","294180RphZZo","TresShaderMaterial","uRadius","ncolor","5439QbFGzi","uniforms","table","debu","warn","MeshRef","115993qnJPvb","radius","gger","log","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","position","value","344VtNzIy","console","info","TresCircleGeometry","toString","__proto__","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","test","stateObject","87227DtEtLl","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","followWidth","size","#ffff00","bind","function *\\( *\\)","150okbmWL","string","init","color","radraA","applyMatrix4","args","4528683sMgyUT","makeRotationX",'{}.constructor("return this")( )',"apply","constructor","1933592FhZwET","588196ZOBQMi","return (function() "];return(k=function(){return n})()}!function(n,t){const o=S,e=k();for(;;)try{if(157667===-parseInt(o(262))/1+parseInt(o(269))/2*(parseInt(o(256))/3)+-parseInt(o(249))/4+parseInt(o(252))/5+parseInt(o(286))/6*(parseInt(o(278))/7)+parseInt(o(248))/8+-parseInt(o(243))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[S(246)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){C(this,(function(){const n=S,t=new RegExp(n(285)),o=new RegExp(n(279),"i"),e=B(n(288));t[n(276)](e+"chain")&&o[n(276)](e+"input")?B():e("0")}))()}();const E=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[S(246)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();E(void 0,(function(){const n=S,t=function(){const n=S;let t;try{t=Function(n(250)+n(245)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(270)]||{},e=[n(265),n(260),n(271),"error","exception",n(258),"trace"];for(let r=0;r<e.length;r++){const t=E[n(247)].prototype[n(284)](E),i=e[r],a=o[i]||t;t[n(274)]=E[n(284)](E),t[n(273)]=a[n(273)][n(284)](a),o[i]=t}}))();const Z=[z(267)],W=[z(242)],L=o({__name:z(240),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:z(283)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=z,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l.value+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(275),fragmentShader:e(266),uniforms:{uSpeed:{value:r.speed},uRadius:{value:r[e(263)]},uTime:l,uFollowWidth:{value:r[e(281)]},ncolor:{value:new y(r.color)}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(244)](-Math.PI/180*90);f[o(268)][o(241)](n)}}));const _=p();return a((()=>{const n=e;r[n(289)]&&(w[n(257)][n(255)][n(268)]=new y(r[n(289)])),r[n(263)]&&(w[n(257)][n(254)][n(268)]=r[n(263)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return u(),c("TresMesh",{ref_key:o(261),ref:_,position:r.position},[s(o(272),{ref_key:"TresCircleGeometryRef",ref:f,args:[r[o(282)],1e3]},null,8,W),s(o(253),g(h(w)),null,16)],8,Z)}}});function B(n){function t(n){const o=S;if(typeof n===o(287))return function(n){}.constructor(o(251))[o(246)](o(280));1!==(""+n/n).length||n%20==0?function(){return!0}[o(247)]("debu"+o(264)).call("action"):function(){return!1}[o(247)](o(259)+o(264))[o(246)](o(277)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const O=U;!function(n,t){const o=U,e=K();for(;;)try{if(466152===-parseInt(o(377))/1*(-parseInt(o(340))/2)+parseInt(o(339))/3+-parseInt(o(330))/4*(-parseInt(o(356))/5)+-parseInt(o(336))/6+parseInt(o(334))/7+parseInt(o(331))/8+parseInt(o(359))/9*(-parseInt(o(351))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const G=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function U(n,t){const o=K();return(U=function(n,t){return o[n-=328]})(n,t)}!function(){G(this,(function(){const n=U,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(376),"i"),e=V(n(341));t[n(363)](e+"chain")&&o[n(363)](e+n(386))?V():e("0")}))()}();const $=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();$(void 0,(function(){const n=U,t=function(){const n=U;let t;try{t=Function("return (function() "+n(381)+");")()}catch(o){t=window}return t}(),o=t[n(335)]=t[n(335)]||{},e=[n(338),n(357),n(360),n(384),n(371),n(333),n(342)];for(let r=0;r<e[n(362)];r++){const t=$.constructor[n(345)][n(355)]($),i=e[r],a=o[i]||t;t[n(383)]=$[n(355)]($),t[n(369)]=a[n(369)].bind(a),o[i]=t}}))();const q=["position"],J=[O(347)];function K(){const n=["apply","table","1153369wKrvRW","console","1115490vMPUCO","uColor","log","2306721EKAyLL","435186jPtUAy","init","trace","radraB","MeshRef","prototype","opacity","args","period","TresTubeGeometryRef","boundingBox","7647050BEvxAe","updateMatrix","position","debu","bind","140945JCxAwu","warn","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","18CPqzhu","info","#ffff00","length","test","TresMesh","clone","string","applyMatrix4","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","toString","max","exception","scale","call","value","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3YLZLJu","constructor","TresShaderMaterial","copy",'{}.constructor("return this")( )',"makeScale","__proto__","error","uniforms","input","radius","action","color","4EdqyYT","4534680RRTQIt"];return(K=function(){return n})()}const Q=o({__name:O(343),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:O(361)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=O,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(329)],opacity:r[e(346)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(368),fragmentShader:e(358),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(329)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(374)].computeBoundingBox(),l.value=M[o(374)][o(350)][o(370)],f[o(374)]=M[o(374)].boundingBox.min,I=i[o(374)][o(372)][o(365)]())}));const b=p(new w(new _(0,0,0),new _(0,r.height,0)));a((()=>{const n=e;r[n(329)]&&(v[n(385)][n(337)].value=new y(r[n(329)]))}));const{onLoop:A}=t(),R={value:0};return A((({delta:n})=>{const t=e;R[t(374)]+=n;const o=(R.value%r.period/r[t(348)]*(r.maxRadius-r[t(387)])+r[t(387)])/r.radius,a=(new x)[t(382)](o,1,o);I&&(i[t(374)][t(372)][t(380)](I.clone()[t(367)](a)),i[t(374)][t(352)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return u(),c(o(364),{ref_key:o(344),ref:i,position:r[o(353)],renderOrder:2e3},[s("TresTubeGeometry",{ref_key:o(349),ref:M,args:[b[o(374)],20,r[o(387)],100,!1]},null,8,J),s(o(379),g(h(v)),null,16)],8,q)}}});function V(n){function t(n){const o=U;if(typeof n===o(366))return function(n){}[o(378)]("while (true) {}")[o(332)]("counter");1!==(""+n/n)[o(362)]||n%20==0?function(){return!0}[o(378)](o(354)+"gger")[o(373)](o(328)):function(){return!1}[o(378)](o(354)+o(375))[o(332)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{F as _,L as a,Q as b};

import{e as n,W as t,b as e,U as i}from"./@tresjs.AACxYGk_1736406294003.js";import{P as o}from"./tweakpane.yHWGBmom1736406294003.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.vfXujXM91736406294003.js";import{_ as s}from"./three.jaHX2_hY1736406294003.js";import{d as a,a4 as u,w as c,o as l,f,u as d,D as p,J as v,g as h,j as m,m as g,al as w,r as x,e as b}from"./@vue.yG49nQHr1736406294003.js";import"./@vueuse.d_orRt1V1736406294003.js";import"./all.three.PHlVv3xt1736406294003.js";import"./oimophysics.x0jH7fze1736406294003.js";const y=k;!function(n,t){const e=k,i=M();for(;;)try{if(122067===parseInt(e(226))/1*(-parseInt(e(246))/2)+parseInt(e(237))/3+-parseInt(e(238))/4+-parseInt(e(232))/5*(parseInt(e(231))/6)+parseInt(e(239))/7+parseInt(e(266))/8+parseInt(e(217))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[k(245)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){_(this,(function(){const n=k,t=new RegExp(n(265)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=D(n(255));t[n(254)](i+"chain")&&e.test(i+"input")?D():i("0")}))()}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[k(245)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(){const n=["3156vFZgiW","475112zsvFjY","1112559OzLetT","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","divisionScaleX","hasMaskTexture","division","action","apply","7798jJDKnd","hexGridMaterial","toString","bind","gridWeight",'{}.constructor("return this")( )',"waveFrequency","direction","test","init","stateObject","constructor","prototype","length","maskTexture","MeshPhongMaterial","while (true) {}","debu","exception","function *\\( *\\)","1052752XcNMqJ","1502667VuMIZY","wavePow","call","table","value","speed","isReversed","__proto__","baseMaterial","23OPOOcd","gger","time","side","trace","156plZENu","24620SSOINt","console","return (function() ","DoubleSide","raisedBottom"];return(M=function(){return n})()}I(void 0,(function(){const n=k,t=function(){const n=k;let t;try{t=Function(n(234)+n(251)+");")()}catch(e){t=window}return t}(),e=t[n(233)]=t[n(233)]||{},i=["log","warn","info","error",n(264),n(220),n(230)];for(let o=0;o<i.length;o++){const t=I.constructor[n(258)][n(249)](I),r=i[o],s=e[r]||t;t[n(224)]=I[n(249)](I),t.toString=s[n(248)][n(249)](s),e[r]=t}}))();const T=y(240);function k(n,t){const e=M();return(k=function(n,t){return e[n-=217]})(n,t)}const R=a({__name:y(247),props:{baseMaterial:{default:new(s[y(261)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=y;let r,a;const p=i,v={gridWeight:{value:p[o(250)]},raisedBottom:{value:p[o(236)]},waveFrequency:{value:p[o(252)]},wavePow:{value:p[o(218)]},direction:{value:p[o(253)]},isReversed:{value:p[o(223)]},hasMaskTexture:{value:p[o(242)]},maskTexture:{value:null},division:{value:p[o(243)]},divisionScaleX:{value:p[o(241)]},time:{value:0}};p.maskTexture&&(v[o(260)][o(221)]=([r,a]=u((()=>e([p[o(260)]]))),r=await r,a(),r)),c((()=>[p[o(250)],p.raisedBottom,p[o(252)],p[o(218)],p[o(243)],p.divisionScaleX,p[o(253)],p[o(223)],p[o(242)]]),(([n,t,e,i,r,s,a,u,c])=>{const l=o;v.gridWeight[l(221)]=n,v[l(236)].value=t,v.waveFrequency[l(221)]=e,v[l(218)][l(221)]=i,v[l(243)][l(221)]=r,v[l(241)][l(221)]=s,v[l(253)][l(221)]=a,v.isReversed[l(221)]=u,v[l(242)].value=c}));const{onLoop:h}=n();return h((({delta:n})=>{const t=o;v[t(228)].value+=n*p[t(222)]})),(n,e)=>{const r=o;return l(),f(d(t),{baseMaterial:i[r(225)],vertexShader:T,side:s[r(235)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[r(225),r(229),"fragmentShader"])}}});function D(n){function t(n){const e=k;if("string"==typeof n)return function(n){}[e(257)](e(262))[e(245)]("counter");1!==(""+n/n)[e(259)]||n%20==0?function(){return!0}[e(257)](e(263)+e(227))[e(219)](e(244)):function(){return!1}[e(257)](e(263)+e(227)).apply(e(256)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const S=j;!function(n,t){const e=j,i=B();for(;;)try{if(612479===parseInt(e(430))/1+parseInt(e(413))/2*(parseInt(e(429))/3)+-parseInt(e(438))/4*(-parseInt(e(425))/5)+parseInt(e(406))/6+parseInt(e(424))/7*(-parseInt(e(401))/8)+-parseInt(e(420))/9+parseInt(e(422))/10*(-parseInt(e(428))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const C=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function B(){const n=["string","baseMaterial","apply","324ARFfEz","constructor","gger","stateObject","info","7552FRwUFx","table","TresPlaneGeometry","bind","warn","775860BhcMri","rotation","TresMesh","test","prototype","counter","toString","534sdZgOh","$attrs","input","call","MeshBasicMaterial","exception","function *\\( *\\)","6967314rROBoC","error","10IDITdb","while (true) {}","917hnemWv","3485IuMGZP","length",'{}.constructor("return this")( )',"3035703RqFwNU","9312xUUzQU","771727tfAtZW","log","hexGridMesh","__proto__","action"];return(B=function(){return n})()}!function(){C(this,(function(){const n=j,t=new RegExp(n(419)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=Z("init");t.test(i+"chain")&&e[n(409)](i+n(415))?Z():i("0")}))()}();const F=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[j(437)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();F(void 0,(function(){const n=j;let t;try{t=Function("return (function() "+n(427)+");")()}catch(o){t=window}const e=t.console=t.console||{},i=[n(431),n(405),n(442),n(421),n(418),n(402),"trace"];for(let r=0;r<i[n(426)];r++){const t=F[n(439)][n(410)][n(404)](F),o=i[r],s=e[o]||t;t[n(433)]=F[n(404)](F),t[n(412)]=s[n(412)][n(404)](s),e[o]=t}}))();const P=[S(407)];function j(n,t){const e=B();return(j=function(n,t){return e[n-=401]})(n,t)}const z=a({__name:S(432),setup(n){const t=S,e=new(s[t(417)]);return(n,i)=>{const o=t;return l(),p(o(408),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=v(o(403),{args:[1,1]},null,-1)),(l(),f(w,null,{default:h((()=>[m(R,g({baseMaterial:d(e)},n[o(414)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(436)])])),_:1}))],8,P)}}});function Z(n){function t(n){const e=j;if(typeof n===e(435))return function(n){}[e(439)](e(423))[e(437)](e(411));1!==(""+n/n)[e(426)]||n%20==0?function(){return!0}.constructor("debu"+e(440))[e(416)](e(434)):function(){return!1}[e(439)]("debu"+e(440)).apply(e(441)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const A=W;function W(n,t){const e=E();return(W=function(n,t){return e[n-=287]})(n,t)}!function(n,t){const e=W,i=E();for(;;)try{if(842427===parseInt(e(315))/1*(-parseInt(e(334))/2)+-parseInt(e(291))/3+parseInt(e(332))/4+-parseInt(e(289))/5+parseInt(e(311))/6*(-parseInt(e(340))/7)+-parseInt(e(318))/8*(-parseInt(e(305))/9)+parseInt(e(306))/10*(parseInt(e(331))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const X=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[W(312)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){X(this,(function(){const n=W,t=new RegExp(n(339)),e=new RegExp(n(328),"i"),i=U(n(302));t.test(i+n(325))&&e[n(292)](i+n(314))?U():i("0")}))()}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[W(312)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function E(){const n=["2716870NfRldz","debu","2743317YaysrM","test","网格宽度","网格横向缩放","addBinding","网格整体缩放","info","#de62f2","toString","stateObject","speed","init","call","prototype","9TEuDuw","30nwthfu","constructor","#666666","return (function() ","while (true) {}","6qJDMsL","apply","exception","input","1QWClTZ","TresCanvas","wavePow","5003216EDZhpC","渐变强度","raisedBottom","division","table","console","__proto__","chain","waveFrequency","isReversed","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","方向类别","7676614dyRtze","2687608yQNhZK","gger","1059186UadATb","log","bind","hasMaskTexture","counter","function *\\( *\\)","3927651vjXtuU","string","图片纹理","hexGridGround"];return(E=function(){return n})()}q(void 0,(function(){const n=W,t=function(){const n=W;let t;try{t=Function(n(309)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(323)]=t[n(323)]||{},i=[n(335),"warn",n(297),n(329),n(313),n(322),"trace"];for(let o=0;o<i.length;o++){const t=q.constructor[n(304)][n(336)](q),r=i[o],s=e[r]||t;t[n(324)]=q[n(336)](q),t[n(299)]=s[n(299)][n(336)](s),e[r]=t}}))();const O=a({__name:A(288),setup(n){const t=A,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:t(298),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(288),expanded:!0});return a[t(295)](s,t(337),{label:t(287)}),a[t(295)](s,"color",{label:"颜色"}),a[t(295)](s,t(301),{label:"速度",min:-5,max:5,step:.1}),a[t(295)](s,"gridWeight",{label:t(293),min:.001,max:.5,step:.001}),a[t(295)](s,t(320),{label:"渐变宽度",min:.001,max:1,step:.001}),a.addBinding(s,t(326),{label:"分段",min:.001,max:1,step:.001}),a.addBinding(s,t(317),{label:t(319),min:1,max:30,step:.1}),a[t(295)](s,t(321),{label:t(296),min:.1,max:50,step:.1}),a[t(295)](s,"divisionScaleX",{label:t(294),min:.1,max:10,step:.1}),a[t(295)](s,t(327),{label:"颜色取反"}),a.addBinding(s,"direction",{label:t(330),min:3,max:6,step:1}),(n,o)=>{const a=t,u=b(a(316));return l(),f(u,{clearColor:a(308),"window-size":""},{default:h((()=>[o[0]||(o[0]=v("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),m(d(i),{enableDamping:"",autoRotate:""}),m(z,g(s,{scale:9}),null,16),(l(),f(w,null,{default:h((()=>[m(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function U(n){function t(n){const e=W;if(typeof n===e(341))return function(n){}[e(307)](e(310))[e(312)](e(338));1!==(""+n/n).length||n%20==0?function(){return!0}[e(307)](e(290)+"gger")[e(303)]("action"):function(){return!1}[e(307)](e(290)+e(333)).apply(e(300)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{O as default};

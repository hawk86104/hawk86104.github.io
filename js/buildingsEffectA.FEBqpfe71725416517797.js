import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.ss_nL2AI1725416517797.js";import{$ as o}from"./@tresjs.5lh7VmqZ1725416517797.js";import{C as e}from"./three-custom-shader-material.R9Qrt3ei1725416517797.js";import"./object-hash.UdqO8HjX1725416517797.js";import{a6 as r,C as i,cb as u,k as c,aW as s}from"./three.VTQVqxMx1725416517797.js";import"./@amap.LUDXTi4z1725416517797.js";import"./glsl-tokenizer.dGVPr_M11725416517797.js";import{d as a,a2 as l,w as f,o as p,E as d,u as m,a5 as v,r as g,f as h,g as y,j as C,m as w}from"./@vue._6MD2XyK1725416517797.js";import{P as _}from"./tweakpane.yHWGBmom1725416517797.js";import"./@vueuse.L-salR9N1725416517797.js";import"./glsl-token-string.7HmLwuvT1725416517797.js";import"./glsl-token-functions.fONiiOsX1725416517797.js";import"./jszip.7CKSmb6c1725416517797.js";const b=S;!function(t,n){const o=S,e=j();for(;;)try{if(220858===parseInt(o(242))/1+parseInt(o(289))/2+-parseInt(o(303))/3+-parseInt(o(281))/4*(-parseInt(o(264))/5)+parseInt(o(274))/6*(parseInt(o(272))/7)+parseInt(o(300))/8*(-parseInt(o(253))/9)+-parseInt(o(255))/10*(parseInt(o(250))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const x=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[S(259)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){x(this,(function(){const t=S,n=new RegExp(t(276)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=B("init");n[t(247)](e+t(291))&&o[t(247)](e+t(271))?B():e("0")}))()}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[S(259)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();I(void 0,(function(){const t=S,n=function(){const t=S;let n;try{n=Function(t(268)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n[t(258)]=n[t(258)]||{},e=[t(238),t(282),"info","error",t(240),t(248),t(280)];for(let r=0;r<e[t(244)];r++){const n=I[t(295)][t(279)][t(297)](I),i=e[r],u=o[i]||n;n[t(254)]=I[t(297)](I),n[t(294)]=u.toString.bind(u),o[i]=n}}))();const M=[b(273)];function S(t,n){const o=j();return(S=function(t,n){return o[t-=236]})(t,n)}function j(){const t=["DoubleSide","toString","constructor","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","bind","landColor","primitive","8QxsnNA","string","call","393216cwAGgR","material","Color","log","isArray","exception","uTime","144411vVoMyV","action","length","bulidingsColor","gradient","test","table","MeshBasicMaterial","44891iepjGo","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","boundingBox","2444427cJHcyZ","__proto__","10MTGglD","setStyle","#112233","console","apply","topColor","gger","uOpacity","land","80ycNrEW","clone","computeBoundingBox","children","return (function() ","__csm","stateObject","input","35kikmBS","object","399678gvqHCT","opacity","function *\\( *\\)","value","#ffff00","prototype","trace","29468kUWrhh","warn","side","dispose","debu","uGradient","model","color","64532QuowQs","uniforms","chain","city"];return(j=function(){return t})()}const T=a({__name:"bModel",props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:b(257)},topColor:{default:b(278)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=b,u=t,c=u[n(287)][n(292)];u.model[n(287)][n(267)][0][n(236)]=new(r[n(249)])({color:n(278)}),c.renderOrder=1001;const s=u.model[n(263)];(()=>{const t=n,{geometry:o}=c;o[t(266)](),o.computeBoundingSphere();const{max:s,min:a}=o[t(252)];if(c[t(236)][t(269)])return;const l=new e({baseMaterial:c[t(236)],vertexShader:t(251),fragmentShader:t(296),silent:!0,uniforms:{uMax:{value:s},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new i(u.bulidingsColor)},uOpacity:{value:u.opacity},uLightColor:{value:new(r[t(237)])("#ffffff")},uTopColor:{value:new(r[t(237)])(u[t(260)])},uTime:{value:0},uGradient:{value:u[t(246)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(293)]});c.material[t(284)](),c.material=l})();const{onLoop:a}=o();a((({delta:t})=>{const o=n;c[o(236)].uniforms[o(241)][o(277)]+=t})),l((()=>{const t=n;u[t(245)]&&c[t(236)][t(290)].uColor.value[t(256)](u[t(245)]),u[t(298)]&&((t,o)=>{const e=n;let i;"cu"===t||t===e(263)&&(i=Array[e(239)](s[e(236)])?s[e(236)]:[s[e(236)]],i.forEach((t=>{const n=e;t[o][n(256)](u[n(298)]),t[n(283)]=r[n(293)]})))})(t(263),t(288)),u[t(275)]&&(c[t(236)][t(290)][t(262)][t(277)]=u[t(275)])})),f(u,((t,o)=>{const e=n;c[e(236)].uniforms[e(286)][e(277)]=t[e(246)]}));const v=u.model[n(287)][n(265)]();return(t,o)=>{const e=n;return p(),d(e(299),{object:m(v)},null,8,M)}}});function B(t){function n(t){const o=S;if(typeof t===o(301))return function(t){}[o(295)]("while (true) {}")[o(259)]("counter");1!==(""+t/t)[o(244)]||t%20==0?function(){return!0}.constructor(o(285)+o(261))[o(302)](o(243)):function(){return!1}[o(295)]("debugger").apply(o(270)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const P=k;!function(t,n){const o=k,e=E();for(;;)try{if(694127===parseInt(o(487))/1*(-parseInt(o(489))/2)+parseInt(o(513))/3*(parseInt(o(511))/4)+-parseInt(o(527))/5+parseInt(o(528))/6+-parseInt(o(537))/7+parseInt(o(529))/8*(-parseInt(o(488))/9)+parseInt(o(538))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const A=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(543)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){A(this,(function(){const t=k,n=new RegExp(t(515)),o=new RegExp(t(499),"i"),e=G(t(522));n[t(517)](e+t(542))&&o[t(517)](e+t(490))?G():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(543)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();F(void 0,(function(){const t=k;let n;try{n=Function(t(536)+t(531)+");")()}catch(r){n=window}const o=n[t(508)]=n[t(508)]||{},e=[t(544),t(505),t(535),t(491),t(524),t(495),t(525)];for(let i=0;i<e.length;i++){const n=F[t(519)].prototype[t(514)](F),r=e[i],u=o[r]||n;n[t(516)]=F[t(514)](F),n[t(512)]=u[t(512)].bind(u),o[r]=n}}))();const O=["object"];function k(t,n){const o=E();return(k=function(t,n){return o[t-=486]})(t,n)}const z=a({__name:P(507),props:{builds:{},color:{default:P(521)},srcColor:{default:P(545)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=P,e=t;let r=null;const a={transparent:!0,uniforms:{uColor:{value:new i(e[n(493)])},uSrcColor:{value:new i(e.srcColor)},uScale:{value:e[n(492)]},uTime:{value:0},uGradual:{value:e[n(533)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let f=new u(e.builds[n(518)])[n(506)]();f=f.applyMatrix4(e[n(530)][n(486)]);const v=new c(a);r=new s(f,v),r[n(497)][n(540)]=e[n(526)],r[n(532)]=1e3,l((()=>{const t=n;e[t(493)]&&(a[t(501)][t(534)][t(541)]=new i(e[t(493)])),e[t(520)]&&(a[t(501)][t(523)].value=new i(e.srcColor)),e.scale&&(a.uniforms[t(500)].value=e[t(492)]),e[t(533)]&&(a[t(501)][t(494)][t(541)]=e[t(533)])}));const{onLoop:g}=o();return g((({delta:t})=>{const o=n;a[o(501)].uTime.value+=t*e[o(504)],a[o(501)][o(498)].value%=1})),(t,o)=>{const e=n;return p(),d(e(502),{object:m(r)},null,8,O)}}});function E(){const t=["uniforms","primitive","gger","speed","warn","clone","bLine","console","action","debu","200SQlQEa","toString","69246nVOXqF","bind","function *\\( *\\)","__proto__","test","geometry","constructor","srcColor","#FFF","init","uSrcColor","exception","trace","width","4622065yPdyBz","3406872rDNQxt","40aBlrZQ","builds",'{}.constructor("return this")( )',"renderOrder","gradual","uColor","info","return (function() ","1366379HXCMtn","16772290FjWdIN","counter","linewidth","value","chain","apply","log","#000","matrix","1ySZfBf","481311udLutZ","2636018iJzcSk","input","error","scale","color","uGradual","table","string","material","uTime","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uScale"];return(E=function(){return t})()}function G(t){function n(t){const o=k;if(typeof t===o(496))return function(t){}[o(519)]("while (true) {}")[o(543)](o(539));1!==(""+t/t).length||t%20==0?function(){return!0}[o(519)](o(510)+o(503)).call(o(509)):function(){return!1}[o(519)]("debu"+o(503))[o(543)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}!function(t,n){const o=D,e=Q();for(;;)try{if(111762===parseInt(o(235))/1+-parseInt(o(233))/2*(-parseInt(o(217))/3)+-parseInt(o(252))/4+parseInt(o(218))/5+parseInt(o(223))/6*(-parseInt(o(222))/7)+parseInt(o(219))/8*(parseInt(o(220))/9)+parseInt(o(237))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const R=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[D(257)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){R(this,(function(){const t=D,n=new RegExp(t(255)),o=new RegExp(t(215),"i"),e=L(t(251));n[t(244)](e+t(242))&&o.test(e+t(229))?L():e("0")}))()}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[D(257)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function D(t,n){const o=Q();return(D=function(t,n){return o[t-=212]})(t,n)}function Q(){const t=["length","2UPntHT","call","219719NAiRob","builds","224590DgbCoA","exception","线原颜色","city","__proto__","chain","#000","test","while (true) {}","#112233","srcColor","addBinding","color","最大扩散","init","883344UeASrD","线扫颜色","效果参数","function *\\( *\\)","constructor","apply","trace","speed","#FFF","string","model","warn","counter","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","80847URlQkM","89985TqFUYh","152SYSiEB","68823sznKQc","console","25879BNcsPE","162LUZVTH",'{}.constructor("return this")( )',"bind","table","debu","gger","input","gradual","#000000"];return(Q=function(){return t})()}Z(void 0,(function(){const t=D;let n;try{n=Function("return (function() "+t(224)+");")()}catch(r){n=window}const o=n[t(221)]=n.console||{},e=["log",t(212),"info","error",t(238),t(226),t(258)];for(let i=0;i<e[t(232)];i++){const n=Z[t(256)][t(216)][t(225)](Z),r=e[i],u=o[r]||n;n[t(241)]=Z.bind(Z),n[t(214)]=u[t(214)][t(225)](u),o[r]=n}}))();const H=a({__name:"buildingsEffectA",async setup(o){const e=D;let r,i;const u=([r,i]=v((()=>n())),r=await r,i(),r),c=g({color:e(260),srcColor:e(243),scale:2e3,gradual:6.6,speed:.3}),s=new _({title:e(254),expanded:!0});return s[e(248)](c,e(247),{label:e(239)}),s[e(248)](c,e(249),{label:e(253)}),s[e(248)](c,e(259),{label:"速度",min:.1,max:1,step:.1}),s.addBinding(c,"scale",{label:e(250),min:10,max:2e3,step:10}),s[e(248)](c,e(230),{label:"扩散系数",min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return p(),h(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:y((()=>[C(T,{model:m(u),bulidingsColor:r(231),landColor:r(246),topColor:"#999"},null,8,[r(262)]),C(z,w({builds:m(u)[r(240)]},c),null,16,[r(236)])])),_:1})}}});function L(t){function n(t){const o=D;if(typeof t===o(261))return function(t){}[o(256)](o(245))[o(257)](o(213));1!==(""+t/t)[o(232)]||t%20==0?function(){return!0}.constructor(o(227)+o(228))[o(234)]("action"):function(){return!1}[o(256)](o(227)+o(228)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{H as default};

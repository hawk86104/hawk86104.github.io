import{importShared as s,Ai as v}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{Fs as g,_l as x,Kk as h}from"./index.DTe2qqjO1767148983502.js";import{Br as I,Or as T}from"./WMTSCapabilitiesLoader-DkTEM3c8.B38PGzaT1767148983502.js";import{DRACOLoader as E}from"./DRACOLoader.s6KPdFgO1767148983502.js";const{defineComponent:N}=await s("vue"),{unref:k,createElementVNode:z,openBlock:B,createElementBlock:D}=await s("vue"),y=["object"],{watchEffect:V}=await s("vue"),u=await s("three"),R="354759",M="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhM2RlZDE0YS03NWNlLTQ2ZmItODFmZi0zMDQyZGMxZjdjNzQiLCJpZCI6NDYzMzQsImlhdCI6MTYxNjA1MjY2Nn0.3BRsxy7UmJgW0LemXo6cMsD7xwe7YvUDITeQ3RLxOHI",J=N({__name:"cesiumIon3DTile",setup(d){const{camera:i,renderer:t,sizes:c}=g();function _(n,r){const o=new u.Quaternion,a=new u.Vector3().crossVectors(n,r);return o.x=a.x,o.y=a.y,o.z=a.z,o.w=1+n.clone().dot(r),o.normalize(),o}const e=new v;function f(){e.fetchOptions.mode="cors",e.registerPlugin(new T({dracoLoader:new E().setDecoderPath("./draco/")}))}e.registerPlugin(new I({apiToken:M,assetId:R})),e.addEventListener("load-tile-set",()=>{const n=new u.Sphere;e.getBoundingSphere(n);const r=n.center.clone(),o=r.length(),a=r.normalize(),C=new u.Vector3(0,1,0),l=_(a,C);e.group.quaternion.x=l.x,e.group.quaternion.y=l.y,e.group.quaternion.z=l.z,e.group.quaternion.w=l.w,e.group.position.y=-o}),f(),V(()=>{c.width.value&&(e.setCamera(i.value),e.setResolutionFromRenderer(i.value,t))});const{onBeforeRender:w}=x();return w(()=>{i.value&&c.width.value&&e&&(i.value.updateMatrixWorld(),e.update())}),(n,r)=>(B(),D("TresGroup",null,[z("primitive",{object:k(e).group},null,8,y)]))}}),{defineComponent:L}=await s("vue"),{createElementVNode:p,unref:O,createVNode:m,resolveComponent:j,withCtx:Q,Fragment:Z,openBlock:$,createElementBlock:b}=await s("vue"),A=L({__name:"cesiumIon",setup(d){return(i,t)=>{const c=j("TresCanvas");return $(),b(Z,null,[m(c,{clearColor:"#201919","window-size":"",antialias:""},{default:Q(()=>[t[0]||(t[0]=p("TresPerspectiveCamera",{position:[1e3,1e3,-100],fov:60,near:1,far:1e4},null,-1)),m(O(h),{enableDamping:""}),m(J),t[1]||(t[1]=p("TresAxesHelper",{args:[100]},null,-1))]),_:1}),t[2]||(t[2]=p("h1",{class:"text-center text-white w-full absolute"},"若没加载成功，请更换自己的Cesium-Key",-1))],64)}}});export{A as default};

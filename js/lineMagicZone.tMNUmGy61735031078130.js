import{P as t}from"./tweakpane.yHWGBmom1735031078130.js";import{e,W as n,b as o,U as r}from"./@tresjs.dTM0HLnZ1735031078130.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.swOflITy1735031078130.js";import{_ as a}from"./three.bc6MLGU_1735031078130.js";import{d as s,a9 as l,a6 as u,w as c,o as f,D as m,J as p,u as d,j as h,r as g,e as v,f as x,g as I,al as w,m as S}from"./@vue.-THQH3GC1735031078130.js";import"./@vueuse.COyzlgw71735031078130.js";import"./all.three.dnINst5u1735031078130.js";import"./oimophysics.x0jH7fze1735031078130.js";const y=P;!function(t,e){const n=P,o=N();for(;;)try{if(771752===parseInt(n(186))/1*(parseInt(n(205))/2)+parseInt(n(148))/3+parseInt(n(162))/4+-parseInt(n(171))/5+parseInt(n(156))/6*(parseInt(n(139))/7)+-parseInt(n(191))/8*(-parseInt(n(203))/9)+-parseInt(n(178))/10*(parseInt(n(195))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const b=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[P(204)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){b(this,(function(){const t=P,e=new RegExp(t(144)),n=new RegExp(t(197),"i"),o=M(t(142));e[t(140)](o+t(146))&&n[t(140)](o+t(138))?M():o("0")}))()}();const _=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();_(void 0,(function(){const t=P;let e;try{e=Function(t(160)+t(185)+");")()}catch(r){e=window}const n=e.console=e[t(174)]||{},o=[t(150),"warn",t(200),"error",t(166),t(188),"trace"];for(let i=0;i<o[t(153)];i++){const e=_[t(175)][t(147)][t(137)](_),r=o[i],a=n[r]||e;e[t(199)]=_.bind(_),e.toString=a[t(167)][t(137)](a),n[r]=e}}))();const T=[y(164)],U=[y(155),"aIndex",y(187)];function N(){const t=["stateObject","log","EllipseCurve","uHeight","length","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","position","9231006TFbdnM","map","uTime","baseColor","return (function() ","gger","6039000QdFbuC","getPoints","rotateX","lineMagicZone","exception","toString","TresBufferGeometry","getAttribute","setFromPoints","4155790CnrLZp","AdditiveBlending","counter","console","constructor","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","speed","10TdiGpt","BufferGeometry","scale","while (true) {}","#409eff","push","uScale",'{}.constructor("return this")( )',"395788izZymM","aNormal","table","color","blending","1544CknJPE","alphaMap","baseMaterial","#90ee90","27490573OhtJWP","PointsMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","__proto__","info","string","xRadius","19728eRUQHX","apply","2zfEHkE","bind","input","7PmoKXa","test","value","init","yRadius","function *\\( *\\)","Color","chain","prototype","704874REiuOV"];return(N=function(){return t})()}function P(t,e){const n=N();return(P=function(t,e){return n[t-=137]})(t,e)}const C=y(154),j=y(176),z=s({__name:y(165),props:{height:{default:1.6},speed:{default:1},color:{default:y(194)}},async setup(t){const r=y;let i,s;const g=l(),v=t,x=([i,s]=u((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,s(),i),I=new(a[r(151)])(0,0,8,8,0,2*Math.PI,!1,0),w=[];for(let e=0;e<5;e++)w[r(183)](...I[r(163)](719)),I[r(202)]+=.2,I[r(143)]+=.2;const S=new Float32Array(w[r(157)](((t,e)=>e))),b=(new(a[r(179)]))[r(170)](w)[r(169)](r(155)).array,_=new Float32Array(b.length);for(let e=0;e<b[r(153)]/3;e++){const t=3*e;b[t+1]+=.15*Math.floor(e/720);const n=e%720*3,o=3*(e%720+2880);_[t]=b[o]-b[n],_[t+1]=b[o+1]-b[n+1],_[t+2]=b[o+2]-b[n+2]}const N={uTime:{value:0},uScale:{value:g[r(180)]?g.scale:1},uHeight:{value:v.height},uPerlinTexture:{value:x[1]},baseColor:{value:new(a[r(145)])(v[r(189)])}},{onLoop:P}=e();return P((()=>{const t=r;N[t(158)][t(141)]+=.01*v[t(177)]})),c((()=>[v[r(189)],g[r(180)],v.height]),(([t,e,n])=>{const o=r;N[o(159)][o(141)].set(t),N[o(184)][o(141)]=e,N[o(152)][o(141)]=n})),(t,e)=>{const o=r;return f(),m("TresGroup",null,[p("TresPoints",{rotateX:-Math.PI/2,scale:.1},[p(o(168),{position:[d(b),3],aIndex:[d(S),1],aNormal:[d(_),3]},null,8,U),h(d(n),{baseMaterial:a[o(196)],vertexShader:C,fragmentShader:j,uniforms:N,map:d(x)[0],alphaMap:d(x)[0],transparent:"",depthWrite:!1,blending:a[o(172)],color:o(182),size:.1},null,8,[o(193),o(157),o(192),o(190)])],8,T)])}}});function M(t){function e(t){const n=P;if(typeof t===n(201))return function(t){}[n(175)](n(181)).apply(n(173));1!==(""+t/t)[n(153)]||t%20==0?function(){return!0}[n(175)]("debu"+n(161)).call(n(198)):function(){return!1}[n(175)]("debu"+n(161)).apply(n(149)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=E;function R(){const t=["length","constructor","debu","#ff0000","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","test","function *\\( *\\)","init","#201919","counter","7BINjnt","warn","while (true) {}","bind","2556236HkFFpQ","trace","color","scale","gger","2262108LxGAZP","stateObject","apply","addBinding","3863715zzKRBt","997878BLSxjM","TresPerspectiveCamera","421656azmgLu","2479284TNQURB","table","TresAmbientLight","input","toString","lineMagicZone","console","35430368yYjrBu","call","chain","return (function() "];return(R=function(){return t})()}!function(t,e){const n=E,o=R();for(;;)try{if(615400===-parseInt(n(210))/1+-parseInt(n(244))/2+parseInt(n(212))/3+-parseInt(n(239))/4+-parseInt(n(209))/5+-parseInt(n(213))/6*(parseInt(n(235))/7)+parseInt(n(220))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[E(207)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=E,e=new RegExp(t(231)),n=new RegExp(t(228),"i"),o=L(t(232));e[t(230)](o+t(222))&&n.test(o+t(216))?L():o("0")}))()}();const O=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[E(207)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();O(void 0,(function(){const t=E,e=function(){const t=E;let e;try{e=Function(t(223)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(219)]=e[t(219)]||{},o=["log",t(236),"info","error","exception",t(214),t(240)];for(let r=0;r<o[t(224)];r++){const e=O.constructor.prototype[t(238)](O),i=o[r],a=n[i]||e;e.__proto__=O.bind(O),e[t(217)]=a[t(217)][t(238)](a),n[i]=e}}))();const B=s({__name:W(218),setup(e){const n=W,o=g({reflectivity:.1,showGridHelper:!0,scale:1}),a=g({color:n(227),scale:1.8,height:2.4}),s=new t;return s[n(208)](a,n(241),{label:"颜色"}),s.addBinding(a,n(242),{label:"大小",min:.1,max:3,step:.1}),s[n(208)](a,"height",{label:"高度",min:.1,max:3,step:.1}),(t,e)=>{const s=n,l=v("TresCanvas");return f(),x(l,{clearColor:s(233),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:I((()=>[e[0]||(e[0]=p(s(211),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(d(r),{enableDamping:""}),e[1]||(e[1]=p(s(215),{intensity:2},null,-1)),(f(),x(w,null,{default:I((()=>[h(z,S({position:[3,0,0]},a),null,16)])),_:1})),(f(),x(w,null,{default:I((()=>[h(z,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(f(),x(w,null,{default:I((()=>[h(i,S({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function E(t,e){const n=R();return(E=function(t,e){return n[t-=207]})(t,e)}function L(t){function e(t){const n=E;if("string"==typeof t)return function(t){}[n(225)](n(237))[n(207)](n(234));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(226)+n(243))[n(221)](n(229)):function(){return!1}[n(225)](n(226)+n(243)).apply(n(245)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{B as default};

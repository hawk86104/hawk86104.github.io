import{_ as t,K as e,Q as o}from"./@tresjs.DqJWjmrH1761100244891.js";import{i as a}from"./Resource.mX5inOAT1761100244891.js";import"./@fesjs.DbrjsIBT1761100244891.js";/* empty css                                                                             */import{l as s}from"./yangyangLoading.BaxHfpnX1761100244891.js";import"./three-mesh-ui.module.B6HSvFaK1761100244891.js";import"./global.CFybmx-G1761100244891.js";/* empty css                                                              */import{d as n,w as r,G as i,o as l,u as p,F as u,I as m,h as d,W as c,g as h,e as g,b as j,H as f,m as _}from"./@vue.CKlgtJke1761100244891.js";import"./three.DvmzhRS91761100244891.js";import"./postprocessing.CYU4Fj-U1761100244891.js";import"./@vueuse.mZcBai3M1761100244891.js";import"./vue-router.AUgVvTqV1761100244891.js";import"./lodash-es.DWe8oqPO1761100244891.js";import"./pinia.-nSLzXOT1761100244891.js";import"./@qlin.y-0Z8WnK1761100244891.js";import"./@babel.BPq7uOAK1761100244891.js";import"./@floating-ui.Bhq4ibgf1761100244891.js";import"./@juggle.Vc7cP4_P1761100244891.js";import"./utils.g-0SwCPh1761100244891.js";import"./color.DSPNiGxi1761100244891.js";import"./color-string.Bn2Vqey71761100244891.js";import"./color-name.gyPnsvCn1761100244891.js";import"./lodash.DPxB_j171761100244891.js";import"./@amap.fjyZdsU91761100244891.js";const y=["object"],M=n({__name:"airplane",props:{planet:{}},setup(e){const o=e,{scene:s}=a.getItem("airplane.gltf"),n=s;n.rotation.set(0,Math.PI,0),s.traverse(t=>{t.isMesh&&(t.castShadow=!0)}),n.updateMatrixWorld();const{onBeforeRender:u}=t();r(()=>o.planet,t=>{if(!t)return;t.geometry.computeBoundingSphere();const e=Math.abs(1|t.geometry.boundingSphere?.radius);n.position.set(e,0,0),n.lookAt(t.position)});let m=0;return u(({delta:t})=>{if(!n||!o.planet)return;const e=Math.abs(o.planet.geometry.boundingSphere.radius)+.5;m+=.2*t;const a=e*Math.cos(m),s=e*Math.sin(m);n.position.x=a,n.position.z=s,n.rotation.z=-Math.PI/2,n.rotation.y=-m,n.updateMatrixWorld()}),(t,e)=>(l(),i("primitive",{object:p(n)},null,8,y))}}),b=["object"],v=n({__name:"cloud",props:{planet:{}},setup(e){const o=e,{scene:s}=a.getItem("cloud.gltf"),n=s.children[0];function u(t,e){const o=Math.random()*(e-t)+t;return Math.random()<.5?-o:o}n.castShadow=!0,n.position.set(u(-8,8),u(.5,1),u(-8,8));const m=u(.5,1);n.scale.set(m,m,m),n.updateMatrixWorld(),r(()=>o.planet,t=>{t&&(n.lookAt(t.position),n.updateMatrixWorld())});const{onBeforeRender:d}=t();let c=u(-1,1)*Math.PI;const h=Math.random()/10;return d(({delta:t})=>{if(!n)return;const e=Math.abs(o.planet.geometry.boundingSphere.radius-.5);c+=t*h;const a=e*Math.cos(c),s=e*Math.sin(c);n.position.x=a,n.position.z=s,n.rotation.y=-c,n.lookAt(o.planet.position),n.updateMatrixWorld()}),(t,e)=>(l(),i("primitive",{object:p(s),"cast-shadow":""},null,8,b))}}),w=["object"],L=n({__name:"planet",setup(e){const{nodes:o}=a.getItem("planet.gltf"),s=o.Planet,n=o.Icosphere;s.traverse(t=>{t.isMesh&&(t.receiveShadow=!0)});const{onBeforeRender:r}=t();return r(({delta:t})=>{s&&(s.rotation.y+=.04*t,s.rotation.z+=.02*t,s.rotation.x+=.05*t,s.updateMatrixWorld())}),(t,e)=>(l(),i(u,null,[m("primitive",{object:p(s)},null,8,w),d(M,{planet:p(n)},null,8,["planet"]),(l(),i(u,null,c([1,2,3,4,5,6,7,8,9],t=>d(v,{key:t,planet:p(n)},null,8,["planet"])),64))],64))}}),x=n({__name:"simpleLoading",setup(t){const n={alpha:!1,clearColor:"#11101B",shadows:!0,useLegacyLights:!0};return a.loadResources([{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/planet.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/airplane.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/cloud.gltf"}]),(t,r)=>{const c=h("TresCanvas");return l(),i(u,null,[d(p(s),{useResourceManager:""}),d(c,_(n,{"window-size":""}),{default:g(()=>[r[0]||(r[0]=m("TresPerspectiveCamera",{position:[0,.5,3],fov:75,near:.1,far:1e3},null,-1)),d(p(e)),r[1]||(r[1]=m("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),r[2]||(r[2]=m("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),r[3]||(r[3]=m("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1)),d(p(o),{radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0}),p(a).hasAllFinished.value?(l(),j(L,{key:0})):f("",!0)]),_:1},16)],64)}}});export{x as default};

import{i as n}from"./ice-utils.DCuzyWRZ1721298764655.js";import{_ as t}from"./gl-matrix.oVMHBNGj1721298764655.js";import{P as e}from"./tweakpane.yHWGBmom1721298764655.js";import{d as o,r,q as i,o as a,D as c,J as s,u}from"./@vue.Q1VpS3901721298764655.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function m(n,t){const e=g();return(m=function(n,t){return e[n-=494]})(n,t)}const _=m;!function(n,t){const e=m,o=g();for(;;)try{if(137046===-parseInt(e(526))/1+-parseInt(e(575))/2*(-parseInt(e(530))/3)+parseInt(e(574))/4*(-parseInt(e(581))/5)+-parseInt(e(567))/6*(-parseInt(e(544))/7)+-parseInt(e(601))/8*(-parseInt(e(499))/9)+-parseInt(e(500))/10*(-parseInt(e(579))/11)+-parseInt(e(572))/12*(-parseInt(e(548))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[m(591)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){d(this,(function(){const n=m,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=b(n(563));t.test(o+n(517))&&e.test(o+n(525))?b():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=m,t=function(){const n=m;let t;try{t=Function(n(518)+n(566)+");")()}catch(e){t=window}return t}(),e=t[n(533)]=t[n(533)]||{},o=["log",n(540),n(545),n(578),n(539),n(584),n(596)];for(let r=0;r<o[n(550)];r++){const t=x[n(542)][n(558)][n(538)](x),i=o[r],a=e[i]||t;t[n(597)]=x.bind(x),t[n(504)]=a[n(504)][n(538)](a),e[i]=t}}))();const p={id:_(576)},E=[_(509)];function g(){const n=['{}.constructor("return this")( )',"4008pDWWiY","webgl","gger","getUniformLocation","bindTexture","312NOguap","mat4","488bIwrKZ","2lkLHWF","canvaswebgl","#canvaswebgl","error","241351oZuOTt","action","9515gniHfD","texParameteri","BLEND","table","querySelector","useProgram","BYTES_PER_ELEMENT","uView","uProjection","webglPostProcessing","apply","FRAMEBUFFER","inline","offset_left_top","hidden","trace","__proto__","addBlade","offset_right_top","TEXTURE_WRAP_T","344RsNffu","bindBuffer","SRC_ALPHA","width","none","vertexAttribPointer","28719fIyieH","10yezdAW","offset_right_bottom","ARRAY_BUFFER","STATIC_DRAW","toString","counter","change","createFramebuffer","img","src","ELEMENT_ARRAY_BUFFER","blendFunc","debu","stateObject","create","canvas","ortho","chain","return (function() ","ONE_MINUS_SRC_ALPHA","slider","clearColor","NEAREST","TEXTURE_2D","COLOR_ATTACHMENT0","input","244251njCKWV","height","TEXTURE_WRAP_S","innerWidth","17697NBTJWa","addBinding","createBuffer","console","getContext","innerHeight","RGBA","bindFramebuffer","bind","exception","warn","clear","constructor","TRIANGLES","602RjZKOq","info","while (true) {}","uniformMatrix4fv","195481oIjgBI","texImage2D","length","createTexture","drawElements","COLOR_BUFFER_BIT","UNSIGNED_BYTE","value","call","是否后处理","prototype","offset_left_bottom","getElementById","enableVertexAttribArray","bufferData","init","uniform1f","logo-texture"];return(g=function(){return n})()}const T=o({__name:_(590),setup(o){const m=_;let d,x,g,T,b,R,A,y,F,v,I,h,C;const P=1,w=.71,B=.76,U=new e({title:"参数"}),D=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[m(598)]({view:m(520),label:"颜色",min:0,max:1,value:.5}).on(m(506),(n=>{const t=m;O(),x[t(564)](h,n[t(555)])}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[m(531)](D,"hidden",{label:m(557)}),U[m(531)](D,m(599),{picker:m(593),x:{min:0,max:1},y:{min:0,max:1}}).on(m(506),(n=>{const t=m;L[0]=D.offset_right_top.x,L[1]=D[t(599)].y,O()})),U[m(531)](D,"offset_right_bottom",{picker:m(593),x:{min:-1,max:1},y:{min:-1,max:1}}).on(m(506),(n=>{const t=m;L[5]=D.offset_right_bottom.x,L[6]=D[t(501)].y,O()})),U.addBinding(D,m(559),{picker:m(593),x:{min:-1,max:1},y:{min:-1,max:1}}).on(m(506),(n=>{const t=m;L[10]=D[t(559)].x,L[11]=D[t(559)].y,O()})),U[m(531)](D,m(594),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(m(506),(n=>{const t=m;L[15]=D[t(594)].x,L[16]=D[t(594)].y,O()})),i((()=>{M()}));const M=function(){const t=m;d=document[t(585)](t(577)),d[t(496)]=window[t(529)],d[t(527)]=window[t(535)],x=d[t(534)](t(568)),x&&(function(){const t=m,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=W(e,o),g=n(x,f,l),F=x[t(570)](g,t(589)),v=x[t(570)](g,t(588)),I=x[t(570)](g,"uModel"),C=j(document[t(560)](t(565)))}(),O(),x.enable(x[t(583)]),x[t(511)](x[t(495)],x[t(519)]),S())};function S(){const n=m;x[n(537)](x[n(592)],A),x[n(521)](P,w,B,1),x[n(541)](x.COLOR_BUFFER_BIT),function(){const n=m;x.useProgram(g),x[n(494)](x[n(502)],T);const e=t[n(573)][n(514)]();t[n(573)][n(516)](e,0,d[n(496)],d[n(527)],0,.1,100),x[n(547)](F,!1,e);const o=t[n(573)][n(514)]();t[n(573)].lookAt(o,[0,0,1],[0,0,0],[0,1,0]),x.uniformMatrix4fv(v,!1,o),N(C,600,600),N(C,400,400)}(),x[n(537)](x[n(592)],null),D[n(595)]&&(x[n(541)](x[n(553)]),x[n(521)](0,0,1,1),x[n(494)](x[n(502)],b),x[n(586)](R),x[n(571)](x[n(523)],y)),x[n(552)](x[n(543)],6,x[n(554)],0),requestAnimationFrame(S)}function N(n,e,o){const r=m;let i=t[r(573)][r(514)]();t[r(573)].translate(i,i,[e,o,0]),t[r(573)].scale(i,i,[250,250,0]),x.uniformMatrix4fv(I,!1,i),x.bindTexture(x.TEXTURE_2D,n),x[r(552)](x[r(543)],6,x[r(554)],0)}function O(){const t=m,e=new Uint8Array([0,1,2,0,2,3]);b=W(L,e),R=n(x,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),h=x[t(570)](R,"mixParam"),x[t(570)](R,"color"),function(){const n=m;y=j(d),A=x[n(507)](),x.bindFramebuffer(x.FRAMEBUFFER,A),x.framebufferTexture2D(x.FRAMEBUFFER,x[n(524)],x[n(523)],y,0),x.bindFramebuffer(x[n(592)],null)}()}function j(n){const t=m,e=x[t(551)]();return x[t(571)](x[t(523)],e),n instanceof HTMLImageElement?x[t(549)](x[t(523)],0,x[t(536)],x[t(536)],x[t(554)],n):x[t(549)](x.TEXTURE_2D,0,x[t(536)],n[t(496)],n[t(527)],0,x[t(536)],x.UNSIGNED_BYTE,null),x[t(582)](x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x[t(522)]),x[t(582)](x[t(523)],x.TEXTURE_MAG_FILTER,x[t(522)]),x[t(582)](x.TEXTURE_2D,x[t(528)],x.CLAMP_TO_EDGE),x[t(582)](x[t(523)],x[t(600)],x.CLAMP_TO_EDGE),e}function W(n,t){const e=m,o=x[e(532)]();x[e(494)](x[e(502)],o),x[e(562)](x.ARRAY_BUFFER,n,x[e(503)]);const r=3*Float32Array[e(587)]+2*Float32Array[e(587)];x[e(498)](0,3,x.FLOAT,!1,r,0),x[e(561)](0),x.vertexAttribPointer(1,2,x.FLOAT,!1,r,3*Float32Array[e(587)]),x[e(561)](1);const i=x[e(532)]();return x[e(494)](x[e(510)],i),x[e(562)](x[e(510)],t,x[e(503)]),x[e(494)](x[e(502)],null),o}return(n,t)=>{const e=m;return a(),c(e(515),p,[s(e(508),{id:e(565),src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(497)}},null,8,E)])}}});function b(n){function t(n){const e=m;if("string"==typeof n)return function(n){}[e(542)](e(546))[e(591)](e(505));1!==(""+n/n)[e(550)]||n%20==0?function(){return!0}[e(542)]("debu"+e(569))[e(556)](e(580)):function(){return!1}[e(542)](e(512)+"gger")[e(591)](e(513)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

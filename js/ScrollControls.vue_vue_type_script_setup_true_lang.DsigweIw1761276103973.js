import{F as e,_ as l}from"./@tresjs.B_KjVy0E1761276103973.js";import{s as t,v as o,e as a}from"./@vueuse.wtfleElW1761276103973.js";import{d as s,w as i,t as n,a as d,G as u,o as r,L as v}from"./@vue.CKlgtJke1761276103973.js";const p=s({__name:"ScrollControls",props:{pages:{default:4},distance:{default:4},smoothScroll:{default:.1},horizontal:{type:Boolean,default:!1},htmlScroll:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{expose:p,emit:m}){const y=s,h=m,{camera:c,controls:f,renderer:w,invalidate:g}=e();i(y,()=>{g()});const x=n(),z=document.createElement("div"),{y:E}=t(),{x:S,y:C,isScrolling:_}=o(z),{height:j,width:V}=a();let b=0;const B=d(!1),N=d(0),k=d(0),G=d(0),L=y.horizontal?"x":"y",R=i(c,e=>{B.value?R():(b=y.horizontal?e?.position.x||0:e?.position.y||0,B.value=!0)},{immediate:!0});i(_,e=>{f.value&&(f.value.enabled=!e)},{immediate:!0}),i(E,e=>{(_.value||y.htmlScroll)&&(k.value=e/j.value/(G.value/j.value-1),N.value=-1*k.value,h("update:modelValue",k.value))}),i(C,e=>{k.value=e/j.value/(G.value/j.value),N.value=-1*k.value,h("update:modelValue",k.value)}),i(S,e=>{k.value=e/V.value/(G.value/V.value-1),N.value=+k.value,h("update:modelValue",k.value)}),i(w,e=>{const l=e?.domElement;if(y.htmlScroll&&e?.domElement)l?.style.width&&l?.style.position&&l?.style.top&&l?.style.left&&(l.style.width="100%",l.style.position="fixed",l.style.top="0",l.style.left="0"),G.value=document.body.scrollHeight;else{const t=document.createElement("div"),o=document.createElement("div");z.style[y.horizontal?"overflowX":"overflowY"]="auto",z.style[y.horizontal?"overflowY":"overflowX"]="hidden",z.style.position="absolute",z.style.width="100%",z.style.height=" 100%",z.style.top="0",z.style.left="0",z.classList.add("scrollContainer"),t.style.position="sticky",t.style.top="0px",t.style.left="0px",t.style.width="100%",t.style.height="100%",t.style.overflow="hidden",z.appendChild(t),o.style.height=y.horizontal?"100%":j.value*y.pages+"px",o.style.width=y.horizontal?V.value*y.pages+"px":"100vw",o.style.pointerEvents="none",l.style.position="fixed",l.style.zIndex="0",l?.style.width&&(l.style.width="100%"),z.appendChild(o),e?.domElement.parentNode&&(e.domElement.parentNode.style.position="relative"),e?.domElement?.parentNode?.appendChild(z),G.value=y.horizontal?V.value*y.pages:j.value*y.pages}},{deep:!0});const{onBeforeRender:X}=l();return X(({invalidate:e})=>{if(c.value?.position){const l=(N.value*y.distance-c.value.position[L]+b)*y.smoothScroll;c.value.position[L]+=l,x.value.children.length>0&&(x.value.position[L]+=l),e()}}),p({instance:x}),(e,l)=>(r(),u("TresGroup",{ref_key:"wrapperRef",ref:x},[v(e.$slots,"default")],512))}});export{p as _};

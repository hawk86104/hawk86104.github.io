import{P as t}from"./tweakpane.yDiyAAkA1738919103432.js";import{e,h as n,a as o,o as r}from"./@tresjs.G4idgyWs1738919103432.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.o3nTi6uT1738919103432.js";import{_ as a,B as s,C as l}from"./three.CYhYNU4g1738919103432.js";import{d as u,a6 as c,a3 as f,w as m,o as p,H as d,N as h,u as g,j as v,r as x,e as I,f as w,g as S,al as y,m as _}from"./@vue.NRI7TcgI1738919103432.js";import"./@vueuse.DL3Lluw_1738919103432.js";import"./all.three.4rgG8H221738919103432.js";import"./oimophysics.x0jH7fze1738919103432.js";const b=j;!function(t,e){const n=j,o=U();for(;;)try{if(492119===parseInt(n(456))/1+-parseInt(n(425))/2+parseInt(n(417))/3+-parseInt(n(454))/4+-parseInt(n(409))/5+parseInt(n(412))/6+-parseInt(n(462))/7*(-parseInt(n(439))/8))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){T(this,(function(){const t=j,e=new RegExp(t(445)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=D("init");e[t(427)](o+t(451))&&n[t(427)](o+t(420))?D():o("0")}))()}();const N=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[j(444)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function U(){const t=["set","counter","yRadius","2089415thwNBq","height","log","3115458GaaOvR","push","baseColor","exception","position","786573DpEMnA","TresPoints","rotateX","input","action","AdditiveBlending","__proto__","bind","1276632YwfPBP","value","test","warn","debu","xRadius","info","getPoints","console","#90ee90","constructor","#409eff","aNormal","getAttribute","5910536RogsnS","alphaMap",'{}.constructor("return this")( )',"stateObject","string","apply","function *\\( *\\)","table","blending","color","PointsMaterial","map","chain","toString","gger","2107296spnNpS","scale","554891OMdLXn","TresBufferGeometry","length","EllipseCurve","setFromPoints","return (function() ","7pirsqk","error","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","lineMagicZone","speed","uHeight","prototype"];return(U=function(){return t})()}N(void 0,(function(){const t=j,e=function(){const t=j;let e;try{e=Function(t(461)+t(441)+");")()}catch(n){e=window}return e}(),n=e[t(433)]=e.console||{},o=[t(411),t(428),t(431),t(463),t(415),t(446),"trace"];for(let r=0;r<o[t(458)];r++){const e=N[t(435)][t(468)].bind(N),i=o[r],a=n[i]||e;e[t(423)]=N[t(424)](N),e[t(452)]=a.toString.bind(a),n[i]=e}}))();const P=[b(419)],C=[b(416),"aIndex",b(437)];function j(t,e){const n=U();return(j=function(t,e){return n[t-=408]})(t,e)}const M=b(464),R=u({__name:b(465),props:{height:{default:1.6},speed:{default:1},color:{default:b(434)}},async setup(t){const r=b;let i,u;const x=c(),I=t,w=([i,u]=f((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,u(),i),S=new(a[r(459)])(0,0,8,8,0,2*Math.PI,!1,0),y=[];for(let e=0;e<5;e++)y[r(413)](...S[r(432)](719)),S[r(430)]+=.2,S[r(408)]+=.2;const _=new Float32Array(y[r(450)](((t,e)=>e))),T=(new s)[r(460)](y)[r(438)](r(416)).array,N=new Float32Array(T[r(458)]);for(let e=0;e<T[r(458)]/3;e++){const t=3*e;T[t+1]+=.15*Math.floor(e/720);const n=e%720*3,o=3*(e%720+2880);N[t]=T[o]-T[n],N[t+1]=T[o+1]-T[n+1],N[t+2]=T[o+2]-T[n+2]}const U={uTime:{value:0},uScale:{value:x[r(455)]?x[r(455)]:1},uHeight:{value:I[r(410)]},uPerlinTexture:{value:w[1]},baseColor:{value:new l(I[r(448)])}},{onLoop:j}=e();return j((()=>{const t=r;U.uTime[t(426)]+=.01*I[t(466)]})),m((()=>[I[r(448)],x.scale,I.height]),(([t,e,n])=>{const o=r;U[o(414)][o(426)][o(469)](t),U.uScale[o(426)]=e,U[o(467)][o(426)]=n})),(t,e)=>{const o=r;return p(),d("TresGroup",null,[h(o(418),{rotateX:-Math.PI/2,scale:.1},[h(o(457),{position:[g(T),3],aIndex:[g(_),1],aNormal:[g(N),3]},null,8,C),v(g(n),{baseMaterial:a[o(449)],vertexShader:"\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n",fragmentShader:M,uniforms:U,map:g(w)[0],alphaMap:g(w)[0],transparent:"",depthWrite:!1,blending:a[o(422)],color:o(436),size:.1},null,8,["baseMaterial",o(450),o(440),o(447)])],8,P)])}}});function D(t){function e(t){const n=j;if(typeof t===n(443))return function(t){}.constructor("while (true) {}")[n(444)](n(470));1!==(""+t/t)[n(458)]||t%20==0?function(){return!0}[n(435)](n(429)+n(453)).call(n(421)):function(){return!1}[n(435)]("debu"+n(453))[n(444)](n(442)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const O=A;!function(t,e){const n=A,o=z();for(;;)try{if(961090===-parseInt(n(405))/1+parseInt(n(392))/2+parseInt(n(419))/3+parseInt(n(409))/4*(parseInt(n(427))/5)+parseInt(n(423))/6+-parseInt(n(408))/7*(-parseInt(n(396))/8)+parseInt(n(428))/9*(-parseInt(n(386))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function z(){const t=["length","call","return (function() ","console","test","exception","counter","2194593zkuZsL","scale","stateObject","while (true) {}","8267934BrrLFH","addBinding","lineMagicZone","TresPerspectiveCamera","135cXOKGB","153639xXFcqs","bind","gger","function *\\( *\\)","debu","2090prDxNw","#ff0000","warn","color","constructor","toString","1465826PnjwoH","apply","prototype","TresCanvas","88mPLkmR","input","error","log",'{}.constructor("return this")( )',"table","string","height","#201919","363465dVEwKQ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","1173956YIqRgK","30396rJbPse","trace","__proto__"];return(z=function(){return t})()}!function(){W(this,(function(){const t=A,e=new RegExp(t(431)),n=new RegExp(t(406),"i"),o=E(t(407));e[t(416)](o+"chain")&&n.test(o+t(397))?E():o("0")}))()}();const L=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(393)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function A(t,e){const n=z();return(A=function(t,e){return n[t-=386]})(t,e)}L(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(414)+t(400)+");")()}catch(n){e=window}return e}(),n=e[t(415)]=e.console||{},o=[t(399),t(388),"info",t(398),t(417),t(401),t(410)];for(let r=0;r<o[t(412)];r++){const e=L.constructor[t(394)][t(429)](L),i=o[r],a=n[i]||e;e[t(411)]=L[t(429)](L),e[t(391)]=a[t(391)][t(429)](a),n[i]=e}}))();const B=u({__name:O(425),setup(e){const n=O,o=x({reflectivity:.1,showGridHelper:!0,scale:1}),a=x({color:n(387),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(424)](a,n(389),{label:"颜色"}),s.addBinding(a,n(420),{label:"大小",min:.1,max:3,step:.1}),s[n(424)](a,n(403),{label:"高度",min:.1,max:3,step:.1}),s[n(424)](a,"speed",{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=I(s(395));return p(),w(l,{clearColor:s(404),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:S((()=>[e[0]||(e[0]=h(s(426),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),v(g(r),{enableDamping:""}),e[1]||(e[1]=h("TresAmbientLight",{intensity:2},null,-1)),(p(),w(y,null,{default:S((()=>[v(R,_({position:[3,0,0]},a),null,16)])),_:1})),(p(),w(y,null,{default:S((()=>[v(R,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(p(),w(y,null,{default:S((()=>[v(i,_({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function E(t){function e(t){const n=A;if(typeof t===n(402))return function(t){}[n(390)](n(422))[n(393)](n(418));1!==(""+t/t)[n(412)]||t%20==0?function(){return!0}[n(390)](n(432)+n(430))[n(413)]("action"):function(){return!1}[n(390)](n(432)+n(430))[n(393)](n(421)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{B as default};

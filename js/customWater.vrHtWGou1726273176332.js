import{a6 as t,C as e,_ as n}from"./three.874nNzAX1726273176332.js";import{U as r,J as a,Y as s,L as o}from"./@tresjs.BFyWuCYn1726273176332.js";import{a as i}from"./index.qxyd_JCa1726273176332.js";import"./index.W7xYqrhz1726273176332.js";import{C as l}from"./three-custom-shader-material.rb-2297Q1726273176332.js";import"./object-hash.POLi8wZH1726273176332.js";import"./@amap.5r4w7xpt1726273176332.js";import"./glsl-tokenizer.pufBtMwG1726273176332.js";import{p as c}from"./gl-noise.BrVtymbx1726273176332.js";import{d as u,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as M,m as x,al as z}from"./@vue.JNsx1iN61726273176332.js";import{P as C}from"./tweakpane.yHWGBmom1726273176332.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.8PjE497y1726273176332.js";import"./@vueuse.NxhkGURn1726273176332.js";import"./three-stdlib.OiSmdEWB1726273176332.js";import"./@pmndrs.4EygttyV1726273176332.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.3MqampMJ1726273176332.js";import"./all.three.9jnNjfTG1726273176332.js";import"./oimophysics.x0jH7fze1726273176332.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.AuXOJdy-1726273176332.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.PIiH96451726273176332.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.8ZJlHAH41726273176332.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.U_5aiApJ1726273176332.js";import"./glsl-token-string.tJdjKq7d1726273176332.js";import"./glsl-token-functions.g-9MLpdi1726273176332.js";import"./jszip.nlLK-hOV1726273176332.js";const S=H;!function(t,e){const n=H,r=k();for(;;)try{if(862172===parseInt(n(492))/1*(parseInt(n(462))/2)+-parseInt(n(431))/3*(parseInt(n(482))/4)+parseInt(n(455))/5*(parseInt(n(453))/6)+-parseInt(n(449))/7+-parseInt(n(468))/8*(-parseInt(n(475))/9)+-parseInt(n(469))/10*(parseInt(n(443))/11)+parseInt(n(456))/12*(-parseInt(n(446))/13))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=H,e=new RegExp(t(464)),n=new RegExp(t(447),"i"),r=O(t(467));e[t(424)](r+t(435))&&n[t(424)](r+"input")?O():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(444)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function H(t,e){const n=k();return(H=function(t,e){return n[t-=423]})(t,e)}function k(){const t=["122397JZCNEP","apply","baseMaterial","485797zLLubD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","3470285WIAlSr","uHeight","__proto__","TresMesh","8381910HjGsBz","waterHighlight","5nkObeL","84ykurUH","vertexShader","Flatshading","value","TresBoxGeometry","while (true) {}","1268CGwDhZ","Color","function *\\( *\\)","console","debu","init","6936nicBAF","410rtwMwF","material","table","constructor","uTime","string","306xYgSqZ","vertex","action","counter","tmRef","DoubleSide","#b3ffff","4576dTSccm","trace","needsUpdate","log",'{}.constructor("return this")( )',"stateObject","error","height","exception","fragment","1163GcXqwY","toString","test","MeshPhysicalMaterial","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","bind","convertLinearToSRGB","#52a7f7","call","231mBmDLm","length","args","warn","chain","waterColor","brightness","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","dispose","customWaterMesh","return (function() ","info"];return(k=function(){return t})()}B(void 0,(function(){const t=H;let e;try{e=Function(t(441)+t(486)+");")()}catch(a){e=window}const n=e[t(465)]=e[t(465)]||{},r=[t(485),t(434),t(442),t(488),t(490),t(471),t(483)];for(let s=0;s<r[t(432)];s++){const e=B[t(472)].prototype[t(427)](B),a=r[s],o=n[a]||e;e[t(451)]=B[t(427)](B),e[t(423)]=o[t(423)][t(427)](o),n[a]=e}}))();const G=["rotation-x"],L=[S(433)],W=u({__name:S(440),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(429)},waterHighlight:{default:S(481)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const s=S,o=t,i=p(null),u={vertex:s(426),fragment:s(438)},b={uTime:{value:0},waterColor:{value:new e(o[s(436)]).convertLinearToSRGB()},waterHighlight:{value:new(n[s(463)])(o.waterHighlight)[s(428)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o[s(437)]},uHeight:{value:o[s(489)]}},{onLoop:w}=r();return w((({elapsed:t})=>{const e=s;b[e(473)][e(459)]=-t/5})),f((()=>{const t=s;o[t(489)]&&(b[t(450)][t(459)]=o[t(489)]),o[t(436)]&&(b[t(436)][t(459)]=new e(o[t(436)])[t(428)]()),o[t(454)]&&(b[t(454)][t(459)]=new(n[t(463)])(o.waterHighlight).convertLinearToSRGB()),o[t(437)]&&(b.brightness[t(459)]=o.brightness)})),g((()=>o[s(458)]),(t=>{const e=s;i[e(459)][e(470)][e(484)]=!0})),g((()=>o[s(445)]),(t=>{const e=s,r=new l({baseMaterial:n[t],vertexShader:c(u[e(476)]),fragmentShader:u[e(491)],uniforms:b,flatShading:o[e(458)],side:n[e(480)],roughness:.2,metalness:.1,silent:!0});i[e(459)][e(470)][e(439)](),i[e(459)][e(470)]=r})),(t,e)=>{const r=s;return h(),m(r(452),{ref_key:r(479),ref:i,"rotation-x":-Math.PI/2},[v(r(460),{args:[5,5,t[r(489)],64,64,1]},null,8,L),d(_(a),{baseMaterial:n[r(425)],vertexShader:_(c)(u[r(476)]),fragmentShader:u[r(491)],uniforms:b,side:n[r(480)],roughness:.2,metalness:.1,flatShading:t[r(458)],silent:""},null,8,[r(445),r(457),"fragmentShader","side","flatShading"])],8,G)}}});function O(t){function e(t){const n=H;if(typeof t===n(474))return function(t){}[n(472)](n(461)).apply(n(478));1!==(""+t/t)[n(432)]||t%20==0?function(){return!0}.constructor(n(466)+n(448))[n(430)](n(477)):function(){return!1}.constructor(n(466)+n(448))[n(444)](n(487)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=E;!function(t,e){const n=E,r=N();for(;;)try{if(611451===parseInt(n(222))/1*(parseInt(n(219))/2)+-parseInt(n(184))/3+parseInt(n(221))/4*(-parseInt(n(223))/5)+-parseInt(n(171))/6+-parseInt(n(192))/7*(-parseInt(n(190))/8)+-parseInt(n(228))/9*(-parseInt(n(191))/10)+parseInt(n(224))/11*(parseInt(n(216))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(209)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=E,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(194),"i"),r=q(t(199));e[t(205)](r+t(186))&&n[t(205)](r+t(189))?q():r("0")}))()}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();P(void 0,(function(){const t=E;let e;try{e=Function(t(193)+t(214)+");")()}catch(a){e=window}const n=e.console=e.console||{},r=[t(213),t(202),t(177),"error",t(217),"table",t(198)];for(let s=0;s<r[t(204)];s++){const e=P[t(169)][t(211)][t(200)](P),a=r[s],o=n[a]||e;e[t(174)]=P[t(200)](P),e[t(180)]=o.toString[t(200)](o),n[a]=e}}))();const R=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),A=v("TresAmbientLight",{intensity:.5},null,-1),Z=v(D(226),{position:[15,15,15],intensity:1},null,-1);function N(){const t=["7jlHAqJ","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshNormalMaterial","height","string","trace","init","bind","baseMaterial","warn","pos-x.jpg","length","test","MeshPhysicalMaterial","pos-y.jpg","MeshDepthMaterial","apply","action","prototype","水体颜色","log",'{}.constructor("return this")( )',"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","62028XwWivR","exception","waterHighlight","68494kfjMZm","MeshBasicMaterial","88udmRkK","7ltOtYk","194535dQkKKS","2277XYjuxL","addBinding","TresDirectionalLight","MeshToonMaterial","9FpQCwk","MeshPhongMaterial","call","constructor","neg-z.jpg","2845530qsZwun","addBlade","stateObject","__proto__","neg-y.jpg","浪头颜色","info","value","ACESFilmicToneMapping","toString","#627179","#52a7f7","debu","999867rrLHZg","MeshStandardMaterial","chain","list","counter","input","1260944YJwcLu","8076190zUoIWo"];return(N=function(){return t})()}function E(t,e){const n=N();return(E=function(t,e){return n[t-=169]})(t,e)}const Y=u({__name:"customWater",setup(t){const e=D,r=b({alpha:!0,toneMapping:n[e(179)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:e(181),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:e(182),waterHighlight:"#b3ffff",brightness:1,baseMaterial:e(206)}),u=new C;return u.addBinding(c,e(196),{label:"高度",min:.1,max:5,step:.1}),u[e(225)](c,"waterColor",{label:e(212)}),u.addBinding(c,e(218),{label:e(176)}),u[e(225)](c,"brightness",{label:"亮度",min:0,max:1,step:.01}),u.addBinding(c,"Flatshading",{label:"Flatshading"}),u[e(172)]({view:e(187),label:"材质",options:[{text:e(206),value:"MeshPhysicalMaterial"},{text:"MeshBasicMaterial",value:e(220)},{text:"MeshNormalMaterial",value:e(195)},{text:e(185),value:e(185)},{text:e(229),value:e(229)},{text:e(227),value:e(227)},{text:"MeshLambertMaterial",value:"MeshLambertMaterial"},{text:e(208),value:"MeshDepthMaterial"}],value:c[e(201)]}),u.on("change",(t=>{const n=e;"材质"===t.target.label&&(c[n(201)]=t[n(178)])})),(t,n)=>{const u=e;return h(),w(_(o),x(r,{"window-size":""}),{default:y((()=>[R,d(_(s),j(M(a)),null,16),A,Z,d(W,j(M(c)),null,16),d(_(I),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:[u(203),"neg-x.jpg",u(207),u(175),"pos-z.jpg",u(170)],path:u(215)})])),_:1}))])),_:1},16)}}});function q(t){function e(t){const n=E;if(typeof t===n(197))return function(t){}.constructor("while (true) {}").apply(n(188));1!==(""+t/t)[n(204)]||t%20==0?function(){return!0}[n(169)](n(183)+"gger")[n(230)](n(210)):function(){return!1}[n(169)](n(183)+"gger")[n(209)](n(173)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Y as default};

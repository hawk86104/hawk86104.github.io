import{a6 as e,_ as t,C as n}from"./three.FxqAALWt1741168315107.js";import{e as r,h as a,o,f as i}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{a as s}from"./index.kxnBajYY1741168315107.js";import"./index.f80mnL9X1741168315107.js";import{z as l}from"./three-custom-shader-material.q4QTPw9f1741168315107.js";import{p as u}from"./gl-noise.BrVtymbx1741168315107.js";import{d as c,b as p,a2 as f,w as g,o as h,H as m,N as v,j as d,u as _,r as b,f as w,g as M,aj as y,ak as j,m as x,al as S}from"./@vue.NRI7TcgI1741168315107.js";import{P as C}from"./tweakpane.yDiyAAkA1741168315107.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.0K-eyQD01741168315107.js";import"./postprocessing.hfy6Kqg11741168315107.js";import"./@vueuse.Z8xAfE_A1741168315107.js";import"./three-stdlib.dTHRtr7H1741168315107.js";import"./@pmndrs.rn5_p8x-1741168315107.js";import"./object-hash.Ter1BX541741168315107.js";import"./@amap.d8-LJgNK1741168315107.js";import"./jszip.it_63bJF1741168315107.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.kCBCfqMq1741168315107.js";import"./all.three.hCBbh0t71741168315107.js";import"./oimophysics.x0jH7fze1741168315107.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3Qut_-XR1741168315107.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.szIQGpVs1741168315107.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.7IrD6muy1741168315107.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.wPt8KkDb1741168315107.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.5i3AigwW1741168315107.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.RBLRdAhu1741168315107.js";const z=B;!function(e,t){const n=B,r=W();for(;;)try{if(174242===parseInt(n(155))/1+-parseInt(n(187))/2*(-parseInt(n(200))/3)+parseInt(n(182))/4+parseInt(n(178))/5+-parseInt(n(144))/6*(-parseInt(n(184))/7)+-parseInt(n(153))/8+-parseInt(n(141))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[B(142)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){I(this,(function(){const e=B,t=new RegExp(e(188)),n=new RegExp(e(169),"i"),r=F(e(201));t[e(194)](r+e(176))&&n[e(194)](r+e(147))?F():r("0")}))()}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[B(142)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function B(e,t){const n=W();return(B=function(e,t){return n[e-=139]})(e,t)}G(void 0,(function(){const e=B;let t;try{t=Function(e(166)+e(173)+");")()}catch(a){t=window}const n=t[e(183)]=t[e(183)]||{},r=["log","warn",e(180),e(140),e(151),"table",e(196)];for(let o=0;o<r[e(175)];o++){const t=G.constructor[e(193)].bind(G),a=r[o],i=n[a]||t;t[e(158)]=G[e(156)](G),t[e(152)]=i[e(152)][e(156)](i),n[a]=t}}))();const P=[z(161)],H=[z(170)],O=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(186)},waterHighlight:{default:z(150)},brightness:{default:1},baseMaterial:{default:e}},setup(e){const o=z,i=e,s=p(null),c={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:o(160)},b={uTime:{value:0},waterColor:{value:new(t[o(145)])(i[o(179)])[o(165)]()},waterHighlight:{value:new n(i[o(143)])[o(165)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[o(154)]},uHeight:{value:i[o(181)]}},{onLoop:w}=r();return w((({elapsed:e})=>{const t=o;b[t(195)][t(174)]=-e/5})),f((()=>{const e=o;i[e(181)]&&(b.uHeight[e(174)]=i[e(181)]),i.waterColor&&(b.waterColor[e(174)]=new(t[e(145)])(i[e(179)]).convertLinearToSRGB()),i[e(143)]&&(b[e(143)][e(174)]=new(t[e(145)])(i[e(143)]).convertLinearToSRGB()),i[e(154)]&&(b[e(154)].value=i[e(154)])})),g((()=>i[o(185)]),(e=>{const t=o;s.value[t(168)][t(199)]=!0})),g((()=>i.baseMaterial),(e=>{const n=o,r=new l({baseMaterial:t[e],vertexShader:u(c[n(192)]),fragmentShader:c[n(189)],uniforms:b,flatShading:i.Flatshading,side:t[n(202)],roughness:.2,metalness:.1,silent:!0});s[n(174)].material[n(198)](),s[n(174)][n(168)]=r})),(e,n)=>{const r=o;return h(),m("TresMesh",{ref_key:"tmRef",ref:s,"rotation-x":-Math.PI/2},[v(r(164),{args:[5,5,e[r(181)],64,64,1]},null,8,H),d(_(a),{baseMaterial:t[r(172)],vertexShader:_(u)(c[r(192)]),fragmentShader:c[r(189)],uniforms:b,side:t[r(202)],roughness:.2,metalness:.1,flatShading:e[r(185)],silent:""},null,8,[r(197),r(149),r(148),r(167),r(163)])],8,P)}}});function W(){const e=["TresBoxGeometry","convertLinearToSRGB","return (function() ","side","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","args","gger","MeshPhysicalMaterial",'{}.constructor("return this")( )',"value","length","chain","counter","320805tYYJkK","waterColor","info","height","738604erwTpD","console","62209XoetEo","Flatshading","#52a7f7","206yLqDPA","function *\\( *\\)","fragment","stateObject","action","vertex","prototype","test","uTime","trace","baseMaterial","dispose","needsUpdate","6780whpmJy","init","DoubleSide","while (true) {}","error","5939451Saywiw","apply","waterHighlight","168zxFSSa","Color","debu","input","fragmentShader","vertexShader","#b3ffff","exception","toString","1865360IBfYua","brightness","336923kfNPJn","bind","call","__proto__","string","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","rotation-x","constructor","flatShading"];return(W=function(){return e})()}function F(e){function t(e){const n=B;if(typeof e===n(159))return function(e){}[n(162)](n(139)).apply(n(177));1!==(""+e/e)[n(175)]||e%20==0?function(){return!0}[n(162)](n(146)+n(171))[n(157)](n(191)):function(){return!1}[n(162)](n(146)+n(171))[n(142)](n(190)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const k=A;function D(){const e=["MeshPhysicalMaterial","bind","customWater","constructor","10366930GCMGSw","target","test","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","9368775NTbvcu","MeshToonMaterial","263265oeiHsO","Flatshading","99114nSAgIK","neg-z.jpg","action","return (function() ","input","console","TresAmbientLight","neg-y.jpg","stateObject","addBinding","value","log","baseMaterial",'{}.constructor("return this")( )',"height","gger","pos-z.jpg","2998diWYgk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pos-x.jpg","4OYIXal","#3a78a2","MeshDepthMaterial","label","884ERvBYs","MeshLambertMaterial","while (true) {}","TresPerspectiveCamera","list","28ZoGPiM","33nmaEQI","apply","warn","TresDirectionalLight","waterColor","change","prototype","#627179","length","toString","5802200GBZSDr","#52a7f7","水体颜色","counter","MeshStandardMaterial","1235472KmWQjE","brightness","string","chain","trace","call","MeshBasicMaterial","ACESFilmicToneMapping","MeshNormalMaterial"];return(D=function(){return e})()}!function(e,t){const n=A,r=D();for(;;)try{if(665230===-parseInt(n(329))/1*(parseInt(n(388))/2)+parseInt(n(371))/3*(-parseInt(n(391))/4)+parseInt(n(369))/5+parseInt(n(350))/6*(-parseInt(n(334))/7)+parseInt(n(345))/8+-parseInt(n(367))/9+-parseInt(n(363))/10*(-parseInt(n(335))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[A(336)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){N(this,(function(){const e=A,t=new RegExp("function *\\( *\\)"),n=new RegExp(e(389),"i"),r=L("init");t[e(365)](r+e(353))&&n[e(365)](r+e(375))?L():r("0")}))()}();const R=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[A(336)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function A(e,t){const n=D();return(A=function(e,t){return n[e-=327]})(e,t)}R(void 0,(function(){const e=A,t=function(){const e=A;let t;try{t=Function(e(374)+e(384)+");")()}catch(n){t=window}return t}(),n=t[e(376)]=t[e(376)]||{},r=[e(382),e(337),"info","error","exception","table",e(354)];for(let a=0;a<r[e(343)];a++){const t=R[e(362)][e(341)].bind(R),o=r[a],i=n[o]||t;t.__proto__=R.bind(R),t[e(344)]=i.toString[e(360)](i),n[o]=t}}))();const E=c({__name:k(361),setup(e){const n=k,r=b({alpha:!0,toneMapping:t[n(357)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(342),sectionColor:n(392),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(346),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(359)}),c=new C;return c.addBinding(u,n(385),{label:"高度",min:.1,max:5,step:.1}),c[n(380)](u,n(339),{label:n(347)}),c.addBinding(u,"waterHighlight",{label:"浪头颜色"}),c[n(380)](u,n(351),{label:"亮度",min:0,max:1,step:.01}),c[n(380)](u,n(370),{label:n(370)}),c.addBlade({view:n(333),label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:"MeshBasicMaterial",value:n(356)},{text:"MeshNormalMaterial",value:n(358)},{text:n(349),value:"MeshStandardMaterial"},{text:"MeshPhongMaterial",value:"MeshPhongMaterial"},{text:n(368),value:n(368)},{text:n(330),value:n(330)},{text:n(327),value:n(327)}],value:u.baseMaterial}),c.on(n(340),(e=>{const t=n;"材质"===e[t(364)][t(328)]&&(u[t(383)]=e[t(381)])})),(e,t)=>{const c=n;return h(),w(_(i),x(r,{"window-size":""}),{default:M((()=>[t[0]||(t[0]=v(c(332),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),y(j(a)),null,16),t[1]||(t[1]=v(c(377),{intensity:.5},null,-1)),t[2]||(t[2]=v(c(338),{position:[15,15,15],intensity:1},null,-1)),d(O,y(j(u)),null,16),d(_(T),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(S,null,{default:M((()=>[d(_(s),{files:[c(390),"neg-x.jpg","pos-y.jpg",c(378),c(387),c(372)],path:c(366)})])),_:1}))])),_:1},16)}}});function L(e){function t(e){const n=A;if(typeof e===n(352))return function(e){}[n(362)](n(331)).apply(n(348));1!==(""+e/e)[n(343)]||e%20==0?function(){return!0}[n(362)]("debu"+n(386))[n(355)](n(373)):function(){return!1}[n(362)]("debu"+n(386))[n(336)](n(379)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{E as default};

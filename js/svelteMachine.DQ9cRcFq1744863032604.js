import{m as t,e,a as n,H as o}from"./@tresjs.DDZ0vesk1744863032604.js";import"./index.BaQ1Z68q1744863032604.js";import{T as s,I as r,V as i,f as c,b_ as a}from"./three.B0XaFSnH1744863032604.js";import{d as u,H as l,o as p,F as d,J as f,a5 as h,b as m,s as b,j as v,u as y,r as g,w as j,f as w,e as z,am as x,ak as E,al as I}from"./@vue.DK6ok9LJ1744863032604.js";import{l as _,a as M}from"./utils.b-buAe5x1744863032604.js";import"./index.CLfAe2tm1744863032604.js";import{l as S}from"./cssLoaders.DLMPsUpw1744863032604.js";import"./postprocessing.DMK_Mhe01744863032604.js";import"./@vueuse.aRlY5CPe1744863032604.js";import"./@fesjs.1a7Lul6Z1744863032604.js";import"./vue-router.CdrpVSr11744863032604.js";import"./lodash-es.BOsRjQhS1744863032604.js";import"./@qlin.q6OWdsQV1744863032604.js";import"./pinia.vfLI9vPt1744863032604.js";import"./@babel.BPq7uOAK1744863032604.js";import"./@floating-ui.BFjFSAYt1744863032604.js";import"./@juggle.CcBCnTIR1744863032604.js";import"./jszip.H-wAjEeh1744863032604.js";import"./@amap.CGUF9xH41744863032604.js";import"./file-saver.CaT90B8D1744863032604.js";import"./utils.CppDyFGn1744863032604.js";import"./three-mesh-ui.module.skm2U1Jq1744863032604.js";const k=U;function R(){const t=["keyup","player: Event type not supported (","addEventListener","onPointerMove","1200295kdJCAB","onPointerDown","stringify","warn","call","stateObject","chain","info","\nreturn ","暂时不考虑释放资源的函数","player: Script without object.","toString","keydown","return (function() ",'{}.constructor("return this")( )',"renderer","debu","width","SpotLightEvent","constructor","dispatch","1773FyHZEY","action","counter","value","TextureLoader","push","table","length","7kDTzUf","__proto__","sizes","THREE","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","camera","events","init","this.shadow.mapSize.width = 1024 * 2\nthis.shadow.mapSize.height = 1024 * 2\nthis.shadow.camera.near = 1\nthis.shadow.camera.far = 50\nthis.shadow.camera.top = 80\nthis.shadow.camera.bottom = -80\nthis.shadow.camera.left = -80\nthis.shadow.camera.right = 80\nthis.shadow.radius = 24\nthis.shadow.bias = -0.0075\nfunction update( event ) {}","gger","42748VqXCVI","uuid","pointermove","parentElement","domElement","removeEventListener","apply","6BvNeTI","error","490728bZXodg","update","3309570itRUHm","210DCXQfR","trace","754469bJEHkn","player,renderer,scene,camera","stop","2381944JUkovM","getObjectByProperty","onPointerUp","replace","onKeyDown","while (true) {}","scene","暂时不考虑场景的设置函数","dirb","log","pointerup","onKeyUp","21670xybqvB","console","pointerdown","bind"];return(R=function(){return t})()}!function(){const t=U,e=R();for(;;)try{if(418342===-parseInt(t(224))/1+-parseInt(t(219))/2+-parseInt(t(222))/3*(-parseInt(t(210))/4)+-parseInt(t(247))/5*(-parseInt(t(217))/6)+-parseInt(t(199))/7*(parseInt(t(227))/8)+-parseInt(t(268))/9*(-parseInt(t(239))/10)+parseInt(t(221))/11)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const L=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[U(216)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){L(this,(function(){const t=U,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(204),"i"),o=B(t(207));e.test(o+t(253))&&n.test(o+"input")?B():o("0")}))()}();const P=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[U(216)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();P(void 0,(function(){const t=U,e=function(){const t=U;let e;try{e=Function(t(260)+t(261)+");")()}catch(n){e=window}return e}(),n=e[t(240)]=e[t(240)]||{},o=[t(236),t(250),t(254),t(218),"exception",t(274),t(223)];for(let s=0;s<o[t(198)];s++){const e=P[t(266)][t(203)].bind(P),r=o[s],i=n[r]||e;e[t(200)]=P.bind(P),e[t(258)]=i[t(258)][t(242)](i),n[r]=e}}))(),window[k(202)]=s;const A={scene:null,renderer:null,camera:null,sizes:null},C={get renderer(){const t=k;return A[t(262)]?.value},loader:new(s[k(272)]),get scene(){const t=k;return A[t(233)]?.[t(271)]},get camera(){const t=k;return A.camera?.[t(271)]},get width(){const t=k;return A.sizes?.[t(264)]?.[t(271)]},get height(){return A.sizes?.height?.value},get dom(){const t=k;return A[t(262)]?.[t(271)].domElement[t(213)]},get canvas(){const t=k;return A[t(262)]?.[t(271)][t(214)]},events:{},init(t,e,n,o){const s=k;A.scene=t,A[s(262)]=e,A[s(205)]=n,A[s(201)]=o},load(t){const e=k,n={"1d0e8871-bd60-47f9-8ab7-232dabd30201":[{name:e(265),source:"this.shadow.mapSize.width = 1024 * 2\nthis.shadow.mapSize.height = 1024 * 2\nthis.shadow.camera.near = 1\nthis.shadow.camera.far = 10\nthis.shadow.bias = -0.0075\nthis.shadow.radius = 24\nthis.target.position.copy(this.position.clone().setY(0))\nfunction update( event ) {}"}],"beea1423-1e37-47ab-9443-f8429259e120":[{name:e(235),source:e(208)}],"31517222-A9A7-4EAF-B5F6-60751C0BABA3":[{name:"senceScirpt",source:"this.environment.mapping = THREE.EquirectangularReflectionMapping;\nthis.environment.colorSpace = THREE.SRGBColorSpace;\nfunction update( event ) {}"}]};this[e(206)]={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]};let o=e(225);const s={};for(const i in this.events)o+=","+i,s[i]=i;const r=JSON[e(249)](s)[e(230)](/\"/g,"");for(const i in n){let s=i;i===t.uuid&&(s=this[e(233)][e(211)]);const c=this[e(233)][e(228)]("uuid",s,!0);if(void 0===c){console[e(250)](e(257),s);continue}const a=n[i];for(let t=0;t<a[e(198)];t++){const n=a[t],s=new Function(o,n.source+e(255)+r+";")[e(242)](c)(this,this[e(262)],this.scene,this[e(205)]);for(const t in s)void 0!==s[t]&&(void 0!==this[e(206)][t]?this[e(206)][t][e(273)](s[t][e(242)](c)):console[e(250)](e(244),t,")"))}this[e(267)](this[e(206)][e(207)],arguments)}},dispatch(t,e){for(let n=0,o=t[k(198)];n<o;n++)t[n](e)},setCamera(t){console[k(250)]("暂时不考虑摄像机的设置函数",t)},setScene(t){const e=k;console[e(250)](e(234),t)},setPixelRatio(t){console[k(250)]("暂时不考虑像素比的设置函数",t)},setSize(t){console[k(250)]("暂时不考虑尺寸的设置函数",t)},dispose(){const t=k;console[t(250)](t(256))},onKeyDown(t){const e=k;C[e(267)](C[e(206)][e(259)],t)},onKeyUp(t){const e=k;C[e(267)](C.events[e(243)],t)},onPointerDown(t){const e=k;C.dispatch(C[e(206)].pointerdown,t)},onPointerUp(t){const e=k;C[e(267)](C.events[e(237)],t)},onPointerMove(t){const e=k;C[e(267)](C[e(206)].pointermove,t)},play(){const t=k;document[t(245)](t(259),this[t(231)]),document[t(245)](t(243),this[t(238)]),document.addEventListener(t(241),this[t(248)]),document.addEventListener(t(237),this[t(229)]),document.addEventListener(t(212),this.onPointerMove),this.dispatch(this.events.start,null)},stop(){const t=k;document.removeEventListener(t(259),this[t(231)]),document[t(215)](t(243),this[t(238)]),document[t(215)](t(241),this.onPointerDown),document[t(215)](t(237),this[t(229)]),document[t(215)](t(212),this[t(246)]),this[t(267)](this.events[t(226)],arguments)},render(t,e){const n=k;this[n(267)](this[n(206)][n(220)],{time:t,delta:e})}};function U(t,e){const n=R();return U=function(t,e){return n[t-=198]},U(t,e)}function B(t){function e(t){const n=U;if("string"==typeof t)return function(t){}[n(266)](n(232))[n(216)](n(270));1!==(""+t/t)[n(198)]||t%20==0?function(){return!0}[n(266)](n(263)+n(209))[n(251)](n(269)):function(){return!1}.constructor("debu"+n(209))[n(216)](n(252)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const T={points:[{x:-16.017528533935547,y:2.4581613540649414,z:53.098697662353516},{x:-11.40013599395752,y:2.4513251781463623,z:43.62754821777344},{x:-7.9051361083984375,y:2.4462289810180664,z:36.4436149597168},{x:-5.53253173828125,y:2.442873001098633,z:31.546899795532227},{x:-4.282320976257324,y:2.4412572383880615,z:28.937395095825195},{x:-3.9756288528442383,y:2.4410974979400635,z:28.24086570739746},{x:-3.7963345050811768,y:2.4410974979400635,z:27.74983024597168},{x:-3.6438193321228027,y:2.4410974979400635,z:27.253768920898438},{x:-3.5180840492248535,y:2.4410974979400635,z:26.75269317626953},{x:-3.419203519821167,y:2.4411063194274902,z:26.243703842163086},{x:-3.3517673015594482,y:2.4416656494140625,z:25.55027961730957},{x:-3.318483829498291,y:2.4430952072143555,z:24.5682430267334},{x:-3.319352865219116,y:2.445394515991211,z:23.297592163085938},{x:-3.354374647140503,y:2.448564052581787,z:21.73832893371582},{x:-3.4121222496032715,y:2.4521596431732178,z:19.611284255981445},{x:-3.461057662963867,y:2.454956293106079,z:16.145946502685547},{x:-3.49935245513916,y:2.456882953643799,z:11.297648429870605},{x:-3.5270066261291504,y:2.457939386367798,z:5.066390037536621},{x:-3.544764518737793,y:2.4581613540649414,z:-2.423649311065674},{x:-3.565464973449707,y:2.4581613540649414,z:-9.03036880493164},{x:-3.5937604904174805,y:2.4581613540649414,z:-13.977668762207031},{x:-3.629650592803955,y:2.4581613540649414,z:-17.265522003173828},{x:-3.673135280609131,y:2.4581613540649414,z:-18.893949508666992},{x:-3.7082104682922363,y:2.4581613540649414,z:-19.473438262939453},{x:-3.7077581882476807,y:2.4581613540649414,z:-20.038450241088867},{x:-3.6713337898254395,y:2.4581613540649414,z:-20.605941772460938},{x:-3.5989370346069336,y:2.4581613540649414,z:-21.175914764404297},{x:-3.3510568141937256,y:2.4581613540649414,z:-22.262161254882812},{x:-1.7961064577102661,y:2.4581615924835205,z:-28.032060623168945},{x:1.3139424324035645,y:2.4581618309020996,z:-39.39905548095703},{x:5.9790754318237305,y:2.458162546157837,z:-56.36309814453125},{x:12.19931411743164,y:2.458163261413574,z:-78.92425537109375}],closed:!1},D=O;function F(){const t=["instanceMatrix","exception","copy","Matrix4","8624196NlXcBj","debu","apply","prototype","material","function *\\( *\\)","init","counter","string","error","CatmullRomCurve3","5239184beGVqz","gger","test","userData","toString","progress","106CUnWUI","computeBoundingSphere","setMatrixAt","geometry","601qRctao","constructor","warn","position","698692IaIAHr","log","points","5UNUyMT","closed","progresses","5882350auFLag","bind","count","clone","action","table","18psTbQv","getPointAt","1951972fwiwtQ","call","length","14ZqZZFB","stateObject","input","trace","return (function() ","1991226QSjyJe","push","needsUpdate","setPosition","visible","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console"];return(F=function(){return t})()}!function(){const t=O,e=F();for(;;)try{if(688789===parseInt(t(210))/1*(parseInt(t(206))/2)+parseInt(t(226))/3*(parseInt(t(214))/4)+-parseInt(t(217))/5*(parseInt(t(236))/6)+-parseInt(t(231))/7*(-parseInt(t(200))/8)+-parseInt(t(189))/9+-parseInt(t(220))/10+parseInt(t(228))/11)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const H=function(t){const e=O,n=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){n(this,(function(){const t=O,e=new RegExp(t(194)),n=new RegExp(t(241),"i"),o=q(t(195));e[t(202)](o+"chain")&&n[t(202)](o+t(233))?q():o("0")}))()}();const o=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[O(191)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();o(this,(function(){const t=O,e=function(){const t=O;let e;try{e=Function(t(235)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(242)]=e.console||{},s=[t(215),t(212),"info",t(198),t(244),t(225),t(234)];for(let r=0;r<s[t(230)];r++){const e=o[t(211)][t(192)].bind(o),i=s[r],c=n[i]||e;e.__proto__=o.bind(o),e[t(204)]=c[t(204)][t(221)](c),n[i]=e}}))();const r=t[e(216)],c=[];for(const s of r){const t=s.x,e=s.y,n=s.z;c.unshift(new i(t,e,n))}const a=new(s[e(199)])(c);return a[e(218)]=t[e(218)],a}(T),Z=new(s[D(188)]);function O(t,e){const n=F();return(O=function(t,e){return n[t-=187]})(t,e)}function q(t){function e(t){const n=O;if(typeof t===n(197))return function(t){}.constructor("while (true) {}")[n(191)](n(196));1!==(""+t/t)[n(230)]||t%20==0?function(){return!0}[n(211)](n(190)+"gger")[n(229)](n(224)):function(){return!1}[n(211)](n(190)+n(201)).apply(n(232)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const J=["object"],$=["object"],N=["object"],Q=["object"],V=["object"],W=["object"],K=["object"],X=u({__name:"firstLevel-bf61e255d699",props:{object:{}},setup(n){const o=n,{scene:s}=t(),i=function(t){const e=D,n=H[e(216)][e(230)]/2,o=new r(t[e(209)],t[e(193)],n);o[e(203)]={progresses:[]};for(let s=0;s<n;s++){const t=s/(n-1),r=H[e(227)](t);o[e(203)][e(219)][s]=t,Z[e(239)](r),o.setMatrixAt(s,Z)}return o}(o.object[1]);s.value.add(i);const a=function(t){const e=D,n=[];n[e(237)](t[2][e(223)]()),n.push(t[4].clone()),n[e(237)](t[5][e(223)]()),n[e(237)](t[2][e(223)]()),n[e(237)](t[5][e(223)]()),n[e(237)](t[4][e(223)]()),n.push(t[2][e(223)]()),n[e(237)](t[4][e(223)]());for(let o=0;o<n[e(230)];o++){const t=o/n.length*.6;n[o][e(203)]={progress:t};const s=H[e(227)](t);n[o][e(213)][e(187)](s),n[o].visible=!0}return n}(o.object),u=new c;u.position.set(0,1,0),u.add(...a),s.value.add(u);const h=function(t){const e=D,n=[];for(let o=0;o<6;o++){n[e(237)](t[3][e(223)]());const s=1-o/6*.4-.04;n[o].userData={progress:s};const r=H[e(227)](s);n[o][e(213)][e(187)](r),n[o][e(240)]=!0}return n}(o.object),m=new c;m.add(...h),m.position.set(0,1,0),s.value.add(m);const{onLoop:b}=e();return b((({delta:t,elapsed:e})=>{i&&function(t){const e=D,n=t[e(203)][e(219)];for(let o=0;o<t[e(222)];o++){const s=H[e(227)](n[o]);Z[e(239)](s),t[e(208)](o,Z),n[o]+=5e-4,n[o]>1&&(n[o]=0)}t[e(243)][e(238)]=!0,t[e(207)]()}(i),a&&function(t){const e=D;for(let n=0;n<t[e(230)];n++){t[n][e(203)].progress+=5e-4,t[n][e(203)][e(205)]>.6&&(t[n][e(203)][e(205)]=0);const o=t[n][e(203)][e(205)],s=H[e(227)](o);"flat_item"===t[n].name&&(s.y=1.5),t[n][e(213)][e(187)](s)}}(a),h&&function(t){const e=D;for(let n=0;n<t.length;n++){t[n][e(203)][e(205)]+=5e-4,t[n][e(203)][e(205)]>1&&(t[n][e(203)].progress=1-5/6*.4-.04);const o=t[n][e(203)].progress,s=H[e(227)](o);t[n][e(213)][e(187)](s)}}(h)})),(t,e)=>(p(),l(d,null,[f("primitive",{object:t.object[0]},null,8,J),f("primitive",{object:t.object[1],visible:!1},null,8,$),f("primitive",{object:t.object[2]},null,8,N),f("primitive",{object:t.object[4]},null,8,Q),f("primitive",{object:t.object[5]},null,8,V),f("primitive",{object:t.object[6]},null,8,W),f("primitive",{object:t.object[3]},null,8,K)],64))}}),G=["object"],Y=["object"],tt=["object"],et=["object"],nt=["object"],ot=u({__name:"scene",async setup(n){let o,s;const{scene:r,renderer:i,camera:c,sizes:u}=t();C.init(r,i,c,u);const g=new a,j=([o,s]=h((()=>_("./plugins/tresEditor/svelteMachine/json/scene.json"))),o=await o,s(),o);if(j.geometries)for(const t of j.geometries)if(t.data&&t.data.startsWith("url:")){let e=t.data.slice(4);e.startsWith("geometries/")&&(e=`./plugins/tresEditor/svelteMachine/${e}`),t.data=([o,s]=h((()=>_(e))),o=await o,s(),o)}if(j.images)for(const t of j.images)if(t.url&&t.url.startsWith("url:")){let e=t.url.slice(4);e.startsWith("images/")&&(e=`./plugins/tresEditor/svelteMachine/${e}`),t.url=([o,s]=h((()=>M(e))),o=await o,s(),o)}const w=g.parse(j),z=m(null);b((()=>{if(r.value.background=w.background,r.value.environment=w.environment,r.value.fog=w.fog,C.load(w),C.play(),z.value){const t=z.value;t.target.position.set(-3.8,0,-2.3),r.value.add(t.target),t.angle=Math.PI/2.5}}));const{onLoop:x}=e();return x((({delta:t,elapsed:e})=>{if(C.renderer&&C.render(1e3*e,1e3*t),z.value){z.value.intensity=100+100*Math.sin(2*e)}})),(t,e)=>(p(),l(d,null,[f("primitive",{object:y(w).children[0]},[v(X,{object:y(w).children[0].children},null,8,["object"])],8,G),f("primitive",{object:y(w).children[1]},null,8,Y),f("primitive",{object:y(w).children[2]},null,8,tt),f("primitive",{object:y(w).children[3]},null,8,et),f("primitive",{object:y(w).children[4],ref_key:"spotLightRef",ref:z},null,8,nt)],64))}}),st=u({__name:"svelteMachine",setup(t){const e=g({clearColor:"#201919",windowSize:!0,antialias:!0,shadows:!0,shadowMapType:2,toneMapping:3,toneMappingExposure:1.75}),s=(new a).parse({metadata:{version:4.6,type:"Object",generator:"Object3D.toJSON"},object:{type:"PerspectiveCamera",name:"Camera",layers:1,matrix:[-.6267758441936044,-27755575615628914e-33,.7791996157182023,0,.48061725621232265,.787112942007701,.3866009176850464,0,-.6133181019392243,.6168088978962458,-.49334337870258826,0,-80.48773984917322,89.13969162136891,-91.54490099940386,1],up:[0,1,0],fov:50,zoom:1,near:.01,far:1e3,focus:10,aspect:1.1063238359972203,filmGauge:35,filmOffset:0}}),r=m(null);return j((()=>r.value),(t=>{t.copy(s)})),(t,s)=>(p(),l(d,null,[v(y(S)),v(y(o),E(I(e)),{default:w((()=>[v(y(n)),f("TresPerspectiveCamera",{ref_key:"cameraRef",ref:r,uuid:"9ca45c84-3c16-48da-b0a2-9e469abea3d1",name:"Camera"},null,512),(p(),z(x,null,{default:w((()=>[v(ot)])),_:1}))])),_:1},16)],64))}});export{st as default};

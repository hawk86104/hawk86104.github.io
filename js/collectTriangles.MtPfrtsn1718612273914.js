import{a as t,r as n,$ as e,d as r}from"./@tresjs.W42D3qe_1718612273914.js";import{_ as o}from"./index.25tNzBRv1718612273914.js";import{a as s}from"./index.gLXaRzp41718612273914.js";import{a5 as i,N as c,V as u,B as a,cB as l}from"./three.HHcT7YAr1718612273914.js";import{P as p}from"./tweakpane.qqn77PB81718612273914.js";import{I as f,C as h,N as g,c as m,d,a as y}from"./three-mesh-bvh.EwUvM4mC1718612273914.js";import{d as w,a3 as b,b as v,a2 as j,o as I,D as _,J as x,u as A,F as R,r as T,e as k,j as z,g as M,m as B,f as Z,al as C}from"./@vue.CpOXM7bB1718612273914.js";import"./@vueuse.YjRg4c7n1718612273914.js";import"./default.vue_vue_type_script_setup_true_lang.Uj8aYYMz1718612273914.js";import"./@fesjs.K6L2Ptsw1718612273914.js";import"./vue-router.8CWAXHk21718612273914.js";import"./lodash-es.nFpJXAf-1718612273914.js";import"./@qlin.yHhFDldE1718612273914.js";import"./pinia.Io9o2y5w1718612273914.js";import"./@floating-ui.BPbuo5Gx1718612273914.js";import"./@juggle.7yjBMqoW1718612273914.js";import"./three-stdlib.eIANyClj1718612273914.js";import"./@pmndrs.GoGkK4yp1718612273914.js";import"./object-hash.NQGxxEoE1718612273914.js";import"./@amap.zA6BxCQR1718612273914.js";import"./jszip.ceBEBY8K1718612273914.js";function E(){const t=["call","stateObject","clientX","error","12GouUgp","1261630Cfiqus",'{}.constructor("return this")( )',"debu","function *\\( *\\)","44qRoHsH","4366648TznQyV","console","pointermove","gger","enabled","return (function() ","4999870WRfzhy","warn","36vDbEmG","apply","length","innerWidth","4AQbHVd","firstHitOnly","addEventListener","exception","clientY","intersectObject","127173nkstzf","init","bind","482501RHwRiB","22DfZVGu","Raycaster","17288124BRnkhI","info","pointerup","pointerdown","string","prototype","value","button","innerHeight","__proto__","pointerType","2216879vtaRAu","constructor","table"];return(E=function(){return t})()}!function(t,n){const e=S,r=E();for(;;)try{if(867166===parseInt(e(401))/1*(-parseInt(e(392))/2)+-parseInt(e(398))/3*(parseInt(e(427))/4)+-parseInt(e(434))/5+-parseInt(e(422))/6*(parseInt(e(415))/7)+parseInt(e(428))/8+parseInt(e(436))/9*(parseInt(e(423))/10)+parseInt(e(402))/11*(parseInt(e(404))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const O=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(389)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function S(t,n){const e=E();return(S=function(t,n){return e[t-=389]})(t,n)}!function(){O(this,(function(){const t=S,n=new RegExp(t(426)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=H(t(399));n.test(r+"chain")&&e.test(r+"input")?H():r("0")}))()}();const F=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();F(void 0,(function(){const t=S;let n;try{n=Function(t(433)+t(424)+");")()}catch(o){n=window}const e=n.console=n[t(429)]||{},r=["log",t(435),t(405),t(421),t(395),t(417),"trace"];for(let s=0;s<r[t(390)];s++){const n=F[t(416)][t(409)][t(400)](F),o=r[s],i=e[o]||n;n[t(413)]=F.bind(F),n.toString=i.toString[t(400)](i),e[o]=n}}))();function H(t){function n(t){const e=S;if(typeof t===e(408))return function(t){}[e(416)]("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(425)+e(431))[e(418)]("action"):function(){return!1}[e(416)](e(425)+e(431))[e(389)](e(419)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const U=D;!function(t,n){const e=D,r=L();for(;;)try{if(455938===parseInt(e(194))/1*(-parseInt(e(224))/2)+parseInt(e(185))/3*(-parseInt(e(235))/4)+-parseInt(e(169))/5*(-parseInt(e(239))/6)+-parseInt(e(172))/7+-parseInt(e(226))/8*(-parseInt(e(200))/9)+parseInt(e(249))/10+-parseInt(e(181))/11*(parseInt(e(196))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(215)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){V(this,(function(){const t=D,n=new RegExp(t(251)),e=new RegExp(t(231),"i"),r=J("init");n[t(250)](r+t(243))&&e[t(250)](r+t(244))?J():r("0")}))()}();const $=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(215)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function D(t,n){const e=L();return(D=function(t,n){return e[t-=169]})(t,n)}$(void 0,(function(){const t=D;let n;try{n=Function("return (function() "+t(211)+");")()}catch(o){n=window}const e=n.console=n[t(197)]||{},r=[t(171),t(234),"info",t(199),t(238),t(258),t(187)];for(let s=0;s<r[t(195)];s++){const n=$[t(221)][t(216)][t(259)]($),o=r[s],i=e[o]||n;n.__proto__=$[t(259)]($),n[t(218)]=i[t(218)][t(259)](i),e[o]=n}}))();const Q=[U(182),U(223)],X=[x(U(192),{args:[1,40,40]},null,-1),x(U(202),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)],q=[U(182)],G=[x(U(202),{color:U(232),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)];function L(){const t=["424497pVJfyD","scale","trace","value","point","setAttribute","getX","TresSphereGeometry","setX","82ULiAlE","length","12VvFaJD","console","count","error","1242vowjnm","call","TresMeshStandardMaterial","radius","setY","raycast","enabled","shapecast","index","TresMesh","gger",'{}.constructor("return this")( )',"counter","attributes","setUsage","apply","prototype","controls","toString","Mesh","computeBoundsTree","constructor","string","material","3308cXNZmj","Sphere","42128BqnsKk","invert","MeshStandardMaterial","setScalar","BufferGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#023249","model","warn","16bQaTKZ","click","action","exception","3667782lUiefi","center","firstHitOnly","normal","chain","input","set","getZ","debu","position","4884480QqUWgv","test","function *\\( *\\)","getY","matrixWorld","setZ","visible","copy","intersectsSphere","table","bind","5OOhNpX","生成模型","log","4327050AvQEks","push","Vector2","点击按钮","color","Matrix4","boundsTree","BufferAttribute","fill","558151jybVHT","geometry","addButton","setFromCamera"];return(L=function(){return t})()}const W=w({__name:U(233),props:{controls:{}},async setup(r){const o=U;let s,w;const T=r;(()=>{const t=D;i[t(230)][t(216)][t(220)]=m,i[t(230)][t(216)].disposeBoundsTree=d,i[t(219)][t(216)][t(205)]=y})();const k=([s,w]=b((()=>e(l,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,w(),s),z=new(i[o(228)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),M=new Uint8Array(3*k[o(213)][o(248)][o(198)]);M[o(180)](255);const B=new(i[o(179)])(M,3,!0);B[o(214)](c),k[o(190)](o(176),B);const Z=v(null),C=v(null),E=v(!1),O=v(-1),F=v(.2),H=new(i[o(174)]),{camera:V,raycaster:$}=t(),L=15/255,W=78/255,J=85/255;let N=null;j((()=>{const t=o;Z[t(188)]&&(console[t(171)]("targetMesh.value init",Z[t(188)]),Z[t(188)][t(182)][t(220)](),N=k[t(178)],((t,n,e,r,o,s)=>{const c=S;window[c(394)](c(430),(e=>{const r=c;t.x=e[r(420)]/window[r(391)]*2-1,t.y=-e[r(396)]/window[r(412)]*2+1,n[r(410)]=!0})),window[c(394)](c(407),(u=>{const a=c;t.x=u[a(420)]/window[a(391)]*2-1,t.y=-u[a(396)]/window[a(412)]*2+1,r[a(410)]=u[a(411)];const l=new(i[a(403)]);l.setFromCamera(t,e[a(410)]),l[a(393)]=!0;const p=l[a(397)](o.value,!0);n.value=!0,s[a(432)]=0===p[a(390)]}),!0),window.addEventListener(c(406),(t=>{const e=c;r[e(410)]=-1,"touch"===t[e(414)]&&(n[e(410)]=!1)}),!0)})(H,E,V,O,Z,T[t(217)][t(188)]))}));const{onLoop:Y}=n();Y((()=>{const t=o,n=k[t(208)];if(C[t(188)])if(T[t(217)].value.active||!E[t(188)])C.value[t(255)]=!1;else{C.value[t(186)][t(229)](F.value),$.value[t(184)](H,V[t(188)]),$[t(188)][t(241)]=!0;const e=$[t(188)].intersectObject(Z.value,!0);if(e.length){C[t(188)][t(248)][t(256)](e[0][t(189)]),T[t(217)].value[t(206)]=!1,C[t(188)][t(255)]=!0;const r=new(i[t(177)]);r[t(256)](Z[t(188)][t(253)])[t(227)]();const o=new(i[t(225)]);o[t(240)][t(256)](C[t(188)].position).applyMatrix4(r),o[t(203)]=100*F[t(188)];const s=[],c=new u;if(null==N||N[t(207)]({intersectsBounds:n=>{const e=t,r=o.intersectsBox(n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(c[e(245)](0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o.containsPoint(c))return f;return h}return r?f:g},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(257)](o)){const t=3*e;s[i(173)](t,t+1,t+2)}return!1}}),0===O[t(188)]||2===O[t(188)]){let e=1,r=1,o=1;0===O[t(188)]&&(e=L,r=W,o=J);for(let i=0,c=s[t(195)];i<c;i++){const c=n[t(191)](s[i]);B[t(193)](c,e),B[t(204)](c,r),B[t(254)](c,o)}B.needsUpdate=!0}}else C.value[t(255)]=!1,T[t(217)][t(188)][t(206)]=!0}}));const P=(new p)[o(183)]({title:o(175),label:o(170)}),K=new a;return P.on(o(236),(()=>{const t=o,n=[],e=[];for(let o=0;o<B.count;o++)B[t(191)](o)===L&&B[t(252)](o)===W&&B.getZ(o)===J&&(n[t(173)](k[t(213)][t(248)][t(191)](o),k[t(213)][t(248)][t(252)](o),k.attributes.position.getZ(o)),e.push(k[t(213)].normal[t(191)](o),k.attributes[t(242)].getY(o),k[t(213)][t(242)][t(246)](o)));const r=new Float32Array(n);K[t(190)](t(248),new(i[t(179)])(r,3)),K[t(190)](t(242),new(i[t(179)])(r,3))})),(t,n)=>{const e=o;return I(),_(R,null,[x("TresMesh",{ref_key:"targetMesh",ref:Z,geometry:A(k),scale:.005,material:A(z)},null,8,Q),x(e(209),{ref_key:"brushMesh",ref:C,visible:!1},X,512),x(e(209),{geometry:A(K),position:[-2,-2,2],scale:.005},G,8,q)],64)}}});function J(t){function n(t){const e=D;if(typeof t===e(222))return function(t){}[e(221)]("while (true) {}")[e(215)](e(212));1!==(""+t/t)[e(195)]||t%20==0?function(){return!0}[e(221)](e(247)+e(210))[e(201)](e(237)):function(){return!1}[e(221)]("debugger")[e(215)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const N=rt;!function(t,n){const e=rt,r=nt();for(;;)try{if(681731===parseInt(e(273))/1+-parseInt(e(288))/2*(-parseInt(e(282))/3)+parseInt(e(303))/4*(-parseInt(e(268))/5)+-parseInt(e(310))/6+parseInt(e(291))/7*(-parseInt(e(307))/8)+-parseInt(e(276))/9+parseInt(e(283))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Y(this,(function(){const t=rt,n=new RegExp(t(297)),e=new RegExp(t(306),"i"),r=ot("init");n.test(r+"chain")&&e[t(305)](r+t(290))?ot():r("0")}))()}();const P=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[rt(284)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();P(void 0,(function(){const t=rt;let n;try{n=Function(t(313)+t(294)+");")()}catch(o){n=window}const e=n[t(300)]=n[t(300)]||{},r=["log","warn",t(275),t(308),"exception",t(286),"trace"];for(let s=0;s<r.length;s++){const n=P[t(292)][t(272)][t(279)](P),o=r[s],i=e[o]||n;n[t(299)]=P[t(279)](P),n.toString=i[t(267)][t(279)](i),e[o]=n}}))();const K=x(N(293),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1),tt=x(N(298),{intensity:1},null,-1);function nt(){const t=["table","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","1788346zUssLJ","neg-z.jpg","input","948997RATCke","constructor","TresPerspectiveCamera",'{}.constructor("return this")( )',"call","debu","function *\\( *\\)","TresAmbientLight","__proto__","console","neg-x.jpg","string","1073692XQhypa","files","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","24IlfzFe","error","collectTriangles","7461354RbHXOM","controls","stateObject","return (function() ","value","toString","20AMAOyt","controlsRef","counter","length","prototype","1198300ewQwvh","#999999","info","1898028Fkniap","pos-x.jpg","TresCanvas","bind","gger","pos-z.jpg","3vpWDWG","15241140aDsblC","apply","while (true) {}"];return(nt=function(){return t})()}const et=w({__name:N(309),setup(t){const n=N,e=T({clearColor:n(274),antialias:!0}),i=T({autoRotate:!1}),c=v(null);return(t,u)=>{const a=n,l=k(a(278));return I(),_(R,null,[z(A(o)),z(l,B(e,{"window-size":""}),{default:M((()=>[K,z(A(r),B({ref_key:a(269),ref:c},i),null,16),tt,(I(),Z(C,null,{default:M((()=>[z(W,{controls:c[a(266)]},null,8,[a(311)])])),_:1})),(I(),Z(C,null,{default:M((()=>[z(A(s),{background:!1,files:[a(277),a(301),"pos-y.jpg","neg-y.jpg",a(281),a(289)],path:a(287)},null,8,[a(304)])])),_:1}))])),_:1},16)],64)}}});function rt(t,n){const e=nt();return(rt=function(t,n){return e[t-=266]})(t,n)}function ot(t){function n(t){const e=rt;if(typeof t===e(302))return function(t){}.constructor(e(285))[e(284)](e(270));1!==(""+t/t)[e(271)]||t%20==0?function(){return!0}[e(292)](e(296)+e(280))[e(295)]("action"):function(){return!1}[e(292)](e(296)+"gger")[e(284)](e(312)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{et as default};

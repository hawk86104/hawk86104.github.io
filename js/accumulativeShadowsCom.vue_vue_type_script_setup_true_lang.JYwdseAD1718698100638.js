import{a5 as t,c as n,h as e}from"./three.erXpfL-r1718698100638.js";import{a}from"./@tresjs.aawOCoPx1718698100638.js";import{d as o,P as r}from"./@pmndrs.ZdH7ThqA1718698100638.js";import{d as s,b as i,w as c,a2 as u,o as l,D as p,J as d,aj as f,ak as h}from"./@vue.CpOXM7bB1718698100638.js";const m=y;function w(){const t=["accumulativeShadowsCom","randFloatSpread","TresSoftShadowMaterial","error","random","acos","lightPosition","prototype","1655472BeYkiC","test","frames","shadow","height","9EbSNVM","counter","camera","ambient","sin","822PhZoEG","while (true) {}","near","blend","console","trace","progressiveLightMap2","alphaTest","#000000","5ZZpxmR","size","bottom","opacity","Vector3","function *\\( *\\)","DirectionalLight","log","73694evvVvU","stateObject","debu","blendWindow","184060xtZFBH","TresMesh","11oGOEPy","set","MathUtils","bind","966285HgPYco","constructor","clear","13496184AjuXOa","position","bias","apply","top","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","left","far","shadows plm update","1463OMSlkP","value","texture","material","toString","castShadow","cos","width","add","shadows render end","color","3748jVCwMo","init","prepare","length","45FiLUmN","action","update","amount","TresPlaneGeometry","__proto__","call","children","string","mapSize","radius"];return(w=function(){return t})()}!function(t,n){const e=y,a=w();for(;;)try{if(494878===-parseInt(e(390))/1+parseInt(e(380))/2*(parseInt(e(418))/3)+-parseInt(e(414))/4*(-parseInt(e(372))/5)+-parseInt(e(363))/6*(parseInt(e(403))/7)+-parseInt(e(353))/8+parseInt(e(358))/9*(parseInt(e(384))/10)+-parseInt(e(386))/11*(-parseInt(e(393))/12))break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const M=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,a}}();!function(){M(this,(function(){const t=y,n=new RegExp(t(377)),e=new RegExp(t(398),"i"),a=x(t(415));n.test(a+"chain")&&e[t(354)](a+"input")?x():a("0")}))()}();const g=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[y(396)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function y(t,n){const e=w();return(y=function(t,n){return e[t-=351]})(t,n)}g(void 0,(function(){const t=y;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(367)]=n[t(367)]||{},a=[t(379),"warn","info",t(432),"exception","table",t(368)];for(let r=0;r<a.length;r++){const n=g[t(391)][t(352)].bind(g),o=a[r],s=e[o]||n;n[t(423)]=g[t(389)](g),n[t(407)]=s[t(407)][t(389)](s),e[o]=n}}))();const b=["rotate-x"],I=d(m(422),{args:[1,1]},null,-1),S=s({__name:m(429),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(371)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,M=s;let g=i();const{extend:y,scene:S,renderer:x,camera:P}=a();y({SoftShadowMaterial:o});const v={position:(new(t[w(376)]))[w(387)](M[w(351)].x,M[w(351)].y,M[w(351)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},z=new r(x[w(404)],S[w(404)],v[w(427)]),j={map:z[w(369)][w(405)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:M[w(366)],alphaTest:M[w(370)],opacity:M[w(375)],color:M[w(413)]},_=new n;for(let n=0;n<v[w(421)];n++){const n=new(t[w(378)])(16777215,v.intensity/v[w(421)]);n[w(408)]=!0,n[w(356)][w(395)]=v[w(395)],n.shadow.camera[w(365)]=v[w(365)],n.shadow.camera[w(401)]=v.far,n.shadow[w(360)].right=v[w(373)]/2,n[w(356)].camera[w(400)]=-v[w(373)]/2,n[w(356)][w(360)][w(397)]=v[w(373)]/2,n[w(356)][w(360)][w(374)]=-v[w(373)]/2,n[w(356)][w(427)][w(410)]=v[w(427)],n[w(356)].mapSize[w(357)]=v[w(427)],_[w(411)](n)}const F=()=>{const n=w,a=v[n(394)][n(417)]();for(let o=0;o<_[n(425)][n(417)];o++){const r=_[n(425)][o];if(Math[n(433)]()>M[n(361)])r[n(394)].set(v[n(394)].x+t[n(388)].randFloatSpread(v[n(428)]),v[n(394)].y+e.randFloatSpread(v.radius),v[n(394)].z+t[n(388)][n(430)](v.radius));else{let t=Math[n(434)](2*Math.random()-1)-Math.PI/2,e=2*Math.PI*Math.random();r[n(394)][n(387)](Math.cos(t)*Math.cos(e)*a,Math.abs(Math[n(409)](t)*Math.sin(e)*a),Math[n(362)](t)*a)}}},T=(t=1)=>{const n=w;S.value[n(411)](_),z[n(416)]();for(let e=0;e<t;e++)F(),z[n(420)](P.value,M.blendWindow),console[n(379)](n(402),e);S[n(404)].remove(_),z.finish()};c((()=>g[w(404)]),(t=>{const n=w;t&&(z.configure(t),z.clear(),console.log("shadows render start"),T(M.frames),console.log(n(412)))}));const Z=()=>{const t=w;z[t(392)](),T(M[t(355)])};return u((()=>{const t=w;g[t(404)]&&(M[t(375)]&&(g[t(404)][t(406)].opacity=M.opacity),M[t(370)]&&(g[t(404)][t(406)][t(370)]=M[t(370)]),M[t(413)]&&g[t(404)][t(406)][t(413)][t(387)](M.color),M[t(366)]&&(g[t(404)][t(406)][t(366)]=M[t(366)]))})),c((()=>M[w(351)]),(t=>{const n=w;t&&(console[n(379)](M[n(351)]),v[n(394)][n(387)](t.x,t.y,t.z),Z())}),{deep:!0}),c((()=>[M.frames,M[w(383)],M[w(361)]]),(()=>{Z()})),(t,n)=>{const e=w;return l(),p(e(385),{"receive-shadow":"",ref_key:"gPlane",ref:g,scale:10,"rotate-x":-Math.PI/2},[I,d(e(431),f(h(j)),null,16)],8,b)}}});function x(t){function n(t){const e=y;if(typeof t===e(426))return function(t){}[e(391)](e(364))[e(396)](e(359));1!==(""+t/t)[e(417)]||t%20==0?function(){return!0}[e(391)](e(382)+e(399))[e(424)](e(419)):function(){return!1}.constructor(e(382)+e(399))[e(396)](e(381)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

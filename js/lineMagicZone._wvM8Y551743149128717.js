import{P as t}from"./tweakpane.ivGeiIdz1743149128717.js";import{e,h as n,a as o,o as r}from"./@tresjs.GCV-1VTd1743149128717.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.8hkhq6hK1743149128717.js";import{_ as a}from"./three.hBhj0ayh1743149128717.js";import{d as s,a6 as l,a3 as u,w as c,o as f,H as m,N as p,u as d,j as h,r as g,e as v,f as I,g as x,al as w,m as S}from"./@vue.L-brCdZe1743149128717.js";import"./postprocessing.JYKQQ2FM1743149128717.js";import"./@vueuse.K3OHOx4F1743149128717.js";import"./all.three.I-k2KxK_1743149128717.js";import"./oimophysics.WhCxc1Ho1743149128717.js";const y=U;!function(t,e){const n=U,o=C();for(;;)try{if(711711===-parseInt(n(298))/1*(-parseInt(n(289))/2)+parseInt(n(348))/3*(-parseInt(n(312))/4)+parseInt(n(310))/5+parseInt(n(311))/6+parseInt(n(296))/7*(-parseInt(n(352))/8)+parseInt(n(342))/9+-parseInt(n(345))/10*(-parseInt(n(290))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[U(341)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=U,e=new RegExp(t(306)),n=new RegExp(t(329),"i"),o=M("init");e.test(o+t(332))&&n.test(o+t(318))?M():o("0")}))()}();const b=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[U(341)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();b(void 0,(function(){const t=U,e=function(){const t=U;let e;try{e=Function(t(328)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(325)]=e[t(325)]||{},o=["log",t(297),t(337),"error",t(308),"table",t(326)];for(let r=0;r<o[t(307)];r++){const e=b[t(355)][t(323)].bind(b),i=o[r],a=n[i]||e;e[t(324)]=b[t(300)](b),e[t(313)]=a[t(313)][t(300)](a),n[i]=e}}))();const T=[y(309)],N=["position","aIndex",y(330)];function U(t,e){const n=C();return U=function(t,e){return n[t-=289]},U(t,e)}function C(){const t=["11NRsLut","action","map","AdditiveBlending","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","baseMaterial","7VzXqIe","warn","19QiuCRj","floor","bind","debu","counter","uHeight","EllipseCurve","yRadius","function *\\( *\\)","length","exception","rotateX","2750505yCVfNA","1217178GxZUdi","8zypygI","toString","getAttribute","#90ee90","TresBufferGeometry","value","input","height","blending","xRadius","set","prototype","__proto__","console","trace","call","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","aNormal","string","chain","Color","alphaMap","position","stateObject","info","scale","array","getPoints","apply","1639314HWZBwE","push","TresPoints","1225520rqOoOB","uTime","speed","973206LbnRjR","TresGroup","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","setFromPoints","5213960HIBqlj","BufferGeometry","PointsMaterial","constructor","color","100484CSZnVa"];return(C=function(){return t})()}const j=y(294),P=y(350),W=s({__name:"lineMagicZone",props:{height:{default:1.6},speed:{default:1},color:{default:y(315)}},async setup(t){const r=y;let i,s;const g=l(),v=t,I=([i,s]=u((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,s(),i),x=new(a[r(304)])(0,0,8,8,0,2*Math.PI,!1,0),w=[];for(let e=0;e<5;e++)w[r(343)](...x[r(340)](719)),x[r(321)]+=.2,x[r(305)]+=.2;const S=new Float32Array(w[r(292)](((t,e)=>e))),_=(new(a[r(353)]))[r(351)](w)[r(314)](r(335))[r(339)],b=new Float32Array(_[r(307)]);for(let e=0;e<_[r(307)]/3;e++){const t=3*e;_[t+1]+=.15*Math[r(299)](e/720);const n=e%720*3,o=3*(e%720+2880);b[t]=_[o]-_[n],b[t+1]=_[o+1]-_[n+1],b[t+2]=_[o+2]-_[n+2]}const U={uTime:{value:0},uScale:{value:g.scale?g[r(338)]:1},uHeight:{value:v[r(319)]},uPerlinTexture:{value:I[1]},baseColor:{value:new(a[r(333)])(v.color)}},{onLoop:C}=e();return C((()=>{const t=r;U[t(346)][t(317)]+=.01*v[t(347)]})),c((()=>[v[r(356)],g.scale,v[r(319)]]),(([t,e,n])=>{const o=r;U.baseColor[o(317)][o(322)](t),U.uScale[o(317)]=e,U[o(303)][o(317)]=n})),(t,e)=>{const o=r;return f(),m(o(349),null,[p(o(344),{rotateX:-Math.PI/2,scale:.1},[p(o(316),{position:[d(_),3],aIndex:[d(S),1],aNormal:[d(b),3]},null,8,N),h(d(n),{baseMaterial:a[o(354)],vertexShader:j,fragmentShader:P,uniforms:U,map:d(I)[0],alphaMap:d(I)[0],transparent:"",depthWrite:!1,blending:a[o(293)],color:"#409eff",size:.1},null,8,[o(295),o(292),o(334),o(320)])],8,T)])}}});function M(t){function e(t){const n=U;if(typeof t===n(331))return function(t){}[n(355)]("while (true) {}")[n(341)](n(302));1!==(""+t/t)[n(307)]||t%20==0?function(){return!0}.constructor(n(301)+"gger")[n(327)](n(291)):function(){return!1}[n(355)](n(301)+"gger")[n(341)](n(336)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=O,o=D();for(;;)try{if(920815===parseInt(n(185))/1+parseInt(n(168))/2*(parseInt(n(186))/3)+parseInt(n(187))/4*(parseInt(n(202))/5)+parseInt(n(193))/6*(-parseInt(n(184))/7)+parseInt(n(190))/8*(parseInt(n(175))/9)+-parseInt(n(164))/10+-parseInt(n(194))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){z(this,(function(){const t=O,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(196),"i"),o=B(t(182));e[t(195)](o+t(170))&&n[t(195)](o+t(204))?B():o("0")}))()}();const R=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function D(){const t=["TresPerspectiveCamera","action","apply","14090sGCXFc","table","input","bind","while (true) {}","scale","7105260DWITgt","call","speed","warn","56JxBMQi","TresCanvas","chain","gger","info","toString","debu","3762927cFGast","#ff0000","prototype","stateObject","constructor","exception","string","init","console","8898841pPahXo","1569414aQkuGG","131907hpzVNc","1936gtnIIa","__proto__","color","24iqvrSa","counter","#201919","6hhVXLW","27677793EXMmxD","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addBinding","length"];return(D=function(){return t})()}function O(t,e){const n=D();return O=function(t,e){return n[t-=162]},O(t,e)}R(void 0,(function(){const t=O;let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(r){e=window}const n=e.console=e[t(183)]||{},o=["log",t(167),t(172),"error",t(180),t(203),"trace"];for(let i=0;i<o.length;i++){const e=R[t(179)][t(177)].bind(R),r=o[i],a=n[r]||e;e[t(188)]=R[t(205)](R),e.toString=a[t(173)][t(205)](a),n[r]=e}}))();const A=s({__name:"lineMagicZone",setup(e){const n=O,o=g({reflectivity:.1,showGridHelper:!0,scale:1}),a=g({color:n(176),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(197)](a,n(189),{label:"颜色"}),s.addBinding(a,n(163),{label:"大小",min:.1,max:3,step:.1}),s[n(197)](a,"height",{label:"高度",min:.1,max:3,step:.1}),s[n(197)](a,n(166),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=v(s(169));return f(),I(l,{clearColor:s(192),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:x((()=>[e[0]||(e[0]=p(s(199),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(d(r),{enableDamping:""}),e[1]||(e[1]=p("TresAmbientLight",{intensity:2},null,-1)),(f(),I(w,null,{default:x((()=>[h(W,S({position:[3,0,0]},a),null,16)])),_:1})),(f(),I(w,null,{default:x((()=>[h(W,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(f(),I(w,null,{default:x((()=>[h(i,S({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function B(t){function e(t){const n=O;if(typeof t===n(181))return function(t){}[n(179)](n(162))[n(201)](n(191));1!==(""+t/t)[n(198)]||t%20==0?function(){return!0}[n(179)](n(174)+n(171))[n(165)](n(200)):function(){return!1}.constructor(n(174)+"gger")[n(201)](n(178)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{A as default};

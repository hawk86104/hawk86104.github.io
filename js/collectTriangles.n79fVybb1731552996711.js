import{m as t,e as n,D as e,U as r,C as o}from"./@tresjs.01P8tiuF1731552996711.js";import{_ as s}from"./index.iRp7stxC1731552996711.js";import{_ as i,g as c,V as u,cD as a}from"./three.KG0QRRig1731552996711.js";import{P as l}from"./tweakpane.yHWGBmom1731552996711.js";import{I as f,C as p,N as g,c as m,d as h,a as d}from"./three-mesh-bvh.dPsz5KU41731552996711.js";import{d as y,a6 as w,b as j,a3 as I,o as b,D as v,J as _,u as x,F as M,r as T,e as A,j as Z,g as k,m as z,f as C,al as B}from"./@vue.-THQH3GC1731552996711.js";import"./@vueuse.YduQ9gvc1731552996711.js";import"./index.NJqxfdKb1731552996711.js";import"./@fesjs.ffiiLppw1731552996711.js";import"./vue-router.4ictOE9I1731552996711.js";import"./lodash-es.kYt-_xTG1731552996711.js";import"./@qlin.yHhFDldE1731552996711.js";import"./pinia.Yf0ZNVo31731552996711.js";import"./vue-demi.C4xddsk91731552996711.js";import"./@floating-ui.BPbuo5Gx1731552996711.js";import"./@juggle.7yjBMqoW1731552996711.js";import"./chalk.sAH7iSuz1731552996711.js";/* empty css                                 */import"./iconify-icon.l-H2-fnN1731552996711.js";import"./@iconify.3mYF4lU71731552996711.js";import"./dompurify.rQUea5mq1731552996711.js";import"./utils.LtlmdThj1731552996711.js";import"./default.vue_vue_type_script_setup_true_lang.ERsYe6co1731552996711.js";import"./three-mesh-ui.module.aEr-e4x91731552996711.js";function D(){const t=["1JGBQic",'{}.constructor("return this")( )',"__proto__","633193QypfIr","info","10oMDxZu","bind","innerHeight","return (function() ","length","4668920rKDKTM","innerWidth","table","constructor","216102EMLZwd","prototype","debu","value","log","touch","5580705hzIMPq","126jnJtCf","Raycaster","toString","addEventListener","test","warn","clientX","console","clientY","pointermove","input","intersectObject","10987209JIkIZZ","counter","string","function *\\( *\\)","gger","pointerup","33loyYad","pointerdown","button","error","enabled","271068UJWlpe","apply","stateObject","285126ldPQyY"];return(D=function(){return t})()}!function(t,n){const e=R,r=D();for(;;)try{if(746926===parseInt(e(339))/1*(-parseInt(e(305))/2)+parseInt(e(330))/3*(parseInt(e(335))/4)+parseInt(e(311))/5+parseInt(e(338))/6*(parseInt(e(312))/7)+-parseInt(e(349))/8+-parseInt(e(324))/9*(parseInt(e(344))/10)+-parseInt(e(342))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const E=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[R(336)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function R(t,n){const e=D();return(R=function(t,n){return e[t-=302]})(t,n)}!function(){E(this,(function(){const t=R,n=new RegExp(t(327)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=S("init");n.test(r+"chain")&&e[t(316)](r+t(322))?S():r("0")}))()}();const F=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[R(336)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();F(void 0,(function(){const t=R,n=function(){const t=R;let n;try{n=Function(t(347)+t(340)+");")()}catch(e){n=window}return n}(),e=n[t(319)]=n[t(319)]||{},r=[t(309),t(317),t(343),t(333),"exception",t(303),"trace"];for(let o=0;o<r[t(348)];o++){const n=F.constructor[t(306)][t(345)](F),s=r[o],i=e[s]||n;n[t(341)]=F[t(345)](F),n[t(314)]=i.toString[t(345)](i),e[s]=n}}))();function S(t){function n(t){const e=R;if(typeof t===e(326))return function(t){}[e(304)]("while (true) {}")[e(336)](e(325));1!==(""+t/t)[e(348)]||t%20==0?function(){return!0}[e(304)]("debu"+e(328)).call("action"):function(){return!1}[e(304)](e(307)+e(328))[e(336)](e(337)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const X=H;!function(t,n){const e=H,r=J();for(;;)try{if(708099===parseInt(e(407))/1+-parseInt(e(434))/2*(-parseInt(e(399))/3)+parseInt(e(389))/4*(parseInt(e(390))/5)+parseInt(e(373))/6+parseInt(e(375))/7*(-parseInt(e(346))/8)+-parseInt(e(355))/9*(-parseInt(e(380))/10)+-parseInt(e(379))/11*(parseInt(e(394))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[H(392)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function H(t,n){const e=J();return(H=function(t,n){return e[t-=345]})(t,n)}!function(){Y(this,(function(){const t=H,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(377),"i"),r=Q("init");n.test(r+t(365))&&e[t(385)](r+t(397))?Q():r("0")}))()}();const O=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[H(392)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();O(void 0,(function(){const t=H,n=function(){const t=H;let n;try{n=Function(t(401)+t(428)+");")()}catch(e){n=window}return n}(),e=n[t(370)]=n.console||{},r=[t(393),t(353),t(398),t(352),t(427),t(430),t(388)];for(let o=0;o<r[t(358)];o++){const n=O.constructor[t(411)][t(422)](O),s=r[o],i=e[s]||n;n[t(424)]=O[t(422)](O),n[t(361)]=i[t(361)][t(422)](i),e[s]=n}}))();const U=[X(356),X(421)],P=[X(356)];function J(){const t=["model","firstHitOnly","BufferGeometry","brushMesh","matrixWorld","value","material","bind","DynamicDrawUsage","__proto__","Matrix4","center","exception",'{}.constructor("return this")( )',"position","table","Mesh","normal","controls","2CQoVXK","点击按钮","BufferAttribute","push","visible","setUsage","8ADjtue","boundsTree","attributes","getZ","index","invert","error","warn","radius","1038465GmEjKd","geometry","enabled","length","count","while (true) {}","toString","stateObject","getX","intersectsBox","chain","MeshStandardMaterial","raycast","getY","constructor","console","targetMesh.value init","copy","4439136czTyGl","scale","8319962BPZJas","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setX","11PbIzwu","10ckDnQX","point","addButton","disposeBoundsTree","instance","test","computeBoundsTree","shapecast","trace","124616NEQKfp","10ZdbjFm","setY","apply","log","14009772zVkFMu","#023249","string","input","info","2884593YHXeig","TresMesh","return (function() ","intersectsSphere","containsPoint","action","fill","gger","1185066kYYTOU","call","active","needsUpdate","prototype","setScalar","Vector2","setFromCamera"];return(J=function(){return t})()}const K=y({__name:X(415),props:{controls:{}},async setup(r){const o=X;let s,y;const T=r;(()=>{const t=H;i[t(417)][t(411)][t(386)]=m,i[t(417)][t(411)][t(383)]=h,i[t(431)][t(411)][t(367)]=d})();const A=([s,y]=w((()=>e(a,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,y(),s),Z=new(i[o(366)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),k=new Uint8Array(3*A[o(348)][o(429)].count);k[o(405)](255);const z=new(i[o(436)])(k,3,!0);z[o(345)](i[o(423)]),A.setAttribute("color",z);const C=j(null),B=j(null),D=j(!1),E=j(-1),F=j(.2),S=new(i[o(413)]),{camera:Y,raycaster:O}=t(),J=15/255,K=78/255,Q=85/255;let $=null;I((()=>{const t=o;C[t(420)]&&(console.log(t(371),C.value),C[t(420)][t(356)][t(386)](),$=A[t(347)],((t,n,e,r,o,s)=>{const c=R;window[c(315)](c(321),(e=>{const r=c;t.x=e.clientX/window[r(302)]*2-1,t.y=-e[r(320)]/window[r(346)]*2+1,n[r(308)]=!0})),window[c(315)](c(331),(u=>{const a=c;t.x=u[a(318)]/window[a(302)]*2-1,t.y=-u[a(320)]/window[a(346)]*2+1,r[a(308)]=u[a(332)];const l=new(i[a(313)]);l.setFromCamera(t,e[a(308)]),l.firstHitOnly=!0;const f=l[a(323)](o[a(308)],!0);n[a(308)]=!0,s[a(334)]=0===f.length}),!0),window[c(315)](c(329),(t=>{const e=c;r.value=-1,t.pointerType===e(310)&&(n[e(308)]=!1)}),!0)})(S,D,Y,E,C,T[t(433)][t(384)]))}));const{onLoop:G}=n();G((()=>{const t=o,n=A[t(350)];if(B[t(420)])if(T[t(433)][t(384)][t(409)]||!D.value)B[t(420)][t(438)]=!1;else{B[t(420)][t(374)][t(412)](F.value),O[t(420)][t(414)](S,Y.value),O.value[t(416)]=!0;const e=O[t(420)].intersectObject(C[t(420)],!0);if(e.length){B.value[t(429)].copy(e[0][t(381)]),T[t(433)].instance[t(357)]=!1,B.value[t(438)]=!0;const r=new(i[t(425)]);r[t(372)](C[t(420)][t(419)])[t(351)]();const o=new c;o[t(426)][t(372)](B[t(420)][t(429)]).applyMatrix4(r),o[t(354)]=100*F[t(420)];const s=[],a=new u;if(null==$||$[t(387)]({intersectsBounds:n=>{const e=t,r=o[e(364)](n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(a.set(0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(403)](a))return f;return p}return r?f:g},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(402)](o)){const t=3*e;s[i(437)](t,t+1,t+2)}return!1}}),0===E[t(420)]||2===E[t(420)]){let e=1,r=1,o=1;0===E[t(420)]&&(e=J,r=K,o=Q);for(let i=0,c=s[t(358)];i<c;i++){const c=n[t(363)](s[i]);z[t(378)](c,e),z[t(391)](c,r),z.setZ(c,o)}z[t(410)]=!0}}else B.value[t(438)]=!1,T.controls.instance[t(357)]=!0}}));const V=(new l)[o(382)]({title:o(435),label:"生成模型"}),q=new(i[o(417)]);return V.on("click",(()=>{const t=o,n=[],e=[];for(let o=0;o<z[t(359)];o++)z.getX(o)===J&&z[t(368)](o)===K&&z.getZ(o)===Q&&(n[t(437)](A[t(348)][t(429)][t(363)](o),A.attributes[t(429)][t(368)](o),A[t(348)].position[t(349)](o)),e[t(437)](A[t(348)].normal[t(363)](o),A.attributes[t(432)][t(368)](o),A[t(348)][t(432)].getZ(o)));const r=new Float32Array(n);q.setAttribute(t(429),new(i[t(436)])(r,3)),q.setAttribute(t(432),new(i[t(436)])(r,3))})),(t,n)=>{const e=o;return b(),v(M,null,[_(e(400),{ref_key:"targetMesh",ref:C,geometry:x(A),scale:.005,material:x(Z)},null,8,U),_(e(400),{ref_key:e(418),ref:B,visible:!1},n[0]||(n[0]=[_("TresSphereGeometry",{args:[1,40,40]},null,-1),_("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),_(e(400),{geometry:x(q),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[_("TresMeshStandardMaterial",{color:e(395),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,P)],64)}}});function Q(t){function n(t){const e=H;if(typeof t===e(396))return function(t){}[e(369)](e(360))[e(392)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(369)](e(376)+e(406))[e(408)](e(404)):function(){return!1}[e(369)](e(376)+"gger")[e(392)](e(362)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function $(){const t=["TresAmbientLight","pos-y.jpg","string","input","while (true) {}","call","apply","100540haRIXZ","1128IHwtej","test","stateObject","error","length","5vHMKTn","pos-z.jpg","table","#999999","trace","5184xFvbKD","neg-x.jpg","2877324IHPUvA","warn","controlsRef","toString","constructor","info","bind","prototype","10058088xawbHH","gger","TresCanvas","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","neg-z.jpg","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","5378632DEYCTI","chain","4020387kVhjUj","neg-y.jpg","15567210slftdY","exception"];return($=function(){return t})()}!function(t,n){const e=V,r=$();for(;;)try{if(673454===parseInt(e(336))/1+-parseInt(e(347))/2*(parseInt(e(337))/3)+parseInt(e(323))/4*(-parseInt(e(342))/5)+parseInt(e(349))/6+-parseInt(e(325))/7+parseInt(e(357))/8+parseInt(e(327))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const G=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[V(335)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function V(t,n){const e=$();return(V=function(t,n){return e[t-=323]})(t,n)}!function(){G(this,(function(){const t=V,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(363),"i"),r=W("init");n[t(338)](r+t(324))&&e.test(r+t(332))?W():r("0")}))()}();const q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[V(335)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();q(void 0,(function(){const t=V,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(364)]=n.console||{},r=[t(362),t(350),t(354),t(340),t(328),t(344),t(346)];for(let o=0;o<r[t(341)];o++){const n=q.constructor[t(356)][t(355)](q),s=r[o],i=e[s]||n;n.__proto__=q[t(355)](q),n[t(352)]=i[t(352)][t(355)](i),e[s]=n}}))();const L=y({__name:"collectTriangles",setup(t){const n=V,e=T({clearColor:n(345),antialias:!0}),i=T({autoRotate:!1}),c=j(null);return(t,u)=>{const a=n,l=A(a(359));return b(),v(M,null,[Z(x(s)),Z(l,z(e,{"window-size":""}),{default:k((()=>[u[0]||(u[0]=_("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),Z(x(r),z({ref_key:a(351),ref:c},i),null,16),u[1]||(u[1]=_(a(329),{intensity:1},null,-1)),(b(),C(B,null,{default:k((()=>[Z(K,{controls:c.value},null,8,["controls"])])),_:1})),(b(),C(B,null,{default:k((()=>[Z(x(o),{background:!1,files:["pos-x.jpg",a(348),a(330),a(326),a(343),a(361)],path:a(360)})])),_:1}))])),_:1},16)],64)}}});function W(t){function n(t){const e=V;if(typeof t===e(331))return function(t){}[e(353)](e(333))[e(335)]("counter");1!==(""+t/t)[e(341)]||t%20==0?function(){return!0}[e(353)]("debu"+e(358))[e(334)]("action"):function(){return!1}.constructor("debugger")[e(335)](e(339)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{L as default};

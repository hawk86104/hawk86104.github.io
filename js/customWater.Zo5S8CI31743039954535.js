import{ah as t,C as e,_ as n,ab as r}from"./three.XuMWWlrU1743039954535.js";import{e as a,h as o,o as s}from"./@tresjs.05J-Im0t1743039954535.js";import{a as i}from"./index.5i_Lshjm1743039954535.js";import"./index.qWO5ZzOk1743039954535.js";import{z as l}from"./three-custom-shader-material.CRbjOKjC1743039954535.js";import{p as c}from"./gl-noise.u0wef8ro1743039954535.js";import{d as u,b as p,a2 as f,w as g,o as h,H as v,N as m,j as d,u as _,r as b,e as M,f as w,g as y,aj as j,ak as x,m as T,al as z}from"./@vue.C4dqouNn1743039954535.js";import{P as C}from"./tweakpane.ivGeiIdz1743039954535.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.3sG7_ZHl1743039954535.js";import"./postprocessing.YRVqsIkW1743039954535.js";import"./@vueuse.NzAeD-Dt1743039954535.js";import"./three-stdlib.DxlPEuV51743039954535.js";import"./@pmndrs.Z1sh1G-81743039954535.js";import"./object-hash.mBR0vz1e1743039954535.js";import"./@amap.7j9kjwBk1743039954535.js";import"./jszip.5Yd3mfTB1743039954535.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.R75nw2wj1743039954535.js";import"./all.three.GQ_-QAqR1743039954535.js";import"./oimophysics.WhCxc1Ho1743039954535.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ybSAn8i51743039954535.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.UWr0Ijt_1743039954535.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.vyLP8kyX1743039954535.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.CZZqJoW11743039954535.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.V2hq0z-L1743039954535.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.H_YXXBFM1743039954535.js";const I=P;!function(t,e){const n=P,r=N();for(;;)try{if(251877===parseInt(n(496))/1*(parseInt(n(549))/2)+parseInt(n(491))/3+parseInt(n(526))/4*(-parseInt(n(493))/5)+parseInt(n(540))/6*(-parseInt(n(512))/7)+parseInt(n(529))/8+-parseInt(n(523))/9*(-parseInt(n(521))/10)+-parseInt(n(510))/11*(parseInt(n(498))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[P(494)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){B(this,(function(){const t=P,e=new RegExp(t(535)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=D("init");e.test(r+"chain")&&n[t(507)](r+t(499))?D():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[P(494)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=P;let e;try{e=Function(t(501)+t(515)+");")()}catch(a){e=window}const n=e[t(551)]=e.console||{},r=[t(508),t(543),t(530),t(495),"exception",t(532),"trace"];for(let o=0;o<r[t(531)];o++){const e=G[t(489)][t(503)][t(509)](G),a=r[o],s=n[a]||e;e[t(546)]=G[t(509)](G),e[t(492)]=s[t(492)][t(509)](s),n[a]=e}}))();const H=["rotation-x"],O=[I(539)],W=u({__name:I(517),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(533)},waterHighlight:{default:I(538)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const s=I,i=t,u=p(null),b={vertex:s(518),fragment:s(497)},M={uTime:{value:0},waterColor:{value:new e(i[s(505)])[s(524)]()},waterHighlight:{value:new(n[s(536)])(i[s(519)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(550)]},uHeight:{value:i[s(520)]}},{onLoop:w}=a();return w((({elapsed:t})=>{const e=s;M.uTime[e(537)]=-t/5})),f((()=>{const t=s;i[t(520)]&&(M[t(513)][t(537)]=i[t(520)]),i[t(505)]&&(M[t(505)][t(537)]=new(n[t(536)])(i[t(505)])[t(524)]()),i.waterHighlight&&(M.waterHighlight.value=new(n[t(536)])(i[t(519)]).convertLinearToSRGB()),i[t(550)]&&(M.brightness[t(537)]=i[t(550)])})),g((()=>i[s(511)]),(t=>{u.value.material.needsUpdate=!0})),g((()=>i[s(514)]),(t=>{const e=s,r=new l({baseMaterial:n[t],vertexShader:c(b[e(547)]),fragmentShader:b[e(504)],uniforms:M,flatShading:i[e(511)],side:n[e(534)],roughness:.2,metalness:.1,silent:!0});u[e(537)].material.dispose(),u[e(537)][e(542)]=r})),(t,e)=>{const a=s;return h(),v(a(553),{ref_key:a(502),ref:u,"rotation-x":-Math.PI/2},[m(a(548),{args:[5,5,t[a(520)],64,64,1]},null,8,O),d(_(o),{baseMaterial:n[a(544)],vertexShader:_(c)(b[a(547)]),fragmentShader:b[a(504)],uniforms:M,side:r,roughness:.2,metalness:.1,flatShading:t.Flatshading,silent:""},null,8,[a(514),a(525),a(490),a(552),a(500)])],8,H)}}});function N(){const t=["action","2473200QIfVOz","info","length","table","#52a7f7","DoubleSide","function *\\( *\\)","Color","value","#b3ffff","args","1932KKSKtW","gger","material","warn","MeshPhysicalMaterial","debu","__proto__","vertex","TresBoxGeometry","106962UUvojj","brightness","console","side","TresMesh","constructor","fragmentShader","847374ecCNmT","toString","10gonKKW","apply","error","2YDMgtv","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","5622348ULpELC","input","flatShading","return (function() ","tmRef","prototype","fragment","waterColor","call","test","log","bind","11sTbxrr","Flatshading","6454pkvLdo","uHeight","baseMaterial",'{}.constructor("return this")( )',"while (true) {}","customWaterMesh","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","waterHighlight","height","700DOQZQJ","string","43047bYzIPF","convertLinearToSRGB","vertexShader","32180TSeQJD","stateObject"];return(N=function(){return t})()}function P(t,e){const n=N();return P=function(t,e){return n[t-=489]},P(t,e)}function D(t){function e(t){const n=P;if(typeof t===n(522))return function(t){}.constructor(n(516)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(489)](n(545)+n(541))[n(506)](n(528)):function(){return!1}.constructor(n(545)+n(541))[n(494)](n(527)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const F=A;!function(t,e){const n=A,r=R();for(;;)try{if(868048===-parseInt(n(387))/1+parseInt(n(435))/2+parseInt(n(424))/3+-parseInt(n(408))/4+-parseInt(n(444))/5+-parseInt(n(395))/6+-parseInt(n(451))/7*(-parseInt(n(449))/8))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){L(this,(function(){const t=A,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(419));e.test(r+t(437))&&n[t(410)](r+t(448))?E():r("0")}))()}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(417)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(t,e){const n=R();return A=function(t,e){return n[t-=386]},A(t,e)}function R(){const t=["MeshDepthMaterial","bind","MeshPhongMaterial",'{}.constructor("return this")( )',"resource.cos","MeshBasicMaterial","warn","1108996ZMLcjq","error","test","value","#627179","addBinding","counter","while (true) {}","addBlade","apply","call","init","浪头颜色","MeshStandardMaterial","trace","table","3805428BGKQXE","#3a78a2","MeshPhysicalMaterial","TresPerspectiveCamera","length","gger","#52a7f7","#b3ffff","log","target","neg-y.jpg","534838ZrsNOM","neg-z.jpg","chain","/images/skyBox/6jpg/","TresCanvas","MeshLambertMaterial","constructor","console","pos-z.jpg","7361010ENDNcp","toString","debu","Flatshading","input","1432ALNAPK","MeshNormalMaterial","107681KLKohY","customWater","height","info","https://opensource.cdn.icegl.cn","return (function() ","list","brightness","ACESFilmicToneMapping","__proto__","496318OtlzxM","stateObject","水体颜色","prototype","exception","string","action","TresAmbientLight","7053810JndndU","pos-x.jpg","path","label","change","baseMaterial"];return(R=function(){return t})()}k(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(456)+t(404)+");")()}catch(n){e=window}return e}(),n=e[t(442)]=e[t(442)]||{},r=[t(432),t(407),t(454),t(409),t(391),t(423),t(422)];for(let a=0;a<r[t(428)];a++){const e=k[t(441)][t(390)].bind(k),o=r[a],s=n[o]||e;e[t(386)]=k[t(402)](k),e[t(445)]=s[t(445)][t(402)](s),n[o]=e}}))();const K=u({__name:F(452),setup(t){const e=F,r=b({alpha:!0,toneMapping:n[e(459)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),o=b({cellSize:.6,cellThickness:1.1,cellColor:e(412),sectionColor:e(425),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),l=b({height:.2,Flatshading:!1,waterColor:e(430),waterHighlight:e(431),brightness:1,baseMaterial:e(426)}),c=new C;return c[e(413)](l,e(453),{label:"高度",min:.1,max:5,step:.1}),c[e(413)](l,"waterColor",{label:e(389)}),c[e(413)](l,"waterHighlight",{label:e(420)}),c.addBinding(l,e(458),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(l,e(447),{label:e(447)}),c[e(416)]({view:e(457),label:"材质",options:[{text:"MeshPhysicalMaterial",value:e(426)},{text:"MeshBasicMaterial",value:e(406)},{text:"MeshNormalMaterial",value:e(450)},{text:"MeshStandardMaterial",value:e(421)},{text:e(403),value:"MeshPhongMaterial"},{text:"MeshToonMaterial",value:"MeshToonMaterial"},{text:e(440),value:e(440)},{text:e(401),value:e(401)}],value:l[e(400)]}),c.on(e(399),(t=>{const n=e;"材质"===t[n(433)][n(398)]&&(l[n(400)]=t[n(411)])})),(t,n)=>{const c=e,u=M(c(439));return h(),w(u,T(r,{"window-size":""}),{default:y((()=>[n[0]||(n[0]=m(c(427),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(s),j(x(a)),null,16),n[1]||(n[1]=m(c(394),{intensity:.5},null,-1)),n[2]||(n[2]=m("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),d(W,j(x(l)),null,16),d(_(S),T({args:[3,3]},o,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:[c(396),"neg-x.jpg","pos-y.jpg",c(434),c(443),c(436)],path:c(455)+c(438)},null,8,[c(397)])])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=A;if(typeof t===n(392))return function(t){}.constructor(n(415))[n(417)](n(414));1!==(""+t/t)[n(428)]||t%20==0?function(){return!0}[n(441)](n(446)+n(429))[n(418)](n(393)):function(){return!1}[n(441)](n(446)+n(429)).apply(n(388)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{K as default};

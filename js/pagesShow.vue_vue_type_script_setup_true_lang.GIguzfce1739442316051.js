import{_ as t,C as n,cj as e,ck as o,cl as r,cm as i,l as u,c0 as s,ak as c,am as a}from"./three.OosFxi571739442316051.js";import{P as l,e as f,o as p}from"./@tresjs.4XV_x0mI1739442316051.js";import{z as d}from"./three-custom-shader-material.d7b09qIZ1739442316051.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1739442316051.js";import{d as m,b as y,a2 as w,w as b,o as I,H as v,u as _,r as C,a3 as x,e as S,f as A,g as j,N as T,j as R,aj as B,ak as M,F as O,M as k,J as D,m as E}from"./@vue.NRI7TcgI1739442316051.js";function F(){const t=["ROADS","311033ezAPCo","203380FSKROD","CITY_UNTRIANGULATED","warn","test","length","gger","string","name","chain","2275356PEPVxr","console","counter","trace","6YTtWtq","action","apply","traverse","info",'{}.constructor("return this")( )',"1003332FABfvF","constructor","3055731xwVKeD","1573119TUTQFV","function *\\( *\\)","return (function() ","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","prototype","table","toString","5002672ShdVHc","__proto__","log"];return(F=function(){return t})()}!function(t,n){const e=z,o=F();for(;;)try{if(294292===-parseInt(e(310))/1+parseInt(e(294))/2+parseInt(e(297))/3+-parseInt(e(284))/4+-parseInt(e(311))/5+-parseInt(e(288))/6*(parseInt(e(296))/7)+parseInt(e(306))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(290)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){L(this,(function(){const t=z,n=new RegExp(t(298)),e=new RegExp(t(301),"i"),o=W("init");n[t(314)](o+t(283))&&e.test(o+"input")?W():o("0")}))()}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(290)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function z(t,n){const e=F();return(z=function(t,n){return e[t-=282]})(t,n)}H(void 0,(function(){const t=z,n=function(){const t=z;let n;try{n=Function(t(299)+t(293)+");")()}catch(e){n=window}return n}(),e=n[t(285)]=n[t(285)]||{},o=[t(308),t(313),t(292),"error","exception",t(304),t(287)];for(let r=0;r<o[t(315)];r++){const n=H.constructor[t(303)].bind(H),i=o[r],u=e[i]||n;n[t(307)]=H.bind(H),n[t(305)]=u.toString[t(300)](u),e[i]=n}}))();const G=async()=>{const t=z,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(291)]((n=>{const i=t;n[i(282)]===i(312)&&(e=n),"LANDMASS"===n.name&&(o=n),n.name===i(309)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function W(t){function n(t){const e=z;if(typeof t===e(317))return function(t){}[e(295)]("while (true) {}")[e(290)](e(286));1!==(""+t/t).length||t%20==0?function(){return!0}[e(295)]("debu"+e(316)).call(e(289)):function(){return!1}[e(295)](e(302)+e(316))[e(290)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=V;!function(t,n){const e=V,o=X();for(;;)try{if(747673===parseInt(e(331))/1*(-parseInt(e(367))/2)+-parseInt(e(318))/3+parseInt(e(325))/4*(-parseInt(e(346))/5)+parseInt(e(368))/6*(-parseInt(e(336))/7)+parseInt(e(339))/8+parseInt(e(327))/9*(-parseInt(e(365))/10)+parseInt(e(353))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(364)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=V,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(344),"i"),o=U("init");n[t(357)](o+t(333))&&e[t(357)](o+t(328))?U():o("0")}))()}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(364)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();P(void 0,(function(){const t=V;let n;try{n=Function(t(317)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(343)]=n[t(343)]||{},o=["log",t(352),t(366),t(321),t(350),t(311),"trace"];for(let i=0;i<o.length;i++){const n=P[t(335)].prototype[t(330)](P),r=o[i],u=e[r]||n;n[t(334)]=P[t(330)](P),n[t(332)]=u[t(332)][t(330)](u),e[r]=n}}))();const $=[K(360)];function V(t,n){const e=X();return(V=function(t,n){return e[t-=310]})(t,n)}function X(){const t=["landColor","stateObject","apply","6009410tkdgXy","info","1913438PNPDhm","12leFLNU","dispose","model","color","computeBoundingSphere","action","table","opacity","setStyle","gger","side","value","return (function() ","2912466zuqqDn","renderOrder","#e523ff","error","city","topColor","call","128852BudgAl","DoubleSide","18OtCXCS","input","#112233","bind","1NXHmzw","toString","chain","__proto__","constructor","1759709IDwkLr","clone","string","1215704JsKNmY","gradient","uOpacity","bulidingsColor","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","65TtsXrd","land","#ffffff","debu","exception","counter","warn","51113436KgBHKB","isArray","uniforms","Color","test","material","uColor","object","boundingBox"];return(X=function(){return t})()}const Z=m({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:K(320)},landColor:{default:K(329)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=K,r=e,i=y(0),u=r[o(370)][o(322)];u[o(319)]=1001;const s=r.model[o(347)];(()=>{const e=o,{geometry:s}=u;s.computeBoundingBox(),s[e(372)]();const{max:c,min:a}=s[e(361)];if(u[e(358)].__csm)return;const l=new d({baseMaterial:u[e(358)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(356)])(r[e(342)])},uOpacity:{value:r.opacity},uLightColor:{value:new n(e(348))},uTopColor:{value:new(t[e(356)])(r[e(323)])},uTime:i,uGradient:{value:r[e(340)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(326)]});u[e(358)][e(369)](),u[e(358)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[o(316)]+=t})),w((()=>{const n=o;r[n(342)]&&u[n(358)].uniforms[n(359)].value[n(313)](r.bulidingsColor),r.landColor&&((n,e)=>{const i=o;let u;"cu"===n||n===i(347)&&(u=Array[i(354)](s[i(358)])?s.material:[s.material],u.forEach((n=>{const o=i;n[e][o(313)](r[o(362)]),n[o(315)]=t[o(326)]})))})(n(347),n(371)),r[n(312)]&&(u[n(358)][n(355)][n(341)][n(316)]=r[n(312)])})),b(r,((t,n)=>{const e=o;u[e(358)][e(355)].uGradient.value=t[e(340)]}));const a=r[o(370)][o(370)][o(337)]();return(t,n)=>(I(),v("primitive",{object:_(a)},null,8,$))}});function U(t){function n(t){const e=V;if(typeof t===e(338))return function(t){}[e(335)]("while (true) {}").apply(e(351));1!==(""+t/t)[e(345)]||t%20==0?function(){return!0}[e(335)](e(349)+e(314))[e(324)](e(310)):function(){return!1}[e(335)](e(349)+e(314)).apply(e(363)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function Y(){const t=["matrix","linewidth","material","while (true) {}","__proto__","object","toString","2257321jTsykv","stateObject","geometry","trace","constructor","opacity","set","resolution","color","init","applyMatrix4","chain","uColor","40iCYVpO","#FFF","input","info","function *\\( *\\)","counter","exception","log","warn","length","buildingsLines","Wireframe","apply","style","debu","uniforms","164717kjjNsC","test","8lOoWVQ","call","117vjuRAj","prototype","primitive","3857121AUYmiM","6VmTDlQ","74876vFjAwM","4555970keKEql","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uOpacity",'{}.constructor("return this")( )',"23670168iibSnL","102hdGPSp"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","return (function() ","50584mhLdtw","width","builds","fromEdgesGeometry","console","clone","gger","bind"];return(Y=function(){return t})()}const q=Q;function Q(t,n){const e=Y();return(Q=function(t,n){return e[t-=139]})(t,n)}!function(t,n){const e=Q,o=Y();for(;;)try{if(516446===-parseInt(e(140))/1*(parseInt(e(141))/2)+-parseInt(e(199))/3*(parseInt(e(151))/4)+parseInt(e(142))/5+-parseInt(e(148))/6*(parseInt(e(195))/7)+parseInt(e(197))/8*(-parseInt(e(139))/9)+parseInt(e(179))/10*(-parseInt(e(166))/11)+parseInt(e(147))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){J(this,(function(){const t=Q,n=new RegExp(t(183)),e=new RegExp(t(144),"i"),o=ot(t(175));n[t(196)](o+t(177))&&e[t(196)](o+t(181))?ot():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(191)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=Q,n=function(){const t=Q;let n;try{n=Function(t(150)+t(146)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(155)]||{},o=[t(186),t(187),t(182),"error",t(185),"table",t(169)];for(let r=0;r<o[t(188)];r++){const n=tt[t(170)][t(200)][t(158)](tt),i=o[r],u=e[i]||n;n[t(163)]=tt.bind(tt),n[t(165)]=u[t(165)][t(158)](u),e[i]=n}}))();const nt=[q(164)],et=m({__name:q(189),props:{builds:{},width:{default:1},color:{default:q(180)},opacity:{default:1},style:{default:q(190)}},setup(t){const s=q,c=t;let a=null,l=null;if(c[s(192)]===s(190)){const t=new e(c[s(153)][s(168)]);let n=(new o)[s(154)](t),u=new r({color:c[s(174)],linewidth:c[s(152)],opacity:c[s(171)],transparent:!0,depthWrite:!0,depthTest:!0});u[s(173)][s(172)](window.innerWidth,window.innerHeight),a=new i(n,u),a.applyMatrix4(c[s(153)].matrix[s(156)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c.color)},uOpacity:{value:c.opacity}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:s(149)};const t=new e(c[s(153)][s(168)]),o=new u(l);a=new LineSegments(t,o),a[s(176)](c[s(153)][s(159)].clone()),a.material.linewidth=c[s(152)],a.renderOrder=1e3}return w((()=>{const t=s;"Shader"===c[t(192)]&&(c[t(174)]&&(l.uniforms[t(178)][t(143)]=new n(c[t(174)])),c[t(171)]&&(l[t(194)][t(145)].value=c[t(171)])),"Wireframe"===c[t(192)]&&(c[t(174)]&&(a[t(161)][t(174)]=new n(c[t(174)])),c[t(171)]&&(a[t(161)][t(171)]=c[t(171)])),c.width&&(a[t(161)][t(160)]=c.width)})),(t,n)=>{const e=s;return I(),v(e(201),{object:_(a)},null,8,nt)}}});function ot(t){function n(t){const e=Q;if("string"==typeof t)return function(t){}[e(170)](e(162))[e(191)](e(184));1!==(""+t/t)[e(188)]||t%20==0?function(){return!0}[e(170)](e(193)+e(157))[e(198)]("action"):function(){return!1}[e(170)]("debu"+e(157))[e(191)](e(167)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=it;function it(t,n){const e=lt();return(it=function(t,n){return e[t-=171]})(t,n)}!function(t,n){const e=it,o=lt();for(;;)try{if(223934===-parseInt(e(198))/1*(-parseInt(e(208))/2)+parseInt(e(214))/3*(parseInt(e(200))/4)+parseInt(e(217))/5+-parseInt(e(194))/6*(parseInt(e(211))/7)+parseInt(e(210))/8+-parseInt(e(223))/9+parseInt(e(204))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(206)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ut(this,(function(){const t=it,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(196),"i"),o=pt("init");n.test(o+t(222))&&e.test(o+t(187))?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(206)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();st(void 0,(function(){const t=it,n=function(){const t=it;let n;try{n=Function(t(181)+t(192)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(220)]||{},o=[t(179),t(188),t(189),t(180),t(173),t(186),t(213)];for(let r=0;r<o[t(171)];r++){const n=st[t(207)][t(209)].bind(st),i=o[r],u=e[i]||n;n[t(191)]=st[t(176)](st),n[t(221)]=u[t(221)][t(176)](u),e[i]=n}}))();const ct={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(){const t=["TresGridHelper","table","input","warn","info","counter","__proto__",'{}.constructor("return this")( )',"debu","6rGHELp","pagesShow","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#000000","1pyUrKD","TresCanvas","1380mDyGXi","call","TresAmbientLight","gger","867090geBWgL","showGridHelper","apply","constructor","338846QfrXXG","prototype","1686952MDWuKE","2818067OTMcbn","builds","trace","3639SvDoyv","TresAxesHelper","showAxesHelper","24990MOKveM","#ffffff","#000","console","toString","chain","2375721EHHiwA","length","action","exception","string","autoRotate","bind","$slots","showBuildings","log","error","return (function() ","disableRender","TresDirectionalLight","ability"];return(lt=function(){return t})()}const ft=m({__name:rt(195),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(197),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r[n(182)]}),u=C({autoRotate:r[n(175)],enableDamping:!0});let l=null;r[n(178)]&&([e,o]=x((()=>G())),e=await e,o(),l=e);const f=y(),d=y();return(t,e)=>{const o=n,s=S(o(199));return I(),A(s,E({ref_key:"tcRef",ref:d},i,{"window-size":""}),{default:j((()=>[T("TresPerspectiveCamera",{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),R(_(p),B(M(u)),null,16),e[0]||(e[0]=T(o(202),{color:"#ffffff"},null,-1)),e[1]||(e[1]=T(o(183),{position:[100,100,0],intensity:.5,color:o(218)},null,-1)),r[o(178)]&&_(l)?(I(),v(O,{key:0},[R(Z,{model:_(l)},null,8,["model"]),R(et,{builds:_(l).city,color:o(219)},null,8,[o(212)])],64)):k("",!0),D(t[o(177)],o(184)),r[o(216)]?(I(),v(o(215),ct)):k("",!0),r[o(205)]?(I(),v(o(185),at)):k("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=it;if(typeof t===e(174))return function(t){}[e(207)]("while (true) {}").apply(e(190));1!==(""+t/t).length||t%20==0?function(){return!0}[e(207)](e(193)+e(203))[e(201)](e(172)):function(){return!1}[e(207)](e(193)+e(203))[e(206)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Z as _,et as a,ft as b,G as l};

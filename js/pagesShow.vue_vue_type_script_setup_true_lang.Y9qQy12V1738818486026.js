import{_ as t,ck as n,cl as e,cm as o,cn as r,C as i,l as u,c0 as c,ak as s,am as a}from"./three.WgQSjl1J1738818486026.js";import{P as l,e as f,o as p}from"./@tresjs.ZGxFoQtw1738818486026.js";import{z as d}from"./three-custom-shader-material.GL6LOUMf1738818486026.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1738818486026.js";import{d as y,b as m,a2 as w,w as b,o as I,H as _,u as x,r as v,a3 as C,e as S,f as R,g as A,N as T,j as B,aj as j,ak as F,F as k,M as E,J as O,m as z}from"./@vue.NRI7TcgI1738818486026.js";function G(t,n){const e=L();return(G=function(t,n){return e[t-=207]})(t,n)}!function(t,n){const e=G,o=L();for(;;)try{if(585625===-parseInt(e(228))/1+-parseInt(e(207))/2+-parseInt(e(225))/3+-parseInt(e(218))/4+parseInt(e(234))/5+parseInt(e(226))/6*(-parseInt(e(214))/7)+parseInt(e(238))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(215)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function L(){const t=["constructor","398455ZkzuzS","counter","info","log","table","return (function() ","2586465DInzmG","trace","string","toString","22535464rGBRgh","console","traverse","function *\\( *\\)","328748Zdybso","ROADS","name","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","init","debu","119931xbFEqY","apply","error","warn","3719096beuRPw","chain","gger","bind","exception","prototype","action","2997009bYSKSv","90qwozFK"];return(L=function(){return t})()}!function(){H(this,(function(){const t=G,n=new RegExp(t(241)),e=new RegExp(t(210),"i"),o=Z(t(212));n.test(o+t(219))&&e.test(o+"input")?Z():o("0")}))()}();const M=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(215)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();M(void 0,(function(){const t=G,n=function(){const t=G;let n;try{n=Function(t(233)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(239)]=n.console||{},o=[t(231),t(217),t(230),t(216),t(222),t(232),t(235)];for(let r=0;r<o.length;r++){const n=M[t(227)][t(223)].bind(M),i=o[r],u=e[i]||n;n.__proto__=M[t(221)](M),n[t(237)]=u[t(237)][t(221)](u),e[i]=n}}))();const Y=async()=>{const t=G,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(240)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(209)]&&(e=n),"LANDMASS"===n[i(209)]&&(o=n),n[i(209)]===i(208)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function Z(t){function n(t){const e=G;if(typeof t===e(236))return function(t){}[e(227)](e(211))[e(215)](e(229));1!==(""+t/t).length||t%20==0?function(){return!0}[e(227)](e(213)+e(220)).call(e(224)):function(){return!1}[e(227)]("debu"+e(220))[e(215)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const D=P;!function(t,n){const e=P,o=K();for(;;)try{if(660910===parseInt(e(249))/1*(-parseInt(e(255))/2)+parseInt(e(269))/3*(parseInt(e(298))/4)+parseInt(e(282))/5+parseInt(e(303))/6+parseInt(e(289))/7+parseInt(e(253))/8*(parseInt(e(268))/9)+parseInt(e(299))/10*(-parseInt(e(267))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(283)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){$(this,(function(){const t=P,n=new RegExp(t(293)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=U("init");n[t(281)](o+t(251))&&e[t(281)](o+t(270))?U():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function P(t,n){const e=K();return(P=function(t,n){return e[t-=247]})(t,n)}J(void 0,(function(){const t=P,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(305)]=n.console||{},o=["log",t(278),t(284),t(292),t(258),"table","trace"];for(let r=0;r<o[t(275)];r++){const n=J.constructor.prototype[t(247)](J),i=o[r],u=e[i]||n;n[t(265)]=J.bind(J),n.toString=u.toString[t(247)](u),e[i]=n}}))();const W=[D(254)];function K(){const t=["dispose","chain","uColor","33016Lldhcs","object","32560rcMprn","uOpacity","__csm","exception","gger","value","call","renderOrder","Color","color","__proto__","#112233","11YUuPxK","1089KTbHpV","18Jlsbmx","input","string","DoubleSide","stateObject","landColor","length","bulidingsColor","setStyle","warn","land","action","test","5747860RVeWYY","apply","info","#ffff00","computeBoundingBox","uGradient","gradient","5819751GEoeQy","#e523ff","side","error","function *\\( *\\)","opacity","#ffffff","clone","topColor","159292RskWJb","13965320KTCoso","model","forEach","debu","2280552JixgXi","computeBoundingSphere","console","constructor","counter","isArray","uniforms","bind","material","64DOHYQx"];return(K=function(){return t})()}const N=y({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:D(290)},landColor:{default:D(266)},topColor:{default:D(285)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=D,o=n,r=m(0),i=o[e(300)].city;i[e(262)]=1001;const u=o.model[e(279)];(()=>{const n=e,{geometry:u}=i;u[n(286)](),u[n(304)]();const{max:c,min:s}=u.boundingBox;if(i[n(248)][n(257)])return;const a=new d({baseMaterial:i[n(248)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(263)])(o.bulidingsColor)},uOpacity:{value:o.opacity},uLightColor:{value:new(t[n(263)])(n(295))},uTopColor:{value:new(t[n(263)])(o[n(297)])},uTime:r,uGradient:{value:o[n(288)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(272)]});i[n(248)][n(250)](),i[n(248)]=a})();const{onLoop:c}=f();c((({delta:t})=>{r.value+=t})),w((()=>{const n=e;o[n(276)]&&i.material.uniforms[n(252)][n(260)][n(277)](o[n(276)]),o[n(274)]&&((n,r)=>{const i=e;let c;"cu"===n||"land"===n&&(c=Array[i(308)](u.material)?u[i(248)]:[u[i(248)]],c[i(301)]((n=>{const e=i;n[r][e(277)](o[e(274)]),n[e(291)]=t[e(272)]})))})(n(279),n(264)),o[n(294)]&&(i.material[n(309)][n(256)][n(260)]=o[n(294)])})),b(o,((t,n)=>{const o=e;i[o(248)][o(309)][o(287)][o(260)]=t[o(288)]}));const s=o.model.model[e(296)]();return(t,n)=>(I(),_("primitive",{object:x(s)},null,8,W))}});function U(t){function n(t){const e=P;if(typeof t===e(271))return function(t){}[e(306)]("while (true) {}")[e(283)](e(307));1!==(""+t/t).length||t%20==0?function(){return!0}[e(306)]("debu"+e(259))[e(261)](e(280)):function(){return!1}.constructor(e(302)+e(259))[e(283)](e(273)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const V=tt;!function(t,n){const e=tt,o=X();for(;;)try{if(672041===-parseInt(e(332))/1+parseInt(e(389))/2*(-parseInt(e(342))/3)+parseInt(e(368))/4+-parseInt(e(358))/5*(-parseInt(e(352))/6)+-parseInt(e(371))/7+parseInt(e(373))/8+parseInt(e(344))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(348)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){q(this,(function(){const t=tt,n=new RegExp(t(341)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot(t(340));n[t(388)](o+t(351))&&e[t(388)](o+t(339))?ot():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(348)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function X(){const t=["__proto__","1585BEHErs","prototype","console","builds"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","constructor","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","primitive","width","color","1035128zxpLVx","linewidth","debu","6063232mFmoHT","innerHeight","9918152ZinxIi","error","Wireframe","Shader","clone","call","while (true) {}","matrix","log","resolution","counter","value","uniforms","fromEdgesGeometry","style","test","2rfFmhb","927557FvHceG","string","geometry",'{}.constructor("return this")( )',"material","bind","gger","input","init","function *\\( *\\)","507054aEVYBl","info","5127858qNQkgJ","innerWidth","renderOrder","opacity","apply","stateObject","uColor","chain","10722hnckji","length","toString","table","#FFF"];return(X=function(){return t})()}function tt(t,n){const e=X();return(tt=function(t,n){return e[t-=332]})(t,n)}Q(void 0,(function(){const t=tt;let n;try{n=Function("return (function() "+t(335)+");")()}catch(r){n=window}const e=n.console=n[t(360)]||{},o=[t(381),"warn",t(343),t(374),"exception",t(355),"trace"];for(let i=0;i<o[t(353)];i++){const n=Q[t(363)][t(359)][t(337)](Q),r=o[i],u=e[r]||n;n[t(357)]=Q[t(337)](Q),n.toString=u[t(354)][t(337)](u),e[r]=n}}))();const nt=["object"],et=y({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:V(356)},opacity:{default:1},style:{default:V(375)}},setup(t){const c=V,s=t;let a=null,l=null;if(s[c(387)]===c(375)){const t=new n(s[c(361)][c(334)]);let i=(new e)[c(386)](t),u=new o({color:s[c(367)],linewidth:s[c(366)],opacity:s[c(347)],transparent:!0,depthWrite:!0,depthTest:!0});u[c(382)].set(window[c(345)],window[c(372)]),a=new r(i,u),a.applyMatrix4(s.builds[c(380)][c(377)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(s[c(367)])},uOpacity:{value:s.opacity}},vertexShader:c(364),fragmentShader:c(362)};const t=new n(s[c(361)][c(334)]),e=new u(l);a=new LineSegments(t,e),a.applyMatrix4(s[c(361)][c(380)].clone()),a[c(336)][c(369)]=s[c(366)],a[c(346)]=1e3}return w((()=>{const t=c;s[t(387)]===t(376)&&(s[t(367)]&&(l[t(385)][t(350)][t(384)]=new i(s[t(367)])),s[t(347)]&&(l[t(385)].uOpacity[t(384)]=s[t(347)])),s.style===t(375)&&(s.color&&(a[t(336)][t(367)]=new i(s.color)),s.opacity&&(a.material[t(347)]=s[t(347)])),s[t(366)]&&(a.material[t(369)]=s.width)})),(t,n)=>{const e=c;return I(),_(e(365),{object:x(a)},null,8,nt)}}});function ot(t){function n(t){const e=tt;if(typeof t===e(333))return function(t){}.constructor(e(379))[e(348)](e(383));1!==(""+t/t).length||t%20==0?function(){return!0}[e(363)](e(370)+e(338))[e(378)]("action"):function(){return!1}[e(363)]("debugger").apply(e(349)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function rt(t,n){const e=ct();return(rt=function(t,n){return e[t-=267]})(t,n)}!function(t,n){const e=rt,o=ct();for(;;)try{if(120130===parseInt(e(307))/1+parseInt(e(312))/2+parseInt(e(316))/3*(-parseInt(e(274))/4)+-parseInt(e(273))/5*(-parseInt(e(297))/6)+parseInt(e(292))/7+-parseInt(e(287))/8+-parseInt(e(285))/9*(parseInt(e(314))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[rt(304)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=rt,n=new RegExp(t(309)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ft("init");n.test(o+"chain")&&e[t(296)](o+"input")?ft():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[rt(304)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(){const t=["327080UNdLRu","log","10KwJBtY","TresAxesHelper","27837XAtXTn","$slots","autoRotate","constructor","#000000","tcRef","city","stateObject","TresGridHelper","while (true) {}","exception","317535egYlAU","80iDxHGr","prototype","warn","disableRender","#ffffff","ability","__proto__","showAxesHelper","length","model","#000","2994903POFgnY","error","396072pDFYQb","return (function() ","showGridHelper","table","call","1641003DqTZue","console",'{}.constructor("return this")( )',"trace","test","12JrnkFL","TresPerspectiveCamera","bind","gger","TresAmbientLight","builds","TresDirectionalLight","apply","info","showBuildings","163003OPYGSG","TresCanvas","function *\\( *\\)","perspectiveCameraRef","toString"];return(ct=function(){return t})()}ut(void 0,(function(){const t=rt,n=function(){const t=rt;let n;try{n=Function(t(288)+t(294)+");")()}catch(e){n=window}return n}(),e=n[t(293)]=n[t(293)]||{},o=[t(313),t(276),t(305),t(286),t(272),t(290),t(295)];for(let r=0;r<o[t(282)];r++){const n=ut.constructor[t(275)][t(299)](ut),i=o[r],u=e[i]||n;n[t(280)]=ut[t(299)](ut),n[t(311)]=u[t(311)].bind(u),e[i]=n}}))();const st={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]},lt=y({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=v({clearColor:n(320),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:s,toneMapping:a,disableRender:r[n(277)]}),u=v({autoRotate:r[n(318)],enableDamping:!0});let l=null;r[n(306)]&&([e,o]=C((()=>Y())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,c=S(o(308));return I(),R(c,z({ref_key:o(267),ref:d},i,{"window-size":""}),{default:A((()=>[T(o(298),{ref_key:o(310),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(x(p),j(F(u)),null,16),e[0]||(e[0]=T(o(301),{color:"#ffffff"},null,-1)),e[1]||(e[1]=T(o(303),{position:[100,100,0],intensity:.5,color:o(278)},null,-1)),r.showBuildings&&x(l)?(I(),_(k,{key:0},[B(N,{model:x(l)},null,8,[o(283)]),B(et,{builds:x(l)[o(268)],color:o(284)},null,8,[o(302)])],64)):E("",!0),O(t[o(317)],o(279)),r[o(281)]?(I(),_(o(315),st)):E("",!0),r[o(289)]?(I(),_(o(270),at)):E("",!0)])),_:3},16)}}});function ft(t){function n(t){const e=rt;if("string"==typeof t)return function(t){}[e(319)](e(271)).apply("counter");1!==(""+t/t)[e(282)]||t%20==0?function(){return!0}[e(319)]("debugger")[e(291)]("action"):function(){return!1}.constructor("debu"+e(300)).apply(e(269)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{N as _,et as a,lt as b,Y as l};

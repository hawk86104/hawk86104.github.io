import{e as n,h as t,a as e,o}from"./@tresjs.gjafZgVK1741594518249.js";import{P as i}from"./tweakpane.yDiyAAkA1741594518249.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.cVFL7d4w1741594518249.js";import{_ as s}from"./three.8y0_KTxz1741594518249.js";import{d as a,a3 as u,w as c,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as y}from"./@vue.NRI7TcgI1741594518249.js";import"./postprocessing.iiPTtJPW1741594518249.js";import"./@vueuse.8xnC6EWf1741594518249.js";import"./all.three.aalXMn071741594518249.js";import"./oimophysics.x0jH7fze1741594518249.js";const b=k;!function(n,t){const e=k,o=I();for(;;)try{if(587517===parseInt(e(187))/1+-parseInt(e(175))/2*(parseInt(e(208))/3)+parseInt(e(213))/4+parseInt(e(202))/5+parseInt(e(217))/6*(-parseInt(e(191))/7)+-parseInt(e(225))/8*(-parseInt(e(203))/9)+parseInt(e(181))/10*(-parseInt(e(212))/11))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function I(){const n=["prototype","MeshPhongMaterial","hasMaskTexture","351932luWqin","trace","counter","wavePow","division","console","input","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","stateObject","direction","length","3810070OEVZCL","1209591ghsQkc","gger","info","log","toString","9399CTPqtE","time","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","11toOGxC","2423904SdzPMG","table","string","fragmentShader","60dhiyCz","DoubleSide","return (function() ","maskTexture","bind","error","gridWeight","exception","64csmoMr","apply","warn","hexGridMaterial","call","side","454aWxPff","value","__proto__","isReversed","baseMaterial","test","13506550nFqtpe","divisionScaleX","raisedBottom","waveFrequency","debu","constructor","708941ZetcPW"];return(I=function(){return n})()}!function(){_(this,(function(){const n=k,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(210),"i"),o=S("init");t[n(180)](o+"chain")&&e[n(180)](o+n(197))?S():o("0")}))()}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function k(n,t){const e=I();return(k=function(n,t){return e[n-=174]})(n,t)}M(void 0,(function(){const n=k,t=function(){const n=k;let t;try{t=Function(n(219)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(196)]=t.console||{},o=[n(206),n(227),n(205),n(222),n(224),n(214),n(192)];for(let i=0;i<o[n(201)];i++){const t=M.constructor[n(188)].bind(M),r=o[i],s=e[r]||t;t[n(177)]=M[n(221)](M),t[n(207)]=s.toString[n(221)](s),e[r]=t}}))();const C=b(198),P=a({__name:b(228),props:{baseMaterial:{default:new(s[b(189)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const i=b;let r,a;const p=o,v={gridWeight:{value:p[i(223)]},raisedBottom:{value:p[i(183)]},waveFrequency:{value:p[i(184)]},wavePow:{value:p.wavePow},direction:{value:p[i(200)]},isReversed:{value:p.isReversed},hasMaskTexture:{value:p[i(190)]},maskTexture:{value:null},division:{value:p.division},divisionScaleX:{value:p[i(182)]},time:{value:0}};p[i(220)]&&(v[i(220)][i(176)]=([r,a]=u((()=>e([p[i(220)]]))),r=await r,a(),r)),c((()=>[p[i(223)],p[i(183)],p[i(184)],p.wavePow,p[i(195)],p[i(182)],p[i(200)],p.isReversed,p[i(190)]]),(([n,t,e,o,r,s,a,u,c])=>{const l=i;v[l(223)][l(176)]=n,v[l(183)][l(176)]=t,v[l(184)].value=e,v[l(194)].value=o,v[l(195)].value=r,v.divisionScaleX.value=s,v[l(200)][l(176)]=a,v[l(178)][l(176)]=u,v[l(190)][l(176)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=i;v[t(209)][t(176)]+=n*p.speed})),(n,e)=>{const r=i;return l(),f(d(t),{baseMaterial:o[r(179)],vertexShader:C,side:s[r(218)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[r(179),r(174),r(216)])}}});function S(n){function t(n){const e=k;if(typeof n===e(215))return function(n){}[e(186)]("while (true) {}").apply(e(193));1!==(""+n/n)[e(201)]||n%20==0?function(){return!0}[e(186)](e(185)+e(204))[e(229)](e(211)):function(){return!1}[e(186)]("debugger")[e(226)](e(199)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function T(n,t){const e=F();return(T=function(n,t){return e[n-=432]})(n,t)}const j=T;!function(n,t){const e=T,o=F();for(;;)try{if(350730===-parseInt(e(449))/1+parseInt(e(433))/2*(parseInt(e(473))/3)+-parseInt(e(466))/4*(parseInt(e(456))/5)+-parseInt(e(434))/6*(-parseInt(e(461))/7)+-parseInt(e(439))/8+parseInt(e(455))/9+parseInt(e(459))/10)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const B=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(452)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){B(this,(function(){const n=T,t=new RegExp(n(458)),e=new RegExp(n(471),"i"),o=A("init");t[n(450)](o+n(469))&&e[n(450)](o+n(462))?A():o("0")}))()}();const D=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(452)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();D(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(470)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(465)]=t[n(465)]||{},o=[n(445),n(440),n(464),n(457),n(432),"table","trace"];for(let i=0;i<o[n(468)];i++){const t=D[n(436)][n(441)].bind(D),r=o[i],s=e[r]||t;t[n(451)]=D[n(454)](D),t[n(453)]=s[n(453)][n(454)](s),e[r]=t}}))();const R=[j(435)],z=a({__name:j(442),setup(n){const t=j,e=new(s[t(443)]);return(n,o)=>{const i=t;return l(),p(i(447),{rotation:[-Math.PI/2,0,0]},[o[0]||(o[0]=v(i(438),{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(P,g({baseMaterial:d(e)},n[i(437)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[i(448)])])),_:1}))],8,R)}}});function A(n){function t(n){const e=T;if(typeof n===e(472))return function(n){}.constructor("while (true) {}").apply(e(467));1!==(""+n/n)[e(468)]||n%20==0?function(){return!0}[e(436)]("debugger")[e(446)]("action"):function(){return!1}.constructor(e(444)+e(460)).apply(e(463)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function F(){const n=["call","TresMesh","baseMaterial","541984QsqTzN","test","__proto__","apply","toString","bind","4395645ETwHnF","5dJgqLX","error","function *\\( *\\)","7488080xserjA","gger","154VohEZd","input","stateObject","info","console","1583884eGLMMI","counter","length","chain","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","12ozoohH","exception","245938TZnJqv","31872PtQDfg","rotation","constructor","$attrs","TresPlaneGeometry","4458144eAgDSh","warn","prototype","hexGridMesh","MeshBasicMaterial","debu","log"];return(F=function(){return n})()}const q=G;!function(n,t){const e=G,o=Z();for(;;)try{if(194255===parseInt(e(270))/1+-parseInt(e(269))/2+parseInt(e(287))/3*(-parseInt(e(296))/4)+-parseInt(e(261))/5*(-parseInt(e(282))/6)+-parseInt(e(267))/7+-parseInt(e(255))/8+parseInt(e(291))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[G(262)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=G,t=new RegExp(n(301)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=W("init");t[n(290)](o+n(276))&&e.test(o+n(277))?W():o("0")}))()}();const X=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function Z(){const n=["__proto__","trace","division","string","error","网格横向缩放","渐变宽度","hexGridGround","direction","2144296jiESHN","hasMaskTexture","exception","bind","toString","length","100CcJFfx","apply","TresCanvas","while (true) {}","constructor","divisionScaleX","498568OMKuyC","warn","218312IVfTlE","344401xfwnMt","isReversed","TresPerspectiveCamera","#de62f2","渐变强度","color","chain","input","gridWeight","方向类别","网格整体缩放","waveFrequency","111054EcmSuM","addBinding","gger","raisedBottom","table","43362MyOdAZ","debu","counter","test","1304109rCUVAX","call","console","info","log","60YQGozZ","wavePow","speed","#666666","return (function() ","function *\\( *\\)","颜色取反"];return(Z=function(){return n})()}function G(n,t){const e=Z();return(G=function(n,t){return e[n-=251]})(n,t)}X(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function(n(300)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(293)]=t[n(293)]||{},o=[n(295),n(268),n(294),n(307),n(257),n(286),n(304)];for(let i=0;i<o[n(260)];i++){const t=X[n(265)].prototype[n(258)](X),r=o[i],s=e[r]||t;t[n(303)]=X[n(258)](X),t[n(259)]=s[n(259)][n(258)](s),e[r]=t}}))();const L=a({__name:q(253),setup(n){const t=q,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:t(273),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new i({title:t(253),expanded:!0});return a.addBinding(s,t(256),{label:"图片纹理"}),a.addBinding(s,t(275),{label:"颜色"}),a[t(283)](s,t(298),{label:"速度",min:-5,max:5,step:.1}),a[t(283)](s,t(278),{label:"网格宽度",min:.001,max:.5,step:.001}),a[t(283)](s,t(285),{label:t(252),min:.001,max:1,step:.001}),a[t(283)](s,t(281),{label:"分段",min:.001,max:1,step:.001}),a[t(283)](s,t(297),{label:t(274),min:1,max:30,step:.1}),a[t(283)](s,t(305),{label:t(280),min:.1,max:50,step:.1}),a[t(283)](s,t(266),{label:t(251),min:.1,max:10,step:.1}),a.addBinding(s,t(271),{label:t(302)}),a.addBinding(s,t(254),{label:t(279),min:3,max:6,step:1}),(n,i)=>{const a=t,u=y(a(263));return l(),f(u,{clearColor:a(299),"window-size":""},{default:m((()=>[i[0]||(i[0]=v(a(272),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(o),{enableDamping:"",autoRotate:""}),h(z,g(s,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function W(n){function t(n){const e=G;if(typeof n===e(306))return function(n){}.constructor(e(264))[e(262)](e(289));1!==(""+n/n)[e(260)]||n%20==0?function(){return!0}[e(265)](e(288)+"gger")[e(292)]("action"):function(){return!1}[e(265)]("debu"+e(284)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{L as default};

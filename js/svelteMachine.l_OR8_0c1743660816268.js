import{m as t,e,f as n,o}from"./@tresjs.zc7faK4J1743660816268.js";import"./index.a0kBFvA81743660816268.js";import{T as s,f as r,bZ as i}from"./three.2wx8FU0g1743660816268.js";import{d as c,o as a,H as u,N as p,F as l,a4 as f,b as d,q as h,j as m,u as y,r as b,w as g,g as j,aj as v,ak as w,f as z,al as x}from"./@vue.B5PFBfKs1743660816268.js";import{l as E,a as I}from"./utils.ocuLcTzq1743660816268.js";import"./index.T-vY6kZg1743660816268.js";import{l as _}from"./cssLoaders.bhHKUWvv1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";import"./@fesjs.9AUNBPBQ1743660816268.js";import"./vue-router.K4ys0Z-O1743660816268.js";import"./lodash-es.IJc9G_SW1743660816268.js";import"./@qlin.o0hjOMCg1743660816268.js";import"./pinia.0dYyFDku1743660816268.js";import"./@floating-ui.HzHndBae1743660816268.js";import"./@juggle.4EyLec-41743660816268.js";import"./jszip.rGR265Ak1743660816268.js";import"./@amap.c8pGcSIC1743660816268.js";import"./file-saver.fNvQlh5m1743660816268.js";import"./utils.J8F9Jo-01743660816268.js";import"./three-mesh-ui.module._G62nyeC1743660816268.js";const M=P;!function(t,e){const n=P,o=A();for(;;)try{if(150733===parseInt(n(440))/1*(parseInt(n(458))/2)+-parseInt(n(426))/3+-parseInt(n(397))/4*(parseInt(n(385))/5)+-parseInt(n(436))/6*(parseInt(n(413))/7)+parseInt(n(421))/8*(-parseInt(n(463))/9)+-parseInt(n(395))/10*(-parseInt(n(444))/11)+parseInt(n(448))/12*(parseInt(n(398))/13))break;o.push(o.shift())}catch(s){o.push(o.shift())}}();const S=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[P(399)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function P(t,e){const n=A();return P=function(t,e){return n[t-=385]},P(t,e)}!function(){S(this,(function(){const t=P,e=new RegExp(t(402)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=D(t(449));e[t(425)](o+"chain")&&n[t(425)](o+t(442))?D():o("0")}))()}();const R=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function A(){const t=["dirb","scene","table","30aeUPbw","call","956YWyqTJ","507yzZLGV","apply","暂时不考虑像素比的设置函数","stop","function *\\( *\\)","width","renderer","start","this.environment.mapping = THREE.EquirectangularReflectionMapping;\nthis.environment.colorSpace = THREE.SRGBColorSpace;\nfunction update( event ) {}","domElement","stringify","pointerdown","parentElement","senceScirpt","value","128261CizrgF","onPointerMove","dispatch","trace","onKeyDown","暂时不考虑摄像机的设置函数","this.shadow.mapSize.width = 1024 * 2\nthis.shadow.mapSize.height = 1024 * 2\nthis.shadow.camera.near = 1\nthis.shadow.camera.far = 50\nthis.shadow.camera.top = 80\nthis.shadow.camera.bottom = -80\nthis.shadow.camera.left = -80\nthis.shadow.camera.right = 80\nthis.shadow.radius = 24\nthis.shadow.bias = -0.0075\nfunction update( event ) {}","action","24sTXUyM","source","console","THREE","test","852504ojlewN","this.shadow.mapSize.width = 1024 * 2\nthis.shadow.mapSize.height = 1024 * 2\nthis.shadow.camera.near = 1\nthis.shadow.camera.far = 10\nthis.shadow.bias = -0.0075\nthis.shadow.radius = 24\nthis.target.position.copy(this.position.clone().setY(0))\nfunction update( event ) {}","camera","pointerup","replace","bind","warn","player,renderer,scene,camera","toString","pointermove","6NiHRAY","return (function() ","getObjectByProperty","removeEventListener","86760fYcdQW","while (true) {}","input","TextureLoader","825869ifiZuq","constructor",'{}.constructor("return this")( )',"__proto__","70212JVrrDt","init","keyup","onPointerUp","暂时不考虑尺寸的设置函数","player: Event type not supported (","length","counter","log","debu","6uvyXqs","暂时不考虑释放资源的函数","onPointerDown","addEventListener","exception","683217YCUBuG","gger","SpotLightEvent","sizes","685ajrWFz","string","onKeyUp","keydown","uuid","events","player: Script without object."];return(A=function(){return t})()}R(void 0,(function(){const t=P;let e;try{e=Function(t(437)+t(446)+");")()}catch(s){e=window}const n=e[t(423)]=e[t(423)]||{},o=[t(456),t(432),"info","error",t(462),t(394),t(416)];for(let r=0;r<o[t(454)];r++){const e=R.constructor.prototype.bind(R),s=o[r],i=n[s]||e;e[t(447)]=R[t(431)](R),e[t(434)]=i[t(434)][t(431)](i),n[s]=e}}))(),window[M(424)]=s;const k={scene:null,renderer:null,camera:null,sizes:null},C={get renderer(){const t=M;return k.renderer?.[t(412)]},loader:new(s[M(443)]),get scene(){const t=M;return k[t(393)]?.value},get camera(){const t=M;return k[t(428)]?.[t(412)]},get width(){const t=M;return k[t(466)]?.[t(403)]?.[t(412)]},get height(){const t=M;return k.sizes?.height?.[t(412)]},get dom(){const t=M;return k[t(404)]?.[t(412)][t(407)][t(410)]},get canvas(){const t=M;return k[t(404)]?.value[t(407)]},events:{},init(t,e,n,o){const s=M;k[s(393)]=t,k[s(404)]=e,k.camera=n,k[s(466)]=o},load(t){const e=M,n={"1d0e8871-bd60-47f9-8ab7-232dabd30201":[{name:e(465),source:e(427)}],"beea1423-1e37-47ab-9443-f8429259e120":[{name:e(392),source:e(419)}],"31517222-A9A7-4EAF-B5F6-60751C0BABA3":[{name:e(411),source:e(406)}]};this[e(390)]={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]};let o=e(433);const s={};for(const i in this[e(390)])o+=","+i,s[i]=i;const r=JSON[e(408)](s)[e(430)](/\"/g,"");for(const i in n){let s=i;i===t[e(389)]&&(s=this[e(393)][e(389)]);const c=this.scene[e(438)](e(389),s,!0);if(void 0===c){console.warn(e(391),s);continue}const a=n[i];for(let t=0;t<a[e(454)];t++){const n=a[t],s=new Function(o,n[e(422)]+"\nreturn "+r+";").bind(c)(this,this[e(404)],this[e(393)],this.camera);for(const t in s)void 0!==s[t]&&(void 0!==this[e(390)][t]?this.events[t].push(s[t][e(431)](c)):console[e(432)](e(453),t,")"))}this[e(415)](this[e(390)][e(449)],arguments)}},dispatch(t,e){for(let n=0,o=t[M(454)];n<o;n++)t[n](e)},setCamera(t){const e=M;console[e(432)](e(418),t)},setScene(t){console[M(432)]("暂时不考虑场景的设置函数",t)},setPixelRatio(t){const e=M;console[e(432)](e(400),t)},setSize(t){const e=M;console.warn(e(452),t)},dispose(){const t=M;console[t(432)](t(459))},onKeyDown(t){const e=M;C[e(415)](C[e(390)][e(388)],t)},onKeyUp(t){const e=M;C[e(415)](C[e(390)][e(450)],t)},onPointerDown(t){const e=M;C[e(415)](C[e(390)][e(409)],t)},onPointerUp(t){const e=M;C[e(415)](C[e(390)].pointerup,t)},onPointerMove(t){const e=M;C[e(415)](C[e(390)][e(435)],t)},play(){const t=M;document[t(461)](t(388),this[t(417)]),document.addEventListener("keyup",this[t(387)]),document[t(461)](t(409),this[t(460)]),document[t(461)]("pointerup",this[t(451)]),document[t(461)]("pointermove",this[t(414)]),this[t(415)](this[t(390)][t(405)],null)},stop(){const t=M;document[t(439)](t(388),this[t(417)]),document[t(439)](t(450),this[t(387)]),document[t(439)]("pointerdown",this[t(460)]),document.removeEventListener(t(429),this[t(451)]),document[t(439)](t(435),this[t(414)]),this[t(415)](this[t(390)][t(401)],arguments)},render(t,e){this[M(415)](this.events.update,{time:t,delta:e})}};function D(t){function e(t){const n=P;if(typeof t===n(386))return function(t){}[n(445)](n(441)).apply(n(455));1!==(""+t/t)[n(454)]||t%20==0?function(){return!0}.constructor("debugger")[n(396)](n(420)):function(){return!1}[n(445)](n(457)+n(464)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const L={points:[{x:-16.017528533935547,y:2.4581613540649414,z:53.098697662353516},{x:-11.40013599395752,y:2.4513251781463623,z:43.62754821777344},{x:-7.9051361083984375,y:2.4462289810180664,z:36.4436149597168},{x:-5.53253173828125,y:2.442873001098633,z:31.546899795532227},{x:-4.282320976257324,y:2.4412572383880615,z:28.937395095825195},{x:-3.9756288528442383,y:2.4410974979400635,z:28.24086570739746},{x:-3.7963345050811768,y:2.4410974979400635,z:27.74983024597168},{x:-3.6438193321228027,y:2.4410974979400635,z:27.253768920898438},{x:-3.5180840492248535,y:2.4410974979400635,z:26.75269317626953},{x:-3.419203519821167,y:2.4411063194274902,z:26.243703842163086},{x:-3.3517673015594482,y:2.4416656494140625,z:25.55027961730957},{x:-3.318483829498291,y:2.4430952072143555,z:24.5682430267334},{x:-3.319352865219116,y:2.445394515991211,z:23.297592163085938},{x:-3.354374647140503,y:2.448564052581787,z:21.73832893371582},{x:-3.4121222496032715,y:2.4521596431732178,z:19.611284255981445},{x:-3.461057662963867,y:2.454956293106079,z:16.145946502685547},{x:-3.49935245513916,y:2.456882953643799,z:11.297648429870605},{x:-3.5270066261291504,y:2.457939386367798,z:5.066390037536621},{x:-3.544764518737793,y:2.4581613540649414,z:-2.423649311065674},{x:-3.565464973449707,y:2.4581613540649414,z:-9.03036880493164},{x:-3.5937604904174805,y:2.4581613540649414,z:-13.977668762207031},{x:-3.629650592803955,y:2.4581613540649414,z:-17.265522003173828},{x:-3.673135280609131,y:2.4581613540649414,z:-18.893949508666992},{x:-3.7082104682922363,y:2.4581613540649414,z:-19.473438262939453},{x:-3.7077581882476807,y:2.4581613540649414,z:-20.038450241088867},{x:-3.6713337898254395,y:2.4581613540649414,z:-20.605941772460938},{x:-3.5989370346069336,y:2.4581613540649414,z:-21.175914764404297},{x:-3.3510568141937256,y:2.4581613540649414,z:-22.262161254882812},{x:-1.7961064577102661,y:2.4581615924835205,z:-28.032060623168945},{x:1.3139424324035645,y:2.4581618309020996,z:-39.39905548095703},{x:5.9790754318237305,y:2.458162546157837,z:-56.36309814453125},{x:12.19931411743164,y:2.458163261413574,z:-78.92425537109375}],closed:!1},B=Z;!function(t,e){const n=Z,o=J();for(;;)try{if(555695===-parseInt(n(350))/1+parseInt(n(309))/2*(-parseInt(n(323))/3)+-parseInt(n(316))/4*(-parseInt(n(355))/5)+-parseInt(n(341))/6+-parseInt(n(353))/7*(parseInt(n(362))/8)+-parseInt(n(337))/9+parseInt(n(343))/10)break;o.push(o.shift())}catch(s){o.push(o.shift())}}();const T=function(t){const e=Z,n=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[Z(322)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){n(this,(function(){const t=Z,e=new RegExp(t(356)),n=new RegExp(t(345),"i"),o=O("init");e.test(o+"chain")&&n[t(332)](o+t(357))?O():o("0")}))()}();const o=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[Z(322)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();o(this,(function(){const t=Z,e=function(){const t=Z;let e;try{e=Function(t(313)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e.console=e[t(320)]||{},s=[t(339),"warn",t(310),t(360),"exception",t(346),t(312)];for(let r=0;r<s[t(342)];r++){const e=o[t(327)][t(358)][t(361)](o),i=s[r],c=n[i]||e;e[t(317)]=o[t(361)](o),e[t(354)]=c[t(354)][t(361)](c),n[i]=e}}))();const r=t[e(359)],i=[];for(const a of r){const t=a.x,n=a.y,o=a.z;i.unshift(new(s[e(311)])(t,n,o))}const c=new(s[e(326)])(i);return c[e(352)]=t[e(352)],c}(L),F=new(s[B(324)]);function J(){const t=["table","progresses","push","geometry","678367HBZDVE","count","closed","7KhSnuh","toString","465BfzAhD","function *\\( *\\)","input","prototype","points","error","bind","3230392CFZnXN","672TBbaJu","info","Vector3","trace","return (function() ","clone","gger","32880yzRphX","__proto__","visible","position","console","stateObject","apply","8229saqPom","Matrix4","debu","CatmullRomCurve3","constructor","instanceMatrix","setPosition","copy","InstancedMesh","test","progress","computeBoundingSphere","string","userData","8707995JMJrKg","flat_item","log","counter","5880582PaJBem","length","37427010obuMzJ","getPointAt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(J=function(){return t})()}function Z(t,e){const n=J();return(Z=function(t,e){return n[t-=309]})(t,e)}function O(t){function e(t){const n=Z;if(typeof t===n(335))return function(t){}[n(327)]("while (true) {}").apply(n(340));1!==(""+t/t)[n(342)]||t%20==0?function(){return!0}.constructor("debu"+n(315)).call("action"):function(){return!1}.constructor(n(325)+n(315))[n(322)](n(321)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const U=["object"],q=["object"],K=["object"],W=["object"],$=["object"],H=["object"],N=["object"],Y=c({__name:"firstLevel-bf61e255d699",props:{object:{}},setup(n){const o=n,{scene:i}=t(),c=function(t){const e=B,n=T[e(359)][e(342)]/2,o=new(s[e(331)])(t[e(349)],t.material,n);o[e(336)]={progresses:[]};for(let s=0;s<n;s++){const t=s/(n-1),r=T[e(344)](t);o.userData[e(347)][s]=t,F[e(329)](r),o.setMatrixAt(s,F)}return o}(o.object[1]);i.value.add(c);const f=function(t){const e=B,n=[];n.push(t[2][e(314)]()),n[e(348)](t[4][e(314)]()),n[e(348)](t[5].clone()),n[e(348)](t[2][e(314)]()),n[e(348)](t[5].clone()),n[e(348)](t[4][e(314)]()),n[e(348)](t[2][e(314)]()),n[e(348)](t[4][e(314)]());for(let o=0;o<n[e(342)];o++){const t=o/n.length*.6;n[o][e(336)]={progress:t};const s=T[e(344)](t);n[o][e(319)][e(330)](s),n[o][e(318)]=!0}return n}(o.object),d=new r;d.position.set(0,1,0),d.add(...f),i.value.add(d);const h=function(t){const e=B,n=[];for(let o=0;o<6;o++){n[e(348)](t[3][e(314)]());const s=1-o/6*.4-.04;n[o][e(336)]={progress:s};const r=T[e(344)](s);n[o][e(319)][e(330)](r),n[o][e(318)]=!0}return n}(o.object),m=new r;m.add(...h),m.position.set(0,1,0),i.value.add(m);const{onLoop:y}=e();return y((({delta:t,elapsed:e})=>{c&&function(t){const e=B,n=t[e(336)][e(347)];for(let o=0;o<t[e(351)];o++){const s=T[e(344)](n[o]);F.setPosition(s),t.setMatrixAt(o,F),n[o]+=5e-4,n[o]>1&&(n[o]=0)}t[e(328)].needsUpdate=!0,t[e(334)]()}(c),f&&function(t){const e=B;for(let n=0;n<t[e(342)];n++){t[n][e(336)][e(333)]+=5e-4,t[n][e(336)][e(333)]>.6&&(t[n].userData[e(333)]=0);const o=t[n][e(336)][e(333)],s=T[e(344)](o);t[n].name===e(338)&&(s.y=1.5),t[n].position[e(330)](s)}}(f),h&&function(t){const e=B;for(let n=0;n<t[e(342)];n++){t[n][e(336)][e(333)]+=5e-4,t[n][e(336)][e(333)]>1&&(t[n].userData.progress=1-5/6*.4-.04);const o=t[n].userData[e(333)],s=T[e(344)](o);t[n][e(319)].copy(s)}}(h)})),(t,e)=>(a(),u(l,null,[p("primitive",{object:t.object[0]},null,8,U),p("primitive",{object:t.object[1],visible:!1},null,8,q),p("primitive",{object:t.object[2]},null,8,K),p("primitive",{object:t.object[4]},null,8,W),p("primitive",{object:t.object[5]},null,8,$),p("primitive",{object:t.object[6]},null,8,H),p("primitive",{object:t.object[3]},null,8,N)],64))}}),G=["object"],V=["object"],X=["object"],Q=["object"],tt=["object"],et=c({__name:"scene",async setup(n){let o,s;const{scene:r,renderer:c,camera:b,sizes:g}=t();C.init(r,c,b,g);const j=new i,v=([o,s]=f((()=>E("./plugins/tresEditor/svelteMachine/json/scene.json"))),o=await o,s(),o);if(v.geometries)for(const t of v.geometries)if(t.data&&t.data.startsWith("url:")){let e=t.data.slice(4);e.startsWith("geometries/")&&(e=`./plugins/tresEditor/svelteMachine/${e}`),t.data=([o,s]=f((()=>E(e))),o=await o,s(),o)}if(v.images)for(const t of v.images)if(t.url&&t.url.startsWith("url:")){let e=t.url.slice(4);e.startsWith("images/")&&(e=`./plugins/tresEditor/svelteMachine/${e}`),t.url=([o,s]=f((()=>I(e))),o=await o,s(),o)}const w=j.parse(v),z=d(null);h((()=>{if(r.value.background=w.background,r.value.environment=w.environment,r.value.fog=w.fog,C.load(w),C.play(),z.value){const t=z.value;t.target.position.set(-3.8,0,-2.3),r.value.add(t.target),t.angle=Math.PI/2.5}}));const{onLoop:x}=e();return x((({delta:t,elapsed:e})=>{if(C.renderer&&C.render(1e3*e,1e3*t),z.value){z.value.intensity=100+100*Math.sin(2*e)}})),(t,e)=>(a(),u(l,null,[p("primitive",{object:y(w).children[0]},[m(Y,{object:y(w).children[0].children},null,8,["object"])],8,G),p("primitive",{object:y(w).children[1]},null,8,V),p("primitive",{object:y(w).children[2]},null,8,X),p("primitive",{object:y(w).children[3]},null,8,Q),p("primitive",{object:y(w).children[4],ref_key:"spotLightRef",ref:z},null,8,tt)],64))}}),nt=c({__name:"svelteMachine",setup(t){const e=b({clearColor:"#201919",windowSize:!0,antialias:!0,shadows:!0,shadowMapType:2,toneMapping:3,toneMappingExposure:1.75}),s=(new i).parse({metadata:{version:4.6,type:"Object",generator:"Object3D.toJSON"},object:{type:"PerspectiveCamera",name:"Camera",layers:1,matrix:[-.6267758441936044,-27755575615628914e-33,.7791996157182023,0,.48061725621232265,.787112942007701,.3866009176850464,0,-.6133181019392243,.6168088978962458,-.49334337870258826,0,-80.48773984917322,89.13969162136891,-91.54490099940386,1],up:[0,1,0],fov:50,zoom:1,near:.01,far:1e3,focus:10,aspect:1.1063238359972203,filmGauge:35,filmOffset:0}}),r=d(null);return g((()=>r.value),(t=>{t.copy(s)})),(t,s)=>(a(),u(l,null,[m(y(_)),m(y(n),v(w(e)),{default:j((()=>[m(y(o)),p("TresPerspectiveCamera",{ref_key:"cameraRef",ref:r,uuid:"9ca45c84-3c16-48da-b0a2-9e469abea3d1",name:"Camera"},null,512),(a(),z(x,null,{default:j((()=>[m(et)])),_:1}))])),_:1},16)],64))}});export{nt as default};

import{_ as t,C as e,a6 as n}from"./three._P_a_E_Z1730886807320.js";import{e as r,W as o,U as a,c as s}from"./@tresjs.iUmyNPdW1730886807320.js";import{a as i}from"./index.xgqHHD_Y1730886807320.js";import"./index.zjMoND331730886807320.js";import{z as l}from"./three-custom-shader-material.-r7dCNA-1730886807320.js";import{p as u}from"./gl-noise.BrVtymbx1730886807320.js";import{d as c,b as p,a3 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as C}from"./@vue.-THQH3GC1730886807320.js";import{P as z}from"./tweakpane.yHWGBmom1730886807320.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.qUlfFylV1730886807320.js";import"./@vueuse.Uoe2bW0Q1730886807320.js";import"./three-stdlib.-Lz596Q01730886807320.js";import"./@pmndrs.wWpbS2XU1730886807320.js";import"./object-hash.rH2Wt7qx1730886807320.js";import"./@amap.T-fZ7qS81730886807320.js";import"./jszip._dv5DHfD1730886807320.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.vwzCU7Ru1730886807320.js";import"./all.three.Tqp1MSK71730886807320.js";import"./oimophysics.x0jH7fze1730886807320.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.yme4K4Qp1730886807320.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.gv5A03N01730886807320.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.A6U1VkhS1730886807320.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.J-kHX_gc1730886807320.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.3NZVIIOZ1730886807320.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.eHBCZn-81730886807320.js";const T=P;!function(t,e){const n=P,r=H();for(;;)try{if(971631===-parseInt(n(166))/1*(parseInt(n(163))/2)+parseInt(n(123))/3+-parseInt(n(152))/4+parseInt(n(118))/5+-parseInt(n(124))/6+parseInt(n(158))/7+parseInt(n(169))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[P(131)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=P,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=W(t(130));e[t(150)](r+"chain")&&n[t(150)](r+t(137))?W():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[P(131)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=P;let e;try{e=Function(t(148)+t(134)+");")()}catch(o){e=window}const n=e.console=e[t(151)]||{},r=[t(125),t(128),t(122),"error",t(173),t(170),t(119)];for(let a=0;a<r[t(117)];a++){const e=G.constructor[t(155)][t(171)](G),o=r[a],s=n[o]||e;e[t(135)]=G.bind(G),e[t(172)]=s[t(172)].bind(s),n[o]=e}}))();const O=["rotation-x"],B=[T(139)];function P(t,e){const n=H();return(P=function(t,e){return n[t-=116]})(t,e)}const F=c({__name:T(120),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(162)},waterHighlight:{default:T(159)},brightness:{default:1},baseMaterial:{default:t[T(160)]}},setup(a){const s=T,i=a,c=p(null),b={vertex:s(143),fragment:s(157)},w={uTime:{value:0},waterColor:{value:new(t[s(138)])(i[s(177)])[s(136)]()},waterHighlight:{value:new(t[s(138)])(i[s(144)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i.brightness},uHeight:{value:i.height}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w.uTime[e(175)]=-t/5})),f((()=>{const n=s;i[n(154)]&&(w[n(129)][n(175)]=i[n(154)]),i[n(177)]&&(w.waterColor.value=new(t[n(138)])(i.waterColor).convertLinearToSRGB()),i[n(144)]&&(w[n(144)][n(175)]=new e(i[n(144)])[n(136)]()),i.brightness&&(w[n(164)][n(175)]=i[n(164)])})),g((()=>i[s(142)]),(t=>{const e=s;c.value[e(121)].needsUpdate=!0})),g((()=>i[s(147)]),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:u(b[n(145)]),fragmentShader:b[n(126)],uniforms:w,flatShading:i[n(142)],side:t[n(133)],roughness:.2,metalness:.1,silent:!0});c.value.material[n(146)](),c[n(175)][n(121)]=r})),(e,r)=>{const a=s;return h(),m(a(176),{ref_key:a(127),ref:c,"rotation-x":-Math.PI/2},[v(a(140),{args:[5,5,e[a(154)],64,64,1]},null,8,B),d(_(o),{baseMaterial:n,vertexShader:_(u)(b[a(145)]),fragmentShader:b[a(126)],uniforms:w,side:t[a(133)],roughness:.2,metalness:.1,flatShading:e[a(142)],silent:""},null,8,["baseMaterial",a(149),a(165),"side",a(168)])],8,O)}}});function H(){const t=["8785966OhSTjt","#b3ffff","MeshPhysicalMaterial","string","#52a7f7","3795334dFhjql","brightness","fragmentShader","1RAStPt","constructor","flatShading","16165160gyVzyi","table","bind","toString","exception","action","value","TresMesh","waterColor","counter","length","8772225LcqjLq","trace","customWaterMesh","material","info","188442jMzlKr","9075102GuQwxk","log","fragment","tmRef","warn","uHeight","init","apply","call","DoubleSide",'{}.constructor("return this")( )',"__proto__","convertLinearToSRGB","input","Color","args","TresBoxGeometry","while (true) {}","Flatshading","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","waterHighlight","vertex","dispose","baseMaterial","return (function() ","vertexShader","test","console","2844908iqyvcn","gger","height","prototype","debu","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"];return(H=function(){return t})()}function W(t){function e(t){const n=P;if(typeof t===n(161))return function(t){}[n(167)](n(141)).apply(n(116));1!==(""+t/t)[n(117)]||t%20==0?function(){return!0}.constructor(n(156)+n(153))[n(132)](n(174)):function(){return!1}.constructor(n(156)+n(153))[n(131)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=N;!function(t,e){const n=N,r=k();for(;;)try{if(456569===parseInt(n(427))/1+-parseInt(n(395))/2+-parseInt(n(408))/3+-parseInt(n(438))/4+-parseInt(n(394))/5*(-parseInt(n(442))/6)+parseInt(n(396))/7*(-parseInt(n(393))/8)+parseInt(n(451))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(428)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){L(this,(function(){const t=N,e=new RegExp(t(412)),n=new RegExp(t(426),"i"),r=Z("init");e[t(421)](r+"chain")&&n[t(421)](r+t(436))?Z():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(){const t=["MeshPhongMaterial","MeshBasicMaterial","call","MeshLambertMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","626027ZDoJwB","apply","gger","waterHighlight",'{}.constructor("return this")( )',"MeshDepthMaterial","length","MeshToonMaterial","ACESFilmicToneMapping","input","baseMaterial","3224768XbvZaX","error","MeshStandardMaterial","Flatshading","18mURzOc","MeshNormalMaterial","label","neg-x.jpg","value","exception","constructor","debu","return (function() ","9917514xZBRum","MeshPhysicalMaterial","height","while (true) {}","水体颜色","318360hJwqEL","1395565ChkJIy","495096wFOfip","63KUItLh","addBlade","bind","#627179","addBinding","counter","string","brightness","console","pos-x.jpg","TresAmbientLight","#b3ffff","2090544fYRUMs","__proto__","toString","trace","function *\\( *\\)","pos-z.jpg","target","neg-z.jpg","customWater","table","info","list","log","test"];return(k=function(){return t})()}R(void 0,(function(){const t=N;let e;try{e=Function(t(450)+t(431)+");")()}catch(o){e=window}const n=e[t(404)]=e[t(404)]||{},r=[t(420),"warn",t(418),t(439),t(447),t(417),t(411)];for(let a=0;a<r[t(433)];a++){const e=R[t(448)].prototype[t(398)](R),o=r[a],s=n[o]||e;e[t(409)]=R[t(398)](R),e.toString=s[t(410)][t(398)](s),n[o]=e}}))();const A=c({__name:D(416),setup(e){const n=D,r=b({alpha:!0,toneMapping:t[n(435)],windowSize:!0,clearColor:10066329}),o=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(399),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(407),brightness:1,baseMaterial:n(452)}),c=new z;return c[n(400)](u,n(453),{label:"高度",min:.1,max:5,step:.1}),c[n(400)](u,"waterColor",{label:n(392)}),c[n(400)](u,n(430),{label:"浪头颜色"}),c[n(400)](u,n(403),{label:"亮度",min:0,max:1,step:.01}),c[n(400)](u,n(441),{label:n(441)}),c[n(397)]({view:n(419),label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:n(423),value:n(423)},{text:n(443),value:n(443)},{text:n(440),value:n(440)},{text:"MeshPhongMaterial",value:n(422)},{text:"MeshToonMaterial",value:n(434)},{text:n(425),value:n(425)},{text:"MeshDepthMaterial",value:n(432)}],value:u[n(437)]}),c.on("change",(t=>{const e=n;"材质"===t[e(414)][e(444)]&&(u[e(437)]=t[e(446)])})),(t,e)=>{const c=n;return h(),w(_(s),x(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(a),M(j(o)),null,16),e[1]||(e[1]=v(c(406),{intensity:.5},null,-1)),e[2]||(e[2]=v("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),d(F,M(j(u)),null,16),d(_(S),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:[c(405),c(445),"pos-y.jpg","neg-y.jpg",c(413),c(415)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function N(t,e){const n=k();return(N=function(t,e){return n[t-=392]})(t,e)}function Z(t){function e(t){const n=N;if(typeof t===n(402))return function(t){}[n(448)](n(454)).apply(n(401));1!==(""+t/t).length||t%20==0?function(){return!0}[n(448)]("debu"+n(429))[n(424)]("action"):function(){return!1}[n(448)](n(449)+n(429))[n(428)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{A as default};

import{p as t,U as e,z as n,D as o,Y as r}from"./@tresjs.C5O8roW51726740218347.js";import{B as s,s as i,C as a,f as p,V as c,cz as l,a0 as u,cL as m}from"./three.MbBECAu81726740218347.js";import{l as f}from"./utils.1Hk3NnjC1726740218347.js";import{f as d}from"./utils.wfrVKT-H1726740218347.js";import{a4 as h,b as j,a3 as y,o as g,E as v,F as T,W as w,f as b,g as z,L as I,I as M,m as C,u as _,J as x,d as S,r as k,e as B,j as E,aj as L,ak as O,al as D}from"./@vue.JNsx1iN61726740218347.js";import{m as F}from"./d3-geo.su0IZWHc1726740218347.js";import{c as G,d as H,a as P}from"./three-mesh-bvh.AV9Efypw1726740218347.js";import"./@vueuse.18lbrd2F1726740218347.js";import"./@fesjs.Dr_-7VFL1726740218347.js";import"./vue-router.PDZMxRoR1726740218347.js";import"./lodash-es.kYt-_xTG1726740218347.js";import"./@qlin.yHhFDldE1726740218347.js";import"./pinia.WcGzyH851726740218347.js";import"./@floating-ui.BPbuo5Gx1726740218347.js";import"./@juggle.7yjBMqoW1726740218347.js";import"./@tweenjs.J1BAvmPw1726740218347.js";import"./http.JkCTAKB91726740218347.js";import"./axios.Ng308AU61726740218347.js";import"./color.mN5s4yjd1726740218347.js";import"./@amap.bfr68PX11726740218347.js";import"./color-string._peQ-Dds1726740218347.js";import"./color-name.HbJM_JLt1726740218347.js";import"./simple-swizzle.byJq1cNq1726740218347.js";import"./is-arrayish.QGpx5bjr1726740218347.js";import"./color-convert.4tGfTWNd1726740218347.js";import"./lodash.YgLwK59U1726740218347.js";import"./naive-ui.Aep4N3Nq1726740218347.js";import"./css-render.wRmxzZlQ1726740218347.js";import"./@emotion.ZD_ZYAgY1726740218347.js";import"./@css-render.tIQq54A51726740218347.js";import"./seemly.SjiSeX2v1726740218347.js";import"./vooks.0q4YYf0I1726740218347.js";import"./evtd.DtfwxtIl1726740218347.js";import"./vueuc.Op4m5Kw01726740218347.js";import"./vdirs.9pG8kCHE1726740218347.js";import"./treemate.dcEdf2le1726740218347.js";import"./date-fns.d7otgork1726740218347.js";import"./date-fns-tz.-Gy71VNr1726740218347.js";import"./async-validator.-YBkpS4I1726740218347.js";import"./d3-array.E5C1cfJ61726740218347.js";const A=["position"],q=["blending","map"],R=["name","renderOrder","pCenter"],U=["args"],Z=["color","side"],J=["renderOrder","position-z"],K=["position"],Q=I("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1),V=["renderOrder"],W=["position"],Y=I("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1),$={__name:"jiangSuMapMesh",async setup(r){let S,k;s.prototype.computeBoundsTree=G,s.prototype.disposeBoundsTree=H,i.prototype.raycast=P;const B=([S,k]=h((()=>f("./plugins/simpleGIS/json/320000_full.json","features"))),S=await S,k(),S),{map:E}=([S,k]=h((()=>n({map:"./plugins/simpleGIS/image/icon.png"}))),S=await S,k(),S),L=B[0].properties.centroid,O=F();O.center(L).translate([0,0]);const D=[];B.forEach((t=>{const e=new a("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:p,type:c}=t.geometry,l=o||r||s||[0,0],u=O(l);u[1]=-u[1],u[2]=n,D.push({type:"Html",position:u,name:i});const f=O(l);f[1]=.2-f[1],f[2]=n+.22,D.push({type:"Sprite",position:f}),p.forEach((t=>{function o(t){const o=new m;t.forEach(((t,e)=>{const[n,r]=O(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),D.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:f});const r=[];t.forEach((t=>{const[e,n]=O(t);r.push(e,-n,0)})),D.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===c&&t.forEach((t=>o(t))),"Polygon"===c&&o(t)}))}));const $=j();y((()=>{$.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new p).setFromObject(t).getCenter(new c),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})($.value),$.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const N=t=>{t.object.material.opacity=.4},X=t=>{t.eventObject.material.opacity=1},{camera:tt,controls:et}=t();let nt=null;const ot=t=>{const e=new c;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,nt=d(tt,e,et)},{onBeforeLoop:rt}=e();rt((()=>{null==nt||nt.update()}));const st={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(g(),v("TresGroup",{ref_key:"tgRef",ref:$},[(g(),v(T,null,w(D,((t,e)=>(g(),v(T,{key:"".concat(e)},["Html"===t.type?(g(),b(_(o),C({key:0,ref_for:!0},st,{position:t.position}),{default:z((()=>[I("span",null,M(t.name),1)])),_:2},1040,["position"])):x("",!0),"Sprite"===t.type?(g(),v("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[I("TresSpriteMaterial",{color:16711680,blending:l,map:_(E)},null,8,q)],8,A)):x("",!0),"Shape"===t.type?(g(),v("TresMesh",{key:2,name:t.name,renderOrder:e,pCenter:t.pCenter,onPointerEnter:N,onPointerLeave:X,onClick:ot},[I("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,U),I("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:u},null,8,Z)],40,R)):x("",!0),"Line"===t.type?(g(),v(T,{key:3},[I("TresLine",{renderOrder:e,"position-z":t.depth+1e-4},[I("TresBufferGeometry",{position:[t.points,3]},null,8,K),Q],8,J),I("TresLine",{renderOrder:e,"position-z":-1e-4},[I("TresBufferGeometry",{position:[t.points,3]},null,8,W),Y],8,V)],64)):x("",!0)],64)))),64))],512))}};function N(t,e){const n=ct();return(N=function(t,e){return n[t-=121]})(t,e)}const X=N;!function(t,e){const n=N,o=ct();for(;;)try{if(739604===-parseInt(n(125))/1*(-parseInt(n(163))/2)+parseInt(n(122))/3*(-parseInt(n(164))/4)+-parseInt(n(136))/5*(-parseInt(n(138))/6)+parseInt(n(123))/7*(-parseInt(n(152))/8)+parseInt(n(142))/9*(-parseInt(n(137))/10)+-parseInt(n(124))/11*(parseInt(n(145))/12)+parseInt(n(155))/13)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const tt=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[N(131)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){tt(this,(function(){const t=N,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(140),"i"),o=ut("init");e[t(165)](o+t(144))&&n.test(o+t(121))?ut():o("0")}))()}();const et=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[N(131)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();et(void 0,(function(){const t=N,e=function(){const t=N;let e;try{e=Function(t(141)+t(154)+");")()}catch(n){e=window}return e}(),n=e[t(156)]=e[t(156)]||{},o=[t(143),"warn",t(153),t(150),t(134),t(161),t(157)];for(let r=0;r<o[t(149)];r++){const e=et[t(166)][t(139)].bind(et),s=o[r],i=n[s]||e;e[t(162)]=et.bind(et),e[t(135)]=i[t(135)][t(126)](i),n[s]=e}}))();const nt=I(X(132),{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1),ot=I(X(128),{intensity:8.8},null,-1),rt=I(X(127),{position:[0,10,5],intensity:.2},null,-1),st=I("TresDirectionalLight",{position:[0,10,-5],intensity:.2},null,-1),it=I(X(127),{position:[5,10,0],intensity:.2},null,-1),at=I(X(127),{position:[-5,10,0],intensity:.2},null,-1),pt=I(X(158),{args:[20,10]},null,-1);function ct(){const t=["TresGridHelper","#ffdbd1","jiangSuMap","table","__proto__","8382lFnznJ","1360hBfSlK","test","constructor","input","8178IEgXQz","77tzdHuq","12932194UdZuQc","171yqNtST","bind","TresDirectionalLight","TresAmbientLight","while (true) {}","stateObject","apply","TresPerspectiveCamera","debu","exception","toString","865MsjthD","3130Vpaslt","9882MCpCCT","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","4788ClfcDR","log","chain","12kFqstO","string","gger","call","length","error","counter","108632BvKCgf","info",'{}.constructor("return this")( )',"28033083BWwMUB","console","trace"];return(ct=function(){return t})()}const lt=S({__name:X(160),setup(t){const e=k({clearColor:X(159),alpha:!0,antialias:!0}),n=k({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,o)=>{const s=B("TresCanvas");return g(),b(s,C(e,{"window-size":""}),{default:z((()=>[nt,E(_(r),L(O(n)),null,16),ot,rt,st,it,at,pt,(g(),b(D,null,{default:z((()=>[E($)])),_:1}))])),_:1},16)}}});function ut(t){function e(t){const n=N;if(typeof t===n(146))return function(t){}[n(166)](n(129))[n(131)](n(151));1!==(""+t/t)[n(149)]||t%20==0?function(){return!0}[n(166)](n(133)+n(147))[n(148)]("action"):function(){return!1}.constructor("debu"+n(147))[n(131)](n(130)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{lt as default};

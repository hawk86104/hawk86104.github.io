import{m as t,e as n,l as e,o as r,J as o}from"./@tresjs.rE98Wm941741490461506.js";import{_ as s}from"./index.ui_kMKoI1741490461506.js";import{_ as i,e as c,b as u,B as a,cA as l}from"./three.Vxh8Czkt1741490461506.js";import{P as p}from"./tweakpane.yDiyAAkA1741490461506.js";import{I as f,C as g,N as h,c as m,d,a as w}from"./three-mesh-bvh.un6HGGrA1741490461506.js";import{d as y,a3 as b,b as j,a2 as I,o as v,H as _,N as x,u as A,F as S,r as T,e as M,j as B,g as k,m as z,f as C,al as F}from"./@vue.NRI7TcgI1741490461506.js";import"./postprocessing.wUw4_rsV1741490461506.js";import"./@vueuse.9Z-Ayxy41741490461506.js";import"./index.Ggs8svOl1741490461506.js";import"./@fesjs.IWF3W7Eu1741490461506.js";import"./vue-router.5pMX5YFH1741490461506.js";import"./lodash-es.pklfUAS51741490461506.js";import"./@qlin.yHhFDldE1741490461506.js";import"./pinia.RD4r5tit1741490461506.js";import"./@floating-ui.BPbuo5Gx1741490461506.js";import"./@juggle.7yjBMqoW1741490461506.js";import"./chalk.9FGrMJNn1741490461506.js";/* empty css                                 */import"./iconify-icon.BVOVpC8G1741490461506.js";import"./@iconify.dt4P0LGS1741490461506.js";import"./dompurify.rQUea5mq1741490461506.js";import"./utils.Pa2HlopA1741490461506.js";import"./default.vue_vue_type_script_setup_true_lang.R7C37-pl1741490461506.js";import"./three-mesh-ui.module.bOQNI_4i1741490461506.js";function L(){const t=["bind","innerWidth","init","action","13324641dlPLVB","apply","table","error","__proto__","trace","372323HGFvtO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6itkTTu","length","button","return (function() ","17561xwbqnR","292378JJwdYC","firstHitOnly","input","pointerdown","Raycaster","pointerup","function *\\( *\\)","innerHeight","64LpfAmm","intersectObject","debu","call","while (true) {}","pointermove","toString","log","prototype","enabled","constructor","value","console","clientY","addEventListener","5BxWGeb","30384iGuzpD","info","gger","counter","string","clientX","warn","80590lXuMoA","4655850SbFaDi","657ILfXPH","test"];return(L=function(){return t})()}!function(t,n){const e=R,r=L();for(;;)try{if(539782===-parseInt(e(296))/1+parseInt(e(297))/2*(parseInt(e(292))/3)+-parseInt(e(321))/4+-parseInt(e(320))/5*(parseInt(e(329))/6)+-parseInt(e(290))/7*(-parseInt(e(305))/8)+parseInt(e(330))/9*(-parseInt(e(328))/10)+parseInt(e(336))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const H=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[R(337)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=R,n=new RegExp(t(303)),e=new RegExp(t(291),"i"),r=E(t(334));n[t(331)](r+"chain")&&e[t(331)](r+t(299))?E():r("0")}))()}();const O=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[R(337)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();O(void 0,(function(){const t=R,n=function(){const t=R;let n;try{n=Function(t(295)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(317)]=n.console||{},r=[t(312),t(327),t(322),t(287),"exception",t(286),t(289)];for(let o=0;o<r[t(293)];o++){const n=O[t(315)][t(313)].bind(O),s=r[o],i=e[s]||n;n[t(288)]=O[t(332)](O),n.toString=i[t(311)][t(332)](i),e[s]=n}}))();function R(t,n){const e=L();return(R=function(t,n){return e[t-=286]})(t,n)}function E(t){function n(t){const e=R;if(typeof t===e(325))return function(t){}.constructor(e(309))[e(337)](e(324));1!==(""+t/t).length||t%20==0?function(){return!0}[e(315)](e(307)+e(323))[e(308)](e(335)):function(){return!1}.constructor(e(307)+"gger")[e(337)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Y=$;!function(t,n){const e=$,r=X();for(;;)try{if(765138===parseInt(e(414))/1+parseInt(e(401))/2*(-parseInt(e(417))/3)+-parseInt(e(406))/4+parseInt(e(334))/5*(-parseInt(e(393))/6)+-parseInt(e(341))/7*(parseInt(e(408))/8)+parseInt(e(372))/9*(parseInt(e(400))/10)+parseInt(e(349))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[$(397)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Z(this,(function(){const t=$,n=new RegExp(t(415)),e=new RegExp(t(342),"i"),r=V(t(347));n[t(337)](r+t(367))&&e[t(337)](r+t(361))?V():r("0")}))()}();const P=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[$(397)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function X(){const t=["center","enabled","debu","addButton","init","TresMeshStandardMaterial","36697210LhlLyh","attributes","instance","intersectsBox","Matrix4","DynamicDrawUsage","Vector2","computeBoundsTree","action","TresMesh","setScalar","copy","input","index","prototype","click","bind","targetMesh.value init","chain","MeshStandardMaterial","Mesh","error","setUsage","1197cQbSIN","raycast","normal","firstHitOnly","trace","geometry","TresSphereGeometry","setX","setAttribute","setFromCamera","brushMesh","containsPoint","visible","while (true) {}","active",'{}.constructor("return this")( )',"log","boundsTree","counter","#023249","material","2262peIDtJ","length","needsUpdate","return (function() ","apply","radius","constructor","27730wgKwWd","2892938IoAIZn","controls","table","info","color","1023896YLfcxM","getZ","7039336OQhbmS","exception","set","BufferAttribute","matrixWorld","position","827490xrbnhj","function *\\( *\\)","gger","3BHsABh","scale","setZ","push","count","value","disposeBoundsTree","getX","call","targetMesh","intersectObject","applyMatrix4","15715jTAinB","getY","string","test","toString","intersectsSphere","warn","7HHaLuW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(X=function(){return t})()}P(void 0,(function(){const t=$,n=function(){const t=$;let n;try{n=Function(t(396)+t(387)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},r=["log",t(340),t(404),t(370),t(409),t(403),t(376)];for(let o=0;o<r[t(394)];o++){const n=P[t(399)][t(363)][t(365)](P),s=r[o],i=e[s]||n;n.__proto__=P[t(365)](P),n.toString=i[t(338)][t(365)](i),e[s]=n}}))();const J=[Y(377),Y(392)],D=[Y(377)];function $(t,n){const e=X();return($=function(t,n){return e[t-=326]})(t,n)}const G=y({__name:"model",props:{controls:{}},async setup(r){const o=Y;let s,y;const T=r;(()=>{const t=$;a.prototype[t(356)]=m,a.prototype[t(328)]=d,i[t(369)][t(363)][t(373)]=w})();const M=([s,y]=b((()=>e(l,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,y(),s),B=new(i[o(368)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),k=new Uint8Array(3*M.attributes[o(413)][o(326)]);k.fill(255);const z=new(i[o(411)])(k,3,!0);z[o(371)](i[o(354)]),M[o(380)](o(405),z);const C=j(null),F=j(null),L=j(!1),H=j(-1),O=j(.2),E=new(i[o(355)]),{camera:Z,raycaster:P}=t(),X=15/255,G=78/255,V=85/255;let W=null;I((()=>{const t=o;C[t(327)]&&(console[t(388)](t(366),C[t(327)]),C[t(327)][t(377)][t(356)](),W=M[t(389)],((t,n,e,r,o,s)=>{const c=R;window[c(319)](c(310),(e=>{const r=c;t.x=e[r(326)]/window[r(333)]*2-1,t.y=-e.clientY/window.innerHeight*2+1,n[r(316)]=!0})),window.addEventListener(c(300),(u=>{const a=c;t.x=u[a(326)]/window[a(333)]*2-1,t.y=-u[a(318)]/window[a(304)]*2+1,r.value=u[a(294)];const l=new(i[a(301)]);l.setFromCamera(t,e.value),l[a(298)]=!0;const p=l[a(306)](o[a(316)],!0);n[a(316)]=!0,s[a(314)]=0===p.length}),!0),window.addEventListener(c(302),(t=>{const e=c;r[e(316)]=-1,"touch"===t.pointerType&&(n[e(316)]=!1)}),!0)})(E,L,Z,H,C,T[t(402)][t(351)]))}));const{onLoop:K}=n();K((()=>{const t=o,n=M[t(362)];if(F[t(327)])if(T[t(402)][t(351)][t(386)]||!L.value)F.value[t(384)]=!1;else{F[t(327)][t(418)][t(359)](O.value),P.value[t(381)](E,Z[t(327)]),P.value[t(375)]=!0;const e=P[t(327)][t(332)](C[t(327)],!0);if(e[t(394)]){F[t(327)][t(413)][t(360)](e[0].point),T[t(402)][t(351)][t(344)]=!1,F.value.visible=!0;const r=new(i[t(353)]);r[t(360)](C.value[t(412)]).invert();const o=new c;o[t(343)][t(360)](F[t(327)][t(413)])[t(333)](r),o[t(398)]=100*O.value;const s=[],a=new u;if(null==W||W.shapecast({intersectsBounds:n=>{const e=t,r=o[e(352)](n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(a[e(410)](0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(383)](a))return f;return g}return r?f:h},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(339)](o)){const t=3*e;s[i(420)](t,t+1,t+2)}return!1}}),0===H.value||2===H[t(327)]){let e=1,r=1,o=1;0===H.value&&(e=X,r=G,o=V);for(let i=0,c=s[t(394)];i<c;i++){const c=n.getX(s[i]);z[t(379)](c,e),z.setY(c,r),z[t(419)](c,o)}z[t(395)]=!0}}else F[t(327)].visible=!1,T[t(402)][t(351)][t(344)]=!0}}));const N=(new p)[o(346)]({title:"点击按钮",label:"生成模型"}),Q=new a;return N.on(o(364),(()=>{const t=o,n=[],e=[];for(let o=0;o<z[t(326)];o++)z[t(329)](o)===X&&z[t(335)](o)===G&&z.getZ(o)===V&&(n[t(420)](M.attributes[t(413)][t(329)](o),M[t(350)][t(413)][t(335)](o),M.attributes[t(413)][t(407)](o)),e[t(420)](M[t(350)][t(374)][t(329)](o),M[t(350)].normal[t(335)](o),M[t(350)].normal[t(407)](o)));const r=new Float32Array(n);Q[t(380)](t(413),new(i[t(411)])(r,3)),Q[t(380)](t(374),new(i[t(411)])(r,3))})),(t,n)=>{const e=o;return v(),_(S,null,[x(e(358),{ref_key:e(331),ref:C,geometry:A(M),scale:.005,material:A(B)},null,8,J),x("TresMesh",{ref_key:e(382),ref:F,visible:!1},n[0]||(n[0]=[x(e(378),{args:[1,40,40]},null,-1),x(e(348),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),x(e(358),{geometry:A(Q),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[x("TresMeshStandardMaterial",{color:e(391),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,D)],64)}}});function V(t){function n(t){const e=$;if(typeof t===e(336))return function(t){}[e(399)](e(385))[e(397)](e(390));1!==(""+t/t)[e(394)]||t%20==0?function(){return!0}[e(399)](e(345)+e(416))[e(330)](e(357)):function(){return!1}[e(399)](e(345)+"gger")[e(397)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function W(t,n){const e=K();return(W=function(t,n){return e[t-=303]})(t,n)}function K(){const t=["stateObject","warn","2767PGzPto","apply","input","1615AdKPiO","controls","init","test","318bhrACk","4281016wNQVSI","4936194BJHteS","action","call","function *\\( *\\)","pos-z.jpg","TresCanvas","log",'{}.constructor("return this")( )',"string","10PFXiYY","console","table","trace","value","prototype","14SxVEXu","controlsRef","info","TresAmbientLight","#999999","debu","3649591nATulz","neg-x.jpg","gger","pos-y.jpg","2170908MaYCgl","neg-y.jpg","constructor","bind","pos-x.jpg","TresPerspectiveCamera","8756FiSQxK","exception","counter","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","neg-z.jpg","1299216BIdwmV","toString","while (true) {}","return (function() "];return(K=function(){return t})()}!function(t,n){const e=W,r=K();for(;;)try{if(537994===parseInt(e(335))/1*(parseInt(e(342))/2)+-parseInt(e(318))/3+-parseInt(e(324))/4*(-parseInt(e(338))/5)+-parseInt(e(329))/6*(-parseInt(e(308))/7)+-parseInt(e(343))/8+parseInt(e(344))/9+-parseInt(e(353))/10*(parseInt(e(314))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const N=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[W(336)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){N(this,(function(){const t=W,n=new RegExp(t(347)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=q(t(340));n[t(341)](r+"chain")&&e.test(r+t(337))?q():r("0")}))()}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[W(336)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();Q(void 0,(function(){const t=W,n=function(){const t=W;let n;try{n=Function(t(332)+t(351)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(303)]||{},r=[t(350),t(334),t(310),"error",t(325),t(304),t(305)];for(let o=0;o<r.length;o++){const n=Q[t(320)][t(307)].bind(Q),s=r[o],i=e[s]||n;n.__proto__=Q[t(321)](Q),n[t(330)]=i.toString[t(321)](i),e[s]=n}}))();const U=y({__name:"collectTriangles",setup(t){const n=W,e=T({clearColor:n(312),antialias:!0}),i=T({autoRotate:!1}),c=j(null);return(t,u)=>{const a=n,l=M(a(349));return v(),_(S,null,[B(A(s)),B(l,z(e,{"window-size":""}),{default:k((()=>[u[0]||(u[0]=x(a(323),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),B(A(r),z({ref_key:a(309),ref:c},i),null,16),u[1]||(u[1]=x(a(311),{intensity:1},null,-1)),(v(),C(F,null,{default:k((()=>[B(G,{controls:c[a(306)]},null,8,[a(339)])])),_:1})),(v(),C(F,null,{default:k((()=>[B(A(o),{background:!1,files:[a(322),a(315),a(317),a(319),a(348),a(328)],path:a(327)})])),_:1}))])),_:1},16)],64)}}});function q(t){function n(t){const e=W;if(typeof t===e(352))return function(t){}[e(320)](e(331))[e(336)](e(326));1!==(""+t/t).length||t%20==0?function(){return!0}[e(320)](e(313)+e(316))[e(346)](e(345)):function(){return!1}.constructor(e(313)+e(316))[e(336)](e(333)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{U as default};

import{a6 as t,C as e,Z as n}from"./three.0L1oP_mX1722313330047.js";import{$ as r,T as a,d as s,x as o}from"./@tresjs.Q03Md-En1722313330047.js";import{a as i}from"./index._gvjf93K1722313330047.js";import"./index.qgvLfkqk1722313330047.js";import{C as l}from"./three-custom-shader-material.rXUjQmJB1722313330047.js";import"./object-hash.aoN2vIR61722313330047.js";import"./@amap.cDim55ZW1722313330047.js";import"./glsl-tokenizer.pGV5rb2g1722313330047.js";import{p as u}from"./gl-noise.BrVtymbx1722313330047.js";import{d as c,b as p,a1 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as x,m as j,al as z}from"./@vue.Q1VpS3901722313330047.js";import{P as C}from"./tweakpane.yHWGBmom1722313330047.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.UkCTkMgD1722313330047.js";import"./@vueuse.UFv615y21722313330047.js";import"./three-stdlib.-J90B2tF1722313330047.js";import"./@pmndrs.B3pPHFpB1722313330047.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.slTyTugY1722313330047.js";import"./all.three.yWNOIDhs1722313330047.js";import"./oimophysics.x0jH7fze1722313330047.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.YEuq4KWc1722313330047.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.6SDHL-dV1722313330047.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.QuY13gK71722313330047.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.s336Ai2F1722313330047.js";import"./glsl-token-string.u6gBgKVD1722313330047.js";import"./glsl-token-functions.VQWPL_na1722313330047.js";import"./jszip.49pgsWkw1722313330047.js";const T=P;function S(){const t=["DoubleSide","string","16BMrdzg","material","vertexShader","chain","238QRprpg","1912vWNnxK","needsUpdate","apply","Color","action","uTime","debu","value","waterColor","gger","exception","Flatshading","MeshPhysicalMaterial","counter","#52a7f7","42107ChzstY","3476226rsQJHV","constructor","22HbxxEY","prototype","warn","baseMaterial","TresBoxGeometry","904165SZzUOR","brightness","23859gdyaga","input","flatShading","vertex","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","height","dispose","length","bind","trace","table","1167980JfPENI","6792AbqXrL","fragment","stateObject","#b3ffff","args","__proto__","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","fragmentShader","customWaterMesh","convertLinearToSRGB","error","init","TresMesh","rotation-x","2wFBqMy","side","121698ieGMhd","1314858ajnsbp","uHeight","console","test","waterHighlight"];return(S=function(){return t})()}!function(t,e){const n=P,r=S();for(;;)try{if(843683===parseInt(n(409))/1*(-parseInt(n(406))/2)+parseInt(n(437))/3+-parseInt(n(416))/4*(-parseInt(n(444))/5)+parseInt(n(408))/6*(-parseInt(n(420))/7)+parseInt(n(421))/8*(-parseInt(n(446))/9)+-parseInt(n(391))/10*(parseInt(n(439))/11)+-parseInt(n(392))/12*(-parseInt(n(436))/13))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){G(this,(function(){const t=P,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(383),"i"),r=D(t(403));e[t(412)](r+t(419))&&n[t(412)](r+t(447))?D():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[P(423)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function P(t,e){const n=S();return(P=function(t,e){return n[t-=382]})(t,e)}H(void 0,(function(){const t=P,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e[t(411)]=e.console||{},r=["log",t(441),"info",t(402),t(431),t(390),t(389)];for(let a=0;a<r[t(387)];a++){const e=H[t(438)][t(440)].bind(H),s=r[a],o=n[s]||e;e[t(397)]=H.bind(H),e.toString=o.toString[t(388)](o),n[s]=e}}))();const W=[T(405)],O=[T(396)],B=c({__name:T(400),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(435)},waterHighlight:{default:T(395)},brightness:{default:1},baseMaterial:{default:t[T(433)]}},setup(s){const o=T,i=s,c=p(null),b={vertex:o(398),fragment:o(384)},w={uTime:{value:0},waterColor:{value:new(t[o(424)])(i[o(429)])[o(401)]()},waterHighlight:{value:new e(i[o(413)])[o(401)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[o(445)]},uHeight:{value:i[o(385)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=o;w[e(426)][e(428)]=-t/5})),f((()=>{const e=o;i.height&&(w[e(410)][e(428)]=i[e(385)]),i[e(429)]&&(w.waterColor[e(428)]=new(t[e(424)])(i[e(429)])[e(401)]()),i[e(413)]&&(w[e(413)].value=new(t[e(424)])(i[e(413)])[e(401)]()),i[e(445)]&&(w.brightness[e(428)]=i.brightness)})),g((()=>i[o(432)]),(t=>{const e=o;c[e(428)].material[e(422)]=!0})),g((()=>i[o(442)]),(e=>{const r=o,a=new l({baseMaterial:t[e],vertexShader:u(b[r(382)]),fragmentShader:b[r(393)],uniforms:w,flatShading:i.Flatshading,side:n,roughness:.2,metalness:.1,silent:!0});c[r(428)][r(417)][r(386)](),c[r(428)][r(417)]=a})),(e,n)=>{const r=o;return h(),m(r(404),{ref_key:"tmRef",ref:c,"rotation-x":-Math.PI/2},[v(r(443),{args:[5,5,e[r(385)],64,64,1]},null,8,O),d(_(a),{baseMaterial:t[r(433)],vertexShader:_(u)(b[r(382)]),fragmentShader:b.fragment,uniforms:w,side:t[r(414)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[r(442),r(418),r(399),r(407),r(448)])],8,W)}}});function D(t){function e(t){const n=P;if(typeof t===n(415))return function(t){}[n(438)]("while (true) {}")[n(423)](n(434));1!==(""+t/t)[n(387)]||t%20==0?function(){return!0}[n(438)](n(427)+"gger").call(n(425)):function(){return!1}[n(438)](n(427)+n(430))[n(423)](n(394)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const F=Z;!function(t,e){const n=Z,r=U();for(;;)try{if(110388===parseInt(n(231))/1+-parseInt(n(252))/2+parseInt(n(234))/3*(-parseInt(n(258))/4)+-parseInt(n(206))/5+-parseInt(n(205))/6*(parseInt(n(223))/7)+parseInt(n(199))/8*(-parseInt(n(220))/9)+parseInt(n(203))/10*(parseInt(n(214))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){k(this,(function(){const t=Z,e=new RegExp(t(208)),n=new RegExp(t(233),"i"),r=$("init");e[t(204)](r+t(216))&&n.test(r+t(260))?$():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Z(244)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();N(void 0,(function(){const t=Z,e=function(){const t=Z;let e;try{e=Function(t(222)+t(200)+");")()}catch(n){e=window}return e}(),n=e[t(215)]=e[t(215)]||{},r=[t(210),t(212),t(202),t(229),t(218),t(237),t(224)];for(let a=0;a<r.length;a++){const e=N[t(262)][t(235)].bind(N),s=r[a],o=n[s]||e;e[t(219)]=N.bind(N),e.toString=o[t(230)][t(226)](o),n[s]=e}}))();const R=v(F(217),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),A=v(F(256),{intensity:.5},null,-1),E=v(F(249),{position:[15,15,15],intensity:1},null,-1);function Z(t,e){const n=U();return(Z=function(t,e){return n[t-=196]})(t,e)}const L=c({__name:"customWater",setup(e){const n=F,r=b({alpha:!0,toneMapping:t[n(261)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(207),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(241),waterHighlight:n(198),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new C;return c[n(239)](u,n(227),{label:"高度",min:.1,max:5,step:.1}),c[n(239)](u,n(242),{label:"水体颜色"}),c[n(239)](u,n(232),{label:n(236)}),c[n(239)](u,n(247),{label:"亮度",min:0,max:1,step:.01}),c[n(239)](u,"Flatshading",{label:"Flatshading"}),c[n(254)]({view:n(267),label:"材质",options:[{text:n(225),value:n(225)},{text:n(213),value:n(213)},{text:n(196),value:"MeshNormalMaterial"},{text:n(265),value:n(265)},{text:n(263),value:"MeshPhongMaterial"},{text:"MeshToonMaterial",value:n(248)},{text:n(228),value:n(228)},{text:n(266),value:n(266)}],value:u.baseMaterial}),c.on("change",(t=>{const e=n;"材质"===t[e(253)][e(243)]&&(u[e(240)]=t[e(245)])})),(t,e)=>{const c=n;return h(),w(_(o),j(r,{"window-size":""}),{default:y((()=>[R,d(_(s),M(x(a)),null,16),A,E,d(B,M(x(u)),null,16),d(_(I),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:[c(246),"neg-x.jpg","pos-y.jpg",c(264),c(238),c(201)],path:c(250)})])),_:1}))])),_:1},16)}}});function U(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","30261upbvqr","prototype","浪头颜色","table","pos-z.jpg","addBinding","baseMaterial","#52a7f7","waterColor","label","apply","value","pos-x.jpg","brightness","MeshToonMaterial","TresDirectionalLight","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","gger","153010DqitmD","target","addBlade","while (true) {}","TresAmbientLight","string","4XvUYwT","debu","input","ACESFilmicToneMapping","constructor","MeshPhongMaterial","neg-y.jpg","MeshStandardMaterial","MeshDepthMaterial","list","call","MeshNormalMaterial","action","#b3ffff","184064QlQdnE",'{}.constructor("return this")( )',"neg-z.jpg","info","1930dUoPXG","test","18NIEOQr","632555obUZas","#627179","function *\\( *\\)","stateObject","log","counter","warn","MeshBasicMaterial","23727dmthms","console","chain","TresPerspectiveCamera","exception","__proto__","9oHTDKG","length","return (function() ","339654gxbwyW","trace","MeshPhysicalMaterial","bind","height","MeshLambertMaterial","error","toString","75764Zgudpm","waterHighlight"];return(U=function(){return t})()}function $(t){function e(t){const n=Z;if(typeof t===n(257))return function(t){}.constructor(n(255)).apply(n(211));1!==(""+t/t)[n(221)]||t%20==0?function(){return!0}[n(262)](n(259)+n(251))[n(268)](n(197)):function(){return!1}[n(262)](n(259)+"gger")[n(244)](n(209)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

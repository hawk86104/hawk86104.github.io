import{bZ as t,a0 as n,C as e,j as r}from"./three.HHcT7YAr1718612273914.js";import{N as o}from"./@tresjs.W42D3qe_1718612273914.js";import{R as c}from"./all.three.DFxzIr161718612273914.js";import{d as i,b as a,a3 as s,a2 as u,w as f,o as l,D as p,J as m,m as d,u as h}from"./@vue.CpOXM7bB1718612273914.js";!function(t,n){const e=y,r=x();for(;;)try{if(705944===parseInt(e(315))/1+-parseInt(e(314))/2+-parseInt(e(310))/3*(parseInt(e(312))/4)+parseInt(e(289))/5+parseInt(e(296))/6+parseInt(e(290))/7*(-parseInt(e(313))/8)+parseInt(e(295))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(284)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=y,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(319),"i"),r=_(t(287));n.test(r+t(298))&&e[t(299)](r+"input")?_():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(284)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=y,n=function(){const t=y;let n;try{n=Function(t(303)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(282)]=n[t(282)]||{},r=[t(300),"warn",t(285),t(309),t(305),"table",t(306)];for(let o=0;o<r[t(318)];o++){const n=g[t(311)][t(292)][t(297)](g),c=r[o],i=e[c]||n;n.__proto__=g[t(297)](g),n.toString=i[t(301)][t(297)](i),e[c]=n}}))();function x(){const t=["trace","gger","vertexShader","error","6CpFwTa","constructor","2717252GWrxVm","32ECHSth","1332794MSUDwJ","153627UDHVbY","stateObject","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","console","#include <emissivemap_fragment>","apply","info","action","init","counter","3180865DWDDRQ","784847keMCOc","fragmentShader","prototype","call","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","13599612yKJzts","5271498Gheeel","bind","chain","test","log","toString","void main() {","return (function() ","replace","exception"];return(x=function(){return t})()}function y(t,n){const e=x();return(y=function(t,n){return e[t-=281]})(t,n)}function _(t){function n(t){const e=y;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[e(284)](e(288));1!==(""+t/t).length||t%20==0?function(){return!0}[e(311)](e(281)+e(307))[e(293)](e(286)):function(){return!1}[e(311)]("debu"+e(307)).apply(e(316)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=C;!function(t,n){const e=C,r=I();for(;;)try{if(139422===-parseInt(e(477))/1+parseInt(e(431))/2*(parseInt(e(489))/3)+-parseInt(e(444))/4+-parseInt(e(461))/5*(parseInt(e(474))/6)+parseInt(e(432))/7*(-parseInt(e(481))/8)+-parseInt(e(445))/9+-parseInt(e(467))/10*(-parseInt(e(473))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(460)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=I();return(C=function(t,n){return e[t-=428]})(t,n)}function I(){const t=["rotation-x","__proto__","onBeforeRender","#ffffff","TresGroup","info","counter","error","exception","function *\\( *\\)","chain","TresMesh","constructor","string","apply","15735iSskRY","add","renderTargetUniform","object","stateObject","visible","403990uOBlPS","table","prototype","uniforms","reflectorDiffuse","length","209KZYDZe","102cqoYlt","debu","init","79959HBSdUX","mixStrength","action","value","1837656xWdVyx","tpgRef","tmRef","console","test","bind","showGridHelper","assign","57TWiRez","#444","input","primitive","color","warn","while (true) {}","TresMeshStandardMaterial","422EhuOgJ","7AQfCXY","textureMatrix","gger","TresPlaneGeometry","onBeforeCompile","channel","return (function() ","repeat","aoMap","wrapS","trace","attributes","707664yeBsRS","828783mizHPb"];return(I=function(){return t})()}!function(){w(this,(function(){const t=C,n=new RegExp(t(455)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=R(t(476));n[t(485)](r+t(456))&&e[t(485)](r+t(491))?R():r("0")}))()}();const S=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(460)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();S(void 0,(function(){const t=C,n=function(){const t=C;let n;try{n=Function(t(438)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(484)]=n[t(484)]||{},r=["log",t(428),t(451),t(453),t(454),t(468),t(442)];for(let o=0;o<r[t(472)];o++){const n=S[t(458)][t(469)][t(486)](S),c=r[o],i=e[c]||n;n[t(447)]=S.bind(S),n.toString=i.toString[t(486)](i),e[c]=n}}))();const M=[b(446)],j=[b(464)],z=i({__name:b(471),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(449)}},async setup(i){const v=b;let g,x;const _=i,w=new t(9.5,10),C=a(),I=a(),S=a(),z=new c,R={mirror:{value:_.mirror},mixStrength:{value:_[v(478)]}},E=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var T=0;T<3;T++)E[T][v(441)]=n,E[T].wrapT=n,E[T][v(439)].set(16,16);const D={color:new e(v(490)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},U=t=>{const n=v;t[n(470)].reflectMap=z[n(463)],t[n(470)][n(433)]=z.textureMatrixUniform,t[n(470)]=Object[n(488)](t.uniforms,R),(t=>{const n=y;t.vertexShader=t[n(308)][n(304)]("void main() {",n(294)),t[n(308)]=t.vertexShader[n(304)]("#include <project_vertex>","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=y;t[n(291)]=t[n(291)][n(304)](n(302),n(317)),t[n(291)]=t[n(291)][n(304)](n(283),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=v;C.value&&(C[t(480)].attributes.uv1=C[t(480)][t(443)].uv),S.value&&(S[t(480)][t(440)][t(437)]=1,S.value[t(436)]=U),I[t(480)]&&(I[t(480)][t(462)](z),I[t(480)][t(448)]=(t,n,e)=>{z.update(t,n,e)}),_[t(493)]&&S[t(480)]&&(S[t(480)][t(493)]=new e(_.color))})),f((()=>_[v(487)]),(t=>{w[v(466)]=t})),(t,n)=>{const e=v;return l(),p(e(450),null,[m(e(457),{ref_key:e(483),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(435),{ref_key:e(482),ref:C,args:[10,10]},null,512),m(e(430),d({ref_key:"tmsmRef",ref:S},D),null,16)],8,M),m(e(492),{object:h(w)},null,8,j)])}}});function R(t){function n(t){const e=C;if(typeof t===e(459))return function(t){}[e(458)](e(429))[e(460)](e(452));1!==(""+t/t)[e(472)]||t%20==0?function(){return!0}[e(458)](e(475)+e(434)).call(e(479)):function(){return!1}.constructor(e(475)+e(434))[e(460)](e(465)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

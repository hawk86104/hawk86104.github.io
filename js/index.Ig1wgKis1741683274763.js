var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Kj5B6I6-1741683274763.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7NG9Lytn1741683274763.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.Ej0zfzh11741683274763.js";import{V as o,U as s,C as l,l as c,W as u,aU as p,a as f,_ as v,Q as x,M as m}from"./three.3wvNjL8W1741683274763.js";import{m as w,e as h}from"./@tresjs.tqalU7S21741683274763.js";import{u as g}from"./index.sSLEeJGC1741683274763.js";import{F as d,C as y}from"./three-stdlib.cRsATZEm1741683274763.js";import{d as S}from"./@vue.NRI7TcgI1741683274763.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.pdI3z2wF1741683274763.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.jkQWF76o1741683274763.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.0jgdwKG31741683274763.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.r6c0IbGQ1741683274763.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Gc7uVFOn1741683274763.js";const _=z;function P(){const t=["call","apply","gger","bind",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"exception","7218FXuNQr","24523830GzvPOJ","stateObject","length","11KDtlGh","497416qtPPxi","241686quZrIr","65877BPRKbM","table","329qINhWm","90JMrnDY","98fHtsTH","string","init","log","toString","prototype","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","error","constructor","2806748RFDwFJ","counter",'{}.constructor("return this")( )',"info","input","return (function() ","debu","while (true) {}","action","trace","test","5332190oRbXtE"];return(P=function(){return t})()}function z(t,e){const n=P();return(z=function(t,e){return n[t-=456]})(t,e)}!function(t,e){const n=z,i=P();for(;;)try{if(575016===parseInt(n(479))/1+parseInt(n(484))/2*(-parseInt(n(480))/3)+parseInt(n(495))/4+-parseInt(n(466))/5+-parseInt(n(473))/6*(parseInt(n(482))/7)+-parseInt(n(478))/8*(parseInt(n(483))/9)+-parseInt(n(474))/10*(-parseInt(n(477))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){b(this,(function(){const t=z,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(491),"i"),i=E(t(486));e.test(i+t(492))&&n[t(465)](i+t(459))?E():i("0")}))()}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(468)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();I(void 0,(function(){const t=z,e=function(){const t=z;let e;try{e=Function(t(460)+t(457)+");")()}catch(n){e=window}return e}(),n=e[t(490)]=e[t(490)]||{},i=[t(487),"warn",t(458),t(493),t(472),t(481),t(464)];for(let r=0;r<i[t(476)];r++){const e=I.constructor[t(489)].bind(I),a=i[r],o=n[a]||e;e.__proto__=I[t(470)](I),e[t(488)]=o.toString[t(470)](o),n[a]=e}}))();const M=_(471);function E(t){function e(t){const n=z;if(typeof t===n(485))return function(t){}.constructor(n(462))[n(468)](n(456));1!==(""+t/t)[n(476)]||t%20==0?function(){return!0}[n(494)](n(461)+n(469))[n(467)](n(463)):function(){return!1}[n(494)](n(461)+n(469))[n(468)](n(475)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const A=D;function D(t,e){const n=L();return(D=function(t,e){return n[t-=446]})(t,e)}function L(){const t=["table","46257baxmMJ","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","gger","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","function *\\( *\\)","1580304XQCnwc","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","apply","exception","chain","defines","string","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","log","474680mQvUoc","console","1304177AXLwXB","stateObject","126475gezNWm","action","return (function() ","uniforms","constructor","prototype","debu","warn","info","409672EEIxeS","trace","3624248kHgHVa","test","toString","28vTUmzQ","clone","__proto__"];return(L=function(){return t})()}!function(t,e){const n=D,i=L();for(;;)try{if(158222===parseInt(n(455))/1+parseInt(n(464))/2+parseInt(n(473))/3*(parseInt(n(469))/4)+parseInt(n(451))/5+parseInt(n(478))/6+-parseInt(n(453))/7+-parseInt(n(466))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const U=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(480)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){U(this,(function(){const t=D,e=new RegExp(t(477)),n=new RegExp(t(448),"i"),i=j("init");e[t(467)](i+t(482))&&n[t(467)](i+"input")?j():i("0")}))()}();const T=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(480)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function O(t){const e=D,n=a({},t);return e(483)in t&&(n[e(483)]=a({},t[e(483)])),e(458)in t&&(n.uniforms=s[e(470)](t[e(458)])),n}T(void 0,(function(){const t=D;let e;try{e=Function(t(457)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(452)]=e[t(452)]||{},i=[t(450),t(462),t(463),t(449),t(481),t(472),t(465)];for(let a=0;a<i[t(447)];a++){const e=T[t(459)][t(460)].bind(T),r=i[a],o=n[r]||e;e[t(471)]=T.bind(T),e[t(468)]=o[t(468)].bind(o),n[r]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:A(476),fragmentShader:A(479)+M+A(474)};function j(t){function e(t){const n=D;if(typeof t===n(446))return function(t){}.constructor("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(459)](n(461)+"gger").call(n(456)):function(){return!1}[n(459)](n(461)+n(475))[n(480)](n(454)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function R(){const t=["type","getClearColor","set","_mipQuad","minFilter","table","716907ZCWamJ","value","while (true) {}","height","__proto__","7021FctqOP","init","debu","originalMapSize","4341450WBkOZL","3822690TSOTpr","info","exception","18QNHReL","chain","5392xwiFdK","238516EoQvQo","trace","getRenderTarget","console","test","Y_IS_EVEN","10847243qMgkCu","_copyQuad","getClearAlpha","toString","prototype","setSize","clear","error","texture","65bseRkX","dispose","floorPowerOfTwo","isWebGLRenderTarget","X_IS_EVEN","_swapTarget","bind","gger","replace","setRenderTarget","4rfbTdH","apply","12DUZCpz","constructor","parentMapSize","parentLevel","setClearColor","fragmentShader","autoClear","uniforms","forEach","return (function() ","render","image","defines","camera","floor","tDiffuse","setViewOffset","449463cvviBr","width","input","length","map","_mipMaterials"];return(R=function(){return t})()}const k=F;!function(t,e){const n=F,i=R();for(;;)try{if(395648===parseInt(n(474))/1+parseInt(n(455))/2*(-parseInt(n(414))/3)+-parseInt(n(430))/4*(-parseInt(n(445))/5)+parseInt(n(423))/6+parseInt(n(419))/7*(parseInt(n(429))/8)+-parseInt(n(427))/9*(parseInt(n(424))/10)+parseInt(n(436))/11*(-parseInt(n(457))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const W=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[F(456)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){W(this,(function(){const t=F,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=X(t(420));e[t(434)](i+t(428))&&n.test(i+t(476))?X():i("0")}))()}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[F(456)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();C(void 0,(function(){const t=F,e=function(){const t=F;let e;try{e=Function(t(466)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e.console=e[t(433)]||{},i=["log","warn",t(425),t(443),t(426),t(413),t(431)];for(let r=0;r<i[t(477)];r++){const e=C[t(458)][t(440)].bind(C),a=i[r],o=n[a]||e;e[t(418)]=C.bind(C),e[t(439)]=o[t(439)][t(451)](o),n[a]=e}}))();const H=new l;function F(t,e){const n=R();return(F=function(t,e){return n[t-=409]})(t,e)}class N{constructor(t){const e=F;!t&&(t="\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t");const n=O(V);n[e(462)]=n[e(462)][e(453)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(O(n)),i[0].defines[e(449)]=0,i[0][e(469)][e(435)]=0,i[1]=new c(O(n)),i[1][e(469)].X_IS_EVEN=1,i[1].defines[e(435)]=0,i[2]=new c(O(n)),i[2][e(469)][e(449)]=0,i[2][e(469)][e(435)]=1,i[3]=new c(O(n)),i[3][e(469)][e(449)]=1,i[3][e(469)][e(435)]=1;const r=new u;r.texture[e(412)]=p,r[e(444)].magFilter=p,this._swapTarget=r,this._copyQuad=new d(new c(y)),this._mipQuad=new d(null),this._mipMaterials=i}update(t,e,n,i=!1){const r=F;t[r(448)]&&(t=t.texture);const o=n.autoClear,s=n[r(438)](),l=n[r(432)]();n[r(409)](H);const c=this._copyQuad,u=this[r(411)],p=this[r(450)],v=this[r(479)];let x,m;i?(x=f.floorPowerOfTwo(t[r(468)][r(475)]),m=f[r(447)](t.image.height)):(x=Math.floor(t[r(468)][r(475)]),m=Math.floor(t[r(468)][r(417)]));const w=Math[r(471)](1.5*x),h=Math[r(471)](m);e[r(441)](w,h),p[r(444)].type!==e[r(444)][r(480)]?(p[r(446)](),p.copy(e),p[r(444)][r(468)]=a({},p[r(444)][r(468)])):p[r(441)](w,h),n[r(463)]=!1,n[r(461)](0),n.setClearAlpha(),c.material[r(464)][r(472)][r(415)]=t,c[r(470)].setViewOffset(x,m,0,0,w,h),n[r(454)](e),n[r(442)](),c.render(n),n.setRenderTarget(p),n[r(442)](),c[r(467)](n);let g=x,d=m,y=0;for(;g>1&&d>1;){const t=v[(g%2==0?1:0)|(d%2==0?2:0)];t.uniforms.map[r(415)]=p[r(444)],t[r(464)][r(460)][r(415)]=y,t.uniforms[r(459)][r(415)][r(410)](g,d),t[r(464)][r(422)][r(415)][r(410)](x,m),u.material=t,g=Math[r(471)](g/2),d=Math[r(471)](d/2);const i=h-2*d;n[r(454)](e),u[r(470)][r(473)](g,d,-x,-i,w,h),u[r(467)](n),n[r(454)](p),t.uniforms[r(478)].value=e.texture,u[r(467)](n),y++}return n.setRenderTarget(l),n.setClearAlpha(s),n[r(461)](H),n[r(463)]=o,y+1}[k(446)](){const t=k;this[t(450)][t(446)](),this[t(411)][t(446)](),this[t(437)][t(446)](),this[t(479)][t(465)]((t=>t.dispose()))}}function X(t){function e(t){const n=F;if("string"==typeof t)return function(t){}[n(458)](n(416))[n(456)]("counter");1!==(""+t/t)[n(477)]||t%20==0?function(){return!0}.constructor(n(421)+n(452)).call("action"):function(){return!1}[n(458)]("debu"+n(452)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=$,i=Z();for(;;)try{if(372956===-parseInt(n(225))/1+-parseInt(n(216))/2*(-parseInt(n(234))/3)+-parseInt(n(224))/4+-parseInt(n(229))/5+-parseInt(n(230))/6+-parseInt(n(192))/7+parseInt(n(228))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Q=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(184)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Z(){const t=["PerspectiveCamera","test","bind","Vector4","forEach","function *\\( *\\)","length","table","debu","toString","negate","render","clone","parent","apply","matrixWorldInverse","clear","constructor","trace","projectionMatrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","4872630DWOSkH","setMask","multiply","visible","getWorldQuaternion","resolution","info","Plane","add","chain","normal","value","init","getWorldPosition","sign","ignoreObjects","update","copy",'{}.constructor("return this")( )',"set","getRenderTarget","input","Vector3","matrixWorld","147774zgsgWk","lookAt","position","depth","setRenderTarget","Matrix4","applyQuaternion","gger","1277740TDhKvJ","283590mVDmuJ","counter","elements","19162736LMYvjW","3179990opSboT","3183570EbKFhw","UnsignedByteType","stateObject","action","18aonZfF","buffers","constant","projectPoint","applyMatrix4","updateMatrixWorld","texture","reflect","exception","Quaternion","console"];return(Z=function(){return t})()}!function(){Q(this,(function(){const t=$,e=new RegExp(t(175)),n=new RegExp(t(190),"i"),i=B(t(204));e[t(171)](i+t(201))&&n[t(171)](i+t(213))?B():i("0")}))()}();const J=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function $(t,e){const n=Z();return($=function(t,e){return n[t-=163]})(t,e)}J(void 0,(function(){const t=$,e=function(){const t=$;let e;try{e=Function("return (function() "+t(210)+");")()}catch(n){e=window}return e}(),n=e[t(169)]=e.console||{},i=["log",t(191),t(198),"error",t(167),t(177),t(188)];for(let r=0;r<i[t(176)];r++){const e=J[t(187)].prototype[t(172)](J),a=i[r],o=n[a]||e;e.__proto__=J[t(172)](J),e[t(179)]=o[t(179)][t(172)](o),n[a]=e}}))();const G=S({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=$,i=t,r=new(v[n(199)]),a=new(v[n(221)]),o=new(v[n(170)]),s=new N,l=g({width:i[n(197)],height:i.resolution,settings:{type:v[n(231)]}}),c=g({width:i[n(197)],height:i[n(197)],settings:{type:v[n(231)]}}),{camera:u,renderer:p,scene:f}=w(),{onBeforeLoop:d}=h();return d((()=>{const t=n;(()=>{const t=n;if(!u[t(203)])return;r[t(211)](new(v[t(214)])(0,1,0),0),r[t(163)](i[t(183)][t(215)]),o[t(209)](u.value);const e=new(v[t(214)])(0,0,1)[t(182)]().negate(),s=u[t(203)].getWorldPosition(new(v[t(214)]));e[t(166)](r[t(202)]);const c=new(v[t(214)]);r[t(237)](s,c);const w=c[t(182)]();w.sub(s),w[t(200)](c),o[t(218)][t(209)](w);const h=new(v[t(214)])(0,0,-1);h[t(222)](u.value[t(196)](new(v[t(168)]))),h[t(200)](s);const g=new(v[t(214)]);i[t(183)][t(205)](g),g.sub(h),g[t(166)](r[t(202)])[t(180)](),g.add(i[t(183)][t(205)](new(v[t(214)]))),o.up[t(211)](0,1,0),o[t(222)](u.value[t(196)](new x)),o.up.reflect(r[t(202)]),o[t(217)](g),o[t(164)]();const d=new m;d[t(211)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(o[t(189)]),d[t(194)](o[t(185)]),a[t(209)](d),r.applyMatrix4(o.matrixWorldInverse);const y=new(v[t(173)])(r[t(202)].x,r[t(202)].y,r.normal.z,r[t(236)]),S=o[t(189)],_=new(v[t(173)]);_.x=(Math[t(206)](y.x)+S[t(227)][8])/S[t(227)][0],_.y=(Math[t(206)](y.y)+S.elements[9])/S[t(227)][5],_.z=-1,_.w=(1+S[t(227)][10])/S[t(227)][14],y.multiplyScalar(2/y.dot(_)),S[t(227)][2]=y.x,S.elements[6]=y.y,S[t(227)][10]=y.z+1,S.elements[14]=y.w;const P=p[t(203)][t(212)]();p.value[t(220)](l[t(203)]),p.value.state[t(235)][t(219)][t(193)](!0),!1===p.value.autoClear&&p[t(203)][t(186)](),i[t(207)][t(174)]((t=>t.visible=!1)),p[t(203)][t(181)](f[t(203)],o),i[t(207)].forEach((e=>e[t(195)]=!0)),p[t(203)].setRenderTarget(P)})(),l[t(203)]&&c[t(203)]&&p.value&&s[t(208)](l[t(203)][t(165)],c[t(203)],p.value)})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function B(t){function e(t){const n=$;if("string"==typeof t)return function(t){}[n(187)]("while (true) {}").apply(n(226));1!==(""+t/t)[n(176)]||t%20==0?function(){return!0}[n(187)]("debu"+n(223)).call(n(233)):function(){return!1}[n(187)](n(178)+n(223))[n(184)](n(232)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,i=q();;)try{if(478159===-parseInt(n(491))/1+parseInt(n(505))/2*(-parseInt(n(483))/3)+parseInt(n(516))/4*(-parseInt(n(503))/5)+-parseInt(n(490))/6+parseInt(n(481))/7*(-parseInt(n(506))/8)+-parseInt(n(496))/9+-parseInt(n(497))/10*(-parseInt(n(498))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var Y=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(501)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function q(){var t=["178946HPRtmm","17096XWXmKl","counter","exception","test","action","info","while (true) {}","chain","length","log","67264gRubbv","__proto__","warn","stateObject","3087LqJxeR","trace","6NIJuVB","string","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","debu","gger","1609356RgUbDi","841521psiuwm","table",'{}.constructor("return this")( )',"constructor","input","417186kMUbaX","10530690jAsZwB","33QlLZJl","bind","init","apply","return (function() ","120mXyCiN","console"];return(q=function(){return t})()}!function(){Y(this,(function(){var t=tt,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(486),"i"),i=et(t(500));e[t(509)](i+t(513))&&n[t(509)](i+t(495))?et():i("0")}))()}();var K=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(501)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function tt(t,e){var n=q();return(tt=function(t,e){return n[t-=478]})(t,e)}function et(t){function e(t){var n=tt;if(typeof t===n(484))return function(t){}[n(494)](n(512))[n(501)](n(507));1!==(""+t/t).length||t%20==0?function(){return!0}[n(494)](n(488)+"gger").call(n(510)):function(){return!1}[n(494)](n(488)+n(489))[n(501)](n(480)),e(++t)}try{if(t)return e;e(0)}catch(n){}}K(void 0,(function(){for(var t=tt,e=function(){var t,e=tt;try{t=Function(e(502)+e(493)+");")()}catch(n){t=window}return t}(),n=e[t(504)]=e[t(504)]||{},i=[t(515),t(479),t(511),"error",t(508),t(492),t(482)],r=0;r<i[t(514)];r++){var a=K.constructor[t(487)].bind(K),o=i[r],s=n[o]||a;a[t(478)]=K[t(499)](K),a[t(485)]=s[t(485)].bind(s),n[o]=a}}))();export{G as _};

import{P as t}from"./tweakpane.yDiyAAkA1741168315107.js";import{e,h as n,a as o,o as r}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3Qut_-XR1741168315107.js";import{_ as a}from"./three.FxqAALWt1741168315107.js";import{d as s,a6 as l,a3 as u,w as c,o as f,H as m,N as d,u as p,j as h,r as g,e as v,f as x,g as I,al as w,m as S}from"./@vue.NRI7TcgI1741168315107.js";import"./postprocessing.hfy6Kqg11741168315107.js";import"./@vueuse.Z8xAfE_A1741168315107.js";import"./all.three.hCBbh0t71741168315107.js";import"./oimophysics.x0jH7fze1741168315107.js";function y(t,e){const n=_();return(y=function(t,e){return n[t-=457]})(t,e)}const b=y;function _(){const t=["debu","log","xRadius","uTime","1464512qyXTew","table","error","map","constructor","warn","prototype","846620VHgaaP","alphaMap","EllipseCurve","getAttribute","aNormal","string","yRadius","array","counter","apply","info","42WPOkTR","setFromPoints","607981gZoSur","input","aIndex","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#90ee90","trace","170156lgrocW","position","function *\\( *\\)","exception","lineMagicZone","toString","getPoints","stateObject","test","blending","3838932GPrdqS","uHeight","gger","BufferGeometry","init","speed","value","height","__proto__","push","chain","AdditiveBlending","action","TresBufferGeometry","TresPoints","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","length","floor","Color","71545gYyWWR","uScale","rotateX","bind","baseColor","color","3HihLcS","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","1196702LZFsQc","PointsMaterial","scale"];return(_=function(){return t})()}!function(t,e){const n=y,o=_();for(;;)try{if(675338===parseInt(n(469))/1+parseInt(n(512))/2*(parseInt(n(510))/3)+-parseInt(n(526))/4+parseInt(n(504))/5*(-parseInt(n(467))/6)+parseInt(n(475))/7+parseInt(n(519))/8+-parseInt(n(485))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[y(465)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){T(this,(function(){const t=y,e=new RegExp(t(477)),n=new RegExp(t(472),"i"),o=M(t(489));e.test(o+t(495))&&n[t(483)](o+t(470))?M():o("0")}))()}();const N=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[y(465)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();N(void 0,(function(){const t=y,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e.console=e.console||{},o=[t(516),t(524),t(466),t(521),t(478),t(520),t(474)];for(let r=0;r<o[t(501)];r++){const e=N[t(523)][t(525)][t(507)](N),i=o[r],a=n[i]||e;e[t(493)]=N[t(507)](N),e[t(480)]=a[t(480)].bind(a),n[i]=e}}))();const U=[b(506)],P=[b(476),b(471),b(460)],C=b(500),W=b(511),j=s({__name:b(479),props:{height:{default:1.6},speed:{default:1},color:{default:b(473)}},async setup(t){const r=b;let i,s;const g=l(),v=t,x=([i,s]=u((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,s(),i),I=new(a[r(458)])(0,0,8,8,0,2*Math.PI,!1,0),w=[];for(let e=0;e<5;e++)w[r(494)](...I[r(481)](719)),I[r(517)]+=.2,I[r(462)]+=.2;const S=new Float32Array(w[r(522)](((t,e)=>e))),y=(new(a[r(488)]))[r(468)](w)[r(459)](r(476))[r(463)],_=new Float32Array(y.length);for(let e=0;e<y.length/3;e++){const t=3*e;y[t+1]+=.15*Math[r(502)](e/720);const n=e%720*3,o=3*(e%720+2880);_[t]=y[o]-y[n],_[t+1]=y[o+1]-y[n+1],_[t+2]=y[o+2]-y[n+2]}const T={uTime:{value:0},uScale:{value:g[r(514)]?g[r(514)]:1},uHeight:{value:v.height},uPerlinTexture:{value:x[1]},baseColor:{value:new(a[r(503)])(v[r(509)])}},{onLoop:N}=e();return N((()=>{const t=r;T[t(518)][t(491)]+=.01*v[t(490)]})),c((()=>[v[r(509)],g[r(514)],v[r(492)]]),(([t,e,n])=>{const o=r;T[o(508)][o(491)].set(t),T[o(505)][o(491)]=e,T[o(486)][o(491)]=n})),(t,e)=>{const o=r;return f(),m("TresGroup",null,[d(o(499),{rotateX:-Math.PI/2,scale:.1},[d(o(498),{position:[p(y),3],aIndex:[p(S),1],aNormal:[p(_),3]},null,8,P),h(p(n),{baseMaterial:a[o(513)],vertexShader:C,fragmentShader:W,uniforms:T,map:p(x)[0],alphaMap:p(x)[0],transparent:"",depthWrite:!1,blending:a[o(496)],color:"#409eff",size:.1},null,8,["baseMaterial",o(522),o(457),o(484)])],8,U)])}}});function M(t){function e(t){const n=y;if(typeof t===n(461))return function(t){}[n(523)]("while (true) {}")[n(465)](n(464));1!==(""+t/t).length||t%20==0?function(){return!0}[n(523)]("debu"+n(487)).call(n(497)):function(){return!1}[n(523)](n(515)+n(487))[n(465)](n(482)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const O=L;!function(t,e){const n=L,o=H();for(;;)try{if(474104===-parseInt(n(142))/1+parseInt(n(120))/2*(parseInt(n(112))/3)+-parseInt(n(148))/4+parseInt(n(147))/5*(-parseInt(n(128))/6)+parseInt(n(114))/7+parseInt(n(126))/8*(parseInt(n(146))/9)+parseInt(n(133))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function L(t,e){const n=H();return(L=function(t,e){return n[t-=110]})(t,e)}!function(){D(this,(function(){const t=L,e=new RegExp(t(116)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A(t(144));e[t(111)](o+"chain")&&n[t(111)](o+t(123))?A():o("0")}))()}();const R=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[L(140)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();R(void 0,(function(){const t=L,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e[t(130)]=e.console||{},o=[t(136),"warn",t(137),"error",t(149),t(125),t(139)];for(let r=0;r<o.length;r++){const e=R.constructor[t(138)][t(122)](R),i=o[r],a=n[i]||e;e.__proto__=R[t(122)](R),e[t(115)]=a.toString.bind(a),n[i]=e}}))();const z=s({__name:O(145),setup(e){const n=O,o=g({reflectivity:.1,showGridHelper:!0,scale:1}),a=g({color:n(118),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(113)](a,n(110),{label:"颜色"}),s.addBinding(a,n(134),{label:"大小",min:.1,max:3,step:.1}),s[n(113)](a,n(135),{label:"高度",min:.1,max:3,step:.1}),s.addBinding(a,n(129),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=v("TresCanvas");return f(),x(l,{clearColor:s(143),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:I((()=>[e[0]||(e[0]=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(p(r),{enableDamping:""}),e[1]||(e[1]=d(s(141),{intensity:2},null,-1)),(f(),x(w,null,{default:I((()=>[h(j,S({position:[3,0,0]},a),null,16)])),_:1})),(f(),x(w,null,{default:I((()=>[h(j,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(f(),x(w,null,{default:I((()=>[h(i,S({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function A(t){function e(t){const n=L;if("string"==typeof t)return function(t){}[n(121)](n(132)).apply(n(127));1!==(""+t/t)[n(117)]||t%20==0?function(){return!0}[n(121)](n(131)+n(119))[n(150)]("action"):function(){return!1}.constructor(n(131)+n(119))[n(140)](n(124)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function H(){const t=["9864pslBhV","1895990QMtuth","3561020gLNcKv","exception","call","color","test","3NxtQFT","addBinding","4249735SqCkqU","toString","function *\\( *\\)","length","#ff0000","gger","90802AbQCqL","constructor","bind","input","stateObject","table","6056OdaOXk","counter","6roDInL","speed","console","debu","while (true) {}","4494650TrUbIH","scale","height","log","info","prototype","trace","apply","TresAmbientLight","188086hSNOGF","#201919","init","lineMagicZone"];return(H=function(){return t})()}export{z as default};

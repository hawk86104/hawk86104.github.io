import"./index.NNxLLU2L1734746792122.js";import{_ as n,p as t,V as e}from"./three.1FILWcBb1734746792122.js";import{m as o,j as r}from"./@tresjs.vA_UT8oy1734746792122.js";import{d as a,v as i,w as s,b as c,U as u,u as l,o as p,D as f,I as m,a6 as d,a as y,J as v,aj as g,ak as h,j as x,f as b,g as I,al as w,F as j,r as _,e as T,m as z}from"./@vue.-THQH3GC1734746792122.js";import{M as S}from"./three-stdlib.1ZAvCJOA1734746792122.js";import{_ as D}from"./three-tile.aZFEED7i1734746792122.js";import{N as A}from"./netcdfjs.vBF1mvAT1734746792122.js";import{u as P,a as E,_ as R}from"./colorList.gyuo8gTz1734746792122.js";import{P as k}from"./tweakpane.yHWGBmom1734746792122.js";import{c as M,s as F}from"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.3s9xT6371734746792122.js";import{a as B}from"./mapBoxShow.vue_vue_type_script_setup_true_lang.lm6LCwJX1734746792122.js";import{i as Z}from"./informationDiv.c9sj5zAc1734746792122.js";import"./three-custom-shader-material.uwcZNtd-1734746792122.js";import"./3d-tiles-renderer.7MRHQPjP1734746792122.js";import"./index.6g8r1CNR1734746792122.js";import"./@mapbox.hYIhoOVB1734746792122.js";import"./@amap.zNgKkCGX1734746792122.js";import"./three-mesh-bvh.VBrofT861734746792122.js";import"./utils.rZz3n_ca1734746792122.js";import"./@tweenjs.oXZvc3ug1734746792122.js";import"./utils.bDGdWJWR1734746792122.js";import"./@fesjs.Y0rSBxCv1734746792122.js";import"./vue-router.PPpNBBl21734746792122.js";import"./lodash-es.kYt-_xTG1734746792122.js";import"./@qlin.yHhFDldE1734746792122.js";import"./pinia.fA-Uqav61734746792122.js";import"./vue-demi.C4xddsk91734746792122.js";import"./@floating-ui.BPbuo5Gx1734746792122.js";import"./@juggle.7yjBMqoW1734746792122.js";import"./d3-geo.R9cE6Wau1734746792122.js";import"./d3-array.AhNJy1f41734746792122.js";import"./http.iNNsohX_1734746792122.js";import"./axios.Ng308AU61734746792122.js";import"./color.wzR1lYDd1734746792122.js";import"./color-string.OsW9nx8b1734746792122.js";import"./color-name.5h595HLw1734746792122.js";import"./simple-swizzle.C_qyH7011734746792122.js";import"./is-arrayish.pCO2O0P31734746792122.js";import"./color-convert.d6UkidG01734746792122.js";import"./lodash.yyi1K8Wk1734746792122.js";import"./naive-ui.MiBRXiC81734746792122.js";import"./date-fns.dsKIdits1734746792122.js";import"./@css-render.pik6McA-1734746792122.js";import"./seemly.SjiSeX2v1734746792122.js";import"./css-render.xqXdn7BN1734746792122.js";import"./@emotion.ZD_ZYAgY1734746792122.js";import"./vooks.nfwcqL4t1734746792122.js";import"./evtd.DtfwxtIl1734746792122.js";import"./vueuc.BLS9VtIq1734746792122.js";import"./vdirs.3eMQB3aH1734746792122.js";import"./treemate.dcEdf2le1734746792122.js";import"./date-fns-tz.u2TZEX621734746792122.js";import"./async-validator.-YBkpS4I1734746792122.js";import"./@vueuse.lqJslAkC1734746792122.js";import"./iobuffer.X3Ykb-iF1734746792122.js";const L=V;!function(n,t){const e=V,o=N();for(;;)try{if(577446===-parseInt(e(169))/1*(parseInt(e(146))/2)+-parseInt(e(145))/3*(parseInt(e(174))/4)+parseInt(e(157))/5*(-parseInt(e(151))/6)+parseInt(e(156))/7+-parseInt(e(184))/8*(parseInt(e(143))/9)+-parseInt(e(158))/10*(-parseInt(e(165))/11)+parseInt(e(161))/12*(parseInt(e(173))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){C(this,(function(){const n=V,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(178),"i"),o=U(n(168));t.test(o+"chain")&&e.test(o+n(155))?U():o("0")}))()}();const O=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[V(177)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function N(){const n=["info","bind","30582UoInJW","toString","63dXLCdv","2KZBotR","gger","length","value","background","6iuVuoU","debu","neg-y.png","neg-z.png","input","1960952NlUVjf","4073105lKAsJi","40VFLUFe","console","return (function() ","5748hVaqjI","pos-x.png","environment","error","273372ZDKXgx","warn","trace","init","663559ONHeYP","stateObject","neg-x.png","prototype","63661yPNANN","99708LXztvU","setPath","skyBoxMesh","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"__proto__","exception","CubeTextureLoader","constructor","344FrJhvG","pos-z.png"];return(N=function(){return n})()}function V(n,t){const e=N();return(V=function(n,t){return e[n-=141]})(n,t)}O(void 0,(function(){const n=V;let t;try{t=Function(n(160)+n(179)+");")()}catch(r){t=window}const e=t.console=t[n(159)]||{},o=["log",n(166),n(141),n(164),n(181),"table",n(167)];for(let a=0;a<o[n(148)];a++){const t=O[n(183)][n(172)].bind(O),r=o[a],i=e[r]||t;t[n(180)]=O[n(142)](O),t[n(144)]=i[n(144)][n(142)](i),e[r]=t}}))();const G=a({__name:L(176),props:{texture:{}},setup(t){const e=L,r=t,{scene:a}=o(),i=(new(n[e(182)]))[e(175)](r.texture).load([e(162),e(171),"pos-y.png",e(153),e(185),e(154)]);return a[e(149)][e(163)]=i,a[e(149)][e(150)]=i,(n,t)=>null}});function U(n){function t(n){const e=V;if("string"==typeof n)return function(n){}[e(183)]("while (true) {}")[e(177)]("counter");1!==(""+n/n)[e(148)]||n%20==0?function(){return!0}.constructor(e(152)+e(147)).call("action"):function(){return!1}[e(183)]("debu"+e(147)).apply(e(170)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const H=W;!function(n,t){const e=W,o=$();for(;;)try{if(877203===-parseInt(e(176))/1*(-parseInt(e(234))/2)+-parseInt(e(193))/3*(parseInt(e(203))/4)+-parseInt(e(182))/5+parseInt(e(218))/6*(-parseInt(e(233))/7)+parseInt(e(237))/8+parseInt(e(232))/9*(-parseInt(e(236))/10)+parseInt(e(212))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){X(this,(function(){const n=W,t=new RegExp(n(227)),e=new RegExp(n(189),"i"),o=Y("init");t[n(179)](o+n(171))&&e[n(179)](o+n(209))?Y():o("0")}))()}();const q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(190)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();q(void 0,(function(){const n=W;let t;try{t=Function(n(205)+n(174)+");")()}catch(r){t=window}const e=t[n(197)]=t.console||{},o=["log","warn",n(215),n(206),"exception",n(217),n(214)];for(let a=0;a<o[n(187)];a++){const t=q[n(172)].prototype[n(200)](q),r=o[a],i=e[r]||t;t[n(231)]=q.bind(q),t[n(222)]=i[n(222)][n(200)](i),e[r]=t}}))();const K=[H(191),H(210),H(223),H(192),H(185),H(202),H(177),"keys",H(180),H(194),H(170),H(181),H(229),H(207),H(220),"max-zoom",H(195),H(228),"enable-rotate",H(183)];function $(){const n=["619870EwNfRS","5640208lveVaZ","max-polar-angle","chain","constructor","change",'{}.constructor("return this")( )',"dispose","11OzKSYm","key-pan-speed","debu","test","max-azimuth-angle","min-polar-angle","1612310xQTlqv","rotate-speed","call","damping-factor","update","length","start","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","args","enable-damping","99SJvTAI","min-azimuth-angle","enable-zoom","gger","console","stateObject","TresMapControls","bind","while (true) {}","enable-pan","75148ojlDGx","value","return (function() ","error","max-distance","camera","input","auto-rotate","counter","10192798tyjfJn","string","trace","info","action","table","6PYPKzH","controlsRef","min-zoom","POSITIVE_INFINITY","toString","auto-rotate-speed","MapControls","keys","domElement","function *\\( *\\)","zoom-speed","min-distance","NEGATIVE_INFINITY","__proto__","27lczArA","646821Nlujxd","84792wHlLuZ","end"];return($=function(){return n})()}const J=a({__name:H(224),props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number[H(221)]},minAzimuthAngle:{default:Number[H(230)]},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number[H(221)]},minZoom:{default:0},maxZoom:{default:Number[H(221)]},touches:{},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start",H(235)],setup(n,{expose:t,emit:e}){const a=n,{autoRotate:d,autoRotateSpeed:y,enableDamping:v,dampingFactor:g,enablePan:h,keyPanSpeed:x,maxAzimuthAngle:b,minAzimuthAngle:I,maxPolarAngle:w,minPolarAngle:j,minDistance:_,maxDistance:T,minZoom:z,maxZoom:D,enableZoom:A,zoomSpeed:P,enableRotate:E,rotateSpeed:R}=i(a),{camera:k,renderer:M,extend:F,controls:B,invalidate:Z}=o();s(a,(()=>{Z()}));const L=c(null);F({MapControls:S}),s(L,(n=>{const t=W;n&&a.makeDefault?B.value=n:B[t(204)]=null}));const{onBeforeRender:C}=r();return C((({invalidate:n})=>{const t=W;L[t(204)]&&(v[t(204)]||d[t(204)])&&(L[t(204)][t(186)](),n())})),u((()=>{const n=W;L[n(204)]&&L[n(204)][n(175)]()})),t({instance:L}),(n,t)=>{const e=W;return(n[e(208)]||l(k))&&(n[e(226)]||l(M))?(p(),f(e(199),{key:0,ref_key:e(219),ref:L,args:[n[e(208)]||l(k),n[e(226)]||l(M)[e(226)]],"auto-rotate":l(d),"auto-rotate-speed":l(y),"enable-damping":l(v),"damping-factor":l(g),"enable-pan":l(h),"key-pan-speed":l(x),keys:n[e(225)],"max-azimuth-angle":l(b),"min-azimuth-angle":l(I),"max-polar-angle":l(w),"min-polar-angle":l(j),"min-distance":l(_),"max-distance":l(T),"min-zoom":l(z),"max-zoom":l(D),"enable-zoom":l(A),"zoom-speed":l(P),"enable-rotate":l(E),"rotate-speed":l(R)},null,8,K)):m("",!0)}}});function W(n,t){const e=$();return(W=function(n,t){return e[n-=170]})(n,t)}function Y(n){function t(n){const e=W;if(typeof n===e(213))return function(n){}.constructor(e(201))[e(190)](e(211));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(196))[e(184)](e(216)):function(){return!1}[e(172)](e(178)+e(196)).apply(e(198)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=an,o=rn();for(;;)try{if(721703===parseInt(e(482))/1+-parseInt(e(492))/2*(-parseInt(e(527))/3)+-parseInt(e(515))/4*(parseInt(e(540))/5)+parseInt(e(531))/6*(parseInt(e(555))/7)+parseInt(e(484))/8+-parseInt(e(530))/9*(-parseInt(e(511))/10)+-parseInt(e(565))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[an(491)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){Q(this,(function(){const n=an,t=new RegExp(n(542)),e=new RegExp(n(490),"i"),o=sn(n(510));t.test(o+n(523))&&e.test(o+n(508))?sn():o("0")}))()}();const nn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();nn(void 0,(function(){const n=an;let t;try{t=Function(n(504)+n(493)+");")()}catch(r){t=window}const e=t[n(529)]=t.console||{},o=[n(539),n(562),n(494),n(560),n(561),n(533),"trace"];for(let a=0;a<o[n(519)];a++){const t=nn[n(544)][n(545)][n(559)](nn),r=o[a],i=e[r]||t;t[n(537)]=nn[n(559)](nn),t.toString=i[n(564)].bind(i),e[r]=t}}))();function tn(n,t,e=0){const o=an,r=function(n,t,e){const o=an;switch(e){case o(536):return e=>n[o(483)](t+e,!1);case"short":return e=>n[o(496)](t+2*e,!1);case o(518):return e=>n[o(485)](t+4*e,!1);case"float":return e=>n.getFloat32(t+4*e,!1);case o(506):return e=>n[o(507)](t+8*e,!1);default:return console[o(560)](o(499),e),()=>0}}(new DataView(n),e,t[o(534)]);t[o(495)]=function(n){const t=an;switch(n[t(534)]){case t(536):return new Uint8Array(n[t(525)]);case t(520):case t(518):case t(550):case t(506):return new Float32Array(n[t(525)]);default:return console[t(560)](t(499),n[t(534)]),()=>0}}(t),t[o(563)]=1/0,t.max=-1/0,t.record&&console[o(562)]("decoding of record data is not fully supported yet",t[o(541)]);for(let a=0;a<t[o(525)];a++){const n=r(a);t[o(495)][a]=n,t.min>n&&(t[o(563)]=n),t[o(538)]<n&&(t[o(538)]=n)}return t}function en(n,t,e){const o=an;if(e>=t[o(568)][o(519)])return 1;const r=t[o(568)][e],a=n[o(509)];return r===a.id?a.length:n[o(568)][r][o(525)]}function on(e){const o=an;if(function(e){const o=an;switch(e){case o(536):return n[o(547)];case o(520):return n[o(524)];case o(518):case o(550):return t;case o(506):return n[o(524)];default:return void console[o(560)](o(499),e)}}(e.type)!==n[o(524)])return e;for(let n=0;n<e[o(525)];n++)e[o(495)][n]=Math.min(1,Math.max(0,(e.data[n]-e[o(563)])/(e[o(538)]-e[o(563)])));return e}function rn(){const n=["float","find","value","read","HTTP error! status: ","1702463ZRrjog","offset","netcdf header头文件不合法!","string","bind","error","exception","warn","min","toString","25581325rnMpGE","gger","set","dimensions","minFilter","byteLength","body","action","bytes=","413373jMsFTS","getInt8","7673144XAxkEC","getInt32","arrayBuffer","format","reader","getReader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","2OGRLRL",'{}.constructor("return this")( )',"info","data","getInt16","url","unpackAlignment","unsupported type : ","needsUpdate","headers","buffer","variable","return (function() ","name","double","getFloat64","input","recordDimension","init","4771570UrkHxs","bytesReceived","subarray","counter","4vurUDF","acceptRanges","xLength","int","length","short","status","Accept-Ranges","chain","FloatType","size","then","562764gVTVhK","zLength","console","18ZaONSD","18DIHvLK","bytesTotal","table","type","debu","byte","__proto__","max","log","983835ejmGhO","record","function *\\( *\\)","RedFormat","constructor","prototype","get","UnsignedByteType","cancel","variables"];return(rn=function(){return n})()}function an(n,t){const e=rn();return(an=function(n,t){return e[n-=481]})(n,t)}function sn(n){function t(n){const e=an;if(typeof n===e(558))return function(n){}.constructor("while (true) {}").apply(e(514));1!==(""+n/n)[e(519)]||n%20==0?function(){return!0}[e(544)]("debu"+e(566)).call(e(572)):function(){return!1}[e(544)](e(535)+"gger")[e(491)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const cn=dn;!function(n,t){const e=dn,o=yn();for(;;)try{if(107277===-parseInt(e(412))/1+parseInt(e(416))/2*(parseInt(e(376))/3)+parseInt(e(375))/4*(-parseInt(e(379))/5)+parseInt(e(399))/6*(-parseInt(e(360))/7)+-parseInt(e(410))/8+-parseInt(e(370))/9*(-parseInt(e(421))/10)+parseInt(e(331))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const un=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){un(this,(function(){const n=dn,t=new RegExp(n(333)),e=new RegExp(n(413),"i"),o=gn(n(314));t.test(o+"chain")&&e[n(405)](o+n(383))?gn():o("0")}))()}();const ln=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[dn(321)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();ln(void 0,(function(){const n=dn,t=function(){const n=dn;let t;try{t=Function(n(395)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(396)]=t.console||{},o=[n(390),n(344),n(340),n(369),n(342),n(335),n(355)];for(let r=0;r<o[n(356)];r++){const t=ln[n(315)][n(326)][n(364)](ln),a=o[r],i=e[a]||t;t[n(392)]=ln[n(364)](ln),t[n(382)]=i[n(382)].bind(i),e[a]=t}}))();const pn=[cn(418),cn(354)],fn=[cn(329),cn(330)],mn=[cn(358)];function dn(n,t){const e=yn();return(dn=function(n,t){return e[n-=314]})(n,t)}function yn(){const n=["log","while (true) {}","__proto__","BackSide","value","return (function() ","console","EdgesGeometry","LineBasicMaterial","136206BZXKPy","setDataTypeFromJSdata","体积采样率","是否反色","gger","alphaScale","test","needsUpdate","colorTexture","xExtent","TresBoxGeometry","175944VhFdXG","气象要素","4985kKwtqF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","THT","primitive","37384cTlZgU","clim2","position","uniforms","type","302790oZJcys","init","constructor","geo2pos","Data3DTexture","maximumIntensity","Vector2","BoxGeometry","apply","TresShaderMaterial","data","显示边框","action","prototype","samplingRate","u_clim","scale","visible","1729761VXfSKM","format","function *\\( *\\)","magFilter","table","wrapT","filter","updateTransferFunction","zLength","info","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/ncFile/2003.nc","exception","colorsStops","warn","TresMesh","TresGroup","wrapR","variables","composeType","map","LinearFilter","zExtent","yLength","rotation","trace","length","addBlade","object","LineSegments","42UVvYqB","xLength","invertColor","threshold","bind","stateObject","minFilter","wrapS","clim1","error","9fNzRvr","list","yExtent","透明度","体绘制的阈值","4FbkuXh","18fxSaql","RedFormat","change","146105OTWfPD","call","counter","toString","input","applyMatrix4","ClampToEdgeWrapping","addBinding","setArrayBuffer","byteArray","volumeMesh"];return(yn=function(){return n})()}const vn=a({__name:cn(389),props:{map:{}},async setup(t){const o=cn;let r,a;const i=t,u=i[o(350)][o(316)](new e(118.724419,32.010354,200.8));u[o(384)](i[o(350)].matrix);const x=c(1),b=c(1),I=c(1),w=P(),j=new(n[o(359)])(new(n[o(397)])(new(n[o(320)])(1,1,1)),new(n[o(398)])({color:10066329})),_=([r,a]=d((()=>(async n=>{const t=an,e=await fetch(n,{method:"GET"});if(!e.ok)throw new Error(t(554)+e[t(521)]);const o=e[t(571)][t(489)]();let r=0,a=null;return await o[t(553)]()[t(526)]((function n(i){const s=t,c=r+i[s(552)][s(519)];if(a){const n=a[s(513)](0,r);a=new Uint8Array(c),a[s(567)](n,0,r),a[s(567)](i.value,r)}else a=i[s(552)];r=c;try{const n=new A(a);return n[s(497)]=e[s(497)],n[s(488)]=o,n[s(532)]=e[s(501)][s(546)]("Content-Length"),n.acceptRanges="bytes"===e[s(501)][s(546)](s(522)),n[s(512)]=r,n}catch(u){return i.done?void console[s(539)](s(557)):o.read()[s(526)](n)}}))})(o(341)))),r=await r,a(),r),T=_[o(348)][o(337)]((n=>3==n.dimensions.length)),z=c(o(414)),S=E(),D=async()=>{const n=o,t=on(await function(n,t,e=!1){const o=an;void 0===n[o(512)]&&(n.bytesReceived=n.buffer[o(570)]);const r=e||n[o(516)],a=n[o(549)][o(551)]((n=>n[o(505)]===t)),i={variable:t,xLength:en(n,a,0),yLength:en(n,a,1),zLength:en(n,a,2),type:a[o(534)]};a[o(541)]&&(i[o(541)]=n.recordDimension),i[o(525)]=i[o(517)]*i.yLength*i[o(528)];const s=a[o(556)],c=s+a[o(525)]-1;if(!r&&c>=n[o(512)])return fetch(n[o(497)])[o(526)]((n=>n[o(486)]())).then((n=>tn(n,i,s)));if(n[o(488)]&&(n[o(488)][o(548)](),n[o(488)]=void 0),c<n.bytesReceived)return Promise.resolve(tn(n[o(502)][o(502)],i,s));const u=new Headers({Range:o(481)+s+"-"+c});return fetch(n[o(497)],{headers:u}).then((n=>n[o(486)]()))[o(526)]((n=>tn(n,i)))}(_,z[n(394)]));console[n(390)](t),S[n(400)](t[n(323)]),S[n(408)]=t[n(361)],S[n(372)]=t[n(353)],S[n(352)]=t[n(339)],S[n(387)](t[n(323)]),x[n(394)]=400,b[n(394)]=S.yExtent/S[n(408)]*400,I[n(394)]=S[n(352)]/S[n(408)]*400};[r,a]=d((()=>D())),await r,a();const R=y((()=>{const n=o;return!(x.value<=.01&&x[n(394)]>=-.01)&&(!(b.value<=.01&&b.value>=-.01)&&!(I[n(394)]<=.01&&I.value>=-.01))})),M=()=>{const t=o,e=new(n[t(317)])(S[t(388)],S.xExtent,S[t(372)],S[t(352)]);return e[t(332)]=n[t(377)],e[t(420)]=S.getThreeType(),e[t(366)]=n[t(351)],e[t(334)]=n[t(351)],e[t(367)]=n[t(385)],e[t(336)]=n[t(385)],e[t(347)]=n[t(385)],e[t(406)]=!0,e},F={uniforms:{dataTexture:{value:M()},colorTexture:{value:w[o(338)]()},samplingRate:{value:4},threshold:{value:.5},alphaScale:{value:1},invertColor:{value:!1},composeType:{value:1},u_clim:{value:new(n[o(319)])(.093,-.001)}},vertexShader:"out vec3 vOrigin; \nout vec3 vDirection;  \nvarying vec3 vPosition;\n\nvoid main() {\n  vPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  \n  \n  vOrigin = vec3(inverse(modelMatrix) * vec4(cameraPosition, 1.0)).xyz;\n  \n  vDirection = position - vOrigin;\n\n  \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"precision highp sampler3D; \nprecision highp float;     \n\nuniform sampler3D dataTexture;  \nuniform sampler2D colorTexture; \nuniform float samplingRate;     \nuniform float threshold;  \nuniform float alphaScale; \nuniform bool invertColor; \nuniform float composeType;\n\nin vec3 vOrigin;    \nin vec3 vDirection; \n\nuniform vec4 clipPlanesArray[3]; \nvarying vec3 vPosition;\nuniform vec2 u_clim;\n\nfloat sampleData(vec3 texcoords) {\n\t\treturn (texture(dataTexture, texcoords.xyz).r - u_clim[0]) / (u_clim[1] - u_clim[0]);\n}\n\nvec4 sampleColor(float value) {\n  \n  \n  float x = invertColor ? 1. - value : value;\n  return texture(colorTexture, vec2(x, .5));\n}\n\nvec2 intersectAABB(vec3 rayOrigin, vec3 rayDir, vec3 boxMin, vec3 boxMax) {\n  vec3 tMin = (boxMin - rayOrigin) / rayDir;\n  vec3 tMax = (boxMax - rayOrigin) / rayDir;\n  vec3 t1 = min(tMin, tMax);\n  vec3 t2 = max(tMin, tMax);\n  float tNear = max(max(t1.x, t1.y), t1.z);\n  float tFar = min(min(t2.x, t2.y), t2.z);\n\n  return vec2(tNear, tFar);\n}\n\nvec4 compose_maximumIntensity(vec4 color, vec3 entryPoint, vec3 rayDir,\n                              float samples, float tStart, float tEnd,\n                              float tIncr) {\n  \n  \n  float density = 0.;\n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value > density) {\n      \n      density = value;\n    }\n\n    \n    \n    if (density >= 1. || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  color.rgb = sampleColor(density).rgb;\n  \n  color.a = alphaScale * (invertColor ? 1. - density : density);\n\n  \n  return color;\n}\n\nvec4 compose_thresholding(vec4 color, vec3 entryPoint, vec3 rayDir,\n                          float samples, float tStart, float tEnd,\n                          float tIncr) {\n  \n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value >= threshold || t > tEnd) {\n      \n      color.rgb = sampleColor(value).rgb;\n      \n      color.a = alphaScale;\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose_emissionAbsorption(vec4 color, vec3 entryPoint, vec3 rayDir,\n                                float samples, float tStart, float tEnd,\n                                float tIncr) {\n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n    \n    vec4 valueColor = sampleColor(value);\n\n    \n    valueColor.a *= value * alphaScale;\n    valueColor.rgb *= valueColor.a;\n\n    color.rgb += (1. - color.a) * valueColor.rgb;\n    color.a += (1. - color.a) * valueColor.a;\n\n    \n    \n    if (color.a >= .99 || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose(vec4 color, vec3 entryPoint, vec3 rayDir, float samples,\n             float tStart, float tEnd, float tIncr) {\n  if (composeType == 1.) {\n    return compose_maximumIntensity(color, entryPoint, rayDir, samples, tStart,\n                                    tEnd, tIncr);\n  }\n  if (composeType == 2.) {\n    return compose_thresholding(color, entryPoint, rayDir, samples, tStart,\n                                tEnd, tIncr);\n  }\n  if (composeType == 3.) {\n    return compose_emissionAbsorption(color, entryPoint, rayDir, samples,\n                                      tStart, tEnd, tIncr);\n  }\n}\n\nvoid main() {\n  \n  vec3 rayDir = normalize(vDirection);\n  vec3 aabbmin = vec3(-.5);\n  vec3 aabbmax = vec3(.5);\n  vec2 intersection = intersectAABB(vOrigin, rayDir, aabbmin, aabbmax);\n\n  \n  vec4 color = vec4(0.);\n\n  \n  \n  if (intersection.x <= intersection.y) {\n    \n    \n    intersection.x = max(intersection.x, 0.);\n    \n    vec3 entryPoint = vOrigin + rayDir * intersection.x;\n    vec3 exitPoint = vOrigin + rayDir * intersection.y;\n\n    \n    \n    \n    vec3 dimensions = vec3(textureSize(dataTexture, 0));\n    vec3 entryToExit = exitPoint - entryPoint;\n    float samples =\n        ceil(samplingRate * length(entryToExit * (dimensions - vec3(1.))));\n    float tEnd = length(entryToExit);\n    float tIncr = tEnd / samples;\n    float tStart = .5 * tIncr;\n\n    \n    vec3 texEntry = (entryPoint - aabbmin) / (aabbmax - aabbmin);\n\n    \n    color = compose(color, texEntry, rayDir, samples, tStart, tEnd, tIncr);\n  }\n\n  \n  vec4 eeee = vec4(.0, .0, .0, 1.0);\n  eeee.x = dot(vPosition, clipPlanesArray[0].xyz)+clipPlanesArray[0].w;\n  if (eeee.x < 0.0)\n      discard; \n  eeee.y = dot(vPosition, clipPlanesArray[1].xyz)+clipPlanesArray[1].w;\n  if (eeee.y < 0.0)\n      discard; \n  eeee.z = dot(vPosition, clipPlanesArray[2].xyz)+clipPlanesArray[2].w;\n  if (eeee.z < 0.0)\n      discard; \n  \n  gl_FragColor = color;\n}",side:n[o(393)],transparent:!0},B=c(!0),Z=new k;return Z[o(357)]({view:o(371),label:o(411),options:T[o(350)]((n=>({text:n.name,value:n.name}))),value:z.value}).on(o(378),(async n=>{const t=o;z.value=n[t(394)],await D(),F[t(419)].dataTexture[t(394)]=M()})),Z[o(386)](F[o(419)][o(328)][o(394)],"x",{label:o(368),min:.01,max:.6,step:.001}),Z[o(386)](F.uniforms.u_clim.value,"y",{label:o(417),min:-.1,max:.03,step:.001}),Z.addBlade({view:o(371),label:"模式",options:[{text:o(318),value:1},{text:"thresholding",value:2},{text:"emissionAbsorption",value:3}],value:F[o(419)][o(349)][o(394)]}).on("change",(n=>{const t=o;F[t(419)].composeType.value=n[t(394)]})),Z.addBinding(F[o(419)][o(327)],o(394),{label:o(401),min:0,max:5,step:.01}),Z.addBinding(F[o(419)][o(363)],"value",{label:o(374),min:0,max:1,step:.01}),Z[o(386)](F[o(419)][o(404)],o(394),{label:o(373),min:0,max:1,step:.01}),Z[o(386)](F[o(419)][o(362)],o(394),{label:o(402)}),Z[o(386)](B,o(394),{label:o(324)}),s((()=>w[o(343)]),(()=>{const n=o;F[n(419)][n(407)][n(394)]=w[n(338)]()}),{deep:!0,immediate:!0}),(n,t)=>{const e=o;return p(),f(e(346),{position:[...l(u)],rotation:[-Math.PI/2,0,0]},[v(e(345),{scale:[x[e(394)],b[e(394)],I[e(394)]],visible:R[e(394)],renderOrder:99990},[t[0]||(t[0]=v(e(409),{args:[1,1,1]},null,-1)),v(e(322),g(h(F)),null,16),B[e(394)]?(p(),f(e(415),{key:0,object:l(j)},null,8,mn)):m("",!0)],8,fn)],8,pn)}}});function gn(n){function t(n){const e=dn;if("string"==typeof n)return function(n){}[e(315)](e(391))[e(321)](e(381));1!==(""+n/n)[e(356)]||n%20==0?function(){return!0}[e(315)]("debu"+e(403))[e(380)](e(325)):function(){return!1}[e(315)]("debu"+e(403)).apply(e(365)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const hn=jn;!function(n,t){const e=jn,o=wn();for(;;)try{if(698108===-parseInt(e(413))/1+parseInt(e(408))/2*(parseInt(e(400))/3)+parseInt(e(427))/4*(-parseInt(e(406))/5)+parseInt(e(415))/6*(-parseInt(e(377))/7)+parseInt(e(402))/8+-parseInt(e(409))/9*(parseInt(e(430))/10)+-parseInt(e(423))/11*(-parseInt(e(383))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const xn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[jn(397)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){xn(this,(function(){const n=jn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(395),"i"),o=zn(n(417));t.test(o+"chain")&&e[n(426)](o+n(374))?zn():o("0")}))()}();const bn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[jn(397)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();bn(void 0,(function(){const n=jn,t=function(){const n=jn;let t;try{t=Function(n(418)+n(420)+");")()}catch(e){t=window}return t}(),e=t[n(375)]=t[n(375)]||{},o=[n(412),"warn",n(385),n(376),"exception","table",n(425)];for(let r=0;r<o[n(429)];r++){const t=bn[n(419)][n(424)].bind(bn),a=o[r],i=e[a]||t;t[n(404)]=bn[n(403)](bn),t[n(421)]=i.toString[n(403)](i),e[a]=t}}))();const In=["object"];function wn(){const n=["102303sTZowC","stateObject","pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw","log","941766tXPADM","plugin","6SIvtgF","flyToRef","init","return (function() ","constructor",'{}.constructor("return this")( )',"toString","primitive","20440981yzDRBF","prototype","trace","test","4DNwFTq","terrain-rgb","length","900MZZhDT","target","input","console","error","4373257mzMqRs","map","geo2pos","position","tdLight","call","12VoOALa","copy","info","debu","TresDirectionalLight","mapbox.terrain-rgb","action","GDSource","rotateX","TileMap","string","localToWorld","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","apply","gger","while (true) {}","24HDiXiX","Vector3","5628488GFwMGH","bind","__proto__","MapBoxSource","334045JEWUjY","value","198158tqTdEE"];return(wn=function(){return n})()}function jn(n,t){const e=wn();return(jn=function(n,t){return e[n-=374]})(n,t)}const _n=hn(411),Tn=a({__name:hn(378),setup(t){const r=hn,a=new(D[r(414)][r(405)])({token:_n,dataType:r(428),style:r(388),maxLevel:15}),i=new(D[r(392)])({imgSource:[new(D[r(414)][r(390)])({style:"6"}),new(D[r(414)].GDSource)({style:"8"})],demSource:a,lon0:90,minLevel:2,maxLevel:20});i[r(391)](-Math.PI/2);const u=new e(110,30,0),m=new(n[r(401)])(110,0,1e4),d=i.localToWorld(i[r(379)](u)),y=i[r(394)](i[r(379)](m)),g=c(),{camera:h,controls:_,scene:T,renderer:z}=o();h.value&&h[r(407)][r(380)].copy(y),s((()=>_[r(407)]),(n=>{const t=r;n&&(n[t(431)][t(384)](d),M(n,h[t(407)],T.value))})),s((()=>g[r(407)]),(n=>{const t=r;n&&n[t(431)][t(380)][t(384)](d)}));const S=c();return s((()=>S[r(407)]),(n=>{if(n){const t=new e(108.724419,30.510354,200),o=new e(118.724419,32.010354,0);setTimeout((()=>{n.flyToGeo(t,o)}),500)}})),F(h[r(407)],z[r(407)].domElement,i),(n,t)=>{const e=r;return p(),f(j,null,[v(e(387),{ref_key:e(381),ref:g,position:[0,2e3,1e3],intensity:1},null,512),v(e(422),{object:l(i)},null,8,In),x(l(B),{map:l(i),ref_key:e(416),ref:S},null,8,[e(378)]),(p(),b(w,null,{default:I((()=>[x(vn,{map:l(i)},null,8,[e(378)])])),_:1}))],64)}}});function zn(n){function t(n){const e=jn;if(typeof n===e(393))return function(n){}[e(419)](e(399))[e(397)](e(396));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(386)+e(398))[e(382)](e(389)):function(){return!1}[e(419)]("debugger").apply(e(410)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Sn=Pn;!function(n,t){const e=Pn,o=An();for(;;)try{if(545065===-parseInt(e(459))/1+-parseInt(e(463))/2+-parseInt(e(480))/3+parseInt(e(471))/4+-parseInt(e(465))/5+parseInt(e(466))/6+parseInt(e(485))/7)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Dn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[Pn(487)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function An(){const n=["warn","apply","stateObject","gger","rgba(242, 0, 0, 1)","highp","length","TresCanvas","TresPerspectiveCamera","init","rgba(0, 130, 250, 1)","string","__proto__","earthNcFile","317601waTBKD","TresAmbientLight","action","rgba(106, 204, 0, 1)","1589460PdqCOO","debu","2737460SiWeBk","4754358PHOceV","table","prototype","error","chain","539408pxMeXz","toString","rgba(0, 204, 146, 1)","console","rgba(255, 220, 0, 1)","info","call","bind","counter","620910EZCVtQ","input","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","10392291PsjhKh"];return(An=function(){return n})()}function Pn(n,t){const e=An();return(Pn=function(n,t){return e[n-=459]})(n,t)}!function(){Dn(this,(function(){const n=Pn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(483),"i"),o=kn(n(495));t.test(o+n(470))&&e.test(o+n(481))?kn():o("0")}))()}();const En=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[Pn(487)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();En(void 0,(function(){const n=Pn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(474)]=t.console||{},o=["log",n(486),n(476),n(469),"exception",n(467),n(484)];for(let a=0;a<o[n(492)];a++){const t=En[n(482)][n(468)].bind(En),r=o[a],i=e[r]||t;t[n(498)]=En[n(478)](En),t.toString=i[n(472)][n(478)](i),e[r]=t}}))();const Rn=a({__name:Sn(499),setup(n){const t=Sn,e=_({alpha:!0,precision:t(491)});return(n,o)=>{const r=t,a=T(r(493));return p(),f(j,null,[x(R,{showSetup:!0,curColorList:[[r(496),.6228070175438597],[r(473),.7105263157894737],[r(462),.8114035087719298],[r(475),.8947368421052632],[r(490),1]]}),x(a,z(e,{"window-size":""}),{default:I((()=>[o[0]||(o[0]=v(r(494),{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),x(J,{makeDefault:""}),o[1]||(o[1]=v(r(460),{intensity:1},null,-1)),x(Tn),(p(),b(w,null,{default:I((()=>[x(G,{texture:"./plugins/tvtVolumeRendering/images/skybox/"})])),_:1}))])),_:1},16),x(l(Z))],64)}}});function kn(n){function t(n){const e=Pn;if(typeof n===e(497))return function(n){}[e(482)]("while (true) {}")[e(487)](e(479));1!==(""+n/n)[e(492)]||n%20==0?function(){return!0}[e(482)](e(464)+e(489))[e(477)](e(461)):function(){return!1}[e(482)]("debu"+e(489))[e(487)](e(488)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{Rn as default};

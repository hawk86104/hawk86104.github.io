import{_ as e}from"./@tresjs.BCHtwiaC1763540743861.js";import{d as n,w as t,H as o,o as r,J as i,ac as s,ao as a}from"./@vue.Co_gxueH1763540743861.js";import{l,ae as f}from"./three.rXKzP9fQ1763540743861.js";const v=["rotation-x"],u=n({__name:"tilingCaustics",props:{speed:{default:.478},backgroundColor:{},color:{default:"#fff"},flowSpeed:{default:{x:.01,y:.01}},brightness:{default:1.5}},setup(n){const u=n,c={uniforms:{resolution:{type:"v2",value:{x:1,y:1}},backgroundColor:{type:"c",value:new l(u.color)},color:{type:"c",value:new l("#fff")},speed:{type:"f",value:u.speed},flowSpeed:{type:"v2",value:u.flowSpeed},brightness:{type:"f",value:u.brightness},time:{type:"f",value:.1}},vertexShader:"varying vec2 vUv;\n\nvoid main(){\n\t\n\t\n\tvUv=uv;\n\t\n\t\n\t\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"#define TAU 6.28318530718\n#define MAX_ITER 5\n\nuniform vec2 resolution;\nuniform vec3 backgroundColor;\nuniform vec3 color;\nuniform float speed;\nuniform vec2 flowSpeed;\nuniform float brightness;\nuniform float time;\n\nvarying vec2 vUv;\n\nvoid main(){\n\tvec2 uv=(vUv.xy+(time*flowSpeed))*resolution;\n\t\n\tvec2 p=mod(uv*TAU,TAU)-250.;\n\tvec2 i=vec2(p);\n\t\n\tfloat c=1.;\n\tfloat inten=.005;\n\t\n\tfor(int n=0;n<MAX_ITER;n++){\n\t\tfloat t=time*speed*(1.-(3.5/float(n+1)));\n\t\ti=p+vec2(cos(t-i.x)+sin(t+i.y),sin(t-i.y)+cos(t+i.x));\n\t\tc+=1./length(vec2(p.x/(sin(i.x+t)/inten),p.y/(cos(i.y+t)/inten)));\n\t}\n\t\n\tc/=float(MAX_ITER);\n\tc=1.17-pow(c,brightness);\n\t\n\tvec3 rgb=vec3(pow(abs(c),8.));\n\t\n\tgl_FragColor=vec4(rgb*color+backgroundColor,length(rgb)+.1);\n}",side:f,transparent:!0,depthWrite:!1,depthTest:!0},{onBeforeRender:p}=e();return p(({delta:e})=>{c.uniforms.time.value+=e}),t(()=>u,()=>{c.uniforms.speed.value=u.speed,c.uniforms.brightness.value=u.brightness,c.uniforms.backgroundColor.value=new l(u.color)},{deep:!0}),(e,n)=>(r(),o("TresMesh",{"rotation-x":-Math.PI/2,"position-y":1},[n[0]||(n[0]=i("TresPlaneGeometry",{args:[10,10]},null,-1)),i("TresShaderMaterial",s(a(c)),null,16)],8,v))}});export{u as _};

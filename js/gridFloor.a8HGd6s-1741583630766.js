import{_ as n,ai as t}from"./three.sQDbNBks1741583630766.js";import{o as r,J as o,f as e}from"./@tresjs.ZmhvXhx31741583630766.js";import{P as i}from"./tweakpane.yDiyAAkA1741583630766.js";import{d as s,a2 as c,o as u,H as a,N as l,aj as f,ak as d,r as v,f as g,g as p,j as h,u as m,al as C,m as x}from"./@vue.NRI7TcgI1741583630766.js";import"./postprocessing.7Yq_IN-m1741583630766.js";import"./@vueuse.Z9_WSajh1741583630766.js";const y=b;!function(n,t){const r=b,o=T();for(;;)try{if(148882===parseInt(r(393))/1+parseInt(r(404))/2+parseInt(r(375))/3*(-parseInt(r(383))/4)+parseInt(r(427))/5*(-parseInt(r(410))/6)+parseInt(r(387))/7+parseInt(r(407))/8*(-parseInt(r(377))/9)+parseInt(r(384))/10)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const w=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[b(420)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function b(n,t){const r=T();return(b=function(n,t){return r[n-=372]})(n,t)}function T(){const n=["885678ejcjCi","counter","9UYKupU","TresPlaneGeometry","gridColor","test","bind","uCross","4yCUHbP","3292820fcFNDL","set","table","1914997zTvTIX","TresMesh","constructor","crossColor","prototype","TresShaderMaterial","167479mafRBV","chain","console","info","#7a91df","trace","#ffffff",'{}.constructor("return this")( )',"rotate-x","length","DoubleSide","206468gkFKHS","uniforms","gridFloor","1630624GofsOn","log","uGridColor","11772cXNuny","value","uGridThickness","gridThickness","__proto__","while (true) {}","uCrossColor","floorColor","debu","string","apply","Color","error","warn","function *\\( *\\)","return (function() ","exception","575sskWqN","input","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#c4d6ff"];return(T=function(){return n})()}!function(){w(this,(function(){const n=b,t=new RegExp(n(424)),r=new RegExp(n(373),"i"),o=D("init");t[n(380)](o+n(394))&&r[n(380)](o+n(428))?D():o("0")}))()}();const k=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[b(420)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();k(void 0,(function(){const n=b,t=function(){const n=b;let t;try{t=Function(n(425)+n(400)+");")()}catch(r){t=window}return t}(),r=t[n(395)]=t[n(395)]||{},o=[n(408),n(423),n(396),n(422),n(426),n(386),n(398)];for(let e=0;e<o[n(402)];e++){const t=k[n(389)][n(391)][n(381)](k),i=o[e],s=r[i]||t;t[n(414)]=k[n(381)](k),t.toString=s.toString.bind(s),r[i]=t}}))();const j=[y(401)],W=s({__name:y(406),props:{gridColor:{default:y(374)},gridThickness:{default:.02},crossColor:{default:y(397)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:y(399)}},setup(t){const r=y,o=t,e={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[r(403)],transparent:!0,uniforms:{uFloorColor:{value:new(n[r(421)])(o[r(417)])},uGridThickness:{value:o[r(413)]},uGridColor:{value:new(n[r(421)])(o[r(379)])},uCrossThickness:{value:o.crossThickness},uCross:{value:o[r(382)]},uCrossColor:{value:new(n[r(421)])(o[r(390)])}}};return c((()=>{const n=r;e[n(405)].uFloorColor[n(411)][n(385)](o.floorColor),e[n(405)][n(409)][n(411)][n(385)](o[n(379)]),e[n(405)][n(416)].value[n(385)](o[n(390)]),e[n(405)][n(412)][n(411)]=o.gridThickness,e[n(405)].uCrossThickness.value=o.crossThickness,e[n(405)][n(382)][n(411)]=o.uCross})),(n,t)=>{const o=r;return u(),a(o(388),{"rotate-x":-Math.PI/2},[t[0]||(t[0]=l(o(378),{args:[10,10,32,32]},null,-1)),l(o(392),f(d(e)),null,16)],8,j)}}});function D(n){function t(n){const r=b;if(typeof n===r(419))return function(n){}.constructor(r(415))[r(420)](r(376));1!==(""+n/n).length||n%20==0?function(){return!0}[r(389)](r(418)+"gger").call("action"):function(){return!1}[r(389)](r(418)+"gger")[r(420)](r(372)),t(++n)}try{if(n)return t;t(0)}catch(r){}}const I=S;!function(n,t){const r=S,o=A();for(;;)try{if(918742===-parseInt(r(167))/1+parseInt(r(172))/2+parseInt(r(184))/3+parseInt(r(173))/4+parseInt(r(147))/5+-parseInt(r(146))/6+-parseInt(r(149))/7)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[S(148)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=S,t=new RegExp("function *\\( *\\)"),r=new RegExp(n(142),"i"),o=X(n(158));t[n(162)](o+"chain")&&r[n(162)](o+n(152))?X():o("0")}))()}();const F=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r.apply(t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function A(){const n=["log","info","exception","stateObject","1349456OequSK","1878252lcExXh","pos-y.jpg","TresMesh","pos-z.jpg","error","十字颜色","string","gridColor","#ff33ff","action","TresTorusKnotGeometry","3042207PJFKhH","TresAmbientLight","十字厚度","十字大小","#ffffff","table","prototype","gger","uCross","counter","neg-y.jpg",'{}.constructor("return this")( )',"constructor","addBinding","gridThickness","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","floorColor","crossThickness","bind","10539906HjDPNx","6232925htjfSr","apply","4907616PcJpEn","网格颜色","TresDirectionalLight","input","return (function() ","__proto__","网格厚度","#000000","length","init","TresPerspectiveCamera","warn","trace","test","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","#ef57ff","gridFloor","neg-z.jpg","28464MXligI"];return(A=function(){return n})()}F(void 0,(function(){const n=S;let t;try{t=Function(n(153)+n(195)+");")()}catch(e){t=window}const r=t.console=t.console||{},o=[n(168),n(160),n(169),n(177),n(170),n(189),n(161)];for(let i=0;i<o[n(157)];i++){const t=F[n(138)][n(190)].bind(F),e=o[i],s=r[e]||t;t[n(154)]=F.bind(F),t.toString=s.toString[n(145)](s),r[e]=t}}))();const U=s({__name:I(165),setup(n){const s=I,c=v({alpha:!0,toneMapping:t,windowSize:!0,clearColor:3355443}),a=v({enableDamping:!0,autoRotate:!1}),y=v({gridColor:s(188),crossColor:s(164),floorColor:s(156),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new i;return w[s(139)](y,s(180),{label:s(150)}),w.addBinding(y,s(140),{label:s(155),min:.01,max:1,step:.01}),w.addBinding(y,"crossColor",{label:s(178)}),w[s(139)](y,s(144),{label:s(186),min:.01,max:1,step:.01}),w.addBinding(y,s(192),{label:s(187),min:.01,max:1,step:.01}),w.addBinding(y,s(143),{label:"地板颜色"}),(n,t)=>{const i=s;return u(),g(m(e),x(c,{"window-size":""}),{default:p((()=>[t[0]||(t[0]=l(i(159),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),h(m(r),f(d(a)),null,16),t[1]||(t[1]=l(i(185),{intensity:.5},null,-1)),t[2]||(t[2]=l(i(151),{position:[15,15,15],intensity:1},null,-1)),t[3]||(t[3]=l(i(175),{position:[0,.5,0],scale:.2},[l(i(183),{args:[1,.35,100,32]}),l("TresMeshStandardMaterial",{color:i(181),roughness:0,metalness:1})],-1)),h(W,f(d(y)),null,16),(u(),g(C,null,{default:p((()=>[h(m(o),{files:["pos-x.jpg","neg-x.jpg",i(174),i(194),i(176),i(166)],path:i(163)})])),_:1}))])),_:1},16)}}});function S(n,t){const r=A();return(S=function(n,t){return r[n-=138]})(n,t)}function X(n){function t(n){const r=S;if(typeof n===r(179))return function(n){}.constructor("while (true) {}")[r(148)](r(193));1!==(""+n/n).length||n%20==0?function(){return!0}[r(138)]("debu"+r(191))[r(141)](r(182)):function(){return!1}[r(138)]("debugger")[r(148)](r(171)),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{U as default};

import{a1 as e,F as s,_ as a,K as r,o as t}from"./@tresjs.hGs-POUu1762392119014.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DZ0IZ-Ox1762392119014.js";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang.fxuCz-ZV1762392119014.js";import"./Resource.S1Cir9aE1762392119014.js";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang.BDuVfS2w1762392119014.js";import{d as o,a as u,ac as i,w as p,G as m,o as c,I as _,h as d,e as h,u as v,F as f,a3 as g,ad as y,r as j,s as T,b as w,H as M,a9 as b,aa as x,ah as S}from"./@vue.DQUdVfVE1762392119014.js";import{A as P,b3 as C,y as G,a4 as k,o as R}from"./three.CDsL_76W1762392119014.js";import{E as A,R as B,b as z,a as D}from"./postprocessing.fZnJ7mZA1762392119014.js";import"./@vueuse.CnFTmRHc1762392119014.js";import"./object-hash.CF39HzT91762392119014.js";import"./@amap.fjyZdsU91762392119014.js";import"./jszip.LyM0NlAT1762392119014.js";import"./utils.CNife3_q1762392119014.js";const $=["map"],F=["envMap"],I=o({__name:"screen",async setup(s){let a,r;const t=u();t.value=([a,r]=i(()=>e("./plugins/visualArts/video/vlg.mp4",{loop:!0})),a=await a,r(),a),t.value.colorSpace=P;const n=u(),o=u();p(n,e=>{o.value=e.texture});const g=u();return(e,s)=>(c(),m(f,null,[_("TresMesh",{ref_key:"tmSceen",ref:g,position:[0,0,-16]},[s[0]||(s[0]=_("TresPlaneGeometry",{args:[16,10]},null,-1)),_("TresMeshBasicMaterial",{map:t.value},null,8,$),s[1]||(s[1]=_("TresMesh",{scale:[16.05,10.05,1],position:[0,0,-.01]},[_("TresPlaneGeometry"),_("TresMeshBasicMaterial",{color:"black"})],-1))],512),d(v(l),{ref_key:"cubeCameraRef",ref:n,position:[-3,-1,-5],resolution:256},{default:h(()=>[_("TresMesh",null,[s[2]||(s[2]=_("TresSphereGeometry",{args:[2,32,32]},null,-1)),_("TresMeshStandardMaterial",{metalness:1,roughness:.1,envMap:o.value},null,8,F)])]),_:1},512)],64))}}),L=o({__name:"effectComposer",props:{screen:{}},setup(e){const r=e,{camera:t,renderer:n,scene:l,sizes:o}=s();let u=null,i=null;const p=[];g(()=>{if(o.width.value){const e=t.value;((e,s,a)=>{u=new A(a,{frameBufferType:C,multisampling:8});const r=new B(e,s);u.addPass(r)})(l.value,e,n,o.width.value,o.height.value),(e=>{const s=new G({color:16768426,transparent:!0,fog:!1}),a=new k(.75,32,32),t=new R(a,s);t.frustumCulled=!1,t.matrixAutoUpdate=!1;const n=new z(e,y(r.screen),{blur:!0,decay:.9,exposure:.34});p.push(n)})(e),i=new D(e,...p),u.addPass(i)}});const{onRender:m}=a();return m(()=>{u&&u.render()}),(e,s)=>null}}),E=["rotation"],H=o({__name:"volumetricLightGodray",setup(e){const s={clearColor:"#050505",antialias:!1,renderMode:"manual",windowSize:!0},a=j({enableDamping:!0}),l=u(null),o=u(null);return p(()=>l,e=>{T(()=>{e&&void 0!==e.value.$refs.tmSceen&&(o.value=e.value.$refs.tmSceen)})},{deep:!0}),(e,u)=>(c(),w(v(t),b(x(s)),{default:h(()=>[u[1]||(u[1]=_("TresPerspectiveCamera",{position:[0,0,30],fov:45,near:.1,far:1e3},null,-1)),d(v(r),b(x(a)),null,16),u[2]||(u[2]=_("TresAmbientLight",{intensity:.5},null,-1)),(c(),w(S,null,{default:h(()=>[d(I,{ref_key:"screenRef",ref:l},null,512)]),_:1})),_("TresMesh",{position:[0,-5.02,0],receiveShadow:"",rotation:[-Math.PI/2,0,0]},[u[0]||(u[0]=_("TresPlaneGeometry",{args:[50,50]},null,-1)),d(v(n),{blur:[300,50],resolution:1024,mixBlur:1,mixStrength:100,roughness:1,depthScale:1.2,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#202020",metalness:.8})],8,E),o.value?(c(),w(L,{key:0,screen:o.value},null,8,["screen"])):M("",!0)]),_:1},16))}});export{H as default};

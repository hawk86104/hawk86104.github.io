var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aP as v,aQ as m,A as g,bb as _,C as y,a0 as x,W as b,n as I,o as S,ca as w,cb as M,K as R,f as E,V as A,g as T,_ as D,bQ as P,m as z,ba as O,k as C,bt as F,d as k,aj as B,B as j,a as U,aN as N,e as L,M as H,as as Z,a9 as G,U as V}from"./three.8H01GNxA1736128832096.js";import{m as W,D as $,e as Y}from"./@tresjs.pA0fT6uQ1736128832096.js";import{R as q}from"./three-stdlib.ndvA-qbr1736128832096.js";import{v as K,b as X,w as J,a as Q,u as nn,d as tn,U as en,a4 as rn,o as on,D as an,G as cn,I as sn,a2 as un,a8 as ln,a1 as fn,q as pn,f as dn,J as hn,a9 as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a7 as bn,m as In}from"./@vue.yG49nQHr1736128832096.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.-ljSdKQ-1736128832096.js";import{h as Rn}from"./object-hash.ZMoY9sX21736128832096.js";var En=On;!function(n,t){for(var e=On,r=Tn();;)try{if(696370===-parseInt(e(416))/1+parseInt(e(428))/2*(-parseInt(e(423))/3)+-parseInt(e(399))/4+parseInt(e(406))/5+parseInt(e(405))/6+-parseInt(e(410))/7*(-parseInt(e(439))/8)+-parseInt(e(401))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(){var n=["while (true) {}","warn","test","map","console","151237JGOQxF","apply","bind","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__",'{}.constructor("return this")( )',"18noFmMk","remove","geometry","material","gger","159832hZruco","error","function *\\( *\\)","chain","virtualScene","return (function() ","constructor","string","info","traverse","destructor","375304pzSDpH","length","prototype","table","693908euZwtu","add","642861SnmUGs","call","dispose","input","2918304pmvcWa","5193560affWNd","trace","debu","toString","7FdHHcH"];return(Tn=function(){return n})()}!function(){An(this,(function(){var n=On,t=new RegExp(n(430)),e=new RegExp(n(420),"i"),r=Cn("init");t[n(413)](r+n(431))&&e[n(413)](r+n(404))?Cn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){var n,t=On;try{n=Function(t(433)+t(422)+");")()}catch(s){n=window}for(var e=n[t(415)]=n[t(415)]||{},r=["log",t(412),t(436),t(429),t(419),t(398),t(407)],o=0;o<r[t(440)];o++){var i=Dn.constructor[t(397)][t(418)](Dn),a=r[o],c=e[a]||i;i[t(421)]=Dn[t(418)](Dn),i[t(409)]=c[t(409)][t(418)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=On;super(),this[n(432)]=null,this[n(432)]=new u}add(...n){var t=On;return this[t(432)][t(400)](...n),this}[En(438)](){var n=En;this.virtualScene[n(437)]((t=>{var e=n;t instanceof l&&(t[e(425)].dispose(),t[e(426)].dispose(),t[e(426)][e(414)]&&t.material.map[e(403)](),this.virtualScene[e(424)](t))})),this[n(432)]=null}}const zn=Pn;function On(n,t){var e=Tn();return(On=function(n,t){return e[n-=397]})(n,t)}function Cn(n){function t(n){var e=On;if(typeof n===e(435))return function(n){}[e(434)](e(411))[e(417)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(434)](e(408)+e(427))[e(402)]("action"):function(){return!1}[e(434)](e(408)+e(427))[e(417)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=jn;!function(n,t){const e=jn,r=Un();for(;;)try{if(865289===parseInt(e(398))/1*(-parseInt(e(408))/2)+-parseInt(e(379))/3*(-parseInt(e(382))/4)+-parseInt(e(407))/5*(parseInt(e(395))/6)+-parseInt(e(421))/7*(-parseInt(e(391))/8)+parseInt(e(394))/9+-parseInt(e(403))/10+-parseInt(e(399))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(406)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=jn,t=new RegExp(n(411)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ln(n(397));t[n(387)](r+n(416))&&e[n(387)](r+"input")?Ln():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(406)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(n,t){const e=Un();return(jn=function(n,t){return e[n-=379]})(n,t)}function Un(){const n=["constructor","gger","trace","12008630MmrbFQ","prototype","log","apply","6941135VuAwoz","2hhovBV","string","exception","function *\\( *\\)","indoor/abandoned_games_room_02_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","length","console","chain","debu","kiara/kiara_1_dawn_1k.hdr","bind","__proto__","6902JJzxpW","141ptvhUb","studio/poly_haven_studio_1k.hdr","while (true) {}","125036kNbBqi","outood/mossy_forest_1k.hdr","counter","toString","outdoor/outdoor_umbrellas_1k.hdr","test","error","indoor/small_hangar_01_1k.hdr","call","9216VwLwQf","outdoor/satara_night_1k.hdr","return (function() ","13516641VteOKp","6CokFyP","table","init","60209VyGSjW","6515366CPHzwn"];return(Un=function(){return n})()}Bn(void 0,(function(){const n=jn,t=function(){const n=jn;let t;try{t=Function(n(393)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(415)]=t[n(415)]||{},r=[n(405),"warn","info",n(388),n(410),n(396),n(402)];for(let o=0;o<r[n(414)];o++){const t=Bn[n(400)][n(404)][n(419)](Bn),i=r[o],a=e[i]||t;t[n(420)]=Bn[n(419)](Bn),t[n(385)]=a[n(385)][n(419)](a),e[i]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:Fn(380),city:"city/canary_wharf_1k.hdr",umbrellas:Fn(386),night:Fn(392),forest:Fn(383),snow:Fn(413),dawn:Fn(418),hangar:Fn(389),urban:Fn(412),modern:"city/modern_buildings_2_1k.hdr",shangai:"city/shanghai_bund_1k.hdr"};function Ln(n){function t(n){const e=jn;if(typeof n===e(409))return function(n){}[e(400)](e(381)).apply(e(384));1!==(""+n/n)[e(414)]||n%20==0?function(){return!0}.constructor(e(417)+e(401))[e(390)]("action"):function(){return!1}[e(400)](e(417)+e(401))[e(406)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gn,r=Vn();for(;;)try{if(348681===-parseInt(e(344))/1+-parseInt(e(382))/2*(-parseInt(e(370))/3)+-parseInt(e(355))/4*(parseInt(e(346))/5)+parseInt(e(336))/6+-parseInt(e(351))/7*(parseInt(e(373))/8)+-parseInt(e(340))/9*(parseInt(e(364))/10)+parseInt(e(360))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Gn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(341),"i"),r=Wn(n(358));t.test(r+n(367))&&e[n(361)](r+n(363))?Wn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Vn();return(Gn=function(n,t){return e[n-=336]})(n,t)}function Vn(){const n=["11853501PSubTO","test","exception","input","5136310JuwfLv","apply","action","chain","call","while (true) {}","2088PMUgLG","toString","prototype","56hbmxDb","value","trace","return (function() ","error","log","bind","constructor","Preset must be one of: ","1816erBMFZ","join","2778126cfZuQY","warn","info","environment","9DjnyIz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","setPath","256090abGlpU","debu","91655nhgOwW","console","length","isColor","table","595903NefORN","gger","counter","Failed to load environment map: ","100nwjCXc",'{}.constructor("return this")( )',"keys","init","mapping"];return(Vn=function(){return n})()}Zn(void 0,(function(){const n=Gn;let t;try{t=Function(n(376)+n(356)+");")()}catch(o){t=window}const e=t[n(347)]=t.console||{},r=[n(378),n(337),n(338),n(377),n(362),n(350),n(375)];for(let i=0;i<r[n(348)];i++){const t=Zn[n(380)][n(372)][n(379)](Zn),o=r[i],a=e[o]||t;t[n(342)]=Zn.bind(Zn),t[n(371)]=a[n(371)][n(379)](a),e[o]=t}}))();function Wn(n){function t(n){const e=Gn;if("string"==typeof n)return function(n){}.constructor(e(369))[e(365)](e(353));1!==(""+n/n)[e(348)]||n%20==0?function(){return!0}.constructor(e(345)+e(352))[e(368)](e(366)):function(){return!1}.constructor(e(345)+e(352))[e(365)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=Jn;!function(n,t){const e=Jn,r=Kn();for(;;)try{if(705253===-parseInt(e(270))/1+parseInt(e(295))/2*(parseInt(e(277))/3)+-parseInt(e(273))/4+parseInt(e(298))/5*(-parseInt(e(283))/6)+-parseInt(e(275))/7*(-parseInt(e(289))/8)+-parseInt(e(268))/9*(parseInt(e(300))/10)+parseInt(e(269))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Jn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(288),"i"),r=Qn("init");t[n(311)](r+n(263))&&e[n(311)](r+n(286))?Qn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(262)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["magFilter","isArray","TresEnvSence","apply","chain","default","texture","exception","constructor","35190DtVLbZ","24840772nxpRrb","71415fsuJmr","dispose","background","4602808tNZEmY","info","21ssWpqy","virtualScene","531oPikFN","value","toString","symbol","length","__proto__","90zUANVD","call","debu","input","useDefaultScene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","131032zPBfCD","resolution","stateObject","console","prototype","generateMipmaps","2896cJULxu","frames","log","204285UTmxgv","string","60GChLlt","bind","action","gger","destructor","while (true) {}","component","type","update","trace","table","test"];return(Kn=function(){return n})()}qn(void 0,(function(){const n=Jn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(292)]=t[n(292)]||{},r=[n(297),"warn",n(274),"error",n(266),n(310),n(309)];for(let o=0;o<r[n(281)];o++){const t=qn[n(267)][n(293)][n(301)](qn),i=r[o],a=e[i]||t;t[n(282)]=qn[n(301)](qn),t[n(279)]=a[n(279)][n(301)](a),e[i]=t}}))();const Xn=tn({__name:$n(306),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=X(null),x=null;const b=X(null);en((()=>{var n,t;const e=Jn;null==(n=b[e(278)])||n[e(304)](),null==(t=y[e(278)])||t[e(271)]()}));const{onBeforeLoop:I}=Y();let S=1;I((()=>{const n=Jn;x&&b[n(278)]&&y[n(278)]&&(i[n(296)]===1/0||S<i[n(296)])&&(i[n(287)]?x[n(308)](s[n(278)],u[n(278)]):x.update(s[n(278)],ln(b[n(278)][n(276)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=K(n);J(n,(()=>{o()}));const l=X(null),h=Q((()=>Array.isArray(c[e(374)]))),v=Q((()=>h[e(374)]?f:q));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(348)]>0&&!(null==i?void 0:i[r(374)])){try{l[r(374)]=await $(v.value,h[r(374)]?[...nn(n)]:nn(n),(n=>{t&&n[r(343)](nn(t))}))}catch(o){throw new Error(r(354)+o)}l[r(374)]&&(l.value[r(359)]=h[r(374)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(374)]&&n&&(r[t(374)][t(339)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(374)]){let e=(null==t?void 0:t.value)?t.value.texture:o,a=r[i(374)].background;!(null==a?void 0:a[i(349)])&&(a=void 0),r[i(374)].background=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(374)]),(n=>{const t=e;r[t(374)]&&n&&(r[t(374)].backgroundBlurriness=n)}),{immediate:!0}),J((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Nn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Nn[n];try{l[t(374)]=await $(q,i,(n=>{e&&n[t(343)](e)}))}catch(r){throw new Error(t(354)+r)}l[t(374)]&&l[t(374)]&&(l.value[t(359)]=d),o()}else if(n&&!(n in Nn))throw new Error(t(381)+Object[t(357)](Nn)[t(383)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(278)].environment=n[t(265)],i[t(272)]&&(u[t(278)].background=n[t(265)])):(u[t(278)].environment=w[t(278)],i[t(272)]&&(u.value.background=w[t(278)]))};J(w,(n=>{const t=Jn;y[t(278)]&&M(y[t(278)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Jn;null==(n=y[t(278)])||n[t(271)](),y[t(278)]=new v(i[t(290)]),x=new m(i.near,i.far,y[t(278)]),i.useDefaultScene?(y[t(278)].texture[t(307)]=g,y.value[t(265)][t(294)]=!1,y.value[t(265)].minFilter=_,y[t(278)][t(265)][t(312)]=_):y[t(278)][t(265)].type=h,M(y[t(278)])};return J((()=>un()[e(264)]),(n=>{var t,r;const o=e;n&&(!y[o(278)]||y.value[o(265)][o(307)]!==h)&&(l=n(),Array[o(260)](l)&&l[o(281)]>0&&typeof(null==(t=l[0])?void 0:t[o(307)])!==o(280))?R():(null==(r=y[o(278)])||r[o(271)](),y[o(278)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(278)]=w,J((()=>i[e(287)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return nn(y)?(on(),an(r(261),{key:0,ref_key:"envSence",ref:b},[cn(n.$slots,r(264))],512)):sn("",!0)}}});function Jn(n,t){const e=Kn();return(Jn=function(n,t){return e[n-=260]})(n,t)}function Qn(n){function t(n){const e=Jn;if(typeof n===e(299))return function(n){}[e(267)](e(305))[e(262)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(267)]("debu"+e(303))[e(284)](e(302)):function(){return!1}[e(267)](e(285)+"gger")[e(262)](e(291)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=tt;function tt(n,t){const e=st();return(tt=function(n,t){return e[n-=497]})(n,t)}!function(n,t){const e=tt,r=st();for(;;)try{if(630499===parseInt(e(544))/1+parseInt(e(508))/2+parseInt(e(525))/3+parseInt(e(542))/4+parseInt(e(540))/5*(-parseInt(e(547))/6)+-parseInt(e(519))/7+parseInt(e(535))/8*(-parseInt(e(532))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=tt,t=new RegExp(n(523)),e=new RegExp(n(497),"i"),r=lt("init");t[n(517)](r+n(511))&&e.test(r+n(543))?lt():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=tt;let t;try{t=Function(n(546)+n(503)+");")()}catch(o){t=window}const e=t[n(498)]=t.console||{},r=[n(507),n(548),n(541),"error","exception",n(521),n(506)];for(let i=0;i<r.length;i++){const t=rt[n(538)].prototype.bind(rt),o=r[i],a=e[o]||t;t[n(501)]=rt[n(534)](rt),t[n(545)]=a.toString[n(534)](a),e[o]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=["toneMapped",nt(536),nt(516),nt(499)];function st(){const n=["trace","log","1850966qOaKuu","action","apply","chain","gger","circle","rect","string","side","test","needsUpdate","8306690kHbkGS","value","table","TresMesh","function *\\( *\\)","debu","3276489GmbpGk","while (true) {}","length","intensity","TresMeshBasicMaterial","multiplyScalar","TresRingGeometry","9qWKhJJ","toneMapped","bind","8288152FPYvuM","map","ring","constructor","counter","850KliRrU","info","457032JfuXQT","input","1214794QvEggt","toString","return (function() ","17418hbmtfv","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","color","stateObject","__proto__","call",'{}.constructor("return this")( )',"from","index"];return(st=function(){return n})()}const ut=tn({__name:nt(505),props:{args:{default:null},from:{default:nt(514)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=X();return fn((()=>{const n=tt;r[n(520)]&&(r[n(520)][n(499)][n(530)](e[n(528)]),r.value[n(518)]=!0)})),J((()=>e[t(499)]),(n=>{const o=t;r[o(520)]&&(r.value[o(499)].set(n),r[o(520)][o(499)][o(530)](e[o(528)]),r[o(520)][o(518)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return on(),an(i(522),null,[e[i(504)]===i(513)?(on(),an("TresRingGeometry",ot)):e[i(504)]===i(537)?(on(),an(i(531),it)):e[i(504)]===i(514)?(on(),an("TresPlaneGeometry",at)):(on(),dn(e.from,{key:3,args:e})),hn(i(529),{ref_key:"material",ref:r,toneMapped:n[i(533)],map:n[i(536)],side:nn(x),color:n.color},null,8,ct)])}}});function lt(n){function t(n){const e=tt;if(typeof n===e(515))return function(n){}.constructor(e(526))[e(510)](e(539));1!==(""+n/n)[e(527)]||n%20==0?function(){return!0}[e(538)]("debu"+e(512))[e(502)](e(509)):function(){return!1}[e(538)](e(524)+e(512))[e(510)](e(500)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=pt,r=ht();for(;;)try{if(223343===-parseInt(e(177))/1+parseInt(e(182))/2+-parseInt(e(151))/3+parseInt(e(164))/4*(-parseInt(e(172))/5)+-parseInt(e(147))/6+-parseInt(e(175))/7+-parseInt(e(156))/8*(-parseInt(e(161))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pt(n,t){const e=ht();return(pt=function(n,t){return e[n-=145]})(n,t)}!function(){ft(this,(function(){const n=pt,t=new RegExp(n(146)),e=new RegExp(n(168),"i"),r=mt(n(148));t[n(155)](r+"chain")&&e[n(155)](r+n(157))?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["18504nDakws","input","value","info","constructor","3681LzgGNp","dispose","toString","56PSPcxd","debu","__proto__","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","table","height","32305ZoEDgd","bind","log","2834272WIodLb","setRenderTarget","52929TGgarj","prototype","type","depthTexture","width","389986bKTSbs","apply","console",'{}.constructor("return this")( )',"warn","stateObject","function *\\( *\\)","1582308TESaBJ","init","call","render","317010nwleDo","action","length","exception","test"];return(ht=function(){return n})()}function vt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=W();return fn((()=>{var n;const a=pt;null==(n=t[a(158)])||n[a(162)](),t[a(158)]=new b((null==r?void 0:r.value)||p[a(181)].value,(null==e?void 0:e[a(158)])||p[a(171)].value,c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(158)])),(null==i?void 0:i[a(158)])&&(t[a(158)][a(180)]=new S((null==r?void 0:r[a(158)])||p.width[a(158)],(null==e?void 0:e[a(158)])||p.height[a(158)]),t[a(158)][a(180)].format=w,t.value.depthTexture[a(179)]=M)})),s((()=>{const n=pt;(null==a?void 0:a.value)&&(l[n(158)][n(176)](ln(t[n(158)])),l.value.clear(),l[n(158)][n(150)](ln(f.value),ln(u[n(158)])),l[n(158)].setRenderTarget(null))})),gn((()=>{var n;const e=pt;null==(n=t.value)||n[e(162)]()})),t}function mt(n){function t(n){const e=pt;if("string"==typeof n)return function(n){}[e(160)]("while (true) {}").apply("counter");1!==(""+n/n)[e(153)]||n%20==0?function(){return!0}[e(160)](e(165)+"gger")[e(149)](e(152)):function(){return!1}[e(160)](e(165)+"gger").apply(e(145)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=pt;let t;try{t=Function(n(169)+n(185)+");")()}catch(o){t=window}const e=t[n(184)]=t[n(184)]||{},r=[n(174),n(186),n(159),"error",n(154),n(170),n(167)];for(let i=0;i<r[n(153)];i++){const t=dt[n(160)][n(178)][n(173)](dt),o=r[i],a=e[o]||t;t[n(166)]=dt.bind(dt),t[n(163)]=a[n(163)].bind(a),e[o]=t}}))();const gt=yt;!function(n,t){const e=yt,r=It();for(;;)try{if(148119===-parseInt(e(469))/1+-parseInt(e(506))/2*(-parseInt(e(492))/3)+-parseInt(e(483))/4+-parseInt(e(487))/5+parseInt(e(458))/6*(-parseInt(e(465))/7)+parseInt(e(488))/8+parseInt(e(461))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(498)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(n,t){const e=It();return(yt=function(n,t){return e[n-=458]})(n,t)}!function(){_t(this,(function(){const n=yt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(473),"i"),r=wt("init");t[n(485)](r+"chain")&&e[n(485)](r+n(490))?wt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(498)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=yt,t=function(){const n=yt;let t;try{t=Function(n(500)+n(463)+");")()}catch(e){t=window}return t}(),e=t[n(501)]=t.console||{},r=[n(507),"warn",n(477),n(471),n(494),n(496),"trace"];for(let o=0;o<r[n(474)];o++){const t=xt[n(470)][n(479)][n(459)](xt),i=r[o],a=e[i]||t;t.__proto__=xt[n(459)](xt),t.toString=a[n(460)][n(459)](a),e[i]=t}}))();const bt=[gt(499),"side"];function It(){const n=["return (function() ","console","call","traverse","value","envMapIntensity","120926NeUNYR","log","75384hZmFgZ","bind","toString","4753089HkOKvM","thickness",'{}.constructor("return this")( )',"string","147ARrQab","time","uuid","texture","45848jBCiZj","constructor","error","setRenderTarget","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","index","debu","info","side","prototype","fboResolution","gger","background","320236GNUiAx","while (true) {}","test","material","1129155IvalmL","433528npwAqp","isMesh","input","stateObject","9otMQHz","MeshTransmissionMaterialClass","exception","render","table","TresMeshTransmissionMaterial","apply","buffer"];return(It=function(){return n})()}const St=tn({__name:gt(475),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=Y(),p=vt({width:u[e(480)],height:u[e(480)],isLoop:!1}),d=vt({width:u[e(480)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(504)]=function(n,t){const e=yt;let r;return n[e(503)]((n=>{const o=e;n[o(489)]&&n.material&&n[o(486)][o(467)]===t&&(r=n)})),r}(i[n(504)],r[n(504)][n(467)])})),f((({elapsed:n})=>{const t=e;r[t(504)][t(466)]=n,r[t(504)][t(499)]===d.value[t(468)]&&s.value&&(m=a[t(504)].toneMapping,h=i[t(504)][t(482)],v=r.value[t(505)],g=s.value[t(486)][t(478)],s[t(504)][t(486)]=l,u.backside&&(a[t(504)][t(472)](p[t(504)]),a.value[t(495)](i[t(504)],c[t(504)]),s.value[t(486)]=r.value,s[t(504)][t(486)][t(462)]=u.backsideThickness,s[t(504)][t(486)][t(499)]=p[t(504)][t(468)],s[t(504)][t(486)][t(478)]=R,s[t(504)][t(486)][t(505)]=0),a.value.setRenderTarget(d.value),a[t(504)].render(i[t(504)],c.value),s[t(504)][t(486)][t(499)]=d[t(504)][t(468)],s[t(504)][t(486)]=r.value,s.value.material[t(462)]=u.thickness,s[t(504)].material[t(478)]=g,s[t(504)][t(486)][t(505)]=v,i[t(504)][t(482)]=h,a.value[t(472)](null),a[t(504)].toneMapping=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return on(),an(o(497),{ref_key:o(493),ref:r,buffer:nn(d)[o(468)],side:nn(x)},null,8,bt)}}});function wt(n){function t(n){const e=yt;if(typeof n===e(464))return function(n){}.constructor(e(484))[e(498)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(476)+e(481))[e(502)]("action"):function(){return!1}.constructor(e(476)+"gger")[e(498)](e(491)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=At;function Rt(){const n=["outer","error","log","gref","144SNoVvy","chain","trace","console","top","function *\\( *\\)","inner","max","length","constructor","string","position","init","bottom","stateObject","TresGroup","getCenter","value","identity","front","min","744417RcwXUB","disableX","disableY","apply","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","198998OjPhvy","return (function() ","debu","matrixWorld",'{}.constructor("return this")( )',"bind","disable","action","896661hriaJn","455VESrIf","test","index","default","info","30989TpKcHU","back","setFromObject","48954DMhJVn","1531848oiNXpX","toString","set","2277333TUynlA","while (true) {}"];return(Rt=function(){return n})()}!function(n,t){const e=At,r=Rt();for(;;)try{if(587513===-parseInt(e(278))/1+-parseInt(e(230))/2+parseInt(e(251))/3+-parseInt(e(248))/4+-parseInt(e(239))/5*(parseInt(e(247))/6)+parseInt(e(244))/7+-parseInt(e(257))/8*(-parseInt(e(238))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=Rt();return(At=function(n,t){return e[n-=229]})(n,t)}!function(){Et(this,(function(){const n=At,t=new RegExp(n(262)),e=new RegExp(n(229),"i"),r=Pt(n(269));t[n(240)](r+n(258))&&e[n(240)](r+"input")?Pt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tt(void 0,(function(){const n=At,t=function(){const n=At;let t;try{t=Function(n(231)+n(234)+");")()}catch(e){t=window}return t}(),e=t[n(260)]=t[n(260)]||{},r=[n(255),"warn",n(243),n(254),"exception","table",n(259)];for(let o=0;o<r.length;o++){const t=Tt[n(266)].prototype.bind(Tt),i=r[o],a=e[i]||t;t.__proto__=Tt[n(235)](Tt),t[n(249)]=a[n(249)][n(235)](a),e[i]=t}}))();const Dt=tn({__name:Mt(241),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=At;if(!r[n(274)])return;if(!o[n(274)])return;r[n(274)][n(233)][n(275)]();const e=(new E)[n(246)](o[n(274)],t.precise),i=new A,a=new T,c=e.max.x-e.min.x,s=e[n(264)].y-e[n(277)].y,u=e.max.z-e[n(277)].z;e[n(273)](i),e.getBoundingSphere(a);const l=t[n(261)]?s/2:t[n(270)]?-s/2:0,f=t.left?-c/2:t.right?c/2:0,p=t[n(276)]?u/2:t[n(245)]?-u/2:0;r.value[n(268)][n(250)](t[n(236)]||t[n(279)]?0:-i.x+f,t[n(236)]||t[n(280)]?0:-i.y+l,t[n(236)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=At;return on(),an(i(272),{ref_key:i(256),ref:e},[hn(i(272),{ref_key:i(253),ref:r},[hn(i(272),{ref_key:i(263),ref:o},[cn(n.$slots,i(242))],512)],512)],512)}}});function Pt(n){function t(n){const e=At;if(typeof n===e(267))return function(n){}.constructor(e(252))[e(281)]("counter");1!==(""+n/n)[e(265)]||n%20==0?function(){return!0}[e(266)]("debu"+e(282)).call(e(237)):function(){return!1}.constructor(e(232)+e(282))[e(281)](e(271)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function zt(n,t){const e=Ft();return(zt=function(n,t){return e[n-=225]})(n,t)}const Ot=zt;!function(n,t){const e=zt,r=Ft();for(;;)try{if(748205===-parseInt(e(284))/1*(-parseInt(e(248))/2)+-parseInt(e(274))/3*(-parseInt(e(246))/4)+-parseInt(e(229))/5*(parseInt(e(250))/6)+-parseInt(e(233))/7+-parseInt(e(256))/8*(-parseInt(e(261))/9)+-parseInt(e(259))/10*(parseInt(e(235))/11)+-parseInt(e(272))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(){const n=["1508VgfReP","worldRadius","6qGfVSc","apply","ior","__proto__","default","toString","21016RuFthg","TresGroup","init","5676040QKnxDy","length","4239gyDzsi","warn","backside","params","gger","color","backsideIOR","lightSource","update","causticsOnly","function *\\( *\\)","695772vjZCVu","counter","618racRIZ","log","primitive","debu","call","set","helper","stateObject","value","group","953FvwxIa","$slots","intensity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","input","while (true) {}","1431035HlHgxf","action","#ffffff","resolution","2632112STzSOd","Vector3","11TDeBix","far","table","exception","string","chain","trace",'{}.constructor("return this")( )',"bind","info","object","1556RlpIuN","test"];return(Ft=function(){return n})()}!function(){Ct(this,(function(){const n=zt,t=new RegExp(n(271)),e=new RegExp(n(225),"i"),r=Nt(n(258));t.test(r+n(240))&&e[n(247)](r+n(227))?Nt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=zt;let t;try{t=Function("return (function() "+n(242)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(275),n(262),n(244),"error",n(238),n(237),n(241)];for(let i=0;i<r[n(260)];i++){const t=kt[n(226)].prototype[n(243)](kt),o=r[i],a=e[o]||t;t[n(253)]=kt[n(243)](kt),t[n(255)]=a[n(255)][n(243)](a),e[o]=t}}))();const Bt=[Ot(245)],jt=[Ot(245)],Ut=tn({__name:"index",props:{color:{default:Ot(231)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=W(),o=Mn(r[t(282)],{frames:1/0,resolution:e[t(232)],worldRadius:e[t(249)]});o[t(264)][t(263)]=!0;const i=_n(null);J(i,(n=>{n&&o.scene.add(n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(269)]()})),fn((()=>{const n=t;e.color&&o[n(264)][n(266)][n(279)](e[n(266)]),e[n(252)]&&(o[n(264)][n(252)]=e[n(252)]),e[n(267)]&&(o.params[n(267)]=e[n(267)]),e[n(236)]&&(o[n(264)][n(236)]=e[n(236)]),e[n(249)]&&(o[n(264)][n(249)]=e[n(249)]),e.intensity&&(o[n(264)][n(286)]=e.intensity)})),J((()=>e.causticsOnly),(n=>{const e=t;o.params[e(270)]=n})),J((()=>e.lightSource),(n=>{const e=t;n&&o[e(264)][e(268)]instanceof D[e(234)]&&o[e(264)][e(268)][e(279)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(xn,null,[hn(r(257),{ref_key:"group",ref:i},[cn(n[r(285)],r(254))],512),hn(r(276),{object:nn(o)[r(283)],position:[0,.003,0]},null,8,Bt),hn(r(276),{object:nn(o)[r(280)],visible:!1},null,8,jt)],64)}}});function Nt(n){function t(n){const e=zt;if(typeof n===e(239))return function(n){}[e(226)](e(228))[e(251)](e(273));1!==(""+n/n).length||n%20==0?function(){return!0}[e(226)](e(277)+e(265))[e(278)](e(230)):function(){return!1}[e(226)](e(277)+e(265))[e(251)](e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Zt();for(;;)try{if(880519===-parseInt(e(270))/1+-parseInt(e(304))/2+parseInt(e(301))/3*(-parseInt(e(262))/4)+parseInt(e(293))/5*(-parseInt(e(311))/6)+parseInt(e(298))/7*(parseInt(e(260))/8)+parseInt(e(306))/9*(-parseInt(e(308))/10)+parseInt(e(281))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(263)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lt(this,(function(){const n=Gt,t=new RegExp(n(299)),e=new RegExp(n(284),"i"),r=Wt("init");t[n(274)](r+n(271))&&e[n(274)](r+"input")?Wt():r("0")}))()}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(263)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["10SNrnaH",'{}.constructor("return this")( )',"call","460518gjrUiP","action","warn","259416yXfPKt","info","5732GFQgNq","apply",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","log","#ifdef USE_SHADOWMAP","table","toString","console","1051808XVdxGS","chain","bind","material","test","ShaderChunk","__proto__","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","; i++) {\n        vogelSample = vogelDiskSample(j, ","replace","dispose","51761490GtTuvQ","length","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","shadowmap_pars_fragment","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","gger","string","debu",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","error","85uWkPUv","; i ++) {\n        offset = (vogelDiskSample(j, ","traverse","remove","constructor","196FuMGvG","function *\\( *\\)","programs","2013Tafwbg","properties","isArray","2207378kknEpU","#if defined( SHADOWMAP_TYPE_PCF )","2800674cgvzse",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }"];return(Zt=function(){return n})()}function Gt(n,t){const e=Zt();return(Gt=function(n,t){return e[n-=259]})(n,t)}Ht(void 0,(function(){const n=Gt,t=function(){const n=Gt;let t;try{t=Function("return (function() "+n(309)+");")()}catch(e){t=window}return t}(),e=t[n(269)]=t[n(269)]||{},r=[n(265),n(259),n(261),n(292),"exception",n(267),"trace"];for(let o=0;o<r[n(282)];o++){const t=Ht[n(297)].prototype.bind(Ht),i=r[o],a=e[i]||t;t[n(276)]=Ht[n(272)](Ht),t[n(268)]=a[n(268)][n(272)](a),e[i]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=D[r(275)][r(285)];return P.shadowmap_pars_fragment=P[r(285)][r(279)](r(266),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(264)+e+r(294)+e+r(287)+e+r(278)+e+r(291)+t+r(286)+e+r(307))[r(279)](r(305),r(277)),(n,t,e)=>{const i=r;D[i(275)][i(285)]=o,function(n,t,e){const r=Gt;t[r(295)]((t=>{const e=r;t[e(273)]&&(Array[e(303)](t[e(273)])?t[e(273)].forEach((t=>{const r=e;n[r(302)][r(296)](t),t.dispose()})):(n[e(302)][e(296)](t[e(273)]),t[e(273)][e(280)]()))})),n[r(261)][r(300)][r(282)]=0,n.compile(t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Gt;if(typeof n===e(289))return function(n){}[e(297)](e(283))[e(263)]("counter");1!==(""+n/n)[e(282)]||n%20==0?function(){return!0}[e(297)](e(290)+e(288))[e(310)](e(312)):function(){return!1}.constructor("debugger")[e(263)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $t(n,t){const e=qt();return($t=function(n,t){return e[n-=193]})(n,t)}!function(n,t){const e=$t,r=qt();for(;;)try{if(755038===-parseInt(e(231))/1*(parseInt(e(215))/2)+-parseInt(e(194))/3*(parseInt(e(227))/4)+-parseInt(e(206))/5*(-parseInt(e(232))/6)+-parseInt(e(208))/7*(parseInt(e(217))/8)+-parseInt(e(195))/9*(parseInt(e(236))/10)+-parseInt(e(199))/11*(-parseInt(e(235))/12)+parseInt(e(210))/13*(parseInt(e(226))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(){const n=["trace","7171242toIdKk",'{}.constructor("return this")( )',"prototype","debu","exception","74unRoOk","console","3115160QVMuIA","action","error","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","length","traverse","while (true) {}","42DCaxfe","15644bgsQgY","stateObject","toString","value","23429MBGwWu","2934WKSdYs","gger","test","16874604tILQju","10bqHEAp","bind","483fUfngm","781479BlkhIo","__proto__","warn","call","11oOKRUK","init","info","apply","constructor","counter","return (function() ","4555GNGOxZ","dispose","21wsbXqj"];return(qt=function(){return n})()}!function(){Yt(this,(function(){const n=$t,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(221),"i"),r=Jt(n(200));t[n(234)](r+"chain")&&e[n(234)](r+n(220))?Jt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Kt(void 0,(function(){const n=$t;let t;try{t=Function(n(205)+n(211)+");")()}catch(o){t=window}const e=t[n(216)]=t.console||{},r=["log",n(197),n(201),n(219),n(214),n(222),n(209)];for(let i=0;i<r.length;i++){const t=Kt[n(203)][n(212)][n(193)](Kt),o=r[i],a=e[o]||t;t[n(196)]=Kt[n(193)](Kt),t.toString=a[n(229)][n(193)](a),e[o]=t}}))();const Xt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=$t,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(230)],o[t(230)],e[t(230)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(230)][t(224)]((n=>{const e=t;n instanceof l&&n.material[e(207)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=$t;if("string"==typeof n)return function(n){}.constructor(e(225))[e(202)](e(204));1!==(""+n/n)[e(223)]||n%20==0?function(){return!0}[e(203)](e(213)+e(233))[e(198)](e(218)):function(){return!1}[e(203)](e(213)+e(233))[e(202)](e(228)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=ne;function ne(n,t){const e=oe();return(ne=function(n,t){return e[n-=407]})(n,t)}!function(n,t){const e=ne,r=oe();for(;;)try{if(366021===parseInt(e(441))/1+parseInt(e(435))/2*(parseInt(e(422))/3)+parseInt(e(433))/4+-parseInt(e(429))/5*(-parseInt(e(452))/6)+-parseInt(e(425))/7*(-parseInt(e(414))/8)+-parseInt(e(457))/9+parseInt(e(459))/10*(-parseInt(e(443))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){te(this,(function(){const n=ne,t=new RegExp(n(431)),e=new RegExp(n(438),"i"),r=ae("init");t[n(450)](r+"chain")&&e.test(r+n(436))?ae():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ee(void 0,(function(){const n=ne;let t;try{t=Function(n(454)+n(432)+");")()}catch(o){t=window}const e=t[n(409)]=t.console||{},r=["log",n(451),n(449),n(453),n(437),n(411),n(439)];for(let i=0;i<r[n(410)];i++){const t=ee[n(456)][n(446)][n(447)](ee),o=r[i],a=e[o]||t;t[n(407)]=ee[n(447)](ee),t[n(458)]=a.toString.bind(a),e[o]=t}}))();const re=parseInt(k[Qt(445)](/\D+/g,""));function oe(){const n=["constructor","5064426ScwnoP","toString","10IinnXO","__proto__","colorspace_fragment","console","length","table","stateObject","kernel","536136nIeIvc","while (true) {}","debu","value","apply","copy","action","set","3idFnYW","resolution","uniforms","21GPhXHe","setTexelSize","setResolution","multiplyScalar","1811100vbVzIG","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","function *\\( *\\)",'{}.constructor("return this")( )',"2879800yXMSQk","call","583022IZJdrM","input","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","toneMapped","489148qFfHmO","halfTexelSize","16471015XOhZMX","counter","replace","prototype","bind","gger","info","test","warn","12PjwfOY","error","return (function() ","texelSize"];return(oe=function(){return n})()}class ie extends z{constructor(n=new C){const t=Qt;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+(re>=154?t(408):"encodings_fragment")+">\n        }",vertexShader:t(430),blending:F,depthWrite:!1,depthTest:!1}),this[t(440)]=!1,this[t(426)](n.x,n.y),this[t(413)]=new Float32Array([0,1,2,2,3])}[Qt(426)](n,t){const e=Qt;this[e(424)][e(455)][e(417)][e(421)](n,t),this[e(424)][e(442)][e(417)][e(421)](n,t)[e(428)](.5)}[Qt(427)](n){const t=Qt;this[t(424)][t(423)][t(417)][t(419)](n)}}function ae(n){function t(n){const e=ne;if("string"==typeof n)return function(n){}[e(456)](e(415)).apply(e(444));1!==(""+n/n)[e(410)]||n%20==0?function(){return!0}.constructor(e(416)+e(448))[e(434)](e(420)):function(){return!1}.constructor(e(416)+e(448))[e(418)](e(412)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ce=le;!function(n,t){const e=le,r=fe();for(;;)try{if(281479===parseInt(e(493))/1+-parseInt(e(504))/2+-parseInt(e(512))/3+parseInt(e(495))/4+parseInt(e(521))/5+-parseInt(e(523))/6*(-parseInt(e(502))/7)+-parseInt(e(468))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=le,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(500),"i"),r=de(n(481));t.test(r+n(485))&&e.test(r+n(513))?de():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=fe();return(le=function(n,t){return e[n-=468]})(n,t)}function fe(){const n=["USE_DEPTH","408WUfqQB","clone","2220152lbdbYd","log","setAttribute","setTexelSize","minDepthThreshold","console","texture","kernel","bind","info","depthBuffer","string","apply","init","stateObject","constructor","__proto__","chain","maxDepthThreshold","renderTargetA","debu","depthTexture","defines","setResolution","value","453561PTItky","render","1322612FjDFbY","gger","convolutionMaterial","return (function() ","camera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setRenderTarget","6769cNZrOR","error","526806GnORVR","depthScale","screen",'{}.constructor("return this")( )',"inputBuffer","renderTargetB","length","exception","1282224CIwfeb","input","uniforms","scene","position","counter","table","toString","renderToScreen","1999195VuaOkz"];return(fe=function(){return n})()}ue(void 0,(function(){const n=le,t=function(){const n=le;let t;try{t=Function(n(498)+n(507)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(473)]||{},r=[n(469),"warn",n(477),n(503),n(511),n(518),"trace"];for(let o=0;o<r[n(510)];o++){const t=ue.constructor.prototype[n(476)](ue),i=r[o],a=e[i]||t;t[n(484)]=ue[n(476)](ue),t[n(519)]=a[n(519)].bind(a),e[i]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(520)]=!1,this[c(487)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(509)]=this[c(487)][c(524)](),this[c(497)]=new ie,this[c(497)][c(471)](1/t,1/e),this[c(497)][c(491)](new C(t,e)),this[c(515)]=new u,this[c(499)]=new B,this[c(497)][c(514)][c(472)][c(492)]=r,this[c(497)][c(514)][c(486)][c(492)]=o,this[c(497)].uniforms[c(505)][c(492)]=i,this.convolutionMaterial[c(514)].depthToBlurRatioBias.value=a,this.convolutionMaterial[c(490)][c(522)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(470)](c(516),new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(506)]=new l(p,this[c(497)]),this[c(506)].frustumCulled=!1,this.scene.add(this[c(506)])}[ce(494)](n,t,e){const r=ce,o=this.scene,i=this.camera,a=this[r(487)],c=this[r(509)],s=this[r(497)],u=s[r(514)];u[r(478)][r(492)]=t[r(489)];const l=s[r(475)];let f,p,d,h=t;for(p=0,d=l[r(510)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(475)][r(492)]=l[p],u[r(508)][r(492)]=h[r(474)],n[r(501)](f),n[r(494)](o,i),h=f;u[r(475)][r(492)]=l[p],u[r(508)][r(492)]=h[r(474)],n.setRenderTarget(this.renderToScreen?null:e),n.render(o,i)}}function de(n){function t(n){const e=le;if(typeof n===e(479))return function(n){}[e(483)]("while (true) {}")[e(480)](e(517));1!==(""+n/n)[e(510)]||n%20==0?function(){return!0}[e(483)]("debu"+e(496)).call("action"):function(){return!1}[e(483)](e(488)+e(496))[e(480)](e(482)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var he=ge;!function(n,t){for(var e=ge,r=ye();;)try{if(430621===parseInt(e(313))/1*(-parseInt(e(295))/2)+-parseInt(e(300))/3*(parseInt(e(325))/4)+-parseInt(e(319))/5*(-parseInt(e(274))/6)+parseInt(e(266))/7+parseInt(e(247))/8*(-parseInt(e(303))/9)+parseInt(e(324))/10*(-parseInt(e(267))/11)+parseInt(e(270))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=ge,t=new RegExp(n(288)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=xe(n(309));t[n(317)](r+n(269))&&e[n(317)](r+"input")?xe():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(292)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(n,t){var e=ye();return(ge=function(n,t){return e[n-=246]})(n,t)}me(void 0,(function(){for(var n=ge,t=function(){var n,t=ge;try{n=Function("return (function() "+t(283)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(322)]||{},r=[n(281),n(287),"info",n(286),n(297),n(290),n(301)],o=0;o<r[n(299)];o++){var i=me[n(321)][n(268)][n(312)](me),a=r[o],c=e[a]||i;i[n(264)]=me[n(312)](me),i.toString=c[n(276)].bind(c),e[a]=i}}))();class _e extends N{constructor(n={}){var t=ge;super(n),this[t(254)]={value:null},this._distortionMap={value:null},this[t(278)]={value:null},this[t(308)]={value:null},this[t(277)]={value:null},this._hasBlur={value:!1},this[t(259)]={value:0},this[t(263)]={value:0},this[t(273)]={value:.5},this._minDepthThreshold={value:.9},this[t(248)]={value:1},this._depthScale={value:0},this[t(250)]={value:.25},this[t(314)]={value:1},this[t(253)]={value:1},this.setValues(n)}[he(282)](n){var t,e=he;!(null==(t=n[e(315)])?void 0:t[e(257)])&&(n[e(315)].USE_UV=""),n[e(249)][e(306)]=this[e(298)],n.uniforms.tDiffuse=this[e(278)],n[e(249)][e(323)]=this[e(254)],n[e(249)][e(258)]=this[e(261)],n[e(249)][e(252)]=this[e(308)],n[e(249)][e(311)]=this._textureMatrix,n[e(249)][e(307)]=this[e(259)],n[e(249)][e(272)]=this._mixBlur,n[e(249)][e(265)]=this[e(273)],n[e(249)][e(260)]=this[e(302)],n[e(249)][e(291)]=this._maxDepthThreshold,n.uniforms.depthScale=this[e(275)],n[e(249)][e(310)]=this[e(250)],n[e(249)][e(294)]=this._distortion,n.uniforms.mixContrast=this[e(253)],n[e(256)]=e(262)+n[e(256)],n[e(256)]=n[e(256)].replace(e(289),e(305)),n[e(316)]=e(246)+n.fragmentShader,n.fragmentShader=n.fragmentShader[e(293)]("#include <emissivemap_fragment>",e(279))}get[he(304)](){var n=he;return this._tDiffuse[n(271)]}set[he(304)](n){var t=he;this[t(278)][t(271)]=n}get[he(323)](){return this[he(254)].value}set[he(323)](n){var t=he;this._tDepth[t(271)]=n}get[he(258)](){var n=he;return this._distortionMap[n(271)]}set[he(258)](n){this[he(261)].value=n}get[he(252)](){var n=he;return this._tDiffuseBlur[n(271)]}set[he(252)](n){var t=he;this._tDiffuseBlur[t(271)]=n}get[he(311)](){var n=he;return this[n(277)][n(271)]}set[he(311)](n){var t=he;this._textureMatrix[t(271)]=n}get hasBlur(){return this[he(298)].value}set[he(306)](n){var t=he;this[t(298)][t(271)]=n}get[he(307)](){return this._mirror.value}set[he(307)](n){this._mirror.value=n}get[he(272)](){var n=he;return this[n(263)][n(271)]}set[he(272)](n){var t=he;this[t(263)][t(271)]=n}get[he(265)](){return this[he(273)].value}set[he(265)](n){this._blurStrength.value=n}get[he(260)](){return this._minDepthThreshold.value}set[he(260)](n){var t=he;this[t(302)][t(271)]=n}get[he(291)](){return this._maxDepthThreshold.value}set[he(291)](n){var t=he;this._maxDepthThreshold[t(271)]=n}get depthScale(){var n=he;return this[n(275)][n(271)]}set[he(296)](n){var t=he;this[t(275)][t(271)]=n}get[he(310)](){var n=he;return this[n(250)][n(271)]}set[he(310)](n){var t=he;this[t(250)][t(271)]=n}get[he(294)](){return this[he(314)].value}set[he(294)](n){var t=he;this[t(314)][t(271)]=n}get[he(255)](){var n=he;return this._mixContrast[n(271)]}set mixContrast(n){var t=he;this[t(253)][t(271)]=n}}function ye(){var n=["constructor","console","tDepth","545180cKzXHu","4yhZIQv","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","230600akNLeG","_maxDepthThreshold","uniforms","_depthToBlurRatioBias","gger","tDiffuseBlur","_mixContrast","_tDepth","mixContrast","vertexShader","USE_UV","distortionMap","_mirror","minDepthThreshold","_distortionMap","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_mixBlur","__proto__","mixStrength","1776488qtXefb","121OEvvqw","prototype","chain","12021396VAZHhk","value","mixBlur","_blurStrength","192SoFsvK","_depthScale","toString","_textureMatrix","_tDiffuse","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","debu","log","onBeforeCompile",'{}.constructor("return this")( )',"action","counter","error","warn","function *\\( *\\)","#include <project_vertex>","table","maxDepthThreshold","apply","replace","distortion","52nqoMeI","depthScale","exception","_hasBlur","length","762009mLkWYb","trace","_minDepthThreshold","171jOahgN","tDiffuse","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","hasBlur","mirror","_tDiffuseBlur","init","depthToBlurRatioBias","textureMatrix","bind","10253fqwNcJ","_distortion","defines","fragmentShader","test","call","131720BLrGlE","stateObject"];return(ye=function(){return n})()}function xe(n){function t(n){var e=ge;if("string"==typeof n)return function(n){}[e(321)]("while (true) {}").apply(e(285));1!==(""+n/n)[e(299)]||n%20==0?function(){return!0}[e(321)]("debu"+e(251))[e(318)](e(284)):function(){return!1}[e(321)](e(280)+e(251)).apply(e(320)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const be=we;!function(n,t){const e=we,r=Re();for(;;)try{if(717147===parseInt(e(296))/1*(parseInt(e(316))/2)+-parseInt(e(318))/3+parseInt(e(320))/4*(parseInt(e(248))/5)+parseInt(e(253))/6+-parseInt(e(332))/7+parseInt(e(257))/8+-parseInt(e(323))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ie(this,(function(){const n=we,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(285),"i"),r=Ae(n(327));t[n(312)](r+"chain")&&e.test(r+n(307))?Ae():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(n,t){const e=Re();return(we=function(n,t){return e[n-=243]})(n,t)}Se(void 0,(function(){const n=we;let t;try{t=Function(n(319)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(313)]=t[n(313)]||{},r=["log",n(290),n(287),n(317),n(339),n(265),n(244)];for(let i=0;i<r[n(330)];i++){const t=Se.constructor[n(292)][n(247)](Se),o=r[i],a=e[o]||t;t[n(338)]=Se[n(247)](Se),t[n(262)]=a.toString.bind(a),e[o]=t}}))();const Me=[be(336),be(333),be(297),be(301),"t-diffuse-blur",be(310),"mix-strength",be(328),be(342),"depth-scale",be(289),be(258),be(267),be(343),be(282),"defines-USE_DEPTH",be(303)];function Re(){const n=["apply","far","544667MJygGj","t-diffuse","negate","counter","setRenderTarget","t-depth","subVectors","defines-USE_DISTORTION","value","texture","reflectorOffset","input","clear","multiply","has-blur","depthTexture","test","console","lookAt","render","2uMMLhi","error","1466433tzFWZK","return (function() ","20JoduBV","setFromMatrixPosition","reflectorPlane","5154138ESflNr","elements","uuid","reflectorWorldPosition","init","min-depth-threshold","position","length","dispose","1767906MuZWWc","mirror","index","addScaledVector","texture-matrix","lookAtPosition","__proto__","exception","projectionMatrix","materialRef","max-depth-threshold","mix-contrast","gger","trace","TresMeshReflectorMaterial","extractRotation","bind","285910fCHEiW","reflect","constant","defines-USE_DEPTH","view","1809456xyeUtx","add","dot","normal","7192360IttXjb","distortion","rotationMatrix","autoClear","sign","toString","debu","traverse","table","cameraWorldPosition","distortionMap","updateMatrixWorld","virtualCamera","applyMatrix4","target","key","textureMatrix","matrixWorldInverse","shadowMap","autoUpdate","set","material","action","setFromNormalAndCoplanarPoint","visible","defines-USE_BLUR","constructor","clipPlane","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","info","enabled","depth-to-blur-ratio-bias","warn","stateObject","prototype","matrixWorld"];return(Re=function(){return n})()}const Ee=tn({__name:be(334),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:_e});const T=_n(),D=_n(),P=_n(),z=_n(),O=Q((()=>{const n=we;return"number"==typeof f[n(304)]?[f.value,f[n(304)]]:f.value})),C=Q((()=>O[r(304)][0]>0||O[r(304)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(304)])||n[o(305)][o(331)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(304)]=new b(i.value,i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(304)],i[o(304)],w,M)},t(y,e(x)))),D.value=new b(i[o(304)],i[o(304)],f),P[o(304)]=new pe({resolution:i.value,width:O[o(304)][0],height:O.value[1],minDepthThreshold:a[o(304)],maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l[o(304)]}),z[o(304)]={mirror:p,textureMatrix:F[o(273)],mixBlur:d,tDiffuse:T[o(304)][o(305)],tDepth:T.value[o(311)],tDiffuseBlur:T[o(304)][o(305)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":C[o(304)]?"":void 0,"defines-USE_DEPTH":u[o(304)]>0?"":void 0,"defines-USE_DISTORTION":g[o(304)]?"":void 0}}));const k=_n(),{onLoop:B}=Y();B((()=>{var n;const t=r;if(!(k[t(304)]&&R[t(304)]&&T[t(304)]&&y[t(304)]))return;const e=function(n,t){const e=we;let r;return n[e(264)]((n=>{const o=e;n.isMesh&&n[o(278)]&&n[o(278)].uuid===t&&(r=n)})),r}(x.value,k[t(304)][t(325)]);if(!e)return;e[t(281)]=!1;const i=R[t(304)].xr[t(288)],a=R[t(304)][t(275)][t(276)];(function(n){var t,e;const r=we;if(F[r(326)][r(321)](n[r(293)]),F[r(266)][r(321)](null==(t=y[r(304)])?void 0:t[r(293)]),F[r(259)][r(246)](n[r(293)]),F[r(256)][r(277)](0,0,1),F[r(256)][r(270)](F[r(259)]),F[r(326)][r(335)](F[r(256)],o[r(306)]),F[r(252)][r(302)](F[r(326)],F.cameraWorldPosition),F[r(252)][r(255)](F[r(256)])>0)return;F.view[r(249)](F[r(256)]).negate(),F[r(252)].add(F[r(326)]),F[r(259)][r(246)](null==(e=y[r(304)])?void 0:e[r(293)]),F[r(337)][r(277)](0,0,-1),F[r(337)][r(270)](F.rotationMatrix),F[r(337)][r(254)](F.cameraWorldPosition),F[r(271)][r(302)](F[r(326)],F[r(337)]),F.target[r(249)](F.normal)[r(298)](),F[r(271)][r(254)](F.reflectorWorldPosition),F.virtualCamera[r(329)].copy(F.view),F[r(269)].up.set(0,1,0),F[r(269)].up[r(270)](F[r(259)]),F[r(269)].up[r(249)](F.normal),F[r(269)][r(314)](F.target),F[r(269)].far=(null==y?void 0:y.value)[r(295)],F[r(269)][r(268)](),F.virtualCamera[r(340)].copy((null==y?void 0:y[r(304)])[r(340)]),F[r(273)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(309)](F[r(269)][r(340)]),F[r(273)].multiply(F[r(269)].matrixWorldInverse),F[r(273)][r(309)](n[r(293)]),F[r(322)][r(280)](F.normal,F[r(326)]),F[r(322)].applyMatrix4(F.virtualCamera[r(274)]),F[r(284)][r(277)](F[r(322)].normal.x,F[r(322)].normal.y,F[r(322)].normal.z,F[r(322)][r(250)]);const i=F.virtualCamera[r(340)];F.q.x=(Math[r(261)](F.clipPlane.x)+i[r(324)][8])/i[r(324)][0],F.q.y=(Math[r(261)](F.clipPlane.y)+i[r(324)][9])/i[r(324)][5],F.q.z=-1,F.q.w=(1+i[r(324)][10])/i[r(324)][14],F.clipPlane.multiplyScalar(2/F[r(284)][r(255)](F.q)),i[r(324)][2]=F[r(284)].x,i[r(324)][6]=F.clipPlane.y,i[r(324)][10]=F[r(284)].z+1,i[r(324)][14]=F.clipPlane.w})(e),R[t(304)][t(275)][t(276)]=!1,R[t(304)][t(300)](T[t(304)]),R.value[t(260)]||R.value[t(308)](),R[t(304)][t(315)](x.value,F[t(269)]),null==(n=null==P?void 0:P.value)||n[t(315)](R.value,T[t(304)],D[t(304)]),R[t(304)].xr[t(288)]=i,R.value.shadowMap.autoUpdate=a,e[t(281)]=!0,R[t(304)].setRenderTarget(null)}));const j=bn(),U=Q((()=>{const n=r,t={};return Object.assign(t,o),Object.assign(t,j[n(304)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(304)])||n[e(331)](),null==(t=null==D?void 0:D.value)||t[e(331)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(245),In({key:c(272)+z[c(304)][c(282)]+z[c(304)][c(251)]+z.value["defines-USE_DISTORTION"],ref_key:c(341),ref:k},U[c(304)],{"texture-matrix":F[c(273)],mirror:nn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(305)],"t-depth":null==(o=T[c(304)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(304)])?void 0:i[c(305)],"has-blur":C[c(304)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C[c(304)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Me)}}});function Ae(n){function t(n){const e=we;if(typeof n===e(286))return function(n){}.constructor("while (true) {}").apply(e(299));1!==(""+n/n).length||n%20==0?function(){return!0}[e(283)](e(263)+e(243)).call(e(279)):function(){return!1}.constructor("debugger")[e(294)](e(291)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Oe();for(;;)try{if(414855===parseInt(e(170))/1+-parseInt(e(181))/2*(parseInt(e(195))/3)+parseInt(e(187))/4+parseInt(e(178))/5+-parseInt(e(198))/6*(parseInt(e(165))/7)+parseInt(e(188))/8*(parseInt(e(197))/9)+-parseInt(e(168))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=ze,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(196),"i"),r=Pe(n(183));t.test(r+n(184))&&e.test(r+n(177))?Pe():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n){function t(n){const e=ze;if(typeof n===e(164))return function(n){}[e(185)]("while (true) {}")[e(160)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(185)](e(172)+e(190))[e(189)](e(176)):function(){return!1}[e(185)](e(172)+e(190)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ze(n,t){const e=Oe();return(ze=function(n,t){return e[n-=159]})(n,t)}function Oe(){const n=["trace","678ZdcqUI","log","init","chain","constructor","CubeCamera","710476JtbPYd","24IKdgFy","call","gger",'{}.constructor("return this")( )',"error","__proto__","dispose","5862VtPUVy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1388439yRMVuu","705552yHJyJZ","bind","apply","exception","prototype","value","string","21ohFlja","warn","fog","3566030tbQbYy","console","686699VBeBpu","length","debu","type","background","info","action","input","2297545kvULso","update"];return(Oe=function(){return n})()}De(void 0,(function(){const n=ze,t=function(){const n=ze;let t;try{t=Function("return (function() "+n(191)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(169)]||{},r=[n(182),n(166),n(175),n(192),n(161),"table",n(180)];for(let o=0;o<r[n(171)];o++){const t=De[n(185)][n(162)][n(159)](De),i=r[o],a=e[i]||t;t[n(193)]=De[n(159)](De),t.toString=a.toString[n(159)](a),e[i]=t}}))();const Ce=je;function Fe(){const n=["frames","warn","__proto__","action","error","debu","$slots","fog","TresGroup","test","value","trace","console","index","default","stateObject","envMap","visible","constructor","input","apply","7KMWKhU",'{}.constructor("return this")( )',"bind","gger","resolution","call","2101710NazggF","1490325bIjUYC","261318ZwyTMk","rgRef","toString","1803EnphFp","init","143432RedSEf","6583878JqrmHk","182168yLRbsH","object","near","length","1076BqERRB","while (true) {}"];return(Fe=function(){return n})()}!function(n,t){const e=je,r=Fe();for(;;)try{if(183180===-parseInt(e(242))/1+-parseInt(e(249))/2+-parseInt(e(245))/3*(parseInt(e(253))/4)+parseInt(e(241))/5+-parseInt(e(240))/6+parseInt(e(234))/7*(parseInt(e(247))/8)+parseInt(e(248))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(233)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=je,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le(n(246));t[n(222)](r+"chain")&&e[n(222)](r+n(232))?Le():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(233)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(n,t){const e=Fe();return(je=function(n,t){return e[n-=222]})(n,t)}Be(void 0,(function(){const n=je;let t;try{t=Function("return (function() "+n(235)+");")()}catch(o){t=window}const e=t[n(225)]=t[n(225)]||{},r=["log",n(256),"info",n(259),"exception","table",n(224)];for(let i=0;i<r[n(252)];i++){const t=Be[n(231)].prototype[n(236)](Be),o=r[i],a=e[o]||t;t[n(257)]=Be[n(236)](Be),t[n(244)]=a[n(244)][n(236)](a),e[o]=t}}))();const Ue=[Ce(250)],Ne=tn({__name:Ce(226),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return J((()=>s),(n=>{var t;const e=ze;null==(t=c.value)||t[e(194)](),c[e(163)]=new v(n[e(163)]),c.value.texture[e(173)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=ze;e&&(f[r(163)]=new(D[r(186)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=ze;null==(n=c[t(163)])||n[t(194)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(163)][t(167)],d=a.value.background,a[t(163)][t(174)]=r||d,a[t(163)][t(167)]=o||p,null==(n=f[t(163)])||n[t(179)](i[t(163)],a.value),a[t(163)][t(167)]=p,a.value[t(174)]=d}}}({resolution:o[r(238)],near:o[r(251)],far:o.far,envMap:o[r(229)],fog:o[r(262)]}),{onBeforeLoop:s}=Y();let u=0;const l=X(null);return s((()=>{const n=r;l[n(223)]&&(o.frames===1/0||u<o[n(255)])&&(l[n(223)][n(230)]=!1,c(),l[n(223)][n(230)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return on(),an("TresGroup",null,[hn("primitive",{object:nn(a)},null,8,Ue),hn(e(263),{ref_key:e(243),ref:l},[cn(n[e(261)],e(227))],512)])}}});function Le(n){function t(n){const e=je;if("string"==typeof n)return function(n){}[e(231)](e(254)).apply("counter");1!==(""+n/n)[e(252)]||n%20==0?function(){return!0}.constructor(e(260)+"gger")[e(239)](e(258)):function(){return!1}[e(231)](e(260)+e(237))[e(233)](e(228)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function He(){const n=["console","constructor","forEach","2910296nSUBoC","assign","entries","stateObject","7nUmsWe","reduce","while (true) {}","MathUtils","27KbQass","value","exception","init","string","toString","call","1490528vWjMhF","function *\\( *\\)","log","__proto__","uniforms","test","error","prototype","clone","action","length","warn","apply","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","generateUUID","debu","key","ShaderMaterial","bind","746658OFnHPj","1393260rlaAHy","9569IkzdvE","1606716TAGpke","table","gger","2203305OSuzwZ"];return(He=function(){return n})()}!function(n,t){const e=Ge,r=He();for(;;)try{if(338466===-parseInt(e(499))/1+parseInt(e(497))/2+-parseInt(e(500))/3+-parseInt(e(522))/4+-parseInt(e(503))/5+-parseInt(e(498))/6*(-parseInt(e(511))/7)+-parseInt(e(507))/8*(-parseInt(e(515))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(534)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=He();return(Ge=function(n,t){return e[n-=489]})(n,t)}!function(){Ze(this,(function(){const n=Ge,t=new RegExp(n(523)),e=new RegExp(n(490),"i"),r=$e(n(518));t[n(527)](r+"chain")&&e.test(r+n(489))?$e():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(534)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t,e,r){const o=Ge,i=class extends D[o(495)]{constructor(i={}){const a=o,s=Object[a(509)](n);super({uniforms:s[a(512)](((n,[t,e])=>{const r=V[a(530)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(494)]="",s[a(506)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(526)][n].value,set:t=>this[a(526)][n][a(516)]=t}))),Object[a(508)](this,i),r&&r(this)}};return i.key=D[o(514)][o(492)](),i}function $e(n){function t(n){const e=Ge;if(typeof n===e(519))return function(n){}[e(505)](e(513))[e(534)]("counter");1!==(""+n/n)[e(532)]||n%20==0?function(){return!0}[e(505)](e(493)+"gger")[e(521)](e(531)):function(){return!1}[e(505)](e(493)+e(502))[e(534)](e(510)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=Ge,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(504)]=t[n(504)]||{},r=[n(524),n(533),n(491),n(528),n(517),n(501),"trace"];for(let o=0;o<r[n(532)];o++){const t=Ve[n(505)][n(529)].bind(Ve),i=r[o],a=e[i]||t;t[n(525)]=Ve[n(496)](Ve),t[n(520)]=a.toString[n(496)](a),e[i]=t}}))();var Ye=tr;!function(n,t){for(var e=tr,r=Mr();;)try{if(788275===parseInt(e(294))/1+parseInt(e(244))/2*(parseInt(e(258))/3)+parseInt(e(327))/4+parseInt(e(265))/5+-parseInt(e(211))/6*(parseInt(e(306))/7)+-parseInt(e(224))/8+-parseInt(e(272))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[tr(282)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=tr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(345),"i"),r=Tr(n(348));t[n(253)](r+n(296))&&e.test(r+n(305))?Tr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n){var t=tr,e=function(n,t){var e=tr;if(typeof n!==e(300)||null===n)return n;var r=n[Symbol[e(241)]];if(void 0!==r){var o=r[e(330)](n,t||e(295));if(typeof o!==e(300))return o;throw new TypeError(e(221))}return(t===e(264)?String:Number)(n)}(n,"string");return typeof e===t(252)?e:String(e)}function Je(n,t,e){return(t=Xe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=tr,r=Object[e(304)](n);if(Object[e(216)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(340)]((function(t){return Object[e(318)](n,t).enumerable}))),r[e(243)][e(282)](r,o)}return r}function nr(n){for(var t=tr,e=1;e<arguments[t(314)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0).forEach((function(t){Je(n,t,r[t])})):Object[t(198)]?Object.defineProperties(n,Object[t(198)](r)):Qe(Object(r)).forEach((function(e){var o=t;Object[o(353)](n,e,Object[o(318)](r,e))}))}return n}function tr(n,t){var e=Mr();return(tr=function(n,t){return e[n-=183]})(n,t)}function er(n,t){var e=tr;if(null==n)return{};var r,o,i=function(n,t){var e=tr;if(null==n)return{};var r,o,i={},a=Object[e(304)](n);for(o=0;o<a[e(314)];o++)r=a[o],t[e(245)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(216)](n);for(o=0;o<a[e(314)];o++)r=a[o],t[e(245)](r)>=0||Object[e(189)][e(248)][e(330)](n,r)&&(i[r]=n[r])}return i}function rr(n,t){(null==t||t>n[tr(314)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function or(n,t){return function(n){if(Array[tr(240)](n))return n}(n)||function(n,t){var e=tr,r=null==n?null:e(366)!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(204)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s.push(o[e(351)]),s[e(314)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(284)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=tr;if(n){if("string"==typeof n)return rr(n,t);var r=Object.prototype[e(297)].call(n)[e(331)](8,-1);return"Object"===r&&n.constructor&&(r=n[e(376)][e(263)]),r===e(346)||"Set"===r?Array[e(225)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(253)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(tr(238))}()}function ir(n,t){for(var e=tr,r=0;r<t.length;r++){var o=t[r];o[e(364)]=o[e(364)]||!1,o[e(373)]=!0,"value"in o&&(o[e(358)]=!0),Object[e(353)](n,Xe(o[e(229)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError(tr(237));return n}function cr(n,t){var e=tr;return(cr=Object[e(261)]?Object[e(261)][e(254)]():function(n,t){return n[e(268)]=t,n})(n,t)}function sr(n){var t=tr;return(sr=Object[t(261)]?Object.getPrototypeOf[t(254)]():function(n){return n[t(268)]||Object.getPrototypeOf(n)})(n)}function ur(n){var t=function(){var n=tr;if(typeof Reflect===n(366)||!Reflect[n(372)])return!1;if(Reflect[n(372)][n(368)])return!1;if(typeof Proxy===n(228))return!0;try{return Boolean[n(189)].valueOf.call(Reflect[n(372)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=tr,o=sr(n);if(t){var i=sr(this).constructor;e=Reflect[r(372)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=tr;if(t&&(typeof t===e(300)||typeof t===e(228)))return t;if(void 0!==t)throw new TypeError(e(233));return ar(n)}(this,e)}}Ke(void 0,(function(){for(var n=tr,t=function(){var n,t=tr;try{n=Function(t(335)+t(186)+");")()}catch(e){n=window}return n}(),e=t[n(185)]=t[n(185)]||{},r=[n(256),n(196),n(322),n(246),n(316),"table",n(289)],o=0;o<r[n(314)];o++){var i=Ke[n(376)][n(189)][n(254)](Ke),a=r[o],c=e[a]||i;i[n(268)]=Ke[n(254)](Ke),i[n(297)]=c[n(297)][n(254)](c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:Ye(309),normal:Ye(223),roughness:"csm_Roughness",metalness:Ye(338),emissive:Ye(324),ao:Ye(334),bump:"csm_Bump",clearcoat:Ye(371),clearcoatRoughness:Ye(257),clearcoatNormal:Ye(285),pointSize:"csm_PointSize",fragColor:Ye(209),depthAlpha:Ye(380),position:Ye(200),positionRaw:Ye(260)},hr=(Je(lr={},"".concat(dr[Ye(356)]),"*"),Je(lr,""[Ye(287)](dr.positionRaw),"*"),Je(lr,""[Ye(287)](dr[Ye(239)]),"*"),Je(lr,""[Ye(287)](dr[Ye(215)]),["PointsMaterial"]),Je(lr,"".concat(dr[Ye(267)]),"*"),Je(lr,""[Ye(287)](dr[Ye(249)]),"*"),Je(lr,"".concat(dr[Ye(278)]),[Ye(378),Ye(222)]),Je(lr,""[Ye(287)](dr[Ye(262)]),[Ye(378),"MeshPhysicalMaterial"]),Je(lr,""[Ye(287)](dr[Ye(339)]),[Ye(378),Ye(222)]),Je(lr,""[Ye(287)](dr.ao),["MeshStandardMaterial",Ye(222),"MeshBasicMaterial",Ye(349),"MeshPhongMaterial",Ye(207)]),Je(lr,""[Ye(287)](dr.bump),[Ye(349),Ye(195),"MeshNormalMaterial",Ye(352),Ye(222),Ye(378),"MeshToonMaterial",Ye(363)]),Je(lr,""[Ye(287)](dr[Ye(347)]),["MeshDepthMaterial"]),Je(lr,"".concat(dr[Ye(235)]),[Ye(222)]),Je(lr,"".concat(dr[Ye(323)]),[Ye(222)]),Je(lr,""[Ye(287)](dr.clearcoatNormal),[Ye(222)]),lr),vr={"#include <lights_physical_fragment>":D[Ye(273)][Ye(202)]},mr=(Je(fr={},""[Ye(287)](dr.normal),{"#include <beginnormal_vertex>":Ye(218)[Ye(287)](dr.normal,Ye(317))}),Je(fr,""[Ye(287)](dr[Ye(356)]),{"#include <begin_vertex>":Ye(319).concat(dr[Ye(356)],Ye(302))}),Je(fr,""[Ye(287)](dr.positionRaw),{"#include <begin_vertex>":Ye(270)[Ye(287)](dr[Ye(354)],Ye(308))}),Je(fr,"".concat(dr[Ye(215)]),{"gl_PointSize = size;":Ye(336).concat(dr[Ye(215)],Ye(326))}),Je(fr,"".concat(dr[Ye(267)]),{"#include <color_fragment>":Ye(370)[Ye(287)](dr[Ye(267)],Ye(302))}),Je(fr,""[Ye(287)](dr[Ye(249)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[Ye(287)](dr.fragColor,";\n  ")}),Je(fr,""[Ye(287)](dr[Ye(278)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(321)[Ye(287)](dr[Ye(278)],Ye(326))}),Je(fr,""[Ye(287)](dr[Ye(262)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = ".concat(dr.roughness,Ye(326))}),Je(fr,"".concat(dr[Ye(339)]),{"#include <metalnessmap_fragment>":Ye(214)[Ye(287)](dr[Ye(339)],Ye(326))}),Je(fr,"".concat(dr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(dr.ao,Ye(326))}),Je(fr,""[Ye(287)](dr[Ye(369)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ye(287)](dr[Ye(369)],Ye(360))[Ye(287)](dr.bump,Ye(362))}),Je(fr,""[Ye(287)](dr[Ye(347)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ".concat(dr.depthAlpha,Ye(379)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(212).concat(dr[Ye(347)],Ye(326))}),Je(fr,""[Ye(287)](dr.clearcoat),{"material.clearcoat = clearcoat;":Ye(193)[Ye(287)](dr[Ye(235)],";")}),Je(fr,""[Ye(287)](dr[Ye(323)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = ".concat(dr[Ye(323)],";")}),Je(fr,"".concat(dr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Ye(283)}),fr),gr=(Je(pr={},""[Ye(287)](dr[Ye(356)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(337)[Ye(287)](dr[Ye(356)],Ye(190))}),Je(pr,""[Ye(287)](dr[Ye(354)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(275).concat(dr.position,Ye(302))}),Je(pr,""[Ye(287)](dr[Ye(267)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(292)[Ye(287)](dr.diffuse,";\n  ")}),Je(pr,""[Ye(287)](dr[Ye(249)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(292)[Ye(287)](dr[Ye(249)],Ye(302))}),pr),_r={clearcoat:[dr[Ye(235)],dr[Ye(255)],dr[Ye(323)]]},yr=Ye(303),xr=Ye(342),br=Ye(188),Ir=["baseMaterial",Ye(286),"vertexShader","uniforms",Ye(251),Ye(197),Ye(187)],Sr=function(n,t,e){var r=Ye;return n[r(320)](t)[r(242)](e)},wr=function(n,t){var e,r,o=Ye;return new RegExp("\\b".concat((e=t,r=Ye,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(259))),"\\b"))[o(253)](n)};function Mr(){var n=["isArray","toPrimitive","join","push","2043474TdxXVg","indexOf","error","stateObject","propertyIsEnumerable","fragColor","\n            ","patchMap","symbol","test","bind","clearcoatNormal","log","csm_ClearcoatRoughness","3ZtJxvu","\\$&","csm_PositionRaw","setPrototypeOf","roughness","name","string","1727655thiBlg","gger","diffuse","__proto__","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","\n    vec4 csm_internal_positionUnprojected = ","needsUpdate","17922303aDIvoI","ShaderChunk","create","\n    gl_Position = ",'". Shader cannot compile.',"_getPatchMapForMaterial","emissive","Super expression must either be null or a function","Material","debu","apply","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","return","csm_ClearcoatNormal","fragmentShader","concat","// #_CSM_#","trace","void ","forEach","\n    gl_FragColor = ","#define IS_UNKNOWN;\n","1353264fVKmVW","default","chain","toString","_getMaterialDefine","clone","object","void main()",";\n  ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","keys","input","7nLHaFJ","isAlreadyExtended",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","csm_DiffuseColor","_patchShader","trim","cacheHash","lastIndexOf","length","counter","exception",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","getOwnPropertyDescriptor","\n    vec3 transformed = ","split","\n    vec3 totalEmissiveRadiance = ","info","clearcoatRoughness","csm_Emissive","_generateMaterial",";\n    ","2701044xjEwLk","vertexShader","update","call","slice",'CSM: Property "',"is not a constructor","csm_AO","return (function() ","\n    gl_PointSize = ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","csm_Metalness","metalness","filter","\n            \n            void main() {\n          ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","ShaderMaterial","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Map","depthAlpha","init","MeshLambertMaterial","entries","value","MeshPhongMaterial","defineProperty","positionRaw","__csm","position","customProgramCacheKey","writable","();\n              // #_CSM_#\n          "," - (dot(","getPrototypeOf",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","ShadowMaterial","enumerable","#define IS_VERTEX;\n","undefined","assign","sham","bump","\n    #include <color_fragment>\n    diffuseColor = ","csm_Clearcoat","construct","configurable","toUpperCase","find","constructor","type","MeshStandardMaterial"," );\n    ","csm_DepthAlpha","baseMaterial",". Shader cannot compile.","console",'{}.constructor("return this")( )',"silent","\n    \n","prototype",", 1.0 );\n  ","while (true) {}","();\n            // #_CSM_#\n          ","material.clearcoat = ","MathUtils","MeshMatcapMaterial","warn","cacheKey","getOwnPropertyDescriptors","csm_main_","csm_Position",'" is required to use output "',"lights_physical_fragment","CustomShaderMaterial does not support RawShaderMaterial","next","CSM: ","substring","MeshToonMaterial","\n    \n            ","csm_FragColor","get","3099666kbyiRc","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","action","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","pointSize","getOwnPropertySymbols","void main() {","\n    vec3 objectNormal = ","message","set","@@toPrimitive must return a primitive value.","MeshPhysicalMaterial","csm_Normal","796320AJtIEc","from","instanceID","onBeforeCompile","function","key","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","_getCacheHash","uniforms","Derived constructors may only return object or undefined","replace","clearcoat","includes","this hasn't been initialised - super() hasn't been called","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","normal"];return(Mr=function(){return n})()}function Rr(n){return n?n.replace(/\s/g,""):void 0}function Er(n){return n[Ye(234)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Ar=function(n){var t=Ye;!function(n,t){var e=tr;if("function"!=typeof t&&null!==t)throw new TypeError(e(279));n[e(189)]=Object[e(274)](t&&t[e(189)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(189),{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=ur(c);function c(n){var t,e,r,o,i,s=tr,u=n[s(183)],l=n[s(286)],f=n[s(328)],p=n[s(232)],d=n.patchMap,h=n[s(197)],v=n[s(187)],m=er(n,Ir);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(219)].indexOf(t(333))>=0)return!1}return!0}(u)?(e=u,Object[s(367)](e,m)):e=new u(m),"RawShaderMaterial"===e[s(377)])throw new Error(s(203));(function(n,t){var e=Ye;e(314),Object[e(367)](n,t);var r=Object[e(361)](t);Object[e(350)](Object.getOwnPropertyDescriptors(r))[e(340)]((function(n){var t=e,r=typeof n[1][t(210)]===t(228),o=typeof n[1][t(220)]===t(228),i=typeof n[1][t(351)]===t(228),a=n[0]===t(376);return(r||o||i)&&!a}))[e(291)]((function(t){var r=e;typeof n[t[0]]!==r(228)&&Object[r(353)](n,t[0],t[1])}))})(ar(t=a.call(this)),e),t[s(355)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(194)].generateUUID(),type:e[s(377)],isAlreadyExtended:(r=e[s(227)],o=Ye,i=r[o(297)]().trim(),!(0===i[o(206)](i[o(245)]("{")+1,i[o(313)]("}"))[o(311)]()[o(314)])),cacheHash:"",silent:v},t[s(232)]=nr(nr({},t[s(232)]||{}),p||{});var g=t[s(355)],_=g[s(286)],y=g[s(328)],x=t[s(232)];return t.__csm.cacheHash=t[s(231)](),t[s(325)](_,y,x),t}return e=c,r=[{key:t(329),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(232)]=e[n(232)]||this[n(232)],Object[n(367)](this[n(355)],e);var r=this[n(355)],o=r[n(286)],i=r[n(328)],a=this[n(232)],c=this[n(231)]();this[n(355)][n(312)]=c,this[n(325)](o,i,a)}},{key:t(299),value:function(){var n=t,e={baseMaterial:this[n(355)][n(183)],fragmentShader:this[n(355)].fragmentShader,vertexShader:this[n(355)][n(328)],uniforms:this.uniforms,silent:this.__csm[n(187)],patchMap:this.__csm[n(251)],cacheKey:this[n(355)].cacheKey},r=new(this[n(376)])(e);return Object.assign(this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(355)],r=e[n(286)],o=e[n(328)],i=this[n(232)],a=[Rr(r),Rr(o),i][n(340)]((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this[n(357)]()}},{key:t(325),value:function(n,e,r){var o=t,i=this;this[o(232)]=r||{},this[o(357)]=function(){var n=o;return i[n(355)][n(312)]};var a=function(t){var r=o;try{var a=i[r(298)]();if(n){var c=i[r(310)](Er(n),t[r(286)],!0);t[r(286)]=a+c}if(e){var s=i[r(310)](Er(e),t[r(328)]);t.vertexShader=r(365)+s,t[r(328)]=a+t[r(328)]}t[r(232)]=nr(nr({},t[r(232)]),i[r(232)]),i[r(232)]=t.uniforms}catch(u){console[r(246)](u)}};if(this[o(355)].isAlreadyExtended){var c=this[o(227)];this[o(227)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(271)]=!0}},{key:t(310),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(277)]()),this[o(355)][o(251)]);Object[o(350)](_r)[o(291)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(375)]((function(t){return wr(n,t)}));if(c&&!i[a])throw new Error(e(332)[e(287)](a,e(201))[e(287)](c,e(276)))})),Object[o(350)](vr)[o(291)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object[o(304)](c)[o(291)]((function(t){var e=o;Object[e(304)](c[t])[e(291)]((function(r){var o=e,s=hr[t],u=i[o(355)][o(377)];if("*"===t||wr(n,t)){if(!(!s||Array[o(240)](s)&&s[o(236)](u)||"*"===s))throw new Error(o(205)[o(287)](t," is not available in ").concat(u,o(184)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(199)+this[o(355)][o(226)].replace(/-/g,"_"),h=n[o(234)](/void\s+main\s*\(\s*\)/g,o(290).concat(d,"()")),v=n.includes(o(301)),m=a[o(236)](o(288));return v&&(m&&this.__csm[o(307)]?(a=a[o(234)](o(217),o(250).concat(h,o(341))),s=a,u=o(288),l=o(250)[o(287)](d,o(192)),p=s[(f=Ye)(313)](u),a=-1===p?s:s[f(206)](0,p)+l+s[f(206)](p+u[f(314)])):a=a[o(234)](o(217),o(344).concat("\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(287)](yr,o(208))[o(287)](h,o(269))[o(287)](xr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ").concat(r?br:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(230))[o(287)](d,o(359)))),a}},{key:t(298),value:function(){var n=t,e=this[n(355)][n(377)];return e?"#define IS_"[n(287)](e[n(374)](),";\n"):n(293)}},{key:t(277),value:function(){var n=t;return this[n(355)][n(377)]===n(343)?gr:mr}}],i=tr,r&&ir(e[i(189)],r),o&&ir(e,o),Object[i(353)](e,i(189),{writable:!1}),c}(D[Ye(280)]);function Tr(n){function t(n){var e=tr;if(typeof n===e(264))return function(n){}[e(376)](e(191)).apply(e(315));1!==(""+n/n)[e(314)]||n%20==0?function(){return!0}[e(376)](e(281)+e(266))[e(330)](e(213)):function(){return!1}[e(376)](e(281)+e(266))[e(282)](e(247)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dr=Fr;!function(n,t){const e=Fr,r=Cr();for(;;)try{if(283651===parseInt(e(259))/1*(parseInt(e(285))/2)+-parseInt(e(265))/3+-parseInt(e(289))/4*(-parseInt(e(270))/5)+parseInt(e(278))/6*(parseInt(e(276))/7)+-parseInt(e(258))/8*(-parseInt(e(286))/9)+parseInt(e(284))/10+-parseInt(e(261))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(271)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pr(this,(function(){const n=Fr,t=new RegExp(n(262)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Br(n(260));t.test(r+n(281))&&e[n(263)](r+n(291))?Br():r("0")}))()}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(271)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zr(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function(n(264)+n(288)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(300)]||{},r=[n(292),"warn","info",n(277),"exception","table",n(267)];for(let o=0;o<r[n(275)];o++){const t=zr[n(255)][n(269)][n(298)](zr),i=r[o],a=e[i]||t;t[n(280)]=zr.bind(zr),t[n(282)]=a[n(282)].bind(a),e[i]=t}}))();const Or=["object"];function Cr(){const n=["call","prototype","130VRALRd","apply","primitive","roughness","\n      ","length","7LjJQyZ","error","1280724rYfdnQ","counter","__proto__","chain","toString","clearcoat","1213810iWvbxU","16YOtLvX","3895092CiiGAx","gger",'{}.constructor("return this")( )',"21504CrXSiH","index","input","log","MeshPhysicalMaterial","\n\t\t\t","setStyle","clearcoatRoughness","string","bind","color","console","action","constructor","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","metalness","8JRZpJY","11604ViIvDf","init","1952016tOEDsJ","function *\\( *\\)","test","return (function() ","1617372rfSbmE","debu","trace"];return(Cr=function(){return n})()}function Fr(n,t){const e=Cr();return(Fr=function(n,t){return e[n-=255]})(n,t)}const kr=tn({__name:Dr(290),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Dr,e=n,r={baseMaterial:D[t(293)],metalness:e[t(257)],roughness:e[t(273)],clearcoat:e.clearcoat,clearcoatRoughness:e.clearcoatRoughness,color:e[t(299)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(294)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(274)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(256)},o=new Ar(r);return fn((()=>{const n=t;o[n(299)][n(295)](e[n(299)]),o[n(257)]=e.metalness,o[n(273)]=e[n(273)],o[n(283)]=e.clearcoat,o[n(296)]=e[n(296)]})),(n,e)=>{const r=t;return on(),an(r(272),{object:nn(o)},null,8,Or)}}});function Br(n){function t(n){const e=Fr;if(typeof n===e(297))return function(n){}[e(255)]("while (true) {}")[e(271)](e(279));1!==(""+n/n)[e(275)]||n%20==0?function(){return!0}[e(255)](e(266)+"gger")[e(268)](e(301)):function(){return!1}[e(255)](e(266)+e(287))[e(271)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function jr(){var n=["bind","1198yQNKjb","call","table","apply",'{}.constructor("return this")( )',"296kqIzvu","init","test","325243pWffEL","log","return (function() ","6SZuMXv","length","constructor","warn","8070glTnjP","2019lCLHeS","7059036XjfYfu","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","input","function *\\( *\\)","counter","error","console","debu","13VJGHoZ","176QCmGoY","string","__proto__","27OkQiSe","chain","info","70540EvdNib","196368AZbsoF","85582EvpxdU","gger","toString"];return(jr=function(){return n})()}!function(n,t){for(var e=Lr,r=jr();;)try{if(339481===parseInt(e(231))/1+parseInt(e(223))/2*(-parseInt(e(239))/3)+parseInt(e(228))/4*(-parseInt(e(238))/5)+-parseInt(e(234))/6*(parseInt(e(259))/7)+-parseInt(e(258))/8*(-parseInt(e(254))/9)+-parseInt(e(257))/10*(parseInt(e(251))/11)+parseInt(e(240))/12*(parseInt(e(250))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(226)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Lr,t=new RegExp(n(245)),e=new RegExp(n(242),"i"),r=Hr(n(229));t[n(230)](r+n(255))&&e[n(230)](r+n(244))?Hr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(226)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(n,t){var e=jr();return(Lr=function(n,t){return e[n-=221]})(n,t)}function Hr(n){function t(n){var e=Lr;if(typeof n===e(252))return function(n){}[e(236)](e(241))[e(226)](e(246));1!==(""+n/n)[e(235)]||n%20==0?function(){return!0}[e(236)](e(249)+e(260))[e(224)](e(243)):function(){return!1}.constructor(e(249)+e(260)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){for(var n=Lr,t=function(){var n,t=Lr;try{n=Function(t(233)+t(227)+");")()}catch(e){n=window}return n}(),e=t[n(248)]=t[n(248)]||{},r=[n(232),n(237),n(256),n(247),"exception",n(225),"trace"],o=0;o<r[n(235)];o++){var i=Nr.constructor.prototype[n(222)](Nr),a=r[o],c=e[a]||i;i[n(253)]=Nr[n(222)](Nr),i[n(221)]=c[n(221)][n(222)](c),e[a]=i}}))();export{We as C,kr as _,ut as a,Xn as b,St as c,Dt as d,Ut as e,Xt as f,Ne as g,Ee as h,vt as u};

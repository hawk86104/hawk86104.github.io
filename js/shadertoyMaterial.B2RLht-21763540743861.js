import{K as n}from"./@tresjs.BCHtwiaC1763540743861.js";import{o}from"./index.Crdf3MNx1763540743861.js";import{ae as t,aD as e,G as i,f as r,af as c,n as a,o as s,dc as u}from"./three.rXKzP9fQ1763540743861.js";import{B as d}from"./three-custom-shader-material.C6taB_aY1763540743861.js";import{P as W}from"./tweakpane.CqZAnw7f1763540743861.js";import{d as l,a8 as m,r as f,q as p,g as v,b as h,o as x,e as k,J as C,h as g,u as S,ac as R,ao as y,m as j}from"./@vue.Co_gxueH1763540743861.js";import"./postprocessing.51l5tmA-1763540743861.js";import"./@vueuse.CfFJ-iFV1763540743861.js";import"./@fesjs.BEMFm_yJ1763540743861.js";import"./vue-router.BxG8XxK11763540743861.js";import"./lodash-es.B7GkVYRo1763540743861.js";import"./pinia.CEQ6XgE61763540743861.js";import"./@qlin.y-0Z8WnK1763540743861.js";import"./@babel.BPq7uOAK1763540743861.js";import"./@floating-ui.Bhq4ibgf1763540743861.js";import"./@juggle.Vc7cP4_P1763540743861.js";import"./chalk.BHLFMujs1763540743861.js";/* empty css                                 */import"./iconify-icon.1JyQPtAK1763540743861.js";import"./@iconify.DDuAktjw1763540743861.js";import"./vite-plugin-qiankun.B06WoCqG1763540743861.js";import"./dompurify.C4MEnGDh1763540743861.js";import"./oimophysics.CfVKSiAm1763540743861.js";import"./three-stdlib.DJsODJ8R1763540743861.js";import"./@pmndrs.C5SFDEDA1763540743861.js";import"./object-hash.DlZNhpf61763540743861.js";import"./@amap.D8CfaEsq1763540743861.js";import"./crypto-js.CLP5yTup1763540743861.js";import"./naive-ui.qjPOP62h1763540743861.js";import"./date-fns.eh-WGDI81763540743861.js";import"./@css-render.DtSd-BuN1763540743861.js";import"./css-render.Dlx27V_T1763540743861.js";import"./@emotion.DFFAhID71763540743861.js";import"./seemly.D2hUckm91763540743861.js";import"./vooks.CVMU_ROE1763540743861.js";import"./evtd.C4K_ichY1763540743861.js";import"./vueuc.CEvnhvIm1763540743861.js";import"./vdirs.DlTVi7SG1763540743861.js";import"./treemate.Qc8YxXqZ1763540743861.js";import"./date-fns-tz.CIz1xaH61763540743861.js";import"./async-validator.DJtlKCAR1763540743861.js";!function(){const n=G();function o(n,o,t,e,i){return P(o-549,e)}function t(n,o,t,e,i){return P(n- -969,o)}function e(n,o,t,e,i){return P(o- -815,i)}function i(n,o,t,e,i){return P(i-857,o)}for(;;)try{if(872145===parseInt(i(0,"P16%",0,0,1414))/1*(parseInt(i(0,"$0[Q",0,0,1365))/2)+-parseInt(t(-496,"AmqZ"))/3+-parseInt(o(0,1050,0,"ugyT"))/4+parseInt(o(0,1080,0,"R#0G"))/5*(parseInt(e(0,-291,0,0,"Yrn2"))/6)+-parseInt(o(0,1103,0,"IfVQ"))/7+-parseInt(t(-435,"$@^G"))/8*(parseInt(e(0,-299,0,0,"Kp&0"))/9)+parseInt(i(0,"0)pU",0,0,1315))/10)break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const b=function(){let n=!0;return function(o,t){function e(n,o,t,e,i){return P(n- -532,o)}if(e(-70,"wgu[")===e(21,"h0^K")){const i=n?function(){function n(n,o,t,i,r){return e(r-1526,n)}function i(n,o,t,e,i){return P(e- -300-206,n)}if("WnZXn"===i("mbFY",0,0,465)){const n=_0x5640e6.apply(_0x2057cf,arguments);return _0x1551f1=null,n}if(t){if(i("ssQ2",0,0,441)!==i("tV5#",0,0,408)){const n=t.apply(o,arguments);return t=null,n}{let o=_0x5d2623.split(i("thnS",0,0,420));_0x2a503b="varying vec2 vUv;\n"+n("$@^G",0,0,0,1497)+o[1],_0xbb4fb8=_0x16688b[n("$@^G",0,0,0,1462)](/iTime|iTimeDelta/g,"utime")}}}:function(){};return n=!1,i}_0x3b7012=_0x39ec1e}}()(void 0,function(){function n(n,o,t,e,i){return P(t-117,n)}function o(n,o,t,e,i){return P(i- -989,n)}function t(n,o,t,e,i){return P(i-514,e)}return b[n("JF]M",0,573)]()[t(0,0,0,"tV5#",1023)](n("Yrn2",0,571)).toString()[o("]Yx%",0,0,0,-512)](b)[o("3D46",0,0,0,-517)](t(0,0,0,"Kp&0",1001))});function P(n,o){const t=G();return P=function(o,e){let i=t[o-=454];if(void 0===P.GNloJm){var r=function(n){let o="",t="",e=o+r;for(let i,r,c=0,a=0;r=n.charAt(a++);~r&&(i=c%4?64*i+r:r,c++%4)?o+=e.charCodeAt(a+10)-10!=0?String.fromCharCode(255&i>>(-2*c&6)):c:0)r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(let i=0,r=o.length;i<r;i++)t+="%"+("00"+o.charCodeAt(i).toString(16)).slice(-2);return decodeURIComponent(t)};const o=function(n,o){let t,e,i=[],c=0,a="";for(n=r(n),e=0;e<256;e++)i[e]=e;for(e=0;e<256;e++)c=(c+i[e]+o.charCodeAt(e%o.length))%256,t=i[e],i[e]=i[c],i[c]=t;e=0,c=0;for(let r=0;r<n.length;r++)e=(e+1)%256,c=(c+i[e])%256,t=i[e],i[e]=i[c],i[c]=t,a+=String.fromCharCode(n.charCodeAt(r)^i[(i[e]+i[c])%256]);return a};P.hMyoRy=o,n=arguments,P.GNloJm=!0}const c=o+t[0],a=n[c];if(a)i=a;else{if(void 0===P.XDBGDb){const n=function(n){this.TMIcmr=n,this.xuDnEc=[1,0,0],this.rvkoSj=function(){return"newState"},this.tXkJIQ="\\w+ *\\(\\) *{\\w+ *",this.iLfQJR="['|\"].+['|\"];? *}"};n.prototype.gKJxnz=function(){const n=new RegExp(this.tXkJIQ+this.iLfQJR).test(this.rvkoSj.toString())?--this.xuDnEc[1]:--this.xuDnEc[0];return this.mvGqIh(n)},n.prototype.mvGqIh=function(n){return Boolean(~n)?this.YShRZO(this.TMIcmr):n},n.prototype.YShRZO=function(n){for(let o=0,t=this.xuDnEc.length;o<t;o++)this.xuDnEc.push(Math.round(Math.random())),t=this.xuDnEc.length;return n(this.xuDnEc[0])},new n(P).gKJxnz(),P.XDBGDb=!0}i=P.hMyoRy(i,e),n[c]=i}return i},P(n,o)}b();const Q=function(){let n=!0;return function(o,t){function e(n,o,t,e,i){return P(t- -21,n)}function i(n,o,t,e,i){return P(t-164,i)}if(i(0,0,645,0,"Ml^2")===i(0,0,671,0,"ugyT")){const r=n?function(){function n(n,o,t,i,r){return e(n,0,i-887)}function r(n,o,t,e,r){return i(0,0,t-730,0,o)}function c(n,o,t,e,r){return i(0,0,e- -510,0,o)}if("rLaIR"===n("Dpxh",0,0,1321)){let n;try{n=_0x4014b3(r(0,"0)pU",1440)+'{}.constructor("return this")( ));')()}catch(u){n=_0x3de172}return n}if(t){if("jBSmq"!==n("By45",0,0,1376)){const n=t.apply(o,arguments);return t=null,n}{const n=_0x52b459[r(0,"Dpxh",1439)](_0x2a3473),o=new _0x583cc2({baseMaterial:_0x21cd82,vertexShader:c(0,"3D46",0,195),fragmentShader:n,side:_0x2a0ef3,uniforms:_0xb5cb0e.material[c(0,"CY)0",0,166)]});this[r(0,"AmqZ",1377)]=o,_0x153a16[(a="mbFY",s=1285,e(a,0,s-821))](this.material)}}var a,s}:function(){};return n=!1,r}_0x4665b0=_0x4c2a48(i(0,0,710,0,"0)pU")+P(1479-995,"IfVQ")+");")()}}();function G(){const n=["jqFcIW","qSk9WR/cG8k5edlcKa","rK/cOaxcPxuVo8k3W4ZdNf7dNf9GW77dP8kiabe1rCoam0/cHZ/dSSkfaepcKa","dCokW4a","WR9ooSoIWRi","WPxcUSovj3XRjLldHIRcK8kN","W6yAWRiA","FMZdVCoivG","WOlcQhNdHta","WQmtW70BW6q","W4GnaSkrnhBdNmoZxmo/WRu","W58UW57dPCoOAW","CSoeBmk4e8oFWQRdRSkoa8ovW6a","WObSW61Yhq","xmk5WQRcLmkOeq","WOhcSwFdJq","WRSIWP9E","WP92WOBcPmkJpNLOcGddIhPg","W7pdLSkTWOjZWQvhwmo9W5jSqdhdTqdcSmkcWQBcMLuSW4SNCvxcLNCYW5ukW77dR8kym1xdKmoWoWqRvf7dUSk1WO/dNd3cRmkUW7ddLmoRdmoNlCo7WRpcHtZdPmkUamkaD8kYqmk3W6JcOZFcHHRdJ0zuEtlcLmomf8k4W6JdPd4IDmkWqfPPDc5MEZ7cP8kTWPClW7hcImkNoCkmvvueEvVdRmoNW7yPWOiafrSVcmkaphP+DIjSntBdRr7dQJeZW6zEgCojWPVdJwrUkxhdPZxcSLqpx15U","iCo6gComW5m4WQyndIdcP8oIWRW","W5pdJSoPaSoF","WQWLWPHCWRZcVCk+W73cRcfVhSoPFGFcVCkuo8kOr8kZ","W5mXW5pdSWr4mx7dSmkeWQxdLxnmW5e","W6xcUX7cNCkLW6ZcOW","WOrkWPjQWRieWQG/pSoraW3dKCoDEmogW7PUWRi5u8kjW6BdGmkYW7K","BmkLq8kgWP4","W7FcUmkaWRimsmopggW8tW","W4RdSSoHkmoZga","W7WBW5xdVmoS","FCovW57cMum","W6lcSaFcL8kRW73cQ8k/","W6lcQGVcICkWW7RcTmkP","WPxcUxVdKcdcGqFcTSkve1pdSSoVohdcJNFdHa","itFcJCojWQBcGSkz","WOZcPComFJmlArpcGq","WPhcINu","W4KWW5ZdJ8oFzY9inrRdHx1BWRpdMCkI","jtpcJ8oCWQ7cJ8kBW413WObQECkCWQbIW4ioWPq","BttcSCkWx3aEAa","W7xcTWdcLq","d8k8W43cKSkwCSkzWQWix8kLkX0EW5TygmkC","WPv1bCoOWPZcQrS","yaZcGmo5FCoodSo3","W5WIWOL0tqddUtC","qmoJDCkieeaGwHBcRsVcOq","kctdRSoHBL/cTXe","yCozDJmJ","WO7cUx3dJdVcHGhdUG","W6e3dSoU","amkkWOVdMWRdJmogWPevC8oScq","nCoIW4qOAq","a8k2nCourXCp","W6H7W4ekW6xdU8kzWPpcIWjWmq","AWaQW4ldHG","W5WIW4pdQCoYyc4onGZdGWWuWQNdO8kMubK","vCo7qLldKa","W6OWbSoL","WRq5W4ixW6C","W5u7W7ddQXDYoK8","W4yAgmk8FmoGW6GwW40uEmohWPRdIfZdOv4bnSkJjCk3cmk9sSkSaNBdR8kraWSXW4eKjGZcSSkoW4FcKmkJW71fW65TW6uCWRRdOfrHfCkYWPXaWQVdL8orWQJdMNHlmCofjMldP1WyWPtdImodiSknW4/dQqldQb8qW7rNjg7dRtrSW7S7W6tcMqBdLSkPzSodsSoRyCkKW7ZdSwlcGCkznSoYW7XFW47dK2/dTSkvWOuik8kGaIjmFwO4WQKzW6nlDxVcN08JW6X/Dx/dL29VWQfsW74PqCoaWQhcSZj6","W5xdUmoN","WPhcVxNdHsJcJau","W4VdSSo0l8oIhLhdRsO5WRP6W5FdM2n1WQFcOaG","CCo3DmkblmoWW7XboHhcPmoxW41RW78","BxNdUCorxv/dU29IkmouW4FcNbJdOcNdTmoDhW","W4ZdUCoPpmo/aHZdPt8TWRLPW4/dL34PW4VcQqJcV8kxWR4KlMr0r8kFW74","WRW5WOnvWQe","Af56WRNdSSkWWQRdS8kDjHOFW7NcUwRcPCkGz2/dNG8","lCknnSo4","gCk+fCoruG","FxxdO8oa","DKDgWOFdSq","cqpcUL7dVIHKaCkpW7VdJ3JdGW","WOyuWOfiWRZcU8k8WOlcLq","A1fHWQBdTmkSWQddS8knlXzmWQ3dR0RcP8oYaa","eY4AjmoHWRulWRyd","f8oaW6udEG","fmo2W73cRga","omkkv1dcTG","j8o5hComW5m8W5e6dbtcR8ou","WRqQWOvFWQhcPSkYWRe","AvvGWQS","FXZdI8ksf8kjsCkioenvWO8","tCohqSklpa","WONcIKhcKmkyd8onca","WObLW7iUfedcVhNcRt12WPa","kINcUSkqfWhdQWfonmosW6dcMG","kmkjnmo6wCkvW6q","rCk9W41YW5xcJgS","s1pdVb/cO3u7B8kZW5ZdNbJcK1SDWQRcRSoN","WOpdNCoSW5GJ","WOZdTCo6W4vM","pWWkW7PQ","W6m5W7/dN8oj","D8kLq8kpWP5+W6SQosZcSq","BSk0ex47WOnqeMRcQSkDo8k3rCoF","WQSUWOfwWRlcRmk2","WPNdGNNdH1ZdM8kT","W61pdtbOW4xcV8oa","umowW5xcMeFcJSo8WOeGs8oY","WRX1wCoUp8kO","hmoOW7pdLmo6sqxcQG7cQu56","smoQWO7cNmkBvCkAW6qs","W6SsWQCRW5O","W5mXW5pdSWr4mq","WQuWW7WmW4xdSCo5yHFdV1q","WOn5W7zMewhcICoztSk0smoCoCkEW5RcH8kEW70","q8olW5tcN1ZcImoWWPiX","WOjuWPDLWQK","WO13W6PLda"];return(G=function(){return n})()}function O(n,o,t,e,i){return P(i- -586,n)}Q(void 0,function(){function n(n,o,t,e,i){return P(e-688,o)}function o(n,o,t,e,i){return P(t- -138,i)}function t(n,o,t,e,i){return P(n- -887,e)}const e=function(){function n(n,o,t,e,i){return P(i-751,t)}function o(n,o,t,e,i){return P(e-895,t)}function t(n,o,t,e,i){return P(n-126,o)}if(o(0,0,"rh^u",1359)!==P(-322- -861,"]Yx%")){let i;try{if(o(0,0,"By45",1360)!==o(0,0,"$0[Q",1358)){if(_0x9b68ce){const o=_0x34c08f[n(0,0,"0)pU",0,1240)](_0x3ebc57,arguments);return _0x1631e6=null,o}}else i=Function(o(0,0,"tV5#",1439)+'{}.constructor("return this")( ));')()}catch(e){if(o(0,0,"4s4g",1455)!==t(617,"]Yx%")){const o=_0x581f5f?function(){if(_0x572a22){const e=_0x785b85[(o=6,t="thnS",n(0,0,t,0,o- -1235))](_0x164754,arguments);return _0x4c40c9=null,e}var o,t}:function(){};return _0x8479c2=!1,o}i=window}return i}return _0x1c07bc.toString()[n(0,0,"AmqZ",0,1247)](n(0,0,"^q3&",0,1208))[t(666,"Ca(3")]()[t(592,"ugyT")](_0x5c0a5c).search(o(0,0,"URV6",1389))}(),i=e[t(-418,0,0,"pdfS")]=e[t(-364,0,0,"jNHM")]||{},r=[t(-370,0,0,"JF]M"),o(0,0,412,0,"URV6"),(c=354,a="U0Gn",P(c- -184,a)),s(1412,"$@^G",1510,1497,1459),"exception",o(0,0,399,0,"j9F("),"trace"];var c,a;function s(n,o,t,e,i){return P(i-911,o)}for(let u=0;u<r.length;u++)if("ITQyA"!==s(0,"jNHM",0,0,1397)){if(_0x37809d){const o=_0x3ff03c[n(0,"qSTI",0,1246)](_0x18d9aa,arguments);return _0x4169cd=null,o}}else{const o=Q[t(-395,0,0,"h*BL")].prototype[n(0,"CY)0",0,1209)](Q),e=r[u],c=i[e]||o;o.__proto__=Q.bind(Q),o.toString=c[t(-417,0,0,"Fd]l")][n(0,"thnS",0,1185)](c),i[e]=o}})();class I{constructor(n,o){const i=I[a("Ca(3",679,614,651)](n),r=new d({baseMaterial:e,vertexShader:a("Nr3d",629,631,647),fragmentShader:i,side:t,uniforms:o[a("thnS",689,659,676)].uniforms});function c(n,o,t,e,i){return P(n-766,i)}function a(n,o,t,e,i){return P(e-147,n)}var s,u;this[c(1328,0,0,0,"$@^G")]=r,console[(s="tV5#",u=203,P(u- -339,s))](this[c(1286,0,0,0,"o@9e")])}static[O("GIfn",0,0,0,-119)](n){function o(n,o,t,e,i){return O(e,0,0,0,t-684)}n=e("By45",-310,-230,-306,-260)+n;if(/iTime|iTimeDelta/g.test(n))if("IOHte"===t(1244,"R#0G",1267,1320)){let n=_0x18723d[e("dX9e",-234,-267,-259,-268)](e("Ml^2",-302,-286,-361,-318));_0x5901ea="varying vec2 vUv;\nuniform sampler2D  utexture;\n"+n[1],_0x422c05=_0x5621bf[i("URV6",902,872,843)](/iChannel0|iChannel1|iChannel2|iChannel3/g,e("CY)0",-230,-252,-280,-283))}else{let r=n[i("*MQA",843,893,922)](o(0,0,559,"IfVQ"));n=(n=t(1293,"h0^K",1312,1354)+o(0,0,647,"h0^K")+r[1])[e("ghbK",-238,-233,-310,-263)](/iTime|iTimeDelta/g,t(1258,"Ml^2",1251,1291))}if(/iResolution\.[a-zA-Z_]+/g[o(0,0,586,"8WL8")](n))if(o(0,0,649,"URV6")===o(0,0,630,"qSTI")){let t=n.split(o(0,0,617,"!$AD"));n=(n=(n="varying vec2 vUv;\n"+e("*MQA",-258,-311,-343,-290)+t[1])[r(-350,-382,-379,"$@^G")](/iResolution\.[a-zA-Z_]+/g,"1."))[e("Ca(3",-340,-348,-341,-320)](/iResolution/g,"1.")}else{const n=_0x42b94b[o(0,0,569,"R#0G")][t(1211,"R#0G",1235,1262)][o(0,0,628,"U0Gn")](_0x33a8d8),c=_0x35804d[_0x2417fc],a=_0x53356a[c]||n;n[e("$@^G",-194,-271,-220,-241)]=_0x13e1c1[i("0)pU",913,965,998)](_0x26fd95),n.toString=a[r(-372,-325,-362,"^q3&")][i("$@^G",958,911,894)](a),_0x9d4f4c[c]=n}function t(n,o,t,e,i){return O(o,0,0,0,t-1342)}function e(n,o,t,e,i){return O(n,0,0,0,i- -210)}if(/iChannel0|iChannel1|iChannel2|iChannel3/g[r(-342,-287,-270,"h0^K")](n)){if("ymfEf"!==r(-392,-375,-322,"8WL8")){const n=_0x31fc3b[e("0)pU",0,0,0,-307)](_0x57d62f,arguments);return _0xce77b=null,n}{let e=n.split("varying vec2 vUv;\n");n=(n=i("k&PW",960,935,935)+o(0,0,645,"tV5#")+e[1])[t(0,"!$AD",1271)](/iChannel0|iChannel1|iChannel2|iChannel3/g,"utexture")}}function i(n,o,t,e,i){return O(n,0,0,0,t-999)}function r(n,o,t,e,i){return O(e,0,0,0,o- -264)}return n[e("thnS",0,0,0,-253)](/iMouse/g,t(0,"By45",1249)),n.replace(/void mainImage\( out vec4 fragColor, in vec2 fragCoord \)/g,"void main()")[r(0,-390,0,"14Me")](/fragColor/g,o(0,0,616,"By45"))[o(0,0,603,"CY)0")](/fragCoord/g,i("!$AD",0,895))}}const _={ref:"perspectiveCameraRef",position:[300,250,-122],fov:45,near:1,far:1e4},w=["object","side"],q=l({__name:"shadertoyMaterial",async setup(e){let d,l;const b={clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0},P={autoRotate:!0,enableDamping:!0},Q=new W({title:"参数"});let G=([d,l]=m(()=>o("./plugins/earthSample/image/earthA/moon_ring.png")),d=await d,l(),d),O=new i,q=f({material:{uniforms:{utime:{value:0},uresolution:{value:new r(40,40)},utexture:{value:G}}}}),T=new c(100,100,100),N=new I("/* \n    Kishimisu's video: https://youtu.be/f4s1h2YETNY\n    Kishumisu's shader link: https://www.shadertoy.com/view/mtyGWy\n*/\n\nvec3 palette( float t ) {\n    vec3 a = vec3(0.5, 0.5, 0.5);\n    vec3 b = vec3(0.5, 0.5, 0.5);\n    vec3 c = vec3(1.0, 1.0, 1.0);\n    vec3 d = vec3(0.263,0.416,0.557);\n\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;\n    vec2 uv0 = uv;\n    vec3 finalColor = vec3(0.0);\n    \n    for (float i = 0.0; i < 5.0; i++) {\n        uv = fract(uv * 1.5) - 0.5;\n\n        float d = length(uv) * exp(-length(uv0));\n\n        vec3 col = palette(length(uv0) + i*.4 + iTime*.4);\n\n        d = sin(d*8. + iTime)/8.;\n        d = abs(d);\n\n        d = pow(0.01 / d, 1.2);\n\n        finalColor += col * d;\n    }\n        \n    fragColor = vec4(finalColor, 1.0);\n}",q),D=new a(T,N.material);Q.addBlade({view:"list",label:"shadertoy在线地址",parse:n=>String(n),options:[{text:"1",value:"/* \n    Kishimisu's video: https://youtu.be/f4s1h2YETNY\n    Kishumisu's shader link: https://www.shadertoy.com/view/mtyGWy\n*/\n\nvec3 palette( float t ) {\n    vec3 a = vec3(0.5, 0.5, 0.5);\n    vec3 b = vec3(0.5, 0.5, 0.5);\n    vec3 c = vec3(1.0, 1.0, 1.0);\n    vec3 d = vec3(0.263,0.416,0.557);\n\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;\n    vec2 uv0 = uv;\n    vec3 finalColor = vec3(0.0);\n    \n    for (float i = 0.0; i < 5.0; i++) {\n        uv = fract(uv * 1.5) - 0.5;\n\n        float d = length(uv) * exp(-length(uv0));\n\n        vec3 col = palette(length(uv0) + i*.4 + iTime*.4);\n\n        d = sin(d*8. + iTime)/8.;\n        d = abs(d);\n\n        d = pow(0.01 / d, 1.2);\n\n        finalColor += col * d;\n    }\n        \n    fragColor = vec4(finalColor, 1.0);\n}"},{text:"2",value:"precision highp float;\n\n\nmat2 rot(float a) {\n    float c = cos(a), s = sin(a);\n    return mat2(c,s,-s,c);\n}\n\nconst float pi = acos(-1.0);\nconst float pi2 = pi*2.0;\n\nvec2 pmod(vec2 p, float r) {\n    float a = atan(p.x, p.y) + pi/r;\n    float n = pi2 / r;\n    a = floor(a/n)*n;\n    return p*rot(-a);\n}\n\nfloat box( vec3 p, vec3 b ) {\n    vec3 d = abs(p) - b;\n    return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\n}\n\nfloat ifsBox(vec3 p) {\n    for (int i=0; i<5; i++) {\n        p = abs(p) - 1.0;\n        p.xy *= rot(iTime*0.3);\n        p.xz *= rot(iTime*0.1);\n    }\n    p.xz *= rot(iTime);\n    return box(p, vec3(0.4,0.8,0.3));\n}\n\nfloat map(vec3 p, vec3 cPos) {\n    vec3 p1 = p;\n    p1.x = mod(p1.x-5., 10.) - 5.;\n    p1.y = mod(p1.y-5., 10.) - 5.;\n    p1.z = mod(p1.z, 16.)-8.;\n    p1.xy = pmod(p1.xy, 5.0);\n    return ifsBox(p1);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 p = (fragCoord.xy * 2.0 - iResolution.xy) / min(iResolution.x, iResolution.y);\n\n    vec3 cPos = vec3(0.0,0.0, -3.0 * iTime);\n    // vec3 cPos = vec3(0.3*sin(iTime*0.8), 0.4*cos(iTime*0.3), -6.0 * iTime);\n    vec3 cDir = normalize(vec3(0.0, 0.0, -1.0));\n    vec3 cUp  = vec3(sin(iTime), 1.0, 0.0);\n    vec3 cSide = cross(cDir, cUp);\n\n    vec3 ray = normalize(cSide * p.x + cUp * p.y + cDir);\n\n    // Phantom Mode https://www.shadertoy.com/view/MtScWW by aiekick\n    float acc = 0.0;\n    float acc2 = 0.0;\n    float t = 0.0;\n    for (int i = 0; i < 99; i++) {\n        vec3 pos = cPos + ray * t;\n        float dist = map(pos, cPos);\n        dist = max(abs(dist), 0.02);\n        float a = exp(-dist*3.0);\n        if (mod(length(pos)+24.0*iTime, 30.0) < 3.0) {\n            a *= 2.0;\n            acc2 += a;\n        }\n        acc += a;\n        t += dist * 0.5;\n    }\n\n    vec3 col = vec3(acc * 0.01, acc * 0.011 + acc2*0.002, acc * 0.012+ acc2*0.005);\n    fragColor = vec4(col, 1.0 - t * 0.03);\n}"}],value:"/* \n    Kishimisu's video: https://youtu.be/f4s1h2YETNY\n    Kishumisu's shader link: https://www.shadertoy.com/view/mtyGWy\n*/\n\nvec3 palette( float t ) {\n    vec3 a = vec3(0.5, 0.5, 0.5);\n    vec3 b = vec3(0.5, 0.5, 0.5);\n    vec3 c = vec3(1.0, 1.0, 1.0);\n    vec3 d = vec3(0.263,0.416,0.557);\n\n    return a + b*cos( 6.28318*(c*t+d) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;\n    vec2 uv0 = uv;\n    vec3 finalColor = vec3(0.0);\n    \n    for (float i = 0.0; i < 5.0; i++) {\n        uv = fract(uv * 1.5) - 0.5;\n\n        float d = length(uv) * exp(-length(uv0));\n\n        vec3 col = palette(length(uv0) + i*.4 + iTime*.4);\n\n        d = sin(d*8. + iTime)/8.;\n        d = abs(d);\n\n        d = pow(0.01 / d, 1.2);\n\n        finalColor += col * d;\n    }\n        \n    fragColor = vec4(finalColor, 1.0);\n}"}).on("change",n=>{N=new I(n.value,q),D.material=N.material,O.add(D),K(O,T)});let U=new c(100,100,100),J=new s(100,100),L=new u(100,10,100,16);Q.addBlade({view:"list",label:"几何体",options:[{text:"BOX",value:U},{text:"Plane",value:J},{text:"TorusKnot",value:L}],value:U}).on("change",n=>{T=n.value,D.geometry=T,O.add(D),K(O,T)});const K=(n,o)=>{n.children[0].geometry.dispose(),n.children[0].geometry=o},Z=({delta:n})=>{q.material.uniforms.utime.value+=10*n};return p(()=>{O.add(D),K(O,T)}),(o,e)=>{const i=v("TresCanvas");return x(),h(i,j(b,{"window-size":"",onLoop:Z}),{default:k(()=>[C("TresPerspectiveCamera",_,null,512),g(S(n),R(y(P)),null,16),e[0]||(e[0]=C("TresAmbientLight",{color:"#ffffff"},null,-1)),e[1]||(e[1]=C("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),C("primitive",{object:S(O),side:S(t)},null,8,w),e[2]||(e[2]=C("TresAxesHelper",{args:[1e3],position:[0,19,0]},null,-1)),e[3]||(e[3]=C("TresGridHelper",{args:[6e3,100],position:[0,19,0]},null,-1))]),_:1},16)}}});export{q as default};

import{_ as n,C as t,cC as e,c3 as o,a0 as i,a as r,ab as a}from"./three.sBrYSCgq1741007821308.js";import{m as s,e as l,a as u}from"./@tresjs.u6hJLBm41741007821308.js";import{d as c,b as f,a3 as p,a2 as m,o as g,H as b,N as v,aj as y,ak as d,u as h}from"./@vue.NRI7TcgI1741007821308.js";function w(){const n=["xRayEffect","init",'{}.constructor("return this")( )',"trace","debu","verticesNeedUpdate","map","offsetY","bind","counter","return (function() ","4425412PQkWGc","uniforms","input","exception","traverse","64hgMihi","Mesh","5071664BaGugm","51973GnwFCt","5nvEcYB","#84ccff","console","TresMeshRef","call","TresBufferGeometry","constructor","Color","gger","model","810354Ctpftp","apply","function *\\( *\\)","test","error","glowColor","string","DoubleSide","24768AsUyRu","chain","sin","dispose","10226088vstesA","length","opacity","AdditiveBlending","TresShaderMaterial","TresMesh","31024210VGVmXF","value","info","35scZDri","geometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","uTime","uOpacity"];return(w=function(){return n})()}const _=P;!function(n,t){const e=P,o=w();for(;;)try{if(836381===-parseInt(e(222))/1*(-parseInt(e(219))/2)+-parseInt(e(241))/3+-parseInt(e(271))/4*(-parseInt(e(223))/5)+-parseInt(e(233))/6*(-parseInt(e(254))/7)+-parseInt(e(221))/8+parseInt(e(245))/9+-parseInt(e(251))/10)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(234)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){z(this,(function(){const n=P,t=new RegExp(n(235)),e=new RegExp(n(256),"i"),o=S(n(261));t[n(236)](o+n(242))&&e[n(236)](o+n(273))?S():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(234)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function P(n,t){const e=w();return(P=function(n,t){return e[n-=218]})(n,t)}x(void 0,(function(){const n=P;let t;try{t=Function(n(270)+n(262)+");")()}catch(i){t=window}const e=t[n(225)]=t[n(225)]||{},o=["log","warn",n(253),n(237),n(274),"table",n(263)];for(let r=0;r<o[n(246)];r++){const t=x[n(229)].prototype[n(268)](x),i=o[r],a=e[i]||t;t.__proto__=x.bind(x),t.toString=a.toString.bind(a),e[i]=t}}))();const T=c({__name:_(260),props:{model:{},color:{default:_(224)},opacity:{default:1}},async setup(o){const i=_;let r,a;const c=o,h=f(),w=[];c[i(232)][i(218)]((t=>{const e=i;t instanceof n[e(220)]&&(t.geometry[e(265)]=!0,w.push(t[e(255)]))}));const z=([r,a]=p((()=>u({map:"./plugins/medical/image/brainXRayLight.png"}))),r=await r,a(),r),x={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new t(c.color)},lightningTexture:{type:"t",value:z[i(266)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:c[i(247)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[i(240)],blending:n[i(248)],depthWrite:!1};x[i(272)][i(267)][i(252)]=Math[i(243)](5);const{camera:P}=s(),{onLoop:T}=l();return T((({delta:n})=>{const t=i;P.value.position&&h[t(252)]&&(x[t(272)][t(258)].value+=n)})),m((()=>{const t=i;h[t(252)]&&(h[t(252)][t(255)][t(244)](),h[t(252)][t(255)]=e(w)),c.color&&(x[t(272)][t(238)][t(252)]=new(n[t(230)])(c.color)),c.opacity&&(x.uniforms[t(259)].value=c[t(247)])})),(n,t)=>{const e=i;return g(),b(e(250),{ref_key:e(226),ref:h},[t[0]||(t[0]=v(e(228),null,null,-1)),v(e(249),y(d(x)),null,16)],512)}}});function S(n){function t(n){const e=P;if(typeof n===e(239))return function(n){}.constructor(e(257))[e(234)](e(269));1!==(""+n/n)[e(246)]||n%20==0?function(){return!0}[e(229)](e(264)+"gger")[e(227)]("action"):function(){return!1}[e(229)](e(264)+e(231)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const C=B;!function(n,t){const e=B,o=F();for(;;)try{if(260239===-parseInt(e(455))/1+-parseInt(e(435))/2*(-parseInt(e(429))/3)+-parseInt(e(447))/4*(-parseInt(e(448))/5)+parseInt(e(444))/6*(-parseInt(e(459))/7)+parseInt(e(418))/8*(parseInt(e(441))/9)+-parseInt(e(392))/10*(-parseInt(e(399))/11)+-parseInt(e(450))/12)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[B(394)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=B,t=new RegExp(n(406)),e=new RegExp(n(457),"i"),o=j(n(407));t[n(389)](o+n(442))&&e.test(o+n(395))?j():o("0")}))()}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[B(394)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function B(n,t){const e=F();return(B=function(n,t){return e[n-=387]})(n,t)}function F(){const n=["uTime","array","stateObject","console","gger","3jioIwA","computeBoundingSphere","randFloat","brainstem","push","warn","264206iCueWH","color","prototype","ShaderMaterial","BufferGeometryRef","while (true) {}","907623iTzrJM","chain","bubbles","2266596BGVhvK","length","afective","28iNqXTM","191910PZZlZe","geometry","3292956OFPeVs","glowColor","AdditiveBlending","uniforms","includes","169036UgGqUP","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Mesh","7jofHfc","opacity","info","map","position","attributes","test","value","counter","1490awiagg","#FFF","apply","input","setAttribute","constructor","__proto__","20471SBZPUz","action","toString","log",'{}.constructor("return this")( )',"bind","MathUtils","function *\\( *\\)","init","Float32BufferAttribute","TresBufferGeometry","process","bridge","randInt","cerebellum","uSlowTime","exception","Color","mergeGeometries","32nbxSBj","uOpacity","analitic","debu","TresMeshRef","semantic"];return(F=function(){return n})()}M(void 0,(function(){const n=B;let t;try{t=Function("return (function() "+n(403)+");")()}catch(i){t=window}const e=t[n(427)]=t[n(427)]||{},o=[n(402),n(434),n(461),"error",n(415),n(456),"trace"];for(let r=0;r<o[n(445)];r++){const t=M[n(397)][n(437)].bind(M),i=o[r],a=e[i]||t;t[n(398)]=M[n(404)](M),t[n(401)]=a[n(401)][n(404)](a),e[i]=t}}))();const U=c({__name:"bubblesEffect",props:{model:{},color:{default:C(393)},opacity:{default:1}},setup(t){const e=C,s=t,u=[e(446),e(423),"episodic",e(410),"amigdala",e(432),e(411),e(413),e(420)],c={};s.model.traverse((t=>{const i=e;t instanceof n[i(458)]&&u[i(462)]((n=>{const e=i;if(t.name[e(454)](n)){if(c[n]){const i=[c[n],t[e(449)]];return c[n]=o[e(417)](i),c}return c[n]=t[e(449)]}return[]}))}));const p=f(),w=new(n[e(438)])({uniforms:{glowColor:{type:"c",value:new(n[e(416)])(s[e(436)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:s[e(460)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:n[e(452)],side:i,depthTest:!1,vertexColors:!1,transparent:!0});m((()=>{p[e(390)]&&(()=>{const t=e,o=[],i=[],s=[],l=[];for(let e=0;e<2e4-3*u[t(445)];e+=1){const a=n[t(405)][t(412)](0,u[t(445)]-1),f=u[a],p=c[f][t(388)][t(387)][t(425)][3*e+0]||0,m=c[f][t(388)][t(387)][t(425)][3*e+1]||0,g=c[f][t(388)][t(387)][t(425)][3*e+2]||0;if(i[t(433)](p,m,g),o[e]=n[t(405)][t(431)](10,20),e%100==0){const n=r[t(412)](100,250)+m;l[t(433)](p,n,g,1)}else l.push(p,m,g,0);s[2*e+0]=n[t(405)][t(431)](.5,1.5),s[2*e+1]=2.5}p.value.setAttribute("aDelayDuration",new(n[t(408)])(s,2)),p[t(390)][t(396)](t(443),new a(l,4)),p[t(390)][t(396)]("position",new(n[t(408)])(i,3)),p[t(390)][t(396)]("color",new(n[t(408)])([],3)),p[t(390)][t(396)]("size",new(n[t(408)])(o,1)),p[t(390)][t(430)]()})()}));const _=f(),{onLoop:z}=l();return z((({delta:t})=>{const o=e;_[o(390)]&&(_[o(390)].material[o(453)][o(424)][o(390)]+=.05,_[o(390)].material[o(453)][o(414)][o(390)]+=1/400),s[o(436)]&&(w[o(453)][o(451)][o(390)]=new(n[o(416)])(s[o(436)])),s.opacity&&(w.uniforms[o(419)].value=s.opacity)})),(n,t)=>{const o=e;return g(),b("TresPoints",{ref_key:o(422),ref:_},[v(o(409),{ref_key:o(439),ref:p},null,512),v("TresShaderMaterial",y(d(h(w))),null,16)],512)}}});function j(n){function t(n){const e=B;if("string"==typeof n)return function(n){}[e(397)](e(440))[e(394)](e(391));1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}[e(397)](e(421)+e(428)).call(e(400)):function(){return!1}[e(397)]("debu"+e(428))[e(394)](e(426)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as _,U as a};

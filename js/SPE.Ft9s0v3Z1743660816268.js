import{T as t,bR as e,b as i,a9 as n,V as o,t as s,C as r}from"./three.2wx8FU0g1743660816268.js";const a=c;function c(t,e){const i=l();return c=function(t,e){return i[t-=105]},c(t,e)}!function(t,e){const i=c,n=l();for(;;)try{if(239995===parseInt(i(564))/1*(parseInt(i(151))/2)+parseInt(i(559))/3*(-parseInt(i(256))/4)+-parseInt(i(108))/5+parseInt(i(538))/6*(parseInt(i(408))/7)+parseInt(i(410))/8*(-parseInt(i(551))/9)+-parseInt(i(126))/10*(-parseInt(i(366))/11)+parseInt(i(152))/12)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[c(328)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){h(this,(function(){const t=c,e=new RegExp(t(193)),i=new RegExp(t(194),"i"),n=p(t(353));e.test(n+"chain")&&i[t(489)](n+t(145))?p():n("0")}))()}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[c(328)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function l(){const t=["_updateBuffers","isStatic","normalize","wiggle","getPool","NUMBER","SPHERE","    force *= drag;","    vec3 force = vec3( 0.0 );","push","float getAlive() {","LINE","addPool","SHOULD_ROTATE_TEXTURE","input","interpolateArray","getFromPool","depthWrite","    float fIndex = 0.0;","randomVector3OnDisc","10trFTaH","3281424cAnOOa","_spread","ensureInstanceOf","sqrt","colorOverLifetime","logdepthbuf_fragment","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","depthTest","BOOLEAN","info","deltaTime","setVec4Components","_applyAttributesToGeometry","stateObject","   }","    pos += force;","_assignParamsValue","attributeOffset","releaseIntoPool","elements","removeEmitter","color","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","        vSpriteSheet.w = rowNorm;","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","prototype","getComponentValueAtIndex","    force += vel;","duration","type","float getAge() {","        float loopCount = textureAnimation.w;","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","    return max(sign(x - y), 0.0);","_radius","_assignPositionValue","_triggerSingleEmitter","SHOULD_ROTATE_PARTICLES","updateCounts","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_assignAngleValue","float when_lt(float x, float y) {","clone","uuid","setDrawRange","  return 1.0 - when_gt(x, y);","      mat4 rotationMatrix;","activeMultiplier","position","   return acceleration.xyz * age;","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","common","TypedArrayHelper","attribute vec4 params;","       axis = normalize(axis);","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","rotationFunctions","randomDirectionVector3OnSphere","        float perspective = scale / length( mvPosition.xyz );","frameCount","    vec3 value = vec3( 0.0 );","updateMin","boolean","uniform float scale;","_assignForceValue","alive","    highp float isAlive = when_gt( alive, 0.0 );","       fIndex = float( i );","uniform float runTime;","random","_poolCreationSettings","randomColorAsHex","textureLoop","angleSpread","_spreadClamp","Vector4","      translated = rotationCenter - pos;","      vec3 translated;","   return params.z;","textureFrameCount","length","dispose","arrayValuesAreEqual","emitters","_axis","unshift","logdepthbuf_pars_fragment","resetDynamic","_createNewWhenPoolEmpty","colorize","SPE.Group pool ran out.","spe","setUpdateRange","enable","    #ifdef COLORIZE","scale","bind","_attributesNeedRefresh","vec3 getVelocity( in float age ) {","        float framesY = vSpriteSheet.y;","abs","142184IsBfVb","        float rowNorm = vSpriteSheet.w;","ShaderMaterial","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","subarray","fragment","particles, can support only","   c *= vec3( 2.0 );","bufferUpdateCount","attributes","bufferAttribute","       vec3 c = vec3(1.0);","      }","cos","texture","_checkParticleAges","logdepthbuf_pars_vertex","uniform vec4 textureAnimation;","_ensureTypedArray","geometry","float when_ge(float x, float y) {","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","    highp float value = 0.0;","TypedArray is already of size:","componentSize","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    vec3 vel = getVelocity( age );","ShaderChunk","_assignRotationValue","_onRemove","activationIndex","Vector3","float when_gt(float x, float y) {","roundToNearestMultiple","float or(float a, float b) {","logdepthbuf_vertex","table","vec3 getAcceleration( in float age ) {","attribute vec3 velocity;","emitterIDs","setSize","debu","    vColor = vec4( c, o );","   float b = mod( hex, PACKED_COLOR_SIZE );","_attributesNeedDynamicReset","toString","        float framesX = textureAnimation.x;",'{}.constructor("return this")( )',"`emitter` argument must be instance of SPE.Emitter. Was provided with:","    #ifdef ALPHATEST","clamp","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","MathUtils","activeParticleCount","_updateUniforms","_angle","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","           unpackColor( color.w )","TypedArrayConstructor","tick","particleCount","forceFetchingFunctions","    ","amd","#endif","   return params.y;","runTime","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","    highp float positionInTime = (age / maxAge);","_rotationCenter","Group","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","apply","forceUpdateAll","        float columnNorm = column / framesX;","   return params.x;","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","_updateAttributeUpdateRange","updateFlags","    #endif","attribute vec4 rotation;","activationEnd","isArray","Invalid argument types, or argument types do not match:","remove","transparent","direction","float when_eq( float x, float y ) {","spreadClamp","resetUpdateRange","float and(float a, float b) {","Will not resize.","constructor","string","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","attribute vec4 acceleration;","reset","init","material","        float wiggleAmount = positionInTime * getWiggle();","   c.r = r / PACKED_COLOR_DIVISOR;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","loop","_resetBufferRanges","ensureArrayTypedArg","dynamicBuffer","    float shouldApplyValue = 0.0;","      rotationMatrix = getRotationMatrix( axis, angle );","max","NEGATIVE_INFINITY","6842aTTbUW","lerp","attribute vec4 size;","lerpTypeAgnostic","opacity","_decrementParticleCount","_radiusScale","        float framesY = textureAnimation.y;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","Emitter","setAttribute","radiusScale","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","varyings","_assignValue","ShaderAttribute","           unpackColor( color.x ),","      float angle = 0.0;","    gl_Position = projectionMatrix * mvPosition;","    return value;","    highp float age = getAge();","setVec3Components","gger","undefined","fog_pars_vertex","usage","    return a * b;","_resetParticle","setRGB","   return c;","        pos.z += wiggleSin;","           unpackColor( color.y ),","setMat4","exports","fog","randomFloat","shaderChunks","shrink","flagUpdate","setMat3","ensureValueOverLifetimeCompliance","distribution","1558550GwhEfK","      vec3 axis = unpackRotationAxis( rotation.x );","2614984WplxpN","particlesPerSecond","replace","    vec3 outgoingLight = vColor.xyz;","float getWiggle() {","maxParticleCount","uniform float deltaTime;","distributions","resetFlags","randomVector3","randomVector3OnLine","    #else","drag","OBJECT","_distributionClamp","        float columnNorm = vSpriteSheet.z;","error","        vSpriteSheet.y = 1.0 / framesY;","Color","value","updateMap","Emitter does not belong to a group, cannot remove.","hasOwnProperty","_incrementParticleCount","types","           unpackColor( color.z ),","itemSize","_setAttributeOffset","attributeEnd","fog_pars_fragment","center","    return min(a + b, 1.0);","branchAvoidanceFunctions","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","DISC","disable","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       float x = gl_PointCoord.x - 0.5;","count","needsUpdate","ensureTypedArg","   c.b = b / PACKED_COLOR_DIVISOR;","fog_fragment","   return velocity * age;","round","addEmitter","        pos = getRotation( pos, positionInTime );","       float s = sin(angle);","number","    vec4 rotatedTexture = texture2D( tex, vUv );","defineProperty","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","_createGetterSetters","arrayType","rotation","StaticDrawUsage","ensureArrayInstanceOf","void main() {","shaders","attributeCount","_value","typedArray","warn","_center","vec3 unpackColor( in float hex ) {","getLength","indexOffset","DynamicDrawUsage","paramsArray","velocity","hasPerspective","randomDirectionVector3OnDisc","radius","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","bufferUpdateRanges","        float column = floor(mod( frameNumber, framesX ));","        vSpriteSheet.x = 1.0 / framesX;","textureFrames","join","test","       float s = sin( -vAngle );","updateMax","getValueAtIndex","group","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","blending","attribute vec4 color;","mesh","           positionInTime,","#define PACKED_COLOR_DIVISOR 255.0","size","_randomise","_activateParticles","floatOverLifetime","onParticleSpawn","   vec3 c = vec3( 0.0 );","      vec3 center = rotationCenter;","acceleration","multiplyScalar","       float y = 1.0 - gl_PointCoord.y - 0.5;","frames","REVISION","unpackRotationAxis","angle","AdditiveBlending","    #ifdef SHOULD_WIGGLE_PARTICLES","_setBufferUpdateRanges","defines","sin","generateUUID","uniform sampler2D tex;","   c.g = g / PACKED_COLOR_DIVISOR;","vec4 getPosition( in float age ) {","uniforms","add","SPE.Group: maxParticleCount exceeded. Requesting","BufferGeometry","maxAge","array","function","_angleSpread","   c -= vec3( 1.0 );","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","grow","BOX","fixedTimeStep","utils","rotationCenter","6Gdtpnj","        float row = floor( (frameNumber - column) / framesX );","POSITIVE_INFINITY","spread","_updateDefines","    gl_PointSize = pointSizePerspective;","_calculatePPSValue","_axisSpread","age","min","Emitter does not exist in this group. Will not remove.","attributeKeys","bufferUpdateKeys","9TsFExm","    highp float maxAge = getMaxAge();","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","_assignAbsLifetimeValue","copy","valueOverLifetimeLength","counter","setNumber","3FXdbNI","randomise","    }","    varying vec4 vSpriteSheet;","setVec3","53354fKrbtZ","Points","        float rowNorm = row / framesY;","    return 1.0 - abs( sign( x - y ) );","console","setVec4","    #ifdef SHOULD_ROTATE_TEXTURE","Vector2","vec3 unpackRotationAxis( in float hex ) {","updateRange","float getMaxAge() {","triggerPoolEmitter","typeSizeMap","call","getPackedRotationAxis","1041760zXNpfa","SHOULD_WIGGLE_PARTICLES","keys","params","_static","BufferAttribute","alphaTest","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","        pos.y += wiggleCos;","setVec2","floor","set","trace","_pool","offset","    #ifdef SHOULD_ROTATE_PARTICLES","setFromArray","770arjEUO","setVec2Components","_assignColorValue","indexOf","splice"];return(l=function(){return t})()}u(void 0,(function(){const t=c,e=function(){const t=c;let e;try{e=Function("return (function() "+t(303)+");")()}catch(i){e=window}return e}(),i=e[t(568)]=e.console||{},n=["log",t(472),"info",t(426),"exception",t(292),t(121)];for(let o=0;o<n[t(235)];o++){const e=u[t(348)].prototype[t(251)](u),s=n[o],r=i[s]||e;e.__proto__=u.bind(u),e[t(301)]=r.toString[t(251)](r),i[s]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function p(t){function e(t){const i=c;if(typeof t===i(349))return function(t){}[i(348)]("while (true) {}")[i(328)](i(557));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(i(297)+"gger")[i(106)]("action"):function(){return!1}[i(348)]("debu"+i(388)).apply(i(166)),e(++t)}try{if(t)return e;e(0)}catch(i){}}typeof define===a(529)&&define[a(319)]?define(a(246),f):typeof exports!==a(389)&&typeof module!==a(389)&&(module[a(399)]=f),f[a(207)]=function(t,e,i,n){const o=a;this.componentSize=i||1,this[o(500)]=e||1,this[o(314)]=t||Float32Array,this[o(528)]=new t(e*this.componentSize),this[o(476)]=n||0},f.TypedArrayHelper[a(348)]=f[a(207)],f[a(207)][a(179)].setSize=function(t,e){const i=a,n=this.array.length;return!e&&(t*=this.componentSize),t<n?this[i(403)](t):t>n?this.grow(t):void console[i(162)](i(279),t+".",i(347))},f[a(207)][a(179)][a(403)]=function(t){const e=a;return this[e(528)]=this[e(528)][e(260)](0,t),this.size=t,this},f.TypedArrayHelper[a(179)][a(533)]=function(t){const e=a,i=this[e(528)],n=new(this[e(314)])(t);return n[e(120)](i),this[e(528)]=n,this[e(500)]=t,this},f[a(207)][a(179)].splice=function(t,e){const i=a;t*=this.componentSize,e*=this[i(280)];const n=[],o=this[i(528)],s=o.length;for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(140)](o[r]);return this.setFromArray(0,n),this},f[a(207)][a(179)][a(125)]=function(t,e){const i=a,n=t+e.length;return n>this[i(528)][i(235)]?this[i(533)](n):n<this.array[i(235)]&&this.shrink(n),this[i(528)].set(e,this.indexOffset+t),this},f[a(207)][a(179)][a(118)]=function(t,e){return this[a(127)](t,e.x,e.y)},f.TypedArrayHelper.prototype[a(127)]=function(t,e,i){const n=a,o=this[n(528)],s=this[n(476)]+t*this[n(280)];return o[s]=e,o[s+1]=i,this},f[a(207)][a(179)][a(563)]=function(t,e){return this[a(387)](t,e.x,e.y,e.z)},f[a(207)][a(179)][a(387)]=function(t,e,i,n){const o=a,s=this[o(528)],r=this[o(476)]+t*this.componentSize;return s[r]=e,s[r+1]=i,s[r+2]=n,this},f.TypedArrayHelper[a(179)][a(569)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},f.TypedArrayHelper[a(179)].setVec4Components=function(t,e,i,n,o){const s=a,r=this[s(528)],c=this.indexOffset+t*this[s(280)];return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=o,this},f[a(207)][a(179)][a(405)]=function(t,e){const i=a;return this.setFromArray(this[i(476)]+t*this.componentSize,e[i(172)])},f[a(207)][a(179)][a(398)]=function(t,e){const i=a;return this[i(125)](this[i(476)]+t*this[i(280)],e.elements)},f[a(207)][a(179)].setColor=function(t,e){return this[a(387)](t,e.r,e.g,e.b)},f[a(207)][a(179)][a(558)]=function(t,e){const i=a;return this.array[this[i(476)]+t*this[i(280)]]=e,this},f[a(207)][a(179)][a(492)]=function(t){const e=a;return this.array[this[e(476)]+t]},f[a(207)].prototype[a(180)]=function(t){const e=a;return this[e(528)][e(260)](this[e(476)]+t*this[e(280)])},f[a(381)]=function(t,e,i){const n=a,o=f.ShaderAttribute[n(105)];this[n(183)]=typeof t===n(349)&&o.hasOwnProperty(t)?t:"f",this[n(280)]=o[this[n(183)]],this.arrayType=i||Float32Array,this[n(471)]=null,this.bufferAttribute=null,this[n(361)]=!!e,this[n(216)]=0,this[n(491)]=0},f[a(381)][a(348)]=f[a(381)],f[a(381)][a(105)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f[a(381)][a(179)][a(247)]=function(t,e){const i=a;this[i(216)]=Math[i(547)](t*this.componentSize,this.updateMin*this.componentSize),this.updateMax=Math[i(364)](e*this.componentSize,this[i(491)]*this[i(280)])},f[a(381)][a(179)][a(404)]=function(){const t=a,e=this[t(266)];!e[t(573)]&&(e[t(573)]={});const i=e[t(573)];i.offset=this.updateMin,i[t(448)]=Math[t(547)](this[t(491)]-this.updateMin+this.componentSize,this[t(471)][t(528)].length),e[t(449)]=!0},f[a(381)][a(179)][a(345)]=function(){this.updateMin=0,this.updateMax=0},f[a(381)].prototype[a(242)]=function(){const e=a;this[e(266)][e(391)]=this[e(361)]?t[e(477)]:t[e(465)]},f[a(381)][a(179)][a(130)]=function(t,e){const i=a;this[i(471)][i(130)](t,e),this.forceUpdateAll()},f[a(381)].prototype.forceUpdateAll=function(){const e=a;this.bufferAttribute[e(528)]=this[e(471)][e(528)],this.bufferAttribute[e(573)].offset=0,this[e(266)][e(573)].count=-1,this[e(266)][e(391)]=t[e(465)],this[e(266)].needsUpdate=!0},f.ShaderAttribute[a(179)][a(274)]=function(t){const e=a;null!==this[e(471)]&&this.typedArray[e(500)]===t*this[e(280)]||(null!==this.typedArray&&this[e(471)].size!==t?this[e(471)][e(296)](t):null===this.typedArray&&(this.typedArray=new(f[e(207)])(this[e(463)],t,this[e(280)])))},f[a(381)][a(179)]._createBufferAttribute=function(e){const i=a;if(this[i(274)](e),null!==this[i(266)])return this.bufferAttribute.array=this.typedArray[i(528)],parseFloat(t[i(511)])>=81&&(this[i(266)].count=this[i(266)][i(528)][i(235)]/this[i(266)][i(436)]),void(this[i(266)][i(449)]=!0);this[i(266)]=new(t[i(113)])(this[i(471)][i(528)],this[i(280)]),this[i(266)][i(391)]=this.dynamicBuffer?t[i(477)]:t[i(465)]},f[a(381)].prototype[a(475)]=function(){const t=a;return null===this.typedArray?0:this[t(471)][t(528)][t(235)]},f[a(402)]={defines:["#define PACKED_COLOR_SIZE 256.0",a(499)].join("\n"),uniforms:[a(416),a(223),a(520),a(273),a(218)].join("\n"),attributes:[a(351),a(294),a(336),"attribute vec3 rotationCenter;",a(208),a(368),"attribute vec4 angle;",a(496),"attribute vec4 opacity;"][a(488)]("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;",a(320),"#ifdef SHOULD_CALCULATE_SPRITE",a(562),a(320)][a(488)]("\n"),branchAvoidanceFunctions:[a(288),a(187),"}",a(196),a(186),"}",a(343),a(567),"}",a(276),"  return 1.0 - when_lt(x, y);","}","float when_le(float x, float y) {",a(200),"}",a(346),a(392),"}",a(290),a(441),"}"].join("\n"),unpackColor:[a(474),a(505),a(323),a(178),a(299),a(356),a(521),a(451),"   return c;","}"].join("\n"),unpackRotationAxis:[a(572),a(505),a(323),a(178),a(299),a(356),"   c.g = g / PACKED_COLOR_DIVISOR;",a(451),a(263),a(531),a(395),"}"][a(488)]("\n"),floatOverLifetime:[a(176),a(278),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",a(149),a(362),a(175),"",a(312),a(222),a(205),a(281),a(561),"",a(385),"}"].join("\n"),colorOverLifetime:[a(378),a(215),a(116),a(553),a(277),a(385),"}"][a(488)]("\n"),paramFetchingFunctions:[a(141),a(331),"}",a(184),a(321),"}",a(574),a(233),"}",a(414),"   return params.w;","}"][a(488)]("\n"),forceFetchingFunctions:[a(522),"   return modelViewMatrix * vec4( position, 1.0 );","}",a(253),a(453),"}",a(293),a(204),"}"][a(488)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",a(446),a(209),a(457),"       float c = cos(angle);","       float oc = 1.0 - c;","",a(532),a(158),a(159),"                   0.0,                                0.0,                                0.0,                                1.0);",a(167),"",a(483),"      if( rotation.y == 0.0 ) {","           return pos;",a(268),"",a(409),a(506),a(232),a(201),a(383),a(357),a(115),a(231),a(363),a(443),a(167),"#endif"][a(488)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",a(570),a(447),a(509),"       float c = cos( -vAngle );",a(490),a(350),"    #endif","","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;",a(254),a(425),a(257),"        vUv.x = gl_PointCoord.x * framesX + columnNorm;",a(307),a(335),"",a(459)].join("\n")},f[a(468)]={vertex:[f.shaderChunks[a(517)],f[a(402)][a(523)],f[a(402)][a(265)],f[a(402)].varyings,t[a(283)].common,e[a(272)],t[a(283)][a(390)],f[a(402)][a(442)],f[a(402)].unpackColor,f[a(402)][a(512)],f[a(402)][a(503)],f[a(402)][a(156)],f[a(402)].paramFetchingFunctions,f[a(402)][a(317)],f[a(402)][a(211)],"void main() {",a(386),"    highp float alive = getAlive();",a(552),a(324),a(221),a(515),a(355),"        float wiggleSin = isAlive * sin( wiggleAmount );","        float wiggleCos = isAlive * cos( wiggleAmount );","    #endif",a(282),"    vec3 accel = getAcceleration( age );",a(139),"    vec3 pos = vec3( position );",a(259),a(181),a(138),"    force += accel * age;",a(168),a(515),"        pos.x += wiggleSin;",a(117),a(396),a(335),a(124),a(456),"    #endif",a(332),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","    #ifdef HAS_PERSPECTIVE",a(213),"    #else","        float perspective = 1.0;","    #endif","    float pointSizePerspective = pointSize * perspective;",a(249),"       vec3 c = isAlive * getColorOverLifetime(",a(498),a(382),a(397),a(435),a(313),"       );",a(421),a(267),"    #endif",a(494),a(298),a(570),a(327),a(335),"    #ifdef SHOULD_CALCULATE_SPRITE",a(302),a(373),a(185),"        float totalFrames = textureAnimation.z;",a(210),a(485),a(539),a(330),a(566),a(486),a(427),"        vSpriteSheet.z = columnNorm;",a(177),a(335),a(543),a(384),e[a(291)],e.fog_vertex,"}"][a(488)]("\n"),fragment:[f[a(402)].uniforms,t[a(283)][a(206)],e[a(439)],t[a(283)][a(241)],f[a(402)][a(379)],f[a(402)].branchAvoidanceFunctions,a(467),a(413),a(318),a(305),"       if ( vColor.w < float(ALPHATEST) ) discard;",a(335),f[a(402)].rotateTexture,t[a(283)][a(157)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",a(374),t[a(283)][a(452)],"}"][a(488)]("\n")},f[a(536)]={types:{BOOLEAN:a(217),STRING:a(349),NUMBER:a(458),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array.isArray(t)){for(let o=t[n(235)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(450)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array[n(338)](t)){for(let o=t[n(235)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(338)](t[n(470)])&&(t[n(470)]=[t[n(470)]]),!1===Array.isArray(t[n(153)])&&(t[n(153)]=[t[n(153)]]);const o=this.clamp(t[n(470)][n(235)],e,i),s=this[n(306)](t[n(153)][n(235)],e,i),r=Math[n(364)](o,s);t[n(470)].length!==r&&(t[n(470)]=this[n(146)](t[n(470)],r)),t._spread[n(235)]!==r&&(t[n(153)]=this[n(146)](t._spread,r))},interpolateArray(t,e){const i=a,n=t[i(235)],o=[typeof t[0][i(197)]===i(529)?t[0][i(197)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(119)](e),a=Math.ceil(e),c=e-n;o[r]=this[i(369)](t[n],t[a],c)}return o.push(typeof t[n-1][i(197)]===i(529)?t[n-1][i(197)]():t[n-1]),o},clamp(t,e,i){const n=a;return Math.max(e,Math[n(547)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[a(224)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=a;let s,r=this[o(434)];return typeof e===r.NUMBER&&typeof i===r[o(136)]?e+(i-e)*n:e instanceof t[o(571)]&&i instanceof t[o(571)]?(s=e[o(197)](),s.x=this[o(367)](e.x,i.x,n),s.y=this.lerp(e.y,i.y,n),s):e instanceof t[o(287)]&&i instanceof t[o(287)]?(s=e[o(197)](),s.x=this[o(367)](e.x,i.x,n),s.y=this[o(367)](e.y,i.y,n),s.z=this[o(367)](e.z,i.z,n),s):e instanceof t[o(230)]&&i instanceof t[o(230)]?(s=e.clone(),s.x=this.lerp(e.x,i.x,n),s.y=this[o(367)](e.y,i.y,n),s.z=this[o(367)](e.z,i.z,n),s.w=this[o(367)](e.w,i.w,n),s):e instanceof t[o(428)]&&i instanceof t[o(428)]?(s=e[o(197)](),s.r=this[o(367)](e.r,i.r,n),s.g=this[o(367)](e.g,i.g,n),s.b=this[o(367)](e.b,i.b,n),s):void console[o(472)](o(339),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=a;let n=0;return 0===e?t:(n=Math[i(255)](t)%e,0===n?t:t<0?-(Math[i(255)](t)-n):t+e-n)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[a(224)]()-.5),randomVector3(t,e,i,n,o){const s=a;let r=i.x+(Math[s(224)]()*n.x-.5*n.x),c=i.y+(Math[s(224)]()*n.y-.5*n.y),h=i.z+(Math[s(224)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(289)](r,o.x),c=.5*-o.y+this.roundToNearestMultiple(c,o.y),h=.5*-o.z+this[s(289)](h,o.z)),t[s(471)][s(387)](e,r,c,h)},randomColor(t,e,i,n){const o=a;let s=i.r+Math.random()*n.x,r=i.g+Math[o(224)]()*n.y,c=i.b+Math[o(224)]()*n.z;s=this[o(306)](s,0,1),r=this[o(306)](r,0,1),c=this.clamp(c,0,1),t[o(471)][o(387)](e,s,r,c)},randomColorAsHex:function(){const e=a,i=new(t[e(428)]);return function(t,n,o,s){const r=e,a=o[r(235)],c=[];for(let e=0;e<a;++e){const t=s[e];i[r(555)](o[e]),i.r+=Math[r(224)]()*t.x-.5*t.x,i.g+=Math[r(224)]()*t.y-.5*t.y,i.b+=Math.random()*t.z-.5*t.z,i.r=this[r(306)](i.r,0,1),i.g=this.clamp(i.g,0,1),i.b=this[r(306)](i.b,0,1),c[r(140)](i.getHex())}t.typedArray.setVec4Components(n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=a,s=i[o(197)]();s[o(367)](n,Math[o(224)]()),t[o(471)].setVec3Components(e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,c){const h=a;let u=2*Math[h(224)]()-1,l=6.2832*Math[h(224)](),f=Math[h(155)](1-u*u),p=this[h(401)](n,o),d=0,m=0,g=0;r&&(p=Math[h(454)](p/r)*r),d=f*Math[h(269)](l)*p,m=f*Math[h(518)](l)*p,g=u*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(387)](e,d,m,g)},seededRandom(t){const e=1e4*Math[a(518)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const c=a;let h=6.2832*Math[c(224)](),u=Math[c(255)](this[c(401)](n,o)),l=0,f=0,p=0;r&&(u=Math[c(454)](u/r)*r),l=Math[c(269)](h)*u,f=Math[c(518)](h)*u,l*=s.x,f*=s.y,l+=i.x,f+=i.y,p+=i.z,t[c(471)][c(387)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const e=a,i=new(t[e(287)]);return function(t,n,o,s,r,a,c,h){const u=e;i[u(555)](a),i.x-=o,i.y-=s,i.z-=r,i[u(133)]().multiplyScalar(-this.randomFloat(c,h)),t.typedArray[u(387)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=a,i=new(t[e(287)]);return function(t,n,o,s,r,a,c,h){const u=e;i[u(555)](a),i.x-=o,i.y-=s,i.z-=r,i[u(133)]()[u(508)](-this.randomFloat(c,h)),t.typedArray[u(387)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=a,n=new i,o=new(t[e(287)]),s=new(t[e(428)]),r=new(t[e(287)])(1,1,1);return function(t,i){const a=e;return n[a(555)](t)[a(133)](),o[a(555)](i)[a(133)](),n.x+=.5*-i.x+Math[a(224)]()*i.x,n.y+=.5*-i.y+Math[a(224)]()*i.y,n.z+=.5*-i.z+Math[a(224)]()*i.z,n[a(133)]()[a(524)](r)[a(508)](.5),s[a(394)](n.x,n.y,n.z),s.getHex()}}()},f[a(326)]=function(e){const i=a,r=f[i(536)],c=r.types;(e=r[i(450)](e,c[i(423)],{}))[i(270)]=r.ensureTypedArg(e[i(270)],c[i(423)],{}),this[i(198)]=t[i(308)][i(519)](),this[i(535)]=r[i(450)](e[i(535)],c[i(136)],.016),this.texture=r.ensureInstanceOf(e.texture.value,n,null),this[i(487)]=r[i(154)](e[i(270)][i(510)],t[i(571)],new o(1,1)),this.textureFrameCount=r[i(450)](e[i(270)][i(214)],c.NUMBER,this.textureFrames.x*this[i(487)].y),this[i(227)]=r[i(450)](e[i(270)][i(358)],c[i(136)],1),this[i(487)][i(364)](new(t[i(571)])(1,1)),this.hasPerspective=r[i(450)](e.hasPerspective,c[i(161)],!0),this[i(244)]=r[i(450)](e[i(244)],c[i(161)],!0),this.maxParticleCount=r[i(450)](e[i(415)],c[i(136)],null),this[i(495)]=r[i(450)](e.blending,c[i(136)],t[i(514)]),this.transparent=r[i(450)](e[i(341)],c[i(161)],!0),this[i(114)]=parseFloat(r[i(450)](e[i(114)],c[i(136)],0)),this[i(148)]=r[i(450)](e[i(148)],c[i(161)],!1),this[i(160)]=r[i(450)](e.depthTest,c[i(161)],!0),this[i(400)]=r[i(450)](e[i(400)],c[i(161)],!0),this[i(250)]=r[i(450)](e[i(250)],c[i(136)],300),this[i(238)]=[],this[i(295)]=[],this._pool=[],this._poolCreationSettings=null,this[i(243)]=0,this[i(252)]=!1,this[i(300)]=!1,this[i(316)]=0,this.uniforms={tex:{type:"t",value:this[i(270)]},textureAnimation:{type:"v4",value:new s(this[i(487)].x,this[i(487)].y,this[i(234)],Math.max(Math[i(255)](this[i(227)]),1))},fogColor:{type:"c",value:this[i(400)]?new(t[i(428)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(250)]}},this.defines={HAS_PERSPECTIVE:this[i(480)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:f[i(556)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(487)].x>1||this.textureFrames.y>1},this[i(265)]={position:new(f[i(381)])("v3",!0),acceleration:new f.ShaderAttribute("v4",!0),velocity:new(f[i(381)])("v3",!0),rotation:new(f[i(381)])("v4",!0),rotationCenter:new f.ShaderAttribute("v3",!0),params:new f.ShaderAttribute("v4",!0),size:new(f[i(381)])("v4",!0),angle:new f.ShaderAttribute("v4",!0),color:new(f[i(381)])("v4",!0),opacity:new(f[i(381)])("v4",!0)},this[i(549)]=Object[i(110)](this.attributes),this[i(469)]=this[i(549)].length,this[i(354)]=new(t[i(258)])({uniforms:this[i(523)],vertexShader:f.shaders.vertex,fragmentShader:f[i(468)][i(261)],blending:this[i(495)],transparent:this.transparent,alphaTest:this[i(114)],depthWrite:this[i(148)],depthTest:this[i(160)],defines:this[i(517)],fog:this[i(400)]}),this[i(275)]=new(t[i(526)]),this[i(497)]=new(t[i(565)])(this.geometry,this[i(354)]),null===this[i(415)]&&console[i(472)](i(461))},f[a(326)][a(348)]=f[a(326)],f[a(326)].prototype[a(542)]=function(){const t=a;let e,i=this[t(238)],n=i[t(235)]-1,o=this[t(517)];for(;n>=0;--n)e=i[n],!o.SHOULD_CALCULATE_SPRITE&&(o[t(144)]=o.SHOULD_ROTATE_TEXTURE||!!Math[t(364)](Math[t(364)].apply(null,e[t(513)][t(429)]),Math[t(364)][t(328)](null,e[t(513)][t(541)]))),o[t(191)]=o[t(191)]||!!Math[t(364)](e.rotation[t(513)],e.rotation[t(228)]),o.SHOULD_WIGGLE_PARTICLES=o[t(109)]||!!Math[t(364)](e[t(134)][t(429)],e[t(134)][t(541)]);this[t(354)][t(449)]=!0},f[a(326)][a(179)]._applyAttributesToGeometry=function(){const t=a;let e,i,n=this[t(265)],o=this[t(275)],s=o[t(265)];for(const r in n)n[t(432)](r)&&(e=n[r],i=s[r],i?i[t(528)]=e[t(471)][t(528)]:o[t(376)](r,e[t(266)]),e[t(266)].needsUpdate=!0);this.geometry[t(199)](0,this.particleCount)},f[a(326)][a(179)].addEmitter=function(t){const e=a;if(t instanceof f[e(375)]==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(295)][e(129)](t[e(198)])>-1)return void console.error("Emitter already exists in this group. Will not add again.");if(null!==t[e(493)])return void console[e(426)]("Emitter already belongs to another group. Will not add to requested group.");const i=this.attributes,n=this[e(316)],o=n+t[e(316)];this[e(316)]=o,null!==this[e(415)]&&this[e(316)]>this[e(415)]&&console[e(472)](e(525),this.particleCount,e(262),this[e(415)]),t[e(544)](t[e(527)][e(470)]+t[e(527)][e(153)]),t[e(516)](this[e(549)]),t._setAttributeOffset(n),t.group=this,t[e(265)]=this[e(265)];for(const s in i)i[e(432)](s)&&i[s]._createBufferAttribute(null!==this[e(415)]?this.maxParticleCount:this[e(316)]);for(let s=n;s<o;++s)t[e(189)](s),t[e(219)](s,e(479)),t._assignForceValue(s,e(507)),t[e(554)](s,"opacity"),t[e(554)](s,"size"),t[e(195)](s),t[e(284)](s),t[e(169)](s),t[e(128)](s);return this[e(165)](),this[e(238)].push(t),this[e(295)].push(t[e(198)]),this[e(542)](t),this[e(354)].needsUpdate=!0,this[e(275)][e(449)]=!0,this[e(252)]=!0,this},f.Group[a(179)][a(173)]=function(t){const e=a,i=this[e(295)][e(129)](t[e(198)]);if(t instanceof f[e(375)]==!1)return void console[e(426)](e(304),t);if(-1===i)return void console[e(426)](e(548));const n=t[e(170)],o=n+t[e(316)],s=this[e(265)][e(111)][e(471)];for(let r=n;r<o;++r)s[e(528)][4*r]=0,s[e(528)][4*r+1]=0;this[e(238)][e(130)](i,1),this[e(295)].splice(i,1);for(const r in this[e(265)])this[e(265)][e(432)](r)&&this[e(265)][r].splice(n,o);this.particleCount-=t.particleCount,t._onRemove(),this[e(252)]=!0},f.Group[a(179)][a(147)]=function(){const t=a,e=this[t(122)],i=this[t(243)];if(e[t(235)])return e.pop();if(i){const e=new(f[t(375)])(this[t(225)]);return this.addEmitter(e),e}return null},f.Group[a(179)][a(171)]=function(t){const e=a;if(t instanceof f.Emitter!=!1)return t.reset(),this._pool[e(240)](t),this;console[e(426)]("Argument is not instanceof SPE.Emitter:",t)},f.Group[a(179)][a(135)]=function(){return this[a(122)]},f.Group[a(179)][a(143)]=function(t,e,i){const n=a;let o;this._poolCreationSettings=e,this[n(243)]=!!i;for(let s=0;s<t;++s)o=Array[n(338)](e)?new f.Emitter(e[s]):new f.Emitter(e),this[n(455)](o),this[n(171)](o);return this},f[a(326)].prototype[a(190)]=function(e){const i=a,n=this.getFromPool(),o=this;if(null!==n)return e instanceof t[i(287)]&&(n[i(203)][i(429)][i(555)](e),n[i(203)][i(429)]=n[i(203)].value),n.enable(),setTimeout((()=>{const t=i;n[t(445)](),o[t(171)](n)}),1e3*Math[i(364)](n[i(182)],n.maxAge[i(429)]+n[i(527)][i(541)])),this;console.log(i(245))},f.Group[a(179)][a(575)]=function(t,e){const i=a;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(190)](e);else this[i(190)](e);return this},f[a(326)].prototype[a(310)]=function(t){const e=a;this[e(523)][e(322)].value+=t,this[e(523)][e(163)][e(429)]=t},f[a(326)][a(179)]._resetBufferRanges=function(){const t=a;let e=this.attributeKeys,i=this[t(469)]-1,n=this[t(265)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},f.Group[a(179)][a(131)]=function(t){const e=a;let i,n,o,s=this[e(549)],r=this[e(469)]-1,c=this[e(265)],h=t[e(484)];for(;r>=0;--r)i=s[r],n=h[i],o=c[i],o[e(247)](n[e(547)],n[e(364)]),o[e(404)]()},f[a(326)][a(179)][a(315)]=function(t){const e=a;var i=this[e(238)],n=i[e(235)],o=t||this.fixedTimeStep,s=this[e(549)],r=this.attributes;if(this[e(310)](o),this._resetBufferRanges(),0!==n||!1!==this[e(252)]||!1!==this[e(300)]){for(var c,h=0;h<n;++h)(c=i[h])[e(315)](o),this[e(131)](c);if(!0===this[e(300)]){for(h=this[e(469)]-1;h>=0;--h)r[s[h]][e(242)]();this._attributesNeedDynamicReset=!1}if(!0===this._attributesNeedRefresh){for(h=this.attributeCount-1;h>=0;--h)r[s[h]][e(329)]();this[e(252)]=!1,this[e(300)]=!0}}},f[a(326)][a(179)].dispose=function(){const t=a;return this[t(275)][t(236)](),this[t(354)].dispose(),this},f[a(375)]=function(e){const n=a,o=f[n(536)],s=o[n(434)],c=f[n(556)];(e=o[n(450)](e,s[n(423)],{}))[n(203)]=o[n(450)](e[n(203)],s[n(423)],{}),e.velocity=o[n(450)](e[n(479)],s[n(423)],{}),e[n(507)]=o[n(450)](e[n(507)],s[n(423)],{}),e[n(482)]=o[n(450)](e.radius,s[n(423)],{}),e.drag=o[n(450)](e[n(422)],s[n(423)],{}),e[n(464)]=o[n(450)](e[n(464)],s[n(423)],{}),e.color=o.ensureTypedArg(e[n(174)],s[n(423)],{}),e[n(370)]=o.ensureTypedArg(e[n(370)],s.OBJECT,{}),e[n(500)]=o[n(450)](e.size,s.OBJECT,{}),e[n(513)]=o[n(450)](e.angle,s.OBJECT,{}),e[n(134)]=o.ensureTypedArg(e[n(134)],s[n(423)],{}),e[n(527)]=o.ensureTypedArg(e[n(527)],s.OBJECT,{}),e[n(504)]&&console.warn("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this[n(198)]=t[n(308)][n(519)](),this[n(183)]=o.ensureTypedArg(e[n(183)],s.NUMBER,f[n(417)][n(534)]),this.position={_value:o[n(154)](e[n(203)].value,t[n(287)],new i),_spread:o[n(154)](e[n(203)][n(541)],t[n(287)],new(t[n(287)])),_spreadClamp:o[n(154)](e[n(203)][n(344)],t[n(287)],new i),_distribution:o[n(450)](e[n(203)][n(407)],s[n(136)],this[n(183)]),_randomise:o.ensureTypedArg(e[n(203)][n(560)],s[n(161)],!1),_radius:o[n(450)](e[n(203)][n(482)],s[n(136)],10),_radiusScale:o[n(154)](e.position[n(377)],t[n(287)],new i(1,1,1)),_distributionClamp:o.ensureTypedArg(e.position.distributionClamp,s[n(136)],0)},this[n(479)]={_value:o[n(154)](e[n(479)].value,t[n(287)],new(t[n(287)])),_spread:o[n(154)](e.velocity[n(541)],i,new i),_distribution:o[n(450)](e.velocity[n(407)],s.NUMBER,this.type),_randomise:o.ensureTypedArg(e[n(203)].randomise,s[n(161)],!1)},this.acceleration={_value:o[n(154)](e[n(507)][n(429)],t[n(287)],new(t[n(287)])),_spread:o[n(154)](e[n(507)][n(541)],t[n(287)],new(t[n(287)])),_distribution:o[n(450)](e[n(507)].distribution,s[n(136)],this[n(183)]),_randomise:o[n(450)](e[n(203)][n(560)],s[n(161)],!1)},this[n(422)]={_value:o.ensureTypedArg(e[n(422)].value,s.NUMBER,0),_spread:o.ensureTypedArg(e[n(422)][n(541)],s[n(136)],0),_randomise:o.ensureTypedArg(e[n(203)][n(560)],s.BOOLEAN,!1)},this[n(134)]={_value:o.ensureTypedArg(e[n(134)][n(429)],s[n(136)],0),_spread:o[n(450)](e[n(134)].spread,s[n(136)],0)},this[n(464)]={_axis:o[n(154)](e[n(464)].axis,i,new i(0,1,0)),_axisSpread:o.ensureInstanceOf(e[n(464)].axisSpread,t[n(287)],new(t[n(287)])),_angle:o[n(450)](e[n(464)][n(513)],s.NUMBER,0),_angleSpread:o[n(450)](e[n(464)][n(228)],s[n(136)],0),_static:o[n(450)](e[n(464)].static,s[n(161)],!1),_center:o[n(154)](e[n(464)][n(440)],t[n(287)],this[n(203)][n(470)].clone()),_randomise:o[n(450)](e[n(203)][n(560)],s[n(161)],!1)},this[n(527)]={_value:o[n(450)](e[n(527)][n(429)],s[n(136)],2),_spread:o[n(450)](e[n(527)][n(541)],s[n(136)],0)},this[n(174)]={_value:o[n(466)](e[n(174)][n(429)],t[n(428)],new r),_spread:o[n(466)](e.color[n(541)],i,new i),_randomise:o[n(450)](e.position[n(560)],s[n(161)],!1)},this[n(370)]={_value:o[n(360)](e[n(370)][n(429)],s[n(136)],1),_spread:o[n(360)](e[n(370)][n(541)],s.NUMBER,0),_randomise:o[n(450)](e[n(203)].randomise,s[n(161)],!1)},this[n(500)]={_value:o.ensureArrayTypedArg(e[n(500)][n(429)],s[n(136)],1),_spread:o[n(360)](e[n(500)][n(541)],s[n(136)],0),_randomise:o[n(450)](e[n(203)].randomise,s[n(161)],!1)},this[n(513)]={_value:o[n(360)](e[n(513)][n(429)],s[n(136)],0),_spread:o[n(360)](e[n(513)][n(541)],s[n(136)],0),_randomise:o[n(450)](e[n(203)].randomise,s[n(161)],!1)},this[n(316)]=o[n(450)](e.particleCount,s[n(136)],100),this.duration=o[n(450)](e[n(182)],s[n(136)],null),this[n(132)]=o[n(450)](e[n(132)],s[n(161)],!1),this[n(202)]=o[n(450)](e.activeMultiplier,s.NUMBER,1),this[n(342)]=o.ensureTypedArg(e[n(342)],s[n(136)],1),this[n(220)]=o.ensureTypedArg(e[n(220)],s[n(161)],!0),this[n(411)]=0,this.activationIndex=0,this[n(170)]=0,this[n(438)]=0,this[n(546)]=0,this[n(309)]=0,this[n(493)]=null,this[n(265)]=null,this[n(478)]=null,this[n(418)]={position:o[n(450)](e[n(203)][n(560)],s[n(161)],!1)||o.ensureTypedArg(e[n(482)][n(560)],s.BOOLEAN,!1),velocity:o[n(450)](e.velocity[n(560)],s[n(161)],!1),acceleration:o[n(450)](e[n(507)][n(560)],s[n(161)],!1)||o[n(450)](e[n(422)][n(560)],s[n(161)],!1),rotation:o[n(450)](e[n(464)][n(560)],s[n(161)],!1),rotationCenter:o[n(450)](e[n(464)][n(560)],s[n(161)],!1),size:o[n(450)](e[n(500)][n(560)],s[n(161)],!1),color:o.ensureTypedArg(e[n(174)][n(560)],s[n(161)],!1),opacity:o[n(450)](e[n(370)][n(560)],s[n(161)],!1),angle:o[n(450)](e.angle.randomise,s[n(161)],!1)},this[n(334)]={},this[n(192)]={},this[n(430)]={maxAge:"params",position:n(203),velocity:"velocity",acceleration:n(507),drag:n(507),wiggle:n(111),rotation:n(464),size:n(500),color:n(174),opacity:n(370),angle:n(513)};for(const t in this.updateMap)this[n(430)].hasOwnProperty(t)&&(this.updateCounts[this[n(430)][t]]=0,this.updateFlags[this.updateMap[t]]=!1,this[n(462)](this[t],t));this[n(484)]={},this[n(549)]=null,this.attributeCount=0,o.ensureValueOverLifetimeCompliance(this[n(174)],c,c),o[n(406)](this[n(370)],c,c),o.ensureValueOverLifetimeCompliance(this[n(500)],c,c),o[n(406)](this[n(513)],c,c)},f[a(375)].constructor=f[a(375)],f[a(375)][a(179)]._createGetterSetters=function(t,e){const i=a,n=this;for(const o in t)if(t[i(432)](o)){const s=o[i(412)]("_","");Object[i(460)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=c,s=n[o(430)][e],r=this[t],a=f[o(556)];t===o(325)?(n[o(334)][o(537)]=!0,n[o(192)][o(537)]=0):t===o(501)?n[o(418)][s]=i:(n[o(334)][s]=!0,n[o(192)][s]=0),n.group._updateDefines(),this[t]=i,Array[o(338)](r)&&f[o(536)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(o)})}},f.Emitter[a(179)][a(516)]=function(t){const e=a;this[e(549)]=t,this[e(469)]=t[e(235)];for(let i=this.attributeCount-1;i>=0;--i)this[e(484)][t[i]]={min:Number[e(540)],max:Number.NEGATIVE_INFINITY}},f.Emitter[a(179)][a(544)]=function(t){const e=a,i=this[e(316)];this[e(182)]?this[e(411)]=i/(t<this.duration?t:this.duration):this[e(411)]=i/t},f[a(375)][a(179)][a(437)]=function(t){const e=a;this[e(170)]=t,this[e(286)]=t,this[e(337)]=t+this[e(316)]},f[a(375)][a(179)][a(380)]=function(t,e){const i=a;switch(t){case i(203):this._assignPositionValue(e);break;case i(479):case i(507):this[i(219)](e,t);break;case i(500):case"opacity":this[i(554)](e,t);break;case i(513):this[i(195)](e);break;case i(111):this[i(169)](e);break;case i(464):this[i(284)](e);break;case i(174):this[i(128)](e)}},f[a(375)][a(179)][a(189)]=function(t){const e=a,i=f[e(417)],n=f.utils,o=this.position,s=this.attributes[e(203)],r=o[e(470)],c=o[e(153)];switch(o._distribution){case i.BOX:n[e(419)](s,t,r,c,o[e(229)]);break;case i.SPHERE:n.randomVector3OnSphere(s,t,r,o[e(188)],o[e(153)].x,o[e(372)],o[e(229)].x,o[e(424)]||this.particleCount);break;case i.DISC:n[e(150)](s,t,r,o[e(188)],o[e(153)].x,o[e(372)],o[e(229)].x);break;case i[e(142)]:n[e(420)](s,t,r,c)}},f.Emitter.prototype[a(219)]=function(t,e){const i=a;let n,o,s,r,c,h=f[i(417)],u=f.utils,l=this[e],p=l[i(470)],d=l[i(153)];switch(l._distribution){case h[i(534)]:u[i(419)](this[i(265)][e],t,p,d);break;case h[i(137)]:n=this[i(265)][i(203)][i(471)][i(528)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],u[i(212)](this[i(265)][e],t,o,s,r,this.position[i(470)],l[i(470)].x,l[i(153)].x);break;case h[i(444)]:n=this.attributes[i(203)][i(471)][i(528)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],u[i(481)](this[i(265)][e],t,o,s,r,this[i(203)][i(470)],l[i(470)].x,l._spread.x);break;case h.LINE:u[i(420)](this[i(265)][e],t,p,d)}if(e===i(507)){const e=u[i(306)](u[i(401)](this[i(422)][i(470)],this[i(422)]._spread),0,1);this[i(265)][i(507)][i(471)][i(528)][4*t+3]=e}},f.Emitter[a(179)]._assignAbsLifetimeValue=function(t,e){const i=a;let n,o=this[i(265)][e].typedArray,s=this[e],r=f[i(536)];r[i(237)](s[i(470)])&&r[i(237)](s[i(153)])?(n=Math[i(255)](r.randomFloat(s[i(470)][0],s[i(153)][0])),o.setVec4Components(t,n,n,n,n)):o[i(164)](t,Math[i(255)](r[i(401)](s._value[0],s[i(153)][0])),Math[i(255)](r[i(401)](s[i(470)][1],s._spread[1])),Math[i(255)](r.randomFloat(s[i(470)][2],s[i(153)][2])),Math[i(255)](r[i(401)](s[i(470)][3],s[i(153)][3])))},f.Emitter[a(179)][a(195)]=function(t){const e=a;let i,n=this.attributes[e(513)][e(471)],o=this[e(513)],s=f[e(536)];s[e(237)](o[e(470)])&&s[e(237)](o._spread)?(i=s.randomFloat(o[e(470)][0],o[e(153)][0]),n[e(164)](t,i,i,i,i)):n.setVec4Components(t,s[e(401)](o[e(470)][0],o._spread[0]),s[e(401)](o[e(470)][1],o._spread[1]),s.randomFloat(o[e(470)][2],o._spread[2]),s[e(401)](o[e(470)][3],o[e(153)][3]))},f[a(375)][a(179)][a(169)]=function(t){const e=a;this[e(265)][e(111)].typedArray[e(164)](t,this.isStatic?1:0,0,Math[e(255)](f[e(536)][e(401)](this[e(527)][e(470)],this[e(527)][e(153)])),f.utils[e(401)](this[e(134)][e(470)],this[e(134)][e(153)]))},f[a(375)][a(179)]._assignRotationValue=function(t){const e=a;this[e(265)].rotation[e(471)].setVec3Components(t,f[e(536)][e(107)](this[e(464)][e(239)],this[e(464)][e(545)]),f[e(536)][e(401)](this[e(464)][e(311)],this.rotation[e(530)]),this[e(464)][e(112)]?0:1),this.attributes.rotationCenter[e(471)][e(563)](t,this[e(464)][e(473)])},f[a(375)][a(179)][a(128)]=function(t){const e=a;f[e(536)][e(226)](this[e(265)][e(174)],t,this[e(174)]._value,this[e(174)]._spread)},f.Emitter[a(179)][a(393)]=function(t){const e=a;let i,n,o=this[e(418)],s=this[e(334)],r=this[e(192)],c=this[e(549)];for(let a=this[e(469)]-1;a>=0;--a)i=c[a],n=s[i],!0!==o[i]&&!0!==n||(this._assignValue(i,t),this[e(333)](i,t),!0===n&&r[i]===this[e(316)]?(s[i]=!1,r[i]=0):1==n&&++r[i])},f[a(375)][a(179)][a(333)]=function(t,e){const i=a,n=this[i(484)][t];n.min=Math[i(547)](e,n[i(547)]),n[i(364)]=Math[i(364)](e,n[i(364)])},f[a(375)][a(179)][a(359)]=function(){const t=a;let e,i=this.bufferUpdateRanges,n=this[t(550)],o=this[t(264)]-1;for(;o>=0;--o)e=n[o],i[e].min=Number[t(540)],i[e].max=Number[t(365)]},f[a(375)][a(179)][a(285)]=function(){const t=a;this[t(411)]=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this[t(493)]=null,this[t(265)]=null,this[t(478)]=null,this.age=0},f.Emitter[a(179)][a(371)]=function(){--this[a(309)]},f.Emitter.prototype._incrementParticleCount=function(){++this[a(309)]},f[a(375)][a(179)][a(271)]=function(t,e,i,n){const o=a;for(var s,r,c,h,u=e-1;u>=t;--u)0!==(h=i[s=4*u])&&(c=i[s+1],r=i[s+2],1===this[o(342)]?(c+=n)>=r&&(c=0,h=0,this[o(371)]()):(c-=n)<=0&&(c=r,h=0,this[o(371)]()),i[s]=h,i[s+1]=c,this[o(333)](o(111),u))},f[a(375)][a(179)][a(502)]=function(t,e,i,n){const o=a,s=this[o(342)];for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[o(316)]||(this[o(433)](),i[r]=1,this[o(393)](h),c=n*(h-t),i[r+1]=-1===s?i[r+2]-c:c,this[o(333)](o(111),h))},f[a(375)].prototype[a(315)]=function(t){const e=a;if(this[e(132)])return;null===this[e(478)]&&(this[e(478)]=this[e(265)].params[e(471)][e(528)]);const i=this[e(170)],n=i+this[e(316)],o=this[e(478)],s=this[e(411)]*this[e(202)]*t,r=this[e(286)];if(this[e(359)](),this[e(271)](i,n,o,t),!1===this.alive)return void(this[e(546)]=0);if(null!==this[e(182)]&&this[e(546)]>this[e(182)])return this[e(220)]=!1,void(this.age=0);const c=1===this.particleCount?r:0|r,h=Math[e(547)](c+s,this[e(337)]),u=h-this.activationIndex|0,l=u>0?t/u:0;this[e(502)](c,h,o,l),this[e(286)]+=s,this[e(286)]>n&&(this[e(286)]=i),this[e(546)]+=t},f.Emitter[a(179)][a(352)]=function(t){const e=a;if(this[e(546)]=0,this[e(220)]=!1,!0===t){const t=this[e(170)],o=t+this.particleCount,s=this[e(478)],r=this[e(265)][e(111)][e(266)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(573)][e(123)]=0,r.updateRange.count=-1,r.needsUpdate=!0}return this},f.Emitter[a(179)][a(248)]=function(){return this[a(220)]=!0,this},f[a(375)][a(179)][a(445)]=function(){return this[a(220)]=!1,this},f[a(375)].prototype[a(340)]=function(){const t=a;return null!==this.group?this[t(493)].removeEmitter(this):console[t(426)](t(431)),this};export{f as S};

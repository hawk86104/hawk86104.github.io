import{_ as t,d as e,cm as i,bT as n,V as s,at as o,C as r,k as a,h as c}from"./three.QbUqWzuy1728531791220.js";const h=l;function l(t,e){const i=d();return(l=function(t,e){return i[t-=371]})(t,e)}!function(t,e){const i=l,n=d();for(;;)try{if(852043===parseInt(i(787))/1*(-parseInt(i(459))/2)+parseInt(i(771))/3*(parseInt(i(608))/4)+-parseInt(i(408))/5+-parseInt(i(827))/6+parseInt(i(392))/7+-parseInt(i(470))/8+parseInt(i(391))/9)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){u(this,(function(){const t=l,e=new RegExp(t(796)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=g("init");e[t(527)](n+t(762))&&i[t(527)](n+t(607))?g():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[l(720)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();f(void 0,(function(){const t=l;let e;try{e=Function("return (function() "+t(767)+");")()}catch(s){e=window}const i=e[t(803)]=e[t(803)]||{},n=[t(526),t(764),"info","error",t(740),t(789),"trace"];for(let o=0;o<n[t(486)];o++){const e=f[t(433)][t(409)][t(578)](f),s=n[o],r=i[s]||e;e[t(715)]=f[t(578)](f),e[t(533)]=r[t(533)].bind(r),i[s]=e}}))();const p={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function d(){const t=["randomVector3OnLine","defines","valueOverLifetimeLength","29056023DzbfrZ","10080644GAMDJz","bufferUpdateRanges","float when_le(float x, float y) {","spread","dynamicBuffer","activationEnd","   c.b = b / PACKED_COLOR_DIVISOR;","  return 1.0 - when_lt(x, y);","    highp float maxAge = getMaxAge();","vec3 getVelocity( in float age ) {","call","           positionInTime,","uniform float runTime;","        vSpriteSheet.w = rowNorm;","attribute vec4 params;","varying vec4 vColor;","7477235fOvEkW","prototype","color","randomise","indexOf","join","_assignAngleValue","utils","sqrt","    gl_Position = projectionMatrix * mvPosition;","updateRange","        float columnNorm = vSpriteSheet.z;","clamp","isStatic","      vec3 axis = unpackRotationAxis( rotation.x );","   c *= vec3( 2.0 );","Invalid argument types, or argument types do not match:","onParticleSpawn","_createNewWhenPoolEmpty","    #ifdef SHOULD_ROTATE_TEXTURE","   c.g = g / PACKED_COLOR_DIVISOR;","position","SPE.Group: maxParticleCount exceeded. Requesting","Emitter already belongs to another group. Will not add to requested group.","    highp float isAlive = when_gt( alive, 0.0 );","constructor","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","texture","ensureTypedArg","depthTest","setNumber","attribute vec4 opacity;","size","Group","    return max(sign(x - y), 0.0);","hasPerspective","SPE.Group pool ran out.","uniform sampler2D tex;","NEGATIVE_INFINITY","_poolCreationSettings","   return params.x;","    float pointSizePerspective = pointSize * perspective;","ensureArrayTypedArg","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","shrink","float getAge() {","MathUtils","getHex","_incrementParticleCount","string","radiusScale","273446GhVCxN","    highp float value = 0.0;","#ifdef SHOULD_CALCULATE_SPRITE","    #ifdef SHOULD_CALCULATE_SPRITE","attribute vec4 size;","gger","_onRemove","loop","debu","emitters","_radiusScale","10472248tFRIXk","randomFloat","    varying float vAngle;","    #ifdef COLORIZE","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","depthWrite","isArray","age","logdepthbuf_vertex","removeEmitter","    return a * b;","function","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","randomVector3OnDisc","ShaderAttribute","    vec3 accel = getAcceleration( age );","length","count","releaseIntoPool","frameCount","replace","    #ifdef SHOULD_ROTATE_PARTICLES","arrayType","randomDirectionVector3OnSphere","particlesPerSecond","bufferUpdateCount","Emitter","rotation","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    float fIndex = 0.0;","duration","Argument is not instanceof SPE.Emitter:","    vec4 rotatedTexture = texture2D( tex, vUv );","offset","material","uniforms","cos","flagUpdate","subarray","paramsArray","ensureArrayInstanceOf","      rotationMatrix = getRotationMatrix( axis, angle );","logdepthbuf_pars_fragment","        vSpriteSheet.x = 1.0 / framesX;","setMat3","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","    vec3 pos = vec3( position );","_rotationCenter","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","attribute vec4 angle;","textureLoop","   return acceleration.xyz * age;","AdditiveBlending","varyings","usage","activationIndex","log","test","random","vec3 getAcceleration( in float age ) {","attributes","textureFrameCount","   return c;","toString","_value","grow","           unpackColor( color.z ),","ShaderChunk","      if( rotation.y == 0.0 ) {","    #ifdef ALPHATEST","angleSpread","SPHERE","radius","setVec4","acceleration","_updateUniforms","#define PACKED_COLOR_DIVISOR 255.0","center","ShaderMaterial","   return params.y;","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","_updateBuffers","        float row = floor( (frameNumber - column) / framesX );","   vec3 c = vec3( 0.0 );","DynamicDrawUsage","forceUpdateAll","        float perspective = scale / length( mvPosition.xyz );","float when_lt(float x, float y) {","frames","BOOLEAN","_triggerSingleEmitter","group","typeSizeMap","setFromArray","generateUUID","      translated = rotationCenter - pos;","set","scale","push","lerp","randomColorAsHex","           unpackColor( color.x ),","_axis","_radius","    pos += force;","direction","_createGetterSetters","        pos.x += wiggleSin;","bind","bufferUpdateKeys","randomVector3","BufferGeometry","resetFlags","attributeCount","        float wiggleAmount = positionInTime * getWiggle();","BufferAttribute","StaticDrawUsage","        float framesY = textureAnimation.y;","blending","        pos = getRotation( pos, positionInTime );","action","updateMin","colorize","_applyAttributesToGeometry","_calculatePPSValue","   float b = mod( hex, PACKED_COLOR_SIZE );","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","setDrawRange","hasOwnProperty","ensureValueOverLifetimeCompliance","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","reset","_checkParticleAges","_decrementParticleCount","attributeOffset","float getAlive() {","setUpdateRange","input","211016vieOhA","static","#ifdef SHOULD_ROTATE_PARTICLES","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","geometry","ceil","getPackedRotationAxis","       if ( vColor.w < float(ALPHATEST) ) discard;","attribute vec3 rotationCenter;","        float framesY = vSpriteSheet.y;","needsUpdate","    #ifdef HAS_PERSPECTIVE","copy","interpolateArray","      vec3 center = rotationCenter;","BOX","       float s = sin(angle);","    #endif","_attributesNeedDynamicReset","shaders","       float c = cos(angle);","particleCount","clone","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","triggerPoolEmitter","`emitter` argument must be instance of SPE.Emitter. Was provided with:","alphaTest","emitterIDs","_spreadClamp","keys","   return velocity * age;","    vec3 force = vec3( 0.0 );","        float framesX = textureAnimation.x;","SHOULD_WIGGLE_PARTICLES","setColor","componentSize","_attributesNeedRefresh","NUMBER","fog_pars_vertex","    }","common","params","resetDynamic","sin","typedArray","fragment","setSize","roundToNearestMultiple","_assignValue","attributeEnd","axis","           unpackColor( color.y ),","activeMultiplier","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","Texture","branchAvoidanceFunctions","updateCounts","Emitter does not belong to a group, cannot remove.","updateMap","_distribution","boolean","Color","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","shaderChunks","amd","error","_assignPositionValue","fog_pars_fragment","        float loopCount = textureAnimation.w;","alive","fixedTimeStep","       float y = 1.0 - gl_PointCoord.y - 0.5;","    force *= drag;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","LINE","getPool","_createBufferAttribute","        float rowNorm = vSpriteSheet.w;","splice","_setBufferUpdateRanges","        vSpriteSheet.y = 1.0 / framesY;","float getWiggle() {","setVec2Components","_resetBufferRanges","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","        float column = floor(mod( frameNumber, framesX ));","attribute vec3 velocity;","opacity","vertex","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","_assignAbsLifetimeValue","    return 1.0 - abs( sign( x - y ) );","Vector2","updateMax","    vec3 outgoingLight = vColor.xyz;","rotationCenter","unpackRotationAxis","uniform float scale;","velocity","OBJECT","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","bufferAttribute","    #ifdef SHOULD_WIGGLE_PARTICLES","       vec3 c = isAlive * getColorOverLifetime(","value","pop","distributions","__proto__","logdepthbuf_pars_vertex","normalize","uniform vec4 textureAnimation;","uniform float deltaTime;","apply","Emitter does not exist in this group. Will not remove.","angle","axisSpread","        float columnNorm = column / framesX;","drag","#endif","   return params.z;","#ifdef SHOULD_ROTATE_TEXTURE","uuid","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","attributeKeys","defineProperty","randomVector3OnSphere","_updateDefines","floor","array","transparent","setVec3","    return min(a + b, 1.0);","exception","runTime","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","float or(float a, float b) {","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","_activateParticles","while (true) {}","distributionClamp","type","    gl_PointSize = pointSizePerspective;","rotationFunctions","addEmitter","wiggle","setAttribute","exports","setVec4Components","types","distribution","   c.r = r / PACKED_COLOR_DIVISOR;","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","_assignRotationValue","updateFlags","chain","TypedArray is already of size:","warn","Points","TypedArrayHelper",'{}.constructor("return this")( )',"arrayValuesAreEqual","attribute vec4 acceleration;","getValueAtIndex","24xnsxxf","spreadClamp","   }","TypedArrayConstructor","spe","floatOverLifetime","_resetParticle","void main() {","#define PACKED_COLOR_SIZE 256.0","maxParticleCount","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","itemSize","    ","float when_eq( float x, float y ) {","    varying vec4 vSpriteSheet;","POSITIVE_INFINITY","7yjxLsP","float getMaxAge() {","table","Vector4","activeParticleCount","info","dispose","SHOULD_ROTATE_TEXTURE","    highp float age = getAge();","function *\\( *\\)","_assignForceValue","Emitter already exists in this group. Will not add again.","getComponentValueAtIndex","textureFrames","      vec3 translated;","setVec3Components","console","_spread","vec3 unpackColor( in float hex ) {","DISC","    highp float alive = getAlive();","enable","        pos.y += wiggleCos;","logdepthbuf_fragment","Vector3","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","fog","fog_fragment","maxAge","    float shouldApplyValue = 0.0;","       float c = cos( -vAngle );","setRGB","getFromPool","abs","       axis = normalize(axis);","_setAttributeOffset","max","elements","multiplyScalar","_updateAttributeUpdateRange","2861934gSLbqw","    return value;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","ensureInstanceOf","SHOULD_ROTATE_PARTICLES","undefined","indexOffset","_pool","number","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","float when_ge(float x, float y) {","rotateTexture","resetUpdateRange","_axisSpread","           unpackColor( color.w )","add","       float s = sin( -vAngle );","min","                   0.0,                                0.0,                                0.0,                                1.0);","tick","mesh"];return(d=function(){return t})()}typeof define===h(481)&&define[h(672)]?define(h(775),p):typeof exports!==h(372)&&typeof module!==h(372)&&(module[h(754)]=p),p[h(766)]=function(t,e,i,n){const s=h;this[s(643)]=i||1,this[s(440)]=e||1,this[s(774)]=t||Float32Array,this[s(736)]=new t(e*this.componentSize),this[s(373)]=n||0},p[h(766)][h(433)]=p[h(766)],p[h(766)][h(409)][h(654)]=function(t,e){const i=h,n=this.array[i(486)];return!e&&(t*=this.componentSize),t<n?this[i(452)](t):t>n?this[i(535)](t):void console[i(792)](i(763),t+".","Will not resize.")},p[h(766)][h(409)][h(452)]=function(t){const e=h;return this[e(736)]=this.array[e(508)](0,t),this[e(440)]=t,this},p[h(766)][h(409)].grow=function(t){const e=h,i=this[e(736)],n=new(this[e(774)])(t);return n[e(566)](i),this[e(736)]=n,this[e(440)]=t,this},p.TypedArrayHelper[h(409)].splice=function(t,e){const i=h;t*=this[i(643)],e*=this[i(643)];const n=[],s=this[i(736)],o=s[i(486)];for(let r=0;r<o;++r)(r<t||r>=e)&&n.push(s[r]);return this[i(563)](0,n),this},p[h(766)][h(409)][h(563)]=function(t,e){const i=h,n=t+e.length;return n>this[i(736)][i(486)]?this[i(535)](n):n<this.array[i(486)]&&this[i(452)](n),this[i(736)][i(566)](e,this[i(373)]+t),this},p[h(766)][h(409)].setVec2=function(t,e){return this.setVec2Components(t,e.x,e.y)},p[h(766)][h(409)][h(690)]=function(t,e,i){const n=this[h(736)],s=this.indexOffset+t*this.componentSize;return n[s]=e,n[s+1]=i,this},p[h(766)][h(409)][h(738)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},p.TypedArrayHelper[h(409)].setVec3Components=function(t,e,i,n){const s=h,o=this.array,r=this.indexOffset+t*this[s(643)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},p[h(766)][h(409)][h(543)]=function(t,e){return this[h(755)](t,e.x,e.y,e.z,e.w)},p.TypedArrayHelper[h(409)].setVec4Components=function(t,e,i,n,s){const o=h,r=this[o(736)],a=this[o(373)]+t*this[o(643)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},p[h(766)][h(409)][h(514)]=function(t,e){const i=h;return this[i(563)](this[i(373)]+t*this[i(643)],e.elements)},p[h(766)].prototype.setMat4=function(t,e){const i=h;return this[i(563)](this[i(373)]+t*this[i(643)],e[i(824)])},p.TypedArrayHelper.prototype[h(642)]=function(t,e){return this[h(802)](t,e.r,e.g,e.b)},p[h(766)][h(409)][h(438)]=function(t,e){const i=h;return this.array[this[i(373)]+t*this[i(643)]]=e,this},p[h(766)].prototype[h(770)]=function(t){const e=h;return this[e(736)][this[e(373)]+t]},p[h(766)].prototype[h(799)]=function(t){const e=h;return this[e(736)][e(508)](this[e(373)]+t*this[e(643)])},p[h(484)]=function(t,e,i){const n=h,s=p[n(484)][n(562)];this.type=typeof t===n(457)&&s[n(598)](t)?t:"f",this.componentSize=s[this[n(748)]],this[n(492)]=i||Float32Array,this[n(652)]=null,this.bufferAttribute=null,this.dynamicBuffer=!!e,this[n(591)]=0,this[n(701)]=0},p[h(484)][h(433)]=p.ShaderAttribute,p[h(484)].typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},p[h(484)][h(409)][h(606)]=function(t,e){const i=h;this[i(591)]=Math[i(384)](t*this[i(643)],this[i(591)]*this[i(643)]),this[i(701)]=Math.max(e*this[i(643)],this.updateMax*this.componentSize)},p[h(484)].prototype[h(507)]=function(){const t=h,e=this[t(709)],i=e.updateRange;i[t(503)]=this[t(591)],i.count=Math[t(384)](this.updateMax-this[t(591)]+this[t(643)],this[t(652)][t(736)][t(486)]),e[t(618)]=!0},p[h(484)][h(409)].resetUpdateRange=function(){const t=h;this[t(591)]=0,this[t(701)]=0},p[h(484)].prototype[h(650)]=function(){const e=h;this[e(709)][e(524)]=this.dynamicBuffer?t[e(554)]:t[e(586)]},p[h(484)][h(409)][h(686)]=function(t,e){const i=h;this[i(652)][i(686)](t,e),this[i(555)]()},p[h(484)][h(409)].forceUpdateAll=function(){const e=h;this[e(709)][e(736)]=this[e(652)][e(736)],this.bufferAttribute[e(418)][e(503)]=0,this[e(709)][e(418)][e(487)]=-1,this[e(709)][e(524)]=t[e(586)],this[e(709)][e(618)]=!0},p[h(484)][h(409)]._ensureTypedArray=function(t){const e=h;null!==this[e(652)]&&this.typedArray[e(440)]===t*this[e(643)]||(null!==this[e(652)]&&this[e(652)][e(440)]!==t?this[e(652)][e(654)](t):null===this[e(652)]&&(this[e(652)]=new(p[e(766)])(this[e(492)],t,this.componentSize)))},p[h(484)][h(409)]._createBufferAttribute=function(n){const s=h;if(this._ensureTypedArray(n),null!==this[s(709)])return this[s(709)][s(736)]=this[s(652)].array,parseFloat(e)>=81&&(this.bufferAttribute[s(487)]=this.bufferAttribute.array[s(486)]/this[s(709)][s(782)]),void(this[s(709)][s(618)]=!0);this.bufferAttribute=new(t[s(585)])(this[s(652)][s(736)],this.componentSize),this[s(709)][s(524)]=this[s(396)]?t[s(554)]:i},p[h(484)][h(409)].getLength=function(){const t=h;return null===this[t(652)]?0:this.typedArray.array[t(486)]},p.shaderChunks={defines:[h(779),h(546)][h(413)]("\n"),uniforms:[h(719),h(404),h(445),h(718),h(705)][h(413)]("\n"),attributes:[h(769),h(694),"attribute vec4 rotation;",h(616),h(406),h(463),h(519),"attribute vec4 color;",h(439)][h(413)]("\n"),varyings:[h(407),h(728),h(472),h(726),h(461),h(785),h(726)][h(413)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",h(442),"}",h(557),h(474),"}",h(784),h(699),"}",h(377),h(399),"}",h(394),"  return 1.0 - when_gt(x, y);","}","float and(float a, float b) {",h(480),"}",h(743),h(739),"}"][h(413)]("\n"),unpackColor:[h(805),"   vec3 c = vec3( 0.0 );",h(550),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(595),h(758),h(428),h(398),"   return c;","}"].join("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {",h(553),h(550),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(595),"   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;",h(398),h(423),"   c -= vec3( 1.0 );",h(532),"}"].join("\n"),floatOverLifetime:[h(451),h(460),h(498),h(499),h(816),h(631),"",h(670),"       fIndex = float( i );",h(759),h(482),h(647),"","    return value;","}"][h(413)]("\n"),colorOverLifetime:[h(742),"    vec3 value = vec3( 0.0 );",h(600),h(781),h(661),h(828),"}"][h(413)]("\n"),paramFetchingFunctions:[h(605),h(448),"}",h(453),h(549),"}",h(788),h(727),"}",h(689),"   return params.w;","}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","}",h(401),h(638),"}",h(529),h(521),"}"].join("\n"),rotationFunctions:[h(610),h(518),h(821),h(624),h(628),"       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,",h(697),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",h(385),h(773),"",h(812),h(538),"           return pos;","      }","",h(422),h(622),h(801),"      mat4 rotationMatrix;","      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",h(744),h(565),h(511),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",h(773),"#endif"][h(413)]("\n"),rotateTexture:[h(376),"",h(427),"       float x = gl_PointCoord.x - 0.5;",h(679),h(817),h(383),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","",h(462),"        float framesX = vSpriteSheet.x;",h(617),h(419),h(685),h(730),h(829),"    #endif","",h(502)][h(413)]("\n")},p[h(627)]={vertex:[p[h(671)][h(389)],p[h(671)][h(505)],p[h(671)][h(530)],p[h(671)].varyings,n[h(648)],t[h(537)][h(716)],t[h(537)][h(646)],p[h(671)][h(663)],p[h(671)].unpackColor,p.shaderChunks[h(704)],p[h(671)][h(776)],p.shaderChunks.colorOverLifetime,p[h(671)].paramFetchingFunctions,p[h(671)].forceFetchingFunctions,p[h(671)][h(750)],"void main() {",h(795),h(807),h(400),"    highp float positionInTime = (age / maxAge);",h(432),h(710),h(584),"        float wiggleSin = isAlive * sin( wiggleAmount );","        float wiggleCos = isAlive * cos( wiggleAmount );",h(625),"    vec3 vel = getVelocity( age );",h(485),h(639),h(516),h(692),"    force += vel;",h(680),"    force += accel * age;",h(574),h(710),h(577),h(809),"        pos.z += wiggleSin;",h(625),h(491),h(589),"    #endif",h(708),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",h(619),h(556),"    #else","        float perspective = 1.0;",h(625),h(449),h(473),h(711),h(403),h(571),h(659),h(536),h(381),"       );","    #else","       vec3 c = vec3(1.0);",h(625),h(515),"    vColor = vec4( c, o );","    #ifdef SHOULD_ROTATE_TEXTURE",h(596),h(625),h(462),h(640),h(587),h(676),"        float totalFrames = textureAnimation.z;",h(681),h(693),h(552),h(724),"        float rowNorm = row / framesY;",h(513),h(688),"        vSpriteSheet.z = columnNorm;",h(405),"    #endif",h(749),h(417),t[h(537)][h(478)],t[h(537)].fog_vertex,"}"][h(413)]("\n"),fragment:[p[h(671)][h(505)],t[h(537)][h(648)],t[h(537)][h(675)],t[h(537)][h(512)],p.shaderChunks[h(523)],p[h(671)][h(663)],h(778),h(702),h(783),h(539),h(615),h(625),p[h(671)][h(378)],t[h(537)][h(810)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[h(537)][h(814)],"}"].join("\n")},p[h(415)]={types:{BOOLEAN:h(668),STRING:h(457),NUMBER:h(375),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array[n(476)](t)){for(let s=t[n(486)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(436)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(476)](t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(830)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(476)](t[n(534)])&&(t[n(534)]=[t[n(534)]]),!1===Array[n(476)](t[n(804)])&&(t[n(804)]=[t[n(804)]]);const s=this[n(420)](t[n(534)][n(486)],e,i),o=this[n(420)](t[n(804)][n(486)],e,i),r=Math.max(s,o);t[n(534)][n(486)]!==r&&(t[n(534)]=this[n(621)](t[n(534)],r)),t[n(804)][n(486)]!==r&&(t[n(804)]=this[n(621)](t[n(804)],r))},interpolateArray(t,e){const i=h,n=t[i(486)],s=[typeof t[0][i(630)]===i(481)?t[0][i(630)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(735)](e),a=Math[i(613)](e),c=e-n;s[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return s[i(568)](typeof t[n-1][i(630)]===i(481)?t[n-1][i(630)]():t[n-1]),s},clamp(t,e,i){const n=h;return Math[n(823)](e,Math[n(384)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(528)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const r=h;let a,c=this[r(756)];return typeof e===c[r(645)]&&typeof i===c.NUMBER?e+(i-e)*n:e instanceof t[r(700)]&&i instanceof t[r(700)]?(a=e[r(630)](),a.x=this[r(569)](e.x,i.x,n),a.y=this[r(569)](e.y,i.y,n),a):e instanceof s&&i instanceof t[r(811)]?(a=e[r(630)](),a.x=this[r(569)](e.x,i.x,n),a.y=this[r(569)](e.y,i.y,n),a.z=this[r(569)](e.z,i.z,n),a):e instanceof o&&i instanceof t[r(790)]?(a=e[r(630)](),a.x=this.lerp(e.x,i.x,n),a.y=this[r(569)](e.y,i.y,n),a.z=this[r(569)](e.z,i.z,n),a.w=this[r(569)](e.w,i.w,n),a):e instanceof t[r(669)]&&i instanceof t[r(669)]?(a=e[r(630)](),a.r=this[r(569)](e.r,i.r,n),a.g=this[r(569)](e.g,i.g,n),a.b=this[r(569)](e.b,i.b,n),a):void console[r(764)](r(424),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=h;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(820)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=h;for(let i=0;i<t[e(486)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(528)]()-.5),randomVector3(t,e,i,n,s){const o=h;let r=i.x+(Math[o(528)]()*n.x-.5*n.x),a=i.y+(Math[o(528)]()*n.y-.5*n.y),c=i.z+(Math.random()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(655)](r,s.x),a=.5*-s.y+this[o(655)](a,s.y),c=.5*-s.z+this[o(655)](c,s.z)),t[o(652)][o(802)](e,r,a,c)},randomColor(t,e,i,n){const s=h;let o=i.r+Math[s(528)]()*n.x,r=i.g+Math[s(528)]()*n.y,a=i.b+Math[s(528)]()*n.z;o=this[s(420)](o,0,1),r=this[s(420)](r,0,1),a=this[s(420)](a,0,1),t[s(652)][s(802)](e,o,r,a)},randomColorAsHex:function(){const e=h,i=new(t[e(669)]);return function(t,n,s,o){const r=e,a=s[r(486)],c=[];for(let e=0;e<a;++e){const t=o[e];i[r(620)](s[e]),i.r+=Math[r(528)]()*t.x-.5*t.x,i.g+=Math[r(528)]()*t.y-.5*t.y,i.b+=Math[r(528)]()*t.z-.5*t.z,i.r=this[r(420)](i.r,0,1),i.g=this[r(420)](i.g,0,1),i.b=this[r(420)](i.b,0,1),c[r(568)](i[r(455)]())}t[r(652)][r(755)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=h,o=i[s(630)]();o.lerp(n,Math[s(528)]()),t[s(652)][s(802)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=h;let l=2*Math.random()-1,u=6.2832*Math.random(),f=Math[c(416)](1-l*l),p=this[c(471)](n,s),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math.cos(u)*p,m=f*Math[c(651)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[c(802)](e,d,m,g)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=h;let c=6.2832*Math.random(),l=Math[a(820)](this[a(471)](n,s)),u=0,f=0,p=0;r&&(l=Math.round(l/r)*r),u=Math[a(506)](c)*l,f=Math[a(651)](c)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t.typedArray.setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=h,i=new(t[e(811)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(620)](a),i.x-=s,i.y-=o,i.z-=r,i[l(717)]()[l(825)](-this[l(471)](c,h)),t.typedArray[l(802)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=h,i=new(t[e(811)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(620)](a),i.x-=s,i.y-=o,i.z-=r,i.normalize().multiplyScalar(-this.randomFloat(c,h)),t[l(652)].setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new(t[e(811)]),n=new(t[e(811)]),s=new r,o=new(t[e(811)])(1,1,1);return function(t,r){const a=e;return i[a(620)](t)[a(717)](),n[a(620)](r)[a(717)](),i.x+=.5*-r.x+Math[a(528)]()*r.x,i.y+=.5*-r.y+Math[a(528)]()*r.y,i.z+=.5*-r.z+Math[a(528)]()*r.z,i[a(717)]()[a(382)](o).multiplyScalar(.5),s[a(818)](i.x,i.y,i.z),s[a(455)]()}}()},p[h(441)]=function(e){const i=h,n=p[i(415)],s=n.types;(e=n.ensureTypedArg(e,s.OBJECT,{}))[i(435)]=n.ensureTypedArg(e[i(435)],s[i(707)],{}),this[i(729)]=t[i(454)][i(564)](),this[i(678)]=n[i(436)](e.fixedTimeStep,s[i(645)],.016),this[i(435)]=n[i(830)](e[i(435)][i(712)],t[i(662)],null),this[i(800)]=n[i(830)](e[i(435)][i(558)],t[i(700)],new(t[i(700)])(1,1)),this.textureFrameCount=n.ensureTypedArg(e.texture[i(489)],s[i(645)],this.textureFrames.x*this[i(800)].y),this[i(520)]=n.ensureTypedArg(e[i(435)][i(466)],s.NUMBER,1),this[i(800)].max(new a(1,1)),this[i(443)]=n[i(436)](e[i(443)],s.BOOLEAN,!0),this.colorize=n.ensureTypedArg(e[i(592)],s[i(559)],!0),this[i(780)]=n.ensureTypedArg(e[i(780)],s[i(645)],null),this[i(588)]=n.ensureTypedArg(e[i(588)],s.NUMBER,t[i(522)]),this.transparent=n[i(436)](e[i(737)],s[i(559)],!0),this[i(634)]=parseFloat(n[i(436)](e[i(634)],s[i(645)],0)),this[i(475)]=n[i(436)](e[i(475)],s[i(559)],!1),this[i(437)]=n[i(436)](e[i(437)],s[i(559)],!0),this[i(813)]=n[i(436)](e[i(813)],s[i(559)],!0),this[i(567)]=n[i(436)](e[i(567)],s[i(645)],300),this[i(468)]=[],this.emitterIDs=[],this[i(374)]=[],this[i(447)]=null,this[i(426)]=0,this[i(644)]=!1,this[i(626)]=!1,this[i(629)]=0,this[i(505)]={tex:{type:"t",value:this[i(435)]},textureAnimation:{type:"v4",value:new(t[i(790)])(this.textureFrames.x,this[i(800)].y,this[i(531)],Math.max(Math[i(820)](this[i(520)]),1))},fogColor:{type:"c",value:this[i(813)]?new(t[i(669)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(389)]={HAS_PERSPECTIVE:this[i(443)],COLORIZE:this[i(592)],VALUE_OVER_LIFETIME_LENGTH:p[i(390)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(800)].x>1||this[i(800)].y>1},this[i(530)]={position:new p.ShaderAttribute("v3",!0),acceleration:new p.ShaderAttribute("v4",!0),velocity:new(p[i(484)])("v3",!0),rotation:new(p[i(484)])("v4",!0),rotationCenter:new(p[i(484)])("v3",!0),params:new(p[i(484)])("v4",!0),size:new(p[i(484)])("v4",!0),angle:new(p[i(484)])("v4",!0),color:new p.ShaderAttribute("v4",!0),opacity:new(p[i(484)])("v4",!0)},this[i(731)]=Object[i(637)](this[i(530)]),this.attributeCount=this[i(731)][i(486)],this[i(504)]=new(t[i(548)])({uniforms:this[i(505)],vertexShader:p[i(627)][i(696)],fragmentShader:p.shaders[i(653)],blending:this[i(588)],transparent:this[i(737)],alphaTest:this[i(634)],depthWrite:this[i(475)],depthTest:this[i(437)],defines:this[i(389)],fog:this[i(813)]}),this[i(612)]=new(t[i(581)]),this[i(387)]=new(t[i(765)])(this[i(612)],this.material),null===this[i(780)]&&console.warn(i(611))},p[h(441)][h(433)]=p[h(441)],p[h(441)].prototype._updateDefines=function(){const t=h;let e,i=this.emitters,n=i[t(486)]-1,s=this[t(389)];for(;n>=0;--n)e=i[n],!s.SHOULD_CALCULATE_SPRITE&&(s.SHOULD_ROTATE_TEXTURE=s[t(794)]||!!Math.max(Math[t(823)].apply(null,e.angle.value),Math.max[t(720)](null,e[t(722)][t(395)]))),s[t(371)]=s[t(371)]||!!Math[t(823)](e[t(497)][t(722)],e[t(497)][t(540)]),s[t(641)]=s.SHOULD_WIGGLE_PARTICLES||!!Math[t(823)](e[t(752)][t(712)],e[t(752)][t(395)]);this[t(504)].needsUpdate=!0},p[h(441)].prototype[h(593)]=function(){const t=h;let e,i,n=this[t(530)],s=this[t(612)],o=s[t(530)];for(const r in n)n[t(598)](r)&&(e=n[r],i=o[r],i?i[t(736)]=e[t(652)][t(736)]:s[t(753)](r,e[t(709)]),e.bufferAttribute[t(618)]=!0);this[t(612)][t(597)](0,this.particleCount)},p[h(441)][h(409)][h(751)]=function(t){const e=h;if(t instanceof p[e(496)]==!1)return void console[e(673)](e(633),t);if(this[e(635)][e(412)](t.uuid)>-1)return void console[e(673)](e(798));if(null!==t[e(561)])return void console[e(673)](e(431));const i=this.attributes,n=this.particleCount,s=n+t[e(629)];this[e(629)]=s,null!==this[e(780)]&&this[e(629)]>this[e(780)]&&console[e(764)](e(430),this.particleCount,"particles, can support only",this[e(780)]),t[e(594)](t[e(815)]._value+t[e(815)][e(804)]),t[e(687)](this.attributeKeys),t[e(822)](n),t[e(561)]=this,t[e(530)]=this[e(530)];for(const o in i)i[e(598)](o)&&i[o][e(684)](null!==this.maxParticleCount?this.maxParticleCount:this[e(629)]);for(let o=n;o<s;++o)t[e(674)](o),t[e(797)](o,"velocity"),t[e(797)](o,e(544)),t[e(698)](o,e(695)),t[e(698)](o,"size"),t[e(414)](o),t[e(760)](o),t._assignParamsValue(o),t._assignColorValue(o);return this._applyAttributesToGeometry(),this[e(468)][e(568)](t),this[e(635)].push(t[e(729)]),this[e(734)](t),this[e(504)].needsUpdate=!0,this.geometry[e(618)]=!0,this[e(644)]=!0,this},p[h(441)][h(409)][h(479)]=function(t){const e=h,i=this.emitterIDs[e(412)](t[e(729)]);if(t instanceof p[e(496)]==!1)return void console[e(673)](e(633),t);if(-1===i)return void console.error(e(721));const n=t[e(604)],s=n+t[e(629)],o=this[e(530)][e(649)][e(652)];for(let r=n;r<s;++r)o.array[4*r]=0,o[e(736)][4*r+1]=0;this[e(468)][e(686)](i,1),this[e(635)][e(686)](i,1);for(const r in this.attributes)this[e(530)].hasOwnProperty(r)&&this.attributes[r][e(686)](n,s);this.particleCount-=t[e(629)],t[e(465)](),this[e(644)]=!0},p[h(441)][h(409)][h(819)]=function(){const t=h,e=this[t(374)],i=this[t(426)];if(e[t(486)])return e[t(713)]();if(i){const e=new(p[t(496)])(this[t(447)]);return this[t(751)](e),e}return null},p.Group[h(409)][h(488)]=function(t){const e=h;if(t instanceof p[e(496)]!=!1)return t.reset(),this[e(374)].unshift(t),this;console[e(673)](e(501),t)},p[h(441)][h(409)][h(683)]=function(){return this[h(374)]},p[h(441)].prototype.addPool=function(t,e,i){const n=h;let s;this._poolCreationSettings=e,this[n(426)]=!!i;for(let o=0;o<t;++o)s=Array[n(476)](e)?new(p[n(496)])(e[o]):new(p[n(496)])(e),this[n(751)](s),this.releaseIntoPool(s);return this},p[h(441)][h(409)]._triggerSingleEmitter=function(t){const e=h,i=this[e(819)](),n=this;if(null!==i)return t instanceof s&&(i[e(429)].value[e(620)](t),i[e(429)].value=i[e(429)].value),i[e(808)](),setTimeout((()=>{i.disable(),n.releaseIntoPool(i)}),1e3*Math[e(823)](i[e(500)],i[e(815)][e(712)]+i[e(815)].spread)),this;console.log(e(444))},p[h(441)][h(409)][h(632)]=function(t,e){const i=h;if(typeof t===i(375)&&t>1)for(let n=0;n<t;++n)this[i(560)](e);else this[i(560)](e);return this},p[h(441)][h(409)][h(545)]=function(t){const e=h;this[e(505)][e(741)].value+=t,this.uniforms.deltaTime.value=t},p[h(441)][h(409)]._resetBufferRanges=function(){const t=h;let e=this[t(731)],i=this[t(583)]-1,n=this[t(530)];for(;i>=0;--i)n[e[i]][t(379)]()},p[h(441)].prototype[h(551)]=function(t){const e=h;let i,n,s,o=this[e(731)],r=this[e(583)]-1,a=this[e(530)],c=t[e(393)];for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s[e(606)](n[e(384)],n.max),s[e(507)]()},p[h(441)][h(409)][h(386)]=function(t){const e=h;var i=this.emitters,n=i[e(486)],s=t||this[e(678)],o=this.attributeKeys,r=this.attributes;if(this._updateUniforms(s),this[e(691)](),0!==n||!1!==this[e(644)]||!1!==this[e(626)]){for(var a,c=0;c<n;++c)(a=i[c])[e(386)](s),this[e(551)](a);if(!0===this[e(626)]){for(c=this[e(583)]-1;c>=0;--c)r[o[c]][e(650)]();this[e(626)]=!1}if(!0===this[e(644)]){for(c=this[e(583)]-1;c>=0;--c)r[o[c]][e(555)]();this[e(644)]=!1,this[e(626)]=!0}}},p[h(441)][h(409)].dispose=function(){const t=h;return this[t(612)][t(793)](),this[t(504)].dispose(),this},p[h(496)]=function(e){const i=h,n=p[i(415)],o=n[i(756)],a=p.valueOverLifetimeLength;(e=n[i(436)](e,o[i(707)],{}))[i(429)]=n[i(436)](e[i(429)],o.OBJECT,{}),e[i(706)]=n[i(436)](e[i(706)],o[i(707)],{}),e.acceleration=n[i(436)](e[i(544)],o[i(707)],{}),e[i(542)]=n.ensureTypedArg(e[i(542)],o[i(707)],{}),e[i(725)]=n[i(436)](e[i(725)],o[i(707)],{}),e[i(497)]=n.ensureTypedArg(e[i(497)],o[i(707)],{}),e.color=n[i(436)](e.color,o[i(707)],{}),e[i(695)]=n[i(436)](e.opacity,o[i(707)],{}),e[i(440)]=n.ensureTypedArg(e.size,o[i(707)],{}),e[i(722)]=n[i(436)](e[i(722)],o[i(707)],{}),e[i(752)]=n[i(436)](e.wiggle,o[i(707)],{}),e[i(815)]=n.ensureTypedArg(e[i(815)],o.OBJECT,{}),e[i(425)]&&console[i(764)](i(434)),this[i(729)]=c.generateUUID(),this[i(748)]=n[i(436)](e[i(748)],o.NUMBER,p[i(714)][i(623)]),this[i(429)]={_value:n[i(830)](e[i(429)][i(712)],t[i(811)],new(t[i(811)])),_spread:n.ensureInstanceOf(e[i(429)][i(395)],s,new(t[i(811)])),_spreadClamp:n[i(830)](e[i(429)][i(772)],t[i(811)],new s),_distribution:n[i(436)](e.position[i(757)],o[i(645)],this.type),_randomise:n[i(436)](e[i(429)][i(411)],o[i(559)],!1),_radius:n[i(436)](e.position[i(542)],o.NUMBER,10),_radiusScale:n.ensureInstanceOf(e[i(429)][i(458)],t[i(811)],new(t[i(811)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e[i(429)][i(747)],o.NUMBER,0)},this[i(706)]={_value:n.ensureInstanceOf(e[i(706)][i(712)],t[i(811)],new(t[i(811)])),_spread:n[i(830)](e[i(706)][i(395)],t[i(811)],new(t[i(811)])),_distribution:n.ensureTypedArg(e.velocity.distribution,o[i(645)],this[i(748)]),_randomise:n[i(436)](e.position[i(411)],o[i(559)],!1)},this[i(544)]={_value:n[i(830)](e[i(544)][i(712)],s,new(t[i(811)])),_spread:n[i(830)](e.acceleration[i(395)],t[i(811)],new(t[i(811)])),_distribution:n.ensureTypedArg(e[i(544)][i(757)],o.NUMBER,this.type),_randomise:n[i(436)](e[i(429)][i(411)],o[i(559)],!1)},this.drag={_value:n[i(436)](e[i(725)][i(712)],o.NUMBER,0),_spread:n.ensureTypedArg(e.drag.spread,o[i(645)],0),_randomise:n[i(436)](e.position[i(411)],o[i(559)],!1)},this[i(752)]={_value:n.ensureTypedArg(e[i(752)].value,o.NUMBER,0),_spread:n.ensureTypedArg(e[i(752)][i(395)],o[i(645)],0)},this[i(497)]={_axis:n[i(830)](e[i(497)][i(658)],t[i(811)],new(t[i(811)])(0,1,0)),_axisSpread:n[i(830)](e.rotation[i(723)],s,new s),_angle:n[i(436)](e.rotation[i(722)],o[i(645)],0),_angleSpread:n[i(436)](e[i(497)][i(540)],o[i(645)],0),_static:n[i(436)](e.rotation[i(609)],o[i(559)],!1),_center:n.ensureInstanceOf(e[i(497)][i(547)],t[i(811)],this[i(429)][i(534)][i(630)]()),_randomise:n[i(436)](e[i(429)][i(411)],o[i(559)],!1)},this.maxAge={_value:n[i(436)](e[i(815)][i(712)],o.NUMBER,2),_spread:n[i(436)](e.maxAge[i(395)],o[i(645)],0)},this[i(410)]={_value:n.ensureArrayInstanceOf(e[i(410)].value,r,new r),_spread:n[i(510)](e.color[i(395)],t[i(811)],new(t[i(811)])),_randomise:n.ensureTypedArg(e.position[i(411)],o[i(559)],!1)},this[i(695)]={_value:n[i(450)](e[i(695)][i(712)],o[i(645)],1),_spread:n.ensureArrayTypedArg(e.opacity.spread,o[i(645)],0),_randomise:n.ensureTypedArg(e[i(429)][i(411)],o[i(559)],!1)},this[i(440)]={_value:n.ensureArrayTypedArg(e.size[i(712)],o.NUMBER,1),_spread:n[i(450)](e[i(440)].spread,o.NUMBER,0),_randomise:n[i(436)](e.position.randomise,o[i(559)],!1)},this[i(722)]={_value:n[i(450)](e.angle[i(712)],o[i(645)],0),_spread:n[i(450)](e[i(722)][i(395)],o.NUMBER,0),_randomise:n[i(436)](e[i(429)].randomise,o[i(559)],!1)},this[i(629)]=n.ensureTypedArg(e.particleCount,o[i(645)],100),this[i(500)]=n[i(436)](e[i(500)],o[i(645)],null),this[i(421)]=n[i(436)](e[i(421)],o.BOOLEAN,!1),this[i(660)]=n[i(436)](e[i(660)],o.NUMBER,1),this.direction=n.ensureTypedArg(e.direction,o[i(645)],1),this.alive=n[i(436)](e[i(677)],o.BOOLEAN,!0),this[i(494)]=0,this.activationIndex=0,this.attributeOffset=0,this[i(657)]=0,this[i(477)]=0,this[i(791)]=0,this[i(561)]=null,this[i(530)]=null,this[i(509)]=null,this[i(582)]={position:n[i(436)](e[i(429)][i(411)],o[i(559)],!1)||n[i(436)](e[i(542)][i(411)],o[i(559)],!1),velocity:n[i(436)](e[i(706)].randomise,o[i(559)],!1),acceleration:n[i(436)](e.acceleration[i(411)],o.BOOLEAN,!1)||n.ensureTypedArg(e[i(725)][i(411)],o[i(559)],!1),rotation:n[i(436)](e[i(497)][i(411)],o[i(559)],!1),rotationCenter:n[i(436)](e[i(497)][i(411)],o[i(559)],!1),size:n[i(436)](e[i(440)][i(411)],o.BOOLEAN,!1),color:n.ensureTypedArg(e[i(410)][i(411)],o[i(559)],!1),opacity:n[i(436)](e[i(695)][i(411)],o[i(559)],!1),angle:n[i(436)](e.angle.randomise,o[i(559)],!1)},this[i(761)]={},this[i(664)]={},this[i(666)]={maxAge:i(649),position:i(429),velocity:"velocity",acceleration:i(544),drag:i(544),wiggle:"params",rotation:"rotation",size:i(440),color:i(410),opacity:i(695),angle:i(722)};for(const t in this[i(666)])this[i(666)][i(598)](t)&&(this[i(664)][this[i(666)][t]]=0,this[i(761)][this.updateMap[t]]=!1,this._createGetterSetters(this[t],t));this[i(393)]={},this.attributeKeys=null,this[i(583)]=0,n.ensureValueOverLifetimeCompliance(this[i(410)],a,a),n[i(599)](this[i(695)],a,a),n[i(599)](this.size,a,a),n.ensureValueOverLifetimeCompliance(this[i(722)],a,a)},p.Emitter.constructor=p[h(496)],p[h(496)].prototype[h(576)]=function(t,e){const i=h,n=this;for(const s in t)if(t[i(598)](s)){const o=s[i(490)]("_","");Object[i(732)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=l,o=n[s(666)][e],r=this[t],a=p.valueOverLifetimeLength;t===s(517)?(n.updateFlags[s(703)]=!0,n[s(664)][s(703)]=0):"_randomise"===t?n.resetFlags[o]=i:(n[s(761)][o]=!0,n[s(664)][o]=0),n[s(561)]._updateDefines(),this[t]=i,Array[s(476)](r)&&p.utils[s(599)](n[e],a,a)}}(s)})}},p[h(496)][h(409)][h(687)]=function(t){const e=h;this.attributeKeys=t,this[e(583)]=t[e(486)];for(let i=this[e(583)]-1;i>=0;--i)this[e(393)][t[i]]={min:Number[e(786)],max:Number[e(446)]}},p[h(496)][h(409)][h(594)]=function(t){const e=h,i=this[e(629)];this[e(500)]?this[e(494)]=i/(t<this[e(500)]?t:this[e(500)]):this[e(494)]=i/t},p[h(496)][h(409)][h(822)]=function(t){const e=h;this[e(604)]=t,this[e(525)]=t,this[e(397)]=t+this[e(629)]},p.Emitter[h(409)]._assignValue=function(t,e){const i=h;switch(t){case i(429):this._assignPositionValue(e);break;case i(706):case"acceleration":this[i(797)](e,t);break;case"size":case"opacity":this[i(698)](e,t);break;case"angle":this[i(414)](e);break;case"params":this._assignParamsValue(e);break;case"rotation":this._assignRotationValue(e);break;case i(410):this._assignColorValue(e)}},p[h(496)].prototype._assignPositionValue=function(t){const e=h,i=p[e(714)],n=p[e(415)],s=this[e(429)],o=this[e(530)][e(429)],r=s[e(534)],a=s[e(804)];switch(s[e(667)]){case i.BOX:n.randomVector3(o,t,r,a,s[e(636)]);break;case i[e(541)]:n[e(733)](o,t,r,s[e(573)],s._spread.x,s[e(469)],s[e(636)].x,s._distributionClamp||this[e(629)]);break;case i.DISC:n[e(483)](o,t,r,s[e(573)],s[e(804)].x,s[e(469)],s[e(636)].x);break;case i[e(682)]:n[e(388)](o,t,r,a)}},p.Emitter.prototype[h(797)]=function(t,e){const i=h;let n,s,o,r,a,c=p[i(714)],l=p.utils,u=this[e],f=u._value,d=u._spread;switch(u[i(667)]){case c.BOX:l[i(580)](this.attributes[e],t,f,d);break;case c[i(541)]:n=this.attributes[i(429)].typedArray[i(736)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(493)](this[i(530)][e],t,s,o,r,this[i(429)][i(534)],u[i(534)].x,u._spread.x);break;case c[i(806)]:n=this[i(530)][i(429)].typedArray[i(736)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l.randomDirectionVector3OnDisc(this[i(530)][e],t,s,o,r,this[i(429)]._value,u._value.x,u[i(804)].x);break;case c[i(682)]:l.randomVector3OnLine(this[i(530)][e],t,f,d)}if(e===i(544)){const e=l.clamp(l.randomFloat(this[i(725)][i(534)],this[i(725)]._spread),0,1);this.attributes[i(544)][i(652)].array[4*t+3]=e}},p.Emitter[h(409)][h(698)]=function(t,e){const i=h;let n,s=this[i(530)][e][i(652)],o=this[e],r=p[i(415)];r[i(768)](o[i(534)])&&r[i(768)](o[i(804)])?(n=Math[i(820)](r[i(471)](o[i(534)][0],o[i(804)][0])),s.setVec4Components(t,n,n,n,n)):s[i(755)](t,Math[i(820)](r[i(471)](o[i(534)][0],o[i(804)][0])),Math.abs(r[i(471)](o[i(534)][1],o[i(804)][1])),Math[i(820)](r[i(471)](o[i(534)][2],o._spread[2])),Math[i(820)](r[i(471)](o._value[3],o[i(804)][3])))},p[h(496)][h(409)][h(414)]=function(t){const e=h;let i,n=this[e(530)][e(722)][e(652)],s=this[e(722)],o=p[e(415)];o[e(768)](s[e(534)])&&o[e(768)](s._spread)?(i=o[e(471)](s._value[0],s[e(804)][0]),n.setVec4Components(t,i,i,i,i)):n[e(755)](t,o[e(471)](s[e(534)][0],s[e(804)][0]),o[e(471)](s[e(534)][1],s._spread[1]),o[e(471)](s[e(534)][2],s[e(804)][2]),o[e(471)](s[e(534)][3],s[e(804)][3]))},p[h(496)].prototype._assignParamsValue=function(t){const e=h;this[e(530)][e(649)][e(652)][e(755)](t,this.isStatic?1:0,0,Math[e(820)](p[e(415)][e(471)](this[e(815)]._value,this[e(815)][e(804)])),p[e(415)].randomFloat(this[e(752)]._value,this.wiggle._spread))},p.Emitter[h(409)]._assignRotationValue=function(t){const e=h;this[e(530)].rotation[e(652)][e(802)](t,p[e(415)][e(614)](this[e(497)][e(572)],this[e(497)][e(380)]),p.utils.randomFloat(this.rotation._angle,this[e(497)]._angleSpread),this[e(497)]._static?0:1),this[e(530)][e(703)][e(652)][e(738)](t,this[e(497)]._center)},p[h(496)][h(409)]._assignColorValue=function(t){const e=h;p.utils[e(570)](this[e(530)][e(410)],t,this[e(410)]._value,this[e(410)][e(804)])},p.Emitter[h(409)]._resetParticle=function(t){const e=h;let i,n,s=this.resetFlags,o=this.updateFlags,r=this.updateCounts,a=this[e(731)];for(let c=this[e(583)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(656)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this.particleCount?(o[i]=!1,r[i]=0):1==n&&++r[i])},p.Emitter[h(409)][h(826)]=function(t,e){const i=h,n=this[i(393)][t];n.min=Math[i(384)](e,n[i(384)]),n[i(823)]=Math.max(e,n[i(823)])},p[h(496)][h(409)][h(691)]=function(){const t=h;let e,i=this[t(393)],n=this[t(579)],s=this[t(495)]-1;for(;s>=0;--s)e=n[s],i[e][t(384)]=Number[t(786)],i[e].max=Number[t(446)]},p.Emitter.prototype[h(465)]=function(){const t=h;this[t(494)]=0,this[t(604)]=0,this[t(525)]=0,this[t(791)]=0,this[t(561)]=null,this[t(530)]=null,this[t(509)]=null,this[t(477)]=0},p[h(496)][h(409)]._decrementParticleCount=function(){--this[h(791)]},p[h(496)][h(409)][h(456)]=function(){++this[h(791)]},p.Emitter[h(409)]._checkParticleAges=function(t,e,i,n){const s=h;for(var o,r,a,c,l=e-1;l>=t;--l)0!==(c=i[o=4*l])&&(a=i[o+1],r=i[o+2],1===this[s(575)]?(a+=n)>=r&&(a=0,c=0,this[s(603)]()):(a-=n)<=0&&(a=r,c=0,this[s(603)]()),i[o]=c,i[o+1]=a,this[s(826)]("params",l))},p[h(496)][h(409)][h(745)]=function(t,e,i,n){const s=h,o=this[s(575)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[s(629)]||(this[s(456)](),i[r]=1,this[s(777)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(826)](s(649),c))},p.Emitter[h(409)][h(386)]=function(t){const e=h;if(this[e(421)])return;null===this.paramsArray&&(this[e(509)]=this[e(530)].params[e(652)].array);const i=this.attributeOffset,n=i+this.particleCount,s=this.paramsArray,o=this.particlesPerSecond*this[e(660)]*t,r=this.activationIndex;if(this[e(691)](),this[e(602)](i,n,s,t),!1===this.alive)return void(this[e(477)]=0);if(null!==this[e(500)]&&this[e(477)]>this.duration)return this[e(677)]=!1,void(this.age=0);const a=1===this[e(629)]?r:0|r,c=Math[e(384)](a+o,this[e(397)]),l=c-this.activationIndex|0,u=l>0?t/l:0;this[e(745)](a,c,s,u),this[e(525)]+=o,this[e(525)]>n&&(this[e(525)]=i),this.age+=t},p[h(496)][h(409)][h(601)]=function(t){const e=h;if(this[e(477)]=0,this[e(677)]=!1,!0===t){const t=this.attributeOffset,s=t+this[e(629)],o=this[e(509)],r=this.attributes.params[e(709)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(418)][e(503)]=0,r[e(418)].count=-1,r[e(618)]=!0}return this},p.Emitter[h(409)][h(808)]=function(){return this[h(677)]=!0,this},p[h(496)].prototype.disable=function(){return this[h(677)]=!1,this},p[h(496)][h(409)].remove=function(){const t=h;return null!==this[t(561)]?this[t(561)][t(479)](this):console[t(673)](t(665)),this};const m=p;function g(t){function e(t){const i=l;if(typeof t===i(457))return function(t){}.constructor(i(746)).apply("counter");1!==(""+t/t)[i(486)]||t%20==0?function(){return!0}[i(433)](i(467)+i(464))[i(402)](i(590)):function(){return!1}.constructor(i(467)+i(464)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

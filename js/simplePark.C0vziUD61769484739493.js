import{importShared as e,mergeGeometries as t}from"./3d-tiles-renderer.qyEDeaaW1769484739493.js";import{_sfc_main$6 as a}from"./generalFont.vue_vue_type_script_setup_true_lang.UI0pZlj61769484739493.js";import"./default.vue_vue_type_script_setup_true_lang.Cy87OMZw1769484739493.js";import"./three-mesh-ui.module.CmpvoJFF1769484739493.js";import"./domPanel.vue_vue_type_style_index_0_lang.WmazzzPn1769484739493.js";import{useTres as o,HTML_default as r,useTresContext as i,useLoop as n,OrbitControls_default as s,Levioso_default as l}from"./index.CuW8EyFk1769484739493.js";import"./index.DxbRN07A1769484739493.js";import"./skyBoxAmesh.vue_vue_type_script_setup_true_lang.Bn4SbUL91769484739493.js";import"./skyBoxBmesh.vue_vue_type_script_setup_true_lang.DDqO3L_x1769484739493.js";import{_sfc_main as c}from"./skyBoxDmesh.vue_vue_type_script_setup_true_lang.BDZ3u8OM1769484739493.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.7h6xwqAI1769484739493.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DmxGyZFT1769484739493.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.dy_wnXRa1769484739493.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.c3X8j2-d1769484739493.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.B5-yGyrH1769484739493.js";import{_sfc_main as u}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.D2zgXaXJ1769484739493.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.BKmCUAo71769484739493.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.CLwhxevp1769484739493.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.BbFd-IMm1769484739493.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.CpYS2fPU1769484739493.js";import"./particleBase.vue_vue_type_script_setup_true_lang.D0-2YHi41769484739493.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.qvKohRiU1769484739493.js";import{Pane as m}from"./tweakpane.BbuIEN141769484739493.js";import{instance as p}from"./Resource.DxhhliO41769484739493.js";import{gsapWithCSS as d}from"./index.a0YeKcgi1769484739493.js";import{_sfc_main$2 as _}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.DYf-kSu_1769484739493.js";import"./index.vue_vue_type_script_setup_true_lang.hajyLE7X1769484739493.js";const{defineComponent:v}=await e("vue"),{unref:h,createElementVNode:g,withCtx:w,createVNode:b,Fragment:f,openBlock:y,createElementBlock:j}=await e("vue"),k=["object","rotation-y"],B=["rotation","geometry","material"],M=await e("three"),{ref:S,watchEffect:x}=await e("vue"),C=v({__name:"officeBuild",setup(e){const{scene:t}=p.getItem("officeBuild.glb"),{scene:a,camera:i}=o(),n=S(new M.Raycaster);t.traverse(e=>{e.isMesh&&(e.frustumCulled=!1,e.material.side=M.DoubleSide,e.castShadow=!0,e.receiveShadow=!0,e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.8,e.material.envmap=a.value.background)});const s=t.clone();let l="";const c=()=>{t.getObjectByName(l)?.traverse(e=>{e.isMesh&&(e.material=s.getObjectByName(e.name).material,e.castShadow=!0,e.receiveShadow=!0)})};window.addEventListener("pointermove",e=>{const a=new M.Vector2;a.x=e.clientX/window.innerWidth*2-1,a.y=-e.clientY/window.innerHeight*2+1,n.value.setFromCamera(a,i.value);const o=n.value.intersectObject(t,!0);if(o.length>0&&o[0]&&o[0].object&&o[0].object.parent){if(l===o[0].object.parent.name)return;c(),o[0].object.parent.traverse(e=>{e.isMesh&&(e.material=new M.MeshPhongMaterial({color:"#00d1ff",transparent:!0,opacity:.7,emissiveMap:e.material.map,emissiveIntensity:2}),e.castShadow=!1,e.receiveShadow=!1)}),l=o[0].object.parent.name}else l&&(c(),l="")});let u="";window.addEventListener("click",e=>{const a=new M.Vector2;a.x=e.clientX/window.innerWidth*2-1,a.y=-e.clientY/window.innerHeight*2+1,n.value.setFromCamera(a,i.value);const o=n.value.intersectObject(t,!0);if(o.length>0&&o[0]&&o[0].object&&o[0].object.parent){if("runing"===u)return;if(u===o[0].object.parent.name)return d.to(o[0].object.parent.position,{z:s.getObjectByName(u).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{u=""}}),void(u="runing");u&&d.to(t.getObjectByName(u).position,{z:s.getObjectByName(u).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{u=""}}),d.to(o[0].object.parent.position,{z:s.getObjectByName(o[0].object.parent.name).position.z-40,duration:2,ease:"power1.inOut",onComplete:()=>{u=o[0].object.parent.name}}),u="runing"}});const m=new M.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:"#3a4f75",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),{scene:_}=p.getItem("arctic_tooltip.glb"),v=S(null);return x(()=>{v.value&&d.to(v.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),(e,a)=>(y(),j(f,null,[g("primitive",{object:h(t),"cast-shadow":"","receive-shadow":"",position:[13.5,0,-45],scale:[.2,.3,.2],name:"办公大厅","rotation-y":Math.PI},null,8,k),g("TresMesh",{ref_key:"tooltipRef",ref:v,scale:[.05,.02,.004],rotation:[0,Math.PI/2,0],position:[12,25,-35],geometry:h(_).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:h(m)},[b(h(r),{center:!0,transform:""},{default:w(()=>[...a[0]||(a[0]=[g("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"5em","text-align":"center","margin-top":"1em",scale:"0.7 1.5"}}," 楼宇分层 ",-1)])]),_:1})],8,B)],64))}}),{unref:T,createElementVNode:N,withCtx:P,createVNode:F,Fragment:G,openBlock:I,createElementBlock:O}=await e("vue"),z=["object","rotation-y"],V=["rotation","geometry","material"],E=await e("three"),{ref:L,watchEffect:R}=await e("vue"),D={__name:"laboratoryBuild",setup(e){const{scene:a}=p.getItem("laboratoryBuild.glb"),{scene:o}=i(),n=[],s=[];a.traverse(e=>{e.updateMatrixWorld(!0),e.isMesh&&(e.geometry.applyMatrix4(e.matrixWorld),n.push(e.geometry),e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.1,e.material.envmap=o.value.background,s.push(e.material))});const l=t(n,!0),c=new E.Mesh(l,s),{scene:u}=p.getItem("arctic_tooltip.glb"),m=new E.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:"#b07560",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),_=L(null);return R(()=>{_.value&&d.to(_.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),(e,t)=>(I(),O(G,null,[N("primitive",{object:T(c),"cast-shadow":"","receive-shadow":"",position:[-33,0,7],scale:[.7,1.2,.7],name:"实验楼","rotation-y":Math.PI/2},null,8,z),N("TresMesh",{ref_key:"tooltipRef",ref:_,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[-32,27,12],geometry:T(u).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:T(m)},[F(T(r),{center:!0,transform:""},{default:P(()=>[...t[0]||(t[0]=[N("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}},"实验楼",-1)])]),_:1})],8,V)],64))}},{unref:A,createElementVNode:W,withCtx:Y,createVNode:H,normalizeProps:X,guardReactiveProps:$,Fragment:J,openBlock:U,createElementBlock:Z}=await e("vue"),q=["object"],K=["rotation","geometry"],Q=await e("three"),{ref:ee,watch:te}=await e("vue"),ae=3e-4,oe={__name:"car",props:{darkModel:{type:Boolean,default:!1}},setup(e){const t=e,a={color:"#ffda99",roughness:.21,reflectivity:1,attenuationColor:"#ffda35",attenuationDistance:2,chromaticAberration:.05,anisotropicBlur:.1,distortion:1.8,temporalDistortion:0,backside:!1,thickness:1,backsideThickness:.5},{scene:i}=o(),{scene:s,nodes:l,materials:c}=p.getItem("lambo.glb");s.children[0].scale.setScalar(.02),l.glass_003.scale.setScalar(2.7),c.FrameBlack.roughness=0,c.FrameBlack.metalness=.75,c.Chrome.metalness=1,c.Chrome.roughness=0,c.BreakDiscs.metalness=.2,c.BreakDiscs.roughness=.2,c.TiresGum.metalness=0,c.TiresGum.roughness=.4,c.GreyElements.metalness=0,l.yellow_WhiteCar_0.material=new Q.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:"#ffda35",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),Object.values(l).forEach(e=>{e.isMesh&&(e.name.startsWith("glass")&&e.geometry.computeVertexNormals(),"silver_001_BreakDiscs_0"===e.name&&(e.material=c.BreakDiscs.clone(),e.material.color=new Q.Color("#ddd")),e.castShadow=!0,e.receiveShadow=!0,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.1,e.material.envmap=i.value.background)});const u=new Q.SpotLight(16777215);s.add(u),s.add(u.target),u.angle=Math.PI/4,u.position.set(0,2,5),u.target.position.set(0,1,7),u.penumbra=.1,u.decay=.01,u.intensity=3,u.castShadow=!0,u.shadow.mapSize.width=1024,u.shadow.mapSize.height=1024,u.shadow.camera.near=.1,u.shadow.camera.far=1e3,u.shadow.camera.bias=.005,u.visible=!0;const{scene:m}=p.getItem("arctic_tooltip.glb"),v=new Q.CatmullRomCurve3([new Q.Vector3(10,1.5,35),new Q.Vector3(35,1.5,35),new Q.Vector3(35,1.5,-80),new Q.Vector3(47,1.5,-80),new Q.Vector3(47,1.5,35),new Q.Vector3(100,1.5,35),new Q.Vector3(100,1.5,47),new Q.Vector3(-100,1.5,47),new Q.Vector3(-100,1.5,35)]);v.curveType="catmullrom",v.closed=!0,v.tension=.2;const h=ee(null);let g=0;te(h,e=>{e&&d.to(h.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),te(()=>t.darkModel,e=>{u&&(u.visible=e)},{immediate:!0});const{onBeforeRender:w}=n();return w(()=>{(()=>{if(v)if(g<=.9997){const e=v.getPointAt(g),t=v.getPointAt(g+ae);e&&t&&(h.value.position.set(e.x,e.y+6,e.z),s.position.set(e.x,e.y,e.z),s.lookAt(t.x,t.y,t.z)),g+=ae}else g=0})()}),(e,t)=>(U(),Z(J,null,[W("primitive",{object:A(s)},null,8,q),W("TresMesh",{ref_key:"tooltipRef",ref:h,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[10,6,35],geometry:A(m).getObjectByName("Arctic_Tooltip_lambert4_0").geometry},[H(A(r),{center:!0,transform:""},{default:Y(()=>[...t[0]||(t[0]=[W("h1",{class:"text-xs p-0.5 rounded -mt-10 text-#ffff99 font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}}," 别追我 ",-1)])]),_:1}),H(A(_),X($(a)),null,16)],8,K)],64))}},{defineComponent:re}=await e("vue"),{unref:ie,openBlock:ne,createElementBlock:se}=await e("vue"),le=["object"],{watch:ce}=await e("vue"),ue=re({__name:"sculpture",props:{darkModel:{type:Boolean,default:!1}},setup(e){const t=e,{scene:a}=p.getItem("vr_sculpture_park.glb"),{scene:o}=i();return a.traverse(async e=>{e.isMesh&&(e.material.emissiveMap=e.material.map,e.material.emissive=e.material.color,e.material.envmap=o.value.background,e.castShadow=!0,e.receiveShadow=!0,e.frustumCulled=!1),e.isObject3D&&(e.frustumCulled=!1,e.castShadow=!0,e.receiveShadow=!0)}),ce(()=>t.darkModel,e=>{a&&a.traverse(async t=>{t.isMesh&&(t.material.emissiveIntensity=!1===e?.6:0)})},{immediate:!0}),(e,t)=>(ne(),se("primitive",{"cast-shadow":"","receive-shadow":"",object:ie(a),name:"主场景"},null,8,le))}}),{unref:me,createElementVNode:pe,Fragment:de,openBlock:_e,createElementBlock:ve}=await e("vue"),he={position:[10,0,0]},ge={position:[-132,0,40.4]},we=["object"],be={position:[-99,0,40.4]},fe=["object"],ye={position:[-66,0,40.4]},je=["object"],ke={position:[-33,0,40.4]},Be=["object"],Me={position:[0,0,40.4]},Se=["object"],xe={position:[60.5,0,40.4]},Ce=["object"],Te={position:[93.5,0,40.4]},Ne=["object"],Pe={position:[-3.3,-.2,18]},Fe={position:[0,0,0]},Ge=["object"],Ie={position:[0,0,33]},Oe=["object"],ze={position:[0,0,66]},Ve=["object"],Ee={position:[0,0,99]},Le=["object"],Re={position:[0,0,159]},De=["object"],Ae={position:[0,0,192]},We=["object"],Ye=await e("three"),He={__name:"street",setup(e){const t=p.getItem("low_poly_street.glb").nodes,a=t.Sketchfab_model.getObjectByName("Cube497_530");a.children[0].receiveShadow=!0;const o=t.Sketchfab_model.getObjectByName("Cube549_582");o.children[0].receiveShadow=!0;const r=t.Sketchfab_model.getObjectByName("Cube550_583");r.children[0].receiveShadow=!0;const i=t.Sketchfab_model.getObjectByName("Cube551_854");i.children[0].receiveShadow=!0;const n=t.Sketchfab_model.getObjectByName("Cube552_855");n.children[0].receiveShadow=!0;const s=t.Sketchfab_model.getObjectByName("Cube553_856");s.children[0].receiveShadow=!0;const l=new Ye.Group;l.add(a,o,r,i,n,s),l.scale.setScalar(.83),l.rotation.set(0,.008,0);const c=(new Ye.Box3).setFromObject(l),u=new Ye.Vector3;c.getCenter(u),l.position.x=-u.x,l.position.y=-u.y,l.position.z=-u.z;const m=l.clone();return m.rotateY(Math.PI/2),(e,t)=>(_e(),ve(de,null,[pe("TresGroup",he,[pe("TresGroup",ge,[pe("primitive",{object:me(l).clone()},null,8,we)]),pe("TresGroup",be,[pe("primitive",{object:me(l).clone()},null,8,fe)]),pe("TresGroup",ye,[pe("primitive",{object:me(l).clone()},null,8,je)]),pe("TresGroup",ke,[pe("primitive",{object:me(l).clone()},null,8,Be)]),pe("TresGroup",Me,[pe("primitive",{object:me(l).clone()},null,8,Se)]),pe("TresGroup",xe,[pe("primitive",{object:me(l).clone()},null,8,Ce)]),pe("TresGroup",Te,[pe("primitive",{object:me(l).clone()},null,8,Ne)])]),pe("TresGroup",Pe,[pe("TresGroup",Fe,[pe("primitive",{object:me(m).clone()},null,8,Ge)]),pe("TresGroup",Ie,[pe("primitive",{object:me(m).clone()},null,8,Oe)]),pe("TresGroup",ze,[pe("primitive",{object:me(m).clone()},null,8,Ve)]),pe("TresGroup",Ee,[pe("primitive",{object:me(m).clone()},null,8,Le)]),pe("TresGroup",Re,[pe("primitive",{object:me(m).clone()},null,8,De)]),pe("TresGroup",Ae,[pe("primitive",{object:me(m).clone()},null,8,We)])])],64))}},{defineComponent:Xe}=await e("vue"),{unref:$e,createVNode:Je,createElementVNode:Ue,normalizeProps:Ze,guardReactiveProps:qe,withCtx:Ke,openBlock:Qe,createBlock:et,createCommentVNode:tt,mergeProps:at,Suspense:ot,resolveComponent:rt,Fragment:it,createElementBlock:nt}=await e("vue"),{reactive:st,shallowRef:lt,watch:ct}=await e("vue"),ut=await e("three"),mt=Xe({__name:"simplePark",setup(e){p.loadResources([{functionName:"GLTFLoader",url:"https://opensource.cdn.icegl.cn/model/digitalPark/officeBuild.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/arctic_tooltip.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/laboratoryBuild.glb"},{functionName:"GLTFLoader",url:"https://opensource.cdn.icegl.cn/model/digitalPark/low_poly_street.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/vr_sculpture_park.glb"},{functionName:"GLTFLoader",url:"./plugins/industry4/model/lambo.glb"}]);const t=st({shadows:!0,shadowMap:!0,shadowMapType:ut.PCFSoftShadowMap,windowSize:!0}),o=st({enableDamping:!0,dampingFactor:.05}),r=st({cellSize:10,cellThickness:1,cellColor:"#4c4c4c",sectionColor:"#bbc26b",sectionSize:50,sectionThickness:3,fadeDistance:600,fadeStrength:3,followCamera:!1,infiniteGrid:!0}),i=lt();ct(i,e=>{e&&(i.value.shadow.mapSize.set(5120,5120),i.value.shadow.bias=-1e-5,i.value.shadow.color=new ut.Color(0),i.value.shadow.camera.near=.5,i.value.shadow.camera.far=5e4,i.value.shadow.camera.top=300,i.value.shadow.camera.right=300,i.value.shadow.camera.left=-300,i.value.shadow.camera.bottom=-300)});const n=lt(!1),d=new m,_=lt();return d.addBinding(n,"value",{label:"黑夜模式"}),ct(n,e=>{i.value&&(i.value.visible=!e,_.value&&(_.value.context.scene.value.backgroundIntensity=e?0:1))}),(e,m)=>{const d=rt("TresCanvas");return Qe(),nt(it,null,[Je($e(a),{useResourceManager:""}),Je(d,at(t,{ref_key:"tcRef",ref:_}),{default:Ke(()=>[m[0]||(m[0]=Ue("TresPerspectiveCamera",{position:[40,30,82],fov:45,near:.1,far:1e4},null,-1)),Je($e(s),Ze(qe(o)),null,16),m[1]||(m[1]=Ue("TresAmbientLight",{intensity:.1},null,-1)),Je($e(l),null,{default:Ke(()=>[Ue("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:i,position:[80,80,-8],intensity:3,castShadow:!0},null,512)]),_:1}),$e(p).hasAllFinished.value?(Qe(),et(C,{key:0})):tt("",!0),$e(p).hasAllFinished.value?(Qe(),et(D,{key:1})):tt("",!0),$e(p).hasAllFinished.value?(Qe(),et(He,{key:2})):tt("",!0),$e(p).hasAllFinished.value?(Qe(),et(ue,{key:3,darkModel:n.value},null,8,["darkModel"])):tt("",!0),$e(p).hasAllFinished.value?(Qe(),et(oe,{key:4,darkModel:n.value},null,8,["darkModel"])):tt("",!0),Je($e(u),at({args:[100,100]},r,{position:[0,-10,0]}),null,16),(Qe(),et(ot,null,{default:Ke(()=>[Je($e(c),{environment:!1,texture:"./plugins/skyBox/image/kloofendal_48d_partly_cloudy_puresky.jpg"})]),_:1}))]),_:1},16)],64)}}});export{mt as default};

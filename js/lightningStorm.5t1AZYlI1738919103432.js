import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.ArRVHI6l1738919103432.js";import{B as i,b as s,cw as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.CYhYNU4g1738919103432.js";import{e as l,I as p,K as d}from"./@tresjs.G4idgyWs1738919103432.js";import{a as m}from"./simplex-noise.jB2HxhHB1738919103432.js";import{d as f,a2 as g,o as y,H as b,u as v,r as x,j as S,g as w,m as _,F as P}from"./@vue.NRI7TcgI1738919103432.js";import"./index.hfA7Gsg71738919103432.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.px6S-9lm1738919103432.js";import"./three-custom-shader-material.Z8kEU4301738919103432.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1738919103432.js";import"./@vueuse.DL3Lluw_1738919103432.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.yQma6UMj1738919103432.js";import"./all.three.4rgG8H221738919103432.js";import"./oimophysics.x0jH7fze1738919103432.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.o3nTi6uT1738919103432.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.v_xqALTW1738919103432.js";import"./index.7_Uppa3d1738919103432.js";import"./three-stdlib.YzLG7rkK1738919103432.js";import"./@pmndrs.Y-O4vSg11738919103432.js";import"./object-hash.cGPAi-Zt1738919103432.js";import"./@amap.iZVXeXss1738919103432.js";import"./jszip.yUwr59ji1738919103432.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.1tI5NGFj1738919103432.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.A1tPdDnd1738919103432.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.UpXxe6aB1738919103432.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Omkg9vD61738919103432.js";const M=A;!function(t,i){const s=A,n=C();for(;;)try{if(887347===-parseInt(s(384))/1*(parseInt(s(496))/2)+-parseInt(s(489))/3+parseInt(s(490))/4+parseInt(s(419))/5*(parseInt(s(368))/6)+parseInt(s(382))/7*(parseInt(s(383))/8)+-parseInt(s(438))/9+parseInt(s(455))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(354)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=A,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(498),"i"),n=j(t(503));i.test(n+t(416))&&s[t(352)](n+t(380))?j():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(t,i){const s=C();return(A=function(t,i){return s[t-=341]})(t,i)}function C(){const t=["birthTime","ramification","setIndex","visible","init","currentSegmentIndex","pos1","bind","constructor","straightness","RAY_STEADY","linPos0","updateMesh","prototype","radius1","up0","seedGenerator","vPos","pow","console","push","subrays","isEternal","simplexY","test","cross1","apply","trace","randomGenerator","min","action","positionAttribute","isStatic","lerp","timeFraction","deathTime","isLightningStrike","subrayDutyCycle","currentUVCoordinate","endPropagationTime","6GQwGdQ","subrayPeriod","multiplyScalar","radius1Factor","sourceOffset","timeScale","set","normalize","createRandomGenerator","fraction0","while (true) {}","maxSubrays","input","sin","2030oEueoo","7456yqZnir","119359RrvsXS","time","side","fraction1","crossVectors","call","setAttribute","floor","currentSegmentCallback","needsUpdate","copy","RAY_INITIALIZED","recursion","RAY_PROPAGATING","fillMesh","currentSeed","COS30DEG","linPos1","isInitialSegment","string","max","initSubray","warn","vertices","add","recursionProbability","subrayProbability","fractalRay",'{}.constructor("return this")( )',"createTriangleVerticesWithUVs","createPrismFaces","info","chain","length","pos0","7578800dyRSsV","subVectors","uvs","uvsAttribute","generateUVs","table","vanishingTimeFactor","createSegment","gger","positionVariationFactor","update","index","onSubrayCreation","indices","up1","RAY_UNBORN","state","createSubray","log","5191443MPWtdy","middleLinPos","exception","currentVertex","radius0","currentCreateTriangleVertices","maxSubrayRecursion","createDefaultSubrayCreationCallbacks","createTriangleVerticesWithoutUVs","seed","subrayCylinderPosition","currentCoordinate","forwards","cos","propagationTimeFactor","maxIterations","iteration","4228280leUWOt","destOffset","down","middlePos","getNewSegment","debu","radius0Factor","array","numSubrays","createPrism","setSeed","__proto__","copyParameters","LightningStrike","error","lerpVectors","raySegments","noiseSeed","usage","addNewSubray","random","forwardsFill","sub","fractalRayRecursive","type","roughness","minRadius","drawRange","stateObject","toString","currentSubray","onDecideSubrayCreation","RAY_VANISHING","SIN30DEG","4017360HCmAVG","3332576hhBmDQ","RAY_EXTINGUISHED","beginVanishingTime","simplexX","rayParameters","currentIndex","4fokznc","newPos","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(C=function(){return t})()}R(void 0,(function(){const t=A;let i;try{i=Function("return (function() "+t(412)+");")()}catch(e){i=window}const s=i[t(347)]=i[t(347)]||{},n=[t(437),t(406),t(415),t(469),t(440),t(424),t(355)];for(let r=0;r<n[t(417)];r++){const i=R[t(507)][t(341)][t(506)](R),e=n[r],o=s[e]||i;i[t(466)]=R[t(506)](R),i[t(484)]=o[t(484)][t(506)](o),s[e]=i}}))();class F extends i{constructor(t={}){const i=A;super(),this[i(364)]=!0,this[i(479)]=i(468),this[i(503)](F[i(467)](t,t)),this.createMesh()}static[M(376)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(348)](Math[t(475)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(399)]=(n[e(399)]+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){const e=t;n[e(399)]=Math[e(391)](s*i)%i}};return n}static[M(467)](t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t[n(372)]=void 0!==i[n(372)]?e(i[n(372)]):new s(0,100,0),t[n(456)]=void 0!==i[n(456)]?e(i[n(456)]):new s(0,0,0),t[n(373)]=void 0!==i[n(373)]?i[n(373)]:1,t[n(480)]=void 0!==i.roughness?i[n(480)]:.9,t.straightness=void 0!==i.straightness?i.straightness:.7,t.up0=void 0!==i[n(343)]?e(i[n(343)]):new s(0,0,1),t[n(433)]=void 0!==i[n(433)]?e(i[n(433)]):new s(0,0,1),t.radius0=void 0!==i[n(442)]?i[n(442)]:1,t[n(342)]=void 0!==i[n(342)]?i[n(342)]:1,t.radius0Factor=void 0!==i[n(461)]?i[n(461)]:.5,t[n(371)]=void 0!==i[n(371)]?i[n(371)]:.2,t[n(481)]=void 0!==i[n(481)]?i[n(481)]:.2,t[n(350)]=void 0!==i.isEternal?i[n(350)]:void 0===i[n(499)]||void 0===i[n(363)],t[n(499)]=i[n(499)],t[n(363)]=i.deathTime,t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i[n(452)]:.1,t.vanishingTimeFactor=void 0!==i[n(425)]?i[n(425)]:.9,t.subrayPeriod=void 0!==i[n(369)]?i[n(369)]:4,t[n(365)]=void 0!==i[n(365)]?i[n(365)]:.6,t.maxIterations=void 0!==i[n(453)]?i[n(453)]:9,t[n(360)]=void 0!==i[n(360)]&&i[n(360)],t.ramification=void 0!==i[n(500)]?i[n(500)]:5,t.maxSubrayRecursion=void 0!==i[n(444)]?i[n(444)]:3,t[n(409)]=void 0!==i[n(409)]?i[n(409)]:.6,t[n(423)]=void 0!==i[n(423)]&&i[n(423)],t[n(356)]=i[n(356)],t[n(472)]=i.noiseSeed,t[n(486)]=i[n(486)],t.onSubrayCreation=i[n(431)],t}[M(429)](t){const i=M;this.isStatic||(this[i(494)].isEternal||this.rayParameters[i(499)]<=t&&t<=this[i(494)].deathTime?(this[i(511)](t),t<this[i(349)][0].endPropagationTime?this.state=F[i(397)]:t>this[i(349)][0][i(492)]?this.state=F[i(487)]:this[i(435)]=F.RAY_STEADY,this.visible=!0):(this[i(502)]=!1,t<this[i(494)].birthTime?this.state=F[i(434)]:this[i(435)]=F.RAY_EXTINGUISHED))}init(t){const i=M;this[i(494)]=t,this[i(453)]=void 0!==t[i(453)]?Math[i(391)](t.maxIterations):9,t[i(453)]=this.maxIterations,this.isStatic=void 0!==t[i(360)]&&t[i(360)],t[i(360)]=this[i(360)],this[i(500)]=void 0!==t.ramification?Math[i(391)](t[i(500)]):5,t[i(500)]=this[i(500)],this.maxSubrayRecursion=void 0!==t.maxSubrayRecursion?Math[i(391)](t[i(444)]):3,t[i(444)]=this[i(444)],this[i(409)]=void 0!==t[i(409)]?t[i(409)]:.6,t[i(409)]=this.recursionProbability,this[i(423)]=void 0!==t[i(423)]&&t[i(423)],t[i(423)]=this[i(423)],void 0!==t[i(356)]?(this[i(356)]=t.randomGenerator,this[i(344)]=t[i(356)],void 0!==t[i(472)]&&this[i(344)].setSeed(t[i(472)])):(this[i(356)]=F.createRandomGenerator(),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this[i(486)]=t[i(486)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(431)]&&(this[i(431)]=t[i(431)])),this[i(435)]=F[i(395)],this[i(379)]=Math.ceil(1+Math[i(346)](this[i(500)],Math[i(404)](0,this.maxSubrayRecursion-1))),t[i(379)]=this.maxSubrays,this.maxRaySegments=2*(1<<this[i(453)]),this[i(349)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(349)][i(348)](this[i(436)]());this[i(471)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(471)][i(348)](this[i(426)]());this[i(385)]=0,this[i(362)]=0,this[i(392)]=null,this[i(443)]=this.generateUVs?this[i(413)]:this[i(446)],this.numSubrays=0,this[i(485)]=null,this[i(504)]=0,this[i(402)]=!1,this[i(410)]=0,this[i(441)]=0,this.currentIndex=0,this[i(449)]=0,this[i(366)]=0,this[i(407)]=null,this[i(421)]=null,this.indices=null,this[i(359)]=null,this[i(422)]=null,this.simplexX=m(this[i(344)][i(475)]),this[i(351)]=m(this[i(344)][i(475)]),this.simplexZ=m(this[i(344)].random),this.forwards=new s,this[i(476)]=new s,this.side=new s,this[i(457)]=new s,this[i(458)]=new s,this.middleLinPos=new s,this[i(497)]=new s,this[i(345)]=new s,this[i(353)]=new s}createMesh(){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(379)],o=18*i*this[t(379)];this[t(407)]=new Float32Array(3*s),this[t(432)]=new Uint32Array(o),this[t(423)]&&(this[t(421)]=new Float32Array(2*s)),this[t(398)](0),this[t(501)](new n(this.indices,1)),this.positionAttribute=new e(this.vertices,3),this[t(390)]("position",this[t(359)]),this[t(423)]&&(this[t(422)]=new e(new Float32Array(this[t(421)]),2),this[t(390)]("uv",this.uvsAttribute)),!this.isStatic&&(this[t(430)].usage=r,this.positionAttribute[t(473)]=r,this[t(423)]&&(this[t(422)].usage=r)),this[t(407)]=this[t(359)].array,this.indices=this[t(430)][t(462)],this[t(423)]&&(this[t(421)]=this[t(422)][t(462)])}[M(511)](t){const i=M;this.fillMesh(t),this[i(482)].count=this[i(495)],this[i(430)][i(393)]=!0,this.positionAttribute[i(393)]=!0,this.generateUVs&&(this[i(422)].needsUpdate=!0)}fillMesh(t){const i=M,s=this;this[i(441)]=0,this[i(495)]=0,this[i(449)]=0,this.currentUVCoordinate=0,this[i(411)](t,(function(n){const e=i,r=s[e(485)];t<r.birthTime||(this.rayParameters[e(350)]&&0==s[e(485)][e(396)]?(s[e(464)](n),s[e(486)](n,s)):t<r[e(367)]?s[e(362)]>=n[e(377)]*r[e(452)]&&(s[e(464)](n),s[e(486)](n,s)):t<r[e(492)]?(s.createPrism(n),s[e(486)](n,s)):(s.timeFraction<=r.vanishingTimeFactor+n[e(387)]*(1-r.vanishingTimeFactor)&&s[e(464)](n),s[e(486)](n,s)))}))}[M(474)](){const t=M;return this[t(349)][this[t(463)]++]}[M(405)](t,i){const s=M;t.pos0[s(394)](i[s(372)]),t[s(505)][s(394)](i[s(456)]),t[s(343)][s(394)](i[s(343)]),t.up1.copy(i[s(433)]),t[s(442)]=i[s(442)],t[s(342)]=i.radius1,t[s(499)]=i[s(499)],t[s(363)]=i.deathTime,t[s(373)]=i[s(373)],t[s(480)]=i[s(480)],t[s(508)]=i[s(508)],t.propagationTimeFactor=i[s(452)],t[s(425)]=i[s(425)],t[s(453)]=this[s(453)],t[s(447)]=void 0!==i[s(472)]?i[s(472)]:0,t[s(396)]=0}[M(411)](t,i){const s=M;this[s(385)]=t,this[s(392)]=i,this.numSubrays=0,this[s(405)](this[s(474)](),this.rayParameters);for(let n=0;n<this[s(463)];n++){const i=this[s(349)][n];this.currentSubray=i,this[s(356)][s(465)](i[s(447)]),i[s(367)]=o.lerp(i[s(499)],i[s(363)],i[s(452)]),i[s(492)]=o[s(361)](i[s(363)],i[s(499)],1-i[s(425)]);const e=this[s(356)].random;i[s(510)][s(374)](e(),e(),e())[s(370)](1e3),i[s(401)][s(374)](e(),e(),e())[s(370)](1e3),this[s(362)]=(t-i.birthTime)/(i[s(363)]-i.birthTime),this[s(504)]=0,this[s(402)]=!0;const r=this.getNewSegment();r[s(454)]=0,r.pos0[s(394)](i[s(418)]),r[s(505)][s(394)](i[s(505)]),r[s(510)].copy(i.linPos0),r[s(401)][s(394)](i[s(401)]),r[s(343)][s(394)](i[s(343)]),r[s(433)][s(394)](i[s(433)]),r[s(442)]=i[s(442)],r[s(342)]=i[s(342)],r[s(377)]=0,r[s(387)]=1,r.positionVariationFactor=1-i.straightness,this[s(410)]=this[s(500)]*Math[s(346)](this[s(409)],i[s(396)])/(1<<i.maxIterations),this[s(478)](r)}this.currentSegmentCallback=null,this[s(485)]=null}[M(478)](t){const i=M;if(t[i(454)]>=this[i(485)][i(453)])return void this[i(392)](t);this[i(450)].subVectors(t[i(505)],t[i(418)]);let s=this.forwards[i(417)]();s<1e-6&&(this[i(450)][i(374)](0,0,.01),s=this[i(450)][i(417)]());const n=.5*(t[i(442)]+t[i(342)]),e=.5*(t.fraction0+t[i(387)]),r=this[i(385)]*this[i(485)][i(373)]*Math[i(346)](2,t[i(454)]);this.middlePos[i(470)](t[i(418)],t[i(505)],.5),this[i(439)][i(470)](t[i(510)],t[i(401)],.5);const o=this[i(439)];this.newPos.set(this[i(493)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(497)][i(370)](t[i(428)]*s),this[i(497)][i(408)](this[i(458)]);const a=this[i(459)]();a[i(418)][i(394)](t.pos0),a.pos1[i(394)](this.newPos),a.linPos0[i(394)](t[i(510)]),a[i(401)][i(394)](this[i(439)]),a[i(343)][i(394)](t.up0),a[i(433)][i(394)](t[i(433)]),a[i(442)]=t[i(442)],a[i(342)]=n,a[i(377)]=t[i(377)],a.fraction1=e,a.positionVariationFactor=t[i(428)]*this[i(485)].roughness,a[i(454)]=t[i(454)]+1;const h=this[i(459)]();h.pos0[i(394)](this[i(497)]),h.pos1.copy(t[i(505)]),h.linPos0[i(394)](this[i(439)]),h.linPos1[i(394)](t[i(401)]),this[i(353)][i(388)](t[i(343)],this.forwards[i(375)]()),h[i(343)][i(388)](this[i(450)],this[i(353)])[i(375)](),h.up1[i(394)](t.up1),h.radius0=n,h[i(342)]=t[i(342)],h[i(377)]=e,h[i(387)]=t.fraction1,h[i(428)]=t.positionVariationFactor*this[i(485)][i(480)],h[i(454)]=t[i(454)]+1,this.fractalRayRecursive(a),this[i(478)](h)}[M(464)](t){const i=M;this[i(476)][i(420)](t.pos1,t[i(418)]).normalize(),this[i(402)]&&(this[i(443)](t.pos0,t[i(343)],this[i(476)],t[i(442)],0),this[i(402)]=!1),this[i(443)](t[i(505)],t[i(343)],this[i(476)],t[i(342)],t[i(387)]),this.createPrismFaces()}[M(446)](t,i,s,n){const e=M;this[e(386)][e(388)](i,s)[e(370)](n*F.COS30DEG),this[e(457)][e(394)](i)[e(370)](-n*F[e(488)]);const r=this.vPos,o=this.vertices;r.copy(t)[e(477)](this.side)[e(408)](this[e(457)]),o[this.currentCoordinate++]=r.x,o[this[e(449)]++]=r.y,o[this[e(449)]++]=r.z,r.copy(t).add(this[e(386)])[e(408)](this[e(457)]),o[this[e(449)]++]=r.x,o[this[e(449)]++]=r.y,o[this[e(449)]++]=r.z,r[e(394)](i)[e(370)](n)[e(408)](t),o[this[e(449)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,this.currentVertex+=3}[M(413)](t,i,s,n,e){const r=M;this[r(386)][r(388)](i,s)[r(370)](n*F.COS30DEG),this[r(457)][r(394)](i)[r(370)](-n*F.SIN30DEG);const o=this[r(345)],a=this[r(407)],h=this[r(421)];o[r(394)](t)[r(477)](this[r(386)]).add(this[r(457)]),a[this.currentCoordinate++]=o.x,a[this[r(449)]++]=o.y,a[this[r(449)]++]=o.z,h[this[r(366)]++]=e,h[this[r(366)]++]=0,o.copy(t)[r(408)](this[r(386)])[r(408)](this.down),a[this.currentCoordinate++]=o.x,a[this[r(449)]++]=o.y,a[this[r(449)]++]=o.z,h[this[r(366)]++]=e,h[this.currentUVCoordinate++]=.5,o.copy(i)[r(370)](n).add(t),a[this[r(449)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(449)]++]=o.z,h[this[r(366)]++]=e,h[this.currentUVCoordinate++]=1,this[r(441)]+=3}[M(414)](t){const i=M,s=this.indices;t=this[i(441)]-6,s[this[i(495)]++]=t+1,s[this[i(495)]++]=t+2,s[this[i(495)]++]=t+5,s[this[i(495)]++]=t+1,s[this[i(495)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(495)]++]=t+0,s[this[i(495)]++]=t+1,s[this.currentIndex++]=t+4,s[this[i(495)]++]=t+0,s[this[i(495)]++]=t+4,s[this[i(495)]++]=t+3,s[this[i(495)]++]=t+2,s[this[i(495)]++]=t+0,s[this[i(495)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+3,s[this[i(495)]++]=t+5}[M(445)](){const t=M,i=this.randomGenerator[t(475)];this[t(486)]=function(s,n){const e=t,r=n[e(485)],a=n[e(494)][e(369)],h=n[e(494)][e(365)],c=n[e(494)][e(350)]&&0==r[e(396)]?-i()*a:o[e(361)](r[e(499)],r[e(367)],s.fraction0)-i()*a,u=n[e(385)]-c,l=Math[e(391)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r.recursion<n[e(444)]&&n[e(463)]<n[e(379)]&&i()<d){const t=n.addNewSubray(),o=n[e(356)].getSeed();t[e(447)]=p,n[e(356)][e(465)](p),t[e(396)]=r[e(396)]+1,t[e(453)]=Math[e(404)](1,r[e(453)]-1),t[e(510)].set(i(),i(),i())[e(370)](1e3),t[e(401)][e(374)](i(),i(),i()).multiplyScalar(1e3),t.up0[e(394)](r[e(343)]),t[e(433)][e(394)](r[e(433)]),t.radius0=s[e(442)]*n[e(494)][e(461)],t[e(342)]=Math[e(357)](n[e(494)].minRadius,s[e(342)]*n[e(494)][e(371)]),t[e(499)]=c+l*a,t.deathTime=t[e(499)]+a*h,!n[e(494)][e(350)]&&0==r[e(396)]&&(t[e(499)]=Math[e(404)](t.birthTime,r.birthTime),t.deathTime=Math[e(357)](t[e(363)],r.deathTime)),t[e(373)]=2*r.timeScale,t[e(480)]=r[e(480)],t[e(508)]=r.straightness,t.propagationTimeFactor=r[e(452)],t[e(425)]=r.vanishingTimeFactor,n[e(431)](s,r,t,n),n.randomGenerator[e(465)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(431)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const p=t;h[p(418)][p(394)](s[p(418)]),n[p(420)](o[p(505)],o[p(418)]),e[p(394)](n)[p(375)](),n.multiplyScalar(s.fraction0+(1-s[p(377)])*(i()*c));const d=n[p(417)]();r[p(388)](o.up0,e);const m=2*Math.PI*i();r[p(370)](Math.cos(m)),a[p(394)](o[p(343)]).multiplyScalar(Math.sin(m)),h[p(505)][p(394)](r)[p(408)](a)[p(370)](d*u*(l+i()*(1-l))).add(n)[p(408)](o[p(418)])},this[t(448)]=function(s,o,h,c,u,l){const p=t;h[p(418)].copy(s.pos0),n[p(420)](o[p(505)],o.pos0),e[p(394)](n)[p(375)](),n[p(370)](s[p(377)]+(1-s[p(377)])*((2*i()-1)*c));const d=n.length();r[p(388)](o[p(343)],e);const m=2*Math.PI*i();r[p(370)](Math.cos(m)),a[p(394)](o[p(343)])[p(370)](Math[p(381)](m)),h.pos1[p(394)](r)[p(408)](a).multiplyScalar(d*u*(l+i()*(1-l))).add(n)[p(408)](o[p(418)])}}[M(436)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(426)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(471)][this[t(504)]++]}[M(394)](t){const i=M;return super[i(394)](t),this[i(503)](F[i(467)]({},t[i(494)])),this}clone(){const t=M;return new(this[t(507)])(F[t(467)]({},this[t(494)]))}}function j(t){function i(t){const s=A;if(typeof t===s(403))return function(t){}.constructor(s(378))[s(354)]("counter");1!==(""+t/t)[s(417)]||t%20==0?function(){return!0}[s(507)](s(460)+s(427))[s(389)](s(358)):function(){return!1}[s(507)](s(460)+s(427)).apply(s(483)),i(++t)}try{if(t)return i;i(0)}catch(s){}}F.RAY_INITIALIZED=0,F[M(434)]=1,F.RAY_PROPAGATING=2,F[M(509)]=3,F[M(487)]=4,F[M(491)]=5,F[M(400)]=Math[M(451)](30*Math.PI/180),F[M(488)]=Math[M(381)](30*Math.PI/180);const D=G;!function(t,i){const s=G,n=E();for(;;)try{if(906159===parseInt(s(133))/1*(-parseInt(s(123))/2)+-parseInt(s(171))/3+parseInt(s(129))/4+-parseInt(s(155))/5*(parseInt(s(126))/6)+parseInt(s(139))/7*(parseInt(s(174))/8)+parseInt(s(111))/9+-parseInt(s(146))/10*(parseInt(s(147))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(179)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function G(t,i){const s=E();return(G=function(t,i){return s[t-=108]})(t,i)}!function(){z(this,(function(){const t=G,i=new RegExp(t(160)),s=new RegExp(t(120),"i"),n=L(t(175));i[t(117)](n+t(152))&&s[t(117)](n+t(178))?L():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(){const t=["3635961nsueRq","onRayPosition","gger","lightningMaterial","inited","push","onLightningDown","830loOvbc","164659fuGiPp","lightningMaxDuration","debu","lightningParameters","toString","chain","copy","size","7750805tbwzfc","error","add","sourceOffset","deadLightningsMeshes","function *\\( *\\)","while (true) {}","geometry","lightningsMeshes","lightningMaxPeriod","isEternal","__proto__","getNextLightningTime","table","copyParameters","length","166638yalPhx","set","rayParameters","24eFfBib","init","stormParams","maxLightnings","input","apply","isLightningStorm","warn","destOffset","call","bind","trace","9652545WeicEZ","state","return (function() ","counter","minHeight","RAY_EXTINGUISHED","test","lightningMinDuration","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","maxHeight","stateObject","3982PvsWPu","clone","maxSlope","6iWMgrw","constructor","RAY_PROPAGATING","4581680ekYWtd","lightningMinPeriod","random","action","11PhCwxr","lerp","splice","noiseSeed","indexOf","nextLightningTime"];return(E=function(){return t})()}V(void 0,(function(){const t=G,i=function(){const t=G;let i;try{i=Function(t(113)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=["log",t(181),"info",t(156),"exception",t(168),t(110)];for(let e=0;e<n.length;e++){const i=V[t(127)][t(119)].bind(V),r=n[e],o=s[r]||i;i[t(166)]=V[t(109)](V),i[t(151)]=o[t(151)].bind(o),s[r]=i}}))();class H extends a{constructor(t={}){const i=G;super(),this[i(180)]=!0,this.stormParams=t,t.size=void 0!==t.size?t.size:1e3,t[i(115)]=void 0!==t[i(115)]?t[i(115)]:80,t[i(121)]=void 0!==t[i(121)]?t.maxHeight:100,t.maxSlope=void 0!==t[i(125)]?t[i(125)]:1.1,t[i(177)]=void 0!==t[i(177)]?t.maxLightnings:3,t[i(130)]=void 0!==t[i(130)]?t[i(130)]:3,t[i(164)]=void 0!==t.lightningMaxPeriod?t[i(164)]:7,t[i(118)]=void 0!==t[i(118)]?t[i(118)]:1,t[i(148)]=void 0!==t[i(148)]?t[i(148)]:2.5,this.lightningParameters=F[i(169)](t[i(150)],t.lightningParameters),this[i(150)][i(165)]=!1,this[i(142)]=void 0!==t.lightningMaterial?t[i(142)]:new h({color:11599871}),void 0!==t.onRayPosition?this.onRayPosition=t[i(140)]:this[i(140)]=function(s,n){const e=i;n[e(172)]((Math[e(131)]()-.5)*t[e(154)],0,(Math[e(131)]()-.5)*t[e(154)]);const r=o[e(134)](t.minHeight,t[e(121)],Math.random());s[e(172)](t[e(125)]*(2*Math[e(131)]()-1),1,t[e(125)]*(2*Math[e(131)]()-1)).multiplyScalar(r)[e(157)](n)},this.onLightningDown=t[i(145)],this[i(143)]=!1,this[i(138)]=0,this[i(163)]=[],this[i(159)]=[];for(let s=0;s<this[i(176)][i(177)];s++){const t=new F(F.copyParameters({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this.deadLightningsMeshes[i(144)](s)}}update(t){const i=G;if(!this[i(143)]&&(this.nextLightningTime=this[i(167)](t)*Math[i(131)](),this[i(143)]=!0),t>=this.nextLightningTime){const s=this[i(159)].pop();if(s){const n=F[i(169)](s.geometry[i(173)],this[i(150)]);n.birthTime=t,n.deathTime=t+o[i(134)](this[i(176)][i(118)],this.stormParams[i(148)],Math.random()),this[i(140)](n[i(158)],n[i(182)]),n[i(136)]=Math[i(131)](),this[i(157)](s),this[i(163)][i(144)](s)}this[i(138)]=this[i(167)](t)}let s=0,n=this[i(163)][i(170)];for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(162)],o=r[i(112)];r.update(t),o===F[i(128)]&&r[i(112)]>o&&this.onLightningDown&&this[i(145)](r),r[i(112)]===F[i(116)]?(this.lightningsMeshes[i(135)](this[i(163)][i(137)](e),1),this[i(159)][i(144)](e),this.remove(e),n--):s++}}[D(167)](t){const i=D;return t+o[i(134)](this[i(176)].lightningMinPeriod,this[i(176)][i(164)],Math[i(131)]())/(this[i(176)][i(177)]+1)}[D(153)](t,i){const s=D;return super[s(153)](t,i),this[s(176)][s(154)]=t[s(176)][s(154)],this[s(176)][s(115)]=t[s(176)].minHeight,this[s(176)][s(121)]=t.stormParams[s(121)],this.stormParams[s(125)]=t.stormParams.maxSlope,this.stormParams[s(177)]=t[s(176)][s(177)],this.stormParams[s(130)]=t[s(176)][s(130)],this[s(176)].lightningMaxPeriod=t.stormParams[s(164)],this[s(176)][s(118)]=t[s(176)][s(118)],this.stormParams[s(148)]=t[s(176)][s(148)],this[s(150)]=F.copyParameters({},t[s(150)]),this.lightningMaterial=t[s(176)][s(142)],this[s(145)]=t[s(145)],this}[D(124)](){const t=D;return new this.constructor(this.stormParams)[t(153)](this)}}function L(t){function i(t){const s=G;if("string"==typeof t)return function(t){}[s(127)](s(161)).apply(s(114));1!==(""+t/t)[s(170)]||t%20==0?function(){return!0}[s(127)](s(149)+s(141))[s(108)](s(132)):function(){return!1}[s(127)](s(149)+"gger")[s(179)](s(122)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=O;function O(t,i){const s=k();return(O=function(t,i){return s[t-=376]})(t,i)}!function(t,i){const s=O,n=k();for(;;)try{if(272731===parseInt(s(424))/1*(-parseInt(s(396))/2)+-parseInt(s(395))/3+parseInt(s(428))/4+-parseInt(s(397))/5*(-parseInt(s(403))/6)+-parseInt(s(427))/7+parseInt(s(418))/8+parseInt(s(385))/9*(-parseInt(s(387))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Y(this,(function(){const t=O,i=new RegExp(t(437)),s=new RegExp(t(383),"i"),n=X(t(430));i[t(384)](n+t(401))&&s[t(384)](n+t(379))?X():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(412)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=O;let i;try{i=Function(t(393)+t(399)+");")()}catch(e){i=window}const s=i[t(433)]=i[t(433)]||{},n=["log",t(426),t(432),"error",t(438),t(386),t(417)];for(let r=0;r<n[t(382)];r++){const i=U.constructor[t(400)][t(398)](U),e=n[r],o=s[e]||i;i[t(408)]=U[t(398)](U),i[t(390)]=o.toString[t(398)](o),s[e]=i}}))();const Z=[N(406)];function k(){const t=["2959730sTQkLI","update","addVectors","toString","pos1","minHeight","return (function() ","subrayDutyCycle","512256meGlKW","438272mFzjLe","35bDWNcM","bind",'{}.constructor("return this")( )',"prototype","chain","color","334170jAGuyj","string","radius1","object","roughness","__proto__","MeshBasicMaterial","subVectors","rayParameters","apply","while (true) {}","timeScale","primitive","#b0ffff","trace","2036240jAqXTo","constructor","stormParams","Vector3","lightStorm","sub","1kKZwZv","debu","warn","1432844TsYTJu","2075556fGVZIX","gger","init","size","info","console","maxHeight","radius0","multiplyScalar","function *\\( *\\)","exception","straightness","sourceOffset","Color","input","copy","counter","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","9zYcwMm","table"];return(k=function(){return t})()}const W=f({__name:N(422),props:{color:{default:N(416)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,n=t,e=new(u[i(378)])(n.color),r=new(u[i(409)])({color:e}),o=new(u[i(421)])(0,-1,0);let a=0;const h=new s,c=new(u[i(421)]),p={roughness:n.roughness,straightness:n.straightness,radius0:n[i(435)],radius1:n[i(405)],timeScale:n[i(414)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(394)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(411)][r(377)].y,h[r(410)](n[r(391)],e.rayParameters[r(377)]);const u=o.dot(h);c[r(380)](o)[r(436)](u),h[r(423)](c);const l=u/a>.5?a/u:1;c[r(436)](l),h.add(c),n[r(391)][r(389)](h,e.rayParameters.sourceOffset)}},d=new H({size:n[i(431)],minHeight:n.minHeight,maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(420)];s[t(431)]=n[t(431)],s[t(392)]=n.minHeight,s[t(434)]=n[t(434)],r[t(402)].set(n[t(402)]),p[t(407)]=n.roughness,p[t(376)]=n[t(376)],p[t(435)]=n[t(435)],p[t(405)]=n[t(405)],p[t(414)]=n[t(414)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(388)](t)})),(t,s)=>{const n=i;return y(),b(n(415),{object:v(d),renderOrder:9999},null,8,Z)}}});function X(t){function i(t){const s=O;if(typeof t===s(404))return function(t){}[s(419)](s(413))[s(412)](s(381));1!==(""+t/t)[s(382)]||t%20==0?function(){return!0}[s(419)](s(425)+"gger").call("action"):function(){return!1}.constructor("debu"+s(429))[s(412)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=K;!function(t,i){const s=K,n=q();for(;;)try{if(717400===parseInt(s(275))/1+parseInt(s(283))/2*(-parseInt(s(268))/3)+-parseInt(s(254))/4*(-parseInt(s(248))/5)+parseInt(s(241))/6+-parseInt(s(247))/7*(-parseInt(s(240))/8)+-parseInt(s(267))/9+parseInt(s(265))/10*(parseInt(s(257))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(266)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){B(this,(function(){const t=K,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(282),"i"),n=tt(t(276));i[t(249)](n+t(286))&&s[t(249)](n+t(239))?tt():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(266)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=q();return(K=function(t,i){return s[t-=234]})(t,i)}Q(void 0,(function(){const t=K;let i;try{i=Function(t(277)+t(242)+");")()}catch(e){i=window}const s=i[t(285)]=i[t(285)]||{},n=[t(262),t(261),t(236),t(281),t(246),t(274),"trace"];for(let r=0;r<n[t(238)];r++){const i=Q.constructor[t(244)][t(235)](Q),e=n[r],o=s[e]||i;i[t(279)]=Q[t(235)](Q),i[t(269)]=o[t(269)].bind(o),s[e]=i}}))();const J=f({__name:$(245),setup(i){const s=$,n=x({cellSize:60,cellThickness:1,cellColor:s(263),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(284),roughness:{label:s(253),value:.85,min:0,max:1,step:.01},straightness:{label:s(264),value:.65,min:0,max:1,step:.01},radius0:{label:s(278),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(W,{minHeight:v(e)[m(256)],maxHeight:v(r)[m(256)],color:v(o)[m(256)],roughness:v(a).value,straightness:v(h)[m(256)],radius0:v(c)[m(256)],radius1:v(u)[m(256)],timeScale:v(l)[m(256)]},null,8,["minHeight",m(259),m(272),m(255),m(234),m(258),m(260),m(237)]),S(v(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(v(d))],64)}}});function q(){const t=["6zpiDQI","toString","debu","stateObject","color","action","table","3989phATeA","init","return (function() ","端部半径","__proto__","constructor","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","783714FkxCEi","#ffbde7","console","chain","straightness","bind","info","timeScale","length","input","204168tDxPvm","524370ToDZZn",'{}.constructor("return this")( )',"counter","prototype","lightningStorm","exception","329eWmrvt","100515ansDFz","test","string","call","while (true) {}","粗糙度","44JYMSnR","roughness","value","11Sxxbde","radius0","maxHeight","radius1","warn","log","#6f6f6f","直度度","13831810YcJKVC","apply","12546639EbFDeG"];return(q=function(){return t})()}function tt(t){function i(t){const s=K;if(typeof t===s(250))return function(t){}.constructor(s(252))[s(266)](s(243));1!==(""+t/t).length||t%20==0?function(){return!0}[s(280)](s(270)+"gger")[s(251)](s(273)):function(){return!1}[s(280)](s(270)+"gger")[s(266)](s(271)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

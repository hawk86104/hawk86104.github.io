var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as w,c2 as S,c3 as M,K as R,f as E,V as A,g as T,_ as D,m as P,bm as z,k as C,bz as O,d as F,aj as B,B as k,a as j,aP as U,e as N,M as L,at as H,a9 as Z,U as G}from"./three.874nNzAX1726273176332.js";import{p as W,N as V,U as $}from"./@tresjs.BFyWuCYn1726273176332.js";import{R as X}from"./three-stdlib.OiSmdEWB1726273176332.js";import{x as q,b as Y,w as J,a as K,u as Q,d as nn,V as tn,a4 as en,a0 as rn,o as on,E as an,H as cn,J as sn,a7 as un,a3 as ln,q as fn,f as pn,L as dn,a8 as hn,r as vn,N as mn,Y as gn,t as _n,F as yn,a6 as xn,m as bn}from"./@vue.JNsx1iN61726273176332.js";import{M as In,a as wn,C as Sn}from"./@pmndrs.4EygttyV1726273176332.js";import{o as Mn}from"./object-hash.POLi8wZH1726273176332.js";var Rn=Dn;!function(n,t){for(var e=Dn,r=Tn();;)try{if(482710===-parseInt(e(412))/1+parseInt(e(418))/2*(-parseInt(e(410))/3)+parseInt(e(415))/4*(parseInt(e(439))/5)+parseInt(e(408))/6*(-parseInt(e(419))/7)+-parseInt(e(416))/8*(-parseInt(e(420))/9)+-parseInt(e(425))/10*(parseInt(e(397))/11)+parseInt(e(422))/12*(parseInt(e(421))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){En(this,(function(){var n=Dn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(409),"i"),r=Cn(n(394));t[n(404)](r+n(427))&&e[n(404)](r+n(399))?Cn():r("0")}))()}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(){var n=["136549ZLXnsS","18msUdPF","1123252ChbsNg","60rUsUPv","exception",'{}.constructor("return this")( )',"6480ZdMFPu","error","chain","gger","action","dispose","call","prototype","counter","destructor","stateObject","trace","console","return (function() ","1635055hYdfxX","material","init","add","geometry","1111kHXqaE","virtualScene","input","traverse","apply","table","debu","test","length","info","string","102XWYPiS","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6ENGQez","bind","278162FlSxpO","toString","map","4bVIUmm","2575568sjFkLv","constructor","244984pViSoQ"];return(Tn=function(){return n})()}function Dn(n,t){var e=Tn();return(Dn=function(n,t){return e[n-=393]})(n,t)}An(void 0,(function(){var n,t=Dn;try{n=Function(t(438)+t(424)+");")()}catch(s){n=window}for(var e=n[t(437)]=n[t(437)]||{},r=["log","warn",t(406),t(426),t(423),t(402),t(436)],o=0;o<r[t(405)];o++){var i=An[t(417)][t(432)][t(411)](An),a=r[o],c=e[a]||i;i.__proto__=An.bind(An),i[t(413)]=c[t(413)][t(411)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=Dn;super(),this[n(398)]=null,this.virtualScene=new u}[Rn(395)](...n){var t=Rn;return this[t(398)][t(395)](...n),this}[Rn(434)](){var n=Rn;this[n(398)][n(400)]((t=>{var e=n;t instanceof l&&(t[e(396)][e(430)](),t[e(393)][e(430)](),t[e(393)][e(414)]&&t[e(393)][e(414)][e(430)](),this[e(398)].remove(t))})),this[n(398)]=null}}const zn=Pn;function Cn(n){function t(n){var e=Dn;if(typeof n===e(407))return function(n){}[e(417)]("while (true) {}")[e(401)](e(433));1!==(""+n/n)[e(405)]||n%20==0?function(){return!0}[e(417)]("debugger")[e(431)](e(429)):function(){return!1}[e(417)](e(403)+e(428))[e(401)](e(435)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=Fn;function Fn(n,t){const e=Un();return(Fn=function(n,t){return e[n-=414]})(n,t)}!function(n,t){const e=Fn,r=Un();for(;;)try{if(351918===parseInt(e(461))/1*(parseInt(e(433))/2)+parseInt(e(421))/3*(-parseInt(e(460))/4)+parseInt(e(454))/5*(-parseInt(e(426))/6)+parseInt(e(451))/7*(parseInt(e(455))/8)+-parseInt(e(439))/9*(parseInt(e(436))/10)+parseInt(e(440))/11+-parseInt(e(448))/12*(-parseInt(e(452))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(435)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bn(this,(function(){const n=Fn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(442),"i"),r=Nn(n(453));t[n(418)](r+n(430))&&e[n(418)](r+"input")?Nn():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(435)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=Fn,t=function(){const n=Fn;let t;try{t=Function(n(447)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(420)]||{},r=[n(445),n(424),n(444),"error",n(423),n(456),n(427)];for(let o=0;o<r[n(458)];o++){const t=kn.constructor[n(416)].bind(kn),i=r[o],a=e[i]||t;t[n(457)]=kn.bind(kn),t[n(432)]=a[n(432)][n(446)](a),e[i]=t}}))();const jn={sunset:"venice/venice_sunset_1k.hdr",studio:On(434),city:"city/canary_wharf_1k.hdr",umbrellas:On(441),night:On(417),forest:On(443),snow:On(425),dawn:On(414),hangar:On(449),urban:On(459),modern:On(422),shangai:On(428)};function Un(){const n=["debu","toString","35436RfHoyw","studio/poly_haven_studio_1k.hdr","apply","27960RHyLlP","stateObject","constructor","2061lrrKds","734162lGwwgq","outdoor/outdoor_umbrellas_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","outood/mossy_forest_1k.hdr","info","log","bind","return (function() ","12KZRcxO","indoor/small_hangar_01_1k.hdr","call","102571QCFrIz","17051528pkuUKH","init","15wMPqZe","40FzpRNQ","table","__proto__","length","indoor/abandoned_games_room_02_1k.hdr","1304RVBWqw","18GLlqgk","kiara/kiara_1_dawn_1k.hdr","counter","prototype","outdoor/satara_night_1k.hdr","test","gger","console","3792Fhgdaf","city/modern_buildings_2_1k.hdr","exception","warn","outdoor/snowy_forest_path_01_1k.hdr","732642bBZlYT","trace","city/shanghai_bund_1k.hdr","while (true) {}","chain"];return(Un=function(){return n})()}function Nn(n){function t(n){const e=Fn;if("string"==typeof n)return function(n){}[e(438)](e(429))[e(435)](e(415));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(431)+e(419))[e(450)]("action"):function(){return!1}.constructor(e(431)+e(419))[e(435)](e(437)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Hn;function Hn(n,t){const e=Vn();return(Hn=function(n,t){return e[n-=260]})(n,t)}!function(n,t){const e=Hn,r=Vn();for(;;)try{if(851335===parseInt(e(300))/1+-parseInt(e(293))/2*(parseInt(e(271))/3)+parseInt(e(291))/4+-parseInt(e(306))/5*(-parseInt(e(284))/6)+-parseInt(e(276))/7+parseInt(e(283))/8+-parseInt(e(289))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Hn,t=new RegExp(n(290)),e=new RegExp(n(281),"i"),r=$n(n(302));t[n(297)](r+"chain")&&e[n(297)](r+n(279))?$n():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hn(267)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gn(void 0,(function(){const n=Hn,t=function(){const n=Hn;let t;try{t=Function(n(265)+n(263)+");")()}catch(e){t=window}return t}(),e=t[n(305)]=t.console||{},r=[n(288),n(295),n(301),n(277),n(280),n(269),n(268)];for(let o=0;o<r[n(307)];o++){const t=Gn[n(287)].prototype.bind(Gn),i=r[o],a=e[i]||t;t[n(296)]=Gn[n(298)](Gn),t.toString=a[n(285)][n(298)](a),e[i]=t}}))();const Wn=Ln(304);function Vn(){const n=["12PCltbZ","toString","join","constructor","log","1677465djrHyJ","function *\\( *\\)","1496504jNCRaJ","call","83758GNMuGa","gger","warn","__proto__","test","bind","texture","1137818OWbegt","info","init","Preset must be one of: ","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","console","267535YDHcob","length","debu","setPath","action",'{}.constructor("return this")( )',"background","return (function() ","mapping","apply","trace","table","Failed to load environment map: ","60wosXuk","keys","string","isColor","value","4055240VIPjSj","error","environment","input","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","6685296CgiblM"];return(Vn=function(){return n})()}function $n(n){function t(n){const e=Hn;if(typeof n===e(273))return function(n){}.constructor("while (true) {}")[e(267)](e(282));1!==(""+n/n)[e(307)]||n%20==0?function(){return!0}[e(287)](e(260)+e(294))[e(292)](e(262)):function(){return!1}.constructor(e(260)+e(294))[e(267)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xn=Yn;!function(n,t){const e=Yn,r=Kn();for(;;)try{if(214487===-parseInt(e(343))/1+-parseInt(e(351))/2*(parseInt(e(372))/3)+parseInt(e(382))/4+-parseInt(e(359))/5*(parseInt(e(374))/6)+-parseInt(e(356))/7*(parseInt(e(384))/8)+parseInt(e(368))/9*(-parseInt(e(352))/10)+parseInt(e(358))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Kn();return(Yn=function(n,t){return e[n-=343]})(n,t)}!function(){qn(this,(function(){const n=Yn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=nt(n(346));t[n(388)](r+n(380))&&e[n(388)](r+n(370))?nt():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["texture","return (function() ",'{}.constructor("return this")( )',"minFilter","$slots","generateMipmaps","useDefaultScene","length","1953jJtWwe","warn","input","apply","3Glncvh","default","6oomKuQ","value","string","component","resolution","bind","chain","dispose","979816MXcIFs","trace","945608FIMeJh","debu","stateObject","near","test","background","magFilter","info","prototype","table","environment","173879xIJBJt","exception","update","init","console","__proto__","gger","symbol","267448POvjlo","4220jDdUSj","constructor","type","log","21ObKEhO","frames","9760630dHmfbu","820085WkDNVs"];return(Kn=function(){return n})()}Jn(void 0,(function(){const n=Yn;let t;try{t=Function(n(361)+n(362)+");")()}catch(o){t=window}const e=t[n(347)]=t[n(347)]||{},r=[n(355),n(369),n(391),"error",n(344),n(393),n(383)];for(let i=0;i<r[n(367)];i++){const t=Jn[n(353)][n(392)][n(379)](Jn),o=r[i],a=e[o]||t;t[n(348)]=Jn[n(379)](Jn),t.toString=a.toString[n(379)](a),e[o]=t}}))();const Qn=nn({__name:Xn(377),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=Y(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=Y(null),x=null;const b=Y(null);tn((()=>{var n,t;const e=Yn;null==(n=b[e(375)])||n.destructor(),null==(t=y[e(375)])||t[e(381)]()}));const{onBeforeLoop:I}=$();let w=1;I((()=>{const n=Yn;x&&b[n(375)]&&y[n(375)]&&(i[n(357)]===1/0||w<i[n(357)])&&(i.useDefaultScene?x.update(s.value,u.value):x[n(345)](s.value,un(b[n(375)].virtualScene)),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=Y([]),path:s=Y(""),background:u}=q(n);J(n,(()=>{o()}));const l=Y(null),h=K((()=>Array.isArray(c.value))),v=K((()=>h[e(275)]?f:X));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(307)]>0&&!(null==i?void 0:i[r(275)])){try{l[r(275)]=await V(v[r(275)],h[r(275)]?[...Q(n)]:Q(n),(n=>{t&&n[r(261)](Q(t))}))}catch(o){throw new Error(r(270)+o)}l[r(275)]&&(l[r(275)][r(266)]=h[r(275)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(275)]&&n&&(r[t(275)][t(278)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(275)]){let e=(null==t?void 0:t[i(275)])?t.value[i(299)]:o,a=r[i(275)][i(264)];!(null==a?void 0:a[i(274)])&&(a=void 0),r.value.background=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(275)]),(n=>{const t=e;r.value&&n&&(r[t(275)].backgroundBlurriness=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(275)]),(async n=>{const t=e;if(n&&n in jn){const e=Wn,i=jn[n];try{l.value=await V(X,i,(n=>{e&&n[Hn(261)](e)}))}catch(r){throw new Error(t(270)+r)}l[t(275)]&&l.value&&(l[t(275)][t(266)]=d),o()}else if(n&&!(n in jn))throw new Error(t(303)+Object[t(272)](jn)[t(286)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u.value[t(394)]=n[t(360)],i[t(389)]&&(u.value[t(389)]=n[t(360)])):(u[t(375)].environment=S[t(375)],i[t(389)]&&(u[t(375)].background=S.value))};J(S,(n=>{y[Yn(375)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Yn;null==(n=y[t(375)])||n[t(381)](),y.value=new v(i[t(378)]),x=new m(i[t(387)],i.far,y[t(375)]),i[t(366)]?(y.value.texture[t(354)]=g,y[t(375)][t(360)][t(365)]=!1,y[t(375)].texture[t(363)]=_,y[t(375)].texture[t(390)]=_):y.value.texture.type=h,M(y[t(375)])};return J((()=>rn()[e(373)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(375)].texture[o(354)]!==h)&&(l=n(),Array.isArray(l)&&l[o(367)]>0&&typeof(null==(t=l[0])?void 0:t[o(354)])!==o(350))?R():(null==(r=y[o(375)])||r[o(381)](),y[o(375)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(375)]=S,J((()=>i.useDefaultScene),(n=>{y[e(375)]&&R()})),(n,t)=>{const r=e;return Q(y)?(on(),an("TresEnvSence",{key:0,ref_key:"envSence",ref:b},[cn(n[r(364)],"default")],512)):sn("",!0)}}});function nt(n){function t(n){const e=Yn;if(typeof n===e(376))return function(n){}.constructor("while (true) {}").apply("counter");1!==(""+n/n)[e(367)]||n%20==0?function(){return!0}[e(353)](e(385)+e(349)).call("action"):function(){return!1}.constructor("debu"+e(349))[e(371)](e(386)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=rt;function et(){const n=["6869142WXRamw","color","__proto__","call","set","TresMeshBasicMaterial","from","toneMapped","14566365NnNwSN","input","1568308qgyKqF","string","index","error","warn","circle","3124568mwgsOe","value","length","function *\\( *\\)","3oVTRAX","console","TresPlaneGeometry","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","exception","constructor","bind","needsUpdate","TresRingGeometry","rect","chain","apply","766768AnFDLS","8wHLnTs","info","intensity","multiplyScalar","prototype","debu","toString","map","18385690YAzgfz","1506tCGfnW","gger","action","TresMesh","5730MsBnaK"];return(et=function(){return n})()}function rt(n,t){const e=et();return(rt=function(n,t){return e[n-=175]})(n,t)}!function(n,t){const e=rt,r=et();for(;;)try{if(917198===parseInt(e(182))/1+parseInt(e(206))/2*(-parseInt(e(192))/3)+parseInt(e(188))/4+parseInt(e(220))/5*(-parseInt(e(216))/6)+parseInt(e(221))/7*(-parseInt(e(207))/8)+-parseInt(e(180))/9+parseInt(e(215))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=rt,t=new RegExp(n(191)),e=new RegExp(n(196),"i"),r=ft("init");t.test(r+n(204))&&e.test(r+n(181))?ft():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=rt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(193)]=t[n(193)]||{},r=["log",n(186),n(208),n(185),n(198),"table",n(197)];for(let o=0;o<r[n(190)];o++){const t=it[n(199)][n(211)].bind(it),i=r[o],a=e[i]||t;t[n(223)]=it[n(200)](it),t[n(213)]=a.toString[n(200)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[tt(179),tt(214),"side",tt(222)],lt=nn({__name:tt(184),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=Y();return ln((()=>{const n=rt;r[n(189)]&&(r[n(189)].color[n(210)](e[n(209)]),r[n(189)][n(201)]=!0)})),J((()=>e[t(222)]),(n=>{const o=t;r[o(189)]&&(r[o(189)][o(222)][o(176)](n),r[o(189)][o(222)][o(210)](e[o(209)]),r[o(189)].needsUpdate=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(219),null,[e.from===i(187)?(on(),an(i(202),at)):"ring"===e[i(178)]?(on(),an(i(202),ct)):e[i(178)]===i(203)?(on(),an(i(194),st)):(on(),pn(e[i(178)],{key:3,args:e})),dn(i(177),{ref_key:i(195),ref:r,toneMapped:n[i(179)],map:n[i(214)],side:Q(x),color:n[i(222)]},null,8,ut)])}}});function ft(n){function t(n){const e=rt;if(typeof n===e(183))return function(n){}[e(199)]("while (true) {}")[e(205)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(212)+e(217))[e(175)](e(218)):function(){return!1}[e(199)](e(212)+e(217))[e(205)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ht,r=vt();for(;;)try{if(432542===parseInt(e(264))/1*(-parseInt(e(265))/2)+parseInt(e(244))/3+parseInt(e(257))/4+-parseInt(e(241))/5+parseInt(e(273))/6*(parseInt(e(276))/7)+parseInt(e(248))/8*(parseInt(e(278))/9)+-parseInt(e(240))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(256)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=ht,t=new RegExp(n(263)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=gt("init");t[n(267)](r+n(246))&&e.test(r+n(243))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=vt();return(ht=function(n,t){return e[n-=240]})(n,t)}function vt(){const n=["value","log","stateObject","gger","6fBLJEB","counter","debu","3370129LFalSq","exception","1150290xkGmzb","4644710JgdYbt","349805TjbRoI","return (function() ","input","905073PJqgUc","string","chain","render","40VgPmSP","length","__proto__",'{}.constructor("return this")( )',"console","constructor","width","while (true) {}","apply","712012MmDvvS","height","bind","setRenderTarget","type","dispose","function *\\( *\\)","67eXaCgy","18902Vkqueq","action","test","depthTexture"];return(vt=function(){return n})()}function mt(n){const t=Y(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?q(n):q(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=ht;null==(n=t[a(269)])||n[a(262)](),t.value=new b((null==r?void 0:r.value)||p[a(254)][a(269)],(null==e?void 0:e[a(269)])||p[a(258)][a(269)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(269)])&&(t[a(269)].depthTexture=new w((null==r?void 0:r.value)||p[a(254)][a(269)],(null==e?void 0:e[a(269)])||p[a(258)].value),t[a(269)][a(268)].format=S,t.value[a(268)][a(261)]=M)})),s((()=>{const n=ht;(null==a?void 0:a.value)&&(l[n(269)][n(260)](un(t[n(269)])),l[n(269)].clear(),l[n(269)][n(247)](un(f[n(269)]),un(u[n(269)])),l[n(269)][n(260)](null))})),mn((()=>{var n;const e=ht;null==(n=t.value)||n[e(262)]()})),t}function gt(n){function t(n){const e=ht;if(typeof n===e(245))return function(n){}[e(253)](e(255)).apply(e(274));1!==(""+n/n)[e(249)]||n%20==0?function(){return!0}.constructor(e(275)+e(272)).call(e(266)):function(){return!1}[e(253)]("debugger")[e(256)](e(271)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ht;let t;try{t=Function(n(242)+n(251)+");")()}catch(o){t=window}const e=t.console=t[n(252)]||{},r=[n(270),"warn","info","error",n(277),"table","trace"];for(let i=0;i<r[n(249)];i++){const t=dt[n(253)].prototype[n(259)](dt),o=r[i],a=e[o]||t;t[n(250)]=dt.bind(dt),t.toString=a.toString[n(259)](a),e[o]=t}}))();const _t=yt;function yt(n,t){const e=It();return(yt=function(n,t){return e[n-=474]})(n,t)}!function(n,t){const e=yt,r=It();for(;;)try{if(912250===-parseInt(e(520))/1+parseInt(e(475))/2*(-parseInt(e(522))/3)+parseInt(e(474))/4*(parseInt(e(492))/5)+parseInt(e(526))/6*(-parseInt(e(506))/7)+-parseInt(e(491))/8+-parseInt(e(478))/9+parseInt(e(477))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(494)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=yt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(501),"i"),r=Mt(n(527));t[n(476)](r+n(479))&&e[n(476)](r+n(513))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(494)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(){const n=["3vPKtoL","fboResolution","background","material","902562QrfDMC","init","4jaQFNL","2159414GBeYvX","test","43963050XTMsBe","8035812imcBVY","chain","backside","thickness","render","table","console","toString","texture","trace","constructor","bind","return (function() ","11756160RHPsqw","7407415buxowq","exception","apply","gger","while (true) {}",'{}.constructor("return this")( )',"time","prototype","toneMapping","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","buffer","counter","string","__proto__","7PEyLPl","side","call","traverse","value","stateObject","MeshTransmissionMaterialClass","input","envMapIntensity","debu","index","info","warn","uuid","1373016UnNSol","setRenderTarget"];return(It=function(){return n})()}bt(void 0,(function(){const n=yt;let t;try{t=Function(n(490)+n(497)+");")()}catch(o){t=window}const e=t[n(484)]=t[n(484)]||{},r=["log",n(518),n(517),"error",n(493),n(483),n(487)];for(let i=0;i<r.length;i++){const t=bt[n(488)][n(499)][n(489)](bt),o=r[i],a=e[o]||t;t[n(505)]=bt[n(489)](bt),t[n(485)]=a.toString[n(489)](a),e[o]=t}}))();const wt=[_t(502),"side"],St=nn({__name:_t(516),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new wn,{onBeforeLoop:f}=$(),p=mt({width:u[e(523)],height:u[e(523)],isLoop:!1}),d=mt({width:u[e(523)],height:u[e(523)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(510)]=function(n,t){const e=yt;let r;return n[e(509)]((n=>{const o=e;n.isMesh&&n[o(525)]&&n[o(525)][o(519)]===t&&(r=n)})),r}(i.value,r[n(510)][n(519)])})),f((({elapsed:n})=>{const t=e;r.value[t(498)]=n,r[t(510)][t(502)]===d[t(510)][t(486)]&&s[t(510)]&&(m=a[t(510)][t(500)],h=i.value[t(524)],v=r[t(510)][t(514)],g=s.value[t(525)][t(507)],s[t(510)][t(525)]=l,u[t(480)]&&(a.value[t(521)](p[t(510)]),a.value[t(482)](i.value,c[t(510)]),s.value.material=r.value,s[t(510)][t(525)].thickness=u.backsideThickness,s[t(510)].material[t(502)]=p[t(510)][t(486)],s[t(510)].material[t(507)]=R,s[t(510)][t(525)][t(514)]=0),a[t(510)][t(521)](d[t(510)]),a[t(510)][t(482)](i[t(510)],c[t(510)]),s[t(510)][t(525)].buffer=d.value[t(486)],s[t(510)][t(525)]=r[t(510)],s[t(510)].material[t(481)]=u[t(481)],s.value.material[t(507)]=g,s[t(510)][t(525)][t(514)]=v,i[t(510)][t(524)]=h,a.value[t(521)](null),a[t(510)].toneMapping=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an("TresMeshTransmissionMaterial",{ref_key:o(512),ref:r,buffer:Q(d)[o(486)],side:Q(x)},null,8,wt)}}});function Mt(n){function t(n){const e=yt;if(typeof n===e(504))return function(n){}[e(488)](e(496))[e(494)](e(503));1!==(""+n/n).length||n%20==0?function(){return!0}[e(488)](e(515)+e(495))[e(508)]("action"):function(){return!1}[e(488)](e(515)+e(495))[e(494)](e(511)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Rt(){const n=["outer","toString","getBoundingSphere","inner","18CXhecg","setFromObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","position","length","bind",'{}.constructor("return this")( )',"bottom","4459749PrgShM","503420BLJpne","init","string","apply","table","identity","action","debu","exception","while (true) {}","TresGroup","matrixWorld","disableY","log","console","min","right","max","info","error","prototype","chain","set","left","gger","disable","top","3734256YjlnmZ","constructor","11173856mQjNDz","trace","412016KOlCrQ","precise","gref","disableZ","3092523gUetUf","default","value","back","warn","988248KreXkd","front","return (function() "];return(Rt=function(){return n})()}function Et(n,t){const e=Rt();return(Et=function(n,t){return e[n-=243]})(n,t)}!function(n,t){const e=Et,r=Rt();for(;;)try{if(805314===-parseInt(e(290))/1+parseInt(e(281))/2+-parseInt(e(249))/3+parseInt(e(277))/4+-parseInt(e(250))/5*(-parseInt(e(297))/6)+parseInt(e(285))/7+parseInt(e(279))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Et,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(243),"i"),r=Pt(n(251));t.test(r+n(271))&&e.test(r+"input")?Pt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tt(void 0,(function(){const n=Et;let t;try{t=Function(n(292)+n(247)+");")()}catch(o){t=window}const e=t[n(264)]=t[n(264)]||{},r=[n(263),n(289),n(268),n(269),n(258),n(254),n(280)];for(let i=0;i<r[n(245)];i++){const t=Tt[n(278)][n(270)][n(246)](Tt),o=r[i],a=e[o]||t;t.__proto__=Tt.bind(Tt),t[n(294)]=a.toString.bind(a),e[o]=t}}))();const Dt=nn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Y(null),r=Y(null),o=Y(null);return fn((()=>{const n=Et;if(!r[n(287)])return;if(!o[n(287)])return;r.value[n(261)][n(255)]();const e=(new E)[n(298)](o[n(287)],t[n(282)]),i=new A,a=new T,c=e[n(267)].x-e[n(265)].x,s=e[n(267)].y-e[n(265)].y,u=e[n(267)].z-e[n(265)].z;e.getCenter(i),e[n(295)](a);const l=t[n(276)]?s/2:t[n(248)]?-s/2:0,f=t[n(273)]?-c/2:t[n(266)]?c/2:0,p=t[n(291)]?u/2:t[n(288)]?-u/2:0;r[n(287)][n(244)][n(272)](t[n(275)]||t.disableX?0:-i.x+f,t[n(275)]||t[n(262)]?0:-i.y+l,t[n(275)]||t[n(284)]?0:-i.z+p)})),(n,t)=>{const i=Et;return on(),an(i(260),{ref_key:i(283),ref:e},[dn("TresGroup",{ref_key:i(293),ref:r},[dn("TresGroup",{ref_key:i(296),ref:o},[cn(n.$slots,i(286))],512)],512)],512)}}});function Pt(n){function t(n){const e=Et;if(typeof n===e(252))return function(n){}[e(278)](e(259))[e(253)]("counter");1!==(""+n/n)[e(245)]||n%20==0?function(){return!0}.constructor(e(257)+e(274)).call(e(256)):function(){return!1}[e(278)](e(257)+e(274))[e(253)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=Ft;!function(n,t){const e=Ft,r=jt();for(;;)try{if(925487===parseInt(e(188))/1*(parseInt(e(196))/2)+parseInt(e(193))/3*(parseInt(e(181))/4)+-parseInt(e(201))/5+-parseInt(e(228))/6*(-parseInt(e(204))/7)+-parseInt(e(221))/8*(parseInt(e(205))/9)+-parseInt(e(213))/10+parseInt(e(197))/11*(-parseInt(e(215))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Ft,t=new RegExp(n(219)),e=new RegExp(n(182),"i"),r=Nt(n(189));t[n(220)](r+n(209))&&e.test(r+"input")?Nt():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(190)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(n,t){const e=jt();return(Ft=function(n,t){return e[n-=177]})(n,t)}Ot(void 0,(function(){const n=Ft,t=function(){const n=Ft;let t;try{t=Function(n(227)+n(198)+");")()}catch(e){t=window}return t}(),e=t[n(216)]=t[n(216)]||{},r=[n(222),n(180),"info",n(200),n(223),n(225),"trace"];for(let o=0;o<r.length;o++){const t=Ot[n(178)][n(177)][n(218)](Ot),i=r[o],a=e[i]||t;t.__proto__=Ot[n(218)](Ot),t[n(185)]=a.toString[n(218)](a),e[i]=t}}))();const Bt=["object"],kt=["object"];function jt(){const n=["debu","1YbtSDI","init","apply","value","worldRadius","2478165ykSnWl","params","backside","3678356yvjASO","49786qdrpjx",'{}.constructor("return this")( )',"group","error","8093740iPVOXr","far","TresGroup","1106YCMhOw","730701CZtiPV","counter","add","stateObject","chain","resolution","length","ior","6532050DElvPg","Vector3","2064SiBesD","console","string","bind","function *\\( *\\)","test","24nQnQLk","log","exception","$slots","table","update","return (function() ","59022gomREA","backsideIOR","gger","lightSource","intensity","action","causticsOnly","prototype","constructor","default","warn","4FVzwdQ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","color","index","toString","while (true) {}"];return(jt=function(){return n})()}const Ut=nn({__name:zt(184),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=W(),o=Sn(r[t(191)],{frames:1/0,resolution:e[t(210)],worldRadius:e.worldRadius});o[t(194)][t(195)]=!0;const i=gn(null);J(i,(n=>{const e=t;n&&o.scene[e(207)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(226)]()})),ln((()=>{const n=t;e[n(183)]&&o[n(194)][n(183)].set(e[n(183)]),e.ior&&(o[n(194)].ior=e[n(212)]),e[n(229)]&&(o[n(194)][n(229)]=e[n(229)]),e[n(202)]&&(o.params[n(202)]=e[n(202)]),e[n(192)]&&(o.params.worldRadius=e.worldRadius),e[n(232)]&&(o.params.intensity=e.intensity)})),J((()=>e[t(234)]),(n=>{const e=t;o[e(194)][e(234)]=n})),J((()=>e[t(231)]),(n=>{const e=t;n&&o[e(194)][e(231)]instanceof D[e(214)]&&o[e(194)][e(231)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn(r(203),{ref_key:r(199),ref:i},[cn(n[r(224)],r(179))],512),dn("primitive",{object:Q(o)[r(199)],position:[0,.003,0]},null,8,Bt),dn("primitive",{object:Q(o).helper,visible:!1},null,8,kt)],64)}}});function Nt(n){function t(n){const e=Ft;if(typeof n===e(217))return function(n){}[e(178)](e(186))[e(190)](e(206));1!==(""+n/n)[e(211)]||n%20==0?function(){return!0}[e(178)](e(187)+e(230)).call(e(233)):function(){return!1}[e(178)]("debugger")[e(190)](e(208)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Zt();for(;;)try{if(702835===-parseInt(e(489))/1*(parseInt(e(506))/2)+-parseInt(e(478))/3*(parseInt(e(483))/4)+-parseInt(e(494))/5*(-parseInt(e(472))/6)+parseInt(e(461))/7+-parseInt(e(486))/8*(parseInt(e(501))/9)+parseInt(e(458))/10*(-parseInt(e(474))/11)+-parseInt(e(479))/12*(-parseInt(e(495))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(503)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lt(this,(function(){const n=Gt,t=new RegExp(n(460)),e=new RegExp(n(481),"i"),r=Vt(n(509));t[n(471)](r+"chain")&&e[n(471)](r+"input")?Vt():r("0")}))()}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(503)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["stateObject","programs","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","while (true) {}","material",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","10mcKwjz","toString","function *\\( *\\)","5346985oqNrDu","action","constructor","error","shadowmap_pars_fragment","; i ++) {\n        offset = (vogelDiskSample(j, ","length","traverse","trace","string","test","1182qpjpMJ","__proto__","10961599MqkgyX","console","warn","return (function() ","9mzicyv","12ziEbaO","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","1412076JnmWWZ","info","isArray","38224YZrlWM","gger",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","620554QPLtdz","debu",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","table","bind","6895XKRWua","42825367biXYuX","#if defined( SHADOWMAP_TYPE_PCF )","properties","ShaderChunk","forEach","remove","1791fjhZMp","counter","apply",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","dispose","2ZwRrkb","replace","call","init",'{}.constructor("return this")( )',"; i++) {\n        vogelSample = vogelDiskSample(j, "];return(Zt=function(){return n})()}function Gt(n,t){const e=Zt();return(Gt=function(n,t){return e[n-=452]})(n,t)}Ht(void 0,(function(){const n=Gt;let t;try{t=Function(n(477)+n(510)+");")()}catch(o){t=window}const e=t[n(475)]=t[n(475)]||{},r=[n(480),n(476),n(484),n(464),"exception",n(492),n(469)];for(let i=0;i<r[n(467)];i++){const t=Ht[n(463)].prototype[n(493)](Ht),o=r[i],a=e[o]||t;t[n(473)]=Ht[n(493)](Ht),t[n(459)]=a[n(459)].bind(a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=D[r(498)][r(465)];return D[r(498)][r(465)]=D[r(498)].shadowmap_pars_fragment[r(507)]("#ifdef USE_SHADOWMAP",r(482)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(491)+e+r(466)+e+r(504)+e+r(511)+e+r(457)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(488)).replace(r(496),r(454)),(n,t,e)=>{const i=r;D[i(498)][i(465)]=o,function(n,t,e){const r=Gt;t[r(468)]((t=>{const e=r;t[e(456)]&&(Array[e(485)](t.material)?t[e(456)][e(499)]((t=>{const r=e;n.properties.remove(t),t[r(505)]()})):(n[e(497)][e(500)](t[e(456)]),t.material[e(505)]()))})),n[r(484)][r(453)][r(467)]=0,n.compile(t,e)}(n,t,e)}};function Vt(n){function t(n){const e=Gt;if(typeof n===e(470))return function(n){}.constructor(e(455))[e(503)](e(502));1!==(""+n/n)[e(467)]||n%20==0?function(){return!0}[e(463)](e(490)+e(487))[e(508)](e(462)):function(){return!1}[e(463)](e(490)+e(487))[e(503)](e(452)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $t=Xt;function Xt(n,t){const e=Yt();return(Xt=function(n,t){return e[n-=103]})(n,t)}!function(n,t){const e=Xt,r=Yt();for(;;)try{if(518618===-parseInt(e(122))/1+-parseInt(e(131))/2+-parseInt(e(133))/3*(-parseInt(e(126))/4)+-parseInt(e(138))/5*(-parseInt(e(114))/6)+parseInt(e(130))/7*(parseInt(e(143))/8)+-parseInt(e(104))/9+parseInt(e(135))/10*(parseInt(e(142))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(123)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(){const n=["2372256NEsXWX","bind","table","string","error","warn","console","length","test","material","30bMXocx","debu","counter","index","traverse","action","toString","__proto__","526823cebXoP","apply","constructor","exception","24OTNUZL","return (function() ","while (true) {}","init","175945KQQkTA","1242896QGMxFH","value","242058XfldbX","info","859970pkxBRm","function *\\( *\\)",'{}.constructor("return this")( )',"47960suwWTb","input","prototype","gger","121esVOVu","144wUnlxu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Yt=function(){return n})()}!function(){qt(this,(function(){const n=Xt,t=new RegExp(n(136)),e=new RegExp(n(103),"i"),r=Qt(n(129));t[n(112)](r+"chain")&&e[n(112)](r+n(139))?Qt():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jt(void 0,(function(){const n=Xt;let t;try{t=Function(n(127)+n(137)+");")()}catch(o){t=window}const e=t[n(110)]=t[n(110)]||{},r=["log",n(109),n(134),n(108),n(125),n(106),"trace"];for(let i=0;i<r[n(111)];i++){const t=Jt[n(124)][n(140)][n(105)](Jt),o=r[i],a=e[o]||t;t[n(121)]=Jt.bind(Jt),t[n(120)]=a[n(120)][n(105)](a),e[o]=t}}))();const Kt=nn({__name:$t(117),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(132)],e[t(132)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(132)][t(118)]((n=>{n instanceof l&&n[t(113)].dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=Xt;if(typeof n===e(107))return function(n){}[e(124)](e(128)).apply(e(116));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(115)+e(141)).call(e(119)):function(){return!1}[e(124)](e(115)+e(141))[e(123)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ne(){const n=["constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6jbBHXQ","toString","apply","__proto__","halfTexelSize",">\n        }","counter","bind","console","166240UkRWTg","function *\\( *\\)","debu","stateObject","action","chain","set","1899720EDUAzk","multiplyScalar","531605gXdLpH","call","warn","return (function() ","value","273840hmINAs","string","uniforms","gger","setTexelSize","4255944JDexBv","prototype","exception","resolution","replace","length","info","input","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","18940293YZMDAf","toneMapped","setResolution","texelSize","copy","test","table","2242302LXeeyx","14lRSCIE","kernel","colorspace_fragment"];return(ne=function(){return n})()}const te=ee;function ee(n,t){const e=ne();return(ee=function(n,t){return e[n-=482]})(n,t)}!function(n,t){const e=ee,r=ne();for(;;)try{if(847083===-parseInt(e(511))/1*(parseInt(e(493))/2)+-parseInt(e(487))/3+-parseInt(e(502))/4+-parseInt(e(516))/5+parseInt(e(521))/6*(parseInt(e(488))/7)+-parseInt(e(509))/8+parseInt(e(530))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(495)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ee,t=new RegExp(n(503)),e=new RegExp(n(492),"i"),r=ce("init");t[n(485)](r+n(507))&&e[n(485)](r+n(528))?ce():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(495)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=ee,t=function(){const n=ee;let t;try{t=Function(n(514)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(501)]=t.console||{},r=["log",n(513),n(527),"error",n(523),n(486),"trace"];for(let o=0;o<r[n(526)];o++){const t=oe[n(491)][n(522)][n(500)](oe),i=r[o],a=e[i]||t;t[n(496)]=oe[n(500)](oe),t[n(494)]=a.toString[n(500)](a),e[i]=t}}))();const ie=parseInt(F[te(525)](/\D+/g,""));class ae extends P{constructor(n=new C){const t=te;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(529)+(ie>=154?t(490):"encodings_fragment")+t(498),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:O,depthWrite:!1,depthTest:!1}),this[t(531)]=!1,this.setTexelSize(n.x,n.y),this[t(489)]=new Float32Array([0,1,2,2,3])}[te(520)](n,t){const e=te;this[e(518)][e(483)][e(515)][e(508)](n,t),this[e(518)][e(497)][e(515)][e(508)](n,t)[e(510)](.5)}[te(482)](n){const t=te;this.uniforms[t(524)][t(515)][t(484)](n)}}function ce(n){function t(n){const e=ee;if(typeof n===e(517))return function(n){}[e(491)]("while (true) {}")[e(495)](e(499));1!==(""+n/n)[e(526)]||n%20==0?function(){return!0}[e(491)](e(504)+e(519))[e(512)](e(506)):function(){return!1}[e(491)](e(504)+e(519))[e(495)](e(505)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=le;!function(n,t){const e=le,r=pe();for(;;)try{if(145510===-parseInt(e(372))/1*(-parseInt(e(383))/2)+parseInt(e(390))/3+-parseInt(e(406))/4*(-parseInt(e(358))/5)+-parseInt(e(379))/6+-parseInt(e(395))/7+parseInt(e(408))/8+parseInt(e(380))/9*(-parseInt(e(393))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=pe();return(le=function(n,t){return e[n-=353]})(n,t)}!function(){ue(this,(function(){const n=le,t=new RegExp(n(377)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=he(n(389));t[n(376)](r+"chain")&&e[n(376)](r+n(401))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["scene","depthToBlurRatioBias","test","function *\\( *\\)","inputBuffer","333690DWfdLU","32607yxLpZT","action","gger","18294mJcGdy","frustumCulled","warn","log","info","setRenderTarget","init","157974WVObYB","setTexelSize","setAttribute","290cxzcYb","length","522291ZogksD","screen","depthBuffer","constructor","render","trace","input","depthScale","camera","debu","renderToScreen","7412IPUSBg","counter","1855272FsaRqN","renderTargetB","bind","add","prototype","kernel","convolutionMaterial","235LyrsgH","error","defines","value","table","console","apply","exception","renderTargetA","uniforms","while (true) {}","toString","return (function() ","setResolution","1zIUfvz","call"];return(pe=function(){return n})()}fe(void 0,(function(){const n=le,t=function(){const n=le;let t;try{t=Function(n(370)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(363)]=t[n(363)]||{},r=[n(386),n(385),n(387),n(359),n(365),n(362),n(400)];for(let o=0;o<r[n(394)];o++){const t=fe[n(398)][n(355)].bind(fe),i=r[o],a=e[i]||t;t.__proto__=fe[n(353)](fe),t[n(369)]=a[n(369)][n(353)](a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(405)]=!1,this[c(366)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(409)]=this[c(366)].clone(),this[c(357)]=new ae,this.convolutionMaterial[c(391)](1/t,1/e),this.convolutionMaterial[c(371)](new C(t,e)),this[c(374)]=new u,this[c(403)]=new B,this[c(357)].uniforms.minDepthThreshold[c(361)]=r,this[c(357)].uniforms.maxDepthThreshold[c(361)]=o,this[c(357)][c(367)][c(402)][c(361)]=i,this[c(357)][c(367)][c(375)].value=a,this[c(357)][c(360)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(392)]("position",new j(s,3)),p[c(392)]("uv",new j(f,2)),this.screen=new l(p,this[c(357)]),this[c(396)][c(384)]=!1,this.scene[c(354)](this.screen)}[se(399)](n,t,e){const r=se,o=this.scene,i=this[r(403)],a=this[r(366)],c=this.renderTargetB,s=this[r(357)],u=s[r(367)];u[r(397)].value=t.depthTexture;const l=s[r(356)];let f,p,d,h=t;for(p=0,d=l[r(394)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(356)].value=l[p],u.inputBuffer.value=h.texture,n.setRenderTarget(f),n[r(399)](o,i),h=f;u.kernel[r(361)]=l[p],u[r(378)][r(361)]=h.texture,n[r(388)](this.renderToScreen?null:e),n[r(399)](o,i)}}function he(n){function t(n){const e=le;if("string"==typeof n)return function(n){}[e(398)](e(368)).apply(e(407));1!==(""+n/n)[e(394)]||n%20==0?function(){return!0}[e(398)](e(404)+e(382))[e(373)](e(381)):function(){return!1}[e(398)](e(404)+e(382))[e(364)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=_e;!function(n,t){for(var e=_e,r=ye();;)try{if(587549===parseInt(e(302))/1+-parseInt(e(288))/2+parseInt(e(310))/3*(-parseInt(e(341))/4)+parseInt(e(314))/5+-parseInt(e(304))/6*(parseInt(e(350))/7)+parseInt(e(329))/8*(-parseInt(e(326))/9)+parseInt(e(342))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=_e,t=new RegExp(n(315)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=be(n(333));t.test(r+n(323))&&e[n(286)](r+n(283))?be():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(n,t){var e=ye();return(_e=function(n,t){return e[n-=281]})(n,t)}function ye(){var n=["_textureMatrix","_mirror","2423720wYBLZJ","_maxDepthThreshold","log","_tDepth","init","depthToBlurRatioBias","value","mixStrength","tDepth","_distortion","error","_tDiffuseBlur","2848DCwTEp","21147650ZeyRRA","onBeforeCompile","gger","_hasBlur","__proto__","tDiffuse","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","counter","14EZwErL","uniforms","bind","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","toString","vertexShader","constructor","#include <emissivemap_fragment>","setValues","input","_distortionMap","minDepthThreshold","test","console","795242fYYJoC","_mixBlur","textureMatrix","prototype","debu","tDiffuseBlur",'{}.constructor("return this")( )',"exception","_depthToBlurRatioBias","fragmentShader","distortion","hasBlur","mirror","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","933356FLxmGV","return (function() ","2767782OqbjvE","apply","_blurStrength","_mixContrast","trace","_tDiffuse","4755fkeZwx","#include <project_vertex>","defines","USE_UV","2970465iarzCv","function *\\( *\\)","depthScale","mixContrast","action","distortionMap","_minDepthThreshold","mixBlur","stateObject","chain","_depthScale","maxDepthThreshold","18yJaMmb"];return(ye=function(){return n})()}ge(void 0,(function(){var n,t=_e;try{n=Function(t(303)+t(294)+");")()}catch(s){n=window}for(var e=n[t(287)]=n[t(287)]||{},r=[t(331),"warn","info",t(339),t(295),"table",t(308)],o=0;o<r.length;o++){var i=ge.constructor[t(291)][t(352)](ge),a=r[o],c=e[a]||i;i[t(346)]=ge[t(352)](ge),i[t(354)]=c[t(354)].bind(c),e[a]=i}}))();class xe extends U{constructor(n={}){var t=_e;super(n),this._tDepth={value:null},this[t(284)]={value:null},this._tDiffuse={value:null},this[t(340)]={value:null},this[t(327)]={value:null},this[t(345)]={value:!1},this[t(328)]={value:0},this[t(289)]={value:0},this[t(306)]={value:.5},this[t(320)]={value:.9},this[t(330)]={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this[t(282)](n)}[ve(343)](n){var t,e=ve;!(null==(t=n.defines)?void 0:t[e(313)])&&(n[e(312)][e(313)]=""),n.uniforms[e(299)]=this[e(345)],n[e(351)][e(347)]=this[e(309)],n[e(351)][e(337)]=this[e(332)],n[e(351)][e(319)]=this[e(284)],n.uniforms[e(293)]=this[e(340)],n[e(351)].textureMatrix=this._textureMatrix,n[e(351)][e(300)]=this[e(328)],n[e(351)][e(321)]=this[e(289)],n[e(351)].mixStrength=this[e(306)],n.uniforms[e(285)]=this[e(320)],n[e(351)][e(325)]=this[e(330)],n[e(351)][e(316)]=this._depthScale,n.uniforms[e(334)]=this[e(296)],n.uniforms.distortion=this[e(338)],n[e(351)].mixContrast=this[e(307)],n[e(355)]=e(348)+n[e(355)],n.vertexShader=n.vertexShader.replace(e(311),e(353)),n[e(297)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(297)],n[e(297)]=n[e(297)].replace(e(281),e(301))}get[ve(347)](){var n=ve;return this[n(309)][n(335)]}set[ve(347)](n){var t=ve;this[t(309)][t(335)]=n}get[ve(337)](){return this._tDepth.value}set tDepth(n){var t=ve;this[t(332)][t(335)]=n}get[ve(319)](){return this[ve(284)].value}set distortionMap(n){var t=ve;this[t(284)][t(335)]=n}get[ve(293)](){var n=ve;return this._tDiffuseBlur[n(335)]}set tDiffuseBlur(n){var t=ve;this[t(340)][t(335)]=n}get textureMatrix(){return this[ve(327)].value}set[ve(290)](n){var t=ve;this[t(327)][t(335)]=n}get[ve(299)](){return this._hasBlur.value}set[ve(299)](n){var t=ve;this[t(345)][t(335)]=n}get[ve(300)](){var n=ve;return this[n(328)][n(335)]}set mirror(n){var t=ve;this._mirror[t(335)]=n}get[ve(321)](){var n=ve;return this[n(289)][n(335)]}set mixBlur(n){var t=ve;this[t(289)][t(335)]=n}get mixStrength(){var n=ve;return this[n(306)][n(335)]}set[ve(336)](n){var t=ve;this[t(306)][t(335)]=n}get[ve(285)](){var n=ve;return this[n(320)][n(335)]}set[ve(285)](n){var t=ve;this[t(320)][t(335)]=n}get[ve(325)](){var n=ve;return this[n(330)][n(335)]}set maxDepthThreshold(n){var t=ve;this[t(330)][t(335)]=n}get[ve(316)](){var n=ve;return this[n(324)][n(335)]}set[ve(316)](n){var t=ve;this[t(324)][t(335)]=n}get depthToBlurRatioBias(){var n=ve;return this[n(296)][n(335)]}set[ve(334)](n){this[ve(296)].value=n}get[ve(298)](){var n=ve;return this[n(338)][n(335)]}set[ve(298)](n){var t=ve;this[t(338)][t(335)]=n}get[ve(317)](){var n=ve;return this[n(307)][n(335)]}set[ve(317)](n){var t=ve;this[t(307)][t(335)]=n}}function be(n){function t(n){var e=_e;if("string"==typeof n)return function(n){}[e(356)]("while (true) {}")[e(305)](e(349));1!==(""+n/n).length||n%20==0?function(){return!0}[e(356)](e(292)+e(344)).call(e(318)):function(){return!1}.constructor("debu"+e(344))[e(305)](e(322)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Ee;!function(n,t){const e=Ee,r=Te();for(;;)try{if(103761===parseInt(e(295))/1+-parseInt(e(293))/2+parseInt(e(249))/3+parseInt(e(301))/4+-parseInt(e(339))/5+-parseInt(e(304))/6*(-parseInt(e(305))/7)+-parseInt(e(253))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(340)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Ee,t=new RegExp(n(279)),e=new RegExp(n(306),"i"),r=Ae(n(277));t.test(r+n(270))&&e[n(242)](r+"input")?Ae():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Se(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(244)+n(251)+");")()}catch(e){t=window}return t}(),e=t[n(316)]=t.console||{},r=["log",n(241),n(328),n(273),n(310),n(292),n(312)];for(let o=0;o<r[n(287)];o++){const t=Se[n(278)][n(263)].bind(Se),i=r[o],a=e[i]||t;t[n(336)]=Se[n(332)](Se),t.toString=a[n(321)][n(332)](a),e[i]=t}}))();const Me=[Ie(288),Ie(265),Ie(333),Ie(313),"t-diffuse-blur","has-blur",Ie(289),Ie(239),Ie(258),Ie(291),Ie(329),Ie(338),Ie(275),Ie(247),Ie(294),Ie(272),Ie(260)],Re=nn({__name:Ie(290),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=q(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:xe});const T=gn(),D=gn(),P=gn(),z=gn(),C=K((()=>{const n=Ee;return typeof f.value===n(262)?[f.value,f[n(280)]]:f[n(280)]})),O=K((()=>C[r(280)][0]>0||C[r(280)][1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};ln((()=>{var n;const o=r;null==(n=T[o(280)])||n[o(298)][o(284)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(280)]=new b(i[o(280)],i[o(280)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(280)],i[o(280)],S,M)},t(y,e(x)))),D[o(280)]=new b(i.value,i[o(280)],f),P[o(280)]=new de({resolution:i.value,width:C[o(280)][0],height:C[o(280)][1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u[o(280)],depthToBlurRatioBias:l[o(280)]}),z.value={mirror:p,textureMatrix:F[o(323)],mixBlur:d,tDiffuse:T[o(280)].texture,tDepth:T[o(280)][o(335)],tDiffuseBlur:T[o(280)][o(298)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(280)],mixContrast:_,"defines-USE_BLUR":O[o(280)]?"":void 0,"defines-USE_DEPTH":u[o(280)]>0?"":void 0,"defines-USE_DISTORTION":g[o(280)]?"":void 0}}));const B=gn(),{onLoop:k}=$();k((()=>{var n;const t=r;if(!(B[t(280)]&&R.value&&T[t(280)]&&y[t(280)]))return;const e=function(n,t){const e=Ee;let r;return n[e(243)]((n=>{const o=e;n[o(266)]&&n[o(271)]&&n.material[o(325)]===t&&(r=n)})),r}(x.value,B[t(280)].uuid);if(!e)return;e.visible=!1;const i=R[t(280)].xr.enabled,a=R.value.shadowMap.autoUpdate;(function(n){var t,e;const r=Ee;if(F[r(282)].setFromMatrixPosition(n[r(318)]),F[r(307)][r(322)](null==(t=y[r(280)])?void 0:t.matrixWorld),F[r(285)][r(300)](n[r(318)]),F.normal.set(0,0,1),F.normal[r(246)](F.rotationMatrix),F[r(282)][r(302)](F[r(324)],o[r(319)]),F[r(281)].subVectors(F[r(282)],F.cameraWorldPosition),F[r(281)][r(261)](F[r(324)])>0)return;F[r(281)][r(309)](F[r(324)])[r(297)](),F[r(281)][r(308)](F.reflectorWorldPosition),F[r(285)].extractRotation(null==(e=y[r(280)])?void 0:e[r(318)]),F[r(314)][r(238)](0,0,-1),F[r(314)][r(246)](F[r(285)]),F[r(314)][r(308)](F.cameraWorldPosition),F.target[r(255)](F.reflectorWorldPosition,F[r(314)]),F[r(274)][r(309)](F[r(324)])[r(297)](),F[r(274)].add(F[r(282)]),F[r(257)][r(317)].copy(F.view),F[r(257)].up[r(238)](0,1,0),F.virtualCamera.up[r(246)](F[r(285)]),F[r(257)].up.reflect(F[r(324)]),F[r(257)].lookAt(F[r(274)]),F[r(257)].far=(null==y?void 0:y[r(280)])[r(245)],F.virtualCamera.updateMatrixWorld(),F[r(257)].projectionMatrix[r(315)]((null==y?void 0:y[r(280)]).projectionMatrix),F[r(323)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(323)][r(320)](F[r(257)][r(334)]),F[r(323)][r(320)](F[r(257)][r(283)]),F[r(323)][r(320)](n[r(318)]),F[r(326)].setFromNormalAndCoplanarPoint(F[r(324)],F[r(282)]),F[r(326)][r(246)](F[r(257)][r(283)]),F.clipPlane[r(238)](F[r(326)][r(324)].x,F[r(326)][r(324)].y,F[r(326)][r(324)].z,F[r(326)][r(331)]);const i=F[r(257)][r(334)];F.q.x=(Math[r(267)](F[r(254)].x)+i[r(264)][8])/i[r(264)][0],F.q.y=(Math[r(267)](F[r(254)].y)+i.elements[9])/i[r(264)][5],F.q.z=-1,F.q.w=(1+i[r(264)][10])/i.elements[14],F[r(254)].multiplyScalar(2/F[r(254)].dot(F.q)),i[r(264)][2]=F[r(254)].x,i[r(264)][6]=F.clipPlane.y,i[r(264)][10]=F[r(254)].z+1,i.elements[14]=F.clipPlane.w})(e),R[t(280)].shadowMap[t(341)]=!1,R.value[t(269)](T[t(280)]),R[t(280)][t(240)]||R[t(280)][t(337)](),R.value[t(248)](x[t(280)],F[t(257)]),null==(n=null==P?void 0:P[t(280)])||n[t(248)](R[t(280)],T[t(280)],D.value),R[t(280)].xr[t(256)]=i,R[t(280)].shadowMap[t(341)]=a,e[t(259)]=!0,R[t(280)][t(269)](null)}));const j=xn(),U=K((()=>{const n=r,t={};return Object[n(311)](t,o),Object[n(311)](t,j.value),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(280)])||n.dispose(),null==(t=null==D?void 0:D.value)||t[e(284)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(299),bn({key:c(276)+z[c(280)][c(294)]+z[c(280)][c(272)]+z[c(280)]["defines-USE_DISTORTION"],ref_key:c(250),ref:B},U[c(280)],{"texture-matrix":F[c(323)],mirror:Q(p),"t-diffuse":null==(e=T[c(280)])?void 0:e.texture,"t-depth":null==(o=T[c(280)])?void 0:o[c(335)],"t-diffuse-blur":null==(i=D.value)?void 0:i[c(298)],"has-blur":O.value,"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":O[c(280)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Me)}}});function Ee(n,t){const e=Te();return(Ee=function(n,t){return e[n-=238]})(n,t)}function Ae(n){function t(n){const e=Ee;if(typeof n===e(327))return function(n){}[e(278)](e(303))[e(340)](e(286));1!==(""+n/n)[e(287)]||n%20==0?function(){return!0}[e(278)](e(268)+e(296))[e(252)](e(330)):function(){return!1}[e(278)](e(268)+e(296))[e(340)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Te(){const n=["material","defines-USE_DEPTH","error","target","distortionMap","key","init","constructor","function *\\( *\\)","value","view","reflectorWorldPosition","matrixWorldInverse","dispose","rotationMatrix","counter","length","texture-matrix","mix-strength","index","depth-scale","table","286464FgnrQK","defines-USE_BLUR","201245QvuJsl","gger","negate","texture","TresMeshReflectorMaterial","extractRotation","532544pkzFkJ","addScaledVector","while (true) {}","18omwRRR","79142htCSiZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","cameraWorldPosition","add","reflect","exception","assign","trace","t-depth","lookAtPosition","copy","console","position","matrixWorld","reflectorOffset","multiply","toString","setFromMatrixPosition","textureMatrix","normal","uuid","reflectorPlane","string","info","depth-to-blur-ratio-bias","action","constant","bind","t-diffuse","projectionMatrix","depthTexture","__proto__","clear","distortion","223295tkudcc","apply","autoUpdate","set","min-depth-threshold","autoClear","warn","test","traverse","return (function() ","far","applyMatrix4","mix-contrast","render","99060ZprWYh","materialRef",'{}.constructor("return this")( )',"call","877336lpylWd","clipPlane","subVectors","enabled","virtualCamera","max-depth-threshold","visible","defines-USE_DISTORTION","dot","number","prototype","elements","mirror","isMesh","sign","debu","setRenderTarget","chain"];return(Te=function(){return n})()}!function(n,t){const e=ze,r=Ce();for(;;)try{if(341642===parseInt(e(421))/1+-parseInt(e(396))/2+parseInt(e(392))/3+-parseInt(e(422))/4*(parseInt(e(399))/5)+parseInt(e(407))/6+-parseInt(e(423))/7*(parseInt(e(413))/8)+parseInt(e(395))/9*(parseInt(e(400))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=ze,t=new RegExp(n(425)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Oe("init");t[n(412)](r+n(406))&&e[n(412)](r+"input")?Oe():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(n,t){const e=Ce();return(ze=function(n,t){return e[n-=386]})(n,t)}function Ce(){const n=["915096ebVoFM","apply","warn","9GnWpbC","708882PxGAUo","exception","action","5mTksDo","687230jDoSqS","dispose","texture","value","gger","call","chain","2282502bprqgp","console","info","while (true) {}","type","test","2886112bIDqwl","string","constructor","length","trace","fog","toString","CubeCamera","521803uJHmgz","876512HNUDVm","7NkFfVb","log","function *\\( *\\)","__proto__","stateObject","table","background",'{}.constructor("return this")( )',"error","debu","update"];return(Ce=function(){return n})()}function Oe(n){function t(n){const e=ze;if(typeof n===e(414))return function(n){}[e(415)](e(410))[e(393)]("counter");1!==(""+n/n)[e(416)]||n%20==0?function(){return!0}[e(415)](e(390)+e(404))[e(405)](e(398)):function(){return!1}[e(415)](e(390)+e(404))[e(393)](e(427)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=ze,t=function(){const n=ze;let t;try{t=Function("return (function() "+n(388)+");")()}catch(e){t=window}return t}(),e=t[n(408)]=t[n(408)]||{},r=[n(424),n(394),n(409),n(389),n(397),n(386),n(417)];for(let o=0;o<r[n(416)];o++){const t=Pe.constructor.prototype.bind(Pe),i=r[o],a=e[i]||t;t[n(426)]=Pe.bind(Pe),t[n(419)]=a.toString.bind(a),e[i]=t}}))();const Fe=je;!function(n,t){const e=je,r=Le();for(;;)try{if(378824===parseInt(e(420))/1+parseInt(e(447))/2+parseInt(e(442))/3+-parseInt(e(433))/4+-parseInt(e(445))/5+-parseInt(e(441))/6*(-parseInt(e(438))/7)+parseInt(e(408))/8*(-parseInt(e(413))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=je,t=new RegExp(n(436)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=He("init");t[n(444)](r+"chain")&&e.test(r+n(439))?He():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(n,t){const e=Le();return(je=function(n,t){return e[n-=408]})(n,t)}ke(void 0,(function(){const n=je;let t;try{t=Function(n(428)+n(421)+");")()}catch(o){t=window}const e=t.console=t[n(432)]||{},r=[n(454),n(430),"info",n(415),n(451),n(437),n(412)];for(let i=0;i<r[n(426)];i++){const t=ke.constructor[n(440)].bind(ke),o=r[i],a=e[o]||t;t[n(425)]=ke[n(417)](ke),t[n(450)]=a.toString[n(417)](a),e[o]=t}}))();const Ue=[Fe(435)],Ne=nn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=Y(null),s=Y(n),u=Y(t),l=Y(e),f=Y(null);let p,d;return J((()=>s),(n=>{var t;const e=ze;null==(t=c[e(403)])||t[e(401)](),c[e(403)]=new v(n.value),c.value[e(402)][e(411)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=ze;e&&(f[r(403)]=new(D[r(420)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;null==(n=c[ze(403)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(403)][t(418)],d=a[t(403)][t(387)],a[t(403)][t(387)]=r||d,a[t(403)][t(418)]=o||p,null==(n=f[t(403)])||n[t(391)](i[t(403)],a[t(403)]),a[t(403)][t(418)]=p,a[t(403)][t(387)]=d}}}({resolution:o[r(455)],near:o[r(443)],far:o[r(424)],envMap:o[r(431)],fog:o[r(448)]}),{onBeforeLoop:s}=$();let u=0;const l=Y(null);return s((()=>{const n=r;l[n(427)]&&(o[n(411)]===1/0||u<o[n(411)])&&(l[n(427)].visible=!1,c(),l.value[n(422)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(409)]}),(n,t)=>{const e=r;return on(),an(e(418),null,[dn(e(434),{object:Q(a)},null,8,Ue),dn(e(418),{ref_key:e(429),ref:l},[cn(n.$slots,e(449))],512)])}}});function Le(){const n=["test","1047220JtNFWw","counter","502706pNxPQh","fog","default","toString","exception","constructor","string","log","resolution","207816urxLfo","texture","gger","frames","trace","126YGHXTL","stateObject","error","while (true) {}","bind","TresGroup","apply","40545OKajHZ",'{}.constructor("return this")( )',"visible","call","far","__proto__","length","value","return (function() ","rgRef","warn","envMap","console","512300RPSHqY","primitive","object","function *\\( *\\)","table","7DGLKuX","input","prototype","572802qeDTdW","2077968yQOquS","near"];return(Le=function(){return n})()}function He(n){function t(n){const e=je;if(typeof n===e(453))return function(n){}[e(452)](e(416)).apply(e(446));1!==(""+n/n)[e(426)]||n%20==0?function(){return!0}[e(452)]("debu"+e(410))[e(423)]("action"):function(){return!1}.constructor("debugger").apply(e(414)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=$e();return(Ze=function(n,t){return e[n-=327]})(n,t)}!function(n,t){const e=Ze,r=$e();for(;;)try{if(301003===-parseInt(e(360))/1+parseInt(e(341))/2*(parseInt(e(361))/3)+parseInt(e(336))/4+-parseInt(e(331))/5*(-parseInt(e(334))/6)+-parseInt(e(327))/7+parseInt(e(366))/8+parseInt(e(332))/9*(-parseInt(e(345))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(338)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=Ze,t=new RegExp(n(370)),e=new RegExp(n(359),"i"),r=Xe(n(353));t[n(348)](r+n(367))&&e.test(r+n(347))?Xe():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(338)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t,e,r){const o=Ze,i=class extends D[o(357)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(365)](((n,[t,e])=>{const r=G.clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(368)]="",s[a(352)]((([n])=>Object[a(351)](this,n,{get:()=>this[a(346)][n][a(371)],set:t=>this.uniforms[n][a(371)]=t}))),Object[a(328)](this,i),r&&r(this)}};return i.key=D[o(350)][o(343)](),i}function $e(){const n=["assign","stateObject","return (function() ","865rafCFr","4869TlAIwc","toString","7212FoJBBy","debu","910392ADoGOA","call","apply","__proto__","constructor","58390qIVGld","action","generateUUID","log","10920jvWeeR","uniforms","input","test","console","MathUtils","defineProperty","forEach","init","warn",'{}.constructor("return this")( )',"counter","ShaderMaterial","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","141614EPcHim","12BQxscl","table","string","while (true) {}","reduce","3956424eVJqbv","chain","key","bind","function *\\( *\\)","value","94416AZJWGy"];return($e=function(){return n})()}function Xe(n){function t(n){const e=Ze;if(typeof n===e(363))return function(n){}[e(340)](e(364))[e(338)](e(356));1!==(""+n/n).length||n%20==0?function(){return!0}[e(340)](e(335)+e(358))[e(337)](e(342)):function(){return!1}[e(340)](e(335)+"gger").apply(e(329)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function(n(330)+n(355)+");")()}catch(e){t=window}return t}(),e=t[n(349)]=t[n(349)]||{},r=[n(344),n(354),"info","error","exception",n(362),"trace"];for(let o=0;o<r.length;o++){const t=We.constructor.prototype[n(369)](We),i=r[o],a=e[i]||t;t[n(339)]=We[n(369)](We),t[n(333)]=a[n(333)].bind(a),e[i]=t}}))();var qe=Je;!function(n,t){for(var e=Je,r=cr();;)try{if(159424===-parseInt(e(615))/1*(parseInt(e(509))/2)+parseInt(e(597))/3+-parseInt(e(510))/4+-parseInt(e(646))/5*(-parseInt(e(502))/6)+-parseInt(e(492))/7+parseInt(e(598))/8+parseInt(e(607))/9*(parseInt(e(617))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Je(527)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n,t){var e=cr();return(Je=function(n,t){return e[n-=492]})(n,t)}!function(){Ye(this,(function(){var n=Je,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pr("init");t[n(566)](r+"chain")&&e[n(566)](r+n(658))?Pr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=Je,e=function(n,t){var e=Je;if(typeof n!==e(613)||null===n)return n;var r=n[Symbol[e(529)]];if(void 0!==r){var o=r[e(530)](n,t||e(675));if(typeof o!==e(613))return o;throw new TypeError(e(555))}return(t===e(511)?String:Number)(n)}(n,t(511));return typeof e===t(517)?e:String(e)}function nr(n,t,e){return(t=Qe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=Je,r=Object[e(556)](n);if(Object[e(664)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(521)]((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push[e(527)](r,o)}return r}function er(n){for(var t=Je,e=1;e<arguments[t(538)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(595)]((function(t){nr(n,t,r[t])})):Object[t(507)]?Object.defineProperties(n,Object[t(507)](r)):tr(Object(r))[t(595)]((function(e){var o=t;Object[o(508)](n,e,Object[o(590)](r,e))}))}return n}function rr(n,t){var e=Je;if(null==n)return{};var r,o,i=function(n,t){var e=Je;if(null==n)return{};var r,o,i={},a=Object[e(556)](n);for(o=0;o<a[e(538)];o++)r=a[o],t[e(541)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(664)]){var a=Object[e(664)](n);for(o=0;o<a[e(538)];o++)r=a[o],t[e(541)](r)>=0||Object[e(540)][e(636)][e(530)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=Je;(null==t||t>n[e(538)])&&(t=n[e(538)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array[Je(495)](n))return n}(n)||function(n,t){var e=Je,r=null==n?null:e(596)!=typeof Symbol&&n[Symbol.iterator]||n[e(519)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(530)](n))[e(525)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(530)](r))[e(624)])&&(s[e(602)](o.value),s[e(538)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Je;if(n){if(typeof n===e(511))return or(n,t);var r=Object.prototype[e(532)].call(n)[e(627)](8,-1);return r===e(640)&&n[e(569)]&&(r=n[e(569)].name),r===e(512)||r===e(611)?Array[e(506)](n):r===e(584)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(566)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(n,t){for(var e=Je,r=0;r<t[e(538)];r++){var o=t[r];o[e(626)]=o[e(626)]||!1,o.configurable=!0,e(572)in o&&(o[e(536)]=!0),Object[e(508)](n,Qe(o[e(649)]),o)}}function cr(){var n=["154310YDncUF","roughness","cacheHash","key",". Shader cannot compile.",";\n  ","MeshLambertMaterial","info","_patchShader"," - (dot(","clearcoatRoughness","normal","input","find","baseMaterial","return (function() ","csm_DepthAlpha","message","getOwnPropertySymbols","MeshNormalMaterial","material.clearcoat = ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","RawShaderMaterial","console",'{}.constructor("return this")( )',"isAlreadyExtended","bump","ShaderMaterial","default","stateObject","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","csm_ClearcoatRoughness","335587iCoYbB","update","positionRaw","isArray","csm_Bump","#define IS_UNKNOWN;\n","_getPatchMapForMaterial","onBeforeCompile","\n    vec3 totalEmissiveRadiance = ","CustomShaderMaterial does not support RawShaderMaterial","42CoPGZC","Cannot call a class as a function","table","MeshBasicMaterial","from","getOwnPropertyDescriptors","defineProperty","73414GYaIxp","684272wowTXW","string","Map","silent","csm_Roughness","create","while (true) {}","symbol","void main()","@@iterator","MeshPhysicalMaterial","filter","PointsMaterial","replace","error","next","metalness","apply","csm_ClearcoatNormal","toPrimitive","call","type","toString","position","\n    gl_PointSize = ","csm_Metalness","writable","uniforms","length","\n    vec3 objectNormal = ","prototype","indexOf","emissive","MathUtils","gger","MeshToonMaterial","getPrototypeOf","_getMaterialDefine","lastIndexOf","log","trim","__proto__","assign","clearcoatNormal","void main() {","@@toPrimitive must return a primitive value.","keys","csm_PointSize","fragmentShader",", 1.0 );\n  ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","MeshMatcapMaterial","Derived constructors may only return object or undefined","_getCacheHash","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","action","test","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","split","constructor","clearcoat","csm_main_","value","csm_Normal","csm_PositionRaw","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","\n            ","debu","entries","construct","__csm","depthAlpha","\n    gl_FragColor = ","join","Arguments","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","csm_Clearcoat","diffuse","includes","MeshStandardMaterial","getOwnPropertyDescriptor","ShaderChunk","pointSize","is not a constructor","bind","forEach","undefined","711456LogJaX","603264RXXBqc",'". Shader cannot compile.',"get",";\n    ","push","();\n              // #_CSM_#\n          ","\n            \n            void main() {\n          ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","fragColor","36wFSZgu","\n    #include <dithering_fragment>\n    gl_FragColor  = ","exception","vertexShader","Set","substring","object","csm_DiffuseColor","7HfaToH","\n    vec4 csm_internal_positionUnprojected = ","266970ipZFEH","\n    vec3 transformed = ","function","#define IS_VERTEX;\n","counter"," is not available in ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","done","csm_Emissive","enumerable","slice","_generateMaterial","customProgramCacheKey","lights_physical_fragment","MeshPhongMaterial","\n    \n","patchMap",'CSM: Property "',"cacheKey","propertyIsEnumerable","setPrototypeOf","\n    \n            ","concat","Object","Material","this hasn't been initialised - super() hasn't been called",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","sham","Super expression must either be null or a function"];return(cr=function(){return n})()}function sr(n){if(void 0===n)throw new ReferenceError(Je(642));return n}function ur(n,t){var e=Je;return(ur=Object[e(637)]?Object.setPrototypeOf[e(594)]():function(n,t){return n[e(551)]=t,n})(n,t)}function lr(n){var t=Je;return(lr=Object[t(637)]?Object.getPrototypeOf[t(594)]():function(n){var e=t;return n.__proto__||Object[e(546)](n)})(n)}function fr(n){var t=function(){var n=Je;if("undefined"==typeof Reflect||!Reflect[n(579)])return!1;if(Reflect.construct[n(644)])return!1;if(typeof Proxy===n(619))return!0;try{return Boolean[n(540)].valueOf[n(530)](Reflect[n(579)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Je,o=lr(n);if(t){var i=lr(this)[r(569)];e=Reflect[r(579)](o,arguments,i)}else e=o[r(527)](this,arguments);return function(n,t){var e=Je;if(t&&(typeof t===e(613)||typeof t===e(619)))return t;if(void 0!==t)throw new TypeError(e(562));return sr(n)}(this,e)}}Ke(void 0,(function(){for(var n=Je,t=function(){var n,t=Je;try{n=Function(t(661)+t(671)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(670)]||{},r=[n(549),"warn",n(653),n(524),n(609),n(504),"trace"],o=0;o<r[n(538)];o++){var i=Ke.constructor[n(540)].bind(Ke),a=r[o],c=e[a]||i;i[n(551)]=Ke[n(594)](Ke),i[n(532)]=c[n(532)][n(594)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:qe(614),normal:qe(573),roughness:qe(514),metalness:qe(535),emissive:qe(625),ao:"csm_AO",bump:qe(496),clearcoat:qe(586),clearcoatRoughness:qe(679),clearcoatNormal:qe(528),pointSize:qe(557),fragColor:"csm_FragColor",depthAlpha:qe(662),position:"csm_Position",positionRaw:qe(574)},mr=(nr(pr={},""[qe(639)](vr[qe(533)]),"*"),nr(pr,""[qe(639)](vr[qe(494)]),"*"),nr(pr,"".concat(vr[qe(657)]),"*"),nr(pr,""[qe(639)](vr[qe(592)]),[qe(522)]),nr(pr,""[qe(639)](vr[qe(587)]),"*"),nr(pr,"".concat(vr[qe(606)]),"*"),nr(pr,""[qe(639)](vr[qe(542)]),[qe(589),qe(520)]),nr(pr,""[qe(639)](vr[qe(647)]),[qe(589),qe(520)]),nr(pr,""[qe(639)](vr.metalness),["MeshStandardMaterial",qe(520)]),nr(pr,""[qe(639)](vr.ao),[qe(589),qe(520),qe(505),qe(652),qe(631),"MeshToonMaterial"]),nr(pr,""[qe(639)](vr[qe(673)]),[qe(652),qe(561),qe(665),qe(631),"MeshPhysicalMaterial",qe(589),qe(545),"ShadowMaterial"]),nr(pr,""[qe(639)](vr.depthAlpha),["MeshDepthMaterial"]),nr(pr,""[qe(639)](vr.clearcoat),[qe(520)]),nr(pr,""[qe(639)](vr[qe(656)]),[qe(520)]),nr(pr,""[qe(639)](vr[qe(553)]),["MeshPhysicalMaterial"]),pr),gr={"#include <lights_physical_fragment>":D[qe(591)][qe(630)]},_r=(nr(dr={},""[qe(639)](vr[qe(657)]),{"#include <beginnormal_vertex>":qe(539)[qe(639)](vr[qe(657)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),nr(dr,""[qe(639)](vr[qe(533)]),{"#include <begin_vertex>":qe(618).concat(vr[qe(533)],";\n  ")}),nr(dr,""[qe(639)](vr[qe(494)]),{"#include <begin_vertex>":qe(616).concat(vr[qe(494)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),nr(dr,""[qe(639)](vr[qe(592)]),{"gl_PointSize = size;":qe(534)[qe(639)](vr[qe(592)],qe(601))}),nr(dr,"".concat(vr.diffuse),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[qe(639)](vr[qe(587)],qe(651))}),nr(dr,""[qe(639)](vr[qe(606)]),{"#include <dithering_fragment>":qe(608)[qe(639)](vr[qe(606)],qe(651))}),nr(dr,""[qe(639)](vr.emissive),{"vec3 totalEmissiveRadiance = emissive;":qe(500)[qe(639)](vr[qe(542)],qe(601))}),nr(dr,""[qe(639)](vr[qe(647)]),{"#include <roughnessmap_fragment>":qe(605)[qe(639)](vr[qe(647)],";\n    ")}),nr(dr,""[qe(639)](vr.metalness),{"#include <metalnessmap_fragment>":qe(678).concat(vr[qe(526)],qe(601))}),nr(dr,"".concat(vr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(vr.ao,";\n    ")}),nr(dr,""[qe(639)](vr[qe(673)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[qe(639)](vr[qe(673)],qe(655))[qe(639)](vr[qe(673)],qe(643))}),nr(dr,""[qe(639)](vr[qe(581)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(567)[qe(639)](vr[qe(581)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(575)[qe(639)](vr[qe(581)],";\n    ")}),nr(dr,""[qe(639)](vr[qe(570)]),{"material.clearcoat = clearcoat;":qe(666)[qe(639)](vr[qe(570)],";")}),nr(dr,""[qe(639)](vr[qe(656)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[qe(639)](vr[qe(656)],";")}),nr(dr,""[qe(639)](vr[qe(553)]),{"#include <clearcoat_normal_fragment_begin>":qe(667)}),dr),yr=(nr(hr={},""[qe(639)](vr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(585)[qe(639)](vr[qe(533)],qe(559))}),nr(hr,""[qe(639)](vr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[qe(639)](vr[qe(533)],qe(651))}),nr(hr,"".concat(vr[qe(587)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(582).concat(vr.diffuse,";\n  ")}),nr(hr,""[qe(639)](vr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(vr.fragColor,";\n  ")}),hr),xr={clearcoat:[vr[qe(570)],vr[qe(553)],vr[qe(656)]]},br=qe(623),Ir=qe(668),wr=qe(668),Sr=qe(632),Mr=[qe(660),qe(558),qe(610),qe(537),qe(633),qe(635),qe(513)],Rr=function(n,t,e){var r=qe;return n[r(568)](t)[r(583)](e)},Er=function(n,t){var e,r=qe;return new RegExp("\\b"[r(639)]((e=t,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(566)](n)};function Ar(n){return n?n[qe(523)](/\s/g,""):void 0}function Tr(n){return n[qe(523)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=qe;!function(n,t){var e=Je;if(typeof t!==e(619)&&null!==t)throw new TypeError(e(645));n[e(540)]=Object[e(515)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(508)](n,e(540),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=Je,u=n.baseMaterial,l=n[s(558)],f=n.vertexShader,p=n.uniforms,d=n.patchMap,h=n[s(635)],v=n[s(513)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Je(503))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(663)][t(541)](t(593))>=0)return!1}return!0}(u)?(e=u,Object[s(552)](e,m)):e=new u(m),e[s(531)]===s(669))throw new Error(s(501));(function(n,t){var e=qe;Object[e(552)](n,t);var r=Object[e(546)](t);Object[e(578)](Object[e(507)](r))[e(521)]((function(n){var t=e,r=typeof n[1][t(600)]===t(619),o=typeof n[1].set===t(619),i="function"==typeof n[1][t(572)],a=n[0]===t(569);return(r||o||i)&&!a}))[e(595)]((function(t){var r=e;typeof n[t[0]]!==r(619)&&Object[r(508)](n,t[0],t[1])}))})(sr(t=a[s(530)](this)),e),t[s(580)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(543)].generateUUID(),type:e[s(531)],isAlreadyExtended:(r=e[s(499)],o=qe,i=r.toString()[o(550)](),!(0===i[o(612)](i[o(541)]("{")+1,i[o(548)]("}"))[o(550)]()[o(538)])),cacheHash:"",silent:v},t.uniforms=er(er({},t[s(537)]||{}),p||{});var g=t[s(580)],_=g[s(558)],y=g[s(610)],x=t[s(537)];return t[s(580)][s(648)]=t[s(563)](),t[s(628)](_,y,x),t}return e=c,r=[{key:t(493),value:function(){var n=t,e=arguments[n(538)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(537)]||this[n(537)],Object[n(552)](this[n(580)],e);var r=this[n(580)],o=r[n(558)],i=r.vertexShader,a=this[n(537)],c=this._getCacheHash();this[n(580)][n(648)]=c,this[n(628)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(580)].baseMaterial,fragmentShader:this[n(580)][n(558)],vertexShader:this[n(580)][n(610)],uniforms:this[n(537)],silent:this[n(580)][n(513)],patchMap:this.__csm[n(633)],cacheKey:this[n(580)][n(635)]},r=new(this[n(569)])(e);return Object.assign(this,r),r}},{key:t(563),value:function(){var n=t,e=this[n(580)],r=e[n(558)],o=e[n(610)],i=this.uniforms,a=[Ar(r),Ar(o),i][n(521)]((function(n){return void 0!==n}));return a[n(538)]>0?Mn(a,{excludeValues:!0}):this[n(629)]()}},{key:t(628),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(629)]=function(){var n=o;return i[n(580)][n(648)]};var a=function(t){var r=o;try{var a=i[r(547)]();if(n){var c=i[r(654)](Tr(n),t[r(558)],!0);t[r(558)]=a+c}if(e){var s=i[r(654)](Tr(e),t[r(610)]);t[r(610)]=r(620)+s,t[r(610)]=a+t[r(610)]}t.uniforms=er(er({},t[r(537)]),i[r(537)]),i[r(537)]=t[r(537)]}catch(u){console[r(524)](u)}};if(this[o(580)][o(672)]){var c=this[o(499)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(499)]=a;this.needsUpdate=!0}},{key:t(654),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(498)]()),this.__csm[o(633)]);Object.entries(xr)[o(595)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(659)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error(e(634)[e(639)](a,'" is required to use output "')[e(639)](c,e(599)))})),Object[o(578)](gr)[o(595)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(556)](c)[o(595)]((function(t){var e=o;Object[e(556)](c[t])[e(595)]((function(r){var o=e,s=mr[t],u=i[o(580)][o(531)];if("*"===t||Er(n,t)){if(!(!s||Array[o(495)](s)&&s[o(588)](u)||"*"===s))throw new Error("CSM: ".concat(t,o(622))[o(639)](u,o(650)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(571)+this[o(580)].instanceID[o(523)](/-/g,"_"),h=n[o(523)](/void\s+main\s*\(\s*\)/g,"void "[o(639)](d,"()")),v=n[o(588)](o(518)),m=a[o(588)]("// #_CSM_#");return v&&(m&&this[o(580)][o(672)]?(a=a.replace(o(554),o(576)[o(639)](h,o(604))),s=a,u="// #_CSM_#",l=o(576)[o(639)](d,"();\n            // #_CSM_#\n          "),p=s[(f=qe)(548)](u),a=-1===p?s:s[f(612)](0,p)+l+s[f(612)](p+u[f(538)])):a=a[o(523)](o(554),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?wr:Ir,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(639)](br,o(638))[o(639)](h,o(560))[o(639)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(677))[o(639)](r?Sr:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(564))[o(639)](d,o(603)))),a}},{key:t(547),value:function(){var n=t,e=this[n(580)].type;return e?"#define IS_".concat(e.toUpperCase(),";\n"):n(497)}},{key:t(498),value:function(){var n=t;return this[n(580)][n(531)]===n(674)?yr:_r}}],i=Je,r&&ar(e[i(540)],r),o&&ar(e,o),Object[i(508)](e,i(540),{writable:!1}),c}(D[qe(641)]);function Pr(n){function t(n){var e=Je;if("string"==typeof n)return function(n){}.constructor(e(516))[e(527)](e(621));1!==(""+n/n).length||n%20==0?function(){return!0}[e(569)](e(577)+e(544)).call(e(565)):function(){return!1}[e(569)](e(577)+e(544))[e(527)](e(676)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Or;!function(n,t){const e=Or,r=Br();for(;;)try{if(572479===parseInt(e(235))/1+parseInt(e(249))/2*(-parseInt(e(255))/3)+parseInt(e(264))/4+-parseInt(e(241))/5+-parseInt(e(263))/6*(parseInt(e(267))/7)+-parseInt(e(260))/8+parseInt(e(252))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(n,t){const e=Br();return(Or=function(n,t){return e[n-=224]})(n,t)}!function(){Cr(this,(function(){const n=Or,t=new RegExp(n(258)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ur(n(239));t.test(r+n(227))&&e[n(240)](r+"input")?Ur():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(){const n=["call","\n      ","25437708gJwTrs","object","MeshPhysicalMaterial","3Pyvkwr","return (function() ","apply","function *\\( *\\)","counter","7054768vSVTHC","gger","clearcoat","1801362cKxbSG","559556EuJopC","string","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","7pBnndY","setStyle","log","\n\t\t\t","metalness","bind","error","length","info","__proto__","chain","action","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","index","prototype","roughness","primitive","exception","438139jOgTiR","clearcoatRoughness","console","stateObject","init","test","4043965MtevMG","color",'{}.constructor("return this")( )',"constructor","trace","debu","toString","#ff00fc","1682190AznEPC"];return(Br=function(){return n})()}Fr(void 0,(function(){const n=Or;let t;try{t=Function(n(256)+n(243)+");")()}catch(o){t=window}const e=t.console=t[n(237)]||{},r=[n(269),"warn",n(225),n(273),n(234),"table",n(245)];for(let i=0;i<r.length;i++){const t=Fr[n(244)][n(231)][n(272)](Fr),o=r[i],a=e[o]||t;t[n(226)]=Fr.bind(Fr),t[n(247)]=a[n(247)][n(272)](a),e[o]=t}}))();const kr=[zr(253)],jr=nn({__name:zr(230),props:{color:{default:zr(248)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:D[t(254)],metalness:e[t(271)],roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e[t(236)],color:e[t(242)],vertexShader:t(229),fragmentShader:t(270)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(251)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(266)},o=new Dr(r);return ln((()=>{const n=t;o[n(242)][n(268)](e[n(242)]),o.metalness=e[n(271)],o[n(232)]=e[n(232)],o.clearcoat=e[n(262)],o[n(236)]=e[n(236)]})),(n,e)=>{const r=t;return on(),an(r(233),{object:Q(o)},null,8,kr)}}});function Ur(n){function t(n){const e=Or;if(typeof n===e(265))return function(n){}.constructor("while (true) {}")[e(257)](e(259));1!==(""+n/n)[e(224)]||n%20==0?function(){return!0}[e(244)](e(246)+e(261))[e(250)](e(228)):function(){return!1}.constructor(e(246)+e(261))[e(257)](e(238)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Lr();;)try{if(592045===parseInt(e(255))/1*(-parseInt(e(274))/2)+parseInt(e(276))/3*(parseInt(e(258))/4)+-parseInt(e(270))/5*(-parseInt(e(262))/6)+parseInt(e(279))/7*(-parseInt(e(280))/8)+-parseInt(e(266))/9+-parseInt(e(277))/10*(parseInt(e(261))/11)+parseInt(e(252))/12*(parseInt(e(268))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(282)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(){var n=["418248GVZFor","bind","constructor","95326lNhmdl","2024166GRJacC","info","string","gger","2379294hThhEX","call","117UgTsTX","input","5RGrBXM","counter","error","test","48826rrBTNk","while (true) {}","21dsKXRV","110dUKPFK",'{}.constructor("return this")( )',"25879RrrUWL","576KEwzFG","console","apply","length","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","action","1077036EuqtUa","prototype","log","27eHIWCG","stateObject","debu"];return(Lr=function(){return n})()}!function(){Nr(this,(function(){var n=Zr,t=new RegExp(n(284)),e=new RegExp(n(285),"i"),r=Gr("init");t[n(273)](r+"chain")&&e[n(273)](r+n(269))?Gr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(282)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Lr();return(Zr=function(n,t){return e[n-=252]})(n,t)}function Gr(n){function t(n){var e=Zr;if(typeof n===e(264))return function(n){}[e(260)](e(275))[e(282)](e(271));1!==(""+n/n)[e(283)]||n%20==0?function(){return!0}[e(260)](e(257)+e(265))[e(267)](e(287)):function(){return!1}[e(260)](e(257)+e(265))[e(282)](e(256)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Zr;try{n=Function("return (function() "+t(278)+");")()}catch(s){n=window}for(var e=n[t(281)]=n.console||{},r=[t(254),"warn",t(263),t(272),"exception","table","trace"],o=0;o<r[t(283)];o++){var i=Hr[t(260)][t(253)][t(259)](Hr),a=r[o],c=e[a]||i;i.__proto__=Hr[t(259)](Hr),i[t(286)]=c[t(286)].bind(c),e[a]=i}}))();export{Ve as C,jr as _,Qn as a,lt as b,St as c,Dt as d,Ut as e,Kt as f,Ne as g,Re as h,mt as u};

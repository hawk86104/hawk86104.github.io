import{K as e}from"./@tresjs.cys40cwz1765186091469.js";import{l as s}from"./utils.OpqV4D5E1765186091469.js";import{m as t}from"./d3-geo.C51lZA-81765186091469.js";import{ac as o,a as r,a3 as a,G as i,o as n,F as p,W as l,I as c,d as m,g as u,b as d,e as h,h as j,u as f,a9 as y,aa as b,ah as v,m as g}from"./@vue.BxPWGdWw1765186091469.js";import{ao as _,i as T,o as w,bY as x}from"./three.F31Lz30M1765186091469.js";import{c as E,d as C,a as M}from"./three-mesh-bvh.C6x-ZzNZ1765186091469.js";import"./postprocessing.Cxlw7KL91765186091469.js";import"./@vueuse.fp9eMSxR1765186091469.js";import"./@fesjs.CeWk8zHi1765186091469.js";import"./vue-router.-4XCtzxO1765186091469.js";import"./lodash-es.DWe8oqPO1765186091469.js";import"./pinia.3RPCiiJ81765186091469.js";import"./@qlin.y-0Z8WnK1765186091469.js";import"./@babel.BPq7uOAK1765186091469.js";import"./@floating-ui.Bhq4ibgf1765186091469.js";import"./@juggle.Vc7cP4_P1765186091469.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.M2x0XFDu1765186091469.js";import"./object-hash.C6RP0yvX1765186091469.js";import"./@amap.fjyZdsU91765186091469.js";import"./jszip.pEODovjJ1765186091469.js";import"./Resource.DeH33eUb1765186091469.js";import"./useTexture.DU3SbUVy1765186091469.js";const P=["properties","renderOrder"],B=["args"],G={__name:"chinaMapMesh",async setup(e){let m,u;T.prototype.computeBoundsTree=E,T.prototype.disposeBoundsTree=C,w.prototype.raycast=M;const d=t().center([104,37.5]).translate([0,0]),h=([m,u]=o(()=>s("./plugins/simpleGIS/json/china.json","features")),m=await m,u(),m),j={depth:10,bevelEnabled:!1},f=[];h.forEach(e=>{e.geometry.coordinates.forEach(s=>{s.forEach(s=>{const t=new x;for(let e=0;e<s.length;e++){const[o,r]=d(s[e]);0===e&&t.moveTo(o,-r),t.lineTo(o,-r)}f.push({shape:t,properties:e.properties})})})});const y=new _({color:"#3480C4",linewidth:1,linecap:"round"}),b=r();a(()=>{b.value&&b.value.children.forEach(e=>{e.geometry.computeBoundsTree();const s=[e.material,y];e.material=s})});let v=null;(()=>{const e=document.createElement("div");e.className="tooltip",e.style.border="1px solid white",e.style.position="absolute",e.style.color="white",e.style.padding="0px 6px",e.style.whiteSpace="no-wrap",e.style.visibility="hidden",document.body.appendChild(e),v=e})();const g=e=>{e.object.material[0].color.set(16711680),v.innerText=e.object.properties.name,v.style.visibility="visible"},G=e=>{e.eventObject.material[0].color.set(3010559),v.style.visibility="hidden"},$=e=>{v.style.left=`${e.clientX+6}px`,v.style.top=`${e.clientY+6}px`};return(e,s)=>(n(),i("TresGroup",{ref_key:"tgRef",ref:b},[(n(),i(p,null,l(f,(e,t)=>c("TresMesh",{key:`${t}`,properties:e.properties,renderOrder:t,onPointerenter:g,onPointerleave:G,onPointermove:$},[c("TresExtrudeGeometry",{args:[e.shape,j]},null,8,B),s[0]||(s[0]=c("TresMeshBasicMaterial",{color:"#2defff",transparent:!0,opacity:.6},null,-1))],40,P)),64))],512))}},$=m({__name:"chinaMap",setup(s){const t={clearColor:"#201919"},o={enableDamping:!0,dampingFactor:.05};return(s,r)=>{const a=u("TresCanvas");return n(),d(a,g(t,{"window-size":""}),{default:h(()=>[r[0]||(r[0]=c("TresPerspectiveCamera",{position:[0,0,166],fov:75,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),j(f(e),y(b(o)),null,16),(n(),d(v,null,{default:h(()=>[j(G)]),_:1}))]),_:1},16)}}});export{$ as default};

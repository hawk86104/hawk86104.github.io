var t=Object.defineProperty,n=Object.defineProperties,e=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(n,e,o)=>e in n?t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,i=(t,n)=>{for(var e in n||(n={}))r.call(n,e)&&s(t,e,n[e]);if(o)for(var e of o(n))a.call(n,e)&&s(t,e,n[e]);return t},c=(t,o)=>n(t,e(o));import{$ as p,N as u}from"./@tresjs.bNNpPzYW1722507394274.js";import{a6 as l,a0 as f,aT as m,f as g,V as d,B as h,C as v,cl as w}from"./three.Brogx0uK1722507394274.js";import{l as y}from"./utils.CuCN1ddQ1722507394274.js";import{x as b}from"./@fesjs.HUfyfxyE1722507394274.js";import"./index.CtghvfIK1722507394274.js";import{c as x,d as j,a as I}from"./three-mesh-bvh.1z_sibLA1722507394274.js";import{T as S}from"./three-mesh-ui.module.CptYztN01722507394274.js";!function(t,n){const e=V,o=O();for(;;)try{if(638955===-parseInt(e(298))/1*(parseInt(e(326))/2)+parseInt(e(334))/3*(parseInt(e(333))/4)+-parseInt(e(295))/5+-parseInt(e(311))/6+-parseInt(e(342))/7*(parseInt(e(299))/8)+parseInt(e(345))/9+parseInt(e(339))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const C=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(365)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function O(){const t=["__proto__","moveTo","count","onBeforeCompile","get","5409282swZwXx","Vector3","test","table","needsUpdate","offset","toString","#ffffff","getCenter","catch","push","bind","RepeatWrapping","computeBoundsTree","traverse","1646WpNwtb","coordinates","\n\t\t\tattribute float alpha;\n\t\t\tvarying vec3 vPosition;\n\t\t\tvarying float vAlpha;\n\t\t\tvoid main() {\n\t\t\t\tvAlpha = alpha;\n\t\t\t\tvPosition = position;\n\t\t","澳门特别行政区","properties","length","Mesh","8hZsnkJ","1677057tafAGp","exception","uniforms","gger","forEach","17661040llAAqY","boundingBox","replace","7093303EiIrei","fragmentShader","raycast","6547590maTkwx","debu","stateObject","getX","prototype","indexOf","wrapS","attributes","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","vertexShader","groups","features","function *\\( *\\)","log","size","counter","position","info","console","apply","name","MeshStandardMaterial","Vector2","香港特别行政区","computeBoundingBox",'{}.constructor("return this")( )',"disposeBoundsTree","while (true) {}","DoubleSide","trace","set","update","action","constructor","112435HTKIpC","wrapT","void main() {","1258EBGrbU","8lgeYyr","center","warn","repeat","return (function() ","geometry","setXY"];return(O=function(){return t})()}!function(){C(this,(function(){const t=V,n=new RegExp(t(358)),e=new RegExp(t(353),"i"),o=Z("init");n[t(313)](o+"chain")&&e[t(313)](o+"input")?Z():o("0")}))()}();const B=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(365)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();B(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function(t(303)+t(371)+");")()}catch(e){n=window}return n}(),e=n[t(364)]=n[t(364)]||{},o=[t(359),t(301),t(363),"error",t(335),t(314),t(375)];for(let r=0;r<o[t(331)];r++){const n=B[t(294)].prototype[t(322)](B),a=o[r],s=e[a]||n;n[t(306)]=B[t(322)](B),n[t(317)]=s[t(317)].bind(s),e[a]=n}}))();const E=async t=>{const n=V,e=await u(["./plugins/digitalMapBlock/images/side.png"]);e[n(351)]=e[n(296)]=l[n(323)],e.repeat[n(376)](1,1);let o=new(l[n(367)])({color:t,map:e,opacity:1,transparent:!0,side:l[n(374)]});return((t,n,e)=>{const o=V;t[o(309)]=t=>{const r=o;t[r(336)]=c(i({},t[r(336)]),{uColor1:{value:new v(n)},uColor2:{value:new v(e)}}),t[r(355)]=t[r(355)][r(341)](r(297),r(328)),t[r(343)]=t[r(343)][r(341)](r(297),"\n\t\t\tvarying vec3 vPosition;\n\t\t\tvarying float vAlpha;\n\t\t\tuniform vec3 uColor1;\n\t\t\tuniform vec3 uColor2;\n\t\t\n\t\t\tvoid main() {\n\t\t"),t[r(343)]=t[r(343)].replace("#include <opaque_fragment>","\n\t\t#ifdef OPAQUE\n\t\tdiffuseColor.a = 1.0;\n\t\t#endif\n\t\t\n\t\t#ifdef USE_TRANSMISSION\n\t\tdiffuseColor.a *= transmissionAlpha + 0.1;\n\t\t#endif\n\t\tvec3 gradient = mix(uColor1, uColor2, vPosition.z/1.2);\n\t\t\n\t\toutgoingLight = outgoingLight*gradient;\n\t\t\n\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a  );\n\t\t")}})(o,n(318),"#666666"),o},A=async(t,n,e)=>{const o=V,r=await u(["./plugins/digitalMapBlock/images/grayscaleMap.jpg"]);r[o(351)]=r[o(296)]=l[o(323)],r[o(316)][o(376)](0,.066),r[o(302)][o(376)](1,1-.066),r[o(315)]=!0;const a=await u(["./plugins/digitalMapBlock/images/topNormal.jpg"]);return a.wrapS=a[o(296)]=f,a[o(316)][o(376)](0,.066),a[o(302)][o(376)](1,1-.066),a[o(315)]=!0,new m({color:400967,map:r,transparent:!0,normalMap:a,normalScale:new(l[o(368)])(e,e),opacity:1,roughness:t,metalness:n,side:l[o(374)]})};function N(t){const n=V;var e=new(l[n(312)]),o=new g;o.expandByObject(t);var r=new d;o.getSize(r);var a=new d;o[n(319)](a);let s={box3:o,boxSize:r,center:a,size:null};if(t[n(304)]){t[n(304)][n(370)](),t[n(304)].computeBoundingSphere();const{max:o,min:r}=t[n(304)][n(340)];e.x=o.x-r.x,e.y=o.y-r.y,e.z=o.z-r.z,s[n(360)]=e}return s}const P=(t,n,e,o,r)=>{const a=V,s=t[a(352)][a(362)],i=t[a(352)].uv,c=t[a(356)][0][a(308)];for(let p=0;p<c;p++){const t=(s[a(348)](p)-o)/n,c=(s.getY(p)-r)/e;i[a(305)](p,t,c)}i[a(315)]=!0,t.computeVertexNormals()},z=(t,n,e)=>{const o=V,r=new w;for(let a=0;a<t[o(331)];a++){const[n,s]=e(t[a]);0===a&&r[o(307)](n,-s),r.lineTo(n,-s)}return{shape:r,properties:n.properties,pName:n[o(330)].name}},T=(t,n,e)=>{const o=V,r=[];for(let a=0;a<t[o(331)];a++){const[n,o]=e(t[a]);r.push(n,-o,0)}return{points:new Float32Array(r),pName:n}},_=(t,n)=>{const e=[],o=[],r=[];return t.forEach((t=>{const a=V;if(!t[a(330)][a(366)])return;t[a(304)][a(327)].forEach((r=>{const s=a;r[s(331)]>3?e[s(321)](z(r,t,n)):r.forEach((o=>{e[s(321)](z(o,t,n))})),r[s(331)]>3?o[s(321)](T(r,t[s(330)][s(366)],n)):r[s(338)]((e=>{const r=s;o.push(T(e,t[r(330)][r(366)],n))}))}));let s=t[a(330)].centroid||t[a(330)][a(300)]||[0,0];s=n(s),s=[s[0],-s[1],0],r[a(321)]({pName:t[a(330)][a(366)],position:s})})),{areaList:e,linesList:o,textList:r}},M=()=>{const t=V;h.prototype[t(324)]=x,h[t(349)][t(372)]=j,l[t(332)][t(349)][t(344)]=I};function L(t,n){const e=V;let o=[];return t[e(325)]((t=>{const r=e;t.pName===n&&o[r(321)](t)})),o}const k=async()=>{const t=V,n=[],e=await y("./plugins/simpleGIS/json/china.json",t(357));return n[t(321)]({adcode:1e5,text:"中国",name:"中国",center:[104,37.5],centroid:[104,37.5],childrenNum:56,parent:{adcode:0},value:-1}),e.forEach(((e,o)=>{const r=t;e[r(330)].name&&"台湾省"!==e[r(330)][r(366)]&&e[r(330)][r(366)]!==r(369)&&e[r(330)][r(366)]!==r(329)&&n.push(c(i({},e[r(330)]),{text:e.properties[r(366)],value:o}))})),{areaJson:e,provinceInfoList:n}},R=(t,n,e)=>{const o=V;let r=t.toString(),a=new RegExp(n+"=([^&]*)"),s=r[o(341)](a,n+"="+e);return s==r&&(s=s+(s[o(350)]("?")>0?"&":"?")+n+"="+e),s},U=t=>new Promise(((n,e)=>{const o=V;b(t,{},{method:o(310)}).then((t=>{n(t)}))[o(320)]((t=>{console.error(t),e(t)}))}));function V(t,n){const e=O();return(V=function(t,n){return e[t-=293]})(t,n)}const Y=()=>{const{onLoop:t}=p();t((()=>{S[V(377)]()}))};function Z(t){function n(t){const e=V;if("string"==typeof t)return function(t){}[e(294)](e(373))[e(365)](e(361));1!==(""+t/t)[e(331)]||t%20==0?function(){return!0}[e(294)](e(346)+e(337))[e(354)](e(293)):function(){return!1}[e(294)](e(346)+e(337))[e(365)](e(347)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Y as I,A as a,E as b,N as c,L as f,k as g,M as i,U as l,_ as m,R as r,P as u};

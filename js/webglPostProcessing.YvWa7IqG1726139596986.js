import{i as t}from"./ice-utils.iSQKHwrD1726139596986.js";import{_ as n,s as e}from"./gl-matrix.HGBoRDfp1726139596986.js";import{P as o}from"./tweakpane.yHWGBmom1726139596986.js";import{d as r,r as i,q as a,o as c,E as s,L as u,u as f}from"./@vue.JNsx1iN61726139596986.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=A;!function(t,n){const e=A,o=g();for(;;)try{if(277246===-parseInt(e(295))/1*(parseInt(e(278))/2)+parseInt(e(319))/3+parseInt(e(308))/4*(parseInt(e(357))/5)+parseInt(e(314))/6+-parseInt(e(299))/7+parseInt(e(313))/8*(parseInt(e(282))/9)+-parseInt(e(324))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=A,n=new RegExp(t(280)),e=new RegExp(t(267),"i"),o=b("init");n[t(337)](o+"chain")&&e[t(337)](o+"input")?b():o("0")}))()}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(339)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["2064nmMOyx","1265046fmAeeG","bindTexture","error","TEXTURE_2D","querySelector","485367EeSHXi","warn","table","none","uModel","4111340PNcXhl","prototype","return (function() ","createBuffer","ARRAY_BUFFER","console","COLOR_ATTACHMENT0","offset_left_bottom","uniformMatrix4fv","logo-texture","mat4","inline","drawElements","test","createTexture","apply","bindBuffer","offset_left_top","img","texImage2D","offset_right_bottom","enable","info","vertexAttribPointer","TRIANGLES","bindFramebuffer","SRC_ALPHA","clear","stateObject","ortho","color","uView","string","5Mmotem","bind","TEXTURE_WRAP_S","src","change","useProgram","counter","RGBA","while (true) {}","call","addBinding","ONE_MINUS_SRC_ALPHA","enableVertexAttribArray","uProjection","BLEND","TEXTURE_WRAP_T","mixParam","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addBlade","log","TEXTURE_MIN_FILTER","ELEMENT_ARRAY_BUFFER","canvas","FRAMEBUFFER","clearColor","toString","gger","create","4swHpTZ","constructor","function *\\( *\\)","width","15723WrpKFA","texParameteri","uniform1f","innerHeight","innerWidth","debu","FLOAT","hidden","getUniformLocation","COLOR_BUFFER_BIT","offset_right_top","slider","exception","171940TeNlPd","action","UNSIGNED_BYTE","#canvaswebgl","923454EaNkJO","STATIC_DRAW","trace","getElementById","lookAt","NEAREST","translate","height","CLAMP_TO_EDGE","1363304LisSBs","TEXTURE_MAG_FILTER","是否后处理","blendFunc","length"];return(g=function(){return t})()}x(void 0,(function(){const t=A;let n;try{n=Function(t(326)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(329)]=n.console||{},o=[t(269),t(320),t(346),t(316),t(294),t(321),t(301)];for(let i=0;i<o[t(312)];i++){const n=x[t(279)][t(325)][t(358)](x),r=o[i],a=e[r]||n;n.__proto__=x[t(358)](x),n[t(275)]=a.toString.bind(a),e[r]=n}}))();const p={id:"canvaswebgl"},E=[_(360)];function A(t,n){const e=g();return(A=function(t,n){return e[t-=260]})(t,n)}const T=r({__name:"webglPostProcessing",setup(r){const d=_;let x,g,A,T,b,R,y,h,v,P,F,w,B;const C=1,I=.71,S=.76,L=new o({title:"参数"}),U=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L[d(268)]({view:d(293),label:"颜色",min:0,max:1,value:.5}).on(d(361),(t=>{const n=d;O(),g[n(284)](w,t.value)}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L[d(260)](U,d(289),{label:d(310)}),L[d(260)](U,d(292),{picker:d(335),x:{min:0,max:1},y:{min:0,max:1}}).on(d(361),(t=>{const n=d;N[0]=U.offset_right_top.x,N[1]=U[n(292)].y,O()})),L.addBinding(U,"offset_right_bottom",{picker:d(335),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(361),(t=>{const n=d;N[5]=U[n(344)].x,N[6]=U.offset_right_bottom.y,O()})),L[d(260)](U,d(331),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(361),(t=>{const n=d;N[10]=U[n(331)].x,N[11]=U.offset_left_bottom.y,O()})),L[d(260)](U,d(341),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=d;N[15]=U[n(341)].x,N[16]=U[n(341)].y,O()})),a((()=>{D()}));const D=function(){const n=d;x=document[n(318)](n(298)),x.width=window[n(286)],x.height=window[n(285)],g=x.getContext("webgl"),g&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=j(e,o),A=t(g,l,m),v=g.getUniformLocation(A,n(263)),P=g.getUniformLocation(A,n(355)),F=g.getUniformLocation(A,n(323)),B=Y(document[n(302)](n(333)))}(),O(),g[n(345)](g[n(264)]),g[n(311)](g[n(350)],g[n(261)]),M())};function M(){const t=d;g[t(349)](g[t(273)],y),g[t(274)](C,I,S,1),g.clear(g[t(291)]),function(){const t=d;g[t(362)](A),g.bindBuffer(g[t(328)],T);const e=n[t(334)][t(277)]();n[t(334)][t(353)](e,0,x[t(281)],x[t(306)],0,.1,100),g[t(332)](v,!1,e);const o=n[t(334)][t(277)]();n[t(334)][t(303)](o,[0,0,1],[0,0,0],[0,1,0]),g[t(332)](P,!1,o),G(B,600,600),G(B,400,400)}(),g[t(349)](g[t(273)],null),U.hidden&&(g[t(351)](g[t(291)]),g[t(274)](0,0,1,1),g.bindBuffer(g.ARRAY_BUFFER,b),g.useProgram(R),g.bindTexture(g[t(317)],h)),g[t(336)](g.TRIANGLES,6,g[t(297)],0),requestAnimationFrame(M)}function G(t,o,r){const i=d;let a=n[i(334)][i(277)]();n[i(334)][i(305)](a,a,[o,r,0]),e(a,a,[250,250,0]),g[i(332)](F,!1,a),g[i(315)](g[i(317)],t),g[i(336)](g[i(348)],6,g[i(297)],0)}function O(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);b=j(N,e),R=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=g[n(290)](R,n(266)),g[n(290)](R,n(354)),function(){const t=d;h=Y(x),y=g.createFramebuffer(),g.bindFramebuffer(g[t(273)],y),g.framebufferTexture2D(g[t(273)],g[t(330)],g[t(317)],h,0),g[t(349)](g[t(273)],null)}()}function Y(t){const n=d,e=g[n(338)]();return g[n(315)](g[n(317)],e),t instanceof HTMLImageElement?g.texImage2D(g[n(317)],0,g[n(364)],g.RGBA,g.UNSIGNED_BYTE,t):g[n(343)](g[n(317)],0,g[n(364)],t.width,t.height,0,g.RGBA,g[n(297)],null),g[n(283)](g[n(317)],g[n(270)],g[n(304)]),g.texParameteri(g[n(317)],g[n(309)],g[n(304)]),g.texParameteri(g[n(317)],g[n(359)],g[n(307)]),g[n(283)](g[n(317)],g[n(265)],g[n(307)]),e}function j(t,n){const e=d,o=g[e(327)]();g[e(340)](g.ARRAY_BUFFER,o),g.bufferData(g[e(328)],t,g.STATIC_DRAW);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array.BYTES_PER_ELEMENT;g[e(347)](0,3,g[e(288)],!1,r,0),g[e(262)](0),g[e(347)](1,2,g[e(288)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),g[e(262)](1);const i=g[e(327)]();return g[e(340)](g[e(271)],i),g.bufferData(g[e(271)],n,g[e(300)]),g.bindBuffer(g[e(328)],null),o}return(t,n)=>{const e=d;return c(),s(e(272),p,[u(e(342),{id:e(333),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(322)}},null,8,E)])}}});function b(t){function n(t){const e=A;if(typeof t===e(356))return function(t){}[e(279)](e(365))[e(339)](e(363));1!==(""+t/t)[e(312)]||t%20==0?function(){return!0}[e(279)](e(287)+e(276))[e(366)](e(296)):function(){return!1}[e(279)](e(287)+e(276)).apply(e(352)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as default};

import{a5 as t,bG as n,C as o}from"./three.erXpfL-r1718698100638.js";import{N as r}from"./@tresjs.aawOCoPx1718698100638.js";import{d as e,b as a,a3 as c,w as s,o as u,D as i,J as f,aj as l,ak as p}from"./@vue.CpOXM7bB1718698100638.js";function d(){const t=["toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10qOuIsW","gger","__proto__","7zRORxo",'{}.constructor("return this")( )',"console","exception","chain","prototype","beginnormal_vertex","warn","\n          ","\n       varying vec2 vUv;\n\t\t\t \t","12FGkOKo","log","4209414WongmD","\n       void main() {\n\t\t\t\t\t","lights_pars_begin","return (function() ","call","apply","68082LUdDAI","ShaderChunk","counter","common","debu","18906943opcayM","15921SUvdYK","1290748lFijEn","shadowmap_vertex","test","trace","error","while (true) {}","bind","project_vertex","12jCtpna","begin_vertex","\n      \t","constructor","info","worldpos_vertex","2781288tcaIUc","\n\n           gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);    \n           vUv = uv;\n       }","action","table","bsdfs","373882QaRdmb","defaultnormal_vertex","length","shadowmap_pars_vertex","\n\n\tvoid main() {\n\t\t\tvec4 col = texture2D(uTexture, vUv * repeatTime);\n\t\t\tcol.rgb = mix( uColor , col.rgb ,0.5);\n\t\t\t\n\t\t\tfloat alpha = 1.0;\n\t\t\tfloat d = length(vUv - vec2(0.5));\n\t\t\tif(d > 0.35) {\n\t\t\t\t\talpha = 1.0 - smoothsteps( clamp( (d - 0.35) / (fEdge-0.2), 0.0, 1.0) );\n\t\t\t}\n\n\t\t vec3 addShadow = mix( uShadowColor , col.rgb ,getShadowMask());\n\n\t\t\tgl_FragColor = vec4(addShadow, alpha);  \n\t}","6250ZlrKLq","\n\t ","shadowmap_pars_fragment"];return(d=function(){return t})()}!function(t,n){const o=g,r=d();for(;;)try{if(606514===parseInt(o(388))/1+parseInt(o(414))/2*(parseInt(o(380))/3)+parseInt(o(395))/4*(-parseInt(o(424))/5)+parseInt(o(382))/6+parseInt(o(427))/7*(parseInt(o(409))/8)+parseInt(o(394))/9*(parseInt(o(419))/10)+parseInt(o(393))/11*(-parseInt(o(403))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[g(387)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();function g(t,n){const o=d();return(g=function(t,n){return o[t-=371]})(t,n)}!function(){h(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(423),"i"),r=_("init");n[t(397)](r+t(374))&&o[t(397)](r+"input")?_():r("0")}))()}();const m=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[g(387)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();m(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(385)+t(371)+");")()}catch(o){n=window}return n}(),o=n[t(372)]=n.console||{},r=[t(381),t(377),t(407),t(399),t(373),t(412),t(398)];for(let e=0;e<r.length;e++){const n=m[t(406)][t(375)][t(401)](m),a=r[e],c=o[a]||n;n[t(426)]=m[t(401)](m),n[t(422)]=c[t(422)].bind(c),o[a]=n}}))();const v=()=>{const o=g;return o(379)+t[o(389)][o(391)]+o(405)+n[o(413)]+o(405)+n[o(417)]+o(383)+t[o(389)][o(376)]+o(378)+t[o(389)][o(415)]+o(378)+t[o(389)][o(404)]+o(378)+t[o(389)][o(402)]+o(378)+t[o(389)][o(408)]+"\n          "+t[o(389)][o(396)]+o(410)},w=()=>{const n=g;return"\n\tvarying vec2 vUv;\n\tuniform sampler2D uTexture;\n\tuniform vec3 uShadowColor;\n\tuniform vec3 uColor;\n\tuniform float fEdge;\n\t// ShaderMaterial 下的 纹理参数重复无效 要在着色器中增加\n\tfloat repeatTime = 100.0;\n\n\tfloat smoothsteps(float t) {\n\t\t\treturn t * t * (3.0 - 2.0 * t);\n\t}\n\n\t "+t[n(389)][n(391)]+n(420)+t[n(389)].packing+n(420)+t[n(389)][n(413)]+n(420)+t[n(389)][n(384)]+n(420)+t[n(389)][n(421)]+n(420)+t[n(389)].shadowmask_pars_fragment+n(418)};function _(t){function n(t){const o=g;if("string"==typeof t)return function(t){}.constructor(o(400)).apply(o(390));1!==(""+t/t)[o(416)]||t%20==0?function(){return!0}.constructor(o(392)+o(425))[o(386)](o(411)):function(){return!1}[o(406)](o(392)+o(425)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const b=x;function x(t,n){const o=S();return(x=function(t,n){return o[t-=147]})(t,n)}!function(t,n){const o=x,r=S();for(;;)try{if(659670===parseInt(o(158))/1*(-parseInt(o(195))/2)+parseInt(o(165))/3+parseInt(o(188))/4*(-parseInt(o(172))/5)+parseInt(o(151))/6+parseInt(o(164))/7+parseInt(o(153))/8+-parseInt(o(161))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=x,n=new RegExp(t(198)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=U("init");n[t(173)](r+t(162))&&o[t(173)](r+t(155))?U():r("0")}))()}();const y=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[x(166)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();function S(){const t=["__proto__","2651874bYBmzI","string","9668376mfdxhJ","uniforms","input","table","tmRef","1ZEZbEN","toString","constructor","325890UCbdun","chain","call","1099917IzpqFQ","126654EmgaMG","apply","Color","uColor","RepeatWrapping","TresMesh","info","90vpPqdy","test","UniformsLib","console","action","while (true) {}","exception","TresPlaneGeometry","debu","DoubleSide","uShadowColor","value","edge","#990","shadowColor","log","161508KjktGX","error",'{}.constructor("return this")( )',"bind","wrapS","color","merge","854418GGnHnX","return (function() ","lights","function *\\( *\\)","gger","UniformsUtils","length","counter"];return(S=function(){return t})()}y(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(196)+t(190)+");")()}catch(o){n=window}return n}(),o=n[t(175)]=n[t(175)]||{},r=[t(187),"warn",t(171),t(189),t(178),t(156),"trace"];for(let e=0;e<r[t(148)];e++){const n=y[t(160)].prototype[t(191)](y),a=r[e],c=o[a]||n;n[t(150)]=y[t(191)](y),n[t(159)]=c[t(159)].bind(c),o[a]=n}}))();const C=["rotation-x"],j=["args"],E=e({__name:"whiteFloorMesh",props:{size:{default:[20,20]},color:{default:b(185)},shadowColor:{default:"#999"},edge:{default:.35}},async setup(n){const e=b;let d,h;const g=n,m=a(),{map:_}=([d,h]=c((()=>r({map:"./plugins/floor/image/whiteFloor.jpg"}))),d=await d,h(),d);_[e(192)]=_.wrapT=t[e(169)];const x={uniforms:t[e(147)][e(194)]([t[e(174)][e(197)],{uTexture:{type:"t",value:_},uColor:{value:new o(g.color)},uShadowColor:{value:new o(g[e(186)])},fEdge:{type:"f",value:g.edge}}]),side:t[e(181)],vertexShader:v(),fragmentShader:w(),lights:!0,transparent:!0};return s((()=>g[e(184)]),(t=>{const n=e;x.uniforms.fEdge[n(183)]=t})),s((()=>g.color),(n=>{const o=e;x.uniforms[o(168)][o(183)]=new(t[o(167)])(g[o(193)])})),s((()=>g[e(186)]),(n=>{const o=e;x[o(154)][o(182)].value=new(t[o(167)])(g[o(186)])})),(t,n)=>{const o=e;return u(),i(o(170),{ref_key:o(157),ref:m,"rotation-x":-Math.PI/2},[f(o(179),{args:g.size},null,8,j),f("TresShaderMaterial",l(p(x)),null,16)],8,C)}}});function U(t){function n(t){const o=x;if(typeof t===o(152))return function(t){}[o(160)](o(177))[o(166)](o(149));1!==(""+t/t)[o(148)]||t%20==0?function(){return!0}[o(160)](o(180)+o(199))[o(163)](o(176)):function(){return!1}[o(160)](o(180)+o(199))[o(166)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{E as _};

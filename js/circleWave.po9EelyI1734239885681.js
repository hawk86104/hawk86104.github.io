import{e as n,b as t,U as e}from"./@tresjs.qWeugQU61734239885681.js";import{P as o}from"./tweakpane.yHWGBmom1734239885681.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.iOmDxXkZ1734239885681.js";import{_ as a,a3 as c,C as i}from"./three.NPKhDGTA1734239885681.js";import{d as s,b as u,a6 as l,r as f,a3 as p,o as v,D as d,J as m,aj as g,ak as h,e as w,f as k,g as S,j as y,u as _,al as b,m as x}from"./@vue.-THQH3GC1734239885681.js";import"./@vueuse.GyFlY0FM1734239885681.js";import"./all.three.6Oy-txmR1734239885681.js";import"./oimophysics.x0jH7fze1734239885681.js";const C=M;!function(n,t){const e=M,o=T();for(;;)try{if(174072===parseInt(e(165))/1+-parseInt(e(146))/2+parseInt(e(167))/3+-parseInt(e(138))/4*(parseInt(e(161))/5)+parseInt(e(142))/6+-parseInt(e(180))/7+parseInt(e(172))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(160)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=M,t=new RegExp(n(168)),e=new RegExp(n(186),"i"),o=R(n(149));t[n(156)](o+n(135))&&e[n(156)](o+n(154))?R():o("0")}))()}();const j=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(160)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(n,t){const e=T();return(M=function(n,t){return e[n-=132]})(n,t)}function T(){const n=["warn","apply","970AlLejw","DoubleSide","call","counter","259815Fekaeg","uTime","464283xQPSpe","function *\\( *\\)","\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n","uScanColor","TresShaderMaterial","1717576YmcRTU",'{}.constructor("return this")( )',"TresMesh","color","colorDark","wrapT","wrapS","exception","467929WkivNd","\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n","table","gger","scale","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#000000","uniforms","string","console","tmRef","debu","chain","value","AdditiveBlending","5508KKZyqj","shaderCircleWave","while (true) {}","trace","808848jrzTIm","material","stateObject","Color","512048mnBMpZ","error","length","init","info","uScanColorDark","constructor","speed","input","rotation-x","test","RepeatWrapping","#ffffff"];return(T=function(){return n})()}j(void 0,(function(){const n=M,t=function(){const n=M;let t;try{t=Function("return (function() "+n(173)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(132)]||{},o=["log",n(159),n(150),n(147),n(179),n(182),n(141)];for(let r=0;r<o.length;r++){const t=j.constructor.prototype.bind(j),a=o[r],c=e[a]||t;t.__proto__=j.bind(j),t.toString=c[n(185)].bind(c),e[a]=t}}))();const D=[C(155),C(184)],P=s({__name:C(139),props:{color:{default:C(158)},colorDark:{default:C(187)},speed:{default:1},scale:{default:2}},async setup(e){const o=C;let r,s;const w=e,k=u(),{onLoop:S}=n();S((({delta:n})=>{const t=M;k[t(136)]&&(k[t(136)][t(143)][t(188)][t(166)][t(136)]+=n*w[t(153)])}));const y=([r,s]=l((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,s(),r);y[o(178)]=a[o(157)],y[o(177)]=c;const _=f({side:a[o(162)],transparent:!0,blending:a[o(137)],flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:y},uScanColor:{type:"v3",value:new(a[o(145)])(w[o(175)])},uScanColorDark:{type:"v3",value:new i(w[o(176)])}},vertexShader:o(181),fragmentShader:o(169)});return p((()=>{const n=o;k.value&&(k.value[n(143)][n(188)][n(170)].value=new(a[n(145)])(w[n(175)]),k[n(136)][n(143)][n(188)][n(151)][n(136)]=new(a[n(145)])(w[n(176)]))})),(n,t)=>{const e=o;return v(),d(e(174),{ref_key:e(133),ref:k,"rotation-x":-Math.PI/2,scale:n[e(184)]},[t[0]||(t[0]=m("TresPlaneGeometry",{args:[1,1]},null,-1)),m(e(171),g(h(_)),null,16)],8,D)}}});function R(n){function t(n){const e=M;if(typeof n===e(189))return function(n){}[e(152)](e(140))[e(160)](e(164));1!==(""+n/n)[e(148)]||n%20==0?function(){return!0}[e(152)]("debu"+e(183))[e(163)]("action"):function(){return!1}[e(152)](e(134)+"gger")[e(160)](e(144)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const W=O;!function(n,t){const e=O,o=Z();for(;;)try{if(804901===parseInt(e(511))/1*(-parseInt(e(522))/2)+parseInt(e(527))/3+parseInt(e(533))/4*(-parseInt(e(534))/5)+-parseInt(e(497))/6+parseInt(e(539))/7+parseInt(e(506))/8*(-parseInt(e(544))/9)+parseInt(e(512))/10*(parseInt(e(542))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[O(537)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){U(this,(function(){const n=O,t=new RegExp(n(524)),e=new RegExp(n(513),"i"),o=z(n(498));t[n(504)](o+n(543))&&e[n(504)](o+n(525))?z():o("0")}))()}();const A=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[O(537)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function O(n,t){const e=Z();return(O=function(n,t){return e[n-=497]})(n,t)}A(void 0,(function(){const n=O,t=function(){const n=O;let t;try{t=Function(n(502)+n(531)+");")()}catch(e){t=window}return t}(),e=t[n(530)]=t[n(530)]||{},o=[n(509),n(508),n(535),n(507),n(516),n(499),"trace"];for(let r=0;r<o[n(514)];r++){const t=A.constructor.prototype[n(518)](A),a=o[r],c=e[a]||t;t[n(545)]=A[n(518)](A),t[n(546)]=c[n(546)].bind(c),e[a]=t}}))();const F=s({__name:W(538),setup(n){const t=W,a=f({reflectivity:.1,showGridHelper:!1,scale:1}),c=f({color:"#ffffff",colorDark:"#000000",speed:1,scale:2}),i=new o({title:t(519),expanded:!0});return i.addBinding(c,"color",{label:t(541)}),i[t(500)](c,t(528),{label:"圈渐变色"}),i[t(500)](c,t(515),{label:"速度",min:.1,max:5,step:.1}),i[t(500)](c,"scale",{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const i=t,s=w(i(510));return v(),k(s,{clearColor:i(520),"window-size":""},{default:S((()=>[o[0]||(o[0]=m(i(540),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),y(_(e),{enableDamping:""}),o[1]||(o[1]=m(i(505),{intensity:6},null,-1)),(v(),k(b,null,{default:S((()=>[y(P,g(h(c)),null,16)])),_:1})),(v(),k(b,null,{default:S((()=>[y(r,x({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function z(n){function t(n){const e=O;if(typeof n===e(517))return function(n){}[e(521)](e(532))[e(537)](e(526));1!==(""+n/n).length||n%20==0?function(){return!0}[e(521)](e(529)+e(536))[e(503)](e(523)):function(){return!1}.constructor(e(529)+e(536))[e(537)](e(501)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Z(){const n=["error","warn","log","TresCanvas","1277ScUotC","10xdljXx","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","speed","exception","string","bind","shaderCircleWave地面","#201919","constructor","802JbdWUg","action","function *\\( *\\)","input","counter","2923032FnbTdM","colorDark","debu","console",'{}.constructor("return this")( )',"while (true) {}","5044484lCLjsA","5lAkRJJ","info","gger","apply","circleWave","6443297CTMsFy","TresPerspectiveCamera","圈颜色","26243349FLUDCq","chain","27hSoEjx","__proto__","toString","9414012cynrjS","init","table","addBinding","stateObject","return (function() ","call","test","TresAmbientLight","355928oOKxXO"];return(Z=function(){return n})()}export{F as default};

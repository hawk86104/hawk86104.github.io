import{_ as t,C as e,a0 as n}from"./three.sXv6UbbL1740621336114.js";import{e as r,h as a,o,f as s}from"./@tresjs.Td0X-dew1740621336114.js";import{a as i}from"./index.e5z5kfXG1740621336114.js";import"./index.3ntFFZFi1740621336114.js";import{z as l}from"./three-custom-shader-material.zFJQzgaY1740621336114.js";import{p as u}from"./gl-noise.BrVtymbx1740621336114.js";import{d as c,b as p,a2 as f,w as g,o as h,H as m,N as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as C}from"./@vue.NRI7TcgI1740621336114.js";import{P as S}from"./tweakpane.yDiyAAkA1740621336114.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.pHTeV6QF1740621336114.js";import"./@vueuse.cgJUSr_21740621336114.js";import"./three-stdlib.HmEywukp1740621336114.js";import"./@pmndrs.S4rKZ8vm1740621336114.js";import"./object-hash.xF-1It9Z1740621336114.js";import"./@amap.xyvkHt4K1740621336114.js";import"./jszip.nUGSSS5e1740621336114.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.wtVaFNy81740621336114.js";import"./all.three.Cp1-e4fr1740621336114.js";import"./oimophysics.x0jH7fze1740621336114.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.unSayqLH1740621336114.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.iQabQ3bw1740621336114.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.KTtg4sDX1740621336114.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.P7qIoii51740621336114.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.NKVT-iMX1740621336114.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.qIXS0IMz1740621336114.js";const z=G;!function(t,e){const n=G,r=P();for(;;)try{if(838934===parseInt(n(173))/1+-parseInt(n(199))/2+-parseInt(n(185))/3*(-parseInt(n(198))/4)+-parseInt(n(166))/5+parseInt(n(209))/6+-parseInt(n(188))/7+-parseInt(n(171))/8)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(159)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=G,e=new RegExp(t(178)),n=new RegExp(t(203),"i"),r=R(t(177));e[t(194)](r+t(211))&&n[t(194)](r+t(215))?R():r("0")}))()}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(159)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();F(void 0,(function(){const t=G;let e;try{e=Function(t(162)+t(202)+");")()}catch(a){e=window}const n=e[t(193)]=e[t(193)]||{},r=[t(206),t(196),t(175),"error",t(174),"table",t(157)];for(let o=0;o<r[t(207)];o++){const e=F[t(182)].prototype.bind(F),a=r[o],s=n[a]||e;e[t(168)]=F[t(187)](F),e.toString=s[t(163)][t(187)](s),n[a]=e}}))();const H=["rotation-x"],B=[z(172)];function P(){const t=["brightness",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","baseMaterial","log","length","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","7857990Lkjwgr","Color","chain","#52a7f7","convertLinearToSRGB","waterColor","input","trace","MeshPhysicalMaterial","apply","string","dispose","return (function() ","toString","material","uHeight","2583190vmVnRX","value","__proto__","action","while (true) {}","9236752tQRWFu","args","1051505FeRPfU","exception","info","height","init","function *\\( *\\)","DoubleSide","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","fragment","constructor","waterHighlight","counter","1896RACAPC","vertex","bind","4015767jFbsLo","flatShading","debu","TresMesh","uTime","console","test","stateObject","warn","gger","6144kbMeOZ","496150BxCztj","Flatshading"];return(P=function(){return t})()}function G(t,e){const n=P();return(G=function(t,e){return n[t-=157]})(t,e)}const O=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(212)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[z(158)]}},setup(o){const s=z,i=o,c=p(null),b={vertex:s(208),fragment:s(180)},w={uTime:{value:0},waterColor:{value:new(t[s(210)])(i.waterColor).convertLinearToSRGB()},waterHighlight:{value:new(t[s(210)])(i[s(183)])[s(213)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(201)]},uHeight:{value:i[s(176)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w[e(192)][e(167)]=-t/5})),f((()=>{const n=s;i[n(176)]&&(w[n(165)][n(167)]=i[n(176)]),i[n(214)]&&(w.waterColor[n(167)]=new(t[n(210)])(i[n(214)])[n(213)]()),i[n(183)]&&(w[n(183)].value=new e(i[n(183)])[n(213)]()),i[n(201)]&&(w[n(201)].value=i[n(201)])})),g((()=>i.Flatshading),(t=>{const e=s;c[e(167)][e(164)].needsUpdate=!0})),g((()=>i.baseMaterial),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:u(b.vertex),fragmentShader:b.fragment,uniforms:w,flatShading:i[n(200)],side:t[n(179)],roughness:.2,metalness:.1,silent:!0});c[n(167)][n(164)][n(161)](),c[n(167)].material=r})),(e,r)=>{const o=s;return h(),m(o(191),{ref_key:"tmRef",ref:c,"rotation-x":-Math.PI/2},[v("TresBoxGeometry",{args:[5,5,e[o(176)],64,64,1]},null,8,B),d(_(a),{baseMaterial:t[o(158)],vertexShader:_(u)(b[o(186)]),fragmentShader:b[o(181)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[o(205),"vertexShader","fragmentShader","side",o(189)])],8,H)}}});function R(t){function e(t){const n=G;if(typeof t===n(160))return function(t){}[n(182)](n(170)).apply(n(184));1!==(""+t/t).length||t%20==0?function(){return!0}[n(182)](n(190)+n(197))[n(204)](n(169)):function(){return!1}[n(182)](n(190)+n(197))[n(159)](n(195)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=L;!function(t,e){const n=L,r=D();for(;;)try{if(282828===-parseInt(n(254))/1+parseInt(n(253))/2+-parseInt(n(288))/3*(-parseInt(n(272))/4)+-parseInt(n(289))/5*(parseInt(n(299))/6)+-parseInt(n(309))/7*(parseInt(n(280))/8)+-parseInt(n(258))/9*(-parseInt(n(307))/10)+parseInt(n(255))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(260)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){k(this,(function(){const t=L,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(276));e.test(r+t(266))&&n[t(292)](r+t(303))?E():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(260)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function D(){const t=["TresAmbientLight","__proto__","customWater","label","MeshStandardMaterial","204231HrieFZ","18385eVKIrb","error","target","test","baseMaterial","constructor","list",'{}.constructor("return this")( )',"addBinding","warn","762xbFISR","MeshPhysicalMaterial","Flatshading","#627179","input","MeshToonMaterial","height","MeshNormalMaterial","90mhVyBP","action","1385524uKLSkE","call","bind","pos-y.jpg","info","counter","MeshDepthMaterial","1024798TlYDpB","533554lHRFCY","4880645CTTLNl","length","console","252891lQcJtx","pos-z.jpg","apply","change","neg-x.jpg","trace","gger","MeshBasicMaterial","chain","while (true) {}","brightness","neg-z.jpg","MeshPhongMaterial","#52a7f7","16NQBESt","ACESFilmicToneMapping","return (function() ","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","init","stateObject","MeshLambertMaterial","水体颜色","8qQyRVc","waterHighlight","addBlade"];return(D=function(){return t})()}function L(t,e){const n=D();return(L=function(t,e){return n[t-=252]})(t,e)}N(void 0,(function(){const t=L;let e;try{e=Function(t(274)+t(296)+");")()}catch(a){e=window}const n=e[t(257)]=e[t(257)]||{},r=["log",t(298),t(313),t(290),"exception","table",t(263)];for(let o=0;o<r[t(256)];o++){const e=N[t(294)].prototype.bind(N),a=r[o],s=n[a]||e;e[t(284)]=N[t(311)](N),e.toString=s.toString[t(311)](s),n[a]=e}}))();const A=c({__name:W(285),setup(e){const n=W,r=b({alpha:!0,toneMapping:t[n(273)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(302),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(271),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(300)}),c=new S;return c[n(297)](u,n(305),{label:"高度",min:.1,max:5,step:.1}),c[n(297)](u,"waterColor",{label:n(279)}),c[n(297)](u,n(281),{label:"浪头颜色"}),c[n(297)](u,n(268),{label:"亮度",min:0,max:1,step:.01}),c[n(297)](u,n(301),{label:"Flatshading"}),c[n(282)]({view:n(295),label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:n(265),value:n(265)},{text:n(306),value:"MeshNormalMaterial"},{text:n(287),value:"MeshStandardMaterial"},{text:n(270),value:n(270)},{text:n(304),value:"MeshToonMaterial"},{text:n(278),value:n(278)},{text:n(252),value:n(252)}],value:u[n(293)]}),c.on(n(261),(t=>{const e=n;"材质"===t[e(291)][e(286)]&&(u[e(293)]=t.value)})),(t,e)=>{const c=n;return h(),w(_(s),x(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),M(j(a)),null,16),e[1]||(e[1]=v(c(283),{intensity:.5},null,-1)),e[2]||(e[2]=v("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),d(O,M(j(u)),null,16),d(_(T),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:["pos-x.jpg",c(262),c(312),"neg-y.jpg",c(259),c(269)],path:c(275)})])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=L;if("string"==typeof t)return function(t){}[n(294)](n(267))[n(260)](n(314));1!==(""+t/t)[n(256)]||t%20==0?function(){return!0}[n(294)]("debu"+n(264))[n(310)](n(308)):function(){return!1}[n(294)]("debu"+n(264)).apply(n(277)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{A as default};

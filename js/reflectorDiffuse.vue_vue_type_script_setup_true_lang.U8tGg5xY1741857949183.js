import{c8 as t,a3 as n,C as e,V as r}from"./three.Gi_-4zeu1741857949183.js";import{a as o}from"./@tresjs.8SAr0PX_1741857949183.js";import{R as c}from"./all.three.G9BYwICw1741857949183.js";import{d as i,b as a,a3 as s,a2 as u,o as l,H as f,N as p,m,u as d}from"./@vue.NRI7TcgI1741857949183.js";!function(t,n){const e=g,r=x();for(;;)try{if(270164===parseInt(e(371))/1+-parseInt(e(395))/2*(parseInt(e(365))/3)+-parseInt(e(370))/4+-parseInt(e(379))/5*(parseInt(e(362))/6)+-parseInt(e(378))/7+parseInt(e(373))/8+-parseInt(e(364))/9*(-parseInt(e(375))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(382)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=g,n=new RegExp(t(369)),e=new RegExp(t(400),"i"),r=y(t(383));n[t(357)](r+"chain")&&e[t(357)](r+t(388))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(382)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(t,n){const e=x();return(g=function(t,n){return e[t-=357]})(t,n)}function x(){const t=["\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","88947kzEutB","594540GdlhBG","void main() {","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","#include <emissivemap_fragment>","function *\\( *\\)","1141876GifScm","311995WXbzVS","stateObject","3093984PYlpMS","debu","650VIoTDh","bind","table","1307418nOylNf","1095hblXdr","error","gger","apply","init","log","vertexShader","replace","#include <project_vertex>","input","constructor","call","counter","console","exception","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","2NldQpr","trace","warn","__proto__","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"test","toString","prototype","info","fragmentShader","10974ZSChSC"];return(x=function(){return t})()}h(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function("return (function() "+t(401)+");")()}catch(e){n=window}return n}(),e=n[t(392)]=n[t(392)]||{},r=[t(384),t(397),t(360),t(380),t(393),t(377),t(396)];for(let o=0;o<r.length;o++){const n=h[t(389)][t(359)][t(376)](h),c=r[o],i=e[c]||n;n[t(398)]=h[t(376)](h),n[t(358)]=i[t(358)].bind(i),e[c]=n}}))();function y(t){function n(t){const e=g;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[e(382)](e(391));1!==(""+t/t).length||t%20==0?function(){return!0}[e(389)](e(374)+e(381))[e(390)](e(399)):function(){return!1}[e(389)](e(374)+e(381)).apply(e(372)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=_;function _(t,n){const e=M();return(_=function(t,n){return e[t-=110]})(t,n)}!function(t,n){const e=_,r=M();for(;;)try{if(832352===-parseInt(e(140))/1*(-parseInt(e(136))/2)+-parseInt(e(160))/3+parseInt(e(142))/4*(-parseInt(e(120))/5)+-parseInt(e(123))/6*(parseInt(e(154))/7)+parseInt(e(147))/8+parseInt(e(124))/9+parseInt(e(145))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(146)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=_,n=new RegExp(t(122)),e=new RegExp(t(141),"i"),r=z(t(152));n[t(157)](r+"chain")&&e.test(r+t(118))?z():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(146)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function M(){const t=["reflectMap","TresGroup","add","primitive","debu","return (function() ","constructor","value","error","2xxGKAE","call","onBeforeCompile","color","544877JIQaSV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","548MdczQR","TresMesh","bind","15971470wkKwMq","apply","6269472ZmxlwI","channel","tmRef","#ffffff","set","init","reflectorDiffuse","9831661lTMWnb","tmsmRef","__proto__","test","table","rotation-x","1806588vTkgxZ","wrapT","uniforms","stateObject","prototype","attributes","log","exception","warn","showGridHelper","gger","input","length","43910mrvLEb","console","function *\\( *\\)","6fKKDqv","10048473QJLtQR","textureMatrix","counter"];return(M=function(){return t})()}I(void 0,(function(){const t=_,n=function(){const t=_;let n;try{n=Function(t(132)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(121)]=n[t(121)]||{},r=[t(113),t(115),"info",t(135),t(114),t(158),"trace"];for(let o=0;o<r[t(119)];o++){const n=I[t(133)][t(111)][t(144)](I),c=r[o],i=e[c]||n;n[t(156)]=I[t(144)](I),n.toString=i.toString[t(144)](i),e[c]=n}}))();const C=[b(159)],S=["object","visible"],j=i({__name:b(153),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(150)}},async setup(i){const v=b;let h,x;const y=i,_=new t(9.5,10),w=a(),I=a(),M=a(),j=new c,z={mirror:{value:y.mirror},mixStrength:{value:y.mixStrength}},E=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var T=0;T<3;T++)E[T].wrapS=n,E[T][v(161)]=n,E[T].repeat[v(151)](16,16);const R={color:new e("#444"),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=v;t[n(162)][n(127)]=j.renderTargetUniform,t[n(162)][n(125)]=j.textureMatrixUniform,t[n(162)]=Object.assign(t[n(162)],z),(t=>{const n=g;t[n(385)]=t[n(385)][n(386)](n(366),n(394)),t.vertexShader=t[n(385)][n(386)](n(387),n(367))})(t),(t=>{const n=g;t[n(361)]=t[n(361)][n(386)](n(366),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.fragmentShader=t[n(361)][n(386)](n(368),n(363))})(t)};return u((()=>{const t=v;w[t(134)]&&(w.value[t(112)].uv1=w.value.attributes.uv),M[t(134)]&&(M.value.aoMap[t(148)]=1,M[t(134)][t(138)]=k),I[t(134)]&&(I[t(134)][t(129)](j),I[t(134)].onBeforeRender=(t,n,e)=>{j.update(t,n,e)}),y[t(139)]&&M[t(134)]&&(M[t(134)][t(139)]=new e(y[t(139)]))})),(t,n)=>{const e=v;return l(),f(e(128),null,[p(e(143),{ref_key:e(149),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:"tpgRef",ref:w,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:e(155),ref:M},R),null,16)],8,C),p(e(130),{object:d(_),visible:t[e(116)]},null,8,S)])}}});function z(t){function n(t){const e=_;if("string"==typeof t)return function(t){}[e(133)]("while (true) {}")[e(146)](e(126));1!==(""+t/t)[e(119)]||t%20==0?function(){return!0}[e(133)](e(131)+e(117))[e(137)]("action"):function(){return!1}[e(133)](e(131)+"gger").apply(e(110)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

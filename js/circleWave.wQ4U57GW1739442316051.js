import{e as n,a as t,o as e}from"./@tresjs.4XV_x0mI1739442316051.js";import{P as o}from"./tweakpane.yDiyAAkA1739442316051.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.yYVd8oDx1739442316051.js";import{a3 as a,a0 as c,_ as s,C as i}from"./three.OosFxi571739442316051.js";import{d as u,b as l,a3 as f,r as p,a2 as v,o as d,H as m,N as g,aj as h,ak as w,e as k,f as y,g as _,j as S,u as I,al as b,m as C}from"./@vue.NRI7TcgI1739442316051.js";import"./@vueuse.u4XqlOuT1739442316051.js";import"./all.three.RcJo9D5E1739442316051.js";import"./oimophysics.x0jH7fze1739442316051.js";const x=j;!function(n,t){const e=j,o=W();for(;;)try{if(995824===parseInt(e(462))/1+-parseInt(e(452))/2+-parseInt(e(471))/3+-parseInt(e(453))/4*(-parseInt(e(488))/5)+parseInt(e(490))/6*(-parseInt(e(460))/7)+parseInt(e(458))/8+-parseInt(e(443))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(468)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function j(n,t){const e=W();return(j=function(n,t){return e[n-=443]})(n,t)}!function(){M(this,(function(){const n=j,t=new RegExp(n(448)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=R(n(450));t[n(480)](o+n(473))&&e[n(480)](o+n(487))?R():o("0")}))()}();const T=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(468)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();T(void 0,(function(){const n=j;let t;try{t=Function(n(469)+n(484)+");")()}catch(r){t=window}const e=t[n(465)]=t[n(465)]||{},o=["log",n(446),"info","error",n(455),n(463),n(461)];for(let a=0;a<o[n(482)];a++){const t=T[n(475)].prototype[n(479)](T),r=o[a],c=e[r]||t;t[n(478)]=T.bind(T),t[n(485)]=c.toString[n(479)](c),e[r]=t}}))();const P=["rotation-x",x(470)],D=u({__name:x(464),props:{color:{default:x(474)},colorDark:{default:"#000000"},speed:{default:1},scale:{default:2}},async setup(e){const o=x;let r,u;const k=e,y=l(),{onLoop:_}=n();_((({delta:n})=>{const t=j;y[t(486)]&&(y[t(486)][t(493)][t(477)][t(459)][t(486)]+=n*k[t(456)])}));const S=([r,u]=f((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,u(),r);S[o(444)]=a,S[o(491)]=a;const I=p({side:c,transparent:!0,blending:s[o(467)],flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:S},uScanColor:{type:"v3",value:new i(k.color)},uScanColorDark:{type:"v3",value:new i(k[o(466)])}},vertexShader:o(447),fragmentShader:"\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n"});return v((()=>{const n=o;y[n(486)]&&(y[n(486)][n(493)][n(477)].uScanColor.value=new(s[n(476)])(k[n(483)]),y.value[n(493)][n(477)].uScanColorDark[n(486)]=new i(k[n(466)]))})),(n,t)=>{const e=o;return d(),m(e(492),{ref_key:"tmRef",ref:y,"rotation-x":-Math.PI/2,scale:n.scale},[t[0]||(t[0]=g(e(454),{args:[1,1]},null,-1)),g(e(494),h(w(I)),null,16)],8,P)}}});function R(n){function t(n){const e=j;if(typeof n===e(451))return function(n){}[e(475)](e(489))[e(468)]("counter");1!==(""+n/n)[e(482)]||n%20==0?function(){return!0}.constructor(e(445)+e(472))[e(449)](e(457)):function(){return!1}[e(475)]("debugger")[e(468)](e(481)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function W(){const n=["wrapS","debu","warn","\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n","function *\\( *\\)","call","init","string","2161730saqhLg","4arlxFR","TresPlaneGeometry","exception","speed","action","11926904ylEohC","uTime","221431qNyMVk","trace","1739680MTmVBr","table","shaderCircleWave","console","colorDark","AdditiveBlending","apply","return (function() ","scale","5716659HhgPrr","gger","chain","#ffffff","constructor","Color","uniforms","__proto__","bind","test","stateObject","length","color",'{}.constructor("return this")( )',"toString","value","input","4445620hUIlUi","while (true) {}","18NPFAGG","wrapT","TresMesh","material","TresShaderMaterial","382734eOTQRW"];return(W=function(){return n})()}function O(){const n=["prototype","29843YAgUkb","counter","circleWave","bind","stateObject","constructor","圈颜色","color","1210136YkyOrD","function *\\( *\\)","圈渐变色","addBinding","input","scale","6616Ctfqrx","apply","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2076PwqeBF","TresPerspectiveCamera","TresCanvas",'{}.constructor("return this")( )',"#000000","init","11723796mpXFzO","debu","exception","warn","length","__proto__","chain","26JkAHXo","15JUWGCl","shaderCircleWave地面","toString","colorDark","276138zfmOpt","1545333LbaiaD","speed","error","test","gger","724338jlIRws","11487dqCogt","trace","log","info","while (true) {}","table","console","return (function() ","10mbYNUk"];return(O=function(){return n})()}const U=F;!function(n,t){const e=F,o=O();for(;;)try{if(823256===parseInt(e(259))/1+parseInt(e(306))/2*(-parseInt(e(258))/3)+-parseInt(e(283))/4+parseInt(e(254))/5*(parseInt(e(264))/6)+parseInt(e(265))/7*(-parseInt(e(289))/8)+-parseInt(e(299))/9*(-parseInt(e(273))/10)+parseInt(e(275))/11*(parseInt(e(293))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const A=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[F(290)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){A(this,(function(){const n=F,t=new RegExp(n(284)),e=new RegExp(n(292),"i"),o=B(n(298));t[n(262)](o+n(305))&&e[n(262)](o+n(287))?B():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function F(n,t){const e=O();return(F=function(n,t){return e[n-=254]})(n,t)}z(void 0,(function(){const n=F,t=function(){const n=F;let t;try{t=Function(n(272)+n(296)+");")()}catch(e){t=window}return t}(),e=t[n(271)]=t.console||{},o=[n(267),n(302),n(268),n(261),n(301),n(270),n(266)];for(let r=0;r<o[n(303)];r++){const t=z[n(280)][n(274)].bind(z),a=o[r],c=e[a]||t;t[n(304)]=z.bind(z),t[n(256)]=c[n(256)][n(278)](c),e[a]=t}}))();const q=u({__name:U(277),setup(n){const t=U,a=p({reflectivity:.1,showGridHelper:!1,scale:1}),c=p({color:"#ffffff",colorDark:t(297),speed:1,scale:2}),s=new o({title:t(255),expanded:!0});return s[t(286)](c,t(282),{label:t(281)}),s[t(286)](c,t(257),{label:t(285)}),s[t(286)](c,t(260),{label:"速度",min:.1,max:5,step:.1}),s.addBinding(c,t(288),{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const s=t,i=k(s(295));return d(),y(i,{clearColor:"#201919","window-size":""},{default:_((()=>[o[0]||(o[0]=g(s(294),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),S(I(e),{enableDamping:""}),o[1]||(o[1]=g("TresAmbientLight",{intensity:6},null,-1)),(d(),y(b,null,{default:_((()=>[S(D,h(w(c)),null,16)])),_:1})),(d(),y(b,null,{default:_((()=>[S(r,C({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function B(n){function t(n){const e=F;if("string"==typeof n)return function(n){}[e(280)](e(269)).apply(e(276));1!==(""+n/n)[e(303)]||n%20==0?function(){return!0}[e(280)](e(300)+e(263))[e(291)]("action"):function(){return!1}[e(280)](e(300)+e(263))[e(290)](e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{q as default};

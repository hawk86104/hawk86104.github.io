import{m as e,e as o,a}from"./@tresjs.P1mAtqbp1751940377790.js";import{_ as s,l as t}from"./three-tile.DelvvRsc1751940377790.js";import{T as r}from"./@tweenjs.ULy8-5Ku1751940377790.js";import{d as n,b as l,w as i,G as p,o as m,F as u,I as c,j as f,u as v,r as g,h as j,f as d,ak as y,al as _,m as h}from"./@vue.Mugdq9o81751940377790.js";import{c as T,a as w,i as b}from"./informationDiv.Bixs0tO41751940377790.js";import{V as D}from"./three.hm_8tMpN1751940377790.js";import"./postprocessing.CEHaRbZY1751940377790.js";import"./@vueuse.CQVzHMcd1751940377790.js";/* empty css                                                                                    */import"./@fesjs.cfEpT9k-1751940377790.js";import"./vue-router.CzxS5LOa1751940377790.js";import"./lodash-es.C7pWAXPe1751940377790.js";import"./@qlin.q6OWdsQV1751940377790.js";import"./pinia.1FknHjjr1751940377790.js";import"./@babel.BPq7uOAK1751940377790.js";import"./@floating-ui.BFjFSAYt1751940377790.js";import"./@juggle.CcBCnTIR1751940377790.js";const x=n({__name:"flyTo",props:{map:{}},setup(a,{expose:s}){const t=a,{camera:n,controls:l}=e();let i=[];const{onBeforeLoop:p}=o();return p((()=>{i&&i[0]?.update()})),s({flyToGeo:(e,o)=>{const a=e=>t.map.localToWorld(t.map.geo2pos(e));((e,o)=>{l.value&&l.value.target.copy(o);const a=n.value.position;i[0]=new r(a).to(e).start()})(a(e),a(o))},goToGeo:(e,o)=>{const a=t.map.localToWorld(t.map.geo2pos(o)),s=t.map.localToWorld(t.map.geo2pos(e));n.value.position.copy(s),l.value.target.copy(a),l.value.dispatchEvent({type:"change"})}}),(e,o)=>null}}),k=["object"],G=n({__name:"mapBoxShow",setup(o){const a=new s({imgSource:[new t.GDSource({style:"6"}),new t.GDSource({style:"8"})],lon0:90,minLevel:2,maxLevel:20});a.rotateX(-Math.PI/2);const r=new D(110,30,0),n=new D(110,0,1e4),g=a.localToWorld(a.geo2pos(r)),j=a.localToWorld(a.geo2pos(n)),d=l(),{camera:y,controls:_,scene:h,renderer:b}=e();y.value&&y.value.position.copy(j),i((()=>_.value),(e=>{e&&(e.target.copy(g),T(e,y.value,h.value))})),i((()=>d.value),(e=>{e&&e.target.position.copy(g)}));const G=l();return i((()=>G.value),(e=>{if(e){const o=new D(118.724693,32.00741,9.655599),a=new D(118.724419,32.010354,0);setTimeout((()=>{e.flyToGeo(o,a)}),500)}})),w(y.value,b.value.domElement,a),(e,o)=>(m(),p(u,null,[c("TresDirectionalLight",{ref_key:"tdLight",ref:d,position:[0,2e3,1e3],intensity:1},null,512),c("primitive",{object:v(a)},null,8,k),f(x,{map:v(a),ref_key:"flyToRef",ref:G},null,8,["map"])],64))}}),L=n({__name:"threeTileEx",setup(e){const o=g({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=g({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,minDistance:.1,maxDistance:3e4,maxPolarAngle:1.2,dampingFactor:.035,keyPanSpeed:5});return(e,t)=>{const r=j("TresCanvas");return m(),p(u,null,[f(r,h(o,{"window-size":""}),{default:d((()=>[t[0]||(t[0]=c("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),f(v(a),y(_(s)),null,16),t[1]||(t[1]=c("TresAmbientLight",{intensity:1},null,-1)),f(G)])),_:1},16),f(b)],64)}}});export{L as default};

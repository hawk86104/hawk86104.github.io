import{m as t,e as n,j as e,o as r,J as o}from"./@tresjs.NxYvETXi1743066865732.js";import{_ as s}from"./index.oodJtDWK1743066865732.js";import{_ as i,V as c,cb as u}from"./three.qSkR4_5R1743066865732.js";import{P as a}from"./tweakpane.ivGeiIdz1743066865732.js";import{I as l,C as p,N as f,c as h,d as g,a as d}from"./three-mesh-bvh.cqCwxsrV1743066865732.js";import{d as m,a3 as y,b as w,a2 as b,o as j,H as I,N as v,u as _,F as x,r as M,e as T,j as S,g as z,m as C,f as H,al as A}from"./@vue.L-brCdZe1743066865732.js";import"./postprocessing.ncQBP5me1743066865732.js";import"./@vueuse.2gpu5LGS1743066865732.js";import"./utils.cS9qh6Ui1743066865732.js";import"./@fesjs.ZOctjJCV1743066865732.js";import"./vue-router.s-CF-R2-1743066865732.js";import"./lodash-es.pklfUAS51743066865732.js";import"./@qlin.o0hjOMCg1743066865732.js";import"./pinia.xxHB-xrp1743066865732.js";import"./@floating-ui.HzHndBae1743066865732.js";import"./@juggle.4EyLec-41743066865732.js";import"./default.vue_vue_type_script_setup_true_lang.FMitKSny1743066865732.js";import"./three-mesh-ui.module.KxHX-Mw71743066865732.js";!function(t,n){const e=Z,r=B();for(;;)try{if(975629===parseInt(e(323))/1*(-parseInt(e(306))/2)+-parseInt(e(291))/3*(parseInt(e(336))/4)+parseInt(e(319))/5+-parseInt(e(295))/6+-parseInt(e(292))/7*(-parseInt(e(301))/8)+-parseInt(e(317))/9*(parseInt(e(327))/10)+parseInt(e(326))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const k=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){k(this,(function(){const t=Z,n=new RegExp(t(288)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(286));n[t(309)](r+"chain")&&e[t(309)](r+"input")?E():r("0")}))()}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[Z(335)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function Z(t,n){const e=B();return Z=function(t,n){return e[t-=286]},Z(t,n)}function B(){const t=["gger","477558uCpRHD","bind","innerWidth","pointerType","constructor","warn","184HwEmWv","console","pointerup","enabled","pointermove","214FfcMKM","toString","__proto__","test","clientX","addEventListener","pointerdown","trace","button","info","action","16956vIQpzl","prototype","3734545ykxMnn","string","error","length","3031JUHHBM","exception","table","1167122cBHCpu","340SLICsJ","innerHeight","while (true) {}","touch","value","Raycaster","log","clientY","apply","68980zJaTGj","counter","init","debu","function *\\( *\\)",'{}.constructor("return this")( )',"firstHitOnly","201VZTkgW","531391EvAXIC","call"];return(B=function(){return t})()}R(void 0,(function(){const t=Z,n=function(){const t=Z;let n;try{n=Function("return (function() "+t(289)+");")()}catch(e){n=window}return n}(),e=n[t(302)]=n[t(302)]||{},r=[t(333),t(300),t(315),t(321),t(324),t(325),t(313)];for(let o=0;o<r[t(322)];o++){const n=R[t(299)][t(318)].bind(R),s=r[o],i=e[s]||n;n[t(308)]=R[t(296)](R),n.toString=i[t(307)][t(296)](i),e[s]=n}}))();function E(t){function n(t){const e=Z;if(typeof t===e(320))return function(t){}[e(299)](e(329))[e(335)](e(337));1!==(""+t/t).length||t%20==0?function(){return!0}[e(299)](e(287)+e(294))[e(293)](e(316)):function(){return!1}[e(299)](e(287)+e(294))[e(335)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function O(){const t=["action","constructor","498928MqFKiW","stateObject","click","normal","getX","fill","attributes","__proto__","Matrix4","input","intersectObject","trace","gger","713804nlELmt","点击按钮","brushMesh","scale","7hoxrbt","instance","set","debu","getZ","30030WRvjcC","call","targetMesh","test","count","material","computeBoundsTree","intersectsSphere","Vector3","prototype","bind","DynamicDrawUsage","MeshStandardMaterial","disposeBoundsTree","setAttribute","index","BufferGeometry","Sphere","toString","BufferAttribute","#023249","init","containsPoint","intersectsBox","Mesh","return (function() ","matrixWorld","生成模型","getY","color","366540SjeJLA","setFromCamera","setY","length","radius","needsUpdate","value","visible","TresMesh","position","console","geometry","error","8UOnNDC","copy","function *\\( *\\)",'{}.constructor("return this")( )',"601227potljv","model","applyMatrix4","3262491pTXhHd","25975xlvDBR","controls","apply","table","log","TresMeshStandardMaterial","point","info","setUsage","center","firstHitOnly"];return(O=function(){return t})()}const F=P;!function(t,n){const e=P,r=O();for(;;)try{if(124991===parseInt(e(199))/1*(parseInt(e(191))/2)+parseInt(e(195))/3+parseInt(e(139))/4+parseInt(e(148))/5+parseInt(e(178))/6*(parseInt(e(143))/7)+-parseInt(e(212))/8+-parseInt(e(198))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const L=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[P(201)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){L(this,(function(){const t=P,n=new RegExp(t(193)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=J(t(169));n.test(r+"chain")&&e[t(151)](r+t(135))?J():r("0")}))()}();const U=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[P(201)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();U(void 0,(function(){const t=P,n=function(){const t=P;let n;try{n=Function(t(173)+t(194)+");")()}catch(e){n=window}return n}(),e=n[t(188)]=n[t(188)]||{},r=[t(203),"warn",t(206),t(190),"exception",t(202),t(137)];for(let o=0;o<r[t(181)];o++){const n=U[t(211)][t(157)][t(158)](U),s=r[o],i=e[s]||n;n[t(133)]=U[t(158)](U),n.toString=i[t(166)][t(158)](i),e[s]=n}}))();const X=[F(189),F(153)],D=[F(189)];function P(t,n){const e=O();return P=function(t,n){return e[t-=132]},P(t,n)}const W=m({__name:F(196),props:{controls:{}},async setup(r){const o=F;let s,m;const M=r;(()=>{const t=P;i[t(164)].prototype[t(154)]=h,i[t(164)][t(157)][t(161)]=g,i[t(172)].prototype.raycast=d})();const T=([s,m]=y((()=>e(u,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,m(),s),S=new(i[o(160)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),z=new Uint8Array(3*T.attributes[o(187)][o(152)]);z[o(217)](255);const C=new(i[o(167)])(z,3,!0);C[o(207)](i[o(159)]),T[o(162)](o(177),C);const H=w(null),A=w(null),k=w(!1),R=w(-1),B=w(.2),E=new c,{camera:O,raycaster:L}=t(),U=15/255,W=78/255,J=85/255;let $=null;b((()=>{const t=o;H[t(184)]&&(console.log("targetMesh.value init",H[t(184)]),H[t(184)][t(189)][t(154)](),$=T.boundsTree,((t,n,e,r,o,s)=>{const c=Z;window[c(311)](c(305),(e=>{const r=c;t.x=e[r(310)]/window[r(297)]*2-1,t.y=-e[r(334)]/window[r(328)]*2+1,n[r(331)]=!0})),window.addEventListener(c(312),(u=>{const a=c;t.x=u.clientX/window[a(297)]*2-1,t.y=-u[a(334)]/window[a(328)]*2+1,r[a(331)]=u[a(314)];const l=new(i[a(332)]);l.setFromCamera(t,e[a(331)]),l[a(290)]=!0;const p=l.intersectObject(o[a(331)],!0);n.value=!0,s[a(304)]=0===p[a(322)]}),!0),window[c(311)](c(303),(t=>{const e=c;r[e(331)]=-1,t[e(298)]===e(330)&&(n[e(331)]=!1)}),!0)})(E,k,O,R,H,M.controls[t(144)]))}));const{onLoop:K}=n();K((()=>{const t=o,n=T[t(163)];if(A[t(184)])if(M[t(200)].instance.active||!k[t(184)])A[t(184)].visible=!1;else{A.value[t(142)].setScalar(B[t(184)]),L[t(184)][t(179)](E,O[t(184)]),L[t(184)][t(209)]=!0;const e=L[t(184)][t(136)](H[t(184)],!0);if(e.length){A[t(184)][t(187)].copy(e[0][t(205)]),M.controls[t(144)].enabled=!1,A[t(184)][t(185)]=!0;const r=new(i[t(134)]);r.copy(H[t(184)][t(174)]).invert();const o=new(i[t(165)]);o[t(208)][t(192)](A[t(184)][t(187)])[t(197)](r),o[t(182)]=100*B[t(184)];const s=[],c=new(i[t(156)]);if($?.shapecast({intersectsBounds:n=>{const e=t,r=o[e(171)](n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(c[e(145)](0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(170)](c))return l;return p}return r?l:f},intersectsTriangle:(n,e,r)=>{if(r||n[t(155)](o)){const t=3*e;s.push(t,t+1,t+2)}return!1}}),0===R[t(184)]||2===R[t(184)]){let e=1,r=1,o=1;0===R[t(184)]&&(e=U,r=W,o=J);for(let i=0,c=s[t(181)];i<c;i++){const c=n.getX(s[i]);C.setX(c,e),C[t(180)](c,r),C.setZ(c,o)}C[t(183)]=!0}}else A[t(184)].visible=!1,M[t(200)][t(144)].enabled=!0}}));const Y=(new a).addButton({title:o(140),label:o(175)}),V=new(i[o(164)]);return Y.on(o(214),(()=>{const t=o,n=[],e=[];for(let o=0;o<C[t(152)];o++)C[t(216)](o)===U&&C[t(176)](o)===W&&C[t(147)](o)===J&&(n.push(T[t(132)].position[t(216)](o),T[t(132)].position[t(176)](o),T[t(132)].position[t(147)](o)),e.push(T.attributes[t(215)][t(216)](o),T[t(132)][t(215)][t(176)](o),T[t(132)][t(215)][t(147)](o)));const r=new Float32Array(n);V[t(162)](t(187),new(i[t(167)])(r,3)),V[t(162)](t(215),new(i[t(167)])(r,3))})),(t,n)=>{const e=o;return j(),I(x,null,[v(e(186),{ref_key:e(150),ref:H,geometry:_(T),scale:.005,material:_(S)},null,8,X),v("TresMesh",{ref_key:e(141),ref:A,visible:!1},n[0]||(n[0]=[v("TresSphereGeometry",{args:[1,40,40]},null,-1),v(e(204),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),v(e(186),{geometry:_(V),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[v(e(204),{color:e(168),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,D)],64)}}});function J(t){function n(t){const e=P;if("string"==typeof t)return function(t){}[e(211)]("while (true) {}").apply("counter");1!==(""+t/t)[e(181)]||t%20==0?function(){return!0}[e(211)](e(146)+e(138))[e(149)](e(210)):function(){return!1}.constructor(e(146)+e(138))[e(201)](e(213)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const $=V;!function(t,n){const e=V,r=G();for(;;)try{if(360270===-parseInt(e(446))/1*(parseInt(e(456))/2)+parseInt(e(429))/3*(-parseInt(e(412))/4)+parseInt(e(428))/5+-parseInt(e(433))/6+-parseInt(e(439))/7*(parseInt(e(441))/8)+parseInt(e(457))/9*(-parseInt(e(411))/10)+parseInt(e(420))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const K=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[V(422)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){K(this,(function(){const t=V,n=new RegExp(t(449)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Q(t(438));n.test(r+t(415))&&e[t(417)](r+t(419))?Q():r("0")}))()}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function V(t,n){const e=G();return V=function(t,n){return e[t-=409]},V(t,n)}function G(){const t=["constructor","collectTriangles","counter","pos-y.jpg","22zXStYU","18PiUhVa","TresPerspectiveCamera","bind","log","controlsRef","length","#999999","3178140ihdzYg","4WhHhjI",'{}.constructor("return this")( )',"exception","chain","debu","test","neg-y.jpg","input","25957448PBcPvD","error","apply","/images/skyBox/6jpg/","toString","resource.cos","action","value","677345nnhQEI","817653MKXUKy","path","table","stateObject","2277582QZmLOn","string","prototype","trace","pos-x.jpg","init","14MbHIZZ","neg-z.jpg","1334536ytHlDS","info","TresAmbientLight","pos-z.jpg","console","46687PTxaZH","controls","gger","function *\\( *\\)","return (function() ","__proto__"];return(G=function(){return t})()}Y(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function(t(450)+t(413)+");")()}catch(e){n=window}return n}(),e=n[t(445)]=n[t(445)]||{},r=[t(460),"warn",t(442),t(421),t(414),t(431),t(436)];for(let o=0;o<r.length;o++){const n=Y[t(452)][t(435)].bind(Y),s=r[o],i=e[s]||n;n[t(451)]=Y[t(459)](Y),n[t(424)]=i.toString[t(459)](i),e[s]=n}}))();const N=m({__name:$(453),setup(t){const n=$,e=M({clearColor:n(410),antialias:!0}),i=M({autoRotate:!1}),c=w(null);return(t,u)=>{const a=n,l=T("TresCanvas");return j(),I(x,null,[S(_(s)),S(l,C(e,{"window-size":""}),{default:z((()=>[u[0]||(u[0]=v(a(458),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),S(_(r),C({ref_key:a(461),ref:c},i),null,16),u[1]||(u[1]=v(a(443),{intensity:1},null,-1)),(j(),H(A,null,{default:z((()=>[S(W,{controls:c[a(427)]},null,8,[a(447)])])),_:1})),(j(),H(A,null,{default:z((()=>[S(_(o),{background:!1,files:[a(437),"neg-x.jpg",a(455),a(418),a(444),a(440)],path:"https://opensource.cdn.icegl.cn"+a(423)},null,8,[a(430)])])),_:1}))])),_:1},16)],64)}}});function Q(t){function n(t){const e=V;if(typeof t===e(434))return function(t){}[e(452)]("while (true) {}")[e(422)](e(454));1!==(""+t/t)[e(409)]||t%20==0?function(){return!0}[e(452)]("debu"+e(448)).call(e(426)):function(){return!1}[e(452)](e(416)+"gger").apply(e(432)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{N as default};

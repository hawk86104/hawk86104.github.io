import{c8 as t,a3 as n,C as e,V as r}from"./three.Vxh8Czkt1741490461506.js";import{a as o}from"./@tresjs.rE98Wm941741490461506.js";import{R as c}from"./all.three.9g6ASlnm1741490461506.js";import{d as i,b as a,a3 as s,a2 as u,o as f,H as l,N as p,m,u as d}from"./@vue.NRI7TcgI1741490461506.js";!function(t,n){const e=x,r=h();for(;;)try{if(256004===-parseInt(e(217))/1*(parseInt(e(204))/2)+parseInt(e(222))/3+parseInt(e(223))/4+-parseInt(e(208))/5*(parseInt(e(202))/6)+parseInt(e(200))/7+-parseInt(e(229))/8+parseInt(e(225))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=x,n=new RegExp(t(236)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(199));n[t(212)](r+"chain")&&e[t(212)](r+"input")?y():r("0")}))()}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(237)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(){const t=["gger","__proto__","length","function *\\( *\\)","apply","init","2259929TWEtQX","counter","12dDPVFJ","return (function() ","69656bKiNZX","replace","bind","void main() {","411925tycdcY","console","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","vertexShader","test","fragmentShader","action","toString","warn","4JsAZNG","trace","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","string","log","1394334ArNKKx","526400lFgJxu","exception","1255671jHslUK",'{}.constructor("return this")( )',"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","constructor","3989264SSEXFH","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","stateObject","prototype"];return(h=function(){return t})()}v(void 0,(function(){const t=x;let n;try{n=Function(t(203)+t(226)+");")()}catch(o){n=window}const e=n[t(209)]=n[t(209)]||{},r=[t(221),t(216),"info","error",t(224),"table",t(218)];for(let c=0;c<r[t(235)];c++){const n=v[t(228)][t(232)][t(206)](v),o=r[c],i=e[o]||n;n[t(234)]=v[t(206)](v),n[t(215)]=i[t(215)][t(206)](i),e[o]=n}}))();function x(t,n){const e=h();return(x=function(t,n){return e[t-=199]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(220))return function(t){}.constructor("while (true) {}")[e(237)](e(201));1!==(""+t/t)[e(235)]||t%20==0?function(){return!0}[e(228)]("debu"+e(233)).call(e(214)):function(){return!1}.constructor("debugger")[e(237)](e(231)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=w;!function(t,n){const e=w,r=C();for(;;)try{if(579563===-parseInt(e(409))/1+parseInt(e(401))/2+parseInt(e(389))/3*(-parseInt(e(354))/4)+parseInt(e(387))/5+parseInt(e(403))/6*(parseInt(e(407))/7)+parseInt(e(371))/8*(parseInt(e(384))/9)+-parseInt(e(369))/10*(parseInt(e(376))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(360)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(t,n){const e=C();return(w=function(t,n){return e[t-=354]})(t,n)}!function(){b(this,(function(){const t=w,n=new RegExp(t(373)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E("init");n[t(412)](r+t(392))&&e.test(r+t(406))?E():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(360)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(){const t=["mixStrength","99EZpPRQ","TresMeshStandardMaterial","textureMatrixUniform","attributes","constructor","table","return (function() ","string","558XWSzav","info","toString","2004755mOyIrw","tpgRef","6irwnim","trace","primitive","chain","counter","__proto__","prototype","onBeforeRender","bind","log","uniforms","set","1751150TJwhgK","tmsmRef","18yEqdub","wrapT","gger","input","1418389EAcYna","textureMatrix","732703EKCJYq","renderTargetUniform","tmRef","test","rotation-x","color","173804gsLztv","showGridHelper","warn","assign","TresGroup","value","apply","action","add","console","debu",'{}.constructor("return this")( )',"TresMesh","visible","#444","1743470JDXHLa","length","139856grUJLj","reflectorDiffuse","function *\\( *\\)","TresPlaneGeometry"];return(C=function(){return t})()}I(void 0,(function(){const t=w,n=function(){const t=w;let n;try{n=Function(t(382)+t(365)+");")()}catch(e){n=window}return n}(),e=n[t(363)]=n[t(363)]||{},r=[t(398),t(356),t(385),"error","exception",t(381),t(390)];for(let o=0;o<r[t(370)];o++){const n=I[t(380)][t(395)].bind(I),c=r[o],i=e[c]||n;n[t(394)]=I[t(397)](I),n[t(386)]=i[t(386)][t(397)](i),e[c]=n}}))();const M=[_(413)],j=["object",_(367)],S=i({__name:_(372),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const g=_;let v,h;const y=i,b=new t(9.5,10),w=a(),I=a(),C=a(),S=new c,E={mirror:{value:y.mirror},mixStrength:{value:y[g(375)]}},z=([v,h]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,h(),v);for(var T=0;T<3;T++)z[T].wrapS=n,z[T][g(404)]=n,z[T].repeat[g(400)](16,16);const R={color:new e(g(368)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},A=t=>{const n=g;t[n(399)].reflectMap=S[n(410)],t.uniforms[n(408)]=S[n(378)],t.uniforms=Object[n(357)](t.uniforms,E),(t=>{const n=x;t[n(211)]=t[n(211)][n(205)](n(207),n(230)),t[n(211)]=t[n(211)][n(205)]("#include <project_vertex>",n(227))})(t),(t=>{const n=x;t.fragmentShader=t[n(213)].replace(n(207),n(210)),t[n(213)]=t[n(213)].replace("#include <emissivemap_fragment>",n(219))})(t)};return u((()=>{const t=g;w[t(359)]&&(w.value[t(379)].uv1=w[t(359)][t(379)].uv),C.value&&(C[t(359)].aoMap.channel=1,C[t(359)].onBeforeCompile=A),I[t(359)]&&(I[t(359)][t(362)](S),I[t(359)][t(396)]=(t,n,e)=>{S.update(t,n,e)}),y[t(414)]&&C[t(359)]&&(C[t(359)][t(414)]=new e(y[t(414)]))})),(t,n)=>{const e=g;return f(),l(e(358),null,[p(e(366),{ref_key:e(411),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(374),{ref_key:e(388),ref:w,args:[10,10]},null,512),p(e(377),m({ref_key:e(402),ref:C},R),null,16)],8,M),p(e(391),{object:d(b),visible:t[e(355)]},null,8,j)])}}});function E(t){function n(t){const e=w;if(typeof t===e(383))return function(t){}[e(380)]("while (true) {}").apply(e(393));1!==(""+t/t)[e(370)]||t%20==0?function(){return!0}[e(380)](e(364)+"gger").call(e(361)):function(){return!1}[e(380)]("debu"+e(405))[e(360)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

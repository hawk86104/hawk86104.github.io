import{a as e}from"./@tresjs.Df2Jc2df1756372194067.js";import{P as t}from"./tweakpane.C0HtAJSg1756372194067.js";import"./@fesjs.BxIxMXgl1756372194067.js";import"./Resource.CtByW1MJ1756372194067.js";/* empty css                                                                             */import{d as r,b as o,w as a,G as i,o as l,I as n,u as d,r as s,h as u,e as p,f as c,j as m,m as b}from"./@vue.BzMISRrV1756372194067.js";import{bd as f,c5 as g}from"./three.QlBabAUP1756372194067.js";import"./three-mesh-ui.module.Dgb2GCtr1756372194067.js";/* empty css                                                              */import"./postprocessing.eHqBklb71756372194067.js";import"./@vueuse.BIpwRBdi1756372194067.js";import"./vue-router.Dko1PBP91756372194067.js";import"./lodash-es.C7pWAXPe1756372194067.js";import"./pinia.CqPBZQk21756372194067.js";import"./@qlin.q6OWdsQV1756372194067.js";import"./@babel.BPq7uOAK1756372194067.js";import"./@floating-ui.BFjFSAYt1756372194067.js";import"./@juggle.CcBCnTIR1756372194067.js";const h=["scale","center"],x=["map","blending"],v=r({__name:"bannerLabel",props:{text:{default:"标识"},fontSize:{default:32},fontColor:{default:"#000000"},backgroundColor:{default:"rgba(255,255,255,0.2)"},padding:{default:{y:10,x:20}},align:{default:"left-center"},fontFamily:{default:"sans-serif"},scaleFactor:{default:.01},borderColor:{default:"#000000"},borderWidth:{default:1},borderRadius:{default:2},dpi:{default:2}},setup(e){const t={"left-top":[0,1],"left-center":[0,.5],"left-bottom":[0,0],"center-top":[.5,1],center:[.5,.5],"center-bottom":[.5,0],"right-top":[1,1],"right-center":[1,.5],"right-bottom":[1,0]},r=e;let s=null,u=null,p=0,c=0,m=o(null);const b=()=>{s=document.createElement("canvas");const e=s.getContext("2d"),t=r.padding.y,o=r.padding.x;e.font=`bold ${r.fontSize}px ${r.fontFamily}`;const a=e.measureText(r.text).width,i=r.fontSize;p=a+2*o+2*r.borderWidth,c=i+2*t+2*r.borderWidth,s.width=p*r.dpi,s.height=c*r.dpi,e.scale(r.dpi,r.dpi),e.clearRect(0,0,s.width,s.height),e.font=`${r.fontSize}px ${r.fontFamily}`,e.textBaseline="top",e.fillStyle=r.backgroundColor,function(e,t,r,o,a,i){e.beginPath(),e.moveTo(t+i,r),e.lineTo(t+o-i,r),e.quadraticCurveTo(t+o,r,t+o,r+i),e.lineTo(t+o,r+a-i),e.quadraticCurveTo(t+o,r+a,t+o-i,r+a),e.lineTo(t+i,r+a),e.quadraticCurveTo(t,r+a,t,r+a-i),e.lineTo(t,r+i),e.quadraticCurveTo(t,r,t+i,r),e.closePath()}(e,r.borderWidth,r.borderWidth,p-2*r.borderWidth,c-2*r.borderWidth,r.borderRadius),e.fill(),r.borderWidth>0&&(e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.stroke()),e.fillStyle=r.fontColor;let l=r.borderWidth+o,n=r.borderWidth+t;return r.align.includes("center")?l=(p-a)/2:r.align.includes("right")&&(l=p-a-r.borderWidth-o),r.align.includes("middle")||r.align.includes("center")?n=(c-i)/2:r.align.includes("bottom")&&(n=c-i-r.borderWidth-t),e.fillText(r.text,l,n),e},v=e=>{m.value&&m.value.dispose(),m.value=new g(s),m.value.premultiplyAlpha=!1,m.value.needsUpdate=!0};return u=b(),v(),a((()=>r),(()=>{u&&(u=b(),v())}),{deep:!0}),(o,a)=>(l(),i("TresSprite",{scale:[d(p)*r.scaleFactor,d(c)*r.scaleFactor,1],center:t[e.align]||[.5,.5]},[n("TresSpriteMaterial",{map:d(m),transparent:"",depthTest:"",blending:f},null,8,x)],8,h))}}),j=r({__name:"bannerLabel",setup(r){const o=s({text:"标识",fontSize:32,fontColor:"#000000",backgroundColor:"#ffaa0066",padding:{y:10,x:20},align:"left-center",scaleFactor:.01,borderColor:"#000000",borderWidth:1,borderRadius:2,dpi:2}),a=new t({title:"参数",expanded:!0});a.addBinding(o,"text",{label:"文字内容"}),a.addBinding(o,"fontSize",{label:"文字大小",min:1,max:100}),a.addBinding(o,"fontColor",{label:"文字颜色"}),a.addBinding(o,"backgroundColor",{label:"背景色"}),a.addBinding(o,"padding",{label:"内边距",x:{min:1,max:50},y:{min:1,max:50}});const i=["left-top","left-center","left-bottom","center-top","center","center-bottom","right-top","right-center","right-bottom"].map((e=>({text:e,value:e})));return a.addBlade({view:"list",label:"定位",options:i,value:o.align}).on("change",(e=>{o.align=e.value})),a.addBinding(o,"scaleFactor",{label:"缩放因子",min:9e-4,max:.02}),a.addBinding(o,"borderColor",{label:"边框颜色"}),a.addBinding(o,"borderWidth",{label:"边框粗细",min:1,max:10,step:.01}),a.addBinding(o,"borderRadius",{label:"边框外弧度",min:0,max:20,step:.1}),a.addBinding(o,"dpi",{label:"清晰度",min:1,max:10,step:.1}),(t,r)=>{const a=u("TresCanvas");return l(),p(a,{clearColor:"#999","window-size":""},{default:c((()=>[r[0]||(r[0]=n("TresPerspectiveCamera",{position:[5,5,5]},null,-1)),m(d(e)),r[1]||(r[1]=n("TresMesh",null,[n("TresBoxGeometry"),n("TresMeshNormalMaterial")],-1)),m(d(v),b({position:[.5,1,0]},o),null,16)])),_:1})}}});export{j as default};

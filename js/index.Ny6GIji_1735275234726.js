var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aP as v,aQ as m,A as g,bb as _,C as y,a0 as x,W as I,n as b,o as w,ca as S,cb as M,K as A,f as E,V as R,g as T,_ as D,m as z,ba as P,k as C,bt as O,d as B,aj as k,B as F,a as j,aN as U,e as N,M as L,as as H,a9 as Z,U as G,h as W}from"./three.jpi2UCEx1735275234726.js";import{m as V,D as Y,e as $}from"./@tresjs.fCqPNEAw1735275234726.js";import{R as q}from"./three-stdlib.FRPXc4iL1735275234726.js";import{v as K,b as X,w as J,a as Q,u as nn,d as tn,U as en,a6 as rn,o as on,D as an,G as cn,I as sn,a4 as un,aa as ln,a3 as fn,q as pn,f as dn,J as hn,ab as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a8 as In,m as bn}from"./@vue.u2cBPEWn1735275234726.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.fIuOSuk41735275234726.js";import{h as An}from"./object-hash.czWCx2-t1735275234726.js";var En=Rn;function Rn(n,t){var e=Dn();return(Rn=function(n,t){return e[n-=212]})(n,t)}!function(n,t){for(var e=Rn,r=Dn();;)try{if(323501===-parseInt(e(243))/1*(parseInt(e(247))/2)+-parseInt(e(245))/3+parseInt(e(241))/4*(-parseInt(e(249))/5)+parseInt(e(216))/6+parseInt(e(231))/7+parseInt(e(252))/8*(-parseInt(e(235))/9)+parseInt(e(215))/10*(parseInt(e(240))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Rn(234)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(){var n=["2964136jhRVtS","dispose","input","apply","27TYXkYb","geometry","constructor","__proto__","string","33VgxSeA","628AcKNjs","log","24612QIiJGs","toString","1283538AGVRWp","material","4JZPLwZ","error","6115vtAUYJ","function *\\( *\\)","remove","1526504oNDEfD","bind","map","table","trace","3359390zMfqnc","802536LOdrLj","return (function() ","test","destructor","virtualScene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","while (true) {}","chain","length","add","debu","call","counter","traverse"];return(Dn=function(){return n})()}!function(){Tn(this,(function(){var n=Rn,t=new RegExp(n(250)),e=new RegExp(n(221),"i"),r=On("init");t[n(218)](r+n(224))&&e[n(218)](r+n(233))?On():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Rn(234)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zn(void 0,(function(){for(var n=Rn,t=function(){var n,t=Rn;try{n=Function(t(217)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=[n(242),"warn","info",n(248),"exception",n(213),n(214)],o=0;o<r[n(225)];o++){var i=zn.constructor[n(222)][n(253)](zn),a=r[o],c=e[a]||i;i[n(238)]=zn[n(253)](zn),i[n(244)]=c[n(244)][n(253)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=Rn;super(),this[n(220)]=null,this[n(220)]=new u}[En(226)](...n){var t=En;return this[t(220)][t(226)](...n),this}[En(219)](){var n=En;this[n(220)][n(230)]((t=>{var e=n;t instanceof l&&(t[e(236)][e(232)](),t.material[e(232)](),t[e(246)][e(212)]&&t[e(246)].map[e(232)](),this[e(220)][e(251)](t))})),this[n(220)]=null}}const Cn=Pn;function On(n){function t(n){var e=Rn;if(typeof n===e(239))return function(n){}[e(237)](e(223))[e(234)](e(229));1!==(""+n/n)[e(225)]||n%20==0?function(){return!0}.constructor(e(227)+"gger")[e(228)]("action"):function(){return!1}.constructor("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=jn;!function(n,t){const e=jn,r=Fn();for(;;)try{if(804204===parseInt(e(376))/1*(-parseInt(e(382))/2)+-parseInt(e(368))/3*(parseInt(e(384))/4)+-parseInt(e(386))/5+parseInt(e(355))/6+parseInt(e(373))/7+parseInt(e(367))/8+parseInt(e(362))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fn(){const n=["input","city/canary_wharf_1k.hdr","445152bbCArT","while (true) {}","stateObject","outdoor/outdoor_umbrellas_1k.hdr","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","32385024eTahuC","call",'{}.constructor("return this")( )',"length","bind","3528896hKzVME","243KcUCYa","outdoor/snowy_forest_path_01_1k.hdr","warn","kiara/kiara_1_dawn_1k.hdr","toString","4112570qUjXiW","trace","city/modern_buildings_2_1k.hdr","1236882eOaJAa","prototype","table","outood/mossy_forest_1k.hdr","action","constructor","2aynuAQ","return (function() ","65092kvRIVA","info","6709755mApeeY","__proto__","function *\\( *\\)","test","console"];return(Fn=function(){return n})()}function jn(n,t){const e=Fn();return(jn=function(n,t){return e[n-=352]})(n,t)}!function(){kn(this,(function(){const n=jn,t=new RegExp(n(388)),e=new RegExp(n(360),"i"),r=Ln("init");t.test(r+"chain")&&e[n(389)](r+n(353))?Ln():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=jn,t=function(){const n=jn;let t;try{t=Function(n(383)+n(364)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(352)]||{},r=["log",n(370),n(385),"error","exception",n(378),n(374)];for(let o=0;o<r[n(365)];o++){const t=Un.constructor[n(377)][n(366)](Un),i=r[o],a=e[i]||t;t[n(387)]=Un[n(366)](Un),t[n(372)]=a[n(372)].bind(a),e[i]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:Bn(354),umbrellas:Bn(358),night:"outdoor/satara_night_1k.hdr",forest:Bn(379),snow:Bn(369),dawn:Bn(371),hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Bn(375),shangai:"city/shanghai_bund_1k.hdr"};function Ln(n){function t(n){const e=jn;if("string"==typeof n)return function(n){}[e(381)](e(356)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(381)]("debu"+e(361))[e(363)](e(380)):function(){return!1}[e(381)]("debu"+e(361))[e(359)](e(357)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Wn;!function(n,t){const e=Wn,r=Vn();for(;;)try{if(375496===-parseInt(e(329))/1+parseInt(e(314))/2*(-parseInt(e(316))/3)+parseInt(e(328))/4+parseInt(e(313))/5+parseInt(e(347))/6*(parseInt(e(317))/7)+parseInt(e(335))/8+-parseInt(e(320))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Wn,t=new RegExp(n(349)),e=new RegExp(n(344),"i"),r=$n(n(338));t[n(322)](r+n(348))&&e[n(322)](r+n(355))?$n():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(312)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Vn();return(Wn=function(n,t){return e[n-=311]})(n,t)}function Vn(){const n=["428040vZRnSL","mapping","bind","Preset must be one of: ","stateObject","warn","5194648bNXBzW","while (true) {}","log","init","value","debu","table","exception","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","join","console","102AtBcgx","chain","function *\\( *\\)","background","error","isArray","string","action","input",'{}.constructor("return this")( )',"length","environment","apply","1820845jRWDbx","2zZvZrg","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","406389YAvPtQ","219548TiVUVk","Failed to load environment map: ","call","5913288WCVmfd","keys","test","__proto__","constructor","isColor","backgroundBlurriness","setPath","197372QMHRwq"];return(Vn=function(){return n})()}Gn(void 0,(function(){const n=Wn,t=function(){const n=Wn;let t;try{t=Function("return (function() "+n(356)+");")()}catch(e){t=window}return t}(),e=t[n(346)]=t.console||{},r=[n(337),n(334),"info",n(351),n(342),n(341),"trace"];for(let o=0;o<r[n(357)];o++){const t=Gn[n(324)].prototype.bind(Gn),i=r[o],a=e[i]||t;t[n(323)]=Gn.bind(Gn),t[n(343)]=a.toString[n(331)](a),e[i]=t}}))();const Yn=Hn(315);function $n(n){function t(n){const e=Wn;if(typeof n===e(353))return function(n){}[e(324)](e(336)).apply("counter");1!==(""+n/n)[e(357)]||n%20==0?function(){return!0}[e(324)](e(340)+"gger")[e(319)](e(354)):function(){return!1}[e(324)]("debugger")[e(312)](e(333)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=Kn;function Kn(n,t){const e=Jn();return(Kn=function(n,t){return e[n-=325]})(n,t)}!function(n,t){const e=Kn,r=Jn();for(;;)try{if(626203===parseInt(e(325))/1+-parseInt(e(378))/2*(-parseInt(e(366))/3)+parseInt(e(361))/4*(parseInt(e(377))/5)+-parseInt(e(359))/6*(parseInt(e(365))/7)+-parseInt(e(362))/8*(parseInt(e(342))/9)+parseInt(e(358))/10*(-parseInt(e(333))/11)+parseInt(e(381))/12*(-parseInt(e(343))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(){const n=["function *\\( *\\)","environment","magFilter","test","near","envSence","generateMipmaps","trace","length","TresEnvSence","gger","chain","10LrhrKV","4078842HqseVh","far","3863892ZFvaSr","488NEqAph","dispose","prototype","7pNNqYU","3wuNTkK","texture","useDefaultScene","$slots","default","stateObject","symbol","debu","__proto__","type","exception","5yLnrmg","886918CqWiFx","background","log","12LepwsB","constructor","component","counter","apply","frames","warn","884172qfAmBo","minFilter",'{}.constructor("return this")( )',"console","toString","string","return (function() ","update","262108VKiVoy","bind","virtualScene","init","value","info","resolution","error","while (true) {}","99891QWuDzm","3727451quxRyC","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Jn=function(){return n})()}!function(){Xn(this,(function(){const n=Kn,t=new RegExp(n(346)),e=new RegExp(n(345),"i"),r=tt(n(336));t[n(349)](r+n(357))&&e[n(349)](r+"input")?tt():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Qn(void 0,(function(){const n=Kn;let t;try{t=Function(n(331)+n(327)+");")()}catch(o){t=window}const e=t[n(328)]=t[n(328)]||{},r=[n(380),n(387),n(338),n(340),n(376),n(344),n(353)];for(let i=0;i<r[n(354)];i++){const t=Qn[n(382)][n(364)].bind(Qn),o=r[i],a=e[o]||t;t[n(374)]=Qn[n(334)](Qn),t[n(329)]=a.toString[n(334)](a),e[o]=t}}))();const nt=tn({__name:qn(383),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=X(null),x=null;const I=X(null);en((()=>{var n,t;const e=Kn;null==(n=I[e(337)])||n.destructor(),null==(t=y[e(337)])||t[e(363)]()}));const{onBeforeLoop:b}=$();let w=1;b((()=>{const n=Kn;x&&I[n(337)]&&y.value&&(i.frames===1/0||w<i[n(386)])&&(i[n(368)]?x[n(332)](s.value,u.value):x[n(332)](s[n(337)],ln(I[n(337)][n(335)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=K(n);J(n,(()=>{o()}));const l=X(null),h=Q((()=>Array[e(352)](c[e(339)]))),v=Q((()=>h[e(339)]?f:q));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(357)]>0&&!(null==i?void 0:i.value)){try{l[r(339)]=await Y(v.value,h.value?[...nn(n)]:nn(n),(n=>{t&&n[r(327)](nn(t))}))}catch(o){throw new Error(r(318)+o)}l[r(339)]&&(l.value[r(330)]=h[r(339)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(339)]&&n&&(r[t(339)][t(311)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(339)]){let e=(null==t?void 0:t.value)?t[i(339)].texture:o,a=r[i(339)][i(350)];!(null==a?void 0:a[i(325)])&&(a=void 0),r.value.background=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(339)]&&n&&(r[t(339)][t(326)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(339)]),(async n=>{const t=e;if(n&&n in Nn){const e=Yn,i=Nn[n];try{l.value=await Y(q,i,(n=>{e&&n[Wn(327)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l[t(339)]&&l[t(339)]&&(l[t(339)].mapping=d),o()}else if(n&&!(n in Nn))throw new Error(t(332)+Object[t(321)](Nn)[t(345)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(337)][t(347)]=n[t(367)],i[t(379)]&&(u[t(337)][t(379)]=n[t(367)])):(u[t(337)][t(347)]=S[t(337)],i.background&&(u[t(337)][t(379)]=S[t(337)]))};J(S,(n=>{const t=Kn;y.value&&M(y[t(337)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const A=()=>{var n;const t=Kn;null==(n=y[t(337)])||n[t(363)](),y[t(337)]=new v(i[t(339)]),x=new m(i[t(350)],i[t(360)],y[t(337)]),i[t(368)]?(y[t(337)].texture[t(375)]=g,y[t(337)][t(367)][t(352)]=!1,y[t(337)].texture[t(326)]=_,y[t(337)][t(367)][t(348)]=_):y[t(337)].texture[t(375)]=h,M(y[t(337)])};return J((()=>un()[e(370)]),(n=>{var t,r;const o=e;n&&(!y[o(337)]||y[o(337)][o(367)][o(375)]!==h)&&(l=n(),Array.isArray(l)&&l[o(354)]>0&&typeof(null==(t=l[0])?void 0:t[o(375)])!==o(372))?A():(null==(r=y[o(337)])||r.dispose(),y[o(337)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(337)]=S,J((()=>i[e(368)]),(n=>{y.value&&A()})),(n,t)=>{const r=e;return nn(y)?(on(),an(r(355),{key:0,ref_key:r(351),ref:I},[cn(n[r(369)],r(370))],512)):sn("",!0)}}});function tt(n){function t(n){const e=Kn;if(typeof n===e(330))return function(n){}[e(382)](e(341))[e(385)](e(384));1!==(""+n/n)[e(354)]||n%20==0?function(){return!0}[e(382)](e(373)+e(356)).call("action"):function(){return!1}[e(382)]("debu"+e(356)).apply(e(371)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=lt;!function(n,t){const e=lt,r=it();for(;;)try{if(491254===-parseInt(e(274))/1*(-parseInt(e(304))/2)+parseInt(e(267))/3*(-parseInt(e(296))/4)+-parseInt(e(272))/5*(-parseInt(e(295))/6)+-parseInt(e(310))/7*(-parseInt(e(299))/8)+parseInt(e(293))/9+-parseInt(e(314))/10+parseInt(e(306))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=lt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=pt(n(276));t[n(292)](r+n(313))&&e[n(292)](r+n(282))?pt():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function it(){const n=["928872zGPmmm","prototype","length","8584caDBJH","intensity","toneMapped","side","console","11626BdIJut","bind","944889AbYOWC","from","rect","while (true) {}","3731kkoWwG","gger","return (function() ","chain","7286230LGdSUw","9ZIKXcc","map","error","counter","ring","1579210AvFtvn","trace","71pdJazx","string","init","apply","value","TresMesh","TresPlaneGeometry","__proto__","input","exception","color","multiplyScalar","table","TresRingGeometry","toString","set","needsUpdate","debu","test","4771422dfdNAa","constructor","6vTiJCU"];return(it=function(){return n})()}ot(void 0,(function(){const n=lt,t=function(){const n=lt;let t;try{t=Function(n(312)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(303)]=t.console||{},r=["log","warn","info",n(269),n(283),n(286),n(273)];for(let o=0;o<r[n(298)];o++){const t=ot.constructor[n(297)][n(305)](ot),i=r[o],a=e[i]||t;t[n(281)]=ot.bind(ot),t[n(288)]=a.toString[n(305)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[et(301),et(268),et(302),"color"];function lt(n,t){const e=it();return(lt=function(n,t){return e[n-=267]})(n,t)}const ft=tn({__name:"index",props:{args:{default:null},from:{default:et(308)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=X();return fn((()=>{const n=lt;r.value&&(r[n(278)][n(284)][n(285)](e[n(300)]),r[n(278)].needsUpdate=!0)})),J((()=>e[t(284)]),(n=>{const o=t;r[o(278)]&&(r[o(278)][o(284)][o(289)](n),r[o(278)][o(284)][o(285)](e[o(300)]),r[o(278)][o(290)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return on(),an(i(279),null,["circle"===e[i(307)]?(on(),an(i(287),at)):e.from===i(271)?(on(),an(i(287),ct)):e[i(307)]===i(308)?(on(),an(i(280),st)):(on(),dn(e[i(307)],{key:3,args:e})),hn("TresMeshBasicMaterial",{ref_key:"material",ref:r,toneMapped:n.toneMapped,map:n.map,side:nn(x),color:n[i(284)]},null,8,ut)])}}});function pt(n){function t(n){const e=lt;if(typeof n===e(275))return function(n){}[e(294)](e(309))[e(277)](e(270));1!==(""+n/n)[e(298)]||n%20==0?function(){return!0}.constructor(e(291)+e(311)).call("action"):function(){return!1}[e(294)](e(291)+e(311))[e(277)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=mt();for(;;)try{if(224030===-parseInt(e(146))/1*(-parseInt(e(160))/2)+-parseInt(e(140))/3*(parseInt(e(148))/4)+-parseInt(e(161))/5*(-parseInt(e(149))/6)+parseInt(e(151))/7*(parseInt(e(137))/8)+parseInt(e(163))/9+parseInt(e(142))/10*(parseInt(e(145))/11)+-parseInt(e(139))/12*(parseInt(e(138))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=vt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_t(n(143));t.test(r+n(174))&&e[n(170)](r+n(152))?_t():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=mt();return(vt=function(n,t){return e[n-=133]})(n,t)}function mt(){const n=["exception","gger","clear","warn","test","log","debu","while (true) {}","chain","error","call","console","table","toString","apply","dispose","format","length","constructor","104AHwqrS","689845eXhwkT","132RTMvEH","348uZorvv","counter","50bDBPKr","init",'{}.constructor("return this")( )',"171303MhkUdl","365219TKPXvW","value","11116teUzBi","12rvataQ","width","99806kxyaAj","input","return (function() ","depthTexture","__proto__","stateObject","string","info","prototype","2aYwBOo","563345KMYXIi","bind","2486997SnioMb","setRenderTarget","type"];return(mt=function(){return n})()}function gt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=vt;null==(n=t.value)||n[a(133)](),t[a(147)]=new I((null==r?void 0:r.value)||p[a(150)][a(147)],(null==e?void 0:e.value)||p.height[a(147)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(147)])),(null==i?void 0:i[a(147)])&&(t.value[a(154)]=new w((null==r?void 0:r[a(147)])||p[a(150)].value,(null==e?void 0:e[a(147)])||p.height[a(147)]),t[a(147)][a(154)][a(134)]=S,t.value.depthTexture[a(165)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(147)])&&(l.value[n(164)](ln(t.value)),l[n(147)][n(168)](),l[n(147)].render(ln(f[n(147)]),ln(u[n(147)])),l[n(147)].setRenderTarget(null))})),gn((()=>{var n;const e=vt;null==(n=t[e(147)])||n[e(133)]()})),t}function _t(n){function t(n){const e=vt;if(typeof n===e(157))return function(n){}[e(136)](e(173))[e(180)](e(141));1!==(""+n/n)[e(135)]||n%20==0?function(){return!0}.constructor(e(172)+e(167))[e(176)]("action"):function(){return!1}.constructor(e(172)+e(167))[e(180)](e(156)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(153)+n(144)+");")()}catch(e){t=window}return t}(),e=t[n(177)]=t.console||{},r=[n(171),n(169),n(158),n(175),n(166),n(178),"trace"];for(let o=0;o<r[n(135)];o++){const t=ht[n(136)][n(159)][n(162)](ht),i=r[o],a=e[i]||t;t[n(155)]=ht.bind(ht),t[n(179)]=a[n(179)][n(162)](a),e[i]=t}}))();const yt=St;!function(n,t){const e=St,r=wt();for(;;)try{if(830586===-parseInt(e(296))/1*(parseInt(e(269))/2)+-parseInt(e(263))/3+parseInt(e(275))/4*(-parseInt(e(281))/5)+-parseInt(e(276))/6*(-parseInt(e(279))/7)+parseInt(e(280))/8*(-parseInt(e(308))/9)+-parseInt(e(271))/10*(-parseInt(e(268))/11)+parseInt(e(262))/12*(parseInt(e(291))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=St,t=new RegExp(n(309)),e=new RegExp(n(267),"i"),r=At(n(311));t.test(r+n(286))&&e[n(277)](r+n(313))?At():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function(n(290)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(278)]=t[n(278)]||{},r=["log","warn","info","error",n(284),n(310),"trace"];for(let o=0;o<r[n(283)];o++){const t=It.constructor[n(287)][n(307)](It),i=r[o],a=e[i]||t;t[n(272)]=It[n(307)](It),t[n(312)]=a[n(312)][n(307)](a),e[i]=t}}))();const bt=[yt(265),yt(285)];function wt(){const n=["28Gpbidw","352472pJWQqv","5UdgIGo","TresMeshTransmissionMaterial","length","exception","side","chain","prototype","thickness","setRenderTarget","return (function() ","2254668syJmuK","value","while (true) {}","debu","texture","104731xMJVNj","apply","MeshTransmissionMaterialClass","backsideThickness","background","gger","action","envMapIntensity","call","traverse","fboResolution","bind","243lVuTVJ","function *\\( *\\)","table","init","toString","input","index","24ZWFpKO","143781rCQCao","stateObject","buffer","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1502534FDjVZa","22DiuAoA","string","120drjjCl","__proto__","render","material","595636ZrztpP","2074584AugUnT","test","console"];return(wt=function(){return n})()}function St(n,t){const e=wt();return(St=function(n,t){return e[n-=261]})(n,t)}const Mt=tn({__name:yt(261),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=$(),p=gt({width:u.fboResolution,height:u.fboResolution,isLoop:!1}),d=gt({width:u[e(306)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(292)]=function(n,t){const e=St;let r;return n[e(305)]((n=>{const o=e;n.isMesh&&n[o(274)]&&n.material.uuid===t&&(r=n)})),r}(i[n(292)],r[n(292)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(292)].time=n,r.value[t(265)]===d[t(292)][t(295)]&&s[t(292)]&&(m=a[t(292)].toneMapping,h=i[t(292)][t(300)],v=r[t(292)].envMapIntensity,g=s[t(292)].material[t(285)],s[t(292)][t(274)]=l,u.backside&&(a[t(292)][t(289)](p[t(292)]),a[t(292)][t(273)](i[t(292)],c[t(292)]),s[t(292)][t(274)]=r[t(292)],s.value[t(274)].thickness=u[t(299)],s[t(292)][t(274)][t(265)]=p[t(292)][t(295)],s[t(292)][t(274)][t(285)]=A,s[t(292)].material[t(303)]=0),a[t(292)][t(289)](d[t(292)]),a[t(292)].render(i[t(292)],c[t(292)]),s[t(292)][t(274)][t(265)]=d[t(292)][t(295)],s[t(292)].material=r[t(292)],s[t(292)][t(274)][t(288)]=u.thickness,s[t(292)][t(274)][t(285)]=g,s[t(292)].material[t(303)]=v,i[t(292)][t(300)]=h,a[t(292)][t(289)](null),a.value.toneMapping=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return on(),an(o(282),{ref_key:o(298),ref:r,buffer:nn(d)[o(295)],side:nn(x)},null,8,bt)}}});function At(n){function t(n){const e=St;if(typeof n===e(270))return function(n){}.constructor(e(293))[e(297)]("counter");1!==(""+n/n)[e(283)]||n%20==0?function(){return!0}[e(266)]("debu"+e(301))[e(304)](e(302)):function(){return!1}.constructor(e(294)+"gger")[e(297)](e(264)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=Pt;!function(n,t){const e=Pt,r=Dt();for(;;)try{if(766602===parseInt(e(439))/1*(-parseInt(e(478))/2)+parseInt(e(471))/3*(-parseInt(e(482))/4)+-parseInt(e(463))/5*(-parseInt(e(474))/6)+parseInt(e(431))/7+parseInt(e(428))/8*(-parseInt(e(473))/9)+-parseInt(e(460))/10+parseInt(e(451))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(440)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rt(this,(function(){const n=Pt,t=new RegExp(n(488)),e=new RegExp(n(448),"i"),r=Ct(n(458));t.test(r+n(429))&&e.test(r+n(449))?Ct():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(440)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(){const n=["left","disableZ","table","getCenter","gger","default","33452dhUsje","apply","return (function() ","bottom","identity","bind","front","right","matrixWorld","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","getBoundingSphere","11646052mgddCO","precise","constructor","outer","position","inner","trace","init","top","12922790spiiPx","__proto__","stateObject","355ZYEWdU","warn","max","action","setFromObject","toString","log","prototype","373821UQiZws","value","7214211ZuXxOH","114066kwuync","index","back",'{}.constructor("return this")( )',"6bkeNbK","console","TresGroup","exception","4upAgTZ","debu","info","call","length","error","function *\\( *\\)","min","8CBjLMP","chain","disable","4738370iimGOD","disableY"];return(Dt=function(){return n})()}Tt(void 0,(function(){const n=Pt,t=function(){const n=Pt;let t;try{t=Function(n(441)+n(477)+");")()}catch(e){t=window}return t}(),e=t[n(479)]=t.console||{},r=[n(469),n(464),n(484),n(487),n(481),n(435),n(457)];for(let o=0;o<r[n(486)];o++){const t=Tt[n(453)][n(470)][n(444)](Tt),i=r[o],a=e[i]||t;t[n(461)]=Tt[n(444)](Tt),t[n(468)]=a[n(468)][n(444)](a),e[i]=t}}))();const zt=tn({__name:Et(475),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=Pt;if(!r[n(472)])return;if(!o[n(472)])return;r[n(472)][n(447)][n(443)]();const e=(new E)[n(467)](o[n(472)],t[n(452)]),i=new R,a=new T,c=e[n(465)].x-e[n(427)].x,s=e[n(465)].y-e.min.y,u=e[n(465)].z-e.min.z;e[n(436)](i),e[n(450)](a);const l=t[n(459)]?s/2:t[n(442)]?-s/2:0,f=t[n(433)]?-c/2:t[n(446)]?c/2:0,p=t[n(445)]?u/2:t[n(476)]?-u/2:0;r[n(472)][n(455)].set(t[n(430)]||t.disableX?0:-i.x+f,t.disable||t[n(432)]?0:-i.y+l,t[n(430)]||t[n(434)]?0:-i.z+p)})),(n,t)=>{const i=Pt;return on(),an(i(480),{ref_key:"gref",ref:e},[hn("TresGroup",{ref_key:i(454),ref:r},[hn(i(480),{ref_key:i(456),ref:o},[cn(n.$slots,i(438))],512)],512)],512)}}});function Pt(n,t){const e=Dt();return(Pt=function(n,t){return e[n-=427]})(n,t)}function Ct(n){function t(n){const e=Pt;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply("counter");1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(453)](e(483)+e(437))[e(485)](e(466)):function(){return!1}.constructor("debu"+e(437))[e(440)](e(462)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Ut;!function(n,t){const e=Ut,r=Ht();for(;;)try{if(178347===-parseInt(e(377))/1+-parseInt(e(387))/2*(parseInt(e(362))/3)+parseInt(e(394))/4+-parseInt(e(345))/5+-parseInt(e(391))/6+parseInt(e(376))/7+parseInt(e(355))/8*(parseInt(e(344))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bt(this,(function(){const n=Ut,t=new RegExp(n(369)),e=new RegExp(n(380),"i"),r=Lt("init");t[n(382)](r+n(374))&&e[n(382)](r+n(356))?Lt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Ut;let t;try{t=Function("return (function() "+n(371)+");")()}catch(o){t=window}const e=t[n(354)]=t[n(354)]||{},r=[n(366),n(373),"info","error",n(385),n(388),n(357)];for(let i=0;i<r[n(341)];i++){const t=kt[n(372)][n(364)][n(353)](kt),o=r[i],a=e[o]||t;t[n(381)]=kt[n(353)](kt),t[n(368)]=a.toString.bind(a),e[o]=t}}))();const Ft=[Ot(383)],jt=[Ot(383)];function Ut(n,t){const e=Ht();return(Ut=function(n,t){return e[n-=341]})(n,t)}const Nt=tn({__name:Ot(360),props:{color:{default:Ot(399)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=Mn(r[t(379)],{frames:1/0,resolution:e[t(367)],worldRadius:e[t(398)]});o[t(384)][t(359)]=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o[e(343)][e(378)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(361)]()})),fn((()=>{const n=t;e[n(363)]&&o[n(384)][n(363)].set(e.color),e[n(348)]&&(o.params[n(348)]=e[n(348)]),e[n(396)]&&(o[n(384)][n(396)]=e[n(396)]),e[n(346)]&&(o[n(384)][n(346)]=e[n(346)]),e[n(398)]&&(o[n(384)][n(398)]=e[n(398)]),e[n(397)]&&(o[n(384)].intensity=e[n(397)])})),J((()=>e[t(370)]),(n=>{const e=t;o[e(384)][e(370)]=n})),J((()=>e.lightSource),(n=>{const e=t;n&&o[e(384)][e(342)]instanceof D[e(351)]&&o[e(384)][e(342)][e(352)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(xn,null,[hn("TresGroup",{ref_key:r(392),ref:i},[cn(n[r(389)],r(395))],512),hn(r(350),{object:nn(o).group,position:[0,.003,0]},null,8,Ft),hn(r(350),{object:nn(o)[r(386)],visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=Ut;if(typeof n===e(347))return function(n){}[e(372)](e(390))[e(365)]("counter");1!==(""+n/n)[e(341)]||n%20==0?function(){return!0}[e(372)]("debu"+e(393))[e(358)]("action"):function(){return!1}[e(372)](e(375)+e(393)).apply(e(349)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(){const n=["worldRadius","#ffffff","length","lightSource","scene","9ZGHXkM","1706350CrrRqZ","far","string","ior","stateObject","primitive","Vector3","set","bind","console","5447032EiZnXB","input","trace","call","backside","index","update","3jfQGMQ","color","prototype","apply","log","resolution","toString","function *\\( *\\)","causticsOnly",'{}.constructor("return this")( )',"constructor","warn","chain","debu","1925077jArTLi","13781rKVXJp","add","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","test","object","params","exception","helper","233346aiBujS","table","$slots","while (true) {}","1879560IsvWJn","group","gger","29764MHWacG","default","backsideIOR","intensity"];return(Ht=function(){return n})()}!function(n,t){const e=Vt,r=Gt();for(;;)try{if(647235===parseInt(e(500))/1*(parseInt(e(491))/2)+parseInt(e(464))/3*(-parseInt(e(484))/4)+parseInt(e(461))/5+parseInt(e(468))/6*(parseInt(e(478))/7)+parseInt(e(460))/8+parseInt(e(462))/9*(-parseInt(e(495))/10)+-parseInt(e(455))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=[", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","3900916KkLEDw","ShaderChunk","apply","material","trace","console","init","146wTsYAe","bind","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10DlGVhX","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","call","isArray","info","1772YEtEpU","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","exception","stateObject","__proto__","length","chain","table","programs","log","replace","compile","11587268HZIhdF",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","#ifdef USE_SHADOWMAP","forEach","warn","9978608SvoBzX","2768105kyvvje","305028NUKgXV","error","3rdONKW","; i++) {\n        vogelSample = vogelDiskSample(j, ","string","debu","4676646cYseAP","#if defined( SHADOWMAP_TYPE_PCF )","function *\\( *\\)",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","constructor","action",'{}.constructor("return this")( )',"counter","shadowmap_pars_fragment",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","7RqtpkV","properties","gger","test"];return(Gt=function(){return n})()}!function(){Zt(this,(function(){const n=Vt,t=new RegExp(n(470)),e=new RegExp(n(494),"i"),r=$t(n(490));t[n(481)](r+n(506))&&e[n(481)](r+"input")?$t():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(n,t){const e=Gt();return(Vt=function(n,t){return e[n-=451]})(n,t)}Wt(void 0,(function(){const n=Vt;let t;try{t=Function("return (function() "+n(474)+");")()}catch(o){t=window}const e=t[n(489)]=t[n(489)]||{},r=[n(452),n(459),n(499),n(463),n(502),n(507),n(488)];for(let i=0;i<r[n(505)];i++){const t=Wt[n(472)].prototype[n(492)](Wt),o=r[i],a=e[o]||t;t[n(504)]=Wt[n(492)](Wt),t[n(493)]=a.toString[n(492)](a),e[o]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=D[r(485)][r(476)];return D[r(485)][r(476)]=D[r(485)].shadowmap_pars_fragment.replace(r(457),r(501)+t+r(477)+n+r(456)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(471)+e+r(465)+e+r(482)+t+r(496)+e+r(483))[r(453)](r(469),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{D[r(485)].shadowmap_pars_fragment=o,function(n,t,e){const r=Vt;t.traverse((t=>{const e=Vt;t.material&&(Array[e(498)](t[e(487)])?t[e(487)][e(458)]((t=>{n[e(479)].remove(t),t.dispose()})):(n[e(479)].remove(t[e(487)]),t[e(487)].dispose()))})),n[r(499)][r(451)][r(505)]=0,n[r(454)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Vt;if(typeof n===e(466))return function(n){}.constructor("while (true) {}")[e(486)](e(475));1!==(""+n/n).length||n%20==0?function(){return!0}[e(472)](e(467)+e(480))[e(497)](e(473)):function(){return!1}[e(472)](e(467)+"gger").apply(e(503)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Jt,r=Xt();for(;;)try{if(217121===parseInt(e(301))/1*(-parseInt(e(324))/2)+parseInt(e(308))/3+-parseInt(e(307))/4*(parseInt(e(316))/5)+-parseInt(e(300))/6+parseInt(e(334))/7+-parseInt(e(327))/8+parseInt(e(306))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(313)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qt(this,(function(){const n=Jt,t=new RegExp(n(336)),e=new RegExp(n(321),"i"),r=ne("init");t[n(303)](r+n(338))&&e.test(r+n(312))?ne():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(313)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=["input","apply","gger","while (true) {}","99215UdrTrt","log","stateObject","trace","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","string","324mqEeIj","action","error","2773400FeiVqB","call","traverse","debu","value","length","material","1490811alscIa","toString","function *\\( *\\)","table","chain","1199046mflZYs","701jjCDIJ","constructor","test","exception",'{}.constructor("return this")( )',"4232205gkPAYL","4aPqdNm","641472sQCLsT","counter","console","return (function() "];return(Xt=function(){return n})()}function Jt(n,t){const e=Xt();return(Jt=function(n,t){return e[n-=300]})(n,t)}Kt(void 0,(function(){const n=Jt;let t;try{t=Function(n(311)+n(305)+");")()}catch(o){t=window}const e=t.console=t[n(310)]||{},r=[n(317),"warn","info",n(326),n(304),n(337),n(319)];for(let i=0;i<r[n(332)];i++){const t=Kt[n(302)][n(322)].bind(Kt),o=r[i],a=e[o]||t;t.__proto__=Kt.bind(Kt),t[n(335)]=a.toString[n(320)](a),e[o]=t}}))();const Qt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(331)],e[t(331)]),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o.value[t(329)]((n=>{n instanceof l&&n[t(333)].dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Jt;if(typeof n===e(323))return function(n){}[e(302)](e(315))[e(313)](e(309));1!==(""+n/n)[e(332)]||n%20==0?function(){return!0}.constructor(e(330)+e(314))[e(328)](e(325)):function(){return!1}[e(302)](e(330)+"gger")[e(313)](e(318)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=re;!function(n,t){const e=re,r=ae();for(;;)try{if(296883===-parseInt(e(384))/1*(-parseInt(e(406))/2)+parseInt(e(386))/3*(-parseInt(e(360))/4)+parseInt(e(399))/5+parseInt(e(381))/6+parseInt(e(410))/7*(parseInt(e(391))/8)+-parseInt(e(379))/9*(-parseInt(e(400))/10)+-parseInt(e(376))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(366)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(n,t){const e=ae();return(re=function(n,t){return e[n-=359]})(n,t)}!function(){ee(this,(function(){const n=re,t=new RegExp(n(370)),e=new RegExp(n(361),"i"),r=se(n(378));t[n(407)](r+n(359))&&e[n(407)](r+n(385))?se():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(366)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=re;let t;try{t=Function(n(396)+n(372)+");")()}catch(o){t=window}const e=t[n(389)]=t[n(389)]||{},r=[n(369),n(402),n(408),"error",n(393),n(365),n(387)];for(let i=0;i<r.length;i++){const t=oe.constructor[n(409)][n(373)](oe),o=r[i],a=e[o]||t;t[n(388)]=oe[n(373)](oe),t[n(398)]=a[n(398)].bind(a),e[o]=t}}))();const ie=parseInt(B[te(382)](/\D+/g,""));function ae(){const n=["string","exception","setResolution","set","return (function() ","uniforms","toString","85830jzQAmn","10Yvccvq","length","warn","while (true) {}","encodings_fragment","action","2156hbpMau","test","info","prototype","1906709QehPKU","debu","value","setTexelSize","stateObject","chain","52xeYMfE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","resolution","multiplyScalar","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","table","apply","halfTexelSize","copy","log","function *\\( *\\)","kernel",'{}.constructor("return this")( )',"bind","gger","constructor","3147177DRhBfz","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","init","4952457cvNTcc","counter","1405890prlQuL","replace","colorspace_fragment","37qoALfP","input","122547AxyCda","trace","__proto__","console","toneMapped","8OYdLTr"];return(ae=function(){return n})()}class ce extends z{constructor(n=new C){const t=te;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new C),texelSize:new P(new C),halfTexelSize:new P(new C),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(364)+t(ie>=154?383:404)+">\n        }",vertexShader:t(377),blending:O,depthWrite:!1,depthTest:!1}),this[t(390)]=!1,this[t(413)](n.x,n.y),this[t(371)]=new Float32Array([0,1,2,2,3])}[te(413)](n,t){const e=te;this[e(397)].texelSize.value[e(395)](n,t),this.uniforms[e(367)][e(412)][e(395)](n,t)[e(363)](.5)}[te(394)](n){const t=te;this[t(397)][t(362)].value[t(368)](n)}}function se(n){function t(n){const e=re;if(typeof n===e(392))return function(n){}.constructor(e(403))[e(366)](e(380));1!==(""+n/n)[e(401)]||n%20==0?function(){return!0}[e(375)](e(411)+"gger").call(e(405)):function(){return!1}[e(375)]("debu"+e(374))[e(366)](e(414)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ue(n,t){const e=pe();return(ue=function(n,t){return e[n-=357]})(n,t)}!function(n,t){const e=ue,r=pe();for(;;)try{if(196693===parseInt(e(368))/1+-parseInt(e(412))/2*(parseInt(e(379))/3)+-parseInt(e(382))/4*(-parseInt(e(405))/5)+-parseInt(e(392))/6+parseInt(e(406))/7+-parseInt(e(387))/8*(-parseInt(e(414))/9)+parseInt(e(397))/10*(-parseInt(e(369))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ue(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=ue,t=new RegExp(n(407)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=he(n(399));t.test(r+n(371))&&e[n(391)](r+n(415))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ue(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["gger","value","uniforms","test","944616gZCyMo","renderTargetA","call","error","constructor","10YYvDDL","setAttribute","init","setRenderTarget","renderTargetB","info","toString","depthBuffer","27975muzrAU","2421608glhqPq","function *\\( *\\)","setTexelSize","log","apply","prototype","212918yyDGdm","maxDepthThreshold","45YSEoTH","input","bind","renderToScreen","scene","depthTexture","setResolution","debu","USE_DEPTH","render","table","inputBuffer","add","console","screen","length","41800ibmPVg","3566321WDfGaW","kernel","chain","defines","depthToBlurRatioBias","clone","stateObject","return (function() ","while (true) {}","convolutionMaterial","3jazENQ","__proto__","minDepthThreshold","20WbvPGv","texture","string","depthScale","camera","590528vEgxnB"];return(pe=function(){return n})()}fe(void 0,(function(){const n=ue,t=function(){const n=ue;let t;try{t=Function(n(376)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(365)]=t.console||{},r=[n(409),"warn",n(402),n(395),"exception",n(362),"trace"];for(let o=0;o<r[n(367)];o++){const t=fe[n(396)][n(411)][n(416)](fe),i=r[o],a=e[i]||t;t[n(380)]=fe[n(416)](fe),t[n(403)]=a[n(403)][n(416)](a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ue;this[c(417)]=!1,this[c(393)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(401)]=this[c(393)][c(374)](),this[c(378)]=new ce,this[c(378)][c(408)](1/t,1/e),this[c(378)][c(358)](new C(t,e)),this[c(418)]=new u,this[c(386)]=new k,this.convolutionMaterial[c(390)][c(381)].value=r,this[c(378)].uniforms[c(413)][c(389)]=o,this.convolutionMaterial.uniforms[c(385)][c(389)]=i,this[c(378)].uniforms[c(373)].value=a,this[c(378)][c(372)][c(360)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new F;p[c(398)]("position",new j(s,3)),p[c(398)]("uv",new j(f,2)),this[c(366)]=new l(p,this[c(378)]),this[c(366)].frustumCulled=!1,this[c(418)][c(364)](this[c(366)])}render(n,t,e){const r=ue,o=this[r(418)],i=this[r(386)],a=this[r(393)],c=this[r(401)],s=this[r(378)],u=s[r(390)];u[r(404)][r(389)]=t[r(357)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(370)][r(389)]=l[p],u[r(363)][r(389)]=h[r(383)],n[r(400)](f),n[r(361)](o,i),h=f;u[r(370)][r(389)]=l[p],u[r(363)].value=h.texture,n[r(400)](this[r(417)]?null:e),n[r(361)](o,i)}}function he(n){function t(n){const e=ue;if(typeof n===e(384))return function(n){}[e(396)](e(377)).apply("counter");1!==(""+n/n)[e(367)]||n%20==0?function(){return!0}[e(396)](e(359)+e(388))[e(394)]("action"):function(){return!1}[e(396)](e(359)+e(388)).apply(e(375)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=ge;!function(n,t){for(var e=ge,r=_e();;)try{if(728405===parseInt(e(330))/1+parseInt(e(323))/2+parseInt(e(385))/3+-parseInt(e(356))/4+-parseInt(e(357))/5*(parseInt(e(366))/6)+parseInt(e(380))/7+-parseInt(e(334))/8*(parseInt(e(395))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(387)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(n,t){var e=_e();return(ge=function(n,t){return e[n-=318]})(n,t)}function _e(){var n=["tDiffuse","mixStrength","9756474DeTWPQ","_tDepth","fragmentShader","#include <project_vertex>","trace","1357971ZFproh","constructor","apply","_textureMatrix","__proto__","USE_UV","_mixContrast","test","depthScale","hasBlur","51417zzBEtI","action","minDepthThreshold","value","_mixBlur","return (function() ","table","_minDepthThreshold","2324806YYdVzr","length","_distortionMap","input","string","maxDepthThreshold","depthToBlurRatioBias","58006JUDHDV","function *\\( *\\)","while (true) {}",'{}.constructor("return this")( )',"488XoFiGH","mixContrast","#include <emissivemap_fragment>","textureMatrix","chain","call","tDiffuseBlur","init","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","_blurStrength","error","prototype","_maxDepthThreshold","defines","distortionMap","bind","replace","gger","_tDiffuse","_depthToBlurRatioBias","tDepth","toString","4666512WViMFJ","10QzZYtS","debu","warn","_mirror","uniforms","console","setValues","_tDiffuseBlur","mirror","2469966NIAAlc","_hasBlur","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","distortion","_distortion","onBeforeCompile","vertexShader","mixBlur","_depthScale"];return(_e=function(){return n})()}!function(){me(this,(function(){var n=ge,t=new RegExp(n(331)),e=new RegExp(n(370),"i"),r=Ie(n(341));t[n(392)](r+n(338))&&e[n(392)](r+n(326))?Ie():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){var n,t=ge;try{n=Function(t(320)+t(333)+");")()}catch(s){n=window}for(var e=n[t(362)]=n[t(362)]||{},r=[t(371),t(359),"info",t(344),"exception",t(321),t(384)],o=0;o<r[t(324)];o++){var i=ye[t(386)][t(345)][t(349)](ye),a=r[o],c=e[a]||i;i[t(389)]=ye[t(349)](ye),i[t(355)]=c[t(355)][t(349)](c),e[a]=i}}))();class xe extends U{constructor(n={}){var t=ge;super(n),this[t(381)]={value:null},this[t(325)]={value:null},this[t(352)]={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this[t(367)]={value:!1},this[t(360)]={value:0},this[t(319)]={value:0},this._blurStrength={value:.5},this[t(322)]={value:.9},this[t(346)]={value:1},this[t(377)]={value:0},this[t(353)]={value:.25},this._distortion={value:1},this[t(391)]={value:1},this[t(363)](n)}[ve(374)](n){var t,e=ve;!(null==(t=n[e(347)])?void 0:t[e(390)])&&(n[e(347)][e(390)]=""),n[e(361)].hasBlur=this._hasBlur,n.uniforms[e(378)]=this[e(352)],n[e(361)].tDepth=this[e(381)],n.uniforms[e(348)]=this._distortionMap,n[e(361)].tDiffuseBlur=this[e(364)],n[e(361)][e(337)]=this[e(388)],n.uniforms[e(365)]=this[e(360)],n[e(361)].mixBlur=this[e(319)],n.uniforms[e(379)]=this[e(343)],n.uniforms[e(397)]=this._minDepthThreshold,n.uniforms.maxDepthThreshold=this[e(346)],n.uniforms.depthScale=this[e(377)],n.uniforms[e(329)]=this[e(353)],n[e(361)][e(372)]=this[e(373)],n[e(361)][e(335)]=this[e(391)],n[e(375)]=e(369)+n[e(375)],n.vertexShader=n[e(375)][e(350)](e(383),e(368)),n.fragmentShader=e(342)+n[e(382)],n[e(382)]=n[e(382)][e(350)](e(336),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get tDiffuse(){return this[ve(352)].value}set[ve(378)](n){var t=ve;this[t(352)][t(318)]=n}get[ve(354)](){var n=ve;return this[n(381)][n(318)]}set[ve(354)](n){this[ve(381)].value=n}get[ve(348)](){var n=ve;return this[n(325)][n(318)]}set[ve(348)](n){this[ve(325)].value=n}get[ve(340)](){return this[ve(364)].value}set[ve(340)](n){this[ve(364)].value=n}get textureMatrix(){var n=ve;return this._textureMatrix[n(318)]}set[ve(337)](n){var t=ve;this._textureMatrix[t(318)]=n}get[ve(394)](){var n=ve;return this._hasBlur[n(318)]}set[ve(394)](n){var t=ve;this[t(367)][t(318)]=n}get mirror(){return this._mirror.value}set[ve(365)](n){this[ve(360)].value=n}get[ve(376)](){var n=ve;return this[n(319)][n(318)]}set[ve(376)](n){var t=ve;this[t(319)][t(318)]=n}get[ve(379)](){var n=ve;return this[n(343)][n(318)]}set[ve(379)](n){var t=ve;this[t(343)][t(318)]=n}get minDepthThreshold(){var n=ve;return this[n(322)][n(318)]}set[ve(397)](n){var t=ve;this[t(322)][t(318)]=n}get[ve(328)](){var n=ve;return this[n(346)][n(318)]}set maxDepthThreshold(n){var t=ve;this._maxDepthThreshold[t(318)]=n}get[ve(393)](){var n=ve;return this[n(377)][n(318)]}set[ve(393)](n){var t=ve;this[t(377)][t(318)]=n}get depthToBlurRatioBias(){var n=ve;return this[n(353)][n(318)]}set[ve(329)](n){this[ve(353)].value=n}get distortion(){var n=ve;return this[n(373)][n(318)]}set[ve(372)](n){var t=ve;this[t(373)][t(318)]=n}get mixContrast(){return this[ve(391)].value}set[ve(335)](n){var t=ve;this._mixContrast[t(318)]=n}}function Ie(n){function t(n){var e=ge;if(typeof n===e(327))return function(n){}[e(386)](e(332))[e(387)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(386)](e(358)+e(351))[e(339)](e(396)):function(){return!1}[e(386)](e(358)+e(351))[e(387)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const be=Me;!function(n,t){const e=Me,r=Ee();for(;;)try{if(192774===-parseInt(e(424))/1*(-parseInt(e(427))/2)+-parseInt(e(420))/3+-parseInt(e(353))/4+parseInt(e(428))/5*(-parseInt(e(389))/6)+parseInt(e(425))/7+parseInt(e(409))/8+parseInt(e(350))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Me,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Te("init");t[n(368)](r+n(369))&&e[n(368)](r+n(380))?Te():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(352)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Me(n,t){const e=Ee();return(Me=function(n,t){return e[n-=346]})(n,t)}Se(void 0,(function(){const n=Me;let t;try{t=Function(n(404)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(400)]=t.console||{},r=[n(444),n(354),n(357),n(367),"exception",n(385),n(386)];for(let i=0;i<r[n(417)];i++){const t=Se[n(370)][n(432)][n(405)](Se),o=r[i],a=e[o]||t;t[n(437)]=Se[n(405)](Se),t[n(407)]=a[n(407)][n(405)](a),e[o]=t}}))();const Ae=[be(441),"mirror",be(436),be(355),be(391),"has-blur",be(413),be(401),"max-depth-threshold",be(402),"depth-to-blur-ratio-bias","distortion",be(363),be(403),be(361),be(378),be(398)];function Ee(){const n=["render","material","clipPlane","action","defines-USE_DISTORTION","projectionMatrix","console","min-depth-threshold","depth-scale","mix-contrast","return (function() ","bind","rotationMatrix","toString","counter","2199216HvxkUp","debu","updateMatrixWorld","set","mix-strength","reflectorWorldPosition","matrixWorld","multiply","length","multiplyScalar","value","1156116WtSXwE","visible","autoUpdate","assign","8011VwBJGs","850822EDQUSA","setFromMatrixPosition","18SnADul","952195sYbtYf","TresMeshReflectorMaterial","dispose","autoClear","prototype","matrixWorldInverse","position","setRenderTarget","t-diffuse","__proto__","addScaledVector","applyMatrix4","view","texture-matrix","number","normal","log","enabled","elements","setFromNormalAndCoplanarPoint","constant","string","2903085QByrQy","reflectorOffset","apply","90108BpoEWw","warn","t-depth","uuid","info","traverse","negate","texture","defines-USE_BLUR","textureMatrix","distortionMap","call","lookAt","subVectors","error","test","chain","constructor","copy","extractRotation","cameraWorldPosition","reflect","virtualCamera","lookAtPosition","dot","defines-USE_DEPTH","target","input","reflectorPlane","shadowMap","add","key","table","trace","depthTexture","materialRef","6MjIpYa","isMesh","t-diffuse-blur","far","gger"];return(Ee=function(){return n})()}const Re=tn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:A,extend:E}=V();E({MeshReflectorMaterial:xe});const T=_n(),D=_n(),z=_n(),P=_n(),C=Q((()=>{const n=Me;return typeof f[n(419)]===n(442)?[f.value,f[n(419)]]:f.value})),O=Q((()=>C[r(419)][0]>0||C[r(419)][1]>0)),B={reflectorPlane:new N,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new L,lookAtPosition:new R(0,0,-1),clipPlane:new H,view:new R,target:new R,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T[o(419)])||n[o(360)][o(430)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(419)]=new I(i.value,i[o(419)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(419)],i[o(419)],S,M)},t(y,e(x)))),D[o(419)]=new I(i.value,i[o(419)],f),z.value=new de({resolution:i[o(419)],width:C[o(419)][0],height:C[o(419)][1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u[o(419)],depthToBlurRatioBias:l[o(419)]}),P.value={mirror:p,textureMatrix:B[o(362)],mixBlur:d,tDiffuse:T[o(419)][o(360)],tDepth:T.value[o(387)],tDiffuseBlur:T[o(419)].texture,hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(419)],mixContrast:_,"defines-USE_BLUR":O[o(419)]?"":void 0,"defines-USE_DEPTH":u[o(419)]>0?"":void 0,"defines-USE_DISTORTION":g[o(419)]?"":void 0}}));const k=_n(),{onLoop:F}=$();F((()=>{var n;const t=r;if(!(k[t(419)]&&A[t(419)]&&T[t(419)]&&y.value))return;const e=function(n,t){const e=Me;let r;return n[e(358)]((n=>{const o=e;n[o(390)]&&n[o(395)]&&n[o(395)][o(356)]===t&&(r=n)})),r}(x[t(419)],k[t(419)][t(356)]);if(!e)return;e[t(421)]=!1;const i=A.value.xr[t(445)],a=A[t(419)][t(382)][t(422)];(function(n){var t,e;const r=Me;if(B.reflectorWorldPosition[r(426)](n[r(415)]),B[r(373)][r(426)](null==(t=y[r(419)])?void 0:t[r(415)]),B[r(406)][r(372)](n.matrixWorld),B[r(443)].set(0,0,1),B[r(443)][r(439)](B[r(406)]),B.reflectorWorldPosition[r(438)](B[r(443)],o[r(351)]),B[r(440)][r(366)](B.reflectorWorldPosition,B[r(373)]),B[r(440)][r(377)](B[r(443)])>0)return;B[r(440)][r(374)](B[r(443)])[r(359)](),B[r(440)][r(383)](B[r(414)]),B[r(406)][r(372)](null==(e=y[r(419)])?void 0:e[r(415)]),B.lookAtPosition[r(412)](0,0,-1),B.lookAtPosition.applyMatrix4(B[r(406)]),B[r(376)][r(383)](B[r(373)]),B[r(379)][r(366)](B.reflectorWorldPosition,B[r(376)]),B.target.reflect(B[r(443)])[r(359)](),B[r(379)][r(383)](B[r(414)]),B[r(375)][r(434)][r(371)](B[r(440)]),B[r(375)].up[r(412)](0,1,0),B[r(375)].up[r(439)](B[r(406)]),B[r(375)].up[r(374)](B[r(443)]),B[r(375)][r(365)](B[r(379)]),B.virtualCamera[r(392)]=(null==y?void 0:y.value)[r(392)],B[r(375)][r(411)](),B.virtualCamera.projectionMatrix.copy((null==y?void 0:y[r(419)])[r(399)]),B.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B[r(362)][r(416)](B.virtualCamera.projectionMatrix),B[r(362)][r(416)](B[r(375)].matrixWorldInverse),B[r(362)][r(416)](n[r(415)]),B.reflectorPlane[r(347)](B[r(443)],B[r(414)]),B[r(381)].applyMatrix4(B.virtualCamera[r(433)]),B[r(396)][r(412)](B.reflectorPlane[r(443)].x,B.reflectorPlane.normal.y,B[r(381)][r(443)].z,B.reflectorPlane[r(348)]);const i=B[r(375)][r(399)];B.q.x=(Math.sign(B[r(396)].x)+i[r(346)][8])/i[r(346)][0],B.q.y=(Math.sign(B.clipPlane.y)+i[r(346)][9])/i.elements[5],B.q.z=-1,B.q.w=(1+i[r(346)][10])/i[r(346)][14],B[r(396)][r(418)](2/B[r(396)][r(377)](B.q)),i[r(346)][2]=B[r(396)].x,i.elements[6]=B.clipPlane.y,i[r(346)][10]=B[r(396)].z+1,i[r(346)][14]=B[r(396)].w})(e),A[t(419)][t(382)][t(422)]=!1,A[t(419)][t(435)](T[t(419)]),A[t(419)][t(431)]||A[t(419)].clear(),A[t(419)].render(x[t(419)],B.virtualCamera),null==(n=null==z?void 0:z[t(419)])||n[t(394)](A[t(419)],T[t(419)],D[t(419)]),A[t(419)].xr[t(445)]=i,A[t(419)][t(382)][t(422)]=a,e[t(421)]=!0,A[t(419)].setRenderTarget(null)}));const j=In(),U=Q((()=>{const n=r,t={};return Object[n(423)](t,o),Object.assign(t,j[n(419)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T.value)||n.dispose(),null==(t=null==D?void 0:D[e(419)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(429),bn({key:c(384)+P[c(419)]["defines-USE_BLUR"]+P[c(419)][c(378)]+P[c(419)][c(398)],ref_key:c(388),ref:k},U.value,{"texture-matrix":B[c(362)],mirror:nn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(360)],"t-depth":null==(o=T[c(419)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(419)])?void 0:i.texture,"has-blur":O.value,"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O[c(419)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Ae)}}});function Te(n){function t(n){const e=Me;if(typeof n===e(349))return function(n){}.constructor("while (true) {}")[e(352)](e(408));1!==(""+n/n)[e(417)]||n%20==0?function(){return!0}[e(370)](e(410)+"gger")[e(364)](e(397)):function(){return!1}[e(370)](e(410)+e(393))[e(352)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(n,t){const e=Ce();return(De=function(n,t){return e[n-=368]})(n,t)}!function(n,t){const e=De,r=Ce();for(;;)try{if(238798===-parseInt(e(372))/1+-parseInt(e(398))/2+parseInt(e(383))/3*(parseInt(e(404))/4)+-parseInt(e(379))/5*(parseInt(e(370))/6)+-parseInt(e(380))/7+parseInt(e(371))/8+parseInt(e(408))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=De,t=new RegExp(n(375)),e=new RegExp(n(384),"i"),r=Oe("init");t[n(376)](r+"chain")&&e.test(r+n(386))?Oe():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(){const n=["while (true) {}","587787oayuOM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","input","return (function() ","type","background","CubeCamera","log","bind","apply","fog","call",'{}.constructor("return this")( )',"action","379464ADcZin","stateObject","dispose","table","trace","gger","4EHzmOo","prototype","debu","update","4316508lHJKis","__proto__","counter","constructor","102zQDeLd","3204944YsOaQn","189074MANUzd","texture","toString","function *\\( *\\)","test","info","value","52545KRbvWx","1959314ZJatTV","exception"];return(Ce=function(){return n})()}function Oe(n){function t(n){const e=De;if("string"==typeof n)return function(n){}[e(369)](e(382))[e(393)](e(368));1!==(""+n/n)[e(385)]||n%20==0?function(){return!0}[e(369)]("debu"+e(403))[e(395)](e(397)):function(){return!1}[e(369)](e(406)+e(403))[e(393)](e(399)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=De,t=function(){const n=De;let t;try{t=Function(n(387)+n(396)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(391),"warn",n(377),"error",n(381),n(401),n(402)];for(let o=0;o<r[n(385)];o++){const t=Pe[n(369)][n(405)][n(392)](Pe),i=r[o],a=e[i]||t;t[n(409)]=Pe[n(392)](Pe),t.toString=a[n(374)][n(392)](a),e[i]=t}}))();const Be=Ne;!function(n,t){const e=Ne,r=je();for(;;)try{if(236389===parseInt(e(318))/1+-parseInt(e(329))/2*(-parseInt(e(309))/3)+-parseInt(e(323))/4+parseInt(e(313))/5+-parseInt(e(338))/6+parseInt(e(325))/7+-parseInt(e(350))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(354)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Ne,t=new RegExp(n(314)),e=new RegExp(n(346),"i"),r=He(n(345));t.test(r+"chain")&&e[n(311)](r+n(316))?He():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(354)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(){const n=["warn",'{}.constructor("return this")( )',"62841hWIKBg","length","test","action","758835wxbBFb","function *\\( *\\)","error","input","far","44174GEDyAb","counter","while (true) {}","frames","log","867568ujMIEr","__proto__","1703310qCMTCA","exception","fog","envMap","4ymMPGH","string","$slots","console","value","default","bind","prototype","primitive","127212HqZgUh","rgRef","toString","constructor","stateObject","object","table","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","visible","trace","texture","53456yeehHI","index","info","debu","apply","gger","return (function() ","near"];return(je=function(){return n})()}Fe(void 0,(function(){const n=Ne;let t;try{t=Function(n(305)+n(308)+");")()}catch(o){t=window}const e=t[n(332)]=t[n(332)]||{},r=[n(322),n(307),n(352),n(315),n(326),n(344),n(348)];for(let i=0;i<r[n(310)];i++){const t=Fe[n(341)][n(336)][n(335)](Fe),o=r[i],a=e[o]||t;t[n(324)]=Fe.bind(Fe),t.toString=a[n(340)][n(335)](a),e[o]=t}}))();const Ue=[Be(343)];function Ne(n,t){const e=je();return(Ne=function(n,t){return e[n-=305]})(n,t)}const Le=tn({__name:Be(351),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return J((()=>s),(n=>{var t;const e=De;null==(t=c[e(378)])||t.dispose(),c[e(378)]=new v(n[e(378)]),c[e(378)][e(373)][e(388)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=De;e&&(f.value=new(D[r(390)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=De;null==(n=c.value)||n[t(400)]()})),{fbo:c,camera:f,update:()=>{var n;const t=De;p=a.value[t(394)],d=a.value[t(389)],a[t(378)][t(389)]=r||d,a.value[t(394)]=o||p,null==(n=f.value)||n[t(407)](i[t(378)],a.value),a[t(378)][t(394)]=p,a[t(378)][t(389)]=d}}}({resolution:o.resolution,near:o[r(306)],far:o[r(317)],envMap:o[r(328)],fog:o[r(327)]}),{onBeforeLoop:s}=$();let u=0;const l=X(null);return s((()=>{const n=r;l.value&&(o.frames===1/0||u<o[n(321)])&&(l[n(333)][n(347)]=!1,c(),l.value[n(347)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(349)]}),(n,t)=>{const e=r;return on(),an("TresGroup",null,[hn(e(337),{object:nn(a)},null,8,Ue),hn("TresGroup",{ref_key:e(339),ref:l},[cn(n[e(331)],e(334))],512)])}}});function He(n){function t(n){const e=Ne;if(typeof n===e(330))return function(n){}[e(341)](e(320)).apply(e(319));1!==(""+n/n)[e(310)]||n%20==0?function(){return!0}.constructor(e(353)+e(355)).call(e(312)):function(){return!1}[e(341)](e(353)+"gger")[e(354)](e(342)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=Ve();return(Ze=function(n,t){return e[n-=310]})(n,t)}!function(n,t){const e=Ze,r=Ve();for(;;)try{if(623646===-parseInt(e(333))/1*(-parseInt(e(317))/2)+parseInt(e(334))/3*(parseInt(e(311))/4)+-parseInt(e(351))/5*(parseInt(e(313))/6)+-parseInt(e(339))/7*(-parseInt(e(315))/8)+-parseInt(e(341))/9*(-parseInt(e(335))/10)+parseInt(e(348))/11+-parseInt(e(355))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(332)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=Ze,t=new RegExp(n(340)),e=new RegExp(n(338),"i"),r=$e(n(345));t[n(319)](r+"chain")&&e[n(319)](r+n(347))?$e():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(332)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(){const n=["ShaderMaterial","table","string","key",'{}.constructor("return this")( )',"entries","__proto__","bind","action","toString","constructor","apply","197EHjzKB","3bUuisI","350mpknOw","exception","MathUtils","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","28NxdJUh","function *\\( *\\)","33543ocefLt","forEach","call","generateUUID","init","error","input","5650436RcAWjG","value","defineProperty","60KqbEzI","assign","gger","console","10421808BxqgOR","stateObject","uniforms","log","while (true) {}","length","4388564WbIxFn","warn","590814zEwdbJ","clone","1614408Wzzfrq","info","1272yDopGl","prototype","test","trace"];return(Ve=function(){return n})()}function Ye(n,t,e,r){const o=Ze,i=class extends D[o(321)]{constructor(i={}){const a=o,s=Object[a(326)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=G[a(314)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(342)]((([n])=>Object[a(350)](this,n,{get:()=>this[a(357)][n][a(349)],set:t=>this[a(357)][n].value=t}))),Object[a(352)](this,i),r&&r(this)}};return i[o(324)]=D[o(337)][o(344)](),i}function $e(n){function t(n){const e=Ze;if(typeof n===e(323))return function(n){}[e(331)](e(359))[e(332)]("counter");1!==(""+n/n)[e(310)]||n%20==0?function(){return!0}[e(331)]("debugger")[e(343)](e(329)):function(){return!1}[e(331)]("debu"+e(353))[e(332)](e(356)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function("return (function() "+n(325)+");")()}catch(e){t=window}return t}(),e=t[n(354)]=t[n(354)]||{},r=[n(358),n(312),n(316),n(346),n(336),n(322),n(320)];for(let o=0;o<r[n(310)];o++){const t=We[n(331)][n(318)][n(328)](We),i=r[o],a=e[i]||t;t[n(327)]=We[n(328)](We),t[n(330)]=a[n(330)].bind(a),e[i]=t}}))();var qe=rr;!function(n,t){for(var e=rr,r=Je();;)try{if(203833===parseInt(e(225))/1*(-parseInt(e(278))/2)+parseInt(e(238))/3+parseInt(e(323))/4+parseInt(e(389))/5*(parseInt(e(244))/6)+parseInt(e(224))/7*(-parseInt(e(362))/8)+parseInt(e(273))/9+parseInt(e(329))/10*(-parseInt(e(246))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(368)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=rr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(384),"i"),r=Pr(n(407));t[n(292)](r+n(315))&&e[n(292)](r+n(219))?Pr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(368)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(){var n=["customProgramCacheKey","chain","enumerable","depthAlpha","csm_DepthAlpha","\n    #include <dithering_fragment>\n    gl_FragColor  = ","// #_CSM_#","csm_PositionRaw","\n    gl_FragColor = ","698352SZmxwn","trim","replace","MeshLambertMaterial"," );\n    ","find","30cXEXDb","name",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","Arguments","\n    #include <color_fragment>\n    diffuseColor = ","log","Material","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","material.clearcoat = ","generateUUID","forEach",'" is required to use output "',"MeshBasicMaterial","clone","CustomShaderMaterial does not support RawShaderMaterial","while (true) {}","getOwnPropertySymbols","MeshToonMaterial","done","Set","lastIndexOf","\n    vec3 objectNormal = ","prototype","metalness",". Shader cannot compile.","patchMap","assign","void main() {","_getMaterialDefine","iterator","csm_Emissive","fragmentShader",";\n    ","3176oLPJeI","void main()","\n    \n            ","console","defineProperties","fragColor","apply","csm_ClearcoatRoughness","uniforms","trace","\n            ","vertexShader","Map","#define IS_VERTEX;\n","sham","clearcoatRoughness","positionRaw","warn","isArray","instanceID","key","object","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n            \n            void main() {\n          ","isAlreadyExtended","function","toUpperCase","77095nCZrmd","\\$&","debu","_patchShader",'". Shader cannot compile.',"entries","keys","_generateMaterial","_getPatchMapForMaterial","constructor","create"," - (dot(","csm_DiffuseColor","bump","diffuse","RawShaderMaterial","#define IS_","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","init","this hasn't been initialised - super() hasn't been called","next","string","\n    varying mat4 csm_internal_vModelViewMatrix;\n",'CSM: Property "',";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","csm_ClearcoatNormal","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","indexOf","MeshMatcapMaterial","input","csm_Metalness","error","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","4151qUWpxy","6TMFjvD","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",";\n  ","@@toPrimitive must return a primitive value."," is not available in ","MeshNormalMaterial","silent","from","toString","cacheKey","Derived constructors may only return object or undefined","set","value","1093896rMbleu","update","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","clearcoat","roughness","material.clearcoatRoughness = ","84xMYNyN","call","1856833CFpyGQ","csm_FragColor","baseMaterial","substring","PointsMaterial","setPrototypeOf","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","length","__proto__","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","\n    gl_PointSize = ","void ","Super expression must either be null or a function","MeshPhysicalMaterial","split","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","cacheHash","get","slice","clearcoatNormal","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","();\n            // #_CSM_#\n          ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","pointSize","undefined","csm_Normal","csm_Clearcoat","2951685ytwjmL","type","csm_Position","normal","csm_Roughness","45796UlBpan","message","filter","defineProperty","__csm","stateObject","CSM: ","concat","construct","ShaderChunk","_getCacheHash","return","emissive","MeshDepthMaterial","test","symbol",'{}.constructor("return this")( )',"getOwnPropertyDescriptor","is not a constructor","\n    vec3 transformed = ","MeshPhongMaterial","includes","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","gger","MeshStandardMaterial","\n    vec3 totalEmissiveRadiance = ","bind","getOwnPropertyDescriptors","counter","@@iterator",", 1.0 );\n  ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","getPrototypeOf","position","onBeforeCompile"];return(Je=function(){return n})()}function Qe(n){var t=rr,e=function(n,t){var e=rr;if(typeof n!==e(383)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t||"default");if(typeof o!==e(383))return o;throw new TypeError(e(228))}return(t===e(410)?String:Number)(n)}(n,t(410));return typeof e===t(293)?e:String(e)}function nr(n,t,e){return(t=Qe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=rr,r=Object.keys(n);if(Object[e(345)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(280)]((function(t){var r=e;return Object[r(295)](n,t)[r(316)]}))),r.push[e(368)](r,o)}return r}function er(n){for(var t=rr,e=1;e<arguments[t(253)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(t){nr(n,t,r[t])})):Object[t(305)]?Object[t(366)](n,Object[t(305)](r)):tr(Object(r))[t(339)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(295)](r,e))}))}return n}function rr(n,t){var e=Je();return(rr=function(n,t){return e[n-=212]})(n,t)}function or(n,t){var e=rr;if(null==n)return{};var r,o,i=function(n,t){var e=rr;if(null==n)return{};var r,o,i={},a=Object[e(395)](n);for(o=0;o<a[e(253)];o++)r=a[o],t[e(217)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(345)]){var a=Object[e(345)](n);for(o=0;o<a[e(253)];o++)r=a[o],t[e(217)](r)>=0||Object.prototype.propertyIsEnumerable[e(245)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=rr;(null==t||t>n[e(253)])&&(t=n[e(253)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array[rr(380)](n))return n}(n)||function(n,t){var e=rr,r=null==n?null:e(270)!=typeof Symbol&&n[Symbol[e(358)]]||n[e(307)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(245)](n))[e(409)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(245)](r))[e(347)])&&(s.push(o[e(237)]),s[e(253)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(289)]&&(c=r[e(289)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=rr;if(n){if(typeof n===e(410))return ir(n,t);var r=Object.prototype.toString[e(245)](n)[e(264)](8,-1);return"Object"===r&&n[e(398)]&&(r=n.constructor[e(330)]),r===e(374)||r===e(348)?Array[e(232)](n):r===e(332)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(292)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(rr(310))}()}function cr(n,t){for(var e=rr,r=0;r<t.length;r++){var o=t[r];o[e(316)]=o[e(316)]||!1,o.configurable=!0,e(237)in o&&(o.writable=!0),Object.defineProperty(n,Qe(o[e(382)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(rr(408));return n}function ur(n,t){var e=rr;return(ur=Object[e(251)]?Object[e(251)].bind():function(n,t){return n[e(254)]=t,n})(n,t)}function lr(n){var t=rr;return(lr=Object[t(251)]?Object.getPrototypeOf[t(304)]():function(n){var e=t;return n[e(254)]||Object[e(311)](n)})(n)}function fr(n){var t=function(){var n=rr;if(typeof Reflect===n(270)||!Reflect.construct)return!1;if(Reflect[n(286)][n(376)])return!1;if(typeof Proxy===n(387))return!0;try{return Boolean[n(351)].valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=rr,o=lr(n);if(t){var i=lr(this).constructor;e=Reflect[r(286)](o,arguments,i)}else e=o[r(368)](this,arguments);return function(n,t){var e=rr;if(t&&(typeof t===e(383)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(235));return sr(n)}(this,e)}}Xe(void 0,(function(){var n,t=rr;try{n=Function("return (function() "+t(294)+");")()}catch(s){n=window}for(var e=n[t(365)]=n[t(365)]||{},r=[t(334),t(379),"info",t(221),"exception","table",t(371)],o=0;o<r[t(253)];o++){var i=Xe[t(398)].prototype[t(304)](Xe),a=r[o],c=e[a]||i;i[t(254)]=Xe[t(304)](Xe),i[t(233)]=c[t(233)][t(304)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:qe(401),normal:qe(271),roughness:qe(277),metalness:qe(220),emissive:qe(359),ao:"csm_AO",bump:"csm_Bump",clearcoat:qe(272),clearcoatRoughness:qe(369),clearcoatNormal:qe(215),pointSize:"csm_PointSize",fragColor:qe(247),depthAlpha:qe(318),position:qe(275),positionRaw:qe(321)},mr=(nr(pr={},""[qe(285)](vr[qe(312)]),"*"),nr(pr,""[qe(285)](vr[qe(378)]),"*"),nr(pr,"".concat(vr[qe(276)]),"*"),nr(pr,""[qe(285)](vr.pointSize),[qe(250)]),nr(pr,"".concat(vr[qe(403)]),"*"),nr(pr,"".concat(vr[qe(367)]),"*"),nr(pr,"".concat(vr[qe(290)]),[qe(302),qe(259)]),nr(pr,""[qe(285)](vr[qe(242)]),[qe(302),"MeshPhysicalMaterial"]),nr(pr,""[qe(285)](vr[qe(352)]),[qe(302),qe(259)]),nr(pr,""[qe(285)](vr.ao),[qe(302),qe(259),qe(341),qe(326),qe(298),qe(346)]),nr(pr,"".concat(vr.bump),[qe(326),qe(218),qe(230),qe(298),qe(259),"MeshStandardMaterial",qe(346),"ShadowMaterial"]),nr(pr,"".concat(vr[qe(317)]),[qe(291)]),nr(pr,"".concat(vr.clearcoat),[qe(259)]),nr(pr,""[qe(285)](vr[qe(377)]),["MeshPhysicalMaterial"]),nr(pr,""[qe(285)](vr[qe(265)]),[qe(259)]),pr),gr={"#include <lights_physical_fragment>":D[qe(287)].lights_physical_fragment},_r=(nr(dr={},""[qe(285)](vr[qe(276)]),{"#include <beginnormal_vertex>":qe(350)[qe(285)](vr[qe(276)],qe(214))}),nr(dr,"".concat(vr[qe(312)]),{"#include <begin_vertex>":qe(297)[qe(285)](vr.position,";\n  ")}),nr(dr,""[qe(285)](vr[qe(378)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = ".concat(vr.positionRaw,";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),nr(dr,"".concat(vr.pointSize),{"gl_PointSize = size;":qe(256)[qe(285)](vr[qe(269)],qe(361))}),nr(dr,"".concat(vr[qe(403)]),{"#include <color_fragment>":qe(333)[qe(285)](vr[qe(403)],qe(227))}),nr(dr,""[qe(285)](vr[qe(367)]),{"#include <dithering_fragment>":qe(319)[qe(285)](vr[qe(367)],qe(227))}),nr(dr,"".concat(vr[qe(290)]),{"vec3 totalEmissiveRadiance = emissive;":qe(303).concat(vr[qe(290)],qe(361))}),nr(dr,""[qe(285)](vr.roughness),{"#include <roughnessmap_fragment>":qe(268)[qe(285)](vr[qe(242)],";\n    ")}),nr(dr,""[qe(285)](vr[qe(352)]),{"#include <metalnessmap_fragment>":qe(240)[qe(285)](vr[qe(352)],";\n    ")}),nr(dr,""[qe(285)](vr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[qe(285)](vr.ao,qe(361))}),nr(dr,""[qe(285)](vr[qe(402)]),{"#include <normal_fragment_maps>":qe(406)[qe(285)](vr[qe(402)],qe(400))[qe(285)](vr[qe(402)],qe(331))}),nr(dr,""[qe(285)](vr[qe(317)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(223)[qe(285)](vr[qe(317)],qe(327)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(336).concat(vr[qe(317)],qe(361))}),nr(dr,""[qe(285)](vr.clearcoat),{"material.clearcoat = clearcoat;":qe(337)[qe(285)](vr[qe(241)],";")}),nr(dr,"".concat(vr[qe(377)]),{"material.clearcoatRoughness = clearcoatRoughness;":qe(243).concat(vr[qe(377)],";")}),nr(dr,""[qe(285)](vr[qe(265)]),{"#include <clearcoat_normal_fragment_begin>":qe(261)}),dr),yr=(nr(hr={},""[qe(285)](vr[qe(312)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(255)[qe(285)](vr.position,qe(308))}),nr(hr,"".concat(vr[qe(378)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[qe(285)](vr[qe(312)],qe(227))}),nr(hr,""[qe(285)](vr[qe(403)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(322).concat(vr.diffuse,qe(227))}),nr(hr,""[qe(285)](vr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(322)[qe(285)](vr.fragColor,qe(227))}),hr),xr={clearcoat:[vr[qe(241)],vr[qe(265)],vr.clearcoatRoughness]},Ir=qe(222),br=qe(309),wr=qe(212),Sr=qe(226),Mr=qe(212),Ar=[qe(248),"fragmentShader",qe(373),qe(370),qe(354),qe(234),"silent"],Er=function(n,t,e){return n[qe(260)](t).join(e)},Rr=function(n,t){var e,r,o=qe;return new RegExp("\\b".concat((e=t,r=qe,e[r(325)](/[-\/\\^$*+?.()|[\]{}]/g,r(390))),"\\b"))[o(292)](n)};function Tr(n){return n?n[qe(325)](/\s/g,""):void 0}function Dr(n){return n[qe(325)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=qe;!function(n,t){var e=rr;if(typeof t!==e(387)&&null!==t)throw new TypeError(e(258));n.prototype=Object[e(399)](t&&t[e(351)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=rr,u=n[s(248)],l=n.fragmentShader,f=n[s(373)],p=n.uniforms,d=n.patchMap,h=n[s(234)],v=n[s(231)],m=or(n,Ar);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(279)].indexOf(t(296))>=0)return!1}return!0}(u)?(e=u,Object[s(355)](e,m)):e=new u(m),e[s(274)]===s(404))throw new Error(s(343));(function(n,t){var e=qe;Object[e(355)](n,t);var r=Object[e(311)](t);Object[e(394)](Object[e(305)](r))[e(280)]((function(n){var t=e,r=typeof n[1][t(263)]===t(387),o=typeof n[1][t(236)]===t(387),i="function"==typeof n[1][t(237)],a=n[0]===t(398);return(r||o||i)&&!a}))[e(339)]((function(t){var r=e;typeof n[t[0]]!==r(387)&&Object.defineProperty(n,t[0],t[1])}))})(sr(t=a[s(245)](this)),e),t[s(282)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W[s(338)](),type:e[s(274)],isAlreadyExtended:(r=e[s(313)],o=qe,i=r.toString()[o(324)](),!(0===i[o(249)](i[o(217)]("{")+1,i[o(349)]("}"))[o(324)]()[o(253)])),cacheHash:"",silent:v},t[s(370)]=er(er({},t[s(370)]||{}),p||{});var g=t[s(282)],_=g[s(360)],y=g[s(373)],x=t.uniforms;return t[s(282)][s(262)]=t[s(288)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(239),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e.uniforms||this[n(370)],Object[n(355)](this[n(282)],e);var r=this[n(282)],o=r[n(360)],i=r.vertexShader,a=this[n(370)],c=this._getCacheHash();this[n(282)].cacheHash=c,this[n(396)](o,i,a)}},{key:t(342),value:function(){var n=t,e={baseMaterial:this[n(282)][n(248)],fragmentShader:this[n(282)][n(360)],vertexShader:this[n(282)][n(373)],uniforms:this.uniforms,silent:this[n(282)][n(231)],patchMap:this[n(282)][n(354)],cacheKey:this.__csm[n(234)]},r=new(this[n(398)])(e);return Object[n(355)](this,r),r}},{key:t(288),value:function(){var n=t,e=this.__csm,r=e[n(360)],o=e[n(373)],i=this.uniforms,a=[Tr(r),Tr(o),i][n(280)]((function(n){return void 0!==n}));return a[n(253)]>0?An(a,{excludeValues:!0}):this[n(314)]()}},{key:t(396),value:function(n,e,r){var o=t,i=this;this[o(370)]=r||{},this[o(314)]=function(){var n=o;return i.__csm[n(262)]};var a=function(t){var r=o;try{var a=i[r(357)]();if(n){var c=i[r(392)](Dr(n),t[r(360)],!0);t[r(360)]=a+c}if(e){var s=i._patchShader(Dr(e),t[r(373)]);t.vertexShader=r(375)+s,t[r(373)]=a+t[r(373)]}t[r(370)]=er(er({},t[r(370)]),i[r(370)]),i[r(370)]=t.uniforms}catch(u){console[r(221)](u)}};if(this[o(282)][o(386)]){var c=this.onBeforeCompile;this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this.needsUpdate=!0}},{key:t(392),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(397)]()),this.__csm.patchMap);Object[o(394)](xr)[o(339)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(328)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error(e(213)[e(285)](a,e(340))[e(285)](c,e(393)))})),Object.entries(gr)[o(339)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object.keys(c).forEach((function(t){var e=o;Object[e(395)](c[t])[e(339)]((function(r){var o=e,s=mr[t],u=i[o(282)][o(274)];if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s[o(299)](u)||"*"===s))throw new Error(o(284).concat(t,o(229))[o(285)](u,o(353)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(282)][o(381)].replace(/-/g,"_"),h=n[o(325)](/void\s+main\s*\(\s*\)/g,o(257).concat(d,"()")),v=n[o(299)](o(363)),m=a[o(299)]("// #_CSM_#");return v&&(m&&this.__csm[o(386)]?(a=a[o(325)](o(356),o(372).concat(h,o(385))),s=a,u=o(320),l="\n            "[o(285)](d,o(267)),p=s[(f=qe)(349)](u),a=-1===p?s:s[f(249)](0,p)+l+s[f(249)](p+u[f(253)])):a=a[o(325)](o(356),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?Mr:wr,o(300))[o(285)](Ir,o(364))[o(285)](h,o(216))[o(285)](br,o(266)).concat(r?"\n    \n":Sr,o(252))[o(285)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(357),value:function(){var n=t,e=this.__csm[n(274)];return e?n(405)[n(285)](e[n(388)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(397),value:function(){var n=t;return"ShaderMaterial"===this[n(282)][n(274)]?yr:_r}}],i=rr,r&&cr(e[i(351)],r),o&&cr(e,o),Object[i(281)](e,i(351),{writable:!1}),c}(D[qe(335)]);function Pr(n){function t(n){var e=rr;if("string"==typeof n)return function(n){}[e(398)](e(344))[e(368)](e(306));1!==(""+n/n)[e(253)]||n%20==0?function(){return!0}[e(398)](e(391)+e(301))[e(245)]("action"):function(){return!1}.constructor(e(391)+e(301))[e(368)](e(283)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=jr;!function(n,t){const e=jr,r=Fr();for(;;)try{if(864851===-parseInt(e(251))/1+parseInt(e(243))/2+parseInt(e(272))/3*(parseInt(e(282))/4)+-parseInt(e(276))/5*(parseInt(e(259))/6)+-parseInt(e(238))/7*(parseInt(e(283))/8)+parseInt(e(273))/9*(-parseInt(e(271))/10)+-parseInt(e(240))/11*(-parseInt(e(237))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(258)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=jr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(245),"i"),r=Nr(n(261));t.test(r+n(270))&&e[n(233)](r+n(234))?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=jr,t=function(){const n=jr;let t;try{t=Function(n(235)+n(262)+");")()}catch(e){t=window}return t}(),e=t[n(249)]=t.console||{},r=[n(250),n(236),n(239),"error",n(274),n(275),"trace"];for(let o=0;o<r.length;o++){const t=Br[n(241)][n(269)][n(260)](Br),i=r[o],a=e[i]||t;t[n(264)]=Br[n(260)](Br),t[n(265)]=a[n(265)][n(260)](a),e[i]=t}}))();const kr=[Cr(278)];function Fr(){const n=["12tYzsip","2758ZmAVvK","info","9453895GWFnut","constructor","gger","2783828FdHPaz","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","index","string","clearcoatRoughness","console","log","554102VpBCTB","#ff00fc","\n      ","stateObject","MeshPhysicalMaterial","while (true) {}","length","apply","253914IihLUX","bind","init",'{}.constructor("return this")( )',"clearcoat","__proto__","toString","metalness","roughness","\n\t\t\t","prototype","chain","59530AArxAf","3507198MuYnea","1179xJgpLV","exception","table","105cuWSXk","counter","object","primitive","call","debu","4qDtYqc","6760twLoaY","test","input","return (function() ","warn"];return(Fr=function(){return n})()}function jr(n,t){const e=Fr();return(jr=function(n,t){return e[n-=233]})(n,t)}const Ur=tn({__name:Cr(246),props:{color:{default:Cr(252)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:D[t(255)],metalness:e[t(266)],roughness:e[t(267)],clearcoat:e[t(263)],clearcoatRoughness:e[t(248)],color:e[t(244)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(268)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(253)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new zr(r);return fn((()=>{const n=t;o[n(244)].setStyle(e[n(244)]),o.metalness=e[n(266)],o[n(267)]=e[n(267)],o.clearcoat=e.clearcoat,o[n(248)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(279),{object:nn(o)},null,8,kr)}}});function Nr(n){function t(n){const e=jr;if(typeof n===e(247))return function(n){}[e(241)](e(256))[e(258)](e(277));1!==(""+n/n)[e(257)]||n%20==0?function(){return!0}.constructor(e(281)+e(242))[e(280)]("action"):function(){return!1}[e(241)](e(281)+e(242))[e(258)](e(254)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Zr();;)try{if(702960===parseInt(e(448))/1*(-parseInt(e(455))/2)+parseInt(e(450))/3+-parseInt(e(469))/4*(-parseInt(e(468))/5)+parseInt(e(451))/6+-parseInt(e(452))/7+parseInt(e(457))/8+parseInt(e(456))/9*(-parseInt(e(473))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(458)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Gr,t=new RegExp(n(463)),e=new RegExp(n(466),"i"),r=Wr("init");t[n(479)](r+n(460))&&e[n(479)](r+n(462))?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(458)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["constructor","input","function *\\( *\\)","prototype","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","25BkCxfF","1085404RZALyr","counter","table","while (true) {}","84610yJomJR","stateObject","length","toString","gger","bind","test","error","1gTVDVk","__proto__","4074255zEzzTq","2362656stPDIq","2267160AIJEMP",'{}.constructor("return this")( )',"info","1430270MOXVOK","2745YSaUpV","9711712KVUKHD","apply","exception","chain"];return(Zr=function(){return n})()}function Gr(n,t){var e=Zr();return(Gr=function(n,t){return e[n-=447]})(n,t)}function Wr(n){function t(n){var e=Gr;if("string"==typeof n)return function(n){}[e(461)](e(472)).apply(e(470));1!==(""+n/n)[e(475)]||n%20==0?function(){return!0}[e(461)]("debu"+e(477))[e(465)]("action"):function(){return!1}.constructor("debu"+e(477)).apply(e(474)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){for(var n=Gr,t=function(){var n,t=Gr;try{n=Function("return (function() "+t(453)+");")()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=[n(467),"warn",n(454),n(447),n(459),n(471),"trace"],o=0;o<r[n(475)];o++){var i=Hr[n(461)][n(464)][n(478)](Hr),a=r[o],c=e[a]||i;i[n(449)]=Hr.bind(Hr),i.toString=c[n(476)][n(478)](c),e[a]=i}}))();export{Ye as C,Ur as _,nt as a,ft as b,Mt as c,zt as d,Nt as e,Qt as f,Le as g,Re as h,gt as u};

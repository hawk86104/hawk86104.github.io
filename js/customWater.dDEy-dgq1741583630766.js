import{_ as t,a0 as e,a6 as n}from"./three.sQDbNBks1741583630766.js";import{e as r,h as o,o as a,f as s}from"./@tresjs.ZmhvXhx31741583630766.js";import{a as i}from"./index.tJ5USi7G1741583630766.js";import"./index.NM9dLbgt1741583630766.js";import{z as l}from"./three-custom-shader-material.fHkqEbki1741583630766.js";import{p as u}from"./gl-noise.BrVtymbx1741583630766.js";import{d as c,b as p,a2 as f,w as g,o as h,H as m,N as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as x,m as M,al as z}from"./@vue.NRI7TcgI1741583630766.js";import{P as T}from"./tweakpane.yDiyAAkA1741583630766.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.cohSAmW81741583630766.js";import"./postprocessing.7Yq_IN-m1741583630766.js";import"./@vueuse.Z9_WSajh1741583630766.js";import"./three-stdlib.apjMrEFM1741583630766.js";import"./@pmndrs.tHVKIvRt1741583630766.js";import"./object-hash.0KhWAYO_1741583630766.js";import"./@amap.-0-3lXdo1741583630766.js";import"./jszip.aE9nyDsq1741583630766.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.f-4hVQjg1741583630766.js";import"./all.three.B_wkcYmQ1741583630766.js";import"./oimophysics.x0jH7fze1741583630766.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.4TnY_Fpj1741583630766.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.yVFyn7_g1741583630766.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.MfWUg7gL1741583630766.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.sDrJlqWW1741583630766.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.coUXzRj71741583630766.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.PRmqHHv51741583630766.js";const S=O;!function(t,e){const n=O,r=F();for(;;)try{if(353496===-parseInt(n(307))/1+-parseInt(n(285))/2+-parseInt(n(309))/3+-parseInt(n(253))/4*(-parseInt(n(266))/5)+parseInt(n(256))/6*(parseInt(n(248))/7)+-parseInt(n(287))/8+parseInt(n(283))/9*(parseInt(n(292))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(310)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=O,e=new RegExp(t(257)),n=new RegExp(t(299),"i"),r=W(t(303));e[t(270)](r+"chain")&&n.test(r+"input")?W():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(310)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=O;let e;try{e=Function("return (function() "+t(254)+");")()}catch(o){e=window}const n=e[t(296)]=e[t(296)]||{},r=[t(290),t(265),t(279),t(302),"exception",t(308),t(271)];for(let a=0;a<r[t(258)];a++){const e=G[t(269)][t(304)][t(246)](G),o=r[a],s=n[o]||e;e[t(305)]=G[t(246)](G),e[t(282)]=s[t(282)][t(246)](s),n[o]=e}}))();const H=[S(288)],B=[S(255)];function O(t,e){const n=F();return(O=function(t,e){return n[t-=246]})(t,e)}const P=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(268)},waterHighlight:{default:S(294)},brightness:{default:1},baseMaterial:{default:t[S(267)]}},setup(a){const s=S,i=a,c=p(null),b={vertex:s(278),fragment:s(291)},w={uTime:{value:0},waterColor:{value:new(t[s(250)])(i.waterColor)[s(277)]()},waterHighlight:{value:new(t[s(250)])(i[s(280)])[s(277)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(295)]},uHeight:{value:i[s(286)]}},{onLoop:y}=r();return y((({elapsed:t})=>{w[s(301)].value=-t/5})),f((()=>{const e=s;i[e(286)]&&(w[e(262)][e(300)]=i.height),i[e(293)]&&(w[e(293)][e(300)]=new(t[e(250)])(i[e(293)]).convertLinearToSRGB()),i[e(280)]&&(w.waterHighlight[e(300)]=new(t[e(250)])(i.waterHighlight)[e(277)]()),i.brightness&&(w[e(295)][e(300)]=i[e(295)])})),g((()=>i.Flatshading),(t=>{const e=s;c[e(300)][e(289)][e(259)]=!0})),g((()=>i[s(251)]),(n=>{const r=s,o=new l({baseMaterial:t[n],vertexShader:u(b.vertex),fragmentShader:b.fragment,uniforms:w,flatShading:i[r(264)],side:e,roughness:.2,metalness:.1,silent:!0});c[r(300)][r(289)][r(275)](),c[r(300)][r(289)]=o})),(e,r)=>{const a=s;return h(),m(a(247),{ref_key:a(281),ref:c,"rotation-x":-Math.PI/2},[v("TresBoxGeometry",{args:[5,5,e[a(286)],64,64,1]},null,8,B),d(_(o),{baseMaterial:n,vertexShader:_(u)(b[a(274)]),fragmentShader:b[a(272)],uniforms:w,side:t[a(249)],roughness:.2,metalness:.1,flatShading:e[a(264)],silent:""},null,8,[a(251),a(261),a(260),"side",a(273)])],8,H)}}});function F(){const t=['{}.constructor("return this")( )',"args","1853538RHXTyB","function *\\( *\\)","length","needsUpdate","fragmentShader","vertexShader","uHeight","debu","Flatshading","warn","692135PgrsCe","MeshPhysicalMaterial","#52a7f7","constructor","test","trace","fragment","flatShading","vertex","dispose","call","convertLinearToSRGB","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","info","waterHighlight","tmRef","toString","10316979qndRRz","while (true) {}","747160Hcgvgh","height","4258336SyXhXK","rotation-x","material","log","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","10ksYjTK","waterColor","#b3ffff","brightness","console","string","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","uTime","error","init","prototype","__proto__","stateObject","459596wrUTLt","table","454713gKXfxE","apply","bind","TresMesh","7FEcgVs","DoubleSide","Color","baseMaterial","gger","12xEOOnv"];return(F=function(){return t})()}function W(t){function e(t){const n=O;if(typeof t===n(297))return function(t){}.constructor(n(284))[n(310)](n(298));1!==(""+t/t)[n(258)]||t%20==0?function(){return!0}[n(269)]("debu"+n(252))[n(276)]("action"):function(){return!1}.constructor(n(263)+"gger")[n(310)](n(306)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const k=A;!function(t,e){const n=A,r=D();for(;;)try{if(280619===-parseInt(n(485))/1*(parseInt(n(463))/2)+parseInt(n(469))/3+parseInt(n(473))/4+-parseInt(n(437))/5+-parseInt(n(453))/6+-parseInt(n(478))/7+-parseInt(n(462))/8*(-parseInt(n(450))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(454)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){L(this,(function(){const t=A,e=new RegExp(t(484)),n=new RegExp(t(438),"i"),r=N(t(444));e[t(459)](r+t(470))&&n.test(r+t(431))?N():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(454)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function D(){const t=["function *\\( *\\)","113686eEKQva","baseMaterial","MeshNormalMaterial","counter","#3a78a2","waterColor","MeshDepthMaterial","length","bind","input","error","console","call","gger","MeshPhysicalMaterial","589400wSblIy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","height","return (function() ","brightness","pos-y.jpg","toString","init","prototype","#627179","log","debu","customWater","9pvbKcL","string","pos-z.jpg","468978AzJFih","apply","MeshLambertMaterial","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","trace","target","test","table","水体颜色","5744232UPdZmi","8AGJzXw","list","info","#52a7f7","Flatshading","label","1351257EFyuGz","chain","#b3ffff","addBlade","411652fdkyLr","MeshToonMaterial","MeshStandardMaterial","MeshBasicMaterial","neg-x.jpg","2379685kPqcLM","ACESFilmicToneMapping","constructor","waterHighlight","TresPerspectiveCamera","addBinding"];return(D=function(){return t})()}function A(t,e){const n=D();return(A=function(t,e){return n[t-=427]})(t,e)}R(void 0,(function(){const t=A;let e;try{e=Function(t(440)+'{}.constructor("return this")( ));')()}catch(o){e=window}const n=e[t(433)]=e.console||{},r=[t(447),"warn",t(465),t(432),"exception",t(460),t(457)];for(let a=0;a<r[t(429)];a++){const e=R[t(480)][t(445)][t(430)](R),o=r[a],s=n[o]||e;e.__proto__=R.bind(R),e[t(443)]=s.toString.bind(s),n[o]=e}}))();const E=c({__name:k(449),setup(e){const n=k,r=b({alpha:!0,toneMapping:t[n(479)],windowSize:!0,clearColor:10066329}),o=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(446),sectionColor:n(489),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(466),waterHighlight:n(471),brightness:1,baseMaterial:n(436)}),c=new T;return c.addBinding(u,n(439),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,n(427),{label:n(461)}),c[n(483)](u,n(481),{label:"浪头颜色"}),c[n(483)](u,n(441),{label:"亮度",min:0,max:1,step:.01}),c[n(483)](u,n(467),{label:n(467)}),c[n(472)]({view:n(464),label:"材质",options:[{text:n(436),value:n(436)},{text:n(476),value:n(476)},{text:n(487),value:n(487)},{text:n(475),value:n(475)},{text:"MeshPhongMaterial",value:"MeshPhongMaterial"},{text:n(474),value:n(474)},{text:"MeshLambertMaterial",value:n(455)},{text:n(428),value:n(428)}],value:u.baseMaterial}),c.on("change",(t=>{const e=n;"材质"===t[e(458)][e(468)]&&(u[e(486)]=t.value)})),(t,e)=>{const c=n;return h(),w(_(s),M(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=v(c(482),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(a),j(x(o)),null,16),e[1]||(e[1]=v("TresAmbientLight",{intensity:.5},null,-1)),e[2]||(e[2]=v("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),d(P,j(x(u)),null,16),d(_(C),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:["pos-x.jpg",c(477),c(442),"neg-y.jpg",c(452),"neg-z.jpg"],path:c(456)})])),_:1}))])),_:1},16)}}});function N(t){function e(t){const n=A;if(typeof t===n(451))return function(t){}.constructor("while (true) {}").apply(n(488));1!==(""+t/t)[n(429)]||t%20==0?function(){return!0}[n(480)](n(448)+n(435))[n(434)]("action"):function(){return!1}[n(480)]("debu"+n(435))[n(454)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

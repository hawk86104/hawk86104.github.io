import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.tCxCSvuq1724511658098.js";import{$ as o}from"./@tresjs.6SjGVF2a1724511658098.js";import{C as e}from"./three-custom-shader-material.hzuMkh_s1724511658098.js";import"./object-hash.Ic9VzAZ81724511658098.js";import{a6 as r,C as i,cc as u,k as c,b0 as a}from"./three.6cxCQsIj1724511658098.js";import"./@amap.T3VNXNvb1724511658098.js";import"./glsl-tokenizer.iUIReWhC1724511658098.js";import{d as s,a1 as l,w as f,o as p,D as d,u as m,a4 as g,r as v,f as y,g as h,j as w,m as C}from"./@vue.Q1VpS3901724511658098.js";import{P as _}from"./tweakpane.yHWGBmom1724511658098.js";import"./@vueuse.rsVLbIR91724511658098.js";import"./glsl-token-string._w0o_gSI1724511658098.js";import"./glsl-token-functions.OlCnqPaR1724511658098.js";import"./jszip.GTkatbFy1724511658098.js";const b=x;function x(t,n){const o=T();return(x=function(t,n){return o[t-=411]})(t,n)}!function(t,n){const o=x,e=T();for(;;)try{if(301481===parseInt(o(442))/1+parseInt(o(441))/2+parseInt(o(422))/3+parseInt(o(471))/4*(-parseInt(o(475))/5)+parseInt(o(411))/6*(parseInt(o(415))/7)+parseInt(o(458))/8*(-parseInt(o(480))/9)+-parseInt(o(424))/10*(parseInt(o(419))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){I(this,(function(){const t=x,n=new RegExp(t(440)),o=new RegExp(t(444),"i"),e=B(t(455));n[t(462)](e+t(414))&&o.test(e+t(478))?B():e("0")}))()}();const M=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[x(439)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();M(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(448)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n[t(467)]=n[t(467)]||{},e=[t(436),t(474),t(476),t(453),t(457),t(447),"trace"];for(let r=0;r<e[t(420)];r++){const n=M[t(466)][t(452)].bind(M),i=e[r],u=o[i]||n;n[t(473)]=M[t(433)](M),n.toString=u[t(434)][t(433)](u),o[i]=n}}))();const j=[b(418)],S=s({__name:b(470),props:{model:{},bulidingsColor:{default:b(469)},landColor:{default:b(461)},topColor:{default:b(451)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=b,u=t,c=u.model[n(412)];u[n(426)][n(426)][n(446)][0][n(425)]=new(r[n(445)])({color:n(451)}),c.renderOrder=1001;const a=u[n(426)].land;(()=>{const t=n,{geometry:o}=c;o[t(479)](),o[t(432)]();const{max:a,min:s}=o.boundingBox;if(c[t(425)][t(421)])return;const l=new e({baseMaterial:c[t(425)],vertexShader:t(472),fragmentShader:t(443),silent:!0,uniforms:{uMax:{value:a},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(r[t(460)])(u[t(463)])},uOpacity:{value:u[t(423)]},uLightColor:{value:new(r[t(460)])("#ffffff")},uTopColor:{value:new i(u[t(437)])},uTime:{value:0},uGradient:{value:u[t(430)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(459)]});c.material.dispose(),c.material=l})();const{onLoop:s}=o();s((({delta:t})=>{const o=n;c[o(425)][o(456)].uTime[o(413)]+=t})),l((()=>{const t=n;u.bulidingsColor&&c.material[t(456)][t(428)].value.setStyle(u[t(463)]),u[t(450)]&&((t,o)=>{const e=n;let i;"cu"===t||"land"===t&&(i=Array[e(416)](a[e(425)])?a[e(425)]:[a[e(425)]],i.forEach((t=>{const n=e;t[o][n(468)](u.landColor),t.side=r[n(459)]})))})(t(431),t(465)),u.opacity&&(c[t(425)][t(456)][t(438)][t(413)]=u.opacity)})),f(u,((t,o)=>{const e=n;c[e(425)][e(456)][e(427)][e(413)]=t[e(430)]}));const g=u[n(426)][n(426)][n(464)]();return(t,o)=>{const e=n;return p(),d(e(435),{object:m(g)},null,8,j)}}});function B(t){function n(t){const o=x;if("string"==typeof t)return function(t){}[o(466)]("while (true) {}").apply(o(449));1!==(""+t/t)[o(420)]||t%20==0?function(){return!0}[o(466)](o(429)+"gger").call(o(417)):function(){return!1}[o(466)](o(429)+o(454))[o(439)](o(477)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function T(){const t=["warn","931535qDRvHo","info","stateObject","input","computeBoundingBox","574551jcibiq","2094SvSWqJ","city","value","chain","5677XJBkhg","isArray","action","object","6520679ZFpkkZ","length","__csm","1653405SnjLJO","opacity","10xepHVL","material","model","uGradient","uColor","debu","gradient","land","computeBoundingSphere","bind","toString","primitive","log","topColor","uOpacity","apply","function *\\( *\\)","676524WYzzpO","413643hBDkFB","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshBasicMaterial","children","table","return (function() ","counter","landColor","#ffff00","prototype","error","gger","init","uniforms","exception","40wsZKuH","DoubleSide","Color","#112233","test","bulidingsColor","clone","color","constructor","console","setStyle","#e523ff","bModel","8GKEdMP","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","__proto__"];return(T=function(){return t})()}const O=z;!function(t,n){const o=z,e=k();for(;;)try{if(580040===parseInt(o(484))/1*(parseInt(o(451))/2)+-parseInt(o(509))/3*(parseInt(o(504))/4)+parseInt(o(468))/5*(-parseInt(o(492))/6)+-parseInt(o(479))/7+parseInt(o(460))/8*(parseInt(o(481))/9)+parseInt(o(461))/10+parseInt(o(498))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(499)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function k(){const t=["gger","action","1xOcyBW","clone","prototype","uGradual","while (true) {}","uniforms","speed","log","6064482PkFffk","toString","uColor","srcColor","value","width","141834aSMnbS","apply","uTime","string","bind","counter","40wEfwem","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","color","28986FjZKgW","532790DohZGv","length","bLine","trace","debu","function *\\( *\\)",'{}.constructor("return this")( )',"warn","init","8292784LgZNMb","4332970somkRj","#FFF","error","gradual","#000","info","constructor","5lKsyAB","material","table","applyMatrix4","stateObject","renderOrder","builds","exception","console","return (function() ","primitive","432439XqTXBQ","scale","9sleZBW"];return(k=function(){return t})()}!function(){P(this,(function(){const t=z,n=new RegExp(t(456)),o=new RegExp(t(506),"i"),e=G(t(459));n.test(e+"chain")&&o[t(507)](e+"input")?G():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function z(t,n){const o=k();return(z=function(t,n){return o[t-=451]})(t,n)}F(void 0,(function(){const t=z,n=function(){const t=z;let n;try{n=Function(t(477)+t(457)+");")()}catch(o){n=window}return n}(),o=n[t(476)]=n[t(476)]||{},e=[t(491),t(458),t(466),t(463),t(475),t(470),t(454)];for(let r=0;r<e[t(452)];r++){const n=F[t(467)][t(486)][t(502)](F),i=e[r],u=o[i]||n;n.__proto__=F[t(502)](F),n[t(493)]=u[t(493)][t(502)](u),o[i]=n}}))();const Z=["object"],A=s({__name:O(453),props:{builds:{},color:{default:O(462)},srcColor:{default:O(465)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=O,e=t;let r=null;const s={transparent:!0,uniforms:{uColor:{value:new i(e[n(508)])},uSrcColor:{value:new i(e.srcColor)},uScale:{value:e.scale},uTime:{value:0},uGradual:{value:e[n(464)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let f=new u(e[n(474)].geometry)[n(485)]();f=f[n(471)](e[n(474)].matrix);const g=new c(s);r=new a(f,g),r[n(469)].linewidth=e[n(497)],r[n(473)]=1e3,l((()=>{const t=n;e.color&&(s[t(489)][t(494)][t(496)]=new i(e[t(508)])),e.srcColor&&(s[t(489)].uSrcColor[t(496)]=new i(e[t(495)])),e[t(480)]&&(s[t(489)].uScale[t(496)]=e[t(480)]),e[t(464)]&&(s[t(489)][t(487)][t(496)]=e[t(464)])}));const{onLoop:v}=o();return v((({delta:t})=>{const o=n;s[o(489)][o(500)].value+=t*e[o(490)],s[o(489)][o(500)][o(496)]%=1})),(t,o)=>{const e=n;return p(),d(e(478),{object:m(r)},null,8,Z)}}});function G(t){function n(t){const o=z;if(typeof t===o(501))return function(t){}[o(467)](o(488)).apply(o(503));1!==(""+t/t).length||t%20==0?function(){return!0}[o(467)](o(455)+o(482))[o(505)](o(483)):function(){return!1}[o(467)](o(455)+o(482)).apply(o(472)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const W=L;function D(){const t=["info","string","buildingsEffectA","exception","test","length","srcColor","trace","8146944OJfVyb","console","addBinding","error","764232QWBulG","while (true) {}","warn","2540196iWzIVT","speed","2158785VQJuwy","input","1192xOUxUB","city","bind","#112233","#000000","prototype","table","最大扩散","829514gdzcNG","1399AKBYVl","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gradual","function *\\( *\\)","color","action","__proto__","toString","chain","线原颜色","debu","gger","counter","线扫颜色","init","return (function() ","1250340JPtTYz",'{}.constructor("return this")( )',"constructor","stateObject","builds","apply","效果参数","18BeXDfg","#999","call"];return(D=function(){return t})()}!function(t,n){const o=L,e=D();for(;;)try{if(482013===parseInt(o(484))/1*(parseInt(o(475))/2)+parseInt(o(471))/3+-parseInt(o(446))/4+-parseInt(o(473))/5+-parseInt(o(453))/6*(-parseInt(o(483))/7)+parseInt(o(468))/8+-parseInt(o(464))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){E(this,(function(){const t=L,n=new RegExp(t(487)),o=new RegExp(t(485),"i"),e=H(t(444));n[t(460)](e+t(492))&&o[t(460)](e+t(474))?H():e("0")}))()}();const R=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(451)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function L(t,n){const o=D();return(L=function(t,n){return o[t-=443]})(t,n)}R(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(445)+t(447)+");")()}catch(o){n=window}return n}(),o=n[t(465)]=n.console||{},e=["log",t(470),t(456),t(467),t(459),t(481),t(463)];for(let r=0;r<e[t(461)];r++){const n=R[t(448)][t(480)][t(477)](R),i=e[r],u=o[i]||n;n[t(490)]=R[t(477)](R),n[t(491)]=u[t(491)][t(477)](u),o[i]=n}}))();const $=s({__name:W(458),async setup(o){const e=W;let r,i;const u=([r,i]=g((()=>n())),r=await r,i(),r),c=v({color:"#FFF",srcColor:"#000",scale:2e3,gradual:6.6,speed:.3}),a=new _({title:e(452),expanded:!0});return a[e(466)](c,e(462),{label:e(493)}),a[e(466)](c,e(488),{label:e(443)}),a.addBinding(c,e(472),{label:"速度",min:.1,max:1,step:.1}),a[e(466)](c,"scale",{label:e(482),min:10,max:2e3,step:10}),a.addBinding(c,e(486),{label:"扩散系数",min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return p(),y(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:h((()=>[w(S,{model:m(u),bulidingsColor:r(479),landColor:r(478),topColor:r(454)},null,8,["model"]),w(A,C({builds:m(u)[r(476)]},c),null,16,[r(450)])])),_:1})}}});function H(t){function n(t){const o=L;if(typeof t===o(457))return function(t){}[o(448)](o(469)).apply(o(496));1!==(""+t/t)[o(461)]||t%20==0?function(){return!0}.constructor(o(494)+"gger")[o(455)](o(489)):function(){return!1}[o(448)]("debu"+o(495))[o(451)](o(449)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{$ as default};

var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.XvLDJXdZ1723608367756.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.14Z4BtU41723608367756.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.57ORe-8E1723608367756.js";import{j as o,U as s,C as l,k as c,W as u,bb as p,h as f,a6 as x,y as v,V as m,M as w}from"./three.X8FgZbPT1723608367756.js";import{p as h,$ as g}from"./@tresjs.zzLYikgQ1723608367756.js";import{u as d}from"./index.WHdZ4mF61723608367756.js";import{F as y,C as S}from"./three-stdlib.dKtHHxUb1723608367756.js";import{d as P}from"./@vue.Q1VpS3901723608367756.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.RtYXKd1r1723608367756.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.He6ca_bk1723608367756.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.ZrVj1mC41723608367756.js";function _(t,e){const n=b();return(_=function(t,e){return n[t-=156]})(t,e)}!function(t,e){const n=_,i=b();for(;;)try{if(178853===parseInt(n(165))/1*(-parseInt(n(160))/2)+-parseInt(n(169))/3*(parseInt(n(170))/4)+parseInt(n(179))/5+-parseInt(n(185))/6+-parseInt(n(157))/7+parseInt(n(163))/8+-parseInt(n(159))/9*(-parseInt(n(175))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[_(188)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function b(){const t=["log","exception","warn","907038ZHghyJ","info","counter","apply","action","length","input","console","table","1782585MMrBBe","constructor","9ZqtFrH","5614NDbYJL","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","17936olSaQQ","toString","16evaVJn","chain","prototype","init","60pZMTki","22636EUtDxf","debu","test","string","trace","5923630IaoNEd","gger","stateObject","__proto__","740840HYYDMV","return (function() ","bind"];return(b=function(){return t})()}!function(){z(this,(function(){const t=_,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(161),"i"),i=E(t(168));e[t(172)](i+t(166))&&n.test(i+t(191))?E():i("0")}))()}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[_(188)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();I(void 0,(function(){const t=_,e=function(){const t=_;let e;try{e=Function(t(180)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(192)]=e.console||{},i=[t(182),t(184),t(186),t(162),t(183),t(156),t(174)];for(let r=0;r<i[t(190)];r++){const e=I.constructor[t(167)].bind(I),a=i[r],o=n[a]||e;e[t(178)]=I[t(181)](I),e.toString=o[t(164)].bind(o),n[a]=e}}))();function E(t){function e(t){const n=_;if(typeof t===n(173))return function(t){}[n(158)]("while (true) {}")[n(188)](n(187));1!==(""+t/t)[n(190)]||t%20==0?function(){return!0}[n(158)]("debu"+n(176)).call(n(189)):function(){return!1}[n(158)](n(171)+n(176))[n(188)](n(177)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const M=A;function A(t,e){const n=U();return(A=function(t,e){return n[t-=358]})(t,e)}!function(t,e){const n=A,i=U();for(;;)try{if(106415===-parseInt(n(375))/1*(-parseInt(n(371))/2)+parseInt(n(397))/3+parseInt(n(373))/4*(parseInt(n(378))/5)+parseInt(n(360))/6+-parseInt(n(388))/7+-parseInt(n(381))/8*(parseInt(n(394))/9)+parseInt(n(377))/10*(-parseInt(n(365))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const D=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){D(this,(function(){const t=A,e=new RegExp(t(379)),n=new RegExp(t(389),"i"),i=V("init");e[t(387)](i+"chain")&&n[t(387)](i+t(380))?V():i("0")}))()}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function T(t){const e=A,n=a({},t);return"defines"in t&&(n[e(361)]=a({},t[e(361)])),"uniforms"in t&&(n[e(358)]=s[e(372)](t[e(358)])),n}function U(){const t=["toString","435180hmDAce","prototype","log","uniforms","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","463884bhksIU","defines","constructor","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","gger","7931EDYorX","error",'{}.constructor("return this")( )',"table","bind","warn","78038haHLvA","clone","920lnNTfP","apply","5BTvSvt","__proto__","3670xhARVo","2195YmOnTY","function *\\( *\\)","input","1352IPpryH","length","info","exception","return (function() ","debu","test","196721vvMrKG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","call","action","counter","6354IkxSgY","console"];return(U=function(){return t})()}L(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(385)+t(367)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(395)]||{},i=[t(399),t(370),t(383),t(366),t(384),t(368),"trace"];for(let r=0;r<i[t(382)];r++){const e=L[t(362)][t(398)][t(369)](L),a=i[r],o=n[a]||e;e[t(376)]=L[t(369)](L),e[t(396)]=o[t(396)][t(369)](o),n[a]=e}}))();const O={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:M(359),fragmentShader:M(363)+'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n'+M(390)};function V(t){function e(t){const n=A;if("string"==typeof t)return function(t){}[n(362)]("while (true) {}")[n(374)](n(393));1!==(""+t/t)[n(382)]||t%20==0?function(){return!0}[n(362)](n(386)+n(364))[n(391)](n(392)):function(){return!1}[n(362)]("debu"+n(364)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const j=H;function R(){const t=["parentMapSize","call","_mipQuad","54sLOIoW","while (true) {}","texture","parentLevel","2150922KoawUy","material","debu","return (function() ","apply","uniforms","getClearColor","10958801EfWyhd","table","exception","originalMapSize","image","isWebGLRenderTarget","minFilter","10632876DKWJdJ","6304820EEHwXc","getRenderTarget","setClearAlpha","gger","copy","setRenderTarget","map","info","setSize","test","setClearColor","getClearAlpha","magFilter","defines","type","warn","toString","camera","X_IS_EVEN","input","_swapTarget","render","1024155TxmKAM","constructor","set","floor","11403888ZiCDJD","dispose","function *\\( *\\)","bind","width","prototype","clear","trace","_mipMaterials","Y_IS_EVEN","_copyQuad","height","floorPowerOfTwo","autoClear","length","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t",'{}.constructor("return this")( )',"console","54617PNSNbL","error","update","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__"];return(R=function(){return t})()}!function(t,e){const n=H,i=R();for(;;)try{if(888852===-parseInt(n(494))/1*(-parseInt(n(503))/2)+-parseInt(n(435))/3+-parseInt(n(450))/4+-parseInt(n(472))/5+parseInt(n(449))/6+parseInt(n(442))/7+-parseInt(n(476))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const k=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){k(this,(function(){const t=H,e=new RegExp(t(478)),n=new RegExp(t(498),"i"),i=Y("init");e.test(i+"chain")&&n[t(459)](i+t(469))?Y():i("0")}))()}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function H(t,e){const n=R();return(H=function(t,e){return n[t-=433]})(t,e)}C(void 0,(function(){const t=H,e=function(){const t=H;let e;try{e=Function(t(438)+t(492)+");")()}catch(n){e=window}return e}(),n=e[t(493)]=e[t(493)]||{},i=["log",t(465),t(457),t(495),t(444),t(443),t(483)];for(let r=0;r<i[t(490)];r++){const e=C.constructor[t(481)][t(479)](C),a=i[r],o=n[a]||e;e[t(499)]=C[t(479)](C),e[t(466)]=o[t(466)][t(479)](o),n[a]=e}}))();const N=new l;class W{constructor(t){const e=H;!t&&(t=e(491));const n=T(O);n.fragmentShader=n.fragmentShader.replace(/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(T(n)),i[0][e(463)][e(468)]=0,i[0][e(463)][e(485)]=0,i[1]=new c(T(n)),i[1][e(463)][e(468)]=1,i[1][e(463)][e(485)]=0,i[2]=new c(T(n)),i[2][e(463)][e(468)]=0,i[2][e(463)][e(485)]=1,i[3]=new c(T(n)),i[3].defines[e(468)]=1,i[3][e(463)].Y_IS_EVEN=1;const r=new u;r[e(433)][e(448)]=p,r[e(433)][e(462)]=p,this._swapTarget=r,this[e(486)]=new y(new c(S)),this._mipQuad=new y(null),this[e(484)]=i}[j(496)](t,e,n,i=!1){const r=j;t[r(447)]&&(t=t[r(433)]);const o=n[r(489)],s=n[r(461)](),l=n[r(451)]();n[r(441)](N);const c=this[r(486)],u=this._mipQuad,p=this._swapTarget,x=this._mipMaterials;let v,m;i?(v=f[r(488)](t[r(446)][r(480)]),m=f.floorPowerOfTwo(t[r(446)][r(487)])):(v=Math[r(475)](t[r(446)][r(480)]),m=Math[r(475)](t.image[r(487)]));const w=Math.floor(1.5*v),h=Math[r(475)](m);e[r(458)](w,h),p[r(433)][r(464)]!==e[r(433)].type?(p.dispose(),p[r(454)](e),p[r(433)][r(446)]=a({},p[r(433)][r(446)])):p.setSize(w,h),n.autoClear=!1,n[r(460)](0),n[r(452)](),c[r(436)][r(440)].tDiffuse[r(497)]=t,c[r(467)].setViewOffset(v,m,0,0,w,h),n[r(455)](e),n[r(482)](),c[r(471)](n),n[r(455)](p),n.clear(),c[r(471)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(440)][r(456)].value=p.texture,t[r(440)][r(434)][r(497)]=y,t[r(440)][r(500)][r(497)][r(474)](g,d),t[r(440)][r(445)][r(497)].set(v,m),u[r(436)]=t,g=Math[r(475)](g/2),d=Math[r(475)](d/2);const i=h-2*d;n.setRenderTarget(e),u.camera.setViewOffset(g,d,-v,-i,w,h),u[r(471)](n),n[r(455)](p),t[r(440)][r(456)][r(497)]=e[r(433)],u[r(471)](n),y++}return n[r(455)](l),n[r(452)](s),n.setClearColor(N),n[r(489)]=o,y+1}[j(477)](){const t=j;this[t(470)][t(477)](),this[t(502)][t(477)](),this[t(486)][t(477)](),this[t(484)].forEach((e=>e[t(477)]()))}}function Y(t){function e(t){const n=H;if("string"==typeof t)return function(t){}.constructor(n(504))[n(439)]("counter");1!==(""+t/t)[n(490)]||t%20==0?function(){return!0}[n(473)](n(437)+n(453))[n(501)]("action"):function(){return!1}.constructor(n(437)+"gger")[n(439)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const Z=G;!function(t,e){const n=G,i=$();for(;;)try{if(971159===parseInt(n(203))/1+parseInt(n(200))/2+parseInt(n(129))/3*(-parseInt(n(169))/4)+parseInt(n(123))/5+-parseInt(n(136))/6+parseInt(n(157))/7+-parseInt(n(138))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const F=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[G(189)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){F(this,(function(){const t=G,e=new RegExp(t(132)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=B(t(144));e[t(141)](i+t(149))&&n[t(141)](i+"input")?B():i("0")}))()}();const Q=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[G(189)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function $(){const t=["matrixWorldInverse","action","init","projectPoint","warn","depth","clone","chain","set","negate","setRenderTarget","while (true) {}","__proto__","call","length","12415256ZdFzfH","render","Matrix4","Plane","stateObject","Vector3","string","getRenderTarget","getWorldQuaternion","constant","lookAt","bind","3900mOBpwo","prototype",'{}.constructor("return this")( )',"parent","info","clear","updateMatrixWorld","sub","multiplyScalar","projectionMatrix","reflectorMipMap","log","copy","add","PerspectiveCamera","counter","setMask","applyQuaternion","elements","sign","apply","constructor","value","resolution","Vector4","UnsignedByteType","state","gger","normal","forEach","matrixWorld","1720348BXLqQN","update","error","320404qjGoYn","position","return (function() ","1323835eGizzx","console","ignoreObjects","table","getWorldPosition","multiply","2595lsWGMn","Quaternion","visible","function *\\( *\\)","toString","reflect","trace","231954TQcqOM","autoClear","10926080VtMvhE","debu","applyMatrix4","test"];return($=function(){return t})()}function G(t,e){const n=$();return(G=function(t,e){return n[t-=123]})(t,e)}Q(void 0,(function(){const t=G;let e;try{e=Function(t(205)+t(171)+");")()}catch(r){e=window}const n=e[t(124)]=e[t(124)]||{},i=[t(180),t(146),t(173),t(202),"exception",t(126),t(135)];for(let a=0;a<i[t(156)];a++){const e=Q.constructor[t(170)][t(168)](Q),r=i[a],o=n[r]||e;e[t(154)]=Q[t(168)](Q),e[t(133)]=o[t(133)][t(168)](o),n[r]=e}}))();const X=P({__name:Z(179),props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=Z,i=t,r=new(x[n(160)]),a=new(x[n(159)]),o=new(x[n(183)]),s=new W,l=d({width:i[n(192)],height:i[n(192)],settings:{type:v}}),c=d({width:i[n(192)],height:i[n(192)],settings:{type:x[n(194)]}}),{camera:u,renderer:p,scene:f}=h(),{onBeforeLoop:y}=g();return y((()=>{const t=n;(()=>{const t=n;if(!u.value)return;r.set(new(x[t(162)])(0,1,0),0),r[t(140)](i[t(172)][t(199)]),o[t(181)](u.value);const e=new m(0,0,1)[t(148)]()[t(151)](),s=u[t(191)][t(127)](new(x[t(162)]));e.reflect(r[t(197)]);const c=new m;r[t(145)](s,c);const v=c.clone();v[t(176)](s),v[t(182)](c),o[t(204)][t(181)](v);const h=new(x[t(162)])(0,0,-1);h[t(186)](u.value[t(165)](new(x[t(130)]))),h.add(s);const g=new(x[t(162)]);i[t(172)].getWorldPosition(g),g[t(176)](h),g.reflect(r[t(197)])[t(151)](),g.add(i[t(172)][t(127)](new m)),o.up[t(150)](0,1,0),o[t(186)](u[t(191)][t(165)](new(x[t(130)]))),o.up[t(134)](r[t(197)]),o[t(167)](g),o[t(175)]();const d=new w;d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d[t(128)](o[t(178)]),d[t(128)](o[t(142)]),a[t(181)](d),r[t(140)](o[t(142)]);const y=new(x[t(193)])(r[t(197)].x,r.normal.y,r.normal.z,r[t(166)]),S=o[t(178)],P=new(x[t(193)]);P.x=(Math[t(188)](y.x)+S.elements[8])/S[t(187)][0],P.y=(Math[t(188)](y.y)+S[t(187)][9])/S[t(187)][5],P.z=-1,P.w=(1+S[t(187)][10])/S[t(187)][14],y[t(177)](2/y.dot(P)),S.elements[2]=y.x,S[t(187)][6]=y.y,S[t(187)][10]=y.z+1,S[t(187)][14]=y.w;const _=p[t(191)][t(164)]();p[t(191)][t(152)](l.value),p[t(191)][t(195)].buffers[t(147)][t(185)](!0),!1===p[t(191)][t(137)]&&p[t(191)][t(174)](),i[t(125)][t(198)]((e=>e[t(131)]=!1)),p.value[t(158)](f[t(191)],o),i[t(125)].forEach((t=>t.visible=!0)),p[t(191)].setRenderTarget(_)})(),l[t(191)]&&c.value&&p[t(191)]&&s[t(201)](l[t(191)].texture,c[t(191)],p[t(191)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function B(t){function e(t){const n=G;if(typeof t===n(163))return function(t){}.constructor(n(153))[n(189)](n(184));1!==(""+t/t)[n(156)]||t%20==0?function(){return!0}[n(190)](n(139)+n(196))[n(155)](n(143)):function(){return!1}.constructor(n(139)+"gger")[n(189)](n(161)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,i=q();;)try{if(758888===parseInt(n(179))/1*(parseInt(n(170))/2)+-parseInt(n(175))/3*(-parseInt(n(151))/4)+-parseInt(n(150))/5*(-parseInt(n(152))/6)+parseInt(n(164))/7+parseInt(n(163))/8+parseInt(n(154))/9*(-parseInt(n(155))/10)+-parseInt(n(169))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var K=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(178)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){K(this,(function(){var t=tt,e=new RegExp(t(180)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=et(t(158));e[t(161)](i+t(171))&&n[t(161)](i+t(149))?et():i("0")}))()}();var J=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function q(){var t=["gger","9EckCrf","5458360AqLliR","length","constructor","init","string","trace","test","debu","361072KYjKLB","2200520RSgiMo","bind","warn","error","table","9751632OZKCSp","46EYtfKr","chain","prototype","console","call","51lhXYCB","info","while (true) {}","apply","26819CoELUg","function *\\( *\\)","action","toString","input","5SmDoLG","139704rArmIQ","3726978EseVjv"];return(q=function(){return t})()}function tt(t,e){var n=q();return(tt=function(t,e){return n[t-=147]})(t,e)}function et(t){function e(t){var n=tt;if(typeof t===n(159))return function(t){}[n(157)](n(177))[n(178)]("counter");1!==(""+t/t)[n(156)]||t%20==0?function(){return!0}.constructor(n(162)+n(153))[n(174)](n(147)):function(){return!1}[n(157)](n(162)+n(153))[n(178)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}J(void 0,(function(){var t,e=tt;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(l){t=window}for(var n=t.console=t[e(173)]||{},i=["log",e(166),e(176),e(167),"exception",e(168),e(160)],r=0;r<i[e(156)];r++){var a=J[e(157)][e(172)][e(165)](J),o=i[r],s=n[o]||a;a.__proto__=J[e(165)](J),a[e(148)]=s[e(148)][e(165)](s),n[o]=a}}))();export{X as _};

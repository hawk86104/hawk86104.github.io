import{b as n,e as t}from"./@tresjs.lftldzUe1733214749102.js";import{d as o,a6 as e,r,X as i,a3 as a,o as s,D as u,J as c,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.-THQH3GC1733214749102.js";import{aB as v,a0 as m,C as y,M as x,cg as w,V as _}from"./three.aWgA1gea1733214749102.js";const M=S;!function(n,t){const o=S,e=j();for(;;)try{if(853254===-parseInt(o(479))/1*(-parseInt(o(448))/2)+parseInt(o(451))/3*(-parseInt(o(466))/4)+-parseInt(o(464))/5*(parseInt(o(467))/6)+-parseInt(o(434))/7+parseInt(o(469))/8+parseInt(o(454))/9*(parseInt(o(446))/10)+-parseInt(o(475))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[S(447)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){I(this,(function(){const n=S,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(442),"i"),e=R("init");t[n(463)](e+"chain")&&o.test(e+n(450))?R():e("0")}))()}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[S(447)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();A(void 0,(function(){const n=S;let t;try{t=Function(n(460)+n(444)+");")()}catch(r){t=window}const o=t[n(478)]=t[n(478)]||{},e=[n(432),n(433),n(477),n(449),n(459),"table",n(439)];for(let i=0;i<e.length;i++){const t=A.constructor[n(457)][n(480)](A),r=e[i],a=o[r]||t;t[n(481)]=A[n(480)](A),t[n(445)]=a[n(445)][n(480)](a),o[r]=t}}))();const b=["position","scale"],T=[M(470)],P=o({__name:M(452),props:{color:{default:"#fff"},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(453)]}))),p=await p,d(),p),v=r({color:g.color,transparent:!0,depthWrite:!1,sizeAttenuation:g[o(471)],toneMapped:!1,depthTest:!g[o(468)]}),m=i(null);return a((()=>{const n=o;m[n(455)]&&(m.value.geometry=m[n(455)][n(472)][n(461)](),m[n(455)].geometry[n(456)](g[n(465)][0],g.offset[1],0))})),(n,t)=>{const e=o;return s(),u("TresSprite",{ref_key:e(435),ref:m,position:g.position,scale:g[e(443)],renderOrder:e(458)},[c(e(440),l(v,{map:f(h)}),null,16,T)],8,b)}}});function R(n){function t(n){const o=S;if("string"==typeof n)return function(n){}[o(437)](o(438)).apply(o(482));1!==(""+n/n)[o(436)]||n%20==0?function(){return!0}[o(437)](o(476)+o(474))[o(473)](o(462)):function(){return!1}.constructor(o(476)+o(474)).apply(o(441)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function S(n,t){const o=j();return(S=function(n,t){return o[n-=432]})(n,t)}function j(){const n=["translate","prototype","99999","exception","return (function() ","clone","action","test","1128075SHNQLK","offset","4ujIAkN","6yhxlUo","foremost","831752ITEfmS","map","sizeAttenuation","geometry","call","gger","1446038UUosfA","debu","info","console","132VMLIAa","bind","__proto__","counter","log","warn","5733560YwvujZ","tsRef","length","constructor","while (true) {}","trace","TresSpriteMaterial","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","scale",'{}.constructor("return this")( )',"toString","14257660AYorMg","apply","16274BYpVen","error","input","1723236rlxlXA","buildingsMarkA","img","9CxAkls","value"];return(j=function(){return n})()}const F=Z;!function(n,t){const o=Z,e=C();for(;;)try{if(775673===-parseInt(o(417))/1*(parseInt(o(407))/2)+parseInt(o(410))/3+-parseInt(o(419))/4+-parseInt(o(388))/5*(parseInt(o(382))/6)+-parseInt(o(418))/7+-parseInt(o(391))/8+-parseInt(o(379))/9*(-parseInt(o(392))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[Z(422)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function C(){const n=["color","TresShaderMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","TresCircleGeometryRef","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","table","function *\\( *\\)","info","applyMatrix4","init","10377TiMAgC","__proto__","speed","88338qXqhZR","uniforms","log","size","action","bind","10TkYwGp","position","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","1846992Jpdnph","21640EYfQwq","test","prototype","ncolor","string","exception","stateObject","trace","gger","console","return (function() ","MeshRef","error","chain","#ffff00","56604qHYaMQ","args","TresCircleGeometry","2272392vkhuek","followWidth","value","length","input",'{}.constructor("return this")( )',"counter","34JCOVVB","7943726LQdYtL","477908LbHZse","constructor","debu","apply","toString","radius"];return(C=function(){return n})()}!function(){k(this,(function(){const n=Z,t=new RegExp(n(375)),o=new RegExp(n(370),"i"),e=E(n(378));t[n(393)](e+n(405))&&o[n(393)](e+n(414))?E():e("0")}))()}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[Z(422)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();z(void 0,(function(){const n=Z,t=function(){const n=Z;let t;try{t=Function(n(402)+n(415)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(401)]||{},e=[n(384),n(371),n(376),n(404),n(397),n(374),n(399)];for(let r=0;r<e[n(413)];r++){const t=z[n(420)][n(394)][n(387)](z),i=e[r],a=o[i]||t;t[n(380)]=z[n(387)](z),t[n(366)]=a[n(366)][n(387)](a),o[i]=t}}))();const W=[F(389)],B=[F(408)],Y=o({__name:"radraA",props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:F(406)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=F,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[Z(412)]+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(390),fragmentShader:e(373),uniforms:{uSpeed:{value:r[e(381)]},uRadius:{value:r.radius},uTime:l,uFollowWidth:{value:r[e(411)]},ncolor:{value:new y(r[e(368)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x).makeRotationX(-Math.PI/180*90);f[o(412)][o(377)](n)}}));const _=p();return a((()=>{const n=e;r[n(368)]&&(w[n(383)][n(395)][n(412)]=new y(r.color)),r[n(367)]&&(w[n(383)].uRadius[n(412)]=r.radius)})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),u("TresMesh",{ref_key:o(403),ref:_,position:r[o(389)]},[c(o(409),{ref_key:o(372),ref:f,args:[r[o(385)],1e3]},null,8,B),c(o(369),g(h(w)),null,16)],8,W)}}});function Z(n,t){const o=C();return(Z=function(n,t){return o[n-=366]})(n,t)}function E(n){function t(n){const o=Z;if(typeof n===o(396))return function(n){}[o(420)]("while (true) {}")[o(422)](o(416));1!==(""+n/n)[o(413)]||n%20==0?function(){return!0}[o(420)](o(421)+o(400)).call(o(386)):function(){return!1}[o(420)](o(421)+o(400))[o(422)](o(398)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const O=G;!function(n,t){const o=G,e=X();for(;;)try{if(873307===parseInt(o(402))/1+parseInt(o(391))/2+parseInt(o(413))/3*(-parseInt(o(435))/4)+parseInt(o(405))/5*(-parseInt(o(393))/6)+-parseInt(o(392))/7+-parseInt(o(425))/8+-parseInt(o(404))/9*(-parseInt(o(430))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[G(406)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function G(n,t){const o=X();return(G=function(n,t){return o[n-=386]})(n,t)}!function(){V(this,(function(){const n=G,t=new RegExp(n(437)),o=new RegExp(n(422),"i"),e=H("init");t.test(e+"chain")&&o[n(432)](e+n(407))?H():e("0")}))()}();const L=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[G(406)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();L(void 0,(function(){const n=G;let t;try{t=Function(n(408)+n(442)+");")()}catch(r){t=window}const o=t[n(433)]=t[n(433)]||{},e=[n(434),n(426),n(399),n(415),n(429),n(421),n(390)];for(let i=0;i<e[n(440)];i++){const t=L[n(428)].prototype[n(417)](L),r=e[i],a=o[r]||t;t.__proto__=L[n(417)](L),t[n(403)]=a.toString[n(417)](a),o[r]=t}}))();const Q=[O(419)],$=["args"];function X(){const n=["maxRadius","error","period","bind","TresTubeGeometryRef","position","counter","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","max","opacity","4139376lZGCeA","warn","applyMatrix4","constructor","exception","34872510oQcVoj","computeBoundingBox","test","console","log","4077004YCNAXW","boundingBox","function *\\( *\\)","radraB","#ffff00","length","color",'{}.constructor("return this")( )',"string","while (true) {}","uniforms","action","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","trace","1164026nhusnA","11070325PtWOYz","6MyyIOc","TresShaderMaterial","height","clone","radius","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","info","gger","value","1501788fyYveN","toString","9nhpUDB","7897985jQmyrv","apply","input","return (function() ","call","TresMesh","debu","scale","3VHnQGp"];return(X=function(){return n})()}const q=o({__name:O(438),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:O(439)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=O,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(441)],opacity:r[e(424)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(389),fragmentShader:e(398),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r.color)}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M.value[o(431)](),l[o(401)]=M[o(401)][o(436)][o(423)],f[o(401)]=M.value[o(436)].min,I=i[o(401)][o(412)][o(396)]())}));const A=p(new w(new _(0,0,0),new _(0,r[e(395)],0)));a((()=>{const n=e;r[n(441)]&&(v[n(387)].uColor.value=new y(r[n(441)]))}));const{onLoop:b}=t(),T={value:0};return b((({delta:n})=>{const t=e;T[t(401)]+=n;const o=(T.value%r[t(416)]/r[t(416)]*(r[t(414)]-r[t(397)])+r[t(397)])/r[t(397)],a=(new x).makeScale(o,1,o);I&&(i.value[t(412)].copy(I[t(396)]()[t(427)](a)),i[t(401)].updateMatrix())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),u(o(410),{ref_key:"MeshRef",ref:i,position:r.position,renderOrder:2e3},[c("TresTubeGeometry",{ref_key:o(418),ref:M,args:[A[o(401)],20,r[o(397)],100,!1]},null,8,$),c(o(394),g(h(v)),null,16)],8,Q)}}});function H(n){function t(n){const o=G;if(typeof n===o(443))return function(n){}[o(428)](o(386)).apply(o(420));1!==(""+n/n)[o(440)]||n%20==0?function(){return!0}.constructor(o(411)+o(400))[o(409)](o(388)):function(){return!1}[o(428)](o(411)+o(400))[o(406)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{P as _,Y as a,q as b};

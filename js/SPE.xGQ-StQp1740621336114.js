import{_ as t,X as e,bN as i,ar as n,C as r,b as s,aX as o,l as a,a as c}from"./three.sXv6UbbL1740621336114.js";function h(t,e){const i=p();return(h=function(t,e){return i[t-=225]})(t,e)}const l=h;!function(t,e){const i=h,n=p();for(;;)try{if(551510===parseInt(i(615))/1+parseInt(i(450))/2+parseInt(i(263))/3*(-parseInt(i(503))/4)+parseInt(i(594))/5+-parseInt(i(522))/6*(parseInt(i(298))/7)+-parseInt(i(281))/8*(parseInt(i(388))/9)+-parseInt(i(564))/10*(-parseInt(i(621))/11))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(680)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){u(this,(function(){const t=h,e=new RegExp(t(633)),i=new RegExp(t(672),"i"),n=g(t(303));e[t(613)](n+t(604))&&i.test(n+t(514))?g():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(680)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(){const t=["SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","LINE","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","   c.r = r / PACKED_COLOR_DIVISOR;","       if ( vColor.w < float(ALPHATEST) ) discard;","randomDirectionVector3OnDisc","distributions","elements","ensureArrayInstanceOf","dispose","    #ifdef SHOULD_ROTATE_TEXTURE","fixedTimeStep","    gl_Position = projectionMatrix * mvPosition;","grow","      translated = rotationCenter - pos;","2939430mYfjQW","exception","    highp float age = getAge();","BOOLEAN","_createGetterSetters","group","_distributionClamp","_updateBuffers","NEGATIVE_INFINITY","   c.b = b / PACKED_COLOR_DIVISOR;","chain","drag","ceil","fog_vertex","_applyAttributesToGeometry","BufferGeometry","    #ifdef SHOULD_ROTATE_PARTICLES","    float fIndex = 0.0;","angle","test","_assignPositionValue","591213hlANjz","subarray","_checkParticleAges","        float rowNorm = row / framesY;","SPHERE","shaders","385BDySPX","           unpackColor( color.w )","logdepthbuf_pars_fragment","spread","BOX","valueOverLifetimeLength","rotateTexture","log","setDrawRange","attributeCount","SHOULD_ROTATE_PARTICLES","TypedArrayHelper","function *\\( *\\)","DISC","textureLoop","utils","bufferUpdateKeys","randomDirectionVector3OnSphere","   }","setNumber","updateFlags","attribute vec3 velocity;","axis","        float perspective = scale / length( mvPosition.xyz );","    vec3 value = vec3( 0.0 );","bufferUpdateRanges","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","NUMBER","function","number","setSize","SHOULD_WIGGLE_PARTICLES","vec3 unpackRotationAxis( in float hex ) {","           unpackColor( color.x ),","_assignColorValue","   return c;","position","setVec2Components","dynamicBuffer","attribute vec4 color;","distribution","_resetParticle","updateMap","boolean","Texture","particlesPerSecond","spe","_attributesNeedDynamicReset","addEmitter","SPE.Group pool ran out.","activationIndex","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","        float columnNorm = vSpriteSheet.z;","_spreadClamp","particles, can support only","_incrementParticleCount","colorize","hasPerspective","        float column = floor(mod( frameNumber, framesX ));","apply","sqrt","generateUUID","info","shrink","size","multiplyScalar","fog_fragment","_createNewWhenPoolEmpty","static","triggerPoolEmitter","_setAttributeOffset","    #ifdef SHOULD_CALCULATE_SPRITE","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","_poolCreationSettings","_value","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","       axis = normalize(axis);","  return 1.0 - when_lt(x, y);","       float c = cos(angle);","_resetBufferRanges","colorOverLifetime","        vSpriteSheet.y = 1.0 / framesY;","        float row = floor( (frameNumber - column) / framesX );","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","runTime","onParticleSpawn","Color","updateCounts","       float s = sin( -vAngle );","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","value","    vec3 vel = getVelocity( age );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","Argument is not instanceof SPE.Emitter:","blending","push","clamp",'{}.constructor("return this")( )',"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float framesY = textureAnimation.y;","333RZUkyh","loop","    float pointSizePerspective = pointSize * perspective;","resetUpdateRange","_calculatePPSValue","params","        vSpriteSheet.z = columnNorm;","releaseIntoPool","opacity","_decrementParticleCount","hasOwnProperty","bind","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","_setBufferUpdateRanges","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","fog_pars_fragment","attribute vec4 size;","offset","8516720yREWHK","min","_attributesNeedRefresh","float getAlive() {","lerpTypeAgnostic","attributes","radius","direction","TypedArrayConstructor","    ","attribute vec4 opacity;","getPool","arrayValuesAreEqual","emitters","indexOffset","prototype","                   0.0,                                0.0,                                0.0,                                1.0);","4911067ObQdIm","   c -= vec3( 1.0 );","void main() {","normalize","getFromPool","init","ShaderAttribute","attribute vec4 angle;","radiusScale","    float shouldApplyValue = 0.0;","    vColor = vec4( c, o );","      rotationMatrix = getRotationMatrix( axis, angle );","textureFrameCount","        float framesY = vSpriteSheet.y;","    vec3 force = vec3( 0.0 );","ensureTypedArg","activeMultiplier","  return 1.0 - when_gt(x, y);","    varying vec4 vSpriteSheet;","        float columnNorm = column / framesX;","sin","while (true) {}","    return min(a + b, 1.0);","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","count","Vector4","itemSize","length","attribute vec4 params;","_updateDefines","       );","maxParticleCount","velocity","resetFlags","varying vec4 vColor;","common","keys","Group","ensureInstanceOf","ensureArrayTypedArg","particleCount","typedArray","alphaTest","REVISION","lerp","uniform float scale;","remove","_axis","rotationFunctions","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","paramsArray","   return velocity * age;","_triggerSingleEmitter","logdepthbuf_fragment","stateObject","rotation","set","uniform vec4 textureAnimation;","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","_assignRotationValue","paramFetchingFunctions","    highp float value = 0.0;","amd","_ensureTypedArray","   c.g = g / PACKED_COLOR_DIVISOR;","Emitter already exists in this group. Will not add again.","_center","   return params.x;","indexOf","float getWiggle() {","activeParticleCount","float when_le(float x, float y) {","   return params.w;","setAttribute","randomise","fragment","emitterIDs","float getAge() {","ensureValueOverLifetimeCompliance","gger","geometry","spreadClamp","_static","uniforms","setVec4Components","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","attributeKeys","forceFetchingFunctions","setVec3","9kwGRCT","rotationCenter","randomVector3OnSphere","        float wiggleAmount = positionInTime * getWiggle();","type","duration","tick","cos","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","randomVector3","depthTest","    return value;","SHOULD_CALCULATE_SPRITE","splice","BufferAttribute","scale","wiggle","shaderChunks","varyings","Emitter","OBJECT","interpolateArray","random","usage","#define PACKED_COLOR_SIZE 256.0","componentSize","randomVector3OnDisc","Emitter does not belong to a group, cannot remove.","   float b = mod( hex, PACKED_COLOR_SIZE );","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","   return acceleration.xyz * age;","texture","fog_pars_vertex","float when_ge(float x, float y) {","distributionClamp","uniform sampler2D tex;","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    varying float vAngle;","resetDynamic","_angle","angleSpread","        pos.x += wiggleSin;","_radius","   return params.y;","_assignAbsLifetimeValue","array","   vec3 c = vec3( 0.0 );","SPE.Group: maxParticleCount exceeded. Requesting","setMat3","        pos.y += wiggleCos;","unshift","trace","needsUpdate","setColor","table","getValueAtIndex","bufferAttribute","DynamicDrawUsage","__proto__","debu","SHOULD_ROTATE_TEXTURE","_pool","2132666QuSKGO","getHex","        float loopCount = textureAnimation.w;","      vec3 translated;","frames","Vector3","alive","abs","MathUtils","Will not resize.","color","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","           positionInTime,","mesh","        vSpriteSheet.w = rowNorm;","warn","attribute vec4 acceleration;","    #ifdef COLORIZE","attributeEnd","join","defineProperty","    #else","      float angle = 0.0;","    return 1.0 - abs( sign( x - y ) );","forceUpdateAll","        vSpriteSheet.x = 1.0 / framesX;","   c *= vec3( 2.0 );","      vec3 center = rotationCenter;","updateMin","_radiusScale","getComponentValueAtIndex","round","       float c = cos( -vAngle );","_assignParamsValue","POSITIVE_INFINITY","clone","setVec4","_assignAngleValue","_randomise","age","string","copy","StaticDrawUsage","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","toString","_angleSpread","setMat4","transparent","max","enable","fog","_distribution","updateMax","24424zsNUec","acceleration","disable","exports","    vec4 rotatedTexture = texture2D( tex, vUv );","ShaderChunk","error","randomFloat","    }","maxAge","bufferUpdateCount","input","undefined","Emitter does not exist in this group. Will not remove.","unpackColor","TypedArray is already of size:","    #endif","roundToNearestMultiple","vec3 getAcceleration( in float age ) {","6AhhEvH","        pos.z += wiggleSin;","_assignValue","logdepthbuf_pars_vertex","getPackedRotationAxis","floatOverLifetime","    force += accel * age;","setVec3Components","arrayType","randomColorAsHex","_spread","      vec3 axis = unpackRotationAxis( rotation.x );","       float x = gl_PointCoord.x - 0.5;","isArray","Vector2","_activateParticles","_createBufferAttribute","   return params.z;","counter","    force *= drag;","randomVector3OnLine","           return pos;","updateRange","constructor","    vec3 outgoingLight = vColor.xyz;","      if( rotation.y == 0.0 ) {","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","#ifdef SHOULD_CALCULATE_SPRITE","setFromArray","    highp float maxAge = getMaxAge();","isStatic","removeEmitter","action","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","Points","branchAvoidanceFunctions","_updateAttributeUpdateRange","    return max(sign(x - y), 0.0);","attribute vec3 rotationCenter;","_rotationCenter","logdepthbuf_vertex","vec4 getPosition( in float age ) {","214290GLYCEh","float and(float a, float b) {","defines","#endif","#ifdef SHOULD_ROTATE_TEXTURE","types","unpackRotationAxis","material","attributeOffset","_assignForceValue","float when_gt(float x, float y) {","uuid","depthWrite","textureFrames","_onRemove"];return(p=function(){return t})()}f(void 0,(function(){const t=h;let e;try{e=Function("return (function() "+t(260)+");")()}catch(r){e=window}const i=e.console=e.console||{},n=[t(628),t(465),t(225),"error",t(595),t(442),t(439)];for(let s=0;s<n[t(325)];s++){const e=f.constructor[t(296)][t(274)](f),r=n[s],o=i[r]||e;e[t(446)]=f.bind(f),e[t(494)]=o[t(494)].bind(o),i[r]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===l(649)&&define[l(361)]?define(l(667),d):typeof exports!==l(515)&&typeof module!==l(515)&&(module[l(506)]=d),d[l(632)]=function(t,e,i,n){const r=l;this[r(413)]=i||1,this[r(227)]=e||1,this.TypedArrayConstructor=t||Float32Array,this[r(433)]=new t(e*this.componentSize),this[r(295)]=n||0},d[l(632)][l(545)]=d.TypedArrayHelper,d.TypedArrayHelper[l(296)][l(651)]=function(t,e){const i=l,n=this[i(433)][i(325)];return!e&&(t*=this.componentSize),t<n?this[i(226)](t):t>n?this[i(592)](t):void console[i(225)](i(518),t+".",i(459))},d[l(632)].prototype[l(226)]=function(t){const e=l;return this[e(433)]=this[e(433)][e(616)](0,t),this.size=t,this},d[l(632)].prototype[l(592)]=function(t){const e=l,i=this[e(433)],n=new(this[e(289)])(t);return n[e(355)](i),this.array=n,this[e(227)]=t,this},d[l(632)][l(296)][l(401)]=function(t,e){const i=l;t*=this[i(413)],e*=this[i(413)];const n=[],r=this[i(433)],s=r[i(325)];for(let o=0;o<s;++o)(o<t||o>=e)&&n[i(258)](r[o]);return this.setFromArray(0,n),this},d[l(632)].prototype[l(550)]=function(t,e){const i=l,n=t+e.length;return n>this[i(433)].length?this[i(592)](n):n<this.array[i(325)]&&this[i(226)](n),this.array[i(355)](e,this[i(295)]+t),this},d[l(632)][l(296)].setVec2=function(t,e){return this.setVec2Components(t,e.x,e.y)},d[l(632)][l(296)][l(658)]=function(t,e,i){const n=l,r=this[n(433)],s=this[n(295)]+t*this.componentSize;return r[s]=e,r[s+1]=i,this},d[l(632)][l(296)].setVec3=function(t,e){return this[l(529)](t,e.x,e.y,e.z)},d[l(632)].prototype[l(529)]=function(t,e,i,n){const r=l,s=this.array,o=this[r(295)]+t*this[r(413)];return s[o]=e,s[o+1]=i,s[o+2]=n,this},d[l(632)].prototype[l(486)]=function(t,e){return this[l(383)](t,e.x,e.y,e.z,e.w)},d[l(632)][l(296)][l(383)]=function(t,e,i,n,r){const s=l,o=this.array,a=this[s(295)]+t*this[s(413)];return o[a]=e,o[a+1]=i,o[a+2]=n,o[a+3]=r,this},d[l(632)][l(296)][l(436)]=function(t,e){const i=l;return this[i(550)](this.indexOffset+t*this[i(413)],e[i(586)])},d.TypedArrayHelper[l(296)][l(496)]=function(t,e){const i=l;return this[i(550)](this.indexOffset+t*this[i(413)],e[i(586)])},d.TypedArrayHelper[l(296)][l(441)]=function(t,e){return this[l(529)](t,e.r,e.g,e.b)},d.TypedArrayHelper[l(296)][l(640)]=function(t,e){const i=l;return this.array[this[i(295)]+t*this[i(413)]]=e,this},d.TypedArrayHelper[l(296)][l(443)]=function(t){const e=l;return this.array[this[e(295)]+t]},d[l(632)][l(296)][l(480)]=function(t){const e=l;return this.array[e(616)](this[e(295)]+t*this.componentSize)},d[l(304)]=function(t,e,i){const n=l,r=d[n(304)].typeSizeMap;this[n(392)]=typeof t===n(490)&&r[n(273)](t)?t:"f",this[n(413)]=r[this.type],this[n(530)]=i||Float32Array,this.typedArray=null,this.bufferAttribute=null,this[n(659)]=!!e,this[n(478)]=0,this[n(502)]=0},d[l(304)][l(545)]=d[l(304)],d[l(304)].typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d.ShaderAttribute[l(296)].setUpdateRange=function(t,e){const i=l;this[i(478)]=Math[i(282)](t*this[i(413)],this[i(478)]*this[i(413)]),this[i(502)]=Math[i(498)](e*this[i(413)],this[i(502)]*this[i(413)])},d.ShaderAttribute[l(296)].flagUpdate=function(){const t=l,e=this[t(444)];!e[t(544)]&&(e[t(544)]={});const i=e[t(544)];i[t(280)]=this.updateMin,i[t(322)]=Math[t(282)](this[t(502)]-this[t(478)]+this.componentSize,this[t(339)][t(433)][t(325)]),e[t(440)]=!0},d.ShaderAttribute[l(296)].resetUpdateRange=function(){this[l(478)]=0,this.updateMax=0},d.ShaderAttribute[l(296)][l(426)]=function(){const e=l;this[e(444)][e(411)]=this[e(659)]?t[e(445)]:t[e(492)]},d.ShaderAttribute.prototype[l(401)]=function(t,e){const i=l;this[i(339)][i(401)](t,e),this[i(474)]()},d.ShaderAttribute[l(296)][l(474)]=function(){const e=l;this[e(444)].array=this.typedArray[e(433)],this[e(444)].updateRange[e(280)]=0,this[e(444)][e(544)][e(322)]=-1,this.bufferAttribute[e(411)]=t[e(492)],this[e(444)][e(440)]=!0},d[l(304)][l(296)][l(362)]=function(t){const e=l;null!==this.typedArray&&this[e(339)].size===t*this[e(413)]||(null!==this[e(339)]&&this[e(339)][e(227)]!==t?this[e(339)][e(651)](t):null===this[e(339)]&&(this.typedArray=new d.TypedArrayHelper(this[e(530)],t,this[e(413)])))},d[l(304)][l(296)][l(538)]=function(i){const n=l;if(this[n(362)](i),null!==this[n(444)])return this[n(444)][n(433)]=this.typedArray[n(433)],parseFloat(t[n(341)])>=81&&(this[n(444)].count=this.bufferAttribute.array.length/this[n(444)][n(324)]),void(this.bufferAttribute[n(440)]=!0);this[n(444)]=new(t[n(402)])(this[n(339)][n(433)],this[n(413)]),this[n(444)][n(411)]=this.dynamicBuffer?e:t[n(492)]},d[l(304)][l(296)].getLength=function(){const t=l;return null===this[t(339)]?0:this[t(339)].array[t(325)]},d[l(405)]={defines:[l(412),"#define PACKED_COLOR_DIVISOR 255.0"][l(469)]("\n"),uniforms:["uniform float deltaTime;","uniform float runTime;",l(423),l(356),l(343)].join("\n"),attributes:[l(466),l(642),"attribute vec4 rotation;",l(560),l(326),l(279),l(305),l(660),l(291)][l(469)]("\n"),varyings:[l(332),l(568),l(425),l(567),l(549),l(316),l(567)][l(469)]("\n"),branchAvoidanceFunctions:[l(574),l(559),"}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {",l(473),"}",l(421),l(240),"}",l(370),l(315),"}",l(565),"    return a * b;","}","float or(float a, float b) {",l(320),"}"][l(469)]("\n"),unpackColor:["vec3 unpackColor( in float hex ) {","   vec3 c = vec3( 0.0 );",l(255),l(647),l(416),"   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;",l(603),l(656),"}"][l(469)]("\n"),unpackRotationAxis:[l(653),l(434),l(255),l(647),"   float b = mod( hex, PACKED_COLOR_SIZE );",l(582),l(363),l(603),l(476),l(299),l(656),"}"][l(469)]("\n"),floatOverLifetime:[l(252),l(360),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",l(611),l(307),l(555),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );",l(493),l(511),"","    return value;","}"][l(469)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",l(645),l(348),l(275),l(277),l(399),"}"].join("\n"),paramFetchingFunctions:[l(284),l(366),"}",l(376),l(431),"}","float getMaxAge() {",l(539),"}",l(368),l(371),"}"][l(469)]("\n"),forceFetchingFunctions:[l(563),"   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {",l(350),"}",l(521),l(418),"}"][l(469)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",l(581),l(239),"       float s = sin(angle);",l(241),"       float oc = 1.0 - c;","",l(396),"                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",l(235),l(297),"   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",l(547),l(543),"      }","",l(533),l(477),l(453),"      mat4 rotationMatrix;",l(472),"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",l(384),l(593),l(309),l(321),l(639),l(567)][l(469)]("\n"),rotateTexture:[l(347),"","    #ifdef SHOULD_ROTATE_TEXTURE",l(534),"       float y = 1.0 - gl_PointCoord.y - 0.5;",l(482),l(251),l(357),"    #endif","",l(234),"        float framesX = vSpriteSheet.x;",l(311),l(673),"        float rowNorm = vSpriteSheet.w;",l(238),l(417),l(519),"",l(507)][l(469)]("\n")},d[l(620)]={vertex:[d[l(405)].defines,d[l(405)][l(382)],d[l(405)][l(286)],d[l(405)][l(406)],t[l(508)][l(333)],t[l(508)][l(525)],t[l(508)][l(420)],d.shaderChunks[l(557)],d[l(405)][l(517)],d[l(405)][l(570)],d[l(405)][l(527)],d.shaderChunks[l(243)],d.shaderChunks[l(359)],d[l(405)][l(386)],d.shaderChunks[l(346)],l(300),l(596),"    highp float alive = getAlive();",l(551),"    highp float positionInTime = (age / maxAge);","    highp float isAlive = when_gt( alive, 0.0 );","    #ifdef SHOULD_WIGGLE_PARTICLES",l(391),"        float wiggleSin = isAlive * sin( wiggleAmount );","        float wiggleCos = isAlive * cos( wiggleAmount );",l(519),l(254),"    vec3 accel = getAcceleration( age );",l(312),"    vec3 pos = vec3( position );",l(246),"    force += vel;",l(541),l(528),"    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES",l(429),l(437),l(523),l(519),l(610),"        pos = getRotation( pos, positionInTime );","    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","    #ifdef HAS_PERSPECTIVE",l(644),"    #else","        float perspective = 1.0;",l(519),l(265),l(467),"       vec3 c = isAlive * getColorOverLifetime(",l(462),l(654),"           unpackColor( color.y ),","           unpackColor( color.z ),",l(622),l(328),l(471),"       vec3 c = vec3(1.0);",l(519),l(461),l(308),l(589),l(424),l(519),l(234),"        float framesX = textureAnimation.x;",l(262),l(452),"        float totalFrames = textureAnimation.z;",l(261),l(679),l(245),l(317),l(618),l(475),l(244),l(269),l(464),l(519),"    gl_PointSize = pointSizePerspective;",l(591),t[l(508)][l(562)],t[l(508)][l(607)],"}"].join("\n"),fragment:[d[l(405)][l(382)],t[l(508)][l(333)],i[l(278)],t[l(508)][l(623)],d.shaderChunks.varyings,d[l(405)][l(557)],l(300),l(546),l(290),"    #ifdef ALPHATEST",l(583),l(519),d.shaderChunks[l(627)],i[l(352)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[l(508)][l(229)],"}"][l(469)]("\n")},d.utils={types:{BOOLEAN:l(664),STRING:l(490),NUMBER:l(650),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=l;if(Array.isArray(t)){for(let r=t[n(325)]-1;r>=0;--r)if(typeof t[r]!==e)return i;return t}return this[n(313)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=l;if(Array[n(535)](t)){for(let r=t[n(325)]-1;r>=0;--r)if(void 0!==e&&t[r]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=l;e=e||3,i=i||3,!1===Array[n(535)](t._value)&&(t[n(237)]=[t._value]),!1===Array[n(535)](t[n(532)])&&(t[n(532)]=[t._spread]);const r=this[n(259)](t[n(237)][n(325)],e,i),s=this[n(259)](t[n(532)][n(325)],e,i),o=Math[n(498)](r,s);t._value[n(325)]!==o&&(t[n(237)]=this[n(409)](t[n(237)],o)),t[n(532)].length!==o&&(t[n(532)]=this[n(409)](t[n(532)],o))},interpolateArray(t,e){const i=l,n=t[i(325)],r=[typeof t[0][i(485)]===i(649)?t[0][i(485)]():t[0]],s=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*s,n=Math.floor(e),a=Math[i(606)](e),c=e-n;r[o]=this[i(285)](t[n],t[a],c)}return r[i(258)]("function"==typeof t[n-1][i(485)]?t[n-1].clone():t[n-1]),r},clamp(t,e,i){const n=l;return Math.max(e,Math[n(282)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[l(410)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,s){const o=l;let a,c=this.types;return typeof e===c[o(648)]&&typeof i===c[o(648)]?e+(i-e)*s:e instanceof t[o(536)]&&i instanceof t[o(536)]?(a=e[o(485)](),a.x=this[o(342)](e.x,i.x,s),a.y=this[o(342)](e.y,i.y,s),a):e instanceof t[o(455)]&&i instanceof t[o(455)]?(a=e[o(485)](),a.x=this[o(342)](e.x,i.x,s),a.y=this[o(342)](e.y,i.y,s),a.z=this.lerp(e.z,i.z,s),a):e instanceof n&&i instanceof t[o(323)]?(a=e.clone(),a.x=this.lerp(e.x,i.x,s),a.y=this[o(342)](e.y,i.y,s),a.z=this.lerp(e.z,i.z,s),a.w=this.lerp(e.w,i.w,s),a):e instanceof r&&i instanceof t[o(249)]?(a=e.clone(),a.r=this[o(342)](e.r,i.r,s),a.g=this.lerp(e.g,i.g,s),a.b=this.lerp(e.b,i.b,s),a):void console[o(465)]("Invalid argument types, or argument types do not match:",e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=l;let n=0;return 0===e?t:(n=Math[i(457)](t)%e,0===n?t:t<0?-(Math[i(457)](t)-n):t+e-n)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[l(410)]()-.5),randomVector3(t,e,i,n,r){const s=l;let o=i.x+(Math.random()*n.x-.5*n.x),a=i.y+(Math.random()*n.y-.5*n.y),c=i.z+(Math[s(410)]()*n.z-.5*n.z);r&&(o=.5*-r.x+this[s(520)](o,r.x),a=.5*-r.y+this[s(520)](a,r.y),c=.5*-r.z+this[s(520)](c,r.z)),t[s(339)].setVec3Components(e,o,a,c)},randomColor(t,e,i,n){const r=l;let s=i.r+Math[r(410)]()*n.x,o=i.g+Math[r(410)]()*n.y,a=i.b+Math[r(410)]()*n.z;s=this.clamp(s,0,1),o=this[r(259)](o,0,1),a=this[r(259)](a,0,1),t[r(339)].setVec3Components(e,s,o,a)},randomColorAsHex:function(){const t=new r;return function(e,i,n,r){const s=h,o=n.length,a=[];for(let c=0;c<o;++c){const e=r[c];t[s(491)](n[c]),t.r+=Math[s(410)]()*e.x-.5*e.x,t.g+=Math[s(410)]()*e.y-.5*e.y,t.b+=Math[s(410)]()*e.z-.5*e.z,t.r=this[s(259)](t.r,0,1),t.g=this[s(259)](t.g,0,1),t.b=this[s(259)](t.b,0,1),a[s(258)](t[s(451)]())}e[s(339)][s(383)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const r=l,s=i[r(485)]();s.lerp(n,Math[r(410)]()),t.typedArray[r(529)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,r,s,o,a){const c=l;let h=2*Math[c(410)]()-1,u=6.2832*Math[c(410)](),f=Math[c(681)](1-h*h),p=this.randomFloat(n,r),d=0,m=0,g=0;o&&(p=Math[c(481)](p/o)*o),d=f*Math[c(395)](u)*p,m=f*Math.sin(u)*p,g=h*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[c(339)][c(529)](e,d,m,g)},seededRandom(t){const e=1e4*Math[l(318)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,r,s,o){const a=l;let c=6.2832*Math.random(),h=Math.abs(this[a(510)](n,r)),u=0,f=0,p=0;o&&(h=Math[a(481)](h/o)*o),u=Math[a(395)](c)*h,f=Math.sin(c)*h,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(339)][a(529)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=l,i=new(t[e(455)]);return function(t,n,r,s,o,a,c,h){const l=e;i.copy(a),i.x-=r,i.y-=s,i.z-=o,i.normalize()[l(228)](-this.randomFloat(c,h)),t[l(339)][l(529)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new s;return function(e,i,n,r,s,o,a,c){const l=h;t[l(491)](o),t.x-=n,t.y-=r,t.z-=s,t.normalize()[l(228)](-this.randomFloat(a,c)),e.typedArray[l(529)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const e=l,i=new s,n=new s,r=new(t[e(249)]),o=new(t[e(455)])(1,1,1);return function(t,s){const a=e;return i[a(491)](t)[a(301)](),n[a(491)](s)[a(301)](),i.x+=.5*-s.x+Math[a(410)]()*s.x,i.y+=.5*-s.y+Math[a(410)]()*s.y,i.z+=.5*-s.z+Math[a(410)]()*s.z,i.normalize().add(o).multiplyScalar(.5),r.setRGB(i.x,i.y,i.z),r[a(451)]()}}()},d[l(335)]=function(e){const i=l,n=d[i(636)],r=n[i(569)];(e=n[i(313)](e,r.OBJECT,{}))[i(419)]=n[i(313)](e[i(419)],r[i(408)],{}),this.uuid=t[i(458)][i(682)](),this[i(590)]=n[i(313)](e[i(590)],r[i(648)],.016),this[i(419)]=n[i(336)](e.texture.value,t[i(665)],null),this.textureFrames=n[i(336)](e[i(419)][i(454)],t[i(536)],new(t[i(536)])(1,1)),this[i(310)]=n[i(313)](e[i(419)].frameCount,r.NUMBER,this.textureFrames.x*this[i(577)].y),this[i(635)]=n[i(313)](e[i(419)][i(264)],r[i(648)],1),this.textureFrames[i(498)](new(t[i(536)])(1,1)),this.hasPerspective=n[i(313)](e[i(678)],r[i(597)],!0),this[i(677)]=n[i(313)](e.colorize,r[i(597)],!0),this[i(329)]=n[i(313)](e.maxParticleCount,r[i(648)],null),this[i(257)]=n[i(313)](e[i(257)],r[i(648)],o),this[i(497)]=n[i(313)](e[i(497)],r[i(597)],!0),this[i(340)]=parseFloat(n[i(313)](e.alphaTest,r[i(648)],0)),this[i(576)]=n.ensureTypedArg(e[i(576)],r[i(597)],!1),this.depthTest=n[i(313)](e[i(398)],r[i(597)],!0),this[i(500)]=n[i(313)](e[i(500)],r[i(597)],!0),this.scale=n[i(313)](e[i(403)],r.NUMBER,300),this[i(294)]=[],this.emitterIDs=[],this[i(449)]=[],this[i(236)]=null,this[i(230)]=0,this[i(283)]=!1,this[i(668)]=!1,this[i(338)]=0,this[i(382)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new(t[i(323)])(this[i(577)].x,this.textureFrames.y,this[i(310)],Math[i(498)](Math[i(457)](this[i(635)]),1))},fogColor:{type:"c",value:this.fog?new(t[i(249)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(403)]}},this.defines={HAS_PERSPECTIVE:this[i(678)],COLORIZE:this[i(677)],VALUE_OVER_LIFETIME_LENGTH:d[i(626)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(577)].x>1||this[i(577)].y>1},this.attributes={position:new(d[i(304)])("v3",!0),acceleration:new(d[i(304)])("v4",!0),velocity:new d.ShaderAttribute("v3",!0),rotation:new(d[i(304)])("v4",!0),rotationCenter:new(d[i(304)])("v3",!0),params:new(d[i(304)])("v4",!0),size:new d.ShaderAttribute("v4",!0),angle:new(d[i(304)])("v4",!0),color:new(d[i(304)])("v4",!0),opacity:new(d[i(304)])("v4",!0)},this[i(385)]=Object[i(334)](this[i(286)]),this[i(630)]=this[i(385)][i(325)],this.material=new a({uniforms:this[i(382)],vertexShader:d[i(620)].vertex,fragmentShader:d[i(620)][i(374)],blending:this[i(257)],transparent:this[i(497)],alphaTest:this[i(340)],depthWrite:this[i(576)],depthTest:this[i(398)],defines:this[i(566)],fog:this[i(500)]}),this[i(379)]=new(t[i(609)]),this[i(463)]=new(t[i(556)])(this[i(379)],this.material),null===this[i(329)]&&console[i(465)](i(579))},d[l(335)][l(545)]=d[l(335)],d.Group[l(296)][l(327)]=function(){const t=l;let e,i=this.emitters,n=i.length-1,r=this[t(566)];for(;n>=0;--n)e=i[n],!r[t(400)]&&(r[t(448)]=r[t(448)]||!!Math[t(498)](Math[t(498)][t(680)](null,e[t(612)][t(253)]),Math.max[t(680)](null,e[t(612)][t(624)]))),r[t(631)]=r.SHOULD_ROTATE_PARTICLES||!!Math[t(498)](e[t(354)][t(612)],e[t(354)][t(428)]),r[t(652)]=r[t(652)]||!!Math[t(498)](e[t(404)].value,e[t(404)][t(624)]);this[t(571)].needsUpdate=!0},d[l(335)][l(296)][l(608)]=function(){const t=l;let e,i,n=this[t(286)],r=this[t(379)],s=r.attributes;for(const o in n)n[t(273)](o)&&(e=n[o],i=s[o],i?i.array=e[t(339)][t(433)]:r[t(372)](o,e[t(444)]),e[t(444)][t(440)]=!0);this[t(379)][t(629)](0,this.particleCount)},d.Group[l(296)][l(669)]=function(t){const e=l;if(t instanceof d[e(407)]==!1)return void console[e(509)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(375)][e(367)](t[e(575)])>-1)return void console.error(e(364));if(null!==t[e(599)])return void console[e(509)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(286)],n=this.particleCount,r=n+t[e(338)];this[e(338)]=r,null!==this[e(329)]&&this[e(338)]>this[e(329)]&&console[e(465)](e(435),this.particleCount,e(675),this[e(329)]),t[e(267)](t.maxAge[e(237)]+t[e(512)]._spread),t[e(276)](this[e(385)]),t[e(233)](n),t[e(599)]=this,t.attributes=this[e(286)];for(const s in i)i[e(273)](s)&&i[s][e(538)](null!==this[e(329)]?this.maxParticleCount:this[e(338)]);for(let s=n;s<r;++s)t[e(614)](s),t[e(573)](s,"velocity"),t[e(573)](s,e(504)),t._assignAbsLifetimeValue(s,e(271)),t._assignAbsLifetimeValue(s,"size"),t._assignAngleValue(s),t[e(358)](s),t[e(483)](s),t._assignColorValue(s);return this[e(608)](),this[e(294)][e(258)](t),this[e(375)][e(258)](t[e(575)]),this[e(327)](t),this.material.needsUpdate=!0,this[e(379)].needsUpdate=!0,this[e(283)]=!0,this},d[l(335)][l(296)][l(553)]=function(t){const e=l,i=this.emitterIDs[e(367)](t[e(575)]);if(t instanceof d[e(407)]==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console.error(e(516));const n=t[e(572)],r=n+t[e(338)],s=this[e(286)][e(268)][e(339)];for(let o=n;o<r;++o)s.array[4*o]=0,s[e(433)][4*o+1]=0;this[e(294)].splice(i,1),this.emitterIDs[e(401)](i,1);for(const o in this[e(286)])this[e(286)][e(273)](o)&&this[e(286)][o][e(401)](n,r);this[e(338)]-=t[e(338)],t[e(578)](),this[e(283)]=!0},d[l(335)][l(296)][l(302)]=function(){const t=l,e=this[t(449)],i=this[t(230)];if(e.length)return e.pop();if(i){const e=new(d[t(407)])(this[t(236)]);return this[t(669)](e),e}return null},d[l(335)][l(296)][l(270)]=function(t){const e=l;if(t instanceof d[e(407)]!=!1)return t.reset(),this._pool[e(438)](t),this;console[e(509)](e(256),t)},d[l(335)][l(296)][l(292)]=function(){return this._pool},d[l(335)][l(296)].addPool=function(t,e,i){const n=l;let r;this[n(236)]=e,this[n(230)]=!!i;for(let s=0;s<t;++s)r=Array[n(535)](e)?new(d[n(407)])(e[s]):new d.Emitter(e),this[n(669)](r),this[n(270)](r);return this},d.Group[l(296)][l(351)]=function(t){const e=l,i=this.getFromPool(),n=this;if(null!==i)return t instanceof s&&(i[e(657)][e(253)][e(491)](t),i[e(657)].value=i[e(657)].value),i[e(499)](),setTimeout((()=>{const t=e;i.disable(),n[t(270)](i)}),1e3*Math[e(498)](i[e(393)],i[e(512)][e(253)]+i[e(512)][e(624)])),this;console[e(628)](e(670))},d[l(335)][l(296)][l(232)]=function(t,e){const i=l;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(351)](e);else this[i(351)](e);return this},d[l(335)][l(296)]._updateUniforms=function(t){const e=l;this[e(382)][e(247)].value+=t,this[e(382)].deltaTime[e(253)]=t},d[l(335)][l(296)][l(242)]=function(){const t=l;let e=this[t(385)],i=this[t(630)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(266)]()},d.Group[l(296)][l(601)]=function(t){const e=l;let i,n,r,s=this[e(385)],o=this[e(630)]-1,a=this[e(286)],c=t.bufferUpdateRanges;for(;o>=0;--o)i=s[o],n=c[i],r=a[i],r.setUpdateRange(n[e(282)],n.max),r.flagUpdate()},d.Group[l(296)][l(394)]=function(t){const e=l;var i=this[e(294)],n=i.length,r=t||this[e(590)],s=this[e(385)],o=this.attributes;if(this._updateUniforms(r),this._resetBufferRanges(),0!==n||!1!==this[e(283)]||!1!==this[e(668)]){for(var a,c=0;c<n;++c)(a=i[c])[e(394)](r),this[e(601)](a);if(!0===this[e(668)]){for(c=this.attributeCount-1;c>=0;--c)o[s[c]][e(426)]();this[e(668)]=!1}if(!0===this[e(283)]){for(c=this.attributeCount-1;c>=0;--c)o[s[c]].forceUpdateAll();this[e(283)]=!1,this[e(668)]=!0}}},d[l(335)][l(296)][l(588)]=function(){const t=l;return this.geometry[t(588)](),this[t(571)][t(588)](),this},d[l(407)]=function(e){const i=l,n=d.utils,o=n[i(569)],a=d[i(626)];(e=n[i(313)](e,o[i(408)],{}))[i(657)]=n[i(313)](e[i(657)],o[i(408)],{}),e[i(330)]=n.ensureTypedArg(e[i(330)],o[i(408)],{}),e[i(504)]=n.ensureTypedArg(e[i(504)],o[i(408)],{}),e.radius=n[i(313)](e.radius,o[i(408)],{}),e[i(605)]=n[i(313)](e[i(605)],o.OBJECT,{}),e[i(354)]=n.ensureTypedArg(e[i(354)],o.OBJECT,{}),e.color=n[i(313)](e.color,o.OBJECT,{}),e[i(271)]=n[i(313)](e[i(271)],o.OBJECT,{}),e[i(227)]=n.ensureTypedArg(e[i(227)],o[i(408)],{}),e.angle=n[i(313)](e.angle,o[i(408)],{}),e[i(404)]=n[i(313)](e[i(404)],o[i(408)],{}),e[i(512)]=n[i(313)](e[i(512)],o.OBJECT,{}),e[i(248)]&&console.warn(i(548)),this[i(575)]=c[i(682)](),this.type=n[i(313)](e[i(392)],o.NUMBER,d[i(585)].BOX),this.position={_value:n.ensureInstanceOf(e[i(657)][i(253)],t[i(455)],new(t[i(455)])),_spread:n[i(336)](e[i(657)][i(624)],t[i(455)],new s),_spreadClamp:n[i(336)](e.position[i(380)],s,new(t[i(455)])),_distribution:n[i(313)](e[i(657)][i(661)],o[i(648)],this[i(392)]),_randomise:n[i(313)](e[i(657)][i(373)],o[i(597)],!1),_radius:n.ensureTypedArg(e.position[i(287)],o.NUMBER,10),_radiusScale:n[i(336)](e[i(657)][i(306)],t[i(455)],new(t[i(455)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e[i(657)][i(422)],o[i(648)],0)},this[i(330)]={_value:n.ensureInstanceOf(e[i(330)][i(253)],t[i(455)],new(t[i(455)])),_spread:n.ensureInstanceOf(e[i(330)].spread,s,new(t[i(455)])),_distribution:n[i(313)](e.velocity[i(661)],o.NUMBER,this[i(392)]),_randomise:n[i(313)](e[i(657)][i(373)],o.BOOLEAN,!1)},this[i(504)]={_value:n[i(336)](e[i(504)].value,t[i(455)],new(t[i(455)])),_spread:n[i(336)](e[i(504)][i(624)],t[i(455)],new(t[i(455)])),_distribution:n.ensureTypedArg(e[i(504)][i(661)],o[i(648)],this[i(392)]),_randomise:n.ensureTypedArg(e[i(657)][i(373)],o[i(597)],!1)},this.drag={_value:n[i(313)](e[i(605)][i(253)],o[i(648)],0),_spread:n[i(313)](e[i(605)].spread,o.NUMBER,0),_randomise:n[i(313)](e[i(657)][i(373)],o.BOOLEAN,!1)},this[i(404)]={_value:n[i(313)](e[i(404)][i(253)],o.NUMBER,0),_spread:n.ensureTypedArg(e[i(404)][i(624)],o[i(648)],0)},this[i(354)]={_axis:n[i(336)](e.rotation[i(643)],t[i(455)],new(t[i(455)])(0,1,0)),_axisSpread:n[i(336)](e[i(354)].axisSpread,t[i(455)],new(t[i(455)])),_angle:n.ensureTypedArg(e[i(354)].angle,o[i(648)],0),_angleSpread:n[i(313)](e[i(354)].angleSpread,o[i(648)],0),_static:n[i(313)](e[i(354)][i(231)],o[i(597)],!1),_center:n[i(336)](e.rotation.center,t[i(455)],this[i(657)][i(237)].clone()),_randomise:n[i(313)](e[i(657)].randomise,o[i(597)],!1)},this[i(512)]={_value:n.ensureTypedArg(e[i(512)][i(253)],o[i(648)],2),_spread:n[i(313)](e[i(512)].spread,o[i(648)],0)},this[i(460)]={_value:n.ensureArrayInstanceOf(e.color[i(253)],t[i(249)],new r),_spread:n[i(587)](e.color[i(624)],t[i(455)],new(t[i(455)])),_randomise:n.ensureTypedArg(e[i(657)][i(373)],o[i(597)],!1)},this[i(271)]={_value:n[i(337)](e[i(271)][i(253)],o[i(648)],1),_spread:n.ensureArrayTypedArg(e.opacity.spread,o[i(648)],0),_randomise:n[i(313)](e[i(657)][i(373)],o[i(597)],!1)},this.size={_value:n[i(337)](e[i(227)][i(253)],o[i(648)],1),_spread:n.ensureArrayTypedArg(e[i(227)][i(624)],o.NUMBER,0),_randomise:n[i(313)](e.position.randomise,o[i(597)],!1)},this[i(612)]={_value:n[i(337)](e[i(612)][i(253)],o.NUMBER,0),_spread:n[i(337)](e.angle.spread,o[i(648)],0),_randomise:n.ensureTypedArg(e[i(657)][i(373)],o.BOOLEAN,!1)},this[i(338)]=n[i(313)](e.particleCount,o.NUMBER,100),this[i(393)]=n.ensureTypedArg(e[i(393)],o[i(648)],null),this.isStatic=n[i(313)](e[i(552)],o.BOOLEAN,!1),this[i(314)]=n[i(313)](e[i(314)],o[i(648)],1),this[i(288)]=n[i(313)](e[i(288)],o[i(648)],1),this.alive=n[i(313)](e[i(456)],o[i(597)],!0),this.particlesPerSecond=0,this[i(671)]=0,this.attributeOffset=0,this[i(468)]=0,this[i(489)]=0,this[i(369)]=0,this.group=null,this[i(286)]=null,this[i(349)]=null,this[i(331)]={position:n.ensureTypedArg(e[i(657)][i(373)],o[i(597)],!1)||n[i(313)](e[i(287)][i(373)],o[i(597)],!1),velocity:n[i(313)](e.velocity[i(373)],o[i(597)],!1),acceleration:n[i(313)](e.acceleration[i(373)],o[i(597)],!1)||n[i(313)](e[i(605)][i(373)],o.BOOLEAN,!1),rotation:n[i(313)](e[i(354)].randomise,o[i(597)],!1),rotationCenter:n[i(313)](e.rotation[i(373)],o[i(597)],!1),size:n.ensureTypedArg(e.size[i(373)],o[i(597)],!1),color:n.ensureTypedArg(e.color[i(373)],o.BOOLEAN,!1),opacity:n[i(313)](e[i(271)][i(373)],o.BOOLEAN,!1),angle:n.ensureTypedArg(e[i(612)][i(373)],o[i(597)],!1)},this[i(641)]={},this.updateCounts={},this.updateMap={maxAge:i(268),position:"position",velocity:i(330),acceleration:"acceleration",drag:i(504),wiggle:i(268),rotation:i(354),size:i(227),color:i(460),opacity:"opacity",angle:"angle"};for(const t in this[i(663)])this.updateMap.hasOwnProperty(t)&&(this.updateCounts[this.updateMap[t]]=0,this[i(641)][this[i(663)][t]]=!1,this[i(598)](this[t],t));this[i(646)]={},this[i(385)]=null,this.attributeCount=0,n[i(377)](this[i(460)],a,a),n[i(377)](this[i(271)],a,a),n[i(377)](this[i(227)],a,a),n[i(377)](this[i(612)],a,a)},d[l(407)][l(545)]=d[l(407)],d[l(407)].prototype[l(598)]=function(t,e){const i=l,n=this;for(const r in t)if(t[i(273)](r)){const s=r.replace("_","");Object[i(470)](t,s,{get:function(t){return function(){return this[t]}}(r),set:function(t){return function(i){const r=h,s=n[r(663)][e],o=this[t],a=d[r(626)];t===r(561)?(n[r(641)].rotationCenter=!0,n[r(250)].rotationCenter=0):t===r(488)?n[r(331)][s]=i:(n[r(641)][s]=!0,n[r(250)][s]=0),n.group._updateDefines(),this[t]=i,Array[r(535)](o)&&d[r(636)][r(377)](n[e],a,a)}}(r)})}},d[l(407)].prototype[l(276)]=function(t){const e=l;this[e(385)]=t,this[e(630)]=t[e(325)];for(let i=this[e(630)]-1;i>=0;--i)this[e(646)][t[i]]={min:Number[e(484)],max:Number[e(602)]}},d[l(407)][l(296)][l(267)]=function(t){const e=l,i=this[e(338)];this.duration?this[e(666)]=i/(t<this[e(393)]?t:this[e(393)]):this[e(666)]=i/t},d.Emitter[l(296)]._setAttributeOffset=function(t){const e=l;this[e(572)]=t,this.activationIndex=t,this.activationEnd=t+this[e(338)]},d.Emitter[l(296)][l(524)]=function(t,e){const i=l;switch(t){case"position":this[i(614)](e);break;case i(330):case i(504):this[i(573)](e,t);break;case i(227):case i(271):this._assignAbsLifetimeValue(e,t);break;case i(612):this[i(487)](e);break;case i(268):this[i(483)](e);break;case"rotation":this[i(358)](e);break;case"color":this[i(655)](e)}},d.Emitter[l(296)][l(614)]=function(t){const e=l,i=d[e(585)],n=d[e(636)],r=this[e(657)],s=this[e(286)].position,o=r._value,a=r[e(532)];switch(r[e(501)]){case i[e(625)]:n[e(397)](s,t,o,a,r[e(674)]);break;case i[e(619)]:n[e(390)](s,t,o,r[e(430)],r[e(532)].x,r[e(479)],r._spreadClamp.x,r[e(600)]||this[e(338)]);break;case i[e(634)]:n[e(414)](s,t,o,r[e(430)],r._spread.x,r[e(479)],r[e(674)].x);break;case i.LINE:n[e(542)](s,t,o,a)}},d[l(407)][l(296)][l(573)]=function(t,e){const i=l;let n,r,s,o,a,c=d[i(585)],h=d.utils,u=this[e],f=u[i(237)],p=u._spread;switch(u[i(501)]){case c[i(625)]:h.randomVector3(this[i(286)][e],t,f,p);break;case c[i(619)]:n=this[i(286)][i(657)][i(339)][i(433)],a=3*t,r=n[a],s=n[a+1],o=n[a+2],h[i(638)](this.attributes[e],t,r,s,o,this[i(657)]._value,u[i(237)].x,u[i(532)].x);break;case c[i(634)]:n=this.attributes[i(657)].typedArray[i(433)],a=3*t,r=n[a],s=n[a+1],o=n[a+2],h[i(584)](this[i(286)][e],t,r,s,o,this[i(657)]._value,u[i(237)].x,u[i(532)].x);break;case c[i(580)]:h.randomVector3OnLine(this.attributes[e],t,f,p)}if(e===i(504)){const e=h[i(259)](h[i(510)](this.drag[i(237)],this.drag[i(532)]),0,1);this[i(286)][i(504)][i(339)][i(433)][4*t+3]=e}},d[l(407)][l(296)][l(432)]=function(t,e){const i=l;let n,r=this[i(286)][e][i(339)],s=this[e],o=d[i(636)];o.arrayValuesAreEqual(s[i(237)])&&o.arrayValuesAreEqual(s[i(532)])?(n=Math.abs(o.randomFloat(s[i(237)][0],s[i(532)][0])),r[i(383)](t,n,n,n,n)):r[i(383)](t,Math[i(457)](o[i(510)](s[i(237)][0],s[i(532)][0])),Math[i(457)](o[i(510)](s[i(237)][1],s[i(532)][1])),Math.abs(o[i(510)](s[i(237)][2],s._spread[2])),Math.abs(o[i(510)](s[i(237)][3],s[i(532)][3])))},d[l(407)][l(296)]._assignAngleValue=function(t){const e=l;let i,n=this[e(286)].angle.typedArray,r=this[e(612)],s=d.utils;s[e(293)](r[e(237)])&&s[e(293)](r[e(532)])?(i=s[e(510)](r[e(237)][0],r[e(532)][0]),n.setVec4Components(t,i,i,i,i)):n[e(383)](t,s.randomFloat(r._value[0],r._spread[0]),s.randomFloat(r._value[1],r[e(532)][1]),s[e(510)](r[e(237)][2],r[e(532)][2]),s[e(510)](r[e(237)][3],r[e(532)][3]))},d[l(407)][l(296)][l(483)]=function(t){const e=l;this[e(286)][e(268)][e(339)].setVec4Components(t,this[e(552)]?1:0,0,Math[e(457)](d[e(636)][e(510)](this[e(512)]._value,this[e(512)][e(532)])),d.utils[e(510)](this[e(404)][e(237)],this[e(404)][e(532)]))},d[l(407)][l(296)][l(358)]=function(t){const e=l;this[e(286)][e(354)][e(339)].setVec3Components(t,d.utils[e(526)](this[e(354)][e(345)],this[e(354)]._axisSpread),d[e(636)][e(510)](this[e(354)][e(427)],this[e(354)][e(495)]),this[e(354)][e(381)]?0:1),this[e(286)][e(389)][e(339)][e(387)](t,this[e(354)][e(365)])},d[l(407)].prototype[l(655)]=function(t){const e=l;d[e(636)][e(531)](this.attributes[e(460)],t,this[e(460)][e(237)],this[e(460)][e(532)])},d.Emitter[l(296)][l(662)]=function(t){const e=l;let i,n,r=this[e(331)],s=this[e(641)],o=this[e(250)],a=this.attributeKeys;for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=s[i],!0!==r[i]&&!0!==n||(this._assignValue(i,t),this[e(558)](i,t),!0===n&&o[i]===this[e(338)]?(s[i]=!1,o[i]=0):1==n&&++o[i])},d[l(407)][l(296)][l(558)]=function(t,e){const i=l,n=this.bufferUpdateRanges[t];n[i(282)]=Math.min(e,n.min),n.max=Math[i(498)](e,n[i(498)])},d.Emitter[l(296)][l(242)]=function(){const t=l;let e,i=this[t(646)],n=this[t(637)],r=this[t(513)]-1;for(;r>=0;--r)e=n[r],i[e].min=Number[t(484)],i[e].max=Number.NEGATIVE_INFINITY},d[l(407)][l(296)][l(578)]=function(){const t=l;this[t(666)]=0,this[t(572)]=0,this[t(671)]=0,this[t(369)]=0,this.group=null,this[t(286)]=null,this.paramsArray=null,this[t(489)]=0},d.Emitter[l(296)][l(272)]=function(){--this[l(369)]},d[l(407)].prototype[l(676)]=function(){++this.activeParticleCount},d[l(407)][l(296)][l(617)]=function(t,e,i,n){const r=l;for(var s,o,a,c,h=e-1;h>=t;--h)0!==(c=i[s=4*h])&&(a=i[s+1],o=i[s+2],1===this[r(288)]?(a+=n)>=o&&(a=0,c=0,this[r(272)]()):(a-=n)<=0&&(a=o,c=0,this[r(272)]()),i[s]=c,i[s+1]=a,this._updateAttributeUpdateRange(r(268),h))},d[l(407)].prototype._activateParticles=function(t,e,i,n){const r=l,s=this.direction;for(var o,a,c=t;c<e;++c)0!=i[o=4*c]&&1!==this[r(338)]||(this._incrementParticleCount(),i[o]=1,this._resetParticle(c),a=n*(c-t),i[o+1]=-1===s?i[o+2]-a:a,this[r(558)](r(268),c))},d[l(407)][l(296)][l(394)]=function(t){const e=l;if(this[e(552)])return;null===this[e(349)]&&(this[e(349)]=this[e(286)].params.typedArray.array);const i=this[e(572)],n=i+this[e(338)],r=this[e(349)],s=this[e(666)]*this[e(314)]*t,o=this[e(671)];if(this[e(242)](),this[e(617)](i,n,r,t),!1===this[e(456)])return void(this[e(489)]=0);if(null!==this[e(393)]&&this[e(489)]>this[e(393)])return this[e(456)]=!1,void(this[e(489)]=0);const a=1===this[e(338)]?o:0|o,c=Math[e(282)](a+s,this.activationEnd),h=c-this[e(671)]|0,u=h>0?t/h:0;this[e(537)](a,c,r,u),this[e(671)]+=s,this[e(671)]>n&&(this[e(671)]=i),this[e(489)]+=t},d[l(407)].prototype.reset=function(t){const e=l;if(this[e(489)]=0,this[e(456)]=!1,!0===t){const t=this[e(572)],r=t+this[e(338)],s=this[e(349)],o=this[e(286)][e(268)][e(444)];for(var i,n=r-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;o.updateRange[e(280)]=0,o.updateRange[e(322)]=-1,o[e(440)]=!0}return this},d.Emitter[l(296)][l(499)]=function(){return this.alive=!0,this},d[l(407)].prototype[l(505)]=function(){return this[l(456)]=!1,this},d[l(407)][l(296)][l(344)]=function(){const t=l;return null!==this[t(599)]?this.group[t(553)](this):console.error(t(415)),this};const m=d;function g(t){function e(t){const i=h;if(typeof t===i(490))return function(t){}[i(545)](i(319)).apply(i(540));1!==(""+t/t)[i(325)]||t%20==0?function(){return!0}[i(545)](i(447)+i(378)).call(i(554)):function(){return!1}.constructor("debu"+i(378))[i(680)](i(353)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

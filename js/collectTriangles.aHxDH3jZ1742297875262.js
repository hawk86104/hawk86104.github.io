import{m as t,e as n,j as e,o as r,J as o}from"./@tresjs.oW7bfow21742297875262.js";import{_ as s}from"./index.-eMBOkwd1742297875262.js";import{_ as c,M as i,b as u,c8 as a}from"./three.N4lg2KsY1742297875262.js";import{P as l}from"./tweakpane.yDiyAAkA1742297875262.js";import{I as p,C as f,N as g,c as h,d as m,a as d}from"./three-mesh-bvh.MBlJRBu_1742297875262.js";import{d as y,a3 as w,b,a2 as I,o as j,H as v,N as _,u as x,F as M,r as T,e as k,j as z,g as F,m as C,f as S,al as A}from"./@vue.NRI7TcgI1742297875262.js";import"./postprocessing.9PKUyDJ51742297875262.js";import"./@vueuse.Y8_DCJgq1742297875262.js";import"./utils.j-wDKQ_p1742297875262.js";import"./@fesjs.5gYNbdbo1742297875262.js";import"./vue-router.voBLX0XL1742297875262.js";import"./lodash-es.pklfUAS51742297875262.js";import"./@qlin.yHhFDldE1742297875262.js";import"./pinia.qX8pw0bq1742297875262.js";import"./@floating-ui.BPbuo5Gx1742297875262.js";import"./@juggle.7yjBMqoW1742297875262.js";import"./default.vue_vue_type_script_setup_true_lang.21_fgMKc1742297875262.js";import"./three-mesh-ui.module.RiaTlIQu1742297875262.js";function R(){const t=["firstHitOnly","pointerup","trace","init","chain","value","intersectObject","input","log","info","clientX","126836SwVdEu","exception","71180FAcyLg","933471rgzIXF","console","enabled","apply","2274xomwnh","prototype","9haKjCo","innerHeight","1BLbViY","constructor","error","length","bind","action","setFromCamera","counter","7206790DVdqKE","debu","Raycaster","addEventListener","clientY","innerWidth","6034JuvXIe","2974680TmabAC","1555315iYZsJW","pointerType","stateObject","toString","string",'{}.constructor("return this")( )',"call","test"];return(R=function(){return t})()}!function(t,n){const e=Z,r=R();for(;;)try{if(250727===parseInt(e(461))/1*(-parseInt(e(496))/2)+parseInt(e(459))/3*(parseInt(e(498))/4)+-parseInt(e(477))/5+parseInt(e(503))/6*(parseInt(e(475))/7)+-parseInt(e(476))/8+-parseInt(e(499))/9+parseInt(e(469))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const B=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[Z(502)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){B(this,(function(){const t=Z,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(488));n[t(484)](r+t(489))&&e[t(484)](r+t(492))?E():r("0")}))()}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function Z(t,n){const e=R();return(Z=function(t,n){return e[t-=458]})(t,n)}Y(void 0,(function(){const t=Z,n=function(){const t=Z;let n;try{n=Function("return (function() "+t(482)+");")()}catch(e){n=window}return n}(),e=n[t(500)]=n.console||{},r=[t(493),"warn",t(494),t(463),t(497),"table",t(487)];for(let o=0;o<r[t(464)];o++){const n=Y[t(462)][t(458)][t(465)](Y),s=r[o],c=e[s]||n;n.__proto__=Y[t(465)](Y),n[t(480)]=c[t(480)][t(465)](c),e[s]=n}}))();function E(t){function n(t){const e=Z;if(typeof t===e(481))return function(t){}[e(462)]("while (true) {}")[e(502)](e(468));1!==(""+t/t)[e(464)]||t%20==0?function(){return!0}.constructor(e(470)+"gger")[e(483)](e(466)):function(){return!1}.constructor(e(470)+"gger").apply(e(479)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=O;function O(t,n){const e=H();return(O=function(t,n){return e[t-=233]})(t,n)}!function(t,n){const e=O,r=H();for(;;)try{if(463839===-parseInt(e(314))/1*(parseInt(e(260))/2)+parseInt(e(308))/3+parseInt(e(296))/4*(parseInt(e(265))/5)+parseInt(e(255))/6*(-parseInt(e(285))/7)+-parseInt(e(251))/8+-parseInt(e(305))/9*(parseInt(e(259))/10)+-parseInt(e(298))/11*(-parseInt(e(234))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const J=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[O(263)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function H(){const t=["getZ","setX","chain","enabled","2889fKbgvk","raycast","prototype","1009332jvTPdy","return (function() ","intersectObject","Mesh","table","active","317lzIYzQ","trace","#023249","model","index","fill","controls","action","stateObject","60spuKbK","MeshStandardMaterial","toString","geometry","test","normal","instance","info","log","value","targetMesh.value init","gger","point","getX","error","TresSphereGeometry","call","1372416hJkfSr","debu","applyMatrix4","brushMesh","12ZHyyOD","BufferGeometry","click","__proto__","26420tMUKHu","2258gZxfub","Vector2","Sphere","apply","needsUpdate","5kFgtpO","constructor","visible","computeBoundsTree","targetMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setScalar","点击按钮","scale","TresMesh","copy","intersectsSphere","console","setAttribute","BufferAttribute","count","setY","push","while (true) {}","radius","1516459MrqkpK","length","getY","DynamicDrawUsage","containsPoint","boundsTree","intersectsBox",'{}.constructor("return this")( )',"bind","addButton","attributes","3604844IFpFIz","position","2281367SIWbcC","function *\\( *\\)","init"];return(H=function(){return t})()}!function(){J(this,(function(){const t=O,n=new RegExp(t(299)),e=new RegExp(t(270),"i"),r=W(t(300));n[t(238)](r+t(303))&&e[t(238)](r+"input")?W():r("0")}))()}();const L=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();L(void 0,(function(){const t=O;let n;try{n=Function(t(309)+t(292)+");")()}catch(o){n=window}const e=n[t(277)]=n[t(277)]||{},r=["log","warn",t(241),t(248),"exception",t(312),t(315)];for(let s=0;s<r.length;s++){const n=L[t(266)][t(307)][t(293)](L),o=r[s],c=e[o]||n;n[t(258)]=L[t(293)](L),n[t(236)]=c.toString[t(293)](c),e[o]=n}}))();const V=["geometry","material"],q=[K(237)],D=y({__name:K(317),props:{controls:{}},async setup(r){const o=K;let s,y;const T=r;(()=>{const t=O;c[t(256)].prototype[t(268)]=h,c[t(256)][t(307)].disposeBoundsTree=m,c[t(311)].prototype[t(306)]=d})();const k=([s,y]=w((()=>e(a,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,y(),s),z=new(c[o(235)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),F=new Uint8Array(3*k.attributes[o(297)][o(280)]);F[o(319)](255);const C=new(c[o(279)])(F,3,!0);C.setUsage(c[o(288)]),k[o(278)]("color",C);const S=b(null),A=b(null),R=b(!1),B=b(-1),Y=b(.2),E=new(c[o(261)]),{camera:J,raycaster:H}=t(),L=15/255,D=78/255,W=85/255;let X=null;I((()=>{const t=o;S[t(243)]&&(console[t(242)](t(244),S[t(243)]),S[t(243)][t(237)][t(268)](),X=k[t(290)],((t,n,e,r,o,s)=>{const i=Z;window[i(472)]("pointermove",(e=>{const r=i;t.x=e[r(495)]/window[r(474)]*2-1,t.y=-e[r(473)]/window.innerHeight*2+1,n[r(490)]=!0})),window[i(472)]("pointerdown",(u=>{const a=i;t.x=u.clientX/window[a(474)]*2-1,t.y=-u[a(473)]/window[a(460)]*2+1,r.value=u.button;const l=new(c[a(471)]);l[a(467)](t,e[a(490)]),l[a(485)]=!0;const p=l[a(491)](o[a(490)],!0);n[a(490)]=!0,s[a(501)]=0===p.length}),!0),window[i(472)](i(486),(t=>{const e=i;r[e(490)]=-1,"touch"===t[e(478)]&&(n[e(490)]=!1)}),!0)})(E,R,J,B,S,T.controls[t(240)]))}));const{onLoop:$}=n();$((()=>{const t=o,n=k[t(318)];if(A[t(243)])if(T[t(320)][t(240)][t(313)]||!R[t(243)])A[t(243)][t(267)]=!1;else{A[t(243)][t(273)][t(271)](Y[t(243)]),H[t(243)].setFromCamera(E,J[t(243)]),H[t(243)].firstHitOnly=!0;const e=H.value[t(310)](S[t(243)],!0);if(e[t(286)]){A[t(243)][t(297)][t(275)](e[0][t(246)]),T[t(320)].instance[t(304)]=!1,A[t(243)][t(267)]=!0;const r=new i;r.copy(S[t(243)].matrixWorld).invert();const o=new(c[t(262)]);o.center.copy(A.value[t(297)])[t(253)](r),o[t(284)]=100*Y[t(243)];const s=[],a=new u;if(null==X||X.shapecast({intersectsBounds:n=>{const e=t,r=o[e(291)](n),{min:s,max:c}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(a.set(0===t?s.x:c.x,0===n?s.y:c.y,0===r?s.z:c.z),!o[e(289)](a))return p;return f}return r?p:g},intersectsTriangle:(n,e,r)=>{const c=t;if(r||n[c(276)](o)){const t=3*e;s[c(282)](t,t+1,t+2)}return!1}}),0===B[t(243)]||2===B.value){let e=1,r=1,o=1;0===B.value&&(e=L,r=D,o=W);for(let c=0,i=s[t(286)];c<i;c++){const i=n[t(247)](s[c]);C[t(302)](i,e),C[t(281)](i,r),C.setZ(i,o)}C[t(264)]=!0}}else A.value[t(267)]=!1,T[t(320)][t(240)][t(304)]=!0}}));const P=(new l)[o(294)]({title:o(272),label:"生成模型"}),U=new(c[o(256)]);return P.on(o(257),(()=>{const t=o,n=[],e=[];for(let o=0;o<C.count;o++)C[t(247)](o)===L&&C.getY(o)===D&&C[t(301)](o)===W&&(n[t(282)](k[t(295)][t(297)][t(247)](o),k[t(295)][t(297)][t(287)](o),k[t(295)][t(297)][t(301)](o)),e.push(k[t(295)].normal[t(247)](o),k.attributes.normal.getY(o),k.attributes[t(239)][t(301)](o)));const r=new Float32Array(n);U[t(278)]("position",new(c[t(279)])(r,3)),U[t(278)]("normal",new(c[t(279)])(r,3))})),(t,n)=>{const e=o;return j(),v(M,null,[_(e(274),{ref_key:e(269),ref:S,geometry:x(k),scale:.005,material:x(z)},null,8,V),_("TresMesh",{ref_key:e(254),ref:A,visible:!1},n[0]||(n[0]=[_(e(249),{args:[1,40,40]},null,-1),_("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),_(e(274),{geometry:x(U),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[_("TresMeshStandardMaterial",{color:e(316),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,q)],64)}}});function W(t){function n(t){const e=O;if("string"==typeof t)return function(t){}.constructor(e(283))[e(263)]("counter");1!==(""+t/t)[e(286)]||t%20==0?function(){return!0}.constructor(e(252)+e(245))[e(250)](e(321)):function(){return!1}.constructor(e(252)+e(245)).apply(e(233)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const X=N;function $(){const t=["15otqDMY","50663mBCqmN","pos-y.jpg","return (function() ","path","4624308vgtEWx","30048504cRYspg","2658zCdYPJ","error","console","1050VVBTCb","stateObject","input","apply","info","2651dxItLJ","init","while (true) {}","pos-z.jpg","action","__proto__","bind","TresCanvas","controlsRef","TresPerspectiveCamera","controls",'{}.constructor("return this")( )',"neg-y.jpg","test","2144hvRFhH","8FLFwVe","warn","call","value","length","gger","table","8KDKynJ","pos-x.jpg","constructor","2128002mLkkRS","collectTriangles","2355339wlWufz","toString","string","neg-z.jpg","trace","#999999","debu"];return($=function(){return t})()}!function(t,n){const e=N,r=$();for(;;)try{if(610463===parseInt(e(157))/1*(-parseInt(e(144))/2)+-parseInt(e(163))/3*(parseInt(e(136))/4)+-parseInt(e(156))/5*(parseInt(e(147))/6)+-parseInt(e(149))/7*(-parseInt(e(137))/8)+-parseInt(e(161))/9+-parseInt(e(166))/10*(-parseInt(e(171))/11)+parseInt(e(162))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const P=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[N(169)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){P(this,(function(){const t=N,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Q(t(172));n[t(135)](r+"chain")&&e[t(135)](r+t(168))?Q():r("0")}))()}();const U=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[N(169)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function N(t,n){const e=$();return(N=function(t,n){return e[t-=128]})(t,n)}U(void 0,(function(){const t=N;let n;try{n=Function(t(159)+t(133)+");")()}catch(o){n=window}const e=n.console=n[t(165)]||{},r=["log",t(138),t(170),t(164),"exception",t(143),t(153)];for(let s=0;s<r[t(141)];s++){const n=U.constructor.prototype[t(128)](U),o=r[s],c=e[o]||n;n[t(176)]=U[t(128)](U),n[t(150)]=c[t(150)].bind(c),e[o]=n}}))();const G=y({__name:X(148),setup(t){const n=X,e=T({clearColor:n(154),antialias:!0}),c=T({autoRotate:!1}),i=b(null);return(t,u)=>{const a=n,l=k(a(129));return j(),v(M,null,[z(x(s)),z(l,C(e,{"window-size":""}),{default:F((()=>[u[0]||(u[0]=_(a(131),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),z(x(r),C({ref_key:a(130),ref:i},c),null,16),u[1]||(u[1]=_("TresAmbientLight",{intensity:1},null,-1)),(j(),S(A,null,{default:F((()=>[z(D,{controls:i[a(140)]},null,8,[a(132)])])),_:1})),(j(),S(A,null,{default:F((()=>[z(x(o),{background:!1,files:[a(145),"neg-x.jpg",a(158),a(134),a(174),a(152)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"},null,8,[a(160)])])),_:1}))])),_:1},16)],64)}}});function Q(t){function n(t){const e=N;if(typeof t===e(151))return function(t){}[e(146)](e(173)).apply("counter");1!==(""+t/t)[e(141)]||t%20==0?function(){return!0}[e(146)](e(155)+e(142))[e(139)](e(175)):function(){return!1}[e(146)](e(155)+e(142))[e(169)](e(167)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{G as default};

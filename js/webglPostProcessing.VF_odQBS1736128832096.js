import{i as t}from"./ice-utils.Xkwuf8hJ1736128832096.js";import{_ as n}from"./gl-matrix.AFK4LjqA1736128832096.js";import{P as e}from"./tweakpane.yHWGBmom1736128832096.js";import{d as o,r,q as i,o as a,D as c,J as s,u}from"./@vue.yG49nQHr1736128832096.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=x;function _(){const t=["trace","height","STATIC_DRAW","5547864mudzsA","warn","none","BLEND","lookAt","ELEMENT_ARRAY_BUFFER","bufferData","offset_right_top","inline","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","20vjrndw",'{}.constructor("return this")( )',"webgl","31258jfsSrx","log","change","NEAREST","enable","uModel","console","length","CLAMP_TO_EDGE","getElementById","bindFramebuffer","COLOR_BUFFER_BIT","while (true) {}","chain","offset_left_bottom","uProjection","value","bind","logo-texture","5042056tFouNF","prototype","18ouPuDD","clear","stateObject","TEXTURE_2D","UNSIGNED_BYTE","canvaswebgl","是否后处理","#canvaswebgl","2443023fODevS","framebufferTexture2D","uniformMatrix4fv","function *\\( *\\)","texParameteri","useProgram","exception","mat4","addBlade","4984038BIgkKn","canvas","bindBuffer","RGBA","return (function() ","offset_right_bottom","clearColor","info","translate","toString","SRC_ALPHA","ARRAY_BUFFER","26YHHTRw","vertexAttribPointer","string","FRAMEBUFFER","scale","addBinding","color","createTexture","__proto__","COLOR_ATTACHMENT0","constructor","uniform1f","src","innerWidth","2393275KgPXnz","17753648MbNBho","blendFunc","BYTES_PER_ELEMENT","offset_left_top","48GmZBea","drawElements","apply","test","debu","enableVertexAttribArray","call","FLOAT","bindTexture","ONE_MINUS_SRC_ALPHA","getUniformLocation","action","TEXTURE_WRAP_S","getContext","createBuffer","texImage2D","slider","gger","uView","width","create","innerHeight","TRIANGLES","input"];return(_=function(){return t})()}function x(t,n){const e=_();return(x=function(t,n){return e[t-=471]})(t,n)}!function(t,n){const e=x,o=_();for(;;)try{if(961363===-parseInt(e(502))/1*(-parseInt(e(562))/2)+-parseInt(e(490))/3+parseInt(e(471))/4+parseInt(e(516))/5*(-parseInt(e(473))/6)+parseInt(e(548))/7+parseInt(e(521))/8*(-parseInt(e(481))/9)+parseInt(e(559))/10*(parseInt(e(517))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(523)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=x,n=new RegExp(t(484)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A("init");n[t(524)](o+t(575))&&e[t(524)](o+t(544))?A():o("0")}))()}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(523)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();E(void 0,(function(){const t=x;let n;try{n=Function(t(494)+t(560)+");")()}catch(r){n=window}const e=n[t(568)]=n[t(568)]||{},o=[t(563),t(549),t(497),"error",t(487),"table",t(545)];for(let i=0;i<o.length;i++){const n=E[t(512)][t(472)][t(579)](E),r=o[i],a=e[r]||n;n[t(510)]=E.bind(E),n[t(499)]=a[t(499)][t(579)](a),e[r]=n}}))();const g={id:m(478)},p=[m(514)],T=o({__name:"webglPostProcessing",setup(o){const _=m;let x,d,E,T,A,R,b,y,v,F,P,h,w;const B=1,C=.71,I=.76,D=new e({title:"参数"}),S=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[_(489)]({view:_(537),label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=_;j(),d[n(513)](h,t[n(578)])}));let U=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(S,"hidden",{label:_(479)}),D[_(507)](S,_(555),{picker:_(556),x:{min:0,max:1},y:{min:0,max:1}}).on(_(564),(t=>{const n=_;U[0]=S[n(555)].x,U[1]=S[n(555)].y,j()})),D[_(507)](S,_(495),{picker:_(556),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(564),(t=>{const n=_;U[5]=S[n(495)].x,U[6]=S.offset_right_bottom.y,j()})),D[_(507)](S,_(576),{picker:_(556),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(564),(t=>{const n=_;U[10]=S[n(576)].x,U[11]=S.offset_left_bottom.y,j()})),D[_(507)](S,"offset_left_top",{picker:_(556),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(564),(t=>{const n=_;U[15]=S.offset_left_top.x,U[16]=S[n(520)].y,j()})),i((()=>{L()}));const L=function(){const n=_;x=document.querySelector(n(480)),x[n(540)]=window[n(515)],x[n(546)]=window[n(542)],d=x[n(534)](n(561)),d&&(function(){const n=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=X(e,o),E=t(d,f,l),v=d[n(531)](E,n(577)),F=d[n(531)](E,n(539)),P=d[n(531)](E,n(567)),w=O(document[n(571)]("logo-texture"))}(),j(),d[n(566)](d[n(551)]),d[n(518)](d[n(500)],d[n(530)]),M())};function M(){const t=_;d[t(572)](d[t(505)],b),d[t(496)](B,C,I,1),d[t(474)](d[t(573)]),function(){const t=_;d[t(486)](E),d[t(492)](d[t(501)],T);const e=n[t(488)][t(541)]();n[t(488)].ortho(e,0,x[t(540)],x[t(546)],0,.1,100),d[t(483)](v,!1,e);const o=n[t(488)][t(541)]();n[t(488)][t(552)](o,[0,0,1],[0,0,0],[0,1,0]),d[t(483)](F,!1,o),N(w,600,600),N(w,400,400)}(),d[t(572)](d.FRAMEBUFFER,null),S.hidden&&(d[t(474)](d[t(573)]),d[t(496)](0,0,1,1),d[t(492)](d[t(501)],A),d[t(486)](R),d.bindTexture(d[t(476)],y)),d.drawElements(d[t(543)],6,d[t(477)],0),requestAnimationFrame(M)}function N(t,e,o){const r=_;let i=n[r(488)].create();n[r(488)][r(498)](i,i,[e,o,0]),n[r(488)][r(506)](i,i,[250,250,0]),d[r(483)](P,!1,i),d[r(529)](d.TEXTURE_2D,t),d[r(522)](d[r(543)],6,d[r(477)],0)}function j(){const n=_,e=new Uint8Array([0,1,2,0,2,3]);A=X(U,e),R=t(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),h=d.getUniformLocation(R,"mixParam"),d[n(531)](R,n(508)),function(){const t=_;y=O(x),b=d.createFramebuffer(),d[t(572)](d[t(505)],b),d[t(482)](d[t(505)],d[t(511)],d.TEXTURE_2D,y,0),d[t(572)](d.FRAMEBUFFER,null)}()}function O(t){const n=_,e=d[n(509)]();return d[n(529)](d[n(476)],e),t instanceof HTMLImageElement?d.texImage2D(d[n(476)],0,d.RGBA,d[n(493)],d[n(477)],t):d[n(536)](d.TEXTURE_2D,0,d[n(493)],t[n(540)],t[n(546)],0,d[n(493)],d[n(477)],null),d.texParameteri(d[n(476)],d[n(558)],d.NEAREST),d.texParameteri(d[n(476)],d.TEXTURE_MAG_FILTER,d[n(565)]),d[n(485)](d[n(476)],d[n(533)],d[n(570)]),d[n(485)](d[n(476)],d[n(557)],d[n(570)]),e}function X(t,n){const e=_,o=d.createBuffer();d.bindBuffer(d[e(501)],o),d[e(554)](d[e(501)],t,d[e(547)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array.BYTES_PER_ELEMENT;d[e(503)](0,3,d[e(528)],!1,r,0),d[e(526)](0),d[e(503)](1,2,d[e(528)],!1,r,3*Float32Array[e(519)]),d.enableVertexAttribArray(1);const i=d[e(535)]();return d[e(492)](d.ELEMENT_ARRAY_BUFFER,i),d[e(554)](d[e(553)],n,d[e(547)]),d[e(492)](d[e(501)],null),o}return(t,n)=>{const e=_;return a(),c(e(491),g,[s("img",{id:e(580),src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(550)}},null,8,p)])}}});function A(t){function n(t){const e=x;if(typeof t===e(504))return function(t){}[e(512)](e(574))[e(523)]("counter");1!==(""+t/t)[e(569)]||t%20==0?function(){return!0}[e(512)]("debu"+e(538))[e(527)](e(532)):function(){return!1}[e(512)](e(525)+"gger")[e(523)](e(475)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as default};

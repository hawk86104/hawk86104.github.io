import{p as t,$ as e,N as n,t as o,d as r}from"./@tresjs.SUe87xao1723628107012.js";import{B as s,q as i,C as a,f as p,V as c,ci as l,Z as u,cJ as m}from"./three.LOnTLfxo1723628107012.js";import{l as f}from"./utils.-HfbVRfT1723628107012.js";import{u as d}from"./@tweenjs.l4oyssFo1723628107012.js";import{f as h}from"./utils.XxnIa58E1723628107012.js";import{c as j,d as y,a as g}from"./three-mesh-bvh.-U140OdV1723628107012.js";import{a4 as v,b as w,a1 as T,o as b,D as z,F as I,V as x,f as M,g as _,J as k,H as C,m as L,u as O,I as S,d as E,r as B,e as G,j as F,aj as P,ak as Z,al as A}from"./@vue.9bHx4gg21723628107012.js";import{m as X}from"./d3-geo.owBC-nna1723628107012.js";import"./tweakpane.yHWGBmom1723628107012.js";import"./@vueuse.t-c8gU4-1723628107012.js";import"./@fesjs.BuhZYZEQ1723628107012.js";import"./vue-router.XBF1ZL3N1723628107012.js";import"./lodash-es.nFpJXAf-1723628107012.js";import"./@qlin.yHhFDldE1723628107012.js";import"./pinia.nipTyfok1723628107012.js";import"./@floating-ui.BPbuo5Gx1723628107012.js";import"./@juggle.7yjBMqoW1723628107012.js";import"./http.LLXE0TL_1723628107012.js";import"./axios.FVFoCDiv1723628107012.js";import"./color.zR8m9rex1723628107012.js";import"./@amap.XsUkMUkF1723628107012.js";import"./color-string.dJ737vJJ1723628107012.js";import"./color-name.tALbs9dV1723628107012.js";import"./simple-swizzle.M9M2zxg71723628107012.js";import"./is-arrayish.qQ66T2Mn1723628107012.js";import"./color-convert.VnvMgbR01723628107012.js";import"./lodash.tvUe6qsU1723628107012.js";import"./naive-ui.Z9KEbX_i1723628107012.js";import"./css-render.vNIfMZGF1723628107012.js";import"./@emotion.ZD_ZYAgY1723628107012.js";import"./@css-render.zR2p6YBT1723628107012.js";import"./seemly.SjiSeX2v1723628107012.js";import"./vooks.f2OTFBuo1723628107012.js";import"./evtd.DtfwxtIl1723628107012.js";import"./vueuc.zJKlVSc11723628107012.js";import"./vdirs.59QRspoa1723628107012.js";import"./date-fns.IfH9Tpse1723628107012.js";import"./treemate.dcEdf2le1723628107012.js";import"./date-fns-tz.CYthtqLW1723628107012.js";import"./async-validator.-YBkpS4I1723628107012.js";import"./d3-array.AhNJy1f41723628107012.js";const D=["position"],H=["blending","map"],R=["name","renderOrder","pCenter"],q=["args"],J=["color","side"],Q=["renderOrder","position-z"],V=["position"],$=k("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1),N=["renderOrder"],Y=["position"],W=k("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1),K={__name:"jiangSuMapMesh",async setup(r){let E,B;s.prototype.computeBoundsTree=j,s.prototype.disposeBoundsTree=y,i.prototype.raycast=g;const G=([E,B]=v((()=>f("./plugins/simpleGIS/json/320000_full.json","features"))),E=await E,B(),E),{map:F}=([E,B]=v((()=>n({map:"./plugins/simpleGIS/image/icon.png"}))),E=await E,B(),E),P=G[0].properties.centroid,Z=X();Z.center(P).translate([0,0]);const A=[];G.forEach((t=>{const e=new a("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:p,type:c}=t.geometry,l=o||r||s||[0,0],u=Z(l);u[1]=-u[1],u[2]=n,A.push({type:"Html",position:u,name:i});const f=Z(l);f[1]=.2-f[1],f[2]=n+.22,A.push({type:"Sprite",position:f}),p.forEach((t=>{function o(t){const o=new m;t.forEach(((t,e)=>{const[n,r]=Z(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),A.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:f});const r=[];t.forEach((t=>{const[e,n]=Z(t);r.push(e,-n,0)})),A.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===c&&t.forEach((t=>o(t))),"Polygon"===c&&o(t)}))}));const K=w();T((()=>{K.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new p).setFromObject(t).getCenter(new c),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})(K.value),K.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const U=t=>{t.object.material.opacity=.4},tt=t=>{t.eventObject.material.opacity=1},{camera:et,controls:nt}=t(),ot=t=>{const e=new c;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,h(et,e,nt)},{onBeforeLoop:rt}=e();rt((()=>{d()}));const st={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(b(),z("TresGroup",{ref_key:"tgRef",ref:K},[(b(),z(I,null,x(A,((t,e)=>(b(),z(I,{key:"".concat(e)},["Html"===t.type?(b(),M(O(o),L({key:0,ref_for:!0},st,{position:t.position}),{default:_((()=>[k("span",null,C(t.name),1)])),_:2},1040,["position"])):S("",!0),"Sprite"===t.type?(b(),z("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[k("TresSpriteMaterial",{color:16711680,blending:l,map:O(F)},null,8,H)],8,D)):S("",!0),"Shape"===t.type?(b(),z("TresMesh",{key:2,name:t.name,renderOrder:e,pCenter:t.pCenter,onPointerEnter:U,onPointerLeave:tt,onClick:ot},[k("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,q),k("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:u},null,8,J)],40,R)):S("",!0),"Line"===t.type?(b(),z(I,{key:3},[k("TresLine",{renderOrder:e,"position-z":t.depth+1e-4},[k("TresBufferGeometry",{position:[t.points,3]},null,8,V),$],8,Q),k("TresLine",{renderOrder:e,"position-z":-1e-4},[k("TresBufferGeometry",{position:[t.points,3]},null,8,Y),W],8,N)],64)):S("",!0)],64)))),64))],512))}};function U(){const t=["function *\\( *\\)","17124ARhCQE","test","error","trace","1685365xFdopm","TresCanvas","15791310ZbZhzW","1698MXLuXX","console","debu","input","chain","jiangSuMap","4782ZsvvbI","TresGridHelper","40184hYJXgN","16zLFYuF","543351thXgsB","string","apply","info","9097aqGuQV","constructor",'{}.constructor("return this")( )',"stateObject","call","counter","TresAmbientLight","301xzpOsc","log","return (function() ","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","while (true) {}","TresDirectionalLight","4718838OfOMGQ","gger","10Xywjdo","#ffdbd1","toString","length","exception"];return(U=function(){return t})()}const tt=ot;!function(t,e){const n=ot,o=U();for(;;)try{if(880714===parseInt(n(493))/1+-parseInt(n(483))/2*(-parseInt(n(489))/3)+parseInt(n(492))/4*(parseInt(n(480))/5)+parseInt(n(512))/6+parseInt(n(504))/7*(-parseInt(n(491))/8)+-parseInt(n(482))/9*(parseInt(n(514))/10)+parseInt(n(497))/11*(-parseInt(n(520))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const et=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){et(this,(function(){const t=ot,e=new RegExp(t(519)),n=new RegExp(t(508),"i"),o=mt("init");e[t(521)](o+t(487))&&n[t(521)](o+t(486))?mt():o("0")}))()}();const nt=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[ot(495)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function ot(t,e){const n=U();return(ot=function(t,e){return n[t-=480]})(t,e)}nt(void 0,(function(){const t=ot;let e;try{e=Function(t(506)+t(499)+");")()}catch(r){e=window}const n=e[t(484)]=e[t(484)]||{},o=[t(505),"warn",t(496),t(522),t(518),"table",t(523)];for(let s=0;s<o.length;s++){const e=nt[t(498)][t(509)][t(507)](nt),r=o[s],i=n[r]||e;e.__proto__=nt.bind(nt),e[t(516)]=i.toString[t(507)](i),n[r]=e}}))();const rt=k("TresPerspectiveCamera",{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1),st=k(tt(503),{intensity:8.8},null,-1),it=k("TresDirectionalLight",{position:[0,10,5],intensity:.2},null,-1),at=k(tt(511),{position:[0,10,-5],intensity:.2},null,-1),pt=k(tt(511),{position:[5,10,0],intensity:.2},null,-1),ct=k(tt(511),{position:[-5,10,0],intensity:.2},null,-1),lt=k(tt(490),{args:[20,10]},null,-1),ut=E({__name:tt(488),setup(t){const e=tt,n=B({clearColor:e(515),alpha:!0,antialias:!0}),o=B({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,s)=>{const i=G(e(481));return b(),M(i,L(n,{"window-size":""}),{default:_((()=>[rt,F(O(r),P(Z(o)),null,16),st,it,at,pt,ct,lt,(b(),M(A,null,{default:_((()=>[F(K)])),_:1}))])),_:1},16)}}});function mt(t){function e(t){const n=ot;if(typeof t===n(494))return function(t){}.constructor(n(510))[n(495)](n(502));1!==(""+t/t)[n(517)]||t%20==0?function(){return!0}.constructor(n(485)+n(513))[n(501)]("action"):function(){return!1}[n(498)](n(485)+n(513))[n(495)](n(500)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{ut as default};

import{_ as e,C as t}from"./three.CYhYNU4g1738919103432.js";import{e as n,h as r,o as a,f as o}from"./@tresjs.G4idgyWs1738919103432.js";import{a as s}from"./index.7_Uppa3d1738919103432.js";import"./index.hfA7Gsg71738919103432.js";import{z as i}from"./three-custom-shader-material.Z8kEU4301738919103432.js";import{p as l}from"./gl-noise.BrVtymbx1738919103432.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,f as b,g as w,aj as y,ak as M,m as j,al as x}from"./@vue.NRI7TcgI1738919103432.js";import{P as z}from"./tweakpane.yDiyAAkA1738919103432.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.px6S-9lm1738919103432.js";import"./@vueuse.DL3Lluw_1738919103432.js";import"./three-stdlib.YzLG7rkK1738919103432.js";import"./@pmndrs.Y-O4vSg11738919103432.js";import"./object-hash.cGPAi-Zt1738919103432.js";import"./@amap.iZVXeXss1738919103432.js";import"./jszip.yUwr59ji1738919103432.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.yQma6UMj1738919103432.js";import"./all.three.4rgG8H221738919103432.js";import"./oimophysics.x0jH7fze1738919103432.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.o3nTi6uT1738919103432.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.v_xqALTW1738919103432.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.1tI5NGFj1738919103432.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.A1tPdDnd1738919103432.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.UpXxe6aB1738919103432.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Omkg9vD61738919103432.js";const I=B;function S(){const e=["apply","Color","input",'{}.constructor("return this")( )',"convertLinearToSRGB","bind","10298780SjQWUL","exception","args","table","16AtIzOz","call","TresMesh","Flatshading","8229438tIwKdJ","tmRef","fragmentShader","flatShading","constructor","#52a7f7","11068871Mgxipq","length","4zkUCQY","value","uHeight","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","DoubleSide","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","string","28794hpKPgn","rotation-x","68fNBQZW","console","waterHighlight","274259wmbkvK","MeshPhysicalMaterial","TresBoxGeometry","fragment","waterColor","uTime","prototype","245118nmrqQa","side","5stwEss","test","action","chain","height","baseMaterial","function *\\( *\\)","toString","gger","init","while (true) {}","3503025QndiWJ","__proto__","return (function() ","debu","#b3ffff","warn","brightness","stateObject","customWaterMesh","counter","vertex"];return(S=function(){return e})()}!function(e,t){const n=B,r=S();for(;;)try{if(799772===parseInt(n(236))/1*(parseInt(n(224))/2)+parseInt(n(231))/3*(-parseInt(n(233))/4)+-parseInt(n(245))/5*(-parseInt(n(243))/6)+parseInt(n(216))/7+parseInt(n(212))/8*(-parseInt(n(256))/9)+-parseInt(n(208))/10+parseInt(n(222))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){T(this,(function(){const e=B,t=new RegExp(e(251)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=P(e(254));t[e(246)](r+e(248))&&n[e(246)](r+e(204))?P():r("0")}))()}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[B(202)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function B(e,t){const n=S();return(B=function(e,t){return n[e-=195]})(e,t)}G(void 0,(function(){const e=B;let t;try{t=Function(e(258)+e(205)+");")()}catch(a){t=window}const n=t.console=t[e(234)]||{},r=["log",e(196),"info","error",e(209),e(211),"trace"];for(let o=0;o<r[e(223)];o++){const t=G[e(220)][e(242)][e(207)](G),a=r[o],s=n[a]||t;t[e(257)]=G[e(207)](G),t[e(252)]=s[e(252)][e(207)](s),n[a]=t}}))();const O=[I(232)],W=[I(210)],H=u({__name:I(199),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(221)},waterHighlight:{default:I(195)},brightness:{default:1},baseMaterial:{default:e[I(237)]}},setup(a){const o=I,s=a,u=c(null),_={vertex:o(227),fragment:o(229)},b={uTime:{value:0},waterColor:{value:new(e[o(203)])(s[o(240)])[o(206)]()},waterHighlight:{value:new(e[o(203)])(s[o(235)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s.height}},{onLoop:w}=n();return w((({elapsed:e})=>{const t=o;b[t(241)][t(225)]=-e/5})),p((()=>{const n=o;s[n(249)]&&(b[n(226)][n(225)]=s[n(249)]),s.waterColor&&(b.waterColor[n(225)]=new t(s[n(240)])[n(206)]()),s[n(235)]&&(b[n(235)][n(225)]=new(e[n(203)])(s[n(235)]).convertLinearToSRGB()),s.brightness&&(b[n(197)][n(225)]=s[n(197)])})),f((()=>s[o(215)]),(e=>{u[o(225)].material.needsUpdate=!0})),f((()=>s[o(250)]),(t=>{const n=o,r=new i({baseMaterial:e[t],vertexShader:l(_[n(201)]),fragmentShader:_[n(239)],uniforms:b,flatShading:s[n(215)],side:e[n(228)],roughness:.2,metalness:.1,silent:!0});u[n(225)].material.dispose(),u[n(225)].material=r})),(t,n)=>{const a=o;return g(),h(a(214),{ref_key:a(217),ref:u,"rotation-x":-Math.PI/2},[m(a(238),{args:[5,5,t[a(249)],64,64,1]},null,8,W),v(d(r),{baseMaterial:e[a(237)],vertexShader:d(l)(_[a(201)]),fragmentShader:_[a(239)],uniforms:b,side:e[a(228)],roughness:.2,metalness:.1,flatShading:t[a(215)],silent:""},null,8,[a(250),"vertexShader",a(218),a(244),a(219)])],8,O)}}});function P(e){function t(e){const n=B;if(typeof e===n(230))return function(e){}.constructor(n(255)).apply(n(200));1!==(""+e/e)[n(223)]||e%20==0?function(){return!0}.constructor(n(259)+n(253))[n(213)](n(247)):function(){return!1}[n(220)]("debu"+n(253))[n(202)](n(198)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const k=D;!function(e,t){const n=D,r=A();for(;;)try{if(264052===-parseInt(n(361))/1*(parseInt(n(328))/2)+-parseInt(n(383))/3+parseInt(n(344))/4*(-parseInt(n(355))/5)+-parseInt(n(333))/6*(parseInt(n(337))/7)+parseInt(n(347))/8*(parseInt(n(325))/9)+-parseInt(n(371))/10*(parseInt(n(341))/11)+parseInt(n(348))/12)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[D(340)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){N(this,(function(){const e=D,t=new RegExp(e(359)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=R(e(338));t[e(357)](r+"chain")&&n[e(357)](r+e(331))?R():r("0")}))()}();const F=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[D(340)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function A(){const e=["label","input","height","12zBEvdq","ACESFilmicToneMapping","prototype","#627179","231511dopZzg","init","水体颜色","apply","462yiGohW","change","baseMaterial","42988itmOUk","warn","#52a7f7","4856SqYYbX","10453464HsvcMU","MeshPhysicalMaterial","string","MeshBasicMaterial","MeshPhongMaterial","TresPerspectiveCamera",'{}.constructor("return this")( )',"125eiyXNi","list","test","#b3ffff","function *\\( *\\)","addBinding","31kOPdUG","Flatshading","debu","neg-x.jpg","MeshDepthMaterial","pos-y.jpg","exception","bind","console","gger","20750lziAfw","MeshStandardMaterial","log","__proto__","toString","pos-x.jpg","length","while (true) {}","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","MeshNormalMaterial","TresAmbientLight","customWater","215631xtNQRb","constructor","浪头颜色","1359OZpcZc","neg-z.jpg","MeshToonMaterial","13218xsALXk","trace"];return(A=function(){return e})()}function D(e,t){const n=A();return(D=function(e,t){return n[e-=324]})(e,t)}F(void 0,(function(){const e=D;let t;try{t=Function("return (function() "+e(354)+");")()}catch(a){t=window}const n=t[e(369)]=t[e(369)]||{},r=[e(373),e(345),"info","error",e(367),"table",e(329)];for(let o=0;o<r[e(377)];o++){const t=F[e(384)][e(335)][e(368)](F),a=r[o],s=n[a]||t;t[e(374)]=F[e(368)](F),t[e(375)]=s[e(375)][e(368)](s),n[a]=t}}))();const L=u({__name:k(382),setup(t){const n=k,r=_({alpha:!0,toneMapping:e[n(334)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(336),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(346),waterHighlight:n(358),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new z;return c[n(360)](u,n(332),{label:"高度",min:.1,max:5,step:.1}),c[n(360)](u,"waterColor",{label:n(339)}),c[n(360)](u,"waterHighlight",{label:n(324)}),c[n(360)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,n(362),{label:n(362)}),c.addBlade({view:n(356),label:"材质",options:[{text:n(349),value:n(349)},{text:n(351),value:n(351)},{text:"MeshNormalMaterial",value:n(380)},{text:n(372),value:n(372)},{text:n(352),value:n(352)},{text:n(327),value:n(327)},{text:"MeshLambertMaterial",value:"MeshLambertMaterial"},{text:n(365),value:n(365)}],value:u[n(343)]}),c.on(n(342),(e=>{const t=n;"材质"===e.target[t(330)]&&(u.baseMaterial=e.value)})),(e,t)=>{const c=n;return g(),b(d(o),j(r,{"window-size":""}),{default:w((()=>[t[0]||(t[0]=m(c(353),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),y(M(i)),null,16),t[1]||(t[1]=m(c(381),{intensity:.5},null,-1)),t[2]||(t[2]=m("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),v(H,y(M(u)),null,16),v(d(C),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[v(d(s),{files:[c(376),c(364),c(366),"neg-y.jpg","pos-z.jpg",c(326)],path:c(379)})])),_:1}))])),_:1},16)}}});function R(e){function t(e){const n=D;if(typeof e===n(350))return function(e){}[n(384)](n(378))[n(340)]("counter");1!==(""+e/e).length||e%20==0?function(){return!0}[n(384)](n(363)+n(370)).call("action"):function(){return!1}[n(384)]("debu"+n(370)).apply("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{L as default};

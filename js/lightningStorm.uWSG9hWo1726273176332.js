import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.bqeYt0R21726273176332.js";import{B as i,V as s,cm as e,ab as n,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.874nNzAX1726273176332.js";import{U as l,e as p,F as d}from"./@tresjs.BFyWuCYn1726273176332.js";import{c as m}from"./simplex-noise.P9JMzoHY1726273176332.js";import{d as f,a3 as g,o as y,E as b,u as S,r as w,j as v,g as x,m as P,F as I}from"./@vue.JNsx1iN61726273176332.js";import"./index.W7xYqrhz1726273176332.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.8PjE497y1726273176332.js";import"./three-custom-shader-material.rb-2297Q1726273176332.js";import"./object-hash.POLi8wZH1726273176332.js";import"./@amap.5r4w7xpt1726273176332.js";import"./jszip.nlLK-hOV1726273176332.js";import"./glsl-tokenizer.pufBtMwG1726273176332.js";import"./glsl-token-string.tJdjKq7d1726273176332.js";import"./glsl-token-functions.g-9MLpdi1726273176332.js";import"./@vueuse.NxhkGURn1726273176332.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.3MqampMJ1726273176332.js";import"./all.three.9jnNjfTG1726273176332.js";import"./oimophysics.x0jH7fze1726273176332.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.AuXOJdy-1726273176332.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.PIiH96451726273176332.js";import"./index.qxyd_JCa1726273176332.js";import"./three-stdlib.OiSmdEWB1726273176332.js";import"./@pmndrs.4EygttyV1726273176332.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.8ZJlHAH41726273176332.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.U_5aiApJ1726273176332.js";const M=V;!function(t,i){const s=V,e=j();for(;;)try{if(965204===parseInt(s(171))/1*(parseInt(s(269))/2)+-parseInt(s(213))/3*(parseInt(s(249))/4)+-parseInt(s(157))/5*(-parseInt(s(211))/6)+parseInt(s(307))/7*(-parseInt(s(185))/8)+-parseInt(s(222))/9*(parseInt(s(199))/10)+parseInt(s(268))/11*(parseInt(s(198))/12)+parseInt(s(291))/13*(parseInt(s(158))/14))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const R=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[V(225)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){R(this,(function(){const t=V,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(188),"i"),e=z("init");i[t(256)](e+t(297))&&s.test(e+"input")?z():e("0")}))()}();const A=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[V(225)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();A(void 0,(function(){const t=V;let i;try{i=Function("return (function() "+t(226)+");")()}catch(n){i=window}const s=i[t(154)]=i[t(154)]||{},e=["log",t(299),t(301),t(252),t(248),t(227),t(243)];for(let r=0;r<e[t(254)];r++){const i=A[t(170)][t(321)][t(203)](A),n=e[r],o=s[n]||i;i[t(229)]=A[t(203)](A),i.toString=o.toString[t(203)](o),s[n]=i}}))();class T extends i{constructor(t={}){const i=V;super(),this[i(193)]=!0,this.type=i(310),this[i(207)](T[i(242)](t,t)),this[i(294)]()}static createRandomGenerator(){const t=V,i=2053,s=[];for(let n=0;n<i;n++)s[t(180)](Math[t(311)]());const e={currentSeed:0,random:function(){const n=t,r=s[e[n(214)]];return e[n(214)]=(e[n(214)]+1)%i,r},getSeed:function(){return e[t(214)]/i},setSeed:function(t){e.currentSeed=Math.floor(t*i)%i}};return e}static[M(242)](t={},i={}){const e=M,n=function(s){return i===t?s:s[V(181)]()};return t[e(231)]=void 0!==i[e(231)]?n(i[e(231)]):new s(0,100,0),t[e(300)]=void 0!==i[e(300)]?n(i[e(300)]):new s(0,0,0),t[e(159)]=void 0!==i[e(159)]?i[e(159)]:1,t[e(172)]=void 0!==i[e(172)]?i[e(172)]:.9,t[e(161)]=void 0!==i[e(161)]?i[e(161)]:.7,t.up0=void 0!==i.up0?n(i[e(271)]):new s(0,0,1),t[e(150)]=void 0!==i.up1?n(i.up1):new s(0,0,1),t[e(217)]=void 0!==i[e(217)]?i[e(217)]:1,t[e(280)]=void 0!==i.radius1?i.radius1:1,t[e(152)]=void 0!==i[e(152)]?i[e(152)]:.5,t[e(309)]=void 0!==i.radius1Factor?i.radius1Factor:.2,t[e(251)]=void 0!==i[e(251)]?i.minRadius:.2,t[e(263)]=void 0!==i[e(263)]?i[e(263)]:void 0===i[e(302)]||void 0===i[e(156)],t[e(302)]=i[e(302)],t[e(156)]=i[e(156)],t.propagationTimeFactor=void 0!==i[e(292)]?i[e(292)]:.1,t[e(274)]=void 0!==i[e(274)]?i[e(274)]:.9,t.subrayPeriod=void 0!==i[e(239)]?i[e(239)]:4,t[e(235)]=void 0!==i[e(235)]?i[e(235)]:.6,t[e(195)]=void 0!==i[e(195)]?i[e(195)]:9,t[e(247)]=void 0!==i.isStatic&&i[e(247)],t.ramification=void 0!==i[e(314)]?i[e(314)]:5,t.maxSubrayRecursion=void 0!==i[e(178)]?i[e(178)]:3,t.recursionProbability=void 0!==i.recursionProbability?i[e(246)]:.6,t[e(264)]=void 0!==i.generateUVs&&i[e(264)],t[e(232)]=i[e(232)],t.noiseSeed=i[e(163)],t.onDecideSubrayCreation=i[e(196)],t[e(296)]=i[e(296)],t}update(t){const i=M;this[i(247)]||(this[i(259)][i(263)]||this[i(259)][i(302)]<=t&&t<=this[i(259)].deathTime?(this[i(250)](t),t<this.subrays[0][i(285)]?this[i(186)]=T.RAY_PROPAGATING:t>this[i(308)][0][i(282)]?this[i(186)]=T[i(234)]:this.state=T.RAY_STEADY,this[i(169)]=!0):(this[i(169)]=!1,t<this.rayParameters[i(302)]?this[i(186)]=T[i(289)]:this[i(186)]=T[i(224)]))}init(t){const i=M;this[i(259)]=t,this[i(195)]=void 0!==t[i(195)]?Math.floor(t[i(195)]):9,t[i(195)]=this[i(195)],this[i(247)]=void 0!==t[i(247)]&&t[i(247)],t[i(247)]=this[i(247)],this[i(314)]=void 0!==t[i(314)]?Math[i(255)](t[i(314)]):5,t[i(314)]=this[i(314)],this.maxSubrayRecursion=void 0!==t[i(178)]?Math.floor(t[i(178)]):3,t.maxSubrayRecursion=this[i(178)],this[i(246)]=void 0!==t[i(246)]?t.recursionProbability:.6,t[i(246)]=this[i(246)],this[i(264)]=void 0!==t[i(264)]&&t[i(264)],t.generateUVs=this.generateUVs,void 0!==t[i(232)]?(this[i(232)]=t.randomGenerator,this[i(273)]=t.randomGenerator,void 0!==t[i(163)]&&this[i(273)][i(303)](t.noiseSeed)):(this[i(232)]=T[i(312)](),this.seedGenerator=Math),void 0!==t[i(196)]?this.onDecideSubrayCreation=t[i(196)]:(this[i(221)](),void 0!==t[i(296)]&&(this[i(296)]=t[i(296)])),this[i(186)]=T.RAY_INITIALIZED,this[i(275)]=Math.ceil(1+Math[i(298)](this[i(314)],Math[i(202)](0,this.maxSubrayRecursion-1))),t[i(275)]=this[i(275)],this[i(215)]=2*(1<<this[i(195)]),this[i(308)]=[];for(let s=0;s<this.maxSubrays;s++)this.subrays[i(180)](this[i(270)]());this.raySegments=[];for(let s=0;s<this.maxRaySegments;s++)this[i(220)][i(180)](this.createSegment());this[i(278)]=0,this[i(187)]=0,this[i(323)]=null,this[i(167)]=this.generateUVs?this[i(208)]:this.createTriangleVerticesWithoutUVs,this[i(245)]=0,this[i(191)]=null,this[i(210)]=0,this[i(286)]=!1,this.subrayProbability=0,this[i(318)]=0,this[i(223)]=0,this.currentCoordinate=0,this[i(155)]=0,this.vertices=null,this[i(201)]=null,this[i(293)]=null,this[i(218)]=null,this[i(260)]=null,this.simplexX=m(this[i(273)][i(311)]),this[i(176)]=m(this[i(273)][i(311)]),this[i(183)]=m(this.seedGenerator[i(311)]),this[i(257)]=new s,this[i(209)]=new s,this[i(200)]=new s,this.down=new s,this[i(174)]=new s,this[i(184)]=new s,this[i(319)]=new s,this[i(233)]=new s,this[i(288)]=new s}[M(294)](){const t=M,i=1<<this[t(195)],s=3*(i+1)*this[t(275)],o=18*i*this[t(275)];this[t(205)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(264)]&&(this[t(201)]=new Float32Array(2*s)),this[t(237)](0),this.setIndex(new e(this[t(293)],1)),this[t(218)]=new n(this[t(205)],3),this[t(164)](t(228),this[t(218)]),this[t(264)]&&(this[t(260)]=new n(new Float32Array(this.uvs),2),this.setAttribute("uv",this[t(260)])),!this[t(247)]&&(this[t(238)][t(320)]=r,this[t(218)][t(320)]=r,this.generateUVs&&(this.uvsAttribute[t(320)]=r)),this[t(205)]=this.positionAttribute.array,this[t(293)]=this[t(238)][t(206)],this[t(264)]&&(this[t(201)]=this.uvsAttribute[t(206)])}[M(250)](t){const i=M;this[i(237)](t),this[i(277)][i(197)]=this[i(223)],this[i(238)][i(204)]=!0,this[i(218)].needsUpdate=!0,this.generateUVs&&(this[i(260)][i(204)]=!0)}fillMesh(t){const i=M,s=this;this.currentVertex=0,this[i(223)]=0,this[i(306)]=0,this[i(155)]=0,this[i(315)](t,(function(e){const n=i,r=s[n(191)];t<r[n(302)]||(this[n(259)].isEternal&&0==s[n(191)].recursion?(s.createPrism(e),s[n(196)](e,s)):t<r[n(285)]?s[n(187)]>=e.fraction0*r.propagationTimeFactor&&(s[n(182)](e),s[n(196)](e,s)):t<r[n(282)]?(s.createPrism(e),s[n(196)](e,s)):(s[n(187)]<=r[n(274)]+e[n(153)]*(1-r[n(274)])&&s[n(182)](e),s[n(196)](e,s)))}))}[M(295)](){return this.subrays[this.numSubrays++]}[M(266)](t,i){const s=M;t.pos0[s(236)](i.sourceOffset),t[s(173)][s(236)](i[s(300)]),t[s(271)][s(236)](i.up0),t.up1[s(236)](i[s(150)]),t[s(217)]=i[s(217)],t[s(280)]=i[s(280)],t[s(302)]=i[s(302)],t[s(156)]=i[s(156)],t[s(159)]=i[s(159)],t[s(172)]=i[s(172)],t[s(161)]=i[s(161)],t[s(292)]=i[s(292)],t[s(274)]=i[s(274)],t.maxIterations=this[s(195)],t[s(192)]=void 0!==i[s(163)]?i[s(163)]:0,t[s(316)]=0}[M(315)](t,i){const s=M;this[s(278)]=t,this[s(323)]=i,this[s(245)]=0,this[s(266)](this[s(295)](),this[s(259)]);for(let e=0;e<this[s(245)];e++){const i=this[s(308)][e];this[s(191)]=i,this[s(232)].setSeed(i[s(192)]),i[s(285)]=o.lerp(i.birthTime,i[s(156)],i[s(292)]),i[s(282)]=o[s(313)](i[s(156)],i[s(302)],1-i[s(274)]);const n=this[s(232)].random;i.linPos0[s(304)](n(),n(),n())[s(177)](1e3),i.linPos1[s(304)](n(),n(),n())[s(177)](1e3),this[s(187)]=(t-i.birthTime)/(i[s(156)]-i[s(302)]),this.currentSegmentIndex=0,this[s(286)]=!0;const r=this.getNewSegment();r[s(216)]=0,r.pos0[s(236)](i[s(165)]),r[s(173)].copy(i[s(173)]),r[s(287)][s(236)](i.linPos0),r[s(267)][s(236)](i[s(267)]),r.up0.copy(i[s(271)]),r.up1.copy(i.up1),r[s(217)]=i.radius0,r[s(280)]=i[s(280)],r[s(241)]=0,r[s(153)]=1,r[s(230)]=1-i[s(161)],this[s(175)]=this[s(314)]*Math[s(298)](this.recursionProbability,i[s(316)])/(1<<i[s(195)]),this.fractalRayRecursive(r)}this[s(323)]=null,this[s(191)]=null}[M(281)](t){const i=M;if(t[i(216)]>=this[i(191)][i(195)])return void this.currentSegmentCallback(t);this.forwards[i(276)](t[i(173)],t[i(165)]);let s=this[i(257)][i(254)]();s<1e-6&&(this.forwards[i(304)](0,0,.01),s=this[i(257)][i(254)]());const e=.5*(t[i(217)]+t[i(280)]),n=.5*(t[i(241)]+t[i(153)]),r=this.time*this[i(191)][i(159)]*Math[i(298)](2,t[i(216)]);this[i(174)][i(244)](t[i(165)],t[i(173)],.5),this[i(184)][i(244)](t.linPos0,t.linPos1,.5);const o=this[i(184)];this[i(319)][i(304)](this[i(151)](o.x,o.y,o.z,r),this[i(176)](o.x,o.y,o.z,r),this[i(183)](o.x,o.y,o.z,r)),this.newPos[i(177)](t[i(230)]*s),this[i(319)].add(this.middlePos);const a=this.getNewSegment();a[i(165)][i(236)](t[i(165)]),a.pos1[i(236)](this.newPos),a[i(287)][i(236)](t[i(287)]),a[i(267)].copy(this[i(184)]),a[i(271)].copy(t.up0),a[i(150)].copy(t[i(150)]),a[i(217)]=t[i(217)],a[i(280)]=e,a[i(241)]=t[i(241)],a[i(153)]=n,a[i(230)]=t[i(230)]*this[i(191)][i(172)],a.iteration=t[i(216)]+1;const h=this.getNewSegment();h[i(165)][i(236)](this[i(319)]),h[i(173)].copy(t[i(173)]),h[i(287)][i(236)](this[i(184)]),h.linPos1[i(236)](t[i(267)]),this[i(288)][i(160)](t[i(271)],this[i(257)][i(322)]()),h[i(271)][i(160)](this[i(257)],this[i(288)]).normalize(),h.up1[i(236)](t.up1),h.radius0=e,h.radius1=t[i(280)],h[i(241)]=n,h[i(153)]=t[i(153)],h[i(230)]=t.positionVariationFactor*this[i(191)][i(172)],h[i(216)]=t[i(216)]+1,this.fractalRayRecursive(a),this[i(281)](h)}[M(182)](t){const i=M;this[i(209)][i(276)](t[i(173)],t[i(165)])[i(322)](),this[i(286)]&&(this[i(167)](t[i(165)],t[i(271)],this[i(209)],t[i(217)],0),this.isInitialSegment=!1),this[i(167)](t[i(173)],t[i(271)],this[i(209)],t[i(280)],t.fraction1),this[i(258)]()}createTriangleVerticesWithoutUVs(t,i,s,e){const n=M;this[n(200)][n(160)](i,s).multiplyScalar(e*T.COS30DEG),this[n(284)][n(236)](i)[n(177)](-e*T[n(189)]);const r=this.vPos,o=this[n(205)];r[n(236)](t).sub(this[n(200)])[n(265)](this[n(284)]),o[this[n(306)]++]=r.x,o[this[n(306)]++]=r.y,o[this[n(306)]++]=r.z,r[n(236)](t)[n(265)](this[n(200)])[n(265)](this[n(284)]),o[this[n(306)]++]=r.x,o[this[n(306)]++]=r.y,o[this[n(306)]++]=r.z,r[n(236)](i)[n(177)](e)[n(265)](t),o[this[n(306)]++]=r.x,o[this[n(306)]++]=r.y,o[this[n(306)]++]=r.z,this[n(318)]+=3}[M(208)](t,i,s,e,n){const r=M;this[r(200)][r(160)](i,s)[r(177)](e*T[r(240)]),this[r(284)][r(236)](i)[r(177)](-e*T[r(189)]);const o=this[r(233)],a=this[r(205)],h=this[r(201)];o.copy(t)[r(290)](this.side).add(this.down),a[this[r(306)]++]=o.x,a[this[r(306)]++]=o.y,a[this[r(306)]++]=o.z,h[this[r(155)]++]=n,h[this[r(155)]++]=0,o[r(236)](t)[r(265)](this[r(200)]).add(this[r(284)]),a[this[r(306)]++]=o.x,a[this[r(306)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=n,h[this[r(155)]++]=.5,o[r(236)](i)[r(177)](e)[r(265)](t),a[this[r(306)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(306)]++]=o.z,h[this[r(155)]++]=n,h[this[r(155)]++]=1,this.currentVertex+=3}createPrismFaces(t){const i=M,s=this[i(293)];t=this.currentVertex-6,s[this.currentIndex++]=t+1,s[this[i(223)]++]=t+2,s[this[i(223)]++]=t+5,s[this[i(223)]++]=t+1,s[this[i(223)]++]=t+5,s[this[i(223)]++]=t+4,s[this[i(223)]++]=t+0,s[this[i(223)]++]=t+1,s[this[i(223)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(223)]++]=t+4,s[this[i(223)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+0,s[this[i(223)]++]=t+3,s[this[i(223)]++]=t+2,s[this[i(223)]++]=t+3,s[this[i(223)]++]=t+5}[M(221)](){const t=M,i=this[t(232)][t(311)];this[t(196)]=function(s,e){const n=t,r=e[n(191)],a=e[n(259)][n(239)],h=e[n(259)][n(235)],c=e[n(259)][n(263)]&&0==r[n(316)]?-i()*a:o[n(313)](r[n(302)],r[n(285)],s.fraction0)-i()*a,u=e[n(278)]-c,l=Math[n(255)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=e.subrayProbability),r.recursion<e.maxSubrayRecursion&&e[n(245)]<e[n(275)]&&i()<d){const t=e[n(295)](),o=e[n(232)].getSeed();t[n(192)]=p,e[n(232)][n(303)](p),t[n(316)]=r[n(316)]+1,t.maxIterations=Math[n(202)](1,r[n(195)]-1),t[n(287)][n(304)](i(),i(),i()).multiplyScalar(1e3),t[n(267)].set(i(),i(),i())[n(177)](1e3),t[n(271)][n(236)](r[n(271)]),t[n(150)].copy(r.up1),t[n(217)]=s[n(217)]*e.rayParameters[n(152)],t.radius1=Math[n(212)](e[n(259)][n(251)],s[n(280)]*e[n(259)][n(309)]),t.birthTime=c+l*a,t[n(156)]=t[n(302)]+a*h,!e[n(259)][n(263)]&&0==r.recursion&&(t[n(302)]=Math[n(202)](t[n(302)],r.birthTime),t[n(156)]=Math[n(212)](t[n(156)],r[n(156)])),t[n(159)]=2*r[n(159)],t[n(172)]=r[n(172)],t[n(161)]=r[n(161)],t.propagationTimeFactor=r[n(292)],t[n(274)]=r[n(274)],e[n(296)](s,r,t,e),e.randomGenerator[n(303)](o)}};const e=new s,n=new s,r=new s,a=new s;this[t(296)]=function(i,s,e,n){n[t(179)](i,s,e,.5,.6,.2)},this[t(162)]=function(s,o,h,c,u,l){const p=t;h[p(165)][p(236)](s[p(165)]),e.subVectors(o[p(173)],o.pos0),n[p(236)](e).normalize(),e.multiplyScalar(s[p(241)]+(1-s[p(241)])*(i()*c));const d=e[p(254)]();r[p(160)](o[p(271)],n);const m=2*Math.PI*i();r.multiplyScalar(Math[p(261)](m)),a[p(236)](o[p(271)]).multiplyScalar(Math.sin(m)),h[p(173)][p(236)](r)[p(265)](a)[p(177)](d*u*(l+i()*(1-l)))[p(265)](e).add(o[p(165)])},this[t(179)]=function(s,o,h,c,u,l){const p=t;h[p(165)][p(236)](s[p(165)]),e[p(276)](o[p(173)],o.pos0),n[p(236)](e).normalize(),e[p(177)](s[p(241)]+(1-s[p(241)])*((2*i()-1)*c));const d=e[p(254)]();r.crossVectors(o[p(271)],n);const m=2*Math.PI*i();r[p(177)](Math[p(261)](m)),a[p(236)](o[p(271)])[p(177)](Math[p(272)](m)),h.pos1.copy(r).add(a).multiplyScalar(d*u*(l+i()*(1-l)))[p(265)](e)[p(265)](o[p(165)])}}[M(270)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(317)](){const t=M;return this[t(220)][this[t(210)]++]}copy(t){const i=M;return super[i(236)](t),this.init(T[i(242)]({},t.rayParameters)),this}[M(181)](){const t=M;return new(this[t(170)])(T[t(242)]({},this.rayParameters))}}function V(t,i){const s=j();return(V=function(t,i){return s[t-=150]})(t,i)}function j(){const t=["timeScale","crossVectors","straightness","subrayConePosition","noiseSeed","setAttribute","pos0","RAY_INITIALIZED","currentCreateTriangleVertices","stateObject","visible","constructor","227ANMhpn","roughness","pos1","middlePos","subrayProbability","simplexY","multiplyScalar","maxSubrayRecursion","subrayCylinderPosition","push","clone","createPrism","simplexZ","middleLinPos","312Hhaigu","state","timeFraction","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","SIN30DEG","string","currentSubray","seed","isLightningStrike","call","maxIterations","onDecideSubrayCreation","count","1760268bXtnBM","3495010uNyjUU","side","uvs","max","bind","needsUpdate","vertices","array","init","createTriangleVerticesWithUVs","forwardsFill","currentSegmentIndex","6YgFwdr","min","2910549woHsrV","currentSeed","maxRaySegments","iteration","radius0","positionAttribute","RAY_STEADY","raySegments","createDefaultSubrayCreationCallbacks","45BbXThY","currentIndex","RAY_EXTINGUISHED","apply",'{}.constructor("return this")( )',"table","position","__proto__","positionVariationFactor","sourceOffset","randomGenerator","vPos","RAY_VANISHING","subrayDutyCycle","copy","fillMesh","index","subrayPeriod","COS30DEG","fraction0","copyParameters","trace","lerpVectors","numSubrays","recursionProbability","isStatic","exception","4wqkzDU","updateMesh","minRadius","error","while (true) {}","length","floor","test","forwards","createPrismFaces","rayParameters","uvsAttribute","cos","RAY_PROPAGATING","isEternal","generateUVs","add","initSubray","linPos1","77MCUSiv","4058uIEmQv","createSubray","up0","sin","seedGenerator","vanishingTimeFactor","maxSubrays","subVectors","drawRange","time","counter","radius1","fractalRayRecursive","beginVanishingTime","gger","down","endPropagationTime","isInitialSegment","linPos0","cross1","RAY_UNBORN","sub","26ngurKt","propagationTimeFactor","indices","createMesh","addNewSubray","onSubrayCreation","chain","pow","warn","destOffset","info","birthTime","setSeed","set","debu","currentCoordinate","344624TbhSvT","subrays","radius1Factor","LightningStrike","random","createRandomGenerator","lerp","ramification","fractalRay","recursion","getNewSegment","currentVertex","newPos","usage","prototype","normalize","currentSegmentCallback","up1","simplexX","radius0Factor","fraction1","console","currentUVCoordinate","deathTime","1294290rioJlS","26996732rczvNX"];return(j=function(){return t})()}function z(t){function i(t){const s=V;if(typeof t===s(190))return function(t){}[s(170)](s(253))[s(225)](s(279));1!==(""+t/t)[s(254)]||t%20==0?function(){return!0}[s(170)](s(305)+s(283))[s(194)]("action"):function(){return!1}[s(170)]("debu"+s(283)).apply(s(168)),i(++t)}try{if(t)return i;i(0)}catch(s){}}T[M(166)]=0,T[M(289)]=1,T[M(262)]=2,T[M(219)]=3,T[M(234)]=4,T.RAY_EXTINGUISHED=5,T[M(240)]=Math[M(261)](30*Math.PI/180),T[M(189)]=Math[M(272)](30*Math.PI/180);const F=H;!function(t,i){const s=H,e=D();for(;;)try{if(343648===parseInt(s(570))/1*(-parseInt(s(560))/2)+parseInt(s(561))/3*(parseInt(s(531))/4)+parseInt(s(552))/5+parseInt(s(522))/6*(parseInt(s(529))/7)+parseInt(s(513))/8+-parseInt(s(502))/9*(-parseInt(s(527))/10)+-parseInt(s(496))/11)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const C=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function D(){const t=["842330NekLUe","test","error","info","onLightningDown","copyParameters","lightningParameters","onRayPosition","34024WsnuWa","93fwTfAh","function *\\( *\\)","sourceOffset","debu","random","lightningMinDuration","chain","RAY_PROPAGATING",'{}.constructor("return this")( )',"5meQdBQ","return (function() ","console","stateObject","13899204YgqrhI","warn","isLightningStorm","geometry","call","bind","639qSrwTM","init","set","destOffset","update","minHeight","constructor","rayParameters","copy","lightningMaterial","lightningsMeshes","4204728ShyOht","lightningMaxDuration","lightningMinPeriod","deadLightningsMeshes","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stormParams","getNextLightningTime","table","add","434406NNSPqi","state","splice","inited","size","65890XpXycJ","maxHeight","21APWSNI","lerp","40412tGJWxv","nextLightningTime","pop","toString","maxLightnings","multiplyScalar","clone","gger","length","action","__proto__","push","maxSlope","remove","input","while (true) {}","prototype","lightningMaxPeriod","counter","apply","exception"];return(D=function(){return t})()}!function(){C(this,(function(){const t=H,i=new RegExp(t(562)),s=new RegExp(t(517),"i"),e=U(t(503));i[t(553)](e+t(567))&&s[t(553)](e+t(545))?U():e("0")}))()}();const E=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function H(t,i){const s=D();return(H=function(t,i){return s[t-=493]})(t,i)}E(void 0,(function(){const t=H;let i;try{i=Function(t(493)+t(569)+");")()}catch(n){i=window}const s=i[t(494)]=i[t(494)]||{},e=["log",t(497),t(555),t(554),t(551),t(520),"trace"];for(let r=0;r<e.length;r++){const i=E[t(508)][t(547)][t(501)](E),n=e[r],o=s[n]||i;i[t(541)]=E.bind(E),i[t(534)]=o[t(534)][t(501)](o),s[n]=i}}))();class N extends a{constructor(t={}){const i=H;super(),this[i(498)]=!0,this[i(518)]=t,t[i(526)]=void 0!==t[i(526)]?t[i(526)]:1e3,t[i(507)]=void 0!==t[i(507)]?t[i(507)]:80,t[i(528)]=void 0!==t[i(528)]?t[i(528)]:100,t[i(543)]=void 0!==t[i(543)]?t[i(543)]:1.1,t[i(535)]=void 0!==t[i(535)]?t[i(535)]:3,t.lightningMinPeriod=void 0!==t[i(515)]?t[i(515)]:3,t[i(548)]=void 0!==t[i(548)]?t[i(548)]:7,t[i(566)]=void 0!==t[i(566)]?t[i(566)]:1,t[i(514)]=void 0!==t[i(514)]?t[i(514)]:2.5,this.lightningParameters=T[i(557)](t[i(558)],t[i(558)]),this.lightningParameters.isEternal=!1,this[i(511)]=void 0!==t[i(511)]?t[i(511)]:new h({color:11599871}),void 0!==t[i(559)]?this[i(559)]=t.onRayPosition:this[i(559)]=function(s,e){const n=i;e[n(504)]((Math.random()-.5)*t.size,0,(Math[n(565)]()-.5)*t[n(526)]);const r=o[n(530)](t[n(507)],t.maxHeight,Math[n(565)]());s.set(t[n(543)]*(2*Math[n(565)]()-1),1,t[n(543)]*(2*Math[n(565)]()-1))[n(536)](r).add(e)},this[i(556)]=t[i(556)],this[i(525)]=!1,this[i(532)]=0,this.lightningsMeshes=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(518)][i(535)];s++){const t=new T(T[i(557)]({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this[i(516)][i(542)](s)}}update(t){const i=H;if(!this[i(525)]&&(this[i(532)]=this[i(519)](t)*Math[i(565)](),this[i(525)]=!0),t>=this[i(532)]){const s=this[i(516)][i(533)]();if(s){const e=T[i(557)](s[i(499)][i(509)],this[i(558)]);e.birthTime=t,e.deathTime=t+o[i(530)](this[i(518)][i(566)],this.stormParams.lightningMaxDuration,Math[i(565)]()),this[i(559)](e[i(563)],e[i(505)]),e.noiseSeed=Math.random(),this[i(521)](s),this[i(512)][i(542)](s)}this[i(532)]=this.getNextLightningTime(t)}let s=0,e=this[i(512)][i(539)];for(;s<e;){const n=this[i(512)][s],r=n.geometry,o=r[i(523)];r[i(506)](t),o===T[i(568)]&&r[i(523)]>o&&this[i(556)]&&this[i(556)](r),r.state===T.RAY_EXTINGUISHED?(this[i(512)][i(524)](this[i(512)].indexOf(n),1),this[i(516)].push(n),this[i(544)](n),e--):s++}}[F(519)](t){const i=F;return t+o[i(530)](this.stormParams[i(515)],this[i(518)][i(548)],Math[i(565)]())/(this[i(518)].maxLightnings+1)}[F(510)](t,i){const s=F;return super[s(510)](t,i),this[s(518)].size=t[s(518)].size,this.stormParams[s(507)]=t[s(518)].minHeight,this.stormParams[s(528)]=t[s(518)].maxHeight,this[s(518)][s(543)]=t[s(518)][s(543)],this[s(518)][s(535)]=t.stormParams[s(535)],this.stormParams[s(515)]=t.stormParams[s(515)],this[s(518)][s(548)]=t[s(518)][s(548)],this[s(518)][s(566)]=t[s(518)][s(566)],this[s(518)].lightningMaxDuration=t[s(518)][s(514)],this[s(558)]=T.copyParameters({},t[s(558)]),this[s(511)]=t[s(518)][s(511)],this[s(556)]=t[s(556)],this}[F(537)](){const t=F;return new(this[t(508)])(this.stormParams)[t(510)](this)}}function U(t){function i(t){const s=H;if("string"==typeof t)return function(t){}[s(508)](s(546))[s(550)](s(549));1!==(""+t/t)[s(539)]||t%20==0?function(){return!0}[s(508)](s(564)+"gger")[s(500)](s(540)):function(){return!1}[s(508)](s(564)+s(538))[s(550)](s(495)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const G=k;!function(t,i){const s=k,e=B();for(;;)try{if(695866===parseInt(s(432))/1+parseInt(s(407))/2*(-parseInt(s(411))/3)+-parseInt(s(405))/4+parseInt(s(409))/5+-parseInt(s(434))/6*(-parseInt(s(389))/7)+parseInt(s(416))/8*(parseInt(s(402))/9)+-parseInt(s(424))/10*(parseInt(s(395))/11))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const L=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[k(423)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){L(this,(function(){const t=k,i=new RegExp(t(446)),s=new RegExp(t(397),"i"),e=X(t(396));i[t(403)](e+"chain")&&s[t(403)](e+t(417))?X():e("0")}))()}();const O=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[k(423)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function k(t,i){const s=B();return(k=function(t,i){return s[t-=388]})(t,i)}O(void 0,(function(){const t=k;let i;try{i=Function("return (function() "+t(433)+");")()}catch(n){i=window}const s=i[t(426)]=i.console||{},e=[t(436),t(448),t(428),"error","exception",t(399),t(444)];for(let r=0;r<e[t(410)];r++){const i=O[t(406)][t(394)][t(413)](O),n=e[r],o=s[n]||i;i[t(439)]=O[t(413)](O),i.toString=o[t(430)][t(413)](o),s[n]=i}}))();const Y=[G(412)],Z=f({__name:G(440),props:{color:{default:G(422)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=G,s=t,e=new(u[i(388)])(s.color),n=new(u[i(438)])({color:e}),r=new(u[i(404)])(0,-1,0);let o=0;const a=new(u[i(404)]),h=new(u[i(404)]),c={roughness:s[i(437)],straightness:s[i(443)],radius0:s[i(408)],radius1:s[i(414)],timeScale:s[i(441)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,e,n){const c=i;n[c(450)](t,s,e,.6,.6,.5),o=n.rayParameters.sourceOffset.y,a[c(449)](e.pos1,n.rayParameters[c(415)]);const u=r.dot(a);h.copy(r)[c(421)](u),a[c(392)](h);const l=u/o>.5?o/u:1;h[c(421)](l),a.add(h),e[c(447)][c(393)](a,n[c(400)].sourceOffset)}},p=new N({size:s[i(391)],minHeight:s[i(435)],maxHeight:s[i(419)],maxSlope:.6,maxLightnings:s[i(445)],lightningParameters:c,lightningMaterial:n});g((()=>{const t=i,e=p[t(429)];e[t(391)]=s[t(391)],e.minHeight=s[t(435)],e.maxHeight=s.maxHeight,n[t(442)][t(427)](s.color),c[t(437)]=s[t(437)],c[t(443)]=s[t(443)],c[t(408)]=s[t(408)],c[t(414)]=s[t(414)],c.timeScale=s[t(441)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{p[i(418)](t)})),(t,s)=>{const e=i;return y(),b(e(451),{object:S(p),renderOrder:9999},null,8,Y)}}});function X(t){function i(t){const s=k;if("string"==typeof t)return function(t){}[s(406)](s(431))[s(423)]("counter");1!==(""+t/t)[s(410)]||t%20==0?function(){return!0}[s(406)](s(390)+s(398))[s(425)](s(401)):function(){return!1}[s(406)]("debu"+s(398)).apply(s(420)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function B(){const t=["function *\\( *\\)","pos1","warn","subVectors","subrayConePosition","primitive","Color","15981AYcDeq","debu","size","sub","addVectors","prototype","206481AQVDyN","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","table","rayParameters","action","81oRaesk","test","Vector3","1261988wLktJq","constructor","30QZJpIO","radius0","4013090TXkgBU","length","270591VUZIwB","object","bind","radius1","sourceOffset","218408hMLzyB","input","update","maxHeight","stateObject","multiplyScalar","#b0ffff","apply","640gOLGyN","call","console","set","info","stormParams","toString","while (true) {}","1384967ZoesfG",'{}.constructor("return this")( )',"2976fffJOE","minHeight","log","roughness","MeshBasicMaterial","__proto__","lightStorm","timeScale","color","straightness","trace","maxLightnings"];return(B=function(){return t})()}const $=K;!function(t,i){const s=K,e=Q();for(;;)try{if(626519===parseInt(s(307))/1+-parseInt(s(293))/2+parseInt(s(317))/3*(-parseInt(s(270))/4)+parseInt(s(321))/5+parseInt(s(285))/6+-parseInt(s(315))/7+-parseInt(s(306))/8*(-parseInt(s(281))/9))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const q=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[K(279)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){q(this,(function(){const t=K,i=new RegExp(t(320)),s=new RegExp(t(299),"i"),e=tt(t(298));i[t(291)](e+t(278))&&s[t(291)](e+t(273))?tt():e("0")}))()}();const J=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[K(279)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function Q(){const t=["info","console","时间缩放","chain","apply","debu","2335779BXEedn","__proto__","log",'{}.constructor("return this")( )',"5099088BIjACJ","#6f6f6f","radius1","toString","minHeight","exception","test","constructor","2257642wMPYmL","table","error","string","length","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","maxHeight","action","timeScale","prototype","counter","24VqxwEi","230403EbUpVc","#92399e","gger","call","直度度","roughness","stateObject","radius0","2910145sRlRiL","while (true) {}","792399iAVkPK","未部半径","bind","function *\\( *\\)","2881820JFPqQZ","lightningStorm","4LAwbho","return (function() ","color","input","trace"];return(Q=function(){return t})()}J(void 0,(function(){const t=K;let i;try{i=Function(t(271)+t(284)+");")()}catch(n){i=window}const s=i[t(276)]=i.console||{},e=[t(283),"warn",t(275),t(295),t(290),t(294),t(274)];for(let r=0;r<e[t(297)];r++){const i=J[t(292)][t(304)][t(319)](J),n=e[r],o=s[n]||i;i[t(282)]=J.bind(J),i.toString=o[t(288)][t(319)](o),s[n]=i}}))();const W=f({__name:$(322),setup(i){const s=$,e=w({cellSize:60,cellThickness:1,cellColor:s(286),sectionColor:s(308),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:n,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(311),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(318),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(277),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:x((()=>[v(Z,{minHeight:S(n)[m(300)],maxHeight:S(r)[m(300)],color:S(o)[m(300)],roughness:S(a)[m(300)],straightness:S(h).value,radius0:S(c)[m(300)],radius1:S(u)[m(300)],timeScale:S(l)[m(300)]},null,8,[m(289),m(301),m(272),m(312),"straightness",m(314),m(287),m(303)]),v(S(_),P({args:[100,100]},e,{position:[0,-50,0]}),null,16)])),_:1}),v(S(d))],64)}}});function K(t,i){const s=Q();return(K=function(t,i){return s[t-=270]})(t,i)}function tt(t){function i(t){const s=K;if(typeof t===s(296))return function(t){}[s(292)](s(316)).apply(s(305));1!==(""+t/t)[s(297)]||t%20==0?function(){return!0}[s(292)](s(280)+s(309))[s(310)](s(302)):function(){return!1}[s(292)](s(280)+s(309))[s(279)](s(313)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{W as default};

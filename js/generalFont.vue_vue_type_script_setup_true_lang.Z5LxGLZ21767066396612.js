import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{h as t}from"./utils.B6-cRvlT1767066396612.js";import{i as a,A as s,O as l,F as o,_ as r,Z as n,U as i}from"./@tresjs.B1f7s3pS1767066396612.js";import{i as u}from"./Resource.BqPJptsT1767066396612.js";import{_ as d}from"./@fesjs.BK66sTPr1767066396612.js";import"./default.vue_vue_type_script_setup_true_lang.VHSeCGYE1767066396612.js";import"./three-mesh-ui.module.dA3oDDhS1767066396612.js";import"./domPanel.vue_vue_type_style_index_0_lang.D11M9pLL1767066396612.js";import{L as c,a as m,b as p,ae as v,aw as h}from"./three.BD1hRFgo1767066396612.js";import{s as f,v as g,u as y}from"./@vueuse.BLRGmGj21767066396612.js";import{k as w}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.DS9PWjZT1767066396612.js";import"./index.vue_vue_type_script_setup_true_lang.iYOGhvYh1767066396612.js";const{withAsyncContext:b,defineComponent:k}=await e("vue"),{unref:x,createElementVNode:_,openBlock:N,createElementBlock:S,createCommentVNode:C,toDisplayString:B,createTextVNode:T,Fragment:M}=await e("vue"),P={key:0,class:"absolute bg-grey-600 t-0 l-0 w-full h-full z-99999999 flex justify-center items-center text-black font-mono bg-black"},F={class:"text-white flex flex-items-center float-left huruji-loader"},E={key:0,class:"loader13"},z={key:2,class:"loader5"},A={key:3,class:"loader6"},V={key:4,class:"loader7"},R={key:5,class:"loader8"},j={key:6,class:"loader38"},D={key:7,class:"loader33"},L={key:8,class:"loader22"},I=d(k({__name:"huruji",props:{styleNum:{default:0},isDemo:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},useResourceManager:{type:Boolean,default:!1}},async setup(e){let s,l;const o=e;let r=null,n=null;if(o.useResourceManager)t("resourceManager","资源管理器插件")&&(r=u.progress,n=u.hasAllFinished);else{const e=([s,l]=b(()=>a()),s=await s,l(),s);r=e.progress,n=e.hasFinishLoading}const i=()=>{r.value++>100&&(r.value=0),requestAnimationFrame(i)};return o.isDemo&&requestAnimationFrame(i),(e,t)=>x(n)?C("",!0):(N(),S("div",P,[_("div",F,[4===o.styleNum?(N(),S("div",E,[...t[0]||(t[0]=[_("div",{class:"loader-13"},[_("div"),_("div"),_("div"),_("div"),_("div")],-1)])])):C("",!0),e.showProgress?(N(),S(M,{key:1},[T("载入中... "+B(x(r))+" %",1)],64)):C("",!0),0===o.styleNum?(N(),S("div",z,[...t[1]||(t[1]=[_("div",{class:"loader-five"},[_("div"),_("div"),_("div")],-1)])])):1===o.styleNum?(N(),S("div",A,[...t[2]||(t[2]=[_("div",{class:"loader-six"},[_("div"),_("div"),_("div")],-1)])])):2===o.styleNum?(N(),S("div",V,[...t[3]||(t[3]=[_("div",{class:"loader-seven"},[_("div"),_("div"),_("div"),_("div"),_("div"),_("div")],-1)])])):3===o.styleNum?(N(),S("div",R,[...t[4]||(t[4]=[_("div",{class:"loader-eight"},[_("div"),_("div"),_("div"),_("div"),_("div"),_("div"),_("div"),_("div")],-1)])])):5===o.styleNum?(N(),S("div",j,[...t[5]||(t[5]=[_("div",{class:"loader-38"},[_("div")],-1)])])):6===o.styleNum?(N(),S("div",D,[...t[6]||(t[6]=[_("div",{class:"loader-33"},[_("div")],-1)])])):7===o.styleNum?(N(),S("div",L,[...t[7]||(t[7]=[_("div",{class:"loader-22"},[_("div"),_("div"),_("div"),_("div"),_("div")],-1)])])):C("",!0)])]))}}),[["__scopeId","data-v-abce3ed1"]]),{withAsyncContext:q,defineComponent:G}=await e("vue"),{unref:W,openBlock:$,createElementBlock:U,createCommentVNode:O,toDisplayString:H,createTextVNode:X,Fragment:Y,createElementVNode:Z}=await e("vue"),Q={key:0,class:"absolute bg-grey-600 t-0 l-0 w-full h-full z-99999999 flex justify-center items-center text-black font-mono bg-black"},J={class:"text-center text-white"},K={key:0,class:"loader1"},ee={key:1,class:"loader2"},te={key:2,class:"loader3"},ae={key:3,class:"loader4"},se={key:4,class:"loader5"},le={key:5,class:"loader6"},oe={key:6,class:"loader7"},re=d(G({__name:"cssLoaders",props:{styleNum:{default:0},isDemo:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},useResourceManager:{type:Boolean,default:!1}},async setup(e,{expose:s}){let l,o;const r=e;let n=null,i=null;if(r.useResourceManager)t("resourceManager","资源管理器插件")&&(n=u.progress,i=u.hasAllFinished);else{const e=([l,o]=q(()=>a()),l=await l,o(),l);n=e.progress,i=e.hasFinishLoading}const d=()=>{n.value++>100&&(n.value=0),requestAnimationFrame(d)};return r.isDemo&&requestAnimationFrame(d),s({hasFinishLoading:i}),(e,t)=>W(i)?O("",!0):($(),U("div",Q,[Z("div",J,[0===r.styleNum?($(),U("div",K)):1===r.styleNum?($(),U("div",ee)):2===r.styleNum?($(),U("div",te)):3===r.styleNum?($(),U("div",ae)):4===r.styleNum?($(),U("div",se)):5===r.styleNum?($(),U("div",le)):6===r.styleNum?($(),U("div",oe)):O("",!0),e.showProgress?($(),U(Y,{key:7},[X(H(W(n))+" %",1)],64)):O("",!0)])]))}}),[["__scopeId","data-v-8c43498b"]]),{withAsyncContext:ne,defineComponent:ie}=await e("vue"),{unref:ue,createElementVNode:de,renderList:ce,Fragment:me,openBlock:pe,createElementBlock:ve,toDisplayString:he,createCommentVNode:fe}=await e("vue"),ge={key:0,class:"absolute bg-grey-600 t-0 l-0 w-full h-full z-99999999 flex justify-center items-center text-black font-mono bg-black"},ye={class:"text-white"},we={class:"g-container"},be={class:"g-bubbles"},ke={key:0,class:"pspan"},xe=d(ie({__name:"bubbleLoading",props:{isDemo:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},useResourceManager:{type:Boolean,default:!1}},async setup(e){let s,l;const o=e;let r=null,n=null;if(o.useResourceManager)t("resourceManager","资源管理器插件")&&(r=u.progress,n=u.hasAllFinished);else{const e=([s,l]=ne(()=>a()),s=await s,l(),s);r=e.progress,n=e.hasFinishLoading}const i=()=>{r.value++>100&&(r.value=0),requestAnimationFrame(i)};return o.isDemo&&requestAnimationFrame(i),(e,t)=>ue(n)?fe("",!0):(pe(),ve("div",ge,[de("div",ye,[de("div",we,[t[0]||(t[0]=de("div",{class:"g-circle"},null,-1)),de("ul",be,[(pe(),ve(me,null,ce(200,e=>de("li",{key:e,class:"g-bubble"})),64))])]),e.showProgress?(pe(),ve("span",ke,he(ue(r))+" %",1)):fe("",!0)])]))}}),[["__scopeId","data-v-be1a92c5"]]),{withAsyncContext:_e,defineComponent:Ne}=await e("vue"),{unref:Se,createElementVNode:Ce,toDisplayString:Be,openBlock:Te,createElementBlock:Me,createCommentVNode:Pe,vShow:Fe,withDirectives:Ee}=await e("vue"),ze={class:"absolute bg-grey-600 t-0 l-0 w-full h-full z-99999999 flex justify-center items-center text-black font-mono bg-black"},Ae={class:"text-white"},Ve={key:0,class:"pspan"},Re=d(Ne({__name:"vnyoonLoading",props:{isDemo:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},useResourceManager:{type:Boolean,default:!1}},async setup(e){let s,l;const o=e;let r=null,n=null;if(o.useResourceManager)t("resourceManager","资源管理器插件")&&(r=u.progress,n=u.hasAllFinished);else{const e=([s,l]=_e(()=>a()),s=await s,l(),s);r=e.progress,n=e.hasFinishLoading}const i=()=>{r.value++>100&&(r.value=0),requestAnimationFrame(i)};return o.isDemo&&requestAnimationFrame(i),(e,t)=>Ee((Te(),Me("div",ze,[Ce("div",Ae,[t[0]||(t[0]=Ce("div",{class:"loader"},[Ce("span"),Ce("span"),Ce("span"),Ce("span"),Ce("span"),Ce("span"),Ce("span"),Ce("span"),Ce("span")],-1)),e.showProgress?(Te(),Me("span",Ve,Be(Se(r))+" %",1)):Pe("",!0)])],512)),[[Fe,!Se(n)]])}}),[["__scopeId","data-v-129fe00f"]]),{withAsyncContext:je,defineComponent:De}=await e("vue"),{unref:Le,createElementVNode:Ie,renderList:qe,Fragment:Ge,openBlock:We,createElementBlock:$e,toDisplayString:Ue,createCommentVNode:Oe}=await e("vue"),He={key:0,class:"absolute bg-grey-600 t-0 l-0 w-full h-full z-99999999 flex justify-center items-center text-black font-mono bg-black"},Xe={class:"text-white"},Ye={class:"loader"},Ze={viewBox:"0 0 800 600","xml:space":"preserve"},Qe={id:"leaf"},Je={key:0,class:"pspan"},Ke=d(De({__name:"yangyangLoading",props:{isDemo:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},useResourceManager:{type:Boolean,default:!1}},async setup(e){let s,l;const o=e;let r=null,n=null;if(o.useResourceManager)t("resourceManager","资源管理器插件")&&(r=u.progress,n=u.hasAllFinished);else{const e=([s,l]=je(()=>a()),s=await s,l(),s);r=e.progress,n=e.hasFinishLoading}const i=()=>{r.value++>100&&(r.value=0),requestAnimationFrame(i)};return o.isDemo&&requestAnimationFrame(i),(e,t)=>Le(n)?Oe("",!0):(We(),$e("div",He,[Ie("div",Xe,[Ie("div",Ye,[(We(),$e("svg",Ze,[t[0]||(t[0]=Ie("symbol",{id:"single"},[Ie("path",{d:"M357.5,211.693c0,35.741,16.598,67.6,42.5,88.307\n\t\tc25.902-20.707,42.5-52.566,42.5-88.307s-16.598-67.6-42.5-88.307C374.098,144.094,357.5,175.953,357.5,211.693z"})],-1)),Ie("g",Qe,[(We(),$e(Ge,null,qe(36,e=>Ie("use",{class:"flo",key:e,"xlink:href":"#single"})),64))])]))]),e.showProgress?(We(),$e("span",Je,Ue(Le(r))+" %",1)):Oe("",!0)])]))}}),[["__scopeId","data-v-9ed65605"]]),{withAsyncContext:et,defineComponent:tt}=await e("vue"),{unref:at,renderList:st,Fragment:lt,openBlock:ot,createElementBlock:rt,createElementVNode:nt,normalizeStyle:it,toDisplayString:ut,createCommentVNode:dt}=await e("vue"),ct={key:0,class:"absolute bg-grey-600 t-0 l-0 w-full h-full z-99999999 flex justify-center items-center text-black font-mono bg-black"},mt={class:"text-white"},pt={class:"stars flex-wrap"},vt={key:0,class:"pspan"},ht=d(tt({__name:"starLoading",props:{isDemo:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0},useResourceManager:{type:Boolean,default:!1}},async setup(e){let s,l;const o=e;let r=null,n=null;if(o.useResourceManager)t("resourceManager","资源管理器插件")&&(r=u.progress,n=u.hasAllFinished);else{const e=([s,l]=et(()=>a()),s=await s,l(),s);r=e.progress,n=e.hasFinishLoading}const i=()=>{r.value++>100&&(r.value=0),requestAnimationFrame(i)};return o.isDemo&&requestAnimationFrame(i),(e,t)=>at(n)?dt("",!0):(ot(),rt("div",ct,[nt("div",mt,[nt("div",pt,[(ot(),rt(lt,null,st(12,e=>nt("span",{key:e,style:it(`--i: ${e+1}`)},[...t[0]||(t[0]=[nt("i",null,null,-1)])],4)),64))]),e.showProgress?(ot(),rt("span",vt,ut(at(r))+" %",1)):dt("",!0)])]))}}),[["__scopeId","data-v-04a12629"]]),{defineComponent:ft}=await e("vue"),{unref:gt,mergeProps:yt,openBlock:wt,createBlock:bt,createCommentVNode:kt,Suspense:xt,withCtx:_t}=await e("vue"),{reactive:Nt}=await e("vue"),St=ft({__name:"randomLoading",setup(e){const t=Nt({styleNum:0,showProgress:!0});return t.styleNum=Math.floor(24*Math.random()),t.showProgress=Math.random()<.5,console.log(t.styleNum,t.showProgress),(e,a)=>(wt(),bt(xt,null,{default:_t(()=>[t.styleNum<10?(wt(),bt(gt(I),yt({key:0,styleNum:t.styleNum,showProgress:t.showProgress},e.$attrs),null,16,["styleNum","showProgress"])):t.styleNum<20?(wt(),bt(gt(re),yt({key:1,styleNum:t.styleNum-10,showProgress:t.showProgress},e.$attrs),null,16,["styleNum","showProgress"])):20===t.styleNum?(wt(),bt(gt(xe),yt({key:2,showProgress:t.showProgress},e.$attrs),null,16,["showProgress"])):21===t.styleNum?(wt(),bt(gt(Re),yt({key:3,showProgress:t.showProgress},e.$attrs),null,16,["showProgress"])):22===t.styleNum?(wt(),bt(gt(Ke),yt({key:4,showProgress:t.showProgress},e.$attrs),null,16,["showProgress"])):23===t.styleNum?(wt(),bt(gt(ht),yt({key:5,showProgress:t.showProgress},e.$attrs),null,16,["showProgress"])):kt("",!0)]),_:1}))}}),{defineComponent:Ct}=await e("vue"),{unref:Bt,createElementVNode:Tt,openBlock:Mt,createElementBlock:Pt,withCtx:Ft,createVNode:Et}=await e("vue"),zt=["scale","center"],At=["map","blending"],Vt=["rotation"],Rt=["map","blending","side"],{watch:jt,ref:Dt}=await e("vue"),Lt=await e("three"),It=Ct({__name:"bannerLabel",props:{text:{default:"标识"},fontSize:{default:32},fontColor:{default:"#000000"},backgroundColor:{default:"rgba(255,255,255,0.2)"},padding:{default:{y:10,x:20}},align:{default:"left-center"},fontFamily:{default:"sans-serif"},scaleFactor:{default:.01},borderColor:{default:"#000000"},borderWidth:{default:1},borderRadius:{default:2},dpi:{default:2},isSprite:{default:!0}},setup(e){const t={"left-top":[0,1],"left-center":[0,.5],"left-bottom":[0,0],"center-top":[.5,1],center:[.5,.5],"center-bottom":[.5,0],"right-top":[1,1],"right-center":[1,.5],"right-bottom":[1,0]},a=e;let l=null,o=null,r=0,n=0,i=Dt(null);const u=()=>{l=document.createElement("canvas");const e=l.getContext("2d"),t=a.padding.y,s=a.padding.x;e.font=`bold ${a.fontSize}px ${a.fontFamily}`;const o=e.measureText(a.text).width,i=a.fontSize;r=o+2*s+2*a.borderWidth,n=i+2*t+2*a.borderWidth,l.width=r*a.dpi,l.height=n*a.dpi,e.scale(a.dpi,a.dpi),e.clearRect(0,0,l.width,l.height),e.font=`${a.fontSize}px ${a.fontFamily}`,e.textBaseline="top",e.fillStyle=a.backgroundColor,function(e,t,a,s,l,o){e.beginPath(),e.moveTo(t+o,a),e.lineTo(t+s-o,a),e.quadraticCurveTo(t+s,a,t+s,a+o),e.lineTo(t+s,a+l-o),e.quadraticCurveTo(t+s,a+l,t+s-o,a+l),e.lineTo(t+o,a+l),e.quadraticCurveTo(t,a+l,t,a+l-o),e.lineTo(t,a+o),e.quadraticCurveTo(t,a,t+o,a),e.closePath()}(e,a.borderWidth,a.borderWidth,r-2*a.borderWidth,n-2*a.borderWidth,a.borderRadius),e.fill(),a.borderWidth>0&&(e.lineWidth=a.borderWidth,e.strokeStyle=a.borderColor,e.stroke()),e.fillStyle=a.fontColor;let u=a.borderWidth+s,d=a.borderWidth+t;return a.align.includes("center")?u=(r-o)/2:a.align.includes("right")&&(u=r-o-a.borderWidth-s),a.align.includes("middle")||a.align.includes("center")?d=(n-i)/2:a.align.includes("bottom")&&(d=n-i-a.borderWidth-t),e.fillText(a.text,u,d),e},d=e=>{i.value&&i.value.dispose(),i.value=new Lt.CanvasTexture(l),i.value.premultiplyAlpha=!1,i.value.needsUpdate=!0};return o=u(),d(),jt(()=>a,()=>{o&&(o=u(),d())},{deep:!0}),(l,o)=>e.isSprite?(Mt(),Pt("TresSprite",{key:0,scale:[Bt(r)*a.scaleFactor,Bt(n)*a.scaleFactor,1],center:t[e.align]||[.5,.5]},[Tt("TresSpriteMaterial",{map:Bt(i),transparent:"",depthTest:"",blending:Lt.NormalBlending,alphaTest:.06},null,8,At)],8,zt)):(Mt(),Pt("TresGroup",{key:1,rotation:[Math.PI/2,0,0]},[Et(Bt(s),{args:[Bt(r)*a.scaleFactor,Bt(n)*a.scaleFactor]},{default:Ft(()=>[Tt("TresMeshBasicMaterial",{map:Bt(i),transparent:"",depthTest:"",blending:Lt.NormalBlending,side:Lt.DoubleSide,alphaTest:.06},null,8,Rt)]),_:1},8,["args"])],8,Vt))}}),{withAsyncContext:qt,defineComponent:Gt}=await e("vue"),{unref:Wt,openBlock:$t,createElementBlock:Ut,createCommentVNode:Ot,createStaticVNode:Ht}=await e("vue"),{defineComponent:Xt}=await e("vue"),{unref:Yt,createElementVNode:Zt,openBlock:Qt,createElementBlock:Jt}=await e("vue"),Kt=["scale-y"],ea=["map"],ta=["scale-y"],aa=["map","side"],{watch:sa,ref:la}=await e("vue"),oa=await e("three"),ra=Xt({__name:"spriteImg",props:{base64:{default:""},isSprite:{default:!1}},setup(e){const t=e;let a=la(1),s=null;return sa(()=>t.base64,e=>{s=(new oa.TextureLoader).load(e),s.colorSpace=oa.SRGBColorSpace;const t=new Image;t.src=e,t.onload=()=>{a.value=t.height/t.width}},{immediate:!0}),(t,l)=>(Qt(),Jt("TresGroup",null,[e.isSprite?(Qt(),Jt("TresSprite",{key:0,"scale-y":Yt(a)},[Zt("TresSpriteMaterial",{map:Yt(s),alphaTest:.2},null,8,ea)],8,Kt)):(Qt(),Jt("TresMesh",{key:1,"scale-y":Yt(a)},[l[0]||(l[0]=Zt("TresPlaneGeometry",null,null,-1)),Zt("TresMeshBasicMaterial",{map:Yt(s),side:oa.DoubleSide,transparent:"",alphaTest:.2},null,8,aa)],8,ta))]))}}),{defineComponent:na}=await e("vue"),{renderList:ia,Fragment:ua,openBlock:da,createElementBlock:ca,mergeProps:ma,createElementVNode:pa,createCommentVNode:va}=await e("vue"),ha={key:0},fa=["geometry","render-order"],{onUnmounted:ga,computed:ya,watch:wa,ref:ba}=await e("vue"),ka=na({__name:"svgCom",props:{src:{default:"./plugins/geokit/case-real-3/icons/satellite.svg"},skipStrokes:{default:!1},skipFills:{default:!1}},setup(e){const t=e,a=ba([]),s=ba(!0);let o=ba(()=>{});const r=ya(()=>a.value.filter(e=>!(!e.isStroke||t.skipStrokes)||!e.isStroke&&!t.skipFills));return wa(()=>t.src,e=>{o.value();const t=l(e);s.value=!0,wa(()=>t.isLoading.value,e=>{e||(a.value=t.layers.value,s.value=t.isLoading.value,o.value=t.dispose)})},{immediate:!0}),ga(()=>{o.value()}),(e,t)=>(da(),ca("TresGroup",null,[s.value?va("",!0):(da(),ca("TresGroup",ha,[(da(!0),ca(ua,null,ia(r.value,(e,t)=>(da(),ca("TresMesh",{key:`layer-${t}`,geometry:e.geometry,"render-order":t},[pa("TresMeshBasicMaterial",ma({ref_for:!0},e.material),null,16)],8,fa))),128))]))]))}}),{defineComponent:xa}=await e("vue"),{unref:_a,createElementVNode:Na,openBlock:Sa,createElementBlock:Ca}=await e("vue"),Ba=["object","rotation-x"],{watch:Ta}=await e("vue"),Ma=xa({__name:"line2RoundedRect",props:{linewidth:{default:1},color:{default:"#ffff00"},width:{default:1},height:{default:1},radius:{default:.1},cornerSegments:{default:6}},setup(e){const t=e;function a(e=1,t=1,a=.1,s=6){const l=Math.min(a,Math.abs(e/2)),o=Math.min(a,Math.abs(t/2)),r=[];return[{cx:+(e/2-l),cy:+(t/2-o),a0:0,a1:Math.PI/2},{cx:-(e/2-l),cy:+(t/2-o),a0:Math.PI/2,a1:Math.PI},{cx:-(e/2-l),cy:-(t/2-o),a0:Math.PI,a1:1.5*Math.PI},{cx:+(e/2-l),cy:-(t/2-o),a0:1.5*Math.PI,a1:2*Math.PI}].forEach((e,t)=>{!function(e,t,a,n){for(let i=0;i<=s;i++){const u=a+i/s*(n-a);r.push(e+Math.cos(u)*l),r.push(t+Math.sin(u)*o),r.push(0)}}(e.cx,e.cy,e.a0,e.a1)}),r.length>=3&&r.push(r[0],r[1],r[2]),r}const s=new c,l=new m({linewidth:t.linewidth,color:t.color}),o=new p(s,l);return l.resolution.set(window.innerWidth,window.innerHeight),l.needsUpdate=!0,Ta(()=>[t.linewidth,t.color],([e,t])=>{l.linewidth=e,l.color.set(t)}),Ta(()=>[t.width,t.height,t.radius,t.cornerSegments],()=>{s.setPositions(a(t.width,t.height,t.radius,t.cornerSegments))},{immediate:!0}),(e,t)=>(Sa(),Ca("TresGroup",null,[Na("primitive",{object:_a(o),"rotation-x":Math.PI/2},null,8,Ba)]))}}),{defineComponent:Pa}=await e("vue"),{unref:Fa,createElementVNode:Ea,openBlock:za,createElementBlock:Aa,createCommentVNode:Va}=await e("vue"),Ra={key:0},ja=["material"],Da=["args"],La={key:0},Ia=["rotation-z","position"],qa=["position","material"],Ga=["args"],Wa=["rotation-z","position"],$a=["position","material"],Ua=["args"],Oa=["position","material"],Ha=["args"],Xa=await e("three"),{watch:Ya}=await e("vue"),Za=Pa({__name:"lineArrow",props:{color:{default:"#ffff00"},hasArrow:{default:!0},radius:{default:.1},length:{default:10},cutoffRatio:{default:.9},roughness:{default:.2},metalness:{default:0}},setup(e){const t=e;let a=null,s=null,l=null,o=new Xa.MeshStandardMaterial({color:t.color,roughness:t.roughness,metalness:t.metalness,side:Xa.DoubleSide});return Ya(()=>t.length,e=>{a=[new Xa.Vector3(e/2,0,0),new Xa.Vector3(-e/2,0,0)],s=new Xa.CatmullRomCurve3(a),l=new Xa.CatmullRomCurve3([s.getPointAt(t.cutoffRatio),s.getPointAt(1)])},{immediate:!0}),Ya(()=>t.cutoffRatio,e=>{l=new Xa.CatmullRomCurve3([s.getPointAt(e),s.getPointAt(1)])}),Ya(()=>[t.color,t.roughness,t.metalness],([e,t,a])=>{o.color.set(e),o.roughness=t,o.roughness=t}),(t,r)=>Fa(a)?(za(),Aa("TresGroup",Ra,[Ea("TresMesh",{material:Fa(o)},[Ea("TresTubeGeometry",{args:[Fa(s),16,e.radius,8,!1]},null,8,Da)],8,ja),e.hasArrow?(za(),Aa("TresGroup",La,[Ea("TresGroup",{"rotation-z":Math.PI/5,position:[Fa(a)[1].x,Fa(a)[1].y,Fa(a)[1].z]},[Ea("TresMesh",{position:[-Fa(a)[1].x,-Fa(a)[1].y,-Fa(a)[1].z],material:Fa(o)},[Ea("TresTubeGeometry",{args:[Fa(l),16,e.radius,8,!1]},null,8,Ga)],8,qa)],8,Ia),Ea("TresGroup",{"rotation-z":-Math.PI/5,position:[Fa(a)[1].x,Fa(a)[1].y,Fa(a)[1].z]},[Ea("TresMesh",{position:[-Fa(a)[1].x,-Fa(a)[1].y,-Fa(a)[1].z],material:Fa(o)},[Ea("TresTubeGeometry",{args:[Fa(l),16,e.radius,8,!1]},null,8,Ua)],8,$a)],8,Wa),Ea("TresMesh",{position:Fa(a)[1],material:Fa(o)},[Ea("TresSphereGeometry",{args:[e.radius,16,16]},null,8,Ha)],8,Oa)])):Va("",!0)])):Va("",!0)}}),{defineComponent:Qa}=await e("vue"),{renderSlot:Ja,openBlock:Ka,createElementBlock:es}=await e("vue"),{ref:ts,shallowRef:as,watch:ss}=await e("vue"),ls=Qa({__name:"ScrollControls",props:{pages:{default:4},distance:{default:4},smoothScroll:{default:.1},horizontal:{type:Boolean,default:!1},htmlScroll:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{expose:t,emit:a}){const s=e,l=a,{camera:n,controls:i,renderer:u,invalidate:d}=o();ss(s,()=>{d()});const c=as(),m=document.createElement("div"),{y:p}=f(),{x:v,y:h,isScrolling:w}=g(m),{height:b,width:k}=y();let x=0;const _=ts(!1),N=ts(0),S=ts(0),C=ts(0),B=s.horizontal?"x":"y",T=ss(n,e=>{_.value?T():(x=s.horizontal?e?.position.x||0:e?.position.y||0,_.value=!0)},{immediate:!0});ss(w,e=>{i.value&&(i.value.enabled=!e)},{immediate:!0}),ss(p,e=>{(w.value||s.htmlScroll)&&(S.value=e/b.value/(C.value/b.value-1),N.value=-1*S.value,l("update:modelValue",S.value))}),ss(h,e=>{S.value=e/b.value/(C.value/b.value),N.value=-1*S.value,l("update:modelValue",S.value)}),ss(v,e=>{S.value=e/k.value/(C.value/k.value-1),N.value=+S.value,l("update:modelValue",S.value)}),ss(u,e=>{const t=e?.domElement;if(s.htmlScroll&&e?.domElement)t?.style.width&&t?.style.position&&t?.style.top&&t?.style.left&&(t.style.width="100%",t.style.position="fixed",t.style.top="0",t.style.left="0"),C.value=document.body.scrollHeight;else{const a=document.createElement("div"),l=document.createElement("div");m.style[s.horizontal?"overflowX":"overflowY"]="auto",m.style[s.horizontal?"overflowY":"overflowX"]="hidden",m.style.position="absolute",m.style.width="100%",m.style.height=" 100%",m.style.top="0",m.style.left="0",m.classList.add("scrollContainer"),a.style.position="sticky",a.style.top="0px",a.style.left="0px",a.style.width="100%",a.style.height="100%",a.style.overflow="hidden",m.appendChild(a),l.style.height=s.horizontal?"100%":b.value*s.pages+"px",l.style.width=s.horizontal?k.value*s.pages+"px":"100vw",l.style.pointerEvents="none",t.style.position="fixed",t.style.zIndex="0",t?.style.width&&(t.style.width="100%"),m.appendChild(l),e?.domElement.parentNode&&(e.domElement.parentNode.style.position="relative"),e?.domElement?.parentNode?.appendChild(m),C.value=s.horizontal?k.value*s.pages:b.value*s.pages}},{deep:!0});const{onBeforeRender:M}=r();return M(({invalidate:e})=>{if(n.value?.position){const t=(N.value*s.distance-n.value.position[B]+x)*s.smoothScroll;n.value.position[B]+=t,c.value.children.length>0&&(c.value.position[B]+=t),e()}}),t({instance:c}),(e,t)=>(Ka(),es("TresGroup",{ref_key:"wrapperRef",ref:c},[Ja(e.$slots,"default")],512))}}),{defineComponent:os}=await e("vue"),{unref:rs,createVNode:ns,withCtx:is,openBlock:us,createBlock:ds,createCommentVNode:cs,Suspense:ms,createElementBlock:ps}=await e("vue"),{watch:vs,ref:hs}=await e("vue"),fs=os({__name:"generalFont",props:{ttfUrl:{default:"./plugins/UIdemo/fonts/优设标题黑.ttf"},text:{default:"3D文字展示组件"},size:{default:.5},height:{default:.2},curveSegments:{default:5},bevelEnabled:{default:!0},bevelThickness:{default:.05},bevelSize:{default:.02},bevelOffset:{default:0},bevelSegments:{default:4},center:{default:!0},materialType:{type:String,default:"MeshStandardMaterial"},materialProps:{type:Object,required:!0}},setup(e){const t=e,a=new v,{state:s}=n(h,t.ttfUrl),l=hs(!1);let o=null;return vs(()=>s.value,e=>{e&&(o=a.parse(e),l.value=!0)},{immediate:!0}),(t,a)=>(us(),ps("TresGroup",null,[(us(),ds(ms,null,{default:is(()=>[l.value?(us(),ds(rs(i),{key:0,text:e.text,font:rs(o),size:e.size,height:e.height,curveSegments:e.curveSegments,bevelEnabled:e.bevelEnabled,bevelThickness:e.bevelThickness,bevelSize:e.bevelSize,bevelOffset:e.bevelOffset,bevelSegments:e.bevelSegments,center:e.center,needUpdates:!0},{default:is(()=>[ns(rs(w),{type:e.materialType,"material-props":e.materialProps},null,8,["type","material-props"])]),_:1},8,["text","font","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","center"])):cs("",!0)]),_:1}))]))}});export{It as _,fs as a,Ma as b,Za as c,ra as d,ka as e,St as f,re as g,xe as h,Ke as i,ls as j,I as l,ht as s,Re as v};

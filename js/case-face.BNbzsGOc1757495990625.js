import{Z as e,J as o,g as t,x as a,_ as r,Q as n}from"./@icegl.DAnDpN9P1757495990625.js";import{a3 as i}from"./three.QlBabAUP1757495990625.js";import{E as l}from"./@tresjs.BaNUTOlS1757495990625.js";import{_ as s}from"./DevTDTTiles.vue_vue_type_script_setup_true_lang.WcAH_zFL1757495990625.js";import{d as p,b as u,s as d,V as g,a as c,G as m,o as v,I as y,j as x,M as b,f,u as h,e as _,a5 as j,F as k}from"./@vue.pEDXJ_3Z1757495990625.js";import{_ as G}from"./@fesjs.CCi3MYpR1757495990625.js";import"./@vueuse.us9YhBxp1757495990625.js";import"./postprocessing.Ct7rpRb51757495990625.js";import"./vue-router.B3z3fWKz1757495990625.js";import"./lodash-es.C7pWAXPe1757495990625.js";import"./pinia.fETTmjgD1757495990625.js";import"./@qlin.q6OWdsQV1757495990625.js";import"./@babel.BPq7uOAK1757495990625.js";import"./@floating-ui.BFjFSAYt1757495990625.js";import"./@juggle.CcBCnTIR1757495990625.js";const P={style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"1000","pointer-events":"none"}},w={style:{position:"absolute",top:"20px",left:"20px",background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"15px","border-radius":"8px","pointer-events":"auto","max-width":"350px"}},S={style:{"margin-bottom":"15px"}},J={style:{background:"rgba(255, 255, 255, 0.1)",padding:"10px","border-radius":"6px"}},N={style:{"font-size":"12px",color:"#ccc","line-height":"1.6"}},O=["color","transparent","opacity","wireframe","side","map"],C=["color","transparent","opacity","wireframe","side","map"],M=G(p({__name:"case-face",setup(p){const G=u({heading:90,pitch:-45,distance:400,longitude:118.78,latitude:32.044}),M=u(0);let z;const F=u({effectProps:{enabled:!0,focusArea:.7,feather:.1},ambientLight:{color:"#fff",intensity:1},directionalLight:{color:"#fff",intensity:2,position:[-1500,500,500]},background:"/plugins/topoProject/image/farm_field_puresky_2k.jpg"}),T=()=>{M.value+=.1,z=requestAnimationFrame(T)};d((()=>{z=requestAnimationFrame(T)})),g((()=>{cancelAnimationFrame(z)}));const A=u("#ff6b6b"),q=u(.8),D=u(!1),I=u(2),L=u(.5),U=[{name:"GeoJSON三角形",geometry:{type:"Polygon",coordinates:[[[118.778,32.044],[118.782,32.044],[118.78,32.048],[118.778,32.044]]]}},{name:"GeoJSON矩形",geometry:{type:"Polygon",coordinates:[[[118.778,32.044],[118.782,32.044],[118.782,32.048],[118.778,32.048],[118.778,32.044]]]}},{name:"GeoJSON带洞矩形",geometry:{type:"Polygon",coordinates:[[[118.778,32.044],[118.782,32.044],[118.782,32.048],[118.778,32.048],[118.778,32.044]],[[118.7792,32.0452],[118.7808,32.0452],[118.7808,32.0468],[118.7792,32.0468],[118.7792,32.0452]]]}},{name:"GeoJSON复杂多边形",geometry:{type:"Polygon",coordinates:[[[118.775,32.045],[118.783,32.045],[118.783,32.05],[118.775,32.05],[118.775,32.045]]]}},{name:"GeoJSON大型带洞多边形",geometry:{type:"Polygon",coordinates:[[[118.775,32.042],[118.785,32.042],[118.785,32.052],[118.775,32.052],[118.775,32.042]],[[118.778,32.045],[118.782,32.045],[118.782,32.049],[118.778,32.049],[118.778,32.045]]]}},{name:"GeoJSON多洞多边形",geometry:{type:"Polygon",coordinates:[[[118.774,32.041],[118.786,32.041],[118.786,32.053],[118.774,32.053],[118.774,32.041]],[[118.776,32.05],[118.779,32.05],[118.779,32.052],[118.776,32.052],[118.776,32.05]],[[118.781,32.05],[118.784,32.05],[118.784,32.052],[118.781,32.052],[118.781,32.05]],[[118.778,32.046],[118.782,32.046],[118.782,32.048],[118.778,32.048],[118.778,32.046]],[[118.776,32.042],[118.779,32.042],[118.779,32.044],[118.776,32.044],[118.776,32.042]],[[118.781,32.042],[118.784,32.042],[118.784,32.044],[118.781,32.044],[118.781,32.042]]]}},{name:"GeoJSON圆形洞多边形",geometry:{type:"Polygon",coordinates:[[[118.773,32.04],[118.787,32.04],[118.787,32.054],[118.773,32.054],[118.773,32.04]],[[118.78,32.047],[118.7805,32.0465],[118.781,32.0467],[118.7815,32.047],[118.7818,32.0475],[118.782,32.048],[118.7818,32.0485],[118.7815,32.049],[118.781,32.0493],[118.7805,32.0495],[118.78,32.0493],[118.7795,32.049],[118.7792,32.0485],[118.779,32.048],[118.7792,32.0475],[118.7795,32.047],[118.78,32.0467],[118.78,32.047]]]}},{name:"GeoJSON嵌套洞多边形",geometry:{type:"Polygon",coordinates:[[[118.772,32.039],[118.788,32.039],[118.788,32.055],[118.772,32.055],[118.772,32.039]],[[118.775,32.042],[118.785,32.042],[118.785,32.052],[118.775,32.052],[118.775,32.042]]]}},{name:"GeoJSON星形洞多边形",geometry:{type:"Polygon",coordinates:[[[118.774,32.041],[118.786,32.041],[118.786,32.053],[118.774,32.053],[118.774,32.041]],[[118.78,32.044],[118.7805,32.0455],[118.782,32.046],[118.7815,32.0475],[118.7825,32.049],[118.78,32.0485],[118.7775,32.049],[118.7785,32.0475],[118.778,32.046],[118.7795,32.0455],[118.78,32.044]]]}},{name:"GeoJSON多重多边形",geometry:{type:"MultiPolygon",coordinates:[[[[118.775,32.04],[118.78,32.04],[118.78,32.044],[118.775,32.044],[118.775,32.04]]],[[[118.782,32.046],[118.787,32.046],[118.787,32.05],[118.782,32.05],[118.782,32.046]]]]}},{name:"GeoJSON多重带洞多边形",geometry:{type:"MultiPolygon",coordinates:[[[[118.773,32.039],[118.779,32.039],[118.779,32.045],[118.773,32.045],[118.773,32.039]],[[118.775,32.041],[118.777,32.041],[118.777,32.043],[118.775,32.043],[118.775,32.041]]],[[[118.781,32.047],[118.787,32.047],[118.787,32.053],[118.781,32.053],[118.781,32.047]],[[118.783,32.049],[118.785,32.049],[118.785,32.051],[118.783,32.051],[118.783,32.049]]],[[[118.774,32.055],[118.786,32.055],[118.786,32.061],[118.774,32.061],[118.774,32.055]],[[118.776,32.057],[118.778,32.057],[118.778,32.059],[118.776,32.059],[118.776,32.057]],[[118.782,32.057],[118.784,32.057],[118.784,32.059],[118.782,32.059],[118.782,32.057]]]]}}],E=u(0),H=c((()=>U[E.value].geometry)),K=c((()=>{const e=H.value;return"Polygon"===e.type?e.coordinates.length-1:e.coordinates.reduce(((e,o)=>e+(o.length-1)),0)})),Q=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#fcc468","#f38ba8","#a8dadc"],V=[.3,.5,.7,.8,.9,1],W=[1,2,3,4,5,10,20],Z=[.1,.2,.3,.4,.5,1,5,10,20];let B=0,R=3,X=1,Y=2;const $=()=>{B=(B+1)%Q.length,A.value=Q[B]},ee=()=>{R=(R+1)%V.length,q.value=V[R]},oe=()=>{D.value=!D.value},te=()=>{E.value=(E.value+1)%U.length},ae=()=>{X=(X+1)%W.length,I.value=W[X]},re=()=>{Y=(Y+1)%Z.length,L.value=Z[Y]},ne=()=>{B=0,R=3,X=1,Y=2,A.value=Q[B],q.value=V[R],I.value=W[X],L.value=Z[Y],E.value=0,D.value=!1};return(p,u)=>(v(),m(k,null,[y("div",P,[y("div",w,[u[6]||(u[6]=y("h3",{style:{margin:"0 0 15px 0",color:"#4caf50","text-align":"center"}},"GeoKit 面相关组件控制器",-1)),y("div",S,[u[2]||(u[2]=y("h4",{style:{margin:"0 0 8px 0",color:"#2196f3","font-size":"14px"}},"🎨 基础控制",-1)),y("button",{onClick:$,style:{margin:"2px",padding:"8px 12px",background:"#2196f3",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 切换颜色 "),y("button",{onClick:ee,style:{margin:"2px",padding:"8px 12px",background:"#2196f3",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 调节透明度 "),y("button",{onClick:oe,style:{margin:"2px",padding:"8px 12px",background:"#2196f3",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}},b(D.value?"关闭线框":"开启线框"),1)]),y("div",{style:{"margin-bottom":"15px","border-top":"1px solid #444","padding-top":"10px"}},[u[3]||(u[3]=y("h4",{style:{margin:"0 0 8px 0",color:"#9c27b0","font-size":"14px"}},"🔺 多边形控制",-1)),y("button",{onClick:te,style:{margin:"2px",padding:"8px 12px",background:"#9c27b0",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 切换形状 "),y("button",{onClick:ae,style:{margin:"2px",padding:"8px 12px",background:"#9c27b0",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 调节细分度 "),y("button",{onClick:re,style:{margin:"2px",padding:"8px 12px",background:"#9c27b0",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 调节高度 ")]),y("div",{style:{"margin-bottom":"15px","border-top":"1px solid #444","padding-top":"10px"}},[u[4]||(u[4]=y("h4",{style:{margin:"0 0 8px 0",color:"#e91e63","font-size":"14px"}},"🎛️ 其他控制",-1)),y("button",{onClick:ne,style:{margin:"2px",padding:"8px 12px",background:"#607d8b",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 重置所有 ")]),y("div",J,[u[5]||(u[5]=y("h4",{style:{margin:"0 0 8px 0",color:"#fff","font-size":"14px"}},"当前参数",-1)),y("div",N,[y("div",null,"🎨 颜色: "+b(A.value),1),y("div",null,"🌫️ 透明度: "+b(q.value.toFixed(1)),1),y("div",null,"📐 线框模式: "+b(D.value?"开启":"关闭"),1),y("div",null,"🔺 当前形状: "+b(U[E.value].name),1),y("div",null,"📊 数据格式: GeoJSON "+b(H.value.type),1),y("div",null,"🕳️ 洞数量: "+b(K.value),1),y("div",null,"🏗️ 细分程度: "+b(I.value),1),y("div",null,"📏 面片高度: "+b(L.value)+"m",1)])]),u[7]||(u[7]=y("div",{style:{"margin-top":"10px","font-size":"11px",color:"#aaa"}},[y("div",null,"🔺 地理多边形 (GeoPolygon) - 基于地理坐标的多边形面片"),y("div",null,"🧱 地理墙体 (GeoWall) - 基于多边形边界的立体墙面"),y("div",{style:{"margin-top":"5px",color:"#4caf50"}},"💡 支持动态纹理旋转效果"),y("div",{style:{"margin-top":"5px",color:"#ff9800"}},"🕳️ 支持多边形扣洞功能"),y("div",{style:{"margin-top":"5px",color:"#2196f3"}},"📊 支持GeoJSON Polygon/MultiPolygon格式")],-1))])]),x(h(n),{position:G.value,"onUpdate:position":u[1]||(u[1]=e=>G.value=e)},{default:f((()=>[x(h(e),{position:G.value,"onUpdate:position":u[0]||(u[0]=e=>G.value=e)},null,8,["position"]),x(h(o),{sceneConfig:F.value},null,8,["sceneConfig"]),x(s),x(h(t),{geometry:H.value,subdivisions:I.value,height:L.value},{default:f((()=>[(v(),_(j,{fallback:""},{default:f((()=>[x(h(l),{map:"/plugins/digitalCity/image/rain.png"},{default:f((({textures:e})=>[x(h(a),{texture:e.map,rotation:.1*M.value,center:[.5,.5]},null,8,["texture","rotation"]),y("TresMeshStandardMaterial",{color:A.value,transparent:q.value<1,opacity:q.value,wireframe:D.value,side:h(i),map:e.map},null,8,O)])),_:1})])),_:1}))])),_:1},8,["geometry","subdivisions","height"]),x(h(r),{geometry:H.value,height:50,baseHeight:0},{default:f((()=>[(v(),_(j,null,{default:f((()=>[x(h(l),{map:"/plugins/digitalCity/image/line2.png"},{default:f((({textures:e})=>[x(h(a),{texture:e.map,rotation:.1*M.value,center:[.5,.5]},null,8,["texture","rotation"]),y("TresMeshStandardMaterial",{color:A.value,transparent:q.value<1,opacity:q.value,wireframe:D.value,side:h(i),map:e.map},null,8,C)])),_:1})])),_:1}))])),_:1},8,["geometry"])])),_:1},8,["position"])],64))}}),[["__scopeId","data-v-3ba30471"]]);export{M as default};

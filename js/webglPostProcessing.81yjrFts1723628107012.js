import{i as t}from"./ice-utils.vh5WgREJ1723628107012.js";import{m as n,_ as e,c as o}from"./gl-matrix.F_hodXN31723628107012.js";import{P as r}from"./tweakpane.yHWGBmom1723628107012.js";import{d as i,r as a,q as c,o as s,D as u,J as f,u as l}from"./@vue.9bHx4gg21723628107012.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",x="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=T;!function(t,n){const e=T,o=b();for(;;)try{if(769293===parseInt(e(330))/1+parseInt(e(319))/2+-parseInt(e(342))/3*(parseInt(e(325))/4)+parseInt(e(415))/5+parseInt(e(322))/6+parseInt(e(406))/7+-parseInt(e(374))/8*(parseInt(e(398))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(347)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=T,n=new RegExp(t(380)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=R("init");n[t(320)](o+t(340))&&e.test(o+"input")?R():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(347)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=T;let n;try{n=Function(t(402)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(359)]=n[t(359)]||{},o=[t(373),t(362),t(356),t(412),t(388),"table","trace"];for(let i=0;i<o.length;i++){const n=d.constructor[t(321)][t(335)](d),r=o[i],a=e[r]||n;n[t(331)]=d[t(335)](d),n[t(360)]=a[t(360)].bind(a),e[r]=n}}))();const g={id:"canvaswebgl"},p=[_(382)];function T(t,n){const e=b();return(T=function(t,n){return e[t-=318]})(t,n)}const A=i({__name:_(328),setup(i){const E=_;let d,T,A,R,b,y,v,F,h,w,P,C,U;const I=1,B=.71,D=.76,N=new r({title:"参数"}),S=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});N[E(323)]({view:E(339),label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=E;j(),T[n(418)](C,t.value)}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);N[E(366)](S,E(326),{label:E(378)}),N[E(366)](S,E(396),{picker:E(345),x:{min:0,max:1},y:{min:0,max:1}}).on(E(391),(t=>{const n=E;L[0]=S.offset_right_top.x,L[1]=S[n(396)].y,j()})),N[E(366)](S,E(405),{picker:E(345),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(391),(t=>{L[5]=S.offset_right_bottom.x,L[6]=S.offset_right_bottom.y,j()})),N[E(366)](S,E(408),{picker:E(345),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(391),(t=>{const n=E;L[10]=S[n(408)].x,L[11]=S[n(408)].y,j()})),N[E(366)](S,E(318),{picker:E(345),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(391),(t=>{const n=E;L[15]=S[n(318)].x,L[16]=S[n(318)].y,j()})),c((()=>{M()}));const M=function(){const n=E;d=document[n(400)](n(397)),d[n(337)]=window[n(365)],d[n(352)]=window[n(358)],T=d[n(413)](n(375)),T&&(function(){const n=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=k(e,o),A=t(T,m,x),h=T[n(353)](A,n(324)),w=T.getUniformLocation(A,n(386)),P=T[n(353)](A,n(361)),U=Y(document[n(343)]("logo-texture"))}(),j(),T.enable(T[n(394)]),T.blendFunc(T[n(327)],T[n(407)]),O())};function O(){const t=E;T[t(367)](T[t(341)],v),T.clearColor(I,B,D,1),T[t(344)](T[t(371)]),function(){const t=E;T.useProgram(A),T[t(384)](T.ARRAY_BUFFER,R);const o=n[t(354)]();e[t(363)].ortho(o,0,d[t(337)],d.height,0,.1,100),T[t(338)](h,!1,o);const r=e[t(363)][t(354)]();e[t(363)][t(381)](r,[0,0,1],[0,0,0],[0,1,0]),T.uniformMatrix4fv(w,!1,r),X(U,600,600),X(U,400,400)}(),T[t(367)](T[t(341)],null),S[t(326)]&&(T[t(344)](T[t(371)]),T.clearColor(0,0,1,1),T[t(384)](T[t(392)],b),T[t(333)](y),T[t(393)](T.TEXTURE_2D,F)),T.drawElements(T[t(329)],6,T[t(349)],0),requestAnimationFrame(O)}function X(t,n,r){const i=E;let a=o();e[i(363)][i(372)](a,a,[n,r,0]),e[i(363)][i(390)](a,a,[250,250,0]),T[i(338)](P,!1,a),T[i(393)](T.TEXTURE_2D,t),T[i(334)](T[i(329)],6,T[i(349)],0)}function j(){const n=E,e=new Uint8Array([0,1,2,0,2,3]);b=k(L,e),y=t(T,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=T[n(353)](y,n(336)),T.getUniformLocation(y,n(395)),function(){const t=E;F=Y(d),v=T[t(387)](),T[t(367)](T[t(341)],v),T[t(419)](T[t(341)],T.COLOR_ATTACHMENT0,T[t(346)],F,0),T[t(367)](T.FRAMEBUFFER,null)}()}function Y(t){const n=E,e=T[n(417)]();return T.bindTexture(T[n(346)],e),t instanceof HTMLImageElement?T[n(404)](T[n(346)],0,T[n(350)],T[n(350)],T.UNSIGNED_BYTE,t):T[n(404)](T[n(346)],0,T[n(350)],t[n(337)],t[n(352)],0,T[n(350)],T[n(349)],null),T[n(351)](T.TEXTURE_2D,T[n(370)],T[n(414)]),T[n(351)](T[n(346)],T.TEXTURE_MAG_FILTER,T.NEAREST),T[n(351)](T[n(346)],T[n(348)],T[n(379)]),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T[n(379)]),e}function k(t,n){const e=E,o=T[e(401)]();T[e(384)](T.ARRAY_BUFFER,o),T[e(410)](T[e(392)],t,T[e(411)]);const r=3*Float32Array[e(369)]+2*Float32Array[e(369)];T[e(389)](0,3,T[e(403)],!1,r,0),T.enableVertexAttribArray(0),T.vertexAttribPointer(1,2,T[e(403)],!1,r,3*Float32Array[e(369)]),T[e(355)](1);const i=T.createBuffer();return T[e(384)](T.ELEMENT_ARRAY_BUFFER,i),T.bufferData(T[e(364)],n,T[e(411)]),T.bindBuffer(T[e(392)],null),o}return(t,n)=>{const e=E;return s(),u("canvas",g,[f("img",{id:e(409),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,p)])}}});function R(t){function n(t){const e=T;if(typeof t===e(357))return function(t){}[e(385)](e(416))[e(347)](e(399));1!==(""+t/t).length||t%20==0?function(){return!0}[e(385)]("debu"+e(377))[e(383)](e(332)):function(){return!1}[e(385)](e(376)+e(377))[e(347)](e(368)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function b(){const t=["4225880wlqxEV","while (true) {}","createTexture","uniform1f","framebufferTexture2D","offset_left_top","2005732JvOuNs","test","prototype","6673452NeoccC","addBlade","uProjection","11372JsnHyx","hidden","SRC_ALPHA","webglPostProcessing","TRIANGLES","141608xVwQtm","__proto__","action","useProgram","drawElements","bind","mixParam","width","uniformMatrix4fv","slider","chain","FRAMEBUFFER","834lUJjtI","getElementById","clear","inline","TEXTURE_2D","apply","TEXTURE_WRAP_S","UNSIGNED_BYTE","RGBA","texParameteri","height","getUniformLocation","create","enableVertexAttribArray","info","string","innerHeight","console","toString","uModel","warn","mat4","ELEMENT_ARRAY_BUFFER","innerWidth","addBinding","bindFramebuffer","stateObject","BYTES_PER_ELEMENT","TEXTURE_MIN_FILTER","COLOR_BUFFER_BIT","translate","log","23666984ENYINQ","webgl","debu","gger","是否后处理","CLAMP_TO_EDGE","function *\\( *\\)","lookAt","src","call","bindBuffer","constructor","uView","createFramebuffer","exception","vertexAttribPointer","scale","change","ARRAY_BUFFER","bindTexture","BLEND","color","offset_right_top","#canvaswebgl","9moeuNZ","counter","querySelector","createBuffer","return (function() ","FLOAT","texImage2D","offset_right_bottom","9912896XFxHFI","ONE_MINUS_SRC_ALPHA","offset_left_bottom","logo-texture","bufferData","STATIC_DRAW","error","getContext","NEAREST"];return(b=function(){return t})()}export{A as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as w,c2 as S,c3 as M,K as R,f as A,V as E,g as T,_ as P,m as D,bm as z,k as O,bz as C,d as F,aj as B,B as k,a as j,aP as U,e as N,M as L,at as H,a9 as Z,U as G,a6 as W}from"./three.3esZ7Hzr1726652192279.js";import{p as V,N as $,U as q}from"./@tresjs.UGbbWZf51726652192279.js";import{R as Y}from"./three-stdlib.yAKyCK811726652192279.js";import{x as X,b as K,w as J,a as Q,u as nn,d as tn,V as en,a4 as rn,a0 as on,o as an,E as cn,H as sn,J as un,a7 as ln,a3 as fn,q as pn,f as dn,L as hn,a8 as vn,r as mn,N as gn,Y as _n,t as yn,F as xn,a6 as In,m as bn}from"./@vue.JNsx1iN61726652192279.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.GLf74zq01726652192279.js";import{o as Rn}from"./object-hash.659hUnW-1726652192279.js";var An=zn;function En(){var n=["virtualScene","string","constructor","4CUszYR","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","return (function() ","function *\\( *\\)","destructor","31277972mzjjyp","debu","while (true) {}","56bMTGOx","info","map","table","48TTTcvn","bind","699906dwpQcs","gger","add","apply","2565985omWnJK",'{}.constructor("return this")( )',"counter","console","7876040KMVDAr","496039QjvUKV","2519898AGucrz","traverse","toString","error","warn","__proto__","dispose","2sUptTH","stateObject","1264077VWgrcw","trace"];return(En=function(){return n})()}!function(n,t){for(var e=zn,r=En();;)try{if(542886===parseInt(e(379))/1*(parseInt(e(387))/2)+parseInt(e(380))/3+parseInt(e(394))/4*(-parseInt(e(374))/5)+parseInt(e(370))/6*(parseInt(e(364))/7)+-parseInt(e(368))/8*(-parseInt(e(389))/9)+parseInt(e(378))/10+-parseInt(e(361))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=zn,t=new RegExp(n(399)),e=new RegExp(n(396),"i"),r=Cn(n(397));t.test(r+"chain")&&e.test(r+"input")?Cn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pn(void 0,(function(){var n,t=zn;try{n=Function(t(398)+t(375)+");")()}catch(s){n=window}for(var e=n[t(377)]=n[t(377)]||{},r=["log",t(384),t(365),t(383),"exception",t(367),t(390)],o=0;o<r.length;o++){var i=Pn.constructor.prototype[t(369)](Pn),a=r[o],c=e[a]||i;i[t(385)]=Pn[t(369)](Pn),i.toString=c[t(382)][t(369)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=zn;super(),this[n(391)]=null,this.virtualScene=new u}[An(372)](...n){var t=An;return this[t(391)][t(372)](...n),this}[An(360)](){var n=An;this[n(391)][n(381)]((t=>{var e=n;t instanceof l&&(t.geometry[e(386)](),t.material[e(386)](),t[e(395)][e(366)]&&t[e(395)].map.dispose(),this[e(391)].remove(t))})),this[n(391)]=null}}function zn(n,t){var e=En();return(zn=function(n,t){return e[n-=360]})(n,t)}const On=Dn;function Cn(n){function t(n){var e=zn;if(typeof n===e(392))return function(n){}[e(393)](e(363))[e(373)](e(376));1!==(""+n/n).length||n%20==0?function(){return!0}[e(393)](e(362)+e(371)).call("action"):function(){return!1}[e(393)](e(362)+e(371)).apply(e(388)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Nn;function Bn(){const n=["bind","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","221166eFxrjb","error","trace",'{}.constructor("return this")( )',"input","312CHqSVY","392HGQUZY","console","__proto__","call","gger","664155KEQJRK","outood/mossy_forest_1k.hdr","70076SllLGn","outdoor/satara_night_1k.hdr","warn","kiara/kiara_1_dawn_1k.hdr","toString","log","info","init","test","apply","action","7007afRzaZ","return (function() ","city/shanghai_bund_1k.hdr","1838kMJKeH","counter","outdoor/snowy_forest_path_01_1k.hdr","prototype","venice/venice_sunset_1k.hdr","exception","constructor","city/canary_wharf_1k.hdr","stateObject","665772FMcsIr","1521315LwuDQK","chain","string"];return(Bn=function(){return n})()}!function(n,t){const e=Nn,r=Bn();for(;;)try{if(116927===parseInt(e(140))/1+-parseInt(e(154))/2*(parseInt(e(175))/3)+parseInt(e(163))/4+parseInt(e(138))/5+-parseInt(e(170))/6+parseInt(e(151))/7*(parseInt(e(176))/8)+-parseInt(e(164))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(149)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Nn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(169),"i"),r=Ln(n(147));t[n(148)](r+n(165))&&e[n(148)](r+n(174))?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Nn;let t;try{t=Function(n(152)+n(173)+");")()}catch(o){t=window}const e=t[n(177)]=t[n(177)]||{},r=[n(145),n(142),n(146),n(171),n(159),"table",n(172)];for(let i=0;i<r.length;i++){const t=jn[n(160)][n(157)][n(167)](jn),o=r[i],a=e[o]||t;t[n(135)]=jn[n(167)](jn),t.toString=a[n(144)][n(167)](a),e[o]=t}}))();const Un={sunset:Fn(158),studio:"studio/poly_haven_studio_1k.hdr",city:Fn(161),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Fn(141),forest:Fn(139),snow:Fn(156),dawn:Fn(143),hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:"city/modern_buildings_2_1k.hdr",shangai:Fn(153)};function Nn(n,t){const e=Bn();return(Nn=function(n,t){return e[n-=135]})(n,t)}function Ln(n){function t(n){const e=Nn;if(typeof n===e(166))return function(n){}.constructor("while (true) {}").apply(e(155));1!==(""+n/n)[e(168)]||n%20==0?function(){return!0}.constructor("debu"+e(137))[e(136)](e(150)):function(){return!1}.constructor("debu"+e(137))[e(149)](e(162)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gn,r=Vn();for(;;)try{if(993947===parseInt(e(114))/1*(parseInt(e(118))/2)+parseInt(e(127))/3+parseInt(e(158))/4*(-parseInt(e(157))/5)+-parseInt(e(123))/6+parseInt(e(126))/7+-parseInt(e(129))/8+parseInt(e(128))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(141)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Gn,t=new RegExp(n(135)),e=new RegExp(n(116),"i"),r=Wn(n(156));t[n(143)](r+n(121))&&e[n(143)](r+n(149))?Wn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(141)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Vn();return(Gn=function(n,t){return e[n-=113]})(n,t)}Zn(void 0,(function(){const n=Gn;let t;try{t=Function("return (function() "+n(136)+");")()}catch(o){t=window}const e=t[n(132)]=t[n(132)]||{},r=[n(142),n(155),n(113),n(115),n(131),n(140),n(137)];for(let i=0;i<r[n(119)];i++){const t=Zn.constructor[n(145)][n(151)](Zn),o=r[i],a=e[o]||t;t[n(130)]=Zn[n(151)](Zn),t[n(150)]=a.toString[n(151)](a),e[o]=t}}))();function Wn(n){function t(n){const e=Gn;if(typeof n===e(138))return function(n){}[e(139)](e(144)).apply("counter");1!==(""+n/n)[e(119)]||n%20==0?function(){return!0}[e(139)](e(122)+e(133))[e(153)](e(154)):function(){return!1}.constructor(e(122)+e(133))[e(141)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Vn(){const n=["environment","function *\\( *\\)",'{}.constructor("return this")( )',"trace","string","constructor","table","apply","log","test","while (true) {}","prototype","Failed to load environment map: ","isArray","Preset must be one of: ","input","toString","bind","mapping","call","action","warn","init","35HWBCBC","404692oYcURu","info","81388VeIuvK","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","20boeNXx","length","background","chain","debu","7661448lgeSaP","setPath","backgroundBlurriness","10913826lJcgHZ","1716714CVhHTL","11894157oQMtgY","10301944Bippsd","__proto__","exception","console","gger"];return(Vn=function(){return n})()}function $n(n,t){const e=Kn();return($n=function(n,t){return e[n-=248]})(n,t)}const qn=$n;!function(n,t){const e=$n,r=Kn();for(;;)try{if(242149===-parseInt(e(302))/1+parseInt(e(278))/2+-parseInt(e(261))/3*(-parseInt(e(280))/4)+parseInt(e(277))/5*(-parseInt(e(250))/6)+parseInt(e(305))/7*(-parseInt(e(253))/8)+-parseInt(e(262))/9+-parseInt(e(291))/10*(-parseInt(e(293))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=$n,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Qn(n(297));t[n(286)](r+n(299))&&e.test(r+n(300))?Qn():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(282)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["trace","112870TPpXkK","38216sGJxab","resolution","8xjaSrD","warn","apply","far","exception","destructor","test","stateObject","TresEnvSence","counter","error","1771830Rgadnu","constructor","55pRIJoR","texture","prototype","__proto__","init","frames","chain","input","call","81731sQlaFc","type","while (true) {}","514619fCGIoC","useDefaultScene","generateMipmaps","magFilter","60ulvlyW","info","environment","48cQwxJj","$slots","bind","component","length","log","default","isArray","548484vvAsoW","2519613YPuxsi","value","table","string","virtualScene","minFilter","toString","update","dispose","debu","symbol","background","gger","console"];return(Kn=function(){return n})()}Xn(void 0,(function(){const n=$n;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(275)]=t[n(275)]||{},r=[n(258),n(281),n(251),n(290),n(284),n(264),n(276)];for(let i=0;i<r[n(257)];i++){const t=Xn.constructor[n(295)][n(255)](Xn),o=r[i],a=e[o]||t;t[n(296)]=Xn[n(255)](Xn),t[n(268)]=a[n(268)][n(255)](a),e[o]=t}}))();const Jn=tn({__name:qn(256),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=K(null),x=null;const I=K(null);en((()=>{var n,t;const e=$n;null==(n=I.value)||n[e(285)](),null==(t=y[e(263)])||t[e(270)]()}));const{onBeforeLoop:b}=q();let w=1;b((()=>{const n=$n;x&&I[n(263)]&&y[n(263)]&&(i[n(298)]===1/0||w<i[n(298)])&&(i[n(306)]?x[n(269)](s[n(263)],u[n(263)]):x.update(s[n(263)],ln(I[n(263)][n(266)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=K([]),path:s=K(""),background:u}=X(n);J(n,(()=>{o()}));const l=K(null),h=Q((()=>Array[e(147)](c[e(117)]))),v=Q((()=>h[e(117)]?f:Y));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(119)]>0&&!(null==i?void 0:i.value)){try{l[r(117)]=await $(v[r(117)],h[r(117)]?[...nn(n)]:nn(n),(n=>{t&&n[r(124)](nn(t))}))}catch(o){throw new Error(r(146)+o)}l.value&&(l.value[r(152)]=h[r(117)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(117)]&&n&&(r[t(117)][t(134)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(117)]){let e=(null==t?void 0:t[i(117)])?t[i(117)].texture:o,a=r[i(117)][i(120)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(117)].background=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(117)]),(n=>{const t=e;r[t(117)]&&n&&(r[t(117)][t(125)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(117)]),(async n=>{const t=e;if(n&&n in Un){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Un[n];try{l[t(117)]=await $(Y,i,(n=>{e&&n[t(124)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l.value&&l[t(117)]&&(l[t(117)][t(152)]=d),o()}else if(n&&!(n in Un))throw new Error(t(148)+Object.keys(Un).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=$n;n?(u[t(263)][t(252)]=n[t(294)],i[t(273)]&&(u[t(263)][t(273)]=n[t(294)])):(u[t(263)][t(252)]=S[t(263)],i.background&&(u[t(263)][t(273)]=S[t(263)]))};J(S,(n=>{const t=$n;y[t(263)]&&M(y[t(263)])}),{immediate:!0,deep:!0}),c({EnvSence:On});const R=()=>{var n;const t=$n;null==(n=y[t(263)])||n.dispose(),y[t(263)]=new v(i[t(279)]),x=new m(i.near,i[t(283)],y[t(263)]),i[t(306)]?(y[t(263)][t(294)][t(303)]=g,y.value[t(294)][t(248)]=!1,y[t(263)][t(294)][t(267)]=_,y[t(263)].texture[t(249)]=_):y[t(263)][t(294)][t(303)]=h,M(y[t(263)])};return J((()=>on()[e(259)]),(n=>{var t,r;const o=e;n&&(!y[o(263)]||y[o(263)].texture.type!==h)&&(l=n(),Array[o(260)](l)&&l[o(257)]>0&&typeof(null==(t=l[0])?void 0:t[o(303)])!==o(272))?R():(null==(r=y[o(263)])||r[o(270)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(263)]=S,J((()=>i[e(306)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(288),{key:0,ref_key:"envSence",ref:I},[sn(n[r(254)],r(259))],512)):un("",!0)}}});function Qn(n){function t(n){const e=$n;if(typeof n===e(265))return function(n){}.constructor(e(304)).apply(e(289));1!==(""+n/n)[e(257)]||n%20==0?function(){return!0}[e(292)]("debu"+e(274))[e(301)]("action"):function(){return!1}[e(292)](e(271)+e(274))[e(282)](e(287)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=rt;function tt(){const n=["16931292PedVlN","33VxNFOn","string","rect","while (true) {}","trace","chain","9wnttZs","value","circle","86079FsLnKL","6885968iXXZQN","2dgdnod","from","material","init","index","console","bind","1275636eTxynh","intensity","log","table","needsUpdate","apply","2009630Tyrpnx","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6xqXqZw","action","map","__proto__","multiplyScalar","counter","length","gger","ring","set","function *\\( *\\)","stateObject","debu","311480eDUuXc","test","side","constructor","TresRingGeometry","TresMeshBasicMaterial","toString","246195muhByT","toneMapped","color","return (function() ","534dmgqLg"];return(tt=function(){return n})()}!function(n,t){const e=rt,r=tt();for(;;)try{if(601723===-parseInt(e(378))/1*(parseInt(e(395))/2)+-parseInt(e(411))/3*(parseInt(e(402))/4)+parseInt(e(408))/5+parseInt(e(382))/6*(-parseInt(e(393))/7)+parseInt(e(394))/8*(parseInt(e(390))/9)+-parseInt(e(424))/10*(parseInt(e(384))/11)+parseInt(e(383))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rt(n,t){const e=tt();return(rt=function(n,t){return e[n-=373]})(n,t)}!function(){et(this,(function(){const n=rt,t=new RegExp(n(421)),e=new RegExp(n(410),"i"),r=lt(n(398));t[n(425)](r+n(389))&&e.test(r+"input")?lt():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ot(void 0,(function(){const n=rt;let t;try{t=Function(n(381)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(400)]=t[n(400)]||{},r=[n(404),"warn","info",n(409),"exception",n(405),n(388)];for(let i=0;i<r[n(417)];i++){const t=ot[n(374)].prototype.bind(ot),o=r[i],a=e[o]||t;t[n(414)]=ot[n(401)](ot),t[n(377)]=a[n(377)][n(401)](a),e[o]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[nt(379),nt(413),nt(373),nt(380)],ut=tn({__name:nt(399),props:{args:{default:null},from:{default:nt(386)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=K();return fn((()=>{const n=rt;r[n(391)]&&(r.value[n(380)][n(415)](e[n(403)]),r[n(391)][n(406)]=!0)})),J((()=>e[t(380)]),(n=>{const o=t;r[o(391)]&&(r[o(391)][o(380)][o(420)](n),r[o(391)][o(380)][o(415)](e[o(403)]),r[o(391)][o(406)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn("TresMesh",null,[e[i(396)]===i(392)?(an(),cn(i(375),it)):e[i(396)]===i(419)?(an(),cn(i(375),at)):e[i(396)]===i(386)?(an(),cn("TresPlaneGeometry",ct)):(an(),dn(e.from,{key:3,args:e})),hn(i(376),{ref_key:i(397),ref:r,toneMapped:n[i(379)],map:n[i(413)],side:nn(x),color:n[i(380)]},null,8,st)])}}});function lt(n){function t(n){const e=rt;if(typeof n===e(385))return function(n){}.constructor(e(387))[e(407)](e(416));1!==(""+n/n)[e(417)]||n%20==0?function(){return!0}[e(374)](e(423)+e(418)).call(e(412)):function(){return!1}[e(374)]("debu"+e(418))[e(407)](e(422)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=pt,r=ht();for(;;)try{if(148254===parseInt(e(455))/1*(parseInt(e(437))/2)+parseInt(e(462))/3*(parseInt(e(453))/4)+-parseInt(e(436))/5+parseInt(e(438))/6*(-parseInt(e(475))/7)+parseInt(e(447))/8*(-parseInt(e(446))/9)+parseInt(e(435))/10+parseInt(e(477))/11*(-parseInt(e(465))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(454)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pt(n,t){const e=ht();return(pt=function(n,t){return e[n-=435]})(n,t)}!function(){ft(this,(function(){const n=pt,t=new RegExp(n(456)),e=new RegExp(n(457),"i"),r=mt(n(442));t.test(r+n(444))&&e[n(471)](r+n(441))?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["948nNeIlv","width","height","debu","call","dispose","test",'{}.constructor("return this")( )',"stateObject","clear","49oEILyv","action","11660vqamGZ","181020nuHTbF","703610BHcFaq","2pXPEBG","54762aRITtM","depthTexture","bind","input","init","log","chain","length","1341pXRNBN","2328kpofMT","__proto__","error","string","return (function() ","value","1133068hbgHod","apply","178595wTfJwg","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setRenderTarget","toString","counter","exception","3WSYePe","while (true) {}","type"];return(ht=function(){return n})()}function vt(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?X(n):X(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=pt;null==(n=t[a(452)])||n[a(470)](),t[a(452)]=new I((null==r?void 0:r[a(452)])||p[a(466)].value,(null==e?void 0:e.value)||p[a(467)][a(452)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(452)])),(null==i?void 0:i.value)&&(t.value[a(439)]=new w((null==r?void 0:r[a(452)])||p[a(466)][a(452)],(null==e?void 0:e[a(452)])||p[a(467)][a(452)]),t.value[a(439)].format=S,t.value.depthTexture[a(464)]=M)})),s((()=>{const n=pt;(null==a?void 0:a.value)&&(l[n(452)][n(458)](ln(t.value)),l[n(452)][n(474)](),l.value.render(ln(f[n(452)]),ln(u[n(452)])),l[n(452)][n(458)](null))})),gn((()=>{var n;const e=pt;null==(n=t[e(452)])||n[e(470)]()})),t}function mt(n){function t(n){const e=pt;if(typeof n===e(450))return function(n){}.constructor(e(463))[e(454)](e(460));1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}.constructor(e(468)+"gger")[e(469)](e(476)):function(){return!1}.constructor(e(468)+"gger")[e(454)](e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=pt,t=function(){const n=pt;let t;try{t=Function(n(451)+n(472)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(443),"warn","info",n(449),n(461),"table","trace"];for(let o=0;o<r[n(445)];o++){const t=dt.constructor.prototype[n(440)](dt),i=r[o],a=e[i]||t;t[n(448)]=dt[n(440)](dt),t.toString=a[n(459)][n(440)](a),e[i]=t}}))();const gt=bt;!function(n,t){const e=bt,r=It();for(;;)try{if(498162===-parseInt(e(307))/1*(-parseInt(e(343))/2)+-parseInt(e(344))/3+-parseInt(e(326))/4*(parseInt(e(303))/5)+parseInt(e(308))/6+-parseInt(e(338))/7+parseInt(e(337))/8*(-parseInt(e(345))/9)+-parseInt(e(329))/10*(-parseInt(e(300))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(312)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=bt,t=new RegExp(n(313)),e=new RegExp(n(306),"i"),r=St(n(298));t.test(r+"chain")&&e[n(315)](r+"input")?St():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=bt;let t;try{t=Function(n(348)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(318)]=t.console||{},r=["log",n(331),n(346),n(304),"exception","table",n(336)];for(let i=0;i<r[n(333)];i++){const t=yt[n(327)][n(324)][n(340)](yt),o=r[i],a=e[o]||t;t[n(321)]=yt[n(340)](yt),t[n(317)]=a[n(317)][n(340)](a),e[o]=t}}))();const xt=[gt(311),"side"];function It(){const n=["1125oTVGlS","info","setRenderTarget","return (function() ","fboResolution","MeshTransmissionMaterialClass","init","action","11qTUDVG","backsideThickness","time","20Mhubdu","error","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1fBfEbd","5401608MBPdcd","toneMapping","texture","buffer","apply","function *\\( *\\)","traverse","test","value","toString","console","backside","isMesh","__proto__","uuid","thickness","prototype","stateObject","256972PItOZs","constructor","render","7965710isDgNa","side","warn","index","length","gger","call","trace","54608tifcrP","461006oYzuDD","background","bind","debu","envMapIntensity","562382nvaVik","911364vlrIVM"];return(It=function(){return n})()}function bt(n,t){const e=It();return(bt=function(n,t){return e[n-=296]})(n,t)}const wt=tn({__name:gt(332),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=q(),p=vt({width:u[e(296)],height:u[e(296)],isLoop:!1}),d=vt({width:u[e(296)],height:u[e(296)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(316)]=function(n,t){const e=bt;let r;return n[e(314)]((n=>{const o=e;n[o(320)]&&n[o(305)]&&n.material[o(322)]===t&&(r=n)})),r}(i[n(316)],r[n(316)][n(322)])})),f((({elapsed:n})=>{const t=e;r[t(316)][t(302)]=n,r[t(316)][t(311)]===d[t(316)].texture&&s.value&&(m=a[t(316)].toneMapping,h=i[t(316)][t(339)],v=r[t(316)].envMapIntensity,g=s[t(316)][t(305)][t(330)],s[t(316)][t(305)]=l,u[t(319)]&&(a.value[t(347)](p[t(316)]),a.value[t(328)](i[t(316)],c[t(316)]),s.value.material=r[t(316)],s[t(316)].material[t(323)]=u[t(301)],s[t(316)][t(305)].buffer=p[t(316)][t(310)],s.value[t(305)][t(330)]=R,s[t(316)][t(305)][t(342)]=0),a[t(316)][t(347)](d[t(316)]),a[t(316)][t(328)](i[t(316)],c[t(316)]),s.value[t(305)].buffer=d[t(316)][t(310)],s[t(316)][t(305)]=r[t(316)],s[t(316)][t(305)][t(323)]=u[t(323)],s[t(316)][t(305)][t(330)]=g,s[t(316)][t(305)].envMapIntensity=v,i[t(316)].background=h,a.value.setRenderTarget(null),a[t(316)][t(309)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn("TresMeshTransmissionMaterial",{ref_key:o(297),ref:r,buffer:nn(d)[o(310)],side:nn(x)},null,8,xt)}}});function St(n){function t(n){const e=bt;if("string"==typeof n)return function(n){}[e(327)]("while (true) {}").apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(341)+e(334))[e(335)](e(299)):function(){return!1}[e(327)](e(341)+"gger")[e(312)](e(325)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Et,r=Rt();for(;;)try{if(710815===parseInt(e(365))/1+parseInt(e(358))/2*(parseInt(e(355))/3)+-parseInt(e(375))/4*(parseInt(e(390))/5)+parseInt(e(366))/6*(parseInt(e(357))/7)+-parseInt(e(387))/8+parseInt(e(344))/9+-parseInt(e(369))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Rt(){const n=["set","info","gref","string","disableY","return (function() ","right","constructor","while (true) {}","147261GzwZQs","length","91aFRksu","30kGbPdW","identity","max","precise","debu","input","disable","1350732nIKbnr","626208siHGOr","getCenter","console","26699000kOuYeF","warn","value","setFromObject","gger","left","538908vKoXNL","bind","apply","outer","min","counter","error","position","TresGroup","disableX","action","stateObject","9072592dhDaKP","default",'{}.constructor("return this")( )',"5EaFExT","inner","toString","matrixWorld","table","10851255ngnYWn","disableZ"];return(Rt=function(){return n})()}!function(){Mt(this,(function(){const n=Et,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pt("init");t.test(r+"chain")&&e.test(r+n(363))?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=Rt();return(Et=function(n,t){return e[n-=343]})(n,t)}At(void 0,(function(){const n=Et;let t;try{t=Function(n(351)+n(389)+");")()}catch(o){t=window}const e=t[n(368)]=t.console||{},r=["log",n(370),n(347),n(381),"exception",n(343),"trace"];for(let i=0;i<r.length;i++){const t=At[n(353)].prototype[n(376)](At),o=r[i],a=e[o]||t;t.__proto__=At[n(376)](At),t[n(392)]=a.toString[n(376)](a),e[o]=t}}))();const Tt=tn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return pn((()=>{const n=Et;if(!r[n(371)])return;if(!o.value)return;r[n(371)][n(393)][n(359)]();const e=(new A)[n(372)](o[n(371)],t[n(361)]),i=new E,a=new T,c=e[n(360)].x-e.min.x,s=e[n(360)].y-e[n(379)].y,u=e[n(360)].z-e.min.z;e[n(367)](i),e.getBoundingSphere(a);const l=t.top?s/2:t.bottom?-s/2:0,f=t[n(374)]?-c/2:t[n(352)]?c/2:0,p=t.front?u/2:t.back?-u/2:0;r[n(371)][n(382)][n(346)](t[n(364)]||t[n(384)]?0:-i.x+f,t[n(364)]||t[n(350)]?0:-i.y+l,t[n(364)]||t[n(345)]?0:-i.z+p)})),(n,t)=>{const i=Et;return an(),cn(i(383),{ref_key:i(348),ref:e},[hn(i(383),{ref_key:i(378),ref:r},[hn(i(383),{ref_key:i(391),ref:o},[sn(n.$slots,i(388))],512)],512)],512)}}});function Pt(n){function t(n){const e=Et;if(typeof n===e(349))return function(n){}.constructor(e(354))[e(377)](e(380));1!==(""+n/n)[e(356)]||n%20==0?function(){return!0}[e(353)](e(362)+e(373)).call(e(385)):function(){return!1}[e(353)](e(362)+e(373)).apply(e(386)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=jt;!function(n,t){const e=jt,r=Ot();for(;;)try{if(799523===-parseInt(e(325))/1+-parseInt(e(302))/2*(-parseInt(e(343))/3)+-parseInt(e(341))/4*(-parseInt(e(304))/5)+-parseInt(e(344))/6*(parseInt(e(342))/7)+parseInt(e(351))/8*(parseInt(e(315))/9)+-parseInt(e(305))/10+parseInt(e(306))/11*(parseInt(e(330))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ot(){const n=["1235961QcqIqt","set","gger","bind","params","179688OsvMjo","stateObject","backside","color","return (function() ","debu","causticsOnly","__proto__","primitive","ior","info","116CDwmWE","1370971WKWThg","183hUHBBV","30RjAEEH","intensity","prototype","far","while (true) {}","apply","chain","40lnbiir","helper","constructor","table","add","trace","length","25174PEWEgf","log","237365mdQXoh","3448460AyDjbT","209bOxfNB","object","exception","test","call","worldRadius","lightSource","update","value","1675017YScSOe","console","$slots","#ffffff","index","backsideIOR","input",'{}.constructor("return this")( )',"string","warn"];return(Ot=function(){return n})()}!function(){zt(this,(function(){const n=jt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ut("init");t.test(r+n(350))&&e[n(309)](r+n(321))?Ut():r("0")}))()}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ct(void 0,(function(){const n=jt,t=function(){const n=jt;let t;try{t=Function(n(334)+n(322)+");")()}catch(e){t=window}return t}(),e=t[n(316)]=t.console||{},r=[n(303),n(324),n(340),"error",n(308),n(354),n(356)];for(let o=0;o<r[n(301)];o++){const t=Ct.constructor[n(346)][n(328)](Ct),i=r[o],a=e[i]||t;t[n(337)]=Ct[n(328)](Ct),t.toString=a.toString.bind(a),e[i]=t}}))();const Ft=[Dt(307)],Bt=[Dt(307)],kt=tn({__name:Dt(319),props:{color:{default:Dt(318)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Dt,e=n,{renderer:r}=V(),o=Mn(r[t(314)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(311)]});o[t(329)][t(332)]=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o.scene[e(355)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(313)]()})),fn((()=>{const n=t;e[n(333)]&&o[n(329)][n(333)][n(326)](e[n(333)]),e[n(339)]&&(o.params[n(339)]=e[n(339)]),e.backsideIOR&&(o.params[n(320)]=e[n(320)]),e[n(347)]&&(o[n(329)][n(347)]=e[n(347)]),e.worldRadius&&(o[n(329)][n(311)]=e[n(311)]),e[n(345)]&&(o[n(329)][n(345)]=e.intensity)})),J((()=>e[t(336)]),(n=>{const e=t;o[e(329)][e(336)]=n})),J((()=>e[t(312)]),(n=>{const e=t;n&&o[e(329)][e(312)]instanceof E&&o[e(329)][e(312)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn("TresGroup",{ref_key:"group",ref:i},[sn(n[r(317)],"default")],512),hn(r(338),{object:nn(o).group,position:[0,.003,0]},null,8,Ft),hn(r(338),{object:nn(o)[r(352)],visible:!1},null,8,Bt)],64)}}});function jt(n,t){const e=Ot();return(jt=function(n,t){return e[n-=301]})(n,t)}function Ut(n){function t(n){const e=jt;if(typeof n===e(323))return function(n){}[e(353)](e(348))[e(349)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(353)](e(335)+e(327))[e(310)]("action"):function(){return!1}[e(353)](e(335)+"gger").apply(e(331)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(561773===parseInt(e(397))/1*(-parseInt(e(400))/2)+-parseInt(e(412))/3*(-parseInt(e(425))/4)+-parseInt(e(444))/5+parseInt(e(422))/6*(parseInt(e(395))/7)+-parseInt(e(428))/8+parseInt(e(416))/9*(parseInt(e(435))/10)+-parseInt(e(426))/11*(-parseInt(e(408))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(404)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nt(this,(function(){const n=Ht,t=new RegExp(n(420)),e=new RegExp(n(433),"i"),r=Wt(n(401));t[n(402)](r+n(446))&&e.test(r+n(417))?Wt():r("0")}))()}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(404)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=394]})(n,t)}Lt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function(n(414)+n(399)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log",n(434),n(403),n(423),"exception","table","trace"];for(let o=0;o<r[n(427)];o++){const t=Lt.constructor[n(413)].bind(Lt),i=r[o],a=e[i]||t;t[n(419)]=Lt[n(449)](Lt),t[n(443)]=a.toString.bind(a),e[i]=t}}))();const Zt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=P[r(406)][r(437)];return P[r(406)][r(437)]=P[r(406)][r(437)].replace("#ifdef USE_SHADOWMAP",r(409)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(448)+e+r(410)+e+r(396)+e+r(442)+e+r(424)+t+r(407)+e+r(421))[r(418)](r(445),r(439)),(n,t,e)=>{const i=r;P[i(406)][i(437)]=o,function(n,t,e){const r=Ht;t.traverse((t=>{const e=Ht;t[e(398)]&&(Array[e(447)](t[e(398)])?t[e(398)][e(441)]((t=>{const r=e;n[r(430)][r(436)](t),t[r(432)]()})):(n[e(430)][e(436)](t[e(398)]),t.material[e(432)]()))})),n[r(403)].programs[r(427)]=0,n[r(415)](t,e)}(n,t,e)}};function Gt(){const n=["action","ShaderChunk","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","38556FJIziS","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","; i ++) {\n        offset = (vogelDiskSample(j, ","call","90459oAHXRG","prototype","return (function() ","compile","4282533pYRqVi","input","replace","__proto__","function *\\( *\\)",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","78ScCbQa","error",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","24kAIvOM","2959kViHWr","length","2998928BfgOwm","constructor","properties","counter","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","20HbSmWu","remove","shadowmap_pars_fragment","gger","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","string","forEach","; i++) {\n        vogelSample = vogelDiskSample(j, ","toString","3456635XFOAGx","#if defined( SHADOWMAP_TYPE_PCF )","chain","isArray",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","bind","stateObject","207620Jnlsal",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","3gwwzQX","material",'{}.constructor("return this")( )',"503002tqQqRO","init","test","info","apply"];return(Gt=function(){return n})()}function Wt(n){function t(n){const e=Ht;if(typeof n===e(440))return function(n){}[e(429)]("while (true) {}")[e(404)](e(431));1!==(""+n/n)[e(427)]||n%20==0?function(){return!0}[e(429)]("debu"+e(438))[e(411)](e(405)):function(){return!1}[e(429)]("debu"+e(438))[e(404)](e(394)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=qt,r=Kt();for(;;)try{if(496723===-parseInt(e(146))/1*(-parseInt(e(183))/2)+-parseInt(e(175))/3*(-parseInt(e(149))/4)+parseInt(e(178))/5+parseInt(e(182))/6+-parseInt(e(173))/7+-parseInt(e(185))/8*(-parseInt(e(156))/9)+-parseInt(e(162))/10*(parseInt(e(165))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vt(this,(function(){const n=qt,t=new RegExp(n(158)),e=new RegExp(n(154),"i"),r=Xt(n(152));t.test(r+n(169))&&e[n(147)](r+n(181))?Xt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=Kt();return(qt=function(n,t){return e[n-=143]})(n,t)}$t(void 0,(function(){const n=qt,t=function(){const n=qt;let t;try{t=Function(n(167)+n(176)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(155)]||{},r=[n(168),"warn",n(163),n(151),n(180),n(143),n(160)];for(let o=0;o<r.length;o++){const t=$t.constructor[n(177)][n(170)]($t),i=r[o],a=e[i]||t;t[n(157)]=$t.bind($t),t[n(145)]=a[n(145)][n(170)](a),e[i]=t}}))();const Yt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(174)],e[t(174)]),i=null),a&&(i=Zt({focus:s,size:c,samples:u}),o.value[t(161)]((n=>{const e=t;n instanceof l&&n[e(172)][e(153)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Xt(n){function t(n){const e=qt;if(typeof n===e(179))return function(n){}[e(144)](e(166))[e(150)](e(184));1!==(""+n/n).length||n%20==0?function(){return!0}[e(144)](e(148)+e(164))[e(159)](e(171)):function(){return!1}[e(144)]("debu"+e(164)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Kt(){const n=["__proto__","function *\\( *\\)","call","trace","traverse","10evSPry","info","gger","35237257VUkbbx","while (true) {}","return (function() ","log","chain","bind","action","material","1183021XtdiJJ","value","1047BgXsCx",'{}.constructor("return this")( )',"prototype","4839705sCIbjs","string","exception","input","5608656AKcHAU","1080582nlhcaZ","counter","12200htEfmU","table","constructor","toString","1RQowcL","test","debu","10280DILXZd","apply","error","init","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","3123qXMOxk"];return(Kt=function(){return n})()}const Jt=ne;!function(n,t){const e=ne,r=ee();for(;;)try{if(435061===parseInt(e(201))/1+-parseInt(e(202))/2+-parseInt(e(209))/3+-parseInt(e(181))/4*(-parseInt(e(182))/5)+-parseInt(e(194))/6+-parseInt(e(178))/7*(-parseInt(e(222))/8)+parseInt(e(197))/9*(parseInt(e(184))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(n,t){const e=ee();return(ne=function(n,t){return e[n-=178]})(n,t)}!function(){Qt(this,(function(){const n=ne,t=new RegExp(n(187)),e=new RegExp(n(204),"i"),r=ie(n(179));t[n(200)](r+n(198))&&e[n(200)](r+n(192))?ie():r("0")}))()}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(){const n=["while (true) {}","test","111093OeJSGl","1338788FJwEIn","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","debu","set","resolution","1406448Apkjvc","constructor","replace","setTexelSize","length","console","halfTexelSize","call","__proto__","gger","multiplyScalar","setResolution","kernel","49992cjZITA","apply","721MBAJBg","init","colorspace_fragment","12356mTxoLL","415SIRZTp","toString","10hfQOTs","copy","string","function *\\( *\\)",">\n        }","stateObject","info","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","input","uniforms","1908522YGfluc","toneMapped","table","7922079jdvGoD","chain"];return(ee=function(){return n})()}te(void 0,(function(){const n=ne,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(214)]||{},r=["log","warn",n(190),"error","exception",n(196),"trace"];for(let o=0;o<r[n(213)];o++){const t=te[n(210)].prototype[n(205)](te),i=r[o],a=e[i]||t;t[n(217)]=te.bind(te),t[n(183)]=a.toString.bind(a),e[i]=t}}))();const re=parseInt(F[Jt(211)](/\D+/g,""));class oe extends D{constructor(n=new O){const t=Jt;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(191)+(re>=154?t(180):"encodings_fragment")+t(188),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:C,depthWrite:!1,depthTest:!1}),this[t(195)]=!1,this[t(212)](n.x,n.y),this[t(221)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=Jt;this[e(193)].texelSize[e(203)][e(207)](n,t),this[e(193)][e(215)][e(203)].set(n,t)[e(219)](.5)}[Jt(220)](n){const t=Jt;this[t(193)][t(208)].value[t(185)](n)}}function ie(n){function t(n){const e=ne;if(typeof n===e(186))return function(n){}[e(210)](e(199))[e(223)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(210)](e(206)+e(218))[e(216)]("action"):function(){return!1}[e(210)](e(206)+"gger")[e(223)](e(189)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ce,r=ue();for(;;)try{if(792173===parseInt(e(514))/1+parseInt(e(535))/2+parseInt(e(543))/3+parseInt(e(536))/4*(-parseInt(e(557))/5)+parseInt(e(528))/6+-parseInt(e(554))/7*(-parseInt(e(537))/8)+-parseInt(e(505))/9*(parseInt(e(522))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(532)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ce(n,t){const e=ue();return(ce=function(n,t){return e[n-=500]})(n,t)}!function(){ae(this,(function(){const n=ce,t=new RegExp(n(559)),e=new RegExp(n(525),"i"),r=fe("init");t.test(r+n(519))&&e[n(552)](r+n(545))?fe():r("0")}))()}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ue(){const n=["maxDepthThreshold","kernel","setAttribute","64062VMmkgC","stateObject","depthTexture","length","uniforms","render","frustumCulled","clone","__proto__","912839PMdlEW","exception","inputBuffer","minDepthThreshold","depthBuffer","chain","table","convolutionMaterial","2950rshKlq","info","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","trace","1970892VKORUH","texture","value","renderTargetA","apply","scene","warn","2801296HATNau","44XBBbSr","16gCFCHd","console","bind","camera","setResolution","action","1147662haEvNx","constructor","input","prototype",'{}.constructor("return this")( )',"renderToScreen","toString","while (true) {}","add","test","screen","1100519ztLijb","gger","defines","203170ShECJf","error","function *\\( *\\)","setRenderTarget","setTexelSize"];return(ue=function(){return n})()}se(void 0,(function(){const n=ce,t=function(){const n=ce;let t;try{t=Function(n(526)+n(547)+");")()}catch(e){t=window}return t}(),e=t[n(538)]=t[n(538)]||{},r=["log",n(534),n(523),n(558),n(515),n(520),n(527)];for(let o=0;o<r[n(508)];o++){const t=se[n(544)][n(546)][n(539)](se),i=r[o],a=e[i]||t;t[n(513)]=se[n(539)](se),t[n(549)]=a.toString.bind(a),e[i]=t}}))();class le{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ce;this[c(548)]=!1,this[c(531)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA[c(512)](),this.convolutionMaterial=new oe,this[c(521)][c(501)](1/t,1/e),this[c(521)][c(541)](new O(t,e)),this[c(533)]=new u,this[c(540)]=new B,this[c(521)].uniforms[c(517)][c(530)]=r,this.convolutionMaterial[c(509)][c(502)][c(530)]=o,this[c(521)][c(509)].depthScale.value=i,this[c(521)].uniforms.depthToBlurRatioBias[c(530)]=a,this.convolutionMaterial[c(556)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(504)]("position",new j(s,3)),p[c(504)]("uv",new j(f,2)),this[c(553)]=new l(p,this.convolutionMaterial),this[c(553)][c(511)]=!1,this.scene[c(551)](this[c(553)])}render(n,t,e){const r=ce,o=this[r(533)],i=this[r(540)],a=this[r(531)],c=this.renderTargetB,s=this[r(521)],u=s[r(509)];u[r(518)][r(530)]=t[r(507)];const l=s[r(503)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(530)]=l[p],u[r(516)][r(530)]=h[r(529)],n[r(500)](f),n[r(510)](o,i),h=f;u[r(503)][r(530)]=l[p],u[r(516)][r(530)]=h[r(529)],n[r(500)](this[r(548)]?null:e),n[r(510)](o,i)}}function fe(n){function t(n){const e=ce;if("string"==typeof n)return function(n){}[e(544)](e(550))[e(532)]("counter");1!==(""+n/n)[e(508)]||n%20==0?function(){return!0}[e(544)](e(524)+e(555)).call(e(542)):function(){return!1}[e(544)](e(524)+e(555))[e(532)](e(506)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var pe=ve;!function(n,t){for(var e=ve,r=me();;)try{if(201785===-parseInt(e(272))/1+parseInt(e(239))/2+parseInt(e(214))/3*(parseInt(e(208))/4)+-parseInt(e(277))/5+parseInt(e(219))/6+parseInt(e(257))/7*(parseInt(e(210))/8)+-parseInt(e(241))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var de=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ve(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){de(this,(function(){var n=ve,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(247),"i"),r=_e(n(233));t[n(251)](r+n(250))&&e.test(r+n(273))?_e():r("0")}))()}();var he=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ve(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ve(n,t){var e=me();return(ve=function(n,t){return e[n-=204]})(n,t)}function me(){var n=["126lQhElN","length","value","_distortion","textureMatrix","USE_UV","mirror","_distortionMap","mixBlur",'{}.constructor("return this")( )',"\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_mixBlur","defines","tDiffuseBlur","fragmentShader","382911ygbQii","input","onBeforeCompile","apply","return (function() ","181140XmgkBC","maxDepthThreshold","debu","_minDepthThreshold","action","counter","38972UgRKWt","_mirror","79504FxtTdj","_blurStrength","_maxDepthThreshold","uniforms","33BuIkcy","table","_tDepth","hasBlur","warn","2028378gREPOC","tDiffuse","_hasBlur","mixContrast","string","_textureMatrix","_mixContrast","setValues","exception","_depthScale","call","stateObject","distortionMap","gger","init","minDepthThreshold","replace","_depthToBlurRatioBias","vertexShader","error","112674MNDoPO","bind","535797GfeYaT","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","_tDiffuseBlur","distortion","depthScale","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mixStrength","tDepth","chain","test","toString","depthToBlurRatioBias","_tDiffuse","constructor","#include <emissivemap_fragment>"];return(me=function(){return n})()}he(void 0,(function(){for(var n=ve,t=function(){var n,t=ve;try{n=Function(t(276)+t(266)+");")()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=["log",n(218),"info",n(238),n(227),n(215),"trace"],o=0;o<r.length;o++){var i=he[n(255)][n(246)][n(240)](he),a=r[o],c=e[a]||i;i.__proto__=he.bind(he),i[n(252)]=c[n(252)][n(240)](c),e[a]=i}}))();class ge extends U{constructor(n={}){var t=ve;super(n),this._tDepth={value:null},this[t(264)]={value:null},this[t(254)]={value:null},this[t(243)]={value:null},this[t(224)]={value:null},this[t(221)]={value:!1},this[t(209)]={value:0},this._mixBlur={value:0},this[t(211)]={value:.5},this[t(205)]={value:.9},this._maxDepthThreshold={value:1},this[t(228)]={value:0},this[t(236)]={value:.25},this[t(260)]={value:1},this[t(225)]={value:1},this[t(226)](n)}[pe(274)](n){var t,e=pe;!(null==(t=n[e(269)])?void 0:t[e(262)])&&(n[e(269)][e(262)]=""),n.uniforms[e(217)]=this._hasBlur,n[e(213)][e(220)]=this._tDiffuse,n[e(213)].tDepth=this[e(216)],n.uniforms.distortionMap=this._distortionMap,n[e(213)][e(270)]=this[e(243)],n[e(213)][e(261)]=this[e(224)],n[e(213)][e(263)]=this[e(209)],n[e(213)].mixBlur=this[e(268)],n[e(213)][e(248)]=this[e(211)],n[e(213)][e(234)]=this[e(205)],n[e(213)][e(278)]=this[e(212)],n.uniforms[e(245)]=this[e(228)],n[e(213)][e(253)]=this._depthToBlurRatioBias,n.uniforms[e(244)]=this[e(260)],n[e(213)][e(222)]=this[e(225)],n.vertexShader=e(267)+n[e(237)],n[e(237)]=n[e(237)][e(235)]("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader=e(242)+n[e(271)],n.fragmentShader=n[e(271)][e(235)](e(256),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[pe(220)](){var n=pe;return this[n(254)][n(259)]}set[pe(220)](n){this._tDiffuse.value=n}get tDepth(){var n=pe;return this[n(216)][n(259)]}set[pe(249)](n){var t=pe;this[t(216)][t(259)]=n}get distortionMap(){return this._distortionMap.value}set[pe(231)](n){var t=pe;this._distortionMap[t(259)]=n}get[pe(270)](){var n=pe;return this[n(243)][n(259)]}set[pe(270)](n){var t=pe;this[t(243)][t(259)]=n}get textureMatrix(){return this[pe(224)].value}set textureMatrix(n){this[pe(224)].value=n}get hasBlur(){var n=pe;return this[n(221)][n(259)]}set[pe(217)](n){var t=pe;this[t(221)][t(259)]=n}get[pe(263)](){var n=pe;return this[n(209)][n(259)]}set[pe(263)](n){this[pe(209)].value=n}get[pe(265)](){return this._mixBlur.value}set[pe(265)](n){this[pe(268)].value=n}get[pe(248)](){var n=pe;return this._blurStrength[n(259)]}set[pe(248)](n){var t=pe;this[t(211)][t(259)]=n}get[pe(234)](){return this[pe(205)].value}set minDepthThreshold(n){var t=pe;this[t(205)][t(259)]=n}get[pe(278)](){var n=pe;return this[n(212)][n(259)]}set[pe(278)](n){var t=pe;this[t(212)][t(259)]=n}get depthScale(){var n=pe;return this[n(228)][n(259)]}set[pe(245)](n){var t=pe;this._depthScale[t(259)]=n}get[pe(253)](){var n=pe;return this[n(236)][n(259)]}set[pe(253)](n){this[pe(236)].value=n}get[pe(244)](){var n=pe;return this[n(260)][n(259)]}set[pe(244)](n){var t=pe;this[t(260)][t(259)]=n}get[pe(222)](){var n=pe;return this[n(225)][n(259)]}set[pe(222)](n){var t=pe;this[t(225)][t(259)]=n}}function _e(n){function t(n){var e=ve;if(typeof n===e(223))return function(n){}[e(255)]("while (true) {}").apply(e(207));1!==(""+n/n)[e(258)]||n%20==0?function(){return!0}[e(255)](e(204)+"gger")[e(229)](e(206)):function(){return!1}[e(255)](e(204)+e(232))[e(275)](e(230)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ye=Se;!function(n,t){const e=Se,r=Ie();for(;;)try{if(268582===parseInt(e(189))/1+-parseInt(e(153))/2+parseInt(e(177))/3+parseInt(e(162))/4*(-parseInt(e(178))/5)+parseInt(e(187))/6+-parseInt(e(230))/7+parseInt(e(147))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(){const n=["rotationMatrix","updateMatrixWorld","3551877aVktkS","distortion","subVectors","value","defines-USE_DEPTH","index","input","multiplyScalar","depthTexture","far","prototype","debu","render","target","chain","action","__proto__","3018000kJroyO","sign","normal","multiply","constructor","distortionMap","342152ThFGAv","matrixWorld","warn","mix-strength","isMesh","setRenderTarget","set","TresMeshReflectorMaterial","traverse","4LInLyJ","copy","log","reflectorOffset","stateObject","function *\\( *\\)","gger","t-diffuse-blur","test","matrixWorldInverse",'{}.constructor("return this")( )',"textureMatrix","string","mix-contrast","enabled","691572SfbNTj","1196960KdCMgU","exception","cameraWorldPosition","length","virtualCamera","addScaledVector","defines-USE_BLUR","trace","shadowMap","2149320XlHrhz","setFromNormalAndCoplanarPoint","220467rRXmqp","init","constant","bind","max-depth-threshold","elements","applyMatrix4","projectionMatrix","apply","toString","material","depth-to-blur-ratio-bias","counter","dispose","dot","clipPlane","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","extractRotation","autoClear","has-blur","visible","error","setFromMatrixPosition","autoUpdate","reflectorPlane","defines-USE_DISTORTION","lookAtPosition","info","depth-scale","lookAt","reflect","view","negate","reflectorWorldPosition","add","return (function() ","call","texture"];return(Ie=function(){return n})()}!function(){xe(this,(function(){const n=Se,t=new RegExp(n(167)),e=new RegExp(n(205),"i"),r=Re(n(190));t[n(170)](r+n(144))&&e[n(170)](r+n(136))?Re():r("0")}))()}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();be(void 0,(function(){const n=Se;let t;try{t=Function(n(225)+n(172)+");")()}catch(o){t=window}const e=t[n(206)]=t.console||{},r=[n(164),n(155),n(217),n(211),n(179),"table",n(185)];for(let i=0;i<r[n(181)];i++){const t=be[n(151)][n(140)][n(192)](be),o=r[i],a=e[o]||t;t[n(146)]=be[n(192)](be),t.toString=a[n(198)][n(192)](a),e[o]=t}}))();const we=["texture-matrix","mirror","t-diffuse","t-depth",ye(169),ye(209),ye(156),"min-depth-threshold",ye(193),ye(218),ye(200),ye(131),ye(152),ye(175),ye(184),ye(134),ye(215)];function Se(n,t){const e=Ie();return(Se=function(n,t){return e[n-=131]})(n,t)}const Me=tn({__name:ye(135),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=ye,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:R,extend:A}=V();A({MeshReflectorMaterial:ge});const T=_n(),P=_n(),D=_n(),z=_n(),O=Q((()=>{const n=Se;return"number"==typeof f[n(133)]?[f.value,f[n(133)]]:f[n(133)]})),C=Q((()=>O[r(133)][0]>0||O[r(133)][1]>0)),F={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T[o(133)])||n[o(227)][o(202)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T.value=new I(i[o(133)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i.value,S,M)},t(y,e(x)))),P[o(133)]=new I(i[o(133)],i[o(133)],f),D[o(133)]=new le({resolution:i[o(133)],width:O[o(133)][0],height:O[o(133)][1],minDepthThreshold:a[o(133)],maxDepthThreshold:s[o(133)],depthScale:u.value,depthToBlurRatioBias:l.value}),z[o(133)]={mirror:p,textureMatrix:F[o(173)],mixBlur:d,tDiffuse:T.value[o(227)],tDepth:T[o(133)].depthTexture,tDiffuseBlur:T[o(133)][o(227)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(133)],mixContrast:_,"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":u[o(133)]>0?"":void 0,"defines-USE_DISTORTION":g[o(133)]?"":void 0}}));const B=_n(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(B[t(133)]&&R[t(133)]&&T[t(133)]&&y[t(133)]))return;const e=function(n,t){const e=Se;let r;return n[e(161)]((n=>{const o=e;n[o(157)]&&n[o(199)]&&n[o(199)].uuid===t&&(r=n)})),r}(x[t(133)],B[t(133)].uuid);if(!e)return;e[t(210)]=!1;const i=R[t(133)].xr.enabled,a=R.value[t(186)][t(213)];(function(n){var t,e;const r=Se;if(F[r(223)][r(212)](n[r(154)]),F.cameraWorldPosition[r(212)](null==(t=y[r(133)])?void 0:t[r(154)]),F[r(228)][r(207)](n[r(154)]),F[r(149)][r(159)](0,0,1),F.normal.applyMatrix4(F[r(228)]),F.reflectorWorldPosition[r(183)](F[r(149)],o[r(165)]),F[r(221)][r(132)](F[r(223)],F[r(180)]),F.view[r(203)](F.normal)>0)return;F[r(221)].reflect(F[r(149)])[r(222)](),F.view[r(224)](F.reflectorWorldPosition),F.rotationMatrix[r(207)](null==(e=y[r(133)])?void 0:e[r(154)]),F.lookAtPosition[r(159)](0,0,-1),F[r(216)][r(195)](F[r(228)]),F[r(216)][r(224)](F.cameraWorldPosition),F[r(143)][r(132)](F[r(223)],F.lookAtPosition),F[r(143)][r(220)](F[r(149)]).negate(),F.target[r(224)](F.reflectorWorldPosition),F.virtualCamera.position[r(163)](F[r(221)]),F[r(182)].up[r(159)](0,1,0),F.virtualCamera.up[r(195)](F[r(228)]),F[r(182)].up[r(220)](F[r(149)]),F[r(182)][r(219)](F[r(143)]),F[r(182)][r(139)]=(null==y?void 0:y.value).far,F[r(182)][r(229)](),F[r(182)][r(196)].copy((null==y?void 0:y.value).projectionMatrix),F[r(173)][r(159)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(150)](F.virtualCamera[r(196)]),F[r(173)].multiply(F[r(182)][r(171)]),F[r(173)].multiply(n[r(154)]),F[r(214)][r(188)](F[r(149)],F[r(223)]),F.reflectorPlane[r(195)](F[r(182)][r(171)]),F.clipPlane[r(159)](F.reflectorPlane[r(149)].x,F.reflectorPlane[r(149)].y,F[r(214)][r(149)].z,F[r(214)][r(191)]);const i=F[r(182)][r(196)];F.q.x=(Math[r(148)](F[r(204)].x)+i[r(194)][8])/i[r(194)][0],F.q.y=(Math[r(148)](F.clipPlane.y)+i[r(194)][9])/i[r(194)][5],F.q.z=-1,F.q.w=(1+i[r(194)][10])/i.elements[14],F[r(204)][r(137)](2/F.clipPlane.dot(F.q)),i.elements[2]=F[r(204)].x,i[r(194)][6]=F[r(204)].y,i.elements[10]=F[r(204)].z+1,i[r(194)][14]=F[r(204)].w})(e),R[t(133)].shadowMap[t(213)]=!1,R[t(133)][t(158)](T[t(133)]),R.value[t(208)]||R[t(133)].clear(),R[t(133)][t(142)](x.value,F[t(182)]),null==(n=null==D?void 0:D[t(133)])||n[t(142)](R[t(133)],T.value,P[t(133)]),R[t(133)].xr[t(176)]=i,R[t(133)].shadowMap[t(213)]=a,e[t(210)]=!0,R[t(133)][t(158)](null)}));const j=In(),U=Q((()=>{const n=r,t={};return Object.assign(t,o),Object.assign(t,j[n(133)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(133)])||n[e(202)](),null==(t=null==P?void 0:P.value)||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(160),bn({key:"key"+z[c(133)][c(184)]+z[c(133)][c(134)]+z[c(133)][c(215)],ref_key:"materialRef",ref:B},U[c(133)],{"texture-matrix":F[c(173)],mirror:nn(p),"t-diffuse":null==(e=T[c(133)])?void 0:e[c(227)],"t-depth":null==(o=T.value)?void 0:o[c(138)],"t-diffuse-blur":null==(i=P.value)?void 0:i[c(227)],"has-blur":C[c(133)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,we)}}});function Re(n){function t(n){const e=Se;if(typeof n===e(174))return function(n){}.constructor("while (true) {}")[e(197)](e(201));1!==(""+n/n)[e(181)]||n%20==0?function(){return!0}.constructor(e(141)+e(168))[e(226)](e(145)):function(){return!1}.constructor(e(141)+e(168)).apply(e(166)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ae(n,t){const e=Ee();return(Ae=function(n,t){return e[n-=492]})(n,t)}function Ee(){const n=["string","test","5064jnodzR","stateObject","dispose","exception","apply","error","bind","action","23YQUvfl","9074376asDhEm","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","length","background","counter","return (function() ","5047glzexh","warn","toString","trace","init","console","debu","info","fog","2663332dqQblX","__proto__","type",'{}.constructor("return this")( )',"63726XwQzkJ","2005690Rvocce","2120262QcMUfd","table","while (true) {}","update","gger","constructor","4931070DoIdcD"];return(Ee=function(){return n})()}!function(n,t){const e=Ae,r=Ee();for(;;)try{if(582204===-parseInt(e(527))/1*(parseInt(e(508))/2)+-parseInt(e(510))/3+-parseInt(e(504))/4+parseInt(e(509))/5+parseInt(e(516))/6+parseInt(e(495))/7*(parseInt(e(519))/8)+parseInt(e(528))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Ae,t=new RegExp(n(531)),e=new RegExp(n(530),"i"),r=De(n(499));t[n(518)](r+"chain")&&e.test(r+"input")?De():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(523)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(n){function t(n){const e=Ae;if(typeof n===e(517))return function(n){}[e(515)](e(512))[e(523)](e(493));1!==(""+n/n)[e(532)]||n%20==0?function(){return!0}[e(515)](e(501)+e(514)).call(e(526)):function(){return!1}[e(515)](e(501)+e(514))[e(523)](e(520)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=Ae;let t;try{t=Function(n(494)+n(507)+");")()}catch(o){t=window}const e=t[n(500)]=t[n(500)]||{},r=["log",n(496),n(502),n(524),n(522),n(511),n(498)];for(let i=0;i<r[n(532)];i++){const t=Pe.constructor.prototype.bind(Pe),o=r[i],a=e[o]||t;t[n(505)]=Pe.bind(Pe),t[n(497)]=a[n(497)][n(525)](a),e[o]=t}}))();const ze=Oe;function Oe(n,t){const e=Ce();return(Oe=function(n,t){return e[n-=304]})(n,t)}function Ce(){const n=["call","action","toString","2rkrHeA","apply","input","fog","console","3949194fAdPCl","1010365sXcWcG","envMap","9357678fJlwju","5legzOo","trace","log","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","$slots","object","chain","resolution","far","value","return (function() ","1935720Nrubtv","__proto__","near","counter","constructor","length","warn","info",'{}.constructor("return this")( )',"while (true) {}","index","primitive","113729MOjUir","stateObject","visible","517NnoRBc","32AMKCTY","bind","TresGroup","rgRef","test","string","default","703130jsjANn","texture","debu","1611213BWRiXH","frames","function *\\( *\\)"];return(Ce=function(){return n})()}!function(n,t){const e=Oe,r=Ce();for(;;)try{if(608252===-parseInt(e(308))/1+parseInt(e(355))/2*(-parseInt(e(349))/3)+parseInt(e(323))/4+-parseInt(e(311))/5*(parseInt(e(307))/6)+parseInt(e(335))/7*(parseInt(e(339))/8)+-parseInt(e(310))/9+-parseInt(e(346))/10*(-parseInt(e(338))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(356)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=Oe,t=new RegExp(n(351)),e=new RegExp(n(315),"i"),r=Ue("init");t[n(343)](r+n(318))&&e[n(343)](r+n(304))?Ue():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Be(void 0,(function(){const n=Oe;let t;try{t=Function(n(322)+n(331)+");")()}catch(o){t=window}const e=t[n(306)]=t[n(306)]||{},r=[n(313),n(329),n(330),"error","exception","table",n(312)];for(let i=0;i<r[n(328)];i++){const t=Be[n(327)][n(314)][n(340)](Be),o=r[i],a=e[o]||t;t[n(324)]=Be.bind(Be),t[n(354)]=a[n(354)][n(340)](a),e[o]=t}}))();const ke=[ze(317)],je=tn({__name:ze(333),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ze,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return J((()=>s),(n=>{var t;const e=Ae;null==(t=c[e(529)])||t[e(521)](),c[e(529)]=new v(n[e(529)]),c[e(529)].texture[e(506)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{e&&(f[Ae(529)]=new m(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Ae;null==(n=c.value)||n[t(521)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ae;p=a[t(529)][t(503)],d=a[t(529)][t(492)],a.value.background=r||d,a.value[t(503)]=o||p,null==(n=f[t(529)])||n[t(513)](i.value,a[t(529)]),a[t(529)][t(503)]=p,a[t(529)].background=d}}}({resolution:o[r(319)],near:o[r(325)],far:o[r(320)],envMap:o[r(309)],fog:o[r(305)]}),{onBeforeLoop:s}=q();let u=0;const l=K(null);return s((()=>{const n=r;l.value&&(o.frames===1/0||u<o[n(350)])&&(l.value[n(337)]=!1,c(),l[n(321)].visible=!0,u++)})),t({texture:null==(e=i[r(321)])?void 0:e[r(347)]}),(n,t)=>{const e=r;return an(),cn(e(341),null,[hn(e(334),{object:nn(a)},null,8,ke),hn(e(341),{ref_key:e(342),ref:l},[sn(n[e(316)],e(345))],512)])}}});function Ue(n){function t(n){const e=Oe;if(typeof n===e(344))return function(n){}.constructor(e(332))[e(356)](e(326));1!==(""+n/n)[e(328)]||n%20==0?function(){return!0}[e(327)](e(348)+"gger")[e(352)](e(353)):function(){return!1}[e(327)](e(348)+"gger")[e(356)](e(336)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ze,r=He();for(;;)try{if(410435===parseInt(e(486))/1*(-parseInt(e(501))/2)+parseInt(e(503))/3+parseInt(e(492))/4+-parseInt(e(483))/5*(parseInt(e(518))/6)+parseInt(e(528))/7*(parseInt(e(511))/8)+-parseInt(e(489))/9*(parseInt(e(488))/10)+parseInt(e(514))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ne(this,(function(){const n=Ze,t=new RegExp(n(508)),e=new RegExp(n(526),"i"),r=We(n(510));t[n(506)](r+n(524))&&e[n(506)](r+n(485))?We():r("0")}))()}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function He(){const n=["constructor","length","__proto__","chain","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","entries","1236291gJLEFw","apply","warn","3512845uhfJGO","prototype","input","2005iurnrO","MathUtils","70uJjpnF","662139uzteGM","toString","call","802100SoJTBi","ShaderMaterial","debu","value","reduce","clone","stateObject","table","exception","308FJvjaP",'{}.constructor("return this")( )',"64224EnsQRo","console","generateUUID","test","bind","function *\\( *\\)","uniforms","init","8lOoOij","key","action","16920475uFARIk","trace","log","forEach","6mazcuY","while (true) {}","return (function() "];return(He=function(){return n})()}function Ze(n,t){const e=He();return(Ze=function(n,t){return e[n-=481]})(n,t)}function Ge(n,t,e,r){const o=Ze,i=class extends P[o(493)]{constructor(i={}){const a=o,s=Object[a(527)](n);super({uniforms:s[a(496)](((n,[t,e])=>{const r=G[a(497)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(512)]="",s[a(517)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(509)][n][a(495)],set:t=>this.uniforms[n][a(495)]=t}))),Object.assign(this,i),r&&r(this)}};return i[o(512)]=P[o(487)][o(505)](),i}function We(n){function t(n){const e=Ze;if("string"==typeof n)return function(n){}[e(521)](e(519)).apply("counter");1!==(""+n/n)[e(522)]||n%20==0?function(){return!0}[e(521)](e(494)+"gger")[e(491)](e(513)):function(){return!1}[e(521)](e(494)+"gger")[e(481)](e(498)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Le(void 0,(function(){const n=Ze;let t;try{t=Function(n(520)+n(502)+");")()}catch(o){t=window}const e=t[n(504)]=t.console||{},r=[n(516),n(482),n(525),"error",n(500),n(499),n(515)];for(let i=0;i<r[n(522)];i++){const t=Le.constructor[n(484)][n(507)](Le),o=r[i],a=e[o]||t;t[n(523)]=Le.bind(Le),t[n(490)]=a[n(490)].bind(a),e[o]=t}}))();var Ve=cr;!function(n,t){for(var e=cr,r=tr();;)try{if(209786===-parseInt(e(328))/1*(-parseInt(e(341))/2)+-parseInt(e(283))/3+parseInt(e(380))/4+parseInt(e(383))/5*(-parseInt(e(284))/6)+-parseInt(e(431))/7*(-parseInt(e(397))/8)+-parseInt(e(238))/9*(parseInt(e(388))/10)+-parseInt(e(405))/11*(-parseInt(e(295))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var $e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[cr(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$e(this,(function(){var n=cr,t=new RegExp(n(312)),e=new RegExp(n(428),"i"),r=Er("init");t[n(391)](r+n(377))&&e[n(391)](r+n(313))?Er():r("0")}))()}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[cr(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n){var t=cr,e=function(n,t){var e=cr;if(typeof n!==e(310)||null===n)return n;var r=n[Symbol[e(417)]];if(void 0!==r){var o=r.call(n,t||e(386));if(typeof o!==e(310))return o;throw new TypeError(e(319))}return("string"===t?String:Number)(n)}(n,t(236));return typeof e===t(240)?e:String(e)}function Xe(n,t,e){var r=cr;return(t=Ye(t))in n?Object[r(286)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Ke(n,t){var e=cr,r=Object[e(365)](n);if(Object.getOwnPropertySymbols){var o=Object[e(345)](n);t&&(o=o[e(385)]((function(t){var r=e;return Object[r(270)](n,t)[r(275)]}))),r[e(253)].apply(r,o)}return r}function Je(n){for(var t=cr,e=1;e<arguments[t(342)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ke(Object(r),!0)[t(260)]((function(t){Xe(n,t,r[t])})):Object[t(353)]?Object[t(413)](n,Object[t(353)](r)):Ke(Object(r))[t(260)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(270)](r,e))}))}return n}function Qe(n,t){var e=cr;if(null==n)return{};var r,o,i=function(n,t){var e=cr;if(null==n)return{};var r,o,i={},a=Object[e(365)](n);for(o=0;o<a[e(342)];o++)r=a[o],t[e(290)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(345)](n);for(o=0;o<a[e(342)];o++)r=a[o],t[e(290)](r)>=0||Object[e(348)][e(349)].call(n,r)&&(i[r]=n[r])}return i}function nr(n,t){var e=cr;(null==t||t>n.length)&&(t=n[e(342)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function tr(){var n=["patchMap","action","indexOf","vertexShader","clearcoatNormal","_generateMaterial","silent","56640LmoigV","clearcoat","\n            \n            void main() {\n          ","Super expression must either be null or a function","instanceID","return (function() ","isArray","MeshLambertMaterial","_getCacheHash","name","csm_PositionRaw","isAlreadyExtended","undefined","update","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","object","function","function *\\( *\\)","input","get","csm_Emissive","MeshPhysicalMaterial","depthAlpha","this hasn't been initialised - super() hasn't been called","@@toPrimitive must return a primitive value.","writable","\n    gl_Position = ","while (true) {}","csm_Bump","constructor","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\\$&","csm_FragColor","2iAPYlo","MathUtils","csm_main_","@@iterator","\n    vec3 objectNormal = ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\n    \n","table","#define IS_","find","customProgramCacheKey","stateObject",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","364428MqqqJF","length","csm_Position","bind","getOwnPropertySymbols","diffuse","csm_PointSize","prototype","propertyIsEnumerable","MeshNormalMaterial","\n    \n            "," - (dot(","getOwnPropertyDescriptors",'{}.constructor("return this")( )',"MeshPhongMaterial","trim","split","is not a constructor","uniforms","MeshToonMaterial","done","Material","void main()","csm_Clearcoat","keys","from"," );\n    ","toUpperCase","\n            ","csm_Normal","position",";\n  ","iterator","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","roughness","create","chain","ShadowMaterial","error","660436UtvSIF","message","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","5KHKniW","MeshStandardMaterial","filter","default","includes","2061910qpUOjl","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","test","return","void ","metalness","assign","replace","29576jRbuOq","construct","csm_Roughness","cacheHash","RawShaderMaterial","MeshBasicMaterial",'" is required to use output "',"\n    gl_FragColor = ","1067duChzB",";\n    ","info","Set","setPrototypeOf","_getPatchMapForMaterial","toString","fragmentShader","defineProperties","onBeforeCompile","clearcoatRoughness"," is not available in ","toPrimitive","\n    vec4 csm_internal_positionUnprojected = ","value","__csm","normal","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","slice","apply","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n    vec3 transformed = ","Map","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","// #_CSM_#","csm_DiffuseColor","343dFbBYV","concat","exception","material.clearcoat = ","entries","substring","string","key","18gbZbkH","join","symbol","();\n              // #_CSM_#\n          ",". Shader cannot compile.","pointSize","lastIndexOf","material.clearcoatRoughness = ","MeshDepthMaterial","positionRaw","bump","sham","csm_ClearcoatNormal","__proto__","csm_Metalness","push","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","type","#define IS_VERTEX;\n","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","Object","Cannot call a class as a function","forEach","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n    vec3 totalEmissiveRadiance = ","cacheKey","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","getPrototypeOf",'CSM: Property "',"call","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","_patchShader","getOwnPropertyDescriptor","emissive","counter","CustomShaderMaterial does not support RawShaderMaterial","fragColor","enumerable","();\n            // #_CSM_#\n          ","console","_getMaterialDefine","Derived constructors may only return object or undefined","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","ShaderChunk","generateUUID","1071120TJOscb","1135932tfDAhB","void main() {","defineProperty",'". Shader cannot compile.'];return(tr=function(){return n})()}function er(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=cr,r=null==n?null:e(307)!=typeof Symbol&&n[Symbol[e(373)]]||n[e(331)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(267)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(267)](r))[e(361)])&&(s[e(253)](o.value),s[e(342)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(392)]&&(c=r[e(392)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=cr;if(n){if(typeof n===e(236))return nr(n,t);var r=Object[e(348)].toString[e(267)](n)[e(423)](8,-1);return r===e(258)&&n[e(324)]&&(r=n[e(324)][e(304)]),r===e(427)||r===e(408)?Array[e(366)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(391)](r)?nr(n,t):void 0}}(n,t)||function(){throw new TypeError(cr(425))}()}function rr(n,t){for(var e=cr,r=0;r<t[e(342)];r++){var o=t[r];o.enumerable=o[e(275)]||!1,o.configurable=!0,e(419)in o&&(o[e(320)]=!0),Object[e(286)](n,Ye(o[e(237)]),o)}}function or(n){if(void 0===n)throw new ReferenceError(cr(318));return n}function ir(n,t){var e=cr;return(ir=Object.setPrototypeOf?Object[e(409)][e(344)]():function(n,t){return n[e(251)]=t,n})(n,t)}function ar(n){var t=cr;return(ar=Object.setPrototypeOf?Object.getPrototypeOf[t(344)]():function(n){var e=t;return n[e(251)]||Object[e(265)](n)})(n)}function cr(n,t){var e=tr();return(cr=function(n,t){return e[n-=236]})(n,t)}function sr(n){var t=function(){var n=cr;if("undefined"==typeof Reflect||!Reflect[n(398)])return!1;if(Reflect[n(398)][n(249)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean[n(348)].valueOf[n(267)](Reflect[n(398)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=cr,o=ar(n);if(t){var i=ar(this)[r(324)];e=Reflect[r(398)](o,arguments,i)}else e=o[r(424)](this,arguments);return function(n,t){var e=cr;if(t&&(typeof t===e(310)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(279));return or(n)}(this,e)}}qe(void 0,(function(){var n,t=cr;try{n=Function(t(300)+t(354)+");")()}catch(s){n=window}for(var e=n[t(277)]=n[t(277)]||{},r=["log","warn",t(407),t(379),t(433),t(335),"trace"],o=0;o<r[t(342)];o++){var i=qe[t(324)][t(348)][t(344)](qe),a=r[o],c=e[a]||i;i[t(251)]=qe[t(344)](qe),i[t(411)]=c[t(411)][t(344)](c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:Ve(430),normal:Ve(370),roughness:Ve(399),metalness:Ve(252),emissive:Ve(315),ao:"csm_AO",bump:Ve(323),clearcoat:Ve(364),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Ve(250),pointSize:Ve(347),fragColor:Ve(327),depthAlpha:"csm_DepthAlpha",position:Ve(343),positionRaw:Ve(305)},dr=(Xe(ur={},""[Ve(432)](pr[Ve(371)]),"*"),Xe(ur,""[Ve(432)](pr[Ve(247)]),"*"),Xe(ur,""[Ve(432)](pr[Ve(421)]),"*"),Xe(ur,""[Ve(432)](pr[Ve(243)]),["PointsMaterial"]),Xe(ur,""[Ve(432)](pr.diffuse),"*"),Xe(ur,"".concat(pr[Ve(274)]),"*"),Xe(ur,""[Ve(432)](pr.emissive),[Ve(384),Ve(316)]),Xe(ur,"".concat(pr.roughness),[Ve(384),Ve(316)]),Xe(ur,""[Ve(432)](pr[Ve(394)]),[Ve(384),Ve(316)]),Xe(ur,""[Ve(432)](pr.ao),["MeshStandardMaterial",Ve(316),Ve(402),Ve(302),Ve(355),Ve(360)]),Xe(ur,""[Ve(432)](pr[Ve(248)]),[Ve(302),"MeshMatcapMaterial",Ve(350),Ve(355),Ve(316),Ve(384),Ve(360),Ve(378)]),Xe(ur,""[Ve(432)](pr[Ve(317)]),[Ve(246)]),Xe(ur,"".concat(pr[Ve(296)]),["MeshPhysicalMaterial"]),Xe(ur,""[Ve(432)](pr.clearcoatRoughness),[Ve(316)]),Xe(ur,""[Ve(432)](pr[Ve(292)]),["MeshPhysicalMaterial"]),ur),hr={"#include <lights_physical_fragment>":P[Ve(281)].lights_physical_fragment},vr=(Xe(lr={},""[Ve(432)](pr[Ve(421)]),{"#include <beginnormal_vertex>":Ve(332).concat(pr[Ve(421)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Xe(lr,""[Ve(432)](pr[Ve(371)]),{"#include <begin_vertex>":Ve(426)[Ve(432)](pr[Ve(371)],Ve(372))}),Xe(lr,""[Ve(432)](pr[Ve(247)]),{"#include <begin_vertex>":Ve(418)[Ve(432)](pr[Ve(247)],Ve(340))}),Xe(lr,""[Ve(432)](pr[Ve(243)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Ve(432)](pr[Ve(243)],Ve(406))}),Xe(lr,""[Ve(432)](pr[Ve(346)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(pr[Ve(346)],Ve(372))}),Xe(lr,"".concat(pr.fragColor),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[Ve(432)](pr[Ve(274)],";\n  ")}),Xe(lr,""[Ve(432)](pr[Ve(271)]),{"vec3 totalEmissiveRadiance = emissive;":Ve(262)[Ve(432)](pr[Ve(271)],Ve(406))}),Xe(lr,""[Ve(432)](pr[Ve(375)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = ".concat(pr.roughness,Ve(406))}),Xe(lr,"".concat(pr[Ve(394)]),{"#include <metalnessmap_fragment>":Ve(422)[Ve(432)](pr.metalness,Ve(406))}),Xe(lr,""[Ve(432)](pr.ao),{"#include <aomap_fragment>":Ve(382)[Ve(432)](pr.ao,Ve(406))}),Xe(lr,"".concat(pr.bump),{"#include <normal_fragment_maps>":Ve(309)[Ve(432)](pr[Ve(248)],Ve(352))[Ve(432)](pr[Ve(248)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),Xe(lr,""[Ve(432)](pr[Ve(317)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ve(333)[Ve(432)](pr[Ve(317)],Ve(367)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ve(268)[Ve(432)](pr[Ve(317)],Ve(406))}),Xe(lr,"".concat(pr[Ve(296)]),{"material.clearcoat = clearcoat;":Ve(434)[Ve(432)](pr.clearcoat,";")}),Xe(lr,""[Ve(432)](pr[Ve(415)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ve(245)[Ve(432)](pr[Ve(415)],";")}),Xe(lr,""[Ve(432)](pr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Ve(390)}),lr),mr=(Xe(fr={},""[Ve(432)](pr[Ve(371)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ve(374)[Ve(432)](pr[Ve(371)],", 1.0 );\n  ")}),Xe(fr,""[Ve(432)](pr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ve(321).concat(pr[Ve(371)],Ve(372))}),Xe(fr,""[Ve(432)](pr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ve(404)[Ve(432)](pr[Ve(346)],Ve(372))}),Xe(fr,""[Ve(432)](pr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ve(404)[Ve(432)](pr[Ve(274)],Ve(372))}),fr),gr={clearcoat:[pr[Ve(296)],pr[Ve(292)],pr.clearcoatRoughness]},_r=Ve(254),yr=Ve(280),xr=Ve(389),Ir=Ve(334),br=["baseMaterial",Ve(412),"vertexShader","uniforms",Ve(288),Ve(263),Ve(294)],wr=function(n,t,e){var r=Ve;return n[r(357)](t)[r(239)](e)},Sr=function(n,t){return new RegExp("\\b".concat((e=t,r=Ve,e[r(396)](/[-\/\\^$*+?.()|[\]{}]/g,r(326))),"\\b")).test(n);var e,r};function Mr(n){return n?n[Ve(396)](/\s/g,""):void 0}function Rr(n){return n[Ve(396)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Ar=function(n){var t=Ve;!function(n,t){var e=cr;if("function"!=typeof t&&null!==t)throw new TypeError(e(298));n[e(348)]=Object[e(376)](t&&t[e(348)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(286)](n,e(348),{writable:!1}),t&&ir(n,t)}(c,n);var e,r,o,i,a=sr(c);function c(n){var t,e,r,o,i,s=cr,u=n.baseMaterial,l=n[s(412)],f=n[s(291)],p=n.uniforms,d=n[s(288)],h=n.cacheKey,v=n.silent,m=Qe(n,br);if(function(n,t){if(!(n instanceof t))throw new TypeError(cr(259))}(this,c),!function(n){var t=Ve;try{new n}catch(e){if(e[t(381)][t(290)](t(358))>=0)return!1}return!0}(u)?(e=u,Object[s(395)](e,m)):e=new u(m),e.type===s(401))throw new Error(s(273));(function(n,t){var e=Ve;e(342),Object[e(395)](n,t);var r=Object.getPrototypeOf(t);Object.entries(Object[e(353)](r))[e(385)]((function(n){var t=e,r=typeof n[1][t(314)]===t(311),o=typeof n[1].set===t(311),i=typeof n[1][t(419)]===t(311),a="constructor"===n[0];return(r||o||i)&&!a}))[e(260)]((function(t){var r=e;typeof n[t[0]]!==r(311)&&Object[r(286)](n,t[0],t[1])}))})(or(t=a[s(267)](this)),e),t[s(420)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:P[s(329)][s(282)](),type:e[s(255)],isAlreadyExtended:(r=e[s(414)],o=Ve,i=r[o(411)]()[o(356)](),!(0===i[o(436)](i[o(290)]("{")+1,i[o(244)]("}"))[o(356)]()[o(342)])),cacheHash:"",silent:v},t[s(359)]=Je(Je({},t[s(359)]||{}),p||{});var g=t.__csm,_=g[s(412)],y=g[s(291)],x=t[s(359)];return t.__csm[s(400)]=t[s(303)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(308),value:function(){var n=t,e=arguments[n(342)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(359)]=e[n(359)]||this.uniforms,Object.assign(this[n(420)],e);var r=this[n(420)],o=r.fragmentShader,i=r[n(291)],a=this[n(359)],c=this[n(303)]();this[n(420)][n(400)]=c,this._generateMaterial(o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(420)].baseMaterial,fragmentShader:this.__csm[n(412)],vertexShader:this.__csm[n(291)],uniforms:this[n(359)],silent:this.__csm[n(294)],patchMap:this.__csm[n(288)],cacheKey:this[n(420)][n(263)]},r=new this.constructor(e);return Object[n(395)](this,r),r}},{key:t(303),value:function(){var n=t,e=this[n(420)],r=e[n(412)],o=e[n(291)],i=this[n(359)],a=[Mr(r),Mr(o),i].filter((function(n){return void 0!==n}));return a[n(342)]>0?Rn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(293),value:function(n,e,r){var o=t,i=this;this[o(359)]=r||{},this[o(338)]=function(){var n=o;return i[n(420)][n(400)]};var a=function(t){var r=o;try{var a=i[r(278)]();if(n){var c=i._patchShader(Rr(n),t[r(412)],!0);t[r(412)]=a+c}if(e){var s=i[r(269)](Rr(e),t[r(291)]);t[r(291)]=r(256)+s,t[r(291)]=a+t[r(291)]}t[r(359)]=Je(Je({},t.uniforms),i.uniforms),i[r(359)]=t[r(359)]}catch(u){console[r(379)](u)}};if(this[o(420)][o(306)]){var c=this.onBeforeCompile;this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this.needsUpdate=!0}},{key:t(269),value:function(n,e,r){var o=t,i=this,a=e,c=Je(Je({},this[o(410)]()),this[o(420)].patchMap);Object[o(435)](gr)[o(260)]((function(t){var e=o,r=er(t,2),a=r[0],c=r[1][e(337)]((function(t){return Sr(n,t)}));if(c&&!i[a])throw new Error(e(266)[e(432)](a,e(403))[e(432)](c,e(287)))})),Object.entries(hr)[o(260)]((function(n){var t=er(n,2),e=t[0],r=t[1];a=wr(a,e,r)})),Object.keys(c)[o(260)]((function(t){var e=o;Object[e(365)](c[t])[e(260)]((function(r){var o=e,s=dr[t],u=i[o(420)].type;if("*"===t||Sr(n,t)){if(!(!s||Array[o(301)](s)&&s.includes(u)||"*"===s))throw new Error("CSM: "[o(432)](t,o(416))[o(432)](u,o(242)));a=wr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(330)+this[o(420)][o(299)][o(396)](/-/g,"_"),h=n[o(396)](/void\s+main\s*\(\s*\)/g,o(393)[o(432)](d,"()")),v=n.includes(o(363)),m=a[o(387)](o(429));return v&&(m&&this[o(420)][o(306)]?(a=a[o(396)](o(285),"\n            "[o(432)](h,o(297))),s=a,u="// #_CSM_#",l=o(369)[o(432)](d,o(276)),p=s[(f=Ve)(244)](u),a=-1===p?s:s[f(436)](0,p)+l+s[f(436)](p+u[f(342)])):a=a.replace(o(285),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?xr:"\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(257))[o(432)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(351)).concat(h,o(264))[o(432)](_r,o(325))[o(432)](r?Ir:yr,o(261)).concat(d,o(241)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(420)][n(255)];return e?n(336)[n(432)](e[n(368)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(410),value:function(){var n=t;return"ShaderMaterial"===this[n(420)][n(255)]?mr:vr}}],i=cr,r&&rr(e[i(348)],r),o&&rr(e,o),Object[i(286)](e,i(348),{writable:!1}),c}(P[Ve(362)]);function Er(n){function t(n){var e=cr;if(typeof n===e(236))return function(n){}.constructor(e(322))[e(424)](e(272));1!==(""+n/n)[e(342)]||n%20==0?function(){return!0}.constructor("debugger")[e(267)](e(289)):function(){return!1}[e(324)]("debugger")[e(424)](e(339)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tr=Or;function Pr(){const n=["clearcoatRoughness","console","\n      ","action","warn","setStyle","log","4785cjvQHs","counter","71uJFKIa","#ff00fc","__proto__","260qgyPKP","return (function() ","35135afBZLa","236719UNpapq","31498dsuiuu","toString","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","chain","length","exception","626823tgynVa","trace","roughness","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","prototype","1118448yGOrjP","color","info","bind","test","while (true) {}","call","clearcoat","10614528hZjnbg","init","index","stateObject","primitive","184QcoyOG","constructor","4iViyhH","metalness"];return(Pr=function(){return n})()}!function(n,t){const e=Or,r=Pr();for(;;)try{if(865820===-parseInt(e(328))/1*(parseInt(e(335))/2)+parseInt(e(295))/3+-parseInt(e(317))/4*(parseInt(e(333))/5)+-parseInt(e(302))/6+parseInt(e(334))/7*(parseInt(e(315))/8)+parseInt(e(310))/9+-parseInt(e(331))/10*(-parseInt(e(326))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Dr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dr(this,(function(){const n=Or,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(299),"i"),r=Br(n(311));t.test(r+n(292))&&e[n(306)](r+"input")?Br():r("0")}))()}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(n,t){const e=Pr();return(Or=function(n,t){return e[n-=290]})(n,t)}zr(void 0,(function(){const n=Or;let t;try{t=Function(n(332)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(320)]||{},r=[n(325),n(323),n(304),"error",n(294),"table",n(296)];for(let i=0;i<r[n(293)];i++){const t=zr[n(316)][n(301)][n(305)](zr),o=r[i],a=e[o]||t;t[n(330)]=zr[n(305)](zr),t[n(290)]=a[n(290)][n(305)](a),e[o]=t}}))();const Cr=["object"],Fr=tn({__name:Tr(312),props:{color:{default:Tr(329)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Tr,e=n,r={baseMaterial:W,metalness:e.metalness,roughness:e.roughness,clearcoat:e[t(309)],clearcoatRoughness:e[t(319)],color:e.color,vertexShader:t(291),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(321)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Ar(r);return fn((()=>{const n=t;o[n(303)][n(324)](e[n(303)]),o[n(318)]=e.metalness,o[n(297)]=e[n(297)],o[n(309)]=e[n(309)],o.clearcoatRoughness=e[n(319)]})),(n,e)=>{const r=t;return an(),cn(r(314),{object:nn(o)},null,8,Cr)}}});function Br(n){function t(n){const e=Or;if("string"==typeof n)return function(n){}.constructor(e(307))[e(298)](e(327));1!==(""+n/n).length||n%20==0?function(){return!0}[e(316)](e(300)+"gger")[e(308)](e(322)):function(){return!1}[e(316)](e(300)+"gger")[e(298)](e(313)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Ur,r=Nr();;)try{if(437392===parseInt(e(508))/1+parseInt(e(495))/2*(parseInt(e(510))/3)+-parseInt(e(497))/4+-parseInt(e(503))/5*(parseInt(e(500))/6)+-parseInt(e(496))/7+-parseInt(e(490))/8*(parseInt(e(514))/9)+parseInt(e(502))/10*(parseInt(e(494))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var kr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ur(504)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){var n=Ur,t=new RegExp(n(479)),e=new RegExp(n(493),"i"),r=Lr(n(476));t[n(492)](r+"chain")&&e.test(r+n(498))?Lr():r("0")}))()}();var jr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ur(504)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ur(n,t){var e=Nr();return(Ur=function(n,t){return e[n-=476]})(n,t)}function Nr(){var n=["4028290gvrOWb","617240rWoXol","input","gger","110118YsAUGR","counter","10BmpviZ","125RRXqLF","apply","length","error","log","398725vWIAbJ","while (true) {}","6xkziHX","warn","call","trace","9qhUegR","init",'{}.constructor("return this")( )',"table","function *\\( *\\)","toString","action","__proto__","return (function() ","string","exception","bind","constructor","debu","info","324112dBMWWV","console","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","13562098TlNDnO","34868zAAYRD"];return(Nr=function(){return n})()}function Lr(n){function t(n){var e=Ur;if(typeof n===e(484))return function(n){}[e(487)](e(509))[e(504)](e(501));1!==(""+n/n).length||n%20==0?function(){return!0}[e(487)](e(488)+"gger")[e(512)](e(481)):function(){return!1}.constructor(e(488)+e(499))[e(504)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}jr(void 0,(function(){for(var n=Ur,t=function(){var n,t=Ur;try{n=Function(t(483)+t(477)+");")()}catch(e){n=window}return n}(),e=t[n(491)]=t[n(491)]||{},r=[n(507),n(511),n(489),n(506),n(485),n(478),n(513)],o=0;o<r[n(505)];o++){var i=jr[n(487)].prototype[n(486)](jr),a=r[o],c=e[a]||i;i[n(482)]=jr[n(486)](jr),i[n(480)]=c[n(480)][n(486)](c),e[a]=i}}))();export{Ge as C,Fr as _,Jn as a,ut as b,wt as c,Tt as d,kt as e,Yt as f,je as g,Me as h,vt as u};

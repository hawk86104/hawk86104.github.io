import{e,b as a}from"./@tresjs.Fe0mFN5V1748945481918.js";import{ae as s,V as r,cC as o,C as t,a4 as l}from"./three.Bg9S6UMF1748945481918.js";import{l as n}from"./utils.Dk0POMUx1748945481918.js";import{d as p,b as f,a5 as i,a2 as u,G as d,o as m,F as c,W as g,I as h,u as w}from"./@vue.C_fjx3FT1748945481918.js";const j={renderOrder:3e3},y=["args"],T=["map","side","color"],_=p({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(p){let _,b;const v=p,M=f(),C=f(),{map:G}=([_,b]=i((()=>a({map:"./plugins/digitalCity/image/line.png"}))),_=await _,b(),_);G.needsUpdate=!0,G.wrapS=G.wrapT=s,G.repeat.set(1,1);const k=([_,b]=i((()=>n(v.geoJson))),_=await _,b(),_),x=[-31.258949,0,-121.465782];let J=[];for(var L=0;L<k.length;L++){const e=k[L],a=[];e.geometry.coordinates.forEach((e=>{a.push(new r(6e4*(e[1]+x[0]),x[1],6e4*(e[0]+x[2])))})),J.push(new o(a))}u((()=>{v.color&&C.value&&(C.value.color=new t(v.color))}));const{onLoop:R}=e();return R((({delta:e})=>{G.offset.x-=Math.random()/20*v.speed})),(e,a)=>(m(),d("TresGroup",{ref_key:"tgRef",ref:M},[(m(!0),d(c,null,g(w(J),(e=>(m(),d("TresMesh",j,[h("TresTubeGeometry",{args:[e,64,v.radius,20,!1]},null,8,y),h("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:C,map:w(G),side:w(l),transparent:!0,color:v.color},null,8,T)])))),256))],512))}});export{_};

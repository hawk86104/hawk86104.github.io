import{_ as t}from"./three.6w8Allze1738810638719.js";import{e,h as n,o as r,f as o}from"./@tresjs.8axf5yqM1738810638719.js";import{a as s}from"./index.HkkGeLOW1738810638719.js";import"./index.OEsm1E5I1738810638719.js";import{z as a}from"./three-custom-shader-material.srZQa-4o1738810638719.js";import{p as i}from"./gl-noise.BrVtymbx1738810638719.js";import{d as l,b as u,a2 as c,w as p,o as f,H as g,N as h,j as m,u as v,r as d,f as _,g as b,aj as w,ak as j,m as y,al as x}from"./@vue.NRI7TcgI1738810638719.js";import{P as M}from"./tweakpane.yDiyAAkA1738810638719.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.I7LmzNsd1738810638719.js";import"./@vueuse.hJpps2zM1738810638719.js";import"./three-stdlib.LzGCk-lJ1738810638719.js";import"./@pmndrs.lrUatEzS1738810638719.js";import"./object-hash.IcDxbfA01738810638719.js";import"./@amap.OmDF_WNh1738810638719.js";import"./jszip.DL2I3nsH1738810638719.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.1jvi1Jnm1738810638719.js";import"./all.three.uBsuzgl_1738810638719.js";import"./oimophysics.x0jH7fze1738810638719.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ULtosTB91738810638719.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ndDRfzJW1738810638719.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.vXWLupKq1738810638719.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.whC-8BEM1738810638719.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.4eLhixsp1738810638719.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.UQoVQE_H1738810638719.js";const C=T;!function(t,e){const n=T,r=S();for(;;)try{if(954104===parseInt(n(429))/1+-parseInt(n(423))/2+-parseInt(n(391))/3*(-parseInt(n(396))/4)+parseInt(n(409))/5+-parseInt(n(421))/6+parseInt(n(412))/7+-parseInt(n(434))/8*(parseInt(n(402))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(405)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function S(){const t=["3184727KGHFOo","warn","waterColor","init","needsUpdate","flatShading","console","__proto__","TresBoxGeometry","6283902eozUmh","chain","1957024nuTjti","bind","material","prototype","brightness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1181795hEiBgh","test","call","input","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","912crvBXe","length","#52a7f7","uTime","DoubleSide","string","Flatshading","dispose","gger","vertex","waterHighlight","customWaterMesh","args","log","TresMesh","height","MeshPhysicalMaterial",'{}.constructor("return this")( )',"trace","vertexShader","747ravWbq","while (true) {}","baseMaterial","tmRef","convertLinearToSRGB","16316BkvndU","counter","function *\\( *\\)","constructor","error","Color","82035tvywVX","debu","#b3ffff","apply","value","toString","rotation-x","6833080KejHYU","table","stateObject"];return(S=function(){return t})()}function T(t,e){const n=S();return(T=function(t,e){return n[t-=377]})(t,e)}!function(){I(this,(function(){const t=T,e=new RegExp(t(398)),n=new RegExp(t(428),"i"),r=O(t(415));e[t(430)](r+t(422))&&n[t(430)](r+t(432))?O():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(405)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=T,e=function(){const t=T;let e;try{e=Function("return (function() "+t(388)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(418)]||{},r=[t(384),t(413),"info",t(400),"exception",t(410),t(389)];for(let o=0;o<r[t(435)];o++){const e=H[t(399)][t(426)][t(424)](H),s=r[o],a=n[s]||e;e[t(419)]=H[t(424)](H),e[t(407)]=a[t(407)][t(424)](a),n[s]=e}}))();const B=[C(408)],F=[C(383)],G=l({__name:C(382),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:C(436)},waterHighlight:{default:C(404)},brightness:{default:1},baseMaterial:{default:t[C(387)]}},setup(r){const o=C,s=r,l=u(null),d={vertex:o(433),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},_={uTime:{value:0},waterColor:{value:new(t[o(401)])(s.waterColor)[o(395)]()},waterHighlight:{value:new(t[o(401)])(s[o(381)])[o(395)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[o(427)]},uHeight:{value:s[o(386)]}},{onLoop:b}=e();return b((({elapsed:t})=>{_[o(437)].value=-t/5})),c((()=>{const e=o;s.height&&(_.uHeight[e(406)]=s[e(386)]),s[e(414)]&&(_[e(414)][e(406)]=new(t[e(401)])(s[e(414)])[e(395)]()),s[e(381)]&&(_.waterHighlight[e(406)]=new(t[e(401)])(s[e(381)])[e(395)]()),s[e(427)]&&(_[e(427)][e(406)]=s[e(427)])})),p((()=>s[o(377)]),(t=>{const e=o;l[e(406)][e(425)][e(416)]=!0})),p((()=>s[o(393)]),(e=>{const n=o,r=new a({baseMaterial:t[e],vertexShader:i(d[n(380)]),fragmentShader:d.fragment,uniforms:_,flatShading:s[n(377)],side:t[n(438)],roughness:.2,metalness:.1,silent:!0});l[n(406)][n(425)][n(378)](),l[n(406)][n(425)]=r})),(e,r)=>{const s=o;return f(),g(s(385),{ref_key:s(394),ref:l,"rotation-x":-Math.PI/2},[h(s(420),{args:[5,5,e[s(386)],64,64,1]},null,8,F),m(v(n),{baseMaterial:t[s(387)],vertexShader:v(i)(d.vertex),fragmentShader:d.fragment,uniforms:_,side:t[s(438)],roughness:.2,metalness:.1,flatShading:e[s(377)],silent:""},null,8,[s(393),s(390),"fragmentShader","side",s(417)])],8,B)}}});function O(t){function e(t){const n=T;if(typeof t===n(439))return function(t){}[n(399)](n(392))[n(405)](n(397));1!==(""+t/t).length||t%20==0?function(){return!0}[n(399)]("debu"+n(379))[n(431)]("action"):function(){return!1}[n(399)](n(403)+n(379))[n(405)](n(411)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=A;!function(t,e){const n=A,r=k();for(;;)try{if(813335===-parseInt(n(456))/1*(-parseInt(n(473))/2)+-parseInt(n(458))/3*(-parseInt(n(503))/4)+parseInt(n(483))/5*(-parseInt(n(472))/6)+parseInt(n(494))/7*(parseInt(n(478))/8)+-parseInt(n(487))/9+-parseInt(n(471))/10*(parseInt(n(459))/11)+parseInt(n(491))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(501)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){P(this,(function(){const t=A,e=new RegExp(t(461)),n=new RegExp(t(506),"i"),r=L(t(460));e.test(r+"chain")&&n[t(502)](r+t(482))?L():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(501)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(){const t=["34120992tddkUs","prototype","TresPerspectiveCamera","9442979QSIhNV","constructor","#52a7f7","counter","gger","neg-x.jpg","pos-y.jpg","apply","test","69756sSlLWZ",'{}.constructor("return this")( )',"TresDirectionalLight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshPhongMaterial","Flatshading","stateObject","label","baseMaterial","call","debu","while (true) {}","console","customWater","waterHighlight","水体颜色","warn","return (function() ","MeshBasicMaterial","MeshPhysicalMaterial","MeshNormalMaterial","#627179","TresAmbientLight","change","table","543075eQoIpS","#b3ffff","15FoFLmq","11421751BubHNl","init","function *\\( *\\)","neg-z.jpg","MeshToonMaterial","MeshLambertMaterial","addBlade","waterColor","bind","string","__proto__","error","10cfzovh","2695542QUPdEF","2MqVliQ","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","ACESFilmicToneMapping","neg-y.jpg","length","8KdgBcV","pos-z.jpg","trace","MeshStandardMaterial","input","15mnunBN","#3a78a2","addBinding","toString","14609124dUCOdh","target","MeshDepthMaterial","exception"];return(k=function(){return t})()}N(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(448)+t(504)+");")()}catch(n){e=window}return e}(),n=e[t(443)]=e[t(443)]||{},r=["log",t(447),"info",t(470),t(490),t(455),t(480)];for(let o=0;o<r.length;o++){const e=N[t(495)][t(492)][t(467)](N),s=r[o],a=n[s]||e;e[t(469)]=N[t(467)](N),e[t(486)]=a[t(486)][t(467)](a),n[s]=e}}))();const D=l({__name:W(444),setup(e){const n=W,a=d({alpha:!0,toneMapping:t[n(475)],windowSize:!0,clearColor:10066329}),i=d({enableDamping:!0,autoRotate:!1}),l=d({cellSize:.6,cellThickness:1.1,cellColor:n(452),sectionColor:n(484),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=d({height:.2,Flatshading:!1,waterColor:n(496),waterHighlight:n(457),brightness:1,baseMaterial:n(450)}),c=new M;return c[n(485)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(485)](u,n(466),{label:n(446)}),c[n(485)](u,n(445),{label:"浪头颜色"}),c[n(485)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c[n(485)](u,n(508),{label:n(508)}),c[n(465)]({view:"list",label:"材质",options:[{text:n(450),value:n(450)},{text:n(449),value:n(449)},{text:n(451),value:n(451)},{text:n(481),value:n(481)},{text:"MeshPhongMaterial",value:n(507)},{text:n(463),value:n(463)},{text:n(464),value:n(464)},{text:n(489),value:n(489)}],value:u[n(511)]}),c.on(n(454),(t=>{const e=n;"材质"===t[e(488)][e(510)]&&(u[e(511)]=t.value)})),(t,e)=>{const c=n;return f(),_(v(o),y(a,{"window-size":""}),{default:b((()=>[e[0]||(e[0]=h(c(493),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),m(v(r),w(j(i)),null,16),e[1]||(e[1]=h(c(453),{intensity:.5},null,-1)),e[2]||(e[2]=h(c(505),{position:[15,15,15],intensity:1},null,-1)),m(G,w(j(u)),null,16),m(v(z),y({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(f(),_(x,null,{default:b((()=>[m(v(s),{files:["pos-x.jpg",c(499),c(500),c(476),c(479),c(462)],path:c(474)})])),_:1}))])),_:1},16)}}});function A(t,e){const n=k();return(A=function(t,e){return n[t-=443]})(t,e)}function L(t){function e(t){const n=A;if(typeof t===n(468))return function(t){}[n(495)](n(514))[n(501)](n(497));1!==(""+t/t)[n(477)]||t%20==0?function(){return!0}.constructor("debu"+n(498))[n(512)]("action"):function(){return!1}.constructor(n(513)+n(498))[n(501)](n(509)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{D as default};

const A1=Math.sqrt(3),G1=Math.sqrt(5),S1=.5*(A1-1),I=(3-A1)/6,h1=(G1-1)/4,e=(5-G1)/20,T=F=>Math.floor(F)|0,z1=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),J=new Float64Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function M1(F=Math.random){const t=b1(F),c=new Float64Array(t).map(i=>z1[i%12*2]),n=new Float64Array(t).map(i=>z1[i%12*2+1]);return function(g,f){let A=0,G=0,b=0;const S=(g+f)*S1,j=T(g+S),k=T(f+S),h=(j+k)*I,q=j-h,N=k-h,p=g-q,w=f-N;let u,x;p>w?(u=1,x=0):(u=0,x=1);const z=p-u+I,d=w-x+I,Q=p-1+2*I,R=w-1+2*I,X=j&255,Y=k&255;let r=.5-p*p-w*w;if(r>=0){const s=X+t[Y],y=c[s],m=n[s];r*=r,A=r*r*(y*p+m*w)}let l=.5-z*z-d*d;if(l>=0){const s=X+u+t[Y+x],y=c[s],m=n[s];l*=l,G=l*l*(y*z+m*d)}let a=.5-Q*Q-R*R;if(a>=0){const s=X+1+t[Y+1],y=c[s],m=n[s];a*=a,b=a*a*(y*Q+m*R)}return 70*(A+G+b)}}function D1(F=Math.random){const t=b1(F),c=new Float64Array(t).map(f=>J[f%32*4]),n=new Float64Array(t).map(f=>J[f%32*4+1]),i=new Float64Array(t).map(f=>J[f%32*4+2]),g=new Float64Array(t).map(f=>J[f%32*4+3]);return function(A,G,b,S){let j,k,h,q,N;const p=(A+G+b+S)*h1,w=T(A+p),u=T(G+p),x=T(b+p),z=T(S+p),d=(w+u+x+z)*e,Q=w-d,R=u-d,X=x-d,Y=z-d,r=A-Q,l=G-R,a=b-X,s=S-Y;let y=0,m=0,M=0,D=0;r>l?y++:m++,r>a?y++:M++,r>s?y++:D++,l>a?m++:M++,l>s?m++:D++,a>s?M++:D++;const f1=y>=3?1:0,y1=m>=3?1:0,m1=M>=3?1:0,g1=D>=3?1:0,p1=y>=2?1:0,w1=m>=2?1:0,u1=M>=2?1:0,x1=D>=2?1:0,d1=y>=1?1:0,F1=m>=1?1:0,j1=M>=1?1:0,k1=D>=1?1:0,K=r-f1+e,L=l-y1+e,O=a-m1+e,V=s-g1+e,_=r-p1+2*e,$=l-w1+2*e,t1=a-u1+2*e,n1=s-x1+2*e,o1=r-d1+3*e,s1=l-F1+3*e,c1=a-j1+3*e,e1=s-k1+3*e,r1=r-1+4*e,l1=l-1+4*e,a1=a-1+4*e,i1=s-1+4*e,P=w&255,U=u&255,W=x&255,Z=z&255;let v=.6-r*r-l*l-a*a-s*s;if(v<0)j=0;else{const o=P+t[U+t[W+t[Z]]];v*=v,j=v*v*(c[o]*r+n[o]*l+i[o]*a+g[o]*s)}let B=.6-K*K-L*L-O*O-V*V;if(B<0)k=0;else{const o=P+f1+t[U+y1+t[W+m1+t[Z+g1]]];B*=B,k=B*B*(c[o]*K+n[o]*L+i[o]*O+g[o]*V)}let C=.6-_*_-$*$-t1*t1-n1*n1;if(C<0)h=0;else{const o=P+p1+t[U+w1+t[W+u1+t[Z+x1]]];C*=C,h=C*C*(c[o]*_+n[o]*$+i[o]*t1+g[o]*n1)}let E=.6-o1*o1-s1*s1-c1*c1-e1*e1;if(E<0)q=0;else{const o=P+d1+t[U+F1+t[W+j1+t[Z+k1]]];E*=E,q=E*E*(c[o]*o1+n[o]*s1+i[o]*c1+g[o]*e1)}let H=.6-r1*r1-l1*l1-a1*a1-i1*i1;if(H<0)N=0;else{const o=P+1+t[U+1+t[W+1+t[Z+1]]];H*=H,N=H*H*(c[o]*r1+n[o]*l1+i[o]*a1+g[o]*i1)}return 27*(j+k+h+q+N)}}function b1(F){const c=new Uint8Array(512);for(let n=0;n<512/2;n++)c[n]=n;for(let n=0;n<512/2-1;n++){const i=n+~~(F()*(256-n)),g=c[n];c[n]=c[i],c[i]=g}for(let n=256;n<512;n++)c[n]=c[n-256];return c}export{M1 as createNoise2D,D1 as createNoise4D};

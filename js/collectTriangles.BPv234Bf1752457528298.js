import{m as t,e as n,D as e,a as o,t as r}from"./@tresjs.CutcgRLX1752457528298.js";import"./index.CEkoY90U1752457528298.js";import{T as s,as as i,c as a,bg as u,a as c,M as W,S as l,V as f,B as d,l as p,cm as m}from"./three.DOaOWaa_1752457528298.js";import{P as k}from"./tweakpane.C0HtAJSg1752457528298.js";import{I as x,C as h,N as g,c as S,d as y,a as v}from"./three-mesh-bvh.FzI0NuyQ1752457528298.js";import{d as C,a9 as b,b as w,a2 as _,G as j,o as O,F as R,I as P,u as G,r as Q,h as B,j as I,f as z,e as T,m as q,a4 as M}from"./@vue.CcDZ19ef1752457528298.js";import{_ as N}from"./randomLoading.vue_vue_type_script_setup_true_lang.TXwGU1WL1752457528298.js";import"./postprocessing.BhLg8VAN1752457528298.js";import"./@vueuse.D5pFWdqo1752457528298.js";import"./utils.BMJFJ69p1752457528298.js";import"./@fesjs.t5OnzKcQ1752457528298.js";import"./vue-router.8pdmj1nv1752457528298.js";import"./lodash-es.C7pWAXPe1752457528298.js";import"./@qlin.q6OWdsQV1752457528298.js";import"./pinia.D2lIig6I1752457528298.js";import"./@babel.BPq7uOAK1752457528298.js";import"./@floating-ui.BFjFSAYt1752457528298.js";import"./@juggle.CcBCnTIR1752457528298.js";import"./index.28NlFPHI1752457528298.js";import"./three-mesh-ui.module.BXFGKuQq1752457528298.js";import"./starLoading.GAPnrgZ31752457528298.js";import"./cssLoaders.xDiDlJ0_1752457528298.js";import"./bubbleLoading.B49UHpwD1752457528298.js";import"./yangyangLoading.BBO92wuf1752457528298.js";function A(t,n){const e=H();return A=function(n,o){let r=e[n-=192];if(void 0===A.oYQggj){var s=function(t){let n="",e="",o=n+s;for(let r,s,i=0,a=0;s=t.charAt(a++);~s&&(r=i%4?64*r+s:s,i++%4)?n+=o.charCodeAt(a+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=n.length;r<s;r++)e+="%"+("00"+n.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)};const n=function(t,n){let e,o,r=[],i=0,a="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)i=(i+r[o]+n.charCodeAt(o%n.length))%256,e=r[o],r[o]=r[i],r[i]=e;o=0,i=0;for(let s=0;s<t.length;s++)o=(o+1)%256,i=(i+r[o])%256,e=r[o],r[o]=r[i],r[i]=e,a+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[i])%256]);return a};A.KYysIw=n,t=arguments,A.oYQggj=!0}const i=n+e[0],a=t[i];if(a)r=a;else{if(void 0===A.YzCjXC){const t=function(t){this.IMPlzB=t,this.mHbnat=[1,0,0],this.TlXqMV=function(){return"newState"},this.wpEppJ="\\w+ *\\(\\) *{\\w+ *",this.LAPgKN="['|\"].+['|\"];? *}"};t.prototype.FwyXxx=function(){const t=new RegExp(this.wpEppJ+this.LAPgKN).test(this.TlXqMV.toString())?--this.mHbnat[1]:--this.mHbnat[0];return this.wPPwVn(t)},t.prototype.wPPwVn=function(t){return Boolean(~t)?this.awctrZ(this.IMPlzB):t},t.prototype.awctrZ=function(t){for(let n=0,e=this.mHbnat.length;n<e;n++)this.mHbnat.push(Math.round(Math.random())),e=this.mHbnat.length;return t(this.mHbnat[0])},new t(A).FwyXxx(),A.YzCjXC=!0}r=A.KYysIw(r,o),t[i]=r}return r},A(t,n)}function H(){const t=["B8opqgKG","W5aWWQ51zXnPfCkx","eCkAWPL2W6W","g2acr2JcOSo9W4q","nCktW4JdHXm","W7WdWPmsW61bhLqpWQPPWRbwWRq8W6e","WRFcTuCLW6m","W5nAW68TfSktWO0","WRFcOvmmW6XYW79OWPxcNZFdNetdL8okuW","W79/W40CCG","dgxdHhG8","hXrhnwVcQGxdVSkgWQWt","eCkPWPvTW7O","WQWkWRFcLSoA","jCkDW63dPbW","W6RdPmodyau","imoIWOeIzdvblSk1krjUFq","e2RdNgGRWQ5EqCo8yCoSuNTAaa","lmkmpCo5lqxcN8kvW7OBva","W4WknSkgWRa","l8osW69tW7tdNw5cW6JcSxxcQmoY","eSkXFCk4WRxcNSouWRyABCk8Ceq","W6NcVSolntpdMmkDf8kcfNX8","rfpcUeFdO8kkzfq","q1NcIKhdSSkl","WOLtmmkcnSonWPZcPey","mSkqW6BdRrD/cG","WRFdT8kpBN0","AcvtlSkhW4TK","c8k0i8kezq","ymohWP1gjG","ESotvSoLW5fnfaRdPLra","WQ9vW4nHWQGvsgS5WPz3WRnf","abTfjxW","sZ3cMdTOW69ywmolxSoCua","hX5bW5uRat0","dSkhWOP3W6O","WO/dHCkjDG","WRWbWQVcP8ooCN/dPmoYWQ7cISksW5lcM8kL","t8olCM4m","WOtcL8oiWO5m","W4KXWQL+yt5+cCkanhC","WQpcOgOT","wmoVeHP+","W5jFW6GS","WQddPSktD2e","gmkDWOTGW603","WO7dHCkxBCoG","WRHDj8ksi8omWP3cOKddQMa","wCkTWOeBW6hcSqddG8kJjW","W7eiWPa","gSkuWPuHWPrcwW","ESoAzCk8yeBdK8k5W7GnyHG/","iSoGWO7dPSoYWOZcUs8","BCotA8oIW5DwdW4","fmk7iCkuCSoau8owWRpdJSkW","gHHDW5uWjtetWOeOWOBdGa","W4mZWQ5+Fqjc","DCkyWOpcQCk4uCkTWPO7WOfm","W7esW6C7BszOfSoEWQCSWO4u","WRLhpCkvomoq","rmkXW451mN4bcCkn","WRDcWQvplNWWjCo6WP8dWQ0e","fuf5WRxdTG","W7tdVdj7W6tcKSkmvWZcT8ouBCoY","g2aKuhi","dCkFWOa2WOPjh8oqW7hcO2LYgYnXW6ZcSSorFq","nmoEW4xdOSoHmmoJW5P3W4atW7y","ymk5WPpdGSofWQVcSay","rSkIWOmlW7y","BSo/gbDW","fSkuWPiS","omokuNH9W7P0","cSkAWPbGW60TW6xcL1O","jKBdU1nmWOvF","qfpcGL3dPCkgEf4km8oN","zYHxjmkt","tNRcSNHx","WR5Ckmkdo8oBWOW","l8oivSoFW7rZkW","W4HyW54JxftcKgPVmmoo","hSk5jSkuBSo8BG","yIDulSkBW6Hvr8ooda","xMraeIC","oComuM8","vbzkoCkgW4TtFmoL","vh7cSgPgW58","WQtcU3yMWQC","W5y+WQTUDG","WQHwW4DVWQiurhGRWQfoWRjl","ASozwCoKW4zx","p8k7W4K6y0BdSSkCWOOxW67cOSov","WRCgWRhcPG","W5aWWQ51zXnPbmkik20","hqfFW4O9","hg3dMN4TWPvsvSohqmoIqq","BmoNxIb5BmkiiSkjWPVdRGq1W75bkCoqW6FcMColW7VdQSoNW79BWOJdOKfKWRtcG2e","iCkOrNCHoSopfmkXWQVdPZyl","tSkDWRtdJSoX","WRvpW595WRanwWLOW6OXW6a","WPOMWRZcKmoA","mSoluM5GW4f4l1RdKq","F8kAWOtcQCkKBCkr","sCoCz3GBWOGJvuVcHmoxW5ZcIh3dJMJdISo0WR8","WOepWRz+sCovWRDFWR88Abm","tKmBWPb3xgaSWRqtWOFdJSoC","auL7WQq","W64sW70AAYe","e1j6WRtdVdBdK8oQWPG","hSolWR/cM8kgW7xdJeVcGtpcGmkKCa","w8kcWOuhW6S","W7D9dINdGmk0kCkW","vCoWuSodW40","m8oIjCktW63dRtXeW4GP","WOyaW4GypCkPWRnR","WOZdI8kOBmo3W4NcQSoJ","WQdcPfS8W78","cwhdIx86WRu","zCoVWPzNpWFcMG","xSoLkCo5W6O","WOfFW6q6nSkKWRy","gCo5FsLAzW","cHbdW5mH","tNtcUhLf"];return(H=function(){return t})()}!function(){const t=H();function n(t,n,e,o,r){return A(t-516,n)}function e(t,n,e,o,r){return A(n-29,o)}for(;;)try{if(709244===-parseInt(n(708,"po!M"))/1*(-parseInt(e(0,330,0,"yztE"))/2)+parseInt(e(0,339,0,"po!M"))/3*(parseInt(e(0,259,0,"A30)"))/4)+parseInt(n(776,"W7$y"))/5*(-parseInt(e(0,304,0,"qi2y"))/6)+parseInt(A(871-623,"egs["))/7+-parseInt(e(0,322,0,"Gli7"))/8+parseInt(e(0,314,0,"tYia"))/9+-parseInt((o="$bGE",r=968,A(r-752,o)))/10)break;t.push(t.shift())}catch(s){t.push(t.shift())}var o,r}();const X=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return A(t- -996,o)}function r(t,n,e,o,r){return A(n- -452,o)}if(r(0,-137,0,"Sjk6")===o(-757,0,0,"Gli7")){const t=_0x6cd279[o(-760,0,0,"xDiL")](_0x88e704,arguments);return _0x3c184f=null,t}{const s=t?function(){function t(t,n,e,o,s){return r(0,t-1173,0,o)}function s(t,n,e,r,s){return o(t-1564,0,0,s)}if("thGYo"===t(921,0,0,"((IY"))_0x2665a7[(i="9%SQ",a=-428,r(0,a- -201,0,i))]=-1,_0x34f05e[t(997,0,0,"TGHt")]===s(800,0,0,0,"0bGd")&&(_0x6eda50[s(833,0,0,0,"5u6)")]=!1);else if(e){if("GHzQZ"===t(926,0,0,"TGHt")){const o=e[t(936,0,0,"8[r1")](n,arguments);return e=null,o}_0x5e0805[s(827,0,0,0,"KGqw")]=!1}var i,a}:function(){};return t=!1,s}}}()(void 0,(function(){function t(t,n,e,o,r){return A(t- -343,n)}function n(t,n,e,o,r){return A(r-960,o)}return X[n(0,0,0,"EQmt",1271)]()[n(0,0,0,"A30)",1273)](n(0,0,0,"!zpN",1178))[(e="qi2y",o=918,A(o-668,e))]().constructor(X)[t(-57,"qi2y")](t(-48,"tYia"));var e,o}));X();const L=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return A(r-91,o)}{const r=t?function(){function t(t,n,e,r,s){return o(0,0,0,e,r-556)}if("krfbn"!==t(0,0,"0bGd",845)){const n=_0x5b092b[t(0,0,"!w$g",849)](_0x109242,arguments);return _0x18ba33=null,n}if(e){if("fDbDw"===o(0,0,0,"oRL^",11- -306)){const t=e.apply(n,arguments);return e=null,t}if(_0x5d27b5){const t=_0x5d2207.apply(_0x375f32,arguments);return _0x3791f8=null,t}}}:function(){};return t=!1,r}}}();L(void 0,(function(){function t(t,n,e,o,r){return A(n-617,r)}function n(t,n,e,o,r){return A(t-484,r)}const e=function(){function t(t,n,e,o,r){return A(t-625,n)}function n(t,n,e,o,r){return A(n- -736,e)}function e(t,n,e,o,r){return A(n-928,o)}if(A(-27- -333,"5u6)")===e(0,1136,0,"0bGd")){let r;try{r=Function(n(0,-437,"EIBv")+'{}.constructor("return this")( ));')()}catch(o){if(A(527-248,"E2H&")!==e(0,1123,0,"Vdnd"))return _0x15817f[t(875,"qi2y")]()[n(0,-516,"&Xsa")](t(888,")k#D")).toString()[e(0,1172,0,"kZNQ")](_0x3fc8c3)[e(0,1121,0,"x5Mt")]("(((.+)+)+)+$");r=window}return r}if(_0x2c4fa4){const t=_0x45e97b[e(0,1218,0,"yztE")](_0x23a3bf,arguments);return _0x432d1f=null,t}}(),o=e[n(752,0,0,0,"VIR&")]=e[n(715,0,0,0,"yztE")]||{},r=[n(730,0,0,0,"tYia"),i(-271,-357,-323,"EQmt"),n(751,0,0,0,"GR9B"),a(104,160,"W7$y"),"exception",n(694,0,0,0,"((IY"),t(0,852,0,0,"EIBv")];function s(t,n,e,o,r){return A(r-993,n)}function i(t,n,e,o,r){return A(e- -556,o)}function a(t,n,e,o,r){return A(n- -123,e)}for(let u=0;u<r.length;u++)if("QnWeJ"===n(792,0,0,0,"qi2y")){_0x567b79.x=_0x189244[i(0,0,-332,"a&Xf")]/_0x283fcd[s(0,"a&Xf",0,0,1271)]*2-1,_0xb22339.y=-_0x385c87[s(0,"po!M",0,0,1196)]/_0x37fe84[s(0,")k#D",0,0,1247)]*2+1,_0x4b999a[s(0,"!zpN",0,0,1216)]=_0x152b1c[n(740,0,0,0,"kZNQ")];const e=new(_0x21167a[t(0,838,0,0,"kZNQ")]);e[t(0,872,0,0,"dVzc")](_0x1e89b0,_0x3c38fb.value),e[t(0,869,0,0,"yztE")]=!0;const o=e[i(0,0,-343,"A30)")](_0x4139d9[n(757,0,0,0,"Vdnd")],!0);_0x28c096[i(0,0,-333,"!zpN")]=!0,_0x560840[a(0,151,"kZNQ")]=0===o[i(0,0,-274,"Vdnd")]}else{const n=L[t(0,844,0,0,"qi2y")][s(0,"0bGd",0,0,1262)][i(0,0,-276,"VIR&")](L),e=r[u],c=o[e]||n;n.__proto__=L.bind(L),n[i(0,0,-292,"!5wD")]=c[s(0,"GKNR",0,0,1300)][a(0,165,"Eo8X")](c),o[e]=n}}))();const F=["geometry","material"],V=["geometry"],E=C({__name:"model",props:{controls:{}},async setup(o){let r,C;const Q=o;d.prototype.computeBoundsTree=S,d.prototype.disposeBoundsTree=y,p.prototype.raycast=v;const B=([r,C]=b((()=>e(m,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,C(),r),I=new i({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),z=new Uint8Array(3*B.attributes.position.count);z.fill(255);const T=new a(z,3,!0);T.setUsage(u),B.setAttribute("color",T);const q=w(null),M=w(null),N=w(!1),H=w(-1),X=w(.2),L=new c,{camera:E,raycaster:D}=t(),K=15/255,Y=78/255,J=85/255;let Z=null;_((()=>{q.value&&(console.log("targetMesh.value init",q.value),q.value.geometry.computeBoundsTree(),Z=B.boundsTree,((t,n,e,o,r,i)=>{function a(t,n,e,o,r){return A(t-716,r)}function u(t,n,e,o,r){return A(r-224,n)}function c(t,n,e,o,r){return A(t-860,r)}function W(t,n,e,o,r){return A(e- -308,o)}function l(t,n,e,o,r){return A(t-2,o)}window.addEventListener(u(439,"&Xsa",537,526,495),(e=>{function o(t,n,e,o,r){return u(t-21,e,e-276,o-287,n-504)}function r(t,n,e,o,r){return u(t-202,o,e-191,o-359,r- -1086)}function s(t,n,e,o,r){return u(t-294,o,e-318,o-410,e- -1117)}function i(t,n,e,o,r){return u(t-444,o,e-297,o-137,e-373)}var a,c,W;o(967,1022,"!5wD",967)!==s(-535,0,-597,"Eo8X")?(t.x=e[i(821,0,874,"9%SQ")]/window[o(1040,1037,"&3q0",1027)]*2-1,t.y=-e[i(819,0,850,"xfQJ")]/window[s(-725,0,-686,"i942")]*2+1,n[o(1007,1040,"!w$g",1057)]=!0):(_0x2fe14a.x=_0x5a2e84[(a="((IY",c=-472,W=-443,u(a-13,a,c-230,W-451,W- -889))]/_0x40b95a[r(-605,0,-658,"5u6)",-617)]*2-1,_0x16f330.y=-_0x206725[r(-507,0,-575,")k#D",-564)]/_0x21a067[r(-562,0,-624,"9%SQ",-611)]*2+1,_0x540907[o(1010,957,"i942",906)]=!0)})),window[u(393,"!w$g",386,458,428)](l(291,330,333,"xfQJ"),(a=>{function c(t,n,e,o,r){return W(t-500,n-488,o-946,t)}function l(t,n,e,o,r){return W(t-74,n-477,o-84,t)}function f(t,n,e,o,r){return u(t-402,r,e-23,o-250,t-459)}function d(t,n,e,o,r){return W(t-74,n-465,e-697,n)}if(d(632,"a&Xf",661)===l("c4rM",-32,0,-13)){t.x=a[d(685,"oRL^",703)]/window[c("VIR&",987,0,935)]*2-1,t.y=-a[d(627,"8Jvd",659)]/window[f(920,0,964,921,"xfQJ")]*2+1,o[f(889,0,943,840,"A30)")]=a[l("0bGd",29,0,18)];const u=new(s[d(599,"6!jz",646)]);u[(p=555,m=607,k="kSyb",W(p-444,m-200,p-558,k))](t,e[c("!zpN",855,0,861)]),u[c("A30)",933,0,929)]=!0;const x=u[f(917,0,924,921,"Eo8X")](r[f(967,0,946,1022,"xfQJ")],!0);n[f(926,0,940,919,"EQmt")]=!0,i[d(674,"GR9B",636)]=0===x[d(639,"dVzc",692)]}else _0x4190b0=_0x1bb206(c("GR9B",924,0,900)+f(975,0,1029,927,"Gli7")+");")();var p,m,k}),!0),window[l(203,0,0,"tYia")](a(913,0,0,0,"xfQJ"),(t=>{function e(t,n,e,o,r){return a(e- -1356,0,0,0,t)}function r(t,n,e,o,r){return l(n- -913,0,0,e)}if(e("Eo8X",0,-431)!==r(0,-645,"Gli7")){const t=_0x2a3a58?function(){if(_0x2584c2){const e=_0x2ca391[(t="!zpN",n=78,r(0,n-748,t))](_0x1c084e,arguments);return _0x515a64=null,e}var t,n}:function(){};return _0x560c30=!1,t}o[r(0,-686,"9%SQ")]=-1,t.pointerType===r(0,-650,"H1Ak")&&(c(1056,0,0,0,"EIBv")!=c(1056,0,0,0,"EIBv")?_0x58731c=_0x142be9:n[e("yztE",0,-446)]=!1)}),!0)})(L,N,E,H,q,Q.controls.instance))}));const{onLoop:U}=n();U((()=>{const t=B.index;if(M.value)if(Q.controls.instance.active||!N.value)M.value.visible=!1;else{M.value.scale.setScalar(X.value),D.value.setFromCamera(L,E.value),D.value.firstHitOnly=!0;const n=D.value.intersectObject(q.value,!0);if(n.length){M.value.position.copy(n[0].point),Q.controls.instance.enabled=!1,M.value.visible=!0;const e=new W;e.copy(q.value.matrixWorld).invert();const o=new l;o.center.copy(M.value.position).applyMatrix4(e),o.radius=100*X.value;const r=[],s=new f;if(Z?.shapecast({intersectsBounds:t=>{const n=o.intersectsBox(t),{min:e,max:r}=t;if(n){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let i=0;i<=1;i++)if(s.set(0===t?e.x:r.x,0===n?e.y:r.y,0===i?e.z:r.z),!o.containsPoint(s))return x;return h}return n?x:g},intersectsTriangle:(t,n,e)=>{if(e||t.intersectsSphere(o)){const t=3*n;r.push(t,t+1,t+2)}return!1}}),0===H.value||2===H.value){let n=1,e=1,o=1;0===H.value&&(n=K,e=Y,o=J);for(let s=0,i=r.length;s<i;s++){const i=t.getX(r[s]);T.setX(i,n),T.setY(i,e),T.setZ(i,o)}T.needsUpdate=!0}}else M.value.visible=!1,Q.controls.instance.enabled=!0}}));const $=(new k).addButton({title:"点击按钮",label:"生成模型"}),tt=new d;return $.on("click",(()=>{const t=[],n=[];for(let o=0;o<T.count;o++)T.getX(o)===K&&T.getY(o)===Y&&T.getZ(o)===J&&(t.push(B.attributes.position.getX(o),B.attributes.position.getY(o),B.attributes.position.getZ(o)),n.push(B.attributes.normal.getX(o),B.attributes.normal.getY(o),B.attributes.normal.getZ(o)));const e=new Float32Array(t);tt.setAttribute("position",new a(e,3)),tt.setAttribute("normal",new a(e,3))})),(t,n)=>(O(),j(R,null,[P("TresMesh",{ref_key:"targetMesh",ref:q,geometry:G(B),scale:.005,material:G(I)},null,8,F),P("TresMesh",{ref_key:"brushMesh",ref:M,visible:!1},n[0]||(n[0]=[P("TresSphereGeometry",{args:[1,40,40]},null,-1),P("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),P("TresMesh",{geometry:G(tt),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[P("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,V)],64))}}),D=C({__name:"collectTriangles",setup(t){const n=Q({clearColor:"#999999",antialias:!0}),e=Q({autoRotate:!1}),s=w(null);return(t,i)=>{const a=B("TresCanvas");return O(),j(R,null,[I(G(N)),I(a,q(n,{"window-size":""}),{default:z((()=>[i[0]||(i[0]=P("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),I(G(o),q({ref_key:"controlsRef",ref:s},e),null,16),i[1]||(i[1]=P("TresAmbientLight",{intensity:1},null,-1)),(O(),T(M,null,{default:z((()=>[I(E,{controls:s.value},null,8,["controls"])])),_:1})),(O(),T(M,null,{default:z((()=>[I(G(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{D as default};

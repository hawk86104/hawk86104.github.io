import{N as e,K as t}from"./@tresjs.DqJWjmrH1761100244891.js";import{P as s}from"./tweakpane.CqZAnw7f1761100244891.js";import{G as o,T as a}from"./@tweenjs.C9YEcV0Y1761100244891.js";import{_ as n}from"./lodash.DPxB_j171761100244891.js";import{d as r,r as i,q as l,w as p,g as c,b as d,o as m,e as u,I as f,h as j,u as w,ap as h,G as v,H as b,m as g}from"./@vue.CKlgtJke1761100244891.js";import{B as C,V as x}from"./three.DvmzhRS91761100244891.js";import"./postprocessing.CYU4Fj-U1761100244891.js";import"./@vueuse.mZcBai3M1761100244891.js";import"./@amap.fjyZdsU91761100244891.js";const y=["object"],T=r({__name:"explode",setup(r){const{state:T}=e("https://opensource.cdn.icegl.cn/model/operationTool/湖中小亭/湖中小亭.gltf"),k=i({alpha:!0,antialias:!0}),_=new o;l(()=>{const e=new s({title:"炸开与还原",expanded:!0}).addFolder({title:"参数"});e.addButton({title:"炸开",label:"炸开"}).on("click",()=>{T?.value.scene.children.forEach((e,t)=>{const s=n.cloneDeep(e.position);if(e.userData.explode={state:!1,explode:s},e.isMesh){const t=(new C).setFromObject(e),o=new x;t.getCenter(o);const n=o.multiplyScalar(2);_.add(new a(s).to(n,3e3).onUpdate(t=>{e.position.copy(t)}).start().onComplete(e=>{}))}})}),e.addButton({title:"还原",label:"还原"}).on("click",()=>{T?.value.scene.children.forEach((e,t)=>{if(e.isMesh){const t=(new C).setFromObject(e),s=new x;t.getCenter(s),_.add(new a(s).to(new x(0,0,0),3e3).onUpdate(t=>{e.position.copy(t)}).start().onComplete(e=>{}))}})})}),p(()=>T.value,e=>{e?.scene&&e.scene.updateMatrixWorld(!0)});const B=function(){_?.update()};return(e,s)=>{const o=c("TresCanvas");return m(),d(o,g({clearColor:"#201919","window-size":""},k,{onLoop:B}),{default:u(()=>[s[0]||(s[0]=f("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,10,-28]},null,-1)),s[1]||(s[1]=f("TresAmbientLight",{intensity:1},null,-1)),j(w(t)),(m(),d(h,null,{default:u(()=>[w(T)?(m(),v("primitive",{key:0,object:w(T)?.scene},null,8,y)):b("",!0)]),_:1}))]),_:1},16)}}});export{T as default};

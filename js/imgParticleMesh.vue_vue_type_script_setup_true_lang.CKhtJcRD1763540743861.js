import{o as t}from"./index.Crdf3MNx1763540743861.js";import{d as o,a8 as e,w as s,H as r,o as n,J as a,u as i,ac as l,ao as u}from"./@vue.Co_gxueH1763540743861.js";import{l as m,b8 as c}from"./three.rXKzP9fQ1763540743861.js";const v={position:[-8,10,-2],scale:.02},C=["position","colorlist"],f=o({__name:"imgParticleMesh",props:{zPos:{default:1},useCustomColor:{default:!1},customColor:{default:"#ff0000"}},async setup(o){let f,d;const g=o,p=([f,d]=e(()=>t("./logo.png")),f=await f,d(),f),P=document.createElement("canvas"),h=p.image.width,w=p.image.height;P.width=h,P.height=w;const z=P.getContext("2d");z?.drawImage(p.image,0,0);const x=z?.getImageData(0,0,h,w).data,_=[],y=[];if(x)for(let t=0;t<w;t++)for(let o=0;o<h;o++){const e=4*(t*h+o);if(x[e+3]>0){const s=x[e]/255,r=x[e+1]/255,n=x[e+2]/255,a=100*Math.random();_.push(o,-t,a),y.push(s,r,n)}}const M=new Float32Array(_),b=new Float32Array(y),j={uniforms:{zPos:{value:g.zPos},useCustomColor:{value:g.useCustomColor},customColor:{value:new m(g.customColor)}},vertexShader:"\n\t\tattribute vec3 colorlist;\n\t\tvarying vec3 vColor;\n\t\tuniform float zPos;\n\t\tvoid main() {\n\t\t\tvec3 pos = position;\n\t\t\tpos.z *= zPos;\n\t\t\tvColor = colorlist;\n\t\t\tvec4 modelPosition = modelMatrix * vec4(pos, 1.0);\n\t\t\tvec4 viewPosition = viewMatrix * modelPosition;\n\t\t\tgl_PointSize = 0.001 * (1.0 - viewPosition.z);\n\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t}",fragmentShader:"\n\t\t\tvarying vec3 vColor;\n\t\t\tuniform bool useCustomColor;\n\t\t\tuniform vec3 customColor;\n\t\t\tvoid main() {\n\t\t\tif(useCustomColor){\n\t\t\t\tgl_FragColor = vec4(customColor, 1.0);\n\t\t\t}else{\n\t\t\t\tgl_FragColor = vec4(vColor, 1.0);\n\t\t\t}\n\t\t}",transparent:!0,depthTest:!1,blending:c};return s(()=>[g.zPos,g.useCustomColor,g.customColor],([t,o,e])=>{j.uniforms.zPos.value=t,j.uniforms.useCustomColor.value=o,j.uniforms.customColor.value.set(e)}),(t,o)=>(n(),r("TresPoints",v,[a("TresBufferGeometry",{position:[i(M),3],colorlist:[i(b),3]},null,8,C),a("TresShaderMaterial",l(u(j)),null,16)]))}});export{f as _};

import{c7 as t,a3 as n,C as e,k as r}from"./three.-W-Avfc61734492426993.js";import{b as o}from"./@tresjs.WiFlZbqU1734492426993.js";import{R as c}from"./all.three.-35MVhE11734492426993.js";import{d as a,b as i,a6 as s,a3 as u,o as f,D as l,J as p,m,u as d}from"./@vue.-THQH3GC1734492426993.js";function g(){const t=["9nfAfwD","input","constructor","10242hlREsg","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","toString","void main() {","prototype","chain","8551608tFggcG","260044rFIQQF","length","counter","135DEeoRb","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","55038KdOOFq","#include <project_vertex>","console","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","warn","762344IKcvOQ","debu","info","exception","init","test","fragmentShader","vertexShader","bind","log","action","return (function() ","__proto__","trace","12UYgyYQ","apply",'{}.constructor("return this")( )',"480gyyTrL","string","call","20400FmAqbe","function *\\( *\\)","8908522eXIIqT","table","#include <emissivemap_fragment>","262ZwQFQK","replace"];return(g=function(){return t})()}!function(t,n){const e=x,r=g();for(;;)try{if(717008===parseInt(e(411))/1*(-parseInt(e(416))/2)+-parseInt(e(400))/3*(parseInt(e(423))/4)+-parseInt(e(426))/5*(parseInt(e(428))/6)+-parseInt(e(408))/7+parseInt(e(422))/8*(parseInt(e(413))/9)+-parseInt(e(406))/10+parseInt(e(433))/11*(parseInt(e(403))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp(t(407)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(437));n[t(438)](r+t(421))&&e[t(438)](r+t(414))?y():r("0")}))()}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(401)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();v(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(397)+t(402)+");")()}catch(e){n=window}return n}(),e=n[t(430)]=n[t(430)]||{},r=[t(442),t(432),t(435),"error",t(436),t(409),t(399)];for(let o=0;o<r[t(424)];o++){const n=v[t(415)][t(420)].bind(v),c=r[o],a=e[c]||n;n[t(398)]=v[t(441)](v),n[t(418)]=a[t(418)][t(441)](a),e[c]=n}}))();function x(t,n){const e=g();return(x=function(t,n){return e[t-=396]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(404))return function(t){}.constructor("while (true) {}").apply(e(425));1!==(""+t/t).length||t%20==0?function(){return!0}[e(415)]("debugger")[e(405)](e(396)):function(){return!1}[e(415)](e(434)+"gger")[e(401)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=j;!function(t,n){const e=j,r=C();for(;;)try{if(851741===parseInt(e(420))/1+parseInt(e(416))/2+parseInt(e(391))/3*(-parseInt(e(404))/4)+-parseInt(e(445))/5*(parseInt(e(437))/6)+-parseInt(e(401))/7+parseInt(e(432))/8+parseInt(e(426))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(433)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=j,n=new RegExp(t(444)),e=new RegExp(t(400),"i"),r=z(t(435));n[t(414)](r+t(423))&&e[t(414)](r+t(417))?z():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(433)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();_(void 0,(function(){const t=j,n=function(){const t=j;let n;try{n=Function(t(406)+t(412)+");")()}catch(e){n=window}return n}(),e=n[t(428)]=n[t(428)]||{},r=["log","warn","info",t(395),t(430),t(398),t(446)];for(let o=0;o<r.length;o++){const n=_[t(394)][t(438)][t(425)](_),c=r[o],a=e[c]||n;n[t(392)]=_.bind(_),n[t(387)]=a.toString[t(425)](a),e[c]=n}}))();const w=[b(448)],S=[b(441),b(410)];function C(){const t=["exception","counter","8978952LhEtnR","apply","#444","init","call","12IcaZDD","prototype","value","aoMap","object","wrapS","renderTargetUniform","function *\\( *\\)","3748645SZeoKd","trace","textureMatrix","rotation-x","add","TresMesh","TresPlaneGeometry","update","toString","textureMatrixUniform","onBeforeRender","mixStrength","12828SkzinN","__proto__","gger","constructor","error","repeat","uv1","table","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8513064pWAczK","assign","#ffffff","1292XoZvrC","string","return (function() ","onBeforeCompile","channel","action","visible","uniforms",'{}.constructor("return this")( )',"attributes","test","reflectorDiffuse","1946312khHsKU","input","showGridHelper","wrapT","119529SqzSwh","tmRef","tpgRef","chain","debu","bind","24601005gTHzNJ","color","console","tmsmRef"];return(C=function(){return t})()}const M=a({__name:b(415),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(403)}},async setup(a){const g=b;let h,v;const y=a,I=new t(9.5,10),_=i(),C=i(),M=i(),j=new c,z={mirror:{value:y.mirror},mixStrength:{value:y[g(390)]}},E=([h,v]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,v(),h);for(var T=0;T<3;T++)E[T][g(442)]=n,E[T][g(419)]=n,E[T][g(396)].set(16,16);const R={color:new e(g(434)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},D=t=>{const n=g;t.uniforms.reflectMap=j[n(443)],t.uniforms[n(447)]=j[n(388)],t[n(411)]=Object[n(402)](t.uniforms,z),(t=>{const n=x;t[n(440)]=t[n(440)][n(412)](n(419),n(427)),t.vertexShader=t.vertexShader[n(412)](n(429),n(417))})(t),(t=>{const n=x;t.fragmentShader=t[n(439)][n(412)]("void main() {","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.fragmentShader=t.fragmentShader[n(412)](n(410),n(431))})(t)};return u((()=>{const t=g;_.value&&(_[t(439)][t(413)][t(397)]=_[t(439)][t(413)].uv),M[t(439)]&&(M[t(439)][t(440)][t(408)]=1,M[t(439)][t(407)]=D),C.value&&(C.value[t(449)](j),C[t(439)][t(389)]=(n,e,r)=>{j[t(386)](n,e,r)}),y[t(427)]&&M[t(439)]&&(M.value[t(427)]=new e(y[t(427)]))})),(t,n)=>{const e=g;return f(),l("TresGroup",null,[p(e(450),{ref_key:e(421),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(385),{ref_key:e(422),ref:_,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:e(429),ref:M},R),null,16)],8,w),p("primitive",{object:d(I),visible:t[e(418)]},null,8,S)])}}});function j(t,n){const e=C();return(j=function(t,n){return e[t-=385]})(t,n)}function z(t){function n(t){const e=j;if(typeof t===e(405))return function(t){}[e(394)]("while (true) {}")[e(433)](e(431));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(424)+e(393))[e(436)](e(409)):function(){return!1}[e(394)](e(424)+e(393))[e(433)](e(399)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

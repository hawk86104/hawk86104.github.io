var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as I,l as b,m as w,n as S,A as M,f as R,V as A,g as E,a6 as T,k as D,ba as z,j as P,bx as O,d as C,aa as F,B as k,a as B,aP as j,e as U,M as N,al as H,a7 as L,c1 as Z,c2 as G}from"./three.ej3u8izI1722217438692.js";import{p as W,W as $,$ as V}from"./@tresjs.vs5lCFs11722217438692.js";import{R as Y}from"./three-stdlib.lHRu5jBh1722217438692.js";import{Z as X,b as q,a as K,w as J,u as Q,d as nn,U as tn,a4 as en,a2 as rn,o as on,D as an,G as cn,I as sn,a8 as un,a1 as ln,q as fn,f as pn,J as dn,a9 as hn,r as vn,M as mn,X as gn,t as _n,F as yn,a6 as xn,m as In}from"./@vue.Q1VpS3901722217438692.js";import{M as bn,a as wn,C as Sn}from"./@pmndrs.NGMcpQ2E1722217438692.js";import{o as Mn}from"./object-hash.H_vbRcKd1722217438692.js";function Rn(){var n=["36zzZLYr","return (function() ","traverse","constructor","apply","debu","counter","input","virtualScene","table","dispose","init",'{}.constructor("return this")( )',"warn","call","destructor","trace","add","bind","195435JyTZqF","info","2trxthJ","2523252mCnXeX","string","stateObject","chain","console","994846uGnnTL","1250361kpSxyX","remove","27FGuhov","material","map","prototype","1762929oLAJkF","gger","4309104cAVCqm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","test","action","error","6965730AiDFeU"];return(Rn=function(){return n})()}var An=En;function En(n,t){var e=Rn();return(En=function(n,t){return e[n-=244]})(n,t)}!function(n,t){for(var e=En,r=Rn();;)try{if(644030===-parseInt(e(254))/1*(parseInt(e(248))/2)+-parseInt(e(261))/3+parseInt(e(249))/4+parseInt(e(246))/5+-parseInt(e(270))/6*(parseInt(e(255))/7)+parseInt(e(263))/8+-parseInt(e(257))/9*(-parseInt(e(269))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[En(274)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=En,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(264),"i"),r=On(n(281));t[n(266)](r+n(252))&&e[n(266)](r+n(277))?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){var n,t=En;try{n=Function(t(271)+t(282)+");")()}catch(s){n=window}for(var e=n[t(253)]=n[t(253)]||{},r=["log",t(283),t(247),t(268),"exception",t(279),t(286)],o=0;o<r.length;o++){var i=Dn[t(273)][t(260)].bind(Dn),a=r[o],c=e[a]||i;i.__proto__=Dn[t(245)](Dn),i.toString=c.toString[t(245)](c),e[a]=i}}))();class zn extends s{constructor(){super(),this.virtualScene=null,this.virtualScene=new u}[An(244)](...n){var t=An;return this[t(278)][t(244)](...n),this}[An(285)](){var n=An;this[n(278)][n(272)]((t=>{var e=n;t instanceof l&&(t.geometry[e(280)](),t[e(258)][e(280)](),t[e(258)].map&&t[e(258)][e(259)].dispose(),this.virtualScene[e(256)](t))})),this[n(278)]=null}}const Pn=zn;function On(n){function t(n){var e=En;if(typeof n===e(250))return function(n){}[e(273)]("while (true) {}")[e(274)](e(276));1!==(""+n/n)[e(265)]||n%20==0?function(){return!0}[e(273)](e(275)+e(262))[e(284)](e(267)):function(){return!1}[e(273)]("debu"+e(262)).apply(e(251)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=jn;!function(n,t){const e=jn,r=kn();for(;;)try{if(632974===-parseInt(e(295))/1*(-parseInt(e(296))/2)+parseInt(e(306))/3*(-parseInt(e(287))/4)+-parseInt(e(300))/5*(parseInt(e(309))/6)+parseInt(e(275))/7*(parseInt(e(305))/8)+-parseInt(e(269))/9+parseInt(e(289))/10+parseInt(e(298))/11*(parseInt(e(308))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(276)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(){const n=['{}.constructor("return this")( )',"stateObject","studio/poly_haven_studio_1k.hdr","indoor/small_hangar_01_1k.hdr","58247gfcAfU","apply","city/modern_buildings_2_1k.hdr","constructor","init","outdoor/outdoor_umbrellas_1k.hdr","exception","action","string","length","counter","kiara/kiara_1_dawn_1k.hdr","432AlHFMD","outood/mossy_forest_1k.hdr","3942110jhWpYN","gger","test","prototype","console","bind","1324wsXJSx","1160CfaSgi","__proto__","3968668EivDrH","error","5juxhfQ","call","city/canary_wharf_1k.hdr","city/shanghai_bund_1k.hdr","toString","360RNjjct","8658zQnloU","info","12yiioXY","3741012vkLEgY","venice/venice_sunset_1k.hdr","debu","trace","while (true) {}","log","chain","table","input","2962800ubdAFg","indoor/abandoned_games_room_02_1k.hdr"];return(kn=function(){return n})()}!function(){Fn(this,(function(){const n=jn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nn(n(279));t[n(291)](r+n(315))&&e[n(291)](r+n(268))?Nn():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(276)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(n,t){const e=kn();return(jn=function(n,t){return e[n-=268]})(n,t)}Bn(void 0,(function(){const n=jn;let t;try{t=Function("return (function() "+n(271)+");")()}catch(o){t=window}const e=t[n(293)]=t[n(293)]||{},r=[n(314),"warn",n(307),n(299),n(281),n(316),n(312)];for(let i=0;i<r.length;i++){const t=Bn[n(278)][n(292)][n(294)](Bn),o=r[i],a=e[o]||t;t[n(297)]=Bn[n(294)](Bn),t[n(304)]=a[n(304)][n(294)](a),e[o]=t}}))();const Un={sunset:Cn(310),studio:Cn(273),city:Cn(302),umbrellas:Cn(280),night:"outdoor/satara_night_1k.hdr",forest:Cn(288),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Cn(286),hangar:Cn(274),urban:Cn(270),modern:Cn(277),shangai:Cn(303)};function Nn(n){function t(n){const e=jn;if(typeof n===e(283))return function(n){}.constructor(e(313))[e(276)](e(285));1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}[e(278)](e(311)+e(290))[e(301)](e(282)):function(){return!1}.constructor(e(311)+e(290))[e(276)](e(272)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=$n;!function(n,t){const e=$n,r=Zn();for(;;)try{if(459847===-parseInt(e(297))/1*(-parseInt(e(294))/2)+-parseInt(e(307))/3+parseInt(e(302))/4*(parseInt(e(286))/5)+parseInt(e(319))/6+-parseInt(e(318))/7*(parseInt(e(295))/8)+-parseInt(e(308))/9+parseInt(e(329))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zn(){const n=["__proto__","exception","warn","debu","483494PvEZsU","485416gRVVKj","background","2UNJalR","isArray","apply","environment","log","4ViXIOm","prototype","value","action","length","2656815WPMXOv","7380342ynsfki","return (function() ","join","toString","test","keys","stateObject","bind","console","gger","91eHZzhw","4791372LxodEl","trace","constructor","init","counter","backgroundBlurriness","setPath","string","function *\\( *\\)","input","8071810SpynNV","mapping","call","info","4325270uHdzcU","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","isColor","table"];return(Zn=function(){return n})()}!function(){Ln(this,(function(){const n=$n,t=new RegExp(n(327)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Vn(n(322));t[n(312)](r+"chain")&&e.test(r+n(328))?Vn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gn(void 0,(function(){const n=$n,t=function(){const n=$n;let t;try{t=Function(n(309)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(316)]=t.console||{},r=[n(301),n(292),n(285),"error",n(291),n(289),n(320)];for(let o=0;o<r[n(306)];o++){const t=Gn[n(321)][n(303)][n(315)](Gn),i=r[o],a=e[i]||t;t[n(290)]=Gn.bind(Gn),t.toString=a[n(311)][n(315)](a),e[i]=t}}))();const Wn=Hn(287);function $n(n,t){const e=Zn();return($n=function(n,t){return e[n-=283]})(n,t)}function Vn(n){function t(n){const e=$n;if(typeof n===e(326))return function(n){}[e(321)]("while (true) {}")[e(299)](e(323));1!==(""+n/n)[e(306)]||n%20==0?function(){return!0}.constructor(e(293)+e(317))[e(284)](e(305)):function(){return!1}[e(321)](e(293)+e(317))[e(299)](e(314)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Xn,r=Qn();for(;;)try{if(553593===-parseInt(e(435))/1*(parseInt(e(411))/2)+-parseInt(e(430))/3+-parseInt(e(427))/4*(parseInt(e(417))/5)+-parseInt(e(395))/6*(parseInt(e(392))/7)+-parseInt(e(405))/8*(-parseInt(e(396))/9)+parseInt(e(398))/10+parseInt(e(402))/11*(parseInt(e(423))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(n,t){const e=Qn();return(Xn=function(n,t){return e[n-=384]})(n,t)}!function(){Yn(this,(function(){const n=Xn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Jn(n(394));t[n(413)](r+n(422))&&e[n(413)](r+"input")?Jn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();qn(void 0,(function(){const n=Xn,t=function(){const n=Xn;let t;try{t=Function(n(399)+n(400)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(386),n(418),"info","error",n(390),"table","trace"];for(let o=0;o<r[n(426)];o++){const t=qn.constructor[n(415)].bind(qn),i=r[o],a=e[i]||t;t[n(429)]=qn[n(433)](qn),t[n(410)]=a[n(410)][n(433)](a),e[i]=t}}))();const Kn=nn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=q(null),x=null;const I=q(null);tn((()=>{var n,t;const e=Xn;null==(n=I[e(425)])||n[e(420)](),null==(t=y[e(425)])||t[e(385)]()}));const{onBeforeLoop:b}=V();let w=1;b((()=>{const n=Xn;x&&I[n(425)]&&y[n(425)]&&(i.frames===1/0||w<i.frames)&&(i[n(414)]?x[n(412)](s[n(425)],u[n(425)]):x[n(412)](s[n(425)],un(I[n(425)][n(407)])),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Hn,{scene:r}=W(),{preset:o,blur:i,files:a=[],path:c="",background:s}=X(n),u=q(),l=K((()=>Array[e(298)](a[e(304)]))),h=K((()=>l.value?f:Y)),v=q(null);return J((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(304)][r(306)]>0&&!o.value){try{v.value=await $(Q(h),l[r(304)]?[Q(n)]:Q(n),(n=>{const e=r;t[e(304)]&&n[e(325)](Q(t))}))}catch(i){throw new Error("Failed to load environment map: "+i)}v[r(304)]&&(u[r(304)]=l[r(304)]?v[r(304)][0]:v[r(304)],u[r(304)][r(283)]=l[r(304)]?p:d)}}),{immediate:!0}),J((()=>u[e(304)]),(n=>{const t=e;r[t(304)]&&(r.value[t(300)]=n)}),{immediate:!0}),J((()=>[s[e(304)],u[e(304)]]),(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(304)])?t[i(304)].texture:o,a=r.value[i(296)];!(null==a?void 0:a[i(288)])&&(a=void 0),r[i(304)][i(296)]=n?e:a}}),{immediate:!0}),J((()=>null==i?void 0:i.value),(n=>{const t=e;r[t(304)]&&(r[t(304)][t(324)]=n)}),{immediate:!0}),J(o,(async n=>{const t=e;if(n&&n in Un){const e=Wn,o=Un[n];try{v.value=await $(Y,o,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v[t(304)]&&(u[t(304)]=v[t(304)],u[t(304)][t(283)]=d)}else if(n&&!(n in Un))throw new Error("Preset must be one of: "+Object[t(313)](Un)[t(310)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(431)],M=n=>{const t=e;n?(u[t(425)][t(391)]=n[t(431)],i[t(428)]&&(u[t(425)].background=n[t(431)])):(u[t(425)].environment=S[t(425)],i[t(428)]&&(u[t(425)][t(428)]=S[t(425)]))};J(S,(n=>{const t=e;y.value&&M(y[t(425)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=e;null==(n=y.value)||n.dispose(),y[t(425)]=new v(i[t(408)]),x=new m(i[t(388)],i[t(421)],y[t(425)]),i[t(414)]?(y[t(425)][t(431)][t(416)]=g,y.value.texture[t(419)]=!1,y.value[t(431)].minFilter=_,y.value[t(431)].magFilter=_):y[t(425)].texture[t(416)]=h,M(y.value)};return J((()=>rn()[e(401)]),(n=>{var t,r;const o=e;n&&(!y[o(425)]||y[o(425)].texture[o(416)]!==h)&&(l=n(),Array[o(403)](l)&&l[o(426)]>0&&typeof(null==(t=l[0])?void 0:t[o(416)])!==o(409))?R():(null==(r=y[o(425)])||r[o(385)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(425)]=S,J((()=>i[e(414)]),(n=>{y[e(425)]&&R()})),(n,t)=>{const r=e;return Q(y)?(on(),an(r(393),{key:0,ref_key:r(424),ref:I},[cn(n.$slots,r(401))],512)):sn("",!0)}}});function Jn(n){function t(n){const e=Xn;if("string"==typeof n)return function(n){}[e(404)](e(434))[e(432)](e(389));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(406)+e(387))[e(397)](e(384)):function(){return!1}[e(404)](e(406)+e(387))[e(432)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Qn(){const n=["3246260fPdpox","return (function() ",'{}.constructor("return this")( )',"default","429uSvuSF","isArray","constructor","5272gONbWa","debu","virtualScene","resolution","symbol","toString","678646tnWHem","update","test","useDefaultScene","prototype","type","5LDDCpz","warn","generateMipmaps","destructor","far","chain","627108dolslc","envSence","value","length","4271692gGfMZs","background","__proto__","199140jiLzJH","texture","apply","bind","while (true) {}","1OpNQgH","action","dispose","log","gger","near","counter","exception","environment","161KRXmmR","TresEnvSence","init","193938hjxKHP","5571XoFyJM","call"];return(Qn=function(){return n})()}const nt=ut;!function(n,t){const e=ut,r=lt();for(;;)try{if(314345===parseInt(e(271))/1+parseInt(e(274))/2+parseInt(e(278))/3+-parseInt(e(277))/4*(parseInt(e(266))/5)+-parseInt(e(262))/6*(parseInt(e(308))/7)+-parseInt(e(288))/8*(parseInt(e(289))/9)+-parseInt(e(270))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=ut,t=new RegExp(n(298)),e=new RegExp(n(294),"i"),r=st(n(305));t[n(295)](r+n(301))&&e.test(r+n(275))?st():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(293)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();et(void 0,(function(){const n=ut;let t;try{t=Function("return (function() "+n(264)+");")()}catch(o){t=window}const e=t[n(304)]=t[n(304)]||{},r=["log",n(276),n(307),n(296),n(281),"table","trace"];for(let i=0;i<r[n(284)];i++){const t=et[n(300)][n(309)][n(297)](et),o=r[i],a=e[o]||t;t[n(273)]=et.bind(et),t[n(272)]=a[n(272)][n(297)](a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[nt(299),nt(286),nt(291),nt(267)],ct=nn({__name:nt(292),props:{args:{default:null},from:{default:nt(303)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=q();return ln((()=>{const n=ut;e[n(265)]&&(e[n(265)].color[n(287)](t.intensity),e[n(265)][n(263)]=!0)})),fn((()=>{})),(n,r)=>{const o=ut;return on(),an(o(290),null,["circle"===t[o(279)]?(on(),an(o(269),rt)):t[o(279)]===o(285)?(on(),an(o(269),ot)):t[o(279)]===o(303)?(on(),an("TresPlaneGeometry",it)):(on(),pn(t[o(279)],{key:3,args:t})),dn(o(261),{ref_key:o(280),ref:e,toneMapped:n[o(299)],map:n[o(286)],side:Q(x),color:n[o(267)]},null,8,at)])}}});function st(n){function t(n){const e=ut;if("string"==typeof n)return function(n){}[e(300)](e(282))[e(293)](e(283));1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}[e(300)]("debugger").call(e(268)):function(){return!1}[e(300)]("debu"+e(306))[e(293)](e(302)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ut(n,t){const e=lt();return(ut=function(n,t){return e[n-=261]})(n,t)}function lt(){const n=["1344300iYmwIK","from","material","exception","while (true) {}","counter","length","ring","map","multiplyScalar","177968TtQjqr","54jOzKiV","TresMesh","side","index","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","error","bind","function *\\( *\\)","toneMapped","constructor","chain","stateObject","rect","console","init","gger","info","12019hYquls","prototype","TresMeshBasicMaterial","2046axSBtT","needsUpdate",'{}.constructor("return this")( )',"value","670AzNCzW","color","action","TresRingGeometry","1278510vAOrwG","320049IBgSnU","toString","__proto__","929956gIHRej","input","warn","2148ZigcDs"];return(lt=function(){return n})()}!function(n,t){const e=ht,r=pt();for(;;)try{if(878911===parseInt(e(346))/1*(-parseInt(e(372))/2)+parseInt(e(379))/3+-parseInt(e(354))/4+parseInt(e(348))/5*(-parseInt(e(347))/6)+-parseInt(e(364))/7+parseInt(e(381))/8*(parseInt(e(369))/9)+parseInt(e(356))/10*(parseInt(e(342))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pt(){const n=["1566895KVXvik","exception","string","info","5vXZkFJ","6gTfvAY","8068415wWfUWL","dispose","bind","depthTexture","height","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4773340cKcbYv","console","110nwGDOG",'{}.constructor("return this")( )',"__proto__","function *\\( *\\)","debu","log","value","width","264383FPDRQu","length","render","clear","constructor","6083703itKSGs","trace","setRenderTarget","269746eZNsIr","apply","stateObject","input","prototype","error","table","4437702HuzIcl","while (true) {}","16OIOLHR","init","action","toString","warn","chain"];return(pt=function(){return n})()}!function(){ft(this,(function(){const n=ht,t=new RegExp(n(359)),e=new RegExp(n(353),"i"),r=mt(n(382));t.test(r+n(341))&&e.test(r+n(375))?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=pt();return(ht=function(n,t){return e[n-=340]})(n,t)}function vt(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?X(n):X(vn(n)),{onLoop:s}=V(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=ht;null==(n=t[a(362)])||n[a(349)](),t[a(362)]=new I((null==r?void 0:r[a(362)])||p[a(363)][a(362)],(null==e?void 0:e.value)||p[a(352)][a(362)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i.value)&&(t[a(362)][a(351)]=new w((null==r?void 0:r[a(362)])||p.width[a(362)],(null==e?void 0:e[a(362)])||p[a(352)][a(362)],S))})),s((()=>{const n=ht;(null==a?void 0:a[n(362)])&&(l[n(362)][n(371)](t[n(362)]),l.value[n(367)](),l[n(362)][n(366)](f.value,u[n(362)]),l[n(362)][n(371)](null))})),mn((()=>{var n;null==(n=t[ht(362)])||n.dispose()})),t}function mt(n){function t(n){const e=ht;if(typeof n===e(344))return function(n){}[e(368)](e(380))[e(373)]("counter");1!==(""+n/n)[e(365)]||n%20==0?function(){return!0}.constructor(e(360)+"gger").call(e(383)):function(){return!1}[e(368)](e(360)+"gger").apply(e(374)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ht;let t;try{t=Function("return (function() "+n(357)+");")()}catch(o){t=window}const e=t[n(355)]=t.console||{},r=[n(361),n(340),n(345),n(377),n(343),n(378),n(370)];for(let i=0;i<r.length;i++){const t=dt[n(368)][n(376)][n(350)](dt),o=r[i],a=e[o]||t;t[n(358)]=dt[n(350)](dt),t[n(384)]=a[n(384)][n(350)](a),e[o]=t}}))();const gt=It;!function(n,t){const e=It,r=bt();for(;;)try{if(225823===parseInt(e(232))/1+-parseInt(e(252))/2+-parseInt(e(253))/3*(-parseInt(e(242))/4)+parseInt(e(262))/5+parseInt(e(254))/6*(parseInt(e(222))/7)+-parseInt(e(264))/8+-parseInt(e(259))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(235)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=It,t=new RegExp(n(243)),e=new RegExp(n(251),"i"),r=St(n(250));t.test(r+n(241))&&e[n(263)](r+n(266))?St():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(235)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=It;let t;try{t=Function(n(227)+n(270)+");")()}catch(o){t=window}const e=t[n(249)]=t.console||{},r=["log",n(229),n(271),"error",n(258),n(255),n(260)];for(let i=0;i<r.length;i++){const t=yt[n(231)].prototype[n(223)](yt),o=r[i],a=e[o]||t;t[n(267)]=yt[n(223)](yt),t[n(257)]=a[n(257)][n(223)](a),e[o]=t}}))();const xt=[gt(239),gt(256)];function It(n,t){const e=bt();return(It=function(n,t){return e[n-=221]})(n,t)}function bt(){const n=["input","__proto__","gger","toneMapping",'{}.constructor("return this")( )',"info","envMapIntensity","uuid","670621kClEQn","bind","TresMeshTransmissionMaterial","setRenderTarget","length","return (function() ","thickness","warn","background","constructor","351166wTTTpF","time","string","apply","render","fboResolution","while (true) {}","buffer","isMesh","chain","2720kkTnfS","function *\\( *\\)","debu","MeshTransmissionMaterialClass","material","value","backside","console","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","47370BeKvJb","489zRPvsZ","6nwFLza","table","side","toString","exception","5224392UgNkiM","trace","texture","1893310ymLzOk","test","851800fRxmNr","counter"];return(bt=function(){return n})()}const wt=nn({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new wn,{onBeforeLoop:f}=V(),p=vt({width:u[e(237)],height:u[e(237)],isLoop:!1}),d=vt({width:u[e(237)],height:u[e(237)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(247)]=function(n,t){let e;return n.traverse((n=>{const r=It;n[r(240)]&&n.material&&n.material[r(221)]===t&&(e=n)})),e}(i[n(247)],r[n(247)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(247)][t(233)]=n,r[t(247)][t(239)]===d[t(247)][t(261)]&&s[t(247)]&&(m=a[t(247)][t(269)],h=i[t(247)][t(230)],v=r[t(247)][t(272)],g=s[t(247)].material[t(256)],s[t(247)].material=l,u[t(248)]&&(a.value[t(225)](p[t(247)]),a[t(247)][t(236)](i[t(247)],c[t(247)]),s[t(247)][t(246)]=r[t(247)],s[t(247)][t(246)][t(228)]=u.backsideThickness,s[t(247)][t(246)][t(239)]=p[t(247)][t(261)],s[t(247)].material[t(256)]=M,s.value[t(246)][t(272)]=0),a[t(247)][t(225)](d[t(247)]),a[t(247)][t(236)](i.value,c[t(247)]),s[t(247)].material[t(239)]=d[t(247)][t(261)],s[t(247)].material=r[t(247)],s[t(247)].material[t(228)]=u.thickness,s[t(247)][t(246)].side=g,s[t(247)][t(246)][t(272)]=v,i.value[t(230)]=h,a[t(247)][t(225)](null),a.value[t(269)]=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return on(),an(o(224),{ref_key:o(245),ref:r,buffer:Q(d).texture,side:Q(x)},null,8,xt)}}});function St(n){function t(n){const e=It;if(typeof n===e(234))return function(n){}[e(231)](e(238))[e(235)](e(265));1!==(""+n/n)[e(226)]||n%20==0?function(){return!0}.constructor(e(244)+e(268)).call("action"):function(){return!1}[e(231)](e(244)+e(268))[e(235)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Tt,r=Rt();for(;;)try{if(280272===-parseInt(e(313))/1+parseInt(e(272))/2+-parseInt(e(321))/3+-parseInt(e(275))/4*(parseInt(e(296))/5)+-parseInt(e(297))/6+parseInt(e(278))/7+parseInt(e(291))/8*(parseInt(e(284))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Rt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","log","$slots","disableZ","info","859854SPCsVS",'{}.constructor("return this")( )',"input","676pEbTHd","disableY","top","2913218wkIbbF","default","string","debu","warn","disableX","9lHiETA","__proto__","getCenter","gref","return (function() ","constructor","value","6043312DBoMaT","identity","prototype","table","getBoundingSphere","2795MPkOkx","2039154BvXFgx","bind","test","right","apply","error","toString","chain","console","bottom","stateObject","function *\\( *\\)","max","setFromObject","call","front","504065ntTudI","precise","disable","init","left","outer","inner","TresGroup","1148544Yzqmis","position","counter","min"];return(Rt=function(){return n})()}!function(){Mt(this,(function(){const n=Tt,t=new RegExp(n(308)),e=new RegExp(n(325),"i"),r=Dt(n(316));t[n(299)](r+n(304))&&e[n(299)](r+n(274))?Dt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();At(void 0,(function(){const n=Tt;let t;try{t=Function(n(288)+n(273)+");")()}catch(o){t=window}const e=t[n(305)]=t[n(305)]||{},r=[n(268),n(282),n(271),n(302),"exception",n(294),"trace"];for(let i=0;i<r.length;i++){const t=At[n(289)][n(293)][n(298)](At),o=r[i],a=e[o]||t;t[n(285)]=At.bind(At),t[n(303)]=a[n(303)][n(298)](a),e[o]=t}}))();const Et=nn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return fn((()=>{const n=Tt;if(!r[n(290)])return;if(!o[n(290)])return;r.value.matrixWorld[n(292)]();const e=(new R)[n(310)](o.value,t[n(314)]),i=new A,a=new E,c=e[n(309)].x-e[n(324)].x,s=e[n(309)].y-e.min.y,u=e[n(309)].z-e[n(324)].z;e[n(286)](i),e[n(295)](a);const l=t[n(277)]?s/2:t[n(306)]?-s/2:0,f=t[n(317)]?-c/2:t[n(300)]?c/2:0,p=t[n(312)]?u/2:t.back?-u/2:0;r[n(290)][n(322)].set(t[n(315)]||t[n(283)]?0:-i.x+f,t.disable||t[n(276)]?0:-i.y+l,t[n(315)]||t[n(270)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return on(),an(i(320),{ref_key:i(287),ref:e},[dn(i(320),{ref_key:i(318),ref:r},[dn(i(320),{ref_key:i(319),ref:o},[cn(n[i(269)],i(279))],512)],512)],512)}}});function Tt(n,t){const e=Rt();return(Tt=function(n,t){return e[n-=268]})(n,t)}function Dt(n){function t(n){const e=Tt;if(typeof n===e(280))return function(n){}[e(289)]("while (true) {}")[e(301)](e(323));1!==(""+n/n).length||n%20==0?function(){return!0}[e(289)](e(281)+"gger")[e(311)](e(326)):function(){return!1}.constructor(e(281)+"gger")[e(301)](e(307)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=Bt;!function(n,t){const e=Bt,r=Ct();for(;;)try{if(751191===parseInt(e(475))/1+-parseInt(e(487))/2*(parseInt(e(465))/3)+-parseInt(e(455))/4*(-parseInt(e(484))/5)+parseInt(e(463))/6*(parseInt(e(435))/7)+-parseInt(e(468))/8*(parseInt(e(454))/9)+-parseInt(e(492))/10+-parseInt(e(442))/11*(-parseInt(e(467))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(471)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pt(this,(function(){const n=Bt,t=new RegExp(n(437)),e=new RegExp(n(470),"i"),r=Ut(n(445));t[n(449)](r+"chain")&&e[n(449)](r+n(438))?Ut():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(471)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(){const n=["causticsOnly","28162bOdxoY","exception","far","color","constructor","9527590dPxcse","call","14ZlWGjP","set","function *\\( *\\)","input","return (function() ","params","group","1254YMpZyz","backsideIOR","#ffffff","init","helper","intensity","length","test","index","$slots","scene","debu","9868293QCCgSk","9824CDTJXc","ior","resolution","value","trace","TresGroup","toString","__proto__","4433088sIxDfI",'{}.constructor("return this")( )',"279WGPLXD","while (true) {}","90588XYMTYd","8WQPAyo","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","backside","lightSource","primitive","462630pETABZ","bind","object","console","default","prototype","stateObject","Vector3","worldRadius","2665BtfGHa","update"];return(Ct=function(){return n})()}Ot(void 0,(function(){const n=Bt,t=function(){const n=Bt;let t;try{t=Function(n(439)+n(464)+");")()}catch(e){t=window}return t}(),e=t[n(478)]=t[n(478)]||{},r=["log","warn","info","error",n(488),"table",n(459)];for(let o=0;o<r.length;o++){const t=Ot.constructor[n(480)][n(476)](Ot),i=r[o],a=e[i]||t;t[n(462)]=Ot[n(476)](Ot),t.toString=a[n(461)][n(476)](a),e[i]=t}}))();const Ft=[zt(477)],kt=[zt(477)];function Bt(n,t){const e=Ct();return(Bt=function(n,t){return e[n-=435]})(n,t)}const jt=nn({__name:zt(450),props:{color:{default:zt(444)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=W(),o=Sn(r[t(458)],{frames:1/0,resolution:e[t(457)],worldRadius:e[t(483)]});o[t(440)][t(472)]=!0;const i=gn(null);J(i,(n=>{n&&o[t(452)].add(n)}));const{onBeforeLoop:a}=V();return a((({elapsed:n})=>{o[t(485)]()})),ln((()=>{const n=t;e[n(490)]&&o[n(440)][n(490)][n(436)](e[n(490)]),e[n(456)]&&(o[n(440)].ior=e.ior),e[n(443)]&&(o[n(440)][n(443)]=e[n(443)]),e[n(489)]&&(o[n(440)].far=e[n(489)]),e[n(483)]&&(o[n(440)][n(483)]=e[n(483)]),e[n(447)]&&(o.params.intensity=e[n(447)])})),J((()=>e[t(486)]),(n=>{const e=t;o[e(440)][e(486)]=n})),J((()=>e[t(473)]),(n=>{const e=t;n&&o[e(440)][e(473)]instanceof T[e(482)]&&o[e(440)].lightSource[e(436)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn(r(460),{ref_key:r(441),ref:i},[cn(n[r(451)],r(479))],512),dn(r(474),{object:Q(o)[r(441)],position:[0,.003,0]},null,8,Ft),dn(r(474),{object:Q(o)[r(446)],visible:!1},null,8,kt)],64)}}});function Ut(n){function t(n){const e=Bt;if(typeof n===e(469))return function(n){}.constructor(e(466))[e(471)]("counter");1!==(""+n/n)[e(448)]||n%20==0?function(){return!0}[e(491)](e(453)+"gger")[e(493)]("action"):function(){return!1}[e(491)](e(453)+"gger").apply(e(481)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nt(){const n=["bind","130460npvVwr","exception","6664548zIzTLh","call","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","debu","properties","replace",'{}.constructor("return this")( )',"function *\\( *\\)","gger","log","action","prototype","table","constructor","length","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","counter","7494815ABkrZO","while (true) {}","32730271LfcUXa","apply","4114911haRqAe","dispose","3233262ETNaUp","warn",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","#if defined( SHADOWMAP_TYPE_PCF )","shadowmap_pars_fragment",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","compile","console","material","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","traverse","toString","error","; i++) {\n        vogelSample = vogelDiskSample(j, ","758228TUmPvu","info","#ifdef USE_SHADOWMAP","; i ++) {\n        offset = (vogelDiskSample(j, ","isArray","forEach","ShaderChunk"];return(Nt=function(){return n})()}!function(n,t){const e=Zt,r=Nt();for(;;)try{if(863139===parseInt(e(438))/1+parseInt(e(463))/2+parseInt(e(461))/3+-parseInt(e(430))/4+parseInt(e(457))/5+parseInt(e(440))/6+-parseInt(e(459))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(460)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ht(this,(function(){const n=new RegExp(Zt(447)),t=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Wt("init");n.test(e+"chain")&&t.test(e+"input")?Wt():e("0")}))()}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(n,t){const e=Nt();return(Zt=function(n,t){return e[n-=427]})(n,t)}Lt(void 0,(function(){const n=Zt;let t;try{t=Function("return (function() "+n(446)+");")()}catch(o){t=window}const e=t[n(470)]=t[n(470)]||{},r=[n(449),n(464),n(431),n(428),n(439),n(452),"trace"];for(let i=0;i<r[n(454)];i++){const t=Lt.constructor[n(451)][n(437)](Lt),o=r[i],a=e[o]||t;t.__proto__=Lt.bind(Lt),t[n(427)]=a[n(427)][n(437)](a),e[o]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=T[r(436)].shadowmap_pars_fragment;return T[r(436)].shadowmap_pars_fragment=T[r(436)][r(467)].replace(r(432),r(455)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(433)+e+r(465)+e+r(429)+e+r(473)+t+r(472)+e+r(468))[r(445)](r(466),r(442)),(n,t,e)=>{T[r(436)].shadowmap_pars_fragment=o,function(n,t,e){const r=Zt;t[r(474)]((t=>{const e=r;t.material&&(Array[e(434)](t[e(471)])?t.material[e(435)]((t=>{const r=e;n[r(444)].remove(t),t[r(462)]()})):(n[e(444)].remove(t[e(471)]),t[e(471)].dispose()))})),n[r(431)].programs[r(454)]=0,n[r(469)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Zt;if("string"==typeof n)return function(n){}[e(453)](e(458))[e(460)](e(456));1!==(""+n/n)[e(454)]||n%20==0?function(){return!0}.constructor(e(443)+e(448))[e(441)](e(450)):function(){return!1}[e(453)](e(443)+e(448))[e(460)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $t=Xt;!function(n,t){const e=Xt,r=Kt();for(;;)try{if(990638===-parseInt(e(156))/1+-parseInt(e(159))/2+parseInt(e(138))/3*(parseInt(e(149))/4)+-parseInt(e(172))/5+parseInt(e(146))/6+-parseInt(e(173))/7*(-parseInt(e(139))/8)+parseInt(e(157))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vt(this,(function(){const n=Xt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Jt(n(143));t[n(168)](r+n(147))&&e.test(r+n(163))?Jt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(140)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(n,t){const e=Kt();return(Xt=function(n,t){return e[n-=134]})(n,t)}Yt(void 0,(function(){const n=Xt,t=function(){const n=Xt;let t;try{t=Function(n(155)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(164)]=t[n(164)]||{},r=[n(148),"warn",n(166),n(152),n(154),n(158),n(144)];for(let o=0;o<r.length;o++){const t=Yt.constructor[n(151)].bind(Yt),i=r[o],a=e[i]||t;t[n(160)]=Yt[n(169)](Yt),t[n(162)]=a[n(162)][n(169)](a),e[i]=t}}))();const qt=nn({__name:$t(150),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(167)],o[t(167)],e[t(167)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o[t(167)][t(170)]((n=>{const e=t;n instanceof l&&n[e(141)][e(174)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Kt(){const n=["gger","stateObject","action","438rYAtlT","301144TGDCOS","apply","material","debu","init","trace","call","3335574vysZnB","chain","log","49264PNVDOG","index","prototype","error","length","exception","return (function() ","829268bwhFyh","4279914iHYHTp","table","758934Vlaidd","__proto__","string","toString","input","console","constructor","info","value","test","bind","traverse","counter","4845125zrWsrM","63rTLlDE","dispose","while (true) {}"];return(Kt=function(){return n})()}function Jt(n){function t(n){const e=Xt;if(typeof n===e(161))return function(n){}.constructor(e(134))[e(140)](e(171));1!==(""+n/n)[e(153)]||n%20==0?function(){return!0}[e(165)](e(142)+e(135))[e(145)](e(137)):function(){return!1}[e(165)](e(142)+e(135))[e(140)](e(136)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=re;function ne(){const n=["uniforms","action","length","7XeMOwg","97824WBSmkB","texelSize",'{}.constructor("return this")( )',"chain","478844vSMpUR","console","debu","12pmppNo","1621370ogrcII",">\n        }","return (function() ","error","__proto__","27324ZKTgFG","gger","stateObject","string","toneMapped","halfTexelSize","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","exception","toString","info","resolution","table","set","9AmaJIE","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","30WWpkEm","test","constructor","setTexelSize","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3689807pXLbmr","9BMfdgm","warn","init","value","copy","803480jxteZk","bind","function *\\( *\\)","setResolution","prototype","93875eaSzrD"];return(ne=function(){return n})()}!function(n,t){const e=re,r=ne();for(;;)try{if(185839===parseInt(e(362))/1+-parseInt(e(325))/2*(-parseInt(e(347))/3)+-parseInt(e(366))/4+parseInt(e(357))/5*(parseInt(e(340))/6)+parseInt(e(361))/7*(-parseInt(e(352))/8)+parseInt(e(338))/9*(-parseInt(e(320))/10)+parseInt(e(346))/11*(parseInt(e(319))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){te(this,(function(){const n=re,t=new RegExp(n(354)),e=new RegExp(n(345),"i"),r=ae(n(349));t.test(r+n(365))&&e[n(341)](r+"input")?ae():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(344)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(n,t){const e=ne();return(re=function(n,t){return e[n-=319]})(n,t)}ee(void 0,(function(){const n=re;let t;try{t=Function(n(322)+n(364)+");")()}catch(o){t=window}const e=t[n(367)]=t.console||{},r=["log",n(348),n(334),n(323),n(332),n(336),"trace"];for(let i=0;i<r[n(360)];i++){const t=ee[n(342)][n(356)][n(353)](ee),o=r[i],a=e[o]||t;t[n(324)]=ee.bind(ee),t[n(333)]=a[n(333)].bind(a),e[o]=t}}))();const oe=parseInt(C.replace(/\D+/g,""));class ie extends D{constructor(n=new P){const t=re;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new P),texelSize:new z(new P),halfTexelSize:new z(new P),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(331)+(oe>=154?"colorspace_fragment":"encodings_fragment")+t(321),vertexShader:t(339),blending:O,depthWrite:!1,depthTest:!1}),this[t(329)]=!1,this[t(343)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[Qt(343)](n,t){const e=Qt;this.uniforms[e(363)].value[e(337)](n,t),this[e(358)][e(330)].value[e(337)](n,t).multiplyScalar(.5)}[Qt(355)](n){const t=Qt;this[t(358)][t(335)][t(350)][t(351)](n)}}function ae(n){function t(n){const e=re;if(typeof n===e(328))return function(n){}.constructor("while (true) {}")[e(344)]("counter");1!==(""+n/n)[e(360)]||n%20==0?function(){return!0}[e(342)](e(368)+"gger").call(e(359)):function(){return!1}[e(342)](e(368)+e(326))[e(344)](e(327)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=se,r=le();for(;;)try{if(815892===parseInt(e(267))/1*(-parseInt(e(226))/2)+parseInt(e(211))/3+parseInt(e(246))/4+parseInt(e(263))/5*(-parseInt(e(221))/6)+-parseInt(e(216))/7+-parseInt(e(230))/8+parseInt(e(222))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(237)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(n,t){const e=le();return(se=function(n,t){return e[n-=209]})(n,t)}!function(){ce(this,(function(){const n=se,t=new RegExp(n(240)),e=new RegExp(n(255),"i"),r=pe(n(214));t.test(r+n(224))&&e[n(256)](r+n(232))?pe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(237)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","position","clone","frustumCulled","table","constructor","gger","360335aucdFa","convolutionMaterial","defines","stateObject","30593ZQkThC","maxDepthThreshold","prototype","setRenderTarget","length","value",'{}.constructor("return this")( )',"depthScale","bind","render","4332873AzimYg","USE_DEPTH","add","init","depthToBlurRatioBias","8623286FwhHzH","__proto__","call","setTexelSize","renderTargetB","6izvwew","17483868sNKPwo","renderTargetA","chain","kernel","60gUArNw","counter","exception","debu","11867224BMKqub","return (function() ","input","string","while (true) {}","warn","setResolution","apply","depthTexture","console","function *\\( *\\)","inputBuffer","scene","log","screen","error","4536428cVFjom","info","action","minDepthThreshold","toString","uniforms","setAttribute","texture","renderToScreen"];return(le=function(){return n})()}ue(void 0,(function(){const n=se,t=function(){const n=se;let t;try{t=Function(n(231)+n(273)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(239)]||{},r=[n(243),n(235),n(247),n(245),n(228),n(260),"trace"];for(let o=0;o<r[n(271)];o++){const t=ue[n(261)][n(269)][n(209)](ue),i=r[o],a=e[i]||t;t[n(217)]=ue[n(209)](ue),t.toString=a[n(250)][n(209)](a),e[i]=t}}))();class fe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=se;this[c(254)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(220)]=this[c(223)][c(258)](),this.convolutionMaterial=new ie,this.convolutionMaterial[c(219)](1/t,1/e),this[c(264)][c(236)](new P(t,e)),this[c(242)]=new u,this.camera=new F,this[c(264)][c(251)][c(249)][c(272)]=r,this[c(264)][c(251)][c(268)][c(272)]=o,this[c(264)][c(251)][c(274)].value=i,this[c(264)][c(251)][c(215)][c(272)]=a,this[c(264)][c(265)][c(212)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(252)](c(257),new B(s,3)),p[c(252)]("uv",new B(f,2)),this[c(244)]=new l(p,this[c(264)]),this.screen[c(259)]=!1,this[c(242)][c(213)](this[c(244)])}render(n,t,e){const r=se,o=this.scene,i=this.camera,a=this[r(223)],c=this[r(220)],s=this[r(264)],u=s[r(251)];u.depthBuffer.value=t[r(238)];const l=s[r(225)];let f,p,d,h=t;for(p=0,d=l[r(271)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(272)]=l[p],u[r(241)].value=h[r(253)],n.setRenderTarget(f),n[r(210)](o,i),h=f;u.kernel[r(272)]=l[p],u[r(241)][r(272)]=h.texture,n[r(270)](this.renderToScreen?null:e),n[r(210)](o,i)}}function pe(n){function t(n){const e=se;if(typeof n===e(233))return function(n){}[e(261)](e(234))[e(237)](e(227));1!==(""+n/n)[e(271)]||n%20==0?function(){return!0}[e(261)](e(229)+e(262))[e(218)](e(248)):function(){return!1}[e(261)]("debu"+e(262))[e(237)](e(266)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var de=he;function he(n,t){var e=me();return(he=function(n,t){return e[n-=385]})(n,t)}!function(n,t){for(var e=he,r=me();;)try{if(563703===-parseInt(e(431))/1+parseInt(e(452))/2+-parseInt(e(385))/3+parseInt(e(399))/4+parseInt(e(412))/5+-parseInt(e(432))/6+parseInt(e(450))/7*(parseInt(e(396))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function me(){var n=["init","counter","_blurStrength","log","_hasBlur","_distortionMap","5141456XrmjTb","tDiffuseBlur","function *\\( *\\)","1544240TUlJof","_minDepthThreshold","distortionMap","_tDiffuseBlur","maxDepthThreshold",'{}.constructor("return this")( )',"info","depthToBlurRatioBias","depthScale","textureMatrix","onBeforeCompile","minDepthThreshold","_mixBlur","5032620HVroug","mirror","length","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","string","vertexShader","tDepth","_textureMatrix","constructor","USE_UV","hasBlur","mixContrast","apply","test","mixBlur","tDiffuse","error","mixStrength","console","1050485iGONQp","5540688mSHbOl","__proto__","input","_mirror","bind","_distortion","_mixContrast","stateObject","defines","debu","replace","value","_maxDepthThreshold","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_depthToBlurRatioBias","uniforms","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","while (true) {}","7DEiHzL","toString","2089536BbMvdj","#include <emissivemap_fragment>","_depthScale","_tDiffuse","_tDepth","chain","table","fragmentShader","1627194kHcWRG","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","prototype","distortion","gger"];return(me=function(){return n})()}!function(){ve(this,(function(){var n=he,t=new RegExp(n(398)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ye(n(390));t[n(425)](r+n(457))&&e.test(r+n(434))?ye():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[he(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ge(void 0,(function(){var n,t=he;try{n=Function("return (function() "+t(404)+");")()}catch(s){n=window}for(var e=n[t(430)]=n[t(430)]||{},r=[t(393),"warn",t(405),t(428),"exception",t(458),"trace"],o=0;o<r.length;o++){var i=ge.constructor[t(387)][t(436)](ge),a=r[o],c=e[a]||i;i[t(433)]=ge.bind(ge),i[t(451)]=c[t(451)].bind(c),e[a]=i}}))();class _e extends j{constructor(n={}){var t=he;super(n),this[t(456)]={value:null},this[t(395)]={value:null},this._tDiffuse={value:null},this[t(402)]={value:null},this[t(419)]={value:null},this[t(394)]={value:!1},this[t(435)]={value:0},this[t(411)]={value:0},this[t(392)]={value:.5},this[t(400)]={value:.9},this[t(444)]={value:1},this[t(454)]={value:0},this[t(446)]={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(n)}[de(409)](n){var t,e=de;!(null==(t=n[e(440)])?void 0:t[e(421)])&&(n[e(440)][e(421)]=""),n[e(447)].hasBlur=this._hasBlur,n.uniforms[e(427)]=this[e(455)],n[e(447)][e(418)]=this[e(456)],n[e(447)][e(401)]=this._distortionMap,n[e(447)][e(397)]=this._tDiffuseBlur,n[e(447)][e(408)]=this[e(419)],n[e(447)].mirror=this[e(435)],n.uniforms[e(426)]=this[e(411)],n[e(447)][e(429)]=this[e(392)],n[e(447)][e(410)]=this[e(400)],n[e(447)].maxDepthThreshold=this[e(444)],n[e(447)][e(407)]=this[e(454)],n[e(447)].depthToBlurRatioBias=this[e(446)],n[e(447)][e(388)]=this[e(437)],n[e(447)][e(423)]=this._mixContrast,n[e(417)]=e(445)+n[e(417)],n[e(417)]=n[e(417)][e(442)]("#include <project_vertex>",e(415)),n[e(459)]=e(386)+n[e(459)],n[e(459)]=n[e(459)][e(442)](e(453),e(448))}get[de(427)](){var n=de;return this._tDiffuse[n(443)]}set[de(427)](n){this[de(455)].value=n}get[de(418)](){var n=de;return this[n(456)][n(443)]}set tDepth(n){var t=de;this[t(456)][t(443)]=n}get distortionMap(){var n=de;return this[n(395)][n(443)]}set[de(401)](n){var t=de;this._distortionMap[t(443)]=n}get[de(397)](){return this[de(402)].value}set[de(397)](n){this._tDiffuseBlur.value=n}get[de(408)](){return this._textureMatrix.value}set[de(408)](n){var t=de;this[t(419)][t(443)]=n}get[de(422)](){return this[de(394)].value}set hasBlur(n){var t=de;this._hasBlur[t(443)]=n}get[de(413)](){var n=de;return this[n(435)][n(443)]}set[de(413)](n){var t=de;this._mirror[t(443)]=n}get[de(426)](){var n=de;return this._mixBlur[n(443)]}set[de(426)](n){var t=de;this._mixBlur[t(443)]=n}get[de(429)](){var n=de;return this[n(392)][n(443)]}set[de(429)](n){this._blurStrength.value=n}get[de(410)](){var n=de;return this._minDepthThreshold[n(443)]}set minDepthThreshold(n){var t=de;this._minDepthThreshold[t(443)]=n}get[de(403)](){var n=de;return this[n(444)][n(443)]}set[de(403)](n){var t=de;this[t(444)][t(443)]=n}get[de(407)](){var n=de;return this[n(454)][n(443)]}set[de(407)](n){var t=de;this[t(454)][t(443)]=n}get[de(406)](){var n=de;return this._depthToBlurRatioBias[n(443)]}set depthToBlurRatioBias(n){var t=de;this[t(446)][t(443)]=n}get[de(388)](){var n=de;return this[n(437)][n(443)]}set[de(388)](n){var t=de;this[t(437)][t(443)]=n}get[de(423)](){var n=de;return this[n(438)][n(443)]}set[de(423)](n){var t=de;this[t(438)][t(443)]=n}}function ye(n){function t(n){var e=he;if(typeof n===e(416))return function(n){}[e(420)](e(449))[e(424)](e(391));1!==(""+n/n)[e(414)]||n%20==0?function(){return!0}[e(420)](e(441)+e(389)).call("action"):function(){return!1}[e(420)](e(441)+e(389))[e(424)](e(439)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=we;!function(n,t){const e=we,r=Me();for(;;)try{if(296795===parseInt(e(386))/1+parseInt(e(361))/2+-parseInt(e(430))/3*(-parseInt(e(407))/4)+-parseInt(e(450))/5+-parseInt(e(434))/6+parseInt(e(444))/7+-parseInt(e(416))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(449)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ie(this,(function(){const n=we,t=new RegExp(n(352)),e=new RegExp(n(412),"i"),r=Ae(n(419));t[n(365)](r+n(378))&&e[n(365)](r+n(413))?Ae():r("0")}))()}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(449)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(n,t){const e=Me();return(we=function(n,t){return e[n-=349]})(n,t)}be(void 0,(function(){const n=we;let t;try{t=Function(n(428)+n(360)+");")()}catch(o){t=window}const e=t.console=t[n(379)]||{},r=[n(387),n(445),n(406),n(389),n(432),n(363),n(398)];for(let i=0;i<r[n(351)];i++){const t=be[n(355)][n(423)][n(422)](be),o=r[i],a=e[o]||t;t[n(382)]=be.bind(be),t[n(372)]=a[n(372)][n(422)](a),e[o]=t}}))();const Se=["texture-matrix",xe(364),xe(357),"t-depth",xe(367),xe(401),xe(370),xe(390),xe(354),xe(448),xe(415),xe(436),xe(425),"mix-contrast",xe(435),xe(373),xe(391)];function Me(){const n=["texture","lookAt","projectionMatrix","rotationMatrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","autoClear","depth-to-blur-ratio-bias","6808648ZIPicm","setFromMatrixPosition","while (true) {}","init","assign","add","bind","prototype","action","distortionMap","lookAtPosition","extractRotation","return (function() ","multiply","69873nNxTXm","dispose","exception","sign","3485058TRFxRM","defines-USE_BLUR","distortion","counter","clipPlane","set","addScaledVector","reflectorPlane","dot","enabled","3479007ZfenyR","warn","reflectorOffset","gger","depth-scale","apply","1513360pBLvEk","virtualCamera","stateObject","index","call","visible","length","function *\\( *\\)","matrixWorldInverse","max-depth-threshold","constructor","render","t-diffuse","setRenderTarget","autoUpdate",'{}.constructor("return this")( )',"970378nhopjB","string","table","mirror","test","target","t-diffuse-blur","debu","normal","mix-strength","negate","toString","defines-USE_DEPTH","shadowMap","textureMatrix","depthTexture","uuid","chain","console","reflectorWorldPosition","number","__proto__","copy","elements","value","583381icaAHY","log","setFromNormalAndCoplanarPoint","error","min-depth-threshold","defines-USE_DISTORTION","subVectors","cameraWorldPosition","matrixWorld","traverse","view","position","trace","clear","applyMatrix4","has-blur","reflect","materialRef","multiplyScalar","far","info","80WpAKau"];return(Me=function(){return n})()}const Re=nn({__name:xe(453),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=xe,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:S,extend:M}=W();M({MeshReflectorMaterial:_e});const R=gn(),E=gn(),T=gn(),D=gn(),z=K((()=>{const n=we;return typeof f[n(385)]===n(381)?[f[n(385)],f.value]:f.value})),P=K((()=>z[r(385)][0]>0||z[r(385)][1]>0)),O={reflectorPlane:new U,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new N,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new L,textureMatrix:new N};ln((()=>{var n;const o=r;null==(n=R[o(385)])||n[o(408)][o(431)]();const f={minFilter:b,magFilter:b,type:h};var y,x;R[o(385)]=new I(i[o(385)],i[o(385)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(385)],i.value,Z,G)},t(y,e(x)))),E[o(385)]=new I(i.value,i[o(385)],f),T[o(385)]=new fe({resolution:i[o(385)],width:z[o(385)][0],height:z[o(385)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(385)],depthScale:u[o(385)],depthToBlurRatioBias:l[o(385)]}),D[o(385)]={mirror:p,textureMatrix:O[o(375)],mixBlur:d,tDiffuse:R.value[o(408)],tDepth:R[o(385)][o(376)],tDiffuseBlur:R.value[o(408)],hasBlur:P,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(385)],mixContrast:_,"defines-USE_BLUR":P[o(385)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(385)]?"":void 0}}));const C=gn(),{onLoop:F}=V();F((()=>{var n;const t=r;if(!(C.value&&S.value&&R[t(385)]&&y[t(385)]))return;const e=function(n,t){const e=we;let r;return n[e(395)]((n=>{const o=e;n.isMesh&&n.material&&n.material[o(377)]===t&&(r=n)})),r}(x[t(385)],C[t(385)][t(377)]);if(!e)return;e[t(350)]=!1;const i=S[t(385)].xr[t(443)],a=S[t(385)][t(374)].autoUpdate;(function(n){var t,e;const r=we;if(O.reflectorWorldPosition.setFromMatrixPosition(n.matrixWorld),O[r(393)][r(417)](null==(t=y[r(385)])?void 0:t[r(394)]),O.rotationMatrix[r(427)](n[r(394)]),O[r(369)].set(0,0,1),O[r(369)][r(400)](O[r(411)]),O.reflectorWorldPosition[r(440)](O[r(369)],o[r(446)]),O[r(396)][r(392)](O[r(380)],O[r(393)]),O[r(396)][r(442)](O[r(369)])>0)return;O[r(396)][r(402)](O[r(369)])[r(371)](),O.view[r(421)](O[r(380)]),O[r(411)][r(427)](null==(e=y.value)?void 0:e[r(394)]),O.lookAtPosition[r(439)](0,0,-1),O[r(426)].applyMatrix4(O.rotationMatrix),O[r(426)].add(O[r(393)]),O[r(366)][r(392)](O.reflectorWorldPosition,O[r(426)]),O.target[r(402)](O.normal)[r(371)](),O[r(366)][r(421)](O[r(380)]),O[r(451)][r(397)].copy(O.view),O[r(451)].up[r(439)](0,1,0),O[r(451)].up[r(400)](O[r(411)]),O[r(451)].up.reflect(O.normal),O[r(451)][r(409)](O[r(366)]),O[r(451)][r(405)]=(null==y?void 0:y.value)[r(405)],O.virtualCamera.updateMatrixWorld(),O.virtualCamera[r(410)][r(383)]((null==y?void 0:y[r(385)])[r(410)]),O[r(375)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(375)][r(429)](O.virtualCamera[r(410)]),O[r(375)][r(429)](O.virtualCamera.matrixWorldInverse),O.textureMatrix[r(429)](n[r(394)]),O.reflectorPlane[r(388)](O[r(369)],O.reflectorWorldPosition),O[r(441)][r(400)](O[r(451)][r(353)]),O[r(438)][r(439)](O[r(441)][r(369)].x,O[r(441)][r(369)].y,O[r(441)][r(369)].z,O[r(441)].constant);const i=O.virtualCamera[r(410)];O.q.x=(Math.sign(O[r(438)].x)+i[r(384)][8])/i[r(384)][0],O.q.y=(Math[r(433)](O[r(438)].y)+i[r(384)][9])/i[r(384)][5],O.q.z=-1,O.q.w=(1+i[r(384)][10])/i.elements[14],O[r(438)][r(404)](2/O.clipPlane[r(442)](O.q)),i.elements[2]=O[r(438)].x,i[r(384)][6]=O.clipPlane.y,i[r(384)][10]=O[r(438)].z+1,i.elements[14]=O.clipPlane.w})(e),S[t(385)][t(374)][t(359)]=!1,S.value[t(358)](R[t(385)]),S[t(385)][t(414)]||S.value[t(399)](),S[t(385)][t(356)](x[t(385)],O[t(451)]),null==(n=null==T?void 0:T.value)||n.render(S[t(385)],R[t(385)],E[t(385)]),S[t(385)].xr[t(443)]=i,S[t(385)].shadowMap[t(359)]=a,e[t(350)]=!0,S[t(385)].setRenderTarget(null)}));const k=xn(),B=K((()=>{const n=r,t={};return Object.assign(t,o),Object[n(420)](t,k.value),t}));return mn((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(385)])||n.dispose(),null==(t=null==E?void 0:E[e(385)])||t[e(431)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an("TresMeshReflectorMaterial",In({key:"key"+D[c(385)][c(435)]+D[c(385)][c(373)]+D[c(385)][c(391)],ref_key:c(403),ref:C},B[c(385)],{"texture-matrix":O.textureMatrix,mirror:Q(p),"t-diffuse":null==(e=R[c(385)])?void 0:e[c(408)],"t-depth":null==(o=R[c(385)])?void 0:o[c(376)],"t-diffuse-blur":null==(i=E[c(385)])?void 0:i[c(408)],"has-blur":P[c(385)],"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":P[c(385)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Se)}}});function Ae(n){function t(n){const e=we;if(typeof n===e(362))return function(n){}.constructor(e(418))[e(449)](e(437));1!==(""+n/n)[e(351)]||n%20==0?function(){return!0}[e(355)](e(368)+e(447))[e(349)](e(424)):function(){return!1}[e(355)](e(368)+"gger").apply(e(452)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=De,r=ze();for(;;)try{if(512290===parseInt(e(220))/1*(parseInt(e(240))/2)+parseInt(e(208))/3*(-parseInt(e(215))/4)+-parseInt(e(216))/5+-parseInt(e(211))/6+parseInt(e(235))/7*(parseInt(e(239))/8)+parseInt(e(212))/9*(-parseInt(e(228))/10)+-parseInt(e(241))/11*(-parseInt(e(214))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ee(this,(function(){const n=De,t=new RegExp(n(219)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pe(n(206));t[n(209)](r+n(236))&&e[n(209)](r+n(227))?Pe():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(n,t){const e=ze();return(De=function(n,t){return e[n-=200]})(n,t)}function ze(){const n=["12RMZdTh","3587964OsatPV","3335870labEkb","gger","exception","function *\\( *\\)","2FqnLlR","dispose","stateObject","log","toString","__proto__","length","input","5919030vNdfrs","debu","texture","update","fog","CubeCamera","background","91GVtQPM","chain","error","counter","379896CIsazw","644172DZUDpF","16775363rHDcMj","string","constructor","return (function() ","console","prototype","apply","init","value","3XGdjSG","test","warn","709068FFidEp","9jUkrwd","info"];return(ze=function(){return n})()}function Pe(n){function t(n){const e=De;if(typeof n===e(200))return function(n){}[e(201)]("while (true) {}")[e(205)](e(238));1!==(""+n/n).length||n%20==0?function(){return!0}[e(201)](e(229)+e(217)).call("action"):function(){return!1}[e(201)](e(229)+e(217))[e(205)](e(222)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Oe(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","debu","1979045uhAbHk","736284JvjeGJ","call","log","trace","resolution","string","test","521372QtXAFg","action","function *\\( *\\)","exception","primitive","__proto__","70696MGFwKp","input","error","default","187399uWrNiJ","console","constructor","242gITrWg","2KUKpqP","gger","toString","envMap","12BzzDiZ","init","table","$slots","rgRef","TresGroup","19747mdzwXT","frames","index","567IEwKeW","apply","stateObject","visible","276jkRwUY","texture","warn",'{}.constructor("return this")( )',"prototype","value","info","while (true) {}","bind","object","return (function() ","far","fog","3106850zlYNdv"];return(Oe=function(){return n})()}Te(void 0,(function(){const n=De,t=function(){const n=De;let t;try{t=Function(n(202)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(203)]=t[n(203)]||{},r=[n(223),n(210),n(213),n(237),n(218),"table","trace"];for(let o=0;o<r[n(226)];o++){const t=Te[n(201)][n(204)].bind(Te),i=r[o],a=e[i]||t;t[n(225)]=Te.bind(Te),t.toString=a[n(224)].bind(a),e[i]=t}}))();const Ce=je;!function(n,t){const e=je,r=Oe();for(;;)try{if(299242===parseInt(e(414))/1*(-parseInt(e(418))/2)+-parseInt(e(422))/3*(parseInt(e(404))/4)+parseInt(e(396))/5+parseInt(e(379))/6*(parseInt(e(428))/7)+parseInt(e(410))/8*(-parseInt(e(431))/9)+-parseInt(e(392))/10+parseInt(e(417))/11*(parseInt(e(397))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=je,t=new RegExp(n(406)),e=new RegExp(n(393),"i"),r=Ne(n(423));t.test(r+"chain")&&e[n(403)](r+n(411))?Ne():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ke(void 0,(function(){const n=je;let t;try{t=Function(n(389)+n(382)+");")()}catch(o){t=window}const e=t[n(415)]=t[n(415)]||{},r=[n(399),n(381),n(385),n(412),n(407),n(424),n(400)];for(let i=0;i<r[n(394)];i++){const t=ke[n(416)][n(383)][n(387)](ke),o=r[i],a=e[o]||t;t[n(409)]=ke[n(387)](ke),t[n(420)]=a.toString.bind(a),e[o]=t}}))();const Be=[Ce(388)];function je(n,t){const e=Oe();return(je=function(n,t){return e[n-=378]})(n,t)}const Ue=nn({__name:Ce(430),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return J((()=>s),(n=>{var t;const e=De;null==(t=c[e(207)])||t[e(221)](),c[e(207)]=new v(n.value),c.value[e(230)].type=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=De;e&&(f[r(207)]=new(T[r(233)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=De;null==(n=c.value)||n[t(221)]()})),{fbo:c,camera:f,update:()=>{var n;const t=De;p=a.value[t(232)],d=a.value.background,a[t(207)].background=r||d,a[t(207)][t(232)]=o||p,null==(n=f[t(207)])||n[t(231)](i[t(207)],a.value),a[t(207)].fog=p,a[t(207)][t(234)]=d}}}({resolution:o[r(401)],near:o.near,far:o[r(390)],envMap:o[r(421)],fog:o[r(391)]}),{onBeforeLoop:s}=V();let u=0;const l=q(null);return s((()=>{const n=r;l[n(384)]&&(o[n(429)]===1/0||u<o[n(429)])&&(l[n(384)].visible=!1,c(),l[n(384)][n(378)]=!0,u++)})),t({texture:null==(e=i[r(384)])?void 0:e[r(380)]}),(n,t)=>{const e=r;return on(),an("TresGroup",null,[dn(e(408),{object:Q(a)},null,8,Be),dn(e(427),{ref_key:e(426),ref:l},[cn(n[e(425)],e(413))],512)])}}});function Ne(n){function t(n){const e=je;if(typeof n===e(402))return function(n){}[e(416)](e(386))[e(432)]("counter");1!==(""+n/n)[e(394)]||n%20==0?function(){return!0}[e(416)](e(395)+e(419))[e(398)](e(405)):function(){return!1}[e(416)](e(395)+e(419)).apply(e(433)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ze,r=$e();for(;;)try{if(911755===-parseInt(e(227))/1+parseInt(e(250))/2*(-parseInt(e(267))/3)+-parseInt(e(261))/4*(-parseInt(e(238))/5)+parseInt(e(263))/6+parseInt(e(225))/7*(parseInt(e(241))/8)+parseInt(e(244))/9*(-parseInt(e(258))/10)+-parseInt(e(226))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Ze,t=new RegExp(n(252)),e=new RegExp(n(271),"i"),r=We(n(254));t.test(r+n(245))&&e[n(236)](r+n(274))?We():r("0")}))()}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(n,t){const e=$e();return(Ze=function(n,t){return e[n-=225]})(n,t)}function Ge(n,t,e,r){const o=Ze,i=class extends T[o(262)]{constructor(i={}){const a=o,s=Object[a(264)](n);super({uniforms:s[a(253)](((n,[t,e])=>{const r=a,o=T[r(268)][r(256)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(257)]="",s[a(269)]((([n])=>Object[a(234)](this,n,{get:()=>this.uniforms[n].value,set:t=>this[a(231)][n][a(240)]=t}))),Object.assign(this,i),r&&r(this)}};return i.key=T[o(249)][o(243)](),i}function We(n){function t(n){const e=Ze;if(typeof n===e(270))return function(n){}[e(232)](e(228))[e(229)](e(272));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(259))[e(248)](e(266)):function(){return!1}[e(232)](e(242)+e(259))[e(229)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $e(){const n=["value","248oqvsOr","debu","generateUUID","882ZwITRW","chain","trace","length","call","MathUtils","4HtvTMs","console","function *\\( *\\)","reduce","init","exception","clone","key","105860igPnME","gger","warn","8yoqCix","ShaderMaterial","10063572jjqxRD","entries","return (function() ","action","1886658nMIVig","UniformsUtils","forEach","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","__proto__","input","298774AlhGaB","13330152OprPqi","52893OEOEug","while (true) {}","apply",'{}.constructor("return this")( )',"uniforms","constructor","bind","defineProperty","table","test","info","3678190UQvdDA","error"];return($e=function(){return n})()}Le(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function(n(265)+n(230)+");")()}catch(e){t=window}return t}(),e=t[n(251)]=t.console||{},r=["log",n(260),n(237),n(239),n(255),n(235),n(246)];for(let o=0;o<r[n(247)];o++){const t=Le[n(232)].prototype[n(233)](Le),i=r[o],a=e[i]||t;t[n(273)]=Le[n(233)](Le),t.toString=a.toString.bind(a),e[i]=t}}))();var Ve=qe;!function(n,t){for(var e=qe,r=ir();;)try{if(261419===-parseInt(e(254))/1*(parseInt(e(165))/2)+-parseInt(e(211))/3*(-parseInt(e(174))/4)+parseInt(e(350))/5*(-parseInt(e(285))/6)+-parseInt(e(281))/7+-parseInt(e(221))/8*(parseInt(e(321))/9)+-parseInt(e(303))/10+parseInt(e(227))/11*(parseInt(e(301))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[qe(161)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){var n=qe,t=new RegExp(n(322)),e=new RegExp(n(319),"i"),r=Dr(n(185));t[n(202)](r+n(237))&&e.test(r+n(263))?Dr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[qe(161)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n,t){var e=ir();return(qe=function(n,t){return e[n-=158]})(n,t)}function Ke(n){var t=qe,e=function(n,t){var e=qe;if(typeof n!==e(256)||null===n)return n;var r=n[Symbol[e(307)]];if(void 0!==r){var o=r[e(159)](n,t||"default");if("object"!=typeof o)return o;throw new TypeError(e(200))}return(t===e(212)?String:Number)(n)}(n,"string");return typeof e===t(197)?e:String(e)}function Je(n,t,e){var r=qe;return(t=Ke(t))in n?Object[r(176)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=qe,r=Object[e(298)](n);if(Object[e(348)]){var o=Object[e(348)](n);t&&(o=o.filter((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(243)]}))),r[e(191)].apply(r,o)}return r}function nr(n){for(var t=qe,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(291)]((function(t){Je(n,t,r[t])})):Object[t(242)]?Object[t(346)](n,Object[t(242)](r)):Qe(Object(r))[t(291)]((function(e){var o=t;Object[o(176)](n,e,Object[o(168)](r,e))}))}return n}function tr(n,t){var e=qe;if(null==n)return{};var r,o,i=function(n,t){var e=qe;if(null==n)return{};var r,o,i={},a=Object[e(298)](n);for(o=0;o<a[e(213)];o++)r=a[o],t[e(177)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(348)]){var a=Object[e(348)](n);for(o=0;o<a.length;o++)r=a[o],t[e(177)](r)>=0||Object.prototype.propertyIsEnumerable[e(159)](n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=qe;(null==t||t>n[e(213)])&&(t=n[e(213)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){return function(n){if(Array[qe(290)](n))return n}(n)||function(n,t){var e=qe,r=null==n?null:e(294)!=typeof Symbol&&n[Symbol[e(286)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(159)](n))[e(302)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(315)])&&(s.push(o[e(220)]),s[e(213)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(229)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=qe;if(n){if(typeof n===e(212))return er(n,t);var r=Object[e(320)][e(208)][e(159)](n).slice(8,-1);return r===e(252)&&n[e(267)]&&(r=n.constructor.name),r===e(311)||r===e(230)?Array[e(251)](n):r===e(204)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(n,t){for(var e=qe,r=0;r<t.length;r++){var o=t[r];o[e(243)]=o[e(243)]||!1,o[e(166)]=!0,"value"in o&&(o[e(317)]=!0),Object[e(176)](n,Ke(o[e(347)]),o)}}function ir(){var n=["roughness","Cannot call a class as a function","generateUUID","MeshPhysicalMaterial","\n            ","4njAAHh","console","defineProperty","indexOf","CSM: ","warn","MeshLambertMaterial","\n    #include <color_fragment>\n    diffuseColor = ","is not a constructor","void ","lights_physical_fragment","init","vertexShader","setPrototypeOf","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","set","push","getPrototypeOf","csm_Position","function","table","\n    gl_Position = ","symbol","needsUpdate","CustomShaderMaterial does not support RawShaderMaterial","@@toPrimitive must return a primitive value.","RawShaderMaterial","test","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","Arguments","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","join","_getMaterialDefine","toString","\n    gl_FragColor = ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","1265286lSbuma","string","length","\n    vec3 objectNormal = ","MeshPhongMaterial","info","exception","\n    #include <dithering_fragment>\n    gl_FragColor  = ","Material","value","1571464uBDwdq","message","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","PointsMaterial","MeshToonMaterial","MeshMatcapMaterial","14574857pteyrr","includes","return","Set","lastIndexOf","csm_ClearcoatRoughness","__csm","error","fragColor","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","chain","split",". Shader cannot compile.","// #_CSM_#","Super expression must either be null or a function","getOwnPropertyDescriptors","enumerable","_patchShader","patchMap","material.clearcoatRoughness = "," );\n    ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","();\n              // #_CSM_#\n          ","fragmentShader","from","Object","\n    gl_PointSize = ","3792fOCgzy","substring","object","csm_AO","debu","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","create","baseMaterial","depthAlpha","input","trace","MeshBasicMaterial","void main() {","constructor","replace","\n    varying mat4 csm_internal_vModelViewMatrix;\n","cacheHash","log",'". Shader cannot compile.',"clearcoat","onBeforeCompile",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ",'{}.constructor("return this")( )',"metalness","_getPatchMapForMaterial","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","csm_Metalness","1596070PMkVHX",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","pointSize","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","48IHZpSW","iterator","\\$&","clearcoatRoughness","diffuse","isArray","forEach","clearcoatNormal",";\n    ","undefined",";\n  ","uniforms","this hasn't been initialised - super() hasn't been called","keys","csm_FragColor","filter","12lMsYst","next","2158230zbjPFQ","position","cacheKey","bump","toPrimitive","positionRaw","assign"," - (dot(","Map","silent","clone","\n            \n            void main() {\n          ","done","bind","writable","update","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","9IqCXrL","function *\\( *\\)","normal","MathUtils","MeshStandardMaterial","__proto__","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","MeshNormalMaterial","Derived constructors may only return object or undefined","action",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","isAlreadyExtended","\n    vec3 totalEmissiveRadiance = ","#define IS_","construct","valueOf","#define IS_VERTEX;\n","entries","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","trim","sham","\n    vec4 csm_internal_positionUnprojected = ","concat","MeshDepthMaterial","customProgramCacheKey","defineProperties","key","getOwnPropertySymbols","ShadowMaterial","231915mJVhvq","type","emissive","toUpperCase","_generateMaterial","\n    \n","call","csm_PointSize","apply",", 1.0 );\n  ","csm_Normal","ShaderChunk","250LbfxiO","configurable","();\n            // #_CSM_#\n          ","getOwnPropertyDescriptor"];return(ir=function(){return n})()}function ar(n){if(void 0===n)throw new ReferenceError(qe(297));return n}function cr(n,t){var e=qe;return(cr=Object[e(187)]?Object[e(187)][e(316)]():function(n,t){return n.__proto__=t,n})(n,t)}function sr(n){var t=qe;return(sr=Object.setPrototypeOf?Object[t(192)][t(316)]():function(n){return n[t(326)]||Object.getPrototypeOf(n)})(n)}function ur(n){var t=function(){var n=qe;if(typeof Reflect===n(294)||!Reflect.construct)return!1;if(Reflect[n(335)][n(341)])return!1;if(typeof Proxy===n(194))return!0;try{return Boolean.prototype[n(336)][n(159)](Reflect[n(335)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=qe,o=sr(n);if(t){var i=sr(this)[r(267)];e=Reflect[r(335)](o,arguments,i)}else e=o[r(161)](this,arguments);return function(n,t){var e=qe;if(t&&("object"==typeof t||typeof t===e(194)))return t;if(void 0!==t)throw new TypeError(e(329));return ar(n)}(this,e)}}Xe(void 0,(function(){for(var n=qe,t=function(){var n,t=qe;try{n=Function("return (function() "+t(276)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(175)]||{},r=[n(271),n(179),n(216),n(234),n(217),n(195),n(264)],o=0;o<r[n(213)];o++){var i=Xe.constructor[n(320)][n(316)](Xe),a=r[o],c=e[a]||i;i.__proto__=Xe[n(316)](Xe),i[n(208)]=c[n(208)][n(316)](c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:"csm_DiffuseColor",normal:Ve(163),roughness:"csm_Roughness",metalness:Ve(280),emissive:"csm_Emissive",ao:Ve(257),bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:Ve(232),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ve(160),fragColor:Ve(299),depthAlpha:"csm_DepthAlpha",position:Ve(193),positionRaw:"csm_PositionRaw"},hr=(Je(lr={},""[Ve(343)](dr[Ve(304)]),"*"),Je(lr,""[Ve(343)](dr.positionRaw),"*"),Je(lr,"".concat(dr[Ve(323)]),"*"),Je(lr,""[Ve(343)](dr.pointSize),[Ve(224)]),Je(lr,""[Ve(343)](dr[Ve(289)]),"*"),Je(lr,"".concat(dr[Ve(235)]),"*"),Je(lr,""[Ve(343)](dr.emissive),[Ve(325),Ve(172)]),Je(lr,""[Ve(343)](dr[Ve(169)]),[Ve(325),Ve(172)]),Je(lr,"".concat(dr[Ve(277)]),["MeshStandardMaterial",Ve(172)]),Je(lr,""[Ve(343)](dr.ao),[Ve(325),"MeshPhysicalMaterial",Ve(265),Ve(180),Ve(215),"MeshToonMaterial"]),Je(lr,"".concat(dr[Ve(306)]),["MeshLambertMaterial",Ve(226),Ve(328),Ve(215),Ve(172),"MeshStandardMaterial",Ve(225),Ve(349)]),Je(lr,"".concat(dr[Ve(262)]),[Ve(344)]),Je(lr,""[Ve(343)](dr[Ve(273)]),["MeshPhysicalMaterial"]),Je(lr,""[Ve(343)](dr.clearcoatRoughness),[Ve(172)]),Je(lr,""[Ve(343)](dr[Ve(292)]),[Ve(172)]),lr),vr={"#include <lights_physical_fragment>":T[Ve(164)][Ve(184)]},mr=(Je(fr={},""[Ve(343)](dr.normal),{"#include <beginnormal_vertex>":Ve(214)[Ve(343)](dr[Ve(323)],Ve(282))}),Je(fr,""[Ve(343)](dr[Ve(304)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[Ve(343)](dr.position,";\n  ")}),Je(fr,""[Ve(343)](dr.positionRaw),{"#include <begin_vertex>":Ve(342)[Ve(343)](dr[Ve(308)],Ve(275))}),Je(fr,""[Ve(343)](dr[Ve(283)]),{"gl_PointSize = size;":Ve(253)[Ve(343)](dr[Ve(283)],Ve(293))}),Je(fr,"".concat(dr[Ve(289)]),{"#include <color_fragment>":Ve(181)[Ve(343)](dr[Ve(289)],Ve(295))}),Je(fr,""[Ve(343)](dr[Ve(235)]),{"#include <dithering_fragment>":Ve(218).concat(dr[Ve(235)],Ve(295))}),Je(fr,""[Ve(343)](dr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Ve(333).concat(dr[Ve(352)],";\n    ")}),Je(fr,""[Ve(343)](dr[Ve(169)]),{"#include <roughnessmap_fragment>":Ve(203)[Ve(343)](dr.roughness,Ve(293))}),Je(fr,""[Ve(343)](dr[Ve(277)]),{"#include <metalnessmap_fragment>":Ve(188)[Ve(343)](dr.metalness,";\n    ")}),Je(fr,""[Ve(343)](dr.ao),{"#include <aomap_fragment>":Ve(223)[Ve(343)](dr.ao,Ve(293))}),Je(fr,"".concat(dr[Ve(306)]),{"#include <normal_fragment_maps>":Ve(189).concat(dr.bump,Ve(310))[Ve(343)](dr[Ve(306)],Ve(331))}),Je(fr,""[Ve(343)](dr[Ve(262)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[Ve(343)](dr[Ve(262)],Ve(247)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ve(259)[Ve(343)](dr.depthAlpha,Ve(293))}),Je(fr,""[Ve(343)](dr[Ve(273)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ve(343)](dr[Ve(273)],";")}),Je(fr,"".concat(dr[Ve(288)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ve(246)[Ve(343)](dr[Ve(288)],";")}),Je(fr,""[Ve(343)](dr[Ve(292)]),{"#include <clearcoat_normal_fragment_begin>":Ve(248)}),fr),gr=(Je(pr={},""[Ve(343)](dr[Ve(304)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ve(327)[Ve(343)](dr[Ve(304)],Ve(162))}),Je(pr,""[Ve(343)](dr[Ve(308)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ve(196).concat(dr.position,Ve(295))}),Je(pr,""[Ve(343)](dr[Ve(289)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ve(209)[Ve(343)](dr[Ve(289)],Ve(295))}),Je(pr,""[Ve(343)](dr[Ve(235)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ve(343)](dr[Ve(235)],";\n  ")}),pr),_r={clearcoat:[dr[Ve(273)],dr[Ve(292)],dr[Ve(288)]]},yr=Ve(339),xr=Ve(269),Ir=Ve(284),br=Ve(269),wr=Ve(158),Sr=[Ve(261),"fragmentShader","vertexShader","uniforms",Ve(245),Ve(305),Ve(312)],Mr=function(n,t,e){var r=Ve;return n[r(238)](t)[r(206)](e)},Rr=function(n,t){var e,r,o=Ve;return new RegExp("\\b"[o(343)]((e=t,r=Ve,e[r(268)](/[-\/\\^$*+?.()|[\]{}]/g,r(287))),"\\b"))[o(202)](n)};function Ar(n){return n?n[Ve(268)](/\s/g,""):void 0}function Er(n){return n[Ve(268)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=Ve;!function(n,t){var e=qe;if("function"!=typeof t&&null!==t)throw new TypeError(e(241));n[e(320)]=Object[e(260)](t&&t[e(320)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(176)](n,"prototype",{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=ur(c);function c(n){var t,e,r,o,i,s=qe,u=n[s(261)],l=n[s(250)],f=n[s(186)],p=n.uniforms,d=n[s(245)],h=n[s(305)],v=n[s(312)],m=tr(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(qe(170))}(this,c),!function(n){var t=Ve;try{new n}catch(e){if(e[t(222)][t(177)](t(182))>=0)return!1}return!0}(u)?(e=u,Object[s(309)](e,m)):e=new u(m),e.type===s(201))throw new Error(s(199));(function(n,t){var e=Ve;Object[e(309)](n,t);var r=Object.getPrototypeOf(t);Object.entries(Object.getOwnPropertyDescriptors(r)).filter((function(n){var t=e,r=typeof n[1].get===t(194),o=typeof n[1][t(190)]===t(194),i="function"==typeof n[1][t(220)],a=n[0]===t(267);return(r||o||i)&&!a}))[e(291)]((function(t){var r=e;typeof n[t[0]]!==r(194)&&Object[r(176)](n,t[0],t[1])}))})(ar(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(324)][s(171)](),type:e[s(351)],isAlreadyExtended:(r=e.onBeforeCompile,o=Ve,i=r[o(208)]()[o(340)](),!(0===i[o(255)](i[o(177)]("{")+1,i[o(231)]("}"))[o(340)]()[o(213)])),cacheHash:"",silent:v},t[s(296)]=nr(nr({},t[s(296)]||{}),p||{});var g=t[s(233)],_=g[s(250)],y=g[s(186)],x=t[s(296)];return t[s(233)][s(270)]=t._getCacheHash(),t[s(354)](_,y,x),t}return e=c,r=[{key:t(318),value:function(){var n=t,e=arguments[n(213)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(296)]=e[n(296)]||this[n(296)],Object[n(309)](this[n(233)],e);var r=this.__csm,o=r[n(250)],i=r[n(186)],a=this.uniforms,c=this._getCacheHash();this[n(233)][n(270)]=c,this[n(354)](o,i,a)}},{key:t(313),value:function(){var n=t,e={baseMaterial:this[n(233)][n(261)],fragmentShader:this.__csm[n(250)],vertexShader:this[n(233)][n(186)],uniforms:this[n(296)],silent:this[n(233)][n(312)],patchMap:this[n(233)][n(245)],cacheKey:this.__csm[n(305)]},r=new this.constructor(e);return Object.assign(this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this.__csm,r=e[n(250)],o=e[n(186)],i=this.uniforms,a=[Ar(r),Ar(o),i][n(300)]((function(n){return void 0!==n}));return a[n(213)]>0?Mn(a,{excludeValues:!0}):this[n(345)]()}},{key:t(354),value:function(n,e,r){var o=t,i=this;this[o(296)]=r||{},this[o(345)]=function(){var n=o;return i[n(233)][n(270)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i._patchShader(Er(n),t[r(250)],!0);t[r(250)]=a+c}if(e){var s=i[r(244)](Er(e),t.vertexShader);t.vertexShader=r(337)+s,t.vertexShader=a+t[r(186)]}t.uniforms=nr(nr({},t[r(296)]),i[r(296)]),i.uniforms=t[r(296)]}catch(u){console[r(234)](u)}};if(this.__csm[o(332)]){var c=this[o(274)];this[o(274)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(198)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(278)]()),this.__csm.patchMap);Object.entries(_r)[o(291)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1].find((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(343)](a,'" is required to use output "')[e(343)](c,e(272)))})),Object[o(338)](vr)[o(291)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object[o(298)](c)[o(291)]((function(t){var e=o;Object[e(298)](c[t])[e(291)]((function(r){var o=e,s=hr[t],u=i[o(233)].type;if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s[o(228)](u)||"*"===s))throw new Error(o(178).concat(t," is not available in ")[o(343)](u,o(239)));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(233)].instanceID[o(268)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(183).concat(d,"()")),v=n[o(228)]("void main()"),m=a[o(228)]("// #_CSM_#");return v&&(m&&this[o(233)].isAlreadyExtended?(a=a[o(268)](o(266),o(173)[o(343)](h,o(314))),s=a,u=o(240),l="\n            ".concat(d,o(167)),p=s[(f=Ve)(231)](u),a=-1===p?s:s[f(255)](0,p)+l+s[f(255)](p+u[f(213)])):a=a[o(268)](o(266),o(205)[o(343)](r?br:xr,o(236)).concat("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    \n            ")[o(343)](h,o(279))[o(343)](yr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(343)](r?wr:Ir,o(210)).concat(d,o(249)))),a}},{key:t(207),value:function(){var n=t,e=this[n(233)][n(351)];return e?n(334)[n(343)](e[n(353)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(278),value:function(){var n=t;return"ShaderMaterial"===this[n(233)][n(351)]?gr:mr}}],i=qe,r&&or(e[i(320)],r),o&&or(e,o),Object[i(176)](e,i(320),{writable:!1}),c}(T[Ve(219)]);function Dr(n){function t(n){var e=qe;if(typeof n===e(212))return function(n){}[e(267)]("while (true) {}")[e(161)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(258)+"gger")[e(159)](e(330)):function(){return!1}[e(267)](e(258)+"gger")[e(161)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Pr;function Pr(n,t){const e=Fr();return(Pr=function(n,t){return e[n-=280]})(n,t)}!function(n,t){const e=Pr,r=Fr();for(;;)try{if(563010===-parseInt(e(293))/1+parseInt(e(323))/2+parseInt(e(318))/3*(-parseInt(e(314))/4)+parseInt(e(324))/5+-parseInt(e(321))/6*(-parseInt(e(320))/7)+-parseInt(e(294))/8*(parseInt(e(289))/9)+-parseInt(e(319))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pr(304)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=Pr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(291),"i"),r=jr("init");t[n(300)](r+n(308))&&e[n(300)](r+"input")?jr():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pr(304)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fr(){const n=["\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","291381BZxOdQ","118024RzcFYs","constructor","setStyle","prototype","console","#ff00fc","test","warn","metalness","bind","apply","while (true) {}","debu","counter","chain","\n\t\t\t","log","return (function() ","color","trace","4HnQqkj","info","object","clearcoatRoughness","2822439FHEXAD","3304040CBFMxs","65793ObsovM","618jOgkUw","roughness","1979200OMZKSj","913320RXtbyT","index","error","__proto__","MeshPhysicalMaterial","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","string","\n      ","gger","clearcoat","toString","stateObject","primitive","table","9HETRha"];return(Fr=function(){return n})()}Cr(void 0,(function(){const n=Pr,t=function(){const n=Pr;let t;try{t=Function(n(311)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(298)]=t[n(298)]||{},r=[n(310),n(301),n(315),n(326),"exception",n(288),n(313)];for(let o=0;o<r.length;o++){const t=Cr[n(295)][n(297)][n(303)](Cr),i=r[o],a=e[i]||t;t[n(327)]=Cr[n(303)](Cr),t[n(285)]=a.toString[n(303)](a),e[i]=t}}))();const kr=[zr(316)],Br=nn({__name:zr(325),props:{color:{default:zr(299)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:T[t(328)],metalness:e[t(302)],roughness:e[t(322)],clearcoat:e[t(284)],clearcoatRoughness:e[t(317)],color:e[t(312)],vertexShader:t(280),fragmentShader:t(309)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(282)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(290)},o=new Tr(r);return ln((()=>{const n=t;o.color[n(296)](e[n(312)]),o.metalness=e[n(302)],o.roughness=e[n(322)],o[n(284)]=e.clearcoat,o[n(317)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(287),{object:Q(o)},null,8,kr)}}});function jr(n){function t(n){const e=Pr;if(typeof n===e(281))return function(n){}[e(295)](e(305))[e(304)](e(307));1!==(""+n/n)[e(292)]||n%20==0?function(){return!0}[e(295)]("debu"+e(283)).call("action"):function(){return!1}[e(295)](e(306)+e(283))[e(304)](e(286)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Lr,r=Hr();;)try{if(118133===parseInt(e(410))/1+parseInt(e(397))/2*(-parseInt(e(388))/3)+-parseInt(e(400))/4*(-parseInt(e(377))/5)+-parseInt(e(413))/6+-parseInt(e(396))/7+-parseInt(e(407))/8*(-parseInt(e(398))/9)+parseInt(e(380))/10*(parseInt(e(381))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(395)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Lr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(391),"i"),r=Zr(n(393));t[n(386)](r+n(401))&&e[n(386)](r+"input")?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(395)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["apply","510650VSGpdF","220858DvONMJ","678159ATmebT",'{}.constructor("return this")( )',"28wdXxae","chain","console","counter","debu","exception","__proto__","16UzoHAn","bind","log","97643BwycYv","length","info","745110JVqrKj","constructor","toString","116015FNDWAc","gger","error","16590lHyeHb","99ORidWS","prototype","action","table","warn","test","call","3PkNrQr","trace","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","init","while (true) {}"];return(Hr=function(){return n})()}function Lr(n,t){var e=Hr();return(Lr=function(n,t){return e[n-=377]})(n,t)}function Zr(n){function t(n){var e=Lr;if(typeof n===e(390))return function(n){}[e(414)](e(394))[e(395)](e(403));1!==(""+n/n).length||n%20==0?function(){return!0}[e(414)](e(404)+e(378))[e(387)](e(383)):function(){return!1}[e(414)](e(404)+e(378))[e(395)](e(392)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){for(var n=Lr,t=function(){var n,t=Lr;try{n=Function("return (function() "+t(399)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(402)]||{},r=[n(409),n(385),n(412),n(379),n(405),n(384),n(389)],o=0;o<r[n(411)];o++){var i=Nr.constructor[n(382)].bind(Nr),a=r[o],c=e[a]||i;i[n(406)]=Nr[n(408)](Nr),i[n(415)]=c.toString[n(408)](c),e[a]=i}}))();export{Ge as C,Br as _,Kn as a,ct as b,wt as c,Et as d,jt as e,qt as f,Ue as g,Re as h,vt as u};

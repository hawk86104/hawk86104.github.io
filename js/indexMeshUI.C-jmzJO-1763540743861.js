import{_ as e,a0 as o}from"./@tresjs.BCHtwiaC1763540743861.js";import{i as t}from"./index.Crdf3MNx1763540743861.js";import{g as s}from"./gsap.CY1N3EIL1763540743861.js";import{i as r,m as i,a as n,b as p,c as a,u as l,d as m,f as u}from"./mapShow.CkDnPwrf1763540743861.js";import{_ as d}from"./provinceName.vue_vue_type_script_setup_true_lang.DstjK19R1763540743861.js";import{a as c,q as _,w as j,H as y,o as v,J as f,I as h,F as g,X as b,u as x,b as T}from"./@vue.Co_gxueH1763540743861.js";import{m as S}from"./d3-geo.dcKspw7k1763540743861.js";import{am as C}from"./three.rXKzP9fQ1763540743861.js";import"./postprocessing.51l5tmA-1763540743861.js";import"./@vueuse.CfFJ-iFV1763540743861.js";import"./@fesjs.BEMFm_yJ1763540743861.js";import"./vue-router.BxG8XxK11763540743861.js";import"./lodash-es.B7GkVYRo1763540743861.js";import"./pinia.CEQ6XgE61763540743861.js";import"./@qlin.y-0Z8WnK1763540743861.js";import"./@babel.BPq7uOAK1763540743861.js";import"./@floating-ui.Bhq4ibgf1763540743861.js";import"./@juggle.Vc7cP4_P1763540743861.js";import"./chalk.BHLFMujs1763540743861.js";/* empty css                                 */import"./iconify-icon.1JyQPtAK1763540743861.js";import"./@iconify.DDuAktjw1763540743861.js";import"./vite-plugin-qiankun.B06WoCqG1763540743861.js";import"./dompurify.C4MEnGDh1763540743861.js";import"./oimophysics.CfVKSiAm1763540743861.js";import"./three-stdlib.DJsODJ8R1763540743861.js";import"./@pmndrs.C5SFDEDA1763540743861.js";import"./object-hash.DlZNhpf61763540743861.js";import"./@amap.D8CfaEsq1763540743861.js";import"./crypto-js.CLP5yTup1763540743861.js";import"./naive-ui.qjPOP62h1763540743861.js";import"./date-fns.eh-WGDI81763540743861.js";import"./@css-render.DtSd-BuN1763540743861.js";import"./css-render.Dlx27V_T1763540743861.js";import"./@emotion.DFFAhID71763540743861.js";import"./seemly.D2hUckm91763540743861.js";import"./vooks.CVMU_ROE1763540743861.js";import"./evtd.C4K_ichY1763540743861.js";import"./vueuc.CEvnhvIm1763540743861.js";import"./vdirs.DlTVi7SG1763540743861.js";import"./treemate.Qc8YxXqZ1763540743861.js";import"./date-fns-tz.CIz1xaH61763540743861.js";import"./async-validator.DJtlKCAR1763540743861.js";import"./tweakpane.CqZAnw7f1763540743861.js";import"./utils.DhJ-cORL1763540743861.js";import"./three-mesh-bvh.BY-MaG5X1763540743861.js";import"./index.CJ5-9CVy1763540743861.js";import"./utils.DNqecIFo1763540743861.js";import"./_virtual-empty-module.CfyHAoLP1763540743861.js";/* empty css                                                                            *//* empty css                                                                                *//* empty css                                                                                   *//* empty css                                                                                   *//* empty css                                                                                     *//* empty css                                                                                 */import"./three-mesh-ui.module.BVA20N0s1763540743861.js";/* empty css                                                                             */import"./global.BBGVMLjY1763540743861.js";import"./color.Cjj5e0ZL1763540743861.js";import"./color-string.DEJ_oqf-1763540743861.js";import"./color-name.gyPnsvCn1763540743861.js";import"./lodash.CybtBilg1763540743861.js";/* empty css                                                              */const z=["properties","pName"],N=["args"],k=["pName","position"],I=["position-z","scale","renderOrder"],G=["color","blending","map"],L={__name:"indexMeshUI",props:{lineColor:"#2bc4dc",topColor:"#f5f5f5",sideColor:"#00407c",iconColor:"#2bc4dc",fontColor:"#fff",fontSize:8,iconSize:.3,invertAlpha:!1,moveRoom:1.5,roughness:.8,metalness:.5,normalScale:6,geoJsonUrl:"",areaScale:{type:Number,default:10},centerCoordinates:{type:Array,default:[104,37.5]},showTextIcons:{type:Boolean,default:!0},lineWidth:{type:Number,default:1}},setup(L){const O=L,w=c(null);r();const P=S().center(O.centerCoordinates).scale(O.areaScale).translate([0,0]),A=c({depth:.66,bevelEnabled:!0,bevelSegments:1,bevelThickness:.1}),B=A.value.depth+.11,J=JSON.parse(t.getItem("map.json")).features,{areaList:M,linesList:R,textList:q}=i(J,P),E=[n(O.roughness,O.metalness,O.normalScale),p(O.sideColor)],{onBeforeRender:W}=e();W(()=>{E[1].map.offset.y+=.002});const F=c(null);_(()=>{const{boxSize:e,box3:o}=a(F.value.children[0]);F.value.children[0].children.map((t,s)=>{"Mesh"===t.type&&(t.geometry.computeBoundsTree(),l(t.geometry,e.x,e.y,o.min.x,o.min.y))}),F.value.rotation.x=-Math.PI/2});const H=(e,o)=>{let t=O.moveRoom,r=e.object;o||(r=e.eventObject,t=1);u(F.value,r.pName).map(e=>{"block"===e.pType&&s.to(e.scale,{duration:.3,z:t}),"line"===e.pType&&s.to(e.position,{duration:.3,z:B*t}),"text"===e.pType&&s.to(e.position,{duration:.3,z:B*t})})},$=e=>{H(e,!0),document.body.style.cursor="pointer",e.stopPropagation()},K=e=>{H(e,!1),document.body.style.cursor="default"};j(()=>[O.topColor,O.sideColor,O.roughness,O.metalness,O.normalScale],([e,o,t,s,r])=>{E[0].color.set(e),E[1].color.set(o),E[0].roughness=t,E[0].metalness=s,E[0].normalScale.set(r,r)},{immediate:!0});const U=t.getItem("icon.png");return(e,t)=>(v(),y("TresGroup",{ref_key:"groupRef",ref:F},[f("TresGroup",null,[(v(!0),y(g,null,b(x(M),(e,o)=>(v(),y("TresMesh",{key:`${o}`,properties:e.properties,renderOrder:1,material:E,pName:e.pName,pType:"block",onPointerenter:$,onPointerleave:K},[f("TresExtrudeGeometry",{args:[e.shape,A.value]},null,8,N)],40,z))),128))]),f("TresGroup",null,[(v(!0),y(g,null,b(x(R),(e,t)=>(v(),T(x(o),{key:`${t}`,renderOrder:t+1e4,pName:e.pName,"position-z":B,pType:"line",points:x(m)(e.points),"line-width":L.lineWidth,color:L.lineColor},null,8,["renderOrder","pName","points","line-width","color"]))),128))]),L.showTextIcons?(v(),y("TresGroup",{key:0,ref_key:"tGroupText",ref:w},[(v(!0),y(g,null,b(x(q),(e,o)=>(v(),y("TresGroup",{key:`${o}`,pName:e.pName,pType:"text",position:[e.position[0],e.position[1],B]},[w.value&&0!==w.value.children.length?(v(),T(d,{key:0,parent:w.value.children[o],textContent:e.pName,fontColor:O.fontColor,invertAlpha:O.invertAlpha,fontSize:O.fontSize,zIndex:o},null,8,["parent","textContent","fontColor","invertAlpha","fontSize","zIndex"])):h("",!0),f("TresSprite",{"position-z":L.iconSize,scale:L.iconSize,renderOrder:o+11e3},[f("TresSpriteMaterial",{color:L.iconColor,blending:C,map:x(U),transparent:"",depthWrite:!1,depthTest:""},null,8,G)],8,I)],8,k))),128))],512)):h("",!0)],512))}};export{L as default};

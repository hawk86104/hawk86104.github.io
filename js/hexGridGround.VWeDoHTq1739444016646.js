import{e as n,h as t,a as e,o}from"./@tresjs.Q4_KYO2a1739444016646.js";import{P as r}from"./tweakpane.yDiyAAkA1739444016646.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.wmn3SQkr1739444016646.js";import{_ as a,a0 as s,$ as u}from"./three.W6GmiHfn1739444016646.js";import{d as c,a3 as l,w as f,o as p,f as d,u as v,H as m,N as h,g,j as w,m as x,al as y,r as b,e as _}from"./@vue.NRI7TcgI1739444016646.js";import"./@vueuse.6yH4xZkk1739444016646.js";import"./all.three.jD4iRnJs1739444016646.js";import"./oimophysics.x0jH7fze1739444016646.js";const I=P;!function(n,t){const e=P,o=M();for(;;)try{if(131034===-parseInt(e(143))/1+parseInt(e(117))/2*(-parseInt(e(160))/3)+-parseInt(e(150))/4*(parseInt(e(120))/5)+-parseInt(e(121))/6+-parseInt(e(166))/7*(parseInt(e(140))/8)+-parseInt(e(122))/9*(parseInt(e(172))/10)+-parseInt(e(132))/11*(-parseInt(e(128))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const k=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(170)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(){const n=["hexGridMaterial","direction","28ndnkGY","action","length","warn","apply","baseMaterial","9890aMRPIE","gridWeight","10796zJfAZk","__proto__","table","5VBObBS","1266690APXtXh","108kSxWrx","division","return (function() ","maskTexture","constructor","speed","25140SDuWNt","log","prototype","isReversed","4532OBkZeq","stateObject",'{}.constructor("return this")( )',"string","hasMaskTexture","init","console","waveFrequency","173256jiKxTy","value","bind","240582aWOYVo","MeshPhongMaterial","test","time","while (true) {}","wavePow","info","144668PRohFn","input","debu","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","gger","raisedBottom","fragmentShader","divisionScaleX","call","function *\\( *\\)","81RjfPgA","toString","exception","counter"];return(M=function(){return n})()}!function(){k(this,(function(){const n=P,t=new RegExp(n(159)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=R(n(137));t.test(o+"chain")&&e[n(145)](o+n(151))?R():o("0")}))()}();const S=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function P(n,t){const e=M();return(P=function(n,t){return e[n-=116]})(n,t)}S(void 0,(function(){const n=P;let t;try{t=Function(n(124)+n(134)+");")()}catch(r){t=window}const e=t[n(138)]=t[n(138)]||{},o=[n(129),n(169),n(149),"error",n(162),n(119),"trace"];for(let i=0;i<o.length;i++){const t=S[n(126)][n(130)][n(142)](S),r=o[i],a=e[r]||t;t[n(118)]=S[n(142)](S),t.toString=a[n(161)][n(142)](a),e[r]=t}}))();const j=I(153),T=c({__name:I(164),props:{baseMaterial:{default:new(a[I(144)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const r=I;let i,a;const u=o,c={gridWeight:{value:u[r(116)]},raisedBottom:{value:u[r(155)]},waveFrequency:{value:u[r(139)]},wavePow:{value:u[r(148)]},direction:{value:u[r(165)]},isReversed:{value:u[r(131)]},hasMaskTexture:{value:u.hasMaskTexture},maskTexture:{value:null},division:{value:u.division},divisionScaleX:{value:u[r(157)]},time:{value:0}};u[r(125)]&&(c.maskTexture[r(141)]=([i,a]=l((()=>e([u[r(125)]]))),i=await i,a(),i)),f((()=>[u[r(116)],u.raisedBottom,u[r(139)],u[r(148)],u[r(123)],u[r(157)],u.direction,u[r(131)],u[r(136)]]),(([n,t,e,o,i,a,s,u,l])=>{const f=r;c[f(116)][f(141)]=n,c[f(155)][f(141)]=t,c[f(139)][f(141)]=e,c.wavePow[f(141)]=o,c[f(123)][f(141)]=i,c[f(157)][f(141)]=a,c.direction[f(141)]=s,c[f(131)][f(141)]=u,c[f(136)].value=l}));const{onLoop:m}=n();return m((({delta:n})=>{const t=r;c[t(146)].value+=n*u[t(127)]})),(n,e)=>{const i=r;return p(),d(v(t),{baseMaterial:o[i(171)],vertexShader:j,side:s,transparent:"",fragmentShader:v("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:c},null,8,["baseMaterial","side",i(156)])}}});function R(n){function t(n){const e=P;if(typeof n===e(135))return function(n){}[e(126)](e(147))[e(170)](e(163));1!==(""+n/n)[e(168)]||n%20==0?function(){return!0}[e(126)](e(152)+e(154))[e(158)](e(167)):function(){return!1}[e(126)](e(152)+"gger")[e(170)](e(133)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const C=A;!function(n,t){const e=A,o=z();for(;;)try{if(265590===-parseInt(e(258))/1+parseInt(e(235))/2+parseInt(e(238))/3+-parseInt(e(253))/4+parseInt(e(245))/5*(parseInt(e(242))/6)+parseInt(e(261))/7*(-parseInt(e(234))/8)+parseInt(e(232))/9*(-parseInt(e(252))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const B=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function A(n,t){const e=z();return(A=function(n,t){return e[n-=221]})(n,t)}!function(){B(this,(function(){const n=A,t=new RegExp(n(250)),e=new RegExp(n(224),"i"),o=q(n(230));t.test(o+n(236))&&e.test(o+n(239))?q():o("0")}))()}();const D=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(249)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();D(void 0,(function(){const n=A;let t;try{t=Function(n(256)+n(248)+");")()}catch(r){t=window}const e=t[n(246)]=t[n(246)]||{},o=[n(244),n(262),"info",n(233),n(227),n(231),n(259)];for(let i=0;i<o.length;i++){const t=D[n(223)][n(254)][n(225)](D),r=o[i],a=e[r]||t;t[n(237)]=D[n(225)](D),t[n(243)]=a.toString[n(225)](a),e[r]=t}}))();const F=[C(247)];function z(){const n=["stateObject","exception","length","debu","init","table","5256NemqSk","error","133072demEqA","514522VKcMpq","chain","__proto__","1277139dbSSUy","input","counter","while (true) {}","128748MhcqaY","toString","log","95pHXCuA","console","rotation",'{}.constructor("return this")( )',"apply","function *\\( *\\)","gger","2950rHrDSJ","204300VZgaFJ","prototype","call","return (function() ","baseMaterial","219149UevKGG","trace","string","161UCnOya","warn","action","$attrs","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind"];return(z=function(){return n})()}const X=c({__name:"hexGridMesh",setup(n){const t=new u;return(n,e)=>{const o=A;return p(),m("TresMesh",{rotation:[-Math.PI/2,0,0]},[e[0]||(e[0]=h("TresPlaneGeometry",{args:[1,1]},null,-1)),(p(),d(y,null,{default:g((()=>[w(T,x({baseMaterial:v(t)},n[o(222)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(257)])])),_:1}))],8,F)}}});function q(n){function t(n){const e=A;if(typeof n===e(260))return function(n){}.constructor(e(241)).apply(e(240));1!==(""+n/n)[e(228)]||n%20==0?function(){return!0}.constructor(e(229)+e(251))[e(255)](e(221)):function(){return!1}.constructor(e(229)+"gger").apply(e(226)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const G=E;!function(n,t){const e=E,o=Z();for(;;)try{if(169953===parseInt(e(494))/1*(parseInt(e(466))/2)+-parseInt(e(486))/3*(-parseInt(e(496))/4)+-parseInt(e(462))/5*(parseInt(e(487))/6)+-parseInt(e(483))/7+-parseInt(e(461))/8+-parseInt(e(465))/9*(-parseInt(e(489))/10)+-parseInt(e(504))/11*(parseInt(e(500))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const O=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[E(503)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){O(this,(function(){const n=E,t=new RegExp(n(479)),e=new RegExp(n(467),"i"),o=V(n(459));t.test(o+n(485))&&e[n(488)](o+n(490))?V():o("0")}))()}();const W=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function Z(){const n=["渐变宽度","网格宽度","init","console","600776JYlIKK","8005Zemkpg","return (function() ","gger","87822kObhuY","264226OiVzBD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#666666","gridWeight","颜色取反","TresCanvas","action","addBinding","warn","toString","counter","info","网格整体缩放","function *\\( *\\)","direction","speed","prototype","1447334OEKLRK","#de62f2","chain","21ApdIIp","654HtFjBp","test","320zXaest","input","exception","hexGridGround","while (true) {}","2sPSfwx","length","161488FojKji","wavePow","hasMaskTexture","bind","2793180snwgRy","isReversed","error","apply","11jizGce","图片纹理","debu",'{}.constructor("return this")( )',"trace","constructor","color","__proto__"];return(Z=function(){return n})()}function E(n,t){const e=Z();return(E=function(n,t){return e[n-=456]})(n,t)}W(void 0,(function(){const n=E;let t;try{t=Function(n(463)+n(507)+");")()}catch(r){t=window}const e=t[n(460)]=t[n(460)]||{},o=["log",n(474),n(477),n(502),n(491),"table",n(508)];for(let i=0;i<o[n(495)];i++){const t=W[n(509)][n(482)][n(499)](W),r=o[i],a=e[r]||t;t[n(456)]=W[n(499)](W),t[n(475)]=a[n(475)][n(499)](a),e[r]=t}}))();const K=c({__name:G(492),setup(n){const t=G,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),a=b({color:t(484),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new r({title:t(492),expanded:!0});return s[t(473)](a,t(498),{label:t(505)}),s[t(473)](a,t(510),{label:"颜色"}),s[t(473)](a,t(481),{label:"速度",min:-5,max:5,step:.1}),s[t(473)](a,t(469),{label:t(458),min:.001,max:.5,step:.001}),s[t(473)](a,"raisedBottom",{label:t(457),min:.001,max:1,step:.001}),s[t(473)](a,"waveFrequency",{label:"分段",min:.001,max:1,step:.001}),s[t(473)](a,t(497),{label:"渐变强度",min:1,max:30,step:.1}),s[t(473)](a,"division",{label:t(478),min:.1,max:50,step:.1}),s[t(473)](a,"divisionScaleX",{label:"网格横向缩放",min:.1,max:10,step:.1}),s[t(473)](a,t(501),{label:t(470)}),s[t(473)](a,t(480),{label:"方向类别",min:3,max:6,step:1}),(n,r)=>{const s=t,u=_(s(471));return p(),d(u,{clearColor:s(468),"window-size":""},{default:g((()=>[r[0]||(r[0]=h("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),w(v(o),{enableDamping:"",autoRotate:""}),w(X,x(a,{scale:9}),null,16),(p(),d(y,null,{default:g((()=>[w(i,x({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function V(n){function t(n){const e=E;if("string"==typeof n)return function(n){}[e(509)](e(493)).apply(e(476));1!==(""+n/n).length||n%20==0?function(){return!0}[e(509)](e(506)+e(464)).call(e(472)):function(){return!1}[e(509)](e(506)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{K as default};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.DbuurF0C1735031078130.js";import{B as i,V as n,cw as s,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.bc6MLGU_1735031078130.js";import{e as l,g as p,F as d}from"./@tresjs.dTM0HLnZ1735031078130.js";import{c as f}from"./simplex-noise.Yx8GBgKo1735031078130.js";import{d as m,a3 as g,o as y,D as b,u as v,r as x,j as S,g as w,m as _,F as I}from"./@vue.-THQH3GC1735031078130.js";import"./index.u24q1OjD1735031078130.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.nKJHLuWx1735031078130.js";import"./three-custom-shader-material.uc9Xgl3q1735031078130.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1735031078130.js";import"./@vueuse.COyzlgw71735031078130.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Nz9gzX6o1735031078130.js";import"./all.three.dnINst5u1735031078130.js";import"./oimophysics.x0jH7fze1735031078130.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.swOflITy1735031078130.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.MVIHKmBx1735031078130.js";import"./index.ENNhtf0D1735031078130.js";import"./three-stdlib.2VgffRAZ1735031078130.js";import"./@pmndrs.jH1lDBFa1735031078130.js";import"./object-hash.USFlpBEa1735031078130.js";import"./@amap.FwSyOcr71735031078130.js";import"./jszip.B5akDNc61735031078130.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.FO7epHks1735031078130.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.wtdt0fH81735031078130.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.HfHXCZ_a1735031078130.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.evDBKkUj1735031078130.js";function M(t,i){const n=C();return(M=function(t,i){return n[t-=437]})(t,i)}const T=M;!function(t,i){const n=M,s=C();for(;;)try{if(347681===parseInt(n(555))/1+-parseInt(n(568))/2*(parseInt(n(440))/3)+-parseInt(n(479))/4*(-parseInt(n(483))/5)+parseInt(n(593))/6+parseInt(n(552))/7+-parseInt(n(509))/8+parseInt(n(444))/9*(-parseInt(n(590))/10))break;s.push(s.shift())}catch(e){s.push(s.shift())}}();const R=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[M(556)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();!function(){R(this,(function(){const t=M,i=new RegExp(t(591)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=F(t(454));i[t(567)](s+t(494))&&n[t(567)](s+t(516))?F():s("0")}))()}();const A=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[M(556)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();function C(){const t=["currentSegmentIndex","counter","108KncWDh","while (true) {}","drawRange","visible","console","noiseSeed","vertices","multiplyScalar","subrays","subrayCylinderPosition","init","pos0","max","createTriangleVerticesWithoutUVs","error","clone","createRandomGenerator","maxIterations","copy","fraction0","position","array","lerpVectors","createPrismFaces","up1","radius1Factor","random","linPos0","ramification","ceil","simplexY","setAttribute","forwardsFill","set","isEternal","20268FihTRv","length","addNewSubray","prototype","30XZJTWh","newPos","beginVanishingTime","onSubrayCreation","middlePos","radius1","constructor","getSeed","cos","RAY_STEADY","lerp","chain","subVectors","currentSeed","timeFraction","propagationTimeFactor","sub","isStatic","minRadius","setIndex","createPrism","birthTime","radius0","push","currentIndex","up0","1155592YBckIx","linPos1","createSubray","subrayConePosition","seedGenerator","timeScale","subrayProbability","input","debu","simplexX","endPropagationTime","action",'{}.constructor("return this")( )',"onDecideSubrayCreation","fractalRay","currentSegmentCallback","__proto__","RAY_VANISHING","SIN30DEG","currentCoordinate","currentVertex","seed","indices","down","copyParameters","createDefaultSubrayCreationCallbacks","side","bind","positionAttribute","getNewSegment","fillMesh","isInitialSegment","usage","straightness","RAY_UNBORN","recursion","index","count","sourceOffset","crossVectors","subrayPeriod","positionVariationFactor","setSeed","2528827ndAJhw","maxSubrays","createSegment","575813pfLHMv","apply","vPos","normalize","initSubray","radius0Factor","vanishingTimeFactor","currentSubray","numSubrays","sin","rayParameters","iteration","test","18LGYcZQ","createMesh","subrayDutyCycle","destOffset","simplexZ","fraction1","gger","RAY_EXTINGUISHED","pow","recursionProbability","currentUVCoordinate","cross1","COS30DEG","pos1","return (function() ","uvs","time","string","toString","add","RAY_INITIALIZED","randomGenerator","338860KQjuGW","function *\\( *\\)","type","2218218DnvZkf","fractalRayRecursive","currentCreateTriangleVertices","raySegments","stateObject","call","roughness","floor","updateMesh","forwards","needsUpdate","createTriangleVerticesWithUVs","maxSubrayRecursion","table","uvsAttribute","trace","middleLinPos","generateUVs","state","deathTime","146139ViYSzv","maxRaySegments"];return(C=function(){return t})()}A(void 0,(function(){const t=M;let i;try{i=Function(t(582)+t(521)+");")()}catch(e){i=window}const n=i[t(448)]=i.console||{},s=["log","warn","info",t(458),"exception",t(606),t(608)];for(let r=0;r<s[t(480)];r++){const i=A[t(489)][t(482)][t(536)](A),e=s[r],o=n[e]||i;i[t(525)]=A[t(536)](A),i[t(586)]=o[t(586)][t(536)](o),n[e]=i}}))();class j extends i{constructor(t={}){const i=M;super(),this.isLightningStrike=!0,this[i(592)]="LightningStrike",this[i(454)](j[i(533)](t,t)),this[i(569)]()}static[T(460)](){const t=T,i=2053,n=[];for(let e=0;e<i;e++)n[t(506)](Math[t(470)]());const s={currentSeed:0,random:function(){const e=t,r=n[s[e(496)]];return s[e(496)]=(s[e(496)]+1)%i,r},getSeed:function(){return s[t(496)]/i},setSeed:function(n){s[t(496)]=Math.floor(n*i)%i}};return s}static[T(533)](t={},i={}){const s=T,e=function(n){return i===t?n:n.clone()};return t[s(547)]=void 0!==i.sourceOffset?e(i[s(547)]):new n(0,100,0),t[s(571)]=void 0!==i[s(571)]?e(i.destOffset):new n(0,0,0),t[s(514)]=void 0!==i[s(514)]?i[s(514)]:1,t.roughness=void 0!==i[s(599)]?i.roughness:.9,t[s(542)]=void 0!==i[s(542)]?i[s(542)]:.7,t[s(508)]=void 0!==i[s(508)]?e(i[s(508)]):new n(0,0,1),t.up1=void 0!==i[s(468)]?e(i[s(468)]):new n(0,0,1),t[s(505)]=void 0!==i[s(505)]?i[s(505)]:1,t[s(488)]=void 0!==i.radius1?i[s(488)]:1,t[s(560)]=void 0!==i[s(560)]?i[s(560)]:.5,t[s(469)]=void 0!==i.radius1Factor?i.radius1Factor:.2,t.minRadius=void 0!==i[s(501)]?i[s(501)]:.2,t[s(478)]=void 0!==i[s(478)]?i[s(478)]:void 0===i[s(504)]||void 0===i[s(439)],t[s(504)]=i[s(504)],t[s(439)]=i[s(439)],t[s(498)]=void 0!==i.propagationTimeFactor?i[s(498)]:.1,t.vanishingTimeFactor=void 0!==i[s(561)]?i.vanishingTimeFactor:.9,t[s(549)]=void 0!==i[s(549)]?i[s(549)]:4,t.subrayDutyCycle=void 0!==i[s(570)]?i[s(570)]:.6,t.maxIterations=void 0!==i[s(461)]?i[s(461)]:9,t[s(500)]=void 0!==i[s(500)]&&i[s(500)],t[s(472)]=void 0!==i[s(472)]?i[s(472)]:5,t[s(605)]=void 0!==i[s(605)]?i.maxSubrayRecursion:3,t[s(577)]=void 0!==i.recursionProbability?i[s(577)]:.6,t[s(437)]=void 0!==i[s(437)]&&i[s(437)],t[s(589)]=i[s(589)],t[s(449)]=i[s(449)],t[s(522)]=i[s(522)],t.onSubrayCreation=i[s(486)],t}update(t){const i=T;this.isStatic||(this[i(565)][i(478)]||this.rayParameters[i(504)]<=t&&t<=this[i(565)][i(439)]?(this[i(601)](t),t<this.subrays[0][i(519)]?this[i(438)]=j.RAY_PROPAGATING:t>this[i(452)][0][i(485)]?this[i(438)]=j.RAY_VANISHING:this[i(438)]=j[i(492)],this[i(447)]=!0):(this[i(447)]=!1,t<this[i(565)][i(504)]?this[i(438)]=j[i(543)]:this[i(438)]=j[i(575)]))}init(t){const i=T;this[i(565)]=t,this[i(461)]=void 0!==t[i(461)]?Math[i(600)](t[i(461)]):9,t[i(461)]=this[i(461)],this.isStatic=void 0!==t[i(500)]&&t.isStatic,t[i(500)]=this[i(500)],this[i(472)]=void 0!==t.ramification?Math.floor(t.ramification):5,t[i(472)]=this.ramification,this[i(605)]=void 0!==t[i(605)]?Math.floor(t[i(605)]):3,t[i(605)]=this[i(605)],this[i(577)]=void 0!==t.recursionProbability?t[i(577)]:.6,t.recursionProbability=this[i(577)],this[i(437)]=void 0!==t[i(437)]&&t[i(437)],t[i(437)]=this.generateUVs,void 0!==t[i(589)]?(this.randomGenerator=t[i(589)],this.seedGenerator=t[i(589)],void 0!==t[i(449)]&&this[i(513)][i(551)](t[i(449)])):(this[i(589)]=j.createRandomGenerator(),this[i(513)]=Math),void 0!==t[i(522)]?this[i(522)]=t[i(522)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(486)]&&(this[i(486)]=t.onSubrayCreation)),this[i(438)]=j[i(588)],this.maxSubrays=Math[i(473)](1+Math[i(576)](this[i(472)],Math[i(456)](0,this[i(605)]-1))),t[i(553)]=this[i(553)],this.maxRaySegments=2*(1<<this[i(461)]),this[i(452)]=[];for(let n=0;n<this.maxSubrays;n++)this[i(452)][i(506)](this[i(511)]());this.raySegments=[];for(let n=0;n<this[i(441)];n++)this[i(596)][i(506)](this[i(554)]());this[i(584)]=0,this.timeFraction=0,this[i(524)]=null,this[i(595)]=this[i(437)]?this[i(604)]:this[i(457)],this[i(563)]=0,this[i(562)]=null,this.currentSegmentIndex=0,this[i(540)]=!1,this[i(515)]=0,this[i(529)]=0,this.currentIndex=0,this.currentCoordinate=0,this[i(578)]=0,this.vertices=null,this.uvs=null,this[i(531)]=null,this.positionAttribute=null,this[i(607)]=null,this[i(518)]=f(this[i(513)].random),this[i(474)]=f(this[i(513)].random),this[i(572)]=f(this[i(513)][i(470)]),this[i(602)]=new n,this[i(476)]=new n,this[i(535)]=new n,this[i(532)]=new n,this[i(487)]=new n,this[i(609)]=new n,this.newPos=new n,this[i(557)]=new n,this[i(579)]=new n}[T(569)](){const t=T,i=1<<this[t(461)],n=3*(i+1)*this[t(553)],o=18*i*this[t(553)];this.vertices=new Float32Array(3*n),this[t(531)]=new Uint32Array(o),this[t(437)]&&(this.uvs=new Float32Array(2*n)),this[t(539)](0),this[t(502)](new s(this[t(531)],1)),this[t(537)]=new e(this[t(450)],3),this[t(475)](t(464),this[t(537)]),this.generateUVs&&(this[t(607)]=new e(new Float32Array(this[t(583)]),2),this.setAttribute("uv",this[t(607)])),!this[t(500)]&&(this.index.usage=r,this[t(537)][t(541)]=r,this[t(437)]&&(this[t(607)][t(541)]=r)),this[t(450)]=this[t(537)][t(465)],this[t(531)]=this[t(545)][t(465)],this.generateUVs&&(this.uvs=this.uvsAttribute[t(465)])}[T(601)](t){const i=T;this.fillMesh(t),this[i(446)][i(546)]=this[i(507)],this.index[i(603)]=!0,this[i(537)][i(603)]=!0,this[i(437)]&&(this[i(607)][i(603)]=!0)}fillMesh(t){const i=T,n=this;this.currentVertex=0,this[i(507)]=0,this[i(528)]=0,this[i(578)]=0,this[i(523)](t,(function(s){const e=i,r=n[e(562)];t<r[e(504)]||(this[e(565)][e(478)]&&0==n[e(562)][e(544)]?(n[e(503)](s),n[e(522)](s,n)):t<r.endPropagationTime?n.timeFraction>=s.fraction0*r.propagationTimeFactor&&(n[e(503)](s),n.onDecideSubrayCreation(s,n)):t<r[e(485)]?(n[e(503)](s),n.onDecideSubrayCreation(s,n)):(n[e(497)]<=r[e(561)]+s[e(573)]*(1-r[e(561)])&&n[e(503)](s),n[e(522)](s,n)))}))}[T(481)](){const t=T;return this.subrays[this[t(563)]++]}[T(559)](t,i){const n=T;t[n(455)][n(462)](i[n(547)]),t[n(581)][n(462)](i[n(571)]),t[n(508)][n(462)](i[n(508)]),t[n(468)][n(462)](i[n(468)]),t[n(505)]=i[n(505)],t.radius1=i.radius1,t.birthTime=i[n(504)],t[n(439)]=i[n(439)],t[n(514)]=i[n(514)],t[n(599)]=i[n(599)],t[n(542)]=i[n(542)],t[n(498)]=i[n(498)],t[n(561)]=i[n(561)],t.maxIterations=this[n(461)],t[n(530)]=void 0!==i[n(449)]?i[n(449)]:0,t[n(544)]=0}[T(523)](t,i){const n=T;this.time=t,this.currentSegmentCallback=i,this[n(563)]=0,this[n(559)](this[n(481)](),this.rayParameters);for(let s=0;s<this.numSubrays;s++){const i=this[n(452)][s];this[n(562)]=i,this[n(589)][n(551)](i[n(530)]),i[n(519)]=o[n(493)](i[n(504)],i.deathTime,i.propagationTimeFactor),i[n(485)]=o[n(493)](i[n(439)],i[n(504)],1-i[n(561)]);const e=this[n(589)][n(470)];i[n(471)][n(477)](e(),e(),e())[n(451)](1e3),i[n(510)].set(e(),e(),e())[n(451)](1e3),this.timeFraction=(t-i[n(504)])/(i[n(439)]-i[n(504)]),this[n(442)]=0,this[n(540)]=!0;const r=this.getNewSegment();r[n(566)]=0,r[n(455)][n(462)](i[n(455)]),r[n(581)][n(462)](i[n(581)]),r[n(471)][n(462)](i[n(471)]),r[n(510)][n(462)](i[n(510)]),r[n(508)][n(462)](i.up0),r[n(468)].copy(i.up1),r[n(505)]=i[n(505)],r[n(488)]=i[n(488)],r.fraction0=0,r[n(573)]=1,r[n(550)]=1-i[n(542)],this[n(515)]=this[n(472)]*Math.pow(this.recursionProbability,i[n(544)])/(1<<i[n(461)]),this[n(594)](r)}this[n(524)]=null,this[n(562)]=null}[T(594)](t){const i=T;if(t.iteration>=this.currentSubray.maxIterations)return void this[i(524)](t);this[i(602)].subVectors(t[i(581)],t.pos0);let n=this[i(602)][i(480)]();n<1e-6&&(this.forwards[i(477)](0,0,.01),n=this[i(602)].length());const s=.5*(t[i(505)]+t[i(488)]),e=.5*(t[i(463)]+t[i(573)]),r=this[i(584)]*this[i(562)][i(514)]*Math.pow(2,t[i(566)]);this[i(487)][i(466)](t[i(455)],t[i(581)],.5),this[i(609)].lerpVectors(t[i(471)],t[i(510)],.5);const o=this.middleLinPos;this[i(484)].set(this[i(518)](o.x,o.y,o.z,r),this[i(474)](o.x,o.y,o.z,r),this[i(572)](o.x,o.y,o.z,r)),this.newPos.multiplyScalar(t[i(550)]*n),this[i(484)][i(587)](this[i(487)]);const a=this[i(538)]();a[i(455)][i(462)](t[i(455)]),a[i(581)][i(462)](this[i(484)]),a[i(471)][i(462)](t[i(471)]),a.linPos1[i(462)](this[i(609)]),a[i(508)][i(462)](t.up0),a[i(468)][i(462)](t[i(468)]),a[i(505)]=t[i(505)],a[i(488)]=s,a[i(463)]=t[i(463)],a.fraction1=e,a[i(550)]=t[i(550)]*this[i(562)][i(599)],a.iteration=t.iteration+1;const h=this.getNewSegment();h[i(455)][i(462)](this[i(484)]),h[i(581)][i(462)](t.pos1),h[i(471)].copy(this[i(609)]),h.linPos1.copy(t.linPos1),this[i(579)][i(548)](t.up0,this[i(602)][i(558)]()),h[i(508)][i(548)](this[i(602)],this[i(579)]).normalize(),h[i(468)][i(462)](t[i(468)]),h[i(505)]=s,h[i(488)]=t[i(488)],h[i(463)]=e,h[i(573)]=t[i(573)],h.positionVariationFactor=t[i(550)]*this[i(562)].roughness,h.iteration=t[i(566)]+1,this[i(594)](a),this[i(594)](h)}createPrism(t){const i=T;this[i(476)].subVectors(t[i(581)],t.pos0).normalize(),this.isInitialSegment&&(this[i(595)](t[i(455)],t[i(508)],this[i(476)],t[i(505)],0),this[i(540)]=!1),this[i(595)](t[i(581)],t[i(508)],this[i(476)],t[i(488)],t[i(573)]),this[i(467)]()}createTriangleVerticesWithoutUVs(t,i,n,s){const e=T;this[e(535)][e(548)](i,n)[e(451)](s*j[e(580)]),this[e(532)][e(462)](i)[e(451)](-s*j[e(527)]);const r=this.vPos,o=this[e(450)];r.copy(t)[e(499)](this[e(535)])[e(587)](this[e(532)]),o[this[e(528)]++]=r.x,o[this[e(528)]++]=r.y,o[this[e(528)]++]=r.z,r[e(462)](t).add(this[e(535)])[e(587)](this.down),o[this[e(528)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i).multiplyScalar(s).add(t),o[this[e(528)]++]=r.x,o[this[e(528)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(529)]+=3}[T(604)](t,i,n,s,e){const r=T;this[r(535)][r(548)](i,n).multiplyScalar(s*j[r(580)]),this[r(532)][r(462)](i)[r(451)](-s*j[r(527)]);const o=this[r(557)],a=this[r(450)],h=this.uvs;o[r(462)](t)[r(499)](this[r(535)])[r(587)](this[r(532)]),a[this[r(528)]++]=o.x,a[this[r(528)]++]=o.y,a[this[r(528)]++]=o.z,h[this[r(578)]++]=e,h[this[r(578)]++]=0,o[r(462)](t)[r(587)](this.side)[r(587)](this[r(532)]),a[this[r(528)]++]=o.x,a[this[r(528)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(578)]++]=e,h[this[r(578)]++]=.5,o.copy(i)[r(451)](s)[r(587)](t),a[this.currentCoordinate++]=o.x,a[this[r(528)]++]=o.y,a[this[r(528)]++]=o.z,h[this[r(578)]++]=e,h[this[r(578)]++]=1,this[r(529)]+=3}[T(467)](t){const i=T,n=this.indices;t=this[i(529)]-6,n[this[i(507)]++]=t+1,n[this.currentIndex++]=t+2,n[this[i(507)]++]=t+5,n[this[i(507)]++]=t+1,n[this.currentIndex++]=t+5,n[this[i(507)]++]=t+4,n[this.currentIndex++]=t+0,n[this[i(507)]++]=t+1,n[this.currentIndex++]=t+4,n[this.currentIndex++]=t+0,n[this.currentIndex++]=t+4,n[this[i(507)]++]=t+3,n[this[i(507)]++]=t+2,n[this[i(507)]++]=t+0,n[this.currentIndex++]=t+3,n[this[i(507)]++]=t+2,n[this[i(507)]++]=t+3,n[this[i(507)]++]=t+5}[T(534)](){const t=T,i=this.randomGenerator[t(470)];this[t(522)]=function(n,s){const e=t,r=s.currentSubray,a=s[e(565)][e(549)],h=s[e(565)][e(570)],c=s[e(565)][e(478)]&&0==r.recursion?-i()*a:o[e(493)](r[e(504)],r.endPropagationTime,n[e(463)])-i()*a,u=s[e(584)]-c,l=Math.floor(u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=s[e(515)]),r[e(544)]<s[e(605)]&&s[e(563)]<s.maxSubrays&&i()<d){const t=s[e(481)](),o=s[e(589)][e(490)]();t[e(530)]=p,s[e(589)][e(551)](p),t[e(544)]=r[e(544)]+1,t[e(461)]=Math[e(456)](1,r[e(461)]-1),t.linPos0.set(i(),i(),i())[e(451)](1e3),t.linPos1[e(477)](i(),i(),i()).multiplyScalar(1e3),t[e(508)][e(462)](r[e(508)]),t[e(468)].copy(r[e(468)]),t.radius0=n[e(505)]*s[e(565)][e(560)],t[e(488)]=Math.min(s[e(565)][e(501)],n[e(488)]*s[e(565)][e(469)]),t[e(504)]=c+l*a,t[e(439)]=t[e(504)]+a*h,!s.rayParameters[e(478)]&&0==r.recursion&&(t.birthTime=Math[e(456)](t[e(504)],r[e(504)]),t[e(439)]=Math.min(t[e(439)],r[e(439)])),t.timeScale=2*r[e(514)],t[e(599)]=r[e(599)],t.straightness=r.straightness,t[e(498)]=r[e(498)],t[e(561)]=r.vanishingTimeFactor,s.onSubrayCreation(n,r,t,s),s[e(589)].setSeed(o)}};const s=new n,e=new n,r=new n,a=new n;this[t(486)]=function(i,n,s,e){e[t(453)](i,n,s,.5,.6,.2)},this[t(512)]=function(n,o,h,c,u,l){const p=t;h[p(455)][p(462)](n[p(455)]),s[p(495)](o[p(581)],o.pos0),e[p(462)](s).normalize(),s[p(451)](n[p(463)]+(1-n[p(463)])*(i()*c));const d=s.length();r[p(548)](o.up0,e);const f=2*Math.PI*i();r.multiplyScalar(Math[p(491)](f)),a[p(462)](o.up0).multiplyScalar(Math.sin(f)),h[p(581)][p(462)](r)[p(587)](a)[p(451)](d*u*(l+i()*(1-l)))[p(587)](s).add(o.pos0)},this.subrayCylinderPosition=function(n,o,h,c,u,l){const p=t;h[p(455)].copy(n[p(455)]),s[p(495)](o[p(581)],o.pos0),e.copy(s)[p(558)](),s[p(451)](n[p(463)]+(1-n.fraction0)*((2*i()-1)*c));const d=s[p(480)]();r[p(548)](o[p(508)],e);const f=2*Math.PI*i();r[p(451)](Math[p(491)](f)),a[p(462)](o[p(508)])[p(451)](Math[p(564)](f)),h[p(581)][p(462)](r)[p(587)](a)[p(451)](d*u*(l+i()*(1-l)))[p(587)](s)[p(587)](o[p(455)])}}[T(511)](){return{seed:0,maxIterations:0,recursion:0,pos0:new n,pos1:new n,linPos0:new n,linPos1:new n,up0:new n,up1:new n,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(554)](){return{iteration:0,pos0:new n,pos1:new n,linPos0:new n,linPos1:new n,up0:new n,up1:new n,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(538)](){return this[T(596)][this.currentSegmentIndex++]}[T(462)](t){const i=T;return super[i(462)](t),this[i(454)](j[i(533)]({},t[i(565)])),this}[T(459)](){const t=T;return new(this[t(489)])(j[t(533)]({},this[t(565)]))}}function F(t){function i(t){const n=M;if(typeof t===n(585))return function(t){}[n(489)](n(445))[n(556)](n(443));1!==(""+t/t)[n(480)]||t%20==0?function(){return!0}.constructor(n(517)+n(574))[n(598)](n(520)):function(){return!1}.constructor(n(517)+n(574))[n(556)](n(597)),i(++t)}try{if(t)return i;i(0)}catch(n){}}j.RAY_INITIALIZED=0,j[T(543)]=1,j.RAY_PROPAGATING=2,j[T(492)]=3,j[T(526)]=4,j.RAY_EXTINGUISHED=5,j[T(580)]=Math[T(491)](30*Math.PI/180),j[T(527)]=Math.sin(30*Math.PI/180);const D=V;function V(t,i){const n=z();return(V=function(t,i){return n[t-=204]})(t,i)}!function(t,i){const n=V,s=z();for(;;)try{if(651051===-parseInt(n(227))/1*(-parseInt(n(247))/2)+parseInt(n(280))/3*(parseInt(n(252))/4)+parseInt(n(213))/5*(parseInt(n(214))/6)+-parseInt(n(253))/7+-parseInt(n(250))/8*(parseInt(n(224))/9)+-parseInt(n(217))/10+parseInt(n(251))/11)break;s.push(s.shift())}catch(e){s.push(s.shift())}}();const H=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[V(261)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();function z(){const t=["console","push","gger","lightningMinPeriod","while (true) {}","return (function() ","__proto__","6845KCbgSL","4518HHeCxC","RAY_PROPAGATING","inited","5964710Laonah","lightningMaxPeriod","info","constructor","lightningMaxDuration","chain","error","10856646uTCtJo","indexOf","maxLightnings","523910evfjEM","getNextLightningTime","prototype","isLightningStorm","birthTime","init","log","action","update","clone","maxSlope","minHeight","debu","trace","sourceOffset","exception","destOffset","stateObject","pop","input","2xJGrDM","length","RAY_EXTINGUISHED","8GpDiZe","13048992Rnjrcy","3287928MOfstf","7764435XXLkFK","lightningsMeshes","toString","call","nextLightningTime","function *\\( *\\)","maxHeight","test","apply","state","lightningParameters","onRayPosition","lightningMaterial","lerp","onLightningDown","copyParameters","isEternal","deadLightningsMeshes","deathTime","copy","lightningMinDuration","geometry","stormParams","remove","size","add","string","3KvLLYX","set","bind","random"];return(z=function(){return t})()}!function(){H(this,(function(){const t=V,i=new RegExp(t(258)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=E(t(232));i[t(260)](s+t(222))&&n.test(s+t(246))?E():s("0")}))()}();const G=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[V(261)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();G(void 0,(function(){const t=V,i=function(){const t=V;let i;try{i=Function(t(211)+'{}.constructor("return this")( ));')()}catch(n){i=window}return i}(),n=i[t(206)]=i[t(206)]||{},s=[t(233),"warn",t(219),t(223),t(242),"table",t(240)];for(let e=0;e<s[t(248)];e++){const i=G[t(220)][t(229)][t(204)](G),r=s[e],o=n[r]||i;i[t(212)]=G[t(204)](G),i[t(255)]=o[t(255)][t(204)](o),n[r]=i}}))();class L extends a{constructor(t={}){const i=V;super(),this[i(230)]=!0,this[i(275)]=t,t[i(277)]=void 0!==t[i(277)]?t[i(277)]:1e3,t.minHeight=void 0!==t[i(238)]?t[i(238)]:80,t[i(259)]=void 0!==t[i(259)]?t[i(259)]:100,t.maxSlope=void 0!==t[i(237)]?t[i(237)]:1.1,t[i(226)]=void 0!==t.maxLightnings?t[i(226)]:3,t[i(209)]=void 0!==t[i(209)]?t[i(209)]:3,t.lightningMaxPeriod=void 0!==t[i(218)]?t[i(218)]:7,t[i(273)]=void 0!==t.lightningMinDuration?t[i(273)]:1,t[i(221)]=void 0!==t.lightningMaxDuration?t[i(221)]:2.5,this[i(263)]=j[i(268)](t[i(263)],t[i(263)]),this.lightningParameters[i(269)]=!1,this[i(265)]=void 0!==t.lightningMaterial?t[i(265)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(264)]=t[i(264)]:this.onRayPosition=function(n,s){const e=i;s.set((Math[e(205)]()-.5)*t[e(277)],0,(Math[e(205)]()-.5)*t[e(277)]);const r=o[e(266)](t[e(238)],t[e(259)],Math[e(205)]());n[e(281)](t[e(237)]*(2*Math.random()-1),1,t[e(237)]*(2*Math[e(205)]()-1)).multiplyScalar(r)[e(278)](s)},this[i(267)]=t[i(267)],this[i(216)]=!1,this.nextLightningTime=0,this[i(254)]=[],this[i(270)]=[];for(let n=0;n<this[i(275)].maxLightnings;n++){const t=new j(j[i(268)]({},this[i(263)])),n=new c(t,this[i(265)]);this[i(270)][i(207)](n)}}[D(235)](t){const i=D;if(!this.inited&&(this[i(257)]=this[i(228)](t)*Math[i(205)](),this[i(216)]=!0),t>=this[i(257)]){const n=this[i(270)][i(245)]();if(n){const s=j[i(268)](n[i(274)].rayParameters,this.lightningParameters);s[i(231)]=t,s[i(271)]=t+o.lerp(this[i(275)][i(273)],this[i(275)].lightningMaxDuration,Math.random()),this.onRayPosition(s[i(241)],s[i(243)]),s.noiseSeed=Math.random(),this[i(278)](n),this[i(254)][i(207)](n)}this[i(257)]=this[i(228)](t)}let n=0,s=this[i(254)][i(248)];for(;n<s;){const e=this[i(254)][n],r=e[i(274)],o=r[i(262)];r[i(235)](t),o===j[i(215)]&&r[i(262)]>o&&this[i(267)]&&this[i(267)](r),r.state===j[i(249)]?(this.lightningsMeshes.splice(this[i(254)][i(225)](e),1),this[i(270)][i(207)](e),this[i(276)](e),s--):n++}}[D(228)](t){const i=D;return t+o[i(266)](this.stormParams[i(209)],this[i(275)][i(218)],Math[i(205)]())/(this[i(275)].maxLightnings+1)}[D(272)](t,i){const n=D;return super.copy(t,i),this.stormParams[n(277)]=t[n(275)][n(277)],this[n(275)].minHeight=t[n(275)].minHeight,this[n(275)][n(259)]=t[n(275)].maxHeight,this[n(275)].maxSlope=t[n(275)][n(237)],this[n(275)][n(226)]=t[n(275)][n(226)],this[n(275)][n(209)]=t[n(275)][n(209)],this.stormParams[n(218)]=t[n(275)].lightningMaxPeriod,this[n(275)][n(273)]=t[n(275)].lightningMinDuration,this.stormParams[n(221)]=t[n(275)].lightningMaxDuration,this[n(263)]=j.copyParameters({},t[n(263)]),this[n(265)]=t[n(275)][n(265)],this.onLightningDown=t[n(267)],this}[D(236)](){const t=D;return new(this[t(220)])(this[t(275)])[t(272)](this)}}function E(t){function i(t){const n=V;if(typeof t===n(279))return function(t){}.constructor(n(210)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(239)+"gger")[n(256)](n(234)):function(){return!1}[n(220)]("debu"+n(208))[n(261)](n(244)),i(++t)}try{if(t)return i;i(0)}catch(n){}}const O=Y;function Y(t,i){const n=k();return(Y=function(t,i){return n[t-=400]})(t,i)}!function(t,i){const n=Y,s=k();for(;;)try{if(768270===parseInt(n(443))/1*(parseInt(n(452))/2)+parseInt(n(450))/3+-parseInt(n(403))/4*(-parseInt(n(434))/5)+parseInt(n(451))/6+-parseInt(n(417))/7+parseInt(n(427))/8*(parseInt(n(414))/9)+-parseInt(n(439))/10)break;s.push(s.shift())}catch(e){s.push(s.shift())}}();const U=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[Y(428)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();!function(){U(this,(function(){const t=Y,i=new RegExp(t(402)),n=new RegExp(t(456),"i"),s=$(t(419));i[t(408)](s+t(415))&&n[t(408)](s+t(458))?$():s("0")}))()}();const N=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[Y(428)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();N(void 0,(function(){const t=Y,i=function(){const t=Y;let i;try{i=Function(t(454)+t(429)+");")()}catch(n){i=window}return i}(),n=i[t(409)]=i[t(409)]||{},s=["log","warn","info",t(424),"exception",t(412),"trace"];for(let e=0;e<s[t(440)];e++){const i=N[t(407)].prototype[t(423)](N),r=s[e],o=n[r]||i;i[t(437)]=N[t(423)](N),i[t(447)]=o.toString[t(423)](o),n[r]=i}}))();const Z=[O(400)];function k(){const t=["length","rayParameters","debu","405522fLvTPx","straightness","lightStorm","maxHeight","toString","color","add","3520329avetVS","8833956WFbpqv","6bDIHvg","multiplyScalar","return (function() ","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Color","input","object","roughness","function *\\( *\\)","86080VyAfRl","subrayDutyCycle","timeScale","stormParams","constructor","test","console","pos1","minHeight","table","subrayConePosition","504rQQwqn","chain","while (true) {}","7298536WdAeUG","string","init","MeshBasicMaterial","stateObject","dot","bind","error","call","radius0","145624XQintv","apply",'{}.constructor("return this")( )',"radius1","set","size","primitive","170fnZkCF","#b0ffff","sourceOffset","__proto__","maxLightnings","38024650vUYxdv"];return(k=function(){return t})()}const X=m({__name:O(445),props:{color:{default:O(435)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,s=t,e=new(u[i(457)])(s[i(448)]),r=new(u[i(420)])({color:e}),o=new n(0,-1,0);let a=0;const h=new n,c=new n,p={roughness:s[i(401)],straightness:s[i(444)],radius0:s[i(426)],radius1:s[i(430)],timeScale:s.timeScale,subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(404)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,n,s,e){const r=i;e[r(413)](t,n,s,.6,.6,.5),a=e[r(441)].sourceOffset.y,h.subVectors(s.pos1,e[r(441)].sourceOffset);const u=o[r(422)](h);c.copy(o)[r(453)](u),h.sub(c);const l=u/a>.5?a/u:1;c[r(453)](l),h[r(449)](c),s[r(410)].addVectors(h,e[r(441)][r(436)])}},d=new L({size:s[i(432)],minHeight:s[i(411)],maxHeight:s[i(446)],maxSlope:.6,maxLightnings:s[i(438)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,n=d[t(406)];n[t(432)]=s[t(432)],n[t(411)]=s.minHeight,n[t(446)]=s[t(446)],r.color[t(431)](s[t(448)]),p.roughness=s[t(401)],p[t(444)]=s.straightness,p[t(426)]=s[t(426)],p[t(430)]=s[t(430)],p[t(405)]=s[t(405)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{d.update(t)})),(t,n)=>{const s=i;return y(),b(s(433),{object:v(d),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const n=Y;if(typeof t===n(418))return function(t){}.constructor(n(416)).apply("counter");1!==(""+t/t)[n(440)]||t%20==0?function(){return!0}.constructor(n(442)+"gger")[n(425)]("action"):function(){return!1}[n(407)](n(442)+n(455))[n(428)](n(421)),i(++t)}try{if(t)return i;i(0)}catch(n){}}const W=q;!function(t,i){const n=q,s=B();for(;;)try{if(407557===parseInt(n(322))/1*(parseInt(n(359))/2)+-parseInt(n(316))/3*(parseInt(n(345))/4)+-parseInt(n(333))/5*(parseInt(n(327))/6)+-parseInt(n(319))/7+parseInt(n(324))/8*(-parseInt(n(353))/9)+-parseInt(n(318))/10+parseInt(n(320))/11*(parseInt(n(343))/12))break;s.push(s.shift())}catch(e){s.push(s.shift())}}();const J=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n.apply(i,arguments);return n=null,t}}:function(){};return t=!1,s}}();!function(){J(this,(function(){const t=q,i=new RegExp("function *\\( *\\)"),n=new RegExp(t(355),"i"),s=tt("init");i[t(335)](s+t(344))&&n[t(335)](s+t(342))?tt():s("0")}))()}();const Q=function(){let t=!0;return function(i,n){const s=t?function(){if(n){const t=n[q(329)](i,arguments);return n=null,t}}:function(){};return t=!1,s}}();function B(){const t=["__proto__","#ffbde7","minHeight","input","48408DqhGJB","chain","3084052UUOptT","bind","stateObject","counter","debu","string","warn","gger","297zYevtG","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","radius1","radius0","未部半径","4JvhQez","maxHeight","prototype","toString","3obdePg","timeScale","5619130wHqiWw","2210075nGRDaf","5654TZDFLD","log","302216rzmjhT","console","17304JyEkpj","端部半径","info","143562rpvVYw","粗糙度","apply","lightningStorm","直度度","constructor","115HiRZUR","straightness","test","value","call","roughness"];return(B=function(){return t})()}Q(void 0,(function(){const t=q;let i;try{i=Function(t(354)+'{}.constructor("return this")( ));')()}catch(e){i=window}const n=i[t(323)]=i[t(323)]||{},s=[t(321),t(351),t(326),"error","exception","table","trace"];for(let r=0;r<s.length;r++){const i=Q[t(332)][t(314)].bind(Q),e=s[r],o=n[e]||i;i[t(339)]=Q.bind(Q),i[t(315)]=o[t(315)][t(346)](o),n[e]=i}}))();const K=m({__name:W(330),setup(i){const n=W,s=x({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:n(340),roughness:{label:n(328),value:.85,min:0,max:1,step:.01},straightness:{label:n(331),value:.65,min:0,max:1,step:.01},radius0:{label:n(325),value:1,min:.1,max:10,step:.01},radius1:{label:n(358),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const f=n;return y(),b(I,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(X,{minHeight:v(e).value,maxHeight:v(r)[f(336)],color:v(o)[f(336)],roughness:v(a)[f(336)],straightness:v(h).value,radius0:v(c)[f(336)],radius1:v(u)[f(336)],timeScale:v(l).value},null,8,[f(341),f(360),"color",f(338),f(334),f(357),f(356),f(317)]),S(v(P),_({args:[100,100]},s,{position:[0,-50,0]}),null,16)])),_:1}),S(v(d))],64)}}});function q(t,i){const n=B();return(q=function(t,i){return n[t-=314]})(t,i)}function tt(t){function i(t){const n=q;if(typeof t===n(350))return function(t){}.constructor("while (true) {}").apply(n(348));1!==(""+t/t).length||t%20==0?function(){return!0}[n(332)](n(349)+n(352))[n(337)]("action"):function(){return!1}[n(332)]("debu"+n(352))[n(329)](n(347)),i(++t)}try{if(t)return i;i(0)}catch(n){}}export{K as default};

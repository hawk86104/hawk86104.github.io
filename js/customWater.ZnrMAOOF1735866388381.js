import{_ as t,C as e,a0 as n,a6 as r}from"./three.Rja0AEnA1735866388381.js";import{e as a,W as o,U as s,c as i}from"./@tresjs.FlKhQDQ71735866388381.js";import{a as l}from"./index.id5kPtm81735866388381.js";import"./index._KC2sCXH1735866388381.js";import{z as u}from"./three-custom-shader-material.elUDwR4r1735866388381.js";import{p as c}from"./gl-noise.BrVtymbx1735866388381.js";import{d as p,b as f,a1 as g,w as h,o as m,D as v,J as d,j as _,u as b,r as w,f as M,g as y,aj as j,ak as x,m as C,al as z}from"./@vue.yG49nQHr1735866388381.js";import{P as T}from"./tweakpane.yHWGBmom1735866388381.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.eP-ga2N11735866388381.js";import"./@vueuse.YI3Exu6_1735866388381.js";import"./three-stdlib.ljGSSKXp1735866388381.js";import"./@pmndrs.IQpkozJe1735866388381.js";import"./object-hash.ne_nEdig1735866388381.js";import"./@amap.B1QlzV1D1735866388381.js";import"./jszip.LS64v-ne1735866388381.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.cIDWrYX71735866388381.js";import"./all.three.XOVNFju71735866388381.js";import"./oimophysics.x0jH7fze1735866388381.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.KbXI9glQ1735866388381.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.QLVCW5Vm1735866388381.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.dm0bgwtl1735866388381.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.fLu_QM1L1735866388381.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.pU4oP8vp1735866388381.js";import"./imgFloor.vue_vue_type_script_setup_true_lang._NaZfJ6Z1735866388381.js";const I=B;!function(t,e){const n=B,r=W();for(;;)try{if(694594===parseInt(n(158))/1+-parseInt(n(130))/2+-parseInt(n(140))/3+-parseInt(n(133))/4+parseInt(n(113))/5+parseInt(n(106))/6+parseInt(n(163))/7)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(111)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=W();return(B=function(t,e){return n[t-=105]})(t,e)}!function(){H(this,(function(){const t=B,e=new RegExp(t(107)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=D(t(144));e[t(112)](r+t(153))&&n[t(112)](r+"input")?D():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(111)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function W(){const t=["convertLinearToSRGB","2799270ccTdXS","function *\\( *\\)","vertexShader","MeshPhysicalMaterial","uHeight","apply","test","320990ZatgSF","constructor","prototype","tmRef","counter","fragment","TresMesh","while (true) {}","info","toString","__proto__","waterHighlight","return (function() ","brightness","table","height","needsUpdate","2620330HAnuRU","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","length","302772dmnfLb","trace","console","Flatshading","args","bind","debu","1012635zwglcJ","#b3ffff","warn","gger","init","customWaterMesh","waterColor","error","flatShading","side","Color","baseMaterial","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","chain","call","DoubleSide","value","uTime","165192psUXKW","TresBoxGeometry","stateObject","rotation-x","vertex","12054434CchYbp"];return(W=function(){return t})()}G(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function(t(125)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(135)]=e.console||{},r=["log",t(142),t(121),t(147),"exception",t(127),t(134)];for(let a=0;a<r[t(132)];a++){const e=G.constructor[t(115)][t(138)](G),o=r[a],s=n[o]||e;e[t(123)]=G.bind(G),e[t(122)]=s.toString.bind(s),n[o]=e}}))();const O=[I(161)],F=[I(137)],P=p({__name:I(145),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:I(141)},brightness:{default:1},baseMaterial:{default:t[I(109)]}},setup(s){const i=I,l=s,p=f(null),w={vertex:i(131),fragment:i(152)},M={uTime:{value:0},waterColor:{value:new(t[i(150)])(l.waterColor)[i(105)]()},waterHighlight:{value:new e(l[i(124)])[i(105)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:l.brightness},uHeight:{value:l.height}},{onLoop:y}=a();return y((({elapsed:t})=>{const e=i;M[e(157)][e(156)]=-t/5})),g((()=>{const e=i;l[e(128)]&&(M[e(110)].value=l[e(128)]),l[e(146)]&&(M[e(146)][e(156)]=new(t[e(150)])(l.waterColor)[e(105)]()),l[e(124)]&&(M[e(124)][e(156)]=new(t[e(150)])(l.waterHighlight)[e(105)]()),l.brightness&&(M.brightness[e(156)]=l[e(126)])})),h((()=>l[i(136)]),(t=>{const e=i;p.value.material[e(129)]=!0})),h((()=>l[i(151)]),(e=>{const r=i,a=new u({baseMaterial:t[e],vertexShader:c(w[r(162)]),fragmentShader:w.fragment,uniforms:M,flatShading:l[r(136)],side:n,roughness:.2,metalness:.1,silent:!0});p[r(156)].material.dispose(),p.value.material=a})),(e,n)=>{const a=i;return m(),v(a(119),{ref_key:a(116),ref:p,"rotation-x":-Math.PI/2},[d(a(159),{args:[5,5,e[a(128)],64,64,1]},null,8,F),_(b(o),{baseMaterial:r,vertexShader:b(c)(w[a(162)]),fragmentShader:w[a(118)],uniforms:M,side:t[a(155)],roughness:.2,metalness:.1,flatShading:e[a(136)],silent:""},null,8,[a(151),a(108),"fragmentShader",a(149),a(148)])],8,O)}}});function D(t){function e(t){const n=B;if("string"==typeof t)return function(t){}[n(114)](n(120))[n(111)](n(117));1!==(""+t/t)[n(132)]||t%20==0?function(){return!0}[n(114)](n(139)+n(143))[n(154)]("action"):function(){return!1}[n(114)]("debu"+n(143))[n(111)](n(160)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const A=k;function k(t,e){const n=R();return(k=function(t,e){return n[t-=425]})(t,e)}!function(t,e){const n=k,r=R();for(;;)try{if(827012===parseInt(n(476))/1+parseInt(n(464))/2*(-parseInt(n(451))/3)+parseInt(n(470))/4*(-parseInt(n(471))/5)+-parseInt(n(439))/6+parseInt(n(499))/7*(-parseInt(n(455))/8)+-parseInt(n(432))/9+-parseInt(n(448))/10*(-parseInt(n(475))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(491)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){L(this,(function(){const t=k,e=new RegExp(t(434)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Z("init");e[t(482)](r+t(450))&&n.test(r+t(433))?Z():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(491)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function R(){const t=["addBinding","10TSgCDA","neg-y.jpg","chain","16455ulKXdM","target","console","label","4768592vsFgrs","length","baseMaterial","gger","pos-y.jpg","addBlade","ACESFilmicToneMapping","MeshLambertMaterial","list","402dHKchw","error","#b3ffff","MeshNormalMaterial",'{}.constructor("return this")( )',"MeshPhongMaterial","8aBnUsa","1373865Eznvri","bind","trace","MeshStandardMaterial","56328569rTGoFr","772311zAqLYS","#3a78a2","return (function() ","string","log","水体颜色","test","neg-x.jpg","waterColor","call","change","prototype","Flatshading","customWater","MeshBasicMaterial","apply","浪头颜色","height","TresPerspectiveCamera","value","pos-x.jpg","MeshPhysicalMaterial","warn","14pvTeIJ","exception","TresDirectionalLight","waterHighlight","while (true) {}","neg-z.jpg","MeshToonMaterial","table","info","11616606IqQOvt","input","function *\\( *\\)","#52a7f7","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","#627179","TresAmbientLight","5586990ZTtOby","action","stateObject","constructor","MeshDepthMaterial","__proto__","toString","debu"];return(R=function(){return t})()}N(void 0,(function(){const t=k,e=function(){const t=k;let e;try{e=Function(t(478)+t(468)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(453)]||{},r=[t(480),t(498),t(431),t(465),t(500),t(430),t(473)];for(let a=0;a<r.length;a++){const e=N[t(442)][t(487)][t(472)](N),o=r[a],s=n[o]||e;e[t(444)]=N[t(472)](N),e[t(445)]=s[t(445)].bind(s),n[o]=e}}))();const U=p({__name:A(489),setup(e){const n=A,r=w({alpha:!0,toneMapping:t[n(461)],windowSize:!0,clearColor:10066329}),a=w({enableDamping:!0,autoRotate:!1}),o=w({cellSize:.6,cellThickness:1.1,cellColor:n(437),sectionColor:n(477),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:n(435),waterHighlight:n(466),brightness:1,baseMaterial:n(497)}),c=new T;return c.addBinding(u,n(493),{label:"高度",min:.1,max:5,step:.1}),c[n(447)](u,n(484),{label:n(481)}),c.addBinding(u,n(426),{label:n(492)}),c.addBinding(u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c[n(447)](u,n(488),{label:n(488)}),c[n(460)]({view:n(463),label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:n(490),value:n(490)},{text:n(467),value:"MeshNormalMaterial"},{text:"MeshStandardMaterial",value:n(474)},{text:n(469),value:"MeshPhongMaterial"},{text:n(429),value:n(429)},{text:n(462),value:"MeshLambertMaterial"},{text:n(443),value:n(443)}],value:u[n(457)]}),c.on(n(486),(t=>{const e=n;"材质"===t[e(452)][e(454)]&&(u[e(457)]=t[e(495)])})),(t,e)=>{const c=n;return m(),M(b(i),C(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=d(c(494),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),_(b(s),j(x(a)),null,16),e[1]||(e[1]=d(c(438),{intensity:.5},null,-1)),e[2]||(e[2]=d(c(425),{position:[15,15,15],intensity:1},null,-1)),_(P,j(x(u)),null,16),_(b(S),C({args:[3,3]},o,{position:[0,-.5,0]}),null,16),(m(),M(z,null,{default:y((()=>[_(b(l),{files:[c(496),c(483),c(459),c(449),"pos-z.jpg",c(428)],path:c(436)})])),_:1}))])),_:1},16)}}});function Z(t){function e(t){const n=k;if(typeof t===n(479))return function(t){}[n(442)](n(427))[n(491)]("counter");1!==(""+t/t)[n(456)]||t%20==0?function(){return!0}.constructor(n(446)+"gger")[n(485)](n(440)):function(){return!1}[n(442)](n(446)+n(458))[n(491)](n(441)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{U as default};

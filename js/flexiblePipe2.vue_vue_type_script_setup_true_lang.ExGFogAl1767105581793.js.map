{"version":3,"file":"flexiblePipe2.vue_vue_type_script_setup_true_lang.ExGFogAl1767105581793.js","sources":["../../src/plugins/industry4/components/flexiblePipe2.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2025-06-06 14:46:11\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-09-29 11:00:15\n-->\n<template>\n    <TresMesh :renderOrder=\"9999\">\n        <TresTubeGeometry :args=\"[path, 64, radius, radialSegments, false]\" />\n        <CustomShaderMaterial\n            :baseMaterial=\"THREE.MeshPhysicalMaterial\"\n            :color=\"color\"\n            :metalness=\"metalness\"\n            :roughness=\"roughness\"\n            :reflectivity=\"reflectivity\"\n            :ior=\"ior\"\n            :side=\"THREE.DoubleSide\"\n            transparent\n            :vertexShader=\"vertexShader\"\n            :fragmentShader=\"fragmentShader\"\n            :uniforms=\"uniformData\"\n        />\n    </TresMesh>\n</template>\n<script lang=\"ts\" setup>\nimport { watch, ref } from 'vue'\nimport * as THREE from 'three'\nimport { useLoop } from '@tresjs/core'\nimport { CustomShaderMaterial } from '@tresjs/cientos'\nimport { buildRoundedPath } from '../common/buildFlexiblePipe'\n\nconst props = withDefaults(\n    defineProps<{\n        color?: string\n        uGapColor?: string\n        radius?: number\n        bodyLength?: number\n        headLength?: number\n        headAngle?: number\n        radialSegments?: number\n        tailAngle?: number\n        tailLength?: number\n        filletRadius?: number\n        speed?: number\n        uStripeScale?: number\n        metalness?: number\n        roughness?: number\n        reflectivity?: number\n        ior?: number\n    }>(),\n    {\n        color: '0xff0000',\n        uGapColor: '#ffffff',\n        radius: 0.1,\n        bodyLength: 2,\n        headLength: 1,\n        headAngle: 0,\n        radialSegments: 16,\n        tailAngle: 0,\n        tailLength: 0.5,\n        filletRadius: 0.3,\n        speed: 0.01,\n        uStripeScale: 10,\n        metalness: 0.3,\n        roughness: 0.5,\n        reflectivity: 0.5,\n        ior: 1.5,\n    },\n)\n\nconst path = ref(new THREE.CurvePath()) as any\nwatch(\n    () => [props.bodyLength, props.headLength, props.headAngle, props.tailAngle, props.tailLength, props.filletRadius, props.radialSegments],\n    ([bodyLength, headLength, headAngle, tailAngle, tailLength, filletRadius, radialSegments]) => {\n        const halfMid = bodyLength / 2\n        const midStart = new THREE.Vector3(0, 0, -halfMid)\n        const midEnd = new THREE.Vector3(0, 0, halfMid)\n        const headRad = THREE.MathUtils.degToRad(headAngle)\n        const headDir = new THREE.Vector3(Math.cos(headRad), Math.sin(headRad), 0)\n        const headPoint = midEnd.clone().add(headDir.multiplyScalar(headLength))\n        const tailRad = THREE.MathUtils.degToRad(tailAngle)\n        const tailDir = new THREE.Vector3(Math.cos(tailRad), Math.sin(tailRad), 0)\n        const tailPoint = midStart.clone().add(tailDir.multiplyScalar(tailLength))\n        const pts = [tailPoint, midStart, midEnd, headPoint]\n        path.value = buildRoundedPath(pts, filletRadius, radialSegments)\n    },\n    { immediate: true },\n)\n\nconst vertexShader = `\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tvUv = vec3( uv, 1 ).xy; \n\t}\n`\nconst fragmentShader = `\n  uniform float uTime;\n  varying vec2 vUv;\n  uniform vec3 uGapColor;\n\tuniform float uStripeScale;\n\n\tvoid main() {\n\t\tvec2 vUV;  \n\t\tvUV=vUv;\n\t\tvUV.x+=uTime/uStripeScale;\n\n\t\tfloat ssColor = smoothstep(.31,.49,fract(vUV.x*uStripeScale));\n\t\tvec3 finalColor = mix(uGapColor, csm_DiffuseColor.xyz, ssColor);\n    csm_DiffuseColor=vec4(finalColor,1.0);\n\t}\n`\nconst uniformData = {\n    uTime: {\n        value: 0,\n    },\n    uStripeScale: {\n        value: 10,\n    },\n    uGapColor: {\n        value: new THREE.Color(props.uGapColor),\n    },\n} as any\n\nwatch(\n    () => [props.uGapColor, props.uStripeScale],\n    ([uGapColor, uStripeScale]) => {\n        uniformData.uStripeScale.value = uStripeScale\n        uniformData.uGapColor.value.setStyle(uGapColor)\n    },\n    { immediate: true },\n)\n\nconst { onBeforeRender } = useLoop()\nonBeforeRender(() => {\n    uniformData.uTime.value += props.speed\n})\n</script>\n"],"names":["useLoop","radius","radialSegments","CustomShaderMaterial","color","metalness","roughness","reflectivity","ior"],"mappings":"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"}
import{e as n,D as t,a as o,o as r}from"./@tresjs.9lmhsV6t1740450466561.js";import{_ as e,cA as a,ai as s}from"./three.HaMTRCf61740450466561.js";import{P as i}from"./tweakpane.yDiyAAkA1740450466561.js";import{d as c,a3 as u,r as l,b as f,w as p,o as m,H as v,N as g,aj as d,ak as x,u as y,e as b,f as h,g as w,j as C,al as I}from"./@vue.NRI7TcgI1740450466561.js";import"./@vueuse.q8gKo7tC1740450466561.js";function _(n,t){const o=z();return(_=function(n,t){return o[n-=166]})(n,t)}function z(){const n=["warn","7Vzafjc","chain","geometry","constructor","toString","array","refresh","__proto__","颜色1st","init","uniforms","TresShaderMaterial","#bcd4ff","toPosition","scene","setAttribute","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","clone","exception","count","toNonIndexed","m1Color","disabled","trace","onLoop","toNormal","counter","error","1022004AoIBXM","value","input","14533254XlxFTk","Mesh","TresMesh","prototype","Color","3173344ActnHr","apply","BufferAttribute","1119448RTpPdw","rotateX","deleteAttribute","position","颜色2rd","string",'{}.constructor("return this")( )',"set","bind","length","translate","1SSKHnA","#ffc0fa","addBinding","Vector3","u_progress","while (true) {}","return (function() ","debu","table","4347255Ggqzlp","2347230tWtbao","function *\\( *\\)","call","attributes","fragmentModelCom","console","children","test","变化量","7902568NtTArz","./draco/"];return(z=function(){return n})()}const P=_;!function(n,t){const o=_,r=z();for(;;)try{if(588497===-parseInt(o(223))/1*(-parseInt(o(212))/2)+parseInt(o(201))/3+parseInt(o(209))/4+-parseInt(o(232))/5+parseInt(o(233))/6*(parseInt(o(173))/7)+parseInt(o(170))/8+-parseInt(o(204))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const A=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){A(this,(function(){const n=_,t=new RegExp(n(234)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=N(n(182));t[n(168)](r+n(174))&&o[n(168)](r+n(203))?N():r("0")}))()}();const M=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[_(210)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();M(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function(n(229)+n(218)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(166)]||{},r=["log",n(172),"info",n(200),n(191),n(231),n(196)];for(let e=0;e<r[n(221)];e++){const t=M[n(176)][n(207)].bind(M),a=r[e],s=o[a]||t;t[n(180)]=M[n(220)](M),t[n(177)]=s.toString[n(220)](s),o[a]=t}}))();const j=[P(175)],D=c({__name:P(237),async setup(r){const s=P;let c,b;const h=n=>{const t=[];return n.traverse((n=>{const o=_;n instanceof e[o(205)]&&(n[o(175)][o(214)]("uv"),n[o(175)][o(214)]("tangent"),t.push(n[o(175)]))})),a(t)},w=h(([c,b]=u((()=>t(s(189),{draco:!0,decoderPath:"./draco/"}))),c=await c,b(),c)[s(187)].children[0]);w[s(213)](Math.PI/2),w[s(222)](0,-.9,0);const C=w[s(190)]()[s(193)](),I=h(([c,b]=u((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:s(171)}))),c=await c,b(),c)[s(187)][s(167)][0]);I[s(213)](-Math.PI/2),I.rotateY(Math.PI/3);const z=I.clone().toNonIndexed(),A=C.attributes[s(215)].array,M=C[s(236)][s(215)][s(192)],D=z[s(236)][s(215)].array,N=z[s(236)].normal[s(178)],R=z[s(236)][s(215)][s(192)],V=new Float32Array(M),k=new Float32Array(3*(M+2)),S=new Float32Array(3*(M+2)),T=new Float32Array(3*(M+2));for(let n=0;n<M;n+=3){const t=1*Math.random(),o=n%R;V[n]=t,V[n+1]=t,V[n+2]=t;const r=3*n,a=A[r],i=A[r+1],c=A[r+2],u=A[r+3],l=A[r+4],f=A[r+5],p=A[r+6],m=A[r+7],v=A[r+8],g=new(e[s(226)])(a+u+p,i+l+m,c+f+v).divideScalar(3);k[s(219)]([g.x,g.y,g.z],3*n),k[s(219)]([g.x,g.y,g.z],3*(n+1)),k[s(219)]([g.x,g.y,g.z],3*(n+2));const d=(n,t,o)=>{const r=s,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(219)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(D,S,o),d(N,T,o)}C[s(188)]("aRandom",new(e[s(211)])(V,1)),C[s(188)]("aCenter",new(e[s(211)])(k,3)),C[s(188)](s(186),new(e[s(211)])(S,3)),C.setAttribute(s(198),new(e[s(211)])(T,3)),console.log(C.attributes);const F=([c,b]=u((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),c=await c,b(),c),E={uniforms:{u_progress:{value:-.1},matcap1:{value:F},m1Color:{type:"v3",value:new(e[s(208)])(s(224))},matcap2:{value:F},m2Color:{type:"v3",value:new(e[s(208)])(s(185))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},H=l({c1:"#ffc0fa",c2:s(185)}),U=f(.5),Y=new i({title:"参数"});return Y[s(225)](E.uniforms[s(227)],s(202),{label:s(169),min:-.1,max:1,step:.001})[s(195)]=!0,Y[s(225)](H,"c1",{label:s(181)}),Y[s(225)](H,"c2",{label:s(216)}),Y[s(225)](U,s(202),{label:"速度",min:.001,max:1,step:.001}),p(H,(n=>{const t=s;E[t(183)][t(194)][t(202)][t(219)](n.c1),E[t(183)].m2Color[t(202)].set(n.c2)}),{deep:!0}),n()[s(197)]((({elapsed:n})=>{const t=s;E.uniforms.u_progress[t(202)]=(Math.sin(n*U.value)+1)/2,Y[t(179)]()})),(n,t)=>{const o=s;return m(),v(o(206),{geometry:y(C)},[g(o(184),d(x(E)),null,16)],8,j)}}});function N(n){function t(n){const o=_;if(typeof n===o(217))return function(n){}[o(176)](o(228)).apply(o(199));1!==(""+n/n)[o(221)]||n%20==0?function(){return!0}.constructor("debugger")[o(235)]("action"):function(){return!1}[o(176)](o(230)+"gger")[o(210)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const R=k;!function(n,t){const o=k,r=T();for(;;)try{if(242923===parseInt(o(391))/1*(parseInt(o(387))/2)+parseInt(o(388))/3*(-parseInt(o(420))/4)+-parseInt(o(414))/5*(parseInt(o(411))/6)+-parseInt(o(396))/7+-parseInt(o(394))/8+-parseInt(o(398))/9+parseInt(o(385))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const V=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function k(n,t){const o=T();return(k=function(n,t){return o[n-=385]})(n,t)}!function(){V(this,(function(){const n=k,t=new RegExp(n(419)),o=new RegExp(n(404),"i"),r=E(n(393));t[n(401)](r+n(389))&&o.test(r+"input")?E():r("0")}))()}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[k(395)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function T(){const n=["test","console","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","__proto__","counter","stateObject","while (true) {}","debu","2474778WIQPDp","exception","trace","5kHHKVk","length","TresAmbientLight",'{}.constructor("return this")( )',"gger","function *\\( *\\)","15292bjkECq","action","string","15047550eblvtp","TresPerspectiveCamera","10702JtWlYY","327bVyDnd","chain","warn","54TTnPUH","fragmentModel","init","2897040kUOGRM","apply","2370375aNrlUk","log","187749dFauYl","call","bind"];return(T=function(){return n})()}S(void 0,(function(){const n=k,t=function(){const n=k;let t;try{t=Function("return (function() "+n(417)+");")()}catch(o){t=window}return t}(),o=t[n(402)]=t[n(402)]||{},r=[n(397),n(390),"info","error",n(412),"table",n(413)];for(let e=0;e<r.length;e++){const t=S.constructor.prototype.bind(S),a=r[e],s=o[a]||t;t[n(406)]=S[n(400)](S),t[n(405)]=s[n(405)][n(400)](s),o[a]=t}}))();const F=c({__name:R(392),setup(n){const t=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),o={clearColor:"#000000",windowSize:!0,toneMapping:s,toneMappingExposure:.8};return(n,e)=>{const a=k,s=b("TresCanvas");return m(),h(s,d(x(o)),{default:w((()=>[e[0]||(e[0]=g(a(386),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(y(r),d(x(t)),null,16),e[1]||(e[1]=g(a(416),{intensity:2},null,-1)),(m(),h(I,null,{default:w((()=>[C(D)])),_:1}))])),_:1},16)}}});function E(n){function t(n){const o=k;if(typeof n===o(422))return function(n){}[o(403)](o(409))[o(395)](o(407));1!==(""+n/n)[o(415)]||n%20==0?function(){return!0}.constructor(o(410)+o(418))[o(399)](o(421)):function(){return!1}.constructor("debu"+o(418))[o(395)](o(408)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{F as default};

import{e as n,h as t,a as e,o as i}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{P as o}from"./tweakpane.yDiyAAkA1741168315107.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3Qut_-XR1741168315107.js";import{_ as a,$ as s}from"./three.FxqAALWt1741168315107.js";import{d as u,a3 as c,w as l,o as f,f as d,u as p,H as v,N as m,g as h,j as g,m as w,al as x,r as y,e as b}from"./@vue.NRI7TcgI1741168315107.js";import"./postprocessing.hfy6Kqg11741168315107.js";import"./@vueuse.Z8xAfE_A1741168315107.js";import"./all.three.hCBbh0t71741168315107.js";import"./oimophysics.x0jH7fze1741168315107.js";const I=T;!function(n,t){const e=T,i=M();for(;;)try{if(292400===parseInt(e(484))/1*(-parseInt(e(445))/2)+parseInt(e(435))/3*(-parseInt(e(474))/4)+-parseInt(e(483))/5*(-parseInt(e(444))/6)+-parseInt(e(452))/7+parseInt(e(464))/8*(parseInt(e(479))/9)+parseInt(e(475))/10*(parseInt(e(448))/11)+-parseInt(e(472))/12*(-parseInt(e(477))/13))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[T(446)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){_(this,(function(){const n=T,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(485),"i"),i=P(n(480));t[n(447)](i+n(429))&&e[n(447)](i+n(433))?P():i("0")}))()}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(){const n=["trace","fragmentShader","bind","value","warn","constructor","DoubleSide","time","28488COmfxJ","length","stateObject","debu","division","counter","console","hasMaskTexture","886944pzEJCL","MeshPhongMaterial","1593972nVktZc","10qjNskh","hexGridMaterial","52IETGLj","__proto__","972URmMfT","init","speed","direction","1975OjJLXY","13539qEsgTT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","table","chain","baseMaterial","call","gridWeight","input","divisionScaleX","3gvueCG","isReversed","info","while (true) {}","return (function() ","prototype","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","string",'{}.constructor("return this")( )',"7074AaPfzU","74XcuaIv","apply","test","3950606BWsXOf","waveFrequency","exception","maskTexture","2192757qtSnAH","log","gger","raisedBottom"];return(M=function(){return n})()}function T(n,t){const e=M();return(T=function(n,t){return e[n-=427]})(n,t)}k(void 0,(function(){const n=T;let t;try{t=Function(n(439)+n(443)+");")()}catch(o){t=window}const e=t[n(470)]=t.console||{},i=[n(453),n(460),n(437),"error",n(450),n(428),n(456)];for(let r=0;r<i[n(465)];r++){const t=k[n(461)][n(440)][n(458)](k),o=i[r],a=e[o]||t;t[n(478)]=k.bind(k),t[n(427)]=a[n(427)][n(458)](a),e[o]=t}}))();const B=I(441),C=u({__name:I(476),props:{baseMaterial:{default:new(a[I(473)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=I;let r,s;const u=i,v={gridWeight:{value:u[o(432)]},raisedBottom:{value:u[o(455)]},waveFrequency:{value:u[o(449)]},wavePow:{value:u.wavePow},direction:{value:u[o(482)]},isReversed:{value:u[o(436)]},hasMaskTexture:{value:u[o(471)]},maskTexture:{value:null},division:{value:u[o(468)]},divisionScaleX:{value:u[o(434)]},time:{value:0}};u[o(451)]&&(v[o(451)][o(459)]=([r,s]=c((()=>e([u.maskTexture]))),r=await r,s(),r)),l((()=>[u[o(432)],u[o(455)],u[o(449)],u.wavePow,u[o(468)],u.divisionScaleX,u[o(482)],u[o(436)],u[o(471)]]),(([n,t,e,i,r,a,s,u,c])=>{const l=o;v.gridWeight.value=n,v.raisedBottom.value=t,v[l(449)][l(459)]=e,v.wavePow[l(459)]=i,v[l(468)][l(459)]=r,v[l(434)][l(459)]=a,v[l(482)][l(459)]=s,v[l(436)][l(459)]=u,v[l(471)][l(459)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;v[t(463)].value+=n*u[t(481)]})),(n,e)=>{const r=o;return f(),d(p(t),{baseMaterial:i[r(430)],vertexShader:B,side:a[r(462)],transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial","side",r(457)])}}});function P(n){function t(n){const e=T;if(typeof n===e(442))return function(n){}[e(461)](e(438))[e(446)](e(469));1!==(""+n/n)[e(465)]||n%20==0?function(){return!0}[e(461)](e(467)+e(454))[e(431)]("action"):function(){return!1}[e(461)](e(467)+"gger").apply(e(466)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const j=G;!function(n,t){const e=G,i=D();for(;;)try{if(114240===-parseInt(e(157))/1*(parseInt(e(158))/2)+-parseInt(e(189))/3*(parseInt(e(191))/4)+parseInt(e(176))/5*(parseInt(e(195))/6)+parseInt(e(169))/7*(-parseInt(e(193))/8)+parseInt(e(192))/9*(parseInt(e(165))/10)+parseInt(e(174))/11+-parseInt(e(184))/12*(-parseInt(e(194))/13))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const S=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(167)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){S(this,(function(){const n=G,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(163),"i"),i=E("init");t[n(196)](i+n(183))&&e.test(i+"input")?E():i("0")}))()}();const X=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();X(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function(n(159)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(181)]=t.console||{},i=[n(170),"warn",n(179),n(168),n(162),n(177),n(172)];for(let o=0;o<i[n(171)];o++){const t=X[n(190)][n(182)].bind(X),r=i[o],a=e[r]||t;t[n(175)]=X[n(186)](X),t[n(180)]=a[n(180)][n(186)](a),e[r]=t}}))();const R=[j(166)];function D(){const n=["counter","1saORvC","216674uYLfQp","return (function() ","stateObject","baseMaterial","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","48200JgPoFY","rotation","apply","error","5327cplhXU","log","length","trace","string","1076009yoaGeg","__proto__","10UOfiEx","table","TresPlaneGeometry","info","toString","console","prototype","chain","5988qmVyGO","TresMesh","bind","gger","hexGridMesh","33HehPEr","constructor","62024GRkQQy","315npXOac","1928JejmDh","5785bIqKBl","263910kwwEov","test","$attrs"];return(D=function(){return n})()}function G(n,t){const e=D();return(G=function(n,t){return e[n-=156]})(n,t)}const q=u({__name:j(188),setup(n){const t=new s;return(n,e)=>{const i=G;return f(),v(i(185),{rotation:[-Math.PI/2,0,0]},[e[0]||(e[0]=m(i(178),{args:[1,1]},null,-1)),(f(),d(x,null,{default:h((()=>[g(C,w({baseMaterial:p(t)},n[i(197)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[i(161)])])),_:1}))],8,R)}}});function E(n){function t(n){const e=G;if(typeof n===e(173))return function(n){}[e(190)]("while (true) {}")[e(167)](e(156));1!==(""+n/n)[e(171)]||n%20==0?function(){return!0}[e(190)]("debu"+e(187)).call(e(164)):function(){return!1}[e(190)]("debu"+e(187))[e(167)](e(160)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=F,i=A();for(;;)try{if(623419===-parseInt(e(151))/1+parseInt(e(177))/2*(-parseInt(e(175))/3)+-parseInt(e(170))/4*(-parseInt(e(158))/5)+-parseInt(e(181))/6*(parseInt(e(137))/7)+parseInt(e(149))/8*(-parseInt(e(142))/9)+-parseInt(e(138))/10*(-parseInt(e(174))/11)+parseInt(e(143))/12*(parseInt(e(157))/13))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const z=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[F(134)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function A(){const n=["152832bFmTvu",'{}.constructor("return this")( )',"division","divisionScaleX","渐变强度","warn","渐变宽度","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","init","#de62f2","debu","apply","图片纹理","direction","161rKWBmc","476530sCOeGN","length","prototype","hexGridGround","108333BIKLhK","134328qXzypM","gger","counter","addBinding","bind","网格整体缩放","544LgXapT","color","675327VGEOrM","TresPerspectiveCamera","action","hasMaskTexture","TresCanvas","return (function() ","2483HEcGUd","5xtkHNV","网格宽度","颜色取反","wavePow","waveFrequency","log","网格横向缩放","constructor","error","__proto__","test","raisedBottom","4271164KUenfU","speed","console","toString","22wOhDqI","213HAtzHr","input","16846YyXBvZ","trace","info","function *\\( *\\)"];return(A=function(){return n})()}function F(n,t){const e=A();return(F=function(n,t){return e[n-=130]})(n,t)}!function(){z(this,(function(){const n=F,t=new RegExp(n(180)),e=new RegExp(n(188),"i"),i=W(n(131));t[n(168)](i+"chain")&&e[n(168)](i+n(176))?W():i("0")}))()}();const O=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();O(void 0,(function(){const n=F,t=function(){const n=F;let t;try{t=Function(n(156)+n(182)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(172)]||{},i=[n(163),n(186),n(179),n(166),"exception","table",n(178)];for(let o=0;o<i[n(139)];o++){const t=O[n(165)][n(140)][n(147)](O),r=i[o],a=e[r]||t;t[n(167)]=O[n(147)](O),t[n(173)]=a[n(173)][n(147)](a),e[r]=t}}))();const L=u({__name:"hexGridGround",setup(n){const t=F,e=y({reflectivity:.8,showGridHelper:!1,scale:1}),a=y({color:t(132),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new o({title:t(141),expanded:!0});return s.addBinding(a,t(154),{label:t(135)}),s[t(146)](a,t(150),{label:"颜色"}),s.addBinding(a,t(171),{label:"速度",min:-5,max:5,step:.1}),s[t(146)](a,"gridWeight",{label:t(159),min:.001,max:.5,step:.001}),s.addBinding(a,t(169),{label:t(187),min:.001,max:1,step:.001}),s[t(146)](a,t(162),{label:"分段",min:.001,max:1,step:.001}),s.addBinding(a,t(161),{label:t(185),min:1,max:30,step:.1}),s[t(146)](a,t(183),{label:t(148),min:.1,max:50,step:.1}),s.addBinding(a,t(184),{label:t(164),min:.1,max:10,step:.1}),s[t(146)](a,"isReversed",{label:t(160)}),s[t(146)](a,t(136),{label:"方向类别",min:3,max:6,step:1}),(n,o)=>{const s=t,u=b(s(155));return f(),d(u,{clearColor:"#666666","window-size":""},{default:h((()=>[o[0]||(o[0]=m(s(152),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),g(p(i),{enableDamping:"",autoRotate:""}),g(q,w(a,{scale:9}),null,16),(f(),d(x,null,{default:h((()=>[g(r,w({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function W(n){function t(n){const e=F;if("string"==typeof n)return function(n){}[e(165)]("while (true) {}").apply(e(145));1!==(""+n/n)[e(139)]||n%20==0?function(){return!0}[e(165)](e(133)+e(144))[e(130)](e(153)):function(){return!1}[e(165)](e(133)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{L as default};

import{i as e,u as t}from"./index.Crdf3MNx1763540743861.js";import{a,d as s,a8 as o,a9 as n,q as i,H as r,o as c,J as l,u as m}from"./@vue.Co_gxueH1763540743861.js";import{h as d,bY as u,f as p,z as j,G as b,x as v}from"./three.rXKzP9fQ1763540743861.js";import{F as w,L as h,_ as g}from"./@tresjs.BCHtwiaC1763540743861.js";function f(e,t,s){const o=a([]);let n="";const i=()=>{t.getObjectByName(n)?.traverse(e=>{e.isMesh&&(e.material=s.getObjectByName(e.name).material,e.castShadow=!0,e.receiveShadow=!0)})};return{intersections:o,handleMove:a=>{const s=(e=>{const t=new p;return t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,t})(a),r=new d;r.setFromCamera(s,e),o.value=r.intersectObject(t,!0);const c=r.intersectObject(t,!0);if(c.length>0&&c[0]&&c[0].object){if(n===c[0].object.name)return;i(),c[0].object.traverse(e=>{e.isMesh&&(e.material=new u({color:"#FFB6C1",transparent:!0,opacity:.2}),e.castShadow=!1,e.receiveShadow=!1)}),n=c[0].object.name}else n&&(i(),n="")}}}const M=["object"],y=["object"],O=["object"],B=s({__name:"roomModel",async setup(s){let d,u;const{camera:p}=w(),{scene:B}=e.getItem("场景.glb"),{scene:S}=([d,u]=o(()=>t("./plugins/humanMedicine/model/卡片.glb")),d=await d,u(),d),{scene:_}=([d,u]=o(()=>t("./plugins/humanMedicine/model/video.glb")),d=await d,u(),d),x=a();x.value=([d,u]=o(()=>h("./plugins/humanMedicine/video/medicalVideo.mp4",{loop:!0})),d=await d,u(),d),x.value.colorSpace=j;let F=new b;F.add(n(S));const N=F.clone(),{handleMove:C}=f(p.value,F,N);window.addEventListener("mousemove",C);const{onBeforeRender:G}=g();return G(()=>{B.getObjectByName("Object_123").rotation.y+=.005}),i(()=>{_.traverse(e=>{e.isMesh&&(e.material=new v({map:x.value}))})}),(e,t)=>(c(),r("TresGroup",null,[l("primitive",{object:n(m(B)),scale:3,position:[-1,-45,-10]},null,8,M),l("primitive",{object:n(m(F)),scale:3,position:[-1,-45,-10]},null,8,y),l("primitive",{object:n(m(_)),scale:3,position:[-1,-45,-10]},null,8,O)]))}});export{B as _};

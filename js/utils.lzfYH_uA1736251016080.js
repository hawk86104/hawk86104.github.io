import"./@fesjs.SlXnoRjV1736251016080.js";import{_ as n}from"./jszip.BteQlHnJ1736251016080.js";import{F as t}from"./file-saver.avatd5eQ1736251016080.js";import{_ as e}from"./three.RuuDeeIf1736251016080.js";function s(n,t){const e=l();return(s=function(n,t){return e[n-=165]})(n,t)}const o=s;!function(n,t){const e=s,o=l();for(;;)try{if(333861===parseInt(e(257))/1*(parseInt(e(223))/2)+-parseInt(e(237))/3*(parseInt(e(226))/4)+-parseInt(e(250))/5+-parseInt(e(236))/6*(-parseInt(e(175))/7)+-parseInt(e(228))/8*(parseInt(e(183))/9)+parseInt(e(222))/10+parseInt(e(182))/11*(parseInt(e(179))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){r(this,(function(){const n=s,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(217),"i"),o=m("init");t[n(249)](o+"chain")&&e[n(249)](o+n(201))?m():o("0")}))()}();const a=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[s(181)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();async function c(n){const t=o,s=new(e[t(192)]);return new Promise(((e,o)=>{const r=t;s.load(n,(n=>e(JSON[r(165)](n))),void 0,(n=>o(n)))}))}async function i(n){const t=o,r=new(e[t(192)]);return new Promise(((e,a)=>{const c=t;r[c(196)](c(232)),r.load(n,(t=>{const r=c,i=new FileReader;i.onloadend=()=>{const t=s,r=function(n){const t=o,e=n[t(210)](".").pop()[t(259)]();return{jpg:"image/jpeg",jpeg:"image/jpeg",png:t(260),gif:t(195),bmp:t(168),webp:"image/webp"}[e]||"application/octet-stream"}(n),a=i[t(199)].split(",")[1];e(t(253)+r+t(209)+a)},i[r(178)]=n=>{a(n)},i[r(200)](t)}),void 0,(n=>a(n)))}))}a(void 0,(function(){const n=s;let t;try{t=Function(n(212)+n(170)+");")()}catch(r){t=window}const e=t[n(231)]=t[n(231)]||{},o=[n(227),n(213),"info",n(218),n(169),n(263),n(197)];for(let s=0;s<o[n(176)];s++){const t=a[n(261)].prototype[n(262)](a),r=o[s],c=e[r]||t;t[n(203)]=a.bind(a),t[n(255)]=c[n(255)].bind(c),e[r]=t}}))(),e[o(258)][o(193)]=!0;const u=t=>{const s=o,r=new(e[s(192)]);return r[s(196)]("blob"),new Promise(((e,o)=>{const a=s;r[a(230)](t,(async t=>{const s=a;e(await n[s(244)](t))}),void 0,(n=>o(n)))}))};function l(){const n=["uuid","6252850VDoSUE","4994LVVMIc","stringify","while (true) {}","4lzSqCD","log","5173464wthdvb","message","load","console","blob","data:image/PNG;base64,","images",".json","6yajGbL","1188957VciMjb","file","then","pop","generateAsync","url:","geometries","loadAsync","BufferGeometry","data:image/","base64","data:image/JPEG;base64,","test","2309115DcGwDt","slice","非标准文件：不存在 app.json","data:","data:image/gif;base64,","toString","debu","155fgHXok","Cache","toLowerCase","image/png","constructor","bind","table","parse","url:geometries/","folder","image/bmp","exception",'{}.constructor("return this")( )',"catch","data","config.zip","push","855183Xqlhpl","length","stateObject","onerror","444756EOTXEd","action","apply","209xprlQb","9TjpYWE","data:image/WEBP;base64,","scene","WEBP","Unknown","counter","gger","app.json","JPEG","FileLoader","enabled","onloadend","image/gif","setResponseType","trace","call","result","readAsDataURL","input","string","__proto__","substring","files","name","async","type",";base64,","split","data:image/webp;base64,","return (function() ","warn","forEach","startsWith","url:images/","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","url","GIF"];return(l=function(){return n})()}const p=n=>{const t=o,e=n[t(204)](0,15),s=t(248),r=t(233),a=t(254),c=t(211),i=t(184);return"data:image/jpeg;base64,"[t(215)](e)||s[t(215)](e)?t(191):"data:image/png;base64,"[t(215)](e)||r[t(215)](e)?"PNG":a[t(215)](e)||"data:image/GIF;base64,"[t(215)](e)?t(220):c[t(215)](e||i[t(215)](e))?t(186):t(187)},f=e=>{const s=o,r=[];e.scene[s(243)]&&e.scene[s(243)][s(214)]((n=>{const t=s;n[t(208)]===t(245)&&(r[t(174)]({uuid:n[t(221)],data:n.data}),n[t(172)]=t(166)+n.uuid+t(235))}));const a=[];e.scene[s(234)]&&e[s(185)][s(234)][s(214)]((n=>{const t=s;n[t(219)]&&(a[t(174)]({uuid:n[t(221)],url:n[t(219)]}),n.url.type?n[t(219)]="url:images/"+n[t(221)]+"."+n.url[t(208)]+".json":n[t(219)]=t(216)+n[t(221)]+"."+p(n[t(219)]))}));const c=new n;if(r[s(176)]){const n=c.folder(s(243));r[s(214)]((t=>{const e=s;n.file(t[e(221)]+".json",JSON.stringify(t[e(172)]))}))}if(a[s(176)]){const n=c[s(167)](s(234));a.forEach((t=>{const e=s;t.url[e(208)]?n[e(238)](t[e(221)]+"."+t[e(219)][e(208)]+e(235),JSON[e(224)](t[e(219)])):n[e(238)](t[e(221)]+"."+p(t.url),t[e(219)][e(210)](e(209))[e(240)](),{base64:!0})}))}const i=JSON.stringify(e);return c[s(238)](s(190),i),c[s(241)]({type:s(232)})[s(239)]((n=>{const e=s;t.saveAs(n,e(173))}))},g=(n,t,e)=>{const s=o;n.geometries<=0&&n[s(234)]<=0&&e(t)},d=(t,e)=>{const s=o;let r=null;return n[s(244)](t)[s(239)]((n=>{const t=s;n[t(205)]["app.json"]?n.files[t(190)][t(207)](t(202))[t(239)]((s=>{var a,c;const i=t;r=JSON[i(165)](s);const u=(n=>{var t,e;const s=o,r={geometries:0,images:0};return null==(t=n[s(185)][s(243)])||t[s(214)]((n=>{const t=s;n[t(172)][t(215)](t(242))&&r[t(243)]++})),null==(e=n[s(185)][s(234)])||e[s(214)]((n=>{const t=s;n[t(219)].startsWith("url:")&&r[t(234)]++})),r})(r);g(u,r,e),null==(a=r[i(185)][i(243)])||a.forEach((t=>{const s=i;t[s(172)][s(215)](s(242))&&n[s(205)][t[s(172)][s(251)](4)][s(207)](s(202))[s(239)]((n=>{const o=s;t[o(172)]=JSON[o(165)](n),u[o(243)]--,g(u,r,e)}))})),null==(c=r[i(185)][i(234)])||c[i(214)]((t=>{const s=i;if(t[s(219)][s(215)](s(242))){const o=t[s(219)][s(251)](4);o.endsWith(s(235))?n.files[o][s(207)](s(202)).then((n=>{const o=s;t[o(219)]=JSON[o(165)](n),u[o(234)]--,g(u,r,e)})):n[s(205)][o].async(s(247))[s(239)]((n=>{const a=s,c=o[a(210)]("."),i=c[c.length-1].toUpperCase();t[a(219)]=a(246)+i+a(209)+n,u[a(234)]--,g(u,r,e)}))}}))})):console[t(218)](t(252))}),(n=>{const e=s;console.error(t[e(206)]+": "+n[e(229)])})),r};function m(n){function t(n){const e=s;if(typeof n===e(202))return function(n){}.constructor(e(225))[e(181)](e(188));1!==(""+n/n).length||n%20==0?function(){return!0}[e(261)](e(256)+e(189))[e(198)](e(180)):function(){return!1}.constructor(e(256)+e(189))[e(181)](e(177)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{u as a,i as b,f as e,p as g,d as i,c as l};

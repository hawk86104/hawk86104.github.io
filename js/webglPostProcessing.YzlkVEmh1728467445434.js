import{i as t}from"./ice-utils.jFgpJjkU1728467445434.js";import{_ as n,m as e}from"./gl-matrix.oVMHBNGj1728467445434.js";import{P as o}from"./tweakpane.yHWGBmom1728467445434.js";import{d as r,r as i,q as a,o as c,E as s,L as u,u as f}from"./@vue.JNsx1iN61728467445434.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=E;!function(t,n){const e=E,o=T();for(;;)try{if(822103===-parseInt(e(370))/1*(parseInt(e(345))/2)+-parseInt(e(316))/3+parseInt(e(334))/4+parseInt(e(313))/5+-parseInt(e(327))/6*(-parseInt(e(355))/7)+-parseInt(e(324))/8+parseInt(e(382))/9*(parseInt(e(297))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[E(307)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function E(t,n){const e=T();return(E=function(t,n){return e[t-=294]})(t,n)}!function(){x(this,(function(){const t=E,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(314),"i"),o=R("init");n[t(394)](o+t(380))&&e.test(o+t(353))?R():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[E(307)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=E;let n;try{n=Function("return (function() "+t(301)+");")()}catch(r){n=window}const e=n[t(312)]=n[t(312)]||{},o=["log",t(323),t(378),t(317),t(343),t(342),t(359)];for(let i=0;i<o[t(330)];i++){const n=d[t(332)].prototype[t(363)](d),r=o[i],a=e[r]||n;n[t(318)]=d.bind(d),n[t(321)]=a[t(321)][t(363)](a),e[r]=n}}))();const g={id:"canvaswebgl"},p=[_(340)],A=r({__name:_(322),setup(r){const x=_;let E,d,A,R,T,b,h,F,y,v,w,P,C;const B=1,I=.71,U=.76,S=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S.addBlade({view:x(393),label:"颜色",min:0,max:1,value:.5}).on(x(395),(t=>{const n=x;Y(),d[n(335)](P,t[n(336)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[x(390)](L,x(383),{label:"是否后处理"}),S[x(390)](L,x(337),{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(x(395),(t=>{const n=x;D[0]=L[n(337)].x,D[1]=L[n(337)].y,Y()})),S[x(390)](L,x(392),{picker:x(298),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(395),(t=>{D[5]=L.offset_right_bottom.x,D[6]=L.offset_right_bottom.y,Y()})),S[x(390)](L,x(305),{picker:x(298),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{D[10]=L.offset_left_bottom.x,D[11]=L.offset_left_bottom.y,Y()})),S[x(390)](L,x(389),{picker:x(298),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(395),(t=>{const n=x;D[15]=L[n(389)].x,D[16]=L.offset_left_top.y,Y()})),a((()=>{M()}));const M=function(){const n=x;E=document[n(358)]("#canvaswebgl"),E[n(328)]=window.innerWidth,E.height=window.innerHeight,d=E[n(396)](n(391)),d&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=j(e,o),A=t(d,l,m),y=d[n(309)](A,n(373)),v=d[n(309)](A,n(315)),w=d.getUniformLocation(A,n(300)),C=k(document[n(387)](n(303)))}(),Y(),d[n(375)](d[n(366)]),d.blendFunc(d[n(299)],d[n(365)]),N())};function N(){const t=x;d.bindFramebuffer(d[t(306)],h),d.clearColor(B,I,U,1),d[t(351)](d[t(331)]),function(){const t=x;d[t(320)](A),d[t(295)](d[t(338)],R);const e=n[t(381)][t(347)]();n[t(381)][t(360)](e,0,E[t(328)],E[t(361)],0,.1,100),d[t(362)](y,!1,e);const o=n[t(381)][t(347)]();n[t(381)].lookAt(o,[0,0,1],[0,0,0],[0,1,0]),d[t(362)](v,!1,o),G(C,600,600),G(C,400,400)}(),d[t(356)](d[t(306)],null),L.hidden&&(d[t(351)](d[t(331)]),d.clearColor(0,0,1,1),d[t(295)](d[t(338)],T),d[t(320)](b),d[t(339)](d[t(350)],F)),d[t(333)](d[t(369)],6,d[t(377)],0),requestAnimationFrame(N)}function G(t,n,o){const r=x;let i=e[r(347)]();e[r(384)](i,i,[n,o,0]),e[r(311)](i,i,[250,250,0]),d[r(362)](w,!1,i),d[r(339)](d[r(350)],t),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_BYTE,0)}function Y(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);T=j(D,e),b=t(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=d[n(309)](b,n(294)),d[n(309)](b,n(326)),function(){const t=x;F=k(E),h=d[t(319)](),d[t(356)](d.FRAMEBUFFER,h),d.framebufferTexture2D(d[t(306)],d[t(354)],d[t(350)],F,0),d[t(356)](d.FRAMEBUFFER,null)}()}function k(t){const n=x,e=d[n(386)]();return d[n(339)](d[n(350)],e),t instanceof HTMLImageElement?d.texImage2D(d.TEXTURE_2D,0,d[n(325)],d.RGBA,d[n(377)],t):d[n(341)](d[n(350)],0,d.RGBA,t.width,t.height,0,d[n(325)],d[n(377)],null),d[n(296)](d[n(350)],d[n(374)],d[n(385)]),d[n(296)](d[n(350)],d[n(379)],d.NEAREST),d[n(296)](d[n(350)],d[n(308)],d[n(376)]),d[n(296)](d[n(350)],d.TEXTURE_WRAP_T,d[n(376)]),e}function j(t,n){const e=x,o=d[e(352)]();d[e(295)](d[e(338)],o),d[e(304)](d.ARRAY_BUFFER,t,d[e(388)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(302)];d[e(367)](0,3,d[e(371)],!1,r,0),d[e(372)](0),d[e(367)](1,2,d[e(371)],!1,r,3*Float32Array[e(302)]),d.enableVertexAttribArray(1);const i=d[e(352)]();return d[e(295)](d[e(364)],i),d[e(304)](d.ELEMENT_ARRAY_BUFFER,n,d[e(388)]),d.bindBuffer(d[e(338)],null),o}return(t,n)=>{const e=x;return c(),s("canvas",g,[u(e(357),{id:e(303),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(349)}},null,8,p)])}}});function R(t){function n(t){const e=E;if(typeof t===e(348))return function(t){}[e(332)](e(344))[e(307)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(332)](e(329)+e(368))[e(310)]("action"):function(){return!1}[e(332)](e(329)+e(368))[e(307)](e(346)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function T(){const t=["4605168YvSzoG","uniform1f","value","offset_right_top","ARRAY_BUFFER","bindTexture","src","texImage2D","table","exception","while (true) {}","31354DPkBRP","stateObject","create","string","none","TEXTURE_2D","clear","createBuffer","input","COLOR_ATTACHMENT0","14cqPKFV","bindFramebuffer","img","querySelector","trace","ortho","height","uniformMatrix4fv","bind","ELEMENT_ARRAY_BUFFER","ONE_MINUS_SRC_ALPHA","BLEND","vertexAttribPointer","gger","TRIANGLES","26wqhGFC","FLOAT","enableVertexAttribArray","uProjection","TEXTURE_MIN_FILTER","enable","CLAMP_TO_EDGE","UNSIGNED_BYTE","info","TEXTURE_MAG_FILTER","chain","mat4","17298xYkYhZ","hidden","translate","NEAREST","createTexture","getElementById","STATIC_DRAW","offset_left_top","addBinding","webgl","offset_right_bottom","slider","test","change","getContext","mixParam","bindBuffer","texParameteri","2150cGhima","inline","SRC_ALPHA","uModel",'{}.constructor("return this")( )',"BYTES_PER_ELEMENT","logo-texture","bufferData","offset_left_bottom","FRAMEBUFFER","apply","TEXTURE_WRAP_S","getUniformLocation","call","scale","console","2648350qAzTLB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uView","2384661rwJeAH","error","__proto__","createFramebuffer","useProgram","toString","webglPostProcessing","warn","1668112rrkGCI","RGBA","color","416742JzVUYr","width","debu","length","COLOR_BUFFER_BIT","constructor","drawElements"];return(T=function(){return t})()}export{A as default};

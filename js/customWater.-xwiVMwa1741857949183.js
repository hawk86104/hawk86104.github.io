import{_ as t}from"./three.Gi_-4zeu1741857949183.js";import{e,h as n,o as r,f as a}from"./@tresjs.8SAr0PX_1741857949183.js";import{a as o}from"./index.f40bqtgT1741857949183.js";import"./index.a-Nak-9v1741857949183.js";import{z as s}from"./three-custom-shader-material.5E9LrdfZ1741857949183.js";import{p as i}from"./gl-noise.BrVtymbx1741857949183.js";import{d as l,b as u,a2 as c,w as p,o as f,H as g,N as h,j as m,u as v,r as d,f as _,g as b,aj as w,ak as y,m as j,al as M}from"./@vue.NRI7TcgI1741857949183.js";import{P as x}from"./tweakpane.yDiyAAkA1741857949183.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.zRAWhung1741857949183.js";import"./postprocessing.D5IzAGSN1741857949183.js";import"./@vueuse.PrSwDteH1741857949183.js";import"./three-stdlib._1jCUDZZ1741857949183.js";import"./@pmndrs.3fVcA4nP1741857949183.js";import"./object-hash.LyZoNZuC1741857949183.js";import"./@amap.QByc7Q7q1741857949183.js";import"./jszip.v_at1HP11741857949183.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.U8tGg5xY1741857949183.js";import"./all.three.G9BYwICw1741857949183.js";import"./oimophysics.x0jH7fze1741857949183.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2VEhsXTy1741857949183.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.1RG2x29V1741857949183.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.uz_h8IVC1741857949183.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.RWFQuDYX1741857949183.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.H4p7Rn6a1741857949183.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Ta0efO_c1741857949183.js";const z=S;!function(t,e){const n=S,r=T();for(;;)try{if(329165===-parseInt(n(532))/1*(parseInt(n(527))/2)+parseInt(n(480))/3*(-parseInt(n(497))/4)+-parseInt(n(493))/5*(-parseInt(n(491))/6)+-parseInt(n(509))/7*(-parseInt(n(500))/8)+parseInt(n(520))/9+-parseInt(n(472))/10*(-parseInt(n(514))/11)+-parseInt(n(525))/12)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[S(506)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function S(t,e){const n=T();return(S=function(t,e){return n[t-=469]})(t,e)}function T(){const t=["#b3ffff","table","while (true) {}","side","fragmentShader","12VjwnVp","waterColor","uHeight","string","toString","init","log","customWaterMesh","warn","MeshPhysicalMaterial","console","96PqVuOl","fragment","147115VfvBfn","length","height","flatShading","27784ogYBkV","action",'{}.constructor("return this")( )',"16hhHEMP","call","value","Color","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","test","DoubleSide","571431aNKgsa","material","tmRef","trace","vertex","300817qJlAof","bind","convertLinearToSRGB","chain","error","info","3672585IUvlyg","TresBoxGeometry","counter","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","waterHighlight","10097484ysIYAH","#52a7f7","398408mAnZkj","stateObject","function *\\( *\\)","gger","baseMaterial","1PPLGBK","TresMesh","constructor","brightness","130RAUulZ","rotation-x","Flatshading"];return(T=function(){return t})()}!function(){C(this,(function(){const t=S,e=new RegExp(t(529)),n=new RegExp(t(505),"i"),r=P(t(485));e[t(507)](r+t(517))&&n[t(507)](r+t(504))?P():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[S(506)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();B(void 0,(function(){const t=S,e=function(){const t=S;let e;try{e=Function("return (function() "+t(499)+");")()}catch(n){e=window}return e}(),n=e[t(490)]=e[t(490)]||{},r=[t(486),t(488),t(519),t(518),"exception",t(476),t(512)];for(let a=0;a<r[t(494)];a++){const e=B.constructor.prototype[t(515)](B),o=r[a],s=n[o]||e;e.__proto__=B[t(515)](B),e[t(484)]=s[t(484)][t(515)](s),n[o]=e}}))();const G=[z(473)],H=["args"],O=l({__name:z(487),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(526)},waterHighlight:{default:z(475)},brightness:{default:1},baseMaterial:{default:t[z(489)]}},setup(r){const a=z,o=r,l=u(null),d={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:a(523)},_={uTime:{value:0},waterColor:{value:new(t[a(503)])(o[a(481)])[a(516)]()},waterHighlight:{value:new(t[a(503)])(o[a(524)])[a(516)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o[a(471)]},uHeight:{value:o.height}},{onLoop:b}=e();return b((({elapsed:t})=>{const e=a;_.uTime[e(502)]=-t/5})),c((()=>{const e=a;o.height&&(_[e(482)].value=o[e(495)]),o[e(481)]&&(_.waterColor[e(502)]=new(t[e(503)])(o.waterColor)[e(516)]()),o[e(524)]&&(_[e(524)].value=new(t[e(503)])(o[e(524)])[e(516)]()),o.brightness&&(_.brightness[e(502)]=o.brightness)})),p((()=>o[a(474)]),(t=>{const e=a;l[e(502)][e(510)].needsUpdate=!0})),p((()=>o[a(531)]),(e=>{const n=a,r=new s({baseMaterial:t[e],vertexShader:i(d.vertex),fragmentShader:d[n(492)],uniforms:_,flatShading:o[n(474)],side:t[n(508)],roughness:.2,metalness:.1,silent:!0});l[n(502)].material.dispose(),l.value[n(510)]=r})),(e,r)=>{const o=a;return f(),g(o(469),{ref_key:o(511),ref:l,"rotation-x":-Math.PI/2},[h(o(521),{args:[5,5,e[o(495)],64,64,1]},null,8,H),m(v(n),{baseMaterial:t[o(489)],vertexShader:v(i)(d[o(513)]),fragmentShader:d[o(492)],uniforms:_,side:t[o(508)],roughness:.2,metalness:.1,flatShading:e[o(474)],silent:""},null,8,["baseMaterial","vertexShader",o(479),o(478),o(496)])],8,G)}}});function P(t){function e(t){const n=S;if(typeof t===n(483))return function(t){}.constructor(n(477))[n(506)](n(522));1!==(""+t/t).length||t%20==0?function(){return!0}[n(470)]("debugger")[n(501)](n(498)):function(){return!1}[n(470)]("debu"+n(530))[n(506)](n(528)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=F;!function(t,e){const n=F,r=A();for(;;)try{if(895001===parseInt(n(315))/1+parseInt(n(356))/2*(-parseInt(n(305))/3)+-parseInt(n(319))/4+-parseInt(n(303))/5*(parseInt(n(340))/6)+-parseInt(n(341))/7*(parseInt(n(311))/8)+-parseInt(n(331))/9*(parseInt(n(297))/10)+-parseInt(n(345))/11*(-parseInt(n(332))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(352)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=F,e=new RegExp(t(346)),n=new RegExp(t(318),"i"),r=R(t(312));e[t(335)](r+"chain")&&n[t(335)](r+t(348))?R():r("0")}))()}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(352)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function F(t,e){const n=A();return(F=function(t,e){return n[t-=291]})(t,e)}function A(){const t=["4120480aALuuq","MeshLambertMaterial","length","toString","MeshToonMaterial","customWater","#627179","baseMaterial","value","debu","addBinding","TresPerspectiveCamera","22725mIhWdl","708Gcgdkr","constructor","MeshBasicMaterial","test","trace","height","waterHighlight","action","2661636mUngDy","11376729KUxfaL","MeshNormalMaterial","list","MeshDepthMaterial","817421zglzrp","function *\\( *\\)","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","input","pos-z.jpg","ACESFilmicToneMapping","stateObject","apply","counter","MeshStandardMaterial","浪头颜色","8mKTDcQ","info","exception","string","table","pos-y.jpg","MeshPhongMaterial","change","while (true) {}","2650DUYFvM","TresDirectionalLight","gger","MeshPhysicalMaterial",'{}.constructor("return this")( )',"addBlade","10BrYcRq","水体颜色","231213OvwOCU","TresAmbientLight","__proto__","#52a7f7","brightness","return (function() ","8gfSvHr","init","target","warn","1030640obvMIO","console","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(A=function(){return t})()}k(void 0,(function(){const t=F;let e;try{e=Function(t(310)+t(301)+");")()}catch(a){e=window}const n=e[t(316)]=e[t(316)]||{},r=["log",t(314),t(357),"error",t(358),t(292),t(336)];for(let o=0;o<r[t(321)];o++){const e=k[t(333)][t(317)].bind(k),a=r[o],s=n[a]||e;e[t(307)]=k.bind(k),e.toString=s[t(322)].bind(s),n[a]=e}}))();const N=l({__name:W(324),setup(e){const n=W,s=d({alpha:!0,toneMapping:t[n(350)],windowSize:!0,clearColor:10066329}),i=d({enableDamping:!0,autoRotate:!1}),l=d({cellSize:.6,cellThickness:1.1,cellColor:n(325),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=d({height:.2,Flatshading:!1,waterColor:n(308),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(300)}),c=new x;return c[n(329)](u,n(337),{label:"高度",min:.1,max:5,step:.1}),c[n(329)](u,"waterColor",{label:n(304)}),c[n(329)](u,n(338),{label:n(355)}),c.addBinding(u,n(309),{label:"亮度",min:0,max:1,step:.01}),c[n(329)](u,"Flatshading",{label:"Flatshading"}),c[n(302)]({view:n(343),label:"材质",options:[{text:n(300),value:n(300)},{text:"MeshBasicMaterial",value:n(334)},{text:n(342),value:n(342)},{text:n(354),value:"MeshStandardMaterial"},{text:n(294),value:n(294)},{text:n(323),value:n(323)},{text:n(320),value:n(320)},{text:n(344),value:"MeshDepthMaterial"}],value:u[n(326)]}),c.on(n(295),(t=>{const e=n;"材质"===t[e(313)].label&&(u[e(326)]=t[e(327)])})),(t,e)=>{const c=n;return f(),_(v(a),j(s,{"window-size":""}),{default:b((()=>[e[0]||(e[0]=h(c(330),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),m(v(r),w(y(i)),null,16),e[1]||(e[1]=h(c(306),{intensity:.5},null,-1)),e[2]||(e[2]=h(c(298),{position:[15,15,15],intensity:1},null,-1)),m(O,w(y(u)),null,16),m(v(I),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(f(),_(M,null,{default:b((()=>[m(v(o),{files:["pos-x.jpg","neg-x.jpg",c(293),"neg-y.jpg",c(349),"neg-z.jpg"],path:c(347)})])),_:1}))])),_:1},16)}}});function R(t){function e(t){const n=F;if(typeof t===n(291))return function(t){}[n(333)](n(296))[n(352)](n(353));1!==(""+t/t)[n(321)]||t%20==0?function(){return!0}.constructor(n(328)+"gger").call(n(339)):function(){return!1}.constructor(n(328)+n(299)).apply(n(351)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{N as default};

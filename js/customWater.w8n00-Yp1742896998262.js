import{e,h as t,o as n}from"./@tresjs.KzbsBNvc1742896998262.js";import{a as r}from"./index.ndVDlath1742896998262.js";import"./index.r98ObhV71742896998262.js";import{_ as a,C as s,ah as o,ab as i,ap as l}from"./three.0CcRceKb1742896998262.js";import{z as u}from"./three-custom-shader-material.IukAW29E1742896998262.js";import{p as c}from"./gl-noise.u0wef8ro1742896998262.js";import{d as p,b as f,a2 as g,w as h,o as m,H as v,N as d,j as _,u as b,r as w,e as y,f as j,g as x,aj as M,ak as T,m as C,al as z}from"./@vue.L-brCdZe1742896998262.js";import{P as I}from"./tweakpane.ivGeiIdz1742896998262.js";import{_ as H}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.q3HWdgZ-1742896998262.js";import"./postprocessing.JNDZZkh81742896998262.js";import"./@vueuse.AtktgvWs1742896998262.js";import"./three-stdlib.89waAD8o1742896998262.js";import"./@pmndrs.o17bi-dk1742896998262.js";import"./object-hash.9aQcBM141742896998262.js";import"./@amap.tIvpdqPe1742896998262.js";import"./jszip.jzMwTE8j1742896998262.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.u5-iyLpj1742896998262.js";import"./all.three.eMqwCp1p1742896998262.js";import"./oimophysics.WhCxc1Ho1742896998262.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.dLWD7sjV1742896998262.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ntdcS2xn1742896998262.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.FHtLcESB1742896998262.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.ESRj9JcF1742896998262.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.ONNv5TLH1742896998262.js";import"./imgFloor.vue_vue_type_script_setup_true_lang._YZc5Zhy1742896998262.js";const S=P;function G(){const e=["debu","error","waterHighlight","TresMesh","1019460KBAiqD","TresBoxGeometry","1hKnHmV","console","569504rhUqqy","Flatshading","length","bind","info","convertLinearToSRGB","uTime","76069tVWltl","brightness","action","#52a7f7","table","572406ypBTRi","baseMaterial","582894SVAYpF","needsUpdate","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","constructor","exception","Color","log","DoubleSide","warn","MeshPhysicalMaterial","value","toString","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","gger","vertex","test","customWaterMesh","while (true) {}","return (function() ","material","trace","1591430eWiXEX","10197198tjHFcD","args","height","dispose","apply","waterColor","call","side","__proto__","176uYFcgT","vertexShader",'{}.constructor("return this")( )',"input","rotation-x","counter"];return(G=function(){return e})()}!function(e,t){const n=P,r=G();for(;;)try{if(307205===parseInt(n(311))/1*(-parseInt(n(309))/2)+parseInt(n(327))/3+parseInt(n(313))/4+-parseInt(n(289))/5+-parseInt(n(325))/6+parseInt(n(320))/7*(-parseInt(n(299))/8)+parseInt(n(290))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const B=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[P(294)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){B(this,(function(){const e=P,t=new RegExp(e(329)),n=new RegExp(e(330),"i"),r=D("init");t[e(283)](r+e(331))&&n[e(283)](r+e(302))?D():r("0")}))()}();const F=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();F(void 0,(function(){const e=P;let t;try{t=Function(e(286)+e(301)+");")()}catch(a){t=window}const n=t[e(312)]=t[e(312)]||{},r=[e(335),e(337),e(317),e(306),e(333),e(324),e(288)];for(let s=0;s<r[e(315)];s++){const t=F[e(332)].prototype[e(316)](F),a=r[s],o=n[a]||t;t[e(298)]=F[e(316)](F),t[e(279)]=o[e(279)].bind(o),n[a]=t}}))();const W=[S(303)],O=[S(291)];function P(e,t){const n=G();return P=function(e,t){return n[e-=277]},P(e,t)}const k=p({__name:S(284),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(323)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:a[S(277)]}},setup(n){const r=S,l=n,p=f(null),w={vertex:r(280),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},y={uTime:{value:0},waterColor:{value:new(a[r(334)])(l[r(295)])[r(318)]()},waterHighlight:{value:new(a[r(334)])(l[r(307)])[r(318)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:l[r(321)]},uHeight:{value:l[r(292)]}},{onLoop:j}=e();return j((({elapsed:e})=>{y[r(319)].value=-e/5})),g((()=>{const e=r;l.height&&(y.uHeight[e(278)]=l[e(292)]),l[e(295)]&&(y[e(295)][e(278)]=new s(l.waterColor)[e(318)]()),l.waterHighlight&&(y[e(307)][e(278)]=new(a[e(334)])(l[e(307)])[e(318)]()),l.brightness&&(y.brightness.value=l[e(321)])})),h((()=>l[r(314)]),(e=>{const t=r;p.value[t(287)][t(328)]=!0})),h((()=>l[r(326)]),(e=>{const t=r,n=new u({baseMaterial:a[e],vertexShader:c(w.vertex),fragmentShader:w.fragment,uniforms:y,flatShading:l[t(314)],side:a[t(336)],roughness:.2,metalness:.1,silent:!0});p.value.material[t(293)](),p[t(278)][t(287)]=n})),(e,n)=>{const a=r;return m(),v(a(308),{ref_key:"tmRef",ref:p,"rotation-x":-Math.PI/2},[d(a(310),{args:[5,5,e[a(292)],64,64,1]},null,8,O),_(b(t),{baseMaterial:o,vertexShader:b(c)(w[a(282)]),fragmentShader:w.fragment,uniforms:y,side:i,roughness:.2,metalness:.1,flatShading:e[a(314)],silent:""},null,8,[a(326),a(300),"fragmentShader",a(297),"flatShading"])],8,W)}}});function D(e){function t(e){const n=P;if("string"==typeof e)return function(e){}[n(332)](n(285))[n(294)](n(304));1!==(""+e/e).length||e%20==0?function(){return!0}.constructor("debu"+n(281))[n(296)](n(322)):function(){return!1}.constructor(n(305)+n(281))[n(294)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}function A(e,t){const n=E();return A=function(e,t){return n[e-=253]},A(e,t)}!function(e,t){const n=A,r=E();for(;;)try{if(762633===-parseInt(n(264))/1+parseInt(n(309))/2*(-parseInt(n(285))/3)+-parseInt(n(282))/4*(-parseInt(n(287))/5)+-parseInt(n(322))/6*(parseInt(n(255))/7)+-parseInt(n(273))/8*(-parseInt(n(304))/9)+-parseInt(n(295))/10+parseInt(n(289))/11*(parseInt(n(270))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[A(294)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){N(this,(function(){const e=A,t=new RegExp(e(279)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Z(e(254));t[e(265)](r+e(307))&&n[e(265)](r+e(281))?Z():r("0")}))()}();const R=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[A(294)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();R(void 0,(function(){const e=A;let t;try{t=Function(e(288)+'{}.constructor("return this")( ));')()}catch(a){t=window}const n=t.console=t[e(292)]||{},r=["log",e(263),"info",e(276),e(260),"table",e(259)];for(let s=0;s<r.length;s++){const t=R[e(296)][e(317)][e(256)](R),a=r[s],o=n[a]||t;t.__proto__=R[e(256)](R),t[e(311)]=o[e(311)][e(256)](o),n[a]=t}}))();const L=p({__name:"customWater",setup(e){const t=A,a=w({alpha:!0,toneMapping:l,windowSize:!0,clearColor:10066329}),s=w({enableDamping:!0,autoRotate:!1}),o=w({cellSize:.6,cellThickness:1.1,cellColor:t(275),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),i=w({height:.2,Flatshading:!1,waterColor:t(298),waterHighlight:"#b3ffff",brightness:1,baseMaterial:t(297)}),u=new I;return u[t(303)](i,t(271),{label:"高度",min:.1,max:5,step:.1}),u[t(303)](i,t(312),{label:t(257)}),u[t(303)](i,t(278),{label:"浪头颜色"}),u.addBinding(i,t(301),{label:"亮度",min:0,max:1,step:.01}),u[t(303)](i,t(314),{label:t(314)}),u[t(262)]({view:t(274),label:"材质",options:[{text:t(297),value:t(297)},{text:t(280),value:t(280)},{text:t(284),value:t(284)},{text:t(318),value:t(318)},{text:"MeshPhongMaterial",value:t(253)},{text:"MeshToonMaterial",value:t(286)},{text:t(290),value:"MeshLambertMaterial"},{text:t(268),value:t(268)}],value:i.baseMaterial}),u.on(t(267),(e=>{const n=t;"材质"===e[n(299)][n(320)]&&(i[n(300)]=e[n(302)])})),(e,l)=>{const u=t,c=y("TresCanvas");return m(),j(c,C(a,{"window-size":""}),{default:x((()=>[l[0]||(l[0]=d(u(319),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),_(b(n),M(T(s)),null,16),l[1]||(l[1]=d(u(272),{intensity:.5},null,-1)),l[2]||(l[2]=d(u(277),{position:[15,15,15],intensity:1},null,-1)),_(k,M(T(i)),null,16),_(b(H),C({args:[3,3]},o,{position:[0,-.5,0]}),null,16),(m(),j(z,null,{default:x((()=>[_(b(r),{files:[u(321),u(258),u(315),u(266),u(324),"neg-z.jpg"],path:u(313)+u(305)},null,8,[u(306)])])),_:1}))])),_:1},16)}}});function Z(e){function t(e){const n=A;if("string"==typeof e)return function(e){}[n(296)](n(293))[n(294)](n(269));1!==(""+e/e)[n(261)]||e%20==0?function(){return!0}[n(296)](n(316)+n(323))[n(283)](n(310)):function(){return!1}[n(296)](n(316)+n(323))[n(294)](n(308)),t(++e)}try{if(e)return t;t(0)}catch(n){}}function E(){const e=["20stFHSw","return (function() ","39790927tvXJYh","MeshLambertMaterial","resource.cos","console","while (true) {}","apply","8396760fZiKbl","constructor","MeshPhysicalMaterial","#52a7f7","target","baseMaterial","brightness","value","addBinding","225iPrBmt","/images/skyBox/6jpg/","path","chain","stateObject","10218PoXYxn","action","toString","waterColor","https://opensource.cdn.icegl.cn","Flatshading","pos-y.jpg","debu","prototype","MeshStandardMaterial","TresPerspectiveCamera","label","pos-x.jpg","24GyxGkZ","gger","pos-z.jpg","MeshPhongMaterial","init","2243647eLagpI","bind","水体颜色","neg-x.jpg","trace","exception","length","addBlade","warn","118105anFFxT","test","neg-y.jpg","change","MeshDepthMaterial","counter","12jkNKGM","height","TresAmbientLight","86888LgMQBA","list","#627179","error","TresDirectionalLight","waterHighlight","function *\\( *\\)","MeshBasicMaterial","input","360212mAHpJA","call","MeshNormalMaterial","732wRaOyc","MeshToonMaterial"];return(E=function(){return e})()}export{L as default};

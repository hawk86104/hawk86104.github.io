import{S as e,h as a,M as t,i as n,j as o,k as s,l as d,T as l,n as r,o as i,p,A as c,N,q as h,D as u,B as m,r as g,s as T,u as b,v as M,w as v,x as w,y,z as S,C as f}from"./three.BD1hRFgo1767066396612.js";const D=((e="MeshBasicNodeMaterial")=>({template:e,Preview:"2d",surfaceType:"Transparent",blendingMode:"NormalBlending",renderFace:"FrontSide",depthWrite:"enable",depthTest:"enable",depthTestFunc:"LessEqualDepth",castShadows:!0}))(),B={lit:s,unlit:s,subgraph:s,MeshBasicNodeMaterial:s,MeshStandardNodeMaterial:o,MeshPhongNodeMaterial:n,MeshPhysicalNodeMaterial:t,LineDashedNodeMaterial:a,SpriteNodeMaterial:e},E={NoBlending:h,NormalBlending:N,AdditiveBlending:c,SubtractiveBlending:p,MultiplyBlending:i},x={FrontSide:g,BackSide:m,DoubleSide:u},F={NeverDepth:f,AlwaysDepth:S,EqualDepth:y,LessDepth:w,LessEqualDepth:v,GreaterDepth:M,GreaterEqualDepth:b,NotEqualDepth:T},k=(e,a={},t={})=>{const n={},o=(e=>{const a=e.replace(/\r\n/g,"\n").match(/\/\/\/\/ view \/\/\/\/ (.*)\n/);return a?JSON.parse(a[1]):null})(e);o&&o.textures?.forEach(a=>{const n=a.binding.varName;if(!t?.[n]){const a=e.match(new RegExp(`//// ${n} //// (.*)\\n`))?.[1];a&&t&&(t[n]=(e=>{const a=new Image,t=new r(a);return a.onload=()=>{t.needsUpdate=!0},a.src=e,t})(a))}});const s=Object.assign({},D,o?.setting),i=new(0,B[s.template]),p={};if(((e,a)=>{e.transparent="Transparent"===a.surfaceType,"Transparent"===a.surfaceType?e.blending=E[a.blendingMode]||N:e.blending=N,e.side=x[a.renderFace]||g,e.depthWrite="enable"===a.depthWrite,e.depthTest="enable"===a.depthTest,e.depthFunc=F[a.depthTestFunc]||v})(i,s),e)try{new Function("material","default_uniforms","__textures__","uniforms","tsl","THREE",e)(n,a||{},t,p,d,l)}catch(c){throw new Error("Invalid TSL format: "+c)}return"Transparent"===s.surfaceType?void 0===n.opacityNode?i.colorNode=n.colorNode||null:(i.colorNode=n.colorNode?.xyz||null,i.opacityNode=n.opacityNode||null):i.colorNode=n.colorNode?.xyz||null,i.vertexNode=n.vertexNode||null,i.positionNode=n.positionNode||null,i.normalNode=n.normalNode||null,i.alphaTestNode=n.alphaTestNode||null,i.depthNode=n.depthNode||null,i.emissiveNode=n.emissiveNode||null,i.envNode=n.envNode||null,i.aoNode=n.aoNode||null,i.backdropNode=n.backdropNode||null,i.backdropAlphaNode=n.backdropAlphaNode||null,s.castShadows&&(i.castShadowNode=n.castShadowNode||null),i.needsUpdate=!0,{material:i,uniforms:p,settings:s}};export{k as t};

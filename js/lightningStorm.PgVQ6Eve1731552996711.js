import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.PBzOUcTS1731552996711.js";import{B as i,V as s,cq as n,ab as e,X as r,h as o,an as a,$ as h,s as c,C as u,_ as l}from"./three.KG0QRRig1731552996711.js";import{e as d,f as p,F as m}from"./@tresjs.01P8tiuF1731552996711.js";import{c as f}from"./simplex-noise.Yx8GBgKo1731552996711.js";import{d as g,a3 as y,o as b,D as v,u as S,r as x,j as w,g as P,m as _,F as I}from"./@vue.-THQH3GC1731552996711.js";import"./index.e_Pebw8b1731552996711.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.FpT7kM1i1731552996711.js";import"./three-custom-shader-material.B7Wbwjde1731552996711.js";import"./@vueuse.YduQ9gvc1731552996711.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.MURMqYtt1731552996711.js";import"./all.three.wBtGWCdG1731552996711.js";import"./oimophysics.x0jH7fze1731552996711.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.imZCinTf1731552996711.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.tj7KqDYp1731552996711.js";import"./index.oeIsV-zY1731552996711.js";import"./three-stdlib.8zsNN-Kc1731552996711.js";import"./@pmndrs.n3UO_zuX1731552996711.js";import"./object-hash.DFvx-EIK1731552996711.js";import"./@amap.QHC596bA1731552996711.js";import"./jszip.k9OTGFad1731552996711.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.56_UCV-N1731552996711.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.jsXsTtdN1731552996711.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.Cq8B4Zam1731552996711.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.aIh8BHjc1731552996711.js";const T=j;!function(t,i){const s=j,n=A();for(;;)try{if(599475===-parseInt(s(511))/1*(-parseInt(s(494))/2)+-parseInt(s(535))/3+parseInt(s(502))/4+parseInt(s(613))/5*(parseInt(s(517))/6)+-parseInt(s(604))/7*(parseInt(s(509))/8)+-parseInt(s(601))/9+parseInt(s(596))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){R(this,(function(){const t=j,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(513),"i"),n=H(t(616));i[t(520)](n+"chain")&&s[t(520)](n+"input")?H():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(){const t=["ceil","copyParameters","4kwgkkU","recursion","radius1","index","trace","timeFraction","debu","currentCreateTriangleVertices","537496oQfrXw","warn","LightningStrike","max","lerp","fillMesh","timeScale","400lHuhXb","gger","185723ItoLiH","pos1","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","getNewSegment","subrayDutyCycle","linPos1","1074KDQnLM","numSubrays","subrayCylinderPosition","test","radius0Factor","raySegments","RAY_INITIALIZED","propagationTimeFactor","currentSubray","visible","clone","RAY_UNBORN","maxRaySegments","currentIndex","onDecideSubrayCreation","maxSubrays","needsUpdate","console","898641xPBxWn","seedGenerator","beginVanishingTime","subrayConePosition","SIN30DEG","radius0","array",'{}.constructor("return this")( )',"side","initSubray","drawRange","maxIterations","createSegment","createTriangleVerticesWithUVs","pos0","onSubrayCreation","straightness","currentSegmentIndex","rayParameters","isEternal","COS30DEG","fraction1","lerpVectors","fractalRay","isStatic","toString","createTriangleVerticesWithoutUVs","set","currentVertex","uvs","generateUVs","fractalRayRecursive","createPrism","__proto__","RAY_STEADY","setIndex","createRandomGenerator","positionAttribute","vertices","return (function() ","down","createDefaultSubrayCreationCallbacks","endPropagationTime","length","uvsAttribute","maxSubrayRecursion","floor","subVectors","subrays","simplexZ","log","getSeed","minRadius","sourceOffset","bind","apply","ramification","middlePos","copy","birthTime","forwards","12824080zyjdlJ","pow","cross1","updateMesh","add","4939641YrseWs","sub","up0","74389teAMHr","createSubray","position","isInitialSegment","currentSegmentCallback","simplexY","RAY_VANISHING","createMesh","counter","5335eNUeno","exception","crossVectors","init","indices","newPos","multiplyScalar","currentUVCoordinate","push","linPos0","noiseSeed","vPos","setSeed","cos","sin","random","setAttribute","createPrismFaces","radius1Factor","simplexX","count","vanishingTimeFactor","normalize","destOffset","forwardsFill","fraction0","middleLinPos","randomGenerator","state","subrayPeriod","addNewSubray","usage","currentCoordinate","call","up1","recursionProbability","table","currentSeed","RAY_PROPAGATING","roughness","positionVariationFactor","min","iteration","deathTime","constructor","time","subrayProbability"];return(A=function(){return t})()}V(void 0,(function(){const t=j,i=function(){const t=j;let i;try{i=Function(t(574)+t(542)+");")()}catch(s){i=window}return i}(),s=i[t(534)]=i[t(534)]||{},n=[t(585),t(503),"info","error",t(614),t(649),t(498)];for(let e=0;e<n[t(578)];e++){const i=V[t(657)].prototype[t(589)](V),r=n[e],o=s[r]||i;i[t(568)]=V[t(589)](V),i[t(560)]=o[t(560)][t(589)](o),s[r]=i}}))();class C extends i{constructor(t={}){const i=j;super(),this.isLightningStrike=!0,this.type=i(504),this[i(616)](C.copyParameters(t,t)),this.createMesh()}static[T(571)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(621)](Math.random());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(650)]];return n.currentSeed=(n[e(650)]+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){const e=t;n[e(650)]=Math[e(581)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=T,e=function(s){return i===t?s:s.clone()};return t[n(588)]=void 0!==i.sourceOffset?e(i[n(588)]):new s(0,100,0),t.destOffset=void 0!==i[n(636)]?e(i[n(636)]):new s(0,0,0),t[n(508)]=void 0!==i.timeScale?i[n(508)]:1,t[n(652)]=void 0!==i.roughness?i[n(652)]:.9,t[n(551)]=void 0!==i[n(551)]?i[n(551)]:.7,t[n(603)]=void 0!==i[n(603)]?e(i.up0):new s(0,0,1),t[n(647)]=void 0!==i[n(647)]?e(i[n(647)]):new s(0,0,1),t[n(540)]=void 0!==i.radius0?i.radius0:1,t[n(496)]=void 0!==i[n(496)]?i[n(496)]:1,t.radius0Factor=void 0!==i[n(521)]?i.radius0Factor:.5,t[n(631)]=void 0!==i[n(631)]?i[n(631)]:.2,t[n(587)]=void 0!==i.minRadius?i[n(587)]:.2,t[n(554)]=void 0!==i[n(554)]?i[n(554)]:void 0===i.birthTime||void 0===i.deathTime,t[n(594)]=i[n(594)],t.deathTime=i[n(656)],t[n(524)]=void 0!==i.propagationTimeFactor?i[n(524)]:.1,t[n(634)]=void 0!==i[n(634)]?i.vanishingTimeFactor:.9,t[n(642)]=void 0!==i[n(642)]?i.subrayPeriod:4,t[n(515)]=void 0!==i[n(515)]?i.subrayDutyCycle:.6,t[n(546)]=void 0!==i[n(546)]?i[n(546)]:9,t[n(559)]=void 0!==i[n(559)]&&i[n(559)],t.ramification=void 0!==i[n(591)]?i[n(591)]:5,t[n(580)]=void 0!==i.maxSubrayRecursion?i[n(580)]:3,t[n(648)]=void 0!==i[n(648)]?i.recursionProbability:.6,t[n(565)]=void 0!==i[n(565)]&&i[n(565)],t.randomGenerator=i[n(640)],t[n(623)]=i.noiseSeed,t[n(531)]=i[n(531)],t.onSubrayCreation=i[n(550)],t}update(t){const i=T;this[i(559)]||(this[i(553)].isEternal||this[i(553)][i(594)]<=t&&t<=this.rayParameters[i(656)]?(this[i(599)](t),t<this[i(583)][0][i(577)]?this.state=C[i(651)]:t>this[i(583)][0][i(537)]?this[i(641)]=C.RAY_VANISHING:this[i(641)]=C[i(569)],this[i(526)]=!0):(this.visible=!1,t<this[i(553)][i(594)]?this[i(641)]=C[i(528)]:this.state=C.RAY_EXTINGUISHED))}[T(616)](t){const i=T;this.rayParameters=t,this[i(546)]=void 0!==t[i(546)]?Math[i(581)](t[i(546)]):9,t.maxIterations=this[i(546)],this[i(559)]=void 0!==t[i(559)]&&t[i(559)],t.isStatic=this[i(559)],this[i(591)]=void 0!==t.ramification?Math[i(581)](t[i(591)]):5,t[i(591)]=this[i(591)],this[i(580)]=void 0!==t[i(580)]?Math[i(581)](t[i(580)]):3,t[i(580)]=this[i(580)],this[i(648)]=void 0!==t.recursionProbability?t[i(648)]:.6,t.recursionProbability=this.recursionProbability,this[i(565)]=void 0!==t.generateUVs&&t[i(565)],t[i(565)]=this[i(565)],void 0!==t[i(640)]?(this.randomGenerator=t[i(640)],this[i(536)]=t[i(640)],void 0!==t[i(623)]&&this[i(536)].setSeed(t[i(623)])):(this[i(640)]=C.createRandomGenerator(),this[i(536)]=Math),void 0!==t[i(531)]?this[i(531)]=t[i(531)]:(this[i(576)](),void 0!==t.onSubrayCreation&&(this[i(550)]=t[i(550)])),this[i(641)]=C[i(523)],this[i(532)]=Math[i(492)](1+Math[i(597)](this[i(591)],Math[i(505)](0,this.maxSubrayRecursion-1))),t[i(532)]=this[i(532)],this[i(529)]=2*(1<<this[i(546)]),this[i(583)]=[];for(let s=0;s<this[i(532)];s++)this.subrays[i(621)](this[i(605)]());this.raySegments=[];for(let s=0;s<this.maxRaySegments;s++)this[i(522)].push(this[i(547)]());this[i(658)]=0,this[i(499)]=0,this[i(608)]=null,this.currentCreateTriangleVertices=this.generateUVs?this[i(548)]:this.createTriangleVerticesWithoutUVs,this[i(518)]=0,this[i(525)]=null,this[i(552)]=0,this[i(607)]=!1,this[i(491)]=0,this[i(563)]=0,this[i(530)]=0,this[i(645)]=0,this[i(620)]=0,this[i(573)]=null,this[i(564)]=null,this[i(617)]=null,this[i(572)]=null,this[i(579)]=null,this[i(632)]=f(this[i(536)][i(628)]),this[i(609)]=f(this[i(536)][i(628)]),this[i(584)]=f(this[i(536)][i(628)]),this.forwards=new s,this[i(637)]=new s,this[i(543)]=new s,this[i(575)]=new s,this[i(592)]=new s,this[i(639)]=new s,this[i(618)]=new s,this[i(624)]=new s,this[i(598)]=new s}[T(611)](){const t=T,i=1<<this[t(546)],s=3*(i+1)*this[t(532)],o=18*i*this[t(532)];this.vertices=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(565)]&&(this[t(564)]=new Float32Array(2*s)),this[t(507)](0),this[t(570)](new n(this[t(617)],1)),this[t(572)]=new e(this[t(573)],3),this[t(629)](t(606),this[t(572)]),this[t(565)]&&(this[t(579)]=new e(new Float32Array(this[t(564)]),2),this[t(629)]("uv",this[t(579)])),!this[t(559)]&&(this[t(497)][t(644)]=r,this[t(572)].usage=r,this[t(565)]&&(this[t(579)][t(644)]=r)),this[t(573)]=this[t(572)][t(541)],this.indices=this[t(497)][t(541)],this[t(565)]&&(this[t(564)]=this[t(579)].array)}[T(599)](t){const i=T;this[i(507)](t),this[i(545)][i(633)]=this[i(530)],this.index[i(533)]=!0,this[i(572)].needsUpdate=!0,this[i(565)]&&(this.uvsAttribute.needsUpdate=!0)}[T(507)](t){const i=T,s=this;this[i(563)]=0,this[i(530)]=0,this[i(645)]=0,this[i(620)]=0,this[i(558)](t,(function(n){const e=i,r=s.currentSubray;t<r.birthTime||(this[e(553)][e(554)]&&0==s.currentSubray[e(495)]?(s[e(567)](n),s[e(531)](n,s)):t<r[e(577)]?s[e(499)]>=n[e(638)]*r[e(524)]&&(s[e(567)](n),s[e(531)](n,s)):t<r.beginVanishingTime?(s[e(567)](n),s.onDecideSubrayCreation(n,s)):(s[e(499)]<=r[e(634)]+n[e(556)]*(1-r[e(634)])&&s.createPrism(n),s[e(531)](n,s)))}))}[T(643)](){const t=T;return this[t(583)][this[t(518)]++]}[T(544)](t,i){const s=T;t.pos0.copy(i.sourceOffset),t.pos1.copy(i.destOffset),t[s(603)][s(593)](i[s(603)]),t[s(647)][s(593)](i[s(647)]),t.radius0=i[s(540)],t[s(496)]=i[s(496)],t[s(594)]=i[s(594)],t[s(656)]=i.deathTime,t.timeScale=i[s(508)],t.roughness=i[s(652)],t[s(551)]=i[s(551)],t[s(524)]=i[s(524)],t[s(634)]=i[s(634)],t[s(546)]=this[s(546)],t.seed=void 0!==i.noiseSeed?i[s(623)]:0,t[s(495)]=0}[T(558)](t,i){const s=T;this.time=t,this.currentSegmentCallback=i,this[s(518)]=0,this[s(544)](this.addNewSubray(),this[s(553)]);for(let n=0;n<this[s(518)];n++){const i=this[s(583)][n];this[s(525)]=i,this.randomGenerator[s(625)](i.seed),i[s(577)]=o.lerp(i.birthTime,i.deathTime,i[s(524)]),i[s(537)]=o[s(506)](i.deathTime,i[s(594)],1-i[s(634)]);const e=this[s(640)][s(628)];i[s(622)][s(562)](e(),e(),e())[s(619)](1e3),i[s(516)].set(e(),e(),e())[s(619)](1e3),this[s(499)]=(t-i[s(594)])/(i.deathTime-i[s(594)]),this[s(552)]=0,this[s(607)]=!0;const r=this[s(514)]();r[s(655)]=0,r.pos0[s(593)](i[s(549)]),r.pos1[s(593)](i[s(512)]),r[s(622)][s(593)](i.linPos0),r[s(516)][s(593)](i[s(516)]),r.up0.copy(i[s(603)]),r[s(647)][s(593)](i[s(647)]),r[s(540)]=i.radius0,r.radius1=i[s(496)],r[s(638)]=0,r[s(556)]=1,r.positionVariationFactor=1-i.straightness,this[s(491)]=this[s(591)]*Math[s(597)](this[s(648)],i.recursion)/(1<<i[s(546)]),this[s(566)](r)}this[s(608)]=null,this[s(525)]=null}fractalRayRecursive(t){const i=T;if(t[i(655)]>=this.currentSubray[i(546)])return void this.currentSegmentCallback(t);this.forwards[i(582)](t[i(512)],t.pos0);let s=this.forwards[i(578)]();s<1e-6&&(this[i(595)][i(562)](0,0,.01),s=this[i(595)][i(578)]());const n=.5*(t[i(540)]+t.radius1),e=.5*(t[i(638)]+t[i(556)]),r=this[i(658)]*this[i(525)][i(508)]*Math[i(597)](2,t[i(655)]);this.middlePos.lerpVectors(t[i(549)],t[i(512)],.5),this[i(639)][i(557)](t.linPos0,t.linPos1,.5);const o=this.middleLinPos;this.newPos.set(this[i(632)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(584)](o.x,o.y,o.z,r)),this[i(618)][i(619)](t[i(653)]*s),this.newPos.add(this[i(592)]);const a=this.getNewSegment();a[i(549)][i(593)](t[i(549)]),a[i(512)].copy(this[i(618)]),a.linPos0.copy(t.linPos0),a.linPos1[i(593)](this[i(639)]),a[i(603)][i(593)](t[i(603)]),a[i(647)][i(593)](t.up1),a.radius0=t[i(540)],a[i(496)]=n,a[i(638)]=t.fraction0,a.fraction1=e,a[i(653)]=t[i(653)]*this.currentSubray[i(652)],a[i(655)]=t[i(655)]+1;const h=this[i(514)]();h[i(549)][i(593)](this[i(618)]),h.pos1[i(593)](t[i(512)]),h[i(622)][i(593)](this.middleLinPos),h[i(516)][i(593)](t[i(516)]),this[i(598)][i(615)](t[i(603)],this[i(595)][i(635)]()),h[i(603)].crossVectors(this[i(595)],this[i(598)])[i(635)](),h[i(647)].copy(t[i(647)]),h[i(540)]=n,h[i(496)]=t[i(496)],h[i(638)]=e,h.fraction1=t[i(556)],h[i(653)]=t[i(653)]*this.currentSubray[i(652)],h[i(655)]=t[i(655)]+1,this[i(566)](a),this[i(566)](h)}[T(567)](t){const i=T;this[i(637)][i(582)](t.pos1,t[i(549)]).normalize(),this[i(607)]&&(this.currentCreateTriangleVertices(t.pos0,t[i(603)],this[i(637)],t.radius0,0),this[i(607)]=!1),this[i(501)](t.pos1,t[i(603)],this[i(637)],t.radius1,t.fraction1),this[i(630)]()}[T(561)](t,i,s,n){const e=T;this.side[e(615)](i,s)[e(619)](n*C[e(555)]),this[e(575)][e(593)](i)[e(619)](-n*C[e(539)]);const r=this.vPos,o=this[e(573)];r.copy(t).sub(this.side)[e(600)](this.down),o[this[e(645)]++]=r.x,o[this[e(645)]++]=r.y,o[this[e(645)]++]=r.z,r[e(593)](t)[e(600)](this[e(543)])[e(600)](this.down),o[this.currentCoordinate++]=r.x,o[this[e(645)]++]=r.y,o[this[e(645)]++]=r.z,r[e(593)](i)[e(619)](n).add(t),o[this.currentCoordinate++]=r.x,o[this[e(645)]++]=r.y,o[this[e(645)]++]=r.z,this[e(563)]+=3}[T(548)](t,i,s,n,e){const r=T;this[r(543)][r(615)](i,s).multiplyScalar(n*C[r(555)]),this[r(575)][r(593)](i)[r(619)](-n*C[r(539)]);const o=this.vPos,a=this[r(573)],h=this.uvs;o.copy(t)[r(602)](this.side).add(this[r(575)]),a[this[r(645)]++]=o.x,a[this[r(645)]++]=o.y,a[this[r(645)]++]=o.z,h[this[r(620)]++]=e,h[this[r(620)]++]=0,o[r(593)](t)[r(600)](this[r(543)])[r(600)](this[r(575)]),a[this[r(645)]++]=o.x,a[this[r(645)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=.5,o[r(593)](i)[r(619)](n).add(t),a[this[r(645)]++]=o.x,a[this[r(645)]++]=o.y,a[this[r(645)]++]=o.z,h[this[r(620)]++]=e,h[this[r(620)]++]=1,this[r(563)]+=3}[T(630)](t){const i=T,s=this[i(617)];t=this.currentVertex-6,s[this[i(530)]++]=t+1,s[this[i(530)]++]=t+2,s[this[i(530)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(530)]++]=t+5,s[this[i(530)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(530)]++]=t+1,s[this[i(530)]++]=t+4,s[this[i(530)]++]=t+0,s[this.currentIndex++]=t+4,s[this[i(530)]++]=t+3,s[this[i(530)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(530)]++]=t+3,s[this[i(530)]++]=t+2,s[this.currentIndex++]=t+3,s[this[i(530)]++]=t+5}[T(576)](){const t=T,i=this[t(640)].random;this[t(531)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(553)][e(642)],h=n[e(553)][e(515)],c=n[e(553)].isEternal&&0==r[e(495)]?-i()*a:o[e(506)](r[e(594)],r[e(577)],s[e(638)])-i()*a,u=n[e(658)]-c,l=Math[e(581)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(491)]),r[e(495)]<n[e(580)]&&n.numSubrays<n[e(532)]&&i()<p){const t=n[e(643)](),o=n.randomGenerator[e(586)]();t.seed=d,n[e(640)].setSeed(d),t.recursion=r[e(495)]+1,t.maxIterations=Math[e(505)](1,r[e(546)]-1),t[e(622)].set(i(),i(),i())[e(619)](1e3),t.linPos1[e(562)](i(),i(),i())[e(619)](1e3),t[e(603)][e(593)](r[e(603)]),t[e(647)].copy(r[e(647)]),t[e(540)]=s[e(540)]*n.rayParameters[e(521)],t[e(496)]=Math[e(654)](n[e(553)][e(587)],s[e(496)]*n[e(553)][e(631)]),t[e(594)]=c+l*a,t[e(656)]=t[e(594)]+a*h,!n[e(553)].isEternal&&0==r.recursion&&(t[e(594)]=Math[e(505)](t[e(594)],r[e(594)]),t.deathTime=Math[e(654)](t.deathTime,r[e(656)])),t.timeScale=2*r[e(508)],t[e(652)]=r[e(652)],t[e(551)]=r[e(551)],t[e(524)]=r[e(524)],t[e(634)]=r[e(634)],n[e(550)](s,r,t,n),n[e(640)][e(625)](o)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(i,s,n,e){e[t(519)](i,s,n,.5,.6,.2)},this[t(538)]=function(s,o,h,c,u,l){const d=t;h.pos0[d(593)](s[d(549)]),n[d(582)](o[d(512)],o[d(549)]),e[d(593)](n)[d(635)](),n[d(619)](s[d(638)]+(1-s[d(638)])*(i()*c));const p=n[d(578)]();r.crossVectors(o[d(603)],e);const m=2*Math.PI*i();r[d(619)](Math[d(626)](m)),a[d(593)](o.up0)[d(619)](Math[d(627)](m)),h[d(512)][d(593)](r)[d(600)](a)[d(619)](p*u*(l+i()*(1-l))).add(n).add(o[d(549)])},this[t(519)]=function(s,o,h,c,u,l){const d=t;h[d(549)][d(593)](s[d(549)]),n[d(582)](o[d(512)],o[d(549)]),e[d(593)](n)[d(635)](),n[d(619)](s.fraction0+(1-s.fraction0)*((2*i()-1)*c));const p=n[d(578)]();r[d(615)](o[d(603)],e);const m=2*Math.PI*i();r[d(619)](Math[d(626)](m)),a[d(593)](o[d(603)])[d(619)](Math.sin(m)),h.pos1[d(593)](r)[d(600)](a)[d(619)](p*u*(l+i()*(1-l))).add(n)[d(600)](o[d(549)])}}[T(605)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(547)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(514)](){const t=T;return this[t(522)][this[t(552)]++]}copy(t){const i=T;return super[i(593)](t),this.init(C[i(493)]({},t[i(553)])),this}[T(527)](){const t=T;return new(this[t(657)])(C.copyParameters({},this[t(553)]))}}function j(t,i){const s=A();return(j=function(t,i){return s[t-=491]})(t,i)}function H(t){function i(t){const s=j;if("string"==typeof t)return function(t){}[s(657)]("while (true) {}")[s(590)](s(612));1!==(""+t/t)[s(578)]||t%20==0?function(){return!0}[s(657)](s(500)+s(510))[s(646)]("action"):function(){return!1}[s(657)](s(500)+s(510)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[T(523)]=0,C[T(528)]=1,C[T(651)]=2,C[T(569)]=3,C[T(610)]=4,C.RAY_EXTINGUISHED=5,C.COS30DEG=Math[T(626)](30*Math.PI/180),C[T(539)]=Math[T(627)](30*Math.PI/180);const D=z;function z(t,i){const s=L();return(z=function(t,i){return s[t-=217]})(t,i)}!function(t,i){const s=z,n=L();for(;;)try{if(495067===-parseInt(s(226))/1*(parseInt(s(235))/2)+parseInt(s(266))/3*(-parseInt(s(250))/4)+-parseInt(s(236))/5*(parseInt(s(276))/6)+parseInt(s(229))/7+parseInt(s(287))/8+-parseInt(s(246))/9+parseInt(s(244))/10*(parseInt(s(231))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(224)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function L(){const t=["log","apply","lightningMaxPeriod","38QWFRcZ","remove","lerp","6079717ZoKpHg","error","13906189XSAIkI","exception","birthTime","maxHeight","38826yEKkVA","2432865vPOcrZ","clone","lightningsMeshes","random","maxLightnings","bind","action","debu","10qoKVsT","stormParams","2536236oWSTkL","toString","function *\\( *\\)","while (true) {}","16gaKWnN","maxSlope","length","splice","size","RAY_PROPAGATING","prototype","return (function() ","lightningMinPeriod","minHeight","call","copy","pop","gger","stateObject","input","692184zxQlZA","warn","indexOf","lightningParameters","sourceOffset","inited","noiseSeed","geometry","destOffset","state","6WLQVph","__proto__","add","rayParameters","isLightningStorm","lightningMaxDuration","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","onRayPosition","lightningMaterial","6330560GKMnqL","isEternal","update","push","multiplyScalar","onLightningDown","deadLightningsMeshes","RAY_EXTINGUISHED","lightningMinDuration","constructor","nextLightningTime","getNextLightningTime","copyParameters","console"];return(L=function(){return t})()}!function(){F(this,(function(){const t=z,i=new RegExp(t(248)),s=new RegExp(t(283),"i"),n=G(t(282));i.test(n+"chain")&&s.test(n+t(265))?G():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(224)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();O(void 0,(function(){const t=z,i=function(){const t=z;let i;try{i=Function(t(257)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i.console=i[t(222)]||{},n=[t(223),t(267),t(284),t(230),t(232),"table","trace"];for(let e=0;e<n[t(252)];e++){const i=O.constructor[t(256)].bind(O),r=n[e],o=s[r]||i;i[t(277)]=O[t(241)](O),i[t(247)]=o[t(247)][t(241)](o),s[r]=i}}))();class E extends a{constructor(t={}){const i=z;super(),this[i(280)]=!0,this[i(245)]=t,t[i(254)]=void 0!==t.size?t.size:1e3,t[i(259)]=void 0!==t[i(259)]?t[i(259)]:80,t[i(234)]=void 0!==t.maxHeight?t[i(234)]:100,t[i(251)]=void 0!==t[i(251)]?t[i(251)]:1.1,t[i(240)]=void 0!==t[i(240)]?t[i(240)]:3,t[i(258)]=void 0!==t.lightningMinPeriod?t.lightningMinPeriod:3,t[i(225)]=void 0!==t[i(225)]?t[i(225)]:7,t.lightningMinDuration=void 0!==t.lightningMinDuration?t[i(217)]:1,t[i(281)]=void 0!==t[i(281)]?t[i(281)]:2.5,this[i(269)]=C.copyParameters(t[i(269)],t[i(269)]),this[i(269)][i(288)]=!1,this[i(286)]=void 0!==t.lightningMaterial?t[i(286)]:new h({color:11599871}),void 0!==t[i(285)]?this[i(285)]=t.onRayPosition:this[i(285)]=function(s,n){const e=i;n.set((Math[e(239)]()-.5)*t[e(254)],0,(Math[e(239)]()-.5)*t.size);const r=o.lerp(t[e(259)],t.maxHeight,Math[e(239)]());s.set(t.maxSlope*(2*Math.random()-1),1,t.maxSlope*(2*Math[e(239)]()-1))[e(291)](r)[e(278)](n)},this.onLightningDown=t.onLightningDown,this[i(271)]=!1,this.nextLightningTime=0,this[i(238)]=[],this[i(293)]=[];for(let s=0;s<this[i(245)][i(240)];s++){const t=new C(C[i(221)]({},this.lightningParameters)),s=new c(t,this[i(286)]);this[i(293)][i(290)](s)}}update(t){const i=z;if(!this[i(271)]&&(this[i(219)]=this[i(220)](t)*Math.random(),this[i(271)]=!0),t>=this[i(219)]){const s=this[i(293)][i(262)]();if(s){const n=C[i(221)](s[i(273)][i(279)],this[i(269)]);n[i(233)]=t,n.deathTime=t+o.lerp(this[i(245)][i(217)],this[i(245)][i(281)],Math.random()),this[i(285)](n[i(270)],n[i(274)]),n[i(272)]=Math.random(),this[i(278)](s),this[i(238)].push(s)}this[i(219)]=this[i(220)](t)}let s=0,n=this.lightningsMeshes[i(252)];for(;s<n;){const e=this[i(238)][s],r=e[i(273)],o=r.state;r[i(289)](t),o===C[i(255)]&&r[i(275)]>o&&this[i(292)]&&this[i(292)](r),r.state===C[i(294)]?(this[i(238)][i(253)](this[i(238)][i(268)](e),1),this[i(293)].push(e),this[i(227)](e),n--):s++}}[D(220)](t){const i=D;return t+o[i(228)](this.stormParams[i(258)],this[i(245)].lightningMaxPeriod,Math[i(239)]())/(this.stormParams[i(240)]+1)}copy(t,i){const s=D;return super[s(261)](t,i),this[s(245)][s(254)]=t[s(245)][s(254)],this.stormParams[s(259)]=t.stormParams.minHeight,this.stormParams.maxHeight=t[s(245)][s(234)],this[s(245)][s(251)]=t.stormParams[s(251)],this.stormParams[s(240)]=t.stormParams[s(240)],this[s(245)][s(258)]=t[s(245)].lightningMinPeriod,this.stormParams[s(225)]=t[s(245)][s(225)],this[s(245)][s(217)]=t[s(245)].lightningMinDuration,this[s(245)][s(281)]=t[s(245)].lightningMaxDuration,this[s(269)]=C[s(221)]({},t.lightningParameters),this[s(286)]=t.stormParams[s(286)],this[s(292)]=t.onLightningDown,this}[D(237)](){const t=D;return new(this[t(218)])(this.stormParams)[t(261)](this)}}function G(t){function i(t){const s=z;if("string"==typeof t)return function(t){}.constructor(s(249)).apply("counter");1!==(""+t/t)[s(252)]||t%20==0?function(){return!0}.constructor(s(243)+s(263))[s(260)](s(242)):function(){return!1}[s(218)](s(243)+s(263)).apply(s(264)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=U;!function(t,i){const s=U,n=Z();for(;;)try{if(716606===-parseInt(s(429))/1+-parseInt(s(407))/2*(-parseInt(s(445))/3)+parseInt(s(441))/4*(-parseInt(s(411))/5)+-parseInt(s(399))/6*(-parseInt(s(403))/7)+parseInt(s(440))/8+-parseInt(s(395))/9*(-parseInt(s(424))/10)+-parseInt(s(401))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[U(436)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function U(t,i){const s=Z();return(U=function(t,i){return s[t-=383]})(t,i)}function Z(){const t=["while (true) {}","toString","log","counter","object","5534622aXfzDh","rayParameters","Vector3","stateObject","30VsQIWW","input","5855465ONfxSs","subrayDutyCycle","453635oBfXBF","set","call","debu","1210zMXZul","dot","minHeight","function *\\( *\\)","2756455HtOOhd","timeScale","multiplyScalar","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","length","trace","stormParams","table","prototype","radius0","primitive","warn","10VSQHKA","return (function() ","copy","roughness","lightStorm","243617JexccL","straightness","subVectors","constructor","pos1","string","exception","apply","__proto__","maxHeight","addVectors","11429256jeJkPI","8cVAosJ","color","radius1","action","1128HDhPez","add","console","test","chain","bind","sourceOffset","size"];return(Z=function(){return t})()}!function(){k(this,(function(){const t=U,i=new RegExp(t(410)),s=new RegExp(t(414),"i"),n=Q("init");i[t(385)](n+t(386))&&s[t(385)](n+t(400))?Q():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[U(436)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=U;let i;try{i=Function(t(425)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i.console=i[t(384)]||{},n=[t(392),t(423),"info","error",t(435),t(419),t(417)];for(let r=0;r<n[t(416)];r++){const i=Y[t(432)][t(420)][t(387)](Y),e=n[r],o=s[e]||i;i[t(437)]=Y.bind(Y),i[t(391)]=o.toString[t(387)](o),s[e]=i}}))();const X=[N(394)],W=g({__name:N(428),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,n=t,e=new u(n[i(442)]),r=new h({color:e}),o=new(l[i(397)])(0,-1,0);let a=0;const c=new s,p=new(l[i(397)]),m={roughness:n[i(427)],straightness:n[i(430)],radius0:n[i(421)],radius1:n[i(443)],timeScale:n[i(412)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(402)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(396)][r(388)].y,c[r(431)](n.pos1,e[r(396)][r(388)]);const h=o[r(408)](c);p[r(426)](o).multiplyScalar(h),c.sub(p);const u=h/a>.5?a/h:1;p[r(413)](u),c[r(383)](p),n[r(433)][r(439)](c,e[r(396)].sourceOffset)}},f=new E({size:n[i(389)],minHeight:n[i(409)],maxHeight:n[i(438)],maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:m,lightningMaterial:r});y((()=>{const t=i,s=f[t(418)];s[t(389)]=n[t(389)],s[t(409)]=n.minHeight,s.maxHeight=n.maxHeight,r[t(442)][t(404)](n[t(442)]),m[t(427)]=n[t(427)],m[t(430)]=n[t(430)],m[t(421)]=n[t(421)],m.radius1=n[t(443)],m[t(412)]=n.timeScale}));const{onLoop:g}=d();return g((({elapsed:t})=>{f.update(t)})),(t,s)=>{const n=i;return b(),v(n(422),{object:S(f),renderOrder:9999},null,8,X)}}});function Q(t){function i(t){const s=U;if(typeof t===s(434))return function(t){}[s(432)](s(390))[s(436)](s(393));1!==(""+t/t)[s(416)]||t%20==0?function(){return!0}[s(432)](s(406)+s(415))[s(405)](s(444)):function(){return!1}.constructor(s(406)+s(415)).apply(s(398)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=K,n=B();for(;;)try{if(642362===parseInt(s(518))/1*(-parseInt(s(512))/2)+-parseInt(s(514))/3*(parseInt(s(545))/4)+parseInt(s(525))/5*(-parseInt(s(507))/6)+parseInt(s(501))/7*(-parseInt(s(504))/8)+-parseInt(s(500))/9*(-parseInt(s(502))/10)+-parseInt(s(505))/11+parseInt(s(511))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=B();return(K=function(t,i){return s[t-=496]})(t,i)}!function(){$(this,(function(){const t=K,i=new RegExp(t(546)),s=new RegExp(t(523),"i"),n=tt(t(549));i[t(521)](n+t(508))&&s[t(521)](n+t(531))?tt():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function B(){const t=["debu","radius0","15ZIInQx","call","直度度","test","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","5eZuPjY","#ffbde7","table","straightness","toString","value","input","trace","action","roughness","color","__proto__","log","#92399e","counter","#6f6f6f","未部半径","apply","maxHeight","radius1","3399196ywLuhf","function *\\( *\\)","error","时间缩放","init","timeScale","gger","stateObject","string","3753geNcuc","7jpOmDV","27800MmLWnv","粗糙度","270904kfOhgv","12237335RCvlcv","bind","2126364CqXnaq","chain","constructor",'{}.constructor("return this")( )',"22543356uxEdxX","5996gmQgQO","console","3vvhbCR","prototype"];return(B=function(){return t})()}q(void 0,(function(){const t=K;let i;try{i=Function(t(524)+t(510)+");")()}catch(e){i=window}const s=i.console=i[t(513)]||{},n=[t(537),"warn","info",t(547),"exception",t(527),t(532)];for(let r=0;r<n[t(522)];r++){const i=q[t(509)][t(515)].bind(q),e=n[r],o=s[e]||i;i[t(536)]=q[t(506)](q),i[t(529)]=o[t(529)][t(506)](o),s[e]=i}}))();const J=g({__name:"lightningStorm",setup(i){const s=K,n=x({cellSize:60,cellThickness:1,cellColor:s(540),sectionColor:s(538),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(526),roughness:{label:s(503),value:.85,min:0,max:1,step:.01},straightness:{label:s(520),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(541),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(548),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const p=s;return b(),v(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:P((()=>[w(W,{minHeight:S(e).value,maxHeight:S(r)[p(530)],color:S(o)[p(530)],roughness:S(a)[p(530)],straightness:S(h)[p(530)],radius0:S(c).value,radius1:S(u)[p(530)],timeScale:S(l)[p(530)]},null,8,["minHeight",p(543),p(535),p(534),p(528),p(517),p(544),p(496)]),w(S(M),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(S(m))],64)}}});function tt(t){function i(t){const s=K;if(typeof t===s(499))return function(t){}[s(509)]("while (true) {}")[s(542)](s(539));1!==(""+t/t).length||t%20==0?function(){return!0}[s(509)](s(516)+s(497))[s(519)](s(533)):function(){return!1}.constructor(s(516)+s(497))[s(542)](s(498)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

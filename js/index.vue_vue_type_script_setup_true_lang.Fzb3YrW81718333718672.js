import{a5 as R,ah as M,ao as w,ab as I,a0 as C,bf as E,o as L,c as S,T as h,at as D,ad as F}from"./vendor.V7oUbPUv1718333718672.js";import"./vanilla.esm.5.5.0.55F13Ysq1718333718672.js";import{u as b}from"./index.F8_AMQAL1718333718672.js";import{M as k}from"./MeshTransmissionMaterial.PvI7WcUV1718333718672.js";import{M as O}from"./MeshDiscardMaterial.Xi9kbEgB1718333718672.js";const U=["buffer","side"],q=0,K=R({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(T,{expose:g}){const a=M(),{extend:x,scene:l,renderer:t,camera:o}=w(),e=M(),s=T;x({MeshTransmissionMaterial:k});function _(n,m){let p;return n.traverse(r=>{r.isMesh&&r.material&&r.material.uuid===m&&(p=r)}),p}const y=new O,{onBeforeLoop:B}=F(),u=b({width:s.fboResolution,height:s.fboResolution,isLoop:!1}),i=b({width:s.fboResolution,height:s.fboResolution,isLoop:!1});I(async()=>{await C(),e.value=_(l.value,a.value.uuid)});let d,v,f,c;return B(({elapsed:n})=>{a.value.time=n,a.value.buffer===i.value.texture&&e.value&&(f=t.value.toneMapping,d=l.value.background,v=a.value.envMapIntensity,c=e.value.material.side,e.value.material=y,s.backside&&(t.value.setRenderTarget(u.value),t.value.render(l.value,o.value),e.value.material=a.value,e.value.material.thickness=s.backsideThickness,e.value.material.buffer=u.value.texture,e.value.material.side=E,e.value.material.envMapIntensity=q),t.value.setRenderTarget(i.value),t.value.render(l.value,o.value),e.value.material.buffer=i.value.texture,e.value.material=a.value,e.value.material.thickness=s.thickness,e.value.material.side=c,e.value.material.envMapIntensity=v,l.value.background=d,t.value.setRenderTarget(null),t.value.toneMapping=f)}),g({root:a,constructor:k}),(n,m)=>(L(),S("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:a,buffer:h(i).texture,side:h(D)},null,8,U))}});export{K as _};

import"./@fesjs.JLOwLS8V1736493808390.js";import{_ as t}from"./jszip.NJRHV3NU1736493808390.js";import{F as n}from"./file-saver.x9ri8iMM1736493808390.js";import{_ as e,aL as s}from"./three.lAfZYOpc1736493808390.js";const o=l;!function(t,n){const e=l,s=p();for(;;)try{if(395520===-parseInt(e(305))/1*(-parseInt(e(303))/2)+-parseInt(e(309))/3+parseInt(e(280))/4+-parseInt(e(285))/5*(parseInt(e(279))/6)+-parseInt(e(290))/7+-parseInt(e(256))/8*(parseInt(e(293))/9)+parseInt(e(323))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[l(313)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=l,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(335),"i"),s=h(t(318));n[t(300)](s+t(281))&&e[t(300)](s+"input")?h():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=o,s=new(e[n(295)]);return new Promise(((e,o)=>{const r=n;s[r(262)](t,(t=>e(JSON[r(244)](t))),void 0,(t=>o(t)))}))}async function c(t){const n=o,s=new(e[n(295)]);return new Promise(((e,r)=>{const a=n;s[a(336)](a(312)),s[a(262)](t,(n=>{const s=a,i=new FileReader;i[s(317)]=()=>{const n=s,r=function(t){const n=o,e=t[n(338)](".")[n(329)]()[n(340)]();return{jpg:n(315),jpeg:n(315),png:"image/png",gif:n(275),bmp:n(254),webp:n(294)}[e]||"application/octet-stream"}(t),a=i[n(250)][n(338)](",")[1];e(n(288)+r+";base64,"+a)},i.onerror=t=>{r(t)},i[s(321)](n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=l,n=function(){const t=l;let n;try{n=Function(t(302)+t(255)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(326)]||{},s=[t(310),t(246),t(299),t(307),t(263),t(268),t(298)];for(let o=0;o<s.length;o++){const n=a[t(301)].prototype.bind(a),r=s[o],i=e[r]||n;n[t(252)]=a[t(259)](a),n.toString=i.toString[t(259)](i),e[r]=n}}))(),e[o(273)][o(330)]=!0;const u=n=>{const e=o,r=new s;return r[e(336)](e(312)),new Promise(((e,s)=>{r.load(n,(async n=>{const s=l;e(await t[s(272)](n))}),void 0,(t=>s(t)))}))};function p(){const t=["console","GIF","data:image/GIF;base64,","pop","enabled","startsWith","data:image/gif;base64,","uuid","endsWith","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setResponseType","images","split","geometries","toLowerCase","parse",".json","warn","generateAsync","folder","push","result","scene","__proto__","call","image/bmp",'{}.constructor("return this")( )',"558024DiZZrX","debu","data:image/png;base64,","bind","data:image/","config.zip","load","exception","data:image/JPEG;base64,","JPEG","data:image/PNG;base64,","gger","table","substring","then","file","loadAsync","Cache","counter","image/gif","Unknown","files","async","1987506wvKqIy","1078720ZvSWAq","chain","base64","data","app.json","10tVnFoL","type","stateObject","data:","string","5431748VRpIHU","BufferGeometry","name","63fVdryp","image/webp","FileLoader","forEach","get","trace","info","test","constructor","return (function() ","216hulECg","toUpperCase","2809uwMnyQ","PNG","error","catch","761676fSvdSw","log","data:image/webp;base64,","blob","apply","WEBP","image/jpeg","data:image/jpeg;base64,","onloadend","init","url:",";base64,","readAsDataURL","length","20030970dxdVIP","url","stringify"];return(p=function(){return t})()}function l(t,n){const e=p();return(l=function(t,n){return e[t-=244]})(t,n)}const f=t=>{const n=o,e=t[n(269)](0,15),s=n(316),r=n(264),a=n(258),i=n(266),c=n(332),u=n(328),p=n(311);return s[n(331)](e)||r[n(331)](e)?n(265):a.startsWith(e)||i[n(331)](e)?n(306):c[n(331)](e)||u[n(331)](e)?n(327):p[n(331)](e||"data:image/WEBP;base64,"[n(331)](e))?n(314):n(276)},g=e=>{const s=o,r=[];e[s(251)].geometries&&e[s(251)].geometries[s(296)]((t=>{const n=s;t.type===n(291)&&(r[n(249)]({uuid:t.uuid,data:t[n(283)]}),t[n(283)]="url:geometries/"+t[n(333)]+n(245))}));const a=[];e[s(251)].images&&e[s(251)][s(337)][s(296)]((t=>{const n=s;t[n(324)]&&(a[n(249)]({uuid:t[n(333)],url:t[n(324)]}),t[n(324)][n(286)]?t[n(324)]="url:images/"+t[n(333)]+"."+t[n(324)][n(286)]+n(245):t[n(324)]="url:images/"+t[n(333)]+"."+f(t[n(324)]))}));const i=new t;if(r[s(322)]){const t=i[s(248)](s(339));r.forEach((n=>{const e=s;t[e(271)](n.uuid+e(245),JSON[e(325)](n[e(283)]))}))}if(a[s(322)]){const t=i[s(248)](s(337));a[s(296)]((n=>{const e=s;n[e(324)][e(286)]?t[e(271)](n[e(333)]+"."+n[e(324)][e(286)]+e(245),JSON[e(325)](n[e(324)])):t[e(271)](n[e(333)]+"."+f(n.url),n.url[e(338)](";base64,").pop(),{base64:!0})}))}const c=JSON[s(325)](e);return i[s(271)](s(284),c),i[s(247)]({type:s(312)}).then((t=>{const e=s;n.saveAs(t,e(261))}))},m=(t,n,e)=>{const s=o;t[s(339)]<=0&&t[s(337)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(272)](n)[s(270)]((t=>{const n=s;t.files["app.json"]?t[n(277)][n(284)][n(278)]("string").then((s=>{var a,i;const c=n;r=JSON.parse(s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(251)][s(339)])||n[s(296)]((t=>{const n=s;t[n(283)].startsWith(n(319))&&r[n(339)]++})),null==(e=t[s(251)][s(337)])||e[s(296)]((t=>{const n=s;t[n(324)].startsWith(n(319))&&r[n(337)]++})),r})(r);m(u,r,e),null==(a=r.scene[c(339)])||a[c(296)]((n=>{const s=c;n[s(283)].startsWith("url:")&&t.files[n[s(283)].slice(4)].async(s(289)).then((t=>{const o=s;n.data=JSON[o(244)](t),u.geometries--,m(u,r,e)}))})),null==(i=r.scene.images)||i[c(296)]((n=>{const s=c;if(n[s(324)].startsWith("url:")){const o=n[s(324)].slice(4);o[s(334)](".json")?t.files[o][s(278)](s(289))[s(270)]((t=>{const o=s;n[o(324)]=JSON[o(244)](t),u[o(337)]--,m(u,r,e)})):t[s(277)][o].async(s(282))[s(270)]((t=>{const a=s,i=o[a(338)]("."),c=i[i[a(322)]-1][a(304)]();n[a(324)]=a(260)+c+a(320)+t,u[a(337)]--,m(u,r,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(t=>{const e=s;console[e(307)](n[e(292)]+": "+t.message)})),r};function h(t){function n(t){const e=l;if(typeof t===e(289))return function(t){}.constructor("while (true) {}")[e(313)](e(274));1!==(""+t/t).length||t%20==0?function(){return!0}[e(301)](e(257)+e(267))[e(253)]("action"):function(){return!1}[e(301)](e(257)+"gger")[e(313)](e(287)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{u as a,c as b,g as e,f as g,d as i,i as l};

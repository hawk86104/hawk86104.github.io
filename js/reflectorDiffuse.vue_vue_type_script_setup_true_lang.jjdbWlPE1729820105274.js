import{c0 as t,a3 as n,C as e,k as r}from"./three.0W5n8UBO1729820105274.js";import{z as o}from"./@tresjs.S6PXiQcG1729820105274.js";import{R as c}from"./all.three.btwmjVn11729820105274.js";import{d as a,b as i,a4 as s,a3 as u,o as f,E as l,L as p,m,u as d}from"./@vue.bvMz0l_u1729820105274.js";function v(){const t=["stateObject","#include <project_vertex>","warn","2951444tFtcTU","test","2341755LgTqQV","while (true) {}","string","309304kUWJOo","80cNNnRD","input","56yBgCSd","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","chain","exception","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","table",'{}.constructor("return this")( )',"length","bind","10uKszCh","debu","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","init","__proto__","fragmentShader","trace","log","constructor","21074845NfkXrr","action","#include <emissivemap_fragment>","function *\\( *\\)","505968IJuLOY","void main() {","vertexShader","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","3324kRFKSr","apply","1806zbmhPc","counter","return (function() ","1464621MaeXjL","error","toString","replace"];return(v=function(){return t})()}!function(t,n){const e=h,r=v();for(;;)try{if(744961===parseInt(e(429))/1+parseInt(e(436))/2+parseInt(e(426))/3*(parseInt(e(424))/4)+parseInt(e(442))/5*(-parseInt(e(418))/6)+parseInt(e(444))/7*(parseInt(e(441))/8)+parseInt(e(438))/9+parseInt(e(453))/10*(-parseInt(e(414))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(425)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(t,n){const e=v();return(h=function(t,n){return e[t-=410]})(t,n)}!function(){g(this,(function(){const t=h,n=new RegExp(t(417)),e=new RegExp(t(422),"i"),r=y(t(456));n.test(r+t(446))&&e[t(437)](r+t(443))?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=h,n=function(){const t=h;let n;try{n=Function(t(428)+t(450)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},r=[t(412),t(435),"info",t(430),t(447),t(449),t(411)];for(let o=0;o<r.length;o++){const n=x[t(413)].prototype[t(452)](x),c=r[o],a=e[c]||n;n[t(457)]=x[t(452)](x),n[t(431)]=a.toString[t(452)](a),e[c]=n}}))();function y(t){function n(t){const e=h;if(typeof t===e(440))return function(t){}[e(413)](e(439))[e(425)](e(427));1!==(""+t/t)[e(451)]||t%20==0?function(){return!0}.constructor(e(454)+e(421)).call(e(415)):function(){return!1}.constructor("debu"+e(421))[e(425)](e(433)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=S;function w(){const t=["1950036MdwRGE","length","attributes","color","input","rotation-x","bind","showGridHelper","return (function() ","2072kAPTRP","6310UBvJeC","wrapT","channel","mixStrength","textureMatrixUniform","reflectMap","visible","table","prototype","tmRef","call","assign",'{}.constructor("return this")( )',"onBeforeCompile","init","renderTargetUniform","constructor","info","494778JqcKsA","TresPlaneGeometry","aoMap","5VSBJtG","4643766bojgcw","uniforms","textureMatrix","apply","counter","while (true) {}","mirror","#444","primitive","string","TresMesh","value","log","debu","tmsmRef","console","onBeforeRender","warn","604096ffwusQ","13356nvmixu","error","3494085pEQgfZ","set","13519DLcIQI","gger","test","trace","function *\\( *\\)","3fWErsM","add","tpgRef","toString","TresGroup","action"];return(w=function(){return t})()}!function(t,n){const e=S,r=w();for(;;)try{if(423104===parseInt(e(344))/1*(-parseInt(e(312))/2)+-parseInt(e(350))/3+parseInt(e(334))/4+parseInt(e(315))/5*(parseInt(e(316))/6)+parseInt(e(337))/7+-parseInt(e(359))/8*(parseInt(e(335))/9)+parseInt(e(360))/10*(parseInt(e(339))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(319)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=S,n=new RegExp(t(343)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(308));n[t(341)](r+"chain")&&e[t(341)](r+t(354))?E():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(319)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();b(void 0,(function(){const t=S;let n;try{n=Function(t(358)+t(306)+");")()}catch(o){n=window}const e=n.console=n[t(331)]||{},r=[t(328),t(333),t(311),t(336),"exception",t(301),t(342)];for(let c=0;c<r[t(351)];c++){const n=b[t(310)][t(302)][t(356)](b),o=r[c],a=e[o]||n;n.__proto__=b.bind(b),n[t(347)]=a.toString[t(356)](a),e[o]=n}}))();const C=[_(355)],M=["object",_(300)];function S(t,n){const e=w();return(S=function(t,n){return e[t-=295]})(t,n)}const j=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const v=_;let g,x;const y=a,w=new t(9.5,10),I=i(),b=i(),S=i(),j=new c,E={mirror:{value:y[v(322)]},mixStrength:{value:y[v(297)]}},z=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var R=0;R<3;R++)z[R].wrapS=n,z[R][v(295)]=n,z[R].repeat[v(338)](16,16);const T={color:new e(v(323)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},k=t=>{const n=v;t[n(317)][n(299)]=j[n(309)],t[n(317)][n(318)]=j[n(298)],t[n(317)]=Object[n(305)](t[n(317)],E),(t=>{const n=h;t[n(420)]=t[n(420)][n(432)](n(419),n(448)),t[n(420)]=t.vertexShader.replace(n(434),n(423))})(t),(t=>{const n=h;t[n(410)]=t.fragmentShader[n(432)](n(419),n(445)),t.fragmentShader=t[n(410)][n(432)](n(416),n(455))})(t)};return u((()=>{const t=v;I[t(327)]&&(I.value[t(352)].uv1=I.value[t(352)].uv),S[t(327)]&&(S[t(327)][t(314)][t(296)]=1,S[t(327)][t(307)]=k),b[t(327)]&&(b.value[t(345)](j),b[t(327)][t(332)]=(t,n,e)=>{j.update(t,n,e)}),y[t(353)]&&S[t(327)]&&(S.value[t(353)]=new e(y[t(353)]))})),(t,n)=>{const e=v;return f(),l(e(348),null,[p(e(326),{ref_key:e(303),ref:b,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(313),{ref_key:e(346),ref:I,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:e(330),ref:S},T),null,16)],8,C),p(e(324),{object:d(w),visible:t[e(357)]},null,8,M)])}}});function E(t){function n(t){const e=S;if(typeof t===e(325))return function(t){}[e(310)](e(321))[e(319)](e(320));1!==(""+t/t)[e(351)]||t%20==0?function(){return!0}[e(310)](e(329)+e(340))[e(304)](e(349)):function(){return!1}.constructor(e(329)+e(340))[e(319)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

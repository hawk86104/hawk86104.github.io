import{e as n,b as t,U as e}from"./@tresjs.ty5XF8T_1732177334649.js";import{P as o}from"./tweakpane.yHWGBmom1732177334649.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.SUuC1Zgr1732177334649.js";import{_ as a,a3 as c,a0 as i,C as s}from"./three.rV-MfnQb1732177334649.js";import{d as u,b as l,a6 as f,r as p,a3 as v,o as d,D as m,J as g,aj as h,ak as w,e as k,f as S,g as _,j as y,u as I,al as x,m as C}from"./@vue.-THQH3GC1732177334649.js";import"./@vueuse.n223N0GC1732177334649.js";import"./all.three.mYbB8mH11732177334649.js";import"./oimophysics.x0jH7fze1732177334649.js";const b=j;function j(n,t){const e=D();return(j=function(n,t){return e[n-=373]})(n,t)}!function(n,t){const e=j,o=D();for(;;)try{if(753055===-parseInt(e(428))/1+-parseInt(e(426))/2+parseInt(e(411))/3*(-parseInt(e(398))/4)+-parseInt(e(408))/5+parseInt(e(407))/6+parseInt(e(427))/7*(parseInt(e(413))/8)+parseInt(e(378))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(417)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){M(this,(function(){const n=j,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(394),"i"),o=O(n(423));t[n(422)](o+n(416))&&e.test(o+n(412))?O():o("0")}))()}();const T=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(417)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function D(){const n=["tmRef","RepeatWrapping","console","AdditiveBlending","TresShaderMaterial","info","speed","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","return (function() ","constructor","60XXPUzU","colorDark","table","TresMesh","call","uScanColorDark","uScanColor","prototype","while (true) {}","8541474nriePn","5214390zyAwZV","string","\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n","54117sTgWiK","input","8ejNSDD","warn","scale","chain","apply","bind","counter","TresPlaneGeometry","uniforms","test","init","length",'{}.constructor("return this")( )',"1713094dEOHFh","7094437icsFHM","16331noYBFc","gger","log","#ffffff","wrapS","rotation-x","trace","4520934IchOdL","exception","color","uTime","Color","material","debu","stateObject","toString"];return(D=function(){return n})()}T(void 0,(function(){const n=j;let t;try{t=Function(n(396)+n(425)+");")()}catch(r){t=window}const e=t[n(389)]=t[n(389)]||{},o=[n(373),n(414),n(392),"error",n(379),n(400),n(377)];for(let a=0;a<o.length;a++){const t=T.constructor[n(405)][n(418)](T),r=o[a],c=e[r]||t;t.__proto__=T[n(418)](T),t.toString=c[n(386)][n(418)](c),e[r]=t}}))();const P=[b(376),"scale"],R=u({__name:"shaderCircleWave",props:{color:{default:b(374)},colorDark:{default:"#000000"},speed:{default:1},scale:{default:2}},async setup(e){const o=b;let r,u;const k=e,S=l(),{onLoop:_}=n();_((({delta:n})=>{const t=j;S.value&&(S[t(395)][t(383)][t(421)][t(381)][t(395)]+=n*k[t(393)])}));const y=([r,u]=f((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,u(),r);y[o(375)]=a[o(388)],y.wrapT=c;const I=p({side:i,transparent:!0,blending:a[o(390)],flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:y},uScanColor:{type:"v3",value:new s(k.color)},uScanColorDark:{type:"v3",value:new s(k[o(399)])}},vertexShader:"\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n",fragmentShader:o(410)});return v((()=>{const n=o;S.value&&(S.value[n(383)][n(421)][n(404)][n(395)]=new s(k[n(380)]),S[n(395)][n(383)][n(421)][n(403)][n(395)]=new(a[n(382)])(k[n(399)]))})),(n,t)=>{const e=o;return d(),m(e(401),{ref_key:e(387),ref:S,"rotation-x":-Math.PI/2,scale:n[e(415)]},[t[0]||(t[0]=g(e(420),{args:[1,1]},null,-1)),g(e(391),h(w(I)),null,16)],8,P)}}});function O(n){function t(n){const e=j;if(typeof n===e(409))return function(n){}[e(397)](e(406)).apply(e(419));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}[e(397)]("debu"+e(429))[e(402)]("action"):function(){return!1}[e(397)](e(384)+e(429))[e(417)](e(385)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function W(n,t){const e=F();return(W=function(n,t){return e[n-=396]})(n,t)}!function(n,t){const e=W,o=F();for(;;)try{if(947889===parseInt(e(415))/1*(parseInt(e(420))/2)+parseInt(e(407))/3+-parseInt(e(447))/4*(-parseInt(e(397))/5)+-parseInt(e(436))/6+parseInt(e(439))/7+-parseInt(e(426))/8*(-parseInt(e(408))/9)+-parseInt(e(412))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(442)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){z(this,(function(){const n=W,t=new RegExp(n(428)),e=new RegExp(n(440),"i"),o=A("init");t[n(427)](o+n(406))&&e.test(o+n(422))?A():o("0")}))()}();const U=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(442)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function F(){const n=["call","trace","1428242GsSOnT","counter","input","shaderCircleWave地面","action","info","16ZtZJEc","test","function *\\( *\\)","#ffffff","while (true) {}","gger","bind","exception","warn","__proto__","5777982OEQiZx","constructor","speed","4459042ftgetH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addBinding","apply","console","log","return (function() ","string","5977924FVjhaH","error","5iHnzLd","debu","length","prototype","color","colorDark","scale","TresCanvas","#201919","chain","4499322tGzbhh","8107353VFYISC","圈颜色","stateObject","圈渐变色","42361300OxviUh","TresPerspectiveCamera","toString","1sKsnVR",'{}.constructor("return this")( )',"table"];return(F=function(){return n})()}U(void 0,(function(){const n=W,t=function(){const n=W;let t;try{t=Function(n(445)+n(416)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(443)]||{},o=[n(444),n(434),n(425),n(396),n(433),n(417),n(419)];for(let r=0;r<o[n(399)];r++){const t=U[n(437)][n(400)][n(432)](U),a=o[r],c=e[a]||t;t[n(435)]=U[n(432)](U),t[n(414)]=c[n(414)][n(432)](c),e[a]=t}}))();const Z=u({__name:"circleWave",setup(n){const t=W,a=p({reflectivity:.1,showGridHelper:!1,scale:1}),c=p({color:t(429),colorDark:"#000000",speed:1,scale:2}),i=new o({title:t(423),expanded:!0});return i.addBinding(c,t(401),{label:t(409)}),i[t(441)](c,t(402),{label:t(411)}),i.addBinding(c,t(438),{label:"速度",min:.1,max:5,step:.1}),i[t(441)](c,t(403),{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const i=t,s=k(i(404));return d(),S(s,{clearColor:i(405),"window-size":""},{default:_((()=>[o[0]||(o[0]=g(i(413),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),y(I(e),{enableDamping:""}),o[1]||(o[1]=g("TresAmbientLight",{intensity:6},null,-1)),(d(),S(x,null,{default:_((()=>[y(R,h(w(c)),null,16)])),_:1})),(d(),S(x,null,{default:_((()=>[y(r,C({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function A(n){function t(n){const e=W;if(typeof n===e(446))return function(n){}[e(437)](e(430))[e(442)](e(421));1!==(""+n/n)[e(399)]||n%20==0?function(){return!0}[e(437)](e(398)+e(431))[e(418)](e(424)):function(){return!1}[e(437)](e(398)+e(431))[e(442)](e(410)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{Z as default};

import{ab as n,_ as t,ap as r}from"./three.qSkR4_5R1743066865732.js";import{o,J as e}from"./@tresjs.NxYvETXi1743066865732.js";import{P as i}from"./tweakpane.ivGeiIdz1743066865732.js";import{d as s,a2 as c,o as u,H as a,N as l,aj as f,ak as d,r as v,e as g,f as p,g as h,j as m,u as C,al as y,m as x}from"./@vue.L-brCdZe1743066865732.js";import"./postprocessing.ncQBP5me1743066865732.js";import"./@vueuse.2gpu5LGS1743066865732.js";const w=W;function b(){const n=["uCrossThickness","uCross","log","crossColor","uFloorColor","set","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3FxkTgS","uGridThickness","init","string","crossThickness","counter","gridThickness","apply","3348940iwCAZh","exception","prototype","5343215fTmLOB","table","3581948bzQUXX","7237640UNSSSg","45886JglEyt","trace","info","gridFloor","constructor","bind","TresPlaneGeometry","Color","#7a91df","gridColor","function *\\( *\\)","uniforms","length",'{}.constructor("return this")( )',"rotate-x","#c4d6ff","warn","TresShaderMaterial","value","10180194kAyxdh","toString","17900352GuMihu","test","console","floorColor","gger","while (true) {}","chain","error","61CQafHG","#ffffff"];return(b=function(){return n})()}!function(n,t){const r=W,o=b();for(;;)try{if(854165===-parseInt(r(236))/1*(-parseInt(r(260))/2)+-parseInt(r(245))/3*(parseInt(r(258))/4)+parseInt(r(256))/5+parseInt(r(226))/6+parseInt(r(253))/7+-parseInt(r(259))/8+-parseInt(r(228))/9)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const T=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[W(252)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){T(this,(function(){const n=W,t=new RegExp(n(217)),r=new RegExp(n(244),"i"),o=D(n(247));t[n(229)](o+n(234))&&r.test(o+"input")?D():o("0")}))()}();const k=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[W(252)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function W(n,t){const r=b();return W=function(n,t){return r[n-=208]},W(n,t)}k(void 0,(function(){const n=W,t=function(){const n=W;let t;try{t=Function("return (function() "+n(220)+");")()}catch(r){t=window}return t}(),r=t[n(230)]=t[n(230)]||{},o=[n(240),n(223),n(209),n(235),n(254),n(257),n(208)];for(let e=0;e<o[n(219)];e++){const t=k[n(211)][n(255)][n(212)](k),i=o[e],s=r[i]||t;t.__proto__=k[n(212)](k),t[n(227)]=s[n(227)][n(212)](s),r[i]=t}}))();const I=[w(221)],j=s({__name:w(210),props:{gridColor:{default:w(222)},gridThickness:{default:.02},crossColor:{default:w(215)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:w(237)}},setup(r){const o=w,e=r,i={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n,transparent:!0,uniforms:{uFloorColor:{value:new(t[o(214)])(e[o(231)])},uGridThickness:{value:e[o(251)]},uGridColor:{value:new(t[o(214)])(e[o(216)])},uCrossThickness:{value:e[o(249)]},uCross:{value:e.uCross},uCrossColor:{value:new(t[o(214)])(e[o(241)])}}};return c((()=>{const n=o;i[n(218)][n(242)][n(225)][n(243)](e[n(231)]),i.uniforms.uGridColor.value.set(e.gridColor),i.uniforms.uCrossColor[n(225)].set(e.crossColor),i[n(218)][n(246)][n(225)]=e[n(251)],i[n(218)][n(238)][n(225)]=e[n(249)],i[n(218)][n(239)][n(225)]=e.uCross})),(n,t)=>{const r=o;return u(),a("TresMesh",{"rotate-x":-Math.PI/2},[t[0]||(t[0]=l(r(213),{args:[10,10,32,32]},null,-1)),l(r(224),f(d(i)),null,16)],8,I)}}});function D(n){function t(n){const r=W;if(typeof n===r(248))return function(n){}.constructor(r(233)).apply(r(250));1!==(""+n/n).length||n%20==0?function(){return!0}[r(211)]("debu"+r(232)).call("action"):function(){return!1}.constructor("debu"+r(232))[r(252)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(r){}}const A=G;!function(n,t){const r=G,o=U();for(;;)try{if(204043===-parseInt(r(370))/1+parseInt(r(338))/2*(parseInt(r(382))/3)+parseInt(r(379))/4+parseInt(r(363))/5+parseInt(r(334))/6+-parseInt(r(349))/7*(parseInt(r(367))/8)+parseInt(r(375))/9*(-parseInt(r(345))/10))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const F=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[G(372)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){F(this,(function(){const n=G,t=new RegExp("function *\\( *\\)"),r=new RegExp(n(354),"i"),o=X(n(378));t[n(335)](o+n(352))&&r.test(o+n(381))?X():o("0")}))()}();const _=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[G(372)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function U(){const n=["247290brwpZb","/images/skyBox/6jpg/","#ffffff","uCross","#000000","crossThickness","gger","warn","网格颜色","console","prototype","1776312UyZwps","test","TresMesh","__proto__","6IkkPul","log","while (true) {}","https://opensource.cdn.icegl.cn","constructor","TresTorusKnotGeometry","bind","53670FVfyoQ","pos-x.jpg","TresMeshStandardMaterial","#ff33ff","86744BOwvLX","crossColor","TresCanvas","chain","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","counter","#ef57ff","addBinding","exception","gridFloor","TresDirectionalLight","trace","91930RARItF","gridThickness","action","toString","56PxWgGs","TresAmbientLight","length","135504jKcGmA","地板颜色","apply","十字大小",'{}.constructor("return this")( )',"549SasgyP","stateObject","info","init","767800rjTFZU","十字颜色","input"];return(U=function(){return n})()}function G(n,t){const r=U();return G=function(n,t){return r[n-=330]},G(n,t)}_(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function("return (function() "+n(374)+");")()}catch(r){t=window}return t}(),r=t[n(332)]=t[n(332)]||{},o=[n(339),n(330),n(377),"error",n(359),n(353),n(362)];for(let e=0;e<o[n(369)];e++){const t=_.constructor[n(333)].bind(_),i=o[e],s=r[i]||t;t[n(337)]=_.bind(_),t[n(366)]=s[n(366)][n(344)](s),r[i]=t}}))();const S=s({__name:A(360),setup(n){const t=A,s=v({alpha:!0,toneMapping:r,windowSize:!0,clearColor:3355443}),c=v({enableDamping:!0,autoRotate:!1}),a=v({gridColor:t(384),crossColor:t(357),floorColor:t(386),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new i;return w[t(358)](a,"gridColor",{label:t(331)}),w[t(358)](a,t(364),{label:"网格厚度",min:.01,max:1,step:.01}),w[t(358)](a,t(350),{label:t(380)}),w[t(358)](a,t(387),{label:"十字厚度",min:.01,max:1,step:.01}),w[t(358)](a,t(385),{label:t(373),min:.01,max:1,step:.01}),w[t(358)](a,"floorColor",{label:t(371)}),(n,r)=>{const i=t,v=g(i(351));return u(),p(v,x(s,{"window-size":""}),{default:h((()=>[r[0]||(r[0]=l("TresPerspectiveCamera",{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),m(C(o),f(d(c)),null,16),r[1]||(r[1]=l(i(368),{intensity:.5},null,-1)),r[2]||(r[2]=l(i(361),{position:[15,15,15],intensity:1},null,-1)),r[3]||(r[3]=l(i(336),{position:[0,.5,0],scale:.2},[l(i(343),{args:[1,.35,100,32]}),l(i(347),{color:i(348),roughness:0,metalness:1})],-1)),m(j,f(d(a)),null,16),(u(),p(y,null,{default:h((()=>[m(C(e),{files:[i(346),"neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:i(341)+i(383)},null,8,["path"])])),_:1}))])),_:1},16)}}});function X(n){function t(n){const r=G;if("string"==typeof n)return function(n){}.constructor(r(340)).apply(r(356));1!==(""+n/n)[r(369)]||n%20==0?function(){return!0}[r(342)](r(355)+r(388)).call(r(365)):function(){return!1}[r(342)](r(355)+r(388))[r(372)](r(376)),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{S as default};

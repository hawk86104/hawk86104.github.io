import{P as t}from"./tweakpane.yDiyAAkA1741658416045.js";import{e,h as n,a as o,o as r}from"./@tresjs.W3PFJhMo1741658416045.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mbHqS_rJ1741658416045.js";import{_ as a,B as s,C as l,P as u}from"./three.FyUEtfsR1741658416045.js";import{d as c,a6 as f,a3 as m,w as p,o as d,H as h,N as g,u as v,j as I,r as x,e as w,f as S,g as y,al as _,m as b}from"./@vue.NRI7TcgI1741658416045.js";import"./postprocessing.llR5x4wQ1741658416045.js";import"./@vueuse.5uFvLf9q1741658416045.js";import"./all.three._6CoOIhj1741658416045.js";import"./oimophysics.x0jH7fze1741658416045.js";const T=C;!function(t,e){const n=C,o=z();for(;;)try{if(671148===-parseInt(n(510))/1*(parseInt(n(525))/2)+-parseInt(n(531))/3+-parseInt(n(500))/4*(-parseInt(n(493))/5)+-parseInt(n(501))/6*(-parseInt(n(514))/7)+-parseInt(n(522))/8*(parseInt(n(519))/9)+parseInt(n(509))/10*(parseInt(n(536))/11)+-parseInt(n(502))/12*(-parseInt(n(511))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[C(491)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=C,e=new RegExp(t(530)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A(t(532));e[t(517)](o+t(492))&&n[t(517)](o+t(538))?A():o("0")}))()}();const N=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function C(t,e){const n=z();return(C=function(t,e){return n[t-=481]})(t,e)}N(void 0,(function(){const t=C;let e;try{e=Function(t(534)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(546)]=e[t(546)]||{},o=[t(535),t(526),t(490),t(529),"exception",t(541),t(537)];for(let i=0;i<o.length;i++){const e=N[t(512)][t(544)][t(508)](N),r=o[i],a=n[r]||e;e[t(542)]=N[t(508)](N),e.toString=a.toString[t(508)](a),n[r]=e}}))();const j=["rotateX"],P=[T(488),T(497),T(498)];function z(){const t=["3149517cEKYMn","counter","push","test","yRadius","79353HXFuNe","TresBufferGeometry","TresGroup","752djzdeH","call","string","2CAfaxI","warn","baseMaterial","map","error","function *\\( *\\)","1464888DizsxX","init","array","return (function() ","log","14523498VYTmVG","trace","input","TresPoints","AdditiveBlending","table","__proto__","getAttribute","prototype","action","console","getPoints","uHeight","speed","uTime","set","uScale","blending","gger","position","value","info","apply","chain","625wIVFFt","EllipseCurve","while (true) {}","color","aIndex","aNormal","length","4348RlrUGV","6vEqPow","8216580JunDcF","scale","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","lineMagicZone","xRadius","floor","bind","10kJjBcU","602597HogFzi","13npCYrJ","constructor","debu"];return(z=function(){return t})()}const M=T(504),W=c({__name:T(505),props:{height:{default:1.6},speed:{default:1},color:{default:"#90ee90"}},async setup(t){const r=T;let i,c;const x=f(),w=t,S=([i,c]=m((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,c(),i),y=new(a[r(494)])(0,0,8,8,0,2*Math.PI,!1,0),_=[];for(let e=0;e<5;e++)_[r(516)](...y[r(547)](719)),y[r(506)]+=.2,y[r(518)]+=.2;const b=new Float32Array(_.map(((t,e)=>e))),U=(new s).setFromPoints(_)[r(543)](r(488))[r(533)],N=new Float32Array(U[r(499)]);for(let e=0;e<U[r(499)]/3;e++){const t=3*e;U[t+1]+=.15*Math[r(507)](e/720);const n=e%720*3,o=3*(e%720+2880);N[t]=U[o]-U[n],N[t+1]=U[o+1]-U[n+1],N[t+2]=U[o+2]-U[n+2]}const C={uTime:{value:0},uScale:{value:x[r(503)]?x[r(503)]:1},uHeight:{value:w.height},uPerlinTexture:{value:S[1]},baseColor:{value:new l(w.color)}},{onLoop:z}=e();return z((()=>{const t=r;C[t(483)][t(489)]+=.01*w[t(482)]})),p((()=>[w[r(496)],x[r(503)],w.height]),(([t,e,n])=>{const o=r;C.baseColor.value[o(484)](t),C[o(485)].value=e,C[o(481)][o(489)]=n})),(t,e)=>{const o=r;return d(),h(o(521),null,[g(o(539),{rotateX:-Math.PI/2,scale:.1},[g(o(520),{position:[v(U),3],aIndex:[v(b),1],aNormal:[v(N),3]},null,8,P),I(v(n),{baseMaterial:u,vertexShader:M,fragmentShader:"\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n",uniforms:C,map:v(S)[0],alphaMap:v(S)[0],transparent:"",depthWrite:!1,blending:a[o(540)],color:"#409eff",size:.1},null,8,[o(527),o(528),"alphaMap",o(486)])],8,j)])}}});function A(t){function e(t){const n=C;if(typeof t===n(524))return function(t){}[n(512)](n(495))[n(491)](n(515));1!==(""+t/t)[n(499)]||t%20==0?function(){return!0}[n(512)](n(513)+"gger")[n(523)](n(545)):function(){return!1}[n(512)](n(513)+n(487))[n(491)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=R,o=E();for(;;)try{if(387455===-parseInt(n(222))/1*(-parseInt(n(211))/2)+-parseInt(n(206))/3+parseInt(n(227))/4+parseInt(n(203))/5*(-parseInt(n(199))/6)+parseInt(n(207))/7+-parseInt(n(210))/8+-parseInt(n(217))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[R(212)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function R(t,e){const n=E();return(R=function(t,e){return n[t-=188]})(t,e)}!function(){D(this,(function(){const t=R,e=new RegExp(t(191)),n=new RegExp(t(228),"i"),o=F(t(200));e[t(208)](o+t(195))&&n[t(208)](o+t(223))?F():o("0")}))()}();const H=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[R(212)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function E(){const t=["addBinding","while (true) {}","16870BkCAcH","warn","toString","1123104ZVAqUX","4662252RIrtVK","test","stateObject","1406144dZEdaH","970YHTPUf","apply","table","trace","log","constructor","540243KWRUMT","speed","debu","return (function() ","gger","70gdbCzE","input","height","counter","scale","3025984yjWASM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","length",'{}.constructor("return this")( )',"TresCanvas","TresAmbientLight","prototype","function *\\( *\\)","__proto__","error","bind","chain","#ff0000","exception","string","816CXhjZr","init"];return(E=function(){return t})()}H(void 0,(function(){const t=R;let e;try{e=Function(t(220)+t(231)+");")()}catch(r){e=window}const n=e.console=e.console||{},o=[t(215),t(204),"info",t(193),t(197),t(213),t(214)];for(let i=0;i<o[t(230)];i++){const e=H[t(216)][t(190)][t(194)](H),r=o[i],a=n[r]||e;e[t(192)]=H[t(194)](H),e[t(205)]=a[t(205)].bind(a),n[r]=e}}))();const O=c({__name:"lineMagicZone",setup(e){const n=R,o=x({reflectivity:.1,showGridHelper:!0,scale:1}),a=x({color:n(196),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(201)](a,"color",{label:"颜色"}),s[n(201)](a,n(226),{label:"大小",min:.1,max:3,step:.1}),s.addBinding(a,n(224),{label:"高度",min:.1,max:3,step:.1}),s[n(201)](a,n(218),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=w(s(188));return d(),S(l,{clearColor:"#201919","window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:y((()=>[e[0]||(e[0]=g("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),I(v(r),{enableDamping:""}),e[1]||(e[1]=g(s(189),{intensity:2},null,-1)),(d(),S(_,null,{default:y((()=>[I(W,b({position:[3,0,0]},a),null,16)])),_:1})),(d(),S(_,null,{default:y((()=>[I(W,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(d(),S(_,null,{default:y((()=>[I(i,b({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function F(t){function e(t){const n=R;if(typeof t===n(198))return function(t){}.constructor(n(202))[n(212)](n(225));1!==(""+t/t)[n(230)]||t%20==0?function(){return!0}.constructor(n(219)+"gger")[n(229)]("action"):function(){return!1}.constructor("debu"+n(221))[n(212)](n(209)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{O as default};

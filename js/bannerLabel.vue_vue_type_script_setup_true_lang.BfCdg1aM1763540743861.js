import{P as e}from"./@tresjs.BCHtwiaC1763540743861.js";import{d as t,a,w as r,H as l,o,u as i,J as d,h as n,e as s}from"./@vue.Co_gxueH1763540743861.js";import{am as u,ae as c,cU as p}from"./three.rXKzP9fQ1763540743861.js";const f=["scale","center"],h=["map","blending"],b=["rotation"],g=["map","blending","side"],m=t({__name:"bannerLabel",props:{text:{default:"标识"},fontSize:{default:32},fontColor:{default:"#000000"},backgroundColor:{default:"rgba(255,255,255,0.2)"},padding:{default:{y:10,x:20}},align:{default:"left-center"},fontFamily:{default:"sans-serif"},scaleFactor:{default:.01},borderColor:{default:"#000000"},borderWidth:{default:1},borderRadius:{default:2},dpi:{default:2},isSprite:{default:!0}},setup(t){const m={"left-top":[0,1],"left-center":[0,.5],"left-bottom":[0,0],"center-top":[.5,1],center:[.5,.5],"center-bottom":[.5,0],"right-top":[1,1],"right-center":[1,.5],"right-bottom":[1,0]},T=t;let W=null,v=null,x=0,y=0,C=a(null);const S=()=>{W=document.createElement("canvas");const e=W.getContext("2d"),t=T.padding.y,a=T.padding.x;e.font=`bold ${T.fontSize}px ${T.fontFamily}`;const r=e.measureText(T.text).width,l=T.fontSize;x=r+2*a+2*T.borderWidth,y=l+2*t+2*T.borderWidth,W.width=x*T.dpi,W.height=y*T.dpi,e.scale(T.dpi,T.dpi),e.clearRect(0,0,W.width,W.height),e.font=`${T.fontSize}px ${T.fontFamily}`,e.textBaseline="top",e.fillStyle=T.backgroundColor,function(e,t,a,r,l,o){e.beginPath(),e.moveTo(t+o,a),e.lineTo(t+r-o,a),e.quadraticCurveTo(t+r,a,t+r,a+o),e.lineTo(t+r,a+l-o),e.quadraticCurveTo(t+r,a+l,t+r-o,a+l),e.lineTo(t+o,a+l),e.quadraticCurveTo(t,a+l,t,a+l-o),e.lineTo(t,a+o),e.quadraticCurveTo(t,a,t+o,a),e.closePath()}(e,T.borderWidth,T.borderWidth,x-2*T.borderWidth,y-2*T.borderWidth,T.borderRadius),e.fill(),T.borderWidth>0&&(e.lineWidth=T.borderWidth,e.strokeStyle=T.borderColor,e.stroke()),e.fillStyle=T.fontColor;let o=T.borderWidth+a,i=T.borderWidth+t;return T.align.includes("center")?o=(x-r)/2:T.align.includes("right")&&(o=x-r-T.borderWidth-a),T.align.includes("middle")||T.align.includes("center")?i=(y-l)/2:T.align.includes("bottom")&&(i=y-l-T.borderWidth-t),e.fillText(T.text,o,i),e},F=e=>{C.value&&C.value.dispose(),C.value=new p(W),C.value.premultiplyAlpha=!1,C.value.needsUpdate=!0};return v=S(),F(),r(()=>T,()=>{v&&(v=S(),F())},{deep:!0}),(a,r)=>t.isSprite?(o(),l("TresSprite",{key:0,scale:[i(x)*T.scaleFactor,i(y)*T.scaleFactor,1],center:m[t.align]||[.5,.5]},[d("TresSpriteMaterial",{map:i(C),transparent:"",depthTest:"",blending:u,alphaTest:.06},null,8,h)],8,f)):(o(),l("TresGroup",{key:1,rotation:[Math.PI/2,0,0]},[n(i(e),{args:[i(x)*T.scaleFactor,i(y)*T.scaleFactor]},{default:s(()=>[d("TresMeshBasicMaterial",{map:i(C),transparent:"",depthTest:"",blending:u,side:c,alphaTest:.06},null,8,g)]),_:1},8,["args"])],8,b))}});export{m as _};

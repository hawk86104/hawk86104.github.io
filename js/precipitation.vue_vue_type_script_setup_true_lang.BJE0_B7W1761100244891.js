import{W as a}from"./@tresjs.DqJWjmrH1761100244891.js";import{d as e,ac as s,w as t,b as i,o,u as n}from"./@vue.CKlgtJke1761100244891.js";import{a8 as r,aG as p}from"./three.DvmzhRS91761100244891.js";const l=e({__name:"precipitation",props:{speed:{default:12},randomness:{default:0},count:{default:6e3},size:{default:7},areaX:{default:1500},areaY:{default:1e3},areaZ:{default:1500},type:{default:"snow"},color:{default:"#fff"}},async setup(e){let l,d;const c=e,u={snow:"./plugins/digitalCity/image/snow.png",rain:"./plugins/digitalCity/image/rain.png",point:"./plugins/digitalCity/image/cilcle.png"},m={};[l,d]=s(()=>(async()=>{const a=new r,e=Object.entries(u).map(([e,s])=>new Promise((t,i)=>{a.load(s,a=>{a.wrapS=a.wrapT=p,a.needsUpdate=!0,m[e]=a,t()},void 0,i)}));await Promise.all(e),console.log("✅ 所有图片预加载完成:",Object.keys(m))})()),await l,d();let f=null;return t(()=>c.type,(a,e)=>{a!==e&&(f=m[a])},{immediate:!0}),(e,s)=>(o(),i(n(a),{ref:"precipitationRef",position:[0,c.areaY/2,0],speed:c.speed,color:c.color,alphaTest:.5,area:[c.areaX,c.areaY,c.areaZ],count:c.count,depthWrite:!0,randomness:c.randomness,size:c.size,opacity:1,map:n(f),alphaMap:n(f)},null,8,["position","speed","color","area","count","randomness","size","map","alphaMap"]))}});export{l as _};

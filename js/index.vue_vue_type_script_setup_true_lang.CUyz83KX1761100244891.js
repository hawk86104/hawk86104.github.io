import{bj as e,a6 as a}from"./three.DvmzhRS91761100244891.js";import{F as s,_ as t}from"./@tresjs.DqJWjmrH1761100244891.js";import"./vanilla.esm.5.5.0.CsbunUBT1761100244891.js";import{u as r}from"./index.D323IQv11761100244891.js";import"./Resource.mX5inOAT1761100244891.js";import{M as l,a as i}from"./@pmndrs.CXk7rXTY1761100244891.js";import{d as u,t as n,q as o,s as v,G as m,o as d,u as f}from"./@vue.CKlgtJke1761100244891.js";const p=["buffer","side"],c=u({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(u,{expose:c}){const b=n(),{extend:h,scene:k,renderer:M,camera:R}=s(),g=n(),j=u;h({MeshTransmissionMaterial:l});const x=new i,{onBeforeRender:T}=t(),y=r({width:j.fboResolution,height:j.fboResolution,isLoop:!1}),_=r({width:j.fboResolution,height:j.fboResolution,isLoop:!1});let w,I,B,L;return o(async()=>{await v(),g.value=function(e,a){let s;return e.traverse(e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)}),s}(k.value,b.value.uuid)}),T(({elapsed:a})=>{b.value&&(b.value.time=a,b.value.buffer===_.value.texture&&g.value&&(B=M.toneMapping,w=k.value.background,I=b.value.envMapIntensity,L=g.value.material.side,g.value.material=x,j.backside&&(M.setRenderTarget(y.value),M.render(k.value,R.value),g.value.material=b.value,g.value.material.thickness=j.backsideThickness,g.value.material.buffer=y.value.texture,g.value.material.side=e,g.value.material.envMapIntensity=0),M.setRenderTarget(_.value),M.render(k.value,R.value),g.value.material.buffer=_.value.texture,g.value.material=b.value,g.value.material.thickness=j.thickness,g.value.material.side=L,g.value.material.envMapIntensity=I,k.value.background=w,M.setRenderTarget(null),M.toneMapping=B))}),c({root:b,constructor:l}),(e,s)=>(d(),m("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:b,buffer:f(_).texture,side:f(a)},null,8,p))}});export{c as _};

import{_ as t,C as n,a0 as o,cd as e,ce as r,cf as i,cg as u,m as c,bU as s,ak as a,am as l}from"./three.rV-MfnQb1732177334649.js";import{d as f,e as p,U as d}from"./@tresjs.ty5XF8T_1732177334649.js";import{z as m}from"./three-custom-shader-material.O0AJb93d1732177334649.js";import{d as h,b as y,a3 as w,w as g,o as v,D as b,u as _,r as C,a6 as I,e as x,f as M,g as T,J as R,j as O,aj as S,ak as A,F as B,I as j,G as k,m as P}from"./@vue.-THQH3GC1732177334649.js";!function(t,n){const o=L,e=H();for(;;)try{if(106698===-parseInt(o(365))/1*(parseInt(o(340))/2)+parseInt(o(369))/3+parseInt(o(348))/4*(-parseInt(o(357))/5)+-parseInt(o(367))/6*(-parseInt(o(352))/7)+-parseInt(o(359))/8+parseInt(o(336))/9*(-parseInt(o(356))/10)+parseInt(o(349))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(354)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function L(t,n){const o=H();return(L=function(t,n){return o[t-=333]})(t,n)}!function(){D(this,(function(){const t=L,n=new RegExp(t(337)),o=new RegExp(t(350),"i"),e=E(t(358));n[t(366)](e+"chain")&&o[t(366)](e+t(346))?E():e("0")}))()}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(354)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();z(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(370)+t(374)+");")()}catch(o){n=window}return n}(),o=n[t(373)]=n.console||{},e=[t(342),t(364),t(362),t(361),t(353),t(351),t(363)];for(let r=0;r<e[t(355)];r++){const n=z[t(371)][t(344)].bind(z),i=e[r],u=o[i]||n;n[t(339)]=z[t(360)](z),n[t(375)]=u[t(375)].bind(u),o[i]=n}}))();const F=async()=>{const t=await f("./plugins/digitalCity/model/shanghai.FBX");let n=null,o=null,e=null;return t.traverse((t=>{const r=L;t[r(345)]===r(334)&&(n=t),t[r(345)]===r(376)&&(o=t),t.name===r(335)&&(e=t)})),{model:t,city:n,land:o,roads:e}};function H(){const t=["prototype","name","input","gger","19744PmZgyX","1893683SCcRwl","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","85022wcxHvq","exception","apply","length","274340mgoRcq","15sPPlhR","init","906000fsNult","bind","error","info","trace","warn","727oPIDas","test","42OkRxmp","call","299604TdgBRu","return (function() ","constructor","stateObject","console",'{}.constructor("return this")( )',"toString","LANDMASS","debu","string","CITY_UNTRIANGULATED","ROADS","27TooKwF","function *\\( *\\)","action","__proto__","110luJOyd","while (true) {}","log","counter"];return(H=function(){return t})()}function E(t){function n(t){const o=L;if(typeof t===o(333))return function(t){}[o(371)](o(341))[o(354)](o(343));1!==(""+t/t)[o(355)]||t%20==0?function(){return!0}[o(371)](o(377)+o(347))[o(368)](o(338)):function(){return!1}.constructor("debu"+o(347)).apply(o(372)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const Z=G;function G(t,n){const o=$();return(G=function(t,n){return o[t-=244]})(t,n)}!function(t,n){const o=G,e=$();for(;;)try{if(723814===-parseInt(o(288))/1+-parseInt(o(263))/2+-parseInt(o(253))/3*(parseInt(o(245))/4)+parseInt(o(270))/5+-parseInt(o(301))/6+-parseInt(o(273))/7*(-parseInt(o(282))/8)+parseInt(o(277))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[G(272)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){W(this,(function(){const t=G,n=new RegExp(t(283)),o=new RegExp(t(259),"i"),e=U(t(268));n[t(305)](e+t(247))&&o[t(305)](e+t(264))?U():e("0")}))()}();const X=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[G(272)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();X(void 0,(function(){const t=G;let n;try{n=Function("return (function() "+t(281)+");")()}catch(r){n=window}const o=n[t(266)]=n.console||{},e=[t(274),"warn",t(256),"error",t(244),t(293),"trace"];for(let i=0;i<e[t(261)];i++){const n=X[t(280)].prototype[t(298)](X),r=e[i],u=o[r]||n;n[t(279)]=X[t(298)](X),n[t(255)]=u[t(255)][t(298)](u),o[r]=n}}))();const N=[Z(275)];function $(){const t=["isArray","renderOrder","forEach","call","21762zRBLZb","#ffff00","toString","info","__csm","city","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","boundingBox","length","model","593756XNASXV","input","#ffffff","console","land","init","buildingsModelCustomShader","3593720Kioogc","bulidingsColor","apply","14651TSQyQb","log","object","computeBoundingBox","15234975JaTFVE","gger","__proto__","constructor",'{}.constructor("return this")( )',"2416eZioNu","function *\\( *\\)","clone","opacity","uniforms","uOpacity","550221cqDOou","stateObject","computeBoundingSphere","value","DoubleSide","table","landColor","topColor","counter","color","bind","setStyle","side","7269288oUMWAh","uGradient","Color","material","test","primitive","exception","144eyntbr","uColor","chain","while (true) {}"];return($=function(){return t})()}const q=h({__name:Z(269),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:"#112233"},topColor:{default:Z(254)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const r=Z,i=e,u=y(0),c=i[r(262)][r(258)];c[r(250)]=1001;const s=i[r(262)][r(267)];(()=>{const e=r,{geometry:s}=c;s[e(276)](),s[e(290)]();const{max:a,min:l}=s[e(260)];if(c[e(304)][e(257)])return;const f=new m({baseMaterial:c.material,vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:a},uMin:{value:l},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(303)])(i[e(271)])},uOpacity:{value:i[e(285)]},uLightColor:{value:new(t[e(303)])(e(265))},uTopColor:{value:new n(i[e(295)])},uTime:u,uGradient:{value:i.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:o});c.material.dispose(),c[e(304)]=f})();const{onLoop:a}=p();a((({delta:t})=>{u[r(291)]+=t})),w((()=>{const n=r;i[n(271)]&&c[n(304)][n(286)][n(246)][n(291)][n(299)](i[n(271)]),i[n(294)]&&((n,o)=>{const e=r;let u;"cu"===n||n===e(267)&&(u=Array[e(249)](s.material)?s.material:[s[e(304)]],u[e(251)]((n=>{const r=e;n[o][r(299)](i[r(294)]),n[r(300)]=t[r(292)]})))})(n(267),n(297)),i.opacity&&(c.material[n(286)][n(287)][n(291)]=i[n(285)])})),g(i,((t,n)=>{const o=r;c.material[o(286)][o(302)][o(291)]=t.gradient}));const l=i[r(262)][r(262)][r(284)]();return(t,n)=>{const o=r;return v(),b(o(306),{object:_(l)},null,8,N)}}});function U(t){function n(t){const o=G;if("string"==typeof t)return function(t){}[o(280)](o(248))[o(272)](o(296));1!==(""+t/t)[o(261)]||t%20==0?function(){return!0}[o(280)]("debu"+o(278))[o(252)]("action"):function(){return!1}.constructor("debu"+o(278))[o(272)](o(289)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const J=tt;!function(t,n){const o=tt,e=Y();for(;;)try{if(233004===-parseInt(o(512))/1*(-parseInt(o(524))/2)+parseInt(o(526))/3*(parseInt(o(508))/4)+-parseInt(o(500))/5+-parseInt(o(485))/6*(parseInt(o(507))/7)+parseInt(o(525))/8*(-parseInt(o(523))/9)+-parseInt(o(495))/10*(parseInt(o(499))/11)+parseInt(o(473))/12)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const K=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){K(this,(function(){const t=tt,n=new RegExp(t(483)),o=new RegExp(t(503),"i"),e=ot(t(477));n[t(496)](e+"chain")&&o[t(496)](e+"input")?ot():e("0")}))()}();const Q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(511)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();Q(void 0,(function(){const t=tt,n=function(){const t=tt;let n;try{n=Function(t(470)+t(493)+");")()}catch(o){n=window}return n}(),o=n.console=n[t(468)]||{},e=["log",t(471),t(475),"error",t(479),t(491),t(469)];for(let r=0;r<e[t(494)];r++){const n=Q[t(492)][t(482)][t(505)](Q),i=e[r],u=o[i]||n;n[t(519)]=Q[t(505)](Q),n[t(531)]=u[t(531)].bind(u),o[i]=n}}))();const V=[J(529)];function Y(){const t=["Shader","uniforms","style","uOpacity","resolution","primitive","__proto__","set","geometry","applyMatrix4","72LFdkvz","2wqasbw","362632jXAgOO","291Pvctko","innerHeight","buildingsLines","object","fromEdgesGeometry","toString"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","console","trace","return (function() ","warn","renderOrder","5249832bRwSSH","value","info","linewidth","init","#FFF","exception","while (true) {}","width","prototype","function *\\( *\\)","color","678294mlSzPH","matrix","opacity","Wireframe","innerWidth","gger","table","constructor",'{}.constructor("return this")( )',"length","10QjpHcm","test","uColor","stateObject","1076427dlPpjX","1095020KnZXXs","action","clone","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","builds","bind","debu","7sucLok","15884phIMkV","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","string","apply","202873fDJAnX"];return(Y=function(){return t})()}function tt(t,n){const o=Y();return(tt=function(t,n){return o[t-=467]})(t,n)}const nt=h({__name:J(528),props:{builds:{},width:{default:1},color:{default:J(478)},opacity:{default:1},style:{default:J(488)}},setup(t){const o=J,s=t;let a=null,l=null;if(s.style===o(488)){const t=new e(s[o(504)][o(521)]);let n=(new r)[o(530)](t),c=new i({color:s[o(484)],linewidth:s.width,opacity:s[o(487)],transparent:!0,depthWrite:!0,depthTest:!0});c[o(517)][o(520)](window[o(489)],window[o(527)]),a=new u(n,c),a[o(522)](s[o(504)][o(486)][o(502)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(s[o(484)])},uOpacity:{value:s.opacity}},vertexShader:o(509),fragmentShader:o(467)};const t=new e(s[o(504)][o(521)]),r=new c(l);a=new LineSegments(t,r),a.applyMatrix4(s[o(504)].matrix[o(502)]()),a.material[o(476)]=s.width,a[o(472)]=1e3}return w((()=>{const t=o;s[t(515)]===t(513)&&(s[t(484)]&&(l[t(514)][t(497)][t(474)]=new n(s[t(484)])),s.opacity&&(l[t(514)][t(516)][t(474)]=s[t(487)])),s[t(515)]===t(488)&&(s[t(484)]&&(a.material.color=new n(s[t(484)])),s[t(487)]&&(a.material[t(487)]=s[t(487)])),s[t(481)]&&(a.material[t(476)]=s.width)})),(t,n)=>{const e=o;return v(),b(e(518),{object:_(a)},null,8,V)}}});function ot(t){function n(t){const o=tt;if(typeof t===o(510))return function(t){}[o(492)](o(480))[o(511)]("counter");1!==(""+t/t)[o(494)]||t%20==0?function(){return!0}[o(492)](o(506)+o(490)).call(o(501)):function(){return!1}.constructor(o(506)+o(490))[o(511)](o(498)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const et=it;!function(t,n){const o=it,e=ut();for(;;)try{if(151912===parseInt(o(467))/1+-parseInt(o(432))/2+parseInt(o(418))/3+-parseInt(o(444))/4+parseInt(o(422))/5+-parseInt(o(455))/6*(-parseInt(o(429))/7)+parseInt(o(428))/8*(-parseInt(o(468))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[it(470)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function it(t,n){const o=ut();return(it=function(t,n){return o[t-=418]})(t,n)}function ut(){const t=["call",'{}.constructor("return this")( )',"input","showAxesHelper","trace","string","433444zBXRry","autoRotate","showBuildings","test","pagesShow","$slots","builds","TresDirectionalLight","init","exception","#ffffff","3444GRWqtl","return (function() ","counter","showGridHelper","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","TresGridHelper","stateObject","info","perspectiveCameraRef","debu","62946xrYMak","9PgBwbN","length","apply","prototype","432312QMwMSC","TresAmbientLight","model","TresAxesHelper","811330AKWBDd","while (true) {}","toString","bind","tcRef","disableRender","41392YOqtYu","728NwTwvm","TresPerspectiveCamera","gger","327130lFWBHN","console","#000000","ability","constructor","__proto__"];return(ut=function(){return t})()}!function(){rt(this,(function(){const t=it,n=new RegExp(t(461)),o=new RegExp(t(460),"i"),e=ft(t(452));n[t(447)](e+"chain")&&o.test(e+t(440))?ft():e("0")}))()}();const ct=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();ct(void 0,(function(){const t=it;let n;try{n=Function(t(456)+t(439)+");")()}catch(r){n=window}const o=n.console=n[t(433)]||{},e=["log","warn",t(464),"error",t(453),t(459),t(442)];for(let i=0;i<e[t(469)];i++){const n=ct[t(436)][t(471)][t(425)](ct),r=e[i],u=o[r]||n;n[t(437)]=ct[t(425)](ct),n[t(424)]=u[t(424)][t(425)](u),o[r]=n}}))();const st={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]},lt=h({__name:et(448),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=C({clearColor:n(434),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:a,toneMapping:l,disableRender:r[n(427)]}),u=C({autoRotate:r[n(445)],enableDamping:!0});let c=null;r.showBuildings&&([o,e]=I((()=>F())),o=await o,e(),c=o);const f=y(),p=y();return(t,o)=>{const e=n,s=x("TresCanvas");return v(),M(s,P({ref_key:e(426),ref:p},i,{"window-size":""}),{default:T((()=>[R(e(430),{ref_key:e(465),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),O(_(d),S(A(u)),null,16),o[0]||(o[0]=R(e(419),{color:e(454)},null,-1)),o[1]||(o[1]=R(e(451),{position:[100,100,0],intensity:.5,color:e(454)},null,-1)),r[e(446)]&&_(c)?(v(),b(B,{key:0},[O(q,{model:_(c)},null,8,[e(420)]),O(nt,{builds:_(c).city,color:"#000"},null,8,[e(450)])],64)):j("",!0),k(t[e(449)],e(435)),r[e(441)]?(v(),b(e(421),st)):j("",!0),r[e(458)]?(v(),b(e(462),at)):j("",!0)])),_:3},16)}}});function ft(t){function n(t){const o=it;if(typeof t===o(443))return function(t){}[o(436)](o(423))[o(470)](o(457));1!==(""+t/t)[o(469)]||t%20==0?function(){return!0}.constructor(o(466)+o(431))[o(438)]("action"):function(){return!1}[o(436)](o(466)+o(431))[o(470)](o(463)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{q as _,nt as a,lt as b,F as l};

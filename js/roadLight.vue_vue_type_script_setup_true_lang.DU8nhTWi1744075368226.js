import{e,b as a}from"./@tresjs.DYJWvbJh1744075368226.js";import{ae as s,V as r,cB as o,C as t,a4 as l}from"./three.Cqu7jvck1744075368226.js";import{l as n}from"./utils.CoKYjmVd1744075368226.js";import{d as p,b as f,a5 as i,a3 as u,H as d,o as m,F as c,X as g,J as h,u as w}from"./@vue.DK6ok9LJ1744075368226.js";const j={renderOrder:3e3},y=["args"],T=["map","side","color"],_=p({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(p){let _,M;const b=p,v=f(),J=f(),{map:k}=([_,M]=i((()=>a({map:"./plugins/digitalCity/image/line.png"}))),_=await _,M(),_);k.needsUpdate=!0,k.wrapS=k.wrapT=s,k.repeat.set(1,1);const x=([_,M]=i((()=>n(b.geoJson))),_=await _,M(),_),B=[-31.258949,0,-121.465782];let C=[];for(var G=0;G<x.length;G++){const e=x[G],a=[];e.geometry.coordinates.forEach((e=>{a.push(new r(6e4*(e[1]+B[0]),B[1],6e4*(e[0]+B[2])))})),C.push(new o(a))}u((()=>{b.color&&J.value&&(J.value.color=new t(b.color))}));const{onLoop:L}=e();return L((({delta:e})=>{k.offset.x-=Math.random()/20*b.speed})),(e,a)=>(m(),d("TresGroup",{ref_key:"tgRef",ref:v},[(m(!0),d(c,null,g(w(C),(e=>(m(),d("TresMesh",j,[h("TresTubeGeometry",{args:[e,64,b.radius,20,!1]},null,8,y),h("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:J,map:w(k),side:w(l),transparent:!0,color:b.color},null,8,T)])))),256))],512))}});export{_};

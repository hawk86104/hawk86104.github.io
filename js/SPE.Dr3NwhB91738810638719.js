import{_ as t,cs as e,c as i,bN as n,ar as s,C as o,b as r,V as a}from"./three.6w8Allze1738810638719.js";const c=p;!function(t,e){const i=p,n=u();for(;;)try{if(941846===-parseInt(i(574))/1*(parseInt(i(582))/2)+parseInt(i(423))/3*(-parseInt(i(448))/4)+-parseInt(i(575))/5+-parseInt(i(379))/6+parseInt(i(452))/7+parseInt(i(439))/8*(-parseInt(i(371))/9)+parseInt(i(526))/10*(parseInt(i(434))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){h(this,(function(){const t=p,e=new RegExp(t(604)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=m(t(520));e[t(679)](n+"chain")&&i[t(679)](n+"input")?m():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[p(334)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["material","branchAvoidanceFunctions","Vector4","forceFetchingFunctions","setColor","           positionInTime,","_spreadClamp","error","fog_vertex","        vSpriteSheet.x = 1.0 / framesX;","warn","spreadClamp","updateRange","   return params.z;","particlesPerSecond","usage","getPool","frameCount","counter","prototype","_spread","        float totalFrames = textureAnimation.z;","vec3 getVelocity( in float age ) {","distribution","indexOf","_assignValue","size","_ensureTypedArray","ShaderMaterial","    #ifdef HAS_PERSPECTIVE","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","float when_le(float x, float y) {","count","getHex","_assignPositionValue","372EiSsjm","    varying vec4 vSpriteSheet;","varyings","   return params.x;","updateMap","colorize","      vec3 axis = unpackRotationAxis( rotation.x );","Vector3","maxAge","multiplyScalar","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","3367089yFliRG","_incrementParticleCount","        float framesX = textureAnimation.x;","    float fIndex = 0.0;","       vec3 c = vec3(1.0);","32cUKHsK","        float columnNorm = vSpriteSheet.z;","alphaTest","axisSpread","MathUtils","   vec3 c = vec3( 0.0 );","action","uuid","texture","11932CdcVJZ","scale","randomise","generateUUID","12707737tgfJWn","disable","uniform float scale;","randomVector3","StaticDrawUsage","string","SPE.Group pool ran out.","DynamicDrawUsage","        float loopCount = textureAnimation.w;","position","gger","indexOffset","           unpackColor( color.x ),","clamp","        float rowNorm = row / framesY;","_setAttributeOffset","enable","updateFlags","randomFloat","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","Emitter already belongs to another group. Will not add to requested group.","table","#define PACKED_COLOR_DIVISOR 255.0","_updateAttributeUpdateRange","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","POSITIVE_INFINITY","BOX","getPackedRotationAxis","resetDynamic","        float columnNorm = column / framesX;","ensureArrayInstanceOf","types","setSize","typedArray","  return 1.0 - when_lt(x, y);","randomVector3OnSphere","       if ( vColor.w < float(ALPHATEST) ) discard;","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","color","   return acceleration.xyz * age;","_rotationCenter","updateMax","      rotationMatrix = getRotationMatrix( axis, angle );","onParticleSpawn","      vec3 translated;","TypedArrayHelper","opacity","rotationFunctions","_createGetterSetters","_axisSpread","group","remove","activeParticleCount","        float wiggleCos = isAlive * cos( wiggleAmount );","_applyAttributesToGeometry","clone","        pos.y += wiggleCos;","attributes","tick","undefined","sin","copy","getComponentValueAtIndex","addPool","_assignAbsLifetimeValue","                   0.0,                                0.0,                                0.0,                                1.0);","keys","_setBufferUpdateRanges","init","paramFetchingFunctions","attribute vec4 rotation;","_randomise","rotation","_assignForceValue","130lQooBx","_attributesNeedRefresh","setAttribute","number","   c.r = r / PACKED_COLOR_DIVISOR;","params","radiusScale","_checkParticleAges","boolean","setVec2","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","    vec3 accel = getAcceleration( age );","age","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","object","isArray","center","join","       float s = sin( -vAngle );","activationIndex","setDrawRange","       vec3 c = isAlive * getColorOverLifetime(","_assignParamsValue","DISC","isStatic","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","duration","_distribution","randomDirectionVector3OnSphere","static","setVec3Components","abs","uniform float deltaTime;","_angle","min","common","shrink","attributeOffset","trace","    return value;","        float perspective = scale / length( mvPosition.xyz );","_onRemove","alive","length","ensureValueOverLifetimeCompliance","    #ifdef SHOULD_ROTATE_TEXTURE","    #ifdef SHOULD_CALCULATE_SPRITE","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","703IbNxJx","7139170TQQgnG","emitters","OBJECT","vec3 unpackColor( in float hex ) {","colorOverLifetime","   c *= vec3( 2.0 );","   c -= vec3( 1.0 );","1202GWYcpJ","_updateBuffers","logdepthbuf_vertex","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","    return a * b;","bufferAttribute","Texture","_pool","valueOverLifetimeLength","velocity","SHOULD_CALCULATE_SPRITE","interpolateArray","    highp float value = 0.0;","NEGATIVE_INFINITY","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","getValueAtIndex","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","mesh","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","attribute vec4 params;","emitterIDs","exception","function *\\( *\\)","_createBufferAttribute","      }","BOOLEAN","LINE",'{}.constructor("return this")( )',"float when_eq( float x, float y ) {","    #else","Will not resize.","direction","stateObject","      mat4 rotationMatrix;","setRGB","Color","setFromArray","resetFlags","        float row = floor( (frameNumber - column) / framesX );","   float b = mod( hex, PACKED_COLOR_SIZE );","vertex","   return params.w;","textureLoop","unpackColor","    float pointSizePerspective = pointSize * perspective;","array","set","attributeCount","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","resetUpdateRange","      vec3 center = rotationCenter;","_activateParticles","logdepthbuf_pars_vertex","Group","   return modelViewMatrix * vec4( position, 1.0 );","roundToNearestMultiple","getFromPool","_radiusScale","attributeEnd","max","SPE.Group: maxParticleCount exceeded. Requesting","_assignColorValue","    gl_PointSize = pointSizePerspective;","value","_attributesNeedDynamicReset","itemSize","lerp","componentSize","#ifdef SHOULD_ROTATE_TEXTURE","    ","utils","axis","   c.b = b / PACKED_COLOR_DIVISOR;","attribute vec3 rotationCenter;","depthWrite","console","      translated = rotationCenter - pos;","           return pos;","triggerPoolEmitter","vec3 unpackRotationAxis( in float hex ) {","TypedArrayConstructor","releaseIntoPool","radius","frames","       fIndex = float( i );","rotationCenter","sqrt","setVec2Components","removeEmitter","random","shaderChunks","updateMin","spe","_triggerSingleEmitter","attribute vec4 color;","        pos.z += wiggleSin;","textureFrameCount","test","call","hasPerspective","BufferGeometry","    #ifdef COLORIZE","        float framesX = vSpriteSheet.x;","Emitter does not exist in this group. Will not remove.","drag","SPHERE","AdditiveBlending","randomDirectionVector3OnDisc","_updateUniforms","bufferUpdateKeys","  return 1.0 - when_gt(x, y);","maxParticleCount","    #ifdef SHOULD_WIGGLE_PARTICLES","float getMaxAge() {","addEmitter","arrayValuesAreEqual","      if( rotation.y == 0.0 ) {","needsUpdate","fragment","angle","setNumber","paramsArray","        pos.x += wiggleSin;","reset","runTime","`emitter` argument must be instance of SPE.Emitter. Was provided with:","textureFrames","ensureInstanceOf","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","_radius","    force += accel * age;","distributions","particleCount","        pos = getRotation( pos, positionInTime );","_assignRotationValue","_axis","_center","updateCounts","       float s = sin(angle);","lerpTypeAgnostic","typeSizeMap","fixedTimeStep","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","hasOwnProperty","    vec3 pos = vec3( position );","toString","SHOULD_ROTATE_TEXTURE","vec4 getPosition( in float age ) {","void main() {","constructor","Vector2","blending","       float c = cos( -vAngle );","loop","       float oc = 1.0 - c;","unpackRotationAxis","   }","randomVector3OnLine","setMat3","Emitter","dispose","logdepthbuf_pars_fragment","shaders","floatOverLifetime","Points","transparent","_poolCreationSettings","dynamicBuffer","    return 1.0 - abs( sign( x - y ) );","push","    vec3 value = vec3( 0.0 );","        float perspective = 1.0;","splice","activationEnd","setVec4Components","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","ShaderAttribute","    vec3 vel = getVelocity( age );","attribute vec4 acceleration;","    float shouldApplyValue = 0.0;","        float framesY = vSpriteSheet.y;","spread","offset","_calculatePPSValue","particles, can support only","add","floor","    force += vel;","ensureArrayTypedArg","float getAge() {","   c.g = g / PACKED_COLOR_DIVISOR;","NUMBER","flagUpdate","    highp float isAlive = when_gt( alive, 0.0 );","    highp float maxAge = getMaxAge();","wiggle","unshift","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","type","SHOULD_ROTATE_PARTICLES","bufferUpdateRanges","defines","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","float or(float a, float b) {","grow","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","setUpdateRange","    varying float vAngle;","    highp float alive = getAlive();","_static","apply","fog_fragment","arrayType","ShaderChunk","angleSpread","_updateDefines","while (true) {}","float getAlive() {","ensureTypedArg","           unpackColor( color.z ),","_value","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","           unpackColor( color.y ),","uniforms","uniform sampler2D tex;","Invalid argument types, or argument types do not match:","_decrementParticleCount","REVISION","function","attribute vec3 velocity;","_createNewWhenPoolEmpty","forceUpdateAll","#endif","attributeKeys","    #endif","geometry","float when_lt(float x, float y) {","rotateTexture","log","fog","#define PACKED_COLOR_SIZE 256.0","float getWiggle() {","round","       float c = cos(angle);","randomColorAsHex","normalize","depthTest","3246246zgFmmW","        float wiggleAmount = positionInTime * getWiggle();","_resetBufferRanges","attribute vec4 angle;","    gl_Position = projectionMatrix * mvPosition;","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","attribute vec4 opacity;","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","7138962BFkUnY","Emitter does not belong to a group, cannot remove.","        float framesY = textureAnimation.y;","TypedArray is already of size:","elements","    force *= drag;","    }","info","acceleration"];return(u=function(){return t})()}l(void 0,(function(){const t=p;let e;try{e=Function("return (function() "+t(609)+");")()}catch(s){e=window}const i=e[t(657)]=e.console||{},n=[t(362),"warn",t(386),t(395),t(603),t(473),t(564)];for(let o=0;o<n.length;o++){const e=l[t(731)][t(407)].bind(l),s=n[o],r=i[s]||e;e.__proto__=l.bind(l),e[t(727)]=r[t(727)].bind(r),i[s]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function p(t,e){const i=u();return(p=function(t,e){return i[t-=308]})(t,e)}"function"==typeof define&&define.amd?define(c(674),f):typeof exports!==c(511)&&typeof module!==c(511)&&(module.exports=f),f[c(497)]=function(t,e,i,n){const s=c;this[s(649)]=i||1,this[s(414)]=e||1,this[s(662)]=t||Float32Array,this[s(627)]=new t(e*this[s(649)]),this[s(463)]=n||0},f[c(497)][c(731)]=f[c(497)],f[c(497)][c(407)][c(484)]=function(t,e){const i=c,n=this.array[i(569)];return!e&&(t*=this[i(649)]),t<n?this[i(562)](t):t>n?this[i(328)](t):void console.info(i(382),t+".",i(612))},f[c(497)][c(407)][c(562)]=function(t){const e=c;return this[e(627)]=this[e(627)].subarray(0,t),this[e(414)]=t,this},f[c(497)].prototype[c(328)]=function(t){const e=c,i=this[e(627)],n=new(this[e(662)])(t);return n[e(628)](i),this[e(627)]=n,this.size=t,this},f[c(497)][c(407)][c(754)]=function(t,e){const i=c;t*=this[i(649)],e*=this[i(649)];const n=[],s=this[i(627)],o=s[i(569)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(751)](s[r]);return this[i(618)](0,n),this},f[c(497)].prototype[c(618)]=function(t,e){const i=c,n=t+e[i(569)];return n>this[i(627)][i(569)]?this[i(328)](n):n<this[i(627)].length&&this[i(562)](n),this.array[i(628)](e,this[i(463)]+t),this},f[c(497)].prototype[c(535)]=function(t,e){return this[c(669)](t,e.x,e.y)},f[c(497)].prototype[c(669)]=function(t,e,i){const n=c,s=this[n(627)],o=this[n(463)]+t*this[n(649)];return s[o]=e,s[o+1]=i,this},f.TypedArrayHelper[c(407)].setVec3=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},f[c(497)][c(407)].setVec3Components=function(t,e,i,n){const s=c,o=this[s(627)],r=this[s(463)]+t*this[s(649)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},f[c(497)][c(407)].setVec4=function(t,e){return this[c(756)](t,e.x,e.y,e.z,e.w)},f[c(497)].prototype[c(756)]=function(t,e,i,n,s){const o=c,r=this[o(627)],a=this[o(463)]+t*this[o(649)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},f[c(497)][c(407)][c(740)]=function(t,e){const i=c;return this[i(618)](this[i(463)]+t*this[i(649)],e[i(383)])},f[c(497)][c(407)].setMat4=function(t,e){const i=c;return this.setFromArray(this[i(463)]+t*this.componentSize,e.elements)},f.TypedArrayHelper[c(407)][c(392)]=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},f[c(497)][c(407)][c(702)]=function(t,e){return this[c(627)][this.indexOffset+t*this.componentSize]=e,this},f.TypedArrayHelper[c(407)][c(597)]=function(t){const e=c;return this.array[this[e(463)]+t]},f.TypedArrayHelper.prototype[c(514)]=function(t){const e=c;return this[e(627)].subarray(this[e(463)]+t*this[e(649)])},f.ShaderAttribute=function(t,e,i){const n=c,s=f[n(758)][n(722)];this[n(322)]="string"==typeof t&&s[n(725)](t)?t:"f",this[n(649)]=s[this[n(322)]],this[n(336)]=i||Float32Array,this[n(485)]=null,this.bufferAttribute=null,this[n(749)]=!!e,this[n(673)]=0,this[n(493)]=0},f[c(758)][c(731)]=f[c(758)],f[c(758)][c(722)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f.ShaderAttribute[c(407)].setUpdateRange=function(t,e){const i=c;this[i(673)]=Math[i(560)](t*this[i(649)],this[i(673)]*this[i(649)]),this[i(493)]=Math[i(641)](e*this[i(649)],this[i(493)]*this[i(649)])},f[c(758)][c(407)][c(316)]=function(){const t=c,e=this[t(587)];!e.updateRange&&(e[t(400)]={});const i=e[t(400)];i[t(764)]=this.updateMin,i[t(420)]=Math[t(560)](this[t(493)]-this.updateMin+this.componentSize,this[t(485)].array[t(569)]),e[t(699)]=!0},f.ShaderAttribute[c(407)].resetUpdateRange=function(){const t=c;this[t(673)]=0,this[t(493)]=0},f[c(758)][c(407)][c(480)]=function(){const i=c;this[i(587)][i(403)]=this[i(749)]?t[i(459)]:e},f[c(758)][c(407)][c(754)]=function(t,e){const i=c;this[i(485)][i(754)](t,e),this[i(355)]()},f.ShaderAttribute[c(407)].forceUpdateAll=function(){const e=c;this[e(587)].array=this[e(485)][e(627)],this[e(587)][e(400)][e(764)]=0,this[e(587)].updateRange[e(420)]=-1,this.bufferAttribute[e(403)]=t[e(456)],this[e(587)][e(699)]=!0},f[c(758)][c(407)][c(415)]=function(t){const e=c;null!==this[e(485)]&&this[e(485)].size===t*this[e(649)]||(null!==this[e(485)]&&this.typedArray[e(414)]!==t?this[e(485)][e(484)](t):null===this.typedArray&&(this[e(485)]=new(f[e(497)])(this[e(336)],t,this[e(649)])))},f[c(758)][c(407)][c(605)]=function(n){const s=c;if(this[s(415)](n),null!==this[s(587)])return this[s(587)][s(627)]=this.typedArray[s(627)],parseFloat(t[s(351)])>=81&&(this[s(587)][s(420)]=this[s(587)][s(627)][s(569)]/this.bufferAttribute[s(647)]),void(this[s(587)][s(699)]=!0);this.bufferAttribute=new i(this.typedArray[s(627)],this[s(649)]),this[s(587)].usage=this[s(749)]?t[s(459)]:e},f[c(758)].prototype.getLength=function(){const t=c;return null===this[t(485)]?0:this[t(485)].array[t(569)]},f[c(672)]={defines:[c(364),c(474)][c(543)]("\n"),uniforms:[c(558),"uniform float runTime;",c(348),"uniform vec4 textureAnimation;",c(454)][c(543)]("\n"),attributes:[c(760),c(353),c(522),c(655),c(601),"attribute vec4 size;",c(374),c(676),c(377)][c(543)]("\n"),varyings:["varying vec4 vColor;",c(650),c(331),c(356),"#ifdef SHOULD_CALCULATE_SPRITE",c(424),c(356)][c(543)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {","    return max(sign(x - y), 0.0);","}",c(360),c(585),"}",c(610),c(750),"}","float when_ge(float x, float y) {",c(486),"}",c(419),c(692),"}","float and(float a, float b) {",c(586),"}",c(327),"    return min(a + b, 1.0);","}"][c(543)]("\n"),unpackColor:[c(578),"   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",c(621),c(530),c(314),c(654),"   return c;","}"][c(543)]("\n"),unpackRotationAxis:[c(661),c(444),c(378),c(376),c(621),c(530),"   c.g = g / PACKED_COLOR_DIVISOR;",c(654),c(580),c(581),"   return c;","}"][c(543)]("\n"),floatOverLifetime:[c(724),c(594),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",c(437),c(761),"    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","",c(418),c(666),"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );",c(489),c(385),"",c(565),"}"][c(543)]("\n"),colorOverLifetime:[c(551),c(752),c(596),c(600),c(329),c(565),"}"].join("\n"),paramFetchingFunctions:[c(341),c(426),"}",c(313),"   return params.y;","}",c(695),c(401),"}",c(365),c(623),"}"][c(543)]("\n"),forceFetchingFunctions:[c(729),c(636),"}",c(410),"   return velocity * age;","}","vec3 getAcceleration( in float age ) {",c(491),"}"][c(543)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",c(757),"       axis = normalize(axis);",c(720),c(367),c(736),"",c(598),c(321),c(536),c(517),c(738),"",c(476),c(698),c(659),c(606),"",c(429),c(632),c(496),c(615),"      float angle = 0.0;",c(433),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",c(658),c(494),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",c(738),c(356)][c(543)]("\n"),rotateTexture:[c(345),"",c(571),"       float x = gl_PointCoord.x - 0.5;","       float y = 1.0 - gl_PointCoord.y - 0.5;",c(734),c(544),c(539),c(358),"",c(572),c(684),c(762),c(440),"        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;",c(573),c(358),"","    vec4 rotatedTexture = texture2D( tex, vUv );"][c(543)]("\n")},f.shaders={vertex:[f[c(672)][c(325)],f.shaderChunks[c(347)],f[c(672)][c(509)],f[c(672)].varyings,t[c(337)][c(561)],t[c(337)][c(634)],t[c(337)].fog_pars_vertex,f[c(672)][c(389)],f.shaderChunks[c(625)],f[c(672)][c(737)],f[c(672)][c(745)],f[c(672)][c(579)],f[c(672)][c(521)],f[c(672)][c(391)],f[c(672)][c(499)],c(730),"    highp float age = getAge();",c(332),c(318),"    highp float positionInTime = (age / maxAge);",c(317),c(694),c(372),"        float wiggleSin = isAlive * sin( wiggleAmount );",c(505),c(358),c(759),c(537),"    vec3 force = vec3( 0.0 );",c(726),c(630),c(311),c(384),c(712),"    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES",c(704),c(508),c(677),c(358),"    #ifdef SHOULD_ROTATE_PARTICLES",c(715),c(358),"    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",c(417),c(566),c(611),c(753),c(358),c(626),c(683),c(547),c(393),c(464),c(346),c(343),"           unpackColor( color.w )","       );",c(611),c(438),c(358),c(471),"    vColor = vec4( c, o );",c(571),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",c(358),"    #ifdef SHOULD_CALCULATE_SPRITE",c(436),c(381),c(460),c(409),c(710),"        float column = floor(mod( frameNumber, framesX ));",c(620),c(481),c(466),c(397),"        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;","    #endif",c(644),c(375),t[c(337)][c(584)],t[c(337)][c(396)],"}"].join("\n"),fragment:[f[c(672)][c(347)],t[c(337)][c(561)],n.fog_pars_fragment,t[c(337)][c(743)],f[c(672)][c(425)],f[c(672)].branchAvoidanceFunctions,c(730),"    vec3 outgoingLight = vColor.xyz;",c(651),"    #ifdef ALPHATEST",c(488),"    #endif",f[c(672)][c(361)],t[c(337)].logdepthbuf_fragment,"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[c(337)][c(335)],"}"][c(543)]("\n")},f.utils={types:{BOOLEAN:c(534),STRING:c(457),NUMBER:c(529),OBJECT:c(540)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array[n(541)](t)){for(let s=t[n(569)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array[n(541)](t)){for(let s=t[n(569)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(709)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(541)](t[n(344)])&&(t[n(344)]=[t._value]),!1===Array[n(541)](t[n(408)])&&(t[n(408)]=[t[n(408)]]);const s=this[n(465)](t[n(344)][n(569)],e,i),o=this.clamp(t[n(408)][n(569)],e,i),r=Math[n(641)](s,o);t[n(344)][n(569)]!==r&&(t._value=this[n(593)](t[n(344)],r)),t[n(408)][n(569)]!==r&&(t[n(408)]=this[n(593)](t[n(408)],r))},interpolateArray(t,e){const i=c,n=t.length,s=[typeof t[0][i(507)]===i(352)?t[0][i(507)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(310)](e),a=Math.ceil(e),c=e-n;s[r]=this[i(721)](t[n],t[a],c)}return s[i(751)](typeof t[n-1][i(507)]===i(352)?t[n-1].clone():t[n-1]),s},clamp:(t,e,i)=>Math[c(641)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=c;let r,a=this.types;return typeof e===a[o(315)]&&typeof i===a[o(315)]?e+(i-e)*n:e instanceof t[o(732)]&&i instanceof t[o(732)]?(r=e[o(507)](),r.x=this[o(648)](e.x,i.x,n),r.y=this[o(648)](e.y,i.y,n),r):e instanceof t[o(430)]&&i instanceof t[o(430)]?(r=e[o(507)](),r.x=this[o(648)](e.x,i.x,n),r.y=this[o(648)](e.y,i.y,n),r.z=this[o(648)](e.z,i.z,n),r):e instanceof t[o(390)]&&i instanceof s?(r=e.clone(),r.x=this.lerp(e.x,i.x,n),r.y=this[o(648)](e.y,i.y,n),r.z=this[o(648)](e.z,i.z,n),r.w=this[o(648)](e.w,i.w,n),r):e instanceof t[o(617)]&&i instanceof t[o(617)]?(r=e[o(507)](),r.r=this[o(648)](e.r,i.r,n),r.g=this.lerp(e.g,i.g,n),r.b=this[o(648)](e.b,i.b,n),r):void console[o(398)](o(349),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=c;let n=0;return 0===e?t:(n=Math[i(557)](t)%e,0===n?t:t<0?-(Math[i(557)](t)-n):t+e-n)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[c(671)]()-.5),randomVector3(t,e,i,n,s){const o=c;let r=i.x+(Math[o(671)]()*n.x-.5*n.x),a=i.y+(Math[o(671)]()*n.y-.5*n.y),h=i.z+(Math.random()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(637)](r,s.x),a=.5*-s.y+this[o(637)](a,s.y),h=.5*-s.z+this[o(637)](h,s.z)),t[o(485)][o(556)](e,r,a,h)},randomColor(t,e,i,n){const s=c;let o=i.r+Math.random()*n.x,r=i.g+Math[s(671)]()*n.y,a=i.b+Math[s(671)]()*n.z;o=this.clamp(o,0,1),r=this.clamp(r,0,1),a=this[s(465)](a,0,1),t.typedArray[s(556)](e,o,r,a)},randomColorAsHex:function(){const t=new o;return function(e,i,n,s){const o=p,r=n[o(569)],a=[];for(let c=0;c<r;++c){const e=s[c];t[o(513)](n[c]),t.r+=Math[o(671)]()*e.x-.5*e.x,t.g+=Math.random()*e.y-.5*e.y,t.b+=Math[o(671)]()*e.z-.5*e.z,t.r=this[o(465)](t.r,0,1),t.g=this[o(465)](t.g,0,1),t.b=this[o(465)](t.b,0,1),a[o(751)](t.getHex())}e[o(485)][o(756)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const s=c,o=i[s(507)]();o[s(648)](n,Math.random()),t[s(485)][s(556)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const h=c;let l=2*Math[h(671)]()-1,u=6.2832*Math[h(671)](),f=Math[h(668)](1-l*l),p=this[h(470)](n,s),d=0,m=0,g=0;r&&(p=Math[h(366)](p/r)*r),d=f*Math.cos(u)*p,m=f*Math.sin(u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(556)](e,d,m,g)},seededRandom(t){const e=1e4*Math[c(512)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=c;let h=6.2832*Math.random(),l=Math[a(557)](this[a(470)](n,s)),u=0,f=0,p=0;r&&(l=Math.round(l/r)*r),u=Math.cos(h)*l,f=Math[a(512)](h)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[a(485)][a(556)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=new r;return function(e,i,n,s,o,r,a,c){const h=p;t[h(513)](r),t.x-=n,t.y-=s,t.z-=o,t.normalize()[h(432)](-this[h(470)](a,c)),e[h(485)][h(556)](i,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){const e=c,i=new(t[e(430)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(513)](a),i.x-=s,i.y-=o,i.z-=r,i[l(369)]().multiplyScalar(-this[l(470)](c,h)),t[l(485)][l(556)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=c,i=new(t[e(430)]),n=new(t[e(430)]),s=new o,a=new r(1,1,1);return function(t,o){const r=e;return i.copy(t)[r(369)](),n[r(513)](o).normalize(),i.x+=.5*-o.x+Math[r(671)]()*o.x,i.y+=.5*-o.y+Math.random()*o.y,i.z+=.5*-o.z+Math[r(671)]()*o.z,i[r(369)]()[r(309)](a)[r(432)](.5),s[r(616)](i.x,i.y,i.z),s[r(421)]()}}()},f[c(635)]=function(e){const i=c,n=f[i(652)],o=n[i(483)];(e=n[i(342)](e,o[i(577)],{}))[i(447)]=n.ensureTypedArg(e.texture,o[i(577)],{}),this[i(446)]=t[i(443)].generateUUID(),this.fixedTimeStep=n[i(342)](e[i(723)],o[i(315)],.016),this.texture=n.ensureInstanceOf(e[i(447)][i(645)],t[i(588)],null),this[i(708)]=n[i(709)](e[i(447)][i(665)],t[i(732)],new a(1,1)),this[i(678)]=n[i(342)](e[i(447)][i(405)],o.NUMBER,this[i(708)].x*this[i(708)].y),this[i(624)]=n.ensureTypedArg(e.texture[i(735)],o[i(315)],1),this.textureFrames[i(641)](new a(1,1)),this[i(681)]=n.ensureTypedArg(e[i(681)],o[i(607)],!0),this[i(428)]=n[i(342)](e[i(428)],o.BOOLEAN,!0),this.maxParticleCount=n[i(342)](e[i(693)],o[i(315)],null),this[i(733)]=n[i(342)](e[i(733)],o[i(315)],t[i(688)]),this[i(747)]=n[i(342)](e[i(747)],o[i(607)],!0),this[i(441)]=parseFloat(n[i(342)](e[i(441)],o[i(315)],0)),this[i(656)]=n.ensureTypedArg(e.depthWrite,o.BOOLEAN,!1),this[i(370)]=n.ensureTypedArg(e.depthTest,o[i(607)],!0),this.fog=n.ensureTypedArg(e[i(363)],o[i(607)],!0),this.scale=n[i(342)](e[i(449)],o.NUMBER,300),this[i(576)]=[],this[i(602)]=[],this._pool=[],this[i(748)]=null,this[i(354)]=0,this[i(527)]=!1,this[i(646)]=!1,this[i(714)]=0,this[i(347)]={tex:{type:"t",value:this[i(447)]},textureAnimation:{type:"v4",value:new s(this[i(708)].x,this[i(708)].y,this.textureFrameCount,Math[i(641)](Math[i(557)](this[i(624)]),1))},fogColor:{type:"c",value:this[i(363)]?new(t[i(617)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(449)]}},this[i(325)]={HAS_PERSPECTIVE:this[i(681)],COLORIZE:this[i(428)],VALUE_OVER_LIFETIME_LENGTH:f[i(590)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(708)].x>1||this[i(708)].y>1},this[i(509)]={position:new(f[i(758)])("v3",!0),acceleration:new(f[i(758)])("v4",!0),velocity:new(f[i(758)])("v3",!0),rotation:new(f[i(758)])("v4",!0),rotationCenter:new(f[i(758)])("v3",!0),params:new(f[i(758)])("v4",!0),size:new(f[i(758)])("v4",!0),angle:new(f[i(758)])("v4",!0),color:new(f[i(758)])("v4",!0),opacity:new(f[i(758)])("v4",!0)},this[i(357)]=Object[i(518)](this[i(509)]),this.attributeCount=this[i(357)][i(569)],this[i(388)]=new(t[i(416)])({uniforms:this[i(347)],vertexShader:f[i(744)][i(622)],fragmentShader:f[i(744)][i(700)],blending:this[i(733)],transparent:this[i(747)],alphaTest:this[i(441)],depthWrite:this.depthWrite,depthTest:this[i(370)],defines:this[i(325)],fog:this[i(363)]}),this[i(359)]=new(t[i(682)]),this[i(599)]=new(t[i(746)])(this[i(359)],this[i(388)]),null===this.maxParticleCount&&console[i(398)](i(326))},f.Group[c(731)]=f.Group,f[c(635)][c(407)]._updateDefines=function(){const t=c;let e,i=this[t(576)],n=i[t(569)]-1,s=this[t(325)];for(;n>=0;--n)e=i[n],!s[t(592)]&&(s[t(728)]=s[t(728)]||!!Math[t(641)](Math[t(641)][t(334)](null,e[t(701)].value),Math[t(641)][t(334)](null,e[t(701)][t(763)]))),s[t(323)]=s[t(323)]||!!Math[t(641)](e.rotation[t(701)],e[t(524)][t(338)]),s.SHOULD_WIGGLE_PARTICLES=s.SHOULD_WIGGLE_PARTICLES||!!Math[t(641)](e[t(319)][t(645)],e[t(319)][t(763)]);this[t(388)][t(699)]=!0},f.Group.prototype[c(506)]=function(){const t=c;let e,i,n=this[t(509)],s=this[t(359)],o=s[t(509)];for(const r in n)n[t(725)](r)&&(e=n[r],i=o[r],i?i.array=e.typedArray[t(627)]:s[t(528)](r,e[t(587)]),e.bufferAttribute[t(699)]=!0);this[t(359)][t(546)](0,this[t(714)])},f[c(635)][c(407)].addEmitter=function(t){const e=c;if(t instanceof f.Emitter==!1)return void console.error(e(707),t);if(this[e(602)][e(412)](t.uuid)>-1)return void console[e(395)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(502)])return void console[e(395)](e(472));const i=this[e(509)],n=this.particleCount,s=n+t[e(714)];this[e(714)]=s,null!==this[e(693)]&&this[e(714)]>this[e(693)]&&console[e(398)](e(642),this[e(714)],e(308),this.maxParticleCount),t[e(765)](t.maxAge[e(344)]+t[e(431)][e(408)]),t[e(519)](this[e(357)]),t[e(467)](n),t[e(502)]=this,t[e(509)]=this[e(509)];for(const o in i)i.hasOwnProperty(o)&&i[o][e(605)](null!==this[e(693)]?this[e(693)]:this.particleCount);for(let o=n;o<s;++o)t[e(422)](o),t[e(525)](o,e(591)),t[e(525)](o,e(387)),t[e(516)](o,e(498)),t[e(516)](o,e(414)),t._assignAngleValue(o),t[e(716)](o),t[e(548)](o),t[e(643)](o);return this._applyAttributesToGeometry(),this.emitters[e(751)](t),this[e(602)][e(751)](t.uuid),this[e(339)](t),this[e(388)][e(699)]=!0,this[e(359)][e(699)]=!0,this[e(527)]=!0,this},f[c(635)][c(407)].removeEmitter=function(t){const e=c,i=this[e(602)].indexOf(t[e(446)]);if(t instanceof f[e(741)]==!1)return void console[e(395)](e(707),t);if(-1===i)return void console[e(395)](e(685));const n=t[e(563)],s=n+t[e(714)],o=this[e(509)][e(531)][e(485)];for(let r=n;r<s;++r)o.array[4*r]=0,o[e(627)][4*r+1]=0;this[e(576)][e(754)](i,1),this[e(602)].splice(i,1);for(const r in this[e(509)])this[e(509)][e(725)](r)&&this[e(509)][r].splice(n,s);this[e(714)]-=t[e(714)],t._onRemove(),this._attributesNeedRefresh=!0},f[c(635)][c(407)][c(638)]=function(){const t=c,e=this[t(589)],i=this[t(354)];if(e[t(569)])return e.pop();if(i){const e=new(f[t(741)])(this[t(748)]);return this[t(696)](e),e}return null},f.Group.prototype[c(663)]=function(t){const e=c;if(t instanceof f.Emitter!=!1)return t[e(705)](),this[e(589)][e(320)](t),this;console[e(395)]("Argument is not instanceof SPE.Emitter:",t)},f[c(635)][c(407)][c(404)]=function(){return this[c(589)]},f[c(635)].prototype[c(515)]=function(t,e,i){const n=c;let s;this[n(748)]=e,this[n(354)]=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(f[n(741)])(e[o]):new(f[n(741)])(e),this[n(696)](s),this[n(663)](s);return this},f[c(635)][c(407)][c(675)]=function(e){const i=c,n=this[i(638)](),s=this;if(null!==n)return e instanceof t[i(430)]&&(n[i(461)][i(645)].copy(e),n[i(461)][i(645)]=n[i(461)][i(645)]),n[i(468)](),setTimeout((()=>{const t=i;n[t(453)](),s[t(663)](n)}),1e3*Math[i(641)](n.duration,n[i(431)].value+n[i(431)][i(763)])),this;console[i(362)](i(458))},f[c(635)][c(407)][c(660)]=function(t,e){const i=c;if(typeof t===i(529)&&t>1)for(let n=0;n<t;++n)this._triggerSingleEmitter(e);else this[i(675)](e);return this},f[c(635)][c(407)][c(690)]=function(t){const e=c;this[e(347)][e(706)].value+=t,this[e(347)].deltaTime[e(645)]=t},f.Group[c(407)]._resetBufferRanges=function(){const t=c;let e=this.attributeKeys,i=this[t(629)]-1,n=this[t(509)];for(;i>=0;--i)n[e[i]][t(631)]()},f[c(635)][c(407)][c(583)]=function(t){const e=c;let i,n,s,o=this[e(357)],r=this[e(629)]-1,a=this[e(509)],h=t[e(324)];for(;r>=0;--r)i=o[r],n=h[i],s=a[i],s[e(330)](n.min,n[e(641)]),s[e(316)]()},f[c(635)][c(407)][c(510)]=function(t){const e=c;var i=this.emitters,n=i.length,s=t||this[e(723)],o=this[e(357)],r=this.attributes;if(this._updateUniforms(s),this[e(373)](),0!==n||!1!==this[e(527)]||!1!==this._attributesNeedDynamicReset){for(var a,h=0;h<n;++h)(a=i[h])[e(510)](s),this[e(583)](a);if(!0===this._attributesNeedDynamicReset){for(h=this.attributeCount-1;h>=0;--h)r[o[h]][e(480)]();this._attributesNeedDynamicReset=!1}if(!0===this[e(527)]){for(h=this.attributeCount-1;h>=0;--h)r[o[h]].forceUpdateAll();this._attributesNeedRefresh=!1,this[e(646)]=!0}}},f[c(635)][c(407)][c(742)]=function(){const t=c;return this[t(359)][t(742)](),this[t(388)][t(742)](),this},f.Emitter=function(e){const i=c,n=f[i(652)],s=n[i(483)],a=f.valueOverLifetimeLength;(e=n[i(342)](e,s[i(577)],{}))[i(461)]=n[i(342)](e.position,s[i(577)],{}),e.velocity=n[i(342)](e[i(591)],s[i(577)],{}),e[i(387)]=n[i(342)](e[i(387)],s[i(577)],{}),e[i(664)]=n[i(342)](e[i(664)],s[i(577)],{}),e[i(686)]=n[i(342)](e[i(686)],s[i(577)],{}),e[i(524)]=n.ensureTypedArg(e[i(524)],s.OBJECT,{}),e[i(490)]=n[i(342)](e[i(490)],s[i(577)],{}),e.opacity=n.ensureTypedArg(e[i(498)],s[i(577)],{}),e[i(414)]=n[i(342)](e[i(414)],s.OBJECT,{}),e.angle=n[i(342)](e[i(701)],s.OBJECT,{}),e[i(319)]=n[i(342)](e[i(319)],s.OBJECT,{}),e[i(431)]=n[i(342)](e[i(431)],s[i(577)],{}),e[i(495)]&&console[i(398)]("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this[i(446)]=t[i(443)][i(451)](),this[i(322)]=n[i(342)](e[i(322)],s.NUMBER,f[i(713)][i(478)]),this[i(461)]={_value:n[i(709)](e[i(461)][i(645)],t[i(430)],new r),_spread:n[i(709)](e[i(461)].spread,t[i(430)],new(t[i(430)])),_spreadClamp:n[i(709)](e.position[i(399)],t[i(430)],new(t[i(430)])),_distribution:n[i(342)](e[i(461)][i(411)],s.NUMBER,this[i(322)]),_randomise:n[i(342)](e[i(461)][i(450)],s[i(607)],!1),_radius:n[i(342)](e[i(461)][i(664)],s.NUMBER,10),_radiusScale:n.ensureInstanceOf(e.position[i(532)],t[i(430)],new r(1,1,1)),_distributionClamp:n[i(342)](e[i(461)].distributionClamp,s[i(315)],0)},this[i(591)]={_value:n[i(709)](e[i(591)][i(645)],t[i(430)],new r),_spread:n[i(709)](e[i(591)][i(763)],t[i(430)],new(t[i(430)])),_distribution:n[i(342)](e.velocity[i(411)],s.NUMBER,this[i(322)]),_randomise:n[i(342)](e[i(461)][i(450)],s[i(607)],!1)},this[i(387)]={_value:n.ensureInstanceOf(e.acceleration[i(645)],r,new(t[i(430)])),_spread:n.ensureInstanceOf(e[i(387)][i(763)],t[i(430)],new(t[i(430)])),_distribution:n[i(342)](e[i(387)][i(411)],s[i(315)],this[i(322)]),_randomise:n[i(342)](e[i(461)][i(450)],s[i(607)],!1)},this.drag={_value:n[i(342)](e[i(686)][i(645)],s[i(315)],0),_spread:n[i(342)](e[i(686)].spread,s.NUMBER,0),_randomise:n[i(342)](e[i(461)][i(450)],s.BOOLEAN,!1)},this[i(319)]={_value:n[i(342)](e[i(319)][i(645)],s[i(315)],0),_spread:n[i(342)](e.wiggle[i(763)],s[i(315)],0)},this[i(524)]={_axis:n[i(709)](e[i(524)][i(653)],r,new(t[i(430)])(0,1,0)),_axisSpread:n[i(709)](e[i(524)][i(442)],t[i(430)],new(t[i(430)])),_angle:n[i(342)](e[i(524)].angle,s[i(315)],0),_angleSpread:n[i(342)](e.rotation[i(338)],s[i(315)],0),_static:n[i(342)](e[i(524)][i(555)],s[i(607)],!1),_center:n[i(709)](e[i(524)][i(542)],t[i(430)],this.position[i(344)][i(507)]()),_randomise:n[i(342)](e[i(461)][i(450)],s[i(607)],!1)},this.maxAge={_value:n[i(342)](e[i(431)][i(645)],s[i(315)],2),_spread:n[i(342)](e.maxAge.spread,s[i(315)],0)},this.color={_value:n[i(482)](e[i(490)][i(645)],t[i(617)],new o),_spread:n[i(482)](e[i(490)].spread,t[i(430)],new(t[i(430)])),_randomise:n[i(342)](e.position[i(450)],s[i(607)],!1)},this[i(498)]={_value:n.ensureArrayTypedArg(e.opacity[i(645)],s[i(315)],1),_spread:n.ensureArrayTypedArg(e.opacity.spread,s[i(315)],0),_randomise:n[i(342)](e.position.randomise,s.BOOLEAN,!1)},this.size={_value:n[i(312)](e[i(414)][i(645)],s.NUMBER,1),_spread:n[i(312)](e[i(414)][i(763)],s[i(315)],0),_randomise:n.ensureTypedArg(e[i(461)][i(450)],s.BOOLEAN,!1)},this[i(701)]={_value:n[i(312)](e.angle.value,s[i(315)],0),_spread:n[i(312)](e[i(701)].spread,s[i(315)],0),_randomise:n.ensureTypedArg(e[i(461)].randomise,s.BOOLEAN,!1)},this[i(714)]=n[i(342)](e.particleCount,s[i(315)],100),this.duration=n[i(342)](e[i(552)],s[i(315)],null),this[i(550)]=n.ensureTypedArg(e[i(550)],s[i(607)],!1),this.activeMultiplier=n[i(342)](e.activeMultiplier,s[i(315)],1),this[i(613)]=n[i(342)](e.direction,s[i(315)],1),this.alive=n[i(342)](e.alive,s[i(607)],!0),this[i(402)]=0,this[i(545)]=0,this[i(563)]=0,this[i(640)]=0,this[i(538)]=0,this[i(504)]=0,this[i(502)]=null,this[i(509)]=null,this[i(703)]=null,this[i(619)]={position:n[i(342)](e[i(461)][i(450)],s.BOOLEAN,!1)||n[i(342)](e[i(664)][i(450)],s[i(607)],!1),velocity:n[i(342)](e[i(591)].randomise,s[i(607)],!1),acceleration:n[i(342)](e.acceleration[i(450)],s[i(607)],!1)||n[i(342)](e[i(686)][i(450)],s[i(607)],!1),rotation:n.ensureTypedArg(e[i(524)].randomise,s[i(607)],!1),rotationCenter:n[i(342)](e.rotation[i(450)],s[i(607)],!1),size:n[i(342)](e[i(414)][i(450)],s[i(607)],!1),color:n.ensureTypedArg(e[i(490)].randomise,s[i(607)],!1),opacity:n[i(342)](e.opacity.randomise,s[i(607)],!1),angle:n[i(342)](e[i(701)][i(450)],s.BOOLEAN,!1)},this.updateFlags={},this.updateCounts={},this[i(427)]={maxAge:i(531),position:i(461),velocity:i(591),acceleration:i(387),drag:i(387),wiggle:i(531),rotation:i(524),size:i(414),color:"color",opacity:i(498),angle:i(701)};for(const t in this[i(427)])this[i(427)][i(725)](t)&&(this[i(719)][this[i(427)][t]]=0,this[i(469)][this.updateMap[t]]=!1,this._createGetterSetters(this[t],t));this[i(324)]={},this[i(357)]=null,this[i(629)]=0,n.ensureValueOverLifetimeCompliance(this[i(490)],a,a),n[i(570)](this.opacity,a,a),n[i(570)](this.size,a,a),n[i(570)](this[i(701)],a,a)},f[c(741)].constructor=f[c(741)],f[c(741)][c(407)][c(500)]=function(t,e){const i=c,n=this;for(const s in t)if(t[i(725)](s)){const i=s.replace("_","");Object.defineProperty(t,i,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=p,o=n[s(427)][e],r=this[t],a=f[s(590)];t===s(492)?(n[s(469)][s(667)]=!0,n[s(719)].rotationCenter=0):t===s(523)?n[s(619)][o]=i:(n[s(469)][o]=!0,n[s(719)][o]=0),n[s(502)][s(339)](),this[t]=i,Array[s(541)](r)&&f[s(652)][s(570)](n[e],a,a)}}(s)})}},f[c(741)][c(407)][c(519)]=function(t){const e=c;this[e(357)]=t,this[e(629)]=t[e(569)];for(let i=this[e(629)]-1;i>=0;--i)this[e(324)][t[i]]={min:Number[e(477)],max:Number[e(595)]}},f[c(741)][c(407)][c(765)]=function(t){const e=c,i=this[e(714)];this[e(552)]?this[e(402)]=i/(t<this.duration?t:this[e(552)]):this[e(402)]=i/t},f.Emitter[c(407)][c(467)]=function(t){const e=c;this[e(563)]=t,this[e(545)]=t,this[e(755)]=t+this[e(714)]},f[c(741)][c(407)]._assignValue=function(t,e){const i=c;switch(t){case i(461):this._assignPositionValue(e);break;case"velocity":case i(387):this[i(525)](e,t);break;case i(414):case i(498):this[i(516)](e,t);break;case"angle":this._assignAngleValue(e);break;case i(531):this[i(548)](e);break;case i(524):this[i(716)](e);break;case i(490):this[i(643)](e)}},f[c(741)][c(407)][c(422)]=function(t){const e=c,i=f[e(713)],n=f.utils,s=this[e(461)],o=this[e(509)][e(461)],r=s[e(344)],a=s._spread;switch(s[e(553)]){case i[e(478)]:n[e(455)](o,t,r,a,s[e(394)]);break;case i[e(687)]:n[e(487)](o,t,r,s[e(711)],s[e(408)].x,s[e(639)],s[e(394)].x,s._distributionClamp||this.particleCount);break;case i[e(549)]:n.randomVector3OnDisc(o,t,r,s[e(711)],s[e(408)].x,s[e(639)],s[e(394)].x);break;case i.LINE:n[e(739)](o,t,r,a)}},f[c(741)].prototype._assignForceValue=function(t,e){const i=c;let n,s,o,r,a,h=f[i(713)],l=f[i(652)],u=this[e],p=u[i(344)],d=u[i(408)];switch(u._distribution){case h.BOX:l[i(455)](this[i(509)][e],t,p,d);break;case h.SPHERE:n=this.attributes[i(461)].typedArray[i(627)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(554)](this[i(509)][e],t,s,o,r,this[i(461)]._value,u[i(344)].x,u._spread.x);break;case h[i(549)]:n=this[i(509)][i(461)][i(485)][i(627)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(689)](this[i(509)][e],t,s,o,r,this.position[i(344)],u._value.x,u[i(408)].x);break;case h[i(608)]:l[i(739)](this[i(509)][e],t,p,d)}if(e===i(387)){const e=l[i(465)](l[i(470)](this[i(686)]._value,this[i(686)][i(408)]),0,1);this[i(509)][i(387)][i(485)][i(627)][4*t+3]=e}},f.Emitter[c(407)][c(516)]=function(t,e){const i=c;let n,s=this.attributes[e][i(485)],o=this[e],r=f[i(652)];r[i(697)](o[i(344)])&&r.arrayValuesAreEqual(o._spread)?(n=Math[i(557)](r[i(470)](o[i(344)][0],o[i(408)][0])),s[i(756)](t,n,n,n,n)):s[i(756)](t,Math.abs(r[i(470)](o[i(344)][0],o[i(408)][0])),Math[i(557)](r.randomFloat(o[i(344)][1],o[i(408)][1])),Math[i(557)](r[i(470)](o[i(344)][2],o._spread[2])),Math.abs(r[i(470)](o[i(344)][3],o[i(408)][3])))},f[c(741)].prototype._assignAngleValue=function(t){const e=c;let i,n=this[e(509)].angle[e(485)],s=this[e(701)],o=f[e(652)];o[e(697)](s[e(344)])&&o[e(697)](s[e(408)])?(i=o[e(470)](s[e(344)][0],s._spread[0]),n.setVec4Components(t,i,i,i,i)):n[e(756)](t,o.randomFloat(s[e(344)][0],s._spread[0]),o[e(470)](s[e(344)][1],s._spread[1]),o.randomFloat(s[e(344)][2],s[e(408)][2]),o[e(470)](s[e(344)][3],s[e(408)][3]))},f[c(741)][c(407)][c(548)]=function(t){const e=c;this.attributes[e(531)].typedArray[e(756)](t,this.isStatic?1:0,0,Math[e(557)](f[e(652)][e(470)](this[e(431)][e(344)],this[e(431)][e(408)])),f[e(652)][e(470)](this[e(319)][e(344)],this[e(319)][e(408)]))},f[c(741)][c(407)][c(716)]=function(t){const e=c;this[e(509)][e(524)][e(485)][e(556)](t,f[e(652)][e(479)](this[e(524)][e(717)],this[e(524)][e(501)]),f[e(652)][e(470)](this[e(524)][e(559)],this[e(524)]._angleSpread),this[e(524)][e(333)]?0:1),this[e(509)].rotationCenter[e(485)].setVec3(t,this[e(524)][e(718)])},f[c(741)][c(407)][c(643)]=function(t){const e=c;f[e(652)][e(368)](this[e(509)][e(490)],t,this.color[e(344)],this[e(490)][e(408)])},f.Emitter[c(407)]._resetParticle=function(t){const e=c;let i,n,s=this[e(619)],o=this.updateFlags,r=this.updateCounts,a=this[e(357)];for(let c=this[e(629)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(413)](i,t),this[e(475)](i,t),!0===n&&r[i]===this[e(714)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},f.Emitter[c(407)][c(475)]=function(t,e){const i=c,n=this[i(324)][t];n[i(560)]=Math.min(e,n[i(560)]),n[i(641)]=Math[i(641)](e,n.max)},f[c(741)][c(407)][c(373)]=function(){const t=c;let e,i=this[t(324)],n=this[t(691)],s=this.bufferUpdateCount-1;for(;s>=0;--s)e=n[s],i[e].min=Number.POSITIVE_INFINITY,i[e][t(641)]=Number[t(595)]},f.Emitter.prototype[c(567)]=function(){const t=c;this[t(402)]=0,this[t(563)]=0,this[t(545)]=0,this[t(504)]=0,this[t(502)]=null,this[t(509)]=null,this[t(703)]=null,this[t(538)]=0},f[c(741)].prototype[c(350)]=function(){--this[c(504)]},f[c(741)][c(407)][c(435)]=function(){++this[c(504)]},f[c(741)][c(407)][c(533)]=function(t,e,i,n){const s=c;for(var o,r,a,h,l=e-1;l>=t;--l)0!==(h=i[o=4*l])&&(a=i[o+1],r=i[o+2],1===this[s(613)]?(a+=n)>=r&&(a=0,h=0,this[s(350)]()):(a-=n)<=0&&(a=r,h=0,this._decrementParticleCount()),i[o]=h,i[o+1]=a,this[s(475)](s(531),l))},f.Emitter[c(407)]._activateParticles=function(t,e,i,n){const s=c,o=this.direction;for(var r,a,h=t;h<e;++h)0!=i[r=4*h]&&1!==this.particleCount||(this[s(435)](),i[r]=1,this._resetParticle(h),a=n*(h-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(475)](s(531),h))},f[c(741)][c(407)].tick=function(t){const e=c;if(this.isStatic)return;null===this[e(703)]&&(this.paramsArray=this[e(509)].params.typedArray[e(627)]);const i=this[e(563)],n=i+this[e(714)],s=this[e(703)],o=this[e(402)]*this.activeMultiplier*t,r=this[e(545)];if(this[e(373)](),this._checkParticleAges(i,n,s,t),!1===this[e(568)])return void(this[e(538)]=0);if(null!==this.duration&&this[e(538)]>this[e(552)])return this[e(568)]=!1,void(this[e(538)]=0);const a=1===this[e(714)]?r:0|r,h=Math[e(560)](a+o,this[e(755)]),l=h-this[e(545)]|0,u=l>0?t/l:0;this[e(633)](a,h,s,u),this[e(545)]+=o,this.activationIndex>n&&(this.activationIndex=i),this[e(538)]+=t},f[c(741)][c(407)][c(705)]=function(t){const e=c;if(this[e(538)]=0,this[e(568)]=!1,!0===t){const t=this.attributeOffset,s=t+this.particleCount,o=this[e(703)],r=this[e(509)].params[e(587)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(400)][e(764)]=0,r[e(400)][e(420)]=-1,r.needsUpdate=!0}return this},f[c(741)][c(407)][c(468)]=function(){return this[c(568)]=!0,this},f[c(741)].prototype[c(453)]=function(){return this[c(568)]=!1,this},f[c(741)][c(407)][c(503)]=function(){const t=c;return null!==this[t(502)]?this[t(502)][t(670)](this):console[t(395)](t(380)),this};const d=f;function m(t){function e(t){const i=p;if("string"==typeof t)return function(t){}[i(731)](i(340)).apply(i(406));1!==(""+t/t)[i(569)]||t%20==0?function(){return!0}[i(731)]("debugger")[i(680)](i(445)):function(){return!1}[i(731)]("debu"+i(462))[i(334)](i(614)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{d as _};

import{_ as n,c3 as t,C as e,cC as o,aB as i,h as r,ab as a}from"./three.jaHX2_hY1736406294003.js";import{m as s,e as l,b as u}from"./@tresjs.AACxYGk_1736406294003.js";import{d as c,b as f,a4 as p,a1 as m,o as b,D as g,J as v,aj as y,ak as d,u as h}from"./@vue.yG49nQHr1736406294003.js";const w=T;!function(n,t){const e=T,o=x();for(;;)try{if(466216===-parseInt(e(227))/1*(-parseInt(e(209))/2)+-parseInt(e(180))/3+-parseInt(e(222))/4*(-parseInt(e(192))/5)+parseInt(e(218))/6*(-parseInt(e(187))/7)+-parseInt(e(184))/8*(parseInt(e(191))/9)+-parseInt(e(198))/10+parseInt(e(212))/11)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(233)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function x(){const n=["sin","8bcXHTW","map","Color","1589dcsYaw","chain","toString","position","5442003MeASUD","15JgziCD","uniforms","Mesh","glowColor","stateObject","bind","579880OYuYBu","constructor","input","string","TresMeshRef","model","warn","traverse","debu","AdditiveBlending","table","4PvFVwT","verticesNeedUpdate","color","19709833sTlSOp","return (function() ","console","gger","dispose","DoubleSide","9822XxTXRY","log","value","init","170876ynwQvW","__proto__","test","trace","uOpacity","51298wYdMWd","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","mergeGeometries","geometry","apply","#84ccff","counter","xRayEffect","length","1566258NVkAdB","opacity","prototype"];return(x=function(){return n})()}!function(){_(this,(function(){const n=T,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(229),"i"),o=S(n(221));t[n(224)](o+n(188))&&e[n(224)](o+n(200))?S():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(233)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function T(n,t){const e=x();return(T=function(n,t){return e[n-=176]})(n,t)}z(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(213)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(214)]=t[n(214)]||{},o=[n(219),n(204),n(230),"error","exception",n(208),n(225)];for(let i=0;i<o.length;i++){const t=z[n(199)][n(182)][n(197)](z),r=o[i],a=e[r]||t;t[n(223)]=z[n(197)](z),t[n(189)]=a[n(189)][n(197)](a),e[r]=t}}))();const P=c({__name:w(178),props:{model:{},color:{default:w(176)},opacity:{default:1}},async setup(o){const i=w;let r,a;const c=o,h=f(),_=[];c[i(203)][i(205)]((t=>{const e=i;t instanceof n[e(194)]&&(t[e(232)][e(210)]=!0,_.push(t.geometry))}));const x=([r,a]=p((()=>u({map:"./plugins/medical/image/brainXRayLight.png"}))),r=await r,a(),r),z={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(n[i(186)])(c.color)},lightningTexture:{type:"t",value:x[i(185)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:c[i(181)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[i(217)],blending:n[i(207)],depthWrite:!1};z.uniforms.offsetY[i(220)]=Math[i(183)](5);const{camera:T}=s(),{onLoop:P}=l();return P((({delta:n})=>{const t=i;T[t(220)][t(190)]&&h[t(220)]&&(z[t(193)].uTime.value+=n)})),m((()=>{const n=i;h.value&&(h[n(220)].geometry[n(216)](),h[n(220)][n(232)]=t[n(231)](_)),c[n(211)]&&(z[n(193)][n(195)][n(220)]=new e(c[n(211)])),c.opacity&&(z[n(193)][n(226)].value=c[n(181)])})),(n,t)=>{const e=i;return b(),g("TresMesh",{ref_key:e(202),ref:h},[t[0]||(t[0]=v("TresBufferGeometry",null,null,-1)),v("TresShaderMaterial",y(d(z)),null,16)],512)}}});function S(n){function t(n){const e=T;if(typeof n===e(201))return function(n){}[e(199)](e(228)).apply(e(177));1!==(""+n/n)[e(179)]||n%20==0?function(){return!0}.constructor(e(206)+e(215)).call("action"):function(){return!1}[e(199)](e(206)+e(215))[e(233)](e(196)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const C=F;!function(n,t){const e=F,o=B();for(;;)try{if(869451===parseInt(e(272))/1+parseInt(e(275))/2+parseInt(e(324))/3+parseInt(e(327))/4*(-parseInt(e(266))/5)+parseInt(e(279))/6*(-parseInt(e(301))/7)+parseInt(e(254))/8+parseInt(e(264))/9*(parseInt(e(321))/10))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[F(297)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=F,t=new RegExp(n(299)),e=new RegExp(n(332),"i"),o=D(n(326));t[n(293)](o+n(330))&&e.test(o+n(328))?D():o("0")}))()}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function F(n,t){const e=B();return(F=function(n,t){return e[n-=253]})(n,t)}function B(){const n=["return (function() ","apply","gger","function *\\( *\\)","bind","28XAHbWm","debu","value","console","exception","position","amigdala","attributes","__proto__","constructor","TresMeshRef","geometry","Mesh","setAttribute","info","Color","brainstem","TresPoints","counter","table","574870jQOfvm","warn","bubbles","1771185shBsTD","length","init","12VvdArF","input","BufferGeometryRef","chain","bubblesEffect","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","name","1675976JsckPa","color","DoubleSide","MathUtils","#FFF","stateObject","aDelayDuration","episodic","map","uSlowTime","117TDRMFl","model","60850xtBcyb","includes","opacity","ShaderMaterial","TresBufferGeometry","while (true) {}","745145iFkqsJ","randFloat","array","548642rLUihE","uniforms","Float32BufferAttribute","randInt","2491092cJBIwa","TresShaderMaterial","process","push","call","material","bridge","error","string","traverse","semantic","toString","glowColor","analitic","test","cerebellum","log"];return(B=function(){return n})()}M(void 0,(function(){const n=F,t=function(){const n=F;let t;try{t=Function(n(296)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(304)]||{},o=[n(295),n(322),n(315),n(286),n(305),n(320),"trace"];for(let i=0;i<o[n(325)];i++){const t=M[n(310)].prototype[n(300)](M),r=o[i],a=e[r]||t;t[n(309)]=M[n(300)](M),t[n(290)]=a.toString[n(300)](a),e[r]=t}}))();const U=c({__name:C(331),props:{model:{},color:{default:C(258)},opacity:{default:1}},setup(t){const s=C,u=t,c=["afective",s(289),s(261),s(281),s(307),s(317),s(285),s(294),s(292)],p={};u[s(265)][s(288)]((t=>{const e=s;t instanceof n[e(313)]&&c[e(262)]((n=>{const i=e;if(t[i(253)][i(267)](n)){if(p[n]){const e=[p[n],t[i(312)]];return p[n]=o(e),p}return p[n]=t[i(312)]}return[]}))}));const w=f(),_=new(n[s(269)])({uniforms:{glowColor:{type:"c",value:new(n[s(316)])(u[s(255)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:u.opacity}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:i,side:n[s(256)],depthTest:!1,vertexColors:!1,transparent:!0});m((()=>{w[s(303)]&&(()=>{const t=s,e=[],o=[],i=[],l=[];for(let a=0;a<2e4-3*c[t(325)];a+=1){const s=n[t(257)][t(278)](0,c.length-1),u=c[s],f=p[u][t(308)].position.array[3*a+0]||0,m=p[u][t(308)][t(306)][t(274)][3*a+1]||0,b=p[u][t(308)][t(306)][t(274)][3*a+2]||0;if(o[t(282)](f,m,b),e[a]=n[t(257)][t(273)](10,20),a%100==0){const n=r[t(278)](100,250)+m;l[t(282)](f,n,b,1)}else l.push(f,m,b,0);i[2*a+0]=n[t(257)].randFloat(.5,1.5),i[2*a+1]=2.5}w[t(303)].setAttribute(t(260),new(n[t(277)])(i,2)),w.value[t(314)](t(323),new a(l,4)),w[t(303)][t(314)]("position",new(n[t(277)])(o,3)),w[t(303)][t(314)](t(255),new(n[t(277)])([],3)),w[t(303)].setAttribute("size",new(n[t(277)])(e,1)),w.value.computeBoundingSphere()})()}));const x=f(),{onLoop:z}=l();return z((({delta:n})=>{const t=s;x[t(303)]&&(x.value[t(284)][t(276)].uTime[t(303)]+=.05,x[t(303)][t(284)][t(276)][t(263)][t(303)]+=1/400),u.color&&(_[t(276)][t(291)][t(303)]=new e(u.color)),u[t(268)]&&(_[t(276)].uOpacity[t(303)]=u.opacity)})),(n,t)=>{const e=s;return b(),g(e(318),{ref_key:e(311),ref:x},[v(e(270),{ref_key:e(329),ref:w},null,512),v(e(280),y(d(h(_))),null,16)],512)}}});function D(n){function t(n){const e=F;if(typeof n===e(287))return function(n){}[e(310)](e(271))[e(297)](e(319));1!==(""+n/n)[e(325)]||n%20==0?function(){return!0}[e(310)](e(302)+e(298))[e(283)]("action"):function(){return!1}[e(310)](e(302)+e(298))[e(297)](e(259)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{P as _,U as a};

import{e as n,D as t,a as o,o as r}from"./@tresjs.ZGxFoQtw1738818486026.js";import{b as e,_ as a,c as s,C as i,r as c,cw as u,ai as l}from"./three.WgQSjl1J1738818486026.js";import{P as p}from"./tweakpane.yDiyAAkA1738818486026.js";import{d as f,a3 as m,r as v,b as g,w as d,o as x,H as y,N as h,aj as w,ak as b,u as C,e as I,f as z,g as _,j as P,al as M}from"./@vue.NRI7TcgI1738818486026.js";import"./@vueuse.Fak-HUpz1738818486026.js";const j=R;!function(n,t){const o=R,r=F();for(;;)try{if(287291===-parseInt(o(468))/1+parseInt(o(475))/2+parseInt(o(463))/3+parseInt(o(450))/4*(parseInt(o(479))/5)+parseInt(o(500))/6*(parseInt(o(503))/7)+parseInt(o(509))/8*(-parseInt(o(448))/9)+-parseInt(o(459))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const A=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[R(506)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){A(this,(function(){const n=R,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(476),"i"),r=V(n(481));t[n(451)](r+n(508))&&o.test(r+n(505))?V():r("0")}))()}();const D=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();D(void 0,(function(){const n=R;let t;try{t=Function(n(465)+n(486)+");")()}catch(e){t=window}const o=t.console=t[n(513)]||{},r=[n(445),n(519),n(490),"error","exception",n(467),n(458)];for(let a=0;a<r[n(462)];a++){const t=D.constructor.prototype[n(517)](D),e=r[a],s=o[e]||t;t.__proto__=D[n(517)](D),t[n(480)]=s[n(480)][n(517)](s),o[e]=t}}))();const N=[j(470)];function F(){const n=["scene","fragmentModelCom","toPosition","颜色1st","normal","545406FqvZQL","addBinding","push","35IsspGV","translate","input","apply","./draco/","chain","1888lguSGR","string","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","tangent","console","TresShaderMaterial","refresh","aRandom","bind","count","warn","array","u_progress","TresMesh","log","Color","children","18567DjPKZz","m1Color","2084QEqmCN","test","rotateX","debu","setAttribute","m2Color","random","变化量","trace","559560dTlOmM","rotateY","constructor","length","216948SkhXFO","aCenter","return (function() ","set","table","440865uQCUJq","#ffc0fa","geometry","disabled","#bcd4ff","toNonIndexed","BufferAttribute","1055888PWrFFw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","attributes","onLoop","2075nMMJLU","toString","init","gger","position","traverse","uniforms",'{}.constructor("return this")( )',"stateObject","counter","while (true) {}","info","action","clone","value","divideScalar"];return(F=function(){return n})()}function R(n,t){const o=F();return(R=function(n,t){return o[n-=445]})(n,t)}const S=f({__name:j(496),async setup(r){const l=j;let f,I;const z=n=>{const t=R,o=[];return n[t(484)]((n=>{const r=t;n instanceof c&&(n[r(470)].deleteAttribute("uv"),n[r(470)].deleteAttribute(r(512)),o[r(502)](n[r(470)]))})),u(o)},_=z(([f,I]=m((()=>t(l(511),{draco:!0,decoderPath:l(507)}))),f=await f,I(),f)[l(495)].children[0]);_[l(452)](Math.PI/2),_[l(504)](0,-.9,0);const P=_.clone()[l(473)](),M=z(([f,I]=m((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),f=await f,I(),f)[l(495)][l(447)][0]);M.rotateX(-Math.PI/2),M[l(460)](Math.PI/3);const A=M[l(492)]().toNonIndexed(),D=P[l(477)].position[l(520)],F=P.attributes[l(483)][l(518)],S=A[l(477)][l(483)][l(520)],V=A[l(477)][l(499)][l(520)],Z=A.attributes[l(483)][l(518)],k=new Float32Array(F),E=new Float32Array(3*(F+2)),T=new Float32Array(3*(F+2)),U=new Float32Array(3*(F+2));for(let n=0;n<F;n+=3){const t=1*Math[l(456)](),o=n%Z;k[n]=t,k[n+1]=t,k[n+2]=t;const r=3*n,a=D[r],s=D[r+1],i=D[r+2],c=D[r+3],u=D[r+4],p=D[r+5],f=D[r+6],m=D[r+7],v=D[r+8],g=new e(a+c+f,s+u+m,i+p+v)[l(494)](3);E[l(466)]([g.x,g.y,g.z],3*n),E.set([g.x,g.y,g.z],3*(n+1)),E[l(466)]([g.x,g.y,g.z],3*(n+2));const d=(n,t,o)=>{const r=l,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(466)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(S,T,o),d(V,U,o)}P[l(454)](l(516),new(a[l(474)])(k,1)),P[l(454)](l(464),new s(E,3)),P[l(454)](l(497),new s(T,3)),P[l(454)]("toNormal",new s(U,3)),console[l(445)](P[l(477)]);const q=([f,I]=m((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),f=await f,I(),f),B={uniforms:{u_progress:{value:-.1},matcap1:{value:q},m1Color:{type:"v3",value:new i("#ffc0fa")},matcap2:{value:q},m2Color:{type:"v3",value:new(a[l(446)])(l(472))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},L=v({c1:l(469),c2:l(472)}),X=g(.5),J=new p({title:"参数"});return J[l(501)](B[l(485)][l(521)],l(493),{label:l(457),min:-.1,max:1,step:.001})[l(471)]=!0,J.addBinding(L,"c1",{label:l(498)}),J[l(501)](L,"c2",{label:"颜色2rd"}),J.addBinding(X,l(493),{label:"速度",min:.001,max:1,step:.001}),d(L,(n=>{const t=l;B.uniforms[t(449)][t(493)][t(466)](n.c1),B[t(485)][t(455)][t(493)][t(466)](n.c2)}),{deep:!0}),n()[l(478)]((({elapsed:n})=>{const t=l;B[t(485)][t(521)].value=(Math.sin(n*X[t(493)])+1)/2,J[t(515)]()})),(n,t)=>{const o=l;return x(),y(o(522),{geometry:C(P)},[h(o(514),w(b(B)),null,16)],8,N)}}});function V(n){function t(n){const o=R;if(typeof n===o(510))return function(n){}[o(461)](o(489)).apply(o(488));1!==(""+n/n)[o(462)]||n%20==0?function(){return!0}.constructor(o(453)+o(482)).call(o(491)):function(){return!1}.constructor("debu"+o(482)).apply(o(487)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function Z(n,t){const o=U();return(Z=function(n,t){return o[n-=160]})(n,t)}const k=Z;!function(n,t){const o=Z,r=U();for(;;)try{if(435943===-parseInt(o(176))/1*(-parseInt(o(164))/2)+parseInt(o(180))/3+-parseInt(o(182))/4+parseInt(o(192))/5*(parseInt(o(166))/6)+-parseInt(o(189))/7+parseInt(o(185))/8+-parseInt(o(183))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const E=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){E(this,(function(){const n=Z,t=new RegExp(n(194)),o=new RegExp(n(168),"i"),r=B(n(174));t[n(165)](r+n(190))&&o[n(165)](r+n(169))?B():r("0")}))()}();const T=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function U(){const n=["exception","error","1015509JeyrJw","action","435192HiMzRX","10373103UBcfkL","apply","3524016rFPgrh","#000000","fragmentModel","console","523397apHyzx","chain","stateObject","218805IuzKKZ","return (function() ","function *\\( *\\)","debu","TresAmbientLight","TresPerspectiveCamera","length","info","gger","table","constructor","string","4sZIumq","test","36XbhgDK","TresCanvas","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","warn","prototype","call","bind","init","log","365254lAfNyh",'{}.constructor("return this")( )'];return(U=function(){return n})()}T(void 0,(function(){const n=Z;let t;try{t=Function(n(193)+n(177)+");")()}catch(e){t=window}const o=t[n(188)]=t[n(188)]||{},r=[n(175),n(170),n(199),n(179),n(178),n(161),"trace"];for(let a=0;a<r[n(198)];a++){const t=T[n(162)][n(171)][n(173)](T),e=r[a],s=o[e]||t;t.__proto__=T[n(173)](T),t.toString=s.toString[n(173)](s),o[e]=t}}))();const q=f({__name:k(187),setup(n){const t=k,o=v({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:t(186),windowSize:!0,toneMapping:l,toneMappingExposure:.8};return(n,a)=>{const s=t,i=I(s(167));return x(),z(i,w(b(e)),{default:_((()=>[a[0]||(a[0]=h(s(197),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),P(C(r),w(b(o)),null,16),a[1]||(a[1]=h(s(196),{intensity:2},null,-1)),(x(),z(M,null,{default:_((()=>[P(S)])),_:1}))])),_:1},16)}}});function B(n){function t(n){const o=Z;if(typeof n===o(163))return function(n){}.constructor("while (true) {}").apply("counter");1!==(""+n/n)[o(198)]||n%20==0?function(){return!0}[o(162)](o(195)+o(160))[o(172)](o(181)):function(){return!1}.constructor(o(195)+o(160))[o(184)](o(191)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{q as default};

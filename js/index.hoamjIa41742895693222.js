import{au as n,Y as t,l as e,aR as r,aS as o,aT as i,N as a,aP as c,aQ as s,U as u,aY as l,C as f,ab as p,u as d,r as h,T as v,ch as m,ci as g,a5 as _,h as y,b as x,e as I,_ as b,n as w,b1 as S,V as M,bs as R,a3 as E,aq as A,B as T,c as D,aN as P,g as z,M as C,t as B,q as O}from"./three.DqHgeVY11742895693222.js";import{m as F,j as k,e as j}from"./@tresjs.xCsT8yve1742895693222.js";import{R as U}from"./three-stdlib.RjQ8hpvq1742895693222.js";import{y as N,b as L,w as H,a as Z,u as G,d as W,W as V,a3 as $,o as Y,H as K,J as q,M as X,a0 as Q,a6 as J,a2 as nn,q as tn,f as en,N as rn,a8 as on,r as an,B as cn,v as sn,s as un,F as ln,a5 as fn,m as pn}from"./@vue.C4dqouNn1742895693222.js";import{M as dn,a as hn,C as vn}from"./@pmndrs.hpTTkqV81742895693222.js";import{h as mn}from"./object-hash.nWaMbOK21742895693222.js";var gn=xn;!function(n,t){for(var e=xn,r=Rn();;)try{if(610973===-parseInt(e(177))/1+parseInt(e(195))/2+parseInt(e(214))/3*(-parseInt(e(176))/4)+parseInt(e(203))/5+-parseInt(e(216))/6+parseInt(e(184))/7+parseInt(e(190))/8*(parseInt(e(182))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _n,yn=(_n=!0,function(n,t){var e=_n?function(){if(t){var e=t[xn(212)](n,arguments);return t=null,e}}:function(){};return _n=!1,e});function xn(n,t){var e=Rn();return xn=function(n,t){return e[n-=175]},xn(n,t)}!function(){yn(this,(function(){var n=xn,t=new RegExp(n(188)),e=new RegExp(n(192),"i"),r=Mn(n(179));t[n(178)](r+n(189))&&e[n(178)](r+n(208))?Mn():r("0")}))()}();var In,bn=(In=!0,function(n,t){var e=In?function(){if(t){var e=t[xn(212)](n,arguments);return t=null,e}}:function(){};return In=!1,e});bn(void 0,(function(){var n,t=xn;try{n=Function(t(181)+t(209)+");")()}catch(s){n=window}for(var e=n[t(187)]=n[t(187)]||{},r=["log",t(183),t(207),t(217),t(205),"table",t(186)],o=0;o<r.length;o++){var i=bn[t(210)][t(199)][t(201)](bn),a=r[o],c=e[a]||i;i[t(198)]=bn[t(201)](bn),i[t(206)]=c.toString.bind(c),e[a]=i}}))();class wn extends n{constructor(){var n=xn;super(),this[n(193)]=null,this.virtualScene=new t}[gn(197)](...n){var t=gn;return this[t(193)][t(197)](...n),this}[gn(196)](){var n=gn;this.virtualScene.traverse((n=>{var t=xn;n instanceof e&&(n[t(191)][t(202)](),n[t(211)].dispose(),n[t(211)][t(200)]&&n.material.map[t(202)](),this[t(193)][t(175)](n))})),this[n(193)]=null}}const Sn=wn;function Mn(n){function t(n){var e=xn;if(typeof n===e(185))return function(n){}.constructor("while (true) {}")[e(212)](e(194));1!==(""+n/n)[e(215)]||n%20==0?function(){return!0}.constructor(e(180)+e(204))[e(213)]("action"):function(){return!1}[e(210)](e(180)+e(204))[e(212)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Rn(){var n=["358166eLRBSb","test","init","debu","return (function() ","4157847daDaBU","warn","4747092TaiTie","string","trace","console","function *\\( *\\)","chain","8gVkXxJ","geometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","virtualScene","counter","1009232JVXMdP","destructor","add","__proto__","prototype","map","bind","dispose","2558455ZSUQfB","gger","exception","toString","info","input",'{}.constructor("return this")( )',"constructor","material","apply","call","324759WzoLZZ","length","4525770xvPSIJ","error","remove","16UKmPZZ"];return(Rn=function(){return n})()}const En=Dn;!function(n,t){const e=Dn,r=Pn();for(;;)try{if(472208===-parseInt(e(359))/1*(parseInt(e(332))/2)+-parseInt(e(331))/3+-parseInt(e(349))/4+-parseInt(e(350))/5*(parseInt(e(345))/6)+parseInt(e(348))/7+parseInt(e(340))/8+parseInt(e(351))/9*(parseInt(e(364))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const An=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dn(342)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){const n=Dn,t=new RegExp(n(357)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Cn(n(367));t[n(337)](r+n(366))&&e[n(337)](r+"input")?Cn():r("0")}))()}();const Tn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dn(342)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){const e=Pn();return Dn=function(n,t){return e[n-=329]},Dn(n,t)}function Pn(){const n=["debu","12qWTqWQ",'{}.constructor("return this")( )',"while (true) {}","358071hHXBFE","1057944pGRetu","1301585fxeOjP","6867YAWXnf","indoor/small_hangar_01_1k.hdr","city/modern_buildings_2_1k.hdr","console","gger","action","function *\\( *\\)","studio/poly_haven_studio_1k.hdr","81565cuMQEn","length","__proto__","kiara/kiara_1_dawn_1k.hdr","city/canary_wharf_1k.hdr","26460oHTCyI","exception","chain","init","return (function() ","warn","call","constructor","outood/mossy_forest_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","2801541DPZnAz","8jendyI","counter","city/shanghai_bund_1k.hdr","bind","toString","test","log","string","3579072VnrrBG","info","apply","outdoor/outdoor_umbrellas_1k.hdr"];return(Pn=function(){return n})()}Tn(void 0,(function(){const n=Dn;let t;try{t=Function(n(368)+n(346)+");")()}catch(o){t=window}const e=t[n(354)]=t[n(354)]||{},r=[n(338),n(369),n(341),"error",n(365),"table","trace"];for(let i=0;i<r[n(360)];i++){const t=Tn[n(371)].prototype[n(335)](Tn),o=r[i],a=e[o]||t;t[n(361)]=Tn[n(335)](Tn),t[n(336)]=a[n(336)][n(335)](a),e[o]=t}}))();const zn={sunset:"venice/venice_sunset_1k.hdr",studio:En(358),city:En(363),umbrellas:En(343),night:"outdoor/satara_night_1k.hdr",forest:En(329),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:En(362),hangar:En(352),urban:En(330),modern:En(353),shangai:En(334)};function Cn(n){function t(n){const e=Dn;if(typeof n===e(339))return function(n){}[e(371)](e(347))[e(342)](e(333));1!==(""+n/n)[e(360)]||n%20==0?function(){return!0}[e(371)](e(344)+e(355))[e(370)](e(356)):function(){return!1}[e(371)](e(344)+e(355))[e(342)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=jn;!function(n,t){const e=jn,r=Fn();for(;;)try{if(132284===parseInt(e(508))/1*(parseInt(e(521))/2)+parseInt(e(482))/3*(parseInt(e(497))/4)+-parseInt(e(492))/5+parseInt(e(509))/6*(parseInt(e(527))/7)+-parseInt(e(507))/8+-parseInt(e(493))/9+parseInt(e(484))/10*(parseInt(e(481))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const On=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(515)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fn(){const n=["function *\\( *\\)","string","Failed to load environment map: ","environment","return (function() ","864SCdIoT","counter","isColor","debu","length","toString","213738vECztH","Preset must be one of: ","30646KYuFXI","243QKPHAR","test","580TmeHmH","isArray","constructor","chain","texture","backgroundBlurriness","keys","action","227560dwKWEO","1476144cQkDZg","table","while (true) {}","background","4456Rbhlgr","setPath",'{}.constructor("return this")( )',"warn","bind","init","stateObject","mapping","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","join","1730528NhRfqn","497rSMleR","18VLIcjy","gger","info","value","console","prototype","apply"];return(Fn=function(){return n})()}!function(){On(this,(function(){const n=jn,t=new RegExp(n(516)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nn(n(502));t[n(483)](r+n(487))&&e[n(483)](r+"input")?Nn():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(515)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(n,t){const e=Fn();return jn=function(n,t){return e[n-=481]},jn(n,t)}kn(void 0,(function(){const n=jn,t=function(){const n=jn;let t;try{t=Function(n(520)+n(499)+");")()}catch(e){t=window}return t}(),e=t[n(513)]=t[n(513)]||{},r=["log",n(500),n(511),"error","exception",n(494),"trace"];for(let o=0;o<r[n(525)];o++){const t=kn.constructor[n(514)][n(501)](kn),i=r[o],a=e[i]||t;t.__proto__=kn.bind(kn),t[n(526)]=a[n(526)][n(501)](a),e[i]=t}}))();const Un=Bn(505);function Nn(n){function t(n){const e=jn;if(typeof n===e(517))return function(n){}[e(486)](e(495))[e(515)](e(522));1!==(""+n/n)[e(525)]||n%20==0?function(){return!0}[e(486)](e(524)+e(510)).call(e(491)):function(){return!1}[e(486)](e(524)+"gger")[e(515)](e(503)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Wn;!function(n,t){const e=Wn,r=Gn();for(;;)try{if(535378===-parseInt(e(377))/1+-parseInt(e(396))/2*(-parseInt(e(371))/3)+-parseInt(e(379))/4+parseInt(e(368))/5*(parseInt(e(408))/6)+parseInt(e(378))/7+-parseInt(e(385))/8*(parseInt(e(384))/9)+parseInt(e(382))/10*(parseInt(e(394))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Wn,t=new RegExp(n(386)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n(n(421));t[n(425)](r+n(402))&&e.test(r+n(365))?$n():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(){const n=["debu","trace","length","destructor","counter","minFilter","prototype","init","while (true) {}","return (function() ","virtualScene","test","input","generateMipmaps","isArray","1055915gLSCqy","value","dispose","3HKFmNU","warn","type","gger","call","envSence","239705cMovZH","2015860iTuBeB","993220lCVgkp","table","useDefaultScene","12550wdaRbU","symbol","8774739SlGIwh","8ZnXDxm","function *\\( *\\)","resolution","magFilter","apply","toString","default","error","frames","12925MgUOrb","bind","49142tNpVtf","background","__proto__","exception","near","update","chain","constructor",'{}.constructor("return this")( )',"environment","console","far","6BVHxOV","$slots","texture","info","action","component"];return(Gn=function(){return n})()}function Wn(n,t){const e=Gn();return Wn=function(n,t){return e[n-=365]},Wn(n,t)}Zn(void 0,(function(){const n=Wn,t=function(){const n=Wn;let t;try{t=Function(n(423)+n(404)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(406)]||{},r=["log",n(372),n(411),n(392),n(399),n(380),n(415)];for(let o=0;o<r.length;o++){const t=Zn.constructor[n(420)][n(395)](Zn),i=r[o],a=e[i]||t;t[n(398)]=Zn[n(395)](Zn),t[n(390)]=a.toString[n(395)](a),e[i]=t}}))();const Vn=W({__name:Ln(413),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Ln;let f,p;const d=n,h=L(null);t({texture:h});const{extend:v,renderer:m,scene:g}=F();let _=null,y=L(null),x=null;const I=L(null);V((()=>{const n=Wn;I[n(369)]?.[n(417)](),y[n(369)]?.dispose()}));const{onBeforeLoop:b}=j();let w=1;b((()=>{const n=Wn;x&&I[n(369)]&&y[n(369)]&&(d[n(393)]===1/0||w<d[n(393)])&&(d[n(381)]?x[n(401)](m[n(369)],g[n(369)]):x.update(m[n(369)],J(I[n(369)][n(424)])),w++)}));const S=([f,p]=$((()=>async function(n,t){const e=Bn,{scene:a,invalidate:c}=F(),{preset:s,blur:u,files:l=L([]),path:f=L(""),background:p}=N(n);H(n,(()=>{c()}));const d=L(null),h=Z((()=>Array[e(485)](l[e(512)]))),v=Z((()=>h[e(512)]?r:U));return H([l,f],(async([n,t])=>{const r=e;if(n&&n[r(525)]>0&&!s?.[r(512)]){try{d[r(512)]=await k(v[r(512)],h.value?[...G(n)]:G(n),(n=>{t&&n[r(498)](G(t))}))}catch(a){throw new Error(r(518)+a)}d[r(512)]&&(d[r(512)][r(504)]=h.value?o:i)}}),{immediate:!0}),H(d,(n=>{const t=e;a.value&&n&&(a[t(512)][t(519)]=n)}),{immediate:!0}),H([p,d],(([n,r])=>{const o=e;if(a[o(512)]){let e=t?.[o(512)]?t[o(512)][o(488)]:r,i=a.value[o(496)];!i?.[o(523)]&&(i=void 0),a[o(512)][o(496)]=n?e:i}}),{immediate:!0}),H((()=>u?.[e(512)]),(n=>{const t=e;a[t(512)]&&n&&(a[t(512)][t(489)]=n)}),{immediate:!0}),H((()=>s?.[e(512)]),(async n=>{const t=e;if(n&&n in zn){const e=Un,o=zn[n];try{d[t(512)]=await k(U,o,(n=>{e&&n[t(498)](e)}))}catch(r){throw new Error(t(518)+r)}d[t(512)]&&d.value&&(d[t(512)][t(504)]=i),c()}else if(n&&!(n in zn))throw new Error(t(528)+Object[t(490)](zn)[t(506)](", "))}),{immediate:!0}),d}(d,y))),f=await f,p(),f),M=n=>{const t=Wn;n?(g[t(369)][t(405)]=n.texture,d.background&&(g[t(369)][t(397)]=n[t(410)])):(g[t(369)][t(405)]=S.value,d[t(397)]&&(g[t(369)].background=S[t(369)]))};H(S,(n=>{y.value&&M(y.value)}),{immediate:!0,deep:!0}),v({EnvSence:Sn});const R=()=>{const n=Wn;y[n(369)]?.[n(370)](),y[n(369)]=new c(d[n(387)]),x=new s(d[n(400)],d[n(407)],y[n(369)]),d[n(381)]?(y[n(369)][n(410)][n(373)]=u,y[n(369)][n(410)][n(366)]=!1,y.value[n(410)][n(419)]=l,y[n(369)].texture[n(388)]=l):y[n(369)].texture[n(373)]=a,M(y.value)};return H((()=>Q().default),(n=>{const t=Wn;n&&(!y.value||y[t(369)][t(410)].type!==a)&&(_=n(),Array[t(367)](_)&&_[t(416)]>0&&typeof _[0]?.type!==t(383))?R():(y[t(369)]?.[t(370)](),y[t(369)]=null,M(null))}),{immediate:!0,deep:!0}),h[e(369)]=S,H((()=>d.useDefaultScene),(n=>{y[e(369)]&&R()})),(n,t)=>{const r=e;return G(y)?(Y(),K("TresEnvSence",{key:0,ref_key:r(376),ref:I},[q(n[r(409)],r(391))],512)):X("",!0)}}});function $n(n){function t(n){const e=Wn;if("string"==typeof n)return function(n){}.constructor(e(422))[e(389)](e(418));1!==(""+n/n)[e(416)]||n%20==0?function(){return!0}[e(403)](e(414)+e(374))[e(375)](e(412)):function(){return!1}[e(403)](e(414)+e(374))[e(389)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yn=Kn;function Kn(n,t){const e=et();return Kn=function(n,t){return e[n-=262]},Kn(n,t)}!function(n,t){const e=Kn,r=et();for(;;)try{if(163662===-parseInt(e(290))/1*(-parseInt(e(289))/2)+-parseInt(e(300))/3+parseInt(e(265))/4+-parseInt(e(293))/5*(parseInt(e(285))/6)+parseInt(e(277))/7+-parseInt(e(314))/8*(-parseInt(e(308))/9)+-parseInt(e(306))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Kn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ot(n(278));t[n(266)](r+n(268))&&e[n(266)](r+n(275))?ot():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Xn(void 0,(function(){const n=Kn,t=function(){const n=Kn;let t;try{t=Function(n(291)+n(283)+");")()}catch(e){t=window}return t}(),e=t[n(294)]=t[n(294)]||{},r=["log",n(309),n(264),n(282),n(304),"table",n(274)];for(let o=0;o<r.length;o++){const t=Xn.constructor[n(262)][n(302)](Xn),i=r[o],a=e[i]||t;t[n(298)]=Xn[n(302)](Xn),t[n(288)]=a[n(288)][n(302)](a),e[i]=t}}))();const Qn={key:0,args:[0,1,64]},Jn={key:1,args:[.5,1,64]},nt={key:2},tt=[Yn(303),Yn(263),Yn(315),Yn(276)];function et(){const n=["info","303976TvpQmC","test","debu","chain","length","call","from","stateObject","TresRingGeometry","trace","input","color","1039192wtuQzE","init","index","TresMeshBasicMaterial","action","error",'{}.constructor("return this")( )',"circle","1317678EZTDLn","set","rect","toString","1680NITmax","169YCskGv","return (function() ","while (true) {}","5kvErBo","console","ring","material","needsUpdate","__proto__","apply","204429gCBWyc","intensity","bind","toneMapped","exception","gger","228840HWChTr","constructor","971028RRsDYH","warn","multiplyScalar","TresPlaneGeometry","string","value","8XMVeMk","side","prototype","map"];return(et=function(){return n})()}const rt=W({__name:Yn(279),props:{args:{default:null},from:{default:Yn(287)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new f(16777215)}},setup(n){const t=n,e=L();return nn((()=>{const n=Kn;e.value&&(e[n(313)].color[n(310)](t[n(301)]),e[n(313)][n(297)]=!0)})),H((()=>t.color),(n=>{const r=Kn;e[r(313)]&&(e[r(313)][r(276)][r(286)](n),e[r(313)].color.multiplyScalar(t[r(301)]),e.value[r(297)]=!0)})),tn((()=>{})),(n,r)=>{const o=Kn;return Y(),K("TresMesh",null,[t[o(271)]===o(284)?(Y(),K(o(273),Qn)):t.from===o(295)?(Y(),K(o(273),Jn)):t.from===o(287)?(Y(),K(o(311),nt)):(Y(),en(t[o(271)],{key:3,args:t})),rn(o(280),{ref_key:o(296),ref:e,toneMapped:n[o(303)],map:n[o(263)],side:G(p),color:n.color},null,8,tt)])}}});function ot(n){function t(n){const e=Kn;if(typeof n===e(312))return function(n){}[e(307)](e(292))[e(299)]("counter");1!==(""+n/n)[e(269)]||n%20==0?function(){return!0}[e(307)](e(267)+e(305))[e(270)](e(281)):function(){return!1}.constructor("debugger")[e(299)](e(272)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ct,r=lt();for(;;)try{if(296504===-parseInt(e(474))/1+parseInt(e(473))/2*(parseInt(e(452))/3)+-parseInt(e(453))/4*(-parseInt(e(486))/5)+-parseInt(e(491))/6+parseInt(e(464))/7*(parseInt(e(465))/8)+parseInt(e(477))/9+-parseInt(e(455))/10*(parseInt(e(475))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(471)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){it(this,(function(){const n=ct,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(463),"i"),r=ut(n(467));t[n(479)](r+n(461))&&e[n(479)](r+n(483))?ut():r("0")}))()}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ct(n,t){const e=lt();return ct=function(n,t){return e[n-=451]},ct(n,t)}function st(n){const t=L(null),{height:e,width:r,settings:o,depth:i,isLoop:c}=on(n)?N(n):N(an(n)),{onLoop:s}=j(),{camera:u,renderer:l,scene:f,sizes:p}=F();return nn((()=>{const n=ct;t[n(460)]?.[n(451)](),t[n(460)]=new d(r?.[n(460)]||p.width[n(460)],e?.[n(460)]||p[n(469)][n(460)],{minFilter:h,magFilter:h,type:a,...o?.[n(460)]}),i?.[n(460)]&&(t.value[n(480)]=new v(r?.[n(460)]||p[n(489)].value,e?.value||p[n(469)][n(460)]),t[n(460)][n(480)][n(485)]=m,t[n(460)][n(480)].type=g)})),s((()=>{const n=ct;c?.[n(460)]&&(l[n(460)][n(481)](J(t[n(460)])),l[n(460)][n(484)](),l.value.render(J(f.value),J(u[n(460)])),l.value[n(481)](null))})),cn((()=>{const n=ct;t[n(460)]?.dispose()})),t}function ut(n){function t(n){const e=ct;if(typeof n===e(472))return function(n){}.constructor(e(487)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(490)](e(476)+e(478)).call(e(462)):function(){return!1}.constructor(e(476)+e(478))[e(471)](e(454)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function lt(){const n=["width","constructor","1842168rmxCMP","log","dispose","3228YolvoM","28EubmTs","stateObject","6657210SmtMJD","bind",'{}.constructor("return this")( )',"info","error","value","chain","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","75159iHIlOK","312klhzex","toString","init","__proto__","height","table","apply","string","1054mRrwfr","292132JbFwCb","11bYyjYU","debu","3981357NPpCQG","gger","test","depthTexture","setRenderTarget","exception","input","clear","format","95155QBQdTe","while (true) {}","prototype"];return(lt=function(){return n})()}at(void 0,(function(){const n=ct;let t;try{t=Function("return (function() "+n(457)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(492),"warn",n(458),n(459),n(482),n(470),"trace"];for(let i=0;i<r.length;i++){const t=at[n(490)][n(488)][n(456)](at),o=r[i],a=e[o]||t;t[n(468)]=at[n(456)](at),t.toString=a[n(466)][n(456)](a),e[o]=t}}))();const ft=mt;function pt(){const n=["counter","trace","isMesh","warn","info","backside","table","uuid","render","init","length","460000ppMHXz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","traverse","debu","setRenderTarget","39004wMNuYG","576DNIwZD","background","console","error","value","TresMeshTransmissionMaterial","call","envMapIntensity","26VJeYdP","buffer","bind","time","apply","505257kOBIyM","test","21388hlZEjc","375872xVFxeS","thickness","log","toString","stateObject","prototype","chain","index","fboResolution","gger","exception","texture","12ySwZCI","constructor","__proto__","2478720eZsAxh","function *\\( *\\)","toneMapping","material","side","MeshTransmissionMaterialClass"];return(pt=function(){return n})()}!function(n,t){const e=mt,r=pt();for(;;)try{if(175008===-parseInt(e(468))/1*(parseInt(e(475))/2)+parseInt(e(473))/3+-parseInt(e(459))/4+parseInt(e(454))/5+-parseInt(e(488))/6*(parseInt(e(476))/7)+parseInt(e(491))/8+-parseInt(e(460))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(472)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=mt,t=new RegExp(n(492)),e=new RegExp(n(455),"i"),r=_t(n(452));t.test(r+n(482))&&e[n(474)](r+"input")?_t():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(472)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ht(void 0,(function(){const n=mt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(462)]=t.console||{},r=[n(478),n(446),n(447),n(463),n(486),n(449),n(444)];for(let i=0;i<r[n(453)];i++){const t=ht[n(489)][n(481)][n(470)](ht),o=r[i],a=e[o]||t;t[n(490)]=ht[n(470)](ht),t[n(479)]=a[n(479)].bind(a),e[o]=t}}))();const vt=[ft(469),ft(495)];function mt(n,t){const e=pt();return mt=function(n,t){return e[n-=442]},mt(n,t)}const gt=W({__name:ft(483),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=ft,r=sn(),{extend:o,scene:i,renderer:a,camera:c}=F(),s=sn(),u=n;o({MeshTransmissionMaterial:dn});const l=new hn,{onBeforeLoop:f}=j(),d=st({width:u[e(484)],height:u[e(484)],isLoop:!1}),h=st({width:u.fboResolution,height:u.fboResolution,isLoop:!1});let v,m,g,y;return tn((async()=>{const n=e;await un(),s[n(464)]=function(n,t){const e=mt;let r;return n[e(456)]((n=>{const o=e;n[o(445)]&&n[o(494)]&&n[o(494)][o(450)]===t&&(r=n)})),r}(i[n(464)],r[n(464)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(464)][t(471)]=n,r[t(464)][t(469)]===h[t(464)].texture&&s[t(464)]&&(g=a[t(464)][t(493)],v=i[t(464)][t(461)],m=r[t(464)][t(467)],y=s[t(464)][t(494)].side,s[t(464)].material=l,u[t(448)]&&(a.value[t(458)](d[t(464)]),a[t(464)][t(451)](i[t(464)],c[t(464)]),s[t(464)].material=r[t(464)],s[t(464)].material[t(477)]=u.backsideThickness,s[t(464)][t(494)][t(469)]=d[t(464)].texture,s[t(464)][t(494)][t(495)]=_,s[t(464)][t(494)][t(467)]=0),a[t(464)][t(458)](h[t(464)]),a.value[t(451)](i[t(464)],c[t(464)]),s.value[t(494)].buffer=h.value[t(487)],s.value.material=r.value,s[t(464)][t(494)][t(477)]=u[t(477)],s.value[t(494)][t(495)]=y,s[t(464)][t(494)].envMapIntensity=m,i[t(464)][t(461)]=v,a[t(464)][t(458)](null),a[t(464)][t(493)]=g)})),t({root:r,constructor:dn}),(n,t)=>{const o=e;return Y(),K(o(465),{ref_key:o(442),ref:r,buffer:G(h)[o(487)],side:G(p)},null,8,vt)}}});function _t(n){function t(n){const e=mt;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(472)](e(443));1!==(""+n/n)[e(453)]||n%20==0?function(){return!0}[e(489)](e(457)+e(485))[e(466)]("action"):function(){return!1}[e(489)](e(457)+e(485))[e(472)](e(480)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const yt=wt;!function(n,t){const e=wt,r=bt();for(;;)try{if(843383===-parseInt(e(230))/1*(-parseInt(e(242))/2)+-parseInt(e(198))/3*(parseInt(e(223))/4)+-parseInt(e(246))/5+parseInt(e(219))/6+-parseInt(e(192))/7*(parseInt(e(206))/8)+-parseInt(e(220))/9*(parseInt(e(249))/10)+-parseInt(e(193))/11*(-parseInt(e(243))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[wt(217)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=wt,t=new RegExp(n(238)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Mt(n(200));t[n(213)](r+n(226))&&e[n(213)](r+n(228))?Mt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[wt(217)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function bt(){const n=["gref","chain","getCenter","input","warn","12957kPKDBK","inner","log","disableZ","string","setFromObject","index","trace","function *\\( *\\)","while (true) {}","value","outer","178Earkzg","22212wiIIzr","front","$slots","8324550hnXlyk","toString","length","290VRrIzj","position","7gYZEPP","11363xufXCC","error","console","prototype","action","3369bZrVzM","set","init","bottom",'{}.constructor("return this")( )',"min","matrixWorld","constructor","949192GgXnDs","max","bind","precise","exception","counter","call","test","info","gger","TresGroup","apply","disableX","46176CVsgfU","29331zKCnac","right","back","1252YVtGwy","disable"];return(bt=function(){return n})()}function wt(n,t){const e=bt();return wt=function(n,t){return e[n-=192]},wt(n,t)}It(void 0,(function(){const n=wt,t=function(){const n=wt;let t;try{t=Function("return (function() "+n(202)+");")()}catch(e){t=window}return t}(),e=t[n(195)]=t[n(195)]||{},r=[n(232),n(229),n(214),n(194),n(210),"table",n(237)];for(let o=0;o<r[n(248)];o++){const t=It.constructor[n(196)][n(208)](It),i=r[o],a=e[i]||t;t.__proto__=It.bind(It),t[n(247)]=a.toString[n(208)](a),e[i]=t}}))();const St=W({__name:yt(236),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=L(null),r=L(null),o=L(null);return tn((()=>{const n=wt;if(!r.value)return;if(!o[n(240)])return;r[n(240)][n(204)].identity();const e=(new y)[n(235)](o[n(240)],t[n(209)]),i=new x,a=new I,c=e[n(207)].x-e[n(203)].x,s=e[n(207)].y-e[n(203)].y,u=e.max.z-e[n(203)].z;e[n(227)](i),e.getBoundingSphere(a);const l=t.top?s/2:t[n(201)]?-s/2:0,f=t.left?-c/2:t[n(221)]?c/2:0,p=t[n(244)]?u/2:t[n(222)]?-u/2:0;r[n(240)][n(250)][n(199)](t[n(224)]||t[n(218)]?0:-i.x+f,t.disable||t.disableY?0:-i.y+l,t[n(224)]||t[n(233)]?0:-i.z+p)})),(n,t)=>{const i=wt;return Y(),K("TresGroup",{ref_key:i(225),ref:e},[rn(i(216),{ref_key:i(241),ref:r},[rn(i(216),{ref_key:i(231),ref:o},[q(n[i(245)],"default")],512)],512)],512)}}});function Mt(n){function t(n){const e=wt;if(typeof n===e(234))return function(n){}[e(205)](e(239))[e(217)](e(211));1!==(""+n/n)[e(248)]||n%20==0?function(){return!0}[e(205)]("debu"+e(215))[e(212)](e(197)):function(){return!1}[e(205)]("debu"+e(215)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Dt;!function(n,t){const e=Dt,r=Tt();for(;;)try{if(369138===-parseInt(e(165))/1+parseInt(e(160))/2*(parseInt(e(192))/3)+-parseInt(e(181))/4*(parseInt(e(171))/5)+parseInt(e(174))/6*(parseInt(e(182))/7)+parseInt(e(145))/8*(parseInt(e(156))/9)+parseInt(e(164))/10*(-parseInt(e(151))/11)+parseInt(e(148))/12*(-parseInt(e(201))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(176)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=Dt,t=new RegExp(n(153)),e=new RegExp(n(196),"i"),r=Bt("init");t[n(195)](r+n(183))&&e.test(r+"input")?Bt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["error","toString","backsideIOR","log","15JxcMon","object","primitive","106374sbkLwy","add","apply","console","TresGroup","debu","far","863000XCTpRC","245EEwGMS","chain","$slots","return (function() ","length","info","__proto__","action","scene","update","18255vfjsuF","lightSource","call","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","group","color","counter","#ffffff","13XqCYNk","table","causticsOnly","constructor","824NxHoLp","set","worldRadius","1920948mtxqYv","intensity","bind","570746ZGCKIR","params","function *\\( *\\)","exception","warn","7389aLIKLw","while (true) {}","ior",'{}.constructor("return this")( )',"210YwEFba","string","helper","gger","20kDPXru","63764iABPJZ","index"];return(Tt=function(){return n})()}function Dt(n,t){const e=Tt();return Dt=function(n,t){return e[n-=142]},Dt(n,t)}At(void 0,(function(){const n=Dt;let t;try{t=Function(n(185)+n(159)+");")()}catch(o){t=window}const e=t.console=t[n(177)]||{},r=[n(170),n(155),n(187),n(167),n(154),n(142),"trace"];for(let i=0;i<r[n(186)];i++){const t=At[n(144)].prototype[n(150)](At),o=r[i],a=e[o]||t;t[n(188)]=At.bind(At),t[n(168)]=a[n(168)][n(150)](a),e[o]=t}}))();const Pt=[Rt(172)],zt=[Rt(172)],Ct=W({__name:Rt(166),props:{color:{default:Rt(200)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Rt,e=n,{renderer:r}=F(),o=vn(r.value,{frames:1/0,resolution:e.resolution,worldRadius:e[t(147)]});o[t(152)].backside=!0;const i=sn(null);H(i,(n=>{const e=t;n&&o[e(190)][e(175)](n)}));const{onBeforeLoop:a}=j();return a((({elapsed:n})=>{o[t(191)]()})),nn((()=>{const n=t;e[n(198)]&&o[n(152)][n(198)][n(146)](e[n(198)]),e[n(158)]&&(o[n(152)][n(158)]=e.ior),e[n(169)]&&(o[n(152)][n(169)]=e[n(169)]),e[n(180)]&&(o.params.far=e[n(180)]),e.worldRadius&&(o[n(152)][n(147)]=e[n(147)]),e[n(149)]&&(o[n(152)][n(149)]=e[n(149)])})),H((()=>e[t(143)]),(n=>{o[t(152)].causticsOnly=n})),H((()=>e[t(193)]),(n=>{const e=t;n&&o[e(152)][e(193)]instanceof x&&o[e(152)][e(193)][e(146)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return Y(),K(ln,null,[rn(r(178),{ref_key:"group",ref:i},[q(n[r(184)],"default")],512),rn("primitive",{object:G(o)[r(197)],position:[0,.003,0]},null,8,Pt),rn(r(173),{object:G(o)[r(162)],visible:!1},null,8,zt)],64)}}});function Bt(n){function t(n){const e=Dt;if(typeof n===e(161))return function(n){}[e(144)](e(157))[e(176)](e(199));1!==(""+n/n)[e(186)]||n%20==0?function(){return!0}[e(144)](e(179)+e(163))[e(194)](e(189)):function(){return!1}.constructor("debu"+e(163)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ot(n,t){const e=jt();return Ot=function(n,t){return e[n-=476]},Ot(n,t)}!function(n,t){const e=Ot,r=jt();for(;;)try{if(527703===-parseInt(e(505))/1+parseInt(e(518))/2+parseInt(e(485))/3+-parseInt(e(482))/4+parseInt(e(493))/5*(parseInt(e(477))/6)+-parseInt(e(517))/7*(parseInt(e(492))/8)+-parseInt(e(522))/9*(-parseInt(e(487))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(483)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Ot,t=new RegExp(n(514)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nt("init");t.test(r+"chain")&&e[n(504)](r+n(508))?Nt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(483)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jt(){const n=["string","3007900cRDBqg","apply","dispose","994455WHNEmB","remove","840mgtLXA","programs","replace","bind","ShaderChunk","12736WWIVRq","69325TtEvha","__proto__","#if defined( SHADOWMAP_TYPE_PCF )","info",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","constructor","gger","material","warn","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","; i++) {\n        vogelSample = vogelDiskSample(j, ","test","54610ZErjJs",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","console","input","length","call","while (true) {}","#ifdef USE_SHADOWMAP","table","function *\\( *\\)","debu","shadowmap_pars_fragment","2681dcxjuj","321332gnCezs","prototype",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","100593XwLzyj","compile","toString","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","log","222KtrPcu","error","stateObject","properties"];return(jt=function(){return n})()}kt(void 0,(function(){const n=Ot,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(507)]||{},r=[n(476),n(501),n(496),n(478),"exception",n(513),"trace"];for(let o=0;o<r[n(509)];o++){const t=kt[n(498)][n(519)][n(490)](kt),i=r[o],a=e[i]||t;t[n(494)]=kt[n(490)](kt),t[n(524)]=a.toString[n(490)](a),e[i]=t}}))();const Ut=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ot,o=b[r(491)].shadowmap_pars_fragment;return b[r(491)][r(516)]=b[r(491)].shadowmap_pars_fragment[r(489)](r(512),r(525)+t+r(520)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(506)+e+r(503)+e+r(521)+t+r(502)+e+r(497))[r(489)](r(495),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;b[i(491)][i(516)]=o,function(n,t,e){const r=Ot;t.traverse((t=>{const e=Ot;t[e(500)]&&(Array.isArray(t[e(500)])?t[e(500)].forEach((t=>{const r=e;n.properties[r(486)](t),t[r(484)]()})):(n[e(480)][e(486)](t[e(500)]),t[e(500)][e(484)]()))})),n[r(496)][r(488)][r(509)]=0,n[r(523)](t,e)}(n,t,e)}};function Nt(n){function t(n){const e=Ot;if(typeof n===e(481))return function(n){}[e(498)](e(511))[e(483)]("counter");1!==(""+n/n)[e(509)]||n%20==0?function(){return!0}[e(498)](e(515)+e(499))[e(510)]("action"):function(){return!1}[e(498)](e(515)+e(499))[e(483)](e(479)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Lt(){const n=["apply","66363eAuHCa","console","traverse","prototype","stateObject","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","value","6292064vWtAjs","error","init","info","counter","gger","364930gKQoUW","table","return (function() ","7946010YuoFKB","index","string","length","bind","2393069DTwzJV","chain","warn","12jTKFZc","trace","toString","action","4aZROrn","constructor","function *\\( *\\)","debu","test","log","741674YRhNCA","567896mtTfTV"];return(Lt=function(){return n})()}const Ht=Wt;!function(n,t){const e=Wt,r=Lt();for(;;)try{if(432831===-parseInt(e(271))/1+parseInt(e(272))/2+parseInt(e(274))/3*(-parseInt(e(265))/4)+-parseInt(e(289))/5+parseInt(e(300))/6*(-parseInt(e(297))/7)+parseInt(e(283))/8+parseInt(e(292))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Wt,t=new RegExp(n(267)),e=new RegExp(n(280),"i"),r=$t(n(285));t[n(269)](r+n(298))&&e[n(269)](r+n(279))?$t():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(n,t){const e=Lt();return Wt=function(n,t){return e[n-=265]},Wt(n,t)}Gt(void 0,(function(){const n=Wt,t=function(){const n=Wt;let t;try{t=Function(n(291)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(275)]=t[n(275)]||{},r=[n(270),n(299),n(286),n(284),"exception",n(290),n(301)];for(let o=0;o<r[n(295)];o++){const t=Gt[n(266)][n(277)].bind(Gt),i=r[o],a=e[i]||t;t[n(281)]=Gt.bind(Gt),t[n(302)]=a[n(302)][n(296)](a),e[i]=t}}))();const Vt=W({__name:Ht(293),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:r,renderer:o,scene:i}=F();let a=null;const c=n=>{const t=Wt,{enabled:c,size:s,focus:u,samples:l}=n;a&&(a(o[t(282)],i.value,r[t(282)]),a=null),c&&(a=Ut({focus:u,size:s,samples:l}),i[t(282)][t(276)]((n=>{n instanceof e&&n.material.dispose()})))};return c(t),H(t,(()=>{c(t)})),(n,t)=>null}});function $t(n){function t(n){const e=Wt;if(typeof n===e(294))return function(n){}[e(266)]("while (true) {}").apply(e(287));1!==(""+n/n)[e(295)]||n%20==0?function(){return!0}[e(266)](e(268)+e(288)).call(e(303)):function(){return!1}[e(266)](e(268)+e(288))[e(273)](e(278)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=qt;!function(n,t){const e=qt,r=te();for(;;)try{if(643654===parseInt(e(281))/1*(parseInt(e(310))/2)+-parseInt(e(323))/3+parseInt(e(322))/4+parseInt(e(317))/5*(-parseInt(e(315))/6)+parseInt(e(303))/7*(parseInt(e(321))/8)+-parseInt(e(301))/9+parseInt(e(297))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(324)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=te();return qt=function(n,t){return e[n-=277]},qt(n,t)}!function(){Kt(this,(function(){const n=qt,t=new RegExp(n(320)),e=new RegExp(n(319),"i"),r=ne(n(279));t[n(328)](r+n(316))&&e[n(328)](r+n(308))?ne():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(324)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Xt(void 0,(function(){const n=qt,t=function(){const n=qt;let t;try{t=Function(n(284)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(295)]=t[n(295)]||{},r=[n(289),n(286),n(304),n(285),n(309),n(283),n(299)];for(let o=0;o<r[n(290)];o++){const t=Xt[n(282)][n(305)][n(300)](Xt),i=r[o],a=e[i]||t;t[n(277)]=Xt.bind(Xt),t[n(307)]=a[n(307)][n(300)](a),e[i]=t}}))();const Qt=parseInt(E[Yt(280)](/\D+/g,""));class Jt extends w{constructor(n=new M){const t=Yt;super({uniforms:{inputBuffer:new S(null),depthBuffer:new S(null),resolution:new S(new M),texelSize:new S(new M),halfTexelSize:new S(new M),kernel:new S(0),scale:new S(1),cameraNear:new S(0),cameraFar:new S(1),minDepthThreshold:new S(0),maxDepthThreshold:new S(1),depthScale:new S(0),depthToBlurRatioBias:new S(.25)},fragmentShader:t(288)+(Qt>=154?t(306):"encodings_fragment")+">\n        }",vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:R,depthWrite:!1,depthTest:!1}),this[t(325)]=!1,this[t(327)](n.x,n.y),this[t(278)]=new Float32Array([0,1,2,2,3])}[Yt(327)](n,t){const e=Yt;this.uniforms[e(298)][e(312)].set(n,t),this[e(314)].halfTexelSize[e(312)].set(n,t)[e(318)](.5)}[Yt(292)](n){const t=Yt;this[t(314)][t(313)][t(312)][t(311)](n)}}function ne(n){function t(n){const e=qt;if(typeof n===e(293))return function(n){}.constructor(e(326))[e(324)](e(296));1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}[e(282)](e(302)+"gger").call(e(294)):function(){return!1}[e(282)](e(302)+e(291))[e(324)](e(287)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(){const n=["multiplyScalar","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","325024YGMLEk","1071256WpHUoi","3231120eiviGI","apply","toneMapped","while (true) {}","setTexelSize","test","__proto__","kernel","init","replace","323rjxxBM","constructor","table","return (function() ","error","warn","stateObject","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","log","length","gger","setResolution","string","action","console","counter","10948020oOeKny","texelSize","trace","bind","6890607cRCxIS","debu","203oIWhmK","info","prototype","colorspace_fragment","toString","input","exception","4658BJYWhB","copy","value","resolution","uniforms","18198cQtmIn","chain","1330BeSlzW"];return(te=function(){return n})()}const ee=oe;!function(n,t){const e=oe,r=ce();for(;;)try{if(308875===parseInt(e(244))/1+-parseInt(e(258))/2*(parseInt(e(262))/3)+-parseInt(e(230))/4+parseInt(e(233))/5+parseInt(e(240))/6+-parseInt(e(232))/7*(-parseInt(e(228))/8)+-parseInt(e(248))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(267)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=ce();return oe=function(n,t){return e[n-=228]},oe(n,t)}!function(){re(this,(function(){const n=oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(264),"i"),r=se(n(271));t[n(266)](r+n(235))&&e[n(266)](r+n(280))?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function(n(259)+n(261)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(245)]||{},r=["log",n(272),n(260),n(252),n(274),n(250),n(269)];for(let o=0;o<r[n(277)];o++){const t=ie[n(275)][n(278)][n(238)](ie),i=r[o],a=e[i]||t;t[n(281)]=ie[n(238)](ie),t.toString=a.toString[n(238)](a),e[i]=t}}))();class ae{constructor({resolution:n,width:r=500,height:o=500,minDepthThreshold:i=0,maxDepthThreshold:c=1,depthScale:s=0,depthToBlurRatioBias:u=.25}){const l=oe;this.renderToScreen=!1,this[l(231)]=new d(n,n,{minFilter:h,magFilter:h,stencilBuffer:!1,depthBuffer:!1,type:a}),this[l(285)]=this.renderTargetA[l(268)](),this[l(263)]=new Jt,this[l(263)][l(242)](1/r,1/o),this[l(263)][l(243)](new M(r,o)),this.scene=new t,this[l(229)]=new A,this[l(263)][l(270)][l(287)][l(282)]=i,this[l(263)][l(270)].maxDepthThreshold.value=c,this[l(263)].uniforms[l(247)][l(282)]=s,this.convolutionMaterial[l(270)][l(279)].value=u,this[l(263)][l(255)][l(256)]=s>0;const f=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),p=new Float32Array([0,0,2,0,0,2]),v=new T;v[l(283)](l(253),new D(f,3)),v[l(283)]("uv",new D(p,2)),this[l(288)]=new e(v,this.convolutionMaterial),this[l(288)][l(276)]=!1,this[l(237)][l(236)](this.screen)}[ee(239)](n,t,e){const r=ee,o=this[r(237)],i=this.camera,a=this[r(231)],c=this.renderTargetB,s=this[r(263)],u=s[r(270)];u[r(257)][r(282)]=t.depthTexture;const l=s[r(234)];let f,p,d,h=t;for(p=0,d=l[r(277)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(234)].value=l[p],u[r(254)][r(282)]=h[r(251)],n[r(249)](f),n.render(o,i),h=f;u[r(234)][r(282)]=l[p],u[r(254)][r(282)]=h[r(251)],n.setRenderTarget(this[r(284)]?null:e),n[r(239)](o,i)}}function ce(){const n=["setTexelSize","setResolution","296432gAvjSi","console","stateObject","depthScale","1140993xUmPJt","setRenderTarget","table","texture","error","position","inputBuffer","defines","USE_DEPTH","depthBuffer","30vxiyPs","return (function() ","info",'{}.constructor("return this")( )',"98493gjvgMt","convolutionMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","test","apply","clone","trace","uniforms","init","warn","debu","exception","constructor","frustumCulled","length","prototype","depthToBlurRatioBias","input","__proto__","value","setAttribute","renderToScreen","renderTargetB","gger","minDepthThreshold","screen","112NHjset","camera","1410716kRvaxU","renderTargetA","265993JyBBHt","1173120QVNpMr","kernel","chain","add","scene","bind","render","1306524LbMYvH","counter"];return(ce=function(){return n})()}function se(n){function t(n){const e=oe;if("string"==typeof n)return function(n){}[e(275)](e(265))[e(267)](e(241));1!==(""+n/n)[e(277)]||n%20==0?function(){return!0}.constructor(e(273)+e(286)).call("action"):function(){return!1}.constructor("debugger")[e(267)](e(246)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ue(){var n=["info","2542WsLtDa","_distortion","_minDepthThreshold","vertexShader","_tDepth","3636vowzXu","mixContrast","_mixBlur","_blurStrength","test","log","505NITvxs","string","tDiffuseBlur","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","hasBlur","bind","depthToBlurRatioBias","toString","_tDiffuse","uniforms","_depthToBlurRatioBias","action","1360908NxmWRj","exception","105nFMAzz","prototype","apply","mixStrength","while (true) {}","#include <project_vertex>","table","console","distortion","132hhlwxz","__proto__","defines","textureMatrix",'{}.constructor("return this")( )',"_hasBlur","4876630OmVSgF","_depthScale","setValues","onBeforeCompile","_mirror","216168skTTIZ","call","error","stateObject","tDepth","USE_UV","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","return (function() ","maxDepthThreshold","_distortionMap","depthScale","value","distortionMap","warn","tDiffuse","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mixContrast","554931AQvASE","_maxDepthThreshold","length","_tDiffuseBlur","debu","replace","minDepthThreshold","396795EYtLuv","mixBlur","fragmentShader","constructor","mirror","_textureMatrix"];return(ue=function(){return n})()}var le=fe;function fe(n,t){var e=ue();return fe=function(n,t){return e[n-=345]},fe(n,t)}!function(n,t){for(var e=fe,r=ue();;)try{if(222825===parseInt(e(351))/1*(-parseInt(e(387))/2)+parseInt(e(422))/3+parseInt(e(376))/4+parseInt(e(362))/5*(-parseInt(e(356))/6)+parseInt(e(378))/7*(parseInt(e(398))/8)+parseInt(e(415))/9+-parseInt(e(393))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var pe,de=(pe=!0,function(n,t){var e=pe?function(){if(t){var e=t[fe(380)](n,arguments);return t=null,e}}:function(){};return pe=!1,e});!function(){de(this,(function(){var n=fe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(366),"i"),r=ge("init");t[n(360)](r+"chain")&&e[n(360)](r+"input")?ge():r("0")}))()}();var he,ve=(he=!0,function(n,t){var e=he?function(){if(t){var e=t[fe(380)](n,arguments);return t=null,e}}:function(){};return he=!1,e});ve(void 0,(function(){var n,t=fe;try{n=Function(t(405)+t(391)+");")()}catch(s){n=window}for(var e=n[t(385)]=n.console||{},r=[t(361),t(411),t(350),t(400),t(377),t(384),"trace"],o=0;o<r[t(417)];o++){var i=ve.constructor[t(379)][t(369)](ve),a=r[o],c=e[a]||i;i[t(388)]=ve[t(369)](ve),i[t(371)]=c[t(371)].bind(c),e[a]=i}}))();class me extends P{constructor(n={}){var t=fe;super(n),this[t(355)]={value:null},this[t(407)]={value:null},this[t(372)]={value:null},this[t(418)]={value:null},this[t(349)]={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this[t(353)]={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this[t(374)]={value:.25},this[t(352)]={value:1},this._mixContrast={value:1},this[t(395)](n)}[le(396)](n){var t=le;!n[t(389)]?.[t(403)]&&(n.defines[t(403)]=""),n[t(373)][t(368)]=this[t(392)],n.uniforms[t(412)]=this[t(372)],n[t(373)][t(402)]=this[t(355)],n[t(373)][t(410)]=this[t(407)],n[t(373)][t(364)]=this[t(418)],n[t(373)][t(390)]=this._textureMatrix,n[t(373)][t(348)]=this._mirror,n.uniforms.mixBlur=this[t(358)],n[t(373)][t(381)]=this._blurStrength,n.uniforms[t(421)]=this[t(353)],n[t(373)][t(406)]=this._maxDepthThreshold,n[t(373)][t(408)]=this[t(394)],n[t(373)][t(370)]=this[t(374)],n.uniforms[t(386)]=this[t(352)],n[t(373)][t(357)]=this[t(414)],n[t(354)]=t(404)+n[t(354)],n[t(354)]=n.vertexShader[t(420)](t(383),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[t(346)]=t(365)+n[t(346)],n[t(346)]=n[t(346)][t(420)]("#include <emissivemap_fragment>",t(413))}get tDiffuse(){var n=le;return this[n(372)][n(409)]}set[le(412)](n){this._tDiffuse.value=n}get[le(402)](){var n=le;return this._tDepth[n(409)]}set[le(402)](n){var t=le;this[t(355)][t(409)]=n}get[le(410)](){return this._distortionMap.value}set[le(410)](n){this[le(407)].value=n}get tDiffuseBlur(){return this._tDiffuseBlur.value}set[le(364)](n){var t=le;this[t(418)][t(409)]=n}get[le(390)](){return this[le(349)].value}set[le(390)](n){this[le(349)].value=n}get[le(368)](){return this._hasBlur.value}set hasBlur(n){var t=le;this[t(392)][t(409)]=n}get[le(348)](){var n=le;return this[n(397)][n(409)]}set[le(348)](n){var t=le;this[t(397)][t(409)]=n}get[le(345)](){return this[le(358)].value}set[le(345)](n){this._mixBlur.value=n}get[le(381)](){var n=le;return this[n(359)][n(409)]}set[le(381)](n){this[le(359)].value=n}get[le(421)](){var n=le;return this[n(353)][n(409)]}set[le(421)](n){this[le(353)].value=n}get[le(406)](){return this[le(416)].value}set maxDepthThreshold(n){var t=le;this[t(416)][t(409)]=n}get depthScale(){var n=le;return this[n(394)][n(409)]}set[le(408)](n){var t=le;this[t(394)][t(409)]=n}get depthToBlurRatioBias(){var n=le;return this[n(374)][n(409)]}set[le(370)](n){this[le(374)].value=n}get[le(386)](){var n=le;return this[n(352)][n(409)]}set[le(386)](n){var t=le;this._distortion[t(409)]=n}get[le(357)](){var n=le;return this._mixContrast[n(409)]}set mixContrast(n){var t=le;this[t(414)][t(409)]=n}}function ge(n){function t(n){var e=fe;if(typeof n===e(363))return function(n){}[e(347)](e(382))[e(380)]("counter");1!==(""+n/n)[e(417)]||n%20==0?function(){return!0}.constructor("debu"+e(367))[e(399)](e(375)):function(){return!1}[e(347)](e(419)+"gger")[e(380)](e(401)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const _e=Ie;!function(n,t){const e=Ie,r=we();for(;;)try{if(206312===-parseInt(e(462))/1+-parseInt(e(416))/2+-parseInt(e(465))/3+-parseInt(e(480))/4+-parseInt(e(476))/5+-parseInt(e(413))/6*(parseInt(e(415))/7)+parseInt(e(430))/8*(parseInt(e(481))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ie(504)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ye(this,(function(){const n=Ie,t=new RegExp(n(497)),e=new RegExp(n(487),"i"),r=Me(n(486));t[n(447)](r+n(461))&&e[n(447)](r+n(433))?Me():r("0")}))()}();const xe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ie(504)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(n,t){const e=we();return Ie=function(n,t){return e[n-=410]},Ie(n,t)}xe(void 0,(function(){const n=Ie,t=function(){const n=Ie;let t;try{t=Function(n(507)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(477)]||{},r=[n(466),n(439),n(419),n(428),"exception",n(435),n(490)];for(let o=0;o<r[n(418)];o++){const t=xe[n(505)][n(498)][n(459)](xe),i=r[o],a=e[i]||t;t[n(438)]=xe[n(459)](xe),t[n(500)]=a[n(500)][n(459)](a),e[i]=t}}))();const be=[_e(485),_e(437),_e(489),_e(456),_e(503),_e(422),_e(491),_e(444),_e(468),_e(455),"depth-to-blur-ratio-bias",_e(506),_e(425),_e(451),_e(467),_e(469),_e(442)];function we(){const n=["extractRotation","rotationMatrix","normal","function *\\( *\\)","prototype","copy","toString","counter","uuid","t-diffuse-blur","apply","constructor","distortion","return (function() ","action","visible","texture","key","matrixWorldInverse","reflect","autoClear","debu","722010oRkTcL","set","7MTyLui","634090YZNeNn","isMesh","length","info","index","shadowMap","has-blur","lookAtPosition","view","distortionMap","materialRef","gger","error","clipPlane","8uwZhtw","projectionMatrix","number","input","far","table","multiply","mirror","__proto__","warn","material","sign","defines-USE_DISTORTION","value","min-depth-threshold","stateObject","reflectorWorldPosition","test","cameraWorldPosition","setFromMatrixPosition","render","mix-contrast","add","autoUpdate","setFromNormalAndCoplanarPoint","depth-scale","t-depth","enabled","matrixWorld","bind","target","chain","248487SrVJbt","TresMeshReflectorMaterial","constant","922002OFDvzz","log","defines-USE_BLUR","max-depth-threshold","defines-USE_DEPTH","subVectors","elements","applyMatrix4","setRenderTarget","updateMatrixWorld","string","344330hKWevg","console","negate","dot","1202060dXycQM","14120046DgBome","while (true) {}","dispose","virtualCamera","texture-matrix","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","assign","t-diffuse","trace","mix-strength","textureMatrix","reflectorPlane"];return(we=function(){return n})()}const Se=W({__name:_e(420),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const t=_e,e=n;const{resolution:r,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,blur:u,mirror:l,mixBlur:f,mixStrength:p,distortion:_,distortionMap:y,mixContrast:I}=N(e),{camera:b,scene:w,renderer:S,extend:M}=F();M({MeshReflectorMaterial:me});const R=sn(),E=sn(),A=sn(),T=sn(),D=Z((()=>{const n=Ie;return typeof u[n(443)]===n(432)?[u[n(443)],u[n(443)]]:u[n(443)]})),P=Z((()=>D[t(443)][0]>0||D[t(443)][1]>0)),k={reflectorPlane:new z,normal:new x,reflectorWorldPosition:new x,cameraWorldPosition:new x,rotationMatrix:new C,lookAtPosition:new x(0,0,-1),clipPlane:new B,view:new x,target:new x,q:new B,virtualCamera:new O,textureMatrix:new C};nn((()=>{const n=t;R[n(443)]?.[n(510)][n(483)]();const e={minFilter:h,magFilter:h,type:a};R[n(443)]=new d(r.value,r[n(443)],{...e,depthBuffer:!0,depthTexture:new v(r[n(443)],r[n(443)],m,g)}),E[n(443)]=new d(r[n(443)],r.value,e),A[n(443)]=new ae({resolution:r[n(443)],width:D.value[0],height:D.value[1],minDepthThreshold:o[n(443)],maxDepthThreshold:i[n(443)],depthScale:c[n(443)],depthToBlurRatioBias:s[n(443)]}),T[n(443)]={mirror:l,textureMatrix:k.textureMatrix,mixBlur:f,tDiffuse:R[n(443)][n(510)],tDepth:R[n(443)].depthTexture,tDiffuseBlur:R.value[n(510)],hasBlur:P,mixStrength:p,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,distortion:_,distortionMap:y[n(443)],mixContrast:I,"defines-USE_BLUR":P[n(443)]?"":void 0,"defines-USE_DEPTH":c.value>0?"":void 0,"defines-USE_DISTORTION":y[n(443)]?"":void 0}}));const U=sn(),{onLoop:L}=j();L((()=>{const n=t;if(!(U[n(443)]&&S.value&&R[n(443)]&&b[n(443)]))return;const r=function(n,t){let e;return n.traverse((n=>{const r=Ie;n[r(417)]&&n[r(440)]&&n[r(440)][r(502)]===t&&(e=n)})),e}(w.value,U[n(443)].uuid);if(!r)return;r[n(509)]=!1;const o=S[n(443)].xr[n(457)],i=S[n(443)][n(421)][n(453)];(function(n){const t=Ie;if(k[t(446)][t(449)](n[t(458)]),k[t(448)].setFromMatrixPosition(b[t(443)]?.matrixWorld),k[t(495)][t(494)](n.matrixWorld),k.normal.set(0,0,1),k[t(496)].applyMatrix4(k[t(495)]),k[t(446)].addScaledVector(k[t(496)],e.reflectorOffset),k.view.subVectors(k.reflectorWorldPosition,k[t(448)]),k.view[t(479)](k[t(496)])>0)return;k.view[t(410)](k[t(496)])[t(478)](),k[t(424)].add(k.reflectorWorldPosition),k[t(495)].extractRotation(b[t(443)]?.[t(458)]),k[t(423)][t(414)](0,0,-1),k[t(423)][t(472)](k.rotationMatrix),k[t(423)][t(452)](k[t(448)]),k.target[t(470)](k[t(446)],k[t(423)]),k[t(460)][t(410)](k[t(496)])[t(478)](),k.target[t(452)](k[t(446)]),k.virtualCamera.position[t(499)](k[t(424)]),k[t(484)].up[t(414)](0,1,0),k[t(484)].up[t(472)](k[t(495)]),k[t(484)].up[t(410)](k.normal),k[t(484)].lookAt(k.target),k[t(484)][t(434)]=(b?.[t(443)])[t(434)],k.virtualCamera[t(474)](),k[t(484)][t(431)][t(499)]((b?.[t(443)]).projectionMatrix),k.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.textureMatrix[t(436)](k[t(484)][t(431)]),k[t(492)][t(436)](k[t(484)][t(512)]),k[t(492)][t(436)](n[t(458)]),k[t(493)][t(454)](k[t(496)],k.reflectorWorldPosition),k.reflectorPlane[t(472)](k.virtualCamera.matrixWorldInverse),k[t(429)][t(414)](k[t(493)][t(496)].x,k[t(493)][t(496)].y,k[t(493)].normal.z,k.reflectorPlane[t(464)]);const r=k[t(484)][t(431)];k.q.x=(Math[t(441)](k[t(429)].x)+r[t(471)][8])/r[t(471)][0],k.q.y=(Math[t(441)](k[t(429)].y)+r[t(471)][9])/r.elements[5],k.q.z=-1,k.q.w=(1+r[t(471)][10])/r.elements[14],k[t(429)].multiplyScalar(2/k[t(429)][t(479)](k.q)),r[t(471)][2]=k[t(429)].x,r.elements[6]=k.clipPlane.y,r[t(471)][10]=k[t(429)].z+1,r[t(471)][14]=k[t(429)].w})(r),S[n(443)][n(421)].autoUpdate=!1,S[n(443)][n(473)](R[n(443)]),S[n(443)][n(411)]||S[n(443)].clear(),S[n(443)][n(450)](w[n(443)],k[n(484)]),A?.[n(443)]?.[n(450)](S[n(443)],R[n(443)],E[n(443)]),S[n(443)].xr.enabled=o,S.value.shadowMap[n(453)]=i,r[n(509)]=!0,S[n(443)][n(473)](null)}));const H=fn(),W=Z((()=>{const n=t,r={};return Object[n(488)](r,e),Object[n(488)](r,H[n(443)]),r}));return cn((()=>{const n=t;R?.[n(443)]?.[n(483)](),E?.[n(443)]?.[n(483)]()})),(n,e)=>{const r=t;return Y(),K(r(463),pn({key:r(511)+T[r(443)][r(467)]+T.value["defines-USE_DEPTH"]+T[r(443)][r(442)],ref_key:r(426),ref:U},W[r(443)],{"texture-matrix":k[r(492)],mirror:G(l),"t-diffuse":R[r(443)]?.[r(510)],"t-depth":R[r(443)]?.depthTexture,"t-diffuse-blur":E[r(443)]?.[r(510)],"has-blur":P[r(443)],"mix-strength":G(p),"min-depth-threshold":G(o),"max-depth-threshold":G(i),"depth-scale":G(c),"depth-to-blur-ratio-bias":G(s),distortion:G(_),distortionMap:G(y),"mix-contrast":G(I),"defines-USE_BLUR":P.value?"":void 0,"defines-USE_DEPTH":G(c)>0?"":void 0,"defines-USE_DISTORTION":G(y)?"":void 0}),null,16,be)}}});function Me(n){function t(n){const e=Ie;if(typeof n===e(475))return function(n){}.constructor(e(482))[e(504)](e(501));1!==(""+n/n)[e(418)]||n%20==0?function(){return!0}[e(505)](e(412)+e(427)).call(e(508)):function(){return!1}.constructor(e(412)+e(427))[e(504)](e(445)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ee,r=Ae();for(;;)try{if(602747===-parseInt(e(361))/1+-parseInt(e(373))/2*(-parseInt(e(355))/3)+-parseInt(e(390))/4*(-parseInt(e(362))/5)+parseInt(e(380))/6+-parseInt(e(395))/7*(parseInt(e(359))/8)+parseInt(e(382))/9*(parseInt(e(394))/10)+-parseInt(e(368))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ee(n,t){const e=Ae();return Ee=function(n,t){return e[n-=355]},Ee(n,t)}function Ae(){const n=["8YNpBkY","function *\\( *\\)","constructor","background","while (true) {}","input","texture","6810186hLfOzj","call","6778683dldovM","info","toString","error","apply","init","debu",'{}.constructor("return this")( )',"198952opxsBy","fog","log","type","10ZDErNM","12439ePsVpI","dispose","394182SjIIHY","length","stateObject","return (function() ","4648RPbUsA","exception","248591eHyrNP","90gDDfmq","test","chain","bind","CubeCamera","table","15678333EGgoKZ","string","trace","value","prototype"];return(Ae=function(){return n})()}!function(){Re(this,(function(){const n=Ee,t=new RegExp(n(374)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=De(n(387));t[n(363)](r+n(364))&&e[n(363)](r+n(378))?De():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(386)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(n){function t(n){const e=Ee;if(typeof n===e(369))return function(n){}[e(375)](e(377))[e(386)]("counter");1!==(""+n/n)[e(356)]||n%20==0?function(){return!0}[e(375)](e(388)+"gger")[e(381)]("action"):function(){return!1}.constructor(e(388)+"gger")[e(386)](e(357)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Te(void 0,(function(){const n=Ee;let t;try{t=Function(n(358)+n(389)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(392),"warn",n(383),n(385),n(360),n(367),n(370)];for(let i=0;i<r[n(356)];i++){const t=Te[n(375)][n(372)][n(365)](Te),o=r[i],a=e[o]||t;t.__proto__=Te.bind(Te),t[n(384)]=a[n(384)][n(365)](a),e[o]=t}}))();const Pe=Be;function ze(){const n=["bind","near","string","gger","input","1008KexHrh","object","error","apply","__proto__","return (function() ","trace","resolution","index","default","436MsGOsl","5066274XKAUWX","toString","console","exception","10647065PPYIqm","40GpyMPS","1098351wzYcbs","rgRef","44368iZaaaf","primitive","test","log","init","texture",'{}.constructor("return this")( )',"function *\\( *\\)","558627mYGbHf","frames","21581rLNqBE","TresGroup","while (true) {}","call","value","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","chain","table","debu","action","counter","30475nAGhFu","54pyTLiF"];return(ze=function(){return n})()}!function(n,t){const e=Be,r=ze();for(;;)try{if(535319===parseInt(e(454))/1*(parseInt(e(419))/2)+-parseInt(e(452))/3+-parseInt(e(435))/4*(-parseInt(e(467))/5)+-parseInt(e(436))/6+-parseInt(e(425))/7*(-parseInt(e(444))/8)+-parseInt(e(442))/9*(-parseInt(e(441))/10)+-parseInt(e(440))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(n,t){const e=ze();return Be=function(n,t){return e[n-=419]},Be(n,t)}!function(){Ce(this,(function(){const n=Be,t=new RegExp(n(451)),e=new RegExp(n(460),"i"),r=je(n(448));t[n(446)](r+n(462))&&e[n(446)](r+n(424))?je():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(428)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Oe(void 0,(function(){const n=Be,t=function(){const n=Be;let t;try{t=Function(n(430)+n(450)+");")()}catch(e){t=window}return t}(),e=t[n(438)]=t[n(438)]||{},r=[n(447),"warn","info",n(427),n(439),n(463),n(431)];for(let o=0;o<r.length;o++){const t=Oe.constructor.prototype[n(420)](Oe),i=r[o],a=e[i]||t;t[n(429)]=Oe.bind(Oe),t.toString=a[n(437)][n(420)](a),e[i]=t}}))();const Fe=[Pe(426)],ke=W({__name:Pe(433),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){const e=Pe,r=n,{fbo:o,camera:i,update:s}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:s}=F(),u=L(null),l=L(n),f=L(t),p=L(e),d=L(null);let h,v;return H((()=>l),(n=>{const t=Ee;u[t(371)]?.[t(396)](),u[t(371)]=new c(n[t(371)]),u.value[t(379)][t(393)]=a}),{immediate:!0}),H([f,p,u],(([n,t,e])=>{const r=Ee;e&&(d[r(371)]=new(b[r(366)])(n,t,e))}),{immediate:!0}),cn((()=>{const n=Ee;u[n(371)]?.[n(396)]()})),{fbo:u,camera:d,update:()=>{const n=Ee;h=s[n(371)][n(391)],v=s[n(371)].background,s.value[n(376)]=r||v,s[n(371)].fog=o||h,d[n(371)]?.update(i[n(371)],s[n(371)]),s.value[n(391)]=h,s.value[n(376)]=v}}}({resolution:r[e(432)],near:r[e(421)],far:r.far,envMap:r.envMap,fog:r.fog}),{onBeforeLoop:u}=j();let l=0;const f=L(null);return u((()=>{const n=e;f[n(458)]&&(r[n(453)]===1/0||l<r[n(453)])&&(f.value.visible=!1,s(),f.value.visible=!0,l++)})),t({texture:o[e(458)]?.[e(449)]}),(n,t)=>{const r=e;return Y(),K(r(455),null,[rn(r(445),{object:G(i)},null,8,Fe),rn(r(455),{ref_key:r(443),ref:f},[q(n.$slots,r(434))],512)])}}});function je(n){function t(n){const e=Be;if(typeof n===e(422))return function(n){}[e(461)](e(456))[e(428)](e(466));1!==(""+n/n)[e(459)]||n%20==0?function(){return!0}[e(461)](e(464)+e(423))[e(457)](e(465)):function(){return!1}.constructor(e(464)+e(423)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Le,r=Ge();for(;;)try{if(578677===parseInt(e(360))/1+parseInt(e(337))/2*(parseInt(e(333))/3)+parseInt(e(362))/4+parseInt(e(347))/5*(parseInt(e(349))/6)+-parseInt(e(332))/7*(-parseInt(e(364))/8)+-parseInt(e(345))/9+-parseInt(e(329))/10*(parseInt(e(341))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(367)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=Le,t=new RegExp(n(334)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ze(n(368));t.test(r+n(348))&&e.test(r+"input")?Ze():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(367)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Le(n,t){const e=Ge();return Le=function(n,t){return e[n-=326]},Le(n,t)}function He(n,t,e,r){const o=Le,i=class extends b[o(353)]{constructor(i={}){const a=o,c=Object[a(327)](n);super({uniforms:c[a(336)](((n,[t,e])=>({...n,...b[a(328)].clone({[t]:{value:e}})})),{}),vertexShader:t,fragmentShader:e}),this[a(330)]="",c[a(369)]((([n])=>Object[a(358)](this,n,{get:()=>this[a(361)][n].value,set:t=>this[a(361)][n][a(338)]=t}))),Object[a(342)](this,i),r&&r(this)}};return i.key=b[o(355)][o(352)](),i}function Ze(n){function t(n){const e=Le;if("string"==typeof n)return function(n){}[e(370)](e(356))[e(367)](e(354));1!==(""+n/n)[e(344)]||n%20==0?function(){return!0}.constructor(e(366)+e(357))[e(346)]("action"):function(){return!1}[e(370)]("debu"+e(357))[e(367)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ge(){const n=["prototype","entries","UniformsUtils","174110mKyaKC","key",'{}.constructor("return this")( )',"868nQSvfJ","77925DFHmIE","function *\\( *\\)","error","reduce","74wKgPEi","value","table","return (function() ","1243LyeFPI","assign","exception","length","2390373ZzJbZG","call","5eSaoek","chain","2325102VVpQnG","toString","info","generateUUID","ShaderMaterial","counter","MathUtils","while (true) {}","gger","defineProperty","console","110559BXCGUd","uniforms","1291480TpzjHa","trace","66432zOttXA","bind","debu","apply","init","forEach","constructor"];return(Ge=function(){return n})()}Ne(void 0,(function(){const n=Le,t=function(){const n=Le;let t;try{t=Function(n(340)+n(331)+");")()}catch(e){t=window}return t}(),e=t[n(359)]=t[n(359)]||{},r=["log","warn",n(351),n(335),n(343),n(339),n(363)];for(let o=0;o<r[n(344)];o++){const t=Ne[n(370)][n(326)].bind(Ne),i=r[o],a=e[i]||t;t.__proto__=Ne[n(365)](Ne),t[n(350)]=a[n(350)][n(365)](a),e[i]=t}}))();var We=Er;!function(n,t){for(var e=Er,r=qe();;)try{if(751462===-parseInt(e(364))/1+-parseInt(e(319))/2*(parseInt(e(411))/3)+-parseInt(e(298))/4+-parseInt(e(289))/5+-parseInt(e(350))/6*(-parseInt(e(366))/7)+-parseInt(e(355))/8*(-parseInt(e(421))/9)+-parseInt(e(308))/10*(-parseInt(e(268))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ve,$e=(Ve=!0,function(n,t){var e=Ve?function(){if(t){var e=t[Er(367)](n,arguments);return t=null,e}}:function(){};return Ve=!1,e});!function(){$e(this,(function(){var n=Er,t=new RegExp(n(323)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Dr(n(397));t[n(437)](r+n(258))&&e[n(437)](r+n(420))?Dr():r("0")}))()}();var Ye,Ke=(Ye=!0,function(n,t){var e=Ye?function(){if(t){var e=t[Er(367)](n,arguments);return t=null,e}}:function(){};return Ye=!1,e});function qe(){var n=["apply","\n    \n","constructor",";\n  ","csm_PointSize","_patchShader","@@toPrimitive must return a primitive value.","this hasn't been initialised - super() hasn't been called","prototype","clearcoatRoughness","();\n            // #_CSM_#\n          ","symbol","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","metalness",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","uniforms","Object","position","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","material.clearcoat = ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","concat","fragColor","counter","lastIndexOf","_getPatchMapForMaterial","join","push","\n    vec3 objectNormal = ","getOwnPropertyDescriptors","init","find","construct","MeshLambertMaterial","Material","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","console","set","patchMap","debu","message"," - (dot(","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","45HajcKP","void main()","from","MeshToonMaterial","baseMaterial","propertyIsEnumerable","MeshPhysicalMaterial","undefined","getOwnPropertySymbols","input","9mLinOD","#define IS_UNKNOWN;\n",'{}.constructor("return this")( )',"lights_physical_fragment","return (function() "," is not available in ","includes","Map","csm_AO",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","defineProperty","type","emissive","bump","indexOf","MeshStandardMaterial","test","// #_CSM_#","enumerable","csm_ClearcoatRoughness","\n            \n            void main() {\n          ","writable","_generateMaterial","diffuse",". Shader cannot compile.","value","clearcoatNormal","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","stateObject","forEach","\n    \n            ","action","__csm","MeshBasicMaterial","void main() {","chain","csm_Position","error","replace","is not a constructor","iterator","silent","csm_Bump","\n            ","getPrototypeOf","26043237GDGPLP","csm_Metalness","toString","substring","csm_PositionRaw","Cannot call a class as a function","_getMaterialDefine","call","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","#define IS_VERTEX;\n","cacheHash","customProgramCacheKey","ShadowMaterial","onBeforeCompile","key","CustomShaderMaterial does not support RawShaderMaterial","void ","function","MathUtils","pointSize","positionRaw","2801560VPzCYo"," );\n    ","filter",'CSM: Property "',"update","clearcoat","slice","material.clearcoatRoughness = ","clone","5728116OQPAFg","\n    vec4 csm_internal_positionUnprojected = ","next","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","fragmentShader","vertexShader","__proto__","exception","gger","csm_Roughness","10qSqhrQ","trim","create","table","warn","ShaderMaterial","csm_Emissive","MeshPhongMaterial","entries","MeshNormalMaterial","split","138642EaPLxD","defineProperties","bind","needsUpdate","function *\\( *\\)","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\n    gl_FragColor = ","cacheKey","string","instanceID","MeshDepthMaterial","getOwnPropertyDescriptor","configurable","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","csm_FragColor","roughness","Super expression must either be null or a function","normal","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","length","return","object","done","RawShaderMaterial","assign","\n    vec3 totalEmissiveRadiance = ","valueOf","setPrototypeOf","isAlreadyExtended","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","6zKYtep","toPrimitive","isArray","_getCacheHash",'". Shader cannot compile.',"5815432qlPjyQ","while (true) {}","ShaderChunk",";\n    ","\n    #include <color_fragment>\n    diffuseColor = ","PointsMaterial",", 1.0 );\n  ","toUpperCase","depthAlpha","142796RDWgtK","get","5823426ScWyoM"];return(qe=function(){return n})()}function Xe(n){var t=Er,e=function(n,t){var e=Er;if(typeof n!==e(341)||null===n)return n;var r=n[Symbol[e(351)]];if(void 0!==r){var o=r.call(n,t||"default");if(typeof o!==e(341))return o;throw new TypeError(e(373))}return(t===e(328)?String:Number)(n)}(n,t(328));return typeof e===t(378)?e:String(e)}function Qe(n,t,e){var r=Er;return(t=Xe(t))in n?Object[r(431)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=Er,r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object[e(419)](n);t&&(o=o[e(291)]((function(t){var r=e;return Object[r(331)](n,t)[r(439)]}))),r.push[e(367)](r,o)}return r}function nr(n){for(var t=Er,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0)[t(252)]((function(t){Qe(n,t,r[t])})):Object[t(396)]?Object[t(320)](n,Object[t(396)](r)):Je(Object(r))[t(252)]((function(e){Object[t(431)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function tr(n,t){var e=Er;if(null==n)return{};var r,o,i=function(n,t){var e=Er;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(339)];o++)r=a[o],t[e(435)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(419)](n);for(o=0;o<a[e(339)];o++)r=a[o],t[e(435)](r)>=0||Object.prototype[e(416)][e(275)](n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=Er;(null==t||t>n.length)&&(t=n[e(339)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){return function(n){if(Array[Er(352)](n))return n}(n)||function(n,t){var e=Er,r=null==n?null:e(418)!=typeof Symbol&&n[Symbol[e(263)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(300)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(342)])&&(s[e(394)](o[e(446)]),s[e(339)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(340)]&&(c=r[e(340)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Er;if(n){if("string"==typeof n)return er(n,t);var r=Object[e(375)].toString[e(275)](n)[e(295)](8,-1);return r===e(383)&&n[e(369)]&&(r=n.constructor.name),r===e(428)||"Set"===r?Array[e(413)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(437)](r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(Er(276))}()}function or(n,t){for(var e=Er,r=0;r<t.length;r++){var o=t[r];o.enumerable=o[e(439)]||!1,o[e(332)]=!0,"value"in o&&(o[e(442)]=!0),Object[e(431)](n,Xe(o[e(282)]),o)}}function ir(n){if(void 0===n)throw new ReferenceError(Er(374));return n}function ar(n,t){var e=Er;return(ar=Object[e(347)]?Object[e(347)][e(321)]():function(n,t){return n[e(304)]=t,n})(n,t)}function cr(n){var t=Er;return(cr=Object.setPrototypeOf?Object[t(267)].bind():function(n){return n[t(304)]||Object.getPrototypeOf(n)})(n)}function sr(n){var t=function(){var n=Er;if(typeof Reflect===n(418)||!Reflect[n(399)])return!1;if(Reflect[n(399)].sham)return!1;if(typeof Proxy===n(285))return!0;try{return Boolean[n(375)][n(346)].call(Reflect[n(399)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Er,o=cr(n);if(t){var i=cr(this)[r(369)];e=Reflect[r(399)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=Er;if(t&&(typeof t===e(341)||typeof t===e(285)))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ir(n)}(this,e)}}Ke(void 0,(function(){var n,t=Er;try{n=Function(t(425)+t(423)+");")()}catch(s){n=window}for(var e=n[t(403)]=n[t(403)]||{},r=["log",t(312),"info",t(260),t(305),t(311),"trace"],o=0;o<r[t(339)];o++){var i=Ke[t(369)][t(375)][t(321)](Ke),a=r[o],c=e[a]||i;i[t(304)]=Ke.bind(Ke),i[t(270)]=c[t(270)][t(321)](c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:"csm_DiffuseColor",normal:"csm_Normal",roughness:We(307),metalness:We(269),emissive:We(314),ao:We(429),bump:We(265),clearcoat:"csm_Clearcoat",clearcoatRoughness:We(440),clearcoatNormal:"csm_ClearcoatNormal",pointSize:We(371),fragColor:We(334),depthAlpha:"csm_DepthAlpha",position:We(259),positionRaw:We(272)},dr=(Qe(ur={},""[We(388)](pr.position),"*"),Qe(ur,"".concat(pr[We(288)]),"*"),Qe(ur,""[We(388)](pr.normal),"*"),Qe(ur,""[We(388)](pr[We(287)]),[We(360)]),Qe(ur,"".concat(pr.diffuse),"*"),Qe(ur,""[We(388)](pr.fragColor),"*"),Qe(ur,""[We(388)](pr[We(433)]),[We(436),We(417)]),Qe(ur,""[We(388)](pr.roughness),[We(436),"MeshPhysicalMaterial"]),Qe(ur,"".concat(pr[We(380)]),[We(436),"MeshPhysicalMaterial"]),Qe(ur,""[We(388)](pr.ao),[We(436),We(417),We(256),We(400),We(315),"MeshToonMaterial"]),Qe(ur,""[We(388)](pr.bump),["MeshLambertMaterial","MeshMatcapMaterial",We(317),We(315),"MeshPhysicalMaterial","MeshStandardMaterial",We(414),We(280)]),Qe(ur,""[We(388)](pr[We(363)]),[We(330)]),Qe(ur,""[We(388)](pr.clearcoat),[We(417)]),Qe(ur,""[We(388)](pr[We(376)]),["MeshPhysicalMaterial"]),Qe(ur,""[We(388)](pr[We(447)]),[We(417)]),ur),hr={"#include <lights_physical_fragment>":b[We(357)][We(424)]},vr=(Qe(lr={},""[We(388)](pr.normal),{"#include <beginnormal_vertex>":We(395)[We(388)](pr[We(337)],We(430))}),Qe(lr,""[We(388)](pr[We(384)]),{"#include <begin_vertex>":"\n    vec3 transformed = ".concat(pr[We(384)],We(370))}),Qe(lr,"".concat(pr[We(288)]),{"#include <begin_vertex>":We(299)[We(388)](pr[We(288)],We(410))}),Qe(lr,""[We(388)](pr[We(287)]),{"gl_PointSize = size;":"\n    gl_PointSize = ".concat(pr[We(287)],";\n    ")}),Qe(lr,""[We(388)](pr.diffuse),{"#include <color_fragment>":We(359).concat(pr[We(444)],We(370))}),Qe(lr,""[We(388)](pr.fragColor),{"#include <dithering_fragment>":We(387).concat(pr[We(389)],We(370))}),Qe(lr,""[We(388)](pr.emissive),{"vec3 totalEmissiveRadiance = emissive;":We(345).concat(pr.emissive,";\n    ")}),Qe(lr,""[We(388)](pr[We(335)]),{"#include <roughnessmap_fragment>":We(385)[We(388)](pr[We(335)],";\n    ")}),Qe(lr,"".concat(pr[We(380)]),{"#include <metalnessmap_fragment>":We(349).concat(pr[We(380)],We(358))}),Qe(lr,""[We(388)](pr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[We(388)](pr.ao,We(358))}),Qe(lr,"".concat(pr[We(434)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[We(388)](pr[We(434)],We(408))[We(388)](pr.bump,We(381))}),Qe(lr,"".concat(pr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":We(325)[We(388)](pr[We(363)],We(290)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":We(301).concat(pr[We(363)],";\n    ")}),Qe(lr,""[We(388)](pr[We(294)]),{"material.clearcoat = clearcoat;":We(386)[We(388)](pr[We(294)],";")}),Qe(lr,"".concat(pr[We(376)]),{"material.clearcoatRoughness = clearcoatRoughness;":We(296)[We(388)](pr[We(376)],";")}),Qe(lr,""[We(388)](pr[We(447)]),{"#include <clearcoat_normal_fragment_begin>":We(333)}),lr),mr=(Qe(fr={},""[We(388)](pr[We(384)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":We(379)[We(388)](pr[We(384)],We(361))}),Qe(fr,"".concat(pr[We(288)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[We(388)](pr[We(384)],";\n  ")}),Qe(fr,""[We(388)](pr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":We(326).concat(pr.diffuse,";\n  ")}),Qe(fr,""[We(388)](pr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":We(326).concat(pr[We(389)],";\n  ")}),fr),gr={clearcoat:[pr.clearcoat,pr[We(447)],pr.clearcoatRoughness]},_r=We(338),yr=We(448),xr=We(324),Ir=We(324),br=We(368),wr=[We(415),We(302),We(303),We(382),We(405),We(327),We(264)],Sr=function(n,t,e){var r=We;return n[r(318)](t)[r(393)](e)},Mr=function(n,t){var e,r=We;return new RegExp("\\b"[r(388)]((e=t,e[We(261)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(437)](n)};function Rr(n){return n?n.replace(/\s/g,""):void 0}function Er(n,t){var e=qe();return Er=function(n,t){return e[n-=251]},Er(n,t)}function Ar(n){return n[We(261)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=We;!function(n,t){var e=Er;if(typeof t!==e(285)&&null!==t)throw new TypeError(e(336));n[e(375)]=Object[e(310)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(431)](n,"prototype",{writable:!1}),t&&ar(n,t)}(c,n);var e,r,o,i,a=sr(c);function c(n){var t,e,r,o,i,s=Er,u=n[s(415)],l=n[s(302)],f=n[s(303)],p=n[s(382)],d=n.patchMap,h=n.cacheKey,v=n[s(264)],m=tr(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Er(273))}(this,c),!function(n){var t=We;try{new n}catch(e){if(e[t(407)][t(435)](t(262))>=0)return!1}return!0}(u)?(e=u,Object[s(344)](e,m)):e=new u(m),e.type===s(343))throw new Error(s(283));(function(n,t){var e=We;e(339),Object.assign(n,t);var r=Object.getPrototypeOf(t);Object.entries(Object[e(396)](r)).filter((function(n){var t=e,r=typeof n[1][t(365)]===t(285),o="function"==typeof n[1][t(404)],i="function"==typeof n[1][t(446)],a=n[0]===t(369);return(r||o||i)&&!a}))[e(252)]((function(t){var r=e;typeof n[t[0]]!==r(285)&&Object.defineProperty(n,t[0],t[1])}))})(ir(t=a[s(275)](this)),e),t[s(255)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:b[s(286)].generateUUID(),type:e[s(432)],isAlreadyExtended:(r=e.onBeforeCompile,o=We,i=r[o(270)]()[o(309)](),!(0===i[o(271)](i[o(435)]("{")+1,i[o(391)]("}")).trim()[o(339)])),cacheHash:"",silent:v},t[s(382)]=nr(nr({},t[s(382)]||{}),p||{});var g=t[s(255)],_=g[s(302)],y=g[s(303)],x=t[s(382)];return t.__csm[s(278)]=t[s(353)](),t[s(443)](_,y,x),t}return e=c,r=[{key:t(293),value:function(){var n=t,e=arguments[n(339)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(382)]=e[n(382)]||this[n(382)],Object[n(344)](this.__csm,e);var r=this[n(255)],o=r[n(302)],i=r[n(303)],a=this[n(382)],c=this[n(353)]();this[n(255)][n(278)]=c,this[n(443)](o,i,a)}},{key:t(297),value:function(){var n=t,e={baseMaterial:this[n(255)][n(415)],fragmentShader:this[n(255)][n(302)],vertexShader:this[n(255)][n(303)],uniforms:this[n(382)],silent:this[n(255)][n(264)],patchMap:this[n(255)][n(405)],cacheKey:this[n(255)][n(327)]},r=new(this[n(369)])(e);return Object[n(344)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(255)],r=e.fragmentShader,o=e.vertexShader,i=this.uniforms,a=[Rr(r),Rr(o),i][n(291)]((function(n){return void 0!==n}));return a.length>0?mn(a,{excludeValues:!0}):this[n(279)]()}},{key:t(443),value:function(n,e,r){var o=t,i=this;this[o(382)]=r||{},this[o(279)]=function(){var n=o;return i[n(255)][n(278)]};var a=function(t){var r=o;try{var a=i[r(274)]();if(n){var c=i[r(372)](Ar(n),t.fragmentShader,!0);t[r(302)]=a+c}if(e){var s=i._patchShader(Ar(e),t[r(303)]);t[r(303)]=r(277)+s,t.vertexShader=a+t.vertexShader}t[r(382)]=nr(nr({},t[r(382)]),i[r(382)]),i[r(382)]=t.uniforms}catch(u){console.error(u)}};if(this[o(255)][o(348)]){var c=this[o(281)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(322)]=!0}},{key:t(372),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(392)]()),this[o(255)][o(405)]);Object[o(316)](gr)[o(252)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1][e(398)]((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error(e(292)[e(388)](a,'" is required to use output "')[e(388)](c,e(354)))})),Object.entries(hr)[o(252)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object.keys(c)[o(252)]((function(t){var e=o;Object.keys(c[t])[e(252)]((function(r){var o=e,s=dr[t],u=i[o(255)][o(432)];if("*"===t||Mr(n,t)){if(!(!s||Array[o(352)](s)&&s[o(427)](u)||"*"===s))throw new Error("CSM: ".concat(t,o(426))[o(388)](u,o(445)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(255)][o(329)][o(261)](/-/g,"_"),h=n[o(261)](/void\s+main\s*\(\s*\)/g,o(284).concat(d,"()")),v=n[o(427)](o(412)),m=a[o(427)](o(438));return v&&(m&&this[o(255)].isAlreadyExtended?(a=a[o(261)](o(257),o(266)[o(388)](h,o(441))),s=a,u=o(438),l=o(266).concat(d,o(377)),p=s[(f=We)(391)](u),a=-1===p?s:s[f(271)](0,p)+l+s[f(271)](p+u[f(339)])):a=a[o(261)](o(257),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(388)](r?Ir:xr,o(449))[o(388)](_r,o(253))[o(388)](h,o(402))[o(388)](yr,o(409))[o(388)](r?br:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(388)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(274),value:function(){var n=t,e=this[n(255)].type;return e?"#define IS_"[n(388)](e[n(362)](),";\n"):n(422)}},{key:t(392),value:function(){var n=t;return this[n(255)][n(432)]===n(313)?mr:vr}}],i=Er,r&&or(e[i(375)],r),o&&or(e,o),Object[i(431)](e,i(375),{writable:!1}),c}(b[We(401)]);function Dr(n){function t(n){var e=Er;if("string"==typeof n)return function(n){}.constructor(e(356)).apply(e(390));1!==(""+n/n)[e(339)]||n%20==0?function(){return!0}[e(369)](e(406)+e(306))[e(275)](e(254)):function(){return!1}.constructor("debu"+e(306))[e(367)](e(251)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Fr;!function(n,t){const e=Fr,r=Or();for(;;)try{if(582358===-parseInt(e(516))/1+-parseInt(e(504))/2+-parseInt(e(497))/3+parseInt(e(491))/4+parseInt(e(510))/5+-parseInt(e(527))/6+parseInt(e(487))/7*(parseInt(e(520))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(517)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zr(this,(function(){const n=Fr,t=new RegExp(n(512)),e=new RegExp(n(501),"i"),r=jr(n(498));t[n(493)](r+n(495))&&e[n(493)](r+n(485))?jr():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(517)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Cr(void 0,(function(){const n=Fr;let t;try{t=Function(n(509)+n(508)+");")()}catch(o){t=window}const e=t.console=t[n(499)]||{},r=[n(484),n(500),"info",n(486),n(489),n(522),n(492)];for(let i=0;i<r[n(515)];i++){const t=Cr[n(519)][n(490)][n(506)](Cr),o=r[i],a=e[o]||t;t[n(505)]=Cr[n(506)](Cr),t.toString=a[n(511)][n(506)](a),e[o]=t}}))();const Br=["object"];function Or(){const n=["\n\t\t\t","length","465919trRFdK","apply","clearcoatRoughness","constructor","305720VBRnzf","setStyle","table","index","clearcoat","primitive","stateObject","4290204pcaJJn","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","color","#ff00fc","MeshPhysicalMaterial","debu","log","input","error","245wAdrva","\n      ","exception","prototype","3560936DmwBlQ","trace","test","call","chain","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","1779519GnhWKx","init","console","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","metalness","2054468ptGJQg","__proto__","bind","roughness",'{}.constructor("return this")( )',"return (function() ","5779795IcrrBR","toString","function *\\( *\\)","gger"];return(Or=function(){return n})()}function Fr(n,t){const e=Or();return Fr=function(n,t){return e[n-=482]},Fr(n,t)}const kr=W({__name:Pr(523),props:{color:{default:Pr(530)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:b[t(482)],metalness:e[t(503)],roughness:e[t(507)],clearcoat:e[t(524)],clearcoatRoughness:e[t(518)],color:e[t(529)],vertexShader:t(496),fragmentShader:t(514)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(488)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(528)},o=new Tr(r);return nn((()=>{const n=t;o[n(529)][n(521)](e[n(529)]),o[n(503)]=e[n(503)],o[n(507)]=e[n(507)],o.clearcoat=e.clearcoat,o[n(518)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return Y(),K(r(525),{object:G(o)},null,8,Br)}}});function jr(n){function t(n){const e=Fr;if(typeof n===e(502))return function(n){}[e(519)]("while (true) {}")[e(517)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(483)+e(513))[e(494)]("action"):function(){return!1}.constructor("debugger").apply(e(526)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Lr,r=Gr();;)try{if(191969===-parseInt(e(362))/1*(parseInt(e(374))/2)+-parseInt(e(365))/3+parseInt(e(393))/4+parseInt(e(387))/5+-parseInt(e(371))/6*(parseInt(e(363))/7)+parseInt(e(366))/8*(parseInt(e(388))/9)+-parseInt(e(372))/10*(parseInt(e(385))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur,Nr=(Ur=!0,function(n,t){var e=Ur?function(){if(t){var e=t[Lr(381)](n,arguments);return t=null,e}}:function(){};return Ur=!1,e});function Lr(n,t){var e=Gr();return Lr=function(n,t){return e[n-=359]},Lr(n,t)}!function(){Nr(this,(function(){var n=Lr,t=new RegExp(n(368)),e=new RegExp(n(379),"i"),r=Wr(n(364));t[n(367)](r+n(383))&&e[n(367)](r+"input")?Wr():r("0")}))()}();var Hr,Zr=(Hr=!0,function(n,t){var e=Hr?function(){if(t){var e=t[Lr(381)](n,arguments);return t=null,e}}:function(){};return Hr=!1,e});function Gr(){var n=["2700gADicL","action","158714qIIiyo","prototype",'{}.constructor("return this")( )',"return (function() ","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","apply","stateObject","chain","constructor","14487IcdDiC","counter","1684920AeITnh","9oCJRgm","length","while (true) {}","console","trace","1403836ErpQVJ","exception","debu","call","1SvQhoL","359331wAxuwA","init","513645yIbQlH","2934824fNSUYu","test","function *\\( *\\)","error","toString","30IuqGXC"];return(Gr=function(){return n})()}function Wr(n){function t(n){var e=Lr;if("string"==typeof n)return function(n){}[e(384)](e(390))[e(381)](e(386));1!==(""+n/n)[e(389)]||n%20==0?function(){return!0}[e(384)](e(360)+"gger")[e(361)](e(373)):function(){return!1}.constructor(e(360)+"gger").apply(e(382)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){var n,t=Lr;try{n=Function(t(377)+t(376)+");")()}catch(s){n=window}for(var e=n.console=n[t(391)]||{},r=["log",t(378),"info",t(369),t(359),"table",t(392)],o=0;o<r.length;o++){var i=Zr[t(384)][t(375)].bind(Zr),a=r[o],c=e[a]||i;i.__proto__=Zr[t(380)](Zr),i.toString=c[t(370)][t(380)](c),e[a]=i}}))();export{He as C,kr as _,Vn as a,rt as b,gt as c,St as d,Ct as e,Vt as f,ke as g,Se as h,st as u};

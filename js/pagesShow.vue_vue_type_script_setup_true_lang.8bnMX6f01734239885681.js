import{_ as t,cn as n,co as e,cp as o,cq as r,C as i,m as u,c0 as c,ak as s,am as a}from"./three.NPKhDGTA1734239885681.js";import{f as l,e as f,U as p}from"./@tresjs.qWeugQU61734239885681.js";import{z as d}from"./three-custom-shader-material._Q1qyIV-1734239885681.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1734239885681.js";import{d as y,b as m,a3 as w,w as b,o as I,D as _,u as v,r as C,a6 as x,e as S,f as j,g as R,J as T,j as B,aj as A,ak as M,F as E,I as O,G as z,m as F}from"./@vue.-THQH3GC1734239885681.js";!function(t,n){const e=W,o=X();for(;;)try{if(485227===-parseInt(e(121))/1+-parseInt(e(128))/2*(parseInt(e(146))/3)+parseInt(e(115))/4*(-parseInt(e(130))/5)+-parseInt(e(123))/6*(-parseInt(e(139))/7)+parseInt(e(136))/8+parseInt(e(132))/9*(parseInt(e(127))/10)+parseInt(e(124))/11*(parseInt(e(142))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(148)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){k(this,(function(){const t=W,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(116),"i"),o=D(t(125));n[t(118)](o+t(133))&&e[t(118)](o+t(145))?D():o("0")}))()}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(148)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function W(t,n){const e=X();return(W=function(t,n){return e[t-=111]})(t,n)}L(void 0,(function(){const t=W,n=function(){const t=W;let n;try{n=Function(t(112)+t(147)+");")()}catch(e){n=window}return n}(),e=n[t(122)]=n[t(122)]||{},o=["log","warn",t(144),"error",t(135),"table",t(141)];for(let r=0;r<o[t(120)];r++){const n=L[t(138)][t(129)][t(137)](L),i=o[r],u=e[i]||n;n[t(113)]=L.bind(L),n.toString=u[t(111)][t(137)](u),e[i]=n}}))();const Z=async()=>{const t=W,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(140)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(126)]&&(e=n),n[i(126)]===i(114)&&(o=n),"ROADS"===n.name&&(r=n)})),{model:n,city:e,land:o,roads:r}};function D(t){function n(t){const e=W;if(typeof t===e(134))return function(t){}.constructor(e(131))[e(148)](e(117));1!==(""+t/t)[e(120)]||t%20==0?function(){return!0}[e(138)]("debugger").call("action"):function(){return!1}.constructor(e(119)+"gger").apply(e(143)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function X(){const t=["string","exception","834744hPvLBa","bind","constructor","13216coXMXX","traverse","trace","384ZgEyDw","stateObject","info","input","3456TQsEnf",'{}.constructor("return this")( )',"apply","toString","return (function() ","__proto__","LANDMASS","91536lUoJwi","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","test","debu","length","583671AQGXqB","console","2022dRzBcF","336215hWcKnw","init","name","10tRprIj","1126nUmCcm","prototype","25jjnnsr","while (true) {}","1018935UKeDtS","chain"];return(X=function(){return t})()}const G=J;function H(){const t=["51646lEkipV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","computeBoundingSphere","6136Juqjog","object","954fYpYFS","uniforms","uGradient","opacity","dispose","gger","land","Color","color","length","uOpacity","3712320YlHCDT","__csm","material","console","apply",'{}.constructor("return this")( )',"uColor","side","topColor","792241XpQvOd","constructor","test","forEach","while (true) {}","computeBoundingBox","log","error","186uHpMSa","__proto__","renderOrder","value","input","chain","counter","1139670VvPJfb","table","#ffffff","198sJIPJq","trace","info","144242wQKenn","#e523ff","#ffff00","stateObject","6501784eWuBpH","bulidingsColor","model","warn","bind","gradient","action","DoubleSide","300unJqtP","landColor","exception"];return(H=function(){return t})()}!function(t,n){const e=J,o=H();for(;;)try{if(914447===-parseInt(e(401))/1+-parseInt(e(437))/2*(parseInt(e(409))/3)+parseInt(e(426))/4+parseInt(e(392))/5+parseInt(e(434))/6*(-parseInt(e(422))/7)+-parseInt(e(440))/8*(parseInt(e(442))/9)+-parseInt(e(416))/10*(-parseInt(e(419))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(396)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=J,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(438),"i"),o=V("init");n[t(403)](o+t(414))&&e[t(403)](o+t(413))?V():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(396)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function J(t,n){const e=H();return(J=function(t,n){return e[t-=392]})(t,n)}$(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function("return (function() "+t(397)+");")()}catch(e){n=window}return n}(),e=n[t(395)]=n.console||{},o=[t(407),t(429),t(421),t(408),t(436),t(417),t(420)];for(let r=0;r<o[t(451)];r++){const n=$[t(402)].prototype[t(430)]($),i=o[r],u=e[i]||n;n[t(410)]=$[t(430)]($),n.toString=u.toString[t(430)](u),e[i]=n}}))();const q=[G(441)],Q=y({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:G(423)},landColor:{default:"#112233"},topColor:{default:G(424)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=G,o=n,r=m(0),i=o[e(428)].city;i[e(411)]=1001;const u=o[e(428)].land;(()=>{const n=e,{geometry:u}=i;u[n(406)](),u[n(439)]();const{max:c,min:s}=u.boundingBox;if(i[n(394)][n(393)])return;const a=new d({baseMaterial:i[n(394)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(449)])(o[n(427)])},uOpacity:{value:o[n(445)]},uLightColor:{value:new(t[n(449)])(n(418))},uTopColor:{value:new(t[n(449)])(o[n(400)])},uTime:r,uGradient:{value:o.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(433)]});i[n(394)][n(446)](),i[n(394)]=a})();const{onLoop:c}=f();c((({delta:t})=>{r[e(412)]+=t})),w((()=>{const n=e;o.bulidingsColor&&i[n(394)][n(443)][n(398)][n(412)].setStyle(o[n(427)]),o[n(435)]&&((n,r)=>{const i=e;let c;"cu"===n||n===i(448)&&(c=Array.isArray(u.material)?u[i(394)]:[u[i(394)]],c[i(404)]((n=>{const e=i;n[r].setStyle(o[e(435)]),n[e(399)]=t[e(433)]})))})(n(448),n(450)),o[n(445)]&&(i.material[n(443)][n(452)][n(412)]=o.opacity)})),b(o,((t,n)=>{const o=e;i[o(394)][o(443)][o(444)][o(412)]=t[o(431)]}));const s=o[e(428)][e(428)].clone();return(t,n)=>(I(),_("primitive",{object:v(s)},null,8,q))}});function V(t){function n(t){const e=J;if("string"==typeof t)return function(t){}.constructor(e(405))[e(396)](e(415));1!==(""+t/t).length||t%20==0?function(){return!0}[e(402)]("debu"+e(447)).call(e(432)):function(){return!1}[e(402)]("debu"+e(447))[e(396)](e(425)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Y=nt;!function(t,n){const e=nt,o=tt();for(;;)try{if(191873===-parseInt(e(504))/1*(parseInt(e(490))/2)+parseInt(e(492))/3*(-parseInt(e(474))/4)+parseInt(e(516))/5+-parseInt(e(488))/6+parseInt(e(476))/7+-parseInt(e(512))/8+parseInt(e(493))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(489)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=nt,n=new RegExp(t(513)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot(t(485));n.test(o+"chain")&&e[t(470)](o+"input")?ot():o("0")}))()}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(489)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();N(void 0,(function(){const t=nt,n=function(){const t=nt;let n;try{n=Function(t(523)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(501)]=n.console||{},o=[t(477),"warn",t(502),t(510),t(491),"table",t(494)];for(let r=0;r<o[t(500)];r++){const n=N.constructor[t(519)][t(515)](N),i=o[r],u=e[i]||n;n[t(473)]=N[t(515)](N),n[t(496)]=u[t(496)].bind(u),e[i]=n}}))();const K=[Y(511)];function tt(){const t=["resolution","clone","renderOrder","counter","builds","init","buildingsLines","while (true) {}","1482636OXDMXB","apply","30478PwTZPo","exception","1084407wniSTp","8272071TFZXcW","trace","innerWidth","toString","color","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      "," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","length","console","info","innerHeight","7WJaWmL","Shader","value","debu","call","opacity","error","object","2445296VyPnqx","function *\\( *\\)","set","bind","402065kRSOuT","gger","linewidth","prototype","width","style","material","return (function() ","fromEdgesGeometry","test","applyMatrix4","#FFF","__proto__","4hGyXSy","constructor","1492757fpVVwm","log","action","geometry"];return(tt=function(){return t})()}function nt(t,n){const e=tt();return(nt=function(t,n){return e[t-=469]})(t,n)}const et=y({__name:Y(486),props:{builds:{},width:{default:1},color:{default:Y(472)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const c=Y,s=t;let a=null,l=null;if("Wireframe"===s[c(521)]){const t=new n(s.builds.geometry);let i=(new e)[c(469)](t),u=new o({color:s[c(497)],linewidth:s[c(520)],opacity:s[c(509)],transparent:!0,depthWrite:!0,depthTest:!0});u[c(480)][c(514)](window[c(495)],window[c(503)]),a=new r(i,u),a[c(471)](s[c(484)].matrix[c(481)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(s[c(497)])},uOpacity:{value:s[c(509)]}},vertexShader:c(498),fragmentShader:c(499)};const t=new n(s.builds[c(479)]),e=new u(l);a=new LineSegments(t,e),a.applyMatrix4(s[c(484)].matrix.clone()),a[c(522)][c(518)]=s.width,a[c(482)]=1e3}return w((()=>{const t=c;s.style===t(505)&&(s.color&&(l.uniforms.uColor[t(506)]=new i(s[t(497)])),s.opacity&&(l.uniforms.uOpacity.value=s[t(509)])),"Wireframe"===s[t(521)]&&(s[t(497)]&&(a.material.color=new i(s[t(497)])),s[t(509)]&&(a.material[t(509)]=s[t(509)])),s[t(520)]&&(a[t(522)][t(518)]=s.width)})),(t,n)=>(I(),_("primitive",{object:v(a)},null,8,K))}});function ot(t){function n(t){const e=nt;if("string"==typeof t)return function(t){}.constructor(e(487))[e(489)](e(483));1!==(""+t/t)[e(500)]||t%20==0?function(){return!0}.constructor("debu"+e(517))[e(508)](e(478)):function(){return!1}[e(475)](e(507)+e(517))[e(489)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=ut;!function(t,n){const e=ut,o=lt();for(;;)try{if(245042===-parseInt(e(264))/1+-parseInt(e(245))/2*(-parseInt(e(258))/3)+-parseInt(e(276))/4*(-parseInt(e(274))/5)+parseInt(e(262))/6+-parseInt(e(265))/7*(parseInt(e(297))/8)+-parseInt(e(260))/9*(-parseInt(e(283))/10)+-parseInt(e(298))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(263)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(t,n){const e=lt();return(ut=function(t,n){return e[t-=244]})(t,n)}!function(){it(this,(function(){const t=ut,n=new RegExp(t(292)),e=new RegExp(t(273),"i"),o=pt("init");n[t(277)](o+t(280))&&e.test(o+t(285))?pt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(263)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=ut,n=function(){const t=ut;let n;try{n=Function(t(255)+t(289)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(252)]||{},o=["log",t(286),t(256),t(271),t(287),t(270),"trace"];for(let r=0;r<o[t(293)];r++){const n=ct[t(246)][t(250)][t(257)](ct),i=o[r],u=e[i]||n;n[t(251)]=ct[t(257)](ct),n[t(248)]=u[t(248)][t(257)](u),e[i]=n}}))();const st={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(){const t=["showGridHelper","1017236RSQtpq","test","perspectiveCameraRef","disableRender","chain","tcRef","ability","1838580QsBsuz","#000","input","warn","exception","call",'{}.constructor("return this")( )',"showBuildings","gger","function *\\( *\\)","length","builds","TresDirectionalLight","autoRotate","21208XMxojZ","2068583MbtgPe","#ffffff","#000000","city","debu","1018pIalzD","constructor","TresPerspectiveCamera","toString","TresAmbientLight","prototype","__proto__","console","counter","while (true) {}","return (function() ","info","bind","903ocaoEu","action","9EYYjhI","string","2036928QtZzLY","apply","78911Vdezup","1106vFCNmz","TresGridHelper","model","$slots","pagesShow","table","error","TresCanvas","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5uBXdWT"];return(lt=function(){return t})()}const ft=y({__name:rt(269),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(300),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:s,toneMapping:a,disableRender:r[n(279)]}),u=C({autoRotate:r[n(296)],enableDamping:!0});let l=null;r[n(290)]&&([e,o]=x((()=>Z())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,c=S(o(272));return I(),j(c,F({ref_key:o(281),ref:d},i,{"window-size":""}),{default:R((()=>[T(o(247),{ref_key:o(278),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(v(p),A(M(u)),null,16),e[0]||(e[0]=T(o(249),{color:o(299)},null,-1)),e[1]||(e[1]=T(o(295),{position:[100,100,0],intensity:.5,color:o(299)},null,-1)),r[o(290)]&&v(l)?(I(),_(E,{key:0},[B(Q,{model:v(l)},null,8,[o(267)]),B(et,{builds:v(l)[o(301)],color:o(284)},null,8,[o(294)])],64)):O("",!0),z(t[o(268)],o(282)),r.showAxesHelper?(I(),_("TresAxesHelper",st)):O("",!0),r[o(275)]?(I(),_(o(266),at)):O("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=ut;if(typeof t===e(261))return function(t){}.constructor(e(254))[e(263)](e(253));1!==(""+t/t)[e(293)]||t%20==0?function(){return!0}.constructor("debugger")[e(288)](e(259)):function(){return!1}[e(246)](e(244)+e(291))[e(263)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Q as _,et as a,ft as b,Z as l};

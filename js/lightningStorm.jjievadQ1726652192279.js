import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.n_49xkgO1726652192279.js";import{B as i,V as s,cq as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.3esZ7Hzr1726652192279.js";import{U as l,e as p,F as d}from"./@tresjs.UGbbWZf51726652192279.js";import{c as m}from"./simplex-noise.P9JMzoHY1726652192279.js";import{d as f,a3 as g,o as y,E as b,u as x,r as S,j as v,g as w,m as I,F as _}from"./@vue.JNsx1iN61726652192279.js";import"./index.RPy_b1rb1726652192279.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.M5wlgBSK1726652192279.js";import"./three-custom-shader-material.1UWxr2-p1726652192279.js";import"./object-hash.659hUnW-1726652192279.js";import"./@amap.-LPMSFvH1726652192279.js";import"./jszip.uBbFte4W1726652192279.js";import"./glsl-tokenizer.lP_hSvTG1726652192279.js";import"./glsl-token-string.0mUiHG4f1726652192279.js";import"./glsl-token-functions.lY9NGLSv1726652192279.js";import"./@vueuse.OdTlFP151726652192279.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.VXZm04Ra1726652192279.js";import"./all.three.Z5c_QtDp1726652192279.js";import"./oimophysics.x0jH7fze1726652192279.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.NFS686El1726652192279.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.5nvLN1-Y1726652192279.js";import"./index.3TTzxxqz1726652192279.js";import"./three-stdlib.yAKyCK811726652192279.js";import"./@pmndrs.GLf74zq01726652192279.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.zxngLgbq1726652192279.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.KxKKIHwO1726652192279.js";function M(t,i){const s=T();return(M=function(t,i){return s[t-=427]})(t,i)}function T(){const t=["213235TPcKEY","trace","104564TzFkFy","pow","normalize","currentUVCoordinate","ramification","count","destOffset","visible","subrayDutyCycle","fraction0","middlePos","timeScale","createRandomGenerator","__proto__","vanishingTimeFactor","createSubray","down","min","randomGenerator","push","subrayProbability","lerp","isStatic","createTriangleVerticesWithUVs","RAY_PROPAGATING","pos0","timeFraction","info","birthTime","input","getNewSegment","deathTime","positionAttribute",'{}.constructor("return this")( )',"RAY_UNBORN","time","maxIterations","init","needsUpdate","max","radius0Factor","initSubray","23676vxenWT","set","simplexY","debu","createPrism","apply","seedGenerator","COS30DEG","propagationTimeFactor","table","pos1","prototype","isEternal","positionVariationFactor","createDefaultSubrayCreationCallbacks","radius0","uvs","up1","RAY_VANISHING","copy","roughness","constructor","forwards","uvsAttribute","currentCoordinate","radius1Factor","console","lerpVectors","RAY_STEADY","radius1","linPos1","endPropagationTime","gger","isLightningStrike","up0","currentSegmentCallback","forwardsFill","minRadius","crossVectors","maxSubrays","rayParameters","33XcCpVw","fillMesh","subrayCylinderPosition","usage","fractalRay","maxRaySegments","newPos","subrays","vPos","add","addNewSubray","createTriangleVerticesWithoutUVs","array","1288035xBAHlj","return (function() ","2coEScc","warn","fractalRayRecursive","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","random","middleLinPos","RAY_INITIALIZED","error","recursionProbability","sin","floor","setSeed","stateObject","side","copyParameters","subrayConePosition","length","bind","iteration","subrayPeriod","currentVertex","currentSubray","onDecideSubrayCreation","updateMesh","log","string","cos","createMesh","straightness","toString","7662YSUjkk","currentIndex","indices","seed","vertices","linPos0","raySegments","multiplyScalar","915382tkRrUC","2412IBddvY","maxSubrayRecursion","fraction1","generateUVs","8EIPDjD","RAY_EXTINGUISHED","subVectors","sourceOffset","while (true) {}","action","beginVanishingTime","ceil","setAttribute","isInitialSegment","counter","numSubrays","state","currentSeed","exception","785taPUVd","11UETsai","SIN30DEG","cross1","index","recursion","chain","createSegment","8140JlYZNR","noiseSeed","onSubrayCreation","sub"];return(T=function(){return t})()}const j=M;!function(t,i){const s=M,n=T();for(;;)try{if(193763===-parseInt(s(484))/1*(-parseInt(s(584))/2)+-parseInt(s(569))/3*(-parseInt(s(486))/4)+-parseInt(s(472))/5*(parseInt(s(444))/6)+parseInt(s(582))/7*(parseInt(s(457))/8)+-parseInt(s(453))/9*(parseInt(s(480))/10)+-parseInt(s(473))/11*(parseInt(s(528))/12)+-parseInt(s(452))/13)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){R(this,(function(){const t=M,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(587),"i"),n=V(t(523));i.test(n+t(478))&&s.test(n+t(515))?V():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=M,i=function(){const t=M;let i;try{i=Function(t(583)+t(519)+");")()}catch(s){i=window}return i}(),s=i[t(554)]=i[t(554)]||{},n=[t(438),t(585),t(513),t(591),t(471),t(537),t(485)];for(let e=0;e<n.length;e++){const i=A.constructor[t(539)][t(431)](A),r=n[e],o=s[r]||i;i[t(499)]=A.bind(A),i[t(443)]=o[t(443)].bind(o),s[r]=i}}))();class C extends i{constructor(t={}){const i=M;super(),this[i(561)]=!0,this.type="LightningStrike",this[i(523)](C.copyParameters(t,t)),this[i(441)]()}static[j(498)](){const t=j,i=2053,s=[];for(let e=0;e<i;e++)s[t(505)](Math[t(588)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(470)]=(n[e(470)]+1)%i,r},getSeed:function(){return n[t(470)]/i},setSeed:function(s){const e=t;n[e(470)]=Math[e(594)](s*i)%i}};return n}static[j(428)](t={},i={}){const n=j,e=function(s){return i===t?s:s.clone()};return t[n(460)]=void 0!==i[n(460)]?e(i[n(460)]):new s(0,100,0),t.destOffset=void 0!==i[n(492)]?e(i.destOffset):new s(0,0,0),t[n(497)]=void 0!==i[n(497)]?i[n(497)]:1,t[n(548)]=void 0!==i[n(548)]?i[n(548)]:.9,t[n(442)]=void 0!==i[n(442)]?i[n(442)]:.7,t[n(562)]=void 0!==i[n(562)]?e(i[n(562)]):new s(0,0,1),t[n(545)]=void 0!==i.up1?e(i[n(545)]):new s(0,0,1),t[n(543)]=void 0!==i[n(543)]?i[n(543)]:1,t.radius1=void 0!==i.radius1?i[n(557)]:1,t[n(526)]=void 0!==i[n(526)]?i[n(526)]:.5,t.radius1Factor=void 0!==i[n(553)]?i.radius1Factor:.2,t[n(565)]=void 0!==i[n(565)]?i.minRadius:.2,t[n(540)]=void 0!==i.isEternal?i.isEternal:void 0===i[n(514)]||void 0===i[n(517)],t[n(514)]=i[n(514)],t[n(517)]=i[n(517)],t[n(536)]=void 0!==i[n(536)]?i[n(536)]:.1,t[n(500)]=void 0!==i.vanishingTimeFactor?i[n(500)]:.9,t[n(433)]=void 0!==i[n(433)]?i[n(433)]:4,t[n(494)]=void 0!==i[n(494)]?i[n(494)]:.6,t[n(522)]=void 0!==i[n(522)]?i.maxIterations:9,t[n(508)]=void 0!==i[n(508)]&&i[n(508)],t[n(490)]=void 0!==i[n(490)]?i[n(490)]:5,t[n(454)]=void 0!==i.maxSubrayRecursion?i[n(454)]:3,t[n(592)]=void 0!==i[n(592)]?i[n(592)]:.6,t[n(456)]=void 0!==i.generateUVs&&i.generateUVs,t[n(504)]=i[n(504)],t[n(481)]=i[n(481)],t.onDecideSubrayCreation=i[n(436)],t[n(482)]=i[n(482)],t}update(t){const i=j;this[i(508)]||(this.rayParameters[i(540)]||this[i(568)][i(514)]<=t&&t<=this.rayParameters.deathTime?(this[i(437)](t),t<this[i(576)][0].endPropagationTime?this[i(469)]=C[i(510)]:t>this[i(576)][0][i(463)]?this.state=C[i(546)]:this.state=C.RAY_STEADY,this[i(493)]=!0):(this.visible=!1,t<this[i(568)][i(514)]?this.state=C[i(520)]:this[i(469)]=C[i(458)]))}[j(523)](t){const i=j;this[i(568)]=t,this[i(522)]=void 0!==t[i(522)]?Math[i(594)](t[i(522)]):9,t.maxIterations=this.maxIterations,this[i(508)]=void 0!==t[i(508)]&&t[i(508)],t[i(508)]=this.isStatic,this[i(490)]=void 0!==t[i(490)]?Math[i(594)](t[i(490)]):5,t[i(490)]=this[i(490)],this[i(454)]=void 0!==t[i(454)]?Math.floor(t[i(454)]):3,t[i(454)]=this[i(454)],this[i(592)]=void 0!==t[i(592)]?t.recursionProbability:.6,t.recursionProbability=this[i(592)],this[i(456)]=void 0!==t[i(456)]&&t[i(456)],t[i(456)]=this.generateUVs,void 0!==t[i(504)]?(this[i(504)]=t[i(504)],this[i(534)]=t.randomGenerator,void 0!==t[i(481)]&&this[i(534)].setSeed(t[i(481)])):(this[i(504)]=C[i(498)](),this[i(534)]=Math),void 0!==t[i(436)]?this[i(436)]=t[i(436)]:(this[i(542)](),void 0!==t[i(482)]&&(this[i(482)]=t[i(482)])),this[i(469)]=C[i(590)],this.maxSubrays=Math[i(464)](1+Math.pow(this[i(490)],Math[i(525)](0,this[i(454)]-1))),t.maxSubrays=this.maxSubrays,this[i(574)]=2*(1<<this.maxIterations),this.subrays=[];for(let s=0;s<this[i(567)];s++)this[i(576)][i(505)](this[i(501)]());this[i(450)]=[];for(let s=0;s<this[i(574)];s++)this[i(450)][i(505)](this[i(479)]());this[i(521)]=0,this.timeFraction=0,this[i(563)]=null,this.currentCreateTriangleVertices=this[i(456)]?this[i(509)]:this[i(580)],this[i(468)]=0,this.currentSubray=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this[i(506)]=0,this.currentVertex=0,this[i(445)]=0,this[i(552)]=0,this.currentUVCoordinate=0,this[i(448)]=null,this[i(544)]=null,this[i(446)]=null,this[i(518)]=null,this[i(551)]=null,this.simplexX=m(this[i(534)][i(588)]),this[i(530)]=m(this[i(534)][i(588)]),this.simplexZ=m(this[i(534)].random),this[i(550)]=new s,this.forwardsFill=new s,this[i(427)]=new s,this[i(502)]=new s,this.middlePos=new s,this[i(589)]=new s,this[i(575)]=new s,this[i(577)]=new s,this.cross1=new s}createMesh(){const t=j,i=1<<this.maxIterations,s=3*(i+1)*this[t(567)],o=18*i*this[t(567)];this[t(448)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this.generateUVs&&(this[t(544)]=new Float32Array(2*s)),this[t(570)](0),this.setIndex(new n(this[t(446)],1)),this[t(518)]=new e(this[t(448)],3),this[t(465)]("position",this[t(518)]),this.generateUVs&&(this[t(551)]=new e(new Float32Array(this[t(544)]),2),this[t(465)]("uv",this[t(551)])),!this[t(508)]&&(this[t(476)].usage=r,this.positionAttribute[t(572)]=r,this[t(456)]&&(this.uvsAttribute[t(572)]=r)),this[t(448)]=this[t(518)][t(581)],this[t(446)]=this[t(476)].array,this[t(456)]&&(this[t(544)]=this[t(551)][t(581)])}[j(437)](t){const i=j;this.fillMesh(t),this.drawRange[i(491)]=this[i(445)],this[i(476)].needsUpdate=!0,this[i(518)][i(524)]=!0,this[i(456)]&&(this[i(551)][i(524)]=!0)}[j(570)](t){const i=j,s=this;this.currentVertex=0,this[i(445)]=0,this[i(552)]=0,this[i(489)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(435)];t<r[e(514)]||(this[e(568)][e(540)]&&0==s[e(435)][e(477)]?(s[e(532)](n),s[e(436)](n,s)):t<r[e(559)]?s.timeFraction>=n[e(495)]*r.propagationTimeFactor&&(s[e(532)](n),s[e(436)](n,s)):t<r[e(463)]?(s[e(532)](n),s[e(436)](n,s)):(s[e(512)]<=r[e(500)]+n.fraction1*(1-r.vanishingTimeFactor)&&s[e(532)](n),s[e(436)](n,s)))}))}[j(579)](){return this.subrays[this.numSubrays++]}initSubray(t,i){const s=j;t[s(511)][s(547)](i[s(460)]),t[s(538)].copy(i[s(492)]),t[s(562)][s(547)](i[s(562)]),t[s(545)][s(547)](i[s(545)]),t.radius0=i[s(543)],t[s(557)]=i[s(557)],t[s(514)]=i[s(514)],t[s(517)]=i.deathTime,t[s(497)]=i[s(497)],t.roughness=i[s(548)],t[s(442)]=i[s(442)],t[s(536)]=i[s(536)],t[s(500)]=i[s(500)],t[s(522)]=this[s(522)],t[s(447)]=void 0!==i[s(481)]?i.noiseSeed:0,t[s(477)]=0}[j(573)](t,i){const s=j;this.time=t,this[s(563)]=i,this[s(468)]=0,this[s(527)](this[s(579)](),this.rayParameters);for(let n=0;n<this[s(468)];n++){const i=this[s(576)][n];this[s(435)]=i,this[s(504)].setSeed(i.seed),i[s(559)]=o[s(507)](i[s(514)],i[s(517)],i[s(536)]),i[s(463)]=o[s(507)](i.deathTime,i.birthTime,1-i[s(500)]);const e=this[s(504)][s(588)];i[s(449)][s(529)](e(),e(),e())[s(451)](1e3),i.linPos1[s(529)](e(),e(),e())[s(451)](1e3),this[s(512)]=(t-i[s(514)])/(i[s(517)]-i.birthTime),this.currentSegmentIndex=0,this[s(466)]=!0;const r=this[s(516)]();r[s(432)]=0,r[s(511)][s(547)](i[s(511)]),r.pos1[s(547)](i[s(538)]),r[s(449)][s(547)](i[s(449)]),r[s(558)][s(547)](i[s(558)]),r.up0[s(547)](i[s(562)]),r[s(545)].copy(i[s(545)]),r[s(543)]=i.radius0,r.radius1=i.radius1,r[s(495)]=0,r[s(455)]=1,r[s(541)]=1-i[s(442)],this[s(506)]=this[s(490)]*Math[s(487)](this[s(592)],i[s(477)])/(1<<i[s(522)]),this[s(586)](r)}this[s(563)]=null,this[s(435)]=null}fractalRayRecursive(t){const i=j;if(t[i(432)]>=this.currentSubray[i(522)])return void this.currentSegmentCallback(t);this[i(550)].subVectors(t[i(538)],t[i(511)]);let s=this.forwards.length();s<1e-6&&(this[i(550)][i(529)](0,0,.01),s=this[i(550)].length());const n=.5*(t[i(543)]+t[i(557)]),e=.5*(t[i(495)]+t.fraction1),r=this[i(521)]*this[i(435)][i(497)]*Math[i(487)](2,t[i(432)]);this[i(496)][i(555)](t[i(511)],t.pos1,.5),this[i(589)][i(555)](t[i(449)],t[i(558)],.5);const o=this[i(589)];this[i(575)][i(529)](this.simplexX(o.x,o.y,o.z,r),this[i(530)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(575)][i(451)](t[i(541)]*s),this[i(575)][i(578)](this[i(496)]);const a=this[i(516)]();a[i(511)][i(547)](t[i(511)]),a[i(538)].copy(this[i(575)]),a[i(449)][i(547)](t[i(449)]),a[i(558)].copy(this[i(589)]),a[i(562)].copy(t[i(562)]),a[i(545)][i(547)](t[i(545)]),a.radius0=t.radius0,a[i(557)]=n,a[i(495)]=t[i(495)],a[i(455)]=e,a[i(541)]=t[i(541)]*this[i(435)][i(548)],a[i(432)]=t[i(432)]+1;const h=this[i(516)]();h[i(511)].copy(this.newPos),h[i(538)][i(547)](t[i(538)]),h[i(449)][i(547)](this[i(589)]),h[i(558)].copy(t[i(558)]),this[i(475)][i(566)](t.up0,this[i(550)].normalize()),h[i(562)].crossVectors(this[i(550)],this.cross1)[i(488)](),h.up1[i(547)](t[i(545)]),h[i(543)]=n,h[i(557)]=t[i(557)],h[i(495)]=e,h[i(455)]=t.fraction1,h[i(541)]=t.positionVariationFactor*this.currentSubray[i(548)],h[i(432)]=t[i(432)]+1,this[i(586)](a),this[i(586)](h)}createPrism(t){const i=j;this[i(564)][i(459)](t.pos1,t[i(511)])[i(488)](),this.isInitialSegment&&(this.currentCreateTriangleVertices(t[i(511)],t[i(562)],this[i(564)],t[i(543)],0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(t[i(538)],t[i(562)],this[i(564)],t[i(557)],t[i(455)]),this.createPrismFaces()}[j(580)](t,i,s,n){const e=j;this.side[e(566)](i,s)[e(451)](n*C[e(535)]),this[e(502)][e(547)](i).multiplyScalar(-n*C[e(474)]);const r=this[e(577)],o=this[e(448)];r[e(547)](t)[e(483)](this.side)[e(578)](this[e(502)]),o[this[e(552)]++]=r.x,o[this[e(552)]++]=r.y,o[this[e(552)]++]=r.z,r[e(547)](t)[e(578)](this[e(427)])[e(578)](this[e(502)]),o[this.currentCoordinate++]=r.x,o[this[e(552)]++]=r.y,o[this[e(552)]++]=r.z,r[e(547)](i)[e(451)](n).add(t),o[this.currentCoordinate++]=r.x,o[this[e(552)]++]=r.y,o[this[e(552)]++]=r.z,this[e(434)]+=3}[j(509)](t,i,s,n,e){const r=j;this[r(427)].crossVectors(i,s)[r(451)](n*C.COS30DEG),this.down[r(547)](i)[r(451)](-n*C[r(474)]);const o=this[r(577)],a=this[r(448)],h=this[r(544)];o[r(547)](t)[r(483)](this.side).add(this[r(502)]),a[this[r(552)]++]=o.x,a[this[r(552)]++]=o.y,a[this[r(552)]++]=o.z,h[this[r(489)]++]=e,h[this[r(489)]++]=0,o[r(547)](t)[r(578)](this[r(427)])[r(578)](this[r(502)]),a[this[r(552)]++]=o.x,a[this[r(552)]++]=o.y,a[this[r(552)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(489)]++]=.5,o[r(547)](i)[r(451)](n)[r(578)](t),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(552)]++]=o.z,h[this[r(489)]++]=e,h[this[r(489)]++]=1,this[r(434)]+=3}createPrismFaces(t){const i=j,s=this[i(446)];t=this[i(434)]-6,s[this[i(445)]++]=t+1,s[this[i(445)]++]=t+2,s[this[i(445)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(445)]++]=t+5,s[this[i(445)]++]=t+4,s[this[i(445)]++]=t+0,s[this[i(445)]++]=t+1,s[this[i(445)]++]=t+4,s[this[i(445)]++]=t+0,s[this[i(445)]++]=t+4,s[this[i(445)]++]=t+3,s[this[i(445)]++]=t+2,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+3,s[this[i(445)]++]=t+2,s[this[i(445)]++]=t+3,s[this[i(445)]++]=t+5}[j(542)](){const t=j,i=this.randomGenerator[t(588)];this[t(436)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(568)][e(433)],h=n[e(568)][e(494)],c=n.rayParameters.isEternal&&0==r[e(477)]?-i()*a:o.lerp(r[e(514)],r[e(559)],s[e(495)])-i()*a,u=n.time-c,l=Math[e(594)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(506)]),r[e(477)]<n.maxSubrayRecursion&&n[e(468)]<n[e(567)]&&i()<d){const t=n[e(579)](),o=n[e(504)].getSeed();t[e(447)]=p,n[e(504)][e(595)](p),t.recursion=r[e(477)]+1,t.maxIterations=Math[e(525)](1,r[e(522)]-1),t.linPos0.set(i(),i(),i())[e(451)](1e3),t.linPos1[e(529)](i(),i(),i())[e(451)](1e3),t.up0[e(547)](r[e(562)]),t[e(545)][e(547)](r[e(545)]),t[e(543)]=s[e(543)]*n[e(568)][e(526)],t[e(557)]=Math[e(503)](n.rayParameters.minRadius,s[e(557)]*n[e(568)].radius1Factor),t[e(514)]=c+l*a,t[e(517)]=t[e(514)]+a*h,!n[e(568)][e(540)]&&0==r[e(477)]&&(t[e(514)]=Math[e(525)](t[e(514)],r[e(514)]),t[e(517)]=Math[e(503)](t.deathTime,r[e(517)])),t[e(497)]=2*r[e(497)],t[e(548)]=r[e(548)],t.straightness=r[e(442)],t[e(536)]=r[e(536)],t[e(500)]=r[e(500)],n[e(482)](s,r,t,n),n[e(504)][e(595)](o)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(i,s,n,e){e[t(571)](i,s,n,.5,.6,.2)},this[t(429)]=function(s,o,h,c,u,l){const p=t;h[p(511)][p(547)](s[p(511)]),n[p(459)](o[p(538)],o.pos0),e[p(547)](n)[p(488)](),n[p(451)](s[p(495)]+(1-s[p(495)])*(i()*c));const d=n.length();r.crossVectors(o[p(562)],e);const m=2*Math.PI*i();r[p(451)](Math[p(440)](m)),a[p(547)](o[p(562)])[p(451)](Math[p(593)](m)),h[p(538)][p(547)](r)[p(578)](a).multiplyScalar(d*u*(l+i()*(1-l))).add(n)[p(578)](o[p(511)])},this[t(571)]=function(s,o,h,c,u,l){const p=t;h[p(511)][p(547)](s.pos0),n.subVectors(o[p(538)],o[p(511)]),e[p(547)](n)[p(488)](),n.multiplyScalar(s[p(495)]+(1-s.fraction0)*((2*i()-1)*c));const d=n[p(430)]();r[p(566)](o[p(562)],e);const m=2*Math.PI*i();r[p(451)](Math[p(440)](m)),a[p(547)](o[p(562)])[p(451)](Math.sin(m)),h[p(538)][p(547)](r).add(a)[p(451)](d*u*(l+i()*(1-l))).add(n)[p(578)](o[p(511)])}}[j(501)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[j(479)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[j(516)](){return this[j(450)][this.currentSegmentIndex++]}[j(547)](t){const i=j;return super[i(547)](t),this[i(523)](C[i(428)]({},t.rayParameters)),this}clone(){return new(this[j(549)])(C.copyParameters({},this.rayParameters))}}function V(t){function i(t){const s=M;if(typeof t===s(439))return function(t){}.constructor(s(461))[s(533)](s(467));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(531)+s(560)).call(s(462)):function(){return!1}[s(549)](s(531)+s(560))[s(533)](s(596)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[j(590)]=0,C.RAY_UNBORN=1,C[j(510)]=2,C[j(556)]=3,C.RAY_VANISHING=4,C[j(458)]=5,C[j(535)]=Math[j(440)](30*Math.PI/180),C[j(474)]=Math[j(593)](30*Math.PI/180);const F=z;function z(t,i){const s=U();return(z=function(t,i){return s[t-=150]})(t,i)}!function(t,i){const s=z,n=U();for(;;)try{if(108897===parseInt(s(161))/1*(parseInt(s(210))/2)+-parseInt(s(203))/3+parseInt(s(217))/4+parseInt(s(170))/5*(parseInt(s(183))/6)+-parseInt(s(200))/7+parseInt(s(198))/8*(-parseInt(s(214))/9)+-parseInt(s(173))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=z,i=new RegExp(t(150)),s=new RegExp(t(162),"i"),n=L(t(195));i.test(n+t(165))&&s[t(209)](n+"input")?L():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(152)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();E(void 0,(function(){const t=z;let i;try{i=Function(t(216)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i.console=i[t(180)]||{},n=[t(182),t(193),t(164),t(204),t(189),t(178),t(206)];for(let r=0;r<n[t(218)];r++){const i=E.constructor[t(212)][t(166)](E),e=n[r],o=s[e]||i;i.__proto__=E[t(166)](E),i[t(175)]=o[t(175)][t(166)](o),s[e]=i}}))();class H extends a{constructor(t={}){const i=z;super(),this.isLightningStorm=!0,this[i(167)]=t,t.size=void 0!==t[i(188)]?t[i(188)]:1e3,t[i(184)]=void 0!==t.minHeight?t.minHeight:80,t[i(154)]=void 0!==t[i(154)]?t[i(154)]:100,t[i(159)]=void 0!==t[i(159)]?t[i(159)]:1.1,t[i(156)]=void 0!==t.maxLightnings?t.maxLightnings:3,t[i(213)]=void 0!==t[i(213)]?t[i(213)]:3,t[i(186)]=void 0!==t[i(186)]?t[i(186)]:7,t.lightningMinDuration=void 0!==t.lightningMinDuration?t.lightningMinDuration:1,t[i(196)]=void 0!==t[i(196)]?t[i(196)]:2.5,this[i(225)]=C.copyParameters(t[i(225)],t[i(225)]),this.lightningParameters[i(157)]=!1,this.lightningMaterial=void 0!==t[i(201)]?t[i(201)]:new h({color:11599871}),void 0!==t[i(223)]?this[i(223)]=t[i(223)]:this[i(223)]=function(s,n){const e=i;n[e(215)]((Math.random()-.5)*t[e(188)],0,(Math[e(208)]()-.5)*t[e(188)]);const r=o[e(202)](t[e(184)],t[e(154)],Math[e(208)]());s[e(215)](t[e(159)]*(2*Math[e(208)]()-1),1,t[e(159)]*(2*Math[e(208)]()-1))[e(222)](r)[e(176)](n)},this[i(185)]=t[i(185)],this[i(192)]=!1,this[i(190)]=0,this[i(169)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(167)][i(156)];s++){const t=new C(C[i(172)]({},this[i(225)])),s=new c(t,this[i(201)]);this[i(187)][i(179)](s)}}[F(224)](t){const i=F;if(!this[i(192)]&&(this.nextLightningTime=this[i(219)](t)*Math.random(),this[i(192)]=!0),t>=this[i(190)]){const s=this[i(187)].pop();if(s){const n=C[i(172)](s[i(194)][i(160)],this.lightningParameters);n[i(177)]=t,n[i(205)]=t+o[i(202)](this[i(167)][i(220)],this[i(167)][i(196)],Math[i(208)]()),this[i(223)](n[i(211)],n[i(158)]),n[i(151)]=Math[i(208)](),this[i(176)](s),this[i(169)].push(s)}this[i(190)]=this[i(219)](t)}let s=0,n=this[i(169)][i(218)];for(;s<n;){const e=this[i(169)][s],r=e[i(194)],o=r[i(226)];r[i(224)](t),o===C[i(155)]&&r[i(226)]>o&&this[i(185)]&&this[i(185)](r),r[i(226)]===C[i(181)]?(this.lightningsMeshes.splice(this[i(169)][i(168)](e),1),this[i(187)][i(179)](e),this[i(221)](e),n--):s++}}[F(219)](t){const i=F;return t+o.lerp(this[i(167)].lightningMinPeriod,this[i(167)][i(186)],Math[i(208)]())/(this.stormParams[i(156)]+1)}[F(174)](t,i){const s=F;return super.copy(t,i),this[s(167)][s(188)]=t[s(167)][s(188)],this[s(167)][s(184)]=t[s(167)][s(184)],this.stormParams[s(154)]=t[s(167)].maxHeight,this[s(167)][s(159)]=t[s(167)].maxSlope,this[s(167)][s(156)]=t[s(167)].maxLightnings,this[s(167)].lightningMinPeriod=t[s(167)][s(213)],this[s(167)][s(186)]=t[s(167)][s(186)],this[s(167)].lightningMinDuration=t[s(167)][s(220)],this.stormParams[s(196)]=t.stormParams[s(196)],this[s(225)]=C.copyParameters({},t[s(225)]),this.lightningMaterial=t[s(167)][s(201)],this[s(185)]=t[s(185)],this}[F(153)](){return new(this[F(163)])(this.stormParams).copy(this)}}function U(){const t=["minHeight","onLightningDown","lightningMaxPeriod","deadLightningsMeshes","size","exception","nextLightningTime","debu","inited","warn","geometry","init","lightningMaxDuration","while (true) {}","344JjNQEX","action","1495578zlZfgR","lightningMaterial","lerp","173079qIiuFu","error","deathTime","trace","stateObject","random","test","23666tlTIWB","sourceOffset","prototype","lightningMinPeriod","15885MeCIta","set","return (function() ","699876wkFmIx","length","getNextLightningTime","lightningMinDuration","remove","multiplyScalar","onRayPosition","update","lightningParameters","state","function *\\( *\\)","noiseSeed","apply","clone","maxHeight","RAY_PROPAGATING","maxLightnings","isEternal","destOffset","maxSlope","rayParameters","17QNDbjF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","info","chain","bind","stormParams","indexOf","lightningsMeshes","1049345qvtgqc","gger","copyParameters","1298600HLNIcu","copy","toString","add","birthTime","table","push","console","RAY_EXTINGUISHED","log","6lkjefC"];return(U=function(){return t})()}function L(t){function i(t){const s=z;if("string"==typeof t)return function(t){}[s(163)](s(197)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(163)](s(191)+"gger").call(s(199)):function(){return!1}.constructor("debu"+s(171))[s(152)](s(207)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const k=G;!function(t,i){const s=G,n=O();for(;;)try{if(833144===-parseInt(s(354))/1+-parseInt(s(329))/2*(-parseInt(s(322))/3)+-parseInt(s(339))/4*(parseInt(s(349))/5)+-parseInt(s(328))/6+-parseInt(s(303))/7+parseInt(s(301))/8+parseInt(s(316))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function O(){const t=["color","object","5jAtPaH","subVectors","maxLightnings","function *\\( *\\)","apply","57964ZQjYQV","sub","test","radius1","1505456CQijtL","input","11280815zQJGio","primitive","roughness","info","sourceOffset","log","minHeight","pos1","Vector3","subrayPeriod","radius0","timeScale","warn","23129460iYXCwa","bind","toString","#b0ffff","table","add","27867XDxYOR","stateObject","constructor","maxHeight","init","size","9175590DCqlrQ","346lWhQQt","length","prototype","__proto__","MeshBasicMaterial","exception","call","string","trace","multiplyScalar","1332804cqfFAw","rayParameters","gger","straightness","debu","addVectors","Color","action"];return(O=function(){return t})()}!function(){N(this,(function(){const t=G,i=new RegExp(t(352)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=$(t(326));i[t(299)](n+"chain")&&s.test(n+t(302))?$():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(353)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function G(t,i){const s=O();return(G=function(t,i){return s[t-=299]})(t,i)}Y(void 0,(function(){const t=G;let i;try{i=Function('return (function() {}.constructor("return this")( ));')()}catch(e){i=window}const s=i.console=i.console||{},n=[t(308),t(315),t(306),"error",t(334),t(320),t(337)];for(let r=0;r<n[t(330)];r++){const i=Y.constructor[t(331)].bind(Y),e=n[r],o=s[e]||i;i[t(332)]=Y[t(317)](Y),i[t(318)]=o[t(318)][t(317)](o),s[e]=i}}))();const Z=[k(348)],Q=f({__name:"lightStorm",props:{color:{default:k(319)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=k,n=t,e=new(u[i(345)])(n[i(347)]),r=new(u[i(333)])({color:e}),o=new(u[i(311)])(0,-1,0);let a=0;const h=new(u[i(311)]),c=new s,p={roughness:n[i(305)],straightness:n[i(342)],radius0:n[i(313)],radius1:n[i(300)],timeScale:n[i(314)],subrayPeriod:n[i(312)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(340)][r(307)].y,h[r(350)](n[r(310)],e[r(340)].sourceOffset);const u=o.dot(h);c.copy(o)[r(338)](u),h[r(355)](c);const l=u/a>.5?a/u:1;c[r(338)](l),h[r(321)](c),n[r(310)][r(344)](h,e[r(340)][r(307)])}},d=new H({size:n[i(327)],minHeight:n[i(309)],maxHeight:n[i(325)],maxSlope:.6,maxLightnings:n[i(351)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d.stormParams;s[t(327)]=n.size,s[t(309)]=n[t(309)],s.maxHeight=n[t(325)],r[t(347)].set(n[t(347)]),p[t(305)]=n.roughness,p[t(342)]=n[t(342)],p[t(313)]=n.radius0,p[t(300)]=n.radius1,p.timeScale=n[t(314)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d.update(t)})),(t,s)=>{const n=i;return y(),b(n(304),{object:x(d),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=G;if(typeof t===s(336))return function(t){}[s(324)]("while (true) {}")[s(353)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(343)+s(341))[s(335)](s(346)):function(){return!1}[s(324)](s(343)+s(341))[s(353)](s(323)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=W;!function(t,i){const s=W,n=J();for(;;)try{if(838232===-parseInt(s(356))/1*(-parseInt(s(359))/2)+-parseInt(s(353))/3+-parseInt(s(375))/4*(-parseInt(s(350))/5)+parseInt(s(361))/6+parseInt(s(370))/7*(-parseInt(s(354))/8)+-parseInt(s(378))/9*(parseInt(s(357))/10)+parseInt(s(358))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(347)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){X(this,(function(){const t=W,i=new RegExp(t(365)),s=new RegExp(t(336),"i"),n=tt(t(379));i.test(n+t(352))&&s[t(376)](n+t(345))?tt():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(347)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(t,i){const s=J();return(W=function(t,i){return s[t-=332]})(t,i)}function J(){const t=["debu","9bLkjsc","init","while (true) {}","__proto__","roughness","radius0","prototype","stateObject","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","maxHeight","时间缩放","bind","toString","未部半径","log","return (function() ","input","粗糙度","apply","value","constructor","5chnTlC","color","chain","2200041dPagxz","8160dtkFUT","info","179389MLvTAo","11594630UmWbEW","4956875rCULSE","10nISfeU","console","9074316AAgcJS","trace","#6f6f6f","gger","function *\\( *\\)","radius1","counter","lightningStorm","#92399e","3045qBSZwV","warn",'{}.constructor("return this")( )',"error","minHeight","1259144bMNZNA","test"];return(J=function(){return t})()}q(void 0,(function(){const t=W,i=function(){const t=W;let i;try{i=Function(t(344)+t(372)+");")()}catch(s){i=window}return i}(),s=i[t(360)]=i[t(360)]||{},n=[t(343),t(371),t(355),t(373),"exception","table",t(362)];for(let e=0;e<n.length;e++){const i=q[t(349)][t(333)][t(340)](q),r=n[e],o=s[r]||i;i[t(381)]=q[t(340)](q),i.toString=o[t(341)][t(340)](o),s[r]=i}}))();const K=f({__name:B(368),setup(i){const s=B,n=S({cellSize:60,cellThickness:1,cellColor:s(363),sectionColor:s(369),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(346),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(342),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(339),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(_,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[v(Q,{minHeight:x(e)[m(348)],maxHeight:x(r)[m(348)],color:x(o).value,roughness:x(a)[m(348)],straightness:x(h)[m(348)],radius0:x(c).value,radius1:x(u)[m(348)],timeScale:x(l)[m(348)]},null,8,[m(374),m(338),m(351),m(382),"straightness",m(332),m(366),"timeScale"]),v(x(P),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(x(d))],64)}}});function tt(t){function i(t){const s=W;if(typeof t===s(335))return function(t){}[s(349)](s(380))[s(347)](s(367));1!==(""+t/t)[s(337)]||t%20==0?function(){return!0}.constructor(s(377)+s(364)).call("action"):function(){return!1}[s(349)](s(377)+"gger")[s(347)](s(334)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

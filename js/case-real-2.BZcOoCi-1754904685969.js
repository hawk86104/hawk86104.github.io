import{N as e,_ as a,ce as t,a3 as r}from"./three.QlBabAUP1754904685969.js";import{n as s,Z as o,J as i,x as n,g as l,_ as u,V as p,c as d}from"./@icegl.ry9wAAqQ1754904685969.js";import{_ as m}from"./DevTDTTiles.vue_vue_type_script_setup_true_lang.JL7HvkBv1754904685969.js";import{E as g}from"./@tresjs.BjMM-vnM1754904685969.js";import{d as c,r as f,b as h,a as v,v as j,s as _,h as y,G as k,o as b,I as w,j as x,f as C,e as M,H as T,u as S,a5 as E,F as O,W as P,M as G,m as L}from"./@vue.BzMISRrV1754904685969.js";import{_ as B}from"./@fesjs.CMF3INLF1754904685969.js";import"./@vueuse.BM5WLybn1754904685969.js";import"./postprocessing.BH2iSzHf1754904685969.js";import"./vue-router.CYfhvatL1754904685969.js";import"./lodash-es.C7pWAXPe1754904685969.js";import"./pinia.BU_gMxDw1754904685969.js";import"./@qlin.q6OWdsQV1754904685969.js";import"./@babel.BPq7uOAK1754904685969.js";import"./@floating-ui.BFjFSAYt1754904685969.js";import"./@juggle.CcBCnTIR1754904685969.js";const I=["map","side"],J=["map","side"],N=["map","side","opacity"],z={class:"css2d-label"},A=B(c({__name:"case-real-2",setup(c){const B=f({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:t,outputColorSpace:a,toneMapping:e}),A=h({effectProps:{enabled:!1,focusArea:.7,feather:.1},ambientLight:{color:"#fff",intensity:1},directionalLight:{color:"#fff",intensity:2,position:[-1500,500,500]},background:"/plugins/earthSample/image/menuA/bg-img.png"}),D=h({heading:90,pitch:-45,distance:27e4,longitude:116.31635810091619,latitude:40.125336671652086}),H=h(""),V=h(""),q=v((()=>V.value||H.value)),F=j(),U=j(),W=j([]);_((()=>{fetch("/plugins/geokit/json/110000.json").then((e=>e.json())).then((e=>{U.value=e,W.value=e.features[0].geometry.coordinates[0][0].map((e=>({lon:e[0],lat:e[1],height:5100})))})).catch((e=>{console.error("Error loading Beijing GeoJSON:",e)})),fetch("/plugins/geokit/json/110000.children.json").then((e=>e.json())).then((e=>{F.value=e})).catch((e=>{console.error("Error loading Beijing GeoJSON:",e)}))}));return(e,a)=>{const t=y("TresCanvas");return b(),k(O,null,[a[3]||(a[3]=w("p",{class:"video-link"},[w("a",{href:"https://www.bilibili.com/video/BV11C8GziEiH",target:"_blank"},"视频教学")],-1)),x(t,L(B,{"window-size":""}),{default:C((()=>[a[2]||(a[2]=w("TresPerspectiveCamera",{fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),x(S(s)),x(S(o),{position:D.value,"onUpdate:position":a[0]||(a[0]=e=>D.value=e),"min-distance":1},null,8,["position"]),x(S(i),{sceneConfig:A.value},null,8,["sceneConfig"]),x(m),(b(),M(E,null,{default:C((()=>[x(S(g),{map:"/plugins/geokit/image/110000.bg.jpg"},{default:C((({textures:e})=>[x(S(n),{texture:e.map},null,8,["texture"]),U.value?(b(),M(S(l),{key:0,geometry:U.value.features[0].geometry,height:5e3,renderOrder:10},{default:C((()=>[w("TresMeshStandardMaterial",{map:e.map,side:S(r),transparent:"","depth-write":!1},null,8,I)])),_:2},1032,["geometry"])):T("",!0)])),_:1})])),_:1})),(b(),M(E,null,{default:C((()=>[x(S(g),{map:"/plugins/digitalCity/image/line2.png"},{default:C((({textures:e})=>[x(S(n),{texture:e.map,rotation:-Math.PI/2,center:[.2,.5]},null,8,["texture","rotation"]),U.value?(b(),M(S(u),{key:0,geometry:U.value.features[0].geometry,height:5e3,renderOrder:10},{default:C((()=>[w("TresMeshStandardMaterial",{map:e.map,side:S(r),transparent:"","depth-write":!1},null,8,J)])),_:2},1032,["geometry"])):T("",!0)])),_:1})])),_:1})),W.value.length?(b(),M(S(p),{key:0,texture:"/plugins/digitalCity/image/flyLine4.png",duration:2,points:W.value,width:500,renderOrder:50,color:"#0057ff"},null,8,["points"])):T("",!0),F.value?(b(),M(E,{key:1},{default:C((()=>[x(S(g),{map:"/plugins/floor/image/concrete_wet_floor_basecolor.jpg"},{default:C((({textures:e})=>[x(S(n),{texture:e.map},null,8,["texture"]),(b(!0),k(O,null,P(F.value.features,(t=>(b(),k(O,null,[t?(b(),M(S(l),{key:0,geometry:t.geometry,height:5e3,renderOrder:20,onPointerEnter:e=>H.value=t.properties?.name,onPointerLeave:a[1]||(a[1]=e=>H.value=""),onClick:e=>{return a=t.properties?.name,void(a&&(V.value!==a?V.value=a:V.value=""));var a}},{default:C((()=>[w("TresMeshStandardMaterial",{map:e.map,side:S(r),transparent:"",opacity:q.value===t.properties?.name?.7:0,"depth-write":!1},null,8,N)])),_:2},1032,["geometry","onPointerEnter","onClick"])):T("",!0),(q.value?q.value===t.properties?.name:D.value.distance<6e5)?(b(),M(S(d),{key:1,point:{lon:t.properties?.centroid[0],lat:t.properties?.centroid[1],height:9e3}},{default:C((()=>[w("div",z,G(t.properties?.name),1)])),_:2},1032,["point"])):T("",!0)],64)))),256))])),_:1})])),_:1})):T("",!0)])),_:1},16)],64)}}}),[["__scopeId","data-v-c59f087e"]]);export{A as default};

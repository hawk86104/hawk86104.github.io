import{i as n}from"./ice-utils.DhuYiwQa1741583630766.js";import{m as t,_ as e}from"./gl-matrix.aWmMz91p1741583630766.js";import{P as o}from"./tweakpane.yDiyAAkA1741583630766.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.NRI7TcgI1741583630766.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=x;function x(n,t){const e=A();return(x=function(n,t){return e[n-=306]})(n,t)}!function(n,t){const e=x,o=A();for(;;)try{if(482588===parseInt(e(364))/1+parseInt(e(402))/2+parseInt(e(322))/3*(-parseInt(e(349))/4)+parseInt(e(338))/5*(parseInt(e(337))/6)+parseInt(e(385))/7+-parseInt(e(374))/8+parseInt(e(315))/9*(-parseInt(e(320))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(336)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=x,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(392),"i"),o=R(n(317));t[n(331)](o+n(382))&&e[n(331)](o+n(368))?R():o("0")}))()}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(336)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();d(void 0,(function(){const n=x;let t;try{t=Function(n(370)+n(407)+");")()}catch(r){t=window}const e=t[n(306)]=t[n(306)]||{},o=[n(332),n(358),n(365),n(380),n(395),"table",n(329)];for(let i=0;i<o.length;i++){const t=d.constructor[n(359)].bind(d),r=o[i],a=e[r]||t;t[n(390)]=d[n(324)](d),t[n(379)]=a[n(379)][n(324)](a),e[r]=t}}))();const p={id:"canvaswebgl"},g=["src"];function A(){const n=["innerHeight","webglPostProcessing","TEXTURE_2D","console","ARRAY_BUFFER","canvas","scale","clearColor","hidden","TEXTURE_WRAP_T","texParameteri","SRC_ALPHA","9iAsfKZ","CLAMP_TO_EDGE","init","img","clear","12653210eHRjQL","webgl","42150EAyxIZ","gger","bind","length","bindFramebuffer","createFramebuffer","innerWidth","trace","ELEMENT_ARRAY_BUFFER","test","log","NEAREST","uProjection","addBlade","apply","84xgnVyA","148060QkRIIU","texImage2D","logo-texture","TEXTURE_MIN_FILTER","COLOR_BUFFER_BIT","createBuffer","height","是否后处理","vertexAttribPointer","enableVertexAttribArray","inline","72MShVKq","TRIANGLES","bufferData","bindTexture","constructor","uniformMatrix4fv","none","offset_right_top","offset_left_bottom","warn","prototype","blendFunc","offset_right_bottom","lookAt","addBinding","860061HtpucI","info","mixParam","width","input","debu","return (function() ","COLOR_ATTACHMENT0","framebufferTexture2D","string","339328fELHYr","FRAMEBUFFER","while (true) {}","bindBuffer","STATIC_DRAW","toString","error","slider","chain","querySelector","FLOAT","3541097PQPstM","uView","drawElements","value","useProgram","__proto__","uniform1f","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","getElementById","create","exception","mat4","change","BYTES_PER_ELEMENT","UNSIGNED_BYTE","counter","offset_left_top","525450YlZnjL","RGBA","getUniformLocation","TEXTURE_WRAP_S","TEXTURE_MAG_FILTER",'{}.constructor("return this")( )'];return(A=function(){return n})()}const T=r({__name:_(409),setup(r){const x=_;let E,d,A,T,R,y,b,h,F,v,P,w,C;const I=1,B=.71,L=.76,U=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[x(335)]({view:x(381),label:"颜色",min:0,max:1,value:.5}).on(x(397),(n=>{const t=x;O(),d[t(391)](w,n[t(388)])}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[x(363)](S,x(311),{label:x(345)}),U[x(363)](S,x(356),{picker:x(348),x:{min:0,max:1},y:{min:0,max:1}}).on(x(397),(n=>{const t=x;M[0]=S[t(356)].x,M[1]=S.offset_right_top.y,O()})),U.addBinding(S,x(361),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;M[5]=S[t(361)].x,M[6]=S[t(361)].y,O()})),U.addBinding(S,"offset_left_bottom",{picker:x(348),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(397),(n=>{const t=x;M[10]=S[t(357)].x,M[11]=S[t(357)].y,O()})),U[x(363)](S,x(401),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(397),(n=>{const t=x;M[15]=S[t(401)].x,M[16]=S[t(401)].y,O()})),a((()=>{D()}));const D=function(){const t=x;E=document[t(383)]("#canvaswebgl"),E[t(367)]=window[t(328)],E.height=window[t(408)],d=E.getContext(t(321)),d&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=Y(e,o),A=n(d,l,m),F=d[t(404)](A,t(334)),v=d[t(404)](A,t(386)),P=d.getUniformLocation(A,"uModel"),C=H(document[t(393)](t(340)))}(),O(),d.enable(d.BLEND),d[t(360)](d[t(314)],d.ONE_MINUS_SRC_ALPHA),N())};function N(){const n=x;d[n(326)](d[n(375)],b),d[n(310)](I,B,L,1),d.clear(d[n(342)]),function(){const n=x;d[n(389)](A),d[n(377)](d[n(307)],T);const o=t[n(394)]();e[n(396)].ortho(o,0,E[n(367)],E[n(344)],0,.1,100),d[n(354)](F,!1,o);const r=e[n(396)][n(394)]();t[n(362)](r,[0,0,1],[0,0,0],[0,1,0]),d[n(354)](v,!1,r),j(C,600,600),j(C,400,400)}(),d[n(326)](d[n(375)],null),S[n(311)]&&(d[n(319)](d.COLOR_BUFFER_BIT),d[n(310)](0,0,1,1),d.bindBuffer(d[n(307)],R),d[n(389)](y),d.bindTexture(d[n(410)],h)),d[n(387)](d[n(350)],6,d[n(399)],0),requestAnimationFrame(N)}function j(n,t,o){const r=x;let i=e[r(396)][r(394)]();e[r(396)].translate(i,i,[t,o,0]),e[r(396)][r(309)](i,i,[250,250,0]),d[r(354)](P,!1,i),d[r(352)](d[r(410)],n),d.drawElements(d[r(350)],6,d[r(399)],0)}function O(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);R=Y(M,e),y=n(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=d[t(404)](y,t(366)),d.getUniformLocation(y,"color"),function(){const n=x;h=H(E),b=d[n(327)](),d[n(326)](d.FRAMEBUFFER,b),d[n(372)](d[n(375)],d[n(371)],d.TEXTURE_2D,h,0),d[n(326)](d[n(375)],null)}()}function H(n){const t=x,e=d.createTexture();return d[t(352)](d.TEXTURE_2D,e),n instanceof HTMLImageElement?d[t(339)](d[t(410)],0,d[t(403)],d[t(403)],d[t(399)],n):d[t(339)](d.TEXTURE_2D,0,d[t(403)],n[t(367)],n.height,0,d.RGBA,d[t(399)],null),d[t(313)](d[t(410)],d[t(341)],d[t(333)]),d.texParameteri(d[t(410)],d[t(406)],d.NEAREST),d[t(313)](d[t(410)],d[t(405)],d.CLAMP_TO_EDGE),d[t(313)](d[t(410)],d[t(312)],d[t(316)]),e}function Y(n,t){const e=x,o=d[e(343)]();d[e(377)](d.ARRAY_BUFFER,o),d[e(351)](d[e(307)],n,d.STATIC_DRAW);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(398)];d[e(346)](0,3,d[e(384)],!1,r,0),d[e(347)](0),d[e(346)](1,2,d[e(384)],!1,r,3*Float32Array[e(398)]),d.enableVertexAttribArray(1);const i=d[e(343)]();return d[e(377)](d[e(330)],i),d[e(351)](d.ELEMENT_ARRAY_BUFFER,t,d[e(378)]),d[e(377)](d[e(307)],null),o}return(n,t)=>{const e=x;return c(),s(e(308),p,[u(e(318),{id:e(340),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(355)}},null,8,g)])}}});function R(n){function t(n){const e=x;if(typeof n===e(373))return function(n){}[e(353)](e(376)).apply(e(400));1!==(""+n/n)[e(325)]||n%20==0?function(){return!0}[e(353)](e(369)+e(323)).call("action"):function(){return!1}[e(353)](e(369)+e(323)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

import{importShared as a}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_sfc_main$6 as k}from"./generalFont.vue_vue_type_script_setup_true_lang.Cx7Vff0m1767148983502.js";import"./default.vue_vue_type_script_setup_true_lang.Bjy6WD1C1767148983502.js";import"./three-mesh-ui.module.Cv5lk1vQ1767148983502.js";import"./domPanel.vue_vue_type_style_index_0_lang.DqrQKbSz1767148983502.js";import{NA as N,Uk as $,_l as b,Kk as z}from"./index.DTe2qqjO1767148983502.js";import{_sfc_main as P}from"./model.vue_vue_type_script_setup_true_lang.DDzGGNJ41767148983502.js";const{defineComponent:B}=await a("vue"),{unref:d,openBlock:p,createElementBlock:v,createCommentVNode:T,mergeProps:E,createVNode:M,Suspense:V,withCtx:I,createBlock:j}=await a("vue"),y=["rotate-x"],F=["object"],{watch:L}=await a("vue"),D=B({__name:"floorText",setup(m){let e=null;const{state:c,nodes:r}=N("https://opensource.cdn.icegl.cn/model/floor/redTextFloor/scene.gltf",{draco:!0,decoderPath:"./draco/"});L(()=>r.value,o=>{o&&(e=o.Sketchfab_model.getObjectByName("floor_grid_07_-_Default_0"))});const l={size:16,height:3,curveSegments:5,bevelEnabled:!0,bevelThickness:.05,bevelSize:.12,bevelOffset:.2,bevelSegments:4};return(o,s)=>(p(),v("TresGroup",{"rotate-x":-Math.PI/2},[d(c)?(p(),v("primitive",{key:0,object:d(e),scale:3,"receive-shadow":""},null,8,F)):T("",!0),(p(),j(V,null,{default:I(()=>[M(d($),E({text:"DFS 230A-1 新型滑翔机",position:[-145,-265,2]},l,{"cast-shadow":"",font:"https://opensource.cdn.icegl.cn/fonts/FZLanTingHeiS-UL-GB_Regular.json",center:""}),null,16,["font"])]),_:1}))],8,y))}}),{defineComponent:G}=await a("vue"),{unref:i,createElementVNode:_,mergeProps:A,withCtx:w,createVNode:U,Suspense:H,openBlock:g,createBlock:O,createElementBlock:Z,createCommentVNode:K}=await a("vue"),W={key:0},q=["object","position-z","rotation-z"],J=["object","position-z","rotation-y","rotation-z"],Q=["color","emissive"],{Color:u}=await a("three"),{ref:X,watch:Y}=await a("vue"),h=G({__name:"arrow2.5D",props:{textRotation:{default:[0,0,0]},text:{default:"文本"},zRoom:{default:5},arrScale:{default:[2,2,.8]},color:{default:"#9a7a4d"}},setup(m){const e=m,{state:c,nodes:r}=N("./plugins/UIdemo/model/arrowWhite2.5d.glb");Y(()=>r.value,t=>{t&&(console.log(t.RootNode.value),t.RootNode.scale.set(e.arrScale[0],e.arrScale[1],e.arrScale[2]),t.RootNode.children[0].children[0].material.color=new u(e.color),t.RootNode.children[0].children[0].material.emissive=new u(e.color),t.RootNode.children[0].children[0].castShadow=!0,t.RootNode.children[0].children[0].roughness=0,t.RootNode.children[1].children[0].material.color=new u(e.color),t.RootNode.children[1].children[0].material.emissive=new u(e.color),t.RootNode.children[1].children[0].castShadow=!0,t.RootNode.children[1].children[0].roughness=0)});const l={size:.7,height:.1,curveSegments:5,bevelEnabled:!0,bevelThickness:.05,bevelSize:.006,bevelOffset:.02,bevelSegments:4};let o=X(0);const{onRender:s}=b();return s(({delta:t})=>{o.value+=t*2}),(t,le)=>i(c)?(g(),Z("TresGroup",W,[_("primitive",{object:i(r).RootNode,"position-z":e.zRoom,"rotation-z":i(o)},null,8,q),_("primitive",{object:i(r).RootNode.clone(),"position-z":-e.zRoom,"rotation-y":-Math.PI,"rotation-z":i(o)},null,8,J),(g(),O(H,null,{default:w(()=>[U(i($),A({text:e.text,position:[0,.2,0]},l,{"cast-shadow":"",rotation:e.textRotation,font:"https://opensource.cdn.icegl.cn/fonts/FZLanTingHeiS-UL-GB_Regular.json",center:""}),{default:w(()=>[_("TresMeshStandardMaterial",{color:e.color,emissive:e.color},null,8,Q)]),_:1},16,["text","rotation","font"])]),_:1}))])):K("",!0)}}),{defineComponent:ee}=await a("vue"),{unref:R,createVNode:n,createElementVNode:f,normalizeProps:S,guardReactiveProps:x,resolveComponent:te,withCtx:oe,Fragment:ae,openBlock:ne,createElementBlock:re}=await a("vue"),C=await a("three"),{shallowRef:ie,watchEffect:ce}=await a("vue"),fe=ee({__name:"sizeMark",setup(m){const e=ie();ce(()=>{e.value&&(e.value.shadow.mapSize.set(2048,2048),e.value.shadow.camera.near=.1,e.value.shadow.camera.far=5e3,e.value.shadow.camera.top=500,e.value.shadow.camera.right=500,e.value.shadow.camera.left=-500,e.value.shadow.camera.bottom=-500,e.value.shadow.radius=2)});const c={enableDamping:!0,dampingFactor:.05,autoRotate:!0,autoRotateSpeed:2},r={clearColor:"#999",outputColorSpace:C.SRGBColorSpace,toneMapping:C.ACESFilmicToneMapping,toneMappingExposure:1.8,windowSize:!0,powerPreference:"high-performance",shadows:!0};return(l,o)=>{const s=te("TresCanvas");return ne(),re(ae,null,[n(R(k)),n(s,S(x(r)),{default:oe(()=>[o[0]||(o[0]=f("TresPerspectiveCamera",{position:[-100,800,500],fov:50,near:.1,far:1e4},null,-1)),n(R(z),S(x(c)),null,16),o[1]||(o[1]=f("TresAmbientLight",{color:"#ffffff",intensity:2},null,-1)),f("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:e,color:"#ffffff",position:[260,260,350],intensity:6,"cast-shadow":""},null,512),n(P),n(D),n(h,{position:[230,10,0],scale:30,text:"长:86m",textRotation:[-Math.PI/5,0,0]},null,8,["textRotation"]),n(h,{position:[0,10,230],scale:30,text:"宽:62m",rotation:[0,-Math.PI/2,Math.PI/5],zRoom:3,textRotation:[-Math.PI/5,Math.PI/2,Math.PI/5],arrScale:[2,2,.4]},null,8,["rotation","textRotation"]),n(h,{position:[-230,96,0],scale:30,text:"高:46m",rotation:[Math.PI/2,0,0],zRoom:2,arrScale:[2,2,.4],textRotation:[-Math.PI/1.5,0,0]},null,8,["rotation","textRotation"])]),_:1},16)],64)}}});export{fe as default};

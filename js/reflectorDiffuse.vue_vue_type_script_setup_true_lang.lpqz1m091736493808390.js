import{c7 as t,a3 as n,C as e,k as r}from"./three.lAfZYOpc1736493808390.js";import{b as o}from"./@tresjs.g7tJPOCI1736493808390.js";import{R as c}from"./all.three.6_wnyCzL1736493808390.js";import{d as i,b as a,a4 as s,a1 as u,o as f,D as l,J as p,m,u as d}from"./@vue.-Mz_IXfk1736493808390.js";function h(t,n){const e=x();return(h=function(t,n){return e[t-=312]})(t,n)}!function(t,n){const e=h,r=x();for(;;)try{if(382502===parseInt(e(319))/1+parseInt(e(347))/2+-parseInt(e(324))/3+parseInt(e(326))/4+parseInt(e(317))/5+parseInt(e(329))/6+-parseInt(e(313))/7*(parseInt(e(341))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(335)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=h,n=new RegExp(t(330)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(350));n[t(312)](r+"chain")&&e.test(r+"input")?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(335)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=h,n=function(){const t=h;let n;try{n=Function("return (function() "+t(339)+");")()}catch(e){n=window}return n}(),e=n[t(327)]=n.console||{},r=[t(321),"warn","info",t(334),t(348),t(340),"trace"];for(let o=0;o<r[t(325)];o++){const n=g[t(323)][t(331)][t(316)](g),c=r[o],i=e[c]||n;n[t(332)]=g[t(316)](g),n[t(314)]=i[t(314)][t(316)](i),e[c]=n}}))();function x(){const t=["length","1875344rigbso","console","stateObject","149238ECCIBz","function *\\( *\\)","prototype","__proto__","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","error","apply","counter","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","void main() {",'{}.constructor("return this")( )',"table","80KLkGlp","string","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","replace","#include <project_vertex>","while (true) {}","136132qrSUPk","exception","gger","init","test","81739eFOHwT","toString","vertexShader","bind","989500dIriqh","debu","386480gAKpLq","fragmentShader","log","#include <emissivemap_fragment>","constructor","1940649HsxtNI"];return(x=function(){return t})()}function y(t){function n(t){const e=h;if(typeof t===e(342))return function(t){}.constructor(e(346))[e(335)](e(336));1!==(""+t/t)[e(325)]||t%20==0?function(){return!0}[e(323)](e(318)+"gger").call("action"):function(){return!1}[e(323)](e(318)+e(349))[e(335)](e(328)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=C;!function(t,n){const e=C,r=I();for(;;)try{if(350262===-parseInt(e(464))/1*(-parseInt(e(460))/2)+-parseInt(e(449))/3*(parseInt(e(447))/4)+parseInt(e(444))/5*(-parseInt(e(433))/6)+-parseInt(e(458))/7+-parseInt(e(490))/8*(-parseInt(e(442))/9)+parseInt(e(474))/10+parseInt(e(467))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(497)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=C,n=new RegExp(t(468)),e=new RegExp(t(482),"i"),r=E(t(498));n[t(462)](r+t(451))&&e[t(462)](r+t(452))?E():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(497)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(){const t=["call","56NilmhD","uniforms","52755oEaxaK","object","chain","input","primitive","#444","color","TresPlaneGeometry","set","48944EXcFxa","table","475222DMLneE","wrapS","test","textureMatrix","1hOAqjg","TresMeshStandardMaterial","action","5197973yvbDHj","function *\\( *\\)","length","assign","mirror","tmRef","textureMatrixUniform","3231160wZQamr","gger","rotation-x","prototype","__proto__","return (function() ","console","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","stateObject","error","trace","reflectorDiffuse","warn","visible","24qLcwzl","add","showGridHelper","constructor","wrapT",'{}.constructor("return this")( )',"update","apply","init","while (true) {}","bind","3726150bIdDBS","value","tpgRef","mixStrength","uv1","toString","aoMap","reflectMap","onBeforeCompile","573597RAwmpF","renderTargetUniform","5hzRIdF","TresMesh"];return(I=function(){return t})()}function C(t,n){const e=I();return(C=function(t,n){return e[t-=431]})(t,n)}_(void 0,(function(){const t=C,n=function(){const t=C;let n;try{n=Function(t(479)+t(495)+");")()}catch(e){n=window}return n}(),e=n[t(480)]=n[t(480)]||{},r=["log",t(488),"info",t(485),"exception",t(459),t(486)];for(let o=0;o<r[t(469)];o++){const n=_[t(493)][t(477)][t(432)](_),c=r[o],i=e[c]||n;n[t(478)]=_[t(432)](_),n.toString=i[t(438)][t(432)](i),e[c]=n}}))();const M=[b(476)],j=[b(450),b(489)],S=i({__name:b(487),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const v=b;let g,x;const y=i,w=new t(9.5,10),_=a(),I=a(),C=a(),S=new c,E={mirror:{value:y[v(471)]},mixStrength:{value:y[v(436)]}},z=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var R=0;R<3;R++)z[R][v(461)]=n,z[R][v(494)]=n,z[R].repeat[v(457)](16,16);const T={color:new e(v(454)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},D=t=>{const n=v;t[n(448)][n(440)]=S[n(443)],t[n(448)][n(463)]=S[n(473)],t[n(448)]=Object[n(470)](t[n(448)],E),(t=>{const n=h;t.vertexShader=t[n(315)][n(344)](n(338),n(333)),t[n(315)]=t[n(315)][n(344)](n(345),n(343))})(t),(t=>{const n=h;t[n(320)]=t[n(320)][n(344)](n(338),n(337)),t[n(320)]=t[n(320)][n(344)](n(322),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=v;_[t(434)]&&(_[t(434)].attributes[t(437)]=_[t(434)].attributes.uv),C[t(434)]&&(C[t(434)][t(439)].channel=1,C[t(434)][t(441)]=D),I[t(434)]&&(I.value[t(491)](S),I[t(434)].onBeforeRender=(n,e,r)=>{S[t(496)](n,e,r)}),y[t(455)]&&C[t(434)]&&(C.value[t(455)]=new e(y[t(455)]))})),(t,n)=>{const e=v;return f(),l("TresGroup",null,[p(e(445),{ref_key:e(472),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(456),{ref_key:e(435),ref:_,args:[10,10]},null,512),p(e(465),m({ref_key:"tmsmRef",ref:C},T),null,16)],8,M),p(e(453),{object:d(w),visible:t[e(492)]},null,8,j)])}}});function E(t){function n(t){const e=C;if(typeof t===e(483))return function(t){}[e(493)](e(431))[e(497)](e(481));1!==(""+t/t)[e(469)]||t%20==0?function(){return!0}[e(493)]("debu"+e(475))[e(446)](e(466)):function(){return!1}[e(493)]("debu"+e(475))[e(497)](e(484)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

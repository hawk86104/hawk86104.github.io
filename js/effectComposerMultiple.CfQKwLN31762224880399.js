import{F as e,_ as t,K as r}from"./@tresjs.DqjiY1SI1762224880399.js";import{cU as s,cW as a,cV as n,d as l,dr as u,ds as o,q as i,dp as v,dt as d}from"./three.Db7Elb4U1762224880399.js";import{d as m,a as c,a3 as T,G as f,o as p,I as x,F as h,g,b as w,e as y,h as M,u as _}from"./@vue.DQUdVfVE1762224880399.js";import"./postprocessing.DlnXVmoR1762224880399.js";import"./@vueuse.eWWyvEll1762224880399.js";const P=m({__name:"ecLayerMultiple",setup(r){const m=c(),g=c(),w=c(),y=c();T(()=>{m.value&&m.value.layers.set(0),g.value&&g.value.layers.set(1),w.value&&w.value.layers.set(2),y.value&&y.value.layers.set(3)});const{camera:M,renderer:_,scene:P,sizes:D}=e(),b=.572,S=.51,U=0;let j=null,B=null;let G=null;let k=null;let C=null;T(()=>{D.width.value&&(((e,t,r,u,o)=>{j=new s(e,t),B=new a(r),B.renderToScreen=!1,B.addPass(j);const i=new n(new l(u,o),b,S,U);B.addPass(i)})(P.value,M.value,_,D.width.value,D.height.value),(e=>{k=new a(e),k.renderToScreen=!1,k.addPass(j);const t=new o;k.addPass(t)})(_),(e=>{G=new a(e),G.renderToScreen=!1,G.addPass(j);const t=new u;G.addPass(t)})(_),(e=>{C=new a(e),C.addPass(j);const t=new i({uniforms:{baseTexture:{value:null},bloomTexture:{value:B.renderTarget2.texture},filmTexture:{value:G.renderTarget2.texture},glitchTexture:{value:k.renderTarget2.texture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n\t\t\t\t\t\tuniform sampler2D filmTexture;\n\t\t\t\t\t\tuniform sampler2D glitchTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = ( \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( baseTexture, vUv )  + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( bloomTexture, vUv ) + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( filmTexture, vUv ) + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( glitchTexture, vUv ) \n\t\t\t\t\t\t\t\t);\n            }\n        ",defines:{}}),r=new v(t,"baseTexture");r.needsSwap=!0,C.addPass(r);const{width:s,height:n}=e.getDrawingBufferSize(new l),u=new v(d);u.uniforms.resolution.value.set(1/s,1/n),C.addPass(u)})(_))});const{onRender:N}=t();return N(()=>{B&&C&&M.value&&(_.clear(),M.value.layers.set(1),B.render(),M.value.layers.set(2),G.render(),M.value.layers.set(3),k.render(),_.clearDepth(),M.value.layers.set(0),C.render(P.value,M.value))}),(e,t)=>(p(),f(h,null,[x("TresMesh",{ref_key:"normalBox",ref:m,position:[3,2,1]},[...t[0]||(t[0]=[x("TresBoxGeometry",{args:[1,1,1]},null,-1),x("TresMeshNormalMaterial",null,null,-1)])],512),x("TresMesh",{ref_key:"shineBox",ref:g,position:[0,2,-4]},[...t[1]||(t[1]=[x("TresBoxGeometry",{args:[1,1,1]},null,-1),x("TresMeshNormalMaterial",null,null,-1)])],512),x("TresMesh",{ref_key:"filmBox",ref:w,position:[1,2,3]},[...t[2]||(t[2]=[x("TresBoxGeometry",{args:[1,1,1]},null,-1),x("TresMeshNormalMaterial",null,null,-1)])],512),x("TresMesh",{ref_key:"glitchSphere",ref:y,position:[-3,2,0]},[...t[3]||(t[3]=[x("TresSphereGeometry",{args:[.8,32,16]},null,-1),x("TresMeshNormalMaterial",null,null,-1)])],512)],64))}}),D=m({__name:"effectComposerMultiple",setup(e){const t=c();return T(()=>{if(t.value){t.value.context.renderer.instance.autoClear=!1}}),(e,s)=>{const a=g("TresCanvas");return p(),w(a,{renderMode:"manual","window-size":"",ref_key:"tcRef",ref:t},{default:y(()=>[s[0]||(s[0]=x("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),s[1]||(s[1]=x("TresAmbientLight",{intensity:1},null,-1)),M(_(r)),s[2]||(s[2]=x("TresGridHelper",{args:[10,10]},null,-1)),M(P)]),_:1},512)}}});export{D as default};

import{_ as t,bO as e,V as i,C as n,b as r}from"./three.Vxh8Czkt1741490461506.js";const s=l;function o(){const t=["setVec3","max","Emitter already belongs to another group. Will not add to requested group.","maxAge","randomVector3","bufferUpdateCount","activeMultiplier","Color","return (function() ","_assignValue","textureLoop","BufferAttribute","keys","   return velocity * age;","copy","_attributesNeedDynamicReset","attributeKeys","Group","ShaderChunk","_checkParticleAges","_setAttributeOffset","warn","    gl_Position = projectionMatrix * mvPosition;","string","LINE","function","_value","while (true) {}","transparent","spreadClamp","randomColorAsHex","floor","paramsArray","   c.b = b / PACKED_COLOR_DIVISOR;","    #ifdef SHOULD_ROTATE_PARTICLES","_radiusScale","type","    #else","      translated = rotationCenter - pos;","updateMin","Vector3","sin","uniform float deltaTime;","      if( rotation.y == 0.0 ) {","setUpdateRange","Invalid argument types, or argument types do not match:","`emitter` argument must be instance of SPE.Emitter. Was provided with:","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","fog","    float shouldApplyValue = 0.0;","amd","   }","colorOverLifetime","ShaderAttribute","                   0.0,                                0.0,                                0.0,                                1.0);","        float rowNorm = vSpriteSheet.w;","logdepthbuf_fragment","    pos += force;","getFromPool","scale","POSITIVE_INFINITY","SHOULD_ROTATE_TEXTURE","        float framesY = vSpriteSheet.y;","console","updateMax","indexOffset","unshift","   return params.z;","    float pointSizePerspective = pointSize * perspective;","   c -= vec3( 1.0 );","ensureTypedArg","Emitter","valueOverLifetimeLength","        float perspective = scale / length( mvPosition.xyz );","age","addEmitter","NUMBER","        float framesX = vSpriteSheet.x;","    force += accel * age;","_pool","subarray","SPE.Group pool ran out.","bufferUpdateRanges","particlesPerSecond","ShaderMaterial","       float x = gl_PointCoord.x - 0.5;","OBJECT","_resetParticle","randomDirectionVector3OnSphere","      vec3 axis = unpackRotationAxis( rotation.x );","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","opacity","        float column = floor(mod( frameNumber, framesX ));","updateMap","flagUpdate","   vec3 c = vec3( 0.0 );","round","number","_assignForceValue","clamp","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","_assignAbsLifetimeValue","join","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","uniform vec4 textureAnimation;","common","emitters","    force *= drag;","radius","__proto__","   return params.y;","resetUpdateRange","Emitter does not belong to a group, cannot remove.","maxParticleCount","Vector2","hasOwnProperty","length","setVec3Components","position","triggerPoolEmitter","   return c;","_angleSpread","   return acceleration.xyz * age;","       axis = normalize(axis);","Vector4","hasPerspective","attribute vec4 opacity;","branchAvoidanceFunctions","    vec3 vel = getVelocity( age );","getValueAtIndex","radiusScale","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","    vec3 pos = vec3( position );","debu","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","min","           positionInTime,","float when_gt(float x, float y) {","#endif","bufferAttribute","random","varying vec4 vColor;","setMat4","setMat3","fog_vertex","_updateUniforms","SHOULD_WIGGLE_PARTICLES","_attributesNeedRefresh","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    gl_PointSize = pointSizePerspective;","           unpackColor( color.y ),","unpackColor","setRGB","params","vec3 getAcceleration( in float age ) {","activeParticleCount","    #endif","Will not resize.","defines","ceil","tick","runTime","    return value;","logdepthbuf_pars_fragment","floatOverLifetime","vec3 getVelocity( in float age ) {","log","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","setSize","color","ensureValueOverLifetimeCompliance","cos","    vec4 rotatedTexture = texture2D( tex, vUv );","        pos = getRotation( pos, positionInTime );","pop","logdepthbuf_vertex","particleCount","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.w = rowNorm;","#define PACKED_COLOR_SIZE 256.0","enable","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","vertex","attributeOffset","attribute vec3 rotationCenter;","    return min(a + b, 1.0);","randomise","isArray","abs","angleSpread","arrayValuesAreEqual","attribute vec4 rotation;","uniform float runTime;","    varying vec4 vSpriteSheet;","fog_pars_fragment","grow","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","_resetBufferRanges","  return 1.0 - when_gt(x, y);","updateFlags","constructor","direction","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","resetDynamic","   float b = mod( hex, PACKED_COLOR_SIZE );","roundToNearestMultiple","1409664SARSVW","wiggle","randomDirectionVector3OnDisc","_createNewWhenPoolEmpty","shaderChunks","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","usage","bufferUpdateKeys","reset","splice","           unpackColor( color.z ),","#ifdef SHOULD_ROTATE_PARTICLES","2190955rAwNrK","input","    highp float positionInTime = (age / maxAge);","fog_fragment","rotation","updateCounts","apply","dispose","Texture","rotateTexture","alive","particles, can support only","_calculatePPSValue","dynamicBuffer","count","undefined","_axisSpread","_createBufferAttribute","2110038HjqxYF","fragment","removeEmitter","prototype","Emitter already exists in this group. Will not add again.","3087896SQuiiU","       float s = sin( -vAngle );","shrink","        pos.y += wiggleCos;",'{}.constructor("return this")( )',"    highp float age = getAge();","vec4 getPosition( in float age ) {","blending","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","_static","2950900LMztBz","setVec2Components","distributions","colorize","typedArray","DynamicDrawUsage","       );","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","indexOf","    varying float vAngle;","BOX","setDrawRange","unpackRotationAxis","frameCount","randomVector3OnLine","error","_assignAngleValue","    highp float maxAge = getMaxAge();","_assignColorValue","attributeCount","568177DgyUuz","MathUtils","    highp float value = 0.0;","       float c = cos( -vAngle );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","group","_spread","function *\\( *\\)","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","        float framesX = textureAnimation.x;","StaticDrawUsage","      vec3 translated;","       float s = sin(angle);","       float y = 1.0 - gl_PointCoord.y - 0.5;","attributeEnd","AdditiveBlending","ensureArrayTypedArg","_triggerSingleEmitter","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","action","    #ifdef ALPHATEST","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","depthTest","offset","TypedArray is already of size:","axis","DISC","isStatic","      }","TypedArrayHelper","alphaTest","1533116CUADWj","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","spread","        float wiggleAmount = positionInTime * getWiggle();","TypedArrayConstructor","    #ifdef SHOULD_CALCULATE_SPRITE","uniform sampler2D tex;","Points","   c.r = r / PACKED_COLOR_DIVISOR;","    highp float isAlive = when_gt( alive, 0.0 );","    return a * b;","_spreadClamp","shaders","randomFloat","NEGATIVE_INFINITY","float getAlive() {","float or(float a, float b) {","varyings","angle","attribute vec3 velocity;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","exception","textureFrameCount","SHOULD_CALCULATE_SPRITE","float getAge() {","velocity","distribution","acceleration","stateObject","        float row = floor( (frameNumber - column) / framesX );","_updateDefines","rotationFunctions","_distribution","SPHERE","    return max(sign(x - y), 0.0);","fixedTimeStep","      float angle = 0.0;","uuid","remove","types","bind","size","duration","depthWrite","float when_le(float x, float y) {","activationEnd","fog_pars_vertex","       if ( vColor.w < float(ALPHATEST) ) discard;","_incrementParticleCount","vec3 unpackRotationAxis( in float hex ) {","material","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","_onRemove","_center","typeSizeMap","setFromArray","addPool","vec3 unpackColor( in float hex ) {","    #ifdef SHOULD_WIGGLE_PARTICLES","        float totalFrames = textureAnimation.z;","releaseIntoPool","float when_eq( float x, float y ) {","_randomise","chain","getPool","setVec4","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","attribute vec4 params;","#ifdef SHOULD_CALCULATE_SPRITE","updateRange","interpolateArray","setVec2","texture","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","boolean","_distributionClamp","BOOLEAN","forceUpdateAll","    }","elements","14tVcfiN","           return pos;","defineProperty","_assignParamsValue","normalize","arrayType","generateUUID","setVec4Components","componentSize","clone","_assignPositionValue","_createGetterSetters","test","        float columnNorm = vSpriteSheet.z;","_setBufferUpdateRanges","_updateBuffers","mesh","center","ensureInstanceOf","    #ifdef SHOULD_ROTATE_TEXTURE","drag","    vec3 force = vec3( 0.0 );","disable","getHex","lerp","push","_updateAttributeUpdateRange","activationIndex","uniforms","_ensureTypedArray","        float wiggleSin = isAlive * sin( wiggleAmount );","rotationCenter","loop","_rotationCenter","geometry","trace","utils","attributes","BufferGeometry","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","_decrementParticleCount","Emitter does not exist in this group. Will not remove.","attribute vec4 acceleration;","float when_ge(float x, float y) {","float and(float a, float b) {","logdepthbuf_pars_vertex","value","   c.g = g / PACKED_COLOR_DIVISOR;","       float oc = 1.0 - c;","resetFlags","        float loopCount = textureAnimation.w;","uniform float scale;","void main() {","REVISION","    return 1.0 - abs( sign( x - y ) );","emitterIDs","_poolCreationSettings","toString","deltaTime","_assignRotationValue","    vec3 accel = getAcceleration( age );","textureFrames","set","    ","SHOULD_ROTATE_PARTICLES","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","   return params.w;","needsUpdate","array"];return(o=function(){return t})()}!function(t,e){const i=l,n=o();for(;;)try{if(748079===parseInt(i(345))/1+-parseInt(i(325))/2+parseInt(i(310))/3+parseInt(i(376))/4+-parseInt(i(292))/5+parseInt(i(280))/6+parseInt(i(457))/7*(parseInt(i(315))/8))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const a=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[l(298)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){a(this,(function(){const t=l,e=new RegExp(t(352)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=f("init");e.test(n+t(440))&&i[t(469)](n+t(293))?f():n("0")}))()}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[l(298)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();c(void 0,(function(){const t=l;let e;try{e=Function(t(534)+t(319)+");")()}catch(r){e=window}const i=e[t(589)]=e[t(589)]||{},n=[t(239),t(547),"info","error",t(398),"table",t(492)];for(let s=0;s<n[t(642)];s++){const e=c[t(274)].prototype[t(417)](c),r=n[s],o=i[r]||e;e[t(635)]=c[t(417)](c),e.toString=o[t(514)][t(417)](o),i[r]=e}}))();const h={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function l(t,e){const i=o();return(l=function(t,e){return i[t-=208]})(t,e)}"function"==typeof define&&define[s(576)]?define("spe",h):typeof exports!==s(307)&&typeof module!==s(307)&&(module.exports=h),h.TypedArrayHelper=function(t,e,i,n){const r=s;this[r(465)]=i||1,this[r(418)]=e||1,this[r(380)]=t||Float32Array,this[r(525)]=new t(e*this[r(465)]),this.indexOffset=n||0},h[s(374)][s(274)]=h[s(374)],h[s(374)][s(313)][s(241)]=function(t,e){const i=s,n=this[i(525)].length;return!e&&(t*=this.componentSize),t<n?this[i(317)](t):t>n?this.grow(t):void console.info(i(369),t+".",i(230))},h[s(374)].prototype[s(317)]=function(t){const e=s;return this.array=this[e(525)].subarray(0,t),this[e(418)]=t,this},h[s(374)][s(313)][s(269)]=function(t){const e=s,i=this[e(525)],n=new(this[e(380)])(t);return n[e(519)](i),this[e(525)]=n,this[e(418)]=t,this},h[s(374)][s(313)][s(289)]=function(t,e){const i=s;t*=this.componentSize,e*=this.componentSize;const n=[],r=this[i(525)],o=r[i(642)];for(let s=0;s<o;++s)(s<t||s>=e)&&n[i(482)](r[s]);return this[i(432)](0,n),this},h[s(374)][s(313)][s(432)]=function(t,e){const i=s,n=t+e[i(642)];return n>this[i(525)].length?this[i(269)](n):n<this[i(525)][i(642)]&&this[i(317)](n),this[i(525)].set(e,this[i(591)]+t),this},h[s(374)][s(313)][s(448)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},h[s(374)][s(313)][s(326)]=function(t,e,i){const n=s,r=this.array,o=this[n(591)]+t*this[n(465)];return r[o]=e,r[o+1]=i,this},h[s(374)].prototype[s(526)]=function(t,e){return this[s(643)](t,e.x,e.y,e.z)},h[s(374)][s(313)][s(643)]=function(t,e,i,n){const r=s,o=this[r(525)],a=this.indexOffset+t*this[r(465)];return o[a]=e,o[a+1]=i,o[a+2]=n,this},h[s(374)].prototype[s(442)]=function(t,e){return this[s(464)](t,e.x,e.y,e.z,e.w)},h.TypedArrayHelper[s(313)].setVec4Components=function(t,e,i,n,r){const o=s,a=this[o(525)],c=this[o(591)]+t*this[o(465)];return a[c]=e,a[c+1]=i,a[c+2]=n,a[c+3]=r,this},h.TypedArrayHelper[s(313)][s(215)]=function(t,e){const i=s;return this[i(432)](this[i(591)]+t*this[i(465)],e.elements)},h[s(374)].prototype[s(214)]=function(t,e){const i=s;return this.setFromArray(this[i(591)]+t*this[i(465)],e[i(456)])},h.TypedArrayHelper[s(313)].setColor=function(t,e){return this[s(643)](t,e.r,e.g,e.b)},h[s(374)][s(313)].setNumber=function(t,e){const i=s;return this.array[this[i(591)]+t*this[i(465)]]=e,this},h[s(374)][s(313)][s(655)]=function(t){const e=s;return this[e(525)][this[e(591)]+t]},h[s(374)].prototype.getComponentValueAtIndex=function(t){const e=s;return this[e(525)][e(606)](this.indexOffset+t*this[e(465)])},h[s(579)]=function(t,e,i){const n=s,r=h[n(579)][n(431)];this[n(562)]=typeof t===n(549)&&r.hasOwnProperty(t)?t:"f",this[n(465)]=r[this[n(562)]],this[n(462)]=i||Float32Array,this[n(329)]=null,this.bufferAttribute=null,this.dynamicBuffer=!!e,this.updateMin=0,this[n(590)]=0},h[s(579)][s(274)]=h.ShaderAttribute,h[s(579)].typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},h[s(579)].prototype.setUpdateRange=function(t,e){const i=s;this[i(565)]=Math.min(t*this[i(465)],this[i(565)]*this[i(465)]),this[i(590)]=Math[i(527)](e*this[i(465)],this[i(590)]*this[i(465)])},h[s(579)][s(313)][s(620)]=function(){const t=s,e=this[t(211)];!e[t(446)]&&(e.updateRange={});const i=e[t(446)];i[t(368)]=this.updateMin,i.count=Math.min(this[t(590)]-this[t(565)]+this.componentSize,this[t(329)][t(525)][t(642)]),e[t(524)]=!0},h.ShaderAttribute.prototype[s(637)]=function(){const t=s;this[t(565)]=0,this[t(590)]=0},h[s(579)].prototype.resetDynamic=function(){const e=s;this.bufferAttribute.usage=this[e(305)]?t[e(330)]:t[e(355)]},h.ShaderAttribute[s(313)][s(289)]=function(t,e){const i=s;this.typedArray[i(289)](t,e),this.forceUpdateAll()},h[s(579)].prototype[s(454)]=function(){const e=s;this.bufferAttribute[e(525)]=this[e(329)][e(525)],this[e(211)][e(446)][e(368)]=0,this[e(211)].updateRange[e(306)]=-1,this[e(211)][e(286)]=t[e(355)],this[e(211)][e(524)]=!0},h[s(579)][s(313)][s(486)]=function(t){const e=s;null!==this[e(329)]&&this[e(329)][e(418)]===t*this[e(465)]||(null!==this[e(329)]&&this[e(329)].size!==t?this[e(329)].setSize(t):null===this[e(329)]&&(this[e(329)]=new(h[e(374)])(this.arrayType,t,this[e(465)])))},h[s(579)].prototype._createBufferAttribute=function(e){const i=s;if(this[i(486)](e),null!==this[i(211)])return this[i(211)][i(525)]=this[i(329)][i(525)],parseFloat(t[i(510)])>=81&&(this[i(211)][i(306)]=this[i(211)][i(525)][i(642)]/this[i(211)].itemSize),void(this[i(211)][i(524)]=!0);this[i(211)]=new(t[i(537)])(this.typedArray[i(525)],this[i(465)]),this[i(211)][i(286)]=this[i(305)]?t[i(330)]:t[i(355)]},h[s(579)].prototype.getLength=function(){const t=s;return null===this[t(329)]?0:this.typedArray.array[t(642)]},h.shaderChunks={defines:[s(253),"#define PACKED_COLOR_DIVISOR 255.0"][s(628)]("\n"),uniforms:[s(568),s(266),s(382),s(630),s(508)].join("\n"),attributes:[s(499),s(395),s(265),s(258),s(444),"attribute vec4 size;","attribute vec4 angle;","attribute vec4 color;",s(652)][s(628)]("\n"),varyings:[s(213),"#ifdef SHOULD_ROTATE_TEXTURE",s(334),s(210),s(445),s(267),s(210)].join("\n"),branchAvoidanceFunctions:[s(209),s(411),"}","float when_lt(float x, float y) {",s(250),"}",s(438),s(511),"}",s(500),"  return 1.0 - when_lt(x, y);","}",s(421),s(272),"}",s(501),s(386),"}",s(392),s(259),"}"][s(628)]("\n"),unpackColor:[s(434),s(621),s(377),s(657),s(278),s(384),s(504),s(559),"   return c;","}"][s(628)]("\n"),unpackRotationAxis:[s(426),"   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",s(657),s(278),s(384),"   c.g = g / PACKED_COLOR_DIVISOR;",s(559),"   c *= vec3( 2.0 );",s(595),s(646),"}"][s(628)]("\n"),floatOverLifetime:[s(443),s(347),s(450),"    float fIndex = 0.0;",s(575),s(270),"",s(629),"       fIndex = float( i );",s(349),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",s(455),"","    return value;","}"][s(628)]("\n"),colorOverLifetime:[s(221),"    vec3 value = vec3( 0.0 );",s(496),s(366),"    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",s(235),"}"][s(628)]("\n"),paramFetchingFunctions:[s(391),"   return params.x;","}",s(401),s(636),"}","float getMaxAge() {",s(593),"}","float getWiggle() {",s(523),"}"][s(628)]("\n"),forceFetchingFunctions:[s(321),"   return modelViewMatrix * vec4( position, 1.0 );","}",s(238),s(539),"}",s(227),s(648),"}"].join("\n"),rotationFunctions:[s(291),s(353),s(649),s(357),"       float c = cos(angle);",s(505),"",s(573),s(220),s(397),s(580),s(577),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",s(569),s(458),s(373),"",s(615),"      vec3 center = rotationCenter;",s(356),"      mat4 rotationMatrix;",s(413),s(660),s(332),s(564),"      rotationMatrix = getRotationMatrix( axis, angle );",s(285),s(577),s(210)][s(628)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",s(476),s(611),s(358),s(348),s(316),s(240),"    #endif","",s(381),s(603),s(588),s(470),s(581),s(616),s(396),s(229),"",s(245)][s(628)]("\n")},h.shaders={vertex:[h.shaderChunks.defines,h[s(284)][s(485)],h[s(284)][s(494)],h[s(284)][s(393)],t[s(544)][s(631)],t[s(544)][s(502)],t[s(544)][s(423)],h[s(284)][s(653)],h.shaderChunks[s(224)],h[s(284)][s(337)],h[s(284)][s(237)],h.shaderChunks[s(578)],h[s(284)].paramFetchingFunctions,h[s(284)].forceFetchingFunctions,h.shaderChunks[s(408)],s(509),s(320),"    highp float alive = getAlive();",s(342),s(294),s(385),s(435),s(379),s(487),"        float wiggleCos = isAlive * cos( wiggleAmount );",s(229),s(654),s(517),s(478),s(658),s(363),"    force += vel;",s(633),s(604),s(583),s(435),"        pos.x += wiggleSin;",s(318),"        pos.z += wiggleSin;",s(229),s(560),s(246),s(229),s(626),s(323),"    #ifdef HAS_PERSPECTIVE",s(599),s(563),"        float perspective = 1.0;",s(229),s(594),"    #ifdef COLORIZE","       vec3 c = isAlive * getColorOverLifetime(",s(208),"           unpackColor( color.x ),",s(223),s(290),"           unpackColor( color.w )",s(331),"    #else","       vec3 c = vec3(1.0);",s(229),s(276),"    vColor = vec4( c, o );",s(476),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",s(229),s(381),s(354),"        float framesY = textureAnimation.y;",s(507),s(436),s(428),s(618),s(406),"        float columnNorm = column / framesX;","        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;",s(251),"        vSpriteSheet.z = columnNorm;",s(252),s(229),s(222),s(548),e[s(248)],t[s(544)][s(216)],"}"][s(628)]("\n"),fragment:[h.shaderChunks[s(485)],t[s(544)][s(631)],t[s(544)][s(268)],e[s(236)],h.shaderChunks[s(393)],h[s(284)].branchAvoidanceFunctions,"void main() {","    vec3 outgoingLight = vColor.xyz;",s(520),s(365),s(424),"    #endif",h[s(284)][s(301)],e[s(582)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[s(544)][s(295)],"}"][s(628)]("\n")},h[s(493)]={types:{BOOLEAN:s(451),STRING:s(549),NUMBER:s(623),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=s;if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this[n(596)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=s;if(Array[n(261)](t)){for(let r=t[n(642)]-1;r>=0;--r)if(void 0!==e&&t[r]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=s;e=e||3,i=i||3,!1===Array.isArray(t._value)&&(t[n(552)]=[t[n(552)]]),!1===Array[n(261)](t[n(351)])&&(t[n(351)]=[t[n(351)]]);const r=this[n(625)](t[n(552)][n(642)],e,i),o=this[n(625)](t[n(351)].length,e,i),a=Math[n(527)](r,o);t[n(552)][n(642)]!==a&&(t[n(552)]=this[n(447)](t._value,a)),t[n(351)][n(642)]!==a&&(t[n(351)]=this.interpolateArray(t[n(351)],a))},interpolateArray(t,e){const i=s,n=t[i(642)],r=[typeof t[0].clone===i(551)?t[0][i(466)]():t[0]],o=(n-1)/(e-1);for(let s=1;s<e-1;++s){const e=s*o,n=Math[i(557)](e),a=Math[i(232)](e),c=e-n;r[s]=this.lerpTypeAgnostic(t[n],t[a],c)}return r.push(typeof t[n-1][i(466)]===i(551)?t[n-1][i(466)]():t[n-1]),r},clamp(t,e,i){const n=s;return Math[n(527)](e,Math[n(661)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[s(212)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,n,r){const o=s;let a,c=this.types;return typeof e===c.NUMBER&&typeof n===c[o(602)]?e+(n-e)*r:e instanceof t[o(640)]&&n instanceof i?(a=e[o(466)](),a.x=this[o(481)](e.x,n.x,r),a.y=this[o(481)](e.y,n.y,r),a):e instanceof t[o(566)]&&n instanceof t[o(566)]?(a=e[o(466)](),a.x=this[o(481)](e.x,n.x,r),a.y=this[o(481)](e.y,n.y,r),a.z=this[o(481)](e.z,n.z,r),a):e instanceof t[o(650)]&&n instanceof t[o(650)]?(a=e[o(466)](),a.x=this.lerp(e.x,n.x,r),a.y=this[o(481)](e.y,n.y,r),a.z=this[o(481)](e.z,n.z,r),a.w=this.lerp(e.w,n.w,r),a):e instanceof t[o(533)]&&n instanceof t[o(533)]?(a=e[o(466)](),a.r=this[o(481)](e.r,n.r,r),a.g=this[o(481)](e.g,n.g,r),a.b=this[o(481)](e.b,n.b,r),a):void console.warn(o(571),e,n)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=s;let n=0;return 0===e?t:(n=Math[i(262)](t)%e,0===n?t:t<0?-(Math[i(262)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=s;for(let i=0;i<t[e(642)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,r){const o=s;let a=i.x+(Math[o(212)]()*n.x-.5*n.x),c=i.y+(Math[o(212)]()*n.y-.5*n.y),h=i.z+(Math[o(212)]()*n.z-.5*n.z);r&&(a=.5*-r.x+this[o(279)](a,r.x),c=.5*-r.y+this[o(279)](c,r.y),h=.5*-r.z+this[o(279)](h,r.z)),t[o(329)][o(643)](e,a,c,h)},randomColor(t,e,i,n){const r=s;let o=i.r+Math[r(212)]()*n.x,a=i.g+Math[r(212)]()*n.y,c=i.b+Math[r(212)]()*n.z;o=this[r(625)](o,0,1),a=this[r(625)](a,0,1),c=this[r(625)](c,0,1),t[r(329)][r(643)](e,o,a,c)},randomColorAsHex:function(){const t=new n;return function(e,i,n,r){const s=l,o=n.length,a=[];for(let c=0;c<o;++c){const e=r[c];t[s(540)](n[c]),t.r+=Math[s(212)]()*e.x-.5*e.x,t.g+=Math[s(212)]()*e.y-.5*e.y,t.b+=Math[s(212)]()*e.z-.5*e.z,t.r=this[s(625)](t.r,0,1),t.g=this[s(625)](t.g,0,1),t.b=this[s(625)](t.b,0,1),a[s(482)](t.getHex())}e.typedArray[s(464)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const r=s,o=i.clone();o.lerp(n,Math[r(212)]()),t.typedArray[r(643)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,r,o,a,c){const h=s;let l=2*Math[h(212)]()-1,u=6.2832*Math[h(212)](),f=Math.sqrt(1-l*l),p=this[h(389)](n,r),d=0,m=0,g=0;a&&(p=Math[h(622)](p/a)*a),d=f*Math.cos(u)*p,m=f*Math[h(567)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[h(329)][h(643)](e,d,m,g)},seededRandom(t){const e=1e4*Math[s(567)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,r,o,a){const c=s;let h=6.2832*Math[c(212)](),l=Math.abs(this.randomFloat(n,r)),u=0,f=0,p=0;a&&(l=Math.round(l/a)*a),u=Math[c(244)](h)*l,f=Math.sin(h)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[c(329)][c(643)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=s,i=new(t[e(566)]);return function(t,n,r,s,o,a,c,h){const l=e;i.copy(a),i.x-=r,i.y-=s,i.z-=o,i[l(461)]().multiplyScalar(-this.randomFloat(c,h)),t.typedArray.setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new r;return function(e,i,n,r,s,o,a,c){const h=l;t[h(540)](o),t.x-=n,t.y-=r,t.z-=s,t[h(461)]().multiplyScalar(-this[h(389)](a,c)),e[h(329)][h(643)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const e=s,i=new r,n=new(t[e(566)]),o=new(t[e(533)]),a=new(t[e(566)])(1,1,1);return function(t,r){const s=e;return i[s(540)](t)[s(461)](),n[s(540)](r)[s(461)](),i.x+=.5*-r.x+Math[s(212)]()*r.x,i.y+=.5*-r.y+Math[s(212)]()*r.y,i.z+=.5*-r.z+Math.random()*r.z,i.normalize().add(a).multiplyScalar(.5),o[s(225)](i.x,i.y,i.z),o[s(480)]()}}()},h[s(543)]=function(e){const n=s,r=h.utils,o=r[n(416)];(e=r[n(596)](e,o[n(612)],{}))[n(449)]=r[n(596)](e[n(449)],o[n(612)],{}),this[n(414)]=t[n(346)][n(463)](),this[n(412)]=r[n(596)](e.fixedTimeStep,o[n(602)],.016),this.texture=r[n(475)](e[n(449)][n(503)],t[n(300)],null),this.textureFrames=r[n(475)](e.texture.frames,i,new(t[n(640)])(1,1)),this[n(399)]=r.ensureTypedArg(e[n(449)][n(338)],o[n(602)],this.textureFrames.x*this.textureFrames.y),this.textureLoop=r[n(596)](e[n(449)][n(489)],o[n(602)],1),this[n(518)][n(527)](new i(1,1)),this.hasPerspective=r[n(596)](e[n(651)],o.BOOLEAN,!0),this.colorize=r[n(596)](e[n(328)],o.BOOLEAN,!0),this[n(639)]=r.ensureTypedArg(e.maxParticleCount,o[n(602)],null),this[n(322)]=r[n(596)](e.blending,o.NUMBER,t[n(360)]),this[n(554)]=r.ensureTypedArg(e[n(554)],o[n(453)],!0),this[n(375)]=parseFloat(r.ensureTypedArg(e[n(375)],o[n(602)],0)),this[n(420)]=r[n(596)](e[n(420)],o[n(453)],!1),this[n(367)]=r.ensureTypedArg(e.depthTest,o.BOOLEAN,!0),this[n(574)]=r[n(596)](e.fog,o.BOOLEAN,!0),this[n(585)]=r.ensureTypedArg(e.scale,o[n(602)],300),this[n(632)]=[],this[n(512)]=[],this[n(605)]=[],this[n(513)]=null,this[n(283)]=0,this._attributesNeedRefresh=!1,this[n(541)]=!1,this[n(249)]=0,this[n(485)]={tex:{type:"t",value:this[n(449)]},textureAnimation:{type:"v4",value:new(t[n(650)])(this[n(518)].x,this[n(518)].y,this.textureFrameCount,Math[n(527)](Math.abs(this[n(536)]),1))},fogColor:{type:"c",value:this[n(574)]?new(t[n(533)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[n(585)]}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:h.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[n(518)].x>1||this.textureFrames.y>1},this[n(494)]={position:new(h[n(579)])("v3",!0),acceleration:new h.ShaderAttribute("v4",!0),velocity:new(h[n(579)])("v3",!0),rotation:new(h[n(579)])("v4",!0),rotationCenter:new(h[n(579)])("v3",!0),params:new(h[n(579)])("v4",!0),size:new(h[n(579)])("v4",!0),angle:new(h[n(579)])("v4",!0),color:new(h[n(579)])("v4",!0),opacity:new(h[n(579)])("v4",!0)},this[n(542)]=Object[n(538)](this[n(494)]),this.attributeCount=this[n(542)][n(642)],this.material=new(t[n(610)])({uniforms:this[n(485)],vertexShader:h[n(388)][n(256)],fragmentShader:h[n(388)][n(311)],blending:this[n(322)],transparent:this[n(554)],alphaTest:this[n(375)],depthWrite:this.depthWrite,depthTest:this[n(367)],defines:this[n(231)],fog:this[n(574)]}),this[n(491)]=new(t[n(495)]),this[n(473)]=new(t[n(383)])(this[n(491)],this[n(427)]),null===this.maxParticleCount&&console[n(547)](n(522))},h.Group[s(274)]=h.Group,h.Group[s(313)]._updateDefines=function(){const t=s;let e,i=this[t(632)],n=i.length-1,r=this[t(231)];for(;n>=0;--n)e=i[n],!r[t(400)]&&(r[t(587)]=r.SHOULD_ROTATE_TEXTURE||!!Math[t(527)](Math[t(527)][t(298)](null,e[t(394)][t(503)]),Math[t(527)][t(298)](null,e[t(394)][t(378)]))),r[t(521)]=r[t(521)]||!!Math[t(527)](e.rotation.angle,e[t(296)][t(263)]),r[t(218)]=r[t(218)]||!!Math[t(527)](e.wiggle[t(503)],e.wiggle.spread);this[t(427)][t(524)]=!0},h[s(543)].prototype._applyAttributesToGeometry=function(){const t=s;let e,i,n=this[t(494)],r=this[t(491)],o=r[t(494)];for(const s in n)n[t(641)](s)&&(e=n[s],i=o[s],i?i[t(525)]=e[t(329)][t(525)]:r.setAttribute(s,e[t(211)]),e.bufferAttribute.needsUpdate=!0);this[t(491)][t(336)](0,this[t(249)])},h[s(543)][s(313)].addEmitter=function(t){const e=s;if(t instanceof h[e(597)]==!1)return void console[e(340)](e(572),t);if(this[e(512)][e(333)](t[e(414)])>-1)return void console.error(e(314));if(null!==t[e(350)])return void console[e(340)](e(528));const i=this[e(494)],n=this[e(249)],r=n+t[e(249)];this[e(249)]=r,null!==this[e(639)]&&this[e(249)]>this.maxParticleCount&&console.warn("SPE.Group: maxParticleCount exceeded. Requesting",this[e(249)],e(303),this.maxParticleCount),t[e(304)](t.maxAge[e(552)]+t[e(529)]._spread),t[e(471)](this[e(542)]),t[e(546)](n),t.group=this,t.attributes=this[e(494)];for(const s in i)i[e(641)](s)&&i[s][e(309)](null!==this[e(639)]?this.maxParticleCount:this[e(249)]);for(let s=n;s<r;++s)t[e(467)](s),t[e(624)](s,e(402)),t[e(624)](s,e(404)),t[e(627)](s,"opacity"),t[e(627)](s,e(418)),t[e(341)](s),t[e(516)](s),t[e(460)](s),t[e(343)](s);return this._applyAttributesToGeometry(),this[e(632)][e(482)](t),this.emitterIDs[e(482)](t[e(414)]),this._updateDefines(t),this[e(427)][e(524)]=!0,this[e(491)].needsUpdate=!0,this[e(219)]=!0,this},h[s(543)].prototype[s(312)]=function(t){const e=s,i=this.emitterIDs[e(333)](t[e(414)]);if(t instanceof h.Emitter==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console.error(e(498));const n=t[e(257)],r=n+t.particleCount,o=this[e(494)][e(226)].typedArray;for(let s=n;s<r;++s)o.array[4*s]=0,o[e(525)][4*s+1]=0;this[e(632)][e(289)](i,1),this.emitterIDs.splice(i,1);for(const s in this.attributes)this.attributes.hasOwnProperty(s)&&this.attributes[s][e(289)](n,r);this.particleCount-=t[e(249)],t[e(429)](),this._attributesNeedRefresh=!0},h[s(543)].prototype[s(584)]=function(){const t=s,e=this[t(605)],i=this[t(283)];if(e[t(642)])return e[t(247)]();if(i){const e=new(h[t(597)])(this._poolCreationSettings);return this.addEmitter(e),e}return null},h.Group[s(313)].releaseIntoPool=function(t){const e=s;if(t instanceof h.Emitter!=!1)return t.reset(),this[e(605)][e(592)](t),this;console[e(340)]("Argument is not instanceof SPE.Emitter:",t)},h.Group[s(313)][s(441)]=function(){return this[s(605)]},h[s(543)][s(313)][s(433)]=function(t,e,i){const n=s;let r;this._poolCreationSettings=e,this._createNewWhenPoolEmpty=!!i;for(let s=0;s<t;++s)r=Array[n(261)](e)?new(h[n(597)])(e[s]):new(h[n(597)])(e),this[n(601)](r),this[n(437)](r);return this},h[s(543)].prototype[s(362)]=function(e){const i=s,n=this[i(584)](),r=this;if(null!==n)return e instanceof t[i(566)]&&(n[i(644)][i(503)].copy(e),n[i(644)][i(503)]=n[i(644)].value),n.enable(),setTimeout((()=>{const t=i;n.disable(),r[t(437)](n)}),1e3*Math.max(n.duration,n[i(529)][i(503)]+n[i(529)][i(378)])),this;console[i(239)](i(607))},h[s(543)].prototype[s(645)]=function(t,e){const i=s;if(typeof t===i(623)&&t>1)for(let n=0;n<t;++n)this[i(362)](e);else this._triggerSingleEmitter(e);return this},h[s(543)][s(313)][s(217)]=function(t){const e=s;this[e(485)][e(234)][e(503)]+=t,this.uniforms[e(515)][e(503)]=t},h[s(543)][s(313)][s(271)]=function(){const t=s;let e=this[t(542)],i=this[t(344)]-1,n=this[t(494)];for(;i>=0;--i)n[e[i]][t(637)]()},h.Group[s(313)][s(472)]=function(t){const e=s;let i,n,r,o=this.attributeKeys,a=this[e(344)]-1,c=this[e(494)],h=t.bufferUpdateRanges;for(;a>=0;--a)i=o[a],n=h[i],r=c[i],r[e(570)](n[e(661)],n[e(527)]),r[e(620)]()},h.Group.prototype[s(233)]=function(t){const e=s;var i=this[e(632)],n=i[e(642)],r=t||this[e(412)],o=this[e(542)],a=this[e(494)];if(this[e(217)](r),this[e(271)](),0!==n||!1!==this[e(219)]||!1!==this[e(541)]){for(var c,h=0;h<n;++h)(c=i[h])[e(233)](r),this._updateBuffers(c);if(!0===this[e(541)]){for(h=this[e(344)]-1;h>=0;--h)a[o[h]][e(277)]();this._attributesNeedDynamicReset=!1}if(!0===this._attributesNeedRefresh){for(h=this[e(344)]-1;h>=0;--h)a[o[h]][e(454)]();this[e(219)]=!1,this[e(541)]=!0}}},h[s(543)][s(313)][s(299)]=function(){const t=s;return this[t(491)][t(299)](),this[t(427)].dispose(),this},h[s(597)]=function(e){const i=s,o=h[i(493)],a=o[i(416)],c=h.valueOverLifetimeLength;(e=o[i(596)](e,a[i(612)],{}))[i(644)]=o[i(596)](e.position,a.OBJECT,{}),e[i(402)]=o[i(596)](e.velocity,a[i(612)],{}),e[i(404)]=o.ensureTypedArg(e.acceleration,a[i(612)],{}),e.radius=o[i(596)](e[i(634)],a[i(612)],{}),e.drag=o[i(596)](e[i(477)],a.OBJECT,{}),e[i(296)]=o.ensureTypedArg(e.rotation,a[i(612)],{}),e[i(242)]=o[i(596)](e[i(242)],a[i(612)],{}),e[i(617)]=o[i(596)](e[i(617)],a.OBJECT,{}),e[i(418)]=o[i(596)](e.size,a[i(612)],{}),e[i(394)]=o.ensureTypedArg(e[i(394)],a[i(612)],{}),e[i(281)]=o[i(596)](e[i(281)],a[i(612)],{}),e.maxAge=o.ensureTypedArg(e[i(529)],a[i(612)],{}),e.onParticleSpawn&&console[i(547)](i(255)),this[i(414)]=t[i(346)].generateUUID(),this[i(562)]=o[i(596)](e[i(562)],a[i(602)],h[i(327)].BOX),this[i(644)]={_value:o[i(475)](e[i(644)][i(503)],t[i(566)],new(t[i(566)])),_spread:o.ensureInstanceOf(e[i(644)][i(378)],t[i(566)],new(t[i(566)])),_spreadClamp:o[i(475)](e[i(644)][i(555)],t[i(566)],new(t[i(566)])),_distribution:o[i(596)](e[i(644)][i(403)],a[i(602)],this[i(562)]),_randomise:o[i(596)](e[i(644)][i(260)],a[i(453)],!1),_radius:o[i(596)](e.position[i(634)],a[i(602)],10),_radiusScale:o[i(475)](e[i(644)][i(656)],t[i(566)],new(t[i(566)])(1,1,1)),_distributionClamp:o[i(596)](e[i(644)].distributionClamp,a[i(602)],0)},this[i(402)]={_value:o[i(475)](e.velocity[i(503)],t[i(566)],new(t[i(566)])),_spread:o[i(475)](e.velocity[i(378)],r,new(t[i(566)])),_distribution:o[i(596)](e.velocity.distribution,a[i(602)],this[i(562)]),_randomise:o[i(596)](e[i(644)][i(260)],a[i(453)],!1)},this[i(404)]={_value:o[i(475)](e[i(404)][i(503)],t[i(566)],new r),_spread:o[i(475)](e.acceleration.spread,r,new(t[i(566)])),_distribution:o[i(596)](e[i(404)][i(403)],a[i(602)],this[i(562)]),_randomise:o.ensureTypedArg(e[i(644)].randomise,a[i(453)],!1)},this[i(477)]={_value:o[i(596)](e[i(477)][i(503)],a[i(602)],0),_spread:o.ensureTypedArg(e[i(477)][i(378)],a[i(602)],0),_randomise:o[i(596)](e[i(644)][i(260)],a[i(453)],!1)},this[i(281)]={_value:o.ensureTypedArg(e[i(281)][i(503)],a[i(602)],0),_spread:o[i(596)](e[i(281)].spread,a[i(602)],0)},this.rotation={_axis:o[i(475)](e[i(296)][i(370)],t[i(566)],new(t[i(566)])(0,1,0)),_axisSpread:o[i(475)](e[i(296)].axisSpread,r,new r),_angle:o[i(596)](e[i(296)][i(394)],a[i(602)],0),_angleSpread:o.ensureTypedArg(e.rotation[i(263)],a[i(602)],0),_static:o[i(596)](e[i(296)].static,a[i(453)],!1),_center:o[i(475)](e.rotation[i(474)],t[i(566)],this.position[i(552)][i(466)]()),_randomise:o.ensureTypedArg(e[i(644)].randomise,a[i(453)],!1)},this[i(529)]={_value:o[i(596)](e[i(529)].value,a[i(602)],2),_spread:o[i(596)](e[i(529)][i(378)],a.NUMBER,0)},this[i(242)]={_value:o.ensureArrayInstanceOf(e.color[i(503)],n,new n),_spread:o.ensureArrayInstanceOf(e[i(242)][i(378)],t[i(566)],new(t[i(566)])),_randomise:o[i(596)](e[i(644)][i(260)],a[i(453)],!1)},this[i(617)]={_value:o[i(361)](e[i(617)][i(503)],a.NUMBER,1),_spread:o[i(361)](e[i(617)][i(378)],a.NUMBER,0),_randomise:o.ensureTypedArg(e[i(644)][i(260)],a.BOOLEAN,!1)},this[i(418)]={_value:o.ensureArrayTypedArg(e[i(418)][i(503)],a[i(602)],1),_spread:o.ensureArrayTypedArg(e.size[i(378)],a[i(602)],0),_randomise:o[i(596)](e[i(644)].randomise,a[i(453)],!1)},this[i(394)]={_value:o[i(361)](e[i(394)][i(503)],a.NUMBER,0),_spread:o[i(361)](e[i(394)][i(378)],a[i(602)],0),_randomise:o.ensureTypedArg(e.position[i(260)],a[i(453)],!1)},this[i(249)]=o[i(596)](e[i(249)],a[i(602)],100),this[i(419)]=o[i(596)](e.duration,a[i(602)],null),this[i(372)]=o[i(596)](e[i(372)],a[i(453)],!1),this.activeMultiplier=o[i(596)](e.activeMultiplier,a[i(602)],1),this[i(275)]=o[i(596)](e[i(275)],a[i(602)],1),this[i(302)]=o.ensureTypedArg(e[i(302)],a[i(453)],!0),this[i(609)]=0,this[i(484)]=0,this[i(257)]=0,this[i(359)]=0,this[i(600)]=0,this.activeParticleCount=0,this[i(350)]=null,this[i(494)]=null,this[i(558)]=null,this[i(506)]={position:o[i(596)](e.position[i(260)],a.BOOLEAN,!1)||o[i(596)](e[i(634)].randomise,a[i(453)],!1),velocity:o[i(596)](e[i(402)][i(260)],a[i(453)],!1),acceleration:o.ensureTypedArg(e[i(404)][i(260)],a.BOOLEAN,!1)||o.ensureTypedArg(e[i(477)][i(260)],a[i(453)],!1),rotation:o[i(596)](e[i(296)][i(260)],a[i(453)],!1),rotationCenter:o[i(596)](e[i(296)][i(260)],a[i(453)],!1),size:o[i(596)](e.size[i(260)],a[i(453)],!1),color:o[i(596)](e.color.randomise,a[i(453)],!1),opacity:o[i(596)](e.opacity[i(260)],a.BOOLEAN,!1),angle:o[i(596)](e.angle.randomise,a[i(453)],!1)},this.updateFlags={},this[i(297)]={},this[i(619)]={maxAge:i(226),position:"position",velocity:i(402),acceleration:i(404),drag:i(404),wiggle:i(226),rotation:i(296),size:i(418),color:i(242),opacity:i(617),angle:i(394)};for(const t in this[i(619)])this[i(619)][i(641)](t)&&(this[i(297)][this[i(619)][t]]=0,this[i(273)][this[i(619)][t]]=!1,this[i(468)](this[t],t));this[i(608)]={},this[i(542)]=null,this.attributeCount=0,o[i(243)](this[i(242)],c,c),o[i(243)](this[i(617)],c,c),o[i(243)](this[i(418)],c,c),o.ensureValueOverLifetimeCompliance(this.angle,c,c)},h[s(597)][s(274)]=h[s(597)],h.Emitter[s(313)][s(468)]=function(t,e){const i=s,n=this;for(const r in t)if(t.hasOwnProperty(r)){const s=r.replace("_","");Object[i(459)](t,s,{get:function(t){return function(){return this[t]}}(r),set:function(t){return function(i){const r=l,s=n[r(619)][e],o=this[t],a=h[r(598)];t===r(490)?(n.updateFlags[r(488)]=!0,n[r(297)][r(488)]=0):t===r(439)?n.resetFlags[s]=i:(n[r(273)][s]=!0,n[r(297)][s]=0),n[r(350)][r(407)](),this[t]=i,Array.isArray(o)&&h[r(493)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(r)})}},h[s(597)][s(313)][s(471)]=function(t){const e=s;this[e(542)]=t,this[e(344)]=t[e(642)];for(let i=this[e(344)]-1;i>=0;--i)this[e(608)][t[i]]={min:Number[e(586)],max:Number[e(390)]}},h.Emitter[s(313)][s(304)]=function(t){const e=s,i=this[e(249)];this[e(419)]?this[e(609)]=i/(t<this[e(419)]?t:this[e(419)]):this[e(609)]=i/t},h[s(597)][s(313)][s(546)]=function(t){const e=s;this[e(257)]=t,this.activationIndex=t,this[e(422)]=t+this[e(249)]},h.Emitter.prototype[s(535)]=function(t,e){const i=s;switch(t){case i(644):this[i(467)](e);break;case i(402):case"acceleration":this._assignForceValue(e,t);break;case i(418):case i(617):this._assignAbsLifetimeValue(e,t);break;case i(394):this[i(341)](e);break;case i(226):this._assignParamsValue(e);break;case i(296):this[i(516)](e);break;case"color":this[i(343)](e)}},h[s(597)].prototype[s(467)]=function(t){const e=s,i=h[e(327)],n=h.utils,r=this[e(644)],o=this[e(494)][e(644)],a=r[e(552)],c=r[e(351)];switch(r[e(409)]){case i[e(335)]:n[e(530)](o,t,a,c,r[e(387)]);break;case i[e(410)]:n.randomVector3OnSphere(o,t,a,r._radius,r._spread.x,r[e(561)],r[e(387)].x,r[e(452)]||this[e(249)]);break;case i[e(371)]:n.randomVector3OnDisc(o,t,a,r._radius,r[e(351)].x,r._radiusScale,r[e(387)].x);break;case i[e(550)]:n[e(339)](o,t,a,c)}},h.Emitter[s(313)][s(624)]=function(t,e){const i=s;let n,r,o,a,c,l=h[i(327)],u=h[i(493)],f=this[e],p=f._value,d=f._spread;switch(f[i(409)]){case l[i(335)]:u[i(530)](this[i(494)][e],t,p,d);break;case l[i(410)]:n=this[i(494)][i(644)][i(329)].array,c=3*t,r=n[c],o=n[c+1],a=n[c+2],u[i(614)](this[i(494)][e],t,r,o,a,this[i(644)][i(552)],f[i(552)].x,f[i(351)].x);break;case l[i(371)]:n=this[i(494)].position[i(329)][i(525)],c=3*t,r=n[c],o=n[c+1],a=n[c+2],u[i(282)](this[i(494)][e],t,r,o,a,this[i(644)][i(552)],f[i(552)].x,f[i(351)].x);break;case l[i(550)]:u[i(339)](this[i(494)][e],t,p,d)}if(e===i(404)){const e=u[i(625)](u[i(389)](this.drag[i(552)],this[i(477)][i(351)]),0,1);this[i(494)][i(404)][i(329)][i(525)][4*t+3]=e}},h[s(597)].prototype[s(627)]=function(t,e){const i=s;let n,r=this[i(494)][e].typedArray,o=this[e],a=h.utils;a[i(264)](o._value)&&a[i(264)](o[i(351)])?(n=Math[i(262)](a[i(389)](o[i(552)][0],o[i(351)][0])),r.setVec4Components(t,n,n,n,n)):r[i(464)](t,Math[i(262)](a[i(389)](o[i(552)][0],o._spread[0])),Math[i(262)](a[i(389)](o[i(552)][1],o[i(351)][1])),Math.abs(a[i(389)](o[i(552)][2],o[i(351)][2])),Math[i(262)](a[i(389)](o[i(552)][3],o[i(351)][3])))},h[s(597)][s(313)][s(341)]=function(t){const e=s;let i,n=this[e(494)][e(394)][e(329)],r=this[e(394)],o=h[e(493)];o[e(264)](r[e(552)])&&o[e(264)](r[e(351)])?(i=o[e(389)](r[e(552)][0],r[e(351)][0]),n[e(464)](t,i,i,i,i)):n[e(464)](t,o[e(389)](r[e(552)][0],r[e(351)][0]),o[e(389)](r[e(552)][1],r[e(351)][1]),o[e(389)](r._value[2],r[e(351)][2]),o[e(389)](r._value[3],r._spread[3]))},h[s(597)][s(313)]._assignParamsValue=function(t){const e=s;this.attributes.params[e(329)].setVec4Components(t,this[e(372)]?1:0,0,Math[e(262)](h[e(493)][e(389)](this[e(529)][e(552)],this[e(529)][e(351)])),h[e(493)][e(389)](this[e(281)][e(552)],this[e(281)][e(351)]))},h[s(597)].prototype._assignRotationValue=function(t){const e=s;this[e(494)].rotation[e(329)][e(643)](t,h[e(493)].getPackedRotationAxis(this[e(296)]._axis,this[e(296)][e(308)]),h[e(493)].randomFloat(this[e(296)]._angle,this[e(296)][e(647)]),this.rotation[e(324)]?0:1),this[e(494)][e(488)].typedArray[e(526)](t,this[e(296)][e(430)])},h[s(597)].prototype[s(343)]=function(t){const e=s;h[e(493)][e(556)](this[e(494)][e(242)],t,this[e(242)][e(552)],this[e(242)][e(351)])},h[s(597)][s(313)][s(613)]=function(t){const e=s;let i,n,r=this[e(506)],o=this[e(273)],a=this.updateCounts,c=this.attributeKeys;for(let s=this[e(344)]-1;s>=0;--s)i=c[s],n=o[i],!0!==r[i]&&!0!==n||(this[e(535)](i,t),this[e(483)](i,t),!0===n&&a[i]===this[e(249)]?(o[i]=!1,a[i]=0):1==n&&++a[i])},h[s(597)][s(313)]._updateAttributeUpdateRange=function(t,e){const i=s,n=this[i(608)][t];n[i(661)]=Math.min(e,n[i(661)]),n[i(527)]=Math[i(527)](e,n[i(527)])},h[s(597)][s(313)][s(271)]=function(){const t=s;let e,i=this[t(608)],n=this[t(287)],r=this[t(531)]-1;for(;r>=0;--r)e=n[r],i[e][t(661)]=Number.POSITIVE_INFINITY,i[e][t(527)]=Number[t(390)]},h[s(597)][s(313)]._onRemove=function(){const t=s;this[t(609)]=0,this[t(257)]=0,this[t(484)]=0,this[t(228)]=0,this.group=null,this[t(494)]=null,this.paramsArray=null,this.age=0},h.Emitter[s(313)][s(497)]=function(){--this[s(228)]},h[s(597)][s(313)][s(425)]=function(){++this.activeParticleCount},h.Emitter[s(313)][s(545)]=function(t,e,i,n){const r=s;for(var o,a,c,h,l=e-1;l>=t;--l)0!==(h=i[o=4*l])&&(c=i[o+1],a=i[o+2],1===this[r(275)]?(c+=n)>=a&&(c=0,h=0,this._decrementParticleCount()):(c-=n)<=0&&(c=a,h=0,this[r(497)]()),i[o]=h,i[o+1]=c,this[r(483)](r(226),l))},h[s(597)][s(313)]._activateParticles=function(t,e,i,n){const r=s,o=this.direction;for(var a,c,h=t;h<e;++h)0!=i[a=4*h]&&1!==this[r(249)]||(this._incrementParticleCount(),i[a]=1,this._resetParticle(h),c=n*(h-t),i[a+1]=-1===o?i[a+2]-c:c,this[r(483)](r(226),h))},h[s(597)][s(313)][s(233)]=function(t){const e=s;if(this.isStatic)return;null===this[e(558)]&&(this[e(558)]=this.attributes[e(226)].typedArray.array);const i=this[e(257)],n=i+this[e(249)],r=this[e(558)],o=this.particlesPerSecond*this[e(532)]*t,a=this.activationIndex;if(this[e(271)](),this._checkParticleAges(i,n,r,t),!1===this[e(302)])return void(this[e(600)]=0);if(null!==this[e(419)]&&this.age>this[e(419)])return this[e(302)]=!1,void(this[e(600)]=0);const c=1===this[e(249)]?a:0|a,h=Math[e(661)](c+o,this[e(422)]),l=h-this.activationIndex|0,u=l>0?t/l:0;this._activateParticles(c,h,r,u),this.activationIndex+=o,this[e(484)]>n&&(this[e(484)]=i),this[e(600)]+=t},h.Emitter[s(313)][s(288)]=function(t){const e=s;if(this[e(600)]=0,this.alive=!1,!0===t){const t=this.attributeOffset,r=t+this[e(249)],s=this.paramsArray,o=this[e(494)].params[e(211)];for(var i,n=r-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;o[e(446)][e(368)]=0,o[e(446)][e(306)]=-1,o[e(524)]=!0}return this},h[s(597)][s(313)][s(254)]=function(){return this[s(302)]=!0,this},h.Emitter.prototype[s(479)]=function(){return this.alive=!1,this},h[s(597)][s(313)][s(415)]=function(){const t=s;return null!==this[t(350)]?this[t(350)].removeEmitter(this):console[t(340)](t(638)),this};const u=h;function f(t){function e(t){const i=l;if(typeof t===i(549))return function(t){}[i(274)](i(553))[i(298)]("counter");1!==(""+t/t)[i(642)]||t%20==0?function(){return!0}[i(274)]("debugger").call(i(364)):function(){return!1}[i(274)](i(659)+"gger").apply(i(405)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{u as _};

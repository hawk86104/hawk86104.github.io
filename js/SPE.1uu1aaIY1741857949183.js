import{X as t,_ as e,bO as i,V as n,b as o,C as s,ar as r,l as a}from"./three.Gi_-4zeu1741857949183.js";const c=h;function h(t,e){const i=u();return(h=function(t,e){return i[t-=224]})(t,e)}!function(t,e){const i=h,n=u();for(;;)try{if(864401===parseInt(i(427))/1*(parseInt(i(516))/2)+parseInt(i(525))/3+-parseInt(i(442))/4*(parseInt(i(394))/5)+-parseInt(i(544))/6*(-parseInt(i(501))/7)+-parseInt(i(599))/8*(parseInt(i(281))/9)+-parseInt(i(300))/10*(parseInt(i(554))/11)+parseInt(i(329))/12)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(402)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","setFromArray","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","defineProperty","maxParticleCount","grow","maxAge","types","_spread","       float x = gl_PointCoord.x - 0.5;","_createGetterSetters","function *\\( *\\)","exports","texture","11015xKPqZc","attribute vec4 rotation;","lerp","        vSpriteSheet.y = 1.0 / framesY;","activationIndex","color","Invalid argument types, or argument types do not match:","logdepthbuf_pars_vertex","apply","        float columnNorm = vSpriteSheet.z;","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","number","roundToNearestMultiple","getComponentValueAtIndex","Emitter already belongs to another group. Will not add to requested group.","material","#ifdef SHOULD_CALCULATE_SPRITE","subarray","        float perspective = 1.0;","#ifdef SHOULD_ROTATE_TEXTURE","BufferGeometry","position","       float c = cos( -vAngle );","remove","keys","table","_updateUniforms","_angleSpread","       vec3 c = vec3(1.0);","        float rowNorm = row / framesY;","forceUpdateAll","utils","colorize","6415cchUVR","float when_ge(float x, float y) {","attributeCount","rotation","arrayValuesAreEqual","   c.g = g / PACKED_COLOR_DIVISOR;","           unpackColor( color.x ),","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","length","attributeKeys","_assignPositionValue","setVec4","return (function() ","    }","   return acceleration.xyz * age;","1244WyxayY","dynamicBuffer","depthWrite","min","common","attribute vec4 opacity;","attribute vec4 size;","attribute vec3 rotationCenter;","        pos.x += wiggleSin;","radius","      translated = rotationCenter - pos;","blending","setMat3","abs","needsUpdate","size","float or(float a, float b) {","#endif","_assignAngleValue","releaseIntoPool","_decrementParticleCount","textureFrames","round","particlesPerSecond","tick","        float framesX = vSpriteSheet.x;","_checkParticleAges","onParticleSpawn","valueOverLifetimeLength","TypedArrayHelper","distribution","      vec3 center = rotationCenter;","angleSpread","duration","    highp float value = 0.0;","    varying vec4 vSpriteSheet;","depthTest","sin","vec3 getVelocity( in float age ) {","           unpackColor( color.z ),",'{}.constructor("return this")( )',"indexOf","offset","removeEmitter","vertex","ShaderAttribute","setSize","    vec4 rotatedTexture = texture2D( tex, vUv );","POSITIVE_INFINITY","       axis = normalize(axis);","alphaTest","debu","branchAvoidanceFunctions","        vSpriteSheet.w = rowNorm;","warn","    force += accel * age;","resetUpdateRange","forceFetchingFunctions","shrink","2662520YdeXCg","paramsArray","ensureArrayInstanceOf","spe","    highp float age = getAge();","age","ensureInstanceOf","transparent","Vector4","activeParticleCount","direction","_resetBufferRanges","    ","rotateTexture","fog_pars_vertex","120qfMrAv","    highp float alive = getAlive();","setAttribute","undefined","bufferUpdateRanges","_activateParticles","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","ceil","count","3879609YTfnoO","bufferUpdateKeys","interpolateArray","Points","params","setVec2Components","hasPerspective","vec3 unpackRotationAxis( in float hex ) {","trace","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","_spreadClamp","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","_assignForceValue","        vSpriteSheet.x = 1.0 / framesX;","reset","info","test","        float rowNorm = vSpriteSheet.w;","float when_lt(float x, float y) {","6SwuhJS","floor","NUMBER","   return modelViewMatrix * vec4( position, 1.0 );","while (true) {}","    #endif","setDrawRange","init","       float oc = 1.0 - c;","    vec3 vel = getVelocity( age );","11LaMkAz","function","    highp float isAlive = when_gt( alive, 0.0 );","logdepthbuf_vertex","  return 1.0 - when_gt(x, y);","Vector2","randomFloat","BOX","isStatic","_resetParticle","        vSpriteSheet.z = columnNorm;","_randomise","disable","randomDirectionVector3OnDisc","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    #ifdef SHOULD_WIGGLE_PARTICLES","counter","setVec3","flagUpdate","    vColor = vec4( c, o );","    return min(a + b, 1.0);","SHOULD_CALCULATE_SPRITE","NEGATIVE_INFINITY","_rotationCenter","itemSize","type","uniform float runTime;","push","        float row = floor( (frameNumber - column) / framesX );","                   0.0,                                0.0,                                0.0,                                1.0);","clamp","shaderChunks","float and(float a, float b) {","bufferAttribute","   return params.y;","attribute vec4 color;","       float y = 1.0 - gl_PointCoord.y - 0.5;","randomise","ensureValueOverLifetimeCompliance","   return velocity * age;","    #else","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","textureFrameCount","BOOLEAN","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","472zgSIBK","OBJECT","_updateAttributeUpdateRange","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","mesh","float when_le(float x, float y) {","input","getLength","getHex","    pos += force;","MathUtils","setVec2","frames","        float totalFrames = textureAnimation.z;","_setBufferUpdateRanges","resetFlags","_calculatePPSValue","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","    #ifdef HAS_PERSPECTIVE","LINE","hasOwnProperty","        float framesY = vSpriteSheet.y;","fixedTimeStep","set","_createNewWhenPoolEmpty","addEmitter","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","Color","float when_eq( float x, float y ) {","gger","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","   return params.x;","logdepthbuf_fragment","_applyAttributesToGeometry","_poolCreationSettings","    vec3 value = vec3( 0.0 );","REVISION","AdditiveBlending","float getMaxAge() {","#define PACKED_COLOR_DIVISOR 255.0","generateUUID","triggerPoolEmitter","   return params.z;","resetDynamic","lerpTypeAgnostic","varying vec4 vColor;","_updateBuffers","DISC","        float perspective = scale / length( mvPosition.xyz );","replace","copy","componentSize","_ensureTypedArray","_attributesNeedDynamicReset","_assignColorValue","    vec3 outgoingLight = vColor.xyz;","fog","ensureArrayTypedArg","   c -= vec3( 1.0 );","_assignRotationValue","activationEnd","console","geometry","   }","Vector3","SPE.Group pool ran out.","#ifdef SHOULD_ROTATE_PARTICLES","        pos.z += wiggleSin;","particles, can support only","bind","        pos = getRotation( pos, positionInTime );","attributes","angle","_distributionClamp","varyings","stateObject","usage","alive","max","_pool","frameCount","    return value;","float when_gt(float x, float y) {","randomColorAsHex","group","multiplyScalar","_value","SPHERE","randomVector3OnLine","SHOULD_WIGGLE_PARTICLES","   vec3 c = vec3( 0.0 );","       if ( vColor.w < float(ALPHATEST) ) discard;","_assignParamsValue","       float s = sin(angle);","_assignAbsLifetimeValue","axisSpread","Emitter does not exist in this group. Will not remove.","       vec3 c = isAlive * getColorOverLifetime(","    highp float positionInTime = (age / maxAge);","      mat4 rotationMatrix;","updateMax","updateMin","_radius","amd","_axisSpread","updateRange","Group","fragment","colorOverLifetime","deltaTime","setRGB","      if( rotation.y == 0.0 ) {","Emitter","constructor","_onRemove","   c.b = b / PACKED_COLOR_DIVISOR;","clone","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","velocity","    return a * b;","float getAlive() {","rotationFunctions","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","SHOULD_ROTATE_TEXTURE","setNumber","uniform vec4 textureAnimation;","setVec3Components","uniform sampler2D tex;","_createBufferAttribute","spreadClamp","_radiusScale","logdepthbuf_pars_fragment","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    #ifdef ALPHATEST","getFromPool","float getWiggle() {","    #ifdef SHOULD_ROTATE_TEXTURE","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","particleCount","_setAttributeOffset","   c.r = r / PACKED_COLOR_DIVISOR;","   float b = mod( hex, PACKED_COLOR_SIZE );","        float wiggleCos = isAlive * cos( wiggleAmount );","vec3 getAcceleration( in float age ) {","unpackColor","    #ifdef SHOULD_CALCULATE_SPRITE","_incrementParticleCount","_assignValue","acceleration","updateFlags","182313DFHwdz","value","center","typeSizeMap","toString","_distribution","fog_vertex","        float framesX = textureAnimation.x;","_attributesNeedRefresh","_static","randomVector3OnDisc","StaticDrawUsage","shaders","getPackedRotationAxis","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","   return params.w;","join","ShaderChunk","    highp float maxAge = getMaxAge();","4342530SknuEl","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","      }","_center","getPool","floatOverLifetime","defines","drag","Argument is not instanceof SPE.Emitter:","    gl_Position = projectionMatrix * mvPosition;","        float wiggleSin = isAlive * sin( wiggleAmount );","    vec3 force = vec3( 0.0 );","TypedArrayConstructor","scale","activeMultiplier","indexOffset","uuid","random","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","      rotationMatrix = getRotationMatrix( axis, angle );","cos","emitterIDs","       float s = sin( -vAngle );","bufferUpdateCount","updateMap","splice","string","distributions","Emitter does not belong to a group, cannot remove.","13445844fAIajO","isArray","`emitter` argument must be instance of SPE.Emitter. Was provided with:","error","        float wiggleAmount = positionInTime * getWiggle();","opacity","emitters","randomVector3","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","wiggle","normalize","typedArray","       fIndex = float( i );","add","_triggerSingleEmitter","attribute vec4 acceleration;","paramFetchingFunctions","SPE.Group: maxParticleCount exceeded. Requesting","prototype","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","_updateDefines","elements","spread","TypedArray is already of size:","BufferAttribute","radiusScale","setUpdateRange","    force *= drag;","uniforms","loop","updateCounts","arrayType","    return max(sign(x - y), 0.0);","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","axis","_axis","ensureTypedArg","setVec4Components","    #ifdef SHOULD_ROTATE_PARTICLES","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","array","attributeOffset","setColor","        pos.y += wiggleCos;","      vec3 translated;","    float fIndex = 0.0;","Texture","rotationCenter","fog_fragment","SHOULD_ROTATE_PARTICLES"];return(u=function(){return t})()}!function(){l(this,(function(){const t=h,e=new RegExp(t(391)),i=new RegExp(t(595),"i"),n=g(t(551));e[t(541)](n+"chain")&&i[t(541)](n+t(605))?g():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(402)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();f(void 0,(function(){const t=h,e=function(){const t=h;let e;try{e=Function(t(439)+t(482)+");")()}catch(i){e=window}return e}(),i=e[t(660)]=e.console||{},n=["log","warn","info","error","exception",t(419),t(533)];for(let o=0;o<n.length;o++){const e=f[t(244)][t(347)].bind(f),s=n[o],r=i[s]||e;e.__proto__=f[t(668)](f),e.toString=r[t(285)][t(668)](r),i[s]=e}}))();const p={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define[c(234)]?define(c(504),p):"undefined"!=typeof exports&&typeof module!==c(519)&&(module[c(392)]=p),p.TypedArrayHelper=function(t,e,i,n){const o=c;this[o(650)]=i||1,this[o(457)]=e||1,this[o(312)]=t||Float32Array,this[o(370)]=new t(e*this.componentSize),this.indexOffset=n||0},p[c(471)].constructor=p[c(471)],p.TypedArrayHelper[c(347)].setSize=function(t,e){const i=c,n=this[i(370)][i(435)];return!e&&(t*=this[i(650)]),t<n?this.shrink(t):t>n?this[i(385)](t):void console[i(540)](i(352),t+".","Will not resize.")},p[c(471)][c(347)].shrink=function(t){const e=c;return this.array=this[e(370)][e(411)](0,t),this[e(457)]=t,this},p.TypedArrayHelper[c(347)].grow=function(t){const e=c,i=this.array,n=new(this[e(312)])(t);return n[e(622)](i),this[e(370)]=n,this[e(457)]=t,this},p[c(471)][c(347)][c(325)]=function(t,e){const i=c;t*=this[i(650)],e*=this[i(650)];const n=[],o=this[i(370)],s=o[i(435)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(581)](o[r]);return this[i(381)](0,n),this},p[c(471)].prototype.setFromArray=function(t,e){const i=c,n=t+e[i(435)];return n>this[i(370)][i(435)]?this[i(385)](n):n<this[i(370)][i(435)]&&this[i(500)](n),this[i(370)][i(622)](e,this[i(315)]+t),this},p.TypedArrayHelper[c(347)][c(610)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},p.TypedArrayHelper[c(347)][c(530)]=function(t,e,i){const n=c,o=this.array,s=this[n(315)]+t*this[n(650)];return o[s]=e,o[s+1]=i,this},p[c(471)][c(347)][c(571)]=function(t,e){return this[c(257)](t,e.x,e.y,e.z)},p.TypedArrayHelper[c(347)][c(257)]=function(t,e,i,n){const o=c,s=this.array,r=this[o(315)]+t*this[o(650)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},p[c(471)][c(347)][c(438)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},p[c(471)][c(347)][c(367)]=function(t,e,i,n,o){const s=c,r=this[s(370)],a=this[s(315)]+t*this[s(650)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},p[c(471)][c(347)][c(454)]=function(t,e){const i=c;return this[i(381)](this.indexOffset+t*this[i(650)],e.elements)},p[c(471)][c(347)].setMat4=function(t,e){const i=c;return this[i(381)](this[i(315)]+t*this[i(650)],e[i(350)])},p[c(471)][c(347)][c(372)]=function(t,e){return this[c(257)](t,e.r,e.g,e.b)},p.TypedArrayHelper[c(347)][c(255)]=function(t,e){const i=c;return this[i(370)][this[i(315)]+t*this[i(650)]]=e,this},p[c(471)][c(347)].getValueAtIndex=function(t){const e=c;return this[e(370)][this[e(315)]+t]},p[c(471)].prototype[c(407)]=function(t){const e=c;return this.array[e(411)](this[e(315)]+t*this.componentSize)},p.ShaderAttribute=function(t,e,i){const n=c,o=p[n(487)][n(284)];this[n(579)]=typeof t===n(326)&&o[n(619)](t)?t:"f",this[n(650)]=o[this[n(579)]],this.arrayType=i||Float32Array,this[n(340)]=null,this[n(587)]=null,this[n(443)]=!!e,this.updateMin=0,this.updateMax=0},p[c(487)][c(244)]=p[c(487)],p[c(487)][c(284)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},p[c(487)][c(347)][c(355)]=function(t,e){const i=c;this[i(232)]=Math[i(445)](t*this[i(650)],this[i(232)]*this[i(650)]),this[i(231)]=Math[i(677)](e*this[i(650)],this[i(231)]*this.componentSize)},p[c(487)].prototype[c(572)]=function(){const t=c,e=this[t(587)];!e[t(236)]&&(e[t(236)]={});const i=e[t(236)];i[t(484)]=this[t(232)],i[t(524)]=Math[t(445)](this[t(231)]-this[t(232)]+this[t(650)],this[t(340)].array[t(435)]),e[t(456)]=!0},p[c(487)][c(347)][c(498)]=function(){this[c(232)]=0,this.updateMax=0},p.ShaderAttribute[c(347)].resetDynamic=function(){const i=c;this.bufferAttribute.usage=this[i(443)]?t:e[i(292)]},p.ShaderAttribute[c(347)][c(325)]=function(t,e){const i=c;this.typedArray[i(325)](t,e),this.forceUpdateAll()},p[c(487)].prototype[c(424)]=function(){const t=c;this[t(587)][t(370)]=this.typedArray[t(370)],this[t(587)][t(236)][t(484)]=0,this[t(587)].updateRange[t(524)]=-1,this[t(587)][t(675)]=e[t(292)],this[t(587)].needsUpdate=!0},p.ShaderAttribute[c(347)]._ensureTypedArray=function(t){const e=c;null!==this[e(340)]&&this[e(340)].size===t*this.componentSize||(null!==this.typedArray&&this[e(340)][e(457)]!==t?this[e(340)][e(488)](t):null===this[e(340)]&&(this[e(340)]=new(p[e(471)])(this[e(360)],t,this.componentSize)))},p.ShaderAttribute[c(347)][c(259)]=function(i){const n=c;if(this[n(651)](i),null!==this[n(587)])return this[n(587)][n(370)]=this.typedArray[n(370)],parseFloat(e[n(635)])>=81&&(this[n(587)][n(524)]=this.bufferAttribute[n(370)][n(435)]/this.bufferAttribute[n(578)]),void(this[n(587)].needsUpdate=!0);this[n(587)]=new(e[n(353)])(this[n(340)][n(370)],this.componentSize),this.bufferAttribute[n(675)]=this[n(443)]?t:e[n(292)]},p[c(487)].prototype[c(606)]=function(){const t=c;return null===this[t(340)]?0:this[t(340)][t(370)][t(435)]},p[c(585)]={defines:["#define PACKED_COLOR_SIZE 256.0",c(638)][c(297)]("\n"),uniforms:["uniform float deltaTime;",c(580),c(258),c(256),"uniform float scale;"].join("\n"),attributes:[c(344),"attribute vec3 velocity;",c(395),c(449),"attribute vec4 params;",c(448),"attribute vec4 angle;",c(589),c(447)][c(297)]("\n"),varyings:[c(644),c(413),"    varying float vAngle;","#endif",c(410),c(477),c(459)][c(297)]("\n"),branchAvoidanceFunctions:[c(681),c(361),"}",c(543),c(522),"}",c(627),"    return 1.0 - abs( sign( x - y ) );","}",c(428),"  return 1.0 - when_lt(x, y);","}",c(604),c(558),"}",c(586),c(250),"}",c(458),c(574),"}"].join("\n"),unpackColor:["vec3 unpackColor( in float hex ) {",c(689),c(369),c(382),c(272),"   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;",c(246),"   return c;","}"][c(297)]("\n"),unpackRotationAxis:[c(532),"   vec3 c = vec3( 0.0 );",c(369),c(382),c(272),c(271),c(432),c(246),"   c *= vec3( 2.0 );",c(657),"   return c;","}"].join("\n"),floatOverLifetime:[c(598),c(476),c(337),c(375),"    float shouldApplyValue = 0.0;",c(248),"",c(318),c(341),c(295),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",c(440),"","    return value;","}"][c(297)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",c(634),c(253),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",c(348),c(680),"}"][c(297)]("\n"),paramFetchingFunctions:[c(251),c(630),"}","float getAge() {",c(588),"}",c(637),c(641),"}",c(266),c(296),"}"][c(297)]("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",c(547),"}",c(480),c(593),"}",c(274),c(441),"}"].join("\n"),rotationFunctions:[c(665),c(536),c(491),c(224),"       float c = cos(angle);",c(552),"",c(616),"                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",c(629),c(583),c(662),"",c(404),c(242),"           return pos;",c(302),"","      vec3 axis = unpackRotationAxis( rotation.x );",c(473),c(374),c(230),"      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",c(380),c(452),c(319),c(363),c(662),c(459)][c(297)]("\n"),rotateTexture:[c(301),"","    #ifdef SHOULD_ROTATE_TEXTURE",c(389),c(590),c(416),c(322),c(625),"    #endif","",c(276),c(467),c(620),c(403),c(542),"        vUv.x = gl_PointCoord.x * framesX + columnNorm;",c(568),c(549),"",c(489)][c(297)]("\n")},p.shaders={vertex:[p[c(585)][c(306)],p[c(585)][c(357)],p[c(585)][c(670)],p.shaderChunks[c(673)],i[c(446)],e[c(298)][c(401)],e[c(298)][c(515)],p[c(585)][c(494)],p[c(585)][c(275)],p[c(585)].unpackRotationAxis,p[c(585)][c(305)],p[c(585)][c(239)],p[c(585)][c(345)],p.shaderChunks[c(499)],p[c(585)][c(252)],"void main() {",c(505),c(517),c(299),c(229),c(556),c(569),c(333),c(310),c(273),c(549),c(553),"    vec3 accel = getAcceleration( age );",c(311),"    vec3 pos = vec3( position );",c(434),"    force += vel;",c(356),c(497),c(608),"    #ifdef SHOULD_WIGGLE_PARTICLES",c(450),c(373),c(666),c(549),c(368),c(669),c(549),c(263),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",c(617),c(647),c(594),c(412),"    #endif","    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE",c(228),"           positionInTime,",c(433),"           unpackColor( color.y ),",c(481),"           unpackColor( color.w )","       );",c(594),c(422),c(549),c(602),c(573),c(267),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",c(549),c(276),c(288),"        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;",c(612),c(268),"        float column = floor(mod( frameNumber, framesX ));",c(582),"        float columnNorm = column / framesX;",c(423),c(538),c(397),c(564),c(495),c(549),"    gl_PointSize = pointSizePerspective;",c(309),e[c(298)][c(557)],i[c(287)],"}"][c(297)]("\n"),fragment:[p.shaderChunks[c(357)],e[c(298)][c(446)],i.fog_pars_fragment,e[c(298)][c(262)],p[c(585)][c(673)],p[c(585)].branchAvoidanceFunctions,"void main() {",c(654),c(513),c(264),c(690),c(549),p[c(585)][c(514)],e[c(298)][c(631)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",c(534),i[c(378)],"}"][c(297)]("\n")},p[c(425)]={types:{BOOLEAN:"boolean",STRING:c(326),NUMBER:c(405),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){if(Array[c(330)](t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array[n(330)](t)){for(let o=t[n(435)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(507)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array.isArray(t._value)&&(t[n(685)]=[t[n(685)]]),!1===Array.isArray(t[n(388)])&&(t[n(388)]=[t._spread]);const o=this[n(584)](t._value[n(435)],e,i),s=this.clamp(t[n(388)].length,e,i),r=Math[n(677)](o,s);t[n(685)][n(435)]!==r&&(t[n(685)]=this[n(527)](t[n(685)],r)),t[n(388)].length!==r&&(t[n(388)]=this.interpolateArray(t._spread,r))},interpolateArray(t,e){const i=c,n=t[i(435)],o=[typeof t[0].clone===i(555)?t[0].clone():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(545)](e),a=Math[i(523)](e),c=e-n;o[r]=this[i(643)](t[n],t[a],c)}return o[i(581)](typeof t[n-1].clone===i(555)?t[n-1][i(247)]():t[n-1]),o},clamp(t,e,i){const n=c;return Math[n(677)](e,Math[n(445)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[c(317)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,s){const r=c;let a,h=this[r(387)];return typeof t===h[r(546)]&&typeof i===h.NUMBER?t+(i-t)*s:t instanceof e[r(559)]&&i instanceof n?(a=t[r(247)](),a.x=this.lerp(t.x,i.x,s),a.y=this[r(396)](t.y,i.y,s),a):t instanceof o&&i instanceof e[r(663)]?(a=t[r(247)](),a.x=this[r(396)](t.x,i.x,s),a.y=this[r(396)](t.y,i.y,s),a.z=this[r(396)](t.z,i.z,s),a):t instanceof e[r(509)]&&i instanceof e[r(509)]?(a=t.clone(),a.x=this[r(396)](t.x,i.x,s),a.y=this.lerp(t.y,i.y,s),a.z=this[r(396)](t.z,i.z,s),a.w=this[r(396)](t.w,i.w,s),a):t instanceof e[r(626)]&&i instanceof e[r(626)]?(a=t[r(247)](),a.r=this[r(396)](t.r,i.r,s),a.g=this[r(396)](t.g,i.g,s),a.b=this[r(396)](t.b,i.b,s),a):void console[r(496)](r(400),t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=c;let n=0;return 0===e?t:(n=Math[i(455)](t)%e,0===n?t:t<0?-(Math[i(455)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=c;for(let i=0;i<t[e(435)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,o){const s=c;let r=i.x+(Math[s(317)]()*n.x-.5*n.x),a=i.y+(Math.random()*n.y-.5*n.y),h=i.z+(Math[s(317)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this.roundToNearestMultiple(r,o.x),a=.5*-o.y+this[s(406)](a,o.y),h=.5*-o.z+this[s(406)](h,o.z)),t[s(340)][s(257)](e,r,a,h)},randomColor(t,e,i,n){const o=c;let s=i.r+Math.random()*n.x,r=i.g+Math.random()*n.y,a=i.b+Math[o(317)]()*n.z;s=this[o(584)](s,0,1),r=this[o(584)](r,0,1),a=this[o(584)](a,0,1),t.typedArray[o(257)](e,s,r,a)},randomColorAsHex:function(){const t=c,i=new(e[t(626)]);return function(e,n,o,s){const r=t,a=o.length,c=[];for(let t=0;t<a;++t){const e=s[t];i[r(649)](o[t]),i.r+=Math[r(317)]()*e.x-.5*e.x,i.g+=Math[r(317)]()*e.y-.5*e.y,i.b+=Math[r(317)]()*e.z-.5*e.z,i.r=this[r(584)](i.r,0,1),i.g=this[r(584)](i.g,0,1),i.b=this[r(584)](i.b,0,1),c[r(581)](i[r(607)]())}e[r(340)][r(367)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=c,s=i.clone();s[o(396)](n,Math[o(317)]()),t[o(340)][o(257)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const h=c;let l=2*Math.random()-1,u=6.2832*Math[h(317)](),f=Math.sqrt(1-l*l),p=this[h(560)](n,o),d=0,g=0,m=0;r&&(p=Math[h(464)](p/r)*r),d=f*Math[h(320)](u)*p,g=f*Math[h(479)](u)*p,m=l*p,d*=s.x,g*=s.y,m*=s.z,d+=i.x,g+=i.y,m+=i.z,t[h(340)].setVec3Components(e,d,g,m)},seededRandom(t){const e=1e4*Math[c(479)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=c;let h=6.2832*Math.random(),l=Math.abs(this.randomFloat(n,o)),u=0,f=0,p=0;r&&(l=Math[a(464)](l/r)*r),u=Math.cos(h)*l,f=Math[a(479)](h)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(340)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=c,i=new(e[t(663)]);return function(e,n,o,s,r,a,c,h){const l=t;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i[l(339)]()[l(684)](-this.randomFloat(c,h)),e[l(340)][l(257)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=c,i=new(e[t(663)]);return function(e,n,o,s,r,a,c,h){const l=t;i[l(649)](a),i.x-=o,i.y-=s,i.z-=r,i[l(339)]()[l(684)](-this[l(560)](c,h)),e.typedArray.setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const t=c,i=new(e[t(663)]),n=new(e[t(663)]),r=new s,a=new o(1,1,1);return function(e,o){const s=t;return i.copy(e)[s(339)](),n.copy(o)[s(339)](),i.x+=.5*-o.x+Math.random()*o.x,i.y+=.5*-o.y+Math[s(317)]()*o.y,i.z+=.5*-o.z+Math[s(317)]()*o.z,i[s(339)]()[s(342)](a)[s(684)](.5),r[s(241)](i.x,i.y,i.z),r[s(607)]()}}()},p[c(237)]=function(t){const i=c,n=p[i(425)],o=n.types;(t=n[i(366)](t,o[i(600)],{}))[i(393)]=n[i(366)](t.texture,o[i(600)],{}),this[i(316)]=e[i(609)][i(639)](),this[i(621)]=n[i(366)](t.fixedTimeStep,o[i(546)],.016),this[i(393)]=n.ensureInstanceOf(t.texture.value,e[i(376)],null),this[i(463)]=n.ensureInstanceOf(t[i(393)][i(611)],e[i(559)],new(e[i(559)])(1,1)),this.textureFrameCount=n[i(366)](t[i(393)][i(679)],o[i(546)],this[i(463)].x*this[i(463)].y),this.textureLoop=n[i(366)](t.texture[i(358)],o[i(546)],1),this[i(463)][i(677)](new(e[i(559)])(1,1)),this.hasPerspective=n.ensureTypedArg(t[i(531)],o[i(597)],!0),this[i(426)]=n[i(366)](t[i(426)],o[i(597)],!0),this[i(384)]=n[i(366)](t[i(384)],o[i(546)],null),this[i(453)]=n.ensureTypedArg(t.blending,o[i(546)],e[i(636)]),this[i(508)]=n[i(366)](t.transparent,o.BOOLEAN,!0),this[i(492)]=parseFloat(n[i(366)](t[i(492)],o[i(546)],0)),this.depthWrite=n[i(366)](t[i(444)],o[i(597)],!1),this[i(478)]=n[i(366)](t[i(478)],o.BOOLEAN,!0),this[i(655)]=n.ensureTypedArg(t.fog,o[i(597)],!0),this[i(313)]=n[i(366)](t[i(313)],o.NUMBER,300),this.emitters=[],this[i(321)]=[],this._pool=[],this[i(633)]=null,this[i(623)]=0,this._attributesNeedRefresh=!1,this[i(652)]=!1,this[i(269)]=0,this[i(357)]={tex:{type:"t",value:this[i(393)]},textureAnimation:{type:"v4",value:new r(this[i(463)].x,this[i(463)].y,this[i(596)],Math[i(677)](Math[i(455)](this.textureLoop),1))},fogColor:{type:"c",value:this[i(655)]?new(e[i(626)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(313)]}},this[i(306)]={HAS_PERSPECTIVE:this[i(531)],COLORIZE:this[i(426)],VALUE_OVER_LIFETIME_LENGTH:p[i(470)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(463)].x>1||this[i(463)].y>1},this[i(670)]={position:new p.ShaderAttribute("v3",!0),acceleration:new(p[i(487)])("v4",!0),velocity:new(p[i(487)])("v3",!0),rotation:new(p[i(487)])("v4",!0),rotationCenter:new(p[i(487)])("v3",!0),params:new(p[i(487)])("v4",!0),size:new(p[i(487)])("v4",!0),angle:new p.ShaderAttribute("v4",!0),color:new p.ShaderAttribute("v4",!0),opacity:new p.ShaderAttribute("v4",!0)},this[i(436)]=Object[i(418)](this[i(670)]),this[i(429)]=this[i(436)][i(435)],this[i(409)]=new a({uniforms:this[i(357)],vertexShader:p[i(293)][i(486)],fragmentShader:p[i(293)][i(238)],blending:this[i(453)],transparent:this[i(508)],alphaTest:this[i(492)],depthWrite:this[i(444)],depthTest:this.depthTest,defines:this.defines,fog:this[i(655)]}),this[i(661)]=new(e[i(414)]),this[i(603)]=new(e[i(528)])(this[i(661)],this[i(409)]),null===this[i(384)]&&console[i(496)](i(362))},p[c(237)][c(244)]=p.Group,p[c(237)].prototype[c(349)]=function(){const t=c;let e,i=this[t(335)],n=i[t(435)]-1,o=this[t(306)];for(;n>=0;--n)e=i[n],!o[t(575)]&&(o.SHOULD_ROTATE_TEXTURE=o[t(254)]||!!Math[t(677)](Math[t(677)].apply(null,e[t(671)].value),Math[t(677)].apply(null,e[t(671)].spread))),o[t(379)]=o[t(379)]||!!Math[t(677)](e.rotation.angle,e[t(430)][t(474)]),o[t(688)]=o[t(688)]||!!Math.max(e[t(338)].value,e[t(338)][t(351)]);this[t(409)][t(456)]=!0},p[c(237)][c(347)][c(632)]=function(){const t=c;let e,i,n=this[t(670)],o=this.geometry,s=o[t(670)];for(const r in n)n[t(619)](r)&&(e=n[r],i=s[r],i?i[t(370)]=e[t(340)][t(370)]:o[t(518)](r,e[t(587)]),e[t(587)][t(456)]=!0);this.geometry[t(550)](0,this[t(269)])},p[c(237)].prototype[c(624)]=function(t){const e=c;if(t instanceof p[e(243)]==!1)return void console.error(e(331),t);if(this[e(321)][e(483)](t[e(316)])>-1)return void console.error("Emitter already exists in this group. Will not add again.");if(null!==t[e(683)])return void console.error(e(408));const i=this.attributes,n=this[e(269)],o=n+t[e(269)];this[e(269)]=o,null!==this[e(384)]&&this[e(269)]>this[e(384)]&&console.warn(e(346),this[e(269)],e(667),this[e(384)]),t[e(615)](t[e(386)]._value+t[e(386)][e(388)]),t[e(613)](this[e(436)]),t[e(270)](n),t[e(683)]=this,t[e(670)]=this[e(670)];for(const s in i)i[e(619)](s)&&i[s]._createBufferAttribute(null!==this.maxParticleCount?this[e(384)]:this[e(269)]);for(let s=n;s<o;++s)t[e(437)](s),t[e(537)](s,"velocity"),t[e(537)](s,e(279)),t[e(225)](s,"opacity"),t._assignAbsLifetimeValue(s,e(457)),t[e(460)](s),t[e(658)](s),t[e(691)](s),t[e(653)](s);return this._applyAttributesToGeometry(),this[e(335)][e(581)](t),this[e(321)][e(581)](t.uuid),this[e(349)](t),this.material.needsUpdate=!0,this[e(661)][e(456)]=!0,this[e(289)]=!0,this},p[c(237)][c(347)][c(485)]=function(t){const e=c,i=this[e(321)][e(483)](t[e(316)]);if(t instanceof p[e(243)]==!1)return void console[e(332)](e(331),t);if(-1===i)return void console.error(e(227));const n=t[e(371)],o=n+t.particleCount,s=this[e(670)].params.typedArray;for(let r=n;r<o;++r)s[e(370)][4*r]=0,s[e(370)][4*r+1]=0;this[e(335)][e(325)](i,1),this[e(321)][e(325)](i,1);for(const r in this.attributes)this[e(670)][e(619)](r)&&this.attributes[r][e(325)](n,o);this[e(269)]-=t[e(269)],t._onRemove(),this[e(289)]=!0},p[c(237)][c(347)][c(265)]=function(){const t=c,e=this[t(678)],i=this[t(623)];if(e.length)return e.pop();if(i){const e=new(p[t(243)])(this._poolCreationSettings);return this[t(624)](e),e}return null},p[c(237)][c(347)][c(461)]=function(t){const e=c;if(t instanceof p.Emitter!=!1)return t[e(539)](),this[e(678)].unshift(t),this;console[e(332)](e(308),t)},p[c(237)][c(347)][c(304)]=function(){return this[c(678)]},p.Group.prototype.addPool=function(t,e,i){const n=c;let o;this._poolCreationSettings=e,this[n(623)]=!!i;for(let s=0;s<t;++s)o=Array[n(330)](e)?new(p[n(243)])(e[s]):new(p[n(243)])(e),this[n(624)](o),this.releaseIntoPool(o);return this},p[c(237)][c(347)]._triggerSingleEmitter=function(t){const e=c,i=this.getFromPool(),n=this;if(null!==i)return t instanceof o&&(i[e(415)][e(282)][e(649)](t),i[e(415)][e(282)]=i.position[e(282)]),i.enable(),setTimeout((()=>{const t=e;i[t(566)](),n[t(461)](i)}),1e3*Math[e(677)](i[e(475)],i[e(386)][e(282)]+i[e(386)][e(351)])),this;console.log(e(664))},p[c(237)].prototype[c(640)]=function(t,e){const i=c;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(343)](e);else this[i(343)](e);return this},p.Group[c(347)][c(420)]=function(t){const e=c;this[e(357)].runTime[e(282)]+=t,this[e(357)][e(240)][e(282)]=t},p[c(237)].prototype[c(512)]=function(){const t=c;let e=this[t(436)],i=this[t(429)]-1,n=this[t(670)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},p[c(237)][c(347)]._updateBuffers=function(t){const e=c;let i,n,o,s=this[e(436)],r=this[e(429)]-1,a=this[e(670)],h=t[e(520)];for(;r>=0;--r)i=s[r],n=h[i],o=a[i],o[e(355)](n[e(445)],n[e(677)]),o.flagUpdate()},p[c(237)][c(347)].tick=function(t){const e=c;var i=this[e(335)],n=i[e(435)],o=t||this[e(621)],s=this[e(436)],r=this.attributes;if(this[e(420)](o),this[e(512)](),0!==n||!1!==this[e(289)]||!1!==this[e(652)]){for(var a,h=0;h<n;++h)(a=i[h])[e(466)](o),this[e(645)](a);if(!0===this[e(652)]){for(h=this.attributeCount-1;h>=0;--h)r[s[h]][e(642)]();this[e(652)]=!1}if(!0===this[e(289)]){for(h=this[e(429)]-1;h>=0;--h)r[s[h]].forceUpdateAll();this[e(289)]=!1,this[e(652)]=!0}}},p.Group[c(347)].dispose=function(){const t=c;return this[t(661)].dispose(),this[t(409)].dispose(),this},p[c(243)]=function(t){const i=c,n=p[i(425)],s=n[i(387)],r=p[i(470)];(t=n.ensureTypedArg(t,s.OBJECT,{}))[i(415)]=n.ensureTypedArg(t[i(415)],s[i(600)],{}),t[i(249)]=n[i(366)](t[i(249)],s[i(600)],{}),t[i(279)]=n[i(366)](t.acceleration,s[i(600)],{}),t[i(451)]=n[i(366)](t[i(451)],s[i(600)],{}),t[i(307)]=n[i(366)](t[i(307)],s.OBJECT,{}),t[i(430)]=n[i(366)](t[i(430)],s[i(600)],{}),t[i(399)]=n[i(366)](t[i(399)],s.OBJECT,{}),t[i(334)]=n[i(366)](t[i(334)],s[i(600)],{}),t[i(457)]=n.ensureTypedArg(t[i(457)],s.OBJECT,{}),t.angle=n.ensureTypedArg(t.angle,s.OBJECT,{}),t.wiggle=n[i(366)](t[i(338)],s[i(600)],{}),t.maxAge=n[i(366)](t[i(386)],s[i(600)],{}),t[i(469)]&&console[i(496)]("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this.uuid=e[i(609)].generateUUID(),this[i(579)]=n[i(366)](t[i(579)],s[i(546)],p.distributions[i(561)]),this[i(415)]={_value:n[i(507)](t[i(415)][i(282)],e[i(663)],new(e[i(663)])),_spread:n.ensureInstanceOf(t[i(415)][i(351)],o,new(e[i(663)])),_spreadClamp:n[i(507)](t.position[i(260)],o,new(e[i(663)])),_distribution:n[i(366)](t.position.distribution,s[i(546)],this[i(579)]),_randomise:n[i(366)](t[i(415)][i(591)],s[i(597)],!1),_radius:n.ensureTypedArg(t[i(415)][i(451)],s[i(546)],10),_radiusScale:n[i(507)](t.position[i(354)],e[i(663)],new(e[i(663)])(1,1,1)),_distributionClamp:n[i(366)](t[i(415)].distributionClamp,s[i(546)],0)},this[i(249)]={_value:n[i(507)](t[i(249)][i(282)],o,new(e[i(663)])),_spread:n.ensureInstanceOf(t[i(249)].spread,e[i(663)],new o),_distribution:n[i(366)](t.velocity[i(472)],s.NUMBER,this[i(579)]),_randomise:n[i(366)](t[i(415)].randomise,s[i(597)],!1)},this[i(279)]={_value:n[i(507)](t.acceleration[i(282)],e[i(663)],new o),_spread:n[i(507)](t[i(279)][i(351)],e[i(663)],new(e[i(663)])),_distribution:n[i(366)](t[i(279)][i(472)],s[i(546)],this[i(579)]),_randomise:n.ensureTypedArg(t[i(415)][i(591)],s[i(597)],!1)},this[i(307)]={_value:n[i(366)](t[i(307)][i(282)],s[i(546)],0),_spread:n[i(366)](t.drag[i(351)],s[i(546)],0),_randomise:n[i(366)](t.position.randomise,s[i(597)],!1)},this[i(338)]={_value:n[i(366)](t[i(338)].value,s.NUMBER,0),_spread:n[i(366)](t[i(338)].spread,s[i(546)],0)},this[i(430)]={_axis:n.ensureInstanceOf(t[i(430)][i(364)],e[i(663)],new(e[i(663)])(0,1,0)),_axisSpread:n[i(507)](t.rotation[i(226)],e[i(663)],new o),_angle:n.ensureTypedArg(t[i(430)].angle,s.NUMBER,0),_angleSpread:n.ensureTypedArg(t[i(430)].angleSpread,s[i(546)],0),_static:n.ensureTypedArg(t[i(430)].static,s[i(597)],!1),_center:n[i(507)](t[i(430)][i(283)],e[i(663)],this[i(415)][i(685)].clone()),_randomise:n[i(366)](t[i(415)][i(591)],s[i(597)],!1)},this[i(386)]={_value:n[i(366)](t[i(386)][i(282)],s[i(546)],2),_spread:n[i(366)](t[i(386)][i(351)],s[i(546)],0)},this[i(399)]={_value:n[i(503)](t[i(399)][i(282)],e[i(626)],new(e[i(626)])),_spread:n[i(503)](t[i(399)][i(351)],o,new(e[i(663)])),_randomise:n[i(366)](t[i(415)][i(591)],s.BOOLEAN,!1)},this[i(334)]={_value:n[i(656)](t[i(334)][i(282)],s[i(546)],1),_spread:n[i(656)](t[i(334)][i(351)],s[i(546)],0),_randomise:n[i(366)](t[i(415)][i(591)],s[i(597)],!1)},this[i(457)]={_value:n[i(656)](t[i(457)][i(282)],s[i(546)],1),_spread:n.ensureArrayTypedArg(t[i(457)].spread,s[i(546)],0),_randomise:n[i(366)](t.position.randomise,s.BOOLEAN,!1)},this.angle={_value:n[i(656)](t[i(671)][i(282)],s[i(546)],0),_spread:n[i(656)](t.angle[i(351)],s[i(546)],0),_randomise:n[i(366)](t[i(415)].randomise,s[i(597)],!1)},this[i(269)]=n.ensureTypedArg(t[i(269)],s[i(546)],100),this[i(475)]=n.ensureTypedArg(t.duration,s[i(546)],null),this.isStatic=n.ensureTypedArg(t.isStatic,s[i(597)],!1),this.activeMultiplier=n[i(366)](t[i(314)],s.NUMBER,1),this.direction=n.ensureTypedArg(t[i(511)],s[i(546)],1),this.alive=n[i(366)](t[i(676)],s[i(597)],!0),this[i(465)]=0,this[i(398)]=0,this[i(371)]=0,this.attributeEnd=0,this[i(506)]=0,this.activeParticleCount=0,this[i(683)]=null,this[i(670)]=null,this[i(502)]=null,this.resetFlags={position:n[i(366)](t[i(415)][i(591)],s.BOOLEAN,!1)||n[i(366)](t.radius[i(591)],s[i(597)],!1),velocity:n[i(366)](t[i(249)][i(591)],s[i(597)],!1),acceleration:n[i(366)](t[i(279)][i(591)],s[i(597)],!1)||n[i(366)](t[i(307)][i(591)],s[i(597)],!1),rotation:n[i(366)](t.rotation[i(591)],s[i(597)],!1),rotationCenter:n[i(366)](t.rotation[i(591)],s[i(597)],!1),size:n[i(366)](t[i(457)][i(591)],s[i(597)],!1),color:n.ensureTypedArg(t[i(399)][i(591)],s[i(597)],!1),opacity:n.ensureTypedArg(t.opacity[i(591)],s[i(597)],!1),angle:n[i(366)](t.angle[i(591)],s[i(597)],!1)},this[i(280)]={},this[i(359)]={},this[i(324)]={maxAge:"params",position:i(415),velocity:i(249),acceleration:i(279),drag:"acceleration",wiggle:i(529),rotation:i(430),size:"size",color:i(399),opacity:i(334),angle:i(671)};for(const e in this[i(324)])this.updateMap[i(619)](e)&&(this.updateCounts[this[i(324)][e]]=0,this[i(280)][this.updateMap[e]]=!1,this[i(390)](this[e],e));this.bufferUpdateRanges={},this[i(436)]=null,this[i(429)]=0,n[i(592)](this.color,r,r),n.ensureValueOverLifetimeCompliance(this.opacity,r,r),n[i(592)](this.size,r,r),n[i(592)](this[i(671)],r,r)},p[c(243)].constructor=p[c(243)],p[c(243)].prototype[c(390)]=function(t,e){const i=c,n=this;for(const o in t)if(t[i(619)](o)){const s=o[i(648)]("_","");Object[i(383)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=h,s=n[o(324)][e],r=this[t],a=p[o(470)];t===o(577)?(n[o(280)][o(377)]=!0,n[o(359)][o(377)]=0):t===o(565)?n.resetFlags[s]=i:(n[o(280)][s]=!0,n[o(359)][s]=0),n[o(683)]._updateDefines(),this[t]=i,Array[o(330)](r)&&p.utils[o(592)](n[e],a,a)}}(o)})}},p[c(243)][c(347)][c(613)]=function(t){const e=c;this.attributeKeys=t,this[e(429)]=t[e(435)];for(let i=this[e(429)]-1;i>=0;--i)this[e(520)][t[i]]={min:Number[e(490)],max:Number[e(576)]}},p[c(243)].prototype[c(615)]=function(t){const e=c,i=this[e(269)];this.duration?this[e(465)]=i/(t<this[e(475)]?t:this.duration):this[e(465)]=i/t},p[c(243)][c(347)][c(270)]=function(t){const e=c;this[e(371)]=t,this[e(398)]=t,this[e(659)]=t+this.particleCount},p[c(243)][c(347)]._assignValue=function(t,e){const i=c;switch(t){case"position":this[i(437)](e);break;case i(249):case i(279):this._assignForceValue(e,t);break;case i(457):case"opacity":this[i(225)](e,t);break;case"angle":this[i(460)](e);break;case i(529):this._assignParamsValue(e);break;case i(430):this[i(658)](e);break;case i(399):this._assignColorValue(e)}},p.Emitter[c(347)][c(437)]=function(t){const e=c,i=p[e(327)],n=p[e(425)],o=this[e(415)],s=this.attributes[e(415)],r=o._value,a=o[e(388)];switch(o[e(286)]){case i.BOX:n[e(336)](s,t,r,a,o[e(535)]);break;case i.SPHERE:n.randomVector3OnSphere(s,t,r,o[e(233)],o[e(388)].x,o._radiusScale,o[e(535)].x,o[e(672)]||this[e(269)]);break;case i[e(646)]:n[e(291)](s,t,r,o[e(233)],o._spread.x,o[e(261)],o._spreadClamp.x);break;case i[e(618)]:n[e(687)](s,t,r,a)}},p[c(243)].prototype._assignForceValue=function(t,e){const i=c;let n,o,s,r,a,h=p.distributions,l=p[i(425)],u=this[e],f=u[i(685)],d=u[i(388)];switch(u[i(286)]){case h.BOX:l[i(336)](this[i(670)][e],t,f,d);break;case h[i(686)]:n=this[i(670)].position[i(340)][i(370)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l.randomDirectionVector3OnSphere(this[i(670)][e],t,o,s,r,this[i(415)][i(685)],u[i(685)].x,u[i(388)].x);break;case h[i(646)]:n=this[i(670)].position[i(340)][i(370)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(567)](this[i(670)][e],t,o,s,r,this.position._value,u._value.x,u[i(388)].x);break;case h.LINE:l[i(687)](this[i(670)][e],t,f,d)}if(e===i(279)){const e=l[i(584)](l[i(560)](this[i(307)][i(685)],this[i(307)][i(388)]),0,1);this.attributes[i(279)][i(340)].array[4*t+3]=e}},p.Emitter[c(347)][c(225)]=function(t,e){const i=c;let n,o=this[i(670)][e].typedArray,s=this[e],r=p.utils;r[i(431)](s[i(685)])&&r[i(431)](s._spread)?(n=Math.abs(r[i(560)](s[i(685)][0],s[i(388)][0])),o[i(367)](t,n,n,n,n)):o[i(367)](t,Math[i(455)](r.randomFloat(s._value[0],s._spread[0])),Math[i(455)](r[i(560)](s[i(685)][1],s._spread[1])),Math.abs(r[i(560)](s[i(685)][2],s[i(388)][2])),Math.abs(r.randomFloat(s[i(685)][3],s[i(388)][3])))},p[c(243)][c(347)][c(460)]=function(t){const e=c;let i,n=this.attributes[e(671)].typedArray,o=this[e(671)],s=p[e(425)];s[e(431)](o[e(685)])&&s[e(431)](o[e(388)])?(i=s[e(560)](o[e(685)][0],o[e(388)][0]),n[e(367)](t,i,i,i,i)):n[e(367)](t,s[e(560)](o._value[0],o[e(388)][0]),s.randomFloat(o[e(685)][1],o._spread[1]),s.randomFloat(o[e(685)][2],o._spread[2]),s[e(560)](o[e(685)][3],o._spread[3]))},p[c(243)][c(347)][c(691)]=function(t){const e=c;this.attributes[e(529)][e(340)][e(367)](t,this[e(562)]?1:0,0,Math[e(455)](p[e(425)][e(560)](this[e(386)][e(685)],this[e(386)]._spread)),p[e(425)][e(560)](this.wiggle[e(685)],this[e(338)][e(388)]))},p[c(243)].prototype._assignRotationValue=function(t){const e=c;this[e(670)][e(430)][e(340)][e(257)](t,p[e(425)][e(294)](this[e(430)][e(365)],this[e(430)][e(235)]),p[e(425)][e(560)](this[e(430)]._angle,this.rotation[e(421)]),this[e(430)][e(290)]?0:1),this.attributes[e(377)].typedArray[e(571)](t,this[e(430)][e(303)])},p.Emitter[c(347)][c(653)]=function(t){const e=c;p[e(425)][e(682)](this.attributes[e(399)],t,this[e(399)][e(685)],this[e(399)][e(388)])},p[c(243)][c(347)][c(563)]=function(t){const e=c;let i,n,o=this[e(614)],s=this[e(280)],r=this[e(359)],a=this[e(436)];for(let c=this[e(429)]-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this[e(278)](i,t),this[e(601)](i,t),!0===n&&r[i]===this[e(269)]?(s[i]=!1,r[i]=0):1==n&&++r[i])},p[c(243)].prototype[c(601)]=function(t,e){const i=c,n=this[i(520)][t];n[i(445)]=Math[i(445)](e,n[i(445)]),n[i(677)]=Math[i(677)](e,n[i(677)])},p[c(243)][c(347)]._resetBufferRanges=function(){const t=c;let e,i=this[t(520)],n=this[t(526)],o=this[t(323)]-1;for(;o>=0;--o)e=n[o],i[e][t(445)]=Number[t(490)],i[e][t(677)]=Number[t(576)]},p[c(243)].prototype[c(245)]=function(){const t=c;this[t(465)]=0,this[t(371)]=0,this.activationIndex=0,this[t(510)]=0,this[t(683)]=null,this[t(670)]=null,this[t(502)]=null,this[t(506)]=0},p[c(243)][c(347)][c(462)]=function(){--this[c(510)]},p[c(243)][c(347)]._incrementParticleCount=function(){++this.activeParticleCount},p[c(243)][c(347)][c(468)]=function(t,e,i,n){const o=c;for(var s,r,a,h,l=e-1;l>=t;--l)0!==(h=i[s=4*l])&&(a=i[s+1],r=i[s+2],1===this.direction?(a+=n)>=r&&(a=0,h=0,this[o(462)]()):(a-=n)<=0&&(a=r,h=0,this[o(462)]()),i[s]=h,i[s+1]=a,this[o(601)]("params",l))},p.Emitter[c(347)]._activateParticles=function(t,e,i,n){const o=c,s=this.direction;for(var r,a,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[o(269)]||(this[o(277)](),i[r]=1,this[o(563)](h),a=n*(h-t),i[r+1]=-1===s?i[r+2]-a:a,this._updateAttributeUpdateRange("params",h))},p[c(243)][c(347)][c(466)]=function(t){const e=c;if(this.isStatic)return;null===this[e(502)]&&(this.paramsArray=this[e(670)][e(529)][e(340)][e(370)]);const i=this[e(371)],n=i+this[e(269)],o=this[e(502)],s=this[e(465)]*this[e(314)]*t,r=this[e(398)];if(this[e(512)](),this[e(468)](i,n,o,t),!1===this[e(676)])return void(this[e(506)]=0);if(null!==this[e(475)]&&this.age>this.duration)return this[e(676)]=!1,void(this[e(506)]=0);const a=1===this[e(269)]?r:0|r,h=Math[e(445)](a+s,this.activationEnd),l=h-this[e(398)]|0,u=l>0?t/l:0;this[e(521)](a,h,o,u),this[e(398)]+=s,this.activationIndex>n&&(this.activationIndex=i),this[e(506)]+=t},p[c(243)][c(347)][c(539)]=function(t){const e=c;if(this[e(506)]=0,this.alive=!1,!0===t){const t=this[e(371)],o=t+this[e(269)],s=this[e(502)],r=this[e(670)][e(529)].bufferAttribute;for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r.updateRange[e(484)]=0,r[e(236)][e(524)]=-1,r[e(456)]=!0}return this},p.Emitter.prototype.enable=function(){return this[c(676)]=!0,this},p.Emitter.prototype[c(566)]=function(){return this[c(676)]=!1,this},p[c(243)][c(347)][c(417)]=function(){const t=c;return null!==this[t(683)]?this[t(683)][t(485)](this):console[t(332)](t(328)),this};const d=p;function g(t){function e(t){const i=h;if(typeof t===i(326))return function(t){}[i(244)](i(548))[i(402)](i(570));1!==(""+t/t)[i(435)]||t%20==0?function(){return!0}[i(244)](i(493)+i(628)).call("action"):function(){return!1}[i(244)]("debu"+i(628))[i(402)](i(674)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{d as _};

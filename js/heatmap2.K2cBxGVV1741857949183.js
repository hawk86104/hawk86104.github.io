import{P as t}from"./tweakpane.yDiyAAkA1741857949183.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.4fHiNYbx1741857949183.js";import{_ as r}from"./heatmap.js-fix.gAetXbNx1741857949183.js";import{a as i,_ as c,c3 as s}from"./three.Gi_-4zeu1741857949183.js";import{r as u}from"./utils.AP-HdWts1741857949183.js";import{d as a}from"./pinia.m-1lhBPB1741857949183.js";import{b as p,d as f,a2 as l,o as h,H as d,N as m,u as g,F as y,q as v,W as w,P as b,R as I,L as _,O as j,a3 as x,r as M,j as S,g as P,m as E}from"./@vue.NRI7TcgI1741857949183.js";import{c as D,d as Z,a as B}from"./three-mesh-bvh.dyGT1sWA1741857949183.js";import{_ as R}from"./@fesjs._GqZBaJ41741857949183.js";import"./@tresjs.8SAr0PX_1741857949183.js";import"./postprocessing.D5IzAGSN1741857949183.js";import"./@vueuse.PrSwDteH1741857949183.js";import"./three-custom-shader-material.5E9LrdfZ1741857949183.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741857949183.js";import"./@amap.QByc7Q7q1741857949183.js";import"./vue-router.vV-TPEpQ1741857949183.js";import"./lodash-es.pklfUAS51741857949183.js";import"./@qlin.yHhFDldE1741857949183.js";import"./@floating-ui.BPbuo5Gx1741857949183.js";import"./@juggle.7yjBMqoW1741857949183.js";!function(t,n){const e=z,o=O();for(;;)try{if(264570===parseInt(e(357))/1+-parseInt(e(332))/2*(-parseInt(e(385))/3)+parseInt(e(383))/4*(-parseInt(e(367))/5)+-parseInt(e(361))/6+parseInt(e(355))/7*(-parseInt(e(334))/8)+parseInt(e(337))/9+parseInt(e(354))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(381)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=z,n=new RegExp(t(338)),e=new RegExp(t(342),"i"),o=A(t(345));n[t(360)](o+t(366))&&e.test(o+t(370))?A():o("0")}))()}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(381)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function z(t,n){const e=O();return(z=function(t,n){return e[t-=329]})(t,n)}k(void 0,(function(){const t=z;let n;try{n=Function(t(362)+t(336)+");")()}catch(r){n=window}const e=n.console=n[t(340)]||{},o=[t(380),t(335),t(344),"error",t(349),t(365),t(347)];for(let i=0;i<o.length;i++){const n=k[t(356)][t(353)][t(343)](k),r=o[i],c=e[r]||n;n.__proto__=k[t(343)](k),n.toString=c[t(351)][t(343)](c),e[r]=n}}))();const F=(t,n)=>t[z(341)](n)+-10;function O(){const t=['{}.constructor("return this")( )',"2424843hvPwkd","function *\\( *\\)","height","console","getValueAt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","info","init","style","trace","length","exception","stateObject","toString","none","prototype","2296800NPdUjs","189UEemCP","constructor","147968vCWumB","randInt","_config","test","2606190demHxz","return (function() ","call","rgb(0,0,255)","table","chain","2098645JIvVCm","top","create","input","position","left","body","setData","debu","appendChild","width","counter","createElement","log","apply","gger","4mGdXrI","absolute","33qZqjLO","push","action","display","92356uWkePo","heatmap-canvas","10776bBJjgy","warn"];return(O=function(){return t})()}function A(t){function n(t){const e=z;if("string"==typeof t)return function(t){}[e(356)]("while (true) {}")[e(381)](e(378));1!==(""+t/t)[e(348)]||t%20==0?function(){return!0}[e(356)](e(375)+e(382))[e(363)](e(330)):function(){return!1}[e(356)](e(375)+e(382))[e(381)](e(350)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=$,o=C();for(;;)try{if(899557===-parseInt(e(301))/1*(-parseInt(e(284))/2)+-parseInt(e(287))/3+-parseInt(e(271))/4*(parseInt(e(297))/5)+parseInt(e(282))/6+parseInt(e(299))/7*(-parseInt(e(286))/8)+-parseInt(e(295))/9+parseInt(e(289))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(275)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function $(t,n){const e=C();return($=function(t,n){return e[t-=270]})(t,n)}!function(){W(this,(function(){const t=$,n=new RegExp(t(279)),e=new RegExp(t(270),"i"),o=L("init");n[t(292)](o+t(285))&&e[t(292)](o+t(283))?L():o("0")}))()}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function C(){const t=["length","616bfGPne","info","113WycqXf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8uldWub","error","log","while (true) {}","apply","console",'{}.constructor("return this")( )',"debu","function *\\( *\\)","action","bind","4630104gYUxjx","input","9182uNNyRB","chain","53632KyYWXe","4230711dPwKMP","gger","29777940BuXgKB","toString","constructor","test","return (function() ","value","11710341ciluUJ","stateObject","168415YMZSYY"];return(C=function(){return t})()}q(void 0,(function(){const t=$,n=function(){const t=$;let n;try{n=Function(t(293)+t(277)+");")()}catch(e){n=window}return n}(),e=n[t(276)]=n[t(276)]||{},o=[t(273),"warn",t(300),t(272),"exception","table","trace"];for(let r=0;r<o.length;r++){const n=q.constructor.prototype[t(281)](q),i=o[r],c=e[i]||n;n.__proto__=q.bind(q),n[t(290)]=c.toString.bind(c),e[i]=n}}))();const G=a("buildingsHeatmap",(()=>{const t=p(!1),n=p(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[$(294)]=n},setTemperature:function(t){n[$(294)]=t}}}));function L(t){function n(t){const e=$;if("string"==typeof t)return function(t){}.constructor(e(274))[e(275)]("counter");1!==(""+t/t)[e(298)]||t%20==0?function(){return!0}[e(291)](e(278)+e(288)).call(e(280)):function(){return!1}[e(291)]("debu"+e(288))[e(275)](e(296)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function X(){const t=["length","applyMatrix4","function *\\( *\\)","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","width","model","uniforms","7KAuXmI","3619660CgCFuB","counter","ShaderMaterial","console","gger","computeBoundsTree","BufferGeometry","rotation-x","36wUqGGL","action","exception","306lcwSTU",'{}.constructor("return this")( )',"value","city","normal","attributes","matrix","opacity","数值———：","apply","Texture","input","clone","setTemperature","canvas","stateObject","primitive","constructor","height","13016whMfXG","land","_config","setShowDiv","4858554oZFjuN","_renderer","bind","2174109OuMxDz","makeRotationX","children","while (true) {}","5186970PhvbYy","warn","geometry","info","__proto__","test","chain","852uzQqFD","string","DoubleSide","17835uymIKL","call","toString","object","Mesh","error","Matrix4","762hkmqIr","log","142lHkpre","debu","$patch","table"];return(X=function(){return t})()}const Y=V;!function(t,n){const e=V,o=X();for(;;)try{if(732402===-parseInt(e(254))/1*(parseInt(e(252))/2)+-parseInt(e(231))/3+parseInt(e(242))/4*(parseInt(e(245))/5)+parseInt(e(228))/6*(-parseInt(e(266))/7)+-parseInt(e(224))/8*(-parseInt(e(278))/9)+parseInt(e(235))/10+-parseInt(e(267))/11*(-parseInt(e(275))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(214)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){H(this,(function(){const t=V,n=new RegExp(t(260)),e=new RegExp(t(262),"i"),o=Q("init");n.test(o+t(241))&&e[t(240)](o+t(216))?Q():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(214)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();K(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function("return (function() "+t(206)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(270)]||{},o=[t(253),t(236),t(238),t(250),t(277),t(257),"trace"];for(let r=0;r<o.length;r++){const n=K[t(222)][t(261)][t(230)](K),i=o[r],c=e[i]||n;n[t(239)]=K[t(230)](K),n[t(247)]=c[t(247)].bind(c),e[i]=n}}))();const N=["object",Y(274)],T=[Y(248)];function V(t,n){const e=X();return(V=function(t,n){return e[t-=206]})(t,n)}const J=f({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=Y;(()=>{const t=V;c[t(273)][t(261)][t(272)]=D,c[t(273)].prototype.disposeBoundsTree=Z,c[t(249)][t(261)].raycast=B})();const e=t,o=((t=250,n=250,e=!0)=>{const o=z,i=document[o(379)](o(333));return i[o(346)][o(371)]=o(384),!e&&(i[o(346)][o(331)]=o(352)),i.style[o(368)]="0",i[o(346)][o(372)]="0",document[o(373)][o(376)](i),r[o(369)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(364),.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"}})})();((t,n)=>{const e=z;if(!n){let o=0;for(n=[];o<1e3;)n[e(329)]({x:i[e(358)](1,t[e(359)][e(377)]),y:i.randInt(1,t[e(359)][e(339)]),value:i.randInt(-10,36)}),o++}t[e(374)]({max:36,min:-10,data:n})})(o);const a=new(c[n(215)])(o[n(229)][n(219)]);a.needsUpdate=!0;const p=e[n(264)][n(208)].clone();delete p.geometry[n(210)][n(209)],delete p[n(237)][n(210)].uv;const f=p[n(237)][n(217)]()[n(259)](p[n(211)]),v=e[n(264)][n(225)][n(217)]();delete v.geometry[n(210)].normal;const w=v[n(237)].clone()[n(259)](v[n(211)]),b=s([f,w]);b.applyMatrix4((new(c[n(251)]))[n(232)](Math.PI/2)),u(b),b[n(272)]();const I=(t=>{const o=n;return new(c[o(269)])({vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t",uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:c[o(244)]})})(a),_=new(c[n(249)])(b,I);l((()=>{const t=n;e.opacity&&(I[t(265)].uOpacity[t(207)]=e[t(212)])}));const j=G(),x=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(226)][e(263)],y:(1-t.uv.y)*o[e(226)][e(223)]};console.log("数值：",t),console[e(253)](e(213),F(o,n)),j[e(218)](F(o,n))}},M=t=>{t&&j[n(256)]({showDiv:!0})},S=t=>{t&&j[n(227)](!1)};return(t,o)=>{const r=n;return h(),d(y,null,[m(r(221),{object:g(_),"rotation-x":-Math.PI/2,onPointerMove:x,onPointerEnter:M,onPointerLeave:S},null,40,N),m(r(221),{object:e[r(264)][r(264)][r(233)][0][r(217)]()},null,8,T)],64)}}});function Q(t){function n(t){const e=V;if(typeof t===e(243))return function(t){}[e(222)](e(234))[e(214)](e(268));1!==(""+t/t)[e(258)]||t%20==0?function(){return!0}[e(222)](e(255)+e(271))[e(246)](e(276)):function(){return!1}.constructor(e(255)+e(271))[e(214)](e(220)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const tt=R({__name:"dataDiv",setup(t){const n=G(),e=p({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return v((()=>{window.addEventListener("mousemove",o)})),w((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>b((h(),d("div",{class:"title",style:j(e.value)},"温度："+_(g(n).temperature)+"℃ ",5)),[[I,g(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),nt=ct;!function(t,n){const e=ct,o=rt();for(;;)try{if(176659===-parseInt(e(388))/1+-parseInt(e(395))/2*(parseInt(e(396))/3)+-parseInt(e(418))/4+-parseInt(e(423))/5+-parseInt(e(412))/6+-parseInt(e(406))/7*(parseInt(e(391))/8)+parseInt(e(387))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const et=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(394)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){et(this,(function(){const t=ct,n=new RegExp(t(402)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=st(t(414));n.test(o+t(407))&&e[t(411)](o+"input")?st():o("0")}))()}();const ot=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function rt(){const t=["toString","constructor","addBinding","call","length","function *\\( *\\)","return (function() ","string","stateObject","1687DDMVKf","chain","opacity","gger","table","test","321414ygZYxp","__proto__","init","console","builds","model","192968jJQcuF","action","透明度","heatmap2",'{}.constructor("return this")( )',"1016335ZPVNdS","warn","error","bind","info","counter","debu","9113994BaUjtN","242322KfQLmG","while (true) {}","exception","6176iHeExS","city","prototype","apply","10lHtWbv","61533GoafFe"];return(rt=function(){return t})()}ot(void 0,(function(){const t=ct,n=function(){const t=ct;let n;try{n=Function(t(403)+t(422)+");")()}catch(e){n=window}return n}(),e=n[t(415)]=n.console||{},o=["log",t(424),t(427),t(425),t(390),t(410),"trace"];for(let r=0;r<o[t(401)];r++){const n=ot[t(398)][t(393)][t(426)](ot),i=o[r],c=e[i]||n;n[t(413)]=ot[t(426)](ot),n.toString=c[t(397)][t(426)](c),e[i]=n}}))();const it=f({__name:nt(421),async setup(r){const i=nt;let c,s;const u=p(!1),a=([c,s]=x((()=>o())),c=await c,s(),c);u.value=!0;const f=M({width:1,color:"#000",opacity:1,show:!0}),l=M({opacity:.9});return new t({title:"参数",expanded:!0})[i(399)](l,i(408),{label:i(420),min:0,max:1,step:.1}),(t,o)=>{const r=i;return h(),d(y,null,[S(e,{showBuildings:!1,autoRotate:!1},{ability:P((()=>[S(J,E({model:g(a)},l),null,16,[r(417)]),S(n,E(f,{builds:g(a)[r(392)]}),null,16,[r(416)])])),_:1}),S(tt)],64)}}});function ct(t,n){const e=rt();return(ct=function(t,n){return e[t-=385]})(t,n)}function st(t){function n(t){const e=ct;if(typeof t===e(404))return function(t){}[e(398)](e(389))[e(394)](e(385));1!==(""+t/t).length||t%20==0?function(){return!0}[e(398)](e(386)+e(409))[e(400)](e(419)):function(){return!1}[e(398)](e(386)+e(409))[e(394)](e(405)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{it as default};

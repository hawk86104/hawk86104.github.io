var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.4rFtp8dA1726800306729.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.qXM6Ukeg1726800306729.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.0hxSG2Ig1726800306729.js";import{k as o,U as s,C as l,m as c,W as p,bb as u,h as f,_ as x,A as v,Q as m,V as w}from"./three.ZddO3ejJ1726800306729.js";import{p as h,U as g}from"./@tresjs.pv1MNfNv1726800306729.js";import{u as d}from"./index.nd3onaEF1726800306729.js";import{F as y,C as S}from"./three-stdlib.nCzhm4Z61726800306729.js";import{d as P}from"./@vue.bvMz0l_u1726800306729.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.H4-Hzc491726800306729.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.BN41Zc631726800306729.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.drNSl0Ds1726800306729.js";const _=b;!function(t,e){const n=b,i=E();for(;;)try{if(613283===-parseInt(n(132))/1+-parseInt(n(143))/2+parseInt(n(158))/3+-parseInt(n(134))/4*(parseInt(n(155))/5)+parseInt(n(131))/6*(parseInt(n(138))/7)+-parseInt(n(139))/8*(parseInt(n(147))/9)+parseInt(n(145))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function b(t,e){const n=E();return(b=function(t,e){return n[t-=126]})(t,e)}!function(){z(this,(function(){const t=b,e=new RegExp(t(151)),n=new RegExp(t(148),"i"),i=A(t(135));e[t(133)](i+t(141))&&n.test(i+"input")?A():i("0")}))()}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[b(128)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function E(){const t=["length","__proto__","apply","debu","stateObject","24vxrDNe","92484UYdsts","test","4KDAKYm","init","call","info","2105880soHtPq","8gZHZPo","exception","chain","gger","2166844eZwajJ","action","17183820UFMRhy","warn","10360611dXgXoH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"while (true) {}","function *\\( *\\)","console","bind","constructor","5308625qzBmaw","return (function() ","error","3241053FYQmzw","table","toString"];return(E=function(){return t})()}I(void 0,(function(){const t=b;let e;try{e=Function(t(156)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(152)]=e[t(152)]||{},i=["log",t(146),t(137),t(157),t(140),t(159),"trace"];for(let a=0;a<i.length;a++){const e=I.constructor.prototype[t(153)](I),r=i[a],o=n[r]||e;e[t(127)]=I[t(153)](I),e[t(160)]=o[t(160)].bind(o),n[r]=e}}))();const M=_(149);function A(t){function e(t){const n=b;if("string"==typeof t)return function(t){}.constructor(n(150)).apply("counter");1!==(""+t/t)[n(126)]||t%20==0?function(){return!0}[n(154)](n(129)+n(142))[n(136)](n(144)):function(){return!1}[n(154)](n(129)+n(142)).apply(n(130)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=O;!function(t,e){const n=O,i=U();for(;;)try{if(742001===-parseInt(n(295))/1+-parseInt(n(282))/2*(-parseInt(n(301))/3)+parseInt(n(307))/4+-parseInt(n(286))/5+-parseInt(n(296))/6*(-parseInt(n(289))/7)+parseInt(n(299))/8+-parseInt(n(302))/9)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[O(305)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function U(){const t=["length","debu","defines","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","table","init","function *\\( *\\)","toString","constructor",'{}.constructor("return this")( )',"console","prototype","clone","stateObject","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","601186bvKJnb","bind","input","while (true) {}","4450935wsnWXo","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","counter","21jDNUid","string","__proto__","test","uniforms","chain","643285BVCzRZ","273990DMRjhs","call","error","11746736mgdlIv","exception","6uzDphy","10825866bFaseW","gger","log","apply","action","5087296RfCVUB"];return(U=function(){return t})()}function O(t,e){const n=U();return(O=function(t,e){return n[t-=280]})(t,e)}!function(){L(this,(function(){const t=O,e=new RegExp(t(315)),n=new RegExp(t(311),"i"),i=R(t(314));e[t(292)](i+t(294))&&n[t(292)](i+t(284))?R():i("0")}))()}();const T=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function j(t){const e=O,n=a({},t);return e(310)in t&&(n[e(310)]=a({},t[e(310)])),e(293)in t&&(n[e(293)]=s[e(321)](t[e(293)])),n}T(void 0,(function(){const t=O,e=function(){const t=O;let e;try{e=Function("return (function() "+t(318)+");")()}catch(n){e=window}return e}(),n=e[t(319)]=e[t(319)]||{},i=[t(304),t(312),"info",t(298),t(300),t(313),"trace"];for(let r=0;r<i[t(308)];r++){const e=T[t(317)][t(320)][t(283)](T),a=i[r],o=n[a]||e;e[t(291)]=T[t(283)](T),e.toString=o[t(316)].bind(o),n[a]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:D(281),fragmentShader:"\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t"+M+D(287)};function R(t){function e(t){const n=O;if(typeof t===n(290))return function(t){}[n(317)](n(285))[n(305)](n(288));1!==(""+t/t)[n(308)]||t%20==0?function(){return!0}[n(317)]("debu"+n(303))[n(297)](n(306)):function(){return!1}.constructor(n(309)+n(303))[n(305)](n(280)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=k;function N(){const t=["setClearAlpha","tDiffuse","replace","_copyQuad","parentMapSize","83464ZwlKvP","7452102xGFNDR","isWebGLRenderTarget","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","camera","floorPowerOfTwo","map","render","clear","width","image",'{}.constructor("return this")( )',"texture","7TCeTGO","material","while (true) {}","setRenderTarget","setViewOffset","magFilter","return (function() ","string","getRenderTarget","height","dispose","minFilter","5dbTJAq","5918ggirXe","copy","_mipQuad","apply","_mipMaterials","uniforms","parentLevel","setSize","bind","X_IS_EVEN","gger","log","debu","fragmentShader","defines","__proto__","2242905aEiOQm","constructor","prototype","floor","2RTuopW","length","error","toString","value","test","1374239evRixH","input","trace","setClearColor","6187144iOjCGH","counter","Y_IS_EVEN","set","chain","getClearAlpha","originalMapSize","7024950gEzobn","update","stateObject","getClearColor","autoClear","66590aUEFxD","init","function *\\( *\\)","warn"];return(N=function(){return t})()}!function(t,e){const n=k,i=N();for(;;)try{if(974454===-parseInt(n(233))/1*(parseInt(n(227))/2)+-parseInt(n(223))/3+parseInt(n(237))/4+-parseInt(n(206))/5*(parseInt(n(259))/6)+parseInt(n(194))/7*(-parseInt(n(258))/8)+-parseInt(n(244))/9+-parseInt(n(249))/10*(-parseInt(n(207))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[k(210)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){C(this,(function(){const t=k,e=new RegExp(t(251)),n=new RegExp(t(261),"i"),i=Q(t(250));e[t(232)](i+t(241))&&n.test(i+t(234))?Q():i("0")}))()}();const H=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[k(210)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function k(t,e){const n=N();return(k=function(t,e){return n[t-=187]})(t,e)}H(void 0,(function(){const t=k;let e;try{e=Function(t(200)+t(192)+");")()}catch(r){e=window}const n=e.console=e.console||{},i=[t(218),t(252),"info",t(229),"exception","table",t(235)];for(let a=0;a<i[t(228)];a++){const e=H[t(224)][t(225)][t(215)](H),r=i[a],o=n[r]||e;e[t(222)]=H[t(215)](H),e[t(230)]=o[t(230)][t(215)](o),n[r]=e}}))();const Z=new l;class F{constructor(t){const e=k;!t&&(t="\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t");const n=j(V);n[e(220)]=n[e(220)][e(255)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(j(n)),i[0][e(221)][e(216)]=0,i[0][e(221)][e(239)]=0,i[1]=new c(j(n)),i[1][e(221)][e(216)]=1,i[1][e(221)][e(239)]=0,i[2]=new c(j(n)),i[2][e(221)][e(216)]=0,i[2][e(221)][e(239)]=1,i[3]=new c(j(n)),i[3][e(221)][e(216)]=1,i[3].defines[e(239)]=1;const r=new p;r[e(193)][e(205)]=u,r[e(193)][e(199)]=u,this._swapTarget=r,this._copyQuad=new y(new c(S)),this[e(209)]=new y(null),this[e(211)]=i}[W(245)](t,e,n,i=!1){const r=W;t[r(260)]&&(t=t.texture);const o=n[r(248)],s=n[r(242)](),l=n[r(202)]();n[r(247)](Z);const c=this[r(256)],p=this[r(209)],u=this._swapTarget,x=this._mipMaterials;let v,m;i?(v=f[r(263)](t[r(191)].width),m=f[r(263)](t[r(191)][r(203)])):(v=Math[r(226)](t[r(191)][r(190)]),m=Math[r(226)](t[r(191)][r(203)]));const w=Math[r(226)](1.5*v),h=Math[r(226)](m);e[r(214)](w,h),u[r(193)].type!==e[r(193)].type?(u.dispose(),u[r(208)](e),u[r(193)][r(191)]=a({},u[r(193)][r(191)])):u[r(214)](w,h),n[r(248)]=!1,n[r(236)](0),n[r(253)](),c[r(195)][r(212)][r(254)][r(231)]=t,c[r(262)].setViewOffset(v,m,0,0,w,h),n[r(197)](e),n[r(189)](),c.render(n),n.setRenderTarget(u),n[r(189)](),c[r(188)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(212)][r(187)][r(231)]=u[r(193)],t[r(212)][r(213)][r(231)]=y,t.uniforms[r(257)][r(231)][r(240)](g,d),t[r(212)][r(243)].value[r(240)](v,m),p[r(195)]=t,g=Math[r(226)](g/2),d=Math[r(226)](d/2);const i=h-2*d;n.setRenderTarget(e),p[r(262)][r(198)](g,d,-v,-i,w,h),p[r(188)](n),n[r(197)](u),t[r(212)][r(187)].value=e[r(193)],p.render(n),y++}return n[r(197)](l),n[r(253)](s),n[r(236)](Z),n[r(248)]=o,y+1}[W(204)](){const t=W;this._swapTarget.dispose(),this[t(209)].dispose(),this._copyQuad[t(204)](),this[t(211)].forEach((e=>e[t(204)]()))}}function Q(t){function e(t){const n=k;if(typeof t===n(201))return function(t){}[n(224)](n(196))[n(210)](n(238));1!==(""+t/t)[n(228)]||t%20==0?function(){return!0}[n(224)](n(219)+"gger").call("action"):function(){return!1}[n(224)](n(219)+n(217)).apply(n(246)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=$,i=Y();for(;;)try{if(921444===parseInt(n(178))/1*(-parseInt(n(236))/2)+-parseInt(n(171))/3*(-parseInt(n(204))/4)+parseInt(n(166))/5*(-parseInt(n(190))/6)+parseInt(n(188))/7*(-parseInt(n(183))/8)+parseInt(n(164))/9*(-parseInt(n(214))/10)+parseInt(n(163))/11*(-parseInt(n(168))/12)+-parseInt(n(189))/13*(-parseInt(n(193))/14))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const X=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(197)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Y(){const t=["1837864WmVAPf","applyQuaternion","lookAt","table","PerspectiveCamera","7dEHXVe","2290301hItoMf","73374gYScvZ","sign","error","364OrPJEj","function *\\( *\\)","forEach","call","apply","buffers","console","parent","length","bind","while (true) {}","10732SQNNNO","trace","add","depth","multiply","position","applyMatrix4","sub","getWorldPosition","getRenderTarget","10daeWCm","log","input","value","update",'{}.constructor("return this")( )',"projectPoint","gger","constant","return (function() ","setRenderTarget","chain","multiplyScalar","copy","clone","counter","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Matrix4","state","resolution","visible","2EeVXYy","matrixWorld","elements","info","Quaternion","warn","55kzdEOR","11017773zBSgYv","constructor","305neJLjO","normal","2006124nPuDEc","Plane","Vector4","99aQBUmA","render","reflect","updateMatrixWorld","toString","exception","ignoreObjects","711913HMOntG","string","projectionMatrix","autoClear","Vector3"];return(Y=function(){return t})()}!function(){X(this,(function(){const t=$,e=new RegExp(t(194)),n=new RegExp(t(231),"i"),i=J("init");e.test(i+t(225))&&n.test(i+t(216))?J():i("0")}))()}();const G=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(197)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function $(t,e){const n=Y();return($=function(t,e){return n[t-=159]})(t,e)}G(void 0,(function(){const t=$;let e;try{e=Function(t(223)+t(219)+");")()}catch(r){e=window}const n=e.console=e[t(199)]||{},i=[t(215),t(162),t(160),t(192),t(176),t(186),t(205)];for(let a=0;a<i[t(201)];a++){const e=G[t(165)].prototype[t(202)](G),r=i[a],o=n[r]||e;e.__proto__=G.bind(G),e[t(175)]=o[t(175)].bind(o),n[r]=e}}))();const B=P({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=$,i=t,r=new(x[n(169)]),a=new(x[n(232)]),o=new(x[n(187)]),s=new F,l=d({width:i[n(234)],height:i[n(234)],settings:{type:v}}),c=d({width:i.resolution,height:i.resolution,settings:{type:v}}),{camera:p,renderer:u,scene:f}=h(),{onBeforeLoop:y}=g();return y((()=>{const t=n;(()=>{const t=n;if(!p[t(217)])return;r.set(new(x[t(182)])(0,1,0),0),r[t(210)](i[t(200)][t(237)]),o[t(227)](p[t(217)]);const e=new(x[t(182)])(0,0,1)[t(228)]().negate(),s=p.value[t(212)](new(x[t(182)]));e[t(173)](r[t(167)]);const c=new(x[t(182)]);r[t(220)](s,c);const v=c[t(228)]();v[t(211)](s),v.add(c),o[t(209)].copy(v);const h=new(x[t(182)])(0,0,-1);h[t(184)](p[t(217)].getWorldQuaternion(new m)),h[t(206)](s);const g=new(x[t(182)]);i.parent.getWorldPosition(g),g.sub(h),g[t(173)](r.normal).negate(),g[t(206)](i[t(200)][t(212)](new w)),o.up.set(0,1,0),o[t(184)](p[t(217)].getWorldQuaternion(new(x[t(161)]))),o.up[t(173)](r.normal),o[t(185)](g),o[t(174)]();const d=new(x[t(232)]);d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d[t(208)](o[t(180)]),d[t(208)](o.matrixWorldInverse),a.copy(d),r[t(210)](o.matrixWorldInverse);const y=new(x[t(170)])(r.normal.x,r[t(167)].y,r[t(167)].z,r[t(222)]),S=o.projectionMatrix,P=new(x[t(170)]);P.x=(Math[t(191)](y.x)+S.elements[8])/S[t(159)][0],P.y=(Math[t(191)](y.y)+S[t(159)][9])/S[t(159)][5],P.z=-1,P.w=(1+S[t(159)][10])/S.elements[14],y[t(226)](2/y.dot(P)),S[t(159)][2]=y.x,S[t(159)][6]=y.y,S[t(159)][10]=y.z+1,S[t(159)][14]=y.w;const _=u[t(217)][t(213)]();u.value[t(224)](l[t(217)]),u[t(217)][t(233)][t(198)][t(207)].setMask(!0),!1===u.value[t(181)]&&u[t(217)].clear(),i[t(177)][t(195)]((e=>e[t(235)]=!1)),u.value[t(172)](f[t(217)],o),i[t(177)].forEach((t=>t.visible=!0)),u.value[t(224)](_)})(),l[t(217)]&&c[t(217)]&&u[t(217)]&&s[t(218)](l[t(217)].texture,c.value,u[t(217)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function J(t){function e(t){const n=$;if(typeof t===n(179))return function(t){}.constructor(n(203))[n(197)](n(229));1!==(""+t/t)[n(201)]||t%20==0?function(){return!0}.constructor("debugger")[n(196)](n(230)):function(){return!1}[n(165)]("debu"+n(221))[n(197)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,i=et();;)try{if(965393===parseInt(n(350))/1*(parseInt(n(355))/2)+-parseInt(n(338))/3*(-parseInt(n(364))/4)+parseInt(n(346))/5+-parseInt(n(351))/6*(parseInt(n(353))/7)+parseInt(n(367))/8*(parseInt(n(356))/9)+parseInt(n(361))/10+-parseInt(n(345))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var K=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(354)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){K(this,(function(){var t=tt,e=new RegExp(t(340)),n=new RegExp(t(348),"i"),i=nt(t(343));e[t(368)](i+"chain")&&n[t(368)](i+t(342))?nt():i("0")}))()}();var q=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(354)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function tt(t,e){var n=et();return(tt=function(t,e){return n[t-=338]})(t,e)}function et(){var t=["warn","14NvqCfO","apply","6mJNKNS","42651NApbij","error","bind","counter","while (true) {}","17803180rfpuHo","trace","toString","7423268ZRZGWb","prototype",'{}.constructor("return this")( )',"792QdXCSP","test","__proto__","return (function() ","3WEeEem","string","function *\\( *\\)","console","input","init","constructor","48837338iWnZKB","5194985TFRBdH","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","571034FTKbkx","4356732TYldqJ"];return(et=function(){return t})()}function nt(t){function e(t){var n=tt;if(typeof t===n(339))return function(t){}[n(344)](n(360))[n(354)](n(359));1!==(""+t/t)[n(347)]||t%20==0?function(){return!0}[n(344)]("debu"+n(349)).call("action"):function(){return!1}[n(344)]("debu"+n(349)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}q(void 0,(function(){for(var t=tt,e=function(){var t,e=tt;try{t=Function(e(370)+e(366)+");")()}catch(n){t=window}return t}(),n=e[t(341)]=e.console||{},i=["log",t(352),"info",t(357),"exception","table",t(362)],r=0;r<i[t(347)];r++){var a=q[t(344)][t(365)][t(358)](q),o=i[r],s=n[o]||a;a[t(369)]=q[t(358)](q),a.toString=s[t(363)][t(358)](s),n[o]=a}}))();export{B as _};

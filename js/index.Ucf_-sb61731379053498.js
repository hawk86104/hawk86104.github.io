var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.o2GIoNt01731379053498.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ReP7gSZv1731379053498.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ZMwPhBba1731379053498.js";import{k as o,U as s,C as l,m as c,W as u,bc as p,h as f,_ as x,V as v,as as m}from"./three.bXjbKLxC1731379053498.js";import{m as h,e as w}from"./@tresjs.bLKO3xyw1731379053498.js";import{u as g}from"./index.Xkk8JFHs1731379053498.js";import{F as y,C as d}from"./three-stdlib.yR_asc1t1731379053498.js";import{d as S}from"./@vue.-THQH3GC1731379053498.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ell-9NYR1731379053498.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.UAy2RrDQ1731379053498.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.tUlFQVQ01731379053498.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.SGt_M3hD1731379053498.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Q8MdI5wY1731379053498.js";const _=b;function P(){const t=["toString","length","chain","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","while (true) {}","error","243cgiWDB","__proto__","2255708ykgPHe","1456075XQPMVH","5906cUbNrz","6mOqsOh","prototype","11842450RsTgvZ","704968WSApld","call","table","test","944432qtCNVv","bind","string","action","apply",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"trace","9jASfoz","stateObject","debu","1570009FqlyNl",'{}.constructor("return this")( )',"console","warn"];return(P=function(){return t})()}!function(t,e){const n=b,i=P();for(;;)try{if(374969===parseInt(n(486))/1+-parseInt(n(482))/2*(-parseInt(n(512))/3)+parseInt(n(514))/4+-parseInt(n(481))/5+parseInt(n(483))/6*(parseInt(n(500))/7)+parseInt(n(490))/8+-parseInt(n(497))/9*(parseInt(n(485))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function b(t,e){const n=P();return(b=function(t,e){return n[t-=481]})(t,e)}!function(){z(this,(function(){const t=b,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(508),"i"),i=E("init");e.test(i+t(506))&&n[t(489)](i+"input")?E():i("0")}))()}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[b(494)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();I(void 0,(function(){const t=b,e=function(){const t=b;let e;try{e=Function("return (function() "+t(501)+");")()}catch(n){e=window}return e}(),n=e[t(502)]=e.console||{},i=[t(509),t(503),"info",t(511),"exception",t(488),t(496)];for(let r=0;r<i[t(505)];r++){const e=I[t(507)][t(484)][t(491)](I),a=i[r],o=n[a]||e;e[t(513)]=I.bind(I),e[t(504)]=o[t(504)].bind(o),n[a]=e}}))();const M=_(495);function E(t){function e(t){const n=b;if(typeof t===n(492))return function(t){}[n(507)](n(510))[n(494)]("counter");1!==(""+t/t)[n(505)]||t%20==0?function(){return!0}[n(507)](n(499)+"gger")[n(487)](n(493)):function(){return!1}[n(507)]("debugger")[n(494)](n(498)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const A=U;!function(t,e){const n=U,i=O();for(;;)try{if(397464===-parseInt(n(294))/1+parseInt(n(299))/2*(parseInt(n(292))/3)+-parseInt(n(284))/4+-parseInt(n(319))/5+parseInt(n(312))/6+parseInt(n(300))/7+parseInt(n(302))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[U(310)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){L(this,(function(){const t=U,e=new RegExp(t(304)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=j(t(317));e[t(301)](i+t(285))&&n[t(301)](i+t(313))?j():i("0")}))()}();const D=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[U(310)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function U(t,e){const n=O();return(U=function(t,e){return n[t-=284]})(t,e)}function O(){const t=["console","uniforms","stateObject","gger","clone","apply","error","3156882CIEHcm","input","bind","warn","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","init","string","2232475yKMWDa","2550964aAXAhu","chain","action","trace","debu","toString","counter","exception","531tQnImK","prototype","524496QmPxRM","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","defines","constructor","table","530KbQrFQ","1868307SFycni","test","9329944ZmekJd","return (function() ","function *\\( *\\)"];return(O=function(){return t})()}function T(t){const e=U,n=a({},t);return e(296)in t&&(n[e(296)]=a({},t[e(296)])),e(306)in t&&(n[e(306)]=s[e(309)](t.uniforms)),n}D(void 0,(function(){const t=U;let e;try{e=Function(t(303)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(305)]=e[t(305)]||{},i=["log",t(315),"info",t(311),t(291),t(298),t(287)];for(let a=0;a<i.length;a++){const e=D[t(297)][t(293)][t(314)](D),r=i[a],o=n[r]||e;e.__proto__=D[t(314)](D),e.toString=o[t(289)].bind(o),n[r]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:A(316),fragmentShader:A(295)+M+"\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t"};function j(t){function e(t){const n=U;if(typeof t===n(318))return function(t){}.constructor("while (true) {}")[n(310)](n(290));1!==(""+t/t).length||t%20==0?function(){return!0}[n(297)](n(288)+n(308)).call(n(286)):function(){return!1}[n(297)](n(288)+n(308))[n(310)](n(307)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const R=W;!function(t,e){const n=W,i=k();for(;;)try{if(982654===parseInt(n(204))/1*(-parseInt(n(197))/2)+-parseInt(n(169))/3*(parseInt(n(188))/4)+-parseInt(n(202))/5*(-parseInt(n(211))/6)+-parseInt(n(164))/7+parseInt(n(223))/8*(-parseInt(n(187))/9)+-parseInt(n(198))/10+parseInt(n(166))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[W(165)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function k(){const t=["input","dispose","render","console","originalMapSize","parentMapSize","gger","minFilter","clear","3447333nlRgIN","484916ujzhDn","action","while (true) {}","return (function() ","_mipQuad","length","string","getClearColor","defines","91090OmZMLO","1673230eLypbw","parentLevel","Y_IS_EVEN","magFilter","5WLeTim","material","38bDczKU","isWebGLRenderTarget","camera","stateObject","exception","type","setSize","8938938CcJDhU","value","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","tDiffuse","toString","setRenderTarget","function *\\( *\\)","warn","_mipMaterials","_swapTarget","copy","height","32lscuiF","test","counter","texture","map","floorPowerOfTwo","setClearAlpha","X_IS_EVEN","width","replace",'{}.constructor("return this")( )',"setViewOffset","log","image","_copyQuad","table","forEach","uniforms","info","fragmentShader","init","setClearColor","__proto__","constructor","12481749vyeYTZ","apply","54434347jiSfwC","floor","trace","6tyHfbm","error","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","set","autoClear","chain","bind"];return(k=function(){return t})()}!function(){C(this,(function(){const t=W,e=new RegExp(t(217)),n=new RegExp(t(172),"i"),i=Z(t(160));e[t(224)](i+t(176))&&n.test(i+t(178))?Z():i("0")}))()}();const N=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[W(165)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function W(t,e){const n=k();return(W=function(t,e){return n[t-=155]})(t,e)}N(void 0,(function(){const t=W,e=function(){const t=W;let e;try{e=Function(t(191)+t(233)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(181)]||{},i=[t(235),t(218),t(158),t(170),t(208),t(155),t(168)];for(let r=0;r<i[t(193)];r++){const e=N[t(163)][t(173)][t(177)](N),a=i[r],o=n[a]||e;e[t(162)]=N[t(177)](N),e[t(215)]=o[t(215)][t(177)](o),n[a]=e}}))();const H=new l;class F{constructor(t){const e=W;!t&&(t=e(213));const n=T(V);n[e(159)]=n[e(159)][e(232)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(T(n)),i[0][e(196)][e(230)]=0,i[0].defines[e(200)]=0,i[1]=new c(T(n)),i[1][e(196)][e(230)]=1,i[1][e(196)].Y_IS_EVEN=0,i[2]=new c(T(n)),i[2][e(196)].X_IS_EVEN=0,i[2].defines[e(200)]=1,i[3]=new c(T(n)),i[3][e(196)][e(230)]=1,i[3][e(196)][e(200)]=1;const r=new u;r[e(226)][e(185)]=p,r.texture[e(201)]=p,this._swapTarget=r,this[e(237)]=new y(new c(d)),this[e(192)]=new y(null),this[e(219)]=i}update(t,e,n,i=!1){const r=W;t[r(205)]&&(t=t[r(226)]);const o=n.autoClear,s=n.getClearAlpha(),l=n.getRenderTarget();n[r(195)](H);const c=this[r(237)],u=this[r(192)],p=this[r(220)],x=this._mipMaterials;let v,m;i?(v=f.floorPowerOfTwo(t[r(236)][r(231)]),m=f[r(228)](t[r(236)][r(222)])):(v=Math[r(167)](t[r(236)][r(231)]),m=Math[r(167)](t[r(236)][r(222)]));const h=Math[r(167)](1.5*v),w=Math.floor(m);e[r(210)](h,w),p.texture[r(209)]!==e.texture[r(209)]?(p[r(179)](),p[r(221)](e),p.texture.image=a({},p[r(226)][r(236)])):p[r(210)](h,w),n[r(175)]=!1,n.setClearColor(0),n.setClearAlpha(),c[r(203)][r(157)][r(214)][r(212)]=t,c[r(206)][r(234)](v,m,0,0,h,w),n[r(216)](e),n[r(186)](),c.render(n),n[r(216)](p),n[r(186)](),c[r(180)](n);let g=v,y=m,d=0;for(;g>1&&y>1;){const t=x[(g%2==0?1:0)|(y%2==0?2:0)];t[r(157)].map[r(212)]=p[r(226)],t.uniforms[r(199)][r(212)]=d,t[r(157)][r(183)][r(212)][r(174)](g,y),t[r(157)][r(182)][r(212)][r(174)](v,m),u.material=t,g=Math[r(167)](g/2),y=Math[r(167)](y/2);const i=w-2*y;n.setRenderTarget(e),u[r(206)].setViewOffset(g,y,-v,-i,h,w),u[r(180)](n),n.setRenderTarget(p),t[r(157)][r(227)].value=e[r(226)],u[r(180)](n),d++}return n[r(216)](l),n[r(229)](s),n[r(161)](H),n.autoClear=o,d+1}[R(179)](){const t=R;this._swapTarget[t(179)](),this._mipQuad[t(179)](),this._copyQuad.dispose(),this[t(219)][t(156)]((e=>e[t(179)]()))}}function Z(t){function e(t){const n=W;if(typeof t===n(194))return function(t){}.constructor(n(190))[n(165)](n(225));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debugger").call(n(189)):function(){return!1}[n(163)](n(171)+n(184))[n(165)](n(207)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=G,i=$();for(;;)try{if(252946===parseInt(n(396))/1*(-parseInt(n(326))/2)+-parseInt(n(398))/3*(parseInt(n(378))/4)+parseInt(n(342))/5+-parseInt(n(338))/6+parseInt(n(386))/7+parseInt(n(379))/8+parseInt(n(394))/9*(-parseInt(n(367))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Q=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){Q(this,(function(){const t=G,e=new RegExp(t(347)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=K(t(353));e[t(332)](i+t(358))&&n[t(332)](i+t(380))?K():i("0")}))()}();const X=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function G(t,e){const n=$();return(G=function(t,e){return n[t-=318]})(t,e)}X(void 0,(function(){const t=G;let e;try{e=Function(t(352)+t(392)+");")()}catch(r){e=window}const n=e.console=e[t(343)]||{},i=[t(345),t(375),t(328),t(395),t(373),t(397),t(399)];for(let a=0;a<i[t(337)];a++){const e=X[t(321)].prototype[t(366)](X),r=i[a],o=n[r]||e;e[t(371)]=X[t(366)](X),e[t(329)]=o[t(329)][t(366)](o),n[r]=e}}))();const Y=S({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=G,i=t,r=new(x[n(349)]),a=new(x[n(357)]),o=new(x[n(330)]),s=new F,l=g({width:i.resolution,height:i.resolution,settings:{type:x[n(389)]}}),c=g({width:i[n(356)],height:i[n(356)],settings:{type:x[n(389)]}}),{camera:u,renderer:p,scene:f}=h(),{onBeforeLoop:y}=w();return y((()=>{const t=n;(()=>{const t=n;if(!u[t(335)])return;r[t(333)](new(x[t(388)])(0,1,0),0),r[t(340)](i[t(334)][t(336)]),o[t(372)](u[t(335)]);const e=new(x[t(388)])(0,0,1)[t(362)]()[t(382)](),s=u[t(335)][t(348)](new v);e[t(393)](r[t(322)]);const c=new(x[t(388)]);r[t(377)](s,c);const h=c[t(362)]();h[t(384)](s),h.add(c),o[t(383)][t(372)](h);const w=new v(0,0,-1);w[t(361)](u[t(335)].getWorldQuaternion(new(x[t(364)]))),w[t(350)](s);const g=new(x[t(388)]);i[t(334)][t(348)](g),g[t(384)](w),g[t(393)](r.normal)[t(382)](),g[t(350)](i[t(334)].getWorldPosition(new(x[t(388)]))),o.up.set(0,1,0),o[t(361)](u.value.getWorldQuaternion(new(x[t(364)]))),o.up[t(393)](r[t(322)]),o.lookAt(g),o[t(327)]();const y=new(x[t(357)]);y[t(333)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y[t(324)](o[t(351)]),y[t(324)](o[t(368)]),a[t(372)](y),r.applyMatrix4(o[t(368)]);const d=new m(r.normal.x,r[t(322)].y,r.normal.z,r[t(339)]),S=o[t(351)],_=new(x[t(341)]);_.x=(Math.sign(d.x)+S[t(319)][8])/S[t(319)][0],_.y=(Math[t(359)](d.y)+S.elements[9])/S[t(319)][5],_.z=-1,_.w=(1+S.elements[10])/S[t(319)][14],d.multiplyScalar(2/d[t(376)](_)),S[t(319)][2]=d.x,S.elements[6]=d.y,S.elements[10]=d.z+1,S[t(319)][14]=d.w;const P=p[t(335)][t(381)]();p[t(335)].setRenderTarget(l[t(335)]),p[t(335)][t(355)][t(360)][t(390)][t(363)](!0),!1===p[t(335)].autoClear&&p.value[t(325)](),i[t(323)][t(391)]((t=>t.visible=!1)),p[t(335)][t(365)](f[t(335)],o),i.ignoreObjects[t(391)]((e=>e[t(354)]=!0)),p[t(335)].setRenderTarget(P)})(),l[t(335)]&&c[t(335)]&&p[t(335)]&&s[t(344)](l[t(335)][t(385)],c.value,p[t(335)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function $(){const t=["ignoreObjects","multiply","clear","34fNMcjG","updateMatrixWorld","info","toString","PerspectiveCamera","action","test","set","parent","value","matrixWorld","length","270816RMoijh","constant","applyMatrix4","Vector4","1050605ySVRza","console","update","log","string","function *\\( *\\)","getWorldPosition","Plane","add","projectionMatrix","return (function() ","init","visible","state","resolution","Matrix4","chain","sign","buffers","applyQuaternion","clone","setMask","Quaternion","render","bind","24730ypnDOQ","matrixWorldInverse","counter","apply","__proto__","copy","exception","gger","warn","dot","projectPoint","304tEdSWX","1467272sYmcSL","input","getRenderTarget","negate","position","sub","texture","2920967yzqJZS","debu","Vector3","UnsignedByteType","depth","forEach",'{}.constructor("return this")( )',"reflect","234LbWVVY","error","14263AAyfbQ","table","8130kFJGab","trace","while (true) {}","elements","call","constructor","normal"];return($=function(){return t})()}function K(t){function e(t){const n=G;if(typeof t===n(346))return function(t){}[n(321)](n(318))[n(370)](n(369));1!==(""+t/t)[n(337)]||t%20==0?function(){return!0}[n(321)](n(387)+n(374))[n(320)](n(331)):function(){return!1}[n(321)](n(387)+n(374))[n(370)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}function q(t,e){var n=tt();return(q=function(t,e){return n[t-=407]})(t,e)}!function(t,e){for(var n=q,i=tt();;)try{if(522010===parseInt(n(431))/1+parseInt(n(423))/2+-parseInt(n(421))/3*(-parseInt(n(429))/4)+-parseInt(n(414))/5+-parseInt(n(407))/6*(-parseInt(n(434))/7)+parseInt(n(433))/8*(parseInt(n(435))/9)+-parseInt(n(420))/10*(parseInt(n(426))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var B=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[q(416)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){B(this,(function(){var t=q,e=new RegExp(t(441)),n=new RegExp(t(436),"i"),i=et("init");e[t(412)](i+"chain")&&n[t(412)](i+t(417))?et():i("0")}))()}();var J=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function tt(){var t=["action","gger","10788990KvZLrN","3nsCiVh","stateObject","1930742EMLxUV","counter","trace","22DgStOD","info","table","2447656EMLPEL","__proto__","465703UyhPqz","constructor","8csXbFc","7iypRUn","2413197PpffBX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","call","debu","exception","function *\\( *\\)","toString","4062918BHMTkf","console","length","prototype","while (true) {}","test","return (function() ","1542330iZpHnG","bind","apply","input"];return(tt=function(){return t})()}function et(t){function e(t){var n=q;if(typeof t===n(437))return function(t){}[n(432)](n(411))[n(416)](n(424));1!==(""+t/t)[n(409)]||t%20==0?function(){return!0}[n(432)](n(439)+n(419))[n(438)](n(418)):function(){return!1}[n(432)](n(439)+n(419))[n(416)](n(422)),e(++t)}try{if(t)return e;e(0)}catch(n){}}J(void 0,(function(){var t,e=q;try{t=Function(e(413)+'{}.constructor("return this")( ));')()}catch(l){t=window}for(var n=t[e(408)]=t[e(408)]||{},i=["log","warn",e(427),"error",e(440),e(428),e(425)],r=0;r<i[e(409)];r++){var a=J.constructor[e(410)][e(415)](J),o=i[r],s=n[o]||a;a[e(430)]=J.bind(J),a[e(442)]=s[e(442)].bind(s),n[o]=a}}))();export{Y as _};

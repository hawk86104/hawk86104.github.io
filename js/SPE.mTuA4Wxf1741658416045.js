import{_ as t,X as e,bO as i,b as n,C as o,B as r,d as s,a}from"./three.FyUEtfsR1741658416045.js";const c=u;!function(t,e){const i=u,n=f();for(;;)try{if(206965===-parseInt(i(570))/1*(-parseInt(i(607))/2)+-parseInt(i(418))/3*(parseInt(i(338))/4)+parseInt(i(554))/5*(parseInt(i(387))/6)+-parseInt(i(364))/7+-parseInt(i(521))/8+-parseInt(i(539))/9*(parseInt(i(278))/10)+parseInt(i(260))/11)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){h(this,(function(){const t=u,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(415),"i"),n=m(t(420));e[t(512)](n+t(535))&&i[t(512)](n+t(379))?m():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(448)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(t,e){const i=f();return(u=function(t,e){return i[t-=245]})(t,e)}function f(){const t=["attributeEnd","75940CFNdtu","        pos.x += wiggleSin;","error","      rotationMatrix = getRotationMatrix( axis, angle );","duration","        float rowNorm = vSpriteSheet.w;","gger","    float fIndex = 0.0;","vec3 getAcceleration( in float age ) {","    vColor = vec4( c, o );","       if ( vColor.w < float(ALPHATEST) ) discard;","maxParticleCount","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","multiplyScalar","AdditiveBlending","fog","    gl_Position = projectionMatrix * mvPosition;","setVec2Components","setVec3","    }","function","bufferUpdateKeys","randomVector3OnDisc","Texture","_incrementParticleCount","componentSize","activationEnd","particlesPerSecond","shaders","push","        float wiggleSin = isAlive * sin( wiggleAmount );","logdepthbuf_vertex","spreadClamp","    #else","uniform vec4 textureAnimation;","unshift","loop","offset","tick","           unpackColor( color.z ),","float and(float a, float b) {","_axisSpread","           positionInTime,","prototype","clone","      float angle = 0.0;","count","enable","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","_assignValue","setAttribute","void main() {","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","replace","randomVector3","add","float getWiggle() {","float getMaxAge() {","       float s = sin(angle);","4Zxgzle","setUpdateRange","getPool","_attributesNeedRefresh","    #ifdef ALPHATEST","Color","interpolateArray","   }","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","particles, can support only","maxAge","SHOULD_ROTATE_TEXTURE","activeMultiplier","_assignAngleValue","setVec3Components","        float framesY = vSpriteSheet.y;","setVec4Components","array","       axis = normalize(axis);","distributions","Emitter","_center","    #ifdef SHOULD_ROTATE_TEXTURE","logdepthbuf_pars_fragment","attributeKeys","angleSpread","2791740WpujKH","vertex","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","attribute vec3 rotationCenter;","    highp float positionInTime = (age / maxAge);","_spread","shrink","return (function() ","splice","ShaderChunk","   c.b = b / PACKED_COLOR_DIVISOR;","_resetBufferRanges","POSITIVE_INFINITY","material","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","input","float when_ge(float x, float y) {","REVISION","OBJECT","  return 1.0 - when_gt(x, y);","_decrementParticleCount","DynamicDrawUsage","        pos.z += wiggleSin;","60jyxoPC","ShaderMaterial","randomDirectionVector3OnSphere","length","particleCount","max","_radiusScale","floor","      vec3 center = rotationCenter;","attribute vec4 rotation;","common","action","setColor","_updateUniforms","typedArray","uuid","_calculatePPSValue","   vec3 c = vec3( 0.0 );","texture","   return acceleration.xyz * age;","       vec3 c = isAlive * getColorOverLifetime(","_static","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","           unpackColor( color.x ),","alive","rotation","#endif","onParticleSpawn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","value","1158066dSczNV","opacity","init","debu","    #ifdef HAS_PERSPECTIVE","    #ifdef SHOULD_CALCULATE_SPRITE","attribute vec4 angle;","age","vec3 unpackColor( in float hex ) {","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","BOOLEAN","textureFrameCount","indexOffset","ensureArrayTypedArg","   return params.y;","_value","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","fog_pars_fragment","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","setVec4","fragment","   float b = mod( hex, PACKED_COLOR_SIZE );","        float perspective = scale / length( mvPosition.xyz );","copy","BOX","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","randomVector3OnSphere","_resetParticle","cos","typeSizeMap","apply","randomFloat","SPHERE","      }","    vec3 vel = getVelocity( age );","updateCounts","warn","resetDynamic","rotateTexture","randomVector3OnLine","Vector3","vec4 getPosition( in float age ) {","fog_fragment","logdepthbuf_pars_vertex","isArray","ceil","_assignRotationValue","activeParticleCount","addEmitter","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","drag","_updateAttributeUpdateRange","        float perspective = 1.0;","Will not resize.","center","ensureArrayInstanceOf","    return min(a + b, 1.0);","getPackedRotationAxis","        float framesX = vSpriteSheet.x;","distributionClamp","roundToNearestMultiple","__proto__","group","fog_pars_vertex","type","_createNewWhenPoolEmpty","    return value;","        float columnNorm = column / framesX;","_updateBuffers","constructor","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","rotationCenter","    varying vec4 vSpriteSheet;","valueOverLifetimeLength","keys","resetFlags","getValueAtIndex","emitters","   c.g = g / PACKED_COLOR_DIVISOR;","vec3 getVelocity( in float age ) {","    pos += force;","ensureTypedArg","_attributesNeedDynamicReset","spread","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","radiusScale","depthWrite","textureFrames","#ifdef SHOULD_ROTATE_PARTICLES","attributeCount","       vec3 c = vec3(1.0);","       float x = gl_PointCoord.x - 0.5;","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","bufferUpdateCount","test","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","lerpTypeAgnostic","forceUpdateAll","        float rowNorm = row / framesY;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","dispose","_pool","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","197944stqmGX","clamp","usage","uniforms","_assignPositionValue","float when_le(float x, float y) {","defines","    gl_PointSize = pointSizePerspective;","releaseIntoPool","blending","utils","color","attribute vec4 acceleration;","ensureInstanceOf","chain","        float framesY = textureAnimation.y;","string","#ifdef SHOULD_CALCULATE_SPRITE","90kJzrwN","        float framesX = textureAnimation.x;","size","hasOwnProperty","undefined","   return params.w;","    highp float maxAge = getMaxAge();","wiggle","axisSpread","_applyAttributesToGeometry","    vec3 accel = getAcceleration( age );","updateMax","       float c = cos( -vAngle );","deltaTime","console","136505zYlgpV","_createGetterSetters","types","_radius","geometry","bufferAttribute","log","addPool","TypedArrayHelper","        vSpriteSheet.w = rowNorm;","_distribution","DISC","uniform float runTime;","isStatic","frameCount","acceleration","11313uHoaGE","   return c;","getFromPool","           return pos;","Invalid argument types, or argument types do not match:","amd","setVec2","_angle","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","arrayType","triggerPoolEmitter","SHOULD_CALCULATE_SPRITE","    vec3 value = vec3( 0.0 );","abs","_setBufferUpdateRanges","setFromArray","SHOULD_ROTATE_PARTICLES","paramsArray","updateFlags","        float totalFrames = textureAnimation.z;","SPE.Group pool ran out.","join","updateMin","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","_randomise","       );","resetUpdateRange","Emitter does not belong to a group, cannot remove.","SHOULD_WIGGLE_PARTICLES","direction","   return modelViewMatrix * vec4( position, 1.0 );","_updateDefines","getComponentValueAtIndex","position","elements","reset","activationIndex","16MvalwH","_assignParamsValue","    force += accel * age;","set","_assignColorValue","    ","call","alphaTest","        float column = floor(mod( frameNumber, framesX ));","number","_activateParticles","scale","logdepthbuf_fragment","        float wiggleAmount = positionInTime * getWiggle();","    #ifdef SHOULD_ROTATE_PARTICLES","float when_eq( float x, float y ) {","        float loopCount = textureAnimation.w;","_rotationCenter","random","unpackColor","TypedArray is already of size:","transparent","spe","    return max(sign(x - y), 0.0);","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","subarray","randomise","exports","                   0.0,                                0.0,                                0.0,                                1.0);","    return 1.0 - abs( sign( x - y ) );","textureLoop","forceFetchingFunctions","velocity","setRGB","LINE","    float pointSizePerspective = pointSize * perspective;","_assignForceValue","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","axis","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","shaderChunks","colorize","MathUtils","dynamicBuffer","distribution","_checkParticleAges","table","_assignAbsLifetimeValue","        pos.y += wiggleCos;","    #endif","remove","_setAttributeOffset","#define PACKED_COLOR_DIVISOR 255.0","      if( rotation.y == 0.0 ) {","attribute vec4 color;","_angleSpread","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","hasPerspective","    #ifdef SHOULD_WIGGLE_PARTICLES","static","uniform float scale;","Vector4","        vSpriteSheet.x = 1.0 / framesX;","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","attributeOffset","           unpackColor( color.w )","object","    highp float value = 0.0;","angle","      vec3 axis = unpackRotationAxis( rotation.x );","attributes","StaticDrawUsage","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","_spreadClamp","trace","    highp float age = getAge();","           unpackColor( color.y ),","vec3 unpackRotationAxis( in float hex ) {","round","BufferAttribute","    return a * b;","depthTest","   c.r = r / PACKED_COLOR_DIVISOR;","fog_vertex","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","   c *= vec3( 2.0 );","ensureValueOverLifetimeCompliance","varyings","setMat4","min","float getAge() {","    vec4 rotatedTexture = texture2D( tex, vUv );","updateRange","        pos = getRotation( pos, positionInTime );","_triggerSingleEmitter","radius","mesh","Vector2","sqrt","fixedTimeStep","_onRemove","`emitter` argument must be instance of SPE.Emitter. Was provided with:","getHex","ShaderAttribute",'{}.constructor("return this")( )',"rotationFunctions","_ensureTypedArray","normalize","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","arrayValuesAreEqual","counter","updateMap","Group","colorOverLifetime","sin","branchAvoidanceFunctions","NUMBER","exception","8018736PUvIGc","grow","      vec3 translated;","params","bufferUpdateRanges","      mat4 rotationMatrix;","getLength","indexOf","toString","removeEmitter","lerp","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","needsUpdate","    #ifdef COLORIZE","    force += vel;","Argument is not instanceof SPE.Emitter:","emitterIDs"];return(f=function(){return t})()}l(void 0,(function(){const t=u;let e;try{e=Function(t(371)+t(246)+");")()}catch(o){e=window}const i=e[t(553)]=e[t(553)]||{},n=[t(560),t(454),"info",t(280),t(259),t(653),t(681)];for(let r=0;r<n.length;r++){const e=l[t(487)][t(321)][t(416)](l),o=n[r],s=i[o]||e;e[t(479)]=l[t(416)](l),e.toString=s[t(268)][t(416)](s),i[o]=e}}))();const p={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===c(298)&&define[c(575)]?define(c(629),p):typeof exports!==c(543)&&typeof module!==c(543)&&(module[c(634)]=p),p[c(562)]=function(t,e,i,n){this[c(303)]=i||1,this.size=e||1,this.TypedArrayConstructor=t||Float32Array,this.array=new t(e*this.componentSize),this.indexOffset=n||0},p[c(562)][c(487)]=p[c(562)],p[c(562)][c(321)].setSize=function(t,e){const i=c,n=this.array[i(390)];return!e&&(t*=this[i(303)]),t<n?this.shrink(t):t>n?this[i(261)](t):void console.info(i(627),t+".",i(471))},p[c(562)][c(321)][c(370)]=function(t){const e=c;return this[e(355)]=this[e(355)][e(632)](0,t),this.size=t,this},p[c(562)].prototype.grow=function(t){const e=c,i=this.array,n=new this.TypedArrayConstructor(t);return n[e(610)](i),this[e(355)]=n,this[e(541)]=t,this},p[c(562)][c(321)][c(372)]=function(t,e){const i=c;t*=this[i(303)],e*=this[i(303)];const n=[],o=this[i(355)],r=o[i(390)];for(let s=0;s<r;++s)(s<t||s>=e)&&n[i(307)](o[s]);return this[i(585)](0,n),this},p[c(562)].prototype[c(585)]=function(t,e){const i=c,n=t+e[i(390)];return n>this.array[i(390)]?this[i(261)](n):n<this[i(355)][i(390)]&&this.shrink(n),this.array[i(610)](e,this[i(430)]+t),this},p[c(562)][c(321)][c(576)]=function(t,e){return this[c(295)](t,e.x,e.y)},p[c(562)][c(321)][c(295)]=function(t,e,i){const n=c,o=this[n(355)],r=this[n(430)]+t*this[n(303)];return o[r]=e,o[r+1]=i,this},p.TypedArrayHelper[c(321)].setVec3=function(t,e){return this[c(352)](t,e.x,e.y,e.z)},p[c(562)][c(321)][c(352)]=function(t,e,i,n){const o=this[c(355)],r=this.indexOffset+t*this.componentSize;return o[r]=e,o[r+1]=i,o[r+2]=n,this},p[c(562)].prototype[c(437)]=function(t,e){return this[c(354)](t,e.x,e.y,e.z,e.w)},p[c(562)][c(321)][c(354)]=function(t,e,i,n,o){const r=c,s=this.array,a=this[r(430)]+t*this[r(303)];return s[a]=e,s[a+1]=i,s[a+2]=n,s[a+3]=o,this},p[c(562)][c(321)].setMat3=function(t,e){const i=c;return this[i(585)](this[i(430)]+t*this[i(303)],e[i(604)])},p.TypedArrayHelper.prototype[c(695)]=function(t,e){const i=c;return this[i(585)](this[i(430)]+t*this[i(303)],e[i(604)])},p[c(562)][c(321)][c(399)]=function(t,e){return this[c(352)](t,e.r,e.g,e.b)},p[c(562)][c(321)].setNumber=function(t,e){const i=c;return this.array[this[i(430)]+t*this[i(303)]]=e,this},p.TypedArrayHelper[c(321)][c(494)]=function(t){const e=c;return this[e(355)][this[e(430)]+t]},p.TypedArrayHelper[c(321)][c(602)]=function(t){const e=c;return this[e(355)].subarray(this[e(430)]+t*this[e(303)])},p.ShaderAttribute=function(t,e,i){const n=c,o=p[n(245)][n(447)];this.type=typeof t===n(537)&&o[n(542)](t)?t:"f",this.componentSize=o[this[n(482)]],this[n(579)]=i||Float32Array,this[n(401)]=null,this[n(559)]=null,this[n(650)]=!!e,this[n(592)]=0,this.updateMax=0},p[c(245)][c(487)]=p[c(245)],p[c(245)][c(447)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},p[c(245)].prototype[c(339)]=function(t,e){const i=c;this[i(592)]=Math[i(696)](t*this[i(303)],this[i(592)]*this.componentSize),this[i(550)]=Math.max(e*this[i(303)],this[i(550)]*this[i(303)])},p[c(245)][c(321)].flagUpdate=function(){const t=c,e=this[t(559)];!e[t(699)]&&(e[t(699)]={});const i=e.updateRange;i[t(315)]=this[t(592)],i[t(324)]=Math.min(this[t(550)]-this[t(592)]+this[t(303)],this[t(401)][t(355)].length),e.needsUpdate=!0},p.ShaderAttribute[c(321)][c(596)]=function(){const t=c;this[t(592)]=0,this[t(550)]=0},p[c(245)][c(321)][c(455)]=function(){const e=c;this[e(559)][e(523)]=this[e(650)]?t[e(385)]:t[e(678)]},p[c(245)][c(321)][c(372)]=function(t,e){const i=c;this[i(401)][i(372)](t,e),this[i(515)]()},p[c(245)].prototype[c(515)]=function(){const e=c;this.bufferAttribute[e(355)]=this[e(401)][e(355)],this.bufferAttribute.updateRange.offset=0,this[e(559)][e(699)][e(324)]=-1,this.bufferAttribute[e(523)]=t[e(678)],this.bufferAttribute[e(272)]=!0},p[c(245)][c(321)]._ensureTypedArray=function(t){const e=c;null!==this[e(401)]&&this[e(401)][e(541)]===t*this[e(303)]||(null!==this[e(401)]&&this[e(401)][e(541)]!==t?this[e(401)].setSize(t):null===this[e(401)]&&(this[e(401)]=new p.TypedArrayHelper(this[e(579)],t,this[e(303)])))},p[c(245)].prototype._createBufferAttribute=function(i){const n=c;if(this[n(248)](i),null!==this[n(559)])return this[n(559)][n(355)]=this.typedArray[n(355)],parseFloat(t[n(381)])>=81&&(this[n(559)].count=this[n(559)][n(355)][n(390)]/this[n(559)].itemSize),void(this.bufferAttribute[n(272)]=!0);this.bufferAttribute=new(t[n(686)])(this.typedArray[n(355)],this[n(303)]),this.bufferAttribute[n(523)]=this[n(650)]?e:t[n(678)]},p[c(245)][c(321)][c(266)]=function(){const t=c;return null===this[t(401)]?0:this.typedArray[t(355)][t(390)]},p.shaderChunks={defines:["#define PACKED_COLOR_SIZE 256.0",c(659)][c(591)]("\n"),uniforms:["uniform float deltaTime;",c(566),"uniform sampler2D tex;",c(312),c(667)].join("\n"),attributes:[c(533),"attribute vec3 velocity;",c(396),c(367),"attribute vec4 params;","attribute vec4 size;",c(424),c(661),"attribute vec4 opacity;"].join("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;",c(413),c(538),c(490),c(413)][c(591)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",c(630),"}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}",c(622),c(636),"}",c(380),"  return 1.0 - when_lt(x, y);","}",c(526),c(383),"}",c(318),c(687),"}","float or(float a, float b) {",c(474),"}"].join("\n"),unpackColor:[c(426),c(404),c(467),c(290),c(439),c(689),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;",c(571),"}"][c(591)]("\n"),unpackRotationAxis:[c(684),"   vec3 c = vec3( 0.0 );",c(467),c(290),c(439),c(689),c(496),c(374),c(692),"   c -= vec3( 1.0 );","   return c;","}"].join("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",c(674),c(434),c(285),"    float shouldApplyValue = 0.0;",c(691),"",c(513),"       fIndex = float( i );",c(502),c(679),c(297),"",c(484),"}"][c(591)]("\n"),colorOverLifetime:[c(593),c(582),c(510),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","    return value;","}"][c(591)]("\n"),paramFetchingFunctions:["float getAlive() {","   return params.x;","}",c(697),c(432),"}",c(336),"   return params.z;","}",c(335),c(544),"}"][c(591)]("\n"),forceFetchingFunctions:[c(459),c(600),"}",c(497),"   return velocity * age;","}",c(286),c(406),"}"][c(591)]("\n"),rotationFunctions:[c(506),c(326),c(356),c(337),"       float c = cos(angle);","       float oc = 1.0 - c;","",c(578),c(520),c(427),c(635),c(345),"",c(409),c(660),c(573),c(451),"",c(676),c(395),c(262),c(265),c(323),c(517),c(646),"      translated = rotationCenter - pos;",c(281),c(670),c(345),"#endif"].join("\n"),rotateTexture:[c(331),"",c(360),c(509),"       float y = 1.0 - gl_PointCoord.y - 0.5;",c(551),"       float s = sin( -vAngle );",c(443),c(656),"",c(423),c(476),c(353),"        float columnNorm = vSpriteSheet.z;",c(283),c(366),c(488),c(656),"",c(698)].join("\n")},p.shaders={vertex:[p[c(647)].defines,p[c(647)][c(524)],p.shaderChunks[c(677)],p[c(647)][c(694)],i[c(397)],t[c(373)][c(461)],t[c(373)][c(481)],p[c(647)].branchAvoidanceFunctions,p[c(647)][c(626)],p[c(647)].unpackRotationAxis,p[c(647)].floatOverLifetime,p[c(647)][c(255)],p[c(647)].paramFetchingFunctions,p.shaderChunks[c(638)],p[c(647)][c(247)],c(330),c(682),"    highp float alive = getAlive();",c(545),c(368),"    highp float isAlive = when_gt( alive, 0.0 );",c(665),c(620),c(308),"        float wiggleCos = isAlive * cos( wiggleAmount );","    #endif",c(452),c(549),"    vec3 force = vec3( 0.0 );","    vec3 pos = vec3( position );",c(644),c(274),"    force *= drag;",c(609),c(498),c(665),c(279),c(655),c(386),c(656),c(621),c(700),c(656),c(436),c(378),c(422),c(440),"    #else",c(470),c(656),c(642),c(273),c(407),c(320),c(410),c(683),c(317),c(672),c(595),c(311),c(508),c(656),c(250),c(287),c(360),c(346),c(656),c(423),c(540),c(536),c(623),c(589),c(271),c(615),"        float row = floor( (frameNumber - column) / framesX );",c(485),c(516),c(669),"        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;",c(563),c(656),c(528),c(294),t[c(373)][c(309)],t[c(373)][c(690)],"}"].join("\n"),fragment:[p[c(647)][c(524)],t[c(373)][c(397)],t[c(373)][c(435)],i[c(361)],p.shaderChunks[c(694)],p[c(647)][c(257)],c(330),"    vec3 outgoingLight = vColor.xyz;",c(612),c(342),c(288),c(656),p[c(647)][c(456)],i[c(619)],c(663),c(631),t[c(373)][c(460)],"}"][c(591)]("\n")},p[c(531)]={types:{BOOLEAN:"boolean",STRING:c(537),NUMBER:"number",OBJECT:c(673)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this[n(499)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array.isArray(t)){for(let o=t[n(390)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(534)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(462)](t[n(433)])&&(t[n(433)]=[t[n(433)]]),!1===Array.isArray(t[n(369)])&&(t._spread=[t._spread]);const o=this[n(522)](t._value[n(390)],e,i),r=this[n(522)](t[n(369)][n(390)],e,i),s=Math[n(392)](o,r);t[n(433)][n(390)]!==s&&(t[n(433)]=this[n(344)](t[n(433)],s)),t[n(369)][n(390)]!==s&&(t[n(369)]=this[n(344)](t._spread,s))},interpolateArray(t,e){const i=c,n=t[i(390)],o=[typeof t[0][i(322)]===i(298)?t[0][i(322)]():t[0]],r=(n-1)/(e-1);for(let s=1;s<e-1;++s){const e=s*r,n=Math[i(394)](e),a=Math[i(463)](e),c=e-n;o[s]=this[i(514)](t[n],t[a],c)}return o[i(307)](typeof t[n-1][i(322)]===i(298)?t[n-1].clone():t[n-1]),o},clamp(t,e,i){const n=c;return Math[n(392)](e,Math[n(696)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=c;let r,s=this[o(556)];return typeof e===s[o(258)]&&typeof i===s[o(258)]?e+(i-e)*n:e instanceof t[o(704)]&&i instanceof t[o(704)]?(r=e[o(322)](),r.x=this.lerp(e.x,i.x,n),r.y=this[o(270)](e.y,i.y,n),r):e instanceof t[o(458)]&&i instanceof t[o(458)]?(r=e[o(322)](),r.x=this.lerp(e.x,i.x,n),r.y=this[o(270)](e.y,i.y,n),r.z=this[o(270)](e.z,i.z,n),r):e instanceof t[o(668)]&&i instanceof t[o(668)]?(r=e[o(322)](),r.x=this[o(270)](e.x,i.x,n),r.y=this[o(270)](e.y,i.y,n),r.z=this[o(270)](e.z,i.z,n),r.w=this[o(270)](e.w,i.w,n),r):e instanceof t[o(343)]&&i instanceof t[o(343)]?(r=e[o(322)](),r.r=this[o(270)](e.r,i.r,n),r.g=this[o(270)](e.g,i.g,n),r.b=this[o(270)](e.b,i.b,n),r):void console.warn(o(574),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=c;let n=0;return 0===e?t:(n=Math[i(583)](t)%e,0===n?t:t<0?-(Math[i(583)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=c;for(let i=0;i<t[e(390)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[c(625)]()-.5),randomVector3(t,e,i,n,o){const r=c;let s=i.x+(Math[r(625)]()*n.x-.5*n.x),a=i.y+(Math[r(625)]()*n.y-.5*n.y),h=i.z+(Math[r(625)]()*n.z-.5*n.z);o&&(s=.5*-o.x+this.roundToNearestMultiple(s,o.x),a=.5*-o.y+this[r(478)](a,o.y),h=.5*-o.z+this[r(478)](h,o.z)),t[r(401)][r(352)](e,s,a,h)},randomColor(t,e,i,n){const o=c;let r=i.r+Math.random()*n.x,s=i.g+Math[o(625)]()*n.y,a=i.b+Math[o(625)]()*n.z;r=this.clamp(r,0,1),s=this[o(522)](s,0,1),a=this[o(522)](a,0,1),t[o(401)][o(352)](e,r,s,a)},randomColorAsHex:function(){const e=c,i=new(t[e(343)]);return function(t,n,o,r){const s=e,a=o[s(390)],c=[];for(let e=0;e<a;++e){const t=r[e];i[s(441)](o[e]),i.r+=Math[s(625)]()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math[s(625)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this[s(522)](i.g,0,1),i.b=this[s(522)](i.b,0,1),c[s(307)](i[s(709)]())}t[s(401)][s(354)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=c,r=i[o(322)]();r.lerp(n,Math.random()),t[o(401)][o(352)](e,r.x,r.y,r.z)},randomVector3OnSphere(t,e,i,n,o,r,s,a){const h=c;let l=2*Math.random()-1,u=6.2832*Math[h(625)](),f=Math[h(705)](1-l*l),p=this[h(449)](n,o),d=0,m=0,g=0;s&&(p=Math[h(685)](p/s)*s),d=f*Math[h(446)](u)*p,m=f*Math.sin(u)*p,g=l*p,d*=r.x,m*=r.y,g*=r.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(352)](e,d,m,g)},seededRandom(t){const e=1e4*Math[c(256)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,r,s){const a=c;let h=6.2832*Math[a(625)](),l=Math.abs(this.randomFloat(n,o)),u=0,f=0,p=0;s&&(l=Math[a(685)](l/s)*s),u=Math[a(446)](h)*l,f=Math[a(256)](h)*l,u*=r.x,f*=r.y,u+=i.x,f+=i.y,p+=i.z,t.typedArray[a(352)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=c,i=new(t[e(458)]);return function(t,n,o,r,s,a,c,h){const l=e;i[l(441)](a),i.x-=o,i.y-=r,i.z-=s,i[l(249)]().multiplyScalar(-this[l(449)](c,h)),t.typedArray.setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new n;return function(e,i,n,o,r,s,a,c){const h=u;t[h(441)](s),t.x-=n,t.y-=o,t.z-=r,t[h(249)]()[h(291)](-this[h(449)](a,c)),e[h(401)][h(352)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const e=c,i=new(t[e(458)]),n=new(t[e(458)]),r=new o,s=new(t[e(458)])(1,1,1);return function(t,o){const a=e;return i.copy(t).normalize(),n[a(441)](o)[a(249)](),i.x+=.5*-o.x+Math.random()*o.x,i.y+=.5*-o.y+Math.random()*o.y,i.z+=.5*-o.z+Math[a(625)]()*o.z,i.normalize()[a(334)](s)[a(291)](.5),r[a(640)](i.x,i.y,i.z),r[a(709)]()}}()},p[c(254)]=function(e){const i=c,n=p[i(531)],o=n[i(556)];(e=n[i(499)](e,o[i(382)],{}))[i(405)]=n[i(499)](e[i(405)],o.OBJECT,{}),this.uuid=t[i(649)].generateUUID(),this[i(706)]=n[i(499)](e[i(706)],o[i(258)],.016),this.texture=n.ensureInstanceOf(e.texture[i(417)],t[i(301)],null),this[i(505)]=n[i(534)](e[i(405)].frames,t[i(704)],new(t[i(704)])(1,1)),this[i(429)]=n[i(499)](e[i(405)][i(568)],o[i(258)],this[i(505)].x*this.textureFrames.y),this[i(637)]=n[i(499)](e.texture[i(314)],o[i(258)],1),this[i(505)].max(new(t[i(704)])(1,1)),this[i(664)]=n.ensureTypedArg(e[i(664)],o.BOOLEAN,!0),this[i(648)]=n[i(499)](e[i(648)],o[i(428)],!0),this.maxParticleCount=n[i(499)](e[i(289)],o[i(258)],null),this[i(530)]=n[i(499)](e[i(530)],o[i(258)],t[i(292)]),this[i(628)]=n[i(499)](e[i(628)],o[i(428)],!0),this[i(614)]=parseFloat(n[i(499)](e[i(614)],o[i(258)],0)),this[i(504)]=n[i(499)](e[i(504)],o.BOOLEAN,!1),this[i(688)]=n.ensureTypedArg(e[i(688)],o[i(428)],!0),this[i(293)]=n.ensureTypedArg(e[i(293)],o.BOOLEAN,!0),this[i(618)]=n.ensureTypedArg(e[i(618)],o.NUMBER,300),this.emitters=[],this[i(276)]=[],this[i(519)]=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this[i(500)]=!1,this.particleCount=0,this[i(524)]={tex:{type:"t",value:this[i(405)]},textureAnimation:{type:"v4",value:new(t[i(668)])(this[i(505)].x,this.textureFrames.y,this[i(429)],Math[i(392)](Math[i(583)](this.textureLoop),1))},fogColor:{type:"c",value:this[i(293)]?new(t[i(343)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(618)]}},this[i(527)]={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(648)],VALUE_OVER_LIFETIME_LENGTH:p[i(491)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(505)].x>1||this[i(505)].y>1},this[i(677)]={position:new p.ShaderAttribute("v3",!0),acceleration:new(p[i(245)])("v4",!0),velocity:new(p[i(245)])("v3",!0),rotation:new(p[i(245)])("v4",!0),rotationCenter:new(p[i(245)])("v3",!0),params:new(p[i(245)])("v4",!0),size:new(p[i(245)])("v4",!0),angle:new(p[i(245)])("v4",!0),color:new p.ShaderAttribute("v4",!0),opacity:new(p[i(245)])("v4",!0)},this.attributeKeys=Object[i(492)](this[i(677)]),this[i(507)]=this[i(362)].length,this[i(377)]=new(t[i(388)])({uniforms:this[i(524)],vertexShader:p[i(306)][i(365)],fragmentShader:p[i(306)][i(438)],blending:this[i(530)],transparent:this[i(628)],alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this[i(688)],defines:this[i(527)],fog:this[i(293)]}),this[i(558)]=new r,this[i(703)]=new s(this[i(558)],this.material),null===this[i(289)]&&console[i(454)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},p[c(254)][c(487)]=p[c(254)],p.Group[c(321)]._updateDefines=function(){const t=c;let e,i=this[t(495)],n=i[t(390)]-1,o=this.defines;for(;n>=0;--n)e=i[n],!o[t(581)]&&(o[t(349)]=o[t(349)]||!!Math.max(Math[t(392)].apply(null,e[t(675)][t(417)]),Math[t(392)].apply(null,e[t(675)][t(501)]))),o[t(586)]=o[t(586)]||!!Math[t(392)](e[t(412)][t(675)],e[t(412)][t(363)]),o[t(598)]=o.SHOULD_WIGGLE_PARTICLES||!!Math.max(e[t(546)][t(417)],e.wiggle[t(501)]);this[t(377)][t(272)]=!0},p[c(254)][c(321)]._applyAttributesToGeometry=function(){const t=c;let e,i,n=this[t(677)],o=this.geometry,r=o[t(677)];for(const s in n)n[t(542)](s)&&(e=n[s],i=r[s],i?i.array=e.typedArray[t(355)]:o[t(329)](s,e.bufferAttribute),e[t(559)][t(272)]=!0);this[t(558)].setDrawRange(0,this.particleCount)},p[c(254)].prototype.addEmitter=function(t){const e=c;if(t instanceof p[e(358)]==!1)return void console.error(e(708),t);if(this[e(276)][e(267)](t.uuid)>-1)return void console[e(280)]("Emitter already exists in this group. Will not add again.");if(null!==t.group)return void console[e(280)]("Emitter already belongs to another group. Will not add to requested group.");const i=this.attributes,n=this.particleCount,o=n+t[e(391)];this[e(391)]=o,null!==this[e(289)]&&this.particleCount>this.maxParticleCount&&console[e(454)]("SPE.Group: maxParticleCount exceeded. Requesting",this.particleCount,e(347),this.maxParticleCount),t[e(403)](t[e(348)][e(433)]+t[e(348)][e(369)]),t[e(584)](this[e(362)]),t[e(658)](n),t[e(480)]=this,t[e(677)]=this[e(677)];for(const r in i)i[e(542)](r)&&i[r]._createBufferAttribute(null!==this.maxParticleCount?this[e(289)]:this[e(391)]);for(let r=n;r<o;++r)t._assignPositionValue(r),t._assignForceValue(r,e(639)),t[e(643)](r,e(569)),t[e(654)](r,"opacity"),t[e(654)](r,e(541)),t[e(351)](r),t[e(464)](r),t[e(608)](r),t[e(611)](r);return this[e(548)](),this[e(495)].push(t),this[e(276)][e(307)](t[e(402)]),this[e(601)](t),this[e(377)][e(272)]=!0,this.geometry.needsUpdate=!0,this[e(341)]=!0,this},p[c(254)][c(321)][c(269)]=function(t){const e=c,i=this[e(276)].indexOf(t.uuid);if(t instanceof p[e(358)]==!1)return void console[e(280)](e(708),t);if(-1===i)return void console[e(280)]("Emitter does not exist in this group. Will not remove.");const n=t[e(671)],o=n+t[e(391)],r=this[e(677)].params[e(401)];for(let s=n;s<o;++s)r[e(355)][4*s]=0,r[e(355)][4*s+1]=0;this.emitters[e(372)](i,1),this[e(276)][e(372)](i,1);for(const s in this[e(677)])this.attributes[e(542)](s)&&this.attributes[s].splice(n,o);this[e(391)]-=t[e(391)],t[e(707)](),this._attributesNeedRefresh=!0},p.Group[c(321)][c(572)]=function(){const t=c,e=this[t(519)],i=this[t(483)];if(e.length)return e.pop();if(i){const e=new(p[t(358)])(this._poolCreationSettings);return this[t(466)](e),e}return null},p.Group[c(321)][c(529)]=function(t){const e=c;if(t instanceof p[e(358)]!=!1)return t[e(605)](),this[e(519)][e(313)](t),this;console[e(280)](e(275),t)},p[c(254)][c(321)][c(340)]=function(){return this[c(519)]},p.Group.prototype[c(561)]=function(t,e,i){const n=c;let o;this._poolCreationSettings=e,this[n(483)]=!!i;for(let r=0;r<t;++r)o=Array[n(462)](e)?new(p[n(358)])(e[r]):new(p[n(358)])(e),this[n(466)](o),this[n(529)](o);return this},p[c(254)][c(321)][c(701)]=function(e){const i=c,n=this.getFromPool(),o=this;if(null!==n)return e instanceof t[i(458)]&&(n.position[i(417)][i(441)](e),n[i(603)][i(417)]=n.position[i(417)]),n[i(325)](),setTimeout((()=>{n.disable(),o.releaseIntoPool(n)}),1e3*Math[i(392)](n.duration,n[i(348)][i(417)]+n[i(348)][i(501)])),this;console[i(560)](i(590))},p.Group[c(321)][c(580)]=function(t,e){if(typeof t===c(616)&&t>1)for(let i=0;i<t;++i)this._triggerSingleEmitter(e);else this._triggerSingleEmitter(e);return this},p.Group.prototype[c(400)]=function(t){const e=c;this[e(524)].runTime[e(417)]+=t,this[e(524)][e(552)].value=t},p[c(254)][c(321)][c(375)]=function(){const t=c;let e=this[t(362)],i=this[t(507)]-1,n=this[t(677)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},p.Group[c(321)]._updateBuffers=function(t){const e=c;let i,n,o,r=this[e(362)],s=this[e(507)]-1,a=this[e(677)],h=t[e(264)];for(;s>=0;--s)i=r[s],n=h[i],o=a[i],o[e(339)](n.min,n[e(392)]),o.flagUpdate()},p[c(254)][c(321)].tick=function(t){const e=c;var i=this[e(495)],n=i.length,o=t||this[e(706)],r=this[e(362)],s=this[e(677)];if(this[e(400)](o),this[e(375)](),0!==n||!1!==this[e(341)]||!1!==this[e(500)]){for(var a,h=0;h<n;++h)(a=i[h])[e(316)](o),this[e(486)](a);if(!0===this[e(500)]){for(h=this.attributeCount-1;h>=0;--h)s[r[h]].resetDynamic();this._attributesNeedDynamicReset=!1}if(!0===this[e(341)]){for(h=this[e(507)]-1;h>=0;--h)s[r[h]][e(515)]();this[e(341)]=!1,this[e(500)]=!0}}},p.Group.prototype[c(518)]=function(){const t=c;return this[t(558)][t(518)](),this.material[t(518)](),this},p.Emitter=function(e){const i=c,r=p[i(531)],s=r[i(556)],h=p[i(491)];(e=r.ensureTypedArg(e,s[i(382)],{}))[i(603)]=r.ensureTypedArg(e[i(603)],s[i(382)],{}),e[i(639)]=r[i(499)](e[i(639)],s.OBJECT,{}),e[i(569)]=r[i(499)](e[i(569)],s[i(382)],{}),e[i(702)]=r[i(499)](e[i(702)],s[i(382)],{}),e[i(468)]=r.ensureTypedArg(e[i(468)],s.OBJECT,{}),e.rotation=r.ensureTypedArg(e[i(412)],s[i(382)],{}),e.color=r[i(499)](e.color,s[i(382)],{}),e[i(419)]=r.ensureTypedArg(e.opacity,s[i(382)],{}),e.size=r.ensureTypedArg(e[i(541)],s.OBJECT,{}),e[i(675)]=r[i(499)](e[i(675)],s.OBJECT,{}),e.wiggle=r[i(499)](e[i(546)],s[i(382)],{}),e[i(348)]=r.ensureTypedArg(e.maxAge,s.OBJECT,{}),e[i(414)]&&console[i(454)](i(327)),this[i(402)]=a.generateUUID(),this[i(482)]=r[i(499)](e[i(482)],s[i(258)],p[i(357)][i(442)]),this[i(603)]={_value:r[i(534)](e[i(603)][i(417)],t[i(458)],new n),_spread:r[i(534)](e[i(603)].spread,t[i(458)],new(t[i(458)])),_spreadClamp:r.ensureInstanceOf(e[i(603)][i(310)],t[i(458)],new(t[i(458)])),_distribution:r[i(499)](e.position.distribution,s[i(258)],this[i(482)]),_randomise:r.ensureTypedArg(e[i(603)][i(633)],s[i(428)],!1),_radius:r.ensureTypedArg(e[i(603)][i(702)],s[i(258)],10),_radiusScale:r[i(534)](e[i(603)][i(503)],t[i(458)],new(t[i(458)])(1,1,1)),_distributionClamp:r[i(499)](e[i(603)][i(477)],s.NUMBER,0)},this.velocity={_value:r[i(534)](e[i(639)][i(417)],n,new(t[i(458)])),_spread:r[i(534)](e.velocity.spread,t[i(458)],new n),_distribution:r[i(499)](e[i(639)][i(651)],s[i(258)],this[i(482)]),_randomise:r[i(499)](e[i(603)][i(633)],s.BOOLEAN,!1)},this[i(569)]={_value:r.ensureInstanceOf(e[i(569)][i(417)],t[i(458)],new(t[i(458)])),_spread:r[i(534)](e[i(569)][i(501)],t[i(458)],new(t[i(458)])),_distribution:r[i(499)](e[i(569)][i(651)],s.NUMBER,this[i(482)]),_randomise:r[i(499)](e.position[i(633)],s[i(428)],!1)},this.drag={_value:r[i(499)](e[i(468)][i(417)],s[i(258)],0),_spread:r[i(499)](e[i(468)].spread,s[i(258)],0),_randomise:r[i(499)](e[i(603)].randomise,s.BOOLEAN,!1)},this[i(546)]={_value:r[i(499)](e.wiggle.value,s[i(258)],0),_spread:r[i(499)](e[i(546)][i(501)],s[i(258)],0)},this[i(412)]={_axis:r[i(534)](e[i(412)][i(645)],t[i(458)],new(t[i(458)])(0,1,0)),_axisSpread:r[i(534)](e[i(412)][i(547)],n,new(t[i(458)])),_angle:r[i(499)](e.rotation.angle,s[i(258)],0),_angleSpread:r[i(499)](e[i(412)].angleSpread,s[i(258)],0),_static:r.ensureTypedArg(e.rotation[i(666)],s.BOOLEAN,!1),_center:r[i(534)](e[i(412)][i(472)],t[i(458)],this[i(603)]._value[i(322)]()),_randomise:r[i(499)](e[i(603)][i(633)],s[i(428)],!1)},this[i(348)]={_value:r[i(499)](e[i(348)][i(417)],s[i(258)],2),_spread:r[i(499)](e[i(348)][i(501)],s[i(258)],0)},this[i(532)]={_value:r[i(473)](e.color[i(417)],o,new o),_spread:r.ensureArrayInstanceOf(e.color[i(501)],n,new(t[i(458)])),_randomise:r.ensureTypedArg(e[i(603)][i(633)],s[i(428)],!1)},this[i(419)]={_value:r[i(431)](e[i(419)][i(417)],s[i(258)],1),_spread:r[i(431)](e.opacity[i(501)],s[i(258)],0),_randomise:r[i(499)](e[i(603)][i(633)],s[i(428)],!1)},this.size={_value:r[i(431)](e[i(541)][i(417)],s[i(258)],1),_spread:r[i(431)](e[i(541)][i(501)],s[i(258)],0),_randomise:r[i(499)](e[i(603)][i(633)],s[i(428)],!1)},this[i(675)]={_value:r[i(431)](e[i(675)].value,s.NUMBER,0),_spread:r[i(431)](e[i(675)][i(501)],s[i(258)],0),_randomise:r[i(499)](e[i(603)][i(633)],s[i(428)],!1)},this[i(391)]=r[i(499)](e[i(391)],s.NUMBER,100),this.duration=r.ensureTypedArg(e.duration,s[i(258)],null),this[i(567)]=r[i(499)](e[i(567)],s.BOOLEAN,!1),this.activeMultiplier=r[i(499)](e[i(350)],s[i(258)],1),this.direction=r.ensureTypedArg(e[i(599)],s.NUMBER,1),this[i(411)]=r[i(499)](e[i(411)],s[i(428)],!0),this.particlesPerSecond=0,this[i(606)]=0,this[i(671)]=0,this[i(277)]=0,this[i(425)]=0,this.activeParticleCount=0,this[i(480)]=null,this[i(677)]=null,this[i(587)]=null,this.resetFlags={position:r[i(499)](e.position[i(633)],s[i(428)],!1)||r.ensureTypedArg(e[i(702)][i(633)],s[i(428)],!1),velocity:r.ensureTypedArg(e[i(639)][i(633)],s[i(428)],!1),acceleration:r.ensureTypedArg(e.acceleration[i(633)],s[i(428)],!1)||r[i(499)](e.drag.randomise,s[i(428)],!1),rotation:r[i(499)](e.rotation.randomise,s[i(428)],!1),rotationCenter:r[i(499)](e.rotation[i(633)],s[i(428)],!1),size:r[i(499)](e[i(541)][i(633)],s[i(428)],!1),color:r[i(499)](e[i(532)][i(633)],s[i(428)],!1),opacity:r[i(499)](e.opacity.randomise,s[i(428)],!1),angle:r[i(499)](e[i(675)][i(633)],s[i(428)],!1)},this[i(588)]={},this[i(453)]={},this[i(253)]={maxAge:i(263),position:i(603),velocity:"velocity",acceleration:"acceleration",drag:"acceleration",wiggle:i(263),rotation:"rotation",size:i(541),color:"color",opacity:i(419),angle:i(675)};for(const t in this[i(253)])this[i(253)][i(542)](t)&&(this[i(453)][this[i(253)][t]]=0,this[i(588)][this[i(253)][t]]=!1,this._createGetterSetters(this[t],t));this[i(264)]={},this[i(362)]=null,this[i(507)]=0,r[i(693)](this[i(532)],h,h),r[i(693)](this[i(419)],h,h),r[i(693)](this[i(541)],h,h),r.ensureValueOverLifetimeCompliance(this[i(675)],h,h)},p[c(358)][c(487)]=p[c(358)],p[c(358)][c(321)][c(555)]=function(t,e){const i=c,n=this;for(const o in t)if(t.hasOwnProperty(o)){const r=o[i(332)]("_","");Object.defineProperty(t,r,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=u,r=n[o(253)][e],s=this[t],a=p.valueOverLifetimeLength;t===o(624)?(n[o(588)][o(489)]=!0,n[o(453)][o(489)]=0):t===o(594)?n[o(493)][r]=i:(n.updateFlags[r]=!0,n.updateCounts[r]=0),n[o(480)][o(601)](),this[t]=i,Array.isArray(s)&&p[o(531)][o(693)](n[e],a,a)}}(o)})}},p[c(358)][c(321)]._setBufferUpdateRanges=function(t){const e=c;this.attributeKeys=t,this.attributeCount=t[e(390)];for(let i=this.attributeCount-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(376)],max:Number.NEGATIVE_INFINITY}},p[c(358)][c(321)][c(403)]=function(t){const e=c,i=this[e(391)];this[e(282)]?this[e(305)]=i/(t<this.duration?t:this.duration):this[e(305)]=i/t},p[c(358)].prototype[c(658)]=function(t){const e=c;this[e(671)]=t,this[e(606)]=t,this[e(304)]=t+this.particleCount},p[c(358)].prototype[c(328)]=function(t,e){const i=c;switch(t){case i(603):this[i(525)](e);break;case i(639):case i(569):this._assignForceValue(e,t);break;case i(541):case"opacity":this._assignAbsLifetimeValue(e,t);break;case i(675):this[i(351)](e);break;case i(263):this[i(608)](e);break;case i(412):this[i(464)](e);break;case i(532):this[i(611)](e)}},p[c(358)][c(321)][c(525)]=function(t){const e=c,i=p.distributions,n=p[e(531)],o=this[e(603)],r=this.attributes.position,s=o[e(433)],a=o[e(369)];switch(o[e(564)]){case i[e(442)]:n[e(333)](r,t,s,a,o[e(680)]);break;case i[e(450)]:n[e(444)](r,t,s,o[e(557)],o[e(369)].x,o[e(393)],o[e(680)].x,o._distributionClamp||this[e(391)]);break;case i[e(565)]:n[e(300)](r,t,s,o[e(557)],o[e(369)].x,o[e(393)],o[e(680)].x);break;case i[e(641)]:n[e(457)](r,t,s,a)}},p[c(358)][c(321)][c(643)]=function(t,e){const i=c;let n,o,r,s,a,h=p.distributions,l=p[i(531)],u=this[e],f=u[i(433)],d=u[i(369)];switch(u._distribution){case h[i(442)]:l.randomVector3(this[i(677)][e],t,f,d);break;case h[i(450)]:n=this[i(677)][i(603)][i(401)][i(355)],a=3*t,o=n[a],r=n[a+1],s=n[a+2],l[i(389)](this.attributes[e],t,o,r,s,this[i(603)][i(433)],u[i(433)].x,u._spread.x);break;case h[i(565)]:n=this[i(677)][i(603)][i(401)].array,a=3*t,o=n[a],r=n[a+1],s=n[a+2],l.randomDirectionVector3OnDisc(this.attributes[e],t,o,r,s,this[i(603)]._value,u[i(433)].x,u[i(369)].x);break;case h[i(641)]:l[i(457)](this[i(677)][e],t,f,d)}if("acceleration"===e){const e=l.clamp(l[i(449)](this[i(468)][i(433)],this[i(468)][i(369)]),0,1);this.attributes.acceleration.typedArray[i(355)][4*t+3]=e}},p[c(358)][c(321)][c(654)]=function(t,e){const i=c;let n,o=this[i(677)][e][i(401)],r=this[e],s=p[i(531)];s[i(251)](r._value)&&s[i(251)](r[i(369)])?(n=Math[i(583)](s[i(449)](r[i(433)][0],r[i(369)][0])),o.setVec4Components(t,n,n,n,n)):o[i(354)](t,Math[i(583)](s[i(449)](r[i(433)][0],r._spread[0])),Math[i(583)](s[i(449)](r[i(433)][1],r[i(369)][1])),Math[i(583)](s.randomFloat(r[i(433)][2],r[i(369)][2])),Math.abs(s[i(449)](r[i(433)][3],r[i(369)][3])))},p[c(358)][c(321)][c(351)]=function(t){const e=c;let i,n=this[e(677)][e(675)][e(401)],o=this[e(675)],r=p.utils;r[e(251)](o[e(433)])&&r.arrayValuesAreEqual(o[e(369)])?(i=r.randomFloat(o[e(433)][0],o._spread[0]),n.setVec4Components(t,i,i,i,i)):n[e(354)](t,r[e(449)](o[e(433)][0],o._spread[0]),r.randomFloat(o[e(433)][1],o[e(369)][1]),r.randomFloat(o._value[2],o[e(369)][2]),r.randomFloat(o._value[3],o[e(369)][3]))},p[c(358)][c(321)][c(608)]=function(t){const e=c;this[e(677)][e(263)][e(401)][e(354)](t,this.isStatic?1:0,0,Math.abs(p[e(531)].randomFloat(this[e(348)][e(433)],this[e(348)][e(369)])),p[e(531)][e(449)](this.wiggle[e(433)],this.wiggle._spread))},p[c(358)][c(321)][c(464)]=function(t){const e=c;this[e(677)].rotation[e(401)].setVec3Components(t,p[e(531)][e(475)](this[e(412)]._axis,this[e(412)][e(319)]),p[e(531)][e(449)](this[e(412)][e(577)],this[e(412)][e(662)]),this[e(412)][e(408)]?0:1),this[e(677)][e(489)][e(401)][e(296)](t,this[e(412)][e(359)])},p[c(358)].prototype[c(611)]=function(t){const e=c;p[e(531)].randomColorAsHex(this[e(677)].color,t,this[e(532)]._value,this.color._spread)},p.Emitter[c(321)][c(445)]=function(t){const e=c;let i,n,o=this[e(493)],r=this[e(588)],s=this[e(453)],a=this[e(362)];for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=r[i],!0!==o[i]&&!0!==n||(this[e(328)](i,t),this[e(469)](i,t),!0===n&&s[i]===this.particleCount?(r[i]=!1,s[i]=0):1==n&&++s[i])},p.Emitter[c(321)][c(469)]=function(t,e){const i=c,n=this[i(264)][t];n[i(696)]=Math.min(e,n[i(696)]),n[i(392)]=Math[i(392)](e,n[i(392)])},p[c(358)][c(321)][c(375)]=function(){const t=c;let e,i=this[t(264)],n=this[t(299)],o=this[t(511)]-1;for(;o>=0;--o)e=n[o],i[e][t(696)]=Number[t(376)],i[e][t(392)]=Number.NEGATIVE_INFINITY},p[c(358)][c(321)][c(707)]=function(){const t=c;this[t(305)]=0,this[t(671)]=0,this[t(606)]=0,this[t(465)]=0,this[t(480)]=null,this[t(677)]=null,this[t(587)]=null,this[t(425)]=0},p[c(358)].prototype._decrementParticleCount=function(){--this[c(465)]},p[c(358)].prototype[c(302)]=function(){++this[c(465)]},p[c(358)].prototype._checkParticleAges=function(t,e,i,n){const o=c;for(var r,s,a,h,l=e-1;l>=t;--l)0!==(h=i[r=4*l])&&(a=i[r+1],s=i[r+2],1===this[o(599)]?(a+=n)>=s&&(a=0,h=0,this[o(384)]()):(a-=n)<=0&&(a=s,h=0,this[o(384)]()),i[r]=h,i[r+1]=a,this[o(469)](o(263),l))},p.Emitter[c(321)][c(617)]=function(t,e,i,n){const o=c,r=this.direction;for(var s,a,h=t;h<e;++h)0!=i[s=4*h]&&1!==this[o(391)]||(this[o(302)](),i[s]=1,this[o(445)](h),a=n*(h-t),i[s+1]=-1===r?i[s+2]-a:a,this[o(469)]("params",h))},p.Emitter[c(321)][c(316)]=function(t){const e=c;if(this[e(567)])return;null===this[e(587)]&&(this.paramsArray=this[e(677)][e(263)][e(401)][e(355)]);const i=this[e(671)],n=i+this[e(391)],o=this.paramsArray,r=this.particlesPerSecond*this[e(350)]*t,s=this[e(606)];if(this._resetBufferRanges(),this[e(652)](i,n,o,t),!1===this[e(411)])return void(this.age=0);if(null!==this[e(282)]&&this[e(425)]>this[e(282)])return this[e(411)]=!1,void(this[e(425)]=0);const a=1===this.particleCount?s:0|s,h=Math[e(696)](a+r,this.activationEnd),l=h-this[e(606)]|0,u=l>0?t/l:0;this[e(617)](a,h,o,u),this[e(606)]+=r,this[e(606)]>n&&(this.activationIndex=i),this[e(425)]+=t},p[c(358)].prototype[c(605)]=function(t){const e=c;if(this[e(425)]=0,this[e(411)]=!1,!0===t){const t=this.attributeOffset,o=t+this.particleCount,r=this[e(587)],s=this[e(677)].params[e(559)];for(var i,n=o-1;n>=t;--n)r[i=4*n]=0,r[i+1]=0;s[e(699)][e(315)]=0,s[e(699)][e(324)]=-1,s[e(272)]=!0}return this},p[c(358)][c(321)][c(325)]=function(){return this[c(411)]=!0,this},p[c(358)][c(321)].disable=function(){return this[c(411)]=!1,this},p[c(358)][c(321)][c(657)]=function(){const t=c;return null!==this[t(480)]?this[t(480)][t(269)](this):console[t(280)](t(597)),this};const d=p;function m(t){function e(t){const i=u;if(typeof t===i(537))return function(t){}[i(487)]("while (true) {}")[i(448)](i(252));1!==(""+t/t).length||t%20==0?function(){return!0}[i(487)](i(421)+"gger")[i(613)](i(398)):function(){return!1}[i(487)](i(421)+i(284))[i(448)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{d as _};

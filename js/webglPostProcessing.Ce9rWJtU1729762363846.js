import{i as t}from"./ice-utils.CqAD93rs1729762363846.js";import{m as n,_ as e}from"./gl-matrix.B5xu0TRx1729762363846.js";import{P as o}from"./tweakpane.BCjFYDHx1729762363846.js";import{d as r,r as i,q as a,o as c,E as s,L as u,u as f}from"./@vue.n8X62v121729762363846.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=A;!function(t,n){const e=A,o=g();for(;;)try{if(966590===-parseInt(e(390))/1+parseInt(e(368))/2+parseInt(e(421))/3+-parseInt(e(387))/4*(parseInt(e(416))/5)+-parseInt(e(367))/6*(-parseInt(e(385))/7)+-parseInt(e(374))/8*(-parseInt(e(425))/9)+-parseInt(e(380))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(414)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=A,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(409),"i"),o=R(t(430));n[t(442)](o+t(413))&&e[t(442)](o+t(378))?R():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=A;let n;try{n=Function(t(401)+t(428)+");")()}catch(r){n=window}const e=n[t(346)]=n[t(346)]||{},o=["log","warn",t(384),"error","exception","table","trace"];for(let i=0;i<o[t(405)];i++){const n=d[t(404)][t(422)][t(426)](d),r=o[i],a=e[r]||n;n[t(397)]=d[t(426)](d),n[t(340)]=a.toString[t(426)](a),e[r]=n}}))();const E={id:x(359)},p=["src"];function g(){const t=["bind","drawElements",'{}.constructor("return this")( )',"#canvaswebgl","init","bindBuffer","TEXTURE_WRAP_S","bindFramebuffer","CLAMP_TO_EDGE","TRIANGLES","SRC_ALPHA","debu","enable","TEXTURE_2D","offset_left_top","bufferData","test","toString","RGBA","width","STATIC_DRAW","stateObject","offset_right_top","console","webgl","create","framebufferTexture2D","是否后处理","gger","texImage2D","BLEND","none","hidden","height","FRAMEBUFFER","blendFunc","canvaswebgl","uView","getElementById","getUniformLocation","enableVertexAttribArray","innerHeight","translate","createBuffer","9793878UWIAFX","781268WNulrv","logo-texture","change","useProgram","getContext","color","8YPxRyG","BYTES_PER_ELEMENT","ortho","clear","input","while (true) {}","1313930IZBehY","lookAt","ARRAY_BUFFER","uProjection","info","7PLbiKl","inline","7564912IshnPI","vertexAttribPointer","createFramebuffer","1056114IRZJhI","counter","call","TEXTURE_MIN_FILTER","querySelector","bindTexture","COLOR_BUFFER_BIT","__proto__","value","texParameteri","scale","return (function() ","innerWidth","ELEMENT_ARRAY_BUFFER","constructor","length","uModel","mat4","uniformMatrix4fv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","slider","mixParam","addBinding","chain","apply","FLOAT","5VEhDQu","TEXTURE_WRAP_T","offset_right_bottom","createTexture","UNSIGNED_BYTE","5690358EQjSFi","prototype","COLOR_ATTACHMENT0","clearColor","1130328FTwevO"];return(g=function(){return t})()}function A(t,n){const e=g();return(A=function(t,n){return e[t-=340]})(t,n)}const T=r({__name:"webglPostProcessing",setup(r){const _=x;let d,g,A,T,R,b,y,h,v,F,I,P,w;const C=1,S=.71,U=.76,B=new o({title:"参数"}),D=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});B.addBlade({view:_(410),label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=_;G(),g.uniform1f(P,t[n(398)])}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);B[_(412)](D,"hidden",{label:_(350)}),B[_(412)](D,_(345),{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(_(370),(t=>{const n=_;L[0]=D[n(345)].x,L[1]=D[n(345)].y,G()})),B[_(412)](D,_(418),{picker:_(386),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=_;L[5]=D[n(418)].x,L[6]=D[n(418)].y,G()})),B[_(412)](D,"offset_left_bottom",{picker:_(386),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(370),(t=>{L[10]=D.offset_left_bottom.x,L[11]=D.offset_left_bottom.y,G()})),B[_(412)](D,_(440),{picker:_(386),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(370),(t=>{const n=_;L[15]=D[n(440)].x,L[16]=D.offset_left_top.y,G()})),a((()=>{M()}));const M=function(){const n=_;d=document[n(394)](n(429)),d[n(342)]=window[n(402)],d.height=window[n(364)],g=d[n(372)](n(347)),g&&(function(){const n=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=X(e,o),A=t(g,l,m),v=g.getUniformLocation(A,n(383)),F=g[n(362)](A,n(360)),I=g[n(362)](A,n(406)),w=O(document[n(361)](n(369)))}(),G(),g[n(438)](g[n(353)]),g[n(358)](g[n(436)],g.ONE_MINUS_SRC_ALPHA),N())};function N(){const t=_;g[t(433)](g[t(357)],y),g[t(424)](C,S,U,1),g[t(377)](g[t(396)]),function(){const t=_;g[t(371)](A),g[t(431)](g.ARRAY_BUFFER,T);const o=n[t(348)]();e[t(407)][t(376)](o,0,d[t(342)],d[t(356)],0,.1,100),g[t(408)](v,!1,o);const r=e[t(407)][t(348)]();e[t(407)][t(381)](r,[0,0,1],[0,0,0],[0,1,0]),g.uniformMatrix4fv(F,!1,r),j(w,600,600),j(w,400,400)}(),g[t(433)](g[t(357)],null),D[t(355)]&&(g[t(377)](g[t(396)]),g[t(424)](0,0,1,1),g[t(431)](g[t(382)],R),g[t(371)](b),g[t(395)](g[t(439)],h)),g.drawElements(g[t(435)],6,g[t(420)],0),requestAnimationFrame(N)}function j(t,n,o){const r=_;let i=e[r(407)][r(348)]();e[r(407)][r(365)](i,i,[n,o,0]),e[r(407)][r(400)](i,i,[250,250,0]),g[r(408)](I,!1,i),g[r(395)](g.TEXTURE_2D,t),g[r(427)](g.TRIANGLES,6,g.UNSIGNED_BYTE,0)}function G(){const n=_,e=new Uint8Array([0,1,2,0,2,3]);R=X(L,e),b=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=g[n(362)](b,n(411)),g[n(362)](b,n(373)),function(){const t=_;h=O(d),y=g[t(389)](),g[t(433)](g.FRAMEBUFFER,y),g[t(349)](g.FRAMEBUFFER,g[t(423)],g[t(439)],h,0),g[t(433)](g[t(357)],null)}()}function O(t){const n=_,e=g[n(419)]();return g.bindTexture(g[n(439)],e),t instanceof HTMLImageElement?g[n(352)](g[n(439)],0,g[n(341)],g[n(341)],g[n(420)],t):g.texImage2D(g[n(439)],0,g[n(341)],t[n(342)],t[n(356)],0,g.RGBA,g[n(420)],null),g[n(399)](g[n(439)],g[n(393)],g.NEAREST),g[n(399)](g[n(439)],g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g[n(439)],g[n(432)],g[n(434)]),g.texParameteri(g.TEXTURE_2D,g[n(417)],g[n(434)]),e}function X(t,n){const e=_,o=g.createBuffer();g[e(431)](g[e(382)],o),g[e(441)](g[e(382)],t,g[e(343)]);const r=3*Float32Array[e(375)]+2*Float32Array[e(375)];g[e(388)](0,3,g[e(415)],!1,r,0),g.enableVertexAttribArray(0),g[e(388)](1,2,g[e(415)],!1,r,3*Float32Array[e(375)]),g[e(363)](1);const i=g[e(366)]();return g[e(431)](g[e(403)],i),g[e(441)](g[e(403)],n,g.STATIC_DRAW),g[e(431)](g[e(382)],null),o}return(t,n)=>{const e=_;return c(),s("canvas",E,[u("img",{id:e(369),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(354)}},null,8,p)])}}});function R(t){function n(t){const e=A;if("string"==typeof t)return function(t){}.constructor(e(379)).apply(e(391));1!==(""+t/t).length||t%20==0?function(){return!0}[e(404)](e(437)+e(351))[e(392)]("action"):function(){return!1}[e(404)](e(437)+e(351))[e(414)](e(344)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as default};

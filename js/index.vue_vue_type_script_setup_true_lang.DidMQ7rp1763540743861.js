import{_ as t}from"./text.vue_vue_type_script_setup_true_lang.BTS0LgHy1763540743861.js";import{d as e,a,q as o,w as i,H as s,o as n,F as r,X as l,J as c,h as d}from"./@vue.Co_gxueH1763540743861.js";import{bb as h,j as u,ad as p,bS as f}from"./three.rXKzP9fQ1763540743861.js";const m=["rotation"],v=["geometry","rotation"],g=["color"],M=e({__name:"index",props:{data:{default:[{value:31,title:"%",titleSize:.7,color:"#5072c4"},{value:12,title:"%",titleSize:.5,color:"#92cb79"},{value:10,title:"%",titleSize:.4,color:"#fcc660"},{value:47,title:"%",titleSize:.7,color:"#ef6467"}]},radius:{default:.3},depth:{default:.1},spacing:{default:.02},rotatetext:{default:0}},setup(e){const M=e,y=[],z=()=>{y.splice(0,y.length);const t=M.data.map(t=>t.value).reduce((t,e)=>t+e);let e=0;M.data.forEach(a=>{const o=a.value/t*Math.PI*2;if(o){const t=((t,e)=>{const a=(new f).lineTo(t,0),o=e/180;for(let i=0;i<=e;i+=o){const e=t*Math.cos(i),o=t*Math.sin(i);a.lineTo(e,o)}return a.closePath(),a})(M.radius,o);let i=new h(t,{bevelEnabled:!1,depth:M.depth});y.push({geometry:i,slice:o,radians:e,data:a}),e+=o}else y.push({geometry:new u,slice:0,radians:e,data:{value:"",title:"",titleSize:.1,color:"#000"}})})};z();const _=a(null),x={},S=()=>{_.value.children.forEach((t,e)=>{const a=y[e],o=new p;t.children[0].add(o);const i=a.slice/2;x[e]||(x[e]=[t.children[0].position.x,t.children[0].position.y,t.children[0].position.z]),t.children[0].position.x=x[e][0],t.children[0].position.y=x[e][1],t.children[0].position.z=x[e][2],t.children[0].translateX(Math.cos(i)*M.spacing),t.children[0].translateY(Math.sin(i)*M.spacing);let s=.6;a.slice<Math.PI/2&&(s=.7),o.translateX(Math.cos(i)*M.radius*s),o.translateY(Math.sin(i)*M.radius*s),o.translateZ(M.depth),t.children[0].children[0].position.set(o.position.x,o.position.y,o.position.z),t.children[0].remove(o)})};return o(()=>{S()}),i(()=>[M.radius,M.depth,M.spacing],()=>{z(),S()}),(e,a)=>(n(),s("TresGroup",{rotation:[-Math.PI/2,0,0],ref_key:"group",ref:_},[(n(),s(r,null,l(y,(a,o)=>c("TresGroup",{key:o},[c("TresMesh",{geometry:a.geometry,rotation:[0,0,a.radians]},[c("TresMeshStandardMaterial",{color:a.data.color},null,8,g),d(t,{rotation:[0,0,-a.radians-e.rotatetext],textContent:`${a.data.value}${a.data.title}`,fontSize:a.data.titleSize},null,8,["rotation","textContent","fontSize"])],8,v)])),64))],8,m))}});export{M as _};

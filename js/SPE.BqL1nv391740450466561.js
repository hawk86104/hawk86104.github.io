import{_ as t,z as e,X as i,bN as n,V as s,ar as o,C as r,l as a,d as c,a as h,b as l}from"./three.HaMTRCf61740450466561.js";const u=g;function f(){const t=["  return 1.0 - when_lt(x, y);","ceil","604723naQzvl","min","   return c;","getHex","_assignRotationValue","abs","BufferAttribute","uniforms","_attributesNeedDynamicReset","   }","POSITIVE_INFINITY","       float c = cos( -vAngle );","particleCount","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","_assignAbsLifetimeValue","  return 1.0 - when_gt(x, y);","string","dynamicBuffer","      translated = rotationCenter - pos;","depthTest","        float row = floor( (frameNumber - column) / framesX );","_triggerSingleEmitter","        float columnNorm = column / framesX;","getLength","ensureValueOverLifetimeCompliance","indexOf","utils","particlesPerSecond","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","    highp float alive = getAlive();","defines","DynamicDrawUsage","_createNewWhenPoolEmpty","SHOULD_CALCULATE_SPRITE","_spread","push","addEmitter","StaticDrawUsage","textureFrameCount","table","rotation","_angleSpread","count","ensureArrayTypedArg","    #ifdef SHOULD_WIGGLE_PARTICLES","shrink","_updateDefines","float when_eq( float x, float y ) {","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","stateObject","common","        float loopCount = textureAnimation.w;","uuid","AdditiveBlending","forceUpdateAll","exception","drag","fog","_assignColorValue","lerp","    return value;","attribute vec4 params;","activeParticleCount","       vec3 c = isAlive * getColorOverLifetime(","Color","elements","_updateAttributeUpdateRange","generateUUID","_createGetterSetters","fragment","radiusScale","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","       vec3 c = vec3(1.0);","_incrementParticleCount","typedArray","activeMultiplier","_assignValue","BufferGeometry","age","_value","loop","tick","logdepthbuf_fragment","sin","    }","float and(float a, float b) {","roundToNearestMultiple","randomise","alive","random","max","resetUpdateRange","splice","indexOffset","9336wMwrwH","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","uniform float deltaTime;","attributeCount","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","_center","subarray","_angle","offset","debu","      mat4 rotationMatrix;","randomVector3OnSphere","_calculatePPSValue","fixedTimeStep","uniform sampler2D tex;","   c.g = g / PACKED_COLOR_DIVISOR;","types","angleSpread","grow","    ","    float pointSizePerspective = pointSize * perspective;","activationEnd","disable","setMat3","randomVector3OnDisc","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","resetFlags","_randomise","_applyAttributesToGeometry","float getMaxAge() {","duration","unpackColor","   c.r = r / PACKED_COLOR_DIVISOR;","paramsArray","_assignPositionValue","attribute vec4 rotation;","OBJECT","#endif","frames","randomDirectionVector3OnSphere","       fIndex = float( i );","geometry","axis","    #endif","   return acceleration.xyz * age;","Emitter already belongs to another group. Will not add to requested group.","triggerPoolEmitter","angle","ShaderAttribute","SHOULD_ROTATE_PARTICLES","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","attribute vec4 size;","gger","emitterIDs","componentSize","`emitter` argument must be instance of SPE.Emitter. Was provided with:","_updateBuffers","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","5zmZFQN","params","setDrawRange","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","valueOverLifetimeLength","        float wiggleCos = isAlive * cos( wiggleAmount );","acceleration","undefined","    #ifdef SHOULD_ROTATE_PARTICLES","updateCounts","clamp","float when_gt(float x, float y) {","copy","toString","    #ifdef ALPHATEST","textureLoop","    highp float maxAge = getMaxAge();","       );","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","setVec3Components","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","Texture","updateFlags","uniform float scale;","void main() {","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","attribute vec4 acceleration;","_onRemove","setSize","           return pos;","    highp float age = getAge();","      if( rotation.y == 0.0 ) {","Emitter","   return params.w;","randomVector3","       axis = normalize(axis);","dispose","ensureInstanceOf","2232621PVPHgZ","counter","50ZEzfXe","textureFrames","BOOLEAN","Emitter does not belong to a group, cannot remove.","length","value","SHOULD_WIGGLE_PARTICLES","DISC","SPE.Group: maxParticleCount exceeded. Requesting","    gl_PointSize = pointSizePerspective;","activationIndex","#define PACKED_COLOR_DIVISOR 255.0","        pos = getRotation( pos, positionInTime );","round","    vec3 force = vec3( 0.0 );","trace","vec3 getVelocity( in float age ) {","ShaderChunk","Will not resize.","        float perspective = 1.0;","getValueAtIndex","1274604mqXRUz","removeEmitter","_setAttributeOffset","           positionInTime,","return (function() ","           unpackColor( color.z ),","rotateTexture","_decrementParticleCount","colorize","randomFloat","   return params.y;","    highp float value = 0.0;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","NUMBER","rotationCenter","number","center","size","    #ifdef COLORIZE","setColor","       float y = 1.0 - gl_PointCoord.y - 0.5;","   c.b = b / PACKED_COLOR_DIVISOR;","_distribution","cos","logdepthbuf_pars_fragment","        float rowNorm = row / framesY;","uniform float runTime;","direction","prototype","updateMin","MathUtils","           unpackColor( color.y ),","radius","fog_pars_fragment","spreadClamp","releaseIntoPool","log","getPool","velocity","transparent","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","setVec2Components","bufferAttribute","    float fIndex = 0.0;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","_poolCreationSettings","isArray","    force += accel * age;","45ZBdnsV","info","float when_ge(float x, float y) {","        float framesX = vSpriteSheet.x;","        float perspective = scale / length( mvPosition.xyz );","_activateParticles","getComponentValueAtIndex","setVec4Components","    pos += force;","arrayType","lerpTypeAgnostic","Invalid argument types, or argument types do not match:","SPE.Group pool ran out.","setVec4","attributeOffset","bufferUpdateRanges","_assignForceValue","logdepthbuf_vertex","    force += vel;","BOX","attribute vec3 rotationCenter;","_rotationCenter","attributes","blending","        vSpriteSheet.x = 1.0 / framesX;","frameCount","    return 1.0 - abs( sign( x - y ) );","53094Wxkega","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","error","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","group","getFromPool","maxParticleCount","needsUpdate","isStatic","exports","bufferUpdateKeys","arrayValuesAreEqual","_attributesNeedRefresh","        float columnNorm = vSpriteSheet.z;","distributions","attribute vec4 angle;","rotationFunctions","input","mesh","   return velocity * age;","updateMap","replace","array","6443816cZQoGn","keys","console","_radiusScale","    force *= drag;","attributeKeys","_assignAngleValue","Vector2","_ensureTypedArray","_assignParamsValue","float getAge() {","    #ifdef SHOULD_CALCULATE_SPRITE","Vector4","_pool","updateMax","bind","paramFetchingFunctions","    varying float vAngle;","        float framesX = textureAnimation.x;","position","normalize","shaderChunks","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","_axis","   c *= vec3( 2.0 );","distribution","        vSpriteSheet.w = rowNorm;","float getAlive() {","        float wiggleSin = isAlive * sin( wiggleAmount );","deltaTime","particles, can support only","LINE","wiggle","#define PACKED_COLOR_SIZE 256.0","scale","    return a * b;","        float framesY = textureAnimation.y;","forceFetchingFunctions","   return params.x;","attribute vec4 color;","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","defineProperty","static","set","addPool","hasPerspective","warn","action","setVec3","    highp float isAlive = when_gt( alive, 0.0 );","emitters","_updateUniforms","    float shouldApplyValue = 0.0;","enable","      rotationMatrix = getRotationMatrix( axis, angle );","chain","spread","SPHERE","color","        vSpriteSheet.y = 1.0 / framesY;","updateRange","ensureTypedArg","setUpdateRange","setNumber","    vColor = vec4( c, o );","_spreadClamp","fog_pars_vertex","hasOwnProperty","remove","varyings","axisSpread","#ifdef SHOULD_ROTATE_TEXTURE","      vec3 translated;","reset","       float oc = 1.0 - c;","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","depthWrite","    vec3 pos = vec3( position );","test","amd","       float c = cos(angle);","Group","constructor","vec3 unpackRotationAxis( in float hex ) {","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","_setBufferUpdateRanges","resetDynamic","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","apply","texture","shaders","_resetBufferRanges","function *\\( *\\)","        pos.y += wiggleCos;","5097636DMjAHd","logdepthbuf_pars_vertex","setMat4","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","multiplyScalar","   vec3 c = vec3( 0.0 );","    gl_Position = projectionMatrix * mvPosition;","    #ifdef HAS_PERSPECTIVE","_resetParticle","attributeEnd","SHOULD_ROTATE_TEXTURE","       float x = gl_PointCoord.x - 0.5;","alphaTest","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","clone","ensureArrayInstanceOf","TypedArrayHelper","type","        float totalFrames = textureAnimation.z;","vec3 unpackColor( in float hex ) {","Emitter already exists in this group. Will not add again.","    #else","opacity","runTime","setFromArray","pop","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","flagUpdate","   float b = mod( hex, PACKED_COLOR_SIZE );","    vec4 rotatedTexture = texture2D( tex, vUv );","float getWiggle() {","spe","           unpackColor( color.x ),","join","_createBufferAttribute","colorOverLifetime","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","usage","vertex","call","branchAvoidanceFunctions","onParticleSpawn","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","    #ifdef SHOULD_ROTATE_TEXTURE","float when_le(float x, float y) {","Vector3",'{}.constructor("return this")( )',"__proto__","maxAge","bufferUpdateCount","   c -= vec3( 1.0 );","    vec3 accel = getAcceleration( age );","randomDirectionVector3OnDisc","interpolateArray","function","material","    return max(sign(x - y), 0.0);"];return(f=function(){return t})()}!function(t,e){const i=g,n=f();for(;;)try{if(590017===parseInt(i(501))/1+-parseInt(i(695))/2*(-parseInt(i(668))/3)+-parseInt(i(620))/4*(parseInt(i(559))/5)+parseInt(i(812))/6+parseInt(i(407))/7+parseInt(i(718))/8+-parseInt(i(597))/9*(parseInt(i(599))/10))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[g(806)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){p(this,(function(){const t=g,e=new RegExp(t(810)),i=new RegExp(t(815),"i"),n=v("init");e[t(796)](n+t(773))&&i[t(796)](n+t(712))?v():n("0")}))()}();const d=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[g(806)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();d(void 0,(function(){const t=g;let e;try{e=Function(t(624)+t(394)+");")()}catch(s){e=window}const i=e[t(720)]=e[t(720)]||{},n=["log",t(764),t(669),t(697),t(462),t(446),t(614)];for(let o=0;o<n[t(603)];o++){const e=d.constructor[t(648)][t(733)](d),s=n[o],r=i[s]||e;e[t(395)]=d[t(733)](d),e[t(572)]=r.toString[t(733)](r),i[s]=e}}))();const m={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function g(t,e){const i=f();return(g=function(t,e){return i[t-=372]})(t,e)}"function"==typeof define&&define[u(797)]?define(u(379),m):typeof exports!==u(566)&&"undefined"!=typeof module&&(module[u(704)]=m),m.TypedArrayHelper=function(t,e,i,n){const s=u;this[s(555)]=i||1,this.size=e||1,this.TypedArrayConstructor=t||Float32Array,this[s(717)]=new t(e*this[s(555)]),this[s(500)]=n||0},m.TypedArrayHelper[u(800)]=m[u(828)],m[u(828)].prototype[u(587)]=function(t,e){const i=u,n=this[i(717)][i(603)];return!e&&(t*=this[i(555)]),t<n?this[i(452)](t):t>n?this[i(519)](t):void console[i(669)]("TypedArray is already of size:",t+".",i(617))},m[u(828)][u(648)][u(452)]=function(t){const e=u;return this[e(717)]=this[e(717)][e(507)](0,t),this[e(637)]=t,this},m[u(828)][u(648)][u(519)]=function(t){const e=u,i=this[e(717)],n=new this.TypedArrayConstructor(t);return n[e(761)](i),this[e(717)]=n,this.size=t,this},m[u(828)][u(648)][u(499)]=function(t,e){const i=u;t*=this[i(555)],e*=this.componentSize;const n=[],s=this[i(717)],o=s[i(603)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(442)](s[r]);return this[i(372)](0,n),this},m[u(828)][u(648)][u(372)]=function(t,e){const i=u,n=t+e.length;return n>this[i(717)][i(603)]?this.grow(n):n<this[i(717)].length&&this[i(452)](n),this[i(717)][i(761)](e,this.indexOffset+t),this},m.TypedArrayHelper.prototype.setVec2=function(t,e){return this[u(661)](t,e.x,e.y)},m[u(828)].prototype[u(661)]=function(t,e,i){const n=u,s=this.array,o=this[n(500)]+t*this[n(555)];return s[o]=e,s[o+1]=i,this},m[u(828)].prototype.setVec3=function(t,e){return this[u(578)](t,e.x,e.y,e.z)},m.TypedArrayHelper[u(648)][u(578)]=function(t,e,i,n){const s=u,o=this[s(717)],r=this.indexOffset+t*this[s(555)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},m[u(828)][u(648)][u(681)]=function(t,e){return this[u(675)](t,e.x,e.y,e.z,e.w)},m[u(828)].prototype[u(675)]=function(t,e,i,n,s){const o=u,r=this[o(717)],a=this[o(500)]+t*this[o(555)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},m[u(828)][u(648)][u(524)]=function(t,e){const i=u;return this[i(372)](this[i(500)]+t*this[i(555)],e[i(472)])},m[u(828)][u(648)][u(814)]=function(t,e){const i=u;return this[i(372)](this.indexOffset+t*this[i(555)],e[i(472)])},m[u(828)][u(648)][u(639)]=function(t,e){return this[u(578)](t,e.r,e.g,e.b)},m[u(828)][u(648)][u(781)]=function(t,e){const i=u;return this.array[this.indexOffset+t*this[i(555)]]=e,this},m[u(828)][u(648)][u(619)]=function(t){const e=u;return this.array[this[e(500)]+t]},m[u(828)][u(648)][u(674)]=function(t){const e=u;return this[e(717)][e(507)](this[e(500)]+t*this[e(555)])},m[u(549)]=function(t,e,i){const n=u,s=m[n(549)].typeSizeMap;this[n(829)]="string"==typeof t&&s[n(785)](t)?t:"f",this[n(555)]=s[this[n(829)]],this[n(677)]=i||Float32Array,this[n(481)]=null,this[n(662)]=null,this[n(424)]=!!e,this[n(649)]=0,this[n(732)]=0},m[u(549)][u(800)]=m[u(549)],m[u(549)].typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},m[u(549)].prototype.setUpdateRange=function(t,e){const i=u;this[i(649)]=Math[i(408)](t*this.componentSize,this[i(649)]*this[i(555)]),this[i(732)]=Math[i(497)](e*this[i(555)],this[i(732)]*this[i(555)])},m[u(549)][u(648)][u(375)]=function(){const t=u,e=this[t(662)];!e[t(778)]&&(e[t(778)]={});const i=e[t(778)];i[t(509)]=this[t(649)],i.count=Math[t(408)](this[t(732)]-this[t(649)]+this[t(555)],this[t(481)].array[t(603)]),e.needsUpdate=!0},m[u(549)][u(648)][u(498)]=function(){this[u(649)]=0,this.updateMax=0},m[u(549)][u(648)][u(804)]=function(){const e=u;this[e(662)][e(385)]=this[e(424)]?t[e(438)]:t[e(444)]},m[u(549)][u(648)][u(499)]=function(t,e){const i=u;this[i(481)][i(499)](t,e),this[i(461)]()},m[u(549)].prototype[u(461)]=function(){const e=u;this[e(662)][e(717)]=this.typedArray.array,this[e(662)][e(778)][e(509)]=0,this.bufferAttribute[e(778)][e(449)]=-1,this[e(662)][e(385)]=t[e(444)],this[e(662)][e(702)]=!0},m.ShaderAttribute[u(648)][u(726)]=function(t){const e=u;null!==this[e(481)]&&this[e(481)].size===t*this.componentSize||(null!==this.typedArray&&this[e(481)][e(637)]!==t?this.typedArray[e(587)](t):null===this[e(481)]&&(this[e(481)]=new(m[e(828)])(this[e(677)],t,this[e(555)])))},m[u(549)][u(648)]._createBufferAttribute=function(n){const s=u;if(this[s(726)](n),null!==this[s(662)])return this[s(662)].array=this.typedArray[s(717)],parseFloat(e)>=81&&(this[s(662)][s(449)]=this[s(662)][s(717)].length/this[s(662)].itemSize),void(this[s(662)][s(702)]=!0);this[s(662)]=new(t[s(413)])(this[s(481)][s(717)],this.componentSize),this[s(662)][s(385)]=this[s(424)]?i:t[s(444)]},m.ShaderAttribute[u(648)][u(430)]=function(){const t=u;return null===this[t(481)]?0:this[t(481)].array[t(603)]},m[u(739)]={defines:[u(751),u(610)][u(381)]("\n"),uniforms:[u(503),u(646),u(515),"uniform vec4 textureAnimation;",u(582)][u(381)]("\n"),attributes:[u(585),"attribute vec3 velocity;",u(536),u(688),u(468),u(552),u(710),u(757),"attribute vec4 opacity;"][u(381)]("\n"),varyings:["varying vec4 vColor;",u(789),u(735),"#endif","#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;",u(538)][u(381)]("\n"),branchAvoidanceFunctions:[u(570),u(404),"}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}",u(454),u(694),"}",u(670),u(405),"}",u(392),u(422),"}",u(492),u(753),"}","float or(float a, float b) {","    return min(a + b, 1.0);","}"][u(381)]("\n"),unpackColor:[u(831),"   vec3 c = vec3( 0.0 );",u(551),u(579),u(376),u(533),u(516),u(641),u(409),"}"].join("\n"),unpackRotationAxis:[u(801),u(817),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",u(579),u(376),u(533),u(516),u(641),u(742),u(398),u(409),"}"][u(381)]("\n"),floatOverLifetime:[u(584),u(631),u(632),u(663),u(770),u(420),"",u(435),u(541),u(793),u(805),u(491),"",u(467),"}"][u(381)]("\n"),colorOverLifetime:[u(660),"    vec3 value = vec3( 0.0 );",u(802),u(825),u(696),u(467),"}"][u(381)]("\n"),paramFetchingFunctions:[u(745),u(756),"}",u(728),u(630),"}",u(530),"   return params.z;","}",u(378),u(592),"}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","}",u(615),u(714),"}","vec3 getAcceleration( in float age ) {",u(545),"}"][u(381)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",u(740),u(594),"       float s = sin(angle);",u(798),u(792),"","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",u(562),"                   0.0,                                0.0,                                0.0,                                1.0);","   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",u(590),u(588),"      }","","      vec3 axis = unpackRotationAxis( rotation.x );","      vec3 center = rotationCenter;",u(790),u(511),"      float angle = 0.0;",u(502),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",u(425),u(772),u(758),u(416),"#endif"][u(381)]("\n"),rotateTexture:[u(478),"","    #ifdef SHOULD_ROTATE_TEXTURE",u(823),u(640),u(418),"       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",u(544),"",u(729),u(671),"        float framesY = vSpriteSheet.y;",u(708),"        float rowNorm = vSpriteSheet.w;",u(384),u(664),u(544),"",u(377)][u(381)]("\n")},m[u(808)]={vertex:[m[u(739)][u(437)],m.shaderChunks[u(414)],m[u(739)][u(690)],m.shaderChunks[u(787)],n[u(457)],t[u(616)][u(813)],n[u(784)],m.shaderChunks[u(388)],m[u(739)][u(532)],m[u(739)].unpackRotationAxis,m[u(739)].floatOverLifetime,m.shaderChunks[u(383)],m[u(739)][u(734)],m[u(739)][u(755)],m[u(739)][u(711)],u(583),u(589),u(436),u(575),"    highp float positionInTime = (age / maxAge);",u(767),u(451),"        float wiggleAmount = positionInTime * getWiggle();",u(746),u(564),u(544),"    vec3 vel = getVelocity( age );",u(399),u(613),u(795),u(505),u(686),u(722),u(667),u(676),u(451),"        pos.x += wiggleSin;",u(811),"        pos.z += wiggleSin;",u(544),u(567),u(611),u(544),u(577),u(374),u(819),u(672),"    #else",u(618),u(544),u(521),u(638),u(470),u(623),u(380),u(651),u(625),"           unpackColor( color.w )",u(576),u(833),u(479),u(544),u(526),u(782),u(391),u(558),u(544),u(729),u(736),u(754),u(458),u(830),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));",u(427),u(429),u(645),u(692),u(777),"        vSpriteSheet.z = columnNorm;",u(744),"    #endif",u(608),u(818),t[u(616)][u(685)],t[u(616)].fog_vertex,"}"][u(381)]("\n"),fragment:[m[u(739)].uniforms,t[u(616)][u(457)],t[u(616)][u(653)],t[u(616)][u(644)],m[u(739)][u(787)],m[u(739)][u(388)],u(583),"    vec3 outgoingLight = vColor.xyz;",u(520),u(573),"       if ( vColor.w < float(ALPHATEST) ) discard;",u(544),m[u(739)][u(626)],t[u(616)][u(489)],u(455),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[u(616)].fog_fragment,"}"][u(381)]("\n")},m[u(433)]={types:{BOOLEAN:"boolean",STRING:u(423),NUMBER:u(635),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=u;if(Array[n(666)](t)){for(let s=t[n(603)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(779)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=u;if(Array[n(666)](t)){for(let s=t[n(603)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(596)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=u;e=e||3,i=i||3,!1===Array[n(666)](t[n(486)])&&(t._value=[t[n(486)]]),!1===Array[n(666)](t._spread)&&(t[n(441)]=[t[n(441)]]);const s=this[n(569)](t[n(486)][n(603)],e,i),o=this[n(569)](t[n(441)][n(603)],e,i),r=Math[n(497)](s,o);t[n(486)][n(603)]!==r&&(t._value=this[n(401)](t[n(486)],r)),t[n(441)].length!==r&&(t[n(441)]=this[n(401)](t[n(441)],r))},interpolateArray(t,e){const i=u,n=t.length,s=["function"==typeof t[0][i(826)]?t[0].clone():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math.floor(e),a=Math[i(406)](e),c=e-n;s[r]=this[i(678)](t[n],t[a],c)}return s.push(typeof t[n-1].clone===i(402)?t[n-1].clone():t[n-1]),s},clamp(t,e,i){const n=u;return Math.max(e,Math[n(408)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[u(496)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const a=u;let c,h=this[a(517)];return typeof e===h[a(633)]&&typeof i===h[a(633)]?e+(i-e)*n:e instanceof t[a(725)]&&i instanceof s?(c=e.clone(),c.x=this[a(466)](e.x,i.x,n),c.y=this[a(466)](e.y,i.y,n),c):e instanceof t[a(393)]&&i instanceof t[a(393)]?(c=e[a(826)](),c.x=this.lerp(e.x,i.x,n),c.y=this[a(466)](e.y,i.y,n),c.z=this[a(466)](e.z,i.z,n),c):e instanceof o&&i instanceof t[a(730)]?(c=e[a(826)](),c.x=this[a(466)](e.x,i.x,n),c.y=this[a(466)](e.y,i.y,n),c.z=this[a(466)](e.z,i.z,n),c.w=this[a(466)](e.w,i.w,n),c):e instanceof r&&i instanceof t[a(471)]?(c=e[a(826)](),c.r=this[a(466)](e.r,i.r,n),c.g=this.lerp(e.g,i.g,n),c.b=this.lerp(e.b,i.b,n),c):void console[a(764)](a(679),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=u;let n=0;return 0===e?t:(n=Math[i(412)](t)%e,0===n?t:t<0?-(Math[i(412)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=u;for(let i=0;i<t[e(603)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[u(496)]()-.5),randomVector3(t,e,i,n,s){const o=u;let r=i.x+(Math[o(496)]()*n.x-.5*n.x),a=i.y+(Math[o(496)]()*n.y-.5*n.y),c=i.z+(Math[o(496)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this.roundToNearestMultiple(r,s.x),a=.5*-s.y+this[o(493)](a,s.y),c=.5*-s.z+this[o(493)](c,s.z)),t[o(481)].setVec3Components(e,r,a,c)},randomColor(t,e,i,n){const s=u;let o=i.r+Math[s(496)]()*n.x,r=i.g+Math[s(496)]()*n.y,a=i.b+Math[s(496)]()*n.z;o=this[s(569)](o,0,1),r=this[s(569)](r,0,1),a=this.clamp(a,0,1),t[s(481)][s(578)](e,o,r,a)},randomColorAsHex:function(){const e=u,i=new(t[e(471)]);return function(t,n,s,o){const r=e,a=s.length,c=[];for(let e=0;e<a;++e){const t=o[e];i[r(571)](s[e]),i.r+=Math[r(496)]()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math[r(496)]()*t.z-.5*t.z,i.r=this[r(569)](i.r,0,1),i.g=this[r(569)](i.g,0,1),i.b=this[r(569)](i.b,0,1),c[r(442)](i[r(410)]())}t.typedArray[r(675)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=u,o=i[s(826)]();o[s(466)](n,Math[s(496)]()),t.typedArray[s(578)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=u;let h=2*Math[c(496)]()-1,l=6.2832*Math[c(496)](),f=Math.sqrt(1-h*h),p=this[c(629)](n,s),d=0,m=0,g=0;r&&(p=Math[c(612)](p/r)*r),d=f*Math[c(643)](l)*p,m=f*Math.sin(l)*p,g=h*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[c(481)][c(578)](e,d,m,g)},seededRandom(t){const e=1e4*Math[u(490)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=u;let c=6.2832*Math.random(),h=Math[a(412)](this[a(629)](n,s)),l=0,f=0,p=0;r&&(h=Math[a(612)](h/r)*r),l=Math.cos(c)*h,f=Math.sin(c)*h,l*=o.x,f*=o.y,l+=i.x,f+=i.y,p+=i.z,t[a(481)][a(578)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const e=u,i=new(t[e(393)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(571)](a),i.x-=s,i.y-=o,i.z-=r,i[l(738)]()[l(816)](-this.randomFloat(c,h)),t[l(481)][l(578)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=u,i=new(t[e(393)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(571)](a),i.x-=s,i.y-=o,i.z-=r,i[l(738)]()[l(816)](-this[l(629)](c,h)),t[l(481)][l(578)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=u,i=new(t[e(393)]),n=new(t[e(393)]),s=new(t[e(471)]),o=new(t[e(393)])(1,1,1);return function(t,r){const a=e;return i[a(571)](t)[a(738)](),n[a(571)](r)[a(738)](),i.x+=.5*-r.x+Math[a(496)]()*r.x,i.y+=.5*-r.y+Math[a(496)]()*r.y,i.z+=.5*-r.z+Math[a(496)]()*r.z,i[a(738)]().add(o)[a(816)](.5),s.setRGB(i.x,i.y,i.z),s[a(410)]()}}()},m[u(799)]=function(e){const i=u,n=m[i(433)],o=n.types;(e=n[i(779)](e,o[i(537)],{}))[i(807)]=n[i(779)](e[i(807)],o[i(537)],{}),this[i(459)]=t[i(650)][i(474)](),this[i(514)]=n[i(779)](e[i(514)],o.NUMBER,.016),this[i(807)]=n[i(596)](e[i(807)][i(604)],t[i(580)],null),this.textureFrames=n[i(596)](e[i(807)][i(539)],s,new(t[i(725)])(1,1)),this[i(445)]=n[i(779)](e[i(807)][i(693)],o[i(633)],this[i(600)].x*this.textureFrames.y),this.textureLoop=n[i(779)](e[i(807)][i(487)],o[i(633)],1),this[i(600)][i(497)](new s(1,1)),this.hasPerspective=n.ensureTypedArg(e.hasPerspective,o[i(601)],!0),this[i(628)]=n[i(779)](e[i(628)],o[i(601)],!0),this[i(701)]=n[i(779)](e.maxParticleCount,o.NUMBER,null),this[i(691)]=n.ensureTypedArg(e.blending,o[i(633)],t[i(460)]),this.transparent=n[i(779)](e.transparent,o[i(601)],!0),this.alphaTest=parseFloat(n[i(779)](e[i(824)],o[i(633)],0)),this[i(794)]=n[i(779)](e[i(794)],o[i(601)],!1),this[i(426)]=n[i(779)](e[i(426)],o[i(601)],!0),this[i(464)]=n.ensureTypedArg(e[i(464)],o[i(601)],!0),this.scale=n[i(779)](e.scale,o[i(633)],300),this.emitters=[],this.emitterIDs=[],this[i(731)]=[],this[i(665)]=null,this[i(439)]=0,this[i(707)]=!1,this[i(415)]=!1,this[i(419)]=0,this.uniforms={tex:{type:"t",value:this[i(807)]},textureAnimation:{type:"v4",value:new(t[i(730)])(this.textureFrames.x,this[i(600)].y,this[i(445)],Math[i(497)](Math[i(412)](this[i(574)]),1))},fogColor:{type:"c",value:this[i(464)]?new(t[i(471)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(752)]}},this[i(437)]={HAS_PERSPECTIVE:this[i(763)],COLORIZE:this[i(628)],VALUE_OVER_LIFETIME_LENGTH:m[i(563)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(600)].x>1||this[i(600)].y>1},this[i(690)]={position:new(m[i(549)])("v3",!0),acceleration:new(m[i(549)])("v4",!0),velocity:new m.ShaderAttribute("v3",!0),rotation:new m.ShaderAttribute("v4",!0),rotationCenter:new(m[i(549)])("v3",!0),params:new(m[i(549)])("v4",!0),size:new(m[i(549)])("v4",!0),angle:new(m[i(549)])("v4",!0),color:new(m[i(549)])("v4",!0),opacity:new m.ShaderAttribute("v4",!0)},this[i(723)]=Object[i(719)](this[i(690)]),this[i(504)]=this[i(723)][i(603)],this[i(403)]=new a({uniforms:this[i(414)],vertexShader:m.shaders[i(386)],fragmentShader:m[i(808)][i(476)],blending:this[i(691)],transparent:this[i(659)],alphaTest:this[i(824)],depthWrite:this[i(794)],depthTest:this[i(426)],defines:this.defines,fog:this[i(464)]}),this[i(542)]=new(t[i(484)]),this[i(713)]=new c(this[i(542)],this[i(403)]),null===this[i(701)]&&console[i(764)](i(390))},m.Group[u(800)]=m[u(799)],m.Group.prototype[u(453)]=function(){const t=u;let e,i=this[t(768)],n=i[t(603)]-1,s=this[t(437)];for(;n>=0;--n)e=i[n],!s[t(440)]&&(s[t(822)]=s.SHOULD_ROTATE_TEXTURE||!!Math[t(497)](Math.max[t(806)](null,e[t(548)][t(604)]),Math[t(497)].apply(null,e[t(548)][t(774)]))),s[t(550)]=s.SHOULD_ROTATE_PARTICLES||!!Math[t(497)](e[t(447)][t(548)],e[t(447)].angleSpread),s[t(605)]=s.SHOULD_WIGGLE_PARTICLES||!!Math[t(497)](e[t(750)][t(604)],e.wiggle[t(774)]);this[t(403)][t(702)]=!0},m.Group[u(648)]._applyAttributesToGeometry=function(){const t=u;let e,i,n=this[t(690)],s=this[t(542)],o=s.attributes;for(const r in n)n[t(785)](r)&&(e=n[r],i=o[r],i?i[t(717)]=e.typedArray[t(717)]:s.setAttribute(r,e.bufferAttribute),e[t(662)][t(702)]=!0);this[t(542)][t(561)](0,this[t(419)])},m.Group[u(648)][u(443)]=function(t){const e=u;if(t instanceof m[e(591)]==!1)return void console[e(697)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(554)][e(432)](t[e(459)])>-1)return void console.error(e(832));if(null!==t.group)return void console[e(697)](e(546));const i=this[e(690)],n=this.particleCount,s=n+t[e(419)];this[e(419)]=s,null!==this[e(701)]&&this[e(419)]>this[e(701)]&&console[e(764)](e(607),this[e(419)],e(748),this[e(701)]),t._calculatePPSValue(t[e(396)][e(486)]+t[e(396)][e(441)]),t[e(803)](this.attributeKeys),t[e(622)](n),t[e(699)]=this,t[e(690)]=this[e(690)];for(const o in i)i.hasOwnProperty(o)&&i[o][e(382)](null!==this.maxParticleCount?this[e(701)]:this.particleCount);for(let o=n;o<s;++o)t[e(535)](o),t[e(684)](o,"velocity"),t[e(684)](o,"acceleration"),t[e(421)](o,"opacity"),t[e(421)](o,e(637)),t[e(724)](o),t[e(411)](o),t[e(727)](o),t[e(465)](o);return this[e(529)](),this[e(768)].push(t),this.emitterIDs[e(442)](t.uuid),this[e(453)](t),this.material[e(702)]=!0,this[e(542)][e(702)]=!0,this[e(707)]=!0,this},m[u(799)].prototype[u(621)]=function(t){const e=u,i=this[e(554)][e(432)](t[e(459)]);if(t instanceof m.Emitter==!1)return void console[e(697)](e(556),t);if(-1===i)return void console[e(697)]("Emitter does not exist in this group. Will not remove.");const n=t.attributeOffset,s=n+t[e(419)],o=this[e(690)][e(560)][e(481)];for(let r=n;r<s;++r)o[e(717)][4*r]=0,o[e(717)][4*r+1]=0;this[e(768)][e(499)](i,1),this[e(554)].splice(i,1);for(const r in this[e(690)])this[e(690)][e(785)](r)&&this[e(690)][r][e(499)](n,s);this[e(419)]-=t[e(419)],t[e(586)](),this[e(707)]=!0},m.Group[u(648)][u(700)]=function(){const t=u,e=this._pool,i=this._createNewWhenPoolEmpty;if(e[t(603)])return e[t(373)]();if(i){const e=new(m[t(591)])(this[t(665)]);return this[t(443)](e),e}return null},m[u(799)][u(648)].releaseIntoPool=function(t){const e=u;if(t instanceof m[e(591)]!=!1)return t[e(791)](),this[e(731)].unshift(t),this;console.error("Argument is not instanceof SPE.Emitter:",t)},m[u(799)].prototype[u(657)]=function(){return this[u(731)]},m[u(799)][u(648)][u(762)]=function(t,e,i){const n=u;let s;this[n(665)]=e,this[n(439)]=!!i;for(let o=0;o<t;++o)s=Array[n(666)](e)?new m.Emitter(e[o]):new(m[n(591)])(e),this[n(443)](s),this[n(655)](s);return this},m.Group[u(648)][u(428)]=function(e){const i=u,n=this[i(700)](),s=this;if(null!==n)return e instanceof t[i(393)]&&(n[i(737)][i(604)][i(571)](e),n.position.value=n[i(737)][i(604)]),n.enable(),setTimeout((()=>{n.disable(),s.releaseIntoPool(n)}),1e3*Math[i(497)](n.duration,n[i(396)][i(604)]+n[i(396)].spread)),this;console[i(656)](i(680))},m[u(799)][u(648)][u(547)]=function(t,e){const i=u;if(typeof t===i(635)&&t>1)for(let n=0;n<t;++n)this[i(428)](e);else this._triggerSingleEmitter(e);return this},m.Group[u(648)]._updateUniforms=function(t){const e=u;this.uniforms[e(835)][e(604)]+=t,this[e(414)][e(747)][e(604)]=t},m[u(799)][u(648)]._resetBufferRanges=function(){const t=u;let e=this[t(723)],i=this[t(504)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(498)]()},m[u(799)].prototype[u(557)]=function(t){const e=u;let i,n,s,o=this[e(723)],r=this[e(504)]-1,a=this.attributes,c=t[e(683)];for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s[e(780)](n.min,n[e(497)]),s[e(375)]()},m[u(799)][u(648)].tick=function(t){const e=u;var i=this[e(768)],n=i.length,s=t||this[e(514)],o=this[e(723)],r=this[e(690)];if(this[e(769)](s),this[e(809)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this._attributesNeedDynamicReset){for(var a,c=0;c<n;++c)(a=i[c]).tick(s),this[e(557)](a);if(!0===this._attributesNeedDynamicReset){for(c=this[e(504)]-1;c>=0;--c)r[o[c]][e(804)]();this[e(415)]=!1}if(!0===this[e(707)]){for(c=this.attributeCount-1;c>=0;--c)r[o[c]].forceUpdateAll();this[e(707)]=!1,this._attributesNeedDynamicReset=!0}}},m[u(799)].prototype[u(595)]=function(){const t=u;return this.geometry[t(595)](),this[t(403)].dispose(),this},m[u(591)]=function(e){const i=u,n=m[i(433)],s=n[i(517)],o=m[i(563)];(e=n[i(779)](e,s[i(537)],{}))[i(737)]=n.ensureTypedArg(e[i(737)],s[i(537)],{}),e.velocity=n.ensureTypedArg(e[i(658)],s[i(537)],{}),e[i(565)]=n[i(779)](e[i(565)],s[i(537)],{}),e[i(652)]=n[i(779)](e[i(652)],s[i(537)],{}),e[i(463)]=n[i(779)](e.drag,s.OBJECT,{}),e[i(447)]=n[i(779)](e[i(447)],s[i(537)],{}),e[i(776)]=n[i(779)](e.color,s[i(537)],{}),e.opacity=n[i(779)](e.opacity,s.OBJECT,{}),e.size=n[i(779)](e[i(637)],s[i(537)],{}),e[i(548)]=n[i(779)](e[i(548)],s[i(537)],{}),e.wiggle=n[i(779)](e.wiggle,s.OBJECT,{}),e.maxAge=n[i(779)](e.maxAge,s.OBJECT,{}),e[i(389)]&&console[i(764)](i(698)),this[i(459)]=h[i(474)](),this[i(829)]=n.ensureTypedArg(e[i(829)],s[i(633)],m[i(709)][i(687)]),this[i(737)]={_value:n[i(596)](e[i(737)].value,t[i(393)],new(t[i(393)])),_spread:n[i(596)](e.position.spread,t[i(393)],new(t[i(393)])),_spreadClamp:n[i(596)](e[i(737)][i(654)],t[i(393)],new(t[i(393)])),_distribution:n.ensureTypedArg(e[i(737)][i(743)],s.NUMBER,this[i(829)]),_randomise:n[i(779)](e[i(737)][i(494)],s[i(601)],!1),_radius:n.ensureTypedArg(e[i(737)][i(652)],s[i(633)],10),_radiusScale:n[i(596)](e[i(737)][i(477)],t[i(393)],new(t[i(393)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e[i(737)].distributionClamp,s.NUMBER,0)},this[i(658)]={_value:n[i(596)](e[i(658)][i(604)],t[i(393)],new l),_spread:n.ensureInstanceOf(e[i(658)][i(774)],t[i(393)],new l),_distribution:n[i(779)](e.velocity[i(743)],s[i(633)],this[i(829)]),_randomise:n[i(779)](e[i(737)][i(494)],s[i(601)],!1)},this[i(565)]={_value:n.ensureInstanceOf(e[i(565)][i(604)],t[i(393)],new l),_spread:n.ensureInstanceOf(e[i(565)][i(774)],t[i(393)],new(t[i(393)])),_distribution:n[i(779)](e.acceleration.distribution,s.NUMBER,this.type),_randomise:n[i(779)](e[i(737)].randomise,s[i(601)],!1)},this[i(463)]={_value:n[i(779)](e.drag.value,s.NUMBER,0),_spread:n[i(779)](e[i(463)][i(774)],s.NUMBER,0),_randomise:n.ensureTypedArg(e.position[i(494)],s[i(601)],!1)},this[i(750)]={_value:n[i(779)](e[i(750)].value,s[i(633)],0),_spread:n[i(779)](e[i(750)].spread,s[i(633)],0)},this[i(447)]={_axis:n[i(596)](e[i(447)][i(543)],t[i(393)],new(t[i(393)])(0,1,0)),_axisSpread:n[i(596)](e[i(447)][i(788)],t[i(393)],new(t[i(393)])),_angle:n[i(779)](e.rotation[i(548)],s[i(633)],0),_angleSpread:n[i(779)](e[i(447)][i(518)],s[i(633)],0),_static:n.ensureTypedArg(e[i(447)][i(760)],s[i(601)],!1),_center:n[i(596)](e[i(447)][i(636)],t[i(393)],this[i(737)][i(486)].clone()),_randomise:n[i(779)](e[i(737)][i(494)],s[i(601)],!1)},this[i(396)]={_value:n[i(779)](e[i(396)][i(604)],s[i(633)],2),_spread:n[i(779)](e[i(396)][i(774)],s[i(633)],0)},this[i(776)]={_value:n[i(827)](e[i(776)].value,t[i(471)],new(t[i(471)])),_spread:n.ensureArrayInstanceOf(e[i(776)][i(774)],t[i(393)],new(t[i(393)])),_randomise:n[i(779)](e[i(737)][i(494)],s[i(601)],!1)},this.opacity={_value:n[i(450)](e[i(834)][i(604)],s[i(633)],1),_spread:n[i(450)](e[i(834)][i(774)],s[i(633)],0),_randomise:n[i(779)](e[i(737)][i(494)],s.BOOLEAN,!1)},this.size={_value:n[i(450)](e.size[i(604)],s.NUMBER,1),_spread:n[i(450)](e[i(637)][i(774)],s[i(633)],0),_randomise:n[i(779)](e.position[i(494)],s[i(601)],!1)},this[i(548)]={_value:n[i(450)](e.angle[i(604)],s[i(633)],0),_spread:n.ensureArrayTypedArg(e[i(548)][i(774)],s.NUMBER,0),_randomise:n[i(779)](e.position[i(494)],s.BOOLEAN,!1)},this.particleCount=n[i(779)](e[i(419)],s[i(633)],100),this[i(531)]=n.ensureTypedArg(e[i(531)],s[i(633)],null),this.isStatic=n.ensureTypedArg(e[i(703)],s[i(601)],!1),this[i(482)]=n.ensureTypedArg(e[i(482)],s[i(633)],1),this[i(647)]=n[i(779)](e[i(647)],s[i(633)],1),this.alive=n[i(779)](e[i(495)],s[i(601)],!0),this[i(434)]=0,this[i(609)]=0,this.attributeOffset=0,this[i(821)]=0,this[i(485)]=0,this[i(469)]=0,this[i(699)]=null,this.attributes=null,this[i(534)]=null,this[i(527)]={position:n[i(779)](e[i(737)][i(494)],s[i(601)],!1)||n[i(779)](e[i(652)][i(494)],s[i(601)],!1),velocity:n[i(779)](e.velocity[i(494)],s.BOOLEAN,!1),acceleration:n[i(779)](e[i(565)][i(494)],s[i(601)],!1)||n.ensureTypedArg(e.drag[i(494)],s[i(601)],!1),rotation:n[i(779)](e[i(447)][i(494)],s.BOOLEAN,!1),rotationCenter:n[i(779)](e[i(447)].randomise,s[i(601)],!1),size:n[i(779)](e[i(637)][i(494)],s[i(601)],!1),color:n.ensureTypedArg(e[i(776)][i(494)],s[i(601)],!1),opacity:n.ensureTypedArg(e[i(834)].randomise,s[i(601)],!1),angle:n[i(779)](e[i(548)][i(494)],s.BOOLEAN,!1)},this[i(581)]={},this.updateCounts={},this[i(715)]={maxAge:i(560),position:"position",velocity:i(658),acceleration:"acceleration",drag:i(565),wiggle:i(560),rotation:i(447),size:i(637),color:i(776),opacity:i(834),angle:i(548)};for(const t in this[i(715)])this[i(715)].hasOwnProperty(t)&&(this[i(568)][this[i(715)][t]]=0,this[i(581)][this.updateMap[t]]=!1,this[i(475)](this[t],t));this[i(683)]={},this[i(723)]=null,this[i(504)]=0,n[i(431)](this[i(776)],o,o),n[i(431)](this[i(834)],o,o),n[i(431)](this[i(637)],o,o),n[i(431)](this[i(548)],o,o)},m[u(591)][u(800)]=m[u(591)],m.Emitter[u(648)]._createGetterSetters=function(t,e){const i=u,n=this;for(const s in t)if(t[i(785)](s)){const o=s[i(716)]("_","");Object[i(759)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=g,o=n[s(715)][e],r=this[t],a=m[s(563)];t===s(689)?(n[s(581)].rotationCenter=!0,n[s(568)].rotationCenter=0):t===s(528)?n[s(527)][o]=i:(n[s(581)][o]=!0,n[s(568)][o]=0),n[s(699)][s(453)](),this[t]=i,Array[s(666)](r)&&m[s(433)][s(431)](n[e],a,a)}}(s)})}},m[u(591)][u(648)][u(803)]=function(t){const e=u;this[e(723)]=t,this[e(504)]=t[e(603)];for(let i=this[e(504)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(417)],max:Number.NEGATIVE_INFINITY}},m[u(591)][u(648)][u(513)]=function(t){const e=u,i=this[e(419)];this[e(531)]?this[e(434)]=i/(t<this.duration?t:this[e(531)]):this.particlesPerSecond=i/t},m[u(591)][u(648)]._setAttributeOffset=function(t){const e=u;this.attributeOffset=t,this.activationIndex=t,this.activationEnd=t+this[e(419)]},m.Emitter[u(648)]._assignValue=function(t,e){const i=u;switch(t){case i(737):this[i(535)](e);break;case i(658):case"acceleration":this._assignForceValue(e,t);break;case i(637):case i(834):this[i(421)](e,t);break;case"angle":this._assignAngleValue(e);break;case i(560):this._assignParamsValue(e);break;case"rotation":this[i(411)](e);break;case"color":this[i(465)](e)}},m[u(591)][u(648)][u(535)]=function(t){const e=u,i=m.distributions,n=m[e(433)],s=this[e(737)],o=this[e(690)][e(737)],r=s[e(486)],a=s[e(441)];switch(s._distribution){case i[e(687)]:n[e(593)](o,t,r,a,s[e(783)]);break;case i.SPHERE:n[e(512)](o,t,r,s._radius,s[e(441)].x,s[e(721)],s[e(783)].x,s._distributionClamp||this[e(419)]);break;case i[e(606)]:n[e(525)](o,t,r,s._radius,s._spread.x,s[e(721)],s[e(783)].x);break;case i[e(749)]:n.randomVector3OnLine(o,t,r,a)}},m[u(591)].prototype._assignForceValue=function(t,e){const i=u;let n,s,o,r,a,c=m.distributions,h=m[i(433)],l=this[e],f=l[i(486)],p=l[i(441)];switch(l[i(642)]){case c.BOX:h[i(593)](this[i(690)][e],t,f,p);break;case c[i(775)]:n=this[i(690)][i(737)].typedArray[i(717)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],h[i(540)](this.attributes[e],t,s,o,r,this[i(737)][i(486)],l[i(486)].x,l[i(441)].x);break;case c[i(606)]:n=this[i(690)][i(737)][i(481)][i(717)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],h[i(400)](this[i(690)][e],t,s,o,r,this.position[i(486)],l[i(486)].x,l._spread.x);break;case c[i(749)]:h.randomVector3OnLine(this[i(690)][e],t,f,p)}if(e===i(565)){const e=h.clamp(h[i(629)](this[i(463)][i(486)],this[i(463)][i(441)]),0,1);this[i(690)].acceleration.typedArray[i(717)][4*t+3]=e}},m[u(591)][u(648)][u(421)]=function(t,e){const i=u;let n,s=this[i(690)][e][i(481)],o=this[e],r=m.utils;r[i(706)](o[i(486)])&&r[i(706)](o._spread)?(n=Math[i(412)](r[i(629)](o[i(486)][0],o[i(441)][0])),s[i(675)](t,n,n,n,n)):s.setVec4Components(t,Math[i(412)](r.randomFloat(o[i(486)][0],o[i(441)][0])),Math[i(412)](r[i(629)](o[i(486)][1],o[i(441)][1])),Math[i(412)](r[i(629)](o[i(486)][2],o[i(441)][2])),Math[i(412)](r[i(629)](o[i(486)][3],o[i(441)][3])))},m[u(591)].prototype[u(724)]=function(t){const e=u;let i,n=this[e(690)][e(548)][e(481)],s=this.angle,o=m[e(433)];o.arrayValuesAreEqual(s._value)&&o[e(706)](s[e(441)])?(i=o.randomFloat(s[e(486)][0],s._spread[0]),n[e(675)](t,i,i,i,i)):n.setVec4Components(t,o[e(629)](s[e(486)][0],s._spread[0]),o[e(629)](s[e(486)][1],s[e(441)][1]),o[e(629)](s[e(486)][2],s[e(441)][2]),o.randomFloat(s[e(486)][3],s[e(441)][3]))},m.Emitter[u(648)][u(727)]=function(t){const e=u;this[e(690)].params[e(481)].setVec4Components(t,this.isStatic?1:0,0,Math[e(412)](m.utils[e(629)](this.maxAge[e(486)],this[e(396)]._spread)),m.utils[e(629)](this[e(750)][e(486)],this[e(750)]._spread))},m[u(591)][u(648)][u(411)]=function(t){const e=u;this.attributes.rotation[e(481)][e(578)](t,m.utils.getPackedRotationAxis(this[e(447)][e(741)],this[e(447)]._axisSpread),m[e(433)][e(629)](this[e(447)][e(508)],this[e(447)][e(448)]),this[e(447)]._static?0:1),this[e(690)][e(634)][e(481)][e(766)](t,this[e(447)][e(506)])},m.Emitter[u(648)]._assignColorValue=function(t){const e=u;m[e(433)].randomColorAsHex(this[e(690)][e(776)],t,this.color[e(486)],this[e(776)][e(441)])},m[u(591)].prototype[u(820)]=function(t){const e=u;let i,n,s=this[e(527)],o=this[e(581)],r=this[e(568)],a=this[e(723)];for(let c=this[e(504)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(483)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this.particleCount?(o[i]=!1,r[i]=0):1==n&&++r[i])},m.Emitter[u(648)][u(473)]=function(t,e){const i=u,n=this[i(683)][t];n[i(408)]=Math[i(408)](e,n[i(408)]),n[i(497)]=Math[i(497)](e,n[i(497)])},m[u(591)][u(648)][u(809)]=function(){const t=u;let e,i=this[t(683)],n=this[t(705)],s=this[t(397)]-1;for(;s>=0;--s)e=n[s],i[e].min=Number[t(417)],i[e][t(497)]=Number.NEGATIVE_INFINITY},m[u(591)][u(648)]._onRemove=function(){const t=u;this.particlesPerSecond=0,this.attributeOffset=0,this[t(609)]=0,this[t(469)]=0,this.group=null,this[t(690)]=null,this[t(534)]=null,this.age=0},m[u(591)][u(648)]._decrementParticleCount=function(){--this.activeParticleCount},m[u(591)][u(648)][u(480)]=function(){++this[u(469)]},m.Emitter[u(648)]._checkParticleAges=function(t,e,i,n){const s=u;for(var o,r,a,c,h=e-1;h>=t;--h)0!==(c=i[o=4*h])&&(a=i[o+1],r=i[o+2],1===this[s(647)]?(a+=n)>=r&&(a=0,c=0,this[s(627)]()):(a-=n)<=0&&(a=r,c=0,this[s(627)]()),i[o]=c,i[o+1]=a,this._updateAttributeUpdateRange("params",h))},m[u(591)][u(648)][u(673)]=function(t,e,i,n){const s=u,o=this[s(647)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[s(419)]||(this[s(480)](),i[r]=1,this._resetParticle(c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(473)](s(560),c))},m.Emitter[u(648)][u(488)]=function(t){const e=u;if(this[e(703)])return;null===this[e(534)]&&(this[e(534)]=this[e(690)][e(560)][e(481)].array);const i=this[e(682)],n=i+this[e(419)],s=this[e(534)],o=this[e(434)]*this[e(482)]*t,r=this[e(609)];if(this._resetBufferRanges(),this._checkParticleAges(i,n,s,t),!1===this.alive)return void(this[e(485)]=0);if(null!==this.duration&&this.age>this.duration)return this[e(495)]=!1,void(this[e(485)]=0);const a=1===this[e(419)]?r:0|r,c=Math.min(a+o,this[e(522)]),h=c-this[e(609)]|0,l=h>0?t/h:0;this[e(673)](a,c,s,l),this[e(609)]+=o,this[e(609)]>n&&(this.activationIndex=i),this[e(485)]+=t},m[u(591)][u(648)][u(791)]=function(t){const e=u;if(this[e(485)]=0,this.alive=!1,!0===t){const t=this[e(682)],s=t+this[e(419)],o=this[e(534)],r=this[e(690)][e(560)][e(662)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(778)][e(509)]=0,r[e(778)][e(449)]=-1,r[e(702)]=!0}return this},m.Emitter[u(648)][u(771)]=function(){return this[u(495)]=!0,this},m[u(591)][u(648)][u(523)]=function(){return this[u(495)]=!1,this},m[u(591)][u(648)][u(786)]=function(){const t=u;return null!==this.group?this[t(699)].removeEmitter(this):console[t(697)](t(602)),this};const y=m;function v(t){function e(t){const i=g;if("string"==typeof t)return function(t){}[i(800)]("while (true) {}")[i(806)](i(598));1!==(""+t/t)[i(603)]||t%20==0?function(){return!0}[i(800)]("debu"+i(553))[i(387)](i(765)):function(){return!1}.constructor(i(510)+i(553))[i(806)](i(456)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{y as _};

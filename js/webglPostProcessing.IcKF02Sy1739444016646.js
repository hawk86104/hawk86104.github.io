import{i as t}from"./ice-utils.Ns5kuW8n1739444016646.js";import{m as n,_ as e,l as o,t as r}from"./gl-matrix.sjqAGIZ-1739444016646.js";import{P as i}from"./tweakpane.yDiyAAkA1739444016646.js";import{d as a,r as c,q as s,o as u,H as f,N as l,u as m}from"./@vue.NRI7TcgI1739444016646.js";const _="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",E="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=b;!function(t,n){const e=b,o=T();for(;;)try{if(466105===parseInt(e(410))/1*(parseInt(e(407))/2)+-parseInt(e(431))/3*(parseInt(e(396))/4)+-parseInt(e(401))/5*(-parseInt(e(338))/6)+parseInt(e(429))/7+-parseInt(e(421))/8*(parseInt(e(406))/9)+parseInt(e(416))/10*(parseInt(e(357))/11)+-parseInt(e(389))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[b(433)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){x(this,(function(){const t=b,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(380),"i"),o=y(t(397));n.test(o+t(372))&&e[t(343)](o+"input")?y():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[b(433)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function T(){const t=["createFramebuffer","value","color","toString","UNSIGNED_BYTE","39580hqaChX","table","FRAMEBUFFER","length","constructor","417344JuqEmQ","clearColor","img","COLOR_BUFFER_BIT","offset_right_top","getContext","uniformMatrix4fv","useProgram","4417371oDcBQC","scale","465azZIul","trace","apply","error","innerHeight","innerWidth","webglPostProcessing","createBuffer","NEAREST","getUniformLocation","canvas","prototype","6CSjlIG","TEXTURE_MAG_FILTER","mat4","clear","stateObject","test","gger","inline","hidden","bindTexture","debu","height","vertexAttribPointer","BYTES_PER_ELEMENT","bind","texImage2D","blendFunc","getElementById","RGBA","231ZYLFkf","是否后处理","webgl","TEXTURE_WRAP_T","bufferData","TRIANGLES","addBlade","ARRAY_BUFFER","querySelector","framebufferTexture2D","texParameteri","createTexture","return (function() ","TEXTURE_MIN_FILTER","offset_left_top","chain","bindBuffer","uView","change","TEXTURE_2D","BLEND","drawElements","STATIC_DRAW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","enableVertexAttribArray","ortho","info","uProjection","create","logo-texture","CLAMP_TO_EDGE","uModel","96804gTRyvb","console","bindFramebuffer","__proto__","string","ELEMENT_ARRAY_BUFFER","log","21832dFdGQP","init","while (true) {}","TEXTURE_WRAP_S","offset_right_bottom","3358180TpLGbz","#canvaswebgl","offset_left_bottom","counter","addBinding","135VEqCgw","370SrdiSD","FLOAT","width","3875lzKFQU"];return(T=function(){return t})()}g(void 0,(function(){const t=b;let n;try{n=Function(t(369)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(390)]=n.console||{},o=[t(395),"warn",t(383),t(434),"exception",t(417),t(432)];for(let i=0;i<o[t(419)];i++){const n=g[t(420)][t(337)][t(352)](g),r=o[i],a=e[r]||n;n[t(392)]=g[t(352)](g),n[t(414)]=a[t(414)][t(352)](a),e[r]=n}}))();const p={id:"canvaswebgl"},R=["src"];function b(t,n){const e=T();return(b=function(t,n){return e[t-=330]})(t,n)}const A=a({__name:d(332),setup(a){const x=d;let g,T,b,A,y,v,F,h,P,C,w,I,B;const S=1,U=.71,D=.76,M=new i({title:"参数"}),L=c({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});M[x(363)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=x;Y(),T.uniform1f(I,t[n(412)])}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);M[x(405)](L,x(346),{label:x(358)}),M.addBinding(L,x(425),{picker:x(345),x:{min:0,max:1},y:{min:0,max:1}}).on(x(375),(t=>{const n=x;N[0]=L[n(425)].x,N[1]=L[n(425)].y,Y()})),M.addBinding(L,x(400),{picker:x(345),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=x;N[5]=L[n(400)].x,N[6]=L.offset_right_bottom.y,Y()})),M[x(405)](L,"offset_left_bottom",{picker:x(345),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(375),(t=>{const n=x;N[10]=L.offset_left_bottom.x,N[11]=L[n(403)].y,Y()})),M[x(405)](L,x(371),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(375),(t=>{const n=x;N[15]=L[n(371)].x,N[16]=L[n(371)].y,Y()})),s((()=>{X()}));const X=function(){const n=x;g=document[n(365)](n(402)),g[n(409)]=window[n(331)],g.height=window[n(330)],T=g[n(426)](n(359)),T&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=k(e,o),b=t(T,_,E),P=T[n(335)](b,n(384)),C=T[n(335)](b,n(374)),w=T[n(335)](b,n(388)),B=O(document[n(355)](n(386)))}(),Y(),T.enable(T[n(377)]),T[n(354)](T.SRC_ALPHA,T.ONE_MINUS_SRC_ALPHA),j())};function j(){const t=x;T.bindFramebuffer(T[t(418)],F),T[t(422)](S,U,D,1),T[t(341)](T[t(424)]),function(){const t=x;T[t(428)](b),T.bindBuffer(T[t(364)],A);const r=n[t(385)]();e[t(340)][t(382)](r,0,g[t(409)],g[t(349)],0,.1,100),T.uniformMatrix4fv(P,!1,r);const i=e[t(340)][t(385)]();o(i,[0,0,1],[0,0,0],[0,1,0]),T[t(427)](C,!1,i),G(B,600,600),G(B,400,400)}(),T[t(391)](T.FRAMEBUFFER,null),L[t(346)]&&(T[t(341)](T[t(424)]),T[t(422)](0,0,1,1),T[t(373)](T[t(364)],y),T[t(428)](v),T[t(347)](T.TEXTURE_2D,h)),T[t(378)](T[t(362)],6,T[t(415)],0),requestAnimationFrame(j)}function G(t,e,o){const i=x;let a=n[i(385)]();r(a,a,[e,o,0]),n[i(430)](a,a,[250,250,0]),T.uniformMatrix4fv(w,!1,a),T.bindTexture(T[i(376)],t),T[i(378)](T[i(362)],6,T.UNSIGNED_BYTE,0)}function Y(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);y=k(N,e),v=t(T,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),I=T[n(335)](v,"mixParam"),T[n(335)](v,n(413)),function(){const t=x;h=O(g),F=T[t(411)](),T[t(391)](T[t(418)],F),T[t(366)](T[t(418)],T.COLOR_ATTACHMENT0,T[t(376)],h,0),T[t(391)](T.FRAMEBUFFER,null)}()}function O(t){const n=x,e=T[n(368)]();return T[n(347)](T[n(376)],e),t instanceof HTMLImageElement?T[n(353)](T.TEXTURE_2D,0,T[n(356)],T[n(356)],T[n(415)],t):T[n(353)](T.TEXTURE_2D,0,T.RGBA,t[n(409)],t[n(349)],0,T[n(356)],T[n(415)],null),T.texParameteri(T[n(376)],T[n(370)],T[n(334)]),T[n(367)](T.TEXTURE_2D,T[n(339)],T.NEAREST),T.texParameteri(T.TEXTURE_2D,T[n(399)],T[n(387)]),T[n(367)](T[n(376)],T[n(360)],T[n(387)]),e}function k(t,n){const e=x,o=T[e(333)]();T[e(373)](T.ARRAY_BUFFER,o),T[e(361)](T[e(364)],t,T[e(379)]);const r=3*Float32Array[e(351)]+2*Float32Array.BYTES_PER_ELEMENT;T[e(350)](0,3,T[e(408)],!1,r,0),T.enableVertexAttribArray(0),T[e(350)](1,2,T[e(408)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),T[e(381)](1);const i=T[e(333)]();return T.bindBuffer(T[e(394)],i),T[e(361)](T[e(394)],n,T.STATIC_DRAW),T[e(373)](T[e(364)],null),o}return(t,n)=>{const e=x;return u(),f(e(336),p,[l(e(423),{id:"logo-texture",src:m("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,R)])}}});function y(t){function n(t){const e=b;if(typeof t===e(393))return function(t){}.constructor(e(398))[e(433)](e(404));1!==(""+t/t)[e(419)]||t%20==0?function(){return!0}[e(420)](e(348)+e(344)).call("action"):function(){return!1}[e(420)](e(348)+e(344))[e(433)](e(342)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

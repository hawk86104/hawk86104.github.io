import{b_ as t,a0 as n,C as e,j as r}from"./three.VTQVqxMx1725416517797.js";import{N as o}from"./@tresjs.5lh7VmqZ1725416517797.js";import{R as c}from"./all.three.uEDUuufF1725416517797.js";import{d as a,b as i,a5 as s,a2 as u,w as f,o as l,E as p,L as m,m as d,u as v}from"./@vue._6MD2XyK1725416517797.js";function h(){const t=["init","12KjyfAH","5272852WjnNxM","110lIIWVI",'{}.constructor("return this")( )',"function *\\( *\\)","vertexShader","bind","4ZVXjax","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","debu","test","1297483aEeewU","apply","fragmentShader","return (function() ","trace","length","8293400buMFkN","4XZFlwx","replace","call","__proto__","chain","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","696486zAKBfc","3872260WXRfsB","gger","6892991pGbqiC","action","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","table","6QvxQZT","log","218571uHvGIg","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","input","warn","9bOFdbe","void main() {","exception","prototype","stateObject","console","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","constructor"];return(h=function(){return t})()}function g(t,n){const e=h();return(g=function(t,n){return e[t-=179]})(t,n)}!function(t,n){const e=g,r=h();for(;;)try{if(748360===parseInt(e(184))/1+parseInt(e(216))/2*(parseInt(e(222))/3)+-parseInt(e(204))/4*(parseInt(e(223))/5)+parseInt(e(182))/6*(parseInt(e(225))/7)+-parseInt(e(215))/8*(parseInt(e(188))/9)+-parseInt(e(199))/10*(-parseInt(e(209))/11)+parseInt(e(197))/12*(-parseInt(e(198))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(210)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){x(this,(function(){const t=g,n=new RegExp(t(201)),e=new RegExp(t(205),"i"),r=b(t(196));n.test(r+t(220))&&e[t(208)](r+t(186))?b():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(212)+t(200)+");")()}catch(e){n=window}return n}(),e=n[t(193)]=n[t(193)]||{},r=[t(183),t(187),"info","error",t(190),t(181),t(213)];for(let o=0;o<r[t(214)];o++){const n=y[t(195)][t(191)][t(203)](y),c=r[o],a=e[c]||n;n[t(219)]=y[t(203)](y),n[t(206)]=a[t(206)].bind(a),e[c]=n}}))();function b(t){function n(t){const e=g;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[e(210)]("counter");1!==(""+t/t)[e(214)]||t%20==0?function(){return!0}[e(195)](e(207)+e(224))[e(218)](e(179)):function(){return!1}[e(195)](e(207)+e(224))[e(210)](e(192)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=_;function _(t,n){const e=M();return(_=function(t,n){return e[t-=158]})(t,n)}!function(t,n){const e=_,r=M();for(;;)try{if(678379===parseInt(e(207))/1+-parseInt(e(194))/2+parseInt(e(158))/3*(-parseInt(e(203))/4)+-parseInt(e(177))/5*(-parseInt(e(212))/6)+-parseInt(e(204))/7+-parseInt(e(166))/8*(parseInt(e(220))/9)+parseInt(e(200))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function M(){const t=["TresPlaneGeometry","primitive","1243432rEFvDA","return (function() ","table","showGridHelper","channel","6dFhDXV","set","init","value","action","reflectorDiffuse","wrapS","color","14607OfXZso","bind","132swBsER","call","apply","function *\\( *\\)","exception","gger","input","uv1","6184AGLldv","TresMeshStandardMaterial","tmsmRef","aoMap","stateObject","uniforms","tmRef","log","console","textureMatrixUniform","length","5966225nHPebR","trace","info","mirror","attributes","rotation-x","TresGroup","debu","textureMatrix","onBeforeCompile","wrapT","repeat","constructor","TresMesh","visible","assign","string","446234iRzxpr","#ffffff","toString","test",'{}.constructor("return this")( )',"mixStrength","20461760UkOhMg","add","error","101988ttbTDU","8434370LeEAge"];return(M=function(){return t})()}!function(){w(this,(function(){const t=_,n=new RegExp(t(161)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=S(t(214));n[t(197)](r+"chain")&&e[t(197)](r+t(164))?S():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(160)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=_;let n;try{n=Function(t(208)+t(198)+");")()}catch(o){n=window}const e=n.console=n[t(174)]||{},r=[t(173),"warn",t(179),t(202),t(162),t(209),t(178)];for(let c=0;c<r.length;c++){const n=C[t(189)].prototype.bind(C),o=r[c],a=e[o]||n;n.__proto__=C[t(221)](C),n[t(196)]=a[t(196)][t(221)](a),e[o]=n}}))();const j=[I(182)],E=["object"],R=a({__name:I(217),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(195)}},async setup(a){const h=I;let x,y;const b=a,_=new t(9.5,10),w=i(),M=i(),C=i(),R=new c,S={mirror:{value:b[h(180)]},mixStrength:{value:b[h(199)]}},z=([x,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),x=await x,y(),x);for(var T=0;T<3;T++)z[T][h(218)]=n,z[T][h(187)]=n,z[T][h(188)][h(213)](16,16);const A={color:new e("#444"),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},F=t=>{const n=h;t[n(171)].reflectMap=R.renderTargetUniform,t[n(171)][n(185)]=R[n(175)],t[n(171)]=Object[n(192)](t[n(171)],S),(t=>{const n=g;t[n(202)]=t[n(202)][n(217)](n(189),n(180)),t[n(202)]=t[n(202)][n(217)]("#include <project_vertex>",n(221))})(t),(t=>{const n=g;t[n(211)]=t[n(211)].replace("void main() {",n(194)),t[n(211)]=t[n(211)][n(217)]("#include <emissivemap_fragment>",n(185))})(t)};return u((()=>{const t=h;w[t(215)]&&(w[t(215)].attributes[t(165)]=w[t(215)][t(181)].uv),C[t(215)]&&(C[t(215)][t(169)][t(211)]=1,C[t(215)][t(186)]=F),M.value&&(M[t(215)][t(201)](R),M[t(215)].onBeforeRender=(t,n,e)=>{R.update(t,n,e)}),b.color&&C[t(215)]&&(C[t(215)].color=new e(b[t(219)]))})),f((()=>b[h(210)]),(t=>{_[h(191)]=t})),(t,n)=>{const e=h;return l(),p(e(183),null,[m(e(190),{ref_key:e(172),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(205),{ref_key:"tpgRef",ref:w,args:[10,10]},null,512),m(e(167),d({ref_key:e(168),ref:C},A),null,16)],8,j),m(e(206),{object:v(_)},null,8,E)])}}});function S(t){function n(t){const e=_;if(typeof t===e(193))return function(t){}[e(189)]("while (true) {}").apply("counter");1!==(""+t/t)[e(176)]||t%20==0?function(){return!0}.constructor(e(184)+e(163))[e(159)](e(216)):function(){return!1}[e(189)](e(184)+e(163))[e(160)](e(170)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as _};

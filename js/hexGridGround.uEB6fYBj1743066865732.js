import{e as n,h as t,a as e,o as i}from"./@tresjs.NxYvETXi1743066865732.js";import{P as o}from"./tweakpane.ivGeiIdz1743066865732.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.z5wnD9Re1743066865732.js";import{_ as s,ab as a,A as u}from"./three.qSkR4_5R1743066865732.js";import{d as c,a3 as l,w as f,o as d,f as p,u as v,H as h,N as g,g as m,j as w,m as x,al as y,r as b,e as _}from"./@vue.L-brCdZe1743066865732.js";import"./postprocessing.ncQBP5me1743066865732.js";import"./@vueuse.2gpu5LGS1743066865732.js";import"./all.three.-jXJLs_M1743066865732.js";import"./oimophysics.WhCxc1Ho1743066865732.js";const I=S;!function(n,t){const e=S,i=T();for(;;)try{if(975406===-parseInt(e(366))/1*(-parseInt(e(364))/2)+-parseInt(e(372))/3+-parseInt(e(378))/4+parseInt(e(390))/5*(parseInt(e(370))/6)+-parseInt(e(356))/7+parseInt(e(385))/8+parseInt(e(348))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function S(n,t){const e=T();return S=function(n,t){return e[n-=338]},S(n,t)}!function(){k(this,(function(){const n=S,t=new RegExp(n(363)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=P(n(362));t[n(382)](i+n(365))&&e.test(i+n(358))?P():i("0")}))()}();const M=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function T(){const n=["constructor","bind","length","isReversed","value","divisionScaleX","console","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","trace","side","13136139tVXJJH","gridWeight","wavePow","fragmentShader","exception","debu","waveFrequency","string","8136016gSQXOh","toString","input","baseMaterial","action","direction","init","function *\\( *\\)","108LvNFjQ","chain","27113KbqOBz","maskTexture",'{}.constructor("return this")( )',"division","6YnXqHq","raisedBottom","5088156fZcuQE","log","hexGridMaterial","hasMaskTexture","apply","counter","6584380wrbeQj","table","error","prototype","test","speed","gger","10156184vuSOTG","return (function() ","MeshPhongMaterial","info","call","6433225Vuvuby","warn"];return(T=function(){return n})()}M(void 0,(function(){const n=S,t=function(){const n=S;let t;try{t=Function(n(386)+n(368)+");")()}catch(e){t=window}return t}(),e=t[n(344)]=t[n(344)]||{},i=[n(373),n(391),n(388),n(380),n(352),n(379),n(346)];for(let o=0;o<i[n(340)];o++){const t=M.constructor[n(381)].bind(M),r=i[o],s=e[r]||t;t.__proto__=M[n(339)](M),t[n(357)]=s.toString[n(339)](s),e[r]=t}}))();const C=I(345),j=c({__name:I(374),props:{baseMaterial:{default:new(s[I(387)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=I;let r,s;const u=i,c={gridWeight:{value:u.gridWeight},raisedBottom:{value:u[o(371)]},waveFrequency:{value:u[o(354)]},wavePow:{value:u[o(350)]},direction:{value:u[o(361)]},isReversed:{value:u[o(341)]},hasMaskTexture:{value:u[o(375)]},maskTexture:{value:null},division:{value:u[o(369)]},divisionScaleX:{value:u[o(343)]},time:{value:0}};u[o(367)]&&(c[o(367)][o(342)]=([r,s]=l((()=>e([u[o(367)]]))),r=await r,s(),r)),f((()=>[u[o(349)],u[o(371)],u[o(354)],u.wavePow,u[o(369)],u.divisionScaleX,u[o(361)],u[o(341)],u.hasMaskTexture]),(([n,t,e,i,r,s,a,u,l])=>{const f=o;c.gridWeight[f(342)]=n,c.raisedBottom[f(342)]=t,c[f(354)][f(342)]=e,c[f(350)][f(342)]=i,c.division[f(342)]=r,c.divisionScaleX[f(342)]=s,c[f(361)][f(342)]=a,c[f(341)][f(342)]=u,c.hasMaskTexture.value=l}));const{onLoop:h}=n();return h((({delta:n})=>{const t=o;c.time.value+=n*u[t(383)]})),(n,e)=>{const r=o;return d(),p(v(t),{baseMaterial:i[r(359)],vertexShader:C,side:a,transparent:"",fragmentShader:v("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:c},null,8,[r(359),r(347),r(351)])}}});function P(n){function t(n){const e=S;if(typeof n===e(355))return function(n){}[e(338)]("while (true) {}")[e(376)](e(377));1!==(""+n/n)[e(340)]||n%20==0?function(){return!0}.constructor(e(353)+e(384))[e(389)](e(360)):function(){return!1}[e(338)](e(353)+e(384)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const R=A;!function(n,t){const e=A,i=X();for(;;)try{if(539834===-parseInt(e(364))/1*(parseInt(e(348))/2)+-parseInt(e(365))/3+parseInt(e(347))/4*(-parseInt(e(340))/5)+-parseInt(e(363))/6*(-parseInt(e(339))/7)+parseInt(e(342))/8*(parseInt(e(346))/9)+parseInt(e(334))/10+parseInt(e(361))/11)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const z=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[A(336)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){z(this,(function(){const n=A,t=new RegExp(n(332)),e=new RegExp(n(325),"i"),i=W(n(330));t.test(i+n(335))&&e[n(350)](i+"input")?W():i("0")}))()}();const D=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();D(void 0,(function(){const n=A,t=function(){const n=A;let t;try{t=Function("return (function() "+n(355)+");")()}catch(e){t=window}return t}(),e=t[n(360)]=t[n(360)]||{},i=[n(358),"warn",n(329),n(326),"exception",n(333),n(356)];for(let o=0;o<i.length;o++){const t=D.constructor[n(362)][n(338)](D),r=i[o],s=e[r]||t;t[n(331)]=D[n(338)](D),t[n(349)]=s.toString.bind(s),e[r]=t}}))();const B=[R(352)];function X(){const n=['{}.constructor("return this")( )',"trace","while (true) {}","log","constructor","console","5285577xIDyiY","prototype","82482JyPlzm","35239nnWcgQ","2220528WgzkRZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","$attrs","stateObject","info","init","__proto__","function *\\( *\\)","table","7676880SOLoCV","chain","apply","call","bind","322zLngxc","1385sMgsCC","TresPlaneGeometry","4744ACbUsM","counter","debu","action","9783poeIlR","15436ycdIPh","10UrljDh","toString","test","string","rotation","gger","length"];return(X=function(){return n})()}function A(n,t){const e=X();return A=function(n,t){return e[n-=325]},A(n,t)}const F=c({__name:"hexGridMesh",setup(n){const t=new u;return(n,e)=>{const i=A;return d(),h("TresMesh",{rotation:[-Math.PI/2,0,0]},[e[0]||(e[0]=g(i(341),{args:[1,1]},null,-1)),(d(),p(y,null,{default:m((()=>[w(j,x({baseMaterial:v(t)},n[i(327)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,["baseMaterial"])])),_:1}))],8,B)}}});function W(n){function t(n){const e=A;if(typeof n===e(351))return function(n){}[e(359)](e(357))[e(336)](e(343));1!==(""+n/n)[e(354)]||n%20==0?function(){return!0}.constructor(e(344)+"gger")[e(337)](e(345)):function(){return!1}[e(359)](e(344)+e(353)).apply(e(328)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=L,i=G();for(;;)try{if(823092===parseInt(e(465))/1+-parseInt(e(469))/2+parseInt(e(468))/3+parseInt(e(458))/4+-parseInt(e(457))/5+parseInt(e(447))/6+-parseInt(e(471))/7*(-parseInt(e(475))/8))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[L(460)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){q(this,(function(){const n=L,t=new RegExp(n(480)),e=new RegExp(n(488),"i"),i=Z(n(449));t[n(453)](i+"chain")&&e[n(453)](i+"input")?Z():i("0")}))()}();const E=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[L(460)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function G(){const n=["direction","color","info","345304CLytTz","while (true) {}","constructor","hasMaskTexture","TresPerspectiveCamera","function *\\( *\\)","网格横向缩放","渐变强度","__proto__","gridWeight","call","#666666","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","渐变宽度","log","网格整体缩放","waveFrequency","debu","speed","string","exception","wavePow","counter","warn","1741878rEOguT","divisionScaleX","init","console","prototype","division","test","addBinding","length","颜色取反","3535615oJXeUl","1351368Dqztln","gger","apply","hexGridGround","网格宽度","toString","stateObject","458183GhEEJz","bind","#de62f2","1866522AkiSTJ","442920HrOWrI","isReversed","7amSRpx"];return(G=function(){return n})()}function L(n,t){const e=G();return L=function(n,t){return e[n-=442]},L(n,t)}E(void 0,(function(){const n=L,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(450)]=t[n(450)]||{},i=[n(490),n(446),n(474),"error",n(443),"table",n(487)];for(let o=0;o<i[n(455)];o++){const t=E[n(477)][n(451)][n(466)](E),r=i[o],s=e[r]||t;t[n(483)]=E[n(466)](E),t.toString=s[n(463)][n(466)](s),e[r]=t}}))();const O=c({__name:"hexGridGround",setup(n){const t=L,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),s=b({color:t(467),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(461),expanded:!0});return a[t(454)](s,t(478),{label:"图片纹理"}),a[t(454)](s,t(473),{label:"颜色"}),a.addBinding(s,t(494),{label:"速度",min:-5,max:5,step:.1}),a[t(454)](s,t(484),{label:t(462),min:.001,max:.5,step:.001}),a[t(454)](s,"raisedBottom",{label:t(489),min:.001,max:1,step:.001}),a[t(454)](s,t(492),{label:"分段",min:.001,max:1,step:.001}),a[t(454)](s,t(444),{label:t(482),min:1,max:30,step:.1}),a.addBinding(s,t(452),{label:t(491),min:.1,max:50,step:.1}),a[t(454)](s,t(448),{label:t(481),min:.1,max:10,step:.1}),a[t(454)](s,t(470),{label:t(456)}),a[t(454)](s,t(472),{label:"方向类别",min:3,max:6,step:1}),(n,o)=>{const a=t,u=_("TresCanvas");return d(),p(u,{clearColor:a(486),"window-size":""},{default:m((()=>[o[0]||(o[0]=g(a(479),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),w(v(i),{enableDamping:"",autoRotate:""}),w(F,x(s,{scale:9}),null,16),(d(),p(y,null,{default:m((()=>[w(r,x({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function Z(n){function t(n){const e=L;if(typeof n===e(442))return function(n){}[e(477)](e(476)).apply(e(445));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(493)+e(459))[e(485)]("action"):function(){return!1}[e(477)](e(493)+"gger").apply(e(464)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{O as default};

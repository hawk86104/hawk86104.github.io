import{_ as t,a0 as n,cd as e,ce as o,cf as r,cg as i,C as u,m as s,bU as c,ak as a,am as l}from"./three.-z-VOBM71731641201182.js";import{d as f,e as p,U as d}from"./@tresjs.b88d4FZI1731641201182.js";import{z as h}from"./three-custom-shader-material.h_zYovtn1731641201182.js";import{d as y,b as m,a3 as g,w,o as v,D as b,u as I,r as _,a6 as C,e as x,f as M,g as T,J as A,j as R,aj as S,ak as O,F as B,I as j,G as D,m as E}from"./@vue.-THQH3GC1731641201182.js";!function(t,n){const e=k,o=z();for(;;)try{if(790793===-parseInt(e(502))/1+parseInt(e(467))/2*(parseInt(e(499))/3)+-parseInt(e(479))/4*(-parseInt(e(488))/5)+-parseInt(e(483))/6*(parseInt(e(469))/7)+parseInt(e(489))/8*(parseInt(e(482))/9)+-parseInt(e(468))/10*(parseInt(e(477))/11)+-parseInt(e(472))/12*(-parseInt(e(487))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(478)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){L(this,(function(){const t=k,n=new RegExp(t(494)),e=new RegExp(t(473),"i"),o=W("init");n.test(o+t(492))&&e[t(475)](o+t(503))?W():o("0")}))()}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(478)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function z(){const t=["action","log","865611PRRTIX","5802sRUaQy","traverse","return (function() ","call","416TuoLge","65IqXrvj","8xFpram","info","CITY_UNTRIANGULATED","chain","console","function *\\( *\\)","constructor","name","length","gger","3555879KCrjmD","exception","while (true) {}","1479752XkxIDv","input","bind","2ymSLEW","750PjAfwL","10871Qnkxte","table","counter","581676pYmtxD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","test","debu","79827EqtHth","apply","456604xcUMAM"];return(z=function(){return t})()}function k(t,n){const e=z();return(k=function(t,n){return e[t-=466]})(t,n)}P(void 0,(function(){const t=k;let n;try{n=Function(t(485)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(493)]=n[t(493)]||{},o=[t(481),"warn",t(490),"error",t(500),t(470),"trace"];for(let i=0;i<o[t(497)];i++){const n=P[t(495)].prototype[t(466)](P),r=o[i],u=e[r]||n;n.__proto__=P[t(466)](P),n.toString=u.toString[t(466)](u),e[r]=n}}))();const F=async()=>{const t=k,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(484)]((n=>{const i=t;n[i(496)]===i(491)&&(e=n),"LANDMASS"===n.name&&(o=n),"ROADS"===n[i(496)]&&(r=n)})),{model:n,city:e,land:o,roads:r}};function W(t){function n(t){const e=k;if(typeof t===e(474))return function(t){}.constructor(e(501)).apply(e(471));1!==(""+t/t)[e(497)]||t%20==0?function(){return!0}[e(495)](e(476)+"gger")[e(486)](e(480)):function(){return!1}[e(495)](e(476)+e(498))[e(478)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const U=$;!function(t,n){const e=$,o=H();for(;;)try{if(804984===parseInt(e(376))/1*(parseInt(e(391))/2)+parseInt(e(360))/3*(-parseInt(e(394))/4)+parseInt(e(405))/5+parseInt(e(401))/6*(parseInt(e(379))/7)+-parseInt(e(351))/8*(parseInt(e(352))/9)+parseInt(e(378))/10*(-parseInt(e(362))/11)+-parseInt(e(368))/12*(-parseInt(e(355))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(385)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Z(this,(function(){const t=$,n=new RegExp(t(361)),e=new RegExp(t(369),"i"),o=Q(t(410));n[t(372)](o+t(371))&&e.test(o+"input")?Q():o("0")}))()}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(385)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function H(){const t=["54tRbJfB","object","renderOrder","21934146YTNCIV","action","console","computeBoundingSphere","debu","1005267AeVcOB","function *\\( *\\)","11uKNypQ","setStyle","opacity","uOpacity","warn","log","24ngNwDM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","side","chain","test","landColor","bulidingsColor","bind","3286tAzrAY","call","15201860trMPdd","5853470alJPtC","length","while (true) {}","computeBoundingBox","Color","info","apply","material","value","uColor","toString","#112233","358jocIEF","DoubleSide","prototype","12bRSUQL","primitive","model","buildingsModelCustomShader","#ffff00","land","table","6zrRcbR","counter","gger","city","358205oBzhAx","uniforms","__csm","boundingBox","isArray","init","forEach","return (function() ","constructor","string","gradient","2053456ClOLBl"];return(H=function(){return t})()}G(void 0,(function(){const t=$,n=function(){const t=$;let n;try{n=Function(t(412)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(357)]=n[t(357)]||{},o=[t(367),t(366),t(384),"error","exception",t(400),"trace"];for(let r=0;r<o[t(380)];r++){const n=G[t(348)][t(393)].bind(G),i=o[r],u=e[i]||n;n.__proto__=G[t(375)](G),n[t(389)]=u[t(389)][t(375)](u),e[i]=n}}))();const Y=[U(353)];function $(t,n){const e=H();return($=function(t,n){return e[t-=348]})(t,n)}const N=y({__name:U(397),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:U(390)},topColor:{default:U(398)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=U,r=e,i=m(0),u=r[o(396)][o(404)];u[o(354)]=1001;const s=r[o(396)][o(399)];(()=>{const e=o,{geometry:s}=u;s[e(382)](),s[e(358)]();const{max:c,min:a}=s[e(408)];if(u[e(386)][e(407)])return;const l=new h({baseMaterial:u.material,vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(383)])(r.bulidingsColor)},uOpacity:{value:r.opacity},uLightColor:{value:new(t[e(383)])("#ffffff")},uTopColor:{value:new(t[e(383)])(r.topColor)},uTime:i,uGradient:{value:r[e(350)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n});u[e(386)].dispose(),u[e(386)]=l})();const{onLoop:c}=p();c((({delta:t})=>{i[o(387)]+=t})),g((()=>{const n=o;r[n(374)]&&u[n(386)][n(406)][n(388)].value[n(363)](r[n(374)]),r[n(373)]&&((n,e)=>{const i=o;let u;"cu"===n||n===i(399)&&(u=Array[i(409)](s[i(386)])?s[i(386)]:[s.material],u[i(411)]((n=>{const o=i;n[e].setStyle(r.landColor),n[o(370)]=t[o(392)]})))})(n(399),"color"),r[n(364)]&&(u[n(386)][n(406)][n(365)][n(387)]=r[n(364)])})),w(r,((t,n)=>{const e=o;u[e(386)][e(406)].uGradient[e(387)]=t[e(350)]}));const a=r[o(396)][o(396)].clone();return(t,n)=>{const e=o;return v(),b(e(395),{object:I(a)},null,8,Y)}}});function Q(t){function n(t){const e=$;if(typeof t===e(349))return function(t){}[e(348)](e(381))[e(385)](e(402));1!==(""+t/t).length||t%20==0?function(){return!0}[e(348)](e(359)+e(403))[e(377)](e(356)):function(){return!1}[e(348)]("debugger")[e(385)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const V=J;function J(t,n){const e=nt();return(J=function(t,n){return e[t-=271]})(t,n)}!function(t,n){const e=J,o=nt();for(;;)try{if(811372===parseInt(e(302))/1*(-parseInt(e(286))/2)+-parseInt(e(300))/3*(-parseInt(e(280))/4)+parseInt(e(274))/5*(-parseInt(e(273))/6)+parseInt(e(317))/7+-parseInt(e(290))/8*(-parseInt(e(289))/9)+-parseInt(e(322))/10*(-parseInt(e(285))/11)+-parseInt(e(271))/12*(parseInt(e(276))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(311)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){K(this,(function(){const t=J,n=new RegExp(t(288)),e=new RegExp(t(279),"i"),o=et(t(275));n.test(o+t(305))&&e[t(292)](o+t(325))?et():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(311)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function(t(299)+t(327)+");")()}catch(e){n=window}return n}(),e=n[t(277)]=n[t(277)]||{},o=[t(287),t(308),"info",t(304),t(272),t(320),t(329)];for(let r=0;r<o[t(312)];r++){const n=X[t(283)].prototype.bind(X),i=o[r],u=e[i]||n;n[t(321)]=X[t(296)](X),n.toString=u[t(282)][t(296)](u),e[i]=n}}))();const q=[V(315)],tt=y({__name:V(281),props:{builds:{},width:{default:1},color:{default:V(318)},opacity:{default:1},style:{default:V(295)}},setup(t){const n=V,c=t;let a=null,l=null;if(c[n(316)]===n(295)){const t=new e(c[n(306)].geometry);let u=(new o)[n(323)](t),s=new r({color:c[n(331)],linewidth:c[n(319)],opacity:c[n(333)],transparent:!0,depthWrite:!0,depthTest:!0});s[n(307)].set(window[n(294)],window[n(309)]),a=new i(u,s),a.applyMatrix4(c.builds.matrix[n(303)]())}else{l={transparent:!0,uniforms:{uColor:{value:new u(c[n(331)])},uOpacity:{value:c.opacity}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:n(330)};const t=new e(c[n(306)][n(328)]),o=new s(l);a=new LineSegments(t,o),a[n(298)](c[n(306)].matrix[n(303)]()),a[n(324)].linewidth=c.width,a[n(326)]=1e3}return g((()=>{const t=n;"Shader"===c.style&&(c[t(331)]&&(l[t(297)].uColor[t(278)]=new u(c[t(331)])),c[t(333)]&&(l[t(297)].uOpacity[t(278)]=c[t(333)])),c.style===t(295)&&(c.color&&(a[t(324)].color=new u(c[t(331)])),c[t(333)]&&(a[t(324)][t(333)]=c.opacity)),c[t(319)]&&(a[t(324)][t(332)]=c[t(319)])})),(t,n)=>(v(),b("primitive",{object:I(a)},null,8,q))}});function nt(){const t=["372369wMoaNn","while (true) {}","70991zqZiuY","clone","error","chain","builds","resolution","warn","innerHeight","string","apply","length","call","counter","object","style","6783007UMKWOS","#FFF","width","table","__proto__","879270beQfYu","fromEdgesGeometry","material","input","renderOrder",'{}.constructor("return this")( )',"geometry","trace"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","color","linewidth","opacity","228VAKTRY","exception","11394QcVdJr","3865vNwBBu","init","181519YmJgWw","console","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","36VYEzMB","buildingsLines","toString","constructor","action","44qMXMDP","26tTOUof","log","function *\\( *\\)","9266967UEnePD","8JSqEpC","gger","test","stateObject","innerWidth","Wireframe","bind","uniforms","applyMatrix4","return (function() "];return(nt=function(){return t})()}function et(t){function n(t){const e=J;if(typeof t===e(310))return function(t){}.constructor(e(301))[e(311)](e(314));1!==(""+t/t)[e(312)]||t%20==0?function(){return!0}[e(283)]("debugger")[e(313)](e(284)):function(){return!1}.constructor("debu"+e(291))[e(311)](e(293)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const ot=at;!function(t,n){const e=at,o=ut();for(;;)try{if(238505===parseInt(e(206))/1*(parseInt(e(224))/2)+-parseInt(e(208))/3+-parseInt(e(231))/4+parseInt(e(227))/5*(-parseInt(e(207))/6)+parseInt(e(225))/7*(-parseInt(e(211))/8)+-parseInt(e(246))/9*(-parseInt(e(226))/10)+-parseInt(e(237))/11*(-parseInt(e(201))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){rt(this,(function(){const t=at,n=new RegExp(t(204)),e=new RegExp(t(205),"i"),o=ft(t(217));n[t(213)](o+t(235))&&e[t(213)](o+t(233))?ft():o("0")}))()}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(){const t=["7756MeKCKn","10EZoDXQ","5pUryWq","showAxesHelper","TresAxesHelper","toString","1415224QWWuue","TresAmbientLight","input","trace","chain","#000","401566OgisKW","tcRef","ability","length","$slots","string","log","#ffffff","debu","758457lMxDrM","bind","showBuildings","action","#000000","while (true) {}","pagesShow","312XbMPEv","model","TresCanvas","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2VZeGya","1346046vJUAFE","758295LhVtPF","exception","autoRotate","88eZPBrD","prototype","test","constructor","showGridHelper","perspectiveCameraRef","init","TresPerspectiveCamera","builds","console","stateObject",'{}.constructor("return this")( )',"__proto__","48176iTUMxk"];return(ut=function(){return t})()}it(void 0,(function(){const t=at;let n;try{n=Function("return (function() "+t(222)+");")()}catch(r){n=window}const e=n[t(220)]=n.console||{},o=[t(243),"warn","info","error",t(209),"table",t(234)];for(let i=0;i<o[t(240)];i++){const n=it.constructor[t(212)].bind(it),r=o[i],u=e[r]||n;n[t(223)]=it[t(247)](it),n[t(230)]=u[t(230)].bind(u),e[r]=n}}))();const st={key:1,args:[1e3],position:[0,19,0]},ct={key:2,args:[6e3,100],position:[0,19,0]};function at(t,n){const e=ut();return(at=function(t,n){return e[t-=196]})(t,n)}const lt=y({__name:ot(200),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let e,o;const r=t,i=_({clearColor:n(198),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r.disableRender}),u=_({autoRotate:r[n(210)],enableDamping:!0});let s=null;r[n(196)]&&([e,o]=C((()=>F())),e=await e,o(),s=e);const f=m(),p=m();return(t,e)=>{const o=n,c=x(o(203));return v(),M(c,E({ref_key:o(238),ref:p},i,{"window-size":""}),{default:T((()=>[A(o(218),{ref_key:o(216),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),R(I(d),S(O(u)),null,16),e[0]||(e[0]=A(o(232),{color:o(244)},null,-1)),e[1]||(e[1]=A("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[o(196)]&&I(s)?(v(),b(B,{key:0},[R(N,{model:I(s)},null,8,[o(202)]),R(tt,{builds:I(s).city,color:o(236)},null,8,[o(219)])],64)):j("",!0),D(t[o(241)],o(239)),r[o(228)]?(v(),b(o(229),st)):j("",!0),r[o(215)]?(v(),b("TresGridHelper",ct)):j("",!0)])),_:3},16)}}});function ft(t){function n(t){const e=at;if(typeof t===e(242))return function(t){}[e(214)](e(199)).apply("counter");1!==(""+t/t)[e(240)]||t%20==0?function(){return!0}[e(214)]("debugger").call(e(197)):function(){return!1}.constructor(e(245)+"gger").apply(e(221)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{N as _,tt as a,lt as b,F as l};

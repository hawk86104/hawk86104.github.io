import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{z as t,K as n}from"./@tresjs.B1f7s3pS1767066396612.js";import{ae as o,af as r}from"./three.BD1hRFgo1767066396612.js";const{withAsyncContext:a,defineComponent:s}=await e("vue"),{createElementVNode:i,Fragment:l,openBlock:c,createElementBlock:u}=await e("vue"),{ref:w}=await e("vue"),m=await e("three"),d=s({__name:"tagging",async setup(e){let n,s;const{scene:d}=t(),p=w(),f=w();let y=null;const h=([n,s]=a(()=>{return e="https://opensource.cdn.icegl.cn/fonts/FZLanTingHeiS-UL-GB_Regular.json",new Promise((t,n)=>{(new o).load(e,e=>t(e),void 0,e=>n(e))});var e}),n=await n,s(),n),g=function(e,t,n){const o=(new m.Vector3).addVectors(e,t).multiplyScalar(.5),a=(new m.Vector3).subVectors(t,e).normalize(),s=((e,t,n)=>{const o=new m.Group,r=(new m.BufferGeometry).setFromPoints([e,t]),a=new m.Line(r,new m.LineBasicMaterial({color:"green"})),s=new m.ConeGeometry(1,3,8),i=new m.MeshBasicMaterial({color:"green"}),l=new m.Mesh(s,i);l.type="Raycone",l.position.copy(e);const c=new m.Mesh(s,i);c.type="Raycone",c.position.copy(t);const u=new m.Vector3(1,0,0),w=new m.Vector3(0,1,0),d=new m.Vector3(0,0,1);return n.equals(u)?(l.rotation.set(0,0,Math.PI/2),c.rotation.set(0,0,-Math.PI/2)):n.equals(w)?l.rotation.set(0,0,Math.PI):n.equals(d)&&(l.rotation.set(-Math.PI/2,0,0),c.rotation.set(Math.PI/2,0,0)),o.add(a),o.add(l),o.add(c),o})(e,t,a);d.value.add(s);const i=((e,t,n)=>{const o=new r(e,{font:h,size:3,depth:1,height:.2,curveSegments:12,bevelEnabled:!1}),a=new m.MeshBasicMaterial({color:65280}),s=new m.Mesh(o,a);s.position.copy(t);const i=new m.Vector3(1,0,0),l=new m.Vector3(-1,0,0),c=new m.Vector3(0,1,0),u=new m.Vector3(0,-1,0),w=new m.Vector3(0,0,1),d=new m.Vector3(0,0,-1);return n.equals(i)||n.equals(l)||(n.equals(c)||n.equals(u)?s.rotation.set(0,0,Math.PI/2):(n.equals(w)||n.equals(d))&&s.rotation.set(0,Math.PI/2,0)),s})(n,o,a);d.value.add(i)},V=function(e){const{size:t,boxCenter:n}=function(e){y=(new m.Box3).setFromObject(e);const t=new m.Vector3;y.getSize(t);const n=new m.Vector3;return y.getCenter(n),{size:t,boxCenter:n}}(e);!function(e,t){const n=new m.BoxGeometry(e.x,e.y,e.z),o=new m.EdgesGeometry(n),r=new m.LineBasicMaterial({color:"red"}),a=new m.LineSegments(o,r);a.position.copy(t),d.value.add(a)}(t,n);const o=y.min,r=y.max,a=Number(t.z.toFixed(2))+10,s=Number(t.z.toFixed(2))+16;g(new m.Vector3(o.x,o.y,o.z+a),new m.Vector3(r.x,o.y,o.z+a),`长: ${t.x.toFixed(2)}`),g(new m.Vector3(o.x,o.y,o.z+s),new m.Vector3(o.x,r.y,o.z+s),`高: ${t.y.toFixed(2)}`),g(new m.Vector3(o.x-10,o.y,o.z),new m.Vector3(o.x-10,o.y,r.z),`宽: ${t.z.toFixed(2)}`)};return(e,t)=>(c(),u(l,null,[i("TresMesh",{ref_key:"torusref",ref:p,position:[-100,0,0],onClick:t[0]||(t[0]=e=>V(p.value))},[...t[2]||(t[2]=[i("TresTorusGeometry",{args:[50,5,128,128]},null,-1),i("TresMeshBasicMaterial",{color:"orange"},null,-1)])],512),i("TresMesh",{ref_key:"boxref",ref:f,position:[100,0,0],onClick:t[1]||(t[1]=e=>V(f.value))},[...t[3]||(t[3]=[i("TresBoxGeometry",{args:[80,100,20]},null,-1),i("TresMeshNormalMaterial",null,null,-1)])],512)],64))}}),{defineComponent:p}=await e("vue"),{createElementVNode:f,unref:y,normalizeProps:h,guardReactiveProps:g,createVNode:V,Suspense:x,withCtx:M,openBlock:v,createBlock:z,resolveComponent:b,mergeProps:B}=await e("vue"),{reactive:C}=await e("vue"),P=p({__name:"tagging",setup(e){const t=C({windowSize:!0,alpha:!0,antialias:!0}),o=C({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(e,r)=>{const a=b("TresCanvas");return v(),z(a,B({clearColor:"#201919"},t),{default:M(()=>[r[0]||(r[0]=f("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,200],"look-at":[0,0,0]},null,-1)),r[1]||(r[1]=f("TresAmbientLight",{intensity:2},null,-1)),V(y(n),h(g(o)),null,16),(v(),z(x,null,{default:M(()=>[V(d)]),_:1}))]),_:1},16)}}});export{P as default};

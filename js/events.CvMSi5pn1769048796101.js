import{importShared as e}from"./3d-tiles-renderer.DoRCwQO21769048796101.js";import{qiankunWindow_1 as a,useQiankunTvtStore as t,OrbitControls_default as o}from"./index.DY1Qq3wV1769048796101.js";const{defineComponent:n}=await e("vue"),{createElementVNode:r,unref:l,normalizeProps:i,guardReactiveProps:s,createVNode:u,resolveComponent:c,mergeProps:m,withCtx:p,openBlock:h,createElementBlock:d,createCommentVNode:f,Fragment:w}=await e("vue"),v=["rotation"],g={key:0,class:"text-center text-white w-full absolute"},{SRGBColorSpace:P,BasicShadowMap:T,NoToneMapping:S}=await e("three"),{reactive:y,ref:M,onMounted:_,shallowRef:b,watchEffect:x}=await e("vue"),k=n({__name:"events",setup(e){const n=y({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:T,outputColorSpace:P,toneMapping:S,windowSize:!a.__POWERED_BY_QIANKUN__}),k=y({enableDamping:!0,dampingFactor:.05,enableZoom:!0,autoRotate:!1,autoRotateSpeed:2,maxPolarAngle:Math.PI,minPolarAngle:0,maxAzimuthAngle:Math.PI,minAzimuthAngle:-Math.PI,enablePan:!0,keyPanSpeed:7,maxDistance:100,minDistance:0,minZoom:0,maxZoom:100,zoomSpeed:1,enableRotate:!0,rotateSpeed:1}),I=M(),A=b(),C=t();let R=0;const D=({elapsed:e})=>{I.value&&C.floatMove&&(R++,I.value.position.y=4+3*Math.sin(R/60))};function N(e){e&&"ffff40"!==e.object.material.color.getHexString()&&(window.qiankunProps?.setGlobalState({mouseInState:!0,curType:"mouseIn"}),e.object.material.color.set("#ffFF40"))}function E(e){e&&"006060"!==e.object.material.color.getHexString()&&(window.qiankunProps?.setGlobalState({mouseInState:!1,curType:"mouseIn"}),e.eventObject.material.color.set("#006060"))}x(()=>{A.value&&(A.value.shadow.mapSize.set(1e3,1e3),A.value.shadow.camera.near=.5,A.value.shadow.camera.far=5e4,A.value.shadow.camera.top=20,A.value.shadow.camera.right=20,A.value.shadow.camera.left=-20,A.value.shadow.camera.bottom=-20)});const j=M("auto");return _(()=>{I.value.position.y=4;const e=document.querySelector(".app-main");e&&(j.value=`${e.clientHeight}px`)}),(e,t)=>{const P=c("TresCanvas");return h(),d(w,null,[u(P,m(n,{style:{height:j.value},onLoop:D}),{default:p(()=>[t[2]||(t[2]=r("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),u(l(o),i(s(k)),null,16),t[3]||(t[3]=r("TresAmbientLight",{intensity:.5},null,-1)),r("TresMesh",{ref_key:"sphereRef",ref:I,position:[0,4,0],"cast-shadow":"",onPointerenter:N,onPointerleave:E},[...t[0]||(t[0]=[r("TresSphereGeometry",{args:[2,32,32]},null,-1),r("TresMeshToonMaterial",{color:"#006060"},null,-1)])],544),r("TresMesh",{rotation:[-Math.PI/2,0,0],"receive-shadow":""},[...t[1]||(t[1]=[r("TresPlaneGeometry",{args:[20,20,20,20]},null,-1),r("TresMeshToonMaterial",null,null,-1)])],8,v),r("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:A,position:[10,8,4],intensity:1,"cast-shadow":""},null,512),t[4]||(t[4]=r("TresDirectionalLight",{position:[10,2,4],intensity:1,"cast-shadow":""},null,-1)),t[5]||(t[5]=r("TresGridHelper",null,null,-1))]),_:1},16,["style"]),l(a).__POWERED_BY_QIANKUN__?f("",!0):(h(),d("h1",g,"请通过qiankun主程序访问此页面"))],64)}}});export{k as default};

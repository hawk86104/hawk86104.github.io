import{_ as t,C as n,cl as e,cm as o,cn as r,co as i,l as u,c0 as s,ak as c,am as a}from"./three.W6GmiHfn1739444016646.js";import{P as l,e as f,o as p}from"./@tresjs.Q4_KYO2a1739444016646.js";import{z as d}from"./three-custom-shader-material.kf-ieBUt1739444016646.js";import{b as h,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1739444016646.js";import{d as g,b as m,a2 as w,w as b,o as I,H as _,u as v,r as C,a3 as x,e as S,f as j,g as A,N as B,j as T,aj as R,ak as M,F as z,M as F,J as k,m as O}from"./@vue.NRI7TcgI1739444016646.js";function Z(t,n){const e=E();return(Z=function(t,n){return e[t-=273]})(t,n)}function E(){const t=["12aicDPY","action","name","chain","10086543DTTCXI","100468stfmvr","function *\\( *\\)","apply","init","debu","LANDMASS","console","trace","358662vyuhPf","log","test","gger","359312SHXZGF","1180850xDQfEZ","42TkQbMM","165680cazFIr","error","length","exception","bind","constructor","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","while (true) {}","return (function() ","input","warn",'{}.constructor("return this")( )',"335752pHuvpo"];return(E=function(){return t})()}!function(t,n){const e=Z,o=E();for(;;)try{if(127162===-parseInt(e(285))/1+-parseInt(e(282))/2+parseInt(e(300))/3*(-parseInt(e(305))/4)+-parseInt(e(283))/5+-parseInt(e(278))/6+parseInt(e(284))/7*(-parseInt(e(299))/8)+parseInt(e(304))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(307)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){H(this,(function(){const t=Z,n=new RegExp(t(306)),e=new RegExp(t(292),"i"),o=L(t(273));n[t(280)](o+t(303))&&e[t(280)](o+t(296))?L():o("0")}))()}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(307)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();D(void 0,(function(){const t=Z,n=function(){const t=Z;let n;try{n=Function(t(295)+t(298)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(276)]||{},o=[t(279),t(297),t(293),t(286),t(288),"table",t(277)];for(let r=0;r<o[t(287)];r++){const n=D[t(290)].prototype[t(289)](D),i=o[r],u=e[i]||n;n[t(291)]=D[t(289)](D),n.toString=u.toString.bind(u),e[i]=n}}))();const G=async()=>{const t=await l("./plugins/digitalCity/model/shanghai.FBX");let n=null,e=null,o=null;return t.traverse((t=>{const r=Z;"CITY_UNTRIANGULATED"===t[r(302)]&&(n=t),t[r(302)]===r(275)&&(e=t),"ROADS"===t[r(302)]&&(o=t)})),{model:t,city:n,land:e,roads:o}};function L(t){function n(t){const e=Z;if("string"==typeof t)return function(t){}[e(290)](e(294)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(274)+e(281)).call(e(301)):function(){return!1}[e(290)](e(274)+e(281)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const W=$;function $(t,n){const e=P();return($=function(t,n){return e[t-=214]})(t,n)}!function(t,n){const e=$,o=P();for(;;)try{if(263257===-parseInt(e(259))/1*(-parseInt(e(265))/2)+parseInt(e(226))/3*(parseInt(e(235))/4)+parseInt(e(272))/5+parseInt(e(267))/6+parseInt(e(260))/7+parseInt(e(224))/8*(-parseInt(e(271))/9)+-parseInt(e(261))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(243)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=$,n=new RegExp(t(275)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=Q(t(277));n[t(253)](o+"chain")&&e[t(253)](o+t(242))?Q():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(243)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=$,n=function(){const t=$;let n;try{n=Function(t(250)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(244)]=n[t(244)]||{},o=[t(254),t(268),"info",t(274),t(229),t(222),t(239)];for(let r=0;r<o[t(231)];r++){const n=X[t(220)][t(227)][t(234)](X),i=o[r],u=e[i]||n;n[t(219)]=X[t(234)](X),n.toString=u[t(215)][t(234)](u),e[i]=n}}))();const J=[W(264)];function P(){const t=["counter","152bHmLsB","call","2433FnZIWd","prototype","uniforms","exception","dispose","length","#ffff00","buildingsModelCustomShader","bind","1556pqifzd","debu","uGradient","gradient","trace","uOpacity","bulidingsColor","input","apply","console","city","gger","value","forEach","DoubleSide","return (function() ","side","#e523ff","test","log","Color","opacity","__csm","color","4591cSOtIy","1588356RAvXvj","10376090EsbFGH","uColor","model","object","164jEuaZz","while (true) {}","2882964ygJoMb","warn","#112233","clone","190206oBjGDs","1515345frnthJ","renderOrder","error","function *\\( *\\)","isArray","init","topColor","string","toString","material","setStyle","action","__proto__","constructor","computeBoundingSphere","table"];return(P=function(){return t})()}const V=g({__name:W(233),props:{model:{},bulidingsColor:{default:W(252)},landColor:{default:W(269)},topColor:{default:W(232)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=W,r=e,i=m(0),u=r[o(263)][o(245)];u[o(273)]=1001;const s=r[o(263)].land;(()=>{const e=o,{geometry:s}=u;s.computeBoundingBox(),s[e(221)]();const{max:c,min:a}=s.boundingBox;if(u[e(216)][e(257)])return;const l=new d({baseMaterial:u.material,vertexShader:h,fragmentShader:y,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(255)])(r[e(241)])},uOpacity:{value:r[e(256)]},uLightColor:{value:new n("#ffffff")},uTopColor:{value:new(t[e(255)])(r[e(278)])},uTime:i,uGradient:{value:r[e(238)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(249)]});u[e(216)][e(230)](),u[e(216)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[o(247)]+=t})),w((()=>{const n=o;r[n(241)]&&u[n(216)].uniforms[n(262)].value[n(217)](r[n(241)]),r.landColor&&((n,e)=>{const i=o;let u;"cu"===n||"land"===n&&(u=Array[i(276)](s.material)?s[i(216)]:[s[i(216)]],u[i(248)]((n=>{const o=i;n[e][o(217)](r.landColor),n[o(251)]=t[o(249)]})))})("land",n(258)),r[n(256)]&&(u[n(216)][n(228)][n(240)][n(247)]=r.opacity)})),b(r,((t,n)=>{const e=o;u[e(216)][e(228)][e(237)][e(247)]=t[e(238)]}));const a=r.model[o(263)][o(270)]();return(t,n)=>(I(),_("primitive",{object:v(a)},null,8,J))}});function Q(t){function n(t){const e=$;if(typeof t===e(214))return function(t){}[e(220)](e(266)).apply(e(223));1!==(""+t/t)[e(231)]||t%20==0?function(){return!0}[e(220)]("debu"+e(246))[e(225)](e(218)):function(){return!1}[e(220)](e(236)+e(246)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const U=K;function q(){const t=["apply","72ixqnum","opacity","exception","style","while (true) {}","length","resolution","7899374VrYBCX","input","color","function *\\( *\\)","clone","buildingsLines","innerWidth","linewidth","log","material","uOpacity","info","trace","primitive","action","object","call","builds","6noCegg","7261740ecDYrZ","width","renderOrder","__proto__","uniforms","1233772FzhUXl","gger","matrix","2133272dtThqk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1415412cgtJyU","#FFF","innerHeight","test","set","Wireframe","constructor","Shader","geometry","applyMatrix4","value","fromEdgesGeometry","stateObject","uColor","toString","return (function() ","table","debu","1598268NdlNik","console","counter","4111136BFhQVf","bind"];return(q=function(){return t})()}!function(t,n){const e=K,o=q();for(;;)try{if(845996===parseInt(e(268))/1+-parseInt(e(263))/2+-parseInt(e(286))/3+parseInt(e(289))/4+-parseInt(e(258))/5+-parseInt(e(257))/6*(parseInt(e(299))/7)+-parseInt(e(266))/8*(-parseInt(e(292))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(291)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function K(t,n){const e=q();return(K=function(t,n){return e[t-=250]})(t,n)}!function(){Y(this,(function(){const t=K,n=new RegExp(t(302)),e=new RegExp(t(267),"i"),o=ot("init");n[t(271)](o+"chain")&&e.test(o+t(300))?ot():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(291)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=K,n=function(){const t=K;let n;try{n=Function(t(283)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(287)]=n[t(287)]||{},o=[t(307),"warn",t(250),"error",t(294),t(284),t(251)];for(let r=0;r<o[t(297)];r++){const n=tt[t(274)].prototype.bind(tt),i=o[r],u=e[i]||n;n[t(261)]=tt[t(290)](tt),n[t(282)]=u[t(282)].bind(u),e[i]=n}}))();const nt=[U(254)],et=g({__name:U(304),props:{builds:{},width:{default:1},color:{default:U(269)},opacity:{default:1},style:{default:U(273)}},setup(t){const s=U,c=t;let a=null,l=null;if(c[s(295)]===s(273)){const t=new e(c[s(256)][s(276)]);let n=(new o)[s(279)](t),u=new r({color:c[s(301)],linewidth:c[s(259)],opacity:c[s(293)],transparent:!0,depthWrite:!0,depthTest:!0});u[s(298)][s(272)](window[s(305)],window[s(270)]),a=new i(n,u),a[s(277)](c.builds.matrix[s(303)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c.color)},uOpacity:{value:c[s(293)]}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new e(c[s(256)][s(276)]),o=new u(l);a=new LineSegments(t,o),a[s(277)](c[s(256)][s(265)][s(303)]()),a[s(308)][s(306)]=c[s(259)],a[s(260)]=1e3}return w((()=>{const t=s;c.style===t(275)&&(c[t(301)]&&(l[t(262)][t(281)][t(278)]=new n(c[t(301)])),c[t(293)]&&(l[t(262)][t(309)][t(278)]=c.opacity)),c[t(295)]===t(273)&&(c[t(301)]&&(a.material.color=new n(c[t(301)])),c[t(293)]&&(a[t(308)][t(293)]=c[t(293)])),c[t(259)]&&(a.material[t(306)]=c[t(259)])})),(t,n)=>{const e=s;return I(),_(e(252),{object:v(a)},null,8,nt)}}});function ot(t){function n(t){const e=K;if("string"==typeof t)return function(t){}[e(274)](e(296)).apply(e(288));1!==(""+t/t)[e(297)]||t%20==0?function(){return!0}.constructor("debu"+e(264))[e(255)](e(253)):function(){return!1}[e(274)](e(285)+e(264)).apply(e(280)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=ut,o=st();for(;;)try{if(244483===-parseInt(e(509))/1*(-parseInt(e(466))/2)+parseInt(e(463))/3*(parseInt(e(503))/4)+-parseInt(e(494))/5+parseInt(e(492))/6+-parseInt(e(511))/7*(parseInt(e(501))/8)+parseInt(e(505))/9*(parseInt(e(488))/10)+-parseInt(e(493))/11*(parseInt(e(490))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(476)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){rt(this,(function(){const t=ut,n=new RegExp(t(497)),e=new RegExp(t(513),"i"),o=ft(t(496));n[t(469)](o+t(498))&&e[t(469)](o+"input")?ft():o("0")}))()}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(476)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(t,n){const e=st();return(ut=function(t,n){return e[t-=462]})(t,n)}function st(){const t=["ability","26690fCzTwm","showGridHelper","2469108rTzIpx","model","995850RKViGb","22PMJfBJ","1355330HWDWQZ","autoRotate","init","function *\\( *\\)","chain","builds","counter","16pAjeCu","showBuildings","186248NBvakt","#ffffff","423UVXzMZ","perspectiveCameraRef","$slots","warn","1olVxHq","trace","605563FMpxpn","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","24MzOsBb","TresDirectionalLight","#000","872342IDgKkQ","__proto__","TresCanvas","test","toString","stateObject","return (function() ","constructor","city","TresAxesHelper","apply","error","call","TresAmbientLight","table","tcRef","action","bind","showAxesHelper","gger","log"];return(st=function(){return t})()}it(void 0,(function(){const t=ut;let n;try{n=Function(t(472)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n.console=n.console||{},o=[t(486),t(508),"info",t(477),"exception",t(480),t(510)];for(let i=0;i<o.length;i++){const n=it[t(473)].prototype[t(483)](it),r=o[i],u=e[r]||n;n[t(467)]=it[t(483)](it),n[t(470)]=u[t(470)][t(483)](u),e[r]=n}}))();const ct={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]},lt=g({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ut;let e,o;const r=t,i=C({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r.disableRender}),u=C({autoRotate:r[n(495)],enableDamping:!0});let l=null;r[n(502)]&&([e,o]=x((()=>G())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,s=S(o(468));return I(),j(s,O({ref_key:o(481),ref:d},i,{"window-size":""}),{default:A((()=>[B("TresPerspectiveCamera",{ref_key:o(506),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(v(p),R(M(u)),null,16),e[0]||(e[0]=B(o(479),{color:o(504)},null,-1)),e[1]||(e[1]=B(o(464),{position:[100,100,0],intensity:.5,color:o(504)},null,-1)),r[o(502)]&&v(l)?(I(),_(z,{key:0},[T(V,{model:v(l)},null,8,[o(491)]),T(et,{builds:v(l)[o(474)],color:o(465)},null,8,[o(499)])],64)):F("",!0),k(t[o(507)],o(487)),r[o(484)]?(I(),_(o(475),ct)):F("",!0),r[o(489)]?(I(),_("TresGridHelper",at)):F("",!0)])),_:3},16)}}});function ft(t){function n(t){const e=ut;if(typeof t===e(512))return function(t){}[e(473)]("while (true) {}").apply(e(500));1!==(""+t/t).length||t%20==0?function(){return!0}[e(473)](e(462)+e(485))[e(478)](e(482)):function(){return!1}[e(473)](e(462)+e(485))[e(476)](e(471)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as _,et as a,lt as b,G as l};

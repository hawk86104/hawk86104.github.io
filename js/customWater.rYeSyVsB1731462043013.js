import{_ as t,a0 as e}from"./three.wKRaqyB-1731462043013.js";import{e as n,W as r,U as a,c as o}from"./@tresjs.xlnLF3O61731462043013.js";import{a as s}from"./index.R1BN6iSd1731462043013.js";import"./index.NYyACQTV1731462043013.js";import{z as i}from"./three-custom-shader-material.N2snw3Mo1731462043013.js";import{p as l}from"./gl-noise.BrVtymbx1731462043013.js";import{d as u,b as c,a3 as p,w as f,o as g,D as h,J as m,j as v,u as d,r as _,f as b,g as w,aj as M,ak as y,m as x,al as j}from"./@vue.-THQH3GC1731462043013.js";import{P as S}from"./tweakpane.yHWGBmom1731462043013.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.0ErHuUDz1731462043013.js";import"./@vueuse.W4jVx8WA1731462043013.js";import"./three-stdlib.1CDoKLj-1731462043013.js";import"./@pmndrs.A7R_S0Qe1731462043013.js";import"./object-hash.BCTgntsx1731462043013.js";import"./@amap.r7GlLHCm1731462043013.js";import"./jszip.9e6IwfI51731462043013.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.1SJIE9a11731462043013.js";import"./all.three.JSbXmeVa1731462043013.js";import"./oimophysics.x0jH7fze1731462043013.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.fPHf6LI31731462043013.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.9SAeh0Fo1731462043013.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.iEswbC8q1731462043013.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.TDdUcPXA1731462043013.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.AKqNjNFA1731462043013.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.7hGs5oW01731462043013.js";const z=B;!function(t,e){const n=B,r=O();for(;;)try{if(464835===-parseInt(n(318))/1+-parseInt(n(328))/2*(parseInt(n(307))/3)+-parseInt(n(305))/4*(-parseInt(n(358))/5)+-parseInt(n(338))/6*(-parseInt(n(333))/7)+parseInt(n(364))/8*(parseInt(n(330))/9)+-parseInt(n(361))/10*(-parseInt(n(309))/11)+parseInt(n(343))/12)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(352)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=B,e=new RegExp(t(332)),n=new RegExp(t(359),"i"),r=F(t(339));e[t(341)](r+t(345))&&n.test(r+t(323))?F():r("0")}))()}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(352)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=O();return(B=function(t,e){return n[t-=301]})(t,e)}I(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function(t(324)+t(329)+");")()}catch(n){e=window}return e}(),n=e[t(301)]=e[t(301)]||{},r=[t(335),t(357),t(322),"error","exception",t(342),"trace"];for(let a=0;a<r[t(325)];a++){const e=I[t(362)][t(317)].bind(I),o=r[a],s=n[o]||e;e.__proto__=I.bind(I),e[t(354)]=s.toString[t(326)](s),n[o]=e}}))();const G=[z(303)],H=[z(360)];function O(){const t=["console","DoubleSide","rotation-x","material","136HESmOJ","side","1791513EOaKrO","customWaterMesh","5473281udHHzf","MeshPhysicalMaterial","action","dispose","call","fragmentShader","uTime","tmRef","prototype","853614zSWNTk","while (true) {}","fragment","brightness","info","input","return (function() ","length","bind","height","2xAnOWb",'{}.constructor("return this")( )',"74583HVZSxS","vertex","function *\\( *\\)","758534smmmhW","counter","log","Color","debu","12VceIOf","init","waterColor","test","table","2267712xbPTec","Flatshading","chain","needsUpdate","convertLinearToSRGB","#b3ffff","gger","TresMesh","TresBoxGeometry","apply","value","toString","#52a7f7","baseMaterial","warn","125720QsvPsc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","args","10eFFeJp","constructor","waterHighlight","152gCcUXN"];return(O=function(){return t})()}const W=u({__name:z(308),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(355)},waterHighlight:{default:z(348)},brightness:{default:1},baseMaterial:{default:t[z(310)]}},setup(a){const o=z,s=a,u=c(null),_={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},b={uTime:{value:0},waterColor:{value:new(t[o(336)])(s[o(340)])[o(347)]()},waterHighlight:{value:new(t[o(336)])(s[o(363)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s.height}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=o;b[e(315)][e(353)]=-t/5})),p((()=>{const e=o;s[e(327)]&&(b.uHeight[e(353)]=s[e(327)]),s[e(340)]&&(b[e(340)][e(353)]=new(t[e(336)])(s[e(340)])[e(347)]()),s.waterHighlight&&(b[e(363)][e(353)]=new(t[e(336)])(s[e(363)]).convertLinearToSRGB()),s[e(321)]&&(b[e(321)].value=s[e(321)])})),f((()=>s[o(344)]),(t=>{const e=o;u[e(353)].material[e(346)]=!0})),f((()=>s[o(356)]),(n=>{const r=o,a=new i({baseMaterial:t[n],vertexShader:l(_[r(331)]),fragmentShader:_[r(320)],uniforms:b,flatShading:s[r(344)],side:e,roughness:.2,metalness:.1,silent:!0});u[r(353)][r(304)][r(312)](),u[r(353)][r(304)]=a})),(e,n)=>{const a=o;return g(),h(a(350),{ref_key:a(316),ref:u,"rotation-x":-Math.PI/2},[m(a(351),{args:[5,5,e.height,64,64,1]},null,8,H),v(d(r),{baseMaterial:t[a(310)],vertexShader:d(l)(_[a(331)]),fragmentShader:_[a(320)],uniforms:b,side:t[a(302)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,["baseMaterial","vertexShader",a(314),a(306),"flatShading"])],8,G)}}});function F(t){function e(t){const n=B;if("string"==typeof t)return function(t){}[n(362)](n(319)).apply(n(334));1!==(""+t/t)[n(325)]||t%20==0?function(){return!0}.constructor("debu"+n(349))[n(313)](n(311)):function(){return!1}[n(362)](n(337)+n(349))[n(352)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=N;!function(t,e){const n=N,r=k();for(;;)try{if(991068===-parseInt(n(426))/1*(parseInt(n(419))/2)+parseInt(n(364))/3+-parseInt(n(402))/4+parseInt(n(423))/5*(parseInt(n(390))/6)+parseInt(n(413))/7+-parseInt(n(399))/8*(-parseInt(n(392))/9)+-parseInt(n(397))/10*(parseInt(n(394))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(369)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(){const t=["ACESFilmicToneMapping","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","customWater","MeshPhysicalMaterial","1832722tMjfUy","#b3ffff","pos-y.jpg","baseMaterial","1771695mDtkZS","TresDirectionalLight","waterColor","1nMoaSG",'{}.constructor("return this")( )',"value","console","4633845vBWCzQ","counter","string","chain","水体颜色","apply","#52a7f7","target","action","bind","label","Flatshading","init","浪头颜色","length","table","prototype","MeshBasicMaterial","addBinding","toString","trace","list","pos-z.jpg","warn","input","brightness","24RKUVGD","stateObject","145179TLBXpu","return (function() ","121517fcJpKc","MeshPhongMaterial","#627179","2120MmKYaC","while (true) {}","976mGowSV","gger","change","5711232fBVSWB","TresAmbientLight","pos-x.jpg","MeshNormalMaterial","constructor","TresPerspectiveCamera","test","debu","neg-x.jpg","call","MeshDepthMaterial","5230736SQTIxJ","exception"];return(k=function(){return t})()}!function(){D(this,(function(){const t=N,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=A(t(376));e[t(408)](r+t(367))&&n[t(408)](r+t(388))?A():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(369)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(t,e){const n=k();return(N=function(t,e){return n[t-=363]})(t,e)}L(void 0,(function(){const t=N,e=function(){const t=N;let e;try{e=Function(t(393)+t(427)+");")()}catch(n){e=window}return e}(),n=e[t(363)]=e[t(363)]||{},r=["log",t(387),"info","error",t(414),t(379),t(384)];for(let a=0;a<r.length;a++){const e=L.constructor[t(380)][t(373)](L),o=r[a],s=n[o]||e;e.__proto__=L.bind(L),e[t(383)]=s[t(383)].bind(s),n[o]=e}}))();const R=u({__name:P(417),setup(e){const n=P,r=_({alpha:!0,toneMapping:t[n(415)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(396),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(370),waterHighlight:n(420),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new S;return c.addBinding(u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(382)](u,n(425),{label:n(368)}),c[n(382)](u,"waterHighlight",{label:n(377)}),c.addBinding(u,n(389),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,"Flatshading",{label:n(375)}),c.addBlade({view:n(385),label:"材质",options:[{text:n(418),value:n(418)},{text:n(381),value:n(381)},{text:n(405),value:n(405)},{text:"MeshStandardMaterial",value:"MeshStandardMaterial"},{text:n(395),value:n(395)},{text:"MeshToonMaterial",value:"MeshToonMaterial"},{text:"MeshLambertMaterial",value:"MeshLambertMaterial"},{text:n(412),value:n(412)}],value:u[n(422)]}),c.on(n(401),(t=>{const e=n;"材质"===t[e(371)][e(374)]&&(u.baseMaterial=t[e(428)])})),(t,e)=>{const c=n;return g(),b(d(o),x(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=m(c(407),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),M(y(i)),null,16),e[1]||(e[1]=m(c(403),{intensity:.5},null,-1)),e[2]||(e[2]=m(c(424),{position:[15,15,15],intensity:1},null,-1)),v(W,M(y(u)),null,16),v(d(T),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(j,null,{default:w((()=>[v(d(s),{files:[c(404),c(410),c(421),"neg-y.jpg",c(386),"neg-z.jpg"],path:c(416)})])),_:1}))])),_:1},16)}}});function A(t){function e(t){const n=N;if(typeof t===n(366))return function(t){}[n(406)](n(398))[n(369)](n(365));1!==(""+t/t)[n(378)]||t%20==0?function(){return!0}[n(406)](n(409)+"gger")[n(411)](n(372)):function(){return!1}.constructor(n(409)+n(400))[n(369)](n(391)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

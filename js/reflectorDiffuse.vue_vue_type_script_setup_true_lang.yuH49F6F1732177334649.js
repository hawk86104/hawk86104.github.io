import{c0 as t,a3 as n,C as e,k as r}from"./three.rV-MfnQb1732177334649.js";import{b as o}from"./@tresjs.ty5XF8T_1732177334649.js";import{R as c}from"./all.three.mYbB8mH11732177334649.js";import{d as i,b as a,a6 as s,a3 as u,o as f,D as l,J as p,m,u as h}from"./@vue.-THQH3GC1732177334649.js";!function(t,n){const e=g,r=x();for(;;)try{if(298770===parseInt(e(530))/1*(parseInt(e(517))/2)+parseInt(e(510))/3+parseInt(e(519))/4+parseInt(e(504))/5*(parseInt(e(514))/6)+parseInt(e(502))/7*(parseInt(e(490))/8)+parseInt(e(494))/9*(parseInt(e(499))/10)+-parseInt(e(508))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){d(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(515),"i"),r=y(t(516));n[t(500)](r+t(523))&&e[t(500)](r+"input")?y():r("0")}))()}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(520)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(t,n){const e=x();return(g=function(t,n){return e[t-=487]})(t,n)}function x(){const t=["void main() {","string","142060WCKqaT","test","length","1065491VHEtLK","bind","5WQwPAW","info","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","replace","8537320AAFfCI","toString","89544WFzhhA","trace","fragmentShader","log","1720626bVGmuy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","267478HCUjcA","action","80652nvGACW","apply","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","constructor","chain","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","__proto__","console","call","#include <project_vertex>","gger","3mbmHAd","vertexShader","counter","table","8ChNXeC",'{}.constructor("return this")( )',"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","exception","117XsxnhH","while (true) {}","#include <emissivemap_fragment>"];return(x=function(){return t})()}v(void 0,(function(){const t=g;let n;try{n=Function("return (function() "+t(491)+");")()}catch(o){n=window}const e=n[t(526)]=n[t(526)]||{},r=[t(513),"warn",t(505),"error",t(493),t(489),t(511)];for(let c=0;c<r[t(501)];c++){const n=v.constructor.prototype[t(503)](v),o=r[c],i=e[o]||n;n[t(525)]=v[t(503)](v),n[t(509)]=i.toString[t(503)](i),e[o]=n}}))();function y(t){function n(t){const e=g;if(typeof t===e(498))return function(t){}[e(522)](e(495))[e(520)](e(488));1!==(""+t/t)[e(501)]||t%20==0?function(){return!0}.constructor("debu"+e(529))[e(527)](e(518)):function(){return!1}[e(522)]("debu"+e(529))[e(520)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=M;!function(t,n){const e=M,r=w();for(;;)try{if(654193===parseInt(e(506))/1*(-parseInt(e(467))/2)+parseInt(e(511))/3+parseInt(e(444))/4+-parseInt(e(504))/5+parseInt(e(471))/6+-parseInt(e(473))/7+-parseInt(e(509))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(503)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=M,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(463),"i"),r=E(t(484));n.test(r+t(449))&&e[t(510)](r+t(469))?E():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(503)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(){const t=["wrapT","assign","string","info","repeat","apply","358030QZIjTr","rotation-x","269417uBIHnY","color","error","2745824hRLelc","test","3198639jQOjIi","4379932fBCgxh","warn","textureMatrixUniform","TresMesh","console","chain","toString","__proto__","onBeforeRender","showGridHelper","attributes","length","call","prototype","return (function() ","wrapS","bind","action","channel","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tpgRef","textureMatrix","#ffffff","6rKjUuS","TresPlaneGeometry","input","stateObject","5165076EXWusq","set","8013348oDnsrS","add","renderTargetUniform","trace","aoMap","value","constructor","uniforms","tmsmRef","tmRef","TresMeshStandardMaterial","init","onBeforeCompile","gger",'{}.constructor("return this")( )',"object","reflectMap","#444","log","TresGroup","debu","reflectorDiffuse","mixStrength","exception","update"];return(w=function(){return t})()}b(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(458)+t(487)+");")()}catch(e){n=window}return n}(),e=n[t(448)]=n[t(448)]||{},r=[t(491),t(445),t(501),t(508),t(496),"table",t(476)];for(let o=0;o<r.length;o++){const n=b[t(479)][t(457)][t(460)](b),c=r[o],i=e[c]||n;n[t(451)]=b[t(460)](b),n[t(450)]=i[t(450)][t(460)](i),e[c]=n}}))();const I=[_(505)],j=[_(488),"visible"];function M(t,n){const e=w();return(M=function(t,n){return e[t-=444]})(t,n)}const S=i({__name:_(494),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(466)}},async setup(i){const d=_;let v,x;const y=i,C=new t(9.5,10),b=a(),w=a(),M=a(),S=new c,E={mirror:{value:y.mirror},mixStrength:{value:y[d(495)]}},T=([v,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,x(),v);for(var z=0;z<3;z++)T[z][d(459)]=n,T[z][d(498)]=n,T[z][d(502)][d(472)](16,16);const A={color:new e(d(490)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},R=t=>{const n=d;t.uniforms[n(489)]=S[n(475)],t[n(480)][n(465)]=S[n(446)],t[n(480)]=Object[n(499)](t.uniforms,E),(t=>{const n=g;t.vertexShader=t.vertexShader.replace(n(497),n(492)),t.vertexShader=t[n(487)][n(507)](n(528),n(521))})(t),(t=>{const n=g;t.fragmentShader=t[n(512)][n(507)](n(497),n(524)),t[n(512)]=t[n(512)][n(507)](n(496),n(506))})(t)};return u((()=>{const t=d;b.value&&(b[t(478)][t(454)].uv1=b[t(478)][t(454)].uv),M[t(478)]&&(M[t(478)][t(477)][t(462)]=1,M[t(478)][t(485)]=R),w[t(478)]&&(w[t(478)][t(474)](S),w.value[t(452)]=(n,e,r)=>{S[t(497)](n,e,r)}),y[t(507)]&&M[t(478)]&&(M[t(478)][t(507)]=new e(y[t(507)]))})),(t,n)=>{const e=d;return f(),l(e(492),null,[p(e(447),{ref_key:e(482),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(468),{ref_key:e(464),ref:b,args:[10,10]},null,512),p(e(483),m({ref_key:e(481),ref:M},A),null,16)],8,I),p("primitive",{object:h(C),visible:t[e(453)]},null,8,j)])}}});function E(t){function n(t){const e=M;if(typeof t===e(500))return function(t){}[e(479)]("while (true) {}")[e(503)]("counter");1!==(""+t/t)[e(455)]||t%20==0?function(){return!0}[e(479)](e(493)+"gger")[e(456)](e(461)):function(){return!1}[e(479)](e(493)+e(486))[e(503)](e(470)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

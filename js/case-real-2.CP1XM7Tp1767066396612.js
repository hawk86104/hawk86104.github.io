import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{T as t,G as a,H as r,c as o,r as n,o as i,$ as l,b as s,Z as p}from"./@icegl.P72p7hOZ1767066396612.js";import{s as u}from"./@tresjs.B1f7s3pS1767066396612.js";import{_ as d}from"./DevTDTTiles.vue_vue_type_script_setup_true_lang.D3Em1QvR1767066396612.js";import{_ as g}from"./@fesjs.BK66sTPr1767066396612.js";const{defineComponent:c}=await e("vue"),{createElementVNode:m,unref:f,createVNode:h,withCtx:v,openBlock:_,createBlock:y,createCommentVNode:w,Suspense:k,renderList:j,Fragment:C,createElementBlock:S,toDisplayString:b,resolveComponent:T,mergeProps:M}=await e("vue"),x=["map","side"],B=["map","side"],P=["map","side","opacity"],N={class:"css2d-label"},{SRGBColorSpace:O,BasicShadowMap:E,NoToneMapping:G,DoubleSide:D,RepeatWrapping:L}=await e("three"),{onMounted:V,reactive:R,ref:z,shallowRef:A,computed:H}=await e("vue"),I=g(c({__name:"case-real-2",setup(e){const g=R({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:E,outputColorSpace:O,toneMapping:G}),c=z({effectProps:{enabled:!1,focusArea:.7,feather:.1},ambientLight:{color:"#fff",intensity:1},directionalLight:{color:"#fff",intensity:2,position:[-1500,500,500]},background:"/plugins/earthSample/image/menuA/bg-img.png"}),I=z({heading:90,pitch:-45,distance:27e4,longitude:116.31635810091619,latitude:40.125336671652086}),J=z(""),F=z(""),U=H(()=>F.value||J.value),W=A(),Z=A(),$=A([]);V(()=>{fetch("/plugins/geokit/json/110000.json").then(e=>e.json()).then(e=>{Z.value=e,$.value=e.features[0].geometry.coordinates[0][0].map(e=>({lon:e[0],lat:e[1],height:5100}))}).catch(e=>{console.error("Error loading Beijing GeoJSON:",e)}),fetch("/plugins/geokit/json/110000.children.json").then(e=>e.json()).then(e=>{W.value=e}).catch(e=>{console.error("Error loading Beijing GeoJSON:",e)})});return(e,O)=>{const E=T("TresCanvas");return _(),S(C,null,[O[3]||(O[3]=m("p",{class:"video-link"},[m("a",{href:"https://www.bilibili.com/video/BV11C8GziEiH",target:"_blank"},"视频教学")],-1)),h(E,M(g,{"window-size":""}),{default:v(()=>[O[2]||(O[2]=m("TresPerspectiveCamera",{fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),h(f(t)),h(f(a),{position:I.value,"onUpdate:position":O[0]||(O[0]=e=>I.value=e),"min-distance":1},null,8,["position"]),h(f(r),{sceneConfig:c.value},null,8,["sceneConfig"]),h(d),(_(),y(k,null,{default:v(()=>[h(f(u),{path:"/plugins/geokit/image/110000.bg.jpg"},{default:v(({state:e})=>[h(f(o),{texture:e},null,8,["texture"]),Z.value?(_(),y(f(n),{key:0,geometry:Z.value.features[0].geometry,height:5e3,renderOrder:10},{default:v(()=>[m("TresMeshStandardMaterial",{map:e,side:f(D),transparent:"","depth-write":!1},null,8,x)]),_:2},1032,["geometry"])):w("",!0)]),_:1})]),_:1})),(_(),y(k,null,{default:v(()=>[h(f(u),{path:"/plugins/digitalCity/image/line2.png"},{default:v(({state:e})=>[h(f(o),{texture:e,rotation:-Math.PI/2,center:[.2,.5]},null,8,["texture","rotation"]),Z.value?(_(),y(f(i),{key:0,geometry:Z.value.features[0].geometry,height:5e3,renderOrder:10},{default:v(()=>[m("TresMeshStandardMaterial",{map:e,side:f(D),transparent:"","depth-write":!1},null,8,B)]),_:2},1032,["geometry"])):w("",!0)]),_:1})]),_:1})),$.value.length?(_(),y(k,{key:0},{default:v(()=>[h(f(u),{path:"/plugins/digitalCity/image/flyLine4.png"},{default:v(({state:e})=>[h(f(o),{texture:e,wrapT:f(L),wrapS:f(L)},null,8,["texture","wrapT","wrapS"]),h(f(l),{duration:2e3},{default:v(()=>[h(f(s),{points:$.value,width:500,renderOrder:50,color:"#0057ff",map:e},null,8,["points","map"])]),_:2},1024)]),_:1})]),_:1})):w("",!0),W.value?(_(),y(k,{key:1},{default:v(()=>[h(f(u),{path:"/plugins/floor/image/concrete_wet_floor_basecolor.jpg"},{default:v(({state:e})=>[h(f(o),{texture:e},null,8,["texture"]),(_(!0),S(C,null,j(W.value.features,(t,a)=>(_(),S(C,{key:a},[t?(_(),y(f(n),{key:0,geometry:t.geometry,height:5e3,renderOrder:20,onPointerenter:e=>J.value=t.properties?.name,onPointerleave:O[1]||(O[1]=e=>J.value=""),onClick:e=>{return a=t.properties?.name,void(a&&(F.value!==a?F.value=a:F.value=""));var a}},{default:v(()=>[m("TresMeshStandardMaterial",{map:e,side:f(D),transparent:"",opacity:U.value===t.properties?.name?.7:0,"depth-write":!1},null,8,P)]),_:2},1032,["geometry","onPointerenter","onClick"])):w("",!0),(U.value?U.value===t.properties?.name:I.value.distance<6e5)?(_(),y(f(p),{key:1,point:{lon:t.properties?.centroid[0],lat:t.properties?.centroid[1],height:9e3}},{default:v(()=>[m("div",N,b(t.properties?.name),1)]),_:2},1032,["point"])):w("",!0)],64))),128))]),_:1})]),_:1})):w("",!0)]),_:1},16)],64)}}}),[["__scopeId","data-v-a21f76d3"]]);export{I as default};

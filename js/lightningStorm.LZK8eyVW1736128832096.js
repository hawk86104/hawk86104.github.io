import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.cdvjGRv21736128832096.js";import{B as i,V as s,cv as e,ab as n,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.8H01GNxA1736128832096.js";import{e as l,g as d,F as p}from"./@tresjs.pA0fT6uQ1736128832096.js";import{a as m}from"./simplex-noise.jB2HxhHB1736128832096.js";import{d as f,a1 as g,o as y,D as b,u as v,r as x,j as S,g as _,m as w,F as P}from"./@vue.yG49nQHr1736128832096.js";import"./index.PdXPrnG51736128832096.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.ypyRiFGT1736128832096.js";import"./three-custom-shader-material.rJQtaDBw1736128832096.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1736128832096.js";import"./@vueuse.iB8cUOAP1736128832096.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Q2xPBZqq1736128832096.js";import"./all.three.8pLHmzVA1736128832096.js";import"./oimophysics.x0jH7fze1736128832096.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2-YKdZT61736128832096.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.d0Zl8bPg1736128832096.js";import"./index.zoATXOTn1736128832096.js";import"./three-stdlib.ndvA-qbr1736128832096.js";import"./@pmndrs.-ljSdKQ-1736128832096.js";import"./object-hash.ZMoY9sX21736128832096.js";import"./@amap.xuzEumYH1736128832096.js";import"./jszip.8oEQHpN61736128832096.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.TLHtekKr1736128832096.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.yZSdJqwD1736128832096.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.GmItF1xg1736128832096.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.2GCl44hs1736128832096.js";const M=T;function T(t,i){const s=A();return(T=function(t,i){return s[t-=459]})(t,i)}!function(t,i){const s=T,e=A();for(;;)try{if(225652===parseInt(s(610))/1*(-parseInt(s(532))/2)+-parseInt(s(529))/3+-parseInt(s(617))/4+parseInt(s(526))/5+-parseInt(s(586))/6+-parseInt(s(511))/7+parseInt(s(568))/8*(parseInt(s(517))/9))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const V=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[T(482)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){V(this,(function(){const t=T,i=new RegExp(t(459)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=F(t(552));i[t(474)](e+t(467))&&s[t(474)](e+t(620))?F():e("0")}))()}();const R=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[T(482)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function A(){const t=["visible","up0","chain","ramification","seed","cross1","SIN30DEG","RAY_UNBORN","currentUVCoordinate","test","createRandomGenerator","simplexX","RAY_STEADY","onSubrayCreation","createSubray","getSeed","currentSubray","apply","radius1Factor","setSeed","createDefaultSubrayCreationCallbacks","gger","timeFraction","updateMesh","add","getNewSegment","currentSeed","call","multiplyScalar","log","destOffset","iteration","currentCreateTriangleVertices","set","min","beginVanishingTime","minRadius","update","simplexY","array","normalize","radius0","roughness","linPos1","randomGenerator","straightness","1266055DpfjJq","vanishingTimeFactor","initSubray","count","RAY_VANISHING","COS30DEG","77769sJAgNx","onDecideSubrayCreation","stateObject","state","constructor","table","length","seedGenerator","birthTime","1852205MdHDkl","currentSegmentCallback","middlePos","739902eceaSq","forwards","maxIterations","16BugZaO","random","radius1","RAY_EXTINGUISHED","addNewSubray","createPrism","uvs","currentIndex","side","maxSubrays","createPrismFaces","propagationTimeFactor","numSubrays","drawRange","fillMesh","positionVariationFactor","bind","pos1","isInitialSegment","subrayProbability","init","error","deathTime","createSegment","cos","forwardsFill","down","vertices","prototype","lerp","rayParameters","push","fraction0","currentSegmentIndex","newPos","createTriangleVerticesWithoutUVs","920CJAnhJ","max","info","warn","noiseSeed","up1","radius0Factor","maxRaySegments","position","needsUpdate","pos0","copy","clone","trace","debu","currentVertex","linPos0","sin","1543980KdNMMh","toString","LightningStrike","isStatic","fractalRayRecursive","subrayDutyCycle","fraction1","floor","console","positionAttribute","subVectors","generateUVs","middleLinPos","createTriangleVerticesWithUVs","isEternal","subrayPeriod","currentCoordinate","raySegments","sourceOffset","indices","return (function() ","action","timeScale","crossVectors","19490MvGDkQ","maxSubrayRecursion","uvsAttribute","recursion","subrayCylinderPosition","exception","RAY_PROPAGATING","1191020QtQVxM","subrays","pow","input","copyParameters","vPos","RAY_INITIALIZED","endPropagationTime","recursionProbability","type","index","__proto__","function *\\( *\\)","counter","time","isLightningStrike","usage","createMesh"];return(A=function(){return t})()}R(void 0,(function(){const t=T,i=function(){const t=T;let i;try{i=Function(t(606)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i.console=i[t(594)]||{},e=[t(494),t(571),t(570),t(553),t(615),t(522),t(581)];for(let n=0;n<e[t(523)];n++){const i=R[t(521)][t(560)][t(548)](R),r=e[n],o=s[r]||i;i[t(628)]=R[t(548)](R),i[t(587)]=o[t(587)].bind(o),s[r]=i}}))();class C extends i{constructor(t={}){const i=T;super(),this[i(462)]=!0,this[i(626)]=i(588),this.init(C[i(621)](t,t)),this[i(464)]()}static[M(475)](){const t=M,i=2053,s=[];for(let n=0;n<i;n++)s[t(563)](Math[t(533)]());const e={currentSeed:0,random:function(){const n=t,r=s[e[n(491)]];return e.currentSeed=(e[n(491)]+1)%i,r},getSeed:function(){return e[t(491)]/i},setSeed:function(s){const n=t;e[n(491)]=Math[n(593)](s*i)%i}};return e}static copyParameters(t={},i={}){const e=M,n=function(s){return i===t?s:s.clone()};return t[e(604)]=void 0!==i.sourceOffset?n(i[e(604)]):new s(0,100,0),t[e(495)]=void 0!==i[e(495)]?n(i[e(495)]):new s(0,0,0),t[e(608)]=void 0!==i.timeScale?i[e(608)]:1,t[e(507)]=void 0!==i.roughness?i[e(507)]:.9,t.straightness=void 0!==i[e(510)]?i[e(510)]:.7,t[e(466)]=void 0!==i[e(466)]?n(i[e(466)]):new s(0,0,1),t[e(573)]=void 0!==i[e(573)]?n(i[e(573)]):new s(0,0,1),t[e(506)]=void 0!==i[e(506)]?i[e(506)]:1,t[e(534)]=void 0!==i[e(534)]?i[e(534)]:1,t[e(574)]=void 0!==i[e(574)]?i[e(574)]:.5,t.radius1Factor=void 0!==i[e(483)]?i[e(483)]:.2,t[e(501)]=void 0!==i[e(501)]?i[e(501)]:.2,t[e(600)]=void 0!==i.isEternal?i[e(600)]:void 0===i[e(525)]||void 0===i[e(554)],t[e(525)]=i.birthTime,t[e(554)]=i.deathTime,t[e(543)]=void 0!==i[e(543)]?i[e(543)]:.1,t.vanishingTimeFactor=void 0!==i.vanishingTimeFactor?i[e(512)]:.9,t[e(601)]=void 0!==i.subrayPeriod?i[e(601)]:4,t.subrayDutyCycle=void 0!==i[e(591)]?i[e(591)]:.6,t[e(531)]=void 0!==i.maxIterations?i[e(531)]:9,t[e(589)]=void 0!==i[e(589)]&&i.isStatic,t[e(468)]=void 0!==i[e(468)]?i.ramification:5,t[e(611)]=void 0!==i[e(611)]?i[e(611)]:3,t[e(625)]=void 0!==i.recursionProbability?i[e(625)]:.6,t[e(597)]=void 0!==i.generateUVs&&i[e(597)],t.randomGenerator=i[e(509)],t[e(572)]=i[e(572)],t.onDecideSubrayCreation=i[e(518)],t.onSubrayCreation=i[e(478)],t}[M(502)](t){const i=M;this.isStatic||(this[i(562)].isEternal||this[i(562)][i(525)]<=t&&t<=this[i(562)][i(554)]?(this[i(488)](t),t<this[i(618)][0][i(624)]?this[i(520)]=C[i(616)]:t>this[i(618)][0].beginVanishingTime?this[i(520)]=C[i(515)]:this[i(520)]=C[i(477)],this[i(465)]=!0):(this[i(465)]=!1,t<this[i(562)][i(525)]?this[i(520)]=C.RAY_UNBORN:this[i(520)]=C[i(535)]))}[M(552)](t){const i=M;this.rayParameters=t,this[i(531)]=void 0!==t[i(531)]?Math[i(593)](t[i(531)]):9,t[i(531)]=this[i(531)],this[i(589)]=void 0!==t[i(589)]&&t[i(589)],t[i(589)]=this[i(589)],this[i(468)]=void 0!==t.ramification?Math[i(593)](t[i(468)]):5,t[i(468)]=this.ramification,this.maxSubrayRecursion=void 0!==t[i(611)]?Math[i(593)](t.maxSubrayRecursion):3,t[i(611)]=this.maxSubrayRecursion,this[i(625)]=void 0!==t[i(625)]?t[i(625)]:.6,t.recursionProbability=this[i(625)],this[i(597)]=void 0!==t[i(597)]&&t.generateUVs,t[i(597)]=this[i(597)],void 0!==t[i(509)]?(this[i(509)]=t[i(509)],this.seedGenerator=t[i(509)],void 0!==t[i(572)]&&this.seedGenerator.setSeed(t[i(572)])):(this[i(509)]=C[i(475)](),this[i(524)]=Math),void 0!==t[i(518)]?this[i(518)]=t[i(518)]:(this[i(485)](),void 0!==t.onSubrayCreation&&(this[i(478)]=t[i(478)])),this.state=C[i(623)],this[i(541)]=Math.ceil(1+Math[i(619)](this[i(468)],Math[i(569)](0,this.maxSubrayRecursion-1))),t[i(541)]=this.maxSubrays,this[i(575)]=2*(1<<this[i(531)]),this[i(618)]=[];for(let s=0;s<this[i(541)];s++)this[i(618)][i(563)](this[i(479)]());this[i(603)]=[];for(let s=0;s<this[i(575)];s++)this[i(603)][i(563)](this[i(555)]());this[i(461)]=0,this[i(487)]=0,this[i(527)]=null,this[i(497)]=this[i(597)]?this[i(599)]:this[i(567)],this[i(544)]=0,this[i(481)]=null,this[i(565)]=0,this.isInitialSegment=!1,this.subrayProbability=0,this[i(583)]=0,this[i(539)]=0,this[i(602)]=0,this.currentUVCoordinate=0,this.vertices=null,this[i(538)]=null,this[i(605)]=null,this[i(595)]=null,this[i(612)]=null,this[i(476)]=m(this.seedGenerator[i(533)]),this[i(503)]=m(this.seedGenerator[i(533)]),this.simplexZ=m(this.seedGenerator[i(533)]),this[i(530)]=new s,this[i(557)]=new s,this[i(540)]=new s,this[i(558)]=new s,this[i(528)]=new s,this[i(598)]=new s,this[i(566)]=new s,this[i(622)]=new s,this[i(470)]=new s}[M(464)](){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(541)],o=18*i*this.maxSubrays;this[t(559)]=new Float32Array(3*s),this[t(605)]=new Uint32Array(o),this[t(597)]&&(this.uvs=new Float32Array(2*s)),this[t(546)](0),this.setIndex(new e(this.indices,1)),this[t(595)]=new n(this.vertices,3),this.setAttribute(t(576),this.positionAttribute),this.generateUVs&&(this.uvsAttribute=new n(new Float32Array(this[t(538)]),2),this.setAttribute("uv",this[t(612)])),!this[t(589)]&&(this[t(627)][t(463)]=r,this[t(595)][t(463)]=r,this[t(597)]&&(this.uvsAttribute[t(463)]=r)),this[t(559)]=this[t(595)][t(504)],this[t(605)]=this.index.array,this[t(597)]&&(this[t(538)]=this[t(612)][t(504)])}[M(488)](t){const i=M;this.fillMesh(t),this[i(545)][i(514)]=this.currentIndex,this[i(627)][i(577)]=!0,this[i(595)].needsUpdate=!0,this[i(597)]&&(this[i(612)][i(577)]=!0)}[M(546)](t){const i=M,s=this;this.currentVertex=0,this[i(539)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(t,(function(e){const n=i,r=s[n(481)];t<r[n(525)]||(this.rayParameters[n(600)]&&0==s[n(481)].recursion?(s[n(537)](e),s.onDecideSubrayCreation(e,s)):t<r[n(624)]?s.timeFraction>=e[n(564)]*r[n(543)]&&(s[n(537)](e),s[n(518)](e,s)):t<r[n(500)]?(s[n(537)](e),s[n(518)](e,s)):(s[n(487)]<=r.vanishingTimeFactor+e.fraction1*(1-r.vanishingTimeFactor)&&s.createPrism(e),s[n(518)](e,s)))}))}[M(536)](){const t=M;return this.subrays[this[t(544)]++]}[M(513)](t,i){const s=M;t[s(578)][s(579)](i[s(604)]),t[s(549)][s(579)](i.destOffset),t[s(466)].copy(i[s(466)]),t[s(573)][s(579)](i[s(573)]),t.radius0=i[s(506)],t[s(534)]=i[s(534)],t[s(525)]=i[s(525)],t[s(554)]=i.deathTime,t[s(608)]=i[s(608)],t.roughness=i[s(507)],t[s(510)]=i.straightness,t[s(543)]=i[s(543)],t[s(512)]=i[s(512)],t[s(531)]=this[s(531)],t[s(469)]=void 0!==i.noiseSeed?i.noiseSeed:0,t[s(613)]=0}fractalRay(t,i){const s=M;this.time=t,this[s(527)]=i,this[s(544)]=0,this[s(513)](this[s(536)](),this[s(562)]);for(let e=0;e<this[s(544)];e++){const i=this[s(618)][e];this.currentSubray=i,this.randomGenerator[s(484)](i[s(469)]),i[s(624)]=o.lerp(i[s(525)],i[s(554)],i.propagationTimeFactor),i.beginVanishingTime=o[s(561)](i[s(554)],i[s(525)],1-i[s(512)]);const n=this[s(509)][s(533)];i[s(584)][s(498)](n(),n(),n()).multiplyScalar(1e3),i.linPos1.set(n(),n(),n())[s(493)](1e3),this[s(487)]=(t-i[s(525)])/(i[s(554)]-i[s(525)]),this.currentSegmentIndex=0,this[s(550)]=!0;const r=this[s(490)]();r[s(496)]=0,r.pos0[s(579)](i[s(578)]),r.pos1.copy(i[s(549)]),r.linPos0[s(579)](i[s(584)]),r[s(508)][s(579)](i[s(508)]),r.up0[s(579)](i[s(466)]),r[s(573)].copy(i.up1),r[s(506)]=i.radius0,r[s(534)]=i[s(534)],r[s(564)]=0,r.fraction1=1,r[s(547)]=1-i[s(510)],this[s(551)]=this[s(468)]*Math[s(619)](this[s(625)],i[s(613)])/(1<<i[s(531)]),this[s(590)](r)}this[s(527)]=null,this[s(481)]=null}fractalRayRecursive(t){const i=M;if(t[i(496)]>=this[i(481)][i(531)])return void this[i(527)](t);this.forwards[i(596)](t[i(549)],t[i(578)]);let s=this[i(530)].length();s<1e-6&&(this[i(530)][i(498)](0,0,.01),s=this[i(530)][i(523)]());const e=.5*(t.radius0+t[i(534)]),n=.5*(t[i(564)]+t.fraction1),r=this.time*this[i(481)][i(608)]*Math[i(619)](2,t[i(496)]);this[i(528)].lerpVectors(t[i(578)],t[i(549)],.5),this[i(598)].lerpVectors(t[i(584)],t[i(508)],.5);const o=this[i(598)];this[i(566)][i(498)](this.simplexX(o.x,o.y,o.z,r),this[i(503)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(566)].multiplyScalar(t[i(547)]*s),this[i(566)][i(489)](this.middlePos);const a=this[i(490)]();a[i(578)][i(579)](t[i(578)]),a.pos1[i(579)](this.newPos),a[i(584)][i(579)](t[i(584)]),a[i(508)][i(579)](this[i(598)]),a[i(466)][i(579)](t.up0),a[i(573)][i(579)](t[i(573)]),a[i(506)]=t[i(506)],a.radius1=e,a[i(564)]=t[i(564)],a[i(592)]=n,a[i(547)]=t[i(547)]*this[i(481)][i(507)],a.iteration=t[i(496)]+1;const h=this[i(490)]();h[i(578)][i(579)](this[i(566)]),h[i(549)][i(579)](t.pos1),h[i(584)][i(579)](this.middleLinPos),h.linPos1[i(579)](t[i(508)]),this[i(470)].crossVectors(t.up0,this[i(530)][i(505)]()),h[i(466)].crossVectors(this[i(530)],this[i(470)])[i(505)](),h.up1[i(579)](t[i(573)]),h[i(506)]=e,h.radius1=t.radius1,h.fraction0=n,h[i(592)]=t[i(592)],h[i(547)]=t[i(547)]*this.currentSubray[i(507)],h.iteration=t[i(496)]+1,this[i(590)](a),this[i(590)](h)}[M(537)](t){const i=M;this[i(557)][i(596)](t[i(549)],t[i(578)])[i(505)](),this[i(550)]&&(this[i(497)](t.pos0,t[i(466)],this.forwardsFill,t[i(506)],0),this[i(550)]=!1),this[i(497)](t[i(549)],t.up0,this[i(557)],t.radius1,t[i(592)]),this[i(542)]()}createTriangleVerticesWithoutUVs(t,i,s,e){const n=M;this.side.crossVectors(i,s)[n(493)](e*C[n(516)]),this[n(558)][n(579)](i).multiplyScalar(-e*C[n(471)]);const r=this[n(622)],o=this[n(559)];r[n(579)](t).sub(this.side)[n(489)](this.down),o[this[n(602)]++]=r.x,o[this[n(602)]++]=r.y,o[this[n(602)]++]=r.z,r[n(579)](t)[n(489)](this[n(540)]).add(this[n(558)]),o[this[n(602)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r[n(579)](i)[n(493)](e)[n(489)](t),o[this[n(602)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[n(602)]++]=r.z,this[n(583)]+=3}createTriangleVerticesWithUVs(t,i,s,e,n){const r=M;this[r(540)].crossVectors(i,s)[r(493)](e*C[r(516)]),this[r(558)][r(579)](i)[r(493)](-e*C[r(471)]);const o=this.vPos,a=this[r(559)],h=this.uvs;o[r(579)](t).sub(this[r(540)])[r(489)](this[r(558)]),a[this[r(602)]++]=o.x,a[this[r(602)]++]=o.y,a[this[r(602)]++]=o.z,h[this.currentUVCoordinate++]=n,h[this[r(473)]++]=0,o[r(579)](t)[r(489)](this[r(540)])[r(489)](this[r(558)]),a[this[r(602)]++]=o.x,a[this[r(602)]++]=o.y,a[this[r(602)]++]=o.z,h[this[r(473)]++]=n,h[this.currentUVCoordinate++]=.5,o[r(579)](i)[r(493)](e).add(t),a[this[r(602)]++]=o.x,a[this[r(602)]++]=o.y,a[this[r(602)]++]=o.z,h[this[r(473)]++]=n,h[this[r(473)]++]=1,this[r(583)]+=3}createPrismFaces(t){const i=M,s=this[i(605)];t=this.currentVertex-6,s[this[i(539)]++]=t+1,s[this[i(539)]++]=t+2,s[this[i(539)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(539)]++]=t+5,s[this[i(539)]++]=t+4,s[this[i(539)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(539)]++]=t+4,s[this[i(539)]++]=t+0,s[this[i(539)]++]=t+4,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+2,s[this[i(539)]++]=t+0,s[this[i(539)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(539)]++]=t+3,s[this[i(539)]++]=t+5}[M(485)](){const t=M,i=this[t(509)][t(533)];this[t(518)]=function(s,e){const n=t,r=e[n(481)],a=e.rayParameters.subrayPeriod,h=e[n(562)][n(591)],c=e[n(562)][n(600)]&&0==r.recursion?-i()*a:o[n(561)](r[n(525)],r[n(624)],s.fraction0)-i()*a,u=e.time-c,l=Math[n(593)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=e.subrayProbability),r[n(613)]<e[n(611)]&&e.numSubrays<e[n(541)]&&i()<p){const t=e[n(536)](),o=e[n(509)][n(480)]();t.seed=d,e[n(509)][n(484)](d),t.recursion=r.recursion+1,t.maxIterations=Math[n(569)](1,r[n(531)]-1),t[n(584)][n(498)](i(),i(),i())[n(493)](1e3),t[n(508)].set(i(),i(),i())[n(493)](1e3),t.up0[n(579)](r[n(466)]),t[n(573)][n(579)](r[n(573)]),t[n(506)]=s[n(506)]*e.rayParameters[n(574)],t.radius1=Math[n(499)](e[n(562)][n(501)],s[n(534)]*e[n(562)][n(483)]),t[n(525)]=c+l*a,t[n(554)]=t[n(525)]+a*h,!e.rayParameters[n(600)]&&0==r[n(613)]&&(t.birthTime=Math.max(t.birthTime,r[n(525)]),t[n(554)]=Math[n(499)](t[n(554)],r[n(554)])),t[n(608)]=2*r[n(608)],t[n(507)]=r.roughness,t[n(510)]=r[n(510)],t.propagationTimeFactor=r.propagationTimeFactor,t[n(512)]=r.vanishingTimeFactor,e[n(478)](s,r,t,e),e.randomGenerator[n(484)](o)}};const e=new s,n=new s,r=new s,a=new s;this[t(478)]=function(t,i,s,e){e.subrayCylinderPosition(t,i,s,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const d=t;h[d(578)][d(579)](s[d(578)]),e[d(596)](o[d(549)],o[d(578)]),n[d(579)](e)[d(505)](),e[d(493)](s[d(564)]+(1-s.fraction0)*(i()*c));const p=e[d(523)]();r[d(609)](o.up0,n);const m=2*Math.PI*i();r.multiplyScalar(Math.cos(m)),a[d(579)](o.up0).multiplyScalar(Math[d(585)](m)),h[d(549)][d(579)](r).add(a)[d(493)](p*u*(l+i()*(1-l)))[d(489)](e)[d(489)](o[d(578)])},this[t(614)]=function(s,o,h,c,u,l){const d=t;h[d(578)][d(579)](s[d(578)]),e[d(596)](o[d(549)],o.pos0),n.copy(e).normalize(),e[d(493)](s[d(564)]+(1-s[d(564)])*((2*i()-1)*c));const p=e[d(523)]();r.crossVectors(o[d(466)],n);const m=2*Math.PI*i();r[d(493)](Math[d(556)](m)),a[d(579)](o.up0)[d(493)](Math[d(585)](m)),h[d(549)][d(579)](r).add(a)[d(493)](p*u*(l+i()*(1-l))).add(e).add(o[d(578)])}}[M(479)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(555)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(490)](){return this.raySegments[this.currentSegmentIndex++]}[M(579)](t){const i=M;return super[i(579)](t),this[i(552)](C[i(621)]({},t[i(562)])),this}[M(580)](){const t=M;return new(this[t(521)])(C.copyParameters({},this[t(562)]))}}function F(t){function i(t){const s=T;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[s(482)](s(460));1!==(""+t/t)[s(523)]||t%20==0?function(){return!0}[s(521)](s(582)+s(486))[s(492)](s(607)):function(){return!1}[s(521)]("debu"+s(486)).apply(s(519)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function j(){const t=["set","copyParameters","init","lightningMaxPeriod","minHeight","nextLightningTime","maxHeight","getNextLightningTime","maxLightnings",'{}.constructor("return this")( )',"5nPxsvn","lightningMaxDuration","inited","lerp","push","RAY_EXTINGUISHED","3180086BYqJyc","deadLightningsMeshes","2988432okeItF","sourceOffset","onLightningDown","chain","12IgPdZt","destOffset","update","input","lightningsMeshes","toString","onRayPosition","while (true) {}","debu","lightningMinPeriod","bind","constructor","copy","state","__proto__","RAY_PROPAGATING","call","indexOf","1066110BeHuUs","info","random","warn","gger","1318312ZJYuFh","console","prototype","error","lightningParameters","1833480AkPzHU","return (function() ","log","lightningMaterial","apply","stormParams","lightningMinDuration","4zrTemI","pop","isLightningStorm","exception","noiseSeed","deathTime","test","size","maxSlope","geometry","106419dGKCqe","birthTime","length","function *\\( *\\)","isEternal","clone","add","multiplyScalar","18YHODIM","rayParameters","19238CtNEFw"];return(j=function(){return t})()}C[M(623)]=0,C[M(472)]=1,C[M(616)]=2,C[M(477)]=3,C[M(515)]=4,C[M(535)]=5,C.COS30DEG=Math[M(556)](30*Math.PI/180),C[M(471)]=Math[M(585)](30*Math.PI/180);const H=E;!function(t,i){const s=E,e=j();for(;;)try{if(282520===parseInt(s(271))/1*(-parseInt(s(248))/2)+parseInt(s(238))/3*(-parseInt(s(306))/4)+parseInt(s(259))/5*(parseInt(s(267))/6)+-parseInt(s(265))/7+parseInt(s(294))/8*(parseInt(s(246))/9)+-parseInt(s(289))/10+parseInt(s(299))/11)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const D=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[E(303)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=E,i=new RegExp(t(241)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=U(t(251));i.test(e+t(270))&&s[t(234)](e+t(274))?U():e("0")}))()}();const z=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();z(void 0,(function(){const t=E;let i;try{i=Function(t(300)+t(258)+");")()}catch(n){i=window}const s=i[t(295)]=i.console||{},e=[t(301),t(292),t(290),t(297),t(309),"table","trace"];for(let r=0;r<e[t(240)];r++){const i=z[t(282)][t(296)][t(281)](z),n=e[r],o=s[n]||i;i[t(285)]=z.bind(z),i[t(276)]=o[t(276)][t(281)](o),s[n]=i}}))();class G extends a{constructor(t={}){const i=E;super(),this[i(308)]=!0,this[i(304)]=t,t.size=void 0!==t[i(235)]?t[i(235)]:1e3,t[i(253)]=void 0!==t.minHeight?t[i(253)]:80,t[i(255)]=void 0!==t.maxHeight?t[i(255)]:100,t[i(236)]=void 0!==t[i(236)]?t[i(236)]:1.1,t.maxLightnings=void 0!==t[i(257)]?t[i(257)]:3,t[i(280)]=void 0!==t[i(280)]?t[i(280)]:3,t[i(252)]=void 0!==t[i(252)]?t[i(252)]:7,t[i(305)]=void 0!==t[i(305)]?t.lightningMinDuration:1,t[i(260)]=void 0!==t[i(260)]?t[i(260)]:2.5,this[i(298)]=C[i(250)](t[i(298)],t.lightningParameters),this.lightningParameters[i(242)]=!1,this[i(302)]=void 0!==t[i(302)]?t[i(302)]:new h({color:11599871}),void 0!==t[i(277)]?this[i(277)]=t.onRayPosition:this.onRayPosition=function(s,e){const n=i;e[n(249)]((Math.random()-.5)*t[n(235)],0,(Math.random()-.5)*t.size);const r=o[n(262)](t[n(253)],t.maxHeight,Math.random());s.set(t[n(236)]*(2*Math[n(291)]()-1),1,t.maxSlope*(2*Math.random()-1))[n(245)](r)[n(244)](e)},this[i(269)]=t[i(269)],this[i(261)]=!1,this[i(254)]=0,this[i(275)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(304)].maxLightnings;s++){const t=new C(C[i(250)]({},this.lightningParameters)),s=new c(t,this[i(302)]);this[i(266)][i(263)](s)}}[H(273)](t){const i=H;if(!this[i(261)]&&(this[i(254)]=this[i(256)](t)*Math.random(),this[i(261)]=!0),t>=this.nextLightningTime){const s=this[i(266)][i(307)]();if(s){const e=C[i(250)](s[i(237)][i(247)],this.lightningParameters);e[i(239)]=t,e[i(311)]=t+o.lerp(this[i(304)][i(305)],this.stormParams[i(260)],Math.random()),this[i(277)](e[i(268)],e[i(272)]),e[i(310)]=Math.random(),this[i(244)](s),this.lightningsMeshes.push(s)}this[i(254)]=this.getNextLightningTime(t)}let s=0,e=this[i(275)][i(240)];for(;s<e;){const n=this[i(275)][s],r=n.geometry,o=r[i(284)];r.update(t),o===C[i(286)]&&r[i(284)]>o&&this[i(269)]&&this[i(269)](r),r[i(284)]===C[i(264)]?(this[i(275)].splice(this.lightningsMeshes[i(288)](n),1),this[i(266)].push(n),this.remove(n),e--):s++}}[H(256)](t){const i=H;return t+o[i(262)](this[i(304)].lightningMinPeriod,this[i(304)][i(252)],Math[i(291)]())/(this.stormParams[i(257)]+1)}[H(283)](t,i){const s=H;return super[s(283)](t,i),this[s(304)][s(235)]=t[s(304)].size,this[s(304)][s(253)]=t[s(304)][s(253)],this[s(304)][s(255)]=t[s(304)][s(255)],this.stormParams.maxSlope=t[s(304)][s(236)],this[s(304)][s(257)]=t[s(304)][s(257)],this[s(304)][s(280)]=t[s(304)][s(280)],this[s(304)][s(252)]=t.stormParams.lightningMaxPeriod,this[s(304)][s(305)]=t[s(304)][s(305)],this[s(304)][s(260)]=t[s(304)][s(260)],this[s(298)]=C[s(250)]({},t.lightningParameters),this[s(302)]=t[s(304)][s(302)],this[s(269)]=t[s(269)],this}[H(243)](){const t=H;return new this.constructor(this[t(304)])[t(283)](this)}}function E(t,i){const s=j();return(E=function(t,i){return s[t-=234]})(t,i)}function U(t){function i(t){const s=E;if("string"==typeof t)return function(t){}[s(282)](s(278))[s(303)]("counter");1!==(""+t/t)[s(240)]||t%20==0?function(){return!0}[s(282)](s(279)+"gger")[s(287)]("action"):function(){return!1}[s(282)](s(279)+s(293))[s(303)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=k;!function(t,i){const s=k,e=Z();for(;;)try{if(715833===-parseInt(s(452))/1+parseInt(s(508))/2*(-parseInt(s(476))/3)+parseInt(s(493))/4+parseInt(s(467))/5+parseInt(s(483))/6*(-parseInt(s(487))/7)+-parseInt(s(486))/8+parseInt(s(506))/9)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const L=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[k(454)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){L(this,(function(){const t=k,i=new RegExp(t(501)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=B(t(459));i.test(e+t(509))&&s[t(492)](e+t(460))?B():e("0")}))()}();const N=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[k(454)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();N(void 0,(function(){const t=k,i=function(){const t=k;let i;try{i=Function(t(499)+t(504)+");")()}catch(s){i=window}return i}(),s=i[t(489)]=i.console||{},e=[t(471),"warn","info",t(457),t(477),t(465),t(510)];for(let n=0;n<e[t(496)];n++){const i=N.constructor[t(497)][t(453)](N),r=e[n],o=s[r]||i;i.__proto__=N[t(453)](N),i[t(462)]=o[t(462)][t(453)](o),s[r]=i}}))();const Y=[O(500)];function Z(){const t=["object","function *\\( *\\)","action","size",'{}.constructor("return this")( )',"copy","12899718FiloFR","set","2ESyiDP","chain","trace","add","radius0","sub","call","subrayConePosition","308356Rvicjv","bind","apply","stateObject","rayParameters","error","MeshBasicMaterial","init","input","radius1","toString","maxHeight","debu","table","sourceOffset","983315VVygAN","addVectors","counter","constructor","log","update","while (true) {}","pos1","string","529779DwSjKf","exception","primitive","stormParams","roughness","straightness","minHeight","192ZLPsLK","#b0ffff","multiplyScalar","4766528VBMdLG","127078SXeOhE","gger","console","subrayDutyCycle","Color","test","2990244lyMYtx","subVectors","Vector3","length","prototype","color","return (function() "];return(Z=function(){return t})()}function k(t,i){const s=Z();return(k=function(t,i){return s[t-=452]})(t,i)}const $=f({__name:"lightStorm",props:{color:{default:O(484)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,e=t,n=new(u[i(491)])(e[i(498)]),r=new(u[i(458)])({color:n}),o=new s(0,-1,0);let a=0;const h=new(u[i(495)]),c=new(u[i(495)]),d={roughness:e[i(480)],straightness:e[i(481)],radius0:e[i(512)],radius1:e.radius1,timeScale:e.timeScale,subrayPeriod:e.subrayPeriod,subrayDutyCycle:e[i(490)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,e,n){const r=i;n[r(515)](t,s,e,.6,.6,.5),a=n[r(456)][r(466)].y,h[r(494)](e[r(474)],n[r(456)][r(466)]);const u=o.dot(h);c[r(505)](o)[r(485)](u),h[r(513)](c);const l=u/a>.5?a/u:1;c.multiplyScalar(l),h[r(511)](c),e[r(474)][r(468)](h,n[r(456)].sourceOffset)}},p=new G({size:e[i(503)],minHeight:e[i(482)],maxHeight:e[i(463)],maxSlope:.6,maxLightnings:e.maxLightnings,lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=p[t(479)];s[t(503)]=e[t(503)],s[t(482)]=e[t(482)],s[t(463)]=e[t(463)],r[t(498)][t(507)](e.color),d[t(480)]=e[t(480)],d[t(481)]=e[t(481)],d.radius0=e[t(512)],d.radius1=e[t(461)],d.timeScale=e.timeScale}));const{onLoop:m}=l();return m((({elapsed:t})=>{p[i(472)](t)})),(t,s)=>{const e=i;return y(),b(e(478),{object:v(p),renderOrder:9999},null,8,Y)}}});function B(t){function i(t){const s=k;if(typeof t===s(475))return function(t){}.constructor(s(473))[s(454)](s(469));1!==(""+t/t)[s(496)]||t%20==0?function(){return!0}[s(470)](s(464)+s(488))[s(514)](s(502)):function(){return!1}[s(470)]("debugger")[s(454)](s(455)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function J(){const t=["stateObject","apply","debu","gger","lightningStorm","error","742EpikCD","test","125667wFCoAE","toString","action","radius1","bind","3736AHieCt","console","19340AKHBHK","constructor","function *\\( *\\)","未部半径","155022dvORQX","35QsMUAH","trace","straightness","warn","init","时间缩放","#ffbde7","262830RfsHRg","121866IoDVTc","radius0","exception","端部半径","length","string","90nxJSPU","616296HmJVlA","#6f6f6f","__proto__","maxHeight","#92399e","while (true) {}","call","value","info","return (function() ","直度度","roughness","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(J=function(){return t})()}const X=q;!function(t,i){const s=q,e=J();for(;;)try{if(137403===parseInt(s(425))/1+-parseInt(s(417))/2+-parseInt(s(426))/3+parseInt(s(413))/4*(-parseInt(s(418))/5)+parseInt(s(433))/6+-parseInt(s(404))/7*(-parseInt(s(411))/8)+parseInt(s(406))/9*(-parseInt(s(432))/10))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const K=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){K(this,(function(){const t=q,i=new RegExp(t(415)),s=new RegExp(t(397),"i"),e=tt(t(422));i[t(405)](e+"chain")&&s[t(405)](e+"input")?tt():e("0")}))()}();const Q=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function q(t,i){const s=J();return(q=function(t,i){return s[t-=388]})(t,i)}Q(void 0,(function(){const t=q;let i;try{i=Function(t(393)+'{}.constructor("return this")( ));')()}catch(n){i=window}const s=i[t(412)]=i[t(412)]||{},e=["log",t(421),t(392),t(403),t(428),t(396),t(419)];for(let r=0;r<e[t(430)];r++){const i=Q[t(414)].prototype[t(410)](Q),n=e[r],o=s[n]||i;i[t(435)]=Q[t(410)](Q),i[t(407)]=o.toString[t(410)](o),s[n]=i}}))();const W=f({__name:X(402),setup(i){const s=X,e=x({cellSize:60,cellThickness:1,cellColor:s(434),sectionColor:s(388),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:n,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(424),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(394),value:.65,min:0,max:1,step:.01},radius0:{label:s(429),value:1,min:.1,max:10,step:.01},radius1:{label:s(416),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(423),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(P,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[S($,{minHeight:v(n).value,maxHeight:v(r).value,color:v(o)[m(391)],roughness:v(a)[m(391)],straightness:v(h)[m(391)],radius0:v(c)[m(391)],radius1:v(u)[m(391)],timeScale:v(l)[m(391)]},null,8,["minHeight",m(436),"color",m(395),m(420),m(427),m(409),"timeScale"]),S(v(I),w({args:[100,100]},e,{position:[0,-50,0]}),null,16)])),_:1}),S(v(p))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(431))return function(t){}.constructor(s(389))[s(399)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(414)]("debu"+s(401))[s(390)](s(408)):function(){return!1}[s(414)](s(400)+"gger").apply(s(398)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{W as default};

import{P as t}from"./tweakpane.yDiyAAkA1742205305014.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.Jt6kAW7U1742205305014.js";import{_ as r}from"./heatmap.js-fix.DQeqXAN11742205305014.js";import{a as i,_ as c,cg as s,r as u}from"./three.LxxvsMJG1742205305014.js";import{r as a}from"./utils.g9fyc8be1742205305014.js";import{d as f}from"./pinia.tbzukF_x1742205305014.js";import{b as p,d as l,a2 as h,o as d,H as m,N as g,u as y,F as v,q as b,W as w,P as I,R as _,L as x,O as j,a3 as E,r as S,j as A,g as M,m as R}from"./@vue.NRI7TcgI1742205305014.js";import{c as z,d as D,a as P}from"./three-mesh-bvh.42xZtR7E1742205305014.js";import{_ as Z}from"./@fesjs.mYnJ5o7u1742205305014.js";import"./@tresjs.nk0nhZ9a1742205305014.js";import"./postprocessing.lrLv6HE21742205305014.js";import"./@vueuse.w6JAmAgA1742205305014.js";import"./three-custom-shader-material.8lD1n5aS1742205305014.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1742205305014.js";import"./@amap.sbhX68WO1742205305014.js";import"./vue-router.AZQHMbAd1742205305014.js";import"./lodash-es.pklfUAS51742205305014.js";import"./@qlin.yHhFDldE1742205305014.js";import"./@floating-ui.BPbuo5Gx1742205305014.js";import"./@juggle.7yjBMqoW1742205305014.js";function B(t,n){const e=U();return(B=function(t,n){return e[t-=289]})(t,n)}!function(t,n){const e=B,o=U();for(;;)try{if(678530===-parseInt(e(305))/1*(-parseInt(e(332))/2)+-parseInt(e(321))/3+parseInt(e(293))/4+parseInt(e(294))/5+parseInt(e(318))/6+parseInt(e(311))/7+-parseInt(e(299))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[B(335)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){k(this,(function(){const t=B,n=new RegExp(t(341)),e=new RegExp(t(307),"i"),o=$("init");n[t(292)](o+t(319))&&e[t(292)](o+t(313))?$():o("0")}))()}();const O=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[B(335)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(){const t=["__proto__","style","1021622NfySAd","warn","input","constructor",'{}.constructor("return this")( )',"error","table","4633464dWZhtw","chain","position","1690077JbgLoe","create","yellow","bind","prototype","gger","width","debu","return (function() ","none","top","2340Dhpmrx","console","length","apply","rgb(255,0,0)","call","randInt","log","getValueAt","function *\\( *\\)","body","push","display","exception","test","4792592PjCyAK","2271725rBezuj","left","while (true) {}","rgb(0,0,255)","setData","11182592jIyGSX","counter","toString","createElement","_config","string","59wZUdzh","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","height"];return(U=function(){return t})()}O(void 0,(function(){const t=B,n=function(){const t=B;let n;try{n=Function(t(329)+t(315)+");")()}catch(e){n=window}return n}(),e=n[t(333)]=n.console||{},o=[t(339),t(312),"info",t(316),t(291),t(317),"trace"];for(let r=0;r<o[t(334)];r++){const n=O.constructor[t(325)].bind(O),i=o[r],c=e[i]||n;n[t(309)]=O[t(324)](O),n[t(301)]=c[t(301)].bind(c),e[i]=n}}))();const G=(t,n)=>t[B(340)](n)+-10;function $(t){function n(t){const e=B;if(typeof t===e(304))return function(t){}[e(314)](e(296))[e(335)](e(300));1!==(""+t/t)[e(334)]||t%20==0?function(){return!0}[e(314)]("debu"+e(326))[e(337)](e(306)):function(){return!1}[e(314)](e(328)+e(326))[e(335)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const F=Y;!function(t,n){const e=Y,o=X();for(;;)try{if(814494===-parseInt(e(338))/1+parseInt(e(335))/2*(parseInt(e(339))/3)+-parseInt(e(357))/4+-parseInt(e(367))/5*(-parseInt(e(342))/6)+-parseInt(e(350))/7*(-parseInt(e(340))/8)+parseInt(e(348))/9+parseInt(e(362))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const C=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Y(344)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){C(this,(function(){const t=Y,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(336),"i"),o=W(t(351));n.test(o+t(352))&&e.test(o+t(341))?W():o("0")}))()}();const T=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Y(344)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function X(){const t=["apply","buildingsHeatmap",'{}.constructor("return this")( )',"while (true) {}","529506YYJaGf","stateObject","77pWmxiS","init","chain","constructor","log","bind","trace","759536xisoIZ","toString","value","counter","console","14135560IIhsQQ","gger","info","table","length","20545AniEFz","prototype","38752oPunqH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","1434402bikGGr","99SRgGXL","228840lOIYoC","input","18FgmukR","__proto__"];return(X=function(){return t})()}function Y(t,n){const e=X();return(Y=function(t,n){return e[t-=335]})(t,n)}T(void 0,(function(){const t=Y;let n;try{n=Function("return (function() "+t(346)+");")()}catch(r){n=window}const e=n[t(361)]=n[t(361)]||{},o=[t(354),"warn",t(364),"error","exception",t(365),t(356)];for(let i=0;i<o[t(366)];i++){const n=T[t(353)][t(368)].bind(T),r=o[i],c=e[r]||n;n[t(343)]=T[t(355)](T),n[t(358)]=c[t(358)][t(355)](c),e[r]=n}}))();const L=f(F(345),(()=>{const t=p(!1),n=p(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t.value=n},setTemperature:function(t){n[Y(359)]=t}}}));function W(t){function n(t){const e=Y;if(typeof t===e(337))return function(t){}.constructor(e(347))[e(344)](e(360));1!==(""+t/t)[e(366)]||t%20==0?function(){return!0}[e(353)]("debu"+e(363)).call("action"):function(){return!1}.constructor("debu"+e(363))[e(344)](e(349)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function q(t,n){const e=Q();return(q=function(t,n){return e[t-=223]})(t,n)}const H=q;!function(t,n){const e=q,o=Q();for(;;)try{if(750849===parseInt(e(286))/1+-parseInt(e(274))/2+parseInt(e(278))/3+-parseInt(e(284))/4+parseInt(e(241))/5+parseInt(e(276))/6+-parseInt(e(244))/7)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(250)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=q,n=new RegExp(t(231)),e=new RegExp(t(289),"i"),o=nt(t(223));n[t(226)](o+"chain")&&e[t(226)](o+"input")?nt():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(250)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Q(){const t=["return (function() ","1935120ABnvRi","makeRotationX","7496472YzIAfS","string","2514876XGDhPh","counter","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","mergeGeometries","value","Matrix4","5173508VXsClB","matrix","1310270IENxSU","数值：","rotation-x","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","table","width","test","model","object","action","prototype","function *\\( *\\)","attributes","Mesh","computeBoundsTree","DoubleSide","stateObject","__proto__","length","land","$patch","6447965bGBgsf","children","clone","11730467lalNbg","Texture","call","needsUpdate","geometry","applyMatrix4","apply","canvas","exception","error","gger","bind","normal","opacity","primitive","toString","warn","log","disposeBoundsTree","raycast","ShaderMaterial","console","constructor","info","debu","BufferGeometry","_config","setShowDiv","trace"];return(Q=function(){return t})()}J(void 0,(function(){const t=q;let n;try{n=Function(t(273)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n.console=n[t(265)]||{},o=[t(261),t(260),t(267),t(253),t(252),t(224),t(272)];for(let i=0;i<o[t(238)];i++){const n=J[t(266)].prototype.bind(J),r=o[i],c=e[r]||n;n[t(237)]=J[t(255)](J),n[t(259)]=c[t(259)][t(255)](c),e[r]=n}}))();const V=[H(228),H(288)],K=[H(228)],tt=l({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=H;(()=>{const t=q;c[t(269)][t(230)][t(234)]=z,c[t(269)][t(230)][t(262)]=D,u[t(230)][t(263)]=P})();const e=t,o=((t=250,n=250,e=!0)=>{const o=B,i=document[o(302)]("heatmap-canvas");return i.style[o(320)]="absolute",!e&&(i.style[o(290)]=o(330)),i[o(310)][o(331)]="0",i[o(310)][o(295)]="0",document[o(342)].appendChild(i),r[o(322)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(297),.55:"rgb(0,255,0)",.85:o(323),1:o(336)}})})();((t,n)=>{const e=B;if(!n){let o=0;for(n=[];o<1e3;)n[e(289)]({x:i.randInt(1,t[e(303)][e(327)]),y:i[e(338)](1,t[e(303)][e(308)]),value:i.randInt(-10,36)}),o++}t[e(298)]({max:36,min:-10,data:n})})(o);const f=new(c[n(245)])(o._renderer[n(251)]);f[n(247)]=!0;const p=e[n(227)].city.clone();delete p.geometry[n(232)][n(256)],delete p[n(248)][n(232)].uv;const l=p[n(248)].clone().applyMatrix4(p[n(285)]),b=e[n(227)][n(239)][n(243)]();delete b.geometry[n(232)][n(256)];const w=b[n(248)][n(243)]().applyMatrix4(b[n(285)]),I=s[n(281)]([l,w]);I[n(249)]((new(c[n(283)]))[n(275)](Math.PI/2)),a(I),I.computeBoundsTree();const _=(t=>{const o=n;return new(c[o(264)])({vertexShader:o(280),fragmentShader:"\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t",uniforms:{uOpacity:{value:e[o(257)]},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:c[o(235)]})})(f),x=new(c[n(233)])(I,_);h((()=>{const t=n;e[t(257)]&&(_.uniforms.uOpacity[t(282)]=e[t(257)])}));const j=L(),E=t=>{const e=n;if(t){const n={x:t.uv.x*o._config[e(225)],y:(1-t.uv.y)*o[e(270)].height};console[e(261)](e(287),t),console.log("数值———：",G(o,n)),j.setTemperature(G(o,n))}},S=t=>{t&&j[n(240)]({showDiv:!0})},A=t=>{t&&j[n(271)](!1)};return(t,o)=>{const r=n;return d(),m(v,null,[g(r(258),{object:y(x),"rotation-x":-Math.PI/2,onPointerMove:E,onPointerEnter:S,onPointerLeave:A},null,40,V),g(r(258),{object:e[r(227)][r(227)][r(242)][0][r(243)]()},null,8,K)],64)}}});function nt(t){function n(t){const e=q;if(typeof t===e(277))return function(t){}[e(266)]("while (true) {}").apply(e(279));1!==(""+t/t).length||t%20==0?function(){return!0}[e(266)](e(268)+e(254))[e(246)](e(229)):function(){return!1}[e(266)](e(268)+e(254))[e(250)](e(236)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const et=Z({__name:"dataDiv",setup(t){const n=L(),e=p({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return b((()=>{window.addEventListener("mousemove",o)})),w((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>I((d(),m("div",{class:"title",style:j(e.value)},"温度："+x(y(n).temperature)+"℃ ",5)),[[_,y(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]);function ot(t,n){const e=rt();return(ot=function(t,n){return e[t-=295]})(t,n)}function rt(){const t=["stateObject","gger","93084fxBCgU","__proto__","1248330Rlqmyy","table","#000","constructor","call","function *\\( *\\)","debu","counter","city","action","770EltodP","bind","console","apply","72gDBhUX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","24135660JPufzE",'{}.constructor("return this")( )',"toString","length","test","error","return (function() ","6724050mvEuUx","透明度","while (true) {}","1361526gobkAs","log","571528bAERlw","addBinding","string","input","exception","init","builds","763983QwZWIy","value","info","2MKtnEY"];return(rt=function(){return t})()}!function(t,n){const e=ot,o=rt();for(;;)try{if(923015===parseInt(e(320))/1*(-parseInt(e(332))/2)+parseInt(e(337))/3+-parseInt(e(322))/4+-parseInt(e(317))/5+parseInt(e(335))/6*(parseInt(e(303))/7)+-parseInt(e(307))/8*(parseInt(e(329))/9)+parseInt(e(310))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ot,n=new RegExp(t(298)),e=new RegExp(t(308),"i"),o=ut(t(327));n[t(314)](o+"chain")&&e.test(o+t(325))?ut():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ot(306)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=ot,n=function(){const t=ot;let n;try{n=Function(t(316)+t(311)+");")()}catch(e){n=window}return n}(),e=n[t(305)]=n[t(305)]||{},o=[t(321),"warn",t(331),t(315),t(326),t(338),"trace"];for(let r=0;r<o[t(313)];r++){const n=ct[t(296)][t(309)][t(304)](ct),i=o[r],c=e[i]||n;n[t(336)]=ct[t(304)](ct),n[t(312)]=c.toString.bind(c),e[i]=n}}))();const st=l({__name:"heatmap2",async setup(r){const i=ot;let c,s;const u=p(!1),a=([c,s]=E((()=>o())),c=await c,s(),c);u[i(330)]=!0;const f=S({width:1,color:i(295),opacity:1,show:!0}),l=S({opacity:.9});return new t({title:"参数",expanded:!0})[i(323)](l,"opacity",{label:i(318),min:0,max:1,step:.1}),(t,o)=>{const r=i;return d(),m(v,null,[A(e,{showBuildings:!1,autoRotate:!1},{ability:M((()=>[A(tt,R({model:y(a)},l),null,16,["model"]),A(n,R(f,{builds:y(a)[r(301)]}),null,16,[r(328)])])),_:1}),A(et)],64)}}});function ut(t){function n(t){const e=ot;if(typeof t===e(324))return function(t){}[e(296)](e(319))[e(306)](e(300));1!==(""+t/t)[e(313)]||t%20==0?function(){return!0}.constructor(e(299)+e(334))[e(297)](e(302)):function(){return!1}[e(296)](e(299)+"gger")[e(306)](e(333)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{st as default};

import{C as t,a6 as n,cc as o,cd as e,ce as r,cf as i,k as u,bS as c,ab as s,ad as a}from"./three.a9V66irq1725721021019.js";import{f as l,$ as f,d as p}from"./@tresjs.bIWdfO9a1725721021019.js";import{C as d}from"./three-custom-shader-material.gg2LVNSQ1725721021019.js";import"./object-hash.xtAmzdrT1725721021019.js";import"./@amap.9EMhYPgf1725721021019.js";import"./glsl-tokenizer._ewZtuPE1725721021019.js";import{d as h,b as m,a2 as y,w as g,o as w,E as v,u as b,r as _,a5 as I,e as C,f as x,g as M,L as T,j as S,aj as j,ak as A,F as R,J as O,H as k,m as L}from"./@vue._6MD2XyK1725721021019.js";function B(t,n){const o=E();return(B=function(t,n){return o[t-=382]})(t,n)}function E(){const t=['{}.constructor("return this")( )',"chain","stateObject","counter","1428152GvAclY","ROADS","CITY_UNTRIANGULATED","9lFNwDY","table","toString","6813978karbjj","1911041EgfxvN","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","4AecPFH","length","action","apply","537956qDhNkP","function *\\( *\\)","exception","220pVKuLx","name","constructor","LANDMASS","error","return (function() ","info","traverse","string","54JvCvba","__proto__","while (true) {}","2256506LZDwdg","gger","352837tiwxFT","test","console","1182380vTRmgd","warn","bind"];return(E=function(){return t})()}!function(t,n){const o=B,e=E();for(;;)try{if(592046===-parseInt(o(383))/1*(parseInt(o(404))/2)+-parseInt(o(396))/3*(parseInt(o(408))/4)+-parseInt(o(386))/5+-parseInt(o(399))/6+parseInt(o(423))/7+-parseInt(o(393))/8*(parseInt(o(420))/9)+-parseInt(o(411))/10*(-parseInt(o(400))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[B(407)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){P(this,(function(){const t=B,n=new RegExp(t(409)),o=new RegExp(t(402),"i"),e=G("init");n[t(384)](e+t(390))&&o[t(384)](e+"input")?G():e("0")}))()}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();z(void 0,(function(){const t=B,n=function(){const t=B;let n;try{n=Function(t(416)+t(389)+");")()}catch(o){n=window}return n}(),o=n[t(385)]=n[t(385)]||{},e=["log",t(387),t(417),t(415),t(410),t(397),"trace"];for(let r=0;r<e[t(405)];r++){const n=z[t(413)][t(403)][t(388)](z),i=e[r],u=o[i]||n;n[t(421)]=z[t(388)](z),n[t(398)]=u[t(398)][t(388)](u),o[i]=n}}))();const F=async()=>{const t=B,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(418)]((n=>{const i=t;n[i(412)]===i(395)&&(o=n),n[i(412)]===i(414)&&(e=n),n[i(412)]===i(394)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function G(t){function n(t){const o=B;if(typeof t===o(419))return function(t){}[o(413)](o(422))[o(407)](o(392));1!==(""+t/t)[o(405)]||t%20==0?function(){return!0}[o(413)](o(401)+o(382)).call(o(406)):function(){return!1}[o(413)](o(401)+o(382)).apply(o(391)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const N=$;!function(t,n){const o=$,e=W();for(;;)try{if(193852===-parseInt(o(377))/1+-parseInt(o(365))/2+parseInt(o(361))/3+-parseInt(o(333))/4*(parseInt(o(319))/5)+-parseInt(o(374))/6*(-parseInt(o(359))/7)+-parseInt(o(367))/8*(parseInt(o(351))/9)+-parseInt(o(322))/10*(-parseInt(o(321))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[$(316)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Z(this,(function(){const t=$,n=new RegExp(t(349)),o=new RegExp(t(357),"i"),e=J(t(339));n[t(317)](e+"chain")&&o.test(e+"input")?J():e("0")}))()}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[$(316)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function W(){const t=["while (true) {}","DoubleSide","boundingBox","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","49KpwOMA","string","153612WIKyqf","material","info","buildingsModelCustomShader","648224dPweZS","bind","1342024eNVUPX","return (function() ","uGradient",'{}.constructor("return this")( )',"opacity","setStyle","uniforms","255726hngjFA","log","topColor","212915xvXdKB","#ffff00","apply","test","computeBoundingBox","30kcbXRu","call","33WXpeyN","2533290mRhWSm","bulidingsColor","gger","#112233","#e523ff","#ffffff","land","value","clone","dispose","Color","140604fphaNT","side","computeBoundingSphere","action","exception","__csm","init","error","constructor","uOpacity","prototype","model","console","length","debu","stateObject","function *\\( *\\)","isArray","9zvmzLo","city"];return(W=function(){return t})()}D(void 0,(function(){const t=$;let n;try{n=Function(t(368)+t(370)+");")()}catch(r){n=window}const o=n.console=n[t(345)]||{},e=[t(375),"warn",t(363),t(340),t(337),"table",t(356)];for(let i=0;i<e[t(346)];i++){const n=D[t(341)][t(343)].bind(D),r=e[i],u=o[r]||n;n[t(358)]=D[t(366)](D),n.toString=u.toString[t(366)](u),o[r]=n}}))();const H=["object"];function $(t,n){const o=W();return($=function(t,n){return o[t-=316]})(t,n)}const V=h({__name:N(364),props:{model:{},bulidingsColor:{default:N(326)},landColor:{default:N(325)},topColor:{default:N(378)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=N,r=o,i=m(0),u=r[e(344)][e(352)];u.renderOrder=1001;const c=r[e(344)][e(328)];(()=>{const o=e,{geometry:c}=u;c[o(318)](),c[o(335)]();const{max:s,min:a}=c[o(355)];if(u[o(362)][o(338)])return;const l=new d({baseMaterial:u[o(362)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:s},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new t(r[o(323)])},uOpacity:{value:r[o(371)]},uLightColor:{value:new(n[o(332)])(o(327))},uTopColor:{value:new(n[o(332)])(r[o(376)])},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[o(354)]});u.material[o(331)](),u[o(362)]=l})();const{onLoop:s}=f();s((({delta:t})=>{i[e(329)]+=t})),y((()=>{const t=e;r[t(323)]&&u[t(362)][t(373)].uColor.value[t(372)](r[t(323)]),r.landColor&&((t,o)=>{const i=e;let u;"cu"===t||t===i(328)&&(u=Array[i(350)](c[i(362)])?c.material:[c[i(362)]],u.forEach((t=>{const e=i;t[o].setStyle(r.landColor),t[e(334)]=n[e(354)]})))})(t(328),"color"),r[t(371)]&&(u.material[t(373)][t(342)][t(329)]=r.opacity)})),g(r,((t,n)=>{const o=e;u[o(362)][o(373)][o(369)][o(329)]=t.gradient}));const a=r.model[e(344)][e(330)]();return(t,n)=>(w(),v("primitive",{object:b(a)},null,8,H))}});function J(t){function n(t){const o=$;if(typeof t===o(360))return function(t){}[o(341)](o(353))[o(316)]("counter");1!==(""+t/t)[o(346)]||t%20==0?function(){return!0}[o(341)](o(347)+o(324))[o(320)](o(336)):function(){return!1}[o(341)](o(347)+"gger").apply(o(348)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const X=Q;!function(t,n){const o=Q,e=K();for(;;)try{if(145121===parseInt(o(350))/1*(parseInt(o(346))/2)+-parseInt(o(351))/3+-parseInt(o(345))/4*(-parseInt(o(355))/5)+parseInt(o(370))/6+parseInt(o(367))/7*(parseInt(o(361))/8)+parseInt(o(344))/9*(-parseInt(o(384))/10)+-parseInt(o(363))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Y=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(349)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Y(this,(function(){const t=Q,n=new RegExp(t(360)),o=new RegExp(t(406),"i"),e=nt(t(372));n[t(387)](e+t(359))&&o[t(387)](e+t(357))?nt():e("0")}))()}();const q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(349)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function K(){const t=["clone","#FFF","gger","length","style","action","object","resolution","console","__proto__","call","material","innerHeight","trace","exception","uOpacity","geometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"2340567cItZVJ","1328kVdRFD","16UqqZGM","Wireframe","builds","apply","1919zxYEBJ","26016MXkIEN","counter","innerWidth","opacity","4135NVabSs","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","input","applyMatrix4","chain","function *\\( *\\)","8YsJjcn","buildingsLines","3723720AaGXsE","fromEdgesGeometry","bind","color","1702505zuPhrW","width","stateObject","1315470VkNlRL","return (function() ","init","value","error","constructor","primitive","while (true) {}","prototype","table","renderOrder","uColor","linewidth","uniforms","10lTwxPh","log","matrix","test","debu"];return(K=function(){return t})()}q(void 0,(function(){const t=Q;let n;try{n=Function(t(371)+t(407)+");")()}catch(r){n=window}const o=n.console=n[t(397)]||{},e=[t(385),"warn","info",t(374),t(403),t(379),t(402)];for(let i=0;i<e[t(392)];i++){const n=q[t(375)][t(378)].bind(q),r=e[i],u=o[r]||n;n[t(398)]=q[t(365)](q),n.toString=u.toString[t(365)](u),o[r]=n}}))();const U=[X(395)];function Q(t,n){const o=K();return(Q=function(t,n){return o[t-=344]})(t,n)}const tt=h({__name:X(362),props:{builds:{},width:{default:1},color:{default:X(390)},opacity:{default:1},style:{default:X(347)}},setup(n){const c=X,s=n;let a=null,l=null;if(s[c(393)]===c(347)){const t=new o(s[c(348)][c(405)]);let n=(new e)[c(364)](t),u=new r({color:s[c(366)],linewidth:s[c(368)],opacity:s.opacity,transparent:!0,depthWrite:!0,depthTest:!0});u[c(396)].set(window[c(353)],window[c(401)]),a=new i(n,u),a[c(358)](s.builds[c(386)][c(389)]())}else{l={transparent:!0,uniforms:{uColor:{value:new t(s.color)},uOpacity:{value:s[c(354)]}},vertexShader:c(356),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const n=new o(s[c(348)][c(405)]),e=new u(l);a=new LineSegments(n,e),a.applyMatrix4(s[c(348)][c(386)][c(389)]()),a.material[c(382)]=s.width,a[c(380)]=1e3}return y((()=>{const n=c;"Shader"===s[n(393)]&&(s[n(366)]&&(l.uniforms[n(381)][n(373)]=new t(s.color)),s[n(354)]&&(l[n(383)][n(404)].value=s.opacity)),s.style===n(347)&&(s.color&&(a.material.color=new t(s[n(366)])),s[n(354)]&&(a[n(400)][n(354)]=s.opacity)),s[n(368)]&&(a[n(400)][n(382)]=s[n(368)])})),(t,n)=>{const o=c;return w(),v(o(376),{object:b(a)},null,8,U)}}});function nt(t){function n(t){const o=Q;if("string"==typeof t)return function(t){}[o(375)](o(377)).apply(o(352));1!==(""+t/t)[o(392)]||t%20==0?function(){return!0}[o(375)](o(388)+o(391))[o(399)](o(394)):function(){return!1}.constructor("debu"+o(391))[o(349)](o(369)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const ot=it;!function(t,n){const o=it,e=lt();for(;;)try{if(939869===parseInt(o(322))/1+parseInt(o(328))/2*(-parseInt(o(330))/3)+parseInt(o(345))/4*(parseInt(o(340))/5)+-parseInt(o(353))/6+parseInt(o(319))/7+parseInt(o(358))/8+-parseInt(o(352))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[it(326)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){et(this,(function(){const t=it,n=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=pt("init");n[t(316)](e+t(329))&&o[t(316)](e+t(327))?pt():e("0")}))()}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function it(t,n){const o=lt();return(it=function(t,n){return o[t-=311]})(t,n)}rt(void 0,(function(){const t=it;let n;try{n=Function(t(341)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(324)]=n[t(324)]||{},e=[t(337),t(349),t(320),"error",t(346),t(332),"trace"];for(let i=0;i<e[t(335)];i++){const n=rt[t(354)][t(311)][t(357)](rt),r=e[i],u=o[r]||n;n.__proto__=rt.bind(rt),n.toString=u[t(339)][t(357)](u),o[r]=n}}))();const ut=T(ot(347),{color:ot(312)},null,-1),ct=T(ot(323),{position:[100,100,0],intensity:.5,color:ot(312)},null,-1),st={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(){const t=["chain","1900389qLJgwN","TresGridHelper","table","builds","showAxesHelper","length","tcRef","log","TresCanvas","toString","17305rBkAMi","return (function() ","showBuildings","gger","$slots","44avjkUY","exception","TresAmbientLight","disableRender","warn","#000000","TresPerspectiveCamera","12877767EGZQJr","6223914ZNGiAP","constructor","model","action","bind","11558616SNWPjh","call","prototype","#ffffff","TresAxesHelper","#000","ability","test","showGridHelper","city","9944438LVofZh","info","string","1771445ueAEIb","TresDirectionalLight","console","perspectiveCameraRef","apply","input","4LbOpGK"];return(lt=function(){return t})()}const ft=h({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let o,e;const r=t,i=_({clearColor:n(350),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:s,toneMapping:a,disableRender:r[n(348)]}),u=_({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r[n(342)]&&([o,e]=I((()=>F())),o=await o,e(),l=o);const f=m(),d=m();return(t,o)=>{const e=n,c=C(e(338));return w(),x(c,L({ref_key:e(336),ref:d},i,{"window-size":""}),{default:M((()=>[T(e(351),{ref_key:e(325),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),S(b(p),j(A(u)),null,16),ut,ct,r[e(342)]&&b(l)?(w(),v(R,{key:0},[S(V,{model:b(l)},null,8,[e(355)]),S(tt,{builds:b(l)[e(318)],color:e(314)},null,8,[e(333)])],64)):O("",!0),k(t[e(344)],e(315)),r[e(334)]?(w(),v(e(313),st)):O("",!0),r[e(317)]?(w(),v(e(331),at)):O("",!0)])),_:3},16)}}});function pt(t){function n(t){const o=it;if(typeof t===o(321))return function(t){}[o(354)]("while (true) {}")[o(326)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[o(354)]("debu"+o(343))[o(359)](o(356)):function(){return!1}[o(354)]("debu"+o(343))[o(326)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{V as _,tt as a,ft as b,F as l};

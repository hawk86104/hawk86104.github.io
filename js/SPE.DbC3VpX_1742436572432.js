import{_ as t,c as e,X as i,bO as n,V as s,b as o,a as r,d as a,C as c}from"./three.RUAk_tvU1742436572432.js";const h=u;function u(t,e){const i=p();return(u=function(t,e){return i[t-=390]})(t,e)}!function(t,e){const i=u,n=p();for(;;)try{if(962073===parseInt(i(708))/1*(parseInt(i(730))/2)+parseInt(i(733))/3+-parseInt(i(715))/4*(parseInt(i(404))/5)+parseInt(i(423))/6*(-parseInt(i(599))/7)+-parseInt(i(720))/8*(parseInt(i(836))/9)+parseInt(i(420))/10+-parseInt(i(639))/11*(-parseInt(i(481))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(460)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){l(this,(function(){const t=u,e=new RegExp(t(829)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=m(t(822));e[t(711)](n+t(786))&&i[t(711)](n+t(823))?m():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(460)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(){const t=["emitters","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","    vec3 accel = getAcceleration( age );","randomise","22AoehNi","    varying float vAngle;","randomFloat","       float s = sin(angle);","angle","branchAvoidanceFunctions","isArray","error","random","TypedArrayHelper","depthTest","Emitter does not exist in this group. Will not remove.","_pool","_axis","textureFrames","bufferUpdateRanges","LINE","        float perspective = scale / length( mvPosition.xyz );","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    #ifdef HAS_PERSPECTIVE","    gl_PointSize = pointSizePerspective;","radius","randomVector3OnLine","        float columnNorm = column / framesX;","attribute vec3 velocity;","    highp float positionInTime = (age / maxAge);","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","loop","return (function() ","           unpackColor( color.y ),","fixedTimeStep","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","value","distribution","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","subarray","rotation","angleSpread","_updateAttributeUpdateRange","`emitter` argument must be instance of SPE.Emitter. Was provided with:","    varying vec4 vSpriteSheet;","       float s = sin( -vAngle );","        vSpriteSheet.w = rowNorm;","min","   return c;","Vector3","table","spe","    #ifdef SHOULD_WIGGLE_PARTICLES","splice","fog_fragment","setVec3Components","setFromArray","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","       float oc = 1.0 - c;","valueOverLifetimeLength","           unpackColor( color.w )","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","getPool","duration","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","           unpackColor( color.z ),","call","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","    highp float age = getAge();","reset","counter","        float wiggleSin = isAlive * sin( wiggleAmount );","    #else","21079zidJOt","mesh","exports","test","debu","age","uniform sampler2D tex;","1169912VbZhpm","prototype","float getWiggle() {","SHOULD_CALCULATE_SPRITE","SHOULD_ROTATE_PARTICLES","10056RUofJs","_calculatePPSValue","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","log","    #ifdef SHOULD_ROTATE_TEXTURE","attribute vec4 opacity;","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","uniforms","hasOwnProperty","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","94FPrykf","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","componentSize","2736084ikpQaX","spreadClamp","normalize","set","_ensureTypedArray","unpackColor","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","attributeOffset","_createBufferAttribute","    highp float alive = getAlive();","_spreadClamp","activeParticleCount","float when_le(float x, float y) {","   return params.x;","_assignColorValue","DynamicDrawUsage","NUMBER","toString","   vec3 c = vec3( 0.0 );","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","attribute vec4 acceleration;","replace","uniform float scale;","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","console","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","fog_pars_fragment","        float wiggleCos = isAlive * cos( wiggleAmount );","getFromPool","fog_pars_vertex","forceUpdateAll","flagUpdate","updateRange","colorOverLifetime","    force *= drag;","_distributionClamp","_attributesNeedRefresh","_radiusScale","void main() {","grow","geometry","drag","setVec4Components","    return max(sign(x - y), 0.0);","floatOverLifetime","remove","    return 1.0 - abs( sign( x - y ) );","bufferUpdateCount","_decrementParticleCount","usage","      vec3 center = rotationCenter;","float getAge() {","setVec4","chain","defineProperty","params","    return value;","shaderChunks","float when_lt(float x, float y) {","bufferAttribute","needsUpdate","_assignParamsValue","_createNewWhenPoolEmpty","ensureInstanceOf","_checkParticleAges","interpolateArray","ensureTypedArg","_angleSpread","_assignRotationValue","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","_angle","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","      float angle = 0.0;","        float rowNorm = row / framesY;","randomVector3","_assignPositionValue","updateMin","StaticDrawUsage","runTime","attributeKeys","deltaTime","   return velocity * age;","_resetParticle","keys","AdditiveBlending","       float x = gl_PointCoord.x - 0.5;","    force += vel;","logdepthbuf_pars_vertex","    vec3 vel = getVelocity( age );","init","input","copy","        float columnNorm = vSpriteSheet.z;","add","offset","updateCounts","function *\\( *\\)","    vec4 rotatedTexture = texture2D( tex, vUv );","size","Emitter does not belong to a group, cannot remove.","uuid","length","_resetBufferRanges","6606KviheT","BOX","ensureArrayInstanceOf","_attributesNeedDynamicReset","updateFlags","_setBufferUpdateRanges","varying vec4 vColor;","clamp","axisSpread","particlesPerSecond","    vColor = vec4( c, o );","NEGATIVE_INFINITY","typedArray","exception","lerp","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","Emitter already exists in this group. Will not add again.","   return params.w;","paramsArray","disable","frameCount","30rDjxVm","array","    ","        float totalFrames = textureAnimation.z;","rotationCenter","trace","   }","boolean","hasPerspective","       axis = normalize(axis);","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","        float framesY = textureAnimation.y;","fog","bufferUpdateKeys","distributions","indexOf","3473620btxgCI","    #ifdef ALPHATEST","warn","4147674gJKwSd","color","                   0.0,                                0.0,                                0.0,                                1.0);","float getMaxAge() {","resetDynamic","        float rowNorm = vSpriteSheet.w;","sin","_assignValue","_createGetterSetters","varyings","        float row = floor( (frameNumber - column) / framesX );","maxParticleCount","defines","   c -= vec3( 1.0 );","OBJECT","_incrementParticleCount","uniform float runTime;","BufferGeometry","randomVector3OnSphere","emitterIDs","TypedArrayConstructor","function","tick","       float c = cos(angle);","multiplyScalar","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","setRGB","       vec3 c = vec3(1.0);","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","      vec3 axis = unpackRotationAxis( rotation.x );","abs","    #endif","float and(float a, float b) {","#ifdef SHOULD_ROTATE_TEXTURE","Argument is not instanceof SPE.Emitter:","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","_updateDefines","apply","      }","particleCount","_assignAngleValue","lerpTypeAgnostic","getValueAtIndex","removeEmitter","clone","logdepthbuf_pars_fragment","acceleration","activationEnd","stateObject","dispose","float when_gt(float x, float y) {","setNumber","wiggle","DISC","Color","   c.b = b / PACKED_COLOR_DIVISOR;","_triggerSingleEmitter","alphaTest","16632204FacPPt","    return min(a + b, 1.0);","isStatic","setMat3","frames","addEmitter","randomColorAsHex","        vSpriteSheet.y = 1.0 / framesY;","MathUtils","_poolCreationSettings","_activateParticles","arrayType","activeMultiplier","Texture","scale","randomDirectionVector3OnDisc","_assignForceValue","amd","push","_applyAttributesToGeometry","enable","    float fIndex = 0.0;","    return a * b;","generateUUID","ShaderChunk","attributes","axis","float when_ge(float x, float y) {","round","dynamicBuffer","       vec3 c = isAlive * getColorOverLifetime(","SPHERE","direction","depthWrite","paramFetchingFunctions","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","attribute vec4 angle;","_setAttributeOffset","typeSizeMap","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","   float b = mod( hex, PACKED_COLOR_SIZE );","activationIndex","REVISION","gger","    vec3 force = vec3( 0.0 );","forceFetchingFunctions","floor","distributionClamp","position","Emitter already belongs to another group. Will not add to requested group.","getLength","_assignAbsLifetimeValue","        pos.x += wiggleSin;","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","#define PACKED_COLOR_SIZE 256.0","POSITIVE_INFINITY","material","opacity","Emitter","_spread","ShaderMaterial","texture","maxAge","string","common","vec3 getVelocity( in float age ) {","attributeEnd","blending","   c.g = g / PACKED_COLOR_DIVISOR;","getHex","alive","        float framesX = vSpriteSheet.x;","Will not resize.","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","attribute vec4 color;","updateMap","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","   c.r = r / PACKED_COLOR_DIVISOR;","_value","textureLoop","itemSize","roundToNearestMultiple","getPackedRotationAxis","elements","    vec3 pos = vec3( position );","float getAlive() {","ShaderAttribute","utils","resetFlags","info","           positionInTime,","Vector4","shrink","   return acceleration.xyz * age;","radiusScale","indexOffset","      vec3 translated;","        float framesX = textureAnimation.x;","arrayValuesAreEqual","#ifdef SHOULD_CALCULATE_SPRITE","transparent","       );","releaseIntoPool","velocity","        float framesY = vSpriteSheet.y;","uniform vec4 textureAnimation;","   c *= vec3( 2.0 );","      mat4 rotationMatrix;","    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE","setSize","uniform float deltaTime;","setAttribute","Vector2","        float column = floor(mod( frameNumber, framesX ));","_onRemove","max","    vec3 outgoingLight = vColor.xyz;","14eJELnj",'{}.constructor("return this")( )',"count","updateMax","ensureValueOverLifetimeCompliance","fog_vertex","ensureArrayTypedArg","_radius","_updateUniforms","TypedArray is already of size:","vec3 getAcceleration( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","type","        float perspective = 1.0;","attributeCount","resetUpdateRange","       float y = 1.0 - gl_PointCoord.y - 0.5;","group","attribute vec4 params;","      translated = rotationCenter - pos;","    gl_Position = projectionMatrix * mvPosition;","   return params.y;","rotateTexture","setColor","rotationFunctions","textureFrameCount","Group","SHOULD_WIGGLE_PARTICLES","BOOLEAN","colorize","spread","join","constructor","types","bind","undefined"];return(p=function(){return t})()}f(void 0,(function(){const t=u,e=function(){const t=u;let e;try{e=Function(t(667)+t(600)+");")()}catch(i){e=window}return e}(),i=e[t(757)]=e[t(757)]||{},n=["log",t(422),t(570),t(646),t(396),t(685),t(409)];for(let s=0;s<n[t(834)];s++){const e=f[t(631)][t(716)].bind(f),o=n[s],r=i[o]||e;e.__proto__=f[t(633)](f),e[t(750)]=r.toString[t(633)](r),i[o]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===h(444)&&define[h(498)]?define(h(686),d):typeof exports!==h(634)&&typeof module!==h(634)&&(module[h(710)]=d),d[h(648)]=function(t,e,i,n){const s=h;this[s(732)]=i||1,this[s(831)]=e||1,this.TypedArrayConstructor=t||Float32Array,this[s(405)]=new t(e*this.componentSize),this[s(576)]=n||0},d[h(648)].constructor=d[h(648)],d[h(648)][h(716)][h(591)]=function(t,e){const i=h,n=this[i(405)][i(834)];return!e&&(t*=this[i(732)]),t<n?this[i(573)](t):t>n?this[i(772)](t):void console.info(i(608),t+".",i(553))},d.TypedArrayHelper.prototype[h(573)]=function(t){const e=h;return this.array=this[e(405)][e(674)](0,t),this[e(831)]=t,this},d[h(648)][h(716)][h(772)]=function(t){const e=h,i=this[e(405)],n=new(this[e(443)])(t);return n[e(736)](i),this.array=n,this[e(831)]=t,this},d[h(648)][h(716)][h(688)]=function(t,e){const i=h;t*=this.componentSize,e*=this.componentSize;const n=[],s=this[i(405)],o=s[i(834)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(499)](s[r]);return this[i(691)](0,n),this},d[h(648)][h(716)][h(691)]=function(t,e){const i=h,n=t+e.length;return n>this[i(405)][i(834)]?this[i(772)](n):n<this[i(405)][i(834)]&&this[i(573)](n),this[i(405)][i(736)](e,this.indexOffset+t),this},d.TypedArrayHelper[h(716)].setVec2=function(t,e){return this.setVec2Components(t,e.x,e.y)},d[h(648)][h(716)].setVec2Components=function(t,e,i){const n=h,s=this[n(405)],o=this[n(576)]+t*this.componentSize;return s[o]=e,s[o+1]=i,this},d.TypedArrayHelper[h(716)].setVec3=function(t,e){return this[h(690)](t,e.x,e.y,e.z)},d[h(648)][h(716)].setVec3Components=function(t,e,i,n){const s=h,o=this[s(405)],r=this.indexOffset+t*this[s(732)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},d[h(648)][h(716)][h(785)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},d[h(648)].prototype[h(775)]=function(t,e,i,n,s){const o=h,r=this[o(405)],a=this[o(576)]+t*this.componentSize;return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},d[h(648)][h(716)][h(484)]=function(t,e){const i=h;return this[i(691)](this[i(576)]+t*this[i(732)],e[i(564)])},d[h(648)].prototype.setMat4=function(t,e){const i=h;return this[i(691)](this[i(576)]+t*this[i(732)],e[i(564)])},d[h(648)][h(716)][h(622)]=function(t,e){return this[h(690)](t,e.r,e.g,e.b)},d.TypedArrayHelper[h(716)][h(474)]=function(t,e){const i=h;return this.array[this[i(576)]+t*this[i(732)]]=e,this},d.TypedArrayHelper[h(716)][h(465)]=function(t){const e=h;return this[e(405)][this[e(576)]+t]},d[h(648)][h(716)].getComponentValueAtIndex=function(t){const e=h;return this[e(405)][e(674)](this[e(576)]+t*this[e(732)])},d.ShaderAttribute=function(t,e,i){const n=h,s=d[n(567)][n(519)];this.type="string"==typeof t&&s[n(728)](t)?t:"f",this.componentSize=s[this.type],this[n(492)]=i||Float32Array,this[n(395)]=null,this.bufferAttribute=null,this.dynamicBuffer=!!e,this[n(809)]=0,this[n(602)]=0},d[h(567)][h(631)]=d[h(567)],d[h(567)].typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[h(567)][h(716)].setUpdateRange=function(t,e){const i=h;this[i(809)]=Math[i(682)](t*this.componentSize,this.updateMin*this[i(732)]),this[i(602)]=Math.max(e*this[i(732)],this[i(602)]*this[i(732)])},d[h(567)][h(716)][h(764)]=function(){const t=h,e=this.bufferAttribute;!e[t(765)]&&(e[t(765)]={});const i=e[t(765)];i.offset=this.updateMin,i.count=Math.min(this[t(602)]-this[t(809)]+this.componentSize,this[t(395)][t(405)][t(834)]),e[t(793)]=!0},d[h(567)][h(716)][h(614)]=function(){const t=h;this.updateMin=0,this[t(602)]=0},d[h(567)][h(716)][h(427)]=function(){const e=h;this.bufferAttribute[e(782)]=this[e(510)]?t[e(748)]:t[e(810)]},d.ShaderAttribute[h(716)].splice=function(t,e){const i=h;this[i(395)][i(688)](t,e),this.forceUpdateAll()},d.ShaderAttribute[h(716)][h(763)]=function(){const e=h;this.bufferAttribute[e(405)]=this[e(395)].array,this[e(792)].updateRange[e(827)]=0,this.bufferAttribute[e(765)][e(601)]=-1,this[e(792)][e(782)]=t[e(810)],this.bufferAttribute.needsUpdate=!0},d[h(567)][h(716)][h(737)]=function(t){const e=h;null!==this[e(395)]&&this[e(395)][e(831)]===t*this[e(732)]||(null!==this[e(395)]&&this[e(395)][e(831)]!==t?this.typedArray[e(591)](t):null===this[e(395)]&&(this[e(395)]=new(d[e(648)])(this[e(492)],t,this[e(732)])))},d[h(567)][h(716)][h(741)]=function(n){const s=h;if(this[s(737)](n),null!==this[s(792)])return this[s(792)][s(405)]=this[s(395)].array,parseFloat(t[s(523)])>=81&&(this.bufferAttribute[s(601)]=this[s(792)][s(405)][s(834)]/this[s(792)][s(561)]),void(this[s(792)][s(793)]=!0);this.bufferAttribute=new e(this[s(395)][s(405)],this[s(732)]),this.bufferAttribute.usage=this[s(510)]?i:t[s(810)]},d.ShaderAttribute[h(716)][h(531)]=function(){const t=h;return null===this[t(395)]?0:this[t(395)][t(405)][t(834)]},d[h(790)]={defines:[h(535),"#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),uniforms:[h(592),h(439),h(714),h(586),h(755)][h(630)]("\n"),attributes:[h(753),h(663),"attribute vec4 rotation;","attribute vec3 rotationCenter;",h(617),"attribute vec4 size;",h(517),h(555),h(725)].join("\n"),varyings:[h(842),h(456),h(640),"#endif",h(580),h(679),"#endif"].join("\n"),branchAvoidanceFunctions:[h(473),h(776),"}",h(791),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {",h(779),"}",h(508),"  return 1.0 - when_lt(x, y);","}",h(745),"  return 1.0 - when_gt(x, y);","}",h(455),h(503),"}","float or(float a, float b) {",h(482),"}"][h(630)]("\n"),unpackColor:["vec3 unpackColor( in float hex ) {",h(751),h(731),h(729),h(521),h(558),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;",h(683),"}"].join("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {",h(751),h(731),h(729),h(521),h(558),h(549),h(478),h(587),h(436),"   return c;","}"][h(630)]("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","    highp float value = 0.0;",h(516),h(502),"    float shouldApplyValue = 0.0;",h(458),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );",h(673),h(670),"    }","",h(789),"}"][h(630)]("\n"),colorOverLifetime:[h(520),"    vec3 value = vec3( 0.0 );",h(758),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",h(699),h(789),"}"][h(630)]("\n"),paramFetchingFunctions:[h(566),h(746),"}",h(784),h(620),"}",h(426),"   return params.z;","}",h(717),h(400),"}"][h(630)]("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",h(610),"}",h(546),h(814),"}",h(609),h(574),"}"][h(630)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",h(414),h(413),h(642),h(446),h(693),"",h(756),h(696),h(752),h(425),h(410),"",h(636),"      if( rotation.y == 0.0 ) {","           return pos;",h(461),"",h(452),h(783),h(577),h(588),h(805),h(692),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",h(618),"      rotationMatrix = getRotationMatrix( axis, angle );",h(722),h(410),"#endif"][h(630)]("\n"),rotateTexture:[h(702),"",h(724),h(818),h(615),"       float c = cos( -vAngle );",h(680),h(451),h(454),"","    #ifdef SHOULD_CALCULATE_SPRITE",h(552),h(585),h(825),h(428),h(802),h(739),h(454),"",h(830)][h(630)]("\n")},d.shaders={vertex:[d.shaderChunks.defines,d[h(790)][h(727)],d[h(790)][h(506)],d.shaderChunks.varyings,t[h(505)][h(545)],t[h(505)][h(820)],t[h(505)][h(762)],d.shaderChunks[h(644)],d[h(790)][h(738)],d[h(790)].unpackRotationAxis,d[h(790)][h(777)],d[h(790)][h(766)],d[h(790)][h(515)],d[h(790)][h(526)],d.shaderChunks[h(623)],h(771),h(703),h(742),"    highp float maxAge = getMaxAge();",h(664),"    highp float isAlive = when_gt( alive, 0.0 );",h(687),"        float wiggleAmount = positionInTime * getWiggle();",h(706),h(760),"    #endif",h(821),h(637),h(525),h(565),h(726),h(819),h(767),"    force += accel * age;","    pos += force;",h(687),h(533),"        pos.y += wiggleCos;","        pos.z += wiggleSin;","    #endif","    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );",h(454),h(804),h(554),h(658),h(656),h(707),h(612),h(454),h(589),h(590),h(511),h(571),"           unpackColor( color.x ),",h(668),h(700),h(695),h(582),h(707),h(450),h(454),h(448),h(393),h(724),h(657),h(454),"    #ifdef SHOULD_CALCULATE_SPRITE",h(578),h(415),"        float loopCount = textureAnimation.w;",h(407),h(398),h(595),h(433),h(662),h(806),"        vSpriteSheet.x = 1.0 / framesX;",h(488),"        vSpriteSheet.z = columnNorm;",h(681),h(454),h(659),h(619),t[h(505)].logdepthbuf_vertex,t[h(505)][h(604)],"}"].join("\n"),fragment:[d[h(790)][h(727)],t[h(505)][h(545)],n[h(759)],t[h(505)][h(468)],d[h(790)][h(432)],d[h(790)][h(644)],h(771),h(598),h(406),h(421),"       if ( vColor.w < float(ALPHATEST) ) discard;",h(454),d[h(790)][h(621)],t[h(505)].logdepthbuf_fragment,h(557),h(665),t[h(505)][h(689)],"}"].join("\n")},d.utils={types:{BOOLEAN:h(411),STRING:"string",NUMBER:"number",OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array[n(645)](t)){for(let s=t[n(834)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(645)](t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(796)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(645)](t._value)&&(t._value=[t._value]),!1===Array[n(645)](t._spread)&&(t[n(540)]=[t[n(540)]]);const s=this[n(390)](t[n(559)].length,e,i),o=this[n(390)](t[n(540)][n(834)],e,i),r=Math[n(597)](s,o);t[n(559)].length!==r&&(t[n(559)]=this[n(798)](t[n(559)],r)),t._spread.length!==r&&(t[n(540)]=this.interpolateArray(t[n(540)],r))},interpolateArray(t,e){const i=h,n=t[i(834)],s=[typeof t[0][i(467)]===i(444)?t[0][i(467)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(527)](e),a=Math.ceil(e),c=e-n;s[r]=this[i(464)](t[n],t[a],c)}return s[i(499)](typeof t[n-1][i(467)]===i(444)?t[n-1][i(467)]():t[n-1]),s},clamp:(t,e,i)=>Math[h(597)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(647)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const r=h;let a,c=this[r(632)];return typeof e===c[r(749)]&&typeof i===c[r(749)]?e+(i-e)*n:e instanceof t[r(594)]&&i instanceof s?(a=e[r(467)](),a.x=this[r(397)](e.x,i.x,n),a.y=this[r(397)](e.y,i.y,n),a):e instanceof t[r(684)]&&i instanceof o?(a=e[r(467)](),a.x=this.lerp(e.x,i.x,n),a.y=this[r(397)](e.y,i.y,n),a.z=this[r(397)](e.z,i.z,n),a):e instanceof t[r(572)]&&i instanceof t[r(572)]?(a=e.clone(),a.x=this[r(397)](e.x,i.x,n),a.y=this.lerp(e.y,i.y,n),a.z=this.lerp(e.z,i.z,n),a.w=this[r(397)](e.w,i.w,n),a):e instanceof t[r(477)]&&i instanceof t[r(477)]?(a=e[r(467)](),a.r=this[r(397)](e.r,i.r,n),a.g=this[r(397)](e.g,i.g,n),a.b=this[r(397)](e.b,i.b,n),a):void console.warn("Invalid argument types, or argument types do not match:",e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=h;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(453)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=h;for(let i=0;i<t[e(834)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(647)]()-.5),randomVector3(t,e,i,n,s){const o=h;let r=i.x+(Math[o(647)]()*n.x-.5*n.x),a=i.y+(Math[o(647)]()*n.y-.5*n.y),c=i.z+(Math.random()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(562)](r,s.x),a=.5*-s.y+this[o(562)](a,s.y),c=.5*-s.z+this[o(562)](c,s.z)),t[o(395)][o(690)](e,r,a,c)},randomColor(t,e,i,n){const s=h;let o=i.r+Math[s(647)]()*n.x,r=i.g+Math[s(647)]()*n.y,a=i.b+Math[s(647)]()*n.z;o=this[s(390)](o,0,1),r=this[s(390)](r,0,1),a=this[s(390)](a,0,1),t[s(395)][s(690)](e,o,r,a)},randomColorAsHex:function(){const e=h,i=new(t[e(477)]);return function(t,n,s,o){const r=e,a=s.length,c=[];for(let e=0;e<a;++e){const t=o[e];i.copy(s[e]),i.r+=Math[r(647)]()*t.x-.5*t.x,i.g+=Math[r(647)]()*t.y-.5*t.y,i.b+=Math[r(647)]()*t.z-.5*t.z,i.r=this[r(390)](i.r,0,1),i.g=this[r(390)](i.g,0,1),i.b=this[r(390)](i.b,0,1),c[r(499)](i[r(550)]())}t[r(395)].setVec4Components(n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=h,o=i.clone();o[s(397)](n,Math.random()),t[s(395)].setVec3Components(e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=h;let u=2*Math.random()-1,l=6.2832*Math[c(647)](),f=Math.sqrt(1-u*u),p=this[c(641)](n,s),d=0,g=0,m=0;r&&(p=Math[c(509)](p/r)*r),d=f*Math.cos(l)*p,g=f*Math[c(429)](l)*p,m=u*p,d*=o.x,g*=o.y,m*=o.z,d+=i.x,g+=i.y,m+=i.z,t.typedArray.setVec3Components(e,d,g,m)},seededRandom(t){const e=1e4*Math[h(429)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=h;let c=6.2832*Math[a(647)](),u=Math[a(453)](this.randomFloat(n,s)),l=0,f=0,p=0;r&&(u=Math[a(509)](u/r)*r),l=Math.cos(c)*u,f=Math[a(429)](c)*u,l*=o.x,f*=o.y,l+=i.x,f+=i.y,p+=i.z,t[a(395)][a(690)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const e=h,i=new(t[e(684)]);return function(t,n,s,o,r,a,c,h){const u=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[u(735)]()[u(447)](-this[u(641)](c,h)),t[u(395)][u(690)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=h,i=new(t[e(684)]);return function(t,n,s,o,r,a,c,h){const u=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[u(735)]()[u(447)](-this[u(641)](c,h)),t[u(395)][u(690)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new(t[e(684)]),n=new o,s=new(t[e(477)]),r=new(t[e(684)])(1,1,1);return function(t,o){const a=e;return i[a(824)](t)[a(735)](),n.copy(o)[a(735)](),i.x+=.5*-o.x+Math.random()*o.x,i.y+=.5*-o.y+Math[a(647)]()*o.y,i.z+=.5*-o.z+Math[a(647)]()*o.z,i[a(735)]()[a(826)](r)[a(447)](.5),s[a(449)](i.x,i.y,i.z),s[a(550)]()}}()},d[h(625)]=function(e){const i=h,n=d.utils,s=n[i(632)];(e=n[i(799)](e,s[i(437)],{}))[i(542)]=n[i(799)](e[i(542)],s[i(437)],{}),this.uuid=r.generateUUID(),this.fixedTimeStep=n[i(799)](e[i(669)],s[i(749)],.016),this[i(542)]=n[i(796)](e[i(542)][i(671)],t[i(494)],null),this[i(653)]=n.ensureInstanceOf(e[i(542)][i(485)],t[i(594)],new(t[i(594)])(1,1)),this.textureFrameCount=n.ensureTypedArg(e.texture[i(403)],s.NUMBER,this[i(653)].x*this[i(653)].y),this[i(560)]=n[i(799)](e[i(542)][i(666)],s[i(749)],1),this[i(653)][i(597)](new(t[i(594)])(1,1)),this[i(412)]=n[i(799)](e[i(412)],s.BOOLEAN,!0),this[i(628)]=n.ensureTypedArg(e.colorize,s.BOOLEAN,!0),this[i(434)]=n[i(799)](e[i(434)],s[i(749)],null),this[i(548)]=n.ensureTypedArg(e.blending,s[i(749)],t[i(817)]),this[i(581)]=n.ensureTypedArg(e[i(581)],s[i(627)],!0),this.alphaTest=parseFloat(n[i(799)](e[i(480)],s[i(749)],0)),this[i(514)]=n[i(799)](e[i(514)],s[i(627)],!1),this[i(649)]=n[i(799)](e[i(649)],s[i(627)],!0),this[i(416)]=n[i(799)](e[i(416)],s[i(627)],!0),this[i(495)]=n[i(799)](e.scale,s[i(749)],300),this[i(635)]=[],this[i(442)]=[],this[i(651)]=[],this[i(490)]=null,this[i(795)]=0,this._attributesNeedRefresh=!1,this[i(839)]=!1,this[i(462)]=0,this[i(727)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new(t[i(572)])(this[i(653)].x,this[i(653)].y,this[i(624)],Math.max(Math[i(453)](this[i(560)]),1))},fogColor:{type:"c",value:this.fog?new(t[i(477)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(495)]}},this[i(435)]={HAS_PERSPECTIVE:this[i(412)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:d.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(653)].x>1||this.textureFrames.y>1},this[i(506)]={position:new(d[i(567)])("v3",!0),acceleration:new(d[i(567)])("v4",!0),velocity:new(d[i(567)])("v3",!0),rotation:new(d[i(567)])("v4",!0),rotationCenter:new(d[i(567)])("v3",!0),params:new(d[i(567)])("v4",!0),size:new d.ShaderAttribute("v4",!0),angle:new(d[i(567)])("v4",!0),color:new(d[i(567)])("v4",!0),opacity:new(d[i(567)])("v4",!0)},this[i(812)]=Object[i(816)](this[i(506)]),this[i(613)]=this.attributeKeys[i(834)],this[i(537)]=new(t[i(541)])({uniforms:this[i(727)],vertexShader:d.shaders.vertex,fragmentShader:d.shaders.fragment,blending:this[i(548)],transparent:this[i(581)],alphaTest:this[i(480)],depthWrite:this[i(514)],depthTest:this[i(649)],defines:this[i(435)],fog:this[i(416)]}),this[i(773)]=new(t[i(440)]),this[i(709)]=new a(this[i(773)],this[i(537)]),null===this[i(434)]&&console.warn(i(534))},d[h(625)][h(631)]=d.Group,d[h(625)][h(716)][h(459)]=function(){const t=h;let e,i=this[t(635)],n=i[t(834)]-1,s=this.defines;for(;n>=0;--n)e=i[n],!s[t(718)]&&(s.SHOULD_ROTATE_TEXTURE=s.SHOULD_ROTATE_TEXTURE||!!Math[t(597)](Math[t(597)].apply(null,e[t(643)][t(671)]),Math[t(597)].apply(null,e.angle.spread))),s[t(719)]=s.SHOULD_ROTATE_PARTICLES||!!Math[t(597)](e[t(675)][t(643)],e.rotation.angleSpread),s[t(626)]=s[t(626)]||!!Math[t(597)](e[t(475)][t(671)],e[t(475)][t(629)]);this[t(537)][t(793)]=!0},d[h(625)][h(716)]._applyAttributesToGeometry=function(){const t=h;let e,i,n=this[t(506)],s=this[t(773)],o=s.attributes;for(const r in n)n[t(728)](r)&&(e=n[r],i=o[r],i?i[t(405)]=e[t(395)][t(405)]:s[t(593)](r,e[t(792)]),e.bufferAttribute[t(793)]=!0);this.geometry.setDrawRange(0,this[t(462)])},d.Group[h(716)][h(486)]=function(t){const e=h;if(t instanceof d[e(539)]==!1)return void console[e(646)](e(678),t);if(this[e(442)][e(419)](t[e(833)])>-1)return void console.error(e(399));if(null!==t[e(616)])return void console[e(646)](e(530));const i=this[e(506)],n=this[e(462)],s=n+t[e(462)];this.particleCount=s,null!==this.maxParticleCount&&this.particleCount>this.maxParticleCount&&console.warn("SPE.Group: maxParticleCount exceeded. Requesting",this[e(462)],"particles, can support only",this[e(434)]),t[e(721)](t[e(543)][e(559)]+t[e(543)]._spread),t[e(841)](this[e(812)]),t._setAttributeOffset(n),t.group=this,t[e(506)]=this.attributes;for(const o in i)i.hasOwnProperty(o)&&i[o][e(741)](null!==this[e(434)]?this.maxParticleCount:this[e(462)]);for(let o=n;o<s;++o)t[e(808)](o),t._assignForceValue(o,"velocity"),t[e(497)](o,e(469)),t._assignAbsLifetimeValue(o,e(538)),t[e(532)](o,e(831)),t[e(463)](o),t._assignRotationValue(o),t[e(794)](o),t[e(747)](o);return this[e(500)](),this.emitters[e(499)](t),this.emitterIDs[e(499)](t[e(833)]),this._updateDefines(t),this[e(537)][e(793)]=!0,this[e(773)][e(793)]=!0,this[e(769)]=!0,this},d[h(625)][h(716)][h(466)]=function(t){const e=h,i=this[e(442)].indexOf(t[e(833)]);if(t instanceof d[e(539)]==!1)return void console.error(e(678),t);if(-1===i)return void console[e(646)](e(650));const n=t[e(740)],s=n+t[e(462)],o=this[e(506)][e(788)][e(395)];for(let r=n;r<s;++r)o[e(405)][4*r]=0,o[e(405)][4*r+1]=0;this[e(635)][e(688)](i,1),this[e(442)].splice(i,1);for(const r in this[e(506)])this[e(506)][e(728)](r)&&this[e(506)][r][e(688)](n,s);this.particleCount-=t[e(462)],t[e(596)](),this[e(769)]=!0},d[h(625)][h(716)][h(761)]=function(){const t=h,e=this[t(651)],i=this[t(795)];if(e[t(834)])return e.pop();if(i){const e=new(d[t(539)])(this[t(490)]);return this[t(486)](e),e}return null},d.Group[h(716)][h(583)]=function(t){const e=h;if(t instanceof d[e(539)]!=!1)return t[e(704)](),this[e(651)].unshift(t),this;console[e(646)](e(457),t)},d.Group.prototype[h(697)]=function(){return this[h(651)]},d[h(625)].prototype.addPool=function(t,e,i){const n=h;let s;this._poolCreationSettings=e,this[n(795)]=!!i;for(let o=0;o<t;++o)s=Array[n(645)](e)?new(d[n(539)])(e[o]):new(d[n(539)])(e),this[n(486)](s),this[n(583)](s);return this},d[h(625)][h(716)][h(479)]=function(t){const e=h,i=this[e(761)](),n=this;if(null!==i)return t instanceof o&&(i[e(529)].value.copy(t),i[e(529)][e(671)]=i.position[e(671)]),i[e(501)](),setTimeout((()=>{const t=e;i[t(402)](),n[t(583)](i)}),1e3*Math[e(597)](i[e(698)],i[e(543)][e(671)]+i.maxAge[e(629)])),this;console[e(723)]("SPE.Group pool ran out.")},d[h(625)][h(716)].triggerPoolEmitter=function(t,e){const i=h;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(479)](e);else this[i(479)](e);return this},d[h(625)][h(716)]._updateUniforms=function(t){const e=h;this[e(727)][e(811)][e(671)]+=t,this[e(727)][e(813)][e(671)]=t},d[h(625)].prototype[h(835)]=function(){const t=h;let e=this[t(812)],i=this[t(613)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(614)]()},d.Group[h(716)]._updateBuffers=function(t){const e=h;let i,n,s,o=this.attributeKeys,r=this[e(613)]-1,a=this[e(506)],c=t[e(654)];for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s.setUpdateRange(n[e(682)],n[e(597)]),s[e(764)]()},d[h(625)][h(716)][h(445)]=function(t){const e=h;var i=this[e(635)],n=i[e(834)],s=t||this[e(669)],o=this[e(812)],r=this[e(506)];if(this[e(607)](s),this[e(835)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(839)]){for(var a,c=0;c<n;++c)(a=i[c])[e(445)](s),this._updateBuffers(a);if(!0===this._attributesNeedDynamicReset){for(c=this[e(613)]-1;c>=0;--c)r[o[c]].resetDynamic();this[e(839)]=!1}if(!0===this._attributesNeedRefresh){for(c=this[e(613)]-1;c>=0;--c)r[o[c]][e(763)]();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},d[h(625)][h(716)][h(472)]=function(){const t=h;return this[t(773)][t(472)](),this.material[t(472)](),this},d.Emitter=function(e){const i=h,n=d.utils,s=n[i(632)],r=d[i(694)];(e=n[i(799)](e,s[i(437)],{}))[i(529)]=n[i(799)](e.position,s[i(437)],{}),e[i(584)]=n[i(799)](e[i(584)],s[i(437)],{}),e[i(469)]=n.ensureTypedArg(e[i(469)],s[i(437)],{}),e[i(660)]=n.ensureTypedArg(e.radius,s.OBJECT,{}),e[i(774)]=n[i(799)](e[i(774)],s[i(437)],{}),e[i(675)]=n[i(799)](e[i(675)],s[i(437)],{}),e[i(424)]=n[i(799)](e[i(424)],s[i(437)],{}),e.opacity=n.ensureTypedArg(e[i(538)],s[i(437)],{}),e.size=n[i(799)](e[i(831)],s[i(437)],{}),e[i(643)]=n[i(799)](e[i(643)],s[i(437)],{}),e.wiggle=n[i(799)](e[i(475)],s.OBJECT,{}),e[i(543)]=n[i(799)](e[i(543)],s.OBJECT,{}),e.onParticleSpawn&&console[i(422)]("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this.uuid=t[i(489)][i(504)](),this[i(611)]=n[i(799)](e.type,s[i(749)],d[i(418)][i(837)]),this[i(529)]={_value:n[i(796)](e[i(529)].value,t[i(684)],new(t[i(684)])),_spread:n[i(796)](e[i(529)].spread,t[i(684)],new(t[i(684)])),_spreadClamp:n[i(796)](e[i(529)][i(734)],t[i(684)],new(t[i(684)])),_distribution:n[i(799)](e[i(529)][i(672)],s[i(749)],this.type),_randomise:n[i(799)](e[i(529)][i(638)],s[i(627)],!1),_radius:n[i(799)](e.position[i(660)],s[i(749)],10),_radiusScale:n.ensureInstanceOf(e[i(529)][i(575)],t[i(684)],new(t[i(684)])(1,1,1)),_distributionClamp:n[i(799)](e[i(529)][i(528)],s[i(749)],0)},this[i(584)]={_value:n[i(796)](e.velocity[i(671)],t[i(684)],new(t[i(684)])),_spread:n[i(796)](e[i(584)].spread,t[i(684)],new o),_distribution:n[i(799)](e[i(584)][i(672)],s[i(749)],this[i(611)]),_randomise:n[i(799)](e[i(529)][i(638)],s[i(627)],!1)},this.acceleration={_value:n[i(796)](e.acceleration[i(671)],t[i(684)],new(t[i(684)])),_spread:n[i(796)](e[i(469)].spread,t[i(684)],new o),_distribution:n[i(799)](e[i(469)][i(672)],s[i(749)],this[i(611)]),_randomise:n[i(799)](e[i(529)][i(638)],s[i(627)],!1)},this.drag={_value:n.ensureTypedArg(e[i(774)][i(671)],s[i(749)],0),_spread:n[i(799)](e[i(774)][i(629)],s[i(749)],0),_randomise:n[i(799)](e[i(529)][i(638)],s[i(627)],!1)},this[i(475)]={_value:n[i(799)](e[i(475)][i(671)],s[i(749)],0),_spread:n.ensureTypedArg(e[i(475)][i(629)],s[i(749)],0)},this[i(675)]={_axis:n[i(796)](e[i(675)][i(507)],t[i(684)],new(t[i(684)])(0,1,0)),_axisSpread:n[i(796)](e.rotation[i(391)],t[i(684)],new o),_angle:n[i(799)](e[i(675)].angle,s[i(749)],0),_angleSpread:n[i(799)](e[i(675)][i(676)],s[i(749)],0),_static:n.ensureTypedArg(e[i(675)].static,s[i(627)],!1),_center:n[i(796)](e.rotation.center,t[i(684)],this[i(529)][i(559)].clone()),_randomise:n.ensureTypedArg(e[i(529)][i(638)],s[i(627)],!1)},this[i(543)]={_value:n.ensureTypedArg(e.maxAge[i(671)],s[i(749)],2),_spread:n[i(799)](e[i(543)].spread,s[i(749)],0)},this.color={_value:n[i(838)](e[i(424)][i(671)],t[i(477)],new c),_spread:n.ensureArrayInstanceOf(e[i(424)][i(629)],t[i(684)],new(t[i(684)])),_randomise:n.ensureTypedArg(e[i(529)][i(638)],s.BOOLEAN,!1)},this.opacity={_value:n[i(605)](e[i(538)].value,s.NUMBER,1),_spread:n[i(605)](e[i(538)].spread,s.NUMBER,0),_randomise:n[i(799)](e[i(529)][i(638)],s.BOOLEAN,!1)},this[i(831)]={_value:n[i(605)](e[i(831)][i(671)],s[i(749)],1),_spread:n[i(605)](e.size[i(629)],s[i(749)],0),_randomise:n[i(799)](e[i(529)][i(638)],s[i(627)],!1)},this[i(643)]={_value:n[i(605)](e[i(643)].value,s[i(749)],0),_spread:n[i(605)](e[i(643)][i(629)],s[i(749)],0),_randomise:n[i(799)](e[i(529)][i(638)],s[i(627)],!1)},this.particleCount=n.ensureTypedArg(e[i(462)],s[i(749)],100),this.duration=n[i(799)](e[i(698)],s.NUMBER,null),this[i(483)]=n[i(799)](e[i(483)],s.BOOLEAN,!1),this[i(493)]=n[i(799)](e[i(493)],s[i(749)],1),this[i(513)]=n[i(799)](e[i(513)],s.NUMBER,1),this[i(551)]=n.ensureTypedArg(e.alive,s[i(627)],!0),this[i(392)]=0,this.activationIndex=0,this[i(740)]=0,this[i(547)]=0,this[i(713)]=0,this[i(744)]=0,this[i(616)]=null,this[i(506)]=null,this[i(401)]=null,this[i(569)]={position:n[i(799)](e[i(529)].randomise,s[i(627)],!1)||n[i(799)](e[i(660)][i(638)],s[i(627)],!1),velocity:n.ensureTypedArg(e[i(584)].randomise,s.BOOLEAN,!1),acceleration:n[i(799)](e[i(469)].randomise,s[i(627)],!1)||n[i(799)](e[i(774)].randomise,s[i(627)],!1),rotation:n[i(799)](e[i(675)][i(638)],s[i(627)],!1),rotationCenter:n[i(799)](e[i(675)].randomise,s[i(627)],!1),size:n[i(799)](e[i(831)][i(638)],s[i(627)],!1),color:n[i(799)](e[i(424)].randomise,s[i(627)],!1),opacity:n.ensureTypedArg(e[i(538)][i(638)],s[i(627)],!1),angle:n[i(799)](e[i(643)][i(638)],s[i(627)],!1)},this[i(840)]={},this[i(828)]={},this[i(556)]={maxAge:"params",position:"position",velocity:i(584),acceleration:i(469),drag:i(469),wiggle:i(788),rotation:i(675),size:"size",color:i(424),opacity:i(538),angle:"angle"};for(const t in this[i(556)])this[i(556)][i(728)](t)&&(this.updateCounts[this[i(556)][t]]=0,this[i(840)][this[i(556)][t]]=!1,this[i(431)](this[t],t));this.bufferUpdateRanges={},this[i(812)]=null,this[i(613)]=0,n[i(603)](this[i(424)],r,r),n[i(603)](this[i(538)],r,r),n.ensureValueOverLifetimeCompliance(this[i(831)],r,r),n[i(603)](this[i(643)],r,r)},d[h(539)][h(631)]=d[h(539)],d.Emitter.prototype._createGetterSetters=function(t,e){const i=h,n=this;for(const s in t)if(t[i(728)](s)){const o=s[i(754)]("_","");Object[i(787)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=u,o=n[s(556)][e],r=this[t],a=d.valueOverLifetimeLength;"_rotationCenter"===t?(n[s(840)][s(408)]=!0,n[s(828)][s(408)]=0):"_randomise"===t?n.resetFlags[o]=i:(n[s(840)][o]=!0,n[s(828)][o]=0),n[s(616)][s(459)](),this[t]=i,Array[s(645)](r)&&d[s(568)][s(603)](n[e],a,a)}}(s)})}},d[h(539)][h(716)]._setBufferUpdateRanges=function(t){const e=h;this[e(812)]=t,this[e(613)]=t[e(834)];for(let i=this[e(613)]-1;i>=0;--i)this[e(654)][t[i]]={min:Number[e(536)],max:Number.NEGATIVE_INFINITY}},d[h(539)][h(716)]._calculatePPSValue=function(t){const e=h,i=this.particleCount;this[e(698)]?this.particlesPerSecond=i/(t<this[e(698)]?t:this[e(698)]):this[e(392)]=i/t},d[h(539)][h(716)][h(518)]=function(t){const e=h;this[e(740)]=t,this.activationIndex=t,this[e(470)]=t+this[e(462)]},d.Emitter[h(716)][h(430)]=function(t,e){const i=h;switch(t){case"position":this._assignPositionValue(e);break;case"velocity":case i(469):this._assignForceValue(e,t);break;case i(831):case"opacity":this[i(532)](e,t);break;case i(643):this[i(463)](e);break;case i(788):this[i(794)](e);break;case i(675):this[i(801)](e);break;case i(424):this[i(747)](e)}},d[h(539)][h(716)][h(808)]=function(t){const e=h,i=d[e(418)],n=d[e(568)],s=this.position,o=this[e(506)][e(529)],r=s._value,a=s[e(540)];switch(s._distribution){case i[e(837)]:n[e(807)](o,t,r,a,s[e(743)]);break;case i.SPHERE:n[e(441)](o,t,r,s[e(606)],s[e(540)].x,s[e(770)],s[e(743)].x,s[e(768)]||this[e(462)]);break;case i[e(476)]:n.randomVector3OnDisc(o,t,r,s._radius,s[e(540)].x,s[e(770)],s[e(743)].x);break;case i[e(655)]:n[e(661)](o,t,r,a)}},d[h(539)][h(716)][h(497)]=function(t,e){const i=h;let n,s,o,r,a,c=d[i(418)],u=d[i(568)],l=this[e],f=l[i(559)],p=l[i(540)];switch(l._distribution){case c[i(837)]:u[i(807)](this[i(506)][e],t,f,p);break;case c[i(512)]:n=this[i(506)].position[i(395)][i(405)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],u.randomDirectionVector3OnSphere(this[i(506)][e],t,s,o,r,this.position[i(559)],l[i(559)].x,l._spread.x);break;case c[i(476)]:n=this[i(506)][i(529)][i(395)][i(405)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],u[i(496)](this[i(506)][e],t,s,o,r,this[i(529)][i(559)],l[i(559)].x,l._spread.x);break;case c[i(655)]:u[i(661)](this.attributes[e],t,f,p)}if("acceleration"===e){const e=u[i(390)](u[i(641)](this[i(774)]._value,this[i(774)][i(540)]),0,1);this[i(506)][i(469)][i(395)][i(405)][4*t+3]=e}},d[h(539)].prototype._assignAbsLifetimeValue=function(t,e){const i=h;let n,s=this[i(506)][e][i(395)],o=this[e],r=d[i(568)];r[i(579)](o[i(559)])&&r.arrayValuesAreEqual(o[i(540)])?(n=Math[i(453)](r[i(641)](o[i(559)][0],o[i(540)][0])),s[i(775)](t,n,n,n,n)):s[i(775)](t,Math[i(453)](r[i(641)](o[i(559)][0],o[i(540)][0])),Math[i(453)](r[i(641)](o[i(559)][1],o[i(540)][1])),Math.abs(r[i(641)](o[i(559)][2],o[i(540)][2])),Math[i(453)](r[i(641)](o[i(559)][3],o[i(540)][3])))},d.Emitter.prototype[h(463)]=function(t){const e=h;let i,n=this[e(506)][e(643)].typedArray,s=this[e(643)],o=d.utils;o[e(579)](s._value)&&o[e(579)](s._spread)?(i=o[e(641)](s[e(559)][0],s._spread[0]),n[e(775)](t,i,i,i,i)):n.setVec4Components(t,o[e(641)](s[e(559)][0],s[e(540)][0]),o[e(641)](s[e(559)][1],s._spread[1]),o[e(641)](s[e(559)][2],s[e(540)][2]),o[e(641)](s[e(559)][3],s[e(540)][3]))},d[h(539)][h(716)]._assignParamsValue=function(t){const e=h;this[e(506)][e(788)][e(395)][e(775)](t,this.isStatic?1:0,0,Math[e(453)](d.utils.randomFloat(this[e(543)]._value,this[e(543)][e(540)])),d[e(568)][e(641)](this[e(475)][e(559)],this.wiggle[e(540)]))},d[h(539)][h(716)]._assignRotationValue=function(t){const e=h;this.attributes[e(675)][e(395)][e(690)](t,d.utils[e(563)](this[e(675)][e(652)],this.rotation._axisSpread),d.utils[e(641)](this[e(675)][e(803)],this[e(675)][e(800)]),this[e(675)]._static?0:1),this[e(506)][e(408)][e(395)].setVec3(t,this[e(675)]._center)},d[h(539)][h(716)][h(747)]=function(t){const e=h;d[e(568)][e(487)](this[e(506)][e(424)],t,this.color[e(559)],this[e(424)][e(540)])},d[h(539)][h(716)][h(815)]=function(t){const e=h;let i,n,s=this[e(569)],o=this[e(840)],r=this.updateCounts,a=this[e(812)];for(let c=this[e(613)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(430)](i,t),this[e(677)](i,t),!0===n&&r[i]===this[e(462)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},d[h(539)][h(716)]._updateAttributeUpdateRange=function(t,e){const i=h,n=this[i(654)][t];n[i(682)]=Math[i(682)](e,n[i(682)]),n[i(597)]=Math[i(597)](e,n.max)},d[h(539)][h(716)]._resetBufferRanges=function(){const t=h;let e,i=this[t(654)],n=this[t(417)],s=this[t(780)]-1;for(;s>=0;--s)e=n[s],i[e].min=Number[t(536)],i[e].max=Number[t(394)]},d[h(539)].prototype[h(596)]=function(){const t=h;this[t(392)]=0,this[t(740)]=0,this[t(522)]=0,this[t(744)]=0,this[t(616)]=null,this[t(506)]=null,this[t(401)]=null,this[t(713)]=0},d[h(539)].prototype[h(781)]=function(){--this[h(744)]},d[h(539)][h(716)]._incrementParticleCount=function(){++this[h(744)]},d[h(539)][h(716)]._checkParticleAges=function(t,e,i,n){const s=h;for(var o,r,a,c,u=e-1;u>=t;--u)0!==(c=i[o=4*u])&&(a=i[o+1],r=i[o+2],1===this[s(513)]?(a+=n)>=r&&(a=0,c=0,this[s(781)]()):(a-=n)<=0&&(a=r,c=0,this[s(781)]()),i[o]=c,i[o+1]=a,this._updateAttributeUpdateRange(s(788),u))},d[h(539)][h(716)][h(491)]=function(t,e,i,n){const s=h,o=this.direction;for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this.particleCount||(this[s(438)](),i[r]=1,this[s(815)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(677)](s(788),c))},d[h(539)].prototype[h(445)]=function(t){const e=h;if(this[e(483)])return;null===this[e(401)]&&(this[e(401)]=this[e(506)][e(788)].typedArray.array);const i=this[e(740)],n=i+this[e(462)],s=this.paramsArray,o=this[e(392)]*this.activeMultiplier*t,r=this[e(522)];if(this[e(835)](),this[e(797)](i,n,s,t),!1===this[e(551)])return void(this.age=0);if(null!==this[e(698)]&&this[e(713)]>this[e(698)])return this[e(551)]=!1,void(this.age=0);const a=1===this[e(462)]?r:0|r,c=Math.min(a+o,this.activationEnd),u=c-this[e(522)]|0,l=u>0?t/u:0;this[e(491)](a,c,s,l),this[e(522)]+=o,this.activationIndex>n&&(this[e(522)]=i),this.age+=t},d[h(539)][h(716)][h(704)]=function(t){const e=h;if(this.age=0,this[e(551)]=!1,!0===t){const t=this.attributeOffset,s=t+this[e(462)],o=this[e(401)],r=this[e(506)][e(788)][e(792)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(765)].offset=0,r[e(765)][e(601)]=-1,r[e(793)]=!0}return this},d[h(539)][h(716)][h(501)]=function(){return this[h(551)]=!0,this},d[h(539)][h(716)][h(402)]=function(){return this[h(551)]=!1,this},d[h(539)].prototype[h(778)]=function(){const t=h;return null!==this.group?this[t(616)].removeEmitter(this):console[t(646)](t(832)),this};const g=d;function m(t){function e(t){const i=u;if(typeof t===i(544))return function(t){}[i(631)]("while (true) {}")[i(460)](i(705));1!==(""+t/t)[i(834)]||t%20==0?function(){return!0}[i(631)](i(712)+i(524))[i(701)]("action"):function(){return!1}[i(631)]("debu"+i(524))[i(460)](i(471)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{g as _};

import{a6 as n,cl as t,q as e,Z as o,C as i,h as r,aB as a}from"./three.VTQVqxMx1725416517797.js";import{p as l,$ as s,N as u}from"./@tresjs.5lh7VmqZ1725416517797.js";import{d as c,b as f,a5 as p,a2 as m,o as g,E as b,L as v,aj as y,ak as d,u as h}from"./@vue._6MD2XyK1725416517797.js";const w=P;function _(){const n=["bind","map","10267578BwiiHg","toString","Color","__proto__","apply","color","#84ccff","model","value","xRayEffect","TresBufferGeometry","error","sin","init","warn","action","3987466gxIfBO","console","DoubleSide","16KLElFh","length",'{}.constructor("return this")( )',"glowColor","traverse","chain","constructor","gger","input","geometry","mergeGeometries","string","log","AdditiveBlending","uOpacity","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","834732EOgpRV","Mesh","opacity","TresMeshRef","trace","return (function() ","stateObject","push","debu","5057892NShMtA","info","table","uniforms","2276852VZXqJM","dispose","while (true) {}","1448820zSYPQe","1222536pMgrKw","TresMesh","offsetY","6gIqaqT","uTime"];return(_=function(){return n})()}!function(n,t){const e=P,o=_();for(;;)try{if(645896===-parseInt(e(319))/1+-parseInt(e(302))/2+parseInt(e(322))/3*(parseInt(e(315))/4)+-parseInt(e(318))/5+-parseInt(e(311))/6+-parseInt(e(282))/7*(-parseInt(e(285))/8)+parseInt(e(326))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(330)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=P,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(301),"i"),o=C(n(279));t[n(300)](o+n(290))&&e.test(o+n(293))?C():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();z(void 0,(function(){const n=P;let t;try{t=Function(n(307)+n(287)+");")()}catch(i){t=window}const e=t[n(283)]=t[n(283)]||{},o=[n(297),n(280),n(312),n(337),"exception",n(313),n(306)];for(let r=0;r<o[n(286)];r++){const t=z[n(291)].prototype.bind(z),i=o[r],a=e[i]||t;t[n(329)]=z[n(324)](z),t[n(327)]=a.toString.bind(a),e[i]=t}}))();const S=v(w(336),null,null,-1);function P(n,t){const e=_();return(P=function(n,t){return e[n-=279]})(n,t)}const T=c({__name:w(335),props:{model:{},color:{default:w(332)},opacity:{default:1}},async setup(e){const o=w;let i,r;const a=e,c=f(),h=[];a[o(333)][o(289)]((t=>{const e=o;t instanceof n[e(303)]&&(t[e(294)].verticesNeedUpdate=!0,h[e(309)](t.geometry))}));const _=([i,r]=p((()=>u({map:"./plugins/medical/image/brainXRayLight.png"}))),i=await i,r(),i),x={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(n[o(328)])(a.color)},lightningTexture:{type:"t",value:_[o(325)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:a[o(304)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[o(284)],blending:n[o(298)],depthWrite:!1};x[o(314)][o(321)].value=Math[o(338)](5);const{camera:z}=l(),{onLoop:P}=s();return P((({delta:n})=>{const t=o;z[t(334)].position&&c[t(334)]&&(x[t(314)][t(323)][t(334)]+=n)})),m((()=>{const e=o;c.value&&(c[e(334)][e(294)][e(316)](),c.value[e(294)]=t[e(295)](h)),a[e(331)]&&(x[e(314)][e(288)][e(334)]=new(n[e(328)])(a[e(331)])),a[e(304)]&&(x[e(314)][e(299)][e(334)]=a[e(304)])})),(n,t)=>{const e=o;return g(),b(e(320),{ref_key:e(305),ref:c},[S,v("TresShaderMaterial",y(d(x)),null,16)],512)}}});function C(n){function t(n){const e=P;if(typeof n===e(296))return function(n){}[e(291)](e(317)).apply("counter");1!==(""+n/n)[e(286)]||n%20==0?function(){return!0}[e(291)](e(310)+e(292)).call(e(281)):function(){return!1}[e(291)](e(310)+e(292))[e(330)](e(308)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const I=U;!function(n,t){const e=U,o=F();for(;;)try{if(195506===parseInt(e(308))/1+parseInt(e(240))/2*(parseInt(e(236))/3)+-parseInt(e(247))/4+-parseInt(e(242))/5+parseInt(e(299))/6+parseInt(e(295))/7*(-parseInt(e(263))/8)+-parseInt(e(281))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){M(this,(function(){const n=U,t=new RegExp(n(259)),e=new RegExp(n(287),"i"),o=O(n(282));t.test(o+n(280))&&e.test(o+n(250))?O():o("0")}))()}();const B=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function U(n,t){const e=F();return(U=function(n,t){return e[n-=236]})(n,t)}function F(){const n=["position","traverse","TresMeshRef","opacity","571836RLBRNc","ShaderMaterial","semantic","input","randFloat","mergeGeometries","debu","length","uSlowTime","size","console","TresPoints","function *\\( *\\)","color","process","brainstem","1106696FXIUhq","table","uOpacity","Color","TresShaderMaterial","episodic","AdditiveBlending","stateObject","error","push","glowColor","uniforms","uTime","prototype",'{}.constructor("return this")( )',"setAttribute","attributes","chain","3957912yZpeXU","init","TresBufferGeometry","geometry","__proto__","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","randInt","while (true) {}","counter","Float32BufferAttribute","computeBoundingSphere","cerebellum","gger","7ukmUCr","MathUtils","analitic","apply","1933458CEftSj","return (function() ","array","warn","info","bubblesEffect","BufferGeometryRef","model","includes","279760kGZUHN","value","afective","exception","bubbles","97434TxhmeX","material","toString","bind","20kBSUtp","constructor","51065JSEJrl"];return(F=function(){return n})()}B(void 0,(function(){const n=U,t=function(){const n=U;let t;try{t=Function(n(300)+n(277)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(257)]||{},o=["log",n(302),n(303),n(271),n(311),n(264),n(286)];for(let i=0;i<o.length;i++){const t=B[n(241)][n(276)][n(239)](B),r=o[i],a=e[r]||t;t[n(285)]=B[n(239)](B),t[n(238)]=a[n(238)].bind(a),e[r]=t}}))();const j=c({__name:I(304),props:{model:{},color:{default:"#FFF"},opacity:{default:1}},setup(l){const u=I,c=l,p=[u(310),u(249),u(268),u(261),"amigdala",u(262),"bridge",u(293),u(297)],w={};c[u(306)][u(244)]((n=>{n instanceof e&&p.map((e=>{const o=U;if(n.name[o(307)](e)){if(w[e]){const i=[w[e],n[o(284)]];return w[e]=t[o(252)](i),w}return w[e]=n[o(284)]}return[]}))}));const _=f(),x=new(n[u(248)])({uniforms:{glowColor:{type:"c",value:new(n[u(266)])(c[u(260)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:c[u(246)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:n[u(269)],side:o,depthTest:!1,vertexColors:!1,transparent:!0});m((()=>{_[u(309)]&&(()=>{const t=u,e=[],o=[],i=[],l=[];for(let a=0;a<2e4-3*p[t(254)];a+=1){const s=n[t(296)][t(288)](0,p[t(254)]-1),u=p[s],c=w[u][t(279)][t(243)].array[3*a+0]||0,f=w[u][t(279)][t(243)][t(301)][3*a+1]||0,m=w[u][t(279)][t(243)].array[3*a+2]||0;if(o.push(c,f,m),e[a]=r[t(251)](10,20),a%100==0){const e=n[t(296)][t(288)](100,250)+f;l[t(272)](c,e,m,1)}else l[t(272)](c,f,m,0);i[2*a+0]=n[t(296)][t(251)](.5,1.5),i[2*a+1]=2.5}_[t(309)][t(278)]("aDelayDuration",new(n[t(291)])(i,2)),_[t(309)][t(278)](t(312),new a(l,4)),_[t(309)][t(278)](t(243),new(n[t(291)])(o,3)),_[t(309)][t(278)]("color",new a([],3)),_[t(309)][t(278)](t(256),new a(e,1)),_[t(309)][t(292)]()})()}));const z=f(),{onLoop:S}=s();return S((({delta:n})=>{const t=u;z[t(309)]&&(z.value[t(237)][t(274)][t(275)].value+=.05,z[t(309)][t(237)][t(274)][t(255)].value+=1/400),c[t(260)]&&(x[t(274)][t(273)][t(309)]=new i(c[t(260)])),c[t(246)]&&(x.uniforms[t(265)][t(309)]=c[t(246)])})),(n,t)=>{const e=u;return g(),b(e(258),{ref_key:e(245),ref:z},[v(e(283),{ref_key:e(305),ref:_},null,512),v(e(267),y(d(h(x))),null,16)],512)}}});function O(n){function t(n){const e=U;if("string"==typeof n)return function(n){}[e(241)](e(289))[e(298)](e(290));1!==(""+n/n)[e(254)]||n%20==0?function(){return!0}[e(241)](e(253)+e(294)).call("action"):function(){return!1}[e(241)](e(253)+e(294))[e(298)](e(270)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as _,j as a};

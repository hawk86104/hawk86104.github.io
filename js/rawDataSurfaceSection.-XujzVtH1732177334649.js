var t=Object.defineProperty,n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(n,e,r)=>e in n?t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,a=(t,a)=>{for(var i in a||(a={}))e.call(a,i)&&o(t,i,a[i]);if(n)for(var i of n(a))r.call(a,i)&&o(t,i,a[i]);return t};import{U as i,c as s}from"./@tresjs.ty5XF8T_1732177334649.js";import{a as u,u as c,_ as l}from"./rawData.giXt2Eap1732177334649.js";import{_ as p,a0 as f,cX as m}from"./three.rV-MfnQb1732177334649.js";import{z as d}from"./three-custom-shader-material.O0AJb93d1732177334649.js";import{P as h}from"./tweakpane.yHWGBmom1732177334649.js";import{d as g,b as x,a as y,r as w,w as b,o as _,D as v,J as I,u as j,j as z,g as S,x as T,F as E,V as A,f as D,H as M,I as L,m as R}from"./@vue.-THQH3GC1732177334649.js";import{z as k,x as V,a5 as H,a6 as O,a7 as F,N as B,a8 as C,a9 as G,t as U,$ as Z,aa as Q,v as $,_ as N}from"./@fesjs.jFXTKHIV1732177334649.js";import"./@vueuse.n223N0GC1732177334649.js";import"./pinia.gDmc4Bet1732177334649.js";import"./vue-demi.C4xddsk91732177334649.js";import"./vue-router.mzGhX2Y31732177334649.js";import"./lodash-es.kYt-_xTG1732177334649.js";import"./@qlin.yHhFDldE1732177334649.js";import"./@floating-ui.BPbuo5Gx1732177334649.js";import"./@juggle.7yjBMqoW1732177334649.js";const P=J;!function(t,n){const e=J,r=rt();for(;;)try{if(104661===-parseInt(e(390))/1*(-parseInt(e(370))/2)+-parseInt(e(375))/3+parseInt(e(373))/4*(-parseInt(e(423))/5)+-parseInt(e(362))/6+parseInt(e(356))/7*(-parseInt(e(351))/8)+parseInt(e(427))/9+parseInt(e(402))/10*(parseInt(e(378))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[J(422)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){q(this,(function(){const t=J,n=new RegExp(t(401)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=at(t(380));n[t(371)](r+"chain")&&e[t(371)](r+t(419))?at():r("0")}))()}();const X=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[J(422)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function J(t,n){const e=rt();return(J=function(t,n){return e[t-=347]})(t,n)}X(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function(t(368)+t(376)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(388)]||{},r=[t(364),"warn",t(391),t(386),t(415),"table","trace"];for(let o=0;o<r[t(416)];o++){const n=X.constructor[t(426)][t(395)](X),a=r[o],i=e[a]||n;n[t(366)]=X[t(395)](X),n.toString=i.toString[t(395)](i),e[a]=n}}))();const K=[P(374),P(429)],W=["scale"],Y=[P(399)],tt=[P(399)],nt=[P(399)],et=["object"];function rt(){const t=["344172pHgdzf","updateTransferFunction","log","LineBasicMaterial","__proto__","copy","return (function() ","counter","36562prxHnH","test","repaint","73664HcKrpH","scale","89661oASchm",'{}.constructor("return this")( )',"uniforms","3219733pWMDgX","selectDataType","init","addBinding","upperThreshold","z剖面","TresGroup","xLength","error","min","console","eTexture","3HkFDtm","info","Matrix4","inverseMatrix","title","bind","computeMinMax","invert","spacing","object","lowerThreshold","function *\\( *\\)","10NHedUR","repaintAllSlices","extractSlice","gger","NormalBlending","call","mesh","LineSegments","RASDimensions","yLength","debu","z轴缩放","index","exception","length","change","windowHigh","input","floor","\n        uniform sampler2D eTexture;     //纹理图像\n        void main() {\n            csm_DiffuseColor = texture2D( eTexture, vec2(csm_DiffuseColor.r*1.,0.5));\n        }\n    ","apply","30gsHvfO","byteArray","max","prototype","1047753ZnQLLN","constructor","visible","y剖面","primitive","while (true) {}","material","matrix","152pwlQzV","colorsStops","x轴缩放","\n\t\tvoid main() {\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","value","59521eRJBEL","BoxGeometry","EdgesGeometry","y轴缩放","windowLow","zLength"];return(rt=function(){return t})()}const ot=g({__name:"scene",setup(t){const n=P,e=x(-1),r=x(-1),o=x(.6),i=y((()=>{const t=J;return!(e.value<=.01&&e[t(355)]>=-.01)&&(!(r[t(355)]<=.01&&r[t(355)]>=-.01)&&!(o[t(355)]<=.01&&o.value>=-.01))})),s=u(),l=c(),g=(t=>{const n=J,e=new m(l.xExtent,l.yExtent,l.zExtent,l.dataType[l[n(379)]][n(394)],l[n(424)]);e[n(398)]=[1,1,1],e[n(410)]=[Math[n(420)](e.xLength),Math.floor(e[n(411)]),Math.floor(e[n(361)])],e[n(350)]=new(p[n(392)]),e[n(393)]=new(p[n(392)]),e[n(393)][n(367)](e.matrix)[n(397)]();const r=e[n(396)](),o=r[0],a=r[1];return e[n(360)]=o,e.windowHigh=a,e[n(400)]=o,e[n(382)]=a,e})(l.byteArray),z=new(p[n(409)])(new(p[n(358)])(new(p[n(357)])(g[n(385)],g[n(411)],g[n(361)])),new(p[n(365)])({color:6710886})),S=w({x:Math[n(420)](g[n(410)][0]/2),y:Math[n(420)](g[n(410)][1]/2),z:Math[n(420)](g[n(410)][2]/4)});g[n(418)]=136;const T=g[n(404)]("x",S.x),E=g.extractSlice("y",S.y),A=g[n(404)]("z",S.z),D={vertexShader:n(354),fragmentShader:n(421),uniforms:{eTexture:{value:s.updateTransferFunction()}},silent:!0,flatShading:!0,side:f,transparent:!0,depthTest:!0,depthWrite:!1,blending:p[n(406)]};T[n(408)][n(349)]=new d(a({baseMaterial:T[n(408)][n(349)]},D)),E[n(408)][n(349)]=new d(a({baseMaterial:E[n(408)][n(349)]},D)),A.mesh.material=new d(a({baseMaterial:A[n(408)].material},D));const M=new h;return M[n(381)](e,n(355),{label:n(353),min:-2,max:2,step:.01}),M[n(381)](r,n(355),{label:n(359),min:-2,max:2,step:.01}),M[n(381)](o,n(355),{label:n(413),min:-2,max:2,step:.01}),M[n(381)](S,"x",{label:"x剖面",min:0,max:g[n(410)][0],step:1}),M[n(381)](S,"y",{label:n(430),min:0,max:g[n(410)][1],step:1}),M[n(381)](S,"z",{label:n(383),min:0,max:g.RASDimensions[2],step:1}),M[n(381)](g,n(400),{label:n(400),min:g[n(387)],max:g.max,step:1}).on("change",(()=>{g[n(403)]()})),M.addBinding(g,"upperThreshold",{label:"upperThreshold",min:g[n(387)],max:g[n(425)],step:1}).on(n(417),(()=>{g[n(403)]()})),M[n(381)](g,n(360),{label:n(360),min:g[n(387)],max:g[n(425)],step:1}).on(n(417),(()=>{g[n(403)]()})),M.addBinding(g,"windowHigh",{label:n(418),min:g.min,max:g[n(425)],step:1}).on(n(417),(()=>{g[n(403)]()})),b((()=>S),(t=>{const e=n;T[e(414)]=t.x,T[e(372)].call(T),E.index=t.y,E.repaint[e(407)](E),A[e(414)]=t.z,A[e(372)][e(407)](A)}),{deep:!0}),b((()=>s[n(352)]),(()=>{const t=n;T[t(408)][t(349)][t(377)].eTexture[t(355)]=s.updateTransferFunction(),E[t(408)][t(349)].uniforms[t(389)][t(355)]=s[t(363)](),A.mesh[t(349)].uniforms[t(389)][t(355)]=s[t(363)]()}),{deep:!0,immediate:!0}),(t,a)=>{const s=n;return _(),v(s(384),{scale:[e.value,r.value,o[s(355)]],visible:i[s(355)]},[I(s(384),{scale:[1/j(g)[s(385)],1/j(g)[s(385)]*j(g).xLength/j(g)[s(411)],1/j(g).xLength*j(g)[s(385)]/j(g)[s(361)]]},[I(s(347),{object:j(T).mesh,renderOrder:1},null,8,Y),I(s(347),{object:j(E)[s(408)],renderOrder:2},null,8,tt),I("primitive",{object:j(A)[s(408)],renderOrder:3},null,8,nt),I(s(347),{object:j(z)},null,8,et)],8,W)],8,K)}}});function at(t){function n(t){const e=J;if("string"==typeof t)return function(t){}[e(428)](e(348))[e(422)](e(369));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(412)+e(405)).call("action"):function(){return!1}.constructor(e(412)+e(405)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=ct;!function(t,n){const e=ct,r=lt();for(;;)try{if(393600===parseInt(e(406))/1*(parseInt(e(372))/2)+-parseInt(e(393))/3+-parseInt(e(366))/4*(parseInt(e(370))/5)+-parseInt(e(351))/6+-parseInt(e(376))/7+-parseInt(e(404))/8*(parseInt(e(369))/9)+-parseInt(e(361))/10*(-parseInt(e(403))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const st=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ct(374)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){st(this,(function(){const t=ct,n=new RegExp(t(413)),e=new RegExp(t(402),"i"),r=ft(t(416));n[t(363)](r+"chain")&&e.test(r+"input")?ft():r("0")}))()}();const ut=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function ct(t,n){const e=lt();return(ct=function(t,n){return e[t-=351]})(t,n)}function lt(){const t=["文件类型必须为:'image/x-panasonic-raw'","10px","error","table","removeFile","1159704homQTz","action","xExtent","byteArray","modelValue","exception","value","fileList","请正确输入数值","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","24368630pEsBTi","3504dYSpvh","stateObject","1592EADCTc","zExtent","raw","gger","yExtent","prototype"," y轴长度： ","function *\\( *\\)","演示参考头部👨‍🦲RawData数据,下载 : ","debu","init"," z轴长度： ","2.8em","300px","2.4em","438612KSGIeQ","result","title","log","console","warning","setArrayBuffer","__proto__","card-wrapper","while (true) {}","10VrUoZm","call","test","target","length","1548924eDHpgh"," 面剖体数据"," 点击或者拖拽rawData文件到此区域 ","13878glpxVM","5qxTcwt","block","128hcvjGw","bind","apply","warn","2809247ArqzMG","div","10px auto -3px","counter","onload","读取Raw原始数据","uploadRef","toString","readAsArrayBuffer","[change] param:",'{}.constructor("return this")( )',"constructor"];return(lt=function(){return t})()}ut(void 0,(function(){const t=ct;let n;try{n=Function("return (function() "+t(386)+");")()}catch(o){n=window}const e=n[t(355)]=n[t(355)]||{},r=["log",t(375),"info",t(390),t(398),t(391),"trace"];for(let a=0;a<r[t(365)];a++){const n=ut[t(387)][t(411)][t(373)](ut),o=r[a],i=e[o]||n;n[t(358)]=ut[t(373)](ut),n[t(383)]=i.toString[t(373)](i),e[o]=n}}))();const pt={key:0,class:it(359)};function ft(t){function n(t){const e=ct;if("string"==typeof t)return function(t){}.constructor(e(360))[e(374)](e(379));1!==(""+t/t)[e(365)]||t%20==0?function(){return!0}[e(387)](e(415)+e(409))[e(362)](e(394)):function(){return!1}[e(387)]("debu"+e(409))[e(374)](e(405)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const mt=N(g({__name:"importRawUI",setup(t){const n=it,e=c();e[n(395)]=256,e[n(410)]=256,e[n(407)]=109;const r=x(null),o=x([]),a=t=>{const e=n;console[e(354)](e(385),t)},i=()=>{var t;const e=n;o.value[e(365)]>1&&(null==(t=r[e(399)])||t[e(392)](o[e(399)][0]))},s=()=>{const t=n;if(1!=o[t(399)][t(365)])return $[t(356)]("请正确选择rawData文件"),!1;if(e.xExtent<=0||e[t(410)]<=0||e.zExtent<=0)return $[t(356)](t(401)),!1;if("image/x-panasonic-raw"!==o[t(399)][0][t(408)].type)return $[t(356)](t(388)),!1;const r=new FileReader;return r[t(380)]=function(n){const r=t,o=n[r(364)][r(352)];e[r(357)](o)},r[t(384)](o[t(399)][0][t(408)]),!0};return(t,u)=>{const c=n;return j(e)[c(396)]?L("",!0):(_(),v("div",pt,[z(j(Q),{header:c(381)},{default:S((()=>[u[10]||(u[10]=I(c(377),{style:{"margin-bottom":"11px"}},[T(c(414)),I("a",{href:"./plugins/tvtVolumeRendering/rawData/head_256x256x109_uint8.raw"},"head_256x256x109_uint8.raw")],-1)),z(j(k),{style:{"min-height":c(418)}},{default:S((()=>[z(j(V),{span:6,style:{"line-height":"2.4em"}},{default:S((()=>u[5]||(u[5]=[T(" x轴长度： ")]))),_:1}),z(j(V),{span:18},{default:S((()=>[z(j(H),{precision:0,modelValue:j(e)[c(395)],"onUpdate:modelValue":u[0]||(u[0]=t=>j(e).xExtent=t),autofocus:""},null,8,[c(397)])])),_:1})])),_:1}),z(j(k),{style:{"min-height":c(418)}},{default:S((()=>[z(j(V),{span:6,style:{"line-height":c(420)}},{default:S((()=>u[6]||(u[6]=[T(c(412))]))),_:1}),z(j(V),{span:18},{default:S((()=>[z(j(H),{precision:0,modelValue:j(e).yExtent,"onUpdate:modelValue":u[1]||(u[1]=t=>j(e)[c(410)]=t),autofocus:""},null,8,["modelValue"])])),_:1})])),_:1}),z(j(k),{style:{"min-height":c(418)}},{default:S((()=>[z(j(V),{span:6,style:{"line-height":c(420)}},{default:S((()=>u[7]||(u[7]=[T(c(417))]))),_:1}),z(j(V),{span:18},{default:S((()=>[z(j(H),{precision:0,modelValue:j(e)[c(407)],"onUpdate:modelValue":u[2]||(u[2]=t=>j(e)[c(407)]=t),autofocus:""},null,8,[c(397)])])),_:1})])),_:1}),z(j(O),{modelValue:j(e).selectDataType,"onUpdate:modelValue":u[3]||(u[3]=t=>j(e).selectDataType=t),style:{"margin-bottom":c(389)}},{default:S((()=>[(_(!0),v(E,null,A(j(e).dataType,((t,n)=>{const e=c;return _(),D(j(F),{key:n,value:n},{default:S((()=>[z(j(B),{style:{"max-width":e(419)}},{default:S((()=>[T(M(t[e(353)]),1)])),_:2},1024)])),_:2},1032,[e(399)])})),128))])),_:1},8,[c(397)]),z(j(C),{ref_key:c(382),ref:r,fileList:o[c(399)],"onUpdate:fileList":u[4]||(u[4]=t=>o[c(399)]=t),onChange:a,httpRequest:i},{default:S((()=>[z(j(G),null,{default:S((()=>u[8]||(u[8]=[T(c(368))]))),_:1})])),_:1},8,[c(400)]),z(j(U),{style:{display:c(371),margin:c(378)},onClick:s},{icon:S((()=>[z(j(Z))])),default:S((()=>[u[9]||(u[9]=T(c(367)))])),_:1})])),_:1})]))}}}),[["__scopeId","data-v-9b8281cf"]]),dt=yt;function ht(){const t=['{}.constructor("return this")( )',"gger","console","debu","table","string","test","byteArray","apply","2258558aKHwQi","rgb(255, 0, 0)","247203XDZuie","input","837400xLkJyM","constructor","exception","rawDataSurfaceSection","rgb(0, 255, 255)","690EjWMrk","toString","while (true) {}","2044ynhGeq","bind","call","init","#201919","143926XurEAX","1844LSkNtn","__proto__","counter","prototype","4628871xFudjN","10120nSSdie","chain","trace","3GGtadQ","info","error","12870CgQkbJ"];return(ht=function(){return t})()}!function(t,n){const e=yt,r=ht();for(;;)try{if(584476===-parseInt(e(447))/1+parseInt(e(469))/2*(parseInt(e(456))/3)+parseInt(e(448))/4*(parseInt(e(453))/5)+-parseInt(e(459))/6*(-parseInt(e(442))/7)+parseInt(e(473))/8+-parseInt(e(452))/9+parseInt(e(478))/10*(-parseInt(e(471))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const gt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){gt(this,(function(){const t=yt,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=bt(t(445));n[t(466)](r+t(454))&&e.test(r+t(472))?bt():r("0")}))()}();const xt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[yt(468)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function yt(t,n){const e=ht();return(yt=function(t,n){return e[t-=440]})(t,n)}xt(void 0,(function(){const t=yt;let n;try{n=Function("return (function() "+t(460)+");")()}catch(o){n=window}const e=n[t(462)]=n[t(462)]||{},r=["log","warn",t(457),t(458),t(475),t(464),t(455)];for(let a=0;a<r.length;a++){const n=xt[t(474)][t(451)][t(443)](xt),o=r[a],i=e[o]||n;n[t(449)]=xt[t(443)](xt),n[t(440)]=i[t(440)][t(443)](i),e[o]=n}}))();const wt=g({__name:dt(476),setup(t){const n=dt,e=w({clearColor:n(446),antialias:!0}),r=c();return(t,o)=>{const a=n;return _(),v(E,null,[j(r).byteArray?(_(),D(l,{key:0,curColorList:[["rgba(0, 0, 0, 0)",0],[a(477),.4],[a(470),1]]})):L("",!0),z(j(s),R(e,{"window-size":""}),{default:S((()=>[o[0]||(o[0]=I("TresPerspectiveCamera",{position:[0,0,-2],fov:40,near:.01,far:1e3},null,-1)),z(j(i)),j(r)[a(467)]?(_(),D(ot,{key:0})):L("",!0)])),_:1},16),z(mt)],64)}}});function bt(t){function n(t){const e=yt;if(typeof t===e(465))return function(t){}[e(474)](e(441))[e(468)](e(450));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(463)+e(461))[e(444)]("action"):function(){return!1}[e(474)](e(463)+"gger")[e(468)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{wt as default};

import"./@fesjs.BvrsBDNW1718787583077.js";import{_ as n}from"./jszip.b_9tpgnb1718787583077.js";import{F as t}from"./file-saver.S-gcR9-41718787583077.js";import{a5 as e}from"./three.OZpCYxlY1718787583077.js";const s=l;!function(n,t){const e=l,s=r();for(;;)try{if(655159===parseInt(e(509))/1*(parseInt(e(496))/2)+parseInt(e(503))/3+parseInt(e(502))/4+-parseInt(e(527))/5+parseInt(e(514))/6+parseInt(e(557))/7*(-parseInt(e(534))/8)+parseInt(e(513))/9)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[l(535)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function r(){const n=["prototype","1061636yNppRm","202206HnXAJz","input","function *\\( *\\)","WEBP","catch","FileLoader","367FYusjc","toLowerCase","generateAsync","stringify","3700368hTpZcw","481098glawwK","__proto__",";base64,","data:image/GIF;base64,","application/octet-stream","parse","pop",'{}.constructor("return this")( )',"name","url","exception","table","stateObject","2375150XmzbLs","result","loadAsync","call","data","log","data:image/webp;base64,","16zqbfcc","apply","uuid","files","url:geometries/","trace","geometries","data:image/PNG;base64,","push","GIF","toString","folder","blob","enabled","bind","async","config.zip","setResponseType","warn","toUpperCase","data:image/","type","url:images/","127288QeEkFL","url:","readAsDataURL","onloadend","then","test","string","image/gif","split","gger","debu","PNG","get","base64","data:image/jpeg;base64,","init","file","length","load","非标准文件：不存在 app.json","chain","startsWith","images","Unknown","scene","Cache","forEach","console","onerror","while (true) {}","slice",".json","constructor","image/jpeg","endsWith","1866TEguOa","app.json","error","return (function() ","image/png"];return(r=function(){return n})()}!function(){o(this,(function(){const n=l,t=new RegExp(n(505)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=d(n(476));t.test(s+n(481))&&e[n(562)](s+n(504))?d():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function i(n){const t=s,o=new(e[t(508)]);return new Promise(((e,s)=>{const r=t;o[r(479)](n,(n=>e(JSON[r(519)](n))),void 0,(n=>s(n)))}))}async function c(n){const t=s,o=new(e[t(508)]);return new Promise(((e,r)=>{const a=t;o[a(551)](a(546)),o.load(n,(t=>{const o=new FileReader;o.onloadend=()=>{const t=l,r=function(n){const t=s,e=n[t(565)](".")[t(520)]()[t(510)]();return{jpg:t(494),jpeg:t(494),png:t(500),gif:t(564),bmp:"image/bmp",webp:"image/webp"}[e]||t(518)}(n),a=o[t(528)][t(565)](",")[1];e("data:"+r+t(516)+a)},o.onerror=n=>{r(n)},o.readAsDataURL(t)}),void 0,(n=>r(n)))}))}a(void 0,(function(){const n=l;let t;try{t=Function(n(499)+n(521)+");")()}catch(o){t=window}const e=t[n(488)]=t[n(488)]||{},s=[n(532),n(552),"info",n(498),n(524),n(525),n(539)];for(let r=0;r<s.length;r++){const t=a[n(493)][n(501)][n(548)](a),o=s[r],i=e[o]||t;t[n(515)]=a.bind(a),t.toString=i[n(544)].bind(i),e[o]=t}}))(),e[s(486)][s(547)]=!0;const u=t=>{const o=s,r=new(e[o(508)]);return r[o(551)](o(546)),new Promise(((e,s)=>{r[o(479)](t,(async t=>{e(await n.loadAsync(t))}),void 0,(n=>s(n)))}))};function l(n,t){const e=r();return(l=function(n,t){return e[n-=476]})(n,t)}const p=n=>{const t=s,e=n.substring(0,15),o=t(571),r=t(541),a=t(517),i=t(533);return o[t(482)](e)||"data:image/JPEG;base64,"[t(482)](e)?"JPEG":"data:image/png;base64,".startsWith(e)||r[t(482)](e)?t(568):"data:image/gif;base64,"[t(482)](e)||a[t(482)](e)?t(543):i[t(482)](e||"data:image/WEBP;base64,"[t(482)](e))?t(506):t(484)},f=e=>{const o=s,r=[];e[o(485)][o(540)]&&e[o(485)][o(540)][o(487)]((n=>{const t=o;"BufferGeometry"===n.type&&(r.push({uuid:n[t(536)],data:n[t(531)]}),n.data=t(538)+n[t(536)]+t(492))}));const a=[];e[o(485)][o(483)]&&e.scene[o(483)][o(487)]((n=>{const t=o;n.url&&(a[t(542)]({uuid:n[t(536)],url:n[t(523)]}),n[t(523)][t(555)]?n[t(523)]="url:images/"+n[t(536)]+"."+n[t(523)][t(555)]+".json":n[t(523)]=t(556)+n[t(536)]+"."+p(n[t(523)]))}));const i=new n;if(r[o(478)]){const n=i[o(545)]("geometries");r[o(487)]((t=>{const e=o;n.file(t[e(536)]+e(492),JSON[e(512)](t[e(531)]))}))}if(a[o(478)]){const n=i.folder(o(483));a[o(487)]((t=>{const e=o;t.url[e(555)]?n[e(477)](t[e(536)]+"."+t.url.type+".json",JSON.stringify(t[e(523)])):n[e(477)](t[e(536)]+"."+p(t[e(523)]),t[e(523)][e(565)](";base64,")[e(520)](),{base64:!0})}))}const c=JSON.stringify(e);return i.file(o(497),c),i[o(511)]({type:o(546)})[o(561)]((n=>{const e=o;t.saveAs(n,e(550))}))},g=(n,t,e)=>{const o=s;n.geometries<=0&&n[o(483)]<=0&&e(t)},m=(t,e)=>{const o=s;let r=null;return n[o(529)](t)[o(561)]((n=>{const t=o;n.files[t(497)]?n[t(537)][t(497)][t(549)]("string")[t(561)]((o=>{var a,i;const c=t;r=JSON[c(519)](o);const u=(n=>{var t,e;const o=s,r={geometries:0,images:0};return null==(t=n[o(485)].geometries)||t.forEach((n=>{const t=o;n[t(531)][t(482)](t(558))&&r[t(540)]++})),null==(e=n[o(485)].images)||e.forEach((n=>{const t=o;n[t(523)][t(482)](t(558))&&r[t(483)]++})),r})(r);g(u,r,e),null==(a=r[c(485)].geometries)||a.forEach((t=>{const s=c;t[s(531)][s(482)]("url:")&&n[s(537)][t[s(531)].slice(4)][s(549)](s(563))[s(561)]((n=>{const o=s;t[o(531)]=JSON[o(519)](n),u[o(540)]--,g(u,r,e)}))})),null==(i=r[c(485)][c(483)])||i[c(487)]((t=>{const s=c;if(t[s(523)][s(482)](s(558))){const o=t.url[s(491)](4);o[s(495)](".json")?n[s(537)][o][s(549)](s(563))[s(561)]((n=>{const o=s;t.url=JSON[o(519)](n),u[o(483)]--,g(u,r,e)})):n.files[o][s(549)](s(570))[s(561)]((n=>{const a=s,i=o[a(565)]("."),c=i[i.length-1][a(553)]();t[a(523)]=a(554)+c+a(516)+n,u.images--,g(u,r,e)}))}}))})):console.error(t(480))}),(n=>{const e=o;console[e(498)](t[e(522)]+": "+n.message)})),r};function d(n){function t(n){const e=l;if(typeof n===e(563))return function(n){}[e(493)](e(490)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(567)+e(566))[e(530)]("action"):function(){return!1}[e(493)](e(567)+e(566)).apply(e(526)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{u as a,c as b,f as e,p as g,m as i,i as l};

import"./index.pQzpmr5P1749111073271.js";import{m as e,e as a}from"./@tresjs.D5XVXE0C1749111073271.js";import{a4 as s,ab as t}from"./three.B8H7tP0r1749111073271.js";import{M as l,a as r}from"./@pmndrs.sc6K39j11749111073271.js";import{u}from"./index.COgeZxRX1749111073271.js";import{d as i,v as n,s as o,t as v,G as m,o as d,u as f}from"./@vue.Mugdq9o81749111073271.js";const p=["buffer","side"],c=i({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(i,{expose:c}){const b=n(),{extend:h,scene:k,renderer:M,camera:x}=e(),g=n(),T=i;h({MeshTransmissionMaterial:l});const j=new r,{onBeforeLoop:R}=a(),y=u({width:T.fboResolution,height:T.fboResolution,isLoop:!1}),w=u({width:T.fboResolution,height:T.fboResolution,isLoop:!1});let _,I,L,B;return o((async()=>{await v(),g.value=function(e,a){let s;return e.traverse((e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)})),s}(k.value,b.value.uuid)})),R((({elapsed:e})=>{b.value.time=e,b.value.buffer===w.value.texture&&g.value&&(L=M.value.toneMapping,_=k.value.background,I=b.value.envMapIntensity,B=g.value.material.side,g.value.material=j,T.backside&&(M.value.setRenderTarget(y.value),M.value.render(k.value,x.value),g.value.material=b.value,g.value.material.thickness=T.backsideThickness,g.value.material.buffer=y.value.texture,g.value.material.side=s,g.value.material.envMapIntensity=0),M.value.setRenderTarget(w.value),M.value.render(k.value,x.value),g.value.material.buffer=w.value.texture,g.value.material=b.value,g.value.material.thickness=T.thickness,g.value.material.side=B,g.value.material.envMapIntensity=I,k.value.background=_,M.value.setRenderTarget(null),M.value.toneMapping=L)})),c({root:b,constructor:l}),(e,a)=>(d(),m("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:b,buffer:f(w).texture,side:f(t)},null,8,p))}});export{c as _};

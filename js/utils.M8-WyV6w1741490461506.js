import"./@fesjs.IWF3W7Eu1741490461506.js";import{_ as t}from"./jszip.6x-WYzg11741490461506.js";import{F as n}from"./file-saver.awWaueMB1741490461506.js";import{_ as e,aH as s}from"./three.Vxh8Czkt1741490461506.js";const o=c;!function(t,n){const e=c,s=g();for(;;)try{if(838465===-parseInt(e(350))/1*(-parseInt(e(354))/2)+-parseInt(e(422))/3+-parseInt(e(358))/4*(parseInt(e(397))/5)+-parseInt(e(401))/6*(parseInt(e(383))/7)+-parseInt(e(387))/8+-parseInt(e(395))/9*(parseInt(e(423))/10)+parseInt(e(392))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(391)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=c,n=new RegExp(t(368)),e=new RegExp(t(346),"i"),s=h(t(369));n.test(s+t(430))&&e.test(s+t(355))?h():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(391)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function c(t,n){const e=g();return(c=function(t,n){return e[t-=344]})(t,n)}async function i(t){const n=new s;return new Promise(((e,s)=>{const o=c;n.load(t,(t=>e(JSON[o(370)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=new s;return new Promise(((e,s)=>{const r=c;n[r(348)](r(414)),n[r(344)](t,(n=>{const a=r,c=new FileReader;c[a(367)]=()=>{const n=a,s=function(t){const n=o,e=t[n(403)](".")[n(374)]()[n(431)]();return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:n(418),webp:n(420)}[e]||"application/octet-stream"}(t),r=c[n(415)][n(403)](",")[1];e(n(412)+s+n(366)+r)},c.onerror=t=>{s(t)},c[a(381)](n)}),void 0,(t=>s(t)))}))}a(void 0,(function(){const t=c,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(421)]=n[t(421)]||{},s=[t(417),"warn",t(361),t(402),t(427),t(379),t(396)];for(let o=0;o<s.length;o++){const n=a.constructor[t(359)][t(388)](a),r=s[o],c=e[r]||n;n[t(424)]=a.bind(a),n[t(351)]=c[t(351)][t(388)](c),e[r]=n}}))(),e[o(352)][o(407)]=!0;const p=n=>{const e=o,r=new s;return r[e(348)](e(414)),new Promise(((s,o)=>{const a=e;r[a(344)](n,(async n=>{const e=a;s(await t[e(382)](n))}),void 0,(t=>o(t)))}))},f=t=>{const n=o,e=t.substring(0,15),s=n(353),r=n(398),a=n(436),c=n(394),i=n(429);return s.startsWith(e)||"data:image/JPEG;base64,"[n(360)](e)?"JPEG":"data:image/png;base64,"[n(360)](e)||"data:image/PNG;base64,"[n(360)](e)?"PNG":r[n(360)](e)||a[n(360)](e)?n(393):c.startsWith(e||i.startsWith(e))?n(362):n(400)},l=e=>{const s=o,r=[];e[s(410)][s(405)]&&e[s(410)][s(405)][s(349)]((t=>{const n=s;t[n(363)]===n(345)&&(r[n(425)]({uuid:t.uuid,data:t[n(356)]}),t[n(356)]=n(428)+t[n(411)]+n(386))}));const a=[];e.scene.images&&e.scene[s(433)][s(349)]((t=>{const n=s;t[n(375)]&&(a[n(425)]({uuid:t[n(411)],url:t[n(375)]}),t[n(375)][n(363)]?t.url=n(409)+t.uuid+"."+t[n(375)][n(363)]+n(386):t[n(375)]=n(409)+t[n(411)]+"."+f(t[n(375)]))}));const c=new t;if(r[s(364)]){const t=c[s(373)](s(405));r[s(349)]((n=>{const e=s;t[e(404)](n[e(411)]+e(386),JSON[e(408)](n[e(356)]))}))}if(a[s(364)]){const t=c[s(373)](s(433));a.forEach((n=>{const e=s;n[e(375)][e(363)]?t[e(404)](n[e(411)]+"."+n[e(375)][e(363)]+".json",JSON[e(408)](n[e(375)])):t[e(404)](n.uuid+"."+f(n[e(375)]),n[e(375)].split(e(366))[e(374)](),{base64:!0})}))}const i=JSON[s(408)](e);return c[s(404)](s(389),i),c[s(416)]({type:"blob"})[s(390)]((t=>{const e=s;n.saveAs(t,e(365))}))};function g(){const t=["21aJVqnk","toString","Cache","data:image/jpeg;base64,","134466LceZmR","input","data","toUpperCase","130420TKouJp","prototype","startsWith","info","WEBP","type","length","config.zip",";base64,","onloadend","function *\\( *\\)","init","parse","action","data:image/","folder","pop","url","counter","files","call","table","async","readAsDataURL","loadAsync","7hHCPgU","name","string",".json","9339944TVuRUK","bind","app.json","then","apply","42742282PIOqYm","GIF","data:image/webp;base64,","225hFckiR","trace","205FHAsnJ","data:image/gif;base64,","message","Unknown","448554kscVQd","error","split","file","geometries","gger","enabled","stringify","url:images/","scene","uuid","data:","url:","blob","result","generateAsync","log","image/bmp","stateObject","image/webp","console","3627174xQVOMs","268390gZzszr","__proto__","push","catch","exception","url:geometries/","data:image/WEBP;base64,","chain","toLowerCase","slice","images","非标准文件：不存在 app.json","get","data:image/GIF;base64,","load","BufferGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","setResponseType","forEach"];return(g=function(){return t})()}const m=(t,n,e)=>{const s=o;t[s(405)]<=0&&t[s(433)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(382)](n).then((t=>{const n=s;t[n(377)]["app.json"]?t[n(377)][n(389)][n(380)](n(385)).then((s=>{var a,c;const i=n;r=JSON.parse(s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(410)].geometries)||n.forEach((t=>{const n=s;t.data.startsWith(n(413))&&r[n(405)]++})),null==(e=t[s(410)][s(433)])||e[s(349)]((t=>{const n=s;t[n(375)].startsWith(n(413))&&r.images++})),r})(r);m(u,r,e),null==(a=r[i(410)][i(405)])||a[i(349)]((n=>{const s=i;n[s(356)][s(360)](s(413))&&t[s(377)][n[s(356)][s(432)](4)][s(380)]("string")[s(390)]((t=>{const o=s;n[o(356)]=JSON[o(370)](t),u[o(405)]--,m(u,r,e)}))})),null==(c=r[i(410)].images)||c[i(349)]((n=>{const s=i;if(n[s(375)][s(360)](s(413))){const o=n[s(375)].slice(4);o.endsWith(".json")?t.files[o].async("string")[s(390)]((t=>{const o=s;n[o(375)]=JSON[o(370)](t),u[o(433)]--,m(u,r,e)})):t.files[o][s(380)]("base64")[s(390)]((t=>{const a=s,c=o[a(403)]("."),i=c[c[a(364)]-1][a(357)]();n[a(375)]=a(372)+i+a(366)+t,u[a(433)]--,m(u,r,e)}))}}))})):console[n(402)](n(434))}),(t=>{const e=s;console.error(n[e(384)]+": "+t[e(399)])})),r};function h(t){function n(t){const e=c;if(typeof t===e(385))return function(t){}.constructor("while (true) {}")[e(391)](e(376));1!==(""+t/t).length||t%20==0?function(){return!0}[e(347)]("debu"+e(406))[e(378)](e(371)):function(){return!1}[e(347)]("debu"+e(406))[e(391)](e(419)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,u as b,l as e,f as g,d as i,i as l};

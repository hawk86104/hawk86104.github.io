import{_ as t,C as n,ab as e,cv as o,cw as r,cx as i,cy as s,n as u,c4 as c,ar as a,at as l}from"./three.qSkR4_5R1743066865732.js";import{P as f,e as p,o as d}from"./@tresjs.NxYvETXi1743066865732.js";import{z as h}from"./three-custom-shader-material.IZIiFiAC1743066865732.js";import{b as y,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1743066865732.js";import{d as w,b as m,a2 as b,w as I,o as _,H as C,u as v,r as x,a3 as S,e as A,f as O,g as T,N as j,j as R,aj as G,ak as M,F as k,M as B,J as L,m as E}from"./@vue.L-brCdZe1743066865732.js";!function(t,n){const e=Z,o=H();for(;;)try{if(111513===parseInt(e(196))/1+parseInt(e(200))/2+-parseInt(e(206))/3*(-parseInt(e(223))/4)+parseInt(e(213))/5+parseInt(e(195))/6+-parseInt(e(222))/7*(-parseInt(e(208))/8)+parseInt(e(231))/9*(-parseInt(e(219))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function H(){const t=["return (function() ","log","debu","106850aaMkup","gger","LANDMASS","exception","test","traverse","38030kkZSWs","toString","chain","10003LTVPKC","192120sLjEKD","bind","name","table","CITY_UNTRIANGULATED","string","input","init","855wssTVd","function *\\( *\\)","762288nWjMah","106991RouNGF","while (true) {}","info","length","335860otCpxG","prototype","constructor","apply","console","error","3psiLWX","warn","8FPidCu","action"];return(H=function(){return t})()}function Z(t,n){const e=H();return Z=function(t,n){return e[t-=195]},Z(t,n)}!function(){D(this,(function(){const t=Z,n=new RegExp(t(232)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=W(t(230));n.test(o+t(221))&&e[t(217)](o+t(229))?W():o("0")}))()}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();z(void 0,(function(){const t=Z,n=function(){const t=Z;let n;try{n=Function(t(210)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(204)]=n.console||{},o=[t(211),t(207),t(198),t(205),t(216),t(226),"trace"];for(let r=0;r<o[t(199)];r++){const n=z[t(202)][t(201)].bind(z),i=o[r],s=e[i]||n;n.__proto__=z[t(224)](z),n[t(220)]=s[t(220)][t(224)](s),e[i]=n}}))();const F=async()=>{const t=Z,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(218)]((n=>{const i=t;n[i(225)]===i(227)&&(e=n),n[i(225)]===i(215)&&(o=n),"ROADS"===n[i(225)]&&(r=n)})),{model:n,city:e,land:o,roads:r}};function W(t){function n(t){const e=Z;if(typeof t===e(228))return function(t){}[e(202)](e(197))[e(203)]("counter");1!==(""+t/t)[e(199)]||t%20==0?function(){return!0}.constructor(e(212)+e(214)).call(e(209)):function(){return!1}[e(202)](e(212)+e(214))[e(203)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const $=J;!function(t,n){const e=J,o=Y();for(;;)try{if(461751===-parseInt(e(322))/1+parseInt(e(284))/2+-parseInt(e(311))/3*(-parseInt(e(295))/4)+-parseInt(e(285))/5+-parseInt(e(334))/6+parseInt(e(313))/7+parseInt(e(292))/8*(parseInt(e(286))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(287)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=J,n=new RegExp(t(281)),e=new RegExp(t(339),"i"),o=Q(t(330));n[t(299)](o+t(282))&&e.test(o+"input")?Q():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(287)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=J;let n;try{n=Function(t(288)+t(307)+");")()}catch(r){n=window}const e=n[t(280)]=n[t(280)]||{},o=[t(328),t(331),t(298),t(294),t(317),t(290),"trace"];for(let i=0;i<o.length;i++){const n=X[t(306)][t(278)][t(323)](X),r=o[i],s=e[r]||n;n[t(305)]=X[t(323)](X),n[t(325)]=s[t(325)][t(323)](s),e[r]=n}}))();const P=[$(319)];function Y(){const t=["boundingBox","clone","858670sDkiLO","bind","Color","toString","string","color","log","city","init","warn","primitive","buildingsModelCustomShader","4700748HscYRd","opacity","uColor","uOpacity","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","side","#ffff00","gger","prototype","computeBoundingBox","console","function *\\( *\\)","chain","land","805502bXGCSP","1485705xTAQti","1094463sDefpQ","apply","return (function() ","DoubleSide","table","topColor","40GNibAh","stateObject","error","4pObbIW","counter","call","info","test","computeBoundingSphere","bulidingsColor","renderOrder","landColor","isArray","__proto__","constructor",'{}.constructor("return this")( )',"material","dispose","setStyle","2739411lzOJMS","uniforms","3339679sGXZNw","model","gradient","forEach","exception","#e523ff","object"];return(Y=function(){return t})()}function J(t,n){const e=Y();return J=function(t,n){return e[t-=276]},J(t,n)}const K=w({__name:$(333),props:{model:{},bulidingsColor:{default:$(318)},landColor:{default:"#112233"},topColor:{default:$(276)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=$,i=o,s=m(0),u=i.model[r(329)];u[r(302)]=1001;const c=i[r(314)].land;(()=>{const o=r,{geometry:c}=u;c[o(279)](),c[o(300)]();const{max:a,min:l}=c[o(320)];if(u[o(308)].__csm)return;const f=new h({baseMaterial:u[o(308)],vertexShader:y,fragmentShader:g,silent:!0,uniforms:{uMax:{value:a},uMin:{value:l},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new n(i.bulidingsColor)},uOpacity:{value:i[o(335)]},uLightColor:{value:new(t[o(324)])("#ffffff")},uTopColor:{value:new(t[o(324)])(i[o(291)])},uTime:s,uGradient:{value:i[o(315)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:e});u.material[o(309)](),u[o(308)]=f})();const{onLoop:a}=p();a((({delta:t})=>{s[r(338)]+=t})),b((()=>{const n=r;i.bulidingsColor&&u.material[n(312)][n(336)].value[n(310)](i[n(301)]),i.landColor&&((n,e)=>{const o=r;let s;"cu"===n||n===o(283)&&(s=Array[o(304)](c[o(308)])?c[o(308)]:[c[o(308)]],s[o(316)]((n=>{const r=o;n[e][r(310)](i[r(303)]),n[r(340)]=t[r(289)]})))})(n(283),n(327)),i[n(335)]&&(u[n(308)][n(312)][n(337)].value=i[n(335)])})),I(i,((t,n)=>{const e=r;u[e(308)][e(312)].uGradient[e(338)]=t[e(315)]}));const l=i[r(314)][r(314)][r(321)]();return(t,n)=>{const e=r;return _(),C(e(332),{object:v(l)},null,8,P)}}});function Q(t){function n(t){const e=J;if(typeof t===e(326))return function(t){}[e(306)]("while (true) {}")[e(287)](e(296));1!==(""+t/t).length||t%20==0?function(){return!0}[e(306)]("debu"+e(277))[e(297)]("action"):function(){return!1}[e(306)]("debu"+e(277))[e(287)](e(293)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const U=q;!function(t,n){const e=q,o=nt();for(;;)try{if(745010===parseInt(e(334))/1*(-parseInt(e(330))/2)+parseInt(e(279))/3+-parseInt(e(310))/4+parseInt(e(326))/5*(parseInt(e(314))/6)+parseInt(e(317))/7+-parseInt(e(332))/8+-parseInt(e(320))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(309)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function q(t,n){const e=nt();return q=function(t,n){return e[t-=278]},q(t,n)}!function(){V(this,(function(){const t=q,n=new RegExp(t(284)),e=new RegExp(t(308),"i"),o=rt(t(323));n[t(325)](o+t(315))&&e.test(o+t(283))?rt():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function nt(){const t=["function *\\( *\\)","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","debu","resolution","uColor","color","Shader","material","uniforms","constructor","stateObject","return (function() ","warn","object","matrix","table","gger","#FFF","action","log","error","string","width","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","3698172XJaGwr","bind","innerHeight","opacity","6271656ZLygXU","chain","linewidth","5569921OcqIlw","console","counter","4573818oZWSzH","primitive","buildingsLines","init","clone","test","5eHSxIA","geometry","trace","__proto__","4tzaGNO","toString","3186216WOwxtE","uOpacity","337853oDQcoB","Wireframe","value","while (true) {}","applyMatrix4","4232277vYXGKn","style","builds"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","input"];return(nt=function(){return t})()}tt(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function(t(295)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(318)]=n[t(318)]||{},o=[t(303),t(296),t(307),t(304),"exception",t(299),t(328)];for(let r=0;r<o.length;r++){const n=tt[t(293)].prototype[t(311)](tt),i=o[r],s=e[i]||n;n[t(329)]=tt[t(311)](tt),n[t(331)]=s[t(331)].bind(s),e[i]=n}}))();const et=[U(297)],ot=w({__name:U(322),props:{builds:{},width:{default:1},color:{default:U(301)},opacity:{default:1},style:{default:U(335)}},setup(t){const e=U,c=t;let a=null,l=null;if(c[e(280)]===e(335)){const t=new o(c[e(281)][e(327)]);let n=(new r).fromEdgesGeometry(t),u=new i({color:c.color,linewidth:c.width,opacity:c[e(313)],transparent:!0,depthWrite:!0,depthTest:!0});u[e(287)].set(window.innerWidth,window[e(312)]),a=new s(n,u),a[e(278)](c[e(281)][e(298)][e(324)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[e(289)])},uOpacity:{value:c.opacity}},vertexShader:e(285),fragmentShader:e(282)};const t=new o(c[e(281)][e(327)]),r=new u(l);a=new LineSegments(t,r),a[e(278)](c[e(281)][e(298)].clone()),a[e(291)][e(316)]=c[e(306)],a.renderOrder=1e3}return b((()=>{const t=e;c[t(280)]===t(290)&&(c.color&&(l.uniforms[t(288)].value=new n(c[t(289)])),c[t(313)]&&(l[t(292)][t(333)][t(336)]=c[t(313)])),c[t(280)]===t(335)&&(c.color&&(a[t(291)][t(289)]=new n(c[t(289)])),c[t(313)]&&(a[t(291)].opacity=c[t(313)])),c[t(306)]&&(a.material[t(316)]=c[t(306)])})),(t,n)=>{const o=e;return _(),C(o(321),{object:v(a)},null,8,et)}}});function rt(t){function n(t){const e=q;if(typeof t===e(305))return function(t){}[e(293)](e(337))[e(309)](e(319));1!==(""+t/t).length||t%20==0?function(){return!0}[e(293)](e(286)+e(300)).call(e(302)):function(){return!1}[e(293)](e(286)+e(300)).apply(e(294)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=ft;!function(t,n){const e=ft,o=ct();for(;;)try{if(974437===-parseInt(e(480))/1*(parseInt(e(488))/2)+parseInt(e(485))/3*(parseInt(e(460))/4)+-parseInt(e(490))/5+-parseInt(e(505))/6*(parseInt(e(461))/7)+parseInt(e(506))/8*(parseInt(e(502))/9)+parseInt(e(476))/10+parseInt(e(464))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ft(503)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=ft,n=new RegExp(t(467)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=dt(t(482));n.test(o+"chain")&&e[t(509)](o+t(508))?dt():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(){const t=["function *\\( *\\)","length","#000000","call","bind","showBuildings","constructor","exception","autoRotate","3092000CmqoGT","return (function() ","TresAxesHelper","stateObject","126249aophhY","perspectiveCameraRef","init","#ffffff","gger","1517268yybKQN","pagesShow","counter","2SHjHmc","error","7418080GgdiMU","builds","TresCanvas","debu","TresAmbientLight","TresPerspectiveCamera","showAxesHelper","city","table","while (true) {}","info","trace","27sphqCc","apply","log","8341722rCaddO","4667464XsTDid","$slots","input","test","tcRef","#000","TresDirectionalLight","warn","ability","12gwZXVx","7TJYAdk","TresGridHelper","console","4376042EOCDDp","prototype","showGridHelper"];return(ct=function(){return t})()}ut(void 0,(function(){const t=ft;let n;try{n=Function(t(477)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(463)]=n[t(463)]||{},o=[t(504),t(513),t(500),t(489),t(474),t(498),t(501)];for(let i=0;i<o[t(468)];i++){const n=ut.constructor[t(465)].bind(ut),r=o[i],s=e[r]||n;n.__proto__=ut[t(471)](ut),n.toString=s.toString[t(471)](s),e[r]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(t,n){const e=ct();return ft=function(t,n){return e[t-=460]},ft(t,n)}const pt=w({__name:it(486),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=x({clearColor:n(469),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r.disableRender}),s=x({autoRotate:r[n(475)],enableDamping:!0});let u=null;r[n(472)]&&([e,o]=S((()=>F())),e=await e,o(),u=e);const f=m(),p=m();return(t,e)=>{const o=n,c=A(o(492));return _(),O(c,E({ref_key:o(510),ref:p},i,{"window-size":""}),{default:T((()=>[j(o(495),{ref_key:o(481),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),R(v(d),G(M(s)),null,16),e[0]||(e[0]=j(o(494),{color:o(483)},null,-1)),e[1]||(e[1]=j(o(512),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[o(472)]&&v(u)?(_(),C(k,{key:0},[R(K,{model:v(u)},null,8,["model"]),R(ot,{builds:v(u)[o(497)],color:o(511)},null,8,[o(491)])],64)):B("",!0),L(t[o(507)],o(514)),r[o(496)]?(_(),C(o(478),at)):B("",!0),r[o(466)]?(_(),C(o(462),lt)):B("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=ft;if("string"==typeof t)return function(t){}[e(473)](e(499))[e(503)](e(487));1!==(""+t/t)[e(468)]||t%20==0?function(){return!0}[e(473)](e(493)+e(484))[e(470)]("action"):function(){return!1}[e(473)]("debu"+e(484)).apply(e(479)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{K as _,ot as a,pt as b,F as l};

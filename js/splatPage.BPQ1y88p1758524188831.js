import{N as a,_ as e,co as t}from"./three.CC50Wz7a1758524188831.js";import{m as s,a as l,H as n}from"./@tresjs.BL1sBIDK1758524188831.js";import{e as o,f as i}from"./@pmndrs.BlnlvNwu1758524188831.js";import{d as r,aa as p,b as u,w as c,V as m,G as d,o as f,ab as g,r as v,s as y,e as j,f as h,I as w,j as b,u as T,a5 as _,m as M}from"./@vue.pEDXJ_3Z1758524188831.js";import{P as k}from"./tweakpane.C0HtAJSg1758524188831.js";import"./postprocessing.DYlQqnRh1758524188831.js";import"./@vueuse.C-O_6is-1758524188831.js";const x=["object"],C=r({__name:"splat",props:{url:{type:String,default:"./plugins/gaussianSplatting/model/luigi.splat"}},async setup(a){let e,t;const l=a,{camera:n,renderer:r}=s(),v=new o(r.value);let y=([e,t]=p((()=>v.loadAsync(l.url))),e=await e,t(),e);const j=u(null);j.value=new i(y,n.value,{alphaTest:.1}),c((()=>l.url),(async a=>{a&&(y=await v.loadAsync(a)),h(),j.value=new i(y,n.value,{alphaTest:.1})}));const h=()=>{j.value&&(j.value.geometry.dispose(),j.value.material&&j.value.material.dispose())};return m((()=>{h()})),(a,e)=>(f(),d("primitive",{object:g(j.value)},null,8,x))}}),L=r({__name:"splatPage",setup(s){const o=v({clearColor:"#ffffff",alpha:!1,shadowMapType:t,outputColorSpace:e,toneMapping:a}),i=v({url:"./plugins/gaussianSplatting/model/luigi.splat"}),r=new k({title:"参数",expanded:!0}),p=document.createElement("input");p.type="file",p.accept=".splat",p.style.display="none",document.body.appendChild(p);return r.addButton({title:"替换splat文件",label:"500MB以内"}).on("click",(()=>{p&&(p.value="",p.click())})),y((()=>{p.onchange=a=>{const e=a.target.files[0];if(!e)return;if(e.size>524288e3)return void alert("文件大小不能超过500MB");const t=URL.createObjectURL(e);i.url=t}})),(a,e)=>(f(),j(T(n),M(o,{"window-size":""}),{default:h((()=>[e[0]||(e[0]=w("TresPerspectiveCamera",{position:[3,3,3],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),b(T(l)),e[1]||(e[1]=w("TresAmbientLight",{intensity:3},null,-1)),(f(),j(_,null,{default:h((()=>[b(C,M(i,{position:[0,.7,0],"rotate-x":-Math.PI}),null,16,["rotate-x"])])),_:1})),e[2]||(e[2]=w("TresDirectionalLight",{position:[6,2,4],intensity:2},null,-1)),e[3]||(e[3]=w("TresGridHelper",null,null,-1))])),_:1},16))}});export{L as default};

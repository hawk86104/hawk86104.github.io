import{a as t,c as e,B as o,l as s,ct as r,C as a,a3 as n}from"./three.BsQcsDwn1757909965456.js";import{z as i}from"./@fesjs.DwhQ5GG81757909965456.js";import{b as p}from"./@tresjs.SQYUeS5s1757909965456.js";import{c as u,d as c,a as l}from"./three-mesh-bvh.DnL85_nC1757909965456.js";const m=(t,o=!1)=>{t.computeBoundingBox();const{max:s,min:r}=t.boundingBox;t.deleteAttribute("uv");const a=s.x-r.x,n=s.y-r.y,i=[];for(let e=0;e<t.attributes.position.count;e++)o?(i.push((t.attributes.position.getX(e)-(r.x+s.x)/2)/a),i.push((t.attributes.position.getY(e)-(r.y+s.y)/2)/n)):(i.push((t.attributes.position.getX(e)-r.x)/a),i.push((t.attributes.position.getY(e)-r.y)/n));const p=new Float32Array(i);t.setAttribute("uv",new e(p,2))},g=(t,e)=>new Promise(((o,s)=>{i(t,{},{method:"get",mergeRequest:!0,responseType:"json"}).then((t=>{e&&o(t[e]),o(t.features)})).catch((t=>{console.error(t),s(t)}))})),h=t=>{const e=(new THREE.Box3).setFromObject(t),o=new THREE.Vector3;e.getCenter(o),t.children.forEach((t=>{t.position.sub(o)})),t.position.copy(o.negate())},f=()=>{o.prototype.computeBoundsTree=u,o.prototype.disposeBoundsTree=c,s.prototype.raycast=l},d=async e=>{const o=await p(["./plugins/water/images/Water_1_M_Normal.jpg","./plugins/water/images/Water_2_M_Normal.jpg"]),s=e.geometry.clone();m(s),s.computeBoundsTree();const i=new r(s,{color:new a("#fff"),scale:20,flowDirection:new t(1,1),textureWidth:1024,textureHeight:1024,normalMap0:o[0],normalMap1:o[1]});return i.material.transparent=!0,i.material.depthWrite=!0,i.material.depthTest=!0,i.material.side=n,i.material.uniforms.config.value.w=20,i.material.uniforms.reflectivity.value=.46,i};function y(e){const o=[];for(let r=0;r<e.length;r++)o.push(new t(e[r].x,e[r].y));const s=new t;for(let t=0;t<o.length;t++)s.add(o[t]);s.divideScalar(o.length);for(let t=0;t<o.length;t++)o[t].sub(s);return{points:o,centerPoint:s}}export{h as a,y as g,f as i,g as l,m as r,d as s};

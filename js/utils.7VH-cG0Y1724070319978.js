import"./@fesjs.fxXnq-gV1724070319978.js";import{_ as n}from"./jszip.ZVB-p0R-1724070319978.js";import{F as t}from"./file-saver.WnxBqmrr1724070319978.js";import{a6 as e}from"./three.QUrV0R7c1724070319978.js";const s=m;!function(n,t){const e=m,s=a();for(;;)try{if(157891===-parseInt(e(446))/1+-parseInt(e(423))/2+-parseInt(e(490))/3*(parseInt(e(435))/4)+-parseInt(e(458))/5+-parseInt(e(422))/6*(-parseInt(e(448))/7)+-parseInt(e(438))/8*(parseInt(e(476))/9)+parseInt(e(503))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){o(this,(function(){const n=m,t=new RegExp(n(424)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=d("init");t[n(498)](s+n(427))&&e[n(498)](s+"input")?d():s("0")}))()}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function a(){const n=["data:image/gif;base64,","onerror","string","enabled","image/jpeg","readAsDataURL","loadAsync","file","error","split","trace","809208nlvViq","get",";base64,","name","onloadend","data:image/","image/webp","generateAsync","info","geometries","exception","url:images/","stringify","PNG","51qpTkPo","stateObject","files","length",'{}.constructor("return this")( )',"async","catch","url:","test","__proto__","load","endsWith",".json","10436830FPPoNA","then","startsWith","log","GIF","Unknown","data","type","push","setResponseType","bind","images","data:image/jpeg;base64,","while (true) {}","forEach","warn","table","url","image/png","6iQLrth","588334ldRXqz","function *\\( *\\)","gger","parse","chain","uuid","blob","BufferGeometry","base64","application/octet-stream","url:geometries/","JPEG","43052xaimLQ","console","scene","16obbxIA","slice","data:image/PNG;base64,","toLowerCase","toString","app.json","config.zip","非标准文件：不存在 app.json","92785nBLuFq","Cache","1032479VFGAkj","toUpperCase","pop","data:image/GIF;base64,","data:","result","FileLoader","debu","constructor","return (function() ","1417710KkrQtz","data:image/WEBP;base64,","message","prototype","WEBP","apply","action"];return(a=function(){return n})()}async function i(n){const t=s,o=new(e[t(454)]);return new Promise(((e,s)=>{const r=t;o.load(n,(n=>e(JSON[r(426)](n))),void 0,(n=>s(n)))}))}async function c(n){const t=s,o=new(e[t(454)]);return new Promise(((e,r)=>{const a=t;o[a(512)](a(429)),o[a(500)](n,(t=>{const o=a,i=new FileReader;i[o(480)]=()=>{const t=o,r=function(n){const t=s,e=n[t(474)](".")[t(450)]()[t(441)]();return{jpg:"image/jpeg",jpeg:t(469),png:t(421),gif:"image/gif",bmp:"image/bmp",webp:t(482)}[e]||t(432)}(n),a=i[t(453)][t(474)](",")[1];e(t(452)+r+t(478)+a)},i.onerror=n=>{r(n)},i.readAsDataURL(t)}),void 0,(n=>r(n)))}))}r(void 0,(function(){const n=m,t=function(){const n=m;let t;try{t=Function(n(457)+n(494)+");")()}catch(e){t=window}return t}(),e=t[n(436)]=t[n(436)]||{},s=[n(506),n(518),n(484),n(473),n(486),n(519),n(475)];for(let o=0;o<s[n(493)];o++){const t=r[n(456)][n(461)].bind(r),a=s[o],i=e[a]||t;t[n(499)]=r[n(513)](r),t.toString=i[n(442)][n(513)](i),e[a]=t}}))(),e[s(447)][s(468)]=!0;const u=t=>{const o=s,r=new(e[o(454)]);return r.setResponseType("blob"),new Promise(((e,s)=>{r[o(500)](t,(async t=>{e(await n.loadAsync(t))}),void 0,(n=>s(n)))}))},p=n=>{const t=s,e=n.substring(0,15),o=t(515),r=t(440),a=t(465),i=t(451),c=t(459);return o.startsWith(e)||"data:image/JPEG;base64,"[t(505)](e)?t(434):"data:image/png;base64,"[t(505)](e)||r[t(505)](e)?t(489):a.startsWith(e)||i[t(505)](e)?t(507):"data:image/webp;base64,".startsWith(e||c[t(505)](e))?t(462):t(508)},l=e=>{const o=s,r=[];e[o(437)][o(485)]&&e[o(437)][o(485)][o(517)]((n=>{const t=o;n[t(510)]===t(430)&&(r[t(511)]({uuid:n[t(428)],data:n[t(509)]}),n[t(509)]=t(433)+n[t(428)]+".json")}));const a=[];e[o(437)].images&&e[o(437)][o(514)][o(517)]((n=>{const t=o;n.url&&(a[t(511)]({uuid:n.uuid,url:n[t(420)]}),n[t(420)][t(510)]?n[t(420)]="url:images/"+n[t(428)]+"."+n[t(420)][t(510)]+t(502):n[t(420)]=t(487)+n.uuid+"."+p(n[t(420)]))}));const i=new n;if(r[o(493)]){const n=i.folder("geometries");r[o(517)]((t=>{const e=o;n[e(472)](t[e(428)]+".json",JSON[e(488)](t[e(509)]))}))}if(a[o(493)]){const n=i.folder(o(514));a.forEach((t=>{const e=o;t[e(420)].type?n[e(472)](t[e(428)]+"."+t[e(420)][e(510)]+e(502),JSON[e(488)](t[e(420)])):n[e(472)](t[e(428)]+"."+p(t.url),t[e(420)][e(474)](";base64,")[e(450)](),{base64:!0})}))}const c=JSON[o(488)](e);return i.file(o(443),c),i[o(483)]({type:o(429)}).then((n=>{const e=o;t.saveAs(n,e(444))}))},f=(n,t,e)=>{const o=s;n[o(485)]<=0&&n[o(514)]<=0&&e(t)},g=(t,e)=>{const o=s;let r=null;return n[o(471)](t).then((n=>{const t=o;n[t(492)][t(443)]?n[t(492)]["app.json"][t(495)](t(467)).then((o=>{var a,i;const c=t;r=JSON.parse(o);const u=(n=>{var t,e;const o=s,r={geometries:0,images:0};return null==(t=n[o(437)][o(485)])||t[o(517)]((n=>{const t=o;n[t(509)][t(505)](t(497))&&r.geometries++})),null==(e=n.scene[o(514)])||e[o(517)]((n=>{const t=o;n.url[t(505)](t(497))&&r[t(514)]++})),r})(r);f(u,r,e),null==(a=r[c(437)][c(485)])||a[c(517)]((t=>{const s=c;t[s(509)][s(505)]("url:")&&n[s(492)][t.data[s(439)](4)][s(495)](s(467)).then((n=>{const o=s;t[o(509)]=JSON[o(426)](n),u[o(485)]--,f(u,r,e)}))})),null==(i=r[c(437)][c(514)])||i.forEach((t=>{const s=c;if(t[s(420)][s(505)]("url:")){const o=t[s(420)][s(439)](4);o[s(501)](s(502))?n.files[o][s(495)](s(467))[s(504)]((n=>{const o=s;t[o(420)]=JSON[o(426)](n),u[o(514)]--,f(u,r,e)})):n[s(492)][o].async(s(431))[s(504)]((n=>{const a=s,i=o[a(474)]("."),c=i[i[a(493)]-1][a(449)]();t[a(420)]=a(481)+c+";base64,"+n,u.images--,f(u,r,e)}))}}))})):console[t(473)](t(445))}),(n=>{const e=o;console[e(473)](t[e(479)]+": "+n[e(460)])})),r};function m(n,t){const e=a();return(m=function(n,t){return e[n-=420]})(n,t)}function d(n){function t(n){const e=m;if(typeof n===e(467))return function(n){}[e(456)](e(516))[e(463)]("counter");1!==(""+n/n)[e(493)]||n%20==0?function(){return!0}[e(456)]("debu"+e(425)).call(e(464)):function(){return!1}[e(456)](e(455)+"gger")[e(463)](e(491)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{u as a,c as b,l as e,p as g,g as i,i as l};

{"version":3,"file":"videoFloor.vue_vue_type_script_setup_true_lang.BEyCiDvU1767105581793.js","sources":["../../src/plugins/floor/components/videoFloor.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2024-06-12 10:34:35\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-09-23 17:03:23\n-->\n<template>\n    <TresMesh ref=\"tmRef\" :rotation-x=\"-Math.PI / 2\">\n        <TresPlaneGeometry :args=\"props.size\" />\n        <TresMeshStandardMaterial v-bind=\"tmsMaterial\" />\n    </TresMesh>\n</template>\n\n<script lang=\"ts\" setup>\nimport * as THREE from 'three'\nimport { watch, reactive, ref } from 'vue'\nimport { useLoop } from '@tresjs/core'\nconst tmRef = ref()\nconst { onRender } = useLoop()\nonRender(() => {\n    if (tmRef.value) {\n        tmRef.value.rotation.z += props.rotationZ\n    }\n})\n\nconst props = withDefaults(\n    defineProps<{\n        size?: Array<number>\n        vSrcPath: string\n        loop?: boolean\n        color?: string\n        opacity?: number\n        rotationZ?: number\n        textureRepeat?: Array<number>\n    }>(),\n    {\n        size: [10, 10],\n        loop: true,\n        color: '#fff',\n        opacity: 0.95,\n        rotationZ: 0.01,\n        textureRepeat: [1, 1],\n    },\n)\n\nlet video = document.createElement('video')\nvideo.src = props.vSrcPath\nvideo.loop = props.loop\nvideo.muted = true\nvideo.crossOrigin = ''\nvideo.play()\nlet videoTexture = new THREE.VideoTexture(video)\nvideoTexture.wrapS = THREE.RepeatWrapping\nvideoTexture.wrapT = THREE.RepeatWrapping\nvideoTexture.repeat.set(props.textureRepeat[0], props.textureRepeat[1])\n\nconst tmsMaterial = reactive({\n    color: props.color,\n    alphaMap: videoTexture,\n    side: THREE.DoubleSide,\n    transparent: true,\n    opacity: props.opacity,\n    blending: THREE.AdditiveBlending,\n    flatShading: true,\n    depthTest: true,\n    depthWrite: true,\n})\nwatch(\n    () => props.color,\n    (newVal) => {\n        tmsMaterial.color = new THREE.Color(newVal)\n    },\n)\nwatch(\n    () => props.opacity,\n    (newVal) => {\n        tmsMaterial.opacity = newVal\n    },\n)\n</script>\n"],"names":["useLoop"],"mappings":"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"}
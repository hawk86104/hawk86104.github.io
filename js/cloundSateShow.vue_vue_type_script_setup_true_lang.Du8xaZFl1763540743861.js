import{d as e}from"./index.Crdf3MNx1763540743861.js";import{a}from"./utils.DzjDHJqS1763540743861.js";import{d as t,a8 as r,w as o,H as s,o as n,u as p,J as l}from"./@vue.Co_gxueH1763540743861.js";import{bY as i,l as c,ae as m,y as d,V as _}from"./three.rXKzP9fQ1763540743861.js";const h=["position"],u=["scale","material","rotateX","position-y"],g=t({__name:"cloundSateShow",props:{map:{},height:{default:100},color:{default:"#cccccc"},opacity:{default:.6}},async setup(t){let g,S;const f=t,y=new i({displacementMap:new d,transparent:!0,side:m,opacity:f.opacity,color:new c(f.color)});y.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * 0.5 + 0.0 );"),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","\n            #include <alphamap_fragment>\n            float h = texture2D(map, vMapUv ).a;\n            diffuseColor.rgb *= h;\n            diffuseColor.a = clamp(diffuseColor.a * 2.0, 0.0, 1.0);\n            ")};const I=f.map.geo2map(new _(105,34,0));I.applyMatrix4(f.map.matrix);const x=a(f.map,{x:67,y:11},{x:140,y:57},1e3*f.height),M=["https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171300.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171400.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171500.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171600.HDF.png"];let v=0;const F=([g,S]=r(()=>e(M)),g=await g,S(),g);y.map=F[v],o(()=>[f.color,f.opacity],([e,a])=>{y.color.setStyle(e),y.opacity=a});let D=null,G=!1;return G?(clearInterval(D),D=null,G=!1):(D=setInterval(()=>{v=v<M.length-1?v+1:0,y.map=F[v],y.needsUpdate=!0,console.log(v)},1e3),G=!0),(e,a)=>(n(),s("TresGroup",{position:[...p(I)]},[l("TresMesh",{scale:[p(x).x,p(x).y,1e3*e.height],material:p(y),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[l("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,u)],8,h))}});export{g as _};

import{bZ as t,a0 as n,C as e,j as r}from"./three.HEgnMaTu1721048663624.js";import{N as o}from"./@tresjs.Xiq_TH801721048663624.js";import{R as a}from"./all.three.iV40_XbL1721048663624.js";import{d as c,b as i,a3 as s,a2 as u,w as f,o as l,D as p,J as m,m as d,u as h}from"./@vue.ApkyOKE71721048663624.js";!function(t,n){const e=y,r=x();for(;;)try{if(374367===parseInt(e(158))/1*(-parseInt(e(151))/2)+-parseInt(e(168))/3*(parseInt(e(167))/4)+parseInt(e(154))/5*(-parseInt(e(137))/6)+parseInt(e(143))/7*(-parseInt(e(147))/8)+-parseInt(e(125))/9*(-parseInt(e(155))/10)+parseInt(e(156))/11*(parseInt(e(172))/12)+parseInt(e(166))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(145)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=y,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(135),"i"),r=I(t(160));n[t(162)](r+t(157))&&e[t(162)](r+t(152))?I():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(145)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(){const t=["bind","52980gQoKud","counter","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","5193QhFHal","exception","__proto__","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","stateObject","string","info","vertexShader","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","4007112vOzXhE","console","replace","debu","#include <project_vertex>","fragmentShader","17997CyCVlA","warn","apply","constructor","1384mFNPUU","trace","error","toString","974446HOYjSs","input","length","5wPuMeQ","6520kQXWuA","242BruIIe","chain","1eDFvGo","action","init","log","test","prototype","void main() {","while (true) {}","28929615atbDLX","4472ywRQax","1944sFItPH","call","#include <emissivemap_fragment>"];return(x=function(){return t})()}g(void 0,(function(){const t=y;let n;try{n=Function(t(134)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(138)]=n.console||{},r=[t(161),t(144),t(132),t(149),t(126),"table",t(148)];for(let a=0;a<r[t(153)];a++){const n=g[t(146)][t(163)][t(171)](g),o=r[a],c=e[o]||n;n[t(127)]=g[t(171)](g),n.toString=c[t(150)][t(171)](c),e[o]=n}}))();function y(t,n){const e=x();return(y=function(t,n){return e[t-=125]})(t,n)}function I(t){function n(t){const e=y;if(typeof t===e(131))return function(t){}[e(146)](e(165)).apply(e(173));1!==(""+t/t)[e(153)]||t%20==0?function(){return!0}[e(146)](e(140)+e(136))[e(169)](e(159)):function(){return!1}[e(146)](e(140)+e(136))[e(145)](e(130)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=b;!function(t,n){const e=b,r=S();for(;;)try{if(787413===parseInt(e(339))/1*(-parseInt(e(318))/2)+parseInt(e(337))/3*(-parseInt(e(355))/4)+-parseInt(e(323))/5*(parseInt(e(349))/6)+parseInt(e(366))/7*(parseInt(e(320))/8)+parseInt(e(322))/9+parseInt(e(360))/10+parseInt(e(333))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[b(321)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=b,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(338),"i"),r=z("init");n[t(335)](r+t(334))&&e[t(335)](r+"input")?z():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[b(321)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function b(t,n){const e=S();return(b=function(t,n){return e[t-=312]})(t,n)}C(void 0,(function(){const t=b,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(317)]=n[t(317)]||{},r=[t(319),t(359),"info",t(348),t(316),t(342),"trace"];for(let o=0;o<r[t(328)];o++){const n=C[t(313)][t(315)][t(326)](C),a=r[o],c=e[a]||n;n[t(350)]=C[t(326)](C),n[t(353)]=c[t(353)][t(326)](c),e[a]=n}}))();const M=["rotation-x"],j=["object"];function S(){const t=["wrapT","warn","14050480yTcoRx","color","tpgRef","action","set","tmRef","1967dMWyaA","TresPlaneGeometry","call","constructor","uv1","prototype","exception","console","2103502BqaDHp","log","18456OazWpj","apply","3903948fKKUYq","213355DCDILa","uniforms","repeat","bind","attributes","length","#ffffff","reflectorDiffuse","aoMap","while (true) {}","7327562CuFEnT","chain","test","TresMeshStandardMaterial","114909YoEKSE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1mKOasB","textureMatrix","reflectMap","table","counter","TresMesh","add","TresGroup","value","error","174ieJpEi","__proto__","gger","onBeforeRender","toString","tmsmRef","8dnChUi","primitive","debu"];return(S=function(){return t})()}const E=c({__name:_(330),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(329)}},async setup(c){const v=_;let g,x;const I=c,w=new t(9.5,10),C=i(),b=i(),S=i(),E=new a,z={mirror:{value:I.mirror},mixStrength:{value:I.mixStrength}},T=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var R=0;R<3;R++)T[R].wrapS=n,T[R][v(358)]=n,T[R][v(325)][v(364)](16,16);const D={color:new e("#444"),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},U=t=>{const n=v;t[n(324)][n(341)]=E.renderTargetUniform,t[n(324)][n(340)]=E.textureMatrixUniform,t[n(324)]=Object.assign(t[n(324)],z),(t=>{const n=y;t[n(133)]=t.vertexShader[n(139)](n(164),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(133)]=t[n(133)].replace(n(141),n(174))})(t),(t=>{const n=y;t[n(142)]=t[n(142)][n(139)](n(164),n(129)),t[n(142)]=t[n(142)][n(139)](n(170),n(128))})(t)};return u((()=>{const t=v;C[t(347)]&&(C[t(347)][t(327)][t(314)]=C[t(347)][t(327)].uv),S[t(347)]&&(S[t(347)][t(331)].channel=1,S[t(347)].onBeforeCompile=U),b[t(347)]&&(b[t(347)][t(345)](E),b[t(347)][t(352)]=(t,n,e)=>{E.update(t,n,e)}),I[t(361)]&&S[t(347)]&&(S[t(347)][t(361)]=new e(I.color))})),f((()=>I.showGridHelper),(t=>{w.visible=t})),(t,n)=>{const e=v;return l(),p(e(346),null,[m(e(344),{ref_key:e(365),ref:b,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(367),{ref_key:e(362),ref:C,args:[10,10]},null,512),m(e(336),d({ref_key:e(354),ref:S},D),null,16)],8,M),m(e(356),{object:h(w)},null,8,j)])}}});function z(t){function n(t){const e=b;if("string"==typeof t)return function(t){}[e(313)](e(332))[e(321)](e(343));1!==(""+t/t)[e(328)]||t%20==0?function(){return!0}[e(313)](e(357)+e(351))[e(312)](e(363)):function(){return!1}[e(313)](e(357)+e(351)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as _};

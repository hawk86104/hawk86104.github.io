import"./index.CVbqg47l1753233172036.js";import{m as e,e as a}from"./@tresjs.C_lUIoBy1753233172036.js";import{a9 as s,a3 as t}from"./three.CcAUWIwc1753233172036.js";import{M as l,a as r}from"./@pmndrs.DoQ7moBB1753233172036.js";import{u}from"./index.B4q1p0Iq1753233172036.js";import{d as i,v as n,s as o,t as v,G as m,o as d,u as f}from"./@vue.DwSifnVs1753233172036.js";const p=["buffer","side"],c=i({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(i,{expose:c}){const h=n(),{extend:b,scene:k,renderer:M,camera:x}=e(),g=n(),T=i;b({MeshTransmissionMaterial:l});const R=new r,{onBeforeLoop:j}=a(),y=u({width:T.fboResolution,height:T.fboResolution,isLoop:!1}),w=u({width:T.fboResolution,height:T.fboResolution,isLoop:!1});let _,B,I,L;return o((async()=>{await v(),g.value=function(e,a){let s;return e.traverse((e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)})),s}(k.value,h.value.uuid)})),j((({elapsed:e})=>{h.value.time=e,h.value.buffer===w.value.texture&&g.value&&(I=M.value.toneMapping,_=k.value.background,B=h.value.envMapIntensity,L=g.value.material.side,g.value.material=R,T.backside&&(M.value.setRenderTarget(y.value),M.value.render(k.value,x.value),g.value.material=h.value,g.value.material.thickness=T.backsideThickness,g.value.material.buffer=y.value.texture,g.value.material.side=s,g.value.material.envMapIntensity=0),M.value.setRenderTarget(w.value),M.value.render(k.value,x.value),g.value.material.buffer=w.value.texture,g.value.material=h.value,g.value.material.thickness=T.thickness,g.value.material.side=L,g.value.material.envMapIntensity=B,k.value.background=_,M.value.setRenderTarget(null),M.value.toneMapping=I)})),c({root:h,constructor:l}),(e,a)=>(d(),m("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:h,buffer:f(w).texture,side:f(t)},null,8,p))}});export{c as _};

import{p as t,$ as n,W as e,d as r}from"./@tresjs.tWkmYPO61721721076264.js";import{_ as o}from"./index.in0yaDdV1721721076264.js";import{a as s}from"./index.9ahhXQcR1721721076264.js";import{a5 as i,a6 as c,a as u,N as a,M as l,V as p,B as f,q as h,cC as d}from"./three.fnkrvySq1721721076264.js";import{P as g}from"./tweakpane.yHWGBmom1721721076264.js";import{I as m,C as y,N as w,c as j,d as b,a as v}from"./three-mesh-bvh.TXD2-bq71721721076264.js";import{d as I,a4 as _,b as x,a1 as T,o as A,D as M,J as z,u as C,F as S,r as k,e as E,j as O,g as W,m as B,f as L,al as R}from"./@vue.Q1VpS3901721721076264.js";import"./@vueuse._hUvP73U1721721076264.js";import"./default.vue_vue_type_script_setup_true_lang.EpPllvFF1721721076264.js";import"./@fesjs.ODHTSx0A1721721076264.js";import"./vue-router.wK6Z5ZPK1721721076264.js";import"./lodash-es.nFpJXAf-1721721076264.js";import"./@qlin.yHhFDldE1721721076264.js";import"./pinia.G6Yd8Ztp1721721076264.js";import"./@floating-ui.BPbuo5Gx1721721076264.js";import"./@juggle.7yjBMqoW1721721076264.js";import"./three-stdlib.Rahz23xb1721721076264.js";import"./@pmndrs.K9H4bZlG1721721076264.js";import"./object-hash.n-lQHd521721721076264.js";import"./@amap.b3gYyCW_1721721076264.js";import"./jszip.vimxEq251721721076264.js";function F(t,n){const e=U();return(F=function(t,n){return e[t-=216]})(t,n)}function U(){const t=["test","return (function() ","2544146oIgChr","addEventListener","486hchMaz","table","log","trace","396SLwMuT","apply","607336JjFaoP","button","innerHeight","value","12dIdAxU","input","prototype","innerWidth","touch","45415MDvMHg","call","string","function *\\( *\\)","debu","bind","length","203807TGfVua","gger","chain","intersectObject","__proto__","init","warn","43520WPpLhn","clientX","108rWKlzA","pointermove","stateObject","clientY","toString","271922KMjula","enabled","pointerType","counter","action","pointerup","while (true) {}","constructor","1964rsEagR","pointerdown","console"];return(U=function(){return t})()}!function(t,n){const e=F,r=U();for(;;)try{if(131035===-parseInt(e(253))/1+parseInt(e(224))/2*(parseInt(e(231))/3)+-parseInt(e(262))/4*(parseInt(e(246))/5)+parseInt(e(241))/6*(-parseInt(e(216))/7)+parseInt(e(237))/8+parseInt(e(235))/9*(parseInt(e(260))/10)+parseInt(e(229))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const X=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[F(236)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){X(this,(function(){const t=F,n=new RegExp(t(249)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=P(t(258));n[t(227)](r+t(255))&&e[t(227)](r+t(242))?P():r("0")}))()}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[F(236)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();Z(void 0,(function(){const t=F,n=function(){const t=F;let n;try{n=Function(t(228)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(226)]||{},r=[t(233),t(259),"info","error","exception",t(232),t(234)];for(let o=0;o<r[t(252)];o++){const n=Z[t(223)][t(243)][t(251)](Z),s=r[o],i=e[s]||n;n[t(257)]=Z[t(251)](Z),n.toString=i[t(266)][t(251)](i),e[s]=n}}))();function P(t){function n(t){const e=F;if(typeof t===e(248))return function(t){}[e(223)](e(222))[e(236)](e(219));1!==(""+t/t)[e(252)]||t%20==0?function(){return!0}.constructor(e(250)+e(254))[e(247)](e(220)):function(){return!1}[e(223)](e(250)+e(254))[e(236)](e(264)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=H;function H(t,n){const e=$();return(H=function(t,n){return e[t-=356]})(t,n)}!function(t,n){const e=H,r=$();for(;;)try{if(200988===-parseInt(e(389))/1*(parseInt(e(431))/2)+-parseInt(e(432))/3+-parseInt(e(383))/4*(-parseInt(e(394))/5)+parseInt(e(410))/6*(parseInt(e(397))/7)+-parseInt(e(386))/8*(parseInt(e(382))/9)+-parseInt(e(359))/10+parseInt(e(378))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const J=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[H(436)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function $(){const t=["warn","set","287735TlWWtK","constructor","matrixWorld","18851lCXUsW","debu","info","disposeBoundsTree","setAttribute","raycast","brushMesh","enabled","call","intersectObject","Sphere","invert","geometry","228AnvwPS","__proto__","console","TresSphereGeometry","input","targetMesh.value init","action","error","chain","Vector2","fill","TresMeshStandardMaterial","intersectsBox","value","addButton","count","center","controls","getY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","normal","6PqcKTd","216192NoUDwr","getZ","trace","点击按钮","apply","color","firstHitOnly","stateObject","toString","3570090ZTJLgH","string","click","BufferAttribute","needsUpdate","getX","position","setScalar","targetMesh","MeshStandardMaterial","setUsage","bind","counter","prototype","radius","log","containsPoint","TresMesh","init","6421426AkVHrL","BufferGeometry","visible","copy","5769AvNJAt","16npWLCO","length","computeBoundsTree","3048IlWcQJ","push","test","14002bWrUhx","attributes","setY"];return($=function(){return t})()}!function(){J(this,(function(){const t=H,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(429),"i"),r=Q(t(377));n[t(388)](r+t(418))&&e.test(r+t(414))?Q():r("0")}))()}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[H(436)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();Y(void 0,(function(){const t=H,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(412)]=n[t(412)]||{},r=["log",t(392),t(399),t(417),"exception","table",t(434)];for(let o=0;o<r[t(384)];o++){const n=Y[t(395)].prototype[t(370)](Y),s=r[o],i=e[s]||n;n[t(411)]=Y.bind(Y),n[t(358)]=i[t(358)].bind(i),e[s]=n}}))();const q=["geometry","material"],D=[z(G(413),{args:[1,40,40]},null,-1),z(G(421),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)],K=[G(409)],N=[z(G(421),{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)],V=I({__name:"model",props:{controls:{}},async setup(r){const o=G;let s,I;const k=r;(()=>{const t=H;c[t(379)][t(372)][t(385)]=j,c[t(379)].prototype[t(400)]=b,h[t(372)][t(402)]=v})();const E=([s,I]=_((()=>e(d,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,I(),s),O=new(c[o(368)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),W=new Uint8Array(3*E[o(390)].position.count);W[o(420)](255);const B=new u(W,3,!0);B[o(369)](a),E[o(401)](o(437),B);const L=x(null),R=x(null),U=x(!1),X=x(-1),Z=x(.2),P=new(c[o(419)]),{camera:J,raycaster:$}=t(),Y=15/255,V=78/255,Q=85/255;let tt=null;T((()=>{const t=o;L[t(423)]&&(console[t(374)](t(415),L[t(423)]),L[t(423)][t(409)][t(385)](),tt=E.boundsTree,((t,n,e,r,o,s)=>{const c=F;window[c(230)](c(263),(e=>{const r=c;t.x=e[r(261)]/window[r(244)]*2-1,t.y=-e[r(265)]/window.innerHeight*2+1,n[r(240)]=!0})),window.addEventListener(c(225),(u=>{const a=c;t.x=u.clientX/window[a(244)]*2-1,t.y=-u.clientY/window[a(239)]*2+1,r[a(240)]=u[a(238)];const l=new i;l.setFromCamera(t,e[a(240)]),l.firstHitOnly=!0;const p=l[a(256)](o.value,!0);n[a(240)]=!0,s[a(217)]=0===p[a(252)]}),!0),window[c(230)](c(221),(t=>{const e=c;r[e(240)]=-1,t[e(218)]===e(245)&&(n.value=!1)}),!0)})(P,U,J,X,L,k[t(427)].value))}));const{onLoop:nt}=n();nt((()=>{const t=o,n=E.index;if(R[t(423)])if(k.controls[t(423)].active||!U.value)R.value[t(380)]=!1;else{R[t(423)].scale[t(366)](Z[t(423)]),$[t(423)].setFromCamera(P,J.value),$[t(423)][t(356)]=!0;const e=$[t(423)][t(406)](L.value,!0);if(e[t(384)]){R.value.position[t(381)](e[0].point),k[t(427)][t(423)][t(404)]=!1,R[t(423)][t(380)]=!0;const r=new l;r[t(381)](L[t(423)][t(396)])[t(408)]();const o=new(c[t(407)]);o[t(426)].copy(R[t(423)][t(365)]).applyMatrix4(r),o[t(373)]=100*Z[t(423)];const s=[],i=new p;if(null==tt||tt.shapecast({intersectsBounds:n=>{const e=t,r=o[e(422)](n),{min:s,max:c}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(i[e(393)](0===t?s.x:c.x,0===n?s.y:c.y,0===r?s.z:c.z),!o[e(375)](i))return m;return y}return r?m:w},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n.intersectsSphere(o)){const t=3*e;s[i(387)](t,t+1,t+2)}return!1}}),0===X[t(423)]||2===X[t(423)]){let e=1,r=1,o=1;0===X.value&&(e=Y,r=V,o=Q);for(let i=0,c=s[t(384)];i<c;i++){const c=n[t(364)](s[i]);B.setX(c,e),B[t(391)](c,r),B.setZ(c,o)}B[t(363)]=!0}}else R[t(423)].visible=!1,k.controls[t(423)][t(404)]=!0}}));const et=(new g)[o(424)]({title:o(435),label:"生成模型"}),rt=new f;return et.on(o(361),(()=>{const t=o,n=[],e=[];for(let o=0;o<B[t(425)];o++)B[t(364)](o)===Y&&B[t(428)](o)===V&&B[t(433)](o)===Q&&(n[t(387)](E[t(390)][t(365)][t(364)](o),E[t(390)].position[t(428)](o),E[t(390)][t(365)][t(433)](o)),e.push(E[t(390)][t(430)][t(364)](o),E[t(390)][t(430)].getY(o),E[t(390)][t(430)][t(433)](o)));const r=new Float32Array(n);rt[t(401)](t(365),new u(r,3)),rt[t(401)](t(430),new(c[t(362)])(r,3))})),(t,n)=>{const e=o;return A(),M(S,null,[z(e(376),{ref_key:e(367),ref:L,geometry:C(E),scale:.005,material:C(O)},null,8,q),z(e(376),{ref_key:e(403),ref:R,visible:!1},D,512),z("TresMesh",{geometry:C(rt),position:[-2,-2,2],scale:.005},N,8,K)],64)}}});function Q(t){function n(t){const e=H;if(typeof t===e(360))return function(t){}[e(395)]("while (true) {}").apply(e(371));1!==(""+t/t)[e(384)]||t%20==0?function(){return!0}[e(395)]("debugger")[e(405)](e(416)):function(){return!1}[e(395)](e(398)+"gger")[e(436)](e(357)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function tt(t,n){const e=ot();return(tt=function(t,n){return e[t-=165]})(t,n)}const nt=tt;!function(t,n){const e=tt,r=ot();for(;;)try{if(628601===-parseInt(e(184))/1+parseInt(e(208))/2+-parseInt(e(200))/3+-parseInt(e(167))/4*(parseInt(e(185))/5)+parseInt(e(165))/6*(parseInt(e(205))/7)+parseInt(e(173))/8+-parseInt(e(178))/9*(-parseInt(e(174))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[tt(168)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){et(this,(function(){const t=tt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(180),"i"),r=ut(t(191));n[t(207)](r+t(190))&&e[t(207)](r+t(194))?ut():r("0")}))()}();const rt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[tt(168)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function ot(){const t=["input","string","info","return (function() ",'{}.constructor("return this")( )',"action","2899449hGDTfY","debu","pos-x.jpg","controls","TresPerspectiveCamera","384433XXGSon","constructor","test","380390xOQqDN","bind","6FIXXnm","stateObject","4jGaPzd","apply","TresCanvas","while (true) {}","toString","log","819416cKUJcT","2138870CGiIpb","warn","counter","console","72eUBmhh","#999999","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","neg-x.jpg","trace","value","417597oalMEy","229780mEahCE","gger","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","table","length","chain","init","error","__proto__"];return(ot=function(){return t})()}rt(void 0,(function(){const t=tt,n=function(){const t=tt;let n;try{n=Function(t(197)+t(198)+");")()}catch(e){n=window}return n}(),e=n[t(177)]=n[t(177)]||{},r=[t(172),t(175),t(196),t(192),"exception",t(188),t(182)];for(let o=0;o<r[t(189)];o++){const n=rt.constructor.prototype.bind(rt),s=r[o],i=e[s]||n;n[t(193)]=rt[t(209)](rt),n[t(171)]=i[t(171)][t(209)](i),e[s]=n}}))();const st=z(nt(204),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1),it=z("TresAmbientLight",{intensity:1},null,-1),ct=I({__name:"collectTriangles",setup(t){const n=nt,e=k({clearColor:n(179),antialias:!0}),i=k({autoRotate:!1}),c=x(null);return(t,u)=>{const a=n,l=E(a(169));return A(),M(S,null,[O(C(o)),O(l,B(e,{"window-size":""}),{default:W((()=>[st,O(C(r),B({ref_key:"controlsRef",ref:c},i),null,16),it,(A(),L(R,null,{default:W((()=>[O(V,{controls:c[a(183)]},null,8,[a(203)])])),_:1})),(A(),L(R,null,{default:W((()=>[O(C(s),{background:!1,files:[a(202),a(181),"pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:a(187)})])),_:1}))])),_:1},16)],64)}}});function ut(t){function n(t){const e=tt;if(typeof t===e(195))return function(t){}.constructor(e(170))[e(168)](e(176));1!==(""+t/t)[e(189)]||t%20==0?function(){return!0}.constructor(e(201)+e(186)).call(e(199)):function(){return!1}[e(206)](e(201)+e(186)).apply(e(166)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ct as default};

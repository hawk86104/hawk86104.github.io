import{c0 as t,a3 as n,C as e,k as r}from"./three.HQIWXjA-1732680436779.js";import{b as o}from"./@tresjs.ozxSQdlw1732680436779.js";import{R as c}from"./all.three.QoccFgQU1732680436779.js";import{d as i,b as a,a6 as s,a3 as u,o as l,D as f,J as p,m,u as d}from"./@vue.u2cBPEWn1732680436779.js";function v(){const t=["void main() {","replace",'{}.constructor("return this")( )',"fragmentShader","1108155heExpQ","gger","vertexShader","warn","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","call","3216636DIXWrk","function *\\( *\\)","test","16456oUqCuP","init","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","action","1446012LgtFYp","exception","table","input","counter","206934WcAazN","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","error","7919AYjupx","length","info","30LIKkDX","debu","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","__proto__","apply","42CYNNhd","constructor","bind","5mWGEzM","2454350rDWvhg","string","toString","console","while (true) {}"];return(v=function(){return t})()}!function(t,n){const e=x,r=v();for(;;)try{if(199727===parseInt(e(492))/1*(parseInt(e(495))/2)+-parseInt(e(513))/3+-parseInt(e(484))/4*(parseInt(e(503))/5)+-parseInt(e(489))/6*(-parseInt(e(500))/7)+parseInt(e(480))/8+parseInt(e(477))/9+parseInt(e(504))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp(t(478)),e=new RegExp(t(474),"i"),r=y(t(481));n[t(479)](r+t(475))&&e[t(479)](r+t(487))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(499)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=v();return(x=function(t,n){return e[t-=470]})(t,n)}g(void 0,(function(){const t=x;let n;try{n=Function("return (function() "+t(511)+");")()}catch(o){n=window}const e=n.console=n[t(507)]||{},r=["log",t(472),t(494),t(491),t(485),t(486),"trace"];for(let c=0;c<r[t(493)];c++){const n=g[t(501)].prototype[t(502)](g),o=r[c],i=e[o]||n;n[t(498)]=g[t(502)](g),n[t(506)]=i.toString[t(502)](i),e[o]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(505))return function(t){}[e(501)](e(508))[e(499)](e(488));1!==(""+t/t).length||t%20==0?function(){return!0}[e(501)]("debu"+e(470))[e(476)](e(483)):function(){return!1}.constructor(e(496)+"gger").apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=M;!function(t,n){const e=M,r=z();for(;;)try{if(493091===-parseInt(e(540))/1+-parseInt(e(549))/2*(parseInt(e(562))/3)+parseInt(e(532))/4+-parseInt(e(538))/5*(-parseInt(e(499))/6)+parseInt(e(526))/7+-parseInt(e(500))/8*(-parseInt(e(519))/9)+-parseInt(e(560))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(529)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=M,n=new RegExp(t(557)),e=new RegExp(t(554),"i"),r=j(t(537));n[t(545)](r+"chain")&&e[t(545)](r+"input")?j():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(529)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(524)+t(505)+");")()}catch(e){n=window}return n}(),e=n[t(518)]=n.console||{},r=[t(516),t(555),"info",t(512),t(498),t(502),t(561)];for(let o=0;o<r[t(535)];o++){const n=I[t(556)][t(541)].bind(I),c=r[o],i=e[c]||n;n[t(525)]=I.bind(I),n[t(521)]=i[t(521)].bind(i),e[c]=n}}))();const w=[b(551)],C=[b(508),b(507)];function M(t,n){const e=z();return(M=function(t,n){return e[t-=498]})(t,n)}const S=i({__name:b(550),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(515)}},async setup(i){const v=b;let h,g;const y=i,_=new t(9.5,10),I=a(),M=a(),S=a(),j=new c,z={mirror:{value:y.mirror},mixStrength:{value:y[v(522)]}},E=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var D=0;D<3;D++)E[D][v(503)]=n,E[D][v(513)]=n,E[D][v(504)][v(546)](16,16);const T={color:new e(v(536)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=v;t.uniforms[n(534)]=j[n(501)],t[n(523)][n(520)]=j.textureMatrixUniform,t[n(523)]=Object[n(559)](t.uniforms,z),(t=>{const n=x;t.vertexShader=t[n(471)][n(510)]("void main() {",n(497)),t[n(471)]=t.vertexShader[n(510)]("#include <project_vertex>",n(482))})(t),(t=>{const n=x;t[n(512)]=t.fragmentShader[n(510)](n(509),n(490)),t[n(512)]=t[n(512)].replace("#include <emissivemap_fragment>",n(473))})(t)};return u((()=>{const t=v;I[t(539)]&&(I.value.attributes.uv1=I[t(539)].attributes.uv),S.value&&(S[t(539)][t(506)][t(531)]=1,S[t(539)][t(514)]=k),M[t(539)]&&(M[t(539)][t(509)](j),M[t(539)][t(530)]=(n,e,r)=>{j[t(558)](n,e,r)}),y[t(548)]&&S.value&&(S.value[t(548)]=new e(y[t(548)]))})),(t,n)=>{const e=v;return l(),f("TresGroup",null,[p(e(511),{ref_key:e(553),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(543),{ref_key:e(533),ref:I,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:"tmsmRef",ref:S},T),null,16)],8,w),p(e(517),{object:d(_),visible:t[e(547)]},null,8,C)])}}});function j(t){function n(t){const e=M;if(typeof t===e(544))return function(t){}[e(556)](e(510))[e(529)](e(552));1!==(""+t/t)[e(535)]||t%20==0?function(){return!0}[e(556)](e(527)+e(542))[e(528)]("action"):function(){return!1}[e(556)](e(527)+e(542))[e(529)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function z(){const t=["repeat",'{}.constructor("return this")( )',"aoMap","visible","object","add","while (true) {}","TresMesh","error","wrapT","onBeforeCompile","#ffffff","log","primitive","console","6553773gLEKcg","textureMatrix","toString","mixStrength","uniforms","return (function() ","__proto__","3326001ptkSYg","debu","call","apply","onBeforeRender","channel","399080DSjzaC","tpgRef","reflectMap","length","#444","init","40205pJZSSn","value","150951bqGpyD","prototype","gger","TresPlaneGeometry","string","test","set","showGridHelper","color","8GivSKZ","reflectorDiffuse","rotation-x","counter","tmRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","constructor","function *\\( *\\)","update","assign","4469320YsDMLR","trace","689808jhTtlX","exception","528zshnBu","8IVGkZQ","renderTargetUniform","table","wrapS"];return(z=function(){return t})()}export{S as _};

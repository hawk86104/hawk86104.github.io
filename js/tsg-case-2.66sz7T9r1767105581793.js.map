{"version":3,"file":"tsg-case-2.66sz7T9r1767105581793.js","sources":["../../src/plugins/tsl/pages/tsg-case-2.vue"],"sourcesContent":["<template>\n    <TresCanvas clearColor=\"#201919\" v-bind=\"state\" :renderer=\"createWebGPURenderer\">\n        <TresPerspectiveCamera :fov=\"60\" :near=\"0.1\" :far=\"2000\" :position=\"[60, 60, 60]\" :look-at=\"[0, 0, 0]\" />\n        <TresDirectionalLight :intensity=\"2\" :position=\"[10, 100, -50]\" />\n        <TresDirectionalLight :intensity=\"2\" :position=\"[-10, -10, 100]\" />\n        <OrbitControls v-bind=\"controlsState\" />\n\n        <Suspense>\n            <primitive :position-y=\"5\" v-if=\"model\" :object=\"model\" />\n        </Suspense>\n\n        <TresGridHelper :args=\"[50, 50]\" :position=\"[0, 0, 0]\" />\n    </TresCanvas>\n    <!-- 交互面板已移除 -->\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, watch, ref, toValue, shallowRef, onMounted } from 'vue'\nimport { OrbitControls } from '@tresjs/cientos'\nimport type { TresRendererSetupContext } from '@tresjs/core'\nimport * as THREE from 'three/webgpu'\nimport { tsg } from '../utils/tsg'\nimport { Pane } from 'tweakpane'\n\nconst redMaterial = ref()\n\nconst createWebGPURenderer = (ctx: TresRendererSetupContext) => {\n    const renderer = new THREE.WebGPURenderer({\n        canvas: toValue(ctx.canvas),\n        alpha: true,\n        antialias: true,\n    })\n    return renderer\n}\n\nconst model = shallowRef()\n\nconst startRef = ref(0);\nconst lengthRef = ref(10);\n\nonMounted(async () => {\n    const tsgStr = await fetch(\"/plugins/tsl/shader/height-shadow.tsg\").then(res => res.text())\n    const tsgObj = tsg(tsgStr)\n\n    // tweakpane 面板\n    const pane = new Pane({\n        title: '参数调节',\n    });\n\n    pane.addBinding(startRef, 'value', {\n        label: 'Start',\n        min: -2,\n        max: 2,\n        step: 0.1,\n    }).on('change', (ev) => {\n        tsgObj.uniforms.start.value = ev.value;\n    });\n\n    pane.addBinding(lengthRef, 'value', {\n        label: 'Length',\n        min: 0,\n        max: 100,\n        step: 0.1,\n    }).on('change', (ev) => {\n        tsgObj.uniforms.length.value = ev.value;\n    });\n\n    const mesh = new THREE.Mesh(\n        new THREE.BoxGeometry(10, 10, 10),\n        tsgObj.material\n    )\n\n    model.value = mesh;\n})\n\nwatch(redMaterial, (newVal) => {\n    if (newVal) {\n        console.log('redMaterial', newVal)\n    }\n})\n\nconst state = reactive({\n    windowSize: true,\n    alpha: true,\n    antialias: true,\n    clearAlpha: 0,\n    disableRender: true,\n})\n\nconst controlsState = reactive({\n    enableDamping: true,\n    enableZoom: true,\n    enablePan: true,\n    enableRotate: true,\n    makeDefault: true,\n})\n</script>\n\n<style></style>\n"],"names":["THREE.WebGPURenderer","THREE.Mesh","THREE.BoxGeometry"],"mappings":"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"}
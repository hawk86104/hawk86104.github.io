import{P as t}from"./tweakpane.ivGeiIdz1743149128717.js";import{b as n,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.RZO-bOMi1743149128717.js";import{e}from"./@tresjs.GCV-1VTd1743149128717.js";import{z as r}from"./three-custom-shader-material.bIkXJfH11743149128717.js";import{_ as i,C as u,cu as c,n as a,bc as s}from"./three.hBhj0ayh1743149128717.js";import{d as l,a2 as f,w as p,o as d,H as m,u as v,a3 as g,r as h,f as y,g as w,j as C,m as _}from"./@vue.L-brCdZe1743149128717.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1743149128717.js";import"./postprocessing.JYKQQ2FM1743149128717.js";import"./@vueuse.K3OHOx4F1743149128717.js";const b=j;!function(t,n){const o=j,e=M();for(;;)try{if(465989===parseInt(o(411))/1*(-parseInt(o(468))/2)+-parseInt(o(473))/3+parseInt(o(439))/4+parseInt(o(451))/5*(-parseInt(o(447))/6)+-parseInt(o(440))/7*(-parseInt(o(449))/8)+-parseInt(o(441))/9+parseInt(o(424))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const x=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[j(455)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){x(this,(function(){const t=j,n=new RegExp(t(466)),o=new RegExp(t(423),"i"),e=O(t(432));n.test(e+t(469))&&o.test(e+t(431))?O():e("0")}))()}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[j(455)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function M(){const t=["counter","#e523ff","gradient","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","model","bulidingsColor","function *\\( *\\)","__csm","10zDjeMV","chain","isArray","DoubleSide","uniforms","630849ovTyRz","uColor","MeshBasicMaterial","__proto__","children","log","151089uthqNf","land","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","computeBoundingBox","Color","object","topColor","material","value","boundingBox",'{}.constructor("return this")( )',"gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","15461180ZOILDO","call","landColor","constructor","#112233","warn","city","input","init","opacity","return (function() ","length","bind","prototype","toString","189000buMdQz","4562369XTwsHu","5040441PhhrQt","side","primitive","uGradient","uOpacity","clone","1520214uhQgJK","console","8CZajoa","error","5XloWTA","#ffffff","computeBoundingSphere","#ffff00","apply","setStyle","exception","debu","stateObject"];return(M=function(){return t})()}function j(t,n){const o=M();return j=function(t,n){return o[t-=409]},j(t,n)}I(void 0,(function(){const t=j;let n;try{n=Function(t(434)+t(421)+");")()}catch(r){n=window}const o=n[t(448)]=n.console||{},e=[t(410),t(429),"info",t(450),t(457),"table","trace"];for(let i=0;i<e[t(435)];i++){const n=I[t(427)][t(437)].bind(I),r=e[i],u=o[r]||n;n[t(476)]=I.bind(I),n.toString=u[t(438)][t(436)](u),o[r]=n}}))();const S=[b(416)],T=l({__name:"bModel",props:{model:{},bulidingsColor:{default:b(461)},landColor:{default:b(428)},topColor:{default:b(454)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=b,o=t,c=o[n(464)][n(430)];o[n(464)][n(464)][n(409)][0][n(418)]=new(i[n(475)])({color:n(454)}),c.renderOrder=1001;const a=o.model[n(412)];(()=>{const t=n,{geometry:e}=c;e[t(414)](),e[t(453)]();const{max:a,min:s}=e[t(420)];if(c[t(418)][t(467)])return;const l=new r({baseMaterial:c.material,vertexShader:t(413),fragmentShader:t(463),silent:!0,uniforms:{uMax:{value:a},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new u(o.bulidingsColor)},uOpacity:{value:o[t(433)]},uLightColor:{value:new(i[t(415)])(t(452))},uTopColor:{value:new(i[t(415)])(o[t(417)])},uTime:{value:0},uGradient:{value:o[t(462)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:i[t(471)]});c.material.dispose(),c[t(418)]=l})();const{onLoop:s}=e();s((({delta:t})=>{c[n(418)].uniforms.uTime.value+=t})),f((()=>{const t=n;o[t(465)]&&c[t(418)][t(472)][t(474)][t(419)].setStyle(o[t(465)]),o[t(426)]&&((t,e)=>{const r=n;let u;"cu"===t||t===r(412)&&(u=Array[r(470)](a.material)?a[r(418)]:[a.material],u.forEach((t=>{const n=r;t[e][n(456)](o[n(426)]),t[n(442)]=i[n(471)]})))})(t(412),"color"),o.opacity&&(c[t(418)][t(472)][t(445)][t(419)]=o[t(433)])})),p(o,((t,o)=>{const e=n;c[e(418)][e(472)][e(444)].value=t.gradient}));const l=o.model[n(464)][n(446)]();return(t,o)=>{const e=n;return d(),m(e(443),{object:v(l)},null,8,S)}}});function O(t){function n(t){const o=j;if("string"==typeof t)return function(t){}[o(427)]("while (true) {}")[o(455)](o(460));1!==(""+t/t)[o(435)]||t%20==0?function(){return!0}.constructor(o(458)+o(422))[o(425)]("action"):function(){return!1}[o(427)](o(458)+o(422))[o(455)](o(459)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const P=F;!function(t,n){const o=F,e=E();for(;;)try{if(223344===-parseInt(o(179))/1*(parseInt(o(168))/2)+-parseInt(o(180))/3*(-parseInt(o(171))/4)+-parseInt(o(185))/5*(parseInt(o(145))/6)+-parseInt(o(193))/7*(parseInt(o(172))/8)+-parseInt(o(181))/9*(-parseInt(o(169))/10)+parseInt(o(177))/11+parseInt(o(166))/12)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const B=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[F(167)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){B(this,(function(){const t=F,n=new RegExp(t(190)),o=new RegExp(t(161),"i"),e=Z("init");n[t(201)](e+t(156))&&o[t(201)](e+t(170))?Z():e("0")}))()}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function F(t,n){const o=E();return F=function(t,n){return o[t-=145]},F(t,n)}z(void 0,(function(){const t=F;let n;try{n=Function(t(194)+t(147)+");")()}catch(r){n=window}const o=n[t(198)]=n.console||{},e=[t(155),t(197),t(188),"error",t(186),t(162),t(176)];for(let i=0;i<e[t(202)];i++){const n=z[t(149)][t(146)][t(151)](z),r=e[i],u=o[r]||n;n[t(192)]=z[t(151)](z),n.toString=u[t(173)][t(151)](u),o[r]=n}}))();const A=["object"];function E(){const t=["width","uScale","builds","log","chain","#FFF","counter","value","speed","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","primitive","call","geometry","3529944NffqkE","apply","96klapqm","10lIhOQd","input","76Bqdntr","3165824BKExvK","toString","string","#000","trace","3179022utVTdi","uniforms","5327pjFgBO","51621OJICuf","1019961VAAmet","clone","action","scale","371645BPwiOX","exception","uGradual","info","uSrcColor","function *\\( *\\)","gger","__proto__","7dxvuFz","return (function() ","matrix","color","warn","console","while (true) {}","linewidth","test","length","srcColor","uTime","debu","12CfIFdn","prototype",'{}.constructor("return this")( )',"applyMatrix4","constructor","gradual","bind"];return(E=function(){return t})()}const G=l({__name:"bLine",props:{builds:{},color:{default:P(157)},srcColor:{default:P(175)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=P,o=t;let r=null;const i={transparent:!0,uniforms:{uColor:{value:new u(o[n(196)])},uSrcColor:{value:new u(o[n(203)])},uScale:{value:o[n(184)]},uTime:{value:0},uGradual:{value:o[n(150)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let l=new c(o[n(154)][n(165)])[n(182)]();l=l[n(148)](o[n(154)][n(195)]);const p=new a(i);r=new s(l,p),r.material[n(200)]=o[n(152)],r.renderOrder=1e3,f((()=>{const t=n;o[t(196)]&&(i[t(178)].uColor[t(159)]=new u(o[t(196)])),o[t(203)]&&(i[t(178)][t(189)].value=new u(o[t(203)])),o.scale&&(i[t(178)][t(153)][t(159)]=o.scale),o[t(150)]&&(i[t(178)][t(187)].value=o[t(150)])}));const{onLoop:g}=e();return g((({delta:t})=>{const e=n;i.uniforms[e(204)][e(159)]+=t*o[e(160)],i[e(178)].uTime[e(159)]%=1})),(t,o)=>{const e=n;return d(),m(e(163),{object:v(r)},null,8,A)}}});function Z(t){function n(t){const o=F;if(typeof t===o(174))return function(t){}[o(149)](o(199))[o(167)](o(158));1!==(""+t/t).length||t%20==0?function(){return!0}[o(149)](o(205)+o(191))[o(164)](o(183)):function(){return!1}[o(149)](o(205)+o(191)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const R=D;function D(t,n){const o=$();return D=function(t,n){return o[t-=294]},D(t,n)}!function(t,n){const o=D,e=$();for(;;)try{if(526088===parseInt(o(324))/1+-parseInt(o(332))/2*(-parseInt(o(294))/3)+-parseInt(o(305))/4*(-parseInt(o(341))/5)+-parseInt(o(327))/6*(-parseInt(o(349))/7)+parseInt(o(309))/8*(parseInt(o(320))/9)+-parseInt(o(336))/10+parseInt(o(333))/11*(-parseInt(o(334))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const k=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[D(317)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){k(this,(function(){const t=D,n=new RegExp(t(337)),o=new RegExp(t(308),"i"),e=q(t(321));n[t(330)](e+t(335))&&o[t(330)](e+t(350))?q():e("0")}))()}();const L=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[D(317)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function $(){const t=["#999","bind","apply","counter","__proto__","153UrfTOh","init","constructor","线原颜色","435273mMKzyE","线扫颜色","city","6ISbZRj","#FFF","scale","test","扩散系数","678934zzgGKX","11ohpgzG","21529284jgAMPh","chain","2587930BaCppD","function *\\( *\\)","gradual","while (true) {}","console","45lfyVfd","call","action","speed","#000","buildingsEffectA","效果参数","model","3750075NJJIjp","input","6HaEZet","return (function() ","#112233","length","toString","log","prototype","info","warn","builds","debu","150668FMvlTq","string","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","277672wmhABE","trace","addBinding","table","srcColor","最大扩散"];return($=function(){return t})()}L(void 0,(function(){const t=D;let n;try{n=Function(t(295)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(340)]=n[t(340)]||{},e=[t(299),t(302),t(301),"error","exception",t(312),t(310)];for(let i=0;i<e[t(297)];i++){const n=L[t(322)][t(300)].bind(L),r=e[i],u=o[r]||n;n[t(319)]=L[t(316)](L),n[t(298)]=u[t(298)][t(316)](u),o[r]=n}}))();const H=l({__name:R(346),async setup(e){const r=R;let i,u;const c=([i,u]=g((()=>o())),i=await i,u(),i),a=h({color:r(328),srcColor:r(345),scale:2e3,gradual:6.6,speed:.3}),s=new t({title:r(347),expanded:!0});return s[r(311)](a,r(313),{label:r(323)}),s[r(311)](a,"color",{label:r(325)}),s[r(311)](a,r(344),{label:"速度",min:.1,max:1,step:.1}),s[r(311)](a,r(329),{label:r(314),min:10,max:2e3,step:10}),s[r(311)](a,r(338),{label:r(331),min:1.1,max:10,step:.1}),(t,o)=>{const e=r;return d(),y(n,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:w((()=>[C(T,{model:v(c),bulidingsColor:"#000000",landColor:e(296),topColor:e(315)},null,8,[e(348)]),C(G,_({builds:v(c)[e(326)]},a),null,16,[e(303)])])),_:1})}}});function q(t){function n(t){const o=D;if(typeof t===o(306))return function(t){}[o(322)](o(339))[o(317)](o(318));1!==(""+t/t)[o(297)]||t%20==0?function(){return!0}.constructor(o(304)+o(307))[o(342)](o(343)):function(){return!1}[o(322)](o(304)+o(307))[o(317)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{H as default};

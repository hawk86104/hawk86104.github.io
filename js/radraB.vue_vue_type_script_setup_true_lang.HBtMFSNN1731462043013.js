import{b as n,e as t}from"./@tresjs.xlnLF3O61731462043013.js";import{d as o,a6 as e,r,X as i,a3 as a,o as u,D as c,J as s,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.-THQH3GC1731462043013.js";import{aB as v,a0 as m,C as y,M as x,cj as w,V as _}from"./three.wKRaqyB-1731462043013.js";const M=P;function I(){const n=["378154bxKTGh","error","map","action","sizeAttenuation","trace","6637384sVYjqR","826385cerffG","scale","apply","bind","gger","407556DqIzxc","99999","#fff","1020231WuAlMd","971025vublhJ","translate","95VYrjUH","init","log","string","buildingsMarkA","while (true) {}","console","debu","offset","info","10TWxIOj","length","input","constructor","stateObject","return (function() ","function *\\( *\\)","tsRef","clone","exception","137660WCghRH","table","warn","test","call","__proto__","value","TresSpriteMaterial","foremost","TresSprite","counter","6LcZcZE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","geometry"];return(I=function(){return n})()}!function(n,t){const o=P,e=I();for(;;)try{if(534057===parseInt(o(108))/1+-parseInt(o(113))/2+-parseInt(o(117))/3+-parseInt(o(139))/4*(parseInt(o(119))/5)+parseInt(o(150))/6*(-parseInt(o(101))/7)+parseInt(o(107))/8+parseInt(o(116))/9*(parseInt(o(129))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[P(110)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){b(this,(function(){const n=P,t=new RegExp(n(135)),o=new RegExp(n(151),"i"),e=F(n(120));t[n(142)](e+"chain")&&o[n(142)](e+n(131))?F():e("0")}))()}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();A(void 0,(function(){const n=P;let t;try{t=Function(n(134)+'{}.constructor("return this")( ));')()}catch(r){t=window}const o=t.console=t[n(125)]||{},e=[n(121),n(141),n(128),n(102),n(138),n(140),n(106)];for(let i=0;i<e.length;i++){const t=A[n(132)][n(152)].bind(A),r=e[i],a=o[r]||t;t[n(144)]=A[n(111)](A),t.toString=a.toString.bind(a),o[r]=t}}))();const R=["position",M(109)],T=[M(103)];function P(n,t){const o=I();return(P=function(n,t){return o[n-=100]})(n,t)}const j=o({__name:M(123),props:{color:{default:M(115)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g.img}))),p=await p,d(),p),v=r({color:g.color,transparent:!0,depthWrite:!1,sizeAttenuation:g[o(105)],toneMapped:!1,depthTest:!g[o(147)]}),m=i(null);return a((()=>{const n=o;m[n(145)]&&(m[n(145)][n(100)]=m.value[n(100)][n(137)](),m[n(145)][n(100)][n(118)](g[n(127)][0],g.offset[1],0))})),(n,t)=>{const e=o;return u(),c(e(148),{ref_key:e(136),ref:m,position:g.position,scale:g.scale,renderOrder:e(114)},[s(e(146),l(v,{map:f(h)}),null,16,T)],8,R)}}});function F(n){function t(n){const o=P;if(typeof n===o(122))return function(n){}[o(132)](o(124))[o(110)](o(149));1!==(""+n/n)[o(130)]||n%20==0?function(){return!0}.constructor(o(126)+o(112))[o(143)](o(104)):function(){return!1}[o(132)]("debu"+o(112)).apply(o(133)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const S=B;!function(n,t){const o=B,e=Z();for(;;)try{if(424720===parseInt(o(121))/1*(-parseInt(o(158))/2)+-parseInt(o(148))/3+parseInt(o(164))/4+-parseInt(o(127))/5+parseInt(o(133))/6+-parseInt(o(129))/7+parseInt(o(160))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[B(165)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){k(this,(function(){const n=B,t=new RegExp(n(135)),o=new RegExp(n(151),"i"),e=O(n(122));t[n(118)](e+n(139))&&o[n(118)](e+n(119))?O():e("0")}))()}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[B(165)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();z(void 0,(function(){const n=B,t=function(){const n=B;let t;try{t=Function(n(141)+n(152)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(161)]||{},e=[n(130),"warn","info",n(120),n(149),n(115),n(116)];for(let r=0;r<e[n(137)];r++){const t=z[n(114)].prototype[n(142)](z),i=e[r],a=o[i]||t;t[n(113)]=z.bind(z),t[n(117)]=a[n(117)][n(142)](a),o[i]=t}}))();const W=[S(145)],C=[S(156)];function B(n,t){const o=Z();return(B=function(n,t){return o[n-=113]})(n,t)}function Z(){const n=["chain","uniforms","return (function() ","bind","call","debu","position","followWidth","TresShaderMaterial","2321859dWpaUh","exception","radius","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"#ffff00","radraA","value","args","uRadius","8uWJpXY","action","7236064ZaRRLU","console","string","makeRotationX","2654468tdwavp","apply","__proto__","constructor","table","trace","toString","test","input","error","51692GtTXax","init","stateObject","while (true) {}","size","TresCircleGeometryRef","490550JMzAQV","speed","1338288xseXeV","log","counter","gger","759660bLFilY","TresMesh","function *\\( *\\)","ncolor","length","color"];return(Z=function(){return n})()}const E=o({__name:S(154),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:S(153)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=S,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[B(155)]+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:"\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ",fragmentShader:"\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ",uniforms:{uSpeed:{value:r[e(128)]},uRadius:{value:r.radius},uTime:l,uFollowWidth:{value:r[e(146)]},ncolor:{value:new y(r[e(138)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(163)](-Math.PI/180*90);f[o(155)].applyMatrix4(n)}}));const _=p();return a((()=>{const n=e;r.color&&(w[n(140)][n(136)][n(155)]=new y(r[n(138)])),r[n(150)]&&(w[n(140)][n(157)].value=r[n(150)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return u(),c(o(134),{ref_key:"MeshRef",ref:_,position:r[o(145)]},[s("TresCircleGeometry",{ref_key:o(126),ref:f,args:[r[o(125)],1e3]},null,8,C),s(o(147),g(h(w)),null,16)],8,W)}}});function O(n){function t(n){const o=B;if(typeof n===o(162))return function(n){}.constructor(o(124)).apply(o(131));1!==(""+n/n)[o(137)]||n%20==0?function(){return!0}[o(114)](o(144)+o(132))[o(143)](o(159)):function(){return!1}[o(114)](o(144)+o(132))[o(165)](o(123)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const V=N;!function(n,t){const o=N,e=Y();for(;;)try{if(659274===-parseInt(o(118))/1*(-parseInt(o(130))/2)+-parseInt(o(149))/3+-parseInt(o(112))/4+parseInt(o(162))/5*(-parseInt(o(169))/6)+-parseInt(o(143))/7+parseInt(o(161))/8+parseInt(o(160))/9*(parseInt(o(117))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const G=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){G(this,(function(){const n=N,t=new RegExp(n(168)),o=new RegExp(n(119),"i"),e=H(n(163));t[n(166)](e+"chain")&&o[n(166)](e+"input")?H():e("0")}))()}();const X=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function Y(){const n=["TresShaderMaterial","MeshRef","1212902NaNPbk","#ffff00","while (true) {}","apply","debu","applyMatrix4","color","clone","max","maxRadius","value","TresMesh","TresTubeGeometryRef","2737371NforxY","toString","computeBoundingBox","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","constructor","position","272640MXhEJL","copy","exception","trace","radius","bind",'{}.constructor("return this")( )',"TresTubeGeometry","min","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","prototype","3654XSQfkI","2391168BwQZkn","55sjQYIH","init","stateObject","radraB","test","uColor","function *\\( *\\)","186690BOHmYo","scale","755236oyrVKN","length","console","height","counter","18890VKIAOy","1RooNkC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","__proto__","uniforms","opacity","args","period","return (function() ","boundingBox"];return(Y=function(){return n})()}X(void 0,(function(){const n=N,t=function(){const n=N;let t;try{t=Function(n(126)+n(155)+");")()}catch(o){t=window}return t}(),o=t[n(114)]=t[n(114)]||{},e=[n(120),"warn","info","error",n(151),"table",n(152)];for(let r=0;r<e[n(113)];r++){const t=X.constructor[n(159)].bind(X),i=e[r],a=o[i]||t;t[n(121)]=X[n(154)](X),t[n(144)]=a[n(144)][n(154)](a),o[i]=t}}))();const L=[V(148)],$=[V(124)],J=o({__name:V(165),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:V(131)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=V,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(136)],opacity:r[e(123)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(146),fragmentShader:e(158),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(136)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M.value[o(145)](),l[o(140)]=M[o(140)].boundingBox[o(138)],f.value=M[o(140)][o(127)][o(157)],I=i.value[o(170)][o(137)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(115)],0)));a((()=>{const n=e;r.color&&(v[n(122)][n(167)][n(140)]=new y(r[n(136)]))}));const{onLoop:A}=t(),R={value:0};return A((({delta:n})=>{const t=e;R[t(140)]+=n;const o=(R[t(140)]%r[t(125)]/r[t(125)]*(r[t(139)]-r[t(153)])+r[t(153)])/r.radius,a=(new x).makeScale(o,1,o);I&&(i[t(140)][t(170)][t(150)](I[t(137)]()[t(135)](a)),i.value.updateMatrix())})),o({MeshRef:i}),(n,t)=>{const o=e;return u(),c(o(141),{ref_key:o(129),ref:i,position:r[o(148)],renderOrder:2e3},[s(o(156),{ref_key:o(142),ref:M,args:[b[o(140)],20,r[o(153)],100,!1]},null,8,$),s(o(128),g(h(v)),null,16)],8,L)}}});function N(n,t){const o=Y();return(N=function(n,t){return o[n-=112]})(n,t)}function H(n){function t(n){const o=N;if("string"==typeof n)return function(n){}[o(147)](o(132))[o(133)](o(116));1!==(""+n/n)[o(113)]||n%20==0?function(){return!0}[o(147)](o(134)+"gger").call("action"):function(){return!1}.constructor("debugger")[o(133)](o(164)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{j as _,E as a,J as b};

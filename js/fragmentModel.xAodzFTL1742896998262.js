import{_ as n,c as t,C as o,cG as r}from"./three.0CcRceKb1742896998262.js";import{e,D as a,a as s,o as i}from"./@tresjs.KzbsBNvc1742896998262.js";import{P as c}from"./tweakpane.ivGeiIdz1742896998262.js";import{d as u,a3 as l,r as p,b as f,w as m,o as v,H as g,N as d,aj as x,ak as y,u as h,e as w,f as b,g as C,j as P,al as I}from"./@vue.L-brCdZe1742896998262.js";import"./postprocessing.JNDZZkh81742896998262.js";import"./@vueuse.AtktgvWs1742896998262.js";const _=M;!function(n,t){const o=M,r=j();for(;;)try{if(604420===-parseInt(o(446))/1*(parseInt(o(431))/2)+parseInt(o(422))/3+parseInt(o(445))/4*(parseInt(o(398))/5)+parseInt(o(418))/6+-parseInt(o(377))/7+parseInt(o(433))/8*(-parseInt(o(393))/9)+parseInt(o(453))/10*(parseInt(o(380))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=M,t=new RegExp(n(450)),o=new RegExp(n(415),"i"),r=R(n(432));t[n(389)](r+n(383))&&o[n(389)](r+n(413))?R():r("0")}))()}();const A=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(437)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function M(n,t){const o=j();return M=function(n,t){return o[n-=377]},M(n,t)}function j(){const n=["constructor","position","Vector3","counter","m2Color","length","toString","2dlWiav","init","181960PlBhAG","random","push","info","apply","set","Mesh","__proto__","m1Color","tangent","string","prototype","864QKNAXi","859700vwilhK","trace","变化量","count","function *\\( *\\)","toNonIndexed","rotateX","127060kmDBtX","6175631KoPmeQ","fragmentModelCom","console","1738hGDAao","sin","debu","chain","action","uniforms","aRandom","children","array","test","颜色2rd","clone","resource.cos","423IKCavb","bind","value","setAttribute","attributes","18395SCbyrm","addBinding","scene","BufferAttribute","#ffc0fa","while (true) {}","toPosition","geometry","traverse","#bcd4ff","disabled","return (function() ","Color","exception","u_progress","input","onLoop","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","deleteAttribute","log","1047228qWndOa","./draco/","error","refresh","1315854sdZQwo","TresMesh"];return(j=function(){return n})()}A(void 0,(function(){const n=M,t=function(){const n=M;let t;try{t=Function(n(409)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(379)]=t[n(379)]||{},r=[n(417),"warn",n(436),n(420),n(411),"table",n(447)];for(let e=0;e<r[n(429)];e++){const t=A.constructor[n(444)].bind(A),a=r[e],s=o[a]||t;t[n(440)]=A[n(394)](A),t[n(430)]=s[n(430)].bind(s),o[a]=t}}))();const D=[_(405)],N=u({__name:_(378),async setup(i){const u=_;let w,b;const C=t=>{const o=M,e=[];return t[o(406)]((t=>{const r=o;t instanceof n[r(439)]&&(t[r(405)][r(416)]("uv"),t[r(405)].deleteAttribute(r(442)),e[r(435)](t[r(405)]))})),r(e)},P=C(([w,b]=l((()=>a("https://opensource.cdn.icegl.cn/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:u(419)}))),w=await w,b(),w)[u(400)][u(387)][0]);P[u(452)](Math.PI/2),P.translate(0,-.9,0);const I=P[u(391)]()[u(451)](),z=C(([w,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:u(419)}))),w=await w,b(),w).scene[u(387)][0]);z[u(452)](-Math.PI/2),z.rotateY(Math.PI/3);const A=z.clone()[u(451)](),j=I[u(397)][u(425)][u(388)],N=I[u(397)][u(425)][u(449)],R=A[u(397)][u(425)][u(388)],F=A[u(397)].normal[u(388)],S=A.attributes[u(425)].count,V=new Float32Array(N),E=new Float32Array(3*(N+2)),k=new Float32Array(3*(N+2)),T=new Float32Array(3*(N+2));for(let t=0;t<N;t+=3){const o=1*Math[u(434)](),r=t%S;V[t]=o,V[t+1]=o,V[t+2]=o;const e=3*t,a=j[e],s=j[e+1],i=j[e+2],c=j[e+3],l=j[e+4],p=j[e+5],f=j[e+6],m=j[e+7],v=j[e+8],g=new(n[u(426)])(a+c+f,s+l+m,i+p+v).divideScalar(3);E[u(438)]([g.x,g.y,g.z],3*t),E[u(438)]([g.x,g.y,g.z],3*(t+1)),E.set([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=u,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(438)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(R,k,r),d(F,T,r)}I[u(396)](u(386),new(n[u(401)])(V,1)),I[u(396)]("aCenter",new(n[u(401)])(E,3)),I[u(396)](u(404),new(n[u(401)])(k,3)),I[u(396)]("toNormal",new t(T,3)),console[u(417)](I[u(397)]);const Z=([w,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),w=await w,b(),w),B={uniforms:{u_progress:{value:-.1},matcap1:{value:Z},m1Color:{type:"v3",value:new(n[u(410)])("#ffc0fa")},matcap2:{value:Z},m2Color:{type:"v3",value:new o(u(407))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},K=p({c1:u(402),c2:u(407)}),X=f(.5),G=new c({title:"参数"});return G[u(399)](B[u(385)][u(412)],"value",{label:u(448),min:-.1,max:1,step:.001})[u(408)]=!0,G[u(399)](K,"c1",{label:"颜色1st"}),G.addBinding(K,"c2",{label:u(390)}),G[u(399)](X,u(395),{label:"速度",min:.001,max:1,step:.001}),m(K,(n=>{const t=u;B[t(385)][t(441)][t(395)][t(438)](n.c1),B[t(385)][t(428)][t(395)][t(438)](n.c2)}),{deep:!0}),e()[u(414)]((({elapsed:n})=>{const t=u;B[t(385)].u_progress[t(395)]=(Math[t(381)](n*X[t(395)])+1)/2,G[t(421)]()})),(n,t)=>{const o=u;return v(),g(o(423),{geometry:h(I)},[d("TresShaderMaterial",x(y(B)),null,16)],8,D)}}});function R(n){function t(n){const o=M;if(typeof n===o(443))return function(n){}.constructor(o(403))[o(437)](o(427));1!==(""+n/n)[o(429)]||n%20==0?function(){return!0}[o(424)]("debugger").call(o(384)):function(){return!1}[o(424)](o(382)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const F=k;!function(n,t){const o=k,r=V();for(;;)try{if(970616===parseInt(o(501))/1+-parseInt(o(503))/2+-parseInt(o(529))/3*(parseInt(o(506))/4)+parseInt(o(528))/5*(-parseInt(o(516))/6)+parseInt(o(533))/7+parseInt(o(524))/8*(-parseInt(o(500))/9)+parseInt(o(511))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function V(){const n=["fragmentModel","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ACESFilmicToneMapping","console","6MblFal","length","log","TresAmbientLight","function *\\( *\\)","table","warn","trace","24PtLWaq","while (true) {}","action","call","1608765yXCunH","2191479KAPhgl","bind","counter","exception","7602826vpLAwF","debu","input","info","string",'{}.constructor("return this")( )',"5156289fcNHfG","1124696vaPlAP","constructor","2347780XdSmiM","gger","test","8RnPeDp","toString","#000000","apply","chain","34351940mEnJan"];return(V=function(){return n})()}!function(){S(this,(function(){const n=k,t=new RegExp(n(520)),o=new RegExp(n(513),"i"),r=Z("init");t[n(505)](r+n(510))&&o[n(505)](r+n(535))?Z():r("0")}))()}();const E=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[k(509)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function k(n,t){const o=V();return k=function(n,t){return o[n-=497]},k(n,t)}E(void 0,(function(){const n=k;let t;try{t=Function("return (function() "+n(499)+");")()}catch(e){t=window}const o=t.console=t[n(515)]||{},r=[n(518),n(522),n(497),"error",n(532),n(521),n(523)];for(let a=0;a<r.length;a++){const t=E[n(502)].prototype[n(530)](E),e=r[a],s=o[e]||t;t.__proto__=E[n(530)](E),t[n(507)]=s[n(507)][n(530)](s),o[e]=t}}))();const T=u({__name:F(512),setup(t){const o=F,r=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(508),windowSize:!0,toneMapping:n[o(514)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=w("TresCanvas");return v(),b(s,x(y(e)),{default:C((()=>[t[0]||(t[0]=d("TresPerspectiveCamera",{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),P(h(i),x(y(r)),null,16),t[1]||(t[1]=d(a(519),{intensity:2},null,-1)),(v(),b(I,null,{default:C((()=>[P(N)])),_:1}))])),_:1},16)}}});function Z(n){function t(n){const o=k;if(typeof n===o(498))return function(n){}[o(502)](o(525))[o(509)](o(531));1!==(""+n/n)[o(517)]||n%20==0?function(){return!0}[o(502)](o(534)+o(504))[o(527)](o(526)):function(){return!1}.constructor(o(534)+o(504))[o(509)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as default};

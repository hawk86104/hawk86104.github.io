import{_ as t,a6 as e}from"./three.8iJMi2lU1733198294833.js";import{e as n,W as r,U as a,c as o}from"./@tresjs.sklxXn0u1733198294833.js";import{a as i}from"./index.8Rx_x_Ij1733198294833.js";import"./index.VnJC1qLV1733198294833.js";import{z as s}from"./three-custom-shader-material.GYlVajj-1733198294833.js";import{p as l}from"./gl-noise.BrVtymbx1733198294833.js";import{d as u,b as c,a3 as p,w as f,o as g,D as h,J as m,j as v,u as d,r as _,f as b,g as w,aj as y,ak as x,m as j,al as M}from"./@vue.-THQH3GC1733198294833.js";import{P as z}from"./tweakpane.yHWGBmom1733198294833.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Iz_9ONM61733198294833.js";import"./@vueuse.N_fQXUYA1733198294833.js";import"./three-stdlib.IR1PgtX51733198294833.js";import"./@pmndrs.D5ZkFGQo1733198294833.js";import"./object-hash.GOIeDp-W1733198294833.js";import"./@amap.DgFRMjnW1733198294833.js";import"./jszip.eQOVOH091733198294833.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang._VAWZGSx1733198294833.js";import"./all.three.F4gaiqjm1733198294833.js";import"./oimophysics.x0jH7fze1733198294833.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7Zke6a8I1733198294833.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.4JUlVHcB1733198294833.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.YVfDahJh1733198294833.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.VrIohuzf1733198294833.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.da2uWVIH1733198294833.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.T5OoQH_41733198294833.js";const C=W;!function(t,e){const n=W,r=B();for(;;)try{if(154266===parseInt(n(356))/1+-parseInt(n(315))/2+parseInt(n(312))/3*(parseInt(n(307))/4)+-parseInt(n(364))/5+parseInt(n(350))/6*(parseInt(n(355))/7)+-parseInt(n(346))/8+parseInt(n(335))/9*(parseInt(n(354))/10))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(340)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=W,e=new RegExp(t(338)),n=new RegExp(t(357),"i"),r=P(t(308));e.test(r+t(353))&&n[t(345)](r+t(304))?P():r("0")}))()}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(340)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function W(t,e){const n=B();return(W=function(t,e){return n[t-=303]})(t,e)}I(void 0,(function(){const t=W,e=function(){const t=W;let e;try{e=Function("return (function() "+t(348)+");")()}catch(n){e=window}return e}(),n=e[t(337)]=e[t(337)]||{},r=[t(325),t(303),"info",t(358),"exception",t(314),t(321)];for(let a=0;a<r.length;a++){const e=I[t(311)][t(359)][t(323)](I),o=r[a],i=n[o]||e;e[t(327)]=I.bind(I),e.toString=i.toString[t(323)](i),n[o]=e}}))();const H=[C(339)],O=[C(318)],G=u({__name:C(341),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:C(326)},brightness:{default:1},baseMaterial:{default:t[C(324)]}},setup(a){const o=C,i=a,u=c(null),_={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:o(366)},b={uTime:{value:0},waterColor:{value:new(t[o(365)])(i[o(313)])[o(310)]()},waterHighlight:{value:new(t[o(365)])(i[o(344)])[o(310)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[o(322)]},uHeight:{value:i[o(351)]}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=o;b.uTime[e(333)]=-t/5})),p((()=>{const e=o;i.height&&(b[e(330)][e(333)]=i[e(351)]),i[e(313)]&&(b.waterColor[e(333)]=new(t[e(365)])(i[e(313)])[e(310)]()),i[e(344)]&&(b[e(344)].value=new(t[e(365)])(i.waterHighlight)[e(310)]()),i.brightness&&(b.brightness[e(333)]=i[e(322)])})),f((()=>i[o(331)]),(t=>{const e=o;u[e(333)][e(349)][e(317)]=!0})),f((()=>i.baseMaterial),(e=>{const n=o,r=new s({baseMaterial:t[e],vertexShader:l(_.vertex),fragmentShader:_[n(343)],uniforms:b,flatShading:i[n(331)],side:t[n(342)],roughness:.2,metalness:.1,silent:!0});u[n(333)].material[n(319)](),u[n(333)][n(349)]=r})),(n,a)=>{const i=o;return g(),h(i(336),{ref_key:i(320),ref:u,"rotation-x":-Math.PI/2},[m("TresBoxGeometry",{args:[5,5,n[i(351)],64,64,1]},null,8,O),v(d(r),{baseMaterial:e,vertexShader:d(l)(_[i(328)]),fragmentShader:_.fragment,uniforms:b,side:t[i(342)],roughness:.2,metalness:.1,flatShading:n[i(331)],silent:""},null,8,["baseMaterial",i(360),i(347),i(362),i(332)])],8,H)}}});function B(){const t=["fragment","waterHighlight","test","573560AFplid","fragmentShader",'{}.constructor("return this")( )',"material","546DygZVZ","height","gger","chain","2364920fnHRYd","1666KKUrWU","226160RyysKJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","prototype","vertexShader","counter","side","action","37665oQQHKR","Color","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","warn","input","length","string","133428xqfKZc","init","debu","convertLinearToSRGB","constructor","3kUxlxB","waterColor","table","568346MvAAhA","stateObject","needsUpdate","args","dispose","tmRef","trace","brightness","bind","MeshPhysicalMaterial","log","#b3ffff","__proto__","vertex","while (true) {}","uHeight","Flatshading","flatShading","value","call","9ntstoa","TresMesh","console","function *\\( *\\)","rotation-x","apply","customWaterMesh","DoubleSide"];return(B=function(){return t})()}function P(t){function e(t){const n=W;if(typeof t===n(306))return function(t){}[n(311)](n(329)).apply(n(361));1!==(""+t/t)[n(305)]||t%20==0?function(){return!0}[n(311)](n(309)+n(352))[n(334)](n(363)):function(){return!1}[n(311)](n(309)+n(352))[n(340)](n(316)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=F,r=k();for(;;)try{if(888328===-parseInt(n(517))/1*(parseInt(n(493))/2)+-parseInt(n(506))/3+parseInt(n(519))/4+parseInt(n(514))/5*(parseInt(n(543))/6)+parseInt(n(535))/7+parseInt(n(521))/8+-parseInt(n(541))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){A(this,(function(){const t=F,e=new RegExp(t(518)),n=new RegExp(t(527),"i"),r=N(t(552));e.test(r+t(510))&&n[t(544)](r+t(508))?N():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(495)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function F(t,e){const n=k();return(F=function(t,e){return n[t-=490]})(t,e)}function k(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","brightness","TresDirectionalLight","Flatshading","bind","#3a78a2","exception","waterHighlight","10105809bRDXne","pos-y.jpg","action",'{}.constructor("return this")( )',"gger","label","320643tohWAr","pos-x.jpg","17958rPiYWh","test","MeshBasicMaterial","MeshToonMaterial","error","MeshPhongMaterial","constructor","trace","ACESFilmicToneMapping","init","while (true) {}","console","call","7764TzOSkS","addBinding","apply","change","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","debu","浪头颜色","counter","#52a7f7","MeshDepthMaterial","__proto__","水体颜色","string","247557utglcS","height","input","baseMaterial","chain","MeshPhysicalMaterial","log","table","535OOdcJA","length","MeshStandardMaterial","424ctTizU","function *\\( *\\)","877952EPrnTZ","toString","5352128zeCAhl","list","#b3ffff","info","addBlade","MeshLambertMaterial"];return(k=function(){return t})()}D(void 0,(function(){const t=F,e=function(){const t=F;let e;try{e=Function("return (function() "+t(538)+");")()}catch(n){e=window}return e}(),n=e[t(491)]=e[t(491)]||{},r=[t(512),"warn",t(524),t(547),t(533),t(513),t(550)];for(let a=0;a<r[t(515)];a++){const e=D.constructor.prototype[t(531)](D),o=r[a],i=n[o]||e;e[t(503)]=D[t(531)](D),e.toString=i[t(520)][t(531)](i),n[o]=e}}))();const R=u({__name:"customWater",setup(e){const n=F,r=_({alpha:!0,toneMapping:t[n(551)],windowSize:!0,clearColor:10066329}),s=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:n(532),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(501),waterHighlight:n(523),brightness:1,baseMaterial:n(511)}),c=new z;return c[n(494)](u,n(507),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,"waterColor",{label:n(504)}),c[n(494)](u,n(534),{label:n(499)}),c[n(494)](u,n(528),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,"Flatshading",{label:n(530)}),c[n(525)]({view:n(522),label:"材质",options:[{text:n(511),value:n(511)},{text:n(545),value:n(545)},{text:"MeshNormalMaterial",value:"MeshNormalMaterial"},{text:n(516),value:n(516)},{text:n(548),value:"MeshPhongMaterial"},{text:n(546),value:n(546)},{text:n(526),value:n(526)},{text:n(502),value:n(502)}],value:u[n(509)]}),c.on(n(496),(t=>{const e=n;"材质"===t.target[e(540)]&&(u[e(509)]=t.value)})),(t,e)=>{const c=n;return g(),b(d(o),j(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=m("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),y(x(s)),null,16),e[1]||(e[1]=m("TresAmbientLight",{intensity:.5},null,-1)),e[2]||(e[2]=m(c(529),{position:[15,15,15],intensity:1},null,-1)),v(G,y(x(u)),null,16),v(d(S),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(M,null,{default:w((()=>[v(d(i),{files:[c(542),"neg-x.jpg",c(536),"neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:c(497)})])),_:1}))])),_:1},16)}}});function N(t){function e(t){const n=F;if(typeof t===n(505))return function(t){}[n(549)](n(490))[n(495)](n(500));1!==(""+t/t)[n(515)]||t%20==0?function(){return!0}[n(549)]("debu"+n(539))[n(492)](n(537)):function(){return!1}.constructor(n(498)+n(539))[n(495)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

import{importShared as e}from"./3d-tiles-renderer.DFcJBJdg1769412424343.js";import{useGLTF as t,CircleShadow_default as a,OrbitControls_default as o}from"./index.B2-FHinZ1769412424343.js";import{MeshPhysicalNodeMaterial as r,WebGPURenderer as s}from"./three.webgpu.3jxo6HDu1769412424343.js";import{_sfc_main$1 as n}from"./index.CYH0Xf5E1769412424343.js";import"./skyBoxAmesh.vue_vue_type_script_setup_true_lang.Bpu-PTp01769412424343.js";import"./skyBoxBmesh.vue_vue_type_script_setup_true_lang.kpxLXLnu1769412424343.js";import"./skyBoxDmesh.vue_vue_type_script_setup_true_lang.DFxOS1h51769412424343.js";import{uniform as i,color as l,Fn as c,atan as m,PI2 as u,positionLocal as d,If as p,frontFacing as h,output as v,vec4 as g}from"./three.tsl.Dtn9tGip1769412424343.js";import{DoubleSide as y,Color as f}from"./three.DM5Jrh-_1769412424343.js";import{Pane as w}from"./tweakpane.BbuIEN141769412424343.js";const{defineComponent:_}=await e("vue"),{unref:S,createElementVNode:x,createVNode:C,openBlock:M,createElementBlock:P,createCommentVNode:k}=await e("vue"),B={key:0},j=["geometry","material"],T=["geometry","material"],I=["geometry","material","rotation"],{computed:b,watch:N}=await e("vue"),V=_({__name:"model",props:{sliceColor:{default:"#0096ff"},sliceStart:{default:1.75},sliceArc:{default:1.25}},setup(e){const o=e,{state:s,nodes:n,materials:w}=t("https://opensource.cdn.icegl.cn/model/industry4/gears-transformed.glb",{draco:!0,decoderPath:"./draco/"}),_=b(()=>n.value),V=i(o.sliceStart),A=i(o.sliceArc),z=i(l(o.sliceColor)),E=c(([e,t,a])=>{const o=m(e.y,e.x).sub(t).mod(u).toVar();return o.greaterThan(0).and(o.lessThan(a))}),D=c(()=>{E(d.xy,V,A).discard();const e=v;return p(h.not(),()=>{e.assign(g(z,1))}),e})(),G=c(()=>(E(d.xy,V,A).discard(),g(0,0,0,1)))();let L=null;return N(()=>_.value,e=>{L=new r({outputNode:D,emissiveNode:D,castShadowNode:G,aoMap:w.value.metal.aoMap,aoMapIntensity:2,color:new f("#777"),metalness:.6,roughness:.25,side:y})}),N(()=>o.sliceColor,e=>{z.value.set(e)}),N(()=>o.sliceStart,e=>{V.value=e}),N(()=>o.sliceArc,e=>{A.value=e}),(e,t)=>S(s)?(M(),P("TresGroup",B,[x("TresMesh",{castShadow:"",receiveShadow:"",geometry:S(n).outerHull.geometry,material:S(L),scale:[3.714,3.714,3.714]},null,8,j),x("TresMesh",{castShadow:"",receiveShadow:"",geometry:_.value.axle.geometry,material:S(w).metal},null,8,T),x("TresMesh",{castShadow:"",receiveShadow:"",geometry:_.value.gears.geometry,material:S(w).metal,"material-aoMapIntensity":3,position:[0,1.595,-.691],rotation:[-Math.PI,0,-Math.PI],scale:[1,1,1.016]},null,8,I),C(S(a),{scale:[16,10,10],position:[0,-4.5,0],opacity:1,fog:"",offset:.06})])):k("",!0)}}),{defineComponent:A}=await e("vue"),{createElementVNode:z,unref:E,createVNode:D,normalizeProps:G,guardReactiveProps:L,mergeProps:R,resolveComponent:$,withCtx:F,openBlock:H,createBlock:q}=await e("vue"),J=["intensity"],K=["intensity"],{toValue:O,reactive:Q}=await e("vue"),U=A({__name:"tslGearsForkedPage",setup(e){const t=e=>new s({canvas:O(e.canvas),alpha:!0,antialias:!0}),a={on:!0,type:"shanghai",environmentIntensity:1,environmentRotations:{x:0,y:0,z:0}},r=Q({sliceColor:"#0096ff",sliceStart:1.75,sliceArc:1.25}),i=new w({title:"参数"});return i.addBinding(r,"sliceColor",{label:"颜色"}),i.addBinding(r,"sliceStart",{label:"开始角度",min:0,max:Math.PI}),i.addBinding(r,"sliceArc",{label:"角度范围",min:0,max:Math.PI}),(e,s)=>{const i=$("TresCanvas");return H(),q(i,{windowSize:"",clearColor:"#eee",renderer:t},{default:F(()=>[s[0]||(s[0]=z("TresPerspectiveCamera",{fov:15,position:[-5,5,5]},null,-1)),D(E(o),{makeDefault:""}),z("TresSpotLight",{castShadow:"",decay:0,angle:.1,penumbra:1,intensity:Math.PI,position:[5,5,5],"shadow-mapSize":[1024,1024]},null,8,J),z("TresSpotLight",{castShadow:"",decay:0,angle:.1,penumbra:1,intensity:Math.PI,position:[-5,15,5],"shadow-mapSize":[1024,1024]},null,8,K),D(E(n),G(L(a)),null,16),D(V,R({position:[0,.025,0],scale:.2},r),null,16)]),_:1})}}});export{U as default};

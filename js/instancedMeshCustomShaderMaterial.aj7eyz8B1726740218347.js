import{an as t,_ as n,ai as e}from"./three.MbBECAu81726740218347.js";import{U as r,J as o,Y as i,L as a}from"./@tresjs.C5O8roW51726740218347.js";import{a as s,b as c}from"./index.qxajnOUQ1726740218347.js";import{d as u,b as f,w as p,o as l,E as h,j as v,u as d,L as g,r as m,f as b,g as x,aj as y,ak as I,al as w,m as M}from"./@vue.JNsx1iN61726740218347.js";import"./@vueuse.18lbrd2F1726740218347.js";import"./three-stdlib.vORGfiSP1726740218347.js";import"./@pmndrs.WMHo6lO61726740218347.js";import"./object-hash.rW_XvzOw1726740218347.js";import"./@amap.bfr68PX11726740218347.js";import"./jszip.Axb7QGa61726740218347.js";!function(t,n){for(var e=z,r=j();;)try{if(156164===-parseInt(e(188))/1+-parseInt(e(201))/2*(parseInt(e(184))/3)+parseInt(e(208))/4*(-parseInt(e(218))/5)+parseInt(e(186))/6+-parseInt(e(206))/7*(parseInt(e(185))/8)+-parseInt(e(210))/9*(parseInt(e(194))/10)+parseInt(e(196))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function j(){var t=["chain","function *\\( *\\)","5aKhpgH","stateObject","debu","trace","while (true) {}","42eSXfeh","1826296LWtUer","1743804AzySrS","prototype","162235tjajky","info","exception","warn","__proto__","test","10Gkjflp","console","9051537MFjZrT","return (function() ","action",'{}.constructor("return this")( )',"constructor","30638BOPPBZ","bind","string","error","apply","7DvhMre","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","686740ivmDKK","init","1625976gMXdtN","table","gger","length","counter","input"];return(j=function(){return t})()}function z(t,n){var e=j();return(z=function(t,n){return e[t-=181]})(t,n)}!function(){_(this,(function(){var t=z,n=new RegExp(t(217)),e=new RegExp(t(207),"i"),r=S(t(209));n[t(193)](r+t(216))&&e[t(193)](r+t(215))?S():r("0")}))()}();var P=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();P(void 0,(function(){var t,n=z;try{t=Function(n(197)+n(199)+");")()}catch(c){t=window}for(var e=t.console=t[n(195)]||{},r=["log",n(191),n(189),n(204),n(190),n(211),n(182)],o=0;o<r[n(213)];o++){var i=P[n(200)][n(187)][n(202)](P),a=r[o],s=e[a]||i;i[n(192)]=P[n(202)](P),i.toString=s.toString[n(202)](s),e[a]=i}}))();function S(t){function n(t){var e=z;if(typeof t===e(203))return function(t){}[e(200)](e(183))[e(205)](e(214));1!==(""+t/t).length||t%20==0?function(){return!0}[e(200)](e(181)+e(212)).call(e(198)):function(){return!1}[e(200)](e(181)+e(212)).apply(e(219)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=L,r=T();for(;;)try{if(627030===parseInt(e(544))/1*(parseInt(e(521))/2)+parseInt(e(542))/3+parseInt(e(535))/4*(-parseInt(e(497))/5)+parseInt(e(493))/6*(parseInt(e(516))/7)+-parseInt(e(512))/8+parseInt(e(494))/9*(-parseInt(e(498))/10)+-parseInt(e(508))/11*(-parseInt(e(502))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const D=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[L(546)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function T(){const t=["MeshPhysicalMaterial","log","function *\\( *\\)","631122nMfEAI","2439MGgFCF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","random","5xZwCoH","41880AgUwDF","position","warn","__proto__","22611948KbuJBG","updateMatrix","stateObject","instanceMatrix","action","vertex","11lQTseI","debu","error","vertexShader","9036752AsskGm","multiplyScalar","counter","set","49prfcwQ","info","setMatrixAt","gger","test","182fxMVGI","exception","return (function() ","\n\t\tvarying vec3 vPosition;\n\t\t// 函数将 HSL 转换为 RGB\n\t\tvec3 hsl2rgb(float h, float s, float l) {\n\t\t\t\tfloat c = (1.0 - abs(2.0 * l - 1.0)) * s;\n\t\t\t\tfloat x = c * (1.0 - abs(mod(h * 6.0, 2.0) - 1.0));\n\t\t\t\tfloat m = l - c / 2.0;\n\t\t\t\tvec3 rgb;\n\t\t\t\tif (0.0 <= h && h < 1.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, x, 0.0);\n\t\t\t\t} else if (1.0 / 6.0 <= h && h < 2.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, c, 0.0);\n\t\t\t\t} else if (2.0 / 6.0 <= h && h < 3.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, c, x);\n\t\t\t\t} else if (3.0 / 6.0 <= h && h < 4.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, x, c);\n\t\t\t\t} else if (4.0 / 6.0 <= h && h < 5.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, 0.0, c);\n\t\t\t\t} else if (5.0 / 6.0 <= h && h < 6.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, 0.0, x);\n\t\t\t\t} else {\n\t\t\t\t\t\trgb = vec3(0.0, 0.0, 0.0);\n\t\t\t\t}\n\t\t\t\trgb += vec3(m);\n\t\t\t\treturn rgb;\n\t\t}\n    void main() {\n      // csm_DiffuseColor = vec4(1.,1.,1.,1.);\n\t\t\tfloat h = mod(vPosition.x + vPosition.y + vPosition.z, 1.0); // 色相 H: [0, 1)\n\t\t\tfloat s = 0.9; // 饱和度 S: 固定为 0.8\n\t\t\tfloat l = 0.4; // 亮度 L: 固定为 0.5\n\t\t\tvec3 rgb = hsl2rgb(h, s, l);\n\t\t\tcsm_DiffuseColor = vec4(rgb,1.);\n    }\n    ","string","length","toString","fragment","\n    uniform float uTime;\n\t\tvarying vec3 vPosition;\n\t\t","call","chain","console","bind","tmRef","984772EwVnUM","constructor","fragmentShader","value","prototype","baseMaterial","needsUpdate","1158534XXHtyX","TresInstancedMesh","1439qqbYQm","rotation","apply"];return(T=function(){return t})()}!function(){D(this,(function(){const t=L,n=new RegExp(t(549)),e=new RegExp(t(495),"i"),r=N("init");n.test(r+t(531))&&e[t(520)](r+"input")?N():r("0")}))()}();const A=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[L(546)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function L(t,n){const e=T();return(L=function(t,n){return e[t-=493]})(t,n)}A(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(523)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(532)]=n[t(532)]||{},r=[t(548),t(500),t(517),t(510),t(522),"table","trace"];for(let o=0;o<r[t(526)];o++){const n=A[t(536)][t(539)][t(533)](A),i=r[o],a=e[i]||n;n[t(501)]=A.bind(A),n[t(527)]=a[t(527)][t(533)](a),e[i]=n}}))();const R=g("TresSphereGeometry",{args:[1,64,64]},null,-1),C=u({__name:"instancedMeshCom",setup(e){const i=L,a=f(null),s={vertex:i(529)+"\n// Precision-adjusted variations of https://www.shadertoy.com/view/4djSRW\nfloat hash(float p) { p = fract(p * 0.011); p *= p + 7.5; p *= p + p; return fract(p); }\nfloat hash(vec2 p) { vec3 p3 = fract(vec3(p.xyx) * 0.13); p3 += dot(p3, p3.yzx + 3.333); return fract((p3.x + p3.y) * p3.z); }\n\nfloat noise(vec3 x) {\n    const vec3 step = vec3(110, 241, 171);\n\n    vec3 i = floor(x);\n    vec3 f = fract(x);\n\n    // For performance, compute the base input to a 1D hash from the integer part of the argument and the\n    // incremental change to the 1D based on the 3D -> 1D wrapping\n    float n = dot(i, step);\n\n    vec3 u = f * f * (3.0 - 2.0 * f);\n    return mix(mix(mix(hash(n + dot(step, vec3(0, 0, 0))), hash(n + dot(step, vec3(1, 0, 0))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 0))), hash(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n               mix(mix(hash(n + dot(step, vec3(0, 0, 1))), hash(n + dot(step, vec3(1, 0, 1))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 1))), hash(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n}\n\n    vec3 displace(vec3 point) {\n      vec3 instancePosition = (instanceMatrix * vec4(point, 1.)).xyz;\n      return instancePosition + (normal * noise((instancePosition * 3.) + uTime) * 0.8);\n    }  \n\n    vec3 orthogonal(vec3 v) {\n      return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n      : vec3(0.0, -v.z, v.y));\n    }\n\n    vec3 recalcNormals(vec3 newPos) {\n      float offset = 0.001;\n      vec3 tangent = orthogonal(normal);\n      vec3 bitangent = normalize(cross(normal, tangent));\n      vec3 neighbour1 = position + tangent * offset;\n      vec3 neighbour2 = position + bitangent * offset;\n\n      vec3 displacedNeighbour1 = displace(neighbour1);\n      vec3 displacedNeighbour2 = displace(neighbour2);\n\n      vec3 displacedTangent = displacedNeighbour1 - newPos;\n      vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n      return normalize(cross(displacedTangent, displacedBitangent));\n    }\n\n    void main() {\n\t\t\tvPosition = position;\n      vec3 p = displace(position);\n      csm_PositionRaw = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(p, 1.);\n      csm_Normal = recalcNormals(p);\n    }\n    ",fragment:i(524)},c={uTime:{value:0}},u=new t,{onLoop:g}=r();return g((({elapsed:t})=>{const n=i;c.uTime[n(538)]=t})),p((()=>a.value),(t=>{const n=i;if(t){let e=0;for(let r=0;r<88;r++)u.position[n(515)](Math[n(496)](),Math[n(496)](),Math[n(496)]()),u[n(545)][n(515)](Math.random(),Math.random(),Math[n(496)]()),u[n(499)][n(513)](10),u[n(499)].x-=5,u[n(499)].y-=5,u[n(499)].z-=5,u[n(503)](),t[n(518)](e++,u.matrix);t[n(505)][n(541)]=!0}})),(t,e)=>{const r=i;return l(),h(r(543),{ref_key:r(534),ref:a,args:[null,null,88]},[R,v(d(o),{baseMaterial:n[r(547)],vertexShader:s[r(507)],fragmentShader:s[r(528)],uniforms:c,transparent:""},null,8,[r(540),r(511),r(537)])],512)}}});function N(t){function n(t){const e=L;if(typeof t===e(525))return function(t){}[e(536)]("while (true) {}")[e(546)](e(514));1!==(""+t/t)[e(526)]||t%20==0?function(){return!0}[e(536)](e(509)+e(519))[e(530)](e(506)):function(){return!1}[e(536)](e(509)+e(519)).apply(e(504)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Z=k;function k(t,n){const e=X();return(k=function(t,n){return e[t-=286]})(t,n)}!function(t,n){const e=k,r=X();for(;;)try{if(205576===parseInt(e(290))/1+-parseInt(e(295))/2+parseInt(e(313))/3*(parseInt(e(312))/4)+-parseInt(e(296))/5*(-parseInt(e(307))/6)+parseInt(e(304))/7*(-parseInt(e(303))/8)+parseInt(e(308))/9+-parseInt(e(291))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const E=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[k(316)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){E(this,(function(){const t=k,n=new RegExp(t(323)),e=new RegExp(t(317),"i"),r=B("init");n[t(298)](r+t(301))&&e[t(298)](r+t(300))?B():r("0")}))()}();const F=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[k(316)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();F(void 0,(function(){const t=k,n=function(){const t=k;let n;try{n=Function(t(319)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(318)]=n[t(318)]||{},r=[t(309),t(299),"info",t(314),"exception","table","trace"];for(let o=0;o<r[t(287)];o++){const n=F[t(322)][t(292)].bind(F),i=r[o],a=e[i]||n;n[t(288)]=F[t(305)](F),n.toString=a.toString[t(305)](a),e[i]=n}}))();const G=g(Z(286),{position:[15,15,15],fov:45,near:1,far:1e3},null,-1),H=g(Z(325),{intensity:.5},null,-1),U=g(Z(320),{position:[7,10,-5.5],intensity:5},null,-1);function X(){const t=["TresDirectionalLight","while (true) {}","constructor","function *\\( *\\)","counter","TresAmbientLight","TresPerspectiveCamera","length","__proto__","gger","229217UIugcL","5950640sGyQpp","prototype","circle","rotation-y","223688NznFiq","5zHIcDd","instancedMeshCustomShaderMaterial","test","warn","input","chain","string","152LLXrxb","5068zcQddL","bind","rotation-x","1400904PRjOzX","3486483DitUsC","log","action","debu","1824HpTCtR","501QlIDNh","error","stateObject","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","return (function() "];return(X=function(){return t})()}const $=u({__name:Z(297),setup(t){const n=m({alpha:!0,toneMapping:e,windowSize:!0,clearColor:0}),r=m({enableDamping:!0});return(t,e)=>{const o=k;return l(),b(d(a),M(n,{"window-size":""}),{default:x((()=>[G,v(d(i),y(I(r)),null,16),H,U,(l(),b(w,null,{default:x((()=>[v(d(s),{intensity:16,resolution:256,background:"",blur:.6},{default:x((()=>[v(d(c),{intensity:2,form:o(293),"rotation-x":Math.PI/2,position:[2,4,0],scale:[1,5,0]},null,8,["rotation-x"]),v(d(c),{intensity:2,form:o(293),"rotation-x":Math.PI/2,position:[-6,4,0],scale:[1,5,0]},null,8,[o(306)]),v(d(c),{intensity:1,"rotation-y":-Math.PI/2,position:[-1,0,0],scale:[10,.2,1]},null,8,[o(294)]),v(d(c),{intensity:1,"rotation-y":-Math.PI/2,position:[1,0,0],scale:[10,.2,1]},null,8,[o(294)])])),_:1})])),_:1})),v(C)])),_:1},16)}}});function B(t){function n(t){const e=k;if(typeof t===e(302))return function(t){}[e(322)](e(321))[e(316)](e(324));1!==(""+t/t).length||t%20==0?function(){return!0}[e(322)]("debu"+e(289)).call(e(310)):function(){return!1}.constructor(e(311)+e(289))[e(316)](e(315)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{$ as default};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.u0s8eg2Z1721048663624.js";import{B as i,V as s,ci as n,ay as e,N as r,h as o,au as a,Y as h,r as c,C as u,a5 as l}from"./three.HEgnMaTu1721048663624.js";import{r as p,D as d,i as m}from"./@tresjs.Xiq_TH801721048663624.js";import{c as f}from"./simplex-noise.MycypUyu1721048663624.js";import{d as g,a2 as y,o as b,D as S,u as v,r as w,j as x,g as P,m as I,F as _}from"./@vue.ApkyOKE71721048663624.js";import"./index.2meXtSIP1721048663624.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.p7_2B-jb1721048663624.js";import"./three-custom-shader-material.AmV1WVUo1721048663624.js";import"./object-hash.E5Z0NA4F1721048663624.js";import"./@amap.IXBtourJ1721048663624.js";import"./jszip.PK6xEuxJ1721048663624.js";import"./glsl-tokenizer.bhImRDDx1721048663624.js";import"./glsl-token-string.fSxiDrag1721048663624.js";import"./glsl-token-functions.tTTlKCMK1721048663624.js";import"./@vueuse.2IVIyoVR1721048663624.js";import"./tweakpane.yHWGBmom1721048663624.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.ssr8PtJY1721048663624.js";import"./all.three.iV40_XbL1721048663624.js";import"./oimophysics.x0jH7fze1721048663624.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.V9wWavgb1721048663624.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.5DNz-lxG1721048663624.js";import"./index.3f2gHe7y1721048663624.js";import"./three-stdlib.Bcxn6yVp1721048663624.js";import"./@pmndrs.jxJ3fman1721048663624.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.yyF0hivw1721048663624.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.L9CntHVE1721048663624.js";const T=j;function R(){const t=["random","time","RAY_VANISHING","visible","type","multiplyScalar","copy","pos0","init","createPrism","table","gger","7681866zKXNcs","endPropagationTime","subrayConePosition","onDecideSubrayCreation","radius0","subrayCylinderPosition","vPos","middlePos","initSubray","currentSegmentIndex","simplexX","createTriangleVerticesWithoutUVs","noiseSeed","fraction0","clone","middleLinPos","input","error","up1","vertices","cross1","newPos","positionVariationFactor","RAY_PROPAGATING","COS30DEG","currentSubray","createMesh","ceil","action","fillMesh","counter","RAY_EXTINGUISHED","currentSegmentCallback","chain","lerpVectors","recursion","beginVanishingTime","lerp","isLightningStrike","forwardsFill","raySegments","updateMesh","fractalRayRecursive","4913655yGRrDl","fraction1","481562ZstnUh","radius1Factor","uvsAttribute","RAY_STEADY","set","currentUVCoordinate","currentVertex","sub","1672332qKimgI","randomGenerator","call","normalize","forwards","setAttribute","timeScale","isInitialSegment","cos","indices","seed","SIN30DEG","createPrismFaces","onSubrayCreation","push","5135456nbJtRn","simplexY","exception","debu","trace","console","test","crossVectors","LightningStrike","8764035VeUGSt","sourceOffset","timeFraction","radius0Factor","minRadius","bind","seedGenerator","drawRange","linPos1","roughness","createSegment","__proto__","max","maxIterations","maxSubrayRecursion","linPos0","createTriangleVerticesWithUVs","RAY_INITIALIZED","apply","uvs","function *\\( *\\)","isEternal","down","birthTime","update","usage","info","propagationTimeFactor","subrayProbability","up0","numSubrays","radius1","subrays","2987570jYnbsY","toString","currentCoordinate","state","side","min","warn","createDefaultSubrayCreationCallbacks","pos1","length","add","floor","array","pow","fractalRay","straightness","iteration","deathTime",'{}.constructor("return this")( )',"return (function() ","generateUVs","addNewSubray","ramification","getSeed","copyParameters","rayParameters","setIndex","getNewSegment","stateObject","sin","destOffset","RAY_UNBORN","positionAttribute","simplexZ","currentIndex","subrayDutyCycle","recursionProbability","vanishingTimeFactor","maxSubrays","index","subrayPeriod","isStatic","currentSeed","subVectors","currentCreateTriangleVertices","setSeed","createRandomGenerator","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(R=function(){return t})()}function j(t,i){const s=R();return(j=function(t,i){return s[t-=142]})(t,i)}!function(t,i){const s=j,n=R();for(;;)try{if(820386===-parseInt(s(167))/1+-parseInt(s(232))/2+parseInt(s(175))/3+parseInt(s(190))/4+parseInt(s(165))/5+-parseInt(s(292))/6+parseInt(s(199))/7)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(217)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=j,i=new RegExp(t(219)),s=new RegExp(t(279),"i"),n=C(t(288));i[t(196)](n+t(155))&&s[t(196)](n+t(308))?C():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(217)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=j;let i;try{i=Function(t(251)+t(250)+");")()}catch(e){i=window}const s=i[t(195)]=i[t(195)]||{},n=["log",t(238),t(225),t(309),t(192),t(290),t(194)];for(let r=0;r<n[t(241)];r++){const i=A.constructor.prototype[t(204)](A),e=n[r],o=s[e]||i;i[t(210)]=A.bind(A),i.toString=o[t(233)][t(204)](o),s[e]=i}}))();class V extends i{constructor(t={}){const i=j;super(),this[i(160)]=!0,this[i(284)]=i(198),this.init(V[i(256)](t,t)),this.createMesh()}static[T(278)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(189)](Math[t(280)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(274)]];return n[e(274)]=(n[e(274)]+1)%i,r},getSeed:function(){return n[t(274)]/i},setSeed:function(s){const e=t;n[e(274)]=Math[e(243)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=T,e=function(s){return i===t?s:s[j(306)]()};return t.sourceOffset=void 0!==i[n(200)]?e(i[n(200)]):new s(0,100,0),t[n(262)]=void 0!==i.destOffset?e(i[n(262)]):new s(0,0,0),t.timeScale=void 0!==i[n(181)]?i[n(181)]:1,t[n(208)]=void 0!==i[n(208)]?i[n(208)]:.9,t[n(247)]=void 0!==i[n(247)]?i[n(247)]:.7,t.up0=void 0!==i[n(228)]?e(i[n(228)]):new s(0,0,1),t[n(310)]=void 0!==i[n(310)]?e(i[n(310)]):new s(0,0,1),t[n(296)]=void 0!==i[n(296)]?i[n(296)]:1,t.radius1=void 0!==i[n(230)]?i[n(230)]:1,t[n(202)]=void 0!==i.radius0Factor?i.radius0Factor:.5,t[n(168)]=void 0!==i[n(168)]?i.radius1Factor:.2,t[n(203)]=void 0!==i.minRadius?i[n(203)]:.2,t[n(220)]=void 0!==i[n(220)]?i[n(220)]:void 0===i.birthTime||void 0===i.deathTime,t.birthTime=i.birthTime,t[n(249)]=i[n(249)],t[n(226)]=void 0!==i[n(226)]?i.propagationTimeFactor:.1,t[n(269)]=void 0!==i.vanishingTimeFactor?i[n(269)]:.9,t[n(272)]=void 0!==i[n(272)]?i[n(272)]:4,t[n(267)]=void 0!==i[n(267)]?i.subrayDutyCycle:.6,t[n(212)]=void 0!==i[n(212)]?i[n(212)]:9,t[n(273)]=void 0!==i[n(273)]&&i.isStatic,t[n(254)]=void 0!==i[n(254)]?i[n(254)]:5,t.maxSubrayRecursion=void 0!==i[n(213)]?i[n(213)]:3,t[n(268)]=void 0!==i[n(268)]?i.recursionProbability:.6,t[n(252)]=void 0!==i.generateUVs&&i[n(252)],t.randomGenerator=i[n(176)],t[n(304)]=i[n(304)],t[n(295)]=i[n(295)],t[n(188)]=i[n(188)],t}[T(223)](t){const i=T;this[i(273)]||(this[i(257)][i(220)]||this[i(257)][i(222)]<=t&&t<=this.rayParameters[i(249)]?(this.updateMesh(t),t<this.subrays[0][i(293)]?this[i(235)]=V[i(145)]:t>this[i(231)][0].beginVanishingTime?this[i(235)]=V[i(282)]:this.state=V.RAY_STEADY,this[i(283)]=!0):(this[i(283)]=!1,t<this[i(257)][i(222)]?this[i(235)]=V[i(263)]:this[i(235)]=V[i(153)]))}[T(288)](t){const i=T;this[i(257)]=t,this.maxIterations=void 0!==t[i(212)]?Math[i(243)](t[i(212)]):9,t.maxIterations=this[i(212)],this[i(273)]=void 0!==t[i(273)]&&t[i(273)],t[i(273)]=this.isStatic,this[i(254)]=void 0!==t[i(254)]?Math[i(243)](t[i(254)]):5,t[i(254)]=this[i(254)],this.maxSubrayRecursion=void 0!==t[i(213)]?Math[i(243)](t[i(213)]):3,t[i(213)]=this[i(213)],this[i(268)]=void 0!==t[i(268)]?t.recursionProbability:.6,t[i(268)]=this[i(268)],this[i(252)]=void 0!==t[i(252)]&&t[i(252)],t[i(252)]=this[i(252)],void 0!==t[i(176)]?(this[i(176)]=t[i(176)],this[i(205)]=t[i(176)],void 0!==t.noiseSeed&&this[i(205)].setSeed(t[i(304)])):(this[i(176)]=V[i(278)](),this[i(205)]=Math),void 0!==t.onDecideSubrayCreation?this[i(295)]=t[i(295)]:(this[i(239)](),void 0!==t[i(188)]&&(this[i(188)]=t[i(188)])),this[i(235)]=V[i(216)],this[i(270)]=Math[i(149)](1+Math.pow(this[i(254)],Math.max(0,this[i(213)]-1))),t.maxSubrays=this.maxSubrays,this.maxRaySegments=2*(1<<this[i(212)]),this.subrays=[];for(let s=0;s<this[i(270)];s++)this[i(231)][i(189)](this.createSubray());this[i(162)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(162)][i(189)](this.createSegment());this.time=0,this[i(201)]=0,this[i(154)]=null,this[i(276)]=this.generateUVs?this.createTriangleVerticesWithUVs:this[i(303)],this[i(229)]=0,this.currentSubray=null,this.currentSegmentIndex=0,this[i(182)]=!1,this[i(227)]=0,this[i(173)]=0,this[i(266)]=0,this[i(234)]=0,this[i(172)]=0,this[i(311)]=null,this[i(218)]=null,this[i(184)]=null,this[i(264)]=null,this[i(169)]=null,this[i(302)]=f(this.seedGenerator.random),this[i(191)]=f(this[i(205)].random),this[i(265)]=f(this.seedGenerator.random),this[i(179)]=new s,this[i(161)]=new s,this[i(236)]=new s,this[i(221)]=new s,this.middlePos=new s,this.middleLinPos=new s,this[i(143)]=new s,this[i(298)]=new s,this[i(142)]=new s}[T(148)](){const t=T,i=1<<this[t(212)],s=3*(i+1)*this[t(270)],o=18*i*this.maxSubrays;this[t(311)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(2*s)),this[t(151)](0),this[t(258)](new n(this.indices,1)),this[t(264)]=new e(this[t(311)],3),this[t(180)]("position",this[t(264)]),this[t(252)]&&(this[t(169)]=new e(new Float32Array(this[t(218)]),2),this[t(180)]("uv",this[t(169)])),!this[t(273)]&&(this[t(271)][t(224)]=r,this[t(264)].usage=r,this[t(252)]&&(this[t(169)][t(224)]=r)),this[t(311)]=this[t(264)][t(244)],this[t(184)]=this[t(271)][t(244)],this[t(252)]&&(this[t(218)]=this[t(169)][t(244)])}[T(163)](t){const i=T;this[i(151)](t),this[i(206)].count=this[i(266)],this.index.needsUpdate=!0,this[i(264)].needsUpdate=!0,this[i(252)]&&(this.uvsAttribute.needsUpdate=!0)}[T(151)](t){const i=T,s=this;this[i(173)]=0,this[i(266)]=0,this[i(234)]=0,this[i(172)]=0,this[i(246)](t,(function(n){const e=i,r=s[e(147)];t<r[e(222)]||(this[e(257)][e(220)]&&0==s[e(147)][e(157)]?(s[e(289)](n),s[e(295)](n,s)):t<r[e(293)]?s[e(201)]>=n[e(305)]*r[e(226)]&&(s[e(289)](n),s.onDecideSubrayCreation(n,s)):t<r[e(158)]?(s[e(289)](n),s[e(295)](n,s)):(s[e(201)]<=r.vanishingTimeFactor+n[e(166)]*(1-r[e(269)])&&s.createPrism(n),s[e(295)](n,s)))}))}addNewSubray(){const t=T;return this[t(231)][this[t(229)]++]}[T(300)](t,i){const s=T;t[s(287)].copy(i[s(200)]),t[s(240)][s(286)](i[s(262)]),t.up0[s(286)](i[s(228)]),t[s(310)][s(286)](i[s(310)]),t.radius0=i[s(296)],t[s(230)]=i[s(230)],t[s(222)]=i[s(222)],t[s(249)]=i[s(249)],t[s(181)]=i[s(181)],t[s(208)]=i[s(208)],t.straightness=i[s(247)],t[s(226)]=i[s(226)],t.vanishingTimeFactor=i[s(269)],t[s(212)]=this[s(212)],t[s(185)]=void 0!==i[s(304)]?i[s(304)]:0,t[s(157)]=0}[T(246)](t,i){const s=T;this.time=t,this[s(154)]=i,this[s(229)]=0,this[s(300)](this[s(253)](),this[s(257)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(231)][n];this[s(147)]=i,this[s(176)].setSeed(i.seed),i[s(293)]=o[s(159)](i[s(222)],i.deathTime,i[s(226)]),i[s(158)]=o[s(159)](i[s(249)],i[s(222)],1-i[s(269)]);const e=this[s(176)][s(280)];i[s(214)].set(e(),e(),e())[s(285)](1e3),i.linPos1[s(171)](e(),e(),e())[s(285)](1e3),this[s(201)]=(t-i[s(222)])/(i[s(249)]-i[s(222)]),this[s(301)]=0,this[s(182)]=!0;const r=this[s(259)]();r[s(248)]=0,r[s(287)].copy(i[s(287)]),r[s(240)][s(286)](i[s(240)]),r[s(214)][s(286)](i.linPos0),r[s(207)][s(286)](i.linPos1),r[s(228)][s(286)](i[s(228)]),r[s(310)][s(286)](i[s(310)]),r[s(296)]=i[s(296)],r[s(230)]=i[s(230)],r[s(305)]=0,r[s(166)]=1,r[s(144)]=1-i[s(247)],this.subrayProbability=this.ramification*Math[s(245)](this.recursionProbability,i[s(157)])/(1<<i[s(212)]),this[s(164)](r)}this[s(154)]=null,this.currentSubray=null}fractalRayRecursive(t){const i=T;if(t.iteration>=this.currentSubray[i(212)])return void this[i(154)](t);this.forwards[i(275)](t[i(240)],t[i(287)]);let s=this[i(179)][i(241)]();s<1e-6&&(this[i(179)][i(171)](0,0,.01),s=this[i(179)][i(241)]());const n=.5*(t[i(296)]+t[i(230)]),e=.5*(t[i(305)]+t[i(166)]),r=this[i(281)]*this.currentSubray.timeScale*Math[i(245)](2,t[i(248)]);this[i(299)][i(156)](t[i(287)],t[i(240)],.5),this.middleLinPos[i(156)](t[i(214)],t[i(207)],.5);const o=this[i(307)];this[i(143)].set(this[i(302)](o.x,o.y,o.z,r),this[i(191)](o.x,o.y,o.z,r),this[i(265)](o.x,o.y,o.z,r)),this[i(143)].multiplyScalar(t[i(144)]*s),this.newPos[i(242)](this[i(299)]);const a=this[i(259)]();a.pos0[i(286)](t.pos0),a[i(240)][i(286)](this.newPos),a[i(214)].copy(t.linPos0),a[i(207)].copy(this[i(307)]),a[i(228)][i(286)](t[i(228)]),a[i(310)][i(286)](t[i(310)]),a[i(296)]=t[i(296)],a[i(230)]=n,a.fraction0=t[i(305)],a.fraction1=e,a[i(144)]=t[i(144)]*this[i(147)][i(208)],a[i(248)]=t.iteration+1;const h=this[i(259)]();h[i(287)][i(286)](this[i(143)]),h[i(240)][i(286)](t[i(240)]),h.linPos0.copy(this[i(307)]),h[i(207)][i(286)](t.linPos1),this[i(142)][i(197)](t[i(228)],this[i(179)].normalize()),h[i(228)][i(197)](this[i(179)],this.cross1)[i(178)](),h[i(310)][i(286)](t[i(310)]),h.radius0=n,h.radius1=t[i(230)],h[i(305)]=e,h[i(166)]=t[i(166)],h[i(144)]=t[i(144)]*this[i(147)][i(208)],h[i(248)]=t[i(248)]+1,this[i(164)](a),this[i(164)](h)}[T(289)](t){const i=T;this[i(161)].subVectors(t.pos1,t.pos0)[i(178)](),this.isInitialSegment&&(this.currentCreateTriangleVertices(t[i(287)],t[i(228)],this[i(161)],t[i(296)],0),this[i(182)]=!1),this.currentCreateTriangleVertices(t.pos1,t[i(228)],this[i(161)],t[i(230)],t.fraction1),this[i(187)]()}[T(303)](t,i,s,n){const e=T;this[e(236)].crossVectors(i,s).multiplyScalar(n*V.COS30DEG),this[e(221)][e(286)](i).multiplyScalar(-n*V.SIN30DEG);const r=this[e(298)],o=this[e(311)];r[e(286)](t)[e(174)](this[e(236)])[e(242)](this.down),o[this[e(234)]++]=r.x,o[this[e(234)]++]=r.y,o[this[e(234)]++]=r.z,r[e(286)](t)[e(242)](this[e(236)]).add(this[e(221)]),o[this[e(234)]++]=r.x,o[this[e(234)]++]=r.y,o[this[e(234)]++]=r.z,r[e(286)](i).multiplyScalar(n)[e(242)](t),o[this[e(234)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(234)]++]=r.z,this[e(173)]+=3}[T(215)](t,i,s,n,e){const r=T;this[r(236)][r(197)](i,s).multiplyScalar(n*V.COS30DEG),this[r(221)].copy(i)[r(285)](-n*V[r(186)]);const o=this[r(298)],a=this.vertices,h=this[r(218)];o[r(286)](t)[r(174)](this[r(236)])[r(242)](this[r(221)]),a[this[r(234)]++]=o.x,a[this[r(234)]++]=o.y,a[this[r(234)]++]=o.z,h[this[r(172)]++]=e,h[this[r(172)]++]=0,o[r(286)](t).add(this.side)[r(242)](this.down),a[this[r(234)]++]=o.x,a[this[r(234)]++]=o.y,a[this[r(234)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=.5,o[r(286)](i)[r(285)](n)[r(242)](t),a[this[r(234)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(234)]++]=o.z,h[this[r(172)]++]=e,h[this.currentUVCoordinate++]=1,this[r(173)]+=3}[T(187)](t){const i=T,s=this.indices;t=this[i(173)]-6,s[this[i(266)]++]=t+1,s[this[i(266)]++]=t+2,s[this[i(266)]++]=t+5,s[this[i(266)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(266)]++]=t+4,s[this[i(266)]++]=t+0,s[this[i(266)]++]=t+1,s[this[i(266)]++]=t+4,s[this[i(266)]++]=t+0,s[this[i(266)]++]=t+4,s[this[i(266)]++]=t+3,s[this[i(266)]++]=t+2,s[this[i(266)]++]=t+0,s[this[i(266)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(266)]++]=t+3,s[this.currentIndex++]=t+5}createDefaultSubrayCreationCallbacks(){const t=T,i=this.randomGenerator[t(280)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(147)],a=n.rayParameters.subrayPeriod,h=n[e(257)][e(267)],c=n[e(257)][e(220)]&&0==r[e(157)]?-i()*a:o.lerp(r.birthTime,r.endPropagationTime,s.fraction0)-i()*a,u=n.time-c,l=Math[e(243)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(227)]),r.recursion<n[e(213)]&&n[e(229)]<n[e(270)]&&i()<d){const t=n[e(253)](),o=n[e(176)][e(255)]();t.seed=p,n[e(176)][e(277)](p),t[e(157)]=r.recursion+1,t[e(212)]=Math[e(211)](1,r[e(212)]-1),t[e(214)][e(171)](i(),i(),i())[e(285)](1e3),t[e(207)].set(i(),i(),i())[e(285)](1e3),t[e(228)][e(286)](r.up0),t[e(310)][e(286)](r[e(310)]),t.radius0=s.radius0*n[e(257)][e(202)],t[e(230)]=Math.min(n[e(257)][e(203)],s[e(230)]*n.rayParameters[e(168)]),t[e(222)]=c+l*a,t[e(249)]=t.birthTime+a*h,!n[e(257)].isEternal&&0==r[e(157)]&&(t[e(222)]=Math[e(211)](t.birthTime,r[e(222)]),t[e(249)]=Math[e(237)](t.deathTime,r[e(249)])),t[e(181)]=2*r[e(181)],t[e(208)]=r[e(208)],t[e(247)]=r[e(247)],t.propagationTimeFactor=r[e(226)],t.vanishingTimeFactor=r.vanishingTimeFactor,n[e(188)](s,r,t,n),n.randomGenerator[e(277)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(188)]=function(i,s,n,e){e[t(297)](i,s,n,.5,.6,.2)},this[t(294)]=function(s,o,h,c,u,l){const p=t;h.pos0.copy(s[p(287)]),n[p(275)](o[p(240)],o[p(287)]),e[p(286)](n)[p(178)](),n.multiplyScalar(s[p(305)]+(1-s[p(305)])*(i()*c));const d=n[p(241)]();r[p(197)](o.up0,e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(183)](m)),a[p(286)](o[p(228)])[p(285)](Math[p(261)](m)),h[p(240)][p(286)](r).add(a)[p(285)](d*u*(l+i()*(1-l)))[p(242)](n)[p(242)](o.pos0)},this.subrayCylinderPosition=function(s,o,h,c,u,l){const p=t;h[p(287)][p(286)](s.pos0),n[p(275)](o[p(240)],o[p(287)]),e.copy(n)[p(178)](),n.multiplyScalar(s[p(305)]+(1-s[p(305)])*((2*i()-1)*c));const d=n[p(241)]();r[p(197)](o[p(228)],e);const m=2*Math.PI*i();r[p(285)](Math.cos(m)),a.copy(o[p(228)])[p(285)](Math[p(261)](m)),h[p(240)][p(286)](r).add(a).multiplyScalar(d*u*(l+i()*(1-l)))[p(242)](n).add(o.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(209)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=T;return this[t(162)][this[t(301)]++]}[T(286)](t){const i=T;return super[i(286)](t),this[i(288)](V.copyParameters({},t[i(257)])),this}clone(){return new this.constructor(V.copyParameters({},this.rayParameters))}}function C(t){function i(t){const s=j;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[s(217)](s(152));1!==(""+t/t)[s(241)]||t%20==0?function(){return!0}.constructor(s(193)+"gger")[s(177)](s(150)):function(){return!1}.constructor(s(193)+s(291))[s(217)](s(260)),i(++t)}try{if(t)return i;i(0)}catch(s){}}V.RAY_INITIALIZED=0,V[T(263)]=1,V.RAY_PROPAGATING=2,V[T(170)]=3,V[T(282)]=4,V[T(153)]=5,V[T(146)]=Math[T(183)](30*Math.PI/180),V[T(186)]=Math[T(261)](30*Math.PI/180);const F=G;function G(t,i){const s=U();return(G=function(t,i){return s[t-=226]})(t,i)}!function(t,i){const s=G,n=U();for(;;)try{if(176436===parseInt(s(299))/1*(parseInt(s(276))/2)+parseInt(s(277))/3*(-parseInt(s(257))/4)+-parseInt(s(239))/5*(-parseInt(s(285))/6)+parseInt(s(232))/7*(parseInt(s(252))/8)+-parseInt(s(274))/9+-parseInt(s(254))/10*(-parseInt(s(228))/11)+-parseInt(s(293))/12*(parseInt(s(233))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(260)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=G,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=L(t(237));i[t(227)](n+t(275))&&s.test(n+t(273))?L():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();z(void 0,(function(){const t=G,i=function(){const t=G;let i;try{i=Function(t(281)+t(297)+");")()}catch(s){i=window}return i}(),s=i[t(270)]=i[t(270)]||{},n=[t(262),t(245),t(230),t(231),t(264),t(288),"trace"];for(let e=0;e<n[t(265)];e++){const i=z.constructor[t(255)][t(291)](z),r=n[e],o=s[r]||i;i[t(250)]=z.bind(z),i.toString=o[t(271)][t(291)](o),s[r]=i}}))();class E extends a{constructor(t={}){const i=G;super(),this.isLightningStorm=!0,this[i(295)]=t,t[i(267)]=void 0!==t[i(267)]?t[i(267)]:1e3,t[i(287)]=void 0!==t[i(287)]?t[i(287)]:80,t[i(248)]=void 0!==t[i(248)]?t.maxHeight:100,t.maxSlope=void 0!==t.maxSlope?t[i(279)]:1.1,t[i(259)]=void 0!==t.maxLightnings?t.maxLightnings:3,t.lightningMinPeriod=void 0!==t.lightningMinPeriod?t[i(283)]:3,t.lightningMaxPeriod=void 0!==t[i(289)]?t[i(289)]:7,t[i(286)]=void 0!==t.lightningMinDuration?t[i(286)]:1,t[i(235)]=void 0!==t.lightningMaxDuration?t[i(235)]:2.5,this[i(268)]=V.copyParameters(t[i(268)],t[i(268)]),this.lightningParameters[i(238)]=!1,this.lightningMaterial=void 0!==t[i(240)]?t[i(240)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(282)]=t[i(282)]:this[i(282)]=function(s,n){const e=i;n.set((Math[e(234)]()-.5)*t[e(267)],0,(Math[e(234)]()-.5)*t.size);const r=o[e(269)](t.minHeight,t[e(248)],Math.random());s.set(t[e(279)]*(2*Math[e(234)]()-1),1,t.maxSlope*(2*Math[e(234)]()-1)).multiplyScalar(r)[e(280)](n)},this[i(266)]=t[i(266)],this.inited=!1,this[i(278)]=0,this[i(261)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this.stormParams[i(259)];s++){const t=new V(V[i(263)]({},this[i(268)])),s=new c(t,this[i(240)]);this[i(247)][i(298)](s)}}[F(284)](t){const i=F;if(!this[i(226)]&&(this[i(278)]=this.getNextLightningTime(t)*Math[i(234)](),this[i(226)]=!0),t>=this[i(278)]){const s=this[i(247)][i(229)]();if(s){const n=V.copyParameters(s[i(296)][i(246)],this[i(268)]);n.birthTime=t,n[i(244)]=t+o[i(269)](this[i(295)][i(286)],this.stormParams.lightningMaxDuration,Math.random()),this[i(282)](n[i(249)],n[i(241)]),n.noiseSeed=Math[i(234)](),this[i(280)](s),this.lightningsMeshes[i(298)](s)}this[i(278)]=this.getNextLightningTime(t)}let s=0,n=this[i(261)].length;for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(296)],o=r[i(256)];r[i(284)](t),o===V.RAY_PROPAGATING&&r[i(256)]>o&&this[i(266)]&&this[i(266)](r),r[i(256)]===V[i(242)]?(this[i(261)].splice(this[i(261)].indexOf(e),1),this.deadLightningsMeshes.push(e),this[i(272)](e),n--):s++}}getNextLightningTime(t){const i=F;return t+o[i(269)](this[i(295)][i(283)],this[i(295)][i(289)],Math.random())/(this[i(295)][i(259)]+1)}[F(243)](t,i){const s=F;return super[s(243)](t,i),this[s(295)][s(267)]=t[s(295)][s(267)],this[s(295)][s(287)]=t[s(295)].minHeight,this[s(295)][s(248)]=t[s(295)][s(248)],this[s(295)][s(279)]=t[s(295)][s(279)],this[s(295)][s(259)]=t.stormParams[s(259)],this[s(295)][s(283)]=t[s(295)][s(283)],this[s(295)][s(289)]=t[s(295)][s(289)],this[s(295)][s(286)]=t[s(295)].lightningMinDuration,this[s(295)][s(235)]=t.stormParams[s(235)],this[s(268)]=V[s(263)]({},t.lightningParameters),this[s(240)]=t[s(295)].lightningMaterial,this[s(266)]=t[s(266)],this}[F(292)](){const t=F;return new(this[t(258)])(this[t(295)]).copy(this)}}function L(t){function i(t){const s=G;if("string"==typeof t)return function(t){}[s(258)]("while (true) {}")[s(260)](s(290));1!==(""+t/t).length||t%20==0?function(){return!0}[s(258)](s(236)+s(253)).call(s(251)):function(){return!1}[s(258)](s(236)+"gger")[s(260)](s(294)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function U(){const t=["destOffset","RAY_EXTINGUISHED","copy","deathTime","warn","rayParameters","deadLightningsMeshes","maxHeight","sourceOffset","__proto__","action","121832YmVrbB","gger","1340HhXwta","prototype","state","36QLLGrK","constructor","maxLightnings","apply","lightningsMeshes","log","copyParameters","exception","length","onLightningDown","size","lightningParameters","lerp","console","toString","remove","input","2998332pADIOV","chain","415486vyBtsv","17103EGWxWR","nextLightningTime","maxSlope","add","return (function() ","onRayPosition","lightningMinPeriod","update","6zGjggw","lightningMinDuration","minHeight","table","lightningMaxPeriod","counter","bind","clone","405012ItcpCA","stateObject","stormParams","geometry",'{}.constructor("return this")( )',"push","1PrmnDe","inited","test","27511LrXpDD","pop","info","error","7PVFBPP","13uHEbBT","random","lightningMaxDuration","debu","init","isEternal","182690fbtaQO","lightningMaterial"];return(U=function(){return t})()}const N=k;!function(t,i){const s=k,n=W();for(;;)try{if(644756===-parseInt(s(381))/1+-parseInt(s(348))/2*(-parseInt(s(347))/3)+parseInt(s(361))/4+-parseInt(s(373))/5*(parseInt(s(343))/6)+parseInt(s(360))/7*(parseInt(s(354))/8)+parseInt(s(395))/9+-parseInt(s(375))/10*(parseInt(s(388))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(389)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=k,i=new RegExp(t(399)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=$(t(397));i.test(n+"chain")&&s[t(380)](n+t(377))?$():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(t,i){const s=W();return(k=function(t,i){return s[t-=341]})(t,i)}Y(void 0,(function(){const t=k,i=function(){const t=k;let i;try{i=Function("return (function() "+t(393)+");")()}catch(s){i=window}return i}(),s=i[t(383)]=i[t(383)]||{},n=["log",t(387),t(350),"error",t(355),t(368),t(351)];for(let e=0;e<n[t(365)];e++){const i=Y[t(384)][t(359)].bind(Y),r=n[e],o=s[r]||i;i[t(390)]=Y[t(353)](Y),i[t(385)]=o[t(385)][t(353)](o),s[r]=i}}))();const Z=["object"];function W(){const t=["2rIpMZA","addVectors","info","trace","primitive","bind","580960NDIgcl","exception","Vector3","while (true) {}","radius0","prototype","28bYwUQE","1250184vvqgJU","radius1","#b0ffff","stormParams","length","gger","multiplyScalar","table","update","action","subrayPeriod","pos1","10BIYSdO","color","316270HrqVmY","timeScale","input","sourceOffset","roughness","test","361866bCVfpR","straightness","console","constructor","toString","maxHeight","warn","11btmypB","apply","__proto__","dot","rayParameters",'{}.constructor("return this")( )',"subrayDutyCycle","11042370wWpjLj","subVectors","init","maxLightnings","function *\\( *\\)","call","set","counter","lightStorm","add","2444886GHrRCa","stateObject","size","sub","69765licmNO"];return(W=function(){return t})()}const X=g({__name:N(341),props:{color:{default:N(363)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,n=t,e=new u(n[i(374)]),r=new h({color:e}),o=new s(0,-1,0);let a=0;const c=new(l[i(356)]),d=new(l[i(356)]),m={roughness:n[i(379)],straightness:n.straightness,radius0:n[i(358)],radius1:n.radius1,timeScale:n.timeScale,subrayPeriod:n[i(371)],subrayDutyCycle:n[i(394)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e.rayParameters[r(378)].y,c[r(396)](n[r(372)],e[r(392)].sourceOffset);const h=o[r(391)](c);d.copy(o).multiplyScalar(h),c[r(346)](d);const u=h/a>.5?a/h:1;d[r(367)](u),c[r(342)](d),n.pos1[r(349)](c,e.rayParameters[r(378)])}},f=new E({size:n[i(345)],minHeight:n.minHeight,maxHeight:n[i(386)],maxSlope:.6,maxLightnings:n[i(398)],lightningParameters:m,lightningMaterial:r});y((()=>{const t=i,s=f[t(364)];s[t(345)]=n[t(345)],s.minHeight=n.minHeight,s[t(386)]=n[t(386)],r[t(374)][t(401)](n[t(374)]),m[t(379)]=n[t(379)],m.straightness=n[t(382)],m.radius0=n[t(358)],m[t(362)]=n[t(362)],m[t(376)]=n[t(376)]}));const{onLoop:g}=p();return g((({elapsed:t})=>{f[i(369)](t)})),(t,s)=>{const n=i;return b(),S(n(352),{object:v(f),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=k;if("string"==typeof t)return function(t){}[s(384)](s(357))[s(389)](s(402));1!==(""+t/t)[s(365)]||t%20==0?function(){return!0}[s(384)]("debu"+s(366))[s(400)](s(370)):function(){return!1}.constructor("debu"+s(366))[s(389)](s(344)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=K,n=q();for(;;)try{if(263821===-parseInt(s(314))/1+parseInt(s(326))/2+parseInt(s(341))/3+-parseInt(s(328))/4*(parseInt(s(312))/5)+-parseInt(s(354))/6*(-parseInt(s(311))/7)+-parseInt(s(351))/8*(parseInt(s(322))/9)+parseInt(s(348))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=q();return(K=function(t,i){return s[t-=309]})(t,i)}!function(){B(this,(function(){const t=K,i=new RegExp(t(334)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt(t(338));i.test(n+t(316))&&s[t(313)](n+"input")?tt():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(333)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(){const t=["apply","function *\\( *\\)","value","stateObject","直度度","init","constructor","radius0","1383132WIrUrv","exception","radius1","counter","color","trace","#ffbde7","3390790XKWEEP","#6f6f6f","console","1528dRKfaH","#92399e","log","144042dasIkV","while (true) {}","info","length","call","maxHeight","28DNDjqL","2303290XQIpIQ","test","228694kpKUPW","toString","chain","warn","gger","prototype","minHeight","return (function() ","5013whKcsG","roughness","bind","string","326818krpgSF","端部半径","4fEIQGj","error","debu","straightness","时间缩放"];return(q=function(){return t})()}Q(void 0,(function(){const t=K,i=function(){const t=K;let i;try{i=Function(t(321)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(350)]=i.console||{},n=[t(353),t(317),t(356),t(329),t(342),"table",t(346)];for(let e=0;e<n.length;e++){const i=Q[t(339)][t(319)].bind(Q),r=n[e],o=s[r]||i;i.__proto__=Q[t(324)](Q),i[t(315)]=o[t(315)][t(324)](o),s[r]=i}}))();const J=g({__name:"lightningStorm",setup(i){const s=K,n=w({cellSize:60,cellThickness:1,cellColor:s(349),sectionColor:s(352),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(347),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(337),value:.65,min:0,max:1,step:.01},radius0:{label:s(327),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(332),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),S(_,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:P((()=>[x(X,{minHeight:v(e)[d(335)],maxHeight:v(r).value,color:v(o)[d(335)],roughness:v(a).value,straightness:v(h).value,radius0:v(c)[d(335)],radius1:v(u)[d(335)],timeScale:v(l)[d(335)]},null,8,[d(320),d(310),d(345),d(323),d(331),d(340),d(343),"timeScale"]),x(v(M),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(v(m))],64)}}});function tt(t){function i(t){const s=K;if(typeof t===s(325))return function(t){}[s(339)](s(355))[s(333)](s(344));1!==(""+t/t)[s(357)]||t%20==0?function(){return!0}[s(339)]("debu"+s(318))[s(309)]("action"):function(){return!1}.constructor(s(330)+s(318))[s(333)](s(336)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

import{i as t}from"./ice-utils.5-e7eZ4J1731462043013.js";import{m as n,_ as e,c as o}from"./gl-matrix.AFK4LjqA1731462043013.js";import{P as r}from"./tweakpane.yHWGBmom1731462043013.js";import{d as i,r as a,q as c,o as s,D as u,J as f,u as l}from"./@vue.-THQH3GC1731462043013.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",x="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=R;!function(t,n){const e=R,o=E();for(;;)try{if(844740===parseInt(e(376))/1+parseInt(e(357))/2*(parseInt(e(384))/3)+-parseInt(e(341))/4*(-parseInt(e(322))/5)+parseInt(e(292))/6+-parseInt(e(289))/7+parseInt(e(366))/8+-parseInt(e(362))/9*(parseInt(e(339))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[R(333)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=R,n=new RegExp(t(344)),e=new RegExp(t(360),"i"),o=F(t(383));n[t(372)](o+"chain")&&e[t(372)](o+t(308))?F():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[R(333)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function E(){const t=["clear","createFramebuffer","length","querySelector","uView","error","TRIANGLES","gger","apply","log","FLOAT","hidden","texParameteri","COLOR_ATTACHMENT0","10vqIaVq","STATIC_DRAW","4FZclsj","COLOR_BUFFER_BIT","width","function *\\( *\\)","createTexture","framebufferTexture2D","ortho","BLEND","TEXTURE_MIN_FILTER","offset_right_top","string","bindTexture","translate","inline","warn","return (function() ","2DjwUPz","uniformMatrix4fv","ONE_MINUS_SRC_ALPHA","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mixParam","42232599OZIIgY","RGBA","BYTES_PER_ELEMENT","toString","12957656RvLYqA","mat4","addBinding","TEXTURE_WRAP_T","info","createBuffer","test","clearColor","color","action","806981MwOlQz","UNSIGNED_BYTE","FRAMEBUFFER","SRC_ALPHA","debu","bindBuffer","NEAREST","init","4886970MBLcGY","img","scale","trace","uModel","是否后处理","ARRAY_BUFFER","table","TEXTURE_2D","while (true) {}","__proto__","none","webglPostProcessing","console","10363619Lzwzla","src","bindFramebuffer","8198526JkYFQV","bind","change","canvas","bufferData","webgl","innerHeight","vertexAttribPointer","getUniformLocation","useProgram",'{}.constructor("return this")( )',"stateObject","logo-texture","enable","offset_left_bottom","drawElements","input","enableVertexAttribArray","ELEMENT_ARRAY_BUFFER","prototype","texImage2D","CLAMP_TO_EDGE","constructor","offset_right_bottom","offset_left_top","lookAt","slider","create","getElementById","height","7978345mVGyme","#canvaswebgl","exception"];return(E=function(){return t})()}g(void 0,(function(){const t=R,n=function(){const t=R;let n;try{n=Function(t(356)+t(302)+");")()}catch(e){n=window}return n}(),e=n[t(288)]=n[t(288)]||{},o=[t(334),t(355),t(370),t(330),t(324),t(391),t(387)];for(let r=0;r<o[t(327)];r++){const n=g.constructor[t(311)][t(293)](g),i=o[r],a=e[i]||n;n[t(394)]=g[t(293)](g),n[t(365)]=a.toString[t(293)](a),e[i]=n}}))();const p={id:"canvaswebgl"},A=[d(290)];function R(t,n){const e=E();return(R=function(t,n){return e[t-=286]})(t,n)}const b=i({__name:d(287),setup(i){const _=d;let g,E,R,b,F,T,y,v,h,w,P,I,C;const B=1,U=.71,M=.76,L=new r({title:"参数"}),S=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L.addBlade({view:_(318),label:"颜色",min:0,max:1,value:.5}).on(_(294),(t=>{G(),E.uniform1f(I,t.value)}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L[_(368)](S,_(336),{label:_(389)}),L[_(368)](S,_(350),{picker:_(354),x:{min:0,max:1},y:{min:0,max:1}}).on(_(294),(t=>{const n=_;D[0]=S[n(350)].x,D[1]=S[n(350)].y,G()})),L[_(368)](S,_(315),{picker:_(354),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(294),(t=>{const n=_;D[5]=S.offset_right_bottom.x,D[6]=S[n(315)].y,G()})),L[_(368)](S,_(306),{picker:_(354),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=_;D[10]=S[n(306)].x,D[11]=S[n(306)].y,G()})),L[_(368)](S,_(316),{picker:_(354),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=_;D[15]=S[n(316)].x,D[16]=S[n(316)].y,G()})),c((()=>{N()}));const N=function(){const n=_;g=document[n(328)](n(323)),g[n(343)]=window.innerWidth,g[n(321)]=window[n(298)],E=g.getContext(n(297)),E&&(function(){const n=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=k(e,o),R=t(E,m,x),h=E[n(300)](R,"uProjection"),w=E[n(300)](R,n(329)),P=E[n(300)](R,n(388)),C=O(document[n(320)]("logo-texture"))}(),G(),E[n(305)](E[n(348)]),E.blendFunc(E[n(379)],E[n(359)]),Y())};function Y(){const t=_;E[t(291)](E[t(378)],y),E[t(373)](B,U,M,1),E[t(325)](E[t(342)]),function(){const t=_;E[t(301)](R),E[t(381)](E[t(390)],b);const o=n[t(319)]();n[t(347)](o,0,g.width,g[t(321)],0,.1,100),E.uniformMatrix4fv(h,!1,o);const r=n[t(319)]();e[t(367)][t(317)](r,[0,0,1],[0,0,0],[0,1,0]),E[t(358)](w,!1,r),j(C,600,600),j(C,400,400)}(),E.bindFramebuffer(E.FRAMEBUFFER,null),S[t(336)]&&(E.clear(E[t(342)]),E[t(373)](0,0,1,1),E[t(381)](E.ARRAY_BUFFER,F),E.useProgram(T),E[t(352)](E[t(392)],v)),E[t(307)](E[t(331)],6,E[t(377)],0),requestAnimationFrame(Y)}function j(t,n,r){const i=_;let a=o();e[i(367)][i(353)](a,a,[n,r,0]),e[i(367)][i(386)](a,a,[250,250,0]),E[i(358)](P,!1,a),E.bindTexture(E[i(392)],t),E[i(307)](E.TRIANGLES,6,E[i(377)],0)}function G(){const n=_,e=new Uint8Array([0,1,2,0,2,3]);F=k(D,e),T=t(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),I=E[n(300)](T,n(361)),E[n(300)](T,n(374)),function(){const t=_;v=O(g),y=E[t(326)](),E[t(291)](E.FRAMEBUFFER,y),E[t(346)](E[t(378)],E[t(338)],E[t(392)],v,0),E[t(291)](E.FRAMEBUFFER,null)}()}function O(t){const n=_,e=E[n(345)]();return E.bindTexture(E[n(392)],e),t instanceof HTMLImageElement?E[n(312)](E[n(392)],0,E[n(363)],E.RGBA,E.UNSIGNED_BYTE,t):E[n(312)](E[n(392)],0,E[n(363)],t[n(343)],t[n(321)],0,E[n(363)],E[n(377)],null),E[n(337)](E[n(392)],E[n(349)],E[n(382)]),E[n(337)](E[n(392)],E.TEXTURE_MAG_FILTER,E[n(382)]),E[n(337)](E[n(392)],E.TEXTURE_WRAP_S,E[n(313)]),E.texParameteri(E[n(392)],E[n(369)],E[n(313)]),e}function k(t,n){const e=_,o=E[e(371)]();E[e(381)](E[e(390)],o),E[e(296)](E[e(390)],t,E[e(340)]);const r=3*Float32Array[e(364)]+2*Float32Array[e(364)];E.vertexAttribPointer(0,3,E[e(335)],!1,r,0),E[e(309)](0),E[e(299)](1,2,E[e(335)],!1,r,3*Float32Array[e(364)]),E.enableVertexAttribArray(1);const i=E[e(371)]();return E[e(381)](E[e(310)],i),E[e(296)](E.ELEMENT_ARRAY_BUFFER,n,E[e(340)]),E.bindBuffer(E[e(390)],null),o}return(t,n)=>{const e=_;return s(),u(e(295),p,[f(e(385),{id:e(304),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(286)}},null,8,A)])}}});function F(t){function n(t){const e=R;if(typeof t===e(351))return function(t){}[e(314)](e(393))[e(333)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(314)](e(380)+e(332)).call(e(375)):function(){return!1}[e(314)](e(380)+"gger")[e(333)](e(303)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{b as default};

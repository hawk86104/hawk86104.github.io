import{importShared as e}from"./3d-tiles-renderer.HXNTGnH81769411460564.js";import{useLoop as t,OrbitControls_default as o,Stars_default as a}from"./index.KfH1904l1769411460564.js";import{_sfc_main as n}from"./default.vue_vue_type_script_setup_true_lang.BZvpRlu91769411460564.js";import"./customShaderMaterial.vue_vue_type_script_setup_true_lang.CHEF56Mi1769411460564.js";import"./index.vue_vue_type_script_setup_true_lang.cA6vkjqK1769411460564.js";import{useGLTF as r}from"./index.DKfdDwp11769411460564.js";const{withAsyncContext:i,defineComponent:l}=await e("vue"),{unref:s,openBlock:p,createElementBlock:u}=await e("vue"),c=["object"],{watch:d,toRaw:h}=await e("vue"),m=l({__name:"airplane",props:{planet:{}},async setup(e){let o,a;const n=e,{scene:l}=([o,a]=i(()=>r("./plugins/earthSample/model/lowpolyPlanet/airplane.gltf")),o=await o,a(),o),m=l;m.rotation.set(0,Math.PI,0),l.traverse(e=>{e.isMesh&&(e.castShadow=!0)}),m.updateMatrixWorld();const{onBeforeRender:w}=t();d(()=>n.planet,e=>{if(!e)return;e.geometry.computeBoundingSphere();const t=Math.abs(1|e.geometry.boundingSphere?.radius);m.position.set(t,0,0),m.lookAt(e.position)});let f=0;return w(({delta:e})=>{if(!m||!n.planet)return;const t=Math.abs(n.planet.geometry.boundingSphere.radius)+.5;f+=.2*e;const o=t*Math.cos(f),a=t*Math.sin(f);m.position.x=o,m.position.z=a,m.rotation.z=-Math.PI/2,m.rotation.y=-f,m.updateMatrixWorld()}),(e,t)=>(p(),u("primitive",{object:h(s(m))},null,8,c))}}),{withAsyncContext:w,defineComponent:f}=await e("vue"),{unref:v,openBlock:_,createElementBlock:y}=await e("vue"),g=["object"],{watch:M,toRaw:S}=await e("vue"),x=f({__name:"cloud",props:{planet:{}},async setup(e){let o,a;const n=e,{scene:i}=([o,a]=w(()=>r("./plugins/earthSample/model/lowpolyPlanet/cloud.gltf")),o=await o,a(),o),l=i.children[0];function s(e,t){const o=Math.random()*(t-e)+e;return Math.random()<.5?-o:o}l.castShadow=!0,l.position.set(s(-8,8),s(.5,1),s(-8,8));const p=s(.5,1);l.scale.set(p,p,p),l.updateMatrixWorld(),M(()=>n.planet,e=>{e&&(l.lookAt(e.position),l.updateMatrixWorld())});const{onBeforeRender:u}=t();let c=s(-1,1)*Math.PI;const d=Math.random()/10;return u(({delta:e})=>{if(!l)return;const t=Math.abs(n.planet.geometry.boundingSphere.radius-.5);c+=e*d;const o=t*Math.cos(c),a=t*Math.sin(c);l.position.x=o,l.position.z=a,l.rotation.y=-c,l.lookAt(n.planet.position),l.updateMatrixWorld()}),(e,t)=>(_(),y("primitive",{object:S(v(i)),"cast-shadow":""},null,8,g))}}),{withAsyncContext:B,defineComponent:C}=await e("vue"),{unref:b,createElementVNode:k,createVNode:j,renderList:P,Fragment:z,openBlock:R,createElementBlock:A}=await e("vue"),E=["object"],{toRaw:L}=await e("vue"),F=C({__name:"planet",async setup(e){let o,a;const{nodes:n}=([o,a]=B(()=>r("./plugins/earthSample/model/lowpolyPlanet/planet.gltf")),o=await o,a(),o),i=n.Planet,l=n.Icosphere;i.traverse(e=>{e.isMesh&&(e.receiveShadow=!0)});const{onBeforeRender:s}=t();return s(({delta:e})=>{i&&(i.rotation.y+=.04*e,i.rotation.z+=.02*e,i.rotation.x+=.05*e,i.updateMatrixWorld())}),(e,t)=>(R(),A(z,null,[k("primitive",{object:L(b(i))},null,8,E),j(m,{planet:L(b(l))},null,8,["planet"]),(R(),A(z,null,P([1,2,3,4,5,6,7,8,9],e=>j(x,{key:e,planet:L(b(l))},null,8,["planet"])),64))],64))}}),{defineComponent:T}=await e("vue"),{createVNode:W,createElementVNode:I,unref:N,Suspense:V,withCtx:D,openBlock:G,createBlock:q,resolveComponent:H,mergeProps:J,Fragment:K,createElementBlock:O}=await e("vue"),{PCFSoftShadowMap:Q,SRGBColorSpace:U}=await e("three"),{shallowRef:X}=await e("vue"),Y=T({__name:"lowpolyPlanet",setup(e){const t={clearColor:"#11101B",shadows:!0,alpha:!1,outputColorSpace:U,shadowMapType:Q,useLegacyLights:!0},r=X(0),i=({delta:e})=>{r.value+=.02*e};return(e,l)=>{const s=H("TresCanvas");return G(),O(K,null,[W(n),W(s,J(t,{"window-size":"",onLoop:i}),{default:D(()=>[l[0]||(l[0]=I("TresPerspectiveCamera",{position:[0,1,5],fov:75,near:.1,far:1e3},null,-1)),W(N(o)),l[1]||(l[1]=I("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),(G(),q(V,null,{default:D(()=>[W(F)]),_:1})),W(N(a),{rotation:[0,r.value,0],radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0},null,8,["rotation"]),l[2]||(l[2]=I("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),l[3]||(l[3]=I("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1))]),_:1},16)],64)}}});export{Y as default};

import{c7 as t,a3 as n,C as e,V as r}from"./three.OosFxi571739442316051.js";import{a as o}from"./@tresjs.4XV_x0mI1739442316051.js";import{R as c}from"./all.three.RcJo9D5E1739442316051.js";import{d as i,b as a,a3 as s,a2 as u,o as f,H as l,N as p,m,u as h}from"./@vue.NRI7TcgI1739442316051.js";!function(t,n){const e=g,r=y();for(;;)try{if(643992===-parseInt(e(375))/1+-parseInt(e(396))/2*(parseInt(e(395))/3)+parseInt(e(358))/4*(-parseInt(e(365))/5)+-parseInt(e(356))/6+parseInt(e(386))/7*(-parseInt(e(371))/8)+-parseInt(e(368))/9+parseInt(e(391))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(367)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){d(this,(function(){const t=g,n=new RegExp(t(372)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=x(t(392));n[t(374)](r+t(366))&&e.test(r+t(387))?x():r("0")}))()}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(367)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();v(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(363)+t(381)+");")()}catch(e){n=window}return n}(),e=n[t(359)]=n.console||{},r=[t(388),"warn","info",t(384),t(361),"table",t(376)];for(let o=0;o<r.length;o++){const n=v[t(394)][t(360)][t(369)](v),c=r[o],i=e[c]||n;n[t(389)]=v.bind(v),n.toString=i.toString[t(369)](i),e[c]=n}}))();function g(t,n){const e=y();return(g=function(t,n){return e[t-=355]})(t,n)}function x(t){function n(t){const e=g;if(typeof t===e(397))return function(t){}.constructor(e(390))[e(367)](e(382));1!==(""+t/t)[e(355)]||t%20==0?function(){return!0}.constructor(e(370)+e(362)).call(e(377)):function(){return!1}[e(394)](e(370)+e(362)).apply(e(373)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function y(){const t=["chain","apply","5861511bNLOUC","bind","debu","38440FFZILJ","function *\\( *\\)","stateObject","test","272433CZZhCJ","trace","action","replace","vertexShader","fragmentShader",'{}.constructor("return this")( )',"counter","#include <project_vertex>","error","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","994VXNMjl","input","log","__proto__","while (true) {}","41891190RHASLs","init","void main() {","constructor","3101283SNRWhM","2MpOBhK","string","length","1522386OxjkCU","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","164llDSIC","console","prototype","exception","gger","return (function() ","#include <emissivemap_fragment>","79465chkENo"];return(y=function(){return t})()}const b=w;!function(t,n){const e=w,r=j();for(;;)try{if(701600===parseInt(e(289))/1+-parseInt(e(306))/2+parseInt(e(280))/3+-parseInt(e(275))/4+-parseInt(e(269))/5*(-parseInt(e(320))/6)+-parseInt(e(288))/7+parseInt(e(264))/8*(-parseInt(e(305))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(302)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(t,n){const e=j();return(w=function(t,n){return e[t-=264]})(t,n)}!function(){_(this,(function(){const t=w,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(300),"i"),r=E(t(319));n[t(309)](r+t(277))&&e.test(r+t(296))?E():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(302)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=w;let n;try{n=Function(t(291)+t(270)+");")()}catch(o){n=window}const e=n[t(286)]=n[t(286)]||{},r=["log",t(312),"info",t(267),t(304),t(318),"trace"];for(let c=0;c<r[t(297)];c++){const n=C[t(311)][t(303)].bind(C),o=r[c],i=e[o]||n;n[t(315)]=C[t(283)](C),n[t(301)]=i[t(301)][t(283)](i),e[o]=n}}))();const I=[b(308)],M=[b(323),b(265)],S=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const d=b;let v,x;const y=i,_=new t(9.5,10),w=a(),C=a(),S=a(),j=new c,E={mirror:{value:y[d(292)]},mixStrength:{value:y[d(314)]}},R=([v,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,x(),v);for(var z=0;z<3;z++)R[z][d(293)]=n,R[z][d(299)]=n,R[z][d(272)][d(317)](16,16);const T={color:new e(d(324)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},N=t=>{const n=d;t[n(322)][n(316)]=j[n(284)],t[n(322)].textureMatrix=j[n(268)],t[n(322)]=Object[n(273)](t.uniforms,E),(t=>{const n=g;t[n(379)]=t[n(379)][n(378)](n(393),n(357)),t.vertexShader=t[n(379)][n(378)](n(383),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=g;t.fragmentShader=t[n(380)][n(378)]("void main() {","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(380)]=t[n(380)][n(378)](n(364),n(385))})(t)};return u((()=>{const t=d;w[t(279)]&&(w[t(279)].attributes[t(276)]=w[t(279)].attributes.uv),S[t(279)]&&(S[t(279)].aoMap.channel=1,S.value[t(325)]=N),C[t(279)]&&(C[t(279)][t(281)](j),C[t(279)][t(290)]=(n,e,r)=>{j[t(313)](n,e,r)}),y[t(321)]&&S.value&&(S[t(279)][t(321)]=new e(y[t(321)]))})),(t,n)=>{const e=d;return f(),l("TresGroup",null,[p(e(287),{ref_key:e(282),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(266),ref:w,args:[10,10]},null,512),p(e(285),m({ref_key:e(278),ref:S},T),null,16)],8,I),p(e(295),{object:h(_),visible:t[e(294)]},null,8,M)])}}});function j(){const t=["157002LuVHbu","onBeforeRender","return (function() ","mirror","wrapS","showGridHelper","primitive","input","length","gger","wrapT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","apply","prototype","exception","350433uWRPQM","7024rteviu","stateObject","rotation-x","test","debu","constructor","warn","update","mixStrength","__proto__","reflectMap","set","table","init","76386Aagwkd","color","uniforms","object","#444","onBeforeCompile","while (true) {}","88qEIXwL","visible","tpgRef","error","textureMatrixUniform","60yrWnnd",'{}.constructor("return this")( )',"action","repeat","assign","counter","1472012Nyhmtq","uv1","chain","tmsmRef","value","3803298BIsEhh","add","tmRef","bind","renderTargetUniform","TresMeshStandardMaterial","console","TresMesh","532826faiMhq"];return(j=function(){return t})()}function E(t){function n(t){const e=w;if("string"==typeof t)return function(t){}[e(311)](e(326))[e(302)](e(274));1!==(""+t/t)[e(297)]||t%20==0?function(){return!0}[e(311)]("debu"+e(298)).call(e(271)):function(){return!1}[e(311)](e(310)+e(298))[e(302)](e(307)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

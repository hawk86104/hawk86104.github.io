import{av as l,bb as m,au as c,aw as f,bc as d,az as h,aH as i,ap as w}from"./vendor.wQOtmNrU1713771255906.js";import{W as b}from"./Water2.2T40RS6S1713771255906.js";import{c as g,d as x,a as B}from"./ExtensionUtilities.nkv2CDU61713771255906.js";const v=(e,r=!1)=>{e.computeBoundingBox();const{max:o,min:t}=e.boundingBox;e.deleteAttribute("uv");const s=o.x-t.x,u=o.y-t.y,n=[];for(let a=0;a<e.attributes.position.count;a++)r?(n.push((e.attributes.position.getX(a)-(t.x+o.x)/2)/s),n.push((e.attributes.position.getY(a)-(t.y+o.y)/2)/u)):(n.push((e.attributes.position.getX(a)-t.x)/s),n.push((e.attributes.position.getY(a)-t.y)/u));const p=new Float32Array(n);e.setAttribute("uv",new l(p,2))},M=(e,r)=>new Promise((o,t)=>{m(e,{},{method:"get"}).then(s=>{r&&o(s[r]),o(s.features)}).catch(s=>{console.error(s),t(error)})}),_=()=>{c.prototype.computeBoundsTree=g,c.prototype.disposeBoundsTree=x,f.prototype.raycast=B},P=async e=>{const r=await d(["./plugins/water/images/Water_1_M_Normal.jpg","./plugins/water/images/Water_2_M_Normal.jpg"]),o=e.geometry.clone();v(o),o.computeBoundsTree();const t=new b(o,{color:new h("#fff"),scale:20,flowDirection:new i(1,1),textureWidth:1024,textureHeight:1024,normalMap0:r[0],normalMap1:r[1]});return t.material.transparent=!0,t.material.depthWrite=!0,t.material.depthTest=!0,t.material.side=w,t.material.uniforms.config.value.w=20,t.material.uniforms.reflectivity.value=.46,t};function A(e){const r=[];for(let t=0;t<e.length;t++)r.push(new i(e[t].x,e[t].y));const o=new i;for(let t=0;t<r.length;t++)o.add(r[t]);o.divideScalar(r.length);for(let t=0;t<r.length;t++)r[t].sub(o);return{points:r,centerPoint:o}}export{A as g,_ as i,M as l,v as r,P as s};

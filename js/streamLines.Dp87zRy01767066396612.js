import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{_ as t,K as a}from"./@tresjs.B1f7s3pS1767066396612.js";import{P as s}from"./tweakpane.CqZAnw7f1767066396612.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.QAhgb6gv1767066396612.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.BsurrMlS1767066396612.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.DLEIrwy01767066396612.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.TWwBAcpR1767066396612.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.B0g981fI1767066396612.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.DMg7taI31767066396612.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.BA37_NOg1767066396612.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.DpqMe-oJ1767066396612.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.L0s_9p-l1767066396612.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.BQMMcME51767066396612.js";import"./particleBase.vue_vue_type_script_setup_true_lang.Ekjdlh7L1767066396612.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.BioNhjHj1767066396612.js";import{h as i}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.DS9PWjZT1767066396612.js";import"./index.vue_vue_type_script_setup_true_lang.iYOGhvYh1767066396612.js";import{g as l}from"./utils.C8p1eAWw1767066396612.js";const{withAsyncContext:n,defineComponent:u}=await e("vue"),{unref:o,createElementVNode:p,openBlock:_,createElementBlock:d}=await e("vue"),m=["args"],c=["blending","map","side","alphaMap","color"],{watch:g}=await e("vue"),f=await e("three"),v=u({__name:"streamLine",props:{color:{default:"#2bc4dc"},radius:{default:.2},speed:{default:1},radialSegments:{default:6},tubularSegments:{default:64},closed:{type:Boolean,default:!1},clockwise:{type:Boolean,default:!0},fewNum:{default:1},linesList:{default:()=>[[15,0,15],[15,0,-15],[-15,0,-15],[-15,0,10],[15,0,15]]}},async setup(e){let a,s;const r=e,l=([a,s]=n(()=>i("./plugins/digitalCity/image/line2.png")),a=await a,s(),a);l.needsUpdate=!0,l.wrapS=l.wrapT=f.RepeatWrapping,l.repeat.set(r.fewNum,1),l.rotation=r.clockwise?0:Math.PI,l.generateMipmaps=!1,l.magFilter=f.NearestFilter;let u=[];r.linesList.forEach(e=>{u.push((new f.Vector3).fromArray(e))});const v=new f.CatmullRomCurve3(u),{onBeforeRender:w}=t();return w(()=>{l.offset.x+=.002*r.speed}),g(()=>[r.clockwise,r.fewNum],([e,t])=>{l.rotation=e?0:Math.PI,l.repeat.set(t,1)}),(e,t)=>(_(),d("TresMesh",null,[p("TresTubeGeometry",{args:[o(v),r.tubularSegments,r.radius,r.radialSegments,r.closed]},null,8,m),p("TresMeshBasicMaterial",{blending:f.AdditiveBlending,map:o(l),side:f.DoubleSide,alphaMap:o(l),transparent:!0,color:r.color},null,8,c)]))}}),{withAsyncContext:w,defineComponent:y}=await e("vue"),{createElementVNode:j,unref:b,createVNode:h,normalizeProps:B,guardReactiveProps:x,Suspense:S,withCtx:C,openBlock:M,createBlock:k,mergeProps:N,resolveComponent:P}=await e("vue"),{reactive:R}=await e("vue"),L=y({__name:"streamLines",async setup(e){let t,i;const n=R({reflectivity:.1,showGridHelper:!1,scale:5}),u=R({color:"#bd01ff",radius:.2,speed:1,tubularSegments:64,radialSegments:6,closed:!1,clockwise:!1,fewNum:1,linesList:[[15,0,15],[15,0,-15],[-15,0,-15],[-15,0,10],[13,0,15]]}),o=new s;o.addBinding(u,"color",{label:"流光颜色"}),o.addBinding(u,"radius",{label:"管道半径",min:.01,max:1,step:.01}),o.addBinding(u,"speed",{label:"跑动速度",min:.1,max:10,step:.1}),o.addBinding(u,"tubularSegments",{label:"管道路径平滑",min:1,max:100,step:1}),o.addBinding(u,"radialSegments",{label:"管道壁圆润",min:1,max:20,step:1}),o.addBinding(u,"closed",{label:"闭合管道"}),o.addBinding(u,"clockwise",{label:"顺时针流动"}),o.addBinding(u,"fewNum",{label:"流线数量",min:1,max:10,step:1});const p=([t,i]=w(()=>l("./plugins/simpleGIS/json/320000_full.json")),t=await t,i(),t);return(e,t)=>{const s=P("TresCanvas");return M(),k(s,{clearColor:"#201919","window-size":""},{default:C(()=>[t[0]||(t[0]=j("TresPerspectiveCamera",{position:[25,25,25],fov:45,near:.1,far:1e4},null,-1)),h(b(a),{enableDamping:"",autoRotate:""}),(M(),k(S,null,{default:C(()=>[h(v,B(x(u)),null,16)]),_:1})),(M(),k(S,null,{default:C(()=>[h(v,{linesList:b(p),position:[0,0,-4]},null,8,["linesList"])]),_:1})),(M(),k(S,null,{default:C(()=>[h(b(r),N({position:[0,-.5,0]},n),null,16)]),_:1}))]),_:1})}}});export{L as default};

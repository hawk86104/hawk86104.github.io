import{V as t,_ as n,h as e}from"./three.KG0QRRig1731552996711.js";import{m as o}from"./@tresjs.01P8tiuF1731552996711.js";import{d as a,P as r}from"./@pmndrs.n3UO_zuX1731552996711.js";import{d as s,b as i,w as c,a3 as l,o as u,D as p,J as f,aj as h,ak as d}from"./@vue.-THQH3GC1731552996711.js";const m=y;!function(t,n){const e=y,o=g();for(;;)try{if(474850===-parseInt(e(469))/1+-parseInt(e(432))/2*(-parseInt(e(400))/3)+parseInt(e(471))/4+-parseInt(e(421))/5*(parseInt(e(477))/6)+parseInt(e(420))/7+parseInt(e(442))/8+parseInt(e(444))/9*(-parseInt(e(405))/10))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[y(455)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){w(this,(function(){const t=y,n=new RegExp(t(479)),e=new RegExp(t(470),"i"),o=S(t(435));n[t(463)](o+t(434))&&e[t(463)](o+t(410))?S():o("0")}))()}();const M=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["intensity","while (true) {}","DirectionalLight","test","value","alphaTest","TresPlaneGeometry","right","radius","949087EEIPdb","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2060704YGyMUc","trace","abs","blendWindow","rotate-x","children","1725192HwBMrt","gPlane","function *\\( *\\)","counter","shadow","bind","2682363QfXNOo","frames","shadows plm update","ambient","length","8650RSUfyr","random","console","top","string","input","remove","cos","debu","blend","lightPosition","set","height","clear","configure","6625598FEtcFt","10vjUAmB","near","return (function() ","stateObject","color","opacity","progressiveLightMap2","add","Group","mapSize","exception","2MRCzSp","log","chain","init","material","randFloatSpread","acos","warn","width",'{}.constructor("return this")( )',"4716000oGVUBY","amount","9846vXiKPZ","camera","toString","size","#000000","MathUtils","gger","constructor","far","sin","left","apply","TresMesh","call","position","prepare"];return(g=function(){return t})()}M(void 0,(function(){const t=y;let n;try{n=Function(t(423)+t(441)+");")()}catch(a){n=window}const e=n[t(407)]=n[t(407)]||{},o=[t(433),t(439),"info","error",t(431),"table",t(472)];for(let r=0;r<o.length;r++){const n=M[t(451)].prototype[t(482)](M),a=o[r],s=e[a]||n;n.__proto__=M[t(482)](M),n[t(446)]=s[t(446)][t(482)](s),e[a]=n}}))();const b=[m(475)];function y(t,n){const e=g();return(y=function(t,n){return e[t-=400]})(t,n)}const I=s({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(448)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,M=s;let g=i();const{extend:y,scene:I,renderer:S,camera:z}=o();y({SoftShadowMaterial:a});const v={position:(new t)[w(416)](M[w(415)].x,M[w(415)].y,M[w(415)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new r(S[w(464)],I[w(464)],v[w(430)]),P={map:x[w(427)].texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:M[w(414)],alphaTest:M[w(465)],opacity:M[w(426)],color:M[w(425)]},_=new(n[w(429)]);for(let t=0;t<v[w(443)];t++){const t=new(n[w(462)])(16777215,v[w(460)]/v[w(443)]);t.castShadow=!0,t.shadow.bias=v.bias,t[w(481)].camera[w(422)]=v.near,t[w(481)][w(445)].far=v[w(452)],t.shadow[w(445)][w(467)]=v[w(447)]/2,t[w(481)].camera[w(454)]=-v[w(447)]/2,t.shadow[w(445)][w(408)]=v.size/2,t.shadow[w(445)].bottom=-v[w(447)]/2,t[w(481)][w(430)][w(440)]=v.mapSize,t[w(481)][w(430)][w(417)]=v[w(430)],_[w(428)](t)}const j=()=>{const t=w,o=v[t(458)][t(404)]();for(let a=0;a<_.children.length;a++){const r=_[t(476)][a];if(Math[t(406)]()>M.ambient)r.position[t(416)](v.position.x+e[t(437)](v[t(468)]),v[t(458)].y+n[t(449)].randFloatSpread(v.radius),v[t(458)].z+n[t(449)][t(437)](v[t(468)]));else{let n=Math[t(438)](2*Math[t(406)]()-1)-Math.PI/2,e=2*Math.PI*Math[t(406)]();r[t(458)][t(416)](Math.cos(n)*Math[t(412)](e)*o,Math[t(473)](Math[t(412)](n)*Math[t(453)](e)*o),Math[t(453)](n)*o)}}},T=(t=1)=>{const n=w;I[n(464)].add(_),x[n(459)]();for(let e=0;e<t;e++)j(),x.update(z.value,M[n(474)]),console[n(433)](n(402),e);I.value[n(411)](_),x.finish()};c((()=>g[w(464)]),(t=>{const n=w;t&&(x[n(419)](t),x[n(418)](),console[n(433)]("shadows render start"),T(M[n(401)]),console[n(433)]("shadows render end"))}));const E=()=>{x[w(418)](),T(M.frames)};return l((()=>{const t=w;g[t(464)]&&(M[t(426)]&&(g[t(464)].material[t(426)]=M.opacity),M[t(465)]&&(g[t(464)].material.alphaTest=M.alphaTest),M.color&&g[t(464)][t(436)][t(425)].set(M.color),M[t(414)]&&(g.value[t(436)].blend=M[t(414)]))})),c((()=>M.lightPosition),(t=>{const n=w;t&&(console[n(433)](M[n(415)]),v.position[n(416)](t.x,t.y,t.z),E())}),{deep:!0}),c((()=>[M[w(401)],M[w(474)],M[w(403)]]),(()=>{E()})),(t,n)=>{const e=w;return u(),p(e(456),{"receive-shadow":"",ref_key:e(478),ref:g,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=f(e(466),{args:[1,1]},null,-1)),f("TresSoftShadowMaterial",h(d(P)),null,16)],8,b)}}});function S(t){function n(t){const e=y;if(typeof t===e(409))return function(t){}[e(451)](e(461))[e(455)](e(480));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(413)+e(450))[e(457)]("action"):function(){return!1}.constructor(e(413)+e(450))[e(455)](e(424)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

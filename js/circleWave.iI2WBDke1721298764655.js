import{$ as n,N as t,d as e}from"./@tresjs.iXEJQd7J1721298764655.js";import{P as o}from"./tweakpane.yHWGBmom1721298764655.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2AxMW3Dx1721298764655.js";import{a6 as a,a0 as c,C as i}from"./three.0bBjBDi41721298764655.js";import{d as s,b as u,a4 as l,r as f,a1 as p,o as v,D as d,J as m,aj as g,ak as h,e as w,f as k,g as S,j as y,u as _,al as C,m as b}from"./@vue.Q1VpS3901721298764655.js";import"./@vueuse.hS-CVzal1721298764655.js";import"./all.three.mckUbRfL1721298764655.js";import"./oimophysics.x0jH7fze1721298764655.js";function x(n,t){const e=P();return(x=function(n,t){return e[n-=231]})(n,t)}const I=x;!function(n,t){const e=x,o=P();for(;;)try{if(709900===parseInt(e(254))/1*(-parseInt(e(288))/2)+parseInt(e(268))/3+parseInt(e(251))/4+-parseInt(e(266))/5*(-parseInt(e(236))/6)+parseInt(e(285))/7+parseInt(e(244))/8*(-parseInt(e(278))/9)+-parseInt(e(274))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){M(this,(function(){const n=x,t=new RegExp(n(270)),e=new RegExp(n(243),"i"),o=W(n(237));t[n(283)](o+n(238))&&e[n(283)](o+n(289))?W():o("0")}))()}();const D=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(257)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();D(void 0,(function(){const n=x,t=function(){const n=x;let t;try{t=Function("return (function() "+n(234)+");")()}catch(e){t=window}return t}(),e=t[n(259)]=t[n(259)]||{},o=["log","warn",n(248),"error",n(261),n(280),n(263)];for(let r=0;r<o[n(267)];r++){const t=D.constructor[n(277)][n(279)](D),a=o[r],c=e[a]||t;t[n(255)]=D[n(279)](D),t[n(272)]=c[n(272)][n(279)](c),e[a]=t}}))();const T=[I(256),I(265)],j=m("TresPlaneGeometry",{args:[1,1]},null,-1);function P(){const n=["function *\\( *\\)","\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n","toString","uScanColorDark","12282260DAsleD","gger","color","prototype","333wqgFwq","bind","table","shaderCircleWave","counter","test","TresShaderMaterial","6088306rLCDMr","wrapS","material","261050vWOybS","input","AdditiveBlending","colorDark","constructor","TresMesh",'{}.constructor("return this")( )',"debu","12480dSMjxp","init","chain","string","#000000","value","speed","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","33608drfnSC","DoubleSide","\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n","action","info","uScanColor","stateObject","2096088hNPiJX","RepeatWrapping","while (true) {}","5iEKWNC","__proto__","rotation-x","apply","call","console","Color","exception","uniforms","trace","#ffffff","scale","2155xvORUJ","length","1367784UbWScH","tmRef"];return(P=function(){return n})()}const R=s({__name:I(281),props:{color:{default:I(264)},colorDark:{default:I(240)},speed:{default:1},scale:{default:2}},async setup(e){const o=I;let r,s;const w=e,k=u(),{onLoop:S}=n();S((({delta:n})=>{const t=x;k.value&&(k[t(241)].material.uniforms.uTime[t(241)]+=n*w[t(242)])}));const y=([r,s]=l((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,s(),r);y[o(286)]=a[o(252)],y.wrapT=c;const _=f({side:a[o(245)],transparent:!0,blending:a[o(290)],flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:y},uScanColor:{type:"v3",value:new i(w[o(276)])},uScanColorDark:{type:"v3",value:new(a[o(260)])(w[o(231)])}},vertexShader:o(271),fragmentShader:o(246)});return p((()=>{const n=o;k[n(241)]&&(k[n(241)].material[n(262)][n(249)][n(241)]=new i(w[n(276)]),k[n(241)][n(287)][n(262)][n(273)][n(241)]=new(a[n(260)])(w[n(231)]))})),(n,t)=>{const e=o;return v(),d(e(233),{ref_key:e(269),ref:k,"rotation-x":-Math.PI/2,scale:n[e(265)]},[j,m(e(284),g(h(_)),null,16)],8,T)}}});function W(n){function t(n){const e=x;if(typeof n===e(239))return function(n){}[e(232)](e(253))[e(257)](e(282));1!==(""+n/n)[e(267)]||n%20==0?function(){return!0}[e(232)](e(235)+e(275))[e(258)](e(247)):function(){return!1}[e(232)](e(235)+e(275))[e(257)](e(250)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const O=$;!function(n,t){const e=$,o=J();for(;;)try{if(939830===parseInt(e(486))/1+-parseInt(e(473))/2*(-parseInt(e(481))/3)+-parseInt(e(467))/4+-parseInt(e(478))/5+parseInt(e(503))/6*(parseInt(e(495))/7)+-parseInt(e(500))/8*(-parseInt(e(502))/9)+-parseInt(e(483))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const A=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[$(471)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){A(this,(function(){const n=$,t=new RegExp(n(507)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=B(n(509));t[n(499)](o+n(476))&&e[n(499)](o+n(496))?B():o("0")}))()}();const U=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[$(471)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();U(void 0,(function(){const n=$,t=function(){const n=$;let t;try{t=Function(n(477)+n(480)+");")()}catch(e){t=window}return t}(),e=t[n(484)]=t[n(484)]||{},o=[n(472),n(489),"info","error","exception",n(470),n(479)];for(let r=0;r<o.length;r++){const t=U[n(488)][n(498)][n(493)](U),a=o[r],c=e[a]||t;t.__proto__=U.bind(U),t.toString=c[n(491)][n(493)](c),e[a]=t}}))();const E=m("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1),H=m(O(469),{intensity:6},null,-1);function J(){const n=["toString","shaderCircleWave地面","bind","圈渐变色","91cCEPHr","input","圈颜色","prototype","test","1432rbWain","gger","63027edOUoM","513726HJocBA","scale","speed","colorDark","function *\\( *\\)","circleWave","init","counter","6846104sRXWTw","action","TresAmbientLight","table","apply","log","338gDyadx","debu","#000000","chain","return (function() ","4471125TamCRY","trace",'{}.constructor("return this")( )',"28191EGPeht","addBinding","6625070JkAHJt","console","while (true) {}","253385AKbHal","#ffffff","constructor","warn","TresCanvas"];return(J=function(){return n})()}const z=s({__name:O(508),setup(n){const t=O,a=f({reflectivity:.1,showGridHelper:!1,scale:1}),c=f({color:t(487),colorDark:t(475),speed:1,scale:2}),i=new o({title:t(492),expanded:!0});return i.addBinding(c,"color",{label:t(497)}),i[t(482)](c,t(506),{label:t(494)}),i[t(482)](c,t(505),{label:"速度",min:.1,max:5,step:.1}),i[t(482)](c,t(504),{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const i=w(t(490));return v(),k(i,{clearColor:"#201919","window-size":""},{default:S((()=>[E,y(_(e),{enableDamping:""}),H,(v(),k(C,null,{default:S((()=>[y(R,g(h(c)),null,16)])),_:1})),(v(),k(C,null,{default:S((()=>[y(r,b({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function $(n,t){const e=J();return($=function(n,t){return e[n-=466]})(n,t)}function B(n){function t(n){const e=$;if("string"==typeof n)return function(n){}[e(488)](e(485))[e(471)](e(466));1!==(""+n/n).length||n%20==0?function(){return!0}[e(488)](e(474)+e(501)).call(e(468)):function(){return!1}[e(488)](e(474)+e(501))[e(471)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{z as default};

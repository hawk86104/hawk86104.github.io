import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.4JmdwU8D1735906732968.js";import{B as i,V as s,cx as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.VhLXWX0H1735906732968.js";import{e as l,g as d,F as p}from"./@tresjs.XlmHwCPa1735906732968.js";import{a as f}from"./simplex-noise.jB2HxhHB1735906732968.js";import{d as m,a1 as g,o as y,D as b,u as x,r as w,j as v,g as S,m as _,F as I}from"./@vue.yG49nQHr1735906732968.js";import"./index.9he0HRfc1735906732968.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.yzri0fv_1735906732968.js";import"./three-custom-shader-material.YE7pvEe61735906732968.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1735906732968.js";import"./@vueuse.HCIFcVWX1735906732968.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.M3UI3bH-1735906732968.js";import"./all.three.PzCeqUTP1735906732968.js";import"./oimophysics.x0jH7fze1735906732968.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7yZokAmp1735906732968.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.xnO0OdjO1735906732968.js";import"./index.QkcmrzFJ1735906732968.js";import"./three-stdlib.KBM4TZ_N1735906732968.js";import"./@pmndrs.jP0GrZPE1735906732968.js";import"./object-hash.YsnKaXvB1735906732968.js";import"./@amap.goWAqh1c1735906732968.js";import"./jszip._qOKqgyX1735906732968.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.czlU8zsm1735906732968.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.ZJUjI_F01735906732968.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.yFlxGQ3D1735906732968.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.zSrbXLxr1735906732968.js";const M=V;!function(t,i){const s=V,n=T();for(;;)try{if(698158===-parseInt(s(462))/1+parseInt(s(418))/2+parseInt(s(443))/3+-parseInt(s(529))/4+-parseInt(s(499))/5*(-parseInt(s(397))/6)+parseInt(s(537))/7*(-parseInt(s(434))/8)+parseInt(s(464))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(524)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function T(){const t=["vanishingTimeFactor","subrays","type","index","side","endPropagationTime","indices","toString","beginVanishingTime","RAY_STEADY","currentSeed","createPrismFaces","isLightningStrike","add","769503eMsmLJ","forwardsFill","1367163NZOLNK","maxRaySegments","createMesh","info","currentCoordinate","update","visible","test","birthTime","linPos1","uvs","generateUVs","sin","prototype","action","table","currentSubray","currentSegmentIndex","pos0","fraction0","cos","vertices","LightningStrike","createDefaultSubrayCreationCallbacks","middlePos","radius0Factor","createTriangleVerticesWithoutUVs","debu","constructor","ramification","setSeed","currentUVCoordinate","subrayCylinderPosition","lerp","cross1","16545cTTVdZ","maxSubrays","timeFraction","state","while (true) {}","time","pow","simplexY","array","RAY_PROPAGATING","normalize","radius0","roughness","lerpVectors","onSubrayCreation","getNewSegment","isInitialSegment","stateObject","multiplyScalar","middleLinPos","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","vPos","clone","uvsAttribute","copy","apply","subrayDutyCycle","currentIndex","ceil","RAY_INITIALIZED","3326012fnUnwK","addNewSubray","counter","createTriangleVerticesWithUVs","random","currentCreateTriangleVertices","seedGenerator","deathTime","77WRcYHO","straightness","updateMesh","currentSegmentCallback","SIN30DEG","copyParameters","gger","randomGenerator","call","initSubray","string","setAttribute",'{}.constructor("return this")( )',"RAY_EXTINGUISHED","maxSubrayRecursion","numSubrays","push","recursionProbability","radius1Factor","console","propagationTimeFactor","min","getSeed","fractalRayRecursive","timeScale","iteration","noiseSeed","trace","linPos0","forwards","createPrism","raySegments","subVectors","subrayConePosition","radius1","RAY_UNBORN","804ipVTdF","simplexX","floor","return (function() ","minRadius","__proto__","isStatic","positionVariationFactor","isEternal","set","input","createSegment","exception","fractalRay","destOffset","up0","usage","createRandomGenerator","pos1","length","setIndex","2524720CDERpc","position","simplexZ","seed","maxIterations","crossVectors","recursion","subrayPeriod","chain","needsUpdate","fraction1","rayParameters","max","init","function *\\( *\\)","sourceOffset","175784REuQqo","subrayProbability","newPos","down","COS30DEG","currentVertex","RAY_VANISHING","up1","bind","2049582aEfBMt","fillMesh","error","positionAttribute","onDecideSubrayCreation"];return(T=function(){return t})()}!function(){C(this,(function(){const t=V,i=new RegExp(t(432)),s=new RegExp(t(519),"i"),n=j("init");i[t(471)](n+t(426))&&s.test(n+t(407))?j():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function V(t,i){const s=T();return(V=function(t,i){return s[t-=392]})(t,i)}R(void 0,(function(){const t=V,i=function(){const t=V;let i;try{i=Function(t(400)+t(549)+");")()}catch(s){i=window}return i}(),s=i[t(556)]=i.console||{},n=["log","warn",t(467),t(445),t(409),t(479),t(564)];for(let e=0;e<n[t(416)];e++){const i=R[t(492)][t(477)][t(442)](R),r=n[e],o=s[r]||i;i[t(402)]=R.bind(R),i[t(455)]=o.toString[t(442)](o),s[r]=i}}))();class A extends i{constructor(t={}){const i=V;super(),this[i(460)]=!0,this[i(450)]=i(486),this[i(431)](A[i(542)](t,t)),this[i(466)]()}static createRandomGenerator(){const t=V,i=2053,s=[];for(let e=0;e<i;e++)s[t(553)](Math[t(533)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(458)]];return n[e(458)]=(n[e(458)]+1)%i,r},getSeed:function(){return n[t(458)]/i},setSeed:function(s){n[t(458)]=Math.floor(s*i)%i}};return n}static[M(542)](t={},i={}){const n=M,e=function(s){return i===t?s:s[V(521)]()};return t.sourceOffset=void 0!==i[n(433)]?e(i[n(433)]):new s(0,100,0),t[n(411)]=void 0!==i[n(411)]?e(i.destOffset):new s(0,0,0),t[n(561)]=void 0!==i[n(561)]?i.timeScale:1,t[n(511)]=void 0!==i[n(511)]?i.roughness:.9,t.straightness=void 0!==i.straightness?i[n(538)]:.7,t[n(412)]=void 0!==i.up0?e(i[n(412)]):new s(0,0,1),t[n(441)]=void 0!==i[n(441)]?e(i.up1):new s(0,0,1),t[n(510)]=void 0!==i.radius0?i.radius0:1,t[n(395)]=void 0!==i.radius1?i[n(395)]:1,t[n(489)]=void 0!==i.radius0Factor?i[n(489)]:.5,t.radius1Factor=void 0!==i[n(555)]?i.radius1Factor:.2,t[n(401)]=void 0!==i[n(401)]?i.minRadius:.2,t[n(405)]=void 0!==i[n(405)]?i[n(405)]:void 0===i.birthTime||void 0===i[n(536)],t.birthTime=i[n(472)],t[n(536)]=i[n(536)],t.propagationTimeFactor=void 0!==i[n(557)]?i[n(557)]:.1,t[n(448)]=void 0!==i[n(448)]?i[n(448)]:.9,t.subrayPeriod=void 0!==i[n(425)]?i.subrayPeriod:4,t.subrayDutyCycle=void 0!==i.subrayDutyCycle?i[n(525)]:.6,t[n(422)]=void 0!==i[n(422)]?i.maxIterations:9,t.isStatic=void 0!==i.isStatic&&i[n(403)],t[n(493)]=void 0!==i[n(493)]?i[n(493)]:5,t[n(551)]=void 0!==i[n(551)]?i.maxSubrayRecursion:3,t.recursionProbability=void 0!==i[n(554)]?i[n(554)]:.6,t.generateUVs=void 0!==i[n(475)]&&i[n(475)],t[n(544)]=i[n(544)],t.noiseSeed=i[n(563)],t.onDecideSubrayCreation=i[n(447)],t[n(513)]=i[n(513)],t}[M(469)](t){const i=M;this.isStatic||(this.rayParameters[i(405)]||this[i(429)][i(472)]<=t&&t<=this[i(429)][i(536)]?(this[i(539)](t),t<this.subrays[0].endPropagationTime?this.state=A[i(508)]:t>this[i(449)][0].beginVanishingTime?this[i(502)]=A[i(440)]:this[i(502)]=A[i(457)],this[i(470)]=!0):(this[i(470)]=!1,t<this[i(429)][i(472)]?this[i(502)]=A.RAY_UNBORN:this.state=A[i(550)]))}[M(431)](t){const i=M;this.rayParameters=t,this.maxIterations=void 0!==t.maxIterations?Math[i(399)](t[i(422)]):9,t[i(422)]=this.maxIterations,this[i(403)]=void 0!==t[i(403)]&&t[i(403)],t.isStatic=this[i(403)],this[i(493)]=void 0!==t[i(493)]?Math[i(399)](t[i(493)]):5,t[i(493)]=this.ramification,this[i(551)]=void 0!==t[i(551)]?Math.floor(t[i(551)]):3,t[i(551)]=this[i(551)],this.recursionProbability=void 0!==t[i(554)]?t[i(554)]:.6,t[i(554)]=this[i(554)],this.generateUVs=void 0!==t[i(475)]&&t[i(475)],t[i(475)]=this[i(475)],void 0!==t[i(544)]?(this[i(544)]=t[i(544)],this[i(535)]=t[i(544)],void 0!==t[i(563)]&&this[i(535)][i(494)](t[i(563)])):(this.randomGenerator=A[i(414)](),this[i(535)]=Math),void 0!==t[i(447)]?this[i(447)]=t.onDecideSubrayCreation:(this[i(487)](),void 0!==t[i(513)]&&(this.onSubrayCreation=t[i(513)])),this.state=A[i(528)],this[i(500)]=Math[i(527)](1+Math.pow(this[i(493)],Math.max(0,this[i(551)]-1))),t[i(500)]=this[i(500)],this[i(465)]=2*(1<<this.maxIterations),this[i(449)]=[];for(let s=0;s<this[i(500)];s++)this[i(449)][i(553)](this.createSubray());this[i(392)]=[];for(let s=0;s<this.maxRaySegments;s++)this.raySegments[i(553)](this.createSegment());this.time=0,this[i(501)]=0,this[i(540)]=null,this.currentCreateTriangleVertices=this[i(475)]?this[i(532)]:this[i(490)],this[i(552)]=0,this[i(480)]=null,this[i(481)]=0,this[i(515)]=!1,this[i(435)]=0,this[i(439)]=0,this[i(526)]=0,this[i(468)]=0,this[i(495)]=0,this[i(485)]=null,this[i(474)]=null,this[i(454)]=null,this.positionAttribute=null,this[i(522)]=null,this[i(398)]=f(this[i(535)].random),this[i(506)]=f(this[i(535)][i(533)]),this[i(420)]=f(this[i(535)][i(533)]),this.forwards=new s,this.forwardsFill=new s,this.side=new s,this.down=new s,this.middlePos=new s,this.middleLinPos=new s,this[i(436)]=new s,this.vPos=new s,this[i(498)]=new s}createMesh(){const t=M,i=1<<this[t(422)],s=3*(i+1)*this[t(500)],o=18*i*this[t(500)];this[t(485)]=new Float32Array(3*s),this[t(454)]=new Uint32Array(o),this[t(475)]&&(this[t(474)]=new Float32Array(2*s)),this[t(444)](0),this[t(417)](new n(this[t(454)],1)),this.positionAttribute=new e(this.vertices,3),this[t(548)](t(419),this[t(446)]),this[t(475)]&&(this.uvsAttribute=new e(new Float32Array(this.uvs),2),this.setAttribute("uv",this[t(522)])),!this[t(403)]&&(this.index[t(413)]=r,this[t(446)][t(413)]=r,this.generateUVs&&(this[t(522)].usage=r)),this[t(485)]=this.positionAttribute[t(507)],this[t(454)]=this[t(451)].array,this[t(475)]&&(this[t(474)]=this[t(522)][t(507)])}[M(539)](t){const i=M;this[i(444)](t),this.drawRange.count=this[i(526)],this.index[i(427)]=!0,this.positionAttribute.needsUpdate=!0,this[i(475)]&&(this[i(522)].needsUpdate=!0)}[M(444)](t){const i=M,s=this;this[i(439)]=0,this[i(526)]=0,this.currentCoordinate=0,this[i(495)]=0,this[i(410)](t,(function(n){const e=i,r=s[e(480)];t<r[e(472)]||(this[e(429)][e(405)]&&0==s[e(480)][e(424)]?(s.createPrism(n),s[e(447)](n,s)):t<r[e(453)]?s[e(501)]>=n[e(483)]*r[e(557)]&&(s[e(567)](n),s[e(447)](n,s)):t<r[e(456)]?(s[e(567)](n),s.onDecideSubrayCreation(n,s)):(s[e(501)]<=r[e(448)]+n[e(428)]*(1-r[e(448)])&&s[e(567)](n),s.onDecideSubrayCreation(n,s)))}))}[M(530)](){const t=M;return this[t(449)][this[t(552)]++]}[M(546)](t,i){const s=M;t.pos0[s(523)](i[s(433)]),t[s(415)][s(523)](i[s(411)]),t[s(412)].copy(i.up0),t.up1[s(523)](i[s(441)]),t[s(510)]=i.radius0,t[s(395)]=i[s(395)],t[s(472)]=i[s(472)],t[s(536)]=i[s(536)],t.timeScale=i.timeScale,t[s(511)]=i[s(511)],t.straightness=i[s(538)],t.propagationTimeFactor=i.propagationTimeFactor,t[s(448)]=i[s(448)],t[s(422)]=this[s(422)],t[s(421)]=void 0!==i[s(563)]?i.noiseSeed:0,t[s(424)]=0}[M(410)](t,i){const s=M;this[s(504)]=t,this.currentSegmentCallback=i,this[s(552)]=0,this.initSubray(this[s(530)](),this[s(429)]);for(let n=0;n<this[s(552)];n++){const i=this.subrays[n];this[s(480)]=i,this.randomGenerator[s(494)](i[s(421)]),i[s(453)]=o[s(497)](i.birthTime,i[s(536)],i.propagationTimeFactor),i[s(456)]=o[s(497)](i[s(536)],i[s(472)],1-i[s(448)]);const e=this.randomGenerator[s(533)];i.linPos0[s(406)](e(),e(),e())[s(517)](1e3),i[s(473)][s(406)](e(),e(),e()).multiplyScalar(1e3),this[s(501)]=(t-i[s(472)])/(i[s(536)]-i.birthTime),this[s(481)]=0,this.isInitialSegment=!0;const r=this[s(514)]();r.iteration=0,r[s(482)][s(523)](i[s(482)]),r[s(415)][s(523)](i[s(415)]),r[s(565)][s(523)](i[s(565)]),r[s(473)][s(523)](i[s(473)]),r[s(412)].copy(i[s(412)]),r.up1[s(523)](i[s(441)]),r[s(510)]=i.radius0,r[s(395)]=i[s(395)],r[s(483)]=0,r[s(428)]=1,r[s(404)]=1-i[s(538)],this[s(435)]=this[s(493)]*Math[s(505)](this[s(554)],i.recursion)/(1<<i.maxIterations),this[s(560)](r)}this[s(540)]=null,this[s(480)]=null}[M(560)](t){const i=M;if(t.iteration>=this[i(480)][i(422)])return void this[i(540)](t);this.forwards.subVectors(t[i(415)],t[i(482)]);let s=this[i(566)][i(416)]();s<1e-6&&(this[i(566)][i(406)](0,0,.01),s=this.forwards.length());const n=.5*(t[i(510)]+t[i(395)]),e=.5*(t[i(483)]+t[i(428)]),r=this[i(504)]*this[i(480)].timeScale*Math[i(505)](2,t[i(562)]);this[i(488)][i(512)](t[i(482)],t[i(415)],.5),this[i(518)][i(512)](t[i(565)],t[i(473)],.5);const o=this[i(518)];this.newPos[i(406)](this.simplexX(o.x,o.y,o.z,r),this[i(506)](o.x,o.y,o.z,r),this[i(420)](o.x,o.y,o.z,r)),this[i(436)][i(517)](t[i(404)]*s),this[i(436)].add(this[i(488)]);const a=this.getNewSegment();a.pos0[i(523)](t[i(482)]),a[i(415)][i(523)](this[i(436)]),a[i(565)].copy(t.linPos0),a[i(473)][i(523)](this[i(518)]),a[i(412)][i(523)](t[i(412)]),a.up1.copy(t.up1),a.radius0=t[i(510)],a[i(395)]=n,a.fraction0=t.fraction0,a[i(428)]=e,a.positionVariationFactor=t[i(404)]*this[i(480)].roughness,a[i(562)]=t.iteration+1;const h=this[i(514)]();h[i(482)][i(523)](this[i(436)]),h.pos1[i(523)](t[i(415)]),h[i(565)][i(523)](this[i(518)]),h.linPos1[i(523)](t[i(473)]),this[i(498)][i(423)](t[i(412)],this.forwards[i(509)]()),h[i(412)][i(423)](this.forwards,this[i(498)])[i(509)](),h.up1[i(523)](t[i(441)]),h[i(510)]=n,h.radius1=t[i(395)],h[i(483)]=e,h[i(428)]=t[i(428)],h[i(404)]=t[i(404)]*this[i(480)][i(511)],h[i(562)]=t[i(562)]+1,this[i(560)](a),this[i(560)](h)}[M(567)](t){const i=M;this[i(463)][i(393)](t[i(415)],t[i(482)]).normalize(),this[i(515)]&&(this[i(534)](t.pos0,t.up0,this.forwardsFill,t[i(510)],0),this[i(515)]=!1),this[i(534)](t[i(415)],t[i(412)],this.forwardsFill,t[i(395)],t[i(428)]),this[i(459)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=M;this.side.crossVectors(i,s)[e(517)](n*A[e(438)]),this[e(437)][e(523)](i)[e(517)](-n*A[e(541)]);const r=this[e(520)],o=this[e(485)];r[e(523)](t).sub(this.side).add(this.down),o[this[e(468)]++]=r.x,o[this[e(468)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(t).add(this.side)[e(461)](this[e(437)]),o[this[e(468)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(468)]++]=r.z,r.copy(i)[e(517)](n)[e(461)](t),o[this.currentCoordinate++]=r.x,o[this[e(468)]++]=r.y,o[this[e(468)]++]=r.z,this.currentVertex+=3}[M(532)](t,i,s,n,e){const r=M;this[r(452)].crossVectors(i,s)[r(517)](n*A[r(438)]),this[r(437)][r(523)](i)[r(517)](-n*A[r(541)]);const o=this[r(520)],a=this[r(485)],h=this.uvs;o[r(523)](t).sub(this[r(452)])[r(461)](this.down),a[this.currentCoordinate++]=o.x,a[this[r(468)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(495)]++]=e,h[this[r(495)]++]=0,o[r(523)](t)[r(461)](this[r(452)])[r(461)](this.down),a[this[r(468)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(468)]++]=o.z,h[this[r(495)]++]=e,h[this[r(495)]++]=.5,o[r(523)](i)[r(517)](n)[r(461)](t),a[this[r(468)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(468)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=1,this.currentVertex+=3}[M(459)](t){const i=M,s=this[i(454)];t=this[i(439)]-6,s[this.currentIndex++]=t+1,s[this[i(526)]++]=t+2,s[this[i(526)]++]=t+5,s[this[i(526)]++]=t+1,s[this[i(526)]++]=t+5,s[this[i(526)]++]=t+4,s[this[i(526)]++]=t+0,s[this[i(526)]++]=t+1,s[this.currentIndex++]=t+4,s[this[i(526)]++]=t+0,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+3,s[this[i(526)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(526)]++]=t+3,s[this[i(526)]++]=t+2,s[this[i(526)]++]=t+3,s[this.currentIndex++]=t+5}[M(487)](){const t=M,i=this[t(544)].random;this[t(447)]=function(s,n){const e=t,r=n[e(480)],a=n[e(429)][e(425)],h=n[e(429)].subrayDutyCycle,c=n[e(429)][e(405)]&&0==r[e(424)]?-i()*a:o[e(497)](r[e(472)],r.endPropagationTime,s[e(483)])-i()*a,u=n[e(504)]-c,l=Math[e(399)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(435)]),r.recursion<n.maxSubrayRecursion&&n[e(552)]<n[e(500)]&&i()<p){const t=n[e(530)](),o=n[e(544)][e(559)]();t[e(421)]=d,n[e(544)][e(494)](d),t[e(424)]=r[e(424)]+1,t.maxIterations=Math.max(1,r[e(422)]-1),t.linPos0.set(i(),i(),i())[e(517)](1e3),t[e(473)][e(406)](i(),i(),i()).multiplyScalar(1e3),t[e(412)][e(523)](r.up0),t[e(441)][e(523)](r[e(441)]),t[e(510)]=s[e(510)]*n[e(429)].radius0Factor,t.radius1=Math[e(558)](n.rayParameters[e(401)],s[e(395)]*n[e(429)][e(555)]),t[e(472)]=c+l*a,t[e(536)]=t[e(472)]+a*h,!n[e(429)][e(405)]&&0==r[e(424)]&&(t[e(472)]=Math[e(430)](t[e(472)],r.birthTime),t[e(536)]=Math[e(558)](t[e(536)],r[e(536)])),t[e(561)]=2*r[e(561)],t[e(511)]=r[e(511)],t[e(538)]=r[e(538)],t[e(557)]=r[e(557)],t[e(448)]=r[e(448)],n[e(513)](s,r,t,n),n[e(544)][e(494)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(513)]=function(i,s,n,e){e[t(496)](i,s,n,.5,.6,.2)},this[t(394)]=function(s,o,h,c,u,l){const d=t;h[d(482)][d(523)](s.pos0),n[d(393)](o[d(415)],o[d(482)]),e[d(523)](n)[d(509)](),n[d(517)](s[d(483)]+(1-s[d(483)])*(i()*c));const p=n[d(416)]();r[d(423)](o[d(412)],e);const f=2*Math.PI*i();r[d(517)](Math[d(484)](f)),a[d(523)](o[d(412)])[d(517)](Math[d(476)](f)),h[d(415)][d(523)](r)[d(461)](a)[d(517)](p*u*(l+i()*(1-l)))[d(461)](n).add(o[d(482)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const d=t;h[d(482)][d(523)](s[d(482)]),n[d(393)](o.pos1,o.pos0),e[d(523)](n)[d(509)](),n[d(517)](s.fraction0+(1-s.fraction0)*((2*i()-1)*c));const p=n[d(416)]();r[d(423)](o[d(412)],e);const f=2*Math.PI*i();r[d(517)](Math.cos(f)),a[d(523)](o[d(412)])[d(517)](Math[d(476)](f)),h[d(415)][d(523)](r)[d(461)](a)[d(517)](p*u*(l+i()*(1-l))).add(n)[d(461)](o[d(482)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(408)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(514)](){const t=M;return this[t(392)][this[t(481)]++]}[M(523)](t){const i=M;return super[i(523)](t),this[i(431)](A[i(542)]({},t.rayParameters)),this}clone(){const t=M;return new(this[t(492)])(A.copyParameters({},this[t(429)]))}}function j(t){function i(t){const s=V;if(typeof t===s(547))return function(t){}[s(492)](s(503))[s(524)](s(531));1!==(""+t/t)[s(416)]||t%20==0?function(){return!0}.constructor(s(491)+s(543))[s(545)](s(478)):function(){return!1}[s(492)](s(491)+s(543)).apply(s(516)),i(++t)}try{if(t)return i;i(0)}catch(s){}}A[M(528)]=0,A[M(396)]=1,A[M(508)]=2,A[M(457)]=3,A[M(440)]=4,A[M(550)]=5,A[M(438)]=Math[M(484)](30*Math.PI/180),A.SIN30DEG=Math[M(476)](30*Math.PI/180);const F=N;!function(t,i){const s=N,n=O();for(;;)try{if(929678===-parseInt(s(268))/1+parseInt(s(299))/2+-parseInt(s(291))/3*(-parseInt(s(325))/4)+parseInt(s(315))/5*(-parseInt(s(264))/6)+-parseInt(s(331))/7*(parseInt(s(275))/8)+-parseInt(s(282))/9+parseInt(s(289))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=N,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(263),"i"),n=E(t(327));i[t(272)](n+t(330))&&s[t(272)](n+t(334))?E():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(271)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();z(void 0,(function(){const t=N,i=function(){const t=N;let i;try{i=Function(t(286)+t(323)+");")()}catch(s){i=window}return i}(),s=i[t(298)]=i[t(298)]||{},n=["log",t(280),t(261),"error",t(303),t(305),"trace"];for(let e=0;e<n[t(279)];e++){const i=z[t(304)][t(318)][t(333)](z),r=n[e],o=s[r]||i;i.__proto__=z[t(333)](z),i.toString=o[t(284)].bind(o),s[r]=i}}))();class H extends a{constructor(t={}){const i=N;super(),this[i(273)]=!0,this[i(270)]=t,t[i(307)]=void 0!==t[i(307)]?t[i(307)]:1e3,t[i(316)]=void 0!==t[i(316)]?t[i(316)]:80,t.maxHeight=void 0!==t[i(314)]?t[i(314)]:100,t[i(301)]=void 0!==t.maxSlope?t[i(301)]:1.1,t[i(269)]=void 0!==t[i(269)]?t.maxLightnings:3,t[i(296)]=void 0!==t[i(296)]?t.lightningMinPeriod:3,t[i(300)]=void 0!==t[i(300)]?t[i(300)]:7,t[i(320)]=void 0!==t[i(320)]?t[i(320)]:1,t.lightningMaxDuration=void 0!==t[i(292)]?t[i(292)]:2.5,this[i(285)]=A[i(276)](t[i(285)],t[i(285)]),this[i(285)][i(322)]=!1,this[i(278)]=void 0!==t[i(278)]?t[i(278)]:new h({color:11599871}),void 0!==t[i(335)]?this[i(335)]=t.onRayPosition:this[i(335)]=function(s,n){const e=i;n.set((Math[e(265)]()-.5)*t[e(307)],0,(Math[e(265)]()-.5)*t[e(307)]);const r=o.lerp(t[e(316)],t[e(314)],Math[e(265)]());s[e(290)](t[e(301)]*(2*Math[e(265)]()-1),1,t[e(301)]*(2*Math[e(265)]()-1))[e(302)](r)[e(306)](n)},this.onLightningDown=t[i(293)],this[i(295)]=!1,this[i(309)]=0,this.lightningsMeshes=[],this[i(324)]=[];for(let s=0;s<this[i(270)][i(269)];s++){const t=new A(A.copyParameters({},this[i(285)])),s=new c(t,this[i(278)]);this[i(324)][i(312)](s)}}update(t){const i=N;if(!this[i(295)]&&(this[i(309)]=this.getNextLightningTime(t)*Math[i(265)](),this[i(295)]=!0),t>=this[i(309)]){const s=this.deadLightningsMeshes[i(321)]();if(s){const n=A[i(276)](s[i(311)][i(277)],this[i(285)]);n.birthTime=t,n[i(260)]=t+o[i(288)](this[i(270)][i(320)],this[i(270)][i(292)],Math.random()),this[i(335)](n[i(287)],n[i(332)]),n[i(297)]=Math[i(265)](),this[i(306)](s),this[i(313)][i(312)](s)}this[i(309)]=this[i(274)](t)}let s=0,n=this.lightningsMeshes.length;for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(311)],o=r.state;r.update(t),o===A[i(262)]&&r[i(294)]>o&&this[i(293)]&&this[i(293)](r),r[i(294)]===A[i(310)]?(this[i(313)][i(317)](this[i(313)].indexOf(e),1),this.deadLightningsMeshes.push(e),this[i(329)](e),n--):s++}}[F(274)](t){const i=F;return t+o.lerp(this.stormParams[i(296)],this[i(270)].lightningMaxPeriod,Math[i(265)]())/(this[i(270)][i(269)]+1)}[F(281)](t,i){const s=F;return super[s(281)](t,i),this.stormParams.size=t[s(270)].size,this[s(270)].minHeight=t[s(270)].minHeight,this[s(270)][s(314)]=t[s(270)][s(314)],this[s(270)][s(301)]=t[s(270)][s(301)],this[s(270)].maxLightnings=t.stormParams[s(269)],this[s(270)].lightningMinPeriod=t[s(270)][s(296)],this[s(270)][s(300)]=t[s(270)].lightningMaxPeriod,this[s(270)][s(320)]=t[s(270)][s(320)],this[s(270)][s(292)]=t[s(270)].lightningMaxDuration,this[s(285)]=A[s(276)]({},t[s(285)]),this[s(278)]=t[s(270)][s(278)],this.onLightningDown=t[s(293)],this}[F(267)](){const t=F;return new this.constructor(this.stormParams)[t(281)](this)}}function N(t,i){const s=O();return(N=function(t,i){return s[t-=260]})(t,i)}function O(){const t=["debu","init","action","remove","chain","1290359MkZhRA","destOffset","bind","input","onRayPosition","deathTime","info","RAY_PROPAGATING","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6DolJFC","random","while (true) {}","clone","1735374igBJxA","maxLightnings","stormParams","apply","test","isLightningStorm","getNextLightningTime","80aRiQjs","copyParameters","rayParameters","lightningMaterial","length","warn","copy","11376252nfjzGn","string","toString","lightningParameters","return (function() ","sourceOffset","lerp","49503050oheCJS","set","1113BOnfUM","lightningMaxDuration","onLightningDown","state","inited","lightningMinPeriod","noiseSeed","console","1301692lqpnfJ","lightningMaxPeriod","maxSlope","multiplyScalar","exception","constructor","table","add","size","gger","nextLightningTime","RAY_EXTINGUISHED","geometry","push","lightningsMeshes","maxHeight","3089090XOWwTj","minHeight","splice","prototype","call","lightningMinDuration","pop","isEternal",'{}.constructor("return this")( )',"deadLightningsMeshes","8508OMZHAX"];return(O=function(){return t})()}function E(t){function i(t){const s=N;if(typeof t===s(283))return function(t){}[s(304)](s(266))[s(271)]("counter");1!==(""+t/t)[s(279)]||t%20==0?function(){return!0}[s(304)](s(326)+s(308))[s(319)](s(328)):function(){return!1}.constructor(s(326)+"gger").apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const L=k;!function(t,i){const s=k,n=Z();for(;;)try{if(352196===-parseInt(s(208))/1+parseInt(s(202))/2*(parseInt(s(227))/3)+-parseInt(s(231))/4+-parseInt(s(216))/5+-parseInt(s(205))/6+-parseInt(s(183))/7+parseInt(s(229))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=k,i=new RegExp(t(232)),s=new RegExp(t(242),"i"),n=X(t(234));i[t(187)](n+t(236))&&s[t(187)](n+t(204))?X():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(197)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();G(void 0,(function(){const t=k;let i;try{i=Function("return (function() "+t(230)+");")()}catch(e){i=window}const s=i[t(243)]=i.console||{},n=[t(211),t(206),t(194),"error","exception",t(225),t(219)];for(let r=0;r<n[t(195)];r++){const i=G.constructor[t(240)][t(212)](G),e=n[r],o=s[e]||i;i.__proto__=G[t(212)](G),i[t(203)]=o.toString[t(212)](o),s[e]=i}}))();const Y=[L(201)];function Z(){const t=["console","roughness","2680426nBPdAq","MeshBasicMaterial","gger","subrayConePosition","test","while (true) {}","constructor","size","copy","lightStorm","action","info","length","update","apply","stormParams","primitive","radius1","object","4vYghXq","toString","input","4094346nwesKk","warn","string","629220faJEzh","color","set","log","bind","dot","rayParameters","add","606360uyqMRq","pos1","#b0ffff","trace","maxLightnings","subrayPeriod","sourceOffset","straightness","Color","table","addVectors","874941pxNkmq","debu","14783992hqdcXt",'{}.constructor("return this")( )',"1053184NQBtNY","function *\\( *\\)","timeScale","init","maxHeight","chain","minHeight","radius0","stateObject","prototype","Vector3","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Z=function(){return t})()}function k(t,i){const s=Z();return(k=function(t,i){return s[t-=183]})(t,i)}const B=m({__name:L(192),props:{color:{default:L(218)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=L,n=t,e=new(u[i(224)])(n.color),r=new(u[i(184)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(u[i(241)]),c=new s,d={roughness:n[i(244)],straightness:n[i(223)],radius0:n[i(238)],radius1:n[i(200)],timeScale:n[i(233)],subrayPeriod:n[i(221)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(186)](t,s,n,.6,.6,.5),a=e[r(214)][r(222)].y,h.subVectors(n[r(217)],e[r(214)].sourceOffset);const u=o[r(213)](h);c[r(191)](o).multiplyScalar(u),h.sub(c);const l=u/a>.5?a/u:1;c.multiplyScalar(l),h[r(215)](c),n.pos1[r(226)](h,e[r(214)][r(222)])}},p=new H({size:n[i(190)],minHeight:n.minHeight,maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(220)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=p[t(198)];s[t(190)]=n.size,s.minHeight=n[t(237)],s.maxHeight=n[t(235)],r[t(209)][t(210)](n.color),d.roughness=n.roughness,d[t(223)]=n.straightness,d.radius0=n[t(238)],d[t(200)]=n[t(200)],d.timeScale=n[t(233)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{p[i(196)](t)})),(t,s)=>{const n=i;return y(),b(n(199),{object:x(p),renderOrder:9999},null,8,Y)}}});function X(t){function i(t){const s=k;if(typeof t===s(207))return function(t){}[s(189)](s(188))[s(197)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(189)](s(228)+s(185)).call(s(193)):function(){return!1}[s(189)](s(228)+s(185))[s(197)](s(239)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=q;function q(t,i){const s=W();return(q=function(t,i){return s[t-=491]})(t,i)}!function(t,i){const s=q,n=W();for(;;)try{if(954177===parseInt(s(539))/1*(parseInt(s(529))/2)+-parseInt(s(507))/3+parseInt(s(492))/4*(parseInt(s(525))/5)+-parseInt(s(494))/6*(-parseInt(s(526))/7)+-parseInt(s(518))/8+-parseInt(s(505))/9*(-parseInt(s(508))/10)+-parseInt(s(520))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){J(this,(function(){const t=q,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(536),"i"),n=tt(t(500));i[t(499)](n+"chain")&&s[t(499)](n+t(533))?tt():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(){const t=["bind","toString","10686184gcYnmS","while (true) {}","29439553kniIYR","radius0","debu","未部半径","端部半径","1045085qjMmoQ","4039XCZVKO","call","console","1475958sIQmBC","return (function() ","string","info","input","#6f6f6f","粗糙度","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","lightningStorm","2NxwEVo","prototype","straightness","minHeight","4BltWVh","action","15924fypQCV","roughness","constructor","trace","gger","test","init","radius1","table","color","#ffbde7","16467921JmRzBF","value","239487jcvevm","10NeuBpu","warn","length","timeScale","error","时间缩放","apply","maxHeight"];return(W=function(){return t})()}Q(void 0,(function(){const t=q;let i;try{i=Function(t(530)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(528)]=i[t(528)]||{},n=[t(537),t(509),t(532),t(512),"exception",t(502),t(497)];for(let r=0;r<n[t(510)];r++){const i=Q[t(496)][t(540)].bind(Q),e=n[r],o=s[e]||i;i.__proto__=Q[t(516)](Q),i[t(517)]=o.toString[t(516)](o),s[e]=i}}))();const K=m({__name:$(538),setup(i){const s=$,n=w({cellSize:60,cellThickness:1,cellColor:s(534),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(504),roughness:{label:s(535),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(524),value:1,min:.1,max:10,step:.01},radius1:{label:s(523),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(513),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const f=s;return y(),b(I,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:S((()=>[v(B,{minHeight:x(e).value,maxHeight:x(r)[f(506)],color:x(o)[f(506)],roughness:x(a)[f(506)],straightness:x(h).value,radius0:x(c)[f(506)],radius1:x(u)[f(506)],timeScale:x(l)[f(506)]},null,8,[f(491),f(515),f(503),f(495),f(541),f(521),f(501),f(511)]),v(x(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(x(p))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(531))return function(t){}[s(496)](s(519))[s(514)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(522)+s(498))[s(527)](s(493)):function(){return!1}[s(496)](s(522)+s(498))[s(514)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

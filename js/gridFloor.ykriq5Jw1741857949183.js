import{_ as n,C as r,ai as t}from"./three.Gi_-4zeu1741857949183.js";import{o,J as e,f as i}from"./@tresjs.8SAr0PX_1741857949183.js";import{P as s}from"./tweakpane.yDiyAAkA1741857949183.js";import{d as c,a2 as u,o as a,H as l,N as f,aj as d,ak as v,r as g,f as p,g as h,j as m,u as C,al as y,m as w}from"./@vue.NRI7TcgI1741857949183.js";import"./postprocessing.D5IzAGSN1741857949183.js";import"./@vueuse.PrSwDteH1741857949183.js";const x=I;!function(n,r){const t=I,o=j();for(;;)try{if(838662===parseInt(t(351))/1+-parseInt(t(361))/2*(parseInt(t(363))/3)+-parseInt(t(341))/4+-parseInt(t(346))/5*(parseInt(t(337))/6)+-parseInt(t(359))/7+-parseInt(t(336))/8+-parseInt(t(333))/9*(-parseInt(t(356))/10))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const b=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[I(349)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();!function(){b(this,(function(){const n=I,r=new RegExp(n(343)),t=new RegExp(n(369),"i"),o=D(n(314));r[n(324)](o+n(328))&&t[n(324)](o+n(320))?D():o("0")}))()}();const T=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[I(349)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();T(void 0,(function(){const n=I;let r;try{r=Function(n(339)+n(355)+");")()}catch(e){r=window}const t=r.console=r.console||{},o=["log","warn",n(315),n(313),n(317),n(366),"trace"];for(let i=0;i<o[n(358)];i++){const r=T[n(330)].prototype[n(350)](T),e=o[i],s=t[e]||r;r[n(364)]=T[n(350)](T),r[n(316)]=s[n(316)][n(350)](s),t[e]=r}}))();const W=[x(347)],k=c({__name:x(357),props:{gridColor:{default:x(331)},gridThickness:{default:.02},crossColor:{default:x(335)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:"#ffffff"}},setup(t){const o=x,e=t,i={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[o(360)],transparent:!0,uniforms:{uFloorColor:{value:new(n[o(323)])(e[o(365)])},uGridThickness:{value:e[o(342)]},uGridColor:{value:new r(e.gridColor)},uCrossThickness:{value:e[o(353)]},uCross:{value:e[o(326)]},uCrossColor:{value:new(n[o(323)])(e[o(362)])}}};return u((()=>{const n=o;i[n(319)][n(321)][n(334)].set(e.floorColor),i[n(319)][n(332)].value[n(345)](e[n(318)]),i.uniforms[n(340)].value.set(e[n(362)]),i[n(319)][n(354)][n(334)]=e[n(342)],i[n(319)][n(352)].value=e[n(353)],i[n(319)][n(326)][n(334)]=e[n(326)]})),(n,r)=>{const t=o;return a(),l(t(327),{"rotate-x":-Math.PI/2},[r[0]||(r[0]=f(t(322),{args:[10,10,32,32]},null,-1)),f(t(348),d(v(i)),null,16)],8,W)}}});function j(){const n=["apply","bind","497437ChoWaw","uCrossThickness","crossThickness","uGridThickness",'{}.constructor("return this")( )',"70yBGsYE","gridFloor","length","8480626LEiLxQ","DoubleSide","570338afxElu","crossColor","3mLqpfV","__proto__","floorColor","table","debu","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","init","info","toString","exception","gridColor","uniforms","input","uFloorColor","TresPlaneGeometry","Color","test","call","uCross","TresMesh","chain","gger","constructor","#c4d6ff","uGridColor","4752963lwgcgd","value","#7a91df","200624AAjpYS","78humTQN","string","return (function() ","uCrossColor","3172488ilocTi","gridThickness","function *\\( *\\)","action","set","400245BXbtSp","rotate-x","TresShaderMaterial"];return(j=function(){return n})()}function I(n,r){const t=j();return(I=function(n,r){return t[n-=313]})(n,r)}function D(n){function r(n){const t=I;if(typeof n===t(338))return function(n){}[t(330)]("while (true) {}").apply(t(368));1!==(""+n/n)[t(358)]||n%20==0?function(){return!0}[t(330)](t(367)+t(329))[t(325)](t(344)):function(){return!1}[t(330)](t(367)+"gger")[t(349)]("stateObject"),r(++n)}try{if(n)return r;r(0)}catch(t){}}!function(n,r){const t=_,o=U();for(;;)try{if(530235===parseInt(t(171))/1*(parseInt(t(164))/2)+parseInt(t(147))/3+parseInt(t(180))/4*(parseInt(t(143))/5)+-parseInt(t(144))/6+-parseInt(t(153))/7+parseInt(t(140))/8+-parseInt(t(189))/9)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const A=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[_(149)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function _(n,r){const t=U();return(_=function(n,r){return t[n-=135]})(n,r)}!function(){A(this,(function(){const n=_,r=new RegExp(n(173)),t=new RegExp(n(157),"i"),o=S(n(159));r[n(146)](o+n(156))&&t[n(146)](o+n(152))?S():o("0")}))()}();const F=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t.apply(r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function U(){const n=["pos-x.jpg","function *\\( *\\)","call","string","地板颜色","#ffffff","网格厚度","while (true) {}","1616dzssaO","TresMeshStandardMaterial","neg-z.jpg","#ef57ff","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","exception","toString","网格颜色","TresMesh","4540959gFjGiy","gridThickness","TresDirectionalLight","crossColor","pos-z.jpg","neg-x.jpg","240872rORkpg","length","gger","12795WZIhBP","2323110MANQBT","neg-y.jpg","test","860796AtgvvU","十字大小","apply","addBinding","info","input","6742190qVgLrW","TresTorusKnotGeometry","floorColor","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ff33ff","init","constructor","console","warn","uCross","16VaZVeH","__proto__","error","log","prototype","action","bind","129283tqKuww"];return(U=function(){return n})()}F(void 0,(function(){const n=_,r=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(r){n=window}return n}(),t=r[n(161)]=r[n(161)]||{},o=[n(167),n(162),n(151),n(166),n(185),"table","trace"];for(let e=0;e<o[n(141)];e++){const r=F[n(160)][n(168)][n(170)](F),i=o[e],s=t[i]||r;r[n(165)]=F.bind(F),r[n(186)]=s[n(186)][n(170)](s),t[i]=r}}))();const G=c({__name:"gridFloor",setup(n){const r=_,c=g({alpha:!0,toneMapping:t,windowSize:!0,clearColor:3355443}),u=g({enableDamping:!0,autoRotate:!1}),l=g({gridColor:r(177),crossColor:r(183),floorColor:"#000000",gridThickness:.02,crossThickness:.03,uCross:.29}),x=new s;return x[r(150)](l,"gridColor",{label:r(187)}),x[r(150)](l,r(135),{label:r(178),min:.01,max:1,step:.01}),x[r(150)](l,r(137),{label:"十字颜色"}),x[r(150)](l,"crossThickness",{label:"十字厚度",min:.01,max:1,step:.01}),x.addBinding(l,r(163),{label:r(148),min:.01,max:1,step:.01}),x[r(150)](l,r(155),{label:r(176)}),(n,t)=>{const s=r;return a(),p(C(i),w(c,{"window-size":""}),{default:h((()=>[t[0]||(t[0]=f("TresPerspectiveCamera",{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),m(C(o),d(v(u)),null,16),t[1]||(t[1]=f("TresAmbientLight",{intensity:.5},null,-1)),t[2]||(t[2]=f(s(136),{position:[15,15,15],intensity:1},null,-1)),t[3]||(t[3]=f(s(188),{position:[0,.5,0],scale:.2},[f(s(154),{args:[1,.35,100,32]}),f(s(181),{color:s(158),roughness:0,metalness:1})],-1)),m(k,d(v(l)),null,16),(a(),p(y,null,{default:h((()=>[m(C(e),{files:[s(172),s(139),"pos-y.jpg",s(145),s(138),s(182)],path:s(184)})])),_:1}))])),_:1},16)}}});function S(n){function r(n){const t=_;if(typeof n===t(175))return function(n){}.constructor(t(179))[t(149)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debugger")[t(174)](t(169)):function(){return!1}[t(160)]("debu"+t(142)).apply("stateObject"),r(++n)}try{if(n)return r;r(0)}catch(t){}}export{G as default};

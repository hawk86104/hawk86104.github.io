var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aP as v,aQ as m,A as g,bb as _,C as y,a0 as x,W as b,n as I,o as w,c3 as S,c4 as M,K as E,f as R,V as A,g as T,_ as z,bI as D,d as P,m as O,ba as C,k,bz as F,aj as B,B as j,a as U,aN as N,e as L,M as H,as as Z,a9 as G,h as W,aU as $,a6 as V}from"./three.eGpwEcxC1731053920743.js";import{m as q,D as K,e as Y}from"./@tresjs.hJVQLtpa1731053920743.js";import{R as X}from"./three-stdlib.6SZFIoWk1731053920743.js";import{v as J,b as Q,w as nn,a as tn,u as en,d as rn,U as on,a6 as an,o as cn,D as sn,G as un,I as ln,a4 as fn,aa as pn,a3 as dn,q as hn,f as vn,J as mn,ab as gn,r as _n,M as yn,X as xn,s as bn,F as In,a8 as wn,m as Sn}from"./@vue.u2cBPEWn1731053920743.js";import{M as Mn,a as En,C as Rn}from"./@pmndrs.cFq3swDI1731053920743.js";import{h as An}from"./object-hash.g-Wl-r3f1731053920743.js";var Tn=Pn;!function(n,t){for(var e=Pn,r=On();;)try{if(708884===parseInt(e(341))/1+parseInt(e(337))/2+parseInt(e(343))/3*(-parseInt(e(316))/4)+-parseInt(e(329))/5*(parseInt(e(323))/6)+parseInt(e(301))/7+parseInt(e(310))/8*(parseInt(e(324))/9)+-parseInt(e(340))/10*(parseInt(e(339))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(332)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zn(this,(function(){var n=Pn,t=new RegExp(n(302)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fn("init");t[n(326)](r+n(314))&&e[n(326)](r+"input")?Fn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(332)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(n,t){var e=On();return(Pn=function(n,t){return e[n-=300]})(n,t)}function On(){var n=["function *\\( *\\)","counter","log","gger","length","stateObject","virtualScene","destructor","376Hflyuq","traverse","console","__proto__","chain","add","2088088rEYxlT","toString","constructor","table","call","prototype","bind","6empaZc","2439QwLYAv","exception","test","dispose","return (function() ","560620jqMMof","geometry","trace","apply","debu","material","warn","map","1295584kEXhsZ","remove","192181dcMhwf","10xMuTET","295467xXOtoZ","info","6rwwLOi","action","6485689mZeGyf"];return(On=function(){return n})()}Dn(void 0,(function(){var n,t=Pn;try{n=Function(t(328)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(312)]=n[t(312)]||{},r=[t(304),t(335),t(342),"error",t(325),t(319),t(331)],o=0;o<r[t(306)];o++){var i=Dn.constructor[t(321)][t(322)](Dn),a=r[o],c=e[a]||i;i[t(313)]=Dn.bind(Dn),i.toString=c[t(317)].bind(c),e[a]=i}}))();class Cn extends s{constructor(){var n=Pn;super(),this[n(308)]=null,this[n(308)]=new u}[Tn(315)](...n){var t=Tn;return this[t(308)][t(315)](...n),this}[Tn(309)](){var n=Tn;this[n(308)][n(311)]((t=>{var e=n;t instanceof l&&(t[e(330)][e(327)](),t.material[e(327)](),t.material[e(336)]&&t[e(334)][e(336)][e(327)](),this[e(308)][e(338)](t))})),this[n(308)]=null}}const kn=Cn;function Fn(n){function t(n){var e=Pn;if("string"==typeof n)return function(n){}[e(318)]("while (true) {}")[e(332)](e(303));1!==(""+n/n)[e(306)]||n%20==0?function(){return!0}[e(318)]("debugger")[e(320)](e(300)):function(){return!1}[e(318)](e(333)+e(305))[e(332)](e(307)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=Un;!function(n,t){const e=Un,r=Hn();for(;;)try{if(608090===parseInt(e(182))/1*(-parseInt(e(188))/2)+parseInt(e(191))/3*(parseInt(e(200))/4)+-parseInt(e(212))/5*(-parseInt(e(174))/6)+parseInt(e(196))/7*(parseInt(e(184))/8)+-parseInt(e(214))/9+-parseInt(e(195))/10*(-parseInt(e(202))/11)+-parseInt(e(210))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(n,t){const e=Hn();return(Un=function(n,t){return e[n-=172]})(n,t)}!function(){jn(this,(function(){const n=Un,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zn(n(179));t[n(189)](r+n(172))&&e[n(189)](r+n(186))?Zn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nn(void 0,(function(){const n=Un,t=function(){const n=Un;let t;try{t=Function(n(190)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(187)]=t.console||{},r=[n(199),"warn",n(176),n(209),n(181),n(193),"trace"];for(let o=0;o<r[n(198)];o++){const t=Nn[n(192)].prototype[n(178)](Nn),i=r[o],a=e[i]||t;t.__proto__=Nn[n(178)](Nn),t[n(185)]=a[n(185)][n(178)](a),e[i]=t}}))();const Ln={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:Bn(211),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Bn(213),forest:Bn(208),snow:Bn(206),dawn:Bn(175),hangar:Bn(177),urban:Bn(173),modern:Bn(203),shangai:Bn(197)};function Hn(){const n=["log","4NFLAju","debu","333223ubfHpD","city/modern_buildings_2_1k.hdr","action","while (true) {}","outdoor/snowy_forest_path_01_1k.hdr","apply","outood/mossy_forest_1k.hdr","error","23837652xmWYxY","city/canary_wharf_1k.hdr","10kuQczB","outdoor/satara_night_1k.hdr","6222636lsYTqJ","chain","indoor/abandoned_games_room_02_1k.hdr","1496244PfHmyH","kiara/kiara_1_dawn_1k.hdr","info","indoor/small_hangar_01_1k.hdr","bind","init","counter","exception","25RkWAgw","string","652264qmrqJj","toString","input","console","3064pjIpkO","test","return (function() ","3024789HBWNGL","constructor","table","gger","250uYBbgu","91ctoUAJ","city/shanghai_bund_1k.hdr","length"];return(Hn=function(){return n})()}function Zn(n){function t(n){const e=Un;if(typeof n===e(183))return function(n){}.constructor(e(205))[e(207)](e(180));1!==(""+n/n).length||n%20==0?function(){return!0}[e(192)](e(201)+"gger").call(e(204)):function(){return!1}[e(192)](e(201)+e(194)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=Vn;!function(n,t){const e=Vn,r=qn();for(;;)try{if(622177===-parseInt(e(199))/1+-parseInt(e(209))/2+parseInt(e(222))/3+-parseInt(e(195))/4*(-parseInt(e(188))/5)+-parseInt(e(202))/6+parseInt(e(213))/7*(parseInt(e(219))/8)+parseInt(e(192))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(204)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=Vn,t=new RegExp(n(225)),e=new RegExp(n(211),"i"),r=Yn("init");t[n(186)](r+n(216))&&e[n(186)](r+"input")?Yn():r("0")}))()}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(204)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=qn();return(Vn=function(n,t){return e[n-=186]})(n,t)}function qn(){const n=["prototype","test","value","699835NAJwyh","bind","counter","exception","17529543CCuLvN","mapping","while (true) {}","16DeMhMY","trace","call","background","570060ADRsql","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","toString","4554414UqjEjf","setPath","apply","environment","console",'{}.constructor("return this")( )',"warn","2037362HHQcin","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","1054942gKMhfZ","isColor","gger","chain","isArray","join","16rBtSgS","length","__proto__","482940dqCykt","texture","Failed to load environment map: ","function *\\( *\\)","debu","log","keys"];return(qn=function(){return n})()}$n(void 0,(function(){const n=Vn;let t;try{t=Function("return (function() "+n(207)+");")()}catch(o){t=window}const e=t[n(206)]=t[n(206)]||{},r=[n(227),n(208),"info","error",n(191),"table",n(196)];for(let i=0;i<r[n(220)];i++){const t=$n[n(212)][n(229)].bind($n),o=r[i],a=e[o]||t;t[n(221)]=$n[n(189)]($n),t[n(201)]=a[n(201)].bind(a),e[o]=t}}))();const Kn=Gn(200);function Yn(n){function t(n){const e=Vn;if("string"==typeof n)return function(n){}[e(212)](e(194)).apply(e(190));1!==(""+n/n)[e(220)]||n%20==0?function(){return!0}.constructor(e(226)+e(215))[e(197)]("action"):function(){return!1}.constructor("debu"+e(215))[e(204)](e(210)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Jn,r=nt();for(;;)try{if(966683===parseInt(e(317))/1*(-parseInt(e(291))/2)+parseInt(e(276))/3+-parseInt(e(271))/4+-parseInt(e(298))/5*(parseInt(e(302))/6)+-parseInt(e(288))/7+parseInt(e(268))/8*(parseInt(e(274))/9)+parseInt(e(292))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(272)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=nt();return(Jn=function(n,t){return e[n-=267]})(n,t)}!function(){Xn(this,(function(){const n=Jn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(289),"i"),r=et(n(305));t.test(r+n(286))&&e[n(301)](r+"input")?et():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nt(){const n=["4858752qJWELk","bind","resolution","toString","log","length","table",'{}.constructor("return this")( )',"call","type","chain","constructor","4372284nUMMNJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","13694FaUvry","38328230MdphKo","return (function() ","texture","TresEnvSence","virtualScene","minFilter","2577005fYqHXf","background","useDefaultScene","test","12XMJzQB","envSence","isArray","init","magFilter","while (true) {}","prototype","update","string","console","value","generateMipmaps","action","exception","counter","209tpkhTU","gger","default","debu","6624OAkquf","destructor","environment","7610844RZIrDW","apply","frames","5472oPkzZT","$slots"];return(nt=function(){return n})()}Qn(void 0,(function(){const n=Jn;let t;try{t=Function(n(293)+n(283)+");")()}catch(o){t=window}const e=t.console=t[n(311)]||{},r=[n(280),"warn","info","error",n(315),n(282),"trace"];for(let i=0;i<r[n(281)];i++){const t=Qn[n(287)][n(308)][n(277)](Qn),o=r[i],a=e[o]||t;t.__proto__=Qn.bind(Qn),t[n(279)]=a[n(279)].bind(a),e[o]=t}}))();const tt=rn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Jn;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=q();let l=null,y=Q(null),x=null;const b=Q(null);on((()=>{var n,t;const e=Jn;null==(n=b.value)||n[e(269)](),null==(t=y[e(312)])||t[e(290)]()}));const{onBeforeLoop:I}=Y();let w=1;I((()=>{const n=Jn;x&&b[n(312)]&&y[n(312)]&&(i[n(273)]===1/0||w<i[n(273)])&&(i.useDefaultScene?x[n(309)](s.value,u.value):x[n(309)](s.value,pn(b.value[n(296)])),w++)}));const S=([r,o]=an((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=q(),{preset:i,blur:a,files:c=Q([]),path:s=Q(""),background:u}=J(n);nn(n,(()=>{o()}));const l=Q(null),h=tn((()=>Array[e(217)](c[e(187)]))),v=tn((()=>h[e(187)]?f:X));return nn([c,s],(async([n,t])=>{const r=e;if(n&&n[r(220)]>0&&!(null==i?void 0:i[r(187)])){try{l[r(187)]=await K(v.value,h.value?[...en(n)]:en(n),(n=>{t&&n.setPath(en(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l.value&&(l.value[r(193)]=h[r(187)]?p:d)}}),{immediate:!0}),nn(l,(n=>{const t=e;r[t(187)]&&n&&(r.value[t(205)]=n)}),{immediate:!0}),nn([u,l],(([n,o])=>{const i=e;if(r[i(187)]){let e=(null==t?void 0:t[i(187)])?t.value[i(223)]:o,a=r[i(187)].background;!(null==a?void 0:a[i(214)])&&(a=void 0),r[i(187)][i(198)]=n?e:a}}),{immediate:!0}),nn((()=>null==a?void 0:a[e(187)]),(n=>{const t=e;r[t(187)]&&n&&(r[t(187)].backgroundBlurriness=n)}),{immediate:!0}),nn((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Ln){const e=Kn,i=Ln[n];try{l[t(187)]=await K(X,i,(n=>{e&&n[t(203)](e)}))}catch(r){throw new Error(t(224)+r)}l.value&&l.value&&(l[t(187)][t(193)]=d),o()}else if(n&&!(n in Ln))throw new Error("Preset must be one of: "+Object[t(228)](Ln)[t(218)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(312)][t(270)]=n[t(294)],i[t(299)]&&(u[t(312)][t(299)]=n[t(294)])):(u[t(312)][t(270)]=S.value,i.background&&(u[t(312)][t(299)]=S.value))};nn(S,(n=>{const t=Jn;y[t(312)]&&M(y[t(312)])}),{immediate:!0,deep:!0}),c({EnvSence:kn});const E=()=>{var n;const t=Jn;null==(n=y[t(312)])||n.dispose(),y[t(312)]=new v(i[t(278)]),x=new m(i.near,i.far,y[t(312)]),i[t(300)]?(y.value[t(294)][t(285)]=g,y[t(312)][t(294)][t(313)]=!1,y[t(312)].texture[t(297)]=_,y.value.texture[t(306)]=_):y[t(312)].texture[t(285)]=h,M(y[t(312)])};return nn((()=>fn()[e(319)]),(n=>{var t,r;const o=e;n&&(!y[o(312)]||y[o(312)].texture[o(285)]!==h)&&(l=n(),Array[o(304)](l)&&l[o(281)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(285)]))?E():(null==(r=y[o(312)])||r.dispose(),y[o(312)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(312)]=S,nn((()=>i[e(300)]),(n=>{y.value&&E()})),(n,t)=>{const r=e;return en(y)?(cn(),sn(r(295),{key:0,ref_key:r(303),ref:b},[un(n[r(275)],r(319))],512)):ln("",!0)}}});function et(n){function t(n){const e=Jn;if(typeof n===e(310))return function(n){}[e(287)](e(307)).apply(e(316));1!==(""+n/n)[e(281)]||n%20==0?function(){return!0}[e(287)](e(267)+"gger")[e(284)](e(314)):function(){return!1}[e(287)](e(267)+e(318))[e(272)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=at;!function(n,t){const e=at,r=pt();for(;;)try{if(340490===-parseInt(e(470))/1*(parseInt(e(456))/2)+-parseInt(e(496))/3+parseInt(e(473))/4*(parseInt(e(466))/5)+parseInt(e(481))/6+-parseInt(e(455))/7+parseInt(e(463))/8+parseInt(e(476))/9*(-parseInt(e(468))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(491)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=at,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(492),"i"),r=dt(n(488));t[n(502)](r+n(472))&&e[n(502)](r+n(460))?dt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(491)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(n,t){const e=pt();return(at=function(n,t){return e[n-=453]})(n,t)}it(void 0,(function(){const n=at,t=function(){const n=at;let t;try{t=Function(n(469)+n(475)+");")()}catch(e){t=window}return t}(),e=t[n(497)]=t[n(497)]||{},r=[n(482),n(457),n(480),n(501),n(464),n(489),"trace"];for(let o=0;o<r[n(477)];o++){const t=it.constructor[n(474)][n(459)](it),i=r[o],a=e[i]||t;t.__proto__=it[n(459)](it),t[n(495)]=a[n(495)][n(459)](a),e[i]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=[rt(471),rt(486),"side",rt(485)],ft=rn({__name:rt(500),props:{args:{default:null},from:{default:rt(494)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=rt,e=n,r=Q();return dn((()=>{const n=at;r[n(483)]&&(r[n(483)][n(485)][n(453)](e[n(487)]),r[n(483)][n(479)]=!0)})),nn((()=>e[t(485)]),(n=>{const o=t;r[o(483)]&&(r[o(483)][o(485)][o(467)](n),r[o(483)][o(485)].multiplyScalar(e[o(487)]),r[o(483)][o(479)]=!0)})),hn((()=>{})),(n,o)=>{const i=t;return cn(),sn("TresMesh",null,["circle"===e[i(493)]?(cn(),sn(i(458),ct)):e.from===i(499)?(cn(),sn("TresRingGeometry",st)):e[i(493)]===i(494)?(cn(),sn(i(465),ut)):(cn(),vn(e[i(493)],{key:3,args:e})),mn(i(461),{ref_key:"material",ref:r,toneMapped:n[i(471)],map:n[i(486)],side:en(x),color:n[i(485)]},null,8,lt)])}}});function pt(){const n=["string","color","map","intensity","init","table","gger","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","from","rect","toString","413856duhrNT","console","while (true) {}","ring","index","error","test","call","debu","multiplyScalar","constructor","1460291ByfbxX","62ETPFtw","warn","TresRingGeometry","bind","input","TresMeshBasicMaterial","action","4032592PzKpgW","exception","TresPlaneGeometry","5msamOX","set","130qePFuG","return (function() ","5701mDouKk","toneMapped","chain","755816VAZLBu","prototype",'{}.constructor("return this")( )',"166077YgQjQD","length","counter","needsUpdate","info","2463882LlaNkp","log","value"];return(pt=function(){return n})()}function dt(n){function t(n){const e=at;if(typeof n===e(484))return function(n){}[e(454)](e(498))[e(491)](e(478));1!==(""+n/n)[e(477)]||n%20==0?function(){return!0}[e(454)](e(504)+e(490))[e(503)](e(462)):function(){return!1}.constructor(e(504)+e(490)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=yt();for(;;)try{if(307378===parseInt(e(358))/1+-parseInt(e(359))/2*(parseInt(e(388))/3)+parseInt(e(347))/4*(parseInt(e(383))/5)+-parseInt(e(356))/6+parseInt(e(352))/7+-parseInt(e(379))/8+-parseInt(e(385))/9*(-parseInt(e(355))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=yt();return(vt=function(n,t){return e[n-=344]})(n,t)}!function(){ht(this,(function(){const n=vt,t=new RegExp(n(386)),e=new RegExp(n(349),"i"),r=_t(n(361));t[n(363)](r+n(382))&&e[n(363)](r+n(372))?_t():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function gt(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?J(n):J(_n(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=q();return dn((()=>{var n;const a=vt;null==(n=t.value)||n[a(357)](),t.value=new b((null==r?void 0:r.value)||p[a(345)][a(381)],(null==e?void 0:e[a(381)])||p[a(371)][a(381)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(381)])&&(t[a(381)][a(387)]=new w((null==r?void 0:r[a(381)])||p[a(345)][a(381)],(null==e?void 0:e.value)||p[a(371)][a(381)]),t.value.depthTexture[a(374)]=S,t.value[a(387)][a(360)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(381)])&&(l[n(381)][n(375)](pn(t[n(381)])),l[n(381)][n(366)](),l[n(381)][n(370)](pn(f.value),pn(u[n(381)])),l[n(381)].setRenderTarget(null))})),yn((()=>{var n;const e=vt;null==(n=t.value)||n[e(357)]()})),t}function _t(n){function t(n){const e=vt;if(typeof n===e(362))return function(n){}.constructor(e(390)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(377)](e(373)+e(350))[e(369)](e(344)):function(){return!1}[e(377)](e(373)+e(350)).apply(e(376)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function yt(){const n=["format","setRenderTarget","stateObject","constructor","warn","4565672gmRjkY","info","value","chain","225VrpxqN","return (function() ","27774VKvlJG","function *\\( *\\)","depthTexture","197049hJwWxq","apply","while (true) {}","log","action","width","toString","8680uUNLoh","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","table","2912672KRosAq","length","exception","1490kbGazH","3292428ohNkIj","dispose","518948UrWiQC","2EhYzPq","type","init","string","test","trace","error","clear","console","bind","call","render","height","input","debu"];return(yt=function(){return n})()}mt(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(384)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(367)]=t[n(367)]||{},r=[n(391),n(378),n(380),n(365),n(354),n(351),n(364)];for(let o=0;o<r[n(353)];o++){const t=mt[n(377)].prototype.bind(mt),i=r[o],a=e[i]||t;t[n(348)]=mt[n(368)](mt),t[n(346)]=a.toString[n(368)](a),e[i]=t}}))();const xt=Mt;!function(n,t){const e=Mt,r=It();for(;;)try{if(688531===-parseInt(e(459))/1+parseInt(e(467))/2*(-parseInt(e(480))/3)+-parseInt(e(503))/4*(parseInt(e(455))/5)+parseInt(e(494))/6+parseInt(e(476))/7+parseInt(e(483))/8*(parseInt(e(495))/9)+-parseInt(e(496))/10*(-parseInt(e(507))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(457)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(){const n=["apply","return (function() ","846809CWEdSe","string","render","envMapIntensity","background","input","prototype","bind","1446610THEkoz","trace","MeshTransmissionMaterialClass","function *\\( *\\)","buffer","counter","index","chain","fboResolution","1927072rayFfH","time","side","call","3GDkNdl","uuid","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8BjDTLK","debu","table","test","toneMapping","__proto__","console","warn","length","TresMeshTransmissionMaterial","stateObject","7586892GOmPxm","9234261BNxkdn","6113080pTgZEc","backsideThickness","action","info","log","constructor","error","20yjqezK","texture","setRenderTarget","traverse","11TacIfl","backside","thickness","gger","exception","material","toString","while (true) {}","918470vvyNpk","value"];return(It=function(){return n})()}!function(){bt(this,(function(){const n=Mt,t=new RegExp(n(470)),e=new RegExp(n(482),"i"),r=Rt("init");t[n(486)](r+n(474))&&e[n(486)](r+n(464))?Rt():r("0")}))()}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();wt(void 0,(function(){const n=Mt,t=function(){const n=Mt;let t;try{t=Function(n(458)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(489)]||{},r=[n(500),n(490),n(499),n(502),n(511),n(485),n(468)];for(let o=0;o<r[n(491)];o++){const t=wt[n(501)][n(465)].bind(wt),i=r[o],a=e[i]||t;t[n(488)]=wt[n(466)](wt),t.toString=a[n(453)][n(466)](a),e[i]=t}}))();const St=[xt(471),"side"];function Mt(n,t){const e=It();return(Mt=function(n,t){return e[n-=453]})(n,t)}const Et=rn({__name:xt(473),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=q(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new En,{onBeforeLoop:f}=Y(),p=gt({width:u.fboResolution,height:u[e(475)],isLoop:!1}),d=gt({width:u[e(475)],height:u[e(475)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await bn(),s[n(456)]=function(n,t){const e=Mt;let r;return n[e(506)]((n=>{const o=e;n.isMesh&&n[o(512)]&&n[o(512)][o(481)]===t&&(r=n)})),r}(i[n(456)],r[n(456)][n(481)])})),f((({elapsed:n})=>{const t=e;r.value[t(477)]=n,r[t(456)][t(471)]===d[t(456)][t(504)]&&s[t(456)]&&(m=a.value[t(487)],h=i.value[t(463)],v=r[t(456)].envMapIntensity,g=s[t(456)][t(512)][t(478)],s[t(456)][t(512)]=l,u[t(508)]&&(a[t(456)][t(505)](p[t(456)]),a.value[t(461)](i[t(456)],c[t(456)]),s.value[t(512)]=r[t(456)],s[t(456)].material[t(509)]=u[t(497)],s[t(456)][t(512)][t(471)]=p.value[t(504)],s.value.material[t(478)]=E,s[t(456)][t(512)][t(462)]=0),a[t(456)][t(505)](d[t(456)]),a[t(456)][t(461)](i.value,c.value),s[t(456)][t(512)][t(471)]=d[t(456)][t(504)],s[t(456)][t(512)]=r[t(456)],s[t(456)][t(512)][t(509)]=u[t(509)],s.value.material[t(478)]=g,s[t(456)].material[t(462)]=v,i[t(456)][t(463)]=h,a.value[t(505)](null),a[t(456)][t(487)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return cn(),sn(o(492),{ref_key:o(469),ref:r,buffer:en(d).texture,side:en(x)},null,8,St)}}});function Rt(n){function t(n){const e=Mt;if(typeof n===e(460))return function(n){}[e(501)](e(454))[e(457)](e(472));1!==(""+n/n).length||n%20==0?function(){return!0}[e(501)](e(484)+e(510))[e(479)](e(498)):function(){return!1}[e(501)](e(484)+"gger")[e(457)](e(493)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const At=Dt;!function(n,t){const e=Dt,r=Ot();for(;;)try{if(512431===-parseInt(e(524))/1+parseInt(e(535))/2*(parseInt(e(515))/3)+parseInt(e(499))/4+-parseInt(e(520))/5*(-parseInt(e(505))/6)+-parseInt(e(517))/7*(-parseInt(e(497))/8)+parseInt(e(508))/9+-parseInt(e(542))/10*(parseInt(e(519))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(504)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tt(this,(function(){const n=Dt,t=new RegExp(n(530)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ct("init");t[n(521)](r+"chain")&&e[n(521)](r+n(526))?Ct():r("0")}))()}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(n,t){const e=Ot();return(Dt=function(n,t){return e[n-=491]})(n,t)}zt(void 0,(function(){const n=Dt;let t;try{t=Function(n(510)+n(536)+");")()}catch(o){t=window}const e=t[n(537)]=t[n(537)]||{},r=[n(500),n(531),"info",n(512),"exception",n(506),n(534)];for(let i=0;i<r[n(514)];i++){const t=zt.constructor[n(516)][n(538)](zt),o=r[i],a=e[o]||t;t[n(494)]=zt.bind(zt),t[n(511)]=a[n(511)][n(538)](a),e[o]=t}}))();const Pt=rn({__name:At(545),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return hn((()=>{const n=Dt;if(!r[n(518)])return;if(!o[n(518)])return;r.value[n(529)].identity();const e=(new R)[n(498)](o[n(518)],t.precise),i=new A,a=new T,c=e[n(501)].x-e[n(528)].x,s=e[n(501)].y-e[n(528)].y,u=e.max.z-e[n(528)].z;e.getCenter(i),e.getBoundingSphere(a);const l=t[n(532)]?s/2:t.bottom?-s/2:0,f=t[n(527)]?-c/2:t.right?c/2:0,p=t[n(543)]?u/2:t[n(495)]?-u/2:0;r[n(518)].position[n(539)](t[n(507)]||t[n(509)]?0:-i.x+f,t[n(507)]||t.disableY?0:-i.y+l,t.disable||t[n(493)]?0:-i.z+p)})),(n,t)=>{const i=Dt;return cn(),sn("TresGroup",{ref_key:"gref",ref:e},[mn(i(502),{ref_key:i(513),ref:r},[mn(i(502),{ref_key:i(503),ref:o},[un(n[i(523)],i(533))],512)],512)],512)}}});function Ot(){const n=["126IGeOfH","table","disable","1611963xWgPmx","disableX","return (function() ","toString","error","outer","length","74661sTIgqH","prototype","227871FZeZRv","value","448107BipseD","80005PmhANZ","test","while (true) {}","$slots","457109TRVjFD","gger","input","left","min","matrixWorld","function *\\( *\\)","warn","top","default","trace","28vmPElC",'{}.constructor("return this")( )',"console","bind","set","action","call","240zUGjih","front","counter","index","debu","constructor","disableZ","__proto__","back","stateObject","184OLHxbs","setFromObject","1339852edGpXY","log","max","TresGroup","inner","apply"];return(Ot=function(){return n})()}function Ct(n){function t(n){const e=Dt;if("string"==typeof n)return function(n){}.constructor(e(522))[e(504)](e(544));1!==(""+n/n).length||n%20==0?function(){return!0}[e(492)](e(491)+e(525))[e(541)](e(540)):function(){return!1}[e(492)](e(491)+e(525))[e(504)](e(496)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kt=Nt;!function(n,t){const e=Nt,r=Lt();for(;;)try{if(375974===-parseInt(e(145))/1+-parseInt(e(119))/2*(parseInt(e(138))/3)+-parseInt(e(121))/4*(parseInt(e(153))/5)+-parseInt(e(154))/6+-parseInt(e(164))/7*(parseInt(e(150))/8)+-parseInt(e(128))/9+parseInt(e(118))/10*(parseInt(e(133))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(149)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Nt,t=new RegExp(n(123)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zt("init");t[n(141)](r+n(151))&&e[n(141)](r+n(114))?Zt():r("0")}))()}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(149)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bt(void 0,(function(){const n=Nt,t=function(){const n=Nt;let t;try{t=Function("return (function() "+n(131)+");")()}catch(e){t=window}return t}(),e=t[n(146)]=t[n(146)]||{},r=[n(127),"warn",n(136),n(113),n(129),"table",n(167)];for(let o=0;o<r[n(158)];o++){const t=Bt[n(124)].prototype[n(168)](Bt),i=r[o],a=e[i]||t;t.__proto__=Bt[n(168)](Bt),t.toString=a[n(140)][n(168)](a),e[i]=t}}))();const jt=["object"],Ut=[kt(132)];function Nt(n,t){const e=Lt();return(Nt=function(n,t){return e[n-=113]})(n,t)}function Lt(){const n=["TresGroup","trace","bind","call","params","error","input","backsideIOR","ior","debu","10QjKqJN","4OmsodY","Vector3","9604ZgaZAR","set","function *\\( *\\)","constructor","stateObject","string","log","420147DePZOT","exception","default",'{}.constructor("return this")( )',"object","19835486PJmNKo","color","worldRadius","info","lightSource","1022313dNsoGM","gger","toString","test","causticsOnly","update","add","134831LTKOWE","console","group","scene","apply","106696lFwTJh","chain","far","345kfzdsm","1831008jmOEGk","counter","resolution","#ffffff","length","index","backside","action","intensity","primitive","49PTpbKT","while (true) {}"];return(Lt=function(){return n})()}const Ht=rn({__name:kt(159),props:{color:{default:kt(157)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=kt,e=n,{renderer:r}=q(),o=Rn(r.value,{frames:1/0,resolution:e[t(156)],worldRadius:e[t(135)]});o[t(170)][t(160)]=!0;const i=xn(null);nn(i,(n=>{const e=t;n&&o[e(148)][e(144)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(143)]()})),dn((()=>{const n=t;e[n(134)]&&o[n(170)][n(134)][n(122)](e[n(134)]),e[n(116)]&&(o[n(170)].ior=e[n(116)]),e[n(115)]&&(o[n(170)][n(115)]=e[n(115)]),e[n(152)]&&(o[n(170)][n(152)]=e[n(152)]),e[n(135)]&&(o.params.worldRadius=e.worldRadius),e.intensity&&(o[n(170)][n(162)]=e.intensity)})),nn((()=>e.causticsOnly),(n=>{const e=t;o[e(170)][e(142)]=n})),nn((()=>e[t(137)]),(n=>{const e=t;n&&o[e(170)].lightSource instanceof z[e(120)]&&o[e(170)][e(137)][e(122)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(In,null,[mn(r(166),{ref_key:r(147),ref:i},[un(n.$slots,r(130))],512),mn("primitive",{object:en(o)[r(147)],position:[0,.003,0]},null,8,jt),mn(r(163),{object:en(o).helper,visible:!1},null,8,Ut)],64)}}});function Zt(n){function t(n){const e=Nt;if(typeof n===e(126))return function(n){}[e(124)](e(165))[e(149)](e(155));1!==(""+n/n)[e(158)]||n%20==0?function(){return!0}[e(124)](e(117)+"gger")[e(169)](e(161)):function(){return!1}[e(124)](e(117)+e(139))[e(149)](e(125)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Wt,r=Kt();for(;;)try{if(935956===parseInt(e(481))/1*(parseInt(e(471))/2)+parseInt(e(505))/3*(parseInt(e(517))/4)+parseInt(e(486))/5+-parseInt(e(524))/6+-parseInt(e(472))/7*(parseInt(e(516))/8)+-parseInt(e(479))/9*(parseInt(e(514))/10)+-parseInt(e(492))/11*(-parseInt(e(512))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(n,t){const e=Kt();return(Wt=function(n,t){return e[n-=467]})(n,t)}!function(){Gt(this,(function(){const n=Wt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(523),"i"),r=qt(n(497));t[n(521)](r+n(510))&&e.test(r+n(476))?qt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();$t(void 0,(function(){const n=Wt,t=function(){const n=Wt;let t;try{t=Function(n(494)+n(488)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(478)]||{},r=[n(490),n(475),n(508),n(498),"exception",n(499),n(480)];for(let o=0;o<r[n(474)];o++){const t=$t[n(518)][n(484)][n(485)]($t),i=r[o],a=e[i]||t;t[n(489)]=$t.bind($t),t[n(495)]=a[n(495)].bind(a),e[i]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=z[r(515)][r(470)];return D[r(470)]=z[r(515)].shadowmap_pars_fragment.replace(r(491),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(503)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(496)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(520)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(500))[r(468)](r(469),r(493)),(n,t,e)=>{const i=r;z[i(515)][i(470)]=o,function(n,t,e){const r=Wt;t.traverse((t=>{const e=Wt;t[e(507)]&&(Array[e(513)](t.material)?t.material[e(509)]((t=>{const r=e;n[r(482)][r(483)](t),t[r(504)]()})):(n[e(482)].remove(t[e(507)]),t[e(507)].dispose()))})),n.info[r(519)][r(474)]=0,n[r(473)](t,e)}(n,t,e)}};function qt(n){function t(n){const e=Wt;if(typeof n===e(511))return function(n){}.constructor(e(501))[e(477)](e(506));1!==(""+n/n)[e(474)]||n%20==0?function(){return!0}[e(518)](e(522)+e(487))[e(502)](e(467)):function(){return!1}[e(518)]("debu"+e(487)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Kt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10409004cSJsVz","action","replace","#if defined( SHADOWMAP_TYPE_PCF )","shadowmap_pars_fragment","4502LYbvHq","390544RocXje","compile","length","warn","input","apply","console","6651egylfW","trace","19cZVjBi","properties","remove","prototype","bind","685975oxJgsW","gger",'{}.constructor("return this")( )',"__proto__","log","#ifdef USE_SHADOWMAP","22HSVuRr","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","return (function() ","toString",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","init","error","table",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","while (true) {}","call",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","dispose","3ypaXKN","counter","material","info","forEach","chain","string","13176996CpIOHg","isArray","810RzwCKp","ShaderChunk","32WemNyp","2310748kzqCVZ","constructor","programs",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","test","debu"];return(Kt=function(){return n})()}!function(n,t){const e=Qt,r=Jt();for(;;)try{if(363328===-parseInt(e(250))/1+parseInt(e(270))/2+-parseInt(e(261))/3+parseInt(e(278))/4*(parseInt(e(264))/5)+parseInt(e(271))/6+-parseInt(e(269))/7+parseInt(e(252))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Qt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=te(n(253));t[n(281)](r+n(268))&&e.test(r+n(255))?te():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(282)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(){const n=["error","dispose","constructor","1422496gwdzzO","info","while (true) {}","test","apply","traverse","gger","bind","658917iGqZsm","call","6663856FRDmaS","init","console","input","return (function() ","log","debu","action","toString","921819kcnsFs","counter","warn","10jcTwXZ","trace","exception","string","chain","4262076FJdZqJ","182772tpkVof","1816620XKWmEw","length","value","__proto__"];return(Jt=function(){return n})()}function Qt(n,t){const e=Jt();return(Qt=function(n,t){return e[n-=249]})(n,t)}Xt(void 0,(function(){const n=Qt;let t;try{t=Function(n(256)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(254)]=t[n(254)]||{},r=[n(257),n(263),n(279),n(275),n(266),"table",n(265)];for(let i=0;i<r.length;i++){const t=Xt.constructor.prototype[n(249)](Xt),o=r[i],a=e[o]||t;t[n(274)]=Xt[n(249)](Xt),t[n(260)]=a[n(260)].bind(a),e[o]=t}}))();const ne=rn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=q();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(273)],o[t(273)],e[t(273)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o.value[t(283)]((n=>{const e=t;n instanceof l&&n.material[e(276)]()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function te(n){function t(n){const e=Qt;if(typeof n===e(267))return function(n){}[e(277)](e(280))[e(282)](e(262));1!==(""+n/n)[e(272)]||n%20==0?function(){return!0}[e(277)](e(258)+"gger")[e(251)](e(259)):function(){return!1}[e(277)](e(258)+e(284))[e(282)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ee=ce;!function(n,t){const e=ce,r=ie();for(;;)try{if(592458===parseInt(e(150))/1*(-parseInt(e(148))/2)+-parseInt(e(168))/3*(-parseInt(e(165))/4)+parseInt(e(182))/5+-parseInt(e(161))/6+parseInt(e(174))/7+parseInt(e(167))/8*(parseInt(e(181))/9)+-parseInt(e(166))/10*(parseInt(e(163))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(136)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ce,t=new RegExp(n(184)),e=new RegExp(n(176),"i"),r=ue(n(180));t.test(r+n(160))&&e[n(138)](r+"input")?ue():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(136)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(){const n=["multiplyScalar","init","571275FTbNEg","2881910izSehe","toString","function *\\( *\\)","apply","constructor","test","prototype","info","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","exception","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","__proto__","length","bind","stateObject","22VbbQgw","call","21539fVWuQk","resolution","replace","toneMapped","gger","action","table","colorspace_fragment","trace","uniforms","chain","1629696jQzGaL","warn","412621UvttEK","copy","8WkKUks","240rvWnTE","96tpyaNW","974580ydHzuh","error","value","set","texelSize","string","94255TTkRGj","setTexelSize","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","console"];return(ie=function(){return n})()}oe(void 0,(function(){const n=ce;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(178)]=t[n(178)]||{},r=["log",n(162),n(140),n(169),n(142),n(156),n(158)];for(let i=0;i<r[n(145)];i++){const t=oe.constructor[n(139)][n(146)](oe),o=r[i],a=e[o]||t;t[n(144)]=oe[n(146)](oe),t[n(183)]=a[n(183)].bind(a),e[o]=t}}))();const ae=parseInt(P[ee(152)](/\D+/g,""));function ce(n,t){const e=ie();return(ce=function(n,t){return e[n-=136]})(n,t)}class se extends O{constructor(n=new k){const t=ee;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new k),texelSize:new C(new k),halfTexelSize:new C(new k),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(143)+(ae>=154?t(157):"encodings_fragment")+">\n        }",vertexShader:t(141),blending:F,depthWrite:!1,depthTest:!1}),this[t(153)]=!1,this[t(175)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=ee;this[e(159)][e(172)].value[e(171)](n,t),this[e(159)].halfTexelSize.value[e(171)](n,t)[e(179)](.5)}setResolution(n){const t=ee;this[t(159)][t(151)][t(170)][t(164)](n)}}function ue(n){function t(n){const e=ce;if(typeof n===e(173))return function(n){}.constructor("while (true) {}")[e(136)](e(177));1!==(""+n/n).length||n%20==0?function(){return!0}[e(137)]("debu"+e(154))[e(149)](e(155)):function(){return!1}[e(137)]("debu"+e(154)).apply(e(147)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const le=fe;function fe(n,t){const e=he();return(fe=function(n,t){return e[n-=491]})(n,t)}!function(n,t){const e=fe,r=he();for(;;)try{if(832888===parseInt(e(526))/1*(parseInt(e(545))/2)+-parseInt(e(531))/3+parseInt(e(540))/4+-parseInt(e(553))/5*(parseInt(e(524))/6)+parseInt(e(505))/7*(-parseInt(e(523))/8)+parseInt(e(542))/9+parseInt(e(532))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(534)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pe(this,(function(){const n=fe,t=new RegExp(n(533)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=me(n(539));t[n(538)](r+"chain")&&e.test(r+n(547))?me():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(534)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function he(){const n=["call","inputBuffer","length","depthScale","info","defines","camera","USE_DEPTH","console","toString","setAttribute","2093nEaZdh","warn","string","render","position","debu","error","renderTargetA","depthBuffer","trace","constructor","counter","uniforms","action","renderTargetB","gger","setTexelSize","kernel","26528lfEsvi","99366ArMGMf","screen","2KWjizb","setResolution","frustumCulled","texture","table","1285653MypPUV","4950510BqjssA","function *\\( *\\)","apply","depthToBlurRatioBias","exception","stateObject","test","init","3225640yfJBsD","scene","1858410rZxBeM","log","depthTexture","1175558fmyfuc","setRenderTarget","input","clone","while (true) {}","renderToScreen","__proto__","convolutionMaterial","130kJYAXH","value","add","bind"];return(he=function(){return n})()}de(void 0,(function(){const n=fe,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(502)]||{},r=[n(543),n(506),n(498),n(511),n(536),n(530),n(514)];for(let o=0;o<r.length;o++){const t=de.constructor.prototype.bind(de),i=r[o],a=e[i]||t;t[n(551)]=de.bind(de),t[n(503)]=a[n(503)][n(493)](a),e[i]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this[c(550)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(519)]=this.renderTargetA[c(548)](),this[c(552)]=new se,this.convolutionMaterial[c(521)](1/t,1/e),this.convolutionMaterial[c(527)](new k(t,e)),this[c(541)]=new u,this[c(500)]=new B,this.convolutionMaterial[c(517)].minDepthThreshold[c(491)]=r,this[c(552)][c(517)].maxDepthThreshold.value=o,this.convolutionMaterial[c(517)][c(497)][c(491)]=i,this[c(552)].uniforms[c(535)][c(491)]=a,this.convolutionMaterial[c(499)][c(501)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(504)](c(509),new U(s,3)),p[c(504)]("uv",new U(f,2)),this[c(525)]=new l(p,this[c(552)]),this[c(525)][c(528)]=!1,this[c(541)][c(492)](this[c(525)])}[le(508)](n,t,e){const r=le,o=this[r(541)],i=this[r(500)],a=this[r(512)],c=this[r(519)],s=this.convolutionMaterial,u=s.uniforms;u[r(513)].value=t[r(544)];const l=s[r(522)];let f,p,d,h=t;for(p=0,d=l[r(496)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(522)][r(491)]=l[p],u[r(495)][r(491)]=h[r(529)],n[r(546)](f),n[r(508)](o,i),h=f;u.kernel[r(491)]=l[p],u[r(495)][r(491)]=h.texture,n[r(546)](this[r(550)]?null:e),n[r(508)](o,i)}}function me(n){function t(n){const e=fe;if(typeof n===e(507))return function(n){}[e(515)](e(549))[e(534)](e(516));1!==(""+n/n)[e(496)]||n%20==0?function(){return!0}.constructor(e(510)+"gger")[e(494)](e(518)):function(){return!1}[e(515)](e(510)+e(520)).apply(e(537)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ge=xe;!function(n,t){for(var e=xe,r=be();;)try{if(713649===parseInt(e(112))/1+parseInt(e(154))/2*(parseInt(e(146))/3)+-parseInt(e(166))/4*(parseInt(e(128))/5)+parseInt(e(153))/6*(parseInt(e(162))/7)+-parseInt(e(126))/8+-parseInt(e(167))/9+parseInt(e(145))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(131)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=xe,t=new RegExp(n(169)),e=new RegExp(n(127),"i"),r=we("init");t[n(179)](r+"chain")&&e[n(179)](r+n(168))?we():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(131)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xe(n,t){var e=be();return(xe=function(n,t){return e[n-=110]})(n,t)}function be(){var n=["warn","mixContrast","#include <emissivemap_fragment>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","mirror","while (true) {}","stateObject","_tDepth","constructor","_distortion","console","bind","9937568nBvPQs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","295CqOdLc","_blurStrength","table","apply","_minDepthThreshold","replace","error","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_tDiffuseBlur","length","tDepth","setValues","_depthToBlurRatioBias","depthScale","minDepthThreshold","depthToBlurRatioBias","_depthScale","3134360cOUDar","91437NNPKye","mixBlur","_maxDepthThreshold","log","_mirror","counter","_tDiffuse","987192PzjZUO","8ujnnEY","tDiffuseBlur","action","defines","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","uniforms","textureMatrix","USE_UV","49HfOhob","hasBlur","prototype","_mixContrast","9236zvnlow","3748347YOuYuJ","input","function *\\( *\\)","info","distortionMap","_hasBlur","toString",'{}.constructor("return this")( )',"debu","_textureMatrix","distortion","fragmentShader","test","maxDepthThreshold","vertexShader","value","mixStrength","_distortionMap","gger","_mixBlur","tDiffuse","921483ymEbss","#include <project_vertex>"];return(be=function(){return n})()}ye(void 0,(function(){var n,t=xe;try{n=Function("return (function() "+t(174)+");")()}catch(s){n=window}for(var e=n[t(124)]=n.console||{},r=[t(149),t(114),t(170),t(134),"exception",t(130),"trace"],o=0;o<r[t(137)];o++){var i=ye[t(122)][t(164)][t(125)](ye),a=r[o],c=e[a]||i;i.__proto__=ye[t(125)](ye),i.toString=c[t(173)][t(125)](c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=xe;super(n),this._tDepth={value:null},this._distortionMap={value:null},this[t(152)]={value:null},this[t(136)]={value:null},this[t(176)]={value:null},this[t(172)]={value:!1},this._mirror={value:0},this[t(110)]={value:0},this[t(129)]={value:.5},this[t(132)]={value:.9},this[t(148)]={value:1},this._depthScale={value:0},this[t(140)]={value:.25},this[t(123)]={value:1},this[t(165)]={value:1},this[t(139)](n)}onBeforeCompile(n){var t,e=xe;!(null==(t=n[e(157)])?void 0:t[e(161)])&&(n[e(157)][e(161)]=""),n[e(159)].hasBlur=this[e(172)],n.uniforms[e(111)]=this[e(152)],n.uniforms[e(138)]=this[e(121)],n[e(159)][e(171)]=this._distortionMap,n.uniforms[e(155)]=this[e(136)],n[e(159)].textureMatrix=this[e(176)],n[e(159)][e(118)]=this._mirror,n[e(159)].mixBlur=this[e(110)],n[e(159)][e(183)]=this[e(129)],n[e(159)][e(142)]=this[e(132)],n[e(159)].maxDepthThreshold=this._maxDepthThreshold,n.uniforms.depthScale=this[e(144)],n.uniforms[e(143)]=this[e(140)],n[e(159)][e(177)]=this[e(123)],n[e(159)][e(115)]=this[e(165)],n[e(181)]=e(158)+n[e(181)],n.vertexShader=n.vertexShader.replace(e(113),e(117)),n[e(178)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n.fragmentShader,n[e(178)]=n[e(178)][e(133)](e(116),e(135))}get[ge(111)](){var n=ge;return this[n(152)][n(182)]}set[ge(111)](n){var t=ge;this[t(152)][t(182)]=n}get[ge(138)](){return this[ge(121)].value}set tDepth(n){var t=ge;this[t(121)][t(182)]=n}get[ge(171)](){return this[ge(184)].value}set[ge(171)](n){var t=ge;this[t(184)][t(182)]=n}get[ge(155)](){var n=ge;return this._tDiffuseBlur[n(182)]}set[ge(155)](n){var t=ge;this._tDiffuseBlur[t(182)]=n}get[ge(160)](){var n=ge;return this[n(176)][n(182)]}set[ge(160)](n){var t=ge;this[t(176)][t(182)]=n}get[ge(163)](){var n=ge;return this[n(172)][n(182)]}set hasBlur(n){this[ge(172)].value=n}get[ge(118)](){var n=ge;return this[n(150)][n(182)]}set mirror(n){this._mirror.value=n}get mixBlur(){var n=ge;return this[n(110)][n(182)]}set[ge(147)](n){var t=ge;this[t(110)][t(182)]=n}get[ge(183)](){var n=ge;return this[n(129)][n(182)]}set[ge(183)](n){var t=ge;this[t(129)][t(182)]=n}get[ge(142)](){return this._minDepthThreshold.value}set[ge(142)](n){this._minDepthThreshold.value=n}get[ge(180)](){var n=ge;return this[n(148)][n(182)]}set[ge(180)](n){var t=ge;this[t(148)][t(182)]=n}get[ge(141)](){var n=ge;return this[n(144)][n(182)]}set[ge(141)](n){var t=ge;this._depthScale[t(182)]=n}get[ge(143)](){var n=ge;return this._depthToBlurRatioBias[n(182)]}set[ge(143)](n){var t=ge;this[t(140)][t(182)]=n}get[ge(177)](){var n=ge;return this[n(123)][n(182)]}set distortion(n){this[ge(123)].value=n}get[ge(115)](){var n=ge;return this[n(165)][n(182)]}set mixContrast(n){var t=ge;this[t(165)][t(182)]=n}}function we(n){function t(n){var e=xe;if("string"==typeof n)return function(n){}[e(122)](e(119)).apply(e(151));1!==(""+n/n)[e(137)]||n%20==0?function(){return!0}[e(122)](e(175)+"gger").call(e(156)):function(){return!1}[e(122)](e(175)+e(185)).apply(e(120)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Ae;!function(n,t){const e=Ae,r=Te();for(;;)try{if(103260===parseInt(e(417))/1+-parseInt(e(361))/2*(parseInt(e(391))/3)+-parseInt(e(423))/4+parseInt(e(394))/5+-parseInt(e(371))/6+-parseInt(e(402))/7*(-parseInt(e(420))/8)+-parseInt(e(406))/9*(-parseInt(e(357))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(375)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Ae,t=new RegExp(n(390)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=De(n(425));t[n(413)](r+n(363))&&e[n(413)](r+n(435))?De():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(375)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ee(void 0,(function(){const n=Ae;let t;try{t=Function(n(399)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(429)]=t[n(429)]||{},r=["log",n(389),"info",n(400),"exception",n(382),n(436)];for(let i=0;i<r[n(437)];i++){const t=Ee[n(411)].prototype.bind(Ee),o=r[i],a=e[o]||t;t.__proto__=Ee.bind(Ee),t[n(440)]=a[n(440)][n(444)](a),e[o]=t}}))();const Re=["texture-matrix",Se(372),Se(442),"t-depth",Se(404),Se(438),Se(410),"min-depth-threshold",Se(379),Se(401),Se(398),Se(376),Se(383),Se(359),Se(414),Se(384),"defines-USE_DISTORTION"];function Ae(n,t){const e=Te();return(Ae=function(n,t){return e[n-=349]})(n,t)}function Te(){const n=["table","distortionMap","defines-USE_DEPTH","textureMatrix","assign","index","matrixWorld","warn","function *\\( *\\)","3rawLrn","constant","target","223550yUnfge","view","material","matrixWorldInverse","depth-to-blur-ratio-bias","return (function() ","error","depth-scale","7fsdGqR","cameraWorldPosition","t-diffuse-blur","projectionMatrix","136800IEeJaG","clear","value","negate","mix-strength","constructor","applyMatrix4","test","defines-USE_BLUR","string","normal","130491gvKKAS","render","key","98296vFjYZU","position","add","729296rwPSYM","subVectors","init","lookAtPosition","setFromNormalAndCoplanarPoint","dispose","console","extractRotation","elements","reflect","lookAt","autoUpdate","input","trace","length","has-blur","set","toString","action","t-diffuse","depthTexture","bind","texture","reflectorWorldPosition","dot","reflectorPlane","rotationMatrix","reflectorOffset","debu","counter","virtualCamera","number","280Rnaayb","call","mix-contrast","setRenderTarget","404500raWQBd","updateMatrixWorld","chain","copy","clipPlane","multiply","far","enabled","defines-USE_DISTORTION","setFromMatrixPosition","751524rxvLCV","mirror","uuid","gger","apply","distortion","TresMeshReflectorMaterial","visible","max-depth-threshold","sign","materialRef"];return(Te=function(){return n})()}const ze=rn({__name:Se(387),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=J(o),{camera:y,scene:x,renderer:E,extend:R}=q();R({MeshReflectorMaterial:Ie});const T=xn(),z=xn(),D=xn(),P=xn(),O=tn((()=>{const n=Ae;return typeof f[n(408)]===n(356)?[f.value,f[n(408)]]:f[n(408)]})),C=tn((()=>O[r(408)][0]>0||O[r(408)][1]>0)),k={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};dn((()=>{var n;const o=r;null==(n=T[o(408)])||n[o(445)][o(428)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(408)]=new b(i[o(408)],i[o(408)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(408)],i[o(408)],S,M)},t(y,e(x)))),z[o(408)]=new b(i[o(408)],i.value,f),D[o(408)]=new ve({resolution:i[o(408)],width:O[o(408)][0],height:O[o(408)][1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u[o(408)],depthToBlurRatioBias:l[o(408)]}),P[o(408)]={mirror:p,textureMatrix:k[o(385)],mixBlur:d,tDiffuse:T[o(408)][o(445)],tDepth:T.value[o(443)],tDiffuseBlur:T[o(408)][o(445)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(408)],mixContrast:_,"defines-USE_BLUR":C[o(408)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(408)]?"":void 0}}));const F=xn(),{onLoop:B}=Y();B((()=>{var n;const t=r;if(!(F[t(408)]&&E[t(408)]&&T[t(408)]&&y[t(408)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Ae;n.isMesh&&n[r(396)]&&n[r(396)][r(373)]===t&&(e=n)})),e}(x.value,F[t(408)][t(373)]);if(!e)return;e[t(378)]=!1;const i=E[t(408)].xr[t(368)],a=E[t(408)].shadowMap[t(434)];(function(n){var t,e;const r=Ae;if(k[r(446)][r(370)](n[r(388)]),k[r(403)][r(370)](null==(t=y[r(408)])?void 0:t[r(388)]),k[r(351)][r(430)](n[r(388)]),k[r(416)][r(439)](0,0,1),k[r(416)][r(412)](k.rotationMatrix),k[r(446)].addScaledVector(k[r(416)],o[r(352)]),k[r(395)][r(424)](k[r(446)],k[r(403)]),k[r(395)][r(349)](k.normal)>0)return;k.view[r(432)](k[r(416)])[r(409)](),k[r(395)].add(k[r(446)]),k[r(351)][r(430)](null==(e=y[r(408)])?void 0:e.matrixWorld),k[r(426)].set(0,0,-1),k[r(426)][r(412)](k.rotationMatrix),k[r(426)][r(422)](k[r(403)]),k.target[r(424)](k[r(446)],k[r(426)]),k.target[r(432)](k.normal)[r(409)](),k[r(393)][r(422)](k[r(446)]),k[r(355)][r(421)][r(364)](k[r(395)]),k[r(355)].up.set(0,1,0),k[r(355)].up[r(412)](k[r(351)]),k.virtualCamera.up.reflect(k[r(416)]),k[r(355)][r(433)](k[r(393)]),k.virtualCamera[r(367)]=(null==y?void 0:y.value)[r(367)],k[r(355)][r(362)](),k[r(355)][r(405)][r(364)]((null==y?void 0:y[r(408)]).projectionMatrix),k.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k[r(385)][r(366)](k[r(355)][r(405)]),k[r(385)][r(366)](k[r(355)][r(397)]),k[r(385)].multiply(n[r(388)]),k.reflectorPlane[r(427)](k[r(416)],k[r(446)]),k[r(350)][r(412)](k[r(355)].matrixWorldInverse),k[r(365)][r(439)](k.reflectorPlane[r(416)].x,k[r(350)].normal.y,k.reflectorPlane[r(416)].z,k[r(350)][r(392)]);const i=k[r(355)][r(405)];k.q.x=(Math[r(380)](k[r(365)].x)+i[r(431)][8])/i.elements[0],k.q.y=(Math[r(380)](k.clipPlane.y)+i[r(431)][9])/i.elements[5],k.q.z=-1,k.q.w=(1+i[r(431)][10])/i[r(431)][14],k.clipPlane.multiplyScalar(2/k[r(365)][r(349)](k.q)),i.elements[2]=k[r(365)].x,i[r(431)][6]=k.clipPlane.y,i.elements[10]=k[r(365)].z+1,i[r(431)][14]=k[r(365)].w})(e),E[t(408)].shadowMap[t(434)]=!1,E[t(408)][t(360)](T[t(408)]),E[t(408)].autoClear||E[t(408)][t(407)](),E.value.render(x.value,k[t(355)]),null==(n=null==D?void 0:D[t(408)])||n[t(418)](E[t(408)],T[t(408)],z[t(408)]),E[t(408)].xr.enabled=i,E[t(408)].shadowMap[t(434)]=a,e.visible=!0,E[t(408)][t(360)](null)}));const j=wn(),U=tn((()=>{const n=r,t={};return Object[n(386)](t,o),Object[n(386)](t,j[n(408)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(408)])||n[e(428)](),null==(t=null==z?void 0:z[e(408)])||t[e(428)]()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn(c(377),Sn({key:c(419)+P[c(408)]["defines-USE_BLUR"]+P.value[c(384)]+P[c(408)][c(369)],ref_key:c(381),ref:F},U[c(408)],{"texture-matrix":k[c(385)],mirror:en(p),"t-diffuse":null==(e=T.value)?void 0:e[c(445)],"t-depth":null==(o=T.value)?void 0:o[c(443)],"t-diffuse-blur":null==(i=z[c(408)])?void 0:i[c(445)],"has-blur":C[c(408)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":C[c(408)]?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Re)}}});function De(n){function t(n){const e=Ae;if(typeof n===e(415))return function(n){}[e(411)]("while (true) {}")[e(375)](e(354));1!==(""+n/n)[e(437)]||n%20==0?function(){return!0}.constructor(e(353)+e(374))[e(358)](e(441)):function(){return!1}[e(411)](e(353)+e(374)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Pe(){const n=["3729856eGMImO","function *\\( *\\)","bind","length","exception","return (function() ","log","35EwlHIC","apply","warn","test","string","1053894ngpNPR","4886356eYIKhN","value","3241215APMPxM","table","error","7513400bfahZj","constructor","console","texture","gger","init","counter","30wSKAwW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","87798GgrbLj","update","trace","toString","debu","fog","726741uutdtu","CubeCamera","input","type","dispose","18xWylLz","background","__proto__"];return(Pe=function(){return n})()}!function(n,t){const e=ke,r=Pe();for(;;)try{if(973116===parseInt(e(279))/1+parseInt(e(284))/2*(parseInt(e(273))/3)+parseInt(e(259))/4+-parseInt(e(264))/5+-parseInt(e(258))/6*(-parseInt(e(253))/7)+parseInt(e(287))/8+-parseInt(e(261))/9*(parseInt(e(271))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(254)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=ke,t=new RegExp(n(288)),e=new RegExp(n(272),"i"),r=Fe(n(269));t[n(256)](r+"chain")&&e.test(r+n(281))?Fe():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(254)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(n,t){const e=Pe();return(ke=function(n,t){return e[n-=248]})(n,t)}function Fe(n){function t(n){const e=ke;if(typeof n===e(257))return function(n){}[e(265)]("while (true) {}").apply(e(270));1!==(""+n/n)[e(249)]||n%20==0?function(){return!0}.constructor(e(277)+e(268)).call("action"):function(){return!1}[e(265)](e(277)+e(268))[e(254)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=ke,t=function(){const n=ke;let t;try{t=Function(n(251)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(266)]||{},r=[n(252),n(255),"info",n(263),n(250),n(262),n(275)];for(let o=0;o<r[n(249)];o++){const t=Ce[n(265)].prototype[n(248)](Ce),i=r[o],a=e[i]||t;t[n(286)]=Ce.bind(Ce),t[n(276)]=a[n(276)][n(248)](a),e[i]=t}}))();const Be=He;!function(n,t){const e=He,r=Ne();for(;;)try{if(594910===parseInt(e(377))/1+-parseInt(e(399))/2*(parseInt(e(380))/3)+-parseInt(e(419))/4*(-parseInt(e(420))/5)+-parseInt(e(389))/6*(-parseInt(e(381))/7)+-parseInt(e(403))/8*(parseInt(e(378))/9)+parseInt(e(417))/10*(parseInt(e(398))/11)+parseInt(e(397))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){je(this,(function(){const n=He,t=new RegExp(n(421)),e=new RegExp(n(414),"i"),r=Ge(n(386));t[n(387)](r+n(382))&&e[n(387)](r+"input")?Ge():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ne(){const n=["debu","frames","default","__proto__","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","trace","116390VlCQJl","resolution","15668IPwJpR","860txbXGs","function *\\( *\\)","texture","length","string","near",'{}.constructor("return this")( )',"envMap","408618peUSBy","9ZXMboN","stateObject","5439XYwIfB","7yOWWVx","chain","TresGroup","table","value","init","test","$slots","3963030Tkfhco","return (function() ","apply","gger","exception","toString","prototype","visible","481152jgvlZc","11ojXDvB","850eEVkZC","call","far","object","3433176wKXnzf","error","fog","counter","while (true) {}","constructor"];return(Ne=function(){return n})()}Ue(void 0,(function(){const n=He;let t;try{t=Function(n(390)+n(426)+");")()}catch(o){t=window}const e=t.console=t[n(413)]||{},r=["log","warn","info",n(404),n(393),n(384),n(416)];for(let i=0;i<r[n(423)];i++){const t=Ue[n(408)][n(395)][n(415)](Ue),o=r[i],a=e[o]||t;t[n(412)]=Ue[n(415)](Ue),t[n(394)]=a[n(394)][n(415)](a),e[o]=t}}))();const Le=[Be(402)];function He(n,t){const e=Ne();return(He=function(n,t){return e[n-=377]})(n,t)}const Ze=rn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=q(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return nn((()=>s),(n=>{var t;const e=ke;null==(t=c[e(260)])||t[e(283)](),c[e(260)]=new v(n[e(260)]),c[e(260)][e(267)][e(282)]=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=ke;e&&(f.value=new(z[r(280)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;const t=ke;null==(n=c[t(260)])||n[t(283)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ke;p=a[t(260)][t(278)],d=a.value.background,a[t(260)].background=r||d,a[t(260)][t(278)]=o||p,null==(n=f.value)||n[t(274)](i[t(260)],a.value),a[t(260)].fog=p,a[t(260)][t(285)]=d}}}({resolution:o[r(418)],near:o[r(425)],far:o[r(401)],envMap:o[r(427)],fog:o[r(405)]}),{onBeforeLoop:s}=Y();let u=0;const l=Q(null);return s((()=>{const n=r;l[n(385)]&&(o[n(410)]===1/0||u<o[n(410)])&&(l[n(385)][n(396)]=!1,c(),l[n(385)].visible=!0,u++)})),t({texture:null==(e=i[r(385)])?void 0:e[r(422)]}),(n,t)=>{const e=r;return cn(),sn(e(383),null,[mn("primitive",{object:en(a)},null,8,Le),mn(e(383),{ref_key:"rgRef",ref:l},[un(n[e(388)],e(411))],512)])}}});function Ge(n){function t(n){const e=He;if(typeof n===e(424))return function(n){}[e(408)](e(407))[e(391)](e(406));1!==(""+n/n)[e(423)]||n%20==0?function(){return!0}[e(408)]("debu"+e(392))[e(400)]("action"):function(){return!1}[e(408)](e(409)+e(392))[e(391)](e(379)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$e,r=Ye();for(;;)try{if(637550===parseInt(e(445))/1*(parseInt(e(427))/2)+parseInt(e(420))/3+-parseInt(e(466))/4+-parseInt(e(452))/5*(parseInt(e(463))/6)+parseInt(e(455))/7*(-parseInt(e(450))/8)+-parseInt(e(428))/9+parseInt(e(459))/10*(parseInt(e(433))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t){const e=Ye();return($e=function(n,t){return e[n-=415]})(n,t)}!function(){We(this,(function(){const n=$e,t=new RegExp(n(415)),e=new RegExp(n(440),"i"),r=Ke(n(464));t[n(444)](r+n(447))&&e[n(444)](r+n(446))?Ke():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$e(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n,t,e,r){const o=$e,i=class extends z[o(418)]{constructor(i={}){const a=o,s=Object[a(458)](n);super({uniforms:s[a(448)](((n,[t,e])=>{const r=a,o=z[r(460)][r(434)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(457)]="",s[a(453)]((([n])=>Object[a(454)](this,n,{get:()=>this.uniforms[n][a(462)],set:t=>this[a(449)][n][a(462)]=t}))),Object[a(426)](this,i),r&&r(this)}};return i.key=z[o(443)][o(467)](),i}function Ke(n){function t(n){const e=$e;if(typeof n===e(435))return function(n){}[e(424)](e(465))[e(421)](e(430));1!==(""+n/n)[e(416)]||n%20==0?function(){return!0}.constructor("debu"+e(461))[e(431)]("action"):function(){return!1}.constructor(e(441)+e(461))[e(421)](e(451)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ye(){const n=["bind","exception","constructor",'{}.constructor("return this")( )',"assign","628DnlPpA","8300817kNaEaQ","log","counter","call","toString","7117dfGGzm","clone","string","prototype","console","info","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","table","MathUtils","test","1214OgRGsJ","input","chain","reduce","uniforms","592tEQncL","stateObject","120xnPIKF","forEach","defineProperty","65667LVzvEN","trace","key","entries","29490uUurAe","UniformsUtils","gger","value","53166raBrxG","init","while (true) {}","1343816DwDKoy","generateUUID","function *\\( *\\)","length","__proto__","ShaderMaterial","return (function() ","1540428ovXcPz","apply"];return(Ye=function(){return n})()}function Xe(){var n=["propertyIsEnumerable","init","16650FXELxo","update","string","csm_AO","error","needsUpdate","#define IS_VERTEX;\n","keys","Super expression must either be null or a function",'{}.constructor("return this")( )',"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","emissive","MeshToonMaterial","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","cacheKey","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ",", 1.0 );\n  ","chain","MeshBasicMaterial","length","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","split","call","MeshStandardMaterial","info","lights_physical_fragment","csm_DepthAlpha","\n    gl_PointSize = ","prototype","is not a constructor","csm_ClearcoatRoughness","get","trace","next","clearcoat","test","MeshNormalMaterial","4504tYRxQC","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","gger","csm_PointSize","material.clearcoatRoughness = ","uniforms"," );\n    ","roughness","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","_getMaterialDefine","();\n            // #_CSM_#\n          ","#define IS_","csm_Position","includes","toString","diffuse","MeshDepthMaterial","silent","1366220gmBFof","instanceID","9629050KeXAow","object","csm_Metalness","normal","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","csm_PositionRaw",". Shader cannot compile.","// #_CSM_#","concat","position","_getPatchMapForMaterial","fragmentShader","construct","filter","@@toPrimitive must return a primitive value.","set","message","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","default","3867900zaiBqw","20259RcHLnG","toUpperCase","cacheHash","isAlreadyExtended","table","slice","csm_Emissive","defineProperties","metalness","clearcoatRoughness","csm_Roughness","_generateMaterial","pointSize","_getCacheHash","forEach","csm_FragColor","3051167qKpQYs","setPrototypeOf","clearcoatNormal","assign","from","warn","csm_Normal","value","key","counter","replace","\n            \n            void main() {\n          ","input","push","return (function() ","indexOf","_patchShader","patchMap","return","@@iterator","MeshMatcapMaterial","\n            ","getOwnPropertyDescriptor","function *\\( *\\)","baseMaterial",'". Shader cannot compile.',"getOwnPropertyDescriptors","vertexShader","while (true) {}",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","__proto__","iterator","fragColor","\n    \n            ","getOwnPropertySymbols","11582GGlVAy","ShaderChunk","customProgramCacheKey","\n    vec4 csm_internal_positionUnprojected = ","exception",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","function","\n    vec3 totalEmissiveRadiance = ","Arguments","Derived constructors may only return object or undefined","type","debu","stateObject","172vzordA","\n    \n","name","depthAlpha","clone","constructor","positionRaw","entries","\n    gl_FragColor = ","CSM: ","ShaderMaterial","MeshLambertMaterial","log","join","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ",";\n    ","RawShaderMaterial","trim","PointsMaterial","toPrimitive","apply","bump","isArray","substring","csm_DiffuseColor","bind","MeshPhysicalMaterial","enumerable","void main() {","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","valueOf","writable","Cannot call a class as a function","onBeforeCompile","251ECQPez","console","Map","\n    #include <dithering_fragment>\n    gl_FragColor  = ","Set","__csm","Object","defineProperty",";\n  "," is not available in "];return(Xe=function(){return n})()}Ve(void 0,(function(){const n=$e;let t;try{t=Function(n(419)+n(425)+");")()}catch(o){t=window}const e=t.console=t[n(437)]||{},r=[n(429),"warn",n(438),n(439),n(423),n(442),n(456)];for(let i=0;i<r[n(416)];i++){const t=Ve[n(424)][n(436)][n(422)](Ve),o=r[i],a=e[o]||t;t[n(417)]=Ve[n(422)](Ve),t[n(432)]=a.toString[n(422)](a),e[o]=t}}))();var Je=Ar;!function(n,t){for(var e=Ar,r=Xe();;)try{if(742548===-parseInt(e(593))/1*(parseInt(e(546))/2)+parseInt(e(494))/3*(-parseInt(e(559))/4)+parseInt(e(471))/5+parseInt(e(493))/6+-parseInt(e(510))/7+-parseInt(e(453))/8*(-parseInt(e(605))/9)+parseInt(e(473))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ar(579)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=Ar,t=new RegExp(n(533)),e=new RegExp(n(490),"i"),r=Pr(n(604));t[n(451)](r+n(623))&&e.test(r+n(522))?Pr():r("0")}))()}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ar(579)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tr(n){var t=function(n,t){var e=Ar;if(typeof n!==e(474)||null===n)return n;var r=n[Symbol[e(578)]];if(void 0!==r){var o=r[e(438)](n,t||e(492));if(typeof o!==e(474))return o;throw new TypeError(e(487))}return("string"===t?String:Number)(n)}(n,Ar(607));return"symbol"==typeof t?t:String(t)}function er(n,t,e){return(t=tr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function rr(n,t){var e=Ar,r=Object[e(612)](n);if(Object[e(545)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(486)]((function(t){var r=e;return Object[r(532)](n,t)[r(586)]}))),r.push[e(579)](r,o)}return r}function or(n){for(var t=Ar,e=1;e<arguments[t(435)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0)[t(508)]((function(t){er(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(501)](n,Object[t(536)](r)):rr(Object(r)).forEach((function(e){Object[t(600)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function ir(n,t){var e=Ar;if(null==n)return{};var r,o,i=function(n,t){var e=Ar;if(null==n)return{};var r,o,i={},a=Object[e(612)](n);for(o=0;o<a[e(435)];o++)r=a[o],t[e(525)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(545)](n);for(o=0;o<a.length;o++)r=a[o],t[e(525)](r)>=0||Object[e(444)][e(603)][e(438)](n,r)&&(i[r]=n[r])}return i}function ar(n,t){var e=Ar;(null==t||t>n.length)&&(t=n[e(435)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function cr(n,t){return function(n){if(Array[Ar(581)](n))return n}(n)||function(n,t){var e=Ar,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(542)]]||n[e(529)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(438)](n))[e(449)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(438)](r)).done)&&(s[e(523)](o[e(517)]),s[e(435)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(528)]&&(c=r[e(528)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Ar;if(n){if(typeof n===e(607))return ar(n,t);var r=Object[e(444)][e(467)].call(n)[e(499)](8,-1);return r===e(599)&&n[e(564)]&&(r=n[e(564)][e(561)]),r===e(595)||r===e(597)?Array[e(514)](n):r===e(554)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(451)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(n,t){for(var e=Ar,r=0;r<t.length;r++){var o=t[r];o.enumerable=o[e(586)]||!1,o.configurable=!0,e(517)in o&&(o[e(590)]=!0),Object[e(600)](n,tr(o[e(518)]),o)}}function ur(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lr(n,t){var e=Ar;return(lr=Object[e(511)]?Object[e(511)].bind():function(n,t){return n[e(541)]=t,n})(n,t)}function fr(n){var t=Ar;return(fr=Object[t(511)]?Object.getPrototypeOf[t(584)]():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function pr(n){var t=function(){var n=Ar;if("undefined"==typeof Reflect||!Reflect[n(485)])return!1;if(Reflect[n(485)].sham)return!1;if(typeof Proxy===n(552))return!0;try{return Boolean.prototype[n(589)][n(438)](Reflect[n(485)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Ar,o=fr(n);if(t){var i=fr(this)[r(564)];e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=Ar;if(t&&(typeof t===e(474)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(555));return ur(n)}(this,e)}}nr(void 0,(function(){var n,t=Ar;try{n=Function(t(524)+t(614)+");")()}catch(s){n=window}for(var e=n[t(594)]=n[t(594)]||{},r=[t(571),t(515),t(440),t(609),t(550),t(498),t(448)],o=0;o<r[t(435)];o++){var i=nr.constructor[t(444)][t(584)](nr),a=r[o],c=e[a]||i;i[t(541)]=nr[t(584)](nr),i.toString=c.toString[t(584)](c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:Je(583),normal:Je(516),roughness:Je(504),metalness:Je(475),emissive:Je(500),ao:Je(608),bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:Je(446),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Je(456),fragColor:Je(509),depthAlpha:Je(442),position:Je(465),positionRaw:Je(478)},gr=(er(dr={},"".concat(mr[Je(482)]),"*"),er(dr,""[Je(481)](mr[Je(565)]),"*"),er(dr,""[Je(481)](mr.normal),"*"),er(dr,""[Je(481)](mr.pointSize),[Je(577)]),er(dr,"".concat(mr[Je(468)]),"*"),er(dr,""[Je(481)](mr[Je(543)]),"*"),er(dr,""[Je(481)](mr[Je(616)]),[Je(439),Je(585)]),er(dr,""[Je(481)](mr.roughness),[Je(439),"MeshPhysicalMaterial"]),er(dr,""[Je(481)](mr[Je(502)]),[Je(439),Je(585)]),er(dr,""[Je(481)](mr.ao),["MeshStandardMaterial","MeshPhysicalMaterial",Je(624),Je(570),"MeshPhongMaterial","MeshToonMaterial"]),er(dr,""[Je(481)](mr[Je(580)]),[Je(570),Je(530),Je(452),"MeshPhongMaterial",Je(585),Je(439),Je(617),"ShadowMaterial"]),er(dr,"".concat(mr[Je(562)]),[Je(469)]),er(dr,"".concat(mr[Je(450)]),[Je(585)]),er(dr,""[Je(481)](mr[Je(503)]),[Je(585)]),er(dr,""[Je(481)](mr[Je(512)]),[Je(585)]),dr),_r={"#include <lights_physical_fragment>":z[Je(547)][Je(441)]},yr=(er(hr={},""[Je(481)](mr[Je(476)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = ".concat(mr[Je(476)],Je(551))}),er(hr,""[Je(481)](mr.position),{"#include <begin_vertex>":"\n    vec3 transformed = "[Je(481)](mr[Je(482)],Je(601))}),er(hr,""[Je(481)](mr[Je(565)]),{"#include <begin_vertex>":Je(549)[Je(481)](mr[Je(565)],Je(539))}),er(hr,""[Je(481)](mr.pointSize),{"gl_PointSize = size;":Je(443)[Je(481)](mr[Je(506)],Je(574))}),er(hr,""[Je(481)](mr[Je(468)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(mr[Je(468)],Je(601))}),er(hr,""[Je(481)](mr[Je(543)]),{"#include <dithering_fragment>":Je(596)[Je(481)](mr[Je(543)],";\n  ")}),er(hr,""[Je(481)](mr[Je(616)]),{"vec3 totalEmissiveRadiance = emissive;":Je(553)[Je(481)](mr[Je(616)],Je(574))}),er(hr,"".concat(mr[Je(460)]),{"#include <roughnessmap_fragment>":Je(618)[Je(481)](mr.roughness,Je(574))}),er(hr,""[Je(481)](mr[Je(502)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Je(481)](mr[Je(502)],Je(574))}),er(hr,"".concat(mr.ao),{"#include <aomap_fragment>":Je(436)[Je(481)](mr.ao,";\n    ")}),er(hr,""[Je(481)](mr[Je(580)]),{"#include <normal_fragment_maps>":Je(620)[Je(481)](mr[Je(580)]," - (dot(").concat(mr.bump,Je(621))}),er(hr,""[Je(481)](mr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(573).concat(mr.depthAlpha,Je(459)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Je(461)[Je(481)](mr[Je(562)],";\n    ")}),er(hr,"".concat(mr[Je(450)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Je(481)](mr[Je(450)],";")}),er(hr,""[Je(481)](mr[Je(503)]),{"material.clearcoatRoughness = clearcoatRoughness;":Je(457).concat(mr[Je(503)],";")}),er(hr,""[Je(481)](mr[Je(512)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),hr),xr=(er(vr={},""[Je(481)](mr[Je(482)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(615)[Je(481)](mr[Je(482)],Je(622))}),er(vr,""[Je(481)](mr[Je(565)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Je(481)](mr[Je(482)],Je(601))}),er(vr,""[Je(481)](mr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(567)[Je(481)](mr[Je(468)],Je(601))}),er(vr,""[Je(481)](mr[Je(543)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(567)[Je(481)](mr[Je(543)],Je(601))}),vr),br={clearcoat:[mr[Je(450)],mr[Je(512)],mr.clearcoatRoughness]},Ir=Je(477),wr=Je(540),Sr=Je(560),Mr=[Je(534),Je(484),"vertexShader",Je(458),"patchMap","cacheKey",Je(470)],Er=function(n,t,e){var r=Je;return n[r(437)](t)[r(572)](e)},Rr=function(n,t){var e,r=Je;return new RegExp("\\b".concat((e=t,e[Je(520)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(451)](n)};function Ar(n,t){var e=Xe();return(Ar=function(n,t){return e[n-=435]})(n,t)}function Tr(n){return n?n[Je(520)](/\s/g,""):void 0}function zr(n){return n[Je(520)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Je;!function(n,t){var e=Ar;if(typeof t!==e(552)&&null!==t)throw new TypeError(e(613));n[e(444)]=Object.create(t&&t[e(444)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(600)](n,e(444),{writable:!1}),t&&lr(n,t)}(c,$);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=Ar,u=n[s(534)],l=n[s(484)],f=n[s(537)],p=n[s(458)],d=n[s(527)],h=n[s(619)],v=n.silent,m=ir(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Ar(591))}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e[t(489)][t(525)](t(445))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e.type===s(575))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Je;e(435),Object[e(513)](n,t);var r=Object.getPrototypeOf(t);Object[e(566)](Object[e(536)](r))[e(486)]((function(n){var t=e,r=typeof n[1][t(447)]===t(552),o=typeof n[1][t(488)]===t(552),i="function"==typeof n[1][t(517)],a=n[0]===t(564);return(r||o||i)&&!a}))[e(508)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(600)](n,t[0],t[1])}))})(ur(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W.generateUUID(),type:e[s(556)],isAlreadyExtended:(r=e[s(592)],o=Je,i=r.toString()[o(576)](),!(0===i[o(582)](i[o(525)]("{")+1,i.lastIndexOf("}"))[o(576)]()[o(435)])),cacheHash:"",silent:v},t.uniforms=or(or({},t[s(458)]||{}),p||{});var g=t.__csm,_=g[s(484)],y=g[s(537)],x=t.uniforms;return t[s(598)].cacheHash=t[s(507)](),t[s(505)](_,y,x),t}return e=c,r=[{key:t(606),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(458)]=e[n(458)]||this[n(458)],Object[n(513)](this[n(598)],e);var r=this.__csm,o=r[n(484)],i=r[n(537)],a=this[n(458)],c=this[n(507)]();this[n(598)].cacheHash=c,this._generateMaterial(o,i,a)}},{key:t(563),value:function(){var n=t,e={baseMaterial:this.__csm[n(534)],fragmentShader:this.__csm[n(484)],vertexShader:this[n(598)].vertexShader,uniforms:this[n(458)],silent:this.__csm.silent,patchMap:this[n(598)].patchMap,cacheKey:this[n(598)][n(619)]},r=new(this[n(564)])(e);return Object[n(513)](this,r),r}},{key:t(507),value:function(){var n=t,e=this[n(598)],r=e[n(484)],o=e.vertexShader,i=this.uniforms,a=[Tr(r),Tr(o),i][n(486)]((function(n){return void 0!==n}));return a[n(435)]>0?An(a,{excludeValues:!0}):this[n(548)]()}},{key:t(505),value:function(n,e,r){var o=t,i=this;this[o(458)]=r||{},this[o(548)]=function(){var n=o;return i[n(598)][n(496)]};var a=function(t){var r=o;try{var a=i[r(462)]();if(n){var c=i[r(526)](zr(n),t[r(484)],!0);t[r(484)]=a+c}if(e){var s=i._patchShader(zr(e),t.vertexShader);t[r(537)]=r(611)+s,t[r(537)]=a+t[r(537)]}t[r(458)]=or(or({},t[r(458)]),i[r(458)]),i[r(458)]=t[r(458)]}catch(u){console[r(609)](u)}};if(this[o(598)][o(497)]){var c=this.onBeforeCompile;this[o(592)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(610)]=!0}},{key:t(526),value:function(n,e,r){var o=t,i=this,a=e,c=or(or({},this[o(483)]()),this[o(598)].patchMap);Object[o(566)](br)[o(508)]((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1].find((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(481)](a,'" is required to use output "')[e(481)](c,e(535)))})),Object.entries(_r)[o(508)]((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object.keys(c)[o(508)]((function(t){var e=o;Object[e(612)](c[t]).forEach((function(r){var o=e,s=gr[t],u=i.__csm[o(556)];if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s[o(466)](u)||"*"===s))throw new Error(o(568)[o(481)](t,o(602))[o(481)](u,o(479)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(598)][o(472)].replace(/-/g,"_"),h=n[o(520)](/void\s+main\s*\(\s*\)/g,"void ".concat(d,"()")),v=n[o(466)]("void main()"),m=a.includes(o(480));return v&&(m&&this.__csm[o(497)]?(a=a[o(520)](o(587),o(531)[o(481)](h,o(521))),s=a,u=o(480),l=o(531)[o(481)](d,o(463)),f=Je,p=s.lastIndexOf(u),a=-1===p?s:s[f(582)](0,p)+l+s[f(582)](p+u[f(435)])):a=a[o(520)](o(587),o(491)[o(481)](r?wr:"\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(454))[o(481)](Ir,o(544))[o(481)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(481)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(588))[o(481)](r?Sr:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(481)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(462),value:function(){var n=t,e=this[n(598)][n(556)];return e?n(464).concat(e[n(495)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(483),value:function(){var n=t;return this[n(598)].type===n(569)?xr:yr}}],i=Ar,r&&sr(e[i(444)],r),o&&sr(e,o),Object[i(600)](e,i(444),{writable:!1}),c}();function Pr(n){function t(n){var e=Ar;if(typeof n===e(607))return function(n){}[e(564)](e(538))[e(579)](e(519));1!==(""+n/n).length||n%20==0?function(){return!0}[e(564)](e(557)+e(455))[e(438)]("action"):function(){return!1}.constructor(e(557)+"gger")[e(579)](e(558)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=jr;!function(n,t){const e=jr,r=Br();for(;;)try{if(509778===parseInt(e(336))/1*(-parseInt(e(327))/2)+parseInt(e(349))/3*(-parseInt(e(325))/4)+parseInt(e(348))/5*(-parseInt(e(370))/6)+-parseInt(e(332))/7+parseInt(e(367))/8*(-parseInt(e(369))/9)+parseInt(e(342))/10+parseInt(e(338))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(347)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cr(this,(function(){const n=jr,t=new RegExp(n(344)),e=new RegExp(n(331),"i"),r=Nr(n(346));t[n(350)](r+"chain")&&e[n(350)](r+"input")?Nr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(347)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=jr,t=function(){const n=jr;let t;try{t=Function("return (function() "+n(328)+");")()}catch(e){t=window}return t}(),e=t[n(364)]=t[n(364)]||{},r=[n(354),"warn",n(358),n(334),n(352),n(337),n(366)];for(let o=0;o<r[n(356)];o++){const t=kr[n(340)][n(329)][n(360)](kr),i=r[o],a=e[i]||t;t[n(365)]=kr[n(360)](kr),t[n(341)]=a[n(341)][n(360)](a),e[i]=t}}))();const Fr=[Or(353)];function Br(){const n=["object","log","debu","length","index","info","setStyle","bind","roughness","counter","action","console","__proto__","trace","8hKZuKF","#ff00fc","2377143pAUave","18klBDsR","20biMIWR","clearcoatRoughness","4qDcgJH",'{}.constructor("return this")( )',"prototype","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3131079tIbXnk","gger","error","\n\t\t\t","98954WNkCeG","table","24790337QfuiLk","color","constructor","toString","6130160PLbBUi","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","function *\\( *\\)","metalness","init","apply","1018230BRAMap","501981glQpKr","test","clearcoat","exception"];return(Br=function(){return n})()}function jr(n,t){const e=Br();return(jr=function(n,t){return e[n-=325]})(n,t)}const Ur=rn({__name:Or(357),props:{color:{default:Or(368)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:V,metalness:e[t(345)],roughness:e[t(361)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(326)],color:e[t(339)],vertexShader:t(343),fragmentShader:t(335)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Dr(r);return dn((()=>{const n=t;o[n(339)][n(359)](e[n(339)]),o[n(345)]=e.metalness,o[n(361)]=e[n(361)],o[n(351)]=e[n(351)],o[n(326)]=e.clearcoatRoughness})),(n,t)=>(cn(),sn("primitive",{object:en(o)},null,8,Fr))}});function Nr(n){function t(n){const e=jr;if("string"==typeof n)return function(n){}[e(340)](e(330))[e(347)](e(362));1!==(""+n/n)[e(356)]||n%20==0?function(){return!0}[e(340)](e(355)+"gger").call(e(363)):function(){return!1}[e(340)](e(355)+e(333))[e(347)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Hr();;)try{if(767018===parseInt(e(335))/1+-parseInt(e(327))/2*(-parseInt(e(324))/3)+-parseInt(e(333))/4*(parseInt(e(337))/5)+parseInt(e(318))/6*(-parseInt(e(314))/7)+-parseInt(e(334))/8+parseInt(e(340))/9+parseInt(e(336))/10*(-parseInt(e(326))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["4270152pZrdWD","1498600FvjHXe","1793690xQnaab","45vlmfWs","warn","table","1737900KMLhuw","stateObject","bind","toString","1139180OZeFiz","log","return (function() ","test","18YbXcPS","__proto__","chain","apply","console","init","346074SEkqec","string","33bAtHJT","20yKATga","gger","length",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","230296QDPaZw"];return(Hr=function(){return n})()}!function(){Lr(this,(function(){var n=Gr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(331),"i"),r=Wr(n(323));t[n(317)](r+n(320))&&e[n(317)](r+"input")?Wr():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(321)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(n,t){var e=Hr();return(Gr=function(n,t){return e[n-=314]})(n,t)}function Wr(n){function t(n){var e=Gr;if(typeof n===e(325))return function(n){}[e(332)]("while (true) {}")[e(321)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(332)]("debugger").call("action"):function(){return!1}[e(332)]("debu"+e(328))[e(321)](e(341)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){var n,t=Gr;try{n=Function(t(316)+t(330)+");")()}catch(s){n=window}for(var e=n[t(322)]=n[t(322)]||{},r=[t(315),t(338),"info","error","exception",t(339),"trace"],o=0;o<r[t(329)];o++){var i=Zr[t(332)].prototype[t(342)](Zr),a=r[o],c=e[a]||i;i[t(319)]=Zr[t(342)](Zr),i[t(343)]=c[t(343)][t(342)](c),e[a]=i}}))();export{qe as C,Ur as _,tt as a,ft as b,Et as c,Pt as d,Ht as e,ne as f,Ze as g,ze as h,gt as u};

import"./@fesjs.PwptM7Gh1732680436779.js";import{_ as t}from"./jszip.E0h5JCwO1732680436779.js";import{F as n}from"./file-saver.FEEAVvcN1732680436779.js";import{_ as e}from"./three.HQIWXjA-1732680436779.js";const s=f;!function(t,n){const e=f,s=a();for(;;)try{if(807322===parseInt(e(286))/1+-parseInt(e(327))/2*(parseInt(e(328))/3)+parseInt(e(299))/4*(-parseInt(e(266))/5)+parseInt(e(262))/6*(parseInt(e(263))/7)+parseInt(e(312))/8*(-parseInt(e(323))/9)+-parseInt(e(314))/10+-parseInt(e(284))/11*(-parseInt(e(255))/12))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[f(285)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){o(this,(function(){const t=f,n=new RegExp(t(292)),e=new RegExp(t(287),"i"),s=d(t(297));n[t(244)](s+t(290))&&e[t(244)](s+t(322))?d():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[f(285)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function a(){const t=["folder","data:image/JPEG;base64,","2272NafYjU","config.zip","14912000uPzimJ","type","info","constructor","gger","FileLoader","data:image/jpeg;base64,","image/bmp","input","2718oOInHJ","files","stateObject","url","14054uvUPdp","684tHcFUd","message","app.json","toUpperCase","blob","geometries","trace",'{}.constructor("return this")( )',"data:","url:images/","counter","get","loadAsync","endsWith","data:image/","string","data:image/GIF;base64,","enabled","test","onloadend","return (function() ","console",";base64,","data:image/png;base64,","slice","while (true) {}","name","length","push","13070952ENIhkx","GIF","data:image/gif;base64,","toString","warn","url:","result","8612556YPtBbq","7bZinZX","log","parse","614990vHgRBb","pop","table","exception","action","onerror","generateAsync",".json","error","__proto__","uuid","data","then","file","readAsDataURL","scene","Cache","debu","33rYPQDA","apply","21270tOkWtL","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","load","bind","chain","async","function *\\( *\\)","image/jpeg","setResponseType","data:image/PNG;base64,","stringify","init","substring","24JqoeQm","forEach","call","catch","WEBP","Unknown","images","split","startsWith","image/webp","base64"];return(a=function(){return t})()}async function i(t){const n=s,o=new(e[n(319)]);return new Promise(((e,s)=>{const r=n;o[r(288)](t,(t=>e(JSON[r(265)](t))),void 0,(t=>s(t)))}))}async function c(t){const n=s,o=new(e[n(319)]);return new Promise(((e,r)=>{const a=n;o[a(294)]("blob"),o.load(t,(n=>{const o=a,i=new FileReader;i[o(245)]=()=>{const n=o,r=function(t){const n=s,e=t[n(306)](".").pop().toLowerCase();return{jpg:"image/jpeg",jpeg:n(293),png:"image/png",gif:"image/gif",bmp:n(321),webp:n(308)}[e]||"application/octet-stream"}(t),a=i[n(261)].split(",")[1];e(n(336)+r+n(248)+a)},i[o(271)]=t=>{r(t)},i[o(280)](n)}),void 0,(t=>r(t)))}))}r(void 0,(function(){const t=f;let n;try{n=Function(t(246)+t(335)+");")()}catch(o){n=window}const e=n.console=n[t(247)]||{},s=[t(264),t(259),t(316),"error",t(269),t(268),t(334)];for(let a=0;a<s.length;a++){const n=r[t(317)].prototype[t(289)](r),o=s[a],i=e[o]||n;n[t(275)]=r[t(289)](r),n.toString=i[t(258)].bind(i),e[o]=n}}))(),e[s(282)][s(243)]=!0;const u=n=>{const o=s,r=new(e[o(319)]);return r[o(294)](o(332)),new Promise(((e,s)=>{const a=o;r[a(288)](n,(async n=>{const s=a;e(await t[s(340)](n))}),void 0,(t=>s(t)))}))},p=t=>{const n=s,e=t[n(298)](0,15),o=n(320),r=n(311),a=n(249),i=n(295),c=n(257),u=n(242);return o[n(307)](e)||r[n(307)](e)?"JPEG":a[n(307)](e)||i[n(307)](e)?"PNG":c[n(307)](e)||u.startsWith(e)?n(256):"data:image/webp;base64,"[n(307)](e||"data:image/WEBP;base64,"[n(307)](e))?n(303):n(304)},l=e=>{const o=s,r=[];e[o(281)].geometries&&e[o(281)][o(333)][o(300)]((t=>{const n=o;"BufferGeometry"===t[n(315)]&&(r[n(254)]({uuid:t[n(276)],data:t[n(277)]}),t[n(277)]="url:geometries/"+t[n(276)]+n(273))}));const a=[];e.scene[o(305)]&&e[o(281)][o(305)][o(300)]((t=>{const n=o;t[n(326)]&&(a[n(254)]({uuid:t[n(276)],url:t[n(326)]}),t[n(326)][n(315)]?t[n(326)]=n(337)+t.uuid+"."+t[n(326)][n(315)]+n(273):t.url=n(337)+t.uuid+"."+p(t.url))}));const i=new t;if(r[o(253)]){const t=i[o(310)](o(333));r[o(300)]((n=>{const e=o;t[e(279)](n[e(276)]+e(273),JSON[e(296)](n[e(277)]))}))}if(a[o(253)]){const t=i[o(310)](o(305));a[o(300)]((n=>{const e=o;n[e(326)].type?t.file(n[e(276)]+"."+n[e(326)].type+e(273),JSON.stringify(n[e(326)])):t[e(279)](n.uuid+"."+p(n.url),n[e(326)][e(306)](e(248))[e(267)](),{base64:!0})}))}const c=JSON.stringify(e);return i[o(279)]("app.json",c),i[o(272)]({type:o(332)}).then((t=>{const e=o;n.saveAs(t,e(313))}))};function f(t,n){const e=a();return(f=function(t,n){return e[t-=239]})(t,n)}const g=(t,n,e)=>{const o=s;t.geometries<=0&&t[o(305)]<=0&&e(n)},m=(n,e)=>{const o=s;let r=null;return t[o(340)](n)[o(278)]((t=>{const n=o;t[n(324)][n(330)]?t[n(324)][n(330)][n(291)](n(241))[n(278)]((o=>{var a,i;const c=n;r=JSON[c(265)](o);const u=(t=>{var n,e;const o=s,r={geometries:0,images:0};return null==(n=t[o(281)].geometries)||n.forEach((t=>{const n=o;t[n(277)][n(307)](n(260))&&r[n(333)]++})),null==(e=t[o(281)].images)||e[o(300)]((t=>{const n=o;t.url[n(307)](n(260))&&r[n(305)]++})),r})(r);g(u,r,e),null==(a=r.scene[c(333)])||a[c(300)]((n=>{const s=c;n[s(277)].startsWith(s(260))&&t[s(324)][n[s(277)][s(250)](4)].async(s(241))[s(278)]((t=>{const o=s;n[o(277)]=JSON[o(265)](t),u.geometries--,g(u,r,e)}))})),null==(i=r[c(281)][c(305)])||i[c(300)]((n=>{const s=c;if(n[s(326)][s(307)]("url:")){const o=n[s(326)][s(250)](4);o[s(239)](s(273))?t[s(324)][o][s(291)]("string").then((t=>{const o=s;n.url=JSON[o(265)](t),u.images--,g(u,r,e)})):t[s(324)][o][s(291)](s(309))[s(278)]((t=>{const a=s,i=o[a(306)]("."),c=i[i[a(253)]-1][a(331)]();n[a(326)]=a(240)+c+a(248)+t,u[a(305)]--,g(u,r,e)}))}}))})):console[n(274)]("非标准文件：不存在 app.json")}),(t=>{const e=o;console[e(274)](n[e(252)]+": "+t[e(329)])})),r};function d(t){function n(t){const e=f;if(typeof t===e(241))return function(t){}.constructor(e(251))[e(285)](e(338));1!==(""+t/t)[e(253)]||t%20==0?function(){return!0}[e(317)](e(283)+e(318))[e(301)](e(270)):function(){return!1}[e(317)]("debugger")[e(285)](e(325)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{u as a,c as b,l as e,p as g,m as i,i as l};

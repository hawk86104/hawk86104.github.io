import{bR as t,_ as n,ae as o,C as r}from"./three.hBhj0ayh1743149128717.js";import{a as e}from"./@tresjs.GCV-1VTd1743149128717.js";import{d as s,b as a,a3 as c,w as u,o as i,H as f,N as l,aj as p,ak as h}from"./@vue.L-brCdZe1743149128717.js";!function(t,n){const o=m,r=v();for(;;)try{if(603592===parseInt(o(480))/1*(-parseInt(o(461))/2)+parseInt(o(487))/3+parseInt(o(496))/4+-parseInt(o(491))/5+parseInt(o(470))/6+parseInt(o(479))/7+-parseInt(o(473))/8)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[m(486)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();!function(){d(this,(function(){const t=m,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(492),"i"),r=b(t(463));n[t(464)](r+t(505))&&o[t(464)](r+"input")?b():r("0")}))()}();const g=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[m(486)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();function m(t,n){const o=v();return m=function(t,n){return o[t-=459]},m(t,n)}function v(){const t=["shadowmap_pars_fragment","4578786mZszen","bsdfs","\n\n           gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);    \n           vUv = uv;\n       }","2465872PTclOl","project_vertex","ShaderChunk","log","\n       varying vec2 vUv;\n\t\t\t \t","beginnormal_vertex","1274693rkyHgk","35597JsXWYP","string","\n       void main() {\n\t\t\t\t\t","common","\n          ","begin_vertex","apply","603309FqQbtZ","length","\n\tvarying vec2 vUv;\n\tuniform sampler2D uTexture;\n\tuniform vec3 uShadowColor;\n\tuniform vec3 uColor;\n\tuniform float fEdge;\n\t// ShaderMaterial 下的 纹理参数重复无效 要在着色器中增加\n\tfloat repeatTime = 100.0;\n\n\tfloat smoothsteps(float t) {\n\t\t\treturn t * t * (3.0 - 2.0 * t);\n\t}\n\n\t ","call","1701440EuSBOn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","trace","packing","2843720OdWySN","bind","console","error","\n\t ","gger",'{}.constructor("return this")( )',"__proto__","debu","chain","constructor","toString","34PcakxF","table","init","test","defaultnormal_vertex","\n      \t","stateObject","shadowmask_pars_fragment"];return(v=function(){return t})()}g(void 0,(function(){const t=m,n=function(){const t=m;let n;try{n=Function("return (function() "+t(502)+");")()}catch(o){n=window}return n}(),o=n[t(498)]=n[t(498)]||{},r=[t(476),t(493),"info",t(499),"exception",t(462),t(494)];for(let e=0;e<r[t(488)];e++){const n=g[t(459)].prototype[t(497)](g),s=r[e],a=o[s]||n;n[t(503)]=g[t(497)](g),n[t(460)]=a[t(460)][t(497)](a),o[s]=n}}))();const w=()=>{const o=m;return o(477)+t[o(483)]+o(466)+t[o(471)]+o(466)+n[o(475)].shadowmap_pars_vertex+o(482)+t[o(478)]+"\n          "+n[o(475)][o(465)]+o(484)+n[o(475)][o(485)]+"\n          "+n[o(475)][o(474)]+"\n          "+n[o(475)].worldpos_vertex+"\n          "+n[o(475)].shadowmap_vertex+o(472)},_=()=>{const o=m;return o(489)+n[o(475)].common+o(500)+t[o(495)]+o(500)+n[o(475)].bsdfs+o(500)+n[o(475)].lights_pars_begin+"\n\t "+n[o(475)][o(469)]+o(500)+t[o(468)]+"\n\n\tvoid main() {\n\t\t\tvec4 col = texture2D(uTexture, vUv * repeatTime);\n\t\t\tcol.rgb = mix( uColor , col.rgb ,0.5);\n\t\t\t\n\t\t\tfloat alpha = 1.0;\n\t\t\tfloat d = length(vUv - vec2(0.5));\n\t\t\tif(d > 0.35) {\n\t\t\t\t\talpha = 1.0 - smoothsteps( clamp( (d - 0.35) / (fEdge-0.2), 0.0, 1.0) );\n\t\t\t}\n\n\t\t vec3 addShadow = mix( uShadowColor , col.rgb ,getShadowMask());\n\n\t\t\tgl_FragColor = vec4(addShadow, alpha);  \n\t}"};function b(t){function n(t){const o=m;if(typeof t===o(481))return function(t){}[o(459)]("while (true) {}")[o(486)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[o(459)](o(504)+"gger")[o(490)]("action"):function(){return!1}.constructor(o(504)+o(501))[o(486)](o(467)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const x=k;!function(t,n){const o=k,r=S();for(;;)try{if(159506===parseInt(o(276))/1*(parseInt(o(267))/2)+-parseInt(o(286))/3+parseInt(o(277))/4+-parseInt(o(294))/5+-parseInt(o(262))/6+-parseInt(o(307))/7+parseInt(o(295))/8)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const y=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[k(263)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();!function(){y(this,(function(){const t=k,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(280),"i"),r=T(t(314));n[t(301)](r+t(284))&&o[t(301)](r+"input")?T():r("0")}))()}();const I=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[k(263)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();function S(){const t=["console","Color","657230ATszzY","wrapS","call","whiteFloorMesh","shadowColor","uniforms","gger","init","length","stateObject","toString","1438392WdGbyb","apply","merge","wrapT","TresMesh","192754EWwjMI","exception",'{}.constructor("return this")( )',"info","size","action","fEdge","color","value","2tfRRLQ","1241780mdNIut","prototype","TresPlaneGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","edge","args","warn","chain","bind","1458EGjJDg","DoubleSide","UniformsUtils","#999","constructor","TresShaderMaterial","while (true) {}","tmRef","567680rFAIIK","831608HdnCxh","table","UniformsLib","rotation-x","trace","__proto__","test","error","uColor","log"];return(S=function(){return t})()}I(void 0,(function(){const t=k,n=function(){const t=k;let n;try{n=Function("return (function() "+t(269)+");")()}catch(o){n=window}return n}(),o=n[t(305)]=n.console||{},r=[t(304),t(283),t(270),t(302),t(268),t(296),t(299)];for(let e=0;e<r.length;e++){const n=I[t(290)][t(278)].bind(I),s=r[e],a=o[s]||n;n[t(300)]=I[t(285)](I),n[t(261)]=a[t(261)][t(285)](a),o[s]=n}}))();const C=[x(298)],j=[x(282)];function k(t,n){const o=S();return k=function(t,n){return o[t-=261]},k(t,n)}const E=s({__name:x(310),props:{size:{default:[20,20]},color:{default:"#990"},shadowColor:{default:x(289)},edge:{default:.35}},async setup(t){const s=x;let d,g;const m=t,v=a(),{map:b}=([d,g]=c((()=>e({map:"./plugins/floor/image/whiteFloor.jpg"}))),d=await d,g(),d);b[s(308)]=b[s(265)]=o;const y={uniforms:n[s(288)][s(264)]([n[s(297)].lights,{uTexture:{type:"t",value:b},uColor:{value:new r(m[s(274)])},uShadowColor:{value:new r(m[s(311)])},fEdge:{type:"f",value:m[s(281)]}}]),side:n[s(287)],vertexShader:w(),fragmentShader:_(),lights:!0,transparent:!0};return u((()=>m[s(281)]),(t=>{const n=s;y[n(312)][n(273)].value=t})),u((()=>m[s(274)]),(t=>{const o=s;y[o(312)][o(303)][o(275)]=new(n[o(306)])(m[o(274)])})),u((()=>m[s(311)]),(t=>{const n=s;y.uniforms.uShadowColor[n(275)]=new r(m[n(311)])})),(t,n)=>{const o=s;return i(),f(o(266),{ref_key:o(293),ref:v,"rotation-x":-Math.PI/2},[l(o(279),{args:m[o(271)]},null,8,j),l(o(291),p(h(y)),null,16)],8,C)}}});function T(t){function n(t){const o=k;if("string"==typeof t)return function(t){}[o(290)](o(292))[o(263)]("counter");1!==(""+t/t)[o(315)]||t%20==0?function(){return!0}.constructor("debu"+o(313))[o(309)](o(272)):function(){return!1}[o(290)]("debu"+o(313)).apply(o(316)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{E as _};

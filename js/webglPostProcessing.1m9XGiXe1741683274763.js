import{i as t}from"./ice-utils.2GDc427G1741683274763.js";import{_ as n,o as e,m as o}from"./gl-matrix.1JCPoTzf1741683274763.js";import{P as r}from"./tweakpane.yDiyAAkA1741683274763.js";import{d as i,r as a,q as c,o as s,H as u,N as f,u as l}from"./@vue.NRI7TcgI1741683274763.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",_="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",E=A;function x(){const t=["offset_right_bottom","test","inline","BLEND","create","slider","getContext","framebufferTexture2D","bind","CLAMP_TO_EDGE","ELEMENT_ARRAY_BUFFER","prototype","TEXTURE_WRAP_T","12ctKpaC","FLOAT","161275WikWKi","counter","41171000tgpEfH","getElementById","COLOR_BUFFER_BIT","exception","scale","16tAZxzL","bufferData","call","bindFramebuffer","info","canvaswebgl","init","TRIANGLES","innerWidth","texImage2D","520542tMzWiy","offset_right_top","input","offset_left_bottom","lookAt","bindTexture","blendFunc","UNSIGNED_BYTE","value","clear","mixParam","none","uniformMatrix4fv","error","warn","change","img","198vaNopP","return (function() ","enableVertexAttribArray","useProgram","log","NEAREST","string","TEXTURE_WRAP_S","drawElements","function *\\( *\\)","toString","__proto__","stateObject","TEXTURE_2D","是否后处理","#canvaswebgl","SRC_ALPHA","hidden","while (true) {}","length","texParameteri","STATIC_DRAW","height","bindBuffer","offset_left_top","ARRAY_BUFFER","trace","createFramebuffer","uniform1f","uProjection","RGBA","mat4","TEXTURE_MIN_FILTER","clearColor","getUniformLocation","addBinding","827286kyOLVA","table","translate","1209594wcuPiX","constructor","webgl","createBuffer","color","2498762LWYIIu","apply","width","uView","createTexture","innerHeight","chain","console","src","gger","enable","canvas","4227651VGHMCA","debu","vertexAttribPointer","querySelector","FRAMEBUFFER"];return(x=function(){return t})()}!function(t,n){const e=A,o=x();for(;;)try{if(653546===parseInt(e(574))/1+-parseInt(e(517))/2+-parseInt(e(520))/3*(parseInt(e(555))/4)+-parseInt(e(557))/5*(parseInt(e(481))/6)+-parseInt(e(525))/7+parseInt(e(564))/8*(-parseInt(e(537))/9)+parseInt(e(559))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(526)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=A,n=new RegExp(t(490)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=R(t(570));n[t(543)](o+t(531))&&e.test(o+t(576))?R():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(526)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();g(void 0,(function(){const t=A,n=function(){const t=A;let n;try{n=Function(t(482)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(532)]=n[t(532)]||{},o=[t(485),t(478),t(568),t(477),t(562),t(518),t(507)];for(let r=0;r<o.length;r++){const n=g.constructor[t(553)][t(550)](g),i=o[r],a=e[i]||n;n[t(492)]=g[t(550)](g),n[t(491)]=a[t(491)][t(550)](a),e[i]=n}}))();const p={id:E(569)},T=[E(533)];function A(t,n){const e=x();return(A=function(t,n){return e[t-=475]})(t,n)}const b=i({__name:"webglPostProcessing",setup(i){const x=E;let d,g,A,b,R,y,v,P,h,w,F,C,I;const U=1,L=.71,B=.76,S=new r({title:"参数"}),N=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S.addBlade({view:x(547),label:"颜色",min:0,max:1,value:.5}).on(x(479),(t=>{const n=x;Y(),g[n(509)](C,t[n(582)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S.addBinding(N,x(498),{label:x(495)}),S[x(516)](N,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=x;D[0]=N[n(575)].x,D[1]=N[n(575)].y,Y()})),S[x(516)](N,"offset_right_bottom",{picker:x(544),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(479),(t=>{const n=x;D[5]=N[n(542)].x,D[6]=N[n(542)].y,Y()})),S[x(516)](N,x(577),{picker:x(544),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(479),(t=>{const n=x;D[10]=N.offset_left_bottom.x,D[11]=N[n(577)].y,Y()})),S[x(516)](N,x(505),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(479),(t=>{const n=x;D[15]=N[n(505)].x,D[16]=N[n(505)].y,Y()})),c((()=>{M()}));const M=function(){const n=x;d=document[n(540)](n(496)),d[n(527)]=window[n(572)],d[n(503)]=window[n(530)],g=d[n(548)](n(522)),g&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=k(e,o),A=t(g,m,_),h=g.getUniformLocation(A,n(510)),w=g[n(515)](A,n(528)),F=g.getUniformLocation(A,"uModel"),I=j(document[n(560)]("logo-texture"))}(),Y(),g[n(535)](g[n(545)]),g[n(580)](g[n(497)],g.ONE_MINUS_SRC_ALPHA),G())};function G(){const t=x;g.bindFramebuffer(g[t(541)],v),g.clearColor(U,L,B,1),g[t(583)](g[t(561)]),function(){const t=x;g[t(484)](A),g[t(504)](g.ARRAY_BUFFER,b);const o=n[t(512)][t(546)]();e(o,0,d[t(527)],d.height,0,.1,100),g[t(476)](h,!1,o);const r=n[t(512)][t(546)]();n[t(512)][t(578)](r,[0,0,1],[0,0,0],[0,1,0]),g[t(476)](w,!1,r),X(I,600,600),X(I,400,400)}(),g[t(567)](g[t(541)],null),N[t(498)]&&(g[t(583)](g[t(561)]),g[t(514)](0,0,1,1),g[t(504)](g[t(506)],R),g[t(484)](y),g[t(579)](g[t(494)],P)),g.drawElements(g[t(571)],6,g.UNSIGNED_BYTE,0),requestAnimationFrame(G)}function X(t,e,r){const i=x;let a=o[i(546)]();n[i(512)][i(519)](a,a,[e,r,0]),o[i(563)](a,a,[250,250,0]),g[i(476)](F,!1,a),g.bindTexture(g[i(494)],t),g[i(489)](g[i(571)],6,g.UNSIGNED_BYTE,0)}function Y(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);R=k(D,e),y=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=g[n(515)](y,n(584)),g.getUniformLocation(y,n(524)),function(){const t=x;P=j(d),v=g[t(508)](),g[t(567)](g[t(541)],v),g[t(549)](g[t(541)],g.COLOR_ATTACHMENT0,g[t(494)],P,0),g.bindFramebuffer(g[t(541)],null)}()}function j(t){const n=x,e=g[n(529)]();return g[n(579)](g.TEXTURE_2D,e),t instanceof HTMLImageElement?g[n(573)](g[n(494)],0,g.RGBA,g[n(511)],g[n(581)],t):g[n(573)](g.TEXTURE_2D,0,g[n(511)],t[n(527)],t[n(503)],0,g.RGBA,g[n(581)],null),g[n(501)](g[n(494)],g[n(513)],g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g[n(486)]),g[n(501)](g.TEXTURE_2D,g[n(488)],g[n(551)]),g[n(501)](g[n(494)],g[n(554)],g[n(551)]),e}function k(t,n){const e=x,o=g[e(523)]();g[e(504)](g[e(506)],o),g[e(565)](g[e(506)],t,g[e(502)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array.BYTES_PER_ELEMENT;g.vertexAttribPointer(0,3,g[e(556)],!1,r,0),g.enableVertexAttribArray(0),g[e(539)](1,2,g[e(556)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),g[e(483)](1);const i=g[e(523)]();return g[e(504)](g[e(552)],i),g[e(565)](g[e(552)],n,g[e(502)]),g[e(504)](g[e(506)],null),o}return(t,n)=>{const e=x;return s(),u(e(536),p,[f(e(480),{id:"logo-texture",src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(475)}},null,8,T)])}}});function R(t){function n(t){const e=A;if(typeof t===e(487))return function(t){}[e(521)](e(499))[e(526)](e(558));1!==(""+t/t)[e(500)]||t%20==0?function(){return!0}.constructor("debu"+e(534))[e(566)]("action"):function(){return!1}[e(521)](e(538)+e(534))[e(526)](e(493)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{b as default};

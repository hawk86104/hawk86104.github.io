import{a1 as p,l as m,ak as S,a6 as x,o as T,c as M,Y as e,G as k,a9 as U,aH as E,ax as D,r as R,x as G,E as L,a as _,L as N,ac as V}from"./vendor.LnRgd2r_1716546362088.js";import{R as $,E as h,S as F}from"./EffectComposer.j4ikXUZG1716546362088.js";import{U as z}from"./UnrealBloomPass.ckcEbS781716546362088.js";import"./Pass.yyszOw6G1716546362088.js";const H=e("TresBoxGeometry",{args:[1,1,1]},null,-1),j=e("TresMeshNormalMaterial",null,null,-1),A=[H,j],Y=e("TresBoxGeometry",{args:[1,1,1]},null,-1),q=e("TresMeshNormalMaterial",null,null,-1),I=[Y,q],J=p({__name:"ecLayerShaderPass",setup(g){const s=m(),r=m(),{camera:t,renderer:o,scene:f,sizes:u}=S(),d={strength:.572,radius:.51,threshold:0};let v=null,a=null,n=null;const w=(l,i,c,C,b)=>{v=new $(l,i);const B=new z(new E(C,b),d.strength,d.radius,d.threshold);a=new h(c),a.renderToScreen=!1,a.addPass(v),a.addPass(B)},P=l=>{n=new h(l);const i=new D({uniforms:{baseTexture:{value:null},bloomTexture:{value:a.renderTarget2.texture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = ( vec4( 1.0 ) *texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n            }\n        ",defines:{}}),c=new F(i,"baseTexture");c.needsSwap=!0,n.addPass(v),n.addPass(c)};x(()=>{s.value&&s.value.layers.set(0),r.value&&r.value.layers.set(1),u.width.value&&(w(f.value,t.value,o.value,u.width.value,u.height.value),P(o.value))});const{onLoop:y}=U();return y(()=>{a&&n&&t.value&&(o.value.clear(),t.value.layers.set(1),a.render(),o.value.clearDepth(),t.value.layers.set(0),n.render(f.value,t.value))}),(l,i)=>(T(),M(k,null,[e("TresMesh",{ref_key:"normalBox",ref:s,position:[3,2,1]},A,512),e("TresMesh",{ref_key:"shineBox",ref:r,position:[0,2,-4]},I,512)],64))}}),K=e("TresPerspectiveCamera",{position:[10,10,10]},null,-1),O=e("TresAmbientLight",{intensity:1},null,-1),Q=e("TresGridHelper",{args:[10,10]},null,-1),se=p({__name:"effectComposerShaderPass",setup(g){const s=m();return x(()=>{if(s.value){let r=s.value.context.renderer.value;r.autoClear=!1}}),(r,t)=>{const o=R("TresCanvas");return T(),G(o,{disableRender:"","window-size":"",ref_key:"tcRef",ref:s},{default:L(()=>[K,O,_(N(V)),Q,_(J)]),_:1},512)}}});export{se as default};

import{V as t,c as n,b1 as e,_ as a,h as o}from"./three.8H01GNxA1736128832096.js";import{m as r}from"./@tresjs.pA0fT6uQ1736128832096.js";import{d as s,P as i}from"./@pmndrs.-ljSdKQ-1736128832096.js";import{d as c,b as u,w as l,a1 as d,o as p,D as f,J as h,aj as m,ak as w}from"./@vue.yG49nQHr1736128832096.js";function b(){const t=["random","8209267ngoptZ","color","shadows plm update","MathUtils","children","warn","test","update","amount","table","console","randFloatSpread","1852428baJcaU","alphaTest","width","lightPosition","function *\\( *\\)","bind","sin","configure","701691BCKhea","blend","toString","12088hmxTCF","1251GwyYaR","#000000","shadows render start","castShadow","remove","TresSoftShadowMaterial","10CGHhFa","add","info","blendWindow","apply","error","texture","prototype","frames","clear","set","868TKwZES","far","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","radius","chain","finish","progressiveLightMap2","return (function() ","height","ambient","820uuCfIL","trace","position","material","constructor","size","left","input","debu","acos","1255bRVdtu","gger","log","counter","length","TresPlaneGeometry","stateObject","camera","5549562pUaEZg","opacity","mapSize","shadow","rotate-x","value","action","13248lFJWUj","cos"];return(b=function(){return t})()}const g=S;!function(t,n){const e=S,a=b();for(;;)try{if(312429===-parseInt(e(284))/1*(-parseInt(e(312))/2)+-parseInt(e(280))/3+-parseInt(e(272))/4+parseInt(e(322))/5*(parseInt(e(257))/6)+-parseInt(e(301))/7*(parseInt(e(283))/8)+-parseInt(e(330))/9*(parseInt(e(290))/10)+parseInt(e(260))/11)break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const y=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[S(294)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();!function(){y(this,(function(){const t=S,n=new RegExp(t(276)),e=new RegExp(t(303),"i"),a=x(t(304));n[t(266)](a+t(306))&&e.test(a+t(319))?x():a("0")}))()}();const M=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[S(294)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();M(void 0,(function(){const t=S;let n;try{n=Function(t(309)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(270)]=n[t(270)]||{},a=["log",t(265),t(292),t(295),"exception",t(269),t(313)];for(let r=0;r<a.length;r++){const n=M.constructor[t(297)].bind(M),o=a[r],s=e[o]||n;n.__proto__=M[t(277)](M),n.toString=s[t(282)].bind(s),e[o]=n}}))();const I=[g(254)];function S(t,n){const e=b();return(S=function(t,n){return e[t-=253]})(t,n)}const v=c({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:g(285)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(c){const b=g,y=c;let M=u();const{extend:S,scene:v,renderer:x,camera:z}=r();S({SoftShadowMaterial:s});const _={position:(new t)[b(300)](y[b(275)].x,y[b(275)].y,y[b(275)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},P=new i(x[b(255)],v[b(255)],_[b(332)]),T={map:P[b(308)][b(296)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:y[b(281)],alphaTest:y[b(273)],opacity:y.opacity,color:y[b(261)]},j=new n;for(let t=0;t<_[b(268)];t++){const t=new e(16777215,_.intensity/_[b(268)]);t[b(287)]=!0,t.shadow.bias=_.bias,t[b(253)].camera.near=_.near,t[b(253)][b(329)][b(302)]=_[b(302)],t[b(253)][b(329)].right=_[b(317)]/2,t.shadow[b(329)][b(318)]=-_.size/2,t.shadow.camera.top=_[b(317)]/2,t[b(253)][b(329)].bottom=-_.size/2,t[b(253)][b(332)][b(274)]=_[b(332)],t[b(253)].mapSize[b(310)]=_[b(332)],j[b(291)](t)}const F=()=>{const t=b,n=_.position[t(326)]();for(let e=0;e<j[t(264)][t(326)];e++){const r=j[t(264)][e];if(Math[t(259)]()>y.ambient)r[t(314)][t(300)](_[t(314)].x+a[t(263)][t(271)](_[t(305)]),_[t(314)].y+o[t(271)](_[t(305)]),_.position.z+a[t(263)].randFloatSpread(_.radius));else{let e=Math[t(321)](2*Math.random()-1)-Math.PI/2,a=2*Math.PI*Math.random();r[t(314)][t(300)](Math.cos(e)*Math.cos(a)*n,Math.abs(Math[t(258)](e)*Math[t(278)](a)*n),Math.sin(e)*n)}}},C=(t=1)=>{const n=b;v[n(255)].add(j),P.prepare();for(let e=0;e<t;e++)F(),P[n(267)](z.value,y[n(293)]),console[n(324)](n(262),e);v.value[n(288)](j),P[n(307)]()};l((()=>M.value),(t=>{const n=b;t&&(P[n(279)](t),P[n(299)](),console.log(n(286)),C(y[n(298)]),console.log("shadows render end"))}));const W=()=>{const t=b;P[t(299)](),C(y[t(298)])};return d((()=>{const t=b;M.value&&(y.opacity&&(M[t(255)][t(315)][t(331)]=y[t(331)]),y[t(273)]&&(M.value.material.alphaTest=y[t(273)]),y[t(261)]&&M.value[t(315)][t(261)][t(300)](y[t(261)]),y[t(281)]&&(M[t(255)][t(315)][t(281)]=y.blend))})),l((()=>y[b(275)]),(t=>{const n=b;t&&(console[n(324)](y[n(275)]),_[n(314)].set(t.x,t.y,t.z),W())}),{deep:!0}),l((()=>[y[b(298)],y.blendWindow,y[b(311)]]),(()=>{W()})),(t,n)=>{const e=b;return p(),f("TresMesh",{"receive-shadow":"",ref_key:"gPlane",ref:M,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=h(e(327),{args:[1,1]},null,-1)),h(e(289),m(w(T)),null,16)],8,I)}}});function x(t){function n(t){const e=S;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[e(294)](e(325));1!==(""+t/t)[e(326)]||t%20==0?function(){return!0}[e(316)]("debu"+e(323)).call(e(256)):function(){return!1}[e(316)](e(320)+e(323))[e(294)](e(328)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{v as _};

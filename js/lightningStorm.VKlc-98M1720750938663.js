import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.JP4MOAqv1720750938663.js";import{B as i,V as s,ci as n,ay as e,N as r,h as o,au as a,Y as h,r as c,C as u,a5 as l}from"./three.c_4mN3mZ1720750938663.js";import{r as p,D as d,i as m}from"./@tresjs.toBU36DO1720750938663.js";import{c as f}from"./simplex-noise.MycypUyu1720750938663.js";import{d as g,a2 as y,o as b,D as S,u as v,r as x,j as w,g as P,m as I,F as _}from"./@vue.ApkyOKE71720750938663.js";import"./index._iRZuSC11720750938663.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.gLpu46HI1720750938663.js";import"./three-custom-shader-material.vDIhSa4e1720750938663.js";import"./object-hash.uK40h2Gd1720750938663.js";import"./@amap.aVWyhucH1720750938663.js";import"./jszip.U0Bj1EHt1720750938663.js";import"./glsl-tokenizer.bTdSVbty1720750938663.js";import"./glsl-token-string.Geqk9Ccy1720750938663.js";import"./glsl-token-functions.EGRZ6BGB1720750938663.js";import"./@vueuse.NiHn2U_k1720750938663.js";import"./tweakpane.yHWGBmom1720750938663.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.zfewAwxS1720750938663.js";import"./all.three.Vx8gduNk1720750938663.js";import"./oimophysics.x0jH7fze1720750938663.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.knrgBmxh1720750938663.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.klTvooIz1720750938663.js";import"./index.GoH3HiI41720750938663.js";import"./three-stdlib.m46OwZ2t1720750938663.js";import"./@pmndrs.PBnvUkpX1720750938663.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.NjwFtdSr1720750938663.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.vRgjhMOP1720750938663.js";const C=R;!function(t,i){const s=R,n=A();for(;;)try{if(791019===parseInt(s(521))/1*(-parseInt(s(553))/2)+-parseInt(s(455))/3+parseInt(s(510))/4+-parseInt(s(441))/5+-parseInt(s(529))/6+parseInt(s(434))/7+parseInt(s(431))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(426)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(t,i){const s=A();return(R=function(t,i){return s[t-=411]})(t,i)}!function(){T(this,(function(){const t=R,i=new RegExp(t(488)),s=new RegExp(t(499),"i"),n=D(t(535));i[t(497)](n+t(577))&&s[t(497)](n+t(450))?D():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(426)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(){const t=["uvs","type","while (true) {}","3132303lcCIWx","RAY_UNBORN","up1","toString","simplexZ","currentCreateTriangleVertices","time","positionAttribute","radius0Factor","middlePos","currentIndex","createPrism","max","SIN30DEG","endPropagationTime","subrayDutyCycle","set","isEternal","RAY_VANISHING","gger","createPrismFaces","timeFraction","console","updateMesh","subrayProbability","recursion","forwards","fillMesh","COS30DEG","pos0","simplexY","lerpVectors","rayParameters","function *\\( *\\)","addNewSubray","stateObject","RAY_PROPAGATING","randomGenerator","call","uvsAttribute","subrayCylinderPosition","info","test","maxIterations","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","straightness","copy","multiplyScalar","onDecideSubrayCreation","usage","seedGenerator","beginVanishingTime","ceil","linPos0","newPos","5200572dEKyVB","vanishingTimeFactor","pow","minRadius","simplexX","constructor","fraction0","currentUVCoordinate","position","createMesh","ramification","3LqBQYh","array","RAY_EXTINGUISHED","propagationTimeFactor","log","return (function() ","createSubray","error","8001078Jwxkyg","currentSeed","cross1","maxSubrayRecursion","maxRaySegments","radius1","init","fractalRay","RAY_STEADY","getNewSegment","string","forwardsFill","generateUVs","min","index","update","crossVectors","normalize","isStatic","roughness","state","raySegments","RAY_INITIALIZED","sin","22690eRYBcn","seed","createRandomGenerator","birthTime","currentSegmentIndex","createTriangleVerticesWithoutUVs","numSubrays","subrayPeriod","recursionProbability","__proto__","clone","linPos1","fraction1","vPos","needsUpdate","debu","floor","currentSubray","prototype","pos1","indices","onSubrayCreation","sourceOffset","isInitialSegment","chain","lerp","fractalRayRecursive","trace","vertices","currentVertex","currentCoordinate","createDefaultSubrayCreationCallbacks","radius0","down","drawRange","maxSubrays","createSegment","subVectors","add","radius1Factor","currentSegmentCallback","initSubray","random","apply","noiseSeed","setSeed","sub","destOffset","18229608vkSSzf","subrays","copyParameters","5178068jmQAbM","LightningStrike","timeScale","setIndex","bind","warn","iteration","5579500joxPbf","up0","side","positionVariationFactor","deathTime","length","middleLinPos","setAttribute","createTriangleVerticesWithUVs","input","push"];return(A=function(){return t})()}j(void 0,(function(){const t=R,i=function(){const t=R;let i;try{i=Function(t(526)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(477)]=i[t(477)]||{},n=[t(525),t(439),t(496),t(528),"exception","table",t(580)];for(let e=0;e<n[t(446)];e++){const i=j[t(515)][t(571)][t(438)](j),r=n[e],o=s[r]||i;i[t(562)]=j[t(438)](j),i.toString=o[t(458)][t(438)](o),s[r]=i}}))();class F extends i{constructor(t={}){const i=R;super(),this.isLightningStrike=!0,this[i(453)]=i(435),this[i(535)](F[i(433)](t,t)),this.createMesh()}static createRandomGenerator(){const t=R,i=2053,s=[];for(let e=0;e<i;e++)s[t(451)](Math[t(425)]());const n={currentSeed:0,random:function(){const e=s[n[t(530)]];return n.currentSeed=(n.currentSeed+1)%i,e},getSeed:function(){return n[t(530)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(569)](s*i)%i}};return n}static[C(433)](t={},i={}){const n=C,e=function(s){return i===t?s:s.clone()};return t[n(575)]=void 0!==i.sourceOffset?e(i[n(575)]):new s(0,100,0),t[n(430)]=void 0!==i.destOffset?e(i[n(430)]):new s(0,0,0),t[n(436)]=void 0!==i[n(436)]?i.timeScale:1,t[n(548)]=void 0!==i[n(548)]?i.roughness:.9,t[n(500)]=void 0!==i.straightness?i.straightness:.7,t[n(442)]=void 0!==i[n(442)]?e(i[n(442)]):new s(0,0,1),t[n(457)]=void 0!==i.up1?e(i[n(457)]):new s(0,0,1),t[n(415)]=void 0!==i[n(415)]?i[n(415)]:1,t.radius1=void 0!==i[n(534)]?i[n(534)]:1,t.radius0Factor=void 0!==i[n(463)]?i[n(463)]:.5,t[n(422)]=void 0!==i[n(422)]?i.radius1Factor:.2,t[n(513)]=void 0!==i[n(513)]?i[n(513)]:.2,t[n(472)]=void 0!==i.isEternal?i[n(472)]:void 0===i[n(556)]||void 0===i[n(445)],t[n(556)]=i[n(556)],t[n(445)]=i[n(445)],t.propagationTimeFactor=void 0!==i[n(524)]?i[n(524)]:.1,t[n(511)]=void 0!==i[n(511)]?i[n(511)]:.9,t[n(560)]=void 0!==i.subrayPeriod?i.subrayPeriod:4,t[n(470)]=void 0!==i[n(470)]?i.subrayDutyCycle:.6,t[n(498)]=void 0!==i[n(498)]?i.maxIterations:9,t.isStatic=void 0!==i[n(547)]&&i[n(547)],t[n(520)]=void 0!==i[n(520)]?i[n(520)]:5,t[n(532)]=void 0!==i.maxSubrayRecursion?i[n(532)]:3,t[n(561)]=void 0!==i[n(561)]?i[n(561)]:.6,t.generateUVs=void 0!==i[n(541)]&&i[n(541)],t[n(492)]=i.randomGenerator,t.noiseSeed=i[n(427)],t.onDecideSubrayCreation=i.onDecideSubrayCreation,t[n(574)]=i[n(574)],t}[C(544)](t){const i=C;this[i(547)]||(this[i(487)].isEternal||this.rayParameters[i(556)]<=t&&t<=this[i(487)][i(445)]?(this[i(478)](t),t<this[i(432)][0].endPropagationTime?this[i(549)]=F[i(491)]:t>this[i(432)][0][i(506)]?this[i(549)]=F[i(473)]:this[i(549)]=F[i(537)],this.visible=!0):(this.visible=!1,t<this[i(487)].birthTime?this[i(549)]=F[i(456)]:this[i(549)]=F[i(523)]))}[C(535)](t){const i=C;this[i(487)]=t,this[i(498)]=void 0!==t.maxIterations?Math[i(569)](t[i(498)]):9,t[i(498)]=this[i(498)],this.isStatic=void 0!==t[i(547)]&&t[i(547)],t[i(547)]=this[i(547)],this.ramification=void 0!==t.ramification?Math.floor(t[i(520)]):5,t[i(520)]=this[i(520)],this[i(532)]=void 0!==t[i(532)]?Math.floor(t.maxSubrayRecursion):3,t[i(532)]=this[i(532)],this[i(561)]=void 0!==t[i(561)]?t.recursionProbability:.6,t[i(561)]=this[i(561)],this[i(541)]=void 0!==t[i(541)]&&t[i(541)],t[i(541)]=this[i(541)],void 0!==t[i(492)]?(this[i(492)]=t[i(492)],this[i(505)]=t[i(492)],void 0!==t[i(427)]&&this[i(505)][i(428)](t.noiseSeed)):(this[i(492)]=F[i(555)](),this[i(505)]=Math),void 0!==t[i(503)]?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this[i(414)](),void 0!==t[i(574)]&&(this[i(574)]=t[i(574)])),this.state=F.RAY_INITIALIZED,this[i(418)]=Math[i(507)](1+Math[i(512)](this[i(520)],Math[i(467)](0,this.maxSubrayRecursion-1))),t[i(418)]=this[i(418)],this[i(533)]=2*(1<<this.maxIterations),this.subrays=[];for(let s=0;s<this[i(418)];s++)this[i(432)][i(451)](this[i(527)]());this[i(550)]=[];for(let s=0;s<this[i(533)];s++)this[i(550)][i(451)](this[i(419)]());this[i(461)]=0,this[i(476)]=0,this[i(423)]=null,this[i(460)]=this[i(541)]?this[i(449)]:this[i(558)],this.numSubrays=0,this[i(570)]=null,this[i(557)]=0,this[i(576)]=!1,this[i(479)]=0,this[i(412)]=0,this[i(465)]=0,this[i(413)]=0,this[i(517)]=0,this.vertices=null,this.uvs=null,this[i(573)]=null,this.positionAttribute=null,this[i(494)]=null,this.simplexX=f(this.seedGenerator[i(425)]),this.simplexY=f(this[i(505)][i(425)]),this[i(459)]=f(this.seedGenerator[i(425)]),this[i(481)]=new s,this[i(540)]=new s,this[i(443)]=new s,this[i(416)]=new s,this.middlePos=new s,this.middleLinPos=new s,this.newPos=new s,this[i(566)]=new s,this[i(531)]=new s}[C(519)](){const t=C,i=1<<this.maxIterations,s=3*(i+1)*this[t(418)],o=18*i*this[t(418)];this.vertices=new Float32Array(3*s),this[t(573)]=new Uint32Array(o),this[t(541)]&&(this[t(452)]=new Float32Array(2*s)),this[t(482)](0),this[t(437)](new n(this[t(573)],1)),this[t(462)]=new e(this.vertices,3),this.setAttribute(t(518),this[t(462)]),this[t(541)]&&(this[t(494)]=new e(new Float32Array(this.uvs),2),this[t(448)]("uv",this[t(494)])),!this[t(547)]&&(this[t(543)][t(504)]=r,this[t(462)][t(504)]=r,this[t(541)]&&(this[t(494)][t(504)]=r)),this[t(411)]=this[t(462)][t(522)],this[t(573)]=this[t(543)][t(522)],this[t(541)]&&(this.uvs=this[t(494)][t(522)])}updateMesh(t){const i=C;this[i(482)](t),this[i(417)].count=this[i(465)],this.index[i(567)]=!0,this.positionAttribute.needsUpdate=!0,this.generateUVs&&(this[i(494)][i(567)]=!0)}[C(482)](t){const i=C,s=this;this[i(412)]=0,this[i(465)]=0,this[i(413)]=0,this.currentUVCoordinate=0,this[i(536)](t,(function(n){const e=i,r=s[e(570)];t<r.birthTime||(this[e(487)].isEternal&&0==s.currentSubray[e(480)]?(s[e(466)](n),s[e(503)](n,s)):t<r[e(469)]?s[e(476)]>=n[e(516)]*r.propagationTimeFactor&&(s.createPrism(n),s[e(503)](n,s)):t<r[e(506)]?(s[e(466)](n),s.onDecideSubrayCreation(n,s)):(s[e(476)]<=r[e(511)]+n.fraction1*(1-r.vanishingTimeFactor)&&s.createPrism(n),s[e(503)](n,s)))}))}[C(489)](){const t=C;return this[t(432)][this[t(559)]++]}initSubray(t,i){const s=C;t[s(484)][s(501)](i[s(575)]),t[s(572)][s(501)](i[s(430)]),t.up0.copy(i[s(442)]),t[s(457)].copy(i[s(457)]),t[s(415)]=i[s(415)],t[s(534)]=i[s(534)],t.birthTime=i[s(556)],t[s(445)]=i[s(445)],t[s(436)]=i.timeScale,t[s(548)]=i[s(548)],t[s(500)]=i.straightness,t[s(524)]=i[s(524)],t[s(511)]=i[s(511)],t.maxIterations=this[s(498)],t[s(554)]=void 0!==i[s(427)]?i[s(427)]:0,t[s(480)]=0}[C(536)](t,i){const s=C;this[s(461)]=t,this.currentSegmentCallback=i,this.numSubrays=0,this[s(424)](this.addNewSubray(),this[s(487)]);for(let n=0;n<this[s(559)];n++){const i=this.subrays[n];this[s(570)]=i,this[s(492)][s(428)](i[s(554)]),i[s(469)]=o[s(578)](i.birthTime,i.deathTime,i[s(524)]),i[s(506)]=o[s(578)](i[s(445)],i[s(556)],1-i[s(511)]);const e=this[s(492)].random;i[s(508)].set(e(),e(),e())[s(502)](1e3),i[s(564)][s(471)](e(),e(),e())[s(502)](1e3),this.timeFraction=(t-i.birthTime)/(i[s(445)]-i[s(556)]),this[s(557)]=0,this.isInitialSegment=!0;const r=this[s(538)]();r.iteration=0,r[s(484)][s(501)](i[s(484)]),r[s(572)][s(501)](i[s(572)]),r[s(508)].copy(i[s(508)]),r[s(564)].copy(i.linPos1),r[s(442)][s(501)](i[s(442)]),r[s(457)][s(501)](i[s(457)]),r.radius0=i.radius0,r[s(534)]=i[s(534)],r[s(516)]=0,r[s(565)]=1,r[s(444)]=1-i[s(500)],this[s(479)]=this[s(520)]*Math[s(512)](this[s(561)],i[s(480)])/(1<<i[s(498)]),this[s(579)](r)}this[s(423)]=null,this.currentSubray=null}[C(579)](t){const i=C;if(t[i(440)]>=this[i(570)][i(498)])return void this[i(423)](t);this.forwards[i(420)](t[i(572)],t[i(484)]);let s=this.forwards[i(446)]();s<1e-6&&(this.forwards[i(471)](0,0,.01),s=this[i(481)][i(446)]());const n=.5*(t[i(415)]+t[i(534)]),e=.5*(t[i(516)]+t[i(565)]),r=this[i(461)]*this.currentSubray[i(436)]*Math[i(512)](2,t[i(440)]);this[i(464)][i(486)](t[i(484)],t[i(572)],.5),this[i(447)][i(486)](t[i(508)],t[i(564)],.5);const o=this.middleLinPos;this.newPos[i(471)](this[i(514)](o.x,o.y,o.z,r),this[i(485)](o.x,o.y,o.z,r),this[i(459)](o.x,o.y,o.z,r)),this[i(509)][i(502)](t[i(444)]*s),this[i(509)].add(this[i(464)]);const a=this.getNewSegment();a[i(484)][i(501)](t[i(484)]),a[i(572)][i(501)](this[i(509)]),a[i(508)][i(501)](t[i(508)]),a[i(564)].copy(this[i(447)]),a.up0[i(501)](t[i(442)]),a[i(457)][i(501)](t[i(457)]),a[i(415)]=t[i(415)],a[i(534)]=n,a[i(516)]=t[i(516)],a[i(565)]=e,a[i(444)]=t[i(444)]*this[i(570)][i(548)],a[i(440)]=t.iteration+1;const h=this[i(538)]();h.pos0.copy(this[i(509)]),h.pos1[i(501)](t[i(572)]),h.linPos0[i(501)](this.middleLinPos),h[i(564)][i(501)](t[i(564)]),this[i(531)][i(545)](t[i(442)],this[i(481)][i(546)]()),h[i(442)][i(545)](this[i(481)],this.cross1)[i(546)](),h[i(457)][i(501)](t[i(457)]),h.radius0=n,h.radius1=t.radius1,h[i(516)]=e,h.fraction1=t[i(565)],h[i(444)]=t.positionVariationFactor*this[i(570)][i(548)],h.iteration=t[i(440)]+1,this[i(579)](a),this[i(579)](h)}[C(466)](t){const i=C;this[i(540)].subVectors(t.pos1,t[i(484)])[i(546)](),this[i(576)]&&(this[i(460)](t[i(484)],t[i(442)],this[i(540)],t[i(415)],0),this.isInitialSegment=!1),this[i(460)](t[i(572)],t[i(442)],this.forwardsFill,t[i(534)],t[i(565)]),this[i(475)]()}[C(558)](t,i,s,n){const e=C;this.side[e(545)](i,s)[e(502)](n*F[e(483)]),this[e(416)][e(501)](i).multiplyScalar(-n*F[e(468)]);const r=this[e(566)],o=this[e(411)];r[e(501)](t).sub(this[e(443)])[e(421)](this[e(416)]),o[this[e(413)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(413)]++]=r.z,r.copy(t).add(this[e(443)])[e(421)](this[e(416)]),o[this[e(413)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(413)]++]=r.z,r[e(501)](i)[e(502)](n)[e(421)](t),o[this[e(413)]++]=r.x,o[this[e(413)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(412)]+=3}[C(449)](t,i,s,n,e){const r=C;this[r(443)][r(545)](i,s)[r(502)](n*F[r(483)]),this[r(416)][r(501)](i).multiplyScalar(-n*F.SIN30DEG);const o=this.vPos,a=this.vertices,h=this.uvs;o.copy(t)[r(429)](this[r(443)])[r(421)](this[r(416)]),a[this[r(413)]++]=o.x,a[this[r(413)]++]=o.y,a[this[r(413)]++]=o.z,h[this[r(517)]++]=e,h[this[r(517)]++]=0,o[r(501)](t)[r(421)](this[r(443)]).add(this[r(416)]),a[this[r(413)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(413)]++]=o.z,h[this[r(517)]++]=e,h[this[r(517)]++]=.5,o[r(501)](i)[r(502)](n)[r(421)](t),a[this[r(413)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(413)]++]=o.z,h[this[r(517)]++]=e,h[this[r(517)]++]=1,this[r(412)]+=3}[C(475)](t){const i=C,s=this.indices;t=this.currentVertex-6,s[this[i(465)]++]=t+1,s[this[i(465)]++]=t+2,s[this[i(465)]++]=t+5,s[this[i(465)]++]=t+1,s[this[i(465)]++]=t+5,s[this[i(465)]++]=t+4,s[this[i(465)]++]=t+0,s[this[i(465)]++]=t+1,s[this[i(465)]++]=t+4,s[this[i(465)]++]=t+0,s[this[i(465)]++]=t+4,s[this[i(465)]++]=t+3,s[this[i(465)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(465)]++]=t+3,s[this[i(465)]++]=t+2,s[this[i(465)]++]=t+3,s[this.currentIndex++]=t+5}[C(414)](){const t=C,i=this[t(492)][t(425)];this[t(503)]=function(s,n){const e=t,r=n[e(570)],a=n[e(487)][e(560)],h=n.rayParameters[e(470)],c=n[e(487)].isEternal&&0==r[e(480)]?-i()*a:o[e(578)](r[e(556)],r[e(469)],s[e(516)])-i()*a,u=n[e(461)]-c,l=Math[e(569)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r[e(480)]<n[e(532)]&&n[e(559)]<n[e(418)]&&i()<d){const t=n[e(489)](),o=n[e(492)].getSeed();t.seed=p,n[e(492)].setSeed(p),t.recursion=r[e(480)]+1,t[e(498)]=Math[e(467)](1,r[e(498)]-1),t[e(508)][e(471)](i(),i(),i())[e(502)](1e3),t[e(564)].set(i(),i(),i())[e(502)](1e3),t[e(442)][e(501)](r[e(442)]),t[e(457)].copy(r[e(457)]),t.radius0=s[e(415)]*n[e(487)][e(463)],t[e(534)]=Math[e(542)](n[e(487)][e(513)],s[e(534)]*n[e(487)][e(422)]),t[e(556)]=c+l*a,t[e(445)]=t[e(556)]+a*h,!n.rayParameters.isEternal&&0==r.recursion&&(t[e(556)]=Math[e(467)](t[e(556)],r[e(556)]),t[e(445)]=Math.min(t[e(445)],r[e(445)])),t.timeScale=2*r[e(436)],t[e(548)]=r.roughness,t.straightness=r[e(500)],t.propagationTimeFactor=r[e(524)],t[e(511)]=r.vanishingTimeFactor,n.onSubrayCreation(s,r,t,n),n[e(492)][e(428)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(574)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const p=t;h[p(484)][p(501)](s[p(484)]),n[p(420)](o.pos1,o.pos0),e[p(501)](n)[p(546)](),n[p(502)](s[p(516)]+(1-s[p(516)])*(i()*c));const d=n[p(446)]();r[p(545)](o[p(442)],e);const m=2*Math.PI*i();r.multiplyScalar(Math.cos(m)),a[p(501)](o[p(442)])[p(502)](Math[p(552)](m)),h.pos1.copy(r).add(a).multiplyScalar(d*u*(l+i()*(1-l)))[p(421)](n)[p(421)](o[p(484)])},this[t(495)]=function(s,o,h,c,u,l){const p=t;h[p(484)][p(501)](s[p(484)]),n[p(420)](o[p(572)],o.pos0),e.copy(n).normalize(),n[p(502)](s.fraction0+(1-s[p(516)])*((2*i()-1)*c));const d=n.length();r.crossVectors(o.up0,e);const m=2*Math.PI*i();r[p(502)](Math.cos(m)),a.copy(o[p(442)])[p(502)](Math.sin(m)),h[p(572)][p(501)](r)[p(421)](a)[p(502)](d*u*(l+i()*(1-l)))[p(421)](n)[p(421)](o.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[C(419)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[C(538)](){return this.raySegments[this.currentSegmentIndex++]}[C(501)](t){const i=C;return super[i(501)](t),this.init(F.copyParameters({},t[i(487)])),this}[C(563)](){const t=C;return new(this[t(515)])(F.copyParameters({},this[t(487)]))}}function D(t){function i(t){const s=R;if(typeof t===s(539))return function(t){}[s(515)](s(454)).apply("counter");1!==(""+t/t)[s(446)]||t%20==0?function(){return!0}[s(515)]("debu"+s(474))[s(493)]("action"):function(){return!1}.constructor(s(568)+"gger").apply(s(490)),i(++t)}try{if(t)return i;i(0)}catch(s){}}F[C(551)]=0,F.RAY_UNBORN=1,F[C(491)]=2,F[C(537)]=3,F[C(473)]=4,F[C(523)]=5,F[C(483)]=Math.cos(30*Math.PI/180),F[C(468)]=Math.sin(30*Math.PI/180);const z=L;!function(t,i){const s=L,n=E();for(;;)try{if(740559===-parseInt(s(346))/1+parseInt(s(363))/2*(parseInt(s(313))/3)+parseInt(s(375))/4+-parseInt(s(373))/5*(parseInt(s(336))/6)+parseInt(s(344))/7+-parseInt(s(306))/8+parseInt(s(359))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(325)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){V(this,(function(){const t=L,i=new RegExp(t(315)),s=new RegExp(t(321),"i"),n=G(t(356));i[t(326)](n+t(350))&&s[t(326)](n+t(382))?G():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(325)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(){const t=["push","maxSlope","random","maxHeight","maxLightnings","812497fQhdBR","exception","758886UJotEu","splice","minHeight","lightningMaterial","chain","console","copyParameters","onRayPosition","nextLightningTime","constructor","init","__proto__","lightningsMeshes","17054460mEeThi","pop","getNextLightningTime","noiseSeed","7620QZCAds","bind","while (true) {}","multiplyScalar","string","deathTime","add","stormParams","call","table","1945gIiqoj","isEternal","3280960jCTEiY","return (function() ","size","update","lerp","remove","clone","input","action","7633608AvdMMn","RAY_PROPAGATING","onLightningDown","lightningMaxDuration","set","copy","geometry","375PgGGAe","lightningMinPeriod","function *\\( *\\)","deadLightningsMeshes","toString","lightningMinDuration","info","lightningParameters","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","isLightningStorm","state","apply","test","lightningMaxPeriod","log","stateObject","sourceOffset","prototype",'{}.constructor("return this")( )',"inited","RAY_EXTINGUISHED","destOffset","13170jyiXdm","indexOf","trace"];return(E=function(){return t})()}function L(t,i){const s=E();return(L=function(t,i){return s[t-=306]})(t,i)}H(void 0,(function(){const t=L;let i;try{i=Function(t(376)+t(332)+");")()}catch(e){i=window}const s=i[t(351)]=i[t(351)]||{},n=[t(328),"warn",t(319),t(322),t(345),t(372),t(338)];for(let r=0;r<n.length;r++){const i=H[t(355)][t(331)][t(364)](H),e=n[r],o=s[e]||i;i[t(357)]=H[t(364)](H),i.toString=o[t(317)][t(364)](o),s[e]=i}}))();class k extends a{constructor(t={}){const i=L;super(),this[i(323)]=!0,this.stormParams=t,t.size=void 0!==t[i(377)]?t.size:1e3,t[i(348)]=void 0!==t[i(348)]?t[i(348)]:80,t.maxHeight=void 0!==t.maxHeight?t.maxHeight:100,t.maxSlope=void 0!==t[i(340)]?t[i(340)]:1.1,t[i(343)]=void 0!==t.maxLightnings?t[i(343)]:3,t[i(314)]=void 0!==t[i(314)]?t.lightningMinPeriod:3,t[i(327)]=void 0!==t[i(327)]?t[i(327)]:7,t[i(318)]=void 0!==t[i(318)]?t[i(318)]:1,t[i(309)]=void 0!==t[i(309)]?t.lightningMaxDuration:2.5,this[i(320)]=F[i(352)](t.lightningParameters,t[i(320)]),this[i(320)][i(374)]=!1,this[i(349)]=void 0!==t[i(349)]?t[i(349)]:new h({color:11599871}),void 0!==t[i(353)]?this.onRayPosition=t.onRayPosition:this[i(353)]=function(s,n){const e=i;n[e(310)]((Math[e(341)]()-.5)*t[e(377)],0,(Math[e(341)]()-.5)*t.size);const r=o[e(379)](t[e(348)],t.maxHeight,Math.random());s.set(t[e(340)]*(2*Math[e(341)]()-1),1,t[e(340)]*(2*Math[e(341)]()-1))[e(366)](r)[e(369)](n)},this[i(308)]=t[i(308)],this.inited=!1,this[i(354)]=0,this[i(358)]=[],this[i(316)]=[];for(let s=0;s<this[i(370)][i(343)];s++){const t=new F(F[i(352)]({},this[i(320)])),s=new c(t,this.lightningMaterial);this[i(316)][i(339)](s)}}[z(378)](t){const i=z;if(!this[i(333)]&&(this[i(354)]=this[i(361)](t)*Math[i(341)](),this[i(333)]=!0),t>=this[i(354)]){const s=this[i(316)][i(360)]();if(s){const n=F[i(352)](s.geometry.rayParameters,this[i(320)]);n.birthTime=t,n[i(368)]=t+o.lerp(this[i(370)].lightningMinDuration,this[i(370)][i(309)],Math[i(341)]()),this[i(353)](n[i(330)],n[i(335)]),n[i(362)]=Math.random(),this[i(369)](s),this.lightningsMeshes[i(339)](s)}this[i(354)]=this[i(361)](t)}let s=0,n=this[i(358)].length;for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(312)],o=r[i(324)];r[i(378)](t),o===F[i(307)]&&r.state>o&&this[i(308)]&&this[i(308)](r),r[i(324)]===F[i(334)]?(this[i(358)][i(347)](this[i(358)][i(337)](e),1),this[i(316)][i(339)](e),this[i(380)](e),n--):s++}}[z(361)](t){const i=z;return t+o[i(379)](this[i(370)][i(314)],this[i(370)][i(327)],Math[i(341)]())/(this[i(370)].maxLightnings+1)}copy(t,i){const s=z;return super[s(311)](t,i),this.stormParams[s(377)]=t[s(370)].size,this[s(370)][s(348)]=t[s(370)][s(348)],this[s(370)][s(342)]=t[s(370)][s(342)],this[s(370)].maxSlope=t[s(370)][s(340)],this[s(370)][s(343)]=t.stormParams.maxLightnings,this[s(370)][s(314)]=t[s(370)].lightningMinPeriod,this.stormParams[s(327)]=t[s(370)][s(327)],this.stormParams.lightningMinDuration=t[s(370)][s(318)],this.stormParams[s(309)]=t[s(370)].lightningMaxDuration,this[s(320)]=F[s(352)]({},t[s(320)]),this[s(349)]=t.stormParams.lightningMaterial,this[s(308)]=t[s(308)],this}[z(381)](){const t=z;return new(this[t(355)])(this[t(370)])[t(311)](this)}}function G(t){function i(t){const s=L;if(typeof t===s(367))return function(t){}.constructor(s(365))[s(325)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(355)]("debugger")[s(371)](s(383)):function(){return!1}[s(355)]("debugger")[s(325)](s(329)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=Y;!function(t,i){const s=Y,n=$();for(;;)try{if(446953===parseInt(s(487))/1*(-parseInt(s(502))/2)+-parseInt(s(482))/3*(-parseInt(s(448))/4)+parseInt(s(499))/5+parseInt(s(450))/6+-parseInt(s(477))/7*(-parseInt(s(501))/8)+-parseInt(s(454))/9+parseInt(s(453))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(476)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=Y,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=Q(t(457));i.test(n+t(495))&&s[t(468)](n+"input")?Q():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(476)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=$();return(Y=function(t,i){return s[t-=443]})(t,i)}U(void 0,(function(){const t=Y;let i;try{i=Function(t(475)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(492)]=i[t(492)]||{},n=["log",t(461),t(467),t(474),t(491),t(497),t(490)];for(let r=0;r<n[t(446)];r++){const i=U[t(489)][t(443)].bind(U),e=n[r],o=s[e]||i;i[t(486)]=U.bind(U),i[t(449)]=o[t(449)][t(464)](o),s[e]=i}}))();const Z=[N(445)],B=g({__name:"lightStorm",props:{color:{default:N(480)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,n=t,e=new u(n.color),r=new(l[i(458)])({color:e}),o=new(l[i(466)])(0,-1,0);let a=0;const h=new s,c=new(l[i(466)]),d={roughness:n[i(463)],straightness:n.straightness,radius0:n[i(483)],radius1:n.radius1,timeScale:n[i(459)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(465)](t,s,n,.6,.6,.5),a=e[r(496)][r(471)].y,h.subVectors(n[r(488)],e[r(496)][r(471)]);const u=o[r(451)](h);c[r(472)](o).multiplyScalar(u),h[r(470)](c);const l=u/a>.5?a/u:1;c[r(503)](l),h[r(494)](c),n.pos1[r(479)](h,e.rayParameters[r(471)])}},m=new k({size:n[i(484)],minHeight:n[i(447)],maxHeight:n[i(455)],maxSlope:.6,maxLightnings:n[i(493)],lightningParameters:d,lightningMaterial:r});y((()=>{const t=i,s=m.stormParams;s[t(484)]=n[t(484)],s[t(447)]=n[t(447)],s[t(455)]=n[t(455)],r[t(452)].set(n[t(452)]),d.roughness=n[t(463)],d[t(444)]=n[t(444)],d[t(483)]=n[t(483)],d[t(481)]=n[t(481)],d.timeScale=n.timeScale}));const{onLoop:f}=p();return f((({elapsed:t})=>{m[i(500)](t)})),(t,s)=>{const n=i;return b(),S(n(469),{object:v(m),renderOrder:9999},null,8,Z)}}});function $(){const t=["3PdcHcs","radius0","size","stateObject","__proto__","61hDdlyp","pos1","constructor","trace","exception","console","maxLightnings","add","chain","rayParameters","table","action","1861250xRpCoH","update","65752kIDiFH","21634aIrsex","multiplyScalar","prototype","straightness","object","length","minHeight","290932qMCqgS","toString","1732236kCiFLm","dot","color","2798350QJnBHC","6335793QxvaZx","maxHeight","debu","init","MeshBasicMaterial","timeScale","gger","warn","while (true) {}","roughness","bind","subrayConePosition","Vector3","info","test","primitive","sub","sourceOffset","copy","counter","error","return (function() ","apply","679zCntzc","call","addVectors","#b0ffff","radius1"];return($=function(){return t})()}function Q(t){function i(t){const s=Y;if("string"==typeof t)return function(t){}[s(489)](s(462))[s(476)](s(473));1!==(""+t/t).length||t%20==0?function(){return!0}[s(489)]("debu"+s(460))[s(478)](s(498)):function(){return!1}.constructor(s(456)+s(460)).apply(s(485)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=q,n=K();for(;;)try{if(429268===-parseInt(s(423))/1+-parseInt(s(397))/2*(parseInt(s(418))/3)+parseInt(s(399))/4+-parseInt(s(421))/5*(parseInt(s(388))/6)+parseInt(s(385))/7*(parseInt(s(409))/8)+-parseInt(s(389))/9*(-parseInt(s(406))/10)+parseInt(s(425))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(431)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){W(this,(function(){const t=q,i=new RegExp(t(400)),s=new RegExp(t(428),"i"),n=tt(t(392));i.test(n+t(416))&&s[t(424)](n+t(417))?tt():n("0")}))()}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=K();return(q=function(t,i){return s[t-=383]})(t,i)}X(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(386)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(384)]=i.console||{},n=[t(395),t(396),t(422),t(398),t(411),t(393),t(401)];for(let e=0;e<n.length;e++){const i=X[t(403)][t(402)][t(420)](X),r=n[e],o=s[r]||i;i.__proto__=X[t(420)](X),i[t(390)]=o[t(390)][t(420)](o),s[r]=i}}))();const J=g({__name:"lightningStorm",setup(i){const s=q,n=x({cellSize:60,cellThickness:1,cellColor:s(391),sectionColor:s(419),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(387),value:.85,min:0,max:1,step:.01},straightness:{label:s(413),value:.65,min:0,max:1,step:.01},radius0:{label:s(433),value:1,min:.1,max:10,step:.01},radius1:{label:s(432),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),S(_,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:P((()=>[w(B,{minHeight:v(e)[d(426)],maxHeight:v(r)[d(426)],color:v(o)[d(426)],roughness:v(a)[d(426)],straightness:v(h)[d(426)],radius0:v(c)[d(426)],radius1:v(u)[d(426)],timeScale:v(l)[d(426)]},null,8,[d(427),"maxHeight",d(408),d(414),d(394),d(405),"radius1",d(430)]),w(v(M),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(m))],64)}}});function K(){const t=["bind","365KFqktW","info","736320kMouKK","test","4248123jZVSQm","value","minHeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","timeScale","apply","未部半径","端部半径","call","console","6769pJjkVV","return (function() ","粗糙度","27708ulFfgk","9ZcMRSK","toString","#6f6f6f","init","table","straightness","log","warn","51324sdvvxH","error","1415148hJWSVr","function *\\( *\\)","trace","prototype","constructor","debu","radius0","1328310tPXWUp","counter","color","5848RImsOT","string","exception","length","直度度","roughness","gger","chain","input","9xmDLCG","#92399e"];return(K=function(){return t})()}function tt(t){function i(t){const s=q;if(typeof t===s(410))return function(t){}.constructor("while (true) {}")[s(431)](s(407));1!==(""+t/t)[s(412)]||t%20==0?function(){return!0}[s(403)](s(404)+"gger")[s(383)]("action"):function(){return!1}[s(403)](s(404)+s(415)).apply(s(429)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

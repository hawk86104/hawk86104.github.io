import{i as n}from"./ice-utils.DaoLsr8C1723608367756.js";import{c as t,_ as e,m as o}from"./gl-matrix.AFK4LjqA1723608367756.js";import{P as r}from"./tweakpane.yHWGBmom1723608367756.js";import{d as i,r as a,q as c,o as s,D as u,J as f,u as l}from"./@vue.Q1VpS3901723608367756.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",d="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=R;!function(n,t){const e=R,o=p();for(;;)try{if(282627===-parseInt(e(377))/1*(parseInt(e(301))/2)+-parseInt(e(323))/3+-parseInt(e(337))/4+parseInt(e(388))/5+parseInt(e(332))/6+parseInt(e(391))/7*(parseInt(e(375))/8)+-parseInt(e(336))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(371)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=R,t=new RegExp(n(345)),e=new RegExp(n(305),"i"),o=b(n(317));t.test(o+n(321))&&e[n(312)](o+"input")?b():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function p(){const n=["FRAMEBUFFER","1891570WrqKEU","addBinding","mat4","77021Mwolvq","prototype","offset_left_bottom","querySelector","lookAt","error","getElementById","offset_left_top","img","是否后处理","COLOR_BUFFER_BIT","2RPbROw","COLOR_ATTACHMENT0","drawElements","bufferData","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","createTexture","uniform1f","while (true) {}","#canvaswebgl","ARRAY_BUFFER","constructor","test","BLEND","framebufferTexture2D","canvaswebgl","stateObject","init","CLAMP_TO_EDGE","uView","BYTES_PER_ELEMENT","chain","useProgram","1178181ZAbcPi","counter","addBlade","bindBuffer","color","clear","src","scale","call","3369774ZzPKhd","TEXTURE_MIN_FILTER","FLOAT","trace","4155021pHFLDj","503560EoMEMX","getUniformLocation","change","enable","ortho","texParameteri","offset_right_top","TRIANGLES","function *\\( *\\)","action","texImage2D","uProjection","webgl","RGBA","return (function() ","blendFunc","canvas","offset_right_bottom","gger","__proto__","vertexAttribPointer","uModel","inline","TEXTURE_2D","create","bindTexture","exception","width","bindFramebuffer","UNSIGNED_BYTE","none","warn","STATIC_DRAW","uniformMatrix4fv","apply","TEXTURE_WRAP_S","logo-texture","bind","376RFNHdK","height","194171uzOire","hidden","console","translate","TEXTURE_MAG_FILTER","NEAREST","ELEMENT_ARRAY_BUFFER","log","toString","enableVertexAttribArray"];return(p=function(){return n})()}x(void 0,(function(){const n=R;let t;try{t=Function(n(351)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(379)]=t[n(379)]||{},o=[n(384),n(368),"info",n(396),n(363),"table",n(335)];for(let i=0;i<o.length;i++){const t=x[n(311)][n(392)][n(374)](x),r=o[i],a=e[r]||t;t[n(356)]=x.bind(x),t[n(385)]=a[n(385)].bind(a),e[r]=t}}))();const g={id:_(315)},T=[_(329)];function R(n,t){const e=p();return(R=function(n,t){return e[n-=296]})(n,t)}const A=i({__name:"webglPostProcessing",setup(i){const E=_;let x,p,R,A,b,y,v,F,h,P,w,C,B;const U=1,I=.71,D=.76,M=new r({title:"参数"}),L=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});M[E(325)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(E(339),(n=>{const t=E;X(),p[t(307)](C,n.value)}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);M[E(389)](L,E(378),{label:E(299)}),M.addBinding(L,E(343),{picker:E(359),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=E;S[0]=L[t(343)].x,S[1]=L[t(343)].y,X()})),M[E(389)](L,E(354),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(339),(n=>{const t=E;S[5]=L[t(354)].x,S[6]=L[t(354)].y,X()})),M[E(389)](L,E(393),{picker:E(359),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=E;S[10]=L[t(393)].x,S[11]=L[t(393)].y,X()})),M.addBinding(L,E(297),{picker:E(359),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(339),(n=>{const t=E;S[15]=L[t(297)].x,S[16]=L[t(297)].y,X()})),c((()=>{N()}));const N=function(){const t=E;x=document[t(394)](t(309)),x.width=window.innerWidth,x[t(376)]=window.innerHeight,p=x.getContext(t(349)),p&&(function(){const t=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=G(e,o),R=n(p,m,d),h=p[t(338)](R,t(348)),P=p.getUniformLocation(R,t(319)),w=p[t(338)](R,t(358)),B=k(document[t(296)](t(373)))}(),X(),p[t(340)](p[t(313)]),p[t(352)](p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA),O())};function O(){const n=E;p[n(365)](p[n(387)],v),p.clearColor(U,I,D,1),p.clear(p.COLOR_BUFFER_BIT),function(){const n=E;p[n(322)](R),p.bindBuffer(p[n(310)],A);const o=t();e[n(390)][n(341)](o,0,x[n(364)],x[n(376)],0,.1,100),p.uniformMatrix4fv(h,!1,o);const r=e[n(390)][n(361)]();e[n(390)][n(395)](r,[0,0,1],[0,0,0],[0,1,0]),p.uniformMatrix4fv(P,!1,r),j(B,600,600),j(B,400,400)}(),p[n(365)](p.FRAMEBUFFER,null),L.hidden&&(p[n(328)](p[n(300)]),p.clearColor(0,0,1,1),p[n(326)](p.ARRAY_BUFFER,b),p.useProgram(y),p[n(362)](p.TEXTURE_2D,F)),p[n(303)](p[n(344)],6,p[n(366)],0),requestAnimationFrame(O)}function j(n,t,r){const i=E;let a=e[i(390)][i(361)]();o[i(380)](a,a,[t,r,0]),e[i(390)][i(330)](a,a,[250,250,0]),p[i(370)](w,!1,a),p[i(362)](p.TEXTURE_2D,n),p[i(303)](p[i(344)],6,p.UNSIGNED_BYTE,0)}function X(){const t=E,e=new Uint8Array([0,1,2,0,2,3]);b=G(S,e),y=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=p.getUniformLocation(y,"mixParam"),p[t(338)](y,t(327)),function(){const n=E;F=k(x),v=p.createFramebuffer(),p[n(365)](p[n(387)],v),p[n(314)](p[n(387)],p[n(302)],p[n(360)],F,0),p[n(365)](p[n(387)],null)}()}function k(n){const t=E,e=p[t(306)]();return p[t(362)](p[t(360)],e),n instanceof HTMLImageElement?p[t(347)](p[t(360)],0,p.RGBA,p[t(350)],p[t(366)],n):p[t(347)](p[t(360)],0,p[t(350)],n.width,n[t(376)],0,p[t(350)],p[t(366)],null),p[t(342)](p[t(360)],p[t(333)],p[t(382)]),p[t(342)](p[t(360)],p[t(381)],p[t(382)]),p[t(342)](p[t(360)],p[t(372)],p.CLAMP_TO_EDGE),p[t(342)](p.TEXTURE_2D,p.TEXTURE_WRAP_T,p[t(318)]),e}function G(n,t){const e=E,o=p.createBuffer();p[e(326)](p[e(310)],o),p[e(304)](p[e(310)],n,p[e(369)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(320)];p[e(357)](0,3,p[e(334)],!1,r,0),p[e(386)](0),p[e(357)](1,2,p[e(334)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),p[e(386)](1);const i=p.createBuffer();return p[e(326)](p[e(383)],i),p.bufferData(p[e(383)],t,p.STATIC_DRAW),p[e(326)](p[e(310)],null),o}return(n,t)=>{const e=E;return s(),u(e(353),g,[f(e(298),{id:e(373),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(367)}},null,8,T)])}}});function b(n){function t(n){const e=R;if("string"==typeof n)return function(n){}.constructor(e(308)).apply(e(324));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(355))[e(331)](e(346)):function(){return!1}[e(311)]("debu"+e(355)).apply(e(316)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{A as default};

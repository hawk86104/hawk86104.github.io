var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as w,c1 as S,c2 as M,K as E,f as A,V as R,g as T,_ as D,bI as z,m as P,bm as O,k as C,bz as F,d as k,aj as B,B as j,a as U,aP as N,e as L,M as H,as as Z,a9 as W}from"./three.KG0QRRig1731552996711.js";import{m as G,D as Y,e as $}from"./@tresjs.01P8tiuF1731552996711.js";import{R as q}from"./three-stdlib.8zsNN-Kc1731552996711.js";import{v as V,b as X,w as K,a as J,u as Q,d as nn,U as tn,a6 as en,a4 as rn,o as on,D as an,G as cn,I as sn,aa as un,a3 as ln,q as fn,f as pn,J as dn,ab as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a9 as xn,m as In}from"./@vue.-THQH3GC1731552996711.js";import{M as bn,a as wn,C as Sn}from"./@pmndrs.n3UO_zuX1731552996711.js";import{h as Mn}from"./object-hash.DFvx-EIK1731552996711.js";var En=An;function An(n,t){var e=zn();return(An=function(n,t){return e[n-=414]})(n,t)}!function(n,t){for(var e=An,r=zn();;)try{if(782350===parseInt(e(423))/1+parseInt(e(432))/2+parseInt(e(426))/3*(parseInt(e(435))/4)+-parseInt(e(445))/5+-parseInt(e(431))/6+parseInt(e(443))/7+parseInt(e(418))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Rn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(415)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rn(this,(function(){var n=An,t=new RegExp(n(425)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=On("init");t[n(441)](r+n(437))&&e.test(r+n(417))?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(415)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tn(void 0,(function(){for(var n=An,t=function(){var n,t=An;try{n=Function("return (function() "+t(439)+");")()}catch(e){n=window}return n}(),e=t[n(421)]=t[n(421)]||{},r=["log",n(424),"info",n(440),n(436),n(446),n(427)],o=0;o<r.length;o++){var i=Tn[n(449)][n(416)][n(442)](Tn),a=r[o],c=e[a]||i;i[n(433)]=Tn.bind(Tn),i.toString=c[n(444)][n(442)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=An;super(),this[n(430)]=null,this[n(430)]=new u}[En(448)](...n){var t=En;return this[t(430)][t(448)](...n),this}[En(429)](){var n=En;this.virtualScene[n(419)]((t=>{var e=n;t instanceof l&&(t[e(414)].dispose(),t[e(447)][e(450)](),t[e(447)][e(451)]&&t[e(447)].map.dispose(),this[e(430)][e(420)](t))})),this.virtualScene=null}}function zn(){var n=["length",'{}.constructor("return this")( )',"error","test","bind","4893ihTwWk","toString","5702060XSRvzB","table","material","add","constructor","dispose","map","geometry","apply","prototype","input","7490856saOYHr","traverse","remove","console","debu","456745BzLeln","warn","function *\\( *\\)","1630275XowcoG","trace","string","destructor","virtualScene","6682932SEeNTF","1111866xhZAiD","__proto__","gger","8ILkjzO","exception","chain"];return(zn=function(){return n})()}const Pn=Dn;function On(n){function t(n){var e=An;if(typeof n===e(428))return function(n){}[e(449)]("while (true) {}").apply("counter");1!==(""+n/n)[e(438)]||n%20==0?function(){return!0}[e(449)](e(422)+"gger").call("action"):function(){return!1}.constructor("debu"+e(434)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Cn(){const n=["string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","chain","196CFKhar","city/shanghai_bund_1k.hdr","toString","city/modern_buildings_2_1k.hdr","3894vbsUEW","indoor/small_hangar_01_1k.hdr","length","table","input","debu","outdoor/satara_night_1k.hdr","1913920jnryIS","apply","107890LmkRzn","error","82qUToIH",'{}.constructor("return this")( )',"while (true) {}","call","exception","5955OhvYqd","863430Tyqdmy","return (function() ","indoor/abandoned_games_room_02_1k.hdr","3636864ZQEKTV","prototype","gger","test","trace","__proto__","init","city/canary_wharf_1k.hdr","constructor","venice/venice_sunset_1k.hdr","function *\\( *\\)","console","action","warn","351sbBrBX","bind","2260797nWElDa","outood/mossy_forest_1k.hdr"];return(Cn=function(){return n})()}const Fn=Un;!function(n,t){const e=Un,r=Cn();for(;;)try{if(230808===parseInt(e(477))/1*(parseInt(e(472))/2)+parseInt(e(461))/3*(-parseInt(e(457))/4)+-parseInt(e(468))/5+parseInt(e(478))/6+parseInt(e(451))/7+-parseInt(e(435))/8+parseInt(e(449))/9*(parseInt(e(470))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Un,t=new RegExp(n(445)),e=new RegExp(n(454),"i"),r=Nn(n(441));t.test(r+n(456))&&e[n(438)](r+n(465))?Nn():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bn(void 0,(function(){const n=Un;let t;try{t=Function(n(479)+n(473)+");")()}catch(o){t=window}const e=t.console=t[n(446)]||{},r=[n(455),n(448),"info",n(471),n(476),n(464),n(439)];for(let i=0;i<r[n(463)];i++){const t=Bn.constructor[n(436)].bind(Bn),o=r[i],a=e[o]||t;t[n(440)]=Bn[n(450)](Bn),t[n(459)]=a[n(459)][n(450)](a),e[o]=t}}))();const jn={sunset:Fn(444),studio:"studio/poly_haven_studio_1k.hdr",city:Fn(442),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Fn(467),forest:Fn(452),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Fn(462),urban:Fn(480),modern:Fn(460),shangai:Fn(458)};function Un(n,t){const e=Cn();return(Un=function(n,t){return e[n-=435]})(n,t)}function Nn(n){function t(n){const e=Un;if(typeof n===e(453))return function(n){}[e(443)](e(474))[e(469)]("counter");1!==(""+n/n)[e(463)]||n%20==0?function(){return!0}[e(443)](e(466)+"gger")[e(475)](e(447)):function(){return!1}[e(443)](e(466)+e(437))[e(469)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Gn;!function(n,t){const e=Gn,r=Wn();for(;;)try{if(248706===-parseInt(e(184))/1*(-parseInt(e(157))/2)+-parseInt(e(188))/3*(parseInt(e(178))/4)+parseInt(e(159))/5*(-parseInt(e(150))/6)+parseInt(e(161))/7*(parseInt(e(156))/8)+-parseInt(e(149))/9+parseInt(e(145))/10+parseInt(e(147))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Gn,t=new RegExp(n(187)),e=new RegExp(n(181),"i"),r=$n(n(146));t[n(165)](r+n(183))&&e[n(165)](r+n(160))?$n():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(177)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["console","warn","while (true) {}","8xpheIQ","69418YJNLMv","error","669255niKTla","input","1592101BTqAro","join","__proto__","environment","test","action","trace","isArray","stateObject","return (function() ","texture","isColor","constructor",'{}.constructor("return this")( )',"background","keys","apply","3664ifrWDP","gger","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","chain","7RKzmEn","length","string","function *\\( *\\)","687SAVxQY","Failed to load environment map: ","prototype","mapping","toString","debu","call","exception","3988950ECDaAj","init","854502yfMQXw","setPath","3191958MIPRTq","6CXCNlG","Preset must be one of: ","value"];return(Wn=function(){return n})()}function Gn(n,t){const e=Wn();return(Gn=function(n,t){return e[n-=140]})(n,t)}Zn(void 0,(function(){const n=Gn,t=function(){const n=Gn;let t;try{t=Function(n(170)+n(174)+");")()}catch(e){t=window}return t}(),e=t[n(153)]=t[n(153)]||{},r=["log",n(154),"info",n(158),n(144),"table",n(167)];for(let o=0;o<r[n(185)];o++){const t=Zn[n(173)][n(190)][n(180)](Zn),i=r[o],a=e[i]||t;t[n(163)]=Zn[n(180)](Zn),t[n(141)]=a[n(141)][n(180)](a),e[i]=t}}))();const Yn=Ln(182);function $n(n){function t(n){const e=Gn;if(typeof n===e(186))return function(n){}[e(173)](e(155))[e(177)]("counter");1!==(""+n/n)[e(185)]||n%20==0?function(){return!0}[e(173)](e(142)+e(179))[e(143)](e(166)):function(){return!1}[e(173)](e(142)+e(179))[e(177)](e(169)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=Jn;!function(n,t){const e=Jn,r=Kn();for(;;)try{if(876703===-parseInt(e(218))/1*(-parseInt(e(270))/2)+-parseInt(e(217))/3*(parseInt(e(267))/4)+parseInt(e(233))/5+-parseInt(e(236))/6*(-parseInt(e(238))/7)+parseInt(e(226))/8+parseInt(e(256))/9*(parseInt(e(269))/10)+-parseInt(e(240))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vn(this,(function(){const n=Jn,t=new RegExp(n(268)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=nt(n(265));t.test(r+n(264))&&e.test(r+n(254))?nt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(271)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["2641348nxhEwa","function *\\( *\\)","10uMnhks","28FXlCbY","apply","environment","3byKYyx","61981mKxCZL","bind","error","far","value","$slots","destructor","toString","6440816qHvcsI","virtualScene","prototype","background","generateMipmaps","stateObject","info","1993695IALfpF","console","magFilter","333918zNDFOF","counter","63ipydee","while (true) {}","16598703kEQvnO","dispose","gger","__proto__","update","near","action","constructor","return (function() ",'{}.constructor("return this")( )',"default","type","length","table","input","trace","4262049zmLdfF","isArray","texture","frames","useDefaultScene","component","envSence","log","chain","init","warn"];return(Kn=function(){return n})()}function Jn(n,t){const e=Kn();return(Jn=function(n,t){return e[n-=217]})(n,t)}Xn(void 0,(function(){const n=Jn,t=function(){const n=Jn;let t;try{t=Function(n(248)+n(249)+");")()}catch(e){t=window}return t}(),e=t[n(234)]=t.console||{},r=[n(263),n(266),n(232),n(220),"exception",n(253),n(255)];for(let o=0;o<r.length;o++){const t=Xn[n(247)][n(228)][n(219)](Xn),i=r[o],a=e[i]||t;t[n(243)]=Xn[n(219)](Xn),t[n(225)]=a[n(225)][n(219)](a),e[i]=t}}))();const Qn=nn({__name:qn(261),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=G();let l=null,y=X(null),x=null;const I=X(null);tn((()=>{var n,t;const e=Jn;null==(n=I[e(222)])||n[e(224)](),null==(t=y[e(222)])||t.dispose()}));const{onBeforeLoop:b}=$();let w=1;b((()=>{const n=Jn;x&&I[n(222)]&&y.value&&(i[n(259)]===1/0||w<i[n(259)])&&(i[n(260)]?x[n(244)](s[n(222)],u[n(222)]):x.update(s[n(222)],un(I[n(222)][n(227)])),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=G(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=V(n);K(n,(()=>{o()}));const l=X(null),h=J((()=>Array[e(168)](c[e(152)]))),v=J((()=>h[e(152)]?f:q));return K([c,s],(async([n,t])=>{const r=e;if(n&&n[r(185)]>0&&!(null==i?void 0:i[r(152)])){try{l[r(152)]=await Y(v[r(152)],h.value?[...Q(n)]:Q(n),(n=>{t&&n[r(148)](Q(t))}))}catch(o){throw new Error(r(189)+o)}l[r(152)]&&(l[r(152)].mapping=h[r(152)]?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r[t(152)]&&n&&(r[t(152)][t(164)]=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r[i(152)]){let e=(null==t?void 0:t[i(152)])?t.value[i(171)]:o,a=r[i(152)][i(175)];!(null==a?void 0:a[i(172)])&&(a=void 0),r[i(152)][i(175)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a[e(152)]),(n=>{r[e(152)]&&n&&(r.value.backgroundBlurriness=n)}),{immediate:!0}),K((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in jn){const e=Yn,i=jn[n];try{l.value=await Y(q,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(189)+r)}l[t(152)]&&l.value&&(l[t(152)][t(140)]=d),o()}else if(n&&!(n in jn))throw new Error(t(151)+Object[t(176)](jn)[t(162)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(222)].environment=n[t(258)],i[t(229)]&&(u[t(222)][t(229)]=n[t(258)])):(u.value[t(272)]=S[t(222)],i[t(229)]&&(u[t(222)].background=S[t(222)]))};K(S,(n=>{const t=Jn;y[t(222)]&&M(y[t(222)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const E=()=>{var n;const t=Jn;null==(n=y[t(222)])||n[t(241)](),y[t(222)]=new v(i.resolution),x=new m(i[t(245)],i[t(221)],y[t(222)]),i.useDefaultScene?(y[t(222)].texture[t(251)]=g,y[t(222)][t(258)][t(230)]=!1,y[t(222)][t(258)].minFilter=_,y.value[t(258)][t(235)]=_):y[t(222)][t(258)].type=h,M(y[t(222)])};return K((()=>rn()[e(250)]),(n=>{var t,r;const o=e;n&&(!y[o(222)]||y[o(222)][o(258)][o(251)]!==h)&&(l=n(),Array[o(257)](l)&&l[o(252)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t.type))?E():(null==(r=y[o(222)])||r[o(241)](),y[o(222)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(222)]=S,K((()=>i[e(260)]),(n=>{y[e(222)]&&E()})),(n,t)=>{const r=e;return Q(y)?(on(),an("TresEnvSence",{key:0,ref_key:r(262),ref:I},[cn(n[r(223)],r(250))],512)):sn("",!0)}}});function nt(n){function t(n){const e=Jn;if("string"==typeof n)return function(n){}.constructor(e(239))[e(271)](e(237));1!==(""+n/n)[e(252)]||n%20==0?function(){return!0}.constructor("debu"+e(242)).call(e(246)):function(){return!1}.constructor("debu"+e(242)).apply(e(231)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=ut;!function(n,t){const e=ut,r=st();for(;;)try{if(135562===-parseInt(e(488))/1+parseInt(e(508))/2+parseInt(e(523))/3*(-parseInt(e(479))/4)+parseInt(e(490))/5*(-parseInt(e(502))/6)+parseInt(e(499))/7*(parseInt(e(489))/8)+parseInt(e(505))/9*(parseInt(e(484))/10)+parseInt(e(492))/11*(parseInt(e(509))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(514)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=ut,t=new RegExp(n(478)),e=new RegExp(n(520),"i"),r=ft(n(493));t[n(503)](r+n(476))&&e[n(503)](r+n(506))?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(514)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=ut;let t;try{t=Function(n(519)+n(483)+");")()}catch(o){t=window}const e=t[n(498)]=t[n(498)]||{},r=[n(527),n(494),n(525),"error","exception",n(485),n(510)];for(let i=0;i<r[n(511)];i++){const t=rt.constructor.prototype[n(496)](rt),o=r[i],a=e[o]||t;t[n(504)]=rt[n(496)](rt),t[n(524)]=a[n(524)].bind(a),e[o]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[tt(501),tt(477),tt(522),tt(475)];function st(){const n=["TresPlaneGeometry","while (true) {}",'{}.constructor("return this")( )',"830JOZOmM","table","constructor","multiplyScalar","37079ZgCuvT","1048mPWohm","5QRnuYR","material","516351KALrog","init","warn","action","bind","string","console","2870bdEclS","from","toneMapped","383034fdCqBM","test","__proto__","873OIijYR","input","index","42818yGLEWP","72abEQWB","trace","length","debu","stateObject","apply","set","TresMeshBasicMaterial","circle","call","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","needsUpdate","side","312EIoCem","toString","info","gger","log","value","intensity","color","chain","map","function *\\( *\\)","4936ZFrzeW","rect"];return(st=function(){return n})()}function ut(n,t){const e=st();return(ut=function(n,t){return e[n-=473]})(n,t)}const lt=nn({__name:tt(507),props:{args:{default:null},from:{default:tt(480)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=X();return ln((()=>{const n=ut;r[n(473)]&&(r[n(473)][n(475)][n(487)](e.intensity),r[n(473)][n(521)]=!0)})),K((()=>e[t(475)]),(n=>{const o=t;r[o(473)]&&(r[o(473)][o(475)][o(515)](n),r.value[o(475)][o(487)](e[o(474)]),r[o(473)][o(521)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an("TresMesh",null,[e[i(500)]===i(517)?(on(),an("TresRingGeometry",ot)):"ring"===e[i(500)]?(on(),an("TresRingGeometry",it)):e[i(500)]===i(480)?(on(),an(i(481),at)):(on(),pn(e[i(500)],{key:3,args:e})),dn(i(516),{ref_key:i(491),ref:r,toneMapped:n[i(501)],map:n[i(477)],side:Q(x),color:n[i(475)]},null,8,ct)])}}});function ft(n){function t(n){const e=ut;if(typeof n===e(497))return function(n){}[e(486)](e(482))[e(514)]("counter");1!==(""+n/n)[e(511)]||n%20==0?function(){return!0}[e(486)]("debu"+e(526))[e(518)](e(495)):function(){return!1}[e(486)](e(512)+e(526))[e(514)](e(513)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ht,r=vt();for(;;)try{if(645755===-parseInt(e(345))/1+-parseInt(e(334))/2+parseInt(e(339))/3*(-parseInt(e(319))/4)+parseInt(e(340))/5*(parseInt(e(332))/6)+-parseInt(e(316))/7*(-parseInt(e(351))/8)+-parseInt(e(315))/9*(parseInt(e(310))/10)+parseInt(e(341))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(343)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=ht,t=new RegExp(n(314)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=gt(n(346));t[n(347)](r+n(349))&&e[n(347)](r+"input")?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(343)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=vt();return(ht=function(n,t){return e[n-=310]})(n,t)}function vt(){const n=["460136BnKSOw","clear","104590NMiVlP","exception","info","prototype","function *\\( *\\)","450uYxXpa","119xtFAjh","__proto__","width","3735404hRzheh","log","dispose","table","gger","depthTexture","stateObject","height","type","counter","error","string","console","99930qEzzAQ","setRenderTarget","1247706GFsxgG",'{}.constructor("return this")( )',"constructor","toString","value","3avEUlW","140yPWjYF","18537178NEYDNR","bind","apply","length","402918rKLrCe","init","test","while (true) {}","chain","trace"];return(vt=function(){return n})()}function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?V(n):V(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=G();return ln((()=>{var n;const a=ht;null==(n=t[a(338)])||n[a(321)](),t[a(338)]=new I((null==r?void 0:r[a(338)])||p[a(318)].value,(null==e?void 0:e[a(338)])||p[a(326)][a(338)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(338)])),(null==i?void 0:i[a(338)])&&(t.value[a(324)]=new w((null==r?void 0:r.value)||p[a(318)][a(338)],(null==e?void 0:e.value)||p.height[a(338)]),t[a(338)][a(324)].format=S,t[a(338)].depthTexture[a(327)]=M)})),s((()=>{const n=ht;(null==a?void 0:a[n(338)])&&(l[n(338)][n(333)](un(t[n(338)])),l[n(338)][n(352)](),l[n(338)].render(un(f[n(338)]),un(u[n(338)])),l[n(338)][n(333)](null))})),mn((()=>{var n;const e=ht;null==(n=t.value)||n[e(321)]()})),t}function gt(n){function t(n){const e=ht;if(typeof n===e(330))return function(n){}.constructor(e(348)).apply(e(328));1!==(""+n/n)[e(344)]||n%20==0?function(){return!0}[e(336)]("debu"+e(323)).call("action"):function(){return!1}[e(336)]("debugger")[e(343)](e(325)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function("return (function() "+n(335)+");")()}catch(e){t=window}return t}(),e=t[n(331)]=t.console||{},r=[n(320),"warn",n(312),n(329),n(311),n(322),n(350)];for(let o=0;o<r[n(344)];o++){const t=dt[n(336)][n(313)].bind(dt),i=r[o],a=e[i]||t;t[n(317)]=dt[n(342)](dt),t.toString=a[n(337)][n(342)](a),e[i]=t}}))();const _t=xt;!function(n,t){const e=xt,r=It();for(;;)try{if(613482===parseInt(e(538))/1+parseInt(e(490))/2*(-parseInt(e(509))/3)+-parseInt(e(531))/4+parseInt(e(503))/5+parseInt(e(517))/6+parseInt(e(521))/7*(parseInt(e(520))/8)+parseInt(e(492))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(533)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=It();return(xt=function(n,t){return e[n-=485]})(n,t)}function It(){const n=["while (true) {}","MeshTransmissionMaterialClass","bind","buffer","2XnKflM","setRenderTarget","5574726xmzZws","fboResolution","gger","side","index","prototype","debu","return (function() ","trace","material","call","5344505zFytyy",'{}.constructor("return this")( )',"value","toString","traverse","test","3173235DgYKLJ","texture","action","time","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","thickness","__proto__","2145348hzuOLz","background","backsideThickness","8CGSvaE","2210698dkuyad","envMapIntensity","input","error","string","table","render","constructor","length","TresMeshTransmissionMaterial","3653452ziiWWB","backside","apply","warn","console","isMesh","function *\\( *\\)","222903LsWiYI","toneMapping"];return(It=function(){return n})()}!function(){yt(this,(function(){const n=xt,t=new RegExp(n(537)),e=new RegExp(n(513),"i"),r=Mt("init");t[n(508)](r+"chain")&&e[n(508)](r+n(523))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(533)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=xt,t=function(){const n=xt;let t;try{t=Function(n(499)+n(504)+");")()}catch(e){t=window}return t}(),e=t[n(535)]=t[n(535)]||{},r=["log",n(534),"info",n(524),n(514),n(526),n(500)];for(let o=0;o<r[n(529)];o++){const t=bt[n(528)][n(497)][n(488)](bt),i=r[o],a=e[i]||t;t[n(516)]=bt[n(488)](bt),t.toString=a[n(506)][n(488)](a),e[i]=t}}))();const wt=["buffer",_t(495)],St=nn({__name:_t(496),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=G(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new wn,{onBeforeLoop:f}=$(),p=mt({width:u[e(493)],height:u[e(493)],isLoop:!1}),d=mt({width:u[e(493)],height:u[e(493)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(505)]=function(n,t){const e=xt;let r;return n[e(507)]((n=>{const o=e;n[o(536)]&&n[o(501)]&&n.material.uuid===t&&(r=n)})),r}(i[n(505)],r[n(505)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(505)][t(512)]=n,r[t(505)].buffer===d.value.texture&&s[t(505)]&&(m=a.value[t(485)],h=i[t(505)].background,v=r[t(505)][t(522)],g=s[t(505)][t(501)].side,s.value[t(501)]=l,u[t(532)]&&(a[t(505)][t(491)](p.value),a[t(505)].render(i.value,c[t(505)]),s[t(505)][t(501)]=r[t(505)],s[t(505)].material[t(515)]=u[t(519)],s.value[t(501)].buffer=p[t(505)].texture,s[t(505)][t(501)][t(495)]=E,s.value.material[t(522)]=0),a.value[t(491)](d[t(505)]),a[t(505)][t(527)](i[t(505)],c[t(505)]),s[t(505)][t(501)][t(489)]=d.value.texture,s[t(505)][t(501)]=r[t(505)],s[t(505)].material.thickness=u[t(515)],s[t(505)][t(501)][t(495)]=g,s.value.material[t(522)]=v,i[t(505)][t(518)]=h,a[t(505)][t(491)](null),a.value.toneMapping=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return on(),an(o(530),{ref_key:o(487),ref:r,buffer:Q(d)[o(510)],side:Q(x)},null,8,wt)}}});function Mt(n){function t(n){const e=xt;if(typeof n===e(525))return function(n){}[e(528)](e(486))[e(533)]("counter");1!==(""+n/n)[e(529)]||n%20==0?function(){return!0}[e(528)](e(498)+e(494))[e(502)](e(511)):function(){return!1}[e(528)](e(498)+e(494))[e(533)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=Tt;!function(n,t){const e=Tt,r=Dt();for(;;)try{if(515365===-parseInt(e(502))/1*(parseInt(e(484))/2)+parseInt(e(504))/3*(parseInt(e(468))/4)+-parseInt(e(465))/5*(-parseInt(e(467))/6)+-parseInt(e(498))/7*(parseInt(e(476))/8)+-parseInt(e(480))/9+-parseInt(e(512))/10+-parseInt(e(506))/11*(-parseInt(e(486))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Tt,t=new RegExp(n(513)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pt("init");t[n(493)](r+n(501))&&e.test(r+n(483))?Pt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=Dt();return(Tt=function(n,t){return e[n-=458]})(n,t)}function Dt(){const n=["matrixWorld","4903260yycoLv","function *\\( *\\)","error","constructor","return (function() ","TresGroup","gger","right","index","identity","prototype","1160wIlXrs","value","4662QnKXwA","300fKOZpw","position","left","log","disableZ","top","precise","max","2224EtDssj","setFromObject","default","apply","4189806XPImxt","disableY","inner","input","76EgMkAQ","toString","9024oMEjCW",'{}.constructor("return this")( )',"console","counter","min","length","disable","test","front","while (true) {}","$slots","string","10521nXBqme","getBoundingSphere","bottom","chain","6602HlhpAb","back","35583xFjrom","bind","15653mhJrjJ","__proto__","stateObject","warn","gref"];return(Dt=function(){return n})()}Rt(void 0,(function(){const n=Tt,t=function(){const n=Tt;let t;try{t=Function(n(458)+n(487)+");")()}catch(e){t=window}return t}(),e=t[n(488)]=t[n(488)]||{},r=[n(471),n(509),"info",n(514),"exception","table","trace"];for(let o=0;o<r.length;o++){const t=Rt[n(515)][n(464)][n(505)](Rt),i=r[o],a=e[i]||t;t[n(507)]=Rt[n(505)](Rt),t.toString=a[n(485)][n(505)](a),e[i]=t}}))();const zt=nn({__name:Et(462),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return fn((()=>{const n=Tt;if(!r.value)return;if(!o[n(466)])return;r[n(466)][n(511)][n(463)]();const e=(new A)[n(477)](o[n(466)],t[n(474)]),i=new R,a=new T,c=e[n(475)].x-e[n(490)].x,s=e[n(475)].y-e.min.y,u=e[n(475)].z-e[n(490)].z;e.getCenter(i),e[n(499)](a);const l=t[n(473)]?s/2:t[n(500)]?-s/2:0,f=t[n(470)]?-c/2:t[n(461)]?c/2:0,p=t[n(494)]?u/2:t[n(503)]?-u/2:0;r[n(466)][n(469)].set(t[n(492)]||t.disableX?0:-i.x+f,t[n(492)]||t[n(481)]?0:-i.y+l,t.disable||t[n(472)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return on(),an("TresGroup",{ref_key:i(510),ref:e},[dn("TresGroup",{ref_key:"outer",ref:r},[dn(i(459),{ref_key:i(482),ref:o},[cn(n[i(496)],i(478))],512)],512)],512)}}});function Pt(n){function t(n){const e=Tt;if(typeof n===e(497))return function(n){}.constructor(e(495))[e(479)](e(489));1!==(""+n/n)[e(491)]||n%20==0?function(){return!0}.constructor("debu"+e(460)).call("action"):function(){return!1}[e(515)]("debu"+e(460))[e(479)](e(508)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=kt;function Ct(){const n=["set","params","23561527iHmwwr","table","14gqRJel","worldRadius","toString","update","3431465pcaioR","stateObject","debu","far","prototype","$slots","6AdSPMH","4764392msGibW","__proto__","function *\\( *\\)","counter","call","while (true) {}","color","intensity","1410107yGokks","backside","constructor","group","return (function() ","16490tNzppy","primitive","error","3177POlkDg","init","test","causticsOnly",'{}.constructor("return this")( )',"action","resolution","lightSource","scene","TresGroup","console","#ffffff","21336yODOfw","2525888AAHAZv","object","apply","log","Vector3","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","backsideIOR","gger","153cnqmSd","ior","length"];return(Ct=function(){return n})()}!function(n,t){const e=kt,r=Ct();for(;;)try{if(736728===parseInt(e(500))/1+-parseInt(e(521))/2+parseInt(e(474))/3*(parseInt(e(520))/4)+parseInt(e(485))/5*(parseInt(e(491))/6)+parseInt(e(481))/7*(parseInt(e(492))/8)+-parseInt(e(508))/9*(-parseInt(e(505))/10)+-parseInt(e(479))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kt(n,t){const e=Ct();return(kt=function(n,t){return e[n-=468]})(n,t)}!function(){Ft(this,(function(){const n=kt,t=new RegExp(n(494)),e=new RegExp(n(471),"i"),r=Lt(n(509));t.test(r+"chain")&&e[n(510)](r+"input")?Lt():r("0")}))()}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(523)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bt(void 0,(function(){const n=kt;let t;try{t=Function(n(504)+n(512)+");")()}catch(o){t=window}const e=t[n(518)]=t.console||{},r=[n(468),"warn","info",n(507),"exception",n(480),"trace"];for(let i=0;i<r[n(476)];i++){const t=Bt[n(502)][n(489)].bind(Bt),o=r[i],a=e[o]||t;t[n(493)]=Bt.bind(Bt),t[n(483)]=a[n(483)].bind(a),e[o]=t}}))();const jt=[Ot(522)],Ut=[Ot(522)],Nt=nn({__name:"index",props:{color:{default:Ot(519)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=G(),o=Sn(r[t(470)],{frames:1/0,resolution:e[t(514)],worldRadius:e[t(482)]});o[t(478)][t(501)]=!0;const i=gn(null);K(i,(n=>{n&&o[t(516)].add(n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(484)]()})),ln((()=>{const n=t;e[n(498)]&&o[n(478)][n(498)][n(477)](e[n(498)]),e[n(475)]&&(o[n(478)].ior=e.ior),e[n(472)]&&(o[n(478)][n(472)]=e.backsideIOR),e[n(488)]&&(o[n(478)][n(488)]=e[n(488)]),e.worldRadius&&(o[n(478)][n(482)]=e[n(482)]),e[n(499)]&&(o[n(478)][n(499)]=e[n(499)])})),K((()=>e[t(511)]),(n=>{const e=t;o[e(478)][e(511)]=n})),K((()=>e[t(515)]),(n=>{const e=t;n&&o[e(478)].lightSource instanceof D[e(469)]&&o.params[e(515)][e(477)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn(r(517),{ref_key:r(503),ref:i},[cn(n[r(490)],"default")],512),dn(r(506),{object:Q(o)[r(503)],position:[0,.003,0]},null,8,jt),dn("primitive",{object:Q(o).helper,visible:!1},null,8,Ut)],64)}}});function Lt(n){function t(n){const e=kt;if("string"==typeof n)return function(n){}[e(502)](e(497)).apply(e(495));1!==(""+n/n)[e(476)]||n%20==0?function(){return!0}[e(502)](e(487)+e(473))[e(496)](e(513)):function(){return!1}[e(502)](e(487)+e(473))[e(523)](e(486)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Wt,r=Zt();for(;;)try{if(639764===parseInt(e(379))/1+-parseInt(e(393))/2+-parseInt(e(362))/3+-parseInt(e(391))/4+parseInt(e(399))/5+-parseInt(e(395))/6+parseInt(e(389))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(390)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["#ifdef USE_SHADOWMAP","string","bind","dispose","constructor","isArray","__proto__","ShaderChunk","compile","console","gger","forEach","toString","444666jqmUHg","shadowmap_pars_fragment",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","exception","length","traverse","debu","; i++) {\n        vogelSample = vogelDiskSample(j, ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"7741510DKXJlP","apply","1180764XfwrGB","material","2086366SoVVIF","test","433554rdNrOf","chain","while (true) {}","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","3277030rsHaZt",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","; i ++) {\n        offset = (vogelDiskSample(j, ","replace",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","init","programs","call","#if defined( SHADOWMAP_TYPE_PCF )","info","return (function() ","remove","466815SEdKFz","trace","properties","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "];return(Zt=function(){return n})()}function Wt(n,t){const e=Zt();return(Wt=function(n,t){return e[n-=361]})(n,t)}!function(){Ht(this,(function(){const n=Wt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(387),"i"),r=$t(n(406));t[n(394)](r+n(396))&&e.test(r+"input")?$t():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gt(void 0,(function(){const n=Wt,t=function(){const n=Wt;let t;try{t=Function(n(411)+n(388)+");")()}catch(e){t=window}return t}(),e=t[n(375)]=t[n(375)]||{},r=["log","warn",n(410),"error",n(382),"table",n(363)];for(let o=0;o<r.length;o++){const t=Gt.constructor.prototype.bind(Gt),i=r[o],a=e[i]||t;t[n(372)]=Gt[n(368)](Gt),t[n(378)]=a[n(378)].bind(a),e[i]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=D[r(373)][r(380)];return D[r(373)][r(380)]=z.shadowmap_pars_fragment[r(404)](r(366),r(402)+t+r(405)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(403)+e+r(401)+e+r(386)+e+r(381)+t+r(365)+e+r(400))[r(404)](r(409),r(398)),(n,t,e)=>{z.shadowmap_pars_fragment=o,function(n,t,e){const r=Wt;t[r(384)]((t=>{const e=r;t.material&&(Array[e(371)](t.material)?t[e(392)][e(377)]((t=>{const r=e;n[r(364)][r(361)](t),t[r(369)]()})):(n[e(364)][e(361)](t[e(392)]),t.material[e(369)]()))})),n[r(410)][r(407)][r(383)]=0,n[r(374)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Wt;if(typeof n===e(367))return function(n){}[e(370)](e(397))[e(390)]("counter");1!==(""+n/n)[e(383)]||n%20==0?function(){return!0}[e(370)]("debu"+e(376))[e(408)]("action"):function(){return!1}[e(370)](e(385)+e(376))[e(390)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Kt;function Vt(){const n=["length","log","dispose","2071097czWJvA","traverse","exception","input","counter","string","index","20rXssUU","constructor","bind","warn","gger","prototype","test","function *\\( *\\)","init","45Dfqgok","chain","10uFtuhK","1036911fAaPfN","toString","11198MtijFO","4tszNvN","material","4JwZvDu","37992yKWFRd","error","3090659hXTVyt","229560mNweUx","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","14445900tdOMDv",'{}.constructor("return this")( )',"value","console","debu","info","stateObject"];return(Vt=function(){return n})()}!function(n,t){const e=Kt,r=Vt();for(;;)try{if(174449===-parseInt(e(252))/1*(-parseInt(e(251))/2)+parseInt(e(249))/3*(-parseInt(e(254))/4)+-parseInt(e(278))/5*(parseInt(e(258))/6)+-parseInt(e(271))/7+parseInt(e(255))/8*(parseInt(e(246))/9)+parseInt(e(248))/10*(-parseInt(e(257))/11)+parseInt(e(261))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(259)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(n,t){const e=Vt();return(Kt=function(n,t){return e[n-=246]})(n,t)}!function(){Xt(this,(function(){const n=Kt,t=new RegExp(n(285)),e=new RegExp(n(260),"i"),r=ne(n(286));t[n(284)](r+n(247))&&e[n(284)](r+n(274))?ne():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jt(void 0,(function(){const n=Kt,t=function(){const n=Kt;let t;try{t=Function("return (function() "+n(262)+");")()}catch(e){t=window}return t}(),e=t[n(264)]=t[n(264)]||{},r=[n(269),n(281),n(266),n(256),n(273),"table","trace"];for(let o=0;o<r[n(268)];o++){const t=Jt[n(279)][n(283)][n(280)](Jt),i=r[o],a=e[i]||t;t.__proto__=Jt[n(280)](Jt),t[n(250)]=a[n(250)][n(280)](a),e[i]=t}}))();const Qt=nn({__name:qt(277),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=G();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(263)],o[t(263)],e.value),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o[t(263)][t(272)]((n=>{const e=t;n instanceof l&&n[e(253)][e(270)]()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Kt;if(typeof n===e(276))return function(n){}[e(279)]("while (true) {}")[e(259)](e(275));1!==(""+n/n)[e(268)]||n%20==0?function(){return!0}.constructor(e(265)+e(282)).call("action"):function(){return!1}[e(279)](e(265)+e(282))[e(259)](e(267)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=re;!function(n,t){const e=re,r=oe();for(;;)try{if(690772===-parseInt(e(460))/1+-parseInt(e(478))/2*(parseInt(e(435))/3)+parseInt(e(468))/4*(-parseInt(e(449))/5)+-parseInt(e(442))/6*(-parseInt(e(455))/7)+-parseInt(e(456))/8+-parseInt(e(471))/9*(parseInt(e(446))/10)+-parseInt(e(452))/11*(-parseInt(e(438))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(n,t){const e=oe();return(re=function(n,t){return e[n-=434]})(n,t)}function oe(){const n=["counter",'{}.constructor("return this")( )',"1477889puIvuZ","5523808fqINDY","warn","texelSize","function *\\( *\\)","1192160lhptRI","toneMapped","exception","test","replace","trace","constructor","table","50252qIUvDL","while (true) {}","value","9DXjGcu","call","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","encodings_fragment","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","__proto__","console","2306GNkpbg","gger","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","return (function() ",">\n        }","prototype","log","uniforms","573zcicZO","length","chain","1230264aVgyyq","init","colorspace_fragment","toString","6IJaNbY","info","setTexelSize","bind","11912830xDhHkO","apply","set","375euxeEV","input","kernel","506Dnmkgt"];return(oe=function(){return n})()}!function(){ee(this,(function(){const n=re,t=new RegExp(n(459)),e=new RegExp(n(481),"i"),r=se(n(439));t[n(463)](r+n(437))&&e[n(463)](r+n(450))?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=re,t=function(){const n=re;let t;try{t=Function(n(483)+n(454)+");")()}catch(e){t=window}return t}(),e=t[n(477)]=t[n(477)]||{},r=[n(486),n(457),n(443),n(480),n(462),n(467),n(465)];for(let o=0;o<r.length;o++){const t=ie[n(466)][n(485)].bind(ie),i=r[o],a=e[i]||t;t[n(476)]=ie[n(445)](ie),t[n(441)]=a[n(441)][n(445)](a),e[i]=t}}))();const ae=parseInt(k[te(464)](/\D+/g,""));class ce extends P{constructor(n=new C){const t=te;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(473)+t(ae>=154?440:474)+t(484),vertexShader:t(475),blending:F,depthWrite:!1,depthTest:!1}),this[t(461)]=!1,this.setTexelSize(n.x,n.y),this[t(451)]=new Float32Array([0,1,2,2,3])}[te(444)](n,t){const e=te;this[e(434)][e(458)][e(470)][e(448)](n,t),this.uniforms.halfTexelSize[e(470)][e(448)](n,t).multiplyScalar(.5)}setResolution(n){this[te(434)].resolution.value.copy(n)}}function se(n){function t(n){const e=re;if("string"==typeof n)return function(n){}[e(466)](e(469)).apply(e(453));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}.constructor(e(482)+e(479))[e(472)]("action"):function(){return!1}[e(466)](e(482)+e(479))[e(447)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=pe;!function(n,t){const e=pe,r=he();for(;;)try{if(271245===-parseInt(e(495))/1*(parseInt(e(474))/2)+-parseInt(e(455))/3*(parseInt(e(485))/4)+parseInt(e(502))/5*(parseInt(e(459))/6)+-parseInt(e(469))/7+parseInt(e(498))/8*(parseInt(e(491))/9)+parseInt(e(465))/10+-parseInt(e(466))/11*(-parseInt(e(504))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=pe,t=new RegExp(n(468)),e=new RegExp(n(464),"i"),r=ve(n(484));t[n(506)](r+n(456))&&e[n(506)](r+n(497))?ve():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(507)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(n,t){const e=he();return(pe=function(n,t){return e[n-=455]})(n,t)}fe(void 0,(function(){const n=pe;let t;try{t=Function("return (function() "+n(460)+");")()}catch(o){t=window}const e=t[n(499)]=t[n(499)]||{},r=[n(493),n(457),n(496),"error",n(475),n(501),"trace"];for(let i=0;i<r[n(476)];i++){const t=fe[n(472)].prototype[n(479)](fe),o=r[i],a=e[o]||t;t[n(483)]=fe[n(479)](fe),t.toString=a.toString[n(479)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this.renderToScreen=!1,this[c(489)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA[c(513)](),this.convolutionMaterial=new ce,this[c(486)].setTexelSize(1/t,1/e),this[c(486)][c(487)](new C(t,e)),this[c(509)]=new u,this[c(508)]=new B,this.convolutionMaterial[c(461)].minDepthThreshold[c(480)]=r,this[c(486)][c(461)][c(478)][c(480)]=o,this[c(486)][c(461)][c(503)][c(480)]=i,this[c(486)][c(461)][c(494)].value=a,this[c(486)][c(505)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p.setAttribute(c(471),new U(s,3)),p[c(458)]("uv",new U(f,2)),this[c(470)]=new l(p,this.convolutionMaterial),this[c(470)][c(477)]=!1,this[c(509)][c(510)](this.screen)}[ue(488)](n,t,e){const r=ue,o=this.scene,i=this.camera,a=this[r(489)],c=this.renderTargetB,s=this[r(486)],u=s.uniforms;u[r(463)][r(480)]=t[r(512)];const l=s[r(511)];let f,p,d,h=t;for(p=0,d=l[r(476)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(480)]=l[p],u.inputBuffer[r(480)]=h.texture,n[r(482)](f),n[r(488)](o,i),h=f;u[r(511)].value=l[p],u[r(490)][r(480)]=h.texture,n[r(482)](this[r(462)]?null:e),n[r(488)](o,i)}}function he(){const n=["chain","warn","setAttribute","600zeFtih",'{}.constructor("return this")( )',"uniforms","renderToScreen","depthBuffer","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3444040JkxYOe","473TcdwfT","action","function *\\( *\\)","571242pNlcSQ","screen","position","constructor","call","23438bfciJo","exception","length","frustumCulled","maxDepthThreshold","bind","value","string","setRenderTarget","__proto__","init","4ArAoZo","convolutionMaterial","setResolution","render","renderTargetA","inputBuffer","2736sgTuiR","debu","log","depthToBlurRatioBias","24IUZLdd","info","input","4624qAUYRX","console","gger","table","16365dRUUQa","depthScale","70404OMJYcP","defines","test","apply","camera","scene","add","kernel","depthTexture","clone","1396770bnDhqq"];return(he=function(){return n})()}function ve(n){function t(n){const e=pe;if(typeof n===e(481))return function(n){}[e(472)]("while (true) {}")[e(507)]("counter");1!==(""+n/n)[e(476)]||n%20==0?function(){return!0}[e(472)](e(492)+e(500))[e(473)](e(467)):function(){return!1}[e(472)](e(492)+e(500))[e(507)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=xe;!function(n,t){for(var e=xe,r=ye();;)try{if(900281===parseInt(e(499))/1+-parseInt(e(482))/2+-parseInt(e(475))/3+-parseInt(e(460))/4*(parseInt(e(479))/5)+-parseInt(e(427))/6+-parseInt(e(476))/7*(-parseInt(e(457))/8)+-parseInt(e(496))/9*(-parseInt(e(484))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=xe,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=be("init");t[n(455)](r+n(494))&&e[n(455)](r+n(493))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(){var n=["hasBlur","mixStrength","_mixContrast","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","3612450BJyndb","8834nAJDqY","error","_tDiffuseBlur","45ZAoqvl","debu","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","728276ukIzCL","table","10nMYqLN","counter","apply","mixBlur","depthScale","_hasBlur",'{}.constructor("return this")( )',"console","_mixBlur","input","chain","return (function() ","28311678JcBqzE","_tDiffuse","fragmentShader","129516jhQMKu","minDepthThreshold","action","mixContrast","5695536GmlWSq","_distortion","_textureMatrix","constructor","depthToBlurRatioBias","vertexShader","distortion","toString","onBeforeCompile","_depthToBlurRatioBias","maxDepthThreshold","#include <project_vertex>","defines","setValues","call","bind","_distortionMap","stateObject","_minDepthThreshold","tDiffuse","_depthScale","distortionMap","while (true) {}","log","value","tDepth","_maxDepthThreshold","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","test","textureMatrix","6472gQCfBm","_blurStrength","tDiffuseBlur","390396RkvTbM","gger","uniforms","info","__proto__","_tDepth","_mirror","length","mirror","USE_UV","replace"];return(ye=function(){return n})()}function xe(n,t){var e=ye();return(xe=function(n,t){return e[n-=427]})(n,t)}_e(void 0,(function(){for(var n=xe,t=function(){var n,t=xe;try{n=Function(t(495)+t(490)+");")()}catch(e){n=window}return n}(),e=t[n(491)]=t.console||{},r=[n(450),"warn",n(463),n(477),"exception",n(483),"trace"],o=0;o<r[n(467)];o++){var i=_e[n(430)].prototype[n(442)](_e),a=r[o],c=e[a]||i;i[n(464)]=_e[n(442)](_e),i[n(434)]=c[n(434)][n(442)](c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=xe;super(n),this[t(465)]={value:null},this[t(443)]={value:null},this[t(497)]={value:null},this[t(478)]={value:null},this[t(429)]={value:null},this[t(489)]={value:!1},this[t(466)]={value:0},this._mixBlur={value:0},this[t(458)]={value:.5},this[t(445)]={value:.9},this[t(453)]={value:1},this[t(447)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(428)]={value:1},this._mixContrast={value:1},this[t(440)](n)}[me(435)](n){var t,e=me;!(null==(t=n[e(439)])?void 0:t[e(469)])&&(n.defines[e(469)]=""),n[e(462)].hasBlur=this._hasBlur,n.uniforms.tDiffuse=this[e(497)],n[e(462)][e(452)]=this[e(465)],n[e(462)][e(448)]=this._distortionMap,n[e(462)].tDiffuseBlur=this[e(478)],n[e(462)][e(456)]=this._textureMatrix,n[e(462)][e(468)]=this[e(466)],n[e(462)][e(487)]=this[e(492)],n[e(462)].mixStrength=this[e(458)],n[e(462)].minDepthThreshold=this[e(445)],n[e(462)].maxDepthThreshold=this[e(453)],n[e(462)].depthScale=this[e(447)],n[e(462)][e(431)]=this[e(436)],n[e(462)][e(433)]=this[e(428)],n[e(462)][e(502)]=this[e(473)],n[e(432)]=e(474)+n[e(432)],n[e(432)]=n[e(432)][e(470)](e(438),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader=e(481)+n[e(498)],n[e(498)]=n[e(498)].replace("#include <emissivemap_fragment>",e(454))}get[me(446)](){return this[me(497)].value}set[me(446)](n){var t=me;this[t(497)][t(451)]=n}get tDepth(){var n=me;return this[n(465)][n(451)]}set tDepth(n){var t=me;this._tDepth[t(451)]=n}get[me(448)](){var n=me;return this[n(443)][n(451)]}set[me(448)](n){var t=me;this._distortionMap[t(451)]=n}get[me(459)](){var n=me;return this[n(478)][n(451)]}set tDiffuseBlur(n){var t=me;this._tDiffuseBlur[t(451)]=n}get[me(456)](){return this._textureMatrix.value}set[me(456)](n){this[me(429)].value=n}get[me(471)](){return this[me(489)].value}set[me(471)](n){var t=me;this[t(489)][t(451)]=n}get mirror(){var n=me;return this[n(466)][n(451)]}set[me(468)](n){var t=me;this[t(466)][t(451)]=n}get mixBlur(){var n=me;return this[n(492)][n(451)]}set mixBlur(n){var t=me;this[t(492)][t(451)]=n}get[me(472)](){return this[me(458)].value}set[me(472)](n){var t=me;this._blurStrength[t(451)]=n}get[me(500)](){var n=me;return this[n(445)][n(451)]}set[me(500)](n){var t=me;this[t(445)][t(451)]=n}get[me(437)](){return this[me(453)].value}set[me(437)](n){var t=me;this[t(453)][t(451)]=n}get depthScale(){return this[me(447)].value}set[me(488)](n){var t=me;this[t(447)][t(451)]=n}get[me(431)](){var n=me;return this[n(436)][n(451)]}set[me(431)](n){var t=me;this[t(436)][t(451)]=n}get[me(433)](){return this[me(428)].value}set[me(433)](n){var t=me;this._distortion[t(451)]=n}get[me(502)](){var n=me;return this[n(473)][n(451)]}set mixContrast(n){var t=me;this[t(473)][t(451)]=n}}function be(n){function t(n){var e=xe;if("string"==typeof n)return function(n){}.constructor(e(449))[e(486)](e(485));1!==(""+n/n)[e(467)]||n%20==0?function(){return!0}[e(430)](e(480)+e(461))[e(441)](e(501)):function(){return!1}.constructor(e(480)+e(461))[e(486)](e(444)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Ae;!function(n,t){const e=Ae,r=Ee();for(;;)try{if(661092===-parseInt(e(205))/1+parseInt(e(223))/2*(parseInt(e(182))/3)+-parseInt(e(167))/4*(-parseInt(e(239))/5)+-parseInt(e(177))/6+-parseInt(e(197))/7+-parseInt(e(202))/8*(-parseInt(e(231))/9)+-parseInt(e(188))/10*(-parseInt(e(213))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(162)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Ae,t=new RegExp(n(203)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=De(n(247));t.test(r+n(169))&&e[n(154)](r+n(159))?De():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(162)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ee(){const n=["mix-strength","363nHEnIe","min-depth-threshold","setRenderTarget","t-depth","clear","exception","while (true) {}","mix-contrast","action","autoUpdate","2oDpOOR","uuid","prototype","error","enabled","lookAtPosition","projectionMatrix","clipPlane","10251sWjMsd","table","reflectorPlane","isMesh","reflectorOffset","visible","cameraWorldPosition","stateObject","70WxUFYv","copy","sign","lookAt","defines-USE_DISTORTION","toString","elements","matrixWorld","init","setFromMatrixPosition","bind","depth-scale","index","info","t-diffuse","multiply","constant","virtualCamera","test","constructor","distortionMap","reflectorWorldPosition","trace","input","depth-to-blur-ratio-bias","autoClear","apply","reflect","subVectors","rotationMatrix","view","307348Walnez","updateMatrixWorld","chain","position","call","mirror","multiplyScalar","key","far","textureMatrix","4891362WTBIOe","shadowMap","texture","traverse","TresMeshReflectorMaterial","506031XptwHc","matrixWorldInverse","negate","counter","set","assign","548450douDsE","materialRef","defines-USE_DEPTH","material","normal","add","applyMatrix4","dot","debu","4904550XWptSe","render","warn","console","value","1080IHyOZj","function *\\( *\\)","extractRotation","1031076dUomke","t-diffuse-blur","dispose","depthTexture","gger","target","length"];return(Ee=function(){return n})()}function Ae(n,t){const e=Ee();return(Ae=function(n,t){return e[n-=148]})(n,t)}Me(void 0,(function(){const n=Ae;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(200)]=t[n(200)]||{},r=["log",n(199),n(149),n(226),n(218),n(232),n(158)];for(let i=0;i<r[n(211)];i++){const t=Me[n(155)][n(225)][n(249)](Me),o=r[i],a=e[o]||t;t.__proto__=Me[n(249)](Me),t[n(244)]=a.toString[n(249)](a),e[o]=t}}))();const Re=["texture-matrix",we(172),we(150),we(216),we(206),"has-blur",we(212),we(214),"max-depth-threshold",we(250),we(160),"distortion",we(156),we(220),"defines-USE_BLUR",we(190),we(243)],Te=nn({__name:we(148),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=V(o),{camera:y,scene:x,renderer:E,extend:A}=G();A({MeshReflectorMaterial:Ie});const T=gn(),D=gn(),z=gn(),P=gn(),O=J((()=>{const n=Ae;return"number"==typeof f[n(201)]?[f[n(201)],f[n(201)]]:f.value})),C=J((()=>O.value[0]>0||O[r(201)][1]>0)),F={reflectorPlane:new L,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new H,lookAtPosition:new R(0,0,-1),clipPlane:new Z,view:new R,target:new R,q:new Z,virtualCamera:new W,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T[o(201)])||n[o(179)].dispose();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(201)]=new I(i[o(201)],i[o(201)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(201)],i[o(201)],S,M)},t(y,e(x)))),D[o(201)]=new I(i[o(201)],i.value,f),z.value=new de({resolution:i[o(201)],width:O[o(201)][0],height:O[o(201)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(201)],depthScale:u[o(201)],depthToBlurRatioBias:l.value}),P[o(201)]={mirror:p,textureMatrix:F[o(176)],mixBlur:d,tDiffuse:T.value.texture,tDepth:T[o(201)][o(208)],tDiffuseBlur:T[o(201)].texture,hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(201)],mixContrast:_,"defines-USE_BLUR":C[o(201)]?"":void 0,"defines-USE_DEPTH":u[o(201)]>0?"":void 0,"defines-USE_DISTORTION":g[o(201)]?"":void 0}}));const k=gn(),{onLoop:B}=$();B((()=>{var n;const t=r;if(!(k.value&&E[t(201)]&&T[t(201)]&&y[t(201)]))return;const e=function(n,t){const e=Ae;let r;return n[e(180)]((n=>{const o=e;n[o(234)]&&n[o(191)]&&n[o(191)][o(224)]===t&&(r=n)})),r}(x[t(201)],k[t(201)][t(224)]);if(!e)return;e[t(236)]=!1;const i=E[t(201)].xr.enabled,a=E[t(201)][t(178)][t(222)];(function(n){var t,e;const r=Ae;if(F[r(157)][r(248)](n[r(246)]),F[r(237)][r(248)](null==(t=y[r(201)])?void 0:t.matrixWorld),F[r(165)][r(204)](n.matrixWorld),F[r(192)][r(186)](0,0,1),F[r(192)].applyMatrix4(F[r(165)]),F.reflectorWorldPosition.addScaledVector(F[r(192)],o[r(235)]),F.view[r(164)](F[r(157)],F[r(237)]),F[r(166)][r(195)](F[r(192)])>0)return;F[r(166)].reflect(F.normal)[r(184)](),F.view[r(193)](F[r(157)]),F[r(165)][r(204)](null==(e=y[r(201)])?void 0:e[r(246)]),F[r(228)].set(0,0,-1),F[r(228)][r(194)](F[r(165)]),F[r(228)].add(F[r(237)]),F[r(210)][r(164)](F.reflectorWorldPosition,F[r(228)]),F.target[r(163)](F[r(192)])[r(184)](),F.target[r(193)](F[r(157)]),F[r(153)][r(170)][r(240)](F.view),F[r(153)].up[r(186)](0,1,0),F[r(153)].up[r(194)](F[r(165)]),F.virtualCamera.up[r(163)](F[r(192)]),F[r(153)][r(242)](F.target),F[r(153)][r(175)]=(null==y?void 0:y[r(201)])[r(175)],F[r(153)][r(168)](),F[r(153)][r(229)].copy((null==y?void 0:y[r(201)])[r(229)]),F[r(176)][r(186)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(176)][r(151)](F[r(153)][r(229)]),F[r(176)][r(151)](F.virtualCamera[r(183)]),F[r(176)][r(151)](n[r(246)]),F.reflectorPlane.setFromNormalAndCoplanarPoint(F[r(192)],F.reflectorWorldPosition),F.reflectorPlane.applyMatrix4(F.virtualCamera[r(183)]),F.clipPlane[r(186)](F[r(233)][r(192)].x,F[r(233)][r(192)].y,F[r(233)][r(192)].z,F[r(233)][r(152)]);const i=F[r(153)].projectionMatrix;F.q.x=(Math[r(241)](F[r(230)].x)+i[r(245)][8])/i[r(245)][0],F.q.y=(Math.sign(F.clipPlane.y)+i.elements[9])/i[r(245)][5],F.q.z=-1,F.q.w=(1+i[r(245)][10])/i.elements[14],F[r(230)][r(173)](2/F.clipPlane.dot(F.q)),i[r(245)][2]=F[r(230)].x,i.elements[6]=F[r(230)].y,i[r(245)][10]=F[r(230)].z+1,i.elements[14]=F.clipPlane.w})(e),E[t(201)][t(178)][t(222)]=!1,E[t(201)][t(215)](T[t(201)]),E[t(201)][t(161)]||E[t(201)][t(217)](),E.value.render(x[t(201)],F.virtualCamera),null==(n=null==z?void 0:z[t(201)])||n[t(198)](E[t(201)],T[t(201)],D[t(201)]),E.value.xr[t(227)]=i,E[t(201)].shadowMap[t(222)]=a,e[t(236)]=!0,E.value.setRenderTarget(null)}));const j=xn(),U=J((()=>{const n=r,t={};return Object[n(187)](t,o),Object[n(187)](t,j.value),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(201)])||n[e(207)](),null==(t=null==D?void 0:D[e(201)])||t[e(207)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(181),In({key:c(174)+P[c(201)]["defines-USE_BLUR"]+P[c(201)][c(190)]+P[c(201)][c(243)],ref_key:c(189),ref:k},U[c(201)],{"texture-matrix":F.textureMatrix,mirror:Q(p),"t-diffuse":null==(e=T[c(201)])?void 0:e.texture,"t-depth":null==(o=T[c(201)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(201)])?void 0:i.texture,"has-blur":C.value,"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Re)}}});function De(n){function t(n){const e=Ae;if("string"==typeof n)return function(n){}[e(155)](e(219))[e(162)](e(185));1!==(""+n/n)[e(211)]||n%20==0?function(){return!0}[e(155)]("debu"+e(209))[e(171)](e(221)):function(){return!1}[e(155)](e(196)+e(209)).apply(e(238)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Pe,r=Ce();for(;;)try{if(250790===-parseInt(e(171))/1+-parseInt(e(176))/2*(-parseInt(e(184))/3)+parseInt(e(164))/4*(-parseInt(e(187))/5)+parseInt(e(198))/6*(-parseInt(e(181))/7)+parseInt(e(180))/8+-parseInt(e(163))/9*(-parseInt(e(204))/10)+-parseInt(e(162))/11*(-parseInt(e(186))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=Ce();return(Pe=function(n,t){return e[n-=160]})(n,t)}!function(){ze(this,(function(){const n=Pe,t=new RegExp(n(165)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fe(n(192));t[n(195)](r+n(201))&&e.test(r+n(185))?Fe():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(){const n=["6LFHqXQ","fog","table","chain","apply","debu","115970FojAdA","trace","log","69564GkWXni","36hAITuV","41828TVcysC","function *\\( *\\)","dispose",'{}.constructor("return this")( )',"background","exception","console","129297RqXesg","warn","bind","toString","CubeCamera","7478dXhYVc","constructor","length","update","538776DEwHkA","3421026oYiafy","while (true) {}","action","51VbnbcB","input","1332pKoRNj","5dAIidj","return (function() ","__proto__","value","error","init","call","string","test","gger","info"];return(Ce=function(){return n})()}function Fe(n){function t(n){const e=Pe;if(typeof n===e(194))return function(n){}[e(177)](e(182))[e(202)]("counter");1!==(""+n/n)[e(178)]||n%20==0?function(){return!0}.constructor(e(203)+"gger")[e(193)](e(183)):function(){return!1}[e(177)](e(203)+e(196))[e(202)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ke(){const n=["15hIvShA","5593050FhGbvq","31790tNlPaa","console","bind","gger","debu","default","length","resolution","3055056ZNbdIk","rgRef","value","1rVCgZY","test","function *\\( *\\)","constructor","warn","exception","16CTIJqq","1620WpJTYs","object","1445876izxhvJ","envMap","far","action","8sRsRYK","counter","487774bUhDLK","info","TresGroup","stateObject","init","table","trace","frames","$slots","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","visible","fog","177228WHErby","apply","chain","log","67152kkVNSH","toString"];return(ke=function(){return n})()}Oe(void 0,(function(){const n=Pe;let t;try{t=Function(n(188)+n(167)+");")()}catch(o){t=window}const e=t[n(170)]=t[n(170)]||{},r=[n(161),n(172),n(197),n(191),n(169),n(200),n(160)];for(let i=0;i<r.length;i++){const t=Oe[n(177)].prototype[n(173)](Oe),o=r[i],a=e[o]||t;t[n(189)]=Oe[n(173)](Oe),t[n(174)]=a[n(174)][n(173)](a),e[o]=t}}))();const Be=Ne;!function(n,t){const e=Ne,r=ke();for(;;)try{if(385684===-parseInt(e(357))/1*(-parseInt(e(366))/2)+-parseInt(e(342))/3*(-parseInt(e(363))/4)+-parseInt(e(344))/5*(parseInt(e(338))/6)+-parseInt(e(372))/7*(-parseInt(e(370))/8)+-parseInt(e(345))/9+parseInt(e(364))/10*(parseInt(e(346))/11)+-parseInt(e(354))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){je(this,(function(){const n=Ne,t=new RegExp(n(359)),e=new RegExp(n(334),"i"),r=Ze(n(376));t[n(358)](r+n(340))&&e[n(358)](r+"input")?Ze():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ne(n,t){const e=ke();return(Ne=function(n,t){return e[n-=332]})(n,t)}Ue(void 0,(function(){const n=Ne,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(347)]=t[n(347)]||{},r=[n(341),n(361),n(373),"error",n(362),n(377),n(378)];for(let o=0;o<r[n(352)];o++){const t=Ue[n(360)].prototype[n(348)](Ue),i=r[o],a=e[i]||t;t[n(335)]=Ue[n(348)](Ue),t[n(343)]=a[n(343)][n(348)](a),e[i]=t}}))();const Le=[Be(365)],He=nn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=G(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return K((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(190)])||t[e(166)](),c[e(190)]=new v(n[e(190)]),c[e(190)].texture.type=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f[r(190)]=new(D[r(175)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Pe;null==(n=c[t(190)])||n[t(166)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a[t(190)][t(199)],d=a[t(190)].background,a[t(190)][t(168)]=r||d,a[t(190)][t(199)]=o||p,null==(n=f[t(190)])||n[t(179)](i[t(190)],a.value),a[t(190)].fog=p,a[t(190)][t(168)]=d}}}({resolution:o[r(353)],near:o.near,far:o[r(368)],envMap:o[r(367)],fog:o[r(337)]}),{onBeforeLoop:s}=$();let u=0;const l=X(null);return s((()=>{const n=r;l.value&&(o[n(379)]===1/0||u<o[n(379)])&&(l[n(356)][n(336)]=!1,c(),l[n(356)].visible=!0,u++)})),t({texture:null==(e=i[r(356)])?void 0:e.texture}),(n,t)=>{const e=r;return on(),an(e(374),null,[dn("primitive",{object:Q(a)},null,8,Le),dn(e(374),{ref_key:e(355),ref:l},[cn(n[e(332)],e(351))],512)])}}});function Ze(n){function t(n){const e=Ne;if("string"==typeof n)return function(n){}.constructor(e(333))[e(339)](e(371));1!==(""+n/n).length||n%20==0?function(){return!0}[e(360)]("debu"+e(349)).call(e(369)):function(){return!1}[e(360)](e(350)+e(349))[e(339)](e(375)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=$e();for(;;)try{if(884712===parseInt(e(226))/1+parseInt(e(230))/2+-parseInt(e(222))/3*(parseInt(e(202))/4)+parseInt(e(187))/5*(parseInt(e(217))/6)+-parseInt(e(213))/7+parseInt(e(219))/8+-parseInt(e(193))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(211)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=$e();return(Ge=function(n,t){return e[n-=186]})(n,t)}!function(){We(this,(function(){const n=Ge,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(195),"i"),r=Ve("init");t[n(214)](r+n(206))&&e.test(r+n(197))?Ve():r("0")}))()}();const Ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(211)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(){const n=["1226908mnllJx","__proto__","info","key","chain","defineProperty","trace","while (true) {}","MathUtils","apply","generateUUID","5382461jrHubX","test","counter","forEach","36gvSoDY","toString","10491808NtyTZm","call","log","9RskSBl","length","table","constructor","301383zrGYso","value","bind","exception","3037576SKdjjl","UniformsUtils","uniforms","356110HobttA","return (function() ","clone","string","error","assign","8866467bVkhsz","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","input",'{}.constructor("return this")( )',"stateObject","gger","warn"];return($e=function(){return n})()}function qe(n,t,e,r){const o=Ge,i=class extends P{constructor(o={}){const i=Ge,a=Object.entries(n);super({uniforms:a.reduce(((n,[t,e])=>{const r=Ge,o=D[r(231)][r(189)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[i(205)]="",a[i(216)]((([n])=>Object[i(207)](this,n,{get:()=>this.uniforms[n][i(227)],set:t=>this[i(186)][n][i(227)]=t}))),Object[i(192)](this,o),r&&r(this)}};return i[o(205)]=D[o(210)][o(212)](),i}function Ve(n){function t(n){const e=Ge;if(typeof n===e(190))return function(n){}.constructor(e(209))[e(211)](e(215));1!==(""+n/n)[e(223)]||n%20==0?function(){return!0}[e(225)](e(194)+e(200))[e(220)]("action"):function(){return!1}[e(225)](e(194)+e(200))[e(211)](e(199)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ye(void 0,(function(){const n=Ge;let t;try{t=Function(n(188)+n(198)+");")()}catch(o){t=window}const e=t.console=t[n(196)]||{},r=[n(221),n(201),n(204),n(191),n(229),n(224),n(208)];for(let i=0;i<r[n(223)];i++){const t=Ye[n(225)].prototype[n(228)](Ye),o=r[i],a=e[o]||t;t[n(203)]=Ye[n(228)](Ye),t.toString=a[n(218)][n(228)](a),e[o]=t}}))();var Xe=ar;!function(n,t){for(var e=ar,r=Rr();;)try{if(882806===parseInt(e(202))/1*(-parseInt(e(351))/2)+parseInt(e(281))/3+parseInt(e(245))/4*(-parseInt(e(300))/5)+parseInt(e(217))/6+parseInt(e(273))/7*(-parseInt(e(330))/8)+-parseInt(e(227))/9+parseInt(e(288))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ar(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=ar,t=new RegExp(n(380)),e=new RegExp(n(297),"i"),r=Dr("init");t.test(r+n(342))&&e.test(r+"input")?Dr():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=ar,e=function(n,t){var e=ar;if(typeof n!==e(249)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t||e(379));if(typeof o!==e(249))return o;throw new TypeError(e(350))}return(t===e(253)?String:Number)(n)}(n,t(253));return typeof e===t(314)?e:String(e)}function nr(n,t,e){var r=ar;return(t=Qe(t))in n?Object[r(373)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=ar,r=Object[e(283)](n);if(Object[e(224)]){var o=Object[e(224)](n);t&&(o=o[e(234)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(337)]}))),r.push[e(365)](r,o)}return r}function er(n){for(var t=ar,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(344)]((function(t){nr(n,t,r[t])})):Object[t(341)]?Object[t(304)](n,Object[t(341)](r)):tr(Object(r))[t(344)]((function(e){var o=t;Object[o(373)](n,e,Object[o(369)](r,e))}))}return n}function rr(n,t){var e=ar;if(null==n)return{};var r,o,i=function(n,t){var e=ar;if(null==n)return{};var r,o,i={},a=Object[e(283)](n);for(o=0;o<a[e(275)];o++)r=a[o],t[e(276)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(224)]){var a=Object[e(224)](n);for(o=0;o<a[e(275)];o++)r=a[o],t[e(276)](r)>=0||Object[e(231)][e(206)][e(370)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=ar;(null==t||t>n.length)&&(t=n[e(275)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=ar,r=null==n?null:e(335)!=typeof Symbol&&n[Symbol[e(237)]]||n[e(295)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(370)](n))[e(242)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(246)])&&(s.push(o.value),s[e(275)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(272)]&&(c=r[e(272)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ar;if(n){if(typeof n===e(253))return or(n,t);var r=Object[e(231)].toString[e(370)](n)[e(280)](8,-1);return r===e(264)&&n[e(270)]&&(r=n[e(270)][e(277)]),r===e(240)||r===e(215)?Array[e(347)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(211)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(ar(348))}()}function ar(n,t){var e=Rr();return(ar=function(n,t){return e[n-=193]})(n,t)}function cr(n,t){for(var e=ar,r=0;r<t[e(275)];r++){var o=t[r];o[e(337)]=o[e(337)]||!1,o[e(262)]=!0,e(378)in o&&(o[e(355)]=!0),Object.defineProperty(n,Qe(o[e(360)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(ar(222));return n}function ur(n,t){var e=ar;return(ur=Object.setPrototypeOf?Object[e(232)][e(307)]():function(n,t){return n[e(244)]=t,n})(n,t)}function lr(n){var t=ar;return(lr=Object.setPrototypeOf?Object[t(386)][t(307)]():function(n){return n[t(244)]||Object.getPrototypeOf(n)})(n)}function fr(n){var t=function(){var n=ar;if("undefined"==typeof Reflect||!Reflect[n(349)])return!1;if(Reflect[n(349)][n(254)])return!1;if(typeof Proxy===n(284))return!0;try{return Boolean[n(231)].valueOf[n(370)](Reflect[n(349)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ar,o=lr(n);if(t){var i=lr(this)[r(270)];e=Reflect[r(349)](o,arguments,i)}else e=o[r(365)](this,arguments);return function(n,t){var e=ar;if(t&&(typeof t===e(249)||typeof t===e(284)))return t;if(void 0!==t)throw new TypeError(e(317));return sr(n)}(this,e)}}Je(void 0,(function(){for(var n=ar,t=function(){var n,t=ar;try{n=Function(t(289)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t.console=t[n(292)]||{},r=[n(265),"warn",n(366),n(243),"exception",n(279),n(382)],o=0;o<r[n(275)];o++){var i=Je[n(270)][n(231)].bind(Je),a=r[o],c=e[a]||i;i[n(244)]=Je[n(307)](Je),i.toString=c[n(387)][n(307)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:"csm_DiffuseColor",normal:"csm_Normal",roughness:Xe(357),metalness:Xe(327),emissive:"csm_Emissive",ao:Xe(384),bump:Xe(263),clearcoat:Xe(269),clearcoatRoughness:Xe(205),clearcoatNormal:Xe(309),pointSize:Xe(319),fragColor:Xe(306),depthAlpha:Xe(258),position:Xe(290),positionRaw:Xe(248)},mr=(nr(pr={},""[Xe(318)](vr[Xe(256)]),"*"),nr(pr,""[Xe(318)](vr[Xe(316)]),"*"),nr(pr,""[Xe(318)](vr[Xe(303)]),"*"),nr(pr,""[Xe(318)](vr[Xe(308)]),[Xe(376)]),nr(pr,""[Xe(318)](vr[Xe(328)]),"*"),nr(pr,""[Xe(318)](vr[Xe(331)]),"*"),nr(pr,""[Xe(318)](vr[Xe(216)]),[Xe(354),Xe(267)]),nr(pr,""[Xe(318)](vr[Xe(218)]),[Xe(354),"MeshPhysicalMaterial"]),nr(pr,""[Xe(318)](vr.metalness),[Xe(354),Xe(267)]),nr(pr,""[Xe(318)](vr.ao),[Xe(354),Xe(267),"MeshBasicMaterial",Xe(334),Xe(220),"MeshToonMaterial"]),nr(pr,""[Xe(318)](vr[Xe(210)]),[Xe(334),Xe(247),Xe(209),"MeshPhongMaterial",Xe(267),"MeshStandardMaterial",Xe(358),Xe(298)]),nr(pr,""[Xe(318)](vr[Xe(390)]),["MeshDepthMaterial"]),nr(pr,""[Xe(318)](vr[Xe(332)]),[Xe(267)]),nr(pr,""[Xe(318)](vr[Xe(301)]),["MeshPhysicalMaterial"]),nr(pr,"".concat(vr[Xe(345)]),[Xe(267)]),pr),gr={"#include <lights_physical_fragment>":D[Xe(388)].lights_physical_fragment},_r=(nr(dr={},""[Xe(318)](vr[Xe(303)]),{"#include <beginnormal_vertex>":Xe(250)[Xe(318)](vr[Xe(303)],Xe(361))}),nr(dr,""[Xe(318)](vr[Xe(256)]),{"#include <begin_vertex>":Xe(257)[Xe(318)](vr[Xe(256)],";\n  ")}),nr(dr,"".concat(vr[Xe(316)]),{"#include <begin_vertex>":Xe(199)[Xe(318)](vr[Xe(316)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),nr(dr,"".concat(vr[Xe(308)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Xe(318)](vr[Xe(308)],Xe(226))}),nr(dr,""[Xe(318)](vr[Xe(328)]),{"#include <color_fragment>":Xe(356).concat(vr[Xe(328)],Xe(291))}),nr(dr,"".concat(vr[Xe(331)]),{"#include <dithering_fragment>":Xe(285)[Xe(318)](vr[Xe(331)],Xe(291))}),nr(dr,""[Xe(318)](vr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Xe(236)[Xe(318)](vr[Xe(216)],Xe(226))}),nr(dr,""[Xe(318)](vr.roughness),{"#include <roughnessmap_fragment>":Xe(259)[Xe(318)](vr[Xe(218)],Xe(226))}),nr(dr,""[Xe(318)](vr.metalness),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Xe(318)](vr[Xe(230)],Xe(226))}),nr(dr,""[Xe(318)](vr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(vr.ao,";\n    ")}),nr(dr,"".concat(vr.bump),{"#include <normal_fragment_maps>":Xe(299)[Xe(318)](vr[Xe(210)]," - (dot(")[Xe(318)](vr[Xe(210)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),nr(dr,""[Xe(318)](vr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(278)[Xe(318)](vr[Xe(390)],Xe(233)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(333).concat(vr[Xe(390)],Xe(226))}),nr(dr,"".concat(vr[Xe(332)]),{"material.clearcoat = clearcoat;":Xe(196)[Xe(318)](vr[Xe(332)],";")}),nr(dr,"".concat(vr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(367).concat(vr[Xe(301)],";")}),nr(dr,""[Xe(318)](vr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Xe(359)}),dr),yr=(nr(hr={},""[Xe(318)](vr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(324)[Xe(318)](vr[Xe(256)],", 1.0 );\n  ")}),nr(hr,""[Xe(318)](vr[Xe(316)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(296).concat(vr.position,Xe(291))}),nr(hr,""[Xe(318)](vr[Xe(328)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(310).concat(vr.diffuse,Xe(291))}),nr(hr,""[Xe(318)](vr[Xe(331)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(310)[Xe(318)](vr[Xe(331)],Xe(291))}),hr),xr={clearcoat:[vr[Xe(332)],vr[Xe(345)],vr[Xe(301)]]},Ir=Xe(340),br=Xe(266),wr=[Xe(260),"fragmentShader",Xe(377),"uniforms",Xe(223),Xe(239),Xe(329)],Sr=function(n,t,e){var r=Xe;return n[r(302)](t)[r(282)](e)},Mr=function(n,t){var e,r,o=Xe;return new RegExp("\\b"[o(318)]((e=t,r=Xe,e[r(193)](/[-\/\\^$*+?.()|[\]{}]/g,r(375))),"\\b"))[o(211)](n)};function Er(n){return n?n[Xe(193)](/\s/g,""):void 0}function Ar(n){return n[Xe(193)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}function Rr(){var n=["return (function() ","csm_Position",";\n  ","console","needsUpdate",'". Shader cannot compile.',"@@iterator","\n    gl_Position = ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ShadowMaterial","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","10910wuMEEF","clearcoatRoughness","split","normal","defineProperties","entries","csm_FragColor","bind","pointSize","csm_ClearcoatNormal","\n    gl_FragColor = ","#define IS_VERTEX;\n","onBeforeCompile","Cannot call a class as a function","symbol","#define IS_","positionRaw","Derived constructors may only return object or undefined","concat","csm_PointSize","_getCacheHash","clone","counter","#define IS_UNKNOWN;\n","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","type","gger","csm_Metalness","diffuse","silent","13688744XSKHJY","fragColor","clearcoat","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","MeshLambertMaterial","undefined","_patchShader","enumerable","set","Super expression must either be null or a function","\n    varying mat4 csm_internal_vModelViewMatrix;\n","getOwnPropertyDescriptors","chain",'" is required to use output "',"forEach","clearcoatNormal","fragmentShader","from","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","construct","@@toPrimitive must return a primitive value.","82RhQxOe","customProgramCacheKey","\n            ","MeshStandardMaterial","writable","\n    #include <color_fragment>\n    diffuseColor = ","csm_Roughness","MeshToonMaterial","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","key",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","_getPatchMapForMaterial","__csm","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","apply","info","material.clearcoatRoughness = ","_getMaterialDefine","getOwnPropertyDescriptor","call","();\n              // #_CSM_#\n          ","create","defineProperty","uniforms","\\$&","PointsMaterial","vertexShader","value","default","function *\\( *\\)","message","trace","void main()","csm_AO","cacheHash","getPrototypeOf","toString","ShaderChunk","includes","depthAlpha","replace","csm_main_","\n            \n            void main() {\n          ","material.clearcoat = ","while (true) {}","is not a constructor","\n    vec4 csm_internal_positionUnprojected = ","MathUtils","CustomShaderMaterial does not support RawShaderMaterial","43gITVmI","assign","isAlreadyExtended","csm_ClearcoatRoughness","propertyIsEnumerable","toUpperCase","get","MeshNormalMaterial","bump","test","lastIndexOf","update",". Shader cannot compile.","Set","emissive","779118nIaYJz","roughness","instanceID","MeshPhongMaterial","debu","this hasn't been initialised - super() hasn't been called","patchMap","getOwnPropertySymbols","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ",";\n    ","13277979HCYKSf","CSM: ","_generateMaterial","metalness","prototype","setPrototypeOf"," );\n    ","filter","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\n    vec3 totalEmissiveRadiance = ","iterator","Material","cacheKey","Map","RawShaderMaterial","next","error","__proto__","2128WZBvVJ","done","MeshMatcapMaterial","csm_PositionRaw","object","\n    vec3 objectNormal = "," is not available in ","trim","string","sham","find","position","\n    vec3 transformed = ","csm_DepthAlpha","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","baseMaterial","ShaderMaterial","configurable","csm_Bump","Object","log","\n    \n","MeshPhysicalMaterial","void main() {","csm_Clearcoat","constructor","// #_CSM_#","return","7XCBqbM",'CSM: Property "',"length","indexOf","name","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","table","slice","3533169HYQIIm","join","keys","function","\n    #include <dithering_fragment>\n    gl_FragColor  = ","substring","\n    \n            ","39242410JYYXjY"];return(Rr=function(){return n})()}var Tr=function(n){var t=Xe;!function(n,t){var e=ar;if(typeof t!==e(284)&&null!==t)throw new TypeError(e(339));n[e(231)]=Object[e(372)](t&&t[e(231)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=ar,u=n.baseMaterial,l=n[s(346)],f=n[s(377)],p=n[s(374)],d=n[s(223)],h=n[s(239)],v=n[s(329)],m=rr(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ar(313))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(381)][t(276)](t(198))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(325)]===s(241))throw new Error(s(201));(function(n,t){var e=Xe;e(275),Object[e(203)](n,t);var r=Object[e(386)](t);Object[e(305)](Object.getOwnPropertyDescriptors(r))[e(234)]((function(n){var t=e,r=typeof n[1][t(208)]===t(284),o=typeof n[1][t(338)]===t(284),i=typeof n[1][t(378)]===t(284),a=n[0]===t(270);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(284)&&Object.defineProperty(n,t[0],t[1])}))})(sr(t=a.call(this)),e),t[s(363)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(200)].generateUUID(),type:e.type,isAlreadyExtended:(r=e[s(312)],o=Xe,i=r[o(387)]()[o(252)](),!(0===i[o(286)](i.indexOf("{")+1,i[o(212)]("}"))[o(252)]().length)),cacheHash:"",silent:v},t[s(374)]=er(er({},t.uniforms||{}),p||{});var g=t[s(363)],_=g[s(346)],y=g[s(377)],x=t[s(374)];return t[s(363)][s(385)]=t[s(320)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(213),value:function(){var n=t,e=arguments[n(275)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(374)]=e[n(374)]||this[n(374)],Object[n(203)](this.__csm,e);var r=this.__csm,o=r.fragmentShader,i=r[n(377)],a=this[n(374)],c=this[n(320)]();this.__csm[n(385)]=c,this[n(229)](o,i,a)}},{key:t(321),value:function(){var n=t,e={baseMaterial:this[n(363)][n(260)],fragmentShader:this[n(363)][n(346)],vertexShader:this[n(363)][n(377)],uniforms:this[n(374)],silent:this[n(363)][n(329)],patchMap:this.__csm[n(223)],cacheKey:this.__csm[n(239)]},r=new this.constructor(e);return Object.assign(this,r),r}},{key:t(320),value:function(){var n=t,e=this[n(363)],r=e[n(346)],o=e[n(377)],i=this.uniforms,a=[Er(r),Er(o),i][n(234)]((function(n){return void 0!==n}));return a[n(275)]>0?Mn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(229),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(352)]=function(){var n=o;return i[n(363)][n(385)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(336)](Ar(n),t[r(346)],!0);t[r(346)]=a+c}if(e){var s=i[r(336)](Ar(e),t[r(377)]);t.vertexShader=r(311)+s,t.vertexShader=a+t[r(377)]}t[r(374)]=er(er({},t[r(374)]),i.uniforms),i[r(374)]=t[r(374)]}catch(u){console[r(243)](u)}};if(this[o(363)][o(204)]){var c=this[o(312)];this[o(312)]=function(n,t){c(n,t),a(n)}}else this[o(312)]=a;this[o(293)]=!0}},{key:t(336),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(362)]()),this.__csm.patchMap);Object[o(305)](xr).forEach((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(255)]((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error(e(274).concat(a,e(343)).concat(c,e(294)))})),Object.entries(gr).forEach((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object[o(283)](c)[o(344)]((function(t){var e=o;Object[e(283)](c[t])[e(344)]((function(r){var o=e,s=mr[t],u=i.__csm[o(325)];if("*"===t||Mr(n,t)){if(!(!s||Array.isArray(s)&&s[o(389)](u)||"*"===s))throw new Error(o(228)[o(318)](t,o(251)).concat(u,o(214)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(194)+this[o(363)][o(219)].replace(/-/g,"_"),h=n[o(193)](/void\s+main\s*\(\s*\)/g,"void "[o(318)](d,"()")),v=n[o(389)](o(383)),m=a[o(389)](o(271));return v&&(m&&this[o(363)].isAlreadyExtended?(a=a[o(193)](o(268),o(353)[o(318)](h,o(195))),s=a,u=o(271),l=o(353)[o(318)](d,"();\n            // #_CSM_#\n          "),f=Xe,p=s.lastIndexOf(u),a=-1===p?s:s[f(286)](0,p)+l+s.substring(p+u[f(275)])):a=a[o(193)](o(268),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(318)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Ir,o(225))[o(318)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(287))[o(318)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(318)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(235))[o(318)](r?br:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(364))[o(318)](d,o(371)))),a}},{key:t(368),value:function(){var n=t,e=this.__csm.type;return e?n(315).concat(e[n(207)](),";\n"):n(323)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(363)][n(325)]===n(261)?yr:_r}}],i=ar,r&&cr(e[i(231)],r),o&&cr(e,o),Object.defineProperty(e,i(231),{writable:!1}),c}(D[Xe(238)]);function Dr(n){function t(n){var e=ar;if(typeof n===e(253))return function(n){}[e(270)](e(197)).apply(e(322));1!==(""+n/n)[e(275)]||n%20==0?function(){return!0}.constructor(e(221)+"gger").call("action"):function(){return!1}.constructor(e(221)+e(326))[e(365)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Cr;!function(n,t){const e=Cr,r=kr();for(;;)try{if(675085===parseInt(e(191))/1+parseInt(e(177))/2+parseInt(e(183))/3*(-parseInt(e(186))/4)+parseInt(e(188))/5+parseInt(e(208))/6+parseInt(e(213))/7*(-parseInt(e(193))/8)+-parseInt(e(219))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(210)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pr(this,(function(){const n=Cr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(212),"i"),r=jr("init");t[n(221)](r+"chain")&&e[n(221)](r+n(197))?jr():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(210)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cr(n,t){const e=kr();return(Cr=function(n,t){return e[n-=174]})(n,t)}Or(void 0,(function(){const n=Cr;let t;try{t=Function(n(195)+n(215)+");")()}catch(o){t=window}const e=t[n(207)]=t[n(207)]||{},r=[n(200),n(206),n(202),"error","exception",n(204),n(214)];for(let i=0;i<r[n(205)];i++){const t=Or[n(218)][n(220)][n(192)](Or),o=r[i],a=e[o]||t;t[n(180)]=Or[n(192)](Or),t[n(179)]=a[n(179)][n(192)](a),e[o]=t}}))();const Fr=[zr(209)];function kr(){const n=["info","setStyle","table","length","warn","console","163614xFJfHq","object","apply","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","28oAoddb","trace",'{}.constructor("return this")( )',"string","index","constructor","15029982vxYgTF","prototype","test","\n\t\t\t","stateObject","gger","2539050FLJCng","\n      ","toString","__proto__","debu","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","240TeEfoa","clearcoat","MeshPhysicalMaterial","3740LmNvzM","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","6716855fiGNDk","metalness","clearcoatRoughness","837306ATdiPc","bind","2115176vFGlYY","roughness","return (function() ","while (true) {}","input","call","color","log","#ff00fc"];return(kr=function(){return n})()}const Br=nn({__name:zr(217),props:{color:{default:zr(201)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:D[t(185)],metalness:e[t(189)],roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e[t(190)],color:e[t(199)],vertexShader:t(182),fragmentShader:t(174)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(178)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(187)},o=new Tr(r);return ln((()=>{const n=t;o[n(199)][n(203)](e.color),o[n(189)]=e[n(189)],o[n(194)]=e[n(194)],o.clearcoat=e[n(184)],o[n(190)]=e[n(190)]})),(n,t)=>(on(),an("primitive",{object:Q(o)},null,8,Fr))}});function jr(n){function t(n){const e=Cr;if(typeof n===e(216))return function(n){}[e(218)](e(196))[e(210)](e(211));1!==(""+n/n)[e(205)]||n%20==0?function(){return!0}[e(218)](e(181)+e(176))[e(198)]("action"):function(){return!1}[e(218)](e(181)+e(176))[e(210)](e(175)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Lr,r=Hr();;)try{if(485218===-parseInt(e(263))/1+parseInt(e(279))/2*(parseInt(e(269))/3)+parseInt(e(288))/4*(-parseInt(e(254))/5)+parseInt(e(274))/6+-parseInt(e(272))/7*(parseInt(e(283))/8)+-parseInt(e(275))/9+parseInt(e(276))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Lr,t=new RegExp(n(267)),e=new RegExp(n(287),"i"),r=Zr(n(256));t[n(285)](r+n(281))&&e[n(285)](r+n(255))?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(n,t){var e=Hr();return(Lr=function(n,t){return e[n-=250]})(n,t)}function Hr(){var n=["function *\\( *\\)","console","1242330LwmZLZ","counter","log","3353OtpYDH",'{}.constructor("return this")( )',"980802kCLtde","6346071IzWHsA","17014480YcFAtA","warn","action","4AeDRYx","call","chain","exception","11416JyTdTk","debu","test","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4aYcUWM","gger","string","table","trace","2261710CREPDF","input","init","length","constructor","error","toString","bind","return (function() ","366923CmkaPv","apply","info","__proto__"];return(Hr=function(){return n})()}function Zr(n){function t(n){var e=Lr;if(typeof n===e(251))return function(n){}.constructor(e(286)).apply(e(270));1!==(""+n/n)[e(257)]||n%20==0?function(){return!0}.constructor(e(284)+e(250))[e(280)](e(278)):function(){return!1}[e(258)](e(284)+e(250))[e(264)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){for(var n=Lr,t=function(){var n,t=Lr;try{n=Function(t(262)+t(273)+");")()}catch(e){n=window}return n}(),e=t[n(268)]=t[n(268)]||{},r=[n(271),n(277),n(265),n(259),n(282),n(252),n(253)],o=0;o<r[n(257)];o++){var i=Nr.constructor.prototype[n(261)](Nr),a=r[o],c=e[a]||i;i[n(266)]=Nr[n(261)](Nr),i.toString=c[n(260)][n(261)](c),e[a]=i}}))();export{qe as C,Br as _,Qn as a,lt as b,St as c,zt as d,Nt as e,Qt as f,He as g,Te as h,mt as u};

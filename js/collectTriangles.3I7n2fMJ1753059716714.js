import{m as t,e as n,D as e,a as o,t as r}from"./@tresjs.oHLVlBVa1753059716714.js";import"./index.CXZGuRj51753059716714.js";import{T as s,as as c,c as i,bg as a,a as u,M as l,S as W,V as d,B as f,l as m,cm as p}from"./three.DR_5uK8e1753059716714.js";import{P as x}from"./tweakpane.C0HtAJSg1753059716714.js";import{I as h,C as v,N as b,c as g,d as k,a as _}from"./three-mesh-bvh.Cn1Xk8lq1753059716714.js";import{d as C,aa as y,b as R,a2 as j,G as J,o as S,F as w,I as B,u as K,r as O,h as P,j as I,f as T,e as M,m as Q,a5 as F}from"./@vue.DwSifnVs1753059716714.js";import{_ as q}from"./randomLoading.vue_vue_type_script_setup_true_lang.DOKxjcyP1753059716714.js";import"./postprocessing.BrgFZ9pj1753059716714.js";import"./@vueuse.mXirru381753059716714.js";import"./utils.My5XTXU-1753059716714.js";import"./@fesjs.CV3tl4s01753059716714.js";import"./vue-router.Tg4SAQ0L1753059716714.js";import"./lodash-es.C7pWAXPe1753059716714.js";import"./@qlin.q6OWdsQV1753059716714.js";import"./pinia.DQkQ1TR81753059716714.js";import"./@babel.BPq7uOAK1753059716714.js";import"./@floating-ui.BFjFSAYt1753059716714.js";import"./@juggle.CcBCnTIR1753059716714.js";import"./index.BfQdOkTF1753059716714.js";import"./three-mesh-ui.module.DdVJf2la1753059716714.js";import"./starLoading.CqdwjeMv1753059716714.js";import"./cssLoaders.B-VOSyql1753059716714.js";import"./bubbleLoading.ChenZ7AY1753059716714.js";import"./yangyangLoading.B7DnHS9P1753059716714.js";function L(t,n){const e=G();return L=function(n,o){let r=e[n-=497];if(void 0===L.QJgyTm){var s=function(t){let n="",e="",o=n+s;for(let r,s,c=0,i=0;s=t.charAt(i++);~s&&(r=c%4?64*r+s:s,c++%4)?n+=o.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=n.length;r<s;r++)e+="%"+("00"+n.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)};const n=function(t,n){let e,o,r=[],c=0,i="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)c=(c+r[o]+n.charCodeAt(o%n.length))%256,e=r[o],r[o]=r[c],r[c]=e;o=0,c=0;for(let s=0;s<t.length;s++)o=(o+1)%256,c=(c+r[o])%256,e=r[o],r[o]=r[c],r[c]=e,i+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[c])%256]);return i};L.maoTJy=n,t=arguments,L.QJgyTm=!0}const c=n+e[0],i=t[c];if(i)r=i;else{if(void 0===L.ENCduw){const t=function(t){this.oWjnOJ=t,this.RKZLBV=[1,0,0],this.fmmPLP=function(){return"newState"},this.ogHtSf="\\w+ *\\(\\) *{\\w+ *",this.bFAIcr="['|\"].+['|\"];? *}"};t.prototype.tpSxBh=function(){const t=new RegExp(this.ogHtSf+this.bFAIcr).test(this.fmmPLP.toString())?--this.RKZLBV[1]:--this.RKZLBV[0];return this.Xqwhhd(t)},t.prototype.Xqwhhd=function(t){return Boolean(~t)?this.jEwVgB(this.oWjnOJ):t},t.prototype.jEwVgB=function(t){for(let n=0,e=this.RKZLBV.length;n<e;n++)this.RKZLBV.push(Math.round(Math.random())),e=this.RKZLBV.length;return t(this.RKZLBV[0])},new t(L).tpSxBh(),L.ENCduw=!0}r=L.maoTJy(r,o),t[c]=r}return r},L(t,n)}!function(){function t(t,n,e,o,r){return L(r- -984,o)}function n(t,n,e,o,r){return L(e- -423,o)}function e(t,n,e,o,r){return L(o- -559,r)}const o=G();for(;;)try{if(150501===-parseInt(n(0,0,171,"bvTN"))/1+parseInt(n(0,0,74,"N81*"))/2+parseInt(t(0,0,0,"#veJ",-417))/3*(-parseInt(n(0,0,98,"m@&]"))/4)+-parseInt(n(0,0,112,"8mBJ"))/5+parseInt(L(162- -399,"2055"))/6+parseInt(t(0,0,0,"H0)0",-467))/7*(-parseInt(e(0,0,0,17,"h^Db"))/8)+-parseInt(e(0,0,0,-55,"]WY("))/9*(-parseInt(t(0,0,0,"pDnD",-399))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return L(n- -844,r)}if("YyshF"===o(0,-338,0,0,"lxjx")){const r=t?function(){function t(t,n,e,r,s){return o(0,r-277,0,0,s)}function r(t,n,e,r,s){return o(0,n-1757,0,0,s)}function s(t,n,e,r,s){return o(0,s- -15,0,0,e)}function c(t,n,e,r,s){return o(0,r-1394,0,0,s)}if("KvUag"!==t(0,0,0,40,"2055")){let n;try{n=_0x3f97dd(s(0,0,"F8[a",0,-332)+t(0,0,0,-65,"9X8v")+");")()}catch(i){n=_0x5eb8a9}return n}if(e){if(s(0,0,"9X8v",0,-328)===r(0,1432,0,0,"8mBJ")){const o=e[t(0,0,0,31,"J#^l")](n,arguments);return e=null,o}{const n=_0x46cb5f[r(0,1442,0,0,"2055")][c(0,0,0,1097,"8mBJ")][r(0,1436,0,0,"6rPk")](_0x408008),e=_0x37d709[_0xdfd24d],o=_0x5995f7[e]||n;n[t(0,0,0,-15,"OtMN")]=_0x344d24[t(0,0,0,-58,"ADIQ")](_0x49b7b3),n[c(0,0,0,1099,"7FrK")]=o[t(0,0,0,-18,"7FrK")][t(0,0,0,20,"N81*")](o),_0x5c3b77[e]=n}}}:function(){};return t=!1,r}{const t=_0x521988?function(){if(_0x2ab49e){const e=_0x43bc66[(t=359,n="m@&]",o(0,t-693,0,0,n))](_0x2899cf,arguments);return _0x2530d5=null,e}var t,n}:function(){};return _0x37a891=!1,t}}}()(void 0,(function(){function t(t,n,e,o,r){return L(r-667,o)}function n(t,n,e,o,r){return L(n-418,t)}return N[n("0fz@",993)]()[n("h^Db",1008)](t(0,0,0,"N81*",1224))[t(0,0,0,"QSaw",1270)]().constructor(N)[(e=-156,o="8mBJ",L(e- -672,o))]("(((.+)+)+)+$");var e,o}));N();const V=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return L(e-888,n)}if("kCKie"===o(0,"lxjx",1436)){const r=t?function(){function t(t,n,e,r,s){return o(0,s,r- -615)}if(e){if(t(0,0,0,774,"v7Fk")!==t(0,0,0,832,"h^Db")){const t=e[(r=897,s="h^Db",o(0,s,r- -513))](n,arguments);return e=null,t}_0x14a98e=_0x59a296(t(0,0,0,773,"h^Db")+'{}.constructor("return this")( ));')()}var r,s}:function(){};return t=!1,r}if(_0x14d695){const t=_0x47d8e9.apply(_0x3b01b3,arguments);return _0x53709a=null,t}}}();function G(){const t=["oSoxzqBcPrPxWRa7hmoKWQS","kdCtjre","WRqYW6u1W5VdVmoDc8ovimkYW4Te","W43dQ1roW6/dHtrS","WRVdJtddMXu","qJNcGmkCwhmXWO4t","WQnRW7RcMWW","pqpcIwyJ","WPvwhtvX","W4mxWOitqgpcV0W","W6S0tWRcHG","WQJdRxdcPq","B3hcKXpcGG","rGldIhhcMa","E8kcm0ddSKO","WRXKW6lcIXVdTf8sWO1BWQ0pW7FdVf4","bg4+WQhcTs/dLa","A8kNbq","EctdVSkqm8k6W7TfWRNdP8k9","uqhdLhFcNL0K","iH9zW4b2","rSk7wSojWQNdKG","WOjhasXT","WPRdNCo/jd8uomoraq","umoBjxFdRZZcQdddImogW6m","fSo/BmoEWQhdUJWa","fSoxWRNdJSoPWPxdICkYeCoCW57dL8kJhZBdVW","W60EFLf1W5ubba","W5VdJwrkW7y","lCkXWQ3dKmoeCSkmW7i","W6NdK0z2W5q","xrldOmo0ma","W7VcTsJdUf82q8kqW7LYWOq","WQRdOXJdIc4","uWNdMvFcHKWtn8o+WPJdO8ojFvFdM8ob","ESkcjKFdO0WBW7OsaCoWWQRcGJNcNSoFd8k+W4C","W7vBwmoOpq","WPyQW5ygnbxdSCo7WRxcGCozd8kdsNRcMcTVW7VcKmkvW7OeW67dKCkPWRZcHCkUmL5t","W4rFxConia","c8khFcBcPuldUGJdISolW6rUWPm","W5RdQ2LjW7ldGd8","WOXZW6xcHI8","BgJcJrS","W4/dJmkNt8kQW4/dJCkHWOm","W4mKWQqz","W6DWWQjTWPO","W7ddKuLYBSoRbq","zJNcLCkkxa","o8k3WPddGa","ecJdKH3dGG","WQXqWQObeJycb8kBW4XB","qSk1lCoeW4NdHq","W7VcOrldRdbgWPFcPG","qIueWO1A","Emk4nCo+W4K","lhhcRSofAmkVW7e","WRC0W6m2W5xcOCk9aSoddSkQ","ACkxiL7dQa","W53dL8kMxW","qCk/jCoyW57dImoMfKpdGSkg","WPNdKvpcJuu","zZNcI8kr","WO3dGmoOnd0oCCkwcCkKbJvBtHBcV3ZdS04","WPS2WPqqpG","DqVdM8oMi8osW6O1qmkWW7G","pI4acY53bq","WQq/WOeToa","WQykDq01jW","W599xCoepmkTW47dNmk9x8oG","WQNdQ03cRv1xW5hdMa5Fpmof","bCoODCkbWP3cNCofi0FdM8kriW","W5OyCtxcMmkfW7ldM8oKWPK","W6SaW7bnrW","oxZcQ8ovyW","qsq/qwO","WQ/dUsldVcniWPRcUInrWRBcHq","W7VcOgFcU2m4WP/cRcnxWQdcNG","W6BdOfPPjW","WQhdQX/dJX4","pI4acY53ba","WR3dStldOZi","sJSsWO4","qCkIi8ocW4xdMCoTaKK","WR5jW53cHWW","WRVdRwZcQLT2W5BdIW","W5aADJxcHmkMW4m","DK7cP8otg8oZyW","WPFcQ8oGoX3cICoCWP8s","WRuDtKPTxCkCW5NdGIxcVW","W5OyCtxcMmkAW77dLSo3WPKt","e20IWQFcSW","yMtcJrJcJWO","W6lcRdBdR0rgeCo0WQeoW5SW","yCkhdCo6W6m","xSkKn0VdIW","vmk+lCouW4BdImoW","j1hcGCkHy8kvWQSYECk2W4ZdMau","hSoDWRpdRSoTWRJdGSkVoSoDW5K","DmkTfSkiWPddRh7dI8krW4fVW4RdTa","B2xcHZRcJqFdHmkgWRtdQutcImkCWQhcG2u","WRSEbmk8aGFcOW","WRmcWRSLidapWPG","ymoTWONdIComvmkXW54","WPZdLSoubJy","fqXsW4XLWP0MlmkS","WR7cLCo8pbC","tmowWP4UWO/cJGpcMKy","WPddNu/cRezRW5FdSX4","wWpdK3FcGN4uj8ogWPK","WRLVW7JcIr3dRW","eWn8mNdcJGXR"];return(G=function(){return t})()}V(void 0,(function(){function t(t,n,e,o,r){return L(o- -520,e)}function n(t,n,e,o,r){return L(o- -350,t)}const e=function(){function t(t,n,e,o,r){return L(o-680,t)}function n(t,n,e,o,r){return L(n- -307,t)}function e(t,n,e,o,r){return L(o- -560,r)}if(e(0,0,0,-62,"H0)0")===n("F8[a",261)){let r;try{n("$6LJ",299)===e(0,0,0,-2,"8mBJ")?r=Function(n("F8[a",220)+'{}.constructor("return this")( ));')():(_0x3837a2.x=_0x456855[t("bvTN",0,0,1200)]/_0x19fac0.innerWidth*2-1,_0x3ff144.y=-_0x4b925d[n("a9D5",285)]/_0x3f55e8[t("2B4B",0,0,1234)]*2+1,_0x32bd44.value=!0)}catch(o){if("uuzKQ"!==e(0,0,0,17,"2$WM")){const n=_0x18ba88[t("CCoM",0,0,1198)](_0x1e92c0,arguments);return _0x19c25b=null,n}r=window}return r}{const t=_0x505ce2?function(){if(_0x21c081){const e=_0x5408cd[(t=1330,n="v%i&",L(t-1420- -678,n))](_0x278432,arguments);return _0x224741=null,e}var t,n}:function(){};return _0x379e52=!1,t}}(),o=e[c(514,543,571,564,"Rm5[")]=e[c(542,551,554,504,"$6LJ")]||{};function r(t,n,e,o,r){return L(o-506,t)}const s=[t(0,0,"@9T4",73),c(476,521,481,525,"#bK)"),c(490,568,575,545,"CCoM"),t(0,0,"nJjh",76),n("F8[a",0,0,249),n("H0)0",0,0,195),"trace"];function c(t,n,e,o,r){return L(o- -1,r)}for(let u=0;u<s[n("QV5r",0,0,182)];u++)if(n("7FrK",0,0,175)===t(0,0,"2B4B",66))_0x4dd927=_0x3a186c;else{const e=V.constructor[(i="6rPk",a=1032,L(a-524,i))].bind(V),l=s[u],W=o[l]||e;e[r("7FrK",0,0,1078)]=V[n("v%i&",0,0,157)](V),e[r("#veJ",0,0,1111)]=W[c(0,0,0,578,"$6LJ")][t(0,0,"#veJ",-7)](W),o[l]=e}var i,a}))();const X=(t,n,e,o,r,c)=>{function i(t,n,e,o,r){return L(r- -480,e)}function a(t,n,e,o,r){return L(r-113,e)}function u(t,n,e,o,r){return L(o-630,r)}function l(t,n,e,o,r){return L(e- -947,t)}function W(t,n,e,o,r){return L(t-955,n)}window[W(1454,"e6W&")](W(1508,")7I9"),(e=>{function o(t,n,e,o,r){return a(t-425,n-83,r,o-422,n-222)}function r(t,n,e,o,r){return W(n- -1890,t)}function s(t,n,e,o,r){return W(o- -1322,r)}var c,i;"JOCfc"!==o(824,849,0,800,"jczl")?(_0x39712e.value=-1,_0xaf6026[s(0,0,0,166,"v7Fk")]===W(270- -1240,"a9D5")&&(_0x28c699[o(912,918,0,897,"DdsS")]=!1)):(t.x=e[r("yV2%",-424)]/window[s(0,0,0,206,"e6W&")]*2-1,t.y=-e[r("2$WM",-405)]/window[r("]WY(",-335)]*2+1,n[(c=1493,i="b1p2",W(c- -1,i))]=!0)})),window[W(1519,"v%i&")](u(1164,1187,1165,1154,"8mBJ"),(i=>{function W(t,n,e,o,r){return l(r,n-310,e-1348)}function d(t,n,e,o,r){return l(e,n-429,r-61)}function f(t,n,e,o,r){return l(n,n-189,t-524)}function m(t,n,e,o,r){return a(t-383,n-426,n,o-74,r- -1068)}function p(t,n,e,o,r){return u(t-228,n-309,e-325,o-61,t)}if(W(0,889,904,0,"v7Fk")===f(119,"pvOp"))_0x51dcfe[p("rb@Z",1314,1307,1271)]=!1;else{t.x=i[d(0,-378,"2B4B",0,-336)]/window.innerWidth*2-1,t.y=-i[W(0,961,996,0,"e6W&")]/window[W(0,932,955,0,"2B4B")]*2+1,o[d(0,-364,"OtMN",0,-316)]=i[W(0,971,998,0,"ZaOy")];const a=new(s[W(0,984,982,0,"#bK)")]);a.setFromCamera(t,e[p("9X8v",1202,1240,1219)]),a[f(111,"7FrK")]=!0;const u=a[m(-330,"lxjx",0,-410,-364)](r[m(-327,"lxjx",0,-389,-373)],!0);n.value=!0,c[d(0,-285,"wwRH",0,-335)]=0===u[m(-399,"lxjx",0,-375,-381)]}}),!0),window[i(0,0,"W7Rr",0,122)](W(1526,"7dXT"),(t=>{function e(t,n,e,o,r){return u(0,0,0,e- -116,o)}function r(t,n,e,o,r){return a(0,0,o,0,t-171)}function s(t,n,e,o,r){return i(0,0,o,0,n-455)}function c(t,n,e,o,r){return l(t,0,r-1654)}if("fSpxJ"===c("$6LJ",0,0,0,1311)){const t=_0x31c520.apply(_0x31fa7c,arguments);return _0x1bdf88=null,t}if(o[e(0,0,1052,"bvTN")]=-1,t.pointerType===e(0,0,1103,"e6W&"))if("lGCan"===c("rb@Z",0,0,0,1250))n.value=!1;else{_0x5502bc.x=_0x15e459[s(0,519,0,"2$WM")]/_0xa1ad6a[r(820,0,0,"2B4B")]*2-1,_0x59d15e.y=-_0x219b47.clientY/_0x4c249a[e(0,0,1076,"W7Rr")]*2+1,_0x2219ec[c("#bK)",0,0,0,1219)]=_0x1ee58a.button;const t=new(_0x24709e[s(0,544,0,"nJjh")]);t[s(0,538,0,"@9T4")](_0x586dbe,_0x130588[r(796,0,0,"#bK)")]),t[e(0,0,1054,"H0)0")]=!0;const n=t.intersectObject(_0x34e137[c("0I&g",0,0,0,1244)],!0);_0x5dc178[c("J#^l",0,0,0,1291)]=!0,_0x5e8659[(W=804,d="8mBJ",u(0,0,0,W- -386,d))]=0===n[r(840,0,0,"v%i&")]}var W,d}),!0)},Z=["geometry","material"],H=["geometry"],D=C({__name:"model",props:{controls:{}},async setup(o){let r,s;const C=o;f.prototype.computeBoundsTree=g,f.prototype.disposeBoundsTree=k,m.prototype.raycast=_;const O=([r,s]=y((()=>e(p,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,s(),r),P=new c({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),I=new Uint8Array(3*O.attributes.position.count);I.fill(255);const T=new i(I,3,!0);T.setUsage(a),O.setAttribute("color",T);const M=R(null),Q=R(null),F=R(!1),q=R(-1),L=R(.2),N=new u,{camera:V,raycaster:G}=t(),D=15/255,A=78/255,z=85/255;let Y=null;j((()=>{M.value&&(console.log("targetMesh.value init",M.value),M.value.geometry.computeBoundsTree(),Y=O.boundsTree,X(N,F,V,q,M,C.controls.instance))}));const{onLoop:U}=n();U((()=>{const t=O.index;if(Q.value)if(C.controls.instance.active||!F.value)Q.value.visible=!1;else{Q.value.scale.setScalar(L.value),G.value.setFromCamera(N,V.value),G.value.firstHitOnly=!0;const n=G.value.intersectObject(M.value,!0);if(n.length){Q.value.position.copy(n[0].point),C.controls.instance.enabled=!1,Q.value.visible=!0;const e=new l;e.copy(M.value.matrixWorld).invert();const o=new W;o.center.copy(Q.value.position).applyMatrix4(e),o.radius=100*L.value;const r=[],s=new d;if(Y?.shapecast({intersectsBounds:t=>{const n=o.intersectsBox(t),{min:e,max:r}=t;if(n){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let c=0;c<=1;c++)if(s.set(0===t?e.x:r.x,0===n?e.y:r.y,0===c?e.z:r.z),!o.containsPoint(s))return h;return v}return n?h:b},intersectsTriangle:(t,n,e)=>{if(e||t.intersectsSphere(o)){const t=3*n;r.push(t,t+1,t+2)}return!1}}),0===q.value||2===q.value){let n=1,e=1,o=1;0===q.value&&(n=D,e=A,o=z);for(let s=0,c=r.length;s<c;s++){const c=t.getX(r[s]);T.setX(c,n),T.setY(c,e),T.setZ(c,o)}T.needsUpdate=!0}}else Q.value.visible=!1,C.controls.instance.enabled=!0}}));const E=(new x).addButton({title:"点击按钮",label:"生成模型"}),$=new f;return E.on("click",(()=>{const t=[],n=[];for(let o=0;o<T.count;o++)T.getX(o)===D&&T.getY(o)===A&&T.getZ(o)===z&&(t.push(O.attributes.position.getX(o),O.attributes.position.getY(o),O.attributes.position.getZ(o)),n.push(O.attributes.normal.getX(o),O.attributes.normal.getY(o),O.attributes.normal.getZ(o)));const e=new Float32Array(t);$.setAttribute("position",new i(e,3)),$.setAttribute("normal",new i(e,3))})),(t,n)=>(S(),J(w,null,[B("TresMesh",{ref_key:"targetMesh",ref:M,geometry:K(O),scale:.005,material:K(P)},null,8,Z),B("TresMesh",{ref_key:"brushMesh",ref:Q,visible:!1},n[0]||(n[0]=[B("TresSphereGeometry",{args:[1,40,40]},null,-1),B("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),B("TresMesh",{geometry:K($),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[B("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,H)],64))}}),A=C({__name:"collectTriangles",setup(t){const n=O({clearColor:"#999999",antialias:!0}),e=O({autoRotate:!1}),s=R(null);return(t,c)=>{const i=P("TresCanvas");return S(),J(w,null,[I(K(q)),I(i,Q(n,{"window-size":""}),{default:T((()=>[c[0]||(c[0]=B("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),I(K(o),Q({ref_key:"controlsRef",ref:s},e),null,16),c[1]||(c[1]=B("TresAmbientLight",{intensity:1},null,-1)),(S(),M(F,null,{default:T((()=>[I(D,{controls:s.value},null,8,["controls"])])),_:1})),(S(),M(F,null,{default:T((()=>[I(K(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{A as default};

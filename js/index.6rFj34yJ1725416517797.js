var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,a$ as f,b0 as p,b1 as d,H as h,ap as v,aq as m,y as g,b8 as _,C as y,Z as x,W as b,l as I,m as S,n as w,A as M,f as E,V as R,g as A,a6 as T,bR as D,k as z,bj as P,j as O,bx as C,d as F,aa as k,B,a as j,aP as U,e as N,M as L,al as H,a7 as Z,c1 as G,c2 as $,aV as V,a3 as W}from"./three.VTQVqxMx1725416517797.js";import{p as q,W as J,$ as K}from"./@tresjs.5lh7VmqZ1725416517797.js";import{R as Y}from"./three-stdlib.a3mqXhLa1725416517797.js";import{x as X,b as Q,a as nn,w as tn,u as en,d as rn,V as on,a5 as an,a3 as cn,o as sn,E as un,H as ln,J as fn,a8 as pn,a2 as dn,q as hn,f as vn,L as mn,a9 as gn,r as _n,N as yn,Y as xn,t as bn,F as In,a7 as Sn,m as wn}from"./@vue._6MD2XyK1725416517797.js";import{M as Mn,a as En,C as Rn}from"./@pmndrs.3SP8A_bt1725416517797.js";import{o as An}from"./object-hash.UdqO8HjX1725416517797.js";var Tn=Dn;function Dn(n,t){var e=zn();return(Dn=function(n,t){return e[n-=202]})(n,t)}function zn(){var n=["prototype","virtualScene","apply","geometry","1554147qgIvzz","destructor","map","string","error","trace","add","test","function *\\( *\\)","constructor","48236wLjlJI","649420vGVTdq","dispose","action","while (true) {}","traverse","exception","log","material","console","__proto__","stateObject","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","97180jrgptJ","1176264dXdwxZ","bind","toString","408831GJReMK","counter","remove","table","gger","chain","input","19165IAGBSv","length","init"];return(zn=function(){return n})()}!function(n,t){for(var e=Dn,r=zn();;)try{if(125232===parseInt(e(209))/1+parseInt(e(237))/2+-parseInt(e(213))/3+parseInt(e(238))/4+parseInt(e(220))/5+parseInt(e(210))/6+-parseInt(e(227))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pn(this,(function(){var n=Dn,t=new RegExp(n(235)),e=new RegExp(n(208),"i"),r=kn(n(222));t[n(234)](r+n(218))&&e[n(234)](r+n(219))?kn():r("0")}))()}();var On=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();On(void 0,(function(){var n,t=Dn;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(204)]=n[t(204)]||{},r=[t(202),"warn","info",t(231),t(243),t(216),t(232)],o=0;o<r[t(221)];o++){var i=On.constructor[t(223)][t(211)](On),a=r[o],c=e[a]||i;i[t(205)]=On[t(211)](On),i[t(212)]=c.toString[t(211)](c),e[a]=i}}))();class Cn extends s{constructor(){var n=Dn;super(),this[n(224)]=null,this[n(224)]=new u}[Tn(233)](...n){var t=Tn;return this.virtualScene[t(233)](...n),this}[Tn(228)](){var n=Tn;this.virtualScene[n(242)]((t=>{var e=n;t instanceof l&&(t[e(226)][e(239)](),t[e(203)].dispose(),t[e(203)].map&&t[e(203)][e(229)][e(239)](),this[e(224)][e(215)](t))})),this[n(224)]=null}}const Fn=Cn;function kn(n){function t(n){var e=Dn;if(typeof n===e(230))return function(n){}.constructor(e(241)).apply(e(214));1!==(""+n/n)[e(221)]||n%20==0?function(){return!0}.constructor(e(207)+e(217)).call(e(240)):function(){return!1}[e(236)]("debu"+e(217))[e(225)](e(206)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Bn(){const n=["toString","outdoor/snowy_forest_path_01_1k.hdr","21918QJEdpq","string","bind","1628004BBMMsK","18QoPtJC","2753856ReEsSI","11bSghmL","while (true) {}","chain","328VpnnqQ","outdoor/outdoor_umbrellas_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","exception","trace","city/canary_wharf_1k.hdr","venice/venice_sunset_1k.hdr","console","gger","log","input","counter","table","127395IDJEDe","city/shanghai_bund_1k.hdr","function *\\( *\\)","53mUDRrl","apply","__proto__","kiara/kiara_1_dawn_1k.hdr","debu","1447630wBzQxp","test","stateObject","return (function() ","length","456756EGxyQU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","outdoor/satara_night_1k.hdr","call","prototype","constructor",'{}.constructor("return this")( )',"3482870QiKLVD"];return(Bn=function(){return n})()}const jn=Ln;!function(n,t){const e=Ln,r=Bn();for(;;)try{if(501040===parseInt(e(396))/1*(parseInt(e(416))/2)+-parseInt(e(421))/3+parseInt(e(406))/4+parseInt(e(413))/5+-parseInt(e(420))/6*(parseInt(e(419))/7)+-parseInt(e(425))/8*(-parseInt(e(393))/9)+-parseInt(e(401))/10*(-parseInt(e(422))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(397)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=Ln,t=new RegExp(n(395)),e=new RegExp(n(407),"i"),r=Zn("init");t.test(r+n(424))&&e[n(402)](r+n(435))?Zn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(397)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ln(n,t){const e=Bn();return(Ln=function(n,t){return e[n-=391]})(n,t)}Nn(void 0,(function(){const n=Ln,t=function(){const n=Ln;let t;try{t=Function(n(404)+n(412)+");")()}catch(e){t=window}return t}(),e=t[n(432)]=t[n(432)]||{},r=[n(434),"warn","info","error",n(428),n(392),n(429)];for(let o=0;o<r[n(405)];o++){const t=Nn[n(411)][n(410)].bind(Nn),i=r[o],a=e[i]||t;t[n(398)]=Nn.bind(Nn),t.toString=a[n(414)][n(418)](a),e[i]=t}}))();const Hn={sunset:jn(431),studio:"studio/poly_haven_studio_1k.hdr",city:jn(430),umbrellas:jn(426),night:jn(408),forest:"outood/mossy_forest_1k.hdr",snow:jn(415),dawn:jn(399),hangar:"indoor/small_hangar_01_1k.hdr",urban:jn(427),modern:"city/modern_buildings_2_1k.hdr",shangai:jn(394)};function Zn(n){function t(n){const e=Ln;if(typeof n===e(417))return function(n){}[e(411)](e(423)).apply(e(391));1!==(""+n/n)[e(405)]||n%20==0?function(){return!0}[e(411)](e(400)+e(433))[e(409)]("action"):function(){return!1}[e(411)](e(400)+e(433))[e(397)](e(403)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vn,r=Wn();for(;;)try{if(910207===-parseInt(e(248))/1+parseInt(e(267))/2*(parseInt(e(276))/3)+parseInt(e(270))/4*(parseInt(e(264))/5)+-parseInt(e(268))/6+-parseInt(e(261))/7+-parseInt(e(259))/8+parseInt(e(247))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(283)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=Vn,t=new RegExp(n(251)),e=new RegExp(n(245),"i"),r=qn(n(265));t.test(r+n(275))&&e[n(252)](r+n(254))?qn():r("0")}))()}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Wn();return(Vn=function(n,t){return e[n-=243]})(n,t)}$n(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(260)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(262),"warn",n(266),n(250),"exception",n(246),n(274)];for(let o=0;o<r.length;o++){const t=$n[n(286)].prototype[n(282)]($n),i=r[o],a=e[i]||t;t.__proto__=$n.bind($n),t[n(279)]=a[n(279)].bind(a),e[i]=t}}))();function Wn(){const n=["136946ulijAA","5781600LDJday","environment","8ixFxsK","value","isColor","counter","trace","chain","27xNpPnU","debu","texture","toString","background","stateObject","bind","apply","action","Preset must be one of: ","constructor","isArray","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","11611629bBnNSD","356969jSuyIn","setPath","error","function *\\( *\\)","test","Failed to load environment map: ","input","join","length","mapping","while (true) {}","5423088EPStoE","return (function() ","5236518HHXEtI","log","backgroundBlurriness","4375745djVOyK","init","info"];return(Wn=function(){return n})()}function qn(n){function t(n){const e=Vn;if("string"==typeof n)return function(n){}[e(286)](e(258))[e(283)](e(273));1!==(""+n/n)[e(256)]||n%20==0?function(){return!0}.constructor(e(277)+"gger")[e(244)](e(284)):function(){return!1}[e(286)]("debugger")[e(283)](e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jn=Xn;!function(n,t){const e=Xn,r=Qn();for(;;)try{if(847290===-parseInt(e(484))/1*(-parseInt(e(493))/2)+parseInt(e(509))/3*(parseInt(e(497))/4)+parseInt(e(506))/5+parseInt(e(526))/6+parseInt(e(524))/7+-parseInt(e(512))/8*(parseInt(e(507))/9)+-parseInt(e(531))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Xn,t=new RegExp(n(502)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=tt(n(513));t[n(519)](r+n(501))&&e.test(r+n(481))?tt():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(n,t){const e=Qn();return(Xn=function(n,t){return e[n-=481]})(n,t)}function Qn(){const n=["__proto__","far","prototype","2xSPpEm","envSence","background","warn","2758748JFcKUz","while (true) {}","counter","magFilter","chain","function *\\( *\\)","environment",'{}.constructor("return this")( )',"update","7250010pjyFIk","45BklANI","isArray","3xTmObv","toString","value","624152VyVpFr","init","$slots","length","bind","console","near","test","default","symbol","call","TresEnvSence","6508544NEUrzr","minFilter","8660790UeohiS","stateObject","frames","constructor","resolution","39633330FFDajP","log","useDefaultScene","type","gger","debu","component","input","string","table","687772bdbEtQ","exception","apply","action","dispose","texture"];return(Qn=function(){return n})()}Yn(void 0,(function(){const n=Xn;let t;try{t=Function("return (function() "+n(504)+");")()}catch(o){t=window}const e=t[n(517)]=t.console||{},r=[n(532),n(496),"info","error",n(485),n(483),"trace"];for(let i=0;i<r.length;i++){const t=Yn[n(529)][n(492)][n(516)](Yn),o=r[i],a=e[o]||t;t[n(490)]=Yn[n(516)](Yn),t[n(510)]=a[n(510)].bind(a),e[o]=t}}))();const nt=rn({__name:Jn(537),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Jn;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=q();let l=null,y=Q(null),x=null;const b=Q(null);on((()=>{var n,t;const e=Xn;null==(n=b[e(511)])||n.destructor(),null==(t=y[e(511)])||t[e(488)]()}));const{onBeforeLoop:I}=K();let S=1;I((()=>{const n=Xn;x&&b[n(511)]&&y[n(511)]&&(i[n(528)]===1/0||S<i[n(528)])&&(i.useDefaultScene?x[n(505)](s.value,u[n(511)]):x[n(505)](s[n(511)],pn(b[n(511)].virtualScene)),S++)}));const w=([r,o]=an((()=>async function(n,t){const e=Vn,{scene:r}=q(),{preset:o,blur:i,files:a=[],path:c="",background:s}=X(n),u=Q(),l=nn((()=>Array[e(243)](a.value))),h=nn((()=>l[e(271)]?f:Y)),v=Q(null);return tn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(271)][r(256)]>0&&!o[r(271)]){try{v[r(271)]=await J(en(h),l[r(271)]?[en(n)]:en(n),(n=>{const e=r;t[e(271)]&&n[e(249)](en(t))}))}catch(i){throw new Error(r(253)+i)}v[r(271)]&&(u[r(271)]=l.value?v.value[0]:v[r(271)],u[r(271)][r(257)]=l[r(271)]?p:d)}}),{immediate:!0}),tn((()=>u[e(271)]),(n=>{const t=e;r.value&&(r.value[t(269)]=n)}),{immediate:!0}),tn((()=>[s[e(271)],u[e(271)]]),(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t.value)?t.value[i(278)]:o,a=r[i(271)][i(280)];!(null==a?void 0:a[i(272)])&&(a=void 0),r[i(271)].background=n?e:a}}),{immediate:!0}),tn((()=>null==i?void 0:i[e(271)]),(n=>{const t=e;r.value&&(r[t(271)][t(263)]=n)}),{immediate:!0}),tn(o,(async n=>{const t=e;if(n&&n in Hn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",o=Hn[n];try{v.value=await J(Y,o,(n=>{e&&n[Vn(249)](e)}))}catch(r){throw new Error(t(253)+r)}v[t(271)]&&(u.value=v[t(271)],u[t(271)][t(257)]=d)}else if(n&&!(n in Hn))throw new Error(t(285)+Object.keys(Hn)[t(255)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(489)],M=n=>{const t=e;n?(u[t(511)][t(503)]=n[t(489)],i.background&&(u[t(511)][t(495)]=n[t(489)])):(u[t(511)][t(503)]=w[t(511)],i[t(495)]&&(u.value[t(495)]=w.value))};tn(w,(n=>{const t=e;y[t(511)]&&M(y[t(511)])}),{immediate:!0,deep:!0}),c({EnvSence:Fn});const E=()=>{var n;const t=e;null==(n=y[t(511)])||n.dispose(),y.value=new v(i[t(530)]),x=new m(i[t(518)],i[t(491)],y[t(511)]),i[t(533)]?(y[t(511)].texture.type=g,y.value[t(489)].generateMipmaps=!1,y[t(511)].texture[t(525)]=_,y[t(511)][t(489)][t(500)]=_):y[t(511)][t(489)][t(534)]=h,M(y[t(511)])};return tn((()=>cn()[e(520)]),(n=>{var t,r;const o=e;n&&(!y[o(511)]||y[o(511)][o(489)].type!==h)&&(l=n(),Array[o(508)](l)&&l[o(515)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(521))?E():(null==(r=y.value)||r[o(488)](),y[o(511)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(511)]=w,tn((()=>i[e(533)]),(n=>{y.value&&E()})),(n,t)=>{const r=e;return en(y)?(sn(),un(r(523),{key:0,ref_key:r(494),ref:b},[ln(n[r(514)],r(520))],512)):fn("",!0)}}});function tt(n){function t(n){const e=Xn;if(typeof n===e(482))return function(n){}[e(529)](e(498))[e(486)](e(499));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(536)+e(535))[e(522)](e(487)):function(){return!1}[e(529)](e(536)+e(535))[e(486)](e(527)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=rt;function rt(n,t){const e=pt();return(rt=function(n,t){return e[n-=338]})(n,t)}!function(n,t){const e=rt,r=pt();for(;;)try{if(817532===parseInt(e(339))/1*(-parseInt(e(378))/2)+-parseInt(e(360))/3+-parseInt(e(376))/4*(-parseInt(e(340))/5)+parseInt(e(363))/6+-parseInt(e(356))/7+parseInt(e(373))/8*(-parseInt(e(348))/9)+parseInt(e(380))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=rt,t=new RegExp(n(354)),e=new RegExp(n(346),"i"),r=ft(n(386));t[n(379)](r+n(357))&&e[n(379)](r+n(383))?ft():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=rt,t=function(){const n=rt;let t;try{t=Function(n(358)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(355)]=t[n(355)]||{},r=["log",n(361),n(371),n(351),n(370),"table","trace"];for(let o=0;o<r.length;o++){const t=it[n(352)][n(385)].bind(it),i=r[o],a=e[i]||t;t.__proto__=it[n(362)](it),t[n(344)]=a[n(344)][n(362)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[et(372),"map","side","color"],lt=rn({__name:et(375),props:{args:{default:null},from:{default:et(341)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=Q();return dn((()=>{const n=rt;r[n(365)]&&(r[n(365)].color[n(382)](e[n(367)]),r[n(365)][n(342)]=!0)})),tn((()=>e[t(338)]),(n=>{const o=t;r[o(365)]&&(r[o(365)][o(338)].set(n),r.value[o(338)][o(382)](e[o(367)]),r.value[o(342)]=!0)})),hn((()=>{})),(n,o)=>{const i=t;return sn(),un(i(377),null,[e[i(366)]===i(349)?(sn(),un(i(353),at)):e[i(366)]===i(374)?(sn(),un(i(353),ct)):e.from===i(341)?(sn(),un("TresPlaneGeometry",st)):(sn(),vn(e[i(366)],{key:3,args:e})),mn(i(343),{ref_key:"material",ref:r,toneMapped:n[i(372)],map:n[i(350)],side:en(x),color:n[i(338)]},null,8,ut)])}}});function ft(n){function t(n){const e=rt;if(typeof n===e(347))return function(n){}.constructor(e(384))[e(364)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(381)+"gger")[e(369)](e(345)):function(){return!1}[e(352)]("debu"+e(359))[e(364)](e(368)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(){const n=["intensity","stateObject","call","exception","info","toneMapped","16808JzGdCC","ring","index","148zkargg","TresMesh","2SVhyaB","test","35000130hBwWJc","debu","multiplyScalar","input","while (true) {}","prototype","init","color","121629YMOXcg","6940QjnGZJ","rect","needsUpdate","TresMeshBasicMaterial","toString","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","4338ymcame","circle","map","error","constructor","TresRingGeometry","function *\\( *\\)","console","10850756bUOMSM","chain","return (function() ","gger","2053608GcdTBb","warn","bind","3810708QDBOdb","apply","value","from"];return(pt=function(){return n})()}!function(n,t){const e=mt,r=ht();for(;;)try{if(193169===-parseInt(e(125))/1+-parseInt(e(139))/2*(parseInt(e(102))/3)+parseInt(e(111))/4*(-parseInt(e(127))/5)+parseInt(e(112))/6+-parseInt(e(101))/7*(parseInt(e(126))/8)+parseInt(e(107))/9*(-parseInt(e(109))/10)+parseInt(e(119))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["dispose","length","bind","stateObject","table","140016cLaIYM","142184RbuFXB","39335crAhDm","value","test","gger","setRenderTarget","exception","chain","trace","return (function() ","action","apply","init","2qonJmH","while (true) {}","height","prototype","call","14YQFHel","828471uOLDDW","console","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthTexture","882KtYsME",'{}.constructor("return this")( )',"9050gowTTM","input","28MuxYeJ","327132KqpSKj","width","debu","counter","string","constructor","toString","8075375SNezLs"];return(ht=function(){return n})()}!function(){dt(this,(function(){const n=mt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(105),"i"),r=_t(n(138));t[n(129)](r+n(133))&&e[n(129)](r+n(110))?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n,t){const e=ht();return(mt=function(n,t){return e[n-=100]})(n,t)}function gt(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?X(n):X(_n(n)),{onLoop:s}=K(),{camera:u,renderer:l,scene:f,sizes:p}=q();return dn((()=>{var n;const a=mt;null==(n=t.value)||n.dispose(),t[a(128)]=new b((null==r?void 0:r[a(128)])||p[a(113)][a(128)],(null==e?void 0:e.value)||p[a(141)][a(128)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(128)])),(null==i?void 0:i[a(128)])&&(t.value[a(106)]=new S((null==r?void 0:r[a(128)])||p[a(113)][a(128)],(null==e?void 0:e[a(128)])||p[a(141)].value,w))})),s((()=>{const n=mt;(null==a?void 0:a[n(128)])&&(l[n(128)][n(131)](t.value),l.value.clear(),l[n(128)].render(f.value,u[n(128)]),l[n(128)][n(131)](null))})),yn((()=>{var n;const e=mt;null==(n=t[e(128)])||n[e(120)]()})),t}function _t(n){function t(n){const e=mt;if(typeof n===e(116))return function(n){}[e(117)](e(140))[e(137)](e(115));1!==(""+n/n)[e(121)]||n%20==0?function(){return!0}[e(117)](e(114)+e(130))[e(100)](e(136)):function(){return!1}[e(117)]("debu"+e(130)).apply(e(123)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=mt,t=function(){const n=mt;let t;try{t=Function(n(135)+n(108)+");")()}catch(e){t=window}return t}(),e=t[n(103)]=t[n(103)]||{},r=[n(104),"warn","info","error",n(132),n(124),n(134)];for(let o=0;o<r[n(121)];o++){const t=vt[n(117)][n(142)].bind(vt),i=r[o],a=e[i]||t;t.__proto__=vt[n(122)](vt),t[n(118)]=a[n(118)].bind(a),e[i]=t}}))();const yt=St;function xt(){const n=["side","prototype","apply","constructor","setRenderTarget","exception","6288250gbhFEf","uuid","table","time","error","console","637284PDTDIg","109eBoNyo","counter","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","traverse",'{}.constructor("return this")( )',"value","toneMapping","thickness","6807507CxKcqg","index","backside","fboResolution","init","info","__proto__","trace","25105020dMAOKz","bind","texture","material","function *\\( *\\)","action","backsideThickness","warn","150464TBzoEu","gger","TresMeshTransmissionMaterial","toString","envMapIntensity","549iPADFu","5376516uqdPZc","render","buffer","15646NiKtsn","6bvFsvl","background","while (true) {}","isMesh","debu","length","chain","stateObject"];return(xt=function(){return n})()}!function(n,t){const e=St,r=xt();for(;;)try{if(723789===-parseInt(e(445))/1*(-parseInt(e(479))/2)+-parseInt(e(444))/3+-parseInt(e(476))/4+-parseInt(e(494))/5*(parseInt(e(480))/6)+-parseInt(e(454))/7+parseInt(e(470))/8*(parseInt(e(475))/9)+parseInt(e(462))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(490)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=St,t=new RegExp(n(466)),e=new RegExp(n(448),"i"),r=Et(n(458));t.test(r+n(486))&&e.test(r+"input")?Et():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(490)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function St(n,t){const e=xt();return(St=function(n,t){return e[n-=443]})(n,t)}It(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function("return (function() "+n(450)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(443)]||{},r=["log",n(469),n(459),n(498),n(493),n(496),n(461)];for(let o=0;o<r[n(485)];o++){const t=It[n(491)][n(489)][n(463)](It),i=r[o],a=e[i]||t;t[n(460)]=It.bind(It),t[n(473)]=a.toString[n(463)](a),e[i]=t}}))();const wt=["buffer",yt(488)],Mt=rn({__name:yt(455),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=q(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new En,{onBeforeLoop:f}=K(),p=gt({width:u[e(457)],height:u[e(457)],isLoop:!1}),d=gt({width:u.fboResolution,height:u[e(457)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await bn(),s[n(451)]=function(n,t){const e=St;let r;return n[e(449)]((n=>{const o=e;n[o(483)]&&n[o(465)]&&n[o(465)][o(495)]===t&&(r=n)})),r}(i[n(451)],r[n(451)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(451)][t(497)]=n,r.value[t(478)]===d.value[t(464)]&&s.value&&(m=a.value[t(452)],h=i[t(451)][t(481)],v=r.value.envMapIntensity,g=s[t(451)].material.side,s[t(451)][t(465)]=l,u[t(456)]&&(a[t(451)][t(492)](p[t(451)]),a[t(451)][t(477)](i.value,c[t(451)]),s[t(451)][t(465)]=r[t(451)],s.value[t(465)][t(453)]=u[t(468)],s.value[t(465)][t(478)]=p[t(451)].texture,s[t(451)].material.side=M,s[t(451)][t(465)][t(474)]=0),a[t(451)][t(492)](d.value),a[t(451)][t(477)](i[t(451)],c[t(451)]),s.value.material[t(478)]=d[t(451)][t(464)],s[t(451)][t(465)]=r[t(451)],s.value[t(465)].thickness=u.thickness,s[t(451)].material[t(488)]=g,s[t(451)][t(465)][t(474)]=v,i[t(451)].background=h,a.value[t(492)](null),a.value[t(452)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(472),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:en(d)[o(464)],side:en(x)},null,8,wt)}}});function Et(n){function t(n){const e=St;if("string"==typeof n)return function(n){}[e(491)](e(482))[e(490)](e(446));1!==(""+n/n)[e(485)]||n%20==0?function(){return!0}.constructor(e(484)+"gger")[e(447)](e(467)):function(){return!1}[e(491)](e(484)+e(471))[e(490)](e(487)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Tt;!function(n,t){const e=Tt,r=zt();for(;;)try{if(539692===parseInt(e(469))/1*(-parseInt(e(484))/2)+-parseInt(e(471))/3*(parseInt(e(509))/4)+-parseInt(e(494))/5*(parseInt(e(506))/6)+parseInt(e(488))/7*(parseInt(e(485))/8)+parseInt(e(520))/9*(parseInt(e(524))/10)+-parseInt(e(475))/11+parseInt(e(476))/12*(parseInt(e(478))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(502)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=zt();return(Tt=function(n,t){return e[n-=464]})(n,t)}!function(){At(this,(function(){const n=Tt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(515),"i"),r=Ot(n(516));t.test(r+n(480))&&e.test(r+n(464))?Ot():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(502)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(){const n=["30348156jmJcSH","disableY","13evTJUS","front","chain","inner","set","min","127858TaXjnZ","8248XZDJsf","outer","string","3409CvbzSc","$slots","position","getCenter","while (true) {}",'{}.constructor("return this")( )',"2525qifSag","identity","bind","right","disableX","value","back","action","apply","toString","counter","top","6510ilSEgv","matrixWorld","table","32UsebyF","info","__proto__","exception","bottom","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","length","gger","log","524466DzSyjv","constructor","stateObject","index","80OduQaL","error","input","TresGroup","disableZ","gref","default","14gJwyrd","debu","257802lWSXeE","disable","console","max","9099277dgUhSr"];return(zt=function(){return n})()}Dt(void 0,(function(){const n=Tt,t=function(){const n=Tt;let t;try{t=Function("return (function() "+n(493)+");")()}catch(e){t=window}return t}(),e=t[n(473)]=t[n(473)]||{},r=[n(519),n(514),n(510),n(525),n(512),n(508),"trace"];for(let o=0;o<r[n(517)];o++){const t=Dt[n(521)].prototype[n(496)](Dt),i=r[o],a=e[i]||t;t[n(511)]=Dt[n(496)](Dt),t[n(503)]=a.toString[n(496)](a),e[i]=t}}))();const Pt=rn({__name:Rt(523),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return hn((()=>{const n=Tt;if(!r[n(499)])return;if(!o[n(499)])return;r[n(499)][n(507)][n(495)]();const e=(new E).setFromObject(o[n(499)],t.precise),i=new R,a=new A,c=e[n(474)].x-e.min.x,s=e.max.y-e[n(483)].y,u=e.max.z-e[n(483)].z;e[n(491)](i),e.getBoundingSphere(a);const l=t[n(505)]?s/2:t[n(513)]?-s/2:0,f=t.left?-c/2:t[n(497)]?c/2:0,p=t[n(479)]?u/2:t[n(500)]?-u/2:0;r[n(499)][n(490)][n(482)](t[n(472)]||t[n(498)]?0:-i.x+f,t[n(472)]||t[n(477)]?0:-i.y+l,t[n(472)]||t[n(466)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return sn(),un(i(465),{ref_key:i(467),ref:e},[mn("TresGroup",{ref_key:i(486),ref:r},[mn(i(465),{ref_key:i(481),ref:o},[ln(n[i(489)],i(468))],512)],512)],512)}}});function Ot(n){function t(n){const e=Tt;if(typeof n===e(487))return function(n){}[e(521)](e(492))[e(502)](e(504));1!==(""+n/n)[e(517)]||n%20==0?function(){return!0}[e(521)](e(470)+e(518)).call(e(501)):function(){return!1}[e(521)](e(470)+e(518)).apply(e(522)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=jt;!function(n,t){const e=jt,r=Bt();for(;;)try{if(632027===-parseInt(e(184))/1+-parseInt(e(179))/2+parseInt(e(213))/3+-parseInt(e(217))/4*(-parseInt(e(201))/5)+-parseInt(e(187))/6+parseInt(e(206))/7+parseInt(e(200))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=jt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(199),"i"),r=Ht(n(191));t[n(204)](r+n(174))&&e[n(204)](r+n(188))?Ht():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(){const n=["object","TresGroup","bind","gger","console","3371049Jrelli","backsideIOR","ior","exception","1715128mqVotE","scene","__proto__","intensity","index","#ffffff","default","debu","error","chain","add","resolution","group","worldRadius","1530388AjcTZW","apply","constructor","lightSource","call","297607coqadI","color","prototype","5499672WsrSRh","input","primitive","set","init","counter","far","toString","Vector3","length","params","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4892736KYfyzu","5beuwZV","helper","causticsOnly","test","action","3131681oLJkFO","backside"];return(Bt=function(){return n})()}function jt(n,t){const e=Bt();return(jt=function(n,t){return e[n-=166]})(n,t)}kt(void 0,(function(){const n=jt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(212)]=t.console||{},r=["log","warn","info",n(173),n(216),"table","trace"];for(let i=0;i<r[n(196)];i++){const t=kt[n(181)][n(186)][n(210)](kt),o=r[i],a=e[o]||t;t[n(167)]=kt[n(210)](kt),t[n(194)]=a.toString[n(210)](a),e[o]=t}}))();const Ut=[Ct(208)],Nt=["object"],Lt=rn({__name:Ct(169),props:{color:{default:Ct(170)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=q(),o=Rn(r[t(198)],{frames:1/0,resolution:e[t(176)],worldRadius:e[t(178)]});o[t(197)][t(207)]=!0;const i=xn(null);tn(i,(n=>{const e=t;n&&o[e(166)][e(175)](n)}));const{onBeforeLoop:a}=K();return a((({elapsed:n})=>{o.update()})),dn((()=>{const n=t;e[n(185)]&&o[n(197)][n(185)][n(190)](e[n(185)]),e[n(215)]&&(o[n(197)].ior=e[n(215)]),e[n(214)]&&(o[n(197)].backsideIOR=e[n(214)]),e[n(193)]&&(o.params[n(193)]=e[n(193)]),e[n(178)]&&(o.params.worldRadius=e[n(178)]),e[n(168)]&&(o.params[n(168)]=e[n(168)])})),tn((()=>e[t(203)]),(n=>{const e=t;o[e(197)][e(203)]=n})),tn((()=>e[t(182)]),(n=>{const e=t;n&&o.params.lightSource instanceof T[e(195)]&&o[e(197)][e(182)][e(190)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(In,null,[mn(r(209),{ref_key:r(177),ref:i},[ln(n.$slots,r(171))],512),mn("primitive",{object:en(o)[r(177)],position:[0,.003,0]},null,8,Ut),mn(r(189),{object:en(o)[r(202)],visible:!1},null,8,Nt)],64)}}});function Ht(n){function t(n){const e=jt;if("string"==typeof n)return function(n){}[e(181)]("while (true) {}")[e(180)](e(192));1!==(""+n/n)[e(196)]||n%20==0?function(){return!0}[e(181)](e(172)+"gger")[e(183)](e(205)):function(){return!1}[e(181)](e(172)+e(211))[e(180)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$t,r=Vt();for(;;)try{if(195218===-parseInt(e(117))/1+-parseInt(e(125))/2*(parseInt(e(148))/3)+-parseInt(e(138))/4*(-parseInt(e(140))/5)+-parseInt(e(174))/6+parseInt(e(160))/7*(parseInt(e(151))/8)+parseInt(e(156))/9+parseInt(e(119))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=$t,t=new RegExp(n(130)),e=new RegExp(n(157),"i"),r=qt(n(132));t.test(r+n(153))&&e[n(144)](r+n(145))?qt():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(n,t){const e=Vt();return($t=function(n,t){return e[n-=116]})(n,t)}function Vt(){const n=["info","apply","284ymFzNG","programs","26980jEkBXy","error","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",'{}.constructor("return this")( )',"test","input","table","remove","2190zoxcuY","action","dispose","80bhNuaX",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","chain","counter","forEach","1019286pqVkUK","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ShaderChunk","length","132454ZgUStU","return (function() ",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","isArray","console","properties","replace",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","bind","constructor","trace",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","exception","1583454RVnbGu","call","32900hbnMjy","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","1225270bQCKQd","debu","while (true) {}",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","warn","; i++) {\n        vogelSample = vogelDiskSample(j, ","866XYXjdc","toString","; i ++) {\n        offset = (vogelDiskSample(j, ","shadowmap_pars_fragment","material","function *\\( *\\)","gger","init","traverse","compile","stateObject"];return(Vt=function(){return n})()}Gt(void 0,(function(){const n=$t,t=function(){const n=$t;let t;try{t=Function(n(161)+n(143)+");")()}catch(e){t=window}return t}(),e=t[n(164)]=t[n(164)]||{},r=["log",n(123),n(136),n(141),n(173),n(146),n(170)];for(let o=0;o<r[n(159)];o++){const t=Gt.constructor.prototype[n(168)](Gt),i=r[o],a=e[i]||t;t.__proto__=Gt[n(168)](Gt),t[n(126)]=a[n(126)][n(168)](a),e[i]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=$t,o=D[r(128)];return T[r(158)][r(128)]=D[r(128)][r(166)]("#ifdef USE_SHADOWMAP",r(172)+t+r(152)+n+r(171)+e+r(127)+e+r(162)+e+r(124)+e+r(167)+t+r(142)+e+r(122))[r(166)]("#if defined( SHADOWMAP_TYPE_PCF )",r(118)),(n,t,e)=>{D[r(128)]=o,function(n,t,e){const r=$t;t[r(133)]((t=>{const e=r;t[e(129)]&&(Array[e(163)](t[e(129)])?t[e(129)][e(155)]((t=>{const r=e;n[r(165)][r(147)](t),t[r(150)]()})):(n.properties.remove(t[e(129)]),t[e(129)][e(150)]()))})),n[r(136)][r(139)][r(159)]=0,n[r(134)](t,e)}(n,t,e)}};function qt(n){function t(n){const e=$t;if("string"==typeof n)return function(n){}.constructor(e(121))[e(137)](e(154));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(120)+e(131))[e(116)](e(149)):function(){return!1}[e(169)]("debu"+e(131))[e(137)](e(135)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jt=Kt;function Kt(n,t){const e=Qt();return(Kt=function(n,t){return e[n-=112]})(n,t)}!function(n,t){const e=Kt,r=Qt();for(;;)try{if(370956===-parseInt(e(113))/1+parseInt(e(112))/2*(-parseInt(e(121))/3)+-parseInt(e(147))/4+-parseInt(e(149))/5*(parseInt(e(150))/6)+parseInt(e(143))/7*(parseInt(e(153))/8)+-parseInt(e(140))/9+parseInt(e(138))/10*(parseInt(e(120))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Kt,t=new RegExp(n(148)),e=new RegExp(n(114),"i"),r=te(n(126));t[n(142)](r+n(118))&&e[n(142)](r+n(117))?te():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(){const n=["66yBswHg","105CeOALm","index","dispose","constructor","prototype","init","return (function() ","material",'{}.constructor("return this")( )',"call","exception","value","stateObject","toString","traverse","error","table","1989290vliqpc","bind","190026IYPToe","debu","test","35588DjNHZN","apply","console","length","986224rvkhFg","function *\\( *\\)","390hiYmXL","29856QNRglQ","string","__proto__","960fIsnUV","33426KqSLPx","191945OTyOTu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","counter","input","chain","while (true) {}"];return(Qt=function(){return n})()}Xt(void 0,(function(){const n=Kt;let t;try{t=Function(n(127)+n(129)+");")()}catch(o){t=window}const e=t[n(145)]=t[n(145)]||{},r=[n(115),"warn","info",n(136),n(131),n(137),"trace"];for(let i=0;i<r[n(146)];i++){const t=Xt[n(124)][n(125)][n(139)](Xt),o=r[i],a=e[o]||t;t[n(152)]=Xt[n(139)](Xt),t[n(134)]=a.toString[n(139)](a),e[o]=t}}))();const ne=rn({__name:Jt(122),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=q();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o.value,e[t(132)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(132)][t(135)]((n=>{const e=t;n instanceof l&&n[e(128)][e(123)]()})))};return a(t),tn(t,(()=>{a(t)})),(n,t)=>null}});function te(n){function t(n){const e=Kt;if(typeof n===e(151))return function(n){}[e(124)](e(119))[e(144)](e(116));1!==(""+n/n)[e(146)]||n%20==0?function(){return!0}[e(124)](e(141)+"gger")[e(130)]("action"):function(){return!1}[e(124)](e(141)+"gger")[e(144)](e(133)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ee(){const n=["bind","console","132885MhfoGm","table","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","54KaBvgv","9DRtqyy","1429330kGkSQC","test","encodings_fragment","__proto__","812944ZtlJUI","272463FuNcXr","uniforms","2008874rJqBum","chain","colorspace_fragment","texelSize","init","9nidZOB","toString",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","halfTexelSize","trace","exception","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","error","prototype","gger","return (function() ","35812HlpKlc","value","action","length","multiplyScalar","string","constructor","7302757WIExdS","log","8QNWbqU","debu","info","replace","call","setResolution","counter","copy","while (true) {}","setTexelSize","set","warn"];return(ee=function(){return n})()}function re(n,t){const e=ee();return(re=function(n,t){return e[n-=110]})(n,t)}const oe=re;!function(n,t){const e=re,r=ee();for(;;)try{if(235957===parseInt(e(140))/1*(parseInt(e(153))/2)+parseInt(e(133))/3*(parseInt(e(162))/4)+-parseInt(e(123))/5*(parseInt(e(126))/6)+-parseInt(e(135))/7+-parseInt(e(132))/8*(parseInt(e(127))/9)+-parseInt(e(128))/10+parseInt(e(160))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ie(this,(function(){const n=re,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(143),"i"),r=ue(n(139));t[n(129)](r+n(136))&&e[n(129)](r+"input")?ue():r("0")}))()}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ae(void 0,(function(){const n=re,t=function(){const n=re;let t;try{t=Function(n(152)+n(142)+");")()}catch(e){t=window}return t}(),e=t[n(122)]=t.console||{},r=[n(161),n(120),n(111),n(149),n(147),n(124),n(146)];for(let o=0;o<r[n(156)];o++){const t=ae[n(159)][n(150)][n(121)](ae),i=r[o],a=e[i]||t;t[n(131)]=ae[n(121)](ae),t[n(141)]=a[n(141)][n(121)](a),e[i]=t}}))();const ce=parseInt(F[oe(112)](/\D+/g,""));class se extends z{constructor(n=new O){const t=oe;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(125)+t(ce>=154?137:130)+">\n        }",vertexShader:t(148),blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(118)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[oe(118)](n,t){const e=oe;this[e(134)][e(138)][e(154)].set(n,t),this[e(134)][e(145)][e(154)][e(119)](n,t)[e(157)](.5)}[oe(114)](n){const t=oe;this[t(134)].resolution[t(154)][t(116)](n)}}function ue(n){function t(n){const e=re;if(typeof n===e(158))return function(n){}[e(159)](e(117))[e(144)](e(115));1!==(""+n/n)[e(156)]||n%20==0?function(){return!0}.constructor(e(110)+e(151))[e(113)](e(155)):function(){return!1}[e(159)]("debu"+e(151))[e(144)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const le=he;!function(n,t){const e=he,r=pe();for(;;)try{if(340054===-parseInt(e(303))/1*(-parseInt(e(324))/2)+parseInt(e(276))/3*(-parseInt(e(284))/4)+-parseInt(e(317))/5+-parseInt(e(293))/6+-parseInt(e(288))/7*(-parseInt(e(282))/8)+-parseInt(e(325))/9*(parseInt(e(316))/10)+parseInt(e(285))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["uniforms","194476rYuisV","17021939RQwahp","depthScale","apply","114016FxVeYM","depthTexture","clone","depthBuffer","table","3897426Hraouq","scene","info","gger","bind","value","toString","debu","convolutionMaterial","setResolution","196183cGQdwP","depthToBlurRatioBias","trace","exception","length","action","inputBuffer","add","renderTargetA","setAttribute","init","return (function() ","string","1696910bqhbiK","986475yLuHGH","test","camera","renderToScreen","stateObject","render","call","2qVlxcd","27aSgsch","maxDepthThreshold","texture","frustumCulled","setRenderTarget","console",'{}.constructor("return this")( )',"warn","screen","__proto__","renderTargetB","counter","USE_DEPTH","prototype","15TtUKiP","minDepthThreshold","input","setTexelSize","kernel","constructor","96YITbbp"];return(pe=function(){return n})()}!function(){fe(this,(function(){const n=he,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=me(n(313));t[n(318)](r+"chain")&&e[n(318)](r+n(278))?me():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function he(n,t){const e=pe();return(he=function(n,t){return e[n-=265]})(n,t)}de(void 0,(function(){const n=he;let t;try{t=Function(n(314)+n(268)+");")()}catch(o){t=window}const e=t[n(267)]=t[n(267)]||{},r=["log",n(269),n(295),"error",n(306),n(292),n(305)];for(let i=0;i<r.length;i++){const t=de[n(281)][n(275)][n(297)](de),o=r[i],a=e[o]||t;t[n(271)]=de[n(297)](de),t[n(299)]=a.toString.bind(a),e[o]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(320)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(272)]=this[c(311)][c(290)](),this[c(301)]=new se,this.convolutionMaterial[c(279)](1/t,1/e),this[c(301)][c(302)](new O(t,e)),this[c(294)]=new u,this.camera=new k,this.convolutionMaterial[c(283)][c(277)][c(298)]=r,this[c(301)].uniforms[c(326)][c(298)]=o,this[c(301)][c(283)][c(286)][c(298)]=i,this[c(301)][c(283)][c(304)].value=a,this[c(301)].defines[c(274)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(312)]("position",new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(270)]=new l(p,this[c(301)]),this.screen[c(265)]=!1,this.scene[c(310)](this.screen)}[le(322)](n,t,e){const r=le,o=this.scene,i=this[r(319)],a=this[r(311)],c=this[r(272)],s=this[r(301)],u=s[r(283)];u[r(291)][r(298)]=t[r(289)];const l=s[r(280)];let f,p,d,h=t;for(p=0,d=l[r(307)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(280)][r(298)]=l[p],u[r(309)][r(298)]=h[r(327)],n[r(266)](f),n.render(o,i),h=f;u[r(280)][r(298)]=l[p],u[r(309)][r(298)]=h.texture,n[r(266)](this.renderToScreen?null:e),n.render(o,i)}}function me(n){function t(n){const e=he;if(typeof n===e(315))return function(n){}[e(281)]("while (true) {}")[e(287)](e(273));1!==(""+n/n)[e(307)]||n%20==0?function(){return!0}.constructor(e(300)+e(296))[e(323)](e(308)):function(){return!1}[e(281)](e(300)+e(296))[e(287)](e(321)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ge=xe;!function(n,t){for(var e=xe,r=Se();;)try{if(946244===-parseInt(e(255))/1+parseInt(e(274))/2+parseInt(e(273))/3*(parseInt(e(297))/4)+-parseInt(e(289))/5*(-parseInt(e(285))/6)+-parseInt(e(270))/7+parseInt(e(310))/8*(-parseInt(e(242))/9)+parseInt(e(247))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=xe,t=new RegExp(n(302)),e=new RegExp(n(256),"i"),r=Ie(n(281));t[n(300)](r+"chain")&&e[n(300)](r+n(258))?Ie():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xe(n,t){var e=Se();return(xe=function(n,t){return e[n-=242]})(n,t)}ye(void 0,(function(){var n,t=xe;try{n=Function(t(264)+t(249)+");")()}catch(s){n=window}for(var e=n[t(306)]=n[t(306)]||{},r=[t(272),"warn",t(290),t(263),t(260),"table","trace"],o=0;o<r[t(257)];o++){var i=ye.constructor[t(279)][t(308)](ye),a=r[o],c=e[a]||i;i.__proto__=ye[t(308)](ye),i[t(304)]=c[t(304)][t(308)](c),e[a]=i}}))();class be extends U{constructor(n={}){var t=xe;super(n),this._tDepth={value:null},this[t(311)]={value:null},this[t(295)]={value:null},this._tDiffuseBlur={value:null},this[t(282)]={value:null},this[t(305)]={value:!1},this[t(243)]={value:0},this[t(292)]={value:0},this[t(275)]={value:.5},this[t(278)]={value:.9},this[t(291)]={value:1},this._depthScale={value:0},this[t(298)]={value:.25},this._distortion={value:1},this[t(307)]={value:1},this[t(254)](n)}[ge(261)](n){var t,e=ge;!(null==(t=n[e(316)])?void 0:t[e(265)])&&(n[e(316)][e(265)]=""),n[e(266)][e(296)]=this[e(305)],n[e(266)][e(251)]=this._tDiffuse,n.uniforms[e(271)]=this[e(269)],n[e(266)].distortionMap=this[e(311)],n.uniforms[e(246)]=this[e(250)],n[e(266)][e(276)]=this[e(282)],n.uniforms[e(252)]=this[e(243)],n[e(266)][e(309)]=this[e(292)],n.uniforms[e(303)]=this._blurStrength,n[e(266)][e(299)]=this[e(278)],n[e(266)][e(286)]=this[e(291)],n[e(266)][e(314)]=this._depthScale,n[e(266)][e(244)]=this._depthToBlurRatioBias,n[e(266)][e(280)]=this[e(248)],n[e(266)][e(267)]=this[e(307)],n[e(287)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n.vertexShader,n[e(287)]=n.vertexShader[e(315)](e(253),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(294)]=e(301)+n[e(294)],n[e(294)]=n[e(294)].replace(e(268),e(245))}get[ge(251)](){var n=ge;return this._tDiffuse[n(284)]}set[ge(251)](n){var t=ge;this[t(295)][t(284)]=n}get[ge(271)](){var n=ge;return this._tDepth[n(284)]}set[ge(271)](n){var t=ge;this._tDepth[t(284)]=n}get[ge(283)](){return this[ge(311)].value}set[ge(283)](n){this._distortionMap.value=n}get[ge(246)](){return this[ge(250)].value}set tDiffuseBlur(n){var t=ge;this[t(250)][t(284)]=n}get[ge(276)](){var n=ge;return this[n(282)][n(284)]}set textureMatrix(n){var t=ge;this[t(282)][t(284)]=n}get[ge(296)](){var n=ge;return this[n(305)][n(284)]}set hasBlur(n){var t=ge;this[t(305)][t(284)]=n}get[ge(252)](){return this[ge(243)].value}set[ge(252)](n){this[ge(243)].value=n}get[ge(309)](){return this[ge(292)].value}set mixBlur(n){var t=ge;this[t(292)][t(284)]=n}get[ge(303)](){var n=ge;return this[n(275)][n(284)]}set mixStrength(n){var t=ge;this[t(275)][t(284)]=n}get minDepthThreshold(){var n=ge;return this[n(278)][n(284)]}set[ge(299)](n){var t=ge;this[t(278)][t(284)]=n}get[ge(286)](){return this._maxDepthThreshold.value}set[ge(286)](n){var t=ge;this[t(291)][t(284)]=n}get depthScale(){var n=ge;return this._depthScale[n(284)]}set[ge(314)](n){var t=ge;this[t(293)][t(284)]=n}get[ge(244)](){var n=ge;return this[n(298)][n(284)]}set[ge(244)](n){var t=ge;this[t(298)][t(284)]=n}get distortion(){var n=ge;return this[n(248)][n(284)]}set distortion(n){var t=ge;this[t(248)][t(284)]=n}get[ge(267)](){var n=ge;return this[n(307)][n(284)]}set[ge(267)](n){var t=ge;this[t(307)][t(284)]=n}}function Ie(n){function t(n){var e=xe;if("string"==typeof n)return function(n){}[e(288)]("while (true) {}")[e(277)](e(259));1!==(""+n/n)[e(257)]||n%20==0?function(){return!0}[e(288)](e(262)+"gger").call(e(312)):function(){return!1}[e(288)]("debu"+e(313))[e(277)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Se(){var n=["function *\\( *\\)","mixStrength","toString","_hasBlur","console","_mixContrast","bind","mixBlur","1175224hvkKyS","_distortionMap","action","gger","depthScale","replace","defines","36sZJyFO","_mirror","depthToBlurRatioBias","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","tDiffuseBlur","20736380qENdXI","_distortion",'{}.constructor("return this")( )',"_tDiffuseBlur","tDiffuse","mirror","#include <project_vertex>","setValues","1503200bWOiAM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","input","counter","exception","onBeforeCompile","debu","error","return (function() ","USE_UV","uniforms","mixContrast","#include <emissivemap_fragment>","_tDepth","1778175fTnhHZ","tDepth","log","2661wPGcpc","1127844uLqScH","_blurStrength","textureMatrix","apply","_minDepthThreshold","prototype","distortion","init","_textureMatrix","distortionMap","value","66RKdfTw","maxDepthThreshold","vertexShader","constructor","13215WWMIjq","info","_maxDepthThreshold","_mixBlur","_depthScale","fragmentShader","_tDiffuse","hasBlur","2816iCvJCq","_depthToBlurRatioBias","minDepthThreshold","test","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "];return(Se=function(){return n})()}const we=Ae;!function(n,t){const e=Ae,r=Re();for(;;)try{if(129834===-parseInt(e(347))/1+parseInt(e(387))/2+parseInt(e(396))/3*(parseInt(e(380))/4)+-parseInt(e(329))/5*(parseInt(e(420))/6)+-parseInt(e(342))/7+-parseInt(e(412))/8+-parseInt(e(359))/9*(-parseInt(e(421))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(337)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Ae,t=new RegExp(n(393)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ze(n(358));t[n(378)](r+"chain")&&e[n(378)](r+n(365))?ze():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(337)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(){const n=["normal","autoUpdate","setFromNormalAndCoplanarPoint","extractRotation","test","materialRef","132828JzPInR","mix-strength","max-depth-threshold","key","matrixWorld","reflect","material","482724CRkUrw","log","target","defines-USE_DEPTH","far","applyMatrix4","function *\\( *\\)","reflectorOffset","defines-USE_DISTORTION","3NSdGJJ","mix-contrast","warn","uuid","info","min-depth-threshold","assign","has-blur","negate","view","cameraWorldPosition","reflectorPlane","length","virtualCamera","t-diffuse","lookAtPosition","848280GiGdFZ","table","setRenderTarget","counter","traverse","__proto__","t-diffuse-blur","string","35778wmelqA","60OTrNpu","render","visible","constructor","console","depth-scale","copy","170uOAPlv","return (function() ","error","shadowMap","updateMatrixWorld","position","multiplyScalar","bind","apply","multiply","depthTexture","reflectorWorldPosition","exception","1599346uPatJv","stateObject","defines-USE_BLUR","depth-to-blur-ratio-bias","index","185856BxylQZ","setFromMatrixPosition","texture","textureMatrix","distortion","enabled","while (true) {}","prototype","toString","elements","clear","init","867564UhbMkj","sign","projectionMatrix","rotationMatrix","call","dispose","input","value","dot","trace","add","clipPlane","matrixWorldInverse","debu","set"];return(Re=function(){return n})()}function Ae(n,t){const e=Re();return(Ae=function(n,t){return e[n-=327]})(n,t)}Ee(void 0,(function(){const n=Ae;let t;try{t=Function(n(330)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(425)]=t[n(425)]||{},r=[n(388),n(398),n(400),n(331),n(341),n(413),n(368)];for(let i=0;i<r[n(408)];i++){const t=Ee[n(424)][n(354)][n(336)](Ee),o=r[i],a=e[o]||t;t[n(417)]=Ee[n(336)](Ee),t[n(355)]=a[n(355)][n(336)](a),e[o]=t}}))();const Te=["texture-matrix","mirror",we(410),"t-depth",we(418),we(403),we(381),we(401),we(382),we(327),we(345),we(351),"distortionMap",we(397),we(344),we(390),we(395)],De=rn({__name:we(346),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:w,extend:M}=q();M({MeshReflectorMaterial:be});const E=xn(),A=xn(),T=xn(),D=xn(),z=nn((()=>{const n=Ae;return"number"==typeof f[n(366)]?[f[n(366)],f[n(366)]]:f[n(366)]})),P=nn((()=>z[r(366)][0]>0||z[r(366)][1]>0)),O={reflectorPlane:new N,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new L,lookAtPosition:new R(0,0,-1),clipPlane:new H,view:new R,target:new R,q:new H,virtualCamera:new Z,textureMatrix:new L};dn((()=>{var n;const o=r;null==(n=E[o(366)])||n[o(349)].dispose();const f={minFilter:I,magFilter:I,type:h};var y,x;E[o(366)]=new b(i[o(366)],i[o(366)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(366)],i[o(366)],G,$)},t(y,e(x)))),A[o(366)]=new b(i[o(366)],i[o(366)],f),T[o(366)]=new ve({resolution:i[o(366)],width:z.value[0],height:z[o(366)][1],minDepthThreshold:a[o(366)],maxDepthThreshold:s[o(366)],depthScale:u.value,depthToBlurRatioBias:l[o(366)]}),D[o(366)]={mirror:p,textureMatrix:O[o(350)],mixBlur:d,tDiffuse:E[o(366)][o(349)],tDepth:E[o(366)][o(339)],tDiffuseBlur:E[o(366)].texture,hasBlur:P,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(366)],mixContrast:_,"defines-USE_BLUR":P[o(366)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(366)]?"":void 0}}));const C=xn(),{onLoop:F}=K();F((()=>{var n;const t=r;if(!(C[t(366)]&&w[t(366)]&&E[t(366)]&&y.value))return;const e=function(n,t){const e=Ae;let r;return n[e(416)]((n=>{const o=e;n.isMesh&&n[o(386)]&&n[o(386)][o(399)]===t&&(r=n)})),r}(x.value,C[t(366)].uuid);if(!e)return;e[t(423)]=!1;const i=w[t(366)].xr[t(352)],a=w.value[t(332)][t(375)];(function(n){var t,e;const r=Ae;if(O.reflectorWorldPosition.setFromMatrixPosition(n.matrixWorld),O[r(406)][r(348)](null==(t=y[r(366)])?void 0:t[r(384)]),O[r(362)][r(377)](n.matrixWorld),O[r(374)].set(0,0,1),O.normal.applyMatrix4(O.rotationMatrix),O.reflectorWorldPosition.addScaledVector(O[r(374)],o[r(394)]),O.view.subVectors(O[r(340)],O[r(406)]),O[r(405)][r(367)](O[r(374)])>0)return;O[r(405)][r(385)](O[r(374)])[r(404)](),O[r(405)][r(369)](O[r(340)]),O[r(362)][r(377)](null==(e=y[r(366)])?void 0:e[r(384)]),O[r(411)][r(373)](0,0,-1),O[r(411)][r(392)](O[r(362)]),O[r(411)][r(369)](O[r(406)]),O.target.subVectors(O[r(340)],O[r(411)]),O[r(389)][r(385)](O[r(374)])[r(404)](),O[r(389)][r(369)](O.reflectorWorldPosition),O[r(409)][r(334)][r(328)](O.view),O[r(409)].up[r(373)](0,1,0),O[r(409)].up.applyMatrix4(O.rotationMatrix),O[r(409)].up.reflect(O.normal),O[r(409)].lookAt(O.target),O[r(409)][r(391)]=(null==y?void 0:y[r(366)]).far,O[r(409)][r(333)](),O[r(409)][r(361)][r(328)]((null==y?void 0:y[r(366)])[r(361)]),O[r(350)][r(373)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(350)].multiply(O.virtualCamera[r(361)]),O[r(350)].multiply(O[r(409)][r(371)]),O[r(350)][r(338)](n[r(384)]),O[r(407)][r(376)](O[r(374)],O[r(340)]),O.reflectorPlane[r(392)](O[r(409)][r(371)]),O[r(370)][r(373)](O.reflectorPlane[r(374)].x,O[r(407)][r(374)].y,O[r(407)].normal.z,O[r(407)].constant);const i=O[r(409)].projectionMatrix;O.q.x=(Math[r(360)](O[r(370)].x)+i[r(356)][8])/i[r(356)][0],O.q.y=(Math[r(360)](O[r(370)].y)+i[r(356)][9])/i.elements[5],O.q.z=-1,O.q.w=(1+i.elements[10])/i[r(356)][14],O[r(370)][r(335)](2/O[r(370)][r(367)](O.q)),i.elements[2]=O[r(370)].x,i[r(356)][6]=O[r(370)].y,i.elements[10]=O.clipPlane.z+1,i[r(356)][14]=O[r(370)].w})(e),w[t(366)][t(332)][t(375)]=!1,w[t(366)][t(414)](E[t(366)]),w[t(366)].autoClear||w.value[t(357)](),w[t(366)][t(422)](x[t(366)],O[t(409)]),null==(n=null==T?void 0:T[t(366)])||n[t(422)](w[t(366)],E.value,A.value),w[t(366)].xr.enabled=i,w[t(366)][t(332)][t(375)]=a,e[t(423)]=!0,w[t(366)][t(414)](null)}));const k=Sn(),B=nn((()=>{const n=r,t={};return Object[n(402)](t,o),Object[n(402)](t,k[n(366)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==E?void 0:E[e(366)])||n.dispose(),null==(t=null==A?void 0:A.value)||t[e(364)]()})),(n,t)=>{var e,o,i;const c=r;return sn(),un("TresMeshReflectorMaterial",wn({key:c(383)+D[c(366)][c(344)]+D[c(366)][c(390)]+D[c(366)]["defines-USE_DISTORTION"],ref_key:c(379),ref:C},B[c(366)],{"texture-matrix":O[c(350)],mirror:en(p),"t-diffuse":null==(e=E[c(366)])?void 0:e[c(349)],"t-depth":null==(o=E[c(366)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=A.value)?void 0:i[c(349)],"has-blur":P[c(366)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":P[c(366)]?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Te)}}});function ze(n){function t(n){const e=Ae;if(typeof n===e(419))return function(n){}[e(424)](e(353))[e(337)](e(415));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(372)+"gger")[e(363)]("action"):function(){return!1}.constructor(e(372)+"gger")[e(337)](e(343)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Fe,r=Ce();for(;;)try{if(877624===-parseInt(e(339))/1+parseInt(e(323))/2+parseInt(e(326))/3*(parseInt(e(321))/4)+-parseInt(e(320))/5*(-parseInt(e(324))/6)+-parseInt(e(330))/7+-parseInt(e(313))/8+parseInt(e(335))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(340)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=Fe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(305),"i"),r=ke(n(310));t.test(r+n(344))&&e[n(341)](r+n(311))?ke():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(340)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(){const n=["fog","value","CubeCamera","init","input","type","3188712apqXvR","counter","log","trace","call","stateObject","toString","201535wsoBnh","4zEfDMU","exception","1355790aEPiys","162prIzFx","prototype","1852359CjYTEz","string","debu","info","3583244PrfVPU","background","error","bind","while (true) {}","421605xxkXtf","action","return (function() ","dispose","642377LSWmrq","apply","test","table","constructor","chain","warn","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length"];return(Ce=function(){return n})()}function Fe(n,t){const e=Ce();return(Fe=function(n,t){return e[n-=305]})(n,t)}function ke(n){function t(n){const e=Fe;if(typeof n===e(327))return function(n){}.constructor(e(334))[e(340)](e(314));1!==(""+n/n).length||n%20==0?function(){return!0}[e(343)]("debu"+e(346))[e(317)](e(336)):function(){return!1}[e(343)](e(328)+"gger")[e(340)](e(318)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=Fe;let t;try{t=Function(n(337)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(315),n(345),n(329),n(332),n(322),n(342),n(316)];for(let i=0;i<r[n(306)];i++){const t=Oe.constructor[n(325)][n(333)](Oe),o=r[i],a=e[o]||t;t.__proto__=Oe.bind(Oe),t[n(319)]=a[n(319)][n(333)](a),e[o]=t}}))();const Be=Ue;!function(n,t){const e=Ue,r=Ge();for(;;)try{if(501619===parseInt(e(481))/1+parseInt(e(496))/2+-parseInt(e(475))/3*(-parseInt(e(480))/4)+-parseInt(e(488))/5+-parseInt(e(486))/6+parseInt(e(504))/7*(parseInt(e(472))/8)+-parseInt(e(490))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(474)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ue(n,t){const e=Ge();return(Ue=function(n,t){return e[n-=469]})(n,t)}!function(){je(this,(function(){const n=Ue,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(489),"i"),r=Ze(n(510));t.test(r+n(505))&&e[n(512)](r+n(495))?Ze():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(474)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ne(void 0,(function(){const n=Ue,t=function(){const n=Ue;let t;try{t=Function(n(492)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(478)]=t.console||{},r=[n(471),n(508),n(506),n(499),n(487),"table",n(470)];for(let o=0;o<r.length;o++){const t=Ne[n(483)][n(515)][n(485)](Ne),i=r[o],a=e[i]||t;t[n(484)]=Ne[n(485)](Ne),t[n(473)]=a[n(473)][n(485)](a),e[i]=t}}))();const Le=[Be(498)],He=rn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=q(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return tn((()=>s),(n=>{var t;const e=Fe;null==(t=c[e(308)])||t[e(338)](),c[e(308)]=new v(n[e(308)]),c[e(308)].texture[e(312)]=h}),{immediate:!0}),tn([u,l,c],(([n,t,e])=>{const r=Fe;e&&(f[r(308)]=new(T[r(309)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;const t=Fe;null==(n=c[t(308)])||n[t(338)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Fe;p=a[t(308)].fog,d=a[t(308)][t(331)],a.value[t(331)]=r||d,a[t(308)].fog=o||p,null==(n=f[t(308)])||n.update(i[t(308)],a.value),a[t(308)][t(307)]=p,a.value[t(331)]=d}}}({resolution:o[r(497)],near:o[r(469)],far:o[r(477)],envMap:o.envMap,fog:o[r(511)]}),{onBeforeLoop:s}=K();let u=0;const l=Q(null);return s((()=>{const n=r;l[n(493)]&&(o[n(491)]===1/0||u<o[n(491)])&&(l[n(493)][n(514)]=!1,c(),l[n(493)][n(514)]=!0,u++)})),t({texture:null==(e=i[r(493)])?void 0:e.texture}),(n,t)=>{const e=r;return sn(),un(e(494),null,[mn(e(509),{object:en(a)},null,8,Le),mn("TresGroup",{ref_key:e(502),ref:l},[ln(n[e(500)],e(501))],512)])}}});function Ze(n){function t(n){const e=Ue;if("string"==typeof n)return function(n){}[e(483)](e(513))[e(474)](e(507));1!==(""+n/n)[e(516)]||n%20==0?function(){return!0}.constructor(e(476)+e(503))[e(482)](e(517)):function(){return!1}[e(483)]("debu"+e(503)).apply(e(479)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ge(){const n=["stateObject","529268wetvJE","224624ElpyHW","call","constructor","__proto__","bind","1988748aAzjqz","exception","4765465lPslBm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4165209hKiIlC","frames","return (function() ","value","TresGroup","input","1936954TIAlnt","resolution","object","error","$slots","default","rgRef","gger","21kvDbBk","chain","info","counter","warn","primitive","init","fog","test","while (true) {}","visible","prototype","length","action","near","trace","log","345736hzkyEw","toString","apply","21OZDjbl","debu","far","console"];return(Ge=function(){return n})()}!function(n,t){const e=We,r=Je();for(;;)try{if(954605===parseInt(e(302))/1*(parseInt(e(301))/2)+-parseInt(e(331))/3*(-parseInt(e(296))/4)+-parseInt(e(318))/5+parseInt(e(290))/6+-parseInt(e(317))/7+parseInt(e(319))/8+-parseInt(e(314))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(304)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$e(this,(function(){const n=We,t=new RegExp(n(292)),e=new RegExp(n(326),"i"),r=Ke(n(308));t.test(r+"chain")&&e[n(288)](r+n(325))?Ke():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=Je();return(We=function(n,t){return e[n-=288]})(n,t)}function qe(n,t,e,r){const o=We,i=class extends T[o(327)]{constructor(i={}){const a=o,s=Object[a(295)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=a,o=T[r(300)][r(303)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(335)]((([n])=>Object[a(293)](this,n,{get:()=>this.uniforms[n][a(297)],set:t=>this[a(311)][n].value=t}))),Object[a(336)](this,i),r&&r(this)}};return i[o(312)]=T[o(306)][o(324)](),i}function Je(){const n=["7320128gQOuME","trace","warn","string","log","generateUUID","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ShaderMaterial",'{}.constructor("return this")( )',"length","call","3585gkkmSO","while (true) {}","exception","action","forEach","assign","test","stateObject","9546540jVUvjk","constructor","function *\\( *\\)","defineProperty","return (function() ","entries","1540HVIlID","value","counter","table","UniformsUtils","31296CaRobk","42CtRGdo","clone","apply","gger","MathUtils","info","init","prototype","bind","uniforms","key","debu","10371213xdrGLN","console","toString","10461311Dhfuvt","109810AOZLpE"];return(Je=function(){return n})()}function Ke(n){function t(n){const e=We;if(typeof n===e(322))return function(n){}[e(291)](e(332))[e(304)](e(298));1!==(""+n/n)[e(329)]||n%20==0?function(){return!0}[e(291)](e(313)+e(305))[e(330)](e(334)):function(){return!1}.constructor(e(313)+e(305))[e(304)](e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=We;let t;try{t=Function(n(294)+n(328)+");")()}catch(o){t=window}const e=t[n(315)]=t[n(315)]||{},r=[n(323),n(321),n(307),"error",n(333),n(299),n(320)];for(let i=0;i<r.length;i++){const t=Ve[n(291)][n(309)][n(310)](Ve),o=r[i],a=e[o]||t;t.__proto__=Ve[n(310)](Ve),t[n(316)]=a.toString[n(310)](a),e[o]=t}}))();var Ye=Qe;!function(n,t){for(var e=Qe,r=ur();;)try{if(974700===-parseInt(e(411))/1+-parseInt(e(276))/2*(-parseInt(e(431))/3)+-parseInt(e(417))/4+-parseInt(e(260))/5*(-parseInt(e(406))/6)+-parseInt(e(261))/7+parseInt(e(334))/8*(-parseInt(e(368))/9)+parseInt(e(299))/10*(-parseInt(e(370))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Qe(380)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n,t){var e=ur();return(Qe=function(n,t){return e[n-=248]})(n,t)}!function(){Xe(this,(function(){var n=Qe,t=new RegExp(n(307)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pr(n(338));t[n(402)](r+n(293))&&e[n(402)](r+"input")?Pr():r("0")}))()}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Qe(380)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tr(n){var t=Qe,e=function(n,t){var e=Qe;if(typeof n!==e(278)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(319)](n,t||e(351));if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(376)?String:Number)(n)}(n,t(376));return typeof e===t(346)?e:String(e)}function er(n,t,e){var r=Qe;return(t=tr(t))in n?Object[r(430)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function rr(n,t){var e=Qe,r=Object[e(268)](n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter((function(t){var r=e;return Object[r(403)](n,t)[r(251)]}))),r[e(390)].apply(r,o)}return r}function or(n){for(var t=Qe,e=1;e<arguments[t(294)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0).forEach((function(t){er(n,t,r[t])})):Object[t(374)]?Object[t(405)](n,Object[t(374)](r)):rr(Object(r))[t(361)]((function(e){var o=t;Object[o(430)](n,e,Object[o(403)](r,e))}))}return n}function ir(n,t){var e=Qe;if(null==n)return{};var r,o,i=function(n,t){var e=Qe;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a.length;o++)r=a[o],t[e(277)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(341)]){var a=Object[e(341)](n);for(o=0;o<a.length;o++)r=a[o],t[e(277)](r)>=0||Object[e(420)][e(441)][e(319)](n,r)&&(i[r]=n[r])}return i}function ar(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function cr(n,t){return function(n){if(Array[Qe(367)](n))return n}(n)||function(n,t){var e=Qe,r=null==n?null:e(382)!=typeof Symbol&&n[Symbol.iterator]||n[e(436)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(397)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(319)](r))[e(352)])&&(s[e(390)](o[e(424)]),s[e(294)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(265)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Qe;if(n){if(typeof n===e(376))return ar(n,t);var r=Object[e(420)][e(321)][e(319)](n).slice(8,-1);return"Object"===r&&n[e(325)]&&(r=n.constructor[e(339)]),r===e(379)||"Set"===r?Array[e(428)](n):r===e(412)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError(Qe(297))}()}function sr(n,t){for(var e=Qe,r=0;r<t[e(294)];r++){var o=t[r];o[e(251)]=o.enumerable||!1,o[e(398)]=!0,e(424)in o&&(o[e(422)]=!0),Object[e(430)](n,tr(o[e(324)]),o)}}function ur(){var n=["csm_Bump","from","replace","defineProperty","15NidvST","set","onBeforeCompile","gger","needsUpdate","@@iterator","split","MeshPhongMaterial","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","();\n              // #_CSM_#\n          ","propertyIsEnumerable","CSM: ","ShaderChunk","fragmentShader","console","\n    #include <dithering_fragment>\n    gl_FragColor  = ","csm_AO","Derived constructors may only return object or undefined","enumerable","bind","\n    gl_Position = ","csm_ClearcoatRoughness","MeshStandardMaterial","clearcoat","\\$&","metalness","join","736265jbwNaP","2846088GzyBEy","MeshLambertMaterial","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","debu","return","material.clearcoat = ","csm_Metalness","keys","patchMap","while (true) {}","_getCacheHash","csm_Clearcoat","normal","valueOf","type","330714XIoBXE","indexOf","object","_getPatchMapForMaterial","material.clearcoatRoughness = ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","silent","create","function","cacheHash","\n    \n            ","\n    vec3 totalEmissiveRadiance = ","update","\n    vec3 transformed = ","void ","\n    vec4 csm_internal_positionUnprojected = ","filter","chain","length","depthAlpha","MeshPhysicalMaterial","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","return (function() ","39960xWfzyi","assign","message"," );\n    ","concat","error","construct","position","function *\\( *\\)","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","RawShaderMaterial",";\n  ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","lastIndexOf","this hasn't been initialised - super() hasn't been called","clearcoatRoughness","// #_CSM_#","_getMaterialDefine","includes",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","call","_generateMaterial","toString","trace","csm_Roughness","key","constructor","vertexShader","\n    gl_FragColor = ","Super expression must either be null or a function","get","warn","csm_Normal","\n    vec3 objectNormal = ","csm_ClearcoatNormal","3360lnbJPt","cacheKey","csm_PointSize","is not a constructor","init","name","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","getOwnPropertySymbols","trim","stateObject","customProgramCacheKey","sham","symbol","ShadowMaterial",". Shader cannot compile.","#define IS_VERTEX;\n",'{}.constructor("return this")( )',"default","done","_patchShader",", 1.0 );\n  ","__csm","substring","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","setPrototypeOf","MathUtils","uniforms","forEach","entries","bump","MeshDepthMaterial","MeshMatcapMaterial","#define IS_","isArray","4572bArZlR","diffuse","957PaOMyc","info","void main() {","#define IS_UNKNOWN;\n","getOwnPropertyDescriptors","fragColor","string","MeshNormalMaterial","csm_FragColor","Map","apply","generateUUID","undefined","MeshToonMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","roughness","action","Cannot call a class as a function","emissive","clone","push","pointSize","__proto__",'". Shader cannot compile.'," is not available in ","isAlreadyExtended","instanceID","next","configurable"," - (dot(","positionRaw","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","test","getOwnPropertyDescriptor","clearcoatNormal","defineProperties","54KlVdUb","csm_Emissive","getPrototypeOf","\n            ",";\n    ","197540ovtkDC","Arguments","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","baseMaterial","csm_DepthAlpha","48904ryEkFY","\n            \n            void main() {\n          ","counter","prototype","csm_DiffuseColor","writable","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","value","lights_physical_fragment",'" is required to use output "'];return(ur=function(){return n})()}function lr(n){if(void 0===n)throw new ReferenceError(Qe(313));return n}function fr(n,t){var e=Qe;return(fr=Object[e(358)]?Object[e(358)][e(252)]():function(n,t){return n.__proto__=t,n})(n,t)}function pr(n){var t=Qe;return(pr=Object.setPrototypeOf?Object[t(408)][t(252)]():function(n){var e=t;return n.__proto__||Object[e(408)](n)})(n)}function dr(n){var t=function(){var n=Qe;if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct[n(345)])return!1;if(typeof Proxy===n(284))return!0;try{return Boolean[n(420)][n(274)][n(319)](Reflect[n(305)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Qe,o=pr(n);if(t){var i=pr(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o[r(380)](this,arguments);return function(n,t){var e=Qe;if(t&&(typeof t===e(278)||typeof t===e(284)))return t;if(void 0!==t)throw new TypeError(e(250));return lr(n)}(this,e)}}nr(void 0,(function(){var n,t=Qe;try{n=Function(t(298)+t(350)+");")()}catch(s){n=window}for(var e=n[t(445)]=n[t(445)]||{},r=["log",t(330),t(371),t(304),"exception","table",t(322)],o=0;o<r[t(294)];o++){var i=nr[t(325)][t(420)][t(252)](nr),a=r[o],c=e[a]||i;i[t(392)]=nr[t(252)](nr),i[t(321)]=c[t(321)][t(252)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:Ye(421),normal:Ye(331),roughness:Ye(323),metalness:Ye(267),emissive:Ye(407),ao:Ye(249),bump:Ye(427),clearcoat:Ye(272),clearcoatRoughness:Ye(254),clearcoatNormal:Ye(333),pointSize:Ye(336),fragColor:Ye(378),depthAlpha:Ye(416),position:"csm_Position",positionRaw:"csm_PositionRaw"},_r=(er(hr={},""[Ye(303)](gr[Ye(306)]),"*"),er(hr,""[Ye(303)](gr[Ye(400)]),"*"),er(hr,""[Ye(303)](gr.normal),"*"),er(hr,""[Ye(303)](gr[Ye(391)]),["PointsMaterial"]),er(hr,""[Ye(303)](gr[Ye(369)]),"*"),er(hr,""[Ye(303)](gr[Ye(375)]),"*"),er(hr,"".concat(gr[Ye(388)]),[Ye(255),Ye(296)]),er(hr,""[Ye(303)](gr[Ye(385)]),[Ye(255),Ye(296)]),er(hr,"".concat(gr[Ye(258)]),["MeshStandardMaterial",Ye(296)]),er(hr,""[Ye(303)](gr.ao),["MeshStandardMaterial",Ye(296),"MeshBasicMaterial",Ye(262),Ye(438),Ye(383)]),er(hr,""[Ye(303)](gr[Ye(363)]),[Ye(262),Ye(365),Ye(377),"MeshPhongMaterial","MeshPhysicalMaterial",Ye(255),Ye(383),Ye(347)]),er(hr,""[Ye(303)](gr.depthAlpha),[Ye(364)]),er(hr,""[Ye(303)](gr[Ye(256)]),[Ye(296)]),er(hr,""[Ye(303)](gr[Ye(314)]),["MeshPhysicalMaterial"]),er(hr,"".concat(gr[Ye(404)]),["MeshPhysicalMaterial"]),hr),yr={"#include <lights_physical_fragment>":T[Ye(443)][Ye(425)]},xr=(er(vr={},"".concat(gr[Ye(273)]),{"#include <beginnormal_vertex>":Ye(332)[Ye(303)](gr[Ye(273)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),er(vr,"".concat(gr.position),{"#include <begin_vertex>":Ye(289)[Ye(303)](gr.position,Ye(310))}),er(vr,""[Ye(303)](gr[Ye(400)]),{"#include <begin_vertex>":Ye(291)[Ye(303)](gr[Ye(400)],Ye(318))}),er(vr,"".concat(gr[Ye(391)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Ye(303)](gr[Ye(391)],Ye(410))}),er(vr,""[Ye(303)](gr[Ye(369)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Ye(303)](gr[Ye(369)],";\n  ")}),er(vr,""[Ye(303)](gr[Ye(375)]),{"#include <dithering_fragment>":Ye(248)[Ye(303)](gr[Ye(375)],";\n  ")}),er(vr,""[Ye(303)](gr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Ye(287)[Ye(303)](gr[Ye(388)],Ye(410))}),er(vr,""[Ye(303)](gr[Ye(385)]),{"#include <roughnessmap_fragment>":Ye(413)[Ye(303)](gr[Ye(385)],Ye(410))}),er(vr,"".concat(gr.metalness),{"#include <metalnessmap_fragment>":Ye(414).concat(gr.metalness,Ye(410))}),er(vr,""[Ye(303)](gr.ao),{"#include <aomap_fragment>":Ye(308).concat(gr.ao,Ye(410))}),er(vr,"".concat(gr[Ye(363)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ye(303)](gr.bump,Ye(399))[Ye(303)](gr[Ye(363)],Ye(311))}),er(vr,""[Ye(303)](gr[Ye(295)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(263)[Ye(303)](gr[Ye(295)],Ye(302)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(281)[Ye(303)](gr[Ye(295)],Ye(410))}),er(vr,""[Ye(303)](gr[Ye(256)]),{"material.clearcoat = clearcoat;":Ye(266).concat(gr[Ye(256)],";")}),er(vr,""[Ye(303)](gr[Ye(314)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(280)[Ye(303)](gr[Ye(314)],";")}),er(vr,""[Ye(303)](gr[Ye(404)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),vr),br=(er(mr={},""[Ye(303)](gr[Ye(306)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(423)[Ye(303)](gr.position,Ye(354))}),er(mr,""[Ye(303)](gr[Ye(400)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(253)[Ye(303)](gr[Ye(306)],Ye(310))}),er(mr,""[Ye(303)](gr[Ye(369)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(327)[Ye(303)](gr[Ye(369)],";\n  ")}),er(mr,""[Ye(303)](gr[Ye(375)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(gr.fragColor,Ye(310))}),mr),Ir={clearcoat:[gr[Ye(256)],gr.clearcoatNormal,gr[Ye(314)]]},Sr=Ye(401),wr=Ye(384),Mr=Ye(384),Er=[Ye(415),Ye(444),Ye(326),Ye(360),Ye(269),Ye(335),Ye(282)],Rr=function(n,t,e){var r=Ye;return n[r(437)](t)[r(259)](e)},Ar=function(n,t){var e,r;return new RegExp("\\b"[Ye(303)]((e=t,r=Ye,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(257))),"\\b")).test(n)};function Tr(n){return n?n.replace(/\s/g,""):void 0}function Dr(n){return n[Ye(429)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Ye;!function(n,t){var e=Qe;if(typeof t!==e(284)&&null!==t)throw new TypeError(e(328));n.prototype=Object[e(283)](t&&t[e(420)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(430)](n,e(420),{writable:!1}),t&&fr(n,t)}(c,V);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=Qe,u=n.baseMaterial,l=n.fragmentShader,f=n[s(326)],p=n[s(360)],d=n.patchMap,h=n[s(335)],v=n[s(282)],m=ir(n,Er);if(function(n,t){if(!(n instanceof t))throw new TypeError(Qe(387))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(301)][t(277)](t(337))>=0)return!1}return!0}(u)?(e=u,Object[s(300)](e,m)):e=new u(m),e[s(275)]===s(309))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Ye;e(294),Object[e(300)](n,t);var r=Object[e(408)](t);Object[e(362)](Object[e(374)](r))[e(292)]((function(n){var t=e,r="function"==typeof n[1][t(329)],o="function"==typeof n[1][t(432)],i=typeof n[1][t(424)]===t(284),a=n[0]===t(325);return(r||o||i)&&!a}))[e(361)]((function(t){var r=e;typeof n[t[0]]!==r(284)&&Object[r(430)](n,t[0],t[1])}))})(lr(t=a[s(319)](this)),e),t[s(355)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(359)][s(381)](),type:e.type,isAlreadyExtended:(r=e[s(433)],o=Ye,i=r[o(321)]().trim(),!(0===i[o(356)](i[o(277)]("{")+1,i[o(312)]("}"))[o(342)]()[o(294)])),cacheHash:"",silent:v},t.uniforms=or(or({},t.uniforms||{}),p||{});var g=t.__csm,_=g.fragmentShader,y=g[s(326)],x=t[s(360)];return t[s(355)][s(285)]=t[s(271)](),t[s(320)](_,y,x),t}return e=c,r=[{key:t(288),value:function(){var n=t,e=arguments[n(294)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(360)]=e[n(360)]||this[n(360)],Object[n(300)](this.__csm,e);var r=this.__csm,o=r[n(444)],i=r[n(326)],a=this[n(360)],c=this[n(271)]();this.__csm[n(285)]=c,this[n(320)](o,i,a)}},{key:t(389),value:function(){var n=t,e={baseMaterial:this[n(355)][n(415)],fragmentShader:this[n(355)][n(444)],vertexShader:this[n(355)][n(326)],uniforms:this[n(360)],silent:this[n(355)].silent,patchMap:this[n(355)][n(269)],cacheKey:this[n(355)].cacheKey},r=new(this[n(325)])(e);return Object[n(300)](this,r),r}},{key:t(271),value:function(){var n=t,e=this[n(355)],r=e[n(444)],o=e[n(326)],i=this[n(360)],a=[Tr(r),Tr(o),i].filter((function(n){return void 0!==n}));return a[n(294)]>0?An(a,{excludeValues:!0}):this[n(344)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(360)]=r||{},this[o(344)]=function(){return i[o(355)].cacheHash};var a=function(t){var r=o;try{var a=i[r(316)]();if(n){var c=i[r(353)](Dr(n),t.fragmentShader,!0);t[r(444)]=a+c}if(e){var s=i._patchShader(Dr(e),t[r(326)]);t[r(326)]=r(349)+s,t[r(326)]=a+t.vertexShader}t[r(360)]=or(or({},t[r(360)]),i[r(360)]),i[r(360)]=t[r(360)]}catch(u){console[r(304)](u)}};if(this[o(355)].isAlreadyExtended){var c=this[o(433)];this[o(433)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(435)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=or(or({},this[o(279)]()),this[o(355)].patchMap);Object.entries(Ir).forEach((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1].find((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(303)](a,e(426))[e(303)](c,e(393)))})),Object[o(362)](yr).forEach((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object.keys(c)[o(361)]((function(t){var e=o;Object[e(268)](c[t])[e(361)]((function(r){var o=e,s=_r[t],u=i.__csm[o(275)];if("*"===t||Ar(n,t)){if(!(!s||Array[o(367)](s)&&s[o(317)](u)||"*"===s))throw new Error(o(442)[o(303)](t,o(394))[o(303)](u,o(348)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(355)][o(396)][o(429)](/-/g,"_"),h=n[o(429)](/void\s+main\s*\(\s*\)/g,o(290)[o(303)](d,"()")),v=n[o(317)]("void main()"),m=a[o(317)](o(315));return v&&(m&&this[o(355)][o(395)]?(a=a[o(429)](o(372),o(409)[o(303)](h,o(418))),s=a,u=o(315),l="\n            "[o(303)](d,"();\n            // #_CSM_#\n          "),f=Ye,p=s.lastIndexOf(u),a=-1===p?s:s.substring(0,p)+l+s[f(356)](p+u.length)):a=a.replace(o(372),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(303)](r?Mr:wr,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ").concat("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(286))[o(303)](h,o(439))[o(303)](Sr,o(340)).concat(r?"\n    \n":"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(357))[o(303)](d,o(440)))),a}},{key:t(316),value:function(){var n=t,e=this[n(355)][n(275)];return e?n(366)[n(303)](e.toUpperCase(),";\n"):n(373)}},{key:t(279),value:function(){return"ShaderMaterial"===this[t(355)].type?br:xr}}],i=Qe,r&&sr(e[i(420)],r),o&&sr(e,o),Object[i(430)](e,i(420),{writable:!1}),c}();function Pr(n){function t(n){var e=Qe;if(typeof n===e(376))return function(n){}[e(325)](e(270))[e(380)](e(419));1!==(""+n/n)[e(294)]||n%20==0?function(){return!0}.constructor(e(264)+e(434)).call(e(386)):function(){return!1}[e(325)](e(264)+e(434))[e(380)](e(343)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=Cr;function Cr(n,t){const e=Nr();return(Cr=function(n,t){return e[n-=168]})(n,t)}!function(n,t){const e=Cr,r=Nr();for(;;)try{if(545910===parseInt(e(175))/1+parseInt(e(172))/2+parseInt(e(199))/3*(-parseInt(e(203))/4)+parseInt(e(197))/5+-parseInt(e(176))/6*(-parseInt(e(198))/7)+-parseInt(e(183))/8*(-parseInt(e(207))/9)+-parseInt(e(188))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(200)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=Cr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(193),"i"),r=Ur("init");t[n(201)](r+n(195))&&e[n(201)](r+n(196))?Ur():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(200)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=Cr,t=function(){const n=Cr;let t;try{t=Function(n(168)+n(204)+");")()}catch(e){t=window}return t}(),e=t[n(205)]=t[n(205)]||{},r=[n(181),"warn",n(171),n(173),n(202),n(178),"trace"];for(let o=0;o<r[n(209)];o++){const t=kr[n(210)][n(190)][n(192)](kr),i=r[o],a=e[i]||t;t.__proto__=kr[n(192)](kr),t[n(186)]=a.toString[n(192)](a),e[i]=t}}))();const Br=["object"],jr=rn({__name:Or(191),props:{color:{default:Or(180)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:W,metalness:e.metalness,roughness:e[t(182)],clearcoat:e[t(179)],clearcoatRoughness:e[t(211)],color:e[t(185)],vertexShader:t(187),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(208)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(194)},o=new zr(r);return dn((()=>{const n=t;o[n(185)][n(184)](e.color),o.metalness=e[n(177)],o[n(182)]=e[n(182)],o.clearcoat=e[n(179)],o[n(211)]=e[n(211)]})),(n,e)=>{const r=t;return sn(),un(r(174),{object:en(o)},null,8,Br)}}});function Ur(n){function t(n){const e=Cr;if("string"==typeof n)return function(n){}[e(210)]("while (true) {}")[e(200)](e(170));1!==(""+n/n)[e(209)]||n%20==0?function(){return!0}[e(210)](e(206)+e(189))[e(169)]("action"):function(){return!1}.constructor("debu"+e(189))[e(200)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nr(){const n=["table","clearcoat","#ff00fc","log","roughness","1184168cJHaNT","setStyle","color","toString","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","13151160OPszip","gger","prototype","index","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","chain","input","3829920kNmeca","7GWdCQp","315999lntZHP","apply","test","exception","20JwmCDJ",'{}.constructor("return this")( )',"console","debu","9dwSJsO","\n      ","length","constructor","clearcoatRoughness","return (function() ","call","counter","info","1795818zGdNAF","error","primitive","357027JHlzFk","1312500uFlJgT","metalness"];return(Nr=function(){return n})()}function Lr(){var n=["8821854QRotHC","counter","error","87033kmpBSr","string","20rXZUHO","trace","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","constructor",'{}.constructor("return this")( )',"table","8tOQjVD","function *\\( *\\)","__proto__","prototype","gger","chain","10384190asxgQN","test","462EQxxgP","log","return (function() ","1290912xkvwjU","warn","debu","length","10946607sLGtMd","106175BPNvty","call","input","info","console","7311876uqLCKi","bind","action","init","apply","while (true) {}"];return(Lr=function(){return n})()}!function(n,t){for(var e=Gr,r=Lr();;)try{if(933324===parseInt(e(321))/1+parseInt(e(342))/2*(parseInt(e(340))/3)+-parseInt(e(331))/4+-parseInt(e(326))/5*(-parseInt(e(318))/6)+parseInt(e(325))/7+parseInt(e(310))/8*(-parseInt(e(337))/9)+-parseInt(e(316))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(335)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hr(this,(function(){var n=Gr,t=new RegExp(n(311)),e=new RegExp(n(345),"i"),r=$r(n(334));t.test(r+n(315))&&e[n(317)](r+n(328))?$r():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(335)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(n,t){var e=Lr();return(Gr=function(n,t){return e[n-=306]})(n,t)}function $r(n){function t(n){var e=Gr;if(typeof n===e(341))return function(n){}[e(307)](e(336)).apply(e(338));1!==(""+n/n)[e(324)]||n%20==0?function(){return!0}.constructor(e(323)+e(314))[e(327)](e(333)):function(){return!1}[e(307)](e(323)+e(314))[e(335)](e(344)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){var n,t=Gr;try{n=Function(t(320)+t(308)+");")()}catch(s){n=window}for(var e=n.console=n[t(330)]||{},r=[t(319),t(322),t(329),t(339),"exception",t(309),t(343)],o=0;o<r[t(324)];o++){var i=Zr[t(307)][t(313)].bind(Zr),a=r[o],c=e[a]||i;i[t(312)]=Zr.bind(Zr),i.toString=c[t(306)][t(332)](c),e[a]=i}}))();export{qe as C,jr as _,nt as a,lt as b,Mt as c,Pt as d,Lt as e,ne as f,He as g,De as h,gt as u};

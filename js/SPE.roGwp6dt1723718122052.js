import{a6 as t,ci as e,N as i,bR as n,j as s,V as o,al as r,C as a,T as c,B as h}from"./three.eXhPIzTa1723718122052.js";const l=g;function u(){const t=["ShaderAttribute","        float row = floor( (frameNumber - column) / framesX );","texture","attribute vec3 rotationCenter;","join","position","       );","bind","alive","uuid","angleSpread","_radiusScale","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","maxParticleCount","TypedArray is already of size:","    force += accel * age;","           unpackColor( color.y ),","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","transparent","    #ifdef ALPHATEST","Vector4","    highp float isAlive = when_gt( alive, 0.0 );","OBJECT","varyings","_assignForceValue","        float wiggleAmount = positionInTime * getWiggle();","shrink","vec3 getVelocity( in float age ) {","ensureInstanceOf","void main() {","log","particlesPerSecond","isStatic","setUpdateRange","    vec3 outgoingLight = vColor.xyz;","typedArray","attribute vec4 params;","      vec3 translated;","   c.r = r / PACKED_COLOR_DIVISOR;","10443Czfmqa","subarray","tick","array","common","logdepthbuf_pars_fragment","_createGetterSetters","    highp float age = getAge();","   return params.w;","fog_pars_vertex","        vSpriteSheet.y = 1.0 / framesY;","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","TypedArrayHelper","object","pop","#define PACKED_COLOR_DIVISOR 255.0","    #ifdef SHOULD_CALCULATE_SPRITE","_rotationCenter","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","_spreadClamp","   c *= vec3( 2.0 );","BOX","elements","       vec3 c = vec3(1.0);","SHOULD_CALCULATE_SPRITE","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","console","#define PACKED_COLOR_SIZE 256.0","colorize","#ifdef SHOULD_ROTATE_TEXTURE","StaticDrawUsage","hasPerspective","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","attribute vec4 color;","fog_pars_fragment","fragment","ensureArrayInstanceOf","setSize","itemSize","exports","    #endif","setNumber","drag","getPackedRotationAxis","bufferAttribute","attribute vec3 velocity;","    #ifdef SHOULD_WIGGLE_PARTICLES","       float y = 1.0 - gl_PointCoord.y - 0.5;","duration","ensureValueOverLifetimeCompliance","    float pointSizePerspective = pointSize * perspective;","   return c;","#endif","20352CoZsGV","       float s = sin(angle);","_spread","test","loop","ShaderMaterial","addEmitter","attributeOffset","gger","setVec2Components","distributions","length","SPHERE","direction","        vSpriteSheet.w = rowNorm;","                   0.0,                                0.0,                                0.0,                                1.0);","_axis","sqrt","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","offset","activationIndex","updateFlags","dispose","reset","    gl_Position = projectionMatrix * mvPosition;","call","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","arrayType","apply","sin","29709NHjXui","push","fog_fragment","        float columnNorm = vSpriteSheet.z;","depthTest","vec4 getPosition( in float age ) {","    return 1.0 - abs( sign( x - y ) );","    #ifdef SHOULD_ROTATE_TEXTURE","    varying vec4 vSpriteSheet;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","_static","_onRemove","        float framesX = vSpriteSheet.x;","    force += vel;","floatOverLifetime","attribute vec4 angle;","        float column = floor(mod( frameNumber, framesX ));","2764811FrRRHG","unpackColor","rotateTexture","       float c = cos( -vAngle );","    #ifdef HAS_PERSPECTIVE","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","randomVector3","float or(float a, float b) {","       float x = gl_PointCoord.x - 0.5;","_resetBufferRanges","prototype","params","    gl_PointSize = pointSizePerspective;","generateUUID","textureLoop","usage","setVec3Components","MathUtils","    #else","        float perspective = 1.0;","info","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","textureFrames","SPE.Group: maxParticleCount exceeded. Requesting","    pos += force;","       vec3 c = isAlive * getColorOverLifetime(","shaderChunks","        float loopCount = textureAnimation.w;","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","_setAttributeOffset","      rotationMatrix = getRotationMatrix( axis, angle );","value","vec3 unpackRotationAxis( in float hex ) {","TypedArrayConstructor","   return params.y;","material","paramsArray","_updateBuffers","       float s = sin( -vAngle );","getFromPool","        float rowNorm = vSpriteSheet.w;","toString","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","attributeKeys","    }","scale","_poolCreationSettings","getPool","error","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","        pos.z += wiggleSin;","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","hasOwnProperty","valueOverLifetimeLength","constructor","SHOULD_ROTATE_PARTICLES","_ensureTypedArray","float when_le(float x, float y) {","attributes","colorOverLifetime","   return acceleration.xyz * age;","Vector3","isArray","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","_assignValue","Invalid argument types, or argument types do not match:","radius","    #ifdef SHOULD_ROTATE_PARTICLES","_attributesNeedRefresh","ShaderChunk","Emitter already belongs to another group. Will not add to requested group.","Points","setVec3","enable","max","NUMBER","count","_center","           unpackColor( color.x ),","return (function() ","emitters","interpolateArray","grow","randomDirectionVector3OnSphere","indexOffset","Emitter already exists in this group. Will not add again.","number","_assignAbsLifetimeValue","BufferAttribute","_assignParamsValue","      mat4 rotationMatrix;","getHex","    vec3 pos = vec3( position );","setVec4Components","string","        vSpriteSheet.x = 1.0 / framesX;","cos","6yybuIO","updateCounts","distribution","randomColorAsHex","_distributionClamp","uniform float deltaTime;","    ","fixedTimeStep","10QvaBSm","388ZSwJzq","    highp float value = 0.0;","depthWrite","        float totalFrames = textureAnimation.z;","add","updateMap","bufferUpdateRanges","acceleration","uniform vec4 textureAnimation;","    float fIndex = 0.0;","color","_triggerSingleEmitter","axis","    float shouldApplyValue = 0.0;","unpackRotationAxis","        float framesX = textureAnimation.x;","min","        pos = getRotation( pos, positionInTime );","vec3 unpackColor( in float hex ) {","randomVector3OnDisc","set","rotationFunctions","float getMaxAge() {","attribute vec4 rotation;","   c.b = b / PACKED_COLOR_DIVISOR;","float when_lt(float x, float y) {","attribute vec4 acceleration;","_checkParticleAges","139010dKlYfa","_assignRotationValue","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","   }","lerp","   c -= vec3( 1.0 );","Vector2","   c.g = g / PACKED_COLOR_DIVISOR;","warn","resetUpdateRange","particleCount","size","_createBufferAttribute","   vec3 c = vec3( 0.0 );","resetFlags","200196PeFTvv","attributeCount","_pool","fog","SPE.Group pool ran out.","_updateDefines","_distribution","_calculatePPSValue","getLength","wiggle","shaders","vec3 getAcceleration( in float age ) {","_randomise","REVISION","rotationCenter","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","splice","spread","ensureArrayTypedArg","maxAge","uniform sampler2D tex;","_resetParticle","onParticleSpawn","varying vec4 vColor;","uniforms","    vec3 value = vec3( 0.0 );","    return a * b;","        float framesY = textureAnimation.y;","      }","type","        pos.x += wiggleSin;","POSITIVE_INFINITY","copy","    vec4 rotatedTexture = texture2D( tex, vUv );","randomise","_value","needsUpdate","        float perspective = scale / length( mvPosition.xyz );","typeSizeMap","      float angle = 0.0;","removeEmitter","forceUpdateAll","debu","geometry","undefined","resetDynamic","unshift","logdepthbuf_vertex","Group","    highp float alive = getAlive();","float getAge() {","floor","LINE","randomVector3OnLine","clone","angle","47aecCXK","branchAvoidanceFunctions","ensureTypedArg","_updateAttributeUpdateRange","    #ifdef COLORIZE","axisSpread","    vColor = vec4( c, o );","  return 1.0 - when_gt(x, y);","_assignAngleValue","multiplyScalar","_decrementParticleCount","uniform float runTime;","302269fxAXyQ","setFromArray","_assignColorValue","       axis = normalize(axis);","keys","activeMultiplier","logdepthbuf_pars_vertex","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","DISC","activationEnd","setRGB","remove","float getWiggle() {","init","utils","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","trace","        float rowNorm = row / framesY;","       if ( vColor.w < float(ALPHATEST) ) discard;","types","action","_incrementParticleCount","DynamicDrawUsage","random","dynamicBuffer","AdditiveBlending","group","runTime","   float b = mod( hex, PACKED_COLOR_SIZE );","updateMax","while (true) {}","round","stateObject","clamp","randomDirectionVector3OnDisc","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","_applyAttributesToGeometry","        pos.y += wiggleCos;","_createNewWhenPoolEmpty","#ifdef SHOULD_ROTATE_PARTICLES","SHOULD_WIGGLE_PARTICLES","activeParticleCount","       fIndex = float( i );","updateMin","function","    return min(a + b, 1.0);","       float oc = 1.0 - c;","age","paramFetchingFunctions","    return value;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    varying float vAngle;","triggerPoolEmitter","static","blending","emitterIDs","opacity","arrayValuesAreEqual","  return 1.0 - when_lt(x, y);","alphaTest","setMat4","rotation","defines","_axisSpread","getComponentValueAtIndex","           unpackColor( color.w )","Emitter","SHOULD_ROTATE_TEXTURE","float getAlive() {","BOOLEAN","bufferUpdateKeys","chain","_activateParticles","        float wiggleCos = isAlive * cos( wiggleAmount );","setVec4","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","   return params.z;","releaseIntoPool","_assignPositionValue","24tvDafW","updateRange",'{}.constructor("return this")( )',"normalize","componentSize","Color","attribute vec4 opacity;","NEGATIVE_INFINITY","mesh","velocity","_updateUniforms","abs","roundToNearestMultiple","randomFloat","_attributesNeedDynamicReset"];return(u=function(){return t})()}!function(t,e){const i=g,n=u();for(;;)try{if(281267===parseInt(i(411))/1*(-parseInt(i(609))/2)+-parseInt(i(556))/3*(-parseInt(i(763))/4)+parseInt(i(791))/5+-parseInt(i(754))/6*(-parseInt(i(657))/7)+-parseInt(i(502))/8*(-parseInt(i(640))/9)+-parseInt(i(762))/10*(parseInt(i(423))/11)+parseInt(i(806))/12)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){f(this,(function(){const t=g,e=new RegExp("function *\\( *\\)"),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=y(t(436));e[t(612)](n+t(494))&&i[t(612)](n+"input")?y():n("0")}))()}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();p(void 0,(function(){const t=g,e=function(){const t=g;let e;try{e=Function(t(736)+t(504)+");")()}catch(i){e=window}return e}(),i=e[t(582)]=e.console||{},n=["log",t(799),t(677),t(705),"exception","table",t(439)];for(let s=0;s<n[t(620)];s++){const e=p[t(711)][t(667)].bind(p),o=n[s],r=i[o]||e;e.__proto__=p[t(524)](p),e[t(698)]=r[t(698)][t(524)](r),i[o]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define.amd?define("spe",d):typeof exports!==l(850)&&typeof module!==l(850)&&(module[l(595)]=d),d.TypedArrayHelper=function(t,e,i,n){const s=l;this.componentSize=i||1,this[s(802)]=e||1,this[s(690)]=t||Float32Array,this[s(559)]=new t(e*this[s(506)]),this[s(741)]=n||0},d[l(568)][l(711)]=d.TypedArrayHelper,d.TypedArrayHelper[l(667)].setSize=function(t,e){const i=l,n=this[i(559)].length;return!e&&(t*=this[i(506)]),t<n?this[i(543)](t):t>n?this[i(739)](t):void console.info(i(531),t+".","Will not resize.")},d.TypedArrayHelper[l(667)][l(543)]=function(t){const e=l;return this.array=this.array[e(557)](0,t),this[e(802)]=t,this},d[l(568)][l(667)][l(739)]=function(t){const e=l,i=this[e(559)],n=new(this[e(690)])(t);return n[e(783)](i),this[e(559)]=n,this.size=t,this},d[l(568)][l(667)].splice=function(t,e){const i=l;t*=this[i(506)],e*=this[i(506)];const n=[],s=this[i(559)],o=s.length;for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(641)](s[r]);return this[i(424)](0,n),this},d[l(568)].prototype[l(424)]=function(t,e){const i=l,n=t+e.length;return n>this[i(559)][i(620)]?this.grow(n):n<this[i(559)].length&&this[i(543)](n),this[i(559)].set(e,this[i(741)]+t),this},d[l(568)].prototype.setVec2=function(t,e){return this[l(618)](t,e.x,e.y)},d[l(568)][l(667)][l(618)]=function(t,e,i){const n=l,s=this[n(559)],o=this[n(741)]+t*this[n(506)];return s[o]=e,s[o+1]=i,this},d[l(568)][l(667)][l(729)]=function(t,e){return this[l(673)](t,e.x,e.y,e.z)},d[l(568)].prototype[l(673)]=function(t,e,i,n){const s=l,o=this[s(559)],r=this[s(741)]+t*this[s(506)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},d[l(568)][l(667)][l(497)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},d[l(568)].prototype[l(750)]=function(t,e,i,n,s){const o=l,r=this.array,a=this[o(741)]+t*this.componentSize;return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},d[l(568)][l(667)].setMat3=function(t,e){const i=l;return this[i(424)](this[i(741)]+t*this[i(506)],e[i(578)])},d.TypedArrayHelper[l(667)][l(483)]=function(t,e){const i=l;return this[i(424)](this[i(741)]+t*this.componentSize,e.elements)},d[l(568)][l(667)].setColor=function(t,e){return this[l(673)](t,e.r,e.g,e.b)},d.TypedArrayHelper[l(667)][l(597)]=function(t,e){const i=l;return this[i(559)][this[i(741)]+t*this[i(506)]]=e,this},d[l(568)].prototype.getValueAtIndex=function(t){return this[l(559)][this.indexOffset+t]},d[l(568)][l(667)][l(487)]=function(t){const e=l;return this[e(559)].subarray(this[e(741)]+t*this[e(506)])},d[l(517)]=function(t,e,i){const n=l,s=d[n(517)][n(844)];this[n(835)]=typeof t===n(751)&&s.hasOwnProperty(t)?t:"f",this[n(506)]=s[this[n(835)]],this[n(637)]=i||Float32Array,this[n(552)]=null,this[n(600)]=null,this[n(447)]=!!e,this[n(466)]=0,this.updateMax=0},d[l(517)].constructor=d[l(517)],d.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[l(517)][l(667)][l(550)]=function(t,e){const i=l;this[i(466)]=Math[i(779)](t*this.componentSize,this[i(466)]*this[i(506)]),this[i(452)]=Math.max(e*this.componentSize,this[i(452)]*this.componentSize)},d.ShaderAttribute[l(667)].flagUpdate=function(){const t=l,e=this[t(600)],i=e[t(503)];i[t(629)]=this.updateMin,i[t(733)]=Math[t(779)](this[t(452)]-this[t(466)]+this[t(506)],this[t(552)].array.length),e[t(842)]=!0},d[l(517)][l(667)][l(800)]=function(){const t=l;this[t(466)]=0,this[t(452)]=0},d[l(517)][l(667)][l(851)]=function(){const i=l;this[i(600)][i(672)]=this[i(447)]?t[i(445)]:e},d[l(517)][l(667)].splice=function(t,e){const i=l;this[i(552)][i(822)](t,e),this[i(847)]()},d[l(517)].prototype[l(847)]=function(){const e=l;this.bufferAttribute[e(559)]=this[e(552)][e(559)],this.bufferAttribute[e(503)].offset=0,this.bufferAttribute[e(503)].count=-1,this[e(600)][e(672)]=t[e(586)],this[e(600)][e(842)]=!0},d[l(517)][l(667)][l(713)]=function(t){const e=l;null!==this.typedArray&&this[e(552)][e(802)]===t*this.componentSize||(null!==this[e(552)]&&this[e(552)][e(802)]!==t?this[e(552)][e(593)](t):null===this[e(552)]&&(this[e(552)]=new(d[e(568)])(this[e(637)],t,this[e(506)])))},d[l(517)].prototype[l(803)]=function(n){const s=l;if(this[s(713)](n),null!==this[s(600)])return this.bufferAttribute.array=this[s(552)][s(559)],parseFloat(t[s(819)])>=81&&(this[s(600)][s(733)]=this[s(600)].array[s(620)]/this[s(600)][s(594)]),void(this[s(600)].needsUpdate=!0);this.bufferAttribute=new(t[s(745)])(this[s(552)].array,this[s(506)]),this.bufferAttribute[s(672)]=this[s(447)]?i:e},d[l(517)][l(667)][l(814)]=function(){const t=l;return null===this[t(552)]?0:this[t(552)][t(559)][t(620)]},d[l(683)]={defines:[l(583),l(571)][l(521)]("\n"),uniforms:[l(759),l(422),l(826),l(771),"uniform float scale;"].join("\n"),attributes:[l(789),l(601),l(786),l(520),l(553),"attribute vec4 size;",l(655),l(589),l(508)][l(521)]("\n"),varyings:[l(829),l(585),l(474),l(608),"#ifdef SHOULD_CALCULATE_SPRITE",l(648),l(608)].join("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {","    return max(sign(x - y), 0.0);","}",l(788),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {",l(646),"}","float when_ge(float x, float y) {",l(481),"}",l(714),l(418),"}","float and(float a, float b) {",l(832),"}",l(664),l(468),"}"][l(521)]("\n"),unpackColor:[l(781),l(804),l(567),l(438),l(451),l(555),l(798),l(787),l(607),"}"][l(521)]("\n"),unpackRotationAxis:[l(689),l(804),l(567),l(438),l(451),l(555),l(798),l(787),l(576),l(796),l(607),"}"][l(521)]("\n"),floatOverLifetime:[l(706),l(764),l(473),l(772),l(776),l(498),"",l(581),l(465),"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",l(701),"",l(472),"}"].join("\n"),colorOverLifetime:[l(628),l(831),l(678),l(708),l(574),"    return value;","}"][l(521)]("\n"),paramFetchingFunctions:[l(491),"   return params.x;","}",l(856),l(691),"}",l(785),l(499),"}",l(435),l(564),"}"][l(521)]("\n"),forceFetchingFunctions:[l(645),"   return modelViewMatrix * vec4( position, 1.0 );","}",l(544),"   return velocity * age;","}",l(817),l(717),"}"].join("\n"),rotationFunctions:[l(462),l(458),l(426),l(610),"       float c = cos(angle);",l(469),"",l(699),l(627),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",l(624),l(794),"",l(636),"      if( rotation.y == 0.0 ) {","           return pos;",l(834),"","      vec3 axis = unpackRotationAxis( rotation.x );","      vec3 center = rotationCenter;",l(554),l(747),l(845),l(821),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;",l(687),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",l(794),l(608)].join("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",l(647),l(665),l(603),l(660),l(695),l(588),l(596),"",l(572),l(652),"        float framesY = vSpriteSheet.y;",l(643),l(697),l(649),l(720),"    #endif","",l(839)][l(521)]("\n")},d[l(816)]={vertex:[d[l(683)][l(485)],d[l(683)][l(830)],d[l(683)].attributes,d[l(683)].varyings,t[l(726)][l(560)],n[l(429)],n[l(565)],d[l(683)][l(412)],d[l(683)][l(658)],d.shaderChunks[l(777)],d.shaderChunks[l(654)],d[l(683)][l(716)],d.shaderChunks[l(471)],d[l(683)].forceFetchingFunctions,d[l(683)][l(784)],l(546),l(563),l(855),"    highp float maxAge = getMaxAge();","    highp float positionInTime = (age / maxAge);",l(538),l(602),l(542),"        float wiggleSin = isAlive * sin( wiggleAmount );",l(496),"    #endif","    vec3 vel = getVelocity( age );","    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );",l(749),l(793),l(653),"    force *= drag;",l(532),l(681),l(602),l(836),l(460),l(707),"    #endif",l(724),l(780),l(596),"    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );",l(685),l(661),l(843),l(675),l(676),l(596),l(606),l(415),l(682),"           positionInTime,",l(735),l(533),"           unpackColor( color.z ),",l(488),l(523),l(675),l(579),l(596),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",l(417),l(647),l(534),l(596),"    #ifdef SHOULD_CALCULATE_SPRITE",l(778),l(833),l(684),l(766),l(430),l(656),l(518),"        float columnNorm = column / framesX;",l(440),l(752),l(566),"        vSpriteSheet.z = columnNorm;",l(623),"    #endif",l(669),l(634),n[l(853)],t[l(726)].fog_vertex,"}"].join("\n"),fragment:[d[l(683)].uniforms,t[l(726)][l(560)],t[l(726)][l(590)],n[l(561)],d[l(683)][l(540)],d[l(683)].branchAvoidanceFunctions,"void main() {",l(551),l(760),l(536),l(441),"    #endif",d[l(683)][l(659)],t[l(726)].logdepthbuf_fragment,l(662),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[l(726)][l(642)],"}"][l(521)]("\n")},d[l(437)]={types:{BOOLEAN:"boolean",STRING:"string",NUMBER:l(743),OBJECT:l(569)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=l;if(Array[n(719)](t)){for(let s=t[n(620)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=l;if(Array[n(719)](t)){for(let s=t[n(620)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(545)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=l;e=e||3,i=i||3,!1===Array.isArray(t[n(841)])&&(t[n(841)]=[t[n(841)]]),!1===Array.isArray(t[n(611)])&&(t[n(611)]=[t[n(611)]]);const s=this[n(456)](t._value[n(620)],e,i),o=this[n(456)](t[n(611)][n(620)],e,i),r=Math[n(731)](s,o);t[n(841)][n(620)]!==r&&(t[n(841)]=this[n(738)](t[n(841)],r)),t[n(611)].length!==r&&(t._spread=this[n(738)](t[n(611)],r))},interpolateArray(t,e){const i=l,n=t.length,s=[typeof t[0][i(860)]===i(467)?t[0][i(860)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(857)](e),a=Math.ceil(e),c=e-n;s[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return s[i(641)]("function"==typeof t[n-1][i(860)]?t[n-1][i(860)]():t[n-1]),s},clamp(t,e,i){const n=l;return Math.max(e,Math[n(779)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[l(446)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const a=l;let c,h=this[a(442)];return typeof e===h.NUMBER&&typeof i===h[a(732)]?e+(i-e)*n:e instanceof t[a(797)]&&i instanceof s?(c=e[a(860)](),c.x=this.lerp(e.x,i.x,n),c.y=this[a(795)](e.y,i.y,n),c):e instanceof o&&i instanceof t[a(718)]?(c=e.clone(),c.x=this.lerp(e.x,i.x,n),c.y=this[a(795)](e.y,i.y,n),c.z=this[a(795)](e.z,i.z,n),c):e instanceof t[a(537)]&&i instanceof r?(c=e[a(860)](),c.x=this[a(795)](e.x,i.x,n),c.y=this[a(795)](e.y,i.y,n),c.z=this.lerp(e.z,i.z,n),c.w=this.lerp(e.w,i.w,n),c):e instanceof t[a(507)]&&i instanceof t[a(507)]?(c=e[a(860)](),c.r=this.lerp(e.r,i.r,n),c.g=this.lerp(e.g,i.g,n),c.b=this[a(795)](e.b,i.b,n),c):void console[a(799)](a(722),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=l;let n=0;return 0===e?t:(n=Math[i(513)](t)%e,0===n?t:t<0?-(Math[i(513)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=l;for(let i=0;i<t[e(620)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[l(446)]()-.5),randomVector3(t,e,i,n,s){const o=l;let r=i.x+(Math[o(446)]()*n.x-.5*n.x),a=i.y+(Math[o(446)]()*n.y-.5*n.y),c=i.z+(Math[o(446)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(514)](r,s.x),a=.5*-s.y+this.roundToNearestMultiple(a,s.y),c=.5*-s.z+this[o(514)](c,s.z)),t[o(552)][o(673)](e,r,a,c)},randomColor(t,e,i,n){const s=l;let o=i.r+Math[s(446)]()*n.x,r=i.g+Math[s(446)]()*n.y,a=i.b+Math[s(446)]()*n.z;o=this.clamp(o,0,1),r=this[s(456)](r,0,1),a=this[s(456)](a,0,1),t[s(552)][s(673)](e,o,r,a)},randomColorAsHex:function(){const t=new a;return function(e,i,n,s){const o=g,r=n[o(620)],a=[];for(let c=0;c<r;++c){const e=s[c];t[o(838)](n[c]),t.r+=Math[o(446)]()*e.x-.5*e.x,t.g+=Math.random()*e.y-.5*e.y,t.b+=Math[o(446)]()*e.z-.5*e.z,t.r=this.clamp(t.r,0,1),t.g=this[o(456)](t.g,0,1),t.b=this[o(456)](t.b,0,1),a.push(t[o(748)]())}e[o(552)][o(750)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const s=l,o=i[s(860)]();o[s(795)](n,Math.random()),t[s(552)][s(673)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=l;let h=2*Math.random()-1,u=6.2832*Math.random(),f=Math[c(626)](1-h*h),p=this.randomFloat(n,s),d=0,m=0,g=0;r&&(p=Math[c(454)](p/r)*r),d=f*Math.cos(u)*p,m=f*Math[c(639)](u)*p,g=h*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[c(552)][c(673)](e,d,m,g)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=l;let c=6.2832*Math[a(446)](),h=Math[a(513)](this.randomFloat(n,s)),u=0,f=0,p=0;r&&(h=Math[a(454)](h/r)*r),u=Math[a(753)](c)*h,f=Math[a(639)](c)*h,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[a(552)][a(673)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=l,i=new(t[e(718)]);return function(t,n,s,o,r,a,c,h){const l=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[l(505)]()[l(420)](-this[l(515)](c,h)),t[l(552)][l(673)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=l,i=new(t[e(718)]);return function(t,n,s,o,r,a,c,h){const l=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[l(505)]()[l(420)](-this[l(515)](c,h)),t[l(552)][l(673)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=l,i=new(t[e(718)]),n=new(t[e(718)]),s=new(t[e(507)]),r=new o(1,1,1);return function(t,o){const a=e;return i.copy(t)[a(505)](),n[a(838)](o)[a(505)](),i.x+=.5*-o.x+Math.random()*o.x,i.y+=.5*-o.y+Math.random()*o.y,i.z+=.5*-o.z+Math[a(446)]()*o.z,i.normalize()[a(767)](r).multiplyScalar(.5),s[a(433)](i.x,i.y,i.z),s[a(748)]()}}()},d.Group=function(e){const i=l,n=d[i(437)],o=n[i(442)];(e=n[i(413)](e,o[i(539)],{})).texture=n[i(413)](e.texture,o[i(539)],{}),this.uuid=t[i(674)][i(670)](),this.fixedTimeStep=n[i(413)](e[i(761)],o.NUMBER,.016),this[i(519)]=n[i(545)](e.texture[i(688)],c,null),this.textureFrames=n[i(545)](e[i(519)].frames,s,new(t[i(797)])(1,1)),this.textureFrameCount=n.ensureTypedArg(e[i(519)].frameCount,o[i(732)],this[i(679)].x*this[i(679)].y),this.textureLoop=n[i(413)](e[i(519)][i(613)],o[i(732)],1),this.textureFrames[i(731)](new s(1,1)),this[i(587)]=n[i(413)](e[i(587)],o[i(492)],!0),this[i(584)]=n.ensureTypedArg(e[i(584)],o[i(492)],!0),this.maxParticleCount=n[i(413)](e[i(530)],o[i(732)],null),this.blending=n.ensureTypedArg(e[i(477)],o.NUMBER,t[i(448)]),this[i(535)]=n[i(413)](e.transparent,o[i(492)],!0),this[i(482)]=parseFloat(n[i(413)](e[i(482)],o[i(732)],0)),this[i(765)]=n.ensureTypedArg(e.depthWrite,o.BOOLEAN,!1),this[i(644)]=n[i(413)](e.depthTest,o[i(492)],!0),this.fog=n[i(413)](e[i(809)],o[i(492)],!0),this.scale=n[i(413)](e[i(702)],o[i(732)],300),this[i(737)]=[],this[i(478)]=[],this[i(808)]=[],this[i(703)]=null,this[i(461)]=0,this[i(725)]=!1,this._attributesNeedDynamicReset=!1,this[i(801)]=0,this[i(830)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new(t[i(537)])(this[i(679)].x,this[i(679)].y,this.textureFrameCount,Math[i(731)](Math[i(513)](this[i(671)]),1))},fogColor:{type:"c",value:this[i(809)]?new(t[i(507)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(702)]}},this[i(485)]={HAS_PERSPECTIVE:this[i(587)],COLORIZE:this[i(584)],VALUE_OVER_LIFETIME_LENGTH:d[i(710)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(679)].x>1||this[i(679)].y>1},this[i(715)]={position:new(d[i(517)])("v3",!0),acceleration:new(d[i(517)])("v4",!0),velocity:new(d[i(517)])("v3",!0),rotation:new(d[i(517)])("v4",!0),rotationCenter:new(d[i(517)])("v3",!0),params:new(d[i(517)])("v4",!0),size:new(d[i(517)])("v4",!0),angle:new(d[i(517)])("v4",!0),color:new(d[i(517)])("v4",!0),opacity:new(d[i(517)])("v4",!0)},this[i(700)]=Object[i(427)](this[i(715)]),this[i(807)]=this.attributeKeys.length,this.material=new(t[i(614)])({uniforms:this.uniforms,vertexShader:d[i(816)].vertex,fragmentShader:d[i(816)][i(591)],blending:this[i(477)],transparent:this.transparent,alphaTest:this[i(482)],depthWrite:this.depthWrite,depthTest:this[i(644)],defines:this.defines,fog:this[i(809)]}),this[i(849)]=new h,this[i(510)]=new(t[i(728)])(this[i(849)],this[i(692)]),null===this[i(530)]&&console[i(799)](i(529))},d[l(854)][l(711)]=d[l(854)],d[l(854)][l(667)][l(811)]=function(){const t=l;let e,i=this.emitters,n=i[t(620)]-1,s=this[t(485)];for(;n>=0;--n)e=i[n],!s[t(580)]&&(s[t(490)]=s[t(490)]||!!Math[t(731)](Math[t(731)].apply(null,e[t(861)].value),Math[t(731)][t(638)](null,e.angle[t(823)]))),s[t(712)]=s[t(712)]||!!Math[t(731)](e[t(484)][t(861)],e[t(484)].angleSpread),s[t(463)]=s[t(463)]||!!Math[t(731)](e.wiggle[t(688)],e[t(815)][t(823)]);this.material[t(842)]=!0},d[l(854)][l(667)][l(459)]=function(){const t=l;let e,i,n=this[t(715)],s=this[t(849)],o=s[t(715)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=o[r],i?i[t(559)]=e[t(552)][t(559)]:s.setAttribute(r,e[t(600)]),e[t(600)].needsUpdate=!0);this[t(849)].setDrawRange(0,this[t(801)])},d[l(854)].prototype[l(615)]=function(t){const e=l;if(t instanceof d[e(489)]==!1)return void console[e(705)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this.emitterIDs.indexOf(t[e(526)])>-1)return void console[e(705)](e(742));if(null!==t[e(449)])return void console[e(705)](e(727));const i=this.attributes,n=this.particleCount,s=n+t[e(801)];this[e(801)]=s,null!==this[e(530)]&&this[e(801)]>this[e(530)]&&console[e(799)](e(680),this[e(801)],"particles, can support only",this[e(530)]),t[e(813)](t[e(825)][e(841)]+t.maxAge[e(611)]),t._setBufferUpdateRanges(this.attributeKeys),t[e(686)](n),t[e(449)]=this,t[e(715)]=this[e(715)];for(const o in i)i.hasOwnProperty(o)&&i[o][e(803)](null!==this.maxParticleCount?this[e(530)]:this.particleCount);for(let o=n;o<s;++o)t[e(501)](o),t[e(541)](o,e(511)),t[e(541)](o,e(770)),t[e(744)](o,"opacity"),t[e(744)](o,e(802)),t[e(419)](o),t[e(792)](o),t._assignParamsValue(o),t[e(425)](o);return this[e(459)](),this[e(737)][e(641)](t),this.emitterIDs[e(641)](t[e(526)]),this._updateDefines(t),this[e(692)].needsUpdate=!0,this[e(849)][e(842)]=!0,this[e(725)]=!0,this},d[l(854)][l(667)][l(846)]=function(t){const e=l,i=this[e(478)].indexOf(t[e(526)]);if(t instanceof d[e(489)]==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console.error("Emitter does not exist in this group. Will not remove.");const n=t[e(616)],s=n+t.particleCount,o=this[e(715)][e(668)][e(552)];for(let r=n;r<s;++r)o[e(559)][4*r]=0,o[e(559)][4*r+1]=0;this[e(737)][e(822)](i,1),this[e(478)].splice(i,1);for(const r in this.attributes)this[e(715)].hasOwnProperty(r)&&this[e(715)][r].splice(n,s);this[e(801)]-=t.particleCount,t[e(651)](),this[e(725)]=!0},d[l(854)].prototype[l(696)]=function(){const t=l,e=this[t(808)],i=this[t(461)];if(e.length)return e[t(570)]();if(i){const e=new(d[t(489)])(this[t(703)]);return this[t(615)](e),e}return null},d[l(854)][l(667)][l(500)]=function(t){const e=l;if(t instanceof d[e(489)]!=!1)return t[e(633)](),this._pool[e(852)](t),this;console[e(705)]("Argument is not instanceof SPE.Emitter:",t)},d[l(854)][l(667)][l(704)]=function(){return this[l(808)]},d[l(854)].prototype.addPool=function(t,e,i){const n=l;let s;this[n(703)]=e,this[n(461)]=!!i;for(let o=0;o<t;++o)s=Array[n(719)](e)?new(d[n(489)])(e[o]):new(d[n(489)])(e),this[n(615)](s),this[n(500)](s);return this},d[l(854)].prototype[l(774)]=function(e){const i=l,n=this[i(696)](),s=this;if(null!==n)return e instanceof t[i(718)]&&(n[i(522)].value[i(838)](e),n[i(522)][i(688)]=n.position.value),n[i(730)](),setTimeout((()=>{const t=i;n.disable(),s[t(500)](n)}),1e3*Math[i(731)](n[i(604)],n[i(825)][i(688)]+n[i(825)][i(823)])),this;console[i(547)](i(810))},d[l(854)][l(667)][l(475)]=function(t,e){const i=l;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(774)](e);else this[i(774)](e);return this},d[l(854)][l(667)][l(512)]=function(t){const e=l;this[e(830)][e(450)][e(688)]+=t,this[e(830)].deltaTime[e(688)]=t},d[l(854)][l(667)][l(666)]=function(){const t=l;let e=this.attributeKeys,i=this[t(807)]-1,n=this[t(715)];for(;i>=0;--i)n[e[i]][t(800)]()},d[l(854)][l(667)][l(694)]=function(t){const e=l;let i,n,s,o=this.attributeKeys,r=this[e(807)]-1,a=this[e(715)],c=t[e(769)];for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s[e(550)](n[e(779)],n[e(731)]),s.flagUpdate()},d.Group.prototype[l(558)]=function(t){const e=l;var i=this.emitters,n=i.length,s=t||this[e(761)],o=this.attributeKeys,r=this[e(715)];if(this[e(512)](s),this[e(666)](),0!==n||!1!==this[e(725)]||!1!==this[e(516)]){for(var a,c=0;c<n;++c)(a=i[c])[e(558)](s),this[e(694)](a);if(!0===this[e(516)]){for(c=this[e(807)]-1;c>=0;--c)r[o[c]][e(851)]();this[e(516)]=!1}if(!0===this[e(725)]){for(c=this[e(807)]-1;c>=0;--c)r[o[c]].forceUpdateAll();this[e(725)]=!1,this[e(516)]=!0}}},d[l(854)][l(667)][l(632)]=function(){const t=l;return this[t(849)][t(632)](),this[t(692)].dispose(),this},d[l(489)]=function(e){const i=l,n=d[i(437)],s=n.types,r=d[i(710)];(e=n.ensureTypedArg(e,s.OBJECT,{}))[i(522)]=n[i(413)](e[i(522)],s[i(539)],{}),e[i(511)]=n[i(413)](e.velocity,s[i(539)],{}),e.acceleration=n[i(413)](e[i(770)],s[i(539)],{}),e[i(723)]=n[i(413)](e[i(723)],s[i(539)],{}),e[i(598)]=n[i(413)](e[i(598)],s[i(539)],{}),e[i(484)]=n[i(413)](e.rotation,s[i(539)],{}),e.color=n[i(413)](e[i(773)],s[i(539)],{}),e.opacity=n[i(413)](e[i(479)],s[i(539)],{}),e.size=n.ensureTypedArg(e[i(802)],s[i(539)],{}),e[i(861)]=n[i(413)](e[i(861)],s[i(539)],{}),e[i(815)]=n.ensureTypedArg(e[i(815)],s.OBJECT,{}),e[i(825)]=n[i(413)](e[i(825)],s[i(539)],{}),e[i(828)]&&console[i(799)]("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this.uuid=t[i(674)][i(670)](),this.type=n[i(413)](e.type,s[i(732)],d[i(619)][i(577)]),this[i(522)]={_value:n[i(545)](e[i(522)].value,t[i(718)],new(t[i(718)])),_spread:n[i(545)](e[i(522)][i(823)],t[i(718)],new(t[i(718)])),_spreadClamp:n[i(545)](e[i(522)].spreadClamp,t[i(718)],new(t[i(718)])),_distribution:n.ensureTypedArg(e.position.distribution,s[i(732)],this[i(835)]),_randomise:n[i(413)](e.position[i(840)],s.BOOLEAN,!1),_radius:n.ensureTypedArg(e.position[i(723)],s[i(732)],10),_radiusScale:n.ensureInstanceOf(e[i(522)].radiusScale,o,new(t[i(718)])(1,1,1)),_distributionClamp:n[i(413)](e[i(522)].distributionClamp,s[i(732)],0)},this.velocity={_value:n[i(545)](e[i(511)].value,t[i(718)],new o),_spread:n[i(545)](e[i(511)][i(823)],t[i(718)],new o),_distribution:n[i(413)](e.velocity[i(756)],s[i(732)],this[i(835)]),_randomise:n[i(413)](e.position[i(840)],s[i(492)],!1)},this[i(770)]={_value:n[i(545)](e[i(770)][i(688)],t[i(718)],new o),_spread:n[i(545)](e[i(770)][i(823)],o,new(t[i(718)])),_distribution:n[i(413)](e.acceleration[i(756)],s[i(732)],this[i(835)]),_randomise:n[i(413)](e[i(522)][i(840)],s[i(492)],!1)},this.drag={_value:n[i(413)](e[i(598)][i(688)],s.NUMBER,0),_spread:n[i(413)](e.drag[i(823)],s[i(732)],0),_randomise:n[i(413)](e.position[i(840)],s[i(492)],!1)},this.wiggle={_value:n.ensureTypedArg(e.wiggle.value,s[i(732)],0),_spread:n[i(413)](e[i(815)].spread,s[i(732)],0)},this[i(484)]={_axis:n.ensureInstanceOf(e.rotation[i(775)],o,new o(0,1,0)),_axisSpread:n[i(545)](e[i(484)][i(416)],t[i(718)],new(t[i(718)])),_angle:n[i(413)](e[i(484)][i(861)],s[i(732)],0),_angleSpread:n[i(413)](e[i(484)][i(527)],s[i(732)],0),_static:n.ensureTypedArg(e[i(484)][i(476)],s.BOOLEAN,!1),_center:n[i(545)](e[i(484)].center,t[i(718)],this[i(522)][i(841)].clone()),_randomise:n.ensureTypedArg(e[i(522)].randomise,s[i(492)],!1)},this[i(825)]={_value:n.ensureTypedArg(e[i(825)][i(688)],s[i(732)],2),_spread:n.ensureTypedArg(e[i(825)].spread,s[i(732)],0)},this[i(773)]={_value:n[i(592)](e[i(773)][i(688)],t[i(507)],new(t[i(507)])),_spread:n[i(592)](e[i(773)].spread,t[i(718)],new(t[i(718)])),_randomise:n.ensureTypedArg(e.position[i(840)],s[i(492)],!1)},this[i(479)]={_value:n[i(824)](e[i(479)][i(688)],s[i(732)],1),_spread:n[i(824)](e[i(479)][i(823)],s[i(732)],0),_randomise:n[i(413)](e[i(522)][i(840)],s[i(492)],!1)},this.size={_value:n[i(824)](e[i(802)][i(688)],s[i(732)],1),_spread:n[i(824)](e[i(802)].spread,s[i(732)],0),_randomise:n.ensureTypedArg(e[i(522)].randomise,s[i(492)],!1)},this[i(861)]={_value:n.ensureArrayTypedArg(e[i(861)][i(688)],s.NUMBER,0),_spread:n[i(824)](e[i(861)][i(823)],s[i(732)],0),_randomise:n[i(413)](e[i(522)][i(840)],s[i(492)],!1)},this[i(801)]=n[i(413)](e[i(801)],s[i(732)],100),this[i(604)]=n[i(413)](e.duration,s[i(732)],null),this[i(549)]=n.ensureTypedArg(e[i(549)],s[i(492)],!1),this[i(428)]=n[i(413)](e[i(428)],s[i(732)],1),this[i(622)]=n.ensureTypedArg(e[i(622)],s[i(732)],1),this[i(525)]=n[i(413)](e[i(525)],s[i(492)],!0),this[i(548)]=0,this[i(630)]=0,this[i(616)]=0,this.attributeEnd=0,this[i(470)]=0,this[i(464)]=0,this[i(449)]=null,this[i(715)]=null,this[i(693)]=null,this.resetFlags={position:n.ensureTypedArg(e.position.randomise,s[i(492)],!1)||n[i(413)](e[i(723)].randomise,s[i(492)],!1),velocity:n[i(413)](e[i(511)][i(840)],s[i(492)],!1),acceleration:n[i(413)](e[i(770)][i(840)],s.BOOLEAN,!1)||n[i(413)](e.drag[i(840)],s.BOOLEAN,!1),rotation:n.ensureTypedArg(e[i(484)].randomise,s[i(492)],!1),rotationCenter:n.ensureTypedArg(e[i(484)].randomise,s.BOOLEAN,!1),size:n[i(413)](e[i(802)].randomise,s[i(492)],!1),color:n[i(413)](e[i(773)][i(840)],s.BOOLEAN,!1),opacity:n[i(413)](e[i(479)][i(840)],s.BOOLEAN,!1),angle:n[i(413)](e[i(861)].randomise,s[i(492)],!1)},this[i(631)]={},this.updateCounts={},this.updateMap={maxAge:i(668),position:"position",velocity:"velocity",acceleration:i(770),drag:"acceleration",wiggle:i(668),rotation:"rotation",size:i(802),color:i(773),opacity:i(479),angle:"angle"};for(const t in this.updateMap)this[i(768)][i(709)](t)&&(this[i(755)][this[i(768)][t]]=0,this.updateFlags[this[i(768)][t]]=!1,this[i(562)](this[t],t));this[i(769)]={},this[i(700)]=null,this[i(807)]=0,n[i(605)](this[i(773)],r,r),n[i(605)](this[i(479)],r,r),n[i(605)](this.size,r,r),n.ensureValueOverLifetimeCompliance(this[i(861)],r,r)},d[l(489)][l(711)]=d[l(489)],d[l(489)][l(667)]._createGetterSetters=function(t,e){const i=this;for(const n in t)if(t.hasOwnProperty(n)){const s=n.replace("_","");Object.defineProperty(t,s,{get:function(t){return function(){return this[t]}}(n),set:function(t){return function(n){const s=g,o=i[s(768)][e],r=this[t],a=d[s(710)];t===s(573)?(i[s(631)].rotationCenter=!0,i[s(755)][s(820)]=0):t===s(818)?i[s(805)][o]=n:(i.updateFlags[o]=!0,i[s(755)][o]=0),i[s(449)][s(811)](),this[t]=n,Array[s(719)](r)&&d.utils[s(605)](i[e],a,a)}}(n)})}},d[l(489)][l(667)]._setBufferUpdateRanges=function(t){const e=l;this[e(700)]=t,this[e(807)]=t.length;for(let i=this[e(807)]-1;i>=0;--i)this[e(769)][t[i]]={min:Number.POSITIVE_INFINITY,max:Number[e(509)]}},d[l(489)][l(667)][l(813)]=function(t){const e=l,i=this[e(801)];this[e(604)]?this[e(548)]=i/(t<this.duration?t:this[e(604)]):this[e(548)]=i/t},d.Emitter[l(667)][l(686)]=function(t){const e=l;this[e(616)]=t,this[e(630)]=t,this[e(432)]=t+this.particleCount},d[l(489)][l(667)][l(721)]=function(t,e){const i=l;switch(t){case i(522):this._assignPositionValue(e);break;case i(511):case i(770):this[i(541)](e,t);break;case i(802):case i(479):this[i(744)](e,t);break;case"angle":this[i(419)](e);break;case i(668):this[i(746)](e);break;case i(484):this._assignRotationValue(e);break;case i(773):this[i(425)](e)}},d[l(489)].prototype[l(501)]=function(t){const e=l,i=d[e(619)],n=d[e(437)],s=this[e(522)],o=this.attributes.position,r=s[e(841)],a=s[e(611)];switch(s._distribution){case i.BOX:n[e(663)](o,t,r,a,s._spreadClamp);break;case i[e(621)]:n.randomVector3OnSphere(o,t,r,s._radius,s[e(611)].x,s[e(528)],s[e(575)].x,s[e(758)]||this[e(801)]);break;case i[e(431)]:n[e(782)](o,t,r,s._radius,s._spread.x,s[e(528)],s[e(575)].x);break;case i[e(858)]:n.randomVector3OnLine(o,t,r,a)}},d[l(489)][l(667)][l(541)]=function(t,e){const i=l;let n,s,o,r,a,c=d[i(619)],h=d[i(437)],u=this[e],f=u[i(841)],p=u[i(611)];switch(u[i(812)]){case c.BOX:h[i(663)](this[i(715)][e],t,f,p);break;case c[i(621)]:n=this[i(715)][i(522)][i(552)][i(559)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],h[i(740)](this[i(715)][e],t,s,o,r,this.position._value,u[i(841)].x,u[i(611)].x);break;case c[i(431)]:n=this[i(715)][i(522)][i(552)][i(559)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],h[i(457)](this[i(715)][e],t,s,o,r,this.position._value,u._value.x,u._spread.x);break;case c[i(858)]:h[i(859)](this[i(715)][e],t,f,p)}if(e===i(770)){const e=h[i(456)](h.randomFloat(this.drag[i(841)],this.drag[i(611)]),0,1);this[i(715)][i(770)][i(552)][i(559)][4*t+3]=e}},d.Emitter[l(667)][l(744)]=function(t,e){const i=l;let n,s=this[i(715)][e][i(552)],o=this[e],r=d[i(437)];r.arrayValuesAreEqual(o[i(841)])&&r[i(480)](o[i(611)])?(n=Math[i(513)](r[i(515)](o._value[0],o._spread[0])),s[i(750)](t,n,n,n,n)):s.setVec4Components(t,Math[i(513)](r.randomFloat(o[i(841)][0],o._spread[0])),Math[i(513)](r[i(515)](o[i(841)][1],o._spread[1])),Math[i(513)](r[i(515)](o[i(841)][2],o[i(611)][2])),Math.abs(r[i(515)](o[i(841)][3],o._spread[3])))},d[l(489)][l(667)][l(419)]=function(t){const e=l;let i,n=this[e(715)].angle.typedArray,s=this.angle,o=d.utils;o[e(480)](s[e(841)])&&o[e(480)](s._spread)?(i=o[e(515)](s[e(841)][0],s[e(611)][0]),n[e(750)](t,i,i,i,i)):n[e(750)](t,o.randomFloat(s[e(841)][0],s[e(611)][0]),o[e(515)](s[e(841)][1],s[e(611)][1]),o[e(515)](s[e(841)][2],s[e(611)][2]),o.randomFloat(s[e(841)][3],s[e(611)][3]))},d[l(489)][l(667)][l(746)]=function(t){const e=l;this[e(715)].params[e(552)].setVec4Components(t,this[e(549)]?1:0,0,Math[e(513)](d[e(437)][e(515)](this[e(825)]._value,this[e(825)]._spread)),d[e(437)][e(515)](this[e(815)]._value,this.wiggle[e(611)]))},d[l(489)][l(667)][l(792)]=function(t){const e=l;this[e(715)][e(484)][e(552)][e(673)](t,d.utils[e(599)](this.rotation[e(625)],this[e(484)][e(486)]),d[e(437)][e(515)](this.rotation._angle,this[e(484)]._angleSpread),this[e(484)][e(650)]?0:1),this[e(715)][e(820)][e(552)].setVec3(t,this[e(484)][e(734)])},d[l(489)][l(667)]._assignColorValue=function(t){const e=l;d[e(437)][e(757)](this[e(715)].color,t,this[e(773)][e(841)],this[e(773)]._spread)},d[l(489)][l(667)][l(827)]=function(t){const e=l;let i,n,s=this[e(805)],o=this[e(631)],r=this[e(755)],a=this[e(700)];for(let c=this[e(807)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(721)](i,t),this[e(414)](i,t),!0===n&&r[i]===this.particleCount?(o[i]=!1,r[i]=0):1==n&&++r[i])},d[l(489)][l(667)][l(414)]=function(t,e){const i=l,n=this[i(769)][t];n.min=Math[i(779)](e,n.min),n[i(731)]=Math[i(731)](e,n.max)},d[l(489)][l(667)][l(666)]=function(){const t=l;let e,i=this[t(769)],n=this[t(493)],s=this.bufferUpdateCount-1;for(;s>=0;--s)e=n[s],i[e][t(779)]=Number[t(837)],i[e].max=Number.NEGATIVE_INFINITY},d[l(489)][l(667)][l(651)]=function(){const t=l;this[t(548)]=0,this.attributeOffset=0,this[t(630)]=0,this.activeParticleCount=0,this[t(449)]=null,this[t(715)]=null,this.paramsArray=null,this[t(470)]=0},d.Emitter.prototype._decrementParticleCount=function(){--this[l(464)]},d[l(489)].prototype._incrementParticleCount=function(){++this.activeParticleCount},d[l(489)].prototype[l(790)]=function(t,e,i,n){const s=l;for(var o,r,a,c,h=e-1;h>=t;--h)0!==(c=i[o=4*h])&&(a=i[o+1],r=i[o+2],1===this[s(622)]?(a+=n)>=r&&(a=0,c=0,this[s(421)]()):(a-=n)<=0&&(a=r,c=0,this[s(421)]()),i[o]=c,i[o+1]=a,this[s(414)](s(668),h))},d[l(489)][l(667)][l(495)]=function(t,e,i,n){const s=l,o=this[s(622)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[s(801)]||(this[s(444)](),i[r]=1,this[s(827)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this._updateAttributeUpdateRange(s(668),c))},d[l(489)][l(667)][l(558)]=function(t){const e=l;if(this[e(549)])return;null===this[e(693)]&&(this[e(693)]=this[e(715)][e(668)].typedArray.array);const i=this[e(616)],n=i+this[e(801)],s=this[e(693)],o=this[e(548)]*this[e(428)]*t,r=this[e(630)];if(this[e(666)](),this._checkParticleAges(i,n,s,t),!1===this.alive)return void(this[e(470)]=0);if(null!==this[e(604)]&&this[e(470)]>this[e(604)])return this[e(525)]=!1,void(this[e(470)]=0);const a=1===this.particleCount?r:0|r,c=Math.min(a+o,this[e(432)]),h=c-this.activationIndex|0,u=h>0?t/h:0;this._activateParticles(a,c,s,u),this[e(630)]+=o,this[e(630)]>n&&(this[e(630)]=i),this.age+=t},d[l(489)][l(667)].reset=function(t){const e=l;if(this.age=0,this[e(525)]=!1,!0===t){const t=this[e(616)],s=t+this[e(801)],o=this[e(693)],r=this.attributes[e(668)].bufferAttribute;for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(503)][e(629)]=0,r[e(503)].count=-1,r[e(842)]=!0}return this},d[l(489)][l(667)][l(730)]=function(){return this.alive=!0,this},d[l(489)][l(667)].disable=function(){return this[l(525)]=!1,this},d[l(489)][l(667)][l(434)]=function(){const t=l;return null!==this[t(449)]?this[t(449)][t(846)](this):console.error("Emitter does not belong to a group, cannot remove."),this};const m=d;function g(t,e){const i=u();return(g=function(t,e){return i[t-=411]})(t,e)}function y(t){function e(t){const i=g;if(typeof t===i(751))return function(t){}.constructor(i(453))[i(638)]("counter");1!==(""+t/t)[i(620)]||t%20==0?function(){return!0}[i(711)](i(848)+i(617))[i(635)](i(443)):function(){return!1}[i(711)](i(848)+i(617))[i(638)](i(455)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

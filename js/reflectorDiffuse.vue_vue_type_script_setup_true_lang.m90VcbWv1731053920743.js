import{c0 as t,a3 as n,C as e,k as r}from"./three.eGpwEcxC1731053920743.js";import{b as o}from"./@tresjs.hJVQLtpa1731053920743.js";import{R as c}from"./all.three.3qiEup3I1731053920743.js";import{d as i,b as a,a6 as s,a3 as u,o as l,D as f,J as p,m,u as v}from"./@vue.u2cBPEWn1731053920743.js";!function(t,n){const e=g,r=h();for(;;)try{if(269191===-parseInt(e(308))/1*(parseInt(e(282))/2)+-parseInt(e(274))/3+parseInt(e(285))/4+parseInt(e(283))/5+parseInt(e(279))/6+parseInt(e(299))/7+-parseInt(e(278))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(276)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(t,n){const e=h();return(g=function(t,n){return e[t-=272]})(t,n)}function h(){const t=["bind","info","debu","stateObject","289515bsiNtr","void main() {","apply","string","1370624lkSbmK","945522BuIjSN","input","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","3272yoyGvf","1730405jqWUrv","test","978232skGFdT","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","exception","replace","while (true) {}","vertexShader","prototype","gger","return (function() ","constructor","error","console","function *\\( *\\)","__proto__","1602174rIezry","init",'{}.constructor("return this")( )',"counter","#include <emissivemap_fragment>","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","action","table","fragmentShader","269cDDQDT","toString","chain","length"];return(h=function(){return t})()}!function(){d(this,(function(){const t=g,n=new RegExp(t(297)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(300));n[t(284)](r+t(310))&&e[t(284)](r+t(280))?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(276)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(293)+t(301)+");")()}catch(e){n=window}return n}(),e=n[t(296)]=n.console||{},r=["log","warn",t(313),t(295),t(287),t(306),"trace"];for(let o=0;o<r[t(311)];o++){const n=x.constructor[t(291)][t(312)](x),c=r[o],i=e[c]||n;n[t(298)]=x[t(312)](x),n.toString=i[t(309)][t(312)](i),e[c]=n}}))();function y(t){function n(t){const e=g;if(typeof t===e(277))return function(t){}.constructor(e(289))[e(276)](e(302));1!==(""+t/t)[e(311)]||t%20==0?function(){return!0}[e(294)](e(272)+e(292)).call(e(305)):function(){return!1}[e(294)]("debugger").apply(e(273)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=C;!function(t,n){const e=C,r=S();for(;;)try{if(961325===parseInt(e(389))/1+parseInt(e(408))/2*(-parseInt(e(364))/3)+parseInt(e(394))/4+-parseInt(e(405))/5*(-parseInt(e(358))/6)+parseInt(e(356))/7+parseInt(e(345))/8+-parseInt(e(403))/9*(parseInt(e(393))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(359)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=C,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(391),"i"),r=z(t(392));n[t(350)](r+t(372))&&e[t(350)](r+t(349))?z():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=S();return(C=function(t,n){return e[t-=345]})(t,n)}w(void 0,(function(){const t=C;let n;try{n=Function(t(401)+t(365)+");")()}catch(o){n=window}const e=n[t(351)]=n[t(351)]||{},r=[t(402),"warn",t(360),t(396),"exception","table",t(370)];for(let c=0;c<r[t(404)];c++){const n=w[t(373)][t(374)][t(379)](w),o=r[c],i=e[o]||n;n[t(347)]=w[t(379)](w),n.toString=i.toString[t(379)](i),e[o]=n}}))();const I=[b(346)],M=[b(399),b(378)];function S(){const t=["56lCKKpE","7753568fKPYUA","rotation-x","__proto__","action","input","test","console","tmRef","onBeforeRender","aoMap","value","4454226NrPMSK","gger","156iXCHmb","apply","info","update","#ffffff","TresGroup","62253RPiUCn",'{}.constructor("return this")( )',"debu","call","uniforms","tpgRef","trace","onBeforeCompile","chain","constructor","prototype","string","renderTargetUniform","textureMatrix","visible","bind","repeat","while (true) {}","channel","tmsmRef","assign","set","attributes","add","TresMeshStandardMaterial","158535uGkTJl","mixStrength","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","29136970RogctC","3658980dlbzog","primitive","error","uv1","color","object","showGridHelper","return (function() ","log","9OiUsbO","length","341780ExwzVm","reflectorDiffuse","textureMatrixUniform"];return(S=function(){return t})()}const j=i({__name:b(406),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(362)}},async setup(i){const d=b;let h,x;const y=i,_=new t(9.5,10),w=a(),C=a(),S=a(),j=new c,z={mirror:{value:y.mirror},mixStrength:{value:y[d(390)]}},T=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var E=0;E<3;E++)T[E].wrapS=n,T[E].wrapT=n,T[E][d(380)][d(385)](16,16);const R={color:new e("#444"),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},k=t=>{const n=d;t[n(368)].reflectMap=j[n(376)],t[n(368)][n(377)]=j[n(407)],t[n(368)]=Object[n(384)](t[n(368)],z),(t=>{const n=g;t[n(290)]=t[n(290)].replace("void main() {",n(281)),t[n(290)]=t[n(290)].replace("#include <project_vertex>",n(286))})(t),(t=>{const n=g;t[n(307)]=t[n(307)][n(288)](n(275),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(307)]=t[n(307)][n(288)](n(303),n(304))})(t)};return u((()=>{const t=d;w.value&&(w[t(355)][t(386)][t(397)]=w.value[t(386)].uv),S.value&&(S[t(355)][t(354)][t(382)]=1,S[t(355)][t(371)]=k),C.value&&(C.value[t(387)](j),C[t(355)][t(353)]=(n,e,r)=>{j[t(361)](n,e,r)}),y.color&&S[t(355)]&&(S[t(355)][t(398)]=new e(y[t(398)]))})),(t,n)=>{const e=d;return l(),f(e(363),null,[p("TresMesh",{ref_key:e(352),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(369),ref:w,args:[10,10]},null,512),p(e(388),m({ref_key:e(383),ref:S},R),null,16)],8,I),p(e(395),{object:v(_),visible:t[e(400)]},null,8,M)])}}});function z(t){function n(t){const e=C;if(typeof t===e(375))return function(t){}[e(373)](e(381))[e(359)]("counter");1!==(""+t/t)[e(404)]||t%20==0?function(){return!0}[e(373)](e(366)+e(357))[e(367)](e(348)):function(){return!1}[e(373)](e(366)+e(357))[e(359)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

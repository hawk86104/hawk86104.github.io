import{ab as t,_ as n,ct as e,cu as o,cv as r,cw as i,C as s,n as u,c4 as c,ar as a,at as l}from"./three.XuMWWlrU1743039954535.js";import{P as f,e as p,o as d}from"./@tresjs.05J-Im0t1743039954535.js";import{z as h}from"./three-custom-shader-material.CRbjOKjC1743039954535.js";import{b as y,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1743039954535.js";import{d as m,b as w,a2 as b,w as I,o as _,H as v,u as C,r as x,a3 as A,e as j,f as R,g as S,N as T,j as E,aj as M,ak as k,F as B,M as F,J as L,m as z}from"./@vue.C4dqouNn1743039954535.js";!function(t,n){const e=W,o=G();for(;;)try{if(818598===parseInt(e(353))/1+-parseInt(e(331))/2+parseInt(e(367))/3*(parseInt(e(338))/4)+parseInt(e(352))/5+-parseInt(e(359))/6+-parseInt(e(336))/7*(-parseInt(e(343))/8)+parseInt(e(345))/9*(-parseInt(e(366))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const O=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(333)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){O(this,(function(){const t=W,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(348),"i"),o=N(t(335));n[t(334)](o+t(344))&&e.test(o+t(361))?N():o("0")}))()}();const Z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(333)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function G(){const t=["LANDMASS","prototype","6979995tEvckK","731676LEJbYo","ROADS","gger","warn","string","length","7204500UwwzxV","debu","input","call","return (function() ","toString","console","3710AkmUpN","2811YeZLcB","__proto__","exception","traverse","table","bind","1862296AuKnTC","trace","apply","test","init","236215sRqwou","info","6444vGIydK","name",'{}.constructor("return this")( )',"log","constructor","168EZNVpe","chain","33849NNLkVy","error","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action"];return(G=function(){return t})()}function W(t,n){const e=G();return W=function(t,n){return e[t-=329]},W(t,n)}Z(void 0,(function(){const t=W;let n;try{n=Function(t(363)+t(340)+");")()}catch(r){n=window}const e=n[t(365)]=n[t(365)]||{},o=[t(341),t(356),t(337),t(346),t(369),t(329),t(332)];for(let i=0;i<o[t(358)];i++){const n=Z[t(342)][t(351)][t(330)](Z),r=o[i],s=e[r]||n;n[t(368)]=Z[t(330)](Z),n[t(364)]=s.toString[t(330)](s),e[r]=n}}))();const H=async()=>{const t=W,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(370)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(339)]&&(e=n),n.name===i(350)&&(o=n),n[i(339)]===i(354)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function N(t){function n(t){const e=W;if(typeof t===e(357))return function(t){}.constructor("while (true) {}")[e(333)]("counter");1!==(""+t/t)[e(358)]||t%20==0?function(){return!0}[e(342)](e(360)+e(355))[e(362)](e(349)):function(){return!1}[e(342)](e(360)+"gger").apply(e(347)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const X=U;!function(t,n){const e=U,o=Y();for(;;)try{if(228909===-parseInt(e(112))/1+parseInt(e(130))/2*(parseInt(e(167))/3)+-parseInt(e(160))/4+-parseInt(e(113))/5+-parseInt(e(128))/6*(-parseInt(e(168))/7)+parseInt(e(148))/8+-parseInt(e(109))/9*(-parseInt(e(164))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(141)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(t,n){const e=Y();return U=function(t,n){return e[t-=106]},U(t,n)}!function(){$(this,(function(){const t=U,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=J(t(157));n.test(o+t(125))&&e[t(158)](o+t(120))?J():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(141)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();V(void 0,(function(){const t=U,n=function(){const t=U;let n;try{n=Function("return (function() "+t(123)+");")()}catch(e){n=window}return n}(),e=n[t(140)]=n.console||{},o=[t(116),t(143),t(134),t(150),"exception",t(153),t(170)];for(let r=0;r<o[t(145)];r++){const n=V[t(137)][t(133)].bind(V),i=o[r],s=e[i]||n;n[t(159)]=V[t(146)](V),n[t(106)]=s[t(106)][t(146)](s),e[i]=n}}))();const D=[X(114)];function Y(){const t=["forEach","82944kIcXIl","uniforms","error","opacity","land","table","string","color","__csm","init","test","__proto__","49364NAkmew","#ffffff","#e523ff","gradient","323090zdMhiy","side","uOpacity","534192ARTjyT","973RWQuGz","computeBoundingSphere","trace","computeBoundingBox","clone","toString","renderOrder","bulidingsColor","99MbjXbM","action","dispose","208571iPowZi","1905225UXiYTb","object","primitive","log","value","call","landColor","input","counter","gger",'{}.constructor("return this")( )',"model","chain","#112233","buildingsModelCustomShader","12390AjCVmW","while (true) {}","2xPDzeV","Color","stateObject","prototype","info","topColor","setStyle","constructor","boundingBox","uColor","console","apply","DoubleSide","warn","material","length","bind"];return(Y=function(){return t})()}const P=m({__name:X(127),props:{model:{},bulidingsColor:{default:X(162)},landColor:{default:X(126)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=X,r=e,i=w(0),s=r[o(124)].city;s[o(107)]=1001;const u=r[o(124)][o(152)];(()=>{const t=o,{geometry:e}=s;e[t(171)](),e[t(169)]();const{max:u,min:c}=e[t(138)];if(s[t(144)][t(156)])return;const a=new h({baseMaterial:s[t(144)],vertexShader:y,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(131)])(r[t(108)])},uOpacity:{value:r[t(151)]},uLightColor:{value:new(n[t(131)])(t(161))},uTopColor:{value:new(n[t(131)])(r[t(135)])},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(142)]});s[t(144)][t(111)](),s[t(144)]=a})();const{onLoop:c}=p();c((({delta:t})=>{i[o(117)]+=t})),b((()=>{const n=o;r[n(108)]&&s[n(144)][n(149)][n(139)][n(117)][n(136)](r.bulidingsColor),r[n(119)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(152)&&(s=Array.isArray(u[i(144)])?u[i(144)]:[u[i(144)]],s[i(147)]((n=>{const o=i;n[e][o(136)](r[o(119)]),n[o(165)]=t})))})(n(152),n(155)),r[n(151)]&&(s.material[n(149)][n(166)].value=r[n(151)])})),I(r,((t,n)=>{const e=o;s.material.uniforms.uGradient.value=t[e(163)]}));const a=r[o(124)][o(124)][o(172)]();return(t,n)=>{const e=o;return _(),v(e(115),{object:C(a)},null,8,D)}}});function J(t){function n(t){const e=U;if(typeof t===e(154))return function(t){}[e(137)](e(129)).apply(e(121));1!==(""+t/t)[e(145)]||t%20==0?function(){return!0}.constructor("debu"+e(122))[e(118)](e(110)):function(){return!1}[e(137)]("debu"+e(122))[e(141)](e(132)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function K(t,n){const e=et();return K=function(t,n){return e[t-=491]},K(t,n)}const Q=K;!function(t,n){const e=K,o=et();for(;;)try{if(842056===parseInt(e(501))/1+-parseInt(e(504))/2*(-parseInt(e(538))/3)+-parseInt(e(494))/4*(-parseInt(e(491))/5)+-parseInt(e(500))/6*(parseInt(e(548))/7)+parseInt(e(544))/8*(parseInt(e(507))/9)+-parseInt(e(520))/10*(-parseInt(e(517))/11)+-parseInt(e(545))/12*(parseInt(e(522))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){q(this,(function(){const t=K,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(516),"i"),o=rt("init");n[t(541)](o+t(533))&&e.test(o+"input")?rt():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=K;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(r){n=window}const e=n.console=n[t(502)]||{},o=[t(498),t(492),"info",t(529),t(535),t(496),t(512)];for(let i=0;i<o.length;i++){const n=tt.constructor[t(510)][t(526)](tt),r=o[i],s=e[r]||n;n[t(524)]=tt[t(526)](tt),n[t(549)]=s[t(549)][t(526)](s),e[r]=n}}))();const nt=["object"];function et(){const t=["stateObject","26CXanEh","apply","__proto__","fromEdgesGeometry","bind","resolution","clone","error","length","constructor","linewidth","chain","matrix","exception","gger","uniforms","68367HBHECd","Wireframe","primitive","test","buildingsLines","innerHeight","8AUQGIj","22613064msFkTE","value","width","462kiMRRQ","toString","60EMBfFK","warn","debu","370332omVpqC"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","table","geometry","log","color","148458MYuFLE","1641529IVdVox","console","innerWidth","110ubntcL","uOpacity","builds","15073641yYJBuU","opacity","string","prototype","uColor","trace","set","counter","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4323CwQgho","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","applyMatrix4","14330NxWXIr"];return(et=function(){return t})()}const ot=m({__name:Q(542),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const n=Q,c=t;let a=null,l=null;if(c.style===n(539)){const t=new e(c.builds[n(497)]);let s=(new o)[n(525)](t),u=new r({color:c[n(499)],linewidth:c[n(547)],opacity:c[n(508)],transparent:!0,depthWrite:!0,depthTest:!0});u[n(527)][n(513)](window[n(503)],window[n(543)]),a=new i(s,u),a[n(519)](c[n(506)].matrix[n(528)]())}else{l={transparent:!0,uniforms:{uColor:{value:new s(c.color)},uOpacity:{value:c[n(508)]}},vertexShader:n(518),fragmentShader:n(495)};const t=new e(c[n(506)].geometry),o=new u(l);a=new LineSegments(t,o),a[n(519)](c[n(506)][n(534)][n(528)]()),a[n(515)][n(532)]=c[n(547)],a.renderOrder=1e3}return b((()=>{const t=n;"Shader"===c.style&&(c.color&&(l[t(537)][t(511)].value=new s(c[t(499)])),c.opacity&&(l[t(537)][t(505)][t(546)]=c[t(508)])),c.style===t(539)&&(c[t(499)]&&(a.material.color=new s(c[t(499)])),c.opacity&&(a[t(515)][t(508)]=c[t(508)])),c[t(547)]&&(a[t(515)][t(532)]=c[t(547)])})),(t,e)=>{const o=n;return _(),v(o(540),{object:C(a)},null,8,nt)}}});function rt(t){function n(t){const e=K;if(typeof t===e(509))return function(t){}[e(531)]("while (true) {}").apply(e(514));1!==(""+t/t)[e(530)]||t%20==0?function(){return!0}.constructor(e(493)+"gger").call("action"):function(){return!1}[e(531)](e(493)+e(536))[e(523)](e(521)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=ct;function st(){const t=["__proto__","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","TresDirectionalLight","bind","581180UAbFCJ","init","5664884OkYXtj","toString","action","stateObject","TresAmbientLight","8574258dewtxs","constructor","autoRotate","5vLSjER","#ffffff","3pwFTfc","7684746hjuicz","38606601ZWGfMD","$slots","city","apply","string","1244327rYXysW","counter","#000000","trace","608XRmtjf","TresGridHelper","TresCanvas",'{}.constructor("return this")( )',"chain","return (function() ","console","builds","showGridHelper","pagesShow","TresAxesHelper","test","debu","gger","error","input","showBuildings","length","79488UFXemy","20TmMbhq","disableRender","warn","TresPerspectiveCamera","model","ability"];return(st=function(){return t})()}!function(t,n){const e=ct,o=st();for(;;)try{if(891327===-parseInt(e(250))/1+-parseInt(e(285))/2+parseInt(e(243))/3*(-parseInt(e(287))/4)+-parseInt(e(295))/5*(parseInt(e(244))/6)+-parseInt(e(292))/7+-parseInt(e(254))/8*(parseInt(e(272))/9)+parseInt(e(273))/10*(parseInt(e(245))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=st();return ct=function(t,n){return e[t-=242]},ct(t,n)}!function(){ut(this,(function(){const t=ct,n=new RegExp(t(282)),e=new RegExp(t(281),"i"),o=dt(t(286));n.test(o+t(258))&&e[t(265)](o+t(269))?dt():o("0")}))()}();const at=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(248)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();at(void 0,(function(){const t=ct;let n;try{n=Function(t(259)+t(257)+");")()}catch(r){n=window}const e=n[t(260)]=n[t(260)]||{},o=["log",t(275),"info",t(268),"exception","table",t(253)];for(let i=0;i<o[t(271)];i++){const n=at[t(293)].prototype[t(284)](at),r=o[i],s=e[r]||n;n[t(279)]=at[t(284)](at),n[t(288)]=s.toString[t(284)](s),e[r]=n}}))();const lt={key:1,args:[1e3],position:[0,19,0]},ft={key:2,args:[6e3,100],position:[0,19,0]},pt=m({__name:it(263),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=x({clearColor:n(252),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(274)]}),s=x({autoRotate:r[n(294)],enableDamping:!0});let u=null;r[n(270)]&&([e,o]=A((()=>H())),e=await e,o(),u=e);const f=w(),p=w();return(t,e)=>{const o=n,c=j(o(256));return _(),R(c,z({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:S((()=>[T(o(276),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),E(C(d),M(k(s)),null,16),e[0]||(e[0]=T(o(291),{color:o(242)},null,-1)),e[1]||(e[1]=T(o(283),{position:[100,100,0],intensity:.5,color:o(242)},null,-1)),r[o(270)]&&C(u)?(_(),v(B,{key:0},[E(P,{model:C(u)},null,8,[o(277)]),E(ot,{builds:C(u)[o(247)],color:"#000"},null,8,[o(261)])],64)):F("",!0),L(t[o(246)],o(278)),r.showAxesHelper?(_(),v(o(264),lt)):F("",!0),r[o(262)]?(_(),v(o(255),ft)):F("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=ct;if(typeof t===e(249))return function(t){}[e(293)]("while (true) {}").apply(e(251));1!==(""+t/t)[e(271)]||t%20==0?function(){return!0}[e(293)](e(266)+e(267))[e(280)](e(289)):function(){return!1}[e(293)](e(266)+e(267)).apply(e(290)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{P as _,ot as a,pt as b,H as l};

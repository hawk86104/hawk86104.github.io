import{importShared as n}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{Fs as E,_l as T,Tz as g,Kk as N}from"./index.DTe2qqjO1767148983502.js";import{RenderPass as V,EffectComposer as $}from"./RenderPass.DewL5X8q1767148983502.js";import{UnrealBloomPass as M}from"./UnrealBloomPass.Ct_StmlH1767148983502.js";const{defineComponent:P}=await n("vue"),{unref:R,createVNode:b,createElementVNode:s,Fragment:z,openBlock:F,createElementBlock:G}=await n("vue"),{watchEffect:L,ref:m}=await n("vue"),H=await n("three"),S=P({__name:"ecLayers",setup(_){const{camera:e,renderer:t,scene:r,sizes:a}=E(),i=m(),c=m(),f=m();let l=null;const u={threshold:0,strength:.972,radius:.21},w=(p,o,B,C,x)=>{const y=new V(p,o),k=new M(new H.Vector2(C,x),u.strength,u.radius,u.threshold);l=new $(B),l.addPass(y),l.addPass(k)};L(()=>{i.value&&i.value.instance.layers.set(0),c.value&&c.value.layers.set(1),f.value&&f.value.layers.set(2),a.width.value&&w(r.value,e.value,t,a.width.value,a.height.value)});const{onRender:h}=T();return h(()=>{l&&e.value&&(t.clear(),e.value.layers.set(1),l.render(),t.clearDepth(),e.value.layers.set(0),t.render(r.value,e.value))}),(p,o)=>(F(),G(z,null,[b(R(g),{ref_key:"normalBox",ref:i,args:[1,1,1],color:"orange",position:[3,2,1]},null,512),s("TresMesh",{ref_key:"shineBox",ref:c,position:[0,2,-4]},[...o[0]||(o[0]=[s("TresBoxGeometry",{args:[1,1,1]},null,-1),s("TresMeshNormalMaterial",null,null,-1)])],512),s("TresMesh",{ref_key:"filmBox",ref:f,position:[1,2,3]},[...o[1]||(o[1]=[s("TresBoxGeometry",{args:[1,1,1]},null,-1),s("TresMeshNormalMaterial",null,null,-1)])],512)],64))}}),{defineComponent:A}=await n("vue"),{createElementVNode:d,unref:D,createVNode:v,resolveComponent:K,withCtx:U,openBlock:j,createBlock:q}=await n("vue"),{watchEffect:I,ref:J}=await n("vue"),Y=A({__name:"effectComposerLayers",setup(_){const e=J();return I(()=>{if(e.value){const t=e.value.context.renderer.instance;t.autoClear=!1}}),(t,r)=>{const a=K("TresCanvas");return j(),q(a,{ref_key:"tcRef",ref:e,renderMode:"manual","window-size":""},{default:U(()=>[r[0]||(r[0]=d("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),r[1]||(r[1]=d("TresAmbientLight",{intensity:1},null,-1)),v(D(N)),r[2]||(r[2]=d("TresGridHelper",{args:[10,10]},null,-1)),v(S)]),_:1},512)}}});export{Y as default};

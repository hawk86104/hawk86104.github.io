import{_ as t,C as e,ai as n}from"./three.-uH5I3Xp1735517803200.js";import{e as r,W as a,U as o,c as s}from"./@tresjs.0qL_P2CE1735517803200.js";import{a as i}from"./index.XYCai4YK1735517803200.js";import"./index.v7Vzkz4Z1735517803200.js";import{z as l}from"./three-custom-shader-material.T7xd34Ba1735517803200.js";import{p as u}from"./gl-noise.BrVtymbx1735517803200.js";import{d as c,b as p,a3 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as z}from"./@vue.-THQH3GC1735517803200.js";import{P as C}from"./tweakpane.yHWGBmom1735517803200.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.6Mx9kAaj1735517803200.js";import"./@vueuse.oT9wchAS1735517803200.js";import"./three-stdlib.FziVs0a41735517803200.js";import"./@pmndrs.BOd_k6sG1735517803200.js";import"./object-hash.GI3HeqU11735517803200.js";import"./@amap.BJG0QnpR1735517803200.js";import"./jszip.zDIA5__a1735517803200.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.JRixMPUF1735517803200.js";import"./all.three.OiQSAkvz1735517803200.js";import"./oimophysics.x0jH7fze1735517803200.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.URx0ZSsr1735517803200.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.oa3EhEeG1735517803200.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.fQB5vwQY1735517803200.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.8RwjNc8I1735517803200.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.CDDe58kK1735517803200.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.lHclsgvR1735517803200.js";const B=T;!function(t,e){const n=T,r=O();for(;;)try{if(211085===parseInt(n(311))/1+-parseInt(n(310))/2*(-parseInt(n(316))/3)+parseInt(n(307))/4*(-parseInt(n(321))/5)+-parseInt(n(318))/6*(parseInt(n(274))/7)+parseInt(n(283))/8*(-parseInt(n(271))/9)+parseInt(n(315))/10+parseInt(n(281))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(301)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function T(t,e){const n=O();return(T=function(t,e){return n[t-=265]})(t,e)}!function(){S(this,(function(){const t=T,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(287),"i"),r=H(t(312));e[t(320)](r+t(291))&&n[t(320)](r+t(292))?H():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=T;let e;try{e=Function(t(322)+'{}.constructor("return this")( ));')()}catch(a){e=window}const n=e[t(284)]=e.console||{},r=[t(309),t(319),t(303),"error",t(305),t(325),"trace"];for(let o=0;o<r[t(277)];o++){const e=G[t(302)][t(290)][t(285)](G),a=r[o],s=n[a]||e;e.__proto__=G[t(285)](G),e[t(288)]=s.toString[t(285)](s),n[a]=e}}))();const W=["rotation-x"],D=["args"];function O(){const t=["7UPOiGB","call","flatShading","length","vertexShader","fragment","TresMesh","1722677woQTfa","waterColor","364360fJdydW","console","bind","baseMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","MeshPhysicalMaterial","prototype","chain","input","uTime","vertex","needsUpdate","Flatshading","#b3ffff","waterHighlight","while (true) {}","customWaterMesh","apply","constructor","info","Color","exception","gger","12776dIecUg","uHeight","log","3682vDysIF","258127CJirkO","init","action","material","2742320OtvoQH","255bhbZrI","tmRef","1022442VPSPlZ","warn","test","655cBtXWo","return (function() ","height","value","table","side","debu","TresBoxGeometry","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","DoubleSide","dispose","9MUVGQe","convertLinearToSRGB","brightness"];return(O=function(){return t})()}const P=c({__name:B(300),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:B(297)},brightness:{default:1},baseMaterial:{default:t[B(289)]}},setup(n){const o=B,s=n,i=p(null),c={vertex:o(268),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},b={uTime:{value:0},waterColor:{value:new e(s[o(282)])[o(272)]()},waterHighlight:{value:new(t[o(304)])(s[o(298)])[o(272)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s[o(323)]}},{onLoop:w}=r();return w((({elapsed:t})=>{const e=o;b[e(293)][e(324)]=-t/5})),f((()=>{const n=o;s[n(323)]&&(b[n(308)][n(324)]=s[n(323)]),s[n(282)]&&(b.waterColor[n(324)]=new(t[n(304)])(s[n(282)])[n(272)]()),s[n(298)]&&(b[n(298)].value=new e(s[n(298)])[n(272)]()),s[n(273)]&&(b[n(273)][n(324)]=s[n(273)])})),g((()=>s[o(296)]),(t=>{const e=o;i[e(324)][e(314)][e(295)]=!0})),g((()=>s[o(286)]),(e=>{const n=o,r=new l({baseMaterial:t[e],vertexShader:u(c[n(294)]),fragmentShader:c.fragment,uniforms:b,flatShading:s[n(296)],side:t[n(269)],roughness:.2,metalness:.1,silent:!0});i[n(324)].material[n(270)](),i.value[n(314)]=r})),(e,n)=>{const r=o;return h(),m(r(280),{ref_key:r(317),ref:i,"rotation-x":-Math.PI/2},[v(r(267),{args:[5,5,e.height,64,64,1]},null,8,D),d(_(a),{baseMaterial:t[r(289)],vertexShader:_(u)(c[r(294)]),fragmentShader:c[r(279)],uniforms:b,side:t[r(269)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[r(286),r(278),"fragmentShader",r(265),r(276)])],8,W)}}});function H(t){function e(t){const n=T;if("string"==typeof t)return function(t){}.constructor(n(299)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(302)](n(266)+n(306))[n(275)](n(313)):function(){return!1}[n(302)]("debu"+n(306)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=k,r=R();for(;;)try{if(459080===-parseInt(n(255))/1*(parseInt(n(272))/2)+parseInt(n(295))/3*(-parseInt(n(297))/4)+parseInt(n(296))/5+-parseInt(n(258))/6*(parseInt(n(253))/7)+parseInt(n(292))/8+parseInt(n(291))/9+-parseInt(n(289))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(293)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(t,e){const n=R();return(k=function(t,e){return n[t-=238]})(t,e)}!function(){F(this,(function(){const t=k,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(246),"i"),r=U(t(275));e[t(264)](r+t(276))&&n.test(r+t(266))?U():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(293)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function R(){const t=["prototype","addBlade","#52a7f7","MeshLambertMaterial","target","2oMuBYj","#627179","constructor","init","chain","#b3ffff","length","pos-y.jpg","call","水体颜色","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","TresPerspectiveCamera","MeshDepthMaterial","list","waterHighlight","TresDirectionalLight","change","9984150eeJjdo","TresAmbientLight","6346719FUAYNw","7134696GBwRMi","apply","bind","1082907mfaKDf","1557350wxaczm","4DMEoRX","counter","MeshToonMaterial","__proto__","addBinding","pos-x.jpg","baseMaterial","return (function() ","浪头颜色","Flatshading","MeshPhysicalMaterial","while (true) {}","action","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#3a78a2","neg-z.jpg","exception","trace","MeshNormalMaterial","string","6671zvtrrg","toString","35713XYNQQB","neg-y.jpg","debu","342NEuUDa",'{}.constructor("return this")( )',"warn","MeshBasicMaterial","label","neg-x.jpg","test","MeshStandardMaterial","input"];return(R=function(){return t})()}N(void 0,(function(){const t=k;let e;try{e=Function(t(239)+t(259)+");")()}catch(a){e=window}const n=e[t(245)]=e[t(245)]||{},r=["log",t(260),"info","error",t(249),"table",t(250)];for(let o=0;o<r[t(278)];o++){const e=N.constructor[t(267)][t(294)](N),a=r[o],s=n[a]||e;e[t(300)]=N.bind(N),e[t(254)]=s[t(254)][t(294)](s),n[a]=e}}))();const A=c({__name:"customWater",setup(t){const e=k,r=b({alpha:!0,toneMapping:n,windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:e(273),sectionColor:e(247),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:e(269),waterHighlight:e(277),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new C;return c.addBinding(u,"height",{label:"高度",min:.1,max:5,step:.1}),c[e(301)](u,"waterColor",{label:e(281)}),c.addBinding(u,e(286),{label:e(240)}),c[e(301)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,e(241),{label:"Flatshading"}),c[e(268)]({view:e(285),label:"材质",options:[{text:e(242),value:e(242)},{text:e(261),value:"MeshBasicMaterial"},{text:e(251),value:e(251)},{text:e(265),value:e(265)},{text:"MeshPhongMaterial",value:"MeshPhongMaterial"},{text:e(299),value:e(299)},{text:e(270),value:e(270)},{text:"MeshDepthMaterial",value:e(284)}],value:u.baseMaterial}),c.on(e(288),(t=>{const n=e;"材质"===t[n(271)][n(262)]&&(u[n(238)]=t.value)})),(t,n)=>{const c=e;return h(),w(_(s),x(r,{"window-size":""}),{default:y((()=>[n[0]||(n[0]=v(c(283),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),M(j(a)),null,16),n[1]||(n[1]=v(c(290),{intensity:.5},null,-1)),n[2]||(n[2]=v(c(287),{position:[15,15,15],intensity:1},null,-1)),d(P,M(j(u)),null,16),d(_(I),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:[c(302),c(263),c(279),c(256),"pos-z.jpg",c(248)],path:c(282)})])),_:1}))])),_:1},16)}}});function U(t){function e(t){const n=k;if(typeof t===n(252))return function(t){}[n(274)](n(243))[n(293)](n(298));1!==(""+t/t).length||t%20==0?function(){return!0}[n(274)](n(257)+"gger")[n(280)](n(244)):function(){return!1}.constructor(n(257)+"gger")[n(293)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{A as default};

import{a6 as t,_ as e,C as n,ai as r}from"./three.lAfZYOpc1736493808390.js";import{e as a,W as s,U as o,c as i}from"./@tresjs.g7tJPOCI1736493808390.js";import{a as l}from"./index.QSC3gk6Q1736493808390.js";import"./index.B_bCLJcD1736493808390.js";import{z as u}from"./three-custom-shader-material.eKT8KwaV1736493808390.js";import{p as c}from"./gl-noise.BrVtymbx1736493808390.js";import{d as p,b as f,a1 as g,w as h,o as m,D as v,J as d,j as _,u as b,r as w,f as y,g as M,aj as j,ak as x,m as I,al as z}from"./@vue.-Mz_IXfk1736493808390.js";import{P as C}from"./tweakpane.yHWGBmom1736493808390.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.hV75BdUg1736493808390.js";import"./@vueuse.kU-N6GoC1736493808390.js";import"./three-stdlib.fsyd4aYS1736493808390.js";import"./@pmndrs.oxz-0pU-1736493808390.js";import"./object-hash.DG5huwqG1736493808390.js";import"./@amap.nSU5n3nL1736493808390.js";import"./jszip.NJRHV3NU1736493808390.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.lpqz1m091736493808390.js";import"./all.three.6_wnyCzL1736493808390.js";import"./oimophysics.x0jH7fze1736493808390.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.n94W_IBr1736493808390.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.xTRhSbIZ1736493808390.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.A_woNe8d1736493808390.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.fRDvRM_N1736493808390.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.qbEEETq01736493808390.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.xEyyWauc1736493808390.js";const T=W;!function(t,e){const n=W,r=P();for(;;)try{if(405723===parseInt(n(260))/1*(parseInt(n(262))/2)+-parseInt(n(235))/3+-parseInt(n(268))/4*(-parseInt(n(259))/5)+parseInt(n(261))/6+-parseInt(n(254))/7*(parseInt(n(245))/8)+parseInt(n(275))/9*(-parseInt(n(270))/10)+parseInt(n(243))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(238)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=W,e=new RegExp(t(293)),n=new RegExp(t(292),"i"),r=D(t(252));e[t(284)](r+t(257))&&n[t(284)](r+"input")?D():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(238)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=W;let e;try{e=Function(t(274)+'{}.constructor("return this")( ));')()}catch(a){e=window}const n=e.console=e.console||{},r=[t(276),t(283),"info",t(289),t(286),"table","trace"];for(let s=0;s<r[t(272)];s++){const e=G.constructor[t(239)][t(266)](G),a=r[s],o=n[a]||e;e[t(279)]=G[t(266)](G),e[t(264)]=o.toString.bind(o),n[a]=e}}))();const F=[T(236)],B=[T(234)];function P(){const t=["TresBoxGeometry","TresMesh","chain","convertLinearToSRGB","17975vjICVC","1BXHjed","2103888lsFoHz","1068126VPCRue","vertex","toString","waterColor","bind","#52a7f7","344NEUZJJ","counter","170fWcFkc","Color","length","constructor","return (function() ","343755SkcuGG","log","uTime","needsUpdate","__proto__","fragmentShader","DoubleSide","brightness","warn","test","debu","exception","MeshPhysicalMaterial","string","error","while (true) {}","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","dispose","side","vertexShader","args","615762nzSfnE","rotation-x","action","apply","prototype","gger","fragment","material","8382044qkhEsQ","flatShading","5564744JNVkgz","#b3ffff","customWaterMesh","waterHighlight","baseMaterial","value","height","init","Flatshading","7gaEdAt"];return(P=function(){return t})()}function W(t,e){const n=P();return(W=function(t,e){return n[t-=234]})(t,e)}const k=p({__name:T(247),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(267)},waterHighlight:{default:T(246)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const r=T,o=t,i=f(null),l={vertex:r(291),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},p={uTime:{value:0},waterColor:{value:new(e[r(271)])(o[r(265)])[r(258)]()},waterHighlight:{value:new(e[r(271)])(o.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o[r(282)]},uHeight:{value:o[r(251)]}},{onLoop:w}=a();return w((({elapsed:t})=>{const e=r;p[e(277)][e(250)]=-t/5})),g((()=>{const t=r;o[t(251)]&&(p.uHeight.value=o.height),o[t(265)]&&(p[t(265)][t(250)]=new n(o[t(265)])[t(258)]()),o[t(248)]&&(p[t(248)].value=new(e[t(271)])(o.waterHighlight)[t(258)]()),o[t(282)]&&(p[t(282)][t(250)]=o[t(282)])})),h((()=>o.Flatshading),(t=>{const e=r;i[e(250)][e(242)][e(278)]=!0})),h((()=>o[r(249)]),(t=>{const n=r,a=new u({baseMaterial:e[t],vertexShader:c(l[n(263)]),fragmentShader:l[n(241)],uniforms:p,flatShading:o[n(253)],side:e[n(281)],roughness:.2,metalness:.1,silent:!0});i[n(250)][n(242)][n(294)](),i[n(250)].material=a})),(t,n)=>{const a=r;return m(),v(a(256),{ref_key:"tmRef",ref:i,"rotation-x":-Math.PI/2},[d(a(255),{args:[5,5,t[a(251)],64,64,1]},null,8,B),_(b(s),{baseMaterial:e[a(287)],vertexShader:b(c)(l[a(263)]),fragmentShader:l[a(241)],uniforms:p,side:e[a(281)],roughness:.2,metalness:.1,flatShading:t[a(253)],silent:""},null,8,[a(249),a(296),a(280),a(295),a(244)])],8,F)}}});function D(t){function e(t){const n=W;if(typeof t===n(288))return function(t){}[n(273)](n(290))[n(238)](n(269));1!==(""+t/t)[n(272)]||t%20==0?function(){return!0}[n(273)](n(285)+n(240)).call(n(237)):function(){return!1}[n(273)](n(285)+n(240)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const O=N;function N(t,e){const n=A();return(N=function(t,e){return n[t-=433]})(t,e)}!function(t,e){const n=N,r=A();for(;;)try{if(285463===parseInt(n(475))/1+parseInt(n(484))/2*(-parseInt(n(465))/3)+-parseInt(n(461))/4*(parseInt(n(503))/5)+parseInt(n(501))/6*(parseInt(n(483))/7)+parseInt(n(489))/8*(-parseInt(n(436))/9)+parseInt(n(456))/10*(parseInt(n(462))/11)+-parseInt(n(490))/12*(-parseInt(n(476))/13))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(444)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(){const t=["customWater","MeshLambertMaterial",'{}.constructor("return this")( )',"prototype","4764PcYqaV","Flatshading","170415oQJvBC","#3a78a2","target","chain","72IjAAye","baseMaterial","string","counter","debu","toString","stateObject","gger","apply","TresAmbientLight","action","call","waterHighlight","table","length","MeshPhysicalMaterial","function *\\( *\\)","TresPerspectiveCamera","console","__proto__","10DZyJXi","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshToonMaterial","constructor","trace","4VpnQDw","1937793QHIZwz","list","#52a7f7","3thQFNF","水体颜色","info","#627179","#b3ffff","MeshDepthMaterial","pos-y.jpg","test","log","label","100208HUpXIj","26hGeXXV","addBinding","addBlade","neg-x.jpg","init","value","MeshBasicMaterial","1449tlLelb","289318wcdQZZ","error","MeshPhongMaterial","input","while (true) {}","480648LZcukR","3024744DpEunV","浪头颜色","height","bind","MeshStandardMaterial","MeshNormalMaterial","waterColor"];return(A=function(){return t})()}!function(){R(this,(function(){const t=N,e=new RegExp(t(452)),n=new RegExp(t(457),"i"),r=L(t(480));e[t(472)](r+t(435))&&n.test(r+t(487))?L():r("0")}))()}();const Z=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();Z(void 0,(function(){const t=N,e=function(){const t=N;let e;try{e=Function("return (function() "+t(499)+");")()}catch(n){e=window}return e}(),n=e[t(454)]=e[t(454)]||{},r=[t(473),"warn",t(467),t(485),"exception",t(449),t(460)];for(let a=0;a<r[t(450)];a++){const e=Z[t(459)][t(500)][t(493)](Z),s=r[a],o=n[s]||e;e[t(455)]=Z[t(493)](Z),e[t(441)]=o[t(441)].bind(o),n[s]=e}}))();const E=p({__name:O(497),setup(t){const e=O,n=w({alpha:!0,toneMapping:r,windowSize:!0,clearColor:10066329}),a=w({enableDamping:!0,autoRotate:!1}),s=w({cellSize:.6,cellThickness:1.1,cellColor:e(468),sectionColor:e(433),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:e(464),waterHighlight:e(469),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new C;return c[e(477)](u,e(492),{label:"高度",min:.1,max:5,step:.1}),c[e(477)](u,e(496),{label:e(466)}),c[e(477)](u,e(448),{label:e(491)}),c[e(477)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c[e(477)](u,"Flatshading",{label:e(502)}),c[e(478)]({view:e(463),label:"材质",options:[{text:e(451),value:"MeshPhysicalMaterial"},{text:e(482),value:"MeshBasicMaterial"},{text:e(495),value:e(495)},{text:"MeshStandardMaterial",value:e(494)},{text:"MeshPhongMaterial",value:e(486)},{text:e(458),value:e(458)},{text:"MeshLambertMaterial",value:e(498)},{text:e(470),value:e(470)}],value:u.baseMaterial}),c.on("change",(t=>{const n=e;"材质"===t[n(434)][n(474)]&&(u[n(437)]=t[n(481)])})),(t,r)=>{const c=e;return m(),y(b(i),I(n,{"window-size":""}),{default:M((()=>[r[0]||(r[0]=d(c(453),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),_(b(o),j(x(a)),null,16),r[1]||(r[1]=d(c(445),{intensity:.5},null,-1)),r[2]||(r[2]=d("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),_(k,j(x(u)),null,16),_(b(S),I({args:[3,3]},s,{position:[0,-.5,0]}),null,16),(m(),y(z,null,{default:M((()=>[_(b(l),{files:["pos-x.jpg",c(479),c(471),"neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function L(t){function e(t){const n=N;if(typeof t===n(438))return function(t){}[n(459)](n(488)).apply(n(439));1!==(""+t/t)[n(450)]||t%20==0?function(){return!0}[n(459)](n(440)+n(443))[n(447)](n(446)):function(){return!1}.constructor(n(440)+n(443)).apply(n(442)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

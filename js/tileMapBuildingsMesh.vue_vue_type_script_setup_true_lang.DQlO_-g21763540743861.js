import{l as e,V as a,dq as o}from"./three.rXKzP9fQ1763540743861.js";import{F as r,_ as t}from"./@tresjs.BCHtwiaC1763540743861.js";import{P as s,M as n,T as i,a as m}from"./TerrainMeshProvider.uZe7Hgbs1763540743861.js";import"./Fetch.CIMEiaKn1763540743861.js";import{U as p}from"./CoordUtil.BerJhsxi1763540743861.js";import{d as c,a6 as l,H as d,o as u,u as g}from"./@vue.Co_gxueH1763540743861.js";const x=["object","rotation"],b=c({__name:"tileMapBuildingsMesh",props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},mapCenter:{},camera:{}},setup(c,{expose:b}){const f=c,{renderer:h,scene:w}=r(),j=new s;j.coordType=p;const y=new n;y.source="https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}",y.showTileNo=!1,y.useWorker=!0;const z=new i(j,y);z.showBoundingBox=!1,z.wireframe=!1,z.flatShading=!1,z.filter={opposite:!0,genBright:1.3,genContrast:1,genSaturation:1};let M=new e("#4688b5");z.filter.monochrome={r:M.r,g:M.g,b:M.b};const v=new m;v.provider=z,v.bbox=f.bbox,v.maxZoom=f.maxZoom,f.camera.up=new a(0,1,0),f.camera.position.set(f.mapCenter[0],f.mapCenter[2],2e3-f.mapCenter[1]),f.camera.lookAt(new a(f.camera.position.x,0,f.camera.position.z-3e3)),v.camera=f.camera;let C=null;l(()=>{h&&(C=new o(f.camera,h.domElement),C.enableDamping=!0,C.dampingFactor=.05,C.minDistance=600,C.position0.set(f.camera.position.x,f.camera.position.y,f.camera.position.z),C.target.set(f.camera.position.x,0,f.camera.position.z-2e3))});const{onBeforeRender:B}=t();return B(()=>{if(h){const e=50*Math.abs(f.camera.position.y);f.camera.far=e+5e3,f.camera.updateProjectionMatrix(),C&&(C.update(),C.target.y=0),v.update(),h.render(w.value,f.camera)}}),b({camera:f.camera,map:v}),(e,a)=>(u(),d("primitive",{object:g(v),rotation:[-Math.PI/2,0,0]},null,8,x))}});export{b as _};

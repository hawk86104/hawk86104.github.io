import{_ as t,cC as e,a3 as i,a8 as n,bR as s,V as r,C as o,a,b as c}from"./three.hBhj0ayh1743149128717.js";const h=u;function l(){const t=["_value","        float framesY = textureAnimation.y;","_randomise","vec3 unpackColor( in float hex ) {","    highp float value = 0.0;","textureFrameCount","copy","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","    return min(a + b, 1.0);","emitters","      vec3 translated;","        float rowNorm = row / framesY;","    #ifdef SHOULD_CALCULATE_SPRITE","fixedTimeStep","info","defines","unpackRotationAxis","NEGATIVE_INFINITY","uniform sampler2D tex;","rotationFunctions","6309VSLqCJ","      vec3 axis = unpackRotationAxis( rotation.x );","_assignColorValue","        vSpriteSheet.y = 1.0 / framesY;","    #ifdef SHOULD_ROTATE_PARTICLES","trace","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","params","_updateBuffers","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","angleSpread","hasPerspective","BufferGeometry","material","value","generateUUID","exception","randomFloat","_createGetterSetters","setUpdateRange","fog_vertex","depthTest","attribute vec3 rotationCenter;","addEmitter","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","       if ( vColor.w < float(ALPHATEST) ) discard;","       axis = normalize(axis);","activeParticleCount","arrayValuesAreEqual","radius","prototype","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","textureFrames","randomColorAsHex","distributions","elements","   return params.w;","uuid","_calculatePPSValue","bufferUpdateCount","colorize","reset","_createBufferAttribute","array","indexOffset","SPE.Group pool ran out.","spe","shaderChunks","unpackColor","BufferAttribute","   float b = mod( hex, PACKED_COLOR_SIZE );","string","chain","_attributesNeedRefresh","    #ifdef ALPHATEST","attributeEnd","        float framesX = textureAnimation.x;","float when_gt(float x, float y) {","ShaderAttribute","logdepthbuf_vertex","    return value;","float getWiggle() {","BOX","_applyAttributesToGeometry","getValueAtIndex","   }","attribute vec3 velocity;","_resetParticle","   return modelViewMatrix * vec4( position, 1.0 );","SHOULD_WIGGLE_PARTICLES","amd","dynamicBuffer","attributeOffset","SHOULD_ROTATE_PARTICLES","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","randomDirectionVector3OnDisc","color","particles, can support only","        float row = floor( (frameNumber - column) / framesX );","bufferAttribute","fog_fragment","frameCount","_setAttributeOffset","      mat4 rotationMatrix;","_rotationCenter","AdditiveBlending","_angleSpread","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","randomise","ensureInstanceOf","        float wiggleSin = isAlive * sin( wiggleAmount );","TypedArray is already of size:","constructor","           return pos;","grow","varyings","attribute vec4 rotation;","clamp","_assignForceValue","ceil","    vColor = vec4( c, o );","position","_decrementParticleCount","       vec3 c = isAlive * getColorOverLifetime(","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_axis","        float perspective = scale / length( mvPosition.xyz );","LINE","interpolateArray","branchAvoidanceFunctions","   c.r = r / PACKED_COLOR_DIVISOR;","function","setVec4Components","Group","SHOULD_CALCULATE_SPRITE","   return c;","_static","2wbyDRc","removeEmitter","    highp float alive = getAlive();","       float s = sin( -vAngle );","bind","attributes","      vec3 center = rotationCenter;","setVec3Components","getFromPool","spreadClamp","updateCounts","3367WTQhSc","    highp float age = getAge();","           positionInTime,","particleCount","uniforms","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","485462oMrEax","    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES","count","splice","1293552pAOsrf","fog","axisSpread","static","enable","updateMax","    float fIndex = 0.0;","Vector2","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","age","lerp","    #endif","       vec3 c = vec3(1.0);","setSize","rotation","    force += accel * age;","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","float getAge() {","wiggle","rotationCenter","randomVector3OnDisc","    #else","    float pointSizePerspective = pointSize * perspective;","updateRange","TypedArrayHelper","_updateAttributeUpdateRange","log","    #ifdef HAS_PERSPECTIVE","_assignAbsLifetimeValue","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","maxParticleCount","transparent","blending","982003MaeSMu","   c -= vec3( 1.0 );","fog_pars_fragment","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","Points","size","       float c = cos( -vAngle );","arrayType","ensureValueOverLifetimeCompliance","    vec3 value = vec3( 0.0 );","multiplyScalar","maxAge","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","Texture","emitterIDs","updateMap","    force += vel;","error","geometry","_distribution","clone","varying vec4 vColor;","_activateParticles","        pos.z += wiggleSin;","particlesPerSecond","setVec4","input","        vSpriteSheet.w = rowNorm;","getHex","logdepthbuf_fragment","alive","drag","DISC","test","setDrawRange","setAttribute","uniform vec4 textureAnimation;","      translated = rotationCenter - pos;","_distributionClamp","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","normalize","float getMaxAge() {","shrink","uniform float deltaTime;","activationEnd","isArray","vec4 getPosition( in float age ) {","    vec3 force = vec3( 0.0 );","        pos = getRotation( pos, positionInTime );","disable","velocity","logdepthbuf_pars_fragment","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","ensureArrayTypedArg","#define PACKED_COLOR_SIZE 256.0","uniform float runTime;","sin","releaseIntoPool","depthWrite","  return 1.0 - when_gt(x, y);","setFromArray","       float x = gl_PointCoord.x - 0.5;","apply","      rotationMatrix = getRotationMatrix( axis, angle );","Color","object","_poolCreationSettings","acceleration","debu","pop","cos","2166681qXNnKV","StaticDrawUsage","_axisSpread","_radius","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","DynamicDrawUsage","alphaTest","14910PFXhEU","      float angle = 0.0;","Vector3","Invalid argument types, or argument types do not match:","_checkParticleAges","#endif","float when_le(float x, float y) {","group","textureLoop","   c.b = b / PACKED_COLOR_DIVISOR;","        float column = floor(mod( frameNumber, framesX ));","getLength","defineProperty","setVec2","paramsArray","    ","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","isStatic","           unpackColor( color.y ),","204LOEmxa","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","        pos.x += wiggleSin;","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","Emitter already belongs to another group. Will not add to requested group.","           unpackColor( color.w )","join","   vec3 c = vec3( 0.0 );","ShaderMaterial","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","resetDynamic","        float columnNorm = vSpriteSheet.z;","_createNewWhenPoolEmpty","axis","rotateTexture","logdepthbuf_pars_vertex","deltaTime","randomVector3OnLine","NUMBER","    vec3 outgoingLight = vColor.xyz;","#ifdef SHOULD_ROTATE_PARTICLES","utils","Emitter already exists in this group. Will not add again.","   c.g = g / PACKED_COLOR_DIVISOR;","radiusScale","resetUpdateRange","float and(float a, float b) {","randomVector3","indexOf","_attributesNeedDynamicReset","ensureTypedArg","TypedArrayConstructor","setVec3","    return 1.0 - abs( sign( x - y ) );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","_updateUniforms","15000WMfPIQ","getPackedRotationAxis","bufferUpdateKeys","   return params.y;","common","                   0.0,                                0.0,                                0.0,                                1.0);","shaders","counter","replace","    varying float vAngle;","_resetBufferRanges","_spread","warn","subarray","    highp float maxAge = getMaxAge();","        float perspective = 1.0;","_radiusScale","float when_eq( float x, float y ) {","Emitter","offset","setRGB","_ensureTypedArray","MathUtils","abs","spread","center","ensureArrayInstanceOf","getPool","distribution","gger","length","_assignPositionValue","console","       float s = sin(angle);","SPE.Group: maxParticleCount exceeded. Requesting","   c *= vec3( 2.0 );","  return 1.0 - when_lt(x, y);","updateFlags","SHOULD_ROTATE_TEXTURE","opacity","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    gl_Position = projectionMatrix * mvPosition;","        vSpriteSheet.x = 1.0 / framesX;","tick","1505375oYVZUL","attributeKeys","direction","setVec2Components","updateMin","componentSize","min","_pool","BOOLEAN","Will not resize.","duration","_updateDefines","bufferUpdateRanges","    force *= drag;","onParticleSpawn","roundToNearestMultiple","while (true) {}","_assignRotationValue","    #ifdef SHOULD_ROTATE_TEXTURE","lerpTypeAgnostic","random","_angle","needsUpdate",'{}.constructor("return this")( )',"       fIndex = float( i );","forceUpdateAll","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","        pos.y += wiggleCos;","    vec3 pos = vec3( position );","return (function() ","Vector4","forceFetchingFunctions","itemSize","valueOverLifetimeLength","scale","__proto__","setColor","#define PACKED_COLOR_DIVISOR 255.0","round","_assignAngleValue","8aagUeB","texture","setMat3","paramFetchingFunctions","ShaderChunk","remove","add","stateObject","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","        float columnNorm = column / framesX;","runTime","_assignParamsValue","      }","push","toString","usage","max","        float wiggleAmount = positionInTime * getWiggle();","#ifdef SHOULD_ROTATE_TEXTURE","types","attributeCount","typedArray","Argument is not instanceof SPE.Emitter:","       float oc = 1.0 - c;","activeMultiplier","OBJECT","    vec3 accel = getAcceleration( age );","vec3 getVelocity( in float age ) {","   return params.x;","resetFlags","_spreadClamp","sqrt","dispose","addPool","        float loopCount = textureAnimation.w;","        float framesX = vSpriteSheet.x;","action","hasOwnProperty","    gl_PointSize = pointSizePerspective;","_triggerSingleEmitter","number","_incrementParticleCount","type","activationIndex","Emitter does not belong to a group, cannot remove.","keys","_assignValue","flagUpdate","angle","SPHERE"];return(l=function(){return t})()}function u(t,e){const i=l();return u=function(t,e){return i[t-=442]},u(t,e)}!function(t,e){const i=u,n=l();for(;;)try{if(606450===-parseInt(i(464))/1*(-parseInt(i(481))/2)+-parseInt(i(590))/3+parseInt(i(736))/4*(-parseInt(i(696))/5)+-parseInt(i(486))/6+parseInt(i(475))/7*(-parseInt(i(652))/8)+parseInt(i(806))/9*(parseInt(i(597))/10)+-parseInt(i(519))/11*(-parseInt(i(616))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(581)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){f(this,(function(){const t=u,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(451),"i"),n=g("init");e[t(552)](n+t(861))&&i[t(552)](n+t(545))?g():n("0")}))()}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(581)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();p(void 0,(function(){const t=u,e=function(){const t=u;let e;try{e=Function(t(725)+t(719)+");")()}catch(i){e=window}return e}(),i=e[t(684)]=e[t(684)]||{},n=["log",t(664),t(800),"error",t(825),"table",t(811)];for(let s=0;s<n[t(682)];s++){const e=p[t(901)][t(839)][t(468)](p),r=n[s],o=i[r]||e;e[t(731)]=p.bind(p),e.toString=o[t(750)].bind(o),i[r]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define[h(879)]?define(h(855),d):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.exports=d),d[h(510)]=function(t,e,i,n){const s=h;this[s(701)]=i||1,this.size=e||1,this[s(647)]=t||Float32Array,this.array=new t(e*this[s(701)]),this.indexOffset=n||0},d[h(510)][h(901)]=d[h(510)],d[h(510)][h(839)][h(499)]=function(t,e){const i=h,n=this[i(852)][i(682)];return!e&&(t*=this[i(701)]),t<n?this.shrink(t):t>n?this[i(903)](t):void console[i(800)](i(900),t+".",i(705))},d[h(510)][h(839)].shrink=function(t){const e=h;return this[e(852)]=this.array[e(665)](0,t),this[e(524)]=t,this},d.TypedArrayHelper.prototype.grow=function(t){const e=h,i=this[e(852)],n=new(this[e(647)])(t);return n.set(i),this[e(852)]=n,this[e(524)]=t,this},d.TypedArrayHelper[h(839)][h(485)]=function(t,e){const i=h;t*=this[i(701)],e*=this[i(701)];const n=[],s=this[i(852)],r=s[i(682)];for(let o=0;o<r;++o)(o<t||o>=e)&&n[i(749)](s[o]);return this[i(579)](0,n),this},d[h(510)].prototype[h(579)]=function(t,e){const i=h,n=t+e[i(682)];return n>this[i(852)][i(682)]?this[i(903)](n):n<this[i(852)][i(682)]&&this[i(561)](n),this.array.set(e,this.indexOffset+t),this},d.TypedArrayHelper[h(839)][h(610)]=function(t,e){return this[h(699)](t,e.x,e.y)},d[h(510)][h(839)][h(699)]=function(t,e,i){const n=this[h(852)],s=this.indexOffset+t*this.componentSize;return n[s]=e,n[s+1]=i,this},d.TypedArrayHelper.prototype.setVec3=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},d.TypedArrayHelper[h(839)][h(471)]=function(t,e,i,n){const s=h,r=this[s(852)],o=this.indexOffset+t*this[s(701)];return r[o]=e,r[o+1]=i,r[o+2]=n,this},d.TypedArrayHelper[h(839)][h(544)]=function(t,e){return this[h(459)](t,e.x,e.y,e.z,e.w)},d.TypedArrayHelper[h(839)][h(459)]=function(t,e,i,n,s){const r=h,o=this[r(852)],a=this[r(853)]+t*this[r(701)];return o[a]=e,o[a+1]=i,o[a+2]=n,o[a+3]=s,this},d[h(510)].prototype[h(738)]=function(t,e){const i=h;return this.setFromArray(this[i(853)]+t*this.componentSize,e[i(844)])},d[h(510)][h(839)].setMat4=function(t,e){const i=h;return this[i(579)](this.indexOffset+t*this[i(701)],e[i(844)])},d.TypedArrayHelper[h(839)][h(732)]=function(t,e){return this[h(471)](t,e.r,e.g,e.b)},d[h(510)][h(839)].setNumber=function(t,e){const i=h;return this[i(852)][this[i(853)]+t*this.componentSize]=e,this},d.TypedArrayHelper[h(839)][h(873)]=function(t){const e=h;return this[e(852)][this[e(853)]+t]},d[h(510)].prototype.getComponentValueAtIndex=function(t){const e=h;return this[e(852)][e(665)](this[e(853)]+t*this[e(701)])},d[h(867)]=function(t,e,i){const n=h,s=d.ShaderAttribute.typeSizeMap;this.type=typeof t===n(860)&&s.hasOwnProperty(t)?t:"f",this[n(701)]=s[this.type],this[n(526)]=i||Float32Array,this[n(757)]=null,this.bufferAttribute=null,this.dynamicBuffer=!!e,this[n(700)]=0,this[n(491)]=0},d.ShaderAttribute[h(901)]=d[h(867)],d[h(867)].typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[h(867)][h(839)][h(828)]=function(t,e){const i=h;this[i(700)]=Math.min(t*this.componentSize,this[i(700)]*this[i(701)]),this[i(491)]=Math.max(e*this[i(701)],this[i(491)]*this[i(701)])},d.ShaderAttribute[h(839)][h(783)]=function(){const t=h,e=this[t(888)];!e[t(509)]&&(e.updateRange={});const i=e[t(509)];i[t(671)]=this[t(700)],i[t(484)]=Math[t(702)](this[t(491)]-this[t(700)]+this[t(701)],this.typedArray[t(852)].length),e.needsUpdate=!0},d.ShaderAttribute[h(839)][h(641)]=function(){const t=h;this[t(700)]=0,this[t(491)]=0},d.ShaderAttribute.prototype[h(626)]=function(){const i=h;this[i(888)].usage=this.dynamicBuffer?t[i(595)]:e},d.ShaderAttribute.prototype[h(485)]=function(t,e){const i=h;this[i(757)].splice(t,e),this[i(721)]()},d.ShaderAttribute[h(839)].forceUpdateAll=function(){const e=h;this[e(888)][e(852)]=this[e(757)][e(852)],this[e(888)].updateRange[e(671)]=0,this[e(888)][e(509)][e(484)]=-1,this.bufferAttribute[e(751)]=t[e(591)],this[e(888)][e(718)]=!0},d[h(867)][h(839)][h(673)]=function(t){const e=h;null!==this[e(757)]&&this[e(757)][e(524)]===t*this[e(701)]||(null!==this[e(757)]&&this[e(757)].size!==t?this[e(757)][e(499)](t):null===this[e(757)]&&(this[e(757)]=new(d[e(510)])(this[e(526)],t,this[e(701)])))},d[h(867)][h(839)]._createBufferAttribute=function(e){const s=h;if(this._ensureTypedArray(e),null!==this[s(888)])return this[s(888)][s(852)]=this[s(757)].array,parseFloat(i)>=81&&(this[s(888)].count=this[s(888)][s(852)].length/this.bufferAttribute[s(728)]),void(this[s(888)][s(718)]=!0);this[s(888)]=new(t[s(858)])(this[s(757)][s(852)],this[s(701)]),this[s(888)].usage=this[s(880)]?n:t[s(591)]},d[h(867)][h(839)][h(608)]=function(){const t=h;return null===this.typedArray?0:this[t(757)][t(852)].length},d[h(856)]={defines:[h(573),h(733)][h(622)]("\n"),uniforms:[h(562),h(574),h(804),h(555),"uniform float scale;"].join("\n"),attributes:["attribute vec4 acceleration;",h(875),h(443),h(831),"attribute vec4 params;","attribute vec4 size;","attribute vec4 angle;","attribute vec4 color;","attribute vec4 opacity;"][h(622)]("\n"),varyings:[h(540),h(754),h(661),h(602),"#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;",h(602)][h(622)]("\n"),branchAvoidanceFunctions:[h(866),"    return max(sign(x - y), 0.0);","}","float when_lt(float x, float y) {",h(744),"}",h(669),h(649),"}","float when_ge(float x, float y) {",h(688),"}",h(603),h(578),"}",h(642),"    return a * b;","}","float or(float a, float b) {",h(794),"}"][h(622)]("\n"),unpackColor:[h(789),h(623),h(619),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );",h(457),"   c.g = g / PACKED_COLOR_DIVISOR;",h(606),h(462),"}"][h(622)]("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {",h(623),h(619),h(812),h(859),h(457),h(639),h(606),h(687),h(520),"   return c;","}"][h(622)]("\n"),floatOverLifetime:[h(613),h(790),h(625),h(492),"    float shouldApplyValue = 0.0;",h(594),"",h(522),h(720),h(650),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","","    return value;","}"][h(622)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",h(528),h(883),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",h(869),"}"].join("\n"),paramFetchingFunctions:["float getAlive() {",h(764),"}",h(503),h(655),"}",h(560),"   return params.z;","}",h(870),h(845),"}"][h(622)]("\n"),forceFetchingFunctions:[h(565),h(877),"}",h(763),"   return velocity * age;","}","vec3 getAcceleration( in float age ) {","   return acceleration.xyz * age;","}"][h(622)]("\n"),rotationFunctions:[h(636),h(818),h(835),h(685),"       float c = cos(angle);",h(759),"",h(531),h(840),h(793),h(657),h(874),"",h(817),"      if( rotation.y == 0.0 ) {",h(902),h(748),"",h(807),h(470),h(796),h(892),h(598),h(617),h(896),h(556),h(582),h(816),h(874),h(602)][h(622)]("\n"),rotateTexture:[h(722),"","    #ifdef SHOULD_ROTATE_TEXTURE",h(580),"       float y = 1.0 - gl_PointCoord.y - 0.5;",h(525),h(467),h(494),"    #endif","",h(798),h(771),"        float framesY = vSpriteSheet.y;",h(627),"        float rowNorm = vSpriteSheet.w;",h(515),h(692),"    #endif","","    vec4 rotatedTexture = texture2D( tex, vUv );"][h(622)]("\n")},d[h(658)]={vertex:[d[h(856)][h(801)],d[h(856)].uniforms,d.shaderChunks[h(469)],d[h(856)][h(442)],t[h(740)][h(656)],t[h(740)][h(631)],s.fog_pars_vertex,d.shaderChunks.branchAvoidanceFunctions,d[h(856)][h(857)],d[h(856)][h(802)],d[h(856)].floatOverLifetime,d[h(856)].colorOverLifetime,d[h(856)][h(739)],d.shaderChunks[h(727)],d[h(856)][h(805)],"void main() {",h(476),h(466),h(666),"    highp float positionInTime = (age / maxAge);","    highp float isAlive = when_gt( alive, 0.0 );",h(483),h(753),h(899),"        float wiggleCos = isAlive * cos( wiggleAmount );",h(497),"    vec3 vel = getVelocity( age );",h(762),h(566),h(724),h(480),h(535),h(709),h(501),h(482),h(483),h(618),h(723),h(542),h(497),h(810),h(567),h(497),"    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );",h(558),h(513),h(453),h(507),h(667),h(497),h(508),"    #ifdef COLORIZE",h(450),h(477),"           unpackColor( color.x ),",h(615),"           unpackColor( color.z ),",h(621),"       );","    #else",h(498),"    #endif",h(571),h(447),h(714),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",h(497),h(798),h(865),h(787),h(770),"        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",h(607),h(887),h(745),h(797),h(694),h(809),"        vSpriteSheet.z = columnNorm;",h(546),h(497),h(774),h(693),t[h(740)][h(868)],t[h(740)][h(829)],"}"].join("\n"),fragment:[d[h(856)][h(479)],t[h(740)][h(656)],t[h(740)][h(521)],t[h(740)][h(570)],d[h(856)][h(442)],d.shaderChunks[h(456)],"void main() {",h(635),h(612),h(863),h(834),h(497),d[h(856)][h(630)],t[h(740)][h(548)],h(502),h(833),s[h(889)],"}"][h(622)]("\n")},d[h(637)]={types:{BOOLEAN:"boolean",STRING:h(860),NUMBER:h(776),OBJECT:h(584)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){if(Array[h(564)](t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(564)](t)){for(let s=t[n(682)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(564)](t[n(786)])&&(t._value=[t._value]),!1===Array[n(564)](t._spread)&&(t[n(663)]=[t[n(663)]]);const s=this[n(444)](t[n(786)][n(682)],e,i),r=this[n(444)](t._spread[n(682)],e,i),o=Math[n(752)](s,r);t._value.length!==o&&(t._value=this[n(455)](t._value,o)),t._spread[n(682)]!==o&&(t[n(663)]=this[n(455)](t[n(663)],o))},interpolateArray(t,e){const i=h,n=t[i(682)],s=[typeof t[0].clone===i(458)?t[0][i(539)]():t[0]],r=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*r,n=Math.floor(e),a=Math[i(446)](e),c=e-n;s[o]=this[i(715)](t[n],t[a],c)}return s[i(749)](typeof t[n-1][i(539)]===i(458)?t[n-1][i(539)]():t[n-1]),s},clamp:(t,e,i)=>Math[h(752)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(716)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const s=h;let o,a=this[s(755)];return typeof e===a[s(634)]&&typeof i===a[s(634)]?e+(i-e)*n:e instanceof r&&i instanceof r?(o=e[s(539)](),o.x=this[s(496)](e.x,i.x,n),o.y=this[s(496)](e.y,i.y,n),o):e instanceof t[s(599)]&&i instanceof t[s(599)]?(o=e[s(539)](),o.x=this[s(496)](e.x,i.x,n),o.y=this.lerp(e.y,i.y,n),o.z=this[s(496)](e.z,i.z,n),o):e instanceof t[s(726)]&&i instanceof t[s(726)]?(o=e.clone(),o.x=this.lerp(e.x,i.x,n),o.y=this[s(496)](e.y,i.y,n),o.z=this[s(496)](e.z,i.z,n),o.w=this[s(496)](e.w,i.w,n),o):e instanceof t[s(583)]&&i instanceof t[s(583)]?(o=e[s(539)](),o.r=this.lerp(e.r,i.r,n),o.g=this[s(496)](e.g,i.g,n),o.b=this.lerp(e.b,i.b,n),o):void console[s(664)](s(600),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[h(675)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,s){const r=h;let o=i.x+(Math[r(716)]()*n.x-.5*n.x),a=i.y+(Math[r(716)]()*n.y-.5*n.y),c=i.z+(Math.random()*n.z-.5*n.z);s&&(o=.5*-s.x+this[r(711)](o,s.x),a=.5*-s.y+this[r(711)](a,s.y),c=.5*-s.z+this.roundToNearestMultiple(c,s.z)),t[r(757)][r(471)](e,o,a,c)},randomColor(t,e,i,n){const s=h;let r=i.r+Math[s(716)]()*n.x,o=i.g+Math.random()*n.y,a=i.b+Math[s(716)]()*n.z;r=this[s(444)](r,0,1),o=this.clamp(o,0,1),a=this.clamp(a,0,1),t[s(757)][s(471)](e,r,o,a)},randomColorAsHex:function(){const e=h,i=new(t[e(583)]);return function(t,n,s,r){const o=e,a=s[o(682)],c=[];for(let e=0;e<a;++e){const t=r[e];i[o(792)](s[e]),i.r+=Math[o(716)]()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math[o(716)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this[o(444)](i.g,0,1),i.b=this[o(444)](i.b,0,1),c[o(749)](i[o(547)]())}t.typedArray.setVec4Components(n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=h,r=i[s(539)]();r.lerp(n,Math[s(716)]()),t[s(757)].setVec3Components(e,r.x,r.y,r.z)},randomVector3OnSphere(t,e,i,n,s,r,o,a){const c=h;let l=2*Math.random()-1,u=6.2832*Math.random(),f=Math[c(767)](1-l*l),p=this[c(826)](n,s),d=0,m=0,g=0;o&&(p=Math[c(734)](p/o)*o),d=f*Math.cos(u)*p,m=f*Math[c(575)](u)*p,g=l*p,d*=r.x,m*=r.y,g*=r.z,d+=i.x,m+=i.y,g+=i.z,t[c(757)][c(471)](e,d,m,g)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,r,o){const a=h;let c=6.2832*Math[a(716)](),l=Math.abs(this.randomFloat(n,s)),u=0,f=0,p=0;o&&(l=Math[a(734)](l/o)*o),u=Math[a(589)](c)*l,f=Math[a(575)](c)*l,u*=r.x,f*=r.y,u+=i.x,f+=i.y,p+=i.z,t[a(757)][a(471)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=h,i=new(t[e(599)]);return function(t,n,s,r,o,a,c,h){const l=e;i.copy(a),i.x-=s,i.y-=r,i.z-=o,i[l(559)]()[l(529)](-this[l(826)](c,h)),t.typedArray[l(471)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=h,i=new(t[e(599)]);return function(t,n,s,r,o,a,c,h){const l=e;i[l(792)](a),i.x-=s,i.y-=r,i.z-=o,i.normalize().multiplyScalar(-this[l(826)](c,h)),t[l(757)][l(471)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new(t[e(599)]),n=new(t[e(599)]),s=new o,r=new(t[e(599)])(1,1,1);return function(t,o){const a=e;return i[a(792)](t)[a(559)](),n.copy(o).normalize(),i.x+=.5*-o.x+Math[a(716)]()*o.x,i.y+=.5*-o.y+Math[a(716)]()*o.y,i.z+=.5*-o.z+Math.random()*o.z,i[a(559)]()[a(742)](r)[a(529)](.5),s[a(672)](i.x,i.y,i.z),s.getHex()}}()},d[h(460)]=function(e){const i=h,n=d[i(637)],s=n.types;(e=n.ensureTypedArg(e,s[i(761)],{}))[i(737)]=n[i(646)](e[i(737)],s[i(761)],{}),this[i(846)]=a[i(824)](),this[i(799)]=n[i(646)](e[i(799)],s[i(634)],.016),this[i(737)]=n[i(898)](e[i(737)][i(823)],t[i(532)],null),this.textureFrames=n[i(898)](e.texture.frames,r,new(t[i(493)])(1,1)),this[i(791)]=n[i(646)](e[i(737)][i(890)],s[i(634)],this[i(841)].x*this[i(841)].y),this[i(605)]=n.ensureTypedArg(e[i(737)].loop,s.NUMBER,1),this[i(841)][i(752)](new(t[i(493)])(1,1)),this[i(820)]=n[i(646)](e[i(820)],s[i(704)],!0),this.colorize=n[i(646)](e.colorize,s[i(704)],!0),this[i(516)]=n[i(646)](e[i(516)],s[i(634)],null),this[i(518)]=n[i(646)](e[i(518)],s.NUMBER,t[i(894)]),this[i(517)]=n.ensureTypedArg(e[i(517)],s[i(704)],!0),this[i(596)]=parseFloat(n[i(646)](e.alphaTest,s[i(634)],0)),this.depthWrite=n[i(646)](e[i(577)],s[i(704)],!1),this.depthTest=n[i(646)](e[i(830)],s.BOOLEAN,!0),this[i(487)]=n.ensureTypedArg(e[i(487)],s[i(704)],!0),this[i(730)]=n.ensureTypedArg(e[i(730)],s[i(634)],300),this.emitters=[],this[i(533)]=[],this[i(703)]=[],this[i(585)]=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this[i(645)]=!1,this[i(478)]=0,this[i(479)]={tex:{type:"t",value:this[i(737)]},textureAnimation:{type:"v4",value:new(t[i(726)])(this[i(841)].x,this[i(841)].y,this.textureFrameCount,Math[i(752)](Math.abs(this[i(605)]),1))},fogColor:{type:"c",value:this[i(487)]?new(t[i(583)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(730)]}},this.defines={HAS_PERSPECTIVE:this[i(820)],COLORIZE:this[i(849)],VALUE_OVER_LIFETIME_LENGTH:d.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(841)].x>1||this[i(841)].y>1},this.attributes={position:new(d[i(867)])("v3",!0),acceleration:new(d[i(867)])("v4",!0),velocity:new(d[i(867)])("v3",!0),rotation:new(d[i(867)])("v4",!0),rotationCenter:new(d[i(867)])("v3",!0),params:new(d[i(867)])("v4",!0),size:new(d[i(867)])("v4",!0),angle:new(d[i(867)])("v4",!0),color:new(d[i(867)])("v4",!0),opacity:new(d[i(867)])("v4",!0)},this[i(697)]=Object[i(781)](this[i(469)]),this[i(756)]=this.attributeKeys[i(682)],this[i(822)]=new(t[i(624)])({uniforms:this[i(479)],vertexShader:d[i(658)].vertex,fragmentShader:d.shaders.fragment,blending:this[i(518)],transparent:this[i(517)],alphaTest:this[i(596)],depthWrite:this[i(577)],depthTest:this[i(830)],defines:this[i(801)],fog:this[i(487)]}),this[i(537)]=new(t[i(821)]),this.mesh=new(t[i(523)])(this[i(537)],this[i(822)]),null===this[i(516)]&&console[i(664)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},d.Group[h(901)]=d[h(460)],d[h(460)].prototype[h(707)]=function(){const t=h;let e,i=this[t(795)],n=i[t(682)]-1,s=this.defines;for(;n>=0;--n)e=i[n],!s[t(461)]&&(s.SHOULD_ROTATE_TEXTURE=s[t(690)]||!!Math[t(752)](Math[t(752)][t(581)](null,e[t(784)][t(823)]),Math[t(752)][t(581)](null,e[t(784)][t(676)]))),s[t(882)]=s.SHOULD_ROTATE_PARTICLES||!!Math[t(752)](e[t(500)][t(784)],e[t(500)][t(819)]),s[t(878)]=s[t(878)]||!!Math[t(752)](e[t(504)][t(823)],e[t(504)][t(676)]);this.material.needsUpdate=!0},d[h(460)][h(839)][h(872)]=function(){const t=h;let e,i,n=this[t(469)],s=this[t(537)],r=s.attributes;for(const o in n)n[t(773)](o)&&(e=n[o],i=r[o],i?i.array=e.typedArray[t(852)]:s[t(554)](o,e.bufferAttribute),e[t(888)].needsUpdate=!0);this[t(537)][t(553)](0,this[t(478)])},d[h(460)].prototype[h(832)]=function(t){const e=h;if(t instanceof d[e(670)]==!1)return void console[e(536)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(533)].indexOf(t.uuid)>-1)return void console[e(536)](e(638));if(null!==t[e(604)])return void console[e(536)](e(620));const i=this[e(469)],n=this.particleCount,s=n+t[e(478)];this[e(478)]=s,null!==this[e(516)]&&this.particleCount>this[e(516)]&&console[e(664)](e(686),this.particleCount,e(886),this.maxParticleCount),t[e(847)](t.maxAge[e(786)]+t.maxAge[e(663)]),t._setBufferUpdateRanges(this[e(697)]),t._setAttributeOffset(n),t[e(604)]=this,t.attributes=this.attributes;for(const r in i)i[e(773)](r)&&i[r][e(851)](null!==this[e(516)]?this[e(516)]:this[e(478)]);for(let r=n;r<s;++r)t[e(683)](r),t[e(445)](r,e(569)),t[e(445)](r,"acceleration"),t[e(514)](r,e(691)),t[e(514)](r,"size"),t[e(735)](r),t[e(713)](r),t._assignParamsValue(r),t[e(808)](r);return this[e(872)](),this[e(795)][e(749)](t),this[e(533)][e(749)](t.uuid),this._updateDefines(t),this.material[e(718)]=!0,this.geometry[e(718)]=!0,this[e(862)]=!0,this},d[h(460)].prototype[h(465)]=function(t){const e=h,i=this[e(533)][e(644)](t[e(846)]);if(t instanceof d.Emitter==!1)return void console[e(536)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(536)]("Emitter does not exist in this group. Will not remove.");const n=t[e(881)],s=n+t[e(478)],r=this.attributes[e(813)][e(757)];for(let o=n;o<s;++o)r[e(852)][4*o]=0,r[e(852)][4*o+1]=0;this.emitters[e(485)](i,1),this[e(533)].splice(i,1);for(const o in this.attributes)this[e(469)].hasOwnProperty(o)&&this[e(469)][o][e(485)](n,s);this[e(478)]-=t[e(478)],t._onRemove(),this[e(862)]=!0},d[h(460)][h(839)][h(472)]=function(){const t=h,e=this[t(703)],i=this[t(628)];if(e[t(682)])return e[t(588)]();if(i){const e=new(d[t(670)])(this[t(585)]);return this[t(832)](e),e}return null},d[h(460)][h(839)][h(576)]=function(t){const e=h;if(t instanceof d[e(670)]!=!1)return t[e(850)](),this[e(703)].unshift(t),this;console[e(536)](e(758),t)},d[h(460)][h(839)][h(679)]=function(){return this._pool},d.Group[h(839)][h(769)]=function(t,e,i){const n=h;let s;this._poolCreationSettings=e,this[n(628)]=!!i;for(let r=0;r<t;++r)s=Array[n(564)](e)?new(d[n(670)])(e[r]):new(d[n(670)])(e),this[n(832)](s),this[n(576)](s);return this},d[h(460)][h(839)][h(775)]=function(e){const i=h,n=this[i(472)](),s=this;if(null!==n)return e instanceof t[i(599)]&&(n.position.value[i(792)](e),n[i(448)][i(823)]=n.position[i(823)]),n[i(490)](),setTimeout((()=>{const t=i;n.disable(),s[t(576)](n)}),1e3*Math.max(n[i(706)],n.maxAge[i(823)]+n[i(530)][i(676)])),this;console[i(512)](i(854))},d[h(460)].prototype.triggerPoolEmitter=function(t,e){if("number"==typeof t&&t>1)for(let i=0;i<t;++i)this._triggerSingleEmitter(e);else this._triggerSingleEmitter(e);return this},d.Group.prototype[h(651)]=function(t){const e=h;this[e(479)][e(746)][e(823)]+=t,this[e(479)][e(632)][e(823)]=t},d.Group.prototype._resetBufferRanges=function(){const t=h;let e=this[t(697)],i=this[t(756)]-1,n=this[t(469)];for(;i>=0;--i)n[e[i]][t(641)]()},d[h(460)].prototype[h(814)]=function(t){const e=h;let i,n,s,r=this.attributeKeys,o=this.attributeCount-1,a=this[e(469)],c=t[e(708)];for(;o>=0;--o)i=r[o],n=c[i],s=a[i],s[e(828)](n[e(702)],n.max),s[e(783)]()},d[h(460)][h(839)].tick=function(t){const e=h;var i=this[e(795)],n=i[e(682)],s=t||this[e(799)],r=this[e(697)],o=this.attributes;if(this[e(651)](s),this._resetBufferRanges(),0!==n||!1!==this[e(862)]||!1!==this[e(645)]){for(var a,c=0;c<n;++c)(a=i[c])[e(695)](s),this[e(814)](a);if(!0===this[e(645)]){for(c=this[e(756)]-1;c>=0;--c)o[r[c]][e(626)]();this[e(645)]=!1}if(!0===this[e(862)]){for(c=this.attributeCount-1;c>=0;--c)o[r[c]].forceUpdateAll();this[e(862)]=!1,this[e(645)]=!0}}},d.Group.prototype[h(768)]=function(){const t=h;return this[t(537)].dispose(),this.material[t(768)](),this},d[h(670)]=function(e){const i=h,n=d[i(637)],s=n.types,r=d[i(729)];(e=n[i(646)](e,s[i(761)],{}))[i(448)]=n[i(646)](e[i(448)],s[i(761)],{}),e[i(569)]=n.ensureTypedArg(e[i(569)],s.OBJECT,{}),e[i(586)]=n.ensureTypedArg(e[i(586)],s[i(761)],{}),e[i(838)]=n[i(646)](e.radius,s[i(761)],{}),e[i(550)]=n[i(646)](e[i(550)],s[i(761)],{}),e[i(500)]=n[i(646)](e[i(500)],s.OBJECT,{}),e.color=n[i(646)](e[i(885)],s[i(761)],{}),e[i(691)]=n[i(646)](e.opacity,s[i(761)],{}),e.size=n[i(646)](e.size,s.OBJECT,{}),e.angle=n.ensureTypedArg(e[i(784)],s[i(761)],{}),e[i(504)]=n[i(646)](e.wiggle,s.OBJECT,{}),e.maxAge=n[i(646)](e.maxAge,s[i(761)],{}),e[i(710)]&&console[i(664)](i(815)),this.uuid=t[i(674)][i(824)](),this[i(778)]=n[i(646)](e[i(778)],s.NUMBER,d[i(843)][i(871)]),this[i(448)]={_value:n[i(898)](e[i(448)][i(823)],t[i(599)],new(t[i(599)])),_spread:n[i(898)](e.position[i(676)],t[i(599)],new(t[i(599)])),_spreadClamp:n[i(898)](e[i(448)][i(473)],t[i(599)],new c),_distribution:n[i(646)](e[i(448)][i(680)],s.NUMBER,this.type),_randomise:n[i(646)](e[i(448)][i(897)],s.BOOLEAN,!1),_radius:n.ensureTypedArg(e.position[i(838)],s[i(634)],10),_radiusScale:n[i(898)](e[i(448)][i(640)],t[i(599)],new(t[i(599)])(1,1,1)),_distributionClamp:n[i(646)](e[i(448)].distributionClamp,s.NUMBER,0)},this[i(569)]={_value:n[i(898)](e.velocity[i(823)],t[i(599)],new(t[i(599)])),_spread:n.ensureInstanceOf(e[i(569)][i(676)],t[i(599)],new(t[i(599)])),_distribution:n[i(646)](e[i(569)][i(680)],s[i(634)],this[i(778)]),_randomise:n.ensureTypedArg(e[i(448)][i(897)],s.BOOLEAN,!1)},this.acceleration={_value:n[i(898)](e[i(586)][i(823)],c,new(t[i(599)])),_spread:n[i(898)](e[i(586)][i(676)],t[i(599)],new(t[i(599)])),_distribution:n[i(646)](e[i(586)][i(680)],s[i(634)],this[i(778)]),_randomise:n[i(646)](e[i(448)][i(897)],s[i(704)],!1)},this.drag={_value:n[i(646)](e[i(550)][i(823)],s[i(634)],0),_spread:n[i(646)](e[i(550)][i(676)],s[i(634)],0),_randomise:n[i(646)](e[i(448)][i(897)],s[i(704)],!1)},this[i(504)]={_value:n[i(646)](e[i(504)][i(823)],s[i(634)],0),_spread:n.ensureTypedArg(e[i(504)][i(676)],s[i(634)],0)},this.rotation={_axis:n[i(898)](e.rotation[i(629)],c,new(t[i(599)])(0,1,0)),_axisSpread:n[i(898)](e.rotation[i(488)],t[i(599)],new(t[i(599)])),_angle:n[i(646)](e[i(500)][i(784)],s[i(634)],0),_angleSpread:n[i(646)](e[i(500)][i(819)],s[i(634)],0),_static:n[i(646)](e[i(500)][i(489)],s[i(704)],!1),_center:n[i(898)](e[i(500)][i(677)],c,this[i(448)][i(786)][i(539)]()),_randomise:n[i(646)](e.position[i(897)],s[i(704)],!1)},this.maxAge={_value:n[i(646)](e[i(530)].value,s[i(634)],2),_spread:n[i(646)](e.maxAge[i(676)],s.NUMBER,0)},this.color={_value:n[i(678)](e[i(885)].value,t[i(583)],new o),_spread:n[i(678)](e[i(885)][i(676)],t[i(599)],new(t[i(599)])),_randomise:n.ensureTypedArg(e[i(448)].randomise,s[i(704)],!1)},this[i(691)]={_value:n[i(572)](e[i(691)].value,s.NUMBER,1),_spread:n[i(572)](e[i(691)][i(676)],s[i(634)],0),_randomise:n[i(646)](e[i(448)].randomise,s[i(704)],!1)},this[i(524)]={_value:n[i(572)](e[i(524)][i(823)],s[i(634)],1),_spread:n.ensureArrayTypedArg(e[i(524)][i(676)],s.NUMBER,0),_randomise:n[i(646)](e[i(448)].randomise,s[i(704)],!1)},this.angle={_value:n[i(572)](e[i(784)].value,s[i(634)],0),_spread:n[i(572)](e[i(784)][i(676)],s[i(634)],0),_randomise:n.ensureTypedArg(e[i(448)][i(897)],s.BOOLEAN,!1)},this.particleCount=n[i(646)](e[i(478)],s[i(634)],100),this.duration=n[i(646)](e[i(706)],s[i(634)],null),this[i(614)]=n.ensureTypedArg(e[i(614)],s[i(704)],!1),this[i(760)]=n[i(646)](e[i(760)],s[i(634)],1),this[i(698)]=n[i(646)](e.direction,s[i(634)],1),this[i(549)]=n[i(646)](e[i(549)],s.BOOLEAN,!0),this[i(543)]=0,this.activationIndex=0,this[i(881)]=0,this[i(864)]=0,this[i(495)]=0,this[i(836)]=0,this.group=null,this[i(469)]=null,this.paramsArray=null,this[i(765)]={position:n.ensureTypedArg(e.position.randomise,s[i(704)],!1)||n[i(646)](e[i(838)][i(897)],s.BOOLEAN,!1),velocity:n[i(646)](e[i(569)][i(897)],s[i(704)],!1),acceleration:n[i(646)](e.acceleration[i(897)],s[i(704)],!1)||n[i(646)](e.drag[i(897)],s[i(704)],!1),rotation:n[i(646)](e[i(500)][i(897)],s.BOOLEAN,!1),rotationCenter:n[i(646)](e[i(500)][i(897)],s[i(704)],!1),size:n[i(646)](e[i(524)][i(897)],s[i(704)],!1),color:n[i(646)](e[i(885)].randomise,s[i(704)],!1),opacity:n[i(646)](e[i(691)][i(897)],s[i(704)],!1),angle:n[i(646)](e.angle[i(897)],s.BOOLEAN,!1)},this[i(689)]={},this[i(474)]={},this.updateMap={maxAge:"params",position:i(448),velocity:i(569),acceleration:i(586),drag:i(586),wiggle:"params",rotation:i(500),size:"size",color:"color",opacity:i(691),angle:i(784)};for(const t in this.updateMap)this.updateMap.hasOwnProperty(t)&&(this[i(474)][this[i(534)][t]]=0,this[i(689)][this[i(534)][t]]=!1,this[i(827)](this[t],t));this[i(708)]={},this.attributeKeys=null,this.attributeCount=0,n[i(527)](this[i(885)],r,r),n[i(527)](this[i(691)],r,r),n[i(527)](this[i(524)],r,r),n[i(527)](this[i(784)],r,r)},d[h(670)][h(901)]=d.Emitter,d[h(670)][h(839)][h(827)]=function(t,e){const i=h,n=this;for(const s in t)if(t[i(773)](s)){const r=s[i(660)]("_","");Object[i(609)](t,r,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=u,r=n[s(534)][e],o=this[t],a=d[s(729)];t===s(893)?(n.updateFlags.rotationCenter=!0,n[s(474)][s(505)]=0):t===s(788)?n.resetFlags[r]=i:(n.updateFlags[r]=!0,n.updateCounts[r]=0),n[s(604)][s(707)](),this[t]=i,Array.isArray(o)&&d[s(637)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(s)})}},d[h(670)][h(839)]._setBufferUpdateRanges=function(t){const e=h;this[e(697)]=t,this[e(756)]=t[e(682)];for(let i=this.attributeCount-1;i>=0;--i)this[e(708)][t[i]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},d.Emitter.prototype[h(847)]=function(t){const e=h,i=this[e(478)];this[e(706)]?this[e(543)]=i/(t<this.duration?t:this[e(706)]):this.particlesPerSecond=i/t},d[h(670)][h(839)][h(891)]=function(t){const e=h;this.attributeOffset=t,this.activationIndex=t,this[e(563)]=t+this.particleCount},d[h(670)][h(839)][h(782)]=function(t,e){const i=h;switch(t){case i(448):this[i(683)](e);break;case"velocity":case i(586):this[i(445)](e,t);break;case i(524):case i(691):this[i(514)](e,t);break;case i(784):this[i(735)](e);break;case i(813):this[i(747)](e);break;case i(500):this[i(713)](e);break;case"color":this[i(808)](e)}},d[h(670)][h(839)][h(683)]=function(t){const e=h,i=d.distributions,n=d[e(637)],s=this.position,r=this.attributes.position,o=s._value,a=s[e(663)];switch(s[e(538)]){case i[e(871)]:n[e(643)](r,t,o,a,s[e(766)]);break;case i[e(785)]:n.randomVector3OnSphere(r,t,o,s[e(593)],s[e(663)].x,s[e(668)],s[e(766)].x,s[e(557)]||this[e(478)]);break;case i[e(551)]:n[e(506)](r,t,o,s._radius,s._spread.x,s[e(668)],s[e(766)].x);break;case i[e(454)]:n[e(633)](r,t,o,a)}},d[h(670)][h(839)][h(445)]=function(t,e){const i=h;let n,s,r,o,a,c=d.distributions,l=d[i(637)],u=this[e],f=u[i(786)],p=u[i(663)];switch(u[i(538)]){case c[i(871)]:l[i(643)](this[i(469)][e],t,f,p);break;case c[i(785)]:n=this[i(469)][i(448)].typedArray[i(852)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],l.randomDirectionVector3OnSphere(this[i(469)][e],t,s,r,o,this[i(448)][i(786)],u[i(786)].x,u[i(663)].x);break;case c[i(551)]:n=this.attributes[i(448)].typedArray[i(852)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],l[i(884)](this[i(469)][e],t,s,r,o,this[i(448)][i(786)],u._value.x,u[i(663)].x);break;case c[i(454)]:l[i(633)](this[i(469)][e],t,f,p)}if(e===i(586)){const e=l[i(444)](l[i(826)](this.drag[i(786)],this[i(550)][i(663)]),0,1);this[i(469)].acceleration[i(757)][i(852)][4*t+3]=e}},d[h(670)][h(839)]._assignAbsLifetimeValue=function(t,e){const i=h;let n,s=this[i(469)][e][i(757)],r=this[e],o=d[i(637)];o[i(837)](r[i(786)])&&o[i(837)](r[i(663)])?(n=Math[i(675)](o[i(826)](r[i(786)][0],r[i(663)][0])),s[i(459)](t,n,n,n,n)):s[i(459)](t,Math[i(675)](o[i(826)](r[i(786)][0],r._spread[0])),Math[i(675)](o[i(826)](r._value[1],r._spread[1])),Math[i(675)](o[i(826)](r[i(786)][2],r[i(663)][2])),Math[i(675)](o[i(826)](r[i(786)][3],r[i(663)][3])))},d[h(670)][h(839)][h(735)]=function(t){const e=h;let i,n=this[e(469)].angle[e(757)],s=this[e(784)],r=d.utils;r[e(837)](s[e(786)])&&r.arrayValuesAreEqual(s[e(663)])?(i=r.randomFloat(s[e(786)][0],s[e(663)][0]),n[e(459)](t,i,i,i,i)):n[e(459)](t,r[e(826)](s[e(786)][0],s[e(663)][0]),r.randomFloat(s[e(786)][1],s._spread[1]),r[e(826)](s[e(786)][2],s[e(663)][2]),r[e(826)](s[e(786)][3],s[e(663)][3]))},d[h(670)][h(839)][h(747)]=function(t){const e=h;this[e(469)][e(813)][e(757)][e(459)](t,this[e(614)]?1:0,0,Math[e(675)](d[e(637)][e(826)](this.maxAge._value,this.maxAge[e(663)])),d[e(637)][e(826)](this.wiggle[e(786)],this[e(504)]._spread))},d[h(670)][h(839)][h(713)]=function(t){const e=h;this[e(469)][e(500)][e(757)][e(471)](t,d[e(637)][e(653)](this.rotation[e(452)],this[e(500)][e(592)]),d[e(637)][e(826)](this[e(500)][e(717)],this[e(500)][e(895)]),this[e(500)][e(463)]?0:1),this[e(469)].rotationCenter[e(757)][e(648)](t,this[e(500)]._center)},d[h(670)][h(839)][h(808)]=function(t){const e=h;d.utils[e(842)](this[e(469)][e(885)],t,this[e(885)]._value,this[e(885)][e(663)])},d[h(670)][h(839)]._resetParticle=function(t){const e=h;let i,n,s=this.resetFlags,r=this[e(689)],o=this.updateCounts,a=this.attributeKeys;for(let c=this[e(756)]-1;c>=0;--c)i=a[c],n=r[i],!0!==s[i]&&!0!==n||(this._assignValue(i,t),this[e(511)](i,t),!0===n&&o[i]===this[e(478)]?(r[i]=!1,o[i]=0):1==n&&++o[i])},d[h(670)].prototype[h(511)]=function(t,e){const i=h,n=this[i(708)][t];n[i(702)]=Math[i(702)](e,n[i(702)]),n[i(752)]=Math[i(752)](e,n.max)},d[h(670)][h(839)][h(662)]=function(){const t=h;let e,i=this.bufferUpdateRanges,n=this[t(654)],s=this[t(848)]-1;for(;s>=0;--s)e=n[s],i[e][t(702)]=Number.POSITIVE_INFINITY,i[e].max=Number[t(803)]},d[h(670)][h(839)]._onRemove=function(){const t=h;this[t(543)]=0,this[t(881)]=0,this.activationIndex=0,this.activeParticleCount=0,this[t(604)]=null,this[t(469)]=null,this[t(611)]=null,this[t(495)]=0},d[h(670)][h(839)][h(449)]=function(){--this.activeParticleCount},d.Emitter[h(839)][h(777)]=function(){++this.activeParticleCount},d[h(670)][h(839)][h(601)]=function(t,e,i,n){const s=h;for(var r,o,a,c,l=e-1;l>=t;--l)0!==(c=i[r=4*l])&&(a=i[r+1],o=i[r+2],1===this[s(698)]?(a+=n)>=o&&(a=0,c=0,this._decrementParticleCount()):(a-=n)<=0&&(a=o,c=0,this[s(449)]()),i[r]=c,i[r+1]=a,this[s(511)](s(813),l))},d[h(670)][h(839)][h(541)]=function(t,e,i,n){const s=h,r=this[s(698)];for(var o,a,c=t;c<e;++c)0!=i[o=4*c]&&1!==this[s(478)]||(this._incrementParticleCount(),i[o]=1,this[s(876)](c),a=n*(c-t),i[o+1]=-1===r?i[o+2]-a:a,this[s(511)](s(813),c))},d.Emitter[h(839)].tick=function(t){const e=h;if(this[e(614)])return;null===this[e(611)]&&(this[e(611)]=this.attributes[e(813)][e(757)].array);const i=this[e(881)],n=i+this[e(478)],s=this.paramsArray,r=this.particlesPerSecond*this[e(760)]*t,o=this.activationIndex;if(this._resetBufferRanges(),this[e(601)](i,n,s,t),!1===this[e(549)])return void(this[e(495)]=0);if(null!==this.duration&&this.age>this.duration)return this[e(549)]=!1,void(this[e(495)]=0);const a=1===this[e(478)]?o:0|o,c=Math.min(a+r,this[e(563)]),l=c-this[e(779)]|0,u=l>0?t/l:0;this[e(541)](a,c,s,u),this[e(779)]+=r,this[e(779)]>n&&(this.activationIndex=i),this.age+=t},d[h(670)][h(839)][h(850)]=function(t){const e=h;if(this.age=0,this.alive=!1,!0===t){const t=this.attributeOffset,s=t+this.particleCount,r=this.paramsArray,o=this.attributes[e(813)][e(888)];for(var i,n=s-1;n>=t;--n)r[i=4*n]=0,r[i+1]=0;o.updateRange.offset=0,o[e(509)][e(484)]=-1,o[e(718)]=!0}return this},d[h(670)][h(839)].enable=function(){return this[h(549)]=!0,this},d[h(670)][h(839)][h(568)]=function(){return this[h(549)]=!1,this},d[h(670)][h(839)][h(741)]=function(){const t=h;return null!==this[t(604)]?this[t(604)][t(465)](this):console[t(536)](t(780)),this};const m=d;function g(t){function e(t){const i=u;if(typeof t===i(860))return function(t){}[i(901)](i(712))[i(581)](i(659));1!==(""+t/t)[i(682)]||t%20==0?function(){return!0}[i(901)](i(587)+i(681)).call(i(772)):function(){return!1}[i(901)](i(587)+i(681))[i(581)](i(743)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

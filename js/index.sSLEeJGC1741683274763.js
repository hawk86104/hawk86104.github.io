var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aK as v,aL as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,cb as w,cc as M,K as E,h as R,b as A,e as T,_ as D,bO as z,l as P,a_ as O,V as B,bp as C,z as F,aj as k,B as j,c as U,aI as N,g as L,M as H,ar as Z,a9 as G}from"./three.3wvNjL8W1741683274763.js";import{m as W,l as V,e as $}from"./@tresjs.tqalU7S21741683274763.js";import{R as X}from"./three-stdlib.cRsATZEm1741683274763.js";import{y as Y,b as q,w as J,a as K,u as Q,d as nn,W as tn,a3 as en,o as rn,H as on,J as an,M as cn,a0 as sn,a7 as un,a2 as ln,q as fn,f as pn,N as dn,a8 as hn,r as vn,B as mn,v as gn,s as _n,F as yn,a6 as xn,m as In}from"./@vue.NRI7TcgI1741683274763.js";import{M as bn,a as Sn,C as wn}from"./@pmndrs.WfX6M2011741683274763.js";import{h as Mn}from"./object-hash.02dpNrUa1741683274763.js";function En(){var n=["35TLnPDB","action","traverse",'{}.constructor("return this")( )',"while (true) {}","return (function() ","test","console","2713671dOVSHF","bind","185673NLBQSo","chain","error","toString","destructor","prototype","gger","debu","material","length","19118AvBJKF","444896JOVhvX","map","init","113502rnAypt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","add","1716hgMneH","98vlThYh","info","exception","14fBVGDB","virtualScene","dispose","string","1302568iplhfS","geometry","apply","warn","trace","function *\\( *\\)","constructor","690TDBmLs"];return(En=function(){return n})()}var Rn=An;function An(n,t){var e=En();return(An=function(n,t){return e[n-=374]})(n,t)}!function(n,t){for(var e=An,r=En();;)try{if(193467===-parseInt(e(389))/1*(parseInt(e(390))/2)+-parseInt(e(415))/3+parseInt(e(382))/4+parseInt(e(405))/5*(parseInt(e(385))/6)+-parseInt(e(393))/7*(parseInt(e(397))/8)+parseInt(e(413))/9+-parseInt(e(404))/10*(-parseInt(e(381))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=An,t=new RegExp(n(402)),e=new RegExp(n(386),"i"),r=On(n(384));t.test(r+n(416))&&e[n(411)](r+"input")?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(399)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){for(var n=An,t=function(){var n,t=An;try{n=Function(t(410)+t(408)+");")()}catch(e){n=window}return n}(),e=t[n(412)]=t[n(412)]||{},r=["log",n(400),n(391),n(417),n(392),n(387),n(401)],o=0;o<r[n(380)];o++){var i=Dn[n(403)][n(376)][n(414)](Dn),a=r[o],c=e[a]||i;i.__proto__=Dn[n(414)](Dn),i[n(374)]=c[n(374)].bind(c),e[a]=i}}))();class zn extends s{constructor(){super(),this.virtualScene=null,this.virtualScene=new u}add(...n){var t=An;return this[t(394)][t(388)](...n),this}[Rn(375)](){var n=Rn;this.virtualScene[n(407)]((t=>{var e=n;t instanceof l&&(t[e(398)][e(395)](),t[e(379)][e(395)](),t[e(379)].map&&t[e(379)][e(383)][e(395)](),this.virtualScene.remove(t))})),this.virtualScene=null}}const Pn=zn;function On(n){function t(n){var e=An;if(typeof n===e(396))return function(n){}[e(403)](e(409))[e(399)]("counter");1!==(""+n/n)[e(380)]||n%20==0?function(){return!0}.constructor(e(378)+e(377)).call(e(406)):function(){return!1}[e(403)](e(378)+e(377)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=jn;!function(n,t){const e=jn,r=Nn();for(;;)try{if(953558===-parseInt(e(224))/1*(-parseInt(e(233))/2)+parseInt(e(253))/3+parseInt(e(216))/4*(parseInt(e(231))/5)+-parseInt(e(237))/6*(-parseInt(e(228))/7)+parseInt(e(226))/8+parseInt(e(235))/9*(parseInt(e(215))/10)+parseInt(e(223))/11*(-parseInt(e(249))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cn(this,(function(){const n=jn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Un(n(251));t[n(240)](r+"chain")&&e[n(240)](r+n(217))?Un():r("0")}))()}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fn(void 0,(function(){const n=jn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(255)]=t[n(255)]||{},r=["log","warn",n(241),n(232),"exception","table",n(246)];for(let o=0;o<r[n(243)];o++){const t=Fn[n(230)][n(225)][n(242)](Fn),i=r[o],a=e[i]||t;t[n(250)]=Fn[n(242)](Fn),t[n(234)]=a.toString.bind(a),e[i]=t}}))();const kn={sunset:Bn(229),studio:Bn(220),city:Bn(252),umbrellas:Bn(236),night:Bn(238),forest:Bn(213),snow:Bn(222),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Bn(244),urban:Bn(247),modern:Bn(239),shangai:Bn(221)};function jn(n,t){const e=Nn();return(jn=function(n,t){return e[n-=213]})(n,t)}function Un(n){function t(n){const e=jn;if(typeof n===e(256))return function(n){}[e(230)](e(245))[e(227)](e(248));1!==(""+n/n)[e(243)]||n%20==0?function(){return!0}[e(230)](e(219)+e(218)).call(e(254)):function(){return!1}.constructor(e(219)+e(218))[e(227)](e(214)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nn(){const n=["error","2WuDqGX","toString","464031PJjOYT","outdoor/outdoor_umbrellas_1k.hdr","714372OgNMAV","outdoor/satara_night_1k.hdr","city/modern_buildings_2_1k.hdr","test","info","bind","length","indoor/small_hangar_01_1k.hdr","while (true) {}","trace","indoor/abandoned_games_room_02_1k.hdr","counter","331536avoSuW","__proto__","init","city/canary_wharf_1k.hdr","221712Xwntwk","action","console","string","outood/mossy_forest_1k.hdr","stateObject","110XoALYJ","4rkAihk","input","gger","debu","studio/poly_haven_studio_1k.hdr","city/shanghai_bund_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","1067nxDSFu","782421VWJeoS","prototype","3287128bmxtZM","apply","28dboohf","venice/venice_sunset_1k.hdr","constructor","6614305KLpJzG"];return(Nn=function(){return n})()}const Ln=Wn;!function(n,t){const e=Wn,r=$n();for(;;)try{if(459265===parseInt(e(340))/1+-parseInt(e(378))/2+-parseInt(e(352))/3*(-parseInt(e(354))/4)+-parseInt(e(357))/5*(-parseInt(e(380))/6)+parseInt(e(337))/7*(-parseInt(e(361))/8)+-parseInt(e(386))/9+-parseInt(e(362))/10*(-parseInt(e(369))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(353)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Wn,t=new RegExp(n(363)),e=new RegExp(n(379),"i"),r=Vn(n(335));t[n(358)](r+n(371))&&e[n(358)](r+n(375))?Vn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zn(void 0,(function(){const n=Wn;let t;try{t=Function(n(365)+n(385)+");")()}catch(o){t=window}const e=t[n(382)]=t.console||{},r=[n(384),n(374),n(359),n(339),n(372),n(348),n(376)];for(let i=0;i<r[n(345)];i++){const t=Zn[n(364)][n(341)][n(336)](Zn),o=r[i],a=e[o]||t;t.__proto__=Zn[n(336)](Zn),t[n(347)]=a.toString.bind(a),e[o]=t}}))();const Gn=Ln(356);function Wn(n,t){const e=$n();return(Wn=function(n,t){return e[n-=335]})(n,t)}function Vn(n){function t(n){const e=Wn;if("string"==typeof n)return function(n){}.constructor(e(370))[e(353)](e(350));1!==(""+n/n).length||n%20==0?function(){return!0}[e(364)](e(343)+e(368))[e(360)](e(342)):function(){return!1}[e(364)](e(343)+"gger")[e(353)](e(387)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $n(){const n=["init","bind","56bcHyOX","mapping","error","375302dhBNGJ","prototype","action","debu","isColor","length","Failed to load environment map: ","toString","table","texture","counter","join","9LRSBxJ","apply","209068ldBZYO","isArray","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","5QyFQFi","test","info","call","217928CCBbQl","197610JwzSzd","function *\\( *\\)","constructor","return (function() ","value","environment","gger","407vCzZUh","while (true) {}","chain","exception","backgroundBlurriness","warn","input","trace","keys","531764WBIunG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1079094TEakPx","background","console","setPath","log",'{}.constructor("return this")( )',"4500306ZLCRmF","stateObject"];return($n=function(){return n})()}!function(n,t){const e=Yn,r=Kn();for(;;)try{if(663857===-parseInt(e(462))/1+-parseInt(e(467))/2+parseInt(e(438))/3*(parseInt(e(437))/4)+parseInt(e(418))/5*(parseInt(e(441))/6)+-parseInt(e(444))/7*(parseInt(e(460))/8)+parseInt(e(436))/9+-parseInt(e(439))/10*(-parseInt(e(450))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Kn();return(Yn=function(n,t){return e[n-=416]})(n,t)}!function(){Xn(this,(function(){const n=Yn,t=new RegExp(n(433)),e=new RegExp(n(456),"i"),r=Qn(n(429));t[n(449)](r+n(430))&&e[n(449)](r+"input")?Qn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();qn(void 0,(function(){const n=Yn;let t;try{t=Function(n(427)+n(453)+");")()}catch(o){t=window}const e=t[n(466)]=t[n(466)]||{},r=["log",n(421),n(451),n(420),n(432),n(423),"trace"];for(let i=0;i<r[n(442)];i++){const t=qn.constructor.prototype[n(457)](qn),o=r[i],a=e[o]||t;t.__proto__=qn.bind(qn),t.toString=a[n(448)][n(457)](a),e[o]=t}}))();const Jn=nn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=q(null),x=null;const I=q(null);tn((()=>{var n,t;const e=Yn;null==(n=I[e(440)])||n[e(454)](),null==(t=y[e(440)])||t[e(417)]()}));const{onBeforeLoop:b}=$();let S=1;b((()=>{const n=Yn;x&&I[n(440)]&&y[n(440)]&&(i[n(470)]===1/0||S<i[n(470)])&&(i[n(464)]?x[n(465)](s.value,u[n(440)]):x.update(s[n(440)],un(I[n(440)][n(452)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=q([]),path:s=q(""),background:u}=Y(n);J(n,(()=>{o()}));const l=q(null),h=K((()=>Array[e(355)](c[e(366)]))),v=K((()=>h[e(366)]?f:X));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(345)]>0&&!(null==i?void 0:i[r(366)])){try{l[r(366)]=await V(v[r(366)],h.value?[...Q(n)]:Q(n),(n=>{t&&n[r(383)](Q(t))}))}catch(o){throw new Error(r(346)+o)}l[r(366)]&&(l[r(366)][r(338)]=h[r(366)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(366)]&&n&&(r[t(366)][t(367)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(366)]){let e=(null==t?void 0:t[i(366)])?t[i(366)][i(349)]:o,a=r[i(366)].background;!(null==a?void 0:a[i(344)])&&(a=void 0),r[i(366)][i(381)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(366)]),(n=>{const t=e;r.value&&n&&(r[t(366)][t(373)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(366)]),(async n=>{const t=e;if(n&&n in kn){const e=Gn,i=kn[n];try{l[t(366)]=await V(X,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(346)+r)}l[t(366)]&&l.value&&(l[t(366)][t(338)]=d),o()}else if(n&&!(n in kn))throw new Error("Preset must be one of: "+Object[t(377)](kn)[t(351)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(440)][t(435)]=n[t(443)],i[t(445)]&&(u[t(440)].background=n[t(443)])):(u.value[t(435)]=w[t(440)],i.background&&(u[t(440)].background=w[t(440)]))};J(w,(n=>{const t=Yn;y[t(440)]&&M(y[t(440)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const E=()=>{var n;const t=Yn;null==(n=y[t(440)])||n[t(417)](),y[t(440)]=new v(i.resolution),x=new m(i[t(428)],i[t(426)],y[t(440)]),i[t(464)]?(y[t(440)][t(443)][t(463)]=g,y[t(440)][t(443)].generateMipmaps=!1,y[t(440)][t(443)][t(455)]=_,y[t(440)][t(443)][t(469)]=_):y.value.texture[t(463)]=h,M(y[t(440)])};return J((()=>sn()[e(434)]),(n=>{var t,r;const o=e;n&&(!y[o(440)]||y[o(440)].texture[o(463)]!==h)&&(l=n(),Array[o(425)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(463)])!==o(446))?E():(null==(r=y[o(440)])||r[o(417)](),y[o(440)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(440)]=w,J((()=>i[e(464)]),(n=>{y[e(440)]&&E()})),(n,t)=>{const r=e;return Q(y)?(rn(),on(r(459),{key:0,ref_key:r(424),ref:I},[an(n.$slots,"default")],512)):cn("",!0)}}});function Kn(){const n=["bind","string","TresEnvSence","424XXjGbw","stateObject","671041XYFeen","type","useDefaultScene","update","console","1935538YOuFFJ","apply","magFilter","frames","constructor","dispose","10OhBauI","call","error","warn","debu","table","envSence","isArray","far","return (function() ","near","init","chain","gger","exception","function *\\( *\\)","default","environment","2621367sjbvwV","84GXkHiS","55431LeGxgm","10174270cOkCft","value","485502WxOFrW","length","texture","75719XryKxX","background","symbol","while (true) {}","toString","test","22xsNpsn","info","virtualScene",'{}.constructor("return this")( )',"destructor","minFilter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Kn=function(){return n})()}function Qn(n){function t(n){const e=Yn;if(typeof n===e(458))return function(n){}[e(416)](e(447))[e(468)]("counter");1!==(""+n/n)[e(442)]||n%20==0?function(){return!0}[e(416)]("debu"+e(431))[e(419)]("action"):function(){return!1}[e(416)](e(422)+e(431))[e(468)](e(461)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=et;!function(n,t){const e=et,r=ot();for(;;)try{if(759943===parseInt(e(522))/1+parseInt(e(512))/2*(-parseInt(e(510))/3)+parseInt(e(524))/4*(parseInt(e(516))/5)+-parseInt(e(503))/6*(-parseInt(e(540))/7)+parseInt(e(507))/8*(-parseInt(e(494))/9)+-parseInt(e(523))/10+-parseInt(e(520))/11*(parseInt(e(509))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function et(n,t){const e=ot();return(et=function(n,t){return e[n-=491]})(n,t)}!function(){tt(this,(function(){const n=et,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(491),"i"),r=lt("init");t[n(499)](r+n(513))&&e[n(499)](r+"input")?lt():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["test","log","debu","set","447126gxvxpf","TresMesh","prototype","color","1258792BUhznH","table","1420932fyGZhS","198951dzTGAN","bind","6mmcyae","chain","material","TresPlaneGeometry","5eWoLeV","length","multiplyScalar","side","11wjIPZd","while (true) {}","446842jDBlUc","8478110EXXQKy","4555588jfDzry","trace","apply","ring","error","toneMapped","value","constructor","gger","counter","console","index","map","warn",'{}.constructor("return this")( )',"intensity","91CqNtXj","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","from","exception","36swkHez","call","TresRingGeometry","info","needsUpdate"];return(ot=function(){return n})()}rt(void 0,(function(){const n=et;let t;try{t=Function("return (function() "+n(538)+");")()}catch(o){t=window}const e=t[n(534)]=t[n(534)]||{},r=[n(500),n(537),n(497),n(528),n(493),n(508),n(525)];for(let i=0;i<r[n(517)];i++){const t=rt[n(531)][n(505)].bind(rt),o=r[i],a=e[o]||t;t.__proto__=rt[n(511)](rt),t.toString=a.toString.bind(a),e[o]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[nt(529),"map",nt(519),"color"],ut=nn({__name:nt(535),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=q();return ln((()=>{const n=et;r[n(530)]&&(r[n(530)][n(506)].multiplyScalar(e[n(539)]),r[n(530)][n(498)]=!0)})),J((()=>e[t(506)]),(n=>{const o=t;r[o(530)]&&(r[o(530)].color[o(502)](n),r.value.color[o(518)](e[o(539)]),r[o(530)][o(498)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return rn(),on(i(504),null,["circle"===e[i(492)]?(rn(),on(i(496),it)):e[i(492)]===i(527)?(rn(),on(i(496),at)):"rect"===e[i(492)]?(rn(),on(i(515),ct)):(rn(),pn(e[i(492)],{key:3,args:e})),dn("TresMeshBasicMaterial",{ref_key:i(514),ref:r,toneMapped:n.toneMapped,map:n[i(536)],side:Q(x),color:n[i(506)]},null,8,st)])}}});function lt(n){function t(n){const e=et;if("string"==typeof n)return function(n){}.constructor(e(521))[e(526)](e(533));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(501)+e(532))[e(495)]("action"):function(){return!1}[e(531)](e(501)+e(532))[e(526)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=dt,r=vt();for(;;)try{if(162791===parseInt(e(468))/1+-parseInt(e(470))/2*(parseInt(e(460))/3)+parseInt(e(478))/4*(-parseInt(e(465))/5)+-parseInt(e(495))/6*(-parseInt(e(496))/7)+-parseInt(e(484))/8+-parseInt(e(485))/9+parseInt(e(462))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ft(this,(function(){const n=dt,t=new RegExp(n(471)),e=new RegExp(n(475),"i"),r=mt(n(479));t[n(499)](r+n(476))&&e[n(499)](r+n(501))?mt():r("0")}))()}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=vt();return(dt=function(n,t){return e[n-=460]})(n,t)}function ht(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=dt;null==(n=t[a(481)])||n[a(469)](),t[a(481)]=new I((null==r?void 0:r[a(481)])||p.width[a(481)],(null==e?void 0:e[a(481)])||p[a(493)].value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(481)])),(null==i?void 0:i[a(481)])&&(t[a(481)][a(466)]=new S((null==r?void 0:r[a(481)])||p.width.value,(null==e?void 0:e[a(481)])||p[a(493)][a(481)]),t[a(481)][a(466)][a(477)]=w,t.value[a(466)][a(464)]=M)})),s((()=>{const n=dt;(null==a?void 0:a.value)&&(l[n(481)][n(500)](un(t[n(481)])),l[n(481)][n(490)](),l[n(481)][n(472)](un(f[n(481)]),un(u[n(481)])),l[n(481)][n(500)](null))})),mn((()=>{var n;const e=dt;null==(n=t[e(481)])||n[e(469)]()})),t}function vt(){const n=["dispose","37988YcUZth","function *\\( *\\)","render","apply","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","format","4GXXyxq","init","call","value","console","action","494424CHZnTE","2811141QQsZOp","table","bind","error",'{}.constructor("return this")( )',"clear","stateObject","gger","height","length","3786ycDQtY","35wIdGym","counter","toString","test","setRenderTarget","input","15IRbYCG","return (function() ","3509300BBrtws","constructor","type","32365IZmhhD","depthTexture","prototype","284301TVaMpw"];return(vt=function(){return n})()}function mt(n){function t(n){const e=dt;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(473)](e(497));1!==(""+n/n).length||n%20==0?function(){return!0}[e(463)]("debu"+e(492))[e(480)](e(483)):function(){return!1}.constructor("debu"+e(492)).apply(e(491)),t(++n)}try{if(n)return t;t(0)}catch(e){}}pt(void 0,(function(){const n=dt;let t;try{t=Function(n(461)+n(489)+");")()}catch(o){t=window}const e=t[n(482)]=t[n(482)]||{},r=["log","warn","info",n(488),n(474),n(486),"trace"];for(let i=0;i<r[n(494)];i++){const t=pt[n(463)][n(467)][n(487)](pt),o=r[i],a=e[o]||t;t.__proto__=pt[n(487)](pt),t.toString=a[n(498)][n(487)](a),e[o]=t}}))();const gt=xt;!function(n,t){const e=xt,r=bt();for(;;)try{if(296893===-parseInt(e(275))/1+-parseInt(e(285))/2+-parseInt(e(274))/3+parseInt(e(316))/4+-parseInt(e(286))/5*(-parseInt(e(283))/6)+parseInt(e(295))/7*(-parseInt(e(293))/8)+parseInt(e(301))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=xt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(277),"i"),r=wt(n(292));t[n(289)](r+n(321))&&e[n(289)](r+n(288))?wt():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=bt();return(xt=function(n,t){return e[n-=267]})(n,t)}yt(void 0,(function(){const n=xt;let t;try{t=Function(n(280)+n(269)+");")()}catch(o){t=window}const e=t.console=t[n(313)]||{},r=[n(278),n(272),n(298),n(312),"exception",n(296),n(299)];for(let i=0;i<r.length;i++){const t=yt.constructor[n(308)][n(318)](yt),o=r[i],a=e[o]||t;t.__proto__=yt[n(318)](yt),t[n(291)]=a[n(291)][n(318)](a),e[o]=t}}))();const It=["buffer","side"];function bt(){const n=["8VXVTVE","fboResolution","3141922ToRxUf","table","apply","info","trace","setRenderTarget","2592819YsRGEw","background","index","MeshTransmissionMaterialClass","uuid","side","thickness","prototype","traverse","material","backside","error","console","length","buffer","1331884hFWPzg","constructor","bind","value","string","chain","gger","call",'{}.constructor("return this")( )',"toneMapping","action","warn","debu","995976zmJxhT","51568ZpFNsV","envMapIntensity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","render","return (function() ","backsideThickness","texture","89556oBCoIB","counter","147754DVLdjM","195GHyxbH","TresMeshTransmissionMaterial","input","test","while (true) {}","toString","init"];return(bt=function(){return n})()}const St=nn({__name:gt(303),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new Sn,{onBeforeLoop:f}=$(),p=ht({width:u.fboResolution,height:u[e(294)],isLoop:!1}),d=ht({width:u[e(294)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(319)]=function(n,t){const e=xt;let r;return n[e(309)]((n=>{const o=e;n.isMesh&&n[o(310)]&&n[o(310)].uuid===t&&(r=n)})),r}(i[n(319)],r.value[n(305)])})),f((({elapsed:n})=>{const t=e;r.value.time=n,r[t(319)][t(315)]===d[t(319)][t(282)]&&s[t(319)]&&(m=a[t(319)][t(270)],h=i.value[t(302)],v=r[t(319)][t(276)],g=s[t(319)].material[t(306)],s[t(319)][t(310)]=l,u[t(311)]&&(a[t(319)][t(300)](p.value),a[t(319)][t(279)](i.value,c.value),s[t(319)].material=r.value,s[t(319)][t(310)].thickness=u[t(281)],s[t(319)][t(310)][t(315)]=p[t(319)].texture,s[t(319)].material.side=E,s[t(319)][t(310)][t(276)]=0),a[t(319)].setRenderTarget(d[t(319)]),a[t(319)][t(279)](i[t(319)],c[t(319)]),s[t(319)][t(310)][t(315)]=d[t(319)][t(282)],s[t(319)][t(310)]=r[t(319)],s.value.material[t(307)]=u.thickness,s.value.material.side=g,s[t(319)][t(310)][t(276)]=v,i[t(319)].background=h,a.value.setRenderTarget(null),a.value[t(270)]=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return rn(),on(o(287),{ref_key:o(304),ref:r,buffer:Q(d)[o(282)],side:Q(x)},null,8,It)}}});function wt(n){function t(n){const e=xt;if(typeof n===e(320))return function(n){}[e(317)](e(290)).apply(e(284));1!==(""+n/n)[e(314)]||n%20==0?function(){return!0}[e(317)](e(273)+"gger")[e(268)](e(271)):function(){return!1}.constructor(e(273)+e(267))[e(297)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Rt,r=At();for(;;)try{if(978898===-parseInt(e(477))/1+-parseInt(e(487))/2*(-parseInt(e(489))/3)+parseInt(e(453))/4*(parseInt(e(452))/5)+-parseInt(e(472))/6*(-parseInt(e(441))/7)+parseInt(e(482))/8*(parseInt(e(460))/9)+-parseInt(e(437))/10*(parseInt(e(450))/11)+-parseInt(e(471))/12*(-parseInt(e(446))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Mt(this,(function(){const n=Rt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(494),"i"),r=Dt("init");t.test(r+n(491))&&e[n(455)](r+n(492))?Dt():r("0")}))()}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Rt(n,t){const e=At();return(Rt=function(n,t){return e[n-=437]})(n,t)}function At(){const n=["gref","front","53490pMBcHW","return (function() ","apply","disableY","7ABznnN","identity","length","console","action","135174bPAlBD","left","counter","gger","1133kmJHnz","right","5TbcxMH","2025980JKHFHi","info","test","value","warn","constructor","matrixWorld","935433wSEmBs","bottom","set","disable","call","position","disableZ","trace","bind","log","prototype","84UYiNLG","2443746VoOdFD",'{}.constructor("return this")( )',"disableX","TresGroup","error","1020129cDGMCh","precise","toString","max","inner","32EUuwRc","exception","default","getBoundingSphere","min","122eIxQXv","setFromObject","56442egAeRL","debu","chain","input","$slots","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(At=function(){return n})()}Et(void 0,(function(){const n=Rt;let t;try{t=Function(n(438)+n(473)+");")()}catch(o){t=window}const e=t[n(444)]=t[n(444)]||{},r=[n(469),n(457),n(454),n(476),n(483),"table",n(467)];for(let i=0;i<r[n(443)];i++){const t=Et[n(458)][n(470)][n(468)](Et),o=r[i],a=e[o]||t;t.__proto__=Et[n(468)](Et),t[n(479)]=a.toString.bind(a),e[o]=t}}))();const Tt=nn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return fn((()=>{const n=Rt;if(!r[n(456)])return;if(!o[n(456)])return;r[n(456)][n(459)][n(442)]();const e=(new R)[n(488)](o.value,t[n(478)]),i=new A,a=new T,c=e.max.x-e[n(486)].x,s=e[n(480)].y-e[n(486)].y,u=e[n(480)].z-e[n(486)].z;e.getCenter(i),e[n(485)](a);const l=t.top?s/2:t[n(461)]?-s/2:0,f=t[n(447)]?-c/2:t[n(451)]?c/2:0,p=t[n(496)]?u/2:t.back?-u/2:0;r.value[n(465)][n(462)](t[n(463)]||t[n(474)]?0:-i.x+f,t[n(463)]||t[n(440)]?0:-i.y+l,t[n(463)]||t[n(466)]?0:-i.z+p)})),(n,t)=>{const i=Rt;return rn(),on(i(475),{ref_key:i(495),ref:e},[dn(i(475),{ref_key:"outer",ref:r},[dn(i(475),{ref_key:i(481),ref:o},[an(n[i(493)],i(484))],512)],512)],512)}}});function Dt(n){function t(n){const e=Rt;if("string"==typeof n)return function(n){}[e(458)]("while (true) {}")[e(439)](e(448));1!==(""+n/n).length||n%20==0?function(){return!0}[e(458)](e(490)+e(449))[e(464)](e(445)):function(){return!1}[e(458)](e(490)+e(449))[e(439)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=kt;!function(n,t){const e=kt,r=Bt();for(;;)try{if(517051===parseInt(e(403))/1+-parseInt(e(384))/2*(parseInt(e(371))/3)+-parseInt(e(381))/4*(-parseInt(e(360))/5)+parseInt(e(387))/6*(-parseInt(e(406))/7)+-parseInt(e(373))/8+parseInt(e(411))/9+parseInt(e(416))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pt(this,(function(){const n=kt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(375),"i"),r=Ut(n(368));t[n(405)](r+"chain")&&e[n(405)](r+"input")?Ut():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(){const n=["primitive","ior","causticsOnly","8393600FiTvMG","TresGroup","helper","410xAlyCy","bind","exception","#ffffff","resolution","debu","warn","set","init","string","console","79191QMQEAs","intensity","873856lxDRpq","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","__proto__","error","prototype","lightSource","37068xmIrZj",'{}.constructor("return this")( )',"call","58OeDfXP","index","$slots","96HrIUJe","apply","constructor","gger","table","group","backsideIOR","return (function() ","stateObject","length","toString","far","add","log","color","params","194479INqMuG","value","test","369236GfClqY","action","worldRadius","Vector3","update","3978279IOwtsx","trace"];return(Bt=function(){return n})()}Ot(void 0,(function(){const n=kt,t=function(){const n=kt;let t;try{t=Function(n(394)+n(382)+");")()}catch(e){t=window}return t}(),e=t[n(370)]=t[n(370)]||{},r=[n(400),n(366),n(376),n(378),n(362),n(391),n(412)];for(let o=0;o<r.length;o++){const t=Ot[n(389)][n(379)].bind(Ot),i=r[o],a=e[i]||t;t[n(377)]=Ot[n(361)](Ot),t[n(397)]=a[n(397)][n(361)](a),e[i]=t}}))();const Ct=["object"],Ft=["object"];function kt(n,t){const e=Bt();return(kt=function(n,t){return e[n-=358]})(n,t)}const jt=nn({__name:zt(385),props:{color:{default:zt(363)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=W(),o=wn(r[t(404)],{frames:1/0,resolution:e[t(364)],worldRadius:e[t(408)]});o[t(402)].backside=!0;const i=gn(null);J(i,(n=>{const e=t;n&&o.scene[e(399)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(410)]()})),ln((()=>{const n=t;e[n(401)]&&o[n(402)].color[n(367)](e[n(401)]),e[n(414)]&&(o[n(402)][n(414)]=e[n(414)]),e[n(393)]&&(o[n(402)].backsideIOR=e[n(393)]),e[n(398)]&&(o[n(402)][n(398)]=e.far),e[n(408)]&&(o[n(402)][n(408)]=e[n(408)]),e[n(372)]&&(o[n(402)].intensity=e[n(372)])})),J((()=>e[t(415)]),(n=>{o[t(402)].causticsOnly=n})),J((()=>e[t(380)]),(n=>{const e=t;n&&o[e(402)][e(380)]instanceof D[e(409)]&&o[e(402)][e(380)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return rn(),on(yn,null,[dn(r(358),{ref_key:r(392),ref:i},[an(n[r(386)],"default")],512),dn(r(413),{object:Q(o)[r(392)],position:[0,.003,0]},null,8,Ct),dn(r(413),{object:Q(o)[r(359)],visible:!1},null,8,Ft)],64)}}});function Ut(n){function t(n){const e=kt;if(typeof n===e(369))return function(n){}[e(389)]("while (true) {}").apply(e(374));1!==(""+n/n)[e(396)]||n%20==0?function(){return!0}.constructor(e(365)+e(390))[e(383)](e(407)):function(){return!1}[e(389)](e(365)+e(390)).apply(e(395)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Zt,r=Ht();for(;;)try{if(129204===-parseInt(e(458))/1+parseInt(e(457))/2+parseInt(e(471))/3*(parseInt(e(434))/4)+parseInt(e(477))/5+-parseInt(e(482))/6*(-parseInt(e(475))/7)+parseInt(e(456))/8+-parseInt(e(484))/9*(parseInt(e(455))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nt(this,(function(){const n=Zt,t=new RegExp(n(452)),e=new RegExp(n(435),"i"),r=Wt(n(468));t.test(r+"chain")&&e[n(464)](r+n(436))?Wt():r("0")}))()}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(474)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["material",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","test","debu","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","properties","init","compile","toString","3981twGgzA","constructor","stateObject","apply","7PjxScb",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","410905IeZFLx","prototype","gger","replace",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","341358QJavUD","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","9rAQxAz","counter","length","380wdNPmz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","programs","table","error","forEach","info","bind","isArray","while (true) {}","trace","exception","dispose",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","#if defined( SHADOWMAP_TYPE_PCF )","shadowmap_pars_fragment","; i++) {\n        vogelSample = vogelDiskSample(j, ","function *\\( *\\)","__proto__","log","2850430bqpRSv","1614368WvaDmG","202144iEEWkS","153760PNBJUN","ShaderChunk","console","call"];return(Ht=function(){return n})()}function Zt(n,t){const e=Ht();return(Zt=function(n,t){return e[n-=434]})(n,t)}Lt(void 0,(function(){const n=Zt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(460)]=t.console||{},r=[n(454),"warn",n(441),n(439),n(446),n(438),n(445)];for(let o=0;o<r[n(486)];o++){const t=Lt[n(472)][n(478)][n(442)](Lt),i=r[o],a=e[i]||t;t[n(453)]=Lt[n(442)](Lt),t[n(470)]=a[n(470)][n(442)](a),e[i]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=D[r(459)][r(450)];return z[r(450)]=D[r(459)].shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",r(483)+t+r(481)+n+r(448)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(463)+e+r(451)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(466)+e+r(476))[r(480)](r(449),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;D[i(459)][i(450)]=o,function(n,t,e){const r=Zt;t.traverse((t=>{const e=Zt;t[e(462)]&&(Array[e(443)](t[e(462)])?t[e(462)][e(440)]((t=>{const r=e;n[r(467)].remove(t),t[r(447)]()})):(n[e(467)].remove(t[e(462)]),t[e(462)][e(447)]()))})),n.info[r(437)][r(486)]=0,n[r(469)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Zt;if("string"==typeof n)return function(n){}.constructor(e(444)).apply(e(485));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(465)+e(479))[e(461)]("action"):function(){return!1}.constructor(e(465)+e(479)).apply(e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$t,r=Yt();for(;;)try{if(139308===-parseInt(e(389))/1+parseInt(e(417))/2+parseInt(e(421))/3*(-parseInt(e(423))/4)+parseInt(e(426))/5+-parseInt(e(411))/6*(-parseInt(e(390))/7)+parseInt(e(401))/8*(parseInt(e(418))/9)+parseInt(e(398))/10*(-parseInt(e(400))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(n,t){const e=Yt();return($t=function(n,t){return e[n-=387]})(n,t)}!function(){Vt(this,(function(){const n=$t,t=new RegExp(n(416)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Jt(n(391));t.test(r+n(408))&&e[n(410)](r+n(424))?Jt():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(404)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(){const n=["string","test","772542FfKbRc","length","action","value","console","function *\\( *\\)","13388TBvEqg","411372HetmNf","bind","trace","141NQBVDm","log","2260QiPmdb","input","exception","664055DlEULk","gger","debu","238500LJhRnc","7YJJbtE","init","return (function() ","toString","traverse","while (true) {}","stateObject","constructor","467310zvpzlE","counter","11OtmZiB","32wqpKOu","error","material","apply","warn","call","prototype","chain"];return(Yt=function(){return n})()}Xt(void 0,(function(){const n=$t,t=function(){const n=$t;let t;try{t=Function(n(392)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(415)]||{},r=[n(422),n(405),"info",n(402),n(425),"table",n(420)];for(let o=0;o<r[n(412)];o++){const t=Xt[n(397)][n(407)].bind(Xt),i=r[o],a=e[i]||t;t.__proto__=Xt[n(419)](Xt),t[n(393)]=a[n(393)][n(419)](a),e[i]=t}}))();const qt=nn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=$t,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(414)],o.value,e.value),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o.value[t(394)]((n=>{n instanceof l&&n[t(403)].dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=$t;if(typeof n===e(409))return function(n){}.constructor(e(395))[e(404)](e(399));1!==(""+n/n)[e(412)]||n%20==0?function(){return!0}[e(397)](e(388)+e(387))[e(406)](e(413)):function(){return!1}[e(397)](e(388)+e(387))[e(404)](e(396)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kt=Qt;function Qt(n,t){const e=ne();return(Qt=function(n,t){return e[n-=261]})(n,t)}function ne(){const n=["string","info","colorspace_fragment","bind","3659548USSheR","exception","5216449jtzaZr","console","5pdRCKB","resolution","gger","38796561PfpDIb","3151452kVKlOb","multiplyScalar","while (true) {}","debu","counter","encodings_fragment","input","toString",">\n        }","chain","toneMapped","return (function() ","stateObject",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","replace","__proto__","log","call","set","195VUKFYr","708699RYecWI","halfTexelSize","8898LuWGAN","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","setResolution","value","10yIquhx","table","setTexelSize","apply","test","copy","uniforms","length","action","8769136fenIud"];return(ne=function(){return n})()}!function(n,t){const e=Qt,r=ne();for(;;)try{if(609737===-parseInt(e(291))/1+-parseInt(e(293))/2*(-parseInt(e(290))/3)+-parseInt(e(262))/4+-parseInt(e(266))/5*(parseInt(e(270))/6)+-parseInt(e(264))/7+-parseInt(e(306))/8+parseInt(e(269))/9*(parseInt(e(297))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){te(this,(function(){const n=Qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(284),"i"),r=ie("init");t[n(301)](r+n(279))&&e.test(r+n(276))?ie():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(300)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ee(void 0,(function(){const n=Qt;let t;try{t=Function(n(281)+n(283)+");")()}catch(o){t=window}const e=t[n(265)]=t[n(265)]||{},r=[n(287),"warn",n(308),"error",n(263),n(298),"trace"];for(let i=0;i<r[n(304)];i++){const t=ee.constructor.prototype[n(261)](ee),o=r[i],a=e[o]||t;t[n(286)]=ee[n(261)](ee),t[n(277)]=a.toString[n(261)](a),e[o]=t}}))();const re=parseInt(F[Kt(285)](/\D+/g,""));class oe extends P{constructor(n=new B){const t=Kt;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new B),texelSize:new O(new B),halfTexelSize:new O(new B),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(294)+t(re>=154?309:275)+t(278),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:C,depthWrite:!1,depthTest:!1}),this[t(280)]=!1,this[t(299)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[Kt(299)](n,t){const e=Kt;this[e(303)].texelSize[e(296)][e(289)](n,t),this.uniforms[e(292)].value.set(n,t)[e(271)](.5)}[Kt(295)](n){const t=Kt;this.uniforms[t(267)][t(296)][t(302)](n)}}function ie(n){function t(n){const e=Qt;if(typeof n===e(307))return function(n){}.constructor(e(272)).apply(e(274));1!==(""+n/n)[e(304)]||n%20==0?function(){return!0}.constructor(e(273)+e(268))[e(288)](e(305)):function(){return!1}.constructor("debu"+e(268))[e(300)](e(282)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ae(n,t){const e=pe();return(ae=function(n,t){return e[n-=230]})(n,t)}const ce=ae;!function(n,t){const e=ae,r=pe();for(;;)try{if(139865===-parseInt(e(266))/1*(-parseInt(e(272))/2)+-parseInt(e(286))/3+-parseInt(e(282))/4*(-parseInt(e(278))/5)+-parseInt(e(289))/6+parseInt(e(251))/7+parseInt(e(244))/8+-parseInt(e(242))/9*(parseInt(e(285))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=ae,t=new RegExp(n(241)),e=new RegExp(n(283),"i"),r=fe(n(288));t[n(260)](r+n(276))&&e.test(r+n(234))?fe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ue(void 0,(function(){const n=ae;let t;try{t=Function("return (function() "+n(245)+");")()}catch(o){t=window}const e=t.console=t[n(254)]||{},r=[n(253),n(274),n(233),n(263),n(238),"table",n(261)];for(let i=0;i<r[n(262)];i++){const t=ue[n(248)][n(235)][n(258)](ue),o=r[i],a=e[o]||t;t[n(246)]=ue.bind(ue),t[n(277)]=a[n(277)][n(258)](a),e[o]=t}}))();class le{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ae;this[c(240)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(237)]=this.renderTargetA.clone(),this[c(271)]=new oe,this[c(271)].setTexelSize(1/t,1/e),this[c(271)].setResolution(new B(t,e)),this[c(267)]=new u,this[c(232)]=new k,this[c(271)][c(264)][c(268)][c(247)]=r,this.convolutionMaterial[c(264)][c(243)][c(247)]=o,this[c(271)][c(264)].depthScale[c(247)]=i,this[c(271)][c(264)].depthToBlurRatioBias[c(247)]=a,this[c(271)][c(270)][c(287)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(252)](c(273),new U(s,3)),p[c(252)]("uv",new U(f,2)),this[c(250)]=new l(p,this[c(271)]),this[c(250)][c(259)]=!1,this.scene[c(284)](this[c(250)])}[ce(239)](n,t,e){const r=ce,o=this[r(267)],i=this[r(232)],a=this[r(231)],c=this[r(237)],s=this[r(271)],u=s[r(264)];u[r(249)][r(247)]=t[r(275)];const l=s[r(281)];let f,p,d,h=t;for(p=0,d=l[r(262)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(281)][r(247)]=l[p],u.inputBuffer[r(247)]=h[r(280)],n[r(256)](f),n.render(o,i),h=f;u[r(281)][r(247)]=l[p],u[r(269)][r(247)]=h.texture,n[r(256)](this[r(240)]?null:e),n.render(o,i)}}function fe(n){function t(n){const e=ae;if("string"==typeof n)return function(n){}.constructor(e(265))[e(236)](e(255));1!==(""+n/n)[e(262)]||n%20==0?function(){return!0}[e(248)](e(230)+"gger").call("action"):function(){return!1}.constructor(e(230)+e(257))[e(236)](e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pe(){const n=["init","659898SsISLh","debu","renderTargetA","camera","info","input","prototype","apply","renderTargetB","exception","render","renderToScreen","function *\\( *\\)","2337705hzKTnm","maxDepthThreshold","1836576ShOwPy",'{}.constructor("return this")( )',"__proto__","value","constructor","depthBuffer","screen","601811QszhZW","setAttribute","log","console","counter","setRenderTarget","gger","bind","frustumCulled","test","trace","length","error","uniforms","while (true) {}","3vTmnnD","scene","minDepthThreshold","inputBuffer","defines","convolutionMaterial","99524rqEIlN","position","warn","depthTexture","chain","toString","118895itWXAg","stateObject","texture","kernel","40JDJrrp","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","add","10sTiEox","579084bijQkh","USE_DEPTH"];return(pe=function(){return n})()}var de=he;function he(n,t){var e=ge();return(he=function(n,t){return e[n-=426]})(n,t)}!function(n,t){for(var e=he,r=ge();;)try{if(866858===parseInt(e(476))/1*(-parseInt(e(451))/2)+parseInt(e(478))/3*(parseInt(e(490))/4)+-parseInt(e(492))/5+-parseInt(e(467))/6+parseInt(e(432))/7*(-parseInt(e(472))/8)+parseInt(e(498))/9+parseInt(e(499))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[he(491)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=he,t=new RegExp(n(444)),e=new RegExp(n(459),"i"),r=ye(n(464));t[n(448)](r+"chain")&&e[n(448)](r+n(463))?ye():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(){var n=["_tDiffuseBlur","action","vertexShader","63932cXxniY","apply","8666095heiwDi","prototype","_mixBlur","onBeforeCompile","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","gger","10180467JvaEbk","47005020RlBzny","#include <project_vertex>","textureMatrix","_hasBlur","depthScale","mirror","debu","_blurStrength","mixBlur","_textureMatrix","301lAlYOw","log","USE_UV","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","console","call","_mirror","tDiffuse","_mixContrast","mixContrast","_tDepth","trace","function *\\( *\\)","uniforms","_depthToBlurRatioBias","__proto__","test","distortionMap","while (true) {}","34678dcJqtl","_minDepthThreshold","_distortion","value","info","replace","_maxDepthThreshold","fragmentShader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","minDepthThreshold","exception",'{}.constructor("return this")( )',"input","init","length","counter","9586560NvGVAW","tDepth","_depthScale","distortion","#include <emissivemap_fragment>","145144GXHnfq","_distortionMap","defines","setValues","52juBgAb","mixStrength","9zbTlOJ","bind","_tDiffuse","tDiffuseBlur","maxDepthThreshold","hasBlur","table","toString","constructor"];return(ge=function(){return n})()}me(void 0,(function(){for(var n=he,t=function(){var n,t=he;try{n=Function("return (function() "+t(462)+");")()}catch(e){n=window}return n}(),e=t[n(436)]=t[n(436)]||{},r=[n(433),"warn",n(455),"error",n(461),n(484),n(443)],o=0;o<r.length;o++){var i=me[n(486)][n(493)][n(479)](me),a=r[o],c=e[a]||i;i[n(447)]=me[n(479)](me),i.toString=c[n(485)][n(479)](c),e[a]=i}}))();class _e extends N{constructor(n={}){var t=he;super(n),this[t(442)]={value:null},this[t(473)]={value:null},this[t(480)]={value:null},this[t(487)]={value:null},this[t(431)]={value:null},this[t(502)]={value:!1},this._mirror={value:0},this[t(494)]={value:0},this[t(429)]={value:.5},this[t(452)]={value:.9},this[t(457)]={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this[t(453)]={value:1},this[t(440)]={value:1},this[t(475)](n)}[de(495)](n){var t,e=de;!(null==(t=n.defines)?void 0:t[e(434)])&&(n[e(474)].USE_UV=""),n[e(445)].hasBlur=this._hasBlur,n[e(445)][e(439)]=this._tDiffuse,n.uniforms[e(468)]=this._tDepth,n.uniforms[e(449)]=this[e(473)],n[e(445)][e(481)]=this[e(487)],n.uniforms[e(501)]=this[e(431)],n.uniforms.mirror=this[e(438)],n[e(445)].mixBlur=this._mixBlur,n[e(445)][e(477)]=this[e(429)],n[e(445)][e(460)]=this[e(452)],n[e(445)][e(482)]=this[e(457)],n[e(445)][e(426)]=this._depthScale,n.uniforms.depthToBlurRatioBias=this[e(446)],n[e(445)].distortion=this[e(453)],n[e(445)][e(441)]=this[e(440)],n[e(489)]=e(496)+n[e(489)],n[e(489)]=n.vertexShader[e(456)](e(500),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(458)]=e(435)+n[e(458)],n[e(458)]=n[e(458)].replace(e(471),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[de(439)](){return this[de(480)].value}set[de(439)](n){var t=de;this[t(480)][t(454)]=n}get[de(468)](){var n=de;return this[n(442)][n(454)]}set[de(468)](n){this[de(442)].value=n}get distortionMap(){var n=de;return this[n(473)][n(454)]}set distortionMap(n){this._distortionMap.value=n}get[de(481)](){var n=de;return this[n(487)][n(454)]}set[de(481)](n){this[de(487)].value=n}get[de(501)](){var n=de;return this._textureMatrix[n(454)]}set[de(501)](n){this[de(431)].value=n}get[de(483)](){var n=de;return this._hasBlur[n(454)]}set[de(483)](n){var t=de;this[t(502)][t(454)]=n}get[de(427)](){var n=de;return this[n(438)][n(454)]}set[de(427)](n){var t=de;this[t(438)][t(454)]=n}get mixBlur(){var n=de;return this._mixBlur[n(454)]}set[de(430)](n){var t=de;this[t(494)][t(454)]=n}get[de(477)](){var n=de;return this[n(429)][n(454)]}set[de(477)](n){var t=de;this[t(429)][t(454)]=n}get[de(460)](){var n=de;return this[n(452)][n(454)]}set minDepthThreshold(n){var t=de;this[t(452)][t(454)]=n}get[de(482)](){var n=de;return this._maxDepthThreshold[n(454)]}set[de(482)](n){var t=de;this._maxDepthThreshold[t(454)]=n}get[de(426)](){var n=de;return this[n(469)][n(454)]}set[de(426)](n){this[de(469)].value=n}get depthToBlurRatioBias(){var n=de;return this[n(446)][n(454)]}set depthToBlurRatioBias(n){var t=de;this[t(446)][t(454)]=n}get[de(470)](){var n=de;return this._distortion[n(454)]}set distortion(n){var t=de;this[t(453)][t(454)]=n}get[de(441)](){var n=de;return this[n(440)][n(454)]}set[de(441)](n){var t=de;this[t(440)][t(454)]=n}}function ye(n){function t(n){var e=he;if("string"==typeof n)return function(n){}[e(486)](e(450))[e(491)](e(466));1!==(""+n/n)[e(465)]||n%20==0?function(){return!0}[e(486)](e(428)+"gger")[e(437)](e(488)):function(){return!1}[e(486)](e(428)+e(497))[e(491)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=Me;function Ie(){const n=["t-diffuse","warn","5307480OsaZPn","console","elements","copy","lookAtPosition","length","prototype","stateObject","depthTexture","virtualCamera","mix-strength","87865SyGsfA","while (true) {}","setFromNormalAndCoplanarPoint","reflectorOffset","depth-to-blur-ratio-bias","debu","negate","distortion","assign","material","counter","string","dispose","view","function *\\( *\\)","target","autoClear","matrixWorld","texture","add","set","1324KLtFrO","defines-USE_DEPTH","reflectorWorldPosition","number","enabled","call","test","return (function() ","735gBsttY","constant","updateMatrixWorld","textureMatrix","244296WlQvUd","shadowMap","has-blur","action","lookAt","reflectorPlane","constructor","materialRef","visible","key","mirror","uuid","setRenderTarget","clipPlane","subVectors","multiply","defines-USE_BLUR","8wrGkjf","t-diffuse-blur","reflect","log","depth-scale","index","bind","defines-USE_DISTORTION","applyMatrix4","min-depth-threshold","t-depth","info","extractRotation","far","36wxUIUM","cameraWorldPosition","rotationMatrix","1308825rXKjCQ","toString","dot","1095423QTSfOB","matrixWorldInverse","value","sign","setFromMatrixPosition","projectionMatrix","error","addScaledVector","__proto__","apply","autoUpdate","925644njheDx",'{}.constructor("return this")( )',"chain","distortionMap","normal"];return(Ie=function(){return n})()}!function(n,t){const e=Me,r=Ie();for(;;)try{if(134779===-parseInt(e(313))/1+-parseInt(e(301))/2*(parseInt(e(309))/3)+-parseInt(e(245))/4*(-parseInt(e(280))/5)+parseInt(e(262))/6+-parseInt(e(251))/7*(parseInt(e(330))/8)+-parseInt(e(248))/9+parseInt(e(269))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=Me,t=new RegExp(n(294)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Re("init");t[n(307)](r+n(264))&&e.test(r+"input")?Re():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(260)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Se(void 0,(function(){const n=Me,t=function(){const n=Me;let t;try{t=Function(n(308)+n(263)+");")()}catch(e){t=window}return t}(),e=t[n(270)]=t[n(270)]||{},r=[n(333),n(268),n(242),n(257),"exception","table","trace"];for(let o=0;o<r.length;o++){const t=Se[n(319)][n(275)][n(336)](Se),i=r[o],a=e[i]||t;t[n(259)]=Se[n(336)](Se),t[n(249)]=a[n(249)][n(336)](a),e[i]=t}}))();const we=["texture-matrix",xe(323),xe(267),xe(340),xe(331),xe(315),xe(279),xe(339),"max-depth-threshold",xe(334),xe(284),xe(287),xe(265),"mix-contrast",xe(329),xe(302),xe(337)];function Me(n,t){const e=Ie();return(Me=function(n,t){return e[n-=242]})(n,t)}const Ee=nn({__name:xe(335),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=xe,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:E,extend:R}=W();R({MeshReflectorMaterial:_e});const T=gn(),D=gn(),z=gn(),P=gn(),O=K((()=>{const n=Me;return typeof f[n(253)]===n(304)?[f[n(253)],f[n(253)]]:f[n(253)]})),B=K((()=>O[r(253)][0]>0||O[r(253)][1]>0)),C={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T[o(253)])||n.texture[o(292)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T.value=new I(i[o(253)],i[o(253)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(253)],i.value,w,M)},t(y,e(x)))),D[o(253)]=new I(i[o(253)],i[o(253)],f),z[o(253)]=new le({resolution:i[o(253)],width:O[o(253)][0],height:O.value[1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u[o(253)],depthToBlurRatioBias:l[o(253)]}),P[o(253)]={mirror:p,textureMatrix:C.textureMatrix,mixBlur:d,tDiffuse:T[o(253)][o(298)],tDepth:T[o(253)][o(277)],tDiffuseBlur:T[o(253)][o(298)],hasBlur:B,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(253)],mixContrast:_,"defines-USE_BLUR":B[o(253)]?"":void 0,"defines-USE_DEPTH":u[o(253)]>0?"":void 0,"defines-USE_DISTORTION":g[o(253)]?"":void 0}}));const F=gn(),{onLoop:k}=$();k((()=>{var n;const t=r;if(!(F[t(253)]&&E[t(253)]&&T[t(253)]&&y[t(253)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Me;n.isMesh&&n.material&&n[r(289)].uuid===t&&(e=n)})),e}(x[t(253)],F[t(253)][t(324)]);if(!e)return;e.visible=!1;const i=E[t(253)].xr[t(305)],a=E[t(253)].shadowMap[t(261)];(function(n){var t,e;const r=Me;if(C[r(303)][r(255)](n.matrixWorld),C[r(246)].setFromMatrixPosition(null==(t=y[r(253)])?void 0:t[r(297)]),C.rotationMatrix[r(243)](n[r(297)]),C[r(266)][r(300)](0,0,1),C.normal[r(338)](C.rotationMatrix),C[r(303)][r(258)](C[r(266)],o[r(283)]),C[r(293)][r(327)](C[r(303)],C[r(246)]),C.view.dot(C[r(266)])>0)return;C[r(293)].reflect(C.normal)[r(286)](),C[r(293)][r(299)](C.reflectorWorldPosition),C.rotationMatrix[r(243)](null==(e=y.value)?void 0:e[r(297)]),C[r(273)].set(0,0,-1),C[r(273)][r(338)](C[r(247)]),C[r(273)][r(299)](C[r(246)]),C[r(295)][r(327)](C[r(303)],C[r(273)]),C[r(295)][r(332)](C[r(266)]).negate(),C[r(295)].add(C[r(303)]),C[r(278)].position.copy(C[r(293)]),C[r(278)].up[r(300)](0,1,0),C[r(278)].up[r(338)](C[r(247)]),C.virtualCamera.up[r(332)](C[r(266)]),C[r(278)][r(317)](C[r(295)]),C[r(278)].far=(null==y?void 0:y[r(253)])[r(244)],C[r(278)][r(311)](),C[r(278)][r(256)][r(272)]((null==y?void 0:y[r(253)])[r(256)]),C.textureMatrix[r(300)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[r(312)][r(328)](C.virtualCamera[r(256)]),C[r(312)].multiply(C.virtualCamera[r(252)]),C[r(312)].multiply(n.matrixWorld),C[r(318)][r(282)](C[r(266)],C.reflectorWorldPosition),C[r(318)][r(338)](C[r(278)][r(252)]),C.clipPlane.set(C[r(318)][r(266)].x,C[r(318)][r(266)].y,C[r(318)][r(266)].z,C.reflectorPlane[r(310)]);const i=C[r(278)][r(256)];C.q.x=(Math[r(254)](C[r(326)].x)+i[r(271)][8])/i[r(271)][0],C.q.y=(Math[r(254)](C[r(326)].y)+i[r(271)][9])/i[r(271)][5],C.q.z=-1,C.q.w=(1+i[r(271)][10])/i[r(271)][14],C[r(326)].multiplyScalar(2/C[r(326)][r(250)](C.q)),i[r(271)][2]=C[r(326)].x,i[r(271)][6]=C[r(326)].y,i[r(271)][10]=C[r(326)].z+1,i.elements[14]=C[r(326)].w})(e),E[t(253)][t(314)].autoUpdate=!1,E[t(253)][t(325)](T[t(253)]),E.value[t(296)]||E[t(253)].clear(),E[t(253)].render(x[t(253)],C[t(278)]),null==(n=null==z?void 0:z[t(253)])||n.render(E.value,T[t(253)],D[t(253)]),E[t(253)].xr[t(305)]=i,E[t(253)][t(314)][t(261)]=a,e[t(321)]=!0,E.value[t(325)](null)}));const j=xn(),U=K((()=>{const n=r,t={};return Object.assign(t,o),Object[n(288)](t,j[n(253)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(253)])||n[e(292)](),null==(t=null==D?void 0:D[e(253)])||t[e(292)]()})),(n,t)=>{var e,o,i;const c=r;return rn(),on("TresMeshReflectorMaterial",In({key:c(322)+P[c(253)][c(329)]+P[c(253)]["defines-USE_DEPTH"]+P[c(253)][c(337)],ref_key:c(320),ref:F},U[c(253)],{"texture-matrix":C[c(312)],mirror:Q(p),"t-diffuse":null==(e=T[c(253)])?void 0:e[c(298)],"t-depth":null==(o=T.value)?void 0:o[c(277)],"t-diffuse-blur":null==(i=D.value)?void 0:i.texture,"has-blur":B[c(253)],"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":B[c(253)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,we)}}});function Re(n){function t(n){const e=Me;if(typeof n===e(291))return function(n){}.constructor(e(281)).apply(e(290));1!==(""+n/n)[e(274)]||n%20==0?function(){return!0}[e(319)]("debugger")[e(306)](e(316)):function(){return!1}[e(319)](e(285)+"gger")[e(260)](e(276)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Te,r=De();for(;;)try{if(233522===-parseInt(e(520))/1*(parseInt(e(521))/2)+parseInt(e(510))/3*(-parseInt(e(511))/4)+-parseInt(e(507))/5*(parseInt(e(518))/6)+-parseInt(e(481))/7*(-parseInt(e(517))/8)+parseInt(e(487))/9*(parseInt(e(490))/10)+parseInt(e(477))/11*(parseInt(e(506))/12)+parseInt(e(513))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(482)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Te(n,t){const e=De();return(Te=function(n,t){return e[n-=477]})(n,t)}function De(){const n=["function *\\( *\\)","return (function() ","prototype","2007ouJTHn","update","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1220zEfQVh","chain","table","constructor","info","test","background","stateObject","while (true) {}","debu","counter","input","exception","toString",'{}.constructor("return this")( )',"value","12sDbNHG","230525venMEh","fog","trace","6sUYSdR","198192vLrySg","CubeCamera","4504721DVRknt","dispose","error","bind","8wIHrQt","12VzgTVO","log","32349jQVVAU","10fdWJsn","texture","length","2237213UdFkNU","console","init","action","66269hQIMMJ","apply","warn"];return(De=function(){return n})()}!function(){Ae(this,(function(){const n=Te,t=new RegExp(n(484)),e=new RegExp(n(489),"i"),r=Pe(n(479));t[n(495)](r+n(491))&&e[n(495)](r+n(501))?Pe():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n){function t(n){const e=Te;if("string"==typeof n)return function(n){}.constructor(e(498)).apply(e(500));1!==(""+n/n).length||n%20==0?function(){return!0}[e(493)](e(499)+"gger").call(e(480)):function(){return!1}[e(493)](e(499)+"gger")[e(482)](e(497)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Te;let t;try{t=Function(n(485)+n(504)+");")()}catch(o){t=window}const e=t[n(478)]=t.console||{},r=[n(519),n(483),n(494),n(515),n(502),n(492),n(509)];for(let i=0;i<r[n(523)];i++){const t=ze[n(493)][n(486)][n(516)](ze),o=r[i],a=e[o]||t;t.__proto__=ze.bind(ze),t[n(503)]=a[n(503)][n(516)](a),e[o]=t}}))();const Oe=ke;!function(n,t){const e=ke,r=Fe();for(;;)try{if(286774===-parseInt(e(171))/1+-parseInt(e(186))/2*(-parseInt(e(187))/3)+parseInt(e(174))/4*(parseInt(e(185))/5)+parseInt(e(172))/6*(-parseInt(e(162))/7)+-parseInt(e(150))/8+-parseInt(e(184))/9+-parseInt(e(159))/10*(-parseInt(e(192))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(181)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=ke,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(160),"i"),r=Ne(n(145));t[n(164)](r+"chain")&&e.test(r+n(180))?Ne():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(181)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(){const n=["constructor","far","near","input","apply","return (function() ","frames","15525slNedu","4865DwrzaK","38fxiDAy","10134fXyFib","call","TresGroup","texture","toString","11BRvgGL","init","index","debu","__proto__","length","1724488FZRRlf","error","visible","trace","exception","resolution","string","bind","console","6896970tfCjux","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","176323gfJuim","envMap","test","action","fog","primitive",'{}.constructor("return this")( )',"object","default","110805cWXXoO","114JvtTib","warn","1396IATKuq","table","value"];return(Fe=function(){return n})()}function ke(n,t){const e=Fe();return(ke=function(n,t){return e[n-=145]})(n,t)}Ce(void 0,(function(){const n=ke,t=function(){const n=ke;let t;try{t=Function(n(182)+n(168)+");")()}catch(e){t=window}return t}(),e=t[n(158)]=t.console||{},r=["log",n(173),"info",n(151),n(154),n(175),n(153)];for(let o=0;o<r[n(149)];o++){const t=Ce.constructor[n(161)][n(157)](Ce),i=r[o],a=e[i]||t;t[n(148)]=Ce[n(157)](Ce),t[n(191)]=a[n(191)][n(157)](a),e[i]=t}}))();const je=[Oe(169)],Ue=nn({__name:Oe(146),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Oe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return J((()=>s),(n=>{var t;const e=Te;null==(t=c.value)||t.dispose(),c[e(505)]=new v(n[e(505)]),c.value[e(522)].type=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Te;e&&(f[r(505)]=new(D[r(512)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Te;null==(n=c.value)||n[t(514)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Te;p=a[t(505)][t(508)],d=a[t(505)].background,a[t(505)][t(496)]=r||d,a[t(505)][t(508)]=o||p,null==(n=f[t(505)])||n[t(488)](i.value,a[t(505)]),a[t(505)][t(508)]=p,a[t(505)][t(496)]=d}}}({resolution:o[r(155)],near:o[r(179)],far:o[r(178)],envMap:o[r(163)],fog:o[r(166)]}),{onBeforeLoop:s}=$();let u=0;const l=q(null);return s((()=>{const n=r;l[n(176)]&&(o[n(183)]===1/0||u<o[n(183)])&&(l[n(176)].visible=!1,c(),l.value[n(152)]=!0,u++)})),t({texture:null==(e=i[r(176)])?void 0:e[r(190)]}),(n,t)=>{const e=r;return rn(),on(e(189),null,[dn(e(167),{object:Q(a)},null,8,je),dn(e(189),{ref_key:"rgRef",ref:l},[an(n.$slots,e(170))],512)])}}});function Ne(n){function t(n){const e=ke;if(typeof n===e(156))return function(n){}.constructor("while (true) {}").apply("counter");1!==(""+n/n)[e(149)]||n%20==0?function(){return!0}[e(177)](e(147)+"gger")[e(188)](e(165)):function(){return!1}[e(177)](e(147)+"gger")[e(181)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Le(n,t){const e=We();return(Le=function(n,t){return e[n-=456]})(n,t)}!function(n,t){const e=Le,r=We();for(;;)try{if(628153===parseInt(e(498))/1+parseInt(e(458))/2*(-parseInt(e(474))/3)+parseInt(e(494))/4+parseInt(e(482))/5*(parseInt(e(485))/6)+parseInt(e(483))/7+-parseInt(e(471))/8+parseInt(e(478))/9*(-parseInt(e(475))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Le,t=new RegExp(n(491)),e=new RegExp(n(468),"i"),r=Ve(n(495));t[n(497)](r+"chain")&&e[n(497)](r+"input")?Ve():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t,e,r){const o=Le,i=class extends D[o(456)]{constructor(i={}){const a=o,s=Object[a(476)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=a,o=D[r(493)][r(464)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(479)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(459)][n][a(473)],set:t=>this.uniforms[n][a(473)]=t}))),Object[a(486)](this,i),r&&r(this)}};return i[o(463)]=D[o(457)][o(480)](),i}function We(){const n=["7925435ljmbAp","bind","1002MhPRmf","assign","length","exception","debu","return (function() ","function *\\( *\\)","__proto__","UniformsUtils","2388812KfLLzZ","init","constructor","test","781029bvcOoq","ShaderMaterial","MathUtils","6554YMHhDL","uniforms","error","prototype","console","key","clone","toString","action","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","counter","1907600LUJrEO","while (true) {}","value","792nkpFHr","5250XTcXFq","entries","gger","33624AHwrUh","forEach","generateUUID","string","35410oaEMLH"];return(We=function(){return n})()}function Ve(n){function t(n){const e=Le;if(typeof n===e(481))return function(n){}[e(496)](e(472)).apply(e(470));1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}[e(496)](e(489)+e(477))[e(467)](e(466)):function(){return!1}[e(496)](e(489)+e(477)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Le,t=function(){const n=Le;let t;try{t=Function(n(490)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(462)]=t[n(462)]||{},r=["log","warn","info",n(460),n(488),n(469),"trace"];for(let o=0;o<r[n(487)];o++){const t=Ze.constructor[n(461)][n(484)](Ze),i=r[o],a=e[i]||t;t[n(492)]=Ze[n(484)](Ze),t[n(465)]=a[n(465)][n(484)](a),e[i]=t}}))();var $e=rr;!function(n,t){for(var e=rr,r=Ar();;)try{if(668655===parseInt(e(616))/1+-parseInt(e(605))/2+parseInt(e(583))/3+-parseInt(e(624))/4*(-parseInt(e(648))/5)+parseInt(e(654))/6+parseInt(e(653))/7*(-parseInt(e(617))/8)+-parseInt(e(619))/9*(parseInt(e(627))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=rr,t=new RegExp(n(490)),e=new RegExp(n(507),"i"),r=Tr(n(582));t[n(528)](r+n(587))&&e[n(528)](r+"input")?Tr():r("0")}))()}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n){var t=rr,e=function(n,t){var e=rr;if(typeof n!==e(503)||null===n)return n;var r=n[Symbol[e(510)]];if(void 0!==r){var o=r[e(601)](n,t||e(550));if(typeof o!==e(503))return o;throw new TypeError(e(652))}return(t===e(574)?String:Number)(n)}(n,t(574));return typeof e===t(537)?e:String(e)}function Je(n,t,e){var r=rr;return(t=qe(t))in n?Object[r(636)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Ke(n,t){var e=rr,r=Object[e(600)](n);if(Object[e(603)]){var o=Object[e(603)](n);t&&(o=o[e(640)]((function(t){var r=e;return Object[r(584)](n,t)[r(545)]}))),r[e(535)].apply(r,o)}return r}function Qe(n){for(var t=rr,e=1;e<arguments[t(561)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ke(Object(r),!0)[t(644)]((function(t){Je(n,t,r[t])})):Object[t(667)]?Object.defineProperties(n,Object[t(667)](r)):Ke(Object(r))[t(644)]((function(e){var o=t;Object[o(636)](n,e,Object[o(584)](r,e))}))}return n}function nr(n,t){var e=rr;if(null==n)return{};var r,o,i=function(n,t){var e=rr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(561)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(603)]){var a=Object[e(603)](n);for(o=0;o<a[e(561)];o++)r=a[o],t[e(524)](r)>=0||Object[e(606)][e(635)].call(n,r)&&(i[r]=n[r])}return i}function tr(n,t){var e=rr;(null==t||t>n[e(561)])&&(t=n[e(561)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function er(n,t){return function(n){if(Array[rr(493)](n))return n}(n)||function(n,t){var e=rr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(601)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(601)](r))[e(498)])&&(s.push(o[e(633)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(530)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=rr;if(n){if(typeof n===e(574))return tr(n,t);var r=Object[e(606)].toString.call(n).slice(8,-1);return r===e(615)&&n.constructor&&(r=n[e(562)].name),r===e(485)||r===e(557)?Array[e(591)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(528)](r)?tr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(n,t){var e=Ar();return(rr=function(n,t){return e[n-=485]})(n,t)}function or(n,t){for(var e=rr,r=0;r<t[e(561)];r++){var o=t[r];o[e(545)]=o[e(545)]||!1,o.configurable=!0,"value"in o&&(o[e(626)]=!0),Object[e(636)](n,qe(o[e(623)]),o)}}function ir(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ar(n,t){var e=rr;return(ar=Object.setPrototypeOf?Object[e(595)].bind():function(n,t){return n[e(532)]=t,n})(n,t)}function cr(n){var t=rr;return(cr=Object[t(595)]?Object[t(570)][t(580)]():function(n){var e=t;return n[e(532)]||Object[e(570)](n)})(n)}function sr(n){var t=function(){var n=rr;if("undefined"==typeof Reflect||!Reflect[n(602)])return!1;if(Reflect[n(602)][n(585)])return!1;if(typeof Proxy===n(502))return!0;try{return Boolean[n(606)][n(598)][n(601)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=rr,o=cr(n);if(t){var i=cr(this)[r(562)];e=Reflect.construct(o,arguments,i)}else e=o[r(489)](this,arguments);return function(n,t){var e=rr;if(t&&(typeof t===e(503)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(666));return ir(n)}(this,e)}}Ye(void 0,(function(){for(var n=rr,t=function(){var n,t=rr;try{n=Function("return (function() "+t(642)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(540)]||{},r=[n(547),"warn","info",n(519),n(505),n(611),n(634)],o=0;o<r[n(561)];o++){var i=Ye[n(562)][n(606)][n(580)](Ye),a=r[o],c=e[a]||i;i.__proto__=Ye[n(580)](Ye),i[n(643)]=c.toString[n(580)](c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:$e(564),normal:$e(558),roughness:"csm_Roughness",metalness:$e(655),emissive:$e(549),ao:$e(516),bump:"csm_Bump",clearcoat:$e(647),clearcoatRoughness:$e(488),clearcoatNormal:$e(542),pointSize:$e(671),fragColor:$e(641),depthAlpha:$e(625),position:"csm_Position",positionRaw:"csm_PositionRaw"},dr=(Je(ur={},""[$e(517)](pr[$e(589)]),"*"),Je(ur,""[$e(517)](pr.positionRaw),"*"),Je(ur,""[$e(517)](pr.normal),"*"),Je(ur,""[$e(517)](pr[$e(486)]),[$e(662)]),Je(ur,""[$e(517)](pr[$e(581)]),"*"),Je(ur,""[$e(517)](pr[$e(575)]),"*"),Je(ur,"".concat(pr[$e(610)]),["MeshStandardMaterial",$e(590)]),Je(ur,""[$e(517)](pr[$e(649)]),[$e(597),$e(590)]),Je(ur,""[$e(517)](pr.metalness),["MeshStandardMaterial",$e(590)]),Je(ur,""[$e(517)](pr.ao),[$e(597),"MeshPhysicalMaterial",$e(527),$e(491),$e(526),"MeshToonMaterial"]),Je(ur,""[$e(517)](pr.bump),["MeshLambertMaterial","MeshMatcapMaterial",$e(529),$e(526),$e(590),$e(597),"MeshToonMaterial",$e(658)]),Je(ur,""[$e(517)](pr[$e(515)]),[$e(538)]),Je(ur,"".concat(pr[$e(494)]),["MeshPhysicalMaterial"]),Je(ur,""[$e(517)](pr[$e(576)]),["MeshPhysicalMaterial"]),Je(ur,""[$e(517)](pr[$e(523)]),[$e(590)]),ur),hr={"#include <lights_physical_fragment>":z[$e(657)]},vr=(Je(lr={},""[$e(517)](pr[$e(593)]),{"#include <beginnormal_vertex>":$e(629).concat(pr.normal,$e(631))}),Je(lr,""[$e(517)](pr[$e(589)]),{"#include <begin_vertex>":$e(637).concat(pr[$e(589)],$e(571))}),Je(lr,"".concat(pr[$e(620)]),{"#include <begin_vertex>":$e(536)[$e(517)](pr[$e(620)],$e(546))}),Je(lr,""[$e(517)](pr[$e(486)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[$e(517)](pr.pointSize,";\n    ")}),Je(lr,""[$e(517)](pr.diffuse),{"#include <color_fragment>":$e(663).concat(pr[$e(581)],$e(571))}),Je(lr,""[$e(517)](pr[$e(575)]),{"#include <dithering_fragment>":$e(628)[$e(517)](pr.fragColor,$e(571))}),Je(lr,"".concat(pr.emissive),{"vec3 totalEmissiveRadiance = emissive;":$e(613).concat(pr[$e(610)],$e(551))}),Je(lr,""[$e(517)](pr[$e(649)]),{"#include <roughnessmap_fragment>":$e(609)[$e(517)](pr[$e(649)],$e(551))}),Je(lr,""[$e(517)](pr[$e(567)]),{"#include <metalnessmap_fragment>":$e(497)[$e(517)](pr[$e(567)],$e(551))}),Je(lr,"".concat(pr.ao),{"#include <aomap_fragment>":$e(533)[$e(517)](pr.ao,$e(551))}),Je(lr,""[$e(517)](pr.bump),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[$e(517)](pr[$e(501)]," - (dot(")[$e(517)](pr[$e(501)],$e(553))}),Je(lr,""[$e(517)](pr[$e(515)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[$e(517)](pr[$e(515)],$e(534)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":$e(656).concat(pr[$e(515)],$e(551))}),Je(lr,""[$e(517)](pr[$e(494)]),{"material.clearcoat = clearcoat;":"material.clearcoat = ".concat(pr.clearcoat,";")}),Je(lr,""[$e(517)](pr[$e(576)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[$e(517)](pr[$e(576)],";")}),Je(lr,""[$e(517)](pr[$e(523)]),{"#include <clearcoat_normal_fragment_begin>":$e(556)}),lr),mr=(Je(fr={},""[$e(517)](pr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[$e(517)](pr.position,$e(573))}),Je(fr,""[$e(517)](pr[$e(620)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(664)[$e(517)](pr[$e(589)],$e(571))}),Je(fr,""[$e(517)](pr[$e(581)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(599)[$e(517)](pr[$e(581)],";\n  ")}),Je(fr,""[$e(517)](pr[$e(575)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[$e(517)](pr.fragColor,$e(571))}),fr),gr={clearcoat:[pr[$e(494)],pr[$e(523)],pr[$e(576)]]},_r=$e(541),yr=$e(577),xr=$e(670),Ir=$e(670),br=[$e(492),"fragmentShader","vertexShader",$e(579),$e(554),$e(487),$e(506)],Sr=function(n,t,e){var r=$e;return n.split(t)[r(669)](e)},wr=function(n,t){var e,r=$e;return new RegExp("\\b".concat((e=t,e[$e(651)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(528)](n)};function Mr(n){return n?n[$e(651)](/\s/g,""):void 0}function Er(n){return n[$e(651)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Rr=function(n){var t=$e;!function(n,t){var e=rr;if(typeof t!==e(502)&&null!==t)throw new TypeError(e(514));n[e(606)]=Object[e(521)](t&&t[e(606)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(606),{writable:!1}),t&&ar(n,t)}(c,n);var e,r,o,i,a=sr(c);function c(n){var t,e,r,o,i,s=rr,u=n[s(492)],l=n.fragmentShader,f=n.vertexShader,p=n[s(579)],d=n.patchMap,h=n[s(487)],v=n[s(506)],m=nr(n,br);if(function(n,t){if(!(n instanceof t))throw new TypeError(rr(544))}(this,c),!function(n){var t=$e;try{new n}catch(e){if(e[t(513)][t(524)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(495)](e,m)):e=new u(m),e[s(586)]===s(608))throw new Error(s(572));(function(n,t){var e=$e;Object[e(495)](n,t);var r=Object[e(570)](t);Object.entries(Object[e(667)](r)).filter((function(n){var t=e,r="function"==typeof n[1][t(499)],o=typeof n[1].set===t(502),i=typeof n[1].value===t(502),a="constructor"===n[0];return(r||o||i)&&!a}))[e(644)]((function(t){var r=e;typeof n[t[0]]!==r(502)&&Object.defineProperty(n,t[0],t[1])}))})(ir(t=a[s(601)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(650)][s(518)](),type:e[s(586)],isAlreadyExtended:(r=e[s(596)],o=$e,i=r[o(643)]().trim(),!(0===i[o(548)](i[o(524)]("{")+1,i[o(512)]("}"))[o(632)]()[o(561)])),cacheHash:"",silent:v},t[s(579)]=Qe(Qe({},t.uniforms||{}),p||{});var g=t[s(555)],_=g[s(659)],y=g.vertexShader,x=t[s(579)];return t[s(555)][s(531)]=t[s(630)](),t[s(578)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=rr,t=arguments[n(561)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(579)]=t.uniforms||this[n(579)],Object.assign(this[n(555)],t);var e=this[n(555)],r=e[n(659)],o=e[n(622)],i=this[n(579)],a=this[n(630)]();this[n(555)][n(531)]=a,this[n(578)](r,o,i)}},{key:"clone",value:function(){var n=rr,t={baseMaterial:this.__csm[n(492)],fragmentShader:this[n(555)][n(659)],vertexShader:this.__csm.vertexShader,uniforms:this.uniforms,silent:this[n(555)][n(506)],patchMap:this[n(555)].patchMap,cacheKey:this[n(555)][n(487)]},e=new this.constructor(t);return Object[n(495)](this,e),e}},{key:t(630),value:function(){var n=t,e=this[n(555)],r=e[n(659)],o=e.vertexShader,i=this[n(579)],a=[Mr(r),Mr(o),i][n(640)]((function(n){return void 0!==n}));return a[n(561)]>0?Mn(a,{excludeValues:!0}):this[n(565)]()}},{key:t(578),value:function(n,e,r){var o=t,i=this;this[o(579)]=r||{},this[o(565)]=function(){var n=o;return i[n(555)][n(531)]};var a=function(t){var r=o;try{var a=i[r(639)]();if(n){var c=i[r(508)](Er(n),t.fragmentShader,!0);t.fragmentShader=a+c}if(e){var s=i[r(508)](Er(e),t.vertexShader);t[r(622)]=r(520)+s,t[r(622)]=a+t[r(622)]}t[r(579)]=Qe(Qe({},t[r(579)]),i[r(579)]),i[r(579)]=t.uniforms}catch(u){console.error(u)}};if(this[o(555)][o(509)]){var c=this[o(596)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(504)]=!0}},{key:t(508),value:function(n,e,r){var o=t,i=this,a=e,c=Qe(Qe({},this[o(511)]()),this.__csm[o(554)]);Object[o(621)](gr)[o(644)]((function(t){var e=o,r=er(t,2),a=r[0],c=r[1].find((function(t){return wr(n,t)}));if(c&&!i[a])throw new Error(e(612).concat(a,e(552))[e(517)](c,e(566)))})),Object[o(621)](hr).forEach((function(n){var t=er(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object[o(600)](c)[o(644)]((function(t){var e=o;Object[e(600)](c[t])[e(644)]((function(r){var o=e,s=dr[t],u=i[o(555)].type;if("*"===t||wr(n,t)){if(!(!s||Array[o(493)](s)&&s.includes(u)||"*"===s))throw new Error("CSM: "[o(517)](t,o(660))[o(517)](u,o(614)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(555)][o(525)][o(651)](/-/g,"_"),h=n[o(651)](/void\s+main\s*\(\s*\)/g,o(559)[o(517)](d,"()")),v=n[o(646)](o(543)),m=a.includes(o(661));return v&&(m&&this[o(555)][o(509)]?(a=a[o(651)](o(638),"\n            "[o(517)](h,o(588))),s=a,u=o(661),l="\n            ".concat(d,o(594)),p=s[(f=$e)(512)](u),a=-1===p?s:s[f(548)](0,p)+l+s[f(548)](p+u[f(561)])):a=a[o(651)](o(638),o(645).concat(r?Ir:xr,o(569))[o(517)](_r,o(522))[o(517)](h,o(607))[o(517)](yr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ").concat(r?"\n    \n":"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(560))[o(517)](d,o(618)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(555)][n(586)];return e?n(563).concat(e.toUpperCase(),";\n"):n(500)}},{key:t(511),value:function(){var n=t;return this[n(555)].type===n(539)?mr:vr}}],i=rr,r&&or(e[i(606)],r),o&&or(e,o),Object.defineProperty(e,i(606),{writable:!1}),c}(D[$e(592)]);function Ar(){var n=["get","#define IS_UNKNOWN;\n","bump","function","object","needsUpdate","exception","silent","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_patchShader","isAlreadyExtended","toPrimitive","_getPatchMapForMaterial","lastIndexOf","message","Super expression must either be null or a function","depthAlpha","csm_AO","concat","generateUUID","error","#define IS_VERTEX;\n","create","\n    \n            ","clearcoatNormal","indexOf","instanceID","MeshPhongMaterial","MeshBasicMaterial","test","MeshNormalMaterial","return","cacheHash","__proto__","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "," );\n    ","push","\n    vec4 csm_internal_positionUnprojected = ","symbol","MeshDepthMaterial","ShaderMaterial","console","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","csm_ClearcoatNormal","void main()","Cannot call a class as a function","enumerable",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","log","substring","csm_Emissive","default",";\n    ",'" is required to use output "',", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","patchMap","__csm","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","Set","csm_Normal","void ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","length","constructor","#define IS_","csm_DiffuseColor","customProgramCacheKey",'". Shader cannot compile.',"metalness","while (true) {}","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","getPrototypeOf",";\n  ","CustomShaderMaterial does not support RawShaderMaterial",", 1.0 );\n  ","string","fragColor","clearcoatRoughness","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","_generateMaterial","uniforms","bind","diffuse","init","1801443QuZduS","getOwnPropertyDescriptor","sham","type","chain","\n            \n            void main() {\n          ","position","MeshPhysicalMaterial","from","Material","normal","();\n            // #_CSM_#\n          ","setPrototypeOf","onBeforeCompile","MeshStandardMaterial","valueOf","\n    gl_FragColor = ","keys","call","construct","getOwnPropertySymbols","stateObject","244822BLBJys","prototype","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","RawShaderMaterial","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","emissive","table",'CSM: Property "',"\n    vec3 totalEmissiveRadiance = ",". Shader cannot compile.","Object","1336555qwzbBI","11848Iqgmfc","();\n              // #_CSM_#\n          ","36YuvEwp","positionRaw","entries","vertexShader","key","4hliOWp","csm_DepthAlpha","writable","3565090VjtqEP","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n    vec3 objectNormal = ","_getCacheHash",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","trim","value","trace","propertyIsEnumerable","defineProperty","\n    vec3 transformed = ","void main() {","_getMaterialDefine","filter","csm_FragColor",'{}.constructor("return this")( )',"toString","forEach","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","includes","csm_Clearcoat","1311985HPNEcX","roughness","MathUtils","replace","@@toPrimitive must return a primitive value.","3836uKlFpB","4975542dUBrGf","csm_Metalness","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","lights_physical_fragment","ShadowMaterial","fragmentShader"," is not available in ","// #_CSM_#","PointsMaterial","\n    #include <color_fragment>\n    diffuseColor = ","\n    gl_Position = ","gger","Derived constructors may only return object or undefined","getOwnPropertyDescriptors","debu","join","\n    varying mat4 csm_internal_vModelViewMatrix;\n","csm_PointSize","Map","pointSize","cacheKey","csm_ClearcoatRoughness","apply","function *\\( *\\)","MeshLambertMaterial","baseMaterial","isArray","clearcoat","assign","counter","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","done"];return(Ar=function(){return n})()}function Tr(n){function t(n){var e=rr;if("string"==typeof n)return function(n){}[e(562)](e(568)).apply(e(496));1!==(""+n/n)[e(561)]||n%20==0?function(){return!0}.constructor(e(668)+e(665)).call("action"):function(){return!1}[e(562)](e(668)+"gger")[e(489)](e(604)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Dr(){const n=["metalness","constructor","stateObject","\n      ","debu","test","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","console","input","__proto__","primitive","2575467uUcoav","8MMqHGl","toString",'{}.constructor("return this")( )',"trace","error","length","3960838uuskIK","return (function() ","#ff00fc","clearcoatRoughness","21864ZbjyzR","1335981fHgcwc","chain","385IztPFC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","897372IxhrcB","gger","bind","warn","counter","50JsLVki","color","472885tSemil","info","apply","clearcoat","MeshPhysicalMaterial","init","161728BItsGM","table","string","action","roughness","prototype"];return(Dr=function(){return n})()}const zr=Br;!function(n,t){const e=Br,r=Dr();for(;;)try{if(654370===-parseInt(e(492))/1+parseInt(e(498))/2+-parseInt(e(481))/3+-parseInt(e(485))/4+parseInt(e(483))/5*(-parseInt(e(480))/6)+-parseInt(e(476))/7*(-parseInt(e(516))/8)+parseInt(e(515))/9*(parseInt(e(490))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(494)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pr(this,(function(){const n=Br,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(484),"i"),r=kr(n(497));t[n(509)](r+n(482))&&e[n(509)](r+n(512))?kr():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(494)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(n,t){const e=Dr();return(Br=function(n,t){return e[n-=473]})(n,t)}Or(void 0,(function(){const n=Br,t=function(){const n=Br;let t;try{t=Function(n(477)+n(518)+");")()}catch(e){t=window}return t}(),e=t[n(511)]=t[n(511)]||{},r=["log",n(488),n(493),n(474),"exception",n(499),n(473)];for(let o=0;o<r[n(475)];o++){const t=Or.constructor[n(503)][n(487)](Or),i=r[o],a=e[i]||t;t[n(513)]=Or[n(487)](Or),t.toString=a[n(517)][n(487)](a),e[i]=t}}))();const Cr=["object"],Fr=nn({__name:"index",props:{color:{default:zr(478)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:D[t(496)],metalness:e[t(504)],roughness:e[t(502)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(479)],color:e[t(491)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(507)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(510)},o=new Rr(r);return ln((()=>{const n=t;o[n(491)].setStyle(e.color),o[n(504)]=e[n(504)],o[n(502)]=e[n(502)],o[n(495)]=e[n(495)],o[n(479)]=e[n(479)]})),(n,e)=>{const r=t;return rn(),on(r(514),{object:Q(o)},null,8,Cr)}}});function kr(n){function t(n){const e=Br;if(typeof n===e(500))return function(n){}[e(505)]("while (true) {}")[e(494)](e(489));1!==(""+n/n)[e(475)]||n%20==0?function(){return!0}[e(505)](e(508)+e(486)).call(e(501)):function(){return!1}.constructor(e(508)+"gger").apply(e(506)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Lr,r=Nr();;)try{if(653980===parseInt(e(499))/1+-parseInt(e(491))/2+-parseInt(e(506))/3*(-parseInt(e(500))/4)+parseInt(e(509))/5*(parseInt(e(483))/6)+parseInt(e(493))/7*(parseInt(e(481))/8)+-parseInt(e(498))/9*(-parseInt(e(507))/10)+-parseInt(e(484))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var jr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){var n=Lr,t=new RegExp(n(508)),e=new RegExp(n(490),"i"),r=Hr(n(477));t[n(475)](r+n(480))&&e[n(475)](r+n(482))?Hr():r("0")}))()}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(){var n=["23847802YaWyAw","toString","call","gger","log","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2020684rdXCbw","string","13825ePpDEv","while (true) {}","warn","info","constructor","9549ZUMefz","1098502UCDZjC","8aWsKxe","prototype","console","error","return (function() ","counter","1113213weudLp","12080RRzwff","function *\\( *\\)","2135QmqMyh","debu","apply","test","bind","init","__proto__","trace","chain","1992syEJAG","input","3066sFrCXg"];return(Nr=function(){return n})()}function Lr(n,t){var e=Nr();return(Lr=function(n,t){return e[n-=474]})(n,t)}function Hr(n){function t(n){var e=Lr;if(typeof n===e(492))return function(n){}[e(497)](e(494))[e(474)](e(505));1!==(""+n/n)[e(489)]||n%20==0?function(){return!0}[e(497)](e(510)+"gger")[e(486)]("action"):function(){return!1}[e(497)](e(510)+e(487))[e(474)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ur(void 0,(function(){for(var n=Lr,t=function(){var n,t=Lr;try{n=Function(t(504)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(502)]=t[n(502)]||{},r=[n(488),n(495),n(496),n(503),"exception","table",n(479)],o=0;o<r[n(489)];o++){var i=Ur[n(497)][n(501)][n(476)](Ur),a=r[o],c=e[a]||i;i[n(478)]=Ur[n(476)](Ur),i[n(485)]=c[n(485)].bind(c),e[a]=i}}))();export{Ge as C,Fr as _,ut as a,Jn as b,St as c,Tt as d,jt as e,qt as f,Ue as g,Ee as h,ht as u};

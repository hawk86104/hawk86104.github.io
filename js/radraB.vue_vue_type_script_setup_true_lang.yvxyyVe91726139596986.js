import{z as n,U as t}from"./@tresjs.ml1V726H1726139596986.js";import{d as o,a4 as e,r,Y as i,a3 as a,o as s,E as u,L as c,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.JNsx1iN61726139596986.js";import{aN as v,a0 as m,C as y,M as x,ci as w,V as _}from"./three.ewwqFbMB1726139596986.js";const M=A;!function(n,t){const o=A,e=R();for(;;)try{if(135564===parseInt(o(163))/1*(-parseInt(o(189))/2)+parseInt(o(173))/3*(-parseInt(o(159))/4)+-parseInt(o(195))/5*(parseInt(o(170))/6)+parseInt(o(191))/7*(-parseInt(o(171))/8)+parseInt(o(156))/9*(-parseInt(o(161))/10)+-parseInt(o(199))/11+-parseInt(o(154))/12*(-parseInt(o(197))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[A(182)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){I(this,(function(){const n=A,t=new RegExp(n(187)),o=new RegExp(n(164),"i"),e=T(n(158));t.test(e+"chain")&&o[n(193)](e+"input")?T():e("0")}))()}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[A(182)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function A(n,t){const o=R();return(A=function(n,t){return o[n-=147]})(n,t)}function R(){const n=["91Eytzdw","offset","582714zCAsCC","bind","position","error","value","call","99999","length","tsRef","table","map","1639236oCJNkC","console","29979hduncu","TresSpriteMaterial","init","4kzMVaC","TresSprite","260QGIzzb","trace","6619QRqjHo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","translate","exception","buildingsMarkA","action","constructor","1191438eZlIfP","670744HHSsgk","sizeAttenuation","441417lzcOYR","info","__proto__","counter",'{}.constructor("return this")( )',"#fff","string","stateObject","return (function() ","apply","geometry","log","gger","img","function *\\( *\\)","toString","76PdIrsA","prototype","7mdnunq","color","test","clone","5NcLlvr","while (true) {}"];return(R=function(){return n})()}b(void 0,(function(){const n=A;let t;try{t=Function(n(181)+n(177)+");")()}catch(r){t=window}const o=t.console=t[n(155)]||{},e=[n(184),"warn",n(174),n(202),n(166),n(152),n(162)];for(let i=0;i<e[n(150)];i++){const t=b[n(169)][n(190)][n(200)](b),r=e[i],a=o[r]||t;t[n(175)]=b[n(200)](b),t.toString=a[n(188)][n(200)](a),o[r]=t}}))();const P=[M(201),"scale"],z=[M(153)],S=o({__name:M(167),props:{color:{default:M(178)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(186)]}))),p=await p,d(),p),v=r({color:g[o(192)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(172)],toneMapped:!1,depthTest:!g.foremost}),m=i(null);return a((()=>{const n=o;m[n(147)]&&(m.value[n(183)]=m[n(147)].geometry[n(194)](),m[n(147)].geometry[n(165)](g[n(198)][0],g[n(198)][1],0))})),(n,t)=>{const e=o;return s(),u(e(160),{ref_key:e(151),ref:m,position:g[e(201)],scale:g.scale,renderOrder:e(149)},[c(e(157),l(v,{map:f(h)}),null,16,z)],8,P)}}});function T(n){function t(n){const o=A;if(typeof n===o(179))return function(n){}[o(169)](o(196))[o(182)](o(176));1!==(""+n/n)[o(150)]||n%20==0?function(){return!0}[o(169)]("debu"+o(185))[o(148)](o(168)):function(){return!1}[o(169)]("debu"+o(185))[o(182)](o(180)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function k(){const n=["bind","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","while (true) {}","741456iGNNbj","371394ZMbxSA","TresCircleGeometry","196KTeYVf","log","stateObject","gger","1608OvdJQi","apply","speed","error","radraA","applyMatrix4","radius","toString","counter","args","console","position","followWidth","string","length","chain","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","19945yZmCyv","call","function *\\( *\\)","constructor","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","1908641QEGaje","input","return (function() ","42948Igixrd","value","color","228712AkozYV","init","uRadius",'{}.constructor("return this")( )',"table","uniforms","debu","size","54377VfNAWg"];return(k=function(){return n})()}const C=W;!function(n,t){const o=W,e=k();for(;;)try{if(137062===-parseInt(o(399))/1+-parseInt(o(391))/2+-parseInt(o(405))/3+parseInt(o(408))/4*(-parseInt(o(429))/5)+parseInt(o(406))/6+-parseInt(o(385))/7+parseInt(o(412))/8*(parseInt(o(388))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const j=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[W(413)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){j(this,(function(){const n=W,t=new RegExp(n(431)),o=new RegExp(n(402),"i"),e=O(n(392));t.test(e+n(427))&&o[n(403)](e+n(386))?O():e("0")}))()}();const F=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[W(413)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function W(n,t){const o=k();return(W=function(n,t){return o[n-=384]})(n,t)}F(void 0,(function(){const n=W;let t;try{t=Function(n(387)+n(394)+");")()}catch(r){t=window}const o=t[n(422)]=t[n(422)]||{},e=[n(409),"warn","info",n(415),n(401),n(395),"trace"];for(let i=0;i<e[n(426)];i++){const t=F.constructor.prototype.bind(F),r=e[i],a=o[r]||t;t.__proto__=F.bind(F),t[n(419)]=a[n(419)][n(400)](a),o[r]=t}}))();const Z=["position"],B=[C(421)],E=o({__name:C(416),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:"#ffff00"},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=C,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[W(389)]+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(428),fragmentShader:e(384),uniforms:{uSpeed:{value:r[e(414)]},uRadius:{value:r[e(418)]},uTime:l,uFollowWidth:{value:r[e(424)]},ncolor:{value:new y(r[e(390)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x).makeRotationX(-Math.PI/180*90);f[o(389)][o(417)](n)}}));const _=p();return a((()=>{const n=e;r[n(390)]&&(w[n(396)].ncolor.value=new y(r[n(390)])),r[n(418)]&&(w.uniforms[n(393)][n(389)]=r.radius)})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),u("TresMesh",{ref_key:"MeshRef",ref:_,position:r[o(423)]},[c(o(407),{ref_key:"TresCircleGeometryRef",ref:f,args:[r[o(398)],1e3]},null,8,B),c("TresShaderMaterial",g(h(w)),null,16)],8,Z)}}});function O(n){function t(n){const o=W;if(typeof n===o(425))return function(n){}[o(432)](o(404))[o(413)](o(420));1!==(""+n/n)[o(426)]||n%20==0?function(){return!0}.constructor(o(397)+o(411))[o(430)]("action"):function(){return!1}[o(432)]("debu"+o(411))[o(413)](o(410)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const V=N;!function(n,t){const o=N,e=Q();for(;;)try{if(830072===parseInt(o(307))/1+parseInt(o(270))/2*(parseInt(o(265))/3)+parseInt(o(294))/4+-parseInt(o(310))/5+parseInt(o(277))/6+-parseInt(o(289))/7+-parseInt(o(271))/8*(parseInt(o(297))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const G=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[N(262)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){G(this,(function(){const n=N,t=new RegExp(n(288)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=H(n(313));t[n(287)](e+n(283))&&o.test(e+n(292))?H():e("0")}))()}();const Y=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function N(n,t){const o=Q();return(N=function(n,t){return o[n-=258]})(n,t)}Y(void 0,(function(){const n=N,t=function(){const n=N;let t;try{t=Function("return (function() "+n(267)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(278)]||{},e=["log",n(259),n(312),n(295),n(269),"table","trace"];for(let r=0;r<e[n(266)];r++){const t=Y[n(293)][n(303)][n(261)](Y),i=e[r],a=o[i]||t;t[n(272)]=Y.bind(Y),t[n(304)]=a[n(304)][n(261)](a),o[i]=t}}))();const $=["position"],L=[V(260)];function Q(){const n=["opacity","info","init","action","while (true) {}","warn","args","bind","apply","period","stateObject","2081532wSmBwU","length",'{}.constructor("return this")( )',"min","exception","2WiVSBR","16YBXcJw","__proto__","call","MeshRef","color","updateMatrix","4961688hkInTP","console","string","computeBoundingBox","TresTubeGeometryRef","counter","chain","clone","gger","applyMatrix4","test","function *\\( *\\)","443660lhrDpX","height","#ffff00","input","constructor","5959644txCVpi","error","value","14314797ZOkSpY","copy","boundingBox","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","radraB","TresShaderMaterial","prototype","toString","radius","maxRadius","1226551plsDkY","debu","max","813680LOquWR"];return(Q=function(){return n})()}const q=o({__name:V(301),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:V(291)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=V,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(275)],opacity:r[e(311)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(300),fragmentShader:"\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ",uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(275)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M.value[o(280)](),l[o(296)]=M[o(296)][o(299)][o(309)],f[o(296)]=M[o(296)][o(299)][o(268)],I=i[o(296)].scale[o(284)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(290)],0)));a((()=>{const n=e;r[n(275)]&&(v.uniforms.uColor[n(296)]=new y(r[n(275)]))}));const{onLoop:A}=t(),R={value:0};return A((({delta:n})=>{const t=e;R[t(296)]+=n;const o=(R.value%r[t(263)]/r[t(263)]*(r[t(306)]-r[t(305)])+r[t(305)])/r[t(305)],a=(new x).makeScale(o,1,o);I&&(i[t(296)].scale[t(298)](I.clone()[t(286)](a)),i[t(296)][t(276)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),u("TresMesh",{ref_key:o(274),ref:i,position:r.position,renderOrder:2e3},[c("TresTubeGeometry",{ref_key:o(281),ref:M,args:[b[o(296)],20,r[o(305)],100,!1]},null,8,L),c(o(302),g(h(v)),null,16)],8,$)}}});function H(n){function t(n){const o=N;if(typeof n===o(279))return function(n){}[o(293)](o(258))[o(262)](o(282));1!==(""+n/n)[o(266)]||n%20==0?function(){return!0}[o(293)]("debu"+o(285))[o(273)](o(314)):function(){return!1}[o(293)](o(308)+o(285))[o(262)](o(264)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{S as _,E as a,q as b};

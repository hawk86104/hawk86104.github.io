import{_ as t,a6 as e,ai as n}from"./three.3esZ7Hzr1726652192279.js";import{U as r,J as a,Y as s,L as o}from"./@tresjs.UGbbWZf51726652192279.js";import{a as i}from"./index.3TTzxxqz1726652192279.js";import"./index.RPy_b1rb1726652192279.js";import{C as l}from"./three-custom-shader-material.1UWxr2-p1726652192279.js";import"./object-hash.659hUnW-1726652192279.js";import"./@amap.-LPMSFvH1726652192279.js";import"./glsl-tokenizer.lP_hSvTG1726652192279.js";import{p as u}from"./gl-noise.BrVtymbx1726652192279.js";import{d as c,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as y,g as w,aj as j,ak as M,m as x,al as z}from"./@vue.JNsx1iN61726652192279.js";import{P as I}from"./tweakpane.yHWGBmom1726652192279.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.M5wlgBSK1726652192279.js";import"./@vueuse.OdTlFP151726652192279.js";import"./three-stdlib.yAKyCK811726652192279.js";import"./@pmndrs.GLf74zq01726652192279.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.VXZm04Ra1726652192279.js";import"./all.three.Z5c_QtDp1726652192279.js";import"./oimophysics.x0jH7fze1726652192279.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.NFS686El1726652192279.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.5nvLN1-Y1726652192279.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.zxngLgbq1726652192279.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.KxKKIHwO1726652192279.js";import"./glsl-token-string.0mUiHG4f1726652192279.js";import"./glsl-token-functions.lY9NGLSv1726652192279.js";import"./jszip.uBbFte4W1726652192279.js";function S(){const t=["height","return (function() ","toString","flatShading","uTime","6SVzgIy","uHeight","while (true) {}","20RBZkXo","customWaterMesh","__proto__","prototype","side","3676870qmGdvE","Color","brightness","input","debu","fragmentShader","log","string","vertex","apply","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","DoubleSide","305RdsjUj","init","tmRef","material","#b3ffff","call","needsUpdate","args","function *\\( *\\)","console","2675511EoNGba","113435MsAgJR","gger","Flatshading","#52a7f7","TresMesh","stateObject","vertexShader","exception","279hmpwXM","MeshPhysicalMaterial","value","188839urvdXi","error","waterHighlight","test","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","fragment","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","32679944DYszyZ","constructor","172304WcOcFv","convertLinearToSRGB","warn","59236odVOUg","bind","waterColor","baseMaterial","info","chain"];return(S=function(){return t})()}const T=G;!function(t,e){const n=G,r=S();for(;;)try{if(839678===-parseInt(n(469))/1*(parseInt(n(441))/2)+-parseInt(n(468))/3+parseInt(n(427))/4*(parseInt(n(458))/5)+parseInt(n(438))/6*(parseInt(n(480))/7)+-parseInt(n(424))/8*(parseInt(n(477))/9)+-parseInt(n(446))/10+parseInt(n(488))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(455)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(t,e){const n=S();return(G=function(t,e){return n[t-=424]})(t,e)}!function(){B(this,(function(){const t=G,e=new RegExp(t(466)),n=new RegExp(t(485),"i"),r=P(t(459));e[t(483)](r+t(432))&&n[t(483)](r+t(449))?P():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=G,e=function(){const t=G;let e;try{e=Function(t(434)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e.console=e[t(467)]||{},r=[t(452),t(426),t(431),t(481),t(476),"table","trace"];for(let a=0;a<r.length;a++){const e=H[t(489)][t(444)][t(428)](H),s=r[a],o=n[s]||e;e[t(443)]=H.bind(H),e[t(435)]=o[t(435)].bind(o),n[s]=e}}))();const O=["rotation-x"],k=[T(465)],F=c({__name:T(442),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(472)},waterHighlight:{default:T(462)},brightness:{default:1},baseMaterial:{default:t[T(478)]}},setup(n){const s=T,o=n,i=p(null),c={vertex:s(456),fragment:s(487)},b={uTime:{value:0},waterColor:{value:new(t[s(447)])(o[s(429)])[s(425)]()},waterHighlight:{value:new(t[s(447)])(o.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o[s(448)]},uHeight:{value:o[s(433)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;b[e(437)][e(479)]=-t/5})),f((()=>{const e=s;o.height&&(b[e(439)][e(479)]=o[e(433)]),o[e(429)]&&(b[e(429)][e(479)]=new(t[e(447)])(o[e(429)])[e(425)]()),o[e(482)]&&(b[e(482)][e(479)]=new(t[e(447)])(o[e(482)])[e(425)]()),o[e(448)]&&(b.brightness[e(479)]=o.brightness)})),g((()=>o.Flatshading),(t=>{const e=s;i[e(479)][e(461)][e(464)]=!0})),g((()=>o[s(430)]),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:u(c[n(454)]),fragmentShader:c[n(486)],uniforms:b,flatShading:o.Flatshading,side:t[n(457)],roughness:.2,metalness:.1,silent:!0});i[n(479)].material.dispose(),i[n(479)][n(461)]=r})),(n,r)=>{const o=s;return h(),m(o(473),{ref_key:o(460),ref:i,"rotation-x":-Math.PI/2},[v("TresBoxGeometry",{args:[5,5,n.height,64,64,1]},null,8,k),d(_(a),{baseMaterial:e,vertexShader:_(u)(c.vertex),fragmentShader:c[o(486)],uniforms:b,side:t[o(457)],roughness:.2,metalness:.1,flatShading:n[o(471)],silent:""},null,8,["baseMaterial",o(475),o(451),o(445),o(436)])],8,O)}}});function P(t){function e(t){const n=G;if(typeof t===n(453))return function(t){}[n(489)](n(440))[n(455)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(450)+n(470))[n(463)](n(484)):function(){return!1}.constructor(n(450)+n(470)).apply(n(474)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=Z;function R(){const t=["change","info","counter","neg-z.jpg","17718PXideu","4682372uIUqHT","8IZBBnw","2114118rEuxyM","length","function *\\( *\\)","bind","waterColor","test","Flatshading","debu","gger","brightness","constructor","10FNRaDV","MeshToonMaterial","string","MeshStandardMaterial","call","console","addBlade","prototype","warn","log","action","MeshPhongMaterial","error","#627179","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","MeshNormalMaterial","addBinding","customWater","TresAmbientLight","MeshBasicMaterial","8283345ndvJbi","MeshDepthMaterial","pos-z.jpg","input","while (true) {}","apply","baseMaterial","exception","TresDirectionalLight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","waterHighlight","neg-x.jpg","toString","8693676ntRvVT","stateObject","浪头颜色","MeshLambertMaterial","neg-y.jpg","#52a7f7","pos-x.jpg","4618326nrAtNF","chain","2280257jIxCLp","__proto__","水体颜色","TresPerspectiveCamera","pos-y.jpg"];return(R=function(){return t})()}!function(t,e){const n=Z,r=R();for(;;)try{if(854096===-parseInt(n(330))/1*(-parseInt(n(344))/2)+parseInt(n(319))/3+parseInt(n(331))/4+-parseInt(n(364))/5+parseInt(n(333))/6+-parseInt(n(321))/7*(-parseInt(n(332))/8)+-parseInt(n(377))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=Z,e=new RegExp(t(335)),n=new RegExp(t(373),"i"),r=V("init");e[t(338)](r+t(320))&&n[t(338)](r+t(367))?V():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Z(369)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();N(void 0,(function(){const t=Z,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e[t(349)]=e[t(349)]||{},r=[t(353),t(352),t(327),t(356),t(371),"table","trace"];for(let a=0;a<r[t(334)];a++){const e=N[t(343)][t(351)][t(336)](N),s=r[a],o=n[s]||e;e[t(322)]=N[t(336)](N),e.toString=o[t(376)].bind(o),n[s]=e}}))();const L=v(W(324),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),A=v(W(362),{intensity:.5},null,-1),E=v(W(372),{position:[15,15,15],intensity:1},null,-1);function Z(t,e){const n=R();return(Z=function(t,e){return n[t-=315]})(t,e)}const U=c({__name:W(361),setup(t){const e=W,r=b({alpha:!0,toneMapping:n,windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:e(357),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:e(317),waterHighlight:"#b3ffff",brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new I;return c.addBinding(u,"height",{label:"高度",min:.1,max:5,step:.1}),c[e(360)](u,e(337),{label:e(323)}),c[e(360)](u,e(374),{label:e(379)}),c[e(360)](u,e(342),{label:"亮度",min:0,max:1,step:.01}),c[e(360)](u,e(339),{label:e(339)}),c[e(350)]({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:e(363),value:e(363)},{text:e(359),value:"MeshNormalMaterial"},{text:e(347),value:e(347)},{text:e(355),value:e(355)},{text:e(345),value:e(345)},{text:"MeshLambertMaterial",value:e(315)},{text:e(365),value:e(365)}],value:u[e(370)]}),c.on(e(326),(t=>{const n=e;"材质"===t.target.label&&(u[n(370)]=t.value)})),(t,n)=>{const c=e;return h(),y(_(o),x(r,{"window-size":""}),{default:w((()=>[L,d(_(s),j(M(a)),null,16),A,E,d(F,j(M(u)),null,16),d(_(C),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),y(z,null,{default:w((()=>[d(_(i),{files:[c(318),c(375),c(325),c(316),c(366),c(329)],path:c(358)})])),_:1}))])),_:1},16)}}});function V(t){function e(t){const n=Z;if(typeof t===n(346))return function(t){}[n(343)](n(368)).apply(n(328));1!==(""+t/t)[n(334)]||t%20==0?function(){return!0}[n(343)](n(340)+n(341))[n(348)](n(354)):function(){return!1}[n(343)](n(340)+"gger").apply(n(378)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{U as default};

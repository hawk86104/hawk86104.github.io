var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as S,c3 as w,c4 as M,K as R,f as E,V as A,g as T,_ as P,bT as D,m as z,bm as C,k as O,bz as k,d as F,aj as B,B as j,a as U,aP as N,e as L,M as H,at as Z,a9 as G}from"./three.GKtOCofD1728446741233.js";import{p as V,N as W,U as $}from"./@tresjs.2zzrlbpQ1728446741233.js";import{R as q}from"./three-stdlib.LtkXdepA1728446741233.js";import{x as K,b as Y,w as X,a as J,u as Q,d as nn,V as tn,a4 as en,a0 as rn,o as on,E as an,H as cn,J as sn,a7 as un,a3 as ln,q as fn,f as pn,L as dn,a8 as hn,r as vn,N as mn,Y as gn,t as _n,F as yn,a6 as xn,m as In}from"./@vue.JNsx1iN61728446741233.js";import{M as bn,a as Sn,C as wn}from"./@pmndrs.kg3qtW3-1728446741233.js";import{o as Mn}from"./object-hash.0ofIFoz61728446741233.js";var Rn=En;function En(n,t){var e=Dn();return(En=function(n,t){return e[n-=376]})(n,t)}!function(n,t){for(var e=En,r=Dn();;)try{if(455942===-parseInt(e(414))/1+-parseInt(e(415))/2*(-parseInt(e(401))/3)+-parseInt(e(384))/4*(parseInt(e(398))/5)+parseInt(e(387))/6+parseInt(e(377))/7+parseInt(e(390))/8*(parseInt(e(406))/9)+parseInt(e(397))/10*(-parseInt(e(404))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[En(403)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=En,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(400),"i"),r=Cn("init");t[n(380)](r+n(376))&&e[n(380)](r+n(388))?Cn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[En(403)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tn(void 0,(function(){for(var n=En,t=function(){var n,t=En;try{n=Function("return (function() "+t(409)+");")()}catch(e){n=window}return n}(),e=t[n(416)]=t[n(416)]||{},r=[n(393),"warn",n(382),"error",n(389),"table","trace"],o=0;o<r[n(386)];o++){var i=Tn[n(395)][n(402)][n(381)](Tn),a=r[o],c=e[a]||i;i[n(408)]=Tn[n(381)](Tn),i[n(385)]=c[n(385)][n(381)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=En;super(),this[n(412)]=null,this[n(412)]=new u}[Rn(405)](...n){var t=Rn;return this.virtualScene[t(405)](...n),this}destructor(){var n=Rn;this.virtualScene.traverse((n=>{var t=En;n instanceof l&&(n[t(394)][t(413)](),n.material[t(413)](),n[t(407)][t(379)]&&n[t(407)].map[t(413)](),this[t(412)][t(391)](n))})),this[n(412)]=null}}function Dn(){var n=["112iYsjCT","remove","string","log","geometry","constructor","debu","5598150akXwvV","80BwQKBC","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","900iZFVWc","prototype","apply","11pgBcqo","add","307161kdCghX","material","__proto__",'{}.constructor("return this")( )',"action","gger","virtualScene","dispose","869871NBvpmv","1590GAWhNF","console","chain","4686038ihfyoX","call","map","test","bind","info","stateObject","61276cNRJnw","toString","length","4469952OOngcX","input","exception"];return(Dn=function(){return n})()}const zn=Pn;function Cn(n){function t(n){var e=En;if(typeof n===e(392))return function(n){}[e(395)](e(399))[e(403)]("counter");1!==(""+n/n)[e(386)]||n%20==0?function(){return!0}[e(395)](e(396)+e(411))[e(378)](e(410)):function(){return!1}[e(395)](e(396)+"gger")[e(403)](e(383)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=Bn;!function(n,t){const e=Bn,r=Fn();for(;;)try{if(266615===-parseInt(e(494))/1+-parseInt(e(511))/2+-parseInt(e(532))/3+parseInt(e(492))/4*(-parseInt(e(535))/5)+-parseInt(e(530))/6+parseInt(e(531))/7+parseInt(e(509))/8*(parseInt(e(490))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(513)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fn(){const n=["venice/venice_sunset_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","action","exception","2225724UZtdjd","3628891zymGSi","332898RPharj","debu","bind","5sAXzgU","981dXWgCk","init","189576NWmnWO","return (function() ","209685dkgDHh",'{}.constructor("return this")( )',"while (true) {}","error","counter","city/canary_wharf_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","outood/mossy_forest_1k.hdr","gger","constructor","info","test","city/modern_buildings_2_1k.hdr","stateObject","length","42472khVIpn","console","182960yggMuv","chain","apply","__proto__","city/shanghai_bund_1k.hdr","prototype","indoor/small_hangar_01_1k.hdr","toString","table","input","studio/poly_haven_studio_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","function *\\( *\\)","outdoor/snowy_forest_path_01_1k.hdr","log"];return(Fn=function(){return n})()}function Bn(n,t){const e=Fn();return(Bn=function(n,t){return e[n-=490]})(n,t)}!function(){kn(this,(function(){const n=Bn,t=new RegExp(n(523)),e=new RegExp(n(500),"i"),r=Nn(n(491));t[n(505)](r+n(512))&&e.test(r+n(520))?Nn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Bn;let t;try{t=Function(n(493)+n(495)+");")()}catch(o){t=window}const e=t[n(510)]=t[n(510)]||{},r=[n(525),"warn",n(504),n(497),n(529),n(519),"trace"];for(let i=0;i<r.length;i++){const t=jn[n(503)][n(516)][n(534)](jn),o=r[i],a=e[o]||t;t[n(514)]=jn[n(534)](jn),t[n(518)]=a[n(518)][n(534)](a),e[o]=t}}))();const Un={sunset:On(526),studio:On(521),city:On(499),umbrellas:On(527),night:"outdoor/satara_night_1k.hdr",forest:On(501),snow:On(524),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:On(517),urban:On(522),modern:On(506),shangai:On(515)};function Nn(n){function t(n){const e=Bn;if("string"==typeof n)return function(n){}[e(503)](e(496))[e(513)](e(498));1!==(""+n/n)[e(508)]||n%20==0?function(){return!0}.constructor("debu"+e(502)).call(e(528)):function(){return!1}.constructor(e(533)+e(502))[e(513)](e(507)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Vn;function Hn(){const n=["261800tfIwWn","backgroundBlurriness","constructor","toString","return (function() ","20TZxqPs","prototype","63aqRPHY","background","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","isArray","720344iXqlkq","string","bind","environment",'{}.constructor("return this")( )',"function *\\( *\\)","exception","value","join","1685942HlKjpQ","init","577615iJrRCV","1406233ZnkCeW","mapping","while (true) {}","error","length","info","input","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","call","5329812lvntzV","texture","2230ppokiM","setPath","trace","counter","warn","gger","Preset must be one of: ","3145938CDwwIw","14jWVBYr","Failed to load environment map: ","chain"];return(Hn=function(){return n})()}!function(n,t){const e=Vn,r=Hn();for(;;)try{if(974970===parseInt(e(252))/1+parseInt(e(249))/2+parseInt(e(263))/3+-parseInt(e(234))/4*(-parseInt(e(251))/5)+parseInt(e(225))/6*(parseInt(e(226))/7)+-parseInt(e(240))/8*(-parseInt(e(236))/9)+-parseInt(e(265))/10*(parseInt(e(229))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(261)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Vn,t=new RegExp(n(245)),e=new RegExp(n(260),"i"),r=$n(n(250));t.test(r+n(228))&&e[n(259)](r+n(258))?$n():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(261)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Hn();return(Vn=function(n,t){return e[n-=222]})(n,t)}Gn(void 0,(function(){const n=Vn;let t;try{t=Function(n(233)+n(244)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(222),n(257),n(255),n(246),"table",n(267)];for(let i=0;i<r[n(256)];i++){const t=Gn[n(231)][n(235)][n(242)](Gn),o=r[i],a=e[o]||t;t.__proto__=Gn[n(242)](Gn),t[n(232)]=a.toString[n(242)](a),e[o]=t}}))();const Wn=Ln(238);function $n(n){function t(n){const e=Vn;if(typeof n===e(241))return function(n){}[e(231)](e(254)).apply(e(268));1!==(""+n/n).length||n%20==0?function(){return!0}[e(231)]("debu"+e(223))[e(262)]("action"):function(){return!1}[e(231)]("debu"+e(223))[e(261)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=Yn;!function(n,t){const e=Yn,r=Jn();for(;;)try{if(265391===parseInt(e(359))/1+parseInt(e(378))/2+-parseInt(e(390))/3+-parseInt(e(373))/4*(-parseInt(e(410))/5)+-parseInt(e(386))/6*(parseInt(e(387))/7)+-parseInt(e(377))/8*(parseInt(e(408))/9)+parseInt(e(395))/10*(parseInt(e(405))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Jn();return(Yn=function(n,t){return e[n-=359]})(n,t)}!function(){Kn(this,(function(){const n=Yn,t=new RegExp(n(367)),e=new RegExp(n(375),"i"),r=nt("init");t[n(366)](r+"chain")&&e[n(366)](r+n(380))?nt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(368)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(){const n=["1180JQjFXz","destructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","8ixokQm","511460sUaafq","$slots","input","type","useDefaultScene","bind","debu","trace","330gwFgOp","47677QEZVCO","toString","environment","836217gGxKPu","far","string","near","component","5419730eThzfY","warn","table","texture","background","symbol","frames","dispose","stateObject","isArray","11OiUJqs","exception","return (function() ","2227374KtDbKV","envSence","1445oERdVT","value","update","call","default","virtualScene","gger","283263yUmLeI","prototype","constructor","minFilter","resolution","length",'{}.constructor("return this")( )',"test","function *\\( *\\)","apply","console","counter","generateMipmaps","action"];return(Jn=function(){return n})()}Xn(void 0,(function(){const n=Yn;let t;try{t=Function(n(407)+n(365)+");")()}catch(o){t=window}const e=t[n(369)]=t[n(369)]||{},r=["log",n(396),"info",n(376),n(406),n(397),n(385)];for(let i=0;i<r[n(364)];i++){const t=Xn[n(361)][n(360)][n(383)](Xn),o=r[i],a=e[o]||t;t.__proto__=Xn[n(383)](Xn),t[n(388)]=a[n(388)][n(383)](a),e[o]=t}}))();const Qn=nn({__name:qn(394),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=Y(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=Y(null),x=null;const I=Y(null);tn((()=>{var n,t;const e=Yn;null==(n=I.value)||n[e(374)](),null==(t=y.value)||t[e(402)]()}));const{onBeforeLoop:b}=$();let S=1;b((()=>{const n=Yn;x&&I.value&&y[n(411)]&&(i[n(401)]===1/0||S<i[n(401)])&&(i.useDefaultScene?x[n(412)](s[n(411)],u[n(411)]):x.update(s[n(411)],un(I[n(411)][n(415)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=Y([]),path:s=Y(""),background:u}=K(n);X(n,(()=>{o()}));const l=Y(null),h=J((()=>Array[e(239)](c[e(247)]))),v=J((()=>h[e(247)]?f:q));return X([c,s],(async([n,t])=>{const r=e;if(n&&n[r(256)]>0&&!(null==i?void 0:i[r(247)])){try{l.value=await W(v[r(247)],h.value?[...Q(n)]:Q(n),(n=>{t&&n[r(266)](Q(t))}))}catch(o){throw new Error(r(227)+o)}l[r(247)]&&(l.value[r(253)]=h[r(247)]?p:d)}}),{immediate:!0}),X(l,(n=>{const t=e;r.value&&n&&(r[t(247)][t(243)]=n)}),{immediate:!0}),X([u,l],(([n,o])=>{const i=e;if(r[i(247)]){let e=(null==t?void 0:t[i(247)])?t[i(247)][i(264)]:o,a=r[i(247)][i(237)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(247)][i(237)]=n?e:a}}),{immediate:!0}),X((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(247)]&&n&&(r[t(247)][t(230)]=n)}),{immediate:!0}),X((()=>null==i?void 0:i[e(247)]),(async n=>{const t=e;if(n&&n in Un){const e=Wn,i=Un[n];try{l[t(247)]=await W(q,i,(n=>{e&&n[t(266)](e)}))}catch(r){throw new Error(t(227)+r)}l[t(247)]&&l[t(247)]&&(l[t(247)][t(253)]=d),o()}else if(n&&!(n in Un))throw new Error(t(224)+Object.keys(Un)[t(248)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(411)].environment=n[t(398)],i.background&&(u[t(411)].background=n[t(398)])):(u.value[t(389)]=w.value,i[t(399)]&&(u[t(411)][t(399)]=w.value))};X(w,(n=>{const t=Yn;y[t(411)]&&M(y[t(411)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Yn;null==(n=y[t(411)])||n[t(402)](),y[t(411)]=new v(i[t(363)]),x=new m(i[t(393)],i[t(391)],y[t(411)]),i[t(382)]?(y[t(411)][t(398)][t(381)]=g,y[t(411)][t(398)][t(371)]=!1,y[t(411)][t(398)][t(362)]=_,y.value.texture.magFilter=_):y[t(411)][t(398)][t(381)]=h,M(y[t(411)])};return X((()=>rn()[e(414)]),(n=>{var t,r;const o=e;n&&(!y[o(411)]||y[o(411)][o(398)][o(381)]!==h)&&(l=n(),Array[o(404)](l)&&l[o(364)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(400))?R():(null==(r=y[o(411)])||r[o(402)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(411)]=w,X((()=>i[e(382)]),(n=>{y[e(411)]&&R()})),(n,t)=>{const r=e;return Q(y)?(on(),an("TresEnvSence",{key:0,ref_key:r(409),ref:I},[cn(n[r(379)],r(414))],512)):sn("",!0)}}});function nt(n){function t(n){const e=Yn;if(typeof n===e(392))return function(n){}[e(361)]("while (true) {}")[e(368)](e(370));1!==(""+n/n).length||n%20==0?function(){return!0}[e(361)](e(384)+e(416))[e(413)](e(372)):function(){return!1}[e(361)](e(384)+e(416)).apply(e(403)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=st;!function(n,t){const e=st,r=lt();for(;;)try{if(636187===-parseInt(e(183))/1*(-parseInt(e(160))/2)+parseInt(e(171))/3+-parseInt(e(163))/4+-parseInt(e(210))/5*(parseInt(e(193))/6)+-parseInt(e(199))/7*(parseInt(e(180))/8)+-parseInt(e(176))/9*(-parseInt(e(165))/10)+-parseInt(e(173))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=st,t=new RegExp(n(212)),e=new RegExp(n(205),"i"),r=ft(n(168));t[n(211)](r+"chain")&&e[n(211)](r+n(200))?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=st,t=function(){const n=st;let t;try{t=Function("return (function() "+n(164)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(161),n(202),n(167),n(192),"exception","table",n(208)];for(let o=0;o<r[n(178)];o++){const t=rt[n(182)][n(186)][n(159)](rt),i=r[o],a=e[i]||t;t[n(185)]=rt[n(159)](rt),t[n(170)]=a.toString[n(159)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=["toneMapped",tt(196),tt(179),tt(191)];function st(n,t){const e=lt();return(st=function(n,t){return e[n-=159]})(n,t)}const ut=nn({__name:"index",props:{args:{default:null},from:{default:tt(209)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=Y();return ln((()=>{const n=st;r.value&&(r[n(162)][n(191)][n(175)](e[n(181)]),r.value[n(169)]=!0)})),X((()=>e[t(191)]),(n=>{const o=t;r[o(162)]&&(r[o(162)][o(191)].set(n),r.value[o(191)][o(175)](e[o(181)]),r[o(162)][o(169)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(207),null,[e[i(194)]===i(204)?(on(),an(i(195),ot)):e[i(194)]===i(201)?(on(),an(i(195),it)):e[i(194)]===i(209)?(on(),an(i(190),at)):(on(),pn(e[i(194)],{key:3,args:e})),dn(i(198),{ref_key:i(188),ref:r,toneMapped:n[i(184)],map:n[i(196)],side:Q(x),color:n.color},null,8,ct)])}}});function lt(){const n=["input","ring","warn","apply","circle","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","TresMesh","trace","rect","3821605nIFbww","test","function *\\( *\\)","bind","251920RHWpBa","log","value","3659132jsjfqU",'{}.constructor("return this")( )',"10McSDzK","debu","info","init","needsUpdate","toString","2299521RmciNu","call","823361aEoCEg","while (true) {}","multiplyScalar","10884807MEaPwO","stateObject","length","side","311672iiKYah","intensity","constructor","7ulXFwm","toneMapped","__proto__","prototype","counter","material","string","TresPlaneGeometry","color","error","6igXQkm","from","TresRingGeometry","map","gger","TresMeshBasicMaterial","84fidLza"];return(lt=function(){return n})()}function ft(n){function t(n){const e=st;if(typeof n===e(189))return function(n){}[e(182)](e(174))[e(203)](e(187));1!==(""+n/n).length||n%20==0?function(){return!0}[e(182)]("debugger")[e(172)](e(206)):function(){return!1}.constructor(e(166)+e(197)).apply(e(177)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(n,t){const e=vt();return(pt=function(n,t){return e[n-=436]})(n,t)}!function(n,t){const e=pt,r=vt();for(;;)try{if(450315===-parseInt(e(453))/1+-parseInt(e(443))/2+-parseInt(e(467))/3+-parseInt(e(442))/4*(parseInt(e(469))/5)+parseInt(e(466))/6+-parseInt(e(438))/7+parseInt(e(461))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=pt,t=new RegExp(n(455)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=gt(n(450));t[n(470)](r+n(462))&&e[n(470)](r+"input")?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(){const n=["apply","render","debu","call","918218keYovZ","stateObject","counter","trace","8TRceLS","1719842oSeCJm","exception","warn","console","gger","string","while (true) {}","init","__proto__","return (function() ","301364zhRFVJ","type","function *\\( *\\)","table","bind","log","info","error","21469024tKRqji","chain","depthTexture","setRenderTarget","action","3199776jJfiMH","2331618RHKlgP","constructor","1742360OMMByk","test","value","height","dispose","prototype","toString"];return(vt=function(){return n})()}function mt(n){const t=Y(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?K(n):K(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=V();return ln((()=>{var n;const a=pt;null==(n=t.value)||n.dispose(),t[a(471)]=new I((null==r?void 0:r[a(471)])||p.width.value,(null==e?void 0:e[a(471)])||p.height[a(471)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(471)])),(null==i?void 0:i[a(471)])&&(t[a(471)].depthTexture=new S((null==r?void 0:r[a(471)])||p.width[a(471)],(null==e?void 0:e.value)||p[a(472)].value),t.value[a(463)].format=w,t[a(471)][a(463)][a(454)]=M)})),s((()=>{const n=pt;(null==a?void 0:a[n(471)])&&(l.value[n(464)](un(t[n(471)])),l[n(471)].clear(),l[n(471)][n(477)](un(f[n(471)]),un(u[n(471)])),l.value[n(464)](null))})),mn((()=>{var n;const e=pt;null==(n=t[e(471)])||n[e(473)]()})),t}function gt(n){function t(n){const e=pt;if(typeof n===e(448))return function(n){}[e(468)](e(449)).apply(e(440));1!==(""+n/n).length||n%20==0?function(){return!0}[e(468)](e(436)+"gger")[e(437)](e(465)):function(){return!1}[e(468)](e(436)+e(447))[e(476)](e(439)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=pt;let t;try{t=Function(n(452)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(446)]=t[n(446)]||{},r=[n(458),n(445),n(459),n(460),n(444),n(456),n(441)];for(let i=0;i<r.length;i++){const t=ht.constructor[n(474)][n(457)](ht),o=r[i],a=e[o]||t;t[n(451)]=ht.bind(ht),t.toString=a[n(475)].bind(a),e[o]=t}}))();const _t=St;function yt(){const n=["action","toString","1247928XOPlDn","18567bgkavD","backsideThickness","gger","buffer","setRenderTarget","function *\\( *\\)","14163JlrPGR","material","warn","apply","info","while (true) {}","background","envMapIntensity","1910DTLbzr","length","backside","fboResolution","84KqGcrw","uuid","init","trace","124bYtuMw","error","traverse","value","debu","302NeqWRF","258784UlZpyq","constructor","texture","1059003tOYHUE","index","exception","test","289053EmEenp",'{}.constructor("return this")( )',"MeshTransmissionMaterialClass","prototype","isMesh","TresMeshTransmissionMaterial","side","console","toneMapping","time","render","input","log","bind","10015omwnYO","thickness"];return(yt=function(){return n})()}!function(n,t){const e=St,r=yt();for(;;)try{if(380053===-parseInt(e(220))/1+-parseInt(e(212))/2*(-parseInt(e(191))/3)+parseInt(e(207))/4*(parseInt(e(234))/5)+-parseInt(e(238))/6+-parseInt(e(203))/7*(parseInt(e(213))/8)+parseInt(e(239))/9*(parseInt(e(199))/10)+parseInt(e(216))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(194)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=St,t=new RegExp(n(190)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Mt(n(205));t[n(219)](r+"chain")&&e[n(219)](r+n(231))?Mt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=St;let t;try{t=Function("return (function() "+n(221)+");")()}catch(o){t=window}const e=t[n(227)]=t[n(227)]||{},r=[n(232),n(193),n(195),n(208),n(218),"table",n(206)];for(let i=0;i<r.length;i++){const t=It[n(214)][n(223)][n(233)](It),o=r[i],a=e[o]||t;t.__proto__=It[n(233)](It),t[n(237)]=a.toString[n(233)](a),e[o]=t}}))();const bt=[_t(242),_t(226)];function St(n,t){const e=yt();return(St=function(n,t){return e[n-=190]})(n,t)}const wt=nn({__name:_t(217),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new Sn,{onBeforeLoop:f}=$(),p=mt({width:u[e(202)],height:u[e(202)],isLoop:!1}),d=mt({width:u[e(202)],height:u[e(202)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(210)]=function(n,t){const e=St;let r;return n[e(209)]((n=>{const o=e;n[o(224)]&&n[o(192)]&&n.material[o(204)]===t&&(r=n)})),r}(i[n(210)],r.value[n(204)])})),f((({elapsed:n})=>{const t=e;r[t(210)][t(229)]=n,r[t(210)].buffer===d[t(210)].texture&&s.value&&(m=a[t(210)][t(228)],h=i[t(210)][t(197)],v=r.value.envMapIntensity,g=s[t(210)].material[t(226)],s.value[t(192)]=l,u[t(201)]&&(a.value.setRenderTarget(p[t(210)]),a[t(210)][t(230)](i[t(210)],c[t(210)]),s[t(210)][t(192)]=r[t(210)],s[t(210)][t(192)][t(235)]=u[t(240)],s[t(210)][t(192)][t(242)]=p[t(210)][t(215)],s[t(210)][t(192)].side=R,s[t(210)][t(192)][t(198)]=0),a[t(210)][t(243)](d.value),a.value.render(i[t(210)],c[t(210)]),s[t(210)].material[t(242)]=d.value[t(215)],s[t(210)][t(192)]=r.value,s[t(210)][t(192)].thickness=u[t(235)],s[t(210)][t(192)].side=g,s.value[t(192)][t(198)]=v,i[t(210)][t(197)]=h,a[t(210)].setRenderTarget(null),a[t(210)][t(228)]=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return on(),an(o(225),{ref_key:o(222),ref:r,buffer:Q(d).texture,side:Q(x)},null,8,bt)}}});function Mt(n){function t(n){const e=St;if("string"==typeof n)return function(n){}.constructor(e(196)).apply("counter");1!==(""+n/n)[e(200)]||n%20==0?function(){return!0}[e(214)](e(211)+e(241)).call(e(236)):function(){return!1}[e(214)]("debu"+e(241)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Rt(n,t){const e=Dt();return(Rt=function(n,t){return e[n-=490]})(n,t)}const Et=Rt;!function(n,t){const e=Rt,r=Dt();for(;;)try{if(310163===parseInt(e(540))/1*(-parseInt(e(516))/2)+-parseInt(e(512))/3+parseInt(e(541))/4+parseInt(e(495))/5*(parseInt(e(538))/6)+-parseInt(e(528))/7*(parseInt(e(493))/8)+parseInt(e(545))/9+parseInt(e(501))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Rt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(537),"i"),r=zt(n(492));t.test(r+n(531))&&e[n(491)](r+n(520))?zt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tt(void 0,(function(){const n=Rt;let t;try{t=Function(n(514)+n(497)+");")()}catch(o){t=window}const e=t[n(490)]=t[n(490)]||{},r=["log",n(508),"info",n(546),n(502),n(510),n(530)];for(let i=0;i<r[n(547)];i++){const t=Tt[n(534)][n(522)][n(496)](Tt),o=r[i],a=e[o]||t;t.__proto__=Tt[n(496)](Tt),t[n(500)]=a[n(500)][n(496)](a),e[o]=t}}))();const Pt=nn({__name:Et(527),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Y(null),r=Y(null),o=Y(null);return fn((()=>{const n=Rt;if(!r[n(535)])return;if(!o[n(535)])return;r.value[n(539)][n(504)]();const e=(new E)[n(529)](o.value,t[n(518)]),i=new A,a=new T,c=e[n(543)].x-e[n(494)].x,s=e[n(543)].y-e.min.y,u=e.max.z-e[n(494)].z;e[n(526)](i),e[n(499)](a);const l=t[n(532)]?s/2:t[n(509)]?-s/2:0,f=t[n(503)]?-c/2:t[n(548)]?c/2:0,p=t.front?u/2:t.back?-u/2:0;r[n(535)][n(511)][n(515)](t[n(507)]||t.disableX?0:-i.x+f,t[n(507)]||t.disableY?0:-i.y+l,t[n(507)]||t[n(536)]?0:-i.z+p)})),(n,t)=>{const i=Rt;return on(),an(i(505),{ref_key:i(544),ref:e},[dn("TresGroup",{ref_key:i(513),ref:r},[dn("TresGroup",{ref_key:i(517),ref:o},[cn(n.$slots,i(525))],512)],512)],512)}}});function Dt(){const n=["console","test","init","1680yJvVfs","min","575apNmnb","bind",'{}.constructor("return this")( )',"counter","getBoundingSphere","toString","4121300vEDeEr","exception","left","identity","TresGroup","apply","disable","warn","bottom","table","position","1172322kycjTx","outer","return (function() ","set","600414aRAmuv","inner","precise","gger","input","debu","prototype","while (true) {}","stateObject","default","getCenter","index","7721CPeopU","setFromObject","trace","chain","top","action","constructor","value","disableZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","294LGKtgA","matrixWorld","1lqduNG","1706020wqffMq","call","max","gref","3496536ezHIlc","error","length","right"];return(Dt=function(){return n})()}function zt(n){function t(n){const e=Rt;if("string"==typeof n)return function(n){}.constructor(e(523)).apply(e(498));1!==(""+n/n)[e(547)]||n%20==0?function(){return!0}.constructor("debu"+e(519))[e(542)](e(533)):function(){return!1}[e(534)](e(521)+e(519)).apply(e(524)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=Ut;!function(n,t){const e=Ut,r=jt();for(;;)try{if(543678===-parseInt(e(302))/1*(parseInt(e(335))/2)+-parseInt(e(340))/3+-parseInt(e(308))/4*(-parseInt(e(305))/5)+-parseInt(e(341))/6+-parseInt(e(322))/7+parseInt(e(326))/8+parseInt(e(294))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(300)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=Ut,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(304),"i"),r=Lt("init");t[n(336)](r+n(306))&&e.test(r+n(310))?Lt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(300)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Ut;let t;try{t=Function(n(296)+n(311)+");")()}catch(o){t=window}const e=t[n(309)]=t[n(309)]||{},r=[n(327),n(298),n(342),"error",n(301),n(333),n(328)];for(let i=0;i<r[n(332)];i++){const t=kt.constructor.prototype[n(346)](kt),o=r[i],a=e[o]||t;t.__proto__=kt[n(346)](kt),t[n(323)]=a[n(323)][n(346)](a),e[o]=t}}))();const Ft=[Ct(317)],Bt=[Ct(317)];function jt(){const n=["worldRadius","intensity","helper","length","table","while (true) {}","76KvmGpI","test","causticsOnly","counter","far","2402892HWBatk","1313982PKvuLd","info","primitive","$slots","string","bind","11281977yvataL","lightSource","return (function() ","add","warn","update","apply","exception","9847YtKgLW","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10KrLIBY","chain","Vector3","1792108SIKEph","console","input",'{}.constructor("return this")( )',"debu","gger","group","constructor","params","object","value","color","backsideIOR","stateObject","5045390GtbVhu","toString","set","backside","4071904SsQCCQ","log","trace"];return(jt=function(){return n})()}function Ut(n,t){const e=jt();return(Ut=function(n,t){return e[n-=294]})(n,t)}const Nt=nn({__name:Ct(303),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=V(),o=wn(r[t(318)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(329)]});o[t(316)][t(325)]=!0;const i=gn(null);X(i,(n=>{const e=t;n&&o.scene[e(297)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(299)]()})),ln((()=>{const n=t;e[n(319)]&&o[n(316)].color.set(e[n(319)]),e.ior&&(o.params.ior=e.ior),e[n(320)]&&(o[n(316)][n(320)]=e[n(320)]),e[n(339)]&&(o[n(316)][n(339)]=e.far),e[n(329)]&&(o[n(316)][n(329)]=e[n(329)]),e[n(330)]&&(o[n(316)].intensity=e[n(330)])})),X((()=>e[t(337)]),(n=>{const e=t;o[e(316)][e(337)]=n})),X((()=>e[t(295)]),(n=>{const e=t;n&&o.params[e(295)]instanceof P[e(307)]&&o[e(316)].lightSource[e(324)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn("TresGroup",{ref_key:r(314),ref:i},[cn(n[r(344)],"default")],512),dn(r(343),{object:Q(o)[r(314)],position:[0,.003,0]},null,8,Ft),dn("primitive",{object:Q(o)[r(331)],visible:!1},null,8,Bt)],64)}}});function Lt(n){function t(n){const e=Ut;if(typeof n===e(345))return function(n){}[e(315)](e(334))[e(300)](e(338));1!==(""+n/n)[e(332)]||n%20==0?function(){return!0}[e(315)](e(312)+"gger").call("action"):function(){return!1}.constructor(e(312)+e(313))[e(300)](e(321)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(){const n=["console","length","32229HVLZDN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","action","counter","init","error","material","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","#ifdef USE_SHADOWMAP","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","564GCbdMA","toString","apply","3VkYfEu","; i ++) {\n        offset = (vogelDiskSample(j, ","1049024zWTGkT","120GTEmif","string","2257718qhZhVK",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","__proto__","#if defined( SHADOWMAP_TYPE_PCF )","remove","bind",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","7813365PmOhUC","trace","replace","chain","programs","389573IaUdRH","dispose","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","table","isArray","shadowmap_pars_fragment","traverse","constructor","exception","info","input","test","forEach","properties","48265VrffHz",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","debu","function *\\( *\\)","ShaderChunk","call","return (function() ","while (true) {}","24535450aymRoy"];return(Ht=function(){return n})()}function Zt(n,t){const e=Ht();return(Zt=function(n,t){return e[n-=139]})(n,t)}!function(n,t){const e=Zt,r=Ht();for(;;)try{if(625289===-parseInt(e(154))/1+parseInt(e(142))/2*(parseInt(e(193))/3)+parseInt(e(139))/4+-parseInt(e(168))/5*(-parseInt(e(190))/6)+parseInt(e(149))/7+-parseInt(e(140))/8*(-parseInt(e(179))/9)+-parseInt(e(176))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(192)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gt(this,(function(){const n=Zt,t=new RegExp(n(171)),e=new RegExp(n(180),"i"),r=$t(n(184));t[n(165)](r+n(152))&&e.test(r+n(164))?$t():r("0")}))()}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(192)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Vt(void 0,(function(){const n=Zt;let t;try{t=Function(n(174)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(177)]=t.console||{},r=["log","warn","info",n(185),n(162),n(157),n(150)];for(let i=0;i<r.length;i++){const t=Vt[n(161)].prototype[n(147)](Vt),o=r[i],a=e[o]||t;t[n(144)]=Vt[n(147)](Vt),t[n(191)]=a[n(191)][n(147)](a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=D[r(159)];return D[r(159)]=D[r(159)].replace(r(188),r(187)+t+r(143)+n+r(169)+e+r(194)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(148)+t+r(189)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(151)](r(145),r(156)),(n,t,e)=>{const i=r;P[i(172)][i(159)]=o,function(n,t,e){const r=Zt;t[r(160)]((t=>{const e=r;t.material&&(Array[e(158)](t[e(186)])?t[e(186)][e(166)]((t=>{const r=e;n[r(167)][r(146)](t),t[r(155)]()})):(n[e(167)].remove(t[e(186)]),t[e(186)][e(155)]()))})),n[r(163)][r(153)][r(178)]=0,n.compile(t,e)}(n,t,e)}};function $t(n){function t(n){const e=Zt;if(typeof n===e(141))return function(n){}.constructor(e(175))[e(192)](e(183));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(181))[e(173)](e(182)):function(){return!1}[e(161)](e(170)+e(181))[e(192)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Jt;!function(n,t){const e=Jt,r=Xt();for(;;)try{if(257395===parseInt(e(369))/1+parseInt(e(381))/2+-parseInt(e(373))/3*(-parseInt(e(374))/4)+parseInt(e(366))/5*(-parseInt(e(371))/6)+parseInt(e(394))/7+-parseInt(e(389))/8+-parseInt(e(365))/9*(parseInt(e(386))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=Jt,t=new RegExp(n(395)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ne("init");t[n(375)](r+n(397))&&e[n(375)](r+n(382))?ne():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=["gger","393lLRErP","12344FiISDf","test","length","while (true) {}","return (function() ","string","constructor","400106yLcmWi","input","counter","action","log","2464690hQlMoz","debu","bind","1342392mcVjRM","value","index","stateObject","dispose","2255099joTulq","function *\\( *\\)","exception","chain","table","apply",'{}.constructor("return this")( )',"toString","9OLqLSv","5TGIbNb","warn","console","76310Xvjvyg","trace","1986738EhOiFy"];return(Xt=function(){return n})()}function Jt(n,t){const e=Xt();return(Jt=function(n,t){return e[n-=361]})(n,t)}Yt(void 0,(function(){const n=Jt;let t;try{t=Function(n(378)+n(363)+");")()}catch(o){t=window}const e=t.console=t[n(368)]||{},r=[n(385),n(367),"info","error",n(396),n(361),n(370)];for(let i=0;i<r.length;i++){const t=Yt[n(380)].prototype[n(388)](Yt),o=r[i],a=e[o]||t;t.__proto__=Yt[n(388)](Yt),t[n(364)]=a.toString[n(388)](a),e[o]=t}}))();const Qt=nn({__name:qt(391),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(390)],e[t(390)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(390)].traverse((n=>{const e=t;n instanceof l&&n.material[e(393)]()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Jt;if(typeof n===e(379))return function(n){}[e(380)](e(377))[e(362)](e(383));1!==(""+n/n)[e(376)]||n%20==0?function(){return!0}[e(380)](e(387)+e(372)).call(e(384)):function(){return!1}[e(380)](e(387)+e(372))[e(362)](e(392)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=oe;!function(n,t){const e=oe,r=se();for(;;)try{if(526966===parseInt(e(311))/1*(parseInt(e(293))/2)+parseInt(e(298))/3+parseInt(e(323))/4*(-parseInt(e(305))/5)+parseInt(e(321))/6*(parseInt(e(294))/7)+-parseInt(e(326))/8*(-parseInt(e(291))/9)+-parseInt(e(309))/10*(-parseInt(e(308))/11)+-parseInt(e(285))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(334),"i"),r=ce("init");t[n(292)](r+"chain")&&e[n(292)](r+n(301))?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=se();return(oe=function(n,t){return e[n-=285]})(n,t)}re(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function(n(330)+n(328)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(295)]||{},r=[n(289),"warn",n(332),n(299),n(314),n(315),"trace"];for(let o=0;o<r[n(310)];o++){const t=re.constructor[n(313)][n(306)](re),i=r[o],a=e[i]||t;t[n(304)]=re.bind(re),t[n(312)]=a[n(312)].bind(a),e[i]=t}}))();const ie=parseInt(F[te(322)](/\D+/g,""));class ae extends z{constructor(n=new O){const t=te;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+(ie>=154?t(329):"encodings_fragment")+t(325),vertexShader:t(333),blending:k,depthWrite:!1,depthTest:!1}),this[t(327)]=!1,this[t(303)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[te(303)](n,t){const e=te;this.uniforms[e(307)].value[e(316)](n,t),this[e(300)].halfTexelSize[e(302)][e(316)](n,t)[e(320)](.5)}[te(288)](n){const t=te;this[t(300)][t(319)][t(302)].copy(n)}}function ce(n){function t(n){const e=oe;if(typeof n===e(296))return function(n){}[e(287)]("while (true) {}")[e(297)](e(317));1!==(""+n/n)[e(310)]||n%20==0?function(){return!0}[e(287)](e(290)+e(318))[e(324)](e(331)):function(){return!1}[e(287)](e(290)+e(318))[e(297)](e(286)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function se(){const n=["10ACROdH","length","9EpUwDq","toString","prototype","exception","table","set","counter","gger","resolution","multiplyScalar","4195194raSKoG","replace","4JGckbB","call",">\n        }","10392GlTSun","toneMapped",'{}.constructor("return this")( )',"colorspace_fragment","return (function() ","action","info","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2268444LkShPw","stateObject","constructor","setResolution","log","debu","774jRIMLI","test","114978igutTY","7azMJPA","console","string","apply","859581bBJhnq","error","uniforms","input","value","setTexelSize","__proto__","5213185AHJGlp","bind","texelSize","1581789AjVRXR"];return(se=function(){return n})()}const ue=pe;!function(n,t){const e=pe,r=de();for(;;)try{if(620538===parseInt(e(246))/1+parseInt(e(239))/2*(-parseInt(e(194))/3)+-parseInt(e(243))/4*(parseInt(e(219))/5)+parseInt(e(201))/6*(parseInt(e(216))/7)+-parseInt(e(192))/8*(parseInt(e(217))/9)+-parseInt(e(204))/10*(-parseInt(e(232))/11)+-parseInt(e(208))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(233)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=pe,t=new RegExp(n(212)),e=new RegExp(n(205),"i"),r=ve(n(206));t[n(231)](r+n(230))&&e.test(r+n(224))?ve():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(n,t){const e=de();return(pe=function(n,t){return e[n-=187]})(n,t)}function de(){const n=["scene","renderToScreen","frustumCulled","depthTexture","camera","12lLPmOr","texture","__proto__","180RcDJSC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","stateObject","2222508rjxBHx","defines","table","log","function *\\( *\\)","USE_DEPTH","clone","minDepthThreshold","3546193bmcUDU","56097dGiPGC","depthBuffer","2965eVlWzR","counter","maxDepthThreshold","renderTargetB","depthScale","input","renderTargetA","setAttribute","toString","render","debu","chain","test","668294WdHkTL","apply","action","position","convolutionMaterial","exception","while (true) {}","1650560kFgSPT","kernel","length","bind","2264WTZsKN","setRenderTarget","value","539292mvZSRl","screen","console","uniforms","string","error","add",'{}.constructor("return this")( )',"gger","inputBuffer","constructor","872CqmbfN","return (function() ","3OZVjIr","setTexelSize"];return(de=function(){return n})()}fe(void 0,(function(){const n=pe,t=function(){const n=pe;let t;try{t=Function(n(193)+n(188)+");")()}catch(e){t=window}return t}(),e=t[n(248)]=t[n(248)]||{},r=[n(211),"warn","info",n(251),n(237),n(210),"trace"];for(let o=0;o<r.length;o++){const t=fe.constructor.prototype[n(242)](fe),i=r[o],a=e[i]||t;t[n(203)]=fe[n(242)](fe),t[n(227)]=a[n(227)][n(242)](a),e[i]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(197)]=!1,this[c(225)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA[c(214)](),this.convolutionMaterial=new ae,this[c(236)][c(195)](1/t,1/e),this[c(236)].setResolution(new O(t,e)),this[c(196)]=new u,this[c(200)]=new B,this.convolutionMaterial[c(249)][c(215)][c(245)]=r,this.convolutionMaterial[c(249)][c(221)][c(245)]=o,this[c(236)][c(249)][c(223)][c(245)]=i,this[c(236)].uniforms.depthToBlurRatioBias[c(245)]=a,this[c(236)][c(209)][c(213)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(226)](c(235),new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(247)]=new l(p,this[c(236)]),this[c(247)][c(198)]=!1,this.scene[c(187)](this[c(247)])}[ue(228)](n,t,e){const r=ue,o=this[r(196)],i=this[r(200)],a=this[r(225)],c=this[r(222)],s=this[r(236)],u=s[r(249)];u[r(218)].value=t[r(199)];const l=s[r(240)];let f,p,d,h=t;for(p=0,d=l[r(241)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(240)].value=l[p],u[r(190)][r(245)]=h[r(202)],n[r(244)](f),n[r(228)](o,i),h=f;u[r(240)][r(245)]=l[p],u[r(190)].value=h[r(202)],n[r(244)](this[r(197)]?null:e),n.render(o,i)}}function ve(n){function t(n){const e=pe;if(typeof n===e(250))return function(n){}.constructor(e(238))[e(233)](e(220));1!==(""+n/n)[e(241)]||n%20==0?function(){return!0}.constructor(e(229)+e(189)).call(e(234)):function(){return!1}[e(191)](e(229)+e(189))[e(233)](e(207)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=ye;!function(n,t){for(var e=ye,r=xe();;)try{if(198287===parseInt(e(236))/1+parseInt(e(283))/2*(-parseInt(e(248))/3)+-parseInt(e(278))/4*(-parseInt(e(264))/5)+-parseInt(e(281))/6*(parseInt(e(255))/7)+parseInt(e(282))/8+parseInt(e(291))/9*(parseInt(e(269))/10)+-parseInt(e(285))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=ye,t=new RegExp(n(290)),e=new RegExp(n(254),"i"),r=be(n(297));t.test(r+n(289))&&e[n(294)](r+n(286))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(n,t){var e=xe();return(ye=function(n,t){return e[n-=221]})(n,t)}function xe(){var n=["stateObject","chain","function *\\( *\\)","54ANIWAe","prototype","exception","test","_depthToBlurRatioBias","action","init","mixContrast","setValues","minDepthThreshold","distortion","distortionMap","onBeforeCompile","#include <project_vertex>","bind","textureMatrix","depthScale","__proto__",'{}.constructor("return this")( )',"\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","uniforms","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","_textureMatrix","_depthScale","trace","USE_UV","383594jYcwhj","tDiffuse","while (true) {}","apply","error","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_maxDepthThreshold","_blurStrength","_hasBlur","table","_mixContrast","vertexShader","352977ypisMQ","debu","maxDepthThreshold","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","length","_tDepth","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3976IrUzmt","_distortion","gger","constructor","mirror","tDepth","replace","console","toString","20EVElyP","_mirror","depthToBlurRatioBias","_distortionMap","log","306990WmqXhB","value","_minDepthThreshold","counter","mixStrength","mixBlur","hasBlur","tDiffuseBlur","_tDiffuse","177220yBYgPN","_mixBlur","defines","1668iRrYkq","301784kXXedu","2LUlViT","fragmentShader","3397691jPIgpp","input","_tDiffuseBlur"];return(xe=function(){return n})()}_e(void 0,(function(){var n,t=ye;try{n=Function("return (function() "+t(228)+");")()}catch(s){n=window}for(var e=n[t(262)]=n.console||{},r=[t(268),"warn","info",t(240),t(293),t(245),t(234)],o=0;o<r[t(252)];o++){var i=_e.constructor[t(292)][t(224)](_e),a=r[o],c=e[a]||i;i[t(227)]=_e[t(224)](_e),i[t(263)]=c[t(263)][t(224)](c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=ye;super(n),this[t(253)]={value:null},this[t(267)]={value:null},this._tDiffuse={value:null},this[t(287)]={value:null},this[t(232)]={value:null},this[t(244)]={value:!1},this[t(265)]={value:0},this[t(279)]={value:0},this[t(243)]={value:.5},this[t(271)]={value:.9},this[t(242)]={value:1},this[t(233)]={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this[t(246)]={value:1},this[t(299)](n)}[me(222)](n){var t,e=me;!(null==(t=n[e(280)])?void 0:t[e(235)])&&(n[e(280)][e(235)]=""),n[e(230)][e(275)]=this._hasBlur,n.uniforms[e(237)]=this[e(277)],n[e(230)].tDepth=this[e(253)],n[e(230)][e(221)]=this[e(267)],n[e(230)][e(276)]=this._tDiffuseBlur,n[e(230)][e(225)]=this[e(232)],n[e(230)][e(259)]=this[e(265)],n.uniforms[e(274)]=this[e(279)],n[e(230)][e(273)]=this[e(243)],n[e(230)][e(300)]=this[e(271)],n[e(230)].maxDepthThreshold=this[e(242)],n[e(230)].depthScale=this[e(233)],n[e(230)].depthToBlurRatioBias=this._depthToBlurRatioBias,n[e(230)][e(301)]=this[e(256)],n.uniforms[e(298)]=this[e(246)],n.vertexShader=e(229)+n[e(247)],n[e(247)]=n[e(247)][e(261)](e(223),e(251)),n.fragmentShader=e(231)+n.fragmentShader,n[e(284)]=n[e(284)][e(261)]("#include <emissivemap_fragment>",e(241))}get[me(237)](){return this[me(277)].value}set[me(237)](n){var t=me;this[t(277)][t(270)]=n}get tDepth(){var n=me;return this[n(253)][n(270)]}set[me(260)](n){this[me(253)].value=n}get[me(221)](){return this[me(267)].value}set[me(221)](n){var t=me;this._distortionMap[t(270)]=n}get[me(276)](){return this._tDiffuseBlur.value}set[me(276)](n){var t=me;this[t(287)][t(270)]=n}get[me(225)](){return this._textureMatrix.value}set[me(225)](n){this[me(232)].value=n}get[me(275)](){var n=me;return this._hasBlur[n(270)]}set[me(275)](n){var t=me;this[t(244)][t(270)]=n}get mirror(){var n=me;return this[n(265)][n(270)]}set[me(259)](n){var t=me;this._mirror[t(270)]=n}get[me(274)](){var n=me;return this._mixBlur[n(270)]}set[me(274)](n){var t=me;this[t(279)][t(270)]=n}get mixStrength(){return this._blurStrength.value}set[me(273)](n){var t=me;this[t(243)][t(270)]=n}get[me(300)](){return this._minDepthThreshold.value}set[me(300)](n){var t=me;this[t(271)][t(270)]=n}get maxDepthThreshold(){var n=me;return this[n(242)][n(270)]}set[me(250)](n){var t=me;this[t(242)][t(270)]=n}get depthScale(){return this[me(233)].value}set[me(226)](n){var t=me;this[t(233)][t(270)]=n}get[me(266)](){var n=me;return this[n(295)][n(270)]}set depthToBlurRatioBias(n){var t=me;this[t(295)][t(270)]=n}get[me(301)](){return this[me(256)].value}set distortion(n){var t=me;this[t(256)][t(270)]=n}get[me(298)](){var n=me;return this[n(246)][n(270)]}set[me(298)](n){var t=me;this[t(246)][t(270)]=n}}function be(n){function t(n){var e=ye;if("string"==typeof n)return function(n){}.constructor(e(238)).apply(e(272));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(249)+"gger").call(e(296)):function(){return!1}[e(258)](e(249)+e(257)).apply(e(288)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Ae;function we(){const n=["view","reflectorPlane","5hEZlBJ","matrixWorldInverse","depth-to-blur-ratio-bias","traverse","mix-strength","clipPlane","autoUpdate","exception","lookAt","toString","info","3776536rGpIIV","multiplyScalar","console","assign","function *\\( *\\)","error","cameraWorldPosition","normal","applyMatrix4","enabled","matrixWorld","test","depthTexture","mix-contrast","reflect","key","render","length","setFromNormalAndCoplanarPoint","uuid","apply","call","rotationMatrix","2033421yksOKu","dot","reflectorOffset","1615332VWGqVK","texture","9WsLMOq","setFromMatrixPosition","log","TresMeshReflectorMaterial","action","input","number","addScaledVector","multiply","2229003xNrqeM","texture-matrix","add","value","t-diffuse","lookAtPosition","virtualCamera","t-depth","target","position","extractRotation","visible","t-diffuse-blur","copy","table","material","set","1473246lgeVfZ","init","constructor","defines-USE_DISTORTION","prototype","defines-USE_BLUR","textureMatrix","projectionMatrix","shadowMap","331390ijQVKl","setRenderTarget","bind","constant","sign","string","subVectors","negate","dispose","debu","defines-USE_DEPTH","trace",'{}.constructor("return this")( )',"max-depth-threshold","2956712uvXCdX","reflectorWorldPosition","far","gger","mirror","distortion","depth-scale","2WJIFOz","warn","while (true) {}","elements"];return(we=function(){return n})()}!function(n,t){const e=Ae,r=we();for(;;)try{if(939667===parseInt(e(408))/1*(parseInt(e(451))/2)+parseInt(e(448))/3+-parseInt(e(425))/4+-parseInt(e(414))/5*(-parseInt(e(479))/6)+-parseInt(e(462))/7+parseInt(e(401))/8*(-parseInt(e(453))/9)+parseInt(e(488))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(445)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Ae,t=new RegExp(n(429)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pe(n(480));t[n(436)](r+"chain")&&e[n(436)](r+n(458))?Pe():r("0")}))()}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(445)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Re(void 0,(function(){const n=Ae;let t;try{t=Function("return (function() "+n(399)+");")()}catch(o){t=window}const e=t.console=t[n(427)]||{},r=[n(455),n(409),n(424),n(430),n(421),n(476),n(398)];for(let i=0;i<r[n(442)];i++){const t=Re[n(481)][n(483)][n(490)](Re),o=r[i],a=e[o]||t;t.__proto__=Re[n(490)](Re),t[n(423)]=a[n(423)][n(490)](a),e[o]=t}}))();const Ee=[Se(463),Se(405),Se(466),Se(469),Se(474),"has-blur",Se(418),"min-depth-threshold",Se(400),Se(407),Se(416),Se(406),"distortionMap",Se(438),Se(484),Se(397),Se(482)];function Ae(n,t){const e=we();return(Ae=function(n,t){return e[n-=392]})(n,t)}const Te=nn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:E}=V();E({MeshReflectorMaterial:Ie});const T=gn(),P=gn(),D=gn(),z=gn(),C=J((()=>{const n=Ae;return typeof f.value===n(459)?[f[n(465)],f[n(465)]]:f[n(465)]})),O=J((()=>C[r(465)][0]>0||C.value[1]>0)),k={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T[o(465)])||n[o(452)][o(395)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(465)]=new I(i[o(465)],i[o(465)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(465)],i[o(465)],w,M)},t(y,e(x)))),P[o(465)]=new I(i[o(465)],i[o(465)],f),D[o(465)]=new he({resolution:i.value,width:C[o(465)][0],height:C[o(465)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(465)],depthScale:u[o(465)],depthToBlurRatioBias:l[o(465)]}),z.value={mirror:p,textureMatrix:k[o(485)],mixBlur:d,tDiffuse:T[o(465)][o(452)],tDepth:T.value[o(437)],tDiffuseBlur:T[o(465)][o(452)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":O[o(465)]?"":void 0,"defines-USE_DEPTH":u[o(465)]>0?"":void 0,"defines-USE_DISTORTION":g[o(465)]?"":void 0}}));const F=gn(),{onLoop:B}=$();B((()=>{var n;const t=r;if(!(F[t(465)]&&R.value&&T[t(465)]&&y[t(465)]))return;const e=function(n,t){const e=Ae;let r;return n[e(417)]((n=>{const o=e;n.isMesh&&n[o(477)]&&n[o(477)].uuid===t&&(r=n)})),r}(x[t(465)],F[t(465)][t(444)]);if(!e)return;e[t(473)]=!1;const i=R.value.xr[t(434)],a=R[t(465)][t(487)][t(420)];(function(n){var t,e;const r=Ae;if(k.reflectorWorldPosition[r(454)](n[r(435)]),k[r(431)][r(454)](null==(t=y[r(465)])?void 0:t[r(435)]),k.rotationMatrix[r(472)](n.matrixWorld),k[r(432)][r(478)](0,0,1),k[r(432)][r(433)](k[r(447)]),k[r(402)][r(460)](k.normal,o[r(450)]),k[r(412)][r(393)](k[r(402)],k.cameraWorldPosition),k[r(412)][r(449)](k[r(432)])>0)return;k[r(412)][r(439)](k.normal)[r(394)](),k[r(412)].add(k.reflectorWorldPosition),k[r(447)][r(472)](null==(e=y[r(465)])?void 0:e[r(435)]),k[r(467)][r(478)](0,0,-1),k[r(467)][r(433)](k[r(447)]),k[r(467)][r(464)](k[r(431)]),k[r(470)][r(393)](k.reflectorWorldPosition,k.lookAtPosition),k[r(470)].reflect(k[r(432)])[r(394)](),k.target.add(k[r(402)]),k.virtualCamera[r(471)][r(475)](k.view),k[r(468)].up[r(478)](0,1,0),k[r(468)].up[r(433)](k[r(447)]),k[r(468)].up[r(439)](k[r(432)]),k.virtualCamera[r(422)](k[r(470)]),k[r(468)][r(403)]=(null==y?void 0:y.value)[r(403)],k[r(468)].updateMatrixWorld(),k[r(468)].projectionMatrix[r(475)]((null==y?void 0:y.value)[r(486)]),k[r(485)][r(478)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k[r(485)][r(461)](k.virtualCamera[r(486)]),k[r(485)].multiply(k[r(468)][r(415)]),k[r(485)][r(461)](n.matrixWorld),k.reflectorPlane[r(443)](k[r(432)],k[r(402)]),k.reflectorPlane[r(433)](k[r(468)][r(415)]),k[r(419)][r(478)](k.reflectorPlane.normal.x,k.reflectorPlane[r(432)].y,k[r(413)][r(432)].z,k[r(413)][r(491)]);const i=k[r(468)].projectionMatrix;k.q.x=(Math[r(492)](k.clipPlane.x)+i[r(411)][8])/i[r(411)][0],k.q.y=(Math.sign(k[r(419)].y)+i[r(411)][9])/i[r(411)][5],k.q.z=-1,k.q.w=(1+i[r(411)][10])/i[r(411)][14],k[r(419)][r(426)](2/k[r(419)][r(449)](k.q)),i[r(411)][2]=k[r(419)].x,i[r(411)][6]=k[r(419)].y,i[r(411)][10]=k.clipPlane.z+1,i[r(411)][14]=k[r(419)].w})(e),R[t(465)][t(487)][t(420)]=!1,R[t(465)][t(489)](T.value),R[t(465)].autoClear||R[t(465)].clear(),R[t(465)][t(441)](x[t(465)],k[t(468)]),null==(n=null==D?void 0:D[t(465)])||n[t(441)](R[t(465)],T.value,P[t(465)]),R[t(465)].xr[t(434)]=i,R[t(465)][t(487)].autoUpdate=a,e[t(473)]=!0,R[t(465)].setRenderTarget(null)}));const j=xn(),U=J((()=>{const n=r,t={};return Object[n(428)](t,o),Object[n(428)](t,j[n(465)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(465)])||n[e(395)](),null==(t=null==P?void 0:P[e(465)])||t[e(395)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(456),In({key:c(440)+z.value[c(484)]+z[c(465)][c(397)]+z[c(465)][c(482)],ref_key:"materialRef",ref:F},U.value,{"texture-matrix":k.textureMatrix,mirror:Q(p),"t-diffuse":null==(e=T.value)?void 0:e.texture,"t-depth":null==(o=T[c(465)])?void 0:o[c(437)],"t-diffuse-blur":null==(i=P[c(465)])?void 0:i[c(452)],"has-blur":O[c(465)],"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":O[c(465)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Ee)}}});function Pe(n){function t(n){const e=Ae;if(typeof n===e(392))return function(n){}[e(481)](e(410))[e(445)]("counter");1!==(""+n/n)[e(442)]||n%20==0?function(){return!0}[e(481)](e(396)+e(404))[e(446)](e(457)):function(){return!1}[e(481)](e(396)+e(404))[e(445)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Oe();for(;;)try{if(129789===-parseInt(e(143))/1*(-parseInt(e(156))/2)+parseInt(e(179))/3*(-parseInt(e(165))/4)+-parseInt(e(158))/5+parseInt(e(160))/6*(parseInt(e(141))/7)+parseInt(e(169))/8*(-parseInt(e(175))/9)+-parseInt(e(152))/10+parseInt(e(142))/11*(parseInt(e(163))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(185)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(n,t){const e=Oe();return(ze=function(n,t){return e[n-=141]})(n,t)}!function(){De(this,(function(){const n=ze,t=new RegExp(n(149)),e=new RegExp(n(167),"i"),r=ke(n(148));t.test(r+n(144))&&e[n(180)](r+n(182))?ke():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(185)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(){const n=["gger","while (true) {}","12VqgoZe","stateObject","558596JpAAkG","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","1395864sfMfAs","info","update","value","bind","error","9tfrvbx","dispose","toString","CubeCamera","3UhGImN","test","type","input","string","call","apply","1100722wJJCtO","3560678MpWUuK","673BYNoeA","chain","length","action",'{}.constructor("return this")( )',"init","function *\\( *\\)","background","console","1414890uPRtYz","counter","prototype","constructor","478RHBuyR","fog","281905aRYWFl","texture","6vXHiRy"];return(Oe=function(){return n})()}function ke(n){function t(n){const e=ze;if(typeof n===e(183))return function(n){}[e(155)](e(162))[e(185)](e(153));1!==(""+n/n).length||n%20==0?function(){return!0}[e(155)]("debu"+e(161))[e(184)](e(146)):function(){return!1}[e(155)]("debu"+e(161))[e(185)](e(164)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=ze;let t;try{t=Function("return (function() "+n(147)+");")()}catch(o){t=window}const e=t[n(151)]=t[n(151)]||{},r=["log","warn",n(170),n(174),"exception",n(166),n(168)];for(let i=0;i<r[n(145)];i++){const t=Ce[n(155)][n(154)].bind(Ce),o=r[i],a=e[o]||t;t.__proto__=Ce[n(173)](Ce),t[n(177)]=a[n(177)][n(173)](a),e[o]=t}}))();const Fe=Le;!function(n,t){const e=Le,r=Ue();for(;;)try{if(465489===-parseInt(e(163))/1+parseInt(e(174))/2+-parseInt(e(198))/3*(-parseInt(e(196))/4)+parseInt(e(179))/5+-parseInt(e(180))/6*(-parseInt(e(166))/7)+-parseInt(e(156))/8+parseInt(e(152))/9*(-parseInt(e(197))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(191)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Le,t=new RegExp(n(148)),e=new RegExp(n(175),"i"),r=Ze(n(154));t[n(186)](r+n(183))&&e[n(186)](r+n(167))?Ze():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(191)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ue(){const n=["7DzvTuc","input","while (true) {}","index","table","toString","envMap","far","1569376APZlvd","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","$slots","default","4468060clGDSs","4285698TtdxCc","resolution","bind","chain","primitive","call","test","constructor","stateObject","string","error","apply","near","prototype","console","trace","3333396miShKJ","1010Pdgvbm","3hdDiSm","action","function *\\( *\\)","value","log",'{}.constructor("return this")( )',"138393fyPyCn","fog","init","counter","6519656XosrLh","TresGroup","warn","exception","object","visible","length","392409RCVmbl","__proto__","frames"];return(Ue=function(){return n})()}je(void 0,(function(){const n=Le,t=function(){const n=Le;let t;try{t=Function("return (function() "+n(151)+");")()}catch(e){t=window}return t}(),e=t[n(194)]=t.console||{},r=[n(150),n(158),"info",n(190),n(159),n(170),n(195)];for(let o=0;o<r[n(162)];o++){const t=je[n(187)][n(193)].bind(je),i=r[o],a=e[i]||t;t[n(164)]=je.bind(je),t.toString=a[n(171)][n(182)](a),e[i]=t}}))();const Ne=[Fe(160)];function Le(n,t){const e=Ue();return(Le=function(n,t){return e[n-=147]})(n,t)}const He=nn({__name:Fe(169),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=Y(null),s=Y(n),u=Y(t),l=Y(e),f=Y(null);let p,d;return X((()=>s),(n=>{var t;const e=ze;null==(t=c[e(172)])||t[e(176)](),c[e(172)]=new v(n.value),c[e(172)][e(159)][e(181)]=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=ze;e&&(f[r(172)]=new(P[r(178)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=ze;null==(n=c[t(172)])||n[t(176)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(172)][t(157)],d=a.value.background,a[t(172)][t(150)]=r||d,a[t(172)].fog=o||p,null==(n=f.value)||n[t(171)](i[t(172)],a[t(172)]),a[t(172)][t(157)]=p,a[t(172)][t(150)]=d}}}({resolution:o[r(181)],near:o[r(192)],far:o[r(173)],envMap:o[r(172)],fog:o[r(153)]}),{onBeforeLoop:s}=$();let u=0;const l=Y(null);return s((()=>{const n=r;l.value&&(o[n(165)]===1/0||u<o[n(165)])&&(l[n(149)].visible=!1,c(),l[n(149)][n(161)]=!0,u++)})),t({texture:null==(e=i[r(149)])?void 0:e.texture}),(n,t)=>{const e=r;return on(),an(e(157),null,[dn(e(184),{object:Q(a)},null,8,Ne),dn("TresGroup",{ref_key:"rgRef",ref:l},[cn(n[e(177)],e(178))],512)])}}});function Ze(n){function t(n){const e=Le;if(typeof n===e(189))return function(n){}[e(187)](e(168))[e(191)](e(155));1!==(""+n/n)[e(162)]||n%20==0?function(){return!0}[e(187)]("debu"+e(176))[e(185)](e(147)):function(){return!1}[e(187)]("debugger")[e(191)](e(188)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=$e();for(;;)try{if(945488===-parseInt(e(164))/1*(-parseInt(e(130))/2)+parseInt(e(155))/3*(parseInt(e(131))/4)+-parseInt(e(149))/5*(parseInt(e(145))/6)+parseInt(e(127))/7+-parseInt(e(153))/8+-parseInt(e(126))/9+parseInt(e(125))/10*(parseInt(e(139))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=We,t=new RegExp(n(132)),e=new RegExp(n(121),"i"),r=Ke(n(159));t[n(141)](r+"chain")&&e[n(141)](r+n(157))?Ke():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=$e();return(We=function(n,t){return e[n-=120]})(n,t)}function $e(){const n=["defineProperty","length","3240096Pofpkz","MathUtils","181992iIMoTA","info","input","toString","init","assign","while (true) {}","value","forEach","2IVwALd","constructor","UniformsUtils","key","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","ShaderMaterial","warn","11284150NsKcWA","4188150pmNJfa","574210mbBKwg","reduce","gger","660598WYSGHV","20juLOSq","function *\\( *\\)","generateUUID","table","prototype","clone","return (function() ","entries","11wPJFRh","bind","test","exception","trace","call","126534jkIPeF","uniforms","string","__proto__","85mNheYM","apply"];return($e=function(){return n})()}function qe(n,t,e,r){const o=We,i=class extends P[o(123)]{constructor(i={}){const a=o,s=Object[a(138)](n);super({uniforms:s[a(128)](((n,[t,e])=>{const r=a,o=P[r(166)][r(136)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(163)]((([n])=>Object[a(151)](this,n,{get:()=>this[a(146)][n][a(162)],set:t=>this[a(146)][n][a(162)]=t}))),Object[a(160)](this,i),r&&r(this)}};return i[o(120)]=P[o(154)][o(133)](),i}function Ke(n){function t(n){const e=We;if(typeof n===e(147))return function(n){}[e(165)](e(161))[e(150)]("counter");1!==(""+n/n)[e(152)]||n%20==0?function(){return!0}.constructor("debu"+e(129))[e(144)]("action"):function(){return!1}[e(165)]("debu"+e(129)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=We,t=function(){const n=We;let t;try{t=Function(n(137)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(122),n(124),n(156),"error",n(142),n(134),n(143)];for(let o=0;o<r[n(152)];o++){const t=Ve[n(165)][n(135)][n(140)](Ve),i=r[o],a=e[i]||t;t[n(148)]=Ve[n(140)](Ve),t[n(158)]=a[n(158)][n(140)](a),e[i]=t}}))();var Ye=er;!function(n,t){for(var e=er,r=fr();;)try{if(154915===-parseInt(e(258))/1+parseInt(e(361))/2*(-parseInt(e(284))/3)+-parseInt(e(417))/4+parseInt(e(450))/5+parseInt(e(266))/6*(-parseInt(e(443))/7)+parseInt(e(410))/8*(parseInt(e(441))/9)+parseInt(e(437))/10*(parseInt(e(379))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[er(423)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=er,t=new RegExp(n(402)),e=new RegExp(n(385),"i"),r=zr("init");t.test(r+n(275))&&e[n(256)](r+n(442))?zr():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[er(423)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=er,e=function(n,t){var e=er;if(typeof n!==e(426)||null===n)return n;var r=n[Symbol[e(257)]];if(void 0!==r){var o=r[e(285)](n,t||e(280));if(typeof o!==e(426))return o;throw new TypeError(e(380))}return(t===e(263)?String:Number)(n)}(n,"string");return typeof e===t(319)?e:String(e)}function nr(n,t,e){var r=er;return(t=Qe(t))in n?Object[r(330)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=er,r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object[e(313)](n);t&&(o=o.filter((function(t){return Object[e(390)](n,t).enumerable}))),r[e(388)][e(423)](r,o)}return r}function er(n,t){var e=fr();return(er=function(n,t){return e[n-=255]})(n,t)}function rr(n){for(var t=er,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(t){nr(n,t,r[t])})):Object[t(355)]?Object[t(429)](n,Object.getOwnPropertyDescriptors(r)):tr(Object(r))[t(456)]((function(e){var o=t;Object[o(330)](n,e,Object[o(390)](r,e))}))}return n}function or(n,t){var e=er;if(null==n)return{};var r,o,i=function(n,t){var e=er;if(null==n)return{};var r,o,i={},a=Object[e(348)](n);for(o=0;o<a[e(366)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(366)];o++)r=a[o],t[e(364)](r)>=0||Object[e(352)][e(308)].call(n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=er;(null==t||t>n[e(366)])&&(t=n[e(366)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=er,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(338)]]||n[e(272)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(285)](n))[e(365)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(334)])&&(s[e(388)](o[e(281)]),s[e(366)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(369)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=er;if(n){if(typeof n===e(263))return ir(n,t);var r=Object[e(352)][e(332)][e(285)](n).slice(8,-1);return r===e(344)&&n[e(435)]&&(r=n[e(435)][e(360)]),r===e(438)||r===e(414)?Array[e(325)](n):r===e(268)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(256)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(er(453))}()}function cr(n,t){for(var e=er,r=0;r<t.length;r++){var o=t[r];o.enumerable=o[e(376)]||!1,o.configurable=!0,e(281)in o&&(o.writable=!0),Object[e(330)](n,Qe(o[e(309)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(er(283));return n}function ur(n,t){var e=er;return(ur=Object[e(370)]?Object[e(370)].bind():function(n,t){return n[e(389)]=t,n})(n,t)}function lr(n){var t=er;return(lr=Object.setPrototypeOf?Object[t(320)][t(420)]():function(n){return n[t(389)]||Object.getPrototypeOf(n)})(n)}function fr(){var n=["RawShaderMaterial","Arguments","csm_main_","includes","isArray","@@iterator","\n    vec3 transformed = ","\n    \n            ","chain","roughness","clearcoatNormal","while (true) {}","cacheHash","default","value","MeshDepthMaterial","this hasn't been initialised - super() hasn't been called","12186EibxIV","call","construct","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","onBeforeCompile","Cannot call a class as a function","MeshLambertMaterial","info",";\n  "," - (dot(","valueOf","csm_Metalness","\n            ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","exception",";\n    ",", 1.0 );\n  ","positionRaw","MeshBasicMaterial","material.clearcoat = ","trace","substring","#define IS_","message","propertyIsEnumerable","key","lights_physical_fragment","set","entries","getOwnPropertySymbols","generateUUID","is not a constructor",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","// #_CSM_#",'". Shader cannot compile.',"symbol","getPrototypeOf","assign","return (function() ","void main() {","Material","from","error","\n            \n            void main() {\n          ","csm_Position","fragmentShader","defineProperty","PointsMaterial","toString","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","done","csm_PointSize","join","clearcoatRoughness","iterator","MeshNormalMaterial","\n    vec3 objectNormal = ","MeshToonMaterial","toUpperCase","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","Object","clearcoat","__csm","update","keys","CSM: ","_patchShader","MeshStandardMaterial","prototype","csm_Clearcoat","_getPatchMapForMaterial","getOwnPropertyDescriptors","action","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","debu","console","name","8LNETfd","MathUtils","undefined","indexOf","next","length","MeshPhongMaterial","split","return","setPrototypeOf","get","\n    gl_FragColor = ",'{}.constructor("return this")( )',"ShadowMaterial","fragColor","enumerable","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","type","22GAxvuL","@@toPrimitive must return a primitive value.","csm_Emissive","trim"," );\n    ","needsUpdate","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthAlpha","baseMaterial","push","__proto__","getOwnPropertyDescriptor","gger","isAlreadyExtended","position","csm_AO","vertexShader","filter","();\n            // #_CSM_#\n          ","log","normal","\n    #include <color_fragment>\n    diffuseColor = ","csm_FragColor","function *\\( *\\)","lastIndexOf","replace","diffuse","csm_DepthAlpha","function",". Shader cannot compile.","warn","560mlXGkL","\n    gl_PointSize = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","Set","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","create","651448ucloER","CustomShaderMaterial does not support RawShaderMaterial","emissive","bind","stateObject","pointSize","apply","_getCacheHash","material.clearcoatRoughness = ","object","cacheKey","silent","defineProperties","Derived constructors may only return object or undefined","customProgramCacheKey","csm_Normal","\\$&","bump","constructor"," is not available in ","2758550pAoDZJ","Map","concat","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","23886UUvPeC","input","716569IBTXXF","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","patchMap","\n    gl_Position = ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","#define IS_VERTEX;\n","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","401685JrIect","MeshPhysicalMaterial","void ","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","_generateMaterial","uniforms","forEach","ShaderMaterial","Super expression must either be null or a function","test","toPrimitive","176701RnaTfK","();\n              // #_CSM_#\n          ","#define IS_UNKNOWN;\n","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","csm_DiffuseColor","string","metalness","csm_ClearcoatNormal","18QTgUPf"];return(fr=function(){return n})()}function pr(n){var t=function(){var n=er;if(typeof Reflect===n(363)||!Reflect[n(286)])return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy===n(407))return!0;try{return Boolean[n(352)][n(294)][n(285)](Reflect[n(286)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=er,o=lr(n);if(t){var i=lr(this)[r(435)];e=Reflect[r(286)](o,arguments,i)}else e=o[r(423)](this,arguments);return function(n,t){var e=er;if(t&&(typeof t===e(426)||typeof t===e(407)))return t;if(void 0!==t)throw new TypeError(e(430));return sr(n)}(this,e)}}Je(void 0,(function(){var n,t=er;try{n=Function(t(322)+t(373)+");")()}catch(s){n=window}for(var e=n[t(359)]=n[t(359)]||{},r=[t(398),t(409),t(291),t(326),t(298),"table",t(304)],o=0;o<r.length;o++){var i=Je[t(435)][t(352)][t(420)](Je),a=r[o],c=e[a]||i;i[t(389)]=Je[t(420)](Je),i.toString=c[t(332)].bind(c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:Ye(262),normal:Ye(432),roughness:"csm_Roughness",metalness:Ye(295),emissive:Ye(381),ao:Ye(394),bump:"csm_Bump",clearcoat:Ye(353),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Ye(265),pointSize:Ye(335),fragColor:Ye(401),depthAlpha:Ye(406),position:Ye(328),positionRaw:"csm_PositionRaw"},gr=(nr(dr={},""[Ye(439)](mr[Ye(393)]),"*"),nr(dr,"".concat(mr[Ye(301)]),"*"),nr(dr,""[Ye(439)](mr[Ye(399)]),"*"),nr(dr,""[Ye(439)](mr[Ye(422)]),[Ye(331)]),nr(dr,""[Ye(439)](mr.diffuse),"*"),nr(dr,"".concat(mr.fragColor),"*"),nr(dr,""[Ye(439)](mr.emissive),[Ye(351),"MeshPhysicalMaterial"]),nr(dr,""[Ye(439)](mr.roughness),[Ye(351),Ye(451)]),nr(dr,"".concat(mr[Ye(264)]),["MeshStandardMaterial",Ye(451)]),nr(dr,"".concat(mr.ao),[Ye(351),Ye(451),Ye(302),"MeshLambertMaterial",Ye(367),Ye(341)]),nr(dr,""[Ye(439)](mr.bump),[Ye(290),"MeshMatcapMaterial",Ye(339),"MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial",Ye(341),Ye(374)]),nr(dr,""[Ye(439)](mr.depthAlpha),[Ye(282)]),nr(dr,"".concat(mr[Ye(345)]),[Ye(451)]),nr(dr,""[Ye(439)](mr[Ye(337)]),[Ye(451)]),nr(dr,"".concat(mr.clearcoatNormal),[Ye(451)]),dr),_r={"#include <lights_physical_fragment>":D[Ye(310)]},yr=(nr(hr={},"".concat(mr[Ye(399)]),{"#include <beginnormal_vertex>":Ye(340)[Ye(439)](mr.normal,";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),nr(hr,""[Ye(439)](mr[Ye(393)]),{"#include <begin_vertex>":Ye(273)[Ye(439)](mr[Ye(393)],Ye(292))}),nr(hr,""[Ye(439)](mr[Ye(301)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Ye(439)](mr[Ye(301)],Ye(316))}),nr(hr,"".concat(mr.pointSize),{"gl_PointSize = size;":Ye(411)[Ye(439)](mr[Ye(422)],Ye(299))}),nr(hr,""[Ye(439)](mr[Ye(405)]),{"#include <color_fragment>":Ye(400)[Ye(439)](mr[Ye(405)],Ye(292))}),nr(hr,"".concat(mr[Ye(375)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[Ye(439)](mr[Ye(375)],Ye(292))}),nr(hr,"".concat(mr[Ye(419)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = ".concat(mr[Ye(419)],";\n    ")}),nr(hr,""[Ye(439)](mr[Ye(276)]),{"#include <roughnessmap_fragment>":Ye(447)[Ye(439)](mr.roughness,Ye(299))}),nr(hr,""[Ye(439)](mr[Ye(264)]),{"#include <metalnessmap_fragment>":Ye(440)[Ye(439)](mr[Ye(264)],";\n    ")}),nr(hr,""[Ye(439)](mr.ao),{"#include <aomap_fragment>":Ye(333)[Ye(439)](mr.ao,Ye(299))}),nr(hr,""[Ye(439)](mr[Ye(434)]),{"#include <normal_fragment_maps>":Ye(449)[Ye(439)](mr[Ye(434)],Ye(293))[Ye(439)](mr.bump,Ye(412))}),nr(hr,"".concat(mr[Ye(386)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(343).concat(mr[Ye(386)],Ye(383)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(357).concat(mr[Ye(386)],Ye(299))}),nr(hr,""[Ye(439)](mr[Ye(345)]),{"material.clearcoat = clearcoat;":Ye(303)[Ye(439)](mr[Ye(345)],";")}),nr(hr,""[Ye(439)](mr[Ye(337)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(425).concat(mr[Ye(337)],";")}),nr(hr,""[Ye(439)](mr[Ye(277)]),{"#include <clearcoat_normal_fragment_begin>":Ye(287)}),hr),xr=(nr(vr={},"".concat(mr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(261).concat(mr[Ye(393)],Ye(300))}),nr(vr,""[Ye(439)](mr[Ye(301)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(446).concat(mr[Ye(393)],Ye(292))}),nr(vr,""[Ye(439)](mr[Ye(405)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ye(439)](mr.diffuse,Ye(292))}),nr(vr,"".concat(mr[Ye(375)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(372)[Ye(439)](mr.fragColor,Ye(292))}),vr),Ir={clearcoat:[mr[Ye(345)],mr[Ye(277)],mr[Ye(337)]]},br=Ye(377),Sr=Ye(415),wr=Ye(297),Mr=Ye(297),Rr=[Ye(387),Ye(329),Ye(395),"uniforms",Ye(445),Ye(427),Ye(428)],Er=function(n,t,e){var r=Ye;return n[r(368)](t)[r(336)](e)},Ar=function(n,t){var e,r,o=Ye;return new RegExp("\\b".concat((e=t,r=Ye,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(433))),"\\b"))[o(256)](n)};function Tr(n){return n?n.replace(/\s/g,""):void 0}function Pr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Ye;!function(n,t){var e=er;if(typeof t!==e(407)&&null!==t)throw new TypeError(e(255));n.prototype=Object[e(416)](t&&t[e(352)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(330)](n,"prototype",{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=er,u=n[s(387)],l=n[s(329)],f=n.vertexShader,p=n[s(455)],d=n.patchMap,h=n.cacheKey,v=n[s(428)],m=or(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(er(289))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(307)][t(364)](t(315))>=0)return!1}return!0}(u)?(e=u,Object[s(321)](e,m)):e=new u(m),e.type===s(267))throw new Error(s(418));(function(n,t){var e=Ye;e(366),Object[e(321)](n,t);var r=Object.getPrototypeOf(t);Object[e(312)](Object[e(355)](r))[e(396)]((function(n){var t=e,r=typeof n[1][t(371)]===t(407),o=typeof n[1][t(311)]===t(407),i=typeof n[1][t(281)]===t(407),a="constructor"===n[0];return(r||o||i)&&!a}))[e(456)]((function(t){var r=e;typeof n[t[0]]!==r(407)&&Object[r(330)](n,t[0],t[1])}))})(sr(t=a.call(this)),e),t[s(346)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:P[s(362)][s(314)](),type:e[s(378)],isAlreadyExtended:(r=e[s(288)],o=Ye,i=r.toString()[o(382)](),!(0===i[o(305)](i[o(364)]("{")+1,i[o(403)]("}"))[o(382)]().length)),cacheHash:"",silent:v},t[s(455)]=rr(rr({},t.uniforms||{}),p||{});var g=t[s(346)],_=g[s(329)],y=g[s(395)],x=t[s(455)];return t[s(346)][s(279)]=t[s(424)](),t[s(454)](_,y,x),t}return e=c,r=[{key:t(347),value:function(){var n=t,e=arguments[n(366)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(455)]=e.uniforms||this[n(455)],Object[n(321)](this.__csm,e);var r=this[n(346)],o=r[n(329)],i=r[n(395)],a=this.uniforms,c=this[n(424)]();this.__csm[n(279)]=c,this[n(454)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(346)][n(387)],fragmentShader:this.__csm[n(329)],vertexShader:this[n(346)].vertexShader,uniforms:this[n(455)],silent:this[n(346)].silent,patchMap:this[n(346)].patchMap,cacheKey:this[n(346)][n(427)]},r=new(this[n(435)])(e);return Object[n(321)](this,r),r}},{key:t(424),value:function(){var n=t,e=this.__csm,r=e.fragmentShader,o=e.vertexShader,i=this[n(455)],a=[Tr(r),Tr(o),i][n(396)]((function(n){return void 0!==n}));return a[n(366)]>0?Mn(a,{excludeValues:!0}):this[n(431)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(455)]=r||{},this.customProgramCacheKey=function(){var n=o;return i.__csm[n(279)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(350)](Pr(n),t[r(329)],!0);t[r(329)]=a+c}if(e){var s=i[r(350)](Pr(e),t[r(395)]);t[r(395)]=r(448)+s,t[r(395)]=a+t[r(395)]}t[r(455)]=rr(rr({},t[r(455)]),i.uniforms),i[r(455)]=t[r(455)]}catch(u){console[r(326)](u)}};if(this.__csm[o(392)]){var c=this.onBeforeCompile;this[o(288)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(384)]=!0}},{key:t(350),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(354)]()),this[o(346)].patchMap);Object[o(312)](Ir)[o(456)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1].find((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(439)](a,'" is required to use output "')[e(439)](c,e(318)))})),Object[o(312)](_r)[o(456)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(348)](c)[o(456)]((function(t){var e=o;Object[e(348)](c[t])[e(456)]((function(r){var o=e,s=gr[t],u=i.__csm[o(378)];if("*"===t||Ar(n,t)){if(!(!s||Array[o(271)](s)&&s.includes(u)||"*"===s))throw new Error(o(349)[o(439)](t,o(436))[o(439)](u,o(408)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(269)+this[o(346)].instanceID.replace(/-/g,"_"),h=n[o(404)](/void\s+main\s*\(\s*\)/g,o(452)[o(439)](d,"()")),v=n[o(270)]("void main()"),m=a[o(270)](o(317));return v&&(m&&this[o(346)].isAlreadyExtended?(a=a.replace(o(323),o(296)[o(439)](h,o(327))),s=a,u="// #_CSM_#",l=o(296).concat(d,o(397)),p=s[(f=Ye)(403)](u),a=-1===p?s:s[f(305)](0,p)+l+s[f(305)](p+u[f(366)])):a=a[o(404)](o(323),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(439)](r?Mr:wr,o(444))[o(439)](br,o(274))[o(439)](h,o(413))[o(439)](Sr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(439)](r?"\n    \n":"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(439)](d,o(259)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(346)].type;return e?n(306)[n(439)](e[n(342)](),";\n"):n(260)}},{key:t(354),value:function(){var n=t;return this[n(346)][n(378)]===n(457)?xr:yr}}],i=er,r&&cr(e[i(352)],r),o&&cr(e,o),Object[i(330)](e,i(352),{writable:!1}),c}(P[Ye(324)]);function zr(n){function t(n){var e=er;if(typeof n===e(263))return function(n){}[e(435)](e(278)).apply("counter");1!==(""+n/n)[e(366)]||n%20==0?function(){return!0}.constructor("debu"+e(391)).call(e(356)):function(){return!1}[e(435)](e(358)+e(391)).apply(e(421)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Cr(n,t){const e=kr();return(Cr=function(n,t){return e[n-=113]})(n,t)}const Or=Cr;function kr(){const n=["clearcoatRoughness","MeshPhysicalMaterial","stateObject","\n\t\t\t","__proto__","color","object","apply","call",'{}.constructor("return this")( )',"3393448dWVIAv","setStyle","while (true) {}","return (function() ","action","19830snbbmk","info","counter","index","clearcoat","log","test","roughness","length","primitive","5rPQXJM","2877363aHLcdX","exception","1536912IhLtMv","string","trace","9777378rnbTJS","debu","70vxwCpU","gger","metalness","console","chain","bind","88137KUrGfH","28pyuaOl","constructor","error","1733908LRUFyY"];return(kr=function(){return n})()}!function(n,t){const e=Cr,r=kr();for(;;)try{if(820484===parseInt(e(125))/1+-parseInt(e(140))/2+parseInt(e(156))/3*(-parseInt(e(137))/4)+-parseInt(e(122))/5*(parseInt(e(128))/6)+parseInt(e(136))/7+-parseInt(e(151))/8+parseInt(e(123))/9*(parseInt(e(130))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(148)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=Cr,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nr("init");t[n(118)](r+n(134))&&e.test(r+"input")?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(148)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=Cr,t=function(){const n=Cr;let t;try{t=Function(n(154)+n(150)+");")()}catch(e){t=window}return t}(),e=t[n(133)]=t[n(133)]||{},r=[n(117),"warn",n(113),n(139),n(124),"table",n(127)];for(let o=0;o<r.length;o++){const t=Br[n(138)].prototype[n(135)](Br),i=r[o],a=e[i]||t;t[n(145)]=Br.bind(Br),t.toString=a.toString[n(135)](a),e[i]=t}}))();const jr=[Or(147)],Ur=nn({__name:Or(115),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:P[t(142)],metalness:e[t(132)],roughness:e[t(119)],clearcoat:e[t(116)],clearcoatRoughness:e[t(141)],color:e.color,vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(144)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Dr(r);return ln((()=>{const n=t;o[n(146)][n(152)](e.color),o[n(132)]=e.metalness,o[n(119)]=e[n(119)],o[n(116)]=e[n(116)],o[n(141)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(121),{object:Q(o)},null,8,jr)}}});function Nr(n){function t(n){const e=Cr;if(typeof n===e(126))return function(n){}[e(138)](e(153)).apply(e(114));1!==(""+n/n)[e(120)]||n%20==0?function(){return!0}.constructor(e(129)+e(131))[e(149)](e(155)):function(){return!1}[e(138)](e(129)+e(131))[e(148)](e(143)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Lr(){var n=["init","while (true) {}","3295712zHUbrz","16RPirZi","5draBDV","81069FKzCaN","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","325700zEAptM","debu","501950wqIkDE","27SSGKot","constructor","stateObject","test","function *\\( *\\)","input","counter","3308094QuYTXJ","30942120ToDLic","55546NjqTPe","gger","call","prototype","console","length","chain",'{}.constructor("return this")( )',"279yFHjiK","log","table","toString","__proto__","action","bind","exception","apply","warn"];return(Lr=function(){return n})()}!function(n,t){for(var e=Zr,r=Lr();;)try{if(877529===parseInt(e(425))/1*(parseInt(e(434))/2)+-parseInt(e(419))/3+parseInt(e(422))/4*(-parseInt(e(418))/5)+parseInt(e(432))/6+-parseInt(e(416))/7*(-parseInt(e(417))/8)+parseInt(e(404))/9*(parseInt(e(424))/10)+-parseInt(e(433))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(412)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Lr();return(Zr=function(n,t){return e[n-=400]})(n,t)}!function(){Hr(this,(function(){var n=Zr,t=new RegExp(n(429)),e=new RegExp(n(421),"i"),r=Vr(n(414));t[n(428)](r+n(402))&&e[n(428)](r+n(430))?Vr():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(412)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vr(n){function t(n){var e=Zr;if("string"==typeof n)return function(n){}.constructor(e(415))[e(412)](e(431));1!==(""+n/n)[e(401)]||n%20==0?function(){return!0}[e(426)](e(423)+e(435))[e(436)](e(409)):function(){return!1}.constructor(e(423)+e(435))[e(412)](e(427)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){for(var n=Zr,t=function(){var n,t=Zr;try{n=Function("return (function() "+t(403)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(400)]||{},r=[n(405),n(413),"info","error",n(411),n(406),n(420)],o=0;o<r[n(401)];o++){var i=Gr[n(426)][n(437)].bind(Gr),a=r[o],c=e[a]||i;i[n(408)]=Gr[n(410)](Gr),i[n(407)]=c[n(407)].bind(c),e[a]=i}}))();export{qe as C,Ur as _,Qn as a,ut as b,wt as c,Pt as d,Nt as e,Qt as f,He as g,Te as h,mt as u};

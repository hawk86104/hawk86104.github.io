var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as I,l as b,m as w,n as S,A as M,f as R,V as E,g as A,a6 as T,bR as D,k as P,ba as z,j as C,bx as O,d as B,aa as F,B as k,a as j,aP as U,e as N,M as L,al as H,a7 as Z,c0 as G,c1 as V,U as W,h as $}from"./three.QUrV0R7c1724070319978.js";import{p as q,W as Y,$ as X}from"./@tresjs.2JnKj_Yj1724070319978.js";import{R as K}from"./three-stdlib.xC_Fy68c1724070319978.js";import{Z as J,b as Q,a as nn,w as tn,u as en,d as rn,U as on,a4 as an,a2 as cn,o as sn,D as un,G as ln,I as fn,a8 as pn,a1 as dn,q as hn,f as vn,J as mn,a9 as gn,r as _n,M as yn,X as xn,t as In,F as bn,a6 as wn,m as Sn}from"./@vue.Q1VpS3901724070319978.js";import{M as Mn,a as Rn,C as En}from"./@pmndrs.vVECOsOu1724070319978.js";import{o as An}from"./object-hash.-UynEDWH1724070319978.js";var Tn=zn;!function(n,t){for(var e=zn,r=On();;)try{if(838932===-parseInt(e(522))/1*(-parseInt(e(516))/2)+-parseInt(e(495))/3+parseInt(e(497))/4+-parseInt(e(527))/5*(parseInt(e(523))/6)+parseInt(e(509))/7*(-parseInt(e(510))/8)+parseInt(e(525))/9+-parseInt(e(504))/10*(-parseInt(e(531))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(505)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dn(this,(function(){var n=zn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(514),"i"),r=Fn("init");t[n(489)](r+n(520))&&e.test(r+n(518))?Fn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(505)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(n,t){var e=On();return(zn=function(n,t){return e[n-=489]})(n,t)}Pn(void 0,(function(){for(var n=zn,t=function(){var n,t=zn;try{n=Function(t(512)+t(498)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(528)]||{},r=[n(511),n(529),n(524),n(503),n(519),n(502),n(526)],o=0;o<r[n(490)];o++){var i=Pn[n(515)].prototype[n(496)](Pn),a=r[o],c=e[a]||i;i[n(506)]=Pn[n(496)](Pn),i[n(508)]=c.toString.bind(c),e[a]=i}}))();class Cn extends s{constructor(){var n=zn;super(),this[n(517)]=null,this.virtualScene=new u}add(...n){return this.virtualScene.add(...n),this}[Tn(513)](){var n=Tn;this.virtualScene[n(492)]((t=>{var e=n;t instanceof l&&(t.geometry[e(532)](),t.material[e(532)](),t[e(494)][e(501)]&&t[e(494)][e(501)].dispose(),this[e(517)].remove(t))})),this[n(517)]=null}}function On(){var n=["warn","debu","30138614cNqhNf","dispose","call","test","length","stateObject","traverse","while (true) {}","material","4791297ihwfol","bind","3580544uvxphJ",'{}.constructor("return this")( )',"action","counter","map","table","error","10XzHcJs","apply","__proto__","string","toString","63lyDqlU","280872OqoANN","log","return (function() ","destructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","37508mSKFaQ","virtualScene","input","exception","chain","gger","13hsZrNa","6OVyFjV","info","563049MmORUD","trace","5946805QvxvnL","console"];return(On=function(){return n})()}const Bn=Cn;function Fn(n){function t(n){var e=zn;if(typeof n===e(507))return function(n){}.constructor(e(493)).apply(e(500));1!==(""+n/n).length||n%20==0?function(){return!0}[e(515)](e(530)+e(521))[e(533)](e(499)):function(){return!1}[e(515)]("debugger")[e(505)](e(491)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Ln;!function(n,t){const e=Ln,r=Un();for(;;)try{if(300074===parseInt(e(457))/1*(parseInt(e(471))/2)+parseInt(e(495))/3*(parseInt(e(461))/4)+-parseInt(e(478))/5+-parseInt(e(468))/6*(parseInt(e(475))/7)+-parseInt(e(479))/8+-parseInt(e(452))/9*(-parseInt(e(453))/10)+parseInt(e(486))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(){const n=["3xAjVhF","outdoor/snowy_forest_path_01_1k.hdr","studio/poly_haven_studio_1k.hdr","2602566LKeXDU","20NFLDsN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","toString","2ghwfpy","gger","input","apply","499996PztAKt","string","function *\\( *\\)","debu","action","error","bind","2154OfJXIW","table","kiara/kiara_1_dawn_1k.hdr","236870vLqkCo","city/modern_buildings_2_1k.hdr","prototype","info","8603ZlqUWH","outood/mossy_forest_1k.hdr","city/canary_wharf_1k.hdr","1061580wFazSX","1089592jPtqcH","indoor/small_hangar_01_1k.hdr","trace","stateObject","length","outdoor/satara_night_1k.hdr","while (true) {}","1645413ACujHH",'{}.constructor("return this")( )',"call","exception","counter","__proto__","venice/venice_sunset_1k.hdr","constructor","init"];return(Un=function(){return n})()}!function(){jn(this,(function(){const n=Ln,t=new RegExp(n(463)),e=new RegExp(n(454),"i"),r=Zn(n(494));t[n(455)](r+"chain")&&e[n(455)](r+n(459))?Zn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(460)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ln(n,t){const e=Un();return(Ln=function(n,t){return e[n-=452]})(n,t)}Nn(void 0,(function(){const n=Ln;let t;try{t=Function("return (function() "+n(487)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log","warn",n(474),n(466),n(489),n(469),n(481)];for(let i=0;i<r.length;i++){const t=Nn[n(493)][n(473)][n(467)](Nn),o=r[i],a=e[o]||t;t[n(491)]=Nn[n(467)](Nn),t[n(456)]=a.toString[n(467)](a),e[o]=t}}))();const Hn={sunset:kn(492),studio:kn(497),city:kn(477),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:kn(484),forest:kn(476),snow:kn(496),dawn:kn(470),hangar:kn(480),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:kn(472),shangai:"city/shanghai_bund_1k.hdr"};function Zn(n){function t(n){const e=Ln;if(typeof n===e(462))return function(n){}[e(493)](e(485))[e(460)](e(490));1!==(""+n/n)[e(483)]||n%20==0?function(){return!0}[e(493)](e(464)+e(458))[e(488)](e(465)):function(){return!1}[e(493)](e(464)+e(458)).apply(e(482)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=qn;!function(n,t){const e=qn,r=Wn();for(;;)try{if(526008===parseInt(e(220))/1+parseInt(e(223))/2*(parseInt(e(215))/3)+-parseInt(e(231))/4+parseInt(e(199))/5*(parseInt(e(226))/6)+parseInt(e(205))/7+parseInt(e(222))/8+-parseInt(e(197))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["6KPYPBq","prototype","test","isArray","texture","1955352RotPFI","toString","background","mapping","apply","gger","8177418WmvECk","log","3694490AeorBk","return (function() ","exception","chain","warn","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","1432914VsuKBW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","init",'{}.constructor("return this")( )',"stateObject","bind","while (true) {}","console","action","44355HBqvYC","length","environment","function *\\( *\\)","info","319153iOEJdx","value","4575880Ddalop","12cSYLkS","debu","setPath"];return(Wn=function(){return n})()}!function(){Vn(this,(function(){const n=qn,t=new RegExp(n(218)),e=new RegExp(n(206),"i"),r=Xn(n(208));t[n(228)](r+n(202))&&e[n(228)](r+"input")?Xn():r("0")}))()}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qn(n,t){const e=Wn();return(qn=function(n,t){return e[n-=194]})(n,t)}$n(void 0,(function(){const n=qn;let t;try{t=Function(n(200)+n(209)+");")()}catch(o){t=window}const e=t[n(213)]=t[n(213)]||{},r=[n(198),n(203),n(219),"error",n(201),"table","trace"];for(let i=0;i<r[n(216)];i++){const t=$n[n(207)][n(227)].bind($n),o=r[i],a=e[o]||t;t.__proto__=$n.bind($n),t[n(232)]=a.toString[n(211)](a),e[o]=t}}))();const Yn=Gn(204);function Xn(n){function t(n){const e=qn;if("string"==typeof n)return function(n){}.constructor(e(212))[e(195)]("counter");1!==(""+n/n)[e(216)]||n%20==0?function(){return!0}[e(207)](e(224)+e(196)).call(e(214)):function(){return!1}[e(207)]("debugger")[e(195)](e(210)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=nt;!function(n,t){const e=nt,r=tt();for(;;)try{if(636310===parseInt(e(371))/1*(-parseInt(e(376))/2)+parseInt(e(423))/3+-parseInt(e(405))/4*(-parseInt(e(415))/5)+parseInt(e(390))/6+parseInt(e(410))/7+-parseInt(e(409))/8+-parseInt(e(424))/9*(parseInt(e(386))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(383)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jn(this,(function(){const n=nt,t=new RegExp(n(404)),e=new RegExp(n(422),"i"),r=rt(n(394));t[n(377)](r+n(412))&&e[n(377)](r+"input")?rt():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(383)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nt(n,t){const e=tt();return(nt=function(n,t){return e[n-=371]})(n,t)}function tt(){const n=["log","envSence","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1075710rwCzGh","2584089PAtFmd","value","dispose","warn","debu","2993dDdkte","magFilter","generateMipmaps","background","console","64pTSlKk","test","length","return (function() ","virtualScene","component","texture","apply","trace","minFilter","40INpWjV","symbol","error","destructor","5087826MmmDEA","call","counter","toString","init","bind","update","resolution","gger","stateObject","default","type","$slots","isArray","function *\\( *\\)","880CegBzZ","table","far","frames","4383472jVUtks","4639061ivwLYH","action","chain","info","useDefaultScene","12710bgkjlY","constructor","__proto__","while (true) {}","environment"];return(tt=function(){return n})()}Qn(void 0,(function(){const n=nt,t=function(){const n=nt;let t;try{t=Function(n(379)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(375)]=t.console||{},r=[n(420),n(427),n(413),n(388),"exception",n(406),n(384)];for(let o=0;o<r.length;o++){const t=Qn[n(416)].prototype[n(395)](Qn),i=r[o],a=e[i]||t;t[n(417)]=Qn[n(395)](Qn),t[n(393)]=a.toString[n(395)](a),e[i]=t}}))();const et=rn({__name:Kn(381),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=q();let l=null,y=Q(null),x=null;const I=Q(null);on((()=>{var n,t;const e=nt;null==(n=I.value)||n[e(389)](),null==(t=y[e(425)])||t[e(426)]()}));const{onBeforeLoop:b}=X();let w=1;b((()=>{const n=nt;x&&I[n(425)]&&y[n(425)]&&(i[n(408)]===1/0||w<i[n(408)])&&(i[n(414)]?x[n(396)](s[n(425)],u[n(425)]):x[n(396)](s[n(425)],pn(I[n(425)][n(380)])),w++)}));const S=([r,o]=an((()=>async function(n,t){const e=Gn,{scene:r}=q(),{preset:o,blur:i,files:a=[],path:c="",background:s}=J(n),u=Q(),l=nn((()=>Array[e(229)](a.value))),h=nn((()=>l.value?f:K)),v=Q(null);return tn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(221)].length>0&&!o[r(221)]){try{v[r(221)]=await Y(en(h),l[r(221)]?[en(n)]:en(n),(n=>{const e=r;t[e(221)]&&n[e(225)](en(t))}))}catch(i){throw new Error("Failed to load environment map: "+i)}v[r(221)]&&(u[r(221)]=l.value?v[r(221)][0]:v.value,u[r(221)][r(194)]=l[r(221)]?p:d)}}),{immediate:!0}),tn((()=>u[e(221)]),(n=>{const t=e;r[t(221)]&&(r.value[t(217)]=n)}),{immediate:!0}),tn((()=>[s[e(221)],u[e(221)]]),(([n,o])=>{const i=e;if(r[i(221)]){let e=(null==t?void 0:t[i(221)])?t.value[i(230)]:o,a=r[i(221)].background;!(null==a?void 0:a.isColor)&&(a=void 0),r[i(221)][i(233)]=n?e:a}}),{immediate:!0}),tn((()=>null==i?void 0:i[e(221)]),(n=>{r.value&&(r.value.backgroundBlurriness=n)}),{immediate:!0}),tn(o,(async n=>{const t=e;if(n&&n in Hn){const e=Yn,o=Hn[n];try{v[t(221)]=await Y(K,o,(n=>{e&&n[t(225)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v[t(221)]&&(u[t(221)]=v[t(221)],u[t(221)][t(194)]=d)}else if(n&&!(n in Hn))throw new Error("Preset must be one of: "+Object.keys(Hn).join(", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(382)],M=n=>{const t=e;n?(u[t(425)][t(419)]=n[t(382)],i[t(374)]&&(u[t(425)][t(374)]=n[t(382)])):(u[t(425)].environment=S[t(425)],i[t(374)]&&(u[t(425)][t(374)]=S[t(425)]))};tn(S,(n=>{const t=e;y[t(425)]&&M(y[t(425)])}),{immediate:!0,deep:!0}),c({EnvSence:Bn});const R=()=>{var n;const t=e;null==(n=y[t(425)])||n[t(426)](),y[t(425)]=new v(i[t(397)]),x=new m(i.near,i[t(407)],y[t(425)]),i.useDefaultScene?(y[t(425)][t(382)].type=g,y[t(425)][t(382)][t(373)]=!1,y[t(425)][t(382)][t(385)]=_,y[t(425)].texture[t(372)]=_):y[t(425)].texture[t(401)]=h,M(y[t(425)])};return tn((()=>cn()[e(400)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(425)].texture.type!==h)&&(l=n(),Array[o(403)](l)&&l[o(378)]>0&&typeof(null==(t=l[0])?void 0:t[o(401)])!==o(387))?R():(null==(r=y[o(425)])||r.dispose(),y[o(425)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(425)]=S,tn((()=>i[e(414)]),(n=>{y[e(425)]&&R()})),(n,t)=>{const r=e;return en(y)?(sn(),un("TresEnvSence",{key:0,ref_key:r(421),ref:I},[ln(n[r(402)],"default")],512)):fn("",!0)}}});function rt(n){function t(n){const e=nt;if("string"==typeof n)return function(n){}[e(416)](e(418))[e(383)](e(392));1!==(""+n/n)[e(378)]||n%20==0?function(){return!0}[e(416)](e(428)+e(398))[e(391)](e(411)):function(){return!1}.constructor(e(428)+e(398))[e(383)](e(399)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ot=at;!function(n,t){const e=at,r=st();for(;;)try{if(446297===-parseInt(e(409))/1*(parseInt(e(377))/2)+-parseInt(e(416))/3*(-parseInt(e(385))/4)+parseInt(e(391))/5+parseInt(e(408))/6*(-parseInt(e(417))/7)+-parseInt(e(383))/8*(parseInt(e(401))/9)+parseInt(e(425))/10*(-parseInt(e(421))/11)+parseInt(e(419))/12*(parseInt(e(404))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(382)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(n,t){const e=st();return(at=function(n,t){return e[n-=374]})(n,t)}!function(){it(this,(function(){const n=at,t=new RegExp(n(379)),e=new RegExp(n(388),"i"),r=ht("init");t[n(392)](r+"chain")&&e.test(r+n(396))?ht():r("0")}))()}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(382)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function st(){const n=["test","console","TresRingGeometry","material","input","rect","toneMapped","string","counter","5901165jqhXqf","color","log","1144uGgjnD","table","needsUpdate","intensity","132PGvzkY","1KlwfEy","multiplyScalar","warn","exception","stateObject","toString","gger","3lbJfoa","168245mLXiuz","length","280272HQXSWB","return (function() ","143phhtGB","call","ring","prototype","536430WuudVc","from","constructor","index","TresMesh","debu","bind","828226pgnkHp","map","function *\\( *\\)","__proto__","while (true) {}","apply","8KYuTGK","error","2573988ZbSxig","value","side","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","info","216995IfldIH"];return(st=function(){return n})()}ct(void 0,(function(){const n=at,t=function(){const n=at;let t;try{t=Function(n(420)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(393)]=t[n(393)]||{},r=[n(403),n(411),n(390),n(384),n(412),n(405),"trace"];for(let o=0;o<r.length;o++){const t=ct[n(427)][n(424)][n(376)](ct),i=r[o],a=e[i]||t;t[n(380)]=ct.bind(ct),t.toString=a[n(414)][n(376)](a),e[i]=t}}))();const ut={key:0,args:[0,1,64]},lt={key:1,args:[.5,1,64]},ft={key:2},pt=[ot(398),ot(378),ot(387),"color"],dt=rn({__name:ot(428),props:{args:{default:null},from:{default:ot(397)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=Q();return dn((()=>{const n=at;e[n(386)]&&(e.value[n(402)][n(410)](t[n(407)]),e.value[n(406)]=!0)})),hn((()=>{})),(n,r)=>{const o=at;return sn(),un(o(374),null,["circle"===t[o(426)]?(sn(),un("TresRingGeometry",ut)):t[o(426)]===o(423)?(sn(),un(o(394),lt)):t[o(426)]===o(397)?(sn(),un("TresPlaneGeometry",ft)):(sn(),vn(t[o(426)],{key:3,args:t})),mn("TresMeshBasicMaterial",{ref_key:o(395),ref:e,toneMapped:n[o(398)],map:n.map,side:en(x),color:n.color},null,8,pt)])}}});function ht(n){function t(n){const e=at;if(typeof n===e(399))return function(n){}[e(427)](e(381)).apply(e(400));1!==(""+n/n)[e(418)]||n%20==0?function(){return!0}[e(427)]("debugger")[e(422)](e(389)):function(){return!1}[e(427)](e(375)+e(415))[e(382)](e(413)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=gt,r=_t();for(;;)try{if(725118===-parseInt(e(457))/1+-parseInt(e(469))/2+-parseInt(e(448))/3*(-parseInt(e(446))/4)+-parseInt(e(454))/5+parseInt(e(449))/6*(parseInt(e(474))/7)+parseInt(e(451))/8*(-parseInt(e(439))/9)+parseInt(e(465))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[gt(459)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){vt(this,(function(){const n=gt,t=new RegExp(n(443)),e=new RegExp(n(452),"i"),r=xt(n(440));t[n(444)](r+n(445))&&e[n(444)](r+n(453))?xt():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[gt(459)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function gt(n,t){const e=_t();return(gt=function(n,t){return e[n-=436]})(n,t)}function _t(){const n=["1320891SVdbqg","60rKqToh","gger","64DLYdyF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","5265595OFUJAI","toString","value","61134AKwJmG","stateObject","apply","warn","height","while (true) {}","length","log","10706580xuVTDE","constructor","trace","counter","2755960XXtMuY","debu","dispose","depthTexture","error","620627yyaMZy","setRenderTarget","action","return (function() ","bind","68409mUibVG","init","console","prototype","function *\\( *\\)","test","chain","12jUNUTq","call"];return(_t=function(){return n})()}function yt(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?J(n):J(_n(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=q();return dn((()=>{var n;const a=gt;null==(n=t[a(456)])||n[a(471)](),t[a(456)]=new I((null==r?void 0:r[a(456)])||p.width[a(456)],(null==e?void 0:e.value)||p.height[a(456)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(456)])),(null==i?void 0:i[a(456)])&&(t[a(456)][a(472)]=new w((null==r?void 0:r[a(456)])||p.width[a(456)],(null==e?void 0:e[a(456)])||p[a(461)][a(456)],S))})),s((()=>{const n=gt;(null==a?void 0:a[n(456)])&&(l[n(456)].setRenderTarget(t[n(456)]),l.value.clear(),l[n(456)].render(f[n(456)],u[n(456)]),l[n(456)][n(475)](null))})),yn((()=>{var n;const e=gt;null==(n=t[e(456)])||n[e(471)]()})),t}function xt(n){function t(n){const e=gt;if("string"==typeof n)return function(n){}[e(466)](e(462))[e(459)](e(468));1!==(""+n/n).length||n%20==0?function(){return!0}[e(466)]("debu"+e(450))[e(447)](e(436)):function(){return!1}[e(466)](e(470)+"gger")[e(459)](e(458)),t(++n)}try{if(n)return t;t(0)}catch(e){}}mt(void 0,(function(){const n=gt;let t;try{t=Function(n(437)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(441)]=t[n(441)]||{},r=[n(464),n(460),"info",n(473),"exception","table",n(467)];for(let i=0;i<r[n(463)];i++){const t=mt.constructor[n(442)][n(438)](mt),o=r[i],a=e[o]||t;t.__proto__=mt[n(438)](mt),t[n(455)]=a[n(455)][n(438)](a),e[o]=t}}))();const It=Rt;!function(n,t){const e=Rt,r=wt();for(;;)try{if(193770===-parseInt(e(310))/1+parseInt(e(315))/2+-parseInt(e(336))/3+parseInt(e(326))/4*(-parseInt(e(330))/5)+-parseInt(e(350))/6+parseInt(e(354))/7*(-parseInt(e(356))/8)+parseInt(e(358))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(352)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function wt(){const n=["while (true) {}","test","constructor","1780zZJusD","warn","material","console","3355TAYCEn","bind","fboResolution","log","traverse","__proto__","1055094leXrXw","isMesh","string","exception","chain","MeshTransmissionMaterialClass","stateObject","thickness","backsideThickness","time","backside","envMapIntensity","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","111354JiGkfE","error","apply","side","238pLvrrG","counter","79952xbirqC","texture","10275984XsCxrl","buffer","toneMapping","288627ZDVNdN","TresMeshTransmissionMaterial","background","gger","debu","698538fEJdQL","return (function() ","length","setRenderTarget","uuid","value","input","trace"];return(wt=function(){return n})()}!function(){bt(this,(function(){const n=Rt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(349),"i"),r=At("init");t[n(324)](r+n(340))&&e.test(r+n(321))?At():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(352)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();St(void 0,(function(){const n=Rt;let t;try{t=Function(n(316)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(329)]=t[n(329)]||{},r=[n(333),n(327),"info",n(351),n(339),"table",n(322)];for(let i=0;i<r[n(317)];i++){const t=St[n(325)].prototype[n(331)](St),o=r[i],a=e[o]||t;t[n(335)]=St[n(331)](St),t[n(348)]=a[n(348)].bind(a),e[o]=t}}))();const Mt=["buffer",It(353)];function Rt(n,t){const e=wt();return(Rt=function(n,t){return e[n-=308]})(n,t)}const Et=rn({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=It,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=q(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new Rn,{onBeforeLoop:f}=X(),p=yt({width:u[e(332)],height:u.fboResolution,isLoop:!1}),d=yt({width:u.fboResolution,height:u.fboResolution,isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await In(),s[n(320)]=function(n,t){const e=Rt;let r;return n[e(334)]((n=>{const o=e;n[o(337)]&&n.material&&n[o(328)].uuid===t&&(r=n)})),r}(i[n(320)],r[n(320)][n(319)])})),f((({elapsed:n})=>{const t=e;r[t(320)][t(345)]=n,r[t(320)].buffer===d.value[t(357)]&&s[t(320)]&&(m=a.value.toneMapping,h=i[t(320)][t(312)],v=r[t(320)][t(347)],g=s.value.material[t(353)],s[t(320)].material=l,u[t(346)]&&(a[t(320)][t(318)](p[t(320)]),a[t(320)].render(i.value,c[t(320)]),s[t(320)][t(328)]=r[t(320)],s[t(320)][t(328)].thickness=u[t(344)],s[t(320)][t(328)][t(308)]=p[t(320)][t(357)],s[t(320)][t(328)].side=M,s.value[t(328)][t(347)]=0),a.value[t(318)](d[t(320)]),a[t(320)].render(i[t(320)],c[t(320)]),s[t(320)][t(328)][t(308)]=d[t(320)].texture,s[t(320)].material=r[t(320)],s[t(320)][t(328)][t(343)]=u.thickness,s[t(320)][t(328)][t(353)]=g,s[t(320)][t(328)][t(347)]=v,i.value[t(312)]=h,a[t(320)][t(318)](null),a[t(320)][t(309)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un(o(311),{ref_key:o(341),ref:r,buffer:en(d).texture,side:en(x)},null,8,Mt)}}});function At(n){function t(n){const e=Rt;if(typeof n===e(338))return function(n){}[e(325)](e(323))[e(352)](e(355));1!==(""+n/n)[e(317)]||n%20==0?function(){return!0}[e(325)](e(314)+e(313)).call("action"):function(){return!1}.constructor(e(314)+e(313))[e(352)](e(342)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tt=Ct;!function(n,t){const e=Ct,r=zt();for(;;)try{if(759113===-parseInt(e(373))/1+parseInt(e(352))/2+-parseInt(e(401))/3*(parseInt(e(368))/4)+-parseInt(e(405))/5+parseInt(e(367))/6+-parseInt(e(364))/7+parseInt(e(359))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(363)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dt(this,(function(){const n=Ct,t=new RegExp(n(398)),e=new RegExp(n(354),"i"),r=Bt("init");t[n(387)](r+"chain")&&e[n(387)](r+"input")?Bt():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(){const n=["7463292hkWThB","5147972yTcITa","error","console","prototype","matrixWorld","88687OVDIlG","table","default","position","trace","counter","call","$slots","outer","right","value","precise","TresGroup","toString","test","bottom","bind","log","getBoundingSphere","debu","length","constructor","info","top","gref","function *\\( *\\)","getCenter","gger","3sufKjn","set","disableX","while (true) {}","4415920yZzszP","max","min","action","stateObject","return (function() ","1404180RBXhFW","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","front","disableY","setFromObject","index","11446816lIjZYR","back",'{}.constructor("return this")( )',"left","apply","2511929sUykCU","disable","__proto__"];return(zt=function(){return n})()}function Ct(n,t){const e=zt();return(Ct=function(n,t){return e[n-=351]})(n,t)}Pt(void 0,(function(){const n=Ct;let t;try{t=Function(n(351)+n(361)+");")()}catch(o){t=window}const e=t[n(370)]=t[n(370)]||{},r=[n(390),"warn",n(395),n(369),"exception",n(374),n(377)];for(let i=0;i<r[n(393)];i++){const t=Pt[n(394)][n(371)][n(389)](Pt),o=r[i],a=e[o]||t;t[n(366)]=Pt[n(389)](Pt),t[n(386)]=a.toString[n(389)](a),e[o]=t}}))();const Ot=rn({__name:Tt(358),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return hn((()=>{const n=Ct;if(!r[n(383)])return;if(!o.value)return;r[n(383)][n(372)].identity();const e=(new R)[n(357)](o[n(383)],t[n(384)]),i=new E,a=new A,c=e[n(406)].x-e[n(407)].x,s=e[n(406)].y-e.min.y,u=e.max.z-e[n(407)].z;e[n(399)](i),e[n(391)](a);const l=t[n(396)]?s/2:t[n(388)]?-s/2:0,f=t[n(362)]?-c/2:t[n(382)]?c/2:0,p=t[n(355)]?u/2:t[n(360)]?-u/2:0;r[n(383)][n(376)][n(402)](t[n(365)]||t[n(403)]?0:-i.x+f,t[n(365)]||t[n(356)]?0:-i.y+l,t[n(365)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Ct;return sn(),un(i(385),{ref_key:i(397),ref:e},[mn("TresGroup",{ref_key:i(381),ref:r},[mn("TresGroup",{ref_key:"inner",ref:o},[ln(n[i(380)],i(375))],512)],512)],512)}}});function Bt(n){function t(n){const e=Ct;if(typeof n===e(353))return function(n){}[e(394)](e(404))[e(363)](e(378));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(392)+e(400))[e(379)](e(408)):function(){return!1}[e(394)](e(392)+e(400))[e(363)](e(409)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ft=Nt;function kt(){const n=["action","gger","2703904fSvVMS","debu","constructor","helper","6NbrBIo","init","resolution","input","__proto__","exception","set","color","call","primitive","180WMBRmZ","stateObject","2115702cdjLTy","function *\\( *\\)",'{}.constructor("return this")( )',"Vector3","value","1125198wRoCpv","info","5sNDsJL","console","test","scene","length","backsideIOR","toString","default","warn","bind","group","worldRadius","object","564228udqpoR","lightSource","index","883659FbsoDT","8469464GUuVVi","log","counter","intensity","error","ior","apply","trace","string","3944150IeovJn","causticsOnly","params","far","return (function() ","chain"];return(kt=function(){return n})()}!function(n,t){const e=Nt,r=kt();for(;;)try{if(687172===parseInt(e(346))/1+-parseInt(e(328))/2+parseInt(e(368))/3*(parseInt(e(364))/4)+-parseInt(e(330))/5*(parseInt(e(380))/6)+-parseInt(e(356))/7+parseInt(e(347))/8+-parseInt(e(343))/9*(parseInt(e(378))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(353)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jt(this,(function(){const n=Nt,t=new RegExp(n(324)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Gt(n(369));t[n(332)](r+n(361))&&e[n(332)](r+n(371))?Gt():r("0")}))()}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nt(n,t){const e=kt();return(Nt=function(n,t){return e[n-=324]})(n,t)}Ut(void 0,(function(){const n=Nt;let t;try{t=Function(n(360)+n(325)+");")()}catch(o){t=window}const e=t.console=t[n(331)]||{},r=[n(348),n(338),n(329),n(351),n(373),"table",n(354)];for(let i=0;i<r[n(334)];i++){const t=Ut[n(366)].prototype[n(339)](Ut),o=r[i],a=e[o]||t;t[n(372)]=Ut[n(339)](Ut),t[n(336)]=a[n(336)].bind(a),e[o]=t}}))();const Lt=[Ft(342)],Ht=[Ft(342)],Zt=rn({__name:Ft(345),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ft,e=n,{renderer:r}=q(),o=En(r[t(327)],{frames:1/0,resolution:e[t(370)],worldRadius:e[t(341)]});o[t(358)].backside=!0;const i=xn(null);tn(i,(n=>{n&&o[t(333)].add(n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o.update()})),dn((()=>{const n=t;e[n(375)]&&o[n(358)][n(375)].set(e[n(375)]),e[n(352)]&&(o.params.ior=e[n(352)]),e[n(335)]&&(o[n(358)][n(335)]=e[n(335)]),e[n(359)]&&(o[n(358)][n(359)]=e[n(359)]),e[n(341)]&&(o[n(358)][n(341)]=e[n(341)]),e[n(350)]&&(o[n(358)][n(350)]=e.intensity)})),tn((()=>e.causticsOnly),(n=>{const e=t;o[e(358)][e(357)]=n})),tn((()=>e[t(344)]),(n=>{const e=t;n&&o[e(358)][e(344)]instanceof T[e(326)]&&o[e(358)][e(344)][e(374)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(bn,null,[mn("TresGroup",{ref_key:"group",ref:i},[ln(n.$slots,r(337))],512),mn(r(377),{object:en(o)[r(340)],position:[0,.003,0]},null,8,Lt),mn("primitive",{object:en(o)[r(367)],visible:!1},null,8,Ht)],64)}}});function Gt(n){function t(n){const e=Nt;if(typeof n===e(355))return function(n){}.constructor("while (true) {}").apply(e(349));1!==(""+n/n)[e(334)]||n%20==0?function(){return!0}[e(366)](e(365)+e(363))[e(376)](e(362)):function(){return!1}.constructor(e(365)+"gger")[e(353)](e(379)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Wt,r=Xt();for(;;)try{if(833120===parseInt(e(210))/1+parseInt(e(167))/2+-parseInt(e(189))/3*(parseInt(e(175))/4)+parseInt(e(170))/5+parseInt(e(190))/6+parseInt(e(199))/7*(-parseInt(e(209))/8)+-parseInt(e(164))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(n,t){const e=Xt();return(Wt=function(n,t){return e[n-=164]})(n,t)}!function(){Vt(this,(function(){const n=Wt,t=new RegExp(n(197)),e=new RegExp(n(178),"i"),r=Yt(n(166));t[n(205)](r+n(192))&&e.test(r+n(181))?Yt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();$t(void 0,(function(){const n=Wt;let t;try{t=Function(n(179)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(174)]=t[n(174)]||{},r=[n(191),n(186),n(204),n(168),"exception",n(176),n(172)];for(let i=0;i<r.length;i++){const t=$t[n(206)].prototype[n(188)]($t),o=r[i],a=e[o]||t;t.__proto__=$t[n(188)]($t),t[n(198)]=a[n(198)].bind(a),e[o]=t}}))();const qt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=T[r(165)][r(203)];return D[r(203)]=D.shadowmap_pars_fragment[r(213)](r(183),r(187)+t+r(171)+n+r(185)+e+r(212)+e+r(195)+e+r(173)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(180)+e+r(215))[r(213)](r(196),r(177)),(n,t,e)=>{D[r(203)]=o,function(n,t,e){const r=Wt;t.traverse((t=>{const e=Wt;t.material&&(Array[e(201)](t[e(208)])?t[e(208)].forEach((t=>{n.properties.remove(t),t.dispose()})):(n[e(202)][e(200)](t.material),t.material.dispose()))})),n[r(204)].programs[r(169)]=0,n[r(211)](t,e)}(n,t,e)}};function Yt(n){function t(n){const e=Wt;if("string"==typeof n)return function(n){}[e(206)](e(194))[e(207)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(206)](e(193)+e(214))[e(182)](e(184)):function(){return!1}.constructor(e(193)+e(214))[e(207)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xt(){const n=["test","constructor","apply","material","8lsSWzp","1050986BUnVvD","compile","; i ++) {\n        offset = (vogelDiskSample(j, ","replace","gger",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","5993325ouuawX","ShaderChunk","init","2036484JYHrPS","error","length","3032055xPgswW",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","trace","; i++) {\n        vogelSample = vogelDiskSample(j, ","console","144kaEFZy","table","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","input","call","#ifdef USE_SHADOWMAP","action",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","warn","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","bind","69051fCrfmP","6116880SIWUkX","log","chain","debu","while (true) {}",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","#if defined( SHADOWMAP_TYPE_PCF )","function *\\( *\\)","toString","9572234BEkzcf","remove","isArray","properties","shadowmap_pars_fragment","info"];return(Xt=function(){return n})()}const Kt=te;!function(n,t){const e=te,r=Qt();for(;;)try{if(921030===-parseInt(e(507))/1+parseInt(e(519))/2*(parseInt(e(514))/3)+-parseInt(e(490))/4*(parseInt(e(503))/5)+parseInt(e(495))/6*(-parseInt(e(501))/7)+-parseInt(e(504))/8+-parseInt(e(509))/9*(-parseInt(e(512))/10)+parseInt(e(505))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(){const n=["756790VsBOYV","length","2427AxCqOB","trace","apply","input","__proto__","1610JmbNfz","gger","counter","error","return (function() ","index","material","debu","traverse","function *\\( *\\)","4tCDYuU","bind","exception","action","while (true) {}","12BRWbEN","test","string","table","call","stateObject","2779259ukhoVB","value","8371420RYDBmE","14117368ZnbktQ","61277469YHpSMQ","log","1294902qGmygX","toString","27IlTGSS","chain","constructor"];return(Qt=function(){return n})()}!function(){Jt(this,(function(){const n=te,t=new RegExp(n(489)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=re("init");t.test(r+n(510))&&e[n(496)](r+n(517))?re():r("0")}))()}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(516)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function te(n,t){const e=Qt();return(te=function(n,t){return e[n-=481]})(n,t)}ne(void 0,(function(){const n=te,t=function(){const n=te;let t;try{t=Function(n(484)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(506),"warn","info",n(483),n(492),n(498),n(515)];for(let o=0;o<r[n(513)];o++){const t=ne.constructor.prototype[n(491)](ne),i=r[o],a=e[i]||t;t[n(518)]=ne[n(491)](ne),t[n(508)]=a.toString[n(491)](a),e[i]=t}}))();const ee=rn({__name:Kt(485),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=q();let i=null;const a=n=>{const t=te,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(502)],o[t(502)],e[t(502)]),i=null),a&&(i=qt({focus:s,size:c,samples:u}),o[t(502)][t(488)]((n=>{n instanceof l&&n[t(486)].dispose()})))};return a(t),tn(t,(()=>{a(t)})),(n,t)=>null}});function re(n){function t(n){const e=te;if(typeof n===e(497))return function(n){}[e(511)](e(494))[e(516)](e(482));1!==(""+n/n)[e(513)]||n%20==0?function(){return!0}[e(511)](e(487)+e(481))[e(499)](e(493)):function(){return!1}[e(511)](e(487)+e(481))[e(516)](e(500)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const oe=se;!function(n,t){const e=se,r=ae();for(;;)try{if(537858===parseInt(e(205))/1+-parseInt(e(223))/2*(-parseInt(e(191))/3)+parseInt(e(204))/4+-parseInt(e(194))/5*(parseInt(e(208))/6)+-parseInt(e(196))/7*(-parseInt(e(201))/8)+-parseInt(e(206))/9*(-parseInt(e(183))/10)+-parseInt(e(185))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ae(){const n=["10hRIGDC","console","16947348LXeuNC","colorspace_fragment","return (function() ","setTexelSize","debu","kernel","75BKMmNO","toneMapped","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","70pfNRcM",'{}.constructor("return this")( )',"84VmEyle","log","length","counter","bind","354728fOwtnX","apply","prototype","3558540giBYxM","617373WRVPnm","3772125FxAKns","uniforms","444546jlbvym","trace","toString","constructor","string","chain","warn","halfTexelSize","while (true) {}","setResolution","set","multiplyScalar",">\n        }","replace","__proto__","52606GeoMtO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","resolution","gger","call","texelSize","encodings_fragment","table","input","value","test"];return(ae=function(){return n})()}!function(){ie(this,(function(){const n=se,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(224),"i"),r=fe("init");t[n(182)](r+n(213))&&e[n(182)](r+n(180))?fe():r("0")}))()}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(n,t){const e=ae();return(se=function(n,t){return e[n-=180]})(n,t)}ce(void 0,(function(){const n=se,t=function(){const n=se;let t;try{t=Function(n(187)+n(195)+");")()}catch(e){t=window}return t}(),e=t[n(184)]=t[n(184)]||{},r=[n(197),n(214),"info","error","exception",n(230),n(209)];for(let o=0;o<r[n(198)];o++){const t=ce[n(211)][n(203)][n(200)](ce),i=r[o],a=e[i]||t;t[n(222)]=ce.bind(ce),t.toString=a[n(210)][n(200)](a),e[i]=t}}))();const ue=parseInt(B[oe(221)](/\D+/g,""));class le extends P{constructor(n=new C){const t=oe;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(ue>=154?186:229)+t(220),vertexShader:t(193),blending:O,depthWrite:!1,depthTest:!1}),this[t(192)]=!1,this[t(188)](n.x,n.y),this[t(190)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=oe;this[e(207)][e(228)][e(181)].set(n,t),this[e(207)][e(215)].value[e(218)](n,t)[e(219)](.5)}[oe(217)](n){const t=oe;this[t(207)][t(225)][t(181)].copy(n)}}function fe(n){function t(n){const e=se;if(typeof n===e(212))return function(n){}[e(211)](e(216))[e(202)](e(199));1!==(""+n/n)[e(198)]||n%20==0?function(){return!0}[e(211)](e(189)+e(226))[e(227)]("action"):function(){return!1}[e(211)](e(189)+"gger")[e(202)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const pe=me;!function(n,t){const e=me,r=ve();for(;;)try{if(222014===-parseInt(e(358))/1*(-parseInt(e(357))/2)+parseInt(e(327))/3+-parseInt(e(306))/4+-parseInt(e(319))/5*(-parseInt(e(318))/6)+parseInt(e(330))/7+-parseInt(e(340))/8*(-parseInt(e(324))/9)+parseInt(e(321))/10*(-parseInt(e(334))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[me(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){de(this,(function(){const n=me,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(346),"i"),r=_e(n(311));t[n(309)](r+n(363))&&e.test(r+n(322))?_e():r("0")}))()}();const he=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[me(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ve(){const n=["value","trace","6OoATkk","47678NODdls","clone","depthBuffer","USE_DEPTH","length","chain","error","1357972RErUpX","__proto__","setRenderTarget","test","kernel","init","log","frustumCulled","constructor","renderTargetA","prototype","depthToBlurRatioBias","882006qHrcxT","5FgLCdQ","apply","10wTyeaN","input","renderTargetB","90TVKKpO","screen","camera","739482aczYYz","renderToScreen","return (function() ","2494205HkmXZq","inputBuffer","setTexelSize","render","6514937yfyIkb","convolutionMaterial","debu","bind","setAttribute","call","208744QFnPKR","info",'{}.constructor("return this")( )',"uniforms","gger","maxDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","warn","minDepthThreshold","defines","scene","setResolution","texture","while (true) {}"];return(ve=function(){return n})()}function me(n,t){const e=ve();return(me=function(n,t){return e[n-=305]})(n,t)}he(void 0,(function(){const n=me;let t;try{t=Function(n(329)+n(342)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(312),n(348),n(341),n(305),"exception","table",n(356)];for(let i=0;i<r[n(362)];i++){const t=he.constructor[n(316)][n(337)](he),o=r[i],a=e[o]||t;t[n(307)]=he.bind(he),t.toString=a.toString[n(337)](a),e[o]=t}}))();class ge{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=me;this.renderToScreen=!1,this[c(315)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(323)]=this[c(315)][c(359)](),this.convolutionMaterial=new le,this.convolutionMaterial[c(332)](1/t,1/e),this[c(335)][c(352)](new C(t,e)),this[c(351)]=new u,this[c(326)]=new F,this[c(335)][c(343)][c(349)].value=r,this.convolutionMaterial[c(343)][c(345)][c(355)]=o,this.convolutionMaterial[c(343)].depthScale[c(355)]=i,this[c(335)][c(343)][c(317)].value=a,this[c(335)][c(350)][c(361)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p.setAttribute("position",new j(s,3)),p[c(338)]("uv",new j(f,2)),this[c(325)]=new l(p,this.convolutionMaterial),this[c(325)][c(313)]=!1,this[c(351)].add(this[c(325)])}[pe(333)](n,t,e){const r=pe,o=this.scene,i=this[r(326)],a=this[r(315)],c=this[r(323)],s=this[r(335)],u=s[r(343)];u[r(360)][r(355)]=t.depthTexture;const l=s[r(310)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(310)][r(355)]=l[p],u[r(331)][r(355)]=h[r(353)],n[r(308)](f),n.render(o,i),h=f;u.kernel.value=l[p],u[r(331)][r(355)]=h[r(353)],n[r(308)](this[r(328)]?null:e),n[r(333)](o,i)}}function _e(n){function t(n){const e=me;if("string"==typeof n)return function(n){}.constructor(e(354)).apply("counter");1!==(""+n/n)[e(362)]||n%20==0?function(){return!0}[e(314)]("debugger")[e(339)]("action"):function(){return!1}[e(314)](e(336)+e(344)).apply(e(347)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ye=xe;function xe(n,t){var e=we();return(xe=function(n,t){return e[n-=371]})(n,t)}!function(n,t){for(var e=xe,r=we();;)try{if(501628===parseInt(e(395))/1*(-parseInt(e(383))/2)+parseInt(e(438))/3+parseInt(e(374))/4+parseInt(e(427))/5+-parseInt(e(406))/6*(-parseInt(e(433))/7)+parseInt(e(407))/8*(parseInt(e(391))/9)+-parseInt(e(401))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ie=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ie(this,(function(){var n=xe,t=new RegExp(n(380)),e=new RegExp(n(447),"i"),r=Me(n(405));t[n(372)](r+n(404))&&e.test(r+n(376))?Me():r("0")}))()}();var be=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(){var n=["table","error","gger","return (function() ","while (true) {}","12439560pPrFBN","string","length","chain","init","12618pDkbIb","4856vCkwMl","_blurStrength","_maxDepthThreshold","exception","toString","_tDepth","prototype","maxDepthThreshold","tDiffuse","apply","mixStrength",'{}.constructor("return this")( )',"_depthToBlurRatioBias","textureMatrix","tDepth","bind","vertexShader","_textureMatrix","mixBlur","console","2402170IpMwWH","mirror","tDiffuseBlur","mixContrast","distortionMap","constructor","3199CaUDSW","_depthScale","call","_tDiffuseBlur","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","60039yNknzr","distortion","_minDepthThreshold","depthToBlurRatioBias","counter","value","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","minDepthThreshold","fragmentShader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","USE_UV","#include <project_vertex>","onBeforeCompile","test","stateObject","1887912nfajul","_mirror","input","debu","trace","_tDiffuse","function *\\( *\\)","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","uniforms","4330YVReRp","_distortionMap","hasBlur","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mixContrast","_mixBlur","depthScale","replace","2061FsTZBp","_distortion","_hasBlur","#include <emissivemap_fragment>","151qJsMIP"];return(we=function(){return n})()}be(void 0,(function(){var n,t=xe;try{n=Function(t(399)+t(418)+");")()}catch(s){n=window}for(var e=n[t(426)]=n.console||{},r=["log","warn","info",t(397),t(410),t(396),t(378)],o=0;o<r[t(403)];o++){var i=be[t(432)][t(413)].bind(be),a=r[o],c=e[a]||i;i.__proto__=be[t(422)](be),i[t(411)]=c[t(411)].bind(c),e[a]=i}}))();class Se extends U{constructor(n={}){var t=xe;super(n),this[t(412)]={value:null},this[t(384)]={value:null},this[t(379)]={value:null},this._tDiffuseBlur={value:null},this[t(424)]={value:null},this[t(393)]={value:!1},this[t(375)]={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this[t(440)]={value:.9},this[t(409)]={value:1},this[t(434)]={value:0},this[t(419)]={value:.25},this[t(392)]={value:1},this[t(387)]={value:1},this.setValues(n)}[ye(371)](n){var t,e=ye;!(null==(t=n.defines)?void 0:t[e(448)])&&(n.defines[e(448)]=""),n[e(382)][e(385)]=this[e(393)],n[e(382)].tDiffuse=this[e(379)],n[e(382)][e(421)]=this._tDepth,n[e(382)][e(431)]=this._distortionMap,n.uniforms.tDiffuseBlur=this[e(436)],n[e(382)][e(420)]=this[e(424)],n.uniforms.mirror=this[e(375)],n.uniforms[e(425)]=this._mixBlur,n.uniforms[e(417)]=this[e(408)],n[e(382)][e(445)]=this._minDepthThreshold,n.uniforms.maxDepthThreshold=this._maxDepthThreshold,n[e(382)][e(389)]=this[e(434)],n[e(382)][e(441)]=this[e(419)],n[e(382)][e(439)]=this[e(392)],n[e(382)][e(430)]=this[e(387)],n[e(423)]=e(444)+n[e(423)],n[e(423)]=n[e(423)][e(390)](e(449),e(437)),n[e(446)]=e(381)+n[e(446)],n[e(446)]=n[e(446)][e(390)](e(394),e(386))}get[ye(415)](){var n=ye;return this._tDiffuse[n(443)]}set tDiffuse(n){var t=ye;this[t(379)][t(443)]=n}get[ye(421)](){var n=ye;return this[n(412)][n(443)]}set[ye(421)](n){this[ye(412)].value=n}get[ye(431)](){var n=ye;return this[n(384)][n(443)]}set distortionMap(n){var t=ye;this[t(384)][t(443)]=n}get[ye(429)](){return this[ye(436)].value}set tDiffuseBlur(n){this._tDiffuseBlur.value=n}get textureMatrix(){var n=ye;return this[n(424)][n(443)]}set[ye(420)](n){var t=ye;this[t(424)][t(443)]=n}get[ye(385)](){var n=ye;return this[n(393)][n(443)]}set hasBlur(n){var t=ye;this._hasBlur[t(443)]=n}get[ye(428)](){var n=ye;return this[n(375)][n(443)]}set mirror(n){var t=ye;this._mirror[t(443)]=n}get[ye(425)](){var n=ye;return this[n(388)][n(443)]}set[ye(425)](n){var t=ye;this[t(388)][t(443)]=n}get mixStrength(){return this[ye(408)].value}set[ye(417)](n){var t=ye;this[t(408)][t(443)]=n}get[ye(445)](){return this[ye(440)].value}set[ye(445)](n){this[ye(440)].value=n}get[ye(414)](){var n=ye;return this[n(409)][n(443)]}set[ye(414)](n){this[ye(409)].value=n}get[ye(389)](){var n=ye;return this[n(434)][n(443)]}set depthScale(n){var t=ye;this._depthScale[t(443)]=n}get[ye(441)](){var n=ye;return this._depthToBlurRatioBias[n(443)]}set depthToBlurRatioBias(n){var t=ye;this[t(419)][t(443)]=n}get[ye(439)](){return this._distortion.value}set[ye(439)](n){this[ye(392)].value=n}get[ye(430)](){var n=ye;return this[n(387)][n(443)]}set[ye(430)](n){var t=ye;this._mixContrast[t(443)]=n}}function Me(n){function t(n){var e=xe;if(typeof n===e(402))return function(n){}[e(432)](e(400))[e(416)](e(442));1!==(""+n/n)[e(403)]||n%20==0?function(){return!0}[e(432)](e(377)+e(398))[e(435)]("action"):function(){return!1}.constructor(e(377)+"gger")[e(416)](e(373)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Re(){const n=["611034qjmgTQ","texture-matrix","mix-strength","texture","toString","mirror","warn","chain","far","index","uuid","sign","t-diffuse","rotationMatrix","stateObject","return (function() ","2244agstCM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","reflectorPlane","lookAt","244386UncFii","materialRef","TresMeshReflectorMaterial","trace","82069XPAHVD","string","setFromNormalAndCoplanarPoint","891OjECLv","render","projectionMatrix","counter","traverse",'{}.constructor("return this")( )',"reflect","defines-USE_DEPTH","min-depth-threshold","copy","autoUpdate","44wHKuoy","gger","normal","defines-USE_DISTORTION","virtualCamera","matrixWorldInverse","debu","extractRotation","98168QWGFJa","defines-USE_BLUR","value","reflectorWorldPosition","multiplyScalar","lookAtPosition","updateMatrixWorld","enabled","exception","shadowMap","33848nPTNRx","distortion","autoClear","dot","bind","__proto__","textureMatrix","setFromMatrixPosition","console","assign","length","setRenderTarget","log","visible","775765ynQvKa","4OvpZxN","1701160eLCzvh","matrixWorld","while (true) {}","depthTexture","test","init","apply","add","key","3UfNBxC","applyMatrix4","cameraWorldPosition","330MfCPVJ","subVectors","elements","isMesh","clipPlane","view","t-depth","input","constructor","constant","multiply","dispose","reflectorOffset","target","set"];return(Re=function(){return n})()}function Ee(n,t){const e=Re();return(Ee=function(n,t){return e[n-=389]})(n,t)}const Ae=Ee;!function(n,t){const e=Ee,r=Re();for(;;)try{if(437414===parseInt(e(475))/1*(-parseInt(e(414))/2)+parseInt(e(393))/3*(-parseInt(e(465))/4)+parseInt(e(464))/5+-parseInt(e(478))/6*(-parseInt(e(440))/7)+parseInt(e(450))/8*(-parseInt(e(421))/9)+parseInt(e(466))/10*(-parseInt(e(432))/11)+-parseInt(e(409))/12*(-parseInt(e(418))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(472)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Ee,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(410),"i"),r=Ce(n(471));t[n(470)](r+n(400))&&e.test(r+n(485))?Ce():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(472)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();De(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(408)+n(426)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(458)]||{},r=[n(462),n(399),"info","error",n(448),"table",n(417)];for(let o=0;o<r.length;o++){const t=De[n(486)].prototype.bind(De),i=r[o],a=e[i]||t;t[n(455)]=De.bind(De),t[n(397)]=a.toString[n(454)](a),e[i]=t}}))();const Pe=[Ae(394),Ae(398),Ae(405),Ae(484),"t-diffuse-blur","has-blur",Ae(395),Ae(429),"max-depth-threshold","depth-scale","depth-to-blur-ratio-bias",Ae(451),"distortionMap","mix-contrast","defines-USE_BLUR",Ae(428),Ae(435)],ze=rn({__name:Ae(402),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ae,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=J(o),{camera:y,scene:x,renderer:S,extend:M}=q();M({MeshReflectorMaterial:Se});const R=xn(),A=xn(),T=xn(),D=xn(),P=nn((()=>{const n=Ee;return"number"==typeof f[n(442)]?[f[n(442)],f[n(442)]]:f[n(442)]})),z=nn((()=>P[r(442)][0]>0||P[r(442)][1]>0)),C={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};dn((()=>{var n;const o=r;null==(n=R[o(442)])||n[o(396)][o(389)]();const f={minFilter:b,magFilter:b,type:h};var y,x;R[o(442)]=new I(i[o(442)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(442)],i[o(442)],G,V)},t(y,e(x)))),A[o(442)]=new I(i[o(442)],i[o(442)],f),T[o(442)]=new ge({resolution:i[o(442)],width:P[o(442)][0],height:P.value[1],minDepthThreshold:a[o(442)],maxDepthThreshold:s[o(442)],depthScale:u[o(442)],depthToBlurRatioBias:l.value}),D[o(442)]={mirror:p,textureMatrix:C[o(456)],mixBlur:d,tDiffuse:R[o(442)][o(396)],tDepth:R[o(442)].depthTexture,tDiffuseBlur:R[o(442)][o(396)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(442)],mixContrast:_,"defines-USE_BLUR":z[o(442)]?"":void 0,"defines-USE_DEPTH":u[o(442)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const O=xn(),{onLoop:B}=X();B((()=>{var n;const t=r;if(!(O.value&&S[t(442)]&&R[t(442)]&&y.value))return;const e=function(n,t){const e=Ee;let r;return n[e(425)]((n=>{const o=e;n[o(481)]&&n.material&&n[o(411)][o(403)]===t&&(r=n)})),r}(x.value,O[t(442)][t(403)]);if(!e)return;e[t(463)]=!1;const i=S[t(442)].xr[t(447)],a=S[t(442)].shadowMap[t(431)];(function(n){var t,e;const r=Ee;if(C[r(443)][r(457)](n[r(467)]),C.cameraWorldPosition.setFromMatrixPosition(null==(t=y[r(442)])?void 0:t[r(467)]),C[r(406)][r(439)](n[r(467)]),C.normal[r(392)](0,0,1),C[r(434)][r(476)](C[r(406)]),C[r(443)].addScaledVector(C[r(434)],o[r(390)]),C[r(483)].subVectors(C[r(443)],C[r(477)]),C[r(483)][r(453)](C.normal)>0)return;C[r(483)][r(427)](C[r(434)]).negate(),C[r(483)][r(473)](C[r(443)]),C.rotationMatrix[r(439)](null==(e=y.value)?void 0:e[r(467)]),C.lookAtPosition[r(392)](0,0,-1),C.lookAtPosition[r(476)](C[r(406)]),C[r(445)].add(C[r(477)]),C[r(391)][r(479)](C[r(443)],C.lookAtPosition),C[r(391)][r(427)](C[r(434)]).negate(),C.target[r(473)](C[r(443)]),C.virtualCamera.position[r(430)](C[r(483)]),C[r(436)].up.set(0,1,0),C.virtualCamera.up[r(476)](C.rotationMatrix),C[r(436)].up.reflect(C[r(434)]),C.virtualCamera[r(413)](C.target),C[r(436)][r(401)]=(null==y?void 0:y.value).far,C.virtualCamera[r(446)](),C.virtualCamera[r(423)][r(430)]((null==y?void 0:y[r(442)]).projectionMatrix),C[r(456)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[r(456)].multiply(C[r(436)][r(423)]),C.textureMatrix.multiply(C[r(436)].matrixWorldInverse),C[r(456)][r(488)](n.matrixWorld),C[r(412)][r(420)](C[r(434)],C[r(443)]),C[r(412)][r(476)](C[r(436)][r(437)]),C[r(482)].set(C[r(412)][r(434)].x,C[r(412)][r(434)].y,C.reflectorPlane[r(434)].z,C.reflectorPlane[r(487)]);const i=C.virtualCamera[r(423)];C.q.x=(Math[r(404)](C[r(482)].x)+i[r(480)][8])/i.elements[0],C.q.y=(Math[r(404)](C[r(482)].y)+i[r(480)][9])/i[r(480)][5],C.q.z=-1,C.q.w=(1+i.elements[10])/i[r(480)][14],C.clipPlane[r(444)](2/C[r(482)][r(453)](C.q)),i[r(480)][2]=C[r(482)].x,i[r(480)][6]=C[r(482)].y,i[r(480)][10]=C[r(482)].z+1,i.elements[14]=C[r(482)].w})(e),S.value[t(449)][t(431)]=!1,S[t(442)][t(461)](R.value),S[t(442)][t(452)]||S[t(442)].clear(),S[t(442)].render(x[t(442)],C[t(436)]),null==(n=null==T?void 0:T[t(442)])||n[t(422)](S.value,R[t(442)],A[t(442)]),S[t(442)].xr[t(447)]=i,S[t(442)][t(449)].autoUpdate=a,e[t(463)]=!0,S[t(442)][t(461)](null)}));const F=wn(),k=nn((()=>{const n=r,t={};return Object[n(459)](t,o),Object[n(459)](t,F[n(442)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(442)])||n[e(389)](),null==(t=null==A?void 0:A.value)||t[e(389)]()})),(n,t)=>{var e,o,i;const c=r;return sn(),un(c(416),Sn({key:c(474)+D.value[c(441)]+D.value[c(428)]+D.value[c(435)],ref_key:c(415),ref:O},k[c(442)],{"texture-matrix":C.textureMatrix,mirror:en(p),"t-diffuse":null==(e=R[c(442)])?void 0:e[c(396)],"t-depth":null==(o=R[c(442)])?void 0:o[c(469)],"t-diffuse-blur":null==(i=A.value)?void 0:i[c(396)],"has-blur":z[c(442)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Pe)}}});function Ce(n){function t(n){const e=Ee;if(typeof n===e(419))return function(n){}.constructor(e(468))[e(472)](e(424));1!==(""+n/n)[e(460)]||n%20==0?function(){return!0}[e(486)](e(438)+e(433)).call("action"):function(){return!1}.constructor(e(438)+e(433))[e(472)](e(407)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Fe,r=ke();for(;;)try{if(410230===parseInt(e(200))/1*(-parseInt(e(214))/2)+-parseInt(e(238))/3*(parseInt(e(203))/4)+-parseInt(e(222))/5+parseInt(e(223))/6+parseInt(e(236))/7+parseInt(e(235))/8*(-parseInt(e(199))/9)+-parseInt(e(216))/10*(-parseInt(e(197))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(232)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=Fe,t=new RegExp(n(208)),e=new RegExp(n(209),"i"),r=je("init");t[n(221)](r+n(204))&&e[n(221)](r+n(206))?je():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(232)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(n,t){const e=ke();return(Fe=function(n,t){return e[n-=197]})(n,t)}function ke(){const n=["CubeCamera",'{}.constructor("return this")( )',"constructor","console","string","update","apply","bind","error","8mpeRTw","2057426eqQxAA","while (true) {}","9dNiWwH","return (function() ","warn","background","prototype","exception","22OvOwDs","counter","7179930qLRMbI","1rNhjge","log","debu","778676UNABed","chain","length","input","stateObject","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","type","dispose","__proto__","value","849936LfyZlc","info","9771560BcnhnU","action","call","trace","toString","test","2470810EFCnID","2777442cDLjmj","fog","table"];return(ke=function(){return n})()}function je(n){function t(n){const e=Fe;if(typeof n===e(230))return function(n){}.constructor(e(237))[e(232)](e(198));1!==(""+n/n)[e(205)]||n%20==0?function(){return!0}[e(228)](e(202)+"gger")[e(218)](e(217)):function(){return!1}.constructor(e(202)+"gger").apply(e(207)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Be(void 0,(function(){const n=Fe,t=function(){const n=Fe;let t;try{t=Function(n(239)+n(227)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(229)]||{},r=[n(201),n(240),n(215),n(234),n(243),n(225),n(219)];for(let o=0;o<r[n(205)];o++){const t=Be[n(228)][n(242)].bind(Be),i=r[o],a=e[i]||t;t[n(212)]=Be[n(233)](Be),t[n(220)]=a[n(220)].bind(a),e[i]=t}}))();const Ue=He;!function(n,t){const e=He,r=Ge();for(;;)try{if(794628===-parseInt(e(156))/1*(-parseInt(e(144))/2)+parseInt(e(165))/3*(parseInt(e(181))/4)+-parseInt(e(174))/5+parseInt(e(157))/6*(parseInt(e(183))/7)+parseInt(e(175))/8+parseInt(e(159))/9+parseInt(e(168))/10*(-parseInt(e(172))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ne(this,(function(){const n=He,t=new RegExp(n(146)),e=new RegExp(n(162),"i"),r=We(n(163));t[n(151)](r+n(169))&&e[n(151)](r+n(152))?We():r("0")}))()}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function He(n,t){const e=Ge();return(He=function(n,t){return e[n-=142]})(n,t)}Le(void 0,(function(){const n=He,t=function(){const n=He;let t;try{t=Function(n(154)+n(147)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(184)]||{},r=[n(160),"warn",n(158),n(178),n(189),n(142),n(188)];for(let o=0;o<r.length;o++){const t=Le[n(186)][n(170)][n(155)](Le),i=r[o],a=e[i]||t;t[n(145)]=Le.bind(Le),t.toString=a[n(182)][n(155)](a),e[i]=t}}))();const Ze=["object"];function Ge(){const n=["$slots","4VMPyxG","toString","35hkKtlJ","console","while (true) {}","constructor","visible","trace","exception","far","call","index","length","table","gger","856206cgETOz","__proto__","function *\\( *\\)",'{}.constructor("return this")( )',"debu","value","counter","test","input","action","return (function() ","bind","1jmspTD","1481718EuIpKP","info","7193025fimCjR","log","near","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","envMap","2375964rlzIDJ","fog","texture","10610Vjumul","chain","prototype","string","21857ngzYxa","apply","4695585QhALdd","4702968fHwCld","TresGroup","frames","error","primitive"];return(Ge=function(){return n})()}const Ve=rn({__name:Ue(192),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ue,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=q(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return tn((()=>s),(n=>{var t;const e=Fe;null==(t=c[e(213)])||t[e(211)](),c[e(213)]=new v(n[e(213)]),c.value.texture[e(210)]=h}),{immediate:!0}),tn([u,l,c],(([n,t,e])=>{const r=Fe;e&&(f[r(213)]=new(T[r(226)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;null==(n=c[Fe(213)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Fe;p=a[t(213)][t(224)],d=a[t(213)][t(241)],a.value[t(241)]=r||d,a.value[t(224)]=o||p,null==(n=f[t(213)])||n[t(231)](i[t(213)],a[t(213)]),a[t(213)][t(224)]=p,a[t(213)][t(241)]=d}}}({resolution:o.resolution,near:o[r(161)],far:o[r(190)],envMap:o[r(164)],fog:o[r(166)]}),{onBeforeLoop:s}=X();let u=0;const l=Q(null);return s((()=>{const n=r;l.value&&(o[n(177)]===1/0||u<o[n(177)])&&(l[n(149)][n(187)]=!1,c(),l[n(149)][n(187)]=!0,u++)})),t({texture:null==(e=i[r(149)])?void 0:e[r(167)]}),(n,t)=>{const e=r;return sn(),un(e(176),null,[mn(e(179),{object:en(a)},null,8,Ze),mn("TresGroup",{ref_key:"rgRef",ref:l},[ln(n[e(180)],"default")],512)])}}});function We(n){function t(n){const e=He;if(typeof n===e(171))return function(n){}.constructor(e(185)).apply(e(150));1!==(""+n/n)[e(193)]||n%20==0?function(){return!0}.constructor(e(148)+e(143))[e(191)](e(153)):function(){return!1}[e(186)](e(148)+e(143))[e(173)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ye,r=Xe();for(;;)try{if(769904===-parseInt(e(369))/1*(parseInt(e(382))/2)+parseInt(e(374))/3*(-parseInt(e(360))/4)+-parseInt(e(356))/5*(-parseInt(e(389))/6)+-parseInt(e(380))/7*(-parseInt(e(376))/8)+-parseInt(e(368))/9+parseInt(e(375))/10+parseInt(e(393))/11*(parseInt(e(357))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ye(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$e(this,(function(){const n=Ye,t=new RegExp(n(361)),e=new RegExp(n(354),"i"),r=Je(n(366));t[n(386)](r+n(367))&&e[n(386)](r+n(352))?Je():r("0")}))()}();const qe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ye(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n,t){const e=Xe();return(Ye=function(n,t){return e[n-=350]})(n,t)}function Xe(){const n=["toString","ShaderMaterial","key","constructor","111PRfvZr","12769020GpRoYE","8cHdZyi","prototype","error","value","1449427kLelyP","clone","38PuOgAg","info","uniforms","__proto__","test",'{}.constructor("return this")( )',"bind","25068DvGyBu","entries","apply","exception","9581frJhsL","debu","warn","gger","input","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","490EIlADq","10056AhELaH","generateUUID","forEach","87964DZdGmM","function *\\( *\\)","counter","while (true) {}","length","trace","init","chain","6544827jdapOQ","16449svANFq"];return(Xe=function(){return n})()}function Ke(n,t,e,r){const o=Ye,i=class extends T[o(371)]{constructor(i={}){const a=o,s=Object[a(390)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=W[a(381)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(372)]="",s[a(359)]((([n])=>Object.defineProperty(this,n,{get:()=>this.uniforms[n][a(379)],set:t=>this[a(384)][n].value=t}))),Object.assign(this,i),r&&r(this)}};return i[o(372)]=$[o(358)](),i}function Je(n){function t(n){const e=Ye;if("string"==typeof n)return function(n){}[e(373)](e(363))[e(391)](e(362));1!==(""+n/n)[e(364)]||n%20==0?function(){return!0}[e(373)](e(394)+"gger").call("action"):function(){return!1}[e(373)](e(394)+e(351)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}qe(void 0,(function(){const n=Ye,t=function(){const n=Ye;let t;try{t=Function(n(355)+n(387)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(353),n(350),n(383),n(378),n(392),"table",n(365)];for(let o=0;o<r[n(364)];o++){const t=qe.constructor[n(377)][n(388)](qe),i=r[o],a=e[i]||t;t[n(385)]=qe[n(388)](qe),t[n(370)]=a[n(370)][n(388)](a),e[i]=t}}))();var Qe=ir;!function(n,t){for(var e=ir,r=hr();;)try{if(950458===parseInt(e(248))/1*(parseInt(e(197))/2)+-parseInt(e(154))/3+parseInt(e(183))/4+-parseInt(e(268))/5+-parseInt(e(241))/6*(parseInt(e(325))/7)+parseInt(e(165))/8+parseInt(e(171))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nr(this,(function(){var n=ir,t=new RegExp(n(251)),e=new RegExp(n(209),"i"),r=Or(n(198));t[n(296)](r+n(315))&&e[n(296)](r+"input")?Or():r("0")}))()}();var tr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function er(n){var t=ir,e=function(n,t){var e=ir;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(148)]];if(void 0!==r){var o=r.call(n,t||e(302));if(typeof o!==e(246))return o;throw new TypeError(e(178))}return(t===e(282)?String:Number)(n)}(n,t(282));return typeof e===t(225)?e:String(e)}function rr(n,t,e){var r=ir;return(t=er(t))in n?Object[r(162)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=ir,r=Object[e(212)](n);if(Object[e(133)]){var o=Object[e(133)](n);t&&(o=o[e(158)]((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push[e(218)](r,o)}return r}function ir(n,t){var e=hr();return(ir=function(n,t){return e[n-=130]})(n,t)}function ar(n){for(var t=ir,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0)[t(252)]((function(t){rr(n,t,r[t])})):Object[t(298)]?Object[t(145)](n,Object[t(298)](r)):or(Object(r)).forEach((function(e){var o=t;Object[o(162)](n,e,Object[o(266)](r,e))}))}return n}function cr(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object[e(212)](n);for(o=0;o<a[e(234)];o++)r=a[o],t[e(305)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(133)](n);for(o=0;o<a[e(234)];o++)r=a[o],t.indexOf(r)>=0||Object.prototype[e(265)][e(317)](n,r)&&(i[r]=n[r])}return i}function sr(n,t){var e=ir;(null==t||t>n[e(234)])&&(t=n[e(234)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ur(n,t){return function(n){if(Array[ir(299)](n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(239)!=typeof Symbol&&n[Symbol[e(195)]]||n[e(258)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(317)](n))[e(283)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(317)](r)).done)&&(s[e(189)](o[e(313)]),s[e(234)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(316)]&&(c=r[e(316)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if("string"==typeof n)return sr(n,t);var r=Object[e(151)][e(150)].call(n)[e(256)](8,-1);return r===e(210)&&n.constructor&&(r=n[e(249)].name),r===e(230)||r===e(152)?Array[e(157)](n):r===e(222)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(296)](r)?sr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(n,t){for(var e=ir,r=0;r<t.length;r++){var o=t[r];o[e(138)]=o[e(138)]||!1,o[e(267)]=!0,e(313)in o&&(o[e(245)]=!0),Object[e(162)](n,er(o.key),o)}}function fr(n){if(void 0===n)throw new ReferenceError(ir(294));return n}function pr(n,t){var e=ir;return(pr=Object[e(155)]?Object.setPrototypeOf[e(276)]():function(n,t){return n[e(312)]=t,n})(n,t)}function dr(n){var t=ir;return(dr=Object[t(155)]?Object[t(244)][t(276)]():function(n){var e=t;return n[e(312)]||Object[e(244)](n)})(n)}function hr(){var n=["4635120kbddwq","bump","();\n              // #_CSM_#\n          ","lastIndexOf","\\$&","create","csm_ClearcoatNormal","csm_Normal","bind","function","Material","// #_CSM_#","gger"," is not available in ","string","next","sham","concat","_getCacheHash","MeshBasicMaterial","_getMaterialDefine","MeshToonMaterial","baseMaterial","needsUpdate","csm_DiffuseColor","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","this hasn't been initialised - super() hasn't been called","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","test","while (true) {}","getOwnPropertyDescriptors","isArray","warn","csm_DepthAlpha","default","clearcoatNormal","MeshPhysicalMaterial","indexOf","find","MeshStandardMaterial","csm_ClearcoatRoughness","#define IS_","csm_FragColor","diffuse","__proto__","value","pointSize","chain","return","call","csm_Clearcoat","is not a constructor","MeshPhongMaterial","csm_Emissive","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","get","_generateMaterial","15337otMGSp","__csm","roughness","Super expression must either be null or a function","getOwnPropertySymbols","debu","table","MeshLambertMaterial","clearcoat","enumerable","CustomShaderMaterial does not support RawShaderMaterial","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","\n            \n            void main() {\n          ","cacheHash","set","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","defineProperties","stateObject","RawShaderMaterial","toPrimitive",". Shader cannot compile.","toString","prototype","Set","MeshMatcapMaterial","2395335qOVtRL","setPrototypeOf",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","from","filter","console","\n    #include <color_fragment>\n    diffuseColor = ","onBeforeCompile","defineProperty","\n            "," );\n    ","8210568yrBncP","substring",'" is required to use output "',"log",";\n    ","message","12602322PJiorS","replace","split","depthAlpha","fragmentShader","ShaderMaterial","type","@@toPrimitive must return a primitive value.","customProgramCacheKey","silent","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","6135840vwBiXv","info","action","MathUtils","construct","void main() {","push","csm_Bump",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","patchMap","csm_AO","position","iterator","generateUUID","28522HSBXOK","init","error","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","lights_physical_fragment","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ",";\n  ","csm_PositionRaw","instanceID","vertexShader","join","assign","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Object","MeshNormalMaterial","keys","uniforms",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","entries","\n    gl_Position = ","Cannot call a class as a function","apply","\n    varying mat4 csm_internal_vModelViewMatrix;\n","void main()","\n    gl_FragColor = ","Arguments","cacheKey","void ","symbol","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\n    vec4 csm_internal_positionUnprojected = ","fragColor","update","Map","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","metalness","length","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","includes","\n    vec3 objectNormal = ","material.clearcoat = ","undefined","();\n            // #_CSM_#\n          ","4338dQTeCU","\n    vec3 totalEmissiveRadiance = ","_patchShader","getPrototypeOf","writable","object","_getPatchMapForMaterial","21KiOXDX","constructor","toUpperCase","function *\\( *\\)","forEach","normal","CSM: ","\n    \n            ","slice","positionRaw","@@iterator","trace","trim","clearcoatRoughness","emissive","\n    gl_PointSize = ","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","propertyIsEnumerable","getOwnPropertyDescriptor","configurable"];return(hr=function(){return n})()}function vr(n){var t=function(){var n=ir;if("undefined"==typeof Reflect||!Reflect[n(187)])return!1;if(Reflect[n(187)][n(284)])return!1;if(typeof Proxy===n(277))return!0;try{return Boolean[n(151)].valueOf[n(317)](Reflect[n(187)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=dr(n);if(t){var i=dr(this)[r(249)];e=Reflect[r(187)](o,arguments,i)}else e=o[r(218)](this,arguments);return function(n,t){if(t&&(typeof t===ir(246)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fr(n)}(this,e)}}tr(void 0,(function(){for(var n=ir,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(159)]||{},r=[n(168),n(300),n(184),n(199),"exception",n(135),n(259)],o=0;o<r[n(234)];o++){var i=tr.constructor[n(151)][n(276)](tr),a=r[o],c=e[a]||i;i[n(312)]=tr.bind(tr),i.toString=c[n(150)][n(276)](c),e[a]=i}}))();var mr,gr,_r,yr={diffuse:Qe(292),normal:Qe(275),roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:Qe(321),ao:Qe(193),bump:Qe(190),clearcoat:Qe(318),clearcoatRoughness:Qe(308),clearcoatNormal:Qe(274),pointSize:"csm_PointSize",fragColor:Qe(310),depthAlpha:Qe(301),position:"csm_Position",positionRaw:Qe(204)},xr=(rr(mr={},""[Qe(285)](yr[Qe(194)]),"*"),rr(mr,""[Qe(285)](yr[Qe(257)]),"*"),rr(mr,""[Qe(285)](yr[Qe(253)]),"*"),rr(mr,"".concat(yr[Qe(314)]),["PointsMaterial"]),rr(mr,""[Qe(285)](yr[Qe(311)]),"*"),rr(mr,""[Qe(285)](yr[Qe(228)]),"*"),rr(mr,"".concat(yr[Qe(262)]),[Qe(307),"MeshPhysicalMaterial"]),rr(mr,""[Qe(285)](yr[Qe(131)]),[Qe(307),Qe(304)]),rr(mr,"".concat(yr.metalness),["MeshStandardMaterial",Qe(304)]),rr(mr,""[Qe(285)](yr.ao),[Qe(307),Qe(304),Qe(287),Qe(136),Qe(320),Qe(289)]),rr(mr,"".concat(yr.bump),[Qe(136),Qe(153),Qe(211),Qe(320),Qe(304),Qe(307),Qe(289),"ShadowMaterial"]),rr(mr,""[Qe(285)](yr[Qe(174)]),["MeshDepthMaterial"]),rr(mr,""[Qe(285)](yr[Qe(137)]),[Qe(304)]),rr(mr,""[Qe(285)](yr[Qe(261)]),[Qe(304)]),rr(mr,""[Qe(285)](yr[Qe(303)]),[Qe(304)]),mr),Ir={"#include <lights_physical_fragment>":D[Qe(201)]},br=(rr(gr={},""[Qe(285)](yr.normal),{"#include <beginnormal_vertex>":Qe(237)[Qe(285)](yr[Qe(253)],Qe(214))}),rr(gr,"".concat(yr[Qe(194)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[Qe(285)](yr[Qe(194)],";\n  ")}),rr(gr,""[Qe(285)](yr.positionRaw),{"#include <begin_vertex>":Qe(227).concat(yr.positionRaw,Qe(191))}),rr(gr,""[Qe(285)](yr[Qe(314)]),{"gl_PointSize = size;":Qe(263).concat(yr[Qe(314)],Qe(169))}),rr(gr,""[Qe(285)](yr.diffuse),{"#include <color_fragment>":Qe(160)[Qe(285)](yr[Qe(311)],Qe(203))}),rr(gr,"".concat(yr[Qe(228)]),{"#include <dithering_fragment>":Qe(181).concat(yr[Qe(228)],";\n  ")}),rr(gr,"".concat(yr[Qe(262)]),{"vec3 totalEmissiveRadiance = emissive;":Qe(242)[Qe(285)](yr.emissive,Qe(169))}),rr(gr,""[Qe(285)](yr[Qe(131)]),{"#include <roughnessmap_fragment>":Qe(200)[Qe(285)](yr.roughness,Qe(169))}),rr(gr,"".concat(yr.metalness),{"#include <metalnessmap_fragment>":Qe(144)[Qe(285)](yr[Qe(233)],Qe(169))}),rr(gr,""[Qe(285)](yr.ao),{"#include <aomap_fragment>":Qe(293)[Qe(285)](yr.ao,Qe(169))}),rr(gr,""[Qe(285)](yr[Qe(269)]),{"#include <normal_fragment_maps>":Qe(140)[Qe(285)](yr.bump," - (dot(")[Qe(285)](yr[Qe(269)],Qe(156))}),rr(gr,"".concat(yr[Qe(174)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Qe(202)[Qe(285)](yr[Qe(174)],Qe(164)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Qe(182).concat(yr.depthAlpha,Qe(169))}),rr(gr,""[Qe(285)](yr[Qe(137)]),{"material.clearcoat = clearcoat;":Qe(238)[Qe(285)](yr.clearcoat,";")}),rr(gr,""[Qe(285)](yr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = ".concat(yr[Qe(261)],";")}),rr(gr,""[Qe(285)](yr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Qe(231)}),gr),wr=(rr(_r={},""[Qe(285)](yr[Qe(194)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Qe(322)[Qe(285)](yr[Qe(194)],", 1.0 );\n  ")}),rr(_r,""[Qe(285)](yr[Qe(257)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Qe(216)[Qe(285)](yr[Qe(194)],";\n  ")}),rr(_r,""[Qe(285)](yr[Qe(311)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Qe(221).concat(yr[Qe(311)],";\n  ")}),rr(_r,""[Qe(285)](yr[Qe(228)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Qe(221)[Qe(285)](yr.fragColor,";\n  ")}),_r),Sr={clearcoat:[yr[Qe(137)],yr[Qe(303)],yr[Qe(261)]]},Mr=Qe(232),Rr=Qe(219),Er=Qe(264),Ar=[Qe(290),Qe(175),Qe(206),Qe(213),Qe(192),Qe(223),Qe(180)],Tr=function(n,t,e){var r=Qe;return n[r(173)](t)[r(207)](e)},Dr=function(n,t){var e,r,o=Qe;return new RegExp("\\b"[o(285)]((e=t,r=Qe,e[r(172)](/[-\/\\^$*+?.()|[\]{}]/g,r(272))),"\\b"))[o(296)](n)};function Pr(n){return n?n[Qe(172)](/\s/g,""):void 0}function zr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Qe;!function(n,t){var e=ir;if(typeof t!==e(277)&&null!==t)throw new TypeError(e(132));n[e(151)]=Object[e(273)](t&&t[e(151)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(162)](n,e(151),{writable:!1}),t&&pr(n,t)}(c,n);var e,r,o,i,a=vr(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(290)],l=n[s(175)],f=n[s(206)],p=n[s(213)],d=n.patchMap,h=n[s(223)],v=n[s(180)],m=cr(n,Ar);if(function(n,t){if(!(n instanceof t))throw new TypeError(ir(217))}(this,c),!function(n){var t=Qe;try{new n}catch(e){if(e[t(170)][t(305)](t(319))>=0)return!1}return!0}(u)?(e=u,Object[s(208)](e,m)):e=new u(m),e[s(177)]===s(147))throw new Error(s(139));(function(n,t){var e=Qe;Object.assign(n,t);var r=Object.getPrototypeOf(t);Object[e(215)](Object[e(298)](r)).filter((function(n){var t=e,r=typeof n[1][t(323)]===t(277),o="function"==typeof n[1][t(143)],i=typeof n[1][t(313)]===t(277),a=n[0]===t(249);return(r||o||i)&&!a}))[e(252)]((function(t){var r=e;typeof n[t[0]]!==r(277)&&Object[r(162)](n,t[0],t[1])}))})(fr(t=a[s(317)](this)),e),t[s(130)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(186)][s(196)](),type:e[s(177)],isAlreadyExtended:(r=e[s(161)],o=Qe,i=r[o(150)]()[o(260)](),!(0===i[o(166)](i[o(305)]("{")+1,i[o(271)]("}")).trim()[o(234)])),cacheHash:"",silent:v},t[s(213)]=ar(ar({},t.uniforms||{}),p||{});var g=t[s(130)],_=g[s(175)],y=g.vertexShader,x=t[s(213)];return t[s(130)][s(142)]=t[s(286)](),t[s(324)](_,y,x),t}return e=c,r=[{key:t(229),value:function(){var n=t,e=arguments[n(234)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(213)]=e.uniforms||this[n(213)],Object[n(208)](this[n(130)],e);var r=this.__csm,o=r[n(175)],i=r[n(206)],a=this[n(213)],c=this[n(286)]();this[n(130)][n(142)]=c,this[n(324)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this.__csm[n(290)],fragmentShader:this[n(130)][n(175)],vertexShader:this[n(130)][n(206)],uniforms:this[n(213)],silent:this[n(130)][n(180)],patchMap:this.__csm[n(192)],cacheKey:this[n(130)][n(223)]},r=new(this[n(249)])(e);return Object[n(208)](this,r),r}},{key:t(286),value:function(){var n=t,e=this[n(130)],r=e[n(175)],o=e.vertexShader,i=this.uniforms,a=[Pr(r),Pr(o),i][n(158)]((function(n){return void 0!==n}));return a[n(234)]>0?An(a,{excludeValues:!0}):this[n(179)]()}},{key:t(324),value:function(n,e,r){var o=t,i=this;this[o(213)]=r||{},this[o(179)]=function(){return i[o(130)].cacheHash};var a=function(t){var r=o;try{var a=i[r(288)]();if(n){var c=i._patchShader(zr(n),t[r(175)],!0);t[r(175)]=a+c}if(e){var s=i[r(243)](zr(e),t[r(206)]);t[r(206)]="#define IS_VERTEX;\n"+s,t[r(206)]=a+t[r(206)]}t[r(213)]=ar(ar({},t.uniforms),i[r(213)]),i[r(213)]=t[r(213)]}catch(u){console.error(u)}};if(this[o(130)].isAlreadyExtended){var c=this[o(161)];this[o(161)]=function(n,t){c(n,t),a(n)}}else this[o(161)]=a;this[o(291)]=!0}},{key:t(243),value:function(n,e,r){var o=t,i=this,a=e,c=ar(ar({},this[o(247)]()),this[o(130)][o(192)]);Object.entries(Sr).forEach((function(t){var e=o,r=ur(t,2),a=r[0],c=r[1][e(306)]((function(t){return Dr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'.concat(a,e(167))[e(285)](c,'". Shader cannot compile.'))})),Object[o(215)](Ir)[o(252)]((function(n){var t=ur(n,2),e=t[0],r=t[1];a=Tr(a,e,r)})),Object.keys(c)[o(252)]((function(t){var e=o;Object[e(212)](c[t])[e(252)]((function(r){var o=e,s=xr[t],u=i[o(130)].type;if("*"===t||Dr(n,t)){if(!(!s||Array[o(299)](s)&&s[o(236)](u)||"*"===s))throw new Error(o(254).concat(t,o(281))[o(285)](u,o(149)));a=Tr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(130)][o(205)][o(172)](/-/g,"_"),h=n[o(172)](/void\s+main\s*\(\s*\)/g,o(224)[o(285)](d,"()")),v=n[o(236)](o(220)),m=a.includes(o(279));return v&&(m&&this.__csm.isAlreadyExtended?(a=a.replace(o(188),o(163)[o(285)](h,o(141))),s=a,u=o(279),l=o(163)[o(285)](d,o(240)),p=s[(f=Qe)(271)](u),a=-1===p?s:s[f(166)](0,p)+l+s[f(166)](p+u[f(234)])):a=a[o(172)]("void main() {","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(285)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Rr,o(295))[o(285)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(255))[o(285)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(285)](Mr,o(226)).concat(r?"\n    \n":Er,o(235))[o(285)](d,o(270)))),a}},{key:t(288),value:function(){var n=t,e=this[n(130)][n(177)];return e?n(309).concat(e[n(250)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(247),value:function(){var n=t;return this.__csm[n(177)]===n(176)?wr:br}}],i=ir,r&&lr(e.prototype,r),o&&lr(e,o),Object[i(162)](e,i(151),{writable:!1}),c}(T[Qe(278)]);function Or(n){function t(n){var e=ir;if(typeof n===e(282))return function(n){}.constructor(e(297))[e(218)]("counter");1!==(""+n/n)[e(234)]||n%20==0?function(){return!0}.constructor(e(134)+"gger")[e(317)](e(185)):function(){return!1}[e(249)]("debu"+e(280))[e(218)](e(146)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Br=Nr;function Fr(){const n=['{}.constructor("return this")( )',"log","return (function() ","debu","toString","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","exception","length","index","string","init","clearcoatRoughness","158PUTByf","console","while (true) {}","2981396wkIJCF","object","60HWusWQ","8tHFYvz","395517uIyEFR","trace","test","92007SCjMjK","error","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","1360860osiCsZ","function *\\( *\\)","\n\t\t\t","stateObject","metalness","4bfEjZs","MeshPhysicalMaterial","gger","bind","2280481nFeiao","clearcoat","roughness","apply","12tjHJEQ","color","table","constructor","call","warn","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1758YIfNZp","setStyle","560330izWyQx","info","input","chain","\n      "];return(Fr=function(){return n})()}!function(n,t){const e=Nr,r=Fr();for(;;)try{if(227888===parseInt(e(170))/1+-parseInt(e(163))/2*(parseInt(e(144))/3)+-parseInt(e(181))/4*(-parseInt(e(146))/5)+-parseInt(e(176))/6+-parseInt(e(185))/7*(-parseInt(e(169))/8)+parseInt(e(173))/9*(-parseInt(e(168))/10)+-parseInt(e(166))/11*(parseInt(e(189))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){const n=Nr,t=new RegExp(n(177)),e=new RegExp(n(143),"i"),r=Hr(n(161));t[n(172)](r+n(149))&&e[n(172)](r+n(148))?Hr():r("0")}))()}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nr(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jr(void 0,(function(){const n=Nr,t=function(){const n=Nr;let t;try{t=Function(n(153)+n(151)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(164)]||{},r=[n(152),n(141),n(147),n(174),n(157),n(138),n(171)];for(let o=0;o<r[n(158)];o++){const t=jr[n(139)].prototype.bind(jr),i=r[o],a=e[i]||t;t.__proto__=jr[n(184)](jr),t[n(155)]=a[n(155)][n(184)](a),e[i]=t}}))();const Ur=[Br(167)];function Nr(n,t){const e=Fr();return(Nr=function(n,t){return e[n-=137]})(n,t)}const Lr=rn({__name:Br(159),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Br,e=n,r={baseMaterial:T[t(182)],metalness:e.metalness,roughness:e[t(187)],clearcoat:e[t(186)],clearcoatRoughness:e[t(162)],color:e[t(137)],vertexShader:t(175),fragmentShader:t(178)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(150)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(156)},o=new Cr(r);return dn((()=>{const n=t;o[n(137)][n(145)](e.color),o[n(180)]=e[n(180)],o[n(187)]=e[n(187)],o.clearcoat=e[n(186)],o[n(162)]=e[n(162)]})),(n,t)=>(sn(),un("primitive",{object:en(o)},null,8,Ur))}});function Hr(n){function t(n){const e=Nr;if(typeof n===e(160))return function(n){}[e(139)](e(165)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(154)+e(183))[e(140)](e(142)):function(){return!1}.constructor(e(154)+e(183))[e(188)](e(179)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Wr,r=Vr();;)try{if(491929===parseInt(e(282))/1+-parseInt(e(280))/2+parseInt(e(285))/3+-parseInt(e(272))/4*(parseInt(e(261))/5)+parseInt(e(269))/6+-parseInt(e(267))/7*(parseInt(e(283))/8)+parseInt(e(293))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Wr(274)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zr(this,(function(){var n=Wr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(290),"i"),r=$r(n(271));t[n(266)](r+n(260))&&e[n(266)](r+n(263))?$r():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Wr(274)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vr(){var n=["constructor","apply","toString","prototype","gger","counter","console","1675920EljTRk","action","913864BJLEaP","56GxfbAm","call","684768ZSxPMY","warn","trace","exception","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","bind","4565475xYyIUO","chain","1674385OqWYuw","table","input","string","error","test","183449NYCJGm","__proto__","1192920zoxkiE","info","init","4bzVHIQ"];return(Vr=function(){return n})()}function Wr(n,t){var e=Vr();return(Wr=function(n,t){return e[n-=260]})(n,t)}function $r(n){function t(n){var e=Wr;if(typeof n===e(264))return function(n){}[e(273)]("while (true) {}")[e(274)](e(278));1!==(""+n/n).length||n%20==0?function(){return!0}[e(273)](e(289)+e(277))[e(284)](e(281)):function(){return!1}.constructor(e(289)+e(277))[e(274)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){var n,t=Wr;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(279)]=n[t(279)]||{},r=[t(291),t(286),t(270),t(265),t(288),t(262),t(287)],o=0;o<r.length;o++){var i=Gr[t(273)][t(276)][t(292)](Gr),a=r[o],c=e[a]||i;i[t(268)]=Gr[t(292)](Gr),i.toString=c[t(275)].bind(c),e[a]=i}}))();export{Ke as C,Lr as _,et as a,dt as b,Et as c,Ot as d,Zt as e,ee as f,Ve as g,ze as h,yt as u};

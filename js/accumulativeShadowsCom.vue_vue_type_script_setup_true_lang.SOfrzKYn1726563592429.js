import{_ as t,b1 as e,h as n}from"./three.ZWd_rX7H1726563592429.js";import{p as a}from"./@tresjs.Mu0zjs701726563592429.js";import{d as o,P as r}from"./@pmndrs.iDhXA4D61726563592429.js";import{d as s,b as i,w as c,a3 as l,o as u,E as p,L as f,aj as h,ak as d}from"./@vue.bvMz0l_u1726563592429.js";function m(){const t=["acos","blend","counter","apply","height","bias","gger","cos","clear","debu","constructor","MathUtils","info","material","color","string","172728AIZMrt","Vector3","finish","shadows render start","mapSize","top","prepare","left","configure","table","test","2487110mYltpq","input","TresSoftShadowMaterial","1417071Nhfyje","139583wanlEH","randFloatSpread","call","49500IQhnVq","333yNqIZE","exception","prototype","value","7ppFFRA","sin","trace","size","right","stateObject","gPlane","lightPosition","39952xJWVzM","shadow","abs","blendWindow",'{}.constructor("return this")( )',"near","shadows render end","TresPlaneGeometry","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","random","position","rotate-x","console","function *\\( *\\)","alphaTest","camera","error","init","set","ambient","warn","4WgTgev","__proto__","chain","far","amount","add","length","update","progressiveLightMap2","log","accumulativeShadowsCom","3224780vPRLbx","texture","bind","opacity","children","castShadow","frames","intensity","remove","Group","radius"];return(m=function(){return t})()}const g=I;!function(t,e){const n=I,a=m();for(;;)try{if(256256===parseInt(n(262))/1+-parseInt(n(265))/2+-parseInt(n(261))/3*(-parseInt(n(300))/4)+-parseInt(n(349))/5+-parseInt(n(338))/6*(-parseInt(n(270))/7)+parseInt(n(278))/8*(-parseInt(n(266))/9)+parseInt(n(311))/10)break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const b=function(){let t=!0;return function(e,n){const a=t?function(){if(n){const t=n[I(325)](e,arguments);return n=null,t}}:function(){};return t=!1,a}}();!function(){b(this,(function(){const t=I,e=new RegExp(t(292)),n=new RegExp(t(287),"i"),a=z(t(296));e.test(a+t(302))&&n[t(348)](a+t(350))?z():a("0")}))()}();const w=function(){let t=!0;return function(e,n){const a=t?function(){if(n){const t=n[I(325)](e,arguments);return n=null,t}}:function(){};return t=!1,a}}();w(void 0,(function(){const t=I;let e;try{e=Function("return (function() "+t(282)+");")()}catch(o){e=window}const n=e[t(291)]=e.console||{},a=[t(309),t(299),t(334),t(295),t(267),t(347),t(272)];for(let r=0;r<a[t(306)];r++){const e=w[t(332)][t(268)][t(313)](w),o=a[r],s=n[o]||e;e[t(301)]=w[t(313)](w),e[t(286)]=s[t(286)][t(313)](s),n[o]=e}}))();const y=[g(290)],M=f(g(285),{args:[1,1]},null,-1);function I(t,e){const n=m();return(I=function(t,e){return n[t-=261]})(t,e)}const x=s({__name:g(310),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const m=g,b=s;let w=i();const{extend:I,scene:x,renderer:z,camera:v}=a();I({SoftShadowMaterial:o});const P={position:(new(t[m(339)]))[m(297)](b.lightPosition.x,b[m(277)].y,b[m(277)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},S=new r(z[m(269)],x.value,P.mapSize),_={map:S[m(308)][m(312)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:b[m(323)],alphaTest:b[m(293)],opacity:b.opacity,color:b[m(336)]},j=new(t[m(320)]);for(let t=0;t<P[m(304)];t++){const t=new e(16777215,P[m(318)]/P.amount);t[m(316)]=!0,t[m(279)].bias=P[m(327)],t[m(279)][m(294)][m(283)]=P.near,t[m(279)].camera.far=P[m(303)],t[m(279)][m(294)][m(274)]=P.size/2,t[m(279)].camera[m(345)]=-P[m(273)]/2,t[m(279)][m(294)][m(343)]=P.size/2,t[m(279)].camera.bottom=-P[m(273)]/2,t[m(279)][m(342)].width=P[m(342)],t[m(279)][m(342)][m(326)]=P[m(342)],j[m(305)](t)}const T=()=>{const e=m,a=P[e(289)].length();for(let o=0;o<j[e(315)].length;o++){const r=j[e(315)][o];if(Math.random()>b.ambient)r[e(289)][e(297)](P[e(289)].x+n[e(263)](P.radius),P[e(289)].y+t[e(333)][e(263)](P[e(321)]),P[e(289)].z+t[e(333)][e(263)](P[e(321)]));else{let t=Math[e(322)](2*Math[e(288)]()-1)-Math.PI/2,n=2*Math.PI*Math[e(288)]();r[e(289)][e(297)](Math[e(329)](t)*Math[e(329)](n)*a,Math[e(280)](Math.cos(t)*Math[e(271)](n)*a),Math[e(271)](t)*a)}}},E=(t=1)=>{const e=m;x[e(269)].add(j),S[e(344)]();for(let n=0;n<t;n++)T(),S[e(307)](v[e(269)],b[e(281)]),console.log("shadows plm update",n);x[e(269)][e(319)](j),S[e(340)]()};c((()=>w[m(269)]),(t=>{const e=m;t&&(S[e(346)](t),S[e(330)](),console[e(309)](e(341)),E(b[e(317)]),console.log(e(284)))}));const W=()=>{S[m(330)](),E(b.frames)};return l((()=>{const t=m;w[t(269)]&&(b.opacity&&(w.value[t(335)][t(314)]=b.opacity),b.alphaTest&&(w[t(269)].material[t(293)]=b[t(293)]),b[t(336)]&&w.value[t(335)][t(336)].set(b.color),b[t(323)]&&(w[t(269)][t(335)].blend=b.blend))})),c((()=>b[m(277)]),(t=>{const e=m;t&&(console.log(b[e(277)]),P.position.set(t.x,t.y,t.z),W())}),{deep:!0}),c((()=>[b[m(317)],b[m(281)],b[m(298)]]),(()=>{W()})),(t,e)=>{const n=m;return u(),p("TresMesh",{"receive-shadow":"",ref_key:n(276),ref:w,scale:10,"rotate-x":-Math.PI/2},[M,f(n(351),h(d(_)),null,16)],8,y)}}});function z(t){function e(t){const n=I;if(typeof t===n(337))return function(t){}[n(332)]("while (true) {}").apply(n(324));1!==(""+t/t)[n(306)]||t%20==0?function(){return!0}[n(332)]("debugger")[n(264)]("action"):function(){return!1}[n(332)](n(331)+n(328))[n(325)](n(275)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{x as _};

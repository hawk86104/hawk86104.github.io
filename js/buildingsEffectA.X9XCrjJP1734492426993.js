import{P as t}from"./tweakpane.yHWGBmom1734492426993.js";import{b as n,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.aZYcMjV11734492426993.js";import{e}from"./@tresjs.WiFlZbqU1734492426993.js";import{z as r}from"./three-custom-shader-material.5sc6Ku_Y1734492426993.js";import{$ as i,_ as u,C as c,ck as a,m as s,a$ as l}from"./three.-W-Avfc61734492426993.js";import{d as f,a3 as d,w as p,o as m,D as v,u as g,a6 as h,r as y,f as w,g as C,j as _,m as b}from"./@vue.-THQH3GC1734492426993.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1734492426993.js";import"./@vueuse.HnQgsJ961734492426993.js";const x=O;!function(t,n){const o=O,e=j();for(;;)try{if(667971===-parseInt(o(342))/1*(-parseInt(o(337))/2)+-parseInt(o(324))/3+parseInt(o(352))/4*(-parseInt(o(309))/5)+parseInt(o(325))/6+-parseInt(o(299))/7+parseInt(o(328))/8+parseInt(o(320))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[O(298)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){I(this,(function(){const t=O,n=new RegExp(t(336)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=P("init");n[t(350)](e+"chain")&&o[t(350)](e+"input")?P():e("0")}))()}();const M=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[O(298)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();M(void 0,(function(){const t=O,n=function(){const t=O;let n;try{n=Function(t(330)+t(329)+");")()}catch(o){n=window}return n}(),o=n[t(311)]=n[t(311)]||{},e=[t(300),"warn",t(332),t(292),t(313),t(319),t(310)];for(let r=0;r<e[t(318)];r++){const n=M[t(339)].prototype[t(317)](M),i=e[r],u=o[i]||n;n[t(331)]=M.bind(M),n[t(312)]=u[t(312)][t(317)](u),o[i]=n}}))();const S=[x(323)];function j(){const t=["dispose","setStyle","city","#112233","topColor","apply","6047342ePorbl","log","uColor","value","Color","land","while (true) {}","stateObject","material","uTime","92065SokEOv","trace","console","toString","exception","model","gger","bModel","bind","length","table","7454682OLqRCq","DoubleSide","opacity","object","2446626fIHiRY","5496186kNQtqZ","bulidingsColor","__csm","7395784jVMdhw",'{}.constructor("return this")( )',"return (function() ","__proto__","info","landColor","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","children","function *\\( *\\)","41570DznHnM","gradient","constructor","side","string","12svoKmq","computeBoundingSphere","uniforms","#ffffff","#ffff00","color","debu","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","test","uGradient","124QXjHZH","uOpacity","error"];return(j=function(){return t})()}const T=f({__name:x(316),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:x(296)},topColor:{default:x(346)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=x,o=t,a=o[n(314)][n(295)];o[n(314)].model[n(335)][0][n(307)]=new i({color:n(346)}),a.renderOrder=1001;const s=o[n(314)][n(304)];(()=>{const t=n,{geometry:e}=a;e.computeBoundingBox(),e[t(343)]();const{max:i,min:s}=e.boundingBox;if(a[t(307)][t(327)])return;const l=new r({baseMaterial:a[t(307)],vertexShader:t(334),fragmentShader:t(349),silent:!0,uniforms:{uMax:{value:i},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(u[t(303)])(o[t(326)])},uOpacity:{value:o[t(322)]},uLightColor:{value:new c(t(345))},uTopColor:{value:new(u[t(303)])(o[t(297)])},uTime:{value:0},uGradient:{value:o.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:u[t(321)]});a[t(307)][t(293)](),a[t(307)]=l})();const{onLoop:l}=e();l((({delta:t})=>{const o=n;a[o(307)].uniforms[o(308)][o(302)]+=t})),d((()=>{const t=n;o[t(326)]&&a[t(307)][t(344)][t(301)][t(302)].setStyle(o[t(326)]),o.landColor&&((t,e)=>{const r=n;let i;"cu"===t||"land"===t&&(i=Array.isArray(s[r(307)])?s[r(307)]:[s[r(307)]],i.forEach((t=>{const n=r;t[e][n(294)](o[n(333)]),t[n(340)]=u[n(321)]})))})(t(304),t(347)),o[t(322)]&&(a[t(307)][t(344)][t(353)].value=o.opacity)})),p(o,((t,o)=>{const e=n;a.material.uniforms[e(351)][e(302)]=t[e(338)]}));const f=o[n(314)][n(314)].clone();return(t,n)=>(m(),v("primitive",{object:g(f)},null,8,S))}});function O(t,n){const o=j();return(O=function(t,n){return o[t-=292]})(t,n)}function P(t){function n(t){const o=O;if(typeof t===o(341))return function(t){}[o(339)](o(305))[o(298)]("counter");1!==(""+t/t)[o(318)]||t%20==0?function(){return!0}[o(339)]("debugger").call("action"):function(){return!1}[o(339)](o(348)+o(315))[o(298)](o(306)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const R=B;!function(t,n){const o=B,e=G();for(;;)try{if(800757===-parseInt(o(193))/1+parseInt(o(185))/2+parseInt(o(196))/3+parseInt(o(183))/4*(-parseInt(o(164))/5)+-parseInt(o(202))/6*(-parseInt(o(200))/7)+parseInt(o(167))/8*(parseInt(o(216))/9)+parseInt(o(186))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[B(187)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Z(this,(function(){const t=B,n=new RegExp(t(205)),o=new RegExp(t(210),"i"),e=E(t(215));n[t(214)](e+t(177))&&o[t(214)](e+t(168))?E():e("0")}))()}();const A=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[B(187)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function B(t,n){const o=G();return(B=function(t,n){return o[t-=163]})(t,n)}A(void 0,(function(){const t=B,n=function(){const t=B;let n;try{n=Function("return (function() "+t(191)+");")()}catch(o){n=window}return n}(),o=n[t(171)]=n.console||{},e=[t(180),"warn",t(201),t(189),t(195),t(163),t(204)];for(let r=0;r<e[t(169)];r++){const n=A[t(218)].prototype.bind(A),i=e[r],u=o[i]||n;n[t(182)]=A[t(199)](A),n.toString=u[t(206)][t(199)](u),o[i]=n}}))();const F=[R(165)];function G(){const t=["378iQOitK","info","30594TEGqRS","matrix","trace","function *\\( *\\)","toString","clone","#FFF","uGradual","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","speed","action","width","test","init","27jnRjKg","counter","constructor","value","srcColor","uTime","table","3515695ufjwad","object","uSrcColor","3105448aRCVoo","input","length","uniforms","console","scale","builds","material","uColor","renderOrder","chain","linewidth","applyMatrix4","log","color","__proto__","8sJaAZk","gger","381792JMVcYG","10219590hSQbAO","apply","call","error","gradual",'{}.constructor("return this")( )',"uScale","1363381USGCvw","debu","exception","2753016ZSZZji","geometry","#000","bind"];return(G=function(){return t})()}const k=f({__name:"bLine",props:{builds:{},color:{default:R(208)},srcColor:{default:R(198)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=R,o=t;let r=null;const i={transparent:!0,uniforms:{uColor:{value:new c(o.color)},uSrcColor:{value:new c(o.srcColor)},uScale:{value:o[n(172)]},uTime:{value:0},uGradual:{value:o[n(190)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let u=new a(o[n(173)][n(197)])[n(207)]();u=u[n(179)](o.builds[n(203)]);const f=new s(i);r=new l(u,f),r[n(174)][n(178)]=o[n(213)],r[n(176)]=1e3,d((()=>{const t=n;o[t(181)]&&(i[t(170)][t(175)].value=new c(o[t(181)])),o[t(220)]&&(i.uniforms[t(166)].value=new c(o[t(220)])),o[t(172)]&&(i[t(170)][t(192)][t(219)]=o[t(172)]),o[t(190)]&&(i[t(170)][t(209)][t(219)]=o[t(190)])}));const{onLoop:p}=e();return p((({delta:t})=>{const e=n;i[e(170)][e(221)][e(219)]+=t*o[e(211)],i[e(170)][e(221)][e(219)]%=1})),(t,n)=>(m(),v("primitive",{object:g(r)},null,8,F))}});function E(t){function n(t){const o=B;if("string"==typeof t)return function(t){}.constructor("while (true) {}").apply(o(217));1!==(""+t/t)[o(169)]||t%20==0?function(){return!0}[o(218)]("debu"+o(184))[o(188)](o(212)):function(){return!1}.constructor(o(194)+o(184))[o(187)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const z=H;!function(t,n){const o=H,e=D();for(;;)try{if(305456===-parseInt(o(357))/1+-parseInt(o(345))/2+-parseInt(o(327))/3*(-parseInt(o(361))/4)+-parseInt(o(320))/5*(parseInt(o(341))/6)+parseInt(o(324))/7+-parseInt(o(360))/8*(parseInt(o(348))/9)+parseInt(o(321))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const L=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){L(this,(function(){const t=H,n=new RegExp(t(362)),o=new RegExp(t(339),"i"),e=V(t(326));n[t(312)](e+t(316))&&o.test(e+t(328))?V():e("0")}))()}();const q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[H(313)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function H(t,n){const o=D();return(H=function(t,n){return o[t-=311]})(t,n)}q(void 0,(function(){const t=H,n=function(){const t=H;let n;try{n=Function(t(315)+t(323)+");")()}catch(o){n=window}return n}(),o=n.console=n.console||{},e=[t(356),t(352),t(330),t(337),t(343),t(347),"trace"];for(let r=0;r<e[t(349)];r++){const n=q[t(317)][t(351)].bind(q),i=e[r],u=o[i]||n;n.__proto__=q.bind(q),n[t(322)]=u.toString[t(334)](u),o[i]=n}}))();const $=f({__name:z(335),async setup(e){const r=z;let i,u;const c=([i,u]=h((()=>o())),i=await i,u(),i),a=y({color:r(329),srcColor:"#000",scale:2e3,gradual:6.6,speed:.3}),s=new t({title:r(350),expanded:!0});return s[r(311)](a,r(318),{label:"线原颜色"}),s[r(311)](a,r(325),{label:r(338)}),s.addBinding(a,r(359),{label:"速度",min:.1,max:1,step:.1}),s[r(311)](a,r(353),{label:r(332),min:10,max:2e3,step:10}),s.addBinding(a,"gradual",{label:r(354),min:1.1,max:10,step:.1}),(t,o)=>{const e=r;return m(),w(n,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:C((()=>[_(T,{model:g(c),bulidingsColor:e(344),landColor:e(319),topColor:e(314)},null,8,[e(340)]),_(k,b({builds:g(c).city},a),null,16,[e(331)])])),_:1})}}});function D(){const t=["debu","table","9fJJRwo","length","效果参数","prototype","warn","scale","扩散系数","action","log","572683HjsNsg","while (true) {}","speed","4017720Kxsyhj","855364PQiRTZ","function *\\( *\\)","addBinding","test","apply","#999","return (function() ","chain","constructor","srcColor","#112233","965tLEKik","13272580eqgONn","toString",'{}.constructor("return this")( )',"4151105MRoVjj","color","init","3gViIPc","input","#FFF","info","builds","最大扩散","stateObject","bind","buildingsEffectA","gger","error","线扫颜色","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","model","13512kGApkg","call","exception","#000000","638248qWLrZb"];return(D=function(){return t})()}function V(t){function n(t){const o=H;if("string"==typeof t)return function(t){}[o(317)](o(358))[o(313)]("counter");1!==(""+t/t)[o(349)]||t%20==0?function(){return!0}.constructor(o(346)+o(336))[o(342)](o(355)):function(){return!1}[o(317)](o(346)+o(336)).apply(o(333)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{$ as default};

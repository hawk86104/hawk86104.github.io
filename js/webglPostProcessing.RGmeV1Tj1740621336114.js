import{i as t}from"./ice-utils.nBra2nWO1740621336114.js";import{_ as n,m as e}from"./gl-matrix.dcoIu8f11740621336114.js";import{P as o}from"./tweakpane.yDiyAAkA1740621336114.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.NRI7TcgI1740621336114.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function x(){const t=["webgl","STATIC_DRAW",'{}.constructor("return this")( )',"offset_right_top","1386ucAZwE","CLAMP_TO_EDGE","debu","249837RahtEm","enable","length","SRC_ALPHA","uView","addBlade","querySelector","64208cksWps","9658TsJINF","innerHeight","UNSIGNED_BYTE","chain","canvaswebgl","warn","getContext","value","createBuffer","offset_left_top","test","clearColor","COLOR_ATTACHMENT0","49DrSfsj","4124775ogpzVm","webglPostProcessing","console","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","scale","offset_right_bottom","__proto__","translate","color","texImage2D","logo-texture","hidden","是否后处理","COLOR_BUFFER_BIT","addBinding","input","TEXTURE_WRAP_S","clear","change","apply","while (true) {}","3356500ICtvxm","bufferData","getUniformLocation","offset_left_bottom","RGBA","FLOAT","init","TRIANGLES","canvas","texParameteri","height","uniform1f","create","NEAREST","function *\\( *\\)","ARRAY_BUFFER","uModel","TEXTURE_2D","string","TEXTURE_WRAP_T","inline","13520JPbhFt","mat4","none","bind","counter","BYTES_PER_ELEMENT","innerWidth","trace","FRAMEBUFFER","table","1036398SBPiYJ","8GXUxGY","error","prototype","bindFramebuffer","gger","lookAt","width","info","bindTexture","bindBuffer","framebufferTexture2D","enableVertexAttribArray","exception","constructor","1595512yKHnGx","getElementById","ELEMENT_ARRAY_BUFFER","useProgram","createTexture"];return(x=function(){return t})()}const _=E;function E(t,n){const e=x();return(E=function(t,n){return e[t-=468]})(t,n)}!function(t,n){const e=E,o=x();for(;;)try{if(843772===-parseInt(e(502))/1*(-parseInt(e(476))/2)+parseInt(e(524))/3+parseInt(e(490))/4+-parseInt(e(546))/5+-parseInt(e(475))/6*(parseInt(e(523))/7)+parseInt(e(509))/8*(-parseInt(e(499))/9)+parseInt(e(567))/10*(parseInt(e(510))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[E(544)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=E,n=new RegExp(t(560)),e=new RegExp(t(528),"i"),o=R(t(552));n[t(520)](o+t(513))&&e.test(o+t(540))?R():o("0")}))()}();const p=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[E(544)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();p(void 0,(function(){const t=E,n=function(){const t=E;let n;try{n=Function("return (function() "+t(497)+");")()}catch(e){n=window}return n}(),e=n[t(526)]=n.console||{},o=["log",t(515),t(483),t(477),t(488),t(474),t(472)];for(let r=0;r<o[t(504)];r++){const n=p[t(489)][t(478)][t(468)](p),i=o[r],a=e[i]||n;n[t(531)]=p[t(468)](p),n[t(527)]=a[t(527)][t(468)](a),e[i]=n}}))();const g={id:_(514)},T=["src"],A=r({__name:_(525),setup(r){const x=_;let E,d,p,A,R,b,y,v,F,P,h,w,I;const C=1,U=.71,S=.76,B=new o({title:"参数"}),D=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});B[x(507)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(x(543),(t=>{const n=x;G(),d[n(557)](w,t[n(517)])}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);B[x(539)](D,x(536),{label:x(537)}),B[x(539)](D,x(498),{picker:x(566),x:{min:0,max:1},y:{min:0,max:1}}).on(x(543),(t=>{const n=x;L[0]=D.offset_right_top.x,L[1]=D[n(498)].y,G()})),B[x(539)](D,x(530),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(543),(t=>{const n=x;L[5]=D[n(530)].x,L[6]=D[n(530)].y,G()})),B[x(539)](D,"offset_left_bottom",{picker:x(566),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(543),(t=>{const n=x;L[10]=D[n(549)].x,L[11]=D[n(549)].y,G()})),B[x(539)](D,x(519),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(543),(t=>{const n=x;L[15]=D[n(519)].x,L[16]=D[n(519)].y,G()})),a((()=>{M()}));const M=function(){const n=x;E=document[n(508)]("#canvaswebgl"),E.width=window[n(471)],E[n(556)]=window[n(511)],d=E[n(516)](n(495)),d&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=X(e,o),p=t(d,l,m),F=d[n(548)](p,"uProjection"),P=d.getUniformLocation(p,n(506)),h=d[n(548)](p,n(562)),I=Y(document[n(491)](n(535)))}(),G(),d[n(503)](d.BLEND),d.blendFunc(d[n(505)],d.ONE_MINUS_SRC_ALPHA),N())};function N(){const t=x;d[t(479)](d[t(473)],y),d[t(521)](C,U,S,1),d[t(542)](d[t(538)]),function(){const t=x;d[t(493)](p),d[t(485)](d[t(561)],A);const e=n[t(568)][t(558)]();n[t(568)].ortho(e,0,E[t(482)],E[t(556)],0,.1,100),d.uniformMatrix4fv(F,!1,e);const o=n[t(568)].create();n[t(568)][t(481)](o,[0,0,1],[0,0,0],[0,1,0]),d.uniformMatrix4fv(P,!1,o),j(I,600,600),j(I,400,400)}(),d[t(479)](d[t(473)],null),D.hidden&&(d.clear(d[t(538)]),d[t(521)](0,0,1,1),d[t(485)](d.ARRAY_BUFFER,R),d[t(493)](b),d[t(484)](d[t(563)],v)),d.drawElements(d[t(553)],6,d[t(512)],0),requestAnimationFrame(N)}function j(t,o,r){const i=x;let a=n[i(568)][i(558)]();n[i(568)][i(532)](a,a,[o,r,0]),e[i(529)](a,a,[250,250,0]),d.uniformMatrix4fv(h,!1,a),d[i(484)](d.TEXTURE_2D,t),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_BYTE,0)}function G(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);R=X(L,e),b=t(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=d[n(548)](b,"mixParam"),d[n(548)](b,n(533)),function(){const t=x;v=Y(E),y=d.createFramebuffer(),d[t(479)](d.FRAMEBUFFER,y),d[t(486)](d[t(473)],d[t(522)],d.TEXTURE_2D,v,0),d.bindFramebuffer(d[t(473)],null)}()}function Y(t){const n=x,e=d[n(494)]();return d[n(484)](d[n(563)],e),t instanceof HTMLImageElement?d[n(534)](d.TEXTURE_2D,0,d[n(550)],d[n(550)],d[n(512)],t):d[n(534)](d[n(563)],0,d[n(550)],t[n(482)],t[n(556)],0,d[n(550)],d[n(512)],null),d.texParameteri(d[n(563)],d.TEXTURE_MIN_FILTER,d[n(559)]),d.texParameteri(d[n(563)],d.TEXTURE_MAG_FILTER,d[n(559)]),d[n(555)](d[n(563)],d[n(541)],d[n(500)]),d[n(555)](d[n(563)],d[n(565)],d[n(500)]),e}function X(t,n){const e=x,o=d[e(518)]();d[e(485)](d[e(561)],o),d.bufferData(d[e(561)],t,d[e(496)]);const r=3*Float32Array[e(470)]+2*Float32Array.BYTES_PER_ELEMENT;d.vertexAttribPointer(0,3,d[e(551)],!1,r,0),d[e(487)](0),d.vertexAttribPointer(1,2,d[e(551)],!1,r,3*Float32Array[e(470)]),d[e(487)](1);const i=d[e(518)]();return d[e(485)](d.ELEMENT_ARRAY_BUFFER,i),d[e(547)](d[e(492)],n,d[e(496)]),d[e(485)](d[e(561)],null),o}return(t,n)=>{const e=x;return c(),s(e(554),g,[u("img",{id:e(535),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(569)}},null,8,T)])}}});function R(t){function n(t){const e=E;if(typeof t===e(564))return function(t){}[e(489)](e(545))[e(544)](e(469));1!==(""+t/t)[e(504)]||t%20==0?function(){return!0}.constructor(e(501)+"gger").call("action"):function(){return!1}[e(489)](e(501)+e(480))[e(544)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

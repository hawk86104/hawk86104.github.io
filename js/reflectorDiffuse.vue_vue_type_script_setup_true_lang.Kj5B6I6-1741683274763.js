import{c8 as t,a3 as n,C as e,V as r}from"./three.3wvNjL8W1741683274763.js";import{a as o}from"./@tresjs.tqalU7S21741683274763.js";import{R as c}from"./all.three.WECQOlM11741683274763.js";import{d as a,b as i,a3 as s,a2 as u,o as l,H as f,N as p,m,u as h}from"./@vue.NRI7TcgI1741683274763.js";!function(t,n){const e=v,r=y();for(;;)try{if(684973===-parseInt(e(137))/1+parseInt(e(166))/2+parseInt(e(147))/3*(parseInt(e(141))/4)+parseInt(e(145))/5*(parseInt(e(135))/6)+parseInt(e(152))/7+-parseInt(e(150))/8*(parseInt(e(163))/9)+parseInt(e(144))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[v(143)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function v(t,n){const e=y();return(v=function(t,n){return e[t-=128]})(t,n)}!function(){d(this,(function(){const t=v,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(132),"i"),r=x("init");n[t(164)](r+t(151))&&e.test(r+"input")?x():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[v(143)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=v,n=function(){const t=v;let n;try{n=Function(t(140)+t(153)+");")()}catch(e){n=window}return n}(),e=n[t(142)]=n[t(142)]||{},r=[t(131),t(128),"info",t(149),"exception",t(134),"trace"];for(let o=0;o<r[t(159)];o++){const n=g[t(129)].prototype[t(161)](g),c=r[o],a=e[c]||n;n.__proto__=g[t(161)](g),n[t(139)]=a[t(139)][t(161)](a),e[c]=n}}))();function x(t){function n(t){const e=v;if(typeof t===e(138))return function(t){}[e(129)]("while (true) {}").apply(e(133));1!==(""+t/t)[e(159)]||t%20==0?function(){return!0}.constructor("debugger")[e(130)](e(136)):function(){return!1}[e(129)](e(165)+e(162)).apply(e(155)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function y(){const t=["string","toString","return (function() ","15012mJwwmh","console","apply","8095090EATAPW","279155GqrIfG","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","165sWxQXy","vertexShader","error","384KZTaic","chain","615342hIlGWw",'{}.constructor("return this")( )',"fragmentShader","stateObject","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","void main() {","replace","length","#include <project_vertex>","bind","gger","127656ARxKRE","test","debu","1988094KNjYTQ","warn","constructor","call","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","table","12HnKehA","action","843734thcyPG"];return(y=function(){return t})()}function _(t,n){const e=C();return(_=function(t,n){return e[t-=456]})(t,n)}const w=_;!function(t,n){const e=_,r=C();for(;;)try{if(142888===parseInt(e(495))/1*(parseInt(e(499))/2)+parseInt(e(505))/3+-parseInt(e(470))/4*(-parseInt(e(512))/5)+-parseInt(e(500))/6+parseInt(e(480))/7+-parseInt(e(502))/8+-parseInt(e(501))/9*(parseInt(e(465))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=_,n=new RegExp(t(483)),e=new RegExp(t(475),"i"),r=E(t(491));n[t(518)](r+t(482))&&e.test(r+"input")?E():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(){const t=["#444","string","5600qclZhh","showGridHelper","chain","function *\\( *\\)","color","tmsmRef","__proto__","return (function() ","visible","value","reflectMap","init","mirror","while (true) {}","TresGroup","2xWnqTt","mixStrength","trace","bind","117466mcajIL","545340RhvQRy","17397hntWdY","1523728yWGeTr","toString","debu","538905IHWgEr","#ffffff","onBeforeRender","textureMatrixUniform","constructor","exception","repeat","40rooeOf","textureMatrix","object","aoMap","channel","console","test","wrapS","rotation-x","tmRef","prototype","gger","error","TresPlaneGeometry","wrapT","set","attributes","update","warn","130BANRdE","length","tpgRef","TresMesh","uniforms","75736QkczKl","table","reflectorDiffuse","TresMeshStandardMaterial","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","apply"];return(C=function(){return t})()}b(void 0,(function(){const t=_;let n;try{n=Function(t(487)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(517)]=n[t(517)]||{},r=[t(474),t(464),"info",t(458),t(510),t(471),t(497)];for(let c=0;c<r.length;c++){const n=b[t(509)][t(456)][t(498)](b),o=r[c],a=e[o]||n;n[t(486)]=b.bind(b),n[t(503)]=a[t(503)][t(498)](a),e[o]=n}}))();const M=[w(520)],j=[w(514),w(488)],T=a({__name:w(472),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:w(506)}},async setup(a){const d=w;let g,x;const y=a,_=new t(9.5,10),I=i(),b=i(),C=i(),T=new c,E={mirror:{value:y[d(492)]},mixStrength:{value:y[d(496)]}},R=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var S=0;S<3;S++)R[S][d(519)]=n,R[S][d(460)]=n,R[S][d(511)][d(461)](16,16);const z={color:new e(d(478)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},A=t=>{const n=d;t[n(469)][n(490)]=T.renderTargetUniform,t[n(469)][n(513)]=T[n(508)],t[n(469)]=Object.assign(t[n(469)],E),(t=>{const n=v;t[n(148)]=t[n(148)][n(158)](n(157),n(156)),t[n(148)]=t[n(148)][n(158)](n(160),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=v;t[n(154)]=t[n(154)][n(158)](n(157),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(154)]=t[n(154)].replace("#include <emissivemap_fragment>",n(146))})(t)};return u((()=>{const t=d;I.value&&(I[t(489)][t(462)].uv1=I[t(489)][t(462)].uv),C[t(489)]&&(C[t(489)][t(515)][t(516)]=1,C[t(489)].onBeforeCompile=A),b[t(489)]&&(b.value.add(T),b[t(489)][t(507)]=(n,e,r)=>{T[t(463)](n,e,r)}),y[t(484)]&&C.value&&(C[t(489)].color=new e(y[t(484)]))})),(t,n)=>{const e=d;return l(),f(e(494),null,[p(e(468),{ref_key:e(521),ref:b,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(459),{ref_key:e(467),ref:I,args:[10,10]},null,512),p(e(473),m({ref_key:e(485),ref:C},z),null,16)],8,M),p("primitive",{object:h(_),visible:t[e(481)]},null,8,j)])}}});function E(t){function n(t){const e=_;if(typeof t===e(479))return function(t){}[e(509)](e(493))[e(477)]("counter");1!==(""+t/t)[e(466)]||t%20==0?function(){return!0}.constructor(e(504)+e(457))[e(476)]("action"):function(){return!1}[e(509)](e(504)+e(457))[e(477)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as _};

import{_ as t,cl as n,cm as e,cn as o,co as r,C as i,m as u,c0 as c,ak as s,am as a}from"./three.jpi2UCEx1735275234726.js";import{f as l,e as f,U as p}from"./@tresjs.fCqPNEAw1735275234726.js";import{z as d}from"./three-custom-shader-material.6yZB66Qf1735275234726.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1735275234726.js";import{d as m,b as y,a3 as w,w as b,o as I,D as v,u as _,r as C,a6 as x,e as A,f as S,g as R,J as T,j,aj as B,ak as k,F as M,I as O,G as L,m as z}from"./@vue.u2cBPEWn1735275234726.js";function F(t,n){const e=G();return(F=function(t,n){return e[t-=123]})(t,n)}!function(t,n){const e=F,o=G();for(;;)try{if(523807===-parseInt(e(144))/1+-parseInt(e(157))/2*(parseInt(e(162))/3)+parseInt(e(143))/4*(parseInt(e(156))/5)+parseInt(e(146))/6+parseInt(e(134))/7+-parseInt(e(137))/8+parseInt(e(148))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(128)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){H(this,(function(){const t=F,n=new RegExp(t(147)),e=new RegExp(t(149),"i"),o=Z(t(140));n[t(164)](o+t(135))&&e[t(164)](o+t(123))?Z():o("0")}))()}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(128)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function G(){const t=["LANDMASS","test","while (true) {}","input","console","action","__proto__","length","apply","gger","error","log","counter","CITY_UNTRIANGULATED","4508637jekfNX","chain","return (function() ","1345384LmvXSi","table","toString","init","name","info","4niHiuB","759752WNYJMH","trace","135270GVEVgp","function *\\( *\\)","9462438AhHruM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ROADS","traverse","debu","prototype","exception","stateObject","3131665BSoCPA","8078hAtyJO","warn","call","constructor","bind","663HLmNvT"];return(G=function(){return t})()}E(void 0,(function(){const t=F;let n;try{n=Function(t(136)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(124)]=n[t(124)]||{},o=[t(131),t(158),t(142),t(130),t(154),t(138),t(145)];for(let i=0;i<o[t(127)];i++){const n=E[t(160)][t(153)][t(161)](E),r=o[i],u=e[r]||n;n[t(126)]=E[t(161)](E),n.toString=u[t(139)].bind(u),e[r]=n}}))();const W=async()=>{const t=F,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(151)]((n=>{const i=t;n[i(141)]===i(133)&&(e=n),n.name===i(163)&&(o=n),n[i(141)]===i(150)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function Z(t){function n(t){const e=F;if("string"==typeof t)return function(t){}[e(160)](e(165))[e(128)](e(132));1!==(""+t/t)[e(127)]||t%20==0?function(){return!0}.constructor(e(152)+"gger")[e(159)](e(125)):function(){return!1}[e(160)]("debu"+e(129))[e(128)](e(155)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const N=P;function P(t,n){const e=U();return(P=function(t,n){return e[t-=103]})(t,n)}!function(t,n){const e=P,o=U();for(;;)try{if(682905===-parseInt(e(155))/1*(-parseInt(e(170))/2)+parseInt(e(162))/3+-parseInt(e(165))/4*(parseInt(e(115))/5)+parseInt(e(104))/6*(-parseInt(e(123))/7)+parseInt(e(107))/8*(-parseInt(e(134))/9)+parseInt(e(119))/10+parseInt(e(113))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(110)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=P,n=new RegExp(t(122)),e=new RegExp(t(157),"i"),o=J(t(116));n[t(142)](o+t(112))&&e.test(o+t(164))?J():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(110)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=P,n=function(){const t=P;let n;try{n=Function(t(129)+t(136)+");")()}catch(e){n=window}return n}(),e=n[t(103)]=n.console||{},o=[t(105),"warn",t(135),t(160),"exception","table",t(130)];for(let r=0;r<o[t(139)];r++){const n=X.constructor[t(150)][t(145)](X),i=o[r],u=e[i]||n;n[t(169)]=X[t(145)](X),n[t(163)]=u[t(163)].bind(u),e[i]=n}}))();const $=[N(140)];function U(){const t=["info",'{}.constructor("return this")( )',"opacity","uGradient","length","object","action","test","computeBoundingSphere","model","bind","color","#e523ff","bulidingsColor","uColor","prototype","DoubleSide","landColor","#112233","primitive","49133skFYZR","Color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","forEach","__csm","error","dispose","649077CDAruw","toString","input","15684PrOlCO","constructor","topColor","setStyle","__proto__","4PsdkAZ","value","boundingBox","console","6juXaXl","log","gger","56AZbUuV","material","land","apply","computeBoundingBox","chain","18976562LWeCpH","uniforms","365Cnspbl","init","side","buildingsModelCustomShader","6794310qxnzvo","#ffff00","stateObject","function *\\( *\\)","5392429PWgUNI","gradient","counter","uOpacity","while (true) {}","#ffffff","return (function() ","trace","call","clone","debu","1259631FbXmeT"];return(U=function(){return t})()}const V=m({__name:N(118),props:{model:{},bulidingsColor:{default:N(147)},landColor:{default:N(153)},topColor:{default:N(120)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=N,o=n,r=y(0),i=o[e(144)].city;i.renderOrder=1001;const u=o.model[e(109)];(()=>{const n=e,{geometry:u}=i;u[n(111)](),u[n(143)]();const{max:c,min:s}=u[n(172)];if(i[n(108)][n(159)])return;const a=new d({baseMaterial:i.material,vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(156)])(o[n(148)])},uOpacity:{value:o.opacity},uLightColor:{value:new(t[n(156)])(n(128))},uTopColor:{value:new(t[n(156)])(o[n(167)])},uTime:r,uGradient:{value:o[n(124)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(151)]});i[n(108)][n(161)](),i[n(108)]=a})();const{onLoop:c}=f();c((({delta:t})=>{r.value+=t})),w((()=>{const n=e;o[n(148)]&&i[n(108)][n(114)][n(149)][n(171)][n(168)](o[n(148)]),o[n(152)]&&((n,r)=>{const i=e;let c;"cu"===n||n===i(109)&&(c=Array.isArray(u[i(108)])?u.material:[u.material],c[i(158)]((n=>{const e=i;n[r][e(168)](o.landColor),n[e(117)]=t[e(151)]})))})("land",n(146)),o[n(137)]&&(i.material[n(114)][n(126)][n(171)]=o[n(137)])})),b(o,((t,n)=>{const o=e;i[o(108)][o(114)][o(138)].value=t.gradient}));const s=o[e(144)][e(144)][e(132)]();return(t,n)=>{const o=e;return I(),v(o(154),{object:_(s)},null,8,$)}}});function J(t){function n(t){const e=P;if("string"==typeof t)return function(t){}[e(166)](e(127))[e(110)](e(125));1!==(""+t/t).length||t%20==0?function(){return!0}[e(166)]("debu"+e(106))[e(131)](e(141)):function(){return!1}.constructor(e(133)+"gger").apply(e(121)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Y=tt;!function(t,n){const e=tt,o=et();for(;;)try{if(254060===parseInt(e(532))/1*(parseInt(e(508))/2)+-parseInt(e(478))/3*(parseInt(e(495))/4)+parseInt(e(479))/5+parseInt(e(512))/6+parseInt(e(487))/7*(-parseInt(e(504))/8)+parseInt(e(481))/9+parseInt(e(517))/10*(-parseInt(e(475))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(529)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){q(this,(function(){const t=tt,n=new RegExp(t(539)),e=new RegExp(t(492),"i"),o=ot(t(476));n[t(501)](o+t(515))&&e[t(501)](o+t(511))?ot():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(529)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();K(void 0,(function(){const t=tt,n=function(){const t=tt;let n;try{n=Function(t(535)+t(533)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=[t(507),t(525),t(493),t(497),t(538),t(500),t(510)];for(let r=0;r<o.length;r++){const n=K[t(524)][t(526)][t(482)](K),i=o[r],u=e[i]||n;n[t(518)]=K.bind(K),n[t(477)]=u[t(477)][t(482)](u),e[i]=n}}))();const Q=[Y(496)];function tt(t,n){const e=et();return(tt=function(t,n){return e[t-=475]})(t,n)}const nt=m({__name:Y(499),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const c=Y,s=t;let a=null,l=null;if(s[c(537)]===c(520)){const t=new n(s[c(480)][c(519)]);let i=(new e)[c(506)](t),u=new o({color:s.color,linewidth:s.width,opacity:s[c(502)],transparent:!0,depthWrite:!0,depthTest:!0});u[c(509)][c(489)](window.innerWidth,window[c(483)]),a=new r(i,u),a[c(528)](s[c(480)].matrix[c(516)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(s[c(503)])},uOpacity:{value:s.opacity}},vertexShader:c(527),fragmentShader:c(486)};const t=new n(s[c(480)][c(519)]),e=new u(l);a=new LineSegments(t,e),a[c(528)](s[c(480)].matrix.clone()),a.material[c(536)]=s.width,a[c(514)]=1e3}return w((()=>{const t=c;s[t(537)]===t(534)&&(s.color&&(l[t(531)][t(494)][t(530)]=new i(s[t(503)])),s.opacity&&(l[t(531)][t(485)][t(530)]=s[t(502)])),s[t(537)]===t(520)&&(s.color&&(a[t(523)][t(503)]=new i(s.color)),s[t(502)]&&(a.material[t(502)]=s.opacity)),s[t(498)]&&(a[t(523)][t(536)]=s[t(498)])})),(t,n)=>{const e=c;return I(),v(e(490),{object:_(a)},null,8,Q)}}});function et(){const t=["test","opacity","color","17312yfiiam","gger","fromEdgesGeometry","log","246LTbWky","resolution","trace","input","2951100AfldRW","stateObject","renderOrder","chain","clone","150XwJftq","__proto__","geometry","Wireframe","string","debu","material","constructor","warn","prototype","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","applyMatrix4","apply","value","uniforms","637xzHSfp",'{}.constructor("return this")( )',"Shader","return (function() ","linewidth","style","exception","function *\\( *\\)","244244vKsRNU","init","toString","3RQPXmL","2066845MeoWsn","builds","3370590pIbizv","bind","innerHeight","counter","uOpacity"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","1253PtuNeb","length","set","primitive","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","uColor","1534416RtNTJC","object","error","width","buildingsLines","table"];return(et=function(){return t})()}function ot(t){function n(t){const e=tt;if(typeof t===e(521))return function(t){}.constructor("while (true) {}").apply(e(484));1!==(""+t/t)[e(488)]||t%20==0?function(){return!0}[e(524)](e(522)+e(505))[e(491)]("action"):function(){return!1}[e(524)]("debu"+e(505))[e(529)](e(513)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=ct;!function(t,n){const e=ct,o=st();for(;;)try{if(456026===-parseInt(e(221))/1*(-parseInt(e(219))/2)+parseInt(e(237))/3*(-parseInt(e(191))/4)+-parseInt(e(213))/5*(parseInt(e(216))/6)+parseInt(e(236))/7*(-parseInt(e(197))/8)+-parseInt(e(205))/9+-parseInt(e(188))/10*(-parseInt(e(206))/11)+parseInt(e(212))/12*(parseInt(e(187))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(217)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ct,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=pt(t(202));n[t(211)](o+t(198))&&e[t(211)](o+t(223))?pt():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=st();return(ct=function(t,n){return e[t-=184]})(t,n)}function st(){const t=["TresCanvas","info","prototype","266jMfUkp","30DAmoBX","showAxesHelper","showBuildings","pagesShow","trace","169RIxvFP","20IgwGTG","#ffffff","__proto__","341948vpBbZB","stateObject","tcRef","#000000","$slots","city","181560ekbAvu","chain","error","toString",'{}.constructor("return this")( )',"init","perspectiveCameraRef","model","1614960Txdrpg","242066zPBawT","TresAmbientLight","console","return (function() ","TresDirectionalLight","test","1417464BhnMda","16195hvVsDX","call","autoRotate","48dyTzcj","apply","warn","2igwSUx","debu","799060NlyVPG","builds","input","bind","log","showGridHelper","length","counter","disableRender","TresGridHelper","action","constructor"];return(st=function(){return t})()}ut(void 0,(function(){const t=ct,n=function(){const t=ct;let n;try{n=Function(t(209)+t(201)+");")()}catch(e){n=window}return n}(),e=n[t(208)]=n[t(208)]||{},o=[t(225),t(218),t(234),t(199),"exception","table",t(186)];for(let r=0;r<o.length;r++){const n=ut[t(232)][t(235)][t(224)](ut),i=o[r],u=e[i]||n;n[t(190)]=ut[t(224)](ut),n.toString=u[t(200)][t(224)](u),e[i]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=m({__name:rt(185),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(194),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:s,toneMapping:a,disableRender:r[n(229)]}),u=C({autoRotate:r[n(215)],enableDamping:!0});let l=null;r[n(184)]&&([e,o]=x((()=>W())),e=await e,o(),l=e);const f=y(),d=y();return(t,e)=>{const o=n,c=A(o(233));return I(),S(c,z({ref_key:o(193),ref:d},i,{"window-size":""}),{default:R((()=>[T("TresPerspectiveCamera",{ref_key:o(203),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(_(p),B(k(u)),null,16),e[0]||(e[0]=T(o(207),{color:"#ffffff"},null,-1)),e[1]||(e[1]=T(o(210),{position:[100,100,0],intensity:.5,color:o(189)},null,-1)),r[o(184)]&&_(l)?(I(),v(M,{key:0},[j(V,{model:_(l)},null,8,[o(204)]),j(nt,{builds:_(l)[o(196)],color:"#000"},null,8,[o(222)])],64)):O("",!0),L(t[o(195)],"ability"),r[o(238)]?(I(),v("TresAxesHelper",at)):O("",!0),r[o(226)]?(I(),v(o(230),lt)):O("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=ct;if("string"==typeof t)return function(t){}[e(232)]("while (true) {}")[e(217)](e(228));1!==(""+t/t)[e(227)]||t%20==0?function(){return!0}.constructor(e(220)+"gger")[e(214)](e(231)):function(){return!1}[e(232)](e(220)+"gger")[e(217)](e(192)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as _,nt as a,ft as b,W as l};

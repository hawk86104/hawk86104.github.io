import{C as e,ab as n,bS as t,T as r,b0 as a}from"./three.B0XaFSnH1744863032604.js";import{d as i,b as o,a3 as c,w as s,s as f,H as l,o as u,e as d,J as m,u as _}from"./@vue.DK6ok9LJ1744863032604.js";import{h as p}from"./object-hash.BnegGKfT1744863032604.js";const h={key:0,args:[0,1,64]},v={key:1,args:[.5,1,64]},M={key:2},S=["toneMapped","map","side","color"],g=i({__name:"index",props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new e(16777215)}},setup(e){const t=e,r=o();return c((()=>{r.value&&(r.value.color.multiplyScalar(t.intensity),r.value.needsUpdate=!0)})),s((()=>t.color),(e=>{r.value&&(r.value.color.set(e),r.value.color.multiplyScalar(t.intensity),r.value.needsUpdate=!0)})),f((()=>{})),(e,a)=>(u(),l("TresMesh",null,["circle"===t.from?(u(),l("TresRingGeometry",h)):"ring"===t.from?(u(),l("TresRingGeometry",v)):"rect"===t.from?(u(),l("TresPlaneGeometry",M)):(u(),d(t.from,{key:3,args:t})),m("TresMeshBasicMaterial",{ref_key:"material",ref:r,toneMapped:e.toneMapped,map:e.map,side:_(n),color:e.color},null,8,S)]))}});var A=N;!function(){for(var e=N,n=y();;)try{if(536401===parseInt(e(425))/1+-parseInt(e(347))/2+parseInt(e(305))/3*(-parseInt(e(417))/4)+-parseInt(e(429))/5*(parseInt(e(399))/6)+parseInt(e(272))/7*(parseInt(e(331))/8)+parseInt(e(265))/9+parseInt(e(426))/10*(parseInt(e(393))/11))break;n.push(n.shift())}catch(t){n.push(n.shift())}}();var E,I=(E=!0,function(e,n){var t=E?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return E=!1,t});function y(){var e=["\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","emissive","table","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","bump","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","function *\\( *\\)","Derived constructors may only return object or undefined",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","name","onBeforeCompile","instanceID","get","fragmentShader","// #_CSM_#","isAlreadyExtended","CustomShaderMaterial does not support RawShaderMaterial","trace","isArray","split","csm_Normal","roughness","__csm","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","position","defineProperty","getOwnPropertySymbols","generateUUID","csm_ClearcoatRoughness","csm_Position","\n    gl_PointSize = ","638FrMNOb","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","csm_Metalness","csm_main_","getOwnPropertyDescriptors","object","1626tCRwqa","done","prototype","MeshBasicMaterial","Super expression must either be null or a function","forEach","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","csm_Emissive",";\n  ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","void ","metalness",'CSM: Property "',"getOwnPropertyDescriptor","function","exception","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","depthAlpha","1803796hxEZyN","toUpperCase","csm_AO","lights_physical_fragment","Object","_getPatchMapForMaterial",'" is required to use output "',"diffuse","599967kwpfOw","106180IRVbCh","baseMaterial","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","1075LKdCOs","set","action","sham","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "," is not available in ","assign","\n    gl_FragColor = ","\n            ","symbol","void main() {","clearcoatRoughness","return (function() ","info","cacheKey","\n    vec4 csm_internal_positionUnprojected = "," );\n    ","MathUtils","material.clearcoatRoughness = ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","configurable","_getCacheHash","replace","csm_PointSize","toPrimitive","string","return","MeshLambertMaterial","clearcoatNormal","customProgramCacheKey","Cannot call a class as a function","1932498hiwCvN",", 1.0 );\n  ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","PointsMaterial","length","material.clearcoat = ","7357UhzvJy","MeshDepthMaterial","MeshPhysicalMaterial","\n    \n","fragColor"," - (dot(","trim","RawShaderMaterial",'". Shader cannot compile.',"#define IS_VERTEX;\n","_patchShader","lastIndexOf","MeshPhongMaterial","MeshToonMaterial","undefined","\n    #include <color_fragment>\n    diffuseColor = ","while (true) {}",". Shader cannot compile.","valueOf","apply","pointSize","log","clone","entries","keys","_getMaterialDefine",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","csm_FragColor","substring","construct","\n    vec3 transformed = ","create",";\n    ","3HpVNkV","CSM: ","MeshMatcapMaterial","clearcoat","type","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","#define IS_UNKNOWN;\n","\n    vec3 objectNormal = ","includes","\n            \n            void main() {\n          ","filter","cacheHash","debu","propertyIsEnumerable","bind","gger","normal","next","positionRaw","is not a constructor","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","warn","test","\\$&","call","csm_Roughness","1640vyZMhH",'{}.constructor("return this")( )',"silent","toString","join","push","\n    #include <dithering_fragment>\n    gl_FragColor  = ","__proto__","csm_Bump","concat","setPrototypeOf","MeshStandardMaterial","value","csm_Clearcoat","constructor","enumerable","1200746QLgFVz","getPrototypeOf","Map","uniforms","csm_DepthAlpha","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","vertexShader","input","_generateMaterial","message","\n    vec3 totalEmissiveRadiance = ","indexOf","defineProperties","patchMap","\n    varying mat4 csm_internal_vModelViewMatrix;\n"];return(y=function(){return e})()}!function(){I(this,(function(){var e=N,n=new RegExp(e(368)),t=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ce("init");n.test(r+"chain")&&t[e(327)](r+e(354))?ce():r("0")}))()}();var b,R=(b=!0,function(e,n){var t=b?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return b=!1,t});function C(e){var n=N,t=function(e,n){var t=N;if(typeof e!==t(398)||null===e)return e;var r=e[Symbol[t(258)]];if(void 0!==r){var a=r[t(329)](e,n||"default");if(typeof a!==t(398))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,n(259));return typeof t===n(438)?t:String(t)}function T(e,n,t){var r=N;return(n=C(n))in e?Object[r(387)](e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e,n){var t=N,r=Object.keys(e);if(Object[t(388)]){var a=Object[t(388)](e);n&&(a=a.filter((function(n){var r=t;return Object[r(412)](e,n)[r(346)]}))),r[t(336)].apply(r,a)}return r}function w(e){for(var n=N,t=1;t<arguments[n(270)];t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0)[n(404)]((function(n){T(e,n,r[n])})):Object[n(397)]?Object[n(359)](e,Object[n(397)](r)):O(Object(r))[n(404)]((function(t){var a=n;Object.defineProperty(e,t,Object[a(412)](r,t))}))}return e}function D(e,n){var t=N;if(null==e)return{};var r,a,i=function(e,n){var t=N;if(null==e)return{};var r,a,i={},o=Object[t(296)](e);for(a=0;a<o[t(270)];a++)r=o[a],n[t(358)](r)>=0||(i[r]=e[r]);return i}(e,n);if(Object[t(388)]){var o=Object[t(388)](e);for(a=0;a<o[t(270)];a++)r=o[a],n.indexOf(r)>=0||Object[t(401)][t(318)][t(329)](e,r)&&(i[r]=e[r])}return i}function j(e,n){var t=N;(null==n||n>e[t(270)])&&(n=e[t(270)]);for(var r=0,a=new Array(n);r<n;r++)a[r]=e[r];return a}function L(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=N,r=null==e?null:t(286)!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,i,o,c,s=[],f=!0,l=!1;try{if(o=(r=r[t(329)](e))[t(322)],0===n);else for(;!(f=(a=o[t(329)](r))[t(400)])&&(s[t(336)](a[t(343)]),s[t(270)]!==n);f=!0);}catch(u){l=!0,i=u}finally{try{if(!f&&null!=r.return&&(c=r[t(260)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(e,n)||function(e,n){var t=N;if(e){if(typeof e===t(259))return j(e,n);var r=Object[t(401)][t(334)][t(329)](e).slice(8,-1);return r===t(421)&&e[t(345)]&&(r=e[t(345)][t(371)]),r===t(349)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[t(327)](r)?j(e,n):void 0}}(e,n)||function(){throw new TypeError(N(325))}()}function P(e,n,t){var r=N;return n&&function(e,n){for(var t=N,r=0;r<n[t(270)];r++){var a=n[r];a.enumerable=a[t(346)]||!1,a[t(254)]=!0,t(343)in a&&(a.writable=!0),Object.defineProperty(e,C(a.key),a)}}(e[r(401)],n),Object[r(387)](e,r(401),{writable:!1}),e}function N(e,n){var t=y();return N=function(e,n){return t[e-=249]},N(e,n)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,n){var t=N;return(x=Object[t(341)]?Object[t(341)][t(319)]():function(e,n){return e[t(338)]=n,e})(e,n)}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e[N(338)]||Object.getPrototypeOf(e)})(e)}function U(e){var n=function(){var e=N;if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect[e(301)][e(432)])return!1;if(typeof Proxy===e(413))return!0;try{return Boolean.prototype[e(290)][e(329)](Reflect[e(301)](Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=N,a=F(e);if(n){var i=F(this).constructor;t=Reflect[r(301)](a,arguments,i)}else t=a[r(291)](this,arguments);return function(e,n){var t=N;if(n&&(typeof n===t(398)||typeof n===t(413)))return n;if(void 0!==n)throw new TypeError(t(369));return H(e)}(this,t)}}R(void 0,(function(){for(var e=N,n=function(){var e,n=N;try{e=Function(n(441)+n(332)+");")()}catch(t){e=window}return e}(),t=n.console=n.console||{},r=[e(293),e(326),e(442),"error",e(414),e(364),e(379)],a=0;a<r[e(270)];a++){var i=R[e(345)][e(401)].bind(R),o=r[a],c=t[o]||i;i[e(338)]=R.bind(R),i.toString=c.toString[e(319)](c),t[o]=i}}))();var k,z,B,V={diffuse:"csm_DiffuseColor",normal:A(382),roughness:A(330),metalness:A(395),emissive:A(406),ao:A(419),bump:A(339),clearcoat:A(344),clearcoatRoughness:A(390),clearcoatNormal:"csm_ClearcoatNormal",pointSize:A(257),fragColor:A(299),depthAlpha:A(351),position:A(391),positionRaw:"csm_PositionRaw"},G=(T(k={},""[A(340)](V[A(386)]),"*"),T(k,""[A(340)](V.positionRaw),"*"),T(k,"".concat(V.normal),"*"),T(k,""[A(340)](V[A(292)]),[A(269)]),T(k,""[A(340)](V.diffuse),"*"),T(k,""[A(340)](V[A(276)]),"*"),T(k,""[A(340)](V[A(363)]),[A(342),"MeshPhysicalMaterial"]),T(k,""[A(340)](V.roughness),["MeshStandardMaterial",A(274)]),T(k,""[A(340)](V[A(410)]),["MeshStandardMaterial",A(274)]),T(k,""[A(340)](V.ao),[A(342),A(274),A(402),"MeshLambertMaterial",A(284),A(285)]),T(k,"".concat(V[A(366)]),[A(261),A(307),"MeshNormalMaterial",A(284),A(274),A(342),A(285),"ShadowMaterial"]),T(k,""[A(340)](V[A(416)]),[A(273)]),T(k,""[A(340)](V.clearcoat),[A(274)]),T(k,""[A(340)](V[A(440)]),[A(274)]),T(k,""[A(340)](V[A(262)]),[A(274)]),k),K={"#include <lights_physical_fragment>":t[A(420)]},Z=(T(z={},"".concat(V.normal),{"#include <beginnormal_vertex>":A(312).concat(V[A(321)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),T(z,""[A(340)](V.position),{"#include <begin_vertex>":A(302).concat(V[A(386)],A(407))}),T(z,""[A(340)](V[A(323)]),{"#include <begin_vertex>":A(249)[A(340)](V.positionRaw,A(298))}),T(z,""[A(340)](V[A(292)]),{"gl_PointSize = size;":A(392)[A(340)](V[A(292)],A(304))}),T(z,""[A(340)](V[A(424)]),{"#include <color_fragment>":A(287)[A(340)](V[A(424)],A(407))}),T(z,""[A(340)](V[A(276)]),{"#include <dithering_fragment>":A(337)[A(340)](V[A(276)],A(407))}),T(z,""[A(340)](V[A(363)]),{"vec3 totalEmissiveRadiance = emissive;":A(357)[A(340)](V[A(363)],A(304))}),T(z,""[A(340)](V[A(383)]),{"#include <roughnessmap_fragment>":A(267)[A(340)](V[A(383)],A(304))}),T(z,""[A(340)](V.metalness),{"#include <metalnessmap_fragment>":A(365)[A(340)](V[A(410)],A(304))}),T(z,"".concat(V.ao),{"#include <aomap_fragment>":A(268)[A(340)](V.ao,A(304))}),T(z,"".concat(V[A(366)]),{"#include <normal_fragment_maps>":A(310)[A(340)](V[A(366)],A(277))[A(340)](V[A(366)],A(370))}),T(z,""[A(340)](V.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":A(433).concat(V[A(416)],A(250)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":A(385)[A(340)](V[A(416)],";\n    ")}),T(z,""[A(340)](V[A(308)]),{"material.clearcoat = clearcoat;":A(271).concat(V[A(308)],";")}),T(z,""[A(340)](V[A(440)]),{"material.clearcoatRoughness = clearcoatRoughness;":A(252).concat(V[A(440)],";")}),T(z,""[A(340)](V[A(262)]),{"#include <clearcoat_normal_fragment_begin>":A(428)}),z),Y=(T(B={},""[A(340)](V[A(386)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":A(367)[A(340)](V[A(386)],A(266))}),T(B,""[A(340)](V[A(323)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[A(340)](V[A(386)],";\n  ")}),T(B,""[A(340)](V[A(424)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":A(436)[A(340)](V[A(424)],A(407))}),T(B,"".concat(V.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[A(340)](V.fragColor,A(407))}),B),q={clearcoat:[V[A(308)],V[A(262)],V[A(440)]]},W=A(253),$=A(394),X=A(361),Q=A(362),J=A(361),ee=A(275),ne=["baseMaterial","fragmentShader",A(353),"uniforms",A(360),A(443),A(333)],te=function(e,n,t){var r=A;return e[r(381)](n)[r(335)](t)},re=function(e,n){var t,r,a=A;return new RegExp("\\b"[a(340)]((t=n,r=A,t[r(256)](/[-\/\\^$*+?.()|[\]{}]/g,r(328))),"\\b"))[a(327)](e)};function ae(e){return e?e[A(256)](/\s/g,""):void 0}function ie(e){return e[A(256)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var oe=function(){var e=A;!function(e,n){var t=N;if(typeof n!==t(413)&&null!==n)throw new TypeError(t(403));e[t(401)]=Object[t(303)](n&&n[t(401)],{constructor:{value:e,writable:!0,configurable:!0}}),Object[t(387)](e,t(401),{writable:!1}),n&&x(e,n)}(t,a);var n=U(t);function t(e){var a,i,o,c,s,f=N,l=e[f(427)],u=e[f(375)],d=e[f(353)],m=e[f(350)],_=e.patchMap,p=e[f(443)],h=e[f(333)],v=D(e,ne);if(function(e,n){if(!(e instanceof n))throw new TypeError(N(264))}(this,t),!function(e){var n=A;try{new e}catch(t){if(t[n(356)][n(358)](n(324))>=0)return!1}return!0}(l)?(i=l,Object[f(435)](i,v)):i=new l(v),i[f(309)]===f(279))throw new Error(f(378));(function(e,n){var t=A;t(270),Object.assign(e,n);var r=Object[t(348)](n);Object[t(295)](Object[t(397)](r))[t(315)]((function(e){var n=t,r="function"==typeof e[1][n(374)],a=typeof e[1][n(430)]===n(413),i=typeof e[1][n(343)]===n(413),o=e[0]===n(345);return(r||a||i)&&!o}))[t(404)]((function(n){var r=t;typeof e[n[0]]!==r(413)&&Object[r(387)](e,n[0],n[1])}))})(H(a=n[f(329)](this)),i),a.__csm={patchMap:_||{},fragmentShader:u||"",vertexShader:d||"",cacheKey:p,baseMaterial:l,instanceID:r[f(251)][f(389)](),type:i[f(309)],isAlreadyExtended:(o=i.onBeforeCompile,c=A,s=o[c(334)]().trim(),!(0===s.substring(s[c(358)]("{")+1,s[c(283)]("}"))[c(278)]()[c(270)])),cacheHash:"",silent:h},a[f(350)]=w(w({},a[f(350)]||{}),m||{});var M=a[f(384)],S=M.fragmentShader,g=M[f(353)],E=a[f(350)];return a[f(384)][f(316)]=a[f(255)](),a[f(355)](S,g,E),a}return P(t,[{key:"update",value:function(){var e=N,n=arguments[e(270)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=n[e(350)]||this[e(350)],Object.assign(this[e(384)],n);var t=this[e(384)],r=t[e(375)],a=t[e(353)],i=this[e(350)],o=this[e(255)]();this[e(384)][e(316)]=o,this[e(355)](r,a,i)}},{key:e(294),value:function(){var n=e,t={baseMaterial:this.__csm[n(427)],fragmentShader:this.__csm.fragmentShader,vertexShader:this[n(384)][n(353)],uniforms:this[n(350)],silent:this[n(384)][n(333)],patchMap:this[n(384)][n(360)],cacheKey:this[n(384)].cacheKey},r=new this.constructor(t);return Object[n(435)](this,r),r}},{key:e(255),value:function(){var n=e,t=this[n(384)],r=t[n(375)],a=t[n(353)],i=this[n(350)],o=[ae(r),ae(a),i][n(315)]((function(e){return void 0!==e}));return o.length>0?p(o,{excludeValues:!0}):this.customProgramCacheKey()}},{key:e(355),value:function(n,t,r){var a=e,i=this;this.uniforms=r||{},this[a(263)]=function(){return i[a(384)].cacheHash};var o=function(e){var r=a;try{var o=i[r(297)]();if(n){var c=i[r(282)](ie(n),e[r(375)],!0);e[r(375)]=o+c}if(t){var s=i[r(282)](ie(t),e[r(353)]);e.vertexShader=r(281)+s,e[r(353)]=o+e[r(353)]}e[r(350)]=w(w({},e.uniforms),i[r(350)]),i[r(350)]=e[r(350)]}catch(f){console.error(f)}};if(this[a(384)].isAlreadyExtended){var c=this[a(372)];this[a(372)]=function(e,n){c(e,n),o(e)}}else this.onBeforeCompile=o;this.needsUpdate=!0}},{key:e(282),value:function(n,t,r){var a=e,i=this,o=t,c=w(w({},this[a(422)]()),this[a(384)].patchMap);Object[a(295)](q)[a(404)]((function(e){var t=a,r=L(e,2),o=r[0],c=r[1].find((function(e){return re(n,e)}));if(c&&!i[o])throw new Error(t(411)[t(340)](o,t(423))[t(340)](c,t(280)))})),Object[a(295)](K).forEach((function(e){var n=L(e,2),t=n[0],r=n[1];o=te(o,t,r)})),Object.keys(c).forEach((function(e){Object.keys(c[e]).forEach((function(t){var r=N,a=G[e],s=i[r(384)][r(309)];if("*"===e||re(n,e)){if(!(!a||Array[r(380)](a)&&a.includes(s)||"*"===a))throw new Error(r(306).concat(e,r(434))[r(340)](s,r(289)));o=te(o,t,c[e][t])}}))}));var s,f,l,u,d,m=a(396)+this[a(384)][a(373)][a(256)](/-/g,"_"),_=n[a(256)](/void\s+main\s*\(\s*\)/g,a(409)[a(340)](m,"()")),p=n[a(313)]("void main()"),h=o[a(313)](a(376));return p&&(h&&this[a(384)][a(377)]?(o=o[a(256)](a(439),a(437)[a(340)](_,a(314))),s=o,f=a(376),l=a(437).concat(m,"();\n            // #_CSM_#\n          "),d=s[(u=A)(283)](f),o=-1===d?s:s[u(300)](0,d)+l+s[u(300)](d+f[u(270)])):o=o.replace(a(439),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?J:X,a(408))[a(340)](W,"\n    \n            ")[a(340)](_,a(352)).concat($,a(415))[a(340)](r?ee:Q,a(405))[a(340)](m,"();\n              // #_CSM_#\n          "))),o}},{key:e(297),value:function(){var n=e,t=this[n(384)][n(309)];return t?"#define IS_"[n(340)](t[n(418)](),";\n"):n(311)}},{key:"_getPatchMapForMaterial",value:function(){return"ShaderMaterial"===this[e(384)].type?Y:Z}}]),t}();function ce(e){function n(e){var t=N;if(typeof e===t(259))return function(e){}[t(345)](t(288))[t(291)]("counter");1!==(""+e/e)[t(270)]||e%20==0?function(){return!0}[t(345)](t(317)+t(320))[t(329)](t(431)):function(){return!1}[t(345)]("debu"+t(320))[t(291)]("stateObject"),n(++e)}try{if(e)return n;n(0)}catch(t){}}!function(){for(var e=me,n=le();;)try{if(808909===parseInt(e(220))/1+parseInt(e(230))/2*(-parseInt(e(212))/3)+-parseInt(e(226))/4*(parseInt(e(239))/5)+parseInt(e(233))/6*(parseInt(e(206))/7)+-parseInt(e(235))/8+parseInt(e(217))/9+parseInt(e(209))/10)break;n.push(n.shift())}catch(t){n.push(n.shift())}}();var se,fe=(se=!0,function(e,n){var t=se?function(){if(n){var t=n[me(229)](e,arguments);return n=null,t}}:function(){};return se=!1,t});function le(){var e=["68SpqbGR","length","bind","apply","2838FiNYrM","toString","input","1080612QHEyvD","return (function() ","12451992bWbFpL","gger","__proto__","init","92355qVnsSg","stateObject","console","trace","14UsChhQ","table","constructor","6347910KiUhUo","prototype","debu","282VVHMnT","while (true) {}","test","call","chain","5040018qTiRCz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","1257804qmaltn","action","error","string",'{}.constructor("return this")( )',"info"];return(le=function(){return e})()}!function(){fe(this,(function(){var e=me,n=new RegExp("function *\\( *\\)"),t=new RegExp(e(218),"i"),r=_e(e(238));n[e(214)](r+e(216))&&t[e(214)](r+e(232))?_e():r("0")}))()}();var ue,de=(ue=!0,function(e,n){var t=ue?function(){if(n){var t=n[me(229)](e,arguments);return n=null,t}}:function(){};return ue=!1,t});function me(e,n){var t=le();return me=function(e,n){return t[e-=206]},me(e,n)}function _e(e){function n(e){var t=me;if(typeof e===t(223))return function(e){}.constructor(t(213)).apply(t(219));1!==(""+e/e)[t(227)]||e%20==0?function(){return!0}[t(208)](t(211)+"gger")[t(215)](t(221)):function(){return!1}[t(208)](t(211)+t(236)).apply(t(240)),n(++e)}try{if(e)return n;n(0)}catch(t){}}de(void 0,(function(){for(var e=me,n=function(){var e,n=me;try{e=Function(n(234)+n(224)+");")()}catch(t){e=window}return e}(),t=n[e(241)]=n[e(241)]||{},r=["log","warn",e(225),e(222),"exception",e(207),e(242)],a=0;a<r[e(227)];a++){var i=de[e(208)][e(210)][e(228)](de),o=r[a],c=t[o]||i;i[e(237)]=de.bind(de),i[e(231)]=c[e(231)][e(228)](c),t[o]=i}}))();export{oe as C,g as _};

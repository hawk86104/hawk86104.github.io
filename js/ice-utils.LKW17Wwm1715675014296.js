var O=1e-6,D=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function $(){var r=new D(16);return D!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function b(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function q(r,e,h){var a=e[0],i=e[1],n=e[2],s=e[3],f=e[4],p=e[5],m=e[6],d=e[7],M=e[8],P=e[9],c=e[10],A=e[11],z=e[12],g=e[13],x=e[14],T=e[15],l=h[0],v=h[1],y=h[2],S=h[3];return r[0]=l*a+v*f+y*M+S*z,r[1]=l*i+v*p+y*P+S*g,r[2]=l*n+v*m+y*c+S*x,r[3]=l*s+v*d+y*A+S*T,l=h[4],v=h[5],y=h[6],S=h[7],r[4]=l*a+v*f+y*M+S*z,r[5]=l*i+v*p+y*P+S*g,r[6]=l*n+v*m+y*c+S*x,r[7]=l*s+v*d+y*A+S*T,l=h[8],v=h[9],y=h[10],S=h[11],r[8]=l*a+v*f+y*M+S*z,r[9]=l*i+v*p+y*P+S*g,r[10]=l*n+v*m+y*c+S*x,r[11]=l*s+v*d+y*A+S*T,l=h[12],v=h[13],y=h[14],S=h[15],r[12]=l*a+v*f+y*M+S*z,r[13]=l*i+v*p+y*P+S*g,r[14]=l*n+v*m+y*c+S*x,r[15]=l*s+v*d+y*A+S*T,r}function G(r,e,h){var a=h[0],i=h[1],n=h[2],s,f,p,m,d,M,P,c,A,z,g,x;return e===r?(r[12]=e[0]*a+e[4]*i+e[8]*n+e[12],r[13]=e[1]*a+e[5]*i+e[9]*n+e[13],r[14]=e[2]*a+e[6]*i+e[10]*n+e[14],r[15]=e[3]*a+e[7]*i+e[11]*n+e[15]):(s=e[0],f=e[1],p=e[2],m=e[3],d=e[4],M=e[5],P=e[6],c=e[7],A=e[8],z=e[9],g=e[10],x=e[11],r[0]=s,r[1]=f,r[2]=p,r[3]=m,r[4]=d,r[5]=M,r[6]=P,r[7]=c,r[8]=A,r[9]=z,r[10]=g,r[11]=x,r[12]=s*a+d*i+A*n+e[12],r[13]=f*a+M*i+z*n+e[13],r[14]=p*a+P*i+g*n+e[14],r[15]=m*a+c*i+x*n+e[15]),r}function K(r,e,h){var a=h[0],i=h[1],n=h[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function V(r,e,h,a){var i=a[0],n=a[1],s=a[2],f=Math.hypot(i,n,s),p,m,d,M,P,c,A,z,g,x,T,l,v,y,S,E,I,R,F,k,w,L,N,_;return f<O?null:(f=1/f,i*=f,n*=f,s*=f,p=Math.sin(h),m=Math.cos(h),d=1-m,M=e[0],P=e[1],c=e[2],A=e[3],z=e[4],g=e[5],x=e[6],T=e[7],l=e[8],v=e[9],y=e[10],S=e[11],E=i*i*d+m,I=n*i*d+s*p,R=s*i*d-n*p,F=i*n*d-s*p,k=n*n*d+m,w=s*n*d+i*p,L=i*s*d+n*p,N=n*s*d-i*p,_=s*s*d+m,r[0]=M*E+z*I+l*R,r[1]=P*E+g*I+v*R,r[2]=c*E+x*I+y*R,r[3]=A*E+T*I+S*R,r[4]=M*F+z*k+l*w,r[5]=P*F+g*k+v*w,r[6]=c*F+x*k+y*w,r[7]=A*F+T*k+S*w,r[8]=M*L+z*N+l*_,r[9]=P*L+g*N+v*_,r[10]=c*L+x*N+y*_,r[11]=A*L+T*N+S*_,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function C(r,e,h,a,i){var n=1/Math.tan(e/2),s;return r[0]=n/h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(s=1/(a-i),r[10]=(i+a)*s,r[14]=2*i*a*s):(r[10]=-1,r[14]=-2*a),r}var W=C;function U(r,e,h,a,i,n,s){var f=1/(e-h),p=1/(a-i),m=1/(n-s);return r[0]=-2*f,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*p,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*m,r[11]=0,r[12]=(e+h)*f,r[13]=(i+a)*p,r[14]=(s+n)*m,r[15]=1,r}var X=U;function j(r,e,h,a){var i,n,s,f,p,m,d,M,P,c,A=e[0],z=e[1],g=e[2],x=a[0],T=a[1],l=a[2],v=h[0],y=h[1],S=h[2];return Math.abs(A-v)<O&&Math.abs(z-y)<O&&Math.abs(g-S)<O?b(r):(d=A-v,M=z-y,P=g-S,c=1/Math.hypot(d,M,P),d*=c,M*=c,P*=c,i=T*P-l*M,n=l*d-x*P,s=x*M-T*d,c=Math.hypot(i,n,s),c?(c=1/c,i*=c,n*=c,s*=c):(i=0,n=0,s=0),f=M*s-P*n,p=P*i-d*s,m=d*n-M*i,c=Math.hypot(f,p,m),c?(c=1/c,f*=c,p*=c,m*=c):(f=0,p=0,m=0),r[0]=i,r[1]=f,r[2]=d,r[3]=0,r[4]=n,r[5]=p,r[6]=M,r[7]=0,r[8]=s,r[9]=m,r[10]=P,r[11]=0,r[12]=-(i*A+n*z+s*g),r[13]=-(f*A+p*z+m*g),r[14]=-(d*A+M*z+P*g),r[15]=1,r)}function B(r,e,h){const a=Y(r,e,h);return a?(r.useProgram(a),r.program=a,a):(console.log("创建项目失败！"),!1)}function Y(r,e,h){const a=H(r,r.VERTEX_SHADER,e),i=H(r,r.FRAGMENT_SHADER,h);if(!a||!i)return null;const n=r.createProgram();if(!n)return null;if(r.attachShader(n,a),r.attachShader(n,i),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS)){const f=r.getProgramInfoLog(n);return console.log("Failed to link program: ".concat(f)),r.deleteProgram(n),r.deleteShader(i),r.deleteShader(a),null}return n}function H(r,e,h){const a=r.createShader(e);if(a==null)return console.log("unable to create shader"),null;if(r.shaderSource(a,h),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS)){const n=r.getShaderInfoLog(a);return console.log("Failed to compile shader: ".concat(n)),r.deleteShader(a),null}return a}function J(r,e){e=e||1;const h=r.clientWidth*e|0,a=r.clientHeight*e|0;return r.width!==h||r.height!==a?(r.width=h,r.height=a,!0):!1}function Q(r){return r*Math.PI/180}export{V as a,$ as c,Q as d,B as i,j as l,q as m,X as o,W as p,J as r,K as s,G as t};

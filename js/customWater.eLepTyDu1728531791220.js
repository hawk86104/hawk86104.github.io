import{_ as t,a6 as e,ai as n}from"./three.QbUqWzuy1728531791220.js";import{U as r,J as a,Y as o,L as s}from"./@tresjs.TFxw2EXb1728531791220.js";import{a as i}from"./index.odAJy2kG1728531791220.js";import"./index.F8xi6SRY1728531791220.js";import{C as l}from"./three-custom-shader-material._Yy71uo31728531791220.js";import"./object-hash.lBPFZZ1y1728531791220.js";import"./@amap.OnfPw1bC1728531791220.js";import"./glsl-tokenizer.jsOyVPm91728531791220.js";import{p as c}from"./gl-noise.BrVtymbx1728531791220.js";import{d as u,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as M,m as x,al as z}from"./@vue.bvMz0l_u1728531791220.js";import{P as C}from"./tweakpane.yHWGBmom1728531791220.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.d4lkDOC_1728531791220.js";import"./@vueuse.MmMw6bXQ1728531791220.js";import"./three-stdlib.STo_3R0X1728531791220.js";import"./@pmndrs._tHjs8qy1728531791220.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.iIRYNJyq1728531791220.js";import"./all.three.ECVMrAY71728531791220.js";import"./oimophysics.x0jH7fze1728531791220.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.4hr-0Zdq1728531791220.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.mZPaz6KR1728531791220.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.rZBG-dNp1728531791220.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.4wIabXoG1728531791220.js";import"./glsl-token-string.fnhoLvhE1728531791220.js";import"./glsl-token-functions.41nYPUTK1728531791220.js";import"./jszip.v4-zSwTx1728531791220.js";const S=W;function T(){const t=["MeshPhysicalMaterial","18pnMVyD","9686510QYfjZO","length","stateObject","180cxbLbe","while (true) {}","info","toString","10QMvXcx","dispose","rotation-x","customWaterMesh","#52a7f7","#b3ffff","function *\\( *\\)","3415937kOVQuJ","51312PHazQX","value","chain","uTime","brightness","input","constructor","prototype","11QfWwEG","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","error","160921MWifGI","gger","fragment","baseMaterial","action","tmRef","args","string",'{}.constructor("return this")( )',"vertexShader","waterHighlight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","height","test","fragmentShader","vertex","36633stacrc","debu","DoubleSide","Flatshading","convertLinearToSRGB","507765arASNQ","waterColor","TresMesh","1026kFabbh","exception","apply","counter","call","bind","trace","flatShading","console","Color","1169148snZiOM"];return(T=function(){return t})()}!function(t,e){const n=W,r=T();for(;;)try{if(554658===-parseInt(n(265))/1*(parseInt(n(246))/2)+-parseInt(n(281))/3*(-parseInt(n(242))/4)+-parseInt(n(286))/5*(parseInt(n(238))/6)+-parseInt(n(253))/7+parseInt(n(254))/8*(parseInt(n(289))/9)+parseInt(n(239))/10+-parseInt(n(262))/11*(parseInt(n(236))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){B(this,(function(){const t=W,e=new RegExp(t(252)),n=new RegExp(t(276),"i"),r=k("init");e.test(r+t(256))&&n[t(278)](r+t(259))?k():r("0")}))()}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();O(void 0,(function(){const t=W,e=function(){const t=W;let e;try{e=Function("return (function() "+t(273)+");")()}catch(n){e=window}return e}(),n=e[t(297)]=e[t(297)]||{},r=["log","warn",t(244),t(264),t(290),"table",t(295)];for(let a=0;a<r[t(240)];a++){const e=O[t(260)][t(261)][t(294)](O),o=r[a],s=n[o]||e;e.__proto__=O[t(294)](O),e[t(245)]=s[t(245)].bind(s),n[o]=e}}))();const G=[S(248)],P=[S(271)];function W(t,e){const n=T();return(W=function(t,e){return n[t-=235]})(t,e)}const H=u({__name:S(249),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(250)},waterHighlight:{default:S(251)},brightness:{default:1},baseMaterial:{default:t[S(237)]}},setup(n){const o=S,s=n,i=p(null),u={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:o(263)},b={uTime:{value:0},waterColor:{value:new(t[o(235)])(s[o(287)])[o(285)]()},waterHighlight:{value:new(t[o(235)])(s[o(275)])[o(285)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s[o(277)]}},{onLoop:w}=r();return w((({elapsed:t})=>{const e=o;b[e(257)][e(255)]=-t/5})),f((()=>{const e=o;s[e(277)]&&(b.uHeight.value=s[e(277)]),s[e(287)]&&(b.waterColor[e(255)]=new(t[e(235)])(s[e(287)])[e(285)]()),s[e(275)]&&(b[e(275)][e(255)]=new(t[e(235)])(s[e(275)])[e(285)]()),s[e(258)]&&(b[e(258)][e(255)]=s[e(258)])})),g((()=>s[o(284)]),(t=>{i[o(255)].material.needsUpdate=!0})),g((()=>s[o(268)]),(e=>{const n=o,r=new l({baseMaterial:t[e],vertexShader:c(u[n(280)]),fragmentShader:u.fragment,uniforms:b,flatShading:s.Flatshading,side:t[n(283)],roughness:.2,metalness:.1,silent:!0});i[n(255)].material[n(247)](),i.value.material=r})),(n,r)=>{const s=o;return h(),m(s(288),{ref_key:s(270),ref:i,"rotation-x":-Math.PI/2},[v("TresBoxGeometry",{args:[5,5,n[s(277)],64,64,1]},null,8,P),d(_(a),{baseMaterial:e,vertexShader:_(c)(u[s(280)]),fragmentShader:u[s(267)],uniforms:b,side:t[s(283)],roughness:.2,metalness:.1,flatShading:n.Flatshading,silent:""},null,8,[s(268),s(274),s(279),"side",s(296)])],8,G)}}});function k(t){function e(t){const n=W;if(typeof t===n(272))return function(t){}[n(260)](n(243))[n(291)](n(292));1!==(""+t/t)[n(240)]||t%20==0?function(){return!0}[n(260)](n(282)+n(266))[n(293)](n(269)):function(){return!1}[n(260)](n(282)+n(266))[n(291)](n(241)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const F=E;!function(t,e){const n=E,r=N();for(;;)try{if(461209===-parseInt(n(147))/1+-parseInt(n(138))/2*(parseInt(n(148))/3)+-parseInt(n(113))/4+-parseInt(n(130))/5+-parseInt(n(116))/6+parseInt(n(158))/7+parseInt(n(160))/8)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(124)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=E,e=new RegExp(t(159)),n=new RegExp(t(114),"i"),r=$("init");e[t(163)](r+t(155))&&n[t(163)](r+t(115))?$():r("0")}))()}();const Q=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(124)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(){const t=["change","1124936ovIeQz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","2401320QEOQaJ","pos-x.jpg","call","bind","string","constructor","target","label","apply","error","MeshPhysicalMaterial","baseMaterial","height","prototype","2591580pqeQox","waterColor","return (function() ","MeshBasicMaterial","MeshStandardMaterial","gger","MeshPhongMaterial","MeshLambertMaterial","4ozPemh","info","waterHighlight","console","debu","length","TresAmbientLight","MeshToonMaterial","table","885431lvjClK","267141WygolX","TresPerspectiveCamera","MeshNormalMaterial","MeshDepthMaterial","TresDirectionalLight","浪头颜色","log","chain","value","neg-z.jpg","1250382ezNmEU","function *\\( *\\)","20367024lCMfPw","toString","warn","test","Flatshading","neg-y.jpg","exception","pos-z.jpg","customWater"];return(N=function(){return t})()}function E(t,e){const n=N();return(E=function(t,e){return n[t-=112]})(t,e)}Q(void 0,(function(){const t=E,e=function(){const t=E;let e;try{e=Function(t(132)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(141)]=e.console||{},r=[t(154),t(162),t(139),t(125),t(166),t(146),"trace"];for(let a=0;a<r.length;a++){const e=Q[t(121)][t(129)][t(119)](Q),o=r[a],s=n[o]||e;e.__proto__=Q[t(119)](Q),e[t(161)]=s[t(161)].bind(s),n[o]=e}}))();const A=v(F(149),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),L=v(F(144),{intensity:.5},null,-1),R=v(F(152),{position:[15,15,15],intensity:1},null,-1),Z=u({__name:F(168),setup(t){const e=F,r=b({alpha:!0,toneMapping:n,windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:"#b3ffff",brightness:1,baseMaterial:"MeshPhysicalMaterial"}),u=new C;return u.addBinding(c,e(128),{label:"高度",min:.1,max:5,step:.1}),u.addBinding(c,e(131),{label:"水体颜色"}),u.addBinding(c,e(140),{label:e(153)}),u.addBinding(c,"brightness",{label:"亮度",min:0,max:1,step:.01}),u.addBinding(c,"Flatshading",{label:e(164)}),u.addBlade({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:e(126)},{text:e(133),value:e(133)},{text:e(150),value:e(150)},{text:e(134),value:e(134)},{text:e(136),value:e(136)},{text:"MeshToonMaterial",value:e(145)},{text:e(137),value:e(137)},{text:e(151),value:e(151)}],value:c[e(127)]}),u.on(e(112),(t=>{const n=e;"材质"===t[n(122)][n(123)]&&(c[n(127)]=t[n(156)])})),(t,n)=>{const u=e;return h(),w(_(s),x(r,{"window-size":""}),{default:y((()=>[A,d(_(o),j(M(a)),null,16),L,R,d(H,j(M(c)),null,16),d(_(I),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:[u(117),"neg-x.jpg","pos-y.jpg",u(165),u(167),u(157)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function $(t){function e(t){const n=E;if(typeof t===n(120))return function(t){}[n(121)]("while (true) {}")[n(124)]("counter");1!==(""+t/t)[n(143)]||t%20==0?function(){return!0}.constructor(n(142)+n(135))[n(118)]("action"):function(){return!1}[n(121)](n(142)+n(135))[n(124)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Z as default};

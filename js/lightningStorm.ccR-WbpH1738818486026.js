import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.Y9qQy12V1738818486026.js";import{B as i,b as s,cx as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.WgQSjl1J1738818486026.js";import{e as l,I as d,K as p}from"./@tresjs.ZGxFoQtw1738818486026.js";import{a as m}from"./simplex-noise.jB2HxhHB1738818486026.js";import{d as f,a2 as g,o as y,H as b,u as v,r as S,j as w,g as P,m as _,F as x}from"./@vue.NRI7TcgI1738818486026.js";import"./index.3Q6a4p7v1738818486026.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.JwxyH3nB1738818486026.js";import"./three-custom-shader-material.GL6LOUMf1738818486026.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1738818486026.js";import"./@vueuse.Fak-HUpz1738818486026.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.BloZioTm1738818486026.js";import"./all.three.w-Cc8HG21738818486026.js";import"./oimophysics.x0jH7fze1738818486026.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.jxYzR0JC1738818486026.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.22j6u6rm1738818486026.js";import"./index.Mut38q0v1738818486026.js";import"./three-stdlib.9mw3NDon1738818486026.js";import"./@pmndrs.rZbwRp5K1738818486026.js";import"./object-hash.ZlXR4dyw1738818486026.js";import"./@amap.E-EiiwM61738818486026.js";import"./jszip.8di41imu1738818486026.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.hqHnabz21738818486026.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.WZYidSc01738818486026.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.GhkPKVVr1738818486026.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.zZ9i_81t1738818486026.js";const M=T;!function(t,i){const s=T,n=V();for(;;)try{if(211610===-parseInt(s(494))/1*(parseInt(s(371))/2)+-parseInt(s(452))/3+parseInt(s(422))/4*(parseInt(s(330))/5)+-parseInt(s(463))/6+-parseInt(s(429))/7*(parseInt(s(372))/8)+parseInt(s(333))/9*(-parseInt(s(400))/10)+parseInt(s(462))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function V(){const t=["stateObject","roughness","pos1","deathTime","createTriangleVerticesWithUVs","pow","RAY_EXTINGUISHED","count","initSubray","action","fraction1","add","init","COS30DEG","raySegments","set","push","412900ltBqMd","88mVzFBN","state","currentSeed","endPropagationTime","radius0","currentVertex","SIN30DEG","simplexZ","clone","middleLinPos","cos","floor","indices","sourceOffset","vPos","positionAttribute","isEternal","currentCreateTriangleVertices","needsUpdate","multiplyScalar","RAY_VANISHING","timeScale","positionVariationFactor","cross1","up0","uvsAttribute","isStatic","onSubrayCreation","1263660syuwIf","simplexX","LightningStrike","lerpVectors","ceil","test","random","createTriangleVerticesWithoutUVs","string","linPos1","function *\\( *\\)","constructor","RAY_UNBORN","setSeed","fractalRayRecursive","getNewSegment","maxSubrayRecursion","RAY_INITIALIZED","up1","recursionProbability","log","table","4BzKVsT","pos0","min","subrayProbability","createPrismFaces","createDefaultSubrayCreationCallbacks","currentSegmentCallback","66983UEENzz","middlePos","fractalRay","noiseSeed","maxSubrays","error","subrayCylinderPosition","currentIndex","timeFraction","crossVectors","minRadius","currentUVCoordinate","currentCoordinate","subVectors","sin","updateMesh","destOffset","currentSegmentIndex","debu","apply","beginVanishingTime","fraction0","linPos0","1019889vMZqUa","seed","copy","radius1","toString","iteration","copyParameters","birthTime","vanishingTimeFactor","maxIterations","12244177aPvQNd","2208726qwZQEa","rayParameters","normalize","createPrism","down","warn",'{}.constructor("return this")( )',"length","createRandomGenerator","input","lerp","seedGenerator","forwards","currentSubray","maxRaySegments","isInitialSegment","forwardsFill","generateUVs","console","subrays","isLightningStrike","side","addNewSubray","setAttribute","visible","call","drawRange","RAY_STEADY","max","numSubrays","counter","1ngaNYn","bind","randomGenerator","fillMesh","uvs","while (true) {}","subrayDutyCycle","recursion","array","usage","1223310NdgZIa","index","createSegment","9GUPKwM","simplexY","onDecideSubrayCreation","gger","info","radius1Factor","propagationTimeFactor","time","createSubray","createMesh","getSeed","trace","straightness","setIndex","sub","ramification","newPos","subrayPeriod","__proto__","radius0Factor","vertices"];return(V=function(){return t})()}!function(){R(this,(function(){const t=T,i=new RegExp(t(410)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=F("init");i[t(405)](n+"chain")&&s[t(405)](n+t(472))?F():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(448)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function T(t,i){const s=V();return(T=function(t,i){return s[t-=321]})(t,i)}A(void 0,(function(){const t=T;let i;try{i=Function("return (function() "+t(469)+");")()}catch(e){i=window}const s=i[t(481)]=i[t(481)]||{},n=[t(420),t(468),t(337),t(434),"exception",t(421),t(344)];for(let r=0;r<n[t(470)];r++){const i=A.constructor.prototype[t(321)](A),e=n[r],o=s[e]||i;i[t(351)]=A.bind(A),i[t(456)]=o.toString[t(321)](o),s[e]=i}}))();class C extends i{constructor(t={}){const i=T;super(),this[i(483)]=!0,this.type=i(402),this.init(C[i(458)](t,t)),this[i(342)]()}static[M(471)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(370)](Math[t(406)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(374)]];return n[e(374)]=(n[e(374)]+1)%i,r},getSeed:function(){return n[t(374)]/i},setSeed:function(s){n[t(374)]=Math.floor(s*i)%i}};return n}static copyParameters(t={},i={}){const n=M,e=function(s){return i===t?s:s[T(380)]()};return t[n(385)]=void 0!==i[n(385)]?e(i[n(385)]):new s(0,100,0),t[n(445)]=void 0!==i[n(445)]?e(i[n(445)]):new s(0,0,0),t.timeScale=void 0!==i.timeScale?i.timeScale:1,t[n(355)]=void 0!==i[n(355)]?i[n(355)]:.9,t[n(345)]=void 0!==i.straightness?i[n(345)]:.7,t[n(396)]=void 0!==i[n(396)]?e(i.up0):new s(0,0,1),t[n(418)]=void 0!==i[n(418)]?e(i[n(418)]):new s(0,0,1),t[n(376)]=void 0!==i[n(376)]?i[n(376)]:1,t[n(455)]=void 0!==i[n(455)]?i[n(455)]:1,t[n(352)]=void 0!==i[n(352)]?i[n(352)]:.5,t[n(338)]=void 0!==i.radius1Factor?i.radius1Factor:.2,t[n(439)]=void 0!==i.minRadius?i.minRadius:.2,t[n(388)]=void 0!==i[n(388)]?i.isEternal:void 0===i[n(459)]||void 0===i[n(357)],t[n(459)]=i[n(459)],t.deathTime=i[n(357)],t.propagationTimeFactor=void 0!==i[n(339)]?i[n(339)]:.1,t[n(460)]=void 0!==i[n(460)]?i[n(460)]:.9,t.subrayPeriod=void 0!==i[n(350)]?i[n(350)]:4,t.subrayDutyCycle=void 0!==i[n(326)]?i[n(326)]:.6,t[n(461)]=void 0!==i[n(461)]?i[n(461)]:9,t.isStatic=void 0!==i[n(398)]&&i.isStatic,t[n(348)]=void 0!==i[n(348)]?i[n(348)]:5,t[n(416)]=void 0!==i.maxSubrayRecursion?i[n(416)]:3,t.recursionProbability=void 0!==i[n(419)]?i.recursionProbability:.6,t.generateUVs=void 0!==i.generateUVs&&i[n(480)],t[n(322)]=i.randomGenerator,t[n(432)]=i[n(432)],t.onDecideSubrayCreation=i[n(335)],t[n(399)]=i[n(399)],t}update(t){const i=M;this[i(398)]||(this[i(464)][i(388)]||this[i(464)][i(459)]<=t&&t<=this.rayParameters[i(357)]?(this[i(444)](t),t<this[i(482)][0].endPropagationTime?this[i(373)]=C.RAY_PROPAGATING:t>this[i(482)][0][i(449)]?this[i(373)]=C.RAY_VANISHING:this[i(373)]=C[i(490)],this[i(487)]=!0):(this[i(487)]=!1,t<this.rayParameters[i(459)]?this[i(373)]=C[i(412)]:this[i(373)]=C[i(360)]))}[M(366)](t){const i=M;this[i(464)]=t,this[i(461)]=void 0!==t[i(461)]?Math[i(383)](t.maxIterations):9,t[i(461)]=this.maxIterations,this[i(398)]=void 0!==t[i(398)]&&t[i(398)],t[i(398)]=this[i(398)],this[i(348)]=void 0!==t[i(348)]?Math[i(383)](t[i(348)]):5,t[i(348)]=this[i(348)],this.maxSubrayRecursion=void 0!==t[i(416)]?Math[i(383)](t[i(416)]):3,t[i(416)]=this.maxSubrayRecursion,this.recursionProbability=void 0!==t[i(419)]?t[i(419)]:.6,t[i(419)]=this[i(419)],this[i(480)]=void 0!==t.generateUVs&&t.generateUVs,t[i(480)]=this.generateUVs,void 0!==t[i(322)]?(this.randomGenerator=t[i(322)],this[i(474)]=t[i(322)],void 0!==t[i(432)]&&this[i(474)][i(413)](t[i(432)])):(this[i(322)]=C.createRandomGenerator(),this[i(474)]=Math),void 0!==t[i(335)]?this[i(335)]=t[i(335)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(399)]&&(this[i(399)]=t[i(399)])),this[i(373)]=C[i(417)],this[i(433)]=Math[i(404)](1+Math[i(359)](this[i(348)],Math[i(491)](0,this[i(416)]-1))),t[i(433)]=this.maxSubrays,this[i(477)]=2*(1<<this[i(461)]),this[i(482)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(482)][i(370)](this[i(341)]());this[i(368)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(368)].push(this.createSegment());this[i(340)]=0,this.timeFraction=0,this.currentSegmentCallback=null,this[i(389)]=this[i(480)]?this[i(358)]:this[i(407)],this[i(492)]=0,this[i(476)]=null,this[i(446)]=0,this.isInitialSegment=!1,this[i(425)]=0,this.currentVertex=0,this[i(436)]=0,this[i(441)]=0,this[i(440)]=0,this[i(353)]=null,this.uvs=null,this[i(384)]=null,this[i(387)]=null,this[i(397)]=null,this[i(401)]=m(this[i(474)][i(406)]),this[i(334)]=m(this[i(474)].random),this[i(379)]=m(this[i(474)][i(406)]),this[i(475)]=new s,this.forwardsFill=new s,this[i(484)]=new s,this[i(467)]=new s,this[i(430)]=new s,this[i(381)]=new s,this[i(349)]=new s,this[i(386)]=new s,this[i(395)]=new s}[M(342)](){const t=M,i=1<<this[t(461)],s=3*(i+1)*this[t(433)],o=18*i*this[t(433)];this[t(353)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(480)]&&(this.uvs=new Float32Array(2*s)),this[t(323)](0),this[t(346)](new n(this[t(384)],1)),this.positionAttribute=new e(this.vertices,3),this[t(486)]("position",this[t(387)]),this.generateUVs&&(this[t(397)]=new e(new Float32Array(this[t(324)]),2),this[t(486)]("uv",this[t(397)])),!this[t(398)]&&(this.index[t(329)]=r,this[t(387)][t(329)]=r,this[t(480)]&&(this[t(397)][t(329)]=r)),this.vertices=this[t(387)][t(328)],this.indices=this[t(331)][t(328)],this.generateUVs&&(this[t(324)]=this[t(397)][t(328)])}[M(444)](t){const i=M;this.fillMesh(t),this[i(489)][i(361)]=this[i(436)],this[i(331)][i(390)]=!0,this[i(387)][i(390)]=!0,this[i(480)]&&(this.uvsAttribute[i(390)]=!0)}fillMesh(t){const i=M,s=this;this[i(377)]=0,this[i(436)]=0,this[i(441)]=0,this[i(440)]=0,this[i(431)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(459)]||(this[e(464)][e(388)]&&0==s.currentSubray[e(327)]?(s[e(466)](n),s[e(335)](n,s)):t<r.endPropagationTime?s[e(437)]>=n.fraction0*r[e(339)]&&(s[e(466)](n),s.onDecideSubrayCreation(n,s)):t<r.beginVanishingTime?(s[e(466)](n),s[e(335)](n,s)):(s[e(437)]<=r[e(460)]+n[e(364)]*(1-r[e(460)])&&s[e(466)](n),s[e(335)](n,s)))}))}[M(485)](){const t=M;return this.subrays[this[t(492)]++]}[M(362)](t,i){const s=M;t[s(423)].copy(i[s(385)]),t[s(356)][s(454)](i[s(445)]),t[s(396)][s(454)](i[s(396)]),t.up1[s(454)](i.up1),t.radius0=i[s(376)],t.radius1=i[s(455)],t[s(459)]=i[s(459)],t[s(357)]=i[s(357)],t[s(393)]=i.timeScale,t.roughness=i[s(355)],t[s(345)]=i[s(345)],t[s(339)]=i[s(339)],t[s(460)]=i.vanishingTimeFactor,t.maxIterations=this.maxIterations,t[s(453)]=void 0!==i[s(432)]?i[s(432)]:0,t[s(327)]=0}fractalRay(t,i){const s=M;this[s(340)]=t,this[s(428)]=i,this[s(492)]=0,this[s(362)](this[s(485)](),this.rayParameters);for(let n=0;n<this.numSubrays;n++){const i=this[s(482)][n];this[s(476)]=i,this[s(322)][s(413)](i[s(453)]),i[s(375)]=o[s(473)](i.birthTime,i[s(357)],i[s(339)]),i[s(449)]=o[s(473)](i[s(357)],i.birthTime,1-i[s(460)]);const e=this.randomGenerator[s(406)];i[s(451)][s(369)](e(),e(),e())[s(391)](1e3),i.linPos1[s(369)](e(),e(),e())[s(391)](1e3),this[s(437)]=(t-i[s(459)])/(i[s(357)]-i[s(459)]),this[s(446)]=0,this[s(478)]=!0;const r=this[s(415)]();r.iteration=0,r[s(423)][s(454)](i[s(423)]),r[s(356)].copy(i[s(356)]),r[s(451)][s(454)](i[s(451)]),r[s(409)][s(454)](i[s(409)]),r[s(396)][s(454)](i[s(396)]),r[s(418)].copy(i.up1),r[s(376)]=i.radius0,r[s(455)]=i[s(455)],r[s(450)]=0,r[s(364)]=1,r[s(394)]=1-i[s(345)],this[s(425)]=this[s(348)]*Math.pow(this[s(419)],i[s(327)])/(1<<i[s(461)]),this[s(414)](r)}this[s(428)]=null,this[s(476)]=null}[M(414)](t){const i=M;if(t[i(457)]>=this.currentSubray[i(461)])return void this.currentSegmentCallback(t);this[i(475)][i(442)](t[i(356)],t[i(423)]);let s=this[i(475)][i(470)]();s<1e-6&&(this[i(475)].set(0,0,.01),s=this[i(475)][i(470)]());const n=.5*(t[i(376)]+t.radius1),e=.5*(t[i(450)]+t[i(364)]),r=this[i(340)]*this[i(476)].timeScale*Math.pow(2,t.iteration);this[i(430)].lerpVectors(t[i(423)],t.pos1,.5),this[i(381)][i(403)](t[i(451)],t[i(409)],.5);const o=this.middleLinPos;this[i(349)][i(369)](this[i(401)](o.x,o.y,o.z,r),this[i(334)](o.x,o.y,o.z,r),this[i(379)](o.x,o.y,o.z,r)),this[i(349)][i(391)](t.positionVariationFactor*s),this[i(349)][i(365)](this[i(430)]);const a=this[i(415)]();a[i(423)][i(454)](t[i(423)]),a.pos1[i(454)](this[i(349)]),a[i(451)][i(454)](t[i(451)]),a[i(409)][i(454)](this.middleLinPos),a[i(396)][i(454)](t[i(396)]),a[i(418)][i(454)](t[i(418)]),a.radius0=t.radius0,a.radius1=n,a[i(450)]=t[i(450)],a[i(364)]=e,a[i(394)]=t[i(394)]*this[i(476)][i(355)],a[i(457)]=t.iteration+1;const h=this.getNewSegment();h[i(423)][i(454)](this.newPos),h.pos1[i(454)](t.pos1),h[i(451)][i(454)](this[i(381)]),h[i(409)][i(454)](t[i(409)]),this[i(395)].crossVectors(t[i(396)],this.forwards[i(465)]()),h[i(396)].crossVectors(this[i(475)],this[i(395)])[i(465)](),h[i(418)][i(454)](t[i(418)]),h[i(376)]=n,h.radius1=t[i(455)],h.fraction0=e,h[i(364)]=t.fraction1,h[i(394)]=t[i(394)]*this[i(476)][i(355)],h.iteration=t[i(457)]+1,this[i(414)](a),this.fractalRayRecursive(h)}[M(466)](t){const i=M;this.forwardsFill[i(442)](t[i(356)],t[i(423)])[i(465)](),this[i(478)]&&(this[i(389)](t[i(423)],t[i(396)],this[i(479)],t[i(376)],0),this.isInitialSegment=!1),this[i(389)](t[i(356)],t[i(396)],this[i(479)],t[i(455)],t[i(364)]),this[i(426)]()}[M(407)](t,i,s,n){const e=M;this[e(484)][e(438)](i,s)[e(391)](n*C[e(367)]),this[e(467)].copy(i)[e(391)](-n*C[e(378)]);const r=this[e(386)],o=this[e(353)];r[e(454)](t)[e(347)](this.side).add(this[e(467)]),o[this[e(441)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(441)]++]=r.z,r.copy(t)[e(365)](this[e(484)])[e(365)](this[e(467)]),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(441)]++]=r.z,r[e(454)](i)[e(391)](n)[e(365)](t),o[this.currentCoordinate++]=r.x,o[this[e(441)]++]=r.y,o[this[e(441)]++]=r.z,this[e(377)]+=3}[M(358)](t,i,s,n,e){const r=M;this[r(484)][r(438)](i,s).multiplyScalar(n*C[r(367)]),this[r(467)][r(454)](i)[r(391)](-n*C[r(378)]);const o=this[r(386)],a=this[r(353)],h=this[r(324)];o.copy(t)[r(347)](this[r(484)]).add(this[r(467)]),a[this.currentCoordinate++]=o.x,a[this[r(441)]++]=o.y,a[this[r(441)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(440)]++]=0,o[r(454)](t)[r(365)](this[r(484)]).add(this[r(467)]),a[this.currentCoordinate++]=o.x,a[this[r(441)]++]=o.y,a[this[r(441)]++]=o.z,h[this[r(440)]++]=e,h[this[r(440)]++]=.5,o[r(454)](i)[r(391)](n)[r(365)](t),a[this.currentCoordinate++]=o.x,a[this[r(441)]++]=o.y,a[this[r(441)]++]=o.z,h[this[r(440)]++]=e,h[this[r(440)]++]=1,this.currentVertex+=3}[M(426)](t){const i=M,s=this[i(384)];t=this[i(377)]-6,s[this[i(436)]++]=t+1,s[this[i(436)]++]=t+2,s[this[i(436)]++]=t+5,s[this[i(436)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(436)]++]=t+4,s[this[i(436)]++]=t+0,s[this[i(436)]++]=t+1,s[this[i(436)]++]=t+4,s[this[i(436)]++]=t+0,s[this[i(436)]++]=t+4,s[this[i(436)]++]=t+3,s[this[i(436)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(436)]++]=t+3,s[this[i(436)]++]=t+2,s[this[i(436)]++]=t+3,s[this[i(436)]++]=t+5}[M(427)](){const t=M,i=this[t(322)][t(406)];this[t(335)]=function(s,n){const e=t,r=n[e(476)],a=n.rayParameters.subrayPeriod,h=n[e(464)].subrayDutyCycle,c=n[e(464)][e(388)]&&0==r[e(327)]?-i()*a:o[e(473)](r[e(459)],r[e(375)],s[e(450)])-i()*a,u=n[e(340)]-c,l=Math[e(383)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n.subrayProbability),r[e(327)]<n.maxSubrayRecursion&&n[e(492)]<n[e(433)]&&i()<p){const t=n[e(485)](),o=n[e(322)][e(343)]();t[e(453)]=d,n[e(322)][e(413)](d),t[e(327)]=r[e(327)]+1,t[e(461)]=Math[e(491)](1,r[e(461)]-1),t[e(451)][e(369)](i(),i(),i())[e(391)](1e3),t.linPos1[e(369)](i(),i(),i())[e(391)](1e3),t[e(396)][e(454)](r[e(396)]),t[e(418)][e(454)](r[e(418)]),t[e(376)]=s[e(376)]*n.rayParameters[e(352)],t[e(455)]=Math[e(424)](n[e(464)][e(439)],s.radius1*n.rayParameters.radius1Factor),t[e(459)]=c+l*a,t[e(357)]=t[e(459)]+a*h,!n[e(464)][e(388)]&&0==r[e(327)]&&(t[e(459)]=Math.max(t.birthTime,r[e(459)]),t[e(357)]=Math[e(424)](t[e(357)],r.deathTime)),t[e(393)]=2*r[e(393)],t[e(355)]=r.roughness,t[e(345)]=r[e(345)],t[e(339)]=r[e(339)],t[e(460)]=r[e(460)],n[e(399)](s,r,t,n),n.randomGenerator[e(413)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(399)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const d=t;h[d(423)][d(454)](s[d(423)]),n.subVectors(o[d(356)],o.pos0),e[d(454)](n)[d(465)](),n[d(391)](s[d(450)]+(1-s[d(450)])*(i()*c));const p=n[d(470)]();r[d(438)](o[d(396)],e);const m=2*Math.PI*i();r[d(391)](Math[d(382)](m)),a.copy(o[d(396)]).multiplyScalar(Math[d(443)](m)),h[d(356)][d(454)](r)[d(365)](a)[d(391)](p*u*(l+i()*(1-l)))[d(365)](n)[d(365)](o[d(423)])},this[t(435)]=function(s,o,h,c,u,l){const d=t;h[d(423)].copy(s[d(423)]),n[d(442)](o[d(356)],o[d(423)]),e[d(454)](n).normalize(),n[d(391)](s[d(450)]+(1-s.fraction0)*((2*i()-1)*c));const p=n[d(470)]();r.crossVectors(o[d(396)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[d(382)](m)),a[d(454)](o[d(396)])[d(391)](Math[d(443)](m)),h.pos1[d(454)](r)[d(365)](a)[d(391)](p*u*(l+i()*(1-l)))[d(365)](n).add(o[d(423)])}}[M(341)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(332)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(415)](){const t=M;return this[t(368)][this[t(446)]++]}[M(454)](t){const i=M;return super[i(454)](t),this.init(C[i(458)]({},t.rayParameters)),this}[M(380)](){return new(this[M(411)])(C.copyParameters({},this.rayParameters))}}function F(t){function i(t){const s=T;if(typeof t===s(408))return function(t){}[s(411)](s(325))[s(448)](s(493));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+s(336))[s(488)](s(363)):function(){return!1}[s(411)](s(447)+s(336))[s(448)](s(354)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function z(t,i){const s=D();return(z=function(t,i){return s[t-=477]})(t,i)}C[M(417)]=0,C[M(412)]=1,C.RAY_PROPAGATING=2,C[M(490)]=3,C[M(392)]=4,C.RAY_EXTINGUISHED=5,C[M(367)]=Math[M(382)](30*Math.PI/180),C[M(378)]=Math[M(443)](30*Math.PI/180);const j=z;!function(t,i){const s=z,n=D();for(;;)try{if(102866===parseInt(s(482))/1*(parseInt(s(517))/2)+parseInt(s(513))/3+parseInt(s(477))/4*(parseInt(s(496))/5)+parseInt(s(516))/6*(-parseInt(s(541))/7)+-parseInt(s(530))/8+-parseInt(s(488))/9*(parseInt(s(546))/10)+parseInt(s(514))/11*(parseInt(s(504))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(521)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(){const t=["144235bUEMKb","lightningMaxDuration","prototype","stormParams","lightningMinPeriod","32000hImuBL","copy","352552RKBVBS","geometry","length","console","destOffset","1BAGCLt","debu","random","nextLightningTime",'{}.constructor("return this")( )',"action","423IOValr","birthTime","lightningsMeshes","return (function() ","counter","deadLightningsMeshes","clone","isLightningStorm","10xyEJhe","bind","while (true) {}","constructor","lightningMaterial","size","exception","lerp","221268KlfSWb","maxSlope","add","getNextLightningTime","inited","update","test","gger","push","214251VlooNF","77oFconJ","maxHeight","42OgwkCP","209074uHbofc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","maxLightnings","apply","onLightningDown","minHeight","function *\\( *\\)","state","set","isEternal","lightningMaxPeriod","input","670416CtlWrz","string","toString","warn","log","lightningParameters","onRayPosition","rayParameters","multiplyScalar","lightningMinDuration","__proto__"];return(D=function(){return t})()}!function(){H(this,(function(){const t=z,i=new RegExp(t(524)),s=new RegExp(t(518),"i"),n=N("init");i[t(510)](n+"chain")&&s[t(510)](n+t(529))?N():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();G(void 0,(function(){const t=z,i=function(){const t=z;let i;try{i=Function(t(491)+t(486)+");")()}catch(s){i=window}return i}(),s=i[t(480)]=i[t(480)]||{},n=[t(534),t(533),"info",t(519),t(502),"table","trace"];for(let e=0;e<n.length;e++){const i=G[t(499)][t(543)][t(497)](G),r=n[e],o=s[r]||i;i[t(540)]=G.bind(G),i[t(532)]=o[t(532)].bind(o),s[r]=i}}))();class E extends a{constructor(t={}){const i=z;super(),this[i(495)]=!0,this[i(544)]=t,t.size=void 0!==t.size?t.size:1e3,t[i(523)]=void 0!==t.minHeight?t[i(523)]:80,t[i(515)]=void 0!==t[i(515)]?t[i(515)]:100,t[i(505)]=void 0!==t[i(505)]?t[i(505)]:1.1,t[i(520)]=void 0!==t[i(520)]?t[i(520)]:3,t.lightningMinPeriod=void 0!==t.lightningMinPeriod?t[i(545)]:3,t[i(528)]=void 0!==t[i(528)]?t[i(528)]:7,t.lightningMinDuration=void 0!==t[i(539)]?t.lightningMinDuration:1,t[i(542)]=void 0!==t[i(542)]?t[i(542)]:2.5,this[i(535)]=C.copyParameters(t[i(535)],t[i(535)]),this[i(535)][i(527)]=!1,this[i(500)]=void 0!==t.lightningMaterial?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(536)]?this[i(536)]=t[i(536)]:this[i(536)]=function(s,n){const e=i;n[e(526)]((Math.random()-.5)*t[e(501)],0,(Math[e(484)]()-.5)*t[e(501)]);const r=o[e(503)](t[e(523)],t[e(515)],Math.random());s[e(526)](t[e(505)]*(2*Math[e(484)]()-1),1,t[e(505)]*(2*Math[e(484)]()-1))[e(538)](r).add(n)},this[i(522)]=t[i(522)],this.inited=!1,this[i(485)]=0,this[i(490)]=[],this[i(493)]=[];for(let s=0;s<this[i(544)].maxLightnings;s++){const t=new C(C.copyParameters({},this[i(535)])),s=new c(t,this[i(500)]);this[i(493)][i(512)](s)}}update(t){const i=z;if(!this[i(508)]&&(this[i(485)]=this[i(507)](t)*Math.random(),this.inited=!0),t>=this[i(485)]){const s=this[i(493)].pop();if(s){const n=C.copyParameters(s[i(478)][i(537)],this[i(535)]);n[i(489)]=t,n.deathTime=t+o[i(503)](this[i(544)][i(539)],this.stormParams[i(542)],Math[i(484)]()),this.onRayPosition(n.sourceOffset,n[i(481)]),n.noiseSeed=Math[i(484)](),this[i(506)](s),this[i(490)][i(512)](s)}this[i(485)]=this[i(507)](t)}let s=0,n=this[i(490)][i(479)];for(;s<n;){const e=this[i(490)][s],r=e[i(478)],o=r[i(525)];r[i(509)](t),o===C.RAY_PROPAGATING&&r[i(525)]>o&&this[i(522)]&&this.onLightningDown(r),r[i(525)]===C.RAY_EXTINGUISHED?(this[i(490)].splice(this[i(490)].indexOf(e),1),this[i(493)].push(e),this.remove(e),n--):s++}}[j(507)](t){const i=j;return t+o.lerp(this[i(544)].lightningMinPeriod,this.stormParams[i(528)],Math[i(484)]())/(this.stormParams[i(520)]+1)}copy(t,i){const s=j;return super[s(547)](t,i),this.stormParams.size=t[s(544)][s(501)],this[s(544)][s(523)]=t.stormParams.minHeight,this[s(544)][s(515)]=t[s(544)][s(515)],this[s(544)][s(505)]=t.stormParams[s(505)],this[s(544)][s(520)]=t[s(544)][s(520)],this[s(544)][s(545)]=t[s(544)][s(545)],this[s(544)].lightningMaxPeriod=t[s(544)][s(528)],this[s(544)].lightningMinDuration=t[s(544)][s(539)],this.stormParams[s(542)]=t[s(544)].lightningMaxDuration,this.lightningParameters=C.copyParameters({},t[s(535)]),this.lightningMaterial=t.stormParams[s(500)],this[s(522)]=t[s(522)],this}[j(494)](){const t=j;return new this.constructor(this[t(544)])[t(547)](this)}}function N(t){function i(t){const s=z;if(typeof t===s(531))return function(t){}.constructor(s(498))[s(521)](s(492));1!==(""+t/t).length||t%20==0?function(){return!0}[s(499)]("debu"+s(511)).call(s(487)):function(){return!1}[s(499)](s(483)+s(511)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=Z;!function(t,i){const s=Z,n=Y();for(;;)try{if(730975===parseInt(s(301))/1+parseInt(s(299))/2+-parseInt(s(304))/3*(parseInt(s(291))/4)+parseInt(s(313))/5+-parseInt(s(312))/6*(-parseInt(s(345))/7)+parseInt(s(286))/8+-parseInt(s(329))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(315)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){L(this,(function(){const t=Z,i=new RegExp(t(310)),s=new RegExp(t(331),"i"),n=K(t(318));i[t(347)](n+t(303))&&s[t(347)](n+t(333))?K():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();O(void 0,(function(){const t=Z;let i;try{i=Function(t(292)+t(337)+");")()}catch(e){i=window}const s=i[t(300)]=i[t(300)]||{},n=[t(294),t(339),"info",t(314),t(332),t(342),t(287)];for(let r=0;r<n[t(321)];r++){const i=O.constructor.prototype[t(324)](O),e=n[r],o=s[e]||i;i.__proto__=O[t(324)](O),i.toString=o[t(317)][t(324)](o),s[e]=i}}))();const k=["object"];function Y(){const t=["subrayConePosition","#b0ffff",'{}.constructor("return this")( )',"radius1","warn","stateObject","rayParameters","table","sub","pos1","3206eSuatF","maxLightnings","test","constructor","subVectors","9566320YnkPcY","trace","add","action","straightness","16316PuHLVw","return (function() ","maxHeight","log","subrayPeriod","color","stormParams","subrayDutyCycle","1089788LfAPPI","console","294258SgTIJX","radius0","chain","306wnibpx","roughness","dot","MeshBasicMaterial","while (true) {}","Vector3","function *\\( *\\)","string","2178zGBBkA","6743565oKFheb","error","apply","counter","toString","init","sourceOffset","gger","length","copy","set","bind","Color","primitive","timeScale","size","21625884ZFiVvv","minHeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","input","debu"];return(Y=function(){return t})()}function Z(t,i){const s=Y();return(Z=function(t,i){return s[t-=284]})(t,i)}const B=f({__name:"lightStorm",props:{color:{default:U(336)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new(u[i(325)])(s[i(296)]),e=new(u[i(307)])({color:n}),r=new(u[i(309)])(0,-1,0);let o=0;const a=new(u[i(309)]),h=new(u[i(309)]),c={roughness:s[i(305)],straightness:s[i(290)],radius0:s.radius0,radius1:s[i(338)],timeScale:s[i(327)],subrayPeriod:s[i(295)],subrayDutyCycle:s[i(298)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e[c(335)](t,s,n,.6,.6,.5),o=e[c(341)][c(319)].y,a[c(285)](n[c(344)],e[c(341)][c(319)]);const u=r[c(306)](a);h[c(322)](r).multiplyScalar(u),a[c(343)](h);const l=u/o>.5?o/u:1;h.multiplyScalar(l),a[c(288)](h),n[c(344)].addVectors(a,e[c(341)][c(319)])}},d=new E({size:s[i(328)],minHeight:s[i(330)],maxHeight:s[i(293)],maxSlope:.6,maxLightnings:s[i(346)],lightningParameters:c,lightningMaterial:e});g((()=>{const t=i,n=d[t(297)];n.size=s[t(328)],n[t(330)]=s.minHeight,n[t(293)]=s.maxHeight,e[t(296)][t(323)](s[t(296)]),c.roughness=s[t(305)],c[t(290)]=s.straightness,c[t(302)]=s.radius0,c[t(338)]=s.radius1,c[t(327)]=s.timeScale}));const{onLoop:p}=l();return p((({elapsed:t})=>{d.update(t)})),(t,s)=>{const n=i;return y(),b(n(326),{object:v(d),renderOrder:9999},null,8,k)}}});function K(t){function i(t){const s=Z;if(typeof t===s(311))return function(t){}[s(284)](s(308))[s(315)](s(316));1!==(""+t/t).length||t%20==0?function(){return!0}[s(284)](s(334)+s(320)).call(s(289)):function(){return!1}[s(284)]("debu"+s(320))[s(315)](s(340)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=W;!function(t,i){const s=W,n=tt();for(;;)try{if(463429===-parseInt(s(234))/1+parseInt(s(212))/2+parseInt(s(245))/3*(-parseInt(s(231))/4)+-parseInt(s(219))/5+-parseInt(s(230))/6+-parseInt(s(221))/7*(parseInt(s(214))/8)+parseInt(s(243))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(248)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){X(this,(function(){const t=W,i=new RegExp(t(203)),s=new RegExp(t(227),"i"),n=Q(t(238));i[t(217)](n+t(237))&&s[t(217)](n+t(222))?Q():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(248)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();q(void 0,(function(){const t=W;let i;try{i=Function("return (function() "+t(244)+");")()}catch(e){i=window}const s=i[t(215)]=i[t(215)]||{},n=["log",t(207),"info",t(241),t(209),t(229),"trace"];for(let r=0;r<n[t(233)];r++){const i=q[t(208)][t(211)][t(213)](q),e=n[r],o=s[e]||i;i[t(210)]=q[t(213)](q),i.toString=o[t(247)].bind(o),s[e]=i}}))();const J=f({__name:$(250),setup(i){const s=$,n=S({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(228),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(240),value:.85,min:0,max:1,step:.01},straightness:{label:s(205),value:.65,min:0,max:1,step:.01},radius0:{label:s(204),value:1,min:.1,max:10,step:.01},radius1:{label:s(226),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(246),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(x,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:P((()=>[w(B,{minHeight:v(e)[m(232)],maxHeight:v(r).value,color:v(o)[m(232)],roughness:v(a)[m(232)],straightness:v(h)[m(232)],radius0:v(c).value,radius1:v(u)[m(232)],timeScale:v(l)[m(232)]},null,8,[m(223),m(224),m(206),"roughness",m(235),m(236),m(218),"timeScale"]),w(v(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(p))],64)}}});function W(t,i){const s=tt();return(W=function(t,i){return s[t-=203]})(t,i)}function Q(t){function i(t){const s=W;if(typeof t===s(242))return function(t){}[s(208)](s(249))[s(248)]("counter");1!==(""+t/t)[s(233)]||t%20==0?function(){return!0}.constructor(s(216)+"gger").call(s(220)):function(){return!1}[s(208)](s(216)+s(225))[s(248)](s(239)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function tt(){const t=["chain","init","stateObject","粗糙度","error","string","21162960LMHqIx",'{}.constructor("return this")( )',"69807AyRtGg","时间缩放","toString","apply","while (true) {}","lightningStorm","function *\\( *\\)","端部半径","直度度","color","warn","constructor","exception","__proto__","prototype","1578568lHIKUT","bind","24HqgiFt","console","debu","test","radius1","2873000PWjAiK","action","1324911SccDnM","input","minHeight","maxHeight","gger","未部半径","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#92399e","table","4053642bQrRvX","124JbxGsh","value","length","137930vGzRpV","straightness","radius0"];return(tt=function(){return t})()}export{J as default};

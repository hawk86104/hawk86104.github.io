import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.sWTY8Kgg1726740218347.js";import{U as o}from"./@tresjs.C5O8roW51726740218347.js";import{C as e}from"./three-custom-shader-material.hw4Mip3d1726740218347.js";import"./object-hash.rW_XvzOw1726740218347.js";import{_ as r,C as i,ce as u,m as c,a$ as s}from"./three.MbBECAu81726740218347.js";import"./@amap.bfr68PX11726740218347.js";import"./glsl-tokenizer.37TL9LuE1726740218347.js";import{d as a,a3 as l,w as f,o as p,E as d,u as m,a4 as v,r as g,f as y,g as h,j as C,m as w}from"./@vue.JNsx1iN61726740218347.js";import{P as _}from"./tweakpane.yHWGBmom1726740218347.js";import"./@vueuse.18lbrd2F1726740218347.js";import"./glsl-token-string.AVYfh4t_1726740218347.js";import"./glsl-token-functions.cO5bFsqa1726740218347.js";import"./jszip.Axb7QGa61726740218347.js";function b(t,n){const o=S();return(b=function(t,n){return o[t-=308]})(t,n)}const x=b;!function(t,n){const o=b,e=S();for(;;)try{if(743088===-parseInt(o(333))/1+parseInt(o(365))/2*(parseInt(o(348))/3)+parseInt(o(342))/4*(parseInt(o(331))/5)+-parseInt(o(350))/6*(parseInt(o(318))/7)+-parseInt(o(314))/8+parseInt(o(360))/9+-parseInt(o(313))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){I(this,(function(){const t=b,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(325),"i"),e=O(t(341));n.test(e+"chain")&&o[t(351)](e+t(330))?O():e("0")}))()}();const j=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[b(340)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();j(void 0,(function(){const t=b;let n;try{n=Function(t(335)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(359)]=n[t(359)]||{},e=["log",t(358),t(355),t(366),"exception",t(332),t(357)];for(let i=0;i<e[t(308)];i++){const n=j.constructor[t(311)][t(324)](j),r=e[i],u=o[r]||n;n[t(310)]=j[t(324)](j),n[t(346)]=u.toString[t(324)](u),o[r]=n}}))();const M=[x(356)];function S(){const t=["init","869048ypmblu","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","counter","city","toString","uGradient","3GrJaOD","model","5236770DJqvoc","test","MeshBasicMaterial","#112233","constructor","info","object","trace","warn","console","13278168IYqlKB","boundingBox","topColor","clone","bulidingsColor","2416200ijKBKg","error","length","#ffffff","__proto__","prototype","land","11254770NoDyjF","602448iyTmEz","material","uOpacity","opacity","7mQUylV","DoubleSide","gger","#ffff00","uniforms","#e523ff","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setStyle","string","while (true) {}","stateObject","input","30eifuQw","table","1170358qDdmpH","landColor","return (function() ","value","primitive","Color","uColor","apply"];return(S=function(){return t})()}const T=a({__name:"bModel",props:{model:{},bulidingsColor:{default:x(323)},landColor:{default:x(353)},topColor:{default:x(321)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=x,u=t,c=u[n(349)][n(345)];u.model[n(349)].children[0][n(315)]=new(r[n(352)])({color:n(321)}),c.renderOrder=1001;const s=u[n(349)][n(312)];(()=>{const t=n,{geometry:o}=c;o.computeBoundingBox(),o.computeBoundingSphere();const{max:s,min:a}=o[t(361)];if(c[t(315)].__csm)return;const l=new e({baseMaterial:c[t(315)],vertexShader:"\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t",fragmentShader:t(343),silent:!0,uniforms:{uMax:{value:s},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new i(u[t(364)])},uOpacity:{value:u[t(317)]},uLightColor:{value:new(r[t(338)])(t(309))},uTopColor:{value:new(r[t(338)])(u[t(362)])},uTime:{value:0},uGradient:{value:u.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(319)]});c[t(315)].dispose(),c.material=l})();const{onLoop:a}=o();a((({delta:t})=>{c[n(315)].uniforms.uTime.value+=t})),l((()=>{const t=n;u[t(364)]&&c[t(315)][t(322)][t(339)][t(336)][t(326)](u.bulidingsColor),u[t(334)]&&((t,o)=>{const e=n;let i;"cu"===t||t===e(312)&&(i=Array.isArray(s[e(315)])?s[e(315)]:[s[e(315)]],i.forEach((t=>{const n=e;t[o][n(326)](u[n(334)]),t.side=r[n(319)]})))})(t(312),"color"),u.opacity&&(c[t(315)][t(322)][t(316)][t(336)]=u[t(317)])})),f(u,((t,o)=>{const e=n;c[e(315)][e(322)][e(347)].value=t.gradient}));const v=u[n(349)].model[n(363)]();return(t,o)=>{const e=n;return p(),d(e(337),{object:m(v)},null,8,M)}}});function O(t){function n(t){const o=b;if(typeof t===o(327))return function(t){}[o(354)](o(328)).apply(o(344));1!==(""+t/t)[o(308)]||t%20==0?function(){return!0}[o(354)]("debu"+o(320)).call("action"):function(){return!1}.constructor("debugger")[o(340)](o(329)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const P=z;!function(t,n){const o=z,e=B();for(;;)try{if(612056===-parseInt(o(157))/1*(-parseInt(o(160))/2)+parseInt(o(198))/3*(-parseInt(o(201))/4)+-parseInt(o(185))/5+-parseInt(o(186))/6*(-parseInt(o(195))/7)+-parseInt(o(170))/8+-parseInt(o(174))/9+parseInt(o(155))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(158)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function B(){const t=["speed","call","25243950xYUsii","return (function() ","5YzvViF","apply","primitive","169996JEORav","#FFF","test","value","constructor","__proto__","uGradual","scale","object","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9299992ugBpFH","clone","trace","builds","4913046KKMVSt","exception","table","srcColor","toString","matrix","uniforms","bind","input","log","info","4639455XsRXEk","5556JJpurP","warn","action","gradual","uTime","material","stateObject","prototype","color","7658ZPNHpS","gger","init","3JyteNJ","counter","#000","2856356OPKfei","renderOrder","uColor",'{}.constructor("return this")( )',"function *\\( *\\)","debu","applyMatrix4","error","width","chain","bLine","console"];return(B=function(){return t})()}!function(){F(this,(function(){const t=z,n=new RegExp(t(145)),o=new RegExp(t(169),"i"),e=R(t(197));n[t(162)](e+t(150))&&o[t(162)](e+t(182))?R():e("0")}))()}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(158)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function z(t,n){const o=B();return(z=function(t,n){return o[t-=143]})(t,n)}E(void 0,(function(){const t=z,n=function(){const t=z;let n;try{n=Function(t(156)+t(144)+");")()}catch(o){n=window}return n}(),o=n.console=n[t(152)]||{},e=[t(183),t(187),t(184),t(148),t(175),t(176),t(172)];for(let r=0;r<e.length;r++){const n=E[t(164)][t(193)][t(181)](E),i=e[r],u=o[i]||n;n[t(165)]=E[t(181)](E),n.toString=u[t(178)][t(181)](u),o[i]=n}}))();const A=[P(168)],D=a({__name:P(151),props:{builds:{},color:{default:P(161)},srcColor:{default:P(200)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=P,e=t;let r=null;const a={transparent:!0,uniforms:{uColor:{value:new i(e[n(194)])},uSrcColor:{value:new i(e.srcColor)},uScale:{value:e[n(167)]},uTime:{value:0},uGradual:{value:e[n(189)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let f=new u(e[n(173)].geometry)[n(171)]();f=f[n(147)](e[n(173)][n(179)]);const v=new c(a);r=new s(f,v),r[n(191)].linewidth=e[n(149)],r[n(202)]=1e3,l((()=>{const t=n;e[t(194)]&&(a[t(180)][t(143)][t(163)]=new i(e[t(194)])),e[t(177)]&&(a.uniforms.uSrcColor[t(163)]=new i(e[t(177)])),e.scale&&(a.uniforms.uScale[t(163)]=e[t(167)]),e[t(189)]&&(a[t(180)][t(166)].value=e[t(189)])}));const{onLoop:g}=o();return g((({delta:t})=>{const o=n;a[o(180)][o(190)][o(163)]+=t*e[o(153)],a[o(180)][o(190)].value%=1})),(t,o)=>{const e=n;return p(),d(e(159),{object:m(r)},null,8,A)}}});function R(t){function n(t){const o=z;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[o(158)](o(199));1!==(""+t/t).length||t%20==0?function(){return!0}[o(164)](o(146)+o(196))[o(154)](o(188)):function(){return!1}[o(164)]("debu"+o(196))[o(158)](o(192)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const Z=L;function G(){const t=["1188942LHxPLT","buildingsEffectA","#000000","exception","builds","return (function() ","city","function *\\( *\\)","constructor","color","#999","271143ZxWWeZ","58NuYvRQ","线原颜色","apply","scale","效果参数","stateObject","1581636ydHQQU","#FFF","debu","__proto__","#000","1773840ESyUmd","#112233","console","init","addBinding","error","gger","call","30075pCmmTA","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn",'{}.constructor("return this")( )',"string","1280240OeIDKj","chain","gradual","线扫颜色","7xDlycW","test","2660841yjvOMi","trace","length","bind","speed","toString","srcColor","model","log"];return(G=function(){return t})()}!function(t,n){const o=L,e=G();for(;;)try{if(199443===-parseInt(o(143))/1+parseInt(o(144))/2*(parseInt(o(163))/3)+-parseInt(o(150))/4+parseInt(o(168))/5+parseInt(o(183))/6*(-parseInt(o(172))/7)+parseInt(o(155))/8+parseInt(o(174))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const k=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(146)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){k(this,(function(){const t=L,n=new RegExp(t(139)),o=new RegExp(t(164),"i"),e=J(t(158));n.test(e+t(169))&&o[t(173)](e+"input")?J():e("0")}))()}();const H=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(146)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function L(t,n){const o=G();return(L=function(t,n){return o[t-=133]})(t,n)}H(void 0,(function(){const t=L;let n;try{n=Function(t(137)+t(166)+");")()}catch(r){n=window}const o=n[t(157)]=n[t(157)]||{},e=[t(182),t(165),"info",t(160),t(135),"table",t(175)];for(let i=0;i<e.length;i++){const n=H[t(140)].prototype.bind(H),r=e[i],u=o[r]||n;n[t(153)]=H[t(177)](H),n[t(179)]=u[t(179)].bind(u),o[r]=n}}))();const $=a({__name:Z(133),async setup(o){const e=Z;let r,i;const u=([r,i]=v((()=>n())),r=await r,i(),r),c=g({color:e(151),srcColor:e(154),scale:2e3,gradual:6.6,speed:.3}),s=new _({title:e(148),expanded:!0});return s[e(159)](c,e(180),{label:e(145)}),s[e(159)](c,e(141),{label:e(171)}),s[e(159)](c,e(178),{label:"速度",min:.1,max:1,step:.1}),s[e(159)](c,e(147),{label:"最大扩散",min:10,max:2e3,step:10}),s[e(159)](c,e(170),{label:"扩散系数",min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return p(),y(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:h((()=>[C(T,{model:m(u),bulidingsColor:r(134),landColor:r(156),topColor:r(142)},null,8,[r(181)]),C(D,w({builds:m(u)[r(138)]},c),null,16,[r(136)])])),_:1})}}});function J(t){function n(t){const o=L;if(typeof t===o(167))return function(t){}[o(140)]("while (true) {}")[o(146)]("counter");1!==(""+t/t)[o(176)]||t%20==0?function(){return!0}[o(140)](o(152)+o(161))[o(162)]("action"):function(){return!1}[o(140)](o(152)+o(161))[o(146)](o(149)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{$ as default};

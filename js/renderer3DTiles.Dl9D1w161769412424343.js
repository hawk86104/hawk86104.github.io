import{importShared as e,Ai as t}from"./3d-tiles-renderer.DFcJBJdg1769412424343.js";import{useTres as r,useLoop as o,OrbitControls_default as n}from"./index.B2-FHinZ1769412424343.js";const{defineComponent:a}=await e("vue"),{unref:i,createElementVNode:l,openBlock:s,createElementBlock:u}=await e("vue"),c=["object"],{watchEffect:p}=await e("vue"),d=await e("three"),m=a({__name:"tilesMesh",setup(e){const n=new t("https://opensource.cdn.icegl.cn/3Dtiles/simpleGIS/data/tileset.json");n.errorTarget=0;n.addEventListener("load-model",({scene:e})=>{e.traverse(e=>{e.isMesh&&(e.material.side=2,e.receiveShadow=!1,e.castShadow=!1)});const t=new d.Box3,r=new d.Sphere;n.getBoundingBox(t)?(t.getCenter(n.group.position),n.group.position.multiplyScalar(-1)):n.getBoundingSphere(r)&&(n.group.position.copy(r.center),n.group.position.multiplyScalar(-1))});const{camera:a,renderer:m,sizes:v}=r();p(()=>{v.width.value&&(n.setCamera(a.value),n.setResolutionFromRenderer(a.value,m))});const{onBeforeRender:g}=o();return g(()=>{a.value&&v.width.value&&(a.value.updateMatrixWorld(),n.update())}),(e,t)=>(s(),u("TresGroup",null,[l("primitive",{object:i(n).group},null,8,c)]))}}),{defineComponent:v}=await e("vue"),{createElementVNode:g,unref:w,normalizeProps:f,guardReactiveProps:h,createVNode:B,resolveComponent:C,mergeProps:T,withCtx:S,openBlock:x,createBlock:y}=await e("vue"),{reactive:E,watchEffect:_,shallowRef:j}=await e("vue"),k=v({__name:"renderer3DTiles",setup(e){const t=E({clearColor:"#201919"}),r=E({enableDamping:!0,dampingFactor:.05}),o=j();return _(()=>{o.value&&o.value.position.set(1,2,3).multiplyScalar(40)}),(e,a)=>{const i=C("TresCanvas");return x(),y(i,T(t,{"window-size":""}),{default:S(()=>[a[0]||(a[0]=g("TresPerspectiveCamera",{position:[400,400,400],fov:60,near:.1,far:4e3},null,-1)),B(w(n),f(h(r)),null,16),a[1]||(a[1]=g("TresAmbientLight",{intensity:.5},null,-1)),g("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:o,position:[1,2,3],intensity:1.25},null,512),B(m),a[2]||(a[2]=g("TresAxesHelper",{args:[100]},null,-1))]),_:1},16)}}});export{k as default};

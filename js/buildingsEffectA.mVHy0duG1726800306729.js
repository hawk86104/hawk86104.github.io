import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.Bwu_0uFQ1726800306729.js";import{U as o}from"./@tresjs.pv1MNfNv1726800306729.js";import{C as e}from"./three-custom-shader-material.qYXdA-3z1726800306729.js";import"./object-hash.4nPceUw51726800306729.js";import{_ as r,C as i,ce as u,m as c,b3 as a}from"./three.ZddO3ejJ1726800306729.js";import"./@amap.soyOEMuN1726800306729.js";import"./glsl-tokenizer.0YDyBMML1726800306729.js";import{d as s,a3 as l,w as f,o as p,E as d,u as m,a4 as g,r as v,f as h,g as y,j as w,m as b}from"./@vue.bvMz0l_u1726800306729.js";import{P as _}from"./tweakpane.yHWGBmom1726800306729.js";import"./@vueuse.bZHkTEeA1726800306729.js";import"./glsl-token-string.ZdNsnbc61726800306729.js";import"./glsl-token-functions.dtMvnwCZ1726800306729.js";import"./jszip.1BnN4Vdj1726800306729.js";function C(){const t=["call","console","uColor","__proto__","warn","function *\\( *\\)","side","setStyle","log","landColor","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","test","Color","gradient","MeshBasicMaterial","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","exception","bulidingsColor","419634hgRVwi","land","toString","children","480228AtBZgT","uGradient","computeBoundingSphere","value","renderOrder","opacity","while (true) {}","#e523ff","forEach","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","topColor","DoubleSide","string","1540332wdWrSl","counter","uniforms","info","4oWkdNB","#ffffff","bModel","dispose","color","object","apply","length","model","684147ADzZWo","material","isArray","computeBoundingBox","#112233","244449dnrvlg","city","3847976ybyijX","constructor","debu","boundingBox","input","gger","action","bind","primitive","247515yxnFHw"];return(C=function(){return t})()}const x=I;function I(t,n){const o=C();return(I=function(t,n){return o[t-=499]})(t,n)}!function(t,n){const o=I,e=C();for(;;)try{if(148965===parseInt(o(558))/1+-parseInt(o(523))/2+-parseInt(o(553))/3+-parseInt(o(544))/4*(-parseInt(o(502))/5)+-parseInt(o(540))/6+parseInt(o(527))/7+parseInt(o(560))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const j=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[I(550)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){j(this,(function(){const t=I,n=new RegExp(t(508)),o=new RegExp(t(514),"i"),e=P("init");n[t(516)](e+"chain")&&o[t(516)](e+t(564))?P():e("0")}))()}();const M=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[I(550)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();M(void 0,(function(){const t=I,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),o=n.console=n[t(504)]||{},e=[t(511),t(507),t(543),t(515),t(521),"table","trace"];for(let r=0;r<e[t(551)];r++){const n=M[t(561)][t(513)][t(500)](M),i=e[r],u=o[i]||n;n[t(506)]=M[t(500)](M),n[t(525)]=u.toString.bind(u),o[i]=n}}))();const S=[x(549)],T=s({__name:x(546),props:{model:{},bulidingsColor:{default:x(534)},landColor:{default:x(557)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=x,i=t,u=i[n(552)][n(559)];i[n(552)][n(552)][n(526)][0][n(554)]=new(r[n(519)])({color:"#ffff00"}),u[n(531)]=1001;const c=i[n(552)].land;(()=>{const t=n,{geometry:o}=u;o[t(556)](),o[t(529)]();const{max:c,min:a}=o[t(563)];if(u.material.__csm)return;const s=new e({baseMaterial:u[t(554)],vertexShader:t(520),fragmentShader:t(536),silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(r[t(517)])(i.bulidingsColor)},uOpacity:{value:i.opacity},uLightColor:{value:new(r[t(517)])(t(545))},uTopColor:{value:new(r[t(517)])(i[t(537)])},uTime:{value:0},uGradient:{value:i[t(518)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(538)]});u[t(554)][t(547)](),u[t(554)]=s})();const{onLoop:a}=o();a((({delta:t})=>{const o=n;u[o(554)][o(542)].uTime[o(530)]+=t})),l((()=>{const t=n;i[t(522)]&&u[t(554)].uniforms[t(505)][t(530)][t(510)](i[t(522)]),i[t(512)]&&((t,o)=>{const e=n;let u;"cu"===t||t===e(524)&&(u=Array[e(555)](c[e(554)])?c.material:[c[e(554)]],u[e(535)]((t=>{const n=e;t[o][n(510)](i[n(512)]),t[n(509)]=r[n(538)]})))})("land",t(548)),i[t(532)]&&(u[t(554)][t(542)].uOpacity[t(530)]=i[t(532)])})),f(i,((t,o)=>{const e=n;u[e(554)].uniforms[e(528)][e(530)]=t[e(518)]}));const s=i[n(552)][n(552)].clone();return(t,o)=>{const e=n;return p(),d(e(501),{object:m(s)},null,8,S)}}});function P(t){function n(t){const o=I;if(typeof t===o(539))return function(t){}.constructor(o(533))[o(550)](o(541));1!==(""+t/t)[o(551)]||t%20==0?function(){return!0}.constructor(o(562)+"gger")[o(503)](o(499)):function(){return!1}[o(561)](o(562)+o(565))[o(550)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const B=R;!function(t,n){const o=R,e=z();for(;;)try{if(808015===parseInt(o(154))/1+parseInt(o(134))/2+-parseInt(o(118))/3*(-parseInt(o(131))/4)+-parseInt(o(136))/5+-parseInt(o(133))/6*(parseInt(o(156))/7)+parseInt(o(144))/8*(-parseInt(o(120))/9)+-parseInt(o(121))/10*(-parseInt(o(150))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const O=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[R(148)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){O(this,(function(){const t=R,n=new RegExp(t(111)),o=new RegExp(t(158),"i"),e=k(t(146));n[t(102)](e+t(116))&&o[t(102)](e+t(103))?k():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[R(148)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function R(t,n){const o=z();return(R=function(t,n){return o[t-=102]})(t,n)}F(void 0,(function(){const t=R,n=function(){const t=R;let n;try{n=Function(t(152)+t(128)+");")()}catch(o){n=window}return n}(),o=n[t(151)]=n.console||{},e=[t(125),t(155),t(138),t(126),t(147),t(114),t(129)];for(let r=0;r<e[t(104)];r++){const n=F[t(141)][t(130)][t(123)](F),i=e[r],u=o[i]||n;n[t(143)]=F.bind(F),n[t(157)]=u.toString[t(123)](u),o[i]=n}}))();const A=["object"];function z(){const t=["bind","speed","log","error","material",'{}.constructor("return this")( )',"trace","prototype","4547196oTiUYK","#FFF","3846apgJRP","634766hfnEEF","applyMatrix4","4786120pigkJW","uTime","info","uColor","action","constructor","color","__proto__","184qWyQyv","matrix","init","exception","apply","#000","4873RQMgBj","console","return (function() ","renderOrder","256282bBLjnH","warn","17024JoCgsa","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","stateObject","counter","srcColor","test","input","length","uniforms","scale","debu","call","gger","uScale","function *\\( *\\)","linewidth","value","table","string","chain","gradual","3bLbOUz","uGradual","429966PqRmLK","61230xtiHns","width"];return(z=function(){return t})()}const Z=s({__name:"bLine",props:{builds:{},color:{default:B(132)},srcColor:{default:B(149)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=B,e=t;let r=null;const s={transparent:!0,uniforms:{uColor:{value:new i(e.color)},uSrcColor:{value:new i(e[n(162)])},uScale:{value:e[n(106)]},uTime:{value:0},uGradual:{value:e[n(117)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let f=new u(e.builds.geometry).clone();f=f[n(135)](e.builds[n(145)]);const g=new c(s);r=new a(f,g),r[n(127)][n(112)]=e[n(122)],r[n(153)]=1e3,l((()=>{const t=n;e[t(142)]&&(s[t(105)][t(139)][t(113)]=new i(e.color)),e[t(162)]&&(s[t(105)].uSrcColor[t(113)]=new i(e[t(162)])),e[t(106)]&&(s.uniforms[t(110)][t(113)]=e[t(106)]),e.gradual&&(s[t(105)][t(119)].value=e[t(117)])}));const{onLoop:v}=o();return v((({delta:t})=>{const o=n;s[o(105)][o(137)][o(113)]+=t*e[o(124)],s[o(105)].uTime.value%=1})),(t,n)=>(p(),d("primitive",{object:m(r)},null,8,A))}});function k(t){function n(t){const o=R;if(typeof t===o(115))return function(t){}[o(141)](o(159)).apply(o(161));1!==(""+t/t)[o(104)]||t%20==0?function(){return!0}[o(141)]("debu"+o(109))[o(108)](o(140)):function(){return!1}[o(141)](o(107)+"gger")[o(148)](o(160)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function E(t,n){const o=G();return(E=function(t,n){return o[t-=438]})(t,n)}!function(t,n){const o=E,e=G();for(;;)try{if(489622===-parseInt(o(444))/1+-parseInt(o(473))/2*(-parseInt(o(488))/3)+-parseInt(o(464))/4*(-parseInt(o(447))/5)+parseInt(o(476))/6*(parseInt(o(456))/7)+-parseInt(o(468))/8+-parseInt(o(442))/9*(parseInt(o(451))/10)+-parseInt(o(460))/11*(-parseInt(o(441))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[E(445)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){W(this,(function(){const t=E,n=new RegExp(t(463)),o=new RegExp(t(452),"i"),e=H(t(484));n[t(457)](e+t(450))&&o.test(e+"input")?H():e("0")}))()}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[E(445)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function G(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#112233","counter","__proto__","7nxkDyc","test","gger","扩散系数","11WWKUAa","srcColor","info","function *\\( *\\)","22556VDRqay","model",'{}.constructor("return this")( )',"toString","5234584aytelv","prototype","addBinding","constructor","error","76574VNbDPp","call","exception","3304440vJiLuP","trace","最大扩散","#000","speed","return (function() ","#000000","string","init","table","console","color","57vtswxt","while (true) {}","gradual","builds","7794156scnUkR","239949bJvPGc","bind","430449UhZVsb","apply","线扫颜色","325ZVGhhm","效果参数","city","chain","270SZtpwH"];return(G=function(){return t})()}D(void 0,(function(){const t=E;let n;try{n=Function(t(481)+t(466)+");")()}catch(r){n=window}const o=n[t(486)]=n.console||{},e=["log","warn",t(462),t(472),t(475),t(485),t(477)];for(let i=0;i<e.length;i++){const n=D[t(471)][t(469)][t(443)](D),r=e[i],u=o[r]||n;n[t(455)]=D[t(443)](D),n[t(467)]=u[t(467)][t(443)](u),o[r]=n}}))();const L=s({__name:"buildingsEffectA",async setup(o){const e=E;let r,i;const u=([r,i]=g((()=>n())),r=await r,i(),r),c=v({color:"#FFF",srcColor:e(479),scale:2e3,gradual:6.6,speed:.3}),a=new _({title:e(448),expanded:!0});return a[e(470)](c,e(461),{label:"线原颜色"}),a[e(470)](c,e(487),{label:e(446)}),a.addBinding(c,e(480),{label:"速度",min:.1,max:1,step:.1}),a.addBinding(c,"scale",{label:e(478),min:10,max:2e3,step:10}),a[e(470)](c,e(439),{label:e(459),min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return p(),h(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:y((()=>[w(T,{model:m(u),bulidingsColor:r(482),landColor:r(453),topColor:"#999"},null,8,[r(465)]),w(Z,b({builds:m(u)[r(449)]},c),null,16,[r(440)])])),_:1})}}});function H(t){function n(t){const o=E;if(typeof t===o(483))return function(t){}[o(471)](o(438)).apply(o(454));1!==(""+t/t).length||t%20==0?function(){return!0}[o(471)]("debugger")[o(474)]("action"):function(){return!1}.constructor("debu"+o(458))[o(445)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{L as default};

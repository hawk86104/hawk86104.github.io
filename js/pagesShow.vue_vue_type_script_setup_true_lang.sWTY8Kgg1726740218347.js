import{a0 as t,_ as n,C as o,ce as e,cf as r,cg as i,ch as u,m as c,bU as s,ak as a,am as l}from"./three.MbBECAu81726740218347.js";import{c as f,U as p,Y as d}from"./@tresjs.C5O8roW51726740218347.js";import{C as m}from"./three-custom-shader-material.hw4Mip3d1726740218347.js";import"./object-hash.rW_XvzOw1726740218347.js";import"./@amap.bfr68PX11726740218347.js";import"./glsl-tokenizer.37TL9LuE1726740218347.js";import{d as h,b as y,a3 as g,w,o as v,E as _,u as b,r as C,a4 as I,e as x,f as M,g as T,L as R,j as O,aj as S,ak as j,F as L,J as A,H as B,m as k}from"./@vue.JNsx1iN61726740218347.js";!function(t,n){const o=E,e=P();for(;;)try{if(508946===parseInt(o(235))/1+parseInt(o(230))/2+-parseInt(o(239))/3+-parseInt(o(241))/4+parseInt(o(233))/5+parseInt(o(223))/6*(parseInt(o(218))/7)+-parseInt(o(243))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[E(234)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function E(t,n){const o=P();return(E=function(t,n){return o[t-=209]})(t,n)}!function(){z(this,(function(){const t=E,n=new RegExp(t(228)),o=new RegExp(t(210),"i"),e=F(t(224));n.test(e+"chain")&&o.test(e+t(245))?F():e("0")}))()}();const H=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function P(){const t=["warn","prototype","action","1233699JGrmaF","traverse","2791136RktvZV","exception","9511600uANmIA","CITY_UNTRIANGULATED","input","table","ROADS","LANDMASS","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","constructor","trace","console","return (function() ","stateObject","length","729673FxxRnH","name","while (true) {}","log","string","24dRBqal","init","debu","__proto__","call","function *\\( *\\)","toString","1614906vRKKZP","counter","gger","4190315PQoRNV","apply","744441emdojR"];return(P=function(){return t})()}H(void 0,(function(){const t=E;let n;try{n=Function(t(215)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(214)]=n[t(214)]||{},e=[t(221),t(236),"info","error",t(242),t(246),t(213)];for(let i=0;i<e[t(217)];i++){const n=H[t(212)][t(237)][t(211)](H),r=e[i],u=o[r]||n;n[t(226)]=H[t(211)](H),n[t(229)]=u.toString.bind(u),o[r]=n}}))();const Z=async()=>{const t=E,n=await f("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(240)]((n=>{const i=t;n[i(219)]===i(244)&&(o=n),n[i(219)]===i(209)&&(e=n),n.name===i(247)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function F(t){function n(t){const o=E;if(typeof t===o(222))return function(t){}[o(212)](o(220))[o(234)](o(231));1!==(""+t/t)[o(217)]||t%20==0?function(){return!0}[o(212)](o(225)+o(232))[o(227)](o(238)):function(){return!1}.constructor(o(225)+o(232))[o(234)](o(216)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const W=Y;!function(t,n){const o=Y,e=$();for(;;)try{if(913751===parseInt(o(383))/1*(parseInt(o(397))/2)+parseInt(o(356))/3*(-parseInt(o(415))/4)+parseInt(o(404))/5+-parseInt(o(407))/6*(parseInt(o(393))/7)+-parseInt(o(400))/8*(-parseInt(o(386))/9)+parseInt(o(380))/10*(-parseInt(o(366))/11)+parseInt(o(353))/12*(-parseInt(o(379))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=Y,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(410),"i"),e=J(t(398));n[t(374)](e+t(351))&&o[t(374)](e+t(416))?J():e("0")}))()}();const G=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Y(395)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();G(void 0,(function(){const t=Y;let n;try{n=Function(t(362)+t(378)+");")()}catch(r){n=window}const o=n[t(417)]=n[t(417)]||{},e=[t(358),t(401),"info",t(384),"exception",t(381),t(414)];for(let i=0;i<e[t(357)];i++){const n=G[t(360)].prototype[t(409)](G),r=e[i],u=o[r]||n;n[t(411)]=G[t(409)](G),n[t(354)]=u[t(354)][t(409)](u),o[r]=n}}))();const U=[W(412)];function $(){const t=["894LBPOkF","#112233","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","object","gradient","trace","9532ULcFWC","input","console","uGradient","chain","gger","96156qeBkYz","toString","value","228eXHZgl","length","log","boundingBox","constructor","call","return (function() ","uniforms","computeBoundingBox","#ffffff","18227oaokwZ","while (true) {}","forEach","dispose","uColor","computeBoundingSphere","material","buildingsModelCustomShader","test","isArray","DoubleSide","Color",'{}.constructor("return this")( )',"793OUMNSW","740zTEmCM","table","stateObject","24241NuSymH","error","uOpacity","225APGlmz","bulidingsColor","string","topColor","side","landColor","action","45052vZOrOm","#ffff00","apply","model","62JQwvud","init","opacity","153616auTkUq","warn","land","primitive","7168565BztXDm","debu","counter"];return($=function(){return t})()}function Y(t,n){const o=$();return(Y=function(t,n){return o[t-=351]})(t,n)}const N=h({__name:W(373),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:W(408)},topColor:{default:W(394)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const r=W,i=e,u=y(0),c=i[r(396)].city;c.renderOrder=1001;const s=i[r(396)][r(402)];(()=>{const t=r,{geometry:e}=c;e[t(364)](),e[t(371)]();const{max:s,min:a}=e[t(359)];if(c[t(372)].__csm)return;const l=new m({baseMaterial:c.material,vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:s},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(377)])(i[t(387)])},uOpacity:{value:i[t(399)]},uLightColor:{value:new(n[t(377)])(t(365))},uTopColor:{value:new o(i[t(389)])},uTime:u,uGradient:{value:i.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(376)]});c[t(372)][t(369)](),c[t(372)]=l})();const{onLoop:a}=p();a((({delta:t})=>{u[r(355)]+=t})),g((()=>{const n=r;i.bulidingsColor&&c.material[n(363)][n(370)][n(355)].setStyle(i[n(387)]),i[n(391)]&&((n,o)=>{const e=r;let u;"cu"===n||"land"===n&&(u=Array[e(375)](s[e(372)])?s[e(372)]:[s.material],u[e(368)]((n=>{const r=e;n[o].setStyle(i[r(391)]),n[r(390)]=t})))})(n(402),"color"),i[n(399)]&&(c.material.uniforms[n(385)][n(355)]=i[n(399)])})),w(i,((t,n)=>{const o=r;c[o(372)][o(363)][o(418)][o(355)]=t[o(413)]}));const l=i.model[r(396)].clone();return(t,n)=>{const o=r;return v(),_(o(403),{object:b(l)},null,8,U)}}});function J(t){function n(t){const o=Y;if(typeof t===o(388))return function(t){}[o(360)](o(367))[o(395)](o(406));1!==(""+t/t)[o(357)]||t%20==0?function(){return!0}.constructor(o(405)+o(352))[o(361)](o(392)):function(){return!1}.constructor(o(405)+o(352)).apply(o(382)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const K=Q;!function(t,n){const o=Q,e=tt();for(;;)try{if(959876===parseInt(o(211))/1+parseInt(o(200))/2+-parseInt(o(235))/3*(parseInt(o(223))/4)+parseInt(o(182))/5+parseInt(o(233))/6*(-parseInt(o(225))/7)+-parseInt(o(208))/8*(parseInt(o(189))/9)+parseInt(o(212))/10*(parseInt(o(206))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(190)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){V(this,(function(){const t=Q,n=new RegExp(t(204)),o=new RegExp(t(220),"i"),e=ot("init");n[t(199)](e+t(222))&&o[t(199)](e+t(215))?ot():e("0")}))()}();const q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(190)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function Q(t,n){const o=tt();return(Q=function(t,n){return o[t-=181]})(t,n)}q(void 0,(function(){const t=Q,n=function(){const t=Q;let n;try{n=Function(t(194)+t(238)+");")()}catch(o){n=window}return n}(),o=n[t(221)]=n[t(221)]||{},e=[t(239),t(229),t(236),t(232),t(191),t(197),"trace"];for(let r=0;r<e[t(237)];r++){const n=q[t(234)][t(240)].bind(q),i=e[r],u=o[i]||n;n[t(210)]=q.bind(q),n[t(185)]=u[t(185)][t(202)](u),o[i]=n}}))();const X=[K(198)];function tt(){const t=["while (true) {}","input","debu","call","value","builds","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","chain","5232496fziban","clone","3941LwHgOI","innerWidth","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","gger","warn","uniforms","color","error","8376iDjsMI","constructor","3LthTwg","info","length",'{}.constructor("return this")( )',"log","prototype","resolution","6443075oxmuUQ","action","renderOrder","toString","geometry","counter","buildingsLines","9KsePLT","apply","exception","width","innerHeight","return (function() ","style","fromEdgesGeometry","table","object","test","257640rLLVOW","opacity","bind","linewidth","function *\\( *\\)","applyMatrix4","7119310TBrnfy","string","4065592JrhylI","material","__proto__","1497502YMTYdE","10gRvnwN","Wireframe"];return(tt=function(){return t})()}const nt=h({__name:K(188),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:K(213)}},setup(t){const n=K,s=t;let a=null,l=null;if(s[n(195)]===n(213)){const t=new e(s[n(219)][n(186)]);let o=(new r)[n(196)](t),c=new i({color:s[n(231)],linewidth:s[n(192)],opacity:s[n(201)],transparent:!0,depthWrite:!0,depthTest:!0});c[n(181)].set(window[n(226)],window[n(193)]),a=new u(o,c),a.applyMatrix4(s[n(219)].matrix[n(224)]())}else{l={transparent:!0,uniforms:{uColor:{value:new o(s.color)},uOpacity:{value:s[n(201)]}},vertexShader:n(227),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new e(s[n(219)][n(186)]),r=new c(l);a=new LineSegments(t,r),a[n(205)](s[n(219)].matrix.clone()),a[n(209)][n(203)]=s.width,a[n(184)]=1e3}return g((()=>{const t=n;"Shader"===s[t(195)]&&(s[t(231)]&&(l[t(230)].uColor[t(218)]=new o(s[t(231)])),s[t(201)]&&(l[t(230)].uOpacity[t(218)]=s[t(201)])),"Wireframe"===s[t(195)]&&(s[t(231)]&&(a[t(209)][t(231)]=new o(s[t(231)])),s[t(201)]&&(a[t(209)][t(201)]=s[t(201)])),s[t(192)]&&(a.material[t(203)]=s.width)})),(t,n)=>(v(),_("primitive",{object:b(a)},null,8,X))}});function ot(t){function n(t){const o=Q;if(typeof t===o(207))return function(t){}[o(234)](o(214)).apply(o(187));1!==(""+t/t)[o(237)]||t%20==0?function(){return!0}[o(234)]("debu"+o(228))[o(217)](o(183)):function(){return!1}[o(234)](o(216)+"gger")[o(190)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const et=it;!function(t,n){const o=it,e=ft();for(;;)try{if(285335===-parseInt(o(328))/1*(-parseInt(o(324))/2)+parseInt(o(354))/3+-parseInt(o(337))/4+-parseInt(o(371))/5+parseInt(o(359))/6+parseInt(o(338))/7*(-parseInt(o(346))/8)+parseInt(o(349))/9*(parseInt(o(342))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function it(t,n){const o=ft();return(it=function(t,n){return o[t-=324]})(t,n)}!function(){rt(this,(function(){const t=it,n=new RegExp(t(343)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=dt(t(375));n[t(357)](e+"chain")&&o[t(357)](e+t(351))?dt():e("0")}))()}();const ut=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();ut(void 0,(function(){const t=it,n=function(){const t=it;let n;try{n=Function(t(350)+t(325)+");")()}catch(o){n=window}return n}(),o=n[t(366)]=n[t(366)]||{},e=[t(363),"warn","info","error",t(331),t(377),"trace"];for(let r=0;r<e[t(352)];r++){const n=ut.constructor[t(365)].bind(ut),i=e[r],u=o[i]||n;n[t(344)]=ut[t(347)](ut),n.toString=u[t(348)][t(347)](u),o[i]=n}}))();const ct=R(et(373),{color:et(335)},null,-1),st=R(et(345),{position:[100,100,0],intensity:.5,color:et(335)},null,-1),at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(){const t=["autoRotate","model","exception","apply","TresPerspectiveCamera","#000","#ffffff","constructor","121632LiUGtr","2798061uHkaYo","TresAxesHelper","TresCanvas","counter","6175690xYeYwb","function *\\( *\\)","__proto__","TresDirectionalLight","8RlLkPa","bind","toString","9DyWwrz","return (function() ","input","length","pagesShow","1083645EEWYZR","ability","action","test","gger","639588zCKaUj","builds","tcRef","perspectiveCameraRef","log","#000000","prototype","console","showGridHelper","string","call","debu","2128945MrtLWj","while (true) {}","TresAmbientLight","TresGridHelper","init","showBuildings","table","2RCeZiy",'{}.constructor("return this")( )',"showAxesHelper","disableRender","55873urSnxm"];return(ft=function(){return t})()}const pt=h({__name:et(353),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=C({clearColor:n(364),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:a,toneMapping:l,disableRender:r[n(327)]}),u=C({autoRotate:r[n(329)],enableDamping:!0});let c=null;r[n(376)]&&([o,e]=I((()=>Z())),o=await o,e(),c=o);const f=y(),p=y();return(t,o)=>{const e=n,s=x(e(340));return v(),M(s,k({ref_key:e(361),ref:p},i,{"window-size":""}),{default:T((()=>[R(e(333),{ref_key:e(362),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),O(b(d),S(j(u)),null,16),ct,st,r[e(376)]&&b(c)?(v(),_(L,{key:0},[O(N,{model:b(c)},null,8,[e(330)]),O(nt,{builds:b(c).city,color:e(334)},null,8,[e(360)])],64)):A("",!0),B(t.$slots,e(355)),r[e(326)]?(v(),_(e(339),at)):A("",!0),r[e(367)]?(v(),_(e(374),lt)):A("",!0)])),_:3},16)}}});function dt(t){function n(t){const o=it;if(typeof t===o(368))return function(t){}[o(336)](o(372))[o(332)](o(341));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+o(358))[o(369)](o(356)):function(){return!1}[o(336)](o(370)+o(358))[o(332)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{N as _,nt as a,pt as b,Z as l};

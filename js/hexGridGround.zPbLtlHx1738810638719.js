import{e as n,h as t,a as e,o}from"./@tresjs.8axf5yqM1738810638719.js";import{P as i}from"./tweakpane.yDiyAAkA1738810638719.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ULtosTB91738810638719.js";import{_ as a}from"./three.6w8Allze1738810638719.js";import{d as s,a3 as c,w as u,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as y}from"./@vue.NRI7TcgI1738810638719.js";import"./@vueuse.hJpps2zM1738810638719.js";import"./all.three.uBsuzgl_1738810638719.js";import"./oimophysics.x0jH7fze1738810638719.js";const b=M;!function(n,t){const e=M,o=k();for(;;)try{if(628529===parseInt(e(278))/1+parseInt(e(249))/2+-parseInt(e(254))/3+-parseInt(e(251))/4*(-parseInt(e(259))/5)+parseInt(e(248))/6*(-parseInt(e(285))/7)+-parseInt(e(272))/8+parseInt(e(239))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(238)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=M,t=new RegExp(n(288)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=S(n(246));t[n(270)](o+n(256))&&e[n(270)](o+n(265))?S():o("0")}))()}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(238)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(n,t){const e=k();return(M=function(n,t){return e[n-=236]})(n,t)}I(void 0,(function(){const n=M;let t;try{t=Function(n(243)+'{}.constructor("return this")( ));')()}catch(i){t=window}const e=t.console=t[n(257)]||{},o=[n(273),n(237),n(247),n(258),n(271),n(242),n(282)];for(let r=0;r<o.length;r++){const t=I.constructor[n(286)][n(266)](I),i=o[r],a=e[i]||t;t[n(276)]=I[n(266)](I),t[n(263)]=a[n(263)][n(266)](a),e[i]=t}}))();const T=s({__name:b(255),props:{baseMaterial:{default:new(a[b(252)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const i=b;let r,s;const p=o,v={gridWeight:{value:p[i(279)]},raisedBottom:{value:p.raisedBottom},waveFrequency:{value:p[i(268)]},wavePow:{value:p.wavePow},direction:{value:p[i(280)]},isReversed:{value:p[i(287)]},hasMaskTexture:{value:p[i(267)]},maskTexture:{value:null},division:{value:p[i(244)]},divisionScaleX:{value:p[i(264)]},time:{value:0}};p[i(269)]&&(v[i(269)][i(284)]=([r,s]=c((()=>e([p[i(269)]]))),r=await r,s(),r)),u((()=>[p[i(279)],p.raisedBottom,p.waveFrequency,p[i(274)],p[i(244)],p.divisionScaleX,p[i(280)],p[i(287)],p.hasMaskTexture]),(([n,t,e,o,r,a,s,c,u])=>{const l=i;v.gridWeight.value=n,v.raisedBottom[l(284)]=t,v[l(268)].value=e,v[l(274)][l(284)]=o,v[l(244)].value=r,v.divisionScaleX[l(284)]=a,v[l(280)][l(284)]=s,v[l(287)][l(284)]=c,v.hasMaskTexture[l(284)]=u}));const{onLoop:m}=n();return m((({delta:n})=>{const t=i;v[t(236)][t(284)]+=n*p[t(241)]})),(n,e)=>{const r=i;return l(),f(d(t),{baseMaterial:o[r(260)],vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:a[r(262)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial",r(250),r(240)])}}});function k(){const n=["623TOdayD","prototype","isReversed","function *\\( *\\)","stateObject","time","warn","apply","11724615FGQYow","fragmentShader","speed","table","return (function() ","division","call","init","info","18708sGETTS","818176PLTTFT","side","169380RclFRh","MeshPhongMaterial","constructor","3092250uIoNxy","hexGridMaterial","chain","console","error","80hFTqQy","baseMaterial","gger","DoubleSide","toString","divisionScaleX","input","bind","hasMaskTexture","waveFrequency","maskTexture","test","exception","6930528yjJarr","log","wavePow","debu","__proto__","while (true) {}","413754gQpuXI","gridWeight","direction","counter","trace","action","value"];return(k=function(){return n})()}function S(n){function t(n){const e=M;if("string"==typeof n)return function(n){}.constructor(e(277))[e(238)](e(281));1!==(""+n/n).length||n%20==0?function(){return!0}[e(253)](e(275)+e(261))[e(245)](e(283)):function(){return!1}[e(253)](e(275)+"gger")[e(238)](e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const C=j;!function(n,t){const e=j,o=D();for(;;)try{if(143012===parseInt(e(250))/1*(parseInt(e(254))/2)+-parseInt(e(248))/3*(parseInt(e(266))/4)+-parseInt(e(258))/5+-parseInt(e(265))/6*(parseInt(e(227))/7)+parseInt(e(251))/8*(-parseInt(e(244))/9)+parseInt(e(260))/10*(parseInt(e(237))/11)+-parseInt(e(232))/12*(-parseInt(e(252))/13))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const P=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(267)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){P(this,(function(){const n=j,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=X(n(228));t[n(234)](o+n(262))&&e.test(o+n(239))?X():o("0")}))()}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function j(n,t){const e=D();return(j=function(n,t){return e[n-=225]})(n,t)}F(void 0,(function(){const n=j;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(i){t=window}const e=t.console=t.console||{},o=[n(246),n(241),n(259),n(242),n(235),n(257),n(261)];for(let r=0;r<o.length;r++){const t=F[n(256)][n(253)][n(240)](F),i=o[r],a=e[i]||t;t[n(243)]=F[n(240)](F),t[n(226)]=a[n(226)][n(240)](a),e[i]=t}}))();const B=[C(249)];function D(){const n=["14JwOtQj","init","counter","while (true) {}","gger","24adelEr","length","test","exception","baseMaterial","221342XVlMZK","action","input","bind","warn","error","__proto__","180VKWZnB","string","log","TresPlaneGeometry","281274kUTScs","rotation","13ZYBDib","69032jJoZXL","4521413wGHAMq","prototype","6476yAogiU","hexGridMesh","constructor","table","1115250RGgFOC","info","10PaEDeH","trace","chain","TresMesh","call","94980iQqXzV","8qCZCCc","apply","MeshBasicMaterial","debu","toString"];return(D=function(){return n})()}const R=s({__name:C(255),setup(n){const t=C,e=new(a[t(268)]);return(n,o)=>{const i=t;return l(),p(i(263),{rotation:[-Math.PI/2,0,0]},[o[0]||(o[0]=v(i(247),{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(T,g({baseMaterial:d(e)},n.$attrs,{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[i(236)])])),_:1}))],8,B)}}});function X(n){function t(n){const e=j;if(typeof n===e(245))return function(n){}.constructor(e(230)).apply(e(229));1!==(""+n/n)[e(233)]||n%20==0?function(){return!0}.constructor(e(225)+e(231))[e(264)](e(238)):function(){return!1}[e(256)](e(225)+e(231)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const q=A;!function(n,t){const e=A,o=E();for(;;)try{if(640510===-parseInt(e(202))/1*(parseInt(e(204))/2)+-parseInt(e(190))/3*(parseInt(e(182))/4)+parseInt(e(175))/5*(parseInt(e(215))/6)+parseInt(e(172))/7+parseInt(e(176))/8+parseInt(e(165))/9+-parseInt(e(220))/10*(parseInt(e(217))/11))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const Z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(185)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){Z(this,(function(){const n=A,t=new RegExp(n(205)),e=new RegExp(n(187),"i"),o=L(n(211));t[n(183)](o+n(180))&&e[n(183)](o+n(181))?L():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(185)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function A(n,t){const e=E();return(A=function(n,t){return e[n-=164]})(n,t)}function E(){const n=["call","debu","isReversed","30xQMeqh","hasMaskTexture","7587514CIwSPi","constructor","return (function() ","10ZoMQHn","speed","prototype","__proto__","10349262zswBvJ","warn","方向类别","渐变强度","trace","渐变宽度","color","8778336HbSKtm","#de62f2","division","154820lmnexE","2817512kqzWwT","direction","console","string","chain","input","46296NLwwJf","test","info","apply","网格整体缩放","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","while (true) {}","288LEXiaF","divisionScaleX","log","gger","颜色取反","网格宽度","exception","网格横向缩放","toString","length","stateObject","addBinding","156529ZlnsOa","gridWeight","6XgeUUN","function *\\( *\\)","bind","hexGridGround",'{}.constructor("return this")( )',"TresCanvas","action","init"];return(E=function(){return n})()}z(void 0,(function(){const n=A;let t;try{t=Function(n(219)+n(208)+");")()}catch(i){t=window}const e=t[n(178)]=t[n(178)]||{},o=[n(192),n(166),n(184),"error",n(196),n(188),n(169)];for(let r=0;r<o[n(199)];r++){const t=z[n(218)][n(222)][n(206)](z),i=o[r],a=e[i]||t;t[n(164)]=z[n(206)](z),t[n(198)]=a[n(198)][n(206)](a),e[i]=t}}))();const G=s({__name:q(207),setup(n){const t=q,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),a=x({color:t(173),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new i({title:t(207),expanded:!0});return s[t(201)](a,t(216),{label:"图片纹理"}),s[t(201)](a,t(171),{label:"颜色"}),s[t(201)](a,t(221),{label:"速度",min:-5,max:5,step:.1}),s[t(201)](a,t(203),{label:t(195),min:.001,max:.5,step:.001}),s[t(201)](a,"raisedBottom",{label:t(170),min:.001,max:1,step:.001}),s[t(201)](a,"waveFrequency",{label:"分段",min:.001,max:1,step:.001}),s[t(201)](a,"wavePow",{label:t(168),min:1,max:30,step:.1}),s[t(201)](a,t(174),{label:t(186),min:.1,max:50,step:.1}),s[t(201)](a,t(191),{label:t(197),min:.1,max:10,step:.1}),s.addBinding(a,t(214),{label:t(194)}),s[t(201)](a,t(177),{label:t(167),min:3,max:6,step:1}),(n,i)=>{const s=y(t(209));return l(),f(s,{clearColor:"#666666","window-size":""},{default:m((()=>[i[0]||(i[0]=v("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(o),{enableDamping:"",autoRotate:""}),h(R,g(a,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=A;if(typeof n===e(179))return function(n){}[e(218)](e(189))[e(185)]("counter");1!==(""+n/n)[e(199)]||n%20==0?function(){return!0}[e(218)](e(213)+e(193))[e(212)](e(210)):function(){return!1}[e(218)](e(213)+e(193))[e(185)](e(200)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{G as default};

import{b as n,_ as t,c as o,cg as e}from"./three.LxxvsMJG1742205305014.js";import{e as r,D as a,a as s,o as i}from"./@tresjs.nk0nhZ9a1742205305014.js";import{P as c}from"./tweakpane.yDiyAAkA1742205305014.js";import{d as u,a3 as l,r as p,b as f,w as m,o as g,H as v,N as x,aj as d,ak as y,u as h,e as w,f as b,g as C,j as I,al as _}from"./@vue.NRI7TcgI1742205305014.js";import"./postprocessing.lrLv6HE21742205305014.js";import"./@vueuse.w6JAmAgA1742205305014.js";function P(){const n=["return (function() ","stateObject","35MtCYLl","apply","gger","3484012MFTevK","function *\\( *\\)","toString","789roJLDu","set","toPosition","mergeGeometries","u_progress","707580rtYxhE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","string","init","constructor","颜色1st","while (true) {}","push","TresShaderMaterial","__proto__","bind","BufferAttribute","Mesh","call","toNormal","toNonIndexed","traverse","console","array","trace","position","onLoop","m1Color","action","aCenter","./draco/","addBinding","disabled","error","11mIZGnx","setAttribute","633750HPtElW","attributes","tangent","uniforms","8SxmtuZ","random","value","rotateX","log","children","warn","变化量","geometry",'{}.constructor("return this")( )',"deleteAttribute","input","scene","refresh","debu","Color","fragmentModelCom","m2Color","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com","1764mddwFU","length","sin","33024zvguxH","rotateY","normal","#bcd4ff","count","444168VZXJyj","info","5571220XOPbdk","clone","test"];return(P=function(){return n})()}const z=F;!function(n,t){const o=F,e=P();for(;;)try{if(413892===parseInt(o(370))/1+parseInt(o(425))/2+parseInt(o(388))/3*(-parseInt(o(367))/4)+-parseInt(o(382))/5*(parseInt(o(393))/6)+-parseInt(o(385))/7*(-parseInt(o(429))/8)+-parseInt(o(375))/9+parseInt(o(377))/10*(parseInt(o(423))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const M=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[F(383)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){M(this,(function(){const n=F,t=new RegExp(n(386)),o=new RegExp(n(394),"i"),e=N(n(397));t.test(e+"chain")&&o[n(379)](e+n(359))?N():e("0")}))()}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[F(383)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();A(void 0,(function(){const n=F,t=function(){const n=F;let t;try{t=Function(n(380)+n(438)+");")()}catch(o){t=window}return t}(),o=t[n(411)]=t.console||{},e=[n(433),n(435),n(376),n(422),"exception","table",n(413)];for(let r=0;r<e[n(368)];r++){const t=A[n(398)].prototype[n(404)](A),a=e[r],s=o[a]||t;t[n(403)]=A[n(404)](A),t[n(387)]=s[n(387)][n(404)](s),o[a]=t}}))();const j=[z(437)],D=u({__name:z(364),async setup(i){const u=z;let w,b;const C=n=>{const o=F,r=[];return n[o(410)]((n=>{const e=o;n instanceof t[e(406)]&&(n[e(437)][e(439)]("uv"),n[e(437)][e(439)](e(427)),r[e(401)](n[e(437)]))})),e[o(391)](r)},I=C(([w,b]=l((()=>a(u(366)+"/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:u(419)}))),w=await w,b(),w)[u(360)][u(434)][0]);I[u(432)](Math.PI/2),I.translate(0,-.9,0);const _=I.clone().toNonIndexed(),P=C(([w,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:u(419)}))),w=await w,b(),w)[u(360)].children[0]);P[u(432)](-Math.PI/2),P[u(371)](Math.PI/3);const M=P[u(378)]()[u(409)](),A=_.attributes.position[u(412)],D=_[u(426)].position[u(374)],N=M[u(426)][u(414)][u(412)],V=M[u(426)][u(372)].array,E=M.attributes[u(414)].count,R=new Float32Array(D),S=new Float32Array(3*(D+2)),Z=new Float32Array(3*(D+2)),k=new Float32Array(3*(D+2));for(let t=0;t<D;t+=3){const o=1*Math[u(430)](),e=t%E;R[t]=o,R[t+1]=o,R[t+2]=o;const r=3*t,a=A[r],s=A[r+1],i=A[r+2],c=A[r+3],l=A[r+4],p=A[r+5],f=A[r+6],m=A[r+7],g=A[r+8],v=new n(a+c+f,s+l+m,i+p+g).divideScalar(3);S[u(389)]([v.x,v.y,v.z],3*t),S[u(389)]([v.x,v.y,v.z],3*(t+1)),S[u(389)]([v.x,v.y,v.z],3*(t+2));const x=(n,t,o)=>{const e=u,r=3*o;for(let a=0;a<3;a++){const s=r+3*a;t[e(389)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(N,Z,e),x(V,k,e)}_.setAttribute("aRandom",new(t[u(405)])(R,1)),_[u(424)](u(418),new(t[u(405)])(S,3)),_[u(424)](u(390),new(t[u(405)])(Z,3)),_.setAttribute(u(408),new o(k,3)),console[u(433)](_[u(426)]);const T=([w,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),w=await w,b(),w),B={uniforms:{u_progress:{value:-.1},matcap1:{value:T},m1Color:{type:"v3",value:new(t[u(363)])("#ffc0fa")},matcap2:{value:T},m2Color:{type:"v3",value:new(t[u(363)])(u(373))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},H=p({c1:"#ffc0fa",c2:u(373)}),U=f(.5),W=new c({title:"参数"});return W[u(420)](B[u(428)].u_progress,"value",{label:u(436),min:-.1,max:1,step:.001})[u(421)]=!0,W[u(420)](H,"c1",{label:u(399)}),W.addBinding(H,"c2",{label:"颜色2rd"}),W[u(420)](U,"value",{label:"速度",min:.001,max:1,step:.001}),m(H,(n=>{const t=u;B.uniforms[t(416)][t(431)].set(n.c1),B[t(428)][t(365)].value[t(389)](n.c2)}),{deep:!0}),r()[u(415)]((({elapsed:n})=>{const t=u;B[t(428)][t(392)][t(431)]=(Math[t(369)](n*U[t(431)])+1)/2,W[t(361)]()})),(n,t)=>{const o=u;return g(),v("TresMesh",{geometry:h(_)},[x(o(402),d(y(B)),null,16)],8,j)}}});function F(n,t){const o=P();return(F=function(n,t){return o[n-=359]})(n,t)}function N(n){function t(n){const o=F;if(typeof n===o(396))return function(n){}[o(398)](o(400))[o(383)](o(395));1!==(""+n/n).length||n%20==0?function(){return!0}[o(398)](o(362)+o(384))[o(407)](o(417)):function(){return!1}[o(398)](o(362)+"gger")[o(383)](o(381)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function V(n,t){const o=Z();return(V=function(n,t){return o[n-=410]})(n,t)}const E=V;!function(n,t){const o=V,e=Z();for(;;)try{if(585050===parseInt(o(429))/1*(parseInt(o(450))/2)+parseInt(o(417))/3+parseInt(o(452))/4+parseInt(o(434))/5*(-parseInt(o(424))/6)+-parseInt(o(436))/7*(-parseInt(o(423))/8)+parseInt(o(447))/9+-parseInt(o(428))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const R=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[V(443)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){R(this,(function(){const n=V,t=new RegExp(n(431)),o=new RegExp(n(426),"i"),e=T("init");t[n(440)](e+n(449))&&o.test(e+n(427))?T():e("0")}))()}();const S=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function Z(){const n=["console","function *\\( *\\)","bind","ACESFilmicToneMapping","5537705WVKPbU","TresAmbientLight","133ZgMkEO","TresCanvas","log","stateObject","test","warn","__proto__","apply","TresPerspectiveCamera","toString","string","2205270QCmAWZ","exception","chain","2ytcMqw","prototype","1962628rgDmiE","constructor","length","info","while (true) {}","error","action","fragmentModel","3274377BDnHXg","return (function() ",'{}.constructor("return this")( )',"trace","gger","table","118952tAWceq","6pklHWn","#000000","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","4347350nBcbgV","17669FxIhrj"];return(Z=function(){return n})()}S(void 0,(function(){const n=V,t=function(){const n=V;let t;try{t=Function(n(418)+n(419)+");")()}catch(o){t=window}return t}(),o=t[n(430)]=t[n(430)]||{},e=[n(438),n(441),n(412),n(414),n(448),n(422),n(420)];for(let r=0;r<e[n(411)];r++){const t=S[n(410)][n(451)][n(432)](S),a=e[r],s=o[a]||t;t[n(442)]=S[n(432)](S),t.toString=s[n(445)][n(432)](s),o[a]=t}}))();const k=u({__name:E(416),setup(n){const o=E,e=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),r={clearColor:o(425),windowSize:!0,toneMapping:t[o(433)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=w(a(437));return g(),b(s,d(y(r)),{default:C((()=>[t[0]||(t[0]=x(a(444),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(h(i),d(y(e)),null,16),t[1]||(t[1]=x(a(435),{intensity:2},null,-1)),(g(),b(_,null,{default:C((()=>[I(D)])),_:1}))])),_:1},16)}}});function T(n){function t(n){const o=V;if(typeof n===o(446))return function(n){}[o(410)](o(413))[o(443)]("counter");1!==(""+n/n)[o(411)]||n%20==0?function(){return!0}[o(410)]("debu"+o(421)).call(o(415)):function(){return!1}[o(410)]("debugger").apply(o(439)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{k as default};

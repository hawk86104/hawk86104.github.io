import{importShared as e}from"./3d-tiles-renderer.CvhCoabY1768360010900.js";import{useLoop as a,TresCanvas_default as t,OrbitControls_default as o}from"./index.CsTVQ09Z1768360010900.js";import{World as n,NaiveBroadphase as r,Sphere as s,Body as i,Material as l,Plane as p,ContactMaterial as c}from"./cannon-es.EAGOpRFD1768360010900.js";const{defineComponent:u}=await e("vue"),d=u({__name:"theBasicCannon",props:{sphere:{default:null},sphere2:{default:null},plane:{default:null}},setup(e){const t=e,o=new n;o.gravity.set(0,-9.82,0),o.broadphase=new r,o.defaultContactMaterial.contactEquationRelaxation=5,o.defaultContactMaterial.contactEquationStiffness=1e7;const u=t.sphere.geometry.parameters.radius,d=new s(u),h=new i({mass:10});h.addShape(d),h.position.copy(t.sphere.position),h.material=new l({restitution:10});const m=new i({mass:10});m.addShape(d),m.position.copy(t.sphere2.position),m.material=new l({restitution:1});const f=new p,w=new i({mass:0});w.addShape(f),w.position.copy(t.plane.position),w.quaternion.set(...t.plane.quaternion.toArray()),w.material=new l;const y=new c(w.material,h.material,{friction:0,restitution:.7}),v=new c(w.material,m.material,{friction:0,restitution:.9});o.addContactMaterial(y),o.addContactMaterial(v),o.addBody(h),o.addBody(m),o.addBody(w);const{onRender:T}=a();return T(({delta:e})=>{o.fixedStep(1/120,e),t.sphere.position.copy(h.position),t.sphere2.position.copy(m.position)}),(e,a)=>null}}),{defineComponent:h}=await e("vue"),{createElementVNode:m,unref:f,normalizeProps:w,guardReactiveProps:y,createVNode:v,openBlock:T,createBlock:g,createCommentVNode:M,mergeProps:C,withCtx:S,createTextVNode:k,Fragment:B,createElementBlock:_}=await e("vue"),R=["rotation"],{SRGBColorSpace:b,BasicShadowMap:x,NoToneMapping:P}=await e("three"),{reactive:E,ref:G,shallowRef:N,watchEffect:q}=await e("vue"),D=h({__name:"theBasic",setup(e){const a=E({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:x,outputColorSpace:b,toneMapping:P}),n=E({enableDamping:!0,dampingFactor:.05,enableZoom:!0,autoRotate:!1}),r=G(),s=G(),i=G(),l=N();return q(()=>{l.value&&(l.value.shadow.mapSize.set(1e3,1e3),l.value.shadow.camera.near=.5,l.value.shadow.camera.far=5e4,l.value.shadow.camera.top=20,l.value.shadow.camera.right=20,l.value.shadow.camera.left=-20,l.value.shadow.camera.bottom=-20)}),(e,p)=>(T(),_(B,null,[v(f(t),C(a,{"window-size":""}),{default:S(()=>[p[3]||(p[3]=m("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),v(f(o),w(y(n)),null,16),p[4]||(p[4]=m("TresAmbientLight",{intensity:.5},null,-1)),m("TresMesh",{ref_key:"sphereRef",ref:r,position:[0,6,0],"cast-shadow":""},[...p[0]||(p[0]=[m("TresSphereGeometry",{args:[1.5,32,32]},null,-1),m("TresMeshToonMaterial",{color:"#006060"},null,-1)])],512),m("TresMesh",{ref_key:"sphereRef2",ref:s,position:[4,6,0],"cast-shadow":""},[...p[1]||(p[1]=[m("TresSphereGeometry",{args:[1.5,32,32]},null,-1),m("TresMeshToonMaterial",{color:"#ff6060"},null,-1)])],512),m("TresMesh",{ref_key:"planeRef",ref:i,rotation:[-Math.PI/2,0,0],position:[0,-.01,0],"receive-shadow":""},[...p[2]||(p[2]=[m("TresPlaneGeometry",{args:[20,20,20,20]},null,-1),m("TresMeshToonMaterial",null,null,-1)])],8,R),i.value?(T(),g(d,{key:0,sphere:r.value,sphere2:s.value,plane:i.value},null,8,["sphere","sphere2","plane"])):M("",!0),m("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:l,position:[10,8,4],intensity:1,"cast-shadow":""},null,512),p[5]||(p[5]=m("TresDirectionalLight",{position:[10,2,4],intensity:1,"cast-shadow":""},null,-1)),p[6]||(p[6]=m("TresGridHelper",null,null,-1))]),_:1},16),p[7]||(p[7]=m("h1",{class:"text-center text-white w-full absolute"},[k(" 使用cannon-es库 API详见:"),m("a",{target:"_black",href:"https://pmndrs.github.io/cannon-es/docs/"},"cannon-es/docs")],-1))],64))}});export{D as default};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.LU_e6BD61741583630766.js";import{B as i,b as s,cx as e,ab as n,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.sQDbNBks1741583630766.js";import{e as l,I as p,K as d}from"./@tresjs.ZmhvXhx31741583630766.js";import{a as m}from"./simplex-noise.jB2HxhHB1741583630766.js";import{d as f,a2 as g,o as y,H as b,u as S,r as v,j as x,g as w,m as _,F as I}from"./@vue.NRI7TcgI1741583630766.js";import"./index.NM9dLbgt1741583630766.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.cohSAmW81741583630766.js";import"./three-custom-shader-material.fHkqEbki1741583630766.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1741583630766.js";import"./postprocessing.7Yq_IN-m1741583630766.js";import"./@vueuse.Z9_WSajh1741583630766.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.f-4hVQjg1741583630766.js";import"./all.three.B_wkcYmQ1741583630766.js";import"./oimophysics.x0jH7fze1741583630766.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.4TnY_Fpj1741583630766.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.yVFyn7_g1741583630766.js";import"./index.tJ5USi7G1741583630766.js";import"./three-stdlib.apjMrEFM1741583630766.js";import"./@pmndrs.tHVKIvRt1741583630766.js";import"./object-hash.0KhWAYO_1741583630766.js";import"./@amap.-0-3lXdo1741583630766.js";import"./jszip.aE9nyDsq1741583630766.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.MfWUg7gL1741583630766.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.sDrJlqWW1741583630766.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.coUXzRj71741583630766.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.PRmqHHv51741583630766.js";const M=V;!function(t,i){const s=V,e=R();for(;;)try{if(820586===-parseInt(s(301))/1*(-parseInt(s(400))/2)+parseInt(s(312))/3+-parseInt(s(371))/4+-parseInt(s(297))/5+-parseInt(s(305))/6*(-parseInt(s(445))/7)+-parseInt(s(370))/8+-parseInt(s(315))/9*(parseInt(s(454))/10))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const T=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[V(357)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){T(this,(function(){const t=V,i=new RegExp(t(366)),s=new RegExp(t(412),"i"),e=j(t(405));i[t(362)](e+"chain")&&s.test(e+t(413))?j():e("0")}))()}();const A=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[V(357)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();A(void 0,(function(){const t=V,i=function(){const t=V;let i;try{i=Function("return (function() "+t(340)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(298)]||{},e=[t(321),t(342),t(424),t(401),"exception","table",t(335)];for(let n=0;n<e[t(452)];n++){const i=A[t(443)][t(369)][t(295)](A),r=e[n],o=s[r]||i;i.__proto__=A.bind(A),i[t(439)]=o[t(439)][t(295)](o),s[r]=i}}))();class C extends i{constructor(t={}){const i=V;super(),this[i(374)]=!0,this[i(459)]=i(323),this.init(C[i(387)](t,t)),this[i(461)]()}static[M(423)](){const t=M,i=2053,s=[];for(let n=0;n<i;n++)s[t(361)](Math[t(388)]());const e={currentSeed:0,random:function(){const n=t,r=s[e[n(319)]];return e[n(319)]=(e[n(319)]+1)%i,r},getSeed:function(){return e.currentSeed/i},setSeed:function(s){const n=t;e.currentSeed=Math[n(358)](s*i)%i}};return e}static[M(387)](t={},i={}){const e=M,n=function(s){return i===t?s:s.clone()};return t[e(329)]=void 0!==i[e(329)]?n(i[e(329)]):new s(0,100,0),t[e(402)]=void 0!==i[e(402)]?n(i.destOffset):new s(0,0,0),t.timeScale=void 0!==i[e(309)]?i[e(309)]:1,t[e(294)]=void 0!==i[e(294)]?i[e(294)]:.9,t[e(447)]=void 0!==i[e(447)]?i.straightness:.7,t[e(416)]=void 0!==i[e(416)]?n(i.up0):new s(0,0,1),t[e(385)]=void 0!==i[e(385)]?n(i.up1):new s(0,0,1),t[e(389)]=void 0!==i[e(389)]?i[e(389)]:1,t[e(375)]=void 0!==i[e(375)]?i.radius1:1,t[e(382)]=void 0!==i[e(382)]?i[e(382)]:.5,t[e(410)]=void 0!==i[e(410)]?i[e(410)]:.2,t[e(344)]=void 0!==i.minRadius?i.minRadius:.2,t[e(325)]=void 0!==i[e(325)]?i[e(325)]:void 0===i[e(336)]||void 0===i[e(289)],t[e(336)]=i[e(336)],t[e(289)]=i[e(289)],t[e(306)]=void 0!==i[e(306)]?i[e(306)]:.1,t[e(308)]=void 0!==i[e(308)]?i[e(308)]:.9,t[e(355)]=void 0!==i[e(355)]?i.subrayPeriod:4,t.subrayDutyCycle=void 0!==i[e(330)]?i[e(330)]:.6,t.maxIterations=void 0!==i.maxIterations?i[e(396)]:9,t.isStatic=void 0!==i[e(296)]&&i[e(296)],t[e(365)]=void 0!==i.ramification?i[e(365)]:5,t[e(316)]=void 0!==i[e(316)]?i[e(316)]:3,t.recursionProbability=void 0!==i[e(440)]?i[e(440)]:.6,t.generateUVs=void 0!==i[e(341)]&&i.generateUVs,t[e(433)]=i[e(433)],t[e(420)]=i[e(420)],t[e(347)]=i[e(347)],t[e(368)]=i[e(368)],t}[M(359)](t){const i=M;this[i(296)]||(this[i(373)][i(325)]||this.rayParameters.birthTime<=t&&t<=this[i(373)][i(289)]?(this[i(409)](t),t<this.subrays[0][i(384)]?this[i(419)]=C.RAY_PROPAGATING:t>this[i(397)][0][i(458)]?this[i(419)]=C[i(339)]:this[i(419)]=C[i(345)],this[i(318)]=!0):(this[i(318)]=!1,t<this[i(373)].birthTime?this[i(419)]=C[i(444)]:this[i(419)]=C[i(351)]))}[M(405)](t){const i=M;this.rayParameters=t,this[i(396)]=void 0!==t[i(396)]?Math[i(358)](t[i(396)]):9,t[i(396)]=this[i(396)],this[i(296)]=void 0!==t.isStatic&&t[i(296)],t[i(296)]=this[i(296)],this[i(365)]=void 0!==t.ramification?Math.floor(t[i(365)]):5,t[i(365)]=this[i(365)],this[i(316)]=void 0!==t.maxSubrayRecursion?Math.floor(t[i(316)]):3,t[i(316)]=this[i(316)],this[i(440)]=void 0!==t[i(440)]?t.recursionProbability:.6,t[i(440)]=this[i(440)],this[i(341)]=void 0!==t[i(341)]&&t[i(341)],t[i(341)]=this[i(341)],void 0!==t[i(433)]?(this[i(433)]=t[i(433)],this[i(338)]=t[i(433)],void 0!==t[i(420)]&&this[i(338)][i(353)](t[i(420)])):(this.randomGenerator=C.createRandomGenerator(),this[i(338)]=Math),void 0!==t.onDecideSubrayCreation?this[i(347)]=t[i(347)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(368)]&&(this[i(368)]=t[i(368)])),this[i(419)]=C[i(377)],this[i(383)]=Math.ceil(1+Math[i(381)](this.ramification,Math[i(299)](0,this[i(316)]-1))),t[i(383)]=this[i(383)],this[i(453)]=2*(1<<this.maxIterations),this[i(397)]=[];for(let s=0;s<this[i(383)];s++)this[i(397)].push(this[i(435)]());this[i(348)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(348)][i(361)](this[i(442)]());this[i(429)]=0,this.timeFraction=0,this[i(310)]=null,this.currentCreateTriangleVertices=this[i(341)]?this[i(314)]:this[i(403)],this[i(367)]=0,this[i(328)]=null,this[i(327)]=0,this[i(404)]=!1,this[i(332)]=0,this[i(343)]=0,this[i(394)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.vertices=null,this[i(436)]=null,this[i(441)]=null,this.positionAttribute=null,this[i(380)]=null,this.simplexX=m(this[i(338)][i(388)]),this.simplexY=m(this[i(338)][i(388)]),this[i(428)]=m(this.seedGenerator.random),this.forwards=new s,this[i(406)]=new s,this[i(437)]=new s,this[i(450)]=new s,this.middlePos=new s,this[i(317)]=new s,this.newPos=new s,this[i(291)]=new s,this[i(337)]=new s}createMesh(){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(383)],o=18*i*this[t(383)];this[t(390)]=new Float32Array(3*s),this[t(441)]=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(2*s)),this[t(346)](0),this[t(352)](new e(this[t(441)],1)),this[t(320)]=new n(this.vertices,3),this.setAttribute(t(455),this[t(320)]),this.generateUVs&&(this.uvsAttribute=new n(new Float32Array(this[t(436)]),2),this.setAttribute("uv",this[t(380)])),!this[t(296)]&&(this[t(432)].usage=r,this[t(320)][t(408)]=r,this[t(341)]&&(this.uvsAttribute[t(408)]=r)),this.vertices=this[t(320)].array,this[t(441)]=this[t(432)][t(313)],this[t(341)]&&(this[t(436)]=this[t(380)][t(313)])}updateMesh(t){const i=M;this.fillMesh(t),this[i(303)][i(456)]=this.currentIndex,this.index[i(407)]=!0,this.positionAttribute.needsUpdate=!0,this[i(341)]&&(this[i(380)][i(407)]=!0)}[M(346)](t){const i=M,s=this;this[i(343)]=0,this[i(394)]=0,this[i(446)]=0,this.currentUVCoordinate=0,this[i(290)](t,(function(e){const n=i,r=s.currentSubray;t<r[n(336)]||(this[n(373)].isEternal&&0==s[n(328)][n(411)]?(s[n(431)](e),s.onDecideSubrayCreation(e,s)):t<r.endPropagationTime?s[n(363)]>=e[n(376)]*r[n(306)]&&(s[n(431)](e),s[n(347)](e,s)):t<r[n(458)]?(s[n(431)](e),s[n(347)](e,s)):(s[n(363)]<=r.vanishingTimeFactor+e[n(364)]*(1-r[n(308)])&&s.createPrism(e),s[n(347)](e,s)))}))}[M(393)](){const t=M;return this[t(397)][this[t(367)]++]}[M(434)](t,i){const s=M;t[s(378)][s(349)](i[s(329)]),t[s(350)][s(349)](i[s(402)]),t[s(416)][s(349)](i.up0),t[s(385)][s(349)](i.up1),t[s(389)]=i[s(389)],t[s(375)]=i[s(375)],t[s(336)]=i[s(336)],t.deathTime=i[s(289)],t[s(309)]=i[s(309)],t[s(294)]=i[s(294)],t.straightness=i[s(447)],t[s(306)]=i.propagationTimeFactor,t[s(308)]=i[s(308)],t[s(396)]=this[s(396)],t[s(415)]=void 0!==i[s(420)]?i.noiseSeed:0,t.recursion=0}[M(290)](t,i){const s=M;this[s(429)]=t,this.currentSegmentCallback=i,this[s(367)]=0,this[s(434)](this.addNewSubray(),this[s(373)]);for(let e=0;e<this.numSubrays;e++){const i=this.subrays[e];this[s(328)]=i,this.randomGenerator.setSeed(i.seed),i[s(384)]=o[s(322)](i[s(336)],i[s(289)],i.propagationTimeFactor),i[s(458)]=o.lerp(i[s(289)],i[s(336)],1-i[s(308)]);const n=this[s(433)].random;i[s(414)][s(391)](n(),n(),n())[s(460)](1e3),i.linPos1[s(391)](n(),n(),n())[s(460)](1e3),this[s(363)]=(t-i[s(336)])/(i.deathTime-i.birthTime),this[s(327)]=0,this[s(404)]=!0;const r=this[s(304)]();r[s(438)]=0,r[s(378)][s(349)](i[s(378)]),r[s(350)][s(349)](i.pos1),r[s(414)][s(349)](i[s(414)]),r[s(398)][s(349)](i[s(398)]),r.up0[s(349)](i.up0),r[s(385)].copy(i.up1),r[s(389)]=i.radius0,r.radius1=i[s(375)],r[s(376)]=0,r[s(364)]=1,r[s(425)]=1-i[s(447)],this[s(332)]=this.ramification*Math[s(381)](this[s(440)],i[s(411)])/(1<<i[s(396)]),this[s(457)](r)}this[s(310)]=null,this[s(328)]=null}[M(457)](t){const i=M;if(t[i(438)]>=this[i(328)][i(396)])return void this[i(310)](t);this[i(427)].subVectors(t[i(350)],t[i(378)]);let s=this[i(427)][i(452)]();s<1e-6&&(this[i(427)].set(0,0,.01),s=this[i(427)].length());const e=.5*(t[i(389)]+t.radius1),n=.5*(t[i(376)]+t.fraction1),r=this[i(429)]*this.currentSubray.timeScale*Math[i(381)](2,t.iteration);this[i(302)][i(292)](t[i(378)],t[i(350)],.5),this[i(317)].lerpVectors(t[i(414)],t.linPos1,.5);const o=this[i(317)];this[i(324)][i(391)](this[i(430)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(428)](o.x,o.y,o.z,r)),this[i(324)][i(460)](t[i(425)]*s),this[i(324)][i(421)](this[i(302)]);const a=this[i(304)]();a[i(378)][i(349)](t[i(378)]),a.pos1.copy(this[i(324)]),a[i(414)][i(349)](t[i(414)]),a.linPos1[i(349)](this[i(317)]),a[i(416)][i(349)](t[i(416)]),a[i(385)][i(349)](t.up1),a[i(389)]=t[i(389)],a[i(375)]=e,a.fraction0=t.fraction0,a[i(364)]=n,a[i(425)]=t.positionVariationFactor*this[i(328)][i(294)],a[i(438)]=t[i(438)]+1;const h=this.getNewSegment();h.pos0[i(349)](this.newPos),h[i(350)][i(349)](t[i(350)]),h[i(414)].copy(this[i(317)]),h[i(398)][i(349)](t[i(398)]),this[i(337)][i(451)](t[i(416)],this.forwards[i(386)]()),h[i(416)].crossVectors(this.forwards,this.cross1)[i(386)](),h[i(385)][i(349)](t.up1),h[i(389)]=e,h[i(375)]=t[i(375)],h[i(376)]=n,h.fraction1=t[i(364)],h[i(425)]=t[i(425)]*this.currentSubray.roughness,h[i(438)]=t.iteration+1,this[i(457)](a),this[i(457)](h)}createPrism(t){const i=M;this.forwardsFill[i(334)](t.pos1,t.pos0)[i(386)](),this[i(404)]&&(this.currentCreateTriangleVertices(t[i(378)],t[i(416)],this[i(406)],t[i(389)],0),this[i(404)]=!1),this[i(372)](t[i(350)],t[i(416)],this[i(406)],t[i(375)],t[i(364)]),this[i(300)]()}createTriangleVerticesWithoutUVs(t,i,s,e){const n=M;this.side[n(451)](i,s)[n(460)](e*C.COS30DEG),this[n(450)][n(349)](i).multiplyScalar(-e*C.SIN30DEG);const r=this.vPos,o=this[n(390)];r[n(349)](t).sub(this[n(437)])[n(421)](this.down),o[this[n(446)]++]=r.x,o[this[n(446)]++]=r.y,o[this[n(446)]++]=r.z,r[n(349)](t)[n(421)](this.side)[n(421)](this.down),o[this.currentCoordinate++]=r.x,o[this[n(446)]++]=r.y,o[this[n(446)]++]=r.z,r[n(349)](i)[n(460)](e)[n(421)](t),o[this[n(446)]++]=r.x,o[this[n(446)]++]=r.y,o[this.currentCoordinate++]=r.z,this[n(343)]+=3}createTriangleVerticesWithUVs(t,i,s,e,n){const r=M;this.side[r(451)](i,s)[r(460)](e*C[r(399)]),this[r(450)].copy(i)[r(460)](-e*C[r(307)]);const o=this[r(291)],a=this[r(390)],h=this[r(436)];o[r(349)](t)[r(311)](this.side)[r(421)](this[r(450)]),a[this[r(446)]++]=o.x,a[this[r(446)]++]=o.y,a[this[r(446)]++]=o.z,h[this[r(293)]++]=n,h[this[r(293)]++]=0,o.copy(t).add(this[r(437)]).add(this[r(450)]),a[this.currentCoordinate++]=o.x,a[this[r(446)]++]=o.y,a[this[r(446)]++]=o.z,h[this[r(293)]++]=n,h[this[r(293)]++]=.5,o[r(349)](i).multiplyScalar(e)[r(421)](t),a[this[r(446)]++]=o.x,a[this[r(446)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(293)]++]=n,h[this[r(293)]++]=1,this[r(343)]+=3}[M(300)](t){const i=M,s=this[i(441)];t=this[i(343)]-6,s[this.currentIndex++]=t+1,s[this[i(394)]++]=t+2,s[this[i(394)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(394)]++]=t+5,s[this[i(394)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(394)]++]=t+1,s[this[i(394)]++]=t+4,s[this[i(394)]++]=t+0,s[this[i(394)]++]=t+4,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+2,s[this[i(394)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(394)]++]=t+2,s[this[i(394)]++]=t+3,s[this[i(394)]++]=t+5}[M(356)](){const t=M,i=this[t(433)].random;this[t(347)]=function(s,e){const n=t,r=e[n(328)],a=e.rayParameters[n(355)],h=e[n(373)][n(330)],c=e[n(373)].isEternal&&0==r[n(411)]?-i()*a:o[n(322)](r[n(336)],r[n(384)],s.fraction0)-i()*a,u=e.time-c,l=Math[n(358)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=e[n(332)]),r.recursion<e.maxSubrayRecursion&&e[n(367)]<e[n(383)]&&i()<d){const t=e[n(393)](),o=e[n(433)][n(360)]();t[n(415)]=p,e[n(433)][n(353)](p),t[n(411)]=r[n(411)]+1,t[n(396)]=Math[n(299)](1,r.maxIterations-1),t[n(414)][n(391)](i(),i(),i()).multiplyScalar(1e3),t[n(398)].set(i(),i(),i())[n(460)](1e3),t[n(416)][n(349)](r[n(416)]),t.up1[n(349)](r[n(385)]),t[n(389)]=s[n(389)]*e.rayParameters[n(382)],t[n(375)]=Math[n(448)](e.rayParameters.minRadius,s[n(375)]*e[n(373)][n(410)]),t.birthTime=c+l*a,t[n(289)]=t[n(336)]+a*h,!e.rayParameters[n(325)]&&0==r[n(411)]&&(t[n(336)]=Math[n(299)](t[n(336)],r[n(336)]),t.deathTime=Math[n(448)](t[n(289)],r.deathTime)),t[n(309)]=2*r[n(309)],t[n(294)]=r[n(294)],t.straightness=r[n(447)],t[n(306)]=r[n(306)],t[n(308)]=r[n(308)],e[n(368)](s,r,t,e),e[n(433)][n(353)](o)}};const e=new s,n=new s,r=new s,a=new s;this.onSubrayCreation=function(t,i,s,e){e.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(418)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(349)](s[p(378)]),e[p(334)](o[p(350)],o[p(378)]),n.copy(e)[p(386)](),e[p(460)](s[p(376)]+(1-s[p(376)])*(i()*c));const d=e[p(452)]();r.crossVectors(o[p(416)],n);const m=2*Math.PI*i();r[p(460)](Math[p(354)](m)),a[p(349)](o[p(416)]).multiplyScalar(Math[p(326)](m)),h[p(350)].copy(r).add(a)[p(460)](d*u*(l+i()*(1-l)))[p(421)](e).add(o[p(378)])},this[t(331)]=function(s,o,h,c,u,l){const p=t;h[p(378)][p(349)](s[p(378)]),e[p(334)](o[p(350)],o[p(378)]),n[p(349)](e)[p(386)](),e[p(460)](s.fraction0+(1-s[p(376)])*((2*i()-1)*c));const d=e.length();r[p(451)](o.up0,n);const m=2*Math.PI*i();r[p(460)](Math[p(354)](m)),a[p(349)](o.up0).multiplyScalar(Math[p(326)](m)),h.pos1[p(349)](r)[p(421)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(421)](e)[p(421)](o[p(378)])}}[M(435)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(348)][this[t(327)]++]}[M(349)](t){const i=M;return super[i(349)](t),this.init(C[i(387)]({},t.rayParameters)),this}[M(422)](){return new this.constructor(C.copyParameters({},this.rayParameters))}}function R(){const t=["303lkgrkz","middlePos","drawRange","getNewSegment","1086SRKsmK","propagationTimeFactor","SIN30DEG","vanishingTimeFactor","timeScale","currentSegmentCallback","sub","4645203hUMpau","array","createTriangleVerticesWithUVs","4498371bHYFqN","maxSubrayRecursion","middleLinPos","visible","currentSeed","positionAttribute","log","lerp","LightningStrike","newPos","isEternal","sin","currentSegmentIndex","currentSubray","sourceOffset","subrayDutyCycle","subrayCylinderPosition","subrayProbability","stateObject","subVectors","trace","birthTime","cross1","seedGenerator","RAY_VANISHING",'{}.constructor("return this")( )',"generateUVs","warn","currentVertex","minRadius","RAY_STEADY","fillMesh","onDecideSubrayCreation","raySegments","copy","pos1","RAY_EXTINGUISHED","setIndex","setSeed","cos","subrayPeriod","createDefaultSubrayCreationCallbacks","apply","floor","update","getSeed","push","test","timeFraction","fraction1","ramification","function *\\( *\\)","numSubrays","onSubrayCreation","prototype","2936048nUOsiK","2314964qjecBd","currentCreateTriangleVertices","rayParameters","isLightningStrike","radius1","fraction0","RAY_INITIALIZED","pos0","debu","uvsAttribute","pow","radius0Factor","maxSubrays","endPropagationTime","up1","normalize","copyParameters","random","radius0","vertices","set","while (true) {}","addNewSubray","currentIndex","call","maxIterations","subrays","linPos1","COS30DEG","6074umuxMl","error","destOffset","createTriangleVerticesWithoutUVs","isInitialSegment","init","forwardsFill","needsUpdate","usage","updateMesh","radius1Factor","recursion","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","linPos0","seed","up0","RAY_PROPAGATING","subrayConePosition","state","noiseSeed","add","clone","createRandomGenerator","info","positionVariationFactor","action","forwards","simplexZ","time","simplexX","createPrism","index","randomGenerator","initSubray","createSubray","uvs","side","iteration","toString","recursionProbability","indices","createSegment","constructor","RAY_UNBORN","42672rtGFNm","currentCoordinate","straightness","min","gger","down","crossVectors","length","maxRaySegments","10djMEEe","position","count","fractalRayRecursive","beginVanishingTime","type","multiplyScalar","createMesh","deathTime","fractalRay","vPos","lerpVectors","currentUVCoordinate","roughness","bind","isStatic","6529180oJVSPe","console","max","createPrismFaces"];return(R=function(){return t})()}function V(t,i){const s=R();return(V=function(t,i){return s[t-=289]})(t,i)}function j(t){function i(t){const s=V;if("string"==typeof t)return function(t){}[s(443)](s(392))[s(357)]("counter");1!==(""+t/t)[s(452)]||t%20==0?function(){return!0}.constructor(s(379)+"gger")[s(395)](s(426)):function(){return!1}[s(443)](s(379)+s(449))[s(357)](s(333)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C.RAY_INITIALIZED=0,C[M(444)]=1,C[M(417)]=2,C[M(345)]=3,C.RAY_VANISHING=4,C[M(351)]=5,C.COS30DEG=Math[M(354)](30*Math.PI/180),C[M(307)]=Math.sin(30*Math.PI/180);const D=H;!function(t,i){const s=H,e=E();for(;;)try{if(633765===-parseInt(s(186))/1*(-parseInt(s(170))/2)+-parseInt(s(221))/3*(parseInt(s(209))/4)+-parseInt(s(151))/5+-parseInt(s(158))/6*(-parseInt(s(152))/7)+parseInt(s(149))/8*(-parseInt(s(173))/9)+-parseInt(s(174))/10+parseInt(s(217))/11)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const z=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[H(169)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){z(this,(function(){const t=H,i=new RegExp(t(161)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=N(t(172));i[t(166)](e+t(192))&&s[t(166)](e+"input")?N():e("0")}))()}();const F=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[H(169)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function E(){const t=["nextLightningTime","info","constructor","629029IZkZQU","while (true) {}","length","isEternal",'{}.constructor("return this")( )',"call","chain","lightningMinDuration","lightningMaxPeriod","deadLightningsMeshes","action","lerp","error","noiseSeed","lightningMaterial","state","sourceOffset","return (function() ","update","random","prototype","trace","onRayPosition","17788WDmpQn","isLightningStorm","counter","debu","maxLightnings","deathTime","console","minHeight","4887641uIgIzq","clone","onLightningDown","lightningsMeshes","54nEYhxl","size","warn","set","lightningMinPeriod","2104uXKprX","toString","75540OCGOKp","378KIdotB","maxHeight","__proto__","add","log","lightningParameters","45042NzOUfm","stormParams","maxSlope","function *\\( *\\)","geometry","copyParameters","lightningMaxDuration","bind","test","RAY_EXTINGUISHED","multiplyScalar","apply","4UYmVkE","pop","init","14607EXdboV","9519990mOdZbn","push","copy","RAY_PROPAGATING","gger","inited","indexOf","stateObject","splice"];return(E=function(){return t})()}function H(t,i){const s=E();return(H=function(t,i){return s[t-=145]})(t,i)}F(void 0,(function(){const t=H;let i;try{i=Function(t(203)+t(190)+");")()}catch(n){i=window}const s=i[t(215)]=i.console||{},e=[t(156),t(146),t(184),t(198),"exception","table",t(207)];for(let r=0;r<e[t(188)];r++){const i=F[t(185)][t(206)][t(165)](F),n=e[r],o=s[n]||i;i[t(154)]=F[t(165)](F),i.toString=o[t(150)][t(165)](o),s[n]=i}}))();class G extends a{constructor(t={}){const i=H;super(),this[i(210)]=!0,this[i(159)]=t,t.size=void 0!==t[i(145)]?t[i(145)]:1e3,t.minHeight=void 0!==t[i(216)]?t[i(216)]:80,t[i(153)]=void 0!==t[i(153)]?t[i(153)]:100,t[i(160)]=void 0!==t[i(160)]?t[i(160)]:1.1,t[i(213)]=void 0!==t[i(213)]?t.maxLightnings:3,t.lightningMinPeriod=void 0!==t.lightningMinPeriod?t[i(148)]:3,t.lightningMaxPeriod=void 0!==t[i(194)]?t.lightningMaxPeriod:7,t[i(193)]=void 0!==t.lightningMinDuration?t[i(193)]:1,t.lightningMaxDuration=void 0!==t[i(164)]?t.lightningMaxDuration:2.5,this[i(157)]=C[i(163)](t[i(157)],t.lightningParameters),this.lightningParameters[i(189)]=!1,this[i(200)]=void 0!==t[i(200)]?t[i(200)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(208)]=t.onRayPosition:this[i(208)]=function(s,e){const n=i;e[n(147)]((Math[n(205)]()-.5)*t[n(145)],0,(Math.random()-.5)*t[n(145)]);const r=o[n(197)](t.minHeight,t[n(153)],Math.random());s.set(t[n(160)]*(2*Math[n(205)]()-1),1,t[n(160)]*(2*Math[n(205)]()-1))[n(168)](r)[n(155)](e)},this[i(219)]=t.onLightningDown,this[i(179)]=!1,this[i(183)]=0,this.lightningsMeshes=[],this[i(195)]=[];for(let s=0;s<this[i(159)][i(213)];s++){const t=new C(C.copyParameters({},this[i(157)])),s=new c(t,this[i(200)]);this.deadLightningsMeshes[i(175)](s)}}[D(204)](t){const i=D;if(!this[i(179)]&&(this[i(183)]=this.getNextLightningTime(t)*Math[i(205)](),this.inited=!0),t>=this[i(183)]){const s=this[i(195)][i(171)]();if(s){const e=C[i(163)](s.geometry.rayParameters,this[i(157)]);e.birthTime=t,e[i(214)]=t+o[i(197)](this[i(159)][i(193)],this[i(159)][i(164)],Math[i(205)]()),this[i(208)](e[i(202)],e.destOffset),e[i(199)]=Math[i(205)](),this[i(155)](s),this[i(220)][i(175)](s)}this[i(183)]=this.getNextLightningTime(t)}let s=0,e=this[i(220)][i(188)];for(;s<e;){const n=this[i(220)][s],r=n[i(162)],o=r[i(201)];r.update(t),o===C[i(177)]&&r.state>o&&this[i(219)]&&this.onLightningDown(r),r[i(201)]===C[i(167)]?(this[i(220)][i(182)](this[i(220)][i(180)](n),1),this[i(195)][i(175)](n),this.remove(n),e--):s++}}getNextLightningTime(t){const i=D;return t+o.lerp(this[i(159)][i(148)],this[i(159)].lightningMaxPeriod,Math[i(205)]())/(this[i(159)][i(213)]+1)}[D(176)](t,i){const s=D;return super[s(176)](t,i),this.stormParams[s(145)]=t[s(159)][s(145)],this[s(159)].minHeight=t[s(159)][s(216)],this[s(159)][s(153)]=t[s(159)][s(153)],this.stormParams[s(160)]=t[s(159)][s(160)],this[s(159)][s(213)]=t[s(159)].maxLightnings,this[s(159)][s(148)]=t.stormParams[s(148)],this[s(159)][s(194)]=t.stormParams[s(194)],this[s(159)][s(193)]=t.stormParams.lightningMinDuration,this.stormParams[s(164)]=t.stormParams[s(164)],this[s(157)]=C[s(163)]({},t[s(157)]),this[s(200)]=t[s(159)][s(200)],this[s(219)]=t[s(219)],this}[D(218)](){return new(this[D(185)])(this.stormParams).copy(this)}}function N(t){function i(t){const s=H;if("string"==typeof t)return function(t){}[s(185)](s(187))[s(169)](s(211));1!==(""+t/t)[s(188)]||t%20==0?function(){return!0}[s(185)](s(212)+s(178))[s(191)](s(196)):function(){return!1}[s(185)](s(212)+s(178)).apply(s(181)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=Z;!function(t,i){const s=Z,e=L();for(;;)try{if(706778===parseInt(s(473))/1*(parseInt(s(480))/2)+parseInt(s(448))/3*(parseInt(s(483))/4)+parseInt(s(477))/5+-parseInt(s(461))/6+-parseInt(s(494))/7*(parseInt(s(457))/8)+parseInt(s(489))/9*(-parseInt(s(506))/10)+-parseInt(s(453))/11*(-parseInt(s(479))/12))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const O=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function L(){const t=["info","color","13584FzItOJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","sourceOffset","function *\\( *\\)","4333054WSudWK","primitive","maxHeight","sub","5905768pWAiqH","subrayDutyCycle","dot","rayParameters","3560694feSgAq","subVectors","set","multiplyScalar","subrayConePosition","action","stormParams","string","stateObject","minHeight","exception","__proto__","237gMLcvd","log","gger","toString","5466920AycSoh","table","48VDNjWQ","2768CZKXnE","input","update","160SUiPqn","subrayPeriod","copy","trace","error","size","9jsXeKI","constructor",'{}.constructor("return this")( )',"Color","chain","7yLpZBr","while (true) {}","pos1","radius0","apply","maxLightnings","Vector3","test","console","straightness","#b0ffff","object","11397200xnBsan","timeScale","length","addVectors","call","counter","bind","roughness","debu","init"];return(L=function(){return t})()}!function(){O(this,(function(){const t=Z,i=new RegExp(t(452)),s=new RegExp(t(449),"i"),e=W(t(515));i[t(501)](e+t(493))&&s.test(e+t(481))?W():e("0")}))()}();const Y=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[Z(498)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();Y(void 0,(function(){const t=Z;let i;try{i=Function("return (function() "+t(491)+");")()}catch(n){i=window}const s=i.console=i[t(502)]||{},e=[t(474),t(450),t(516),t(487),t(471),t(478),t(486)];for(let r=0;r<e[t(508)];r++){const i=Y[t(490)].prototype[t(512)](Y),n=e[r],o=s[n]||i;i[t(472)]=Y[t(512)](Y),i.toString=o[t(476)][t(512)](o),s[n]=i}}))();const k=[U(505)];function Z(t,i){const s=L();return(Z=function(t,i){return s[t-=447]})(t,i)}const X=f({__name:"lightStorm",props:{color:{default:U(504)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,e=t,n=new(u[i(492)])(e[i(447)]),r=new h({color:n}),o=new s(0,-1,0);let a=0;const c=new(u[i(500)]),p=new(u[i(500)]),d={roughness:e[i(513)],straightness:e[i(503)],radius0:e[i(497)],radius1:e.radius1,timeScale:e[i(507)],subrayPeriod:e[i(484)],subrayDutyCycle:e[i(458)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,e,n){const r=i;n[r(465)](t,s,e,.6,.6,.5),a=n[r(460)].sourceOffset.y,c[r(462)](e[r(496)],n[r(460)][r(451)]);const h=o[r(459)](c);p[r(485)](o)[r(464)](h),c[r(456)](p);const u=h/a>.5?a/h:1;p[r(464)](u),c.add(p),e[r(496)][r(509)](c,n.rayParameters[r(451)])}},m=new G({size:e.size,minHeight:e.minHeight,maxHeight:e.maxHeight,maxSlope:.6,maxLightnings:e[i(499)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=m[t(467)];s[t(488)]=e[t(488)],s[t(470)]=e[t(470)],s[t(455)]=e[t(455)],r.color[t(463)](e[t(447)]),d[t(513)]=e[t(513)],d[t(503)]=e[t(503)],d.radius0=e.radius0,d.radius1=e.radius1,d[t(507)]=e[t(507)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{m[i(482)](t)})),(t,s)=>{const e=i;return y(),b(e(454),{object:S(m),renderOrder:9999},null,8,k)}}});function W(t){function i(t){const s=Z;if(typeof t===s(468))return function(t){}[s(490)](s(495))[s(498)](s(511));1!==(""+t/t)[s(508)]||t%20==0?function(){return!0}[s(490)]("debu"+s(475))[s(510)](s(466)):function(){return!1}.constructor(s(514)+s(475)).apply(s(469)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function K(t,i){const s=q();return(K=function(t,i){return s[t-=336]})(t,i)}!function(t,i){const s=K,e=q();for(;;)try{if(134861===-parseInt(s(376))/1*(-parseInt(s(351))/2)+parseInt(s(343))/3+-parseInt(s(361))/4+-parseInt(s(337))/5+-parseInt(s(344))/6+-parseInt(s(336))/7*(parseInt(s(354))/8)+-parseInt(s(365))/9*(-parseInt(s(366))/10))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const $=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[K(362)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){$(this,(function(){const t=K,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(374),"i"),e=J(t(349));i[t(375)](e+"chain")&&s[t(375)](e+t(372))?J():e("0")}))()}();const B=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[K(362)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function q(){const t=["radius0","input","#ffbde7","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","95643SSBHdu","color","exception","info","时间缩放","直度度","21RprSXd","786005vfXrwC","toString","roughness","trace","straightness",'{}.constructor("return this")( )',"614526sXlCUG","1576962IdsoHE","console","call","stateObject","action","init","端部半径","2bYBSwz","error","#6f6f6f","22936pWIgNT","log","length","未部半径","value","gger","#92399e","404896raSwPb","apply","warn","粗糙度","3278061XaWMUd","10zzExTw","debu","bind","constructor","radius1"];return(q=function(){return t})()}B(void 0,(function(){const t=K,i=function(){const t=K;let i;try{i=Function("return (function() "+t(342)+");")()}catch(s){i=window}return i}(),s=i[t(345)]=i[t(345)]||{},e=[t(355),t(363),t(379),t(352),t(378),"table",t(340)];for(let n=0;n<e.length;n++){const i=B[t(369)].prototype[t(368)](B),r=e[n],o=s[r]||i;i.__proto__=B[t(368)](B),i[t(338)]=o.toString[t(368)](o),s[r]=i}}))();const Q=f({__name:"lightningStorm",setup(i){const s=K,e=v({cellSize:60,cellThickness:1,cellColor:s(353),sectionColor:s(360),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:n,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(373),roughness:{label:s(364),value:.85,min:0,max:1,step:.01},straightness:{label:s(381),value:.65,min:0,max:1,step:.01},radius0:{label:s(350),value:1,min:.1,max:10,step:.01},radius1:{label:s(357),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(380),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(X,{minHeight:S(n)[m(358)],maxHeight:S(r)[m(358)],color:S(o)[m(358)],roughness:S(a)[m(358)],straightness:S(h)[m(358)],radius0:S(c)[m(358)],radius1:S(u).value,timeScale:S(l).value},null,8,["minHeight","maxHeight",m(377),m(339),m(341),m(371),m(370),"timeScale"]),x(S(P),_({args:[100,100]},e,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function J(t){function i(t){const s=K;if("string"==typeof t)return function(t){}[s(369)]("while (true) {}").apply("counter");1!==(""+t/t)[s(356)]||t%20==0?function(){return!0}[s(369)](s(367)+"gger")[s(346)](s(348)):function(){return!1}[s(369)]("debu"+s(359))[s(362)](s(347)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

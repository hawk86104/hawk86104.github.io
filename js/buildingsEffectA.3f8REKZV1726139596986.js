import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.t0fQ7WBC1726139596986.js";import{U as o}from"./@tresjs.ml1V726H1726139596986.js";import{C as e}from"./three-custom-shader-material.UXiDE7Tt1726139596986.js";import"./object-hash.FoPRLmFN1726139596986.js";import{_ as r,C as i,ce as u,m as c,a$ as a}from"./three.ewwqFbMB1726139596986.js";import"./@amap.Fadeb9eG1726139596986.js";import"./glsl-tokenizer.AMiuccS21726139596986.js";import{d as s,a3 as l,w as f,o as p,E as d,u as m,a4 as v,r as g,f as h,g as y,j as w,m as C}from"./@vue.JNsx1iN61726139596986.js";import{P as _}from"./tweakpane.yHWGBmom1726139596986.js";import"./@vueuse.leIfNolX1726139596986.js";import"./glsl-token-string.sQYJMTSX1726139596986.js";import"./glsl-token-functions.JTK3IqoC1726139596986.js";import"./jszip.fP2cdsII1726139596986.js";const b=j;!function(t,n){const o=j,e=S();for(;;)try{if(306253===parseInt(o(340))/1*(parseInt(o(309))/2)+parseInt(o(366))/3*(-parseInt(o(328))/4)+-parseInt(o(299))/5*(parseInt(o(347))/6)+-parseInt(o(357))/7*(-parseInt(o(319))/8)+-parseInt(o(301))/9*(-parseInt(o(302))/10)+-parseInt(o(355))/11+-parseInt(o(313))/12*(-parseInt(o(345))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const x=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){x(this,(function(){const t=j,n=new RegExp(t(316)),o=new RegExp(t(323),"i"),e=P(t(362));n[t(304)](e+"chain")&&o[t(304)](e+t(353))?P():e("0")}))()}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[j(359)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();I(void 0,(function(){const t=j;let n;try{n=Function(t(360)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(342)]=n[t(342)]||{},e=[t(300),t(297),t(305),"error",t(317),t(361),t(346)];for(let i=0;i<e[t(324)];i++){const n=I.constructor.prototype[t(341)](I),r=e[i],u=o[r]||n;n[t(344)]=I[t(341)](I),n[t(330)]=u[t(330)][t(341)](u),o[r]=n}}))();const M=[b(349)];function j(t,n){const o=S();return(j=function(t,n){return o[t-=294]})(t,n)}function S(){const t=["10554JlQacx","#112233","object","debu","model","Color","input","color","5773900kGjavl","gger","7NRaLDl","side","apply","return (function() ","table","init","renderOrder","while (true) {}","land","1585365pVmhPK","value","children","#ffff00","counter","warn","opacity","1345AUPvBB","log","195435ZtlAXW","10swijGp","setStyle","test","info","call","DoubleSide","computeBoundingBox","794iuvfJv","uGradient","bModel","computeBoundingSphere","17770836BCkuwL","dispose","material","function *\\( *\\)","exception","gradient","1348656NLHnyQ","clone","uTime","landColor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","uOpacity","uniforms","stateObject","4JXqESX","primitive","toString","string","MeshBasicMaterial","__csm","#e523ff","constructor","uColor","isArray","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","action","407YsJFOz","bind","console","city","__proto__","13FIMIpp","trace"];return(S=function(){return t})()}const T=s({__name:b(311),props:{model:{},bulidingsColor:{default:b(334)},landColor:{default:b(348)},topColor:{default:b(295)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=b,i=t,u=i[n(351)][n(343)];i.model[n(351)][n(294)][0][n(315)]=new(r[n(332)])({color:"#ffff00"}),u[n(363)]=1001;const c=i[n(351)].land;(()=>{const t=n,{geometry:o}=u;o[t(308)](),o[t(312)]();const{max:c,min:a}=o.boundingBox;if(u[t(315)][t(333)])return;const s=new e({baseMaterial:u.material,vertexShader:"\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t",fragmentShader:t(338),silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(r[t(352)])(i.bulidingsColor)},uOpacity:{value:i.opacity},uLightColor:{value:new(r[t(352)])("#ffffff")},uTopColor:{value:new(r[t(352)])(i.topColor)},uTime:{value:0},uGradient:{value:i.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(307)]});u[t(315)][t(314)](),u[t(315)]=s})();const{onLoop:a}=o();a((({delta:t})=>{const o=n;u[o(315)].uniforms[o(321)][o(367)]+=t})),l((()=>{const t=n;i.bulidingsColor&&u[t(315)][t(326)][t(336)][t(367)][t(303)](i.bulidingsColor),i[t(322)]&&((t,o)=>{const e=n;let u;"cu"===t||t===e(365)&&(u=Array[e(337)](c[e(315)])?c[e(315)]:[c.material],u.forEach((t=>{const n=e;t[o][n(303)](i[n(322)]),t[n(358)]=r[n(307)]})))})(t(365),t(354)),i[t(298)]&&(u[t(315)][t(326)][t(325)][t(367)]=i.opacity)})),f(i,((t,o)=>{const e=n;u[e(315)][e(326)][e(310)].value=t[e(318)]}));const s=i[n(351)][n(351)][n(320)]();return(t,o)=>{const e=n;return p(),d(e(329),{object:m(s)},null,8,M)}}});function P(t){function n(t){const o=j;if(typeof t===o(331))return function(t){}.constructor(o(364))[o(359)](o(296));1!==(""+t/t)[o(324)]||t%20==0?function(){return!0}[o(335)]("debugger")[o(306)](o(339)):function(){return!1}.constructor(o(350)+o(356))[o(359)](o(327)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const F=A;!function(t,n){const o=A,e=E();for(;;)try{if(324445===-parseInt(o(485))/1+parseInt(o(480))/2+-parseInt(o(490))/3*(parseInt(o(493))/4)+-parseInt(o(479))/5+-parseInt(o(452))/6*(-parseInt(o(462))/7)+-parseInt(o(463))/8*(parseInt(o(451))/9)+-parseInt(o(464))/10*(-parseInt(o(489))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const O=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[A(460)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){O(this,(function(){const t=A,n=new RegExp(t(486)),o=new RegExp(t(487),"i"),e=R(t(466));n[t(454)](e+t(457))&&o.test(e+t(442))?R():e("0")}))()}();const B=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[A(460)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function A(t,n){const o=E();return(A=function(t,n){return o[t-=437]})(t,n)}B(void 0,(function(){const t=A,n=function(){const t=A;let n;try{n=Function("return (function() "+t(444)+");")()}catch(o){n=window}return n}(),o=n[t(453)]=n.console||{},e=[t(467),t(474),t(449),t(492),t(483),t(482),"trace"];for(let r=0;r<e.length;r++){const n=B[t(461)].prototype.bind(B),i=e[r],u=o[i]||n;n.__proto__=B[t(459)](B),n.toString=u[t(455)][t(459)](u),o[i]=n}}))();const L=[F(445)];function E(){const t=["builds",'{}.constructor("return this")( )',"object","material","call","stateObject","info","gger","9HelRMW","1542dpasoO","console","test","toString","value","chain","counter","bind","apply","constructor","5327goTOvO","4527008oyfFzP","190DpkERM","uniforms","init","log","string","length","scale","matrix","srcColor","color","warn","applyMatrix4","primitive","uSrcColor","renderOrder","2527325LaDVdF","428276pohcFU","uTime","table","exception","uGradual","185719OsLnQX","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gradual","893211NyWUXi","3yXuHQK","debu","error","1484116qNdJwV","uScale","speed","uColor","bLine","geometry","input"];return(E=function(){return t})()}const z=s({__name:F(440),props:{builds:{},color:{default:"#FFF"},srcColor:{default:"#000"},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=F,e=t;let r=null;const s={transparent:!0,uniforms:{uColor:{value:new i(e[n(473)])},uSrcColor:{value:new i(e[n(472)])},uScale:{value:e[n(470)]},uTime:{value:0},uGradual:{value:e[n(488)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let f=new u(e[n(443)][n(441)]).clone();f=f[n(475)](e[n(443)][n(471)]);const v=new c(s);r=new a(f,v),r[n(446)].linewidth=e.width,r[n(478)]=1e3,l((()=>{const t=n;e[t(473)]&&(s[t(465)][t(439)][t(456)]=new i(e[t(473)])),e[t(472)]&&(s[t(465)][t(477)][t(456)]=new i(e.srcColor)),e[t(470)]&&(s[t(465)][t(437)].value=e[t(470)]),e[t(488)]&&(s[t(465)][t(484)][t(456)]=e.gradual)}));const{onLoop:g}=o();return g((({delta:t})=>{const o=n;s[o(465)][o(481)][o(456)]+=t*e[o(438)],s[o(465)][o(481)][o(456)]%=1})),(t,o)=>{const e=n;return p(),d(e(476),{object:m(r)},null,8,L)}}});function R(t){function n(t){const o=A;if(typeof t===o(468))return function(t){}.constructor("while (true) {}")[o(460)](o(458));1!==(""+t/t)[o(469)]||t%20==0?function(){return!0}[o(461)](o(491)+o(450))[o(447)]("action"):function(){return!1}[o(461)]("debu"+o(450))[o(460)](o(448)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function k(){const t=["488456uAwUda","init","string","trace","21VUWZlB","input","chain","call","constructor","color","prototype","model","gradual","length","gger","console","warn","线扫颜色","city","扩散系数","132210wVidPE","最大扩散","15JaKUmH","#000",'{}.constructor("return this")( )',"线原颜色","效果参数","test","stateObject","7uiLFIT","addBinding","action","debu","609896tNULHM","#999","__proto__","function *\\( *\\)","66376HcHsqv","609066leMUTE","8920857FXfKMZ","return (function() ","41810dPrcTS","toString","#FFF","exception","bind","while (true) {}","apply","table","builds","info","1143TLUvAR"];return(k=function(){return t})()}!function(t,n){const o=U,e=k();for(;;)try{if(273924===-parseInt(o(463))/1+-parseInt(o(480))/2*(-parseInt(o(499))/3)+parseInt(o(495))/4+-parseInt(o(465))/5*(parseInt(o(481))/6)+parseInt(o(472))/7*(parseInt(o(476))/8)+-parseInt(o(494))/9*(parseInt(o(484))/10)+parseInt(o(482))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const G=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[U(490)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){G(this,(function(){const t=U,n=new RegExp(t(479)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=D(t(496));n[t(470)](e+t(501))&&o[t(470)](e+t(500))?D():e("0")}))()}();const H=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[U(490)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function U(t,n){const o=k();return(U=function(t,n){return o[t-=455]})(t,n)}H(void 0,(function(){const t=U;let n;try{n=Function(t(483)+t(467)+");")()}catch(r){n=window}const o=n[t(458)]=n[t(458)]||{},e=["log",t(459),t(493),"error",t(487),t(491),t(498)];for(let i=0;i<e.length;i++){const n=H[t(503)][t(505)][t(488)](H),r=e[i],u=o[r]||n;n[t(478)]=H[t(488)](H),n.toString=u[t(485)][t(488)](u),o[r]=n}}))();const Z=s({__name:"buildingsEffectA",async setup(o){const e=U;let r,i;const u=([r,i]=v((()=>n())),r=await r,i(),r),c=g({color:e(486),srcColor:e(466),scale:2e3,gradual:6.6,speed:.3}),a=new _({title:e(469),expanded:!0});return a[e(473)](c,"srcColor",{label:e(468)}),a[e(473)](c,e(504),{label:e(460)}),a[e(473)](c,"speed",{label:"速度",min:.1,max:1,step:.1}),a[e(473)](c,"scale",{label:e(464),min:10,max:2e3,step:10}),a[e(473)](c,e(455),{label:e(462),min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return p(),h(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:y((()=>[w(T,{model:m(u),bulidingsColor:"#000000",landColor:"#112233",topColor:r(477)},null,8,[r(506)]),w(z,C({builds:m(u)[r(461)]},c),null,16,[r(492)])])),_:1})}}});function D(t){function n(t){const o=U;if(typeof t===o(497))return function(t){}[o(503)](o(489))[o(490)]("counter");1!==(""+t/t)[o(456)]||t%20==0?function(){return!0}[o(503)](o(475)+o(457))[o(502)](o(474)):function(){return!1}[o(503)](o(475)+"gger")[o(490)](o(471)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{Z as default};

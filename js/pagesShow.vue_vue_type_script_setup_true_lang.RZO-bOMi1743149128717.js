import{_ as t,cu as n,cv as e,cw as o,cx as r,C as i,n as s,c4 as u,ar as c,at as a}from"./three.hBhj0ayh1743149128717.js";import{P as l,e as f,o as p}from"./@tresjs.GCV-1VTd1743149128717.js";import{z as d}from"./three-custom-shader-material.bIkXJfH11743149128717.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1743149128717.js";import{d as y,b as w,a2 as m,w as I,o as b,H as v,u as _,r as S,a3 as C,e as x,f as A,g as T,N as R,j as B,aj as j,ak as O,F as z,M as E,J as M,m as L}from"./@vue.L-brCdZe1743149128717.js";function W(t,n){const e=D();return W=function(t,n){return e[t-=182]},W(t,n)}function D(){const t=["105KQIJdl","4449aVsaEi","LANDMASS","469566twzXJC","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","name","table","console","init","128UqYjLA",'{}.constructor("return this")( )',"debu","length","bind","exception","5389930cKTwLA","constructor","error","toString","60534TYzmeN","9908VutwrX","traverse","call","prototype","counter","info","57756VlSLAP","return (function() ","gger","chain","86SkWEhR","action","apply","trace","function *\\( *\\)","825664jvmxYe"];return(D=function(){return t})()}!function(t,n){const e=W,o=D();for(;;)try{if(119185===parseInt(e(184))/1*(-parseInt(e(214))/2)+-parseInt(e(186))/3+parseInt(e(204))/4*(-parseInt(e(183))/5)+-parseInt(e(210))/6+-parseInt(e(182))/7+-parseInt(e(193))/8*(-parseInt(e(203))/9)+parseInt(e(199))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(216)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){F(this,(function(){const t=W,n=new RegExp(t(218)),e=new RegExp(t(188),"i"),o=U(t(192));n.test(o+t(213))&&e.test(o+"input")?U():o("0")}))()}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(216)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();k(void 0,(function(){const t=W;let n;try{n=Function(t(211)+t(194)+");")()}catch(r){n=window}const e=n[t(191)]=n[t(191)]||{},o=["log",t(187),t(209),t(201),t(198),t(190),t(217)];for(let i=0;i<o.length;i++){const n=k.constructor[t(207)][t(197)](k),r=o[i],s=e[r]||n;n.__proto__=k[t(197)](k),n.toString=s[t(202)][t(197)](s),e[r]=n}}))();const H=async()=>{const t=W,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(205)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(189)]&&(e=n),n.name===i(185)&&(o=n),"ROADS"===n[i(189)]&&(r=n)})),{model:n,city:e,land:o,roads:r}};function U(t){function n(t){const e=W;if("string"==typeof t)return function(t){}[e(200)]("while (true) {}").apply(e(208));1!==(""+t/t)[e(196)]||t%20==0?function(){return!0}.constructor("debu"+e(212))[e(206)](e(215)):function(){return!1}[e(200)](e(195)+e(212)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=$;!function(t,n){const e=$,o=Z();for(;;)try{if(631258===parseInt(e(250))/1*(-parseInt(e(213))/2)+parseInt(e(216))/3*(-parseInt(e(262))/4)+-parseInt(e(202))/5+-parseInt(e(248))/6*(parseInt(e(241))/7)+parseInt(e(238))/8+-parseInt(e(236))/9*(-parseInt(e(219))/10)+-parseInt(e(240))/11*(-parseInt(e(244))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(230)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function $(t,n){const e=Z();return $=function(t,n){return e[t-=193]},$(t,n)}!function(){N(this,(function(){const t=$,n=new RegExp(t(255)),e=new RegExp(t(214),"i"),o=P("init");n.test(o+t(242))&&e[t(209)](o+t(257))?P():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(230)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Z(){const t=["counter","constructor","1185884WNWpfr","buildingsModelCustomShader","#e523ff","renderOrder","prototype","stateObject","material","opacity","forEach","isArray","__proto__","1925985bBssSC","log","toString",'{}.constructor("return this")( )',"warn","uniforms","bulidingsColor","test","uGradient","color","computeBoundingSphere","22522HXVCNv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","12eoGeoN","city","return (function() ","10dgSSkJ","value","side","#ffffff","dispose","land","model","#ffff00","boundingBox","Color","trace","apply","clone","exception","DoubleSide","while (true) {}","gradient","9569358WSpPRe","console","4137992ADSMUu","landColor","627DFXrQJ","154OdToYX","chain","setStyle","471516JesFwT","debu","call","topColor","186330GqhLWi","__csm","83IWwYgz","string","length","error","computeBoundingBox","function *\\( *\\)","table","input","gger","object"];return(Z=function(){return t})()}V(void 0,(function(){const t=$;let n;try{n=Function(t(218)+t(205)+");")()}catch(r){n=window}const e=n[t(237)]=n[t(237)]||{},o=[t(203),t(206),"info",t(253),t(232),t(256),t(229)];for(let i=0;i<o[t(252)];i++){const n=V[t(261)][t(195)][t(215)](V),r=o[i],s=e[r]||n;n[t(201)]=V[t(215)](V),n[t(204)]=s[t(204)][t(215)](s),e[r]=n}}))();const J=[G(259)],X=y({__name:G(263),props:{model:{},bulidingsColor:{default:G(193)},landColor:{default:"#112233"},topColor:{default:G(226)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=G,o=n,r=w(0),i=o[e(225)][e(217)];i[e(194)]=1001;const s=o[e(225)].land;(()=>{const n=e,{geometry:s}=i;s[n(254)](),s[n(212)]();const{max:u,min:c}=s[n(227)];if(i[n(197)][n(249)])return;const a=new d({baseMaterial:i[n(197)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(228)])(o[n(208)])},uOpacity:{value:o[n(198)]},uLightColor:{value:new(t[n(228)])(n(222))},uTopColor:{value:new(t[n(228)])(o[n(247)])},uTime:r,uGradient:{value:o[n(235)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(233)]});i[n(197)][n(223)](),i[n(197)]=a})();const{onLoop:u}=f();u((({delta:t})=>{r[e(220)]+=t})),m((()=>{const n=e;o.bulidingsColor&&i[n(197)][n(207)].uColor.value[n(243)](o[n(208)]),o.landColor&&((n,r)=>{const i=e;let u;"cu"===n||n===i(224)&&(u=Array[i(200)](s[i(197)])?s[i(197)]:[s[i(197)]],u[i(199)]((n=>{const e=i;n[r].setStyle(o[e(239)]),n[e(221)]=t[e(233)]})))})(n(224),n(211)),o.opacity&&(i[n(197)][n(207)].uOpacity[n(220)]=o.opacity)})),I(o,((t,n)=>{const o=e;i.material[o(207)][o(210)].value=t.gradient}));const c=o[e(225)][e(225)][e(231)]();return(t,n)=>(b(),v("primitive",{object:_(c)},null,8,J))}});function P(t){function n(t){const e=$;if(typeof t===e(251))return function(t){}[e(261)](e(234))[e(230)](e(260));1!==(""+t/t)[e(252)]||t%20==0?function(){return!0}.constructor(e(245)+e(258))[e(246)]("action"):function(){return!1}[e(261)](e(245)+e(258))[e(230)](e(196)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Y=nt;!function(t,n){const e=nt,o=tt();for(;;)try{if(877027===-parseInt(e(426))/1+-parseInt(e(433))/2*(-parseInt(e(429))/3)+parseInt(e(462))/4*(-parseInt(e(409))/5)+-parseInt(e(460))/6+-parseInt(e(438))/7*(-parseInt(e(451))/8)+parseInt(e(408))/9+-parseInt(e(431))/10*(-parseInt(e(415))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(403)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){q(this,(function(){const t=nt,n=new RegExp(t(456)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot(t(453));n[t(404)](o+"chain")&&e[t(404)](o+t(416))?ot():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(403)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Q(void 0,(function(){const t=nt,n=function(){const t=nt;let n;try{n=Function(t(428)+t(424)+");")()}catch(e){n=window}return n}(),e=n[t(442)]=n[t(442)]||{},o=["log",t(464),t(455),t(454),t(411),t(449),t(461)];for(let r=0;r<o.length;r++){const n=Q[t(413)][t(458)][t(448)](Q),i=o[r],s=e[i]||n;n.__proto__=Q.bind(Q),n[t(410)]=s.toString[t(448)](s),e[i]=n}}))();const K=["object"];function tt(){const t=["return (function() ","38562aIdIln","clone","10WnUiOV","set","32sTqwAl","buildingsLines","uOpacity","geometry","innerHeight","4895758rrDrUu","value","innerWidth","stateObject","console","length","style","primitive","uColor","uniforms","bind","table","opacity","16Tzllvm","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","init","error","info","function *\\( *\\)","matrix","prototype","string","6137502dDrUAv","trace","24WzJzKB","resolution","warn","fromEdgesGeometry","apply","test","call","gger","Shader","6704379OihuJP","800130XeGVFt","toString","exception","width","constructor","color","14620133wlOnAD","input","builds","#FFF","Wireframe"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","applyMatrix4","while (true) {}","linewidth",'{}.constructor("return this")( )',"material","818386HBkTvp","debu"];return(tt=function(){return t})()}function nt(t,n){const e=tt();return nt=function(t,n){return e[t-=403]},nt(t,n)}const et=y({__name:Y(434),props:{builds:{},width:{default:1},color:{default:Y(418)},opacity:{default:1},style:{default:Y(419)}},setup(t){const u=Y,c=t;let a=null,l=null;if("Wireframe"===c[u(444)]){const t=new n(c[u(417)].geometry);let i=(new e)[u(465)](t),s=new o({color:c[u(414)],linewidth:c[u(412)],opacity:c[u(450)],transparent:!0,depthWrite:!0,depthTest:!0});s[u(463)][u(432)](window[u(440)],window[u(437)]),a=new r(i,s),a[u(421)](c.builds[u(457)][u(430)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(c[u(414)])},uOpacity:{value:c[u(450)]}},vertexShader:u(452),fragmentShader:u(420)};const t=new n(c[u(417)][u(436)]),e=new s(l);a=new LineSegments(t,e),a[u(421)](c[u(417)][u(457)][u(430)]()),a.material[u(423)]=c.width,a.renderOrder=1e3}return m((()=>{const t=u;c[t(444)]===t(407)&&(c[t(414)]&&(l.uniforms[t(446)].value=new i(c[t(414)])),c[t(450)]&&(l[t(447)][t(435)][t(439)]=c.opacity)),c[t(444)]===t(419)&&(c[t(414)]&&(a.material[t(414)]=new i(c[t(414)])),c.opacity&&(a[t(425)][t(450)]=c[t(450)])),c[t(412)]&&(a[t(425)][t(423)]=c.width)})),(t,n)=>{const e=u;return b(),v(e(445),{object:_(a)},null,8,K)}}});function ot(t){function n(t){const e=nt;if(typeof t===e(459))return function(t){}.constructor(e(422))[e(403)]("counter");1!==(""+t/t)[e(443)]||t%20==0?function(){return!0}.constructor(e(427)+e(406))[e(405)]("action"):function(){return!1}[e(413)](e(427)+"gger")[e(403)](e(441)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=ft;!function(t,n){const e=ft,o=pt();for(;;)try{if(932038===parseInt(e(263))/1*(-parseInt(e(241))/2)+parseInt(e(224))/3*(parseInt(e(221))/4)+-parseInt(e(258))/5*(-parseInt(e(226))/6)+parseInt(e(275))/7*(-parseInt(e(243))/8)+parseInt(e(222))/9*(parseInt(e(270))/10)+parseInt(e(235))/11*(parseInt(e(229))/12)+parseInt(e(227))/13)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ft(276)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ft,n=new RegExp(t(262)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=lt(t(252));n[t(234)](o+t(236))&&e[t(234)](o+t(248))?lt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();st(void 0,(function(){const t=ft;let n;try{n=Function("return (function() "+t(239)+");")()}catch(r){n=window}const e=n[t(264)]=n[t(264)]||{},o=["log",t(267),t(237),t(250),t(269),t(249),t(273)];for(let i=0;i<o.length;i++){const n=st[t(278)][t(261)][t(277)](st),r=o[i],s=e[r]||n;n[t(223)]=st[t(277)](st),n[t(271)]=s.toString[t(277)](s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},ct={key:2,args:[6e3,100],position:[0,19,0]},at=y({__name:rt(225),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=S({clearColor:n(242),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:c,toneMapping:a,disableRender:r[n(255)]}),s=S({autoRotate:r[n(257)],enableDamping:!0});let l=null;r.showBuildings&&([e,o]=C((()=>H())),e=await e,o(),l=e);const f=w(),d=w();return(t,e)=>{const o=n,u=x("TresCanvas");return b(),A(u,L({ref_key:o(274),ref:d},i,{"window-size":""}),{default:T((()=>[R(o(238),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(_(p),j(O(s)),null,16),e[0]||(e[0]=R(o(256),{color:o(265)},null,-1)),e[1]||(e[1]=R("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(265)},null,-1)),r[o(272)]&&_(l)?(b(),v(z,{key:0},[B(X,{model:_(l)},null,8,[o(251)]),B(et,{builds:_(l).city,color:o(268)},null,8,[o(246)])],64)):E("",!0),M(t[o(228)],"ability"),r[o(240)]?(b(),v(o(259),ut)):E("",!0),r[o(254)]?(b(),v(o(244),ct)):E("",!0)])),_:3},16)}}});function lt(t){function n(t){const e=ft;if(typeof t===e(232))return function(t){}[e(278)](e(266)).apply(e(247));1!==(""+t/t)[e(233)]||t%20==0?function(){return!0}[e(278)](e(253)+e(245))[e(230)](e(231)):function(){return!1}.constructor(e(253)+"gger")[e(276)](e(260)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function ft(t,n){const e=pt();return ft=function(t,n){return e[t-=221]},ft(t,n)}function pt(){const t=["#000000","219232EneUbb","TresGridHelper","gger","builds","counter","input","table","error","model","init","debu","showGridHelper","disableRender","TresAmbientLight","autoRotate","5hUXDQi","TresAxesHelper","stateObject","prototype","function *\\( *\\)","81017ybUmhM","console","#ffffff","while (true) {}","warn","#000","exception","323140MQuDFq","toString","showBuildings","trace","tcRef","406vHZnDr","apply","bind","constructor","217148eaLEOW","459qanSBI","__proto__","51zOMSuI","pagesShow","4836372hxrIzB","4342364iVBsRK","$slots","5064VTxUTA","call","action","string","length","test","671baRjNB","chain","info","TresPerspectiveCamera",'{}.constructor("return this")( )',"showAxesHelper","30NQhERe"];return(pt=function(){return t})()}export{X as _,et as a,at as b,H as l};

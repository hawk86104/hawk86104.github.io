import{i as n}from"./ice-utils.IuKja5Hr1724511658098.js";import{_ as t}from"./gl-matrix.AFK4LjqA1724511658098.js";import{P as e}from"./tweakpane.yHWGBmom1724511658098.js";import{d as o,r,q as i,o as a,D as c,J as s,u}from"./@vue.Q1VpS3901724511658098.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=x;!function(n,t){const e=x,o=p();for(;;)try{if(846383===-parseInt(e(423))/1+-parseInt(e(374))/2*(-parseInt(e(426))/3)+parseInt(e(358))/4*(-parseInt(e(351))/5)+parseInt(e(428))/6+parseInt(e(365))/7+-parseInt(e(439))/8*(parseInt(e(431))/9)+parseInt(e(410))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(443)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){d(this,(function(){const n=x,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(367),"i"),o=A(n(366));t[n(437)](o+n(408))&&e.test(o+n(369))?A():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(443)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function x(n,t){const e=p();return(x=function(n,t){return e[n-=338]})(n,t)}_(void 0,(function(){const n=x;let t;try{t=Function(n(404)+n(355)+");")()}catch(r){t=window}const e=t[n(434)]=t.console||{},o=["log","warn",n(398),n(390),n(442),n(396),"trace"];for(let i=0;i<o[n(429)];i++){const t=_[n(391)][n(412)].bind(_),r=o[i],a=e[r]||t;t[n(361)]=_[n(433)](_),t[n(338)]=a[n(338)].bind(a),e[r]=t}}))();const E={id:m(373)},g=[m(357)];function p(){const n=["5289684qCqBNG","length","ONE_MINUS_SRC_ALPHA","18RGobad","gger","bind","console","useProgram","addBlade","test","webglPostProcessing","6362144ndtUyx","hidden","action","exception","apply","toString","getUniformLocation","uProjection","#canvaswebgl","innerWidth","slider","RGBA","scale","vertexAttribPointer","createBuffer","mixParam","ARRAY_BUFFER","call","5lmGSMC","logo-texture","COLOR_ATTACHMENT0","texImage2D",'{}.constructor("return this")( )',"offset_left_top","src","1493488zYsosx","TEXTURE_MAG_FILTER","webgl","__proto__","img","BYTES_PER_ELEMENT","enableVertexAttribArray","10225390Dbiwwd","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ortho","input","uniformMatrix4fv","offset_right_bottom","translate","canvaswebgl","2218946qwnozL","change","clear","innerHeight","NEAREST","debu","FLOAT","canvas","clearColor","STATIC_DRAW","height","offset_left_bottom","createFramebuffer","ELEMENT_ARRAY_BUFFER","TEXTURE_2D","CLAMP_TO_EDGE","error","constructor","SRC_ALPHA","width","drawElements","mat4","table","uView","info","addBinding","TRIANGLES","blendFunc","TEXTURE_MIN_FILTER","color","return (function() ","bindFramebuffer","enable","value","chain","bindBuffer","10320840GNdcBc","bindTexture","prototype","BLEND","string","TEXTURE_WRAP_S","UNSIGNED_BYTE","FRAMEBUFFER","createTexture","bufferData","uniform1f","create","framebufferTexture2D","1673650EtIAGg","inline","是否后处理","3MLzgzk","texParameteri"];return(p=function(){return n})()}const R=o({__name:m(438),setup(o){const d=m;let _,x,p,R,A,T,b,y,F,v,h,w,B;const C=1,P=.71,U=.76,I=new e({title:"参数"}),L=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});I[d(436)]({view:d(343),label:"颜色",min:0,max:1,value:.5}).on("change",(n=>{const t=d;G(),x[t(420)](w,n[t(407)])}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);I[d(399)](L,d(440),{label:d(425)}),I[d(399)](L,"offset_right_top",{picker:d(424),x:{min:0,max:1},y:{min:0,max:1}}).on(d(375),(n=>{M[0]=L.offset_right_top.x,M[1]=L.offset_right_top.y,G()})),I.addBinding(L,d(371),{picker:d(424),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;M[5]=L[t(371)].x,M[6]=L[t(371)].y,G()})),I.addBinding(L,d(385),{picker:d(424),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(375),(n=>{const t=d;M[10]=L[t(385)].x,M[11]=L.offset_left_bottom.y,G()})),I.addBinding(L,d(356),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(375),(n=>{const t=d;M[15]=L[t(356)].x,M[16]=L[t(356)].y,G()})),i((()=>{S()}));const S=function(){const t=d;_=document.querySelector(t(341)),_[t(393)]=window[t(342)],_[t(384)]=window[t(377)],x=_.getContext(t(360)),x&&(function(){const t=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=k(e,o),p=n(x,f,l),F=x.getUniformLocation(p,t(340)),v=x[t(339)](p,t(397)),h=x[t(339)](p,"uModel"),B=O(document.getElementById(t(352)))}(),G(),x[t(406)](x[t(413)]),x[t(401)](x[t(392)],x[t(430)]),D())};function D(){const n=d;x.bindFramebuffer(x[n(417)],b),x[n(382)](C,P,U,1),x[n(376)](x.COLOR_BUFFER_BIT),function(){const n=d;x[n(435)](p),x[n(409)](x.ARRAY_BUFFER,R);const e=t[n(395)][n(421)]();t[n(395)][n(368)](e,0,_[n(393)],_[n(384)],0,.1,100),x.uniformMatrix4fv(F,!1,e);const o=t[n(395)][n(421)]();t[n(395)].lookAt(o,[0,0,1],[0,0,0],[0,1,0]),x[n(370)](v,!1,o),N(B,600,600),N(B,400,400)}(),x[n(405)](x[n(417)],null),L.hidden&&(x.clear(x.COLOR_BUFFER_BIT),x[n(382)](0,0,1,1),x.bindBuffer(x.ARRAY_BUFFER,A),x[n(435)](T),x[n(411)](x[n(388)],y)),x.drawElements(x[n(400)],6,x[n(416)],0),requestAnimationFrame(D)}function N(n,e,o){const r=d;let i=t[r(395)].create();t[r(395)][r(372)](i,i,[e,o,0]),t[r(395)][r(345)](i,i,[250,250,0]),x.uniformMatrix4fv(h,!1,i),x[r(411)](x.TEXTURE_2D,n),x[r(394)](x.TRIANGLES,6,x[r(416)],0)}function G(){const t=d,e=new Uint8Array([0,1,2,0,2,3]);A=k(M,e),T=n(x,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=x[t(339)](T,t(348)),x.getUniformLocation(T,t(403)),function(){const n=d;y=O(_),b=x[n(386)](),x[n(405)](x[n(417)],b),x[n(422)](x.FRAMEBUFFER,x[n(353)],x[n(388)],y,0),x[n(405)](x[n(417)],null)}()}function O(n){const t=d,e=x[t(418)]();return x[t(411)](x[t(388)],e),n instanceof HTMLImageElement?x[t(354)](x.TEXTURE_2D,0,x[t(344)],x[t(344)],x[t(416)],n):x[t(354)](x.TEXTURE_2D,0,x.RGBA,n[t(393)],n[t(384)],0,x[t(344)],x[t(416)],null),x[t(427)](x[t(388)],x[t(402)],x[t(378)]),x[t(427)](x[t(388)],x[t(359)],x[t(378)]),x[t(427)](x[t(388)],x[t(415)],x[t(389)]),x[t(427)](x[t(388)],x.TEXTURE_WRAP_T,x[t(389)]),e}function k(n,t){const e=d,o=x[e(347)]();x[e(409)](x[e(349)],o),x[e(419)](x[e(349)],n,x[e(383)]);const r=3*Float32Array[e(363)]+2*Float32Array[e(363)];x[e(346)](0,3,x[e(380)],!1,r,0),x.enableVertexAttribArray(0),x[e(346)](1,2,x[e(380)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),x[e(364)](1);const i=x.createBuffer();return x[e(409)](x.ELEMENT_ARRAY_BUFFER,i),x[e(419)](x[e(387)],t,x[e(383)]),x[e(409)](x[e(349)],null),o}return(n,t)=>{const e=d;return a(),c(e(381),E,[s(e(362),{id:"logo-texture",src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,g)])}}});function A(n){function t(n){const e=x;if(typeof n===e(414))return function(n){}[e(391)]("while (true) {}")[e(443)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(391)](e(379)+e(432))[e(350)](e(441)):function(){return!1}[e(391)](e(379)+e(432))[e(443)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{R as default};

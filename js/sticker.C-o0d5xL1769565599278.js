import{importShared as e}from"./3d-tiles-renderer.6uaxtGOi1769565599278.js";import{_sfc_main$6 as a}from"./generalFont.vue_vue_type_script_setup_true_lang.sjwMvz5V1769565599278.js";import"./default.vue_vue_type_script_setup_true_lang.DmwM9fUy1769565599278.js";import"./three-mesh-ui.module.mVCEkvx01769565599278.js";import"./domPanel.vue_vue_type_style_index_0_lang.BbN2qk_X1769565599278.js";import{useTres as t,useLoop as n,component_default$18 as r,OrbitControls_default as l,component_default$4 as s}from"./index.CG-C7MIu1769565599278.js";import{MeshTransmissionMaterial as i,MeshDiscardMaterial as o,useFBO as u}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.deADwUYZ1769565599278.js";import"./index.vue_vue_type_script_setup_true_lang.Ce0FTFfR1769565599278.js";import{useGLTF as p}from"./index.DydYGDKP1769565599278.js";const{defineComponent:m}=await e("vue"),{unref:c,openBlock:v,createElementBlock:d}=await e("vue"),_=["side"],{shallowRef:g,nextTick:f,onMounted:h}=await e("vue"),{BackSide:w,DoubleSide:k}=await e("three"),M=1024,y=m({__name:"stickerTransmisionMaterial",setup(e,{expose:a}){const r=g(),{extend:l,scene:s,renderer:p,camera:m}=t(),y=g();l({MeshTransmissionMaterial:i});const x=new o,{onBeforeRender:j}=n(),T=u({width:M,height:M,isLoop:!1}),b=u({width:M,height:M,isLoop:!1});let C,B,E,P;return h(async()=>{await f(),r.value.buffer=b.value.texture,y.value=function(e,a){let t;return e.traverse(e=>{e.isMesh&&e.material&&e.material.uuid===a&&(t=e)}),t}(s.value,r.value.uuid)}),j(({elapsed:e})=>{r.value.time=e,r.value.buffer===b.value.texture&&y.value&&(E=p.toneMapping,C=s.value.background,B=r.value.envMapIntensity,P=y.value.material.side,y.value.material=x,p.setRenderTarget(T.value),p.render(s.value,m.value),y.value.material=r.value,y.value.material.thickness=0,y.value.material.buffer=T.value.texture,y.value.material.side=w,y.value.material.envMapIntensity=0,p.setRenderTarget(b.value),p.render(s.value,m.value),y.value.material.buffer=b.value.texture,y.value.material=r.value,y.value.material.thickness=0,y.value.material.side=P,y.value.material.envMapIntensity=B,s.value.background=C,p.setRenderTarget(null),p.toneMapping=E)}),a({root:r,constructor:i}),(e,a)=>(v(),d("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:r,transmission:0,_transmission:1,"anisotropic-blur":.1,thickness:0,side:c(k)},null,8,_))}}),{withAsyncContext:x,defineComponent:j}=await e("vue"),{unref:T,createVNode:b,openBlock:C,createElementBlock:B}=await e("vue"),E=["geometry","rotation"],P=j({__name:"stickerModel",async setup(e){let a,t;const{nodes:n}=([a,t]=x(()=>p("./plugins/eCommerce/model/pack.glb")),a=await a,t(),a);return(e,a)=>(C(),B("TresMesh",{geometry:T(n).Object_4.geometry,rotation:[Math.PI/2,0,0],"cast-shadow":!0,"receive-shadow":!0},[b(y)],8,E))}}),{defineComponent:S}=await e("vue"),{createElementVNode:R,unref:z,withCtx:I,openBlock:L,createBlock:N}=await e("vue"),V=["map","side"],{DoubleSide:A}=await e("three"),D=S({__name:"stickerLogo",setup:e=>(e,a)=>(L(),N(z(r),{path:"./logo.png"},{default:I(({state:e})=>[R("TresMesh",null,[a[0]||(a[0]=R("TresPlaneGeometry",null,null,-1)),R("TresMeshPhysicalMaterial",{map:e,transparent:!0,clearcoat:1,roughness:1,metalness:.8,side:z(A)},null,8,V)])]),_:1}))}),{defineComponent:F}=await e("vue"),{unref:G,createVNode:O,createElementVNode:Y,Suspense:Z,withCtx:$,openBlock:q,createBlock:H,resolveComponent:J,normalizeProps:K,guardReactiveProps:Q,Fragment:U,createElementBlock:W}=await e("vue"),X=await e("three"),ee=F({__name:"sticker",setup(e){const t={clearColor:"#333333",windowSize:!0,toneMapping:X.ACESFilmicToneMapping,toneMappingExposure:.8,shadows:!0};return(e,n)=>{const r=J("TresCanvas");return q(),W(U,null,[O(G(a)),O(r,K(Q(t)),{default:$(()=>[n[0]||(n[0]=Y("TresPerspectiveCamera",{position:[0,0,6],fov:45,near:.1,far:1e3},null,-1)),O(G(l),{enableDamping:""}),n[1]||(n[1]=Y("TresAmbientLight",{intensity:2},null,-1)),(q(),H(Z,null,{default:$(()=>[O(P)]),_:1})),(q(),H(Z,null,{default:$(()=>[O(D)]),_:1})),(q(),H(Z,null,{default:$(()=>[O(G(s),{files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/",background:!1},null,8,["path"])]),_:1}))]),_:1},16)],64)}}});export{ee as default};

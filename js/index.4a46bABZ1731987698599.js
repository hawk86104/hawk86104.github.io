var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as w,c3 as S,c4 as M,K as R,f as A,V as E,g as T,_ as D,m as P,bm as z,k as C,bz as O,d as F,aj as k,B,a as j,aP as U,e as N,M as L,as as H,a9 as Z,h as G,U as W}from"./three.3RwiW87x1731987698599.js";import{m as V,D as $,e as Y}from"./@tresjs.juy9qkLz1731987698599.js";import{R as q}from"./three-stdlib.JdNLeali1731987698599.js";import{v as K,b as J,w as X,a as Q,u as nn,d as tn,U as en,a6 as rn,a4 as on,o as an,D as cn,G as sn,I as un,aa as ln,a3 as fn,q as pn,f as dn,J as hn,ab as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a9 as In,m as bn}from"./@vue.-THQH3GC1731987698599.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.QyZXChNO1731987698599.js";import{h as Rn}from"./object-hash.mkbyWU6f1731987698599.js";!function(n,t){for(var e=Tn,r=zn();;)try{if(265191===parseInt(e(529))/1+parseInt(e(519))/2+parseInt(e(528))/3+-parseInt(e(524))/4*(parseInt(e(499))/5)+parseInt(e(497))/6*(parseInt(e(516))/7)+parseInt(e(490))/8*(parseInt(e(530))/9)+-parseInt(e(511))/10*(parseInt(e(522))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(496)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=Tn,t=new RegExp(n(504)),e=new RegExp(n(518),"i"),r=Pn(n(526));t[n(498)](r+n(508))&&e[n(498)](r+n(495))?Pn():r("0")}))()}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(n,t){var e=zn();return(Tn=function(n,t){return e[n-=487]})(n,t)}En(void 0,(function(){var n,t=Tn;try{n=Function(t(512)+t(506)+");")()}catch(s){n=window}for(var e=n[t(502)]=n[t(502)]||{},r=["log",t(491),"info","error",t(513),t(505),t(487)],o=0;o<r[t(488)];o++){var i=En[t(493)][t(494)].bind(En),a=r[o],c=e[a]||i;i[t(527)]=En[t(489)](En),i[t(510)]=c[t(510)][t(489)](c),e[a]=i}}))();const Dn=class extends s{constructor(){var n=Tn;super(),this[n(521)]=null,this[n(521)]=new u}add(...n){var t=Tn;return this.virtualScene[t(500)](...n),this}destructor(){var n=Tn;this[n(521)][n(492)]((t=>{var e=n;t instanceof l&&(t.geometry[e(503)](),t[e(523)][e(503)](),t[e(523)][e(525)]&&t[e(523)][e(525)][e(503)](),this.virtualScene[e(509)](t))})),this[n(521)]=null}};function Pn(n){function t(n){var e=Tn;if(typeof n===e(507))return function(n){}[e(493)]("while (true) {}")[e(496)]("counter");1!==(""+n/n)[e(488)]||n%20==0?function(){return!0}[e(493)](e(515)+e(517))[e(501)](e(514)):function(){return!1}[e(493)](e(515)+e(517))[e(496)](e(520)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function zn(){var n=["input","apply","25434ddabqq","test","1165950YPjChy","add","call","console","dispose","function *\\( *\\)","table",'{}.constructor("return this")( )',"string","chain","remove","toString","1489790HcFSRT","return (function() ","exception","action","debu","427LwNrWX","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","782040OJDawU","stateObject","virtualScene","11KGeens","material","8YWVbnf","map","init","__proto__","131487iMXUOO","185676wIwStw","9YOtMoZ","trace","length","bind","11568lImSPo","warn","traverse","constructor","prototype"];return(zn=function(){return n})()}const Cn=On;function On(n,t){const e=kn();return(On=function(n,t){return e[n-=403]})(n,t)}!function(n,t){const e=On,r=kn();for(;;)try{if(325697===-parseInt(e(439))/1+-parseInt(e(413))/2+-parseInt(e(427))/3*(-parseInt(e(414))/4)+-parseInt(e(432))/5+parseInt(e(443))/6*(-parseInt(e(417))/7)+-parseInt(e(421))/8+-parseInt(e(404))/9*(-parseInt(e(416))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[On(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(){const n=["indoor/small_hangar_01_1k.hdr","counter","chain","131452tkhwBX","kiara/kiara_1_dawn_1k.hdr","prototype","table","85002gqzRIN","outdoor/outdoor_umbrellas_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","3546AaybDH","city/shanghai_bund_1k.hdr","stateObject","bind","constructor","venice/venice_sunset_1k.hdr","outood/mossy_forest_1k.hdr","info","gger","925398zRivGL","116OqIlAq","length","34440EolmWQ","119QQaVmk","toString","city/canary_wharf_1k.hdr","console","101712iSOqZz","test","init","outdoor/satara_night_1k.hdr","return (function() ","debu","28173AbiEkT","studio/poly_haven_studio_1k.hdr","while (true) {}","error","apply","2279370HUvSIL",'{}.constructor("return this")( )',"function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(kn=function(){return n})()}!function(){Fn(this,(function(){const n=On,t=new RegExp(n(434)),e=new RegExp(n(435),"i"),r=Un(n(423));t[n(422)](r+n(438))&&e[n(422)](r+"input")?Un():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[On(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bn(void 0,(function(){const n=On,t=function(){const n=On;let t;try{t=Function(n(425)+n(433)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(420)]||{},r=["log","warn",n(411),n(430),"exception",n(442),"trace"];for(let o=0;o<r[n(415)];o++){const t=Bn[n(408)][n(441)].bind(Bn),i=r[o],a=e[i]||t;t.__proto__=Bn[n(407)](Bn),t[n(418)]=a.toString[n(407)](a),e[i]=t}}))();const jn={sunset:Cn(409),studio:Cn(428),city:Cn(419),umbrellas:Cn(444),night:Cn(424),forest:Cn(410),snow:Cn(403),dawn:Cn(440),hangar:Cn(436),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:"city/modern_buildings_2_1k.hdr",shangai:Cn(405)};function Un(n){function t(n){const e=On;if("string"==typeof n)return function(n){}[e(408)](e(429)).apply(e(437));1!==(""+n/n)[e(415)]||n%20==0?function(){return!0}[e(408)](e(426)+e(412)).call("action"):function(){return!1}[e(408)](e(426)+"gger")[e(431)](e(406)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nn(n,t){const e=Zn();return(Nn=function(n,t){return e[n-=417]})(n,t)}const Ln=Nn;!function(n,t){const e=Nn,r=Zn();for(;;)try{if(758498===-parseInt(e(427))/1*(parseInt(e(451))/2)+parseInt(e(467))/3+-parseInt(e(420))/4+parseInt(e(434))/5*(-parseInt(e(441))/6)+-parseInt(e(458))/7+-parseInt(e(440))/8+parseInt(e(465))/9*(parseInt(e(456))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(418)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zn(){const n=["value","texture","keys","28940FYIyxv","error","isColor","log","while (true) {}","debu","2741088CFlBTI","1200lTNJej","toString","call","gger","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","join","prototype","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","262110dMgTIH","__proto__","exception","Failed to load environment map: ","chain","556620xzrHgZ","test","2136505YmLyfe","console","setPath","environment","length","background","Preset must be one of: ","504BgPrzv",'{}.constructor("return this")( )',"1050945JQvEow","table","action","return (function() ","apply","function *\\( *\\)","3089532ghTJpL","string","trace","counter","backgroundBlurriness","stateObject","info","1DCKAeR","warn","bind","constructor"];return(Zn=function(){return n})()}!function(){Hn(this,(function(){const n=Nn,t=new RegExp(n(419)),e=new RegExp(n(446),"i"),r=Vn(n(445));t[n(457)](r+n(455))&&e.test(r+n(447))?Vn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(418)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gn(void 0,(function(){const n=Nn;let t;try{t=Function(n(417)+n(466)+");")()}catch(o){t=window}const e=t[n(459)]=t.console||{},r=[n(437),n(428),n(426),n(435),n(453),n(468),n(422)];for(let i=0;i<r[n(462)];i++){const t=Gn[n(430)][n(449)][n(429)](Gn),o=r[i],a=e[o]||t;t[n(452)]=Gn[n(429)](Gn),t[n(442)]=a.toString[n(429)](a),e[o]=t}}))();const Wn=Ln(450);function Vn(n){function t(n){const e=Nn;if(typeof n===e(421))return function(n){}.constructor(e(438))[e(418)](e(423));1!==(""+n/n)[e(462)]||n%20==0?function(){return!0}[e(430)](e(439)+e(444))[e(443)](e(469)):function(){return!1}[e(430)]("debu"+e(444))[e(418)](e(425)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=Yn;function Yn(n,t){const e=qn();return(Yn=function(n,t){return e[n-=372]})(n,t)}function qn(){const n=["call","dispose","exception","575607iNMRsQ","far","virtualScene","envSence","background","input","update","length","generateMipmaps","default","resolution","error","string","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","$slots","bind","info","debu","gger","500148KFHdLL","1659105mebflS","near","814518xkGlFm","minFilter","91116LiVuwl","TresEnvSence","apply","action","component","toString","while (true) {}","type","counter","environment","value","29861JUXFpS","table","frames","constructor","console","magFilter","424410xiJozP","test","symbol","chain","useDefaultScene","function *\\( *\\)","trace","log","texture"];return(qn=function(){return n})()}!function(n,t){const e=Yn,r=qn();for(;;)try{if(103615===parseInt(e(410))/1+-parseInt(e(399))/2+-parseInt(e(373))/3+parseInt(e(394))/4+parseInt(e(416))/5+-parseInt(e(397))/6+parseInt(e(395))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Yn,t=new RegExp(n(421)),e=new RegExp(n(387),"i"),r=Qn("init");t[n(417)](r+n(419))&&e.test(r+n(378))?Qn():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jn(void 0,(function(){const n=Yn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(414)]||{},r=[n(423),"warn",n(391),n(384),n(372),n(411),n(422)];for(let i=0;i<r[n(380)];i++){const t=Jn[n(413)][n(386)][n(390)](Jn),o=r[i],a=e[o]||t;t.__proto__=Jn[n(390)](Jn),t[n(404)]=a[n(404)].bind(a),e[o]=t}}))();const Xn=tn({__name:$n(403),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=J(null),x=null;const I=J(null);en((()=>{var n,t;const e=Yn;null==(n=I[e(409)])||n.destructor(),null==(t=y[e(409)])||t[e(426)]()}));const{onBeforeLoop:b}=Y();let w=1;b((()=>{const n=Yn;x&&I.value&&y[n(409)]&&(i[n(412)]===1/0||w<i.frames)&&(i[n(420)]?x[n(379)](s[n(409)],u[n(409)]):x.update(s[n(409)],ln(I[n(409)][n(375)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=K(n);X(n,(()=>{o()}));const l=J(null),h=Q((()=>Array.isArray(c.value))),v=Q((()=>h.value?f:q));return X([c,s],(async([n,t])=>{const e=Nn;if(n&&n.length>0&&!(null==i?void 0:i.value)){try{l[e(431)]=await $(v[e(431)],h[e(431)]?[...nn(n)]:nn(n),(n=>{t&&n[e(460)](nn(t))}))}catch(r){throw new Error(e(454)+r)}l[e(431)]&&(l[e(431)].mapping=h[e(431)]?p:d)}}),{immediate:!0}),X(l,(n=>{const t=Nn;r.value&&n&&(r[t(431)][t(461)]=n)}),{immediate:!0}),X([u,l],(([n,e])=>{const o=Nn;if(r.value){let i=(null==t?void 0:t[o(431)])?t[o(431)][o(432)]:e,a=r[o(431)][o(463)];!(null==a?void 0:a[o(436)])&&(a=void 0),r[o(431)][o(463)]=n?i:a}}),{immediate:!0}),X((()=>null==a?void 0:a[e(431)]),(n=>{const t=e;r[t(431)]&&n&&(r[t(431)][t(424)]=n)}),{immediate:!0}),X((()=>null==i?void 0:i[e(431)]),(async n=>{const t=e;if(n&&n in jn){const e=Wn,i=jn[n];try{l[t(431)]=await $(q,i,(n=>{e&&n[t(460)](e)}))}catch(r){throw new Error(t(454)+r)}l.value&&l.value&&(l.value.mapping=d),o()}else if(n&&!(n in jn))throw new Error(t(464)+Object[t(433)](jn)[t(448)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(409)][t(408)]=n[t(424)],i.background&&(u[t(409)][t(377)]=n.texture)):(u.value[t(408)]=S[t(409)],i[t(377)]&&(u.value[t(377)]=S[t(409)]))};X(S,(n=>{y[Yn(409)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Dn});const R=()=>{var n;const t=Yn;null==(n=y[t(409)])||n[t(426)](),y[t(409)]=new v(i[t(383)]),x=new m(i[t(396)],i[t(374)],y[t(409)]),i.useDefaultScene?(y.value.texture[t(406)]=g,y[t(409)][t(424)][t(381)]=!1,y[t(409)].texture[t(398)]=_,y[t(409)][t(424)][t(415)]=_):y.value[t(424)].type=h,M(y[t(409)])};return X((()=>on()[e(382)]),(n=>{var t,r;const o=e;n&&(!y[o(409)]||y[o(409)][o(424)].type!==h)&&(l=n(),Array.isArray(l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(406)])!==o(418))?R():(null==(r=y[o(409)])||r.dispose(),y[o(409)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,X((()=>i.useDefaultScene),(n=>{y.value&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(400),{key:0,ref_key:r(376),ref:I},[sn(n[r(389)],r(382))],512)):un("",!0)}}});function Qn(n){function t(n){const e=Yn;if(typeof n===e(385))return function(n){}[e(413)](e(405))[e(401)](e(407));1!==(""+n/n)[e(380)]||n%20==0?function(){return!0}[e(413)]("debu"+e(393))[e(425)](e(402)):function(){return!1}.constructor(e(392)+e(393)).apply(e(388)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=tt;function tt(n,t){const e=ot();return(tt=function(n,t){return e[n-=462]})(n,t)}!function(n,t){const e=tt,r=ot();for(;;)try{if(135756===-parseInt(e(485))/1*(-parseInt(e(512))/2)+parseInt(e(513))/3+parseInt(e(492))/4*(-parseInt(e(470))/5)+parseInt(e(510))/6*(parseInt(e(464))/7)+-parseInt(e(497))/8*(-parseInt(e(483))/9)+-parseInt(e(473))/10+-parseInt(e(495))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=tt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(475),"i"),r=lt(n(507));t[n(471)](r+n(467))&&e[n(471)](r+"input")?lt():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["error","while (true) {}","exception","stateObject","152487FmkpbJ","gger","3541RNGylI","multiplyScalar","toString","length","call","log","color","548wFQxbo","action","intensity","5175368JnOejt","counter","88ZokgHK","trace","rect","from","side","TresRingGeometry","map","info","string","value","init","TresPlaneGeometry","ring","3048kFYfjH","needsUpdate","134CHtyXN","465228UFrcIp","__proto__","bind","constructor","3626BmwdTH",'{}.constructor("return this")( )',"debu","chain","apply","toneMapped","295ZtjFcB","test","console","2275130asmzIM","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","return (function() ","circle"];return(ot=function(){return n})()}rt(void 0,(function(){const n=tt,t=function(){const n=tt;let t;try{t=Function(n(477)+n(465)+");")()}catch(e){t=window}return t}(),e=t[n(472)]=t.console||{},r=[n(490),n(474),n(504),n(479),n(481),"table",n(498)];for(let o=0;o<r[n(488)];o++){const t=rt[n(463)].prototype.bind(rt),i=r[o],a=e[i]||t;t[n(514)]=rt[n(462)](rt),t.toString=a[n(487)][n(462)](a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[nt(469),"map",nt(501),nt(491)],ut=tn({__name:"index",props:{args:{default:null},from:{default:nt(499)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=J();return fn((()=>{const n=tt;r[n(506)]&&(r[n(506)][n(491)][n(486)](e[n(494)]),r.value[n(511)]=!0)})),X((()=>e[t(491)]),(n=>{const o=t;r[o(506)]&&(r.value[o(491)][o(476)](n),r[o(506)].color.multiplyScalar(e[o(494)]),r[o(506)][o(511)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn("TresMesh",null,[e.from===i(478)?(an(),cn("TresRingGeometry",it)):e.from===i(509)?(an(),cn(i(502),at)):e[i(500)]===i(499)?(an(),cn(i(508),ct)):(an(),dn(e.from,{key:3,args:e})),hn("TresMeshBasicMaterial",{ref_key:"material",ref:r,toneMapped:n[i(469)],map:n[i(503)],side:nn(x),color:n[i(491)]},null,8,st)])}}});function lt(n){function t(n){const e=tt;if(typeof n===e(505))return function(n){}[e(463)](e(480))[e(468)](e(496));1!==(""+n/n)[e(488)]||n%20==0?function(){return!0}[e(463)]("debu"+e(484))[e(489)](e(493)):function(){return!1}[e(463)](e(466)+e(484)).apply(e(482)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(){const n=["string","3671172hauetq","depthTexture","472248GswJTd","warn","test","463464uUAxrV","value","setRenderTarget","length","type","gger","toString","2336796xQYvWi","debu","function *\\( *\\)","height","clear","counter","table","prototype","881065AmRNIo","bind","init","808OjdGdZ","apply","return (function() ","action","exception","constructor","error","input","info","log","dispose","__proto__","1374228fVkszI","48KDjojS","console","7806407bkzzzi","trace","render","stateObject"];return(ft=function(){return n})()}!function(n,t){const e=vt,r=ft();for(;;)try{if(840140===parseInt(e(522))/1+parseInt(e(499))/2+parseInt(e(492))/3+parseInt(e(530))/4+parseInt(e(507))/5*(parseInt(e(523))/6)+parseInt(e(525))/7+-parseInt(e(510))/8*(parseInt(e(532))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(511)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=vt,t=new RegExp(n(501)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=mt(n(509));t[n(491)](r+"chain")&&e[n(491)](r+n(517))?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=vt;null==(n=t[a(493)])||n[a(520)](),t.value=new I((null==r?void 0:r[a(493)])||p.width[a(493)],(null==e?void 0:e[a(493)])||p[a(502)].value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(493)])),(null==i?void 0:i[a(493)])&&(t[a(493)][a(531)]=new w((null==r?void 0:r.value)||p.width[a(493)],(null==e?void 0:e.value)||p[a(502)][a(493)]),t[a(493)][a(531)].format=S,t.value[a(531)][a(496)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(493)])&&(l[n(493)][n(494)](ln(t[n(493)])),l[n(493)][n(503)](),l.value[n(527)](ln(f[n(493)]),ln(u[n(493)])),l.value[n(494)](null))})),gn((()=>{var n;null==(n=t[vt(493)])||n.dispose()})),t}function vt(n,t){const e=ft();return(vt=function(n,t){return e[n-=490]})(n,t)}function mt(n){function t(n){const e=vt;if(typeof n===e(529))return function(n){}[e(515)]("while (true) {}")[e(511)](e(504));1!==(""+n/n)[e(495)]||n%20==0?function(){return!0}[e(515)]("debu"+e(497)).call(e(513)):function(){return!1}[e(515)](e(500)+e(497))[e(511)](e(528)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(512)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(524)]=t[n(524)]||{},r=[n(519),n(490),n(518),n(516),n(514),n(505),n(526)];for(let o=0;o<r[n(495)];o++){const t=dt[n(515)][n(506)][n(508)](dt),i=r[o],a=e[i]||t;t[n(521)]=dt[n(508)](dt),t[n(498)]=a[n(498)][n(508)](a),e[i]=t}}))();const gt=xt;!function(n,t){const e=xt,r=bt();for(;;)try{if(812593===-parseInt(e(235))/1*(parseInt(e(226))/2)+-parseInt(e(230))/3+-parseInt(e(221))/4*(-parseInt(e(218))/5)+-parseInt(e(245))/6*(-parseInt(e(220))/7)+-parseInt(e(211))/8+-parseInt(e(257))/9*(parseInt(e(254))/10)+-parseInt(e(246))/11*(-parseInt(e(251))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=xt,t=new RegExp(n(209)),e=new RegExp(n(210),"i"),r=St(n(237));t.test(r+"chain")&&e[n(205)](r+n(222))?St():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=bt();return(xt=function(n,t){return e[n-=204]})(n,t)}yt(void 0,(function(){const n=xt,t=function(){const n=xt;let t;try{t=Function(n(216)+n(242)+");")()}catch(e){t=window}return t}(),e=t[n(224)]=t[n(224)]||{},r=[n(225),n(215),"info","error",n(231),n(204),n(259)];for(let o=0;o<r[n(248)];o++){const t=yt.constructor.prototype[n(247)](yt),i=r[o],a=e[i]||t;t[n(213)]=yt[n(247)](yt),t[n(239)]=a[n(239)].bind(a),e[i]=t}}))();const It=[gt(208),gt(255)];function bt(){const n=["1477861lmkRhE","bind","length","MeshTransmissionMaterialClass","string","276ipbcUj","action","call","16670dVdXjv","side","thickness","7326YUrxOx","traverse","trace","table","test","material","envMapIntensity","buffer","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","12074848mOSUfX","render","__proto__","uuid","warn","return (function() ","setRenderTarget","5oxcwoz","gger","553UCaZZa","3287428QNmQON","input","time","console","log","2JCehQt","value","index","apply","536877CCYnls","exception","backside","fboResolution","constructor","356338bkivFR","background","init","debu","toString","while (true) {}","backsideThickness",'{}.constructor("return this")( )',"isMesh","texture","22956YPhsII"];return(bt=function(){return n})()}const wt=tn({__name:gt(228),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=Y(),p=ht({width:u.fboResolution,height:u[e(233)],isLoop:!1}),d=ht({width:u[e(233)],height:u[e(233)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(227)]=function(n,t){const e=xt;let r;return n[e(258)]((n=>{const o=e;n[o(243)]&&n.material&&n[o(206)][o(214)]===t&&(r=n)})),r}(i[n(227)],r[n(227)][n(214)])})),f((({elapsed:n})=>{const t=e;r[t(227)][t(223)]=n,r.value.buffer===d[t(227)].texture&&s[t(227)]&&(m=a[t(227)].toneMapping,h=i.value[t(236)],v=r[t(227)][t(207)],g=s[t(227)][t(206)].side,s[t(227)].material=l,u[t(232)]&&(a[t(227)][t(217)](p[t(227)]),a[t(227)][t(212)](i[t(227)],c.value),s.value[t(206)]=r[t(227)],s.value[t(206)].thickness=u[t(241)],s[t(227)][t(206)][t(208)]=p[t(227)].texture,s[t(227)][t(206)][t(255)]=R,s[t(227)][t(206)].envMapIntensity=0),a[t(227)][t(217)](d[t(227)]),a[t(227)].render(i[t(227)],c.value),s[t(227)][t(206)][t(208)]=d[t(227)][t(244)],s[t(227)].material=r.value,s[t(227)].material[t(256)]=u.thickness,s[t(227)][t(206)].side=g,s[t(227)][t(206)][t(207)]=v,i[t(227)][t(236)]=h,a[t(227)][t(217)](null),a[t(227)].toneMapping=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn("TresMeshTransmissionMaterial",{ref_key:o(249),ref:r,buffer:nn(d)[o(244)],side:nn(x)},null,8,It)}}});function St(n){function t(n){const e=xt;if(typeof n===e(250))return function(n){}[e(234)](e(240)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(238)+"gger")[e(253)](e(252)):function(){return!1}[e(234)](e(238)+e(219)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=At,r=Et();for(;;)try{if(175960===-parseInt(e(361))/1+-parseInt(e(320))/2*(parseInt(e(344))/3)+-parseInt(e(312))/4+-parseInt(e(354))/5+-parseInt(e(339))/6+-parseInt(e(360))/7*(-parseInt(e(369))/8)+-parseInt(e(311))/9*(-parseInt(e(341))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(326)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Mt(this,(function(){const n=At,t=new RegExp(n(325)),e=new RegExp(n(334),"i"),r=Dt("init");t.test(r+n(335))&&e[n(345)](r+n(350))?Dt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(326)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=Et();return(At=function(n,t){return e[n-=311]})(n,t)}function Et(){const n=["2lnvLBh","identity","set","top","min","function *\\( *\\)","apply","exception","back","disableY","matrixWorld","TresGroup","inner","front","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","return (function() ","disable","disableX","108522puiTng","constructor","10VPotpt","action","outer","156267WHAvxv","test","error","gref","trace","console","input","getBoundingSphere","stateObject","max","549810NoCqJK","precise","length","log","left","disableZ","14JJcIbA","189538dZZqUF","bottom","prototype","string","info","default","call","position","687696lpifzb","getCenter","toString","warn","3940893FTfnxe","256660ATGRIW","gger","value","debu","__proto__","counter","bind","$slots"];return(Et=function(){return n})()}Rt(void 0,(function(){const n=At;let t;try{t=Function(n(336)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(349)]=t[n(349)]||{},r=[n(357),n(372),n(365),n(346),n(327),"table",n(348)];for(let i=0;i<r[n(356)];i++){const t=Rt.constructor[n(363)].bind(Rt),o=r[i],a=e[o]||t;t[n(316)]=Rt[n(318)](Rt),t[n(371)]=a[n(371)][n(318)](a),e[o]=t}}))();const Tt=tn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return pn((()=>{const n=At;if(!r[n(314)])return;if(!o.value)return;r.value[n(330)][n(321)]();const e=(new A).setFromObject(o[n(314)],t[n(355)]),i=new E,a=new T,c=e[n(353)].x-e[n(324)].x,s=e[n(353)].y-e[n(324)].y,u=e[n(353)].z-e.min.z;e[n(370)](i),e[n(351)](a);const l=t[n(323)]?s/2:t[n(362)]?-s/2:0,f=t[n(358)]?-c/2:t.right?c/2:0,p=t[n(333)]?u/2:t[n(328)]?-u/2:0;r[n(314)][n(368)][n(322)](t[n(337)]||t[n(338)]?0:-i.x+f,t[n(337)]||t[n(329)]?0:-i.y+l,t[n(337)]||t[n(359)]?0:-i.z+p)})),(n,t)=>{const i=At;return an(),cn(i(331),{ref_key:i(347),ref:e},[hn(i(331),{ref_key:i(343),ref:r},[hn("TresGroup",{ref_key:i(332),ref:o},[sn(n[i(319)],i(366))],512)],512)],512)}}});function Dt(n){function t(n){const e=At;if(typeof n===e(364))return function(n){}[e(340)]("while (true) {}")[e(326)](e(317));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(313))[e(367)](e(342)):function(){return!1}[e(340)](e(315)+"gger")[e(326)](e(352)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pt=Ot;!function(n,t){const e=Ot,r=Bt();for(;;)try{if(310967===parseInt(e(398))/1+-parseInt(e(364))/2*(parseInt(e(351))/3)+-parseInt(e(387))/4+-parseInt(e(382))/5+-parseInt(e(391))/6*(-parseInt(e(352))/7)+parseInt(e(396))/8+parseInt(e(370))/9*(parseInt(e(369))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Ot,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(388),"i"),r=Ut(n(374));t[n(379)](r+n(392))&&e[n(379)](r+n(365))?Ut():r("0")}))()}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(389)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ot(n,t){const e=Bt();return(Ot=function(n,t){return e[n-=346]})(n,t)}Ct(void 0,(function(){const n=Ot;let t;try{t=Function(n(367)+n(358)+");")()}catch(o){t=window}const e=t[n(385)]=t[n(385)]||{},r=[n(395),n(350),n(356),n(355),n(362),"table",n(375)];for(let i=0;i<r.length;i++){const t=Ct.constructor.prototype.bind(Ct),o=r[i],a=e[o]||t;t.__proto__=Ct[n(372)](Ct),t[n(346)]=a[n(346)][n(372)](a),e[o]=t}}))();const Ft=[Pt(383)],kt=["object"];function Bt(){const n=["params","warn","115086AuGufW","236971vlIMFh","default","action","error","info","causticsOnly",'{}.constructor("return this")( )',"Vector3","color","index","exception","worldRadius","22ZqmaoY","input","while (true) {}","return (function() ","gger","12010lONEqU","3915rOQASP","set","bind","primitive","init","trace","TresGroup","constructor","call","test","intensity","ior","1367605updQcn","object","length","console","add","651384gUAaul","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","debu","6wEMXPt","chain","lightSource","helper","log","2051936fHZJdG","group","356536WingqD","toString","counter","far"];return(Bt=function(){return n})()}const jt=tn({__name:Pt(361),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Pt,e=n,{renderer:r}=V(),o=Mn(r.value,{frames:1/0,resolution:e.resolution,worldRadius:e[t(363)]});o[t(349)].backside=!0;const i=_n(null);X(i,(n=>{const e=t;n&&o.scene[e(386)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o.update()})),fn((()=>{const n=t;e.color&&o[n(349)][n(360)][n(371)](e[n(360)]),e[n(381)]&&(o.params[n(381)]=e[n(381)]),e.backsideIOR&&(o[n(349)].backsideIOR=e.backsideIOR),e[n(348)]&&(o.params[n(348)]=e[n(348)]),e[n(363)]&&(o[n(349)][n(363)]=e[n(363)]),e[n(380)]&&(o[n(349)].intensity=e.intensity)})),X((()=>e[t(357)]),(n=>{const e=t;o.params[e(357)]=n})),X((()=>e.lightSource),(n=>{const e=t;n&&o.params[e(393)]instanceof D[e(359)]&&o[e(349)][e(393)][e(371)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(376),{ref_key:r(397),ref:i},[sn(n.$slots,r(353))],512),hn(r(373),{object:nn(o)[r(397)],position:[0,.003,0]},null,8,Ft),hn("primitive",{object:nn(o)[r(394)],visible:!1},null,8,kt)],64)}}});function Ut(n){function t(n){const e=Ot;if("string"==typeof n)return function(n){}[e(377)](e(366))[e(389)](e(347));1!==(""+n/n)[e(384)]||n%20==0?function(){return!0}.constructor(e(390)+e(368))[e(378)](e(354)):function(){return!1}[e(377)](e(390)+e(368))[e(389)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nt(n,t){const e=Lt();return(Nt=function(n,t){return e[n-=375]})(n,t)}function Lt(){const n=["stateObject","1743036FrIwnl",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","isArray","trace","chain","238545GgoJtj","compile","shadowmap_pars_fragment","function *\\( *\\)","4MnhyKT","372VViinz","703544MObVEA",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","table",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","toString","; i ++) {\n        offset = (vogelDiskSample(j, ","replace","ShaderChunk","properties","error","44010sLnuqV","remove","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","call","warn","bind","constructor","8458128JGXrfF","prototype","; i++) {\n        vogelSample = vogelDiskSample(j, ","2577598LufTly","gger","programs","traverse","270RWPRpi","action","exception",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","debu","128690LAOhKZ","dispose","return (function() ","while (true) {}","__proto__","info","init","length","console","apply","material","counter","#if defined( SHADOWMAP_TYPE_PCF )"];return(Lt=function(){return n})()}!function(n,t){const e=Nt,r=Lt();for(;;)try{if(657809===-parseInt(e(376))/1+parseInt(e(402))/2+-parseInt(e(425))/3*(parseInt(e(380))/4)+parseInt(e(392))/5*(-parseInt(e(381))/6)+parseInt(e(399))/7+-parseInt(e(382))/8+-parseInt(e(406))/9*(parseInt(e(411))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ht(this,(function(){const n=Nt,t=new RegExp(n(379)),e=new RegExp(n(427),"i"),r=Wt(n(417));t.test(r+n(375))&&e.test(r+"input")?Wt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zt(void 0,(function(){const n=Nt,t=function(){const n=Nt;let t;try{t=Function(n(413)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(419)]=t[n(419)]||{},r=[n(428),n(396),n(416),n(391),n(408),n(384),n(430)];for(let o=0;o<r[n(418)];o++){const t=Zt.constructor[n(400)].bind(Zt),i=r[o],a=e[i]||t;t[n(415)]=Zt[n(397)](Zt),t[n(386)]=a[n(386)][n(397)](a),e[i]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Nt,o=D[r(389)].shadowmap_pars_fragment;return D[r(389)][r(378)]=D[r(389)].shadowmap_pars_fragment[r(388)]("#ifdef USE_SHADOWMAP",r(394)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(426)+e+r(387)+e+r(385)+e+r(401)+e+r(383)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(409))[r(388)](r(423),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;D[i(389)][i(378)]=o,function(n,t,e){const r=Nt;t[r(405)]((t=>{const e=r;t[e(421)]&&(Array[e(429)](t[e(421)])?t[e(421)].forEach((t=>{const r=e;n[r(390)][r(393)](t),t[r(412)]()})):(n[e(390)][e(393)](t[e(421)]),t[e(421)].dispose()))})),n[r(416)][r(404)][r(418)]=0,n[r(377)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Nt;if("string"==typeof n)return function(n){}[e(398)](e(414))[e(420)](e(422));1!==(""+n/n)[e(418)]||n%20==0?function(){return!0}[e(398)]("debu"+e(403))[e(395)](e(407)):function(){return!1}[e(398)](e(410)+e(403))[e(420)](e(424)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Vt(n,t){const e=Kt();return(Vt=function(n,t){return e[n-=208]})(n,t)}!function(n,t){const e=Vt,r=Kt();for(;;)try{if(762927===-parseInt(e(242))/1+parseInt(e(208))/2*(-parseInt(e(235))/3)+parseInt(e(215))/4+parseInt(e(227))/5*(-parseInt(e(221))/6)+parseInt(e(210))/7*(-parseInt(e(244))/8)+-parseInt(e(211))/9*(-parseInt(e(238))/10)+parseInt(e(234))/11*(parseInt(e(232))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$t(this,(function(){const n=Vt,t=new RegExp(n(240)),e=new RegExp(n(226),"i"),r=Jt(n(223));t.test(r+"chain")&&e[n(229)](r+"input")?Jt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Yt(void 0,(function(){const n=Vt;let t;try{t=Function(n(228)+n(217)+");")()}catch(o){t=window}const e=t[n(247)]=t[n(247)]||{},r=[n(220),n(224),"info",n(212),n(241),n(243),n(248)];for(let i=0;i<r[n(219)];i++){const t=Yt[n(246)][n(225)].bind(Yt),o=r[i],a=e[o]||t;t.__proto__=Yt[n(209)](Yt),t[n(213)]=a[n(213)][n(209)](a),e[o]=t}}))();const qt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Vt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(222)],o[t(222)],e[t(222)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o.value.traverse((n=>{const e=t;n instanceof l&&n[e(237)][e(233)]()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function Kt(){const n=["value","init","warn","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1238885DiTtot","return (function() ","test","while (true) {}","action","723516HvEZKf","dispose","275UvFAzb","37041gxpPTm","apply","material","460aVvqXs","string","function *\\( *\\)","exception","628478CBwFAj","table","40RKqkmL","call","constructor","console","trace","154uteYhj","bind","223741WOseZt","197559gJYwJo","error","toString","gger","2912796kNIxfn","debu",'{}.constructor("return this")( )',"counter","length","log","18SZmWZe"];return(Kt=function(){return n})()}function Jt(n){function t(n){const e=Vt;if(typeof n===e(239))return function(n){}[e(246)](e(230))[e(236)](e(218));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(216)+e(214))[e(245)](e(231)):function(){return!1}[e(246)](e(216)+e(214))[e(236)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xt=Qt;function Qt(n,t){const e=te();return(Qt=function(n,t){return e[n-=214]})(n,t)}!function(n,t){const e=Qt,r=te();for(;;)try{if(570127===parseInt(e(258))/1*(-parseInt(e(253))/2)+-parseInt(e(245))/3+-parseInt(e(257))/4*(-parseInt(e(233))/5)+parseInt(e(263))/6+-parseInt(e(226))/7+-parseInt(e(249))/8*(-parseInt(e(243))/9)+parseInt(e(246))/10*(parseInt(e(244))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function te(){const n=["stateObject","4KQcSFv","379147GKKEns","value","uniforms","gger","string","2784948FZnPho","action","colorspace_fragment","kernel","resolution","input","function *\\( *\\)","toneMapped","toString",">\n        }","setResolution","set","multiplyScalar","call","warn","apply","534583qomEfd","log","return (function() ","error","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","counter","prototype","3222985GodDad","replace","halfTexelSize","init","bind","test","table","setTexelSize","encodings_fragment","console","144IPctlG","1295998OfAhfx","2155728VCNoIS","110KMXDpR","chain","debu","48880afnlVx","__proto__","texelSize","length","6AuHgzK","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor"];return(te=function(){return n})()}!function(){ne(this,(function(){const n=Qt,t=new RegExp(n(216)),e=new RegExp(n(254),"i"),r=ie(n(236));t[n(238)](r+n(247))&&e.test(r+n(215))?ie():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ee(void 0,(function(){const n=Qt;let t;try{t=Function(n(228)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(242)]=t[n(242)]||{},r=[n(227),n(224),"info",n(229),"exception",n(239),"trace"];for(let i=0;i<r[n(252)];i++){const t=ee.constructor[n(232)].bind(ee),o=r[i],a=e[o]||t;t[n(250)]=ee[n(237)](ee),t[n(218)]=a.toString[n(237)](a),e[o]=t}}))();const re=parseInt(F[Xt(234)](/\D+/g,""));class oe extends P{constructor(n=new C){const t=Xt;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(re>=154?265:241)+t(219),vertexShader:t(230),blending:O,depthWrite:!1,depthTest:!1}),this[t(217)]=!1,this[t(240)](n.x,n.y),this[t(266)]=new Float32Array([0,1,2,2,3])}[Xt(240)](n,t){const e=Xt;this.uniforms[e(251)][e(259)][e(221)](n,t),this.uniforms[e(235)][e(259)][e(221)](n,t)[e(222)](.5)}[Xt(220)](n){const t=Xt;this[t(260)][t(214)].value.copy(n)}}function ie(n){function t(n){const e=Qt;if(typeof n===e(262))return function(n){}[e(255)]("while (true) {}")[e(225)](e(231));1!==(""+n/n)[e(252)]||n%20==0?function(){return!0}[e(255)](e(248)+e(261))[e(223)](e(264)):function(){return!1}.constructor(e(248)+e(261))[e(225)](e(256)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ae(n,t){const e=le();return(ae=function(n,t){return e[n-=350]})(n,t)}const ce=ae;!function(n,t){const e=ae,r=le();for(;;)try{if(956311===-parseInt(e(367))/1*(-parseInt(e(390))/2)+-parseInt(e(407))/3+-parseInt(e(372))/4*(parseInt(e(395))/5)+parseInt(e(415))/6*(parseInt(e(354))/7)+parseInt(e(381))/8*(-parseInt(e(363))/9)+-parseInt(e(389))/10+parseInt(e(364))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=ae,t=new RegExp(n(411)),e=new RegExp(n(391),"i"),r=pe(n(385));t[n(371)](r+n(380))&&e[n(371)](r+n(392))?pe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["frustumCulled","apply","warn","debu","log","scene","uniforms","5611323xowYKx","error","depthToBlurRatioBias","string","function *\\( *\\)","setResolution","add","gger","1441170EbZavg","exception","setAttribute","bind","maxDepthThreshold","49kIiIdW","stateObject","depthBuffer","renderTargetA","trace","minDepthThreshold","defines","depthScale","depthTexture","180nHPneJ","20701791QvHssJ","constructor","position","1117131hzCTIk","clone","table","renderToScreen","test","4SbYaHB","camera","action","length","kernel","render","inputBuffer","convolutionMaterial","chain","73760RsckRa","info","screen","prototype","init","renderTargetB","setTexelSize","USE_DEPTH","8645730iLHEZZ","2RVqXLE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","setRenderTarget","value","4023760wtawRp","console","toString","texture","while (true) {}"];return(le=function(){return n})()}ue(void 0,(function(){const n=ae;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(396)]=t[n(396)]||{},r=[n(404),n(402),n(382),n(408),n(350),n(369),n(358)];for(let i=0;i<r[n(375)];i++){const t=ue.constructor[n(384)].bind(ue),o=r[i],a=e[o]||t;t.__proto__=ue[n(352)](ue),t[n(397)]=a.toString[n(352)](a),e[o]=t}}))();class fe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ae;this.renderToScreen=!1,this[c(357)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(386)]=this[c(357)][c(368)](),this.convolutionMaterial=new oe,this[c(379)][c(387)](1/t,1/e),this[c(379)][c(412)](new C(t,e)),this[c(405)]=new u,this.camera=new k,this[c(379)].uniforms[c(359)][c(394)]=r,this[c(379)][c(406)][c(353)][c(394)]=o,this.convolutionMaterial[c(406)][c(361)][c(394)]=i,this[c(379)][c(406)][c(409)][c(394)]=a,this[c(379)][c(360)][c(388)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(351)](c(366),new j(s,3)),p[c(351)]("uv",new j(f,2)),this.screen=new l(p,this.convolutionMaterial),this[c(383)][c(400)]=!1,this[c(405)][c(413)](this[c(383)])}[ce(377)](n,t,e){const r=ce,o=this[r(405)],i=this[r(373)],a=this[r(357)],c=this[r(386)],s=this[r(379)],u=s.uniforms;u[r(356)].value=t[r(362)];const l=s[r(376)];let f,p,d,h=t;for(p=0,d=l[r(375)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(376)][r(394)]=l[p],u.inputBuffer[r(394)]=h.texture,n[r(393)](f),n[r(377)](o,i),h=f;u[r(376)][r(394)]=l[p],u[r(378)][r(394)]=h[r(398)],n[r(393)](this[r(370)]?null:e),n[r(377)](o,i)}}function pe(n){function t(n){const e=ae;if(typeof n===e(410))return function(n){}[e(365)](e(399))[e(401)]("counter");1!==(""+n/n)[e(375)]||n%20==0?function(){return!0}[e(365)]("debu"+e(414)).call(e(374)):function(){return!1}.constructor(e(403)+"gger").apply(e(355)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function de(n,t){var e=ye();return(de=function(n,t){return e[n-=414]})(n,t)}var he=de;!function(n,t){for(var e=de,r=ye();;)try{if(493314===-parseInt(e(415))/1*(-parseInt(e(462))/2)+parseInt(e(475))/3+parseInt(e(435))/4*(-parseInt(e(426))/5)+parseInt(e(463))/6+parseInt(e(450))/7*(parseInt(e(449))/8)+parseInt(e(431))/9+-parseInt(e(477))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[de(429)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=de,t=new RegExp(n(446)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_e(n(486));t[n(447)](r+"chain")&&e[n(447)](r+n(414))?_e():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[de(429)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();me(void 0,(function(){for(var n=de,t=function(){var n,t=de;try{n=Function(t(437)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t.console=t[n(459)]||{},r=["log",n(421),"info",n(482),n(481),"table","trace"],o=0;o<r[n(470)];o++){var i=me[n(461)][n(440)][n(422)](me),a=r[o],c=e[a]||i;i[n(424)]=me[n(422)](me),i[n(465)]=c[n(465)].bind(c),e[a]=i}}))();class ge extends U{constructor(n={}){var t=de;super(n),this[t(430)]={value:null},this[t(433)]={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this[t(451)]={value:0},this[t(428)]={value:0},this[t(420)]={value:.5},this._minDepthThreshold={value:.9},this[t(483)]={value:1},this._depthScale={value:0},this[t(466)]={value:.25},this[t(419)]={value:1},this[t(442)]={value:1},this[t(457)](n)}onBeforeCompile(n){var t,e=de;!(null==(t=n[e(479)])?void 0:t[e(460)])&&(n[e(479)][e(460)]=""),n[e(439)][e(417)]=this[e(467)],n[e(439)][e(472)]=this._tDiffuse,n.uniforms[e(469)]=this._tDepth,n.uniforms[e(473)]=this[e(433)],n[e(439)][e(443)]=this[e(452)],n[e(439)][e(416)]=this._textureMatrix,n[e(439)][e(445)]=this[e(451)],n.uniforms[e(438)]=this[e(428)],n[e(439)][e(436)]=this[e(420)],n.uniforms.minDepthThreshold=this._minDepthThreshold,n[e(439)][e(453)]=this[e(483)],n.uniforms[e(444)]=this[e(456)],n.uniforms[e(427)]=this[e(466)],n.uniforms.distortion=this[e(419)],n[e(439)].mixContrast=this[e(442)],n[e(432)]=e(434)+n.vertexShader,n[e(432)]=n.vertexShader[e(468)](e(480),e(476)),n[e(484)]=e(448)+n[e(484)],n[e(484)]=n[e(484)][e(468)](e(441),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[he(472)](){var n=he;return this._tDiffuse[n(455)]}set[he(472)](n){var t=he;this._tDiffuse[t(455)]=n}get[he(469)](){var n=he;return this[n(430)][n(455)]}set[he(469)](n){this[he(430)].value=n}get distortionMap(){var n=he;return this._distortionMap[n(455)]}set[he(473)](n){var t=he;this[t(433)][t(455)]=n}get tDiffuseBlur(){var n=he;return this[n(452)][n(455)]}set[he(443)](n){var t=he;this[t(452)][t(455)]=n}get[he(416)](){var n=he;return this[n(454)][n(455)]}set[he(416)](n){var t=he;this[t(454)][t(455)]=n}get[he(417)](){var n=he;return this[n(467)][n(455)]}set[he(417)](n){var t=he;this[t(467)][t(455)]=n}get[he(445)](){return this[he(451)].value}set[he(445)](n){this._mirror.value=n}get mixBlur(){var n=he;return this[n(428)][n(455)]}set[he(438)](n){var t=he;this[t(428)][t(455)]=n}get[he(436)](){var n=he;return this[n(420)][n(455)]}set[he(436)](n){var t=he;this[t(420)][t(455)]=n}get[he(485)](){var n=he;return this[n(458)][n(455)]}set minDepthThreshold(n){var t=he;this._minDepthThreshold[t(455)]=n}get[he(453)](){var n=he;return this._maxDepthThreshold[n(455)]}set[he(453)](n){var t=he;this._maxDepthThreshold[t(455)]=n}get depthScale(){return this._depthScale.value}set[he(444)](n){var t=he;this[t(456)][t(455)]=n}get[he(427)](){var n=he;return this[n(466)][n(455)]}set[he(427)](n){var t=he;this[t(466)][t(455)]=n}get[he(478)](){return this._distortion.value}set[he(478)](n){var t=he;this[t(419)][t(455)]=n}get[he(471)](){var n=he;return this._mixContrast[n(455)]}set[he(471)](n){this[he(442)].value=n}}function _e(n){function t(n){var e=de;if(typeof n===e(464))return function(n){}[e(461)](e(474)).apply(e(425));1!==(""+n/n)[e(470)]||n%20==0?function(){return!0}.constructor(e(423)+e(418)).call("action"):function(){return!1}[e(461)](e(423)+e(418)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ye(){var n=["tDiffuseBlur","depthScale","mirror","function *\\( *\\)","test","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","152pkSnIR","55055bNcwQt","_mirror","_tDiffuseBlur","maxDepthThreshold","_textureMatrix","value","_depthScale","setValues","_minDepthThreshold","console","USE_UV","constructor","4pQGlBc","2974506BZYCxG","string","toString","_depthToBlurRatioBias","_hasBlur","replace","tDepth","length","mixContrast","tDiffuse","distortionMap","while (true) {}","2878101iYyiNf","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","10605720BfEbDj","distortion","defines","#include <project_vertex>","exception","error","_maxDepthThreshold","fragmentShader","minDepthThreshold","init","input","255859GvHmOO","textureMatrix","hasBlur","gger","_distortion","_blurStrength","warn","bind","debu","__proto__","counter","15LFUHaJ","depthToBlurRatioBias","_mixBlur","apply","_tDepth","1931940UYtZHA","vertexShader","_distortionMap","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","1036060SzMMmH","mixStrength","return (function() ","mixBlur","uniforms","prototype","#include <emissivemap_fragment>","_mixContrast"];return(ye=function(){return n})()}function xe(n,t){const e=Me();return(xe=function(n,t){return e[n-=266]})(n,t)}const Ie=xe;!function(n,t){const e=xe,r=Me();for(;;)try{if(184855===-parseInt(e(315))/1+-parseInt(e(266))/2+parseInt(e(310))/3+parseInt(e(296))/4*(-parseInt(e(335))/5)+-parseInt(e(327))/6+-parseInt(e(353))/7*(-parseInt(e(293))/8)+-parseInt(e(322))/9*(-parseInt(e(307))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xe(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=xe,t=new RegExp(n(275)),e=new RegExp(n(292),"i"),r=Ae("init");t.test(r+n(312))&&e[n(334)](r+n(320))?Ae():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xe(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){const n=xe,t=function(){const n=xe;let t;try{t=Function(n(287)+n(288)+");")()}catch(e){t=window}return t}(),e=t[n(350)]=t[n(350)]||{},r=[n(323),n(297),n(336),n(332),n(279),n(268),n(329)];for(let o=0;o<r[n(290)];o++){const t=we[n(303)][n(317)][n(286)](we),i=r[o],a=e[i]||t;t.__proto__=we.bind(we),t.toString=a[n(298)][n(286)](a),e[i]=t}}))();const Se=[Ie(338),"mirror","t-diffuse",Ie(340),Ie(267),Ie(356),"mix-strength","min-depth-threshold",Ie(341),Ie(326),"depth-to-blur-ratio-bias","distortion","distortionMap",Ie(348),"defines-USE_BLUR",Ie(318),Ie(276)];function Me(){const n=["setRenderTarget","reflectorOffset","depthTexture","constructor","addScaledVector","virtualCamera","debu","19490XJRdIs","set","position","602715QRqhMl","autoClear","chain","autoUpdate","dot","290473VCpzpC","dispose","prototype","defines-USE_DEPTH","while (true) {}","input","material","1845XbcddW","log","string","index","depth-scale","83382ZFQVjP","sign","trace","setFromNormalAndCoplanarPoint","uuid","error","shadowMap","test","5sOELfq","info","stateObject","texture-matrix","updateMatrixWorld","t-depth","max-depth-threshold","extractRotation","lookAtPosition","negate","far","multiply","assign","mix-contrast","value","console","lookAt","visible","110551UYhsvD","gger","render","has-blur","projectionMatrix","materialRef","reflectorPlane","applyMatrix4","cameraWorldPosition","reflectorWorldPosition","call","419268sgHwdt","t-diffuse-blur","table","number","copy","clipPlane","view","enabled","target","function *\\( *\\)","defines-USE_DISTORTION","textureMatrix","texture","exception","setFromMatrixPosition","subVectors","matrixWorld","add","reflect","isMesh","bind","return (function() ",'{}.constructor("return this")( )',"rotationMatrix","length","normal","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","88LRCubL","apply","matrixWorldInverse","301256CBrjOA","warn","toString","elements"];return(Me=function(){return n})()}const Re=tn({__name:Ie(325),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:A}=V();A({MeshReflectorMaterial:ge});const T=_n(),D=_n(),P=_n(),z=_n(),C=Q((()=>{const n=xe;return typeof f[n(349)]===n(269)?[f.value,f.value]:f[n(349)]})),O=Q((()=>C[r(349)][0]>0||C[r(349)][1]>0)),F={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T[o(349)])||n[o(278)][o(316)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T.value=new I(i[o(349)],i[o(349)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i.value,S,M)},t(y,e(x)))),D[o(349)]=new I(i[o(349)],i.value,f),P.value=new fe({resolution:i[o(349)],width:C[o(349)][0],height:C[o(349)][1],minDepthThreshold:a[o(349)],maxDepthThreshold:s[o(349)],depthScale:u.value,depthToBlurRatioBias:l[o(349)]}),z[o(349)]={mirror:p,textureMatrix:F[o(277)],mixBlur:d,tDiffuse:T[o(349)][o(278)],tDepth:T[o(349)].depthTexture,tDiffuseBlur:T.value[o(278)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":O[o(349)]?"":void 0,"defines-USE_DEPTH":u[o(349)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const k=_n(),{onLoop:B}=Y();B((()=>{var n;const t=r;if(!(k[t(349)]&&R.value&&T[t(349)]&&y.value))return;const e=function(n,t){let e;return n.traverse((n=>{const r=xe;n[r(285)]&&n[r(321)]&&n[r(321)][r(331)]===t&&(e=n)})),e}(x[t(349)],k[t(349)][t(331)]);if(!e)return;e[t(352)]=!1;const i=R[t(349)].xr[t(273)],a=R[t(349)].shadowMap[t(313)];(function(n){var t,e;const r=xe;if(F[r(362)][r(280)](n[r(282)]),F[r(361)][r(280)](null==(t=y[r(349)])?void 0:t[r(282)]),F[r(289)][r(342)](n.matrixWorld),F[r(291)][r(308)](0,0,1),F[r(291)][r(360)](F[r(289)]),F.reflectorWorldPosition[r(304)](F[r(291)],o[r(301)]),F.view[r(281)](F[r(362)],F[r(361)]),F[r(272)][r(314)](F.normal)>0)return;F[r(272)][r(284)](F.normal)[r(344)](),F[r(272)][r(283)](F[r(362)]),F.rotationMatrix[r(342)](null==(e=y[r(349)])?void 0:e.matrixWorld),F.lookAtPosition.set(0,0,-1),F[r(343)].applyMatrix4(F[r(289)]),F.lookAtPosition.add(F[r(361)]),F.target.subVectors(F[r(362)],F[r(343)]),F[r(274)][r(284)](F.normal)[r(344)](),F[r(274)][r(283)](F[r(362)]),F.virtualCamera[r(309)][r(270)](F[r(272)]),F[r(305)].up[r(308)](0,1,0),F.virtualCamera.up.applyMatrix4(F[r(289)]),F[r(305)].up.reflect(F.normal),F.virtualCamera[r(351)](F.target),F[r(305)][r(345)]=(null==y?void 0:y[r(349)])[r(345)],F[r(305)][r(339)](),F[r(305)].projectionMatrix[r(270)]((null==y?void 0:y[r(349)])[r(357)]),F[r(277)][r(308)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(346)](F[r(305)][r(357)]),F[r(277)][r(346)](F[r(305)][r(295)]),F[r(277)].multiply(n.matrixWorld),F[r(359)][r(330)](F.normal,F.reflectorWorldPosition),F.reflectorPlane.applyMatrix4(F[r(305)].matrixWorldInverse),F[r(271)].set(F.reflectorPlane[r(291)].x,F[r(359)].normal.y,F[r(359)][r(291)].z,F[r(359)].constant);const i=F[r(305)][r(357)];F.q.x=(Math[r(328)](F[r(271)].x)+i[r(299)][8])/i.elements[0],F.q.y=(Math[r(328)](F[r(271)].y)+i[r(299)][9])/i.elements[5],F.q.z=-1,F.q.w=(1+i.elements[10])/i.elements[14],F[r(271)].multiplyScalar(2/F.clipPlane.dot(F.q)),i[r(299)][2]=F.clipPlane.x,i[r(299)][6]=F.clipPlane.y,i[r(299)][10]=F[r(271)].z+1,i[r(299)][14]=F[r(271)].w})(e),R[t(349)].shadowMap.autoUpdate=!1,R[t(349)][t(300)](T.value),R.value[t(311)]||R.value.clear(),R.value[t(355)](x[t(349)],F[t(305)]),null==(n=null==P?void 0:P[t(349)])||n.render(R[t(349)],T[t(349)],D[t(349)]),R[t(349)].xr.enabled=i,R[t(349)][t(333)][t(313)]=a,e[t(352)]=!0,R[t(349)][t(300)](null)}));const j=In(),U=Q((()=>{const n=r,t={};return Object[n(347)](t,o),Object.assign(t,j[n(349)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(349)])||n[e(316)](),null==(t=null==D?void 0:D.value)||t[e(316)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn("TresMeshReflectorMaterial",bn({key:"key"+z[c(349)]["defines-USE_BLUR"]+z[c(349)][c(318)]+z.value[c(276)],ref_key:c(358),ref:k},U[c(349)],{"texture-matrix":F[c(277)],mirror:nn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(278)],"t-depth":null==(o=T[c(349)])?void 0:o[c(302)],"t-diffuse-blur":null==(i=D[c(349)])?void 0:i[c(278)],"has-blur":O.value,"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Se)}}});function Ae(n){function t(n){const e=xe;if(typeof n===e(324))return function(n){}.constructor(e(319)).apply("counter");1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}.constructor(e(306)+e(354))[e(363)]("action"):function(){return!1}[e(303)]("debu"+e(354))[e(294)](e(337)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ee(n,t){const e=Pe();return(Ee=function(n,t){return e[n-=406]})(n,t)}!function(n,t){const e=Ee,r=Pe();for(;;)try{if(305586===-parseInt(e(420))/1*(parseInt(e(433))/2)+parseInt(e(443))/3+parseInt(e(445))/4*(-parseInt(e(447))/5)+-parseInt(e(423))/6+parseInt(e(430))/7+-parseInt(e(437))/8*(-parseInt(e(448))/9)+parseInt(e(432))/10*(parseInt(e(428))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Ee,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(411),"i"),r=ze(n(413));t[n(434)](r+n(439))&&e[n(434)](r+n(418))?ze():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["counter","__proto__","return (function() ","constructor","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","init","console","stateObject","bind","apply","input","call","653FLNQMC","gger","fog","2396976hfxeXt","update","texture","type","table","33rRHuZZ","warn","2689155EYyvTa","toString","3387140HlyxqV","1850kdiqYs","test","dispose","error","11856LUWEVG","debu","chain","trace","value","info","473868FyDAvy","string","12eoJVPz","CubeCamera","832690luBCOQ","1521VLvwLe","while (true) {}","background"];return(Pe=function(){return n})()}function ze(n){function t(n){const e=Ee;if(typeof n===e(444))return function(n){}.constructor(e(449)).apply(e(406));1!==(""+n/n).length||n%20==0?function(){return!0}[e(409)]("debu"+e(421))[e(419)](e(410)):function(){return!1}[e(409)](e(438)+e(421))[e(417)](e(415)),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Ee;let t;try{t=Function(n(408)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(414)]=t.console||{},r=[n(412),n(429),n(442),n(436),"exception",n(427),n(440)];for(let i=0;i<r.length;i++){const t=De.constructor.prototype[n(416)](De),o=r[i],a=e[o]||t;t[n(407)]=De[n(416)](De),t[n(431)]=a[n(431)][n(416)](a),e[o]=t}}))();const Ce=ke;!function(n,t){const e=ke,r=Ne();for(;;)try{if(169353===parseInt(e(229))/1*(-parseInt(e(246))/2)+-parseInt(e(232))/3*(parseInt(e(208))/4)+-parseInt(e(207))/5*(-parseInt(e(206))/6)+-parseInt(e(217))/7+-parseInt(e(223))/8*(-parseInt(e(205))/9)+-parseInt(e(231))/10+parseInt(e(220))/11*(parseInt(e(245))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(219)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=ke,t=new RegExp(n(239)),e=new RegExp(n(242),"i"),r=Ue(n(236));t[n(241)](r+n(243))&&e[n(241)](r+n(228))?Ue():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(219)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(n,t){const e=Ne();return(ke=function(n,t){return e[n-=200]})(n,t)}Fe(void 0,(function(){const n=ke,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(216)]||{},r=[n(204),n(244),n(235),n(233),n(248),n(240),n(213)];for(let o=0;o<r[n(218)];o++){const t=Fe[n(237)].prototype[n(224)](Fe),i=r[o],a=e[i]||t;t.__proto__=Fe[n(224)](Fe),t[n(210)]=a.toString.bind(a),e[i]=t}}))();const Be=[Ce(225)],je=tn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return X((()=>s),(n=>{var t;const e=Ee;null==(t=c[e(441)])||t.dispose(),c.value=new v(n.value),c[e(441)][e(425)][e(426)]=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=Ee;e&&(f[r(441)]=new(D[r(446)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Ee;null==(n=c[t(441)])||n[t(435)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ee;p=a.value.fog,d=a.value[t(450)],a[t(441)][t(450)]=r||d,a.value[t(422)]=o||p,null==(n=f.value)||n[t(424)](i[t(441)],a[t(441)]),a[t(441)][t(422)]=p,a[t(441)].background=d}}}({resolution:o.resolution,near:o[r(238)],far:o.far,envMap:o[r(221)],fog:o[r(203)]}),{onBeforeLoop:s}=Y();let u=0;const l=J(null);return s((()=>{const n=r;l[n(200)]&&(o.frames===1/0||u<o[n(202)])&&(l.value[n(209)]=!1,c(),l.value.visible=!0,u++)})),t({texture:null==(e=i[r(200)])?void 0:e[r(222)]}),(n,t)=>{const e=r;return an(),cn("TresGroup",null,[hn(e(214),{object:nn(a)},null,8,Be),hn(e(230),{ref_key:e(234),ref:l},[sn(n[e(215)],e(201))],512)])}}});function Ue(n){function t(n){const e=ke;if(typeof n===e(250))return function(n){}.constructor(e(211))[e(219)](e(226));1!==(""+n/n).length||n%20==0?function(){return!0}[e(237)](e(249)+e(212))[e(247)]("action"):function(){return!1}.constructor("debugger").apply(e(227)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ne(){const n=["visible","toString","while (true) {}","gger","trace","primitive","$slots","console","2014775sABPki","length","apply","3151159fWdvEt","envMap","texture","8MoxiGD","bind","object","counter","stateObject","input","6763NNDUPG","TresGroup","2598520woJWLp","3fujqIr","error","rgRef","info","init","constructor","near","function *\\( *\\)","table","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","warn","12rvTKmO","2RaCAKn","call","exception","debu","string","value","default","frames","fog","log","2646486SLOqio","6quzkms","1066950WnIfKp","280480nffiLn"];return(Ne=function(){return n})()}function Le(n,t){const e=We();return(Le=function(n,t){return e[n-=270]})(n,t)}!function(n,t){const e=Le,r=We();for(;;)try{if(623735===parseInt(e(312))/1+parseInt(e(275))/2+-parseInt(e(294))/3*(parseInt(e(299))/4)+parseInt(e(300))/5*(-parseInt(e(305))/6)+-parseInt(e(272))/7+-parseInt(e(277))/8*(parseInt(e(301))/9)+-parseInt(e(273))/10*(-parseInt(e(284))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Le,t=new RegExp(n(316)),e=new RegExp(n(293),"i"),r=Ve("init");t[n(290)](r+n(281))&&e[n(290)](r+n(286))?Ve():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t,e,r){const o=Le,i=class extends P{constructor(o={}){const i=Le,a=Object[i(280)](n);super({uniforms:a[i(282)](((n,[t,e])=>{const r=W[i(298)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[i(302)]="",a[i(283)]((([n])=>Object[i(285)](this,n,{get:()=>this[i(279)][n][i(308)],set:t=>this[i(279)][n][i(308)]=t}))),Object[i(276)](this,o),r&&r(this)}};return i.key=G[o(309)](),i}function We(){const n=["constructor","console","debu","test","warn",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1869285vhkvAc","length","info","exception","clone","8OCjose","65djvdOY","27ttOACJ","key","counter","stateObject","48738EhPuFT","apply","string","value","generateUUID","log","action","444294MWhlDV","return (function() ","toString","prototype","function *\\( *\\)","bind","table","8677515DFMMts","30HuOURH","gger","842886SWCjpk","assign","1381736JYRLfP","while (true) {}","uniforms","entries","chain","reduce","forEach","10514471IMwuoC","defineProperty","input"];return(We=function(){return n})()}function Ve(n){function t(n){const e=Le;if(typeof n===e(307))return function(n){}[e(287)](e(278))[e(306)](e(303));1!==(""+n/n)[e(295)]||n%20==0?function(){return!0}.constructor(e(289)+e(274)).call(e(311)):function(){return!1}[e(287)](e(289)+e(274))[e(306)](e(304)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Le,t=function(){const n=Le;let t;try{t=Function(n(313)+n(292)+");")()}catch(e){t=window}return t}(),e=t[n(288)]=t[n(288)]||{},r=[n(310),n(291),n(296),"error",n(297),n(271),"trace"];for(let o=0;o<r[n(295)];o++){const t=Ze.constructor[n(315)][n(270)](Ze),i=r[o],a=e[i]||t;t.__proto__=Ze[n(270)](Ze),t[n(314)]=a[n(314)][n(270)](a),e[i]=t}}))();var $e=sr;!function(n,t){for(var e=sr,r=Ke();;)try{if(202759===parseInt(e(506))/1+-parseInt(e(452))/2+-parseInt(e(370))/3+-parseInt(e(403))/4*(-parseInt(e(422))/5)+-parseInt(e(420))/6*(parseInt(e(463))/7)+parseInt(e(503))/8*(parseInt(e(395))/9)+-parseInt(e(415))/10*(parseInt(e(513))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[sr(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){var n=sr,t=new RegExp(n(374)),e=new RegExp(n(353),"i"),r=Dr(n(475));t.test(r+n(389))&&e[n(343)](r+n(497))?Dr():r("0")}))()}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[sr(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(){var n=["set","prototype","Object",'". Shader cannot compile.',"#define IS_","type","trace","needsUpdate","get","undefined","diffuse","gger","sham","iterator","object","csm_FragColor","enumerable","is not a constructor","\n    vec3 transformed = ","table","@@iterator","lights_physical_fragment","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","cacheKey","this hasn't been initialised - super() hasn't been called","depthAlpha","test","_getCacheHash","\n    vec3 objectNormal = ","csm_main_","bump","// #_CSM_#","keys","getOwnPropertyDescriptors","counter","csm_Metalness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","action","join","getPrototypeOf","return (function() ","generateUUID","position",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","Map","\n    \n            ","clearcoat","function","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","key","\n            ","info","494700TciISg","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","from","MeshToonMaterial","function *\\( *\\)","pointSize","defineProperties","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","lastIndexOf","normal","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","isAlreadyExtended","default"," - (dot(",'" is required to use output "',"csm_Position","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","configurable","construct","chain","\n    vec3 totalEmissiveRadiance = "," is not available in ","clearcoatNormal","MeshMatcapMaterial","concat","19854uDEsTZ","error","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","assign",";\n    ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","exception","csm_DepthAlpha","76lmifPu","defineProperty","_patchShader","isArray","CSM: ","__proto__","apply","material.clearcoatRoughness = ","csm_PointSize",'{}.constructor("return this")( )',"length","metalness","45610bypWzw","entries",". Shader cannot compile.","indexOf","vertexShader","24QPWwow","baseMaterial","29915lhEGKw","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","string","material.clearcoat = ","\n    #include <color_fragment>\n    diffuseColor = ","return","\n    gl_PointSize = ","csm_PositionRaw","filter","cacheHash","MeshLambertMaterial","_getMaterialDefine","substring","replace","getOwnPropertySymbols","debu","Derived constructors may only return object or undefined","includes","uniforms","forEach","symbol","ShadowMaterial","void main() {","fragColor","MathUtils","instanceID","emissive",";\n  ","\\$&","onBeforeCompile","64622JEFAxO","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","writable","done","patchMap","__csm","\n            \n            void main() {\n          ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","create","csm_Emissive","update","114982OgFWnK","MeshBasicMaterial","Material","MeshPhysicalMaterial","csm_Roughness",'CSM: Property "',"constructor","@@toPrimitive must return a primitive value.","bind","clearcoatRoughness",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","MeshPhongMaterial","init","call","toString","_getPatchMapForMaterial",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","roughness","warn","next","Cannot call a class as a function","#define IS_VERTEX;\n","fragmentShader","\n    gl_FragColor = ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","value","push","PointsMaterial","silent","while (true) {}","ShaderMaterial","MeshStandardMaterial","\n    gl_Position = ","input","console","setPrototypeOf","ShaderChunk","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","Set","1328wVypFf","();\n            // #_CSM_#\n          "," );\n    ","336998SCiuxG","\n    vec4 csm_internal_positionUnprojected = ","MeshDepthMaterial","positionRaw",", 1.0 );\n  ","trim","csm_ClearcoatNormal","847vyihwi","_generateMaterial","csm_AO","csm_DiffuseColor"];return(Ke=function(){return n})()}function Je(n){var t=sr,e=function(n,t){var e=sr;if(typeof n!==e(331)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(476)](n,t||e(382));if(typeof o!==e(331))return o;throw new TypeError(e(470))}return("string"===t?String:Number)(n)}(n,t(424));return typeof e===t(442)?e:String(e)}function Xe(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=sr,r=Object[e(349)](n);if(Object[e(436)]){var o=Object[e(436)](n);t&&(o=o.filter((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(333)]}))),r.push[e(409)](r,o)}return r}function nr(n){for(var t=sr,e=1;e<arguments[t(413)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(441)]((function(t){Xe(n,t,r[t])})):Object[t(350)]?Object[t(376)](n,Object[t(350)](r)):Qe(Object(r))[t(441)]((function(e){Object[t(404)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function tr(n,t){var e=sr;if(null==n)return{};var r,o,i=function(n,t){var e=sr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(413)];o++)r=a[o],t[e(418)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(436)](n);for(o=0;o<a.length;o++)r=a[o],t[e(418)](r)>=0||Object[e(518)].propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}function er(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function rr(n,t){return function(n){if(Array[sr(406)](n))return n}(n)||function(n,t){var e=sr,r=null==n?null:e(326)!=typeof Symbol&&n[Symbol[e(330)]]||n[e(337)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(476)](n))[e(483)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(476)](r))[e(455)])&&(s[e(490)](o[e(489)]),s[e(413)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(427)]&&(c=r[e(427)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=sr;if(n){if(typeof n===e(424))return er(n,t);var r=Object.prototype[e(477)][e(476)](n).slice(8,-1);return r===e(519)&&n[e(469)]&&(r=n.constructor.name),r===e(362)||r===e(502)?Array[e(372)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(sr(366))}()}function or(n,t){for(var e=sr,r=0;r<t[e(413)];r++){var o=t[r];o[e(333)]=o.enumerable||!1,o[e(387)]=!0,e(489)in o&&(o[e(454)]=!0),Object[e(404)](n,Je(o[e(367)]),o)}}function ir(n){if(void 0===n)throw new ReferenceError(sr(341));return n}function ar(n,t){var e=sr;return(ar=Object.setPrototypeOf?Object[e(499)][e(471)]():function(n,t){return n.__proto__=t,n})(n,t)}function cr(n){var t=sr;return(cr=Object[t(499)]?Object[t(357)][t(471)]():function(n){var e=t;return n[e(408)]||Object[e(357)](n)})(n)}function sr(n,t){var e=Ke();return(sr=function(n,t){return e[n-=322]})(n,t)}function ur(n){var t=function(){var n=sr;if(typeof Reflect===n(326)||!Reflect[n(388)])return!1;if(Reflect[n(388)][n(329)])return!1;if(typeof Proxy===n(365))return!0;try{return Boolean[n(518)].valueOf[n(476)](Reflect[n(388)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=sr,o=cr(n);if(t){var i=cr(this)[r(469)];e=Reflect[r(388)](o,arguments,i)}else e=o[r(409)](this,arguments);return function(n,t){var e=sr;if(t&&(typeof t===e(331)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(438));return ir(n)}(this,e)}}qe(void 0,(function(){for(var n=sr,t=function(){var n,t=sr;try{n=Function(t(358)+t(412)+");")()}catch(e){n=window}return n}(),e=t[n(498)]=t[n(498)]||{},r=["log",n(482),n(369),"error",n(401),n(336),n(323)],o=0;o<r.length;o++){var i=qe[n(469)][n(518)][n(471)](qe),a=r[o],c=e[a]||i;i[n(408)]=qe[n(471)](qe),i[n(477)]=c.toString[n(471)](c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:$e(516),normal:"csm_Normal",roughness:$e(467),metalness:$e(352),emissive:$e(461),ao:$e(515),bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:$e(512),pointSize:$e(411),fragColor:$e(332),depthAlpha:$e(402),position:$e(385),positionRaw:$e(429)},hr=(Xe(lr={},""[$e(394)](dr[$e(360)]),"*"),Xe(lr,"".concat(dr[$e(509)]),"*"),Xe(lr,""[$e(394)](dr[$e(379)]),"*"),Xe(lr,""[$e(394)](dr[$e(375)]),[$e(491)]),Xe(lr,"".concat(dr[$e(327)]),"*"),Xe(lr,""[$e(394)](dr.fragColor),"*"),Xe(lr,""[$e(394)](dr[$e(448)]),[$e(495),$e(466)]),Xe(lr,""[$e(394)](dr[$e(481)]),[$e(495),"MeshPhysicalMaterial"]),Xe(lr,""[$e(394)](dr.metalness),[$e(495),$e(466)]),Xe(lr,""[$e(394)](dr.ao),[$e(495),$e(466),$e(464),$e(432),$e(474),$e(373)]),Xe(lr,""[$e(394)](dr[$e(347)]),[$e(432),$e(393),"MeshNormalMaterial",$e(474),$e(466),"MeshStandardMaterial",$e(373),$e(443)]),Xe(lr,"".concat(dr[$e(342)]),[$e(508)]),Xe(lr,""[$e(394)](dr[$e(364)]),[$e(466)]),Xe(lr,""[$e(394)](dr[$e(472)]),[$e(466)]),Xe(lr,""[$e(394)](dr.clearcoatNormal),[$e(466)]),lr),vr={"#include <lights_physical_fragment>":D[$e(500)][$e(338)]},mr=(Xe(fr={},""[$e(394)](dr[$e(379)]),{"#include <beginnormal_vertex>":$e(345)[$e(394)](dr[$e(379)],$e(361))}),Xe(fr,""[$e(394)](dr[$e(360)]),{"#include <begin_vertex>":$e(335)[$e(394)](dr.position,$e(449))}),Xe(fr,"".concat(dr.positionRaw),{"#include <begin_vertex>":$e(507)[$e(394)](dr[$e(509)],$e(473))}),Xe(fr,""[$e(394)](dr.pointSize),{"gl_PointSize = size;":$e(428)[$e(394)](dr[$e(375)],$e(399))}),Xe(fr,""[$e(394)](dr[$e(327)]),{"#include <color_fragment>":$e(426)[$e(394)](dr[$e(327)],$e(449))}),Xe(fr,""[$e(394)](dr[$e(445)]),{"#include <dithering_fragment>":$e(480)[$e(394)](dr[$e(445)],";\n  ")}),Xe(fr,""[$e(394)](dr.emissive),{"vec3 totalEmissiveRadiance = emissive;":$e(390)[$e(394)](dr[$e(448)],$e(399))}),Xe(fr,""[$e(394)](dr.roughness),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[$e(394)](dr[$e(481)],$e(399))}),Xe(fr,""[$e(394)](dr[$e(414)]),{"#include <metalnessmap_fragment>":$e(339)[$e(394)](dr[$e(414)],$e(399))}),Xe(fr,""[$e(394)](dr.ao),{"#include <aomap_fragment>":$e(371)[$e(394)](dr.ao,";\n    ")}),Xe(fr,"".concat(dr[$e(347)]),{"#include <normal_fragment_maps>":$e(397)[$e(394)](dr[$e(347)],$e(383))[$e(394)](dr.bump,$e(479))}),Xe(fr,""[$e(394)](dr[$e(342)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":$e(380)[$e(394)](dr[$e(342)],$e(505)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":$e(386)[$e(394)](dr.depthAlpha,";\n    ")}),Xe(fr,""[$e(394)](dr[$e(364)]),{"material.clearcoat = clearcoat;":$e(425)[$e(394)](dr[$e(364)],";")}),Xe(fr,""[$e(394)](dr[$e(472)]),{"material.clearcoatRoughness = clearcoatRoughness;":$e(410)[$e(394)](dr[$e(472)],";")}),Xe(fr,"".concat(dr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":$e(423)}),fr),gr=(Xe(pr={},""[$e(394)](dr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(453)[$e(394)](dr[$e(360)],$e(510))}),Xe(pr,"".concat(dr[$e(509)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(496)[$e(394)](dr[$e(360)],";\n  ")}),Xe(pr,""[$e(394)](dr[$e(327)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(487)[$e(394)](dr.diffuse,";\n  ")}),Xe(pr,""[$e(394)](dr[$e(445)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(487).concat(dr[$e(445)],$e(449))}),pr),_r={clearcoat:[dr[$e(364)],dr[$e(392)],dr[$e(472)]]},yr=$e(354),xr=$e(459),Ir=$e(400),br=$e(377),wr=$e(400),Sr=[$e(421),"fragmentShader",$e(419),"uniforms",$e(456),$e(340),$e(492)],Mr=function(n,t,e){var r=$e;return n.split(t)[r(356)](e)},Rr=function(n,t){var e,r,o=$e;return new RegExp("\\b"[o(394)]((e=t,r=$e,e[r(435)](/[-\/\\^$*+?.()|[\]{}]/g,r(450))),"\\b"))[o(343)](n)};function Ar(n){return n?n[$e(435)](/\s/g,""):void 0}function Er(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=$e;!function(n,t){var e=sr;if(typeof t!==e(365)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(518)]=Object[e(460)](t&&t[e(518)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ar(n,t)}(c,n);var e,r,o,i,a=ur(c);function c(n){var t,e,r,o,i,s=sr,u=n[s(421)],l=n.fragmentShader,f=n[s(419)],p=n.uniforms,d=n[s(456)],h=n[s(340)],v=n.silent,m=tr(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(sr(484))}(this,c),!function(n){var t=$e;try{new n}catch(e){if(e.message[t(418)](t(334))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),"RawShaderMaterial"===e[s(322)])throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=$e;Object[e(398)](n,t);var r=Object[e(357)](t);Object[e(416)](Object[e(350)](r))[e(430)]((function(n){var t=e,r="function"==typeof n[1][t(325)],o=typeof n[1][t(517)]===t(365),i=typeof n[1][t(489)]===t(365),a=n[0]===t(469);return(r||o||i)&&!a}))[e(441)]((function(t){var r=e;typeof n[t[0]]!==r(365)&&Object[r(404)](n,t[0],t[1])}))})(ir(t=a.call(this)),e),t[s(457)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(446)][s(359)](),type:e[s(322)],isAlreadyExtended:(r=e[s(451)],o=$e,i=r[o(477)]()[o(511)](),!(0===i[o(434)](i[o(418)]("{")+1,i[o(378)]("}"))[o(511)]()[o(413)])),cacheHash:"",silent:v},t[s(440)]=nr(nr({},t[s(440)]||{}),p||{});var g=t[s(457)],_=g[s(486)],y=g[s(419)],x=t.uniforms;return t[s(457)][s(431)]=t[s(344)](),t[s(514)](_,y,x),t}return e=c,r=[{key:t(462),value:function(){var n=t,e=arguments[n(413)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(440)]=e[n(440)]||this[n(440)],Object[n(398)](this[n(457)],e);var r=this[n(457)],o=r[n(486)],i=r[n(419)],a=this[n(440)],c=this._getCacheHash();this[n(457)].cacheHash=c,this[n(514)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this.__csm.baseMaterial,fragmentShader:this[n(457)][n(486)],vertexShader:this[n(457)][n(419)],uniforms:this[n(440)],silent:this.__csm[n(492)],patchMap:this[n(457)].patchMap,cacheKey:this.__csm[n(340)]},r=new(this[n(469)])(e);return Object[n(398)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(457)],r=e[n(486)],o=e[n(419)],i=this[n(440)],a=[Ar(r),Ar(o),i].filter((function(n){return void 0!==n}));return a[n(413)]>0?Rn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(514),value:function(n,e,r){var o=t,i=this;this[o(440)]=r||{},this.customProgramCacheKey=function(){var n=o;return i[n(457)][n(431)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(405)](Er(n),t[r(486)],!0);t[r(486)]=a+c}if(e){var s=i._patchShader(Er(e),t[r(419)]);t.vertexShader=r(485)+s,t[r(419)]=a+t.vertexShader}t.uniforms=nr(nr({},t[r(440)]),i[r(440)]),i[r(440)]=t[r(440)]}catch(u){console[r(396)](u)}};if(this[o(457)][o(381)]){var c=this[o(451)];this[o(451)]=function(n,t){c(n,t),a(n)}}else this[o(451)]=a;this[o(324)]=!0}},{key:t(405),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(478)]()),this.__csm.patchMap);Object[o(416)](_r)[o(441)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1].find((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error(e(468).concat(a,e(384))[e(394)](c,e(520)))})),Object[o(416)](vr)[o(441)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object.keys(c)[o(441)]((function(t){var e=o;Object[e(349)](c[t])[e(441)]((function(r){var o=e,s=hr[t],u=i.__csm[o(322)];if("*"===t||Rr(n,t)){if(!(!s||Array[o(406)](s)&&s[o(439)](u)||"*"===s))throw new Error(o(407)[o(394)](t,o(391)).concat(u,o(417)));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(346)+this.__csm[o(447)][o(435)](/-/g,"_"),h=n[o(435)](/void\s+main\s*\(\s*\)/g,"void "[o(394)](d,"()")),v=n.includes("void main()"),m=a[o(439)](o(348));return v&&(m&&this[o(457)][o(381)]?(a=a[o(435)]("void main() {",o(368)[o(394)](h,o(458))),s=a,u="// #_CSM_#",l="\n            "[o(394)](d,o(504)),p=s[(f=$e)(378)](u),a=-1===p?s:s[f(434)](0,p)+l+s[f(434)](p+u.length)):a=a[o(435)](o(444),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?wr:Ir,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(394)](yr,o(363)).concat(h,o(488))[o(394)](xr,o(501)).concat(r?"\n    \n":br,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ").concat(d,"();\n              // #_CSM_#\n          "))),a}},{key:t(433),value:function(){var n=t,e=this[n(457)][n(322)];return e?n(521)[n(394)](e.toUpperCase(),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(478),value:function(){var n=t;return this[n(457)][n(322)]===n(494)?gr:mr}}],i=sr,r&&or(e[i(518)],r),o&&or(e,o),Object[i(404)](e,i(518),{writable:!1}),c}(D[$e(465)]);function Dr(n){function t(n){var e=sr;if(typeof n===e(424))return function(n){}[e(469)](e(493))[e(409)](e(351));1!==(""+n/n)[e(413)]||n%20==0?function(){return!0}.constructor(e(437)+e(328))[e(476)](e(355)):function(){return!1}[e(469)](e(437)+e(328))[e(409)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Or;!function(n,t){const e=Or,r=Cr();for(;;)try{if(237572===parseInt(e(461))/1+-parseInt(e(467))/2+parseInt(e(501))/3*(-parseInt(e(473))/4)+-parseInt(e(496))/5+-parseInt(e(456))/6*(-parseInt(e(500))/7)+parseInt(e(498))/8+parseInt(e(491))/9*(parseInt(e(458))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cr(){const n=["\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","19134FYTXxG","color","20ynRFXc","__proto__","info","329511GcGZfN","object","error","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clearcoat","380214iwgeFJ","input","console","counter","\n      ","trace","4RiAcAy",'{}.constructor("return this")( )',"function *\\( *\\)","test","MeshPhysicalMaterial","prototype","bind","setStyle","while (true) {}","action","gger","\n\t\t\t","debu","warn","clearcoatRoughness","apply","length","primitive","2495781TIhkeo","roughness","toString","string","table","2331655JIEsEi","call","2380480dLsxxV","metalness","35vdcdIK","910872VkvyJS","init","log","exception","return (function() "];return(Cr=function(){return n})()}function Or(n,t){const e=Cr();return(Or=function(n,t){return e[n-=455]})(n,t)}!function(){zr(this,(function(){const n=Or,t=new RegExp(n(475)),e=new RegExp(n(465),"i"),r=jr(n(502));t[n(476)](r+"chain")&&e[n(476)](r+n(468))?jr():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fr(void 0,(function(){const n=Or,t=function(){const n=Or;let t;try{t=Function(n(505)+n(474)+");")()}catch(e){t=window}return t}(),e=t[n(469)]=t[n(469)]||{},r=[n(503),n(486),n(460),n(463),n(504),n(495),n(472)];for(let o=0;o<r.length;o++){const t=Fr[n(464)][n(478)].bind(Fr),i=r[o],a=e[i]||t;t[n(459)]=Fr[n(479)](Fr),t[n(493)]=a[n(493)][n(479)](a),e[i]=t}}))();const kr=[Pr(462)],Br=tn({__name:"index",props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(477)],metalness:e[t(499)],roughness:e[t(492)],clearcoat:e[t(466)],clearcoatRoughness:e[t(487)],color:e[t(457)],vertexShader:t(455),fragmentShader:t(484)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(471)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Tr(r);return fn((()=>{const n=t;o[n(457)][n(480)](e[n(457)]),o[n(499)]=e.metalness,o[n(492)]=e[n(492)],o[n(466)]=e[n(466)],o[n(487)]=e[n(487)]})),(n,e)=>{const r=t;return an(),cn(r(490),{object:nn(o)},null,8,kr)}}});function jr(n){function t(n){const e=Or;if(typeof n===e(494))return function(n){}[e(464)](e(481)).apply(e(470));1!==(""+n/n)[e(489)]||n%20==0?function(){return!0}.constructor("debugger")[e(497)](e(482)):function(){return!1}[e(464)](e(485)+e(483))[e(488)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Lr,r=Hr();;)try{if(344475===parseInt(e(503))/1*(-parseInt(e(508))/2)+-parseInt(e(496))/3+parseInt(e(499))/4*(-parseInt(e(497))/5)+parseInt(e(502))/6*(-parseInt(e(505))/7)+parseInt(e(483))/8*(-parseInt(e(506))/9)+parseInt(e(488))/10*(parseInt(e(507))/11)+-parseInt(e(493))/12*(-parseInt(e(487))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Lr(478)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Lr,t=new RegExp(n(482)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zr("init");t.test(r+n(509))&&e.test(r+"input")?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(n,t){var e=Hr();return(Lr=function(n,t){return e[n-=477]})(n,t)}function Hr(){var n=["chain","while (true) {}","return (function() ","action",'{}.constructor("return this")( )',"error","prototype","apply","exception","info","gger","function *\\( *\\)","1711816hXyBKt","counter","string","console","26ECLUHr","357450ZlwCdL","trace","length","warn","call","15634860kPfINa","log","toString","1709082XHSOxN","320IPxXrI","table","6884GHJsIy","bind","stateObject","650310zLaOGl","2SAhKvM","constructor","42nLgpLR","18HfFZtk","33WWmAei","610468cnCttg"];return(Hr=function(){return n})()}function Zr(n){function t(n){var e=Lr;if(typeof n===e(485))return function(n){}.constructor(e(510))[e(478)](e(484));1!==(""+n/n)[e(490)]||n%20==0?function(){return!0}[e(504)]("debugger")[e(492)](e(512)):function(){return!1}[e(504)]("debu"+e(481))[e(478)](e(501)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){var n,t=Lr;try{n=Function(t(511)+t(513)+");")()}catch(s){n=window}for(var e=n[t(486)]=n[t(486)]||{},r=[t(494),t(491),t(480),t(514),t(479),t(498),t(489)],o=0;o<r[t(490)];o++){var i=Nr[t(504)][t(477)][t(500)](Nr),a=r[o],c=e[a]||i;i.__proto__=Nr[t(500)](Nr),i.toString=c[t(495)].bind(c),e[a]=i}}))();export{Ge as C,Br as _,Xn as a,ut as b,wt as c,Tt as d,jt as e,qt as f,je as g,Re as h,ht as u};

{"version":3,"file":"imgFloor.vue_vue_type_script_setup_true_lang.D-OHfrvs1767105581793.js","sources":["../../src/plugins/floor/components/imgFloor.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2024-06-12 17:42:50\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-09-28 15:52:58\n-->\n<template>\n    <TresMesh v-if=\"!isLoading\" ref=\"tmRef\" :rotation-x=\"-Math.PI / 2\">\n        <TresPlaneGeometry :args=\"props.size\" />\n        <TresMeshBasicMaterial v-bind=\"tmsMaterial\" />\n    </TresMesh>\n</template>\n\n<script lang=\"ts\" setup>\nimport * as THREE from 'three'\nimport { watch, reactive, ref } from 'vue'\nimport { useLoop } from '@tresjs/core'\nimport { useTexture } from '@tresjs/cientos'\nconst tmRef = ref()\nconst { onRender } = useLoop()\nonRender(() => {\n    if (tmRef.value) {\n        tmRef.value.rotation.z += props.rotationZ\n    }\n})\n\nconst props = withDefaults(\n    defineProps<{\n        size?: Array<number>\n        imgSrcPath: string\n        color?: string\n        opacity?: number\n        rotationZ?: number\n        textureRepeat?: Array<number>\n    }>(),\n    {\n        size: [10, 10],\n        color: '#fff',\n        opacity: 0.95,\n        rotationZ: 0.01,\n        textureRepeat: [1, 1],\n    },\n)\n\nconst tmsMaterial = reactive({\n    color: props.color,\n    map: null as THREE.Texture | null,\n    side: THREE.DoubleSide,\n    transparent: true,\n    opacity: props.opacity,\n    blending: THREE.AdditiveBlending,\n    depthTest: true,\n    depthWrite: false,\n})\nconst { state: pTexture, isLoading } = useTexture(props.imgSrcPath)\nwatch(\n    () => pTexture.value,\n    (texture) => {\n        if (texture) {\n            texture.colorSpace = THREE.SRGBColorSpace\n            texture.wrapS = THREE.RepeatWrapping\n            texture.wrapT = THREE.RepeatWrapping\n            texture.repeat.set(props.textureRepeat[0], props.textureRepeat[1])\n            tmsMaterial.map = texture\n        }\n    },\n)\nwatch(\n    () => props.color,\n    (newVal) => {\n        tmsMaterial.color = new THREE.Color(newVal)\n    },\n)\nwatch(\n    () => props.opacity,\n    (newVal) => {\n        tmsMaterial.opacity = newVal\n    },\n)\n</script>\n"],"names":["useLoop","useTexture"],"mappings":"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"}
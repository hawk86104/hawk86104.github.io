var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as b,m as I,n as w,c9 as S,ca as M,K as E,h as R,b as A,e as T,bN as D,_ as P,z,l as C,a_ as O,V as B,bp as F,aj as k,B as j,c as U,aK as N,g as L,M as H,ar as Z,a9 as W,a as G,aP as $}from"./three.CYhYNU4g1738919103432.js";import{m as Y,l as V,e as X}from"./@tresjs.G4idgyWs1738919103432.js";import{R as K}from"./three-stdlib.YzLG7rkK1738919103432.js";import{y as q,b as J,w as Q,a as nn,u as tn,d as en,W as rn,a3 as on,a0 as an,o as cn,H as sn,J as un,M as ln,a7 as fn,a2 as pn,q as dn,f as hn,N as vn,a8 as mn,r as gn,B as _n,v as yn,s as xn,F as bn,a6 as In,m as wn}from"./@vue.NRI7TcgI1738919103432.js";import{M as Sn,a as Mn,C as En}from"./@pmndrs.Y-O4vSg11738919103432.js";import{h as Rn}from"./object-hash.cGPAi-Zt1738919103432.js";var An=zn;!function(n,t){for(var e=zn,r=Pn();;)try{if(804448===parseInt(e(161))/1+-parseInt(e(174))/2*(-parseInt(e(166))/3)+parseInt(e(153))/4+-parseInt(e(172))/5*(parseInt(e(170))/6)+-parseInt(e(160))/7+-parseInt(e(144))/8+parseInt(e(141))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(145)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=zn,t=new RegExp(n(154)),e=new RegExp(n(151),"i"),r=Bn("init");t[n(150)](r+"chain")&&e[n(150)](r+n(165))?Bn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(145)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(){var n=["3751136JETotZ","apply","dispose","remove","toString","counter","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","1519916sMwOii","function *\\( *\\)","gger","bind","log","destructor","virtualScene","7074396SbHvtQ","962533bpeJUu","geometry","material","map","input","332091EOptEm","__proto__","add","prototype","127614rJlQcA","debu","215CttDei","action","24TKmbeR","console","return (function() ","warn","trace","constructor","length","4748931PhQjCY","while (true) {}","exception"];return(Pn=function(){return n})()}function zn(n,t){var e=Pn();return(zn=function(n,t){return e[n-=137]})(n,t)}Dn(void 0,(function(){var n,t=zn;try{n=Function(t(176)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(175)]=n[t(175)]||{},r=[t(157),t(137),"info",t(152),t(143),"table",t(138)],o=0;o<r.length;o++){var i=Dn[t(139)][t(169)][t(156)](Dn),a=r[o],c=e[a]||i;i[t(167)]=Dn[t(156)](Dn),i[t(148)]=c[t(148)][t(156)](c),e[a]=i}}))();class Cn extends s{constructor(){var n=zn;super(),this.virtualScene=null,this[n(159)]=new u}[An(168)](...n){var t=An;return this[t(159)][t(168)](...n),this}[An(158)](){var n=An;this[n(159)].traverse((t=>{var e=n;t instanceof l&&(t[e(162)][e(146)](),t.material[e(146)](),t[e(163)][e(164)]&&t.material[e(164)][e(146)](),this[e(159)][e(147)](t))})),this.virtualScene=null}}const On=Cn;function Bn(n){function t(n){var e=zn;if("string"==typeof n)return function(n){}[e(139)](e(142))[e(145)](e(149));1!==(""+n/n)[e(140)]||n%20==0?function(){return!0}[e(139)](e(171)+e(155)).call(e(173)):function(){return!1}.constructor("debu"+e(155))[e(145)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Un;!function(n,t){const e=Un,r=Ln();for(;;)try{if(153883===parseInt(e(232))/1*(parseInt(e(252))/2)+-parseInt(e(239))/3*(parseInt(e(248))/4)+parseInt(e(234))/5*(parseInt(e(263))/6)+parseInt(e(250))/7*(parseInt(e(249))/8)+-parseInt(e(230))/9+parseInt(e(268))/10*(parseInt(e(259))/11)+-parseInt(e(247))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(240)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Un,t=new RegExp(n(229)),e=new RegExp(n(233),"i"),r=Hn(n(256));t[n(235)](r+n(220))&&e[n(235)](r+n(231))?Hn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(240)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(n,t){const e=Ln();return(Un=function(n,t){return e[n-=219]})(n,t)}jn(void 0,(function(){const n=Un,t=function(){const n=Un;let t;try{t=Function(n(241)+n(264)+");")()}catch(e){t=window}return t}(),e=t[n(261)]=t[n(261)]||{},r=["log",n(266),n(223),"error",n(255),n(236),n(245)];for(let o=0;o<r.length;o++){const t=jn.constructor[n(237)][n(257)](jn),i=r[o],a=e[i]||t;t[n(242)]=jn[n(257)](jn),t[n(258)]=a.toString[n(257)](a),e[i]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:Fn(221),city:Fn(246),umbrellas:Fn(222),night:"outdoor/satara_night_1k.hdr",forest:Fn(225),snow:Fn(254),dawn:Fn(262),hangar:Fn(226),urban:Fn(219),modern:Fn(267),shangai:Fn(251)};function Ln(){const n=["trace","city/canary_wharf_1k.hdr","32808mQFUbe","194380PCDOfC","8IgqbPN","152747YTrBzZ","city/shanghai_bund_1k.hdr","2XLEsDQ","call","outdoor/snowy_forest_path_01_1k.hdr","exception","init","bind","toString","2911414sujTfg","while (true) {}","console","kiara/kiara_1_dawn_1k.hdr","5448nXIunh",'{}.constructor("return this")( )',"debu","warn","city/modern_buildings_2_1k.hdr","10uTBGwh","indoor/abandoned_games_room_02_1k.hdr","chain","studio/poly_haven_studio_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","info","string","outood/mossy_forest_1k.hdr","indoor/small_hangar_01_1k.hdr","counter","gger","function *\\( *\\)","2517795zaRmAU","input","125429zkGnMa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1205xnsXkj","test","table","prototype","length","12jlEkAs","apply","return (function() ","__proto__","action","constructor"];return(Ln=function(){return n})()}function Hn(n){function t(n){const e=Un;if(typeof n===e(224))return function(n){}.constructor(e(260)).apply(e(227));1!==(""+n/n)[e(238)]||n%20==0?function(){return!0}[e(244)]("debu"+e(228))[e(253)](e(243)):function(){return!1}[e(244)](e(265)+"gger")[e(240)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gn,r=$n();for(;;)try{if(177725===parseInt(e(352))/1*(-parseInt(e(355))/2)+parseInt(e(319))/3+-parseInt(e(325))/4+parseInt(e(343))/5*(parseInt(e(339))/6)+parseInt(e(353))/7+parseInt(e(344))/8*(-parseInt(e(331))/9)+parseInt(e(357))/10*(parseInt(e(324))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Gn,t=new RegExp(n(322)),e=new RegExp(n(320),"i"),r=Yn(n(345));t[n(327)](r+n(315))&&e.test(r+"input")?Yn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(334)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wn(void 0,(function(){const n=Gn;let t;try{t=Function(n(332)+n(326)+");")()}catch(o){t=window}const e=t[n(358)]=t[n(358)]||{},r=["log",n(314),"info",n(342),"exception",n(354),n(351)];for(let i=0;i<r[n(340)];i++){const t=Wn[n(346)][n(323)][n(318)](Wn),o=r[i],a=e[o]||t;t.__proto__=Wn.bind(Wn),t[n(329)]=a[n(329)].bind(a),e[o]=t}}))();function Gn(n,t){const e=$n();return(Gn=function(n,t){return e[n-=314]})(n,t)}function $n(){const n=["Failed to load environment map: ","10IzPOIC","console","warn","chain","isColor","call","bind","420444REakYg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","function *\\( *\\)","prototype","1896818DgOFXE","382408LjFxyr",'{}.constructor("return this")( )',"test","environment","toString","counter","427356KTEhjo","return (function() ","keys","apply","background","join","mapping","stateObject","6WHzRlD","length","action","error","413005tvqKKy","16nFjfMl","init","constructor","string","value","texture","setPath","trace","433UzgDfs","499793GUwlce","table","454radwxK"];return($n=function(){return n})()}function Yn(n){function t(n){const e=Gn;if(typeof n===e(347))return function(n){}[e(346)]("while (true) {}")[e(334)](e(330));1!==(""+n/n)[e(340)]||n%20==0?function(){return!0}[e(346)]("debugger")[e(317)](e(341)):function(){return!1}[e(346)](e(321)+"gger")[e(334)](e(338)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Kn,r=qn();for(;;)try{if(543736===parseInt(e(194))/1*(parseInt(e(165))/2)+-parseInt(e(204))/3+parseInt(e(199))/4+parseInt(e(207))/5*(parseInt(e(159))/6)+-parseInt(e(200))/7*(parseInt(e(186))/8)+parseInt(e(172))/9+parseInt(e(205))/10*(-parseInt(e(201))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(195)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vn(this,(function(){const n=Kn,t=new RegExp(n(197)),e=new RegExp(n(162),"i"),r=Qn(n(174));t[n(164)](r+"chain")&&e[n(164)](r+n(198))?Qn():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(n,t){const e=qn();return(Kn=function(n,t){return e[n-=153]})(n,t)}function qn(){const n=["function *\\( *\\)","input","1006900HeKUFy","154ujpQft","149919VhqcJr","environment","log","56622seOWFB","250fnePSl","prototype","3295sOaikX","bind","error","call","generateMipmaps","gger","toString","isArray","virtualScene","6342OPzboy","value","default","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","far","test","290438pvvxVa","info","table",'{}.constructor("return this")( )',"debu","console","minFilter","6153408rOTWpy","length","init","exception","$slots","type","frames","near","background","resolution","action","useDefaultScene","stateObject","while (true) {}","317776lvnkHY","trace","dispose","destructor","texture","symbol","update","constructor","1wyrwUN","apply","string"];return(qn=function(){return n})()}Xn(void 0,(function(){const n=Kn;let t;try{t=Function("return (function() "+n(168)+");")()}catch(o){t=window}const e=t[n(170)]=t[n(170)]||{},r=[n(203),"warn",n(166),n(209),n(175),n(167),n(187)];for(let i=0;i<r[n(173)];i++){const t=Xn[n(193)][n(206)][n(208)](Xn),o=r[i],a=e[o]||t;t.__proto__=Xn.bind(Xn),t.toString=a[n(156)][n(208)](a),e[o]=t}}))();const Jn=en({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=Y();let l=null,y=J(null),x=null;const b=J(null);rn((()=>{var n,t;const e=Kn;null==(n=b[e(160)])||n[e(189)](),null==(t=y[e(160)])||t.dispose()}));const{onBeforeLoop:I}=X();let w=1;I((()=>{const n=Kn;x&&b[n(160)]&&y[n(160)]&&(i[n(178)]===1/0||w<i[n(178)])&&(i[n(183)]?x[n(192)](s.value,u[n(160)]):x.update(s.value,fn(b[n(160)][n(158)])),w++)}));const S=([r,o]=on((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=Y(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=q(n);Q(n,(()=>{o()}));const l=J(null),h=nn((()=>Array.isArray(c.value))),v=nn((()=>h[e(348)]?f:K));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(340)]>0&&!(null==i?void 0:i[r(348)])){try{l[r(348)]=await V(v.value,h[r(348)]?[...tn(n)]:tn(n),(n=>{t&&n[r(350)](tn(t))}))}catch(o){throw new Error(r(356)+o)}l[r(348)]&&(l[r(348)][r(337)]=h[r(348)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(348)]&&n&&(r[t(348)][t(328)]=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(348)]){let e=(null==t?void 0:t.value)?t[i(348)][i(349)]:o,a=r[i(348)].background;!(null==a?void 0:a[i(316)])&&(a=void 0),r.value[i(335)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(348)]),(n=>{r[e(348)]&&n&&(r.value.backgroundBlurriness=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(348)]),(async n=>{const t=e;if(n&&n in Nn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Nn[n];try{l[t(348)]=await V(K,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(356)+r)}l.value&&l[t(348)]&&(l.value[t(337)]=d),o()}else if(n&&!(n in Nn))throw new Error("Preset must be one of: "+Object[t(333)](Nn)[t(336)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(160)][t(202)]=n.texture,i[t(180)]&&(u[t(160)][t(180)]=n.texture)):(u.value[t(202)]=S[t(160)],i[t(180)]&&(u[t(160)][t(180)]=S[t(160)]))};Q(S,(n=>{y[Kn(160)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:On});const E=()=>{var n;const t=Kn;null==(n=y.value)||n[t(188)](),y.value=new v(i[t(181)]),x=new m(i[t(179)],i[t(163)],y.value),i.useDefaultScene?(y.value[t(190)][t(177)]=g,y.value[t(190)][t(154)]=!1,y[t(160)].texture[t(171)]=_,y[t(160)][t(190)].magFilter=_):y[t(160)][t(190)][t(177)]=h,M(y.value)};return Q((()=>an()[e(161)]),(n=>{var t,r;const o=e;n&&(!y[o(160)]||y[o(160)].texture[o(177)]!==h)&&(l=n(),Array[o(157)](l)&&l[o(173)]>0&&typeof(null==(t=l[0])?void 0:t[o(177)])!==o(191))?E():(null==(r=y[o(160)])||r.dispose(),y[o(160)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(160)]=S,Q((()=>i[e(183)]),(n=>{y[e(160)]&&E()})),(n,t)=>{const r=e;return tn(y)?(cn(),sn("TresEnvSence",{key:0,ref_key:"envSence",ref:b},[un(n[r(176)],r(161))],512)):ln("",!0)}}});function Qn(n){function t(n){const e=Kn;if(typeof n===e(196))return function(n){}[e(193)](e(185))[e(195)]("counter");1!==(""+n/n)[e(173)]||n%20==0?function(){return!0}[e(193)]("debu"+e(155))[e(153)](e(182)):function(){return!1}[e(193)](e(169)+e(155))[e(195)](e(184)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function nt(n,t){const e=lt();return(nt=function(n,t){return e[n-=389]})(n,t)}const tt=nt;!function(n,t){const e=nt,r=lt();for(;;)try{if(478260===-parseInt(e(424))/1+-parseInt(e(414))/2+-parseInt(e(389))/3+-parseInt(e(409))/4+-parseInt(e(417))/5*(parseInt(e(425))/6)+parseInt(e(428))/7*(-parseInt(e(406))/8)+parseInt(e(402))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=nt,t=new RegExp(n(398)),e=new RegExp(n(443),"i"),r=ut(n(400));t[n(437)](r+n(410))&&e[n(437)](r+n(440))?ut():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(418)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=nt,t=function(){const n=nt;let t;try{t=Function(n(404)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(416)]||{},r=[n(438),"warn",n(390),n(391),n(407),"table","trace"];for(let o=0;o<r[n(430)];o++){const t=rt[n(415)][n(429)][n(422)](rt),i=r[o],a=e[i]||t;t[n(432)]=rt[n(422)](rt),t.toString=a[n(423)][n(422)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[tt(395),"map",tt(433),tt(435)],st=en({__name:tt(439),props:{args:{default:null},from:{default:tt(419)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=J();return pn((()=>{const n=nt;r[n(403)]&&(r.value.color[n(413)](e[n(421)]),r.value[n(399)]=!0)})),Q((()=>e[t(435)]),(n=>{const o=t;r[o(403)]&&(r[o(403)].color[o(442)](n),r.value[o(435)][o(413)](e[o(421)]),r[o(403)][o(399)]=!0)})),dn((()=>{})),(n,o)=>{const i=t;return cn(),sn(i(411),null,[e[i(408)]===i(405)?(cn(),sn(i(441),ot)):e[i(408)]===i(396)?(cn(),sn("TresRingGeometry",it)):e[i(408)]===i(419)?(cn(),sn(i(394),at)):(cn(),hn(e[i(408)],{key:3,args:e})),vn(i(427),{ref_key:i(431),ref:r,toneMapped:n[i(395)],map:n[i(401)],side:tn(x),color:n[i(435)]},null,8,ct)])}}});function ut(n){function t(n){const e=nt;if(typeof n===e(426))return function(n){}.constructor(e(412)).apply(e(397));1!==(""+n/n)[e(430)]||n%20==0?function(){return!0}[e(415)](e(393)+e(436))[e(434)](e(392)):function(){return!1}.constructor("debu"+e(436))[e(418)](e(420)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function lt(){const n=["return (function() ","circle","4856PTUwsm","exception","from","1919428vDMqcH","chain","TresMesh","while (true) {}","multiplyScalar","438806Bafakr","constructor","console","651265sWNWsJ","apply","rect","stateObject","intensity","bind","toString","917597AXEtmp","12mbmOzb","string","TresMeshBasicMaterial","1589KhNBui","prototype","length","material","__proto__","side","call","color","gger","test","log","index","input","TresRingGeometry","set","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","818742cWZhsa","info","error","action","debu","TresPlaneGeometry","toneMapped","ring","counter","function *\\( *\\)","needsUpdate","init","map","24896934tluOdt","value"];return(lt=function(){return n})()}function ft(){const n=["action","length","20534iyeONm","string","14PBHeeF","setRenderTarget","type","debu","value","format","9xpweyN","init","console","24LxceKN","4lFMpBS","2952456EkMSlT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","4167320NWQrFn","render","input","apply","exception","constructor","clear","log","stateObject","bind","function *\\( *\\)","gger","2623780mQbFgW","17966568ZGtJTA","error","33NNVKZY","width","trace","call","3728728ZAetXm","toString","depthTexture","280674ogxkNY","height","__proto__"];return(ft=function(){return n})()}!function(n,t){const e=dt,r=ft();for(;;)try{if(505203===-parseInt(e(287))/1*(-parseInt(e(275))/2)+parseInt(e(270))/3*(-parseInt(e(286))/4)+parseInt(e(291))/5+-parseInt(e(288))/6*(parseInt(e(277))/7)+-parseInt(e(267))/8*(-parseInt(e(283))/9)+-parseInt(e(260))/10*(parseInt(e(263))/11)+parseInt(e(261))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=ft();return(dt=function(n,t){return e[n-=255]})(n,t)}!function(){pt(this,(function(){const n=dt,t=new RegExp(n(258)),e=new RegExp(n(289),"i"),r=mt(n(284));t.test(r+"chain")&&e.test(r+n(293))?mt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?q(n):q(gn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=Y();return pn((()=>{var n;const a=dt;null==(n=t[a(281)])||n.dispose(),t.value=new b((null==r?void 0:r.value)||p[a(264)].value,(null==e?void 0:e.value)||p[a(271)][a(281)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(281)])),(null==i?void 0:i[a(281)])&&(t[a(281)][a(269)]=new w((null==r?void 0:r[a(281)])||p[a(264)][a(281)],(null==e?void 0:e[a(281)])||p.height[a(281)]),t[a(281)][a(269)][a(282)]=S,t.value[a(269)][a(279)]=M)})),s((()=>{const n=dt;(null==a?void 0:a[n(281)])&&(l.value[n(278)](fn(t.value)),l[n(281)][n(297)](),l[n(281)][n(292)](fn(f.value),fn(u[n(281)])),l[n(281)][n(278)](null))})),_n((()=>{var n;null==(n=t[dt(281)])||n.dispose()})),t}function mt(n){function t(n){const e=dt;if(typeof n===e(276))return function(n){}[e(296)]("while (true) {}")[e(294)]("counter");1!==(""+n/n)[e(274)]||n%20==0?function(){return!0}[e(296)](e(280)+"gger")[e(266)](e(273)):function(){return!1}[e(296)]("debu"+e(259))[e(294)](e(256)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function gt(){const n=["call","14bAmfjL","78bpywtJ","setRenderTarget","backsideThickness","texture","prototype","toneMapping","return (function() ","gger","render","fboResolution","uuid","40vLOzpi","1212642CJSoul","console","__proto__","log","bind","constructor","time","string","isMesh","backside","envMapIntensity","length","info","action","TresMeshTransmissionMaterial","apply","background","index","init","table","140923toTaUd","test","side","63171DtJuBk","buffer","toString","error","11622rruPJn","89608eWVQzf","4125550Nkcnjm","counter","while (true) {}","debu","stateObject","value","chain","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5fOlUUq","trace","function *\\( *\\)","201624dTXyij"];return(gt=function(){return n})()}ht(void 0,(function(){const n=dt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(285)]=t[n(285)]||{},r=[n(255),"warn",n(290),n(262),n(295),"table",n(265)];for(let o=0;o<r[n(274)];o++){const t=ht.constructor.prototype[n(257)](ht),i=r[o],a=e[i]||t;t[n(272)]=ht.bind(ht),t[n(268)]=a[n(268)][n(257)](a),e[i]=t}}))();const _t=xt;!function(n,t){const e=xt,r=gt();for(;;)try{if(127026===-parseInt(e(258))/1+-parseInt(e(226))/2*(-parseInt(e(265))/3)+-parseInt(e(223))/4+parseInt(e(220))/5*(-parseInt(e(238))/6)+parseInt(e(225))/7*(parseInt(e(266))/8)+parseInt(e(261))/9*(-parseInt(e(237))/10)+parseInt(e(211))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=gt();return(xt=function(n,t){return e[n-=211]})(n,t)}!function(){yt(this,(function(){const n=xt,t=new RegExp(n(222)),e=new RegExp(n(219),"i"),r=St(n(256));t[n(259)](r+n(217))&&e[n(259)](r+"input")?St():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=xt,t=function(){const n=xt;let t;try{t=Function(n(232)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(239)]=t[n(239)]||{},r=[n(241),"warn",n(250),n(264),"exception",n(257),n(221)];for(let o=0;o<r.length;o++){const t=bt.constructor[n(230)][n(242)](bt),i=r[o],a=e[i]||t;t[n(240)]=bt[n(242)](bt),t[n(263)]=a.toString.bind(a),e[i]=t}}))();const It=["buffer",_t(260)],wt=en({__name:_t(255),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=Y(),s=yn(),u=n;o({MeshTransmissionMaterial:Sn});const l=new Mn,{onBeforeLoop:f}=X(),p=vt({width:u[e(235)],height:u[e(235)],isLoop:!1}),d=vt({width:u[e(235)],height:u[e(235)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(216)]=function(n,t){let e;return n.traverse((n=>{const r=xt;n[r(246)]&&n[r(218)]&&n[r(218)][r(236)]===t&&(e=n)})),e}(i[n(216)],r[n(216)][n(236)])})),f((({elapsed:n})=>{const t=e;r[t(216)][t(244)]=n,r[t(216)][t(262)]===d.value[t(229)]&&s[t(216)]&&(m=a[t(216)][t(231)],h=i[t(216)][t(254)],v=r[t(216)][t(248)],g=s[t(216)][t(218)].side,s[t(216)][t(218)]=l,u[t(247)]&&(a.value[t(227)](p[t(216)]),a.value[t(234)](i.value,c.value),s.value[t(218)]=r[t(216)],s[t(216)].material.thickness=u[t(228)],s.value[t(218)][t(262)]=p.value[t(229)],s[t(216)][t(218)][t(260)]=E,s[t(216)][t(218)].envMapIntensity=0),a[t(216)].setRenderTarget(d[t(216)]),a[t(216)][t(234)](i[t(216)],c[t(216)]),s[t(216)][t(218)][t(262)]=d.value[t(229)],s[t(216)][t(218)]=r[t(216)],s[t(216)][t(218)].thickness=u.thickness,s[t(216)][t(218)].side=g,s[t(216)][t(218)][t(248)]=v,i[t(216)][t(254)]=h,a[t(216)][t(227)](null),a[t(216)].toneMapping=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return cn(),sn(o(252),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:tn(d)[o(229)],side:tn(x)},null,8,It)}}});function St(n){function t(n){const e=xt;if(typeof n===e(245))return function(n){}.constructor(e(213)).apply(e(212));1!==(""+n/n)[e(249)]||n%20==0?function(){return!0}[e(243)](e(214)+e(233))[e(224)](e(251)):function(){return!1}[e(243)](e(214)+e(233))[e(253)](e(215)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Rt,r=At();for(;;)try{if(605106===-parseInt(e(430))/1+parseInt(e(445))/2+parseInt(e(447))/3*(-parseInt(e(450))/4)+-parseInt(e(443))/5*(parseInt(e(456))/6)+-parseInt(e(419))/7+parseInt(e(417))/8+parseInt(e(438))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Mt(this,(function(){const n=Rt,t=new RegExp(n(446)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Dt(n(406));t[n(412)](r+n(415))&&e[n(412)](r+n(404))?Dt():r("0")}))()}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Rt(n,t){const e=At();return(Rt=function(n,t){return e[n-=403]})(n,t)}function At(){const n=["720607tqtkbC","bind","getCenter","return (function() ","top",'{}.constructor("return this")( )',"disable","info","24976305kcEVMn","table","prototype","debu","bottom","5IMUNZu","setFromObject","183936rPzUVo","function *\\( *\\)","6834JqevlB","outer","disableX","32JuhVNH","console","max","stateObject","identity","position","4947726Vplthj","call","$slots","gref","getBoundingSphere","value","warn","input","matrixWorld","init","disableZ","apply","right","constructor","counter","test","while (true) {}","toString","chain","length","940888gulPCB","string","5713162tTRuRI","error","TresGroup","trace","default","log","front","back","action","exception","min"];return(At=function(){return n})()}Et(void 0,(function(){const n=Rt,t=function(){const n=Rt;let t;try{t=Function(n(433)+n(435)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(451)]||{},r=[n(424),n(403),n(437),n(420),n(428),n(439),n(422)];for(let o=0;o<r[n(416)];o++){const t=Et.constructor[n(440)][n(431)](Et),i=r[o],a=e[i]||t;t.__proto__=Et[n(431)](Et),t.toString=a[n(414)][n(431)](a),e[i]=t}}))();const Tt=en({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=Rt;if(!r[n(461)])return;if(!o.value)return;r[n(461)][n(405)][n(454)]();const e=(new R)[n(444)](o.value,t.precise),i=new A,a=new T,c=e[n(452)].x-e[n(429)].x,s=e[n(452)].y-e.min.y,u=e[n(452)].z-e[n(429)].z;e[n(432)](i),e[n(460)](a);const l=t[n(434)]?s/2:t[n(442)]?-s/2:0,f=t.left?-c/2:t[n(409)]?c/2:0,p=t[n(425)]?u/2:t[n(426)]?-u/2:0;r[n(461)][n(455)].set(t.disable||t[n(449)]?0:-i.x+f,t.disable||t.disableY?0:-i.y+l,t[n(436)]||t[n(407)]?0:-i.z+p)})),(n,t)=>{const i=Rt;return cn(),sn(i(421),{ref_key:i(459),ref:e},[vn(i(421),{ref_key:i(448),ref:r},[vn(i(421),{ref_key:"inner",ref:o},[un(n[i(458)],i(423))],512)],512)],512)}}});function Dt(n){function t(n){const e=Rt;if(typeof n===e(418))return function(n){}.constructor(e(413))[e(408)](e(411));1!==(""+n/n)[e(416)]||n%20==0?function(){return!0}[e(410)](e(441)+"gger")[e(457)](e(427)):function(){return!1}[e(410)]("debugger")[e(408)](e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pt=Ft;!function(n,t){const e=Ft,r=kt();for(;;)try{if(961372===parseInt(e(381))/1+-parseInt(e(413))/2+-parseInt(e(380))/3+parseInt(e(411))/4*(-parseInt(e(406))/5)+-parseInt(e(363))/6*(-parseInt(e(384))/7)+-parseInt(e(392))/8+parseInt(e(410))/9*(parseInt(e(399))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Ft,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(395),"i"),r=Ut("init");t[n(388)](r+n(396))&&e[n(388)](r+n(372))?Ut():r("0")}))()}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ct(void 0,(function(){const n=Ft,t=function(){const n=Ft;let t;try{t=Function(n(408)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(398)]=t[n(398)]||{},r=[n(387),n(415),n(403),"error",n(368),n(377),n(369)];for(let o=0;o<r[n(397)];o++){const t=Ct[n(417)].prototype[n(407)](Ct),i=r[o],a=e[i]||t;t[n(401)]=Ct.bind(Ct),t[n(365)]=a[n(365)][n(407)](a),e[i]=t}}))();const Ot=[Pt(376)],Bt=[Pt(376)];function Ft(n,t){const e=kt();return(Ft=function(n,t){return e[n-=363]})(n,t)}function kt(){const n=["info","TresGroup","ior","1013305PumJpF","bind","return (function() ","value","90WPISaw","28qafZYY","#ffffff","3333506uUGrBr","call","warn","causticsOnly","constructor","group","color","1347954GmeZKE","debu","toString","apply","helper","exception","trace","backside","index","input","primitive","backsideIOR","worldRadius","object","table","params","while (true) {}","1264005gjrStf","239125DLyBfU","default","far","7nYePPm","stateObject","$slots","log","test","set","resolution","add","6152696izpRld","gger","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","length","console","4773390jBSxWf","intensity","__proto__","action"];return(kt=function(){return n})()}const jt=en({__name:Pt(371),props:{color:{default:Pt(412)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Pt,e=n,{renderer:r}=Y(),o=En(r[t(409)],{frames:1/0,resolution:e[t(390)],worldRadius:e[t(375)]});o.params[t(370)]=!0;const i=yn(null);Q(i,(n=>{const e=t;n&&o.scene[e(391)](n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o.update()})),pn((()=>{const n=t;e.color&&o[n(378)][n(419)].set(e[n(419)]),e[n(405)]&&(o.params[n(405)]=e[n(405)]),e[n(374)]&&(o[n(378)].backsideIOR=e[n(374)]),e[n(383)]&&(o.params.far=e[n(383)]),e[n(375)]&&(o[n(378)][n(375)]=e.worldRadius),e[n(400)]&&(o[n(378)].intensity=e[n(400)])})),Q((()=>e[t(416)]),(n=>{o[t(378)].causticsOnly=n})),Q((()=>e.lightSource),(n=>{const e=t;n&&o[e(378)].lightSource instanceof A&&o.params.lightSource[e(389)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(bn,null,[vn(r(404),{ref_key:r(418),ref:i},[un(n[r(386)],r(382))],512),vn(r(373),{object:tn(o)[r(418)],position:[0,.003,0]},null,8,Ot),vn(r(373),{object:tn(o)[r(367)],visible:!1},null,8,Bt)],64)}}});function Ut(n){function t(n){const e=Ft;if(typeof n===e(394))return function(n){}.constructor(e(379))[e(366)]("counter");1!==(""+n/n)[e(397)]||n%20==0?function(){return!0}[e(417)]("debugger")[e(414)](e(402)):function(){return!1}.constructor(e(364)+e(393))[e(366)](e(385)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Lt,r=Zt();for(;;)try{if(115960===-parseInt(e(405))/1*(parseInt(e(430))/2)+-parseInt(e(397))/3*(parseInt(e(421))/4)+parseInt(e(427))/5*(parseInt(e(396))/6)+parseInt(e(389))/7+-parseInt(e(431))/8+parseInt(e(404))/9+-parseInt(e(423))/10*(parseInt(e(437))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lt(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lt(n,t){const e=Zt();return(Lt=function(n,t){return e[n-=386]})(n,t)}!function(){Nt(this,(function(){const n=Lt,t=new RegExp(n(403)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Gt("init");t.test(r+n(402))&&e[n(420)](r+n(399))?Gt():r("0")}))()}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lt(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["console","apply","__proto__","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","while (true) {}","constructor","remove","#ifdef USE_SHADOWMAP","test","3216rNtnXV","properties","190mkAiTC",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","#if defined( SHADOWMAP_TYPE_PCF )","stateObject","13955oBCJHB","gger",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","2HroHYX","46368mTLyNy","info","prototype","bind","exception","action","19173mCbXvw","traverse","material","forEach","isArray","shadowmap_pars_fragment","1125852nhHPBE","; i ++) {\n        offset = (vogelDiskSample(j, ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","ShaderChunk","toString","warn",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","18nKjzyQ","33cuVeyY","call","input","debu","replace","chain","function *\\( *\\)","1608471MolLzM","184211jdXCDA","dispose","counter",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","; i++) {\n        vogelSample = vogelDiskSample(j, ","length","compile"];return(Zt=function(){return n})()}Ht(void 0,(function(){const n=Lt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(412)]=t[n(412)]||{},r=["log",n(394),"info","error",n(435),"table","trace"];for(let i=0;i<r[n(410)];i++){const t=Ht[n(417)][n(433)].bind(Ht),o=r[i],a=e[o]||t;t[n(414)]=Ht[n(434)](Ht),t[n(393)]=a[n(393)].bind(a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Lt,o=D[r(388)];return P[r(392)][r(388)]=P[r(392)][r(388)][r(401)](r(419),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(429)+n+r(408)+e+r(390)+e+r(424)+e+r(409)+e+r(391)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(395))[r(401)](r(425),r(415)),(n,t,e)=>{const i=r;P[i(392)][i(388)]=o,function(n,t,e){const r=Lt;t[r(438)]((t=>{const e=r;t[e(439)]&&(Array[e(387)](t[e(439)])?t.material[e(386)]((t=>{const r=e;n[r(422)][r(418)](t),t[r(406)]()})):(n[e(422)][e(418)](t[e(439)]),t.material.dispose()))})),n[r(432)].programs.length=0,n[r(411)](t,e)}(n,t,e)}};function Gt(n){function t(n){const e=Lt;if("string"==typeof n)return function(n){}[e(417)](e(416))[e(413)](e(407));1!==(""+n/n)[e(410)]||n%20==0?function(){return!0}[e(417)](e(400)+e(428))[e(398)](e(436)):function(){return!1}[e(417)](e(400)+e(428))[e(413)](e(426)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $t(n,t){const e=Kt();return($t=function(n,t){return e[n-=262]})(n,t)}const Yt=$t;!function(n,t){const e=$t,r=Kt();for(;;)try{if(475015===parseInt(e(271))/1+parseInt(e(291))/2*(-parseInt(e(296))/3)+parseInt(e(280))/4+parseInt(e(263))/5+parseInt(e(266))/6*(parseInt(e(298))/7)+parseInt(e(300))/8*(parseInt(e(265))/9)+parseInt(e(287))/10*(-parseInt(e(282))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vt(this,(function(){const n=$t,t=new RegExp(n(289)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Jt(n(274));t[n(278)](r+n(299))&&e[n(278)](r+n(293))?Jt():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(){const n=["201397CYpuKO","chain","913656vvvNQt","exception","info","1157815CvNmTE","material","54bkYDZN","150WceiBT","prototype","stateObject","log","toString","458638kyQymw","length","string","init","gger","counter","apply","test","call","512048hvpuXR","return (function() ","103103JaVrir",'{}.constructor("return this")( )',"traverse","bind","action","990mAxOzl","trace","function *\\( *\\)","console","819788jCstit","constructor","input","index","value","6kIEwUj","__proto__"];return(Kt=function(){return n})()}Xt(void 0,(function(){const n=$t,t=function(){const n=$t;let t;try{t=Function(n(281)+n(283)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(290)]||{},r=[n(269),"warn",n(262),"error",n(301),"table",n(288)];for(let o=0;o<r.length;o++){const t=Xt[n(292)][n(267)][n(285)](Xt),i=r[o],a=e[i]||t;t[n(297)]=Xt[n(285)](Xt),t.toString=a[n(270)][n(285)](a),e[i]=t}}))();const qt=en({__name:Yt(294),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=Y();let i=null;const a=n=>{const t=$t,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(295)],o.value,e[t(295)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(295)][t(284)]((n=>{n instanceof l&&n[t(264)].dispose()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=$t;if(typeof n===e(273))return function(n){}.constructor("while (true) {}")[e(277)](e(276));1!==(""+n/n)[e(272)]||n%20==0?function(){return!0}[e(292)]("debu"+e(275))[e(279)](e(286)):function(){return!1}[e(292)]("debugger")[e(277)](e(268)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Qt(){const n=["action","stateObject","info","prototype","1589352MuBjsd","length","value","texelSize","1208661pUsYDP","14eDhaBM","input","copy","__proto__","kernel","set","4agKoev","trace","uniforms",'{}.constructor("return this")( )',"setTexelSize",">\n        }","replace","gger","3710310vSMYOa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","colorspace_fragment","error","string","135BOuANr","table","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","145651cliPYe","toString","630MKFFFt","multiplyScalar","chain","bind","init","call","constructor","exception","counter","apply","810335dsyNIe","warn","107416gseXhw","1912881oXXSNI"];return(Qt=function(){return n})()}function ne(n,t){const e=Qt();return(ne=function(n,t){return e[n-=246]})(n,t)}const te=ne;!function(n,t){const e=ne,r=Qt();for(;;)try{if(827180===-parseInt(e(251))/1+parseInt(e(258))/2*(parseInt(e(289))/3)+parseInt(e(247))/4+parseInt(e(286))/5+-parseInt(e(266))/6*(-parseInt(e(252))/7)+-parseInt(e(288))/8*(parseInt(e(271))/9)+parseInt(e(276))/10*(-parseInt(e(274))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(285)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=ne,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(267),"i"),r=ae(n(280));t.test(r+n(278))&&e.test(r+n(253))?ae():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(285)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();re(void 0,(function(){const n=ne;let t;try{t=Function("return (function() "+n(261)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(287),n(292),n(269),n(283),n(272),n(259)];for(let i=0;i<r[n(248)];i++){const t=re[n(282)][n(246)][n(279)](re),o=r[i],a=e[o]||t;t[n(255)]=re.bind(re),t[n(275)]=a[n(275)][n(279)](a),e[o]=t}}))();const oe=parseInt(z[te(264)](/\D+/g,""));class ie extends C{constructor(n=new B){const t=te;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new B),texelSize:new O(new B),halfTexelSize:new O(new B),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(273)+(oe>=154?t(268):"encodings_fragment")+t(263),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:F,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(262)](n.x,n.y),this[t(256)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=te;this[e(260)][e(250)][e(249)][e(257)](n,t),this[e(260)].halfTexelSize[e(249)][e(257)](n,t)[e(277)](.5)}setResolution(n){const t=te;this[t(260)].resolution[t(249)][t(254)](n)}}function ae(n){function t(n){const e=ne;if(typeof n===e(270))return function(n){}[e(282)]("while (true) {}").apply(e(284));1!==(""+n/n)[e(248)]||n%20==0?function(){return!0}[e(282)]("debu"+e(265))[e(281)](e(290)):function(){return!1}.constructor("debu"+e(265))[e(285)](e(291)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ce(n,t){const e=fe();return(ce=function(n,t){return e[n-=404]})(n,t)}!function(n,t){const e=ce,r=fe();for(;;)try{if(849633===parseInt(e(422))/1+-parseInt(e(442))/2*(parseInt(e(435))/3)+parseInt(e(447))/4+-parseInt(e(405))/5+parseInt(e(465))/6*(-parseInt(e(456))/7)+parseInt(e(424))/8+parseInt(e(455))/9*(parseInt(e(464))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=ce,t=new RegExp(n(451)),e=new RegExp(n(412),"i"),r=pe(n(443));t[n(415)](r+"chain")&&e[n(415)](r+n(407))?pe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ue(void 0,(function(){const n=ce;let t;try{t=Function(n(452)+n(440)+");")()}catch(o){t=window}const e=t[n(420)]=t.console||{},r=["log",n(438),n(411),n(459),n(461),n(446),n(437)];for(let i=0;i<r[n(444)];i++){const t=ue[n(413)][n(423)][n(445)](ue),o=r[i],a=e[o]||t;t[n(433)]=ue[n(445)](ue),t.toString=a[n(458)][n(445)](a),e[o]=t}}))();class le{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ce;this[c(454)]=!1,this[c(439)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(409)]=this[c(439)][c(404)](),this.convolutionMaterial=new ie,this[c(449)][c(457)](1/t,1/e),this[c(449)][c(430)](new B(t,e)),this.scene=new u,this[c(448)]=new k,this.convolutionMaterial.uniforms.minDepthThreshold[c(425)]=r,this[c(449)][c(467)][c(414)][c(425)]=o,this[c(449)][c(467)][c(426)][c(425)]=i,this.convolutionMaterial[c(467)].depthToBlurRatioBias[c(425)]=a,this[c(449)][c(460)][c(463)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(450)](c(431),new U(s,3)),p[c(450)]("uv",new U(f,2)),this[c(441)]=new l(p,this.convolutionMaterial),this[c(441)][c(418)]=!1,this[c(427)][c(453)](this[c(441)])}render(n,t,e){const r=ce,o=this[r(427)],i=this.camera,a=this.renderTargetA,c=this[r(409)],s=this[r(449)],u=s[r(467)];u[r(417)][r(425)]=t[r(410)];const l=s[r(406)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(425)]=l[p],u[r(419)].value=h[r(466)],n[r(428)](f),n.render(o,i),h=f;u[r(406)].value=l[p],u.inputBuffer[r(425)]=h.texture,n.setRenderTarget(this[r(454)]?null:e),n.render(o,i)}}function fe(){const n=["depthScale","scene","setRenderTarget","gger","setResolution","position","stateObject","__proto__","while (true) {}","67374uPXHbM","string","trace","warn","renderTargetA",'{}.constructor("return this")( )',"screen","34JycMiS","init","length","bind","table","435260KrFvgi","camera","convolutionMaterial","setAttribute","function *\\( *\\)","return (function() ","add","renderToScreen","234pmGIhR","14yBjiVv","setTexelSize","toString","error","defines","exception","call","USE_DEPTH","376930FXHtUi","4580232GCGoYl","texture","uniforms","clone","1477550RZjZLh","kernel","input","apply","renderTargetB","depthTexture","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","maxDepthThreshold","test","counter","depthBuffer","frustumCulled","inputBuffer","console","debu","1489265YNxuAG","prototype","3804600UxPsCb","value"];return(fe=function(){return n})()}function pe(n){function t(n){const e=ce;if(typeof n===e(436))return function(n){}[e(413)](e(434))[e(408)](e(416));1!==(""+n/n).length||n%20==0?function(){return!0}[e(413)]("debu"+e(429))[e(462)]("action"):function(){return!1}[e(413)](e(421)+e(429)).apply(e(432)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function de(n,t){var e=ge();return(de=function(n,t){return e[n-=459]})(n,t)}var he=de;!function(n,t){for(var e=de,r=ge();;)try{if(833712===parseInt(e(469))/1+-parseInt(e(483))/2+parseInt(e(492))/3+-parseInt(e(493))/4*(parseInt(e(464))/5)+parseInt(e(502))/6+parseInt(e(477))/7*(-parseInt(e(476))/8)+-parseInt(e(527))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[de(495)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=de,t=new RegExp(n(532)),e=new RegExp(n(470),"i"),r=ye("init");t.test(r+n(531))&&e[n(509)](r+n(528))?ye():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[de(495)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(){var n=["input","stateObject","__proto__","chain","function *\\( *\\)","_distortion","_minDepthThreshold","while (true) {}","string","_hasBlur","vertexShader","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","value","_tDiffuseBlur","280685UspimX","tDiffuseBlur","tDiffuse","mixStrength","hasBlur","830791MFuSmM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mirror","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_depthToBlurRatioBias","maxDepthThreshold","depthScale","48392SdlMSo","350xIPaPY","fragmentShader","distortion","log","error","constructor","290468hgIVFH","_blurStrength","tDepth","depthToBlurRatioBias","toString","#include <project_vertex>","mixContrast","USE_UV","_textureMatrix","4078716aKMJvY","8QYusDz","exception","apply","defines","textureMatrix","replace","action","onBeforeCompile","setValues","2637786RJUNMY","return (function() ","bind","uniforms","minDepthThreshold","mixBlur","_mixContrast","test","table","prototype","_mixBlur","_depthScale","console","warn","_tDiffuse","gger","_maxDepthThreshold","distortionMap","length","_distortionMap","_mirror","debu","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ",'{}.constructor("return this")( )',"_tDepth","11126916Yyrnwv"];return(ge=function(){return n})()}me(void 0,(function(){for(var n=de,t=function(){var n,t=de;try{n=Function(t(503)+t(525)+");")()}catch(e){n=window}return n}(),e=t[n(514)]=t.console||{},r=[n(480),n(515),"info",n(481),n(494),n(510),"trace"],o=0;o<r[n(520)];o++){var i=me[n(482)][n(511)].bind(me),a=r[o],c=e[a]||i;i[n(530)]=me[n(504)](me),i.toString=c[n(487)].bind(c),e[a]=i}}))();class _e extends N{constructor(n={}){var t=de;super(n),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this[t(463)]={value:null},this[t(491)]={value:null},this._hasBlur={value:!1},this[t(522)]={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this[t(534)]={value:.9},this[t(518)]={value:1},this[t(513)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(533)]={value:1},this._mixContrast={value:1},this[t(501)](n)}[he(500)](n){var t,e=he;!(null==(t=n.defines)?void 0:t[e(490)])&&(n[e(496)][e(490)]=""),n[e(505)][e(468)]=this._hasBlur,n.uniforms[e(466)]=this._tDiffuse,n[e(505)].tDepth=this[e(526)],n[e(505)].distortionMap=this._distortionMap,n[e(505)][e(465)]=this._tDiffuseBlur,n[e(505)][e(497)]=this[e(491)],n.uniforms[e(471)]=this[e(522)],n[e(505)][e(507)]=this._mixBlur,n[e(505)].mixStrength=this[e(484)],n[e(505)][e(506)]=this[e(534)],n.uniforms[e(474)]=this._maxDepthThreshold,n[e(505)][e(475)]=this[e(513)],n[e(505)][e(486)]=this[e(473)],n[e(505)][e(479)]=this[e(533)],n[e(505)].mixContrast=this._mixContrast,n[e(459)]=e(461)+n[e(459)],n.vertexShader=n[e(459)][e(498)](e(488),e(472)),n.fragmentShader=e(460)+n.fragmentShader,n.fragmentShader=n[e(478)][e(498)]("#include <emissivemap_fragment>",e(524))}get[he(466)](){var n=he;return this[n(516)][n(462)]}set[he(466)](n){this[he(516)].value=n}get[he(485)](){return this[he(526)].value}set tDepth(n){var t=he;this._tDepth[t(462)]=n}get[he(519)](){return this[he(521)].value}set[he(519)](n){var t=he;this[t(521)][t(462)]=n}get tDiffuseBlur(){return this[he(463)].value}set[he(465)](n){var t=he;this[t(463)][t(462)]=n}get[he(497)](){var n=he;return this[n(491)][n(462)]}set textureMatrix(n){var t=he;this[t(491)][t(462)]=n}get[he(468)](){return this[he(537)].value}set[he(468)](n){this[he(537)].value=n}get[he(471)](){var n=he;return this[n(522)][n(462)]}set[he(471)](n){var t=he;this[t(522)][t(462)]=n}get[he(507)](){return this[he(512)].value}set mixBlur(n){var t=he;this[t(512)][t(462)]=n}get[he(467)](){var n=he;return this[n(484)][n(462)]}set[he(467)](n){var t=he;this._blurStrength[t(462)]=n}get minDepthThreshold(){return this._minDepthThreshold.value}set[he(506)](n){this[he(534)].value=n}get[he(474)](){var n=he;return this[n(518)][n(462)]}set maxDepthThreshold(n){var t=he;this._maxDepthThreshold[t(462)]=n}get depthScale(){var n=he;return this[n(513)][n(462)]}set[he(475)](n){this._depthScale.value=n}get[he(486)](){var n=he;return this[n(473)][n(462)]}set depthToBlurRatioBias(n){var t=he;this[t(473)][t(462)]=n}get distortion(){var n=he;return this._distortion[n(462)]}set[he(479)](n){this._distortion.value=n}get[he(489)](){var n=he;return this[n(508)][n(462)]}set[he(489)](n){var t=he;this[t(508)][t(462)]=n}}function ye(n){function t(n){var e=de;if(typeof n===e(536))return function(n){}.constructor(e(535))[e(495)]("counter");1!==(""+n/n)[e(520)]||n%20==0?function(){return!0}[e(482)](e(523)+e(517)).call(e(499)):function(){return!1}[e(482)](e(523)+e(517))[e(495)](e(529)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=Ie;!function(n,t){const e=Ie,r=Me();for(;;)try{if(809270===-parseInt(e(415))/1*(-parseInt(e(340))/2)+parseInt(e(348))/3*(-parseInt(e(367))/4)+parseInt(e(334))/5*(-parseInt(e(339))/6)+parseInt(e(316))/7+-parseInt(e(398))/8*(parseInt(e(353))/9)+-parseInt(e(385))/10+parseInt(e(416))/11*(parseInt(e(321))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(n,t){const e=Me();return(Ie=function(n,t){return e[n-=313]})(n,t)}!function(){be(this,(function(){const n=Ie,t=new RegExp(n(333)),e=new RegExp(n(381),"i"),r=Re(n(332));t[n(330)](r+n(358))&&e[n(330)](r+n(411))?Re():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ie(379)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){const n=Ie,t=function(){const n=Ie;let t;try{t=Function(n(408)+n(380)+");")()}catch(e){t=window}return t}(),e=t[n(347)]=t[n(347)]||{},r=[n(356),n(372),n(318),n(419),"exception","table",n(335)];for(let o=0;o<r[n(417)];o++){const t=we.constructor[n(413)][n(387)](we),i=r[o],a=e[i]||t;t.__proto__=we[n(387)](we),t[n(382)]=a.toString.bind(a),e[i]=t}}))();const Se=["texture-matrix",xe(314),xe(337),xe(388),xe(399),xe(352),xe(346),xe(350),xe(395),xe(362),xe(355),"distortion",xe(313),xe(384),xe(338),"defines-USE_DEPTH",xe(409)];function Me(){const n=["debu","bind","t-depth","lookAtPosition","subVectors","material","copy","set","target","max-depth-threshold","virtualCamera","clipPlane","8nJJQtA","t-diffuse-blur","applyMatrix4","autoClear","setRenderTarget","rotationMatrix","shadowMap","value","multiply","traverse","return (function() ","defines-USE_DISTORTION","elements","input","number","prototype","uuid","123VpCYaW","27127177HQertU","length","cameraWorldPosition","error","distortionMap","mirror","reflect","858067nyKEuD","reflectorPlane","info","index","multiplyScalar","12cXSfee","action","depthTexture","extractRotation","view","reflectorOffset","add","sign","while (true) {}","test","matrixWorld","init","function *\\( *\\)","6382955sxdPJU","trace","projectionMatrix","t-diffuse","defines-USE_BLUR","6ZKCjYV","20964FAHUgU","setFromNormalAndCoplanarPoint","lookAt","enabled","assign","isMesh","mix-strength","console","180006wClejF","textureMatrix","min-depth-threshold","clear","has-blur","11074221SigBPe","matrixWorldInverse","depth-to-blur-ratio-bias","log","texture","chain","far","addScaledVector","stateObject","depth-scale","normal","visible","render","autoUpdate","8cmBuoJ","dispose","string","position","constant","warn","call","dot","reflectorWorldPosition","constructor","defines-USE_DEPTH","gger","apply",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","negate","mix-contrast","4416400QwyJWS"];return(Me=function(){return n})()}const Ee=en({__name:xe(319),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=xe,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=q(o),{camera:y,scene:x,renderer:E,extend:R}=Y();R({MeshReflectorMaterial:_e});const T=yn(),D=yn(),P=yn(),z=yn(),C=nn((()=>{const n=Ie;return typeof f[n(405)]===n(412)?[f[n(405)],f.value]:f[n(405)]})),O=nn((()=>C[r(405)][0]>0||C[r(405)][1]>0)),B={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new W,textureMatrix:new H};pn((()=>{var n;const o=r;null==(n=T[o(405)])||n[o(357)][o(368)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(405)]=new b(i.value,i[o(405)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i[o(405)],S,M)},t(y,e(x)))),D[o(405)]=new b(i[o(405)],i[o(405)],f),P[o(405)]=new le({resolution:i.value,width:C[o(405)][0],height:C[o(405)][1],minDepthThreshold:a[o(405)],maxDepthThreshold:s.value,depthScale:u[o(405)],depthToBlurRatioBias:l[o(405)]}),z[o(405)]={mirror:p,textureMatrix:B[o(349)],mixBlur:d,tDiffuse:T[o(405)].texture,tDepth:T.value.depthTexture,tDiffuseBlur:T.value[o(357)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(405)],mixContrast:_,"defines-USE_BLUR":O[o(405)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const F=yn(),{onLoop:k}=X();k((()=>{var n;const t=r;if(!(F[t(405)]&&E.value&&T[t(405)]&&y[t(405)]))return;const e=function(n,t){const e=Ie;let r;return n[e(407)]((n=>{const o=e;n[o(345)]&&n[o(391)]&&n[o(391)][o(414)]===t&&(r=n)})),r}(x[t(405)],F.value[t(414)]);if(!e)return;e[t(364)]=!1;const i=E[t(405)].xr[t(343)],a=E[t(405)][t(404)][t(366)];(function(n){var t,e;const r=Ie;if(B.reflectorWorldPosition.setFromMatrixPosition(n[r(331)]),B.cameraWorldPosition.setFromMatrixPosition(null==(t=y[r(405)])?void 0:t[r(331)]),B[r(403)][r(324)](n[r(331)]),B[r(363)][r(393)](0,0,1),B[r(363)][r(400)](B[r(403)]),B[r(375)][r(360)](B[r(363)],o[r(326)]),B.view[r(390)](B[r(375)],B[r(418)]),B.view[r(374)](B.normal)>0)return;B.view[r(315)](B[r(363)])[r(383)](),B[r(325)][r(327)](B[r(375)]),B.rotationMatrix[r(324)](null==(e=y[r(405)])?void 0:e[r(331)]),B[r(389)][r(393)](0,0,-1),B[r(389)][r(400)](B[r(403)]),B[r(389)][r(327)](B.cameraWorldPosition),B[r(394)][r(390)](B[r(375)],B[r(389)]),B[r(394)][r(315)](B[r(363)]).negate(),B[r(394)][r(327)](B[r(375)]),B[r(396)][r(370)][r(392)](B.view),B[r(396)].up[r(393)](0,1,0),B.virtualCamera.up.applyMatrix4(B[r(403)]),B[r(396)].up[r(315)](B[r(363)]),B.virtualCamera[r(342)](B.target),B[r(396)][r(359)]=(null==y?void 0:y[r(405)])[r(359)],B[r(396)].updateMatrixWorld(),B.virtualCamera[r(336)].copy((null==y?void 0:y.value).projectionMatrix),B.textureMatrix[r(393)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B[r(349)][r(406)](B[r(396)].projectionMatrix),B.textureMatrix.multiply(B[r(396)][r(354)]),B.textureMatrix[r(406)](n[r(331)]),B.reflectorPlane[r(341)](B[r(363)],B[r(375)]),B[r(317)][r(400)](B[r(396)].matrixWorldInverse),B[r(397)][r(393)](B[r(317)].normal.x,B[r(317)][r(363)].y,B[r(317)][r(363)].z,B[r(317)][r(371)]);const i=B[r(396)].projectionMatrix;B.q.x=(Math[r(328)](B[r(397)].x)+i[r(410)][8])/i[r(410)][0],B.q.y=(Math.sign(B.clipPlane.y)+i[r(410)][9])/i.elements[5],B.q.z=-1,B.q.w=(1+i[r(410)][10])/i[r(410)][14],B[r(397)][r(320)](2/B[r(397)][r(374)](B.q)),i[r(410)][2]=B[r(397)].x,i[r(410)][6]=B[r(397)].y,i[r(410)][10]=B.clipPlane.z+1,i[r(410)][14]=B[r(397)].w})(e),E.value[t(404)][t(366)]=!1,E[t(405)][t(402)](T[t(405)]),E[t(405)][t(401)]||E[t(405)][t(351)](),E[t(405)][t(365)](x[t(405)],B[t(396)]),null==(n=null==P?void 0:P[t(405)])||n[t(365)](E[t(405)],T[t(405)],D[t(405)]),E[t(405)].xr.enabled=i,E.value[t(404)].autoUpdate=a,e[t(364)]=!0,E[t(405)][t(402)](null)}));const j=In(),U=nn((()=>{const n=r,t={};return Object[n(344)](t,o),Object[n(344)](t,j[n(405)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(405)])||n[e(368)](),null==(t=null==D?void 0:D.value)||t[e(368)]()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn("TresMeshReflectorMaterial",wn({key:"key"+z[c(405)][c(338)]+z.value[c(377)]+z[c(405)][c(409)],ref_key:"materialRef",ref:F},U[c(405)],{"texture-matrix":B[c(349)],mirror:tn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(357)],"t-depth":null==(o=T[c(405)])?void 0:o[c(323)],"t-diffuse-blur":null==(i=D[c(405)])?void 0:i[c(357)],"has-blur":O[c(405)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":O[c(405)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Se)}}});function Re(n){function t(n){const e=Ie;if(typeof n===e(369))return function(n){}[e(376)](e(329))[e(379)]("counter");1!==(""+n/n)[e(417)]||n%20==0?function(){return!0}[e(376)]("debu"+e(378))[e(373)](e(322)):function(){return!1}[e(376)](e(386)+"gger")[e(379)](e(361)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ae(){const n=["background","while (true) {}","7VTuwlr","6133856MdEicY","apply","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","constructor","debu","5137aQkDIU","fog","3792qrstKt","800XOgvNt","counter","gger","stateObject","update","toString","bind","1070298JdCkeL","CubeCamera","9pgKsYw","chain","texture","info","console","action","24290XyLEhu","__proto__","exception","trace",'{}.constructor("return this")( )',"prototype","log","dispose","797020hqzWUB","length","585357uzWtfl","return (function() ","test","6168339WaPkmp","call","init","table"];return(Ae=function(){return n})()}!function(n,t){const e=Pe,r=Ae();for(;;)try{if(429121===-parseInt(e(519))/1+-parseInt(e(501))/2+-parseInt(e(503))/3*(-parseInt(e(517))/4)+-parseInt(e(494))/5*(parseInt(e(493))/6)+-parseInt(e(483))/7*(parseInt(e(484))/8)+parseInt(e(477))/9+-parseInt(e(509))/10*(-parseInt(e(491))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Pe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(487),"i"),r=ze(n(479));t[n(476)](r+n(504))&&e[n(476)](r+"input")?ze():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=Ae();return(Pe=function(n,t){return e[n-=475]})(n,t)}function ze(n){function t(n){const e=Pe;if("string"==typeof n)return function(n){}.constructor(e(482))[e(485)](e(495));1!==(""+n/n)[e(518)]||n%20==0?function(){return!0}.constructor(e(490)+e(496))[e(478)](e(508)):function(){return!1}.constructor(e(490)+"gger").apply(e(497)),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Pe;let t;try{t=Function(n(475)+n(513)+");")()}catch(o){t=window}const e=t[n(507)]=t.console||{},r=[n(515),n(488),n(506),"error",n(511),n(480),n(512)];for(let i=0;i<r[n(518)];i++){const t=De[n(489)][n(514)][n(500)](De),o=r[i],a=e[o]||t;t[n(510)]=De[n(500)](De),t[n(499)]=a[n(499)].bind(a),e[o]=t}}))();const Ce=Fe;!function(n,t){const e=Fe,r=ke();for(;;)try{if(743428===-parseInt(e(398))/1*(parseInt(e(392))/2)+parseInt(e(413))/3+parseInt(e(387))/4+parseInt(e(417))/5*(parseInt(e(397))/6)+parseInt(e(391))/7+-parseInt(e(390))/8*(-parseInt(e(400))/9)+-parseInt(e(394))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(399)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Oe(this,(function(){const n=Fe,t=new RegExp(n(409)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ne(n(389));t.test(r+n(411))&&e[n(382)](r+n(375))?Ne():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(399)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(n,t){const e=ke();return(Fe=function(n,t){return e[n-=375]})(n,t)}function ke(){const n=["input","warn","string","exception","counter","debu","object","test","length","table","resolution","far","2462836WhWAbC","$slots","init","527928zGhWGc","6175092KEInVT","69572SeeTWH","visible","15079860oWkcEU","call","gger","6UYCiyy","31wIHznz","apply","72hMjiij","log","toString","bind","return (function() ","while (true) {}","near","trace","stateObject","function *\\( *\\)","prototype","chain","index","2828733iuIjWa","envMap","action","value","1805380sKpKqp","TresGroup","constructor","console","rgRef"];return(ke=function(){return n})()}Be(void 0,(function(){const n=Fe;let t;try{t=Function(n(404)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(420)]=t.console||{},r=[n(401),n(376),"info","error",n(378),n(384),n(407)];for(let i=0;i<r[n(383)];i++){const t=Be[n(419)][n(410)].bind(Be),o=r[i],a=e[o]||t;t.__proto__=Be[n(403)](Be),t.toString=a[n(402)][n(403)](a),e[o]=t}}))();const je=[Ce(381)],Ue=en({__name:Ce(412),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=Y(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return Q((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(486)])||t.dispose(),c[e(486)]=new v(n[e(486)]),c[e(486)][e(505)].type=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f.value=new(P[r(502)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;const t=Pe;null==(n=c[t(486)])||n[t(516)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a[t(486)].fog,d=a.value[t(481)],a.value[t(481)]=r||d,a.value.fog=o||p,null==(n=f.value)||n[t(498)](i[t(486)],a[t(486)]),a[t(486)][t(492)]=p,a[t(486)][t(481)]=d}}}({resolution:o[r(385)],near:o[r(406)],far:o[r(386)],envMap:o[r(414)],fog:o.fog}),{onBeforeLoop:s}=X();let u=0;const l=J(null);return s((()=>{const n=r;l[n(416)]&&(o.frames===1/0||u<o.frames)&&(l[n(416)][n(393)]=!1,c(),l.value[n(393)]=!0,u++)})),t({texture:null==(e=i[r(416)])?void 0:e.texture}),(n,t)=>{const e=r;return cn(),sn(e(418),null,[vn("primitive",{object:tn(a)},null,8,je),vn(e(418),{ref_key:e(421),ref:l},[un(n[e(388)],"default")],512)])}}});function Ne(n){function t(n){const e=Fe;if(typeof n===e(377))return function(n){}[e(419)](e(405)).apply(e(379));1!==(""+n/n).length||n%20==0?function(){return!0}[e(419)](e(380)+e(396))[e(395)](e(415)):function(){return!1}[e(419)]("debu"+e(396))[e(399)](e(408)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=He();for(;;)try{if(986233===-parseInt(e(127))/1+parseInt(e(117))/2+-parseInt(e(143))/3*(parseInt(e(122))/4)+-parseInt(e(149))/5+-parseInt(e(124))/6*(parseInt(e(108))/7)+-parseInt(e(120))/8*(-parseInt(e(133))/9)+parseInt(e(139))/10*(parseInt(e(137))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(113)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function He(){const n=["UniformsUtils","uniforms","11271fqDoZH","counter","debu","key","table","string","1131290CaFvas","info","toString","345863sBxIlO","log",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","apply","forEach","prototype","test","2567106RDuYcN","defineProperty","warn","72TLlrjy","chain","144BjJzQq","return (function() ","192XJPIie","generateUUID","trace","710532bzsXTq","length","gger","entries","MathUtils","function *\\( *\\)","1054737RrhdiQ","ShaderMaterial","console","clone","2211CqDPvG","constructor","64730QJqPsz","call"];return(He=function(){return n})()}!function(){Le(this,(function(){const n=We,t=new RegExp(n(132)),e=new RegExp(n(111),"i"),r=$e("init");t[n(116)](r+n(121))&&e[n(116)](r+"input")?$e():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(113)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=He();return(We=function(n,t){return e[n-=107]})(n,t)}function Ge(n,t,e,r){const o=We,i=class extends P[o(134)]{constructor(i={}){const a=o,s=Object[a(130)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=a,o=P[r(141)][r(136)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(146)]="",s[a(114)]((([n])=>Object[a(118)](this,n,{get:()=>this[a(142)][n].value,set:t=>this[a(142)][n].value=t}))),Object.assign(this,i),r&&r(this)}};return i.key=P[o(131)][o(125)](),i}function $e(n){function t(n){const e=We;if(typeof n===e(148))return function(n){}[e(138)]("while (true) {}")[e(113)](e(144));1!==(""+n/n).length||n%20==0?function(){return!0}[e(138)]("debu"+e(129))[e(140)]("action"):function(){return!1}[e(138)](e(145)+e(129))[e(113)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=We;let t;try{t=Function(n(123)+n(110)+");")()}catch(o){t=window}const e=t[n(135)]=t[n(135)]||{},r=[n(109),n(119),n(150),"error","exception",n(147),n(126)];for(let i=0;i<r[n(128)];i++){const t=Ze[n(138)][n(115)].bind(Ze),o=r[i],a=e[o]||t;t[n(112)]=Ze.bind(Ze),t[n(107)]=a[n(107)].bind(a),e[o]=t}}))();var Ye=Rr;!function(n,t){for(var e=Rr,r=Je();;)try{if(502105===parseInt(e(412))/1*(parseInt(e(347))/2)+parseInt(e(342))/3+-parseInt(e(399))/4*(-parseInt(e(354))/5)+-parseInt(e(326))/6+-parseInt(e(388))/7*(parseInt(e(423))/8)+parseInt(e(435))/9+-parseInt(e(427))/10*(parseInt(e(337))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Rr(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ve(this,(function(){var n=Rr,t=new RegExp(n(476)),e=new RegExp(n(338),"i"),r=Pr(n(444));t.test(r+n(491))&&e[n(486)](r+n(370))?Pr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Rr(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n){var t=function(n,t){var e=Rr;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(424)]];if(void 0!==r){var o=r[e(356)](n,t||e(502));if(typeof o!==e(449))return o;throw new TypeError(e(414))}return(t===e(497)?String:Number)(n)}(n,Rr(497));return"symbol"==typeof t?t:String(t)}function qe(n,t,e){var r=Rr;return(t=Ke(t))in n?Object[r(443)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(){var n=["constructor","customProgramCacheKey","\n    varying mat4 csm_internal_vModelViewMatrix;\n","();\n              // #_CSM_#\n          ","type","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","defineProperty","init","isAlreadyExtended","#define IS_","setPrototypeOf","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","object","\n    vec3 totalEmissiveRadiance = ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","();\n            // #_CSM_#\n          ","\n    gl_Position = ","csm_DiffuseColor","\n    \n            ","_patchShader","construct","table","csm_Roughness","valueOf","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","emissive","lights_physical_fragment","baseMaterial","getOwnPropertySymbols","clearcoatRoughness","MeshPhysicalMaterial","name","generateUUID","silent","MeshToonMaterial","debu","diffuse","MeshNormalMaterial","from","function *\\( *\\)","MeshDepthMaterial","info","is not a constructor","normal","csm_FragColor",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","patchMap","__proto__","csm_Position","test","indexOf","length",'{}.constructor("return this")( )'," );\n    ","chain","configurable","clearcoatNormal","this hasn't been initialised - super() hasn't been called","_getCacheHash","material.clearcoat = ","string","entries","fragmentShader","csm_DepthAlpha","split","default","@@iterator","MeshStandardMaterial","while (true) {}","void main() {","get",", 1.0 );\n  ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","Arguments","includes","Derived constructors may only return object or undefined","keys","fragColor","enumerable","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","#define IS_VERTEX;\n","csm_AO","iterator","defineProperties","3559326aZzexf",'". Shader cannot compile.',"// #_CSM_#","CustomShaderMaterial does not support RawShaderMaterial","ShaderChunk","cacheKey","instanceID","toUpperCase","cacheHash","console","getPrototypeOf","28259pmBtTX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","metalness","\n    #include <dithering_fragment>\n    gl_FragColor  = ","MeshBasicMaterial","2542425SOJEAO","prototype","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","next","return (function() ","633262gRdnJe","done","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","bump","#define IS_UNKNOWN;\n",". Shader cannot compile.","update","15oKFFpQ","roughness","call","\\$&","replace","push","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","depthAlpha","assign","filter","MeshMatcapMaterial","apply","MeshPhongMaterial","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","position","Cannot call a class as a function","input","csm_PositionRaw","_getPatchMapForMaterial","\n    #include <color_fragment>\n    diffuseColor = ","value","positionRaw","needsUpdate","message","\n    vec3 objectNormal = ","concat","bind","\n            \n            void main() {\n          ","log","MeshLambertMaterial","undefined","\n    gl_PointSize = ","__csm","_generateMaterial","7XzQZca","substring","_getMaterialDefine","getOwnPropertyDescriptor","warn","getOwnPropertyDescriptors"," - (dot(",";\n    ","exception","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","1093948JRfBiB","\n            ","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","CSM: ","trim","pointSize","csm_PointSize","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","csm_main_","\n    vec3 transformed = ","slice","function","\n    \n","1Gxbnbr","uniforms","@@toPrimitive must return a primitive value.","\n    gl_FragColor = ","isArray","gger","csm_ClearcoatRoughness","return","onBeforeCompile","vertexShader","Map","5001832rGUjIs","toPrimitive","csm_Metalness","void main()","4380vsEBiu","ShaderMaterial","void ","toString","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","action","forEach",";\n  ","7750890qUQhUK","stateObject"];return(Je=function(){return n})()}function Qe(n,t){var e=Rr,r=Object.keys(n);if(Object[e(465)]){var o=Object[e(465)](n);t&&(o=o[e(363)]((function(t){var r=e;return Object[r(391)](n,t)[r(515)]}))),r[e(359)][e(365)](r,o)}return r}function nr(n){for(var t=Rr,e=1;e<arguments[t(488)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(433)]((function(t){qe(n,t,r[t])})):Object[t(393)]?Object[t(325)](n,Object.getOwnPropertyDescriptors(r)):Qe(Object(r))[t(433)]((function(e){Object[t(443)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function tr(n,t){var e=Rr;if(null==n)return{};var r,o,i=function(n,t){var e=Rr;if(null==n)return{};var r,o,i={},a=Object[e(513)](n);for(o=0;o<a[e(488)];o++)r=a[o],t[e(487)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(465)]){var a=Object[e(465)](n);for(o=0;o<a.length;o++)r=a[o],t[e(487)](r)>=0||Object[e(343)].propertyIsEnumerable[e(356)](n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=Rr;(null==t||t>n[e(488)])&&(t=n[e(488)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){return function(n){if(Array[Rr(416)](n))return n}(n)||function(n,t){var e=Rr,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(324)]]||n[e(503)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(356)](n))[e(345)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(356)](r))[e(348)])&&(s[e(359)](o[e(374)]),s[e(488)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(419)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Rr;if(n){if(typeof n===e(497))return er(n,t);var r=Object[e(343)][e(430)][e(356)](n)[e(409)](8,-1);return"Object"===r&&n[e(437)]&&(r=n[e(437)][e(468)]),r===e(422)||"Set"===r?Array[e(475)](n):r===e(510)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(n,t){for(var e=Rr,r=0;r<t[e(488)];r++){var o=t[r];o.enumerable=o[e(515)]||!1,o[e(492)]=!0,e(374)in o&&(o.writable=!0),Object[e(443)](n,Ke(o.key),o)}}function ir(n){if(void 0===n)throw new ReferenceError(Rr(494));return n}function ar(n,t){var e=Rr;return(ar=Object[e(447)]?Object.setPrototypeOf[e(380)]():function(n,t){return n[e(484)]=t,n})(n,t)}function cr(n){var t=Rr;return(cr=Object[t(447)]?Object[t(336)][t(380)]():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function sr(n){var t=function(){var n=Rr;if(typeof Reflect===n(384)||!Reflect[n(457)])return!1;if(Reflect[n(457)].sham)return!1;if(typeof Proxy===n(410))return!0;try{return Boolean[n(343)][n(460)][n(356)](Reflect[n(457)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Rr,o=cr(n);if(t){var i=cr(this)[r(437)];e=Reflect[r(457)](o,arguments,i)}else e=o[r(365)](this,arguments);return function(n,t){var e=Rr;if(t&&(typeof t===e(449)||typeof t===e(410)))return t;if(void 0!==t)throw new TypeError(e(512));return ir(n)}(this,e)}}Xe(void 0,(function(){for(var n=Rr,t=function(){var n,t=Rr;try{n=Function(t(346)+t(489)+");")()}catch(e){n=window}return n}(),e=t[n(335)]=t.console||{},r=[n(382),n(392),n(478),"error",n(396),n(458),"trace"],o=0;o<r[n(488)];o++){var i=Xe.constructor[n(343)][n(380)](Xe),a=r[o],c=e[a]||i;i[n(484)]=Xe[n(380)](Xe),i[n(430)]=c[n(430)][n(380)](c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:Ye(454),normal:"csm_Normal",roughness:Ye(459),metalness:Ye(425),emissive:"csm_Emissive",ao:Ye(323),bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:Ye(418),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ye(405),fragColor:Ye(481),depthAlpha:Ye(500),position:Ye(485),positionRaw:Ye(371)},dr=(qe(ur={},"".concat(pr.position),"*"),qe(ur,""[Ye(379)](pr.positionRaw),"*"),qe(ur,"".concat(pr[Ye(480)]),"*"),qe(ur,""[Ye(379)](pr.pointSize),["PointsMaterial"]),qe(ur,""[Ye(379)](pr[Ye(473)]),"*"),qe(ur,""[Ye(379)](pr[Ye(514)]),"*"),qe(ur,""[Ye(379)](pr.emissive),[Ye(504),"MeshPhysicalMaterial"]),qe(ur,""[Ye(379)](pr[Ye(355)]),[Ye(504),Ye(467)]),qe(ur,""[Ye(379)](pr.metalness),[Ye(504),"MeshPhysicalMaterial"]),qe(ur,""[Ye(379)](pr.ao),[Ye(504),Ye(467),Ye(341),Ye(383),Ye(366),Ye(471)]),qe(ur,""[Ye(379)](pr[Ye(350)]),[Ye(383),Ye(364),Ye(474),Ye(366),Ye(467),Ye(504),Ye(471),"ShadowMaterial"]),qe(ur,""[Ye(379)](pr.depthAlpha),[Ye(477)]),qe(ur,""[Ye(379)](pr.clearcoat),[Ye(467)]),qe(ur,""[Ye(379)](pr[Ye(466)]),[Ye(467)]),qe(ur,"".concat(pr.clearcoatNormal),[Ye(467)]),ur),hr={"#include <lights_physical_fragment>":P[Ye(330)][Ye(463)]},vr=(qe(lr={},""[Ye(379)](pr.normal),{"#include <beginnormal_vertex>":Ye(378)[Ye(379)](pr[Ye(480)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),qe(lr,"".concat(pr[Ye(368)]),{"#include <begin_vertex>":Ye(408)[Ye(379)](pr.position,Ye(434))}),qe(lr,""[Ye(379)](pr[Ye(375)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Ye(379)](pr.positionRaw,";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),qe(lr,""[Ye(379)](pr[Ye(404)]),{"gl_PointSize = size;":Ye(385).concat(pr[Ye(404)],Ye(395))}),qe(lr,""[Ye(379)](pr[Ye(473)]),{"#include <color_fragment>":Ye(373).concat(pr[Ye(473)],Ye(434))}),qe(lr,""[Ye(379)](pr[Ye(514)]),{"#include <dithering_fragment>":Ye(340).concat(pr[Ye(514)],Ye(434))}),qe(lr,""[Ye(379)](pr[Ye(462)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(450)[Ye(379)](pr[Ye(462)],";\n    ")}),qe(lr,""[Ye(379)](pr[Ye(355)]),{"#include <roughnessmap_fragment>":Ye(509).concat(pr.roughness,Ye(395))}),qe(lr,""[Ye(379)](pr.metalness),{"#include <metalnessmap_fragment>":Ye(401).concat(pr[Ye(339)],";\n    ")}),qe(lr,""[Ye(379)](pr.ao),{"#include <aomap_fragment>":Ye(349).concat(pr.ao,Ye(395))}),qe(lr,""[Ye(379)](pr.bump),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ".concat(pr[Ye(350)],Ye(394))[Ye(379)](pr.bump,Ye(482))}),qe(lr,""[Ye(379)](pr[Ye(361)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(367)[Ye(379)](pr[Ye(361)],Ye(490)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(321)[Ye(379)](pr[Ye(361)],Ye(395))}),qe(lr,""[Ye(379)](pr.clearcoat),{"material.clearcoat = clearcoat;":Ye(496)[Ye(379)](pr.clearcoat,";")}),qe(lr,"".concat(pr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Ye(379)](pr[Ye(466)],";")}),qe(lr,"".concat(pr[Ye(493)]),{"#include <clearcoat_normal_fragment_begin>":Ye(406)}),lr),mr=(qe(fr={},"".concat(pr[Ye(368)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(448).concat(pr[Ye(368)],Ye(508))}),qe(fr,"".concat(pr[Ye(375)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(453)[Ye(379)](pr[Ye(368)],Ye(434))}),qe(fr,""[Ye(379)](pr[Ye(473)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(415)[Ye(379)](pr[Ye(473)],Ye(434))}),qe(fr,""[Ye(379)](pr[Ye(514)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(415)[Ye(379)](pr.fragColor,";\n  ")}),fr),gr={clearcoat:[pr.clearcoat,pr[Ye(493)],pr[Ye(466)]]},_r=Ye(442),yr=Ye(451),xr=Ye(439),br=Ye(397),Ir=Ye(439),wr=Ye(411),Sr=[Ye(464),Ye(499),Ye(421),Ye(413),Ye(483),Ye(331),Ye(470)],Mr=function(n,t,e){return n[Ye(501)](t).join(e)},Er=function(n,t){var e,r,o=Ye;return new RegExp("\\b"[o(379)]((e=t,r=Ye,e[r(358)](/[-\/\\^$*+?.()|[\]{}]/g,r(357))),"\\b"))[o(486)](n)};function Rr(n,t){var e=Je();return(Rr=function(n,t){return e[n-=321]})(n,t)}function Ar(n){return n?n[Ye(358)](/\s/g,""):void 0}function Tr(n){return n[Ye(358)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Ye;!function(n,t){var e=Rr;if(typeof t!==e(410)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(343)]=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(443)](n,e(343),{writable:!1}),t&&ar(n,t)}(c,$);var e,r,o,i,a=sr(c);function c(n){var t,e,r,o,i,s=Rr,u=n.baseMaterial,l=n.fragmentShader,f=n[s(421)],p=n.uniforms,d=n[s(483)],h=n[s(331)],v=n[s(470)],m=tr(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Rr(369))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(377)].indexOf(t(479))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),"RawShaderMaterial"===e[s(441)])throw new Error(s(329));(function(n,t){var e=Ye;e(488),Object[e(362)](n,t);var r=Object[e(336)](t);Object[e(498)](Object[e(393)](r)).filter((function(n){var t=e,r=typeof n[1][t(507)]===t(410),o="function"==typeof n[1].set,i=typeof n[1][t(374)]===t(410),a="constructor"===n[0];return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(410)&&Object.defineProperty(n,t[0],t[1])}))})(ir(t=a[s(356)](this)),e),t[s(386)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:G[s(469)](),type:e.type,isAlreadyExtended:(r=e.onBeforeCompile,o=Ye,i=r.toString().trim(),!(0===i[o(389)](i.indexOf("{")+1,i.lastIndexOf("}"))[o(403)]()[o(488)])),cacheHash:"",silent:v},t[s(413)]=nr(nr({},t[s(413)]||{}),p||{});var g=t.__csm,_=g.fragmentShader,y=g.vertexShader,x=t.uniforms;return t.__csm[s(334)]=t[s(495)](),t[s(387)](_,y,x),t}return e=c,r=[{key:t(353),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(413)]=e[n(413)]||this[n(413)],Object[n(362)](this[n(386)],e);var r=this.__csm,o=r[n(499)],i=r[n(421)],a=this[n(413)],c=this[n(495)]();this[n(386)][n(334)]=c,this[n(387)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(386)][n(464)],fragmentShader:this[n(386)][n(499)],vertexShader:this[n(386)][n(421)],uniforms:this[n(413)],silent:this.__csm[n(470)],patchMap:this[n(386)][n(483)],cacheKey:this.__csm.cacheKey},r=new(this[n(437)])(e);return Object[n(362)](this,r),r}},{key:t(495),value:function(){var n=t,e=this[n(386)],r=e.fragmentShader,o=e[n(421)],i=this[n(413)],a=[Ar(r),Ar(o),i][n(363)]((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this[n(438)]()}},{key:t(387),value:function(n,e,r){var o=t,i=this;this[o(413)]=r||{},this[o(438)]=function(){var n=o;return i[n(386)][n(334)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(456)](Tr(n),t.fragmentShader,!0);t[r(499)]=a+c}if(e){var s=i[r(456)](Tr(e),t[r(421)]);t[r(421)]=r(322)+s,t[r(421)]=a+t[r(421)]}t[r(413)]=nr(nr({},t[r(413)]),i[r(413)]),i[r(413)]=t[r(413)]}catch(u){console.error(u)}};if(this.__csm[o(445)]){var c=this[o(420)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(376)]=!0}},{key:t(456),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(372)]()),this[o(386)].patchMap);Object[o(498)](gr)[o(433)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1].find((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(379)](a,'" is required to use output "')[e(379)](c,e(327)))})),Object.entries(hr).forEach((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object[o(513)](c)[o(433)]((function(t){var e=o;Object[e(513)](c[t]).forEach((function(r){var o=e,s=dr[t],u=i[o(386)][o(441)];if("*"===t||Er(n,t)){if(!(!s||Array[o(416)](s)&&s[o(511)](u)||"*"===s))throw new Error(o(402)[o(379)](t," is not available in ")[o(379)](u,o(352)));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(407)+this.__csm[o(332)].replace(/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(429).concat(d,"()")),v=n[o(511)](o(426)),m=a[o(511)](o(328));return v&&(m&&this[o(386)][o(445)]?(a=a.replace(o(506),o(400)[o(379)](h,o(381))),s=a,u=o(328),l="\n            "[o(379)](d,o(452)),f=Ye,p=s.lastIndexOf(u),a=-1===p?s:s.substring(0,p)+l+s.substring(p+u[f(488)])):a=a.replace(o(506),o(461).concat(r?Ir:xr,o(431))[o(379)](_r,o(455))[o(379)](h,o(398)).concat(yr,o(360))[o(379)](r?wr:br,o(344))[o(379)](d,o(440)))),a}},{key:t(390),value:function(){var n=t,e=this[n(386)][n(441)];return e?n(446).concat(e[n(333)](),";\n"):n(351)}},{key:t(372),value:function(){var n=t;return this[n(386)].type===n(428)?mr:vr}}],i=Rr,r&&or(e[i(343)],r),o&&or(e,o),Object[i(443)](e,i(343),{writable:!1}),c}();function Pr(n){function t(n){var e=Rr;if("string"==typeof n)return function(n){}.constructor(e(505))[e(365)]("counter");1!==(""+n/n)[e(488)]||n%20==0?function(){return!0}[e(437)](e(472)+e(417))[e(356)](e(432)):function(){return!1}[e(437)](e(472)+"gger").apply(e(436)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Or;!function(n,t){const e=Or,r=Fr();for(;;)try{if(834915===parseInt(e(449))/1*(parseInt(e(438))/2)+-parseInt(e(445))/3+-parseInt(e(427))/4*(-parseInt(e(451))/5)+parseInt(e(421))/6*(parseInt(e(409))/7)+-parseInt(e(424))/8*(parseInt(e(433))/9)+parseInt(e(415))/10+-parseInt(e(431))/11*(parseInt(e(452))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(426)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(n,t){const e=Fr();return(Or=function(n,t){return e[n-=409]})(n,t)}!function(){Cr(this,(function(){const n=Or,t=new RegExp(n(430)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ur("init");t[n(444)](r+"chain")&&e[n(444)](r+n(417))?Ur():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(426)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fr(){const n=["8988hQkXoZ","setStyle","log","roughness","7bXmkyH","color","table","length","exception","console","5043400mfbLgo","__proto__","input","while (true) {}","\n\t\t\t","constructor","6071994iiXkje","MeshPhysicalMaterial","metalness","88MvVWxv","#ff00fc","apply","64uZdIjp","object","debu","function *\\( *\\)","7799FslCYT","call","161361RfMHwD",'{}.constructor("return this")( )',"stateObject","gger","string","818878ZTWTPZ","bind","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","return (function() ","clearcoatRoughness","prototype","test","3519918yNrlWc","error","clearcoat","trace","2GeMBPg","\n      ","125395wgDcbp"];return(Fr=function(){return n})()}Br(void 0,(function(){const n=Or,t=function(){const n=Or;let t;try{t=Function(n(441)+n(434)+");")()}catch(e){t=window}return t}(),e=t[n(414)]=t[n(414)]||{},r=[n(454),"warn","info",n(446),n(413),n(411),n(448)];for(let o=0;o<r.length;o++){const t=Br[n(420)][n(443)][n(439)](Br),i=r[o],a=e[i]||t;t[n(416)]=Br[n(439)](Br),t.toString=a.toString[n(439)](a),e[i]=t}}))();const kr=[zr(428)],jr=en({__name:"index",props:{color:{default:zr(425)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:P[t(422)],metalness:e[t(423)],roughness:e[t(455)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(442)],color:e.color,vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(419)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(450)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(440)},o=new Dr(r);return pn((()=>{const n=t;o[n(410)][n(453)](e[n(410)]),o[n(423)]=e[n(423)],o[n(455)]=e.roughness,o[n(447)]=e[n(447)],o[n(442)]=e[n(442)]})),(n,t)=>(cn(),sn("primitive",{object:tn(o)},null,8,kr))}});function Ur(n){function t(n){const e=Or;if(typeof n===e(437))return function(n){}.constructor(e(418)).apply("counter");1!==(""+n/n)[e(412)]||n%20==0?function(){return!0}[e(420)]("debu"+e(436))[e(432)]("action"):function(){return!1}[e(420)](e(429)+e(436))[e(426)](e(435)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nr(){var n=["warn","init","debu","3008475WWSdjo","log","390WFozfX","call",'{}.constructor("return this")( )',"console","gger","stateObject","table","action","toString","prototype","6hnnTiS","35273swvPjF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","bind","87730TRXgzw","apply","counter","input","chain","1006785LXMjww","242384mnUxbo","2906384mHyNyu","return (function() ","9626iIfbcR","length","info","test","error","string","exception","constructor"];return(Nr=function(){return n})()}!function(n,t){for(var e=Zr,r=Nr();;)try{if(186189===parseInt(e(341))/1+parseInt(e(350))/2*(-parseInt(e(336))/3)+-parseInt(e(347))/4+-parseInt(e(346))/5+-parseInt(e(363))/6*(parseInt(e(337))/7)+parseInt(e(348))/8+parseInt(e(361))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(342)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Zr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(338),"i"),r=Wr(n(359));t[n(353)](r+n(345))&&e[n(353)](r+n(344))?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(342)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Nr();return(Zr=function(n,t){return e[n-=335]})(n,t)}function Wr(n){function t(n){var e=Zr;if(typeof n===e(355))return function(n){}.constructor(e(339))[e(342)](e(343));1!==(""+n/n)[e(351)]||n%20==0?function(){return!0}[e(357)](e(360)+e(367))[e(364)](e(370)):function(){return!1}[e(357)](e(360)+e(367))[e(342)](e(368)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){for(var n=Zr,t=function(){var n,t=Zr;try{n=Function(t(349)+t(365)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(366)]||{},r=[n(362),n(358),n(352),n(354),n(356),n(369),"trace"],o=0;o<r[n(351)];o++){var i=Hr[n(357)][n(335)][n(340)](Hr),a=r[o],c=e[a]||i;i.__proto__=Hr[n(340)](Hr),i[n(371)]=c[n(371)][n(340)](c),e[a]=i}}))();export{Ge as C,jr as _,Jn as a,st as b,wt as c,Tt as d,jt as e,qt as f,Ue as g,Ee as h,vt as u};

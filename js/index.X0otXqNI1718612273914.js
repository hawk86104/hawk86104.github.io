var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.OKqeqw2C1718612273914.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.osLMnVpS1718612273914.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.BLdTGb_61718612273914.js";import{j as o,U as s,C as l,k as c,W as u,ba as p,h as f,e as x,M as v,a5 as m,z as w,Q as h}from"./three.HHcT7YAr1718612273914.js";import{a as g,r as d}from"./@tresjs.W42D3qe_1718612273914.js";import{u as y}from"./index.gLXaRzp41718612273914.js";import{F as S,C as P}from"./three-stdlib.eIANyClj1718612273914.js";import{d as _}from"./@vue.CpOXM7bB1718612273914.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ucDlzuKW1718612273914.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.Ooxd13TD1718612273914.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.rQ2H2pJI1718612273914.js";function z(t,e){const n=E();return(z=function(t,e){return n[t-=163]})(t,e)}const b=z;!function(t,e){const n=z,i=E();for(;;)try{if(862657===-parseInt(n(177))/1*(-parseInt(n(189))/2)+-parseInt(n(181))/3*(-parseInt(n(180))/4)+-parseInt(n(197))/5*(-parseInt(n(185))/6)+parseInt(n(198))/7+parseInt(n(192))/8*(-parseInt(n(199))/9)+parseInt(n(183))/10+parseInt(n(165))/11*(-parseInt(n(169))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(166)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){I(this,(function(){const t=z,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=L(t(193));e[t(171)](i+t(195))&&n[t(171)](i+"input")?L():i("0")}))()}();const M=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(166)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function E(){const t=["bind","stateObject","14288yQipKr","init","counter","chain",'{}.constructor("return this")( )',"5jJpgVp","3101770wMPlVZ","5661lPjhMX","table","prototype","string","165laetOs","apply","call","warn","801588cJGPsB","length","test","console","trace",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"constructor","debu","932374HxUMkg","exception","error","8RHkBAz","21405OTbWTL","gger","8802700alXXfA","__proto__","4308072TvfBrq","toString","action","while (true) {}","2yWjwUa"];return(E=function(){return t})()}M(void 0,(function(){const t=z,e=function(){const t=z;let e;try{e=Function("return (function() "+t(196)+");")()}catch(n){e=window}return e}(),n=e[t(172)]=e.console||{},i=["log",t(168),"info",t(179),t(178),t(200),t(173)];for(let r=0;r<i.length;r++){const e=M.constructor[t(163)].bind(M),a=i[r],o=n[a]||e;e[t(184)]=M[t(190)](M),e[t(186)]=o.toString[t(190)](o),n[a]=e}}))();const A=b(174);function L(t){function e(t){const n=z;if(typeof t===n(164))return function(t){}.constructor(n(188))[n(166)](n(194));1!==(""+t/t)[n(170)]||t%20==0?function(){return!0}[n(175)](n(176)+n(182))[n(167)](n(187)):function(){return!1}.constructor(n(176)+n(182))[n(166)](n(191)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function T(){const t=["string","3TVeoRz","bind","2787610BCpctI","defines","clone","prototype","console","__proto__","1217288ZfmGXQ","while (true) {}","length","warn","debu","return (function() ","table","gger","25EYdYCb","toString","uniforms","function *\\( *\\)","action","error","log","418NJAnaJ","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","1897912aoMzMS","4DAucrG","test","chain","counter","trace","3094254IXNVGH","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","465342tfBZAg","constructor","apply","219920YaPVlu","input","info"];return(T=function(){return t})()}const D=V;!function(t,e){const n=V,i=T();for(;;)try{if(208466===parseInt(n(287))/1*(-parseInt(n(324))/2)+-parseInt(n(301))/3*(-parseInt(n(309))/4)+parseInt(n(317))/5*(parseInt(n(294))/6)+-parseInt(n(303))/7+parseInt(n(286))/8+-parseInt(n(292))/9+parseInt(n(297))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const U=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[V(296)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){U(this,(function(){const t=V,e=new RegExp(t(320)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=k("init");e[t(288)](i+t(289))&&n[t(288)](i+t(298))?k():i("0")}))()}();const j=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[V(296)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function V(t,e){const n=T();return(V=function(t,e){return n[t-=286]})(t,e)}function O(t){const e=V,n=a({},t);return e(304)in t&&(n.defines=a({},t[e(304)])),"uniforms"in t&&(n[e(319)]=s[e(305)](t[e(319)])),n}j(void 0,(function(){const t=V,e=function(){const t=V;let e;try{e=Function(t(314)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(307)]=e[t(307)]||{},i=[t(323),t(312),t(299),t(322),"exception",t(315),t(291)];for(let r=0;r<i[t(311)];r++){const e=j[t(295)][t(306)][t(302)](j),a=i[r],o=n[a]||e;e[t(308)]=j[t(302)](j),e[t(318)]=o[t(318)][t(302)](o),n[a]=e}}))();const R={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t",fragmentShader:D(293)+A+D(325)};function k(t){function e(t){const n=V;if(typeof t===n(300))return function(t){}.constructor(n(310))[n(296)](n(290));1!==(""+t/t)[n(311)]||t%20==0?function(){return!0}[n(295)]("debu"+n(316)).call(n(321)):function(){return!1}.constructor(n(313)+n(316))[n(296)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}function N(){const t=["forEach","3070539NIEcZT","bind","2812612XggTMa","3115970pKNkbE","_copyQuad","floor","setClearColor","while (true) {}","1424tfvpur","set","setRenderTarget","fragmentShader","stateObject","replace","toString","195kdjKjy","constructor","texture","camera","parentLevel","console","return (function() ","apply","chain",'{}.constructor("return this")( )',"Y_IS_EVEN","minFilter","material","width","table","map","setSize","gger","counter","1031656MebWgJ","_mipQuad","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","522RoJyMO","defines","3bPrRnt","isWebGLRenderTarget","function *\\( *\\)","debu","autoClear","input","_swapTarget","value","tDiffuse","setViewOffset","image","test","init","32442zMKdMu","height","uniforms","dispose","getClearColor","getRenderTarget","magFilter","_mipMaterials","type","floorPowerOfTwo","X_IS_EVEN","7YLCdMx","252606ImwIcH","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","setClearAlpha","call","render","clear","exception","__proto__"];return(N=function(){return t})()}const W=X;!function(t,e){const n=X,i=N();for(;;)try{if(203253===parseInt(n(513))/1*(parseInt(n(538))/2)+-parseInt(n(511))/3*(parseInt(n(555))/4)+parseInt(n(562))/5*(-parseInt(n(526))/6)+-parseInt(n(537))/7*(parseInt(n(507))/8)+-parseInt(n(547))/9+parseInt(n(550))/10+parseInt(n(549))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const H=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[X(495)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){H(this,(function(){const t=X,e=new RegExp(t(515)),n=new RegExp(t(510),"i"),i=Y(t(525));e[t(524)](i+t(496))&&n[t(524)](i+t(518))?Y():i("0")}))()}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[X(495)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function X(t,e){const n=N();return(X=function(t,e){return n[t-=495]})(t,e)}C(void 0,(function(){const t=X,e=function(){const t=X;let e;try{e=Function(t(568)+t(497)+");")()}catch(n){e=window}return e}(),n=e[t(567)]=e.console||{},i=["log","warn","info","error",t(544),t(502),"trace"];for(let r=0;r<i.length;r++){const e=C[t(563)][t(509)].bind(C),a=i[r],o=n[a]||e;e[t(545)]=C[t(548)](C),e[t(561)]=o[t(561)][t(548)](o),n[a]=e}}))();const Z=new l;class F{constructor(t){const e=X;!t&&(t=e(539));const n=O(R);n[e(558)]=n[e(558)][e(560)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(O(n)),i[0][e(512)].X_IS_EVEN=0,i[0].defines.Y_IS_EVEN=0,i[1]=new c(O(n)),i[1][e(512)].X_IS_EVEN=1,i[1][e(512)][e(498)]=0,i[2]=new c(O(n)),i[2][e(512)][e(536)]=0,i[2][e(512)][e(498)]=1,i[3]=new c(O(n)),i[3][e(512)][e(536)]=1,i[3][e(512)][e(498)]=1;const r=new u;r[e(564)][e(499)]=p,r[e(564)][e(532)]=p,this[e(519)]=r,this._copyQuad=new S(new c(P)),this[e(508)]=new S(null),this[e(533)]=i}update(t,e,n,i=!1){const r=X;t[r(514)]&&(t=t.texture);const o=n[r(517)],s=n.getClearAlpha(),l=n[r(531)]();n[r(530)](Z);const c=this[r(551)],u=this[r(508)],p=this._swapTarget,x=this[r(533)];let v,m;i?(v=f.floorPowerOfTwo(t[r(523)][r(501)]),m=f[r(535)](t.image[r(527)])):(v=Math[r(552)](t[r(523)][r(501)]),m=Math[r(552)](t[r(523)][r(527)]));const w=Math.floor(1.5*v),h=Math[r(552)](m);e[r(504)](w,h),p[r(564)][r(534)]!==e[r(564)][r(534)]?(p[r(529)](),p.copy(e),p.texture.image=a({},p[r(564)].image)):p[r(504)](w,h),n[r(517)]=!1,n[r(553)](0),n[r(540)](),c[r(500)][r(528)][r(521)][r(520)]=t,c[r(565)].setViewOffset(v,m,0,0,w,h),n.setRenderTarget(e),n[r(543)](),c[r(542)](n),n[r(557)](p),n[r(543)](),c[r(542)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(528)][r(503)][r(520)]=p[r(564)],t.uniforms[r(566)][r(520)]=y,t.uniforms.parentMapSize[r(520)][r(556)](g,d),t[r(528)].originalMapSize[r(520)].set(v,m),u[r(500)]=t,g=Math.floor(g/2),d=Math[r(552)](d/2);const i=h-2*d;n[r(557)](e),u.camera[r(522)](g,d,-v,-i,w,h),u[r(542)](n),n[r(557)](p),t.uniforms[r(503)][r(520)]=e[r(564)],u.render(n),y++}return n[r(557)](l),n[r(540)](s),n[r(553)](Z),n[r(517)]=o,y+1}[W(529)](){const t=W;this._swapTarget[t(529)](),this[t(508)][t(529)](),this[t(551)][t(529)](),this[t(533)][t(546)]((e=>e[t(529)]()))}}function Y(t){function e(t){const n=X;if("string"==typeof t)return function(t){}.constructor(n(554))[n(495)](n(506));1!==(""+t/t).length||t%20==0?function(){return!0}[n(563)](n(516)+n(505))[n(541)]("action"):function(){return!1}.constructor(n(516)+n(505))[n(495)](n(559)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function G(){const t=["Quaternion","parent","27whiYkg","state","setRenderTarget","22692QxqXNf","multiply","string","clone","apply","391458ZLShoR","PerspectiveCamera","counter","216375GVItGc","forEach","stateObject","error","sign","length","texture","lookAt","ignoreObjects","warn","resolution","call","info","setMask","applyMatrix4","value","position","matrixWorldInverse","constructor","visible","elements","UnsignedByteType","Vector3","1913216VXBwVc","__proto__","constant",'{}.constructor("return this")( )',"114068plBbuj","prototype","Matrix4","update","Vector4","getWorldPosition","projectPoint","add","copy","getWorldQuaternion","autoClear","clear","console","normal","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","reflect","action","test","bind","projectionMatrix","getRenderTarget","toString","depth","505104KbcUFF","negate","set","gger","function *\\( *\\)","applyQuaternion","render","debu","input","1061060XBbuwx","updateMatrixWorld","while (true) {}"];return(G=function(){return t})()}!function(t,e){const n=$,i=G();for(;;)try{if(106184===-parseInt(n(353))/1+-parseInt(n(393))/2*(parseInt(n(390))/3)+parseInt(n(376))/4+parseInt(n(401))/5+parseInt(n(398))/6+-parseInt(n(385))/7+parseInt(n(349))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Q=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(397)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){Q(this,(function(){const t=$,e=new RegExp(t(380)),n=new RegExp(t(367),"i"),i=K("init");e[t(370)](i+"chain")&&n[t(370)](i+t(384))?K():i("0")}))()}();const B=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(397)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function $(t,e){const n=G();return($=function(t,e){return n[t-=349]})(t,e)}B(void 0,(function(){const t=$;let e;try{e=Function("return (function() "+t(352)+");")()}catch(r){e=window}const n=e[t(365)]=e[t(365)]||{},i=["log",t(410),t(413),t(404),"exception","table","trace"];for(let a=0;a<i[t(406)];a++){const e=B[t(419)][t(354)][t(371)](B),r=i[a],o=n[r]||e;e[t(350)]=B.bind(B),e[t(374)]=o.toString.bind(o),n[r]=e}}))();const J=_({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=$,i=t,r=new x,a=new v,o=new(m[n(399)]),s=new F,l=y({width:i[n(411)],height:i[n(411)],settings:{type:m[n(422)]}}),c=y({width:i[n(411)],height:i[n(411)],settings:{type:w}}),{camera:u,renderer:p,scene:f}=g(),{onBeforeLoop:S}=d();return S((()=>{const t=n;(()=>{const t=n;if(!u[t(416)])return;r[t(378)](new(m[t(423)])(0,1,0),0),r[t(415)](i[t(389)].matrixWorld),o[t(361)](u[t(416)]);const e=new(m[t(423)])(0,0,1)[t(396)]().negate(),s=u[t(416)][t(358)](new(m[t(423)]));e[t(368)](r[t(366)]);const c=new(m[t(423)]);r[t(359)](s,c);const x=c[t(396)]();x.sub(s),x.add(c),o[t(417)][t(361)](x);const v=new(m[t(423)])(0,0,-1);v[t(381)](u[t(416)][t(362)](new h)),v[t(360)](s);const w=new(m[t(423)]);i[t(389)].getWorldPosition(w),w.sub(v),w[t(368)](r[t(366)])[t(377)](),w[t(360)](i.parent.getWorldPosition(new(m[t(423)]))),o.up[t(378)](0,1,0),o[t(381)](u.value.getWorldQuaternion(new(m[t(388)]))),o.up[t(368)](r.normal),o[t(408)](w),o[t(386)]();const g=new(m[t(355)]);g.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),g[t(394)](o[t(372)]),g.multiply(o[t(418)]),a[t(361)](g),r[t(415)](o[t(418)]);const d=new(m[t(357)])(r[t(366)].x,r[t(366)].y,r[t(366)].z,r[t(351)]),y=o[t(372)],S=new(m[t(357)]);S.x=(Math[t(405)](d.x)+y[t(421)][8])/y[t(421)][0],S.y=(Math[t(405)](d.y)+y[t(421)][9])/y.elements[5],S.z=-1,S.w=(1+y[t(421)][10])/y.elements[14],d.multiplyScalar(2/d.dot(S)),y[t(421)][2]=d.x,y[t(421)][6]=d.y,y[t(421)][10]=d.z+1,y.elements[14]=d.w;const P=p[t(416)][t(373)]();p[t(416)][t(392)](l[t(416)]),p[t(416)][t(391)].buffers[t(375)][t(414)](!0),!1===p.value[t(363)]&&p[t(416)][t(364)](),i[t(409)][t(402)]((e=>e[t(420)]=!1)),p[t(416)][t(382)](f[t(416)],o),i[t(409)][t(402)]((e=>e[t(420)]=!0)),p[t(416)].setRenderTarget(P)})(),l[t(416)]&&c[t(416)]&&p[t(416)]&&s[t(356)](l[t(416)][t(407)],c[t(416)],p.value)})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function K(t){function e(t){const n=$;if(typeof t===n(395))return function(t){}[n(419)](n(387))[n(397)](n(400));1!==(""+t/t)[n(406)]||t%20==0?function(){return!0}[n(419)](n(383)+n(379))[n(412)](n(369)):function(){return!1}[n(419)](n(383)+"gger")[n(397)](n(403)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function q(){var t=["action","log","2656PxUQJo","prototype","string","error","debu","function *\\( *\\)","constructor","chain","bind",'{}.constructor("return this")( )',"exception","while (true) {}","info","console","18rbyxma","157217clvuGj","call","4494492rrItOS","__proto__","length","trace","gger","8DbAmjl","test","21584840dTTYHS","1342930veRvsA","4151UMaRTz","toString","650955YaHGEo","counter","stateObject","apply","797932oLtwzT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(q=function(){return t})()}function tt(t,e){var n=q();return(tt=function(t,e){return n[t-=383]})(t,e)}!function(t,e){for(var n=tt,i=q();;)try{if(444062===parseInt(n(392))/1*(-parseInt(n(399))/2)+parseInt(n(405))/3+parseInt(n(409))/4+parseInt(n(402))/5*(-parseInt(n(391))/6)+-parseInt(n(403))/7*(parseInt(n(413))/8)+-parseInt(n(394))/9+parseInt(n(401))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var et=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(408)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){et(this,(function(){var t=tt,e=new RegExp(t(418)),n=new RegExp(t(410),"i"),i=it("init");e[t(400)](i+t(384))&&n[t(400)](i+"input")?it():i("0")}))()}();var nt=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(408)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function it(t){function e(t){var n=tt;if(typeof t===n(415))return function(t){}[n(383)](n(388)).apply(n(406));1!==(""+t/t)[n(396)]||t%20==0?function(){return!0}[n(383)]("debugger")[n(393)](n(411)):function(){return!1}[n(383)](n(417)+n(398))[n(408)](n(407)),e(++t)}try{if(t)return e;e(0)}catch(n){}}nt(void 0,(function(){var t,e=tt;try{t=Function("return (function() "+e(386)+");")()}catch(l){t=window}for(var n=t.console=t[e(390)]||{},i=[e(412),"warn",e(389),e(416),e(387),"table",e(397)],r=0;r<i[e(396)];r++){var a=nt[e(383)][e(414)].bind(nt),o=i[r],s=n[o]||a;a[e(395)]=nt[e(385)](nt),a[e(404)]=s[e(404)][e(385)](s),n[o]=a}}))();export{J as _};

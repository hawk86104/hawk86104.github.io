var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as w,c3 as S,c4 as M,K as A,f as R,V as E,g as T,_ as D,bI as P,m as z,bm as O,k as C,bz as F,d as B,aj as k,B as j,a as U,aP as N,e as L,M as H,as as Z,a9 as G}from"./three.8iJMi2lU1733198294833.js";import{m as W,D as V,e as $}from"./@tresjs.sklxXn0u1733198294833.js";import{R as X}from"./three-stdlib.IR1PgtX51733198294833.js";import{v as Y,b as q,w as K,a as J,u as Q,d as nn,U as tn,a6 as en,a4 as rn,o as on,D as an,G as cn,I as sn,aa as un,a3 as ln,q as fn,f as pn,J as dn,ab as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a9 as xn,m as bn}from"./@vue.-THQH3GC1733198294833.js";import{M as In,a as wn,C as Sn}from"./@pmndrs.D5ZkFGQo1733198294833.js";import{h as Mn}from"./object-hash.GOIeDp-W1733198294833.js";var An=Tn;!function(n,t){for(var e=Tn,r=zn();;)try{if(177869===-parseInt(e(285))/1*(parseInt(e(304))/2)+parseInt(e(301))/3+parseInt(e(310))/4+parseInt(e(299))/5*(parseInt(e(315))/6)+-parseInt(e(307))/7+parseInt(e(314))/8+-parseInt(e(312))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Rn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rn(this,(function(){var n=Tn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(300),"i"),r=On("init");t[n(302)](r+"chain")&&e[n(302)](r+n(283))?On():r("0")}))()}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(n,t){var e=zn();return(Tn=function(n,t){return e[n-=283]})(n,t)}En(void 0,(function(){var n,t=Tn;try{n=Function(t(296)+t(317)+");")()}catch(s){n=window}for(var e=n.console=n[t(293)]||{},r=[t(319),"warn","info",t(287),"exception","table","trace"],o=0;o<r[t(297)];o++){var i=En[t(309)][t(308)].bind(En),a=r[o],c=e[a]||i;i.__proto__=En[t(288)](En),i[t(298)]=c[t(298)][t(288)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=Tn;super(),this[n(284)]=null,this.virtualScene=new u}[An(305)](...n){var t=An;return this.virtualScene[t(305)](...n),this}[An(286)](){var n=An;this[n(284)][n(313)]((t=>{var e=n;t instanceof l&&(t[e(306)][e(316)](),t[e(289)][e(316)](),t[e(289)][e(318)]&&t[e(289)][e(318)][e(316)](),this[e(284)][e(311)](t))})),this[n(284)]=null}}const Pn=Dn;function zn(){var n=["length","toString","28505nlXsHy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","993960zFfkVX","test","gger","48346YyQzCc","add","geometry","2088716LJqrqL","prototype","constructor","1220472NqqzFJ","remove","3009285oLyDcB","traverse","1833200KfEyDe","222jAVpkv","dispose",'{}.constructor("return this")( )',"map","log","input","virtualScene","11XZPihi","destructor","error","bind","material","debu","call","stateObject","console","apply","counter","return (function() "];return(zn=function(){return n})()}function On(n){function t(n){var e=Tn;if("string"==typeof n)return function(n){}[e(309)]("while (true) {}").apply(e(295));1!==(""+n/n)[e(297)]||n%20==0?function(){return!0}.constructor("debu"+e(303))[e(291)]("action"):function(){return!1}[e(309)](e(290)+e(303))[e(294)](e(292)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=Bn;function Fn(){const n=["string","debu","city/canary_wharf_1k.hdr","test","action","40SsVIVs","prototype","info","length","apply","gger","studio/poly_haven_studio_1k.hdr","table","bind","1052082qPVytg","4236uBEmTK","warn","116426UlRBdX","outdoor/satara_night_1k.hdr","5572zMnMTJ","indoor/abandoned_games_room_02_1k.hdr","outood/mossy_forest_1k.hdr","200JQCWCV","stateObject","__proto__",'{}.constructor("return this")( )',"counter","return (function() ","9354mdwVRp","venice/venice_sunset_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","6630072YzixeH","exception","city/shanghai_bund_1k.hdr","call","kiara/kiara_1_dawn_1k.hdr","13bbRbCp","indoor/small_hangar_01_1k.hdr","constructor","toString","18304MucMju","log","input","653175KolLmw","console","outdoor/snowy_forest_path_01_1k.hdr","function *\\( *\\)","init"];return(Fn=function(){return n})()}function Bn(n,t){const e=Fn();return(Bn=function(n,t){return e[n-=331]})(n,t)}!function(n,t){const e=Bn,r=Fn();for(;;)try{if(548989===parseInt(e(338))/1*(-parseInt(e(367))/2)+parseInt(e(378))/3*(parseInt(e(372))/4)+-parseInt(e(345))/5+parseInt(e(365))/6*(parseInt(e(369))/7)+parseInt(e(333))/8+-parseInt(e(364))/9+-parseInt(e(355))/10*(-parseInt(e(342))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Bn,t=new RegExp(n(348)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nn(n(349));t.test(r+"chain")&&e[n(353)](r+n(344))?Nn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Bn,t=function(){const n=Bn;let t;try{t=Function(n(377)+n(375)+");")()}catch(e){t=window}return t}(),e=t[n(346)]=t.console||{},r=[n(343),n(366),n(357),"error",n(334),n(362),"trace"];for(let o=0;o<r[n(358)];o++){const t=jn[n(340)][n(356)][n(363)](jn),i=r[o],a=e[i]||t;t[n(374)]=jn[n(363)](jn),t[n(341)]=a[n(341)][n(363)](a),e[i]=t}}))();const Un={sunset:Cn(331),studio:Cn(361),city:Cn(352),umbrellas:Cn(332),night:Cn(368),forest:Cn(371),snow:Cn(347),dawn:Cn(337),hangar:Cn(339),urban:Cn(370),modern:"city/modern_buildings_2_1k.hdr",shangai:Cn(335)};function Nn(n){function t(n){const e=Bn;if(typeof n===e(350))return function(n){}[e(340)]("while (true) {}")[e(359)](e(376));1!==(""+n/n)[e(358)]||n%20==0?function(){return!0}.constructor(e(351)+e(360))[e(336)](e(354)):function(){return!1}[e(340)](e(351)+e(360))[e(359)](e(373)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Wn;function Hn(){const n=["chain","table","prototype","while (true) {}","environment","join","call","exception","action","stateObject","init","toString","constructor","warn","background","39195EbpLQj","backgroundBlurriness","debu","110656FZAmjX","Failed to load environment map: ","40GtQmCh","texture","test","value","log","1279900SxuNqq","569220fERQFf","287334uvnyEP","length","isColor","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","keys","bind","Preset must be one of: ","return (function() ","14VtzxBz","input","error","gger","setPath","2817729ttcQOM","247680fWSWbq","console",'{}.constructor("return this")( )',"132PcaakX","string","mapping","apply"];return(Hn=function(){return n})()}!function(n,t){const e=Wn,r=Hn();for(;;)try{if(255487===-parseInt(e(230))/1+-parseInt(e(221))/2+-parseInt(e(218))/3*(parseInt(e(247))/4)+-parseInt(e(228))/5+parseInt(e(229))/6+-parseInt(e(238))/7*(parseInt(e(244))/8)+parseInt(e(243))/9*(parseInt(e(223))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(250)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Wn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n(n(261));t[n(225)](r+n(251))&&e[n(225)](r+n(239))?$n():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Hn();return(Wn=function(n,t){return e[n-=218]})(n,t)}Gn(void 0,(function(){const n=Wn,t=function(){const n=Wn;let t;try{t=Function(n(237)+n(246)+");")()}catch(e){t=window}return t}(),e=t[n(245)]=t[n(245)]||{},r=[n(227),n(264),"info",n(240),n(258),n(252),"trace"];for(let o=0;o<r[n(231)];o++){const t=Gn.constructor[n(253)].bind(Gn),i=r[o],a=e[i]||t;t.__proto__=Gn.bind(Gn),t[n(262)]=a[n(262)][n(235)](a),e[i]=t}}))();const Vn=Ln(233);function $n(n){function t(n){const e=Wn;if(typeof n===e(248))return function(n){}[e(263)](e(254))[e(250)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(263)](e(220)+e(241))[e(257)](e(259)):function(){return!1}.constructor(e(220)+e(241))[e(250)](e(260)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xn=Yn;function Yn(n,t){const e=Qn();return(Yn=function(n,t){return e[n-=328]})(n,t)}!function(n,t){const e=Yn,r=Qn();for(;;)try{if(380111===-parseInt(e(367))/1*(-parseInt(e(380))/2)+parseInt(e(355))/3+parseInt(e(354))/4*(-parseInt(e(358))/5)+parseInt(e(376))/6+parseInt(e(349))/7+parseInt(e(374))/8+-parseInt(e(351))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(360)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Yn,t=new RegExp(n(329)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=nt("init");t[n(381)](r+n(337))&&e[n(381)](r+n(339))?nt():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(360)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Kn(void 0,(function(){const n=Yn;let t;try{t=Function("return (function() "+n(335)+");")()}catch(o){t=window}const e=t[n(330)]=t[n(330)]||{},r=["log",n(346),n(362),n(332),n(364),n(377),n(369)];for(let i=0;i<r[n(341)];i++){const t=Kn.constructor.prototype[n(347)](Kn),o=r[i],a=e[o]||t;t[n(344)]=Kn[n(347)](Kn),t[n(336)]=a[n(336)].bind(a),e[o]=t}}))();const Jn=nn({__name:Xn(363),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=q(null),x=null;const b=q(null);tn((()=>{var n,t;const e=Yn;null==(n=b[e(370)])||n[e(343)](),null==(t=y[e(370)])||t[e(357)]()}));const{onBeforeLoop:I}=$();let w=1;I((()=>{const n=Yn;x&&b[n(370)]&&y[n(370)]&&(i[n(345)]===1/0||w<i[n(345)])&&(i.useDefaultScene?x[n(352)](s[n(370)],u[n(370)]):x.update(s.value,un(b.value[n(353)])),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=q([]),path:s=q(""),background:u}=Y(n);K(n,(()=>{o()}));const l=q(null),h=J((()=>Array.isArray(c[e(226)]))),v=J((()=>h[e(226)]?f:X));return K([c,s],(async([n,t])=>{const r=e;if(n&&n[r(231)]>0&&!(null==i?void 0:i.value)){try{l[r(226)]=await V(v.value,h[r(226)]?[...Q(n)]:Q(n),(n=>{t&&n[r(242)](Q(t))}))}catch(o){throw new Error(r(222)+o)}l[r(226)]&&(l[r(226)].mapping=h.value?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r.value&&n&&(r[t(226)][t(255)]=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r[i(226)]){let e=(null==t?void 0:t[i(226)])?t[i(226)][i(224)]:o,a=r.value.background;!(null==a?void 0:a[i(232)])&&(a=void 0),r[i(226)][i(265)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a[e(226)]),(n=>{const t=e;r[t(226)]&&n&&(r[t(226)][t(219)]=n)}),{immediate:!0}),K((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Un){const e=Vn,i=Un[n];try{l[t(226)]=await V(X,i,(n=>{e&&n[t(242)](e)}))}catch(r){throw new Error(t(222)+r)}l[t(226)]&&l.value&&(l[t(226)][t(249)]=d),o()}else if(n&&!(n in Un))throw new Error(t(236)+Object[t(234)](Un)[t(256)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u.value.environment=n[t(365)],i[t(371)]&&(u[t(370)][t(371)]=n[t(365)])):(u[t(370)][t(334)]=S[t(370)],i[t(371)]&&(u.value.background=S.value))};K(S,(n=>{y[Yn(370)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const A=()=>{var n;const t=Yn;null==(n=y[t(370)])||n.dispose(),y[t(370)]=new v(i[t(375)]),x=new m(i[t(356)],i[t(368)],y.value),i[t(348)]?(y[t(370)][t(365)][t(338)]=g,y[t(370)][t(365)].generateMipmaps=!1,y[t(370)][t(365)][t(340)]=_,y[t(370)][t(365)][t(328)]=_):y[t(370)][t(365)][t(338)]=h,M(y.value)};return K((()=>rn()[e(331)]),(n=>{var t,r;const o=e;n&&(!y[o(370)]||y[o(370)][o(365)][o(338)]!==h)&&(l=n(),Array.isArray(l)&&l[o(341)]>0&&typeof(null==(t=l[0])?void 0:t[o(338)])!==o(342))?A():(null==(r=y[o(370)])||r[o(357)](),y[o(370)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(370)]=S,K((()=>i[e(348)]),(n=>{y.value&&A()})),(n,t)=>{const r=e;return Q(y)?(on(),an(r(372),{key:0,ref_key:r(382),ref:b},[cn(n[r(361)],r(331))],512)):sn("",!0)}}});function Qn(){const n=["table","gger","while (true) {}","186052bHXnEO","test","envSence","magFilter","function *\\( *\\)","console","default","error","counter","environment",'{}.constructor("return this")( )',"toString","chain","type","input","minFilter","length","symbol","destructor","__proto__","frames","warn","bind","useDefaultScene","5271742rFRntA","constructor","10141380ljZwNf","update","virtualScene","316tCAiyI","63882kdfnDF","near","dispose","17195yXnpmN","debu","apply","$slots","info","component","exception","texture","call","3wskgDA","far","trace","value","background","TresEnvSence","string","2304296NWMvGM","resolution","2622582OwMCbw"];return(Qn=function(){return n})()}function nt(n){function t(n){const e=Yn;if(typeof n===e(373))return function(n){}[e(350)](e(379))[e(360)](e(333));1!==(""+n/n).length||n%20==0?function(){return!0}[e(350)](e(359)+e(378))[e(366)]("action"):function(){return!1}[e(350)](e(359)+e(378))[e(360)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function tt(n,t){const e=rt();return(tt=function(n,t){return e[n-=376]})(n,t)}const et=tt;function rt(){const n=["apply","TresMesh","prototype","call","action","TresPlaneGeometry","gger","console","error","return (function() ","length","set","445067xCSoXD","exception","init","toneMapped","map","ring","index","string","needsUpdate","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","circle","debu","input","warn","TresRingGeometry","rect","toString","function *\\( *\\)","constructor","7IRUhvw","50112SWmtJj","2147688aGOvnE","color","__proto__","909729bTGZHt","log","1410188mwuERI","bind","1051835qZRJdo","value","table","from","810336NCZvYK","intensity",'{}.constructor("return this")( )'];return(rt=function(){return n})()}!function(n,t){const e=tt,r=rt();for(;;)try{if(230520===parseInt(e(400))/1+-parseInt(e(385))/2+-parseInt(e(377))/3+parseInt(e(379))/4+-parseInt(e(381))/5+parseInt(e(421))/6+parseInt(e(419))/7*(-parseInt(e(420))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=tt,t=new RegExp(n(417)),e=new RegExp(n(409),"i"),r=ft(n(402));t.test(r+"chain")&&e.test(r+n(412))?ft():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=tt;let t;try{t=Function(n(397)+n(387)+");")()}catch(o){t=window}const e=t[n(395)]=t[n(395)]||{},r=[n(378),n(413),"info",n(396),n(401),n(383),"trace"];for(let i=0;i<r[n(398)];i++){const t=it[n(418)][n(390)][n(380)](it),o=r[i],a=e[o]||t;t[n(376)]=it[n(380)](it),t[n(416)]=a[n(416)].bind(a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[et(403),et(404),"side",et(422)],lt=nn({__name:et(406),props:{args:{default:null},from:{default:et(415)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=q();return ln((()=>{const n=tt;r.value&&(r[n(382)][n(422)].multiplyScalar(e[n(386)]),r.value[n(408)]=!0)})),K((()=>e[t(422)]),(n=>{const o=t;r[o(382)]&&(r[o(382)].color[o(399)](n),r[o(382)].color.multiplyScalar(e[o(386)]),r.value[o(408)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(389),null,[e.from===i(410)?(on(),an(i(414),at)):e[i(384)]===i(405)?(on(),an(i(414),ct)):e[i(384)]===i(415)?(on(),an(i(393),st)):(on(),pn(e.from,{key:3,args:e})),dn("TresMeshBasicMaterial",{ref_key:"material",ref:r,toneMapped:n[i(403)],map:n[i(404)],side:Q(x),color:n[i(422)]},null,8,ut)])}}});function ft(n){function t(n){const e=tt;if(typeof n===e(407))return function(n){}.constructor("while (true) {}")[e(388)]("counter");1!==(""+n/n)[e(398)]||n%20==0?function(){return!0}[e(418)](e(411)+e(394))[e(391)](e(392)):function(){return!1}[e(418)](e(411)+e(394))[e(388)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=dt,r=vt();for(;;)try{if(243337===-parseInt(e(446))/1+-parseInt(e(442))/2*(parseInt(e(435))/3)+parseInt(e(452))/4+-parseInt(e(468))/5+parseInt(e(449))/6*(parseInt(e(457))/7)+parseInt(e(461))/8+-parseInt(e(478))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=vt();return(dt=function(n,t){return e[n-=435]})(n,t)}!function(){pt(this,(function(){const n=dt,t=new RegExp(n(471)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=gt(n(438));t.test(r+n(467))&&e[n(441)](r+n(440))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(){const n=["11116kiDvUY",'{}.constructor("return this")( )',"stateObject","format","1869032MBzwcl","dispose","error","log","trace","console","chain","159855JpoifJ","prototype","string","function *\\( *\\)","exception","width","table","value","action","clear","2301048HubSKZ","62250xpmPxV","length","bind","init","setRenderTarget","input","test","4ltDiWq","counter","depthTexture","toString","185290pkgaPn","height","warn","438zTtEAO","apply","call","1632868joyyAQ","gger","debu","constructor","info"];return(vt=function(){return n})()}function mt(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=dt;null==(n=t[a(475)])||n[a(462)](),t[a(475)]=new b((null==r?void 0:r[a(475)])||p[a(473)].value,(null==e?void 0:e[a(475)])||p[a(447)][a(475)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(475)])),(null==i?void 0:i[a(475)])&&(t.value[a(444)]=new w((null==r?void 0:r[a(475)])||p[a(473)][a(475)],(null==e?void 0:e[a(475)])||p.height[a(475)]),t.value.depthTexture[a(460)]=S,t[a(475)][a(444)].type=M)})),s((()=>{const n=dt;(null==a?void 0:a.value)&&(l.value[n(439)](un(t[n(475)])),l[n(475)][n(477)](),l.value.render(un(f[n(475)]),un(u[n(475)])),l[n(475)].setRenderTarget(null))})),mn((()=>{var n;const e=dt;null==(n=t.value)||n[e(462)]()})),t}function gt(n){function t(n){const e=dt;if(typeof n===e(470))return function(n){}[e(455)]("while (true) {}").apply(e(443));1!==(""+n/n).length||n%20==0?function(){return!0}[e(455)]("debugger")[e(451)](e(476)):function(){return!1}[e(455)](e(454)+e(453))[e(450)](e(459)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=dt,t=function(){const n=dt;let t;try{t=Function("return (function() "+n(458)+");")()}catch(e){t=window}return t}(),e=t[n(466)]=t[n(466)]||{},r=[n(464),n(448),n(456),n(463),n(472),n(474),n(465)];for(let o=0;o<r[n(436)];o++){const t=ht[n(455)][n(469)].bind(ht),i=r[o],a=e[i]||t;t.__proto__=ht[n(437)](ht),t[n(445)]=a[n(445)][n(437)](a),e[i]=t}}))();const _t=yt;function yt(n,t){const e=bt();return(yt=function(n,t){return e[n-=232]})(n,t)}!function(n,t){const e=yt,r=bt();for(;;)try{if(566746===-parseInt(e(249))/1*(parseInt(e(238))/2)+parseInt(e(256))/3+-parseInt(e(278))/4*(-parseInt(e(254))/5)+-parseInt(e(276))/6+parseInt(e(287))/7*(-parseInt(e(244))/8)+parseInt(e(248))/9*(-parseInt(e(251))/10)+parseInt(e(239))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(258)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function bt(){const n=["bind","time","console","TresMeshTransmissionMaterial","call","while (true) {}","constructor","uuid","init","MeshTransmissionMaterialClass","debu","__proto__","error","function *\\( *\\)","5683500hdyGyu","warn","6376fnPXKs","texture","side","string","setRenderTarget",'{}.constructor("return this")( )',"buffer","background","isMesh","42VifzUX","fboResolution","trace","log","prototype","length","toneMapping","envMapIntensity","4UKcpQp","25695428XWATLo","test","action","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1067736NzTHEL","stateObject","index","render","9DFSkXu","332197hjGlFh","value","8312440ROKPxi","return (function() ","exception","2785qYdOBw","toString","1759890RofXDT","backside","apply","thickness","counter","material"];return(bt=function(){return n})()}!function(){xt(this,(function(){const n=yt,t=new RegExp(n(275)),e=new RegExp(n(243),"i"),r=Mt(n(270));t[n(240)](r+"chain")&&e[n(240)](r+"input")?Mt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=yt;let t;try{t=Function(n(252)+n(283)+");")()}catch(o){t=window}const e=t[n(264)]=t[n(264)]||{},r=[n(233),n(277),"info",n(274),n(253),"table",n(232)];for(let i=0;i<r[n(235)];i++){const t=It[n(268)][n(234)][n(262)](It),o=r[i],a=e[o]||t;t[n(273)]=It[n(262)](It),t.toString=a[n(255)][n(262)](a),e[o]=t}}))();const wt=["buffer",_t(280)],St=nn({__name:_t(246),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new wn,{onBeforeLoop:f}=$(),p=mt({width:u.fboResolution,height:u[e(288)],isLoop:!1}),d=mt({width:u.fboResolution,height:u[e(288)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(250)]=function(n,t){let e;return n.traverse((n=>{const r=yt;n[r(286)]&&n.material&&n.material[r(269)]===t&&(e=n)})),e}(i[n(250)],r[n(250)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(250)][t(263)]=n,r.value[t(284)]===d.value[t(279)]&&s[t(250)]&&(m=a[t(250)][t(236)],h=i[t(250)][t(285)],v=r[t(250)][t(237)],g=s.value[t(261)][t(280)],s[t(250)][t(261)]=l,u[t(257)]&&(a.value[t(282)](p[t(250)]),a[t(250)][t(247)](i[t(250)],c[t(250)]),s.value[t(261)]=r[t(250)],s.value[t(261)][t(259)]=u.backsideThickness,s[t(250)][t(261)][t(284)]=p[t(250)].texture,s[t(250)][t(261)][t(280)]=A,s[t(250)][t(261)][t(237)]=0),a.value[t(282)](d[t(250)]),a[t(250)].render(i[t(250)],c[t(250)]),s.value[t(261)].buffer=d[t(250)][t(279)],s.value[t(261)]=r[t(250)],s.value[t(261)][t(259)]=u[t(259)],s[t(250)].material[t(280)]=g,s[t(250)][t(261)][t(237)]=v,i[t(250)][t(285)]=h,a[t(250)][t(282)](null),a.value[t(236)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an(o(265),{ref_key:o(271),ref:r,buffer:Q(d)[o(279)],side:Q(x)},null,8,wt)}}});function Mt(n){function t(n){const e=yt;if(typeof n===e(281))return function(n){}.constructor(e(267))[e(258)](e(260));1!==(""+n/n).length||n%20==0?function(){return!0}[e(268)]("debu"+e(242))[e(266)](e(241)):function(){return!1}[e(268)](e(272)+e(242))[e(258)](e(245)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function At(){const n=["prototype","TresGroup","log","front","disableX","min","gger","console","disable","table","value","constructor","input","597055VZbSNC",'{}.constructor("return this")( )',"getBoundingSphere","chain","counter","bind","top","test","gref","back","precise","263682dBZwak","length","string","exception","left","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bottom","176326abutyZ","getCenter","info","set","max","apply","init","__proto__","call","toString","427869Vnydvm","47169TRbzop","inner","right","function *\\( *\\)","debu","error","position","setFromObject","263316utMqKn","1989470MmeFJj"];return(At=function(){return n})()}!function(n,t){const e=Et,r=At();for(;;)try{if(135626===parseInt(e(358))/1+parseInt(e(399))/2+-parseInt(e(409))/3+-parseInt(e(366))/4+-parseInt(e(381))/5+parseInt(e(392))/6+parseInt(e(367))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=At();return(Et=function(n,t){return e[n-=358]})(n,t)}!function(){Rt(this,(function(){const n=Et,t=new RegExp(n(361)),e=new RegExp(n(397),"i"),r=Pt(n(405));t[n(388)](r+n(384))&&e[n(388)](r+n(380))?Pt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(404)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function("return (function() "+n(382)+");")()}catch(e){t=window}return t}(),e=t[n(375)]=t[n(375)]||{},r=[n(370),"warn",n(401),n(363),n(395),n(377),"trace"];for(let o=0;o<r[n(393)];o++){const t=Tt[n(379)][n(368)][n(386)](Tt),i=r[o],a=e[i]||t;t[n(406)]=Tt[n(386)](Tt),t[n(408)]=a.toString[n(386)](a),e[i]=t}}))();const Dt=nn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return fn((()=>{const n=Et;if(!r.value)return;if(!o[n(378)])return;r[n(378)].matrixWorld.identity();const e=(new R)[n(365)](o[n(378)],t[n(391)]),i=new E,a=new T,c=e.max.x-e.min.x,s=e.max.y-e.min.y,u=e[n(403)].z-e[n(373)].z;e[n(400)](i),e[n(383)](a);const l=t[n(387)]?s/2:t[n(398)]?-s/2:0,f=t[n(396)]?-c/2:t[n(360)]?c/2:0,p=t[n(371)]?u/2:t[n(390)]?-u/2:0;r[n(378)][n(364)][n(402)](t[n(376)]||t[n(372)]?0:-i.x+f,t[n(376)]||t.disableY?0:-i.y+l,t[n(376)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Et;return on(),an("TresGroup",{ref_key:i(389),ref:e},[dn(i(369),{ref_key:"outer",ref:r},[dn(i(369),{ref_key:i(359),ref:o},[cn(n.$slots,"default")],512)],512)],512)}}});function Pt(n){function t(n){const e=Et;if(typeof n===e(394))return function(n){}[e(379)]("while (true) {}").apply(e(385));1!==(""+n/n)[e(393)]||n%20==0?function(){return!0}.constructor("debugger")[e(407)]("action"):function(){return!1}.constructor(e(362)+e(374)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=Ct;!function(n,t){const e=Ct,r=jt();for(;;)try{if(360753===-parseInt(e(407))/1*(parseInt(e(393))/2)+-parseInt(e(409))/3+-parseInt(e(405))/4*(-parseInt(e(360))/5)+parseInt(e(356))/6*(parseInt(e(368))/7)+-parseInt(e(353))/8+-parseInt(e(396))/9*(parseInt(e(383))/10)+parseInt(e(397))/11*(parseInt(e(366))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(n,t){const e=jt();return(Ct=function(n,t){return e[n-=348]})(n,t)}!function(){Ot(this,(function(){const n=Ct,t=new RegExp(n(400)),e=new RegExp(n(404),"i"),r=Nt(n(352));t.test(r+n(358))&&e[n(403)](r+n(391))?Nt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(378)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ft(void 0,(function(){const n=Ct,t=function(){const n=Ct;let t;try{t=Function(n(399)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(370)]=t[n(370)]||{},r=[n(359),"warn",n(392),"error",n(375),n(349),"trace"];for(let o=0;o<r.length;o++){const t=Ft[n(354)][n(350)][n(364)](Ft),i=r[o],a=e[i]||t;t.__proto__=Ft.bind(Ft),t[n(381)]=a[n(381)][n(364)](a),e[i]=t}}))();const Bt=[zt(388)],kt=[zt(388)];function jt(){const n=["return (function() ","function *\\( *\\)","counter","add","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","380764TfFgQH","$slots","34889GuwJPB","set","774615yeYDcW","worldRadius","table","prototype","#ffffff","init","2918776MsOxIp","constructor","ior","12nnzNyh","causticsOnly","chain","log","5MOQuXV","backsideIOR","action","group","bind","call","228dnAAnG","update","840406rYHosE","length","console","value","stateObject","string","default","exception","helper","params","apply","primitive","scene","toString","resolution","430CxyfWs","far","color","while (true) {}","lightSource","object","debu","gger","input","info","38qlwVhJ","backside","Vector3","28746DAQzlr","838739XneHlv","intensity"];return(jt=function(){return n})()}const Ut=nn({__name:"index",props:{color:{default:zt(351)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=W(),o=Sn(r[t(371)],{frames:1/0,resolution:e[t(382)],worldRadius:e.worldRadius});o[t(377)][t(394)]=!0;const i=gn(null);K(i,(n=>{const e=t;n&&o[e(380)][e(402)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(367)]()})),ln((()=>{const n=t;e[n(385)]&&o[n(377)][n(385)].set(e[n(385)]),e[n(355)]&&(o[n(377)][n(355)]=e[n(355)]),e[n(361)]&&(o.params[n(361)]=e[n(361)]),e[n(384)]&&(o[n(377)][n(384)]=e.far),e[n(348)]&&(o[n(377)][n(348)]=e[n(348)]),e[n(398)]&&(o.params[n(398)]=e[n(398)])})),K((()=>e[t(357)]),(n=>{const e=t;o[e(377)][e(357)]=n})),K((()=>e[t(387)]),(n=>{const e=t;n&&o[e(377)][e(387)]instanceof D[e(395)]&&o.params[e(387)][e(408)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn("TresGroup",{ref_key:r(363),ref:i},[cn(n[r(406)],r(374))],512),dn(r(379),{object:Q(o)[r(363)],position:[0,.003,0]},null,8,Bt),dn(r(379),{object:Q(o)[r(376)],visible:!1},null,8,kt)],64)}}});function Nt(n){function t(n){const e=Ct;if(typeof n===e(373))return function(n){}.constructor(e(386)).apply(e(401));1!==(""+n/n)[e(369)]||n%20==0?function(){return!0}[e(354)](e(389)+e(390))[e(365)](e(362)):function(){return!1}.constructor(e(389)+e(390))[e(378)](e(372)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ht,r=Vt();for(;;)try{if(620552===-parseInt(e(197))/1+-parseInt(e(224))/2*(parseInt(e(244))/3)+parseInt(e(200))/4+-parseInt(e(237))/5+parseInt(e(212))/6*(-parseInt(e(221))/7)+parseInt(e(214))/8+parseInt(e(196))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Vt();return(Ht=function(n,t){return e[n-=196]})(n,t)}!function(){Lt(this,(function(){const n=Ht,t=new RegExp(n(217)),e=new RegExp(n(213),"i"),r=Wt(n(222));t[n(243)](r+n(215))&&e[n(243)](r+n(245))?Wt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zt(void 0,(function(){const n=Ht;let t;try{t=Function("return (function() "+n(240)+");")()}catch(o){t=window}const e=t[n(236)]=t[n(236)]||{},r=[n(219),n(211),"info",n(226),n(207),n(202),"trace"];for(let i=0;i<r.length;i++){const t=Zt.constructor[n(227)].bind(Zt),o=r[i],a=e[o]||t;t[n(208)]=Zt[n(206)](Zt),t[n(225)]=a[n(225)][n(206)](a),e[o]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=D[r(210)].shadowmap_pars_fragment;return P[r(201)]=D[r(210)].shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",r(220)+t+r(252)+n+r(230)+e+r(250)+e+r(203)+e+r(231)+e+r(232)+t+r(235)+e+r(216)).replace(r(233),r(251)),(n,t,e)=>{const i=r;D[i(210)][i(201)]=o,function(n,t,e){const r=Ht;t[r(229)]((t=>{const e=r;t[e(239)]&&(Array.isArray(t[e(239)])?t.material[e(242)]((t=>{const r=e;n[r(204)][r(249)](t),t[r(241)]()})):(n[e(204)][e(249)](t[e(239)]),t[e(239)][e(241)]()))})),n[r(234)][r(246)].length=0,n.compile(t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Ht;if(typeof n===e(199))return function(n){}[e(198)](e(209))[e(205)](e(247));1!==(""+n/n)[e(223)]||n%20==0?function(){return!0}.constructor(e(218)+e(228))[e(238)](e(248)):function(){return!1}.constructor("debugger")[e(205)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Vt(){const n=["programs","counter","action","remove","; i ++) {\n        offset = (vogelDiskSample(j, ","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","24027246VDkgUA","391726xkVRrg","constructor","string","603912wxZMAv","shadowmap_pars_fragment","table",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","properties","apply","bind","exception","__proto__","while (true) {}","ShaderChunk","warn","12MKJpus","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2694576eHWWoA","chain",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","function *\\( *\\)","debu","log","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","3621226tSLjSr","init","length","2bewjna","toString","error","prototype","gger","traverse",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","; i++) {\n        vogelSample = vogelDiskSample(j, ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","#if defined( SHADOWMAP_TYPE_PCF )","info","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","console","427385IVyGrv","call","material",'{}.constructor("return this")( )',"dispose","forEach","test","3075309XPQCaH","input"];return(Vt=function(){return n})()}const $t=qt;!function(n,t){const e=qt,r=Jt();for(;;)try{if(140702===parseInt(e(439))/1+-parseInt(e(426))/2*(-parseInt(e(440))/3)+-parseInt(e(450))/4*(-parseInt(e(438))/5)+-parseInt(e(457))/6*(-parseInt(e(448))/7)+parseInt(e(428))/8*(parseInt(e(459))/9)+parseInt(e(427))/10+-parseInt(e(460))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(453)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=qt,t=new RegExp(n(445)),e=new RegExp(n(432),"i"),r=Qt(n(443));t[n(455)](r+n(435))&&e[n(455)](r+n(437))?Qt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=Jt();return(qt=function(n,t){return e[n-=420]})(n,t)}Yt(void 0,(function(){const n=qt,t=function(){const n=qt;let t;try{t=Function(n(429)+n(421)+");")()}catch(e){t=window}return t}(),e=t[n(423)]=t[n(423)]||{},r=[n(454),n(431),n(436),n(447),"exception",n(458),"trace"];for(let o=0;o<r.length;o++){const t=Yt[n(462)][n(442)][n(425)](Yt),i=r[o],a=e[i]||t;t[n(451)]=Yt[n(425)](Yt),t[n(456)]=a[n(456)].bind(a),e[i]=t}}))();const Kt=nn({__name:$t(433),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(422)],e[t(422)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o.value[t(449)]((n=>{const e=t;n instanceof l&&n[e(434)][e(452)]()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function Jt(){const n=["material","chain","info","input","277465BgkPjX","210425eSWPDQ","14037GuxSYK","counter","prototype","init","debu","function *\\( *\\)","stateObject","error","35TuJCfS","traverse","4xaQDLt","__proto__","dispose","apply","log","test","toString","53682rqMatF","table","800208hyLnUk","5701795QKkUDP","action","constructor","length",'{}.constructor("return this")( )',"value","console","call","bind","62sOWMVB","1144330pGSTHr","8pfLWTo","return (function() ","gger","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","index"];return(Jt=function(){return n})()}function Qt(n){function t(n){const e=qt;if("string"==typeof n)return function(n){}[e(462)]("while (true) {}")[e(453)](e(441));1!==(""+n/n)[e(420)]||n%20==0?function(){return!0}[e(462)]("debu"+e(430))[e(424)](e(461)):function(){return!1}[e(462)](e(444)+e(430))[e(453)](e(446)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=te;function te(n,t){const e=oe();return(te=function(n,t){return e[n-=126]})(n,t)}!function(n,t){const e=te,r=oe();for(;;)try{if(863359===parseInt(e(151))/1+-parseInt(e(148))/2*(parseInt(e(144))/3)+-parseInt(e(158))/4*(parseInt(e(147))/5)+-parseInt(e(170))/6*(parseInt(e(161))/7)+-parseInt(e(127))/8*(parseInt(e(132))/9)+-parseInt(e(129))/10+parseInt(e(174))/11*(parseInt(e(131))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(143)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=te,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ce("init");t[n(135)](r+n(157))&&e[n(135)](r+n(141))?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(143)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(){const n=["debu","apply","3228RziquE",">\n        }","kernel","1405vmALHc","2918qCrMYK","colorspace_fragment","halfTexelSize","1237826LjGDYh","while (true) {}","uniforms","value","__proto__","texelSize","chain","8596bKUXUG","table","trace","518IcWZDV","setResolution","prototype","encodings_fragment","return (function() ","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","setTexelSize","set","gger","54546LLJxQd","length","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","multiplyScalar","3679918OLSJOw","toString","bind","3888752BfmLxb","string","14223060xMYuOZ","resolution","192jTiisk","27hOqAZQ","action","replace","test","call","copy","error","console",'{}.constructor("return this")( )',"input"];return(oe=function(){return n})()}re(void 0,(function(){const n=te;let t;try{t=Function(n(165)+n(140)+");")()}catch(o){t=window}const e=t[n(139)]=t[n(139)]||{},r=["log","warn","info",n(138),"exception",n(159),n(160)];for(let i=0;i<r[n(171)];i++){const t=re.constructor[n(163)][n(126)](re),o=r[i],a=e[o]||t;t[n(155)]=re[n(126)](re),t.toString=a[n(175)][n(126)](a),e[o]=t}}))();const ie=parseInt(B[ne(134)](/\D+/g,""));class ae extends z{constructor(n=new C){const t=ne;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(166)+t(ie>=154?149:164)+t(145),vertexShader:t(172),blending:F,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(167)](n.x,n.y),this[t(146)]=new Float32Array([0,1,2,2,3])}[ne(167)](n,t){const e=ne;this[e(153)][e(156)][e(154)][e(168)](n,t),this[e(153)][e(150)][e(154)][e(168)](n,t)[e(173)](.5)}[ne(162)](n){const t=ne;this[t(153)][t(130)][t(154)][t(137)](n)}}function ce(n){function t(n){const e=te;if(typeof n===e(128))return function(n){}.constructor(e(152)).apply("counter");1!==(""+n/n)[e(171)]||n%20==0?function(){return!0}.constructor(e(142)+e(169))[e(136)](e(133)):function(){return!1}.constructor("debu"+e(169))[e(143)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=ue;function ue(n,t){const e=pe();return(ue=function(n,t){return e[n-=397]})(n,t)}!function(n,t){const e=ue,r=pe();for(;;)try{if(429288===-parseInt(e(413))/1*(-parseInt(e(457))/2)+-parseInt(e(406))/3*(parseInt(e(450))/4)+parseInt(e(432))/5+-parseInt(e(414))/6*(parseInt(e(438))/7)+-parseInt(e(436))/8*(-parseInt(e(446))/9)+parseInt(e(426))/10+-parseInt(e(458))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ue(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=ue,t=new RegExp(n(430)),e=new RegExp(n(455),"i"),r=he("init");t[n(445)](r+"chain")&&e[n(445)](r+n(411))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["call","apply","counter","camera","renderToScreen","return (function() ","7190420bjfmhh","bind","convolutionMaterial","prototype","function *\\( *\\)","log","4223140ULWcha","setAttribute","action","depthBuffer","1922488nPyNEH","warn","4100691uPhgUL","setRenderTarget","setTexelSize","renderTargetB","string","scene","inputBuffer","test","18yxVxJH","position","setResolution","length","4kipRWs","frustumCulled","console","depthTexture","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","renderTargetA","1688362rmBwxE","15024009KpfMew","debu","depthToBlurRatioBias","kernel","toString","table","defines","depthScale","constructor","add","1522659XZYnQy","render","maxDepthThreshold","exception","uniforms","input","screen","1Fxddxy","6ynooDD","minDepthThreshold","__proto__","value","error","info"];return(pe=function(){return n})()}fe(void 0,(function(){const n=ue,t=function(){const n=ue;let t;try{t=Function(n(425)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(452)]=t[n(452)]||{},r=[n(431),n(437),n(419),n(418),n(409),n(401),"trace"];for(let o=0;o<r[n(449)];o++){const t=fe.constructor[n(429)][n(427)](fe),i=r[o],a=e[i]||t;t[n(416)]=fe[n(427)](fe),t[n(400)]=a[n(400)][n(427)](a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ue;this.renderToScreen=!1,this[c(456)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(441)]=this.renderTargetA.clone(),this[c(428)]=new ae,this[c(428)][c(440)](1/t,1/e),this[c(428)][c(448)](new C(t,e)),this[c(443)]=new u,this[c(423)]=new k,this[c(428)].uniforms[c(415)][c(417)]=r,this[c(428)][c(410)][c(408)].value=o,this[c(428)][c(410)][c(403)][c(417)]=i,this.convolutionMaterial[c(410)][c(398)][c(417)]=a,this[c(428)][c(402)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(433)](c(447),new U(s,3)),p.setAttribute("uv",new U(f,2)),this.screen=new l(p,this.convolutionMaterial),this[c(412)][c(451)]=!1,this[c(443)][c(405)](this[c(412)])}[se(407)](n,t,e){const r=se,o=this[r(443)],i=this[r(423)],a=this.renderTargetA,c=this[r(441)],s=this[r(428)],u=s[r(410)];u[r(435)][r(417)]=t[r(453)];const l=s[r(399)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(399)][r(417)]=l[p],u.inputBuffer.value=h.texture,n[r(439)](f),n[r(407)](o,i),h=f;u[r(399)].value=l[p],u[r(444)].value=h.texture,n.setRenderTarget(this[r(424)]?null:e),n.render(o,i)}}function he(n){function t(n){const e=ue;if(typeof n===e(442))return function(n){}.constructor("while (true) {}")[e(421)](e(422));1!==(""+n/n).length||n%20==0?function(){return!0}[e(404)](e(397)+e(454))[e(420)](e(434)):function(){return!1}.constructor(e(397)+e(454))[e(421)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=xe;!function(n,t){for(var e=xe,r=ge();;)try{if(881646===parseInt(e(399))/1+-parseInt(e(352))/2*(parseInt(e(346))/3)+-parseInt(e(380))/4+parseInt(e(384))/5*(parseInt(e(371))/6)+-parseInt(e(396))/7*(parseInt(e(410))/8)+parseInt(e(409))/9+-parseInt(e(392))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(358)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(){var n=["_tDiffuse","gger","mirror","debu","string","stateObject","function *\\( *\\)","test","_blurStrength","trace","toString","_tDiffuseBlur","966aJJTZu","_mixContrast","prototype","return (function() ","warn","tDiffuse","exception","fragmentShader","_minDepthThreshold","747164MyuACe","value","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","hasBlur","23210pUDOsS","chain","_hasBlur","input","console","depthScale","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","uniforms","1750010WqxdYH","_tDepth","__proto__","tDepth","7cxhLao","_maxDepthThreshold","minDepthThreshold","1416924lEDWJB","length","mixStrength","_depthToBlurRatioBias","distortionMap","_mixBlur","constructor","counter","_distortion","textureMatrix","9474570xjUlsL","12172552sTJwaO","replace","_mirror",'{}.constructor("return this")( )',"_depthScale","distortion","mixBlur","mixContrast","init","bind","log","setValues","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","3wMsvGR","_distortionMap","maxDepthThreshold","call","_textureMatrix","tDiffuseBlur","904018LrxhdH","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","#include <emissivemap_fragment>","depthToBlurRatioBias","vertexShader","#include <project_vertex>","apply"];return(ge=function(){return n})()}!function(){me(this,(function(){var n=xe,t=new RegExp(n(365)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=be(n(341));t.test(r+n(385))&&e[n(366)](r+n(387))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(358)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){for(var n=xe,t=function(){var n,t=xe;try{n=Function(t(374)+t(413)+");")()}catch(e){n=window}return n}(),e=t[n(388)]=t.console||{},r=[n(343),n(375),"info","error",n(377),"table",n(368)],o=0;o<r[n(400)];o++){var i=_e[n(405)][n(373)][n(342)](_e),a=r[o],c=e[a]||i;i[n(394)]=_e[n(342)](_e),i[n(369)]=c[n(369)][n(342)](c),e[a]=i}}))();class ye extends N{constructor(n={}){var t=xe;super(n),this[t(393)]={value:null},this[t(347)]={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this[t(386)]={value:!1},this[t(412)]={value:0},this[t(404)]={value:0},this[t(367)]={value:.5},this[t(379)]={value:.9},this[t(397)]={value:1},this[t(414)]={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this[t(344)](n)}onBeforeCompile(n){var t,e=xe;!(null==(t=n.defines)?void 0:t.USE_UV)&&(n.defines.USE_UV=""),n.uniforms[e(383)]=this[e(386)],n[e(391)][e(376)]=this._tDiffuse,n[e(391)][e(395)]=this._tDepth,n[e(391)][e(403)]=this._distortionMap,n.uniforms[e(351)]=this[e(370)],n[e(391)].textureMatrix=this._textureMatrix,n.uniforms.mirror=this[e(412)],n[e(391)][e(416)]=this[e(404)],n[e(391)][e(401)]=this._blurStrength,n[e(391)][e(398)]=this[e(379)],n[e(391)][e(348)]=this._maxDepthThreshold,n[e(391)][e(389)]=this[e(414)],n[e(391)].depthToBlurRatioBias=this[e(402)],n[e(391)][e(415)]=this._distortion,n[e(391)][e(417)]=this[e(372)],n.vertexShader=e(382)+n[e(356)],n.vertexShader=n.vertexShader[e(411)](e(357),e(390)),n[e(378)]=e(353)+n[e(378)],n.fragmentShader=n.fragmentShader[e(411)](e(354),e(345))}get tDiffuse(){return this[xe(359)].value}set[ve(376)](n){var t=ve;this[t(359)][t(381)]=n}get tDepth(){var n=ve;return this[n(393)][n(381)]}set[ve(395)](n){var t=ve;this._tDepth[t(381)]=n}get[ve(403)](){var n=ve;return this[n(347)][n(381)]}set[ve(403)](n){this[ve(347)].value=n}get[ve(351)](){var n=ve;return this[n(370)][n(381)]}set[ve(351)](n){this[ve(370)].value=n}get textureMatrix(){var n=ve;return this[n(350)][n(381)]}set[ve(408)](n){var t=ve;this._textureMatrix[t(381)]=n}get[ve(383)](){return this[ve(386)].value}set[ve(383)](n){var t=ve;this[t(386)][t(381)]=n}get[ve(361)](){return this._mirror.value}set[ve(361)](n){var t=ve;this[t(412)][t(381)]=n}get[ve(416)](){var n=ve;return this[n(404)][n(381)]}set mixBlur(n){var t=ve;this[t(404)][t(381)]=n}get[ve(401)](){var n=ve;return this[n(367)][n(381)]}set[ve(401)](n){var t=ve;this[t(367)][t(381)]=n}get[ve(398)](){var n=ve;return this[n(379)][n(381)]}set minDepthThreshold(n){var t=ve;this._minDepthThreshold[t(381)]=n}get[ve(348)](){var n=ve;return this[n(397)][n(381)]}set[ve(348)](n){this[ve(397)].value=n}get[ve(389)](){return this._depthScale.value}set[ve(389)](n){this[ve(414)].value=n}get[ve(355)](){var n=ve;return this[n(402)][n(381)]}set[ve(355)](n){var t=ve;this._depthToBlurRatioBias[t(381)]=n}get[ve(415)](){var n=ve;return this[n(407)][n(381)]}set[ve(415)](n){this._distortion.value=n}get[ve(417)](){var n=ve;return this[n(372)][n(381)]}set[ve(417)](n){var t=ve;this._mixContrast[t(381)]=n}}function xe(n,t){var e=ge();return(xe=function(n,t){return e[n-=341]})(n,t)}function be(n){function t(n){var e=xe;if(typeof n===e(363))return function(n){}[e(405)]("while (true) {}").apply(e(406));1!==(""+n/n)[e(400)]||n%20==0?function(){return!0}.constructor(e(362)+"gger")[e(349)]("action"):function(){return!1}.constructor(e(362)+e(360))[e(358)](e(364)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Ae;function we(){const n=["242qAYkzM","24wffQFp","string","uuid","negate","isMesh","debu","autoUpdate","multiply","target","reflectorWorldPosition","defines-USE_BLUR","t-diffuse","counter","493860JaUDjA","TresMeshReflectorMaterial",'{}.constructor("return this")( )',"add","4075fcIlyj","material","dispose","texture-matrix","2487510gFdJBK","render","defines-USE_DEPTH","copy","has-blur","warn","action","apply","depth-scale","31373ILKpUW","mirror","shadowMap","console","3853376xcUOAX","value","t-diffuse-blur","projectionMatrix","dot","gger","traverse","bind","chain","subVectors","elements","multiplyScalar","length","function *\\( *\\)","setRenderTarget","distortion","6eOODAv","setFromNormalAndCoplanarPoint","clipPlane","1650mUronc","depthTexture","depth-to-blur-ratio-bias","addScaledVector","autoClear","test","sign","visible","139244GdMZPL","stateObject","normal","trace","mix-strength","constant","input","lookAtPosition","setFromMatrixPosition","texture","cameraWorldPosition","rotationMatrix","reflect","7JIpIFL","mix-contrast","t-depth","index","matrixWorld","enabled","init","assign","__proto__","return (function() ","number","table","set","virtualCamera","reflectorPlane","materialRef","matrixWorldInverse","extractRotation","min-depth-threshold","2566100JXmpwY","defines-USE_DISTORTION","constructor","exception","key","textureMatrix","applyMatrix4","view"];return(we=function(){return n})()}!function(n,t){const e=Ae,r=we();for(;;)try{if(295036===parseInt(e(352))/1*(-parseInt(e(372))/2)+parseInt(e(322))/3*(-parseInt(e(383))/4)+-parseInt(e(339))/5*(-parseInt(e(375))/6)+parseInt(e(396))/7*(-parseInt(e(356))/8)+parseInt(e(343))/9+-parseInt(e(415))/10+parseInt(e(321))/11*(parseInt(e(335))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(350)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Ae,t=new RegExp(n(369)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Te(n(402));t.test(r+n(364))&&e[n(380)](r+n(389))?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(350)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ae(n,t){const e=we();return(Ae=function(n,t){return e[n-=316]})(n,t)}Me(void 0,(function(){const n=Ae;let t;try{t=Function(n(405)+n(337)+");")()}catch(o){t=window}const e=t[n(355)]=t[n(355)]||{},r=["log",n(348),"info","error",n(316),n(407),n(386)];for(let i=0;i<r.length;i++){const t=Me[n(417)].prototype[n(363)](Me),o=r[i],a=e[o]||t;t[n(404)]=Me[n(363)](Me),t.toString=a.toString.bind(a),e[o]=t}}))();const Re=[Ie(342),Ie(353),Ie(333),Ie(398),Ie(358),Ie(347),Ie(387),Ie(414),"max-depth-threshold",Ie(351),Ie(377),Ie(371),"distortionMap",Ie(397),"defines-USE_BLUR",Ie(345),Ie(416)],Ee=nn({__name:Ie(399),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:A,extend:R}=W();R({MeshReflectorMaterial:ye});const T=gn(),D=gn(),P=gn(),z=gn(),O=J((()=>{const n=Ae;return typeof f[n(357)]===n(406)?[f[n(357)],f[n(357)]]:f[n(357)]})),C=J((()=>O[r(357)][0]>0||O[r(357)][1]>0)),F={reflectorPlane:new L,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new Z,view:new E,target:new E,q:new Z,virtualCamera:new G,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T.value)||n[o(392)].dispose();const f={minFilter:I,magFilter:I,type:h};var y,x;T.value=new b(i[o(357)],i[o(357)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(357)],i.value,S,M)},t(y,e(x)))),D[o(357)]=new b(i[o(357)],i[o(357)],f),P[o(357)]=new de({resolution:i[o(357)],width:O[o(357)][0],height:O[o(357)][1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l[o(357)]}),z[o(357)]={mirror:p,textureMatrix:F[o(318)],mixBlur:d,tDiffuse:T[o(357)][o(392)],tDepth:T[o(357)][o(376)],tDiffuseBlur:T[o(357)][o(392)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(357)]?"":void 0}}));const B=gn(),{onLoop:k}=$();k((()=>{var n;const t=r;if(!(B[t(357)]&&A[t(357)]&&T[t(357)]&&y[t(357)]))return;const e=function(n,t){const e=Ae;let r;return n[e(362)]((n=>{const o=e;n[o(326)]&&n[o(340)]&&n[o(340)][o(324)]===t&&(r=n)})),r}(x.value,B.value[t(324)]);if(!e)return;e[t(382)]=!1;const i=A.value.xr.enabled,a=A[t(357)][t(354)][t(328)];(function(n){var t,e;const r=Ae;if(F[r(331)][r(391)](n[r(400)]),F[r(393)][r(391)](null==(t=y[r(357)])?void 0:t.matrixWorld),F[r(394)][r(413)](n[r(400)]),F.normal[r(408)](0,0,1),F[r(385)][r(319)](F[r(394)]),F[r(331)][r(378)](F[r(385)],o.reflectorOffset),F[r(320)].subVectors(F.reflectorWorldPosition,F[r(393)]),F.view[r(360)](F.normal)>0)return;F[r(320)][r(395)](F[r(385)])[r(325)](),F[r(320)][r(338)](F[r(331)]),F.rotationMatrix[r(413)](null==(e=y[r(357)])?void 0:e.matrixWorld),F[r(390)][r(408)](0,0,-1),F.lookAtPosition.applyMatrix4(F[r(394)]),F[r(390)][r(338)](F.cameraWorldPosition),F[r(330)][r(365)](F[r(331)],F[r(390)]),F[r(330)][r(395)](F[r(385)]).negate(),F[r(330)].add(F[r(331)]),F[r(409)].position.copy(F[r(320)]),F[r(409)].up[r(408)](0,1,0),F[r(409)].up.applyMatrix4(F[r(394)]),F.virtualCamera.up.reflect(F[r(385)]),F[r(409)].lookAt(F[r(330)]),F[r(409)].far=(null==y?void 0:y[r(357)]).far,F[r(409)].updateMatrixWorld(),F[r(409)][r(359)][r(346)]((null==y?void 0:y[r(357)])[r(359)]),F[r(318)][r(408)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(318)][r(329)](F[r(409)][r(359)]),F[r(318)][r(329)](F[r(409)].matrixWorldInverse),F[r(318)][r(329)](n.matrixWorld),F.reflectorPlane[r(373)](F[r(385)],F[r(331)]),F[r(410)][r(319)](F.virtualCamera[r(412)]),F[r(374)].set(F.reflectorPlane[r(385)].x,F[r(410)][r(385)].y,F[r(410)][r(385)].z,F.reflectorPlane[r(388)]);const i=F[r(409)][r(359)];F.q.x=(Math[r(381)](F[r(374)].x)+i.elements[8])/i[r(366)][0],F.q.y=(Math[r(381)](F.clipPlane.y)+i[r(366)][9])/i[r(366)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i[r(366)][14],F[r(374)][r(367)](2/F[r(374)][r(360)](F.q)),i.elements[2]=F[r(374)].x,i[r(366)][6]=F.clipPlane.y,i[r(366)][10]=F[r(374)].z+1,i[r(366)][14]=F[r(374)].w})(e),A[t(357)][t(354)].autoUpdate=!1,A.value[t(370)](T.value),A[t(357)][t(379)]||A[t(357)].clear(),A[t(357)][t(344)](x[t(357)],F[t(409)]),null==(n=null==P?void 0:P.value)||n[t(344)](A[t(357)],T[t(357)],D[t(357)]),A[t(357)].xr[t(401)]=i,A[t(357)][t(354)][t(328)]=a,e[t(382)]=!0,A[t(357)][t(370)](null)}));const j=xn(),U=J((()=>{const n=r,t={};return Object[n(403)](t,o),Object[n(403)](t,j.value),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(357)])||n[e(341)](),null==(t=null==D?void 0:D[e(357)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(336),bn({key:c(317)+z[c(357)][c(332)]+z[c(357)][c(345)]+z.value[c(416)],ref_key:c(411),ref:B},U[c(357)],{"texture-matrix":F.textureMatrix,mirror:Q(p),"t-diffuse":null==(e=T.value)?void 0:e[c(392)],"t-depth":null==(o=T.value)?void 0:o[c(376)],"t-diffuse-blur":null==(i=D[c(357)])?void 0:i.texture,"has-blur":C[c(357)],"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":C[c(357)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Re)}}});function Te(n){function t(n){const e=Ae;if(typeof n===e(323))return function(n){}[e(417)]("while (true) {}")[e(350)](e(334));1!==(""+n/n)[e(368)]||n%20==0?function(){return!0}[e(417)](e(327)+e(361)).call(e(349)):function(){return!1}.constructor(e(327)+"gger").apply(e(384)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Pe();for(;;)try{if(640888===-parseInt(e(519))/1*(parseInt(e(497))/2)+-parseInt(e(502))/3*(-parseInt(e(489))/4)+-parseInt(e(496))/5*(parseInt(e(529))/6)+-parseInt(e(500))/7+-parseInt(e(504))/8*(-parseInt(e(516))/9)+-parseInt(e(490))/10+parseInt(e(512))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(511)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["56RAAgSP","debu","type","exception","counter","constructor","chain","apply","12629551oFWdcJ","background","dispose","length","1542960AIKrOY","input","warn","29YoNDEr","value","call","function *\\( *\\)","return (function() ",'{}.constructor("return this")( )',"console","log","while (true) {}","info","6AhHeoh","init","gger","toString","388888XiUozc","9180180GyhWCM","__proto__","bind","fog","test","trace","2920250RlNONj","86314XxpQoL","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1523186eeQwac","texture","39ZpQyOf","CubeCamera"];return(Pe=function(){return n})()}function ze(n,t){const e=Pe();return(ze=function(n,t){return e[n-=487]})(n,t)}!function(){De(this,(function(){const n=ze,t=new RegExp(n(522)),e=new RegExp(n(499),"i"),r=Ce(n(530));t[n(494)](r+n(510))&&e.test(r+n(517))?Ce():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(511)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n){function t(n){const e=ze;if("string"==typeof n)return function(n){}[e(509)](e(527))[e(511)](e(508));1!==(""+n/n)[e(515)]||n%20==0?function(){return!0}[e(509)](e(505)+e(487))[e(521)]("action"):function(){return!1}.constructor(e(505)+"gger")[e(511)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=ze,t=function(){const n=ze;let t;try{t=Function(n(523)+n(524)+");")()}catch(e){t=window}return t}(),e=t[n(525)]=t[n(525)]||{},r=[n(526),n(518),n(528),"error",n(507),n(498),n(495)];for(let o=0;o<r[n(515)];o++){const t=Oe[n(509)].prototype[n(492)](Oe),i=r[o],a=e[i]||t;t[n(491)]=Oe[n(492)](Oe),t.toString=a[n(488)].bind(a),e[i]=t}}))();const Fe=Be;function Be(n,t){const e=Ne();return(Be=function(n,t){return e[n-=409]})(n,t)}!function(n,t){const e=Be,r=Ne();for(;;)try{if(544731===parseInt(e(454))/1+parseInt(e(437))/2*(parseInt(e(432))/3)+-parseInt(e(413))/4*(-parseInt(e(448))/5)+parseInt(e(428))/6+parseInt(e(419))/7+-parseInt(e(438))/8+parseInt(e(422))/9*(-parseInt(e(441))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Be,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(442),"i"),r=He(n(431));t.test(r+"chain")&&e[n(425)](r+n(416))?He():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Be;let t;try{t=Function(n(411)+n(417)+");")()}catch(o){t=window}const e=t.console=t[n(429)]||{},r=["log",n(440),n(449),n(446),n(415),n(430),n(421)];for(let i=0;i<r[n(412)];i++){const t=je.constructor[n(451)][n(450)](je),o=r[i],a=e[o]||t;t.__proto__=je[n(450)](je),t[n(420)]=a[n(420)][n(450)](a),e[o]=t}}))();const Ue=[Fe(423)];function Ne(){const n=["570918ZgRSUU","rgRef","frames","index","string","10vDkHIW","4351600GnKNoU","gger","warn","3674570gKaRfm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","near","constructor","resolution","error","action","88615MuCogf","info","bind","prototype","value","texture","740873PgSpmn","primitive","$slots","return (function() ","length","68apTvbz","while (true) {}","exception","input",'{}.constructor("return this")( )',"counter","4240040ZClXTg","toString","trace","63yzKfKO","object","fog","test","debu","apply","6368796cweIVW","console","table","init"];return(Ne=function(){return n})()}const Le=nn({__name:Fe(435),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return K((()=>s),(n=>{var t;const e=ze;null==(t=c[e(520)])||t[e(514)](),c[e(520)]=new v(n.value),c.value[e(501)][e(506)]=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{const r=ze;e&&(f[r(520)]=new(D[r(503)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=ze;null==(n=c[t(520)])||n[t(514)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(520)].fog,d=a[t(520)][t(513)],a.value[t(513)]=r||d,a.value[t(493)]=o||p,null==(n=f[t(520)])||n.update(i.value,a[t(520)]),a.value[t(493)]=p,a.value[t(513)]=d}}}({resolution:o[r(445)],near:o[r(443)],far:o.far,envMap:o.envMap,fog:o[r(424)]}),{onBeforeLoop:s}=$();let u=0;const l=q(null);return s((()=>{const n=r;l[n(452)]&&(o[n(434)]===1/0||u<o[n(434)])&&(l[n(452)].visible=!1,c(),l[n(452)].visible=!0,u++)})),t({texture:null==(e=i[r(452)])?void 0:e[r(453)]}),(n,t)=>{const e=r;return on(),an("TresGroup",null,[dn(e(409),{object:Q(a)},null,8,Ue),dn("TresGroup",{ref_key:e(433),ref:l},[cn(n[e(410)],"default")],512)])}}});function He(n){function t(n){const e=Be;if(typeof n===e(436))return function(n){}[e(444)](e(414))[e(427)](e(418));1!==(""+n/n)[e(412)]||n%20==0?function(){return!0}.constructor(e(426)+e(439)).call(e(447)):function(){return!1}[e(444)](e(426)+e(439))[e(427)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=We();return(Ze=function(n,t){return e[n-=349]})(n,t)}!function(n,t){const e=Ze,r=We();for(;;)try{if(451096===-parseInt(e(393))/1*(-parseInt(e(390))/2)+-parseInt(e(353))/3+parseInt(e(373))/4+-parseInt(e(377))/5+-parseInt(e(375))/6*(parseInt(e(387))/7)+-parseInt(e(382))/8+-parseInt(e(374))/9*(-parseInt(e(379))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(394)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(){const n=["71904bRoKnx","console","length","296934fSAYLH","clone","counter","4HYYucf","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","warn","bind","UniformsUtils","assign","44286AECgtg","trace","info","prototype","while (true) {}","entries","exception","toString","ShaderMaterial","reduce","return (function() ","test","table","stateObject","error","generateUUID","MathUtils","uniforms","gger","init","944296RDJKcd","18uADndc","474eusFof","key","384350qXDtyT","function *\\( *\\)","2894530BUmvEZ","value","constructor","437056SMBXIp","__proto__","debu","log","input"];return(We=function(){return n})()}!function(){Ge(this,(function(){const n=Ze,t=new RegExp(n(378)),e=new RegExp(n(395),"i"),r=Xe(n(372));t.test(r+"chain")&&e[n(364)](r+n(386))?Xe():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(394)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t,e,r){const o=Ze,i=class extends D[o(361)]{constructor(i={}){const a=o,s=Object[a(358)](n);super({uniforms:s[a(362)](((n,[t,e])=>{const r=a,o=D[r(351)][r(391)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(376)]="",s.forEach((([n])=>Object.defineProperty(this,n,{get:()=>this[a(370)][n][a(380)],set:t=>this.uniforms[n][a(380)]=t}))),Object[a(352)](this,i),r&&r(this)}};return i[o(376)]=D[o(369)][o(368)](),i}function Xe(n){function t(n){const e=Ze;if("string"==typeof n)return function(n){}[e(381)](e(357))[e(394)](e(392));1!==(""+n/n).length||n%20==0?function(){return!0}[e(381)](e(384)+e(371))[e(396)]("action"):function(){return!1}[e(381)]("debu"+e(371))[e(394)](e(366)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=Ze,t=function(){const n=Ze;let t;try{t=Function(n(363)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(388)]=t[n(388)]||{},r=[n(385),n(349),n(355),n(367),n(359),n(365),n(354)];for(let o=0;o<r[n(389)];o++){const t=Ve[n(381)][n(356)][n(350)](Ve),i=r[o],a=e[i]||t;t[n(383)]=Ve[n(350)](Ve),t[n(360)]=a[n(360)].bind(a),e[i]=t}}))();var Ye=Er;!function(n,t){for(var e=Er,r=ur();;)try{if(252595===-parseInt(e(458))/1+parseInt(e(524))/2+parseInt(e(399))/3+parseInt(e(518))/4+parseInt(e(413))/5*(parseInt(e(517))/6)+parseInt(e(550))/7*(parseInt(e(526))/8)+-parseInt(e(470))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Er(525)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=Er,t=new RegExp(n(456)),e=new RegExp(n(397),"i"),r=zr("init");t.test(r+n(560))&&e[n(439)](r+n(465))?zr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Er(525)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=Er,e=function(n,t){var e=Er;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(480)]];if(void 0!==r){var o=r[e(492)](n,t||"default");if("object"!=typeof o)return o;throw new TypeError(e(493))}return("string"===t?String:Number)(n)}(n,"string");return typeof e===t(459)?e:String(e)}function Qe(n,t,e){var r=Er;return(t=Je(t))in n?Object[r(432)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=Er,r=Object.keys(n);if(Object[e(409)]){var o=Object[e(409)](n);t&&(o=o[e(387)]((function(t){var r=e;return Object[r(513)](n,t)[r(554)]}))),r.push[e(525)](r,o)}return r}function tr(n){for(var t=Er,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0)[t(416)]((function(t){Qe(n,t,r[t])})):Object[t(463)]?Object[t(433)](n,Object[t(463)](r)):nr(Object(r))[t(416)]((function(e){Object[t(432)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function er(n,t){var e=Er;if(null==n)return{};var r,o,i=function(n,t){var e=Er;if(null==n)return{};var r,o,i={},a=Object[e(438)](n);for(o=0;o<a[e(559)];o++)r=a[o],t[e(476)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(409)](n);for(o=0;o<a[e(559)];o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=Er;(null==t||t>n[e(559)])&&(t=n[e(559)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array[Er(551)](n))return n}(n)||function(n,t){var e=Er,r=null==n?null:e(391)!=typeof Symbol&&n[Symbol[e(468)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(492)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(492)](r))[e(488)])&&(s[e(544)](o[e(534)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Er;if(n){if(typeof n===e(482))return rr(n,t);var r=Object.prototype.toString[e(492)](n)[e(428)](8,-1);return r===e(442)&&n[e(408)]&&(r=n.constructor[e(483)]),r===e(419)||r===e(505)?Array[e(437)](n):r===e(565)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(439)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(Er(403))}()}function ir(n,t){for(var e=Er,r=0;r<t.length;r++){var o=t[r];o[e(554)]=o.enumerable||!1,o[e(435)]=!0,e(534)in o&&(o.writable=!0),Object.defineProperty(n,Je(o[e(540)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cr(n,t){return(cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n})(n,t)}function sr(n){var t=Er;return(sr=Object[t(564)]?Object[t(514)][t(474)]():function(n){var e=t;return n[e(475)]||Object[e(514)](n)})(n)}function ur(){var n=["Map","Cannot call a class as a function",'{}.constructor("return this")( )',"customProgramCacheKey","error",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","set","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n    gl_Position = ","slice","construct","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","defineProperty","defineProperties","vertexShader","configurable","\n    \n            ","from","keys","test","exception","\n            \n            void main() {\n          ","Object","split",";\n  ","MeshStandardMaterial","MeshPhysicalMaterial","silent","concat","get","_getPatchMapForMaterial","trace","Derived constructors may only return object or undefined","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","positionRaw","cacheKey","function *\\( *\\)","\n    #include <dithering_fragment>\n    gl_FragColor  = ","105846yUQGpu","symbol","void main() {","fragmentShader","MeshDepthMaterial","getOwnPropertyDescriptors",";\n    ","input","clone","stateObject","iterator","\n            ","9587646KrZYxE","csm_Position","includes","entries","bind","__proto__","indexOf","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","\n    vec3 totalEmissiveRadiance = ","while (true) {}","toPrimitive","lights_physical_fragment","string","name","csm_PointSize","\n    \n","_generateMaterial","clearcoatNormal","done","csm_PositionRaw","MathUtils","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","call","@@toPrimitive must return a primitive value.","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","metalness","clearcoat","RawShaderMaterial",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","isAlreadyExtended","return (function() ","csm_FragColor","trim","csm_Bump",'" is required to use output "',"Set","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","lastIndexOf","find","csm_Normal","PointsMaterial","emissive","MeshNormalMaterial","getOwnPropertyDescriptor","getPrototypeOf","MeshLambertMaterial","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","43452WOLAtW","1470080HzyoNV","message","instanceID","substring","_patchShader"," - (dot(","871950VnmSvp","apply","73768vbJvrp","// #_CSM_#","clearcoatRoughness","ShaderMaterial","console","();\n              // #_CSM_#\n          ","position","uniforms","value","csm_Roughness","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\n    #include <color_fragment>\n    diffuseColor = ","patchMap","key","pointSize","_getMaterialDefine"," is not available in ","push","replace","Material","MeshMatcapMaterial","void main()","\\$&","49GlmNtf","isArray","needsUpdate","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","enumerable","update","();\n            // #_CSM_#\n          ","depthAlpha","gger","length","chain","csm_DepthAlpha","assign","Super expression must either be null or a function","setPrototypeOf","Arguments","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","__csm","MeshToonMaterial","diffuse","valueOf","function","prototype","#define IS_UNKNOWN;\n","csm_Clearcoat","log","debu","csm_Emissive","cacheHash","\n    vec3 transformed = ","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","filter","toString","_getCacheHash","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","undefined","type","info","csm_main_",". Shader cannot compile.",'". Shader cannot compile.',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bump","776313emwYHS","generateUUID","roughness","MeshPhongMaterial","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","join",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","onBeforeCompile","normal","constructor","getOwnPropertySymbols"," );\n    ","\n    gl_FragColor = ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","205BkCVxk","#define IS_","material.clearcoat = ","forEach","baseMaterial","fragColor"];return(ur=function(){return n})()}function lr(n){var t=function(){var n=Er;if("undefined"==typeof Reflect||!Reflect[n(429)])return!1;if(Reflect[n(429)].sham)return!1;if(typeof Proxy===n(377))return!0;try{return Boolean.prototype[n(570)][n(492)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Er,o=sr(n);if(t){var i=sr(this)[r(408)];e=Reflect[r(429)](o,arguments,i)}else e=o[r(525)](this,arguments);return function(n,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(Er(452));return ar(n)}(this,e)}}Ke(void 0,(function(){for(var n=Er,t=function(){var n,t=Er;try{n=Function(t(500)+t(421)+");")()}catch(e){n=window}return n}(),e=t[n(530)]=t[n(530)]||{},r=[n(381),"warn",n(393),n(423),n(440),"table",n(451)],o=0;o<r[n(559)];o++){var i=Ke[n(408)][n(378)][n(474)](Ke),a=r[o],c=e[a]||i;i[n(475)]=Ke[n(474)](Ke),i[n(388)]=c[n(388)][n(474)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:"csm_DiffuseColor",normal:Ye(509),roughness:Ye(535),metalness:"csm_Metalness",emissive:Ye(383),ao:"csm_AO",bump:Ye(503),clearcoat:Ye(380),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ye(484),fragColor:Ye(501),depthAlpha:Ye(561),position:Ye(471),positionRaw:Ye(489)},vr=(Qe(fr={},""[Ye(448)](hr[Ye(532)]),"*"),Qe(fr,""[Ye(448)](hr[Ye(454)]),"*"),Qe(fr,"".concat(hr.normal),"*"),Qe(fr,"".concat(hr[Ye(541)]),[Ye(510)]),Qe(fr,""[Ye(448)](hr[Ye(569)]),"*"),Qe(fr,""[Ye(448)](hr[Ye(418)]),"*"),Qe(fr,""[Ye(448)](hr.emissive),["MeshStandardMaterial",Ye(446)]),Qe(fr,"".concat(hr.roughness),["MeshStandardMaterial",Ye(446)]),Qe(fr,""[Ye(448)](hr[Ye(495)]),[Ye(445),Ye(446)]),Qe(fr,""[Ye(448)](hr.ao),[Ye(445),Ye(446),"MeshBasicMaterial",Ye(515),Ye(402),Ye(568)]),Qe(fr,""[Ye(448)](hr[Ye(398)]),[Ye(515),Ye(547),Ye(512),Ye(402),Ye(446),"MeshStandardMaterial",Ye(568),"ShadowMaterial"]),Qe(fr,""[Ye(448)](hr[Ye(557)]),[Ye(462)]),Qe(fr,"".concat(hr.clearcoat),[Ye(446)]),Qe(fr,""[Ye(448)](hr[Ye(528)]),[Ye(446)]),Qe(fr,""[Ye(448)](hr[Ye(487)]),[Ye(446)]),fr),mr={"#include <lights_physical_fragment>":P[Ye(481)]},gr=(Qe(pr={},"".concat(hr[Ye(407)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = ".concat(hr.normal,Ye(424))}),Qe(pr,""[Ye(448)](hr[Ye(532)]),{"#include <begin_vertex>":Ye(385)[Ye(448)](hr.position,Ye(444))}),Qe(pr,""[Ye(448)](hr[Ye(454)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Ye(448)](hr[Ye(454)],Ye(498))}),Qe(pr,"".concat(hr[Ye(541)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Ye(448)](hr[Ye(541)],Ye(464))}),Qe(pr,"".concat(hr.diffuse),{"#include <color_fragment>":Ye(538)[Ye(448)](hr[Ye(569)],Ye(444))}),Qe(pr,""[Ye(448)](hr[Ye(418)]),{"#include <dithering_fragment>":Ye(457)[Ye(448)](hr[Ye(418)],Ye(444))}),Qe(pr,""[Ye(448)](hr[Ye(511)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(478)[Ye(448)](hr.emissive,Ye(464))}),Qe(pr,""[Ye(448)](hr.roughness),{"#include <roughnessmap_fragment>":Ye(494).concat(hr[Ye(401)],Ye(464))}),Qe(pr,"".concat(hr[Ye(495)]),{"#include <metalnessmap_fragment>":Ye(431)[Ye(448)](hr[Ye(495)],Ye(464))}),Qe(pr,""[Ye(448)](hr.ao),{"#include <aomap_fragment>":Ye(536)[Ye(448)](hr.ao,Ye(464))}),Qe(pr,""[Ye(448)](hr[Ye(398)]),{"#include <normal_fragment_maps>":Ye(491)[Ye(448)](hr.bump,Ye(523)).concat(hr[Ye(398)],Ye(405))}),Qe(pr,""[Ye(448)](hr[Ye(557)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(566)[Ye(448)](hr.depthAlpha,Ye(410)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(553)[Ye(448)](hr[Ye(557)],Ye(464))}),Qe(pr,""[Ye(448)](hr[Ye(496)]),{"material.clearcoat = clearcoat;":Ye(415)[Ye(448)](hr[Ye(496)],";")}),Qe(pr,""[Ye(448)](hr[Ye(528)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = ".concat(hr[Ye(528)],";")}),Qe(pr,""[Ye(448)](hr[Ye(487)]),{"#include <clearcoat_normal_fragment_begin>":Ye(537)}),pr),_r=(Qe(dr={},"".concat(hr[Ye(532)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(477).concat(hr[Ye(532)],", 1.0 );\n  ")}),Qe(dr,""[Ye(448)](hr[Ye(454)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(427).concat(hr.position,Ye(444))}),Qe(dr,"".concat(hr[Ye(569)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(411)[Ye(448)](hr[Ye(569)],Ye(444))}),Qe(dr,""[Ye(448)](hr[Ye(418)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(411)[Ye(448)](hr[Ye(418)],Ye(444))}),dr),yr={clearcoat:[hr[Ye(496)],hr.clearcoatNormal,hr[Ye(528)]]},xr=Ye(390),br=Ye(506),Ir=Ye(426),wr=Ye(516),Sr=Ye(485),Mr=[Ye(417),Ye(461),"vertexShader",Ye(533),Ye(539),"cacheKey",Ye(447)],Ar=function(n,t,e){var r=Ye;return n[r(443)](t)[r(404)](e)},Rr=function(n,t){var e,r;return new RegExp("\\b"[Ye(448)]((e=t,r=Ye,e[r(545)](/[-\/\\^$*+?.()|[\]{}]/g,r(549))),"\\b")).test(n)};function Er(n,t){var e=ur();return(Er=function(n,t){return e[n-=377]})(n,t)}function Tr(n){return n?n[Ye(545)](/\s/g,""):void 0}function Dr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=Ye;!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError(Er(563));n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=Er,u=n[s(417)],l=n[s(461)],f=n[s(434)],p=n[s(533)],d=n[s(539)],h=n[s(455)],v=n[s(447)],m=er(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Er(420))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(519)][t(476)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(562)](e,m)):e=new u(m),e[s(392)]===s(497))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Ye;e(559),Object[e(562)](n,t);var r=Object.getPrototypeOf(t);Object[e(473)](Object[e(463)](r))[e(387)]((function(n){var t=e,r=typeof n[1][t(449)]===t(377),o=typeof n[1][t(425)]===t(377),i=typeof n[1][t(534)]===t(377),a=n[0]===t(408);return(r||o||i)&&!a}))[e(416)]((function(t){var r=e;typeof n[t[0]]!==r(377)&&Object[r(432)](n,t[0],t[1])}))})(ar(t=a[s(492)](this)),e),t[s(567)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(490)][s(400)](),type:e.type,isAlreadyExtended:(r=e[s(406)],o=Ye,i=r[o(388)]()[o(502)](),!(0===i[o(521)](i[o(476)]("{")+1,i.lastIndexOf("}"))[o(502)]()[o(559)])),cacheHash:"",silent:v},t[s(533)]=tr(tr({},t.uniforms||{}),p||{});var g=t[s(567)],_=g[s(461)],y=g.vertexShader,x=t[s(533)];return t[s(567)][s(384)]=t._getCacheHash(),t[s(486)](_,y,x),t}return e=c,r=[{key:t(555),value:function(){var n=t,e=arguments[n(559)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(533)]=e[n(533)]||this[n(533)],Object[n(562)](this[n(567)],e);var r=this[n(567)],o=r[n(461)],i=r[n(434)],a=this[n(533)],c=this[n(389)]();this[n(567)].cacheHash=c,this[n(486)](o,i,a)}},{key:t(466),value:function(){var n=t,e={baseMaterial:this.__csm.baseMaterial,fragmentShader:this[n(567)][n(461)],vertexShader:this[n(567)][n(434)],uniforms:this[n(533)],silent:this.__csm[n(447)],patchMap:this[n(567)][n(539)],cacheKey:this[n(567)][n(455)]},r=new(this[n(408)])(e);return Object[n(562)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this.__csm,r=e[n(461)],o=e[n(434)],i=this.uniforms,a=[Tr(r),Tr(o),i].filter((function(n){return void 0!==n}));return a[n(559)]>0?Mn(a,{excludeValues:!0}):this[n(422)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(533)]=r||{},this[o(422)]=function(){var n=o;return i[n(567)][n(384)]};var a=function(t){var r=o;try{var a=i[r(542)]();if(n){var c=i[r(522)](Dr(n),t[r(461)],!0);t[r(461)]=a+c}if(e){var s=i[r(522)](Dr(e),t.vertexShader);t.vertexShader="#define IS_VERTEX;\n"+s,t[r(434)]=a+t[r(434)]}t.uniforms=tr(tr({},t[r(533)]),i[r(533)]),i[r(533)]=t[r(533)]}catch(u){console[r(423)](u)}};if(this[o(567)][o(499)]){var c=this[o(406)];this[o(406)]=function(n,t){c(n,t),a(n)}}else this[o(406)]=a;this[o(552)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(450)]()),this[o(567)].patchMap);Object[o(473)](yr)[o(416)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(508)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(448)](a,e(504))[e(448)](c,e(396)))})),Object[o(473)](mr)[o(416)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(438)](c)[o(416)]((function(t){var e=o;Object.keys(c[t])[e(416)]((function(r){var o=e,s=vr[t],u=i.__csm[o(392)];if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s[o(472)](u)||"*"===s))throw new Error("CSM: "[o(448)](t,o(543)).concat(u,o(395)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(394)+this[o(567)][o(520)][o(545)](/-/g,"_"),h=n[o(545)](/void\s+main\s*\(\s*\)/g,"void "[o(448)](d,"()")),v=n[o(472)](o(548)),m=a[o(472)](o(527));return v&&(m&&this[o(567)][o(499)]?(a=a[o(545)]("void main() {",o(469)[o(448)](h,o(441))),s=a,u="// #_CSM_#",l=o(469).concat(d,o(556)),p=s[(f=Ye)(507)](u),a=-1===p?s:s.substring(0,p)+l+s[f(521)](p+u[f(559)])):a=a[o(545)](o(460),o(386).concat(r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Ir,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ").concat(xr,o(436))[o(448)](h,o(430))[o(448)](br,o(412))[o(448)](r?Sr:wr,o(453))[o(448)](d,o(531)))),a}},{key:t(542),value:function(){var n=t,e=this[n(567)][n(392)];return e?n(414).concat(e.toUpperCase(),";\n"):n(379)}},{key:t(450),value:function(){var n=t;return this[n(567)][n(392)]===n(529)?_r:gr}}],i=Er,r&&ir(e[i(378)],r),o&&ir(e,o),Object[i(432)](e,i(378),{writable:!1}),c}(D[Ye(546)]);function zr(n){function t(n){var e=Er;if(typeof n===e(482))return function(n){}[e(408)](e(479))[e(525)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(408)](e(382)+e(558)).call("action"):function(){return!1}[e(408)](e(382)+e(558))[e(525)](e(467)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=jr;!function(n,t){const e=jr,r=kr();for(;;)try{if(880328===-parseInt(e(358))/1*(-parseInt(e(367))/2)+-parseInt(e(356))/3*(-parseInt(e(350))/4)+-parseInt(e(374))/5*(-parseInt(e(368))/6)+parseInt(e(351))/7+parseInt(e(364))/8*(-parseInt(e(386))/9)+parseInt(e(352))/10*(-parseInt(e(383))/11)+parseInt(e(398))/12*(-parseInt(e(384))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cr(this,(function(){const n=jr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(388),"i"),r=Nr(n(394));t.test(r+n(380))&&e.test(r+"input")?Nr():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(395)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fr(void 0,(function(){const n=jr,t=function(){const n=jr;let t;try{t=Function(n(389)+n(365)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(391),n(385),n(399),n(397),n(360),n(375),n(390)];for(let o=0;o<r[n(357)];o++){const t=Fr[n(361)].prototype[n(382)](Fr),i=r[o],a=e[i]||t;t[n(366)]=Fr.bind(Fr),t.toString=a[n(362)][n(382)](a),e[i]=t}}))();const Br=["object"];function kr(){const n=["setStyle","chain","gger","bind","57970zLVIXx","3386695wTCbHj","warn","666bLejFZ","clearcoatRoughness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","trace","log","MeshPhysicalMaterial","counter","init","apply","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","error","36xWRLCv","info","#ff00fc","220BRJHNc","2985724BuewlB","730JkZMMT","debu","\n      ","clearcoat","17844DaNJhu","length","48633isWqyw","metalness","exception","constructor","toString","call","64400EPouTw",'{}.constructor("return this")( )',"__proto__","26APNAJh","5634AXoMTv","action","\n\t\t\t","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","primitive","color","6690GYhVVc","table","stateObject","string","roughness"];return(kr=function(){return n})()}function jr(n,t){const e=kr();return(jr=function(n,t){return e[n-=349]})(n,t)}const Ur=nn({__name:"index",props:{color:{default:Or(349)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:D[t(392)],metalness:e[t(359)],roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e[t(387)],color:e.color,vertexShader:t(371),fragmentShader:t(370)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(354)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(396)},o=new Pr(r);return ln((()=>{const n=t;o[n(373)][n(379)](e[n(373)]),o[n(359)]=e[n(359)],o[n(378)]=e[n(378)],o[n(355)]=e[n(355)],o[n(387)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(372),{object:Q(o)},null,8,Br)}}});function Nr(n){function t(n){const e=jr;if(typeof n===e(377))return function(n){}[e(361)]("while (true) {}")[e(395)](e(393));1!==(""+n/n)[e(357)]||n%20==0?function(){return!0}[e(361)](e(353)+e(381))[e(363)](e(369)):function(){return!1}.constructor(e(353)+e(381))[e(395)](e(376)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Gr();;)try{if(575126===parseInt(e(229))/1+-parseInt(e(249))/2*(parseInt(e(255))/3)+parseInt(e(237))/4*(parseInt(e(226))/5)+parseInt(e(221))/6*(-parseInt(e(224))/7)+-parseInt(e(235))/8*(parseInt(e(222))/9)+parseInt(e(247))/10+parseInt(e(223))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(233)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Zr,t=new RegExp(n(246)),e=new RegExp(n(228),"i"),r=Wr(n(248));t[n(245)](r+n(250))&&e[n(245)](r+n(254))?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(233)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Gr();return(Zr=function(n,t){return e[n-=221]})(n,t)}function Gr(){var n=["input","3237KAsPnB","call","table","constructor","3498uicBWB","71748fUuOrt","18080975kspdwv","9366dLgbNU","warn","948455TzidbX","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","486312PBashT","string","while (true) {}",'{}.constructor("return this")( )',"apply","debu","808FjBatf","counter","8TcpqQt","toString","exception","console","bind","gger","action","info","test","function *\\( *\\)","7299330vLFyqG","init","2000kRdFOE","chain","prototype","log","return (function() "];return(Gr=function(){return n})()}function Wr(n){function t(n){var e=Zr;if(typeof n===e(230))return function(n){}[e(258)](e(231))[e(233)](e(236));1!==(""+n/n)[e(227)]||n%20==0?function(){return!0}[e(258)]("debu"+e(242))[e(256)](e(243)):function(){return!1}.constructor(e(234)+"gger")[e(233)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Zr;try{n=Function(t(253)+t(232)+");")()}catch(s){n=window}for(var e=n[t(240)]=n[t(240)]||{},r=[t(252),t(225),t(244),"error",t(239),t(257),"trace"],o=0;o<r[t(227)];o++){var i=Hr[t(258)][t(251)][t(241)](Hr),a=r[o],c=e[a]||i;i.__proto__=Hr[t(241)](Hr),i[t(238)]=c.toString.bind(c),e[a]=i}}))();export{$e as C,Ur as _,Jn as a,lt as b,St as c,Dt as d,Ut as e,Kt as f,Le as g,Ee as h,mt as u};

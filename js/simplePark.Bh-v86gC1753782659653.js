import"./index.DrG2fTNt1753782659653.js";import{m as e,T as t,e as o,a,V as i}from"./@tresjs.BTaYoA_d1753782659653.js";import"./index.gbh6QB-l1753782659653.js";import"./index.CEBmX_7G1753782659653.js";import{P as s}from"./tweakpane.C0HtAJSg1753782659653.js";import{i as r}from"./index.Cx4HcCUA1753782659653.js";import{g as n}from"./gsap.CEma2WSx1753782659653.js";import{d as l,b as c,a2 as m,G as p,o as u,F as d,I as h,u as g,j as b,f as j,w as v,a7 as f,a8 as y,r as w,v as _,h as k,e as M,H as T,m as S,a5 as B}from"./@vue.BzMISRrV1753782659653.js";import{a3 as x,a as I,bI as C,aA as G,cg as O,l as z,C as L,aB as N,cH as P,V as F,f as A,g as D,X as R}from"./three.COeOkYug1753782659653.js";import"./index.DHoB6Zgq1753782659653.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang.D9Yn_54-1753782659653.js";import{_ as V}from"./randomLoading.vue_vue_type_script_setup_true_lang.9oTt9Hjf1753782659653.js";import{_ as X}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Bo4wcc1F1753782659653.js";import{_ as E}from"./skyBoxDmesh.vue_vue_type_script_setup_true_lang.D1GI0xko1753782659653.js";import"./utils.CMtvRxDA1753782659653.js";import"./@fesjs.D7mvJMlo1753782659653.js";import"./vue-router.11Q-FEO_1753782659653.js";import"./lodash-es.C7pWAXPe1753782659653.js";import"./@qlin.q6OWdsQV1753782659653.js";import"./pinia.BMpzOEFs1753782659653.js";import"./@babel.BPq7uOAK1753782659653.js";import"./@floating-ui.BFjFSAYt1753782659653.js";import"./@juggle.CcBCnTIR1753782659653.js";import"./three-mesh-ui.module.CZNkefm01753782659653.js";import"./postprocessing.CeqeRjXM1753782659653.js";import"./@vueuse.kHMOgCjI1753782659653.js";import"./lamina.xMsjxmb71753782659653.js";import"./glsl-tokenizer.CSft5OlC1753782659653.js";import"./@amap.CGUF9xH41753782659653.js";import"./glsl-token-descope.DwcfJRqf1753782659653.js";import"./glsl-token-depth.Duvdnvlt1753782659653.js";import"./glsl-token-scope.BdCfdvWe1753782659653.js";import"./glsl-token-properties.DKXemF9b1753782659653.js";import"./glsl-token-assignments.Ctx_yUgS1753782659653.js";import"./glsl-token-string.D_BlFXnm1753782659653.js";import"./glsl-token-functions.BxFKPmzC1753782659653.js";import"./object-hash.CIAsQghJ1753782659653.js";import"./jszip.DINw5uda1753782659653.js";import"./utils.C5kQHJrs1753782659653.js";import"./all.three.BDhQNZL31753782659653.js";import"./oimophysics.BBtHVm4j1753782659653.js";import"./reflectorDiffuse.OHqpUD311753782659653.js";import"./vite-plugin-qiankun.B06WoCqG1753782659653.js";import"./three-stdlib.Q_4pzdER1753782659653.js";import"./whiteFloor.D-bdoYtS1753782659653.js";import"./@pmndrs.cax4KJvS1753782659653.js";import"./index.C9EDKqWq1753782659653.js";import"./starLoading.BjRFdIkL1753782659653.js";import"./cssLoaders.CFTF3IGp1753782659653.js";import"./bubbleLoading.Dqsn5rGR1753782659653.js";import"./yangyangLoading.D56JcRFn1753782659653.js";const H=["object","rotation-y"],Y=["rotation","geometry","material"],q=l({__name:"officeBuild",setup(o){const{scene:a}=r.getItem("officeBuild.gltf"),{scene:i,raycaster:s,camera:l}=e();a.traverse((e=>{e.isMesh&&(e.frustumCulled=!1,e.material.side=x,e.castShadow=!0,e.receiveShadow=!0,e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.8,e.material.envmap=i.value.background)}));const v=a.clone();let f="";const y=()=>{a.getObjectByName(f)?.traverse((e=>{e.isMesh&&(e.material=v.getObjectByName(e.name).material,e.castShadow=!0,e.receiveShadow=!0)}))};window.addEventListener("pointermove",(e=>{const t=new I;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,s.value.setFromCamera(t,l.value);const o=s.value.intersectObject(a,!0);if(o.length>0&&o[0]&&o[0].object&&o[0].object.parent){if(f===o[0].object.parent.name)return;y(),o[0].object.parent.traverse((e=>{e.isMesh&&(e.material=new C({color:"#00d1ff",transparent:!0,opacity:.7,emissiveMap:e.material.map,emissiveIntensity:2}),e.castShadow=!1,e.receiveShadow=!1)})),f=o[0].object.parent.name}else f&&(y(),f="")}));let w="";window.addEventListener("click",(e=>{const t=new I;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,s.value.setFromCamera(t,l.value);const o=s.value.intersectObject(a,!0);if(o.length>0&&o[0]&&o[0].object&&o[0].object.parent){if("runing"===w)return;if(w===o[0].object.parent.name)return n.to(o[0].object.parent.position,{z:v.getObjectByName(w).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{w=""}}),void(w="runing");w&&n.to(a.getObjectByName(w).position,{z:v.getObjectByName(w).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{w=""}}),n.to(o[0].object.parent.position,{z:v.getObjectByName(o[0].object.parent.name).position.z-40,duration:2,ease:"power1.inOut",onComplete:()=>{w=o[0].object.parent.name}}),w="runing"}}));const _=new G({roughness:.3,metalness:.05,color:"#3a4f75",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),{scene:k}=r.getItem("arctic_tooltip.glb"),M=c(null);return m((()=>{M.value&&n.to(M.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})})),(e,o)=>(u(),p(d,null,[h("primitive",{object:g(a),"cast-shadow":"","receive-shadow":"",position:[13.5,0,-45],scale:[.2,.3,.2],name:"办公大厅","rotation-y":Math.PI},null,8,H),h("TresMesh",{ref_key:"tooltipRef",ref:M,scale:[.05,.02,.004],rotation:[0,Math.PI/2,0],position:[12,25,-35],geometry:g(k).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:g(_)},[b(g(t),{center:!0,transform:""},{default:j((()=>o[0]||(o[0]=[h("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"5em","text-align":"center","margin-top":"1em",scale:"0.7 1.5"}}," 楼宇分层 ",-1)]))),_:1})],8,Y)],64))}}),Q=["object","rotation-y"],U=["rotation","geometry","material"],J={__name:"laboratoryBuild",setup(o){const{scene:a}=r.getItem("laboratoryBuild.gltf"),{scene:i}=e(),s=[],l=[];a.traverse((e=>{e.updateMatrixWorld(!0),e.isMesh&&(e.geometry.applyMatrix4(e.matrixWorld),s.push(e.geometry),e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.1,e.material.envmap=i.value.background,l.push(e.material))}));const v=O(s,!0),f=new z(v,l),{scene:y}=r.getItem("arctic_tooltip.glb"),w=new G({roughness:.3,metalness:.05,color:"#b07560",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),_=c(null);return m((()=>{_.value&&n.to(_.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})})),(e,o)=>(u(),p(d,null,[h("primitive",{object:g(f),"cast-shadow":"","receive-shadow":"",position:[-33,0,7],scale:[.7,1.2,.7],name:"实验楼","rotation-y":Math.PI/2},null,8,Q),h("TresMesh",{ref_key:"tooltipRef",ref:_,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[-32,27,12],geometry:g(y).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:g(w)},[b(g(t),{center:!0,transform:""},{default:j((()=>o[0]||(o[0]=[h("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}},"实验楼",-1)]))),_:1})],8,U)],64))}},K=["object"],Z=["rotation","geometry"],$=3e-4,ee={__name:"car",props:{darkModel:{type:Boolean,default:!1}},setup(a){const i=a,s={color:"#ffda99",roughness:.21,reflectivity:1,attenuationColor:"#ffda35",attenuationDistance:2,chromaticAberration:.05,anisotropicBlur:.1,distortion:1.8,temporalDistortion:0,backside:!1,thickness:1,backsideThickness:.5},{scene:l}=e(),{scene:m,nodes:w,materials:_}=r.getItem("lambo.glb");m.children[0].scale.setScalar(.02),w.glass_003.scale.setScalar(2.7),_.FrameBlack.roughness=0,_.FrameBlack.metalness=.75,_.Chrome.metalness=1,_.Chrome.roughness=0,_.BreakDiscs.metalness=.2,_.BreakDiscs.roughness=.2,_.TiresGum.metalness=0,_.TiresGum.roughness=.4,_.GreyElements.metalness=0,w.yellow_WhiteCar_0.material=new G({roughness:.3,metalness:.05,color:"#ffda35",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),Object.values(w).forEach((e=>{e.isMesh&&(e.name.startsWith("glass")&&e.geometry.computeVertexNormals(),"silver_001_BreakDiscs_0"===e.name&&(e.material=_.BreakDiscs.clone(),e.material.color=new L("#ddd")),e.castShadow=!0,e.receiveShadow=!0,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.1,e.material.envmap=l.value.background)}));const k=new N(16777215);m.add(k),m.add(k.target),k.angle=Math.PI/4,k.position.set(0,2,5),k.target.position.set(0,1,7),k.penumbra=.1,k.decay=.01,k.intensity=3,k.castShadow=!0,k.shadow.mapSize.width=1024,k.shadow.mapSize.height=1024,k.shadow.camera.near=.1,k.shadow.camera.far=1e3,k.shadow.camera.bias=.005,k.visible=!0;const{scene:M}=r.getItem("arctic_tooltip.glb"),T=new P([new F(10,1.5,35),new F(35,1.5,35),new F(35,1.5,-80),new F(47,1.5,-80),new F(47,1.5,35),new F(100,1.5,35),new F(100,1.5,47),new F(-100,1.5,47),new F(-100,1.5,35)]);T.curveType="catmullrom",T.closed=!0,T.tension=.2;const S=c(null);let B=0;v(S,(e=>{e&&n.to(S.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})})),v((()=>i.darkModel),(e=>{k&&(k.visible=e)}),{immediate:!0});const{onLoop:x}=o();return x((()=>{(()=>{if(T)if(B<=.9997){const e=T.getPointAt(B),t=T.getPointAt(B+$);e&&t&&(S.value.position.set(e.x,e.y+6,e.z),m.position.set(e.x,e.y,e.z),m.lookAt(t.x,t.y,t.z)),B+=$}else B=0})()})),(e,o)=>(u(),p(d,null,[h("primitive",{object:g(m)},null,8,K),h("TresMesh",{ref_key:"tooltipRef",ref:S,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[10,6,35],geometry:g(M).getObjectByName("Arctic_Tooltip_lambert4_0").geometry},[b(g(t),{center:!0,transform:""},{default:j((()=>o[0]||(o[0]=[h("h1",{class:"text-xs p-0.5 rounded -mt-10 text-#ffff99 font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}}," 别追我 ",-1)]))),_:1}),b(g(W),f(y(s)),null,16)],8,Z)],64))}},te=["object"],oe=l({__name:"sculpture",props:{darkModel:{type:Boolean,default:!1}},setup(t){const o=t,{scene:a}=r.getItem("scene.gltf"),{scene:i}=e();return a.traverse((async e=>{e.isMesh&&(e.material.emissiveMap=e.material.map,e.material.emissive=e.material.color,e.material.envmap=i.value.background,e.castShadow=!0,e.receiveShadow=!0,e.frustumCulled=!1),e.isObject3D&&(e.frustumCulled=!1,e.castShadow=!0,e.receiveShadow=!0)})),v((()=>o.darkModel),(e=>{a&&a.traverse((async t=>{t.isMesh&&(t.material.emissiveIntensity=!1===e?.6:0)}))}),{immediate:!0}),(e,t)=>(u(),p("primitive",{"cast-shadow":"","receive-shadow":"",object:g(a),name:"主场景"},null,8,te))}}),ae={position:[10,0,0]},ie={position:[-132,0,40.4]},se=["object"],re={position:[-99,0,40.4]},ne=["object"],le={position:[-66,0,40.4]},ce=["object"],me={position:[-33,0,40.4]},pe=["object"],ue={position:[0,0,40.4]},de=["object"],he={position:[60.5,0,40.4]},ge=["object"],be={position:[93.5,0,40.4]},je=["object"],ve={position:[-3.3,-.2,18]},fe={position:[0,0,0]},ye=["object"],we={position:[0,0,33]},_e=["object"],ke={position:[0,0,66]},Me=["object"],Te={position:[0,0,99]},Se=["object"],Be={position:[0,0,159]},xe=["object"],Ie={position:[0,0,192]},Ce=["object"],Ge={__name:"street",setup(e){const t=r.getItem("low_poly_street.glb").nodes,o=t.Sketchfab_model.getObjectByName("Cube497_530");o.children[0].receiveShadow=!0;const a=t.Sketchfab_model.getObjectByName("Cube549_582");a.children[0].receiveShadow=!0;const i=t.Sketchfab_model.getObjectByName("Cube550_583");i.children[0].receiveShadow=!0;const s=t.Sketchfab_model.getObjectByName("Cube551_854");s.children[0].receiveShadow=!0;const n=t.Sketchfab_model.getObjectByName("Cube552_855");n.children[0].receiveShadow=!0;const l=t.Sketchfab_model.getObjectByName("Cube553_856");l.children[0].receiveShadow=!0;const c=new A;c.add(o,a,i,s,n,l),c.scale.setScalar(.83),c.rotation.set(0,.008,0);const m=(new D).setFromObject(c),b=new F;m.getCenter(b),c.position.x=-b.x,c.position.y=-b.y,c.position.z=-b.z;const j=c.clone();return j.rotateY(Math.PI/2),(e,t)=>(u(),p(d,null,[h("TresGroup",ae,[h("TresGroup",ie,[h("primitive",{object:g(c).clone()},null,8,se)]),h("TresGroup",re,[h("primitive",{object:g(c).clone()},null,8,ne)]),h("TresGroup",le,[h("primitive",{object:g(c).clone()},null,8,ce)]),h("TresGroup",me,[h("primitive",{object:g(c).clone()},null,8,pe)]),h("TresGroup",ue,[h("primitive",{object:g(c).clone()},null,8,de)]),h("TresGroup",he,[h("primitive",{object:g(c).clone()},null,8,ge)]),h("TresGroup",be,[h("primitive",{object:g(c).clone()},null,8,je)])]),h("TresGroup",ve,[h("TresGroup",fe,[h("primitive",{object:g(j).clone()},null,8,ye)]),h("TresGroup",we,[h("primitive",{object:g(j).clone()},null,8,_e)]),h("TresGroup",ke,[h("primitive",{object:g(j).clone()},null,8,Me)]),h("TresGroup",Te,[h("primitive",{object:g(j).clone()},null,8,Se)]),h("TresGroup",Be,[h("primitive",{object:g(j).clone()},null,8,xe)]),h("TresGroup",Ie,[h("primitive",{object:g(j).clone()},null,8,Ce)])])],64))}},Oe=l({__name:"simplePark",setup(e){r.loadResources([{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/officeBuild/officeBuild.gltf"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/arctic_tooltip.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/laboratoryBuild.gltf"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/low_poly_street.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/vr_sculpture_park/scene.gltf"},{functionName:"GLTFLoader",url:"./plugins/industry4/model/lambo.glb"}]);const t=w({shadows:!0,shadowMap:!0,shadowMapType:R,windowSize:!0}),o=w({enableDamping:!0,dampingFactor:.05}),n=w({cellSize:10,cellThickness:1,cellColor:"#4c4c4c",sectionColor:"#bbc26b",sectionSize:50,sectionThickness:3,fadeDistance:600,fadeStrength:3,followCamera:!1,infiniteGrid:!0}),l=_();v(l,(e=>{e&&(l.value.shadow.mapSize.set(5120,5120),l.value.shadow.bias=-1e-5,l.value.shadow.color=new L(0),l.value.shadow.camera.near=.5,l.value.shadow.camera.far=5e4,l.value.shadow.camera.top=300,l.value.shadow.camera.right=300,l.value.shadow.camera.left=-300,l.value.shadow.camera.bottom=-300)}));const c=_(!1),m=new s,x=_();return m.addBinding(c,"value",{label:"黑夜模式"}),v(c,(e=>{l.value&&(l.value.visible=!e,x.value&&(x.value.context.scene.value.backgroundIntensity=e?0:1))})),(e,s)=>{const m=k("TresCanvas");return u(),p(d,null,[b(g(V),{useResourceManager:""}),b(m,S(t,{ref_key:"tcRef",ref:x}),{default:j((()=>[s[0]||(s[0]=h("TresPerspectiveCamera",{position:[40,30,82],fov:45,near:.1,far:1e4},null,-1)),b(g(a),f(y(o)),null,16),s[1]||(s[1]=h("TresAmbientLight",{intensity:.1},null,-1)),b(g(i),null,{default:j((()=>[h("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:l,position:[80,80,-8],intensity:3,castShadow:!0},null,512)])),_:1}),g(r).hasAllFinished.value?(u(),M(q,{key:0})):T("",!0),g(r).hasAllFinished.value?(u(),M(J,{key:1})):T("",!0),g(r).hasAllFinished.value?(u(),M(Ge,{key:2})):T("",!0),g(r).hasAllFinished.value?(u(),M(oe,{key:3,darkModel:c.value},null,8,["darkModel"])):T("",!0),g(r).hasAllFinished.value?(u(),M(ee,{key:4,darkModel:c.value},null,8,["darkModel"])):T("",!0),b(g(X),S({args:[100,100]},n,{position:[0,-10,0]}),null,16),(u(),M(B,null,{default:j((()=>[b(g(E),{environment:!1,texture:"./plugins/skyBox/image/kloofendal_48d_partly_cloudy_puresky.jpg"})])),_:1}))])),_:1},16)],64)}}});export{Oe as default};

const t="utm",a="merc",h=6378137,M=Math.PI/180;function n(t,a){return[h*t*M,h*Math.log(Math.tan(.25*Math.PI+a*M*.5))]}function s(t,a){let M=t/(h*Math.PI)*180,n=a/(h*Math.PI)*180;return n=180/Math.PI*(2*Math.atan(Math.exp(n*Math.PI/180))-Math.PI/2),[M,n]}function r(t){return t*Math.PI/180}function o(t){return 180*t/Math.PI}const e={a:6378137,f:1/298.257223563};function l(t,a,h){if(!(-80<=a&&a<=84))throw new RangeError(`latitude ‘${a}’ outside UTM limits`);let M=h||Math.floor((t+180)/6)+1,n=r(6*(M-1)-180+3);const s="CDEFGHJKLMNPQRSTUVWXX".charAt(Math.floor(a/8+10));31===M&&"V"===s&&t>=3?(M++,n+=r(6)):32===M&&"X"===s&&t<9?(M--,n-=r(6)):32===M&&"X"===s&&t>=9?(M++,n+=r(6)):34===M&&"X"===s&&t<21?(M--,n-=r(6)):34===M&&"X"===s&&t>=21?(M++,n+=r(6)):36===M&&"X"===s&&t<33?(M--,n-=r(6)):36===M&&"X"===s&&t>=33&&(M++,n+=r(6));const o=r(a),l=r(t)-n,{a:i,f:c}=e,u=.9996,f=Math.sqrt(c*(2-c)),q=c/(2-c),P=q*q,I=q*P,X=q*I,d=q*X,m=q*d,w=Math.cos(l),x=Math.sin(l),b=Math.tan(o),F=Math.sinh(f*Math.atanh(f*b/Math.sqrt(1+b*b))),N=b*Math.sqrt(1+F*F)-F*Math.sqrt(1+b*b),U=Math.atan2(N,w),g=Math.asinh(x/Math.sqrt(N*N+w*w)),p=i/(1+q)*(1+1/4*P+1/64*X+1/256*m),E=[null,.5*q-2/3*P+5/16*I+41/180*X-127/288*d+7891/37800*m,13/48*P-.6*I+557/1440*X+281/630*d-1983433/1935360*m,61/240*I-103/140*X+15061/26880*d+167603/181440*m,49561/161280*X-179/168*d+6601661/7257600*m,34729/80640*d-3418889/1995840*m,.6650675310896665*m];let R=U;for(let r=1;r<=6;r++)R+=E[r]*Math.sin(2*r*U)*Math.cosh(2*r*g);let T=g;for(let r=1;r<=6;r++)T+=E[r]*Math.cos(2*r*U)*Math.sinh(2*r*g);let V=u*p*T,A=u*p*R;return V+=5e5,A<0&&(A+=1e7),[V,A]}function i(t,a,h){const{a:M,f:n}=e,s=.9996,l=t-5e5,i=a,c=Math.sqrt(n*(2-n)),u=n/(2-n),f=u*u,q=u*f,P=u*q,I=u*P,X=u*I,d=M/(1+u)*(1+1/4*f+1/64*P+1/256*X),m=l/(s*d),w=i/(s*d),x=[null,.5*u-2/3*f+37/96*q-1/360*P-81/512*I+96199/604800*X,1/48*f+1/15*q-437/1440*P+46/105*I-1118711/3870720*X,17/480*q-37/840*P-209/4480*I+5569/90720*X,4397/161280*P-11/504*I-830251/7257600*X,4583/161280*I-108847/3991680*X,20648693/638668800*X];let b=w;for(let r=1;r<=6;r++)b-=x[r]*Math.sin(2*r*w)*Math.cosh(2*r*m);let F=m;for(let r=1;r<=6;r++)F-=x[r]*Math.cos(2*r*w)*Math.sinh(2*r*m);const N=Math.sinh(F),U=Math.sin(b),g=Math.cos(b),p=U/Math.sqrt(N*N+g*g);let E=null,R=p;do{const t=Math.sinh(c*Math.atanh(c*R/Math.sqrt(1+R*R))),a=R*Math.sqrt(1+t*t)-t*Math.sqrt(1+R*R);E=(p-a)/Math.sqrt(1+a*a)*(1+(1-c*c)*R*R)/((1-c*c)*Math.sqrt(1+R*R)),R+=E}while(Math.abs(E)>1e-12);const T=R,V=Math.atan(T);let A=Math.atan2(N,g);A+=r(117);const C=Number(o(V).toFixed(14));return[Number(o(A).toFixed(14)),C]}export{a as M,t as U,n as a,l,i as u,s as w};

import{b$ as t,a3 as n,C as e,k as r}from"./three.VoknrmS61728703368826.js";import{z as o}from"./@tresjs.JhHPALEY1728703368826.js";import{R as c}from"./all.three.NayfOH7t1728703368826.js";import{d as a,b as i,a4 as s,a3 as u,o as l,E as f,L as p,m,u as d}from"./@vue.JNsx1iN61728703368826.js";function v(){const t=["52203XTHWkX","call","length","1310008IBMVhS","return (function() ","8HcBnyx","vertexShader","#include <emissivemap_fragment>","test","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","trace","#include <project_vertex>","error","92608zBKtnR","info","log","2110uuTneA","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","20811snVtHR","prototype","bind","gger","replace","constructor","60QiyKfX","counter","console","170924lVrJOQ","fragmentShader","9PJsNxN","string","debu","warn","stateObject","537260QoVgrk","toString","void main() {","apply","27577sLPLua","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","exception","834dYRGjG","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","__proto__","876ElgtoW","function *\\( *\\)"];return(v=function(){return t})()}!function(t,n){const e=g,r=v();for(;;)try{if(462995===-parseInt(e(175))/1+-parseInt(e(186))/2*(-parseInt(e(208))/3)+-parseInt(e(167))/4*(-parseInt(e(196))/5)+-parseInt(e(203))/6*(-parseInt(e(180))/7)+-parseInt(e(165))/8*(parseInt(e(191))/9)+parseInt(e(178))/10*(parseInt(e(200))/11)+-parseInt(e(206))/12*(parseInt(e(189))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(199)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(t,n){const e=v();return(g=function(t,n){return e[t-=163]})(t,n)}!function(){h(this,(function(){const t=g,n=new RegExp(t(207)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y("init");n[t(170)](r+"chain")&&e[t(170)](r+"input")?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=g;let n;try{n=Function(t(166)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(188)]=n.console||{},r=[t(177),t(194),t(176),t(174),t(202),"table",t(172)];for(let c=0;c<r[t(164)];c++){const n=x[t(185)][t(181)][t(182)](x),o=r[c],a=e[o]||n;n[t(205)]=x[t(182)](x),n[t(197)]=a[t(197)][t(182)](a),e[o]=n}}))();function y(t){function n(t){const e=g;if(typeof t===e(192))return function(t){}[e(185)]("while (true) {}")[e(199)](e(187));1!==(""+t/t)[e(164)]||t%20==0?function(){return!0}[e(185)](e(193)+e(183))[e(163)]("action"):function(){return!1}[e(185)]("debu"+e(183))[e(199)](e(195)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=b;function b(t,n){const e=S();return(b=function(t,n){return e[t-=352]})(t,n)}!function(t,n){const e=b,r=S();for(;;)try{if(659177===-parseInt(e(354))/1+-parseInt(e(366))/2+parseInt(e(376))/3+parseInt(e(362))/4+parseInt(e(364))/5*(-parseInt(e(389))/6)+-parseInt(e(399))/7*(parseInt(e(373))/8)+parseInt(e(391))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=b,n=new RegExp(t(369)),e=new RegExp(t(381),"i"),r=z(t(387));n[t(352)](r+t(388))&&e[t(352)](r+t(368))?z():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=b,n=function(){const t=b;let n;try{n=Function(t(363)+t(367)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},r=[t(365),t(403),"info",t(395),t(390),t(385),t(396)];for(let o=0;o<r[t(359)];o++){const n=w[t(377)].prototype[t(355)](w),c=r[o],a=e[c]||n;n.__proto__=w[t(355)](w),n.toString=a[t(357)][t(355)](a),e[c]=n}}))();const M=[_(400)],C=[_(360),"visible"];function S(){const t=["input","function *\\( *\\)","debu","channel","wrapT","16Wdratu","#444","gger","723456KooacY","constructor","tpgRef","primitive","#ffffff","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","onBeforeRender","reflectorDiffuse","table","TresPlaneGeometry","init","chain","6ykpiMB","exception","10500804pSoThe","assign","TresMeshStandardMaterial","aoMap","error","trace","tmsmRef","string","356377YYxwdQ","rotation-x","apply","showGridHelper","warn","wrapS","test","color","802663IbDYzp","bind","uniforms","toString","mixStrength","length","object","renderTargetUniform","3279252lRcYMk","return (function() ","1061385EAxyGo","log","903564qhkzxk",'{}.constructor("return this")( )'];return(S=function(){return t})()}const j=a({__name:_(384),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(380)}},async setup(a){const v=_;let h,x;const y=a,b=new t(9.5,10),I=i(),w=i(),S=i(),j=new c,z={mirror:{value:y.mirror},mixStrength:{value:y[v(358)]}},E=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var R=0;R<3;R++)E[R][v(404)]=n,E[R][v(372)]=n,E[R].repeat.set(16,16);const T={color:new e(v(374)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=v;t[n(356)].reflectMap=j[n(361)],t.uniforms.textureMatrix=j.textureMatrixUniform,t[n(356)]=Object[n(392)](t.uniforms,z),(t=>{const n=g;t.vertexShader=t.vertexShader[n(184)](n(198),n(179)),t[n(168)]=t[n(168)][n(184)](n(173),n(171))})(t),(t=>{const n=g;t[n(190)]=t[n(190)].replace(n(198),n(201)),t[n(190)]=t[n(190)].replace(n(169),n(204))})(t)};return u((()=>{const t=v;I.value&&(I[t(382)].attributes.uv1=I[t(382)].attributes.uv),S.value&&(S[t(382)][t(394)][t(371)]=1,S[t(382)].onBeforeCompile=k),w.value&&(w[t(382)].add(j),w[t(382)][t(383)]=(t,n,e)=>{j.update(t,n,e)}),y[t(353)]&&S[t(382)]&&(S[t(382)][t(353)]=new e(y[t(353)]))})),(t,n)=>{const e=v;return l(),f("TresGroup",null,[p("TresMesh",{ref_key:"tmRef",ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(386),{ref_key:e(378),ref:I,args:[10,10]},null,512),p(e(393),m({ref_key:e(397),ref:S},T),null,16)],8,M),p(e(379),{object:d(b),visible:t[e(402)]},null,8,C)])}}});function z(t){function n(t){const e=b;if(typeof t===e(398))return function(t){}[e(377)]("while (true) {}")[e(401)]("counter");1!==(""+t/t)[e(359)]||t%20==0?function(){return!0}.constructor(e(370)+"gger").call("action"):function(){return!1}[e(377)](e(370)+e(375))[e(401)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

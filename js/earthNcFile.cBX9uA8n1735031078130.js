import"./index.U1mFRftU1735031078130.js";import{_ as n,p as t,A as e,a$ as o,ac as r,bv as a,n as i,V as s}from"./three.bc6MLGU_1735031078130.js";import{m as c,j as u}from"./@tresjs.dTM0HLnZ1735031078130.js";import{d as l,v as p,w as f,b as m,U as d,u as y,o as v,D as g,I as h,a6 as b,a as x,J as I,aj as w,ak as _,j,f as z,g as T,al as S,F as A,r as D,e as P,m as E}from"./@vue.-THQH3GC1735031078130.js";import{M as k}from"./three-stdlib.2VgffRAZ1735031078130.js";import{_ as R,c as M,n as F}from"./three-tile.aZFEED7i1735031078130.js";import{N as B}from"./netcdfjs.HoDbFpbI1735031078130.js";import{u as C,a as L,_ as O}from"./colorList.umwMe-iv1735031078130.js";import{P as Z}from"./tweakpane.yHWGBmom1735031078130.js";import{c as N,s as V}from"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.QdO0dz2a1735031078130.js";import{a as G}from"./mapBoxShow.vue_vue_type_script_setup_true_lang.BeurypcD1735031078130.js";import{i as U}from"./informationDiv.28N6kj681735031078130.js";import"./three-custom-shader-material.uc9Xgl3q1735031078130.js";import"./3d-tiles-renderer.swrpju-81735031078130.js";import"./index.EOMlTmYa1735031078130.js";import"./@mapbox.sEPyRf7c1735031078130.js";import"./@amap.FwSyOcr71735031078130.js";import"./three-mesh-bvh.M5kBNwHd1735031078130.js";import"./utils.NoZDRSqk1735031078130.js";import"./@tweenjs.J1BAvmPw1735031078130.js";import"./utils.djU5_WBK1735031078130.js";import"./@fesjs.I05ciYa-1735031078130.js";import"./vue-router.v9AQvngO1735031078130.js";import"./lodash-es.kYt-_xTG1735031078130.js";import"./@qlin.yHhFDldE1735031078130.js";import"./pinia.67PZ8qep1735031078130.js";import"./vue-demi.C4xddsk91735031078130.js";import"./@floating-ui.BPbuo5Gx1735031078130.js";import"./@juggle.7yjBMqoW1735031078130.js";import"./d3-geo.3HMinHRu1735031078130.js";import"./d3-array.AhNJy1f41735031078130.js";import"./http.5Q5VmeVt1735031078130.js";import"./axios.Ng308AU61735031078130.js";import"./color.MyG5yG6F1735031078130.js";import"./color-string.gu2_HuAt1735031078130.js";import"./color-name.3n9vEtOe1735031078130.js";import"./simple-swizzle.TSTHRKSm1735031078130.js";import"./is-arrayish.gyq4EDo41735031078130.js";import"./color-convert.kQ8nVz-H1735031078130.js";import"./lodash.dHufVj4F1735031078130.js";import"./naive-ui.BzE0TU341735031078130.js";import"./date-fns.dsKIdits1735031078130.js";import"./@css-render.y2-3xbqA1735031078130.js";import"./seemly.SjiSeX2v1735031078130.js";import"./css-render.xeZE4oZe1735031078130.js";import"./@emotion.ZD_ZYAgY1735031078130.js";import"./vooks.fCQ2_0L-1735031078130.js";import"./evtd.DtfwxtIl1735031078130.js";import"./vueuc.ckHIvikx1735031078130.js";import"./vdirs.NeAcDCDY1735031078130.js";import"./treemate.dcEdf2le1735031078130.js";import"./date-fns-tz.6_eevvr11735031078130.js";import"./async-validator.-YBkpS4I1735031078130.js";import"./@vueuse.COyzlgw71735031078130.js";import"./iobuffer.X3Ykb-iF1735031078130.js";const W=q;!function(n,t){const e=q,o=Y();for(;;)try{if(580339===-parseInt(e(403))/1+parseInt(e(361))/2*(parseInt(e(394))/3)+-parseInt(e(368))/4*(parseInt(e(395))/5)+-parseInt(e(391))/6+parseInt(e(405))/7*(-parseInt(e(364))/8)+-parseInt(e(380))/9+parseInt(e(387))/10*(parseInt(e(385))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[q(379)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){$(this,(function(){const n=q,t=new RegExp(n(358)),e=new RegExp(n(377),"i"),o=K("init");t.test(o+n(367))&&e[n(359)](o+n(402))?K():o("0")}))()}();const H=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[q(379)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function Y(){const n=["679661UyHzGg","console","70BhRGFe","function *\\( *\\)","test","while (true) {}","314794tbdmsY","prototype","CubeTextureLoader","148888fWUPRx","environment","load","chain","164tWlVxe","counter","action","pos-y.png","setPath","stateObject","trace","skyBoxMesh","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","apply","9390627Mykdxl","warn","debu","value","return (function() ","33mdoPzb","string","9660970JIpFjr","bind","log","call","5152704acLsVG","pos-z.png","exception","15HKHyjJ","41095SYvJOJ","constructor","info",'{}.constructor("return this")( )',"toString","length","gger","input"];return(Y=function(){return n})()}function q(n,t){const e=Y();return(q=function(n,t){return e[n-=358]})(n,t)}H(void 0,(function(){const n=q;let t;try{t=Function(n(384)+n(398)+");")()}catch(r){t=window}const e=t[n(404)]=t.console||{},o=[n(389),n(381),n(397),"error",n(393),n(378),n(374)];for(let a=0;a<o[n(400)];a++){const t=H.constructor[n(362)][n(388)](H),r=o[a],i=e[r]||t;t[n(376)]=H[n(388)](H),t.toString=i[n(399)].bind(i),e[r]=t}}))();const J=l({__name:W(375),props:{texture:{}},setup(t){const e=W,o=t,{scene:r}=c(),a=(new(n[e(363)]))[e(372)](o.texture)[e(366)](["pos-x.png","neg-x.png",e(371),"neg-y.png",e(392),"neg-z.png"]);return r[e(383)][e(365)]=a,r[e(383)].background=a,(n,t)=>null}});function K(n){function t(n){const e=q;if(typeof n===e(386))return function(n){}.constructor(e(360))[e(379)](e(369));1!==(""+n/n)[e(400)]||n%20==0?function(){return!0}[e(396)]("debu"+e(401))[e(390)](e(370)):function(){return!1}[e(396)](e(382)+"gger")[e(379)](e(373)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Q=on;!function(n,t){const e=on,o=tn();for(;;)try{if(520580===-parseInt(e(363))/1+parseInt(e(327))/2+parseInt(e(349))/3*(parseInt(e(328))/4)+parseInt(e(310))/5+-parseInt(e(335))/6*(parseInt(e(336))/7)+-parseInt(e(308))/8+-parseInt(e(307))/9*(-parseInt(e(352))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[on(357)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){X(this,(function(){const n=on,t=new RegExp(n(323)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=an(n(326));t.test(o+n(340))&&e[n(365)](o+n(361))?an():o("0")}))()}();const nn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[on(357)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function tn(){const n=["enable-rotate","call","max-distance","keys","info","3yoBLsc","POSITIVE_INFINITY","camera","6385220hHWsKn","warn","enable-zoom","min-zoom","exception","apply","toString","max-polar-angle","min-azimuth-angle","input","trace","312085mCUkcj","bind","test","constructor","stateObject","change","TresMapControls","9jHiTvB","5219064VTsopT",'{}.constructor("return this")( )',"2183685AtPDGZ","auto-rotate","zoom-speed","value","start","NEGATIVE_INFINITY","enable-damping","MapControls","counter","error","gger","__proto__","log","function *\\( *\\)","update","args","init","1012892UozAnM","3184340fcfNjk","return (function() ","length","table","makeDefault","domElement","console","15348gEUYds","2443WGCmJM","enable-pan","min-distance","while (true) {}","chain","end","debu","damping-factor"];return(tn=function(){return n})()}nn(void 0,(function(){const n=on;let t;try{t=Function(n(329)+n(309)+");")()}catch(r){t=window}const e=t[n(334)]=t.console||{},o=[n(322),n(353),n(348),n(319),n(356),n(331),n(362)];for(let a=0;a<o.length;a++){const t=nn[n(303)].prototype.bind(nn),r=o[a],i=e[r]||t;t[n(321)]=nn[n(364)](nn),t[n(358)]=i[n(358)].bind(i),e[r]=t}}))();const en=[Q(325),Q(311),"auto-rotate-speed",Q(316),Q(343),Q(337),"key-pan-speed",Q(347),"max-azimuth-angle",Q(360),Q(359),"min-polar-angle",Q(338),Q(346),Q(355),"max-zoom",Q(354),Q(312),Q(344),"rotate-speed"];function on(n,t){const e=tn();return(on=function(n,t){return e[n-=303]})(n,t)}const rn=l({__name:Q(317),props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number.POSITIVE_INFINITY},minAzimuthAngle:{default:Number[Q(315)]},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number[Q(350)]},minZoom:{default:0},maxZoom:{default:Number[Q(350)]},touches:{},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:[Q(305),"start","end"],setup(n,{expose:t,emit:e}){const o=n,{autoRotate:r,autoRotateSpeed:a,enableDamping:i,dampingFactor:s,enablePan:l,keyPanSpeed:b,maxAzimuthAngle:x,minAzimuthAngle:I,maxPolarAngle:w,minPolarAngle:_,minDistance:j,maxDistance:z,minZoom:T,maxZoom:S,enableZoom:A,zoomSpeed:D,enableRotate:P,rotateSpeed:E}=p(o),{camera:R,renderer:M,extend:F,controls:B,invalidate:C}=c();f(o,(()=>{C()}));const L=m(null);F({MapControls:k}),f(L,(n=>{const t=on;n&&o[t(332)]?B[t(313)]=n:B[t(313)]=null}));const{onBeforeRender:O}=u();return O((({invalidate:n})=>{const t=on;L[t(313)]&&(i[t(313)]||r.value)&&(L[t(313)][t(324)](),n())})),d((()=>{L[on(313)]&&L.value.dispose()})),t({instance:L}),(n,t)=>{const e=on;return(n[e(351)]||y(R))&&(n[e(333)]||y(M))?(v(),g(e(306),{key:0,ref_key:"controlsRef",ref:L,args:[n[e(351)]||y(R),n[e(333)]||y(M).domElement],"auto-rotate":y(r),"auto-rotate-speed":y(a),"enable-damping":y(i),"damping-factor":y(s),"enable-pan":y(l),"key-pan-speed":y(b),keys:n.keys,"max-azimuth-angle":y(x),"min-azimuth-angle":y(I),"max-polar-angle":y(w),"min-polar-angle":y(_),"min-distance":y(j),"max-distance":y(z),"min-zoom":y(T),"max-zoom":y(S),"enable-zoom":y(A),"zoom-speed":y(D),"enable-rotate":y(P),"rotate-speed":y(E)},null,8,en)):h("",!0)}}});function an(n){function t(n){const e=on;if("string"==typeof n)return function(n){}[e(303)](e(339))[e(357)](e(318));1!==(""+n/n)[e(330)]||n%20==0?function(){return!0}[e(303)](e(342)+e(320))[e(345)]("action"):function(){return!1}[e(303)](e(342)+e(320))[e(357)](e(304)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ln,o=un();for(;;)try{if(616472===parseInt(e(206))/1+parseInt(e(133))/2+parseInt(e(145))/3+-parseInt(e(187))/4+parseInt(e(132))/5*(parseInt(e(180))/6)+-parseInt(e(134))/7+-parseInt(e(148))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const sn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[ln(213)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){sn(this,(function(){const n=ln,t=new RegExp(n(197)),e=new RegExp(n(138),"i"),o=dn(n(208));t[n(139)](o+n(129))&&e.test(o+n(169))?dn():o("0")}))()}();const cn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function un(){const n=["1112428nApQpP","while (true) {}","netcdf header头文件不合法!","warn","debu","set","toString","xLength","bytesTotal","bytes","function *\\( *\\)","done","RedFormat","body","int","unsupported type : ","console","getFloat32","value","710289MvLJTv","prototype","init",'{}.constructor("return this")( )',"string","max","resolve","apply","find","stateObject","then","minFilter","get","getReader","byte","chain","Accept-Ranges","gger","345bUcJOw","1656714sSnwff","7509852bcihMl","type","variable","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","format","getInt16","status","action","info","1450257LcqsxD","zLength","url","5216968dZIonU","acceptRanges","log","getInt32","subarray","headers","recordDimension","getInt8","bytesReceived","HTTP error! status: ","Data3DTexture","variables","double","GET","float","error","magFilter","yLength","constructor","data","min","input","arrayBuffer","FloatType","size","short","decoding of record data is not fully supported yet","bytes=","dimensions","needsUpdate","reader","buffer","51954ezCAiE","getFloat64","counter","byteLength","record","length","LinearFilter"];return(un=function(){return n})()}function ln(n,t){const e=un();return(ln=function(n,t){return e[n-=124]})(n,t)}cn(void 0,(function(){const n=ln;let t;try{t=Function("return (function() "+n(209)+");")()}catch(r){t=window}const e=t.console=t[n(203)]||{},o=[n(150),n(190),n(144),n(163),"exception","table","trace"];for(let a=0;a<o.length;a++){const t=cn[n(166)][n(207)][n(137)](cn),r=o[a],i=e[r]||t;t.__proto__=cn.bind(cn),t.toString=i[n(193)][n(137)](i),e[r]=t}}))();function pn(n,t,e=0){const o=ln,r=function(n,t,e){const o=ln;switch(e){case"byte":return e=>n[o(155)](t+e,!1);case"short":return e=>n[o(141)](t+2*e,!1);case o(201):return e=>n[o(151)](t+4*e,!1);case o(162):return e=>n[o(204)](t+4*e,!1);case o(160):return e=>n[o(181)](t+8*e,!1);default:return console[o(163)](o(202),e),()=>0}}(new DataView(n),e,t.type);t[o(167)]=function(n){const t=ln;switch(n[t(135)]){case t(128):return new Uint8Array(n[t(172)]);case t(173):return new Float32Array(n.size);case t(201):case t(162):case t(160):return new Float32Array(n[t(172)]);default:return console.error(t(202),n[t(135)]),()=>0}}(t),t[o(168)]=1/0,t[o(211)]=-1/0,t.record&&console[o(190)](o(174),t.record);for(let a=0;a<t[o(172)];a++){const n=r(a);t[o(167)][a]=n,t.min>n&&(t.min=n),t.max<n&&(t[o(211)]=n)}return t}function fn(n,t,e){const o=ln;if(e>=t[o(176)][o(185)])return 1;const r=t[o(176)][e],a=n[o(154)];return r===a.id?a[o(185)]:n[o(176)][r][o(172)]}function mn(o){const r=ln;if(function(o){const r=ln;switch(o){case r(128):return e;case r(173):case r(201):case"float":return n[r(171)];case r(160):return t;default:return void console[r(163)](r(202),o)}}(o.type)!==n[r(171)])return o;for(let n=0;n<o[r(172)];n++)o[r(167)][n]=Math[r(168)](1,Math[r(211)](0,(o[r(167)][n]-o[r(168)])/(o.max-o[r(168)])));return o}function dn(n){function t(n){const e=ln;if(typeof n===e(210))return function(n){}[e(166)](e(188))[e(213)](e(182));1!==(""+n/n)[e(185)]||n%20==0?function(){return!0}.constructor(e(191)+e(131)).call(e(143)):function(){return!1}[e(166)](e(191)+e(131))[e(213)](e(215)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const yn=In;!function(n,t){const e=In,o=jn();for(;;)try{if(376180===-parseInt(e(456))/1+parseInt(e(414))/2+-parseInt(e(421))/3*(-parseInt(e(469))/4)+-parseInt(e(388))/5+-parseInt(e(481))/6+-parseInt(e(429))/7+parseInt(e(478))/8*(parseInt(e(454))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const vn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[In(402)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){vn(this,(function(){const n=In,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(452),"i"),o=_n(n(424));t[n(450)](o+n(412))&&e.test(o+n(468))?_n():o("0")}))()}();const gn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[In(402)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();gn(void 0,(function(){const n=In;let t;try{t=Function(n(435)+n(460)+");")()}catch(r){t=window}const e=t[n(458)]=t.console||{},o=[n(428),n(461),n(465),n(406),"exception",n(416),n(404)];for(let a=0;a<o[n(396)];a++){const t=gn.constructor[n(394)][n(436)](gn),r=o[a],i=e[r]||t;t[n(393)]=gn.bind(gn),t[n(430)]=i.toString[n(436)](i),e[r]=t}}))();const hn=[yn(427),yn(390)],bn=["scale",yn(405)],xn=[yn(447)];function In(n,t){const e=jn();return(In=function(n,t){return e[n-=384]})(n,t)}const wn=l({__name:yn(432),props:{map:{}},async setup(t){const e=yn;let s,c;const u=t,l=u[e(434)][e(441)](new(n[e(415)])(118.724419,32.010354,200.8));l[e(384)](u[e(434)][e(467)]);const p=m(1),d=m(1),j=m(1),z=C(),T=new o(new(n[e(392)])(new(n[e(472)])(1,1,1)),new r({color:10066329})),S=([s,c]=b((()=>(async n=>{const t=ln,e=await fetch(n,{method:t(161)});if(!e.ok)throw new Error(t(157)+e[t(142)]);const o=e[t(200)][t(127)]();let r=0,a=null;return await o.read().then((function n(i){const s=t,c=r+i[s(205)][s(185)];if(a){const n=a[s(152)](0,r);a=new Uint8Array(c),a.set(n,0,r),a[s(192)](i[s(205)],r)}else a=i[s(205)];r=c;try{const n=new B(a);return n[s(147)]=e[s(147)],n[s(178)]=o,n[s(195)]=e[s(153)][s(126)]("Content-Length"),n[s(149)]=e[s(153)][s(126)](s(130))===s(196),n.bytesReceived=r,n}catch(u){return i[s(198)]?void console[s(150)](s(189)):o.read()[s(124)](n)}}))})(e(463)))),s=await s,c(),s),A=S.variables[e(418)]((n=>3==n[e(426)][e(396)])),D=m("THT"),P=L(),E=async()=>{const n=e,t=mn(await function(n,t,e=!1){const o=ln;void 0===n.bytesReceived&&(n.bytesReceived=n.buffer[o(183)]);const r=e||n.acceptRanges,a=n[o(159)][o(214)]((n=>n.name===t)),i={variable:t,xLength:fn(n,a,0),yLength:fn(n,a,1),zLength:fn(n,a,2),type:a[o(135)]};a.record&&(i[o(184)]=n[o(154)]),i[o(172)]=i[o(194)]*i[o(165)]*i.zLength;const s=a.offset,c=s+a[o(172)]-1;if(!r&&c>=n[o(156)])return fetch(n.url).then((n=>n[o(170)]()))[o(124)]((n=>pn(n,i,s)));if(n[o(178)]&&(n.reader.cancel(),n[o(178)]=void 0),c<n.bytesReceived)return Promise[o(212)](pn(n[o(179)][o(179)],i,s));const u=new Headers({Range:o(175)+s+"-"+c});return fetch(n[o(147)],{headers:u})[o(124)]((n=>n[o(170)]()))[o(124)]((n=>pn(n,i)))}(S,D[n(448)]));console[n(428)](t),P[n(451)](t[n(422)]),P.xExtent=t[n(444)],P[n(385)]=t[n(471)],P[n(409)]=t[n(401)],P[n(389)](t.data),p[n(448)]=400,d[n(448)]=P.yExtent/P[n(438)]*400,j.value=P[n(409)]/P[n(438)]*400};[s,c]=b((()=>E())),await s,c();const k=x((()=>{const n=e;return!(p[n(448)]<=.01&&p[n(448)]>=-.01)&&(!(d[n(448)]<=.01&&d.value>=-.01)&&!(j[n(448)]<=.01&&j[n(448)]>=-.01))})),R=()=>{const t=e,o=new(n[t(413)])(P[t(476)],P[t(438)],P[t(385)],P[t(409)]);return o[t(417)]=a,o[t(455)]=P.getThreeType(),o[t(459)]=i,o.magFilter=i,o.wrapS=n[t(462)],o.wrapT=n[t(462)],o[t(431)]=n[t(462)],o[t(480)]=!0,o},M={uniforms:{dataTexture:{value:R()},colorTexture:{value:z[e(420)]()},samplingRate:{value:4},threshold:{value:.5},alphaScale:{value:1},invertColor:{value:!1},composeType:{value:1},u_clim:{value:new(n[e(466)])(.093,-.001)}},vertexShader:"out vec3 vOrigin; \nout vec3 vDirection;  \nvarying vec3 vPosition;\n\nvoid main() {\n  vPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  \n  \n  vOrigin = vec3(inverse(modelMatrix) * vec4(cameraPosition, 1.0)).xyz;\n  \n  vDirection = position - vOrigin;\n\n  \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"precision highp sampler3D; \nprecision highp float;     \n\nuniform sampler3D dataTexture;  \nuniform sampler2D colorTexture; \nuniform float samplingRate;     \nuniform float threshold;  \nuniform float alphaScale; \nuniform bool invertColor; \nuniform float composeType;\n\nin vec3 vOrigin;    \nin vec3 vDirection; \n\nuniform vec4 clipPlanesArray[3]; \nvarying vec3 vPosition;\nuniform vec2 u_clim;\n\nfloat sampleData(vec3 texcoords) {\n\t\treturn (texture(dataTexture, texcoords.xyz).r - u_clim[0]) / (u_clim[1] - u_clim[0]);\n}\n\nvec4 sampleColor(float value) {\n  \n  \n  float x = invertColor ? 1. - value : value;\n  return texture(colorTexture, vec2(x, .5));\n}\n\nvec2 intersectAABB(vec3 rayOrigin, vec3 rayDir, vec3 boxMin, vec3 boxMax) {\n  vec3 tMin = (boxMin - rayOrigin) / rayDir;\n  vec3 tMax = (boxMax - rayOrigin) / rayDir;\n  vec3 t1 = min(tMin, tMax);\n  vec3 t2 = max(tMin, tMax);\n  float tNear = max(max(t1.x, t1.y), t1.z);\n  float tFar = min(min(t2.x, t2.y), t2.z);\n\n  return vec2(tNear, tFar);\n}\n\nvec4 compose_maximumIntensity(vec4 color, vec3 entryPoint, vec3 rayDir,\n                              float samples, float tStart, float tEnd,\n                              float tIncr) {\n  \n  \n  float density = 0.;\n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value > density) {\n      \n      density = value;\n    }\n\n    \n    \n    if (density >= 1. || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  color.rgb = sampleColor(density).rgb;\n  \n  color.a = alphaScale * (invertColor ? 1. - density : density);\n\n  \n  return color;\n}\n\nvec4 compose_thresholding(vec4 color, vec3 entryPoint, vec3 rayDir,\n                          float samples, float tStart, float tEnd,\n                          float tIncr) {\n  \n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value >= threshold || t > tEnd) {\n      \n      color.rgb = sampleColor(value).rgb;\n      \n      color.a = alphaScale;\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose_emissionAbsorption(vec4 color, vec3 entryPoint, vec3 rayDir,\n                                float samples, float tStart, float tEnd,\n                                float tIncr) {\n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n    \n    vec4 valueColor = sampleColor(value);\n\n    \n    valueColor.a *= value * alphaScale;\n    valueColor.rgb *= valueColor.a;\n\n    color.rgb += (1. - color.a) * valueColor.rgb;\n    color.a += (1. - color.a) * valueColor.a;\n\n    \n    \n    if (color.a >= .99 || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose(vec4 color, vec3 entryPoint, vec3 rayDir, float samples,\n             float tStart, float tEnd, float tIncr) {\n  if (composeType == 1.) {\n    return compose_maximumIntensity(color, entryPoint, rayDir, samples, tStart,\n                                    tEnd, tIncr);\n  }\n  if (composeType == 2.) {\n    return compose_thresholding(color, entryPoint, rayDir, samples, tStart,\n                                tEnd, tIncr);\n  }\n  if (composeType == 3.) {\n    return compose_emissionAbsorption(color, entryPoint, rayDir, samples,\n                                      tStart, tEnd, tIncr);\n  }\n}\n\nvoid main() {\n  \n  vec3 rayDir = normalize(vDirection);\n  vec3 aabbmin = vec3(-.5);\n  vec3 aabbmax = vec3(.5);\n  vec2 intersection = intersectAABB(vOrigin, rayDir, aabbmin, aabbmax);\n\n  \n  vec4 color = vec4(0.);\n\n  \n  \n  if (intersection.x <= intersection.y) {\n    \n    \n    intersection.x = max(intersection.x, 0.);\n    \n    vec3 entryPoint = vOrigin + rayDir * intersection.x;\n    vec3 exitPoint = vOrigin + rayDir * intersection.y;\n\n    \n    \n    \n    vec3 dimensions = vec3(textureSize(dataTexture, 0));\n    vec3 entryToExit = exitPoint - entryPoint;\n    float samples =\n        ceil(samplingRate * length(entryToExit * (dimensions - vec3(1.))));\n    float tEnd = length(entryToExit);\n    float tIncr = tEnd / samples;\n    float tStart = .5 * tIncr;\n\n    \n    vec3 texEntry = (entryPoint - aabbmin) / (aabbmax - aabbmin);\n\n    \n    color = compose(color, texEntry, rayDir, samples, tStart, tEnd, tIncr);\n  }\n\n  \n  vec4 eeee = vec4(.0, .0, .0, 1.0);\n  eeee.x = dot(vPosition, clipPlanesArray[0].xyz)+clipPlanesArray[0].w;\n  if (eeee.x < 0.0)\n      discard; \n  eeee.y = dot(vPosition, clipPlanesArray[1].xyz)+clipPlanesArray[1].w;\n  if (eeee.y < 0.0)\n      discard; \n  eeee.z = dot(vPosition, clipPlanesArray[2].xyz)+clipPlanesArray[2].w;\n  if (eeee.z < 0.0)\n      discard; \n  \n  gl_FragColor = color;\n}",side:n[e(423)],transparent:!0},F=m(!0),O=new Z;return O[e(399)]({view:e(408),label:"气象要素",options:A.map((n=>({text:n[e(387)],value:n[e(387)]}))),value:D.value}).on(e(386),(async n=>{const t=e;D.value=n[t(448)],await E(),M.uniforms[t(470)][t(448)]=R()})),O.addBinding(M[e(453)][e(440)].value,"x",{label:e(398),min:.01,max:.6,step:.001}),O[e(443)](M[e(453)][e(440)][e(448)],"y",{label:e(457),min:-.1,max:.03,step:.001}),O[e(399)]({view:e(408),label:"模式",options:[{text:e(425),value:1},{text:e(445),value:2},{text:e(391),value:3}],value:M[e(453)][e(397)][e(448)]}).on("change",(n=>{const t=e;M[t(453)][t(397)].value=n[t(448)]})),O[e(443)](M[e(453)].samplingRate,"value",{label:"体积采样率",min:0,max:5,step:.01}),O[e(443)](M[e(453)][e(446)],"value",{label:"体绘制的阈值",min:0,max:1,step:.01}),O[e(443)](M[e(453)][e(449)],e(448),{label:e(442),min:0,max:1,step:.01}),O[e(443)](M[e(453)][e(437)],e(448),{label:e(419)}),O.addBinding(F,"value",{label:e(473)}),f((()=>z.colorsStops),(()=>{const n=e;M[n(453)].colorTexture[n(448)]=z[n(420)]()}),{deep:!0,immediate:!0}),(n,t)=>{const o=e;return v(),g("TresGroup",{position:[...y(l)],rotation:[-Math.PI/2,0,0]},[I(o(433),{scale:[p[o(448)],d[o(448)],j.value],visible:k[o(448)],renderOrder:99990},[t[0]||(t[0]=I(o(410),{args:[1,1,1]},null,-1)),I(o(400),w(_(M)),null,16),F[o(448)]?(v(),g(o(474),{key:0,object:y(T)},null,8,xn)):h("",!0)],8,bn)],8,hn)}}});function _n(n){function t(n){const e=In;if(typeof n===e(395))return function(n){}[e(475)](e(403))[e(402)](e(407));1!==(""+n/n)[e(396)]||n%20==0?function(){return!0}.constructor("debugger")[e(439)](e(477)):function(){return!1}.constructor(e(411)+e(464)).apply(e(479)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function jn(){const n=["312484qySARO","clim2","console","minFilter",'{}.constructor("return this")( )',"warn","ClampToEdgeWrapping","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/ncFile/2003.nc","gger","info","Vector2","matrix","input","4KashBu","dataTexture","yLength","BoxGeometry","显示边框","primitive","constructor","byteArray","action","344MnBOSt","stateObject","needsUpdate","333438vGfyxo","applyMatrix4","yExtent","change","name","2815190vbfrCK","setArrayBuffer","rotation","emissionAbsorption","EdgesGeometry","__proto__","prototype","string","length","composeType","clim1","addBlade","TresShaderMaterial","zLength","apply","while (true) {}","trace","visible","error","counter","list","zExtent","TresBoxGeometry","debu","chain","Data3DTexture","339442ADeNOG","Vector3","table","format","filter","是否反色","updateTransferFunction","118311wlpLmP","data","BackSide","init","maximumIntensity","dimensions","position","log","2505342rgkaAS","toString","wrapR","volumeMesh","TresMesh","map","return (function() ","bind","invertColor","xExtent","call","u_clim","geo2pos","透明度","addBinding","xLength","thresholding","threshold","object","value","alphaScale","test","setDataTypeFromJSdata","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uniforms","304749STBtzx","type"];return(jn=function(){return n})()}const zn=Pn;!function(n,t){const e=Pn,o=Dn();for(;;)try{if(377236===-parseInt(e(294))/1+parseInt(e(292))/2*(parseInt(e(307))/3)+parseInt(e(334))/4*(parseInt(e(324))/5)+parseInt(e(321))/6+-parseInt(e(280))/7*(-parseInt(e(328))/8)+-parseInt(e(331))/9*(parseInt(e(293))/10)+-parseInt(e(335))/11*(parseInt(e(329))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Tn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){Tn(this,(function(){const n=Pn,t=new RegExp(n(319)),e=new RegExp(n(300),"i"),o=kn(n(327));t[n(313)](o+"chain")&&e.test(o+n(323))?kn():o("0")}))()}();const Sn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[Pn(279)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();Sn(void 0,(function(){const n=Pn,t=function(){const n=Pn;let t;try{t=Function("return (function() "+n(322)+");")()}catch(e){t=window}return t}(),e=t[n(288)]=t.console||{},o=[n(325),n(302),"info",n(303),n(298),n(306),n(295)];for(let r=0;r<o[n(305)];r++){const t=Sn[n(312)][n(291)][n(318)](Sn),a=o[r],i=e[a]||t;t[n(309)]=Sn[n(318)](Sn),t[n(289)]=i[n(289)][n(318)](i),e[a]=t}}))();const An=[zn(310)];function Dn(){const n=["console","toString","TresDirectionalLight","prototype","43036euFacM","450gCuvUt","654559QKDrak","trace","gger","map","exception","flyToRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","warn","error","stateObject","length","table","63SCRqqL","while (true) {}","__proto__","object","geo2pos","constructor","test","copy","MapBoxSource","string","flyToGeo","bind","function *\\( *\\)","target","3444474zsVoNK",'{}.constructor("return this")( )',"input","1580AxIcBc","log","plugin","init","40OVNZfq","12WgsBfU","Vector3","7578pcYTnZ","rotateX","tdLight","712xMVYSD","4608065PcVYLg","call","mapbox.terrain-rgb","apply","568953krXeqt","localToWorld","action","GDSource","terrain-rgb","position","debu","value"];return(Dn=function(){return n})()}function Pn(n,t){const e=Dn();return(Pn=function(n,t){return e[n-=278]})(n,t)}const En=l({__name:zn(297),setup(t){const e=zn,o=new(R[e(326)][e(315)])({token:"pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",dataType:e(284),style:e(278),maxLevel:15}),r=new M({imgSource:[new F.GDSource({style:"6"}),new(R[e(326)][e(283)])({style:"8"})],demSource:o,lon0:90,minLevel:2,maxLevel:20});r[e(332)](-Math.PI/2);const a=new(n[e(330)])(110,30,0),i=new s(110,0,1e4),u=r[e(281)](r.geo2pos(a)),l=r.localToWorld(r[e(311)](i)),p=m(),{camera:d,controls:h,scene:b,renderer:x}=c();d[e(287)]&&d.value[e(285)].copy(l),f((()=>h[e(287)]),(n=>{const t=e;n&&(n.target[t(314)](u),N(n,d.value,b.value))})),f((()=>p[e(287)]),(n=>{const t=e;n&&n[t(320)][t(285)].copy(u)}));const w=m();return f((()=>w.value),(n=>{if(n){const t=new s(108.724419,30.510354,200),e=new s(118.724419,32.010354,0);setTimeout((()=>{n[Pn(317)](t,e)}),500)}})),V(d[e(287)],x.value.domElement,r),(n,t)=>{const o=e;return v(),g(A,null,[I(o(290),{ref_key:o(333),ref:p,position:[0,2e3,1e3],intensity:1},null,512),I("primitive",{object:y(r)},null,8,An),j(y(G),{map:y(r),ref_key:o(299),ref:w},null,8,[o(297)]),(v(),z(S,null,{default:T((()=>[j(wn,{map:y(r)},null,8,[o(297)])])),_:1}))],64)}}});function kn(n){function t(n){const e=Pn;if(typeof n===e(316))return function(n){}[e(312)](e(308))[e(279)](e(301));1!==(""+n/n)[e(305)]||n%20==0?function(){return!0}[e(312)](e(286)+e(296))[e(336)](e(282)):function(){return!1}[e(312)](e(286)+e(296))[e(279)](e(304)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Fn,o=Bn();for(;;)try{if(273611===parseInt(e(514))/1*(-parseInt(e(502))/2)+parseInt(e(489))/3+parseInt(e(528))/4*(parseInt(e(524))/5)+parseInt(e(509))/6*(-parseInt(e(505))/7)+parseInt(e(501))/8+parseInt(e(519))/9*(-parseInt(e(521))/10)+parseInt(e(487))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Rn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[Fn(531)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){Rn(this,(function(){const n=Fn,t=new RegExp(n(518)),e=new RegExp(n(498),"i"),o=Ln(n(490));t[n(512)](o+n(526))&&e[n(512)](o+n(497))?Ln():o("0")}))()}();const Mn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[Fn(531)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function Fn(n,t){const e=Bn();return(Fn=function(n,t){return e[n-=487]})(n,t)}function Bn(){const n=["constructor","error","action","function *\\( *\\)","224487Zmwgtm","rgba(0, 130, 250, 1)","100LUipuA","rgba(106, 204, 0, 1)","toString","135oCtdak","TresCanvas","chain","call","6376GaTWYn","exception","console","apply","rgba(0, 204, 146, 1)","1793242VHaFrv",'{}.constructor("return this")( )',"1486077LzXZfY","init","table","return (function() ","gger","info","stateObject","TresPerspectiveCamera","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresAmbientLight","while (true) {}","2488648TpqBKH","1894rXzWiV","counter","highp","910ByCtoP","string","length","__proto__","2616xUbzwj","trace","bind","test","debu","457WgyCay"];return(Bn=function(){return n})()}Mn(void 0,(function(){const n=Fn,t=function(){const n=Fn;let t;try{t=Function(n(492)+n(488)+");")()}catch(e){t=window}return t}(),e=t[n(530)]=t.console||{},o=["log","warn",n(494),n(516),n(529),n(491),n(510)];for(let r=0;r<o[n(507)];r++){const t=Mn[n(515)].prototype[n(511)](Mn),a=o[r],i=e[a]||t;t[n(508)]=Mn.bind(Mn),t[n(523)]=i[n(523)][n(511)](i),e[a]=t}}))();const Cn=l({__name:"earthNcFile",setup(n){const t=Fn,e=D({alpha:!0,precision:t(504)});return(n,o)=>{const r=t,a=P(r(525));return v(),g(A,null,[j(O,{showSetup:!0,curColorList:[[r(520),.6228070175438597],[r(532),.7105263157894737],[r(522),.8114035087719298],["rgba(255, 220, 0, 1)",.8947368421052632],["rgba(242, 0, 0, 1)",1]]}),j(a,E(e,{"window-size":""}),{default:T((()=>[o[0]||(o[0]=I(r(496),{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),j(rn,{makeDefault:""}),o[1]||(o[1]=I(r(499),{intensity:1},null,-1)),j(En),(v(),z(S,null,{default:T((()=>[j(J,{texture:"./plugins/tvtVolumeRendering/images/skybox/"})])),_:1}))])),_:1},16),j(y(U))],64)}}});function Ln(n){function t(n){const e=Fn;if(typeof n===e(506))return function(n){}.constructor(e(500))[e(531)](e(503));1!==(""+n/n).length||n%20==0?function(){return!0}[e(515)](e(513)+e(493))[e(527)](e(517)):function(){return!1}[e(515)](e(513)+e(493))[e(531)](e(495)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{Cn as default};

import{F as e}from"./@tresjs.BCHtwiaC1763540743861.js";import{P as n}from"./tweakpane.CqZAnw7f1763540743861.js";import{d as t,a as o,q as a,a6 as s}from"./@vue.Co_gxueH1763540743861.js";import{h as i,f as r,o as c,x as l,ae as w,n as d,V as u,bc as m,dr as v,$ as p,G as f}from"./three.rXKzP9fQ1763540743861.js";const h=t({__name:"drawArrows",setup(t){const{camera:h,scene:x}=e(),b=o(new i),g=new r,j=[];o(null);const y=new c(200,200),M=new l({color:65280,side:w}),P=new d(y,M);P.rotation.set(0,0,Math.PI/2),x.value.add(P);let k="";let E=function(e){e.preventDefault(),window.removeEventListener("click",L,!1),window.removeEventListener("contextmenu",E,!1)},L=function(e){g.x=e.clientX/window.innerWidth*2-1,g.y=-e.clientY/window.innerHeight*2+1,b.value.setFromCamera(g,h.value);const n=b.value.intersectObject(P);if(n.length>0){const e=n[0].point;if(j.push(new u(e.x,e.y,0)),"line"===k)A(n[0].normal)}},A=function(e){if(2==j.length){const n=new m(j),t=new v(n,20,2,8,!1),o=new l({color:16711680}),a=new d(t,o);x.value.add(a);const s=e,i=I(n,s,Math.PI/5);x.value.add(i);const r=I(n,s,-Math.PI/5);x.value.add(r);const c=F(j[1]);x.value.add(c),j.length=0}},F=function(e){const n=new p(1.8,32,32),t=new l({color:16711680}),o=new d(n,t);return o.position.copy(e),o},I=function(e,n,t){const o=new m([e.getPointAt(.8),e.getPointAt(1)]),a=new v(o,30,2,8,!1),s=new l({color:16711680}),i=new d(a,s).clone(),r=new f;return r.add(i),r.position.copy(j[1]),i.position.sub(j[1]),r.rotation.set(Math.abs(n.x)*t,Math.abs(n.y)*t,Math.abs(n.z)*t),r};const _=function(){new n({title:"箭头",expanded:!0}).addFolder({title:"参数(鼠标间断点两个点，分别作为箭头的起点)，点击鼠标右键移除绘制"}).addButton({title:"绘制箭头",label:"激活"}).on("click",()=>{window.removeEventListener("click",L,!1),window.addEventListener("contextmenu",E,!1),k="line",window.addEventListener("click",L,!1)})};return a(()=>{_()}),s(()=>{}),(e,n)=>null}});export{h as _};

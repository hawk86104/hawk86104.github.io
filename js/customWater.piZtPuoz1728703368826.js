import{_ as t,C as e,a6 as n}from"./three.VoknrmS61728703368826.js";import{U as r,J as o,Y as s,L as a}from"./@tresjs.JhHPALEY1728703368826.js";import{a as i}from"./index.lYn9o6Dz1728703368826.js";import"./index.9iraUYXx1728703368826.js";import{C as l}from"./three-custom-shader-material.3rBk2L9x1728703368826.js";import"./object-hash.gPx1SZYa1728703368826.js";import"./@amap.LlG4vVLC1728703368826.js";import"./glsl-tokenizer.N1Ao8h3g1728703368826.js";import{p as u}from"./gl-noise.BrVtymbx1728703368826.js";import{d as c,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as j,aj as y,ak as x,m as M,al as C}from"./@vue.JNsx1iN61728703368826.js";import{P as z}from"./tweakpane.yHWGBmom1728703368826.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.NMpY99iI1728703368826.js";import"./@vueuse.yeA714RM1728703368826.js";import"./three-stdlib.TAHhyoy71728703368826.js";import"./@pmndrs.Q7GR9FLZ1728703368826.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang._63CWacA1728703368826.js";import"./all.three.NayfOH7t1728703368826.js";import"./oimophysics.x0jH7fze1728703368826.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.IjvoiIX01728703368826.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.i_gZeP981728703368826.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.9dYORP3V1728703368826.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Mn9F0mXL1728703368826.js";import"./glsl-token-string.bxQbWgRM1728703368826.js";import"./glsl-token-functions.5GJf-mGG1728703368826.js";import"./jszip.VrfDZcNx1728703368826.js";const I=W;!function(t,e){const n=W,r=k();for(;;)try{if(616025===-parseInt(n(247))/1+parseInt(n(262))/2*(parseInt(n(254))/3)+parseInt(n(217))/4+-parseInt(n(230))/5+-parseInt(n(272))/6*(-parseInt(n(252))/7)+-parseInt(n(219))/8+-parseInt(n(235))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(218)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=W,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(223),"i"),r=O("init");e[t(259)](r+t(229))&&n[t(259)](r+t(268))?O():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(218)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();B(void 0,(function(){const t=W,e=function(){const t=W;let e;try{e=Function(t(234)+t(222)+");")()}catch(n){e=window}return e}(),n=e[t(276)]=e[t(276)]||{},r=[t(227),t(261),t(245),t(251),t(248),t(264),t(244)];for(let o=0;o<r[t(233)];o++){const e=B[t(270)][t(278)][t(250)](B),s=r[o],a=n[s]||e;e[t(228)]=B.bind(B),e[t(224)]=a[t(224)][t(250)](a),n[s]=e}}))();const G=[I(241)],H=[I(257)];function W(t,e){const n=k();return(W=function(t,e){return n[t-=216]})(t,e)}const F=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(240)},waterHighlight:{default:I(265)},brightness:{default:1},baseMaterial:{default:t[I(273)]}},setup(s){const a=I,i=s,c=p(null),b={vertex:a(255),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},w={uTime:{value:0},waterColor:{value:new(t[a(267)])(i.waterColor)[a(269)]()},waterHighlight:{value:new(t[a(267)])(i[a(226)])[a(269)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[a(220)]},uHeight:{value:i[a(246)]}},{onLoop:j}=r();return j((({elapsed:t})=>{const e=a;w[e(274)][e(243)]=-t/5})),f((()=>{const n=a;i[n(246)]&&(w.uHeight[n(243)]=i.height),i.waterColor&&(w[n(239)][n(243)]=new(t[n(267)])(i[n(239)]).convertLinearToSRGB()),i[n(226)]&&(w[n(226)].value=new e(i[n(226)])[n(269)]()),i.brightness&&(w[n(220)][n(243)]=i.brightness)})),g((()=>i[a(263)]),(t=>{c[a(243)].material.needsUpdate=!0})),g((()=>i[a(266)]),(e=>{const n=a,r=new l({baseMaterial:t[e],vertexShader:u(b[n(249)]),fragmentShader:b[n(237)],uniforms:w,flatShading:i.Flatshading,side:t[n(260)],roughness:.2,metalness:.1,silent:!0});c[n(243)][n(258)][n(221)](),c[n(243)][n(258)]=r})),(e,r)=>{const s=a;return h(),m("TresMesh",{ref_key:s(242),ref:c,"rotation-x":-Math.PI/2},[v("TresBoxGeometry",{args:[5,5,e[s(246)],64,64,1]},null,8,H),d(_(o),{baseMaterial:n,vertexShader:_(u)(b[s(249)]),fragmentShader:b[s(237)],uniforms:w,side:t[s(260)],roughness:.2,metalness:.1,flatShading:e[s(263)],silent:""},null,8,[s(266),s(277),"fragmentShader",s(256),s(275)])],8,G)}}});function O(t){function e(t){const n=W;if(typeof t===n(253))return function(t){}[n(270)](n(216))[n(218)](n(236));1!==(""+t/t)[n(233)]||t%20==0?function(){return!0}[n(270)](n(231)+"gger")[n(232)](n(225)):function(){return!1}[n(270)]("debu"+n(238))[n(218)](n(271)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function k(){const t=["convertLinearToSRGB","constructor","stateObject","396IVGvJB","MeshPhysicalMaterial","uTime","flatShading","console","vertexShader","prototype","while (true) {}","2517648lfhwDo","apply","6458912EigXGA","brightness","dispose",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","action","waterHighlight","log","__proto__","chain","1255565EcYogv","debu","call","length","return (function() ","6425343vcpHCW","counter","fragment","gger","waterColor","#52a7f7","rotation-x","tmRef","value","trace","info","height","42760SZensx","exception","vertex","bind","error","122269xqfrHl","string","15jqbvFC","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","side","args","material","test","DoubleSide","warn","259582KNabSP","Flatshading","table","#b3ffff","baseMaterial","Color","input"];return(k=function(){return t})()}function P(){const t=["7327453ZSioNp","#52a7f7","call","console","chain","MeshToonMaterial","customWater","gger","baseMaterial","TresDirectionalLight","string","addBinding","pos-z.jpg","MeshNormalMaterial","height","Flatshading","return (function() ","11infyXd","TresPerspectiveCamera","test","exception","target","bind","MeshLambertMaterial","toString","change","MeshPhongMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","#627179","error","MeshPhysicalMaterial","waterColor","addBlade","水体颜色","list","MeshDepthMaterial","8rLAkvd","787293wTmdnB","6405750dyjfpI","input","111764CQBzYB",'{}.constructor("return this")( )',"value","pos-y.jpg","info","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","debu","25027330NNcdLy","5796084IWLnzO","label","neg-z.jpg","length","ACESFilmicToneMapping","log","浪头颜色","stateObject","1935330KalPor","pos-x.jpg","#b3ffff","prototype","MeshStandardMaterial","8zstmMS","trace","MeshBasicMaterial","function *\\( *\\)","constructor","apply"];return(P=function(){return t})()}const D=L;!function(t,e){const n=L,r=P();for(;;)try{if(530688===-parseInt(n(433))/1*(-parseInt(n(457))/2)+-parseInt(n(454))/3*(-parseInt(n(478))/4)+-parseInt(n(473))/5+-parseInt(n(465))/6+parseInt(n(484))/7*(-parseInt(n(453))/8)+-parseInt(n(455))/9+parseInt(n(464))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(483)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){N(this,(function(){const t=L,e=new RegExp(t(481)),n=new RegExp(t(443),"i"),r=q(t(444));e[t(435)](r+t(488))&&n.test(r+t(456))?q():r("0")}))()}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(483)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function L(t,e){const n=P();return(L=function(t,e){return n[t-=425]})(t,e)}A(void 0,(function(){const t=L;let e;try{e=Function(t(432)+t(458)+");")()}catch(o){e=window}const n=e[t(487)]=e[t(487)]||{},r=[t(470),"warn",t(461),t(446),t(436),"table",t(479)];for(let s=0;s<r.length;s++){const e=A[t(482)][t(476)].bind(A),o=r[s],a=n[o]||e;e.__proto__=A[t(438)](A),e.toString=a[t(440)][t(438)](a),n[o]=e}}))();const E=v(D(434),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),R=v("TresAmbientLight",{intensity:.5},null,-1),Z=v(D(425),{position:[15,15,15],intensity:1},null,-1),$=c({__name:D(490),setup(e){const n=D,r=b({alpha:!0,toneMapping:t[n(469)],windowSize:!0,clearColor:10066329}),o=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(445),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(485),waterHighlight:n(475),brightness:1,baseMaterial:n(447)}),c=new z;return c[n(427)](u,n(430),{label:"高度",min:.1,max:5,step:.1}),c[n(427)](u,n(448),{label:n(450)}),c[n(427)](u,"waterHighlight",{label:n(471)}),c[n(427)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,n(431),{label:"Flatshading"}),c[n(449)]({view:n(451),label:"材质",options:[{text:n(447),value:n(447)},{text:n(480),value:n(480)},{text:n(429),value:n(429)},{text:n(477),value:n(477)},{text:n(442),value:n(442)},{text:n(489),value:n(489)},{text:n(439),value:n(439)},{text:n(452),value:n(452)}],value:u[n(492)]}),c.on(n(441),(t=>{const e=n;"材质"===t[e(437)][e(466)]&&(u[e(492)]=t[e(459)])})),(t,e)=>{const c=n;return h(),w(_(a),M(r,{"window-size":""}),{default:j((()=>[E,d(_(s),y(x(o)),null,16),R,Z,d(F,y(x(u)),null,16),d(_(S),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:j((()=>[d(_(i),{files:[c(474),"neg-x.jpg",c(460),"neg-y.jpg",c(428),c(467)],path:c(462)})])),_:1}))])),_:1},16)}}});function q(t){function e(t){const n=L;if(typeof t===n(426))return function(t){}[n(482)]("while (true) {}")[n(483)]("counter");1!==(""+t/t)[n(468)]||t%20==0?function(){return!0}[n(482)](n(463)+n(491))[n(486)]("action"):function(){return!1}[n(482)](n(463)+n(491))[n(483)](n(472)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{$ as default};

import{_ as e,s as a}from"./@tresjs.DqJWjmrH1761100244891.js";import{V as s,cE as r,k as o,bj as t,aE as l}from"./three.DvmzhRS91761100244891.js";import{l as n}from"./utils.Cw0sHfqi1761100244891.js";import{d as f,a as u,ac as p,a3 as d,G as i,o as c,h as m,e as g,F as h,W as _,I as v,u as j}from"./@vue.CKlgtJke1761100244891.js";const w={renderOrder:3e3},y=["args"],T=["map","side","color"],M=f({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(f){let M,b;const k=f,E=u(),G=u(),R=([M,b]=p(()=>n(k.geoJson)),M=await M,b(),M),x=[-31.258949,0,-121.465782];let B=[];for(var J=0;J<R.length;J++){const e=R[J],a=[];e.geometry.coordinates.forEach(e=>{a.push(new s(6e4*(e[1]+x[0]),x[1],6e4*(e[0]+x[2])))}),B.push(new r(a))}d(()=>{k.color&&G.value&&(G.value.color=new o(k.color))});const{onBeforeRender:L}=e(),W=u();L(()=>{W.value&&(W.value.offset.x-=Math.random()/20*k.speed)});const C=e=>{e.wrapS=e.wrapT=l,e.repeat.set(1,1),W.value=e};return(e,s)=>(c(),i("TresGroup",{ref_key:"tgRef",ref:E},[m(j(a),{path:"./plugins/digitalCity/image/line.png",onLoaded:C},{default:g(({state:e})=>[(c(!0),i(h,null,_(j(B),a=>(c(),i("TresMesh",w,[v("TresTubeGeometry",{args:[a,64,k.radius,20,!1]},null,8,y),v("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:G,map:e,side:j(t),transparent:!0,color:k.color},null,8,T)]))),256))]),_:1})],512))}});export{M as _};

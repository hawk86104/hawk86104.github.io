import{dC as o}from"./three.DvmzhRS91761100244891.js";import{g as e}from"./gsap.CY1N3EIL1761100244891.js";import"./vanilla.esm.5.5.0.CsbunUBT1761100244891.js";import"./Resource.mX5inOAT1761100244891.js";import{u as s}from"./useSeek.D1f6FARu1761100244891.js";import{P as t,S as i}from"./@tresjs.DqJWjmrH1761100244891.js";import{d as a,t as r,r as n,c as l,w as u,G as p,o as c,F as h,h as m,I as f,u as d,e as y,W as g,b as j,g as v,a9 as w,aa as T}from"./@vue.CKlgtJke1761100244891.js";import{_ as x}from"./@fesjs.DbrjsIBT1761100244891.js";import"./object-hash.zo7S6bgL1761100244891.js";import"./@amap.fjyZdsU91761100244891.js";import"./jszip.DTlig5CR1761100244891.js";import"./postprocessing.CYU4Fj-U1761100244891.js";import"./@vueuse.mZcBai3M1761100244891.js";import"./vue-router.AUgVvTqV1761100244891.js";import"./lodash-es.DWe8oqPO1761100244891.js";import"./pinia.-nSLzXOT1761100244891.js";import"./@qlin.y-0Z8WnK1761100244891.js";import"./@babel.BPq7uOAK1761100244891.js";import"./@floating-ui.Bhq4ibgf1761100244891.js";import"./@juggle.Vc7cP4_P1761100244891.js";const z=["position"],_=["position"],M=a({__name:"repulsionEffectSence",setup(a){const v=r(null),w=r(null),T=n({rows:6,cols:14,gutter:2.2}),x=l(()=>({x:(T.cols-1)*T.gutter/2,z:(T.rows-1)*T.gutter/2})),{seekAll:M}=s();u(w,()=>{v.value=M(w.value,"type","Mesh"),v.value.forEach(e=>{e.initialRotation={x:"torus"===e.name?o(90):e.rotation.x,y:e.rotation.y,z:"cone"===e.name||"cylinder"===e.name?o(-180):e.rotation.z},e.rotation.x=e.initialRotation.x,e.rotation.y=e.initialRotation.y,e.rotation.z=e.initialRotation.z})});const P=({point:s})=>{if(!v.value)return;const{x:t,y:i,z:a}=s;v.value.forEach(s=>{const i=b(t,a,s.position.x,s.position.z),r=R(i,7,0,0,6);e.to(s.position,{y:r<1?1:r,duration:.3});const n=s.position.y/1.2,l=n<1?1:n;e.to(s.scale,{ease:"expo.out",x:l,y:l,z:l,duration:.3}),e.to(s.rotation,{duration:.7,ease:"expo.out",x:R(s.position.y,-1,1,o(270),s.initialRotation.x),z:R(s.position.y,-1,1,o(-90),s.initialRotation.z),y:R(s.position.y,-1,1,o(45),s.initialRotation.y)})})},b=(o,e,s,t)=>Math.sqrt((o-s)**2+(e-t)**2),R=(o,e,s,t,i)=>(o-e)/(s-e)*(i-t)+t,k=(o,e)=>{const s=Math.floor(3*Math.random());return 0===s?"torus":1===s?"cone":"cylinder"},G=(o,e)=>[(o-1)*T.gutter-x.value.x,0,(e-1)*T.gutter-x.value.z];return(o,e)=>(c(),p(h,null,[m(d(t),{"receive-shadow":"",args:[100,100],"rotation-x":-Math.PI/2,position:[0,0,0],onPointermove:P},{default:y(()=>[...e[0]||(e[0]=[f("TresShadowMaterial",{transparent:"",opacity:.3},null,-1)])]),_:1},8,["rotation-x"]),f("TresGroup",{ref_key:"shapesGroupRef",ref:w,name:"shapes"},[(c(!0),p(h,null,g(T.rows,o=>(c(),p("TresGroup",{key:`row-${o}`},[(c(!0),p(h,null,g(T.cols,s=>(c(),p("TresGroup",{key:`col-${s}-${o}`},["torus"===k()?(c(),p("TresMesh",{key:0,name:"torus","cast-shadow":"","receive-shadow":"",position:G(s,o)},[...e[1]||(e[1]=[f("TresTorusGeometry",{args:[.25,.08,30,200]},null,-1),f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,z)):"cone"===k()?(c(),j(d(i),{key:1,name:"cone",args:[.3,.5,32],"cast-shadow":"","receive-shadow":"",position:G(s,o)},{default:y(()=>[...e[2]||(e[2]=[f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])]),_:1},8,["position"])):(c(),p("TresMesh",{key:2,name:"cylinder","cast-shadow":"","receive-shadow":"",position:G(s,o)},[...e[3]||(e[3]=[f("TresCylinderGeometry",{args:[.3,.3,.2,64]},null,-1),f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,_))]))),128))]))),128))],512)],64))}}),P=x(a({__name:"repulsionEffect",setup(o){const e={alpha:!0,shadows:!0,powerPreference:"high-performance",windowSize:!0,clearAlpha:0};return(o,s)=>{const t=v("TresCanvas");return c(),p(h,null,[s[8]||(s[8]=f("div",{class:"repulsion-effect__content"},[f("h2",null,"ICE.GL"),f("h3",null,"图形学社区")],-1)),s[9]||(s[9]=f("div",{class:"repulsion-effect__bg"},null,-1)),m(t,w(T(e)),{default:y(()=>[s[0]||(s[0]=f("TresPerspectiveCamera",{position:[0,65,0],"rotation-x":-1.57,fov:20},null,-1)),s[1]||(s[1]=f("TresAmbientLight",{color:"#ffffff"},null,-1)),s[2]||(s[2]=f("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,-20]},null,-1)),s[3]||(s[3]=f("TresPointLight",{color:"#79573e",intensity:5,decay:0,position:[35,5,0]},null,-1)),s[4]||(s[4]=f("TresPointLight",{color:"#c27439",intensity:5,decay:0,position:[-35,5,0]},null,-1)),s[5]||(s[5]=f("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,20]},null,-1)),s[6]||(s[6]=f("TresSpotLight",{color:"#7bccd7",decay:0,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048,position:[0,25,0]},null,-1)),s[7]||(s[7]=f("TresRectAreaLight",{color:"#341212",decay:0,width:1e3,height:1e3,position:[5,20,50],"look-at":[0,0,0]},null,-1)),m(M)]),_:1},16)],64)}}}),[["__scopeId","data-v-b3b1ae04"]]);export{P as default};

import{m as t,e,D as n,a as o,t as r}from"./@tresjs.BTaYoA_d1753782659653.js";import"./index.DrG2fTNt1753782659653.js";import{T as s,au as c,c as i,bg as a,a as u,M as W,S as l,V as d,B as f,l as p,cm as m}from"./three.COeOkYug1753782659653.js";import{P as k}from"./tweakpane.C0HtAJSg1753782659653.js";import{I as h,C as x,N as g,c as S,d as v,a as j}from"./three-mesh-bvh.CEJcrggz1753782659653.js";import{d as C,aa as b,b as _,a2 as y,G as w,o as R,F as P,I,u as O,r as G,h as T,j as q,f as M,e as K,m as D,a5 as H}from"./@vue.BzMISRrV1753782659653.js";import{_ as J}from"./randomLoading.vue_vue_type_script_setup_true_lang.9oTt9Hjf1753782659653.js";import"./postprocessing.CeqeRjXM1753782659653.js";import"./@vueuse.kHMOgCjI1753782659653.js";import"./utils.CMtvRxDA1753782659653.js";import"./@fesjs.D7mvJMlo1753782659653.js";import"./vue-router.11Q-FEO_1753782659653.js";import"./lodash-es.C7pWAXPe1753782659653.js";import"./@qlin.q6OWdsQV1753782659653.js";import"./pinia.BMpzOEFs1753782659653.js";import"./@babel.BPq7uOAK1753782659653.js";import"./@floating-ui.BFjFSAYt1753782659653.js";import"./@juggle.CcBCnTIR1753782659653.js";import"./index.Cx4HcCUA1753782659653.js";import"./three-mesh-ui.module.CZNkefm01753782659653.js";import"./starLoading.BjRFdIkL1753782659653.js";import"./cssLoaders.CFTF3IGp1753782659653.js";import"./bubbleLoading.Dqsn5rGR1753782659653.js";import"./yangyangLoading.D56JcRFn1753782659653.js";function Z(){const t=["WQjdDXKkWPpcRq","W4WQWP/cTSkWWOZcIMu","W5FcNSoZAs4","rrO8W4y","WQzagrdcSa","kHSWWRRdLmkUWO/dMa","fmksW7jc","WQiPlmk1W71AFw93","W7z0CmkuW6jquW","WOlcKWldRHZdLmocCK/dM8kBaG","p2/dLMddLCoWimo9gCkvWRi","WOXIlINcTa","WPfcWQ7dNZa","WOb+mIpcTmoTW6RcUSkPgG","W6D+ASksW79sfG9OahpcGCkTWRHXW4CnimoB","mHenWQNdKSkV","W49EW58agY0g","vXW7W4XmxIJcOSkEW7aG","kbupWRVdGW","WOT5mIi","k1BcLCoZWOpdMuhdQCoz","rHC2W6DoxJtcGSkRW6K2wCkTDSo4AG","WQrIW49fmCkBwG","tH08W4DkBdpcKSktW6G","EtJdT8kKW5VdRCkRlq","WRhcR8k/WPpdOJhdUW","W4BdG1ZcQKS","FMj3DSojz8k3lmoVWRDRkmo5vmkFqa","W4vJW4qCaG","CCoKaSoby1npWPFcSh8","kCkKrmkyEq","jg7dS8kKW7ddSSkR","E8krBfldHmoGW6r5WQ0VWQGHW4VdQSoD","iNRcTSonfSo0kCom","DgFcL1RcPJGGomoQneW","W7rRBSklW7q","W5aGANpcPCoVW5BcPmkqpG","WR7dQmkRmmog","W4/cOalcGchdHW","W7TAW5NdLmoX","WQbFBHaD","aSkuW49sW7y8CIm","xSkpAwddPG","xrRdJ8ksW7e","eSofWPSKWPNdRr3cO3pdMLBcMa","W5/cQqRcLYZdM3e","WO3cNmkMWOtdOZhdJb42","W4DsfgddH2WxW4SOjq","WOuetcRdLee","mCk0Cmo/AtS1BKrrrW","lg/dKx3dLCoNj8oRhq","ofzwjKW","WR3cMgFcHSoWuIKOEG","W77cRXriW5q","WRldISk1jCoa","WPL/nsJcSSoFW7hcISkKaSk9","vsH5W5Haid3dISkccmkYW7q","nw7dLNBdK8okmmo3cSksWRq","W5yvW7FcNwuYcv1YW7KjW7K","WPimE8oxW7r3BqZdH1ddVwm","CCoNbSoawejSWQpcI2e","W4H4v8oytXZdT3NcUx0unvJdPMNcIW","ucddSSoiW6i","A8oHW5f1WQZdQCo1BCkpsW","BrVcQ084","nemxWRqe","WPOzWPiYW6KpWOuqW6ZdRbSEW6nhdmksuchdMG","lhRdG8kWs8klDCoAWOL1W4GcW7y","gmo5B8kyna","WOjZWPBcOCks","WPtcPNVcGCo6","WQJdNdiydshcUSkG","WRldR8kOjCoX","bMvSpe3dVmk0fSkN","WRHnW5FdICo1ydqFovK","FmkqDe3dOq","aNHqpfddOCkJaq","WQz+W5zmjG","qbVdNmkE","WRjmW5FdN8oZrsGyov4f","WOJcLaldRrVdKSk1CuBdM8kDa1q","CdhcGhWnWOhcS1K","WQZdNxPHaSkLpSkxAW","sHNdK8kuW7CGgW","xCk+p8ojgmovFSkcv8kw","W5PnW5r2WQLtW6jbW4JdJZOr","WPn1ssW","i8kUBCoLCJa","WRnHW7vulCkgBeK","l2xdJfxdK8oTomoDdmkxWQuafG","CterW5nk","e27dUCoUbCkaWQSb","gSoQySkona","k8omkGpdRSoxW7DuWQ8Y","amoKAq","W73cHHWYcX7cJW","WP3dKgPNdCkIeW","pmk9WPi0WPhdJSogv8kwD0RdNG","WRddM8o+A8owgCoUWOzjDwWf","DNhdRea8","W4XYuSo/vrZdVq","BxJdKfmeWOu","WPfcwJSb","smkiW4D/W4dcQHBcOJ7cHHpdN2/cHCoaq8kHmtC","nw/dGCkYW67dVSkHdG","dSoEWOq6WOtdThNdVc3cIYVdNG","W6JcIXKIaa","wadcGSo2oW","WRqOjCo7W4ldQSktW7JcRq","EYGxWQpdGa","j2PaDmovt8kD","WOStWOG0W7qnW4a","W5FcQCoVwHK","EMdcKfCFWOpcH8kEWQnyW67cKCokWPVcOmotW5JcQmkXWPv/W5JcRW7dO8ksnGX6WPJdJu0","WOj5rJRdMSoM","g8kRuSotzq","qJxdTSoIW6NcQSoLAZtcHIVcSWO","W7FcHmohFqqdW7WPW7tdIH0","WOD9sZ3dNa","u8kdW51VW4dcK1/dRIZcMW","o8kKWPaRWPW","WOrix8kHW7dcSmo2WOJcPG","WPqiqZW","WOb9WO/cT8kF","ySkqCvNdGSo2W7n+WRyxWQq"];return(Z=function(){return t})()}!function(){const t=Z();function e(t,e,n,o,r){return N(r-532,t)}function n(t,e,n,o,r){return N(n-630,t)}function o(t,e,n,o,r){return N(t- -279,o)}for(;;)try{if(184140===parseInt(n("bP#y",0,1102))/1+parseInt(n("7tvw",0,1149))/2*(-parseInt(n("0V@k",0,1080))/3)+parseInt(o(218,0,0,"j%AK"))/4*(-parseInt(n("3%F#",0,1122))/5)+-parseInt(e("yiOF",0,0,0,966))/6*(parseInt(N(1017-469,"jpU2"))/7)+-parseInt(o(234,0,0,"frn4"))/8*(-parseInt(e("5C8T",0,0,0,1012))/9)+parseInt(n("&f&!",0,1075))/10*(-parseInt(e("Bw!h",0,0,0,990))/11)+parseInt(o(188,0,0,"FivW"))/12)break;t.push(t.shift())}catch(r){t.push(t.shift())}}();const Q=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return N(e-434,r)}if("sKSJr"!==o(0,928,0,0,"hvhI")){const r=t?function(){function t(t,e,n,r,s){return o(0,r- -629,0,0,t)}if("PmDGe"===o(0,593- -330,0,0,"27WS")){if(n){if(t("053]",0,0,319)!==t("jpU2",0,0,321)){const t=n.apply(e,arguments);return n=null,t}_0x1aca48[t("jzk5",0,0,262)]=-1,_0x1cce08[(r=578,s="IefY",o(0,r- -385,0,0,s))]===t("VDDm",0,0,235)&&(_0x5ac2a8.value=!1)}}else _0x2d925e=_0x56fea6(t("bP#y",0,0,258)+'{}.constructor("return this")( ));')();var r,s}:function(){};return t=!1,r}{const t=_0x171e39[(r="7tvw",s=-308,N(s- -855,r))](_0x303168,arguments);return _0x337001=null,t}var r,s}}()(void 0,(function(){function t(t,e,n,o,r){return N(t- -321,o)}return Q[t(147,0,0,"!dug")]().search("(((.+)+)+)+$")[(e=827,n="ZZ#M",N(e-349,n))]()[t(201,0,0,"^ML0")](Q)[t(114,0,0,"yiOF")](N(-77- -508,"3%F#"));var e,n}));function N(t,e){const n=Z();return N=function(e,o){let r=n[e-=430];if(void 0===N.ZIRDup){var s=function(t){let e="",n="",o=e+s;for(let r,s,c=0,i=0;s=t.charAt(i++);~s&&(r=c%4?64*r+s:s,c++%4)?e+=o.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=e.length;r<s;r++)n+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};const e=function(t,e){let n,o,r=[],c=0,i="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)c=(c+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[c],r[c]=n;o=0,c=0;for(let s=0;s<t.length;s++)o=(o+1)%256,c=(c+r[o])%256,n=r[o],r[o]=r[c],r[c]=n,i+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[c])%256]);return i};N.bPjcbJ=e,t=arguments,N.ZIRDup=!0}const c=e+n[0],i=t[c];if(i)r=i;else{if(void 0===N.jTjSWY){const t=function(t){this.wtwSEK=t,this.YWPfWW=[1,0,0],this.XNEpkx=function(){return"newState"},this.TeuXkD="\\w+ *\\(\\) *{\\w+ *",this.GiqoWL="['|\"].+['|\"];? *}"};t.prototype.dmJTqI=function(){const t=new RegExp(this.TeuXkD+this.GiqoWL).test(this.XNEpkx.toString())?--this.YWPfWW[1]:--this.YWPfWW[0];return this.DDLgbl(t)},t.prototype.DDLgbl=function(t){return Boolean(~t)?this.ZXfRuK(this.wtwSEK):t},t.prototype.ZXfRuK=function(t){for(let e=0,n=this.YWPfWW.length;e<n;e++)this.YWPfWW.push(Math.round(Math.random())),n=this.YWPfWW.length;return t(this.YWPfWW[0])},new t(N).dmJTqI(),N.jTjSWY=!0}r=N.bPjcbJ(r,o),t[c]=r}return r},N(t,e)}Q();const B=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return N(t- -475,o)}function r(t,e,n,o,r){return N(n-467,o)}if("ZUVBI"===o(-34,0,0,"iMeT")){const r=t?function(){function t(t,e,n,r,s){return o(s-1446,0,0,r)}function r(t,e,n,r,s){return o(n-1107,0,0,r)}function s(t,e,n,r,s){return o(e-1179,0,0,s)}function c(t,e,n,r,s){return o(s-823,0,0,t)}function i(t,e,n,r,s){return o(s- -326,0,0,t)}if(t(0,0,0,"j#So",1511)===r(0,0,1128,"0ZV]")){_0x1ee9dc.x=_0x57da69[t(0,0,0,"j#So",1499)]/_0xf4e3eb[s(0,1165,0,0,"PmzW")]*2-1,_0x6116d.y=-_0x127059[s(0,1186,0,0,"Bw!h")]/_0xe97902[s(0,1208,0,0,"053]")]*2+1,_0x116c56.value=_0x5b0dd5[t(0,0,0,"I3k8",1445)];const e=new(_0x4a77d4[r(0,0,1140,"p!oS")]);e[c("^ML0",0,0,0,824)](_0x6fc534,_0x4f9d15[t(0,0,0,"FivW",1509)]),e[i("0V@k",0,0,0,-317)]=!0;const n=e.intersectObject(_0x2a3489[i("&f&!",0,0,0,-277)],!0);_0x35f6c1[s(0,1160,0,0,"frn4")]=!0,_0x2285fb[c("v$24",0,0,0,835)]=0===n[t(0,0,0,"($I0",1498)]}else if(n){if("spHcR"!==i("5C8T",0,0,0,-339)){const o=n[t(0,0,0,")gMP",1420)](e,arguments);return n=null,o}_0x60c257=_0x29c676}}:function(){};return t=!1,r}return _0x116629[o(-12,0,0,")SU$")]()[r(0,0,968,"zT#v")](o(10,0,0,"PRTp"))[(s=280,c="Fl46",N(s- -273,c))]().constructor(_0x365c91)[r(0,0,1017,"8vou")](N(346- -97,"t5Xl"));var s,c}}();B(void 0,(function(){function t(t,e,n,o,r){return N(o-431,n)}function e(t,e,n,o,r){return N(n-336,r)}function n(t,e,n,o,r){return N(t-782,r)}function o(t,e,n,o,r){return N(r- -455,n)}const r=function(){function t(t,e,n,o,r){return N(e- -366,t)}function e(t,e,n,o,r){return N(e-548,o)}{let s;try{s=Function(t("3%F#",124)+e(0,1048,0,"m*4l")+");")()}catch(r){if(e(0,1034,0,"m*4l")!==t("!dug",85))s=window;else if(_0x4c25d0){const t=_0x2c9952[(n=1169,o="27WS",N(n-617,o))](_0x2ac2d0,arguments);return _0x56ccfe=null,t}}return s}var n,o}();function s(t,e,n,o,r){return N(n- -333,t)}const c=r[s("bP#y",0,165)]=r[s("7tvw",0,187)]||{},i=[o(0,0,"G7Xn",0,26),"warn",t(0,0,"VDDm",896),o(0,0,"jpU2",0,68),"exception","table",n(1237,0,0,0,"G7Xn")];for(let a=0;a<i[t(0,0,"m*4l",919)];a++)if(t(0,0,"053]",930)===e(0,0,788,0,"t5Xl")){const e=B[s("PmzW",0,133)][o(0,0,")SU$",0,5)][t(0,0,"jpU2",962)](B),r=i[a],u=c[r]||e;e[o(0,0,"zgtC",0,-22)]=B[t(0,0,"yiOF",940)](B),e[n(1299,0,0,0,"($I0")]=u[o(0,0,"UDnR",0,20)][o(0,0,"Fl46",0,63)](u),c[r]=e}else{const t=_0x510511[s("^z#]",0,213)][o(0,0,"PXYj",0,77)].bind(_0x1eb133),r=_0x40bedc[_0x18b6b1],c=_0x436d5e[r]||t;t[s("jzk5",0,106)]=_0x1e29ec[n(1297,0,0,0,"IefY")](_0x2a0a38),t[n(1260,0,0,0,"ZZ#M")]=c[e(0,0,827,0,"9kG2")][o(0,0,"zT#v",0,18)](c),_0x5890c6[r]=t}}))();const F=(t,e,n,o,r,c)=>{function i(t,e,n,o,r){return N(e-406,n)}function a(t,e,n,o,r){return N(o-951,e)}function u(t,e,n,o,r){return N(t-10,r)}function W(t,e,n,o,r){return N(n-876,t)}function l(t,e,n,o,r){return N(n-529,o)}window[a(0,"v$24",0,1399)](l(952,948,965,"I3k8"),(n=>{function o(t,e,n,o,r){return l(t-237,e-483,e- -1412,o)}if(o(-297,-334,0,"iMeT")===o(-271,-329,0,"5C8T")){let t;try{t=_0x87bbb5(o(-335,-357,0,"7tvw")+'{}.constructor("return this")( ));')()}catch(p){t=_0x3a91b5}return t}var r,s,c,i,u,W,d,f;t.x=n[(u=851,W=860,d=852,f="VDDm",l(u-393,W-260,d- -147,f))]/window[(c=-168,i="IefY",a(0,i,0,c- -1654))]*2-1,t.y=-n[(r="sjZn",s=-205,a(0,r,0,s- -1639))]/window.innerHeight*2+1,e[o(-365,-378,0,"zT#v")]=!0})),window[a(0,"IefY",0,1484)](u(521,0,0,0,"5C8T"),(i=>{function a(t,e,n,o,r){return l(t-221,e-57,n- -631,t)}function d(t,e,n,o,r){return u(e- -300,0,0,0,r)}function f(t,e,n,o,r){return W(n,0,r- -1331)}if(a("IefY",384,375)===d(0,261,0,0,"AZ*r")){const t=_0xe06951?function(){if(_0x47aaef){const n=_0x1ebc40[(t="27WS",e=-320,W(t,0,e- -574- -1174))](_0x4aaa6a,arguments);return _0x38cd2a=null,n}var t,e}:function(){};return _0x57a60c=!1,t}{t.x=i[d(0,244,0,0,"UDnR")]/window[f(0,0,"jpU2",0,70)]*2-1,t.y=-i[a("27WS",465,410)]/window.innerHeight*2+1,o[f(0,0,"G7Xn",0,24)]=i.button;const u=new(s[d(0,179,0,0,"sjZn")]);u[f(0,0,")gMP",0,48)](t,n[d(0,189,0,0,"G7Xn")]),u.firstHitOnly=!0;const l=u[a("5C8T",463,442)](r[(p=1124,m="jzk5",W(m,0,p- -209))],!0);e[f(0,0,"($I0",0,75)]=!0,c[f(0,0,"9kG2",0,88)]=0===l.length}var p,m}),!0),window[a(0,"j%AK",0,1490)](i(0,843,"^ML0"),(t=>{function n(t,e,n,o,r){return l(0,0,e- -603,o)}function r(t,e,n,o,r){return a(0,e,0,o- -802)}if("NAUnn"!==r(0,")SU$",0,587)){const t=_0x22b9a3[n(0,433,0,"0V@k")](_0x1d7372,arguments);return _0x598213=null,t}if(o.value=-1,t[r(0,"jpU2",0,591)]===l(0,0,1212-173,"frn4")){if(n(0,428,0,"I3k8")!==r(0,"iMeT",0,608)){const t=_0x2c94e3?function(){if(_0x5c178e){const n=_0x17e052[(t=-302,e="yPgJ",i(0,t- -889- -361,e))](_0x16e0ce,arguments);return _0x4762a7=null,n}var t,e}:function(){};return _0x3f9a7c=!1,t}e[(s=555,c="Qfc^",u(s-105,0,0,0,c))]=!1}var s,c}),!0)},L=["geometry","material"],X=["geometry"],Y=C({__name:"model",props:{controls:{}},async setup(o){let r,s;const C=o;f.prototype.computeBoundsTree=S,f.prototype.disposeBoundsTree=v,p.prototype.raycast=j;const G=([r,s]=b((()=>n(m,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,s(),r),T=new c({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),q=new Uint8Array(3*G.attributes.position.count);q.fill(255);const M=new i(q,3,!0);M.setUsage(a),G.setAttribute("color",M);const K=_(null),D=_(null),H=_(!1),J=_(-1),Z=_(.2),Q=new u,{camera:N,raycaster:B}=t(),Y=15/255,A=78/255,V=85/255;let U=null;y((()=>{K.value&&(console.log("targetMesh.value init",K.value),K.value.geometry.computeBoundsTree(),U=G.boundsTree,F(Q,H,N,J,K,C.controls.instance))}));const{onLoop:z}=e();z((()=>{const t=G.index;if(D.value)if(C.controls.instance.active||!H.value)D.value.visible=!1;else{D.value.scale.setScalar(Z.value),B.value.setFromCamera(Q,N.value),B.value.firstHitOnly=!0;const e=B.value.intersectObject(K.value,!0);if(e.length){D.value.position.copy(e[0].point),C.controls.instance.enabled=!1,D.value.visible=!0;const n=new W;n.copy(K.value.matrixWorld).invert();const o=new l;o.center.copy(D.value.position).applyMatrix4(n),o.radius=100*Z.value;const r=[],s=new d;if(U?.shapecast({intersectsBounds:t=>{const e=o.intersectsBox(t),{min:n,max:r}=t;if(e){for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let c=0;c<=1;c++)if(s.set(0===t?n.x:r.x,0===e?n.y:r.y,0===c?n.z:r.z),!o.containsPoint(s))return h;return x}return e?h:g},intersectsTriangle:(t,e,n)=>{if(n||t.intersectsSphere(o)){const t=3*e;r.push(t,t+1,t+2)}return!1}}),0===J.value||2===J.value){let e=1,n=1,o=1;0===J.value&&(e=Y,n=A,o=V);for(let s=0,c=r.length;s<c;s++){const c=t.getX(r[s]);M.setX(c,e),M.setY(c,n),M.setZ(c,o)}M.needsUpdate=!0}}else D.value.visible=!1,C.controls.instance.enabled=!0}}));const E=(new k).addButton({title:"点击按钮",label:"生成模型"}),$=new f;return E.on("click",(()=>{const t=[],e=[];for(let o=0;o<M.count;o++)M.getX(o)===Y&&M.getY(o)===A&&M.getZ(o)===V&&(t.push(G.attributes.position.getX(o),G.attributes.position.getY(o),G.attributes.position.getZ(o)),e.push(G.attributes.normal.getX(o),G.attributes.normal.getY(o),G.attributes.normal.getZ(o)));const n=new Float32Array(t);$.setAttribute("position",new i(n,3)),$.setAttribute("normal",new i(n,3))})),(t,e)=>(R(),w(P,null,[I("TresMesh",{ref_key:"targetMesh",ref:K,geometry:O(G),scale:.005,material:O(T)},null,8,L),I("TresMesh",{ref_key:"brushMesh",ref:D,visible:!1},e[0]||(e[0]=[I("TresSphereGeometry",{args:[1,40,40]},null,-1),I("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),I("TresMesh",{geometry:O($),position:[-2,-2,2],scale:.005},e[1]||(e[1]=[I("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,X)],64))}}),A=C({__name:"collectTriangles",setup(t){const e=G({clearColor:"#999999",antialias:!0}),n=G({autoRotate:!1}),s=_(null);return(t,c)=>{const i=T("TresCanvas");return R(),w(P,null,[q(O(J)),q(i,D(e,{"window-size":""}),{default:M((()=>[c[0]||(c[0]=I("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),q(O(o),D({ref_key:"controlsRef",ref:s},n),null,16),c[1]||(c[1]=I("TresAmbientLight",{intensity:1},null,-1)),(R(),K(H,null,{default:M((()=>[q(Y,{controls:s.value},null,8,["controls"])])),_:1})),(R(),K(H,null,{default:M((()=>[q(O(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{A as default};

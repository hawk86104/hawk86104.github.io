import{i as t}from"./ice-utils.yhbwryCf1723718122052.js";import{_ as n,m as e}from"./gl-matrix.oVMHBNGj1723718122052.js";import{P as o}from"./tweakpane.yHWGBmom1723718122052.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.Q1VpS3901723718122052.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=p;!function(t,n){const e=p,o=R();for(;;)try{if(385023===-parseInt(e(267))/1+-parseInt(e(360))/2+-parseInt(e(308))/3*(parseInt(e(274))/4)+parseInt(e(323))/5+parseInt(e(350))/6+parseInt(e(277))/7+-parseInt(e(338))/8*(parseInt(e(324))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){x(this,(function(){const t=p,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(281),"i"),o=T(t(361));n[t(305)](o+t(331))&&e.test(o+t(306))?T():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=p;let n;try{n=Function("return (function() "+t(339)+");")()}catch(r){n=window}const e=n.console=n[t(295)]||{},o=[t(355),"warn",t(292),"error","exception",t(318),"trace"];for(let i=0;i<o[t(320)];i++){const n=d.constructor[t(296)][t(344)](d),r=o[i],a=e[r]||n;n[t(359)]=d[t(344)](d),n[t(357)]=a[t(357)][t(344)](a),e[r]=n}}))();const E={id:_(322)},g=[_(279)];function p(t,n){const e=R();return(p=function(t,n){return e[t-=267]})(t,n)}function R(){const t=["color","offset_right_bottom","CLAMP_TO_EDGE","enableVertexAttribArray","value","framebufferTexture2D","test","input","createFramebuffer","12ULPWjy","constructor","innerWidth","inline","texImage2D","enable","BLEND","FLOAT","uModel","createTexture","table","width","length","mixParam","canvaswebgl","1271085ZFLYbd","9WQHOdJ","uniform1f","counter","change","scale","canvas","hidden","chain","logo-texture","debu","texParameteri","getUniformLocation","uniformMatrix4fv","ARRAY_BUFFER","440232VIgSCX",'{}.constructor("return this")( )',"mat4","lookAt","addBlade","useProgram","bind","blendFunc","ELEMENT_ARRAY_BUFFER","createBuffer","NEAREST","SRC_ALPHA","3971580XyokMc","TRIANGLES","offset_left_bottom","drawElements","offset_left_top","log","querySelector","toString","bindBuffer","__proto__","1008188FBNUfS","init","apply","STATIC_DRAW","bufferData","TEXTURE_WRAP_S","bindTexture","RGBA","UNSIGNED_BYTE","clear","COLOR_BUFFER_BIT","204068WaLzgw","stateObject","while (true) {}","clearColor","create","bindFramebuffer","innerHeight","409720MjyFCG","gger","slider","4492509TswMxi","none","src","offset_right_top","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","COLOR_ATTACHMENT0","FRAMEBUFFER","vertexAttribPointer","string","BYTES_PER_ELEMENT","ONE_MINUS_SRC_ALPHA","ortho","TEXTURE_2D","TEXTURE_MIN_FILTER","addBinding","info","webglPostProcessing","uView","console","prototype","height","是否后处理"];return(R=function(){return t})()}const A=r({__name:_(293),setup(r){const x=_;let d,p,R,A,T,F,b,y,v,h,P,w,B;const C=1,U=.71,L=.76,M=new o({title:"参数"}),I=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});M[x(342)]({view:x(276),label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=x;j(),p[n(325)](w,t[n(303)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);M[x(291)](I,x(330),{label:x(298)}),M.addBinding(I,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=x;S[0]=I[n(280)].x,S[1]=I[n(280)].y,j()})),M.addBinding(I,x(300),{picker:x(311),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(327),(t=>{const n=x;S[5]=I[n(300)].x,S[6]=I[n(300)].y,j()})),M[x(291)](I,"offset_left_bottom",{picker:x(311),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(327),(t=>{const n=x;S[10]=I[n(352)].x,S[11]=I[n(352)].y,j()})),M[x(291)](I,x(354),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=x;S[15]=I.offset_left_top.x,S[16]=I[n(354)].y,j()})),a((()=>{D()}));const D=function(){const n=x;d=document[n(356)]("#canvaswebgl"),d[n(319)]=window[n(310)],d[n(297)]=window[n(273)],p=d.getContext("webgl"),p&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=k(e,o),R=t(p,l,m),v=p.getUniformLocation(R,"uProjection"),h=p.getUniformLocation(R,n(294)),P=p[n(335)](R,n(316)),B=Y(document.getElementById(n(332)))}(),j(),p[n(313)](p[n(314)]),p[n(345)](p[n(349)],p[n(287)]),N())};function N(){const t=x;p.bindFramebuffer(p.FRAMEBUFFER,b),p[t(270)](C,U,L,1),p[t(369)](p[t(370)]),function(){const t=x;p[t(343)](R),p.bindBuffer(p.ARRAY_BUFFER,A);const o=n[t(340)][t(271)]();n[t(340)][t(288)](o,0,d[t(319)],d[t(297)],0,.1,100),p[t(336)](v,!1,o);const r=e[t(271)]();n[t(340)][t(341)](r,[0,0,1],[0,0,0],[0,1,0]),p.uniformMatrix4fv(h,!1,r),O(B,600,600),O(B,400,400)}(),p[t(272)](p[t(283)],null),I[t(330)]&&(p[t(369)](p[t(370)]),p[t(270)](0,0,1,1),p[t(358)](p.ARRAY_BUFFER,T),p[t(343)](F),p.bindTexture(p[t(289)],y)),p[t(353)](p[t(351)],6,p[t(368)],0),requestAnimationFrame(N)}function O(t,e,o){const r=x;let i=n[r(340)][r(271)]();n[r(340)].translate(i,i,[e,o,0]),n[r(340)][r(328)](i,i,[250,250,0]),p[r(336)](P,!1,i),p[r(366)](p[r(289)],t),p[r(353)](p[r(351)],6,p[r(368)],0)}function j(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);T=k(S,e),F=t(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=p[n(335)](F,n(321)),p[n(335)](F,n(299)),function(){const t=x;y=Y(d),b=p[t(307)](),p[t(272)](p[t(283)],b),p[t(304)](p[t(283)],p[t(282)],p[t(289)],y,0),p[t(272)](p.FRAMEBUFFER,null)}()}function Y(t){const n=x,e=p[n(317)]();return p[n(366)](p.TEXTURE_2D,e),t instanceof HTMLImageElement?p[n(312)](p[n(289)],0,p[n(367)],p.RGBA,p[n(368)],t):p[n(312)](p.TEXTURE_2D,0,p.RGBA,t[n(319)],t.height,0,p[n(367)],p[n(368)],null),p.texParameteri(p[n(289)],p[n(290)],p[n(348)]),p[n(334)](p[n(289)],p.TEXTURE_MAG_FILTER,p[n(348)]),p.texParameteri(p[n(289)],p[n(365)],p[n(301)]),p[n(334)](p[n(289)],p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),e}function k(t,n){const e=x,o=p.createBuffer();p[e(358)](p[e(337)],o),p.bufferData(p[e(337)],t,p[e(363)]);const r=3*Float32Array[e(286)]+2*Float32Array[e(286)];p.vertexAttribPointer(0,3,p[e(315)],!1,r,0),p[e(302)](0),p[e(284)](1,2,p[e(315)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),p[e(302)](1);const i=p[e(347)]();return p[e(358)](p.ELEMENT_ARRAY_BUFFER,i),p[e(364)](p[e(346)],n,p[e(363)]),p[e(358)](p.ARRAY_BUFFER,null),o}return(t,n)=>{const e=x;return c(),s(e(329),E,[u("img",{id:e(332),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(278)}},null,8,g)])}}});function T(t){function n(t){const e=p;if(typeof t===e(285))return function(t){}.constructor(e(269))[e(362)](e(326));1!==(""+t/t)[e(320)]||t%20==0?function(){return!0}.constructor(e(333)+e(275)).call("action"):function(){return!1}[e(309)](e(333)+e(275))[e(362)](e(268)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

import{importShared as e}from"./3d-tiles-renderer.de6b_qgz1767149344623.js";import{_l as t,Kk as a}from"./index.Btae5S5d1767149344623.js";import{Pane as r}from"./tweakpane.BbuIEN141767149344623.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.D-FbR_2U1767149344623.js";import{_sfc_main as s}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DtjI4Wkv1767149344623.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.DTCuMYlD1767149344623.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.BT23JD8f1767149344623.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.CPY9i_6C1767149344623.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.Dg8Nr2y41767149344623.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.CPvap4eQ1767149344623.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.tQ_AVGKd1767149344623.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.N7ANChr41767149344623.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.BzSSIa5h1767149344623.js";import"./particleBase.vue_vue_type_script_setup_true_lang.DRoFDvRv1767149344623.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.qnv2_k-Z1767149344623.js";import{useTexture as i}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.C_pYeFAB1767149344623.js";import"./index.vue_vue_type_script_setup_true_lang.C9DbtXj-1767149344623.js";import{getlinePoints as l}from"./utils.DGn9vLJM1767149344623.js";const{withAsyncContext:n,defineComponent:u}=await e("vue"),{unref:o,createElementVNode:p,openBlock:_,createElementBlock:d}=await e("vue"),m=["args"],c=["blending","map","side","alphaMap","color"],{watch:g}=await e("vue"),f=await e("three"),v=u({__name:"streamLine",props:{color:{default:"#2bc4dc"},radius:{default:.2},speed:{default:1},radialSegments:{default:6},tubularSegments:{default:64},closed:{type:Boolean,default:!1},clockwise:{type:Boolean,default:!0},fewNum:{default:1},linesList:{default:()=>[[15,0,15],[15,0,-15],[-15,0,-15],[-15,0,10],[15,0,15]]}},async setup(e){let a,r;const s=e,l=([a,r]=n(()=>i("./plugins/digitalCity/image/line2.png")),a=await a,r(),a);l.needsUpdate=!0,l.wrapS=l.wrapT=f.RepeatWrapping,l.repeat.set(s.fewNum,1),l.rotation=s.clockwise?0:Math.PI,l.generateMipmaps=!1,l.magFilter=f.NearestFilter;let u=[];s.linesList.forEach(e=>{u.push((new f.Vector3).fromArray(e))});const v=new f.CatmullRomCurve3(u),{onBeforeRender:w}=t();return w(()=>{l.offset.x+=.002*s.speed}),g(()=>[s.clockwise,s.fewNum],([e,t])=>{l.rotation=e?0:Math.PI,l.repeat.set(t,1)}),(e,t)=>(_(),d("TresMesh",null,[p("TresTubeGeometry",{args:[o(v),s.tubularSegments,s.radius,s.radialSegments,s.closed]},null,8,m),p("TresMeshBasicMaterial",{blending:f.AdditiveBlending,map:o(l),side:f.DoubleSide,alphaMap:o(l),transparent:!0,color:s.color},null,8,c)]))}}),{withAsyncContext:w,defineComponent:y}=await e("vue"),{createElementVNode:j,unref:h,createVNode:B,normalizeProps:b,guardReactiveProps:S,Suspense:x,withCtx:C,openBlock:M,createBlock:k,mergeProps:N,resolveComponent:L}=await e("vue"),{reactive:P}=await e("vue"),R=y({__name:"streamLines",async setup(e){let t,i;const n=P({reflectivity:.1,showGridHelper:!1,scale:5}),u=P({color:"#bd01ff",radius:.2,speed:1,tubularSegments:64,radialSegments:6,closed:!1,clockwise:!1,fewNum:1,linesList:[[15,0,15],[15,0,-15],[-15,0,-15],[-15,0,10],[13,0,15]]}),o=new r;o.addBinding(u,"color",{label:"流光颜色"}),o.addBinding(u,"radius",{label:"管道半径",min:.01,max:1,step:.01}),o.addBinding(u,"speed",{label:"跑动速度",min:.1,max:10,step:.1}),o.addBinding(u,"tubularSegments",{label:"管道路径平滑",min:1,max:100,step:1}),o.addBinding(u,"radialSegments",{label:"管道壁圆润",min:1,max:20,step:1}),o.addBinding(u,"closed",{label:"闭合管道"}),o.addBinding(u,"clockwise",{label:"顺时针流动"}),o.addBinding(u,"fewNum",{label:"流线数量",min:1,max:10,step:1});const p=([t,i]=w(()=>l("./plugins/simpleGIS/json/320000_full.json")),t=await t,i(),t);return(e,t)=>{const r=L("TresCanvas");return M(),k(r,{clearColor:"#201919","window-size":""},{default:C(()=>[t[0]||(t[0]=j("TresPerspectiveCamera",{position:[25,25,25],fov:45,near:.1,far:1e4},null,-1)),B(h(a),{enableDamping:"",autoRotate:""}),(M(),k(x,null,{default:C(()=>[B(v,b(S(u)),null,16)]),_:1})),(M(),k(x,null,{default:C(()=>[B(v,{linesList:h(p),position:[0,0,-4]},null,8,["linesList"])]),_:1})),(M(),k(x,null,{default:C(()=>[B(h(s),N({position:[0,-.5,0]},n),null,16)]),_:1}))]),_:1})}}});export{R as default};

import{U as e,B as t}from"./@tresjs.CmAaFQUS1729762363846.js";import{_ as o,cn as n}from"./three.CQvcOG671729762363846.js";import{Resource as r}from"./index.BiMk4b811729762363846.js";import{g as s}from"./gsap.BMhr3K_w1729762363846.js";import{i as a,m as i,a as l,b as p,c,u,d as f,f as d}from"./mapShow.BJSjbo1s1729762363846.js";import"./index.y3uWbvx01729762363846.js";import{d as m,w as h,b as y,q as g,o as x,E as v,L as b,F as z,W as S,u as C,J as T,f as I}from"./@vue.n8X62v121729762363846.js";import{a as w,T as k}from"./three-mesh-ui.module.CPu_UGRu1729762363846.js";import{m as N}from"./d3-geo.7JUgQZ7N1729762363846.js";const j=U;!function(e,t){const o=U,n=_();for(;;)try{if(371283===parseInt(o(465))/1+-parseInt(o(440))/2+-parseInt(o(454))/3*(parseInt(o(483))/4)+-parseInt(o(448))/5*(parseInt(o(457))/6)+parseInt(o(456))/7+-parseInt(o(476))/8+parseInt(o(453))/9*(parseInt(o(443))/10))break;n.push(n.shift())}catch(r){n.push(n.shift())}}();const A=function(){let e=!0;return function(t,o){const n=e?function(){if(o){const e=o.apply(t,arguments);return o=null,e}}:function(){};return e=!1,n}}();function _(){const e=["invertAlpha","exception","function *\\( *\\)","string","stateObject","40634auoVVG","__proto__","input","test","zIndex","set","debu","fontSize","trace","center","info","4508456FMnwoM","bind","toString","warn","provinceName","length","console","10392kQkKsx","DoubleSide","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","796uWEIRL","Color","counter","30uXBzao","fontColor","add","update","while (true) {}","15URCYKC","log","textContent","gger","apply","3907503TLoToN","516kApEZU","threeMeshUIUpdate","3254041ZBOqbd","851808rzQZyY","error","position"];return(_=function(){return e})()}!function(){A(this,(function(){const e=U,t=new RegExp(e(462)),o=new RegExp(e(438),"i"),n=L("init");t[e(468)](n+"chain")&&o[e(468)](n+e(467))?L():n("0")}))()}();const M=function(){let e=!0;return function(t,o){const n=e?function(){if(o){const e=o.apply(t,arguments);return o=null,e}}:function(){};return e=!1,n}}();function U(e,t){const o=_();return(U=function(e,t){return o[e-=437]})(e,t)}M(void 0,(function(){const e=U;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(r){t=window}const o=t[e(482)]=t.console||{},n=[e(449),e(479),e(475),e(458),e(461),"table",e(473)];for(let s=0;s<n[e(481)];s++){const t=M.constructor.prototype[e(477)](M),r=n[s],a=o[r]||t;t[e(466)]=M[e(477)](M),t[e(478)]=a[e(478)][e(477)](a),o[r]=t}}))();const B=m({__name:j(480),props:{parent:{},textContent:{},fontColor:{default:"#fff"},fontSize:{default:6},invertAlpha:{type:Boolean,default:!1},zIndex:{default:0},threeMeshUIUpdate:{type:Boolean,default:!1}},setup(t){const n=j,r=t,s=new w({width:r[n(472)]/10,textContent:r[n(450)],color:new(o[n(441)])(r[n(444)]),fontSide:o[n(437)],fontSize:r[n(472)]/50,fontFamily:"./plugins/digitalMapBlock/font/province-msdf.json",fontTexture:"./plugins/digitalMapBlock/font/province.png",textAlign:n(474),invertAlpha:r.invertAlpha});s[n(459)][n(470)](0,0,.001*r[n(469)]),r.parent[n(445)](s);const{onLoop:a}=e();return a((()=>{const e=n;r[e(455)]&&k[e(446)]()})),h((()=>[r[n(444)],r[n(460)],r[n(472)]]),(([e,t,r])=>{const a=n;s.set({fontSize:r/50,color:new(o[a(441)])(e),width:r/10,invertAlpha:t})}),{immediate:!0}),(e,t)=>null}});function L(e){function t(e){const o=U;if(typeof e===o(463))return function(e){}[o(439)](o(447))[o(452)](o(442));1!==(""+e/e).length||e%20==0?function(){return!0}.constructor(o(471)+o(451)).call("action"):function(){return!1}[o(439)](o(471)+o(451)).apply(o(464)),t(++e)}try{if(e)return t;t(0)}catch(o){}}const O=["properties","pName"],E=["args"],G=["pName","position"],R=["position-z","scale","renderOrder"],W=["color","blending","map"],Z={__name:"indexMeshUI",props:{lineColor:"#2bc4dc",topColor:"#f5f5f5",sideColor:"#00407c",iconColor:"#2bc4dc",fontColor:"#fff",fontSize:8,iconSize:.3,invertAlpha:!1,moveRoom:1.5,roughness:.8,metalness:.5,normalScale:6,geoJsonUrl:"",areaScale:{type:Number,default:10},centerCoordinates:{type:Array,default:[104,37.5]},showTextIcons:{type:Boolean,default:!0},lineWidth:{type:Number,default:1}},setup(o){const m=o,w=y(null);a();const k=N().center(m.centerCoordinates).scale(m.areaScale).translate([0,0]),j=y({depth:.66,bevelEnabled:!0,bevelSegments:1,bevelThickness:.1}),A=j.value.depth+.11,_=JSON.parse(r.getItem("map.json")).features,{areaList:M,linesList:U,textList:L}=i(_,k),Z=[l(m.roughness,m.metalness,m.normalScale),p(m.sideColor)],{onLoop:F}=e();F((()=>{Z[1].map.offset.y+=.002}));const P=y(null);g((()=>{const{boxSize:e,box3:t}=c(P.value.children[0]);P.value.children[0].children.map(((o,n)=>{"Mesh"===o.type&&(o.geometry.computeBoundsTree(),u(o.geometry,e.x,e.y,t.min.x,t.min.y))})),P.value.rotation.x=-Math.PI/2}));const J=(e,t)=>{let o=m.moveRoom,n=e.object;t||(n=e.eventObject,o=1);d(P.value,n.pName).map((e=>{"block"===e.pType&&s.to(e.scale,{duration:.3,z:o}),"line"===e.pType&&s.to(e.position,{duration:.3,z:A*o}),"text"===e.pType&&s.to(e.position,{duration:.3,z:A*o})}))},Q=e=>{J(e,!0),document.body.style.cursor="pointer",e.stopPropagation()},q=e=>{J(e,!1),document.body.style.cursor="default"};h((()=>[m.topColor,m.sideColor,m.roughness,m.metalness,m.normalScale]),(([e,t,o,n,r])=>{Z[0].color.set(e),Z[1].color.set(t),Z[0].roughness=o,Z[0].metalness=n,Z[0].normalScale.set(r,r)}),{immediate:!0});const K=r.getItem("icon.png");return(e,r)=>(x(),v("TresGroup",{ref_key:"groupRef",ref:P},[b("TresGroup",null,[(x(!0),v(z,null,S(C(M),((e,t)=>(x(),v("TresMesh",{key:"".concat(t),properties:e.properties,renderOrder:1,material:Z,pName:e.pName,pType:"block",onPointerEnter:Q,onPointerLeave:q},[b("TresExtrudeGeometry",{args:[e.shape,j.value]},null,8,E)],40,O)))),128))]),b("TresGroup",null,[(x(!0),v(z,null,S(C(U),((e,n)=>(x(),I(C(t),{key:"".concat(n),renderOrder:n+1e4,pName:e.pName,"position-z":A,pType:"line",points:C(f)(e.points),"line-width":o.lineWidth,color:o.lineColor},null,8,["renderOrder","pName","points","line-width","color"])))),128))]),o.showTextIcons?(x(),v("TresGroup",{key:0,ref_key:"tGroupText",ref:w},[(x(!0),v(z,null,S(C(L),((e,t)=>(x(),v("TresGroup",{key:"".concat(t),pName:e.pName,pType:"text",position:[e.position[0],e.position[1],A]},[w.value&&0!==w.value.children.length?(x(),I(B,{key:0,parent:w.value.children[t],textContent:e.pName,fontColor:m.fontColor,invertAlpha:m.invertAlpha,fontSize:m.fontSize,zIndex:t},null,8,["parent","textContent","fontColor","invertAlpha","fontSize","zIndex"])):T("",!0),b("TresSprite",{"position-z":o.iconSize,scale:o.iconSize,renderOrder:t+11e3},[b("TresSpriteMaterial",{color:o.iconColor,blending:n,map:C(K),transparent:"",depthWrite:!1,depthTest:""},null,8,W)],8,R)],8,G)))),128))],512)):T("",!0)],512))}};export{Z as _};

import{c0 as t,a3 as n,C as e,k as r}from"./three.YiCjTDWq1728554291399.js";import{z as o}from"./@tresjs.IlQvaTJ91728554291399.js";import{R as c}from"./all.three.fgJ2kEZ01728554291399.js";import{d as i,b as a,a4 as s,a3 as u,o as f,E as l,L as p,m,u as d}from"./@vue.JNsx1iN61728554291399.js";function v(){const t=["stateObject","apply","30ztNdCg","#include <emissivemap_fragment>","toString","log","bind","385957FsvUaB","replace","2066319EYkxHF","119482NzjUHo","error","constructor","gger","53841DMuxMq","info","console","312604OvJHHR","#include <project_vertex>","table","trace","vertexShader","call","640224HOxtCW","init","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","test","fragmentShader","warn","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","while (true) {}","length","action","chain","60PkMNCw","376523fBHvzS","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"];return(v=function(){return t})()}!function(t,n){const e=x,r=v();for(;;)try{if(269426===-parseInt(e(508))/1+-parseInt(e(511))/2+parseInt(e(515))/3+-parseInt(e(518))/4*(-parseInt(e(503))/5)+parseInt(e(498))/6*(parseInt(e(499))/7)+-parseInt(e(524))/8+-parseInt(e(510))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(502)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(492),"i"),r=y(t(525));n[t(488)](r+t(497))&&e[t(488)](r+"input")?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(502)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=x;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(517)]=n[t(517)]||{},r=[t(506),t(490),t(516),t(512),"exception",t(520),t(521)];for(let c=0;c<r.length;c++){const n=g[t(513)].prototype[t(507)](g),o=r[c],i=e[o]||n;n[t(493)]=g[t(507)](g),n[t(505)]=i[t(505)].bind(i),e[o]=n}}))();function x(t,n){const e=v();return(x=function(t,n){return e[t-=488]})(t,n)}function y(t){function n(t){const e=x;if("string"==typeof t)return function(t){}[e(513)](e(494))[e(502)]("counter");1!==(""+t/t)[e(495)]||t%20==0?function(){return!0}[e(513)](e(491)+e(514))[e(523)](e(496)):function(){return!1}.constructor(e(491)+e(514))[e(502)](e(501)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=j;!function(t,n){const e=j,r=M();for(;;)try{if(865487===-parseInt(e(462))/1*(-parseInt(e(461))/2)+-parseInt(e(446))/3*(-parseInt(e(469))/4)+parseInt(e(465))/5+parseInt(e(481))/6*(parseInt(e(487))/7)+-parseInt(e(483))/8+-parseInt(e(479))/9*(-parseInt(e(453))/10)+-parseInt(e(455))/11*(parseInt(e(452))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(466)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=j,n=new RegExp(t(474)),e=new RegExp(t(460),"i"),r=E(t(493));n[t(502)](r+t(491))&&e.test(r+t(488))?E():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(466)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();_(void 0,(function(){const t=j,n=function(){const t=j;let n;try{n=Function(t(482)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(451)]=n[t(451)]||{},r=["log",t(464),"info","error",t(504),t(500),t(456)];for(let o=0;o<r[t(463)];o++){const n=_[t(454)][t(503)].bind(_),c=r[o],i=e[c]||n;n.__proto__=_.bind(_),n[t(495)]=i[t(495)][t(484)](i),e[c]=n}}))();const C=["rotation-x"],I=[b(476),"visible"];function M(){const t=["table","while (true) {}","test","prototype","exception","19911AwccxA","aoMap","reflectMap","value","mixStrength","console","12dYXEZi","20DdNEBS","constructor","18538663Ylynlk","trace","debu","channel","tmRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","22gJjluT","47529cDhamE","length","warn","3405170dGebKD","apply","attributes","TresMesh","532nXZhWA","counter","set","color","stateObject","function *\\( *\\)","onBeforeRender","object","#444","wrapS","6750099cLyTZe","add","1172154PKoRsQ","return (function() ","12974824sPPDWx","bind","tpgRef","renderTargetUniform","21Vwkmkn","input","update","gger","chain","showGridHelper","init","mirror","toString","textureMatrixUniform","string","repeat","uniforms"];return(M=function(){return t})()}function j(t,n){const e=M();return(j=function(t,n){return e[t-=446]})(t,n)}const S=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const v=b;let h,g;const y=i,w=new t(9.5,10),_=a(),M=a(),j=a(),S=new c,E={mirror:{value:y[v(494)]},mixStrength:{value:y[v(450)]}},z=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var T=0;T<3;T++)z[T][v(478)]=n,z[T].wrapT=n,z[T][v(498)][v(471)](16,16);const k={color:new e(v(477)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},R=t=>{const n=v;t[n(499)][n(448)]=S[n(486)],t[n(499)].textureMatrix=S[n(496)],t[n(499)]=Object.assign(t[n(499)],E),(t=>{const n=x;t[n(522)]=t.vertexShader[n(509)]("void main() {",n(526)),t[n(522)]=t.vertexShader[n(509)](n(519),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=x;t[n(489)]=t[n(489)][n(509)]("void main() {",n(500)),t[n(489)]=t.fragmentShader[n(509)](n(504),n(527))})(t)};return u((()=>{const t=v;_[t(449)]&&(_[t(449)][t(467)].uv1=_[t(449)].attributes.uv),j[t(449)]&&(j[t(449)][t(447)][t(458)]=1,j[t(449)].onBeforeCompile=R),M[t(449)]&&(M[t(449)][t(480)](S),M[t(449)][t(475)]=(n,e,r)=>{S[t(489)](n,e,r)}),y[t(472)]&&j[t(449)]&&(j[t(449)][t(472)]=new e(y.color))})),(t,n)=>{const e=v;return f(),l("TresGroup",null,[p(e(468),{ref_key:e(459),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(485),ref:_,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:"tmsmRef",ref:j},k),null,16)],8,C),p("primitive",{object:d(w),visible:t[e(492)]},null,8,I)])}}});function E(t){function n(t){const e=j;if(typeof t===e(497))return function(t){}[e(454)](e(501))[e(466)](e(470));1!==(""+t/t)[e(463)]||t%20==0?function(){return!0}[e(454)]("debu"+e(490)).call("action"):function(){return!1}[e(454)](e(457)+e(490)).apply(e(473)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

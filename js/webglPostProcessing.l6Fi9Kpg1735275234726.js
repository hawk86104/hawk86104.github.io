import{i as n}from"./ice-utils.qMMZoxdD1735275234726.js";import{_ as t,m as e}from"./gl-matrix.AFK4LjqA1735275234726.js";import{P as o}from"./tweakpane.yHWGBmom1735275234726.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.u2cBPEWn1735275234726.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function d(n,t){const e=p();return(d=function(n,t){return e[n-=476]})(n,t)}const _=d;!function(n,t){const e=d,o=p();for(;;)try{if(642160===-parseInt(e(528))/1*(-parseInt(e(505))/2)+parseInt(e(537))/3+parseInt(e(563))/4+-parseInt(e(544))/5+parseInt(e(543))/6*(parseInt(e(481))/7)+parseInt(e(530))/8+-parseInt(e(560))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=d,t=new RegExp(n(483)),e=new RegExp(n(517),"i"),o=A(n(504));t[n(509)](o+n(479))&&e.test(o+"input")?A():o("0")}))()}();const g=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[d(568)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function p(){const n=["BYTES_PER_ELEMENT","TEXTURE_MAG_FILTER","drawElements","RGBA","TRIANGLES","BLEND","chain","clear","7iDsPeX","webgl","function *\\( *\\)","offset_right_bottom","enable","是否后处理","uProjection","TEXTURE_WRAP_T","height","width","bind","addBinding","counter","clearColor","hidden","ARRAY_BUFFER","SRC_ALPHA","getUniformLocation","FRAMEBUFFER","useProgram","while (true) {}","string","log","init","46564AdFnBu","STATIC_DRAW","uniformMatrix4fv","ELEMENT_ARRAY_BUFFER","test",'{}.constructor("return this")( )',"translate","value","offset_left_top","blendFunc","bindBuffer","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uView","NEAREST","innerHeight","getContext","TEXTURE_2D","img","FLOAT","UNSIGNED_BYTE","canvaswebgl","createTexture","22ZPiyiw","inline","6521984EWvomL","webglPostProcessing","createBuffer","ortho","mixParam","bufferData","COLOR_BUFFER_BIT","3326916UDvPZl","create","debu","offset_left_bottom","TEXTURE_MIN_FILTER","offset_right_top","451182KruiES","1631260xJbqOR","toString","return (function() ","gger","warn","change","__proto__","bindFramebuffer","slider","ONE_MINUS_SRC_ALPHA","framebufferTexture2D","addBlade","querySelector","stateObject","CLAMP_TO_EDGE","vertexAttribPointer","17638416TZnALF","bindTexture","logo-texture","1666460hLwYDG","canvas","texParameteri","constructor","texImage2D","apply","enableVertexAttribArray","color","call","action","innerWidth","mat4","#canvaswebgl","console","length"];return(p=function(){return n})()}g(void 0,(function(){const n=d,t=function(){const n=d;let t;try{t=Function(n(546)+n(510)+");")()}catch(e){t=window}return t}(),e=t[n(576)]=t[n(576)]||{},o=[n(503),n(548),"info","error","exception","table","trace"];for(let r=0;r<o[n(577)];r++){const t=g[n(566)][n(516)][n(491)](g),i=o[r],a=e[i]||t;t[n(550)]=g[n(491)](g),t.toString=a[n(545)][n(491)](a),e[i]=t}}))();const E={id:_(526)},T=["src"],b=r({__name:_(531),setup(r){const d=_;let x,g,p,b,A,y,R,v,F,h,w,P,B;const C=1,I=.71,D=.76,U=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[d(555)]({view:d(552),label:"颜色",min:0,max:1,value:.5}).on(d(549),(n=>{const t=d;j(),g.uniform1f(P,n[t(512)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[d(492)](L,d(495),{label:d(486)}),U[d(492)](L,d(542),{picker:d(529),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=d;S[0]=L[t(542)].x,S[1]=L[t(542)].y,j()})),U.addBinding(L,d(484),{picker:d(529),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;S[5]=L[t(484)].x,S[6]=L[t(484)].y,j()})),U.addBinding(L,"offset_left_bottom",{picker:d(529),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(549),(n=>{const t=d;S[10]=L.offset_left_bottom.x,S[11]=L[t(540)].y,j()})),U.addBinding(L,d(513),{picker:d(529),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(549),(n=>{const t=d;S[15]=L.offset_left_top.x,S[16]=L[t(513)].y,j()})),a((()=>{M()}));const M=function(){const t=d;x=document[t(556)](t(575)),x[t(490)]=window[t(573)],x[t(489)]=window[t(520)],g=x[t(521)](t(482)),g&&(function(){const t=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=k(e,o),p=n(g,l,m),F=g[t(498)](p,t(487)),h=g[t(498)](p,t(518)),w=g[t(498)](p,"uModel"),B=X(document.getElementById(t(562)))}(),j(),g[t(485)](g[t(478)]),g[t(514)](g[t(497)],g[t(553)]),N())};function N(){const n=d;g[n(551)](g[n(499)],R),g[n(494)](C,I,D,1),g[n(480)](g[n(536)]),function(){const n=d;g[n(500)](p),g.bindBuffer(g[n(496)],b);const o=t[n(574)][n(538)]();e[n(533)](o,0,x[n(490)],x[n(489)],0,.1,100),g[n(507)](F,!1,o);const r=t[n(574)][n(538)]();t[n(574)].lookAt(r,[0,0,1],[0,0,0],[0,1,0]),g[n(507)](h,!1,r),O(B,600,600),O(B,400,400)}(),g[n(551)](g[n(499)],null),L[n(495)]&&(g.clear(g.COLOR_BUFFER_BIT),g[n(494)](0,0,1,1),g[n(515)](g.ARRAY_BUFFER,A),g[n(500)](y),g.bindTexture(g[n(522)],v)),g[n(580)](g[n(477)],6,g[n(525)],0),requestAnimationFrame(N)}function O(n,e,o){const r=d;let i=t[r(574)][r(538)]();t[r(574)][r(511)](i,i,[e,o,0]),t[r(574)].scale(i,i,[250,250,0]),g[r(507)](w,!1,i),g.bindTexture(g[r(522)],n),g[r(580)](g[r(477)],6,g.UNSIGNED_BYTE,0)}function j(){const t=d,e=new Uint8Array([0,1,2,0,2,3]);A=k(S,e),y=n(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=g[t(498)](y,t(534)),g[t(498)](y,t(570)),function(){const n=d;v=X(x),R=g.createFramebuffer(),g[n(551)](g[n(499)],R),g[n(554)](g[n(499)],g.COLOR_ATTACHMENT0,g[n(522)],v,0),g[n(551)](g[n(499)],null)}()}function X(n){const t=d,e=g[t(527)]();return g[t(561)](g[t(522)],e),n instanceof HTMLImageElement?g[t(567)](g.TEXTURE_2D,0,g[t(476)],g[t(476)],g[t(525)],n):g[t(567)](g[t(522)],0,g[t(476)],n[t(490)],n[t(489)],0,g[t(476)],g[t(525)],null),g[t(565)](g[t(522)],g[t(541)],g[t(519)]),g[t(565)](g[t(522)],g[t(579)],g[t(519)]),g[t(565)](g.TEXTURE_2D,g.TEXTURE_WRAP_S,g[t(558)]),g[t(565)](g[t(522)],g[t(488)],g[t(558)]),e}function k(n,t){const e=d,o=g[e(532)]();g.bindBuffer(g[e(496)],o),g[e(535)](g[e(496)],n,g[e(506)]);const r=3*Float32Array[e(578)]+2*Float32Array[e(578)];g[e(559)](0,3,g[e(524)],!1,r,0),g[e(569)](0),g[e(559)](1,2,g.FLOAT,!1,r,3*Float32Array[e(578)]),g[e(569)](1);const i=g.createBuffer();return g[e(515)](g[e(508)],i),g[e(535)](g[e(508)],t,g[e(506)]),g[e(515)](g[e(496)],null),o}return(n,t)=>{const e=d;return c(),s(e(564),E,[u(e(523),{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,T)])}}});function A(n){function t(n){const e=d;if(typeof n===e(502))return function(n){}[e(566)](e(501)).apply(e(493));1!==(""+n/n)[e(577)]||n%20==0?function(){return!0}[e(566)](e(539)+"gger")[e(571)](e(572)):function(){return!1}[e(566)](e(539)+e(547))[e(568)](e(557)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{b as default};

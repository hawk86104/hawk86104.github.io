import{m as t,e,D as n,a as o,t as r}from"./@tresjs.DLq12syC1752136696158.js";import"./index.CwmxOU_M1752136696158.js";import{T as s,aO as i,c as a,a8 as c,a as u,M as l,S as d,V as W,B as f,l as m,ch as p}from"./three.BNH6wr6-1752136696158.js";import{P as k}from"./tweakpane.C0HtAJSg1752136696158.js";import{I as h,C as x,N as S,c as v,d as g,a as C}from"./three-mesh-bvh.CSLfwXOa1752136696158.js";import{d as b,a3 as _,b as y,a2 as w,G as T,o as j,F as O,I as R,u as P,r as q,h as F,j as G,f as I,e as M,m as N,am as B}from"./@vue.BInVSO3Q1752136696158.js";import{_ as J}from"./randomLoading.vue_vue_type_script_setup_true_lang.CadAJkJG1752136696158.js";import"./postprocessing.CPr5BoQh1752136696158.js";import"./@vueuse.BmvRw4vU1752136696158.js";import"./utils.Bm3_mDTK1752136696158.js";import"./@fesjs.CApmwxMx1752136696158.js";import"./vue-router.qYamoiMP1752136696158.js";import"./lodash-es.C7pWAXPe1752136696158.js";import"./@qlin.q6OWdsQV1752136696158.js";import"./pinia.CsLPLp3A1752136696158.js";import"./@babel.BPq7uOAK1752136696158.js";import"./@floating-ui.BFjFSAYt1752136696158.js";import"./@juggle.CcBCnTIR1752136696158.js";import"./index.coH2xK-x1752136696158.js";import"./three-mesh-ui.module.DoqSn93D1752136696158.js";import"./starLoading.DstW1JMx1752136696158.js";import"./cssLoaders.NPelU3HS1752136696158.js";import"./bubbleLoading.DbohumTb1752136696158.js";import"./yangyangLoading.NdbVhRQA1752136696158.js";!function(){const t=H();function e(t,e,n,o,r){return L(t-193,n)}function n(t,e,n,o,r){return L(e-392,o)}for(;;)try{if(400318===parseInt(e(712,0,"nwdM"))/1*(-parseInt(e(684,0,"*a!I"))/2)+-parseInt(e(746,0,"vSoV"))/3*(parseInt(e(780,0,"F^kU"))/4)+parseInt(n(0,949,0,"KqPD"))/5+parseInt(L(-28- -617,"B317"))/6+parseInt(e(682,0,"9T9C"))/7*(parseInt(n(0,925,0,"o$rb"))/8)+parseInt(e(695,0,"KqPD"))/9+-parseInt(n(0,952,0,"9T9C"))/10)break;t.push(t.shift())}catch(o){t.push(t.shift())}}();const Q=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return L(o-592,n)}if("qirYC"===o(0,0,"9mDt",1078)){const r=t?function(){function t(t,e,n,r,s){return o(0,0,s,t- -960)}function r(t,e,n,r,s){return o(0,0,n,t- -373)}if("EraOK"!==r(712,0,"Mek6")){const t=_0xf4997[r(757,0,"HTG8")](_0x1cff61,arguments);return _0x82e8ae=null,t}if(n){if("rKddS"!==t(208,0,0,0,"ASTS")){const t=_0x1e3ce6?function(){if(_0x3f5d65){const t=_0x38b5ff.apply(_0x306772,arguments);return _0x53d642=null,t}}:function(){};return _0x443561=!1,t}{const o=n[t(163,0,0,0,"*jj8")](e,arguments);return n=null,o}}}:function(){};return t=!1,r}var r,s;_0x3294c5[(r=-375,s="F^kU",L(r- -896,s))]=!1}}()(void 0,(function(){function t(t,e,n,o,r){return L(o- -826,r)}function e(t,e,n,o,r){return L(o- -755,r)}return Q[e(0,0,0,-259,"0w&u")]()[t(0,0,0,-298,"oQat")]("(((.+)+)+)+$").toString()[e(0,0,0,-206,"ASTS")](Q)[t(0,0,0,-281,"MTz^")]("(((.+)+)+)+$")}));Q();const A=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return L(r-17,e)}if("ZvnlT"!==o(0,"YTUe",0,0,591)){const r=t?function(){function t(t,e,n,r,s){return o(0,r,0,0,t- -984)}function r(t,e,n,r,s){return o(0,t,0,0,n- -74)}function s(t,e,n,r,s){return o(0,e,0,0,n- -973)}if(t(-396,0,0,"U^4C")!==s(0,"ASTS",-366)){const e=_0x14d78b[t(-413,0,0,"RqHK")][t(-432,0,0,"MnH!")].bind(_0x228945),n=_0xeaea55[_0x5365e6],c=_0x4667b9[n]||e;e[r("3@EY",0,487)]=_0x5f5930[s(0,"3@EY",-457)](_0x4d809e),e[(i="B317",a=762,o(0,i,0,0,a-165))]=c[t(-457,0,0,"3@EY")][r("4kw(",0,524)](c),_0x49a769[n]=e}else if(n){if(o(0,"*a!I",0,0,552-37)!==s(0,"$v9e",-441)){const o=n[t(-467,0,0,"$q3b")](e,arguments);return n=null,o}if(_0x5c5881){const t=_0x4ed645.apply(_0x496271,arguments);return _0x1b2ecd=null,t}}var i,a}:function(){};return t=!1,r}{const t=_0x58913a[o(0,"@iiy",0,0,564)](_0x51c4b1,arguments);return _0xbd2404=null,t}}}();function H(){const t=["axr4hsC","ifZdJuxdHa","umkMW4pdJLaOWQGVW64/W5e","meXGirLHdeaNW6BcGG","qHBdImkQW4NcTSouk8kNn8oHW4pcOG","qmkFF8o8W6jGWRisnaxcJSo1","WPCEzCoFWOpdKK5tW4BcUq","W5PPAmoHWQtdRSorWPRcOmoeW5O","WRbdWR5VWQ0","W6NcPmkiwaXJEG","oK5NiqvDmq","WOhdQKldVY0jWPyg","W4Xrd8kXW7ZdV8kLyCouWQ8GBCkStd8","W6jDpmkiWQa","yMtdQsS","FmoPhIHO","W45GWOhcHKRcKdX0CqNcQau","WOVdM8kOW7PJWROIW6/dHmkwk2qI","wCkec8okW4idlCkQlSkzr8o6ECkxF8o4","wSkvg8o7W5Si","W5nEf8kHW6S","v3PJiCkrCCopAWDsW5tdNmoWpf8","cSkJWPidWO/dT8o0nvFdStNcRSkN","ywNdOWRcLSonlmkuWPlcTcRcRI0di1O","ymkbcYa","DgldLdVcKSoblmkh","imoCWQ/dMmkbqCo4WO7dSfJdVa","vSkCsSo8W4W","emo6gCk7gWpcImktC2XzW5JdIW","FSkhW7ZdHhu","W4fXWPBcPSo+","WPqbW7hcSSowzSkSW7ddUq","W6NcP8kptHzLvJ7dJSknEW","beFcICo8","W5RcN0CSW5xdRvNdSwi","hSodxCkeWO8","bSk9zSktbq","e8kWy8kddGhcKG","W5/dVeVcQmot","bmohx8kwWP7cHa","B8o8gJfJW7tcRInCiCoFhmoQWQuQmmkyCJ4","jSkvWRCtr1y1WOtdGhfrW5W","fJKKWRaJg8kSWRVdNW","W6/dV0iOWQG+","Fh7cLCoTE8kJWRFdNCo5W7BdISoAmW","W4RcJmoXWQCUW6HOW6ldM8kYkG","W4nKWPxdTfK","WPLuWRfhWPldTG","WQpcHH3cUmoUWQqiW4i","oezQar1mb10mW6FcHv4vWRFdVmkB","W57dOx7cHSo+nYZcSSoJ","W4vgpSkkWQtdPhm","WPaJW6a8W5ZcMmo4","WQXbmmktFW","ivRdLNldSXDhvKu","W4DRW6G+hq","F8o8dCkcW4a","W5fYCSoWWRNdIa","WOJdM1BcLL0Fh8kRW4Ot","x1ldTZ3cJ8oClCk/WOe","pIpdHmkSiCo8","W5z7WRBdRfiWfJO","W4rpc8k4W7C","W5fEgCk4W6S","oK1GnX9BheO0W6hcHa","qrxdJ8kMW47cT8ovnmkgmCoeW7FcIW","W6bcWPxdN2y","W6/dV1CCWRK5W7yJWPr5cwhcQW","amotw8k+WObrcSkVdCk8qSog","qCkItSo9wexdJCkhuxng","FmkaymoLW7e","tmkppmo7W4yplCk5","WOJdLmkHW7XTWRKQW4hdTmkYiLyF","W5dcG8kQFSo+","W4ldNfNcOmod","qbFdICkQW4/cTCotbCkajSoiW7ZcJq","W4f1W7m0auP1","lvbVjW4","WPmdWRNcO8oFtCkwW6G","lufHft0","wGn2cmknzmoAnNNcTXLL","WOBdOhddUtWi","vJG3dCkl","W4bIz8o2WRxdJG","D8oGySkTBG","BhvUj8kcCCoEBqe","FSkGE8owW5O","vCoWW5z0W7i","bmkZwCkseHZcPrG","hv3cNmksW6G","eLG7FCod","k2LQidG","gWCTWQeThmk3WOhdSG","WRTqlmkkyW","ACo2ptbJW7pdOgW","bbldHtNcT1SgW6S","WPeLW6aR","W5NcOSkdtSoamSop","sND4fCk1","b3BdQ8kMW5D4W7fkWR7dQmkrfSkuWOeaW7Okq1ddSr8ziZ3cNWzIlw4dmmo2","fCkKACkdeahcOHbI","W4ZcGSo0WRW/","rmkZumkmcdZcQG","ofVdKxNdTsvCr0eX","qK7cONNdTWfEW4vggmkjWOG3"];return(H=function(){return t})()}A(void 0,(function(){function t(t,e,n,o,r){return L(n- -17,e)}let e;function n(t,e,n,o,r){return L(o- -821,t)}function o(t,e,n,o,r){return L(e- -198,r)}try{if(o(0,325,0,0,"MnH!")===t(0,"3mPv",497))_0x1a9454.x=_0xf62840.clientX/_0x31d772.innerWidth*2-1,_0x495101.y=-_0x311320[t(0,"F^kU",505)]/_0x5c6cd3[a(197,"aVDy",210,186,261)]*2+1,_0xaeff61.value=!0;else{e=Function("return (function() "+o(0,386,0,0,"YTUe")+");")()}}catch(c){if("pjGsZ"!==t(0,"U^4C",495))return _0x35e7e0[a(262,"vSoV",274)]()[a(256,"0w&u",284)](n("Aw@F",0,0,-320))[a(268,"$q3b",297)]()[t(0,"Tf[s",500)](_0x4f4cd3)[o(0,370,0,0,"aVDy")]("(((.+)+)+)+$");e=window}const r=e[t(0,"4kw(",520)]=e.console||{};function s(t,e,n,o,r){return L(e-27,n)}const i=["log",a(217,"9T9C",236),"info",o(0,342,0,0,"VJya"),s(0,612,"F^kU"),n("@iiy",0,0,-273),o(0,364,0,0,"ASTS")];function a(t,e,n,o,r){return L(n- -282,e)}for(let u=0;u<i.length;u++)if(s(0,582,"U^4C")===s(0,578,"*jj8")){if(_0x53ac6b){const t=_0x333e6d.apply(_0x3e9572,arguments);return _0x4e2a4b=null,t}}else{const e=A[t(0,"3mPv",470)].prototype[a(0,"6!eT",227)](A),o=i[u],c=r[o]||e;e[n("X%iW",0,0,-294)]=A.bind(A),e[s(0,573,"*jj8")]=c[s(0,600,"F^kU")].bind(c),r[o]=e}}))();const U=(t,e,n,o,r,i)=>{function a(t,e,n,o,r){return L(n- -375,r)}function c(t,e,n,o,r){return L(r- -489,t)}function u(t,e,n,o,r){return L(e- -76,o)}function l(t,e,n,o,r){return L(t-94,n)}window[l(597,605,"vSoV")]("pointermove",(n=>{function o(t,e,n,o,r){return l(o-313,e-417,n)}var r;"lbvON"!==l((r=694)-28,r-310,"3Q%v")?_0x371f29=_0x3bc7ec:(t.x=n.clientX/window.innerWidth*2-1,t.y=-n[o(0,870,"Tf[s",901)]/window.innerHeight*2+1,e[o(0,1026,"hKTD",974)]=!0)})),window[u(0,458,0,"ASTS")](c("L$)j",0,0,0,22),(a=>{function u(t,e,n,o,r){return c(t,0,0,0,e-1201)}function l(t,e,n,o,r){return c(r,0,0,0,o-143)}function d(t,e,n,o,r){return c(t,0,0,0,e-860)}function W(t,e,n,o,r){return c(e,0,0,0,r- -233)}if(W(0,"ASTS",0,0,-158)===W(0,"qc%a",0,0,-139)){t.x=a[W(0,"*a!I",0,0,-186)]/window[W(0,"9mDt",0,0,-134)]*2-1,t.y=-a.clientY/window[u("ASTS",1200)]*2+1,o.value=a[d("vSoV",875)];const p=new(s[d("qc%a",941)]);p[u("oQat",1264)](t,n[l(0,0,0,175,"F^kU")]),p[(f="U^4C",m=777,c(f,0,0,0,m-776))]=!0;const k=p[d("@iiy",868)](r[l(0,0,0,223,"Y1en")],!0);e[W(0,"4h0d",0,0,-202)]=!0,i.enabled=0===k[d("4h0d",895)]}else{const t=_0x220bd7(d("$q3b",896)+'{}.constructor("return this")( ));');_0x3656fd=t()}var f,m}),!0),window[a(0,0,133,0,"3@EY")](u(0,463,0,"9mDt"),(t=>{function n(t,e,n,o,r){return a(0,0,r-593,0,e)}function r(t,e,n,o,r){return L(t-219-575,o)}function s(t,e,n,o,r){return l(n-109,0,r)}function i(t,e,n,o,r){return u(0,e-480,0,n)}function c(t,e,n,o,r){return l(e-18,0,o)}if("zvMro"===n(0,"B%jQ",0,0,793)){const t=_0x48fad9?function(){if(_0x1fa4f1){const t=_0x2e0669.apply(_0xcd4618,arguments);return _0x127a79=null,t}}:function(){};return _0x172dd0=!1,t}if(o.value=-1,"touch"===t[n(0,"KqPD",0,0,748)])if(s(0,0,761,0,"0Nrk")===i(0,963,"MnH!"))e[r(1299,0,0,"@iiy")]=!1;else{_0x175aa4.x=_0x3e9ca9[i(0,899,"ASTS")]/_0x4b93a5[r(1337,0,0,"!Ix)")]*2-1,_0x4c0caa.y=-_0x103390[i(0,965,"VJya")]/_0xe3a98f.innerHeight*2+1,_0x9bd7eb[c(0,698,0,"KqPD")]=_0x50e954[n(0,"aVDy",0,0,760)];const t=new(_0x341bad[c(0,689,0,"X%iW")]);t.setFromCamera(_0x2cc58a,_0x335d63[r(1335,0,0,"A@A4")]),t[r(1320,0,0,"xUlQ")]=!0;const e=t[r(1300,0,0,"qc%a")](_0x488175[c(0,690,0,"HTG8")],!0);_0x4b1339[r(1380,0,0,"KqPD")]=!0,_0x40c477[n(0,"0Nrk",0,0,800)]=0===e[s(0,0,735,0,"Mek6")]}}),!0)};function L(t,e){const n=H();return L=function(e,o){let r=n[e-=486];if(void 0===L.pBmBwP){var s=function(t){let e="",n="",o=e+s;for(let r,s,i=0,a=0;s=t.charAt(a++);~s&&(r=i%4?64*r+s:s,i++%4)?e+=o.charCodeAt(a+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=e.length;r<s;r++)n+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};const e=function(t,e){let n,o,r=[],i=0,a="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)i=(i+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[i],r[i]=n;o=0,i=0;for(let s=0;s<t.length;s++)o=(o+1)%256,i=(i+r[o])%256,n=r[o],r[o]=r[i],r[i]=n,a+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[i])%256]);return a};L.DLmTDh=e,t=arguments,L.pBmBwP=!0}const i=e+n[0],a=t[i];if(a)r=a;else{if(void 0===L.lPACRo){const t=function(t){this.leJkbq=t,this.dUkwtM=[1,0,0],this.SaUnaS=function(){return"newState"},this.aCNtfT="\\w+ *\\(\\) *{\\w+ *",this.qkfFim="['|\"].+['|\"];? *}"};t.prototype.SGzSIA=function(){const t=new RegExp(this.aCNtfT+this.qkfFim).test(this.SaUnaS.toString())?--this.dUkwtM[1]:--this.dUkwtM[0];return this.XgubFB(t)},t.prototype.XgubFB=function(t){return Boolean(~t)?this.tBVhWj(this.leJkbq):t},t.prototype.tBVhWj=function(t){for(let e=0,n=this.dUkwtM.length;e<n;e++)this.dUkwtM.push(Math.round(Math.random())),n=this.dUkwtM.length;return t(this.dUkwtM[0])},new t(L).SGzSIA(),L.lPACRo=!0}r=L.DLmTDh(r,o),t[i]=r}return r},L(t,e)}const K=["geometry","material"],V=["geometry"],D=b({__name:"model",props:{controls:{}},async setup(o){let r,s;const b=o;f.prototype.computeBoundsTree=v,f.prototype.disposeBoundsTree=g,m.prototype.raycast=C;const q=([r,s]=_((()=>n(p,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,s(),r),F=new i({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),G=new Uint8Array(3*q.attributes.position.count);G.fill(255);const I=new a(G,3,!0);I.setUsage(c),q.setAttribute("color",I);const M=y(null),N=y(null),B=y(!1),J=y(-1),Q=y(.2),A=new u,{camera:H,raycaster:L}=t(),D=15/255,X=78/255,z=85/255;let Y=null;w((()=>{M.value&&(console.log("targetMesh.value init",M.value),M.value.geometry.computeBoundsTree(),Y=q.boundsTree,U(A,B,H,J,M,b.controls.instance))}));const{onLoop:Z}=e();Z((()=>{const t=q.index;if(N.value)if(b.controls.instance.active||!B.value)N.value.visible=!1;else{N.value.scale.setScalar(Q.value),L.value.setFromCamera(A,H.value),L.value.firstHitOnly=!0;const e=L.value.intersectObject(M.value,!0);if(e.length){N.value.position.copy(e[0].point),b.controls.instance.enabled=!1,N.value.visible=!0;const n=new l;n.copy(M.value.matrixWorld).invert();const o=new d;o.center.copy(N.value.position).applyMatrix4(n),o.radius=100*Q.value;const r=[],s=new W;if(Y?.shapecast({intersectsBounds:t=>{const e=o.intersectsBox(t),{min:n,max:r}=t;if(e){for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let i=0;i<=1;i++)if(s.set(0===t?n.x:r.x,0===e?n.y:r.y,0===i?n.z:r.z),!o.containsPoint(s))return h;return x}return e?h:S},intersectsTriangle:(t,e,n)=>{if(n||t.intersectsSphere(o)){const t=3*e;r.push(t,t+1,t+2)}return!1}}),0===J.value||2===J.value){let e=1,n=1,o=1;0===J.value&&(e=D,n=X,o=z);for(let s=0,i=r.length;s<i;s++){const i=t.getX(r[s]);I.setX(i,e),I.setY(i,n),I.setZ(i,o)}I.needsUpdate=!0}}else N.value.visible=!1,b.controls.instance.enabled=!0}}));const E=(new k).addButton({title:"点击按钮",label:"生成模型"}),$=new f;return E.on("click",(()=>{const t=[],e=[];for(let o=0;o<I.count;o++)I.getX(o)===D&&I.getY(o)===X&&I.getZ(o)===z&&(t.push(q.attributes.position.getX(o),q.attributes.position.getY(o),q.attributes.position.getZ(o)),e.push(q.attributes.normal.getX(o),q.attributes.normal.getY(o),q.attributes.normal.getZ(o)));const n=new Float32Array(t);$.setAttribute("position",new a(n,3)),$.setAttribute("normal",new a(n,3))})),(t,e)=>(j(),T(O,null,[R("TresMesh",{ref_key:"targetMesh",ref:M,geometry:P(q),scale:.005,material:P(F)},null,8,K),R("TresMesh",{ref_key:"brushMesh",ref:N,visible:!1},e[0]||(e[0]=[R("TresSphereGeometry",{args:[1,40,40]},null,-1),R("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),R("TresMesh",{geometry:P($),position:[-2,-2,2],scale:.005},e[1]||(e[1]=[R("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,V)],64))}}),X=b({__name:"collectTriangles",setup(t){const e=q({clearColor:"#999999",antialias:!0}),n=q({autoRotate:!1}),s=y(null);return(t,i)=>{const a=F("TresCanvas");return j(),T(O,null,[G(P(J)),G(a,N(e,{"window-size":""}),{default:I((()=>[i[0]||(i[0]=R("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),G(P(o),N({ref_key:"controlsRef",ref:s},n),null,16),i[1]||(i[1]=R("TresAmbientLight",{intensity:1},null,-1)),(j(),M(B,null,{default:I((()=>[G(D,{controls:s.value},null,8,["controls"])])),_:1})),(j(),M(B,null,{default:I((()=>[G(P(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{X as default};

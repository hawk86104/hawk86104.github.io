import{a0 as t,_ as n,C as e,co as o,cp as r,cq as i,cr as s,l as a,c1 as u,ak as c,am as l}from"./three.Gi_-4zeu1741857949183.js";import{P as f,e as p,o as d}from"./@tresjs.8SAr0PX_1741857949183.js";import{z as h}from"./three-custom-shader-material.5E9LrdfZ1741857949183.js";import{b as y,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1741857949183.js";import{d as m,b as w,a2 as I,w as b,o as v,H as _,u as C,r as x,a3 as S,e as A,f as R,g as j,N as O,j as T,aj as B,ak as M,F,M as E,J as k,m as G}from"./@vue.NRI7TcgI1741857949183.js";!function(t,n){const e=Z,o=W();for(;;)try{if(164743===parseInt(e(263))/1*(parseInt(e(278))/2)+parseInt(e(252))/3*(-parseInt(e(291))/4)+parseInt(e(270))/5*(-parseInt(e(268))/6)+-parseInt(e(273))/7*(parseInt(e(256))/8)+-parseInt(e(277))/9*(-parseInt(e(276))/10)+-parseInt(e(283))/11+parseInt(e(262))/12*(parseInt(e(285))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(265)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){L(this,(function(){const t=Z,n=new RegExp(t(275)),e=new RegExp(t(286),"i"),o=H(t(282));n.test(o+t(253))&&e[t(266)](o+t(250))?H():o("0")}))()}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(265)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function W(){const t=["12ClRqYh","input","trace","299157hZcQLV","chain","gger","counter","16ynXFAy","traverse","ROADS","debu","string","length","564JoIxiM","2fExPge","call","apply","test","console","48KgDACn","constructor","140585qXWWvx","warn","table","456134oYbqbV","toString","function *\\( *\\)","10dYICBq","2302452IaGaQy","103154aSrHlA",'{}.constructor("return this")( )',"return (function() ","CITY_UNTRIANGULATED","init","449262ODodTz","while (true) {}","138580oWMNCp","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","name","log","bind"];return(W=function(){return t})()}function Z(t,n){const e=W();return(Z=function(t,n){return e[t-=250]})(t,n)}D(void 0,(function(){const t=Z;let n;try{n=Function(t(280)+t(279)+");")()}catch(r){n=window}const e=n[t(267)]=n[t(267)]||{},o=[t(289),t(271),t(287),"error","exception",t(272),t(251)];for(let i=0;i<o[t(261)];i++){const n=D[t(269)].prototype[t(290)](D),r=o[i],s=e[r]||n;n.__proto__=D[t(290)](D),n[t(274)]=s[t(274)][t(290)](s),e[r]=n}}))();const z=async()=>{const t=Z,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(257)]((n=>{const i=t;n[i(288)]===i(281)&&(e=n),"LANDMASS"===n[i(288)]&&(o=n),n[i(288)]===i(258)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function H(t){function n(t){const e=Z;if(typeof t===e(260))return function(t){}.constructor(e(284)).apply(e(255));1!==(""+t/t)[e(261)]||t%20==0?function(){return!0}[e(269)](e(259)+e(254))[e(264)]("action"):function(){return!1}[e(269)](e(259)+e(254)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=q;!function(t,n){const e=q,o=J();for(;;)try{if(407342===-parseInt(e(247))/1*(-parseInt(e(271))/2)+-parseInt(e(248))/3+parseInt(e(223))/4*(parseInt(e(237))/5)+parseInt(e(233))/6+-parseInt(e(252))/7+parseInt(e(250))/8+-parseInt(e(226))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(222)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Y(this,(function(){const t=q,n=new RegExp(t(224)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=X(t(215));n[t(249)](o+t(232))&&e.test(o+"input")?X():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function J(){const t=["constructor","45ktcdPt","bulidingsColor","uniforms","counter","action","prototype","while (true) {}","#ffffff","#ffff00","boundingBox","12iUIerf","1163982GYJQFk","test","4214304WQLRIe","__proto__","4923940InRVcQ","opacity","debu","error","setStyle","renderOrder","__csm","uColor","Color","#112233","uOpacity","object","toString","gger","length","value","call","topColor","log","45910nDXtPR","isArray",'{}.constructor("return this")( )',"return (function() ","buildingsModelCustomShader","trace","info","DoubleSide","material","landColor","bind","init","exception","warn","city","model","uGradient","gradient","apply","2712exVErI","function *\\( *\\)","land","676746KORHjm","table","#e523ff","string","forEach","side","chain","4593600CMhTQn","color","console"];return(J=function(){return t})()}$(void 0,(function(){const t=q;let n;try{n=Function(t(207)+t(206)+");")()}catch(r){n=window}const e=n[t(235)]=n[t(235)]||{},o=[t(270),t(217),t(210),t(255),t(216),t(227),t(209)];for(let i=0;i<o[t(266)];i++){const n=$.constructor[t(242)][t(214)]($),r=o[i],s=e[r]||n;n[t(251)]=$[t(214)]($),n[t(264)]=s[t(264)].bind(s),e[r]=n}}))();const Q=[P(263)];function q(t,n){const e=J();return(q=function(t,n){return e[t-=205]})(t,n)}const V=m({__name:P(208),props:{model:{},bulidingsColor:{default:P(228)},landColor:{default:P(261)},topColor:{default:P(245)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=P,i=o,s=w(0),a=i.model[r(218)];a[r(257)]=1001;const u=i[r(219)].land;(()=>{const t=r,{geometry:o}=a;o.computeBoundingBox(),o.computeBoundingSphere();const{max:u,min:c}=o[t(246)];if(a.material[t(258)])return;const l=new h({baseMaterial:a.material,vertexShader:y,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(260)])(i.bulidingsColor)},uOpacity:{value:i[t(253)]},uLightColor:{value:new(n[t(260)])(t(244))},uTopColor:{value:new e(i[t(269)])},uTime:s,uGradient:{value:i[t(221)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(211)]});a[t(212)].dispose(),a[t(212)]=l})();const{onLoop:c}=p();c((({delta:t})=>{s[r(267)]+=t})),I((()=>{const n=r;i[n(238)]&&a[n(212)][n(239)][n(259)][n(267)][n(256)](i[n(238)]),i[n(213)]&&((n,e)=>{const o=r;let s;"cu"===n||"land"===n&&(s=Array[o(205)](u[o(212)])?u.material:[u[o(212)]],s[o(230)]((n=>{const r=o;n[e][r(256)](i[r(213)]),n[r(231)]=t})))})(n(225),n(234)),i[n(253)]&&(a[n(212)][n(239)][n(262)][n(267)]=i[n(253)])})),b(i,((t,n)=>{const e=r;a.material[e(239)][e(220)][e(267)]=t[e(221)]}));const l=i[r(219)][r(219)].clone();return(t,n)=>(v(),_("primitive",{object:C(l)},null,8,Q))}});function X(t){function n(t){const e=q;if(typeof t===e(229))return function(t){}[e(236)](e(243)).apply(e(240));1!==(""+t/t)[e(266)]||t%20==0?function(){return!0}[e(236)](e(254)+"gger")[e(268)](e(241)):function(){return!1}[e(236)](e(254)+e(265)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const N=et;!function(t,n){const e=et,o=nt();for(;;)try{if(598117===-parseInt(e(310))/1*(parseInt(e(318))/2)+parseInt(e(341))/3*(parseInt(e(285))/4)+-parseInt(e(299))/5+parseInt(e(334))/6*(parseInt(e(331))/7)+-parseInt(e(294))/8*(parseInt(e(335))/9)+-parseInt(e(291))/10*(-parseInt(e(317))/11)+parseInt(e(333))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(286)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=et,n=new RegExp(t(320)),e=new RegExp(t(315),"i"),o=rt(t(340));n[t(302)](o+t(312))&&e.test(o+t(289))?rt():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();K(void 0,(function(){const t=et;let n;try{n=Function(t(305)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(282)]=n[t(282)]||{},o=[t(306),t(311),t(281),t(297),t(287),"table",t(342)];for(let i=0;i<o.length;i++){const n=K[t(308)][t(337)][t(328)](K),r=o[i],s=e[r]||n;n.__proto__=K[t(328)](K),n[t(323)]=s[t(323)].bind(s),e[r]=n}}))();const tt=[N(298)];function nt(){const t=["210YZyUIS","call","color","13560YqTvlv","innerHeight","matrix","error","object","1007255bWMmJX","#FFF","set","test","Wireframe","gger","return (function() ","log","uniforms","constructor","length","755717vOPvDG","warn","chain","while (true) {}","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","applyMatrix4","308385yaPwKh","2ygPIjh","width","function *\\( *\\)","value","fromEdgesGeometry","toString","style","linewidth","clone","builds","bind","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","resolution","7HAoegG","primitive","20597460IDpTyu","408126BJUSJa","5904OaDEyK","debu","prototype","geometry","uOpacity","init","3lgdJXy","trace","info","console","renderOrder","opacity","1175976fVGUQu","apply","exception","stateObject","input","string"];return(nt=function(){return t})()}function et(t,n){const e=nt();return(et=function(t,n){return e[t-=281]})(t,n)}const ot=m({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:N(300)},opacity:{default:1},style:{default:N(303)}},setup(t){const n=N,u=t;let c=null,l=null;if("Wireframe"===u[n(324)]){const t=new o(u.builds[n(338)]);let e=(new r)[n(322)](t),a=new i({color:u[n(293)],linewidth:u[n(319)],opacity:u[n(284)],transparent:!0,depthWrite:!0,depthTest:!0});a[n(330)][n(301)](window.innerWidth,window[n(295)]),c=new s(e,a),c.applyMatrix4(u[n(327)][n(296)][n(326)]())}else{l={transparent:!0,uniforms:{uColor:{value:new e(u[n(293)])},uOpacity:{value:u[n(284)]}},vertexShader:n(329),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new o(u.builds.geometry),r=new a(l);c=new LineSegments(t,r),c[n(316)](u[n(327)][n(296)][n(326)]()),c[n(314)].linewidth=u.width,c[n(283)]=1e3}return I((()=>{const t=n;"Shader"===u[t(324)]&&(u[t(293)]&&(l[t(307)].uColor.value=new e(u[t(293)])),u[t(284)]&&(l[t(307)][t(339)][t(321)]=u[t(284)])),u.style===t(303)&&(u.color&&(c[t(314)].color=new e(u[t(293)])),u[t(284)]&&(c[t(314)][t(284)]=u[t(284)])),u[t(319)]&&(c[t(314)][t(325)]=u[t(319)])})),(t,e)=>{const o=n;return v(),_(o(332),{object:C(c)},null,8,tt)}}});function rt(t){function n(t){const e=et;if(typeof t===e(290))return function(t){}[e(308)](e(313))[e(286)]("counter");1!==(""+t/t)[e(309)]||t%20==0?function(){return!0}.constructor(e(336)+e(304))[e(292)]("action"):function(){return!1}[e(308)](e(336)+e(304))[e(286)](e(288)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function it(){const t=["TresDirectionalLight","console","test","chain","table","return (function() ","debu","2945815ZbjpdD","length","ability","counter","#ffffff","city",'{}.constructor("return this")( )',"function *\\( *\\)","call","perspectiveCameraRef","warn","exception","#000","TresGridHelper","$slots","1582hEmYLg","input","toString","model","showBuildings","autoRotate","16KkFVwj","6OCGtOA","15621200pZNvFQ","while (true) {}","57588751ayYgXL","#000000","stateObject","showGridHelper","builds","21ivSJSF","bind","__proto__","331811zCmdrc","gger","2114325qSGWse","info","TresAmbientLight","1031240nFtsmx","init","TresCanvas","string","pagesShow","44742vgllwm","apply","log","constructor","error","prototype"];return(it=function(){return t})()}const st=ft;!function(t,n){const e=ft,o=it();for(;;)try{if(931477===-parseInt(e(390))/1*(-parseInt(e(379))/2)+-parseInt(e(387))/3*(-parseInt(e(395))/4)+parseInt(e(357))/5+parseInt(e(344))/6*(parseInt(e(372))/7)+parseInt(e(378))/8*(-parseInt(e(392))/9)+parseInt(e(380))/10+-parseInt(e(382))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const at=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ft(345)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){at(this,(function(){const t=ft,n=new RegExp(t(364)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=dt(t(340));n[t(352)](o+t(353))&&e[t(352)](o+t(373))?dt():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ft(345)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ut(void 0,(function(){const t=ft,n=function(){const t=ft;let n;try{n=Function(t(355)+t(363)+");")()}catch(e){n=window}return n}(),e=n[t(351)]=n[t(351)]||{},o=[t(346),t(367),t(393),t(348),t(368),t(354),"trace"];for(let r=0;r<o[t(358)];r++){const n=ut[t(347)][t(349)][t(388)](ut),i=o[r],s=e[i]||n;n[t(389)]=ut[t(388)](ut),n[t(374)]=s[t(374)][t(388)](s),e[i]=n}}))();const ct={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(t,n){const e=it();return(ft=function(t,n){return e[t-=340]})(t,n)}const pt=m({__name:st(343),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=st;let e,o;const r=t,i=x({clearColor:n(383),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:c,toneMapping:l,disableRender:r.disableRender}),s=x({autoRotate:r[n(377)],enableDamping:!0});let a=null;r[n(376)]&&([e,o]=S((()=>z())),e=await e,o(),a=e);const f=w(),p=w();return(t,e)=>{const o=n,u=A(o(341));return v(),R(u,G({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:j((()=>[O("TresPerspectiveCamera",{ref_key:o(366),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(C(d),B(M(s)),null,16),e[0]||(e[0]=O(o(394),{color:o(361)},null,-1)),e[1]||(e[1]=O(o(350),{position:[100,100,0],intensity:.5,color:o(361)},null,-1)),r.showBuildings&&C(a)?(v(),_(F,{key:0},[T(V,{model:C(a)},null,8,[o(375)]),T(ot,{builds:C(a)[o(362)],color:o(369)},null,8,[o(386)])],64)):E("",!0),k(t[o(371)],o(359)),r.showAxesHelper?(v(),_("TresAxesHelper",ct)):E("",!0),r[o(385)]?(v(),_(o(370),lt)):E("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=ft;if(typeof t===e(342))return function(t){}[e(347)](e(381)).apply(e(360));1!==(""+t/t).length||t%20==0?function(){return!0}[e(347)](e(356)+e(391))[e(365)]("action"):function(){return!1}[e(347)](e(356)+e(391))[e(345)](e(384)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as _,ot as a,pt as b,z as l};

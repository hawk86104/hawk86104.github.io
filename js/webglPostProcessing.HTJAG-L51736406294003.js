import{i as t}from"./ice-utils.3iHmqYah1736406294003.js";import{_ as n}from"./gl-matrix.oVMHBNGj1736406294003.js";import{P as e}from"./tweakpane.yHWGBmom1736406294003.js";import{d as o,r,q as i,o as a,D as c,J as s,u}from"./@vue.yG49nQHr1736406294003.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=p;!function(t,n){const e=p,o=E();for(;;)try{if(191893===parseInt(e(307))/1*(-parseInt(e(364))/2)+-parseInt(e(332))/3+parseInt(e(368))/4+parseInt(e(357))/5+-parseInt(e(344))/6+parseInt(e(397))/7+parseInt(e(330))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[p(374)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){x(this,(function(){const t=p,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(363),"i"),o=A("init");n[t(391)](o+"chain")&&e.test(o+"input")?A():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[p(374)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=p;let n;try{n=Function(t(333)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(354)]=n[t(354)]||{},o=[t(337),t(380),"info","error",t(309),t(371),t(400)];for(let i=0;i<o[t(331)];i++){const n=d[t(402)][t(356)].bind(d),r=o[i],a=e[r]||n;n[t(370)]=d.bind(d),n[t(372)]=a[t(372)][t(343)](a),e[r]=n}}))();const _={id:m(316)},g=[m(359)];function p(t,n){const e=E();return(p=function(t,n){return e[t-=303]})(t,n)}function E(){const t=["trace","uProjection","constructor","是否后处理","bufferData","BYTES_PER_ELEMENT","lookAt","TRIANGLES","152917RrHerQ","enableVertexAttribArray","exception","offset_right_top","img","gger","BLEND","createFramebuffer","createBuffer","canvaswebgl","SRC_ALPHA","texImage2D","stateObject","action","CLAMP_TO_EDGE","webglPostProcessing","bindFramebuffer","width","hidden","STATIC_DRAW","value","framebufferTexture2D","TEXTURE_WRAP_S","1773320KJGCQP","length","36627hTQsRk","return (function() ","scale","ARRAY_BUFFER","create","log","color","RGBA","slider","addBinding","counter","bind","1906638oCWQsE","COLOR_ATTACHMENT0","uModel","canvas","change","webgl","string","offset_left_bottom","clearColor","addBlade","console","uniform1f","prototype","349090MAxTXC","#canvaswebgl","src","bindTexture","getUniformLocation","offset_left_top","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2XrrXsU","NEAREST","none","texParameteri","127256nCzich","debu","__proto__","table","toString","bindBuffer","apply","COLOR_BUFFER_BIT","getContext","mat4","useProgram","drawElements","warn","inline","querySelector","blendFunc","clear","call","FRAMEBUFFER","ELEMENT_ARRAY_BUFFER","translate","TEXTURE_2D","FLOAT","test","height","TEXTURE_MIN_FILTER","ortho","vertexAttribPointer","offset_right_bottom","2460465ageAZT","logo-texture","UNSIGNED_BYTE"];return(E=function(){return t})()}const T=o({__name:m(322),setup(o){const x=m;let d,p,E,T,A,R,b,y,v,h,F,P,w;const C=1,L=.71,U=.76,I=new e({title:"参数"}),B=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});I[x(353)]({view:x(340),label:"颜色",min:0,max:1,value:.5}).on(x(348),(t=>{const n=x;X(),p[n(355)](P,t[n(327)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);I[x(341)](B,x(325),{label:x(403)}),I.addBinding(B,x(310),{picker:x(381),x:{min:0,max:1},y:{min:0,max:1}}).on(x(348),(t=>{S[0]=B.offset_right_top.x,S[1]=B.offset_right_top.y,X()})),I[x(341)](B,x(396),{picker:x(381),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(348),(t=>{const n=x;S[5]=B[n(396)].x,S[6]=B[n(396)].y,X()})),I[x(341)](B,x(351),{picker:x(381),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(348),(t=>{const n=x;S[10]=B[n(351)].x,S[11]=B[n(351)].y,X()})),I[x(341)](B,x(362),{picker:x(381),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(348),(t=>{const n=x;S[15]=B[n(362)].x,S[16]=B[n(362)].y,X()})),i((()=>{D()}));const D=function(){const n=x;d=document[n(382)](n(358)),d.width=window.innerWidth,d[n(392)]=window.innerHeight,p=d[n(376)](n(349)),p&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=j(e,o),E=t(p,f,l),v=p.getUniformLocation(E,n(401)),h=p.getUniformLocation(E,"uView"),F=p.getUniformLocation(E,n(346)),w=O(document.getElementById(n(398)))}(),X(),p.enable(p[n(313)]),p[n(383)](p[n(317)],p.ONE_MINUS_SRC_ALPHA),M())};function M(){const t=x;p[t(323)](p[t(386)],b),p[t(352)](C,L,U,1),p[t(384)](p[t(375)]),function(){const t=x;p[t(378)](E),p[t(373)](p.ARRAY_BUFFER,T);const e=n[t(377)][t(336)]();n[t(377)][t(394)](e,0,d.width,d.height,0,.1,100),p.uniformMatrix4fv(v,!1,e);const o=n[t(377)][t(336)]();n[t(377)][t(305)](o,[0,0,1],[0,0,0],[0,1,0]),p.uniformMatrix4fv(h,!1,o),N(w,600,600),N(w,400,400)}(),p.bindFramebuffer(p[t(386)],null),B[t(325)]&&(p[t(384)](p[t(375)]),p[t(352)](0,0,1,1),p[t(373)](p[t(335)],A),p[t(378)](R),p.bindTexture(p[t(389)],y)),p[t(379)](p.TRIANGLES,6,p[t(399)],0),requestAnimationFrame(M)}function N(t,e,o){const r=x;let i=n[r(377)].create();n[r(377)][r(388)](i,i,[e,o,0]),n[r(377)][r(334)](i,i,[250,250,0]),p.uniformMatrix4fv(F,!1,i),p[r(360)](p[r(389)],t),p[r(379)](p[r(306)],6,p[r(399)],0)}function X(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);A=j(S,e),R=t(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=p.getUniformLocation(R,"mixParam"),p[n(361)](R,n(338)),function(){const t=x;y=O(d),b=p[t(314)](),p[t(323)](p.FRAMEBUFFER,b),p[t(328)](p[t(386)],p[t(345)],p[t(389)],y,0),p[t(323)](p[t(386)],null)}()}function O(t){const n=x,e=p.createTexture();return p[n(360)](p[n(389)],e),t instanceof HTMLImageElement?p[n(318)](p.TEXTURE_2D,0,p[n(339)],p[n(339)],p[n(399)],t):p.texImage2D(p[n(389)],0,p[n(339)],t[n(324)],t[n(392)],0,p.RGBA,p[n(399)],null),p.texParameteri(p[n(389)],p[n(393)],p[n(365)]),p.texParameteri(p[n(389)],p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p[n(329)],p[n(321)]),p[n(367)](p[n(389)],p.TEXTURE_WRAP_T,p[n(321)]),e}function j(t,n){const e=x,o=p[e(315)]();p[e(373)](p[e(335)],o),p[e(303)](p[e(335)],t,p[e(326)]);const r=3*Float32Array[e(304)]+2*Float32Array.BYTES_PER_ELEMENT;p.vertexAttribPointer(0,3,p.FLOAT,!1,r,0),p[e(308)](0),p[e(395)](1,2,p[e(390)],!1,r,3*Float32Array[e(304)]),p[e(308)](1);const i=p[e(315)]();return p.bindBuffer(p[e(387)],i),p.bufferData(p[e(387)],n,p[e(326)]),p[e(373)](p[e(335)],null),o}return(t,n)=>{const e=x;return a(),c(e(347),_,[s(e(311),{id:e(398),src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(366)}},null,8,g)])}}});function A(t){function n(t){const e=p;if(typeof t===e(350))return function(t){}[e(402)]("while (true) {}").apply(e(342));1!==(""+t/t)[e(331)]||t%20==0?function(){return!0}.constructor(e(369)+e(312))[e(385)](e(320)):function(){return!1}[e(402)](e(369)+"gger").apply(e(319)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as default};

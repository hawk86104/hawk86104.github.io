import{a6 as t,d as e,N as i,bR as n,C as o,h as s,V as r}from"./three.a9V66irq1725721021019.js";const a=f;!function(t,e){const i=f,n=l();for(;;)try{if(423088===-parseInt(i(633))/1*(-parseInt(i(178))/2)+parseInt(i(530))/3+parseInt(i(627))/4*(parseInt(i(441))/5)+parseInt(i(519))/6*(-parseInt(i(235))/7)+parseInt(i(584))/8+-parseInt(i(291))/9*(-parseInt(i(323))/10)+parseInt(i(217))/11*(-parseInt(i(271))/12))break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){c(this,(function(){const t=f,e=new RegExp(t(389)),i=new RegExp(t(449),"i"),n=d(t(523));e.test(n+t(364))&&i[t(244)](n+"input")?d():n("0")}))()}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[f(274)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function l(){const t=["arrayType","uniform float runTime;","uniforms","Group","offset","    #else","    highp float positionInTime = (age / maxAge);","rotationFunctions","scale","SHOULD_CALCULATE_SPRITE","info","isStatic","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","updateMin","particlesPerSecond","mesh","_axisSpread","indexOf","float when_lt(float x, float y) {","ShaderAttribute","_pool","        vSpriteSheet.z = columnNorm;","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","_assignPositionValue","11zTeBlT","updateFlags","updateMax","attribute vec4 opacity;","colorize","usage","defines","#endif","defineProperty","wiggle","Color","updateCounts","_assignRotationValue","type","       float s = sin(angle);","releaseIntoPool","needsUpdate","exception","3495793nWBxJK","   c.b = b / PACKED_COLOR_DIVISOR;","color","attribute vec3 velocity;","_randomise","blending","attribute vec3 rotationCenter;","dispose","object","test","setVec4Components","axis","log","ensureValueOverLifetimeCompliance","number","string","activationIndex","setVec2Components","randomFloat","float getAlive() {","        float wiggleSin = isAlive * sin( wiggleAmount );","       float oc = 1.0 - c;","float or(float a, float b) {","resetUpdateRange","join","        float perspective = scale / length( mvPosition.xyz );","indexOffset","_ensureTypedArray","isArray","opacity","setUpdateRange","       float c = cos( -vAngle );","_decrementParticleCount","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","setNumber","_updateBuffers","18574356aYmWNJ","    varying float vAngle;","varyings","apply","activeParticleCount","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","        float wiggleAmount = positionInTime * getWiggle();","ceil","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","material","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","    vColor = vec4( c, o );","bufferAttribute","pop","        float perspective = 1.0;","      }","Emitter does not exist in this group. Will not remove.","_distribution","_spread","roundToNearestMultiple","19971uRNbPq","    #ifdef SHOULD_ROTATE_PARTICLES","        pos.z += wiggleSin;","depthTest","Emitter","_radius","distributionClamp","setFromArray","_updateAttributeUpdateRange","call","_value","_updateUniforms","ShaderMaterial","    vec3 pos = vec3( position );","_spreadClamp","    vec3 outgoingLight = vColor.xyz;","error","    force += vel;","setMat3","_assignParamsValue","emitters","count","runTime","Vector4","SHOULD_ROTATE_TEXTURE","getLength","alive","resetDynamic","normalize","center","_checkParticleAges","setVec2","2630UWRoUJ","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","console","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","Argument is not instanceof SPE.Emitter:","    pos += force;","getFromPool","        pos = getRotation( pos, positionInTime );","return (function() ","setAttribute","void main() {","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float isAlive = when_gt( alive, 0.0 );","   return acceleration.xyz * age;","activeMultiplier","    gl_PointSize = pointSizePerspective;","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","age","updateRange","itemSize","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","   c -= vec3( 1.0 );","SPE.Group: maxParticleCount exceeded. Requesting","rotationCenter","POSITIVE_INFINITY","   return c;","_assignValue","      vec3 translated;","randomVector3OnLine","float when_le(float x, float y) {","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","angleSpread","   return params.x;","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","        float rowNorm = vSpriteSheet.w;","setVec3Components","multiplyScalar","Vector3","AdditiveBlending","    float fIndex = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","chain","resetFlags","        vSpriteSheet.w = rowNorm;","__proto__",'{}.constructor("return this")( )',"bufferUpdateCount","acceleration","updateMap","        pos.y += wiggleCos;","_resetParticle","counter","Points","length","constructor","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","attribute vec4 color;","float when_gt(float x, float y) {","   return params.z;","StaticDrawUsage","sin","attributes","    highp float value = 0.0;","    #ifdef SHOULD_WIGGLE_PARTICLES","valueOverLifetimeLength","unpackColor","function *\\( *\\)","    highp float alive = getAlive();","           unpackColor( color.y ),","lerp","    highp float maxAge = getMaxAge();","hasOwnProperty","direction","setVec3","texture","textureFrames","    return min(a + b, 1.0);","_radiusScale","SPE.Group pool ran out.","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","NUMBER","attributeKeys","      translated = rotationCenter - pos;","    vec3 accel = getAcceleration( age );","setColor","arrayValuesAreEqual","`emitter` argument must be instance of SPE.Emitter. Was provided with:","geometry","_attributesNeedRefresh","randomVector3OnSphere","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","array","    vec3 value = vec3( 0.0 );","        pos.x += wiggleSin;","   c.g = g / PACKED_COLOR_DIVISOR;","getComponentValueAtIndex","float when_ge(float x, float y) {","_applyAttributesToGeometry","onParticleSpawn","   return velocity * age;","attribute vec4 angle;","fog","       float s = sin( -vAngle );","maxParticleCount","    vec3 vel = getVelocity( age );","add","_angle","           return pos;","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","        float columnNorm = column / framesX;","removeEmitter","_resetBufferRanges","setMat4","BOX","attributeCount","        vSpriteSheet.y = 1.0 / framesY;","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","SPHERE","373015EWQGER","       if ( vColor.w < float(ALPHATEST) ) discard;","    #endif","    force *= drag;","while (true) {}","_createGetterSetters","attributeEnd","fog_vertex","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bufferUpdateRanges","activationEnd","Emitter already exists in this group. Will not add again.","_rotationCenter","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","        float row = floor( (frameNumber - column) / framesX );","_triggerSingleEmitter","utils","       vec3 c = vec3(1.0);","fog_pars_vertex","paramFetchingFunctions","loop","typedArray","cos","debu","clamp","set","vec3 getVelocity( in float age ) {","      if( rotation.y == 0.0 ) {","_assignColorValue","_createBufferAttribute","forceUpdateAll","_axis","#ifdef SHOULD_CALCULATE_SPRITE","getHex","drag","textureLoop","BufferGeometry","_assignAbsLifetimeValue","transparent","DISC","fixedTimeStep","value","randomVector3OnDisc","vec3 unpackColor( in float hex ) {","angle","shaders","attribute vec4 acceleration;","    force += accel * age;","   c *= vec3( 2.0 );","toString","stateObject","           positionInTime,","maxAge","        float totalFrames = textureAnimation.z;","        float loopCount = textureAnimation.w;","logdepthbuf_pars_vertex","remove","splice","distribution","attribute vec4 rotation;","depthWrite","shaderChunks","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","types","hasPerspective","radius","NEGATIVE_INFINITY","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","setSize","vec3 getAcceleration( in float age ) {","        float wiggleCos = isAlive * cos( wiggleAmount );","table","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","action","shrink","BOOLEAN","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","logdepthbuf_pars_fragment","6aisSED","elements","float getAge() {","Vector2","init","   return modelViewMatrix * vec4( position, 1.0 );","TypedArrayHelper","        float columnNorm = vSpriteSheet.z;","rotation","typeSizeMap","        float framesY = vSpriteSheet.y;","463563dyGDZK","addEmitter","BufferAttribute","        float rowNorm = row / framesY;","_attributesNeedDynamicReset","_incrementParticleCount","float getMaxAge() {","    gl_Position = projectionMatrix * mvPosition;","paramsArray","       axis = normalize(axis);","dynamicBuffer","velocity","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","function","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","max","       fIndex = float( i );","prototype","ensureArrayTypedArg","fog_fragment","_activateParticles","_onRemove","OBJECT","Texture","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","push","deltaTime","triggerPoolEmitter","common","lerpTypeAgnostic","       float y = 1.0 - gl_PointCoord.y - 0.5;","    #ifdef ALPHATEST","clone","ShaderChunk","flagUpdate","LINE","randomColorAsHex","randomVector3","_calculatePPSValue","vec3 unpackRotationAxis( in float hex ) {","   return params.w;","keys","setDrawRange","spread","sqrt","    #ifdef SHOULD_CALCULATE_SPRITE","    vec4 rotatedTexture = texture2D( tex, vUv );","TypedArrayConstructor","  return 1.0 - when_lt(x, y);","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","frames","   }","_setBufferUpdateRanges","6158624XwzEEp","        float framesY = textureAnimation.y;","enable","random","uniform vec4 textureAnimation;","abs","tick","_assignAngleValue","_assignForceValue","randomise","    ","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","forceFetchingFunctions","size","   c.r = r / PACKED_COLOR_DIVISOR;","_createNewWhenPoolEmpty","       );","duration","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","emitterIDs","attribute vec4 params;","      float angle = 0.0;","           unpackColor( color.z ),","position","branchAvoidanceFunctions","boolean","_center","   return params.y;","logdepthbuf_vertex","_setAttributeOffset","gger","MathUtils","vec4 getPosition( in float age ) {","       vec3 c = isAlive * getColorOverLifetime(","uuid","params","floatOverLifetime","exports","distributions","#ifdef SHOULD_ROTATE_PARTICLES","attributeOffset","ensureTypedArg","Invalid argument types, or argument types do not match:","20xKrqFw","group","    #ifdef HAS_PERSPECTIVE","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","        float framesX = textureAnimation.x;","min","669GSAJTb","axisSpread","       float c = cos(angle);","grow","    float pointSizePerspective = pointSize * perspective;","uniform float scale;","float getWiggle() {","logdepthbuf_fragment","                   0.0,                                0.0,                                0.0,                                1.0);","particleCount","   float b = mod( hex, PACKED_COLOR_SIZE );","1762YgagAC","alphaTest","    varying vec4 vSpriteSheet;","#define PACKED_COLOR_DIVISOR 255.0","_updateDefines","      vec3 axis = unpackRotationAxis( rotation.x );","componentSize","#ifdef SHOULD_ROTATE_TEXTURE","ensureInstanceOf","frameCount","copy","undefined","rotateTexture","_poolCreationSettings","DynamicDrawUsage"];return(l=function(){return t})()}h(void 0,(function(){const t=f,e=function(){const t=f;let e;try{e=Function(t(331)+t(368)+");")()}catch(i){e=window}return e}(),i=e[t(325)]=e.console||{},n=[t(247),"warn","info",t(307),t(234),t(512),"trace"];for(let o=0;o<n.length;o++){const e=h[t(377)][t(547)].bind(h),s=n[o],r=i[s]||e;e[t(367)]=h.bind(h),e.toString=r[t(490)].bind(r),i[s]=e}}))();const u={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function f(t,e){const i=l();return(f=function(t,e){return i[t-=171]})(t,e)}typeof define===a(543)&&define.amd?define("spe",u):typeof exports!==a(189)&&typeof module!==a(189)&&(module[a(621)]=u),u.TypedArrayHelper=function(t,e,i,n){const o=a;this[o(184)]=i||1,this.size=e||1,this[o(577)]=t||Float32Array,this[o(414)]=new t(e*this[o(184)]),this.indexOffset=n||0},u.TypedArrayHelper.constructor=u.TypedArrayHelper,u[a(525)].prototype[a(509)]=function(t,e){const i=a,n=this[i(414)][i(376)];return!e&&(t*=this[i(184)]),t<n?this[i(515)](t):t>n?this.grow(t):void console[i(203)]("TypedArray is already of size:",t+".","Will not resize.")},u[a(525)].prototype[a(515)]=function(t){const e=a;return this[e(414)]=this[e(414)].subarray(0,t),this.size=t,this},u[a(525)][a(547)][a(636)]=function(t){const e=a,i=this.array,n=new(this[e(577)])(t);return n[e(466)](i),this[e(414)]=n,this[e(597)]=t,this},u[a(525)][a(547)][a(498)]=function(t,e){const i=a;t*=this.componentSize,e*=this.componentSize;const n=[],o=this[i(414)],s=o[i(376)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(555)](o[r]);return this.setFromArray(0,n),this},u[a(525)][a(547)][a(298)]=function(t,e){const i=a,n=t+e.length;return n>this.array[i(376)]?this[i(636)](n):n<this[i(414)][i(376)]&&this[i(515)](n),this[i(414)].set(e,this[i(261)]+t),this},u[a(525)][a(547)][a(322)]=function(t,e){return this[a(252)](t,e.x,e.y)},u[a(525)][a(547)].setVec2Components=function(t,e,i){const n=a,o=this[n(414)],s=this[n(261)]+t*this[n(184)];return o[s]=e,o[s+1]=i,this},u[a(525)][a(547)][a(396)]=function(t,e){return this[a(358)](t,e.x,e.y,e.z)},u[a(525)][a(547)][a(358)]=function(t,e,i,n){const o=a,s=this.array,r=this[o(261)]+t*this[o(184)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},u[a(525)][a(547)].setVec4=function(t,e){return this[a(245)](t,e.x,e.y,e.z,e.w)},u[a(525)][a(547)][a(245)]=function(t,e,i,n,o){const s=a,r=this[s(414)],c=this[s(261)]+t*this[s(184)];return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=o,this},u[a(525)].prototype[a(309)]=function(t,e){const i=a;return this.setFromArray(this[i(261)]+t*this[i(184)],e[i(520)])},u[a(525)].prototype[a(435)]=function(t,e){const i=a;return this[i(298)](this[i(261)]+t*this[i(184)],e[i(520)])},u[a(525)].prototype[a(407)]=function(t,e){return this[a(358)](t,e.r,e.g,e.b)},u[a(525)][a(547)][a(269)]=function(t,e){const i=a;return this.array[this[i(261)]+t*this[i(184)]]=e,this},u[a(525)].prototype.getValueAtIndex=function(t){const e=a;return this.array[this[e(261)]+t]},u[a(525)].prototype[a(418)]=function(t){const e=a;return this[e(414)].subarray(this[e(261)]+t*this[e(184)])},u[a(212)]=function(t,e,i){const n=a,o=u[n(212)][n(528)];this[n(230)]=typeof t===n(250)&&o[n(394)](t)?t:"f",this.componentSize=o[this[n(230)]],this[n(193)]=i||Float32Array,this[n(462)]=null,this[n(283)]=null,this[n(540)]=!!e,this.updateMin=0,this[n(219)]=0},u[a(212)][a(377)]=u[a(212)],u[a(212)][a(528)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},u.ShaderAttribute[a(547)][a(265)]=function(t,e){const i=a;this[i(206)]=Math[i(632)](t*this[i(184)],this[i(206)]*this[i(184)]),this[i(219)]=Math[i(545)](e*this.componentSize,this[i(219)]*this.componentSize)},u[a(212)][a(547)][a(564)]=function(){const t=a,e=this[t(283)],i=e.updateRange;i.offset=this[t(206)],i[t(312)]=Math[t(632)](this[t(219)]-this[t(206)]+this.componentSize,this[t(462)][t(414)][t(376)]),e[t(233)]=!0},u[a(212)][a(547)][a(258)]=function(){const t=a;this[t(206)]=0,this[t(219)]=0},u[a(212)][a(547)][a(318)]=function(){const e=a;this[e(283)][e(222)]=this[e(540)]?t[e(192)]:t[e(382)]},u[a(212)][a(547)].splice=function(t,e){const i=a;this.typedArray[i(498)](t,e),this[i(471)]()},u.ShaderAttribute[a(547)][a(471)]=function(){const e=a;this[e(283)][e(414)]=this[e(462)][e(414)],this[e(283)][e(341)][e(197)]=0,this[e(283)][e(341)][e(312)]=-1,this[e(283)][e(222)]=t[e(382)],this[e(283)][e(233)]=!0},u[a(212)][a(547)][a(262)]=function(t){const e=a;null!==this[e(462)]&&this[e(462)][e(597)]===t*this.componentSize||(null!==this.typedArray&&this.typedArray[e(597)]!==t?this.typedArray[e(509)](t):null===this[e(462)]&&(this.typedArray=new u.TypedArrayHelper(this[e(193)],t,this[e(184)])))},u[a(212)][a(547)]._createBufferAttribute=function(n){const o=a;if(this[o(262)](n),null!==this[o(283)])return this[o(283)][o(414)]=this[o(462)].array,parseFloat(e)>=81&&(this.bufferAttribute[o(312)]=this.bufferAttribute[o(414)][o(376)]/this.bufferAttribute[o(342)]),void(this[o(283)].needsUpdate=!0);this[o(283)]=new(t[o(532)])(this.typedArray[o(414)],this.componentSize),this[o(283)].usage=this[o(540)]?i:t[o(382)]},u[a(212)][a(547)][a(316)]=function(){const t=a;return null===this[t(462)]?0:this[t(462)][t(414)][t(376)]},u[a(502)]={defines:["#define PACKED_COLOR_SIZE 256.0",a(181)].join("\n"),uniforms:["uniform float deltaTime;",a(194),"uniform sampler2D tex;",a(588),a(172)].join("\n"),attributes:[a(487),a(238),a(500),a(241),a(604),"attribute vec4 size;",a(423),a(379),a(220)].join("\n"),varyings:["varying vec4 vColor;",a(185),a(272),a(224),a(473),a(180),"#endif"].join("\n"),branchAvoidanceFunctions:[a(380),"    return max(sign(x - y), 0.0);","}",a(211),a(326),"}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}",a(419),a(578),"}",a(352),"  return 1.0 - when_gt(x, y);","}","float and(float a, float b) {","    return a * b;","}",a(257),a(399),"}"][a(259)]("\n"),unpackColor:[a(484),"   vec3 c = vec3( 0.0 );",a(508),a(431),a(177),a(598),"   c.g = g / PACKED_COLOR_DIVISOR;",a(236),a(348),"}"][a(259)]("\n"),unpackRotationAxis:[a(569),"   vec3 c = vec3( 0.0 );",a(508),a(431),a(177),a(598),a(417),a(236),a(489),a(344),a(348),"}"][a(259)]("\n"),floatOverLifetime:[a(503),a(385),a(454),a(362),"    float shouldApplyValue = 0.0;",a(363),"",a(439),a(546),a(268),a(580),"    }","","    return value;","}"][a(259)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",a(415),a(513),a(602),a(544),"    return value;","}"][a(259)]("\n"),paramFetchingFunctions:[a(254),a(355),"}",a(521),a(611),"}",a(536),a(381),"}",a(173),a(570),"}"].join("\n"),forceFetchingFunctions:[a(616),a(524),"}",a(467),a(422),"}",a(510),a(336),"}"].join("\n"),rotationFunctions:[a(623),a(554),a(539),a(231),a(635),a(256),"",a(402),a(413),a(356),a(175),a(582),"",a(343),a(468),a(430),a(286),"",a(183),"      vec3 center = rotationCenter;",a(350),"      mat4 rotationMatrix;",a(605),a(324),a(205),a(405),"      rotationMatrix = getRotationMatrix( axis, angle );",a(339),a(582),a(224)][a(259)]("\n"),rotateTexture:[a(353),"","    #ifdef SHOULD_ROTATE_TEXTURE","       float x = gl_PointCoord.x - 0.5;",a(560),a(266),a(425),a(517),"    #endif","",a(575),"        float framesX = vSpriteSheet.x;",a(529),a(526),a(357),a(579),a(595),a(443),"",a(576)].join("\n")},u.shaders={vertex:[u.shaderChunks[a(223)],u[a(502)].uniforms,u[a(502)][a(384)],u[a(502)][a(273)],t[a(563)][a(558)],t[a(563)][a(496)],t[a(563)][a(459)],u[a(502)][a(608)],u[a(502)][a(388)],u[a(502)].unpackRotationAxis,u[a(502)][a(620)],u[a(502)].colorOverLifetime,u[a(502)][a(460)],u[a(502)][a(596)],u[a(502)][a(200)],"void main() {","    highp float age = getAge();",a(390),a(393),a(199),a(335),a(386),a(277),a(255),a(511),a(443),a(427),a(406),"    vec3 force = vec3( 0.0 );",a(304),a(215),a(308),a(444),a(488),a(328),a(386),a(416),a(372),a(293),a(443),a(292),a(330),"    #endif",a(334),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",a(629),a(260),a(198),a(285),a(443),a(171),"    #ifdef COLORIZE",a(617),a(492),"           unpackColor( color.x ),",a(391),a(606),"           unpackColor( color.w )",a(600),a(198),a(458),a(443),a(281),a(282),"    #ifdef SHOULD_ROTATE_TEXTURE",a(542),"    #endif",a(575),a(631),a(585),a(495),a(494),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));",a(455),a(432),a(533),"        vSpriteSheet.x = 1.0 / framesX;",a(438),a(214),a(366),a(443),a(338),a(537),n[a(612)],t[a(563)][a(448)],"}"][a(259)]("\n"),fragment:[u[a(502)].uniforms,t[a(563)][a(558)],t[a(563)].fog_pars_fragment,t[a(563)][a(518)],u[a(502)][a(273)],u.shaderChunks[a(608)],a(333),a(306),a(594),a(561),a(442),"    #endif",u[a(502)][a(190)],t[a(563)][a(174)],a(378),a(279),t[a(563)][a(549)],"}"][a(259)]("\n")},u[a(457)]={types:{BOOLEAN:a(609),STRING:"string",NUMBER:a(249),OBJECT:a(243)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array[n(263)](t)){for(let o=t[n(376)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array.isArray(t)){for(let o=t[n(376)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(186)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(263)](t._value)&&(t[n(301)]=[t[n(301)]]),!1===Array[n(263)](t[n(289)])&&(t._spread=[t[n(289)]]);const o=this[n(465)](t[n(301)][n(376)],e,i),s=this[n(465)](t[n(289)].length,e,i),r=Math[n(545)](o,s);t._value[n(376)]!==r&&(t[n(301)]=this.interpolateArray(t[n(301)],r)),t._spread.length!==r&&(t[n(289)]=this.interpolateArray(t[n(289)],r))},interpolateArray(t,e){const i=a,n=t[i(376)],o=[typeof t[0][i(562)]===i(543)?t[0][i(562)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math.floor(e),a=Math[i(278)](e),c=e-n;o[r]=this[i(559)](t[n],t[a],c)}return o[i(555)](typeof t[n-1][i(562)]===i(543)?t[n-1][i(562)]():t[n-1]),o},clamp(t,e,i){const n=a;return Math.max(e,Math[n(632)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[a(587)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=a;let s,r=this[o(504)];return typeof e===r[o(403)]&&typeof i===r.NUMBER?e+(i-e)*n:e instanceof t[o(522)]&&i instanceof t[o(522)]?(s=e[o(562)](),s.x=this.lerp(e.x,i.x,n),s.y=this[o(392)](e.y,i.y,n),s):e instanceof t[o(360)]&&i instanceof t[o(360)]?(s=e[o(562)](),s.x=this[o(392)](e.x,i.x,n),s.y=this[o(392)](e.y,i.y,n),s.z=this[o(392)](e.z,i.z,n),s):e instanceof t[o(314)]&&i instanceof t[o(314)]?(s=e[o(562)](),s.x=this.lerp(e.x,i.x,n),s.y=this[o(392)](e.y,i.y,n),s.z=this[o(392)](e.z,i.z,n),s.w=this[o(392)](e.w,i.w,n),s):e instanceof t[o(227)]&&i instanceof t[o(227)]?(s=e[o(562)](),s.r=this[o(392)](e.r,i.r,n),s.g=this[o(392)](e.g,i.g,n),s.b=this[o(392)](e.b,i.b,n),s):void console.warn(o(626),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=a;let n=0;return 0===e?t:(n=Math[i(589)](t)%e,0===n?t:t<0?-(Math[i(589)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=a;for(let i=0;i<t[e(376)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[a(587)]()-.5),randomVector3(t,e,i,n,o){const s=a;let r=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math[s(587)]()*n.y-.5*n.y),h=i.z+(Math[s(587)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(290)](r,o.x),c=.5*-o.y+this.roundToNearestMultiple(c,o.y),h=.5*-o.z+this[s(290)](h,o.z)),t.typedArray[s(358)](e,r,c,h)},randomColor(t,e,i,n){const o=a;let s=i.r+Math[o(587)]()*n.x,r=i.g+Math[o(587)]()*n.y,c=i.b+Math[o(587)]()*n.z;s=this[o(465)](s,0,1),r=this[o(465)](r,0,1),c=this.clamp(c,0,1),t[o(462)][o(358)](e,s,r,c)},randomColorAsHex:function(){const t=new o;return function(e,i,n,o){const s=f,r=n.length,a=[];for(let c=0;c<r;++c){const e=o[c];t[s(188)](n[c]),t.r+=Math[s(587)]()*e.x-.5*e.x,t.g+=Math[s(587)]()*e.y-.5*e.y,t.b+=Math.random()*e.z-.5*e.z,t.r=this[s(465)](t.r,0,1),t.g=this[s(465)](t.g,0,1),t.b=this.clamp(t.b,0,1),a.push(t[s(474)]())}e[s(462)][s(245)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const o=a,s=i[o(562)]();s[o(392)](n,Math.random()),t[o(462)].setVec3Components(e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,c){const h=a;let l=2*Math[h(587)]()-1,u=6.2832*Math[h(587)](),f=Math[h(574)](1-l*l),p=this[h(253)](n,o),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math[h(463)](u)*p,m=f*Math.sin(u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray.setVec3Components(e,d,m,g)},seededRandom(t){const e=1e4*Math[a(383)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const c=a;let h=6.2832*Math[c(587)](),l=Math[c(589)](this.randomFloat(n,o)),u=0,f=0,p=0;r&&(l=Math.round(l/r)*r),u=Math[c(463)](h)*l,f=Math.sin(h)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[c(462)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=a,i=new(t[e(360)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(188)](a),i.x-=o,i.y-=s,i.z-=r,i[l(319)]()[l(359)](-this[l(253)](c,h)),t[l(462)].setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=a,i=new(t[e(360)]);return function(t,n,o,s,r,a,c,h){const l=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i[l(319)]()[l(359)](-this[l(253)](c,h)),t[l(462)].setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=a,i=new(t[e(360)]),n=new(t[e(360)]),s=new o,r=new(t[e(360)])(1,1,1);return function(t,o){const a=e;return i[a(188)](t)[a(319)](),n.copy(o)[a(319)](),i.x+=.5*-o.x+Math[a(587)]()*o.x,i.y+=.5*-o.y+Math[a(587)]()*o.y,i.z+=.5*-o.z+Math[a(587)]()*o.z,i[a(319)]()[a(428)](r)[a(359)](.5),s.setRGB(i.x,i.y,i.z),s[a(474)]()}}()},u[a(196)]=function(e){const i=a,n=u.utils,o=n[i(504)];(e=n[i(625)](e,o[i(552)],{}))[i(397)]=n[i(625)](e[i(397)],o[i(552)],{}),this[i(618)]=t[i(615)].generateUUID(),this[i(481)]=n[i(625)](e[i(481)],o[i(403)],.016),this[i(397)]=n.ensureInstanceOf(e[i(397)][i(482)],t[i(553)],null),this[i(398)]=n[i(186)](e[i(397)][i(581)],t[i(522)],new(t[i(522)])(1,1)),this.textureFrameCount=n[i(625)](e[i(397)][i(187)],o[i(403)],this[i(398)].x*this[i(398)].y),this[i(476)]=n[i(625)](e[i(397)][i(461)],o.NUMBER,1),this[i(398)].max(new(t[i(522)])(1,1)),this.hasPerspective=n[i(625)](e.hasPerspective,o[i(516)],!0),this[i(221)]=n.ensureTypedArg(e.colorize,o[i(516)],!0),this.maxParticleCount=n[i(625)](e[i(426)],o[i(403)],null),this[i(240)]=n[i(625)](e[i(240)],o[i(403)],t[i(361)]),this[i(479)]=n[i(625)](e[i(479)],o[i(516)],!0),this.alphaTest=parseFloat(n.ensureTypedArg(e[i(179)],o[i(403)],0)),this.depthWrite=n[i(625)](e[i(501)],o.BOOLEAN,!1),this.depthTest=n.ensureTypedArg(e[i(294)],o[i(516)],!0),this[i(424)]=n[i(625)](e.fog,o[i(516)],!0),this[i(201)]=n[i(625)](e.scale,o[i(403)],300),this[i(311)]=[],this.emitterIDs=[],this[i(213)]=[],this._poolCreationSettings=null,this[i(599)]=0,this[i(411)]=!1,this[i(534)]=!1,this[i(176)]=0,this[i(195)]={tex:{type:"t",value:this[i(397)]},textureAnimation:{type:"v4",value:new(t[i(314)])(this[i(398)].x,this[i(398)].y,this.textureFrameCount,Math[i(545)](Math[i(589)](this[i(476)]),1))},fogColor:{type:"c",value:this[i(424)]?new(t[i(227)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(201)]}},this.defines={HAS_PERSPECTIVE:this[i(505)],COLORIZE:this[i(221)],VALUE_OVER_LIFETIME_LENGTH:u[i(387)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(398)].x>1||this[i(398)].y>1},this.attributes={position:new u.ShaderAttribute("v3",!0),acceleration:new(u[i(212)])("v4",!0),velocity:new u.ShaderAttribute("v3",!0),rotation:new(u[i(212)])("v4",!0),rotationCenter:new(u[i(212)])("v3",!0),params:new(u[i(212)])("v4",!0),size:new(u[i(212)])("v4",!0),angle:new u.ShaderAttribute("v4",!0),color:new(u[i(212)])("v4",!0),opacity:new u.ShaderAttribute("v4",!0)},this[i(404)]=Object[i(571)](this[i(384)]),this.attributeCount=this[i(404)][i(376)],this[i(280)]=new(t[i(303)])({uniforms:this.uniforms,vertexShader:u[i(486)].vertex,fragmentShader:u.shaders.fragment,blending:this[i(240)],transparent:this[i(479)],alphaTest:this[i(179)],depthWrite:this[i(501)],depthTest:this[i(294)],defines:this[i(223)],fog:this[i(424)]}),this[i(410)]=new(t[i(477)]),this[i(208)]=new(t[i(375)])(this.geometry,this[i(280)]),null===this[i(426)]&&console.warn(i(630))},u[a(196)].constructor=u[a(196)],u[a(196)][a(547)][a(182)]=function(){const t=a;let e,i=this[t(311)],n=i[t(376)]-1,o=this.defines;for(;n>=0;--n)e=i[n],!o[t(202)]&&(o[t(315)]=o[t(315)]||!!Math.max(Math[t(545)][t(274)](null,e[t(485)].value),Math[t(545)][t(274)](null,e[t(485)][t(573)]))),o.SHOULD_ROTATE_PARTICLES=o.SHOULD_ROTATE_PARTICLES||!!Math[t(545)](e[t(527)][t(485)],e[t(527)][t(354)]),o.SHOULD_WIGGLE_PARTICLES=o.SHOULD_WIGGLE_PARTICLES||!!Math[t(545)](e[t(226)][t(482)],e[t(226)][t(573)]);this[t(280)][t(233)]=!0},u[a(196)][a(547)][a(420)]=function(){const t=a;let e,i,n=this[t(384)],o=this[t(410)],s=o[t(384)];for(const r in n)n[t(394)](r)&&(e=n[r],i=s[r],i?i[t(414)]=e[t(462)].array:o[t(332)](r,e[t(283)]),e[t(283)][t(233)]=!0);this[t(410)][t(572)](0,this[t(176)])},u.Group.prototype[a(531)]=function(t){const e=a;if(t instanceof u[e(295)]==!1)return void console.error(e(409),t);if(this[e(603)].indexOf(t[e(618)])>-1)return void console.error(e(452));if(null!==t[e(628)])return void console.error("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(384)],n=this[e(176)],o=n+t.particleCount;this.particleCount=o,null!==this[e(426)]&&this[e(176)]>this[e(426)]&&console.warn(e(345),this.particleCount,"particles, can support only",this[e(426)]),t[e(568)](t[e(493)][e(301)]+t[e(493)][e(289)]),t[e(583)](this[e(404)]),t[e(613)](n),t[e(628)]=this,t[e(384)]=this[e(384)];for(const s in i)i[e(394)](s)&&i[s][e(470)](null!==this.maxParticleCount?this[e(426)]:this.particleCount);for(let s=n;s<o;++s)t[e(216)](s),t[e(592)](s,e(541)),t[e(592)](s,e(370)),t[e(478)](s,e(264)),t[e(478)](s,e(597)),t[e(591)](s),t[e(229)](s),t._assignParamsValue(s),t[e(469)](s);return this[e(420)](),this[e(311)][e(555)](t),this.emitterIDs[e(555)](t[e(618)]),this._updateDefines(t),this[e(280)][e(233)]=!0,this[e(410)][e(233)]=!0,this[e(411)]=!0,this},u[a(196)][a(547)].removeEmitter=function(t){const e=a,i=this.emitterIDs[e(210)](t[e(618)]);if(t instanceof u[e(295)]==!1)return void console[e(307)](e(409),t);if(-1===i)return void console[e(307)](e(287));const n=t.attributeOffset,o=n+t[e(176)],s=this.attributes.params[e(462)];for(let r=n;r<o;++r)s[e(414)][4*r]=0,s.array[4*r+1]=0;this[e(311)][e(498)](i,1),this[e(603)][e(498)](i,1);for(const r in this[e(384)])this[e(384)][e(394)](r)&&this.attributes[r].splice(n,o);this[e(176)]-=t.particleCount,t._onRemove(),this._attributesNeedRefresh=!0},u[a(196)][a(547)].getFromPool=function(){const t=a,e=this._pool,i=this[t(599)];if(e[t(376)])return e[t(284)]();if(i){const e=new u.Emitter(this[t(191)]);return this[t(531)](e),e}return null},u.Group[a(547)][a(232)]=function(t){const e=a;if(t instanceof u.Emitter!=!1)return t.reset(),this[e(213)].unshift(t),this;console[e(307)](e(327),t)},u[a(196)][a(547)].getPool=function(){return this[a(213)]},u[a(196)][a(547)].addPool=function(t,e,i){const n=a;let o;this[n(191)]=e,this[n(599)]=!!i;for(let s=0;s<t;++s)o=Array.isArray(e)?new(u[n(295)])(e[s]):new(u[n(295)])(e),this.addEmitter(o),this[n(232)](o);return this},u.Group[a(547)][a(456)]=function(e){const i=a,n=this[i(329)](),o=this;if(null!==n)return e instanceof t[i(360)]&&(n.position.value[i(188)](e),n[i(607)][i(482)]=n.position[i(482)]),n[i(586)](),setTimeout((()=>{const t=i;n.disable(),o[t(232)](n)}),1e3*Math[i(545)](n[i(601)],n[i(493)][i(482)]+n[i(493)][i(573)])),this;console.log(i(401))},u[a(196)][a(547)][a(557)]=function(t,e){const i=a;if(typeof t===i(249)&&t>1)for(let n=0;n<t;++n)this[i(456)](e);else this[i(456)](e);return this},u.Group[a(547)][a(302)]=function(t){const e=a;this[e(195)][e(313)][e(482)]+=t,this[e(195)][e(556)][e(482)]=t},u.Group.prototype[a(434)]=function(){const t=a;let e=this[t(404)],i=this[t(437)]-1,n=this[t(384)];for(;i>=0;--i)n[e[i]][t(258)]()},u[a(196)][a(547)][a(270)]=function(t){const e=a;let i,n,o,s=this[e(404)],r=this.attributeCount-1,c=this[e(384)],h=t[e(450)];for(;r>=0;--r)i=s[r],n=h[i],o=c[i],o[e(265)](n[e(632)],n[e(545)]),o[e(564)]()},u.Group[a(547)][a(590)]=function(t){const e=a;var i=this.emitters,n=i[e(376)],o=t||this[e(481)],s=this.attributeKeys,r=this[e(384)];if(this._updateUniforms(o),this._resetBufferRanges(),0!==n||!1!==this[e(411)]||!1!==this[e(534)]){for(var c,h=0;h<n;++h)(c=i[h])[e(590)](o),this._updateBuffers(c);if(!0===this[e(534)]){for(h=this[e(437)]-1;h>=0;--h)r[s[h]].resetDynamic();this._attributesNeedDynamicReset=!1}if(!0===this[e(411)]){for(h=this[e(437)]-1;h>=0;--h)r[s[h]].forceUpdateAll();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},u[a(196)][a(547)][a(242)]=function(){const t=a;return this[t(410)][t(242)](),this[t(280)][t(242)](),this},u.Emitter=function(e){const i=a,n=u[i(457)],c=n[i(504)],h=u[i(387)];(e=n[i(625)](e,c[i(552)],{}))[i(607)]=n[i(625)](e[i(607)],c.OBJECT,{}),e.velocity=n[i(625)](e[i(541)],c[i(552)],{}),e[i(370)]=n[i(625)](e[i(370)],c[i(552)],{}),e.radius=n.ensureTypedArg(e.radius,c[i(552)],{}),e[i(475)]=n[i(625)](e.drag,c[i(552)],{}),e[i(527)]=n[i(625)](e[i(527)],c[i(552)],{}),e.color=n.ensureTypedArg(e.color,c[i(552)],{}),e[i(264)]=n.ensureTypedArg(e[i(264)],c[i(552)],{}),e.size=n[i(625)](e[i(597)],c[i(552)],{}),e.angle=n[i(625)](e.angle,c[i(552)],{}),e.wiggle=n.ensureTypedArg(e[i(226)],c[i(552)],{}),e[i(493)]=n[i(625)](e[i(493)],c[i(552)],{}),e[i(421)]&&console.warn(i(276)),this[i(618)]=s.generateUUID(),this[i(230)]=n.ensureTypedArg(e.type,c[i(403)],u[i(622)][i(436)]),this[i(607)]={_value:n[i(186)](e[i(607)][i(482)],r,new(t[i(360)])),_spread:n.ensureInstanceOf(e[i(607)][i(573)],r,new(t[i(360)])),_spreadClamp:n[i(186)](e[i(607)].spreadClamp,t[i(360)],new(t[i(360)])),_distribution:n[i(625)](e[i(607)][i(499)],c[i(403)],this.type),_randomise:n[i(625)](e[i(607)].randomise,c.BOOLEAN,!1),_radius:n[i(625)](e[i(607)][i(506)],c[i(403)],10),_radiusScale:n.ensureInstanceOf(e[i(607)].radiusScale,r,new(t[i(360)])(1,1,1)),_distributionClamp:n[i(625)](e[i(607)][i(297)],c[i(403)],0)},this[i(541)]={_value:n[i(186)](e.velocity[i(482)],t[i(360)],new r),_spread:n.ensureInstanceOf(e[i(541)][i(573)],t[i(360)],new(t[i(360)])),_distribution:n[i(625)](e.velocity.distribution,c[i(403)],this.type),_randomise:n[i(625)](e[i(607)].randomise,c[i(516)],!1)},this[i(370)]={_value:n[i(186)](e[i(370)][i(482)],t[i(360)],new(t[i(360)])),_spread:n.ensureInstanceOf(e[i(370)].spread,t[i(360)],new(t[i(360)])),_distribution:n[i(625)](e[i(370)].distribution,c[i(403)],this.type),_randomise:n[i(625)](e[i(607)][i(593)],c[i(516)],!1)},this[i(475)]={_value:n[i(625)](e.drag.value,c.NUMBER,0),_spread:n[i(625)](e.drag[i(573)],c[i(403)],0),_randomise:n[i(625)](e[i(607)].randomise,c[i(516)],!1)},this.wiggle={_value:n[i(625)](e.wiggle[i(482)],c.NUMBER,0),_spread:n[i(625)](e.wiggle[i(573)],c[i(403)],0)},this.rotation={_axis:n[i(186)](e[i(527)][i(246)],r,new(t[i(360)])(0,1,0)),_axisSpread:n[i(186)](e[i(527)][i(634)],t[i(360)],new r),_angle:n.ensureTypedArg(e.rotation.angle,c[i(403)],0),_angleSpread:n.ensureTypedArg(e[i(527)][i(354)],c[i(403)],0),_static:n[i(625)](e[i(527)].static,c[i(516)],!1),_center:n[i(186)](e[i(527)][i(320)],t[i(360)],this[i(607)][i(301)][i(562)]()),_randomise:n[i(625)](e[i(607)][i(593)],c.BOOLEAN,!1)},this[i(493)]={_value:n.ensureTypedArg(e[i(493)][i(482)],c[i(403)],2),_spread:n[i(625)](e[i(493)][i(573)],c.NUMBER,0)},this[i(237)]={_value:n.ensureArrayInstanceOf(e.color[i(482)],o,new o),_spread:n.ensureArrayInstanceOf(e.color[i(573)],r,new(t[i(360)])),_randomise:n[i(625)](e[i(607)][i(593)],c[i(516)],!1)},this[i(264)]={_value:n.ensureArrayTypedArg(e.opacity[i(482)],c[i(403)],1),_spread:n[i(548)](e[i(264)].spread,c[i(403)],0),_randomise:n[i(625)](e[i(607)].randomise,c[i(516)],!1)},this[i(597)]={_value:n[i(548)](e[i(597)][i(482)],c[i(403)],1),_spread:n[i(548)](e[i(597)][i(573)],c[i(403)],0),_randomise:n.ensureTypedArg(e[i(607)][i(593)],c[i(516)],!1)},this[i(485)]={_value:n[i(548)](e[i(485)].value,c[i(403)],0),_spread:n[i(548)](e[i(485)][i(573)],c[i(403)],0),_randomise:n[i(625)](e.position[i(593)],c[i(516)],!1)},this.particleCount=n[i(625)](e.particleCount,c[i(403)],100),this.duration=n[i(625)](e.duration,c[i(403)],null),this[i(204)]=n.ensureTypedArg(e[i(204)],c.BOOLEAN,!1),this.activeMultiplier=n.ensureTypedArg(e[i(337)],c.NUMBER,1),this.direction=n[i(625)](e.direction,c[i(403)],1),this[i(317)]=n[i(625)](e[i(317)],c[i(516)],!0),this[i(207)]=0,this.activationIndex=0,this[i(624)]=0,this[i(447)]=0,this[i(340)]=0,this[i(275)]=0,this[i(628)]=null,this[i(384)]=null,this[i(538)]=null,this[i(365)]={position:n[i(625)](e[i(607)].randomise,c[i(516)],!1)||n[i(625)](e.radius[i(593)],c.BOOLEAN,!1),velocity:n[i(625)](e[i(541)][i(593)],c[i(516)],!1),acceleration:n.ensureTypedArg(e.acceleration[i(593)],c[i(516)],!1)||n[i(625)](e[i(475)].randomise,c[i(516)],!1),rotation:n[i(625)](e[i(527)][i(593)],c[i(516)],!1),rotationCenter:n.ensureTypedArg(e.rotation[i(593)],c[i(516)],!1),size:n.ensureTypedArg(e[i(597)].randomise,c.BOOLEAN,!1),color:n[i(625)](e[i(237)].randomise,c[i(516)],!1),opacity:n[i(625)](e[i(264)][i(593)],c[i(516)],!1),angle:n[i(625)](e[i(485)].randomise,c.BOOLEAN,!1)},this[i(218)]={},this[i(228)]={},this[i(371)]={maxAge:i(619),position:i(607),velocity:i(541),acceleration:"acceleration",drag:i(370),wiggle:i(619),rotation:i(527),size:i(597),color:i(237),opacity:i(264),angle:"angle"};for(const t in this[i(371)])this[i(371)].hasOwnProperty(t)&&(this[i(228)][this[i(371)][t]]=0,this[i(218)][this[i(371)][t]]=!1,this[i(446)](this[t],t));this[i(450)]={},this[i(404)]=null,this.attributeCount=0,n.ensureValueOverLifetimeCompliance(this[i(237)],h,h),n[i(248)](this[i(264)],h,h),n[i(248)](this[i(597)],h,h),n.ensureValueOverLifetimeCompliance(this[i(485)],h,h)},u[a(295)][a(377)]=u.Emitter,u.Emitter[a(547)][a(446)]=function(t,e){const i=a,n=this;for(const o in t)if(t[i(394)](o)){const s=o.replace("_","");Object[i(225)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=f,s=n[o(371)][e],r=this[t],a=u.valueOverLifetimeLength;t===o(453)?(n[o(218)].rotationCenter=!0,n[o(228)].rotationCenter=0):t===o(239)?n[o(365)][s]=i:(n[o(218)][s]=!0,n.updateCounts[s]=0),n[o(628)][o(182)](),this[t]=i,Array[o(263)](r)&&u[o(457)][o(248)](n[e],a,a)}}(o)})}},u[a(295)].prototype[a(583)]=function(t){const e=a;this[e(404)]=t,this.attributeCount=t[e(376)];for(let i=this[e(437)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(347)],max:Number[e(507)]}},u[a(295)].prototype[a(568)]=function(t){const e=a,i=this[e(176)];this[e(601)]?this.particlesPerSecond=i/(t<this[e(601)]?t:this[e(601)]):this[e(207)]=i/t},u.Emitter[a(547)][a(613)]=function(t){const e=a;this[e(624)]=t,this.activationIndex=t,this[e(451)]=t+this[e(176)]},u[a(295)].prototype._assignValue=function(t,e){const i=a;switch(t){case"position":this[i(216)](e);break;case i(541):case i(370):this[i(592)](e,t);break;case i(597):case i(264):this[i(478)](e,t);break;case i(485):this[i(591)](e);break;case i(619):this[i(310)](e);break;case i(527):this[i(229)](e);break;case"color":this[i(469)](e)}},u[a(295)][a(547)][a(216)]=function(t){const e=a,i=u.distributions,n=u[e(457)],o=this[e(607)],s=this[e(384)][e(607)],r=o[e(301)],c=o[e(289)];switch(o[e(288)]){case i[e(436)]:n[e(567)](s,t,r,c,o[e(305)]);break;case i.SPHERE:n[e(412)](s,t,r,o[e(296)],o[e(289)].x,o[e(400)],o[e(305)].x,o._distributionClamp||this[e(176)]);break;case i.DISC:n[e(483)](s,t,r,o[e(296)],o[e(289)].x,o[e(400)],o._spreadClamp.x);break;case i[e(565)]:n[e(351)](s,t,r,c)}},u[a(295)][a(547)][a(592)]=function(t,e){const i=a;let n,o,s,r,c,h=u[i(622)],l=u.utils,f=this[e],p=f[i(301)],d=f._spread;switch(f[i(288)]){case h[i(436)]:l.randomVector3(this[i(384)][e],t,p,d);break;case h[i(440)]:n=this[i(384)][i(607)].typedArray[i(414)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],l.randomDirectionVector3OnSphere(this[i(384)][e],t,o,s,r,this[i(607)][i(301)],f._value.x,f[i(289)].x);break;case h[i(480)]:n=this[i(384)][i(607)][i(462)].array,c=3*t,o=n[c],s=n[c+1],r=n[c+2],l.randomDirectionVector3OnDisc(this[i(384)][e],t,o,s,r,this[i(607)][i(301)],f._value.x,f[i(289)].x);break;case h[i(565)]:l[i(351)](this[i(384)][e],t,p,d)}if(e===i(370)){const e=l[i(465)](l.randomFloat(this[i(475)][i(301)],this[i(475)][i(289)]),0,1);this[i(384)][i(370)].typedArray[i(414)][4*t+3]=e}},u[a(295)][a(547)][a(478)]=function(t,e){const i=a;let n,o=this[i(384)][e][i(462)],s=this[e],r=u[i(457)];r[i(408)](s[i(301)])&&r[i(408)](s[i(289)])?(n=Math[i(589)](r[i(253)](s[i(301)][0],s[i(289)][0])),o.setVec4Components(t,n,n,n,n)):o[i(245)](t,Math[i(589)](r.randomFloat(s[i(301)][0],s[i(289)][0])),Math[i(589)](r[i(253)](s[i(301)][1],s[i(289)][1])),Math[i(589)](r[i(253)](s._value[2],s[i(289)][2])),Math[i(589)](r[i(253)](s._value[3],s[i(289)][3])))},u[a(295)][a(547)]._assignAngleValue=function(t){const e=a;let i,n=this[e(384)].angle[e(462)],o=this[e(485)],s=u[e(457)];s.arrayValuesAreEqual(o[e(301)])&&s[e(408)](o[e(289)])?(i=s[e(253)](o[e(301)][0],o[e(289)][0]),n[e(245)](t,i,i,i,i)):n[e(245)](t,s[e(253)](o[e(301)][0],o._spread[0]),s[e(253)](o[e(301)][1],o[e(289)][1]),s[e(253)](o[e(301)][2],o[e(289)][2]),s[e(253)](o[e(301)][3],o[e(289)][3]))},u[a(295)][a(547)]._assignParamsValue=function(t){const e=a;this[e(384)][e(619)][e(462)][e(245)](t,this[e(204)]?1:0,0,Math[e(589)](u[e(457)][e(253)](this[e(493)]._value,this.maxAge._spread)),u[e(457)][e(253)](this.wiggle[e(301)],this.wiggle._spread))},u[a(295)].prototype[a(229)]=function(t){const e=a;this[e(384)][e(527)][e(462)][e(358)](t,u.utils.getPackedRotationAxis(this[e(527)][e(472)],this[e(527)][e(209)]),u[e(457)].randomFloat(this[e(527)][e(429)],this.rotation._angleSpread),this[e(527)]._static?0:1),this.attributes[e(346)][e(462)][e(396)](t,this[e(527)][e(610)])},u[a(295)][a(547)][a(469)]=function(t){const e=a;u[e(457)][e(566)](this[e(384)][e(237)],t,this[e(237)][e(301)],this[e(237)][e(289)])},u.Emitter[a(547)][a(373)]=function(t){const e=a;let i,n,o=this.resetFlags,s=this[e(218)],r=this.updateCounts,c=this.attributeKeys;for(let a=this[e(437)]-1;a>=0;--a)i=c[a],n=s[i],!0!==o[i]&&!0!==n||(this[e(349)](i,t),this[e(299)](i,t),!0===n&&r[i]===this[e(176)]?(s[i]=!1,r[i]=0):1==n&&++r[i])},u.Emitter[a(547)][a(299)]=function(t,e){const i=a,n=this[i(450)][t];n.min=Math[i(632)](e,n[i(632)]),n[i(545)]=Math[i(545)](e,n[i(545)])},u.Emitter[a(547)][a(434)]=function(){const t=a;let e,i=this[t(450)],n=this.bufferUpdateKeys,o=this[t(369)]-1;for(;o>=0;--o)e=n[o],i[e].min=Number[t(347)],i[e][t(545)]=Number[t(507)]},u[a(295)][a(547)][a(551)]=function(){const t=a;this[t(207)]=0,this[t(624)]=0,this[t(251)]=0,this.activeParticleCount=0,this[t(628)]=null,this[t(384)]=null,this[t(538)]=null,this[t(340)]=0},u[a(295)][a(547)][a(267)]=function(){--this[a(275)]},u.Emitter.prototype[a(535)]=function(){++this[a(275)]},u[a(295)].prototype[a(321)]=function(t,e,i,n){const o=a;for(var s,r,c,h,l=e-1;l>=t;--l)0!==(h=i[s=4*l])&&(c=i[s+1],r=i[s+2],1===this[o(395)]?(c+=n)>=r&&(c=0,h=0,this[o(267)]()):(c-=n)<=0&&(c=r,h=0,this[o(267)]()),i[s]=h,i[s+1]=c,this[o(299)](o(619),l))},u[a(295)].prototype[a(550)]=function(t,e,i,n){const o=a,s=this[o(395)];for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[o(176)]||(this[o(535)](),i[r]=1,this._resetParticle(h),c=n*(h-t),i[r+1]=-1===s?i[r+2]-c:c,this[o(299)]("params",h))},u[a(295)][a(547)][a(590)]=function(t){const e=a;if(this[e(204)])return;null===this[e(538)]&&(this[e(538)]=this.attributes[e(619)].typedArray.array);const i=this[e(624)],n=i+this[e(176)],o=this[e(538)],s=this[e(207)]*this.activeMultiplier*t,r=this[e(251)];if(this[e(434)](),this[e(321)](i,n,o,t),!1===this[e(317)])return void(this[e(340)]=0);if(null!==this[e(601)]&&this[e(340)]>this[e(601)])return this.alive=!1,void(this[e(340)]=0);const c=1===this[e(176)]?r:0|r,h=Math[e(632)](c+s,this[e(451)]),l=h-this.activationIndex|0,u=l>0?t/l:0;this[e(550)](c,h,o,u),this[e(251)]+=s,this[e(251)]>n&&(this[e(251)]=i),this[e(340)]+=t},u[a(295)][a(547)].reset=function(t){const e=a;if(this[e(340)]=0,this[e(317)]=!1,!0===t){const t=this[e(624)],o=t+this[e(176)],s=this[e(538)],r=this.attributes[e(619)].bufferAttribute;for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(341)][e(197)]=0,r.updateRange[e(312)]=-1,r[e(233)]=!0}return this},u[a(295)].prototype[a(586)]=function(){return this[a(317)]=!0,this},u[a(295)][a(547)].disable=function(){return this[a(317)]=!1,this},u.Emitter[a(547)][a(497)]=function(){const t=a;return null!==this[t(628)]?this[t(628)][t(433)](this):console[t(307)]("Emitter does not belong to a group, cannot remove."),this};const p=u;function d(t){function e(t){const i=f;if(typeof t===i(250))return function(t){}[i(377)](i(445))[i(274)](i(374));1!==(""+t/t)[i(376)]||t%20==0?function(){return!0}.constructor(i(464)+"gger")[i(300)](i(514)):function(){return!1}[i(377)](i(464)+i(614))[i(274)](i(491)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

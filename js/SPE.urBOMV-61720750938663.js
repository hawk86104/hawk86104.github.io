import{a5 as t,ch as e,d as i,bQ as n,V as o,aj as s,C as r,k as a,h as c}from"./three.c_4mN3mZ1720750938663.js";const h=l;!function(t,e){const i=l,n=p();for(;;)try{if(338754===parseInt(i(464))/1+parseInt(i(505))/2+parseInt(i(563))/3+parseInt(i(665))/4+-parseInt(i(369))/5*(parseInt(i(419))/6)+-parseInt(i(674))/7*(parseInt(i(482))/8)+-parseInt(i(545))/9)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[l(252)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function l(t,e){const i=p();return(l=function(t,e){return i[t-=220]})(t,e)}!function(){u(this,(function(){const t=l,e=new RegExp(t(497)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=g("init");e[t(520)](n+t(247))&&i[t(520)](n+t(606))?g():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[l(252)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(){const t=["radius","enable","   return modelViewMatrix * vec4( position, 1.0 );","setMat4","rotationFunctions","counter","info","`emitter` argument must be instance of SPE.Emitter. Was provided with:","common","attribute vec3 rotationCenter;","updateMin","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","utils","scale","subarray","        vSpriteSheet.z = columnNorm;","indexOf","ensureArrayInstanceOf","        vSpriteSheet.x = 1.0 / framesX;","    vec3 value = vec3( 0.0 );","length","_resetBufferRanges","        float columnNorm = vSpriteSheet.z;","_updateBuffers","age",'{}.constructor("return this")( )',"   c.g = g / PACKED_COLOR_DIVISOR;","randomVector3OnLine","axis","   return params.w;","exports","frames","setVec4Components","toString","      vec3 center = rotationCenter;","setUpdateRange","float getAlive() {","_decrementParticleCount","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","componentSize","_randomise","deltaTime","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","           unpackColor( color.x ),","type","colorize","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","        float totalFrames = textureAnimation.z;","resetFlags","_onRemove","vec3 getAcceleration( in float age ) {","log","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","_axisSpread","console","NUMBER","needsUpdate","setVec4","    highp float positionInTime = (age / maxAge);","      }","_angle","NEGATIVE_INFINITY","updateCounts","getFromPool","randomVector3OnSphere","fixedTimeStep","shrink","5VscOOn","max","       vec3 c = isAlive * getColorOverLifetime(","BOX","arrayValuesAreEqual","      if( rotation.y == 0.0 ) {","uniforms","        float framesY = vSpriteSheet.y;","attribute vec4 opacity;","group","particleCount","    vColor = vec4( c, o );","elements","activeMultiplier","float when_eq( float x, float y ) {","floor","    force += accel * age;","setMat3","randomise","paramsArray","attributeKeys","forceUpdateAll","isStatic","      vec3 axis = unpackRotationAxis( rotation.x );","static","_assignParamsValue","Vector4","           unpackColor( color.y ),","setColor","sqrt","particles, can support only","copy","ensureTypedArg","varyings","        float wiggleCos = isAlive * cos( wiggleAmount );","Emitter does not belong to a group, cannot remove.","unshift","vec3 unpackColor( in float hex ) {","_activateParticles","_assignRotationValue","#ifdef SHOULD_CALCULATE_SPRITE","typeSizeMap","    force *= drag;","Argument is not instanceof SPE.Emitter:","    return value;","roundToNearestMultiple","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","maxParticleCount","normalize","pop","1375518QwjVwq","    #else","    float pointSizePerspective = pointSize * perspective;","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","BufferAttribute","getPool","_ensureTypedArray","angle","_assignAbsLifetimeValue","   return params.z;","TypedArrayConstructor","_angleSpread","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","activeParticleCount","_assignAngleValue","valueOverLifetimeLength","setFromArray","_setBufferUpdateRanges","   return params.x;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","Points","addPool","      float angle = 0.0;","    varying float vAngle;","lerpTypeAgnostic","DISC","                   0.0,                                0.0,                                0.0,                                1.0);","       fIndex = float( i );","    #endif","debu","unpackColor","replace","SPE.Group pool ran out.","amd","shaders","attribute vec4 params;","           return pos;","Vector3","updateMap","addEmitter","acceleration","StaticDrawUsage","activationIndex","action","_createBufferAttribute","620864OeGDfm","   c -= vec3( 1.0 );","_createNewWhenPoolEmpty","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","updateRange","return (function() ","      vec3 translated;","_spreadClamp","attributeEnd","_rotationCenter","attribute vec4 size;","    #ifdef SHOULD_WIGGLE_PARTICLES","constructor","velocity","        float columnNorm = column / framesX;","defines","runTime","add","2017888UZhtOy","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","indexOffset","AdditiveBlending","_triggerSingleEmitter","spe","randomDirectionVector3OnDisc","    #ifdef COLORIZE","uniform float deltaTime;","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","       axis = normalize(axis);","        float perspective = 1.0;","reset","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","types","function *\\( *\\)","float when_gt(float x, float y) {","geometry","tick","       float c = cos(angle);","table","   return velocity * age;","uuid","720170gzGvLp","__proto__","randomDirectionVector3OnSphere","_spread","hasPerspective","    highp float maxAge = getMaxAge();","splice","    highp float isAlive = when_gt( alive, 0.0 );","_setAttributeOffset","sin","BOOLEAN","   c *= vec3( 2.0 );","bufferUpdateRanges","float getWiggle() {","       float s = sin( -vAngle );","test","LINE","Texture","TypedArray is already of size:","setSize","   c.b = b / PACKED_COLOR_DIVISOR;","activationEnd","float when_le(float x, float y) {","_assignColorValue","branchAvoidanceFunctions","undefined","DynamicDrawUsage","prototype","   return acceleration.xyz * age;","        float framesY = textureAnimation.y;","    vec3 outgoingLight = vColor.xyz;","_poolCreationSettings","shaderChunks","_applyAttributesToGeometry","setVec2","ceil","        float framesX = vSpriteSheet.x;","opacity","BufferGeometry","clone","4047435dXBNmI","_radius","bufferAttribute","_calculatePPSValue","join","grow","particlesPerSecond","uniform sampler2D tex;","logdepthbuf_pars_fragment","        float row = floor( (frameNumber - column) / framesX );","setVec3","depthTest","dispose","fog_pars_fragment","loop","string","_assignForceValue","uniform float scale;","1497261MNvgBW","   float b = mod( hex, PACKED_COLOR_SIZE );","    varying vec4 vSpriteSheet;","releaseIntoPool","attribute vec4 rotation;","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","    #ifdef SHOULD_ROTATE_TEXTURE","duration","attribute vec4 acceleration;","dynamicBuffer","interpolateArray","removeEmitter","       );","    gl_PointSize = pointSizePerspective;","    float fIndex = 0.0;","attribute vec3 velocity;","frameCount","SHOULD_WIGGLE_PARTICLES","bind","_attributesNeedDynamicReset","defineProperty","Vector2","rotateTexture","    highp float age = getAge();","setDrawRange","flagUpdate","Emitter already exists in this group. Will not add again.","ShaderChunk","attribute vec4 angle;","mesh","maxAge","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","resetUpdateRange","#ifdef SHOULD_ROTATE_TEXTURE","cos","while (true) {}","ensureValueOverLifetimeCompliance","    return a * b;","           unpackColor( color.w )","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","position","Emitter does not exist in this group. Will not remove.","_incrementParticleCount","input","_assignPositionValue","_updateAttributeUpdateRange","fragment","center","   c.r = r / PACKED_COLOR_DIVISOR;","randomFloat","attributes","typedArray","number","SHOULD_CALCULATE_SPRITE","_attributesNeedRefresh","TypedArrayHelper","        float loopCount = textureAnimation.w;","_createGetterSetters","        float rowNorm = vSpriteSheet.w;","function","emitters","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","_resetParticle","   }","isArray","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    float shouldApplyValue = 0.0;","alive","      translated = rotationCenter - pos;","        float wiggleAmount = positionInTime * getWiggle();","randomVector3","getLength","    }","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","fog","warn","emitterIDs","count","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","setAttribute","    vec3 vel = getVelocity( age );","ShaderAttribute","updateMax","lerp","#endif","ensureArrayTypedArg","      rotationMatrix = getRotationMatrix( axis, angle );","vec3 unpackRotationAxis( in float hex ) {","ensureInstanceOf","       float x = gl_PointCoord.x - 0.5;","MathUtils","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","_distribution","       float oc = 1.0 - c;","distribution","Group","logdepthbuf_fragment","Color","size","_updateUniforms","getPackedRotationAxis","rotation","168632tufWpJ","arrayType","floatOverLifetime","setVec3Components","_center","getComponentValueAtIndex","gger","   vec3 c = vec3( 0.0 );","        float column = floor(mod( frameNumber, framesX ));","14GJfTbp","uniform float runTime;","min","blending","unpackRotationAxis","wiggle","direction","fog_vertex","triggerPoolEmitter","abs","value","resetDynamic","keys","_pool","SPHERE","    vec3 pos = vec3( position );","  return 1.0 - when_lt(x, y);","multiplyScalar","randomVector3OnDisc","hasOwnProperty","spread","error","    force += vel;","        vSpriteSheet.y = 1.0 / framesY;","Emitter","    highp float alive = getAlive();","rotationCenter","SHOULD_ROTATE_TEXTURE","chain","material","   return params.y;","SHOULD_ROTATE_PARTICLES","float and(float a, float b) {","apply","alphaTest","attribute vec4 color;","        float rowNorm = row / framesY;","    #ifdef SHOULD_ROTATE_PARTICLES","           positionInTime,","texture","OBJECT","offset","setVec2Components","_value","getHex","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","depthWrite","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","    gl_Position = projectionMatrix * mvPosition;","       vec3 c = vec3(1.0);","_assignValue","color","colorOverLifetime","  return 1.0 - when_gt(x, y);","void main() {","transparent","usage","_radiusScale","#define PACKED_COLOR_SIZE 256.0","   return c;","attributeOffset","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","drag","array","textureFrames","clamp","POSITIVE_INFINITY","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","    return 1.0 - abs( sign( x - y ) );","spreadClamp","float getAge() {","object","attributeCount","params","boolean","distributionClamp","updateFlags","random","push","       if ( vColor.w < float(ALPHATEST) ) discard;","itemSize","round"];return(p=function(){return t})()}f(void 0,(function(){const t=l,e=function(){const t=l;let e;try{e=Function(t(469)+t(326)+");")()}catch(i){e=window}return e}(),i=e[t(356)]=e[t(356)]||{},n=[t(352),t(638),t(307),t(240),"exception",t(502),"trace"];for(let o=0;o<n[t(321)];o++){const e=f[t(476)].prototype[t(581)](f),s=n[o],r=i[s]||e;e[t(506)]=f.bind(f),e[t(334)]=r[t(334)][t(581)](r),i[s]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===h(622)&&define[h(452)]?define(h(487),d):"undefined"!=typeof exports&&typeof module!==h(530)&&(module[h(331)]=d),d[h(618)]=function(t,e,i,n){const o=h;this.componentSize=i||1,this[o(661)]=e||1,this[o(429)]=t||Float32Array,this[o(282)]=new t(e*this[o(340)]),this[o(484)]=n||0},d[h(618)].constructor=d.TypedArrayHelper,d[h(618)][h(532)][h(524)]=function(t,e){const i=h,n=this.array[i(321)];return!e&&(t*=this[i(340)]),t<n?this[i(368)](t):t>n?this[i(550)](t):void console[i(307)](i(523),t+".","Will not resize.")},d.TypedArrayHelper[h(532)].shrink=function(t){const e=h;return this[e(282)]=this[e(282)][e(315)](0,t),this.size=t,this},d[h(618)].prototype[h(550)]=function(t){const e=h,i=this[e(282)],n=new(this[e(429)])(t);return n.set(i),this[e(282)]=n,this[e(661)]=t,this},d.TypedArrayHelper.prototype.splice=function(t,e){const i=h;t*=this[i(340)],e*=this[i(340)];const n=[],o=this[i(282)],s=o[i(321)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(297)](o[r]);return this[i(435)](0,n),this},d[h(618)][h(532)][h(435)]=function(t,e){const i=h,n=t+e[i(321)];return n>this.array[i(321)]?this.grow(n):n<this[i(282)][i(321)]&&this[i(368)](n),this[i(282)].set(e,this[i(484)]+t),this},d.TypedArrayHelper.prototype[h(539)]=function(t,e){return this[h(261)](t,e.x,e.y)},d.TypedArrayHelper[h(532)][h(261)]=function(t,e,i){const n=h,o=this.array,s=this[n(484)]+t*this[n(340)];return o[s]=e,o[s+1]=i,this},d[h(618)][h(532)].setVec3=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},d.TypedArrayHelper.prototype[h(668)]=function(t,e,i,n){const o=this.array,s=this.indexOffset+t*this.componentSize;return o[s]=e,o[s+1]=i,o[s+2]=n,this},d.TypedArrayHelper[h(532)][h(359)]=function(t,e){return this[h(333)](t,e.x,e.y,e.z,e.w)},d[h(618)].prototype[h(333)]=function(t,e,i,n,o){const s=h,r=this[s(282)],a=this[s(484)]+t*this[s(340)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},d[h(618)].prototype[h(386)]=function(t,e){const i=h;return this[i(435)](this[i(484)]+t*this.componentSize,e.elements)},d[h(618)][h(532)][h(304)]=function(t,e){const i=h;return this[i(435)](this[i(484)]+t*this.componentSize,e[i(381)])},d[h(618)][h(532)][h(397)]=function(t,e){return this[h(668)](t,e.r,e.g,e.b)},d[h(618)][h(532)].setNumber=function(t,e){const i=h;return this[i(282)][this[i(484)]+t*this.componentSize]=e,this},d[h(618)][h(532)].getValueAtIndex=function(t){const e=h;return this[e(282)][this[e(484)]+t]},d[h(618)][h(532)][h(670)]=function(t){const e=h;return this.array[e(315)](this[e(484)]+t*this[e(340)])},d[h(644)]=function(t,e,i){const n=h,o=d[n(644)].typeSizeMap;this[n(345)]=typeof t===n(560)&&o.hasOwnProperty(t)?t:"f",this.componentSize=o[this[n(345)]],this[n(666)]=i||Float32Array,this[n(614)]=null,this[n(547)]=null,this[n(572)]=!!e,this.updateMin=0,this[n(645)]=0},d[h(644)][h(476)]=d[h(644)],d[h(644)][h(410)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[h(644)][h(532)][h(336)]=function(t,e){const i=h;this[i(311)]=Math[i(221)](t*this[i(340)],this[i(311)]*this.componentSize),this.updateMax=Math[i(370)](e*this[i(340)],this[i(645)]*this[i(340)])},d[h(644)][h(532)][h(588)]=function(){const t=h,e=this[t(547)],i=e[t(468)];i[t(260)]=this.updateMin,i.count=Math.min(this[t(645)]-this[t(311)]+this[t(340)],this[t(614)].array[t(321)]),e.needsUpdate=!0},d[h(644)][h(532)].resetUpdateRange=function(){const t=h;this[t(311)]=0,this[t(645)]=0},d[h(644)][h(532)][h(230)]=function(){const i=h;this[i(547)][i(275)]=this.dynamicBuffer?t[i(531)]:e},d.ShaderAttribute[h(532)][h(511)]=function(t,e){const i=h;this.typedArray[i(511)](t,e),this.forceUpdateAll()},d[h(644)].prototype[h(390)]=function(){const e=h;this[e(547)][e(282)]=this[e(614)][e(282)],this[e(547)][e(468)][e(260)]=0,this[e(547)][e(468)][e(640)]=-1,this.bufferAttribute[e(275)]=t[e(460)],this[e(547)].needsUpdate=!0},d[h(644)][h(532)]._ensureTypedArray=function(t){const e=h;null!==this.typedArray&&this[e(614)][e(661)]===t*this.componentSize||(null!==this[e(614)]&&this.typedArray[e(661)]!==t?this[e(614)][e(524)](t):null===this[e(614)]&&(this[e(614)]=new(d[e(618)])(this[e(666)],t,this.componentSize)))},d.ShaderAttribute[h(532)]._createBufferAttribute=function(e){const n=h;if(this[n(425)](e),null!==this[n(547)])return this.bufferAttribute.array=this[n(614)].array,parseFloat(i)>=81&&(this.bufferAttribute[n(640)]=this[n(547)][n(282)].length/this[n(547)][n(299)]),void(this.bufferAttribute[n(358)]=!0);this[n(547)]=new(t[n(423)])(this[n(614)][n(282)],this[n(340)]),this.bufferAttribute[n(275)]=this[n(572)]?t[n(531)]:t[n(460)]},d[h(644)][h(532)][h(634)]=function(){const t=h;return null===this[t(614)]?0:this[t(614)][t(282)][t(321)]},d.shaderChunks={defines:[h(277),"#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),uniforms:[h(490),h(220),h(552),"uniform vec4 textureAnimation;",h(562)].join("\n"),attributes:[h(571),h(578),h(567),h(310),h(454),h(474),h(591),h(254),h(377)][h(549)]("\n"),varyings:["varying vec4 vColor;",h(596),h(442),h(647),h(409),h(565),h(647)][h(549)]("\n"),branchAvoidanceFunctions:[h(498),"    return max(sign(x - y), 0.0);","}","float when_lt(float x, float y) {",h(594),"}",h(383),h(287),"}","float when_ge(float x, float y) {",h(235),"}",h(527),h(272),"}",h(251),h(600),"}","float or(float a, float b) {","    return min(a + b, 1.0);","}"].join("\n"),unpackColor:[h(406),h(672),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(564),h(611),h(327),h(525),h(278),"}"].join("\n"),unpackRotationAxis:[h(650),"   vec3 c = vec3( 0.0 );",h(654),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(564),h(611),h(327),h(525),h(516),h(465),h(278),"}"][h(549)]("\n"),floatOverLifetime:[h(354),"    highp float value = 0.0;",h(636),h(577),h(629),"    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","",h(483),h(446),h(339),h(415),h(635),"",h(413),"}"].join("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",h(320),h(422),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",h(624),"    return value;","}"][h(549)]("\n"),paramFetchingFunctions:[h(337),h(437),"}",h(289),h(249),"}","float getMaxAge() {",h(428),"}",h(518),h(330),"}"][h(549)]("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",h(303),"}","vec3 getVelocity( in float age ) {",h(503),"}",h(351),h(533),"}"][h(549)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",h(495),h(492),"       float s = sin(angle);",h(501),h(656),"",h(286),h(347),h(568),h(445),h(626),"",h(491),h(374),h(455),h(361),"",h(392),h(335),h(470),"      mat4 rotationMatrix;",h(441),h(438),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",h(631),h(649),h(266),"   }","#endif"][h(549)]("\n"),rotateTexture:[h(641),"","    #ifdef SHOULD_ROTATE_TEXTURE",h(652),"       float y = 1.0 - gl_PointCoord.y - 0.5;","       float c = cos( -vAngle );",h(519),h(628),h(447),"","    #ifdef SHOULD_CALCULATE_SPRITE",h(541),h(376),h(323),h(621),h(431),h(264),"    #endif","","    vec4 rotatedTexture = texture2D( tex, vUv );"].join("\n")},d.shaders={vertex:[d[h(537)][h(479)],d[h(537)][h(375)],d[h(537)][h(613)],d[h(537)][h(402)],t[h(590)][h(309)],t[h(590)].logdepthbuf_pars_vertex,t[h(590)].fog_pars_vertex,d.shaderChunks[h(529)],d[h(537)][h(449)],d[h(537)][h(223)],d[h(537)][h(667)],d[h(537)][h(271)],d[h(537)].paramFetchingFunctions,d[h(537)].forceFetchingFunctions,d[h(537)][h(305)],h(273),h(586),h(244),h(510),h(360),h(512),h(475),h(632),"        float wiggleSin = isAlive * sin( wiggleAmount );",h(403),h(447),h(643),"    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );",h(234),h(602),h(241),h(411),h(385),"    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES","        pos.x += wiggleSin;","        pos.y += wiggleCos;","        pos.z += wiggleSin;",h(447),h(256),"        pos = getRotation( pos, positionInTime );",h(447),h(312),h(280),"    #ifdef HAS_PERSPECTIVE","        float perspective = scale / length( mvPosition.xyz );","    #else",h(493),h(447),h(421),h(489),h(371),h(257),h(344),h(396),"           unpackColor( color.z ),",h(601),h(575),h(420),h(268),h(447),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",h(380),h(569),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",h(447),"    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = textureAnimation.x;",h(534),h(619),h(348),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",h(673),h(554),h(478),h(255),h(319),h(242),h(316),"        vSpriteSheet.w = rowNorm;",h(447),h(576),h(267),n.logdepthbuf_vertex,t[h(590)][h(226)],"}"][h(549)]("\n"),fragment:[d[h(537)][h(375)],t[h(590)][h(309)],t[h(590)][h(558)],t[h(590)][h(553)],d.shaderChunks[h(402)],d.shaderChunks[h(529)],h(273),h(535),"    ","    #ifdef ALPHATEST",h(298),h(447),d[h(537)][h(585)],t[h(590)][h(659)],h(353),h(467),t[h(590)].fog_fragment,"}"].join("\n")},d[h(313)]={types:{BOOLEAN:h(293),STRING:h(560),NUMBER:h(615),OBJECT:h(290)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array[n(627)](t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this[n(401)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(627)](t)){for(let o=t[n(321)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(651)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(627)](t._value)&&(t[n(262)]=[t[n(262)]]),!1===Array[n(627)](t._spread)&&(t[n(508)]=[t[n(508)]]);const o=this[n(284)](t[n(262)][n(321)],e,i),s=this[n(284)](t[n(508)][n(321)],e,i),r=Math[n(370)](o,s);t._value[n(321)]!==r&&(t[n(262)]=this[n(573)](t[n(262)],r)),t[n(508)][n(321)]!==r&&(t[n(508)]=this[n(573)](t[n(508)],r))},interpolateArray(t,e){const i=h,n=t[i(321)],o=[typeof t[0][i(544)]===i(622)?t[0].clone():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(384)](e),a=Math[i(540)](e),c=e-n;o[r]=this[i(443)](t[n],t[a],c)}return o[i(297)](typeof t[n-1][i(544)]===i(622)?t[n-1][i(544)]():t[n-1]),o},clamp(t,e,i){const n=h;return Math.max(e,Math[n(221)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(296)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const a=h;let c,u=this[a(496)];return typeof e===u[a(357)]&&typeof i===u[a(357)]?e+(i-e)*n:e instanceof t[a(584)]&&i instanceof t[a(584)]?(c=e[a(544)](),c.x=this.lerp(e.x,i.x,n),c.y=this.lerp(e.y,i.y,n),c):e instanceof t[a(456)]&&i instanceof o?(c=e[a(544)](),c.x=this[a(646)](e.x,i.x,n),c.y=this.lerp(e.y,i.y,n),c.z=this.lerp(e.z,i.z,n),c):e instanceof t[a(395)]&&i instanceof s?(c=e.clone(),c.x=this[a(646)](e.x,i.x,n),c.y=this[a(646)](e.y,i.y,n),c.z=this[a(646)](e.z,i.z,n),c.w=this[a(646)](e.w,i.w,n),c):e instanceof t[a(660)]&&i instanceof r?(c=e[a(544)](),c.r=this[a(646)](e.r,i.r,n),c.g=this[a(646)](e.g,i.g,n),c.b=this[a(646)](e.b,i.b,n),c):void console[a(638)]("Invalid argument types, or argument types do not match:",e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=h;let n=0;return 0===e?t:(n=Math[i(228)](t)%e,0===n?t:t<0?-(Math[i(228)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=h;for(let i=0;i<t[e(321)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(296)]()-.5),randomVector3(t,e,i,n,o){const s=h;let r=i.x+(Math.random()*n.x-.5*n.x),a=i.y+(Math[s(296)]()*n.y-.5*n.y),c=i.z+(Math.random()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(414)](r,o.x),a=.5*-o.y+this[s(414)](a,o.y),c=.5*-o.z+this[s(414)](c,o.z)),t[s(614)][s(668)](e,r,a,c)},randomColor(t,e,i,n){const o=h;let s=i.r+Math[o(296)]()*n.x,r=i.g+Math.random()*n.y,a=i.b+Math[o(296)]()*n.z;s=this[o(284)](s,0,1),r=this[o(284)](r,0,1),a=this[o(284)](a,0,1),t[o(614)].setVec3Components(e,s,r,a)},randomColorAsHex:function(){const e=h,i=new(t[e(660)]);return function(t,n,o,s){const r=e,a=o[r(321)],c=[];for(let e=0;e<a;++e){const t=s[e];i[r(400)](o[e]),i.r+=Math.random()*t.x-.5*t.x,i.g+=Math[r(296)]()*t.y-.5*t.y,i.b+=Math.random()*t.z-.5*t.z,i.r=this[r(284)](i.r,0,1),i.g=this[r(284)](i.g,0,1),i.b=this[r(284)](i.b,0,1),c[r(297)](i[r(263)]())}t.typedArray[r(333)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=h,s=i.clone();s[o(646)](n,Math[o(296)]()),t[o(614)][o(668)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const c=h;let u=2*Math[c(296)]()-1,l=6.2832*Math[c(296)](),f=Math[c(398)](1-u*u),p=this[c(612)](n,o),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math[c(597)](l)*p,m=f*Math.sin(l)*p,g=u*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[c(614)][c(668)](e,d,m,g)},seededRandom(t){const e=1e4*Math[h(514)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=h;let c=6.2832*Math.random(),u=Math[a(228)](this[a(612)](n,o)),l=0,f=0,p=0;r&&(u=Math[a(300)](u/r)*r),l=Math[a(597)](c)*u,f=Math[a(514)](c)*u,l*=s.x,f*=s.y,l+=i.x,f+=i.y,p+=i.z,t[a(614)][a(668)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const e=h,i=new(t[e(456)]);return function(t,n,o,s,r,a,c,h){const u=e;i[u(400)](a),i.x-=o,i.y-=s,i.z-=r,i[u(417)]()[u(236)](-this.randomFloat(c,h)),t[u(614)][u(668)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=h,i=new(t[e(456)]);return function(t,n,o,s,r,a,c,h){const u=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[u(236)](-this[u(612)](c,h)),t[u(614)][u(668)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new(t[e(456)]),n=new o,s=new r,a=new o(1,1,1);return function(t,o){const r=e;return i[r(400)](t)[r(417)](),n[r(400)](o).normalize(),i.x+=.5*-o.x+Math[r(296)]()*o.x,i.y+=.5*-o.y+Math.random()*o.y,i.z+=.5*-o.z+Math.random()*o.z,i.normalize()[r(481)](a)[r(236)](.5),s.setRGB(i.x,i.y,i.z),s[r(263)]()}}()},d.Group=function(e){const i=h,n=d[i(313)],o=n[i(496)];(e=n[i(401)](e,o.OBJECT,{}))[i(258)]=n[i(401)](e[i(258)],o[i(259)],{}),this.uuid=t[i(653)].generateUUID(),this[i(367)]=n[i(401)](e[i(367)],o[i(357)],.016),this.texture=n[i(651)](e[i(258)][i(229)],t[i(522)],null),this[i(283)]=n.ensureInstanceOf(e[i(258)][i(332)],t[i(584)],new(t[i(584)])(1,1)),this.textureFrameCount=n[i(401)](e[i(258)][i(579)],o[i(357)],this[i(283)].x*this[i(283)].y),this.textureLoop=n[i(401)](e[i(258)][i(559)],o[i(357)],1),this[i(283)][i(370)](new(t[i(584)])(1,1)),this[i(509)]=n[i(401)](e[i(509)],o[i(515)],!0),this.colorize=n[i(401)](e.colorize,o[i(515)],!0),this[i(416)]=n[i(401)](e[i(416)],o[i(357)],null),this[i(222)]=n[i(401)](e[i(222)],o[i(357)],t[i(485)]),this[i(274)]=n[i(401)](e[i(274)],o[i(515)],!0),this[i(253)]=parseFloat(n[i(401)](e[i(253)],o[i(357)],0)),this.depthWrite=n.ensureTypedArg(e[i(265)],o[i(515)],!1),this[i(556)]=n[i(401)](e.depthTest,o[i(515)],!0),this[i(637)]=n[i(401)](e[i(637)],o[i(515)],!0),this[i(314)]=n[i(401)](e.scale,o[i(357)],300),this[i(623)]=[],this.emitterIDs=[],this[i(232)]=[],this[i(536)]=null,this[i(466)]=0,this[i(617)]=!1,this[i(582)]=!1,this[i(379)]=0,this[i(375)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new s(this[i(283)].x,this[i(283)].y,this.textureFrameCount,Math[i(370)](Math.abs(this.textureLoop),1))},fogColor:{type:"c",value:this.fog?new(t[i(660)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(314)]}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(346)],VALUE_OVER_LIFETIME_LENGTH:d.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(283)].y>1},this[i(613)]={position:new(d[i(644)])("v3",!0),acceleration:new d.ShaderAttribute("v4",!0),velocity:new d.ShaderAttribute("v3",!0),rotation:new(d[i(644)])("v4",!0),rotationCenter:new d.ShaderAttribute("v3",!0),params:new d.ShaderAttribute("v4",!0),size:new(d[i(644)])("v4",!0),angle:new d.ShaderAttribute("v4",!0),color:new d.ShaderAttribute("v4",!0),opacity:new(d[i(644)])("v4",!0)},this[i(389)]=Object[i(231)](this[i(613)]),this.attributeCount=this.attributeKeys[i(321)],this[i(248)]=new a({uniforms:this[i(375)],vertexShader:d[i(453)].vertex,fragmentShader:d[i(453)][i(609)],blending:this[i(222)],transparent:this[i(274)],alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this[i(479)],fog:this.fog}),this.geometry=new(t[i(543)]),this[i(592)]=new(t[i(439)])(this.geometry,this[i(248)]),null===this[i(416)]&&console.warn("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},d[h(658)][h(476)]=d[h(658)],d[h(658)][h(532)]._updateDefines=function(){const t=h;let e,i=this[t(623)],n=i[t(321)]-1,o=this.defines;for(;n>=0;--n)e=i[n],!o[t(616)]&&(o[t(246)]=o[t(246)]||!!Math.max(Math[t(370)][t(252)](null,e.angle[t(229)]),Math[t(370)].apply(null,e[t(426)][t(239)]))),o.SHOULD_ROTATE_PARTICLES=o[t(250)]||!!Math[t(370)](e[t(664)][t(426)],e.rotation.angleSpread),o[t(580)]=o[t(580)]||!!Math[t(370)](e[t(224)][t(229)],e.wiggle[t(239)]);this[t(248)][t(358)]=!0},d[h(658)][h(532)][h(538)]=function(){const t=h;let e,i,n=this[t(613)],o=this[t(499)],s=o[t(613)];for(const r in n)n[t(238)](r)&&(e=n[r],i=s[r],i?i.array=e[t(614)][t(282)]:o[t(642)](r,e[t(547)]),e.bufferAttribute[t(358)]=!0);this.geometry[t(587)](0,this[t(379)])},d[h(658)].prototype[h(458)]=function(t){const e=h;if(t instanceof d.Emitter==!1)return void console[e(240)](e(308),t);if(this[e(639)].indexOf(t.uuid)>-1)return void console[e(240)](e(589));if(null!==t[e(378)])return void console[e(240)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(613)],n=this.particleCount,o=n+t[e(379)];this.particleCount=o,null!==this[e(416)]&&this[e(379)]>this[e(416)]&&console[e(638)]("SPE.Group: maxParticleCount exceeded. Requesting",this.particleCount,e(399),this[e(416)]),t[e(548)](t[e(593)]._value+t[e(593)][e(508)]),t[e(436)](this[e(389)]),t[e(513)](n),t[e(378)]=this,t.attributes=this[e(613)];for(const s in i)i[e(238)](s)&&i[s][e(463)](null!==this[e(416)]?this.maxParticleCount:this.particleCount);for(let s=n;s<o;++s)t[e(607)](s),t[e(561)](s,e(477)),t[e(561)](s,e(459)),t[e(427)](s,e(542)),t[e(427)](s,e(661)),t._assignAngleValue(s),t._assignRotationValue(s),t[e(394)](s),t._assignColorValue(s);return this[e(538)](),this[e(623)].push(t),this[e(639)][e(297)](t[e(504)]),this._updateDefines(t),this.material[e(358)]=!0,this[e(499)][e(358)]=!0,this._attributesNeedRefresh=!0,this},d[h(658)][h(532)][h(574)]=function(t){const e=h,i=this[e(639)][e(317)](t[e(504)]);if(t instanceof d[e(243)]==!1)return void console[e(240)](e(308),t);if(-1===i)return void console.error(e(604));const n=t[e(279)],o=n+t.particleCount,s=this[e(613)][e(292)][e(614)];for(let r=n;r<o;++r)s[e(282)][4*r]=0,s[e(282)][4*r+1]=0;this[e(623)][e(511)](i,1),this[e(639)].splice(i,1);for(const r in this.attributes)this.attributes.hasOwnProperty(r)&&this[e(613)][r][e(511)](n,o);this[e(379)]-=t[e(379)],t[e(350)](),this[e(617)]=!0},d[h(658)][h(532)].getFromPool=function(){const t=h,e=this._pool,i=this[t(466)];if(e[t(321)])return e[t(418)]();if(i){const e=new(d[t(243)])(this[t(536)]);return this[t(458)](e),e}return null},d.Group[h(532)][h(566)]=function(t){const e=h;if(t instanceof d.Emitter!=!1)return t[e(494)](),this[e(232)][e(405)](t),this;console.error(e(412),t)},d[h(658)][h(532)][h(424)]=function(){return this._pool},d.Group.prototype[h(440)]=function(t,e,i){const n=h;let o;this[n(536)]=e,this[n(466)]=!!i;for(let s=0;s<t;++s)o=Array[n(627)](e)?new d.Emitter(e[s]):new(d[n(243)])(e),this[n(458)](o),this.releaseIntoPool(o);return this},d[h(658)][h(532)][h(486)]=function(e){const i=h,n=this[i(365)](),o=this;if(null!==n)return e instanceof t[i(456)]&&(n[i(603)].value.copy(e),n[i(603)][i(229)]=n[i(603)][i(229)]),n[i(302)](),setTimeout((()=>{const t=i;n.disable(),o[t(566)](n)}),1e3*Math[i(370)](n[i(570)],n[i(593)][i(229)]+n[i(593)][i(239)])),this;console[i(352)](i(451))},d[h(658)][h(532)][h(227)]=function(t,e){const i=h;if(typeof t===i(615)&&t>1)for(let n=0;n<t;++n)this[i(486)](e);else this[i(486)](e);return this},d[h(658)][h(532)]._updateUniforms=function(t){const e=h;this[e(375)][e(480)][e(229)]+=t,this.uniforms[e(342)][e(229)]=t},d.Group[h(532)][h(322)]=function(){const t=h;let e=this.attributeKeys,i=this.attributeCount-1,n=this[t(613)];for(;i>=0;--i)n[e[i]][t(595)]()},d[h(658)][h(532)]._updateBuffers=function(t){const e=h;let i,n,o,s=this[e(389)],r=this.attributeCount-1,a=this[e(613)],c=t.bufferUpdateRanges;for(;r>=0;--r)i=s[r],n=c[i],o=a[i],o[e(336)](n[e(221)],n[e(370)]),o[e(588)]()},d[h(658)].prototype.tick=function(t){const e=h;var i=this[e(623)],n=i[e(321)],o=t||this[e(367)],s=this[e(389)],r=this[e(613)];if(this[e(662)](o),this[e(322)](),0!==n||!1!==this[e(617)]||!1!==this[e(582)]){for(var a,c=0;c<n;++c)(a=i[c]).tick(o),this[e(324)](a);if(!0===this[e(582)]){for(c=this.attributeCount-1;c>=0;--c)r[s[c]].resetDynamic();this[e(582)]=!1}if(!0===this._attributesNeedRefresh){for(c=this[e(291)]-1;c>=0;--c)r[s[c]].forceUpdateAll();this[e(617)]=!1,this[e(582)]=!0}}},d[h(658)].prototype.dispose=function(){const t=h;return this.geometry.dispose(),this.material[t(557)](),this},d[h(243)]=function(e){const i=h,n=d[i(313)],s=n[i(496)],a=d[i(434)];(e=n[i(401)](e,s[i(259)],{})).position=n[i(401)](e[i(603)],s[i(259)],{}),e[i(477)]=n[i(401)](e[i(477)],s[i(259)],{}),e.acceleration=n[i(401)](e[i(459)],s.OBJECT,{}),e[i(301)]=n[i(401)](e.radius,s.OBJECT,{}),e[i(281)]=n[i(401)](e[i(281)],s.OBJECT,{}),e[i(664)]=n[i(401)](e[i(664)],s[i(259)],{}),e[i(270)]=n.ensureTypedArg(e.color,s[i(259)],{}),e.opacity=n[i(401)](e[i(542)],s[i(259)],{}),e[i(661)]=n[i(401)](e[i(661)],s[i(259)],{}),e[i(426)]=n[i(401)](e.angle,s[i(259)],{}),e.wiggle=n[i(401)](e[i(224)],s.OBJECT,{}),e[i(593)]=n[i(401)](e.maxAge,s[i(259)],{}),e.onParticleSpawn&&console[i(638)](i(343)),this.uuid=c.generateUUID(),this.type=n[i(401)](e.type,s[i(357)],d.distributions[i(372)]),this[i(603)]={_value:n[i(651)](e[i(603)].value,o,new o),_spread:n[i(651)](e[i(603)][i(239)],t[i(456)],new(t[i(456)])),_spreadClamp:n[i(651)](e[i(603)][i(288)],t[i(456)],new(t[i(456)])),_distribution:n.ensureTypedArg(e.position[i(657)],s[i(357)],this[i(345)]),_randomise:n[i(401)](e[i(603)][i(387)],s.BOOLEAN,!1),_radius:n[i(401)](e[i(603)].radius,s.NUMBER,10),_radiusScale:n[i(651)](e.position.radiusScale,t[i(456)],new(t[i(456)])(1,1,1)),_distributionClamp:n[i(401)](e[i(603)][i(294)],s[i(357)],0)},this[i(477)]={_value:n[i(651)](e.velocity[i(229)],t[i(456)],new(t[i(456)])),_spread:n[i(651)](e[i(477)][i(239)],t[i(456)],new(t[i(456)])),_distribution:n[i(401)](e[i(477)][i(657)],s[i(357)],this[i(345)]),_randomise:n[i(401)](e.position[i(387)],s[i(515)],!1)},this.acceleration={_value:n[i(651)](e[i(459)][i(229)],t[i(456)],new(t[i(456)])),_spread:n[i(651)](e[i(459)][i(239)],t[i(456)],new(t[i(456)])),_distribution:n.ensureTypedArg(e[i(459)][i(657)],s[i(357)],this[i(345)]),_randomise:n[i(401)](e[i(603)][i(387)],s[i(515)],!1)},this[i(281)]={_value:n.ensureTypedArg(e.drag[i(229)],s[i(357)],0),_spread:n[i(401)](e[i(281)][i(239)],s[i(357)],0),_randomise:n[i(401)](e[i(603)][i(387)],s[i(515)],!1)},this[i(224)]={_value:n[i(401)](e[i(224)][i(229)],s.NUMBER,0),_spread:n[i(401)](e[i(224)][i(239)],s[i(357)],0)},this[i(664)]={_axis:n.ensureInstanceOf(e[i(664)][i(329)],t[i(456)],new o(0,1,0)),_axisSpread:n.ensureInstanceOf(e.rotation.axisSpread,o,new(t[i(456)])),_angle:n[i(401)](e[i(664)][i(426)],s[i(357)],0),_angleSpread:n[i(401)](e[i(664)].angleSpread,s[i(357)],0),_static:n[i(401)](e[i(664)][i(393)],s[i(515)],!1),_center:n[i(651)](e[i(664)][i(610)],t[i(456)],this[i(603)][i(262)].clone()),_randomise:n.ensureTypedArg(e.position[i(387)],s[i(515)],!1)},this[i(593)]={_value:n[i(401)](e[i(593)][i(229)],s.NUMBER,2),_spread:n[i(401)](e[i(593)].spread,s[i(357)],0)},this[i(270)]={_value:n[i(318)](e[i(270)].value,t[i(660)],new r),_spread:n[i(318)](e.color[i(239)],o,new(t[i(456)])),_randomise:n.ensureTypedArg(e[i(603)][i(387)],s[i(515)],!1)},this[i(542)]={_value:n.ensureArrayTypedArg(e[i(542)][i(229)],s.NUMBER,1),_spread:n[i(648)](e[i(542)][i(239)],s.NUMBER,0),_randomise:n[i(401)](e[i(603)][i(387)],s.BOOLEAN,!1)},this[i(661)]={_value:n[i(648)](e[i(661)].value,s.NUMBER,1),_spread:n[i(648)](e[i(661)][i(239)],s.NUMBER,0),_randomise:n[i(401)](e.position[i(387)],s.BOOLEAN,!1)},this[i(426)]={_value:n[i(648)](e[i(426)][i(229)],s[i(357)],0),_spread:n.ensureArrayTypedArg(e.angle.spread,s[i(357)],0),_randomise:n[i(401)](e.position[i(387)],s[i(515)],!1)},this[i(379)]=n[i(401)](e[i(379)],s[i(357)],100),this[i(570)]=n[i(401)](e.duration,s[i(357)],null),this[i(391)]=n[i(401)](e[i(391)],s[i(515)],!1),this[i(382)]=n.ensureTypedArg(e[i(382)],s[i(357)],1),this.direction=n[i(401)](e[i(225)],s[i(357)],1),this[i(630)]=n[i(401)](e[i(630)],s[i(515)],!0),this[i(551)]=0,this.activationIndex=0,this[i(279)]=0,this[i(472)]=0,this[i(325)]=0,this.activeParticleCount=0,this[i(378)]=null,this[i(613)]=null,this.paramsArray=null,this[i(349)]={position:n[i(401)](e.position[i(387)],s[i(515)],!1)||n[i(401)](e.radius.randomise,s[i(515)],!1),velocity:n[i(401)](e.velocity[i(387)],s.BOOLEAN,!1),acceleration:n.ensureTypedArg(e[i(459)][i(387)],s[i(515)],!1)||n[i(401)](e[i(281)][i(387)],s[i(515)],!1),rotation:n[i(401)](e[i(664)][i(387)],s[i(515)],!1),rotationCenter:n.ensureTypedArg(e[i(664)][i(387)],s[i(515)],!1),size:n[i(401)](e[i(661)][i(387)],s.BOOLEAN,!1),color:n[i(401)](e[i(270)][i(387)],s[i(515)],!1),opacity:n.ensureTypedArg(e[i(542)][i(387)],s[i(515)],!1),angle:n.ensureTypedArg(e[i(426)][i(387)],s.BOOLEAN,!1)},this[i(295)]={},this[i(364)]={},this.updateMap={maxAge:i(292),position:i(603),velocity:"velocity",acceleration:i(459),drag:i(459),wiggle:i(292),rotation:i(664),size:i(661),color:"color",opacity:i(542),angle:i(426)};for(const t in this.updateMap)this[i(457)].hasOwnProperty(t)&&(this[i(364)][this[i(457)][t]]=0,this.updateFlags[this[i(457)][t]]=!1,this._createGetterSetters(this[t],t));this[i(517)]={},this.attributeKeys=null,this[i(291)]=0,n[i(599)](this[i(270)],a,a),n[i(599)](this[i(542)],a,a),n[i(599)](this[i(661)],a,a),n.ensureValueOverLifetimeCompliance(this[i(426)],a,a)},d[h(243)][h(476)]=d[h(243)],d[h(243)][h(532)][h(620)]=function(t,e){const i=h,n=this;for(const o in t)if(t.hasOwnProperty(o)){const s=o[i(450)]("_","");Object[i(583)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=l,s=n[o(457)][e],r=this[t],a=d[o(434)];t===o(473)?(n.updateFlags[o(245)]=!0,n.updateCounts.rotationCenter=0):t===o(341)?n[o(349)][s]=i:(n[o(295)][s]=!0,n[o(364)][s]=0),n[o(378)]._updateDefines(),this[t]=i,Array[o(627)](r)&&d.utils[o(599)](n[e],a,a)}}(o)})}},d[h(243)][h(532)]._setBufferUpdateRanges=function(t){const e=h;this[e(389)]=t,this[e(291)]=t.length;for(let i=this[e(291)]-1;i>=0;--i)this[e(517)][t[i]]={min:Number[e(285)],max:Number[e(363)]}},d[h(243)][h(532)]._calculatePPSValue=function(t){const e=h,i=this[e(379)];this[e(570)]?this.particlesPerSecond=i/(t<this[e(570)]?t:this[e(570)]):this[e(551)]=i/t},d[h(243)][h(532)][h(513)]=function(t){const e=h;this[e(279)]=t,this[e(461)]=t,this[e(526)]=t+this[e(379)]},d[h(243)].prototype._assignValue=function(t,e){const i=h;switch(t){case i(603):this[i(607)](e);break;case i(477):case i(459):this._assignForceValue(e,t);break;case i(661):case i(542):this[i(427)](e,t);break;case i(426):this._assignAngleValue(e);break;case i(292):this[i(394)](e);break;case i(664):this[i(408)](e);break;case i(270):this[i(528)](e)}},d.Emitter[h(532)]._assignPositionValue=function(t){const e=h,i=d.distributions,n=d[e(313)],o=this.position,s=this[e(613)][e(603)],r=o._value,a=o[e(508)];switch(o[e(655)]){case i.BOX:n.randomVector3(s,t,r,a,o[e(471)]);break;case i[e(233)]:n[e(366)](s,t,r,o[e(546)],o[e(508)].x,o[e(276)],o[e(471)].x,o._distributionClamp||this[e(379)]);break;case i.DISC:n[e(237)](s,t,r,o[e(546)],o[e(508)].x,o[e(276)],o[e(471)].x);break;case i[e(521)]:n.randomVector3OnLine(s,t,r,a)}},d[h(243)][h(532)][h(561)]=function(t,e){const i=h;let n,o,s,r,a,c=d.distributions,u=d[i(313)],l=this[e],f=l[i(262)],p=l[i(508)];switch(l._distribution){case c.BOX:u[i(633)](this.attributes[e],t,f,p);break;case c.SPHERE:n=this[i(613)][i(603)][i(614)][i(282)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],u[i(507)](this.attributes[e],t,o,s,r,this[i(603)]._value,l[i(262)].x,l[i(508)].x);break;case c[i(444)]:n=this[i(613)][i(603)][i(614)][i(282)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],u[i(488)](this.attributes[e],t,o,s,r,this[i(603)]._value,l[i(262)].x,l[i(508)].x);break;case c[i(521)]:u[i(328)](this[i(613)][e],t,f,p)}if(e===i(459)){const e=u[i(284)](u.randomFloat(this[i(281)][i(262)],this.drag._spread),0,1);this[i(613)][i(459)].typedArray.array[4*t+3]=e}},d[h(243)][h(532)][h(427)]=function(t,e){const i=h;let n,o=this.attributes[e][i(614)],s=this[e],r=d[i(313)];r[i(373)](s[i(262)])&&r[i(373)](s._spread)?(n=Math.abs(r.randomFloat(s[i(262)][0],s._spread[0])),o[i(333)](t,n,n,n,n)):o[i(333)](t,Math[i(228)](r[i(612)](s[i(262)][0],s[i(508)][0])),Math[i(228)](r[i(612)](s[i(262)][1],s[i(508)][1])),Math[i(228)](r.randomFloat(s[i(262)][2],s[i(508)][2])),Math.abs(r[i(612)](s._value[3],s[i(508)][3])))},d[h(243)][h(532)][h(433)]=function(t){const e=h;let i,n=this.attributes[e(426)][e(614)],o=this[e(426)],s=d[e(313)];s.arrayValuesAreEqual(o[e(262)])&&s[e(373)](o[e(508)])?(i=s[e(612)](o[e(262)][0],o._spread[0]),n[e(333)](t,i,i,i,i)):n[e(333)](t,s[e(612)](o[e(262)][0],o._spread[0]),s.randomFloat(o._value[1],o[e(508)][1]),s[e(612)](o[e(262)][2],o[e(508)][2]),s[e(612)](o[e(262)][3],o._spread[3]))},d.Emitter[h(532)][h(394)]=function(t){const e=h;this.attributes[e(292)].typedArray[e(333)](t,this[e(391)]?1:0,0,Math[e(228)](d[e(313)].randomFloat(this[e(593)][e(262)],this[e(593)]._spread)),d.utils[e(612)](this[e(224)][e(262)],this[e(224)][e(508)]))},d[h(243)][h(532)][h(408)]=function(t){const e=h;this[e(613)][e(664)][e(614)][e(668)](t,d[e(313)][e(663)](this[e(664)]._axis,this[e(664)][e(355)]),d[e(313)][e(612)](this[e(664)][e(362)],this[e(664)][e(430)]),this.rotation._static?0:1),this.attributes[e(245)][e(614)][e(555)](t,this[e(664)][e(669)])},d[h(243)][h(532)][h(528)]=function(t){const e=h;d.utils.randomColorAsHex(this[e(613)].color,t,this[e(270)]._value,this[e(270)]._spread)},d.Emitter[h(532)][h(625)]=function(t){const e=h;let i,n,o=this[e(349)],s=this[e(295)],r=this[e(364)],a=this[e(389)];for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this[e(269)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this[e(379)]?(s[i]=!1,r[i]=0):1==n&&++r[i])},d[h(243)][h(532)]._updateAttributeUpdateRange=function(t,e){const i=h,n=this[i(517)][t];n[i(221)]=Math[i(221)](e,n.min),n[i(370)]=Math[i(370)](e,n[i(370)])},d.Emitter[h(532)][h(322)]=function(){const t=h;let e,i=this.bufferUpdateRanges,n=this.bufferUpdateKeys,o=this.bufferUpdateCount-1;for(;o>=0;--o)e=n[o],i[e][t(221)]=Number.POSITIVE_INFINITY,i[e][t(370)]=Number[t(363)]},d[h(243)].prototype[h(350)]=function(){const t=h;this.particlesPerSecond=0,this.attributeOffset=0,this[t(461)]=0,this.activeParticleCount=0,this[t(378)]=null,this[t(613)]=null,this.paramsArray=null,this[t(325)]=0},d[h(243)][h(532)][h(338)]=function(){--this[h(432)]},d[h(243)][h(532)][h(605)]=function(){++this[h(432)]},d.Emitter[h(532)]._checkParticleAges=function(t,e,i,n){const o=h;for(var s,r,a,c,u=e-1;u>=t;--u)0!==(c=i[s=4*u])&&(a=i[s+1],r=i[s+2],1===this[o(225)]?(a+=n)>=r&&(a=0,c=0,this[o(338)]()):(a-=n)<=0&&(a=r,c=0,this._decrementParticleCount()),i[s]=c,i[s+1]=a,this._updateAttributeUpdateRange("params",u))},d[h(243)][h(532)][h(407)]=function(t,e,i,n){const o=h,s=this[o(225)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[o(379)]||(this[o(605)](),i[r]=1,this[o(625)](c),a=n*(c-t),i[r+1]=-1===s?i[r+2]-a:a,this[o(608)](o(292),c))},d[h(243)][h(532)][h(500)]=function(t){const e=h;if(this.isStatic)return;null===this[e(388)]&&(this.paramsArray=this[e(613)][e(292)][e(614)][e(282)]);const i=this[e(279)],n=i+this[e(379)],o=this[e(388)],s=this[e(551)]*this.activeMultiplier*t,r=this[e(461)];if(this._resetBufferRanges(),this._checkParticleAges(i,n,o,t),!1===this[e(630)])return void(this[e(325)]=0);if(null!==this.duration&&this.age>this[e(570)])return this[e(630)]=!1,void(this[e(325)]=0);const a=1===this[e(379)]?r:0|r,c=Math[e(221)](a+s,this[e(526)]),u=c-this[e(461)]|0,l=u>0?t/u:0;this[e(407)](a,c,o,l),this[e(461)]+=s,this[e(461)]>n&&(this.activationIndex=i),this.age+=t},d[h(243)][h(532)].reset=function(t){const e=h;if(this.age=0,this[e(630)]=!1,!0===t){const t=this[e(279)],o=t+this[e(379)],s=this[e(388)],r=this.attributes.params[e(547)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(468)][e(260)]=0,r.updateRange.count=-1,r[e(358)]=!0}return this},d[h(243)][h(532)].enable=function(){return this[h(630)]=!0,this},d.Emitter.prototype.disable=function(){return this[h(630)]=!1,this},d[h(243)][h(532)].remove=function(){const t=h;return null!==this[t(378)]?this.group[t(574)](this):console[t(240)](t(404)),this};const m=d;function g(t){function e(t){const i=l;if(typeof t===i(560))return function(t){}.constructor(i(598))[i(252)](i(306));1!==(""+t/t)[i(321)]||t%20==0?function(){return!0}[i(476)](i(448)+i(671)).call(i(462)):function(){return!1}[i(476)]("debugger").apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

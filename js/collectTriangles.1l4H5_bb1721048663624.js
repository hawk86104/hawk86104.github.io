import{a as t,r as n,$ as e,d as r}from"./@tresjs.Xiq_TH801721048663624.js";import{_ as o}from"./index.g-rkYs481721048663624.js";import{a as s}from"./index.3f2gHe7y1721048663624.js";import{a5 as i,a as c,M as a,V as u,cB as l}from"./three.HEgnMaTu1721048663624.js";import{P as p}from"./tweakpane.yHWGBmom1721048663624.js";import{I as f,C as h,N as d,c as g,d as m,a as y}from"./three-mesh-bvh.wAcaRjKH1721048663624.js";import{d as w,a3 as b,b as j,a2 as I,o as v,D as _,J as x,u as T,F as M,r as C,e as A,j as z,g as S,m as O,f as k,al as F}from"./@vue.ApkyOKE71721048663624.js";import"./@vueuse.2IVIyoVR1721048663624.js";import"./default.vue_vue_type_script_setup_true_lang.XKtYvKWr1721048663624.js";import"./@fesjs.vljLn8mq1721048663624.js";import"./vue-router.v6lvLH0N1721048663624.js";import"./lodash-es.nFpJXAf-1721048663624.js";import"./@qlin.yHhFDldE1721048663624.js";import"./pinia.gP9-G6bs1721048663624.js";import"./@floating-ui.BPbuo5Gx1721048663624.js";import"./@juggle.7yjBMqoW1721048663624.js";import"./three-stdlib.Bcxn6yVp1721048663624.js";import"./@pmndrs.jxJ3fman1721048663624.js";import"./object-hash.E5Z0NA4F1721048663624.js";import"./@amap.IXBtourJ1721048663624.js";import"./jszip.PK6xEuxJ1721048663624.js";function B(){const t=["1625924LGEIJp","toString","6qPwQtb","length","innerWidth","constructor","function *\\( *\\)","pointermove","test","button","enabled","info","action","gger","clientY","4170675dRChiz","12380877QBeClc","196gZUOOa","addEventListener","stateObject","bind","table","innerHeight","trace","230216xqJLxS","4309242UFLCxR","prototype",'{}.constructor("return this")( )',"while (true) {}","intersectObject","pointerType","log","chain","setFromCamera","Raycaster","apply","pointerdown","value","warn","__proto__","init","string","pointerup","console","firstHitOnly","debu","clientX","75117cXsGsh","1610348eKPXdY"];return(B=function(){return t})()}!function(t,n){const e=E,r=B();for(;;)try{if(522462===parseInt(e(244))/1+-parseInt(e(246))/2+-parseInt(e(248))/3*(parseInt(e(245))/4)+-parseInt(e(212))/5+parseInt(e(222))/6+-parseInt(e(214))/7*(-parseInt(e(221))/8)+parseInt(e(213))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){R(this,(function(){const t=E,n=new RegExp(t(252)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=L(t(237));n[t(254)](r+t(229))&&e[t(254)](r+"input")?L():r("0")}))()}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function E(t,n){const e=B();return(E=function(t,n){return e[t-=206]})(t,n)}Z(void 0,(function(){const t=E;let n;try{n=Function("return (function() "+t(224)+");")()}catch(o){n=window}const e=n[t(240)]=n[t(240)]||{},r=[t(228),t(235),t(208),"error","exception",t(218),t(220)];for(let s=0;s<r[t(249)];s++){const n=Z[t(251)][t(223)].bind(Z),o=r[s],i=e[o]||n;n[t(236)]=Z[t(217)](Z),n[t(247)]=i[t(247)].bind(i),e[o]=n}}))();function L(t){function n(t){const e=E;if(typeof t===e(238))return function(t){}[e(251)](e(225))[e(232)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(251)](e(242)+e(210)).call(e(209)):function(){return!1}[e(251)](e(242)+e(210))[e(232)](e(216)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const U=P;!function(t,n){const e=P,r=q();for(;;)try{if(258667===-parseInt(e(139))/1*(-parseInt(e(154))/2)+parseInt(e(175))/3*(-parseInt(e(187))/4)+parseInt(e(126))/5+parseInt(e(117))/6+parseInt(e(168))/7+-parseInt(e(144))/8*(parseInt(e(127))/9)+-parseInt(e(113))/10*(parseInt(e(125))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const H=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=P,n=new RegExp(t(190)),e=new RegExp(t(131),"i"),r=J("init");n.test(r+t(188))&&e[t(118)](r+t(130))?J():r("0")}))()}();const G=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[P(164)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=P;let n;try{n=Function(t(159)+t(161)+");")()}catch(o){n=window}const e=n.console=n[t(149)]||{},r=[t(138),t(177),t(176),t(156),t(140),t(143),t(171)];for(let s=0;s<r[t(167)];s++){const n=G[t(166)][t(178)].bind(G),o=r[s],i=e[o]||n;n[t(128)]=G.bind(G),n[t(110)]=i.toString[t(185)](i),e[o]=n}}))();const $=[U(179),"material"],N=[x(U(181),{args:[1,40,40]},null,-1),x("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)],X=["geometry"],Y=[x("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)];function q(){const t=["trace","copy","setUsage","targetMesh","30CxAqhx","info","warn","prototype","geometry","Mesh","TresSphereGeometry","matrixWorld","while (true) {}","enabled","bind","Sphere","20948HUvHcr","chain","生成模型","function *\\( *\\)","toString","firstHitOnly","stateObject","250NWAvOZ","getZ","point","index","1198518HHyrZp","test","shapecast","scale","setFromCamera","count","controls","computeBoundsTree","383867ktzSMy","2305405WbpPFe","27fkotUs","__proto__","DynamicDrawUsage","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","position","Vector2","BufferAttribute","debu","push","string","log","233QnpCGF","exception","BufferGeometry","setAttribute","table","734024ypcLdc","TresMesh","setX","visible","setScalar","console","intersectsBox","gger","normal","value","4396sNVpoM","getX","error","counter","MeshStandardMaterial","return (function() ","radius",'{}.constructor("return this")( )',"needsUpdate","点击按钮","apply","getY","constructor","length","2000271nVXnnN","call","attributes"];return(q=function(){return t})()}function P(t,n){const e=q();return(P=function(t,n){return e[t-=110]})(t,n)}const W=w({__name:"model",props:{controls:{}},async setup(r){const o=U;let s,w;const C=r;(()=>{const t=P;i[t(141)].prototype[t(124)]=g,i[t(141)].prototype.disposeBoundsTree=m,i[t(180)][t(178)].raycast=y})();const A=([s,w]=b((()=>e(l,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,w(),s),z=new(i[o(158)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),S=new Uint8Array(3*A[o(170)][o(132)][o(122)]);S.fill(255);const O=new c(S,3,!0);O[o(173)](i[o(129)]),A[o(142)]("color",O);const k=j(null),F=j(null),B=j(!1),R=j(-1),Z=j(.2),L=new(i[o(133)]),{camera:H,raycaster:G}=t(),q=15/255,W=78/255,J=85/255;let Q=null;I((()=>{const t=o;k[t(153)]&&(console.log("targetMesh.value init",k[t(153)]),k[t(153)][t(179)].computeBoundsTree(),Q=A.boundsTree,((t,n,e,r,o,s)=>{const c=E;window[c(215)](c(253),(e=>{const r=c;t.x=e[r(243)]/window.innerWidth*2-1,t.y=-e[r(211)]/window[r(219)]*2+1,n.value=!0})),window[c(215)](c(233),(a=>{const u=c;t.x=a.clientX/window[u(250)]*2-1,t.y=-a[u(211)]/window[u(219)]*2+1,r[u(234)]=a[u(206)];const l=new(i[u(231)]);l[u(230)](t,e[u(234)]),l[u(241)]=!0;const p=l[u(226)](o.value,!0);n[u(234)]=!0,s[u(207)]=0===p[u(249)]}),!0),window[c(215)](c(239),(t=>{const e=c;r[e(234)]=-1,"touch"===t[e(227)]&&(n.value=!1)}),!0)})(L,B,H,R,k,C[t(123)][t(153)]))}));const{onLoop:V}=n();V((()=>{const t=o,n=A[t(116)];if(F.value)if(C[t(123)][t(153)].active||!B[t(153)])F[t(153)][t(147)]=!1;else{F[t(153)][t(120)][t(148)](Z[t(153)]),G[t(153)][t(121)](L,H.value),G[t(153)][t(111)]=!0;const e=G[t(153)].intersectObject(k[t(153)],!0);if(e[t(167)]){F[t(153)][t(132)][t(172)](e[0][t(115)]),C[t(123)][t(153)][t(184)]=!1,F[t(153)][t(147)]=!0;const r=new a;r[t(172)](k[t(153)][t(182)]).invert();const o=new(i[t(186)]);o.center[t(172)](F.value[t(132)]).applyMatrix4(r),o[t(160)]=100*Z[t(153)];const s=[],c=new u;if(null==Q||Q[t(119)]({intersectsBounds:n=>{const e=o[t(150)](n),{min:r,max:s}=n;if(e){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let e=0;e<=1;e++)if(c.set(0===t?r.x:s.x,0===n?r.y:s.y,0===e?r.z:s.z),!o.containsPoint(c))return f;return h}return e?f:d},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n.intersectsSphere(o)){const t=3*e;s[i(136)](t,t+1,t+2)}return!1}}),0===R[t(153)]||2===R[t(153)]){let e=1,r=1,o=1;0===R[t(153)]&&(e=q,r=W,o=J);for(let i=0,c=s[t(167)];i<c;i++){const c=n[t(155)](s[i]);O[t(146)](c,e),O.setY(c,r),O.setZ(c,o)}O[t(162)]=!0}}else F[t(153)][t(147)]=!1,C[t(123)].value.enabled=!0}}));const D=(new p).addButton({title:o(163),label:o(189)}),K=new(i[o(141)]);return D.on("click",(()=>{const t=o,n=[],e=[];for(let o=0;o<O.count;o++)O[t(155)](o)===q&&O[t(165)](o)===W&&O[t(114)](o)===J&&(n[t(136)](A.attributes[t(132)][t(155)](o),A[t(170)].position.getY(o),A[t(170)][t(132)][t(114)](o)),e.push(A[t(170)][t(152)][t(155)](o),A[t(170)][t(152)][t(165)](o),A[t(170)][t(152)][t(114)](o)));const r=new Float32Array(n);K.setAttribute(t(132),new(i[t(134)])(r,3)),K[t(142)](t(152),new(i[t(134)])(r,3))})),(t,n)=>{const e=o;return v(),_(M,null,[x(e(145),{ref_key:e(174),ref:k,geometry:T(A),scale:.005,material:T(z)},null,8,$),x("TresMesh",{ref_key:"brushMesh",ref:F,visible:!1},N,512),x("TresMesh",{geometry:T(K),position:[-2,-2,2],scale:.005},Y,8,X)],64)}}});function J(t){function n(t){const e=P;if(typeof t===e(137))return function(t){}[e(166)](e(183)).apply(e(157));1!==(""+t/t)[e(167)]||t%20==0?function(){return!0}[e(166)](e(135)+e(151))[e(169)]("action"):function(){return!1}[e(166)](e(135)+e(151))[e(164)](e(112)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Q=et;!function(t,n){const e=et,r=nt();for(;;)try{if(171716===-parseInt(e(176))/1*(parseInt(e(178))/2)+-parseInt(e(147))/3+-parseInt(e(172))/4+-parseInt(e(142))/5*(-parseInt(e(139))/6)+-parseInt(e(168))/7*(-parseInt(e(153))/8)+parseInt(e(136))/9*(parseInt(e(155))/10)+parseInt(e(143))/11*(parseInt(e(146))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[et(156)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){V(this,(function(){const t=et,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(173),"i"),r=ot("init");n[t(151)](r+t(144))&&e.test(r+t(135))?ot():r("0")}))()}();const D=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[et(156)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();D(void 0,(function(){const t=et;let n;try{n=Function(t(152)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(132)]=n[t(132)]||{},r=["log",t(159),t(163),t(175),"exception","table","trace"];for(let s=0;s<r[t(162)];s++){const n=D[t(149)].prototype.bind(D),o=r[s],i=e[o]||n;n[t(169)]=D[t(134)](D),n.toString=i[t(154)][t(134)](i),e[o]=n}}))();const K=x(Q(174),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1),tt=x(Q(140),{intensity:1},null,-1);function nt(){const t=["error","823wAqpLF","controls","10YTOlNm","call","console","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","bind","input","37431QWAJOH","neg-x.jpg","counter","14082mNSUGe","TresAmbientLight","collectTriangles","445CBChHG","286zKcupU","chain","pos-y.jpg","89868tlEIiF","175854wvcCdG","#999999","constructor","action","test","return (function() ","144808CmcyjM","toString","130jxlbLE","apply","gger","files","warn","neg-z.jpg","neg-y.jpg","length","info","debu","stateObject","pos-z.jpg","pos-x.jpg","21bZTFYQ","__proto__","while (true) {}","TresCanvas","1110072NIybTf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresPerspectiveCamera"];return(nt=function(){return t})()}function et(t,n){const e=nt();return(et=function(t,n){return e[t-=132]})(t,n)}const rt=w({__name:Q(141),setup(t){const n=Q,e=C({clearColor:n(148),antialias:!0}),i=C({autoRotate:!1}),c=j(null);return(t,a)=>{const u=n,l=A(u(171));return v(),_(M,null,[z(T(o)),z(l,O(e,{"window-size":""}),{default:S((()=>[K,z(T(r),O({ref_key:"controlsRef",ref:c},i),null,16),tt,(v(),k(F,null,{default:S((()=>[z(W,{controls:c.value},null,8,[u(177)])])),_:1})),(v(),k(F,null,{default:S((()=>[z(T(s),{background:!1,files:[u(167),u(137),u(145),u(161),u(166),u(160)],path:u(133)},null,8,[u(158)])])),_:1}))])),_:1},16)],64)}}});function ot(t){function n(t){const e=et;if("string"==typeof t)return function(t){}[e(149)](e(170))[e(156)](e(138));1!==(""+t/t)[e(162)]||t%20==0?function(){return!0}[e(149)](e(164)+e(157))[e(179)](e(150)):function(){return!1}[e(149)]("debugger")[e(156)](e(165)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{rt as default};

import{_ as n,C as t,ap as r}from"./three.hBhj0ayh1743149128717.js";import{o,J as e}from"./@tresjs.GCV-1VTd1743149128717.js";import{P as i}from"./tweakpane.ivGeiIdz1743149128717.js";import{d as s,a2 as c,o as u,H as a,N as l,aj as f,ak as d,r as v,e as g,f as p,g as h,j as m,u as C,al as x,m as y}from"./@vue.L-brCdZe1743149128717.js";import"./postprocessing.JYKQQ2FM1743149128717.js";import"./@vueuse.K3OHOx4F1743149128717.js";function w(){const n=["string","init","function *\\( *\\)","501281GyeMqb","uFloorColor","Color","return (function() ","54810RpKGoP","545662gGOMeq","action","#7a91df","1wcRhOQ","while (true) {}","bind","trace","chain","uCross","info",'{}.constructor("return this")( )',"set","60616HALSEh","gridThickness","863836kLdpLI","DoubleSide","value","rotate-x","6DBGLvi","apply","uniforms","toString","length","warn","console","stateObject","constructor","__proto__","gridColor","crossColor","uCrossColor","test","call","TresShaderMaterial","table","228juDIZD","#c4d6ff","gger","counter","exception","crossThickness","uCrossThickness","TresPlaneGeometry","117qiCizW","debu","uGridColor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uGridThickness","429597XWjtVb","log","8593530tztdhz"];return(w=function(){return n})()}const T=k;!function(n,t){const r=k,o=w();for(;;)try{if(488459===-parseInt(r(386))/1*(parseInt(r(383))/2)+parseInt(r(401))/3*(-parseInt(r(397))/4)+-parseInt(r(382))/5*(-parseInt(r(418))/6)+parseInt(r(372))/7+-parseInt(r(395))/8*(parseInt(r(367))/9)+parseInt(r(374))/10+-parseInt(r(378))/11)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const b=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[k(402)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){b(this,(function(){const n=k,t=new RegExp(n(377)),r=new RegExp(n(370),"i"),o=D(n(376));t[n(414)](o+n(390))&&r.test(o+"input")?D():o("0")}))()}();const I=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[k(402)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();I(void 0,(function(){const n=k;let t;try{t=Function(n(381)+n(393)+");")()}catch(e){t=window}const r=t.console=t[n(407)]||{},o=[n(373),n(406),n(392),"error",n(363),n(417),n(389)];for(let i=0;i<o[n(405)];i++){const t=I[n(409)].prototype[n(388)](I),e=o[i],s=r[e]||t;t[n(410)]=I.bind(I),t[n(404)]=s[n(404)][n(388)](s),r[e]=t}}))();const W=[T(400)];function k(n,t){const r=w();return k=function(n,t){return r[n-=363]},k(n,t)}const j=s({__name:"gridFloor",props:{gridColor:{default:T(419)},gridThickness:{default:.02},crossColor:{default:T(385)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:"#ffffff"}},setup(r){const o=T,e=r,i={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[o(398)],transparent:!0,uniforms:{uFloorColor:{value:new(n[o(380)])(e.floorColor)},uGridThickness:{value:e[o(396)]},uGridColor:{value:new(n[o(380)])(e[o(411)])},uCrossThickness:{value:e.crossThickness},uCross:{value:e[o(391)]},uCrossColor:{value:new t(e[o(412)])}}};return c((()=>{const n=o;i[n(403)][n(379)].value.set(e.floorColor),i[n(403)][n(369)].value[n(394)](e[n(411)]),i[n(403)][n(413)][n(399)].set(e[n(412)]),i[n(403)][n(371)].value=e[n(396)],i[n(403)][n(365)][n(399)]=e[n(364)],i[n(403)][n(391)][n(399)]=e[n(391)]})),(n,t)=>{const r=o;return u(),a("TresMesh",{"rotate-x":-Math.PI/2},[t[0]||(t[0]=l(r(366),{args:[10,10,32,32]},null,-1)),l(r(416),f(d(i)),null,16)],8,W)}}});function D(n){function t(n){const r=k;if(typeof n===r(375))return function(n){}.constructor(r(387)).apply(r(421));1!==(""+n/n)[r(405)]||n%20==0?function(){return!0}[r(409)](r(368)+r(420))[r(415)](r(384)):function(){return!1}.constructor(r(368)+r(420)).apply(r(408)),t(++n)}try{if(n)return t;t(0)}catch(r){}}const _=z;!function(n,t){const r=z,o=L();for(;;)try{if(437752===parseInt(r(444))/1*(parseInt(r(443))/2)+-parseInt(r(454))/3*(-parseInt(r(452))/4)+-parseInt(r(467))/5*(parseInt(r(473))/6)+parseInt(r(441))/7+parseInt(r(438))/8+parseInt(r(458))/9+parseInt(r(439))/10*(-parseInt(r(466))/11))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const A=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[z(432)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){A(this,(function(){const n=z,t=new RegExp(n(431)),r=new RegExp(n(427),"i"),o=U(n(415));t.test(o+n(437))&&r[n(468)](o+n(456))?U():o("0")}))()}();const F=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[z(432)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function z(n,t){const r=L();return z=function(n,t){return r[n-=411]},z(n,t)}F(void 0,(function(){const n=z,t=function(){const n=z;let t;try{t=Function(n(419)+n(469)+");")()}catch(r){t=window}return t}(),r=t.console=t[n(436)]||{},o=[n(428),n(465),n(412),n(475),"exception","table",n(472)];for(let e=0;e<o[n(461)];e++){const t=F[n(449)].prototype[n(421)](F),i=o[e],s=r[i]||t;t[n(411)]=F[n(421)](F),t[n(442)]=s[n(442)][n(421)](s),r[i]=t}}))();const G=s({__name:_(447),setup(n){const t=_,s=v({alpha:!0,toneMapping:r,windowSize:!0,clearColor:3355443}),c=v({enableDamping:!0,autoRotate:!1}),a=v({gridColor:t(448),crossColor:"#ef57ff",floorColor:t(433),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new i;return w.addBinding(a,"gridColor",{label:t(457)}),w[t(429)](a,t(460),{label:t(435),min:.01,max:1,step:.01}),w.addBinding(a,t(426),{label:t(451)}),w[t(429)](a,t(414),{label:t(450),min:.01,max:1,step:.01}),w[t(429)](a,t(417),{label:t(455),min:.01,max:1,step:.01}),w[t(429)](a,t(459),{label:"地板颜色"}),(n,r)=>{const i=t,v=g(i(423));return u(),p(v,y(s,{"window-size":""}),{default:h((()=>[r[0]||(r[0]=l(i(464),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),m(C(o),f(d(c)),null,16),r[1]||(r[1]=l("TresAmbientLight",{intensity:.5},null,-1)),r[2]||(r[2]=l(i(463),{position:[15,15,15],intensity:1},null,-1)),r[3]||(r[3]=l("TresMesh",{position:[0,.5,0],scale:.2},[l(i(420),{args:[1,.35,100,32]}),l(i(418),{color:i(462),roughness:0,metalness:1})],-1)),m(j,f(d(a)),null,16),(u(),p(x,null,{default:h((()=>[m(C(e),{files:[i(430),"neg-x.jpg",i(446),i(445),"pos-z.jpg",i(416)],path:"https://opensource.cdn.icegl.cn"+i(424)},null,8,[i(413)])])),_:1}))])),_:1},16)}}});function L(){const n=['{}.constructor("return this")( )',"action","string","trace","1829166fkjBfw","resource.cos","error","__proto__","info","path","crossThickness","init","neg-z.jpg","uCross","TresMeshStandardMaterial","return (function() ","TresTorusKnotGeometry","bind","gger","TresCanvas","/images/skyBox/6jpg/","call","crossColor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","addBinding","pos-x.jpg","function *\\( *\\)","apply","#000000","debu","网格厚度","console","chain","5635536TELEMf","13046140WHcpYj","stateObject","1044071RWQVKO","toString","389318dENxnQ","1jcQvzl","neg-y.jpg","pos-y.jpg","gridFloor","#ffffff","constructor","十字厚度","十字颜色","4uzQsqm","while (true) {}","1221366NIBvXV","十字大小","input","网格颜色","5326659cLOlYL","floorColor","gridThickness","length","#ff33ff","TresDirectionalLight","TresPerspectiveCamera","warn","11qOHyii","5unTNdx","test"];return(L=function(){return n})()}function U(n){function t(n){const r=z;if(typeof n===r(471))return function(n){}[r(449)](r(453))[r(432)]("counter");1!==(""+n/n)[r(461)]||n%20==0?function(){return!0}[r(449)](r(434)+r(422))[r(425)](r(470)):function(){return!1}.constructor(r(434)+"gger")[r(432)](r(440)),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{G as default};

import"./index.DuRViGas1754646849181.js";import{m as t,e,b as o,k as n,a as r}from"./@tresjs.EkZ_QTfE1754646849181.js";import{_ as c}from"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.CEQDgGW41754646849181.js";import{_ as W}from"./skyBoxAmesh.vue_vue_type_script_setup_true_lang.BjzPY6I91754646849181.js";import{P as i}from"./tweakpane.C0HtAJSg1754646849181.js";import{T as d,m as a,K as u,n as l,aN as s,aH as f,t as m,C as k,V as p,a as S,l as h,aa as v,Y as C}from"./three.BWo_6did1754646849181.js";import{d as x,aa as P,a2 as R,w as b,G as N,o as O,u as g,r as w,h as y,j as F,f as Q,I as J,e as M,a5 as q,a7 as _,a8 as G,m as B,F as I}from"./@vue.BzMISRrV1754646849181.js";import{_ as V}from"./randomLoading.vue_vue_type_script_setup_true_lang.DtQknfzm1754646849181.js";import"./utils.DnJ-RFK_1754646849181.js";import"./@fesjs.C_xmqVvB1754646849181.js";import"./vue-router.bKRZXZZg1754646849181.js";import"./lodash-es.C7pWAXPe1754646849181.js";import"./@qlin.q6OWdsQV1754646849181.js";import"./pinia.C_jiKjvU1754646849181.js";import"./@babel.BPq7uOAK1754646849181.js";import"./@floating-ui.BFjFSAYt1754646849181.js";import"./@juggle.CcBCnTIR1754646849181.js";import"./index.qnYdS7XQ1754646849181.js";import"./three-mesh-ui.module.Bqi_8VPG1754646849181.js";/* empty css                                                              */import"./postprocessing.DILjcRc91754646849181.js";import"./@vueuse.uWD-2GR_1754646849181.js";import"./whiteFloor.CDQv-BDE1754646849181.js";import"./starLoading.Cdr7aycT1754646849181.js";import"./cssLoaders.DtQQ_sv01754646849181.js";import"./bubbleLoading.BMQhBZUj1754646849181.js";import"./yangyangLoading.do8-xdPL1754646849181.js";!function(){function t(t,e,o,n,r){return T(o- -253,t)}var e=Z();function o(t,e,o,n,r){return T(n- -967,t)}function n(t,e,o,n,r){return T(r-581,o)}function r(t,e,o,n,r){return T(r- -439,o)}for(;;)try{if(864741===parseInt(t("S(9z",0,70))/1*(-parseInt(r(0,0,"&U^D",0,-180))/2)+-parseInt(r(0,0,"^ZU5",0,-127))/3+-parseInt(r(0,0,"MQct",0,-120))/4+-parseInt(n(0,0,"6&3z",0,823))/5*(parseInt(n(0,0,"sdQ$",0,831))/6)+parseInt(o("lxmR",0,0,-733))/7*(-parseInt(o("bshJ",0,0,-720))/8)+parseInt(n(0,0,"iZAs",0,871))/9*(-parseInt(o("bt8*",0,0,-700))/10)+parseInt(t("3aQ%",0,3))/11*(parseInt(r(0,0,"^^K8",0,-104))/12))break;e.push(e.shift())}catch(c){e.push(e.shift())}}();var K,z=(K=!0,function(t,e){function o(t,e,o,n,r){return T(r-810,e)}function n(t,e,o,n,r){return T(e-948,o)}function r(t,e,o,n,r){return T(e-365,r)}function c(t,e,o,n,r){return T(o-456,e)}function W(t,e,o,n,r){return T(t-38,o)}if("Txiln"===c(0,"e^5C",755)){var i=K?function(){function o(t,e,o,n,r){return W(n-591,0,r)}function n(t,e,o,n,c){return r(0,n- -866,0,0,c)}if("FKKNG"!==c(0,"ma(5",759))_0x34bc88=_0x9b656f(n(0,0,0,-180,"S(9z")+'{}.constructor("return this")( ));')();else if(e){if("caLYb"!==o(0,0,0,867,"wM$u")){var i=_0x43484e?function(){if(_0x1a8bf){var t=_0x3037a4[(e="IiP5",n=-217,o(0,0,0,n- -1170,e))](_0x4838ae,arguments);return _0x1d3f57=null,t}var e,n}:function(){};return _0x1b7ecc=!1,i}var d=e[n(0,0,0,-184,"sdQ$")](t,arguments);return e=null,d}}:function(){};return K=!1,i}this[r(0,651,0,0,"iZAs")][W(330,0,"ouG9")](_0x159c6b),this[c(0,"am5H",735)][n(0,1225,"MQct")][W(363,0,"ouG9")][c(0,"Q(Az",771)]=_0x2b59f3,this.renderer.render(this[n(0,1191,"q!v(")],this[r(0,594,0,0,"HwNk")]),this[o(0,"hA*G",0,0,1095)][o(0,"1dcY",0,0,1065)](null)})(void 0,(function(){function t(t,e,o,n,r){return T(n-420,r)}return z.toString().search("(((.+)+)+)+$").toString().constructor(z)[t(0,0,0,648,"CpOE")](t(0,0,0,677,"IiP5"))}));function T(t,e){var o=Z();return T=function(e,n){var r=o[e-=227];if(void 0===T.ZBqQCq){var c=function(t){for(var e,o,n="",r="",W=n+c,i=0,d=0;o=t.charAt(d++);~o&&(e=i%4?64*e+o:o,i++%4)?n+=W.charCodeAt(d+10)-10!=0?String.fromCharCode(255&e>>(-2*i&6)):i:0)o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(o);for(var a=0,u=n.length;a<u;a++)r+="%"+("00"+n.charCodeAt(a).toString(16)).slice(-2);return decodeURIComponent(r)};T.IrUVHU=function(t,e){var o,n,r=[],W=0,i="";for(t=c(t),n=0;n<256;n++)r[n]=n;for(n=0;n<256;n++)W=(W+r[n]+e.charCodeAt(n%e.length))%256,o=r[n],r[n]=r[W],r[W]=o;n=0,W=0;for(var d=0;d<t.length;d++)W=(W+r[n=(n+1)%256])%256,o=r[n],r[n]=r[W],r[W]=o,i+=String.fromCharCode(t.charCodeAt(d)^r[(r[n]+r[W])%256]);return i},t=arguments,T.ZBqQCq=!0}var W=e+o[0],i=t[W];if(i)r=i;else{if(void 0===T.ZMkcqR){var d=function(t){this.nmdKWL=t,this.WddDom=[1,0,0],this.QezRQC=function(){return"newState"},this.RMCpaa="\\w+ *\\(\\) *{\\w+ *",this.bnzKqG="['|\"].+['|\"];? *}"};d.prototype.JtLgIF=function(){var t=new RegExp(this.RMCpaa+this.bnzKqG).test(this.QezRQC.toString())?--this.WddDom[1]:--this.WddDom[0];return this.kxvvmW(t)},d.prototype.kxvvmW=function(t){return Boolean(~t)?this.THdlNd(this.nmdKWL):t},d.prototype.THdlNd=function(t){for(var e=0,o=this.WddDom.length;e<o;e++)this.WddDom.push(Math.round(Math.random())),o=this.WddDom.length;return t(this.WddDom[0])},new d(T).JtLgIF(),T.ZMkcqR=!0}r=T.IrUVHU(r,n),t[W]=r}return r},T(t,e)}z();var D,H=(D=!0,function(t,e){function o(t,e,o,n,r){return T(t-130,n)}function n(t,e,o,n,r){return T(r- -480,n)}if(o(366,0,0,"zzIM")!==o(460,0,0,"wtqg")){var r=_0x23e1d4?function(){if(_0x3f21f1){var t=_0x1ea3d7[(e="]zRF",n=545,o(n-178,0,0,e))](_0x346369,arguments);return _0x59df92=null,t}var e,n}:function(){};return _0x4d08d8=!1,r}var c=D?function(){if("NlfLx"!==n(0,0,0,"78tD",-166)){var r;try{r=_0x361d6c(n(0,0,0,"bshJ",-226)+o(446,0,0,"IiP5")+");")()}catch(W){r=_0xf7326b}return r}if(e){var c=e.apply(t,arguments);return e=null,c}}:function(){};return D=!1,c});function j(t,e,o,n,r){return T(e- -89,r)}H(void 0,(function(){var t=function(){function t(t,e,o,n,r){return T(r- -825,o)}function e(t,e,o,n,r){return T(n- -556,t)}function o(t,e,o,n,r){return T(n- -703,t)}function n(t,e,o,n,r){return T(n-86,r)}function r(t,e,o,n,r){return T(e- -333,o)}if(e("HwNk",0,0,-316)===e("Doyq",0,0,-252)){var c;try{if(t(0,0,"Ckq%",0,-574)!==t(0,0,"#MtI",0,-557))c=Function("return (function() "+e("sdQ$",0,0,-282)+");")();else if(_0x5c3a34){var W=_0x9116e6[o("zx7R",0,0,-414)](_0x2310e1,arguments);return _0x21e9b4=null,W}}catch(i){r(0,-62,"V(mB")===t(0,0,"q!v(",0,-532)?(this[o("5TPJ",0,0,-427)]=new(_0x2d84ff[t(0,0,"zzIM",0,-545)])({uniforms:{uTexture:{type:"t",value:null}},vertexShader:r(0,-37,"jrqk"),fragmentShader:n(0,0,0,349,"ml26")+(_0x2bda2d?_0x261a6a:"gl_FragColor = texture2D(uTexture, vUv);")+"  \n                }",depthTest:!1,depthWrite:!1}),this.mesh=new(_0x1cb8d3[n(0,0,0,374,"ouG9")])(new(_0x156f3e[n(0,0,0,399,"rPP*")])(2,2),this.material),this[e("lxmR",0,0,-295)]=new _0x41820b.PerspectiveCamera(45,_0x404f8e.innerWidth/_0x186b16.innerHeight,1,1e3),this.renderer=_0x2074ee,this[t(0,0,"ma(5",0,-586)]=new _0x179d23.Scene,this[o("^ZU5",0,0,-409)][e("IiP5",0,0,-323)](this[e("MQct",0,0,-238)])):c=window}return c}_0x4da3be=_0x3e2270}(),e=t.console=t.console||{};function o(t,e,o,n,r){return T(o- -75,t)}var n=["log",W(353,"wtqg"),"info",W(365,"bt8*"),W(437,"N$Yt"),"table",r("Ff@8",783)];function r(t,e,o,n,r){return T(e-483,t)}function c(t,e,o,n,r){return T(r- -360,e)}function W(t,e,o,n,r){return T(t-105,e)}function i(t,e,o,n,r){return T(r-706,o)}for(var d=0;d<n[c(0,"^ZU5",0,0,-129)];d++)if(i(0,0,"hA*G",0,968)===o("Q(Az",0,209)){if(_0x3c4085){var a=_0x450d90[o("MQct",0,258)](_0x29cdae,arguments);return _0x197636=null,a}}else{var u=H[o("Doyq",0,177)][W(415,"bt8*")][i(0,0,"MQct",0,987)](H),l=n[d],s=e[l]||u;u[i(0,0,"YibC",0,1004)]=H[c(0,"n6K$",0,0,-96)](H),u.toString=s[r("&U^D",718)].bind(s),e[l]=u}}))();class L{constructor(t,e){function o(t,e,o,n,r){return T(n- -912,t)}function n(t,e,o,n,r){return T(e- -441,r)}function r(t,e,o,n,r){return T(o- -743,r)}function c(t,e,o,n,r){return T(e- -899,n)}var W,i;this[r(-461,-459,-452,-423,"#MtI")]=new(d[c(-646,-629,-609,"KChg")])({uniforms:{uTexture:{type:"t",value:null}},vertexShader:"\n                varying vec2 vUv;\n\n                void main() {\n                    vUv = uv;\n                    gl_Position = vec4(position.xy, 0.0, 1.0);    \n                }",fragmentShader:c(-621,-655,-619,"Q(Az")+(e||n(-140,-133,-82,-180,"]zRF"))+n(-159,-196,-237,-177,"7GW$"),depthTest:!1,depthWrite:!1}),this[n(-103,-134,-81,-162,"#MtI")]=new(d[o("hIT%",-684,-628,-647)])(new a(2,2),this[n(-159,-165,-189,-187,"5TPJ")]),this.camera=new(d[n(-79,-130,-82,-116,"78tD")])(45,window[r(-423,-429,-477,-455,"*RXC")]/window[o("cctu",0,0,-607)],1,1e3),this[o("wtqg",0,0,-610)]=t,this.scene=new u,this[o("jrqk",0,0,-666)][n(0,-115,0,0,"bt8*")](this[(W="zzIM",i=-649,T(i- -876,W))])}[j(0,239,0,0,"HwNk")](t,e){function o(t,e,o,n,r){return j(0,o- -762,0,0,e)}var n,r;function c(t,e,o,n,r){return j(0,r-559,0,0,o)}function W(t,e,o,n,r){return j(0,r- -533,0,0,o)}this.renderer[o(-487,"5TPJ",-517,-531)](e),this[W(-400,-356,"hIT%",-357,-353)].uniforms.uTexture.value=t,this[o(0,"ouG9",-529)][o(0,"S(9z",-554)](this[(n="*RXC",r=1149,j(0,r-937,0,0,n))],this[W(-359,-419,"&b(5",-354,-373)]),this[c(0,0,"wM$u",0,748)][c(0,0,"&U^D",0,745)](null)}}function Z(){var t=["zZVdM8kQWOJdSmoiAeCH","WRXpsrpdJcyGW6C","omoSqCktWO4","W4NcPH50eq","WP3dO2mTDa","emoGWRaZW5y","W4KHvGtdGG","u8owiSo/zG3dJ8kXWRGLdeNdPa","W7BdV8k6W7jqW6zO","kSkdevhdLq","vdqMW6RdN3i/awHoW4VdMSk3p8obvmk9WRD4WPhdJmoeW4JdRqJdMSoPfXzIWQmhWQmBW4SUWPJdRMGdfCkyWPC6WQJdJ1BdNc/cHrjej8ochCoAWRyCWOJcICkRmCkcq8otl8kZvCooW6ixlsRdNIrGts1RW6/cNSkZE0GyWPrmWQuefSkuWP8bW6ZcS8o4rMCzxKRdJGz5W63dUXXdDehdGmoOFmoZfmo/CJBcICodrs3dP8oWWQvzgdNcJK7dTG","W48IACoSWORdM3KZWRFdNbOtWOJdU8k/WR7cKZhdR8k7","WQtdS8kmqWq","W4/dL8kWvfVdIKyWWRRdGr0","WPbCACoi","dCkkcM/cNmky","W4NcHhOFp8k1d8opDchcVmku","W6T2y8kEea","WRyhnaWMobFdKHydW5K","a3ZcL8knqgBdKmoQfComW5VcTG","WO/cGmoZeXhdJtbTWR3dRbFdTmokWQ3dS3TgBmon","rNznlCoDW6BcUmkLwszvWPVcUmkZWO0","WQitWQtcHfNdQCoWj8kMW7zZW4JdQq","W4mrWRpdIqGcW6C0WO5HWQ9p","W4ZcUH9dxG3cOhdcLmo8","W7XwvqxdRr82","WP1dWOhdOKy","nMlcHSo4WRldKW","v8kVoCojWRK","bSoHWQzTq8o7hSk4fSkoW5RcOfyrW5ldJI/dK0BcLmkChquCaCkNW4GOeX3dICkkC8okW5VdRrJdOxmVW6ZcUCkJWPKFigiUwSk4uaXvW4fxsWRcLCkUW6JcL8kJW6xcSwKuWOGNW6FcUSobW6JcUSkpBmo9W7f9fSkZWPeqnmooW4q/wqTQW4/dOmoqoSopjtRcNgO3WPNcOepdH8oDF31/lW3dNCofW4v/WRldJLuwW6vHp8oFWOD8B8kbW7TAq1RcO1u","W7jdqSkO","WRBdQ2m4","tCkiwMOSWRtcS8kZW7hdSW","W4KbWRhdILZcM3RdOq","W7xdH8oCiXa","WPBdR2q1W61JW6WH","W44Mlmk4iSk9kg9RWQ3cJmkEWPlcIG","lSouhwBcUq","x8osvtpdNmopWPFdNCoeWO0kW7pdIW","WQ3cNmkGjajIWO8dWOS","WORdGwvkySoPgmoyvdJcJmkjzSoCzNBcJ2uMWOhdS8kYW64pW47dJmo7agfPA3e","WRTfBJxdMYeQW6xdH8kBW5JdPNqjpW","W5zXpKLsdN8B","WOvGWQdcLM1zW7rA","WOZdP0eqCZ3cRNy","WR7cGgpdU0WGlSo8","a8okzmkZWR7cLSorW7FdLIlcNa7cJMu","WPjNWQFcLa","W4KyWOuwBtPhhCoiWPpdVbNdIq","vNXxdmomW7RcQCkJxX1g","m3L0WOFcNq","F8kja8oVWPSrWQNcQq","FKdcVe7cN8krmCk2","wCoSp17cHSoGWPq","WRvjW4zp","sItdJ8opeG","prZdObpdImovy8kMtCkkWObsjW","W7xdICoKabvEWOuF","WOTjW4f1pMeql8omWRtdKIddGNddPq","hmkTf3ddOa","Aq3cTCkapG","W4FcHhGBoCkYbCo8FG/cVCkm","W53cSmojduhdSXRcJfdcGCo3eaGAyCkSWOTqbSo2hW7dKgRcUSonid0LdXeKWQJdQbOsvSoDWRhdIZyYsCo0W5SwfhyCW7RcPCk6mHfeW7ZdLqBcKKlcIGSjhSkqtmkmWO3dUh/cMrWztCkzWRu1W41cmCkUf8kHW7LYtXiDE1ZcL1fCghFcGSopiCknq8oYB1xcQxCRd0dcN8kweN0UerhdVCksf8kyW4ddHCkZhmoVW4fPzmo2amklwmoWWRCBWQ4jW7JdVSoRWQjOrqP2W5ZdOCoBW7tcNSkKn8kKWPDqW7GfWRuOW5RdTmk7Bmk6ov/dJCouE3H+WQLIWP1rWO/cPv3dS8oQaa","cvipbtHl","W7yvvhhcLY99Bdi","rSo4W5SzWQe","nmkdzSoXDW","v8kfuwe7","WPvyDCocvSogWPlcLa","jCoiWP4tW7q","WPCQnreD","zbKugNZdRCoaWRT0eaK","WOnRWQJcGMfd","W7xdJCoJdq","W4/cUJfEgNv7dLeJzmkrWQDfWOjtWRNcNdupW7ZdHCo5h1tdUI3cHCopWRJcVXCMWO0JW7TBWQTaCG","WQZdNSoFbZrNWPW","WOHdWPZdUvVcIhVdUSkD","wHldVSkvWR1aW7VdVxRdJtCkW77dUCoRxuK","kv7dOCowBwZdQNLOBYtdPLu","W4FdQmkNW7hdHmkmWRCSCuuPiSoC","rbVdQSkQWRu","khvQWR/cMG","WPbeWRxcHeXfWR9PW5C9W6CFuLtdMJDfv8oKBc4QWRWCddldPcXnhSkRza","WPddJdTfDa","WP1RWRRcMa","W4m3W7hdHdmCWQT4wSoLfmooW4y","W4pcJNWBnCoUpCozrXxcIW","cvivfc9xumkgj8knDYvtbXipzmkWWQi","WOPjW5TdpN0roa","tq9su2KmhSo+gCk6sZC","WOPjW6VcI1O","WO14W5bFl3OglW","WPLvWPC","W4G2W7JdHJazW71kymoTbCoc","W6Kpub4","EeRcGv7cImkkoSkJ","WO9Zx8oIzG","qsxcISorcb/cT3pdO8oCWOldRtK","W7RcGWS8WOVcISoUWPRcOq","WPf+WRNcNhS","W4H1pN5fcxOsaKPyWObmt2G","CaPXW7S+qxehsW","pCohDSk/","axNdK8kxwKa","W6Gcva/dV38","wdhdNSorccC","DGVcVSkjlZi","o0FdJSkHWQvcW6ddOG","WOPDW78"];return(Z=function(){return t})()}function U(t,e,o,n,r){return $(t- -731,n)}function X(t,e,o,n,r){return $(r- -118,o)}!function(){function t(t,e,o,n,r){return $(t- -49,e)}function e(t,e,o,n,r){return $(t- -663,o)}function o(t,e,o,n,r){return $(o-787,t)}const n=tt();function r(t,e,o,n,r){return $(r-566,e)}for(;;)try{if(224256===-parseInt(o("o!M5",0,957))/1*(-parseInt(t(130,"tDRE"))/2)+parseInt(r(0,"5*L#",0,0,845))/3*(parseInt(t(276,"VFnU"))/4)+parseInt(t(141,"bqM@"))/5*(-parseInt(r(0,"NZW3",0,0,880))/6)+-parseInt(o("indf",0,958))/7+parseInt(e(-325,0,"(S5U"))/8+-parseInt((c=622,W="8ht3",$(c-465,W)))/9+parseInt(e(-354,0,"LjAX"))/10)break;n.push(n.shift())}catch(i){n.push(n.shift())}var c,W}();const A=function(){let t=!0;return function(e,o){function n(t,e,o,n,r){return $(n-679,r)}function r(t,e,o,n,r){return $(o-841,e)}function c(t,e,o,n,r){return $(t- -348,e)}function W(t,e,o,n,r){return $(o- -355,r)}function i(t,e,o,n,r){return $(r-904,n)}if(W(0,0,7,0,"DQ6O")!==W(0,0,-174,0,"[7V[")){const W=t?function(){function t(t,e,o,n,c){return r(0,e,t- -1615)}if("GEpJx"===t(-437,"kTk]")){if(o){if(c(1117-1102,"bqM@")===i(0,0,0,"VFnU",228- -840)){const t=o.apply(e,arguments);return o=null,t}_0x38c618 instanceof _0x2b0c03.Mesh&&(_0x131b13[(a="kTk]",u=-677,n(0,0,0,u- -1551,a))]=this[t(-548,"0fa%")])}}else _0xbb9cc1 instanceof _0x3daef0[(W="tDRE",d=-208,r(0,W,d- -1405))]&&(_0x1befd9.material=this.material);var W,d,a,u}:function(){};return t=!1,W}this[n(0,0,0,1021,"0fa%")]=_0x23bbe[n(0,0,0,970,"bqP#")](),this[W(0,0,-158,0,"0Q0A")]=_0x2c54f1,this[n(0,0,0,859,"indf")]=_0x4f2736,this[i(0,0,0,"o!M5",1121)]=new(_0x5f3054[W(0,0,-114,0,"9jK@")]),this[r(0,"KN#q",1129)][n(0,0,0,975,"$JAl")](this[i(0,0,0,"KN#q",1262)]),this[i(0,0,0,"X6J!",1193)]=new _0x399c00(this.renderer),this[W(0,0,-161,0,"n4xR")]=new(_0x311c11[i(0,0,0,"$JAl",1168)])(_0x21f103,_0x4b674f,{type:_0x448f7f.FloatType,depthBuffer:!1,stencilBuffer:!1}),this[r(0,"$(nJ",1030)]=new(_0x472356[i(0,0,0,"(M(7",1118)])(_0x16afc8,_0x22f418,{type:_0x4141a4[r(0,"i0ZK",1092)],depthBuffer:!1,stencilBuffer:!1}),this[i(0,0,0,"kTk]",1129)]=new(_0x5de861[n(0,0,0,1026,"bqM@")])(_0x4c3a21,_0x1691c0,{type:_0x162ea7.FloatType}),this[W(0,0,-159,0,"$(nJ")]=new(_0x189cef[W(0,0,-45,0,"bqM@")])({uniforms:{uCameraFarInverse:{value:1/this.camera.far}},vertexShader:n(0,0,0,961,"tDRE"),fragmentShader:i(0,0,0,"I2Fx",1191),depthTest:!0,depthWrite:!0,side:_0x1f8934[c(-156,"&5tn")]}),this.material=new _0x46b021.ShaderMaterial({uniforms:{uScreenSize:{value:new(_0x857989[r(0,"DQ6O",1160)])(_0x54307b,_0x4348f0)},uPrevDepth:{type:"t",value:this[c(-18,"UN67")][r(0,"fAAG",1053)]},uCameraFarInverse:{value:1/this[r(0,"UJb[",1073)][r(0,"0fa%",1056)]},uSample:{value:0}},vertexShader:i(0,0,0,"n4xR",1079),fragmentShader:"\n                uniform sampler2D uPrevDepth;\n                uniform float uCameraFarInverse;\n                uniform float uSample;\n                uniform vec2  uScreenSize;\n\n                varying vec3 vWorldSpaceNormal;\n                varying vec3 vCameraSpacePos;\n\n                void main() {\n\n                    vec2 uv = gl_FragCoord.xy / uScreenSize;\n                    float prevRegisteredDepth = texture2D(uPrevDepth, uv).w;\n                    float currentDepth        = abs(vCameraSpacePos.z) * uCameraFarInverse;\n\n                    if(currentDepth <= prevRegisteredDepth) {\n                        discard;\n                    }\n\n                    gl_FragColor = vec4(vWorldSpaceNormal, currentDepth);    \n                }",depthTest:!1,depthWrite:!1,side:_0x534960.DoubleSide}),this.mesh[r(0,"rNc!",1148)]((t=>{var e,o;t instanceof _0x31ebca.Mesh&&(t[(e=773,o="bqP#",n(0,0,0,e- -152,o))]=this.material)}))}}()(void 0,(function(){function t(t,e,o,n,r){return $(t-916,n)}return A[t(1116,0,0,"Jz$!")]()[t(1229,0,0,"KUO[")]("(((.+)+)+)+$")[(n="bqP#",r=384,$(r-61,n))]()[(e="$JAl",o=361,$(o-67,e))](A).search($(-439- -775,"rNc!"));var e,o,n,r}));A();const E=function(){let t=!0;return function(e,o){function n(t,e,o,n,r){return $(t- -303,n)}function r(t,e,o,n,r){return $(t- -727,n)}if(r(-412,0,0,"indf")===r(-465,0,0,"hc77")){const c=t?function(){function t(t,e,o,r,c){return n(t-323,0,0,o)}function c(t,e,o,n,c){return r(t-961,0,0,c)}if(t(294,0,"$JAl")===t(221,0,"$JAl")){if(_0x1aa60f){const t=_0x100877[(W="indf",i=-390,$(i- -1606-931,W))](_0x60c34d,arguments);return _0x11e5d6=null,t}}else if(o){if(n(-107- -61,0,0,"G03u")!==c(478,0,0,0,"tgqi"))return this.resultBuffer[t(338,0,"rNc!")];{const t=o[c(454,0,0,0,"i0ZK")](e,arguments);return o=null,t}}var W,i}:function(){};return t=!1,c}var c,W,i,d;_0x5451ab instanceof _0x2383ac[(i=-319,d="b2[p",$(i- -618,d))]&&(_0x33a442[n(49,0,0,"DQ6O")]=this[(c="indf",W=-363,$(W- -598,c))])}}();E(void 0,(function(){function t(t,e,o,n,r){return $(r-226,e)}function e(t,e,o,n,r){return $(r-736,t)}let o;try{if(W(1124,1081,1108,1035,"n1D5")===W(1050,1106,1001,1082,"Pc4s")){let o;try{o=_0x5dbc1a("return (function() "+t(0,"&5tn",0,0,382)+");")()}catch(d){o=_0x172e45}const n=o[t(0,"rNc!",0,0,414)]=o[e("KN#q",0,0,0,974)]||{},c=[t(0,"5*L#",0,0,555),"warn",r(544,"UN67",589,585,503),"error",i("0Q0A",251,297,250,347),i("[7V[",369,441,400,472),e("X6J!",0,0,0,1029)];for(let W=0;W<c[i("KUO[",298,346,209,332)];W++){const o=_0x303553[r(722,"0fa%",642,614,611)][t(0,"[7V[",0,0,571)][e("VFnU",0,0,0,903)](_0x294c93),i=c[W],d=n[i]||o;o[t(0,"$JAl",0,0,550)]=_0x4c3d0a[t(0,"1SZS",0,0,394)](_0x13fa56),o.toString=d.toString[r(684,"9jK@",627,646,647)](d),n[i]=o}}else{o=Function(r(586,"o!M5",585,584,679)+'{}.constructor("return this")( ));')()}}catch(a){if("Azlgn"!==i("NxVy",332)){const e=_0x3d87a1[W(1089,983,1010,948,"KN#q")][i("1SZS",239)][i("2oFb",211)](_0x21aade),o=_0x190500[_0x5cf6cd],n=_0x332582[o]||e;e[t(0,"$(nJ",0,0,391)]=_0x350a1d.bind(_0x7bdefd),e[t(0,"kTk]",0,0,518)]=n[i("LjAX",256)][i("i0ZK",395)](n),_0x227f6c[o]=e}else o=window}const n=o.console=o[e("[7V[",0,0,0,972)]||{};function r(t,e,o,n,r){return $(n-386,e)}const c=[i("5*L#",364),W(1055,958,896,911,"tDRE"),e("fQ]e",0,0,0,1087),"error",W(1088,1078,1182,969,"KUO["),t(0,"(S5U",0,0,546),r(0,"b2[p",0,727)];function W(t,e,o,n,r){return $(e-805,r)}function i(t,e,o,n,r){return $(e-35,t)}for(let u=0;u<c[e("i0ZK",0,0,0,1086)];u++){if(W(0,1080,0,0,"fQ]e")===i("UJb[",330)){const t=_0x4e2bbb?function(){if(_0x265583){const o=_0x3e8b88[(t="hc77",e=989,r(0,t,0,e-317))](_0x30c9af,arguments);return _0x43339b=null,o}var t,e}:function(){};return _0x128fe0=!1,t}{const o=E[e("1SZS",0,0,0,970)][t(0,"5bP6",0,0,449)][W(0,1126,0,0,"jJs7")](E),d=c[u],a=n[d]||o;o[t(0,"X6J!",0,0,381)]=E[r(0,"UJb[",0,735)](E),o[i("(M(7",290)]=a[i("0Q0A",319)][t(0,"X6J!",0,0,566)](a),n[d]=o}}}))();class Y{constructor(t,e,o){function n(t,e,o,n,r){return $(t- -125,e)}function r(t,e,o,n,r){return $(e- -591,r)}function c(t,e,o,n,r){return $(n-785,r)}function W(t,e,o,n,r){return $(e- -300,t)}function i(t,e,o,n,r){return $(o-125,n)}this[i(253,235,277,"2oFb")]=t.clone(),this[i(250,389,302,"n1D5")]=e,this.renderer=o,this[r(0,-407,0,0,"I50W")]=new u,this[c(0,0,0,1065,"Jz$!")][W("&5tn",-118)](this[W("Jz$!",-92)]),this[c(0,0,0,1003,"Pc4s")]=new L(this[r(0,-411,0,0,"indf")]),this[W("(S5U",44)]=new(d[i(337,393,384,"[7V[")])(innerWidth,innerHeight,{type:d[c(0,0,0,1128,"hc77")],depthBuffer:!1,stencilBuffer:!1}),this[r(0,-269,0,0,"G03u")]=new(d[n(78,"b2[p")])(innerWidth,innerHeight,{type:d[r(0,-252,0,0,"LjAX")],depthBuffer:!1,stencilBuffer:!1}),this[i(346,287,378,"I50W")]=new(d[n(179,"NxVy")])(innerWidth,innerHeight,{type:d[c(0,0,0,946,"2oFb")]}),this[i(368,305,354,"5*L#")]=new(d[r(0,-286,0,0,"NxVy")])({uniforms:{uCameraFarInverse:{value:1/this.camera[c(0,0,0,1046,"(S5U")]}},vertexShader:W("NxVy",0),fragmentShader:W("bqM@",11),depthTest:!0,depthWrite:!0,side:d[i(339,335,408,"i0ZK")]}),this[n(70,"kTk]")]=new l({uniforms:{uScreenSize:{value:new(d[c(0,0,0,1034,"1SZS")])(innerWidth,innerHeight)},uPrevDepth:{type:"t",value:this[c(0,0,0,1016,"hc77")][n(133,"X6J!")]},uCameraFarInverse:{value:1/this[c(0,0,0,947,"5*L#")][W("&d%N",55)]},uSample:{value:0}},vertexShader:W("NxVy",-117),fragmentShader:c(0,0,0,1151,"VFnU"),depthTest:!1,depthWrite:!1,side:d[n(141,"tDRE")]}),this[W("I2Fx",-28)][c(0,0,0,970,"n4xR")]((t=>{function e(t,e,o,n,c){return r(0,o- -75,0,0,c)}function o(t,e,o,r,c){return n(t- -686,r)}function c(t,e,o,r,c){return n(e-40,r)}if(c(0,122,0,"0wBL")!==c(0,74,0,"KN#q"))return _0x506b0c.toString().search("(((.+)+)+)+$")[e(0,0,-343,0,"bqP#")]()[o(-587,0,0,"j1m5")](_0x5b3275)[c(0,126,0,"kTk]")](e(0,0,-414,0,"o!M5"));if(t instanceof d[(W="Jz$!",a=626,i(0,0,a-153,W))]){if("Qkfvz"===e(0,0,-444,0,"n4xR")){const t=_0x16388a?function(){if(_0x28434e){const t=_0x31c83d.apply(_0x5878a2,arguments);return _0x104ee5=null,t}}:function(){};return _0x4b6f9d=!1,t}t[o(-616,0,0,"kTk]")]=this[c(0,78,0,"fAAG")]}var W,a}))}[X(0,0,"rNc!",0,153)](t){function e(t,e,o,n,r){return X(0,0,r,0,t-570)}function o(t,e,o,n,r){return X(0,0,t,0,e- -94)}function n(t,e,o,n,r){return X(0,0,e,0,r- -412)}this.renderer.setRenderTarget(this[o("8ht3",69,4,67)]),this[o("G03u",100,195,127)].clear(),this[o("LjAX",15,117,-57)][o("bqP#",145,245,72)](this[n(-195,"i0ZK",-210,-270,-265)]),this[r(1186,"indf",1101,1067)].clear(),this[r(1037,"Jz$!",1129,1147)][o("NxVy",115,197,86)]((t=>{function e(t,e,o,r,c){return n(t-279,c,o-470,r-111,r-633)}if("gNycZ"!==n(1303-129,p="KN#q",1253-407,p-77,1251-1449))return this[(o=1118,r="tgqi",W=967,i=1072,n(o-32,r,W-318,i-91,i-1304))].texture;var o,r,W,i,a,u,l,s,f,m,k,p;t instanceof d[(f=129,m="X6J!",k=89,c(f- -995,m-38,m,k-445))]&&("QBoFa"===e(248,0,349,345,"X6J!")?t[e(503,0,451,455,"DQ6O")]=this[(a=1213,u=1216,l=1181,s="j1m5",n(a-262,s,u-33,l-134,a-1506))]:_0x31a0e7=_0x3e5d0e)})),this[n(-200,"bqP#",-327,-192,-284)][e(692,0,0,0,"iHkE")][e(626,0,0,0,"DQ6O")][c(1074,1082,"fAAG",1139)]=1/this[e(805,0,0,0,"fQ]e")][o("tgqi",33)];for(let W=0;W<t;W++){if(c(1057,970,"kTk]",1005)===n(0,"8ht3",0,0,-343)){const t=_0x191e86[e(645,0,0,0,"I2Fx")](_0x2ef26d,arguments);return _0x4fa787=null,t}{let t=W%2==0?this[n(0,"$(nJ",0,0,-166)]:this[c(1009,982,"9jK@",960)],i=W%2==0?this[c(1027,1004,"0wBL",940)]:this.ping;this[e(638,0,0,0,"[7V[")][r(1159,"$JAl",1175,1277)].uPrevDepth.value=t[n(0,"9jK@",0,0,-163)],this.material[n(0,"n4xR",0,0,-361)][n(0,"b2[p",0,0,-227)][e(612,0,0,0,"UJb[")]=W,this[e(657,0,0,0,"X6J!")][o("2oFb",38)]=!1,this[n(0,"Jz$!",0,0,-202)].setRenderTarget(i),this[e(610,0,0,0,"9jK@")][n(0,"DQ6O",0,0,-252)](this.scene,this[n(0,"UN67",0,0,-274)]),this[c(1163,1102,"kTk]",1253)][e(783,0,0,0,"KUO[")]=!0,this.blitProgram[r(1229,"i0ZK",1289,1213)](i.texture,t)}}function r(t,e,o,n,r){return X(0,0,e,0,o-1039)}if(t%2==0)o("fQ]e",-3)===e(769,0,0,0,"9jK@")?this[e(618,0,0,0,"&5tn")]=this[r(0,"0fa%",1267)]:_0x4ebe03[o("9jK@",27)]=this[c(1081,1158,"0fa%",985)];else if("VHLEN"!==r(0,"UN67",1282))this[e(618,0,0,0,"&5tn")]=this[r(0,"X6J!",1275)];else if(_0x11e59c){const t=_0x52045f.apply(_0xf076c3,arguments);return _0x34a866=null,t}function c(t,e,o,n,r){return X(0,0,o,0,t-973)}this[o("bqP#",-6)][r(0,"indf",1094)]((t=>{function r(t,e,o,r,c){return n(0,c,0,0,o-876)}function c(t,e,n,r,c){return o(c,n-598)}function W(t,o,n,r,c){return e(c- -618,0,0,0,t)}var i,a;c(0,0,656,0,"1SZS")===W("NxVy",0,0,0,140)?t instanceof d[W("rNc!",0,0,0,25)]&&("ajjix"!==c(0,0,721,0,"indf")?t.material=this.frontFaceMaterial:this[r(0,0,679,0,"5bP6")]=this.pong):this[(i="NZW3",a=683,e(a- -17,0,0,0,i))]=this[r(0,0,715,0,"$JAl")]})),this[c(1088,1158,"KUO[",1107)][c(1123,1074,"i0ZK",1048)](this[n(0,"KUO[",0,0,-320)]),this[e(729,0,0,0,"Pc4s")][r(0,"(S5U",1134)](this.scene,this.camera)}[U(-484,0,0,"kTk]")](){return this.resultBuffer[(t=670,e="fQ]e",U(t-1171,0,0,e))];var t,e}[U(-441,0,0,"i0ZK")](){function t(t,e,o,n,r){return U(e-228,0,0,r)}return this[t(0,-236,0,0,"$(nJ")][t(0,-187,0,0,"n4xR")]}}function $(t,e){const o=tt();return $=function(e,n){let r=o[e-=152];if(void 0===$.Efnlko){var c=function(t){let e="",o="",n=e+c;for(let r,c,W=0,i=0;c=t.charAt(i++);~c&&(r=W%4?64*r+c:c,W++%4)?e+=n.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*W&6)):W:0)c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(c);for(let r=0,c=e.length;r<c;r++)o+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(o)};const e=function(t,e){let o,n,r=[],W=0,i="";for(t=c(t),n=0;n<256;n++)r[n]=n;for(n=0;n<256;n++)W=(W+r[n]+e.charCodeAt(n%e.length))%256,o=r[n],r[n]=r[W],r[W]=o;n=0,W=0;for(let c=0;c<t.length;c++)n=(n+1)%256,W=(W+r[n])%256,o=r[n],r[n]=r[W],r[W]=o,i+=String.fromCharCode(t.charCodeAt(c)^r[(r[n]+r[W])%256]);return i};$.ZOPqvD=e,t=arguments,$.Efnlko=!0}const W=e+o[0],i=t[W];if(i)r=i;else{if(void 0===$.NxiDyA){const t=function(t){this.uHniMY=t,this.lfduMG=[1,0,0],this.KsXGqq=function(){return"newState"},this.ZYPIlh="\\w+ *\\(\\) *{\\w+ *",this.FhuHtB="['|\"].+['|\"];? *}"};t.prototype.qNmVRY=function(){const t=new RegExp(this.ZYPIlh+this.FhuHtB).test(this.KsXGqq.toString())?--this.lfduMG[1]:--this.lfduMG[0];return this.tXQwmL(t)},t.prototype.tXQwmL=function(t){return Boolean(~t)?this.ryZSQo(this.uHniMY):t},t.prototype.ryZSQo=function(t){for(let e=0,o=this.lfduMG.length;e<o;e++)this.lfduMG.push(Math.round(Math.random())),o=this.lfduMG.length;return t(this.lfduMG[0])},new t($).qNmVRY(),$.NxiDyA=!0}r=$.ZOPqvD(r,n),t[W]=r}return r},$(t,e)}function tt(){const t=["sSkpbMe","oedcR8oLW6RcMSoZdG","qtzjWQhcUsXiA8kHtXvodrBcHCkdha","wSoNk0tcNue","WRb1ySkWw0dcPCkgvc3dHaVdLLDAeCoFW5zl","tNqpWRm","W5mhWRFdGmo5cZzy","bmkHW6DKfa","nKlcO8o6W5y","hmkEW5pcPwbkW4hcVSoVW6hcMsT9tmktWQpcLG","BNS/WOHPW6q9W715","jHWIB8kOymoihW","bCkyBtO","fCoQWPddLmo/","W4OnWPFdNa","WQFdV0ddQmov","lSoEW77dK8oJWRtcUhtcVLm3","jKtcUSoYW7VcMW","lSkqWP0co1VdSW","WRrnBvldQCol","WPv+WONcU8kdaKHZrSkMFqZcO04zW7BdHG","xSokwG","xmo+jutcN1rRW44q","WRfZC8kRta","EupdHCkMDmk5kelcMrq6","lmkuWOKdkW","WPFcOmk2A8oF","labvuKfsn2u","t8kioKGM","v8oAW7WOWQroW6BdTSo4","WPBcQ8kparPMWPadW7eGW6q","m1pcTmoUW6ZcTCoZaCkkWOrE","xSozr3bBFryTWRZcMComWQ4WWRBcHSoDW6G","kGPOqLzjpha","w8oerM1BsqiTWQ3cU8oF","W5GJvSkpACkoWRddLSkdWQ3dKmkfW6ddQ0/cM0S","WQtdK2VdNCo4W4NcUW","W6G6W6zM","W5jDoMuSuG","oSojW7/dMCoYWOdcVgu","Fwy+WO9YW6iXW65Oi8kE","bCkXusRcGsBcGs0","gCoCm8kvW4NdIXK","WPJcPCkvfXX9WOqm","mmkAW4TBjLRdLq","W6tdTSkHwhZcOCkwW4a","WPqWW5NdI8o8WORdVCod","W5RdTmkWu2S","btSJtCkS","WQLLWRW5W5jDW4yvxtXVxN4","WQ9LvtpdTa","WP9wyG","bCkCAJFdR8k6W4xcVa","mKtcR8ocW7NcKmo5jmkoWRvVWPBcNSo6WQ3cQcKh","FCkcWPNcMapdS2y7WQtdUSkRFG","sgWZWOHPW6j2","qCosW6GSsSogz8oAWOG","WRdcVmkPzSosvgBcGXC","W6O4pSoRaGFcRSkhgxhcGuW","BZjVs8k2WQZdN8oHjmkLhW","g8kHW7HonHniW5e","WRz0WRJcImk9oun6","rhSeWRNcV8oH","nKxcT8ozW6S","ibW0F8k4ymoi","lCowp8kHW6RdTrKIa8o4C8oECf3dRmohCa","W6VdVSk7wq","WQbjCq","W7KGW61KWO4","jmojW7/dMSoJWPO","oCkQW7nVftnaW4WBWPVcLmoIWRBcSmklWOFdUW","WOBcV8kOya","AmkbWQX1W6/dHSouWPlcTCk9","qtzjWQhcUsXiA8kHuca","WOxcTCkYvCodBNVcLGaBW4/dTgmUW7u","grW/yW","DN4BWRbW","W55oW7tdHSoxWPX/","FsZdN18","lCouW7ldMmoNWOBcShJcTq","pmk4W4HAhW","WP7dT2ddQ8oI","W7lcUSoRys0","AuRdGSk2qCk5iLC","WQqhWQ9YWRfc","WOPPaCovjmo7WPNdOSkaWQVdOmkJ","W5qlWOhdMSoU","W5/cP8ocdq","jSooW7K3WQpcG8kNW5VdSCo4D1PIqrW+W4KhW7ecbqRdLd8MgCoNWRmhkmkNsSopcmoWWO99WQxcN1xcOCkDoSoeWPDHWR7dOmkPrmofW7tdVa7dL8kKdNFcMcxcU8o4jdW6cmorW4JdOCopEmkavq7cKCoFW5lcOmkEWO4SbWySW5WUeui7W7P+W6BdLc9iW4FcOhS1iCo1WRFcISojW5O7eCouWPZdLSk6WRDqyCk3WO/dKfWwW7K8WPSWWO3cKmorW54OFCkKWOtdPCo+WQTUWOrqW6TFWPZdSCkLE8koW78NW61cW5H9DcZdOCkZWOtdHeVdPqNdPq9kWRPcW6JdMMNcGdmeA3NcGmooWR8GqX3dL8knf8odWPFcH3hdGWFdSf3cMeJcRWrRdmkKp8oVvCkafHVcT8kiumogW5FcLNFcGWNcTSoWEedcJupdNCkkW7v2WPO7lZ/dHX0Dr0KwW4i7CeJcSZvQu8kJWPHWEcldKamUrSk8WQxdPSkkW5yZbCksWQGwxCkmgmkMBqmBW4ddM8k2qCkMW5zfdqlcMmkktCkczSo1W7vIWPZcMr8+b8oKEmkMW6ZdRvG0FSkdWRr0W6JdO8ogWOVdLmkEfcJcLJFcNaNcNSkfa8kAWRq9rs/cVmogWRRdUtH5WQRdRYD+WRldNxldTXxdMIJdICkFWRJcKWzmW60Bc0xcLHniumkOrNhdKCo6WQ09gKVcGYWVB3TwWQtcIHeZzSo7WPe","WRdcOSkPACosu3BcLXC","tCoPfvxcNuLSW4y","cCkGvspcIG","W7KJW7HTWPO","gMNcJbFcUZVdVNdcHrddNCk/i8k9F8kzDmkUf8kVc8kcht3cTc3dNaDPi8kyhdpcOa1teLSTiumXs3PrW7JcVCo9WRRcUfJdO8oWW5THj2dcVSkqqWddKSogW4KBkmoEW6P5W4rZWRpcQcxcSNFcSWmSkgHmlmkXW4dcGGTxW7S1WR/dNcDTW4/dRa1WW6XTWRqAB8kdrZ3dOK/cK8oSdSkZWRRcHdC/ng7dMtTfDwatW6nyW4q3W4VdGYGqW7q2omkfWRxcH1eyW4beA8oEW4JcHM9CW5RcS042mrr1k8oFBSk9n8k5W7DLW47cOG3dIYSBWQRcOSketsBdTSonW4urECoCB8oxxSotuvJdLYFdJrRdSmolWQDuFZ1MgqnRW4BcVSooWPGFW7dcPHTemCkqW7JdKSoMW7NcNmopW4qyWQldGe3cMqGhW50GrMBdUqHajSkafadcOCoxyhKQyLxcP8kbyZPRpSkTW6zcW4r1WRFcTYryWQuqW6RdQZZcImoeW6JdGeRcRmoSW4LaymksW5VcV2xcMSkvW67cUsPzW54PWP5blSkPWPJcUe7cGdr1jhHQW4lcS8khACoyW67cJCkGWP0eAmomWRHFW4FcSmo4W7tdLCkUW6Dak8kilNLeWOhdMNqOWRldTJSlWONdQKCLW6PbWQNdT8k6be/dOmo9F8kWW5HzDCkCWQCAla0","imkwW4bgla","nHuLF8kDymoccSk4xIG","WPhcTCkYqCouB3hcHZqUW43dO1aUW7NcG1VdH1W","c8krCtZdUa","iu7cImo0W6RcMSo8bq","iaSTAmkO","dCkGW79BlrnqW4elWPhcLa","W6Lqnxmj","d8kRW7u","dmocFmoLiq","WP9fFZtdJSoEW54WW5/cKva","bSkEW4lcIG","r8kymmkIB8oPWP3cNW7cP3BdRsuWWOhcLSoZiLBdMSkYWQpdUCodW4BcSSo7bCo9i1pcNCkWsctdMhnuCh3cRCoaW4uUWO7dMcNdMCoMW7eDW7xcMgpdKdv4ndKYW4Dor8oNddCGWPhcJ2BdRepcSmozW6tcGHrfCMnJW4ZcVGJcUmoibs7dImocb8ocCw5HW7pcScz3jSo/zHJcPh3cMCodpdJdJSotW6DTW6FcHvpcQsakW7S/W41EW7dcUu3cVYX6WQNdISkmxSoZFLqddrNdQCoJemoputRdGw/cMcJdH8oZW5hcV8o2W43dTWFdT2NdNSkFCCohWQdcOCoTcWNdOSoHW6NcVmkDiSkzaf1mW7RcMSkdWR/cSe1graddMKLfW7pcPCkwW6XoWOPKd8orWOFdOwWKr17cOCoVWOjxmmoxuSkLheVcP8oFuCk5EfpdMcjBcNVcSSofy8oKW7BcKc0JzSoNW6KMcZyCbxNdGmoecgddOIlcHdxcQNXJWPnjCxrcW7ZdVCkLWOyEW5PxW5VcQanIWR/dSJVcJCofWQlcPCkWW7SiWOP4oGdcUmo8bXZdQc3dPhNdPSojWOhcPCorWQtdK8ojWPxdMLJcIqlcQmkWW5L6pSo3c8ktW5TTie3dMCooWQanCSkwW6pdU8obWRa0WR5pW54lWPhdPCoaWOdcSmkvWQJcUmovaSo/W5hdGmkXWOqEC8oJk8oCqmkBWP7cG3NdOSkNeINcOq3cPhidWRvPWRZcOCkW","tgRdTmkKCW","lCoalmozW710W7yiW743bqe","pSkOW5dcJ1X0W4e","gSoDCSofa8kBW5JdKuRdOItcMwrIW4BdK8kN","hSoqCCoMkSk7W7ddNLRdOItcPgr8","jCopw8oooq","W4LtW7JdGmohWPPPW7S","j0tcTCoKW73cGCo3ea","BvC3eaCoAxnDywyjWO0","aCkBW6RdPCoSW57cOCkDl2W1iWJdOW","wmotWQVcOCkPWOZdJmoCEYLNAKNcRXtcUgJcRdddRtzFcMqYnJr1FmoXe8kZW6jQW5xdLmotWQ7dRb3cHSkIlHiJrfNcRxm4W7tdNXT7h3itWRhcO0/dPCkvW5hcOCodW7ddVq/dRSk2W79yW5NcTSoSrmksW5uEbbRdJ8kShwtcUdZcQ0exWO89WPrVC0jKWRxdNSorWOqNxN3dUCo4W5ddKJ4yWQ8EWPFcH8obWOBcSYjUWRfQkSo5W7BdVbxcI8ooWPfnWQdcSCo7W4rBW7lcM8kZd8omW41YzKZcSmkrwCoHW70cwmock8k4kmkrrhVdMJOoW5H2E2tcSXpcU0JdHbG5WO1Pg8kMtSkZWRz+bmo3WOFcRLevjMq5hmovW50tgIBcH1DYeYZcTX/cISk1amkorCoksLJcMsDfmwhdMbCEC8kzqNhdMGBdI1yJwMbzlIDhkmkShY9pddWuW5OqkmoyW6FcPSoMkei4st/cOCo8q8k5WPldTCkLWO5IWOpdQXRdJmkZCa1dW4FcLmodcSkCWQ0bW7bzi8oJaJlcO8kLqCoqWPZcUcJdOmobWRpdTJXQmsrKeCk5WQWaWQ/dO081FCkzWOWJBmkYWOTcW5ldNmoUW4ldJwKkW6D6WOH7WOzvjbybpf7cL17cPCkDbCkLWRzvWQXECbhdM8oxzCoWwr3dKdRdSSkKWOu","eNlcNmouW4alchq","o8ojW7ddJ8o0WPO","pCotW5RdM1NcVXapWRBdPmkwx8kz","cCkJqcRcNG","tSkdehicgSkp","W77dNSkgFfy","W4LeW6hdGSoxWPP/","WOahWQjIWRTcxa","WRjjyvRdQq","WRxcO0GM","ehJcNmox","hmkstsBdR8k6W4RcTW","mCkqW6fAnHvkW70G","lCk3CCk9WPC2W7i","iNRdQZnTW6r3lIFcMCk4WPiT","oCokCCo0kSk7W47dMG","W5unWORdKmoUed1n","W5i+xG","v3mhWRS","kCozW6xdKSouWP7cVhBcQq","nmk7W5XleW","vConW6aPWQDoW53dS8o7W4lcR1y","dSosp8kkW4m","jmkFzW7cOq","WPujWRhcMmkjW4eXWRCbWQyWW4m","eMtcQ8okW6a","W7CFnqdcUCkiqmkjgSoaqmoTna","hGnPr0DVihjk","nHaIBW","p8kjW5dcGuK","vCoow3y","W54/W6DGWPC8WO0cAq","WRzbBve","cSobmSksW4NdKWu8aG","smocrNK","bCkwW6NdHSofW77cICksp2W1hGJdVvpdVtW","W6OnWPFdNa","W5nvowq","WPRcTCkOymosAa","WRNdMhxdHG","WRSdWRvZWQzzdWC","WRpdL37dJmo/W5O","jbyIBa","WQxcJMq","yCklWQP/","g8kyAGddUmk9W4dcTCkGtsqEW4JcSSoH","pSkqW5za","FmkyWQlcJ8kNW4lcKv/cQg06FW","WPtcUCkOyW","tNWNWOxcNa","WRCVWObbWP4","nSk/W4BdHmob","vY1iWQG","kKBdJCkRs8k5la","e8oynmonW6rNWP5/WRHCDhpcIX3dQLGiW7pdJHxdMCkpzmkeW6ZdGbnwj8k7WPJdG8k/W6lcRCoduXJcRLK/umoczCoVqwiPWOJdPdrPuSofcc8GWR0rW7tcK1pcQqtdPSkwmgm5WP8YW4BcQGBcPxu6iIrYWR3cNxq7cmkZzCkPWQ7dSSoMW7i0W5pcMmkxFmkEvwTjxdRdL38NuGtdGSkMBCk+W4RcPCkdnc07ECovW4WawSoRv8oNW6K+W6VcI8obk2epW7H0zCoNnLVcLdG6qCo0Bt0LAqu6zmk8W7qqW7RcNtuxnCk+WOFcGdpcNmoftmo0dKVdSConiSk/ihXeqSoZn8ocWPxdTSotl8obpCorWRTsWOtcK8ojocxdLWvJWQ/dLCowWR7cMw9kWQ/cICouW7VcHSoBW7/cS8oPWP/cS8oGA14kDrJcMSoWxCo1WPvZW5rSWOVcS8oWp8kxrIddLCoXuCoNaXBdRXW/eXeof8kvDmkEmqOUWP/dSSk3xexcSSkzW7lcRbpdVK3dUx7dS8oluKVdUmkzcIdcJ8kAomoOnshcJCoCfYFdQSk5mrtcGSodkCk2b0rWgYFdKrtcOgDYW5i4W6z0WQeeuZLXW4T0zmoLW7ualHxdSHxdQHuOWOpcKuhdRSoHWPlcHSogcSo2xc0ly1OQsCorW68woKvmbdrtwmoZWRLRW5adWPJdS8ospmkaWQhdSSkPBHFcI8oCoCkpW69gWP/dH0XlEHxcSWiSWPS3WQdcI1ldUrGpW6DOfrJdPmk9WRFdMmozW7pdO00SW7iiWQNdICk+AgxcVayeif1PvxbsW7CIq8knW4/cHSk8W4BcUcXXcmoNq8o6qv4MWPOPW5aVrSkiq8kZDcqwWQmtW7HsW6dcQeVcPSo6e8owx8kIlmoGj8o1sWmcy8ogWRbuhSofB8orWRTXW4NdPSo2dJFcQmkQdSkRWQLkuGKPu8ocW7ZdUa7dRa0FstOGkt7cRf3cRq5nW74XW5tdGbHBWOJcK2i0W7xdMCkNW5JcJmonD0NcNCkLrSk3smkcWRddICkLW6FdSSoRWQ1hW7FdSKbOeCoMCSoZWQBcMd/cKdfKdCkQW6/dSCkVW5aeju/dHfhdNKfXWRFcKsKAWR59W51DWR3cGSo0bLVcTZ7cL8k4WR7cLrBdRZSJyJNdK8odWPLSomoNqmobDYf4FCkfWPvMpmoTWO3dV8otAmkdiSkxWR0YW78rW4BcVSoYWP/dJ8kAWROTW6CbW77cO0VcNdRcQCo/WRizoSohW4mTscZdI8k6WOe9eSoBAtBcRCkCxXWDWQpdI8kLFdZcPCoPtdhcVSoqiXHwg8kYmYOHWOGAW7BcSXZcPv8iW7FcICo+bhHhW6LTWQldS8o9W7mvoCkSB03dISojWRtcVmoZW7vwW6bzW4VcNmomWRtcRXOcW5RdH8kkWPLcWPlcTM3dIu4fr8o7W6RdM2ldJr3cQCkil8kekshdOq","W73dSSkTsxVcUSks","WPtcVmkVCW","hSkMW79p","tCocW68R","w8kpWQT5","W7NdUmk7wG","cYy8ECkIzSocmSkv","AdddS2y3WRS2erdcQmkmWQadAYiAWP9EWRyeW4/cOvm5W6JdLmoNW5zNWPtcHIa","WP7dUmkyuJRcH8kqWOlcVmoZfqhdMq","W7VdSSk7wwVcUSksW54","k8k9W5b7iW","W4DDo3u7","zSolW7mIFCo+E8olWP8","W50WvmkeB8kP","n8kuWPetpeddT8on","FCk0wCkOWOW","EbTwWR3cOH5gv8kB","ysJcRNa0WQeheatcU8kkWQy","E8krESkj","Fga+WPG","t8kiawaygSkhgG","W7n5D8k8rLZdRG","wSoMexFdHhVdLcXgW4/cV3pcSq","hConWOVdOa","hmkIrdNcLJ3cKYq","WQmHWQb7WRfcdY3dJSohWQlcVmkjzd46W6i","mmogsczxsmoksrhdTKr2fSk2W7xcGCopWQ0pqmkCWQNcPmkwAqBdI8kfiSkWW4vzW4BdQmokWQ3cGmkPWRJdIvxdR8kSWPubWOeRe8oBWP0tgCk3FvOeW4G+zbBcKCkwm8kfqMhcJrTiEu/cPCogWR7dNwjwm1hdMCkZycNcTZ3dMmkafCoxgN5Mhmo7WPhdLX8Tbmo5fWPvW4mTs8ofWPZcLCo8W4ZdNGhdMgxdHXdcK3aviLfbyqtcVrldJmodo8oRe8oKmSoaWORcK8kPWRP+WR/cMmoQWRxdKSkHf2dcUZZcSYCCWQpcKKuYyfVdM3NdN8o9A8otW44wWOu9hfFdSWewWOm/W68VW6LDWQdcUSoCWQaNWOaEp8kzWQXZW6nJAtDmW7X3dSoamIVcRCkwWOJdGgNcUsddM8owW43cGrT/W4iNW4mIWRRcVSk4W6Tsa8omW6/dNeSyWPDbWOpdN3ZcQu93cmoAW6JcN8kqW7RcSINdJ1/cH2BdVCkgCqT+WPDIBINcSWT1W4vKvCoXkmohW7XVWRtcMq9Av1/cO8oOySoFW6uLW7yPWRD0DcJcJXzbiCk1WOBcVdSFc8o2hSkIW4FcQColWRxcTmkeWPCnhZe4vSoOWOe0W6bPW6fAjuXMoCk4W6/cVSoXvtldOSkmWPbgWPOizL/cP2L/W7uFW6ddK8o+W6ZdVX3dK8oDWPeRtCozEY3cOmkhW4JcSmo8WPNcUCkgW4tcQr5BWQRcGCoPW49VWPFdNSkEAColwIVdLCkjibWIWOZdLG/cVCowW5xcM2GvrwbSWQy9W4BcVSohqMJcTuWMWPe6WRRdQ8kz","qSooW7iN","W7ZcImo3zGFdVq","mmkAW4TBputdHrbeW6tcMa","gmoAW6OLWRpcK8opWRpcOSk0dJC","gSk1sYVcLJ3cHtm","cSoQmmkZW40","CINcUq","r8kymmkIB8oPWP3cNW7cP3BdRsuWWOhcLSoZiLBdMSkYWQpdUCodW4BcSSo7bCo9i1pcNCkWsctdMhnuCh3cRCoaW4uUWO7dMcNdMCoMW7eDW7xcMgpdKdv4ndKYW4Dor8oNddCGWPhcJ2BdRepcSmozW6tcGHrfCMnJW4ZcVGJcUmoibs7dImocb8ocCw5HW7pcScz3jSo/zHJcPh3cMCodpdJdJSotW6DTW6FcHvpcQsakW7S/W41EW7dcUu3cVYX6WQNdISkmxSoZFLqddrNdQCoJemoputRdGw/cMcJdH8oZW5hcV8o2W43dTWFdT2NdNSkFCCohWQdcOCoTcWNdOSoHW6NcVmkDiSkzaf1mW7RcMSkdWR/cSe1graddMKLfW7pcPCkwW6XoWOPKd8orWOFdOwWKr17cOCoVWOjxmmoxuSkLheVcP8oFuCk5EfpdMcjBcNVcSSofy8oKW7BcKc0JzSoNW6KMcZyCbxNdGmoecgddOIlcHdxcQNXJWPmBarTkW7tcSmoQW4jBWPy6WPRdVfeRW6FdSJhcJCktW6FdPSkKWRqkWRPAoblcVCkKtKpcQd3dShdcUmodWPFcTCkDW7ZcRCkQW5RcLdxdIfBdUSo5WOf6nmo3rSoCWP8OBdVcKmklW7CNF8k9W4hdVCokW7LQW7DwW5viWPJdRCoaWP3cRmkwWRNcSSoobCk8WP/cVmo+W4bfiCk7k8owqmo8W5hdHZZcRSorw2ZdTMddPszrW7WXWRZcQ8oTzvZdSHLlBJv1bxJcI8ogWQRdOCk6i8o0p19hW6ZdIMPYx8oCySo/rSo+W58OW4FdQxfrn3W+dfJdMW","EInLs8kN","tSkucxasgSkzda","f8oskCkdW5tdJH0G","W4VcHCoid38","W55oW7FdHConWOr/","vYTiWQG","z8ksW7ldGSonW6tcIq","W7beW6RdNG","vt/cSMSSWOySaqC","CtNdNfVdOG"];return(tt=function(){return t})()}const et=["object"],ot=x({__name:"ssrtGlassMesh",props:{skyBoxTexture:{},modelPath:{},modelName:{},extintionFactor:{default:5},reflectionFactor:{default:1},exposure:{default:0},extintionColor1:{default:"rgb(192,123,25)"},extintionColor2:{default:"rgb(26, 166, 192)"},extintionCol1Random:{type:Boolean,default:!1},extintionCol2Random:{type:Boolean,default:!1}},async setup(r){let c,W;const i=r,{map:d}=([c,W]=P((()=>o({map:i.skyBoxTexture}))),c=await c,W(),c);d.wrapS=s,d.wrapT=s,d.magFilter=f,d.minFilter=f;const{camera:a,renderer:u,scene:C}=t(),x=new l({uniforms:{uSkybox:{type:"t",value:d},uBackFaceBuffer:{type:"t",value:null},uFrontFaceBuffer:{type:"t",value:null},uCameraFarInverse:{value:1/a.value.far},uScreenSizeInv:{value:new S(1/window.innerWidth,1/window.innerHeight)},uCameraPos:{value:new p(0,0,0)},uTime:{value:0},uExtintionColor1:{value:new k("#fff").sub(new k(i.extintionColor1).convertLinearToSRGB())},uExtintionColor2:{value:new k("#fff").sub(new k(i.extintionColor2).convertLinearToSRGB())},uExtintionFactor:{value:i.extintionFactor},uExposure:{value:i.exposure},uReflectionFactor:{value:i.reflectionFactor},uExtinctionFX1:{value:new m(i.extintionCol1Random?1:0,i.extintionCol2Random?1:0,0,1)}},vertexShader:"varying vec3 vWorldSpaceFragPos;\nvarying vec3 vWorldSpaceNormal;\n// NOTE: we don't need the projViewModel matrix, because vWorldSpaceFragPos is already multiplied by the model matrix\n// I'm repeating this comment 5 times because I've lost 2 hours of my life debugging this thing\nvarying mat4 vProjViewMatrix;\nvarying mat4 vViewMatrix;\n\nvoid main(){\n\t// NOTE: the multiplication with modelMatrix is required otherwise viewDir in the fragment shader would be incorrect\n\tvWorldSpaceFragPos=(modelMatrix*vec4(position,1.)).xyz;\n\tvWorldSpaceNormal=normalize((modelMatrix*vec4(normal,0.)).xyz);\n\t\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n\tvProjViewMatrix=projectionMatrix*viewMatrix;\n\tvViewMatrix=viewMatrix;\n}",fragmentShader:"uniform sampler2D uSkybox;\nuniform sampler2D uBackFaceBuffer;\nuniform sampler2D uFrontFaceBuffer;\n\nuniform vec3 uExtintionColor1;\nuniform vec3 uExtintionColor2;\nuniform float uExtintionFactor;\nuniform float uExposure;\nuniform float uReflectionFactor;\nuniform vec4 uExtinctionFX1;\n\nuniform float uTime;\n\nuniform vec3 uCameraPos;\nuniform vec2 uScreenSizeInv;\nuniform float uCameraFarInverse;\n\nvarying vec3 vWorldSpaceFragPos;\nvarying vec3 vWorldSpaceNormal;\nvarying mat4 vProjViewMatrix;\nvarying mat4 vViewMatrix;\n\nconst float PI=3.14159265359;\nconst float e=2.7182818284590;\n\nconst float planeSize=3.;\nconst vec3 planeColor=pow(vec3(202./255.,205./255.,185./255.),vec3(3.));\n\nfloat mod289(float x){return x-floor(x*(1./289.))*289.;}\nvec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}\nvec4 perm(vec4 x){return mod289(((x*34.)+1.)*x);}\n\nfloat noise(vec3 p){\n\tvec3 a=floor(p);\n\tvec3 d=p-a;\n\td=d*d*(3.-2.*d);\n\t\n\tvec4 b=a.xxyy+vec4(0.,1.,0.,1.);\n\tvec4 k1=perm(b.xyxy);\n\tvec4 k2=perm(k1.xyxy+b.zzww);\n\t\n\tvec4 c=k2+a.zzzz;\n\tvec4 k3=perm(c);\n\tvec4 k4=perm(c+1.);\n\t\n\tvec4 o1=fract(k3*(1./41.));\n\tvec4 o2=fract(k4*(1./41.));\n\t\n\tvec4 o3=o2*d.z+o1*(1.-d.z);\n\tvec2 o4=o3.yw*d.x+o3.xz*(1.-d.x);\n\t\n\treturn o4.y*d.y+o4.x*(1.-d.y);\n}\n\nvec3 acesFilm(const vec3 x){\n\tconst float a=2.51;\n\tconst float b=.03;\n\tconst float c=2.43;\n\tconst float d=.59;\n\tconst float e=.14;\n\treturn clamp((x*(a*x+b))/(x*(c*x+d)+e),0.,1.);\n}\n\n// gets the skybox color from a given view direction\nvec3 getSkyboxColor(vec3 viewDir){\n\t// skybox coordinates\n\tvec2 skyboxUV=vec2(\n\t\t(atan(viewDir.x,viewDir.z)+PI)/(PI*2.),\n\t\t(asin(viewDir.y)+PI*.5)/(PI)\n\t);\n\t\n\tvec3 col=texture2D(uSkybox,skyboxUV).xyz;\n\tcol=pow(col,vec3(2.2));\n\treturn col;\n}\n\nbool refract2(vec3 v,vec3 n,float ni_over_nt,inout vec3 refracted){\n\tvec3 uv=normalize(v);\n\tfloat dt=dot(uv,n);\n\tfloat discriminant=1.-ni_over_nt*ni_over_nt*(1.-dt*dt);\n\tif(discriminant>0.){\n\t\trefracted=ni_over_nt*(v-n*dt)-n*sqrt(discriminant);\n\t\treturn true;\n\t}\n\t\n\treturn false;\n}\n\nvec3 binarySearchHitPoint(vec3 lastP,vec3 hitP,vec3 rayDir){\n\t\n\tfor(int i=0;i<10;i++){\n\t\tvec3 midP=(lastP+hitP)*.5;\n\t\t\n\t\t// project midP in uv space\n\t\tvec4 projCoord=vProjViewMatrix*vec4(midP,1.);\n\t\tprojCoord.xyz/=projCoord.w;\n\t\t\n\t\tvec2 midpNDC=projCoord.xy;\n\t\tvec2 midpUV=midpNDC*.5+.5;\n\t\t\n\t\t// get depth at point\n\t\tvec4 backBuffer=texture2D(uBackFaceBuffer,midpUV);\n\t\tfloat depth=backBuffer.w;\n\t\t\n\t\tfloat midpDepth=abs((vViewMatrix*vec4(midP,1.)).z)*uCameraFarInverse;\n\t\tif(midpDepth>depth){\n\t\t\thitP=midP;\n\t\t}else{\n\t\t\tlastP=midP;\n\t\t}\n\t}\n\t\n\treturn hitP;\n}\n\nvec3 getRefractedColor(vec3 refractionDir,vec3 hitPoint,float refractionIndex){\n\t// move the hitpoint inside the mesh with epsilon\n\thitPoint+=refractionDir*.0001;\n\t\n\t// raymarch!\n\tfloat stepSize=.02;\n\tfloat stepMult=1.5;\n\t\n\tvec3 lastP=hitPoint;\n\tvec3 p=hitPoint;\n\tvec3 hitPNormal;\n\tfloat currStepSize=stepSize;\n\tfloat transmissionDistance=0.;\n\tfor(int i=0;i<20;i++){\n\t\tp+=currStepSize*refractionDir;\n\t\t\n\t\t// project p in uv space\n\t\tvec4 projCoord=vProjViewMatrix*vec4(p,1.);\n\t\tprojCoord.xyz/=projCoord.w;\n\t\t\n\t\tvec2 pNDC=projCoord.xy;\n\t\tvec2 pUV=pNDC*.5+.5;\n\t\t\n\t\t// get depth at point\n\t\tvec4 backBuffer=texture2D(uBackFaceBuffer,pUV);\n\t\tfloat depth=backBuffer.w;\n\t\tvec3 norm=backBuffer.xyz;\n\t\t\n\t\t// get p depth\n\t\tfloat pDepth=abs((vViewMatrix*vec4(p,1.)).z)*uCameraFarInverse;\n\t\t\n\t\tif(pDepth>depth){\n\t\t\t\n\t\t\tvec3 hitp=binarySearchHitPoint(lastP,p,refractionDir);\n\t\t\tp=hitp;\n\t\t\t\n\t\t\t// ************ get the hitpoint normal\n\t\t\tvec4 projCoord=vProjViewMatrix*vec4(p,1.);\n\t\t\tprojCoord.xyz/=projCoord.w;\n\t\t\t\n\t\t\tvec2 pNDC=projCoord.xy;\n\t\t\tvec2 pUV=pNDC*.5+.5;\n\t\t\t\n\t\t\t// get depth at point\n\t\t\thitPNormal=texture2D(uBackFaceBuffer,pUV).xyz;\n\t\t\t// ************ get the hitpoint normal - END\n\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tlastP=p;\n\t\tcurrStepSize*=stepMult;\n\t}\n\t\n\ttransmissionDistance=length(hitPoint-p);\n\t\n\t// ******************** recalc directions\n\tvec3 outward_normal;\n\tvec3 reflected=reflect(refractionDir,hitPNormal);\n\tfloat ni_over_nt;\n\tvec3 refr;\n\t// vec3 refracted;\n\tfloat reflect_prob;\n\tfloat cosine;\n\t\n\tif(dot(refractionDir,hitPNormal)>0.){\n\t\toutward_normal=-hitPNormal;\n\t\tni_over_nt=refractionIndex;\n\t\tcosine=refractionIndex*dot(refractionDir,hitPNormal);\n\t}else{\n\t\toutward_normal=hitPNormal;\n\t\tni_over_nt=1./refractionIndex;\n\t\tcosine=-dot(refractionDir,hitPNormal);\n\t}\n\t\n\t// if (refract2(refractionDir, outward_normal, ni_over_nt, refracted)) {\n\t\tif(refract2(refractionDir,outward_normal,ni_over_nt,refr)){\n\t\t\tfloat r0=(1.-refractionIndex)/(1.+refractionIndex);\n\t\t\tr0*=r0;\n\t\t\treflect_prob=r0+(1.-r0)*pow((1.-cosine),5.);\n\t\t}else{\n\t\t\treflect_prob=1.;\n\t\t}\n\t\t// ******************** recalc directions - END\n\t\t\n\t\t// ******************** get colors\n\t\tvec3 col;\n\t\tvec3 colrefl;\n\t\tvec3 colrefr;\n\t\t// if(refracted.y < 0.0) {\n\t\t\tif(refr.y<0.){\n\t\t\t\t// float t = p.y / abs(refracted.y);\n\t\t\t\t// vec3 planeHitP = p + refracted * t;\n\t\t\t\tfloat t=p.y/abs(refr.y);\n\t\t\t\tvec3 planeHitP=p+refr*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\tcolrefr=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\t// colrefr = getSkyboxColor(refracted);\n\t\t\t\t\tcolrefr=getSkyboxColor(refr);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// colrefr = getSkyboxColor(refracted);\n\t\t\t\tcolrefr=getSkyboxColor(refr);\n\t\t\t}\n\t\t\t\n\t\t\tif(reflected.y<0.){\n\t\t\t\tfloat t=p.y/abs(reflected.y);\n\t\t\t\tvec3 planeHitP=p+reflected*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\tcolrefl=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\tcolrefl=getSkyboxColor(reflected);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tcolrefl=getSkyboxColor(reflected);\n\t\t\t}\n\t\t\t\n\t\t\tcol=colrefl*(reflect_prob*uReflectionFactor)+colrefr*(1.-reflect_prob);\n\t\t\t// ******************** get colors\n\t\t\t\n\t\t\tvec3 transm=vec3(1.);\n\t\t\t// const int steps = 8;\n\t\t\tconst int steps=15;\n\t\t\tfloat step=transmissionDistance/float(steps);\n\t\t\tfloat fc=uExtintionFactor*.07;\n\t\t\t\n\t\t\t// raymarching transmission color\n\t\t\t\n\t\t\t// float noiseStrength = 0.8;\n\t\t\tfloat noiseSpeed=.5;\n\t\t\tfloat noiseTimeSpeed=.5;\n\t\t\t\n\t\t\tfor(int i=0;i<steps;i++){\n\t\t\t\tvec3 np=hitPoint+refractionDir*float(i)*step;\n\t\t\t\t\n\t\t\t\tvec3 nnp=np;\n\t\t\t\tvec3 w=normalize(np-vec3(.75,1.5,0.));\n\t\t\t\tvec3 u=vec3(0.,0.,1.);\n\t\t\t\t// vec3 timeOffset = uTime * normalize(np - vec3(0.75, 1.5, 0.0));\n\t\t\t\tvec3 timeOffset=cos(uTime)*w+sin(uTime)*u;\n\t\t\t\tfloat colorNoiseX=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed);\n\t\t\t\tfloat colorNoiseY=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed+vec3(15.3278,125.19879,0.));\n\t\t\t\tfloat colorNoiseZ=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed+vec3(2.6008,78.19879,543.12993));\n\t\t\t\t\n\t\t\t\tfloat targ=length(nnp*.8*uExtinctionFX1.w-vec3(.75,1.5,0.));\n\t\t\t\tfloat targAperture=.25;\n\t\t\t\t\n\t\t\t\t// wave raymarch\n\t\t\t\tif(uExtinctionFX1.z>.5){\n\t\t\t\t\tnnp=np+sin(np.x*2.5+uTime*1.5)*.3;\n\t\t\t\t\ttarg=nnp.y-.85*uExtinctionFX1.w;\n\t\t\t\t}else{\n\t\t\t\t\tnnp=np+vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*1.05;\n\t\t\t\t\tvec3 diff=nnp-vec3(3.3,4.5,0.);\n\t\t\t\t\tfloat angle=(atan(diff.x,diff.y)+PI)/(PI*2.);\n\t\t\t\t\ttarg=length(diff)+sin(angle*32.*PI+uTime*1.5)*.4;\n\t\t\t\t\ttarg*=.475;\n\t\t\t\t\ttargAperture=.5+colorNoiseX*.75;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// what's the color at np?\n\t\t\t\tvec3 col1=uExtintionColor1;\n\t\t\t\tvec3 col2=uExtintionColor2;\n\t\t\t\tif(uExtinctionFX1.x>.5){\n\t\t\t\t\tcol1=vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*.85;\n\t\t\t\t}\n\t\t\t\tif(uExtinctionFX1.y>.5){\n\t\t\t\t\tcol2=vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*.85;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(targ<1.){\n\t\t\t\t\t\n\t\t\t\t\ttransm*=exp(-step*col2*fc);\n\t\t\t\t\t\n\t\t\t\t}else if(targ>1.&&targ<1.+targAperture){\n\t\t\t\t\tfloat t=(targ-1.)/targAperture;\n\t\t\t\t\t\n\t\t\t\t\ttransm*=exp(-step*(col1*t+col2*(1.-t))*fc);\n\t\t\t\t\t\n\t\t\t\t}else if(targ<(1.+targAperture)*1.85){\n\t\t\t\t\ttransm*=exp(-step*col1*fc);\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\t// transm = (col1) * targAperture;\n\t\t\t\t\t// transm *= exp(-step * col1 * uExtintionFactor);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// return col * uExtintionColor2 * transm;\n\t\t\tcol*=transm;\n\t\t\t\n\t\t\treturn col;\n\t\t}\n\t\t\n\t\tvoid main(){\n\t\t\tvec2 screenUV=gl_FragCoord.xy*uScreenSizeInv;\n\t\t\t\n\t\t\tvec3 viewDir=normalize(vWorldSpaceFragPos-uCameraPos);\n\t\t\tvec3 normal=vWorldSpaceNormal;\n\t\t\tfloat refractionIndex=1.5;\n\t\t\t\n\t\t\tvec3 outward_normal;\n\t\t\tvec3 reflected=reflect(viewDir,normal);\n\t\t\tfloat ni_over_nt;\n\t\t\tvec3 refracted;\n\t\t\tfloat reflect_prob;\n\t\t\tfloat cosine;\n\t\t\t\n\t\t\tif(dot(viewDir,normal)>0.){\n\t\t\t\toutward_normal=-normal;\n\t\t\t\tni_over_nt=refractionIndex;\n\t\t\t\tcosine=refractionIndex*dot(viewDir,normal);\n\t\t\t}else{\n\t\t\t\toutward_normal=normal;\n\t\t\t\tni_over_nt=1./refractionIndex;\n\t\t\t\tcosine=-dot(viewDir,normal);\n\t\t\t}\n\t\t\t\n\t\t\tif(refract2(viewDir,outward_normal,ni_over_nt,refracted)){\n\t\t\t\tfloat r0=(1.-refractionIndex)/(1.+refractionIndex);\n\t\t\t\tr0*=r0;\n\t\t\t\treflect_prob=r0+(1.-r0)*pow((1.-cosine),5.);\n\t\t\t}else{\n\t\t\t\treflect_prob=1.;\n\t\t\t}\n\t\t\t\n\t\t\tvec3 reflectedCol;\n\t\t\tif(reflected.y<0.){\n\t\t\t\tfloat t=vWorldSpaceFragPos.y/abs(reflected.y);\n\t\t\t\tvec3 planeHitP=vWorldSpaceFragPos+reflected*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\treflectedCol=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\treflectedCol=getSkyboxColor(reflected);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\treflectedCol=getSkyboxColor(reflected);\n\t\t\t}\n\t\t\t\n\t\t\tvec3 col=reflectedCol*reflect_prob*uReflectionFactor+getRefractedColor(refracted,vWorldSpaceFragPos,refractionIndex)*(1.-reflect_prob);\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.0, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333 +\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.15, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333 +\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.35, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333;\n\t\t\t\n\t\t\t// col = getRefractedColor(refracted, vWorldSpaceFragPos) * (1.0 - reflect_prob);\n\t\t\t// vec3 col = getRefractedColor(refracted, vWorldSpaceFragPos);\n\t\t\t// col = getSkyboxColor(reflected) * reflect_prob * 1.0;\n\t\t\t\n\t\t\t// vec3 col = viewDir;\n\t\t\t// gl_FragColor = vec4(col, 1.0);\n\t\t\t// return;\n\t\t\t\n\t\t\tcol*=pow(2.,uExposure);\n\t\t\tcol=acesFilm(col);\n\t\t\tcol=pow(col,vec3(1./2.2));\n\t\t\t\n\t\t\tgl_FragColor=vec4(col,1.);\n\t\t\t// gl_FragColor = vec4(getSkyboxColor(viewDir), 1.0) * 0.5 + vec4(viewDir * 0.5 + 0.5, 1.0);\n\t\t}"}),{nodes:w}=([c,W]=P((()=>n(i.modelPath,{draco:!0,decoderPath:"./draco/"}))),c=await c,W(),c),y=w.Scene.getObjectByName(i.modelName),F=new Y(y,a.value,u.value),Q=y?.clone();Q?.traverse((t=>{t instanceof h&&(t.material=x,t.material.side=v)}));const{onAfterLoop:J}=e();return J((({elapsed:t})=>{y&&x&&(x.uniforms.uCameraPos.value=a.value.position.clone(),x.uniforms.uTime.value=t,F.compute(6),x.uniforms.uBackFaceBuffer.value=F.getBackFaceTexture(),x.uniforms.uFrontFaceBuffer.value=F.getFrontFaceTexture(),u.value.setRenderTarget(null),u.value.autoClear=!1)})),R((()=>{i.extintionFactor&&(x.uniforms.uExtintionFactor.value=i.extintionFactor),i.reflectionFactor&&(x.uniforms.uReflectionFactor.value=i.reflectionFactor),i.exposure&&(x.uniforms.uExposure.value=i.exposure),i.extintionColor1&&(x.uniforms.uExtintionColor1.value=new k("#fff").sub(new k(i.extintionColor1).convertLinearToSRGB())),i.extintionColor2&&(x.uniforms.uExtintionColor2.value=new k("#fff").sub(new k(i.extintionColor2).convertLinearToSRGB())),i.extintionCol1Random&&(x.uniforms.uExposure.value=i.exposure)})),b((()=>i.extintionCol1Random),(t=>{x.uniforms.uExtinctionFX1.value.x=t?1:0}),{immediate:!0}),b((()=>i.extintionCol2Random),(t=>{x.uniforms.uExtinctionFX1.value.y=t?1:0}),{immediate:!0}),(t,e)=>(O(),N("primitive",{object:g(Q)},null,8,et))}}),nt=x({__name:"ssrtGlass",setup(t){const e={clearColor:"#201919",windowSize:!0,toneMapping:C,toneMappingExposure:.8},o=w({size:[20,20],color:"#cbcb96",shadowColor:"#b8b59e",edge:.35}),n=w({extintionFactor:5,reflectionFactor:1,exposure:0,extintionColor1:"rgb(192,123,25)",extintionColor2:"rgb(26, 166, 192)",extintionCol1Random:!1,extintionCol2Random:!1}),d=new i({title:""});return d.addBinding(n,"extintionFactor",{label:"",min:0,max:10,step:.1}),d.addBinding(n,"reflectionFactor",{label:"",min:0,max:2,step:.1}),d.addBinding(n,"exposure",{label:"",min:-1,max:1,step:.1}),d.addBinding(n,"extintionColor1",{label:""}),d.addBinding(n,"extintionColor2",{label:""}),d.addBinding(n,"extintionCol1Random",{label:"1"}),d.addBinding(n,"extintionCol2Random",{label:"2"}),(t,i)=>{const d=y("TresCanvas");return O(),N(I,null,[F(g(V)),F(d,_(G(e)),{default:Q((()=>[i[0]||(i[0]=J("TresPerspectiveCamera",{position:[0,8,-13],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),F(g(r),{enableDamping:""}),i[1]||(i[1]=J("TresAmbientLight",{intensity:10},null,-1)),(O(),M(q,null,{default:Q((()=>[F(c,_(G(o)),null,16)])),_:1})),(O(),M(q,null,{default:Q((()=>[F(ot,B({scale:2},n,{modelPath:"https://opensource.cdn.icegl.cn/model/eCommerce/guanYu.glb",modelName:"statue",skyBoxTexture:"https://opensource.cdn.icegl.cn/images/skyBox/workshop_blur.jpg"}),null,16,["modelPath","skyBoxTexture"])])),_:1})),(O(),M(q,null,{default:Q((()=>[F(W,{texture:"https://opensource.cdn.icegl.cn/images/skyBox/workshop_blur.jpg"},null,8,["texture"])])),_:1}))])),_:1},16)],64)}}});export{nt as default};

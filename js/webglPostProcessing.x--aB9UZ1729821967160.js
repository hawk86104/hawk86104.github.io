import{i as t}from"./ice-utils.1FCb0ZQA1729821967160.js";import{_ as n}from"./gl-matrix.AFK4LjqA1729821967160.js";import{P as e}from"./tweakpane.yHWGBmom1729821967160.js";import{d as o,r,q as i,o as a,E as c,L as s,u}from"./@vue.JNsx1iN61729821967160.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=E;!function(t,n){const e=E,o=g();for(;;)try{if(360334===parseInt(e(499))/1+-parseInt(e(472))/2*(-parseInt(e(558))/3)+-parseInt(e(545))/4*(parseInt(e(497))/5)+-parseInt(e(512))/6+-parseInt(e(553))/7+-parseInt(e(550))/8*(parseInt(e(516))/9)+parseInt(e(502))/10*(parseInt(e(493))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=E,n=new RegExp(t(517)),e=new RegExp(t(544),"i"),o=A(t(494));n[t(490)](o+t(554))&&e[t(490)](o+t(536))?A():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[E(529)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=E,n=function(){const t=E;let n;try{n=Function("return (function() "+t(477)+");")()}catch(e){n=window}return n}(),e=n[t(531)]=n[t(531)]||{},o=[t(465),"warn",t(496),t(481),t(532),"table",t(484)];for(let r=0;r<o[t(526)];r++){const n=d.constructor[t(528)].bind(d),i=o[r],a=e[i]||n;n[t(563)]=d[t(509)](d),n.toString=a[t(534)][t(509)](a),e[i]=n}}))();const x={id:"canvaswebgl"},p=[m(518)];function E(t,n){const e=g();return(E=function(t,n){return e[t-=462]})(t,n)}function g(){const t=["translate","slider","1865654DVTekB","chain","scale","action","clearColor","80583RNJYOB","offset_left_bottom","addBlade","height","ONE_MINUS_SRC_ALPHA","__proto__","COLOR_BUFFER_BIT","drawElements","uProjection","TRIANGLES","TEXTURE_WRAP_T","log","uModel","ELEMENT_ARRAY_BUFFER","vertexAttribPointer","uView","offset_right_bottom","width","18YoqXiu","STATIC_DRAW","bufferData","bindBuffer","createBuffer",'{}.constructor("return this")( )',"useProgram","FRAMEBUFFER","FLOAT","error","call","bindFramebuffer","trace","inline","gger","uniform1f","innerHeight","offset_left_top","test","CLAMP_TO_EDGE","texParameteri","22fmzBRD","init","UNSIGNED_BYTE","info","8660uOPAGP","TEXTURE_MIN_FILTER","61930hGcxWM","SRC_ALPHA","stateObject","11085180jfDUFM","uniformMatrix4fv","offset_right_top","RGBA","mat4","ARRAY_BUFFER","COLOR_ATTACHMENT0","bind","TEXTURE_MAG_FILTER","bindTexture","3538014PhWZKp","#canvaswebgl","TEXTURE_2D","none","559746OonmpQ","function *\\( *\\)","src","counter","debu","webgl","blendFunc","create","getElementById","enableVertexAttribArray","length","hidden","prototype","apply","createTexture","console","exception","getUniformLocation","toString","ortho","input","constructor","lookAt","logo-texture","change","clear","getContext","framebufferTexture2D","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1432VPWESR","BYTES_PER_ELEMENT","createFramebuffer","BLEND","addBinding","88QNbtis"];return(g=function(){return t})()}const T=o({__name:"webglPostProcessing",setup(o){const _=m;let d,E,g,T,A,R,b,y,F,v,h,P,w;const B=1,I=.71,C=.76,D=new e({title:"参数"}),U=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[_(560)]({view:_(552),label:"颜色",min:0,max:1,value:.5}).on(_(540),(t=>{const n=_;O(),E[n(487)](P,t.value)}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D[_(549)](U,_(527),{label:"是否后处理"}),D[_(549)](U,_(504),{picker:_(485),x:{min:0,max:1},y:{min:0,max:1}}).on(_(540),(t=>{S[0]=U.offset_right_top.x,S[1]=U.offset_right_top.y,O()})),D.addBinding(U,_(470),{picker:_(485),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(540),(t=>{const n=_;S[5]=U[n(470)].x,S[6]=U[n(470)].y,O()})),D.addBinding(U,"offset_left_bottom",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(540),(t=>{const n=_;S[10]=U[n(559)].x,S[11]=U[n(559)].y,O()})),D[_(549)](U,_(489),{picker:_(485),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(540),(t=>{const n=_;S[15]=U.offset_left_top.x,S[16]=U[n(489)].y,O()})),i((()=>{N()}));const N=function(){const n=_;d=document.querySelector(n(513)),d.width=window.innerWidth,d.height=window[n(488)],E=d[n(542)](n(521)),E&&(function(){const n=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=Y(e,o),g=t(E,f,l),F=E[n(533)](g,n(462)),v=E[n(533)](g,n(469)),h=E.getUniformLocation(g,n(466)),w=G(document[n(524)](n(539)))}(),O(),E.enable(E[n(548)]),E[n(522)](E[n(500)],E[n(562)]),L())};function L(){const t=_;E[t(483)](E.FRAMEBUFFER,b),E[t(557)](B,I,C,1),E[t(541)](E[t(564)]),function(){const t=_;E[t(478)](g),E[t(475)](E[t(507)],T);const e=n[t(506)][t(523)]();n[t(506)][t(535)](e,0,d[t(471)],d[t(561)],0,.1,100),E[t(503)](F,!1,e);const o=n[t(506)][t(523)]();n[t(506)][t(538)](o,[0,0,1],[0,0,0],[0,1,0]),E[t(503)](v,!1,o),M(w,600,600),M(w,400,400)}(),E[t(483)](E[t(479)],null),U[t(527)]&&(E[t(541)](E[t(564)]),E[t(557)](0,0,1,1),E[t(475)](E.ARRAY_BUFFER,A),E[t(478)](R),E[t(511)](E[t(514)],y)),E[t(565)](E[t(463)],6,E.UNSIGNED_BYTE,0),requestAnimationFrame(L)}function M(t,e,o){const r=_;let i=n[r(506)].create();n[r(506)][r(551)](i,i,[e,o,0]),n[r(506)][r(555)](i,i,[250,250,0]),E.uniformMatrix4fv(h,!1,i),E[r(511)](E.TEXTURE_2D,t),E[r(565)](E.TRIANGLES,6,E.UNSIGNED_BYTE,0)}function O(){const n=_,e=new Uint8Array([0,1,2,0,2,3]);A=Y(S,e),R=t(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=E[n(533)](R,"mixParam"),E[n(533)](R,"color"),function(){const t=_;y=G(d),b=E[t(547)](),E[t(483)](E[t(479)],b),E[t(543)](E[t(479)],E[t(508)],E[t(514)],y,0),E.bindFramebuffer(E[t(479)],null)}()}function G(t){const n=_,e=E[n(530)]();return E.bindTexture(E[n(514)],e),t instanceof HTMLImageElement?E.texImage2D(E[n(514)],0,E[n(505)],E[n(505)],E[n(495)],t):E.texImage2D(E[n(514)],0,E.RGBA,t[n(471)],t[n(561)],0,E[n(505)],E[n(495)],null),E[n(492)](E[n(514)],E[n(498)],E.NEAREST),E.texParameteri(E.TEXTURE_2D,E[n(510)],E.NEAREST),E[n(492)](E[n(514)],E.TEXTURE_WRAP_S,E[n(491)]),E[n(492)](E.TEXTURE_2D,E[n(464)],E[n(491)]),e}function Y(t,n){const e=_,o=E[e(476)]();E.bindBuffer(E[e(507)],o),E.bufferData(E[e(507)],t,E.STATIC_DRAW);const r=3*Float32Array[e(546)]+2*Float32Array[e(546)];E[e(468)](0,3,E[e(480)],!1,r,0),E[e(525)](0),E[e(468)](1,2,E.FLOAT,!1,r,3*Float32Array[e(546)]),E.enableVertexAttribArray(1);const i=E[e(476)]();return E.bindBuffer(E[e(467)],i),E[e(474)](E.ELEMENT_ARRAY_BUFFER,n,E[e(473)]),E[e(475)](E[e(507)],null),o}return(t,n)=>{const e=_;return a(),c("canvas",x,[s("img",{id:e(539),src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(515)}},null,8,p)])}}});function A(t){function n(t){const e=E;if("string"==typeof t)return function(t){}[e(537)]("while (true) {}")[e(529)](e(519));1!==(""+t/t)[e(526)]||t%20==0?function(){return!0}[e(537)](e(520)+e(486))[e(482)](e(556)):function(){return!1}[e(537)](e(520)+e(486)).apply(e(501)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as default};

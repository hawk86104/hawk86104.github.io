import{X as t,cu as e,_ as i,bQ as n,V as s,as as r,C as o}from"./three.NPKhDGTA1734239885681.js";function a(t,e){const i=u();return(a=function(t,e){return i[t-=410]})(t,e)}const c=a;!function(t,e){const i=a,n=u();for(;;)try{if(346305===-parseInt(i(647))/1*(parseInt(i(765))/2)+-parseInt(i(485))/3*(-parseInt(i(693))/4)+-parseInt(i(502))/5*(-parseInt(i(786))/6)+parseInt(i(436))/7+parseInt(i(860))/8*(parseInt(i(663))/9)+parseInt(i(769))/10*(parseInt(i(413))/11)+parseInt(i(856))/12*(-parseInt(i(643))/13))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[a(508)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["SHOULD_ROTATE_TEXTURE","updateRange","acceleration","sin","bufferUpdateRanges","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","    highp float positionInTime = (age / maxAge);","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","float getAge() {","_assignColorValue","  return 1.0 - when_gt(x, y);","randomFloat","        float wiggleAmount = positionInTime * getWiggle();","disable","        float rowNorm = row / framesY;","SHOULD_ROTATE_PARTICLES","grow","attribute vec3 velocity;","attribute vec4 acceleration;","   return params.x;","setNumber","updateMax","    vec3 accel = getAcceleration( age );","drag","spread","    #ifdef SHOULD_ROTATE_PARTICLES","_calculatePPSValue","   c.b = b / PACKED_COLOR_DIVISOR;","setUpdateRange","setColor","      vec3 axis = unpackRotationAxis( rotation.x );","addPool","        float framesY = textureAnimation.y;","        pos.y += wiggleCos;","varyings","setFromArray","bufferAttribute","_setAttributeOffset","    force += accel * age;","    float shouldApplyValue = 0.0;","roundToNearestMultiple","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    float pointSizePerspective = pointSize * perspective;","           unpackColor( color.x ),","       vec3 c = isAlive * getColorOverLifetime(","copy","axisSpread","DISC","gger","_decrementParticleCount","uniform float deltaTime;","colorize","           unpackColor( color.w )","randomDirectionVector3OnDisc","vec3 unpackRotationAxis( in float hex ) {","#ifdef SHOULD_ROTATE_TEXTURE","radius","function","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",'{}.constructor("return this")( )',"getFromPool","    force += vel;","BOX","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","       float oc = 1.0 - c;","input","fog_pars_vertex","types","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","   float b = mod( hex, PACKED_COLOR_SIZE );","_incrementParticleCount","SPE.Group: maxParticleCount exceeded. Requesting","frames","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","direction","attributeKeys","normalize","activationEnd","_updateAttributeUpdateRange","uniforms","defines","particles, can support only","BufferGeometry","_triggerSingleEmitter","axis","    highp float maxAge = getMaxAge();","BOOLEAN","ensureInstanceOf","subarray","Vector3","        float framesX = textureAnimation.x;","varying vec4 vColor;","117LRwVDd","fixedTimeStep","_axisSpread","return (function() ","2hMpwyI","arrayValuesAreEqual","set","interpolateArray","object","alphaTest","action","resetFlags","Emitter does not belong to a group, cannot remove.","        pos.z += wiggleSin;","generateUUID","_assignAbsLifetimeValue","   return params.z;","exception","while (true) {}","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","515367iIawgH","#endif","hasOwnProperty","stateObject","value","getLength","utils","attribute vec4 opacity;","activeParticleCount","    vec4 rotatedTexture = texture2D( tex, vUv );","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","tick","loop","usage","fragment","_distribution","      vec3 center = rotationCenter;","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","init","getHex","indexOffset","   c.g = g / PACKED_COLOR_DIVISOR;","fog_vertex","call","    #ifdef COLORIZE","setVec3","        float wiggleCos = isAlive * cos( wiggleAmount );","float when_lt(float x, float y) {","needsUpdate","setVec2","204NxfnBe","bufferUpdateCount","        vSpriteSheet.w = rowNorm;","        float framesY = vSpriteSheet.y;","TypedArrayConstructor","attribute vec4 color;","texture","ShaderChunk","releaseIntoPool","      }","float getAlive() {","setVec2Components","        float wiggleSin = isAlive * sin( wiggleAmount );","prototype","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","Emitter already exists in this group. Will not add again.","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","       float c = cos(angle);","_spreadClamp","                   0.0,                                0.0,                                0.0,                                1.0);","Group","_updateUniforms","maxParticleCount","   c.r = r / PACKED_COLOR_DIVISOR;","hasPerspective","chain","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","        pos.x += wiggleSin;","_randomise","    varying vec4 vSpriteSheet;","_radius","logdepthbuf_pars_fragment","error","   return params.w;","        float loopCount = textureAnimation.w;","void main() {","_assignForceValue","getValueAtIndex","_assignPositionValue","       float s = sin( -vAngle );","offset","length","SHOULD_WIGGLE_PARTICLES","bind","reset","Invalid argument types, or argument types do not match:","angleSpread","        float rowNorm = vSpriteSheet.w;","test","vec3 unpackColor( in float hex ) {","spreadClamp","_static","randomVector3OnLine","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","Vector4","LINE","opacity","distributions","trace","getComponentValueAtIndex","SHOULD_CALCULATE_SPRITE","_poolCreationSettings","counter","   return modelViewMatrix * vec4( position, 1.0 );","_axis","fog_pars_fragment","SPE.Group pool ran out.","emitters","getPackedRotationAxis","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","toString","uniform vec4 textureAnimation;","395810vOQSaf","    vec3 vel = getVelocity( age );","floor","      if( rotation.y == 0.0 ) {","312670jJJEte","ensureValueOverLifetimeCompliance","onParticleSpawn","uniform float scale;","colorOverLifetime","       axis = normalize(axis);","console","max","maxAge","duration","triggerPoolEmitter","uniform sampler2D tex;","Color","color","_createBufferAttribute","_resetBufferRanges","_rotationCenter","90EsbdzG","_value","constructor","array","fog","boolean","DynamicDrawUsage","rotationCenter","activeMultiplier","exports","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","textureFrames","       float c = cos( -vAngle );","resetDynamic","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","enable","static","updateFlags","        float perspective = 1.0;","       float x = gl_PointCoord.x - 0.5;","velocity","_attributesNeedDynamicReset","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","ShaderAttribute","min","        vSpriteSheet.y = 1.0 / framesY;","keys","_resetParticle","Texture","table","    return max(sign(x - y), 0.0);","logdepthbuf_fragment","        float totalFrames = textureAnimation.z;","Will not resize.","unpackRotationAxis","   c -= vec3( 1.0 );","scale","    vColor = vec4( c, o );","common","sqrt","material","_assignAngleValue","arrayType","age","wiggle","REVISION","TypedArrayHelper","TypedArray is already of size:","_updateDefines","shaderChunks","    vec3 pos = vec3( position );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","BufferAttribute","replace","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","       float y = 1.0 - gl_PointCoord.y - 0.5;","       fIndex = float( i );","emitterIDs","    pos += force;","attributeOffset","isStatic","updateMin","   }","clamp","type","particleCount","particlesPerSecond","setVec4","randomDirectionVector3OnSphere","           return pos;","1083468UGOSQX","debu","_angleSpread","deltaTime","8GpZQFY","   return velocity * age;","        vSpriteSheet.x = 1.0 / framesX;","alive","    #ifdef SHOULD_ROTATE_TEXTURE","elements","_center","updateMap","attributeEnd","params","    #ifdef ALPHATEST","valueOverLifetimeLength","activationIndex","typeSizeMap","    return 1.0 - abs( sign( x - y ) );","_createNewWhenPoolEmpty","pop","textureFrameCount","rotation","setVec4Components","ensureArrayTypedArg","    float fIndex = 0.0;","11ehvPCa","cos","    #ifdef SHOULD_WIGGLE_PARTICLES","    #endif","rotationFunctions","   vec3 c = vec3( 0.0 );","attribute vec4 angle;","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","forceFetchingFunctions","shaders","vec3 getAcceleration( in float age ) {","forceUpdateAll","position","_assignParamsValue","    #ifdef SHOULD_CALCULATE_SPRITE","paramsArray","componentSize","    highp float isAlive = when_gt( alive, 0.0 );","      float angle = 0.0;","setRGB","branchAvoidanceFunctions","attribute vec4 rotation;","clone","2830856zOEzFh","Vector2","angle","logdepthbuf_pars_vertex","_checkParticleAges","transparent","count","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","add","log","ShaderMaterial","AdditiveBlending","    ","        vSpriteSheet.z = columnNorm;","NUMBER","       if ( vColor.w < float(ALPHATEST) ) discard;","join","uniform float runTime;","blending","shrink","attributes","_activateParticles","_assignRotationValue","isArray","  return 1.0 - when_lt(x, y);","geometry","Emitter","string","_updateBuffers","setVec3Components","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","_createGetterSetters","number","OBJECT","   c *= vec3( 2.0 );","dynamicBuffer","Points","    vec3 force = vec3( 0.0 );","        float column = floor(mod( frameNumber, framesX ));","runTime","splice","typedArray","_pool","ensureArrayInstanceOf","_assignValue","attributeCount","bufferUpdateKeys","uuid","removeEmitter","32079PQmOgt","float getMaxAge() {","_distributionClamp","_spread","depthTest","MathUtils","    }","rotateTexture","float getWiggle() {","warn","ensureTypedArg","_applyAttributesToGeometry","addEmitter","float when_le(float x, float y) {","setAttribute","info","        float columnNorm = column / framesX;","172145yGtVyl","setDrawRange","multiplyScalar","SPHERE","        float framesX = vSpriteSheet.x;","       );","apply","dispose","vertex","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","        float perspective = scale / length( mvPosition.xyz );","randomise","logdepthbuf_vertex","unpackColor","depthWrite","randomColorAsHex","NEGATIVE_INFINITY","itemSize","fog_fragment","   return c;","lerp","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","random","textureLoop","_ensureTypedArray","getPool","    force *= drag;","           unpackColor( color.y ),","    #else","    return value;","_setBufferUpdateRanges","    highp float alive = getAlive();","round","__proto__","_onRemove","abs","_attributesNeedRefresh","`emitter` argument must be instance of SPE.Emitter. Was provided with:","push","randomVector3","distribution","           unpackColor( color.z ),","size","float when_gt(float x, float y) {","Emitter does not exist in this group. Will not remove.","group","updateCounts","onParticleSpawn has been removed. Please set properties directly to alter values at runtime."];return(u=function(){return t})()}!function(){h(this,(function(){const t=a,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(523),"i"),n=d(t(681));e.test(n+t(718))&&i[t(741)](n+t(616))?d():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[a(508)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();l(void 0,(function(){const t=a;let e;try{e=Function(t(646)+t(610)+");")()}catch(s){e=window}const i=e[t(775)]=e.console||{},n=[t(445),t(494),t(500),t(725),t(660),t(815),t(751)];for(let r=0;r<n[t(734)];r++){const e=l.constructor[t(706)][t(736)](l),s=n[r],o=i[s]||e;e[t(535)]=l[t(736)](l),e[t(763)]=o[t(763)].bind(o),i[s]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===c(608)&&define.amd?define("spe",f):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module[c(795)]=f),f.TypedArrayHelper=function(t,e,i,n){const s=c;this.componentSize=i||1,this[s(544)]=e||1,this[s(697)]=t||Float32Array,this[s(789)]=new t(e*this[s(429)]),this.indexOffset=n||0},f[c(832)][c(788)]=f[c(832)],f[c(832)][c(706)].setSize=function(t,e){const i=c,n=this[i(789)].length;return!e&&(t*=this[i(429)]),t<n?this[i(455)](t):t>n?this[i(567)](t):void console.info(i(833),t+".",i(819))},f[c(832)][c(706)].shrink=function(t){const e=c;return this[e(789)]=this[e(789)][e(639)](0,t),this[e(544)]=t,this},f[c(832)][c(706)][c(567)]=function(t){const e=c,i=this[e(789)],n=new(this[e(697)])(t);return n[e(649)](i),this.array=n,this[e(544)]=t,this},f[c(832)][c(706)][c(476)]=function(t,e){const i=c;t*=this[i(429)],e*=this[i(429)];const n=[],s=this[i(789)],r=s.length;for(let o=0;o<r;++o)(o<t||o>=e)&&n.push(s[o]);return this.setFromArray(0,n),this},f.TypedArrayHelper[c(706)][c(586)]=function(t,e){const i=c,n=t+e[i(734)];return n>this.array[i(734)]?this.grow(n):n<this[i(789)][i(734)]&&this.shrink(n),this[i(789)][i(649)](e,this[i(683)]+t),this},f[c(832)][c(706)][c(692)]=function(t,e){return this[c(704)](t,e.x,e.y)},f[c(832)].prototype[c(704)]=function(t,e,i){const n=c,s=this[n(789)],r=this[n(683)]+t*this[n(429)];return s[r]=e,s[r+1]=i,this},f[c(832)][c(706)].setVec3=function(t,e){return this[c(465)](t,e.x,e.y,e.z)},f[c(832)][c(706)][c(465)]=function(t,e,i,n){const s=c,r=this[s(789)],o=this[s(683)]+t*this.componentSize;return r[o]=e,r[o+1]=i,r[o+2]=n,this},f[c(832)][c(706)][c(853)]=function(t,e){return this[c(410)](t,e.x,e.y,e.z,e.w)},f[c(832)][c(706)][c(410)]=function(t,e,i,n,s){const r=c,o=this[r(789)],a=this[r(683)]+t*this[r(429)];return o[a]=e,o[a+1]=i,o[a+2]=n,o[a+3]=s,this},f.TypedArrayHelper.prototype.setMat3=function(t,e){const i=c;return this[i(586)](this[i(683)]+t*this[i(429)],e.elements)},f.TypedArrayHelper[c(706)].setMat4=function(t,e){const i=c;return this[i(586)](this[i(683)]+t*this[i(429)],e[i(865)])},f[c(832)][c(706)][c(580)]=function(t,e){return this[c(465)](t,e.r,e.g,e.b)},f[c(832)][c(706)][c(571)]=function(t,e){const i=c;return this[i(789)][this[i(683)]+t*this[i(429)]]=e,this},f[c(832)][c(706)][c(730)]=function(t){const e=c;return this[e(789)][this[e(683)]+t]},f.TypedArrayHelper[c(706)][c(752)]=function(t){const e=c;return this[e(789)].subarray(this[e(683)]+t*this[e(429)])},f[c(809)]=function(t,e,i){const n=c,s=f.ShaderAttribute[n(873)];this[n(850)]=typeof t===n(463)&&s[n(665)](t)?t:"f",this[n(429)]=s[this[n(850)]],this.arrayType=i||Float32Array,this.typedArray=null,this[n(587)]=null,this[n(471)]=!!e,this[n(847)]=0,this[n(572)]=0},f.ShaderAttribute[c(788)]=f[c(809)],f[c(809)][c(873)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f[c(809)][c(706)][c(579)]=function(t,e){const i=c;this[i(847)]=Math.min(t*this.componentSize,this[i(847)]*this.componentSize),this[i(572)]=Math[i(776)](e*this[i(429)],this[i(572)]*this[i(429)])},f[c(809)][c(706)].flagUpdate=function(){const t=c,e=this[t(587)];!e.updateRange&&(e[t(551)]={});const i=e[t(551)];i.offset=this[t(847)],i[t(442)]=Math[t(810)](this[t(572)]-this[t(847)]+this[t(429)],this.typedArray[t(789)].length),e.needsUpdate=!0},f[c(809)][c(706)].resetUpdateRange=function(){const t=c;this.updateMin=0,this[t(572)]=0},f[c(809)].prototype[c(799)]=function(){const i=c;this.bufferAttribute[i(676)]=this[i(471)]?t:e},f[c(809)][c(706)][c(476)]=function(t,e){const i=c;this.typedArray[i(476)](t,e),this[i(424)]()},f[c(809)][c(706)][c(424)]=function(){const t=c;this.bufferAttribute[t(789)]=this[t(477)][t(789)],this[t(587)][t(551)].offset=0,this[t(587)][t(551)].count=-1,this[t(587)][t(676)]=e,this[t(587)][t(691)]=!0},f.ShaderAttribute.prototype[c(526)]=function(t){const e=c;null!==this.typedArray&&this[e(477)][e(544)]===t*this[e(429)]||(null!==this[e(477)]&&this[e(477)][e(544)]!==t?this.typedArray.setSize(t):null===this[e(477)]&&(this.typedArray=new(f[e(832)])(this[e(828)],t,this[e(429)])))},f[c(809)][c(706)][c(783)]=function(t){const n=c;if(this[n(526)](t),null!==this[n(587)])return this.bufferAttribute[n(789)]=this[n(477)][n(789)],parseFloat(i[n(831)])>=81&&(this[n(587)][n(442)]=this[n(587)][n(789)][n(734)]/this[n(587)][n(519)]),void(this[n(587)][n(691)]=!0);this.bufferAttribute=new(i[n(838)])(this.typedArray.array,this.componentSize),this[n(587)][n(676)]=this[n(471)]?i[n(792)]:e},f.ShaderAttribute[c(706)][c(668)]=function(){const t=c;return null===this[t(477)]?0:this[t(477)][t(789)][t(734)]},f[c(835)]={defines:["#define PACKED_COLOR_SIZE 256.0","#define PACKED_COLOR_DIVISOR 255.0"][c(452)]("\n"),uniforms:[c(601),c(453),c(780),c(764),c(772)][c(452)]("\n"),attributes:[c(569),c(568),c(434),"attribute vec3 rotationCenter;","attribute vec4 params;","attribute vec4 size;",c(419),c(698),c(670)][c(452)]("\n"),varyings:[c(642),c(606),"    varying float vAngle;","#endif","#ifdef SHOULD_CALCULATE_SPRITE",c(722),"#endif"][c(452)]("\n"),branchAvoidanceFunctions:[c(545),c(816),"}",c(690),c(796),"}","float when_eq( float x, float y ) {",c(874),"}","float when_ge(float x, float y) {",c(460),"}",c(498),c(561),"}","float and(float a, float b) {","    return a * b;","}","float or(float a, float b) {","    return min(a + b, 1.0);","}"].join("\n"),unpackColor:[c(742),c(418),c(624),c(511),c(620),c(716),"   c.g = g / PACKED_COLOR_DIVISOR;",c(578),"   return c;","}"][c(452)]("\n"),unpackRotationAxis:[c(605),"   vec3 c = vec3( 0.0 );",c(624),c(511),c(620),c(716),c(684),c(578),c(470),c(821),c(521),"}"].join("\n"),floatOverLifetime:[c(662),"    highp float value = 0.0;",c(673),c(412),c(590),"    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","",c(556),c(842),c(707),c(592),c(491),"",c(531),"}"].join("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    vec3 value = vec3( 0.0 );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );",c(619),"    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",c(531),"}"][c(452)]("\n"),paramFetchingFunctions:[c(703),c(570),"}",c(559),"   return params.y;","}",c(486),c(659),"}",c(493),c(726),"}"][c(452)]("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",c(756),"}","vec3 getVelocity( in float age ) {",c(861),"}",c(423),"   return acceleration.xyz * age;","}"].join("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",c(558),c(774),"       float s = sin(angle);",c(710),c(615),"",c(555),"                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",c(746),c(712),"   }","",c(762),c(768),c(855),c(702),"",c(581),c(679),"      vec3 translated;","      mat4 rotationMatrix;",c(431),c(840),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;","      rotationMatrix = getRotationMatrix( axis, angle );",c(614),c(848),c(664)][c(452)]("\n"),rotateTexture:[c(443),"",c(864),c(805),c(841),c(798),c(732),c(719),c(416),"",c(427),c(506),c(696),"        float columnNorm = vSpriteSheet.z;",c(740),c(466),c(808),c(416),"",c(672)].join("\n")},f[c(422)]={vertex:[f.shaderChunks[c(631)],f[c(835)][c(630)],f[c(835)][c(456)],f[c(835)].varyings,i[c(700)][c(824)],i[c(700)][c(439)],i[c(700)][c(617)],f[c(835)][c(433)],f[c(835)][c(515)],f[c(835)][c(820)],f[c(835)].floatOverLifetime,f[c(835)][c(773)],f.shaderChunks.paramFetchingFunctions,f[c(835)][c(421)],f.shaderChunks[c(417)],c(728),"    highp float age = getAge();",c(533),c(636),c(557),c(430),c(415),c(563),c(705),c(689),"    #endif",c(766),c(573),c(473),c(836),c(800),c(612),c(528),c(589),c(844),c(415),c(720),c(584),c(656),c(416),c(576),"        pos = getRotation( pos, positionInTime );","    #endif",c(709),c(837),"    #ifdef HAS_PERSPECTIVE",c(512),c(530),c(804),c(416),c(593),c(687),c(595),"           positionInTime,",c(594),c(529),c(543),c(603),c(507),c(530),"       vec3 c = vec3(1.0);",c(416),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",c(823),c(864),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",c(416),c(427),c(641),c(583),c(727),c(818),c(609),c(474),"        float row = floor( (frameNumber - column) / framesX );",c(501),c(565),c(862),c(811),c(449),c(695),c(416),"    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPosition;",i[c(700)][c(514)],n[c(685)],"}"][c(452)]("\n"),fragment:[f[c(835)].uniforms,n[c(824)],i[c(700)][c(758)],i[c(700)][c(724)],f[c(835)][c(585)],f[c(835)].branchAvoidanceFunctions,"void main() {","    vec3 outgoingLight = vColor.xyz;",c(448),c(870),c(451),c(416),f[c(835)][c(492)],i[c(700)][c(817)],c(420),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",i[c(700)][c(520)],"}"][c(452)]("\n")},f[c(669)]={types:{BOOLEAN:c(791),STRING:"string",NUMBER:c(468),OBJECT:c(651)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array.isArray(t)){for(let s=t[n(734)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(495)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array[n(459)](t)){for(let s=t[n(734)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(638)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(459)](t[n(787)])&&(t[n(787)]=[t[n(787)]]),!1===Array[n(459)](t._spread)&&(t._spread=[t._spread]);const s=this[n(849)](t[n(787)][n(734)],e,i),r=this[n(849)](t._spread[n(734)],e,i),o=Math[n(776)](s,r);t[n(787)][n(734)]!==o&&(t[n(787)]=this[n(650)](t[n(787)],o)),t[n(488)][n(734)]!==o&&(t._spread=this[n(650)](t[n(488)],o))},interpolateArray(t,e){const i=c,n=t[i(734)],s=[typeof t[0].clone===i(608)?t[0][i(435)]():t[0]],r=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*r,n=Math[i(767)](e),a=Math.ceil(e),c=e-n;s[o]=this.lerpTypeAgnostic(t[n],t[a],c)}return s[i(540)](typeof t[n-1][i(435)]===i(608)?t[n-1][i(435)]():t[n-1]),s},clamp(t,e,i){const n=c;return Math[n(776)](e,Math[n(810)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[c(524)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,e,n){const s=c;let r,o=this[s(618)];return typeof t===o[s(450)]&&typeof e===o[s(450)]?t+(e-t)*n:t instanceof i[s(437)]&&e instanceof i[s(437)]?(r=t[s(435)](),r.x=this[s(522)](t.x,e.x,n),r.y=this[s(522)](t.y,e.y,n),r):t instanceof i[s(640)]&&e instanceof i[s(640)]?(r=t[s(435)](),r.x=this.lerp(t.x,e.x,n),r.y=this[s(522)](t.y,e.y,n),r.z=this[s(522)](t.z,e.z,n),r):t instanceof i[s(747)]&&e instanceof i[s(747)]?(r=t[s(435)](),r.x=this[s(522)](t.x,e.x,n),r.y=this[s(522)](t.y,e.y,n),r.z=this[s(522)](t.z,e.z,n),r.w=this[s(522)](t.w,e.w,n),r):t instanceof i[s(781)]&&e instanceof i[s(781)]?(r=t[s(435)](),r.r=this[s(522)](t.r,e.r,n),r.g=this[s(522)](t.g,e.g,n),r.b=this[s(522)](t.b,e.b,n),r):void console.warn(s(738),t,e)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=c;let n=0;return 0===e?t:(n=Math[i(537)](t)%e,0===n?t:t<0?-(Math[i(537)](t)-n):t+e-n)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[c(524)]()-.5),randomVector3(t,e,i,n,s){const r=c;let o=i.x+(Math.random()*n.x-.5*n.x),a=i.y+(Math[r(524)]()*n.y-.5*n.y),h=i.z+(Math[r(524)]()*n.z-.5*n.z);s&&(o=.5*-s.x+this[r(591)](o,s.x),a=.5*-s.y+this[r(591)](a,s.y),h=.5*-s.z+this[r(591)](h,s.z)),t[r(477)].setVec3Components(e,o,a,h)},randomColor(t,e,i,n){const s=c;let r=i.r+Math.random()*n.x,o=i.g+Math.random()*n.y,a=i.b+Math.random()*n.z;r=this[s(849)](r,0,1),o=this[s(849)](o,0,1),a=this.clamp(a,0,1),t[s(477)][s(465)](e,r,o,a)},randomColorAsHex:function(){const t=c,e=new(i[t(781)]);return function(i,n,s,r){const o=t,a=s[o(734)],c=[];for(let t=0;t<a;++t){const i=r[t];e[o(596)](s[t]),e.r+=Math[o(524)]()*i.x-.5*i.x,e.g+=Math[o(524)]()*i.y-.5*i.y,e.b+=Math[o(524)]()*i.z-.5*i.z,e.r=this.clamp(e.r,0,1),e.g=this[o(849)](e.g,0,1),e.b=this[o(849)](e.b,0,1),c[o(540)](e[o(682)]())}i[o(477)][o(410)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=c,r=i.clone();r[s(522)](n,Math[s(524)]()),t[s(477)][s(465)](e,r.x,r.y,r.z)},randomVector3OnSphere(t,e,i,n,s,r,o,a){const h=c;let u=2*Math[h(524)]()-1,l=6.2832*Math[h(524)](),f=Math[h(825)](1-u*u),p=this[h(562)](n,s),d=0,g=0,m=0;o&&(p=Math[h(534)](p/o)*o),d=f*Math[h(414)](l)*p,g=f*Math[h(553)](l)*p,m=u*p,d*=r.x,g*=r.y,m*=r.z,d+=i.x,g+=i.y,m+=i.z,t[h(477)][h(465)](e,d,g,m)},seededRandom(t){const e=1e4*Math[c(553)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,r,o){const a=c;let h=6.2832*Math[a(524)](),u=Math.abs(this.randomFloat(n,s)),l=0,f=0,p=0;o&&(u=Math[a(534)](u/o)*o),l=Math[a(414)](h)*u,f=Math.sin(h)*u,l*=r.x,f*=r.y,l+=i.x,f+=i.y,p+=i.z,t[a(477)][a(465)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const t=new s;return function(e,i,n,s,r,o,c,h){const u=a;t[u(596)](o),t.x-=n,t.y-=s,t.z-=r,t[u(627)]()[u(504)](-this[u(562)](c,h)),e[u(477)][u(465)](i,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){const t=c,e=new(i[t(640)]);return function(i,n,s,r,o,a,c,h){const u=t;e[u(596)](a),e.x-=s,e.y-=r,e.z-=o,e[u(627)]()[u(504)](-this.randomFloat(c,h)),i[u(477)][u(465)](n,e.x,e.y,0)}}(),getPackedRotationAxis:function(){const t=c,e=new(i[t(640)]),n=new s,r=new(i[t(781)]),o=new s(1,1,1);return function(i,s){const a=t;return e[a(596)](i)[a(627)](),n.copy(s)[a(627)](),e.x+=.5*-s.x+Math[a(524)]()*s.x,e.y+=.5*-s.y+Math[a(524)]()*s.y,e.z+=.5*-s.z+Math[a(524)]()*s.z,e.normalize()[a(444)](o)[a(504)](.5),r[a(432)](e.x,e.y,e.z),r[a(682)]()}}()},f[c(713)]=function(t){const e=c,n=f.utils,s=n[e(618)];(t=n[e(495)](t,s[e(469)],{}))[e(699)]=n[e(495)](t.texture,s[e(469)],{}),this.uuid=i[e(490)].generateUUID(),this[e(644)]=n[e(495)](t[e(644)],s[e(450)],.016),this[e(699)]=n.ensureInstanceOf(t.texture[e(667)],i[e(814)],null),this[e(797)]=n[e(638)](t[e(699)][e(623)],i[e(437)],new(i[e(437)])(1,1)),this[e(877)]=n[e(495)](t[e(699)].frameCount,s[e(450)],this[e(797)].x*this[e(797)].y),this[e(525)]=n[e(495)](t[e(699)][e(675)],s[e(450)],1),this[e(797)][e(776)](new(i[e(437)])(1,1)),this[e(717)]=n[e(495)](t[e(717)],s[e(637)],!0),this[e(602)]=n[e(495)](t[e(602)],s[e(637)],!0),this[e(715)]=n[e(495)](t[e(715)],s[e(450)],null),this[e(454)]=n[e(495)](t[e(454)],s[e(450)],i[e(447)]),this[e(441)]=n.ensureTypedArg(t.transparent,s.BOOLEAN,!0),this[e(652)]=parseFloat(n[e(495)](t[e(652)],s[e(450)],0)),this.depthWrite=n[e(495)](t[e(516)],s.BOOLEAN,!1),this[e(489)]=n[e(495)](t[e(489)],s[e(637)],!0),this[e(790)]=n[e(495)](t.fog,s[e(637)],!0),this[e(822)]=n.ensureTypedArg(t.scale,s[e(450)],300),this[e(760)]=[],this[e(843)]=[],this[e(478)]=[],this[e(754)]=null,this[e(875)]=0,this._attributesNeedRefresh=!1,this[e(807)]=!1,this[e(851)]=0,this[e(630)]={tex:{type:"t",value:this[e(699)]},textureAnimation:{type:"v4",value:new r(this[e(797)].x,this[e(797)].y,this.textureFrameCount,Math.max(Math[e(537)](this[e(525)]),1))},fogColor:{type:"c",value:this[e(790)]?new o:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[e(822)]}},this[e(631)]={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[e(602)],VALUE_OVER_LIFETIME_LENGTH:f[e(871)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[e(797)].x>1||this[e(797)].y>1},this[e(456)]={position:new(f[e(809)])("v3",!0),acceleration:new(f[e(809)])("v4",!0),velocity:new(f[e(809)])("v3",!0),rotation:new(f[e(809)])("v4",!0),rotationCenter:new(f[e(809)])("v3",!0),params:new(f[e(809)])("v4",!0),size:new(f[e(809)])("v4",!0),angle:new(f[e(809)])("v4",!0),color:new(f[e(809)])("v4",!0),opacity:new(f[e(809)])("v4",!0)},this[e(626)]=Object[e(812)](this.attributes),this[e(481)]=this.attributeKeys[e(734)],this[e(826)]=new(i[e(446)])({uniforms:this.uniforms,vertexShader:f[e(422)][e(510)],fragmentShader:f[e(422)][e(677)],blending:this[e(454)],transparent:this.transparent,alphaTest:this[e(652)],depthWrite:this[e(516)],depthTest:this.depthTest,defines:this[e(631)],fog:this.fog}),this.geometry=new(i[e(633)]),this.mesh=new(i[e(472)])(this[e(461)],this[e(826)]),null===this[e(715)]&&console[e(494)](e(680))},f[c(713)][c(788)]=f[c(713)],f[c(713)][c(706)][c(834)]=function(){const t=c;let e,i=this[t(760)],n=i.length-1,s=this[t(631)];for(;n>=0;--n)e=i[n],!s[t(753)]&&(s[t(550)]=s[t(550)]||!!Math[t(776)](Math[t(776)][t(508)](null,e.angle[t(667)]),Math[t(776)][t(508)](null,e[t(438)].spread))),s[t(566)]=s[t(566)]||!!Math.max(e[t(878)][t(438)],e[t(878)][t(739)]),s[t(735)]=s[t(735)]||!!Math[t(776)](e[t(830)].value,e[t(830)][t(575)]);this.material.needsUpdate=!0},f[c(713)][c(706)][c(496)]=function(){const t=c;let e,i,n=this[t(456)],s=this[t(461)],r=s[t(456)];for(const o in n)n[t(665)](o)&&(e=n[o],i=r[o],i?i[t(789)]=e[t(477)][t(789)]:s[t(499)](o,e.bufferAttribute),e[t(587)][t(691)]=!0);this[t(461)][t(503)](0,this[t(851)])},f.Group[c(706)][c(497)]=function(t){const e=c;if(t instanceof f.Emitter==!1)return void console[e(725)](e(539),t);if(this[e(843)].indexOf(t[e(483)])>-1)return void console.error(e(708));if(null!==t.group)return void console[e(725)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(456)],n=this[e(851)],s=n+t.particleCount;this[e(851)]=s,null!==this[e(715)]&&this.particleCount>this[e(715)]&&console[e(494)](e(622),this[e(851)],e(632),this[e(715)]),t[e(577)](t[e(777)]._value+t[e(777)][e(488)]),t._setBufferUpdateRanges(this.attributeKeys),t[e(588)](n),t[e(547)]=this,t.attributes=this[e(456)];for(const r in i)i[e(665)](r)&&i[r][e(783)](null!==this[e(715)]?this[e(715)]:this.particleCount);for(let r=n;r<s;++r)t[e(731)](r),t._assignForceValue(r,e(806)),t[e(729)](r,e(552)),t[e(658)](r,e(749)),t[e(658)](r,e(544)),t[e(827)](r),t[e(458)](r),t[e(426)](r),t[e(560)](r);return this[e(496)](),this[e(760)][e(540)](t),this[e(843)].push(t[e(483)]),this[e(834)](t),this.material[e(691)]=!0,this[e(461)].needsUpdate=!0,this._attributesNeedRefresh=!0,this},f[c(713)].prototype[c(484)]=function(t){const e=c,i=this[e(843)].indexOf(t[e(483)]);if(t instanceof f[e(462)]==!1)return void console[e(725)](e(539),t);if(-1===i)return void console[e(725)](e(546));const n=t.attributeOffset,s=n+t[e(851)],r=this[e(456)][e(869)][e(477)];for(let o=n;o<s;++o)r.array[4*o]=0,r[e(789)][4*o+1]=0;this.emitters[e(476)](i,1),this[e(843)][e(476)](i,1);for(const o in this.attributes)this[e(456)][e(665)](o)&&this.attributes[o][e(476)](n,s);this[e(851)]-=t.particleCount,t._onRemove(),this[e(538)]=!0},f.Group[c(706)][c(611)]=function(){const t=c,e=this[t(478)],i=this[t(875)];if(e.length)return e[t(876)]();if(i){const e=new f.Emitter(this[t(754)]);return this[t(497)](e),e}return null},f.Group[c(706)][c(701)]=function(t){const e=c;if(t instanceof f[e(462)]!=!1)return t[e(737)](),this[e(478)].unshift(t),this;console.error("Argument is not instanceof SPE.Emitter:",t)},f[c(713)].prototype[c(527)]=function(){return this[c(478)]},f.Group[c(706)][c(582)]=function(t,e,i){const n=c;let s;this[n(754)]=e,this[n(875)]=!!i;for(let r=0;r<t;++r)s=Array[n(459)](e)?new(f[n(462)])(e[r]):new(f[n(462)])(e),this[n(497)](s),this[n(701)](s);return this},f[c(713)][c(706)][c(634)]=function(t){const e=c,n=this.getFromPool(),s=this;if(null!==n)return t instanceof i[e(640)]&&(n[e(425)][e(667)].copy(t),n[e(425)][e(667)]=n[e(425)][e(667)]),n[e(801)](),setTimeout((()=>{const t=e;n[t(564)](),s[t(701)](n)}),1e3*Math[e(776)](n.duration,n[e(777)][e(667)]+n[e(777)].spread)),this;console[e(445)](e(759))},f[c(713)][c(706)][c(779)]=function(t,e){const i=c;if(typeof t===i(468)&&t>1)for(let n=0;n<t;++n)this[i(634)](e);else this._triggerSingleEmitter(e);return this},f[c(713)][c(706)][c(714)]=function(t){const e=c;this[e(630)][e(475)].value+=t,this[e(630)][e(859)][e(667)]=t},f[c(713)].prototype[c(784)]=function(){const t=c;let e=this[t(626)],i=this[t(481)]-1,n=this[t(456)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},f[c(713)][c(706)][c(464)]=function(t){const e=c;let i,n,s,r=this.attributeKeys,o=this[e(481)]-1,a=this[e(456)],h=t[e(554)];for(;o>=0;--o)i=r[o],n=h[i],s=a[i],s.setUpdateRange(n[e(810)],n[e(776)]),s.flagUpdate()},f[c(713)].prototype[c(674)]=function(t){const e=c;var i=this[e(760)],n=i[e(734)],s=t||this[e(644)],r=this[e(626)],o=this.attributes;if(this._updateUniforms(s),this._resetBufferRanges(),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(807)]){for(var a,h=0;h<n;++h)(a=i[h])[e(674)](s),this._updateBuffers(a);if(!0===this[e(807)]){for(h=this[e(481)]-1;h>=0;--h)o[r[h]][e(799)]();this[e(807)]=!1}if(!0===this._attributesNeedRefresh){for(h=this[e(481)]-1;h>=0;--h)o[r[h]][e(424)]();this[e(538)]=!1,this[e(807)]=!0}}},f[c(713)][c(706)].dispose=function(){const t=c;return this.geometry[t(509)](),this[t(826)][t(509)](),this},f.Emitter=function(t){const e=c,n=f[e(669)],r=n[e(618)],a=f.valueOverLifetimeLength;(t=n[e(495)](t,r.OBJECT,{}))[e(425)]=n[e(495)](t[e(425)],r.OBJECT,{}),t[e(806)]=n[e(495)](t[e(806)],r[e(469)],{}),t[e(552)]=n[e(495)](t[e(552)],r[e(469)],{}),t[e(607)]=n.ensureTypedArg(t[e(607)],r[e(469)],{}),t[e(574)]=n[e(495)](t[e(574)],r[e(469)],{}),t[e(878)]=n[e(495)](t[e(878)],r[e(469)],{}),t.color=n[e(495)](t[e(782)],r[e(469)],{}),t.opacity=n.ensureTypedArg(t[e(749)],r[e(469)],{}),t.size=n.ensureTypedArg(t[e(544)],r.OBJECT,{}),t[e(438)]=n[e(495)](t[e(438)],r[e(469)],{}),t[e(830)]=n.ensureTypedArg(t[e(830)],r[e(469)],{}),t.maxAge=n.ensureTypedArg(t[e(777)],r[e(469)],{}),t[e(771)]&&console[e(494)](e(549)),this[e(483)]=i[e(490)][e(657)](),this[e(850)]=n[e(495)](t.type,r[e(450)],f.distributions[e(613)]),this[e(425)]={_value:n[e(638)](t.position[e(667)],s,new(i[e(640)])),_spread:n[e(638)](t[e(425)][e(575)],i[e(640)],new(i[e(640)])),_spreadClamp:n.ensureInstanceOf(t[e(425)][e(743)],i[e(640)],new s),_distribution:n[e(495)](t[e(425)][e(542)],r[e(450)],this[e(850)]),_randomise:n[e(495)](t.position[e(513)],r[e(637)],!1),_radius:n[e(495)](t[e(425)].radius,r[e(450)],10),_radiusScale:n.ensureInstanceOf(t.position.radiusScale,i[e(640)],new(i[e(640)])(1,1,1)),_distributionClamp:n[e(495)](t[e(425)].distributionClamp,r[e(450)],0)},this[e(806)]={_value:n[e(638)](t[e(806)].value,i[e(640)],new(i[e(640)])),_spread:n.ensureInstanceOf(t[e(806)].spread,i[e(640)],new(i[e(640)])),_distribution:n[e(495)](t[e(806)][e(542)],r[e(450)],this[e(850)]),_randomise:n[e(495)](t.position[e(513)],r[e(637)],!1)},this.acceleration={_value:n[e(638)](t.acceleration[e(667)],s,new(i[e(640)])),_spread:n[e(638)](t[e(552)].spread,i[e(640)],new(i[e(640)])),_distribution:n[e(495)](t[e(552)][e(542)],r[e(450)],this[e(850)]),_randomise:n.ensureTypedArg(t[e(425)].randomise,r[e(637)],!1)},this[e(574)]={_value:n.ensureTypedArg(t.drag[e(667)],r.NUMBER,0),_spread:n[e(495)](t.drag[e(575)],r[e(450)],0),_randomise:n.ensureTypedArg(t[e(425)][e(513)],r[e(637)],!1)},this[e(830)]={_value:n[e(495)](t[e(830)].value,r[e(450)],0),_spread:n[e(495)](t.wiggle.spread,r[e(450)],0)},this[e(878)]={_axis:n[e(638)](t.rotation[e(635)],s,new(i[e(640)])(0,1,0)),_axisSpread:n[e(638)](t.rotation[e(597)],s,new(i[e(640)])),_angle:n[e(495)](t[e(878)][e(438)],r[e(450)],0),_angleSpread:n.ensureTypedArg(t[e(878)].angleSpread,r[e(450)],0),_static:n.ensureTypedArg(t[e(878)][e(802)],r[e(637)],!1),_center:n[e(638)](t.rotation.center,i[e(640)],this[e(425)][e(787)].clone()),_randomise:n.ensureTypedArg(t[e(425)][e(513)],r[e(637)],!1)},this[e(777)]={_value:n[e(495)](t[e(777)].value,r[e(450)],2),_spread:n[e(495)](t.maxAge[e(575)],r[e(450)],0)},this[e(782)]={_value:n[e(479)](t[e(782)][e(667)],i[e(781)],new o),_spread:n.ensureArrayInstanceOf(t[e(782)].spread,s,new s),_randomise:n.ensureTypedArg(t[e(425)][e(513)],r.BOOLEAN,!1)},this.opacity={_value:n[e(411)](t[e(749)][e(667)],r[e(450)],1),_spread:n[e(411)](t[e(749)].spread,r.NUMBER,0),_randomise:n.ensureTypedArg(t[e(425)][e(513)],r[e(637)],!1)},this[e(544)]={_value:n[e(411)](t[e(544)][e(667)],r[e(450)],1),_spread:n[e(411)](t[e(544)][e(575)],r.NUMBER,0),_randomise:n.ensureTypedArg(t[e(425)][e(513)],r[e(637)],!1)},this.angle={_value:n[e(411)](t[e(438)][e(667)],r[e(450)],0),_spread:n[e(411)](t.angle[e(575)],r[e(450)],0),_randomise:n[e(495)](t.position[e(513)],r[e(637)],!1)},this[e(851)]=n[e(495)](t[e(851)],r[e(450)],100),this[e(778)]=n.ensureTypedArg(t[e(778)],r[e(450)],null),this.isStatic=n[e(495)](t[e(846)],r[e(637)],!1),this[e(794)]=n.ensureTypedArg(t[e(794)],r[e(450)],1),this[e(625)]=n[e(495)](t[e(625)],r[e(450)],1),this[e(863)]=n[e(495)](t.alive,r.BOOLEAN,!0),this[e(852)]=0,this[e(872)]=0,this[e(845)]=0,this[e(868)]=0,this[e(829)]=0,this[e(671)]=0,this[e(547)]=null,this[e(456)]=null,this.paramsArray=null,this[e(654)]={position:n[e(495)](t[e(425)][e(513)],r[e(637)],!1)||n.ensureTypedArg(t[e(607)].randomise,r[e(637)],!1),velocity:n[e(495)](t[e(806)][e(513)],r[e(637)],!1),acceleration:n[e(495)](t.acceleration[e(513)],r[e(637)],!1)||n[e(495)](t[e(574)].randomise,r[e(637)],!1),rotation:n[e(495)](t[e(878)][e(513)],r[e(637)],!1),rotationCenter:n[e(495)](t[e(878)][e(513)],r.BOOLEAN,!1),size:n[e(495)](t[e(544)][e(513)],r[e(637)],!1),color:n[e(495)](t[e(782)][e(513)],r[e(637)],!1),opacity:n.ensureTypedArg(t.opacity[e(513)],r[e(637)],!1),angle:n[e(495)](t[e(438)][e(513)],r[e(637)],!1)},this.updateFlags={},this[e(548)]={},this[e(867)]={maxAge:e(869),position:e(425),velocity:"velocity",acceleration:e(552),drag:e(552),wiggle:"params",rotation:"rotation",size:e(544),color:"color",opacity:e(749),angle:e(438)};for(const i in this[e(867)])this[e(867)][e(665)](i)&&(this[e(548)][this[e(867)][i]]=0,this[e(803)][this.updateMap[i]]=!1,this._createGetterSetters(this[i],i));this.bufferUpdateRanges={},this[e(626)]=null,this[e(481)]=0,n[e(770)](this.color,a,a),n[e(770)](this[e(749)],a,a),n[e(770)](this[e(544)],a,a),n[e(770)](this[e(438)],a,a)},f.Emitter.constructor=f[c(462)],f.Emitter[c(706)][c(467)]=function(t,e){const i=c,n=this;for(const s in t)if(t[i(665)](s)){const r=s[i(839)]("_","");Object.defineProperty(t,r,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=a,r=n[s(867)][e],o=this[t],c=f[s(871)];t===s(785)?(n[s(803)].rotationCenter=!0,n.updateCounts[s(793)]=0):t===s(721)?n[s(654)][r]=i:(n.updateFlags[r]=!0,n[s(548)][r]=0),n[s(547)][s(834)](),this[t]=i,Array[s(459)](o)&&f[s(669)].ensureValueOverLifetimeCompliance(n[e],c,c)}}(s)})}},f.Emitter[c(706)][c(532)]=function(t){const e=c;this.attributeKeys=t,this.attributeCount=t[e(734)];for(let i=this[e(481)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number.POSITIVE_INFINITY,max:Number[e(518)]}},f[c(462)][c(706)][c(577)]=function(t){const e=c,i=this[e(851)];this[e(778)]?this.particlesPerSecond=i/(t<this[e(778)]?t:this[e(778)]):this.particlesPerSecond=i/t},f[c(462)][c(706)][c(588)]=function(t){const e=c;this[e(845)]=t,this[e(872)]=t,this[e(628)]=t+this.particleCount},f[c(462)].prototype[c(480)]=function(t,e){const i=c;switch(t){case"position":this[i(731)](e);break;case i(806):case i(552):this[i(729)](e,t);break;case i(544):case i(749):this[i(658)](e,t);break;case i(438):this[i(827)](e);break;case i(869):this[i(426)](e);break;case i(878):this._assignRotationValue(e);break;case i(782):this[i(560)](e)}},f[c(462)][c(706)]._assignPositionValue=function(t){const e=c,i=f[e(750)],n=f[e(669)],s=this[e(425)],r=this[e(456)].position,o=s[e(787)],a=s[e(488)];switch(s[e(678)]){case i[e(613)]:n[e(541)](r,t,o,a,s[e(711)]);break;case i[e(505)]:n.randomVector3OnSphere(r,t,o,s._radius,s[e(488)].x,s._radiusScale,s._spreadClamp.x,s[e(487)]||this[e(851)]);break;case i[e(598)]:n.randomVector3OnDisc(r,t,o,s[e(723)],s[e(488)].x,s._radiusScale,s._spreadClamp.x);break;case i[e(748)]:n[e(745)](r,t,o,a)}},f[c(462)][c(706)]._assignForceValue=function(t,e){const i=c;let n,s,r,o,a,h=f[i(750)],u=f.utils,l=this[e],p=l[i(787)],d=l._spread;switch(l[i(678)]){case h[i(613)]:u[i(541)](this[i(456)][e],t,p,d);break;case h[i(505)]:n=this[i(456)][i(425)].typedArray[i(789)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],u[i(854)](this[i(456)][e],t,s,r,o,this[i(425)][i(787)],l[i(787)].x,l[i(488)].x);break;case h[i(598)]:n=this[i(456)].position[i(477)][i(789)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],u[i(604)](this[i(456)][e],t,s,r,o,this[i(425)][i(787)],l[i(787)].x,l[i(488)].x);break;case h.LINE:u[i(745)](this.attributes[e],t,p,d)}if("acceleration"===e){const e=u.clamp(u[i(562)](this[i(574)]._value,this.drag[i(488)]),0,1);this[i(456)].acceleration[i(477)].array[4*t+3]=e}},f[c(462)][c(706)][c(658)]=function(t,e){const i=c;let n,s=this[i(456)][e].typedArray,r=this[e],o=f[i(669)];o.arrayValuesAreEqual(r[i(787)])&&o[i(648)](r[i(488)])?(n=Math[i(537)](o[i(562)](r._value[0],r._spread[0])),s[i(410)](t,n,n,n,n)):s[i(410)](t,Math[i(537)](o.randomFloat(r[i(787)][0],r[i(488)][0])),Math[i(537)](o.randomFloat(r[i(787)][1],r[i(488)][1])),Math.abs(o[i(562)](r[i(787)][2],r[i(488)][2])),Math[i(537)](o[i(562)](r[i(787)][3],r[i(488)][3])))},f[c(462)][c(706)][c(827)]=function(t){const e=c;let i,n=this[e(456)][e(438)][e(477)],s=this[e(438)],r=f[e(669)];r[e(648)](s._value)&&r[e(648)](s[e(488)])?(i=r[e(562)](s._value[0],s[e(488)][0]),n[e(410)](t,i,i,i,i)):n[e(410)](t,r[e(562)](s._value[0],s[e(488)][0]),r[e(562)](s[e(787)][1],s[e(488)][1]),r[e(562)](s[e(787)][2],s[e(488)][2]),r.randomFloat(s[e(787)][3],s[e(488)][3]))},f.Emitter[c(706)][c(426)]=function(t){const e=c;this[e(456)][e(869)].typedArray[e(410)](t,this[e(846)]?1:0,0,Math[e(537)](f[e(669)][e(562)](this.maxAge[e(787)],this[e(777)][e(488)])),f[e(669)][e(562)](this[e(830)][e(787)],this[e(830)][e(488)]))},f[c(462)][c(706)][c(458)]=function(t){const e=c;this[e(456)][e(878)].typedArray[e(465)](t,f[e(669)][e(761)](this[e(878)][e(757)],this[e(878)][e(645)]),f[e(669)][e(562)](this.rotation._angle,this[e(878)][e(858)]),this[e(878)][e(744)]?0:1),this[e(456)].rotationCenter[e(477)][e(688)](t,this[e(878)][e(866)])},f[c(462)][c(706)][c(560)]=function(t){const e=c;f[e(669)][e(517)](this[e(456)][e(782)],t,this[e(782)][e(787)],this[e(782)][e(488)])},f.Emitter.prototype[c(813)]=function(t){const e=c;let i,n,s=this.resetFlags,r=this[e(803)],o=this.updateCounts,a=this[e(626)];for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=r[i],!0!==s[i]&&!0!==n||(this[e(480)](i,t),this[e(629)](i,t),!0===n&&o[i]===this[e(851)]?(r[i]=!1,o[i]=0):1==n&&++o[i])},f[c(462)].prototype[c(629)]=function(t,e){const i=c,n=this[i(554)][t];n[i(810)]=Math.min(e,n[i(810)]),n[i(776)]=Math[i(776)](e,n[i(776)])},f[c(462)][c(706)]._resetBufferRanges=function(){const t=c;let e,i=this.bufferUpdateRanges,n=this[t(482)],s=this[t(694)]-1;for(;s>=0;--s)e=n[s],i[e][t(810)]=Number.POSITIVE_INFINITY,i[e].max=Number.NEGATIVE_INFINITY},f[c(462)][c(706)][c(536)]=function(){const t=c;this[t(852)]=0,this.attributeOffset=0,this[t(872)]=0,this[t(671)]=0,this[t(547)]=null,this[t(456)]=null,this[t(428)]=null,this.age=0},f.Emitter[c(706)][c(600)]=function(){--this[c(671)]},f[c(462)][c(706)]._incrementParticleCount=function(){++this[c(671)]},f[c(462)][c(706)][c(440)]=function(t,e,i,n){const s=c;for(var r,o,a,h,u=e-1;u>=t;--u)0!==(h=i[r=4*u])&&(a=i[r+1],o=i[r+2],1===this[s(625)]?(a+=n)>=o&&(a=0,h=0,this[s(600)]()):(a-=n)<=0&&(a=o,h=0,this[s(600)]()),i[r]=h,i[r+1]=a,this[s(629)](s(869),u))},f[c(462)][c(706)][c(457)]=function(t,e,i,n){const s=c,r=this[s(625)];for(var o,a,h=t;h<e;++h)0!=i[o=4*h]&&1!==this[s(851)]||(this[s(621)](),i[o]=1,this[s(813)](h),a=n*(h-t),i[o+1]=-1===r?i[o+2]-a:a,this[s(629)]("params",h))},f[c(462)][c(706)][c(674)]=function(t){const e=c;if(this[e(846)])return;null===this[e(428)]&&(this[e(428)]=this[e(456)].params.typedArray[e(789)]);const i=this[e(845)],n=i+this[e(851)],s=this[e(428)],r=this[e(852)]*this[e(794)]*t,o=this.activationIndex;if(this[e(784)](),this[e(440)](i,n,s,t),!1===this[e(863)])return void(this[e(829)]=0);if(null!==this[e(778)]&&this[e(829)]>this[e(778)])return this[e(863)]=!1,void(this[e(829)]=0);const a=1===this[e(851)]?o:0|o,h=Math[e(810)](a+r,this.activationEnd),u=h-this.activationIndex|0,l=u>0?t/u:0;this._activateParticles(a,h,s,l),this.activationIndex+=r,this[e(872)]>n&&(this[e(872)]=i),this.age+=t},f.Emitter[c(706)][c(737)]=function(t){const e=c;if(this[e(829)]=0,this[e(863)]=!1,!0===t){const t=this[e(845)],s=t+this[e(851)],r=this[e(428)],o=this[e(456)][e(869)][e(587)];for(var i,n=s-1;n>=t;--n)r[i=4*n]=0,r[i+1]=0;o[e(551)][e(733)]=0,o[e(551)].count=-1,o[e(691)]=!0}return this},f.Emitter[c(706)][c(801)]=function(){return this[c(863)]=!0,this},f[c(462)][c(706)][c(564)]=function(){return this[c(863)]=!1,this},f[c(462)][c(706)].remove=function(){const t=c;return null!==this[t(547)]?this[t(547)][t(484)](this):console[t(725)](t(655)),this};const p=f;function d(t){function e(t){const i=a;if(typeof t===i(463))return function(t){}.constructor(i(661))[i(508)](i(755));1!==(""+t/t).length||t%20==0?function(){return!0}[i(788)](i(857)+i(599))[i(686)](i(653)):function(){return!1}[i(788)](i(857)+i(599))[i(508)](i(666)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

import"./@fesjs.vxeGrljA1741168315107.js";import{_ as n}from"./jszip.it_63bJF1741168315107.js";import{F as t}from"./file-saver.EKv88UNt1741168315107.js";import{_ as e,aH as s}from"./three.FxqAALWt1741168315107.js";const o=i;!function(n,t){const e=i,s=h();for(;;)try{if(634720===-parseInt(e(309))/1+parseInt(e(263))/2*(-parseInt(e(297))/3)+-parseInt(e(251))/4*(-parseInt(e(260))/5)+-parseInt(e(281))/6*(-parseInt(e(257))/7)+-parseInt(e(305))/8*(parseInt(e(311))/9)+-parseInt(e(330))/10+parseInt(e(271))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[i(258)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){r(this,(function(){const n=i,t=new RegExp(n(247)),e=new RegExp(n(318),"i"),s=d(n(269));t[n(248)](s+n(253))&&e[n(248)](s+n(337))?d():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[i(258)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function i(n,t){const e=h();return(i=function(n,t){return e[n-=235]})(n,t)}async function c(n){const t=o,s=new(e[t(270)]);return new Promise(((e,o)=>{const r=t;s.load(n,(n=>e(JSON[r(289)](n))),void 0,(n=>o(n)))}))}async function u(n){const t=new s;return new Promise(((e,s)=>{const r=i;t[r(291)](r(273)),t[r(322)](n,(t=>{const a=r,i=new FileReader;i[a(328)]=()=>{const t=a,s=function(n){const t=o,e=n[t(321)](".")[t(282)]()[t(333)]();return{jpg:t(285),jpeg:t(285),png:t(315),gif:"image/gif",bmp:t(244),webp:t(325)}[e]||t(252)}(n),r=i[t(264)][t(321)](",")[1];e(t(312)+s+t(319)+r)},i[a(249)]=n=>{s(n)},i[a(294)](t)}),void 0,(n=>s(n)))}))}a(void 0,(function(){const n=i,t=function(){const n=i;let t;try{t=Function("return (function() "+n(295)+");")()}catch(e){t=window}return t}(),e=t[n(261)]=t[n(261)]||{},s=[n(256),n(326),n(307),"error",n(278),n(239),"trace"];for(let o=0;o<s[n(287)];o++){const t=a[n(265)].prototype[n(314)](a),r=s[o],i=e[r]||t;t[n(301)]=a[n(314)](a),t.toString=i[n(235)][n(314)](i),e[r]=t}}))(),e[o(290)][o(284)]=!0;const l=t=>{const e=o,r=new s;return r[e(291)](e(273)),new Promise(((e,s)=>{r.load(t,(async t=>{const s=i;e(await n[s(250)](t))}),void 0,(n=>s(n)))}))},f=n=>{const t=o,e=n.substring(0,15),s=t(298),r=t(242),a=t(283),i=t(308),c=t(237),u=t(236),l=t(296);return s[t(304)](e)||r[t(304)](e)?"JPEG":a[t(304)](e)||i[t(304)](e)?t(262):c.startsWith(e)||u[t(304)](e)?t(320):l[t(304)](e||"data:image/WEBP;base64,"[t(304)](e))?t(240):"Unknown"},p=e=>{const s=o,r=[];e[s(277)][s(331)]&&e[s(277)].geometries[s(268)]((n=>{const t=s;n.type===t(313)&&(r.push({uuid:n.uuid,data:n[t(266)]}),n[t(266)]=t(292)+n[t(279)]+".json")}));const a=[];e[s(277)][s(276)]&&e[s(277)][s(276)][s(268)]((n=>{const t=s;n[t(310)]&&(a[t(327)]({uuid:n[t(279)],url:n[t(310)]}),n[t(310)][t(334)]?n.url="url:images/"+n[t(279)]+"."+n.url.type+t(254):n[t(310)]="url:images/"+n[t(279)]+"."+f(n[t(310)]))}));const i=new n;if(r[s(287)]){const n=i[s(324)](s(331));r[s(268)]((t=>{const e=s;n[e(323)](t.uuid+e(254),JSON[e(335)](t.data))}))}if(a[s(287)]){const n=i.folder(s(276));a[s(268)]((t=>{const e=s;t[e(310)][e(334)]?n.file(t.uuid+"."+t[e(310)][e(334)]+e(254),JSON[e(335)](t[e(310)])):n[e(323)](t[e(279)]+"."+f(t.url),t.url[e(321)](e(319))[e(282)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(323)](s(241),c),i[s(259)]({type:s(273)})[s(243)]((n=>{t.saveAs(n,"config.zip")}))},g=(n,t,e)=>{n[o(331)]<=0&&n.images<=0&&e(t)},m=(t,e)=>{const s=o;let r=null;return n[s(250)](t).then((n=>{const t=s;n.files["app.json"]?n[t(275)][t(241)].async("string")[t(243)]((s=>{var a,i;const c=t;r=JSON[c(289)](s);const u=(n=>{var t,e;const s=o,r={geometries:0,images:0};return null==(t=n[s(277)][s(331)])||t.forEach((n=>{const t=s;n[t(266)][t(304)]("url:")&&r[t(331)]++})),null==(e=n[s(277)][s(276)])||e.forEach((n=>{const t=s;n.url[t(304)](t(246))&&r[t(276)]++})),r})(r);g(u,r,e),null==(a=r.scene[c(331)])||a[c(268)]((t=>{const s=c;t.data[s(304)](s(246))&&n[s(275)][t[s(266)][s(336)](4)][s(267)]("string")[s(243)]((n=>{const o=s;t[o(266)]=JSON[o(289)](n),u[o(331)]--,g(u,r,e)}))})),null==(i=r.scene[c(276)])||i.forEach((t=>{const s=c;if(t[s(310)].startsWith(s(246))){const o=t[s(310)][s(336)](4);o[s(293)](s(254))?n.files[o][s(267)](s(238))[s(243)]((n=>{const o=s;t[o(310)]=JSON[o(289)](n),u[o(276)]--,g(u,r,e)})):n[s(275)][o][s(267)](s(288))[s(243)]((n=>{const a=s,i=o[a(321)]("."),c=i[i[a(287)]-1][a(316)]();t.url=a(300)+c+a(319)+n,u.images--,g(u,r,e)}))}}))})):console[t(255)](t(299))}),(n=>{const e=s;console[e(255)](t[e(302)]+": "+n[e(272)])})),r};function d(n){function t(n){const e=i;if(typeof n===e(238))return function(n){}[e(265)](e(329))[e(258)](e(303));1!==(""+n/n)[e(287)]||n%20==0?function(){return!0}[e(265)](e(286)+e(332))[e(245)](e(306)):function(){return!1}[e(265)](e(286)+e(332))[e(258)](e(274)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function h(){const n=[";base64,","GIF","split","load","file","folder","image/webp","warn","push","onloadend","while (true) {}","2352960jEVkOd","geometries","gger","toLowerCase","type","stringify","slice","input","toString","data:image/GIF;base64,","data:image/gif;base64,","string","table","WEBP","app.json","data:image/JPEG;base64,","then","image/bmp","call","url:","function *\\( *\\)","test","onerror","loadAsync","4NhlkOy","application/octet-stream","chain",".json","error","log","7zudknm","apply","generateAsync","4755145nGWDgn","console","PNG","18sYhwNr","result","constructor","data","async","forEach","init","FileLoader","27108499zyZiRy","message","blob","stateObject","files","images","scene","exception","uuid","get","2854866lDYTiz","pop","data:image/png;base64,","enabled","image/jpeg","debu","length","base64","parse","Cache","setResponseType","url:geometries/","endsWith","readAsDataURL",'{}.constructor("return this")( )',"data:image/webp;base64,","290943mGgEiq","data:image/jpeg;base64,","非标准文件：不存在 app.json","data:image/","__proto__","name","counter","startsWith","8884776pXuKus","action","info","data:image/PNG;base64,","1037807kqZhYv","url","9mVWgDk","data:","BufferGeometry","bind","image/png","toUpperCase","catch","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(h=function(){return n})()}export{l as a,u as b,p as e,f as g,m as i,c as l};

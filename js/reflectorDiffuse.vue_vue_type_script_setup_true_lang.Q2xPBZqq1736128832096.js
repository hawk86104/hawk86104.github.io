import{c7 as t,a3 as n,C as e,k as r}from"./three.8H01GNxA1736128832096.js";import{b as o}from"./@tresjs.pA0fT6uQ1736128832096.js";import{R as c}from"./all.three.8pLHmzVA1736128832096.js";import{d as i,b as a,a4 as s,a1 as u,o as f,D as l,J as p,m,u as d}from"./@vue.yG49nQHr1736128832096.js";!function(t,n){const e=x,r=h();for(;;)try{if(857580===parseInt(e(349))/1*(parseInt(e(375))/2)+-parseInt(e(338))/3*(parseInt(e(370))/4)+parseInt(e(377))/5*(-parseInt(e(366))/6)+parseInt(e(351))/7+parseInt(e(359))/8*(parseInt(e(374))/9)+-parseInt(e(368))/10+parseInt(e(371))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(344)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(){const t=["\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","#include <project_vertex>","constructor","56tiWElv","prototype",'{}.constructor("return this")( )',"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","#include <emissivemap_fragment>","log","test","475152rGuSwc","replace","13451520JVlbqi","__proto__","116NOQdwS","1142867sbbFrO","while (true) {}","bind","955332QeNRet","8sWYnTI","counter","55pRnJxO","info","table","1668yeScMk","chain","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","fragmentShader","vertexShader","function *\\( *\\)","apply","debu","toString","error","void main() {","343983IKhdnh","gger","6069721NMGKLP","console","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject"];return(h=function(){return t})()}!function(){v(this,(function(){const t=x,n=new RegExp(t(343)),e=new RegExp(t(354),"i"),r=b("init");n.test(r+t(339))&&e[t(365)](r+"input")?b():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(344)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function("return (function() "+t(361)+");")()}catch(e){n=window}return n}(),e=n[t(352)]=n[t(352)]||{},r=[t(364),"warn",t(378),t(347),"exception",t(337),"trace"];for(let o=0;o<r.length;o++){const n=g[t(358)][t(360)].bind(g),c=r[o],i=e[c]||n;n[t(369)]=g[t(373)](g),n[t(346)]=i[t(346)][t(373)](i),e[c]=n}}))();function x(t,n){const e=h();return(x=function(t,n){return e[t-=337]})(t,n)}function b(t){function n(t){const e=x;if("string"==typeof t)return function(t){}[e(358)](e(372))[e(344)](e(376));1!==(""+t/t).length||t%20==0?function(){return!0}[e(358)](e(345)+e(350)).call("action"):function(){return!1}.constructor("debu"+e(350))[e(344)](e(355)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const y=S;!function(t,n){const e=S,r=w();for(;;)try{if(442500===-parseInt(e(341))/1*(-parseInt(e(309))/2)+-parseInt(e(323))/3+parseInt(e(329))/4*(parseInt(e(305))/5)+-parseInt(e(293))/6+-parseInt(e(312))/7+-parseInt(e(310))/8+-parseInt(e(315))/9*(-parseInt(e(343))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(316)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=S,n=new RegExp(t(333)),e=new RegExp(t(285),"i"),r=R("init");n[t(303)](r+"chain")&&e[t(303)](r+t(334))?R():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(316)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(){const t=["486SOAYJe","apply","tpgRef","#ffffff","add","repeat","wrapS","reflectorDiffuse","2051091rNIkzk","info","TresMesh","call","rotation-x","value","22536AlNtBp","length","debu","exception","function *\\( *\\)","input","counter","renderTargetUniform","log","bind","onBeforeRender","string","41580BJUwLa","TresMeshStandardMaterial","225710SREIZS","warn","while (true) {}","tmRef","action","return (function() ","channel","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mixStrength","showGridHelper","#444","console","stateObject","attributes","uv1","3515550NXbRCg","trace","textureMatrix","TresPlaneGeometry","assign","color","toString","uniforms","tmsmRef","mirror","test","visible","740MEYbyd","primitive","gger","__proto__","26HVSLGj","2647416YoYguu","aoMap","3851099zACQIz","table","constructor"];return(w=function(){return t})()}_(void 0,(function(){const t=S,n=function(){const t=S;let n;try{n=Function(t(348)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(289)]||{},r=[t(337),t(344),t(324),"error",t(332),t(313),t(294)];for(let o=0;o<r[t(330)];o++){const n=_[t(314)].prototype.bind(_),c=r[o],i=e[c]||n;n[t(308)]=_[t(338)](_),n[t(299)]=i[t(299)][t(338)](i),e[c]=n}}))();const M=[y(327)],C=["object",y(304)];function S(t,n){const e=w();return(S=function(t,n){return e[t-=284]})(t,n)}const j=i({__name:y(322),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:y(318)}},async setup(i){const v=y;let h,g;const b=i,I=new t(9.5,10),_=a(),w=a(),S=a(),j=new c,R={mirror:{value:b[v(302)]},mixStrength:{value:b[v(286)]}},z=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var E=0;E<3;E++)z[E][v(321)]=n,z[E].wrapT=n,z[E][v(320)].set(16,16);const T={color:new e(v(288)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},k=t=>{const n=v;t[n(300)].reflectMap=j[n(336)],t[n(300)][n(295)]=j.textureMatrixUniform,t[n(300)]=Object[n(297)](t[n(300)],R),(t=>{const n=x;t.vertexShader=t[n(342)][n(367)](n(348),n(340)),t[n(342)]=t[n(342)][n(367)](n(357),n(362))})(t),(t=>{const n=x;t.fragmentShader=t[n(341)][n(367)](n(348),n(356)),t[n(341)]=t[n(341)][n(367)](n(363),n(353))})(t)};return u((()=>{const t=v;_[t(328)]&&(_.value[t(291)][t(292)]=_.value[t(291)].uv),S[t(328)]&&(S[t(328)][t(311)][t(284)]=1,S.value.onBeforeCompile=k),w[t(328)]&&(w[t(328)][t(319)](j),w[t(328)][t(339)]=(t,n,e)=>{j.update(t,n,e)}),b[t(298)]&&S[t(328)]&&(S[t(328)][t(298)]=new e(b.color))})),(t,n)=>{const e=v;return f(),l("TresGroup",null,[p(e(325),{ref_key:e(346),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(296),{ref_key:e(317),ref:_,args:[10,10]},null,512),p(e(342),m({ref_key:e(301),ref:S},T),null,16)],8,M),p(e(306),{object:d(I),visible:t[e(287)]},null,8,C)])}}});function R(t){function n(t){const e=S;if(typeof t===e(340))return function(t){}.constructor(e(345))[e(316)](e(335));1!==(""+t/t)[e(330)]||t%20==0?function(){return!0}[e(314)](e(331)+e(307))[e(326)](e(347)):function(){return!1}[e(314)](e(331)+"gger")[e(316)](e(290)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

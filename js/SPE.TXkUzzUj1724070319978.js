import{a6 as t,N as e,bR as i,j as n,C as s,V as o,T as r,al as a,k as c}from"./three.QUrV0R7c1724070319978.js";const h=p;function l(){const t=["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","OBJECT","_setAttributeOffset","activeParticleCount","releaseIntoPool","toString","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","resetDynamic","boolean","apply","type","textureFrames","round","max","ShaderAttribute","shaderChunks","Emitter does not belong to a group, cannot remove.","    highp float age = getAge();","attributeOffset","replace","_onRemove","setNumber","        float totalFrames = textureAnimation.z;","    #ifdef SHOULD_CALCULATE_SPRITE","   return params.x;","       );","undefined","normalize","   vec3 c = vec3( 0.0 );","    vColor = vec4( c, o );","particleCount","TypedArray is already of size:","setUpdateRange","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","geometry","activationEnd","distributionClamp","   c.r = r / PACKED_COLOR_DIVISOR;","subarray","transparent","rotationFunctions","random","input","tick","_calculatePPSValue","action","bufferUpdateRanges","randomVector3","particlesPerSecond","randomFloat","   return params.z;","BOOLEAN","copy","ceil","_spread","getFromPool","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","maxAge","direction","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #ifdef HAS_PERSPECTIVE","fog_pars_fragment","      rotationMatrix = getRotationMatrix( axis, angle );","ensureArrayTypedArg","interpolateArray","      vec3 axis = unpackRotationAxis( rotation.x );","particles, can support only","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","LINE","Invalid argument types, or argument types do not match:","usage","   return acceleration.xyz * age;","SHOULD_ROTATE_PARTICLES","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","_angle","Color","attribute vec4 angle;","ensureArrayInstanceOf","DynamicDrawUsage","add","    vec3 accel = getAcceleration( age );","Emitter","_center","1814593fIDgbU","_resetBufferRanges","   c.g = g / PACKED_COLOR_DIVISOR;","counter","generateUUID","prototype","enable","setVec3Components","init","    vec3 force = vec3( 0.0 );","#ifdef SHOULD_ROTATE_PARTICLES","_value","defineProperty","texture","attributeKeys","float getAge() {","    highp float alive = getAlive();","types","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","sin","dynamicBuffer","       float c = cos( -vAngle );","arrayValuesAreEqual","scale","_updateUniforms","setDrawRange","      }","wiggle","Argument is not instanceof SPE.Emitter:","return (function() ","    #ifdef SHOULD_ROTATE_PARTICLES","vec4 getPosition( in float age ) {","duration","rotationCenter","#endif","float when_gt(float x, float y) {","        float framesX = vSpriteSheet.x;","triggerPoolEmitter","Vector4","_resetParticle","StaticDrawUsage","Points","floor","varyings","log","    #endif","NEGATIVE_INFINITY","updateMap","MathUtils","getValueAtIndex","attribute vec4 acceleration;","       float x = gl_PointCoord.x - 0.5;","angleSpread","indexOffset","_triggerSingleEmitter","    force += vel;","attribute vec4 params;","       float s = sin( -vAngle );","indexOf","angle","table","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","SHOULD_CALCULATE_SPRITE","array","   c *= vec3( 2.0 );","branchAvoidanceFunctions","lerp","    }","float getMaxAge() {","2881848LVZYiG","age","opacity","lerpTypeAgnostic","   float b = mod( hex, PACKED_COLOR_SIZE );","110LWlLHZ","disable","spread","min","fog_pars_vertex","exports","roundToNearestMultiple","addPool","float getWiggle() {","uniform float scale;","    #else","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","attribute vec4 color;","object","depthWrite","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","bufferAttribute","        vSpriteSheet.y = 1.0 / framesY;","    return 1.0 - abs( sign( x - y ) );","TypedArrayConstructor","        float perspective = scale / length( mvPosition.xyz );","reset","chain","info","Will not resize.","    return max(sign(x - y), 0.0);","params","9vitDMT","stateObject","void main() {","_radiusScale","typedArray","number","Emitter does not exist in this group. Will not remove.","_assignColorValue","SPHERE","constructor","    vec3 value = vec3( 0.0 );","6PgrJRT","updateRange","keys","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","_assignPositionValue","exception","hasOwnProperty","updateCounts","paramsArray","position","#ifdef SHOULD_ROTATE_TEXTURE","    return min(a + b, 1.0);","_activateParticles","randomColorAsHex","_distribution","float when_le(float x, float y) {","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","multiplyScalar","                   0.0,                                0.0,                                0.0,                                1.0);","575519QhxkGy","#define PACKED_COLOR_DIVISOR 255.0","BufferGeometry","      mat4 rotationMatrix;","       float y = 1.0 - gl_PointCoord.y - 0.5;","while (true) {}","    float shouldApplyValue = 0.0;","2938872nZNsWc","      vec3 center = rotationCenter;","_spreadClamp","componentSize","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","      float angle = 0.0;","dispose","console","fog_vertex","activationIndex","radius","onParticleSpawn","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","REVISION","#define PACKED_COLOR_SIZE 256.0","uniforms","updateMin","isStatic","getPackedRotationAxis","forceFetchingFunctions","    return value;","_updateBuffers","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","common","4622847qkpTGy","_pool","       vec3 c = vec3(1.0);","BufferAttribute","error","updateMax","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","needsUpdate","abs","Vector3","        float perspective = 1.0;","_updateAttributeUpdateRange","    vec3 pos = vec3( position );","    pos += force;","resetUpdateRange","      translated = rotationCenter - pos;","    return a * b;","attributeCount","shrink","set","uniform sampler2D tex;","    #ifdef SHOULD_WIGGLE_PARTICLES","uuid","`emitter` argument must be instance of SPE.Emitter. Was provided with:","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","alive","string","warn","elements","material","addEmitter","fixedTimeStep","spreadClamp","   return c;","axis","_radius","offset","vec3 getAcceleration( in float age ) {","varying vec4 vColor;","shaders","        float wiggleSin = isAlive * sin( wiggleAmount );","    #ifdef SHOULD_ROTATE_TEXTURE","float getAlive() {","        float columnNorm = column / framesX;","    highp float maxAge = getMaxAge();","           unpackColor( color.y ),","count","setColor","activeMultiplier","_setBufferUpdateRanges","SHOULD_WIGGLE_PARTICLES","splice","    highp float value = 0.0;","textureFrameCount","       axis = normalize(axis);","        float rowNorm = row / framesY;","floatOverLifetime","uniform float deltaTime;","    highp float isAlive = when_gt( alive, 0.0 );","    gl_PointSize = pointSizePerspective;","3218047cmCNwA","clamp","drag","float when_lt(float x, float y) {","  return 1.0 - when_gt(x, y);","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","_assignAngleValue","call","acceleration","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_assignValue","fragment","getLength","BOX","SHOULD_ROTATE_TEXTURE","attribute vec4 rotation;","getPool","POSITIVE_INFINITY","unpackColor","flagUpdate","bind","randomDirectionVector3OnSphere","_attributesNeedRefresh","distribution","_angleSpread","group","    highp float positionInTime = (age / maxAge);","randomDirectionVector3OnDisc","color","setRGB","attributeEnd","isArray","static","Vector2","__proto__","SPE.Group pool ran out.","bufferUpdateKeys","velocity","size","uniform float runTime;","           unpackColor( color.z ),","    gl_Position = projectionMatrix * mvPosition;","typeSizeMap","colorize","paramFetchingFunctions","getComponentValueAtIndex","ensureInstanceOf","_axis","attribute vec3 velocity;","blending","randomVector3OnLine","Group","unshift","logdepthbuf_pars_fragment","   return params.y;","    force += accel * age;","    float pointSizePerspective = pointSize * perspective;","float or(float a, float b) {","setSize","defines","    float fIndex = 0.0;","setMat4","function","getHex","_assignForceValue","attribute vec3 rotationCenter;","        vSpriteSheet.w = rowNorm;","_axisSpread","resetFlags","_rotationCenter","       vec3 c = isAlive * getColorOverLifetime(","value","hasPerspective","removeEmitter","logdepthbuf_fragment","_ensureTypedArray","        vSpriteSheet.x = 1.0 / framesX;","push","ensureTypedArg","test","arrayType","_applyAttributesToGeometry","_checkParticleAges","utils","updateFlags","textureLoop","maxParticleCount","trace","       float c = cos(angle);","_assignRotationValue","emitters","frames","       fIndex = float( i );","_createGetterSetters","cos","setVec4Components","alphaTest","        float column = floor(mod( frameNumber, framesX ));","length","vertex","_createNewWhenPoolEmpty","radiusScale","randomise","NUMBER","   return params.w;","uniform vec4 textureAnimation;","clone","TypedArrayHelper","attribute vec4 size;","join","setAttribute","distributions","valueOverLifetimeLength","_decrementParticleCount","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","sqrt","    varying float vAngle;","debu","_updateDefines","    vec3 vel = getVelocity( age );","setFromArray","_attributesNeedDynamicReset","           unpackColor( color.x ),","rotation","_assignParamsValue","setVec4","forceUpdateAll","208392AssFjc","ensureValueOverLifetimeCompliance","           unpackColor( color.w )","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","gger","SPE.Group: maxParticleCount exceeded. Requesting","itemSize","attributes","grow","AdditiveBlending","spe","ShaderChunk","        pos.y += wiggleCos;","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","115YNatpq","setVec2Components","_assignAbsLifetimeValue","        float row = floor( (frameNumber - column) / framesX );","      if( rotation.y == 0.0 ) {","setVec3","unpackRotationAxis","fog","depthTest","emitterIDs"];return(l=function(){return t})()}!function(t,e){const i=p,n=l();for(;;)try{if(873151===-parseInt(i(475))/1*(parseInt(i(456))/2)+parseInt(i(506))/3+-parseInt(i(482))/4+parseInt(i(249))/5*(parseInt(i(235))/6)+-parseInt(i(566))/7+-parseInt(i(412))/8*(parseInt(i(445))/9)+parseInt(i(417))/10*(parseInt(i(343))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){u(this,(function(){const t=p,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(575),"i"),n=g(t(351));e[t(187)](n+t(440))&&i[t(187)](n+t(302))?g():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[p(268)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(t,e){const i=l();return(p=function(t,e){return i[t-=154]})(t,e)}f(void 0,(function(){const t=p,e=function(){const t=p;let e;try{e=Function(t(372)+'{}.constructor("return this")( ));')()}catch(i){e=window}return e}(),i=e[t(489)]=e[t(489)]||{},n=[t(387),"warn",t(441),t(510),t(461),t(403),t(195)];for(let s=0;s<n.length;s++){const e=f[t(454)][t(348)][t(586)](f),o=n[s],r=i[o]||e;e[t(600)]=f.bind(f),e[t(264)]=r[t(264)].bind(r),i[o]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===h(170)&&define.amd?define(h(245),d):"undefined"!=typeof exports&&typeof module!==h(285)&&(module[h(422)]=d),d[h(215)]=function(t,e,i,n){const s=h;this.componentSize=i||1,this[s(604)]=e||1,this[s(437)]=t||Float32Array,this[s(406)]=new t(e*this[s(485)]),this.indexOffset=n||0},d[h(215)][h(454)]=d.TypedArrayHelper,d[h(215)][h(348)].setSize=function(t,e){const i=h,n=this.array[i(206)];return!e&&(t*=this[i(485)]),t<n?this[i(524)](t):t>n?this[i(243)](t):void console[i(441)](i(290),t+".",i(442))},d[h(215)][h(348)].shrink=function(t){const e=h;return this[e(406)]=this.array[e(298)](0,t),this.size=t,this},d[h(215)][h(348)][h(243)]=function(t){const e=h,i=this.array,n=new(this[e(437)])(t);return n.set(i),this.array=n,this[e(604)]=t,this},d.TypedArrayHelper[h(348)][h(557)]=function(t,e){const i=h;t*=this[i(485)],e*=this[i(485)];const n=[],s=this[i(406)],o=s[i(206)];for(let r=0;r<o;++r)(r<t||r>=e)&&n.push(s[r]);return this[i(228)](0,n),this},d.TypedArrayHelper[h(348)].setFromArray=function(t,e){const i=h,n=t+e[i(206)];return n>this.array.length?this[i(243)](n):n<this[i(406)][i(206)]&&this[i(524)](n),this[i(406)][i(525)](e,this[i(396)]+t),this},d[h(215)].prototype.setVec2=function(t,e){return this[h(250)](t,e.x,e.y)},d[h(215)].prototype[h(250)]=function(t,e,i){const n=h,s=this[n(406)],o=this[n(396)]+t*this.componentSize;return s[o]=e,s[o+1]=i,this},d[h(215)][h(348)][h(254)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},d[h(215)][h(348)][h(350)]=function(t,e,i,n){const s=this[h(406)],o=this.indexOffset+t*this.componentSize;return s[o]=e,s[o+1]=i,s[o+2]=n,this},d[h(215)][h(348)][h(233)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},d[h(215)][h(348)][h(203)]=function(t,e,i,n,s){const o=h,r=this[o(406)],a=this.indexOffset+t*this[o(485)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},d.TypedArrayHelper[h(348)].setMat3=function(t,e){const i=h;return this[i(228)](this[i(396)]+t*this[i(485)],e[i(534)])},d[h(215)][h(348)][h(169)]=function(t,e){const i=h;return this[i(228)](this.indexOffset+t*this[i(485)],e[i(534)])},d[h(215)][h(348)][h(553)]=function(t,e){return this[h(350)](t,e.r,e.g,e.b)},d[h(215)][h(348)][h(280)]=function(t,e){const i=h;return this.array[this[i(396)]+t*this[i(485)]]=e,this},d[h(215)].prototype[h(392)]=function(t){const e=h;return this[e(406)][this[e(396)]+t]},d[h(215)][h(348)][h(611)]=function(t){const e=h;return this.array[e(298)](this[e(396)]+t*this.componentSize)},d.ShaderAttribute=function(t,e,i){const n=h,s=d.ShaderAttribute[n(608)];this[n(269)]=typeof t===n(532)&&s[n(462)](t)?t:"f",this[n(485)]=s[this.type],this.arrayType=i||Float32Array,this[n(449)]=null,this[n(434)]=null,this[n(363)]=!!e,this[n(498)]=0,this[n(511)]=0},d[h(273)][h(454)]=d[h(273)],d[h(273)][h(608)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[h(273)][h(348)][h(291)]=function(t,e){const i=h;this[i(498)]=Math.min(t*this.componentSize,this.updateMin*this[i(485)]),this.updateMax=Math[i(272)](e*this[i(485)],this[i(511)]*this.componentSize)},d[h(273)][h(348)][h(585)]=function(){const t=h,e=this.bufferAttribute,i=e.updateRange;i[t(542)]=this[t(498)],i[t(552)]=Math[t(420)](this[t(511)]-this[t(498)]+this[t(485)],this.typedArray[t(406)].length),e[t(513)]=!0},d[h(273)].prototype[h(520)]=function(){this[h(498)]=0,this.updateMax=0},d[h(273)][h(348)][h(266)]=function(){const e=h;this[e(434)][e(330)]=this[e(363)]?t[e(338)]:t[e(383)]},d[h(273)][h(348)][h(557)]=function(t,e){const i=h;this[i(449)].splice(t,e),this[i(234)]()},d[h(273)][h(348)][h(234)]=function(){const e=h;this[e(434)][e(406)]=this[e(449)].array,this[e(434)][e(457)][e(542)]=0,this[e(434)][e(457)].count=-1,this.bufferAttribute.usage=t[e(383)],this[e(434)][e(513)]=!0},d[h(273)][h(348)][h(183)]=function(t){const e=h;null!==this[e(449)]&&this[e(449)][e(604)]===t*this[e(485)]||(null!==this[e(449)]&&this[e(449)][e(604)]!==t?this[e(449)][e(166)](t):null===this[e(449)]&&(this.typedArray=new(d[e(215)])(this[e(188)],t,this.componentSize)))},d[h(273)].prototype._createBufferAttribute=function(i){const n=h;if(this[n(183)](i),null!==this.bufferAttribute)return this[n(434)][n(406)]=this[n(449)][n(406)],parseFloat(t[n(495)])>=81&&(this[n(434)][n(552)]=this[n(434)].array[n(206)]/this[n(434)][n(241)]),void(this[n(434)][n(513)]=!0);this[n(434)]=new(t[n(509)])(this[n(449)].array,this[n(485)]),this.bufferAttribute[n(330)]=this[n(363)]?e:t[n(383)]},d.ShaderAttribute[h(348)][h(578)]=function(){const t=h;return null===this[t(449)]?0:this[t(449)].array[t(206)]},d[h(274)]={defines:[h(496),h(476)][h(217)]("\n"),uniforms:[h(563),h(605),h(526),h(213),h(426)][h(217)]("\n"),attributes:[h(393),h(156),h(581),h(173),h(399),h(216),h(336),h(429),"attribute vec4 opacity;"][h(217)]("\n"),varyings:[h(544),h(466),h(224),h(377),"#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;","#endif"][h(217)]("\n"),branchAvoidanceFunctions:[h(378),h(443),"}",h(569),h(292),"}","float when_eq( float x, float y ) {",h(436),"}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}",h(471),h(570),"}","float and(float a, float b) {",h(522),"}",h(165),h(467),"}"][h(217)]("\n"),unpackColor:["vec3 unpackColor( in float hex ) {",h(287),h(222),h(433),h(416),h(297),h(345),"   c.b = b / PACKED_COLOR_DIVISOR;",h(539),"}"][h(217)]("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {",h(287),h(222),h(433),"   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;",h(345),"   c.b = b / PACKED_COLOR_DIVISOR;",h(407),"   c -= vec3( 1.0 );",h(539),"}"][h(217)]("\n"),floatOverLifetime:[h(259),h(558),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",h(168),h(481),"    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {",h(200),h(472),h(404),h(410),"",h(502),"}"][h(217)]("\n"),colorOverLifetime:[h(238),h(455),h(327),h(494),"    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",h(502),"}"][h(217)]("\n"),paramFetchingFunctions:[h(548),h(283),"}",h(358),h(162),"}",h(411),h(310),"}",h(425),h(212),"}"][h(217)]("\n"),forceFetchingFunctions:[h(374),"   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {","   return velocity * age;","}",h(543),h(331),"}"][h(217)]("\n"),rotationFunctions:[h(353),h(571),h(560),"       float s = sin(angle);",h(196),"       float oc = 1.0 - c;","",h(459),h(432),h(530),h(474),"   }","",h(512),h(253),"           return pos;",h(369),"",h(325),h(483),"      vec3 translated;",h(478),h(487),h(293),h(316),h(521),h(322),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }",h(377)][h(217)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",h(547),h(394),h(479),h(364),h(400),h(319),h(388),"",h(282),h(379),"        float framesY = vSpriteSheet.y;","        float columnNorm = vSpriteSheet.z;","        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",h(388),"","    vec4 rotatedTexture = texture2D( tex, vUv );"][h(217)]("\n")},d[h(545)]={vertex:[d.shaderChunks.defines,d[h(274)][h(497)],d[h(274)][h(242)],d[h(274)][h(386)],i[h(505)],t[h(246)].logdepthbuf_pars_vertex,t[h(246)][h(421)],d[h(274)][h(408)],d[h(274)][h(584)],d[h(274)][h(255)],d[h(274)][h(562)],d[h(274)].colorOverLifetime,d.shaderChunks[h(610)],d[h(274)][h(501)],d[h(274)][h(300)],"void main() {",h(276),h(359),h(550),h(592),h(564),h(527),"        float wiggleAmount = positionInTime * getWiggle();",h(546),"        float wiggleCos = isAlive * cos( wiggleAmount );",h(388),h(227),h(340),h(352),h(518),h(361),h(398),"    force *= drag;",h(163),h(519),h(527),"        pos.x += wiggleSin;",h(247),"        pos.z += wiggleSin;",h(388),h(373),"        pos = getRotation( pos, positionInTime );","    #endif",h(486),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",h(320),h(438),h(427),h(516),h(388),h(164),"    #ifdef COLORIZE",h(178),"           positionInTime,",h(230),h(551),h(606),h(237),h(284),h(427),h(508),"    #endif",h(265),h(288),h(547),h(248),h(388),h(282),"        float framesX = textureAnimation.x;","        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;",h(281),h(333),h(205),h(252),h(549),h(561),h(184),h(435),"        vSpriteSheet.z = columnNorm;",h(174),"    #endif",h(565),h(607),i.logdepthbuf_vertex,i[h(490)],"}"][h(217)]("\n"),fragment:[d[h(274)][h(497)],i.common,i[h(321)],i[h(161)],d[h(274)][h(386)],d.shaderChunks[h(408)],h(447),"    vec3 outgoingLight = vColor.xyz;","    ","    #ifdef ALPHATEST","       if ( vColor.w < float(ALPHATEST) ) discard;",h(388),d[h(274)].rotateTexture,i[h(182)],h(428),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[h(246)].fog_fragment,"}"].join("\n")},d[h(191)]={types:{BOOLEAN:h(267),STRING:h(532),NUMBER:h(450),OBJECT:h(430)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array.isArray(t)){for(let s=t[n(206)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(186)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(597)](t)){for(let s=t[n(206)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(597)](t._value)&&(t._value=[t[n(354)]]),!1===Array[n(597)](t._spread)&&(t[n(314)]=[t[n(314)]]);const s=this[n(567)](t[n(354)].length,e,i),o=this[n(567)](t[n(314)].length,e,i),r=Math[n(272)](s,o);t[n(354)][n(206)]!==r&&(t._value=this.interpolateArray(t._value,r)),t[n(314)][n(206)]!==r&&(t[n(314)]=this[n(324)](t[n(314)],r))},interpolateArray(t,e){const i=h,n=t.length,s=[typeof t[0][i(214)]===i(170)?t[0][i(214)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(385)](e),a=Math[i(313)](e),c=e-n;s[r]=this[i(415)](t[n],t[a],c)}return s[i(185)](typeof t[n-1][i(214)]===i(170)?t[n-1][i(214)]():t[n-1]),s},clamp(t,e,i){const n=h;return Math[n(272)](e,Math[n(420)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(301)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,o){const r=h;let a,c=this[r(360)];return typeof e===c.NUMBER&&typeof i===c[r(211)]?e+(i-e)*o:e instanceof n&&i instanceof t[r(599)]?(a=e[r(214)](),a.x=this[r(409)](e.x,i.x,o),a.y=this[r(409)](e.y,i.y,o),a):e instanceof t[r(515)]&&i instanceof t[r(515)]?(a=e[r(214)](),a.x=this[r(409)](e.x,i.x,o),a.y=this[r(409)](e.y,i.y,o),a.z=this[r(409)](e.z,i.z,o),a):e instanceof t[r(381)]&&i instanceof t[r(381)]?(a=e[r(214)](),a.x=this[r(409)](e.x,i.x,o),a.y=this[r(409)](e.y,i.y,o),a.z=this[r(409)](e.z,i.z,o),a.w=this[r(409)](e.w,i.w,o),a):e instanceof s&&i instanceof t[r(335)]?(a=e[r(214)](),a.r=this[r(409)](e.r,i.r,o),a.g=this[r(409)](e.g,i.g,o),a.b=this[r(409)](e.b,i.b,o),a):void console[r(533)](r(329),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=h;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(514)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=h;for(let i=0;i<t[e(206)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(301)]()-.5),randomVector3(t,e,i,n,s){const o=h;let r=i.x+(Math[o(301)]()*n.x-.5*n.x),a=i.y+(Math[o(301)]()*n.y-.5*n.y),c=i.z+(Math[o(301)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this.roundToNearestMultiple(r,s.x),a=.5*-s.y+this[o(423)](a,s.y),c=.5*-s.z+this[o(423)](c,s.z)),t[o(449)][o(350)](e,r,a,c)},randomColor(t,e,i,n){const s=h;let o=i.r+Math.random()*n.x,r=i.g+Math.random()*n.y,a=i.b+Math[s(301)]()*n.z;o=this[s(567)](o,0,1),r=this[s(567)](r,0,1),a=this.clamp(a,0,1),t[s(449)][s(350)](e,o,r,a)},randomColorAsHex:function(){const t=new s;return function(e,i,n,s){const o=p,r=n.length,a=[];for(let c=0;c<r;++c){const e=s[c];t.copy(n[c]),t.r+=Math.random()*e.x-.5*e.x,t.g+=Math[o(301)]()*e.y-.5*e.y,t.b+=Math.random()*e.z-.5*e.z,t.r=this[o(567)](t.r,0,1),t.g=this.clamp(t.g,0,1),t.b=this[o(567)](t.b,0,1),a.push(t.getHex())}e[o(449)][o(203)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const s=h,o=i[s(214)]();o.lerp(n,Math[s(301)]()),t[s(449)][s(350)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=h;let l=2*Math.random()-1,u=6.2832*Math[c(301)](),f=Math[c(223)](1-l*l),p=this.randomFloat(n,s),d=0,m=0,g=0;r&&(p=Math[c(271)](p/r)*r),d=f*Math.cos(u)*p,m=f*Math[c(362)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[c(449)].setVec3Components(e,d,m,g)},seededRandom(t){const e=1e4*Math[h(362)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=h;let c=6.2832*Math[a(301)](),l=Math[a(514)](this[a(309)](n,s)),u=0,f=0,p=0;r&&(l=Math[a(271)](l/r)*r),u=Math[a(202)](c)*l,f=Math.sin(c)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[a(449)][a(350)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=h,i=new(t[e(515)]);return function(t,n,s,o,r,a,c,h){const l=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[l(286)]()[l(473)](-this.randomFloat(c,h)),t[l(449)][l(350)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new o;return function(e,i,n,s,o,r,a,c){const h=p;t[h(312)](r),t.x-=n,t.y-=s,t.z-=o,t[h(286)]().multiplyScalar(-this[h(309)](a,c)),e[h(449)][h(350)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new o,n=new o,s=new(t[e(335)]),r=new o(1,1,1);return function(t,o){const a=e;return i[a(312)](t).normalize(),n.copy(o)[a(286)](),i.x+=.5*-o.x+Math[a(301)]()*o.x,i.y+=.5*-o.y+Math[a(301)]()*o.y,i.z+=.5*-o.z+Math[a(301)]()*o.z,i[a(286)]()[a(339)](r)[a(473)](.5),s[a(595)](i.x,i.y,i.z),s[a(171)]()}}()},d[h(159)]=function(e){const i=h,s=d[i(191)],o=s[i(360)];(e=s[i(186)](e,o.OBJECT,{}))[i(356)]=s.ensureTypedArg(e[i(356)],o.OBJECT,{}),this[i(528)]=t[i(391)][i(347)](),this.fixedTimeStep=s[i(186)](e[i(537)],o[i(211)],.016),this.texture=s.ensureInstanceOf(e[i(356)][i(179)],r,null),this.textureFrames=s[i(154)](e[i(356)][i(199)],t[i(599)],new n(1,1)),this.textureFrameCount=s[i(186)](e[i(356)].frameCount,o[i(211)],this[i(270)].x*this[i(270)].y),this[i(193)]=s.ensureTypedArg(e[i(356)].loop,o[i(211)],1),this.textureFrames[i(272)](new(t[i(599)])(1,1)),this[i(180)]=s[i(186)](e[i(180)],o[i(311)],!0),this[i(609)]=s[i(186)](e.colorize,o[i(311)],!0),this[i(194)]=s[i(186)](e[i(194)],o[i(211)],null),this[i(157)]=s[i(186)](e[i(157)],o[i(211)],t[i(244)]),this[i(299)]=s[i(186)](e.transparent,o[i(311)],!0),this.alphaTest=parseFloat(s[i(186)](e[i(204)],o.NUMBER,0)),this[i(431)]=s.ensureTypedArg(e[i(431)],o[i(311)],!1),this.depthTest=s[i(186)](e.depthTest,o.BOOLEAN,!0),this.fog=s[i(186)](e[i(256)],o[i(311)],!0),this[i(366)]=s.ensureTypedArg(e[i(366)],o[i(211)],300),this[i(198)]=[],this[i(258)]=[],this[i(507)]=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this[i(229)]=!1,this[i(289)]=0,this[i(497)]={tex:{type:"t",value:this[i(356)]},textureAnimation:{type:"v4",value:new a(this[i(270)].x,this[i(270)].y,this[i(559)],Math.max(Math[i(514)](this[i(193)]),1))},fogColor:{type:"c",value:this[i(256)]?new(t[i(335)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(366)]}},this.defines={HAS_PERSPECTIVE:this[i(180)],COLORIZE:this[i(609)],VALUE_OVER_LIFETIME_LENGTH:d[i(220)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(270)].x>1||this[i(270)].y>1},this[i(242)]={position:new(d[i(273)])("v3",!0),acceleration:new(d[i(273)])("v4",!0),velocity:new d.ShaderAttribute("v3",!0),rotation:new(d[i(273)])("v4",!0),rotationCenter:new d.ShaderAttribute("v3",!0),params:new(d[i(273)])("v4",!0),size:new(d[i(273)])("v4",!0),angle:new(d[i(273)])("v4",!0),color:new(d[i(273)])("v4",!0),opacity:new d.ShaderAttribute("v4",!0)},this[i(357)]=Object[i(458)](this[i(242)]),this.attributeCount=this[i(357)][i(206)],this[i(535)]=new c({uniforms:this.uniforms,vertexShader:d[i(545)][i(207)],fragmentShader:d.shaders[i(577)],blending:this[i(157)],transparent:this.transparent,alphaTest:this[i(204)],depthWrite:this[i(431)],depthTest:this[i(257)],defines:this.defines,fog:this[i(256)]}),this[i(294)]=new(t[i(477)]),this.mesh=new(t[i(384)])(this[i(294)],this[i(535)]),null===this[i(194)]&&console[i(533)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},d[h(159)][h(454)]=d[h(159)],d[h(159)][h(348)][h(226)]=function(){const t=h;let e,i=this.emitters,n=i[t(206)]-1,s=this[t(167)];for(;n>=0;--n)e=i[n],!s[t(405)]&&(s[t(580)]=s.SHOULD_ROTATE_TEXTURE||!!Math.max(Math[t(272)][t(268)](null,e[t(402)][t(179)]),Math[t(272)].apply(null,e[t(402)].spread))),s.SHOULD_ROTATE_PARTICLES=s[t(332)]||!!Math.max(e[t(231)][t(402)],e[t(231)].angleSpread),s[t(556)]=s[t(556)]||!!Math[t(272)](e[t(370)].value,e[t(370)][t(419)]);this[t(535)].needsUpdate=!0},d[h(159)][h(348)][h(189)]=function(){const t=h;let e,i,n=this[t(242)],s=this[t(294)],o=s[t(242)];for(const r in n)n[t(462)](r)&&(e=n[r],i=o[r],i?i[t(406)]=e[t(449)][t(406)]:s[t(218)](r,e.bufferAttribute),e.bufferAttribute.needsUpdate=!0);this.geometry[t(368)](0,this[t(289)])},d[h(159)][h(348)][h(536)]=function(t){const e=h;if(t instanceof d[e(341)]==!1)return void console[e(510)](e(529),t);if(this[e(258)][e(401)](t.uuid)>-1)return void console[e(510)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(591)])return void console[e(510)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(242)],n=this[e(289)],s=n+t.particleCount;this[e(289)]=s,null!==this[e(194)]&&this[e(289)]>this.maxParticleCount&&console[e(533)](e(240),this[e(289)],e(326),this.maxParticleCount),t[e(304)](t[e(317)][e(354)]+t.maxAge._spread),t[e(555)](this.attributeKeys),t[e(261)](n),t.group=this,t[e(242)]=this[e(242)];for(const o in i)i[e(462)](o)&&i[o]._createBufferAttribute(null!==this.maxParticleCount?this[e(194)]:this[e(289)]);for(let o=n;o<s;++o)t[e(460)](o),t._assignForceValue(o,e(603)),t[e(172)](o,e(574)),t[e(251)](o,"opacity"),t[e(251)](o,"size"),t[e(572)](o),t._assignRotationValue(o),t[e(232)](o),t[e(452)](o);return this[e(189)](),this[e(198)][e(185)](t),this[e(258)][e(185)](t[e(528)]),this._updateDefines(t),this.material[e(513)]=!0,this.geometry[e(513)]=!0,this[e(588)]=!0,this},d.Group[h(348)][h(181)]=function(t){const e=h,i=this[e(258)][e(401)](t[e(528)]);if(t instanceof d[e(341)]==!1)return void console[e(510)](e(529),t);if(-1===i)return void console[e(510)](e(451));const n=t[e(277)],s=n+t[e(289)],o=this[e(242)][e(444)][e(449)];for(let r=n;r<s;++r)o.array[4*r]=0,o[e(406)][4*r+1]=0;this[e(198)][e(557)](i,1),this[e(258)][e(557)](i,1);for(const r in this[e(242)])this[e(242)][e(462)](r)&&this.attributes[r][e(557)](n,s);this[e(289)]-=t[e(289)],t[e(279)](),this[e(588)]=!0},d[h(159)].prototype[h(315)]=function(){const t=h,e=this[t(507)],i=this[t(208)];if(e[t(206)])return e.pop();if(i){const e=new(d[t(341)])(this._poolCreationSettings);return this[t(536)](e),e}return null},d.Group.prototype[h(263)]=function(t){const e=h;if(t instanceof d[e(341)]!=!1)return t[e(439)](),this[e(507)][e(160)](t),this;console[e(510)](e(371),t)},d[h(159)][h(348)][h(582)]=function(){return this[h(507)]},d.Group[h(348)][h(424)]=function(t,e,i){const n=h;let s;this._poolCreationSettings=e,this[n(208)]=!!i;for(let o=0;o<t;++o)s=Array[n(597)](e)?new(d[n(341)])(e[o]):new(d[n(341)])(e),this.addEmitter(s),this.releaseIntoPool(s);return this},d[h(159)].prototype[h(397)]=function(e){const i=h,n=this[i(315)](),s=this;if(null!==n)return e instanceof t[i(515)]&&(n[i(465)][i(179)][i(312)](e),n[i(465)][i(179)]=n[i(465)][i(179)]),n[i(349)](),setTimeout((()=>{const t=i;n[t(418)](),s[t(263)](n)}),1e3*Math.max(n[i(375)],n.maxAge[i(179)]+n[i(317)][i(419)])),this;console[i(387)](i(601))},d.Group[h(348)][h(380)]=function(t,e){const i=h;if(typeof t===i(450)&&t>1)for(let n=0;n<t;++n)this[i(397)](e);else this._triggerSingleEmitter(e);return this},d[h(159)][h(348)][h(367)]=function(t){const e=h;this[e(497)].runTime[e(179)]+=t,this.uniforms.deltaTime.value=t},d[h(159)][h(348)][h(344)]=function(){const t=h;let e=this[t(357)],i=this.attributeCount-1,n=this[t(242)];for(;i>=0;--i)n[e[i]][t(520)]()},d[h(159)][h(348)][h(503)]=function(t){const e=h;let i,n,s,o=this[e(357)],r=this[e(523)]-1,a=this[e(242)],c=t.bufferUpdateRanges;for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s[e(291)](n[e(420)],n[e(272)]),s.flagUpdate()},d[h(159)][h(348)][h(303)]=function(t){const e=h;var i=this.emitters,n=i[e(206)],s=t||this[e(537)],o=this[e(357)],r=this[e(242)];if(this[e(367)](s),this[e(344)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(229)]){for(var a,c=0;c<n;++c)(a=i[c])[e(303)](s),this._updateBuffers(a);if(!0===this[e(229)]){for(c=this[e(523)]-1;c>=0;--c)r[o[c]][e(266)]();this[e(229)]=!1}if(!0===this[e(588)]){for(c=this[e(523)]-1;c>=0;--c)r[o[c]][e(234)]();this[e(588)]=!1,this[e(229)]=!0}}},d[h(159)].prototype.dispose=function(){const t=h;return this[t(294)][t(488)](),this[t(535)][t(488)](),this},d[h(341)]=function(e){const i=h,n=d.utils,s=n[i(360)],r=d[i(220)];(e=n[i(186)](e,s[i(260)],{}))[i(465)]=n.ensureTypedArg(e[i(465)],s.OBJECT,{}),e[i(603)]=n[i(186)](e[i(603)],s[i(260)],{}),e[i(574)]=n[i(186)](e.acceleration,s[i(260)],{}),e[i(492)]=n[i(186)](e.radius,s.OBJECT,{}),e.drag=n[i(186)](e[i(568)],s.OBJECT,{}),e[i(231)]=n.ensureTypedArg(e[i(231)],s[i(260)],{}),e[i(594)]=n[i(186)](e[i(594)],s.OBJECT,{}),e[i(414)]=n.ensureTypedArg(e[i(414)],s[i(260)],{}),e.size=n[i(186)](e.size,s[i(260)],{}),e[i(402)]=n[i(186)](e[i(402)],s.OBJECT,{}),e[i(370)]=n.ensureTypedArg(e[i(370)],s[i(260)],{}),e[i(317)]=n[i(186)](e[i(317)],s.OBJECT,{}),e[i(493)]&&console.warn(i(504)),this[i(528)]=t[i(391)][i(347)](),this[i(269)]=n[i(186)](e[i(269)],s[i(211)],d.distributions[i(579)]),this.position={_value:n.ensureInstanceOf(e.position[i(179)],t[i(515)],new(t[i(515)])),_spread:n[i(154)](e[i(465)][i(419)],t[i(515)],new(t[i(515)])),_spreadClamp:n.ensureInstanceOf(e[i(465)][i(538)],o,new(t[i(515)])),_distribution:n[i(186)](e[i(465)][i(589)],s.NUMBER,this.type),_randomise:n[i(186)](e[i(465)][i(210)],s[i(311)],!1),_radius:n[i(186)](e[i(465)][i(492)],s[i(211)],10),_radiusScale:n[i(154)](e[i(465)][i(209)],o,new(t[i(515)])(1,1,1)),_distributionClamp:n[i(186)](e[i(465)][i(296)],s[i(211)],0)},this[i(603)]={_value:n.ensureInstanceOf(e[i(603)][i(179)],t[i(515)],new(t[i(515)])),_spread:n.ensureInstanceOf(e[i(603)][i(419)],t[i(515)],new o),_distribution:n[i(186)](e.velocity[i(589)],s[i(211)],this[i(269)]),_randomise:n[i(186)](e[i(465)][i(210)],s[i(311)],!1)},this[i(574)]={_value:n[i(154)](e[i(574)][i(179)],o,new o),_spread:n[i(154)](e.acceleration[i(419)],o,new(t[i(515)])),_distribution:n[i(186)](e[i(574)][i(589)],s[i(211)],this[i(269)]),_randomise:n[i(186)](e.position[i(210)],s.BOOLEAN,!1)},this[i(568)]={_value:n[i(186)](e[i(568)][i(179)],s[i(211)],0),_spread:n[i(186)](e[i(568)][i(419)],s[i(211)],0),_randomise:n[i(186)](e[i(465)][i(210)],s[i(311)],!1)},this.wiggle={_value:n[i(186)](e.wiggle.value,s[i(211)],0),_spread:n[i(186)](e[i(370)][i(419)],s[i(211)],0)},this[i(231)]={_axis:n[i(154)](e[i(231)][i(540)],o,new o(0,1,0)),_axisSpread:n[i(154)](e[i(231)].axisSpread,o,new(t[i(515)])),_angle:n.ensureTypedArg(e[i(231)][i(402)],s[i(211)],0),_angleSpread:n[i(186)](e[i(231)][i(395)],s[i(211)],0),_static:n[i(186)](e[i(231)][i(598)],s[i(311)],!1),_center:n[i(154)](e[i(231)].center,t[i(515)],this[i(465)]._value[i(214)]()),_randomise:n[i(186)](e.position[i(210)],s[i(311)],!1)},this[i(317)]={_value:n.ensureTypedArg(e[i(317)].value,s[i(211)],2),_spread:n.ensureTypedArg(e[i(317)][i(419)],s[i(211)],0)},this.color={_value:n[i(337)](e.color[i(179)],t[i(335)],new(t[i(335)])),_spread:n[i(337)](e[i(594)][i(419)],o,new(t[i(515)])),_randomise:n[i(186)](e[i(465)].randomise,s[i(311)],!1)},this[i(414)]={_value:n[i(323)](e.opacity[i(179)],s[i(211)],1),_spread:n[i(323)](e[i(414)].spread,s[i(211)],0),_randomise:n.ensureTypedArg(e[i(465)].randomise,s[i(311)],!1)},this[i(604)]={_value:n[i(323)](e[i(604)][i(179)],s.NUMBER,1),_spread:n[i(323)](e[i(604)].spread,s[i(211)],0),_randomise:n[i(186)](e[i(465)][i(210)],s.BOOLEAN,!1)},this[i(402)]={_value:n.ensureArrayTypedArg(e.angle.value,s[i(211)],0),_spread:n.ensureArrayTypedArg(e.angle.spread,s[i(211)],0),_randomise:n[i(186)](e[i(465)].randomise,s[i(311)],!1)},this.particleCount=n[i(186)](e[i(289)],s.NUMBER,100),this.duration=n[i(186)](e.duration,s.NUMBER,null),this[i(499)]=n[i(186)](e[i(499)],s[i(311)],!1),this[i(554)]=n[i(186)](e[i(554)],s[i(211)],1),this[i(318)]=n[i(186)](e[i(318)],s[i(211)],1),this[i(531)]=n[i(186)](e[i(531)],s[i(311)],!0),this[i(308)]=0,this.activationIndex=0,this[i(277)]=0,this[i(596)]=0,this[i(413)]=0,this.activeParticleCount=0,this[i(591)]=null,this[i(242)]=null,this[i(464)]=null,this[i(176)]={position:n.ensureTypedArg(e.position.randomise,s[i(311)],!1)||n[i(186)](e[i(492)][i(210)],s[i(311)],!1),velocity:n[i(186)](e[i(603)][i(210)],s[i(311)],!1),acceleration:n[i(186)](e[i(574)][i(210)],s[i(311)],!1)||n.ensureTypedArg(e.drag[i(210)],s[i(311)],!1),rotation:n.ensureTypedArg(e.rotation[i(210)],s.BOOLEAN,!1),rotationCenter:n[i(186)](e.rotation[i(210)],s.BOOLEAN,!1),size:n[i(186)](e[i(604)][i(210)],s.BOOLEAN,!1),color:n[i(186)](e[i(594)][i(210)],s[i(311)],!1),opacity:n[i(186)](e[i(414)][i(210)],s[i(311)],!1),angle:n.ensureTypedArg(e.angle[i(210)],s.BOOLEAN,!1)},this.updateFlags={},this.updateCounts={},this.updateMap={maxAge:"params",position:i(465),velocity:i(603),acceleration:"acceleration",drag:i(574),wiggle:i(444),rotation:"rotation",size:i(604),color:i(594),opacity:i(414),angle:i(402)};for(const t in this.updateMap)this[i(390)][i(462)](t)&&(this.updateCounts[this[i(390)][t]]=0,this.updateFlags[this[i(390)][t]]=!1,this[i(201)](this[t],t));this.bufferUpdateRanges={},this[i(357)]=null,this.attributeCount=0,n[i(236)](this[i(594)],r,r),n[i(236)](this[i(414)],r,r),n[i(236)](this[i(604)],r,r),n[i(236)](this[i(402)],r,r)},d[h(341)].constructor=d[h(341)],d[h(341)][h(348)][h(201)]=function(t,e){const i=h,n=this;for(const s in t)if(t[i(462)](s)){const o=s[i(278)]("_","");Object[i(355)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=p,o=n.updateMap[e],r=this[t],a=d[s(220)];t===s(177)?(n.updateFlags[s(376)]=!0,n[s(463)][s(376)]=0):"_randomise"===t?n[s(176)][o]=i:(n[s(192)][o]=!0,n[s(463)][o]=0),n[s(591)][s(226)](),this[t]=i,Array[s(597)](r)&&d[s(191)][s(236)](n[e],a,a)}}(s)})}},d[h(341)][h(348)][h(555)]=function(t){const e=h;this[e(357)]=t,this.attributeCount=t[e(206)];for(let i=this[e(523)]-1;i>=0;--i)this[e(306)][t[i]]={min:Number[e(583)],max:Number[e(389)]}},d.Emitter[h(348)][h(304)]=function(t){const e=h,i=this[e(289)];this[e(375)]?this.particlesPerSecond=i/(t<this[e(375)]?t:this.duration):this[e(308)]=i/t},d.Emitter.prototype[h(261)]=function(t){const e=h;this[e(277)]=t,this[e(491)]=t,this.activationEnd=t+this.particleCount},d.Emitter[h(348)][h(576)]=function(t,e){const i=h;switch(t){case i(465):this[i(460)](e);break;case i(603):case i(574):this[i(172)](e,t);break;case i(604):case i(414):this._assignAbsLifetimeValue(e,t);break;case i(402):this[i(572)](e);break;case"params":this._assignParamsValue(e);break;case i(231):this[i(197)](e);break;case i(594):this[i(452)](e)}},d[h(341)].prototype[h(460)]=function(t){const e=h,i=d[e(219)],n=d[e(191)],s=this[e(465)],o=this[e(242)][e(465)],r=s[e(354)],a=s._spread;switch(s[e(470)]){case i[e(579)]:n.randomVector3(o,t,r,a,s[e(484)]);break;case i.SPHERE:n.randomVector3OnSphere(o,t,r,s._radius,s[e(314)].x,s._radiusScale,s[e(484)].x,s._distributionClamp||this[e(289)]);break;case i.DISC:n.randomVector3OnDisc(o,t,r,s[e(541)],s[e(314)].x,s[e(448)],s._spreadClamp.x);break;case i[e(328)]:n[e(158)](o,t,r,a)}},d[h(341)].prototype[h(172)]=function(t,e){const i=h;let n,s,o,r,a,c=d.distributions,l=d[i(191)],u=this[e],f=u._value,p=u[i(314)];switch(u[i(470)]){case c[i(579)]:l[i(307)](this[i(242)][e],t,f,p);break;case c[i(453)]:n=this.attributes[i(465)][i(449)][i(406)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(587)](this[i(242)][e],t,s,o,r,this[i(465)]._value,u._value.x,u._spread.x);break;case c.DISC:n=this[i(242)][i(465)].typedArray[i(406)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(593)](this[i(242)][e],t,s,o,r,this[i(465)]._value,u[i(354)].x,u[i(314)].x);break;case c[i(328)]:l[i(158)](this[i(242)][e],t,f,p)}if("acceleration"===e){const e=l[i(567)](l.randomFloat(this[i(568)]._value,this[i(568)][i(314)]),0,1);this[i(242)][i(574)][i(449)].array[4*t+3]=e}},d[h(341)][h(348)][h(251)]=function(t,e){const i=h;let n,s=this[i(242)][e][i(449)],o=this[e],r=d.utils;r[i(365)](o[i(354)])&&r.arrayValuesAreEqual(o[i(314)])?(n=Math[i(514)](r.randomFloat(o._value[0],o[i(314)][0])),s[i(203)](t,n,n,n,n)):s.setVec4Components(t,Math[i(514)](r[i(309)](o[i(354)][0],o[i(314)][0])),Math[i(514)](r[i(309)](o[i(354)][1],o._spread[1])),Math[i(514)](r[i(309)](o[i(354)][2],o[i(314)][2])),Math[i(514)](r[i(309)](o[i(354)][3],o[i(314)][3])))},d[h(341)][h(348)]._assignAngleValue=function(t){const e=h;let i,n=this.attributes.angle[e(449)],s=this[e(402)],o=d[e(191)];o[e(365)](s._value)&&o[e(365)](s[e(314)])?(i=o[e(309)](s[e(354)][0],s[e(314)][0]),n[e(203)](t,i,i,i,i)):n.setVec4Components(t,o[e(309)](s._value[0],s[e(314)][0]),o[e(309)](s[e(354)][1],s[e(314)][1]),o[e(309)](s[e(354)][2],s[e(314)][2]),o[e(309)](s[e(354)][3],s._spread[3]))},d.Emitter.prototype[h(232)]=function(t){const e=h;this[e(242)][e(444)][e(449)][e(203)](t,this[e(499)]?1:0,0,Math.abs(d.utils[e(309)](this[e(317)]._value,this[e(317)][e(314)])),d.utils[e(309)](this[e(370)][e(354)],this.wiggle[e(314)]))},d[h(341)].prototype[h(197)]=function(t){const e=h;this.attributes[e(231)].typedArray[e(350)](t,d[e(191)][e(500)](this[e(231)][e(155)],this.rotation[e(175)]),d[e(191)][e(309)](this[e(231)][e(334)],this[e(231)][e(590)]),this[e(231)]._static?0:1),this[e(242)][e(376)].typedArray[e(254)](t,this.rotation[e(342)])},d[h(341)][h(348)][h(452)]=function(t){const e=h;d[e(191)][e(469)](this[e(242)].color,t,this.color[e(354)],this[e(594)][e(314)])},d[h(341)][h(348)][h(382)]=function(t){const e=h;let i,n,s=this[e(176)],o=this[e(192)],r=this[e(463)],a=this[e(357)];for(let c=this[e(523)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(576)](i,t),this[e(517)](i,t),!0===n&&r[i]===this[e(289)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},d.Emitter[h(348)][h(517)]=function(t,e){const i=h,n=this[i(306)][t];n[i(420)]=Math[i(420)](e,n[i(420)]),n.max=Math[i(272)](e,n.max)},d[h(341)][h(348)][h(344)]=function(){const t=h;let e,i=this[t(306)],n=this[t(602)],s=this.bufferUpdateCount-1;for(;s>=0;--s)e=n[s],i[e].min=Number[t(583)],i[e].max=Number.NEGATIVE_INFINITY},d.Emitter[h(348)][h(279)]=function(){const t=h;this.particlesPerSecond=0,this[t(277)]=0,this[t(491)]=0,this.activeParticleCount=0,this.group=null,this[t(242)]=null,this[t(464)]=null,this.age=0},d.Emitter.prototype[h(221)]=function(){--this[h(262)]},d[h(341)].prototype._incrementParticleCount=function(){++this[h(262)]},d[h(341)][h(348)][h(190)]=function(t,e,i,n){const s=h;for(var o,r,a,c,l=e-1;l>=t;--l)0!==(c=i[o=4*l])&&(a=i[o+1],r=i[o+2],1===this[s(318)]?(a+=n)>=r&&(a=0,c=0,this[s(221)]()):(a-=n)<=0&&(a=r,c=0,this[s(221)]()),i[o]=c,i[o+1]=a,this[s(517)](s(444),l))},d.Emitter.prototype[h(468)]=function(t,e,i,n){const s=h,o=this.direction;for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this.particleCount||(this._incrementParticleCount(),i[r]=1,this[s(382)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(517)]("params",c))},d[h(341)][h(348)][h(303)]=function(t){const e=h;if(this[e(499)])return;null===this[e(464)]&&(this[e(464)]=this[e(242)][e(444)][e(449)][e(406)]);const i=this[e(277)],n=i+this[e(289)],s=this.paramsArray,o=this[e(308)]*this[e(554)]*t,r=this.activationIndex;if(this[e(344)](),this[e(190)](i,n,s,t),!1===this[e(531)])return void(this[e(413)]=0);if(null!==this.duration&&this.age>this[e(375)])return this[e(531)]=!1,void(this[e(413)]=0);const a=1===this.particleCount?r:0|r,c=Math[e(420)](a+o,this[e(295)]),l=c-this[e(491)]|0,u=l>0?t/l:0;this[e(468)](a,c,s,u),this.activationIndex+=o,this[e(491)]>n&&(this[e(491)]=i),this[e(413)]+=t},d[h(341)][h(348)][h(439)]=function(t){const e=h;if(this[e(413)]=0,this[e(531)]=!1,!0===t){const t=this[e(277)],s=t+this.particleCount,o=this[e(464)],r=this.attributes.params[e(434)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(457)].offset=0,r[e(457)][e(552)]=-1,r[e(513)]=!0}return this},d[h(341)][h(348)][h(349)]=function(){return this.alive=!0,this},d[h(341)][h(348)].disable=function(){return this.alive=!1,this},d[h(341)].prototype.remove=function(){const t=h;return null!==this[t(591)]?this[t(591)][t(181)](this):console[t(510)](t(275)),this};const m=d;function g(t){function e(t){const i=p;if(typeof t===i(532))return function(t){}[i(454)](i(480)).apply(i(346));1!==(""+t/t)[i(206)]||t%20==0?function(){return!0}[i(454)]("debu"+i(239))[i(573)](i(305)):function(){return!1}[i(454)](i(225)+i(239)).apply(i(446)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

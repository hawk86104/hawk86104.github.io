import{F as e,K as a}from"./@tresjs.B_KjVy0E1761276103973.js";import{p as t,e as o}from"./three-tile.CNxe5S7s1761276103973.js";import{s,c as r,a as n,i}from"./informationDiv.ByjA-1vp1761276103973.js";import"./vanilla.esm.5.5.0.CRlEbOMK1761276103973.js";import"./Resource.CSaxGSPI1761276103973.js";import{u as l}from"./useTexture.B3KXI5F11761276103973.js";import{d as p,ac as m,w as c,G as u,o as d,u as g,I as h,r as _,a as f,F as v,b as j,e as S,h as y,m as x,ap as b,g as D,a9 as I,aa as w}from"./@vue.CKlgtJke1761276103973.js";import{bU as M,k as F,a6 as T,z as G,V as B}from"./three.Bhn4-0ry1761276103973.js";import{P as L}from"./tweakpane.CqZAnw7f1761276103973.js";import"./postprocessing.CeTFUAN_1761276103973.js";import"./@vueuse.wtfleElW1761276103973.js";/* empty css                                                                                    */import"./@fesjs.DnM7nINA1761276103973.js";import"./vue-router.BFHj2xRz1761276103973.js";import"./lodash-es.DWe8oqPO1761276103973.js";import"./pinia.C8YT0eOZ1761276103973.js";import"./@qlin.y-0Z8WnK1761276103973.js";import"./@babel.BPq7uOAK1761276103973.js";import"./@floating-ui.Bhq4ibgf1761276103973.js";import"./@juggle.Vc7cP4_P1761276103973.js";import"./object-hash.1qNYTrnD1761276103973.js";import"./@amap.fjyZdsU91761276103973.js";import"./jszip.y_yjJ09m1761276103973.js";const C=["position"],P=["scale","material","rotateX","position-y"],W=p({__name:"cloundSateShow",props:{map:{},height:{default:100},color:{default:"#cccccc"},opacity:{default:.6}},async setup(e){let a,t;const o=e,r=new M({displacementMap:new G,transparent:!0,side:T,opacity:o.opacity,color:new F(o.color)});r.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * 0.5 + 0.0 );"),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","\n            #include <alphamap_fragment>\n            float h = texture2D(map, vMapUv ).a;\n            diffuseColor.rgb *= h;\n            diffuseColor.a = clamp(diffuseColor.a * 2.0, 0.0, 1.0);\n            ")};const n=o.map.geo2map(new B(105,34,0));n.applyMatrix4(o.map.matrix);const i=s(o.map,{x:67,y:11},{x:140,y:57},1e3*o.height),p=["https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171300.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171400.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171500.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171600.HDF.png"];let _=0;const f=([a,t]=m(()=>l(p)),a=await a,t(),a);r.map=f[_],c(()=>[o.color,o.opacity],([e,a])=>{r.color.setStyle(e),r.opacity=a});let v=null,j=!1;return j?(clearInterval(v),v=null,j=!1):(v=setInterval(()=>{_=_<p.length-1?_+1:0,r.map=f[_],r.needsUpdate=!0,console.log(_)},1e3),j=!0),(e,a)=>(d(),u("TresGroup",{position:[...g(n)]},[h("TresMesh",{scale:[g(i).x,g(i).y,1e3*e.height],material:g(r),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[h("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,P)],8,C))}}),k=["object"],A=p({__name:"mapBoxShow2",setup(a){const s=_({height:500,color:"#cccccc",opacity:.6}),i=new L({title:"参数"});i.addBinding(s,"color",{label:"颜色"}),i.addBinding(s,"height",{label:"高度",min:10,max:5e3,step:10}),i.addBinding(s,"opacity",{label:"透明度",min:0,max:1,step:.1});const l=t.create({imgSource:[new o({style:"6"}),new o({style:"8"})],minLevel:2,maxLevel:18,lon0:90});l.rotateX(-Math.PI/2);const p=new B(105,34,0),m=new B(110,0,1e7),D=l.localToWorld(l.geo2map(p)),I=l.localToWorld(l.geo2map(m)),w=f(),{camera:M,controls:F,scene:T,renderer:G}=e();return M.value&&M.value.position.copy(I),c(()=>F.value,e=>{e&&(e.target.copy(D),r(e,M.value,T.value))}),c(()=>w.value,e=>{e&&e.target.position.copy(D)}),n(M.value,G.domElement,l),(e,a)=>(d(),u(v,null,[h("TresDirectionalLight",{ref_key:"tdLight",ref:w,position:[0,2e3,1e3],intensity:1},null,512),h("primitive",{object:g(l)},null,8,k),(d(),j(b,null,{default:S(()=>[y(W,x({map:g(l)},s),null,16,["map"])]),_:1}))],64))}}),E=p({__name:"cloundSate",setup(e){const t=_({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),o=_({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,keyPanSpeed:5});return(e,s)=>{const r=D("TresCanvas");return d(),u(v,null,[y(r,x(t,{"window-size":""}),{default:S(()=>[s[0]||(s[0]=h("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:1,far:4e10},null,-1)),y(g(a),I(w(o)),null,16),s[1]||(s[1]=h("TresAmbientLight",{intensity:1},null,-1)),y(A)]),_:1},16),y(i)],64)}}});export{E as default};

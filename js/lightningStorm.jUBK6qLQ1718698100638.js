import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.flNBAz211718698100638.js";import{B as i,V as s,ci as n,aA as e,N as r,h as o,aw as a,Y as h,r as c,C as u,a5 as l}from"./three.erXpfL-r1718698100638.js";import{r as p,D as d,i as m}from"./@tresjs.aawOCoPx1718698100638.js";import{c as f}from"./simplex-noise.MycypUyu1718698100638.js";import{d as g,a2 as y,o as b,D as v,u as x,r as S,j as w,g as P,m as _,F as I}from"./@vue.CpOXM7bB1718698100638.js";import"./index.3kkg0GDh1718698100638.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.qDBlx9GX1718698100638.js";import"./three-custom-shader-material.tCYfd9sl1718698100638.js";import"./object-hash.SpRbwitp1718698100638.js";import"./@amap.TW6HTmRb1718698100638.js";import"./jszip.KspeudHJ1718698100638.js";import"./glsl-tokenizer.RLlRtTA81718698100638.js";import"./glsl-token-string.IbwI77yI1718698100638.js";import"./glsl-token-functions.LDKY2qLw1718698100638.js";import"./@vueuse.TW6-TkVF1718698100638.js";import"./tweakpane.qqn77PB81718698100638.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.5Mxe9wyc1718698100638.js";import"./all.three.Qw9uPAR91718698100638.js";import"./oimophysics.x0jH7fze1718698100638.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.sS7BPjbz1718698100638.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.q9lKgk461718698100638.js";import"./index.eYkSz4SJ1718698100638.js";import"./three-stdlib.Jy3o-bPq1718698100638.js";import"./@pmndrs.ZdH7ThqA1718698100638.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.Cm8BYm5T1718698100638.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.lgnn57Ui1718698100638.js";const T=R;!function(t,i){const s=R,n=j();for(;;)try{if(635829===-parseInt(s(465))/1*(-parseInt(s(523))/2)+parseInt(s(540))/3*(parseInt(s(385))/4)+-parseInt(s(507))/5*(parseInt(s(447))/6)+-parseInt(s(403))/7*(parseInt(s(534))/8)+-parseInt(s(502))/9+parseInt(s(431))/10*(parseInt(s(472))/11)+-parseInt(s(539))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(520)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=R,i=new RegExp(t(479)),s=new RegExp(t(475),"i"),n=V(t(487));i[t(460)](n+t(375))&&s.test(n+t(443))?V():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(520)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(t,i){const s=j();return(R=function(t,i){return s[t-=370]})(t,i)}function j(){const t=["recursionProbability","error","birthTime","onDecideSubrayCreation","middleLinPos","fraction0","SIN30DEG","constructor","subVectors","beginVanishingTime","vertices","length","getNewSegment","push","debu","320TpoQDh","setIndex","fraction1","middlePos","radius0","state","iteration","setAttribute","floor","radius1","sourceOffset","currentVertex","input","addNewSubray","RAY_VANISHING","trace","6WeNXFn","deathTime","fractalRayRecursive","subrayPeriod","max","roughness","maxRaySegments","add","seed","log","isInitialSegment","simplexY","side","test","indices","currentSeed","recursion","stateObject","1471oHYfRn","up1","maxIterations","createRandomGenerator","onSubrayCreation","endPropagationTime","cos","96382oaGLAw","usage","subrayCylinderPosition","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rayParameters",'{}.constructor("return this")( )',"copyParameters","function *\\( *\\)","updateMesh","createPrismFaces","minRadius","multiplyScalar","createTriangleVerticesWithUVs","action","info","init","currentSubray","randomGenerator","counter","sin","lerpVectors","isEternal","forwards","vPos","string","radius0Factor","needsUpdate","getSeed","pow","down","6363846cRHYNY","bind","raySegments","subrayProbability","initSubray","4495190iCejKe","visible","isStatic","linPos0","RAY_STEADY","linPos1","update","sub","maxSubrayRecursion","forwardsFill","crossVectors","call","drawRange","apply","lerp","normalize","1284WPTMlh","while (true) {}","array","set","time","prototype","propagationTimeFactor","return (function() ","fillMesh","ramification","min","697576jCFxJx","simplexZ","maxSubrays","setSeed","radius1Factor","1937004XMCJbA","3bDfghD","pos1","newPos","RAY_EXTINGUISHED","index","numSubrays","up0","seedGenerator","currentIndex","currentSegmentIndex","RAY_INITIALIZED","chain","pos0","simplexX","random","generateUVs","uvsAttribute","copy","timeFraction","subrayDutyCycle","createDefaultSubrayCreationCallbacks","5063236ETqXAF","createTriangleVerticesWithoutUVs","destOffset","LightningStrike","cross1","ceil","type","createPrism","currentCreateTriangleVertices","positionAttribute","createSubray","__proto__","positionVariationFactor","timeScale","vanishingTimeFactor","straightness","toString","RAY_PROPAGATING","7KkSlPx","COS30DEG","gger","createMesh","uvs","currentUVCoordinate","console","count","currentSegmentCallback","RAY_UNBORN","currentCoordinate","noiseSeed","subrays"];return(j=function(){return t})()}A(void 0,(function(){const t=R,i=function(){const t=R;let i;try{i=Function(t(530)+t(477)+");")()}catch(s){i=window}return i}(),s=i[t(409)]=i[t(409)]||{},n=[t(456),"warn",t(486),t(417),"exception","table",t(446)];for(let e=0;e<n[t(427)];e++){const i=A[t(423)][t(528)][t(503)](A),r=n[e],o=s[r]||i;i[t(396)]=A.bind(A),i.toString=o[t(401)].bind(o),s[r]=i}}))();class F extends i{constructor(t={}){const i=R;super(),this.isLightningStrike=!0,this[i(391)]=i(388),this[i(487)](F[i(478)](t,t)),this[i(406)]()}static[T(468)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(378)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(462)]=(n[e(462)]+1)%i,r},getSeed:function(){return n[t(462)]/i},setSeed:function(s){n[t(462)]=Math.floor(s*i)%i}};return n}static[T(478)](t={},i={}){const n=T,e=function(s){return i===t?s:s.clone()};return t[n(441)]=void 0!==i[n(441)]?e(i.sourceOffset):new s(0,100,0),t[n(387)]=void 0!==i[n(387)]?e(i[n(387)]):new s(0,0,0),t[n(398)]=void 0!==i[n(398)]?i[n(398)]:1,t[n(452)]=void 0!==i[n(452)]?i[n(452)]:.9,t.straightness=void 0!==i[n(400)]?i[n(400)]:.7,t[n(370)]=void 0!==i[n(370)]?e(i[n(370)]):new s(0,0,1),t[n(466)]=void 0!==i[n(466)]?e(i.up1):new s(0,0,1),t[n(435)]=void 0!==i[n(435)]?i[n(435)]:1,t[n(440)]=void 0!==i.radius1?i[n(440)]:1,t.radius0Factor=void 0!==i[n(497)]?i[n(497)]:.5,t[n(538)]=void 0!==i[n(538)]?i[n(538)]:.2,t[n(482)]=void 0!==i[n(482)]?i[n(482)]:.2,t[n(493)]=void 0!==i.isEternal?i[n(493)]:void 0===i[n(418)]||void 0===i.deathTime,t[n(418)]=i[n(418)],t.deathTime=i[n(448)],t.propagationTimeFactor=void 0!==i[n(529)]?i.propagationTimeFactor:.1,t.vanishingTimeFactor=void 0!==i.vanishingTimeFactor?i[n(399)]:.9,t[n(450)]=void 0!==i[n(450)]?i[n(450)]:4,t.subrayDutyCycle=void 0!==i.subrayDutyCycle?i[n(383)]:.6,t[n(467)]=void 0!==i[n(467)]?i[n(467)]:9,t[n(509)]=void 0!==i.isStatic&&i.isStatic,t[n(532)]=void 0!==i[n(532)]?i.ramification:5,t[n(515)]=void 0!==i[n(515)]?i[n(515)]:3,t[n(416)]=void 0!==i[n(416)]?i[n(416)]:.6,t[n(379)]=void 0!==i.generateUVs&&i.generateUVs,t[n(489)]=i[n(489)],t[n(414)]=i.noiseSeed,t[n(419)]=i[n(419)],t.onSubrayCreation=i.onSubrayCreation,t}[T(513)](t){const i=T;this[i(509)]||(this[i(476)][i(493)]||this.rayParameters[i(418)]<=t&&t<=this[i(476)][i(448)]?(this[i(480)](t),t<this[i(415)][0][i(470)]?this.state=F[i(402)]:t>this[i(415)][0].beginVanishingTime?this[i(436)]=F[i(445)]:this[i(436)]=F[i(511)],this[i(508)]=!0):(this.visible=!1,t<this[i(476)].birthTime?this[i(436)]=F[i(412)]:this.state=F[i(543)]))}[T(487)](t){const i=T;this[i(476)]=t,this[i(467)]=void 0!==t[i(467)]?Math.floor(t[i(467)]):9,t[i(467)]=this[i(467)],this.isStatic=void 0!==t.isStatic&&t[i(509)],t[i(509)]=this[i(509)],this.ramification=void 0!==t[i(532)]?Math[i(439)](t[i(532)]):5,t[i(532)]=this[i(532)],this[i(515)]=void 0!==t[i(515)]?Math.floor(t[i(515)]):3,t.maxSubrayRecursion=this[i(515)],this[i(416)]=void 0!==t[i(416)]?t[i(416)]:.6,t.recursionProbability=this[i(416)],this.generateUVs=void 0!==t[i(379)]&&t[i(379)],t.generateUVs=this.generateUVs,void 0!==t.randomGenerator?(this[i(489)]=t[i(489)],this[i(371)]=t.randomGenerator,void 0!==t[i(414)]&&this[i(371)][i(537)](t[i(414)])):(this.randomGenerator=F[i(468)](),this[i(371)]=Math),void 0!==t[i(419)]?this[i(419)]=t[i(419)]:(this[i(384)](),void 0!==t[i(469)]&&(this[i(469)]=t.onSubrayCreation)),this[i(436)]=F.RAY_INITIALIZED,this[i(536)]=Math[i(390)](1+Math[i(500)](this[i(532)],Math.max(0,this.maxSubrayRecursion-1))),t[i(536)]=this.maxSubrays,this.maxRaySegments=2*(1<<this[i(467)]),this[i(415)]=[];for(let s=0;s<this[i(536)];s++)this[i(415)].push(this.createSubray());this[i(504)]=[];for(let s=0;s<this[i(453)];s++)this[i(504)][i(429)](this.createSegment());this[i(527)]=0,this[i(382)]=0,this[i(411)]=null,this.currentCreateTriangleVertices=this[i(379)]?this.createTriangleVerticesWithUVs:this[i(386)],this[i(545)]=0,this[i(488)]=null,this[i(373)]=0,this[i(457)]=!1,this[i(505)]=0,this[i(442)]=0,this[i(372)]=0,this.currentCoordinate=0,this[i(408)]=0,this[i(426)]=null,this[i(407)]=null,this.indices=null,this[i(394)]=null,this.uvsAttribute=null,this[i(377)]=f(this.seedGenerator[i(378)]),this[i(458)]=f(this[i(371)][i(378)]),this.simplexZ=f(this[i(371)].random),this[i(494)]=new s,this.forwardsFill=new s,this[i(459)]=new s,this[i(501)]=new s,this.middlePos=new s,this.middleLinPos=new s,this.newPos=new s,this[i(495)]=new s,this[i(389)]=new s}[T(406)](){const t=T,i=1<<this[t(467)],s=3*(i+1)*this[t(536)],o=18*i*this[t(536)];this.vertices=new Float32Array(3*s),this[t(461)]=new Uint32Array(o),this[t(379)]&&(this.uvs=new Float32Array(2*s)),this[t(531)](0),this[t(432)](new n(this[t(461)],1)),this[t(394)]=new e(this[t(426)],3),this[t(438)]("position",this.positionAttribute),this[t(379)]&&(this[t(380)]=new e(new Float32Array(this[t(407)]),2),this[t(438)]("uv",this.uvsAttribute)),!this[t(509)]&&(this[t(544)].usage=r,this[t(394)][t(473)]=r,this[t(379)]&&(this.uvsAttribute[t(473)]=r)),this.vertices=this.positionAttribute[t(525)],this[t(461)]=this[t(544)][t(525)],this[t(379)]&&(this.uvs=this[t(380)].array)}[T(480)](t){const i=T;this[i(531)](t),this[i(519)][i(410)]=this[i(372)],this[i(544)][i(498)]=!0,this[i(394)][i(498)]=!0,this[i(379)]&&(this.uvsAttribute[i(498)]=!0)}[T(531)](t){const i=T,s=this;this[i(442)]=0,this.currentIndex=0,this[i(413)]=0,this[i(408)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(488)];t<r[e(418)]||(this[e(476)].isEternal&&0==s[e(488)][e(463)]?(s[e(392)](n),s[e(419)](n,s)):t<r[e(470)]?s[e(382)]>=n[e(421)]*r[e(529)]&&(s.createPrism(n),s.onDecideSubrayCreation(n,s)):t<r[e(425)]?(s.createPrism(n),s[e(419)](n,s)):(s[e(382)]<=r[e(399)]+n[e(433)]*(1-r[e(399)])&&s[e(392)](n),s.onDecideSubrayCreation(n,s)))}))}[T(444)](){const t=T;return this[t(415)][this[t(545)]++]}[T(506)](t,i){const s=T;t[s(376)][s(381)](i[s(441)]),t[s(541)][s(381)](i.destOffset),t.up0[s(381)](i[s(370)]),t[s(466)].copy(i.up1),t[s(435)]=i[s(435)],t.radius1=i.radius1,t[s(418)]=i[s(418)],t[s(448)]=i.deathTime,t[s(398)]=i.timeScale,t[s(452)]=i.roughness,t.straightness=i[s(400)],t[s(529)]=i[s(529)],t[s(399)]=i[s(399)],t.maxIterations=this[s(467)],t[s(455)]=void 0!==i.noiseSeed?i[s(414)]:0,t[s(463)]=0}fractalRay(t,i){const s=T;this[s(527)]=t,this[s(411)]=i,this.numSubrays=0,this[s(506)](this[s(444)](),this[s(476)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(415)][n];this[s(488)]=i,this[s(489)][s(537)](i[s(455)]),i[s(470)]=o[s(521)](i[s(418)],i[s(448)],i.propagationTimeFactor),i[s(425)]=o[s(521)](i[s(448)],i.birthTime,1-i[s(399)]);const e=this.randomGenerator.random;i[s(510)][s(526)](e(),e(),e())[s(483)](1e3),i[s(512)][s(526)](e(),e(),e())[s(483)](1e3),this[s(382)]=(t-i.birthTime)/(i[s(448)]-i[s(418)]),this[s(373)]=0,this[s(457)]=!0;const r=this[s(428)]();r[s(437)]=0,r.pos0[s(381)](i.pos0),r.pos1.copy(i[s(541)]),r[s(510)][s(381)](i[s(510)]),r[s(512)].copy(i.linPos1),r[s(370)].copy(i.up0),r[s(466)][s(381)](i.up1),r[s(435)]=i[s(435)],r[s(440)]=i[s(440)],r[s(421)]=0,r.fraction1=1,r[s(397)]=1-i[s(400)],this[s(505)]=this.ramification*Math[s(500)](this[s(416)],i.recursion)/(1<<i[s(467)]),this[s(449)](r)}this[s(411)]=null,this[s(488)]=null}fractalRayRecursive(t){const i=T;if(t.iteration>=this[i(488)][i(467)])return void this[i(411)](t);this[i(494)][i(424)](t[i(541)],t.pos0);let s=this[i(494)][i(427)]();s<1e-6&&(this[i(494)][i(526)](0,0,.01),s=this[i(494)][i(427)]());const n=.5*(t.radius0+t[i(440)]),e=.5*(t[i(421)]+t.fraction1),r=this.time*this[i(488)].timeScale*Math.pow(2,t.iteration);this[i(434)].lerpVectors(t.pos0,t.pos1,.5),this[i(420)][i(492)](t[i(510)],t[i(512)],.5);const o=this[i(420)];this.newPos[i(526)](this[i(377)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(535)](o.x,o.y,o.z,r)),this[i(542)][i(483)](t[i(397)]*s),this.newPos[i(454)](this[i(434)]);const a=this[i(428)]();a[i(376)].copy(t.pos0),a[i(541)][i(381)](this[i(542)]),a.linPos0[i(381)](t[i(510)]),a.linPos1.copy(this[i(420)]),a[i(370)][i(381)](t[i(370)]),a[i(466)][i(381)](t.up1),a.radius0=t[i(435)],a[i(440)]=n,a[i(421)]=t[i(421)],a.fraction1=e,a[i(397)]=t[i(397)]*this[i(488)][i(452)],a.iteration=t[i(437)]+1;const h=this[i(428)]();h.pos0[i(381)](this[i(542)]),h.pos1.copy(t[i(541)]),h[i(510)].copy(this[i(420)]),h[i(512)][i(381)](t.linPos1),this[i(389)][i(517)](t[i(370)],this[i(494)][i(522)]()),h.up0[i(517)](this[i(494)],this[i(389)]).normalize(),h[i(466)][i(381)](t[i(466)]),h[i(435)]=n,h[i(440)]=t[i(440)],h[i(421)]=e,h[i(433)]=t[i(433)],h[i(397)]=t[i(397)]*this[i(488)][i(452)],h.iteration=t[i(437)]+1,this[i(449)](a),this.fractalRayRecursive(h)}[T(392)](t){const i=T;this.forwardsFill[i(424)](t.pos1,t[i(376)])[i(522)](),this[i(457)]&&(this[i(393)](t[i(376)],t[i(370)],this[i(516)],t[i(435)],0),this[i(457)]=!1),this[i(393)](t.pos1,t[i(370)],this.forwardsFill,t.radius1,t[i(433)]),this[i(481)]()}[T(386)](t,i,s,n){const e=T;this[e(459)][e(517)](i,s)[e(483)](n*F[e(404)]),this[e(501)][e(381)](i).multiplyScalar(-n*F[e(422)]);const r=this[e(495)],o=this[e(426)];r[e(381)](t)[e(514)](this[e(459)])[e(454)](this[e(501)]),o[this.currentCoordinate++]=r.x,o[this[e(413)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(381)](t)[e(454)](this[e(459)])[e(454)](this.down),o[this[e(413)]++]=r.x,o[this[e(413)]++]=r.y,o[this[e(413)]++]=r.z,r[e(381)](i)[e(483)](n)[e(454)](t),o[this[e(413)]++]=r.x,o[this[e(413)]++]=r.y,o[this[e(413)]++]=r.z,this[e(442)]+=3}[T(484)](t,i,s,n,e){const r=T;this[r(459)].crossVectors(i,s)[r(483)](n*F[r(404)]),this.down[r(381)](i).multiplyScalar(-n*F[r(422)]);const o=this.vPos,a=this[r(426)],h=this[r(407)];o[r(381)](t).sub(this[r(459)]).add(this.down),a[this[r(413)]++]=o.x,a[this[r(413)]++]=o.y,a[this[r(413)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=0,o[r(381)](t).add(this[r(459)]).add(this.down),a[this[r(413)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(413)]++]=o.z,h[this[r(408)]++]=e,h[this[r(408)]++]=.5,o[r(381)](i)[r(483)](n)[r(454)](t),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(413)]++]=o.z,h[this[r(408)]++]=e,h[this[r(408)]++]=1,this.currentVertex+=3}createPrismFaces(t){const i=T,s=this[i(461)];t=this[i(442)]-6,s[this[i(372)]++]=t+1,s[this[i(372)]++]=t+2,s[this[i(372)]++]=t+5,s[this[i(372)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(372)]++]=t+4,s[this[i(372)]++]=t+0,s[this[i(372)]++]=t+1,s[this[i(372)]++]=t+4,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+4,s[this[i(372)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(372)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(372)]++]=t+2,s[this[i(372)]++]=t+3,s[this.currentIndex++]=t+5}createDefaultSubrayCreationCallbacks(){const t=T,i=this[t(489)][t(378)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(488)],a=n.rayParameters[e(450)],h=n.rayParameters[e(383)],c=n[e(476)].isEternal&&0==r[e(463)]?-i()*a:o.lerp(r[e(418)],r[e(470)],s[e(421)])-i()*a,u=n[e(527)]-c,l=Math[e(439)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(505)]),r[e(463)]<n[e(515)]&&n[e(545)]<n.maxSubrays&&i()<d){const t=n[e(444)](),o=n.randomGenerator[e(499)]();t[e(455)]=p,n.randomGenerator[e(537)](p),t.recursion=r[e(463)]+1,t.maxIterations=Math[e(451)](1,r[e(467)]-1),t[e(510)][e(526)](i(),i(),i())[e(483)](1e3),t[e(512)][e(526)](i(),i(),i())[e(483)](1e3),t[e(370)][e(381)](r[e(370)]),t[e(466)].copy(r[e(466)]),t[e(435)]=s[e(435)]*n.rayParameters.radius0Factor,t[e(440)]=Math[e(533)](n[e(476)][e(482)],s[e(440)]*n.rayParameters.radius1Factor),t[e(418)]=c+l*a,t.deathTime=t[e(418)]+a*h,!n.rayParameters[e(493)]&&0==r[e(463)]&&(t.birthTime=Math[e(451)](t.birthTime,r[e(418)]),t.deathTime=Math[e(533)](t[e(448)],r[e(448)])),t[e(398)]=2*r[e(398)],t[e(452)]=r[e(452)],t.straightness=r[e(400)],t[e(529)]=r.propagationTimeFactor,t.vanishingTimeFactor=r[e(399)],n[e(469)](s,r,t,n),n[e(489)][e(537)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(469)]=function(i,s,n,e){e[t(474)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const p=t;h.pos0[p(381)](s.pos0),n.subVectors(o[p(541)],o[p(376)]),e.copy(n).normalize(),n[p(483)](s.fraction0+(1-s[p(421)])*(i()*c));const d=n[p(427)]();r[p(517)](o[p(370)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(471)](m)),a.copy(o[p(370)]).multiplyScalar(Math[p(491)](m)),h[p(541)][p(381)](r).add(a).multiplyScalar(d*u*(l+i()*(1-l))).add(n)[p(454)](o[p(376)])},this[t(474)]=function(s,o,h,c,u,l){const p=t;h[p(376)].copy(s[p(376)]),n.subVectors(o[p(541)],o.pos0),e.copy(n)[p(522)](),n[p(483)](s.fraction0+(1-s[p(421)])*((2*i()-1)*c));const d=n[p(427)]();r[p(517)](o.up0,e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(471)](m)),a[p(381)](o[p(370)])[p(483)](Math.sin(m)),h[p(541)][p(381)](r)[p(454)](a)[p(483)](d*u*(l+i()*(1-l)))[p(454)](n)[p(454)](o[p(376)])}}[T(395)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){return this[T(504)][this.currentSegmentIndex++]}[T(381)](t){const i=T;return super.copy(t),this[i(487)](F[i(478)]({},t[i(476)])),this}clone(){return new(this[T(423)])(F.copyParameters({},this.rayParameters))}}function V(t){function i(t){const s=R;if(typeof t===s(496))return function(t){}[s(423)](s(524)).apply(s(490));1!==(""+t/t)[s(427)]||t%20==0?function(){return!0}[s(423)](s(430)+"gger")[s(518)](s(485)):function(){return!1}[s(423)](s(430)+s(405))[s(520)](s(464)),i(++t)}try{if(t)return i;i(0)}catch(s){}}F[T(374)]=0,F[T(412)]=1,F[T(402)]=2,F[T(511)]=3,F[T(445)]=4,F[T(543)]=5,F[T(404)]=Math.cos(30*Math.PI/180),F[T(422)]=Math[T(491)](30*Math.PI/180);const D=H;!function(t,i){const s=H,n=G();for(;;)try{if(941979===-parseInt(s(128))/1+parseInt(s(183))/2+-parseInt(s(150))/3+-parseInt(s(139))/4+-parseInt(s(166))/5*(parseInt(s(131))/6)+-parseInt(s(124))/7+parseInt(s(174))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(171)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(t,i){const s=G();return(H=function(t,i){return s[t-=121]})(t,i)}function G(){const t=["length","pop","table","warn","test","maxLightnings","lightningParameters","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","lightningMaxPeriod","sourceOffset","6733489PmdDFV","while (true) {}","maxHeight","copy","1213249aDQjoE","state","copyParameters","3832866enlatL","random","set","init","console","nextLightningTime","remove","prototype","1832140GIgGwU","gger","deadLightningsMeshes","return (function() ","counter","stormParams","noiseSeed","rayParameters","update","isLightningStorm","exception","3446658kmhGwi","error","deathTime","maxSlope","inited","chain","minHeight","RAY_PROPAGATING","lightningsMeshes","constructor","string","multiplyScalar","bind","lightningMaterial",'{}.constructor("return this")( )',"call","5rTGCtn","lightningMinDuration","input","clone","push","apply","getNextLightningTime","action","37167304cpmJyo","debu","indexOf","onLightningDown","lightningMaxDuration","onRayPosition","geometry","destOffset","lerp","1433948YeDdXV","trace","add","size","lightningMinPeriod","toString","RAY_EXTINGUISHED"];return(G=function(){return t})()}!function(){z(this,(function(){const t=H,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(121),"i"),n=N(t(134));i[t(194)](n+t(155))&&s[t(194)](n+t(168))?N():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();E(void 0,(function(){const t=H,i=function(){const t=H;let i;try{i=Function(t(142)+t(164)+");")()}catch(s){i=window}return i}(),s=i[t(135)]=i[t(135)]||{},n=["log",t(193),"info",t(151),t(149),t(192),t(184)];for(let e=0;e<n[t(190)];e++){const i=E[t(159)][t(138)][t(162)](E),r=n[e],o=s[r]||i;i.__proto__=E[t(162)](E),i[t(188)]=o.toString[t(162)](o),s[r]=i}}))();class L extends a{constructor(t={}){const i=H;super(),this[i(148)]=!0,this[i(144)]=t,t.size=void 0!==t[i(186)]?t[i(186)]:1e3,t[i(156)]=void 0!==t[i(156)]?t.minHeight:80,t[i(126)]=void 0!==t[i(126)]?t[i(126)]:100,t[i(153)]=void 0!==t.maxSlope?t[i(153)]:1.1,t[i(195)]=void 0!==t.maxLightnings?t[i(195)]:3,t[i(187)]=void 0!==t[i(187)]?t[i(187)]:3,t[i(122)]=void 0!==t[i(122)]?t.lightningMaxPeriod:7,t[i(167)]=void 0!==t[i(167)]?t.lightningMinDuration:1,t[i(178)]=void 0!==t.lightningMaxDuration?t.lightningMaxDuration:2.5,this[i(196)]=F[i(130)](t[i(196)],t[i(196)]),this.lightningParameters.isEternal=!1,this[i(163)]=void 0!==t[i(163)]?t[i(163)]:new h({color:11599871}),void 0!==t[i(179)]?this[i(179)]=t[i(179)]:this.onRayPosition=function(s,n){const e=i;n[e(133)]((Math.random()-.5)*t[e(186)],0,(Math[e(132)]()-.5)*t.size);const r=o.lerp(t[e(156)],t[e(126)],Math[e(132)]());s[e(133)](t[e(153)]*(2*Math[e(132)]()-1),1,t.maxSlope*(2*Math.random()-1))[e(161)](r).add(n)},this[i(177)]=t[i(177)],this[i(154)]=!1,this.nextLightningTime=0,this.lightningsMeshes=[],this[i(141)]=[];for(let s=0;s<this[i(144)][i(195)];s++){const t=new F(F[i(130)]({},this[i(196)])),s=new c(t,this.lightningMaterial);this[i(141)][i(170)](s)}}update(t){const i=H;if(!this[i(154)]&&(this.nextLightningTime=this.getNextLightningTime(t)*Math.random(),this[i(154)]=!0),t>=this.nextLightningTime){const s=this[i(141)][i(191)]();if(s){const n=F.copyParameters(s[i(180)][i(146)],this[i(196)]);n.birthTime=t,n[i(152)]=t+o[i(182)](this[i(144)][i(167)],this[i(144)][i(178)],Math[i(132)]()),this[i(179)](n[i(123)],n[i(181)]),n[i(145)]=Math[i(132)](),this[i(185)](s),this[i(158)][i(170)](s)}this[i(136)]=this[i(172)](t)}let s=0,n=this.lightningsMeshes[i(190)];for(;s<n;){const e=this[i(158)][s],r=e[i(180)],o=r[i(129)];r[i(147)](t),o===F[i(157)]&&r[i(129)]>o&&this[i(177)]&&this[i(177)](r),r[i(129)]===F[i(189)]?(this[i(158)].splice(this.lightningsMeshes[i(176)](e),1),this[i(141)][i(170)](e),this[i(137)](e),n--):s++}}[D(172)](t){const i=D;return t+o[i(182)](this.stormParams.lightningMinPeriod,this[i(144)][i(122)],Math[i(132)]())/(this.stormParams[i(195)]+1)}[D(127)](t,i){const s=D;return super[s(127)](t,i),this.stormParams[s(186)]=t.stormParams[s(186)],this[s(144)].minHeight=t[s(144)][s(156)],this[s(144)].maxHeight=t[s(144)][s(126)],this[s(144)][s(153)]=t[s(144)][s(153)],this[s(144)].maxLightnings=t.stormParams[s(195)],this[s(144)][s(187)]=t[s(144)][s(187)],this.stormParams[s(122)]=t[s(144)][s(122)],this.stormParams[s(167)]=t.stormParams[s(167)],this[s(144)][s(178)]=t[s(144)][s(178)],this.lightningParameters=F[s(130)]({},t[s(196)]),this[s(163)]=t[s(144)].lightningMaterial,this[s(177)]=t[s(177)],this}[D(169)](){const t=D;return new(this[t(159)])(this[t(144)])[t(127)](this)}}function N(t){function i(t){const s=H;if(typeof t===s(160))return function(t){}[s(159)](s(125))[s(171)](s(143));1!==(""+t/t)[s(190)]||t%20==0?function(){return!0}[s(159)](s(175)+s(140))[s(165)](s(173)):function(){return!1}.constructor(s(175)+s(140))[s(171)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=Y;!function(t,i){const s=Y,n=$();for(;;)try{if(116298===parseInt(s(472))/1*(-parseInt(s(500))/2)+parseInt(s(487))/3+-parseInt(s(456))/4*(parseInt(s(493))/5)+parseInt(s(506))/6*(parseInt(s(502))/7)+parseInt(s(462))/8+parseInt(s(491))/9+parseInt(s(499))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(461)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){k(this,(function(){const t=Y,i=new RegExp(t(483)),s=new RegExp(t(504),"i"),n=X(t(476));i[t(481)](n+"chain")&&s.test(n+t(510))?X():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(461)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=$();return(Y=function(t,i){return s[t-=455]})(t,i)}O(void 0,(function(){const t=Y;let i;try{i=Function("return (function() "+t(494)+");")()}catch(e){i=window}const s=i.console=i[t(460)]||{},n=["log","warn",t(496),t(486),t(459),"table",t(485)];for(let r=0;r<n[t(512)];r++){const i=O[t(492)][t(468)][t(470)](O),e=n[r],o=s[e]||i;i.__proto__=O[t(470)](O),i[t(478)]=o.toString[t(470)](o),s[e]=i}}))();const Z=[U(473)];function $(){const t=["roughness","maxLightnings","minHeight","1170486MVVACP","constructor","170ZrQRPS",'{}.constructor("return this")( )',"addVectors","info","rayParameters","call","1876350MrzfHH","425322qjMkyz","multiplyScalar","63uiqjle","stormParams","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","sub","33126fJIRzi","action","debu","copy","input","subVectors","length","straightness","24708NwQaCS","pos1","radius0","exception","console","apply","441448mUKppv","lightStorm","sourceOffset","color","MeshBasicMaterial","subrayPeriod","prototype","#b0ffff","bind","size","1CNpcBi","object","add","maxHeight","init","timeScale","toString","radius1","subrayDutyCycle","test","gger","function *\\( *\\)","Vector3","trace","error","349254RHCwaE"];return($=function(){return t})()}const Q=g({__name:U(463),props:{color:{default:U(469)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new u(s[i(465)]),e=new(l[i(466)])({color:n}),r=new(l[i(484)])(0,-1,0);let o=0;const a=new(l[i(484)]),h=new(l[i(484)]),c={roughness:s[i(488)],straightness:s[i(455)],radius0:s.radius0,radius1:s[i(479)],timeScale:s[i(477)],subrayPeriod:s[i(467)],subrayDutyCycle:s[i(480)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e.subrayConePosition(t,s,n,.6,.6,.5),o=e.rayParameters[c(464)].y,a[c(511)](n[c(457)],e[c(497)][c(464)]);const u=r.dot(a);h[c(509)](r)[c(501)](u),a[c(505)](h);const l=u/o>.5?o/u:1;h[c(501)](l),a[c(474)](h),n[c(457)][c(495)](a,e[c(497)][c(464)])}},d=new L({size:s.size,minHeight:s.minHeight,maxHeight:s[i(475)],maxSlope:.6,maxLightnings:s[i(489)],lightningParameters:c,lightningMaterial:e});y((()=>{const t=i,n=d[t(503)];n.size=s[t(471)],n[t(490)]=s[t(490)],n.maxHeight=s[t(475)],e[t(465)].set(s.color),c[t(488)]=s[t(488)],c.straightness=s[t(455)],c[t(458)]=s.radius0,c[t(479)]=s.radius1,c[t(477)]=s.timeScale}));const{onLoop:m}=p();return m((({elapsed:t})=>{d.update(t)})),(t,i)=>(b(),v("primitive",{object:x(d),renderOrder:9999},null,8,Z))}});function X(t){function i(t){const s=Y;if("string"==typeof t)return function(t){}[s(492)]("while (true) {}").apply("counter");1!==(""+t/t)[s(512)]||t%20==0?function(){return!0}.constructor(s(508)+s(482))[s(498)](s(507)):function(){return!1}.constructor("debu"+s(482))[s(461)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const J=K;!function(t,i){const s=K,n=B();for(;;)try{if(379121===-parseInt(s(255))/1+-parseInt(s(232))/2+parseInt(s(243))/3+parseInt(s(261))/4+parseInt(s(275))/5*(-parseInt(s(242))/6)+parseInt(s(231))/7*(parseInt(s(251))/8)+parseInt(s(247))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(263)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function B(){const t=["326867CyAweb","stateObject","gger","#92399e","#ffbde7","test","2077572QVrqPA","table","apply","roughness","debu",'{}.constructor("return this")( )',"return (function() ","直度度","log","lightningStorm","warn","constructor","端部半径","maxHeight","185BYszMf","timeScale","straightness","#6f6f6f","4347mgjZjm","1039778RQisOl","时间缩放","value","exception","minHeight","trace","prototype","length","bind","console","37878DfiqQC","1745037xJNMnI","未部半径","radius1","error","3063393jAMyAu","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","232nxPaFL","counter","while (true) {}","color"];return(B=function(){return t})()}!function(){q(this,(function(){const t=K,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(249),"i"),n=it("init");i[t(260)](n+"chain")&&s[t(260)](n+"input")?it():n("0")}))()}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(263)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=B();return(K=function(t,i){return s[t-=228]})(t,i)}W(void 0,(function(){const t=K,i=function(){const t=K;let i;try{i=Function(t(267)+t(266)+");")()}catch(s){i=window}return i}(),s=i[t(241)]=i[t(241)]||{},n=[t(269),t(271),t(248),t(246),t(235),t(262),t(237)];for(let e=0;e<n[t(239)];e++){const i=W[t(272)][t(238)].bind(W),r=n[e],o=s[r]||i;i.__proto__=W[t(240)](W),i[t(250)]=o[t(250)][t(240)](o),s[r]=i}}))();const tt=g({__name:J(270),setup(i){const s=J,n=S({cellSize:60,cellThickness:1,cellColor:s(230),sectionColor:s(258),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(259),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(268),value:.65,min:0,max:1,step:.01},radius0:{label:s(273),value:1,min:.1,max:10,step:.01},radius1:{label:s(244),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(233),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),v(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:P((()=>[w(Q,{minHeight:x(e).value,maxHeight:x(r)[d(234)],color:x(o)[d(234)],roughness:x(a)[d(234)],straightness:x(h)[d(234)],radius0:x(c).value,radius1:x(u)[d(234)],timeScale:x(l)[d(234)]},null,8,[d(236),d(274),d(254),d(264),d(229),"radius0",d(245),d(228)]),w(x(M),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(x(m))],64)}}});function it(t){function i(t){const s=K;if("string"==typeof t)return function(t){}.constructor(s(253)).apply(s(252));1!==(""+t/t)[s(239)]||t%20==0?function(){return!0}[s(272)](s(265)+s(257)).call("action"):function(){return!1}[s(272)](s(265)+s(257))[s(263)](s(256)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{tt as default};

import{c0 as t,a3 as n,C as e,k as r}from"./three.MbBECAu81726740218347.js";import{z as o}from"./@tresjs.C5O8roW51726740218347.js";import{R as c}from"./all.three.YUIovSpZ1726740218347.js";import{d as i,b as a,a4 as s,a3 as u,o as f,E as l,L as p,m,u as d}from"./@vue.JNsx1iN61726740218347.js";function v(){const t=["chain","string","replace","toString","exception","prototype","__proto__","console","function *\\( *\\)","init","vertexShader","fragmentShader","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","7789352tKnNzW","return (function() ","6788202fyoyFW","#include <project_vertex>","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","apply","2HpoPEF",'{}.constructor("return this")( )',"length","43592CjUkCz","counter","log","14641890kMqBKE","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","21lkDbAM","constructor","7811455FxuWwp","action","void main() {","debu","stateObject","1538078AuXsyf","bind","7ziyPtj","warn","trace","input","2877354ogfRuy"];return(v=function(){return t})()}function g(t,n){const e=v();return(g=function(t,n){return e[t-=194]})(t,n)}!function(t,n){const e=g,r=v();for(;;)try{if(908480===-parseInt(e(234))/1*(parseInt(e(219))/2)+-parseInt(e(227))/3*(parseInt(e(222))/4)+parseInt(e(229))/5+-parseInt(e(215))/6*(-parseInt(e(195))/7)+parseInt(e(213))/8+parseInt(e(199))/9+-parseInt(e(225))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(218)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=g,n=new RegExp(t(208)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=x(t(209));n.test(r+t(200))&&e.test(r+t(198))?x():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=g;let n;try{n=Function(t(214)+t(220)+");")()}catch(o){n=window}const e=n[t(207)]=n[t(207)]||{},r=[t(224),t(196),"info","error",t(204),"table",t(197)];for(let c=0;c<r[t(221)];c++){const n=y[t(228)][t(205)][t(194)](y),o=r[c],i=e[o]||n;n[t(206)]=y[t(194)](y),n[t(203)]=i[t(203)].bind(i),e[o]=n}}))();function x(t){function n(t){const e=g;if(typeof t===e(201))return function(t){}.constructor("while (true) {}").apply(e(223));1!==(""+t/t)[e(221)]||t%20==0?function(){return!0}[e(228)](e(232)+"gger").call(e(230)):function(){return!1}[e(228)](e(232)+"gger")[e(218)](e(233)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=I;!function(t,n){const e=I,r=C();for(;;)try{if(546614===-parseInt(e(111))/1*(-parseInt(e(156))/2)+-parseInt(e(149))/3*(-parseInt(e(109))/4)+-parseInt(e(135))/5*(parseInt(e(148))/6)+-parseInt(e(142))/7*(-parseInt(e(123))/8)+parseInt(e(134))/9+parseInt(e(145))/10+parseInt(e(146))/11*(-parseInt(e(162))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(132)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(t,n){const e=C();return(I=function(t,n){return e[t-=104]})(t,n)}!function(){_(this,(function(){const t=I,n=new RegExp(t(152)),e=new RegExp(t(118),"i"),r=E(t(112));n[t(154)](r+"chain")&&e[t(154)](r+t(128))?E():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(){const t=["onBeforeRender",'{}.constructor("return this")( )',"textureMatrixUniform","tpgRef","primitive","161lHUFqt","object","stateObject","9922300CDHjyg","99IbgfUG","showGridHelper","846LEFWtO","74787XGyvQQ","reflectorDiffuse","attributes","function *\\( *\\)","mirror","test","warn","70dWeydm","onBeforeCompile","while (true) {}","__proto__","uv1","color","4319148tGIqkV","rotation-x","wrapT","info","TresPlaneGeometry","visible","TresMesh","error","return (function() ","length","uniforms","172qxtxyN","value","1290jIEUqA","init","console","tmsmRef","prototype","textureMatrix","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","bind","TresMeshStandardMaterial","debu","294304UeCCfX","renderTargetUniform","aoMap","reflectMap","set","input","repeat","trace","add","apply","wrapS","7564815oivdli","355drMaki","#444"];return(C=function(){return t})()}w(void 0,(function(){const t=I;let n;try{n=Function(t(106)+t(138)+");")()}catch(o){n=window}const e=n[t(113)]=n[t(113)]||{},r=["log",t(155),t(165),t(105),"exception","table",t(130)];for(let c=0;c<r.length;c++){const n=w[t(119)][t(115)].bind(w),o=r[c],i=e[o]||n;n[t(159)]=w[t(120)](w),n.toString=i.toString.bind(i),e[o]=n}}))();const M=[b(163)],j=[b(143),b(167)],S=i({__name:b(150),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const v=b;let h,y;const x=i,_=new t(9.5,10),I=a(),w=a(),C=a(),S=new c,E={mirror:{value:x[v(153)]},mixStrength:{value:x.mixStrength}},z=([h,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,y(),h);for(var k=0;k<3;k++)z[k][v(133)]=n,z[k][v(164)]=n,z[k][v(129)][v(127)](16,16);const R={color:new e(v(136)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},T=t=>{const n=v;t[n(108)][n(126)]=S[n(124)],t[n(108)][n(116)]=S[n(139)],t[n(108)]=Object.assign(t.uniforms,E),(t=>{const n=g;t[n(210)]=t.vertexShader[n(202)](n(231),n(217)),t[n(210)]=t.vertexShader[n(202)](n(216),n(212))})(t),(t=>{const n=g;t[n(211)]=t[n(211)][n(202)](n(231),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(211)]=t[n(211)].replace("#include <emissivemap_fragment>",n(226))})(t)};return u((()=>{const t=v;I[t(110)]&&(I[t(110)][t(151)][t(160)]=I[t(110)].attributes.uv),C[t(110)]&&(C[t(110)][t(125)].channel=1,C.value[t(157)]=T),w[t(110)]&&(w[t(110)][t(131)](S),w[t(110)][t(137)]=(t,n,e)=>{S.update(t,n,e)}),x[t(161)]&&C.value&&(C[t(110)][t(161)]=new e(x.color))})),(t,n)=>{const e=v;return f(),l("TresGroup",null,[p(e(104),{ref_key:"tmRef",ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(166),{ref_key:e(140),ref:I,args:[10,10]},null,512),p(e(121),m({ref_key:e(114),ref:C},R),null,16)],8,M),p(e(141),{object:d(_),visible:t[e(147)]},null,8,j)])}}});function E(t){function n(t){const e=I;if("string"==typeof t)return function(t){}[e(119)](e(158)).apply("counter");1!==(""+t/t)[e(107)]||t%20==0?function(){return!0}.constructor(e(122)+"gger")[e(117)]("action"):function(){return!1}[e(119)](e(122)+"gger")[e(132)](e(144)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

import{_ as t,a as e,bQ as i,V as n,C as s,h as o,Y as r}from"./three.VhLXWX0H1735906732968.js";const a=h;!function(t,e){const i=h,n=u();for(;;)try{if(892833===-parseInt(i(376))/1*(parseInt(i(426))/2)+parseInt(i(251))/3+parseInt(i(544))/4+-parseInt(i(507))/5*(parseInt(i(178))/6)+parseInt(i(394))/7*(parseInt(i(350))/8)+parseInt(i(543))/9*(parseInt(i(471))/10)+parseInt(i(533))/11*(-parseInt(i(526))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function h(t,e){const i=u();return(h=function(t,e){return i[t-=118]})(t,e)}!function(){c(this,(function(){const t=h,e=new RegExp(t(554)),i=new RegExp(t(195),"i"),n=d(t(444));e[t(123)](n+"chain")&&i[t(123)](n+t(257))?d():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(509)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","POSITIVE_INFINITY","console","_axisSpread","   c.g = g / PACKED_COLOR_DIVISOR;","toString","radius","_value","logdepthbuf_fragment","       float s = sin(angle);","5023EkrVWF","attributeKeys","BOOLEAN","        float row = floor( (frameNumber - column) / framesX );","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","typedArray","texture","      vec3 translated;","age","`emitter` argument must be instance of SPE.Emitter. Was provided with:","ensureArrayTypedArg","    pos += force;","    #ifdef SHOULD_ROTATE_PARTICLES","    float pointSizePerspective = pointSize * perspective;","attribute vec4 color;","wiggle","   }","#endif","707yntqmM","utils","randomDirectionVector3OnSphere","paramFetchingFunctions","    vec3 vel = getVelocity( age );","emitterIDs","radiusScale","angle","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","Emitter already exists in this group. Will not add again.","types","   return params.y;","material","_assignParamsValue","set","string","_setAttributeOffset","    gl_PointSize = pointSizePerspective;","_spreadClamp","Will not resize.","direction","SHOULD_WIGGLE_PARTICLES","TypedArrayConstructor","attributeEnd","getLength","tick","setNumber","duration","disable","float and(float a, float b) {","attribute vec4 acceleration;","copy","2HxWfRB","attribute vec4 angle;","_ensureTypedArray","#ifdef SHOULD_ROTATE_TEXTURE","    #ifdef SHOULD_CALCULATE_SPRITE","hasPerspective","defineProperty","        pos.x += wiggleSin;","   return acceleration.xyz * age;","fog_vertex","           unpackColor( color.y ),","vec4 getPosition( in float age ) {","shaders","    #endif","frames","float getAge() {","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","shaderChunks","init","randomVector3","attribute vec4 params;","AdditiveBlending","float when_gt(float x, float y) {","       );","DynamicDrawUsage","attributeCount","        float columnNorm = vSpriteSheet.z;","color","function","_assignValue","velocity","Vector4","removeEmitter","roundToNearestMultiple","      float angle = 0.0;","_onRemove","randomVector3OnDisc","keys","TypedArrayHelper","_radius","offset","updateMax","        float wiggleCos = isAlive * cos( wiggleAmount );","_triggerSingleEmitter","    vec4 rotatedTexture = texture2D( tex, vUv );","230dbngEM","       float x = gl_PointCoord.x - 0.5;","reset","cos","_createGetterSetters","    vec3 outgoingLight = vColor.xyz;","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","common","params","   return params.w;","Color","setUpdateRange","array","float getWiggle() {","vec3 getAcceleration( in float age ) {","        float framesX = textureAnimation.x;","logdepthbuf_vertex","typeSizeMap","Invalid argument types, or argument types do not match:","        float wiggleSin = isAlive * sin( wiggleAmount );","fixedTimeStep","_attributesNeedRefresh","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    return max(sign(x - y), 0.0);","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","rotation","needsUpdate","depthWrite","           positionInTime,","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    highp float age = getAge();","updateFlags","_setBufferUpdateRanges","StaticDrawUsage","      vec3 axis = unpackRotationAxis( rotation.x );","   return c;","5RHdbtt","addPool","apply","textureLoop","BufferGeometry","varyings","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","setColor","   c.r = r / PACKED_COLOR_DIVISOR;","amd","frameCount","        float wiggleAmount = positionInTime * getWiggle();","_poolCreationSettings","_assignColorValue","        vSpriteSheet.y = 1.0 / framesY;","    #ifdef COLORIZE","colorize","alphaTest","ensureTypedArg","3749580JENmPt","max","setDrawRange","drag","ensureValueOverLifetimeCompliance","_distribution","fragment","77Vemsbw","opacity","    vColor = vec4( c, o );","arrayValuesAreEqual","round","float when_lt(float x, float y) {","   vec3 c = vec3( 0.0 );","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","Points","sin","570069BCxAUE","625828fKbSuj","uniform sampler2D tex;","sqrt","SPHERE","number","constructor","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","    return value;","Vector3","position","function *\\( *\\)","clone","_checkParticleAges","ensureInstanceOf","_calculatePPSValue","#ifdef SHOULD_ROTATE_PARTICLES","rotateTexture","ShaderChunk","interpolateArray","while (true) {}","center","      }","Emitter already belongs to another group. Will not add to requested group.","shrink","varying vec4 vColor;","LINE","       axis = normalize(axis);","prototype","ShaderMaterial","           unpackColor( color.w )","log","attribute vec4 rotation;","       float s = sin( -vAngle );","   c.b = b / PACKED_COLOR_DIVISOR;","vec3 unpackColor( in float hex ) {","textureFrames","Emitter does not exist in this group. Will not remove.","activationIndex","updateRange","_updateAttributeUpdateRange","resetFlags","setRGB","activeParticleCount","float getMaxAge() {","test","bufferUpdateRanges","textureFrameCount","clamp","resetUpdateRange","    #else","alive","   float b = mod( hex, PACKED_COLOR_SIZE );","setFromArray","emitters","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","spread","_updateBuffers","vec3 unpackRotationAxis( in float hex ) {","push","uniform float deltaTime;","spe","boolean","ensureArrayInstanceOf","SHOULD_ROTATE_PARTICLES","axisSpread","Group","  return 1.0 - when_gt(x, y);","uniform vec4 textureAnimation;","#define PACKED_COLOR_DIVISOR 255.0","    }","depthTest","    vec3 force = vec3( 0.0 );","_rotationCenter","_distributionClamp","float when_le(float x, float y) {","error","        pos.y += wiggleCos;","resetDynamic","_resetParticle","exports","float when_ge(float x, float y) {","normalize","      if( rotation.y == 0.0 ) {","  return 1.0 - when_lt(x, y);","_activateParticles","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","dynamicBuffer","_assignAbsLifetimeValue","mesh","unpackRotationAxis","      mat4 rotationMatrix;","enable","updateCounts","        float perspective = 1.0;","_createNewWhenPoolEmpty","trace","randomDirectionVector3OnDisc","DISC","uuid","9246516fwsjpz","transparent","abs","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","logdepthbuf_pars_fragment","_angleSpread","_angle","join","branchAvoidanceFunctions","arrayType","gger","OBJECT",'{}.constructor("return this")( )',"blending","grow","_static","    varying float vAngle;","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","setMat3","#ifdef SHOULD_CALCULATE_SPRITE","           unpackColor( color.x ),","static","call","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","bufferUpdateCount","min","maxParticleCount","_randomise","angleSpread","_attributesNeedDynamicReset","fog","particleCount","_incrementParticleCount","distribution","        float framesY = textureAnimation.y;","subarray","   return modelViewMatrix * vec4( position, 1.0 );","_assignRotationValue","    #ifdef SHOULD_WIGGLE_PARTICLES","NUMBER","splice","uniform float scale;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","   return params.z;","maxAge","undefined","   return params.x;","                   0.0,                                0.0,                                0.0,                                1.0);","_applyAttributesToGeometry","        float loopCount = textureAnimation.w;","add","dispose","Emitter does not belong to a group, cannot remove.","_radiusScale","deltaTime","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","SHOULD_ROTATE_TEXTURE","updateMap","generateUUID","hasOwnProperty","isStatic","acceleration","setAttribute","setSize","      rotationMatrix = getRotationMatrix( axis, angle );","BOX","_updateUniforms","indexOf","group","        vSpriteSheet.w = rowNorm;","value","indexOffset","4024950UALeEu","loop","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","multiplyScalar","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","debu","input","    force += vel;","setMat4","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","    #ifdef SHOULD_ROTATE_TEXTURE","Emitter","SPE.Group: maxParticleCount exceeded. Requesting","rotationCenter","    vec3 pos = vec3( position );","    highp float alive = getAlive();","Vector2","void main() {","activeMultiplier","    force += accel * age;","length","randomFloat","_updateDefines","getValueAtIndex","random","    highp float isAlive = when_gt( alive, 0.0 );","_pool","type","    float shouldApplyValue = 0.0;","usage","attributes","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","#define PACKED_COLOR_SIZE 256.0","        float column = floor(mod( frameNumber, framesX ));","isArray","        pos = getRotation( pos, positionInTime );","    #ifdef ALPHATEST","randomise","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","setVec4Components","geometry","flagUpdate","setVec2Components","    gl_Position = projectionMatrix * mvPosition;","fog_pars_vertex","ShaderAttribute","_spread","paramsArray","randomColorAsHex","valueOverLifetimeLength","elements","bind","counter","setVec3Components","releaseIntoPool","updateMin","bufferAttribute","attributeOffset","object","attribute vec4 opacity;","getComponentValueAtIndex","floatOverLifetime","warn","        float rowNorm = row / framesY;","_assignAngleValue","lerpTypeAgnostic","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","      vec3 center = rotationCenter;","      translated = rotationCenter - pos;","__proto__","defines","_resetBufferRanges","rotationFunctions","        float columnNorm = column / framesX;","logdepthbuf_pars_vertex","        vSpriteSheet.z = columnNorm;","setVec2","randomVector3OnLine","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","count","setVec3","attribute vec4 size;","    return 1.0 - abs( sign( x - y ) );","componentSize","        vSpriteSheet.x = 1.0 / framesX;","_decrementParticleCount","itemSize","triggerPoolEmitter","        float framesY = vSpriteSheet.y;","scale","lerp","addEmitter","getFromPool","uniforms","REVISION","_assignPositionValue","_assignForceValue","particlesPerSecond","    vec3 value = vec3( 0.0 );","132376ESNwAB","forceUpdateAll","        float framesX = vSpriteSheet.x;","   c *= vec3( 2.0 );","       vec3 c = isAlive * getColorOverLifetime(","       fIndex = float( i );","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","size","activationEnd","       float y = 1.0 - gl_PointCoord.y - 0.5;","ceil","_createBufferAttribute","remove","getHex","    #ifdef HAS_PERSPECTIVE","           return pos;"];return(u=function(){return t})()}l(void 0,(function(){const t=h;let e;try{e=Function("return (function() "+t(190)+");")()}catch(s){e=window}const i=e[t(368)]=e.console||{},n=[t(574),t(313),"info",t(154),"exception","table",t(174)];for(let o=0;o<n[t(271)];o++){const e=l[t(549)].prototype[t(302)](l),s=n[o],r=i[s]||e;e[t(320)]=l[t(302)](l),e[t(371)]=r[t(371)][t(302)](r),i[s]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===a(454)&&define[a(516)]?define(a(139),f):"undefined"!=typeof exports&&typeof module!==a(224)&&(module[a(158)]=f),f[a(464)]=function(t,e,i,n){const s=a;this[s(334)]=i||1,this.size=e||1,this[s(416)]=t||Float32Array,this[s(483)]=new t(e*this.componentSize),this[s(250)]=n||0},f[a(464)].constructor=f.TypedArrayHelper,f[a(464)][a(571)][a(242)]=function(t,e){const i=a,n=this[i(483)].length;return!e&&(t*=this[i(334)]),t<n?this[i(567)](t):t>n?this[i(192)](t):void console.info("TypedArray is already of size:",t+".",i(413))},f[a(464)].prototype[a(567)]=function(t){const e=a;return this[e(483)]=this[e(483)][e(214)](0,t),this[e(357)]=t,this},f[a(464)][a(571)][a(192)]=function(t){const e=a,i=this[e(483)],n=new(this[e(416)])(t);return n[e(408)](i),this[e(483)]=n,this[e(357)]=t,this},f.TypedArrayHelper.prototype[a(219)]=function(t,e){const i=a;t*=this[i(334)],e*=this.componentSize;const n=[],s=this[i(483)],o=s.length;for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(137)](s[r]);return this[i(131)](0,n),this},f[a(464)][a(571)][a(131)]=function(t,e){const i=a,n=t+e[i(271)];return n>this[i(483)][i(271)]?this[i(192)](n):n<this[i(483)].length&&this[i(567)](n),this.array[i(408)](e,this.indexOffset+t),this},f[a(464)][a(571)][a(327)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},f[a(464)].prototype[a(293)]=function(t,e,i){const n=a,s=this[n(483)],o=this[n(250)]+t*this[n(334)];return s[o]=e,s[o+1]=i,this},f[a(464)][a(571)][a(331)]=function(t,e){return this[a(304)](t,e.x,e.y,e.z)},f[a(464)][a(571)][a(304)]=function(t,e,i,n){const s=a,o=this[s(483)],r=this[s(250)]+t*this.componentSize;return o[r]=e,o[r+1]=i,o[r+2]=n,this},f[a(464)][a(571)].setVec4=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},f[a(464)][a(571)][a(290)]=function(t,e,i,n,s){const o=a,r=this[o(483)],c=this[o(250)]+t*this[o(334)];return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=s,this},f.TypedArrayHelper[a(571)][a(197)]=function(t,e){const i=a;return this[i(131)](this[i(250)]+t*this.componentSize,e[i(301)])},f[a(464)].prototype[a(259)]=function(t,e){const i=a;return this[i(131)](this[i(250)]+t*this[i(334)],e[i(301)])},f.TypedArrayHelper[a(571)][a(514)]=function(t,e){return this[a(304)](t,e.r,e.g,e.b)},f[a(464)][a(571)][a(420)]=function(t,e){const i=a;return this[i(483)][this[i(250)]+t*this.componentSize]=e,this},f[a(464)][a(571)][a(274)]=function(t){const e=a;return this[e(483)][this[e(250)]+t]},f[a(464)][a(571)][a(311)]=function(t){const e=a;return this.array.subarray(this.indexOffset+t*this[e(334)])},f[a(296)]=function(t,e,i){const n=a,s=f.ShaderAttribute[n(488)];this[n(278)]=typeof t===n(409)&&s[n(238)](t)?t:"f",this[n(334)]=s[this[n(278)]],this.arrayType=i||Float32Array,this[n(381)]=null,this[n(307)]=null,this.dynamicBuffer=!!e,this[n(306)]=0,this[n(467)]=0},f[a(296)][a(549)]=f[a(296)],f.ShaderAttribute[a(488)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f[a(296)][a(571)][a(482)]=function(t,e){const i=a;this[i(306)]=Math.min(t*this[i(334)],this[i(306)]*this[i(334)]),this[i(467)]=Math[i(527)](e*this.componentSize,this[i(467)]*this[i(334)])},f[a(296)][a(571)][a(292)]=function(){const t=a,e=this[t(307)];!e[t(582)]&&(e.updateRange={});const i=e[t(582)];i.offset=this[t(306)],i[t(330)]=Math[t(204)](this[t(467)]-this.updateMin+this[t(334)],this.typedArray[t(483)][t(271)]),e[t(497)]=!0},f[a(296)][a(571)][a(127)]=function(){const t=a;this[t(306)]=0,this[t(467)]=0},f[a(296)].prototype[a(156)]=function(){const e=a;this.bufferAttribute.usage=this[e(165)]?t[e(450)]:t[e(504)]},f.ShaderAttribute[a(571)].splice=function(t,e){const i=a;this[i(381)][i(219)](t,e),this[i(351)]()},f[a(296)][a(571)][a(351)]=function(){const e=a;this[e(307)][e(483)]=this.typedArray.array,this[e(307)][e(582)].offset=0,this[e(307)].updateRange[e(330)]=-1,this[e(307)][e(280)]=t[e(504)],this[e(307)][e(497)]=!0},f[a(296)][a(571)][a(428)]=function(t){const e=a;null!==this.typedArray&&this[e(381)][e(357)]===t*this[e(334)]||(null!==this.typedArray&&this[e(381)][e(357)]!==t?this[e(381)].setSize(t):null===this[e(381)]&&(this[e(381)]=new(f[e(464)])(this[e(187)],t,this[e(334)])))},f.ShaderAttribute[a(571)][a(361)]=function(i){const n=a;if(this._ensureTypedArray(i),null!==this[n(307)])return this[n(307)].array=this[n(381)].array,parseFloat(t[n(345)])>=81&&(this[n(307)][n(330)]=this.bufferAttribute.array[n(271)]/this[n(307)][n(337)]),void(this[n(307)][n(497)]=!0);this[n(307)]=new e(this[n(381)][n(483)],this[n(334)]),this[n(307)].usage=this[n(165)]?t[n(450)]:t[n(504)]},f.ShaderAttribute[a(571)][a(418)]=function(){const t=a;return null===this[t(381)]?0:this[t(381)][t(483)][t(271)]},f[a(443)]={defines:[a(283),a(147)].join("\n"),uniforms:[a(138),"uniform float runTime;",a(545),a(146),a(220)].join("\n"),attributes:[a(424),"attribute vec3 velocity;",a(575),"attribute vec3 rotationCenter;",a(446),a(332),a(427),a(390),a(310)].join("\n"),varyings:[a(568),a(429),a(194),a(393),a(198),"    varying vec4 vSpriteSheet;",a(393)][a(185)]("\n"),branchAvoidanceFunctions:[a(448),a(494),"}",a(538),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {",a(333),"}",a(159),a(162),"}",a(153),a(145),"}",a(423),"    return a * b;","}","float or(float a, float b) {","    return min(a + b, 1.0);","}"][a(185)]("\n"),unpackColor:[a(578),a(539),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(260),a(130),a(515),a(370),a(577),a(506),"}"][a(185)]("\n"),unpackRotationAxis:[a(136),a(539),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(260),"   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;",a(577),a(353),"   c -= vec3( 1.0 );",a(506),"}"].join("\n"),floatOverLifetime:[a(329),"    highp float value = 0.0;",a(356),"    float fIndex = 0.0;",a(279),a(282),"",a(380),a(355),"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );",a(500),a(148),"","    return value;","}"][a(185)]("\n"),colorOverLifetime:[a(442),a(349),"    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );",a(366),a(255),a(551),"}"][a(185)]("\n"),paramFetchingFunctions:["float getAlive() {",a(225),"}",a(441),a(405),"}",a(122),a(222),"}",a(484),a(480),"}"][a(185)]("\n"),forceFetchingFunctions:[a(437),a(215),"}","vec3 getVelocity( in float age ) {","   return velocity * age;","}",a(485),a(434),"}"].join("\n"),rotationFunctions:[a(559),a(196),a(570),a(375),"       float c = cos(angle);","       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,",a(402),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",a(226),"   }","",a(202),a(161),a(365),a(565),"",a(505),a(318),a(383),a(169),a(460),a(221),a(495),a(319),a(243),a(317),a(392),a(393)][a(185)]("\n"),rotateTexture:[a(133),"",a(261),a(472),a(359),"       float c = cos( -vAngle );",a(576),a(181),a(439),"",a(430),a(352),a(339),a(452),"        float rowNorm = vSpriteSheet.w;",a(550),a(253),a(439),"",a(470)].join("\n")},f[a(438)]={vertex:[f[a(443)][a(321)],f[a(443)][a(344)],f.shaderChunks[a(281)],f[a(443)][a(512)],t[a(561)][a(478)],t[a(561)][a(325)],t[a(561)][a(295)],f[a(443)][a(186)],f[a(443)].unpackColor,f[a(443)][a(168)],f.shaderChunks[a(312)],f.shaderChunks.colorOverLifetime,f[a(443)][a(397)],f[a(443)].forceFetchingFunctions,f[a(443)][a(323)],"void main() {",a(501),a(266),"    highp float maxAge = getMaxAge();","    highp float positionInTime = (age / maxAge);",a(276),a(217),a(518),a(490),a(468),a(439),a(398),"    vec3 accel = getAcceleration( age );",a(150),a(265),a(493),a(258),"    force *= drag;",a(270),a(387),a(217),a(433),a(155),"        pos.z += wiggleSin;","    #endif",a(388),a(286),a(439),a(289),a(164),a(364),"        float perspective = scale / length( mvPosition.xyz );",a(128),a(172),"    #endif",a(389),a(522),a(354),a(499),a(199),a(436),"           unpackColor( color.z ),",a(573),a(449),"    #else","       vec3 c = vec3(1.0);",a(439),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",a(535),a(261),a(513),a(439),a(430),a(486),a(213),a(228),"        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",a(284),a(379),a(324),a(314),a(335),a(521),a(326),a(248),a(439),a(411),a(294),i[a(487)],i[a(435)],"}"][a(185)]("\n"),fragment:[f[a(443)].uniforms,t[a(561)][a(478)],t[a(561)].fog_pars_fragment,t[a(561)][a(182)],f[a(443)].varyings,f[a(443)][a(186)],a(268),a(476),"    ",a(287),"       if ( vColor.w < float(ALPHATEST) ) discard;",a(439),f[a(443)][a(560)],t[a(561)][a(374)],a(234),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[a(561)].fog_fragment,"}"][a(185)]("\n")},f.utils={types:{BOOLEAN:a(140),STRING:"string",NUMBER:a(548),OBJECT:a(309)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this[n(525)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array.isArray(t)){for(let s=t[n(271)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(557)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(285)](t[n(373)])&&(t._value=[t[n(373)]]),!1===Array.isArray(t[n(297)])&&(t._spread=[t[n(297)]]);const s=this[n(126)](t[n(373)][n(271)],e,i),o=this[n(126)](t._spread.length,e,i),r=Math[n(527)](s,o);t._value[n(271)]!==r&&(t[n(373)]=this[n(562)](t[n(373)],r)),t._spread.length!==r&&(t[n(297)]=this[n(562)](t[n(297)],r))},interpolateArray(t,e){const i=a,n=t[i(271)],s=[typeof t[0].clone===i(454)?t[0].clone():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math.floor(e),a=Math[i(360)](e),c=e-n;s[r]=this[i(316)](t[n],t[a],c)}return s[i(137)](typeof t[n-1][i(555)]===i(454)?t[n-1][i(555)]():t[n-1]),s},clamp(t,e,i){const n=a;return Math[n(527)](e,Math[n(204)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,o){const r=a;let c,h=this.types;return typeof e===h[r(218)]&&typeof i===h.NUMBER?e+(i-e)*o:e instanceof t[r(267)]&&i instanceof t[r(267)]?(c=e[r(555)](),c.x=this[r(341)](e.x,i.x,o),c.y=this[r(341)](e.y,i.y,o),c):e instanceof n&&i instanceof t[r(552)]?(c=e[r(555)](),c.x=this.lerp(e.x,i.x,o),c.y=this[r(341)](e.y,i.y,o),c.z=this[r(341)](e.z,i.z,o),c):e instanceof t[r(457)]&&i instanceof t[r(457)]?(c=e[r(555)](),c.x=this[r(341)](e.x,i.x,o),c.y=this[r(341)](e.y,i.y,o),c.z=this[r(341)](e.z,i.z,o),c.w=this[r(341)](e.w,i.w,o),c):e instanceof s&&i instanceof t[r(481)]?(c=e.clone(),c.r=this[r(341)](e.r,i.r,o),c.g=this[r(341)](e.g,i.g,o),c.b=this.lerp(e.b,i.b,o),c):void console[r(313)](r(489),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=a;let n=0;return 0===e?t:(n=Math[i(180)](t)%e,0===n?t:t<0?-(Math[i(180)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=a;for(let i=0;i<t[e(271)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[a(275)]()-.5),randomVector3(t,e,i,n,s){const o=a;let r=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math[o(275)]()*n.y-.5*n.y),h=i.z+(Math[o(275)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this.roundToNearestMultiple(r,s.x),c=.5*-s.y+this[o(459)](c,s.y),h=.5*-s.z+this[o(459)](h,s.z)),t.typedArray.setVec3Components(e,r,c,h)},randomColor(t,e,i,n){const s=a;let o=i.r+Math[s(275)]()*n.x,r=i.g+Math[s(275)]()*n.y,c=i.b+Math[s(275)]()*n.z;o=this.clamp(o,0,1),r=this[s(126)](r,0,1),c=this[s(126)](c,0,1),t[s(381)][s(304)](e,o,r,c)},randomColorAsHex:function(){const e=a,i=new(t[e(481)]);return function(t,n,s,o){const r=e,a=s.length,c=[];for(let e=0;e<a;++e){const t=o[e];i[r(425)](s[e]),i.r+=Math[r(275)]()*t.x-.5*t.x,i.g+=Math[r(275)]()*t.y-.5*t.y,i.b+=Math[r(275)]()*t.z-.5*t.z,i.r=this[r(126)](i.r,0,1),i.g=this.clamp(i.g,0,1),i.b=this[r(126)](i.b,0,1),c[r(137)](i.getHex())}t[r(381)][r(290)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=a,o=i[s(555)]();o[s(341)](n,Math[s(275)]()),t[s(381)][s(304)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,c){const h=a;let l=2*Math[h(275)]()-1,u=6.2832*Math[h(275)](),f=Math[h(546)](1-l*l),p=this[h(272)](n,s),d=0,m=0,g=0;r&&(p=Math[h(537)](p/r)*r),d=f*Math[h(474)](u)*p,m=f*Math[h(542)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[h(381)][h(304)](e,d,m,g)},seededRandom(t){const e=1e4*Math[a(542)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const c=a;let h=6.2832*Math[c(275)](),l=Math[c(180)](this[c(272)](n,s)),u=0,f=0,p=0;r&&(l=Math[c(537)](l/r)*r),u=Math.cos(h)*l,f=Math[c(542)](h)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t.typedArray.setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=a,i=new(t[e(552)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(425)](a),i.x-=s,i.y-=o,i.z-=r,i[l(160)]().multiplyScalar(-this[l(272)](c,h)),t[l(381)].setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=a,i=new(t[e(552)]);return function(t,n,s,o,r,a,c,h){const l=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[l(160)]()[l(254)](-this[l(272)](c,h)),t[l(381)].setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=a,i=new n,s=new n,o=new(t[e(481)]),r=new(t[e(552)])(1,1,1);return function(t,n){const a=e;return i[a(425)](t)[a(160)](),s[a(425)](n).normalize(),i.x+=.5*-n.x+Math.random()*n.x,i.y+=.5*-n.y+Math[a(275)]()*n.y,i.z+=.5*-n.z+Math.random()*n.z,i[a(160)]()[a(229)](r)[a(254)](.5),o[a(120)](i.x,i.y,i.z),o[a(363)]()}}()},f[a(144)]=function(e){const i=a,n=f.utils,s=n[i(404)];(e=n[i(525)](e,s[i(189)],{})).texture=n[i(525)](e[i(382)],s.OBJECT,{}),this.uuid=o[i(237)](),this[i(491)]=n[i(525)](e[i(491)],s[i(218)],.016),this[i(382)]=n.ensureInstanceOf(e[i(382)][i(249)],r,null),this.textureFrames=n.ensureInstanceOf(e[i(382)][i(440)],t[i(267)],new(t[i(267)])(1,1)),this[i(125)]=n[i(525)](e[i(382)][i(517)],s.NUMBER,this[i(579)].x*this[i(579)].y),this.textureLoop=n[i(525)](e[i(382)][i(252)],s[i(218)],1),this[i(579)].max(new(t[i(267)])(1,1)),this[i(431)]=n.ensureTypedArg(e[i(431)],s[i(378)],!0),this.colorize=n[i(525)](e[i(523)],s.BOOLEAN,!0),this[i(205)]=n.ensureTypedArg(e[i(205)],s[i(218)],null),this.blending=n[i(525)](e.blending,s[i(218)],t[i(447)]),this[i(179)]=n[i(525)](e[i(179)],s[i(378)],!0),this[i(524)]=parseFloat(n[i(525)](e.alphaTest,s.NUMBER,0)),this[i(498)]=n[i(525)](e.depthWrite,s.BOOLEAN,!1),this[i(149)]=n.ensureTypedArg(e[i(149)],s.BOOLEAN,!0),this[i(209)]=n.ensureTypedArg(e.fog,s[i(378)],!0),this[i(340)]=n.ensureTypedArg(e[i(340)],s[i(218)],300),this[i(132)]=[],this[i(399)]=[],this[i(277)]=[],this[i(519)]=null,this._createNewWhenPoolEmpty=0,this[i(492)]=!1,this[i(208)]=!1,this[i(210)]=0,this.uniforms={tex:{type:"t",value:this[i(382)]},textureAnimation:{type:"v4",value:new(t[i(457)])(this.textureFrames.x,this[i(579)].y,this[i(125)],Math[i(527)](Math.abs(this[i(510)]),1))},fogColor:{type:"c",value:this[i(209)]?new(t[i(481)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(340)]}},this[i(321)]={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:f[i(300)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(579)].x>1||this[i(579)].y>1},this[i(281)]={position:new(f[i(296)])("v3",!0),acceleration:new f.ShaderAttribute("v4",!0),velocity:new(f[i(296)])("v3",!0),rotation:new(f[i(296)])("v4",!0),rotationCenter:new(f[i(296)])("v3",!0),params:new(f[i(296)])("v4",!0),size:new f.ShaderAttribute("v4",!0),angle:new(f[i(296)])("v4",!0),color:new(f[i(296)])("v4",!0),opacity:new(f[i(296)])("v4",!0)},this[i(377)]=Object[i(463)](this[i(281)]),this[i(451)]=this.attributeKeys[i(271)],this[i(406)]=new(t[i(572)])({uniforms:this.uniforms,vertexShader:f[i(438)].vertex,fragmentShader:f[i(438)][i(532)],blending:this[i(191)],transparent:this[i(179)],alphaTest:this[i(524)],depthWrite:this[i(498)],depthTest:this.depthTest,defines:this[i(321)],fog:this[i(209)]}),this[i(291)]=new(t[i(511)]),this[i(167)]=new(t[i(541)])(this[i(291)],this[i(406)]),null===this[i(205)]&&console[i(313)](i(540))},f[a(144)][a(549)]=f.Group,f[a(144)][a(571)][a(273)]=function(){const t=a;let e,i=this[t(132)],n=i[t(271)]-1,s=this[t(321)];for(;n>=0;--n)e=i[n],!s.SHOULD_CALCULATE_SPRITE&&(s[t(235)]=s[t(235)]||!!Math[t(527)](Math.max.apply(null,e[t(401)][t(249)]),Math.max[t(509)](null,e[t(401)][t(134)]))),s[t(142)]=s[t(142)]||!!Math.max(e[t(496)][t(401)],e[t(496)][t(207)]),s[t(415)]=s.SHOULD_WIGGLE_PARTICLES||!!Math[t(527)](e[t(391)][t(249)],e.wiggle[t(134)]);this.material[t(497)]=!0},f.Group[a(571)]._applyAttributesToGeometry=function(){const t=a;let e,i,n=this[t(281)],s=this[t(291)],o=s[t(281)];for(const r in n)n[t(238)](r)&&(e=n[r],i=o[r],i?i[t(483)]=e.typedArray[t(483)]:s[t(241)](r,e[t(307)]),e.bufferAttribute[t(497)]=!0);this[t(291)][t(528)](0,this.particleCount)},f.Group.prototype[a(342)]=function(t){const e=a;if(t instanceof f[e(262)]==!1)return void console[e(154)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(399)].indexOf(t[e(177)])>-1)return void console[e(154)](e(403));if(null!==t[e(247)])return void console[e(154)](e(566));const i=this[e(281)],n=this[e(210)],s=n+t[e(210)];this.particleCount=s,null!==this.maxParticleCount&&this[e(210)]>this[e(205)]&&console[e(313)](e(263),this[e(210)],"particles, can support only",this[e(205)]),t[e(558)](t[e(223)][e(373)]+t[e(223)][e(297)]),t[e(503)](this[e(377)]),t[e(410)](n),t[e(247)]=this,t[e(281)]=this.attributes;for(const o in i)i[e(238)](o)&&i[o]._createBufferAttribute(null!==this.maxParticleCount?this[e(205)]:this[e(210)]);for(let o=n;o<s;++o)t[e(346)](o),t._assignForceValue(o,e(456)),t[e(347)](o,"acceleration"),t[e(166)](o,"opacity"),t[e(166)](o,e(357)),t[e(315)](o),t[e(216)](o),t._assignParamsValue(o),t[e(520)](o);return this[e(227)](),this.emitters.push(t),this[e(399)][e(137)](t[e(177)]),this[e(273)](t),this[e(406)][e(497)]=!0,this[e(291)][e(497)]=!0,this[e(492)]=!0,this},f[a(144)].prototype[a(458)]=function(t){const e=a,i=this[e(399)][e(246)](t[e(177)]);if(t instanceof f.Emitter==!1)return void console.error(e(385),t);if(-1===i)return void console[e(154)](e(580));const n=t.attributeOffset,s=n+t[e(210)],o=this.attributes[e(479)][e(381)];for(let r=n;r<s;++r)o[e(483)][4*r]=0,o[e(483)][4*r+1]=0;this[e(132)].splice(i,1),this[e(399)][e(219)](i,1);for(const r in this.attributes)this[e(281)][e(238)](r)&&this.attributes[r][e(219)](n,s);this[e(210)]-=t[e(210)],t[e(461)](),this._attributesNeedRefresh=!0},f[a(144)][a(571)][a(343)]=function(){const t=a,e=this[t(277)],i=this[t(173)];if(e[t(271)])return e.pop();if(i){const e=new(f[t(262)])(this[t(519)]);return this[t(342)](e),e}return null},f[a(144)][a(571)][a(305)]=function(t){const e=a;if(t instanceof f.Emitter!=!1)return t[e(473)](),this[e(277)].unshift(t),this;console.error("Argument is not instanceof SPE.Emitter:",t)},f[a(144)][a(571)].getPool=function(){return this[a(277)]},f[a(144)][a(571)][a(508)]=function(t,e,i){const n=a;let s;this._poolCreationSettings=e,this._createNewWhenPoolEmpty=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(f[n(262)])(e[o]):new(f[n(262)])(e),this[n(342)](s),this.releaseIntoPool(s);return this},f[a(144)][a(571)][a(469)]=function(e){const i=a,n=this[i(343)](),s=this;if(null!==n)return e instanceof t[i(552)]&&(n[i(553)].value[i(425)](e),n[i(553)].value=n[i(553)][i(249)]),n[i(170)](),setTimeout((()=>{const t=i;n[t(422)](),s[t(305)](n)}),1e3*Math.max(n[i(421)],n[i(223)][i(249)]+n[i(223)][i(134)])),this;console[i(574)]("SPE.Group pool ran out.")},f[a(144)][a(571)][a(338)]=function(t,e){const i=a;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(469)](e);else this[i(469)](e);return this},f[a(144)][a(571)]._updateUniforms=function(t){const e=a;this.uniforms.runTime[e(249)]+=t,this[e(344)][e(233)].value=t},f[a(144)][a(571)]._resetBufferRanges=function(){const t=a;let e=this[t(377)],i=this[t(451)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]].resetUpdateRange()},f[a(144)].prototype[a(135)]=function(t){const e=a;let i,n,s,o=this[e(377)],r=this[e(451)]-1,c=this[e(281)],h=t[e(124)];for(;r>=0;--r)i=o[r],n=h[i],s=c[i],s[e(482)](n[e(204)],n[e(527)]),s[e(292)]()},f.Group[a(571)][a(419)]=function(t){const e=a;var i=this[e(132)],n=i[e(271)],s=t||this[e(491)],o=this[e(377)],r=this[e(281)];if(this[e(245)](s),this[e(322)](),0!==n||!1!==this[e(492)]||!1!==this[e(208)]){for(var c,h=0;h<n;++h)(c=i[h]).tick(s),this[e(135)](c);if(!0===this[e(208)]){for(h=this[e(451)]-1;h>=0;--h)r[o[h]][e(156)]();this[e(208)]=!1}if(!0===this[e(492)]){for(h=this[e(451)]-1;h>=0;--h)r[o[h]][e(351)]();this._attributesNeedRefresh=!1,this[e(208)]=!0}}},f[a(144)][a(571)][a(230)]=function(){const t=a;return this[t(291)][t(230)](),this[t(406)][t(230)](),this},f[a(262)]=function(e){const i=a,s=f[i(395)],r=s.types,c=f[i(300)];(e=s[i(525)](e,r[i(189)],{}))[i(553)]=s[i(525)](e[i(553)],r[i(189)],{}),e[i(456)]=s.ensureTypedArg(e[i(456)],r[i(189)],{}),e[i(240)]=s[i(525)](e[i(240)],r[i(189)],{}),e[i(372)]=s[i(525)](e[i(372)],r.OBJECT,{}),e.drag=s[i(525)](e.drag,r.OBJECT,{}),e[i(496)]=s.ensureTypedArg(e.rotation,r[i(189)],{}),e[i(453)]=s[i(525)](e.color,r[i(189)],{}),e.opacity=s[i(525)](e[i(534)],r[i(189)],{}),e.size=s.ensureTypedArg(e[i(357)],r.OBJECT,{}),e[i(401)]=s.ensureTypedArg(e[i(401)],r[i(189)],{}),e[i(391)]=s[i(525)](e[i(391)],r.OBJECT,{}),e[i(223)]=s[i(525)](e.maxAge,r[i(189)],{}),e.onParticleSpawn&&console[i(313)](i(477)),this[i(177)]=o.generateUUID(),this[i(278)]=s[i(525)](e[i(278)],r[i(218)],f.distributions[i(244)]),this[i(553)]={_value:s[i(557)](e[i(553)][i(249)],t[i(552)],new n),_spread:s[i(557)](e[i(553)][i(134)],t[i(552)],new n),_spreadClamp:s[i(557)](e[i(553)].spreadClamp,n,new n),_distribution:s[i(525)](e[i(553)][i(212)],r[i(218)],this[i(278)]),_randomise:s[i(525)](e[i(553)][i(288)],r[i(378)],!1),_radius:s[i(525)](e[i(553)][i(372)],r[i(218)],10),_radiusScale:s[i(557)](e[i(553)][i(400)],t[i(552)],new(t[i(552)])(1,1,1)),_distributionClamp:s[i(525)](e[i(553)].distributionClamp,r[i(218)],0)},this[i(456)]={_value:s.ensureInstanceOf(e[i(456)].value,t[i(552)],new n),_spread:s[i(557)](e[i(456)][i(134)],t[i(552)],new(t[i(552)])),_distribution:s.ensureTypedArg(e[i(456)][i(212)],r[i(218)],this[i(278)]),_randomise:s[i(525)](e[i(553)][i(288)],r.BOOLEAN,!1)},this[i(240)]={_value:s[i(557)](e[i(240)][i(249)],n,new(t[i(552)])),_spread:s[i(557)](e[i(240)][i(134)],t[i(552)],new(t[i(552)])),_distribution:s.ensureTypedArg(e[i(240)][i(212)],r.NUMBER,this[i(278)]),_randomise:s[i(525)](e[i(553)][i(288)],r[i(378)],!1)},this[i(529)]={_value:s[i(525)](e[i(529)][i(249)],r[i(218)],0),_spread:s[i(525)](e[i(529)].spread,r[i(218)],0),_randomise:s[i(525)](e[i(553)][i(288)],r[i(378)],!1)},this[i(391)]={_value:s[i(525)](e[i(391)].value,r[i(218)],0),_spread:s[i(525)](e[i(391)].spread,r[i(218)],0)},this[i(496)]={_axis:s[i(557)](e[i(496)].axis,n,new(t[i(552)])(0,1,0)),_axisSpread:s[i(557)](e.rotation[i(143)],n,new n),_angle:s[i(525)](e.rotation[i(401)],r[i(218)],0),_angleSpread:s[i(525)](e[i(496)][i(207)],r[i(218)],0),_static:s[i(525)](e[i(496)][i(200)],r[i(378)],!1),_center:s.ensureInstanceOf(e[i(496)][i(564)],t[i(552)],this.position[i(373)].clone()),_randomise:s[i(525)](e[i(553)][i(288)],r[i(378)],!1)},this[i(223)]={_value:s[i(525)](e.maxAge[i(249)],r.NUMBER,2),_spread:s[i(525)](e[i(223)][i(134)],r[i(218)],0)},this[i(453)]={_value:s[i(141)](e[i(453)][i(249)],t[i(481)],new(t[i(481)])),_spread:s.ensureArrayInstanceOf(e[i(453)].spread,n,new n),_randomise:s[i(525)](e[i(553)].randomise,r[i(378)],!1)},this[i(534)]={_value:s[i(386)](e[i(534)][i(249)],r[i(218)],1),_spread:s.ensureArrayTypedArg(e[i(534)][i(134)],r.NUMBER,0),_randomise:s[i(525)](e[i(553)][i(288)],r.BOOLEAN,!1)},this.size={_value:s[i(386)](e[i(357)][i(249)],r[i(218)],1),_spread:s[i(386)](e[i(357)].spread,r[i(218)],0),_randomise:s[i(525)](e[i(553)].randomise,r.BOOLEAN,!1)},this[i(401)]={_value:s[i(386)](e[i(401)][i(249)],r[i(218)],0),_spread:s.ensureArrayTypedArg(e.angle[i(134)],r[i(218)],0),_randomise:s[i(525)](e.position[i(288)],r[i(378)],!1)},this[i(210)]=s.ensureTypedArg(e[i(210)],r[i(218)],100),this[i(421)]=s[i(525)](e[i(421)],r[i(218)],null),this[i(239)]=s.ensureTypedArg(e[i(239)],r[i(378)],!1),this[i(269)]=s.ensureTypedArg(e.activeMultiplier,r[i(218)],1),this.direction=s[i(525)](e[i(414)],r[i(218)],1),this.alive=s[i(525)](e.alive,r[i(378)],!0),this.particlesPerSecond=0,this[i(581)]=0,this[i(308)]=0,this[i(417)]=0,this.age=0,this.activeParticleCount=0,this.group=null,this[i(281)]=null,this[i(298)]=null,this[i(119)]={position:s[i(525)](e.position[i(288)],r.BOOLEAN,!1)||s[i(525)](e[i(372)][i(288)],r[i(378)],!1),velocity:s[i(525)](e[i(456)][i(288)],r.BOOLEAN,!1),acceleration:s[i(525)](e[i(240)].randomise,r[i(378)],!1)||s[i(525)](e[i(529)].randomise,r.BOOLEAN,!1),rotation:s[i(525)](e[i(496)][i(288)],r.BOOLEAN,!1),rotationCenter:s[i(525)](e.rotation[i(288)],r[i(378)],!1),size:s[i(525)](e[i(357)][i(288)],r[i(378)],!1),color:s[i(525)](e[i(453)][i(288)],r[i(378)],!1),opacity:s.ensureTypedArg(e[i(534)].randomise,r[i(378)],!1),angle:s.ensureTypedArg(e[i(401)][i(288)],r[i(378)],!1)},this[i(502)]={},this.updateCounts={},this[i(236)]={maxAge:"params",position:i(553),velocity:i(456),acceleration:i(240),drag:i(240),wiggle:i(479),rotation:i(496),size:"size",color:i(453),opacity:i(534),angle:"angle"};for(const t in this[i(236)])this[i(236)].hasOwnProperty(t)&&(this[i(171)][this[i(236)][t]]=0,this[i(502)][this[i(236)][t]]=!1,this[i(475)](this[t],t));this[i(124)]={},this.attributeKeys=null,this.attributeCount=0,s[i(530)](this[i(453)],c,c),s[i(530)](this[i(534)],c,c),s[i(530)](this[i(357)],c,c),s[i(530)](this[i(401)],c,c)},f[a(262)][a(549)]=f.Emitter,f[a(262)].prototype._createGetterSetters=function(t,e){const i=a,n=this;for(const s in t)if(t.hasOwnProperty(s)){const o=s.replace("_","");Object[i(432)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=h,o=n[s(236)][e],r=this[t],a=f.valueOverLifetimeLength;t===s(151)?(n[s(502)][s(264)]=!0,n[s(171)][s(264)]=0):t===s(206)?n[s(119)][o]=i:(n[s(502)][o]=!0,n.updateCounts[o]=0),n[s(247)]._updateDefines(),this[t]=i,Array[s(285)](r)&&f[s(395)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(s)})}},f.Emitter.prototype._setBufferUpdateRanges=function(t){const e=a;this.attributeKeys=t,this[e(451)]=t[e(271)];for(let i=this.attributeCount-1;i>=0;--i)this[e(124)][t[i]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},f[a(262)][a(571)][a(558)]=function(t){const e=a,i=this[e(210)];this.duration?this[e(348)]=i/(t<this[e(421)]?t:this[e(421)]):this[e(348)]=i/t},f[a(262)][a(571)][a(410)]=function(t){const e=a;this[e(308)]=t,this[e(581)]=t,this[e(358)]=t+this[e(210)]},f[a(262)][a(571)][a(455)]=function(t,e){const i=a;switch(t){case i(553):this[i(346)](e);break;case i(456):case i(240):this[i(347)](e,t);break;case i(357):case i(534):this._assignAbsLifetimeValue(e,t);break;case i(401):this[i(315)](e);break;case i(479):this._assignParamsValue(e);break;case i(496):this[i(216)](e);break;case i(453):this._assignColorValue(e)}},f.Emitter[a(571)][a(346)]=function(t){const e=a,i=f.distributions,n=f[e(395)],s=this[e(553)],o=this[e(281)][e(553)],r=s[e(373)],c=s[e(297)];switch(s[e(531)]){case i[e(244)]:n[e(445)](o,t,r,c,s[e(412)]);break;case i[e(547)]:n.randomVector3OnSphere(o,t,r,s[e(465)],s._spread.x,s._radiusScale,s._spreadClamp.x,s[e(152)]||this[e(210)]);break;case i[e(176)]:n[e(462)](o,t,r,s._radius,s[e(297)].x,s[e(232)],s[e(412)].x);break;case i[e(569)]:n[e(328)](o,t,r,c)}},f[a(262)][a(571)][a(347)]=function(t,e){const i=a;let n,s,o,r,c,h=f.distributions,l=f.utils,u=this[e],p=u[i(373)],d=u[i(297)];switch(u[i(531)]){case h[i(244)]:l[i(445)](this[i(281)][e],t,p,d);break;case h[i(547)]:n=this[i(281)][i(553)].typedArray[i(483)],c=3*t,s=n[c],o=n[c+1],r=n[c+2],l[i(396)](this[i(281)][e],t,s,o,r,this[i(553)][i(373)],u._value.x,u[i(297)].x);break;case h.DISC:n=this.attributes[i(553)][i(381)][i(483)],c=3*t,s=n[c],o=n[c+1],r=n[c+2],l[i(175)](this.attributes[e],t,s,o,r,this.position[i(373)],u._value.x,u[i(297)].x);break;case h.LINE:l[i(328)](this[i(281)][e],t,p,d)}if(e===i(240)){const e=l[i(126)](l[i(272)](this[i(529)][i(373)],this[i(529)][i(297)]),0,1);this.attributes[i(240)][i(381)][i(483)][4*t+3]=e}},f[a(262)][a(571)][a(166)]=function(t,e){const i=a;let n,s=this[i(281)][e][i(381)],o=this[e],r=f[i(395)];r[i(536)](o[i(373)])&&r.arrayValuesAreEqual(o[i(297)])?(n=Math[i(180)](r[i(272)](o[i(373)][0],o[i(297)][0])),s.setVec4Components(t,n,n,n,n)):s[i(290)](t,Math[i(180)](r.randomFloat(o._value[0],o[i(297)][0])),Math[i(180)](r[i(272)](o[i(373)][1],o[i(297)][1])),Math[i(180)](r[i(272)](o[i(373)][2],o._spread[2])),Math[i(180)](r.randomFloat(o[i(373)][3],o[i(297)][3])))},f[a(262)][a(571)][a(315)]=function(t){const e=a;let i,n=this[e(281)][e(401)][e(381)],s=this[e(401)],o=f[e(395)];o.arrayValuesAreEqual(s[e(373)])&&o[e(536)](s._spread)?(i=o[e(272)](s[e(373)][0],s[e(297)][0]),n.setVec4Components(t,i,i,i,i)):n[e(290)](t,o[e(272)](s[e(373)][0],s[e(297)][0]),o.randomFloat(s[e(373)][1],s[e(297)][1]),o.randomFloat(s[e(373)][2],s[e(297)][2]),o[e(272)](s[e(373)][3],s[e(297)][3]))},f[a(262)][a(571)][a(407)]=function(t){const e=a;this[e(281)][e(479)].typedArray[e(290)](t,this[e(239)]?1:0,0,Math[e(180)](f[e(395)][e(272)](this[e(223)][e(373)],this.maxAge._spread)),f[e(395)][e(272)](this[e(391)][e(373)],this[e(391)][e(297)]))},f[a(262)][a(571)][a(216)]=function(t){const e=a;this[e(281)][e(496)][e(381)][e(304)](t,f[e(395)].getPackedRotationAxis(this[e(496)]._axis,this[e(496)][e(369)]),f[e(395)][e(272)](this[e(496)][e(184)],this[e(496)][e(183)]),this[e(496)][e(193)]?0:1),this[e(281)].rotationCenter[e(381)][e(331)](t,this[e(496)]._center)},f[a(262)][a(571)][a(520)]=function(t){const e=a;f[e(395)][e(299)](this[e(281)][e(453)],t,this.color[e(373)],this[e(453)][e(297)])},f[a(262)].prototype[a(157)]=function(t){const e=a;let i,n,s=this[e(119)],o=this.updateFlags,r=this[e(171)],c=this[e(377)];for(let a=this[e(451)]-1;a>=0;--a)i=c[a],n=o[i],!0!==s[i]&&!0!==n||(this[e(455)](i,t),this[e(118)](i,t),!0===n&&r[i]===this[e(210)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},f.Emitter[a(571)][a(118)]=function(t,e){const i=a,n=this[i(124)][t];n[i(204)]=Math[i(204)](e,n[i(204)]),n[i(527)]=Math[i(527)](e,n[i(527)])},f.Emitter.prototype[a(322)]=function(){const t=a;let e,i=this.bufferUpdateRanges,n=this.bufferUpdateKeys,s=this[t(203)]-1;for(;s>=0;--s)e=n[s],i[e][t(204)]=Number[t(367)],i[e][t(527)]=Number.NEGATIVE_INFINITY},f[a(262)][a(571)][a(461)]=function(){const t=a;this.particlesPerSecond=0,this[t(308)]=0,this.activationIndex=0,this[t(121)]=0,this[t(247)]=null,this.attributes=null,this[t(298)]=null,this[t(384)]=0},f[a(262)][a(571)][a(336)]=function(){--this[a(121)]},f.Emitter[a(571)][a(211)]=function(){++this[a(121)]},f[a(262)][a(571)][a(556)]=function(t,e,i,n){const s=a;for(var o,r,c,h,l=e-1;l>=t;--l)0!==(h=i[o=4*l])&&(c=i[o+1],r=i[o+2],1===this[s(414)]?(c+=n)>=r&&(c=0,h=0,this[s(336)]()):(c-=n)<=0&&(c=r,h=0,this[s(336)]()),i[o]=h,i[o+1]=c,this[s(118)]("params",l))},f.Emitter[a(571)]._activateParticles=function(t,e,i,n){const s=a,o=this[s(414)];for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[s(210)]||(this[s(211)](),i[r]=1,this._resetParticle(h),c=n*(h-t),i[r+1]=-1===o?i[r+2]-c:c,this[s(118)](s(479),h))},f[a(262)][a(571)][a(419)]=function(t){const e=a;if(this[e(239)])return;null===this[e(298)]&&(this.paramsArray=this[e(281)][e(479)][e(381)][e(483)]);const i=this[e(308)],n=i+this[e(210)],s=this[e(298)],o=this[e(348)]*this[e(269)]*t,r=this.activationIndex;if(this[e(322)](),this[e(556)](i,n,s,t),!1===this[e(129)])return void(this.age=0);if(null!==this[e(421)]&&this[e(384)]>this[e(421)])return this[e(129)]=!1,void(this[e(384)]=0);const c=1===this[e(210)]?r:0|r,h=Math[e(204)](c+o,this[e(358)]),l=h-this[e(581)]|0,u=l>0?t/l:0;this[e(163)](c,h,s,u),this[e(581)]+=o,this[e(581)]>n&&(this[e(581)]=i),this[e(384)]+=t},f[a(262)][a(571)].reset=function(t){const e=a;if(this.age=0,this[e(129)]=!1,!0===t){const t=this[e(308)],s=t+this[e(210)],o=this[e(298)],r=this[e(281)][e(479)][e(307)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(582)][e(466)]=0,r[e(582)][e(330)]=-1,r.needsUpdate=!0}return this},f.Emitter.prototype[a(170)]=function(){return this[a(129)]=!0,this},f[a(262)][a(571)][a(422)]=function(){return this[a(129)]=!1,this},f[a(262)][a(571)][a(362)]=function(){const t=a;return null!==this[t(247)]?this[t(247)][t(458)](this):console[t(154)](t(231)),this};const p=f;function d(t){function e(t){const i=h;if(typeof t===i(409))return function(t){}[i(549)](i(563))[i(509)](i(303));1!==(""+t/t)[i(271)]||t%20==0?function(){return!0}.constructor("debu"+i(188))[i(201)]("action"):function(){return!1}.constructor(i(256)+i(188))[i(509)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

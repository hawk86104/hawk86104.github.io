var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.iIRYNJyq1728531791220.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.4hr-0Zdq1728531791220.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.mZPaz6KR1728531791220.js";import{k as o,U as s,C as l,m as c,W as u,bb as p,h as f,_ as x,V as v,at as m}from"./three.QbUqWzuy1728531791220.js";import{p as w,U as h}from"./@tresjs.TFxw2EXb1728531791220.js";import{u as g}from"./index.odAJy2kG1728531791220.js";import{F as y,C as S}from"./three-stdlib.STo_3R0X1728531791220.js";import{d}from"./@vue.bvMz0l_u1728531791220.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.rZBG-dNp1728531791220.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.d4lkDOC_1728531791220.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.4wIabXoG1728531791220.js";!function(t,e){const n=z,i=b();for(;;)try{if(296505===-parseInt(n(272))/1+-parseInt(n(267))/2+parseInt(n(283))/3*(-parseInt(n(291))/4)+parseInt(n(265))/5+-parseInt(n(294))/6*(parseInt(n(279))/7)+-parseInt(n(268))/8+-parseInt(n(262))/9*(-parseInt(n(296))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const P=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(292)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){P(this,(function(){const t=z,e=new RegExp(t(281)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=I(t(288));e[t(264)](i+t(270))&&n.test(i+t(285))?I():i("0")}))()}();const _=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();_(void 0,(function(){const t=z,e=function(){const t=z;let e;try{e=Function(t(261)+t(286)+");")()}catch(n){e=window}return e}(),n=e[t(269)]=e[t(269)]||{},i=[t(290),t(280),t(282),t(277),t(260),t(289),t(278)];for(let r=0;r<i[t(276)];r++){const e=_.constructor[t(271)][t(295)](_),a=i[r],o=n[a]||e;e[t(284)]=_[t(295)](_),e.toString=o[t(274)].bind(o),n[a]=e}}))();function z(t,e){const n=b();return(z=function(t,e){return n[t-=260]})(t,e)}function b(){const t=["error","trace","721rlEiVH","warn","function *\\( *\\)","info","330969GWuply","__proto__","input",'{}.constructor("return this")( )',"debu","init","table","log","20HBMTrB","apply","stateObject","23514obZTgU","bind","362490TutkuB","exception","return (function() ","315lgXBOz","gger","test","949415LxeyLi","while (true) {}","82554VGkitR","1062568EvBPvj","console","chain","prototype","32723nZPgIw","action","toString","constructor","length"];return(b=function(){return t})()}function I(t){function e(t){const n=z;if("string"==typeof t)return function(t){}[n(275)](n(266))[n(292)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(275)](n(287)+n(263)).call(n(273)):function(){return!1}[n(275)](n(287)+n(263))[n(292)](n(293)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const E=D;!function(t,e){const n=D,i=A();for(;;)try{if(413202===-parseInt(n(404))/1*(-parseInt(n(392))/2)+-parseInt(n(380))/3*(-parseInt(n(385))/4)+parseInt(n(372))/5*(-parseInt(n(406))/6)+parseInt(n(375))/7+parseInt(n(402))/8*(-parseInt(n(391))/9)+-parseInt(n(408))/10+parseInt(n(373))/11*(parseInt(n(374))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const M=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(382)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function A(){const t=["63PxsHIs","848058pFnkcC","call","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","gger","__proto__","console","test","trace","840272YYarJb","constructor","1mqhfXO","toString","102NgAXkW",'{}.constructor("return this")( )',"920790zYlwlB","input","stateObject","warn","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","defines","uniforms","chain","return (function() ","122215LSKpIv","1164724TgutEL","60DRMYuy","2056726lWWVPA","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","bind","debu","string","408783PEQDsB","init","apply","error","table","12QVgPYs","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","while (true) {}","length","clone","info"];return(A=function(){return t})()}!function(){M(this,(function(){const t=D,e=new RegExp(t(396)),n=new RegExp(t(395),"i"),i=V(t(381));e[t(400)](i+t(370))&&n[t(400)](i+t(409))?V():i("0")}))()}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function D(t,e){const n=A();return(D=function(t,e){return n[t-=369]})(t,e)}function T(t){const e=D,n=a({},t);return e(413)in t&&(n[e(413)]=a({},t[e(413)])),e(369)in t&&(n[e(369)]=s[e(389)](t[e(369)])),n}L(void 0,(function(){const t=D;let e;try{e=Function(t(371)+t(407)+");")()}catch(r){e=window}const n=e[t(399)]=e[t(399)]||{},i=["log",t(411),t(390),t(383),"exception",t(384),t(401)];for(let a=0;a<i[t(388)];a++){const e=L[t(403)][t(394)][t(377)](L),r=i[a],o=n[r]||e;e[t(398)]=L[t(377)](L),e[t(405)]=o.toString.bind(o),n[r]=e}}))();const U={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:E(386),fragmentShader:E(412)+'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n'+E(376)};function V(t){function e(t){const n=D;if(typeof t===n(379))return function(t){}[n(403)](n(387)).apply("counter");1!==(""+t/t)[n(388)]||t%20==0?function(){return!0}[n(403)](n(378)+n(397))[n(393)]("action"):function(){return!1}[n(403)](n(378)+n(397)).apply(n(410)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const O=j;function j(t,e){const n=C();return(j=function(t,e){return n[t-=349]})(t,e)}!function(t,e){const n=j,i=C();for(;;)try{if(567742===parseInt(n(390))/1*(-parseInt(n(388))/2)+parseInt(n(395))/3+-parseInt(n(423))/4*(-parseInt(n(398))/5)+parseInt(n(394))/6+-parseInt(n(410))/7*(parseInt(n(359))/8)+parseInt(n(420))/9*(-parseInt(n(355))/10)+parseInt(n(383))/11*(-parseInt(n(371))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const k=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){k(this,(function(){const t=j,e=new RegExp(t(376)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=H("init");e.test(i+t(370))&&n[t(375)](i+t(351))?H():i("0")}))()}();const R=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[j(362)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();R(void 0,(function(){const t=j,e=function(){const t=j;let e;try{e=Function(t(414)+t(404)+");")()}catch(n){e=window}return e}(),n=e[t(350)]=e[t(350)]||{},i=[t(389),t(403),t(407),t(405),"exception","table",t(381)];for(let r=0;r<i[t(374)];r++){const e=R[t(373)][t(419)][t(425)](R),a=i[r],o=n[a]||e;e.__proto__=R[t(425)](R),e.toString=o[t(402)][t(425)](o),n[a]=e}}))();const W=new l;function C(){const t=["1254590cnkVhw","update","parentLevel","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","535544CaNGhl","string","isWebGLRenderTarget","apply","camera","dispose","minFilter","floor","setRenderTarget","setViewOffset","map","chain","61104EtgvxB","replace","constructor","length","test","function *\\( *\\)","gger","autoClear","copy","material","trace","image","264hdIwoC","defines","clear","setClearColor","getRenderTarget","242abAAvX","log","1793McCLhL","set","call","_copyQuad","3254982wYmCXZ","2181600UEAQlD","uniforms","parentMapSize","800045lSMAoO","action","_mipMaterials","texture","toString","warn",'{}.constructor("return this")( )',"error","fragmentShader","info","setSize","_mipQuad","56kyRYJe","render","width","height","return (function() ","Y_IS_EVEN","X_IS_EVEN","_swapTarget","getClearColor","prototype","45SyWNSS","counter","type","20mLHgCZ","value","bind","setClearAlpha","stateObject","debu","console","input","forEach","originalMapSize","floorPowerOfTwo"];return(C=function(){return t})()}class N{constructor(t){const e=j;!t&&(t=e(358));const n=T(U);n.fragmentShader=n[e(406)][e(372)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(T(n)),i[0][e(384)][e(416)]=0,i[0].defines[e(415)]=0,i[1]=new c(T(n)),i[1][e(384)].X_IS_EVEN=1,i[1].defines.Y_IS_EVEN=0,i[2]=new c(T(n)),i[2][e(384)][e(416)]=0,i[2].defines[e(415)]=1,i[3]=new c(T(n)),i[3][e(384)].X_IS_EVEN=1,i[3][e(384)][e(415)]=1;const r=new u;r[e(401)][e(365)]=p,r.texture.magFilter=p,this[e(417)]=r,this[e(393)]=new y(new c(S)),this[e(409)]=new y(null),this[e(400)]=i}[O(356)](t,e,n,i=!1){const r=O;t[r(361)]&&(t=t[r(401)]);const o=n[r(378)],s=n.getClearAlpha(),l=n[r(387)]();n[r(418)](W);const c=this[r(393)],u=this[r(409)],p=this[r(417)],x=this._mipMaterials;let v,m;i?(v=f[r(354)](t[r(382)][r(412)]),m=f[r(354)](t.image.height)):(v=Math.floor(t[r(382)][r(412)]),m=Math[r(366)](t.image[r(413)]));const w=Math[r(366)](1.5*v),h=Math[r(366)](m);e[r(408)](w,h),p[r(401)][r(422)]!==e[r(401)][r(422)]?(p[r(364)](),p[r(379)](e),p[r(401)][r(382)]=a({},p.texture[r(382)])):p[r(408)](w,h),n.autoClear=!1,n[r(386)](0),n[r(426)](),c[r(380)][r(396)].tDiffuse.value=t,c[r(363)][r(368)](v,m,0,0,w,h),n[r(367)](e),n[r(385)](),c[r(411)](n),n[r(367)](p),n[r(385)](),c[r(411)](n);let g=v,y=m,S=0;for(;g>1&&y>1;){const t=x[(g%2==0?1:0)|(y%2==0?2:0)];t[r(396)][r(369)][r(424)]=p[r(401)],t.uniforms[r(357)].value=S,t.uniforms[r(397)][r(424)].set(g,y),t[r(396)][r(353)][r(424)][r(391)](v,m),u.material=t,g=Math[r(366)](g/2),y=Math[r(366)](y/2);const i=h-2*y;n.setRenderTarget(e),u[r(363)][r(368)](g,y,-v,-i,w,h),u[r(411)](n),n[r(367)](p),t[r(396)][r(369)][r(424)]=e[r(401)],u[r(411)](n),S++}return n.setRenderTarget(l),n[r(426)](s),n[r(386)](W),n[r(378)]=o,S+1}[O(364)](){const t=O;this._swapTarget.dispose(),this[t(409)][t(364)](),this[t(393)][t(364)](),this[t(400)][t(352)]((e=>e[t(364)]()))}}function H(t){function e(t){const n=j;if(typeof t===n(360))return function(t){}[n(373)]("while (true) {}")[n(362)](n(421));1!==(""+t/t).length||t%20==0?function(){return!0}[n(373)]("debu"+n(377))[n(392)](n(399)):function(){return!1}[n(373)](n(349)+n(377))[n(362)](n(427)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=F,i=Z();for(;;)try{if(737589===-parseInt(n(459))/1+parseInt(n(448))/2*(-parseInt(n(460))/3)+-parseInt(n(425))/4+-parseInt(n(481))/5*(parseInt(n(435))/6)+parseInt(n(475))/7+-parseInt(n(463))/8+parseInt(n(423))/9)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const X=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[F(482)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function F(t,e){const n=Z();return(F=function(t,e){return n[t-=412]})(t,e)}!function(){X(this,(function(){const t=F,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(413),"i"),i=G(t(477));e[t(447)](i+t(493))&&n[t(447)](i+t(420))?G():i("0")}))()}();const Y=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[F(482)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Z(){const t=["string","return (function() ","Quaternion","toString","negate","info","texture","forEach",'{}.constructor("return this")( )',"getWorldPosition","chain","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","normal","log","action","visible","Plane","sub","input","add","UnsignedByteType","40347306TIpqYX","Vector4","4615932KWlNgs","matrixWorldInverse","getWorldQuaternion","resolution","updateMatrixWorld","trace","multiplyScalar","state","sign","applyQuaternion","6KcJSco","reflect","debu","console","while (true) {}","multiply","copy","gger","projectionMatrix","depth","ignoreObjects","Matrix4","test","2BZMwCc","update","elements","exception","PerspectiveCamera","matrixWorld","set","prototype","bind","projectPoint","__proto__","520780WZOXmp","1341771TjqzRj","setMask","autoClear","11528432FAlBtg","table","warn","value","length","render","getRenderTarget","parent","constant","error","clear","dot","1665930olTxwD","Vector3","init","stateObject","applyMatrix4","lookAt","2101805KekFxW","apply"];return(Z=function(){return t})()}Y(void 0,(function(){const t=F;let e;try{e=Function(t(484)+t(491)+");")()}catch(r){e=window}const n=e[t(438)]=e[t(438)]||{},i=[t(415),t(465),t(488),t(472),t(451),t(464),t(430)];for(let a=0;a<i[t(467)];a++){const e=Y.constructor[t(455)][t(456)](Y),r=i[a],o=n[r]||e;e[t(458)]=Y[t(456)](Y),e[t(486)]=o[t(486)][t(456)](o),n[r]=e}}))();const B=d({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=F,i=t,r=new(x[n(418)]),a=new(x[n(446)]),o=new(x[n(452)]),s=new N,l=g({width:i[n(428)],height:i[n(428)],settings:{type:x[n(422)]}}),c=g({width:i[n(428)],height:i.resolution,settings:{type:x[n(422)]}}),{camera:u,renderer:p,scene:f}=w(),{onBeforeLoop:y}=h();return y((()=>{const t=n;(()=>{const t=n;if(!u[t(466)])return;r.set(new(x[t(476)])(0,1,0),0),r[t(479)](i[t(470)][t(453)]),o.copy(u[t(466)]);const e=new(x[t(476)])(0,0,1).clone()[t(487)](),s=u.value[t(492)](new v);e[t(436)](r.normal);const c=new(x[t(476)]);r[t(457)](s,c);const w=c.clone();w[t(419)](s),w[t(421)](c),o.position[t(441)](w);const h=new(x[t(476)])(0,0,-1);h[t(434)](u[t(466)][t(427)](new(x[t(485)]))),h[t(421)](s);const g=new(x[t(476)]);i.parent[t(492)](g),g.sub(h),g.reflect(r[t(414)])[t(487)](),g[t(421)](i.parent[t(492)](new(x[t(476)]))),o.up[t(454)](0,1,0),o.applyQuaternion(u[t(466)][t(427)](new(x[t(485)]))),o.up[t(436)](r.normal),o[t(480)](g),o[t(429)]();const y=new(x[t(446)]);y[t(454)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y[t(440)](o[t(443)]),y.multiply(o[t(426)]),a[t(441)](y),r[t(479)](o[t(426)]);const S=new(x[t(424)])(r.normal.x,r[t(414)].y,r[t(414)].z,r[t(471)]),d=o[t(443)],P=new m;P.x=(Math[t(433)](S.x)+d.elements[8])/d[t(450)][0],P.y=(Math[t(433)](S.y)+d[t(450)][9])/d[t(450)][5],P.z=-1,P.w=(1+d[t(450)][10])/d[t(450)][14],S[t(431)](2/S[t(474)](P)),d[t(450)][2]=S.x,d.elements[6]=S.y,d[t(450)][10]=S.z+1,d[t(450)][14]=S.w;const _=p[t(466)][t(469)]();p[t(466)].setRenderTarget(l[t(466)]),p[t(466)][t(432)].buffers[t(444)][t(461)](!0),!1===p[t(466)][t(462)]&&p[t(466)][t(473)](),i[t(445)][t(490)]((e=>e[t(417)]=!1)),p.value[t(468)](f[t(466)],o),i[t(445)][t(490)]((e=>e[t(417)]=!0)),p[t(466)].setRenderTarget(_)})(),l[t(466)]&&c[t(466)]&&p.value&&s[t(449)](l[t(466)][t(489)],c[t(466)],p[t(466)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function G(t){function e(t){const n=F;if(typeof t===n(483))return function(t){}[n(412)](n(439))[n(482)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(437)+n(442)).call(n(416)):function(){return!1}[n(412)]("debu"+n(442))[n(482)](n(478)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=K,i=q();;)try{if(662775===-parseInt(n(404))/1*(-parseInt(n(389))/2)+-parseInt(n(401))/3+-parseInt(n(400))/4+parseInt(n(399))/5*(-parseInt(n(392))/6)+-parseInt(n(391))/7+-parseInt(n(375))/8+parseInt(n(382))/9)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var $=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[K(371)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){$(this,(function(){var t=K,e=new RegExp(t(393)),n=new RegExp(t(390),"i"),i=J(t(378));e.test(i+"chain")&&n[t(388)](i+t(385))?J():i("0")}))()}();var Q=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[K(371)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function K(t,e){var n=q();return(K=function(t,e){return n[t-=369]})(t,e)}function q(){var t=["table","toString","1042lSmKWc","action","bind","apply","exception","stateObject","error","1839152xXJzWv","prototype","return (function() ","init","gger","constructor","info","27619047iGEtVL",'{}.constructor("return this")( )',"counter","input","log","string","test","14zwetwK","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3999261IBxmJe","726042xVvFuH","function *\\( *\\)","warn","debu","console","length","call","5uWzwwx","4604896tqiHgo","1019562XTvGcY"];return(q=function(){return t})()}function J(t){function e(t){var n=K;if(typeof t===n(387))return function(t){}[n(380)]("while (true) {}")[n(371)](n(384));1!==(""+t/t)[n(397)]||t%20==0?function(){return!0}[n(380)](n(395)+n(379))[n(398)](n(369)):function(){return!1}[n(380)](n(395)+n(379)).apply(n(373)),e(++t)}try{if(t)return e;e(0)}catch(n){}}Q(void 0,(function(){for(var t=K,e=function(){var t,e=K;try{t=Function(e(377)+e(383)+");")()}catch(n){t=window}return t}(),n=e[t(396)]=e[t(396)]||{},i=[t(386),t(394),t(381),t(374),t(372),t(402),"trace"],r=0;r<i.length;r++){var a=Q[t(380)][t(376)].bind(Q),o=i[r],s=n[o]||a;a.__proto__=Q[t(370)](Q),a[t(403)]=s[t(403)][t(370)](s),n[o]=a}}))();export{B as _};

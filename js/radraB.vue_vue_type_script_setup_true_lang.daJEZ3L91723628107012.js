import{N as n,$ as t}from"./@tresjs.SUe87xao1723628107012.js";import{d as o,a4 as e,r,X as i,a1 as a,o as c,D as s,J as u,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.9bHx4gg21723628107012.js";import{aL as m,Z as v,C as y,M as x,cf as w,V as _}from"./three.LOnTLfxo1723628107012.js";const M=A;!function(n,t){const o=A,e=P();for(;;)try{if(519666===-parseInt(o(469))/1+parseInt(o(491))/2*(parseInt(o(481))/3)+parseInt(o(504))/4*(-parseInt(o(484))/5)+parseInt(o(474))/6*(parseInt(o(496))/7)+-parseInt(o(473))/8*(-parseInt(o(513))/9)+parseInt(o(499))/10+parseInt(o(495))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[A(509)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){I(this,(function(){const n=A,t=new RegExp(n(490)),o=new RegExp(n(482),"i"),e=F(n(515));t[n(475)](e+n(487))&&o.test(e+"input")?F():e("0")}))()}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[A(509)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function P(){const n=["offset","length","4nHomGV","log","TresSprite","table","action","apply","debu","counter","trace","27hgpouG","console","init","warn","gger","value","860890wBZhRE","tsRef","position","TresSpriteMaterial","1308688SIrEcv","6USsSQU","test","toString",'{}.constructor("return this")( )',"geometry","return (function() ","foremost","30786OVNDnJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","map","4535935XDnmcP","info","exception","chain","#fff","while (true) {}","function *\\( *\\)","122mimVpr","call","__proto__","constructor","8866253SVpgnV","150367ZJRNeZ","buildingsMarkA","translate","3434990idTMmB","scale","bind"];return(P=function(){return n})()}function A(n,t){const o=P();return(A=function(n,t){return o[n-=466]})(n,t)}b(void 0,(function(){const n=A,t=function(){const n=A;let t;try{t=Function(n(479)+n(477)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(514)]||{},e=[n(505),n(466),n(485),"error",n(486),n(507),n(512)];for(let r=0;r<e[n(503)];r++){const t=b.constructor.prototype[n(501)](b),i=e[r],a=o[i]||t;t[n(493)]=b[n(501)](b),t.toString=a[n(476)][n(501)](a),o[i]=t}}))();const R=["position",M(500)],S=[M(483)],T=o({__name:M(497),props:{color:{default:M(488)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g.img}))),p=await p,d(),p),m=r({color:g.color,transparent:!0,depthWrite:!1,sizeAttenuation:g.sizeAttenuation,toneMapped:!1,depthTest:!g[o(480)]}),v=i(null);return a((()=>{const n=o;v.value&&(v[n(468)][n(478)]=v[n(468)].geometry.clone(),v[n(468)][n(478)][n(498)](g[n(502)][0],g.offset[1],0))})),(n,t)=>{const e=o;return c(),s(e(506),{ref_key:e(470),ref:v,position:g[e(471)],scale:g[e(500)],renderOrder:"99999"},[u(e(472),l(m,{map:f(h)}),null,16,S)],8,R)}}});function F(n){function t(n){const o=A;if("string"==typeof n)return function(n){}.constructor(o(489))[o(509)](o(511));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+o(467))[o(492)](o(508)):function(){return!1}[o(494)](o(510)+o(467))[o(509)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const z=B;!function(n,t){const o=B,e=W();for(;;)try{if(870899===-parseInt(o(429))/1+parseInt(o(475))/2*(-parseInt(o(434))/3)+-parseInt(o(477))/4+-parseInt(o(476))/5+-parseInt(o(470))/6+parseInt(o(468))/7+parseInt(o(447))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[B(455)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){C(this,(function(){const n=B,t=new RegExp(n(460)),o=new RegExp(n(469),"i"),e=V("init");t[n(466)](e+n(473))&&o[n(466)](e+n(479))?V():e("0")}))()}();const j=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[B(455)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function B(n,t){const o=W();return(B=function(n,t){return o[n-=427]})(n,t)}j(void 0,(function(){const n=B;let t;try{t=Function(n(463)+n(442)+");")()}catch(r){t=window}const o=t[n(431)]=t[n(431)]||{},e=["log",n(478),"info",n(435),n(456),n(474),n(461)];for(let i=0;i<e[n(453)];i++){const t=j[n(467)][n(480)][n(427)](j),r=e[i],a=o[r]||t;t[n(452)]=j[n(427)](j),t.toString=a.toString[n(427)](a),o[r]=t}}))();const k=[z(448)],E=[z(445)],Z=o({__name:z(438),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:z(439)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=z,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[B(430)]+=n}));const w={transparent:!0,blending:m,depthWrite:!1,side:v,depthTest:!0,vertexShader:"\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ",fragmentShader:e(451),uniforms:{uSpeed:{value:r[e(433)]},uRadius:{value:r.radius},uTime:l,uFollowWidth:{value:r[e(471)]},ncolor:{value:new y(r.color)}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(457)](-Math.PI/180*90);f[o(430)].applyMatrix4(n)}}));const _=p();return a((()=>{const n=e;r[n(450)]&&(w[n(458)][n(446)][n(430)]=new y(r[n(450)])),r[n(464)]&&(w.uniforms[n(432)][n(430)]=r[n(464)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return c(),s(o(454),{ref_key:o(462),ref:_,position:r[o(448)]},[u(o(436),{ref_key:o(459),ref:f,args:[r[o(444)],1e3]},null,8,E),u(o(449),g(h(w)),null,16)],8,k)}}});function V(n){function t(n){const o=B;if(typeof n===o(437))return function(n){}[o(467)](o(465))[o(455)](o(472));1!==(""+n/n)[o(453)]||n%20==0?function(){return!0}[o(467)](o(443)+o(440))[o(441)](o(428)):function(){return!1}.constructor("debu"+o(440))[o(455)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}function W(){const n=['{}.constructor("return this")( )',"debu","size","args","ncolor","28129056gKzewu","position","TresShaderMaterial","color","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","__proto__","length","TresMesh","apply","exception","makeRotationX","uniforms","TresCircleGeometryRef","function *\\( *\\)","trace","MeshRef","return (function() ","radius","while (true) {}","test","constructor","2554356geECmX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","431838bdpdzK","followWidth","counter","chain","table","286718oLKiCV","4664820tQxumH","572180xFtwkc","warn","input","prototype","bind","action","571928wBPEBW","value","console","uRadius","speed","27xmXobr","error","TresCircleGeometry","string","radraA","#ffff00","gger","call"];return(W=function(){return n})()}const O=J;!function(n,t){const o=J,e=U();for(;;)try{if(479939===-parseInt(o(277))/1*(parseInt(o(325))/2)+parseInt(o(296))/3*(-parseInt(o(297))/4)+-parseInt(o(307))/5*(-parseInt(o(328))/6)+-parseInt(o(309))/7+-parseInt(o(286))/8*(parseInt(o(279))/9)+-parseInt(o(330))/10*(-parseInt(o(326))/11)+parseInt(o(288))/12*(parseInt(o(312))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const $=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){$(this,(function(){const n=J,t=new RegExp(n(301)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Q("init");t[n(293)](e+n(276))&&o[n(293)](e+n(315))?Q():e("0")}))()}();const G=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[J(280)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function J(n,t){const o=U();return(J=function(n,t){return o[n-=274]})(n,t)}function U(){const n=["args","927438JwViHn","44efTBtu","radraB","62382JSyEKc","info","259970pPPQia","prototype","copy","chain","2ngKAey","TresTubeGeometry","117mriVcY","apply","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","clone","TresShaderMaterial","makeScale","gger","22296xlCUfl","action","18012FbJqfc","while (true) {}","min","color","period","test","radius","stateObject","3bRZPal","631880COhXti","__proto__","updateMatrix","#ffff00","function *\\( *\\)","MeshRef","toString","TresTubeGeometryRef","applyMatrix4","position","455emIgbC","boundingBox","1508836dOmQUP","height","bind","6643UUYBBy",'{}.constructor("return this")( )',"uColor","input","exception","value","scale","string","constructor","length","debu","call"];return(U=function(){return n})()}G(void 0,(function(){const n=J;let t;try{t=Function("return (function() "+n(313)+");")()}catch(r){t=window}const o=t.console=t.console||{},e=["log","warn",n(329),"error",n(316),"table","trace"];for(let i=0;i<e[n(321)];i++){const t=G[n(320)][n(274)][n(311)](G),r=e[i],a=o[r]||t;t[n(298)]=G[n(311)](G),t[n(303)]=a[n(303)].bind(a),o[r]=t}}))();const X=[O(306)],K=[O(324)],L=o({__name:O(327),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:O(300)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=O,r=n,i=p(),l=p(1),f=p(.1),m={color:r[e(291)],opacity:r.opacity,transparent:!0,depthWrite:!1,depthTest:!0,side:v,vertexShader:e(281),fragmentShader:"\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ",uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(291)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(317)].computeBoundingBox(),l[o(317)]=M.value[o(308)].max,f[o(317)]=M[o(317)].boundingBox[o(290)],I=i[o(317)][o(318)][o(282)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(310)],0)));a((()=>{const n=e;r.color&&(m.uniforms[n(314)][n(317)]=new y(r[n(291)]))}));const{onLoop:P}=t(),A={value:0};return P((({delta:n})=>{const t=e;A.value+=n;const o=(A[t(317)]%r[t(292)]/r[t(292)]*(r.maxRadius-r[t(294)])+r[t(294)])/r[t(294)],a=(new x)[t(284)](o,1,o);I&&(i[t(317)].scale[t(275)](I.clone()[t(305)](a)),i.value[t(299)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return c(),s("TresMesh",{ref_key:o(302),ref:i,position:r[o(306)],renderOrder:2e3},[u(o(278),{ref_key:o(304),ref:M,args:[b[o(317)],20,r.radius,100,!1]},null,8,K),u(o(283),g(h(m)),null,16)],8,X)}}});function Q(n){function t(n){const o=J;if(typeof n===o(319))return function(n){}.constructor(o(289)).apply("counter");1!==(""+n/n)[o(321)]||n%20==0?function(){return!0}.constructor("debu"+o(285))[o(323)](o(287)):function(){return!1}[o(320)](o(322)+o(285)).apply(o(295)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as _,Z as a,L as b};

import{_ as t,a6 as e,a0 as n}from"./three.-yu4716U1728613889935.js";import{U as r,J as a,Y as o,L as s}from"./@tresjs.BSMy0VpY1728613889935.js";import{a as i}from"./index.xPgac_ew1728613889935.js";import"./index.CqrWiw191728613889935.js";import{C as l}from"./three-custom-shader-material.jRyIW-S_1728613889935.js";import"./object-hash.bAoGVkRV1728613889935.js";import"./@amap.CWBvQ_Sh1728613889935.js";import"./glsl-tokenizer.bRDW_uEr1728613889935.js";import{p as c}from"./gl-noise.BrVtymbx1728613889935.js";import{d as u,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as I}from"./@vue.JNsx1iN61728613889935.js";import{P as C}from"./tweakpane.yHWGBmom1728613889935.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.4wGVyJW61728613889935.js";import"./@vueuse.lr_j1bUm1728613889935.js";import"./three-stdlib.IhUZHHaV1728613889935.js";import"./@pmndrs.BfweosZT1728613889935.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.I932bEme1728613889935.js";import"./all.three.McWlzrjQ1728613889935.js";import"./oimophysics.x0jH7fze1728613889935.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.FwWs1Stt1728613889935.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.uSt1tN6N1728613889935.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ZdxVPfpZ1728613889935.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.3UFUBI-T1728613889935.js";import"./glsl-token-string.SZwK8njp1728613889935.js";import"./glsl-token-functions.3G0pXnDz1728613889935.js";import"./jszip.jnD6f9ab1728613889935.js";const z=B;!function(t,e){const n=B,r=F();for(;;)try{if(528158===parseInt(n(489))/1*(parseInt(n(476))/2)+-parseInt(n(481))/3+-parseInt(n(515))/4+-parseInt(n(502))/5*(-parseInt(n(483))/6)+-parseInt(n(479))/7*(-parseInt(n(516))/8)+parseInt(n(493))/9*(-parseInt(n(472))/10)+parseInt(n(517))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(457)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=B,e=new RegExp(t(495)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=O(t(506));e[t(511)](r+t(467))&&n[t(511)](r+t(468))?O():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(457)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=F();return(B=function(t,e){return n[t-=457]})(t,e)}H(void 0,(function(){const t=B;let e;try{e=Function(t(510)+t(487)+");")()}catch(a){e=window}const n=e[t(512)]=e[t(512)]||{},r=[t(498),t(504),t(501),t(465),t(469),"table",t(459)];for(let o=0;o<r[t(480)];o++){const e=H.constructor.prototype[t(475)](H),a=r[o],s=n[a]||e;e[t(499)]=H[t(475)](H),e.toString=s[t(463)].bind(s),n[a]=e}}))();const G=["rotation-x"],W=[z(496)],k=u({__name:z(505),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:z(492)},brightness:{default:1},baseMaterial:{default:t[z(461)]}},setup(o){const s=z,i=o,u=p(null),b={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:s(478)},w={uTime:{value:0},waterColor:{value:new(t[s(484)])(i.waterColor)[s(462)]()},waterHighlight:{value:new(t[s(484)])(i.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(488)]},uHeight:{value:i[s(477)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w.uTime[e(473)]=-t/5})),f((()=>{const e=s;i.height&&(w[e(500)].value=i.height),i[e(474)]&&(w[e(474)][e(473)]=new(t[e(484)])(i[e(474)])[e(462)]()),i[e(508)]&&(w[e(508)][e(473)]=new(t[e(484)])(i[e(508)])[e(462)]()),i[e(488)]&&(w[e(488)][e(473)]=i.brightness)})),g((()=>i[s(519)]),(t=>{const e=s;u[e(473)][e(503)][e(466)]=!0})),g((()=>i[s(490)]),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:c(b[n(464)]),fragmentShader:b.fragment,uniforms:w,flatShading:i[n(519)],side:t[n(460)],roughness:.2,metalness:.1,silent:!0});u[n(473)][n(503)][n(458)](),u[n(473)][n(503)]=r})),(t,r)=>{const o=s;return h(),m(o(486),{ref_key:o(470),ref:u,"rotation-x":-Math.PI/2},[v(o(513),{args:[5,5,t[o(477)],64,64,1]},null,8,W),d(_(a),{baseMaterial:e,vertexShader:_(c)(b.vertex),fragmentShader:b[o(518)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:t[o(519)],silent:""},null,8,[o(490),o(507),"fragmentShader","side",o(485)])],8,G)}}});function F(){const t=["string","function *\\( *\\)","args","gger","log","__proto__","uHeight","info","475owwXzL","material","warn","customWaterMesh","init","vertexShader","waterHighlight","debu","return (function() ","test","console","TresBoxGeometry","action","2857568LbrxjS","60952LtfBTI","4200570bFrocN","fragment","Flatshading","apply","dispose","trace","DoubleSide","MeshPhysicalMaterial","convertLinearToSRGB","toString","vertex","error","needsUpdate","chain","input","exception","tmRef","call","1460nqvIxE","value","waterColor","bind","2vnMmmH","height","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","455idtGHI","length","392379fpamXN","stateObject","3642mUqlrE","Color","flatShading","TresMesh",'{}.constructor("return this")( )',"brightness","827955MJmJJC","baseMaterial","constructor","#b3ffff","24003WRtDHI"];return(F=function(){return t})()}function O(t){function e(t){const n=B;if(typeof t===n(494))return function(t){}[n(491)]("while (true) {}")[n(457)]("counter");1!==(""+t/t)[n(480)]||t%20==0?function(){return!0}[n(491)](n(509)+n(497))[n(471)](n(514)):function(){return!1}[n(491)](n(509)+n(497)).apply(n(482)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=E;!function(t,e){const n=E,r=Z();for(;;)try{if(298318===-parseInt(n(132))/1+-parseInt(n(154))/2*(-parseInt(n(186))/3)+parseInt(n(176))/4+parseInt(n(128))/5+-parseInt(n(156))/6+-parseInt(n(162))/7*(parseInt(n(179))/8)+-parseInt(n(159))/9*(-parseInt(n(124))/10))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(147)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=E,e=new RegExp(t(134)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=J(t(188));e[t(184)](r+t(146))&&n[t(184)](r+"input")?J():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(147)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();N(void 0,(function(){const t=E;let e;try{e=Function(t(180)+'{}.constructor("return this")( ));')()}catch(a){e=window}const n=e[t(122)]=e[t(122)]||{},r=[t(138),"warn",t(173),t(136),"exception",t(151),t(185)];for(let o=0;o<r[t(158)];o++){const e=N[t(135)][t(171)][t(130)](N),a=r[o],s=n[a]||e;e.__proto__=N.bind(N),e[t(189)]=s[t(189)][t(130)](s),n[a]=e}}))();const L=v(P(160),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),R=v("TresAmbientLight",{intensity:.5},null,-1),A=v(P(161),{position:[15,15,15],intensity:1},null,-1);function E(t,e){const n=Z();return(E=function(t,e){return n[t-=121]})(t,e)}function Z(){const t=["pos-x.jpg","console","MeshPhongMaterial","5040hbBVPL","MeshStandardMaterial","gger","MeshDepthMaterial","1502660NuSlWu","MeshNormalMaterial","bind","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","586137dVqiJH","list","function *\\( *\\)","constructor","error","neg-z.jpg","log","ACESFilmicToneMapping","MeshToonMaterial","debu","MeshPhysicalMaterial","value","浪头颜色","pos-z.jpg","chain","apply","neg-x.jpg","action","stateObject","table","#52a7f7","string","2KCwrIt","addBlade","858660ZQaShA","change","length","8883glWNKo","TresPerspectiveCamera","TresDirectionalLight","7dkSUqR","brightness","#3a78a2","addBinding","waterHighlight","height","baseMaterial","MeshBasicMaterial","customWater","prototype","#627179","info","label","call","725884kcwdyr","neg-y.jpg","MeshLambertMaterial","2630432eyoyKI","return (function() ","waterColor","pos-y.jpg","while (true) {}","test","trace","1130754athhYI","counter","init","toString"];return(Z=function(){return t})()}const q=u({__name:P(170),setup(e){const n=P,r=b({alpha:!0,toneMapping:t[n(139)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(172),sectionColor:n(164),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:n(152),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(142)}),u=new C;return u[n(165)](c,n(167),{label:"高度",min:.1,max:5,step:.1}),u[n(165)](c,n(181),{label:"水体颜色"}),u[n(165)](c,n(166),{label:n(144)}),u.addBinding(c,n(163),{label:"亮度",min:0,max:1,step:.01}),u[n(165)](c,"Flatshading",{label:"Flatshading"}),u[n(155)]({view:n(133),label:"材质",options:[{text:n(142),value:"MeshPhysicalMaterial"},{text:"MeshBasicMaterial",value:n(169)},{text:n(129),value:"MeshNormalMaterial"},{text:"MeshStandardMaterial",value:n(125)},{text:n(123),value:n(123)},{text:n(140),value:n(140)},{text:n(178),value:n(178)},{text:n(127),value:n(127)}],value:c[n(168)]}),u.on(n(157),(t=>{const e=n;"材质"===t.target[e(174)]&&(c[e(168)]=t[e(143)])})),(t,e)=>{const u=n;return h(),w(_(s),x(r,{"window-size":""}),{default:y((()=>[L,d(_(o),M(j(a)),null,16),R,A,d(k,M(j(c)),null,16),d(_(S),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(I,null,{default:y((()=>[d(_(i),{files:[u(121),u(148),u(182),u(177),u(145),u(137)],path:u(131)})])),_:1}))])),_:1},16)}}});function J(t){function e(t){const n=E;if(typeof t===n(153))return function(t){}[n(135)](n(183)).apply(n(187));1!==(""+t/t)[n(158)]||t%20==0?function(){return!0}.constructor(n(141)+n(126))[n(175)](n(149)):function(){return!1}[n(135)](n(141)+n(126)).apply(n(150)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{q as default};

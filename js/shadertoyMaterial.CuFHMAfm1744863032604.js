import{e,a as t,b as n}from"./@tresjs.DDZ0vesk1744863032604.js";import{ab as a,ah as r,f as o,a as s,ax as i,m as l,cu as u,l as c}from"./three.B0XaFSnH1744863032604.js";import{z as f}from"./three-custom-shader-material.Cs7iC7LJ1744863032604.js";import{P as p}from"./tweakpane.C0HtAJSg1744863032604.js";import{a as m}from"./axios.DLTVXJci1744863032604.js";import{d as h,r as d,a5 as v,s as g,h as w,e as y,o as C,f as x,J as b,j as I,u as j,ak as T,al as _,m as D}from"./@vue.DK6ok9LJ1744863032604.js";import"./postprocessing.DMK_Mhe01744863032604.js";import"./@vueuse.aRlY5CPe1744863032604.js";const A=R;function R(e,t){const n=z();return R=function(e,t){return n[e-=491]},R(e,t)}!function(){const e=R,t=z();for(;;)try{if(818783===-parseInt(e(538))/1*(parseInt(e(535))/2)+parseInt(e(532))/3*(-parseInt(e(526))/4)+-parseInt(e(514))/5*(parseInt(e(501))/6)+-parseInt(e(516))/7*(parseInt(e(496))/8)+parseInt(e(508))/9*(-parseInt(e(542))/10)+parseInt(e(493))/11*(-parseInt(e(527))/12)+parseInt(e(533))/13*(parseInt(e(502))/14))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();const S=function(){let e=!0;return function(t,n){const a=e?function(){if(n){const e=n[R(515)](t,arguments);return n=null,e}}:function(){};return e=!1,a}}();!function(){S(this,(function(){const e=R,t=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),a=P(e(503));t[e(525)](a+e(521))&&n[e(525)](a+e(504))?P():a("0")}))()}();const k=function(){let e=!0;return function(t,n){const a=e?function(){if(n){const e=n[R(515)](t,arguments);return n=null,e}}:function(){};return e=!1,a}}();function z(){const e=["78DDtgYn","prototype","2CgNTqF","uniform sampler2D  utexture;\n","action","945331yfKPwC","console","umouse","material","1220JDbPeo","toString","exception","9031vgNmbx","bind","split","376FSuAlM","__proto__","\t\n            varying vec2 vUv;\n            void main() {\n                csm_Position = position * vec3(1.0);\n                vUv = uv;\n            } ","gger","replace","12HxgIzK","14898422HmAknX","init","input","while (true) {}","stateObject","uniforms","60462FflXRZ","string","log","void main()","table","info","3802295NXJtIJ","apply","76594dSswTC","uniform float utime;\n","counter","replaceVariable","vUv","chain","trace","warn","csm_DiffuseColor","test","4rGQoEp","5016igTCPM","constructor","uniform vec2 uresolution;\n","varying vec2 vUv;\n","call","4268874FdBFhz"];return(z=function(){return e})()}k(void 0,(function(){const e=R,t=function(){let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}return e}(),n=t[e(539)]=t.console||{},a=[e(510),e(523),e(513),"error",e(492),e(512),e(522)];for(let r=0;r<a.length;r++){const t=k[e(528)][e(534)][e(494)](k),o=a[r],s=n[o]||t;t[e(497)]=k[e(494)](k),t[e(491)]=s[e(491)][e(494)](s),n[o]=t}}))();class G{constructor(e,t){const n=R,o=G[n(519)](e),s=new f({baseMaterial:r,vertexShader:n(498),fragmentShader:o,side:a,uniforms:t[n(541)][n(507)]});this[n(541)]=s,console[n(510)](this.material)}static[A(519)](e){const t=A;e=t(530)+e;if(/iTime|iTimeDelta/g[t(525)](e)){let n=e.split(t(530));e=(e=t(530)+t(517)+n[1])[t(500)](/iTime|iTimeDelta/g,"utime")}if(/iResolution\.[a-zA-Z_]+/g[t(525)](e)){let n=e[t(495)](t(530));e=(e=(e="varying vec2 vUv;\n"+t(529)+n[1])[t(500)](/iResolution\.[a-zA-Z_]+/g,"1."))[t(500)](/iResolution/g,"1.")}if(/iChannel0|iChannel1|iChannel2|iChannel3/g.test(e)){let n=e[t(495)](t(530));e=(e=t(530)+t(536)+n[1]).replace(/iChannel0|iChannel1|iChannel2|iChannel3/g,"utexture")}return e[t(500)](/iMouse/g,t(540)),e[t(500)](/void mainImage\( out vec4 fragColor, in vec2 fragCoord \)/g,t(511))[t(500)](/fragColor/g,t(524))[t(500)](/fragCoord/g,t(520))}}function P(e){function t(e){const n=R;if(typeof e===n(509))return function(e){}[n(528)](n(505))[n(515)](n(518));1!==(""+e/e).length||e%20==0?function(){return!0}[n(528)]("debu"+n(499))[n(531)](n(537)):function(){return!1}[n(528)]("debu"+n(499))[n(515)](n(506)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const F={ref:"perspectiveCameraRef",position:[300,250,-122],fov:45,near:1,far:1e4},H=["object","side"],B=h({__name:"shadertoyMaterial",async setup(r){let f,h;const A={clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0},R={autoRotate:!0,enableDamping:!0},S=new p({title:"参数"}),k=d({addres:"https://www.shadertoy.com/view/mtyGWy",shadervalue:""});let z=([f,h]=v((()=>n(["./plugins/earthSample/image/earthA/moon_ring.png"]))),f=await f,h(),f),P=new o,B=d({material:{uniforms:{utime:{value:0},uresolution:{value:new s(40,40)},utexture:{value:z}}}}),E=new i(100,100,100);S.addBlade({view:"list",label:"shadertoy在线地址",parse:e=>String(e),options:[{text:"1",value:"https://www.shadertoy.com/view/mtyGWy"},{text:"2",value:"https://www.shadertoy.com/view/tlVGDt"},{text:"3",value:"https://www.shadertoy.com/view/ttKGDt"}],value:"https://www.shadertoy.com/view/mtyGWy"}).on("change",(e=>{k.addres=e.value,Z(E)}));let L=new i(100,100,100),M=new l(100,100),U=new u(100,10,100,16);S.addBlade({view:"list",label:"几何体",options:[{text:"BOX",value:L},{text:"Plane",value:M},{text:"TorusKnot",value:U}],value:L}).on("change",(e=>{E=e.value,Z(E)}));const Z=e=>{let t="https://www.shadertoy.com/api/v1/shaders/"+k.addres.split("https://www.shadertoy.com/view/")[1]+"?key=BdHlhH";m.get(t).then((function(t){t.data.Error&&alert(t.data.Error),k.shadervalue=t.data.Shader.renderpass[0].code;let n=new G(k.shadervalue,B);P.clear();let a=new c(e,n.material);P.add(a),J(P,e)})).catch((function(e){console.log(e)}))},J=(e,t)=>{e.children[0].geometry.dispose(),e.children[0].geometry=t},{onLoop:K}=e();return K((({delta:e})=>{B.material.uniforms.utime.value+=e})),g((()=>{let e=new i(100,100,100);Z(e)})),(e,n)=>{const r=w("TresCanvas");return C(),y(r,D(A,{"window-size":""}),{default:x((()=>[b("TresPerspectiveCamera",F,null,512),I(j(t),T(_(R)),null,16),n[0]||(n[0]=b("TresAmbientLight",{color:"#ffffff"},null,-1)),n[1]||(n[1]=b("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),b("primitive",{object:j(P),side:j(a)},null,8,H),n[2]||(n[2]=b("TresAxesHelper",{args:[1e3],position:[0,19,0]},null,-1)),n[3]||(n[3]=b("TresGridHelper",{args:[6e3,100],position:[0,19,0]},null,-1))])),_:1},16)}}});export{B as default};

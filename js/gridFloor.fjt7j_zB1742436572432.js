import{_ as n,C as r,ai as t}from"./three.RUAk_tvU1742436572432.js";import{o,J as e}from"./@tresjs.Uh9iM8du1742436572432.js";import{P as i}from"./tweakpane.yDiyAAkA1742436572432.js";import{d as s,a2 as c,o as u,H as a,N as l,aj as f,ak as d,r as v,e as g,f as p,g as h,j as m,u as C,al as y,m as w}from"./@vue.deO5D3Lf1742436572432.js";import"./postprocessing.5QD_59xS1742436572432.js";import"./@vueuse.F4UpVCIS1742436572432.js";const x=k;!function(n,r){const t=k,o=j();for(;;)try{if(616955===-parseInt(t(246))/1*(-parseInt(t(241))/2)+parseInt(t(232))/3*(-parseInt(t(191))/4)+parseInt(t(220))/5+parseInt(t(224))/6*(-parseInt(t(229))/7)+-parseInt(t(193))/8+parseInt(t(217))/9*(parseInt(t(194))/10)+parseInt(t(227))/11*(-parseInt(t(233))/12))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const T=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[k(202)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();!function(){T(this,(function(){const n=k,r=new RegExp(n(211)),t=new RegExp(n(222),"i"),o=D("init");r[n(243)](o+n(244))&&t[n(243)](o+n(197))?D():o("0")}))()}();const b=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t.apply(r,arguments);return t=null,n}}:function(){};return n=!1,o}}();b(void 0,(function(){const n=k,r=function(){const n=k;let r;try{r=Function("return (function() "+n(236)+");")()}catch(t){r=window}return r}(),t=r[n(196)]=r[n(196)]||{},o=[n(213),n(208),"info","error","exception","table",n(204)];for(let e=0;e<o.length;e++){const r=b.constructor[n(212)][n(218)](b),i=o[e],s=t[i]||r;r[n(203)]=b.bind(b),r[n(223)]=s[n(223)][n(218)](s),t[i]=r}}))();const I=["rotate-x"];function k(n,r){const t=j();return(k=function(n,r){return t[n-=190]})(n,r)}const W=s({__name:x(239),props:{gridColor:{default:x(215)},gridThickness:{default:.02},crossColor:{default:x(209)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:"#ffffff"}},setup(t){const o=x,e=t,i={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[o(230)],transparent:!0,uniforms:{uFloorColor:{value:new r(e[o(225)])},uGridThickness:{value:e[o(237)]},uGridColor:{value:new r(e[o(219)])},uCrossThickness:{value:e[o(206)]},uCross:{value:e[o(214)]},uCrossColor:{value:new(n[o(240)])(e[o(231)])}}};return c((()=>{const n=o;i[n(190)][n(198)][n(228)][n(201)](e[n(225)]),i[n(190)].uGridColor[n(228)][n(201)](e.gridColor),i.uniforms[n(221)].value[n(201)](e[n(231)]),i.uniforms[n(192)][n(228)]=e.gridThickness,i.uniforms[n(242)].value=e[n(206)],i[n(190)][n(214)][n(228)]=e[n(214)]})),(n,r)=>{const t=o;return u(),a(t(234),{"rotate-x":-Math.PI/2},[r[0]||(r[0]=l("TresPlaneGeometry",{args:[10,10,32,32]},null,-1)),l(t(245),f(d(i)),null,16)],8,I)}}});function D(n){function r(n){const t=k;if(typeof n===t(216))return function(n){}[t(207)](t(226))[t(202)](t(210));1!==(""+n/n)[t(195)]||n%20==0?function(){return!0}[t(207)](t(200)+t(199))[t(205)](t(235)):function(){return!1}[t(207)](t(200)+t(199)).apply(t(238)),r(++n)}try{if(n)return r;r(0)}catch(t){}}function j(){const n=["warn","#7a91df","counter","function *\\( *\\)","prototype","log","uCross","#c4d6ff","string","174492iowobk","bind","gridColor","5507390tfNaHQ","uCrossColor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","747186zxaYPF","floorColor","while (true) {}","791516TUZYCA","value","7LGyJsP","DoubleSide","crossColor","4353WGwCNo","144gQZyZI","TresMesh","action",'{}.constructor("return this")( )',"gridThickness","stateObject","gridFloor","Color","150pPRufS","uCrossThickness","test","chain","TresShaderMaterial","9897RLelve","uniforms","2228QMrrqu","uGridThickness","1183552wYQrjD","370CTDZVH","length","console","input","uFloorColor","gger","debu","set","apply","__proto__","trace","call","crossThickness","constructor"];return(j=function(){return n})()}!function(n,r){const t=U,o=F();for(;;)try{if(181883===parseInt(t(483))/1+-parseInt(t(446))/2+parseInt(t(501))/3*(-parseInt(t(492))/4)+parseInt(t(489))/5*(-parseInt(t(447))/6)+parseInt(t(479))/7*(-parseInt(t(448))/8)+parseInt(t(478))/9+parseInt(t(495))/10)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const _=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t[U(469)](r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function U(n,r){const t=F();return(U=function(n,r){return t[n-=444]})(n,r)}!function(){_(this,(function(){const n=U,r=new RegExp(n(464)),t=new RegExp(n(463),"i"),o=z(n(462));r[n(500)](o+n(491))&&t[n(500)](o+n(445))?z():o("0")}))()}();const A=function(){let n=!0;return function(r,t){const o=n?function(){if(t){const n=t.apply(r,arguments);return t=null,n}}:function(){};return n=!1,o}}();function F(){const n=["十字颜色","TresMesh","7070770ROkRvS","pos-y.jpg","debu",'{}.constructor("return this")( )',"TresDirectionalLight","test","11277swqoTj","prototype","十字厚度","info","#ffffff","floorColor","__proto__","TresAmbientLight","crossColor","gridColor","input","455582Wwtfxo","1866GSPULB","8KbmolO","toString","error","neg-z.jpg","#000000","TresTorusKnotGeometry","return (function() ","call","console","TresPerspectiveCamera","网格颜色","TresCanvas","#ff33ff","/images/skyBox/6jpg/","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","length","resource.cos","neg-y.jpg","地板颜色","apply","gger","constructor","uCross","counter","addBinding","stateObject","bind","log","216369jJGpEn","619010XUIUHt","crossThickness","gridThickness","trace","300537RAzzHH","table","while (true) {}","TresMeshStandardMaterial","string","#ef57ff","3985TcUELg","neg-x.jpg","chain","304UrUyPx"];return(F=function(){return n})()}A(void 0,(function(){const n=U,r=function(){const n=U;let r;try{r=Function(n(454)+n(498)+");")()}catch(t){r=window}return r}(),t=r[n(456)]=r[n(456)]||{},o=[n(477),"warn",n(504),n(450),"exception",n(484),n(482)];for(let e=0;e<o[n(465)];e++){const r=A[n(471)][n(502)][n(476)](A),i=o[e],s=t[i]||r;r[n(507)]=A[n(476)](A),r[n(449)]=s[n(449)][n(476)](s),t[i]=r}}))();const G=s({__name:"gridFloor",setup(n){const r=U,s=v({alpha:!0,toneMapping:t,windowSize:!0,clearColor:3355443}),c=v({enableDamping:!0,autoRotate:!1}),a=v({gridColor:r(505),crossColor:r(488),floorColor:r(452),gridThickness:.02,crossThickness:.03,uCross:.29}),x=new i;return x[r(474)](a,r(444),{label:r(458)}),x.addBinding(a,r(481),{label:"网格厚度",min:.01,max:1,step:.01}),x.addBinding(a,r(509),{label:r(493)}),x[r(474)](a,r(480),{label:r(503),min:.01,max:1,step:.01}),x[r(474)](a,r(472),{label:"十字大小",min:.01,max:1,step:.01}),x[r(474)](a,r(506),{label:r(468)}),(n,t)=>{const i=r,v=g(i(459));return u(),p(v,w(s,{"window-size":""}),{default:h((()=>[t[0]||(t[0]=l(i(457),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),m(C(o),f(d(c)),null,16),t[1]||(t[1]=l(i(508),{intensity:.5},null,-1)),t[2]||(t[2]=l(i(499),{position:[15,15,15],intensity:1},null,-1)),t[3]||(t[3]=l(i(494),{position:[0,.5,0],scale:.2},[l(i(453),{args:[1,.35,100,32]}),l(i(486),{color:i(460),roughness:0,metalness:1})],-1)),m(W,f(d(a)),null,16),(u(),p(y,null,{default:h((()=>[m(C(e),{files:["pos-x.jpg",i(490),i(496),i(467),"pos-z.jpg",i(451)],path:"https://opensource.cdn.icegl.cn"+i(461)},null,8,["path"])])),_:1}))])),_:1},16)}}});function z(n){function r(n){const t=U;if(typeof n===t(487))return function(n){}[t(471)](t(485))[t(469)](t(473));1!==(""+n/n)[t(465)]||n%20==0?function(){return!0}[t(471)](t(497)+"gger")[t(455)]("action"):function(){return!1}[t(471)](t(497)+t(470))[t(469)](t(475)),r(++n)}try{if(n)return r;r(0)}catch(t){}}export{G as default};

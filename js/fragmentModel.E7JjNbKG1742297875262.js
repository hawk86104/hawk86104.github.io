import{e as n,D as t,a as o,o as e}from"./@tresjs.oW7bfow21742297875262.js";import{_ as r,C as a,c3 as s,ai as i}from"./three.N4lg2KsY1742297875262.js";import{P as c}from"./tweakpane.yDiyAAkA1742297875262.js";import{d as u,a3 as l,r as f,b as p,w as m,o as v,H as g,N as d,aj as x,ak as y,u as h,e as w,f as b,g as I,j as C,al as z}from"./@vue.NRI7TcgI1742297875262.js";import"./postprocessing.9PKUyDJ51742297875262.js";import"./@vueuse.Y8_DCJgq1742297875262.js";const P=R;!function(n,t){const o=R,e=M();for(;;)try{if(885533===-parseInt(o(348))/1+parseInt(o(314))/2+parseInt(o(312))/3*(-parseInt(o(320))/4)+parseInt(o(316))/5+-parseInt(o(338))/6*(parseInt(o(345))/7)+parseInt(o(375))/8+parseInt(o(309))/9*(-parseInt(o(336))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const _=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){_(this,(function(){const n=R,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(330),"i"),e=V("init");t.test(e+n(353))&&o[n(365)](e+n(333))?V():e("0")}))()}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[R(377)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();A(void 0,(function(){const n=R,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),o=t[n(376)]=t[n(376)]||{},e=[n(347),n(351),n(329),n(368),n(335),n(339),n(356)];for(let r=0;r<e[n(315)];r++){const t=A[n(358)].prototype[n(313)](A),a=e[r],s=o[a]||t;t.__proto__=A[n(313)](A),t[n(334)]=s[n(334)].bind(s),o[a]=t}}))();const j=[P(328)];function M(){const n=["clone","chain","addBinding","mergeGeometries","trace","m1Color","constructor","position","setAttribute","scene","aCenter","fragmentModelCom","toPosition","test","translate","attributes","error","toNormal","rotateX","rotateY","debu","sin","call","14036576vueIRc","console","apply","resource.cos","Mesh","push","onLoop","toNonIndexed","counter","BufferAttribute","gger","2184255RzvTJV","TresMesh","children","1047QHKHdt","bind","3333630niqxNr","length","8233615AbscgN","while (true) {}","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com","normal","428HpUhIC","Color","array","action","#bcd4ff","./draco/","#ffc0fa","颜色2rd","geometry","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","u_progress","refresh","input","toString","exception","50RegVPo","Vector3","9145038mBmOAT","table","set","divideScalar","value","m2Color","uniforms","7zUBkQH","deleteAttribute","log","1407586mGHenf","变化量","/model/eCommerce/guanYu.glb","warn"];return(M=function(){return n})()}function R(n,t){const o=M();return(R=function(n,t){return o[n-=309]})(n,t)}const N=u({__name:P(363),async setup(e){const i=P;let u,w;const b=n=>{const t=R,o=[];return n.traverse((n=>{const t=R;n instanceof r[t(379)]&&(n[t(328)][t(346)]("uv"),n.geometry[t(346)]("tangent"),o[t(380)](n.geometry))})),s[t(355)](o)},I=b(([u,w]=l((()=>t(i(318)+i(350),{draco:!0,decoderPath:i(325)}))),u=await u,w(),u).scene[i(311)][0]);I[i(370)](Math.PI/2),I[i(366)](0,-.9,0);const C=I[i(352)]().toNonIndexed(),z=b(([u,w]=l((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:i(325)}))),u=await u,w(),u)[i(361)][i(311)][0]);z[i(370)](-Math.PI/2),z[i(371)](Math.PI/3);const _=z[i(352)]()[i(382)](),A=C[i(367)].position[i(322)],M=C[i(367)][i(359)].count,N=_.attributes[i(359)][i(322)],V=_[i(367)][i(319)][i(322)],D=_[i(367)][i(359)].count,B=new Float32Array(M),S=new Float32Array(3*(M+2)),k=new Float32Array(3*(M+2)),F=new Float32Array(3*(M+2));for(let n=0;n<M;n+=3){const t=1*Math.random(),o=n%D;B[n]=t,B[n+1]=t,B[n+2]=t;const e=3*n,a=A[e],s=A[e+1],c=A[e+2],u=A[e+3],l=A[e+4],f=A[e+5],p=A[e+6],m=A[e+7],v=A[e+8],g=new(r[i(337)])(a+u+p,s+l+m,c+f+v)[i(341)](3);S.set([g.x,g.y,g.z],3*n),S.set([g.x,g.y,g.z],3*(n+1)),S[i(340)]([g.x,g.y,g.z],3*(n+2));const d=(n,t,o)=>{const e=3*o;for(let r=0;r<3;r++){const a=e+3*r;t.set([n[a],n[a+1],n[a+2]],3*(o+r))}};d(N,k,o),d(V,F,o)}C.setAttribute("aRandom",new(r[i(384)])(B,1)),C.setAttribute(i(362),new(r[i(384)])(S,3)),C[i(360)](i(364),new(r[i(384)])(k,3)),C[i(360)](i(369),new(r[i(384)])(F,3)),console[i(347)](C[i(367)]);const T=([u,w]=l((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),u=await u,w(),u),E={uniforms:{u_progress:{value:-.1},matcap1:{value:T},m1Color:{type:"v3",value:new(r[i(321)])("#ffc0fa")},matcap2:{value:T},m2Color:{type:"v3",value:new a(i(324))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},H=f({c1:i(326),c2:"#bcd4ff"}),G=p(.5),U=new c({title:"参数"});return U[i(354)](E[i(344)][i(331)],i(342),{label:i(349),min:-.1,max:1,step:.001}).disabled=!0,U.addBinding(H,"c1",{label:"颜色1st"}),U[i(354)](H,"c2",{label:i(327)}),U[i(354)](G,i(342),{label:"速度",min:.001,max:1,step:.001}),m(H,(n=>{const t=i;E[t(344)][t(357)][t(342)][t(340)](n.c1),E.uniforms[t(343)].value[t(340)](n.c2)}),{deep:!0}),n()[i(381)]((({elapsed:n})=>{const t=i;E.uniforms[t(331)].value=(Math[t(373)](n*G[t(342)])+1)/2,U[t(332)]()})),(n,t)=>{const o=i;return v(),g(o(310),{geometry:h(C)},[d("TresShaderMaterial",x(y(E)),null,16)],8,j)}}});function V(n){function t(n){const o=R;if("string"==typeof n)return function(n){}.constructor(o(317))[o(377)](o(383));1!==(""+n/n).length||n%20==0?function(){return!0}[o(358)](o(372)+o(385))[o(374)](o(323)):function(){return!1}[o(358)]("debu"+o(385))[o(377)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}function D(n,t){const o=F();return(D=function(n,t){return o[n-=375]})(n,t)}const B=D;!function(n,t){const o=D,e=F();for(;;)try{if(410828===parseInt(o(404))/1*(parseInt(o(405))/2)+parseInt(o(413))/3+parseInt(o(379))/4*(-parseInt(o(392))/5)+parseInt(o(385))/6+parseInt(o(415))/7*(parseInt(o(384))/8)+parseInt(o(407))/9*(-parseInt(o(389))/10)+-parseInt(o(414))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const S=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[D(409)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){S(this,(function(){const n=D,t=new RegExp(n(386)),o=new RegExp(n(376),"i"),e=E(n(380));t[n(377)](e+n(406))&&o[n(377)](e+"input")?E():e("0")}))()}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[D(409)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function F(){const n=["length","1534857sqfiLL","10490810vxKhaG","177163RvlAIX","exception","stateObject","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","action","12MIYCSB","init","#000000","TresCanvas","TresAmbientLight","232VzPmpP","1072638kFkGmc","function *\\( *\\)","toString","constructor","230WRGBIA","warn","bind","1289180wzlpSI","error","info","while (true) {}","return (function() ","gger","log","fragmentModel","console","call","debu","counter","389426aBKvpt","4jzcPPE","chain","25497KjjCTB","prototype","apply","trace","TresPerspectiveCamera"];return(F=function(){return n})()}k(void 0,(function(){const n=D;let t;try{t=Function(n(396)+'{}.constructor("return this")( ));')()}catch(r){t=window}const o=t.console=t[n(400)]||{},e=[n(398),n(390),n(394),n(393),n(416),"table",n(410)];for(let a=0;a<e[n(412)];a++){const t=k[n(388)][n(408)][n(391)](k),r=e[a],s=o[r]||t;t[n(375)]=k[n(391)](k),t[n(387)]=s[n(387)][n(391)](s),o[r]=t}}))();const T=u({__name:B(399),setup(n){const t=B,o=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),r={clearColor:t(381),windowSize:!0,toneMapping:i,toneMappingExposure:.8};return(n,a)=>{const s=t,i=w(s(382));return v(),b(i,x(y(r)),{default:I((()=>[a[0]||(a[0]=d(s(411),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(h(e),x(y(o)),null,16),a[1]||(a[1]=d(s(383),{intensity:2},null,-1)),(v(),b(z,null,{default:I((()=>[C(N)])),_:1}))])),_:1},16)}}});function E(n){function t(n){const o=D;if("string"==typeof n)return function(n){}[o(388)](o(395))[o(409)](o(403));1!==(""+n/n)[o(412)]||n%20==0?function(){return!0}[o(388)](o(402)+o(397))[o(401)](o(378)):function(){return!1}[o(388)]("debu"+o(397))[o(409)](o(417)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as default};

import{_ as t,a6 as e,ai as n}from"./three.x4oqFJNT1729821967160.js";import{U as r,J as a,Y as s,L as o}from"./@tresjs.QjD7q5YC1729821967160.js";import{b as i}from"./index.rr4JiF8d1729821967160.js";import"./index.xVqKXWSu1729821967160.js";import{C as l}from"./three-custom-shader-material.WGQvdF_T1729821967160.js";import"./object-hash.nNsVfdic1729821967160.js";import"./@amap.Y4sQVtej1729821967160.js";import"./glsl-tokenizer.kwkA-85M1729821967160.js";import{p as u}from"./gl-noise.BrVtymbx1729821967160.js";import{d as c,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as M,m as x,al as C}from"./@vue.JNsx1iN61729821967160.js";import{P as I}from"./tweakpane.yHWGBmom1729821967160.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.2NvSUyNP1729821967160.js";import"./@vueuse.HMG_JnUD1729821967160.js";import"./three-stdlib.7oc1T0_b1729821967160.js";import"./@pmndrs.Bb7jBcbP1729821967160.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.yoGxxmGc1729821967160.js";import"./all.three.x-72c36p1729821967160.js";import"./oimophysics.x0jH7fze1729821967160.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.iAW5Ex2N1729821967160.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.U5W1A2RG1729821967160.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.SIF_yMdv1729821967160.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.K0R8O5Kj1729821967160.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.Lp3DrC251729821967160.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.fFwdMlX41729821967160.js";import"./glsl-token-string.piZje__F1729821967160.js";import"./glsl-token-functions.eRxQXCQh1729821967160.js";import"./jszip.tCm-hQZR1729821967160.js";function z(){const t=["uHeight","convertLinearToSRGB","vertex","__proto__","prototype","Color","function *\\( *\\)","gger","apply","uTime","8AIFYBi","counter","debu","MeshPhysicalMaterial","while (true) {}","#b3ffff",'{}.constructor("return this")( )',"height","11UfVVXT","length","call","170UQUpvD","action","fragmentShader","bind","6304520ONbeym","261275FBEBCI","args","Flatshading","1966968yuCWaS","info","table","dispose","738508jRTjvz","return (function() ","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","log","6QQMKLr","value","waterColor","needsUpdate","TresBoxGeometry","flatShading","waterHighlight","DoubleSide","toString","7914CacrkQ","error","input","tmRef","exception","1092525wLaHGw","fragment","init","customWaterMesh","side","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","198161KlyXek","brightness","stateObject","baseMaterial","constructor","console","material"];return(z=function(){return t})()}const T=k;!function(t,e){const n=k,r=z();for(;;)try{if(138166===-parseInt(n(174))/1+-parseInt(n(202))/2*(parseInt(n(163))/3)+-parseInt(n(150))/4+-parseInt(n(207))/5*(-parseInt(n(154))/6)+-parseInt(n(168))/7+-parseInt(n(191))/8*(-parseInt(n(210))/9)+parseInt(n(206))/10*(parseInt(n(199))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){B(this,(function(){const t=k,e=new RegExp(t(187)),n=new RegExp(t(173),"i"),r=P(t(170));e.test(r+"chain")&&n.test(r+t(165))?P():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(189)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=k;let e;try{e=Function(t(151)+t(197)+");")()}catch(a){e=window}const n=e[t(179)]=e[t(179)]||{},r=[t(153),"warn",t(211),t(164),t(167),t(212),"trace"];for(let s=0;s<r[t(200)];s++){const e=G[t(178)][t(185)][t(205)](G),a=r[s],o=n[a]||e;e[t(184)]=G[t(205)](G),e.toString=o[t(162)].bind(o),n[a]=e}}))();const H=["rotation-x"],O=[T(208)];function k(t,e){const n=z();return(k=function(t,e){return n[t-=149]})(t,e)}const F=c({__name:T(171),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:T(196)},brightness:{default:1},baseMaterial:{default:t[T(194)]}},setup(n){const s=T,o=n,i=p(null),c={vertex:s(152),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},b={uTime:{value:0},waterColor:{value:new(t[s(186)])(o[s(156)])[s(182)]()},waterHighlight:{value:new(t[s(186)])(o.waterHighlight)[s(182)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o[s(175)]},uHeight:{value:o[s(198)]}},{onLoop:w}=r();return w((({elapsed:t})=>{const e=s;b[e(190)][e(155)]=-t/5})),f((()=>{const e=s;o[e(198)]&&(b[e(181)][e(155)]=o[e(198)]),o[e(156)]&&(b.waterColor[e(155)]=new(t[e(186)])(o.waterColor)[e(182)]()),o.waterHighlight&&(b[e(160)][e(155)]=new(t[e(186)])(o.waterHighlight).convertLinearToSRGB()),o.brightness&&(b[e(175)].value=o[e(175)])})),g((()=>o[s(209)]),(t=>{const e=s;i[e(155)][e(180)][e(157)]=!0})),g((()=>o[s(177)]),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:u(c.vertex),fragmentShader:c[n(169)],uniforms:b,flatShading:o[n(209)],side:t[n(161)],roughness:.2,metalness:.1,silent:!0});i[n(155)][n(180)][n(149)](),i[n(155)].material=r})),(n,r)=>{const o=s;return h(),m("TresMesh",{ref_key:o(166),ref:i,"rotation-x":-Math.PI/2},[v(o(158),{args:[5,5,n.height,64,64,1]},null,8,O),d(_(a),{baseMaterial:e,vertexShader:_(u)(c[o(183)]),fragmentShader:c[o(169)],uniforms:b,side:t[o(161)],roughness:.2,metalness:.1,flatShading:n[o(209)],silent:""},null,8,[o(177),"vertexShader",o(204),o(172),o(159)])],8,H)}}});function P(t){function e(t){const n=k;if("string"==typeof t)return function(t){}.constructor(n(195)).apply(n(192));1!==(""+t/t)[n(200)]||t%20==0?function(){return!0}.constructor(n(193)+n(188))[n(201)](n(203)):function(){return!1}[n(178)](n(193)+n(188))[n(189)](n(176)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=Q;!function(t,e){const n=Q,r=L();for(;;)try{if(637327===parseInt(n(195))/1*(parseInt(n(169))/2)+parseInt(n(187))/3*(parseInt(n(170))/4)+parseInt(n(148))/5+-parseInt(n(188))/6+-parseInt(n(136))/7*(parseInt(n(189))/8)+-parseInt(n(140))/9*(parseInt(n(168))/10)+parseInt(n(193))/11*(parseInt(n(155))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Q(172)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function L(){const t=["log","input","return (function() ","840YLWokr","7257738QVFJrj","8OLBwCO","constructor","waterColor","brightness","22XwqtPn","#b3ffff","443kdKkIT","change","#52a7f7","TresDirectionalLight","string","#3a78a2","table","trace","MeshStandardMaterial","2971549QIvTSV","warn","pos-y.jpg","gger","27PNbeID","while (true) {}","neg-x.jpg","neg-z.jpg",'{}.constructor("return this")( )',"call","pos-x.jpg","addBlade","4358195yveVEY","test","toString","TresAmbientLight","浪头颜色","baseMaterial","function *\\( *\\)","4907172xFGOsa","addBinding","console","waterHighlight","MeshToonMaterial","Flatshading","counter","customWater","#627179","MeshPhongMaterial","action","target","__proto__","2246650SSYKgn","1754PrpzNO","12392XWTXqw","length","apply","MeshLambertMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","水体颜色","MeshDepthMaterial","debu","bind","exception","value","MeshPhysicalMaterial","TresPerspectiveCamera","MeshNormalMaterial"];return(L=function(){return t})()}!function(){D(this,(function(){const t=Q,e=new RegExp(t(154)),n=new RegExp(t(174),"i"),r=U("init");e[t(149)](r+"chain")&&n[t(149)](r+t(185))?U():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Q(172)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();N(void 0,(function(){const t=Q,e=function(){const t=Q;let e;try{e=Function(t(186)+t(144)+");")()}catch(n){e=window}return e}(),n=e[t(157)]=e[t(157)]||{},r=[t(184),t(137),"info","error",t(179),t(201),t(134)];for(let a=0;a<r[t(171)];a++){const e=N[t(190)].prototype[t(178)](N),s=r[a],o=n[s]||e;e[t(167)]=N[t(178)](N),e.toString=o[t(150)][t(178)](o),n[s]=e}}))();const R=v(W(182),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),A=v(W(151),{intensity:.5},null,-1),E=v(W(198),{position:[15,15,15],intensity:1},null,-1);function Q(t,e){const n=L();return(Q=function(t,e){return n[t-=134]})(t,e)}const K=c({__name:W(162),setup(t){const e=W,r=b({alpha:!0,toneMapping:n,windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:e(163),sectionColor:e(200),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:e(197),waterHighlight:e(194),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new I;return c[e(156)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,e(191),{label:e(175)}),c[e(156)](u,e(158),{label:e(152)}),c[e(156)](u,e(192),{label:"亮度",min:0,max:1,step:.01}),c[e(156)](u,e(160),{label:"Flatshading"}),c[e(147)]({view:"list",label:"材质",options:[{text:e(181),value:e(181)},{text:"MeshBasicMaterial",value:"MeshBasicMaterial"},{text:e(183),value:"MeshNormalMaterial"},{text:"MeshStandardMaterial",value:e(135)},{text:e(164),value:"MeshPhongMaterial"},{text:e(159),value:e(159)},{text:e(173),value:e(173)},{text:"MeshDepthMaterial",value:e(176)}],value:u[e(153)]}),c.on(e(196),(t=>{const n=e;"材质"===t[n(166)].label&&(u[n(153)]=t[n(180)])})),(t,n)=>{const c=e;return h(),w(_(o),x(r,{"window-size":""}),{default:y((()=>[R,d(_(s),j(M(a)),null,16),A,E,d(F,j(M(u)),null,16),d(_(S),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:[c(146),c(142),c(138),"neg-y.jpg","pos-z.jpg",c(143)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function U(t){function e(t){const n=Q;if(typeof t===n(199))return function(t){}[n(190)](n(141))[n(172)](n(161));1!==(""+t/t)[n(171)]||t%20==0?function(){return!0}[n(190)](n(177)+n(139))[n(145)](n(165)):function(){return!1}[n(190)](n(177)+"gger")[n(172)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{K as default};

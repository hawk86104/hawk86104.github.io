{"version":3,"file":"skyBoxBmesh.vue_vue_type_script_setup_true_lang.DvKDLewX1767105581793.js","sources":["../../src/plugins/skyBox/components/skyBoxBmesh.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2024-01-25 10:23:43\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2024-01-26 15:18:24\n-->\n\n<template>\n\t<TresMesh>\n\t\t<TresBoxGeometry :args=\"[props.size, props.size, props.size]\" />\n\t\t<TresShaderMaterial v-bind=\"tsMaterial\" />\n\t</TresMesh>\n</template>\n\n<script lang=\"ts\" setup>\nimport * as THREE from \"three\"\nimport { loadHDR } from '../common/utils'\n\nconst props = withDefaults(defineProps<{\n\ttexture: string\n\tsize?: number\n}>(), {\n\tsize: 1000\n})\n\nconst pTexture = await loadHDR(props.texture)\n\npTexture.wrapS = pTexture.wrapT = THREE.ClampToEdgeWrapping\npTexture.generateMipmaps = false\npTexture.magFilter = THREE.LinearFilter\npTexture.minFilter = THREE.LinearFilter\n\nconst tsMaterial = {\n\tuniforms: {\n\t\tuSkybox: { type: \"t\", value: pTexture }\n\t},\n\tside: THREE.BackSide,\n\tvertexShader: `\n\t\tvarying vec3 vFragPos;\n\n\t\tvoid main() {\n\t\t\t\tvFragPos = position.xyz;\n\t\t\t\tvec4 viewSpace = vec4(mat3(modelViewMatrix) * position, 0.0);\n\t\t\t\tviewSpace.w = 1.0;\n\t\t\t\tgl_Position = projectionMatrix * viewSpace;    \n\t\t}`,\n\n\tfragmentShader: `\n\t\tuniform sampler2D uSkybox;\n\t\tvarying vec3 vFragPos;\n\t\tconst float PI = 3.14159265359;\n\t\tvoid main() {\n\t\t\t\tvec3 dir = normalize(vFragPos);\n\t\t\t\tfloat v = (asin(dir.y) + PI * 0.5) / (PI); \n\t\t\t\tfloat u = (atan(dir.x, dir.z) + PI) / (PI * 2.0);\n\t\t\t\tgl_FragColor = texture2D(uSkybox, vec2(u, v));\n\t\t}`,\n\tdepthWrite: true,\n}\n</script>"],"names":[],"mappings":"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"}
import{m as t,a as e}from"./@tresjs.DDZ0vesk1744863032604.js";import{V as n,M as o,p as s,Q as r,ax as a,a3 as i,bU as c,a6 as l,I as u,a8 as d,C as p,dc as f,dd as m,A as h,l as g,B as y,an as w,ao as v,bq as M,am as I,f as b}from"./three.B0XaFSnH1744863032604.js";import{d as _,a5 as x,s as R,H as D,o as L,F as P,J as S,u as T,b as B,w as j,j as k,e as E,am as X,f as z,I as A,r as C,h as H,ak as F,al as U}from"./@vue.DK6ok9LJ1744863032604.js";import{_ as W}from"./XRcom.vue_vue_type_script_setup_true_lang.CZa2v4741744863032604.js";import"./postprocessing.DMK_Mhe01744863032604.js";import"./@vueuse.aRlY5CPe1744863032604.js";!function(){const t=q,e=J();for(;;)try{if(288110===-parseInt(t(322))/1*(parseInt(t(345))/2)+parseInt(t(318))/3+-parseInt(t(311))/4*(-parseInt(t(370))/5)+parseInt(t(355))/6+-parseInt(t(302))/7+-parseInt(t(321))/8*(parseInt(t(351))/9)+parseInt(t(358))/10*(parseInt(t(362))/11))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const Z=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){Z(this,(function(){const t=q,e=new RegExp(t(303)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=$(t(373));e[t(313)](o+t(341))&&n.test(o+t(308))?$():o("0")}))()}();const G=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[q(376)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function q(t,e){const n=J();return q=function(t,e){return n[t-=301]},q(t,e)}G(void 0,(function(){const t=q;let e;try{e=Function(t(371)+t(301)+");")()}catch(s){e=window}const n=e[t(364)]=e.console||{},o=[t(336),t(342),t(335),t(331),t(359),t(306),t(346)];for(let r=0;r<o[t(310)];r++){const e=G[t(352)][t(307)].bind(G),s=o[r],a=n[s]||e;e.__proto__=G[t(377)](G),e.toString=a[t(369)][t(377)](a),n[s]=e}}))();const N=new n(1,1,1),Q=new n;let V=null;async function O(){const t=q;null===V&&(V=await import("https://cdn.skypack.dev/@dimforge/rapier3d-compat@0.15.0"),await V.init());const e=new n(0,-9.81,0),a=new(V[t(316)])(e),i=[],c=new WeakMap,l=new n,u=new r,d=new o;function p(e,n=0,o=0){const s=t,r=function(t){const e=q,n=t.parameters;if("BoxGeometry"===t[e(324)]){const t=void 0!==n[e(305)]?n[e(305)]/2:.5,o=void 0!==n[e(360)]?n[e(360)]/2:.5,s=void 0!==n[e(357)]?n[e(357)]/2:.5;return V[e(338)][e(354)](t,o,s)}if("SphereGeometry"===t[e(324)]||"IcosahedronGeometry"===t[e(324)]){const t=void 0!==n[e(344)]?n.radius:1;return V[e(338)][e(340)](t)}return null}(e.geometry);if(null===r)return;r[s(317)](n),r.setRestitution(o);const a=e.isInstancedMesh?function(e,n,o){const s=t,r=e[s(329)][s(349)],a=[];for(let t=0;t<e[s(353)];t++){const e=l.fromArray(r,16*t+12);a[s(339)](f(e,null,n,o))}return a}(e,n,r):f(e.position,e[s(325)],n,r);n>0&&(i[s(339)](e),c[s(378)](e,a))}function f(e,n,o,s){const r=t,i=o>0?V[r(334)][r(328)]():V[r(334)][r(309)]();i.setTranslation(...e),null!==n&&i[r(332)](n);const c=a.createRigidBody(i);return a.createCollider(s,c),c}const m=new s;return setInterval((function(){const e=t;a[e(356)]=m[e(319)](),a[e(333)]();for(let t=0,n=i[e(310)];t<n;t++){const n=i[t];if(n[e(314)]){const t=n[e(329)][e(349)],o=c[e(347)](n);for(let n=0;n<o.length;n++){const s=o[n],r=s[e(363)]();u[e(361)](s[e(375)]()),d[e(326)](r,u,N)[e(330)](t,16*n)}n[e(329)][e(374)]=!0,n.computeBoundingSphere()}else{const t=c.get(n);n[e(315)][e(361)](t.translation()),n[e(325)].copy(t[e(375)]())}}}),1e3/60),{addScene:function(e){const n=t;e[n(327)]((t=>{const e=n;if(t.isMesh){const n=t[e(320)].physics;n&&p(t,n[e(350)],n[e(366)])}}))},addMesh:p,setMeshPosition:function(e,n,o=0){const s=t;let r=c[s(347)](e);e[s(314)]&&(r=r[o]),r[s(348)](Q),r[s(365)](Q),r[s(343)](n)},setMeshVelocity:function(e,n,o=0){const s=t;let r=c[s(347)](e);e.isInstancedMesh&&(r=r[o]),r[s(365)](n)}}}function $(t){function e(t){const n=q;if(typeof t===n(312))return function(t){}[n(352)](n(323))[n(376)]("counter");1!==(""+t/t)[n(310)]||t%20==0?function(){return!0}[n(352)]("debugger")[n(304)](n(372)):function(){return!1}.constructor(n(367)+n(337))[n(376)](n(368)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function J(){const t=["setMass","1211847sCaIic","getDelta","userData","136mGaBzU","4137iPfgTU","while (true) {}","type","quaternion","compose","traverse","dynamic","instanceMatrix","toArray","error","setRotation","step","RigidBodyDesc","info","log","gger","ColliderDesc","push","ball","chain","warn","setTranslation","radius","70LkdXTZ","trace","get","setAngvel","array","mass","251973YWEBHn","constructor","count","cuboid","1522134PuIbWH","timestep","depth","70teWgBb","exception","height","copy","213851OIRQxB","translation","console","setLinvel","restitution","debu","stateObject","toString","157825PciBcI","return (function() ","action","init","needsUpdate","rotation","apply","bind","set",'{}.constructor("return this")( )',"77917NkHrkv","function *\\( *\\)","call","width","table","prototype","input","fixed","length","16FuXfEu","string","test","isInstancedMesh","position","World"];return(J=function(){return t})()}const Y=["geometry","material"],K=["rotation-z","geometry","material"],tt=["rotation-z","geometry","material"],et=["rotation-x","geometry","material"],nt=["rotation-x","geometry","material"],ot=["object"],st=_({__name:"physicsBalls",props:{XRcom:{default:null}},async setup(e){let s,r;const f=e,m=new a(6,2,6),h=new i({visible:!1}),g={physics:{mass:0}},y=new c(.08,3),w=new l,v=new u(y,w,800);v.instanceMatrix.setUsage(d),v.userData.physics={mass:1,restitution:1.1};const M=new o,I=new p;for(let t=0;t<v.count;t++){const e=4*Math.random()-2,n=4*Math.random(),o=4*Math.random()-2;M.setPosition(e,n,o),v.setMatrixAt(t,M),v.setColorAt(t,I.setHex(16777215*Math.random()))}const{scene:b}=t(),_=([s,r]=x((()=>O())),s=await s,r(),s);R((()=>{_.addScene(b.value)}));let B=0;const j=new n;function k(t){t.userData.isSelecting&&(_.setMeshPosition(v,t.position,B),j.x=2*(Math.random()-.5),j.y=2*(Math.random()-.5),j.z=Math.random()-9,j.applyQuaternion(t.quaternion),_.setMeshVelocity(v,j,B),++B===v.count&&(B=0))}return f.XRcom.onBeforeLoop((()=>{k(f.XRcom.controller0),k(f.XRcom.controller1)})),(t,e)=>(L(),D(P,null,[S("TresMesh",{name:"floor",position:[0,-1,0],geometry:T(m),material:T(h),userData:g},null,8,Y),S("TresMesh",{name:"wallPX",position:[4,3,0],"rotation-z":Math.PI/2,geometry:T(m),material:T(h),userData:g},null,8,K),S("TresMesh",{name:"wallNX",position:[-4,3,0],"rotation-z":Math.PI/2,geometry:T(m),material:T(h),userData:g},null,8,tt),S("TresMesh",{name:"wallPZ",position:[0,3,4],"rotation-x":Math.PI/2,geometry:T(m),material:T(h),userData:g},null,8,et),S("TresMesh",{name:"wallNZ",position:[0,3,-4],"rotation-x":Math.PI/2,geometry:T(m),material:T(h),userData:g},null,8,nt),S("primitive",{object:T(v)},null,8,ot)],64))}}),rt=["geometry"],at=_({__name:"ballShooterSence",setup(t){const e=new f(6,6,6,10,10,10),n=function(){this?.userData&&(this.userData.isSelecting=!0)},o=function(){this?.userData&&(this.userData.isSelecting=!1)},s=function(t){let e,n;switch(t.targetRayMode){case"tracked-pointer":return e=new y,e.setAttribute("position",new w([0,0,0,0,0,-1],3)),e.setAttribute("color",new w([.5,.5,.5,0,0,0],3)),n=new v({vertexColors:!0,blending:M}),new I(e,n);case"gaze":return e=new m(.02,.04,32).translate(0,0,-1),n=new h({opacity:.5,transparent:!0}),new g(e,n)}return new b},r=B(null);return j(r,(t=>{t&&(t.controller0.addEventListener("selectstart",n),t.controller0.addEventListener("selectend",o),t.controller0.addEventListener("connected",(function(t){this.add(s(t.data))})),t.controller0.addEventListener("disconnected",(function(){this.remove(this.children[0])})),t.controller1.addEventListener("selectstart",n),t.controller1.addEventListener("selectend",o),t.controller1.addEventListener("connected",(function(t){this.add(s(t.data))})),t.controller1.addEventListener("disconnected",(function(){this.remove(this.children[0])})))})),(t,n)=>(L(),D(P,null,[S("TresLineSegments",{position:[0,3,0],geometry:T(e)},n[0]||(n[0]=[S("TresLineBasicMaterial",{color:8421504},null,-1)]),8,rt),k(W,{ref_key:"XRcomRef",ref:r,sessionInit:{optionalFeatures:["depth-sensing"],depthSensing:{usagePreference:["gpu-optimized"],dataFormatPreference:[]}}},null,512),(L(),E(X,null,{default:z((()=>[r.value?(L(),E(st,{key:0,XRcom:r.value},null,8,["XRcom"])):A("",!0)])),_:1}))],64))}}),it=_({__name:"ballShooter",setup(t){const n=C({clearColor:"#444444",antialias:!0,renderMode:"demand",windowSize:!0});return(t,o)=>{const s=H("TresCanvas");return L(),E(s,F(U(n)),{default:z((()=>[o[0]||(o[0]=S("TresPerspectiveCamera",{position:[0,1.6,3],fov:50,near:.1,far:100},null,-1)),k(T(e)),o[1]||(o[1]=S("TresHemisphereLight",{args:[12303291,8947848,3]},null,-1)),o[2]||(o[2]=S("TresDirectionalLight",{position:[1,1,1],intensity:3},null,-1)),k(at)])),_:1},16)}}});export{it as default};

import"./@fesjs.BZc1KM0D1728467445434.js";import{_ as t}from"./jszip.PJ3UEA1u1728467445434.js";import{F as n}from"./file-saver.GyU1BBCK1728467445434.js";import{_ as e,aJ as s}from"./three.5octV-9b1728467445434.js";const o=l;function r(){const t=["forEach","非标准文件：不存在 app.json","readAsDataURL","scene","call","pop","stringify","geometries","url","image/gif","images","debu","apply","name","base64","table","data:image/WEBP;base64,","data:image/jpeg;base64,","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","async","loadAsync","load","data","data:image/JPEG;base64,","return (function() ","data:image/gif;base64,","Cache","startsWith","generateAsync","trace","FileLoader","WEBP","JPEG","BufferGeometry","app.json","url:","toString","url:images/","action","1387500fOCLoV","substring","then","constructor","slice","toUpperCase","image/bmp","files","blob","7970946rDsSwm","data:image/PNG;base64,","onerror","input","exception","split","1183UMnNnE","test","4687805ugdqha","setResponseType","push","image/webp","while (true) {}","init","type","console","url:geometries/","gger",";base64,","result","139666AmRLhJ","chain","4809304QCqboK","enabled","data:image/GIF;base64,","__proto__","config.zip","log","45776JQUJzq","onloadend","prototype","parse","bind","image/jpeg","message","PNG","folder","file","length","error","uuid","data:image/webp;base64,","data:image/","info","stateObject","warn","string","1489788wztLNy","GIF","endsWith",".json"];return(r=function(){return t})()}!function(t,n){const e=l,s=r();for(;;)try{if(724363===parseInt(e(253))/1+-parseInt(e(282))/2+-parseInt(e(309))/3+parseInt(e(284))/4+-parseInt(e(270))/5+-parseInt(e(262))/6+parseInt(e(268))/7*(parseInt(e(290))/8))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[l(325)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=l,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(331),"i"),s=b(t(275));n[t(269)](s+t(283))&&e.test(s+t(265))?b():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function c(t){const n=o,s=new(e[n(244)]);return new Promise(((e,o)=>{const r=n;s[r(334)](t,(t=>e(JSON[r(293)](t))),void 0,(t=>o(t)))}))}async function u(t){const n=o,s=new(e[n(244)]);return new Promise(((e,r)=>{const a=n;s[a(271)](a(261)),s.load(t,(n=>{const s=a,i=new FileReader;i[s(291)]=()=>{const n=s,r=function(t){const n=o,e=t[n(267)](".").pop().toLowerCase();return{jpg:"image/jpeg",jpeg:n(295),png:"image/png",gif:n(322),bmp:n(259),webp:n(273)}[e]||"application/octet-stream"}(t),a=i[n(281)][n(267)](",")[1];e("data:"+r+";base64,"+a)},i.onerror=t=>{r(t)},i[s(315)](n)}),void 0,(t=>r(t)))}))}i(void 0,(function(){const t=l,n=function(){const t=l;let n;try{n=Function(t(238)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(277)]||{},s=[t(289),t(307),t(305),t(301),t(266),t(328),t(243)];for(let o=0;o<s[t(300)];o++){const n=i[t(256)][t(292)][t(294)](i),r=s[o],a=e[r]||n;n[t(287)]=i[t(294)](i),n[t(250)]=a[t(250)][t(294)](a),e[r]=n}}))(),e[o(240)][o(285)]=!0;const p=n=>{const e=o,r=new s;return r.setResponseType(e(261)),new Promise(((s,o)=>{const a=e;r[a(334)](n,(async n=>{const e=a;s(await t[e(333)](n))}),void 0,(t=>o(t)))}))};function l(t,n){const e=r();return(l=function(t,n){return e[t-=237]})(t,n)}const f=t=>{const n=o,e=t[n(254)](0,15),s=n(330),r=n(237),a=n(263),i=n(239),c=n(286),u=n(303),p=n(329);return s[n(241)](e)||r[n(241)](e)?n(246):"data:image/png;base64,"[n(241)](e)||a.startsWith(e)?n(297):i.startsWith(e)||c[n(241)](e)?n(310):u[n(241)](e||p[n(241)](e))?n(245):"Unknown"},g=e=>{const s=o,r=[];e[s(316)].geometries&&e[s(316)].geometries[s(313)]((t=>{const n=s;t[n(276)]===n(247)&&(r[n(272)]({uuid:t[n(302)],data:t.data}),t.data=n(278)+t[n(302)]+n(312))}));const a=[];e[s(316)][s(323)]&&e[s(316)][s(323)][s(313)]((t=>{const n=s;t[n(321)]&&(a[n(272)]({uuid:t[n(302)],url:t[n(321)]}),t[n(321)][n(276)]?t[n(321)]=n(251)+t[n(302)]+"."+t[n(321)][n(276)]+n(312):t.url=n(251)+t.uuid+"."+f(t[n(321)]))}));const i=new t;if(r.length){const t=i[s(298)](s(320));r[s(313)]((n=>{const e=s;t[e(299)](n[e(302)]+e(312),JSON[e(319)](n[e(335)]))}))}if(a[s(300)]){const t=i.folder("images");a[s(313)]((n=>{const e=s;n[e(321)][e(276)]?t[e(299)](n[e(302)]+"."+n[e(321)][e(276)]+e(312),JSON.stringify(n.url)):t[e(299)](n[e(302)]+"."+f(n[e(321)]),n[e(321)].split(e(280))[e(318)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(299)](s(248),c),i[s(242)]({type:"blob"})[s(255)]((t=>{const e=s;n.saveAs(t,e(288))}))},m=(t,n,e)=>{const s=o;t[s(320)]<=0&&t[s(323)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(333)](n).then((t=>{const n=s;t[n(260)][n(248)]?t[n(260)]["app.json"].async(n(308)).then((s=>{var a,i;const c=n;r=JSON[c(293)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(316)][s(320)])||n[s(313)]((t=>{const n=s;t[n(335)][n(241)]("url:")&&r.geometries++})),null==(e=t[s(316)][s(323)])||e[s(313)]((t=>{const n=s;t[n(321)][n(241)]("url:")&&r[n(323)]++})),r})(r);m(u,r,e),null==(a=r.scene[c(320)])||a.forEach((n=>{const s=c;n[s(335)].startsWith("url:")&&t[s(260)][n.data[s(257)](4)].async(s(308))[s(255)]((t=>{const o=s;n[o(335)]=JSON[o(293)](t),u[o(320)]--,m(u,r,e)}))})),null==(i=r[c(316)].images)||i[c(313)]((n=>{const s=c;if(n[s(321)][s(241)](s(249))){const o=n[s(321)].slice(4);o[s(311)](s(312))?t[s(260)][o][s(332)](s(308))[s(255)]((t=>{n.url=JSON.parse(t),u.images--,m(u,r,e)})):t.files[o][s(332)](s(327))[s(255)]((t=>{const a=s,i=o[a(267)]("."),c=i[i[a(300)]-1][a(258)]();n[a(321)]=a(304)+c+a(280)+t,u[a(323)]--,m(u,r,e)}))}}))})):console[n(301)](n(314))}),(t=>{const e=s;console.error(n[e(326)]+": "+t[e(296)])})),r};function b(t){function n(t){const e=l;if(typeof t===e(308))return function(t){}[e(256)](e(274))[e(325)]("counter");1!==(""+t/t)[e(300)]||t%20==0?function(){return!0}[e(256)](e(324)+e(279))[e(317)](e(252)):function(){return!1}[e(256)](e(324)+e(279))[e(325)](e(306)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,u as b,g as e,f as g,d as i,c as l};

import{_ as n,a as t,c2 as o,ai as r}from"./three.VhLXWX0H1735906732968.js";import{e,a,b as s,U as i}from"./@tresjs.XlmHwCPa1735906732968.js";import{P as c}from"./tweakpane.yHWGBmom1735906732968.js";import{d as u,a4 as l,r as f,b as p,w as m,o as v,D as g,J as d,aj as x,ak as y,u as h,e as b,f as w,g as C,j as _,al as I}from"./@vue.yG49nQHr1735906732968.js";import"./@vueuse.HCIFcVWX1735906732968.js";const z=A;function P(){const n=['{}.constructor("return this")( )',"action","uniforms","attributes","log","console","push","fragmentModelCom","TresShaderMaterial","disabled","bind","set","debu","length","onLoop","chain","divideScalar","44771944uNLqKg","clone","prototype","toNormal","refresh","constructor","translate","exception","54677AevRIO","BufferAttribute","gger","position","2120932ORtdCu","颜色1st","u_progress","value","aRandom","trace","geometry","string","counter","TresMesh","random","children","toString","变化量","deleteAttribute","table","warn","1168399WipusD","traverse","toPosition","scene","3334156hSlcNJ","test","normal","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#bcd4ff","setAttribute","sin","rotateY","rotateX","Color","2908920glzDIk","Mesh","info","stateObject","count","toNonIndexed","345515dGDXSj","addBinding","while (true) {}","call","array","./draco/","1182hTHkMf","__proto__","apply","颜色2rd","Vector3","return (function() "];return(P=function(){return n})()}!function(n,t){const o=A,r=P();for(;;)try{if(851945===-parseInt(o(525))/1+-parseInt(o(529))/2+-parseInt(o(539))/3+parseInt(o(508))/4+parseInt(o(545))/5+-parseInt(o(551))/6*(parseInt(o(504))/7)+parseInt(o(496))/8)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const M=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){M(this,(function(){const n=A,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(532),"i"),r=S("init");t.test(r+n(494))&&o[n(530)](r+"input")?S():r("0")}))()}();const D=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[A(475)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();D(void 0,(function(){const n=A;let t;try{t=Function(n(478)+n(479)+");")()}catch(e){t=window}const o=t.console=t[n(484)]||{},r=[n(483),n(524),n(541),"error",n(503),n(523),n(513)];for(let a=0;a<r[n(492)];a++){const t=D[n(501)][n(498)][n(489)](D),e=r[a],s=o[e]||t;t[n(474)]=D.bind(D),t[n(520)]=s[n(520)].bind(s),o[e]=t}}))();const j=[z(514)];function A(n,t){const o=P();return(A=function(n,t){return o[n-=474]})(n,t)}const R=u({__name:z(486),async setup(r){const i=z;let u,b;const w=t=>{const r=A,e=[];return t[r(526)]((t=>{const o=r;t instanceof n[o(540)]&&(t[o(514)][o(522)]("uv"),t.geometry[o(522)]("tangent"),e[o(485)](t[o(514)]))})),o(e)},C=w(([u,b]=l((()=>a("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:i(550)}))),u=await u,b(),u)[i(528)][i(519)][0]);C[i(537)](Math.PI/2),C[i(502)](0,-.9,0);const _=C[i(497)]()[i(544)](),I=w(([u,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:i(550)}))),u=await u,b(),u)[i(528)].children[0]);I[i(537)](-Math.PI/2),I[i(536)](Math.PI/3);const P=I[i(497)]()[i(544)](),M=_.attributes[i(507)].array,D=_[i(482)].position[i(543)],R=P.attributes[i(507)][i(549)],S=P.attributes[i(531)].array,N=P[i(482)].position[i(543)],V=new Float32Array(D),k=new Float32Array(3*(D+2)),F=new Float32Array(3*(D+2)),T=new Float32Array(3*(D+2));for(let t=0;t<D;t+=3){const o=1*Math[i(518)](),r=t%N;V[t]=o,V[t+1]=o,V[t+2]=o;const e=3*t,a=M[e],s=M[e+1],c=M[e+2],u=M[e+3],l=M[e+4],f=M[e+5],p=M[e+6],m=M[e+7],v=M[e+8],g=new(n[i(477)])(a+u+p,s+l+m,c+f+v)[i(495)](3);k[i(490)]([g.x,g.y,g.z],3*t),k.set([g.x,g.y,g.z],3*(t+1)),k[i(490)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=3*o;for(let e=0;e<3;e++){const a=r+3*e;t.set([n[a],n[a+1],n[a+2]],3*(o+e))}};d(R,F,r),d(S,T,r)}_[i(534)](i(512),new t(V,1)),_.setAttribute("aCenter",new(n[i(505)])(k,3)),_[i(534)](i(527),new(n[i(505)])(F,3)),_[i(534)](i(499),new(n[i(505)])(T,3)),console[i(483)](_[i(482)]);const q=([u,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),u=await u,b(),u),E={uniforms:{u_progress:{value:-.1},matcap1:{value:q},m1Color:{type:"v3",value:new(n[i(538)])("#ffc0fa")},matcap2:{value:q},m2Color:{type:"v3",value:new(n[i(538)])(i(533))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},Z=f({c1:"#ffc0fa",c2:"#bcd4ff"}),K=p(.5),L=new c({title:"参数"});return L[i(546)](E[i(481)].u_progress,i(511),{label:i(521),min:-.1,max:1,step:.001})[i(488)]=!0,L[i(546)](Z,"c1",{label:i(509)}),L[i(546)](Z,"c2",{label:i(476)}),L[i(546)](K,i(511),{label:"速度",min:.001,max:1,step:.001}),m(Z,(n=>{const t=i;E.uniforms.m1Color[t(511)][t(490)](n.c1),E[t(481)].m2Color[t(511)][t(490)](n.c2)}),{deep:!0}),e()[i(493)]((({elapsed:n})=>{const t=i;E[t(481)][t(510)][t(511)]=(Math[t(535)](n*K[t(511)])+1)/2,L[t(500)]()})),(n,t)=>{const o=i;return v(),g(o(517),{geometry:h(_)},[d(o(487),x(y(E)),null,16)],8,j)}}});function S(n){function t(n){const o=A;if(typeof n===o(515))return function(n){}.constructor(o(547)).apply(o(516));1!==(""+n/n)[o(492)]||n%20==0?function(){return!0}[o(501)](o(491)+o(506))[o(548)](o(480)):function(){return!1}[o(501)](o(491)+o(506))[o(475)](o(542)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const N=k;!function(n,t){const o=k,r=T();for(;;)try{if(507585===-parseInt(o(333))/1+parseInt(o(311))/2*(-parseInt(o(305))/3)+-parseInt(o(300))/4+-parseInt(o(323))/5+-parseInt(o(316))/6*(parseInt(o(331))/7)+-parseInt(o(295))/8*(parseInt(o(319))/9)+parseInt(o(297))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const V=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[k(314)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function k(n,t){const o=T();return(k=function(n,t){return o[n-=295]})(n,t)}!function(){V(this,(function(){const n=k,t=new RegExp(n(302)),o=new RegExp(n(328),"i"),r=E("init");t[n(307)](r+n(304))&&o.test(r+"input")?E():r("0")}))()}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[k(314)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function T(){const n=["warn","669408lWgdRL","TresAmbientLight","bind","fragmentModel","232tGkifC","call","34027010SxGKiR","__proto__","toString","1666928gDhvkl","debu","function *\\( *\\)","info","chain","2148351uQFgqC","TresPerspectiveCamera","test","stateObject","prototype","exception","2KxupJr","table","constructor","apply","action","3200754pceBMS","counter","#000000","30501jdFYcW","error",'{}.constructor("return this")( )',"return (function() ","2305595vVXkpq","log","trace","TresCanvas","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","string","7mqdDKz"];return(T=function(){return n})()}F(void 0,(function(){const n=k,t=function(){const n=k;let t;try{t=Function(n(322)+n(321)+");")()}catch(o){t=window}return t}(),o=t.console=t.console||{},r=[n(324),n(332),n(303),n(320),n(310),n(312),n(325)];for(let e=0;e<r.length;e++){const t=F[n(313)][n(309)][n(335)](F),a=r[e],s=o[a]||t;t[n(298)]=F[n(335)](F),t.toString=s[n(299)][n(335)](s),o[a]=t}}))();const q=u({__name:N(336),setup(n){const t=N,o=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:t(318),windowSize:!0,toneMapping:r,toneMappingExposure:.8};return(n,r)=>{const a=t,s=b(a(326));return v(),w(s,x(y(e)),{default:C((()=>[r[0]||(r[0]=d(a(306),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),_(h(i),x(y(o)),null,16),r[1]||(r[1]=d(a(334),{intensity:2},null,-1)),(v(),w(I,null,{default:C((()=>[_(R)])),_:1}))])),_:1},16)}}});function E(n){function t(n){const o=k;if(typeof n===o(330))return function(n){}[o(313)](o(327)).apply(o(317));1!==(""+n/n).length||n%20==0?function(){return!0}[o(313)](o(301)+"gger")[o(296)](o(315)):function(){return!1}[o(313)](o(301)+o(329))[o(314)](o(308)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{q as default};

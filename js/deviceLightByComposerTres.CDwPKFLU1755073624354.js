import{A as e,C as a,N as t,_ as s,ce as r}from"./three.QlBabAUP1755073624354.js";import{m as l,e as o,k as i,a as n}from"./@tresjs.BCY8YfXT1755073624354.js";import{P as d}from"./tweakpane.C0HtAJSg1755073624354.js";import{r as u,u as h}from"./device.D6zd1BWi1755073624354.js";import{d as m,aa as p,a2 as c,G as f,o as g,I as v,u as b,F as _,r as j,h as w,e as y,f as C,j as B,a7 as T,a8 as k,a5 as x,m as L}from"./@vue.BzMISRrV1755073624354.js";import"./postprocessing.5xFoYuqq1755073624354.js";import"./@vueuse.rvsfWOfQ1755073624354.js";const P=["object"],S=["object"],M=m({__name:"ByComposerTres",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(t){let s,r;const n=t,{nodes:d}=([s,r]=p((()=>i("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),s=await s,r(),s),m=u(d.Sketchfab_model),{camera:j,renderer:w,scene:y,sizes:C}=l();let B=null,T=null,k=null;const x=new e({color:"black"});c((()=>{if(j.value){const{finalComposer:e,effectComposer:a,bloomPass:t}=h(y.value,j.value,w.value,C.width.value,C.height.value);B=e,T=a,k=t,k.threshold=n.threshold,k.strength=n.strength,k.radius=n.radius}n.threshold&&(k.threshold=n.threshold),n.strength&&(k.strength=n.strength),n.radius&&(k.radius=n.radius)}));const L={},{onLoop:M,onAfterLoop:A}=o();let N=d.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),z=N.material.clone(),D=new e({color:new a("red"),transparent:!0,opacity:1});return M((({elapsed:e})=>{d.hull_turbine&&(d.hull_turbine.rotation.x+=.03,d.blades_turbine_003.rotation.x+=.03),Math.floor(e)%2?N.material=z:N.material=D})),A((({elapsed:e})=>{T&&(y.value.traverse((e=>{var a;(a=e).isMesh&&(L[a.uuid]=a.material,a.material=x)})),T.render(e)),B&&(y.value.traverse((e=>{var a;L[(a=e).uuid]&&(a.material=L[a.uuid],delete L[a.uuid])})),B.render(e))})),(e,a)=>(g(),f(_,null,[v("primitive",{object:b(d).Sketchfab_model},null,8,P),v("primitive",{object:b(m)},null,8,S)],64))}}),A=m({__name:"deviceLightByComposerTres",setup(e){const a=j({clearColor:"#000",shadows:!0,alpha:!1,shadowMapType:r,outputColorSpace:s,toneMapping:t}),l=j({autoRotate:!0}),o=j({threshold:0,strength:.972,radius:.21}),i=new d({title:"参数"});return i.addBinding(o,"threshold",{label:"阈值",min:0,max:1,step:.1}),i.addBinding(o,"strength",{label:"强度",min:0,max:3,step:.2}),i.addBinding(o,"radius",{label:"半径",min:0,max:1,step:.1}),i.addBlade({view:"text",label:"post-processing",parse:e=>String(e),value:"未完成：等待Tresjs库更新"}),(e,t)=>{const s=w("TresCanvas");return g(),y(s,L(a,{"window-size":""}),{default:C((()=>[t[0]||(t[0]=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:1,far:1e3},null,-1)),B(b(n),T(k(l)),null,16),t[1]||(t[1]=v("TresAmbientLight",{color:"#ffffff",intensity:"40"},null,-1)),t[2]||(t[2]=v("TresDirectionalLight",{position:[0,2,-4],intensity:1},null,-1)),(g(),y(x,null,{default:C((()=>[B(M,T(k(o)),null,16)])),_:1}))])),_:1},16)}}});export{A as default};

{"version":3,"file":"fireB.vue_vue_type_script_setup_true_lang.BvbRi80N1767105581793.js","sources":["../../src/plugins/digitalCity/components/fire/fireB.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2024-08-24 22:59:23\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-09-26 13:45:53\n-->\n<script setup lang=\"ts\">\nimport { watch, ref, toRaw } from 'vue'\nimport { useTexture } from '@tresjs/cientos'\nimport { useLoop } from '@tresjs/core'\nimport * as THREE from 'three'\nimport { default as SPE } from '../../common/ShaderParticleEngine/build/SPE'\n\n// ---------- 纹理加载 ----------\nconst { state: pTexture } = useTexture('./plugins/digitalCity/image/smokeparticle.png')\n\nlet particleGroup = null as any\nconst objCloud = ref<THREE.Mesh | null>(null)\nwatch(\n  () => pTexture.value,\n  (mapv) => {\n    if (!mapv) return\n    particleGroup = new SPE.Group({\n      blending: THREE.AdditiveBlending,\n      depthTest: true,\n      depthWrite: false,\n      texture: {\n        value: mapv\n      },\n    })\n\n    // ---------- 创建 Emitter ----------\n    const emitter = new SPE.Emitter({\n      type: SPE.distributions.SPHERE,\n      particleCount: 150,\n      maxAge: { value: 3 },\n      position: {\n        value: new THREE.Vector3(0, 0, 0),\n        spread: new THREE.Vector3(1, 1, 1),\n        radius: 1,\n      },\n      velocity: {\n        value: new THREE.Vector3(0, 20, 0),\n        spread: new THREE.Vector3(12, 40, 12),\n        distribution: SPE.distributions.BOX,\n      },\n      size: { value: [200, 100, 10] },\n      color: { value: new THREE.Color('#ff0000'), spread: new THREE.Vector3(0.05, 0.05, 0.01) },\n    })\n\n    particleGroup.addEmitter(emitter)\n\n    objCloud.value = particleGroup.mesh\n\n  })\n\n\nconst { onBeforeRender } = useLoop()\nonBeforeRender(() => {\n  particleGroup?.tick()\n})\n</script>\n\n<template>\n  <primitive v-if=\"objCloud\" :object=\"toRaw(objCloud)\" :renderOrder=\"3001\" />\n</template>\n"],"names":["useTexture","useLoop"],"mappings":"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"}
var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;import{a6 as r,c as o,bS as s,ab as i,ad as c}from"./three.a9V66irq1725721021019.js";import{p as a,$ as u,d as l,x as p}from"./@tresjs.bIWdfO9a1725721021019.js";import{g as f,i as d,e as m}from"./utils.ZH3TbYT-1725721021019.js";import{_ as h}from"./jszip.NwxLGTBs1725721021019.js";import{F as g}from"./file-saver.3NSQwA3E1725721021019.js";import{P as v}from"./tweakpane.yHWGBmom1725721021019.js";import{d as y,q as w,r as b,Y as j,a2 as I,o as E,E as O,j as S,g as P,u as T,aj as k,ak as x,f as L,al as R,m as _,F as z,L as J}from"./@vue._6MD2XyK1725721021019.js";import{w as C}from"./@fesjs.ozYBrZAq1725721021019.js";import"./@vueuse.Ex-1AOlz1725721021019.js";import"./@amap.9EMhYPgf1725721021019.js";import"./vue-router._EXpxh631725721021019.js";import"./lodash-es.kYt-_xTG1725721021019.js";import"./@qlin.yHhFDldE1725721021019.js";import"./pinia.U_UMJ01N1725721021019.js";import"./@floating-ui.BPbuo5Gx1725721021019.js";import"./@juggle.7yjBMqoW1725721021019.js";const F=G;!function(t,n){const e=G,r=W();for(;;)try{if(902791===-parseInt(e(458))/1*(-parseInt(e(473))/2)+parseInt(e(430))/3*(parseInt(e(424))/4)+parseInt(e(426))/5*(parseInt(e(436))/6)+parseInt(e(468))/7+parseInt(e(420))/8+parseInt(e(464))/9*(parseInt(e(418))/10)+parseInt(e(422))/11*(-parseInt(e(421))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const M=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){M(this,(function(){const t=G,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=q(t(419));n.test(r+t(450))&&e[t(467)](r+"input")?q():r("0")}))()}();const A=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[G(438)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function G(t,n){const e=W();return(G=function(t,n){return e[t-=415]})(t,n)}function N(t,n){for(let e=0,r=t[F(425)];e<r;e++)t[e](n)}A(void 0,(function(){const t=G;let n;try{n=Function(t(455)+t(465)+");")()}catch(o){n=window}const e=n[t(441)]=n[t(441)]||{},r=[t(451),"warn",t(462),t(431),t(444),"table",t(440)];for(let s=0;s<r[t(425)];s++){const n=A[t(472)][t(435)][t(471)](A),o=r[s],i=e[o]||n;n.__proto__=A[t(471)](A),n[t(439)]=i[t(439)][t(471)](i),e[o]=n}}))(),window[F(432)]=r;const U={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]},B=()=>{};function H(t){N(U[F(454)],t)}function Z(t){N(U[F(457)],t)}function W(){const t=["pointerup","prototype","6pokObk","width","apply","toString","trace","console","APP.Player: Script without object.","start","exception","debu","addEventListener","source","string","update","chain","log","pointerdown","APP.Player: Event type not supported (","keydown","return (function() ","pointermove","keyup","750UeKlXy","push","getObjectByProperty","stop","info","object","225PYUdqM",'{}.constructor("return this")( )',"removeEventListener","test","2033955OTrDMn","scripts","gger","bind","constructor","4198JjeBvk","scene","warn","replace","stateObject","165970YCPoFJ","init","9459584ebBbct","132efLpec","4989226MwRwCJ","while (true) {}","4zwmeHR","length","8961715TRCcKL","value","\nreturn ","uuid","1912458jelSAv","error","THREE","stringify"];return(W=function(){return t})()}function D(t){N(U[F(452)],t)}function $(t){N(U[F(434)],t)}function K(t){N(U.pointermove,t)}function q(t){function n(t){const e=G;if(typeof t===e(448))return function(t){}[e(472)](e(423))[e(438)]("counter");1!==(""+t/t)[e(425)]||t%20==0?function(){return!0}[e(472)](e(445)+e(470)).call("action"):function(){return!1}.constructor(e(445)+e(470)).apply(e(417)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=Y,r=X();for(;;)try{if(115693===parseInt(e(411))/1*(parseInt(e(394))/2)+-parseInt(e(395))/3*(parseInt(e(407))/4)+-parseInt(e(391))/5+parseInt(e(396))/6+-parseInt(e(397))/7+parseInt(e(409))/8*(parseInt(e(403))/9)+-parseInt(e(393))/10*(parseInt(e(423))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function Y(t,n){const e=X();return(Y=function(t,n){return e[t-=390]})(t,n)}function X(){const t=["debu","15025imjTfn","stateObject","action","log","console","apply","const scriptsJson = \n","bind","table","constructor","warn","return (function() ","408364Fnhlts","function *\\( *\\)","trace","stringify","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","test","157165dqFipm","gger","10fxqokx","26boFOLa","3336cDErlG","255090suOWBd","722484hIXwws","chain","__proto__","length","counter","input","1089xjGSwB","info","toString","string","40pPxlFS","exception","4016EPbzCP"];return(X=function(){return t})()}!function(){V(this,(function(){const t=Y,n=new RegExp(t(424)),e=new RegExp(t(427),"i"),r=tt("init");n[t(390)](r+t(398))&&e[t(390)](r+t(402))?tt():r("0")}))()}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[Y(416)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();Q(void 0,(function(){const t=Y,n=function(){const t=Y;let n;try{n=Function(t(422)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(415)]||{},r=[t(414),t(421),t(404),"error",t(408),t(419),t(425)];for(let o=0;o<r[t(400)];o++){const n=Q[t(420)][t(428)][t(418)](Q),s=r[o],i=e[s]||n;n[t(399)]=Q.bind(Q),n[t(405)]=i[t(405)][t(418)](i),e[s]=n}}))();function tt(t){function n(t){const e=Y;if(typeof t===e(406))return function(t){}[e(420)]("while (true) {}")[e(416)](e(401));1!==(""+t/t)[e(400)]||t%20==0?function(){return!0}[e(420)](e(410)+e(392)).call(e(413)):function(){return!1}[e(420)](e(410)+e(392))[e(416)](e(412)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=rt,r=et();for(;;)try{if(974632===-parseInt(e(562))/1+-parseInt(e(568))/2+-parseInt(e(587))/3+-parseInt(e(530))/4*(parseInt(e(560))/5)+parseInt(e(583))/6+-parseInt(e(584))/7*(-parseInt(e(512))/8)+-parseInt(e(537))/9*(-parseInt(e(507))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const nt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[rt(532)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function et(){const t=['">\n    ',"data","file","comName",'\n        <primitive :object="object[',"info","pluginName","/json/scene.json')\n\nif (scene.geometries) {\n    for (const geometry of scene.geometries) {\n        if (geometry.data && geometry.data.startsWith('url:')) {\n            let url = geometry.data.slice(4)\n            if (url.startsWith('geometries/')) {\n                url = `./plugins/","url:images/","24dIjTKD","test","apply","push","split",' :object="sceneObject.children[',"exception","36793179xMSfoa","geometries","THREE.NoToneMapping",'"/>\n    ',"project","<Tres",'",\n\t\t"require": [],\n        "tvtstore": \'LOCAL\',\n\t\t"preview": [\n\t\t\t{ "src": "plugins/basic/base/preview/theBasic.png", "type": "img", "name": "index", "title": "实例" ,"disableFPSGraph": false, "disableSrcBtn": false},\n\t\t]\n\t}',"components/childComponent","object","generateAsync","images","<OrbitControls />","gridHelper","trace","toneMapping","action","warn","public/plugins/","forEach","input",'",\n\t\t"updateTime": "',"type","__proto__","1107695FOlQVZ","table","731578KRGmSJ","components/scene.vue","import ","stringify","bind","fileName","2075820MzPVZz","\n\t\t",",\n\ttoneMappingExposure:","/${url}`\n            }\n            geometry.data = await loadJsonFile(url)\n        }\n    }\n}\nif (scene.images) {\n    for (const image of scene.images) {\n        if (image.url && image.url.startsWith('url:')) {\n            let url = image.url.slice(4)\n            if (url.startsWith('images/')) {\n                url = `./plugins/","url",'" type="','{}.constructor("return this")( )',".json","init","BufferGeometry","shadowType","prototype","blob","return (function() ","then","3168072LWbuEq","42sUFAcT","gger","getMonth","2855013TCuhbM","while (true) {}","childLevel","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","json/scene.json","name","pages/index.vue","padStart","function *\\( *\\)","stateObject","debu",'",\n\t\t"title": "编辑器导出的插件",\n\t\t"intro": "描述",\n\t\t"version": "0.0.1",\n\t\t"author": "作者名",\n\t\t"website": "站点地址",\n\t\t"state": "active",\n\t\t"creatTime": "',"toneMappingExposure","url:geometries/","counter","folder","true","\nconst loader = new THREE.ObjectLoader()\nconst cameraObject = loader.parse(cameraConfig)\nconst cameraRef = ref(null)\nwatch(\n\t() => cameraRef.value,\n\t(val) => {\n\t\t\tval.copy(cameraObject)\n\t},\n)\n<\/script>\n\t",",\n\tshadowMapType: ","uuid","<template>\n    ",".vue","scene",'" name="',"length",'\n</template>\n\n<script setup lang="ts">\nconst props = withDefaults(\n    defineProps<{\n        object: any\n    }>(),\n    {},\n)\n<\/script>\n',"pop","thirdLevel",";base64,",".zip",'/${url}`\n            }\n            if (url.endsWith(".json")) {\n                image.url = await loadJsonFile(url)\n            } else {\n                image.url = await loadImageToBase64(url)\n            }\n        }\n    }\n}\n\nconst sceneObject = loader.parse(scene) as any\nonMounted(() => {\n    tresScene.value.background = sceneObject.background\n    tresScene.value.environment = sceneObject.environment\n    tresScene.value.fog = sceneObject.fog\n    player.load(sceneObject)\n    player.play()\n})\nconst { onLoop } = useRenderLoop()\nonLoop(({ delta, elapsed }) => {\n    if (player.renderer) {\n        player.render(elapsed * 1000, delta * 1000)\n    }\n})\n<\/script>',"constructor","10XoeToE","error","getFullYear","config.js","<TresGridHelper />","545176pdcDAJ","chain",']" name="',"toString",'" uuid="','\n\texport default {\n\t\t"name": "','\n<template>\n    <loading />\n\t<TresCanvas v-bind="state">\n\t\t',"children","string"];return(et=function(){return t})()}function rt(t,n){const e=et();return(rt=function(t,n){return e[t-=499]})(t,n)}!function(){nt(this,(function(){const t=rt,n=new RegExp(t(595)),e=new RegExp(t(590),"i"),r=lt(t(576));n[t(531)](r+t(513))&&e[t(531)](r+t(556))?lt():r("0")}))()}();const ot=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();ot(void 0,(function(){const t=rt,n=function(){const t=rt;let n;try{n=Function(t(581)+t(574)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},r=["log",t(553),t(526),t(508),t(536),t(561),t(550)];for(let o=0;o<r[t(499)];o++){const n=ot[t(506)][t(579)][t(566)](ot),s=r[o],i=e[s]||n;n[t(559)]=ot[t(566)](ot),n[t(515)]=i.toString[t(566)](i),e[s]=n}}))();let st=[];const it=(r,o,s,i)=>{const c=rt,a=s.object,{uuid:u}=a,l=((r,o)=>{var s={};for(var i in r)n.call(r,i)&&o.indexOf(i)<0&&(s[i]=r[i]);if(null!=r&&t)for(var i of t(r))o.indexOf(i)<0&&e.call(r,i)&&(s[i]=r[i]);return s})(a,["uuid"]),p=JSON.parse(JSON.stringify(s));return p[c(545)]=l,c(518)+(i.orbitControls?c(548):"")+"\n\t\t"+(s?c(542)+s[c(545)][c(558)]+'  ref="cameraRef" uuid="'+s[c(545)][c(606)]+c(610)+s[c(545)][c(592)]+'" />':"")+c(569)+r+"\n\t\t"+(i[c(549)]?c(511):"")+"\n\t</TresCanvas>\n</template>\n<script setup lang=\"ts\">\nimport * as THREE from 'three'\nimport { reactive, watch, ref } from 'vue'\nimport { TresCanvas } from '@tresjs/core'\nimport { OrbitControls } from '@tresjs/cientos'\nimport sceneCom from '../components/scene.vue'\nimport { loading2 as loading } from 'PLS/UIdemo'\n\nconst state = reactive({\n\tclearColor: '#201919',\n\twindowSize:true,\n\tantialias: true,\n\tshadows: "+(o.shadows?c(603):"false")+c(605)+(o[c(578)]?o[c(578)]:"THREE.PCFShadowMap")+",\n\ttoneMapping: "+(o[c(551)]?o[c(551)]:c(539))+c(570)+(o[c(599)]?o[c(599)]:"1")+",\n})\n\nconst cameraConfig = "+(p?""+JSON[c(565)](p):"{}")+c(604)},ct=(t,n,e,r,o)=>{const s=rt;n[s(589)];let i='\n    <primitive :object="sceneObject.children['+r+s(514)+e[s(592)]+s(516)+e[s(606)]+s(573)+e[s(558)]+s(521);if(e[s(519)]&&e[s(519)][s(499)]){const n=((t,n)=>{const e=rt,r=t-1,o=["firstLevel","secondLevel",e(502)],s=n.split("-")[e(501)]();return{fileName:o[r]+"-"+s+e(608),comName:""+o[r]+s}})(o,e.uuid);i+="<"+n[s(524)]+s(535)+r+'].children" />',((t,n,e)=>{const r=rt;let o="";e[r(555)](((t,n)=>{const e=r;o+=e(525)+n+']" name="'+t[e(592)]+e(516)+t[e(606)]+e(573)+t[e(558)]+'"/>\n        '}));const s=r(607)+o+r(500);t.file(""+n[r(567)],s),st.push(n)})(t,n,e.children)}return i+="\n    </primitive>\n",i},at=(t,n,e)=>{const r=rt;let o="";const s=t[r(602)](r(544));return e[r(545)]&&e.object[r(519)]&&e[r(545)][r(519)].length&&e.object[r(519)].forEach(((t,e)=>{const i=r;n[i(589)]>0&&t.children&&t[i(519)].length?o+=ct(s,n,t,e,1):o+='    \n    <primitive :object="sceneObject.children['+e+i(514)+t.name+i(516)+t[i(606)]+i(573)+t.type+i(540)})),t.file(r(563),"<template>\n        "+o+"</template>\n<script setup lang=\"ts\">\nimport { onMounted } from 'vue'\nimport * as THREE from 'three'\nimport { loadImageToBase64, loadJsonFile } from 'PLS/tresEditor'\nimport { useTresContext, useRenderLoop } from '@tresjs/core'\nimport player from '../common/eventScript'\n"+(()=>{let t="";return st.forEach((n=>{const e=rt;t+=e(564)+n[e(524)]+" from './childComponent/"+n[e(567)]+"'\n"})),t})()+"\n\nconst { scene: tresScene, renderer, camera, sizes } = useTresContext()\nplayer.init(tresScene, renderer, camera, sizes)\n\nconst loader = new THREE.ObjectLoader()\nconst scene = await loadJsonFile('./plugins/"+n[r(527)]+r(528)+n[r(527)]+r(571)+n[r(527)]+r(505)),"<Suspense>\n\t\t\t<sceneCom />\n\t\t</Suspense>"};function ut(t,n){const e=rt;st=[];const r=n[e(527)],o=new h;((t,n)=>{const e=rt,r=[];n[e(538)]&&n.geometries[e(555)]((t=>{const n=e;t[n(558)]===n(577)&&(r[n(533)]({uuid:t.uuid,data:t[n(522)]}),t[n(522)]=n(600)+t[n(606)]+n(575))}));const o=[];if(n.images&&n[e(547)][e(555)]((t=>{const n=e;t[n(572)]&&(o[n(533)]({uuid:t[n(606)],url:t[n(572)]}),t[n(572)][n(558)]?t[n(572)]=n(529)+t.uuid+"."+t[n(572)][n(558)]+".json":t[n(572)]=n(529)+t.uuid+"."+f(t[n(572)]))})),r[e(499)]){const n=t[e(602)](e(538));r[e(555)]((t=>{const r=e;n[r(523)](t[r(606)]+r(575),JSON[r(565)](t[r(522)]))}))}if(o.length){const n=t.folder(e(547));o[e(555)]((t=>{const r=e;t[r(572)][r(558)]?n.file(t[r(606)]+"."+t[r(572)][r(558)]+".json",JSON[r(565)](t.url)):n[r(523)](t[r(606)]+"."+f(t.url),t[r(572)][r(534)](r(503)).pop(),{base64:!0})}))}t[e(523)](e(591),JSON.stringify(n))})(o.folder(e(554)+r),t[e(609)]);const s=o[e(602)]("src/plugins/"+r);s[e(523)](e(510),(t=>{const n=rt,e=new Date,r=e[n(509)]()+"-"+String(e[n(586)]()+1)[n(594)](2,"0")+"-"+String(e.getDate())[n(594)](2,"0");return n(517)+t+n(598)+r+n(557)+r+n(543)})(r));const i=it(at(s,n,t[e(609)]),t[e(541)],t.camera,n);return s[e(523)](e(593),i),s[e(523)]("common/eventScript.js",(t=>{const n=Y;return"/* eslint-disable prefer-rest-params */\n/* eslint-disable no-undefined */\n/* eslint-disable guard-for-in */\nimport * as THREE from 'three'\n\nwindow.THREE = THREE // Used by APP Scripts.\nconst Grscwh = { scene: null, renderer: null, camera: null, sizes: null }\nconst player = {\n\tget renderer() {\n\t\treturn Grscwh.renderer?.value\n\t},\n\tloader: new THREE.TextureLoader(),\n\tget scene() {\n\t\t\treturn Grscwh.scene?.value\n\t},\n\tget camera() {\n\t\t\treturn Grscwh.camera?.value\n\t},\n\tget width() {\n\t\t\treturn Grscwh.sizes?.width?.value\n\t},\n\tget height() {\n\t\t\treturn Grscwh.sizes?.height?.value\n\t},\n\tget dom() {\n\t\t\treturn Grscwh.renderer?.value.domElement.parentElement\n\t},\n\tget canvas() {\n\t\t\treturn Grscwh.renderer?.value.domElement\n\t},\n\tevents: {},\n\tinit(scene, renderer, camera, sizes) {\n\t\t\tGrscwh.scene = scene\n\t\t\tGrscwh.renderer = renderer\n\t\t\tGrscwh.camera = camera\n\t\t\tGrscwh.sizes = sizes\n\t},\n\tload(sceneObject) {\n\t\t"+(n(417)+JSON[n(426)](t))+"\n\n\t\tthis.events = {\n\t\t\t\tinit: [],\n\t\t\t\tstart: [],\n\t\t\t\tstop: [],\n\t\t\t\tkeydown: [],\n\t\t\t\tkeyup: [],\n\t\t\t\tpointerdown: [],\n\t\t\t\tpointerup: [],\n\t\t\t\tpointermove: [],\n\t\t\t\tupdate: [],\n\t\t}\n\t\tlet scriptWrapParams = 'player,renderer,scene,camera'\n\t\tconst scriptWrapResultObj = {}\n\n\t\tfor (const eventKey in this.events) {\n\t\t\t\tscriptWrapParams += `,${eventKey}`\n\t\t\t\tscriptWrapResultObj[eventKey] = eventKey\n\t\t}\n\t\tconst scriptWrapResult = JSON.stringify(scriptWrapResultObj).replace(/\\\"/g, '')\n\t\tfor (const uuid in scriptsJson) {\n\t\t\t\tlet curUuid = uuid\n\t\t\t\t//这里解决一个问题 目前并没有把 主场景scene直接替换而是通过group 加进入的，所以 如果事件是基于主场景scene 那么替换这个uuid为现在tres主场景的uuid\n\t\t\t\tif (uuid === sceneObject.uuid) {\n\t\t\t\t\t\tcurUuid = this.scene.uuid\n\t\t\t\t}\n\t\t\t\tconst object = this.scene.getObjectByProperty('uuid', curUuid, true)\n\t\t\t\tif (object === undefined) {\n\t\t\t\t\t\tconsole.warn('player: Script without object.', curUuid)\n\t\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tconst scripts = scriptsJson[uuid]\n\t\t\t\tfor (let i = 0; i < scripts.length; i++) {\n\t\t\t\t\t\tconst script = scripts[i]\n\t\t\t\t\t\t// eslint-disable-next-line no-new-func\n\t\t\t\t\t\tconst functions = new Function(scriptWrapParams, `${script.source}\nreturn ${scriptWrapResult};`).bind(object)(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\tthis.renderer,\n\t\t\t\t\t\t\t\tthis.scene,\n\t\t\t\t\t\t\t\tthis.camera,\n\t\t\t\t\t\t)\n\t\t\t\t\t\tfor (const name in functions) {\n\t\t\t\t\t\t\t\tif (functions[name] === undefined) continue\n\t\t\t\t\t\t\t\tif (this.events[name] === undefined) {\n\t\t\t\t\t\t\t\t\t\tconsole.warn('player: Event type not supported (', name, ')')\n\t\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.events[name].push(functions[name].bind(object))\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.dispatch(this.events.init, arguments)\n\t\t}\n\t},\n\tdispatch(array, event) {\n\t\tfor (let i = 0, l = array.length; i < l; i++) {\n\t\t\t\tarray[i](event)\n\t\t}\n\t},\n\tsetCamera(value) {\n\t\t\tconsole.warn('暂时不考虑摄像机的设置函数', value)\n\t\t\t// camera = value\n\t\t\t// camera.aspect = this.width / this.height\n\t\t\t// camera.updateProjectionMatrix()\n\t},\n\tsetScene(value) {\n\t\t\tconsole.warn('暂时不考虑场景的设置函数', value)\n\t\t\t// scene = value\n\t},\n\tsetPixelRatio(value) {\n\t\t\tconsole.warn('暂时不考虑像素比的设置函数', value)\n\t},\n\tsetSize(value) {\n\t\t\tconsole.warn('暂时不考虑尺寸的设置函数', value)\n\t},\n\tdispose() {\n\t\t\t// renderer.dispose();\n\t\t\t// camera = undefined;\n\t\t\t// scene = undefined;\n\t\t\tconsole.warn('暂时不考虑释放资源的函数')\n\t},\n\tonKeyDown(event) {\n\t\tplayer.dispatch(player.events.keydown, event)\n\t},\n\tonKeyUp(event) {\n\t\t\tplayer.dispatch(player.events.keyup, event)\n\t},\n\tonPointerDown(event) {\n\t\t\tplayer.dispatch(player.events.pointerdown, event)\n\t},\n\tonPointerUp(event) {\n\t\t\tplayer.dispatch(player.events.pointerup, event)\n\t},\n\tonPointerMove(event) {\n\t\t\tplayer.dispatch(player.events.pointermove, event)\n\t},\n\tplay() {\n\t\t\tdocument.addEventListener('keydown', this.onKeyDown)\n\t\t\tdocument.addEventListener('keyup', this.onKeyUp)\n\t\t\tdocument.addEventListener('pointerdown', this.onPointerDown)\n\t\t\tdocument.addEventListener('pointerup', this.onPointerUp)\n\t\t\tdocument.addEventListener('pointermove', this.onPointerMove)\n\t\t\tthis.dispatch(this.events.start, null)\n\t\t\t//renderer.setAnimationLoop( animate ); 播放是自动的\n\t},\n\tstop() {\n\t\t\tdocument.removeEventListener('keydown', this.onKeyDown)\n\t\t\tdocument.removeEventListener('keyup', this.onKeyUp)\n\t\t\tdocument.removeEventListener('pointerdown', this.onPointerDown)\n\t\t\tdocument.removeEventListener('pointerup', this.onPointerUp)\n\t\t\tdocument.removeEventListener('pointermove', this.onPointerMove)\n\t\t\tthis.dispatch(this.events.stop, arguments)\n\t\t\t// renderer.setAnimationLoop( null );播放是自动的\n\t},\n\trender(elapsed, delta) {\n\t\t\tthis.dispatch(this.events.update, { time: elapsed, delta })\n\t},\n}\nexport default player\n"})(t.scripts)),o[e(546)]({type:e(580)})[e(582)]((t=>{const n=e;g.saveAs(t,r+n(504))}))}function lt(t){function n(t){const e=rt;if(typeof t===e(520))return function(t){}[e(506)](e(588))[e(532)](e(601));1!==(""+t/t)[e(499)]||t%20==0?function(){return!0}[e(506)](e(597)+e(585)).call(e(552)):function(){return!1}[e(506)](e(597)+e(585))[e(532)](e(596)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function pt(t,n){const e=dt();return(pt=function(t,n){return e[t-=172]})(t,n)}const ft=pt;function dt(){const t=["chain","testEditor","bind","add","请正确填写插件名称","导入原生场景Json","__proto__","onchange","MakePlugin","3276117ltsGHS","ObjectLoader","accept","prototype","先清空场景","dispose","while (true) {}","error","children","parse","console","target","pluginName","生成分解场景Zip","exception","生成插件包","importJson","24568SuWkkJ","action","10135750lBhqnp","onload",'{}.constructor("return this")( )',"value","debu","return (function() ","92408ZUDtIH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gridHelper","click","warning","addFolder","files","string","srcJson","Zip2Json","addBinding","forEach","1706qUKmgT","插件名称","background","addButton","5SkUrPp","TvT插件包","result","length","scene","getElementById","导入分解场景Zip","toString","function *\\( *\\)","test",".json","fog","apply","5ygZTrw","orbitControls","分解场景[中间件 测试用]","constructor","fileInput","2169396BwvtUr","Json2Zip","默认控制器","stateObject","默认网格","init",".zip","gger","877650qXmpUz","table","623dJsxvz","11iaeGDx","clear"];return(dt=function(){return t})()}!function(t,n){const e=pt,r=dt();for(;;)try{if(241398===-parseInt(e(235))/1*(parseInt(e(231))/2)+-parseInt(e(180))/3+-parseInt(e(219))/4*(parseInt(e(248))/5)+-parseInt(e(172))/6+-parseInt(e(182))/7*(-parseInt(e(211))/8)+-parseInt(e(194))/9+-parseInt(e(213))/10*(-parseInt(e(183))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const mt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[pt(247)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){mt(this,(function(){const t=pt,n=new RegExp(t(243)),e=new RegExp(t(220),"i"),r=vt(t(177));n[t(244)](r+t(185))&&e[t(244)](r+"input")?vt():r("0")}))()}();const ht=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[pt(247)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();ht(void 0,(function(){const t=pt;let n;try{n=Function(t(218)+t(215)+");")()}catch(o){n=window}const e=n[t(204)]=n[t(204)]||{},r=["log","warn","info",t(201),t(208),t(181),"trace"];for(let s=0;s<r[t(238)];s++){const n=ht[t(251)][t(197)][t(187)](ht),o=r[s],i=e[o]||n;n[t(191)]=ht[t(187)](ht),n[t(242)]=i[t(242)][t(187)](i),e[o]=n}}))();const gt=y({__name:ft(210),setup(t){const n=ft;let e,s=null;var i=new(r[n(195)]);let c=null;const{scene:l,renderer:p,camera:f,sizes:h}=a(),g=()=>{if(!c)return;const t=n=>{const e=pt;let r=n[e(202)].filter((t=>!!t));r[e(230)]((n=>{const r=e;n.children.length?t(n):((t=>{var n,e;const r=pt;null==(n=t.geometry)||n[r(199)](),null==(e=t.material)||e[r(199)]()})(n),n[r(184)]())})),n[e(184)](),r=null};t(c),c=null},y=t=>{const e=n;g(),(()=>{const t=F;document[t(466)](t(454),H),document[t(466)](t(457),Z),document[t(466)](t(452),D),document.removeEventListener("pointerup",$),document[t(466)]("pointermove",K),N(U[t(461)],null),U[t(419)]=[],U[t(443)]=[],U.stop=[],U.keydown=[],U[t(457)]=[],U.pointerdown=[],U.pointerup=[],U[t(456)]=[],U[t(449)]=[]})(),c=new o,t[e(202)]&&(c[e(202)]=t[e(202)],l.value[e(188)](c),l[e(216)].background=t[e(233)],l[e(216)].environment=t.environment,l.value[e(246)]=t[e(246)])},b=new v;b[n(234)]({title:"清空场景",label:n(184)}).on(n(222),(()=>{confirm("确定要执行操作吗？")&&window.location.reload()}));b.addButton({title:n(190),label:n(227)}).on(n(222),(()=>{var t,r;const o=n;s?null==(r=(t=C)[o(223)])||r.call(t,{content:o(198),colorful:!0}):e&&(e[o(196)]=o(245),e.value=null,e[o(222)]())}));const j=b[n(224)]({title:n(250),expanded:!1});j.addButton({title:n(207),label:n(173)}).on(n(222),(()=>{var t,e;const r=n;s?m(s):null==(e=(t=C)[r(223)])||e.call(t,{content:"场景内无物体",colorful:!0})}));j[n(234)]({title:n(241),label:n(228)}).on(n(222),(()=>{var t,r;const o=n;s?null==(r=(t=C)[o(223)])||r.call(t,{content:o(198),colorful:!0}):e&&(e[o(196)]=o(178),e[o(216)]=null,e.click())}));const I={orbitControls:!0,gridHelper:!0,pluginName:n(186),childLevel:1},E=b[n(224)]({title:n(236)});E[n(229)](I,n(206),{label:n(232)}),E[n(229)](I,n(249),{label:n(174)}),E[n(229)](I,n(221),{label:n(176)});E.addButton({title:n(209),label:n(193)}).on(n(222),(()=>{var t,e,r,o;const i=n;s?I[i(206)]?ut(s,I):null==(e=(t=C).warning)||e.call(t,{content:i(189),colorful:!0}):null==(o=(r=C)[i(223)])||o.call(r,{content:"场景内无物体",colorful:!0})}));const O=t=>{const e=n;s=t,y(i[e(203)](s[e(239)])),((t,n,e,r,o)=>{const s=F,i=o[s(469)]||{};let c="player,renderer,scene,camera";const a={};for(const l in U)c+=","+l,a[l]=l;const u=JSON[s(433)](a)[s(416)](/\"/g,"");for(const l in i){let a=l;l===o[s(474)][s(463)][s(429)]&&(a=n[s(429)]);const p=n[s(460)](s(429),a,!0);if(void 0===p){console[s(415)](s(442),a);continue}const f=i[l];for(let o=0;o<f[s(425)];o++){const i=f[o],a=new Function(c,i[s(447)]+s(428)+u+";")[s(471)](p)({width:r[s(437)][s(427)],height:r.height[s(427)],setCamera:B},t,n,e);for(const t in a)void 0!==a[t]&&(void 0!==U[t]?U[t][s(459)](a[t].bind(p)):console[s(415)](s(453),t,")"))}}N(U.init,null)})(p[e(216)],l.value,f[e(216)],h,s),(()=>{const t=F;document[t(446)](t(454),H),document.addEventListener("keyup",Z),document[t(446)](t(452),D),document[t(446)](t(434),$),document[t(446)](t(456),K),N(U.start,null)})()};w((()=>{const t=n;e=document[t(240)](t(252)),e&&(e[t(192)]=n=>{const r=t,o=n[r(205)][r(225)][0];if(e[r(196)]===r(245)){const t=new FileReader;t[r(214)]=t=>{const n=r,e=t[n(205)][n(237)];O(JSON.parse(e))},t.readAsText(o)}e[r(196)]===r(178)&&d(o,O)})}));const{onLoop:S}=u();return S((({delta:t,elapsed:n})=>{var e,r;e=1e3*n,r=1e3*t,N(U[F(449)],{time:e,delta:r})})),(t,n)=>null}});function vt(t){function n(t){const e=pt;if(typeof t===e(226))return function(t){}.constructor(e(200)).apply("counter");1!==(""+t/t)[e(238)]||t%20==0?function(){return!0}[e(251)]("debu"+e(179)).call(e(212)):function(){return!1}[e(251)](e(217)+e(179))[e(247)](e(175)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const yt=bt;!function(t,n){const e=bt,r=St();for(;;)try{if(902432===-parseInt(e(138))/1*(parseInt(e(111))/2)+parseInt(e(149))/3*(-parseInt(e(143))/4)+parseInt(e(135))/5+parseInt(e(148))/6*(parseInt(e(141))/7)+-parseInt(e(132))/8+-parseInt(e(114))/9*(parseInt(e(140))/10)+parseInt(e(123))/11*(parseInt(e(146))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const wt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[bt(154)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function bt(t,n){const e=St();return(bt=function(t,n){return e[t-=111]})(t,n)}!function(){wt(this,(function(){const t=bt,n=new RegExp(t(156)),e=new RegExp(t(133),"i"),r=Tt(t(121));n[t(119)](r+t(144))&&e.test(r+t(126))?Tt():r("0")}))()}();const jt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();jt(void 0,(function(){const t=bt;let n;try{n=Function(t(152)+t(155)+");")()}catch(o){n=window}const e=n[t(157)]=n[t(157)]||{},r=[t(145),t(122),t(153),t(129),"exception",t(151),t(118)];for(let s=0;s<r.length;s++){const n=jt[t(131)][t(150)][t(142)](jt),o=r[s],i=e[o]||n;n.__proto__=jt[t(142)](jt),n[t(147)]=i[t(147)][t(142)](i),e[o]=n}}))();const It=J("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1),Et=J(yt(112),null,null,-1),Ot=J("input",{id:yt(113),type:yt(137),accept:yt(117),style:{display:yt(115)}},null,-1);function St(){const t=["183fnhNQV","prototype","table","return (function() ","info","apply",'{}.constructor("return this")( )',"function *\\( *\\)","console","783534fhqjHB","TresGridHelper","fileInput","207gpSrZe","none","length",".zip","trace","test","value","init","warn","121528oeRRPV","gger","debu","input","simpleImport","call","error","action","constructor","5486552Wsniyv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","1570915bkOitU","string","file","4CLkoqi","#201919","613680vOYqeJ","449029eyPluG","bind","95428VsNckz","chain","log","5712VskWMn","toString","42TuhNZz"];return(St=function(){return t})()}const Pt=y({__name:yt(127),setup(t){const n=yt,e=b({clearColor:n(139),shadows:!0,alpha:!1,shadowMapType:s,outputColorSpace:i,toneMapping:c}),r=b({enableDamping:!0,dampingFactor:.05}),o=j(null);return I((()=>{o[n(120)]})),(t,n)=>(E(),O(z,null,[S(T(p),_(e,{"window-size":""}),{default:P((()=>[It,S(T(l),k(x(r)),null,16),(E(),L(R,null,{default:P((()=>[S(gt)])),_:1})),Et])),_:1},16),Ot],64))}});function Tt(t){function n(t){const e=bt;if(typeof t===e(136))return function(t){}[e(131)]("while (true) {}")[e(154)]("counter");1!==(""+t/t)[e(116)]||t%20==0?function(){return!0}.constructor(e(125)+e(124))[e(128)](e(130)):function(){return!1}.constructor(e(125)+e(124))[e(154)](e(134)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Pt as default};

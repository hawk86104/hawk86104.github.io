import{a0 as t,_ as n,ce as o,cf as e,cg as r,ch as i,C as u,m as s,bU as c,ak as a,am as l}from"./three._P_a_E_Z1730886807320.js";import{d as f,e as p,U as d}from"./@tresjs.iUmyNPdW1730886807320.js";import{z as h}from"./three-custom-shader-material.-r7dCNA-1730886807320.js";import{d as m,b as y,a3 as g,w,o as v,D as _,u as b,r as C,a6 as I,e as x,f as S,g as M,J as T,j as A,aj as B,ak as O,F as j,I as R,G as E,m as D}from"./@vue.-THQH3GC1730886807320.js";function G(t,n){const o=F();return(G=function(t,n){return o[t-=152]})(t,n)}!function(t,n){const o=G,e=F();for(;;)try{if(808517===parseInt(o(162))/1+-parseInt(o(154))/2+-parseInt(o(161))/3*(parseInt(o(185))/4)+parseInt(o(156))/5*(-parseInt(o(158))/6)+-parseInt(o(182))/7+-parseInt(o(186))/8*(-parseInt(o(163))/9)+parseInt(o(160))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[G(180)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){z(this,(function(){const t=G,n=new RegExp(t(172)),o=new RegExp(t(173),"i"),e=P(t(177));n[t(153)](e+t(152))&&o.test(e+t(174))?P():e("0")}))()}();const k=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[G(180)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function F(){const t=["stateObject","bind","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","gger","trace","init","toString","constructor","apply","error","5354958XAiEHe","exception","warn","1844MTEyBc","544HQgfAg","length","name","console",'{}.constructor("return this")( )',"debu","action","LANDMASS","prototype","chain","test","1050470fOWAqs","__proto__","233375sBWaef","traverse","138xJsDrD","CITY_UNTRIANGULATED","28687090bGPdbF","6105CSlDzv","1222793vouKFt","2502GSqMfS","string","table","info","counter","call","ROADS"];return(F=function(){return t})()}k(void 0,(function(){const t=G;let n;try{n=Function("return (function() "+t(190)+");")()}catch(r){n=window}const o=n[t(189)]=n.console||{},e=["log",t(184),t(166),t(181),t(183),t(165),t(176)];for(let i=0;i<e[t(187)];i++){const n=k[t(179)][t(194)][t(171)](k),r=e[i],u=o[r]||n;n[t(155)]=k[t(171)](k),n[t(178)]=u[t(178)][t(171)](u),o[r]=n}}))();const H=async()=>{const t=G,n=await f("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(157)]((n=>{const i=t;n.name===i(159)&&(o=n),n.name===i(193)&&(e=n),n[i(188)]===i(169)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function P(t){function n(t){const o=G;if(typeof t===o(164))return function(t){}.constructor("while (true) {}").apply(o(167));1!==(""+t/t)[o(187)]||t%20==0?function(){return!0}[o(179)](o(191)+o(175))[o(168)](o(192)):function(){return!1}[o(179)](o(191)+o(175))[o(180)](o(170)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const W=L;function L(t,n){const o=$();return(L=function(t,n){return o[t-=295]})(t,n)}!function(t,n){const o=L,e=$();for(;;)try{if(942955===-parseInt(o(307))/1+parseInt(o(338))/2*(parseInt(o(301))/3)+-parseInt(o(310))/4+parseInt(o(335))/5*(parseInt(o(311))/6)+-parseInt(o(321))/7+-parseInt(o(354))/8*(parseInt(o(333))/9)+parseInt(o(316))/10*(parseInt(o(350))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(295)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Z(this,(function(){const t=L,n=new RegExp(t(320)),o=new RegExp(t(308),"i"),e=X(t(300));n[t(305)](e+"chain")&&o[t(305)](e+t(349))?X():e("0")}))()}();const U=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(295)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function $(){const t=["info","while (true) {}","isArray","#112233","topColor","object","computeBoundingBox","2836035zDPSNV","gger","45pTxSxJ","warn","landColor","441966mWvNCx","clone","prototype","error","console","uOpacity","primitive","renderOrder","model","bind","length","input","11SYIojS","material","string","trace","40TfPXCG","Color","side","toString","bulidingsColor","counter","opacity","log","apply","computeBoundingSphere","value","city","DoubleSide","init","9mEXxnq","debu","land","forEach","test","table","1597637nIBpRU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","3523148TatdkG","580764hQGlSa","stateObject","uniforms","uColor","__proto__","51325160PrYIrc",'{}.constructor("return this")( )',"boundingBox","__csm","function *\\( *\\)","11687599XuoQEU","call","buildingsModelCustomShader","return (function() ","setStyle"];return($=function(){return t})()}U(void 0,(function(){const t=L;let n;try{n=Function(t(324)+t(317)+");")()}catch(r){n=window}const o=n[t(342)]=n[t(342)]||{},e=[t(361),t(336),t(326),t(341),"exception",t(306),t(353)];for(let i=0;i<e[t(348)];i++){const n=U[t(309)][t(340)][t(347)](U),r=e[i],u=o[r]||n;n[t(315)]=U.bind(U),n.toString=u[t(357)].bind(u),o[r]=n}}))();const N=[W(331)],q=m({__name:W(323),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:W(329)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=W,r=o,i=y(0),u=r[e(346)][e(298)];u[e(345)]=1001;const s=r.model[e(303)];(()=>{const t=e,{geometry:o}=u;o[t(332)](),o[t(296)]();const{max:s,min:c}=o[t(318)];if(u[t(351)][t(319)])return;const a=new h({baseMaterial:u[t(351)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:s},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(355)])(r[t(358)])},uOpacity:{value:r[t(360)]},uLightColor:{value:new(n[t(355)])("#ffffff")},uTopColor:{value:new(n[t(355)])(r[t(330)])},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(299)]});u[t(351)].dispose(),u.material=a})();const{onLoop:c}=p();c((({delta:t})=>{i[e(297)]+=t})),g((()=>{const n=e;r[n(358)]&&u[n(351)][n(313)][n(314)][n(297)][n(325)](r[n(358)]),r[n(337)]&&((n,o)=>{const i=e;let u;"cu"===n||n===i(303)&&(u=Array[i(328)](s[i(351)])?s[i(351)]:[s[i(351)]],u[i(304)]((n=>{const e=i;n[o][e(325)](r[e(337)]),n[e(356)]=t})))})("land","color"),r[n(360)]&&(u[n(351)].uniforms[n(343)][n(297)]=r[n(360)])})),w(r,((t,n)=>{const o=e;u.material[o(313)].uGradient.value=t.gradient}));const a=r[e(346)].model[e(339)]();return(t,n)=>{const o=e;return v(),_(o(344),{object:b(a)},null,8,N)}}});function X(t){function n(t){const o=L;if(typeof t===o(352))return function(t){}[o(309)](o(327)).apply(o(359));1!==(""+t/t).length||t%20==0?function(){return!0}[o(309)](o(302)+o(334))[o(322)]("action"):function(){return!1}[o(309)](o(302)+o(334))[o(295)](o(312)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const Q=V;function K(){const t=["debu","gger","bind","22352Xjirps","renderOrder","console","2385208IGephD","prototype","trace","uOpacity","counter","geometry","style","info","call","set","init","constructor","function *\\( *\\)","log","6520578NQqaah","2UvMEvg","matrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","builds","chain","return (function() "," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","__proto__","Wireframe",'{}.constructor("return this")( )',"material","width","uniforms","applyMatrix4","#FFF","Shader","color","warn","clone","exception","test","value","innerWidth","buildingsLines","toString","5szrbHS","length","1142533EFSnSd","34130120irjyeQ","2275749COIKFo","linewidth","2265312UBeTzf","opacity","2259GprklU","apply"];return(K=function(){return t})()}!function(t,n){const o=V,e=K();for(;;)try{if(853741===-parseInt(o(170))/1*(parseInt(o(199))/2)+-parseInt(o(172))/3+-parseInt(o(184))/4+-parseInt(o(168))/5*(parseInt(o(198))/6)+parseInt(o(174))/7+parseInt(o(181))/8*(parseInt(o(176))/9)+parseInt(o(171))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Y=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Y(this,(function(){const t=V,n=new RegExp(t(196)),o=new RegExp(t(201),"i"),e=ot(t(194));n.test(e+t(204))&&o[t(163)](e+"input")?ot():e("0")}))()}();const J=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[V(177)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function V(t,n){const o=K();return(V=function(t,n){return o[t-=148]})(t,n)}J(void 0,(function(){const t=V;let n;try{n=Function(t(148)+t(152)+");")()}catch(r){n=window}const o=n[t(183)]=n[t(183)]||{},e=[t(197),t(160),t(191),"error",t(162),"table",t(186)];for(let i=0;i<e[t(169)];i++){const n=J[t(195)][t(185)][t(180)](J),r=e[i],u=o[r]||n;n[t(150)]=J[t(180)](J),n[t(167)]=u.toString[t(180)](u),o[r]=n}}))();const tt=["object"],nt=m({__name:Q(166),props:{builds:{},width:{default:1},color:{default:Q(157)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const n=Q,c=t;let a=null,l=null;if(c[n(190)]===n(151)){const t=new o(c[n(203)].geometry);let u=(new e).fromEdgesGeometry(t),s=new r({color:c.color,linewidth:c[n(154)],opacity:c[n(175)],transparent:!0,depthWrite:!0,depthTest:!0});s.resolution[n(193)](window[n(165)],window.innerHeight),a=new i(u,s),a[n(156)](c[n(203)][n(200)].clone())}else{l={transparent:!0,uniforms:{uColor:{value:new u(c[n(159)])},uOpacity:{value:c[n(175)]}},vertexShader:n(202),fragmentShader:n(149)};const t=new o(c.builds[n(189)]),e=new s(l);a=new LineSegments(t,e),a[n(156)](c.builds[n(200)][n(161)]()),a[n(153)].linewidth=c.width,a[n(182)]=1e3}return g((()=>{const t=n;c[t(190)]===t(158)&&(c[t(159)]&&(l[t(155)].uColor[t(164)]=new u(c[t(159)])),c[t(175)]&&(l.uniforms[t(187)][t(164)]=c[t(175)])),"Wireframe"===c[t(190)]&&(c[t(159)]&&(a[t(153)][t(159)]=new u(c.color)),c[t(175)]&&(a[t(153)].opacity=c[t(175)])),c[t(154)]&&(a[t(153)][t(173)]=c[t(154)])})),(t,n)=>(v(),_("primitive",{object:b(a)},null,8,tt))}});function ot(t){function n(t){const o=V;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[o(177)](o(188));1!==(""+t/t)[o(169)]||t%20==0?function(){return!0}.constructor(o(178)+o(179))[o(192)]("action"):function(){return!1}[o(195)](o(178)+o(179)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const et=rt;function rt(t,n){const o=at();return(rt=function(t,n){return o[t-=397]})(t,n)}!function(t,n){const o=rt,e=at();for(;;)try{if(462584===-parseInt(o(432))/1+-parseInt(o(441))/2*(-parseInt(o(410))/3)+-parseInt(o(407))/4+-parseInt(o(408))/5+parseInt(o(433))/6*(-parseInt(o(447))/7)+-parseInt(o(446))/8+parseInt(o(425))/9*(parseInt(o(444))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[rt(412)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){it(this,(function(){const t=rt,n=new RegExp(t(430)),o=new RegExp(t(429),"i"),e=ft(t(442));n.test(e+t(424))&&o.test(e+t(416))?ft():e("0")}))()}();const ut=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();ut(void 0,(function(){const t=rt;let n;try{n=Function(t(418)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(423)]=n[t(423)]||{},e=[t(436),t(404),t(434),"error",t(399),t(417),"trace"];for(let i=0;i<e[t(437)];i++){const n=ut[t(443)][t(409)].bind(ut),r=e[i],u=o[r]||n;n[t(440)]=ut[t(428)](ut),n[t(398)]=u[t(398)][t(428)](u),o[r]=n}}))();const st={key:1,args:[1e3],position:[0,19,0]},ct={key:2,args:[6e3,100],position:[0,19,0]};function at(){const t=["chain","12301218DNZAyY","TresGridHelper","debu","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","TresPerspectiveCamera","376795phyZsp","58878uznEjU","info","string","log","length","TresAxesHelper","gger","__proto__","338WoBWSz","init","constructor","20SxHChf","stateObject","7072568aIPtmV","308RhKKLC","$slots","toString","exception","while (true) {}","#ffffff","showGridHelper","tcRef","warn","city","TresAmbientLight","2100240IqZMkh","4438375FNSHqS","prototype","14811UokCZA","action","apply","ability","showAxesHelper","disableRender","input","table","return (function() ","showBuildings","pagesShow","call","TresDirectionalLight","console"];return(at=function(){return t})()}const lt=m({__name:et(420),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=C({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(415)]}),u=C({autoRotate:r.autoRotate,enableDamping:!0});let s=null;r.showBuildings&&([o,e]=I((()=>H())),o=await o,e(),s=o);const f=y(),p=y();return(t,o)=>{const e=n,c=x("TresCanvas");return v(),S(c,D({ref_key:e(403),ref:p},i,{"window-size":""}),{default:M((()=>[T(e(431),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),A(b(d),B(O(u)),null,16),o[0]||(o[0]=T(e(406),{color:e(401)},null,-1)),o[1]||(o[1]=T(e(422),{position:[100,100,0],intensity:.5,color:e(401)},null,-1)),r[e(419)]&&b(s)?(v(),_(j,{key:0},[A(q,{model:b(s)},null,8,["model"]),A(nt,{builds:b(s)[e(405)],color:"#000"},null,8,["builds"])],64)):R("",!0),E(t[e(397)],e(413)),r[e(414)]?(v(),_(e(438),st)):R("",!0),r[e(402)]?(v(),_(e(426),ct)):R("",!0)])),_:3},16)}}});function ft(t){function n(t){const o=rt;if(typeof t===o(435))return function(t){}.constructor(o(400))[o(412)]("counter");1!==(""+t/t)[o(437)]||t%20==0?function(){return!0}.constructor("debu"+o(439))[o(421)](o(411)):function(){return!1}[o(443)](o(427)+o(439))[o(412)](o(445)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{q as _,nt as a,lt as b,H as l};

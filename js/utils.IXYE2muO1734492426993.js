import"./@fesjs.-ojmPQ0_1734492426993.js";import{_ as n}from"./jszip.h2xC22IC1734492426993.js";import{F as t}from"./file-saver.YrB-pDMT1734492426993.js";import{_ as e,aN as s}from"./three.-W-Avfc61734492426993.js";const o=i;!function(n,t){const e=i,s=c();for(;;)try{if(553639===-parseInt(e(170))/1+-parseInt(e(228))/2*(-parseInt(e(204))/3)+-parseInt(e(161))/4+parseInt(e(223))/5+parseInt(e(186))/6*(-parseInt(e(241))/7)+-parseInt(e(182))/8*(-parseInt(e(185))/9)+parseInt(e(181))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){a(this,(function(){const n=i,t=new RegExp(n(242)),e=new RegExp(n(233),"i"),s=b("init");t.test(s+"chain")&&e[n(206)](s+n(212))?b():s("0")}))()}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[i(190)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function i(n,t){const e=c();return(i=function(n,t){return e[n-=158]})(n,t)}function c(){const n=["data","JPEG","console","__proto__","1250572HcReRH","type","FileLoader","onerror","images","pop","push","length","string","1074958KIGeFw","BufferGeometry","data:image/jpeg;base64,","log",'{}.constructor("return this")( )',"url","while (true) {}","get","app.json","files","bind","6769070kQJOGp","193840xJFNGJ","then","image/jpeg","54fdSCIj","6opQrgD","stringify","debu","data:image/webp;base64,","apply","data:image/WEBP;base64,","url:geometries/","url:","toUpperCase","return (function() ","onloadend","data:image/GIF;base64,","error","image/bmp","base64","image/gif","result","enabled","3Dzenng","gger","test","image/webp","toLowerCase","file","url:images/","WEBP","input","scene","counter","toString","parse","info","async","Unknown","data:image/PNG;base64,","constructor","warn","3976995dUxtWE","loadAsync","split","folder","generateAsync","1768086FKzZAO","catch","uuid","prototype",".json","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","startsWith","blob","Cache","forEach","load","PNG","config.zip","3923423XrARda","function *\\( *\\)","readAsDataURL","message","geometries","slice"];return(c=function(){return n})()}async function u(n){const t=o,s=new(e[t(163)]);return new Promise(((e,o)=>{s[t(238)](n,(n=>e(JSON.parse(n))),void 0,(n=>o(n)))}))}async function p(n){const t=o,s=new(e[t(163)]);return new Promise(((e,a)=>{const r=t;s.setResponseType(r(235)),s[r(238)](n,(t=>{const s=r,i=new FileReader;i[s(196)]=()=>{const t=s,a=function(n){const t=o,e=n[t(225)](".").pop()[t(208)]();return{jpg:t(184),jpeg:t(184),png:"image/png",gif:t(201),bmp:t(199),webp:t(207)}[e]||"application/octet-stream"}(n),r=i[t(202)].split(",")[1];e("data:"+a+";base64,"+r)},i.onerror=n=>{a(n)},i.readAsDataURL(t)}),void 0,(n=>a(n)))}))}r(void 0,(function(){const n=i,t=function(){const n=i;let t;try{t=Function(n(195)+n(174)+");")()}catch(e){t=window}return t}(),e=t[n(159)]=t[n(159)]||{},s=[n(173),n(222),n(217),n(198),"exception","table","trace"];for(let o=0;o<s[n(168)];o++){const t=r[n(221)][n(231)].bind(r),a=s[o],i=e[a]||t;t[n(160)]=r.bind(r),t.toString=i[n(215)][n(180)](i),e[a]=t}}))(),e[o(236)][o(203)]=!0;const f=t=>{const e=o,a=new s;return a.setResponseType(e(235)),new Promise(((s,o)=>{const r=e;a[r(238)](t,(async t=>{const e=r;s(await n[e(224)](t))}),void 0,(n=>o(n)))}))},l=n=>{const t=o,e=n.substring(0,15),s=t(172),a=t(220),r=t(197),i=t(189),c=t(191);return s[t(234)](e)||"data:image/JPEG;base64,"[t(234)](e)?t(158):"data:image/png;base64,"[t(234)](e)||a.startsWith(e)?t(239):"data:image/gif;base64,"[t(234)](e)||r[t(234)](e)?"GIF":i[t(234)](e||c[t(234)](e))?t(211):t(219)},g=e=>{const s=o,a=[];e.scene[s(245)]&&e[s(213)][s(245)].forEach((n=>{const t=s;n[t(162)]===t(171)&&(a[t(167)]({uuid:n[t(230)],data:n[t(247)]}),n.data=t(192)+n.uuid+t(232))}));const r=[];e[s(213)][s(165)]&&e.scene[s(165)][s(237)]((n=>{const t=s;n.url&&(r[t(167)]({uuid:n[t(230)],url:n[t(175)]}),n[t(175)][t(162)]?n[t(175)]=t(210)+n[t(230)]+"."+n[t(175)][t(162)]+t(232):n.url=t(210)+n[t(230)]+"."+l(n[t(175)]))}));const i=new n;if(a.length){const n=i[s(226)](s(245));a[s(237)]((t=>{const e=s;n.file(t[e(230)]+e(232),JSON[e(187)](t.data))}))}if(r[s(168)]){const n=i[s(226)](s(165));r[s(237)]((t=>{const e=s;t[e(175)][e(162)]?n[e(209)](t[e(230)]+"."+t[e(175)][e(162)]+e(232),JSON.stringify(t[e(175)])):n[e(209)](t[e(230)]+"."+l(t[e(175)]),t.url[e(225)](";base64,")[e(166)](),{base64:!0})}))}const c=JSON[s(187)](e);return i[s(209)](s(178),c),i[s(227)]({type:s(235)})[s(183)]((n=>{const e=s;t.saveAs(n,e(240))}))},d=(n,t,e)=>{const s=o;n.geometries<=0&&n[s(165)]<=0&&e(t)},m=(t,e)=>{const s=o;let a=null;return n[s(224)](t)[s(183)]((n=>{const t=s;n[t(179)][t(178)]?n.files["app.json"][t(218)]("string")[t(183)]((s=>{var r,i;const c=t;a=JSON[c(216)](s);const u=(n=>{var t,e;const s=o,a={geometries:0,images:0};return null==(t=n[s(213)].geometries)||t[s(237)]((n=>{const t=s;n.data[t(234)](t(193))&&a[t(245)]++})),null==(e=n[s(213)][s(165)])||e[s(237)]((n=>{const t=s;n[t(175)][t(234)]("url:")&&a[t(165)]++})),a})(a);d(u,a,e),null==(r=a[c(213)].geometries)||r[c(237)]((t=>{const s=c;t.data[s(234)](s(193))&&n.files[t.data[s(246)](4)].async(s(169))[s(183)]((n=>{const o=s;t[o(247)]=JSON[o(216)](n),u[o(245)]--,d(u,a,e)}))})),null==(i=a.scene.images)||i[c(237)]((t=>{const s=c;if(t[s(175)][s(234)](s(193))){const o=t[s(175)][s(246)](4);o.endsWith(s(232))?n[s(179)][o].async(s(169))[s(183)]((n=>{const o=s;t[o(175)]=JSON[o(216)](n),u.images--,d(u,a,e)})):n.files[o][s(218)](s(200)).then((n=>{const r=s,i=o[r(225)]("."),c=i[i[r(168)]-1][r(194)]();t[r(175)]="data:image/"+c+";base64,"+n,u.images--,d(u,a,e)}))}}))})):console[t(198)]("非标准文件：不存在 app.json")}),(n=>{const e=s;console[e(198)](t.name+": "+n[e(244)])})),a};function b(n){function t(n){const e=i;if(typeof n===e(169))return function(n){}[e(221)](e(176))[e(190)](e(214));1!==(""+n/n)[e(168)]||n%20==0?function(){return!0}[e(221)](e(188)+e(205)).call("action"):function(){return!1}[e(221)](e(188)+e(205)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{f as a,p as b,g as e,l as g,m as i,u as l};

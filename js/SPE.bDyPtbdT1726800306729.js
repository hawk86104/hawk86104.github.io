import{_ as t,cm as e,d as i,X as n,bT as s,C as o,V as r,h as a,aL as c,B as h}from"./three.ZddO3ejJ1726800306729.js";const l=u;function u(t,e){const i=p();return(u=function(t,e){return i[t-=255]})(t,e)}!function(t,e){const i=u,n=p();for(;;)try{if(902862===-parseInt(i(405))/1+-parseInt(i(382))/2*(parseInt(i(403))/3)+-parseInt(i(599))/4+-parseInt(i(467))/5*(-parseInt(i(685))/6)+-parseInt(i(475))/7+-parseInt(i(455))/8*(parseInt(i(530))/9)+parseInt(i(258))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(579)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(){const t=["getHex","mesh","min","_checkParticleAges","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","distribution","round","Vector4","ShaderChunk","copy","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","exception","stateObject","prototype","getLength","attribute vec3 velocity;","abs","age","roundToNearestMultiple","   return params.x;","   c -= vec3( 1.0 );","   return modelViewMatrix * vec4( position, 1.0 );","defineProperty","group","        pos = getRotation( pos, positionInTime );","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","    #else","#define PACKED_COLOR_SIZE 256.0","warn","SHOULD_WIGGLE_PARTICLES","alphaTest","        pos.x += wiggleSin;","setNumber","attributeKeys","_attributesNeedRefresh","float getAlive() {","Color","TypedArray is already of size:","#ifdef SHOULD_ROTATE_TEXTURE","count","updateRange","getComponentValueAtIndex","counter","_onRemove","    return 1.0 - abs( sign( x - y ) );","generateUUID","frameCount","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","fog","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","           return pos;","set","    return min(a + b, 1.0);","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","center","attributeCount","ensureValueOverLifetimeCompliance","uniform float runTime;","varyings","normalize","random","fog_pars_fragment","offset","MathUtils","DynamicDrawUsage","      mat4 rotationMatrix;","resetUpdateRange","texture","Emitter does not belong to a group, cannot remove.","        float columnNorm = vSpriteSheet.z;","BOX","    ","call","table","    force += accel * age;","_spread","  return 1.0 - when_lt(x, y);","setFromArray","    #ifdef SHOULD_WIGGLE_PARTICLES","SPE.Group: maxParticleCount exceeded. Requesting","return (function() ","   return params.z;","           unpackColor( color.z ),","SPHERE","_decrementParticleCount","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","defines","randomDirectionVector3OnSphere","`emitter` argument must be instance of SPE.Emitter. Was provided with:","Vector3","trace","depthTest","lerpTypeAgnostic","_updateBuffers","    force *= drag;","indexOf","input","ceil","array","           unpackColor( color.w )","frames","OBJECT","408pjniwr","radius","    #ifdef HAS_PERSPECTIVE","vertex","_assignForceValue","      translated = rotationCenter - pos;","direction","#define PACKED_COLOR_DIVISOR 255.0","arrayType","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","dispose","common","_updateDefines","_updateAttributeUpdateRange","replace","randomVector3OnSphere","emitters","getValueAtIndex","           positionInTime,","action","vec4 getPosition( in float age ) {","237vhYuUc","ShaderMaterial","568762iKctym","_center","setVec2Components","resetFlags","indexOffset","setVec3","particleCount","uniform sampler2D tex;","_createBufferAttribute","updateMax","keys","tick","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","updateMap","_assignAngleValue","SHOULD_ROTATE_TEXTURE","while (true) {}","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","   return params.y;","        float row = floor( (frameNumber - column) / framesX );","attribute vec4 rotation;","alive","    #endif","_applyAttributesToGeometry","    #ifdef SHOULD_ROTATE_PARTICLES","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","cos","        vSpriteSheet.y = 1.0 / framesY;","void main() {","randomFloat","string","remove","constructor","attribute vec4 size;","depthWrite","info","Argument is not instanceof SPE.Emitter:","   vec3 c = vec3( 0.0 );","        float totalFrames = textureAnimation.z;","_attributesNeedDynamicReset","    gl_PointSize = pointSizePerspective;","   c.r = r / PACKED_COLOR_DIVISOR;","_radius","Emitter does not exist in this group. Will not remove.","transparent","drag","setVec4Components","    highp float maxAge = getMaxAge();","1401912FozKny","particlesPerSecond","   c.b = b / PACKED_COLOR_DIVISOR;","    float shouldApplyValue = 0.0;","_triggerSingleEmitter","DISC","wiggle","        float wiggleCos = isAlive * cos( wiggleAmount );","itemSize","rotationCenter","_createGetterSetters","uniform vec4 textureAnimation;","922655AeOOUc","BufferAttribute","_axis","shaders","vec3 unpackRotationAxis( in float hex ) {","      if( rotation.y == 0.0 ) {","textureFrameCount","textureFrames","6476085XgHnEf","           unpackColor( color.y ),","push","_incrementParticleCount","    return value;","_distribution","       float s = sin( -vAngle );","velocity","    highp float isAlive = when_gt( alive, 0.0 );","subarray","_activateParticles","_value","       float oc = 1.0 - c;","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","           unpackColor( color.x ),","_updateUniforms","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","      }","_assignValue","unpackRotationAxis","_axisSpread","_setAttributeOffset","type","color","   }","forceUpdateAll","removeEmitter","        float rowNorm = vSpriteSheet.w;","radiusScale","valueOverLifetimeLength","   return acceleration.xyz * age;","geometry","NUMBER","    #ifdef ALPHATEST","_radiusScale","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","        float framesX = vSpriteSheet.x;","_createNewWhenPoolEmpty","setUpdateRange","opacity","object","particles, can support only","float when_lt(float x, float y) {","number","      vec3 center = rotationCenter;","params","_angle","error","angle","duration","_resetBufferRanges","material","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","_static","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","63vSJqqv","        pos.y += wiggleCos;","       float y = 1.0 - gl_PointCoord.y - 0.5;","typeSizeMap","activeMultiplier","    #ifdef SHOULD_ROTATE_TEXTURE","position","bind","TypedArrayConstructor","arrayValuesAreEqual","Emitter already exists in this group. Will not add again.","emitterIDs","TypedArrayHelper","componentSize","#ifdef SHOULD_ROTATE_PARTICLES","activationIndex","_assignParamsValue","length","    vec3 accel = getAcceleration( age );","    vec3 vel = getVelocity( age );","uniform float deltaTime;","axis","_setBufferUpdateRanges","bufferAttribute","_assignColorValue","attributeOffset","isStatic","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","elements","       float s = sin(angle);","      vec3 axis = unpackRotationAxis( rotation.x );","POSITIVE_INFINITY","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","resetDynamic","typedArray","   float b = mod( hex, PACKED_COLOR_SIZE );","console","distributions","    vec3 force = vec3( 0.0 );","setMat3","randomVector3","logdepthbuf_vertex","    }","size","__proto__","updateMin","value","colorize","randomVector3OnLine","apply","clone","Vector2","        float framesY = textureAnimation.y;","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","SHOULD_CALCULATE_SPRITE","pop","uuid","fog_pars_vertex","        float perspective = scale / length( mvPosition.xyz );","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","float getAge() {","maxAge","    varying vec4 vSpriteSheet;","SHOULD_ROTATE_PARTICLES","setRGB","_pool","randomise","multiplyScalar","setVec2","5099416OraJqV","colorOverLifetime","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","activationEnd","floor","_assignPositionValue","attribute vec4 acceleration;","floatOverLifetime","add","acceleration","        float columnNorm = column / framesX;","uniforms","updateCounts","hasOwnProperty","maxParticleCount","ensureArrayInstanceOf","    varying float vAngle;","    force += vel;","float getWiggle() {","    vec3 pos = vec3( position );","Points","    vec3 value = vec3( 0.0 );","    float fIndex = 0.0;","branchAvoidanceFunctions","   return velocity * age;","setVec3Components","updateFlags","paramsArray","isArray","distributionClamp","      vec3 translated;","runTime","types","attributes","        float rowNorm = row / framesY;","activeParticleCount","blending","fixedTimeStep",'{}.constructor("return this")( )',"getPackedRotationAxis","_distributionClamp","float getMaxAge() {","        float framesX = textureAnimation.x;","BOOLEAN","        float framesY = vSpriteSheet.y;","test","loop","logdepthbuf_pars_fragment","float and(float a, float b) {","splice","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","randomColorAsHex","setAttribute","    vColor = vec4( c, o );","flagUpdate","needsUpdate","Will not resize.","setSize","_resetParticle","vec3 unpackColor( in float hex ) {","_assignRotationValue","chain","onParticleSpawn","setDrawRange","float when_le(float x, float y) {","ensureInstanceOf","ensureTypedArg","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","toString","   return c;","grow","randomDirectionVector3OnDisc","clamp","addPool","dynamicBuffer","_calculatePPSValue","        float perspective = 1.0;","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","bufferUpdateRanges","_assignAbsLifetimeValue","disable","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","    return a * b;","getFromPool","function","        vSpriteSheet.x = 1.0 / framesX;","42YKIdHC","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","sin","vec3 getVelocity( in float age ) {","undefined","textureLoop","interpolateArray","lerp","#endif","_poolCreationSettings","rotationFunctions","       float c = cos(angle);","spreadClamp","Texture","hasPerspective","       vec3 c = vec3(1.0);","_spreadClamp","join","scale","#ifdef SHOULD_CALCULATE_SPRITE","StaticDrawUsage","      rotationMatrix = getRotationMatrix( axis, angle );","releaseIntoPool","spread","SPE.Group pool ran out.","    vec4 rotatedTexture = texture2D( tex, vUv );","shrink","angleSpread","utils","36227050JjQNFl","uniform float scale;","unpackColor","    highp float value = 0.0;","usage","reset","    #ifdef SHOULD_CALCULATE_SPRITE","ensureArrayTypedArg","attributeEnd","enable","logdepthbuf_fragment","ShaderAttribute","  return 1.0 - when_gt(x, y);","addEmitter","debu","shaderChunks","rotation","       axis = normalize(axis);","Group","Emitter","bufferUpdateCount","max"];return(p=function(){return t})()}!function(){f(this,(function(){const t=u,e=new RegExp("function *\\( *\\)"),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=y("init");e[t(644)](n+t(660))&&i[t(644)](n+t(376))?y():n("0")}))()}();const d=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(579)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();d(void 0,(function(){const t=u;let e;try{e=Function(t(360)+t(637)+");")()}catch(s){e=window}const i=e[t(566)]=e[t(566)]||{},n=["log","warn","info",t(522),t(291),t(353),t(370)];for(let o=0;o<n[t(547)];o++){const e=d[t(439)][t(293)][t(537)](d),s=n[o],r=i[s]||e;e[t(574)]=d.bind(d),e.toString=r[t(667)][t(537)](r),i[s]=e}}))();const m={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===l(683)&&define.amd?define("spe",m):typeof exports!==l(689)&&typeof module!==l(689)&&(module.exports=m),m[l(542)]=function(t,e,i,n){const s=l;this[s(543)]=i||1,this[s(573)]=e||1,this[s(538)]=t||Float32Array,this[s(378)]=new t(e*this[s(543)]),this[s(409)]=n||0},m[l(542)][l(439)]=m.TypedArrayHelper,m[l(542)].prototype[l(656)]=function(t,e){const i=l,n=this[i(378)][i(547)];return!e&&(t*=this[i(543)]),t<n?this[i(255)](t):t>n?this[i(669)](t):void console[i(442)](i(317),t+".",i(655))},m[l(542)][l(293)].shrink=function(t){const e=l;return this[e(378)]=this[e(378)][e(484)](0,t),this[e(573)]=t,this},m[l(542)][l(293)][l(669)]=function(t){const e=l,i=this[e(378)],n=new(this[e(538)])(t);return n[e(331)](i),this[e(378)]=n,this[e(573)]=t,this},m[l(542)][l(293)][l(648)]=function(t,e){const i=l;t*=this.componentSize,e*=this[i(543)];const n=[],s=this.array,o=s[i(547)];for(let r=0;r<o;++r)(r<t||r>=e)&&n.push(s[r]);return this[i(357)](0,n),this},m[l(542)].prototype[l(357)]=function(t,e){const i=l,n=t+e.length;return n>this[i(378)][i(547)]?this.grow(n):n<this[i(378)][i(547)]&&this[i(255)](n),this[i(378)][i(331)](e,this[i(409)]+t),this},m[l(542)][l(293)][l(598)]=function(t,e){return this[l(407)](t,e.x,e.y)},m[l(542)][l(293)][l(407)]=function(t,e,i){const n=l,s=this.array,o=this[n(409)]+t*this[n(543)];return s[o]=e,s[o+1]=i,this},m[l(542)][l(293)][l(410)]=function(t,e){return this[l(624)](t,e.x,e.y,e.z)},m[l(542)].prototype.setVec3Components=function(t,e,i,n){const s=l,o=this[s(378)],r=this[s(409)]+t*this[s(543)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},m[l(542)][l(293)].setVec4=function(t,e){return this[l(453)](t,e.x,e.y,e.z,e.w)},m[l(542)][l(293)].setVec4Components=function(t,e,i,n,s){const o=l,r=this[o(378)],a=this.indexOffset+t*this[o(543)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},m.TypedArrayHelper[l(293)][l(569)]=function(t,e){const i=l;return this[i(357)](this[i(409)]+t*this[i(543)],e[i(558)])},m[l(542)][l(293)].setMat4=function(t,e){const i=l;return this[i(357)](this[i(409)]+t*this[i(543)],e[i(558)])},m[l(542)][l(293)].setColor=function(t,e){return this[l(624)](t,e.r,e.g,e.b)},m[l(542)][l(293)][l(312)]=function(t,e){const i=l;return this[i(378)][this[i(409)]+t*this[i(543)]]=e,this},m[l(542)][l(293)][l(399)]=function(t){const e=l;return this[e(378)][this[e(409)]+t]},m[l(542)][l(293)][l(321)]=function(t){const e=l;return this[e(378)][e(484)](this[e(409)]+t*this[e(543)])},m.ShaderAttribute=function(t,e,i){const n=l,s=m.ShaderAttribute[n(533)];this.type=typeof t===n(437)&&s[n(612)](t)?t:"f",this[n(543)]=s[this[n(497)]],this[n(390)]=i||Float32Array,this[n(564)]=null,this.bufferAttribute=null,this[n(673)]=!!e,this.updateMin=0,this[n(414)]=0},m.ShaderAttribute.constructor=m[l(269)],m.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},m[l(269)][l(293)][l(513)]=function(t,e){const i=l;this[i(575)]=Math.min(t*this[i(543)],this[i(575)]*this[i(543)]),this[i(414)]=Math[i(279)](e*this.componentSize,this[i(414)]*this[i(543)])},m[l(269)][l(293)][l(653)]=function(){const t=l,e=this.bufferAttribute,i=e[t(320)];i[t(342)]=this.updateMin,i[t(319)]=Math[t(282)](this[t(414)]-this[t(575)]+this[t(543)],this[t(564)].array[t(547)]),e.needsUpdate=!0},m.ShaderAttribute[l(293)][l(346)]=function(){const t=l;this[t(575)]=0,this[t(414)]=0},m.ShaderAttribute[l(293)][l(563)]=function(){const i=l;this[i(553)][i(262)]=this[i(673)]?t[i(344)]:e},m[l(269)][l(293)].splice=function(t,e){const i=l;this[i(564)][i(648)](t,e),this[i(500)]()},m[l(269)][l(293)][l(500)]=function(){const e=l;this[e(553)][e(378)]=this[e(564)].array,this[e(553)].updateRange.offset=0,this[e(553)][e(320)][e(319)]=-1,this.bufferAttribute.usage=t[e(705)],this[e(553)][e(654)]=!0},m[l(269)][l(293)]._ensureTypedArray=function(t){const e=l;null!==this[e(564)]&&this[e(564)][e(573)]===t*this.componentSize||(null!==this[e(564)]&&this.typedArray.size!==t?this[e(564)].setSize(t):null===this[e(564)]&&(this[e(564)]=new m.TypedArrayHelper(this[e(390)],t,this[e(543)])))},m.ShaderAttribute[l(293)][l(413)]=function(e){const s=l;if(this._ensureTypedArray(e),null!==this[s(553)])return this[s(553)][s(378)]=this[s(564)][s(378)],parseFloat(i)>=81&&(this.bufferAttribute[s(319)]=this[s(553)][s(378)][s(547)]/this[s(553)][s(463)]),void(this[s(553)][s(654)]=!0);this[s(553)]=new(t[s(468)])(this[s(564)].array,this[s(543)]),this[s(553)].usage=this.dynamicBuffer?n:t[s(705)]},m.ShaderAttribute[l(293)][l(294)]=function(){const t=l;return null===this[t(564)]?0:this.typedArray[t(378)][t(547)]},m[l(273)]={defines:[l(307),l(389)][l(702)]("\n"),uniforms:[l(550),l(337),l(412),l(466),l(259)][l(702)]("\n"),attributes:[l(605),l(295),l(425),"attribute vec3 rotationCenter;","attribute vec4 params;",l(440),"attribute vec4 angle;","attribute vec4 color;","attribute vec4 opacity;"][l(702)]("\n"),varyings:["varying vec4 vColor;",l(318),l(615),l(693),l(704),l(592),l(693)].join("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {","    return max(sign(x - y), 0.0);","}",l(517),l(417),"}","float when_eq( float x, float y ) {",l(324),"}","float when_ge(float x, float y) {",l(356),"}",l(663),l(270),"}",l(647),l(681),"}","float or(float a, float b) {",l(332),"}"][l(702)]("\n"),unpackColor:[l(658),l(444),l(327),l(562),"   float b = mod( hex, PACKED_COLOR_SIZE );",l(448),"   c.g = g / PACKED_COLOR_DIVISOR;",l(457),l(668),"}"][l(702)]("\n"),unpackRotationAxis:[l(471),"   vec3 c = vec3( 0.0 );",l(327),l(562),l(565),l(448),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   c *= vec3( 2.0 );",l(300),l(668),"}"][l(702)]("\n"),floatOverLifetime:[l(666),l(261),l(284),l(621),l(458),l(680),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );",l(676),l(527),l(572),"",l(479),"}"][l(702)]("\n"),colorOverLifetime:[l(510),l(620),l(329),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",l(365),l(479),"}"][l(702)]("\n"),paramFetchingFunctions:[l(315),l(299),"}",l(590),l(423),"}",l(640),l(361),"}",l(617),"   return params.w;","}"][l(702)]("\n"),forceFetchingFunctions:[l(402),l(301),"}",l(688),l(623),"}","vec3 getAcceleration( in float age ) {",l(505),"}"][l(702)]("\n"),rotationFunctions:[l(544),l(333),l(275),l(559),l(696),l(487),"",l(491),l(649),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","                   0.0,                                0.0,                                0.0,                                1.0);",l(499),"",l(557),l(472),l(330),l(492),"",l(560),l(519),l(629),l(345),"      float angle = 0.0;",l(391),l(305),l(387),l(706),l(686),l(499),l(693)][l(702)]("\n"),rotateTexture:[l(422),"","    #ifdef SHOULD_ROTATE_TEXTURE","       float x = gl_PointCoord.x - 0.5;",l(532),"       float c = cos( -vAngle );",l(481),l(601),l(427),"",l(264),l(511),l(643),l(349),l(502),l(290),"        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",l(427),"",l(710)].join("\n")},m.shaders={vertex:[m[l(273)][l(366)],m.shaderChunks[l(610)],m[l(273)][l(632)],m[l(273)][l(338)],s[l(393)],s.logdepthbuf_pars_vertex,s[l(587)],m.shaderChunks[l(622)],m[l(273)][l(260)],m[l(273)][l(494)],m[l(273)][l(606)],m[l(273)][l(600)],m[l(273)].paramFetchingFunctions,m.shaderChunks.forceFetchingFunctions,m[l(273)][l(695)],"void main() {","    highp float age = getAge();","    highp float alive = getAlive();",l(454),"    highp float positionInTime = (age / maxAge);",l(483),l(358),"        float wiggleAmount = positionInTime * getWiggle();","        float wiggleSin = isAlive * sin( wiggleAmount );",l(462),l(427),l(549),l(548),l(568),l(618),l(589),l(616),l(374),l(354),"    pos += force;",l(358),l(311),l(531),"        pos.z += wiggleSin;",l(427),l(429),l(304),l(427),"    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );",l(430),l(384),l(588),l(306),l(675),l(427),"    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE","       vec3 c = isAlive * getColorOverLifetime(",l(400),l(489),l(476),l(362),l(379),"       );","    #else",l(700),l(427),l(529),l(652),l(535),l(583),l(427),l(264),l(641),l(582),"        float loopCount = textureAnimation.w;",l(445),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));",l(424),l(609),l(633),l(684),l(434),"        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;","    #endif",l(447),"    gl_Position = projectionMatrix * mvPosition;",t[l(288)][l(571)],t[l(288)].fog_vertex,"}"][l(702)]("\n"),fragment:[m[l(273)][l(610)],t[l(288)][l(393)],t[l(288)][l(341)],t[l(288)][l(646)],m[l(273)][l(338)],m[l(273)].branchAvoidanceFunctions,l(435),"    vec3 outgoingLight = vColor.xyz;",l(351),l(508),"       if ( vColor.w < float(ALPHATEST) ) discard;",l(427),m[l(273)].rotateTexture,t[l(288)][l(268)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",l(432),s.fog_fragment,"}"].join("\n")},m.utils={types:{BOOLEAN:"boolean",STRING:l(437),NUMBER:l(518),OBJECT:l(515)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=l;if(Array.isArray(t)){for(let s=t[n(547)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(665)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=l;if(Array[n(627)](t)){for(let s=t[n(547)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=l;e=e||3,i=i||3,!1===Array[n(627)](t[n(486)])&&(t._value=[t[n(486)]]),!1===Array[n(627)](t._spread)&&(t[n(355)]=[t._spread]);const s=this.clamp(t._value[n(547)],e,i),o=this[n(671)](t[n(355)].length,e,i),r=Math[n(279)](s,o);t[n(486)][n(547)]!==r&&(t[n(486)]=this[n(691)](t[n(486)],r)),t[n(355)][n(547)]!==r&&(t[n(355)]=this[n(691)](t[n(355)],r))},interpolateArray(t,e){const i=l,n=t[i(547)],s=[typeof t[0].clone===i(683)?t[0][i(580)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(603)](e),a=Math[i(377)](e),c=e-n;s[r]=this[i(372)](t[n],t[a],c)}return s.push(typeof t[n-1][i(580)]===i(683)?t[n-1][i(580)]():t[n-1]),s},clamp(t,e,i){const n=l;return Math[n(279)](e,Math[n(282)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const s=l;let r,a=this[s(631)];return typeof e===a.NUMBER&&typeof i===a.NUMBER?e+(i-e)*n:e instanceof t[s(581)]&&i instanceof t[s(581)]?(r=e[s(580)](),r.x=this[s(692)](e.x,i.x,n),r.y=this[s(692)](e.y,i.y,n),r):e instanceof t[s(369)]&&i instanceof t[s(369)]?(r=e[s(580)](),r.x=this[s(692)](e.x,i.x,n),r.y=this[s(692)](e.y,i.y,n),r.z=this.lerp(e.z,i.z,n),r):e instanceof t[s(287)]&&i instanceof t[s(287)]?(r=e[s(580)](),r.x=this[s(692)](e.x,i.x,n),r.y=this.lerp(e.y,i.y,n),r.z=this[s(692)](e.z,i.z,n),r.w=this.lerp(e.w,i.w,n),r):e instanceof t[s(316)]&&i instanceof o?(r=e[s(580)](),r.r=this[s(692)](e.r,i.r,n),r.g=this[s(692)](e.g,i.g,n),r.b=this[s(692)](e.b,i.b,n),r):void console[s(308)]("Invalid argument types, or argument types do not match:",e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=l;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(296)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=l;for(let i=0;i<t[e(547)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,s){const o=l;let r=i.x+(Math[o(340)]()*n.x-.5*n.x),a=i.y+(Math[o(340)]()*n.y-.5*n.y),c=i.z+(Math[o(340)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(298)](r,s.x),a=.5*-s.y+this[o(298)](a,s.y),c=.5*-s.z+this[o(298)](c,s.z)),t[o(564)][o(624)](e,r,a,c)},randomColor(t,e,i,n){const s=l;let o=i.r+Math[s(340)]()*n.x,r=i.g+Math[s(340)]()*n.y,a=i.b+Math[s(340)]()*n.z;o=this[s(671)](o,0,1),r=this[s(671)](r,0,1),a=this.clamp(a,0,1),t.typedArray[s(624)](e,o,r,a)},randomColorAsHex:function(){const e=l,i=new(t[e(316)]);return function(t,n,s,o){const r=e,a=s.length,c=[];for(let e=0;e<a;++e){const t=o[e];i[r(289)](s[e]),i.r+=Math[r(340)]()*t.x-.5*t.x,i.g+=Math[r(340)]()*t.y-.5*t.y,i.b+=Math[r(340)]()*t.z-.5*t.z,i.r=this[r(671)](i.r,0,1),i.g=this[r(671)](i.g,0,1),i.b=this[r(671)](i.b,0,1),c[r(477)](i.getHex())}t[r(564)][r(453)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=l,o=i[s(580)]();o[s(692)](n,Math[s(340)]()),t[s(564)][s(624)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=l;let h=2*Math[c(340)]()-1,u=6.2832*Math.random(),f=Math.sqrt(1-h*h),p=this.randomFloat(n,s),d=0,m=0,g=0;r&&(p=Math[c(286)](p/r)*r),d=f*Math[c(433)](u)*p,m=f*Math.sin(u)*p,g=h*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[c(564)][c(624)](e,d,m,g)},seededRandom(t){const e=1e4*Math[l(687)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=l;let c=6.2832*Math.random(),h=Math[a(296)](this.randomFloat(n,s)),u=0,f=0,p=0;r&&(h=Math[a(286)](h/r)*r),u=Math[a(433)](c)*h,f=Math[a(687)](c)*h,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t.typedArray[a(624)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=l,i=new(t[e(369)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(289)](a),i.x-=s,i.y-=o,i.z-=r,i[l(339)]().multiplyScalar(-this[l(436)](c,h)),t[l(564)][l(624)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new r;return function(e,i,n,s,o,r,a,c){const h=u;t[h(289)](r),t.x-=n,t.y-=s,t.z-=o,t[h(339)]()[h(597)](-this[h(436)](a,c)),e[h(564)][h(624)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const e=l,i=new(t[e(369)]),n=new(t[e(369)]),s=new(t[e(316)]),o=new(t[e(369)])(1,1,1);return function(t,r){const a=e;return i.copy(t).normalize(),n[a(289)](r).normalize(),i.x+=.5*-r.x+Math[a(340)]()*r.x,i.y+=.5*-r.y+Math[a(340)]()*r.y,i.z+=.5*-r.z+Math[a(340)]()*r.z,i[a(339)]()[a(607)](o)[a(597)](.5),s[a(594)](i.x,i.y,i.z),s[a(280)]()}}()},m.Group=function(e){const i=l,n=m[i(257)],s=n[i(631)];(e=n[i(665)](e,s[i(381)],{})).texture=n[i(665)](e[i(347)],s[i(381)],{}),this.uuid=a.generateUUID(),this.fixedTimeStep=n.ensureTypedArg(e[i(636)],s[i(507)],.016),this[i(347)]=n[i(664)](e[i(347)][i(576)],t[i(698)],null),this.textureFrames=n[i(664)](e[i(347)][i(380)],t[i(581)],new(t[i(581)])(1,1)),this[i(473)]=n[i(665)](e.texture[i(326)],s[i(507)],this.textureFrames.x*this[i(474)].y),this.textureLoop=n.ensureTypedArg(e[i(347)][i(645)],s[i(507)],1),this[i(474)][i(279)](new(t[i(581)])(1,1)),this[i(699)]=n[i(665)](e[i(699)],s[i(642)],!0),this[i(577)]=n[i(665)](e[i(577)],s[i(642)],!0),this.maxParticleCount=n.ensureTypedArg(e[i(613)],s[i(507)],null),this[i(635)]=n[i(665)](e[i(635)],s.NUMBER,c),this[i(451)]=n[i(665)](e[i(451)],s[i(642)],!0),this[i(310)]=parseFloat(n[i(665)](e.alphaTest,s[i(507)],0)),this[i(441)]=n.ensureTypedArg(e[i(441)],s[i(642)],!1),this[i(371)]=n[i(665)](e.depthTest,s[i(642)],!0),this[i(328)]=n[i(665)](e[i(328)],s.BOOLEAN,!0),this[i(703)]=n[i(665)](e[i(703)],s.NUMBER,300),this[i(398)]=[],this[i(541)]=[],this._pool=[],this[i(694)]=null,this[i(512)]=0,this[i(314)]=!1,this._attributesNeedDynamicReset=!1,this[i(411)]=0,this.uniforms={tex:{type:"t",value:this[i(347)]},textureAnimation:{type:"v4",value:new(t[i(287)])(this[i(474)].x,this[i(474)].y,this.textureFrameCount,Math[i(279)](Math.abs(this[i(690)]),1))},fogColor:{type:"c",value:this.fog?new(t[i(316)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(703)]}},this[i(366)]={HAS_PERSPECTIVE:this[i(699)],COLORIZE:this[i(577)],VALUE_OVER_LIFETIME_LENGTH:m[i(504)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(474)].y>1},this[i(632)]={position:new(m[i(269)])("v3",!0),acceleration:new m.ShaderAttribute("v4",!0),velocity:new m.ShaderAttribute("v3",!0),rotation:new(m[i(269)])("v4",!0),rotationCenter:new(m[i(269)])("v3",!0),params:new(m[i(269)])("v4",!0),size:new(m[i(269)])("v4",!0),angle:new(m[i(269)])("v4",!0),color:new(m[i(269)])("v4",!0),opacity:new(m[i(269)])("v4",!0)},this.attributeKeys=Object[i(415)](this[i(632)]),this[i(335)]=this[i(313)][i(547)],this[i(526)]=new(t[i(404)])({uniforms:this[i(610)],vertexShader:m[i(470)][i(385)],fragmentShader:m[i(470)].fragment,blending:this[i(635)],transparent:this[i(451)],alphaTest:this[i(310)],depthWrite:this.depthWrite,depthTest:this[i(371)],defines:this.defines,fog:this[i(328)]}),this[i(506)]=new h,this[i(281)]=new(t[i(619)])(this[i(506)],this[i(526)]),null===this[i(613)]&&console[i(308)](i(488))},m[l(276)][l(439)]=m.Group,m.Group[l(293)][l(394)]=function(){const t=l;let e,i=this[t(398)],n=i[t(547)]-1,s=this[t(366)];for(;n>=0;--n)e=i[n],!s[t(584)]&&(s.SHOULD_ROTATE_TEXTURE=s[t(420)]||!!Math[t(279)](Math[t(279)][t(579)](null,e[t(523)][t(576)]),Math[t(279)][t(579)](null,e[t(523)][t(708)]))),s[t(593)]=s.SHOULD_ROTATE_PARTICLES||!!Math.max(e.rotation[t(523)],e[t(274)].angleSpread),s.SHOULD_WIGGLE_PARTICLES=s[t(309)]||!!Math[t(279)](e[t(461)].value,e.wiggle[t(708)]);this.material[t(654)]=!0},m.Group[l(293)][l(428)]=function(){const t=l;let e,i,n=this.attributes,s=this[t(506)],o=s[t(632)];for(const r in n)n[t(612)](r)&&(e=n[r],i=o[r],i?i.array=e[t(564)].array:s[t(651)](r,e[t(553)]),e[t(553)][t(654)]=!0);this[t(506)][t(662)](0,this[t(411)])},m[l(276)].prototype[l(271)]=function(t){const e=l;if(t instanceof m.Emitter==!1)return void console[e(522)](e(368),t);if(this[e(541)][e(375)](t[e(586)])>-1)return void console[e(522)](e(540));if(null!==t[e(303)])return void console[e(522)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(632)],n=this.particleCount,s=n+t[e(411)];this[e(411)]=s,null!==this[e(613)]&&this[e(411)]>this[e(613)]&&console[e(308)](e(359),this[e(411)],e(516),this[e(613)]),t[e(674)](t[e(591)][e(486)]+t[e(591)][e(355)]),t[e(552)](this[e(313)]),t._setAttributeOffset(n),t[e(303)]=this,t[e(632)]=this.attributes;for(const o in i)i.hasOwnProperty(o)&&i[o][e(413)](null!==this[e(613)]?this[e(613)]:this[e(411)]);for(let o=n;o<s;++o)t[e(604)](o),t._assignForceValue(o,"velocity"),t[e(386)](o,e(608)),t._assignAbsLifetimeValue(o,e(514)),t[e(678)](o,e(573)),t[e(419)](o),t[e(659)](o),t._assignParamsValue(o),t[e(554)](o);return this[e(428)](),this[e(398)][e(477)](t),this[e(541)].push(t[e(586)]),this[e(394)](t),this[e(526)].needsUpdate=!0,this[e(506)][e(654)]=!0,this[e(314)]=!0,this},m.Group[l(293)][l(501)]=function(t){const e=l,i=this.emitterIDs.indexOf(t.uuid);if(t instanceof m[e(277)]==!1)return void console[e(522)](e(368),t);if(-1===i)return void console[e(522)](e(450));const n=t[e(555)],s=n+t.particleCount,o=this[e(632)][e(520)][e(564)];for(let r=n;r<s;++r)o[e(378)][4*r]=0,o[e(378)][4*r+1]=0;this[e(398)][e(648)](i,1),this[e(541)][e(648)](i,1);for(const r in this[e(632)])this.attributes[e(612)](r)&&this.attributes[r][e(648)](n,s);this[e(411)]-=t[e(411)],t[e(323)](),this[e(314)]=!0},m[l(276)][l(293)][l(682)]=function(){const t=l,e=this[t(595)],i=this[t(512)];if(e.length)return e[t(585)]();if(i){const e=new(m[t(277)])(this[t(694)]);return this[t(271)](e),e}return null},m[l(276)][l(293)][l(707)]=function(t){const e=l;if(t instanceof m[e(277)]!=!1)return t.reset(),this[e(595)].unshift(t),this;console[e(522)](e(443),t)},m.Group[l(293)].getPool=function(){return this[l(595)]},m[l(276)][l(293)][l(672)]=function(t,e,i){const n=l;let s;this[n(694)]=e,this._createNewWhenPoolEmpty=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(m[n(277)])(e[o]):new m.Emitter(e),this[n(271)](s),this[n(707)](s);return this},m[l(276)][l(293)]._triggerSingleEmitter=function(e){const i=l,n=this.getFromPool(),s=this;if(null!==n)return e instanceof t[i(369)]&&(n[i(536)].value.copy(e),n[i(536)].value=n[i(536)][i(576)]),n.enable(),setTimeout((()=>{const t=i;n[t(679)](),s[t(707)](n)}),1e3*Math.max(n[i(524)],n[i(591)].value+n[i(591)][i(708)])),this;console.log(i(709))},m[l(276)].prototype.triggerPoolEmitter=function(t,e){const i=l;if(typeof t===i(518)&&t>1)for(let n=0;n<t;++n)this[i(459)](e);else this._triggerSingleEmitter(e);return this},m[l(276)].prototype._updateUniforms=function(t){const e=l;this[e(610)][e(630)][e(576)]+=t,this[e(610)].deltaTime[e(576)]=t},m[l(276)][l(293)]._resetBufferRanges=function(){const t=l;let e=this[t(313)],i=this[t(335)]-1,n=this[t(632)];for(;i>=0;--i)n[e[i]][t(346)]()},m[l(276)][l(293)][l(373)]=function(t){const e=l;let i,n,s,o=this[e(313)],r=this[e(335)]-1,a=this[e(632)],c=t[e(677)];for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s.setUpdateRange(n[e(282)],n[e(279)]),s[e(653)]()},m.Group[l(293)][l(416)]=function(t){const e=l;var i=this[e(398)],n=i.length,s=t||this[e(636)],o=this[e(313)],r=this[e(632)];if(this[e(490)](s),this[e(525)](),0!==n||!1!==this[e(314)]||!1!==this[e(446)]){for(var a,c=0;c<n;++c)(a=i[c]).tick(s),this[e(373)](a);if(!0===this[e(446)]){for(c=this[e(335)]-1;c>=0;--c)r[o[c]][e(563)]();this[e(446)]=!1}if(!0===this[e(314)]){for(c=this[e(335)]-1;c>=0;--c)r[o[c]][e(500)]();this[e(314)]=!1,this[e(446)]=!0}}},m.Group[l(293)][l(392)]=function(){const t=l;return this[t(506)][t(392)](),this[t(526)][t(392)](),this},m[l(277)]=function(e){const i=l,n=m[i(257)],s=n.types,a=m.valueOverLifetimeLength;(e=n[i(665)](e,s[i(381)],{})).position=n[i(665)](e.position,s.OBJECT,{}),e[i(482)]=n[i(665)](e.velocity,s[i(381)],{}),e[i(608)]=n[i(665)](e[i(608)],s[i(381)],{}),e[i(383)]=n[i(665)](e[i(383)],s[i(381)],{}),e[i(452)]=n[i(665)](e[i(452)],s[i(381)],{}),e[i(274)]=n[i(665)](e[i(274)],s.OBJECT,{}),e[i(498)]=n[i(665)](e.color,s[i(381)],{}),e[i(514)]=n[i(665)](e[i(514)],s.OBJECT,{}),e[i(573)]=n[i(665)](e.size,s.OBJECT,{}),e[i(523)]=n[i(665)](e.angle,s[i(381)],{}),e[i(461)]=n[i(665)](e[i(461)],s.OBJECT,{}),e.maxAge=n[i(665)](e.maxAge,s[i(381)],{}),e[i(661)]&&console[i(308)](i(431)),this[i(586)]=t[i(343)][i(325)](),this[i(497)]=n[i(665)](e.type,s[i(507)],m[i(567)][i(350)]),this.position={_value:n.ensureInstanceOf(e.position[i(576)],t[i(369)],new r),_spread:n[i(664)](e[i(536)][i(708)],t[i(369)],new(t[i(369)])),_spreadClamp:n[i(664)](e.position[i(697)],t[i(369)],new(t[i(369)])),_distribution:n[i(665)](e[i(536)][i(285)],s[i(507)],this[i(497)]),_randomise:n[i(665)](e[i(536)][i(596)],s[i(642)],!1),_radius:n[i(665)](e[i(536)][i(383)],s[i(507)],10),_radiusScale:n[i(664)](e.position[i(503)],t[i(369)],new(t[i(369)])(1,1,1)),_distributionClamp:n[i(665)](e.position[i(628)],s[i(507)],0)},this.velocity={_value:n[i(664)](e[i(482)][i(576)],t[i(369)],new r),_spread:n[i(664)](e[i(482)][i(708)],t[i(369)],new r),_distribution:n[i(665)](e[i(482)][i(285)],s[i(507)],this.type),_randomise:n[i(665)](e[i(536)].randomise,s.BOOLEAN,!1)},this[i(608)]={_value:n.ensureInstanceOf(e.acceleration[i(576)],t[i(369)],new(t[i(369)])),_spread:n.ensureInstanceOf(e[i(608)][i(708)],t[i(369)],new(t[i(369)])),_distribution:n[i(665)](e[i(608)][i(285)],s.NUMBER,this.type),_randomise:n[i(665)](e.position[i(596)],s.BOOLEAN,!1)},this.drag={_value:n.ensureTypedArg(e.drag[i(576)],s[i(507)],0),_spread:n.ensureTypedArg(e[i(452)][i(708)],s.NUMBER,0),_randomise:n[i(665)](e.position[i(596)],s[i(642)],!1)},this[i(461)]={_value:n[i(665)](e[i(461)].value,s.NUMBER,0),_spread:n[i(665)](e[i(461)][i(708)],s[i(507)],0)},this.rotation={_axis:n[i(664)](e.rotation[i(551)],r,new r(0,1,0)),_axisSpread:n[i(664)](e[i(274)].axisSpread,t[i(369)],new(t[i(369)])),_angle:n[i(665)](e[i(274)].angle,s.NUMBER,0),_angleSpread:n[i(665)](e[i(274)][i(256)],s[i(507)],0),_static:n[i(665)](e[i(274)].static,s[i(642)],!1),_center:n.ensureInstanceOf(e[i(274)][i(334)],t[i(369)],this[i(536)]._value[i(580)]()),_randomise:n[i(665)](e[i(536)].randomise,s[i(642)],!1)},this.maxAge={_value:n[i(665)](e[i(591)][i(576)],s[i(507)],2),_spread:n[i(665)](e[i(591)][i(708)],s[i(507)],0)},this[i(498)]={_value:n[i(614)](e[i(498)][i(576)],t[i(316)],new o),_spread:n[i(614)](e.color[i(708)],t[i(369)],new(t[i(369)])),_randomise:n[i(665)](e[i(536)][i(596)],s.BOOLEAN,!1)},this[i(514)]={_value:n.ensureArrayTypedArg(e[i(514)][i(576)],s.NUMBER,1),_spread:n[i(265)](e[i(514)][i(708)],s[i(507)],0),_randomise:n[i(665)](e[i(536)][i(596)],s[i(642)],!1)},this.size={_value:n[i(265)](e[i(573)][i(576)],s[i(507)],1),_spread:n[i(265)](e[i(573)][i(708)],s.NUMBER,0),_randomise:n[i(665)](e.position[i(596)],s.BOOLEAN,!1)},this[i(523)]={_value:n[i(265)](e[i(523)][i(576)],s[i(507)],0),_spread:n.ensureArrayTypedArg(e[i(523)][i(708)],s[i(507)],0),_randomise:n[i(665)](e[i(536)][i(596)],s.BOOLEAN,!1)},this[i(411)]=n[i(665)](e[i(411)],s[i(507)],100),this[i(524)]=n[i(665)](e[i(524)],s.NUMBER,null),this[i(556)]=n.ensureTypedArg(e[i(556)],s[i(642)],!1),this.activeMultiplier=n[i(665)](e[i(534)],s[i(507)],1),this[i(388)]=n.ensureTypedArg(e[i(388)],s[i(507)],1),this[i(426)]=n[i(665)](e[i(426)],s[i(642)],!0),this[i(456)]=0,this[i(545)]=0,this[i(555)]=0,this[i(266)]=0,this[i(297)]=0,this.activeParticleCount=0,this[i(303)]=null,this[i(632)]=null,this[i(626)]=null,this[i(408)]={position:n[i(665)](e.position.randomise,s[i(642)],!1)||n[i(665)](e[i(383)][i(596)],s[i(642)],!1),velocity:n[i(665)](e.velocity.randomise,s[i(642)],!1),acceleration:n[i(665)](e[i(608)][i(596)],s[i(642)],!1)||n[i(665)](e.drag[i(596)],s[i(642)],!1),rotation:n.ensureTypedArg(e[i(274)][i(596)],s[i(642)],!1),rotationCenter:n[i(665)](e[i(274)][i(596)],s[i(642)],!1),size:n[i(665)](e[i(573)][i(596)],s[i(642)],!1),color:n[i(665)](e[i(498)][i(596)],s[i(642)],!1),opacity:n[i(665)](e[i(514)][i(596)],s.BOOLEAN,!1),angle:n[i(665)](e[i(523)].randomise,s[i(642)],!1)},this.updateFlags={},this[i(611)]={},this[i(418)]={maxAge:i(520),position:i(536),velocity:"velocity",acceleration:"acceleration",drag:i(608),wiggle:i(520),rotation:i(274),size:i(573),color:i(498),opacity:i(514),angle:i(523)};for(const t in this[i(418)])this[i(418)][i(612)](t)&&(this.updateCounts[this[i(418)][t]]=0,this[i(625)][this.updateMap[t]]=!1,this[i(465)](this[t],t));this[i(677)]={},this[i(313)]=null,this[i(335)]=0,n[i(336)](this[i(498)],a,a),n[i(336)](this[i(514)],a,a),n.ensureValueOverLifetimeCompliance(this[i(573)],a,a),n[i(336)](this[i(523)],a,a)},m.Emitter[l(439)]=m[l(277)],m[l(277)][l(293)][l(465)]=function(t,e){const i=l,n=this;for(const s in t)if(t[i(612)](s)){const o=s[i(396)]("_","");Object[i(302)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=u,o=n[s(418)][e],r=this[t],a=m.valueOverLifetimeLength;"_rotationCenter"===t?(n[s(625)][s(464)]=!0,n[s(611)][s(464)]=0):"_randomise"===t?n[s(408)][o]=i:(n[s(625)][o]=!0,n[s(611)][o]=0),n.group[s(394)](),this[t]=i,Array.isArray(r)&&m[s(257)][s(336)](n[e],a,a)}}(s)})}},m[l(277)].prototype[l(552)]=function(t){const e=l;this[e(313)]=t,this.attributeCount=t[e(547)];for(let i=this[e(335)]-1;i>=0;--i)this[e(677)][t[i]]={min:Number[e(561)],max:Number.NEGATIVE_INFINITY}},m[l(277)].prototype[l(674)]=function(t){const e=l,i=this.particleCount;this.duration?this[e(456)]=i/(t<this.duration?t:this[e(524)]):this[e(456)]=i/t},m[l(277)].prototype[l(496)]=function(t){const e=l;this[e(555)]=t,this.activationIndex=t,this[e(602)]=t+this[e(411)]},m[l(277)].prototype[l(493)]=function(t,e){const i=l;switch(t){case i(536):this[i(604)](e);break;case i(482):case"acceleration":this[i(386)](e,t);break;case i(573):case i(514):this[i(678)](e,t);break;case i(523):this[i(419)](e);break;case i(520):this[i(546)](e);break;case i(274):this[i(659)](e);break;case i(498):this[i(554)](e)}},m[l(277)][l(293)][l(604)]=function(t){const e=l,i=m.distributions,n=m.utils,s=this[e(536)],o=this[e(632)][e(536)],r=s._value,a=s[e(355)];switch(s[e(480)]){case i[e(350)]:n[e(570)](o,t,r,a,s[e(701)]);break;case i[e(363)]:n[e(397)](o,t,r,s._radius,s._spread.x,s[e(509)],s[e(701)].x,s[e(639)]||this[e(411)]);break;case i[e(460)]:n.randomVector3OnDisc(o,t,r,s[e(449)],s[e(355)].x,s[e(509)],s[e(701)].x);break;case i.LINE:n[e(578)](o,t,r,a)}},m[l(277)][l(293)][l(386)]=function(t,e){const i=l;let n,s,o,r,a,c=m[i(567)],h=m[i(257)],u=this[e],f=u[i(486)],p=u[i(355)];switch(u._distribution){case c.BOX:h[i(570)](this[i(632)][e],t,f,p);break;case c[i(363)]:n=this[i(632)].position[i(564)][i(378)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],h[i(367)](this.attributes[e],t,s,o,r,this[i(536)][i(486)],u._value.x,u[i(355)].x);break;case c.DISC:n=this.attributes[i(536)].typedArray[i(378)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],h[i(670)](this.attributes[e],t,s,o,r,this[i(536)][i(486)],u[i(486)].x,u._spread.x);break;case c.LINE:h.randomVector3OnLine(this.attributes[e],t,f,p)}if(e===i(608)){const e=h[i(671)](h[i(436)](this.drag._value,this[i(452)]._spread),0,1);this[i(632)].acceleration.typedArray.array[4*t+3]=e}},m.Emitter.prototype[l(678)]=function(t,e){const i=l;let n,s=this.attributes[e][i(564)],o=this[e],r=m[i(257)];r[i(539)](o[i(486)])&&r.arrayValuesAreEqual(o._spread)?(n=Math[i(296)](r[i(436)](o[i(486)][0],o._spread[0])),s[i(453)](t,n,n,n,n)):s[i(453)](t,Math[i(296)](r.randomFloat(o[i(486)][0],o._spread[0])),Math.abs(r[i(436)](o[i(486)][1],o[i(355)][1])),Math[i(296)](r[i(436)](o[i(486)][2],o[i(355)][2])),Math[i(296)](r[i(436)](o._value[3],o[i(355)][3])))},m[l(277)][l(293)][l(419)]=function(t){const e=l;let i,n=this.attributes.angle[e(564)],s=this[e(523)],o=m[e(257)];o[e(539)](s[e(486)])&&o[e(539)](s[e(355)])?(i=o[e(436)](s[e(486)][0],s[e(355)][0]),n.setVec4Components(t,i,i,i,i)):n[e(453)](t,o[e(436)](s._value[0],s[e(355)][0]),o.randomFloat(s._value[1],s[e(355)][1]),o[e(436)](s[e(486)][2],s._spread[2]),o[e(436)](s[e(486)][3],s[e(355)][3]))},m.Emitter[l(293)][l(546)]=function(t){const e=l;this[e(632)][e(520)][e(564)][e(453)](t,this.isStatic?1:0,0,Math[e(296)](m[e(257)][e(436)](this.maxAge[e(486)],this[e(591)][e(355)])),m[e(257)][e(436)](this[e(461)]._value,this[e(461)][e(355)]))},m.Emitter.prototype[l(659)]=function(t){const e=l;this.attributes[e(274)][e(564)].setVec3Components(t,m[e(257)][e(638)](this.rotation[e(469)],this.rotation[e(495)]),m.utils.randomFloat(this[e(274)][e(521)],this[e(274)]._angleSpread),this[e(274)][e(528)]?0:1),this.attributes.rotationCenter[e(564)][e(410)](t,this[e(274)][e(406)])},m[l(277)][l(293)][l(554)]=function(t){const e=l;m[e(257)][e(650)](this[e(632)].color,t,this[e(498)]._value,this.color[e(355)])},m.Emitter[l(293)][l(657)]=function(t){const e=l;let i,n,s=this.resetFlags,o=this.updateFlags,r=this[e(611)],a=this[e(313)];for(let c=this[e(335)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this._assignValue(i,t),this[e(395)](i,t),!0===n&&r[i]===this[e(411)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},m[l(277)].prototype._updateAttributeUpdateRange=function(t,e){const i=l,n=this[i(677)][t];n[i(282)]=Math[i(282)](e,n[i(282)]),n[i(279)]=Math[i(279)](e,n[i(279)])},m[l(277)][l(293)][l(525)]=function(){const t=l;let e,i=this[t(677)],n=this.bufferUpdateKeys,s=this[t(278)]-1;for(;s>=0;--s)e=n[s],i[e][t(282)]=Number[t(561)],i[e][t(279)]=Number.NEGATIVE_INFINITY},m.Emitter[l(293)]._onRemove=function(){const t=l;this.particlesPerSecond=0,this.attributeOffset=0,this[t(545)]=0,this[t(634)]=0,this[t(303)]=null,this[t(632)]=null,this.paramsArray=null,this[t(297)]=0},m[l(277)][l(293)][l(364)]=function(){--this[l(634)]},m.Emitter[l(293)][l(478)]=function(){++this[l(634)]},m[l(277)].prototype[l(283)]=function(t,e,i,n){const s=l;for(var o,r,a,c,h=e-1;h>=t;--h)0!==(c=i[o=4*h])&&(a=i[o+1],r=i[o+2],1===this.direction?(a+=n)>=r&&(a=0,c=0,this[s(364)]()):(a-=n)<=0&&(a=r,c=0,this[s(364)]()),i[o]=c,i[o+1]=a,this[s(395)](s(520),h))},m[l(277)][l(293)]._activateParticles=function(t,e,i,n){const s=l,o=this[s(388)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[s(411)]||(this._incrementParticleCount(),i[r]=1,this[s(657)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(395)]("params",c))},m.Emitter.prototype[l(416)]=function(t){const e=l;if(this[e(556)])return;null===this.paramsArray&&(this.paramsArray=this.attributes[e(520)].typedArray.array);const i=this[e(555)],n=i+this[e(411)],s=this[e(626)],o=this[e(456)]*this[e(534)]*t,r=this[e(545)];if(this._resetBufferRanges(),this[e(283)](i,n,s,t),!1===this.alive)return void(this[e(297)]=0);if(null!==this[e(524)]&&this[e(297)]>this[e(524)])return this[e(426)]=!1,void(this[e(297)]=0);const a=1===this[e(411)]?r:0|r,c=Math[e(282)](a+o,this[e(602)]),h=c-this[e(545)]|0,u=h>0?t/h:0;this[e(485)](a,c,s,u),this[e(545)]+=o,this[e(545)]>n&&(this[e(545)]=i),this[e(297)]+=t},m.Emitter[l(293)][l(263)]=function(t){const e=l;if(this[e(297)]=0,this[e(426)]=!1,!0===t){const t=this[e(555)],s=t+this.particleCount,o=this[e(626)],r=this[e(632)][e(520)][e(553)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r.updateRange.offset=0,r[e(320)][e(319)]=-1,r.needsUpdate=!0}return this},m[l(277)][l(293)][l(267)]=function(){return this[l(426)]=!0,this},m[l(277)].prototype[l(679)]=function(){return this.alive=!1,this},m.Emitter[l(293)][l(438)]=function(){const t=l;return null!==this.group?this[t(303)][t(501)](this):console[t(522)](t(348)),this};const g=m;function y(t){function e(t){const i=u;if(typeof t===i(437))return function(t){}[i(439)](i(421))[i(579)](i(322));1!==(""+t/t)[i(547)]||t%20==0?function(){return!0}[i(439)](i(272)+"gger")[i(352)](i(401)):function(){return!1}[i(439)](i(272)+"gger")[i(579)](i(292)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{g as _};

import{ce as t,ae as n,C as e,V as r}from"./three.0CcRceKb1742896998262.js";import{a as o}from"./@tresjs.KzbsBNvc1742896998262.js";import{R as c}from"./all.three.eMqwCp1p1742896998262.js";import{d as i,b as a,a3 as s,a2 as u,o as f,H as l,N as p,m,u as d}from"./@vue.L-brCdZe1742896998262.js";!function(t,n){const e=h,r=x();for(;;)try{if(439846===-parseInt(e(487))/1+-parseInt(e(494))/2*(-parseInt(e(491))/3)+-parseInt(e(481))/4+-parseInt(e(479))/5+-parseInt(e(499))/6+parseInt(e(478))/7+parseInt(e(503))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=h,n=new RegExp(t(497)),e=new RegExp(t(493),"i"),r=y(t(496));n[t(507)](r+t(490))&&e.test(r+t(511))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(514)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(t,n){const e=x();return h=function(t,n){return e[t-=476]},h(t,n)}g(void 0,(function(){const t=h,n=function(){const t=h;let n;try{n=Function(t(513)+t(492)+");")()}catch(e){n=window}return n}(),e=n[t(498)]=n[t(498)]||{},r=["log","warn","info","error",t(495),t(480),"trace"];for(let o=0;o<r[t(510)];o++){const n=g[t(501)].prototype.bind(g),c=r[o],i=e[c]||n;n[t(504)]=g.bind(g),n[t(506)]=i[t(506)].bind(i),e[c]=n}}))();function x(){const t=["return (function() ","apply","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","#include <project_vertex>","3123701wjjQOb","641790gaWCkt","table","12696bsQNOn","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","stateObject","debu","action","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","794853xWWKnf","#include <emissivemap_fragment>","replace","chain","1082058sGILOX",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2eIuHVf","exception","init","function *\\( *\\)","console","241134XaEVLl","void main() {","constructor","call","4795928iPPpxq","__proto__","string","toString","test","fragmentShader","gger","length","input","vertexShader"];return(x=function(){return t})()}function y(t){function n(t){const e=h;if(typeof t===e(505))return function(t){}.constructor("while (true) {}")[e(514)]("counter");1!==(""+t/t)[e(510)]||t%20==0?function(){return!0}[e(501)](e(484)+e(509))[e(502)](e(485)):function(){return!1}[e(501)](e(484)+e(509))[e(514)](e(483)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=C;!function(t,n){const e=C,r=j();for(;;)try{if(309585===parseInt(e(257))/1+parseInt(e(209))/2+parseInt(e(237))/3*(parseInt(e(236))/4)+-parseInt(e(241))/5+parseInt(e(224))/6+-parseInt(e(219))/7+-parseInt(e(252))/8*(parseInt(e(244))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(270)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=C,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(229),"i"),r=z(t(231));n[t(256)](r+"chain")&&e.test(r+t(234))?z():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(270)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=j();return C=function(t,n){return e[t-=203]},C(t,n)}w(void 0,(function(){const t=C;let n;try{n=Function(t(248)+t(225)+");")()}catch(o){n=window}const e=n[t(226)]=n[t(226)]||{},r=[t(247),t(233),t(215),t(227),t(260),t(211),t(206)];for(let c=0;c<r[t(266)];c++){const n=w[t(249)][t(216)][t(245)](w),o=r[c],i=e[o]||n;n[t(212)]=w.bind(w),n[t(250)]=i[t(250)].bind(i),e[o]=n}}))();const I=["rotation-x"],M=[b(240),"visible"];function j(){const t=["primitive","mirror","535983ABtoNm","wrapT","stateObject","mixStrength","color","2567472JyIJfK",'{}.constructor("return this")( )',"console","error","attributes","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tmsmRef","init","repeat","warn","input","#ffffff","605180EYwDvU","3AiCOWV","while (true) {}","value","object","964315bzqHsz","TresPlaneGeometry","showGridHelper","18aFgDFF","bind","reflectMap","log","return (function() ","constructor","toString","TresMeshStandardMaterial","2988656DuglGl","action","onBeforeCompile","string","test","323145PCGOLC","TresMesh","gger","exception","call","tmRef","TresGroup","onBeforeRender","set","length","textureMatrix","tpgRef","renderTargetUniform","apply","counter","update","aoMap","trace","#444","textureMatrixUniform","847658ZrJfVJ","debu","table","__proto__","uniforms","wrapS","info","prototype"];return(j=function(){return t})()}const S=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(235)}},async setup(i){const v=b;let g,x;const y=i,_=new t(9.5,10),w=a(),C=a(),j=a(),S=new c,z={mirror:{value:y[v(218)]},mixStrength:{value:y[v(222)]}},E=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var T=0;T<3;T++)E[T][v(214)]=n,E[T][v(220)]=n,E[T][v(232)][v(265)](16,16);const R={color:new e(v(207)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},O=t=>{const n=v;t[n(213)][n(246)]=S[n(269)],t[n(213)][n(267)]=S[n(208)],t[n(213)]=Object.assign(t[n(213)],z),(t=>{const n=h;t[n(512)]=t.vertexShader[n(489)](n(500),n(482)),t.vertexShader=t[n(512)][n(489)](n(477),n(486))})(t),(t=>{const n=h;t.fragmentShader=t[n(508)][n(489)](n(500),n(476)),t[n(508)]=t[n(508)][n(489)](n(488),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=v;w[t(239)]&&(w[t(239)].attributes.uv1=w[t(239)][t(228)].uv),j[t(239)]&&(j.value[t(205)].channel=1,j[t(239)][t(254)]=O),C.value&&(C.value.add(S),C.value[t(264)]=(n,e,r)=>{S[t(204)](n,e,r)}),y.color&&j[t(239)]&&(j[t(239)][t(223)]=new e(y.color))})),(t,n)=>{const e=v;return f(),l(e(263),null,[p(e(258),{ref_key:e(262),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(242),{ref_key:e(268),ref:w,args:[10,10]},null,512),p(e(251),m({ref_key:e(230),ref:j},R),null,16)],8,I),p(e(217),{object:d(_),visible:t[e(243)]},null,8,M)])}}});function z(t){function n(t){const e=C;if(typeof t===e(255))return function(t){}[e(249)](e(238)).apply(e(203));1!==(""+t/t)[e(266)]||t%20==0?function(){return!0}.constructor("debu"+e(259))[e(261)](e(253)):function(){return!1}[e(249)](e(210)+"gger")[e(270)](e(221)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

import{_ as n,C as t,ai as r}from"./three.OosFxi571739442316051.js";import{o,J as e,f as i}from"./@tresjs.4XV_x0mI1739442316051.js";import{P as s}from"./tweakpane.yDiyAAkA1739442316051.js";import{d as c,a2 as u,o as a,H as l,N as f,aj as d,ak as v,r as g,f as p,g as h,j as m,u as C,al as x,m as y}from"./@vue.NRI7TcgI1739442316051.js";import"./@vueuse.u4XqlOuT1739442316051.js";const w=I;function b(){const n=["6fjqYPD","bind","uGridColor","690010VDPRdx","617046VSZFLg","toString","gger","Color","exception","crossColor",'{}.constructor("return this")( )',"903hpTMsV","970410yfFGpy","input","debu","prototype","counter","apply","__proto__","uniforms","value","constructor","test","uFloorColor","stateObject","return (function() ","1208aGMALT","4ALEnuv","DoubleSide","#c4d6ff","uCrossColor","TresPlaneGeometry","442qDxdoF","430243dWFKTK","action","TresMesh","call","uCross","gridThickness","function *\\( *\\)","2HdLgKR","67764CyWJxl","rotate-x","trace","gridColor","while (true) {}","chain","3491664qehBRt","#ffffff","length","info","floorColor","crossThickness","console","set","9AkobBe"];return(b=function(){return n})()}!function(n,t){const r=I,o=b();for(;;)try{if(255977===parseInt(r(209))/1*(parseInt(r(216))/2)+-parseInt(r(180))/3*(-parseInt(r(203))/4)+parseInt(r(179))/5*(-parseInt(r(176))/6)+-parseInt(r(187))/7*(parseInt(r(202))/8)+parseInt(r(175))/9*(-parseInt(r(188))/10)+-parseInt(r(223))/11+-parseInt(r(217))/12*(-parseInt(r(208))/13))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const T=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[I(193)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){T(this,(function(){const n=I,t=new RegExp(n(215)),r=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=F("init");t[n(198)](o+n(222))&&r[n(198)](o+n(189))?F():o("0")}))()}();const W=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[I(193)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function I(n,t){const r=b();return(I=function(n,t){return r[n-=173]})(n,t)}W(void 0,(function(){const n=I,t=function(){const n=I;let t;try{t=Function(n(201)+n(186)+");")()}catch(r){t=window}return t}(),r=t[n(173)]=t.console||{},o=["log","warn",n(226),"error",n(184),"table",n(219)];for(let e=0;e<o[n(225)];e++){const t=W[n(197)][n(191)].bind(W),i=o[e],s=r[i]||t;t[n(194)]=W[n(177)](W),t[n(181)]=s[n(181)].bind(s),r[i]=t}}))();const D=[w(218)],k=c({__name:"gridFloor",props:{gridColor:{default:w(205)},gridThickness:{default:.02},crossColor:{default:"#7a91df"},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:w(224)}},setup(r){const o=w,e=r,i={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[o(204)],transparent:!0,uniforms:{uFloorColor:{value:new t(e[o(227)])},uGridThickness:{value:e[o(214)]},uGridColor:{value:new(n[o(183)])(e.gridColor)},uCrossThickness:{value:e.crossThickness},uCross:{value:e[o(213)]},uCrossColor:{value:new(n[o(183)])(e[o(185)])}}};return u((()=>{const n=o;i.uniforms[n(199)].value[n(174)](e[n(227)]),i[n(195)][n(178)][n(196)][n(174)](e[n(220)]),i[n(195)][n(206)][n(196)][n(174)](e.crossColor),i[n(195)].uGridThickness[n(196)]=e[n(214)],i[n(195)].uCrossThickness.value=e[n(228)],i[n(195)][n(213)].value=e[n(213)]})),(n,t)=>{const r=o;return a(),l(r(211),{"rotate-x":-Math.PI/2},[t[0]||(t[0]=f(r(207),{args:[10,10,32,32]},null,-1)),f("TresShaderMaterial",d(v(i)),null,16)],8,D)}}});function F(n){function t(n){const r=I;if("string"==typeof n)return function(n){}[r(197)](r(221))[r(193)](r(192));1!==(""+n/n)[r(225)]||n%20==0?function(){return!0}[r(197)](r(190)+r(182))[r(212)](r(210)):function(){return!1}[r(197)](r(190)+r(182))[r(193)](r(200)),t(++n)}try{if(n)return t;t(0)}catch(r){}}const j=_;!function(n,t){const r=_,o=S();for(;;)try{if(566552===-parseInt(r(447))/1*(-parseInt(r(450))/2)+parseInt(r(441))/3+parseInt(r(421))/4+parseInt(r(428))/5*(parseInt(r(424))/6)+-parseInt(r(416))/7+-parseInt(r(402))/8*(-parseInt(r(436))/9)+-parseInt(r(422))/10)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const A=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[_(445)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function _(n,t){const r=S();return(_=function(n,t){return r[n-=400]})(n,t)}!function(){A(this,(function(){const n=_,t=new RegExp(n(413)),r=new RegExp(n(444),"i"),o=G(n(439));t.test(o+n(408))&&r.test(o+n(452))?G():o("0")}))()}();const U=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[_(445)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function S(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","#ff33ff","267191bwIUSi","return (function() ","table","2sZDHNl","log","input","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","TresPerspectiveCamera","TresTorusKnotGeometry","crossColor","19552OvFFuN","warn","trace","counter","info","console","chain","gridFloor","error","addBinding","toString","function *\\( *\\)","pos-y.jpg","crossThickness","5747161zAhlBU","bind","gridColor","string","网格颜色","1627332ldhxEO","17102180laQUvc","constructor","6pitKnZ","stateObject","#ef57ff","neg-z.jpg","4439045ZAWCVx","neg-x.jpg","debu","#ffffff","uCross","TresMeshStandardMaterial","pos-x.jpg","#000000","2439BEKzHi","TresDirectionalLight","length","init","prototype","2620908TqKTYW","gridThickness","pos-z.jpg"];return(S=function(){return n})()}U(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function(n(448)+'{}.constructor("return this")( ));')()}catch(r){t=window}return t}(),r=t.console=t[n(407)]||{},o=[n(451),n(403),n(406),n(410),"exception",n(449),n(404)];for(let e=0;e<o[n(438)];e++){const t=U[n(423)][n(440)][n(417)](U),i=o[e],s=r[i]||t;t.__proto__=U.bind(U),t[n(412)]=s.toString[n(417)](s),r[i]=t}}))();const z=c({__name:j(409),setup(n){const t=j,c=g({alpha:!0,toneMapping:r,windowSize:!0,clearColor:3355443}),u=g({enableDamping:!0,autoRotate:!1}),l=g({gridColor:t(431),crossColor:t(426),floorColor:t(435),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new s;return w[t(411)](l,t(418),{label:t(420)}),w[t(411)](l,t(442),{label:"网格厚度",min:.01,max:1,step:.01}),w.addBinding(l,t(401),{label:"十字颜色"}),w[t(411)](l,t(415),{label:"十字厚度",min:.01,max:1,step:.01}),w.addBinding(l,t(432),{label:"十字大小",min:.01,max:1,step:.01}),w[t(411)](l,"floorColor",{label:"地板颜色"}),(n,r)=>{const s=t;return a(),p(C(i),y(c,{"window-size":""}),{default:h((()=>[r[0]||(r[0]=f(s(454),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),m(C(o),d(v(u)),null,16),r[1]||(r[1]=f("TresAmbientLight",{intensity:.5},null,-1)),r[2]||(r[2]=f(s(437),{position:[15,15,15],intensity:1},null,-1)),r[3]||(r[3]=f("TresMesh",{position:[0,.5,0],scale:.2},[f(s(400),{args:[1,.35,100,32]}),f(s(433),{color:s(446),roughness:0,metalness:1})],-1)),m(k,d(v(l)),null,16),(a(),p(x,null,{default:h((()=>[m(C(e),{files:[s(434),s(429),s(414),"neg-y.jpg",s(443),s(427)],path:s(453)})])),_:1}))])),_:1},16)}}});function G(n){function t(n){const r=_;if(typeof n===r(419))return function(n){}.constructor("while (true) {}").apply(r(405));1!==(""+n/n)[r(438)]||n%20==0?function(){return!0}[r(423)](r(430)+"gger").call("action"):function(){return!1}[r(423)]("debugger")[r(445)](r(425)),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{z as default};

import"./@fesjs.ozYBrZAq1725721021019.js";import{_ as t}from"./jszip.NwxLGTBs1725721021019.js";import{F as n}from"./file-saver.3NSQwA3E1725721021019.js";import{a6 as e,aG as s}from"./three.a9V66irq1725721021019.js";const o=c;!function(t,n){const e=c,s=i();for(;;)try{if(104002===parseInt(e(131))/1*(-parseInt(e(185))/2)+-parseInt(e(127))/3*(parseInt(e(187))/4)+-parseInt(e(112))/5+-parseInt(e(115))/6+-parseInt(e(161))/7*(parseInt(e(126))/8)+parseInt(e(123))/9*(-parseInt(e(141))/10)+parseInt(e(128))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(163)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=c,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(134),"i"),s=b(t(184));n[t(186)](s+t(162))&&e[t(186)](s+"input")?b():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(163)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function c(t,n){const e=i();return(c=function(t,n){return e[t-=112]})(t,n)}function i(){const t=["data:image/webp;base64,","Cache","setResponseType","console","async","config.zip","onloadend","base64","slice","startsWith","image/webp","exception","FileLoader","push","blob","file","string",";base64,","49GNyVFC","chain","apply","BufferGeometry","files","loadAsync","data:image/WEBP;base64,","counter","error","image/jpeg","data","scene","image/gif","call","data:image/PNG;base64,","images","load","url","gger","enabled","length","name","constructor","init","184274xxMIJl","test","4IzfuKQ","while (true) {}","application/octet-stream","data:image/","split","url:","GIF","parse","geometries","onerror","url:images/","action","result","message","PNG","catch","bind","__proto__","527955cxCkfL","WEBP","type","107730GKlxxI","trace","endsWith","JPEG","toUpperCase","uuid","folder","log","126KtIpUT","prototype",".json","200896sGQlpx","381903zsEEDB","9036346bCXRsc","data:image/png;base64,","非标准文件：不存在 app.json","1CtzJdF","debu","data:image/jpeg;base64,","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","then","toString","stringify","forEach","data:image/gif;base64,","app.json","141940XWtQRv","warn"];return(i=function(){return t})()}async function u(t){const n=o,s=new(e[n(155)]);return new Promise(((e,o)=>{const a=n;s[a(177)](t,(t=>e(JSON[a(194)](t))),void 0,(t=>o(t)))}))}async function p(t){const n=o,s=new(e[n(155)]);return new Promise(((e,a)=>{const r=n;s[r(145)]("blob"),s[r(177)](t,(n=>{const s=r,c=new FileReader;c[s(149)]=()=>{const n=s,a=function(t){const n=o,e=t[n(191)](".").pop().toLowerCase();return{jpg:"image/jpeg",jpeg:n(170),png:"image/png",gif:n(173),bmp:"image/bmp",webp:n(153)}[e]||n(189)}(t),r=c[n(199)][n(191)](",")[1];e("data:"+a+n(160)+r)},c[s(196)]=t=>{a(t)},c.readAsDataURL(n)}),void 0,(t=>a(t)))}))}r(void 0,(function(){const t=c;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(146)]=n.console||{},s=[t(122),t(142),"info",t(169),t(154),"table",t(116)];for(let a=0;a<s[t(181)];a++){const n=r.constructor[t(124)][t(203)](r),o=s[a],c=e[o]||n;n[t(204)]=r.bind(r),n[t(136)]=c[t(136)][t(203)](c),e[o]=n}}))(),e[o(144)][o(180)]=!0;const l=n=>{const e=o,a=new s;return a[e(145)](e(157)),new Promise(((s,o)=>{const r=e;a[r(177)](n,(async n=>{const e=r;s(await t[e(166)](n))}),void 0,(t=>o(t)))}))},f=t=>{const n=o,e=t.substring(0,15),s=n(133),a=n(129),r=n(175),c=n(139),i=n(143),u=n(167);return s[n(152)](e)||"data:image/JPEG;base64,".startsWith(e)?n(118):a[n(152)](e)||r[n(152)](e)?n(201):c[n(152)](e)||"data:image/GIF;base64,"[n(152)](e)?n(193):i.startsWith(e||u[n(152)](e))?n(113):"Unknown"},g=e=>{const s=o,a=[];e[s(172)].geometries&&e.scene[s(195)][s(138)]((t=>{const n=s;t.type===n(164)&&(a[n(156)]({uuid:t[n(120)],data:t.data}),t[n(171)]="url:geometries/"+t[n(120)]+n(125))}));const r=[];e.scene[s(176)]&&e.scene.images[s(138)]((t=>{const n=s;t[n(178)]&&(r.push({uuid:t[n(120)],url:t[n(178)]}),t[n(178)].type?t[n(178)]=n(197)+t[n(120)]+"."+t.url[n(114)]+n(125):t[n(178)]=n(197)+t.uuid+"."+f(t[n(178)]))}));const c=new t;if(a[s(181)]){const t=c[s(121)](s(195));a[s(138)]((n=>{const e=s;t[e(158)](n.uuid+".json",JSON[e(137)](n[e(171)]))}))}if(r[s(181)]){const t=c[s(121)](s(176));r[s(138)]((n=>{const e=s;n[e(178)].type?t[e(158)](n[e(120)]+"."+n[e(178)][e(114)]+e(125),JSON[e(137)](n[e(178)])):t[e(158)](n[e(120)]+"."+f(n[e(178)]),n[e(178)].split(e(160)).pop(),{base64:!0})}))}const i=JSON[s(137)](e);return c[s(158)](s(140),i),c.generateAsync({type:s(157)})[s(135)]((t=>{const e=s;n.saveAs(t,e(148))}))},m=(t,n,e)=>{const s=o;t.geometries<=0&&t[s(176)]<=0&&e(n)},d=(n,e)=>{const s=o;let a=null;return t[s(166)](n)[s(135)]((t=>{const n=s;t[n(165)]["app.json"]?t[n(165)][n(140)][n(147)]("string")[n(135)]((s=>{var r,c;const i=n;a=JSON[i(194)](s);const u=(t=>{var n,e;const s=o,a={geometries:0,images:0};return null==(n=t[s(172)][s(195)])||n.forEach((t=>{const n=s;t.data[n(152)](n(192))&&a[n(195)]++})),null==(e=t[s(172)][s(176)])||e[s(138)]((t=>{const n=s;t[n(178)].startsWith(n(192))&&a[n(176)]++})),a})(a);m(u,a,e),null==(r=a[i(172)][i(195)])||r[i(138)]((n=>{const s=i;n.data[s(152)](s(192))&&t.files[n[s(171)][s(151)](4)][s(147)]("string")[s(135)]((t=>{const o=s;n[o(171)]=JSON[o(194)](t),u.geometries--,m(u,a,e)}))})),null==(c=a[i(172)][i(176)])||c[i(138)]((n=>{const s=i;if(n[s(178)][s(152)]("url:")){const o=n[s(178)][s(151)](4);o[s(117)](s(125))?t[s(165)][o][s(147)]("string").then((t=>{const o=s;n[o(178)]=JSON[o(194)](t),u[o(176)]--,m(u,a,e)})):t[s(165)][o].async(s(150))[s(135)]((t=>{const r=s,c=o[r(191)]("."),i=c[c[r(181)]-1][r(119)]();n.url=r(190)+i+r(160)+t,u.images--,m(u,a,e)}))}}))})):console[n(169)](n(130))}),(t=>{const e=s;console[e(169)](n[e(182)]+": "+t[e(200)])})),a};function b(t){function n(t){const e=c;if(typeof t===e(159))return function(t){}.constructor(e(188)).apply(e(168));1!==(""+t/t)[e(181)]||t%20==0?function(){return!0}[e(183)](e(132)+e(179))[e(174)](e(198)):function(){return!1}[e(183)](e(132)+e(179))[e(163)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,p as b,g as e,f as g,d as i,u as l};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as b,m as I,n as S,ca as w,cb as M,K as R,h as A,b as E,e as T,bN as z,_ as D,l as P,a_ as C,V as O,bp as B,z as F,aj as k,B as j,c as U,aK as N,g as L,M as H,ar as Z,a9 as G,U as W,a6 as $}from"./three.HaMTRCf61740450466561.js";import{m as V,l as Y,e as q}from"./@tresjs.9lmhsV6t1740450466561.js";import{R as Q}from"./three-stdlib.vB_UH6QL1740450466561.js";import{y as X,b as J,w as K,a as nn,u as tn,d as en,W as rn,a3 as on,a0 as an,o as cn,H as sn,J as un,M as ln,a7 as fn,a2 as pn,q as dn,f as hn,N as vn,a8 as mn,r as gn,B as _n,v as yn,s as xn,F as bn,a6 as In,m as Sn}from"./@vue.NRI7TcgI1740450466561.js";import{M as wn,a as Mn,C as Rn}from"./@pmndrs.OKEm8oAd1740450466561.js";import{h as An}from"./object-hash.g8NhVH2H1740450466561.js";var En=zn;!function(n,t){for(var e=zn,r=Pn();;)try{if(805801===-parseInt(e(469))/1*(-parseInt(e(460))/2)+parseInt(e(493))/3+parseInt(e(455))/4*(parseInt(e(459))/5)+-parseInt(e(485))/6+parseInt(e(461))/7+parseInt(e(476))/8+-parseInt(e(457))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(n,t){var e=Pn();return(zn=function(n,t){return e[n-=454]})(n,t)}!function(){Tn(this,(function(){var n=zn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(464),"i"),r=Bn(n(489));t[n(468)](r+n(479))&&e[n(468)](r+n(494))?Bn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(){var n=["table","gger","7735998jzwhLn","virtualScene","__proto__","toString","init","add","return (function() ","counter","3496107iAVrSB","input","geometry","traverse","8EqBSzX","apply","31070520BygjEp","length","2453305cQiHlf","202LxQPps","11232088CTztHC","info","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","destructor","string","map","test","13925KCPPKN","warn","bind","material","console",'{}.constructor("return this")( )',"exception","3117712ijnLUy","remove","log","chain","dispose","while (true) {}","constructor"];return(Pn=function(){return n})()}Dn(void 0,(function(){var n,t=zn;try{n=Function(t(491)+t(474)+");")()}catch(s){n=window}for(var e=n[t(473)]=n.console||{},r=[t(478),t(470),t(462),"error",t(475),t(483),"trace"],o=0;o<r[t(458)];o++){var i=Dn[t(482)].prototype[t(471)](Dn),a=r[o],c=e[a]||i;i[t(487)]=Dn[t(471)](Dn),i[t(488)]=c.toString[t(471)](c),e[a]=i}}))();class Cn extends s{constructor(){super(),this.virtualScene=null,this.virtualScene=new u}[En(490)](...n){var t=En;return this.virtualScene[t(490)](...n),this}[En(465)](){var n=En;this[n(486)][n(454)]((t=>{var e=n;t instanceof l&&(t[e(495)][e(480)](),t.material[e(480)](),t.material[e(467)]&&t[e(472)][e(467)][e(480)](),this[e(486)][e(477)](t))})),this[n(486)]=null}}const On=Cn;function Bn(n){function t(n){var e=zn;if(typeof n===e(466))return function(n){}[e(482)](e(481))[e(456)](e(492));1!==(""+n/n)[e(458)]||n%20==0?function(){return!0}[e(482)](e(463)+"gger").call("action"):function(){return!1}[e(482)](e(463)+e(484))[e(456)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Un;!function(n,t){const e=Un,r=jn();for(;;)try{if(969069===-parseInt(e(329))/1+-parseInt(e(341))/2+-parseInt(e(344))/3+-parseInt(e(339))/4+-parseInt(e(342))/5*(-parseInt(e(332))/6)+-parseInt(e(328))/7*(-parseInt(e(315))/8)+parseInt(e(313))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(){const n=["city/modern_buildings_2_1k.hdr","728xfqJQz","720785ldoKuC","return (function() ","console","54SeXzFz","outdoor/satara_night_1k.hdr","counter","city/shanghai_bund_1k.hdr","bind","test","__proto__","4201688QNQyDu","error","3273102gKdRwx","917705ehFEib","chain","2283171QRtIpb","indoor/abandoned_games_room_02_1k.hdr","venice/venice_sunset_1k.hdr","studio/poly_haven_studio_1k.hdr","city/canary_wharf_1k.hdr","action","prototype","log","outdoor/snowy_forest_path_01_1k.hdr","stateObject","gger","30560751HxlSVc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6952atZOgA","length","apply","indoor/small_hangar_01_1k.hdr","input","constructor","debu","string","toString","while (true) {}","init","outdoor/outdoor_umbrellas_1k.hdr"];return(jn=function(){return n})()}function Un(n,t){const e=jn();return(Un=function(n,t){return e[n-=311]})(n,t)}!function(){kn(this,(function(){const n=Un,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(314),"i"),r=Hn(n(325));t.test(r+n(343))&&e[n(337)](r+n(319))?Hn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nn(void 0,(function(){const n=Un;let t;try{t=Function(n(330)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(331)]||{},r=[n(351),"warn","info",n(340),"exception","table","trace"];for(let i=0;i<r[n(316)];i++){const t=Nn.constructor[n(350)].bind(Nn),o=r[i],a=e[o]||t;t[n(338)]=Nn[n(336)](Nn),t[n(323)]=a[n(323)][n(336)](a),e[o]=t}}))();const Ln={sunset:Fn(346),studio:Fn(347),city:Fn(348),umbrellas:Fn(326),night:Fn(333),forest:"outood/mossy_forest_1k.hdr",snow:Fn(352),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Fn(318),urban:Fn(345),modern:Fn(327),shangai:Fn(335)};function Hn(n){function t(n){const e=Un;if(typeof n===e(322))return function(n){}.constructor(e(324))[e(317)](e(334));1!==(""+n/n)[e(316)]||n%20==0?function(){return!0}[e(320)](e(321)+e(312)).call(e(349)):function(){return!1}[e(320)](e(321)+e(312)).apply(e(311)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Zn=Gn;function Gn(n,t){const e=$n();return(Gn=function(n,t){return e[n-=466]})(n,t)}!function(n,t){const e=Gn,r=$n();for(;;)try{if(321520===parseInt(e(484))/1+-parseInt(e(488))/2+-parseInt(e(483))/3*(parseInt(e(505))/4)+parseInt(e(501))/5+parseInt(e(466))/6+parseInt(e(508))/7*(-parseInt(e(503))/8)+parseInt(e(480))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(493)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(){const n=["console","return (function() ","isArray","Preset must be one of: ","apply","bind","environment","test","debu","mapping","warn","stateObject","829675ZrtkgL","Failed to load environment map: ","24bJidUD","value","9908JuyRRG","isColor","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","1266643mejlwS","__proto__","2856246zbOcqf","length",'{}.constructor("return this")( )',"function *\\( *\\)","texture","background","gger","constructor","error","string","while (true) {}","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setPath","3172005kiyERQ","input","counter","123yJtQHw","147584rYKOQs","backgroundBlurriness","init","action","352162jDKHiu"];return($n=function(){return n})()}!function(){Wn(this,(function(){const n=Gn,t=new RegExp(n(469)),e=new RegExp(n(478),"i"),r=qn(n(486));t.test(r+"chain")&&e[n(496)](r+n(481))?qn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(493)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Vn(void 0,(function(){const n=Gn;let t;try{t=Function(n(490)+n(468)+");")()}catch(o){t=window}const e=t[n(489)]=t[n(489)]||{},r=["log",n(499),"info",n(474),"exception","table","trace"];for(let i=0;i<r.length;i++){const t=Vn[n(473)].prototype.bind(Vn),o=r[i],a=e[o]||t;t[n(509)]=Vn.bind(Vn),t.toString=a[n(477)][n(494)](a),e[o]=t}}))();const Yn=Zn(507);function qn(n){function t(n){const e=Gn;if(typeof n===e(475))return function(n){}[e(473)](e(476)).apply(e(482));1!==(""+n/n)[e(467)]||n%20==0?function(){return!0}[e(473)](e(497)+"gger").call(e(487)):function(){return!1}[e(473)](e(497)+e(472))[e(493)](e(500)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Qn(n,t){const e=nt();return(Qn=function(n,t){return e[n-=284]})(n,t)}const Xn=Qn;!function(n,t){const e=Qn,r=nt();for(;;)try{if(460284===-parseInt(e(307))/1+parseInt(e(312))/2+parseInt(e(321))/3+parseInt(e(297))/4+parseInt(e(323))/5+-parseInt(e(318))/6+parseInt(e(298))/7*(-parseInt(e(301))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(332)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jn(this,(function(){const n=Qn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=et("init");t[n(319)](r+n(320))&&e[n(319)](r+n(292))?et():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nt(){const n=["virtualScene","664136KmOQJd","gger","background","length","dispose","1342180uXCSOi","resolution","log","string","isArray","call","2660538cuhTou","test","chain","1183911XghmMx","exception","3922705oaCzvz","update","envSence","bind","magFilter","environment","generateMipmaps","toString","action","apply","default","table","minFilter","$slots","texture","console","stateObject","near","input","symbol","debu","far","useDefaultScene","3271140tDvJac","3850735wVXFsT","constructor","counter","16QIJoEa","while (true) {}","component","value","type"];return(nt=function(){return n})()}Kn(void 0,(function(){const n=Qn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(289)]=t[n(289)]||{},r=[n(314),"warn","info","error",n(322),n(285),"trace"];for(let o=0;o<r.length;o++){const t=Kn[n(299)].prototype.bind(Kn),i=r[o],a=e[i]||t;t.__proto__=Kn[n(326)](Kn),t[n(330)]=a[n(330)][n(326)](a),e[i]=t}}))();const tt=en({__name:Xn(303),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=J(null),x=null;const b=J(null);rn((()=>{var n,t;const e=Qn;null==(n=b[e(304)])||n.destructor(),null==(t=y[e(304)])||t.dispose()}));const{onBeforeLoop:I}=q();let S=1;I((()=>{const n=Qn;x&&b[n(304)]&&y[n(304)]&&(i.frames===1/0||S<i.frames)&&(i[n(296)]?x[n(324)](s[n(304)],u.value):x.update(s[n(304)],fn(b.value[n(306)])),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Zn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=X(n);K(n,(()=>{o()}));const l=J(null),h=nn((()=>Array[e(491)](c.value))),v=nn((()=>h[e(504)]?f:Q));return K([c,s],(async([n,t])=>{const r=e;if(n&&n[r(467)]>0&&!(null==i?void 0:i[r(504)])){try{l.value=await Y(v[r(504)],h[r(504)]?[...tn(n)]:tn(n),(n=>{t&&n[r(479)](tn(t))}))}catch(o){throw new Error(r(502)+o)}l.value&&(l[r(504)].mapping=h[r(504)]?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r.value&&n&&(r[t(504)][t(495)]=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r[i(504)]){let e=(null==t?void 0:t[i(504)])?t[i(504)][i(470)]:o,a=r.value[i(471)];!(null==a?void 0:a[i(506)])&&(a=void 0),r[i(504)][i(471)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a[e(504)]),(n=>{const t=e;r[t(504)]&&n&&(r.value[t(485)]=n)}),{immediate:!0}),K((()=>null==i?void 0:i[e(504)]),(async n=>{const t=e;if(n&&n in Ln){const e=Yn,i=Ln[n];try{l[t(504)]=await Y(Q,i,(n=>{e&&n[t(479)](e)}))}catch(r){throw new Error(t(502)+r)}l.value&&l.value&&(l[t(504)][t(498)]=d),o()}else if(n&&!(n in Ln))throw new Error(t(492)+Object.keys(Ln).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u.value[t(328)]=n[t(288)],i[t(309)]&&(u[t(304)][t(309)]=n[t(288)])):(u[t(304)][t(328)]=w[t(304)],i[t(309)]&&(u[t(304)][t(309)]=w[t(304)]))};K(w,(n=>{y.value&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:On});const R=()=>{var n;const t=Qn;null==(n=y[t(304)])||n[t(311)](),y.value=new v(i[t(313)]),x=new m(i[t(291)],i[t(295)],y[t(304)]),i.useDefaultScene?(y[t(304)].texture.type=g,y[t(304)][t(288)][t(329)]=!1,y[t(304)][t(288)][t(286)]=_,y[t(304)].texture[t(327)]=_):y[t(304)][t(288)][t(305)]=h,M(y[t(304)])};return K((()=>an()[e(284)]),(n=>{var t,r;const o=e;n&&(!y[o(304)]||y[o(304)][o(288)][o(305)]!==h)&&(l=n(),Array[o(316)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(305)])!==o(293))?R():(null==(r=y.value)||r[o(311)](),y[o(304)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(304)]=w,K((()=>i.useDefaultScene),(n=>{y.value&&R()})),(n,t)=>{const r=e;return tn(y)?(cn(),sn("TresEnvSence",{key:0,ref_key:r(325),ref:b},[un(n[r(287)],"default")],512)):ln("",!0)}}});function et(n){function t(n){const e=Qn;if(typeof n===e(315))return function(n){}[e(299)](e(302)).apply(e(300));1!==(""+n/n)[e(310)]||n%20==0?function(){return!0}.constructor(e(294)+"gger")[e(317)](e(331)):function(){return!1}[e(299)](e(294)+e(308))[e(332)](e(290)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=ct;!function(n,t){const e=ct,r=it();for(;;)try{if(734982===parseInt(e(157))/1*(parseInt(e(138))/2)+parseInt(e(134))/3*(-parseInt(e(148))/4)+parseInt(e(159))/5*(-parseInt(e(124))/6)+-parseInt(e(131))/7+-parseInt(e(122))/8+-parseInt(e(118))/9*(parseInt(e(156))/10)+parseInt(e(142))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function it(){const n=["return (function() ",'{}.constructor("return this")( )',"material","error","intensity","circle","rect","702vxIklB","gger","warn","TresPlaneGeometry","5935496eFkXST","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6WQYwSP","prototype","exception","length","ring","debu","input","2253482CZZPum","test","needsUpdate","3MyKKGD","toString","init","map","52Fprflq","toneMapped","TresMeshBasicMaterial","table","43902540JlcJwv","info","from","multiplyScalar","action","__proto__","2759348cEzWkS","console","TresRingGeometry","value","counter","apply","stateObject","chain","80660ppUgKb","20633vroflX","color","7048840lDrqWp","bind","constructor"];return(it=function(){return n})()}!function(){ot(this,(function(){const n=ct,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(123),"i"),r=dt(n(136));t[n(132)](r+n(155))&&e[n(132)](r+n(130))?dt():r("0")}))()}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ct(n,t){const e=it();return(ct=function(n,t){return e[n-=112]})(n,t)}at(void 0,(function(){const n=ct;let t;try{t=Function(n(162)+n(112)+");")()}catch(o){t=window}const e=t[n(149)]=t[n(149)]||{},r=["log",n(120),n(143),n(114),n(126),n(141),"trace"];for(let i=0;i<r[n(127)];i++){const t=at[n(161)][n(125)][n(160)](at),o=r[i],a=e[o]||t;t[n(147)]=at.bind(at),t.toString=a[n(135)].bind(a),e[o]=t}}))();const st={key:0,args:[0,1,64]},ut={key:1,args:[.5,1,64]},lt={key:2},ft=[rt(139),"map","side","color"],pt=en({__name:"index",props:{args:{default:null},from:{default:rt(117)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=rt,e=n,r=J();return pn((()=>{const n=ct;r[n(151)]&&(r[n(151)][n(158)].multiplyScalar(e[n(115)]),r.value[n(133)]=!0)})),K((()=>e[t(158)]),(n=>{const o=t;r[o(151)]&&(r.value.color.set(n),r[o(151)][o(158)][o(145)](e[o(115)]),r[o(151)][o(133)]=!0)})),dn((()=>{})),(n,o)=>{const i=t;return cn(),sn("TresMesh",null,[e[i(144)]===i(116)?(cn(),sn(i(150),st)):e.from===i(128)?(cn(),sn("TresRingGeometry",ut)):e[i(144)]===i(117)?(cn(),sn(i(121),lt)):(cn(),hn(e[i(144)],{key:3,args:e})),vn(i(140),{ref_key:i(113),ref:r,toneMapped:n[i(139)],map:n[i(137)],side:tn(x),color:n.color},null,8,ft)])}}});function dt(n){function t(n){const e=ct;if("string"==typeof n)return function(n){}[e(161)]("while (true) {}")[e(153)](e(152));1!==(""+n/n)[e(127)]||n%20==0?function(){return!0}[e(161)](e(129)+e(119)).call(e(146)):function(){return!1}[e(161)](e(129)+e(119))[e(153)](e(154)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=mt,r=vt();for(;;)try{if(814799===parseInt(e(403))/1+-parseInt(e(365))/2*(parseInt(e(396))/3)+parseInt(e(368))/4*(parseInt(e(383))/5)+-parseInt(e(364))/6*(parseInt(e(379))/7)+parseInt(e(363))/8+parseInt(e(384))/9*(-parseInt(e(393))/10)+-parseInt(e(373))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(386)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(){const n=["dispose","console","action","bind","13633422uypqaD",'{}.constructor("return this")( )',"function *\\( *\\)","exception","width","warn","24983NawAsz","prototype","toString","counter","1615FjeRab","9ipZcar","return (function() ","apply","info","__proto__","debu","value","trace","constructor","544470nyvTho","height","string","885YPXWwd","length","depthTexture","format","setRenderTarget","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1206169ceIiNr","gger","type","while (true) {}","clear","test","5232784WQCGVy","852bnUBMo","2146cIvBCs","table","chain","13272jaHhpd"];return(vt=function(){return n})()}function mt(n,t){const e=vt();return(mt=function(n,t){return e[n-=361]})(n,t)}!function(){ht(this,(function(){const n=mt,t=new RegExp(n(375)),e=new RegExp(n(402),"i"),r=yt("init");t[n(362)](r+n(367))&&e[n(362)](r+"input")?yt():r("0")}))()}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(386)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _t(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?X(n):X(gn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return pn((()=>{var n;const a=mt;null==(n=t[a(390)])||n[a(369)](),t[a(390)]=new b((null==r?void 0:r[a(390)])||p[a(377)][a(390)],(null==e?void 0:e[a(390)])||p[a(394)][a(390)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(390)])),(null==i?void 0:i[a(390)])&&(t.value.depthTexture=new S((null==r?void 0:r[a(390)])||p.width.value,(null==e?void 0:e[a(390)])||p.height[a(390)]),t[a(390)].depthTexture[a(399)]=w,t[a(390)][a(398)][a(405)]=M)})),s((()=>{const n=mt;(null==a?void 0:a[n(390)])&&(l[n(390)][n(400)](fn(t[n(390)])),l[n(390)][n(361)](),l[n(390)].render(fn(f.value),fn(u[n(390)])),l[n(390)][n(400)](null))})),_n((()=>{var n;null==(n=t[mt(390)])||n.dispose()})),t}function yt(n){function t(n){const e=mt;if(typeof n===e(395))return function(n){}[e(392)](e(406))[e(386)](e(382));1!==(""+n/n)[e(397)]||n%20==0?function(){return!0}[e(392)](e(389)+e(404)).call(e(371)):function(){return!1}.constructor(e(389)+"gger").apply(e(401)),t(++n)}try{if(n)return t;t(0)}catch(e){}}gt(void 0,(function(){const n=mt;let t;try{t=Function(n(385)+n(374)+");")()}catch(o){t=window}const e=t.console=t[n(370)]||{},r=["log",n(378),n(387),"error",n(376),n(366),n(391)];for(let i=0;i<r.length;i++){const t=gt[n(392)][n(380)].bind(gt),o=r[i],a=e[o]||t;t[n(388)]=gt[n(372)](gt),t[n(381)]=a[n(381)][n(372)](a),e[o]=t}}))();const xt=wt;!function(n,t){const e=wt,r=It();for(;;)try{if(115746===parseInt(e(259))/1+-parseInt(e(265))/2*(-parseInt(e(268))/3)+-parseInt(e(277))/4*(parseInt(e(296))/5)+-parseInt(e(264))/6*(parseInt(e(255))/7)+-parseInt(e(269))/8*(parseInt(e(294))/9)+parseInt(e(298))/10+parseInt(e(284))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[wt(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(){const n=["toString","TresMeshTransmissionMaterial","bind","trace","2985444bCYwQS","function *\\( *\\)","side","debu","material","table","traverse","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","8451kJaIhi","log","3695AkLThe","gger","844960YNHHtx","stateObject","backside","chain","envMapIntensity","counter","apply","init","return (function() ","setRenderTarget","1104992FkxhFG","buffer","texture","prototype","73643wHypDL","length","background","error","fboResolution","6GwSrbW","194NjpaBN","toneMapping","test","1227FvTXBj","1144zHSMtl","backsideThickness","thickness","console","render","isMesh","input","string","332MEZxMm","while (true) {}","value"];return(It=function(){return n})()}!function(){bt(this,(function(){const n=wt,t=new RegExp(n(285)),e=new RegExp(n(292),"i"),r=At(n(252));t[n(267)](r+n(301))&&e[n(267)](r+n(275))?At():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function wt(n,t){const e=It();return(wt=function(n,t){return e[n-=249]})(n,t)}St(void 0,(function(){const n=wt,t=function(){const n=wt;let t;try{t=Function(n(253)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(272)]=t[n(272)]||{},r=[n(295),"warn",n(291),n(262),"exception",n(289),n(283)];for(let o=0;o<r[n(260)];o++){const t=St[n(293)][n(258)][n(282)](St),i=r[o],a=e[i]||t;t.__proto__=St.bind(St),t[n(280)]=a.toString.bind(a),e[i]=t}}))();const Mt=[xt(256),xt(286)],Rt=en({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=yn(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=q(),p=_t({width:u[e(263)],height:u[e(263)],isLoop:!1}),d=_t({width:u[e(263)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(279)]=function(n,t){const e=wt;let r;return n[e(290)]((n=>{const o=e;n[o(274)]&&n[o(288)]&&n[o(288)].uuid===t&&(r=n)})),r}(i[n(279)],r[n(279)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(279)].time=n,r[t(279)][t(256)]===d.value[t(257)]&&s[t(279)]&&(m=a[t(279)][t(266)],h=i[t(279)][t(261)],v=r[t(279)][t(249)],g=s[t(279)][t(288)][t(286)],s[t(279)].material=l,u[t(300)]&&(a[t(279)][t(254)](p.value),a[t(279)][t(273)](i[t(279)],c.value),s[t(279)][t(288)]=r.value,s[t(279)].material.thickness=u[t(270)],s[t(279)][t(288)].buffer=p.value[t(257)],s[t(279)][t(288)][t(286)]=R,s[t(279)][t(288)][t(249)]=0),a.value[t(254)](d[t(279)]),a[t(279)][t(273)](i[t(279)],c[t(279)]),s[t(279)][t(288)].buffer=d[t(279)][t(257)],s[t(279)].material=r[t(279)],s.value[t(288)][t(271)]=u[t(271)],s[t(279)][t(288)][t(286)]=g,s[t(279)][t(288)].envMapIntensity=v,i.value[t(261)]=h,a[t(279)][t(254)](null),a[t(279)][t(266)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return cn(),sn(o(281),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:tn(d)[o(257)],side:tn(x)},null,8,Mt)}}});function At(n){function t(n){const e=wt;if(typeof n===e(276))return function(n){}.constructor(e(278))[e(251)](e(250));1!==(""+n/n).length||n%20==0?function(){return!0}[e(293)](e(287)+e(297)).call("action"):function(){return!1}[e(293)](e(287)+e(297)).apply(e(299)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=Tt;function Tt(n,t){const e=Pt();return(Tt=function(n,t){return e[n-=369]})(n,t)}!function(n,t){const e=Tt,r=Pt();for(;;)try{if(152725===parseInt(e(421))/1*(parseInt(e(397))/2)+-parseInt(e(391))/3+-parseInt(e(419))/4*(-parseInt(e(426))/5)+parseInt(e(376))/6*(parseInt(e(393))/7)+-parseInt(e(405))/8*(-parseInt(e(380))/9)+-parseInt(e(423))/10*(parseInt(e(418))/11)+-parseInt(e(389))/12*(parseInt(e(427))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Tt,t=new RegExp(n(398)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ot(n(369));t[n(409)](r+n(371))&&e[n(409)](r+n(373))?Ot():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(420)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pt(){const n=["front","identity","TresGroup","test","default","disable","debu","string","action","outer","table","max","90805emicIc","121960hFnCGd","apply","1789LjpfNB","call","230jVHjJs","error","index","40nTNsRg","166491dQeGia","gger","precise","init","bind","chain","disableX","input","toString","while (true) {}","1440WYqfYK","disableY","info","__proto__","18PwYLnm","exception","stateObject","top","constructor","inner","trace","left","console","252UzwJkZ","warn","526074weznbX","getCenter","8631ASHOSk","length","return (function() ","$slots","106nzYDXV","function *\\( *\\)","getBoundingSphere","min","right","gref","counter","value","608952yzTXJq"];return(Pt=function(){return n})()}Dt(void 0,(function(){const n=Tt;let t;try{t=Function(n(395)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(388)]=t[n(388)]||{},r=["log",n(390),n(378),n(424),n(381),n(416),n(386)];for(let i=0;i<r[n(394)];i++){const t=Dt[n(384)].prototype.bind(Dt),o=r[i],a=e[o]||t;t[n(379)]=Dt[n(370)](Dt),t[n(374)]=a[n(374)][n(370)](a),e[o]=t}}))();const Ct=en({__name:Et(425),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=Tt;if(!r[n(404)])return;if(!o.value)return;r[n(404)].matrixWorld[n(407)]();const e=(new A).setFromObject(o[n(404)],t[n(429)]),i=new E,a=new T,c=e[n(417)].x-e[n(400)].x,s=e.max.y-e[n(400)].y,u=e.max.z-e[n(400)].z;e[n(392)](i),e[n(399)](a);const l=t[n(383)]?s/2:t.bottom?-s/2:0,f=t[n(387)]?-c/2:t[n(401)]?c/2:0,p=t[n(406)]?u/2:t.back?-u/2:0;r[n(404)].position.set(t[n(411)]||t[n(372)]?0:-i.x+f,t[n(411)]||t[n(377)]?0:-i.y+l,t[n(411)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Tt;return cn(),sn("TresGroup",{ref_key:i(402),ref:e},[vn(i(408),{ref_key:i(415),ref:r},[vn("TresGroup",{ref_key:i(385),ref:o},[un(n[i(396)],i(410))],512)],512)],512)}}});function Ot(n){function t(n){const e=Tt;if(typeof n===e(413))return function(n){}[e(384)](e(375)).apply(e(403));1!==(""+n/n)[e(394)]||n%20==0?function(){return!0}[e(384)](e(412)+e(428))[e(422)](e(414)):function(){return!1}[e(384)](e(412)+e(428))[e(420)](e(382)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bt=Nt;!function(n,t){const e=Nt,r=Lt();for(;;)try{if(361409===parseInt(e(254))/1+-parseInt(e(229))/2+-parseInt(e(227))/3+-parseInt(e(276))/4*(parseInt(e(251))/5)+parseInt(e(269))/6*(parseInt(e(250))/7)+parseInt(e(244))/8+parseInt(e(268))/9*(parseInt(e(275))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Nt,t=new RegExp(n(260)),e=new RegExp(n(249),"i"),r=Zt(n(277));t.test(r+n(261))&&e[n(236)](r+"input")?Zt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(248)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Nt,t=function(){const n=Nt;let t;try{t=Function(n(231)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(246)]=t[n(246)]||{},r=["log","warn",n(255),n(263),"exception",n(252),"trace"];for(let o=0;o<r[n(258)];o++){const t=kt[n(262)][n(240)][n(267)](kt),i=r[o],a=e[i]||t;t[n(271)]=kt[n(267)](kt),t[n(230)]=a[n(230)][n(267)](a),e[i]=t}}))();const jt=[Bt(234)],Ut=[Bt(234)];function Nt(n,t){const e=Lt();return(Nt=function(n,t){return e[n-=225]})(n,t)}function Lt(){const n=["576426ijzuhN","update","1012070DpoHAM","toString","return (function() ","primitive","while (true) {}","object","resolution","test","group","default","params","prototype","add","gger","causticsOnly","3174312jBcCjg","worldRadius","console","backsideIOR","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","42MJfmkO","16475LCzMvm","table","set","152840Wjbjct","info","far","helper","length","TresGroup","function *\\( *\\)","chain","constructor","error","index","ior","stateObject","bind","1020060iJeKoj","667482AeqYeM","debu","__proto__","value","intensity","color","30apQEXl","604zWOwUj","init","#ffffff","$slots","lightSource","action"];return(Lt=function(){return n})()}const Ht=en({__name:Bt(264),props:{color:{default:Bt(278)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Bt,e=n,{renderer:r}=V(),o=Rn(r[t(272)],{frames:1/0,resolution:e[t(235)],worldRadius:e[t(245)]});o[t(239)].backside=!0;const i=yn(null);K(i,(n=>{const e=t;n&&o.scene[e(241)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(228)]()})),pn((()=>{const n=t;e[n(274)]&&o[n(239)][n(274)][n(253)](e.color),e.ior&&(o[n(239)].ior=e[n(265)]),e[n(247)]&&(o[n(239)][n(247)]=e[n(247)]),e[n(256)]&&(o[n(239)][n(256)]=e[n(256)]),e[n(245)]&&(o[n(239)][n(245)]=e.worldRadius),e[n(273)]&&(o[n(239)][n(273)]=e[n(273)])})),K((()=>e[t(243)]),(n=>{const e=t;o[e(239)][e(243)]=n})),K((()=>e[t(225)]),(n=>{const e=t;n&&o.params.lightSource instanceof E&&o[e(239)].lightSource[e(253)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(bn,null,[vn(r(259),{ref_key:"group",ref:i},[un(n[r(279)],r(238))],512),vn(r(232),{object:tn(o)[r(237)],position:[0,.003,0]},null,8,jt),vn(r(232),{object:tn(o)[r(257)],visible:!1},null,8,Ut)],64)}}});function Zt(n){function t(n){const e=Nt;if("string"==typeof n)return function(n){}.constructor(e(233))[e(248)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(262)](e(270)+"gger").call(e(226)):function(){return!1}[e(262)](e(270)+e(242)).apply(e(266)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Gt(n,t){const e=Yt();return(Gt=function(n,t){return e[n-=102]})(n,t)}!function(n,t){const e=Gt,r=Yt();for(;;)try{if(443171===parseInt(e(129))/1*(-parseInt(e(148))/2)+parseInt(e(126))/3+parseInt(e(107))/4+parseInt(e(137))/5+-parseInt(e(124))/6+-parseInt(e(150))/7+parseInt(e(139))/8*(parseInt(e(119))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(155)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wt(this,(function(){const n=Gt,t=new RegExp(n(156)),e=new RegExp(n(114),"i"),r=qt(n(115));t[n(142)](r+n(132))&&e[n(142)](r+n(127))?qt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(155)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();$t(void 0,(function(){const n=Gt;let t;try{t=Function(n(143)+n(147)+");")()}catch(o){t=window}const e=t.console=t[n(113)]||{},r=["log",n(120),n(152),n(151),n(141),n(133),n(136)];for(let i=0;i<r[n(140)];i++){const t=$t[n(111)][n(134)][n(117)]($t),o=r[i],a=e[o]||t;t[n(145)]=$t[n(117)]($t),t[n(131)]=a[n(131)].bind(a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=z.shadowmap_pars_fragment;return z[r(135)]=D[r(154)][r(135)][r(112)](r(125),r(104)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(105)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(109)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(138)+e+r(144)).replace(r(106),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{z[r(135)]=o,function(n,t,e){const r=Gt;t[r(123)]((t=>{const e=r;t[e(146)]&&(Array[e(121)](t[e(146)])?t[e(146)][e(103)]((t=>{const r=e;n[r(157)][r(102)](t),t[r(108)]()})):(n.properties.remove(t[e(146)]),t.material[e(108)]()))})),n[r(152)][r(116)].length=0,n[r(118)](t,e)}(n,t,e)}};function Yt(){const n=["stateObject","ShaderChunk","apply","function *\\( *\\)","properties","remove","forEach","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","#if defined( SHADOWMAP_TYPE_PCF )","271344ORVtkh","dispose","; i++) {\n        vogelSample = vogelDiskSample(j, ","counter","constructor","replace","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","programs","bind","compile","182277SFXcIh","warn","isArray","debu","traverse","2619978eBAxHH","#ifdef USE_SHADOWMAP","2303517WWXPZJ","input","gger","806998GfurkV","action","toString","chain","table","prototype","shadowmap_pars_fragment","trace","347085lyYwOM","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","608sBYTMd","length","exception","test","return (function() ",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","__proto__","material",'{}.constructor("return this")( )',"2GxjJjv","while (true) {}","5302416BlyBJs","error","info"];return(Yt=function(){return n})()}function qt(n){function t(n){const e=Gt;if("string"==typeof n)return function(n){}.constructor(e(149))[e(155)](e(110));1!==(""+n/n).length||n%20==0?function(){return!0}[e(111)](e(122)+e(128)).call(e(130)):function(){return!1}.constructor(e(122)+e(128)).apply(e(153)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=Xt;function Xt(n,t){const e=Jt();return(Xt=function(n,t){return e[n-=112]})(n,t)}function Jt(){const n=["304NHrlZC","counter","dispose","while (true) {}","3011407AHQeiS","2467130bdRxDt","return (function() ","input","call","constructor","apply","1146643BaPMUK","index","debu","function *\\( *\\)","error","action","prototype","exception","warn","48096zljCAu","console","string",'{}.constructor("return this")( )',"480372Ecieyy","value","log","table","bind","length","info","test","material","8JxjIIw","gger","toString","6012900GUAHRF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4838295hbGgXl"];return(Jt=function(){return n})()}!function(n,t){const e=Xt,r=Jt();for(;;)try{if(680544===parseInt(e(147))/1+-parseInt(e(141))/2+-parseInt(e(117))/3*(parseInt(e(136))/4)+parseInt(e(135))/5+-parseInt(e(121))/6+parseInt(e(140))/7*(parseInt(e(130))/8)+parseInt(e(133))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=Xt,t=new RegExp(n(150)),e=new RegExp(n(134),"i"),r=ee("init");t[n(128)](r+"chain")&&e[n(128)](r+n(143))?ee():r("0")}))()}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(146)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ne(void 0,(function(){const n=Xt;let t;try{t=Function(n(142)+n(120)+");")()}catch(o){t=window}const e=t[n(118)]=t[n(118)]||{},r=[n(123),n(116),n(127),n(112),n(115),n(124),"trace"];for(let i=0;i<r[n(126)];i++){const t=ne.constructor[n(114)][n(125)](ne),o=r[i],a=e[o]||t;t.__proto__=ne[n(125)](ne),t[n(132)]=a[n(132)][n(125)](a),e[o]=t}}))();const te=en({__name:Qt(148),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(122)],o[t(122)],e[t(122)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o.value.traverse((n=>{const e=t;n instanceof l&&n[e(129)][e(138)]()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function ee(n){function t(n){const e=Xt;if(typeof n===e(119))return function(n){}[e(145)](e(139))[e(146)](e(137));1!==(""+n/n)[e(126)]||n%20==0?function(){return!0}[e(145)]("debu"+e(131))[e(144)](e(113)):function(){return!1}[e(145)](e(149)+e(131))[e(146)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const re=ie;!function(n,t){const e=ie,r=ce();for(;;)try{if(354840===parseInt(e(241))/1+parseInt(e(239))/2*(-parseInt(e(261))/3)+parseInt(e(231))/4*(parseInt(e(233))/5)+parseInt(e(266))/6*(-parseInt(e(264))/7)+-parseInt(e(238))/8*(-parseInt(e(269))/9)+-parseInt(e(258))/10*(-parseInt(e(260))/11)+-parseInt(e(274))/12*(parseInt(e(236))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(249)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(n,t){const e=ce();return(ie=function(n,t){return e[n-=229]})(n,t)}!function(){oe(this,(function(){const n=ie,t=new RegExp(n(280)),e=new RegExp(n(268),"i"),r=le(n(235));t[n(230)](r+n(272))&&e[n(230)](r+n(271))?le():r("0")}))()}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(249)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ce(){const n=['{}.constructor("return this")( )',"string","value","uniforms","1210280sxTRED","debu","55xgDxsF","66126GsefvI","multiplyScalar","resolution","217UEPRlw","info","31314fiRmIb","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2807181VeYQvQ",">\n        }","input","chain","while (true) {}","12XtAQMj","setResolution","length","exception","toneMapped","prototype","function *\\( *\\)","set","toString","stateObject","return (function() ","warn","test","4CYTUbp","gger","1208360RWaXTI","colorspace_fragment","init","7658807netyrf","encodings_fragment","8hUiWhk","18OArCRO","__proto__","145425WaXRBa","constructor","console","replace","action","bind","table","setTexelSize","apply","trace","kernel","call","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"];return(ce=function(){return n})()}ae(void 0,(function(){const n=ie;let t;try{t=Function(n(284)+n(254)+");")()}catch(o){t=window}const e=t.console=t[n(243)]||{},r=[n(267),n(229),n(265),"error",n(277),n(247),n(250)];for(let i=0;i<r[n(276)];i++){const t=ae[n(242)][n(279)][n(246)](ae),o=r[i],a=e[o]||t;t[n(240)]=ae.bind(ae),t[n(282)]=a[n(282)][n(246)](a),e[o]=t}}))();const se=parseInt(F[re(244)](/\D+/g,""));class ue extends P{constructor(n=new O){const t=re;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(253)+t(se>=154?234:237)+t(270),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:B,depthWrite:!1,depthTest:!1}),this[t(278)]=!1,this[t(248)](n.x,n.y),this[t(251)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=re;this[e(257)].texelSize.value[e(281)](n,t),this[e(257)].halfTexelSize[e(256)][e(281)](n,t)[e(262)](.5)}[re(275)](n){const t=re;this[t(257)][t(263)][t(256)].copy(n)}}function le(n){function t(n){const e=ie;if(typeof n===e(255))return function(n){}.constructor(e(273))[e(249)]("counter");1!==(""+n/n)[e(276)]||n%20==0?function(){return!0}.constructor(e(259)+"gger")[e(252)](e(245)):function(){return!1}[e(242)](e(259)+e(232))[e(249)](e(283)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const fe=he;!function(n,t){const e=he,r=ve();for(;;)try{if(929120===-parseInt(e(168))/1*(parseInt(e(192))/2)+-parseInt(e(216))/3+-parseInt(e(196))/4+parseInt(e(194))/5+-parseInt(e(186))/6+parseInt(e(187))/7*(-parseInt(e(212))/8)+parseInt(e(182))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pe(this,(function(){const n=he,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(177),"i"),r=ge("init");t[n(219)](r+"chain")&&e[n(219)](r+"input")?ge():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function he(n,t){const e=ve();return(he=function(n,t){return e[n-=167]})(n,t)}function ve(){const n=["position","table","value","2435583AQYnSf","log","toString","test","screen","defines","1732379CTKEcm","info","convolutionMaterial","USE_DEPTH","bind","setAttribute","setResolution","gger","render","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uniforms","maxDepthThreshold","warn","length","53580654fodgTP","frustumCulled","depthTexture","renderTargetB","6887646epyGaS","3143XwMjxY","renderToScreen","depthBuffer","setRenderTarget","kernel","2lQSuYa","scene","485945vnaCqR","texture","2811248HzHSTq","console","return (function() ","prototype","minDepthThreshold","renderTargetA","stateObject","depthToBlurRatioBias","error","constructor","clone","call","counter","string","inputBuffer","trace","12944FoGjdL"];return(ve=function(){return n})()}de(void 0,(function(){const n=he,t=function(){const n=he;let t;try{t=Function(n(198)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(197)]=t.console||{},r=[n(217),n(180),n(169),n(204),"exception",n(214),n(211)];for(let o=0;o<r[n(181)];o++){const t=de[n(205)][n(199)][n(172)](de),i=r[o],a=e[i]||t;t.__proto__=de[n(172)](de),t[n(218)]=a[n(218)][n(172)](a),e[i]=t}}))();class me{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this.renderToScreen=!1,this[c(201)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(185)]=this[c(201)][c(206)](),this[c(170)]=new ue,this[c(170)].setTexelSize(1/t,1/e),this[c(170)][c(174)](new O(t,e)),this[c(193)]=new u,this.camera=new k,this[c(170)].uniforms[c(200)][c(215)]=r,this[c(170)].uniforms[c(179)].value=o,this.convolutionMaterial[c(178)].depthScale.value=i,this.convolutionMaterial[c(178)][c(203)].value=a,this[c(170)][c(167)][c(171)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p.setAttribute(c(213),new U(s,3)),p[c(173)]("uv",new U(f,2)),this[c(220)]=new l(p,this[c(170)]),this[c(220)][c(183)]=!1,this.scene.add(this[c(220)])}[fe(176)](n,t,e){const r=fe,o=this.scene,i=this.camera,a=this[r(201)],c=this[r(185)],s=this[r(170)],u=s[r(178)];u[r(189)][r(215)]=t[r(184)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(181)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(215)]=l[p],u[r(210)].value=h[r(195)],n[r(190)](f),n.render(o,i),h=f;u[r(191)][r(215)]=l[p],u.inputBuffer[r(215)]=h[r(195)],n.setRenderTarget(this[r(188)]?null:e),n[r(176)](o,i)}}function ge(n){function t(n){const e=he;if(typeof n===e(209))return function(n){}[e(205)]("while (true) {}").apply(e(208));1!==(""+n/n)[e(181)]||n%20==0?function(){return!0}[e(205)]("debu"+e(175))[e(207)]("action"):function(){return!1}[e(205)]("debu"+e(175)).apply(e(202)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var _e=Ie;!function(n,t){for(var e=Ie,r=xe();;)try{if(439087===-parseInt(e(349))/1*(-parseInt(e(364))/2)+parseInt(e(343))/3+-parseInt(e(310))/4+parseInt(e(322))/5*(parseInt(e(340))/6)+parseInt(e(367))/7+-parseInt(e(305))/8+-parseInt(e(311))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xe(){var n=["_mixContrast","while (true) {}","vertexShader","distortionMap","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","distortion","console","apply","hasBlur","2vVawKl","toString","_depthToBlurRatioBias","6137586OKcAwM","_mirror","prototype","depthToBlurRatioBias","#include <emissivemap_fragment>","_hasBlur","value","function *\\( *\\)","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","warn","mirror","gger","_blurStrength","textureMatrix","4717496NEDzEh","uniforms","_tDiffuse","mixBlur","bind","1640968HMyYLC","12960378xRhEQm","_mixBlur","_textureMatrix","_distortion","trace","onBeforeCompile","_maxDepthThreshold","tDiffuse","_depthScale","stateObject","tDiffuseBlur","3832845fVtiuX","init","__proto__","maxDepthThreshold","mixStrength","tDepth","defines","return (function() ","minDepthThreshold","fragmentShader","depthScale","counter","replace","mixContrast","_distortionMap","#include <project_vertex>","length","constructor","6UpgfRd","exception","error","2140545yxEbtv","call","_tDiffuseBlur","setValues","_minDepthThreshold","USE_UV","522176CfIwGU","debu",'{}.constructor("return this")( )',"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_tDepth","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      "];return(xe=function(){return n})()}!function(){ye(this,(function(){var n=Ie,t=new RegExp(n(374)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=we(n(323));t.test(r+"chain")&&e.test(r+"input")?we():r("0")}))()}();var be=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(n,t){var e=xe();return(Ie=function(n,t){return e[n-=304]})(n,t)}be(void 0,(function(){for(var n=Ie,t=function(){var n,t=Ie;try{n=Function(t(329)+t(351)+");")()}catch(e){n=window}return n}(),e=t[n(361)]=t.console||{},r=["log",n(376),"info",n(342),n(341),"table",n(315)],o=0;o<r[n(338)];o++){var i=be[n(339)][n(369)][n(309)](be),a=r[o],c=e[a]||i;i[n(324)]=be[n(309)](be),i[n(365)]=c.toString[n(309)](c),e[a]=i}}))();class Se extends N{constructor(n={}){var t=Ie;super(n),this[t(353)]={value:null},this[t(336)]={value:null},this[t(307)]={value:null},this._tDiffuseBlur={value:null},this[t(313)]={value:null},this[t(372)]={value:!1},this._mirror={value:0},this._mixBlur={value:0},this[t(379)]={value:.5},this[t(347)]={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this[t(314)]={value:1},this[t(355)]={value:1},this[t(346)](n)}[_e(316)](n){var t,e=_e;!(null==(t=n[e(328)])?void 0:t.USE_UV)&&(n[e(328)][e(348)]=""),n[e(306)].hasBlur=this[e(372)],n[e(306)][e(318)]=this[e(307)],n[e(306)][e(327)]=this[e(353)],n[e(306)][e(358)]=this[e(336)],n[e(306)][e(321)]=this._tDiffuseBlur,n[e(306)][e(304)]=this[e(313)],n[e(306)][e(377)]=this[e(368)],n.uniforms[e(308)]=this[e(312)],n.uniforms[e(326)]=this._blurStrength,n.uniforms[e(330)]=this[e(347)],n[e(306)].maxDepthThreshold=this[e(317)],n.uniforms[e(332)]=this[e(319)],n[e(306)].depthToBlurRatioBias=this._depthToBlurRatioBias,n[e(306)].distortion=this[e(314)],n[e(306)].mixContrast=this._mixContrast,n[e(357)]=e(359)+n[e(357)],n.vertexShader=n[e(357)][e(334)](e(337),e(352)),n[e(331)]=e(375)+n.fragmentShader,n[e(331)]=n[e(331)][e(334)](e(371),e(354))}get[_e(318)](){return this._tDiffuse.value}set tDiffuse(n){var t=_e;this._tDiffuse[t(373)]=n}get tDepth(){var n=_e;return this[n(353)][n(373)]}set[_e(327)](n){var t=_e;this[t(353)][t(373)]=n}get[_e(358)](){var n=_e;return this[n(336)][n(373)]}set[_e(358)](n){var t=_e;this._distortionMap[t(373)]=n}get[_e(321)](){return this[_e(345)].value}set[_e(321)](n){var t=_e;this[t(345)][t(373)]=n}get[_e(304)](){var n=_e;return this[n(313)][n(373)]}set[_e(304)](n){this[_e(313)].value=n}get[_e(363)](){var n=_e;return this[n(372)][n(373)]}set hasBlur(n){var t=_e;this._hasBlur[t(373)]=n}get mirror(){return this[_e(368)].value}set mirror(n){var t=_e;this[t(368)][t(373)]=n}get mixBlur(){var n=_e;return this[n(312)][n(373)]}set[_e(308)](n){var t=_e;this[t(312)][t(373)]=n}get mixStrength(){var n=_e;return this[n(379)][n(373)]}set[_e(326)](n){var t=_e;this[t(379)][t(373)]=n}get[_e(330)](){var n=_e;return this[n(347)][n(373)]}set[_e(330)](n){var t=_e;this[t(347)][t(373)]=n}get[_e(325)](){return this[_e(317)].value}set[_e(325)](n){var t=_e;this._maxDepthThreshold[t(373)]=n}get[_e(332)](){var n=_e;return this[n(319)][n(373)]}set[_e(332)](n){var t=_e;this[t(319)][t(373)]=n}get depthToBlurRatioBias(){var n=_e;return this[n(366)][n(373)]}set[_e(370)](n){var t=_e;this._depthToBlurRatioBias[t(373)]=n}get distortion(){var n=_e;return this[n(314)][n(373)]}set[_e(360)](n){this._distortion.value=n}get[_e(335)](){var n=_e;return this[n(355)][n(373)]}set[_e(335)](n){var t=_e;this[t(355)][t(373)]=n}}function we(n){function t(n){var e=Ie;if("string"==typeof n)return function(n){}.constructor(e(356)).apply(e(333));1!==(""+n/n)[e(338)]||n%20==0?function(){return!0}.constructor("debu"+e(378))[e(344)]("action"):function(){return!1}[e(339)](e(350)+"gger").apply(e(320)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Me=Re;function Re(n,t){const e=Ae();return(Re=function(n,t){return e[n-=377]})(n,t)}function Ae(){const n=["setFromMatrixPosition","autoClear","applyMatrix4","matrixWorldInverse","far","warn","depth-to-blur-ratio-bias","matrixWorld","material","addScaledVector","table","rotationMatrix","distortionMap","log","defines-USE_BLUR","__proto__","extractRotation","8JIsnId","materialRef","call","multiplyScalar","position","lookAt","shadowMap","isMesh","apply","toString","trace","traverse","virtualCamera","uuid","t-depth","value","subVectors","gger","stateObject","negate","35eGlhGB","updateMatrixWorld","186414kboEzZ","enabled","t-diffuse","depth-scale","visible","copy","view","mix-contrast","assign",'{}.constructor("return this")( )',"return (function() ","constructor","setRenderTarget","bind","input","395613yiljlz","console","counter","12UhbGzR","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","defines-USE_DEPTH","reflectorWorldPosition","sign","add","textureMatrix","624352lAufjZ","reflectorOffset","defines-USE_DISTORTION","normal","cameraWorldPosition","clipPlane","1051984DAuNth","8701794lSLGuq","dispose","depthTexture","target","autoUpdate","min-depth-threshold","error","elements","t-diffuse-blur","length","set","max-depth-threshold","number","debu","prototype","4190340eicDcA","function *\\( *\\)","render","dot","setFromNormalAndCoplanarPoint","multiply","texture","reflect","29731120cROVhV","texture-matrix","projectionMatrix","reflectorPlane","lookAtPosition","test"];return(Ae=function(){return n})()}!function(n,t){const e=Re,r=Ae();for(;;)try{if(533124===parseInt(e(409))/1+parseInt(e(427))/2+parseInt(e(412))/3*(parseInt(e(421))/4)+parseInt(e(443))/5+parseInt(e(394))/6*(parseInt(e(392))/7)+parseInt(e(474))/8*(parseInt(e(428))/9)+-parseInt(e(451))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(380)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ee(this,(function(){const n=Re,t=new RegExp(n(444)),e=new RegExp(n(414),"i"),r=Pe("init");t[n(456)](r+n(413))&&e[n(456)](r+n(408))?Pe():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(380)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Te(void 0,(function(){const n=Re,t=function(){const n=Re;let t;try{t=Function(n(404)+n(403)+");")()}catch(e){t=window}return t}(),e=t[n(410)]=t[n(410)]||{},r=[n(470),n(462),"info",n(434),"exception",n(467),n(382)];for(let o=0;o<r[n(437)];o++){const t=Te[n(405)][n(442)][n(407)](Te),i=r[o],a=e[i]||t;t[n(472)]=Te[n(407)](Te),t[n(381)]=a.toString[n(407)](a),e[i]=t}}))();const ze=[Me(452),"mirror",Me(396),Me(386),Me(436),"has-blur","mix-strength",Me(433),Me(439),Me(397),Me(463),"distortion",Me(469),Me(401),Me(471),Me(416),Me(423)],De=en({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Me,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:R,extend:A}=V();A({MeshReflectorMaterial:Se});const T=yn(),z=yn(),D=yn(),P=yn(),C=nn((()=>{const n=Re;return typeof f[n(387)]===n(440)?[f[n(387)],f.value]:f[n(387)]})),O=nn((()=>C[r(387)][0]>0||C.value[1]>0)),B={reflectorPlane:new L,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new Z,view:new E,target:new E,q:new Z,virtualCamera:new G,textureMatrix:new H};pn((()=>{var n;const o=r;null==(n=T[o(387)])||n[o(449)][o(429)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(387)]=new b(i[o(387)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(387)],i[o(387)],w,M)},t(y,e(x)))),z[o(387)]=new b(i[o(387)],i[o(387)],f),D[o(387)]=new me({resolution:i[o(387)],width:C[o(387)][0],height:C[o(387)][1],minDepthThreshold:a[o(387)],maxDepthThreshold:s[o(387)],depthScale:u[o(387)],depthToBlurRatioBias:l[o(387)]}),P[o(387)]={mirror:p,textureMatrix:B[o(420)],mixBlur:d,tDiffuse:T[o(387)].texture,tDepth:T.value[o(430)],tDiffuseBlur:T[o(387)].texture,hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(387)],mixContrast:_,"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(387)]?"":void 0}}));const F=yn(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(F[t(387)]&&R.value&&T[t(387)]&&y[t(387)]))return;const e=function(n,t){const e=Re;let r;return n[e(383)]((n=>{const o=e;n[o(379)]&&n[o(465)]&&n[o(465)][o(385)]===t&&(r=n)})),r}(x[t(387)],F.value.uuid);if(!e)return;e[t(398)]=!1;const i=R[t(387)].xr[t(395)],a=R[t(387)][t(378)][t(432)];(function(n){var t,e;const r=Re;if(B[r(417)][r(457)](n[r(464)]),B[r(425)][r(457)](null==(t=y.value)?void 0:t[r(464)]),B[r(468)][r(473)](n[r(464)]),B[r(424)].set(0,0,1),B[r(424)][r(459)](B[r(468)]),B[r(417)][r(466)](B[r(424)],o[r(422)]),B[r(400)][r(388)](B[r(417)],B[r(425)]),B.view[r(446)](B[r(424)])>0)return;B[r(400)][r(450)](B.normal)[r(391)](),B.view[r(419)](B[r(417)]),B.rotationMatrix[r(473)](null==(e=y[r(387)])?void 0:e[r(464)]),B[r(455)][r(438)](0,0,-1),B.lookAtPosition[r(459)](B[r(468)]),B[r(455)][r(419)](B.cameraWorldPosition),B[r(431)][r(388)](B[r(417)],B.lookAtPosition),B[r(431)][r(450)](B.normal).negate(),B.target[r(419)](B[r(417)]),B.virtualCamera[r(478)][r(399)](B.view),B[r(384)].up[r(438)](0,1,0),B.virtualCamera.up.applyMatrix4(B[r(468)]),B[r(384)].up.reflect(B[r(424)]),B[r(384)][r(377)](B[r(431)]),B[r(384)][r(461)]=(null==y?void 0:y[r(387)])[r(461)],B[r(384)][r(393)](),B[r(384)].projectionMatrix[r(399)]((null==y?void 0:y[r(387)])[r(453)]),B[r(420)][r(438)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B[r(420)][r(448)](B[r(384)][r(453)]),B[r(420)][r(448)](B[r(384)][r(460)]),B[r(420)][r(448)](n[r(464)]),B[r(454)][r(447)](B[r(424)],B.reflectorWorldPosition),B[r(454)][r(459)](B[r(384)][r(460)]),B.clipPlane.set(B[r(454)][r(424)].x,B.reflectorPlane[r(424)].y,B.reflectorPlane[r(424)].z,B[r(454)].constant);const i=B[r(384)].projectionMatrix;B.q.x=(Math[r(418)](B[r(426)].x)+i.elements[8])/i.elements[0],B.q.y=(Math.sign(B[r(426)].y)+i[r(435)][9])/i[r(435)][5],B.q.z=-1,B.q.w=(1+i[r(435)][10])/i[r(435)][14],B[r(426)][r(477)](2/B[r(426)][r(446)](B.q)),i[r(435)][2]=B[r(426)].x,i[r(435)][6]=B[r(426)].y,i[r(435)][10]=B[r(426)].z+1,i[r(435)][14]=B[r(426)].w})(e),R[t(387)][t(378)][t(432)]=!1,R[t(387)][t(406)](T[t(387)]),R.value[t(458)]||R[t(387)].clear(),R[t(387)][t(445)](x[t(387)],B[t(384)]),null==(n=null==D?void 0:D.value)||n[t(445)](R.value,T.value,z[t(387)]),R[t(387)].xr[t(395)]=i,R[t(387)][t(378)].autoUpdate=a,e[t(398)]=!0,R[t(387)][t(406)](null)}));const j=In(),U=nn((()=>{const n=r,t={};return Object[n(402)](t,o),Object[n(402)](t,j[n(387)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(387)])||n[e(429)](),null==(t=null==z?void 0:z[e(387)])||t[e(429)]()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn("TresMeshReflectorMaterial",Sn({key:"key"+P[c(387)][c(471)]+P[c(387)][c(416)]+P[c(387)][c(423)],ref_key:c(475),ref:F},U[c(387)],{"texture-matrix":B[c(420)],mirror:tn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(449)],"t-depth":null==(o=T[c(387)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=z[c(387)])?void 0:i[c(449)],"has-blur":O[c(387)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":O[c(387)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,ze)}}});function Pe(n){function t(n){const e=Re;if("string"==typeof n)return function(n){}.constructor(e(415)).apply(e(411));1!==(""+n/n)[e(437)]||n%20==0?function(){return!0}[e(405)](e(441)+e(389))[e(476)]("action"):function(){return!1}.constructor("debu"+e(389)).apply(e(390)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Be,r=Fe();for(;;)try{if(339194===-parseInt(e(141))/1*(-parseInt(e(160))/2)+-parseInt(e(137))/3+parseInt(e(135))/4*(-parseInt(e(132))/5)+parseInt(e(168))/6+parseInt(e(175))/7+-parseInt(e(131))/8*(-parseInt(e(142))/9)+parseInt(e(153))/10*(-parseInt(e(146))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(159)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ce(this,(function(){const n=Be,t=new RegExp(n(144)),e=new RegExp(n(167),"i"),r=ke(n(174));t[n(162)](r+"chain")&&e[n(162)](r+n(133))?ke():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(159)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(n,t){const e=Fe();return(Be=function(n,t){return e[n-=131]})(n,t)}function Fe(){const n=["__proto__","string",'{}.constructor("return this")( )',"CubeCamera","action","apply","4UgDcix","console","test","type","update","error","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2145120bYSybj","length","return (function() ","texture","while (true) {}","debu","init","3462522SQcpTJ","8ZgmATT","20785zLvMlW","input","prototype","428JRvtXk","bind","1286589yUUlBU","background","call","gger","247063HWrqol","3886497wnAiOY","constructor","function *\\( *\\)","info","627ICZzgI","value","log","exception","table","fog","counter","99170uqNlcs"];return(Fe=function(){return n})()}function ke(n){function t(n){const e=Be;if(typeof n===e(155))return function(n){}[e(143)](e(172))[e(159)](e(152));1!==(""+n/n)[e(169)]||n%20==0?function(){return!0}[e(143)](e(173)+e(140))[e(139)](e(158)):function(){return!1}[e(143)]("debu"+e(140))[e(159)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=Be;let t;try{t=Function(n(170)+n(156)+");")()}catch(o){t=window}const e=t[n(161)]=t[n(161)]||{},r=[n(148),"warn",n(145),n(165),n(149),n(150),"trace"];for(let i=0;i<r[n(169)];i++){const t=Oe.constructor[n(134)][n(136)](Oe),o=r[i],a=e[o]||t;t[n(154)]=Oe[n(136)](Oe),t.toString=a.toString.bind(a),e[o]=t}}))();const je=Ne;!function(n,t){const e=Ne,r=He();for(;;)try{if(159639===-parseInt(e(242))/1+parseInt(e(234))/2+parseInt(e(241))/3*(parseInt(e(228))/4)+parseInt(e(236))/5*(parseInt(e(229))/6)+-parseInt(e(219))/7+-parseInt(e(231))/8*(parseInt(e(210))/9)+parseInt(e(202))/10*(parseInt(e(217))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ne(n,t){const e=He();return(Ne=function(n,t){return e[n-=197]})(n,t)}!function(){Ue(this,(function(){const n=Ne,t=new RegExp(n(222)),e=new RegExp(n(214),"i"),r=We(n(213));t[n(225)](r+n(237))&&e[n(225)](r+n(197))?We():r("0")}))()}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function He(){const n=["__proto__","8tTCqyS","gger","while (true) {}","91262chByDL","stateObject","419305QDUere","chain","texture","prototype","near","15BgCMRh","302774uSGckb","bind","input","rgRef","TresGroup","far","warn","110Ifwycv","apply","table","counter","index","resolution","value","constructor","1703745Xxevzx","debu","primitive","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","toString","445357LOlFOm","call","2201626loNsCp","exception","visible","function *\\( *\\)","$slots","info","test","envMap","string","178932UTPqeJ","18IxgTlJ"];return(He=function(){return n})()}Le(void 0,(function(){const n=Ne,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(215)]=t[n(215)]||{},r=["log",n(201),n(224),"error",n(220),n(204),"trace"];for(let o=0;o<r.length;o++){const t=Le.constructor[n(239)][n(243)](Le),i=r[o],a=e[i]||t;t[n(230)]=Le[n(243)](Le),t[n(216)]=a[n(216)][n(243)](a),e[i]=t}}))();const Ze=["object"],Ge=en({__name:je(206),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=je,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return K((()=>s),(n=>{var t;const e=Be;null==(t=c.value)||t[e(166)](),c[e(147)]=new v(n[e(147)]),c.value[e(171)][e(163)]=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{const r=Be;e&&(f[r(147)]=new(D[r(157)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;const t=Be;null==(n=c[t(147)])||n[t(166)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Be;p=a[t(147)][t(151)],d=a.value.background,a[t(147)][t(138)]=r||d,a[t(147)].fog=o||p,null==(n=f[t(147)])||n[t(164)](i[t(147)],a[t(147)]),a[t(147)][t(151)]=p,a[t(147)].background=d}}}({resolution:o[r(207)],near:o[r(240)],far:o[r(200)],envMap:o[r(226)],fog:o.fog}),{onBeforeLoop:s}=q();let u=0;const l=J(null);return s((()=>{const n=r;l.value&&(o.frames===1/0||u<o.frames)&&(l[n(208)][n(221)]=!1,c(),l[n(208)].visible=!0,u++)})),t({texture:null==(e=i[r(208)])?void 0:e[r(238)]}),(n,t)=>{const e=r;return cn(),sn(e(199),null,[vn(e(212),{object:tn(a)},null,8,Ze),vn(e(199),{ref_key:e(198),ref:l},[un(n[e(223)],"default")],512)])}}});function We(n){function t(n){const e=Ne;if(typeof n===e(227))return function(n){}[e(209)](e(233))[e(203)](e(205));1!==(""+n/n).length||n%20==0?function(){return!0}[e(209)](e(211)+e(232))[e(218)]("action"):function(){return!1}[e(209)](e(211)+e(232))[e(203)](e(235)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $e(){const n=["111260MWEXZb","MathUtils","init","test","ShaderMaterial","string","debu","prototype","constructor",'{}.constructor("return this")( )',"264852VOryIT","28CvZtRY","key","9399339QYfsYa","apply","counter","value","gger","forEach","call","return (function() ","error","4170170xnmzSH","table","info","assign","bind","trace","log","warn","10415656bQGHqV","uniforms","__proto__","console","length","reduce","7xxYAKC","toString","exception","12552903bSMqtL","57iEZWak","function *\\( *\\)","entries","10hWGCAB","32450OMMVuQ","input","clone"];return($e=function(){return n})()}function Ve(n,t){const e=$e();return(Ve=function(n,t){return e[n-=286]})(n,t)}!function(n,t){const e=Ve,r=$e();for(;;)try{if(655806===-parseInt(e(294))/1*(-parseInt(e(308))/2)+parseInt(e(290))/3*(parseInt(e(297))/4)+parseInt(e(319))/5+parseInt(e(307))/6+parseInt(e(286))/7*(-parseInt(e(327))/8)+parseInt(e(310))/9*(-parseInt(e(293))/10)+parseInt(e(289))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ye=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(311)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){const n=Ve,t=new RegExp(n(291)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Xe(n(299));t.test(r+"chain")&&e[n(300)](r+n(295))?Xe():r("0")}))()}();const qe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(311)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n,t,e,r){const o=Ve,i=class extends D[o(301)]{constructor(i={}){const a=o,s=Object[a(292)](n);super({uniforms:s[a(332)](((n,[t,e])=>{const r=W[a(296)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(309)]="",s[a(315)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(328)][n][a(313)],set:t=>this[a(328)][n][a(313)]=t}))),Object[a(322)](this,i),r&&r(this)}};return i[o(309)]=D[o(298)].generateUUID(),i}function Xe(n){function t(n){const e=Ve;if(typeof n===e(302))return function(n){}.constructor("while (true) {}")[e(311)](e(312));1!==(""+n/n)[e(331)]||n%20==0?function(){return!0}[e(305)](e(303)+e(314))[e(316)]("action"):function(){return!1}.constructor(e(303)+e(314))[e(311)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}qe(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(317)+n(306)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(330)]||{},r=[n(325),n(326),n(321),n(318),n(288),n(320),n(324)];for(let o=0;o<r.length;o++){const t=qe[n(305)][n(304)].bind(qe),i=r[o],a=e[i]||t;t[n(329)]=qe.bind(qe),t[n(287)]=a.toString[n(323)](a),e[i]=t}}))();var Je=ar;!function(n,t){for(var e=ar,r=tr();;)try{if(803885===parseInt(e(353))/1+parseInt(e(293))/2*(parseInt(e(343))/3)+parseInt(e(264))/4*(-parseInt(e(184))/5)+-parseInt(e(241))/6*(-parseInt(e(191))/7)+-parseInt(e(306))/8*(-parseInt(e(274))/9)+-parseInt(e(318))/10+-parseInt(e(348))/11*(-parseInt(e(311))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ar(247)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=ar,t=new RegExp(n(315)),e=new RegExp(n(257),"i"),r=Fr(n(312));t[n(313)](r+"chain")&&e[n(313)](r+"input")?Fr():r("0")}))()}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ar(247)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tr(){var n=["split","debu","clearcoatNormal",";\n  ","key","MeshMatcapMaterial","Set","emissive","ShaderChunk","setPrototypeOf","concat","uniforms","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","// #_CSM_#","defineProperties","symbol","10962AeQDhJ","\n            ","is not a constructor","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","update","6948073ftHDsb","\n    #include <color_fragment>\n    diffuseColor = ","create","csm_PointSize","this hasn't been initialised - super() hasn't been called","397421QryRoy","Super expression must either be null or a function","__proto__","clone","replace","csm_Metalness","default",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","roughness","counter","getOwnPropertyDescriptors","onBeforeCompile",". Shader cannot compile.","propertyIsEnumerable","();\n            // #_CSM_#\n          ","void main() {","Map","instanceID","includes","getOwnPropertySymbols","substring","push","\\$&","type","CustomShaderMaterial does not support RawShaderMaterial","get","2065lvbKoS","Material",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","undefined","csm_PositionRaw","find","csm_Clearcoat","49JRgvEA","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","toUpperCase","csm_DepthAlpha","constructor","MeshBasicMaterial","\n    gl_Position = ","assign","position","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","string","filter","defineProperty","patchMap","table","diffuse","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","done","writable","indexOf","needsUpdate","cacheHash","Derived constructors may only return object or undefined","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","cacheKey","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","_getCacheHash","csm_DiffuseColor","getOwnPropertyDescriptor","getPrototypeOf","set","lastIndexOf","_getPatchMapForMaterial","bind","iterator","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","_generateMaterial","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","call","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","normal","csm_Roughness","isArray","vertexShader","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","info","sham","function","trace","configurable","308094dehNZf","positionRaw","\n    gl_FragColor = ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","MeshToonMaterial","isAlreadyExtended","apply","next","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","@@toPrimitive must return a primitive value."," );\n    ","csm_Normal"," is not available in ","clearcoat",'{}.constructor("return this")( )',"__csm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#define IS_UNKNOWN;\n",", 1.0 );\n  ","object","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","csm_Bump","gger","9584ZmDhpJ","csm_AO","\n    \n            ","csm_main_","metalness","MeshPhongMaterial","customProgramCacheKey","depthAlpha","join","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","5548167vFdsTM","void ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","construct",'" is required to use output "',"keys","_patchShader","return (function() ","_getMaterialDefine","pointSize",";\n    ","\n    vec3 objectNormal = ","RawShaderMaterial","toString","value","MeshNormalMaterial","console","trim","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","142EaqSmN","log","generateUUID","error","\n    vec4 csm_internal_positionUnprojected = ","MeshStandardMaterial","enumerable","exception","MeshPhysicalMaterial","Arguments","material.clearcoatRoughness = ","MathUtils","@@iterator","8YNLEIy","clearcoatRoughness","baseMaterial","fragColor","length","12XhwEaI","init","test","forEach","function *\\( *\\)","entries","fragmentShader","4709710uRwwdM","#define IS_","prototype","\n    \n","bump","return","silent",'CSM: Property "',"action"];return(tr=function(){return n})()}function er(n){var t=ar,e=function(n,t){var e=ar;if(typeof n!==e(260)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t||e(359));if(typeof o!==e(260))return o;throw new TypeError(e(250))}return(t===e(201)?String:Number)(n)}(n,t(201));return typeof e===t(342)?e:String(e)}function rr(n,t,e){var r=ar;return(t=er(t))in n?Object[r(203)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function or(n,t){var e=ar,r=Object[e(279)](n);if(Object.getOwnPropertySymbols){var o=Object[e(177)](n);t&&(o=o[e(202)]((function(t){var r=e;return Object[r(219)](n,t)[r(299)]}))),r[e(179)][e(247)](r,o)}return r}function ir(n){for(var t=ar,e=1;e<arguments[t(310)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0)[t(314)]((function(t){rr(n,t,r[t])})):Object[t(363)]?Object[t(341)](n,Object[t(363)](r)):or(Object(r))[t(314)]((function(e){Object[t(203)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function ar(n,t){var e=tr();return(ar=function(n,t){return e[n-=170]})(n,t)}function cr(n,t){var e=ar;if(null==n)return{};var r,o,i=function(n,t){var e=ar;if(null==n)return{};var r,o,i={},a=Object[e(279)](n);for(o=0;o<a[e(310)];o++)r=a[o],t[e(210)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(177)]){var a=Object[e(177)](n);for(o=0;o<a[e(310)];o++)r=a[o],t[e(210)](r)>=0||Object.prototype[e(171)][e(229)](n,r)&&(i[r]=n[r])}return i}function sr(n,t){var e=ar;(null==t||t>n[e(310)])&&(t=n[e(310)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ur(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=ar,r=null==n?null:e(187)!=typeof Symbol&&n[Symbol[e(225)]]||n[e(305)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(248)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(229)](r))[e(208)])&&(s[e(179)](o.value),s[e(310)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(323)]&&(c=r[e(323)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ar;if(n){if(typeof n===e(201))return sr(n,t);var r=Object[e(320)][e(287)][e(229)](n).slice(8,-1);return"Object"===r&&n[e(195)]&&(r=n.constructor.name),r===e(174)||r===e(333)?Array.from(n):r===e(302)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(313)](r)?sr(n,t):void 0}}(n,t)||function(){throw new TypeError(ar(261))}()}function lr(n,t){for(var e=ar,r=0;r<t[e(310)];r++){var o=t[r];o[e(299)]=o[e(299)]||!1,o[e(240)]=!0,"value"in o&&(o[e(209)]=!0),Object[e(203)](n,er(o[e(331)]),o)}}function fr(n){if(void 0===n)throw new ReferenceError(ar(352));return n}function pr(n,t){var e=ar;return(pr=Object[e(336)]?Object[e(336)][e(224)]():function(n,t){return n[e(355)]=t,n})(n,t)}function dr(n){var t=ar;return(dr=Object[t(336)]?Object.getPrototypeOf[t(224)]():function(n){return n[t(355)]||Object.getPrototypeOf(n)})(n)}function hr(n){var t=function(){var n=ar;if(typeof Reflect===n(187)||!Reflect[n(277)])return!1;if(Reflect[n(277)][n(237)])return!1;if(typeof Proxy===n(238))return!0;try{return Boolean.prototype.valueOf[n(229)](Reflect[n(277)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ar,o=dr(n);if(t){var i=dr(this)[r(195)];e=Reflect[r(277)](o,arguments,i)}else e=o[r(247)](this,arguments);return function(n,t){var e=ar;if(t&&(typeof t===e(260)||typeof t===e(238)))return t;if(void 0!==t)throw new TypeError(e(213));return fr(n)}(this,e)}}nr(void 0,(function(){var n,t=ar;try{n=Function(t(281)+t(255)+");")()}catch(s){n=window}for(var e=n[t(290)]=n[t(290)]||{},r=[t(294),"warn",t(236),t(296),t(300),t(205),t(239)],o=0;o<r[t(310)];o++){var i=nr[t(195)][t(320)].bind(nr),a=r[o],c=e[a]||i;i[t(355)]=nr[t(224)](nr),i[t(287)]=c[t(287)][t(224)](c),e[a]=i}}))();var vr,mr,gr,_r={diffuse:Je(218),normal:Je(252),roughness:Je(232),metalness:Je(358),emissive:"csm_Emissive",ao:Je(265),bump:Je(262),clearcoat:Je(190),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:Je(351),fragColor:"csm_FragColor",depthAlpha:Je(194),position:"csm_Position",positionRaw:Je(188)},yr=(rr(vr={},"".concat(_r[Je(199)]),"*"),rr(vr,""[Je(337)](_r[Je(242)]),"*"),rr(vr,""[Je(337)](_r[Je(231)]),"*"),rr(vr,""[Je(337)](_r[Je(283)]),["PointsMaterial"]),rr(vr,""[Je(337)](_r[Je(206)]),"*"),rr(vr,""[Je(337)](_r[Je(309)]),"*"),rr(vr,""[Je(337)](_r[Je(334)]),["MeshStandardMaterial",Je(301)]),rr(vr,""[Je(337)](_r[Je(361)]),[Je(298),Je(301)]),rr(vr,""[Je(337)](_r[Je(268)]),[Je(298),Je(301)]),rr(vr,""[Je(337)](_r.ao),["MeshStandardMaterial",Je(301),Je(196),"MeshLambertMaterial",Je(269),"MeshToonMaterial"]),rr(vr,""[Je(337)](_r[Je(322)]),["MeshLambertMaterial",Je(332),Je(289),Je(269),Je(301),Je(298),Je(245),"ShadowMaterial"]),rr(vr,"".concat(_r[Je(271)]),["MeshDepthMaterial"]),rr(vr,""[Je(337)](_r[Je(254)]),["MeshPhysicalMaterial"]),rr(vr,""[Je(337)](_r[Je(307)]),[Je(301)]),rr(vr,""[Je(337)](_r.clearcoatNormal),[Je(301)]),vr),xr={"#include <lights_physical_fragment>":D[Je(335)].lights_physical_fragment},br=(rr(mr={},""[Je(337)](_r[Je(231)]),{"#include <beginnormal_vertex>":Je(285)[Je(337)](_r[Je(231)],Je(186))}),rr(mr,""[Je(337)](_r[Je(199)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[Je(337)](_r[Je(199)],Je(330))}),rr(mr,""[Je(337)](_r.positionRaw),{"#include <begin_vertex>":Je(297).concat(_r[Je(242)],Je(360))}),rr(mr,"".concat(_r.pointSize),{"gl_PointSize = size;":"\n    gl_PointSize = "[Je(337)](_r[Je(283)],Je(284))}),rr(mr,""[Je(337)](_r[Je(206)]),{"#include <color_fragment>":Je(349).concat(_r.diffuse,";\n  ")}),rr(mr,""[Je(337)](_r[Je(309)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[Je(337)](_r[Je(309)],Je(330))}),rr(mr,""[Je(337)](_r[Je(334)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = ".concat(_r.emissive,Je(284))}),rr(mr,""[Je(337)](_r[Je(361)]),{"#include <roughnessmap_fragment>":Je(273)[Je(337)](_r[Je(361)],Je(284))}),rr(mr,"".concat(_r.metalness),{"#include <metalnessmap_fragment>":Je(200)[Je(337)](_r[Je(268)],";\n    ")}),rr(mr,""[Je(337)](_r.ao),{"#include <aomap_fragment>":Je(207)[Je(337)](_r.ao,";\n    ")}),rr(mr,""[Je(337)](_r[Je(322)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ".concat(_r.bump," - (dot(")[Je(337)](_r[Je(322)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),rr(mr,"".concat(_r[Je(271)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(214).concat(_r[Je(271)],Je(251)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Je(230)[Je(337)](_r.depthAlpha,";\n    ")}),rr(mr,""[Je(337)](_r[Je(254)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Je(337)](_r.clearcoat,";")}),rr(mr,""[Je(337)](_r[Je(307)]),{"material.clearcoatRoughness = clearcoatRoughness;":Je(303)[Je(337)](_r.clearcoatRoughness,";")}),rr(mr,"".concat(_r.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Je(339)}),mr),Ir=(rr(gr={},""[Je(337)](_r[Je(199)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(292)[Je(337)](_r[Je(199)],Je(259))}),rr(gr,""[Je(337)](_r[Je(242)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(197).concat(_r[Je(199)],Je(330))}),rr(gr,""[Je(337)](_r.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(243).concat(_r[Je(206)],Je(330))}),rr(gr,""[Je(337)](_r.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(243)[Je(337)](_r[Je(309)],Je(330))}),gr),Sr={clearcoat:[_r.clearcoat,_r[Je(329)],_r[Je(307)]]},wr=Je(216),Mr=Je(192),Rr=Je(276),Ar=Je(249),Er=Je(276),Tr=Je(321),zr=["baseMaterial",Je(317),"vertexShader",Je(338),"patchMap",Je(215),Je(324)],Dr=function(n,t,e){var r=Je;return n[r(327)](t)[r(272)](e)},Pr=function(n,t){var e,r,o=Je;return new RegExp("\\b"[o(337)]((e=t,r=Je,e[r(357)](/[-\/\\^$*+?.()|[\]{}]/g,r(180))),"\\b"))[o(313)](n)};function Cr(n){return n?n[Je(357)](/\s/g,""):void 0}function Or(n){return n[Je(357)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Br=function(n){var t=Je;!function(n,t){var e=ar;if("function"!=typeof t&&null!==t)throw new TypeError(e(354));n[e(320)]=Object[e(350)](t&&t[e(320)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(203)](n,"prototype",{writable:!1}),t&&pr(n,t)}(c,n);var e,r,o,i,a=hr(c);function c(n){var t,e,r,o,i,s=ar,u=n[s(308)],l=n[s(317)],f=n.vertexShader,p=n.uniforms,d=n[s(204)],h=n[s(215)],v=n.silent,m=cr(n,zr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e.message[t(210)](t(345))>=0)return!1}return!0}(u)?(e=u,Object[s(198)](e,m)):e=new u(m),e.type===s(286))throw new Error(s(182));(function(n,t){var e=Je;e(310),Object.assign(n,t);var r=Object[e(220)](t);Object[e(316)](Object[e(363)](r)).filter((function(n){var t=e,r=typeof n[1][t(183)]===t(238),o="function"==typeof n[1][t(221)],i=typeof n[1][t(288)]===t(238),a=n[0]===t(195);return(r||o||i)&&!a}))[e(314)]((function(t){var r=e;typeof n[t[0]]!==r(238)&&Object[r(203)](n,t[0],t[1])}))})(fr(t=a.call(this)),e),t[s(256)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(304)][s(295)](),type:e[s(181)],isAlreadyExtended:(r=e[s(364)],o=Je,i=r.toString()[o(291)](),!(0===i[o(178)](i[o(210)]("{")+1,i[o(222)]("}")).trim()[o(310)])),cacheHash:"",silent:v},t.uniforms=ir(ir({},t[s(338)]||{}),p||{});var g=t[s(256)],_=g[s(317)],y=g[s(234)],x=t[s(338)];return t[s(256)][s(212)]=t[s(217)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(347),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(338)]||this[n(338)],Object.assign(this[n(256)],e);var r=this[n(256)],o=r[n(317)],i=r[n(234)],a=this[n(338)],c=this[n(217)]();this.__csm[n(212)]=c,this[n(227)](o,i,a)}},{key:t(356),value:function(){var n=t,e={baseMaterial:this[n(256)][n(308)],fragmentShader:this.__csm[n(317)],vertexShader:this[n(256)][n(234)],uniforms:this[n(338)],silent:this[n(256)].silent,patchMap:this.__csm[n(204)],cacheKey:this[n(256)][n(215)]},r=new this.constructor(e);return Object[n(198)](this,r),r}},{key:t(217),value:function(){var n=t,e=this[n(256)],r=e[n(317)],o=e[n(234)],i=this[n(338)],a=[Cr(r),Cr(o),i].filter((function(n){return void 0!==n}));return a[n(310)]>0?An(a,{excludeValues:!0}):this[n(270)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(338)]=r||{},this[o(270)]=function(){return i[o(256)].cacheHash};var a=function(t){var r=o;try{var a=i[r(282)]();if(n){var c=i[r(280)](Or(n),t.fragmentShader,!0);t[r(317)]=a+c}if(e){var s=i[r(280)](Or(e),t.vertexShader);t[r(234)]="#define IS_VERTEX;\n"+s,t[r(234)]=a+t.vertexShader}t.uniforms=ir(ir({},t[r(338)]),i.uniforms),i[r(338)]=t[r(338)]}catch(u){console.error(u)}};if(this[o(256)][o(246)]){var c=this.onBeforeCompile;this[o(364)]=function(n,t){c(n,t),a(n)}}else this[o(364)]=a;this[o(211)]=!0}},{key:t(280),value:function(n,e,r){var o=t,i=this,a=e,c=ir(ir({},this[o(223)]()),this[o(256)].patchMap);Object[o(316)](Sr)[o(314)]((function(t){var e=o,r=ur(t,2),a=r[0],c=r[1][e(189)]((function(t){return Pr(n,t)}));if(c&&!i[a])throw new Error(e(325)[e(337)](a,e(278))[e(337)](c,'". Shader cannot compile.'))})),Object[o(316)](xr)[o(314)]((function(n){var t=ur(n,2),e=t[0],r=t[1];a=Dr(a,e,r)})),Object[o(279)](c)[o(314)]((function(t){var e=o;Object[e(279)](c[t])[e(314)]((function(r){var o=e,s=yr[t],u=i.__csm[o(181)];if("*"===t||Pr(n,t)){if(!(!s||Array[o(233)](s)&&s.includes(u)||"*"===s))throw new Error("CSM: ".concat(t,o(253))[o(337)](u,o(170)));a=Dr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(267)+this.__csm[o(175)].replace(/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(275)[o(337)](d,"()")),v=n[o(176)]("void main()"),m=a[o(176)](o(340));return v&&(m&&this.__csm[o(246)]?(a=a.replace(o(173),o(344)[o(337)](h,"\n            \n            void main() {\n          ")),s=a,u=o(340),l=o(344)[o(337)](d,o(172)),p=s[(f=Je)(222)](u),a=-1===p?s:s[f(178)](0,p)+l+s[f(178)](p+u.length)):a=a[o(357)]("void main() {",o(346).concat(r?Er:Rr,o(244))[o(337)](wr,o(266))[o(337)](h,o(228))[o(337)](Mr,o(235))[o(337)](r?Tr:Ar,o(226)).concat(d,"();\n              // #_CSM_#\n          "))),a}},{key:t(282),value:function(){var n=t,e=this.__csm[n(181)];return e?n(319)[n(337)](e[n(193)](),";\n"):n(258)}},{key:t(223),value:function(){var n=t;return"ShaderMaterial"===this[n(256)][n(181)]?Ir:br}}],i=ar,r&&lr(e[i(320)],r),o&&lr(e,o),Object[i(203)](e,i(320),{writable:!1}),c}(D[Je(185)]);function Fr(n){function t(n){var e=ar;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(247)](e(362));1!==(""+n/n)[e(310)]||n%20==0?function(){return!0}.constructor(e(328)+e(263)).call(e(326)):function(){return!1}.constructor(e(328)+"gger")[e(247)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kr=Hr;!function(n,t){const e=Hr,r=Lr();for(;;)try{if(832870===parseInt(e(495))/1+parseInt(e(494))/2*(parseInt(e(497))/3)+parseInt(e(508))/4*(parseInt(e(473))/5)+parseInt(e(496))/6+parseInt(e(506))/7+-parseInt(e(470))/8+-parseInt(e(480))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){const n=Hr,t=new RegExp(n(503)),e=new RegExp(n(484),"i"),r=Gr(n(478));t[n(467)](r+n(468))&&e[n(467)](r+n(488))?Gr():r("0")}))()}();const Ur=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hr(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ur(void 0,(function(){const n=Hr;let t;try{t=Function(n(486)+n(475)+");")()}catch(o){t=window}const e=t[n(481)]=t[n(481)]||{},r=["log",n(493),n(487),n(504),"exception",n(502),n(507)];for(let i=0;i<r.length;i++){const t=Ur.constructor.prototype[n(498)](Ur),o=r[i],a=e[o]||t;t.__proto__=Ur.bind(Ur),t.toString=a.toString[n(498)](a),e[o]=t}}))();const Nr=[kr(490)];function Lr(){const n=["apply","\n\t\t\t","\n      ","constructor","test","chain","roughness","11401120pQitgz","primitive","length","12945FRUPcP","metalness",'{}.constructor("return this")( )',"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","setStyle","init","action","25974684fJsNcJ","console","counter","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","return (function() ","info","input","clearcoat","object","call","while (true) {}","warn","2JlyGhU","1472754tTkkzC","4954134SBzHwa","3094227qQtzBY","bind","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","clearcoatRoughness","gger","table","function *\\( *\\)","error","#ff00fc","5831021wrAEVU","trace","1516lsgAJH","color"];return(Lr=function(){return n})()}function Hr(n,t){const e=Lr();return(Hr=function(n,t){return e[n-=465]})(n,t)}const Zr=en({__name:"index",props:{color:{default:kr(505)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=kr,e=n,r={baseMaterial:$,metalness:e[t(474)],roughness:e[t(469)],clearcoat:e[t(489)],clearcoatRoughness:e[t(500)],color:e[t(509)],vertexShader:t(499),fragmentShader:t(511)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(465)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(476)},o=new Br(r);return pn((()=>{const n=t;o[n(509)][n(477)](e[n(509)]),o[n(474)]=e[n(474)],o[n(469)]=e[n(469)],o.clearcoat=e[n(489)],o[n(500)]=e[n(500)]})),(n,e)=>{const r=t;return cn(),sn(r(471),{object:tn(o)},null,8,Nr)}}});function Gr(n){function t(n){const e=Hr;if(typeof n===e(483))return function(n){}[e(466)](e(492)).apply(e(482));1!==(""+n/n)[e(472)]||n%20==0?function(){return!0}[e(466)]("debu"+e(501))[e(491)](e(479)):function(){return!1}.constructor(e(485)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Yr,r=$r();;)try{if(280012===parseInt(e(502))/1*(parseInt(e(505))/2)+parseInt(e(475))/3+-parseInt(e(497))/4+-parseInt(e(485))/5+-parseInt(e(482))/6+-parseInt(e(484))/7*(-parseInt(e(478))/8)+parseInt(e(481))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Yr(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $r(){var n=["gger","66406LWYUmb","prototype","length","bind","init","action","while (true) {}","370680GzVxkO","console","constructor","728CIAami","function *\\( *\\)","apply","7308468gdcUNE","2724726rOcYpu","debu","40369RrGcvS","1418300DHfWAS","stateObject","return (function() ",'{}.constructor("return this")( )',"test","string","table","exception","input","warn","trace","info","2168900NgQUOp","log","counter","call","chain","3MqkLHy","toString"];return($r=function(){return n})()}!function(){Wr(this,(function(){var n=Yr,t=new RegExp(n(479)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qr(n(509));t[n(489)](r+n(501))&&e[n(489)](r+n(493))?qr():r("0")}))()}();var Vr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Yr(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yr(n,t){var e=$r();return(Yr=function(n,t){return e[n-=474]})(n,t)}function qr(n){function t(n){var e=Yr;if(typeof n===e(490))return function(n){}[e(477)](e(474))[e(480)](e(499));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(483)+e(504))[e(500)](e(510)):function(){return!1}[e(477)](e(483)+"gger")[e(480)](e(486)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Vr(void 0,(function(){for(var n=Yr,t=function(){var n,t=Yr;try{n=Function(t(487)+t(488)+");")()}catch(e){n=window}return n}(),e=t[n(476)]=t[n(476)]||{},r=[n(498),n(494),n(496),"error",n(492),n(491),n(495)],o=0;o<r[n(507)];o++){var i=Vr[n(477)][n(506)].bind(Vr),a=r[o],c=e[a]||i;i.__proto__=Vr.bind(Vr),i.toString=c[n(503)][n(508)](c),e[a]=i}}))();export{Qe as C,Zr as _,tt as a,pt as b,Rt as c,Ct as d,Ht as e,te as f,Ge as g,De as h,_t as u};

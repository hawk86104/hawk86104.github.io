import{m as t,e as n,D as e,a as o,t as r}from"./@tresjs.DRasrl5q1753844948006.js";import"./index.DtElXmdU1753844948006.js";import{T as s,au as c,c as i,bg as a,a as u,M as W,S as l,V as d,B as f,l as p,cm as m}from"./three.EZPPomHU1753844948006.js";import{P as h}from"./tweakpane.C0HtAJSg1753844948006.js";import{I as g,C as x,N as v,c as S,d as k,a as C}from"./three-mesh-bvh.KW_QT8I91753844948006.js";import{d as y,aa as b,b as _,a2 as R,G as w,o as j,F as P,I as G,u as O,r as Q,h as V,j as M,f as J,e as N,m as Z,a5 as I}from"./@vue.BzMISRrV1753844948006.js";import{_ as B}from"./randomLoading.vue_vue_type_script_setup_true_lang.CBTFF8Iy1753844948006.js";import"./postprocessing.BwliAN0R1753844948006.js";import"./@vueuse.KQ9lc16w1753844948006.js";import"./utils.CgAXGypF1753844948006.js";import"./@fesjs.7Dni6qN91753844948006.js";import"./vue-router.Dji__t9R1753844948006.js";import"./lodash-es.C7pWAXPe1753844948006.js";import"./@qlin.q6OWdsQV1753844948006.js";import"./pinia.Dcj6ab2m1753844948006.js";import"./@babel.BPq7uOAK1753844948006.js";import"./@floating-ui.BFjFSAYt1753844948006.js";import"./@juggle.CcBCnTIR1753844948006.js";import"./index.B-tGt_gs1753844948006.js";import"./three-mesh-ui.module.KgnnshJi1753844948006.js";import"./starLoading.SDxyeyNj1753844948006.js";import"./cssLoaders.DcPQ8xDG1753844948006.js";import"./bubbleLoading.DmrHvP-O1753844948006.js";import"./yangyangLoading.DrLINyO81753844948006.js";function K(t,n){const e=D();return K=function(n,o){let r=e[n-=299];if(void 0===K.giLenb){var s=function(t){let n="",e="",o=n+s;for(let r,s,c=0,i=0;s=t.charAt(i++);~s&&(r=c%4?64*r+s:s,c++%4)?n+=o.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*c&6)):c:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=n.length;r<s;r++)e+="%"+("00"+n.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)};const n=function(t,n){let e,o,r=[],c=0,i="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)c=(c+r[o]+n.charCodeAt(o%n.length))%256,e=r[o],r[o]=r[c],r[c]=e;o=0,c=0;for(let s=0;s<t.length;s++)o=(o+1)%256,c=(c+r[o])%256,e=r[o],r[o]=r[c],r[c]=e,i+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[c])%256]);return i};K.vKYofh=n,t=arguments,K.giLenb=!0}const c=n+e[0],i=t[c];if(i)r=i;else{if(void 0===K.dcUZCd){const t=function(t){this.KoiwRD=t,this.oQSsGt=[1,0,0],this.TakasN=function(){return"newState"},this.QhpNJE="\\w+ *\\(\\) *{\\w+ *",this.PWyhVV="['|\"].+['|\"];? *}"};t.prototype.mrOwXB=function(){const t=new RegExp(this.QhpNJE+this.PWyhVV).test(this.TakasN.toString())?--this.oQSsGt[1]:--this.oQSsGt[0];return this.EVUYdX(t)},t.prototype.EVUYdX=function(t){return Boolean(~t)?this.hMzPzV(this.KoiwRD):t},t.prototype.hMzPzV=function(t){for(let n=0,e=this.oQSsGt.length;n<e;n++)this.oQSsGt.push(Math.round(Math.random())),e=this.oQSsGt.length;return t(this.oQSsGt[0])},new t(K).mrOwXB(),K.dcUZCd=!0}r=K.vKYofh(r,o),t[c]=r}return r},K(t,n)}!function(){function t(t,n,e,o,r){return K(t- -583,o)}function n(t,n,e,o,r){return K(o- -227,t)}const e=D();function o(t,n,e,o,r){return K(t- -160,n)}function r(t,n,e,o,r){return K(t- -27,o)}for(;;)try{if(481426===parseInt(t(-163,0,0,"KGJV"))/1+parseInt(o(255,"Vrog"))/2+-parseInt(n("rwJc",0,0,153))/3*(parseInt(t(-258,0,0,"1JW["))/4)+-parseInt(n("axvD",0,0,143))/5*(parseInt(K(1205-862,"KGJV"))/6)+-parseInt(r(307,0,0,"1JW["))/7*(-parseInt(r(326,0,0,"pDN6"))/8)+parseInt(o(237,"#Yr("))/9+parseInt(r(325,0,0,"yXvD"))/10)break;e.push(e.shift())}catch(s){e.push(e.shift())}}();const L=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return K(t-922,e)}function r(t,n,e,o,r){return K(o- -608,e)}function s(t,n,e,o,r){return K(o-823,e)}if(r(0,0,"ErV&",-287)!==s(0,0,"*s)e",1135)){const o=t?function(){function t(t,n,e,o,s){return r(0,0,e,t-476)}function o(t,n,e,o,r){return s(0,0,r,n- -108)}if(t(190,0,"1JW[")===o(0,1051,0,0,"pDN6")){if(e){if(o(0,1123,0,0,"KGJV")!==t(182,0,"Gi6n")){const n=_0xbe17bb[t(225,0,"gM[*")](_0x2b76df,arguments);return _0x3fd893=null,n}{const t=e[(c="Vrog",i=1084,r(0,0,c,i-1310))](n,arguments);return e=null,t}}}else{const t=_0x3c6047("return (function() "+o(0,1069,0,0,"wHrk")+");");_0x5c91f8=t()}var c,i}:function(){};return t=!1,o}var c,i;_0x28ffc0[o(1345,0,"4IYr")]=-1,"touch"===_0xd97d68[o(1261,0,"u4Q!")]&&(_0x117a91[(c="gM[*",i=367,K(i- -23,c))]=!1)}}()(void 0,(function(){function t(t,n,e,o,r){return K(n- -380,o)}return L[(o="*jGn",r=1304,K(r-895,o))]()[t(0,-79,0,"yXvD")]("(((.+)+)+)+$").toString()[t(0,-5,0,"%@(x")](L)[(n=-439,e="(Tnw",K(n- -807,e))](t(0,-54,0,"4IYr"));var n,e,o,r}));L();const X=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return K(t- -337,n)}if("YIhrp"!==o(-33,"5Cv7")){const r=t?function(){function t(t,n,e,r,s){return o(n-1200,r)}function r(t,n,e,r,s){return o(r-274,s)}function s(t,n,e,r,s){return o(r-167,s)}if(e){if(o(618-638,"36](")!==r(0,0,0,311,"!gCi"))return _0x2e106b[r(0,0,0,356,"&&ZP")]()[s(0,0,0,222,"*s)e")](r(0,0,0,309,"pBSp")).toString()[s(0,0,0,192,"!gCi")](_0x35ab68)[t(0,1208,0,"ErV&")](t(0,1285,0,"KruF"));{const o=e[t(0,1223,0,"[gok")](n,arguments);return e=null,o}}}:function(){};return t=!1,r}{const t=_0x393710[o(18,"3A&S")](_0x280571,arguments);return _0x2f4699=null,t}}}();X(void 0,(function(){function t(t,n,e,o,r){return K(n- -944,r)}let n;function e(t,n,e,o,r){return K(t- -950,e)}function o(t,n,e,o,r){return K(n- -666,t)}function r(t,n,e,o,r){return K(t- -502,e)}try{if("PgPtL"!==t(0,-565,0,0,"uVo]")){n=Function(i(56,"!Xxr",46,101,63)+t(0,-588,0,0,"3A&S")+");")()}else _0x4d553b[i(56,"Gi6n",31,9,-16)]=!1}catch(a){if("BWcnU"!==e(-529,0,"[gok")){const t=_0x5a1873?function(){if(_0x5eff07){const o=_0x9bd631[(t=389,n="WO[c",e(t-951,0,n))](_0x582ae9,arguments);return _0x20ecf0=null,o}var t,n}:function(){};return _0x2ef8d3=!1,t}n=window}const s=n.console=n[o("f$%i",-317)]||{},c=[e(-552,0,"UqSP"),i(161,"Vrog",135),"info",o("(Tnw",-302),e(-544,0,"H]RD"),t(0,-567,0,0,"rwJc"),o("KGJV",-308)];function i(t,n,e,o,r){return K(e- -282,n)}for(let u=0;u<c[i(0,"uVo]",102)];u++)if(e(-613,0,"3Rqj")===r(-192,0,"%@(x")){if(_0x46409c){const t=_0x454ad9.apply(_0x263114,arguments);return _0x3e7724=null,t}}else{const n=X[r(-106,0,"3%LO")].prototype[o("!gCi",-359)](X),i=c[u],a=s[i]||n;n[e(-548,0,"Gi6n")]=X[t(0,-617,0,0,"*)Zm")](X),n[e(-585,0,"pBSp")]=a[r(-133,0,"axvD")][o(")U0Q",-267)](a),s[i]=n}}))();const T=(t,n,e,o,r,c)=>{function i(t,n,e,o,r){return K(e- -306,r)}function a(t,n,e,o,r){return K(e- -312,t)}function u(t,n,e,o,r){return K(e-561,t)}var W,l;window.addEventListener(a("yXvD",0,-6),(e=>{function o(t,n,e,o,r){return a(e,0,r-961)}function r(t,n,e,o,r){return a(t,0,r-1262)}function s(t,n,e,o,r){return a(t,0,n-918)}if(s("*)Zm",1001)!==s("i(zm",915))t.x=e[r("3A&S",0,0,0,1250)]/window[s("gM[*",929)]*2-1,t.y=-e[s("uVo]",917)]/window.innerHeight*2+1,n[r("4k2%",0,0,0,1343)]=!0;else{let t;try{t=_0x1ba96a('return (function() {}.constructor("return this")( ));')()}catch(l){t=_0x552a6e}const n=t.console=t[r("L2E5",0,0,0,1285)]||{},e=["log",s("pDN6",909),o(0,0,"pDN6",0,965),"error",s("x7Cz",989),s("wHrk",924),s("ErV&",987)];for(let s=0;s<e[(u="pBSp",W=225,a(u,0,W-161))];s++){const t=_0xac05a7.constructor[o(0,0,"!gCi",0,1050)][o(0,0,"H]RD",0,1059)](_0x229d37),u=e[s],W=n[u]||t;t[o(0,0,"rwJc",0,989)]=_0x4921f6[o(0,0,"gM[*",0,1038)](_0x37c068),t[r("&&ZP",0,0,0,1369)]=W[o(0,0,"wHrk",0,987)][(c=979,i="u4Q!",a(i,0,c-992))](W),n[u]=t}}var c,i,u,W})),window[i(0,0,-4,0,"Vrog")](i(0,0,40,0,"Gi6n"),(W=>{function l(t,n,e,o,r){return u(e,0,t- -895)}function d(t,n,e,o,r){return i(0,0,n-30,0,r)}function f(t,n,e,o,r){return i(0,0,o- -333,0,r)}function p(t,n,e,o,r){return a(r,0,e-650)}if(l(71,0,"axvD")!==d(0,137,0,0,"H]RD")){const t=_0x3d96a6?function(){if(_0x4b4834){const t=_0x2958d4.apply(_0x187c52,arguments);return _0x310130=null,t}}:function(){};return _0x5e0bb5=!1,t}{t.x=W[l(51,0,"*s)e")]/window.innerWidth*2-1,t.y=-W[l(-1,0,"#Yr(")]/window[l(-4,0,"u4Q!")]*2+1,o.value=W[f(0,0,0,-278,"*jGn")];const i=new(s[d(0,39,0,0,"WO[c")]);i[p(0,0,685,0,"uHZf")](t,e[d(0,118,0,0,"(&iV")]),i[(m="gM[*",h=285,u(m,0,h- -624))]=!0;const a=i[f(0,0,0,-331,"3A&S")](r[f(0,0,0,-266,"*)Zm")],!0);n[d(0,114,0,0,"gM[*")]=!0,c[p(0,0,738,0,"L2E5")]=0===a[d(0,140,0,0,"Vrog")]}var m,h}),!0),window[(W="suYc",l=357,K(l- -50,W))]("pointerup",(t=>{function e(t,n,e,o,r){return u(n,0,t-206)}function r(t,n,e,o,r){return u(e,0,n-376)}function s(t,n,e,o,r){return u(t,0,e- -1283)}function c(t,n,e,o,r){return i(0,0,o- -189,0,t)}function a(t,n,e,o,r){return u(n,0,o- -87)}if(e(1109,"%@(x")===s("(&iV",0,-391)){if(o[c("f$%i",0,0,-175)]=-1,t[e(1072,"5yXn")]===c("*s)e",0,0,-92))if(a(0,"gM[*",0,841)===r(0,1296,"f$%i"))n[s("x7Cz",0,-344)]=!1;else{const t=_0x46c933.constructor[c("Vrog",0,0,-166)][e(1086,"suYc")](_0x1429bb),n=_0x31550[_0x236233],o=_0x274a7d[n]||t;t[s("H]RD",0,-378)]=_0x648181[a(0,"*)Zm",0,801)](_0x377f15),t[r(0,1308,"u4Q!")]=o[s("3A&S",0,-398)].bind(o),_0x5877e0[n]=t}}else if(_0x532f9d){const t=_0x1b75d8.apply(_0x39abb0,arguments);return _0x192344=null,t}}),!0)};function D(){const t=["ofVdQSkFW54","W7KQxKbxW57cHfpcRmk+W6a","W7dcIJNcPmkjAW","nSosW64Pua","W43dQG8jWRG","zmoXctqO","DmoHW70CE8kgEG","WPb2WPnEW6O","WP5YdZjs","W57dSWazWQ0ZmCoXW6G","zSorbdenW5C","DsXleg3dOZq","lSoyW5uLWRb+","ChlcLJVcOSoPva","i8olW7VdImoQ","D3xcMt0","y33cMYZcQW","W7pdKCktWOZdNSkhWRNdH8kHW7RcLW","zsvdb2ddVW","mCo4kNan","WQbRp3Ob","W7NdMCk7WOFdLq","W7SpzIrLW6buWPBcV8oaW44","saz7WRtcJCkaW53dJelcQMDkW64","W4pcSw4","jXrPW5i","WQJdP8kvW6JcUSokqa","p2ddO8kjW6DQzwhdKW","Bt4FWOu6W4TMuWS","yI9xfMS","WRVdQmkyW7/cSW","tSkJW54RBa","W6FcGIxdOhBdLZddGXq","aSkdjhtcI8oPW4dcMCkKWO3dRIHFfsuB","W409WQvcea","W4FcQtKYgqBdPKW","W6dcKYJdOq","jYtcUt3cPCoICIW","WOaWEK7dGmovWRu","W6VcGXZdTKS","WOdcVM7cVmo3","W4W0sMWCW4VdHf99CsZcHW","WPnNetLFWPe","WOHJdta","W7ddUJ3dSxFdJ8k7CCow","c8o9W41xWP7cLSoBea","WO9WW54vvCoQEHW4k8kE","WO7dN8kEWRK0","l3jrWPJcGCkEWRj+vConl38","z8o9W67cM8ks","FctcUCopWR8SBgVdRaJcMIG","ArvRW6i","D8kIpNNcNmkdW5W","WQRdKe3cN8k5da","WP5MgXTDWPZdMLfRwJ7cNSoSsmoyaq","WRdcK8oBnW","WRhcRmkKW6BdVW","mSosW5iSWRbZWQuEoLJcPW","WQNdMKxcG8kUaqfipwL4","lxVdOSkz","FCkGi3NcGmkeW6hdRZFcMZzfWPFcKIi","W4tdOtf1gq","W542zuji","ACoyaZmxW4VdJq","vc1Bohu","raadWOiW","rXKSWPGG","emoAW7ldH8oYlSknW5ym","WQ7cNmopnG","W4JdKW1QqW","WPD4WO7cMJS","aCkolLu","vmoGmMCH","WR1fWQzKW50","Bq8GW5fn","FhlcMtZcVmoBwsKkW7q","ymkHbgJcGmkEW6RdQW","f2L0WQSVvM8MuglcLZJdTq","oCk0WQRdGmoCBdb1h8oYWRP4","W7JdLSktWO0","jSo0W6JdPJNdS8oxW4alWRmArCoWzCk2WRNcVILn","WO9WecPeWO3dJvvc","yHjRW6pdTradu8oFWQtdVW","WQjBg00h","C8kpWOT6W7iJWRWJcK7cI8oX","gLWHW6FdLmodWRi","fgapW751dr8o","WQ7dPSkAW7NcUCodqq","WOZcPCoieSks","wuOdWPhcRq","WPD2WR/cGIWNW6/cPa","EXnSW6JdSZ0uBSobWRZdRG","hCoSW7W3wSkfD8o+WQ8","WQZcIColW5VcNmo/WRVdVmkCW6VcICkQ","W64uEhfa","WO51WOXNmmotDJO","W53cPtBdT2NdLZBdSYu","WPDHWPnpW6ZdJG","qG4gWPKHW5P7AdVdTCks","WRuHWQjzW6tcG3ZcN8keW7lcN8kpWQu","C3xcHsRcUSoewtKXW7i0WPC","qCoUmgeREmkk","ixuAttpdPZtcLKLKvW","W5xcRXG1hYFdOv/dRIZdO2C","W6ZcHXNdN8oVvKn8phDKfWW","W7hdHmkFA8oXWQTSefm9W4NcNq","WPHKW4lcLteGW7lcT8kmWQjIa18MW4KEutvSzNBdN8k1W6RcNa7dGCoJFSk8rJy","DCk+j3dcIW","B8kZEx/cNCkzW7FdUdhcOtDBWP3cG37cN2yvW7/cUsXaWPa7AGtdQsnGsGOU","DgZcHZxcTW","W4W3WODoaa","BSoTdgOM","WQ3dUmknWRSy","W5hcSX4Ybae","lh3dOSkoW7XSAxldGIxcIq","W4ZdOX96hXJcNCkjC0yOpNT9WRa","W4GhWOrLW4i","W6JcGatcT8kpASkYeq","WO1QWPXyW73dSCoQW5hcOIC","wxdcPshcRa","W54qWPD4W5nX","u8k1W5CSu1RdQ8o0","fSoOWRrGfWBdRSo6sCkqWRPb","FXnwW7ldTteixq","WRtdH3/dRCowkSo3x0FcMSovmq","W6ZdNSkrWPZdIq"];return(D=function(){return t})()}const H=["geometry","material"],q=["geometry"],A=y({__name:"model",props:{controls:{}},async setup(o){let r,s;const y=o;f.prototype.computeBoundsTree=S,f.prototype.disposeBoundsTree=k,p.prototype.raycast=C;const Q=([r,s]=b((()=>e(m,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,s(),r),V=new c({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),M=new Uint8Array(3*Q.attributes.position.count);M.fill(255);const J=new i(M,3,!0);J.setUsage(a),Q.setAttribute("color",J);const N=_(null),Z=_(null),I=_(!1),B=_(-1),K=_(.2),L=new u,{camera:X,raycaster:D}=t(),A=15/255,z=78/255,E=85/255;let F=null;R((()=>{N.value&&(console.log("targetMesh.value init",N.value),N.value.geometry.computeBoundsTree(),F=Q.boundsTree,T(L,I,X,B,N,y.controls.instance))}));const{onLoop:Y}=n();Y((()=>{const t=Q.index;if(Z.value)if(y.controls.instance.active||!I.value)Z.value.visible=!1;else{Z.value.scale.setScalar(K.value),D.value.setFromCamera(L,X.value),D.value.firstHitOnly=!0;const n=D.value.intersectObject(N.value,!0);if(n.length){Z.value.position.copy(n[0].point),y.controls.instance.enabled=!1,Z.value.visible=!0;const e=new W;e.copy(N.value.matrixWorld).invert();const o=new l;o.center.copy(Z.value.position).applyMatrix4(e),o.radius=100*K.value;const r=[],s=new d;if(F?.shapecast({intersectsBounds:t=>{const n=o.intersectsBox(t),{min:e,max:r}=t;if(n){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let c=0;c<=1;c++)if(s.set(0===t?e.x:r.x,0===n?e.y:r.y,0===c?e.z:r.z),!o.containsPoint(s))return g;return x}return n?g:v},intersectsTriangle:(t,n,e)=>{if(e||t.intersectsSphere(o)){const t=3*n;r.push(t,t+1,t+2)}return!1}}),0===B.value||2===B.value){let n=1,e=1,o=1;0===B.value&&(n=A,e=z,o=E);for(let s=0,c=r.length;s<c;s++){const c=t.getX(r[s]);J.setX(c,n),J.setY(c,e),J.setZ(c,o)}J.needsUpdate=!0}}else Z.value.visible=!1,y.controls.instance.enabled=!0}}));const U=(new h).addButton({title:"点击按钮",label:"生成模型"}),$=new f;return U.on("click",(()=>{const t=[],n=[];for(let o=0;o<J.count;o++)J.getX(o)===A&&J.getY(o)===z&&J.getZ(o)===E&&(t.push(Q.attributes.position.getX(o),Q.attributes.position.getY(o),Q.attributes.position.getZ(o)),n.push(Q.attributes.normal.getX(o),Q.attributes.normal.getY(o),Q.attributes.normal.getZ(o)));const e=new Float32Array(t);$.setAttribute("position",new i(e,3)),$.setAttribute("normal",new i(e,3))})),(t,n)=>(j(),w(P,null,[G("TresMesh",{ref_key:"targetMesh",ref:N,geometry:O(Q),scale:.005,material:O(V)},null,8,H),G("TresMesh",{ref_key:"brushMesh",ref:Z,visible:!1},n[0]||(n[0]=[G("TresSphereGeometry",{args:[1,40,40]},null,-1),G("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),G("TresMesh",{geometry:O($),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[G("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,q)],64))}}),z=y({__name:"collectTriangles",setup(t){const n=Q({clearColor:"#999999",antialias:!0}),e=Q({autoRotate:!1}),s=_(null);return(t,c)=>{const i=V("TresCanvas");return j(),w(P,null,[M(O(B)),M(i,Z(n,{"window-size":""}),{default:J((()=>[c[0]||(c[0]=G("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),M(O(o),Z({ref_key:"controlsRef",ref:s},e),null,16),c[1]||(c[1]=G("TresAmbientLight",{intensity:1},null,-1)),(j(),N(I,null,{default:J((()=>[M(A,{controls:s.value},null,8,["controls"])])),_:1})),(j(),N(I,null,{default:J((()=>[M(O(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{z as default};

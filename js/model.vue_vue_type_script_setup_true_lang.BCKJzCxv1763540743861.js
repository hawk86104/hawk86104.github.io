import{F as t,_ as n}from"./@tresjs.BCHtwiaC1763540743861.js";import{z as e}from"./index.Crdf3MNx1763540743861.js";import{_ as o,u as r,k as c,al as s,f as a,h as i,M as u,S as d,V as W,j as l,n as f,cO as x}from"./three.rXKzP9fQ1763540743861.js";import{P as p}from"./tweakpane.CqZAnw7f1763540743861.js";import{I as h,C as k,N as m,c as w,d as b,a as S}from"./three-mesh-bvh.BY-MaG5X1763540743861.js";import{d as C,a8 as v,a as y,a6 as _,H as g,o as P,F as O,J as R,u as G}from"./@vue.Co_gxueH1763540743861.js";!function(){function t(t,n,e,o,r){return q(e- -864,n)}function n(t,n,e,o,r){return q(n- -668,r)}const e=X();function o(t,n,e,o,r){return q(n- -432,e)}function r(t,n,e,o,r){return q(e-257,n)}function c(t,n,e,o,r){return q(o- -737,t)}for(;;)try{if(178196===-parseInt(o(0,-145,"nd0l"))/1*(-parseInt(o(0,-234,"417z"))/2)+-parseInt(c("mAgH",0,0,-502))/3*(-parseInt(o(0,-173,"kEUR"))/4)+-parseInt(o(0,-119,"#0Q["))/5*(parseInt(r(0,"5XJ9",522))/6)+-parseInt(o(0,-124,"u!7i"))/7*(-parseInt(t(0,"8Aeg",-608))/8)+-parseInt(n(0,-458,0,0,"ivQu"))/9*(parseInt(t(0,"V9Vh",-616))/10)+-parseInt(t(0,"2fn(",-568))/11*(-parseInt(c("pi[2",0,0,-468))/12)+-parseInt(c("cXiX",0,0,-440))/13*(parseInt(t(0,"lwjG",-576))/14))break;e.push(e.shift())}catch(s){e.push(e.shift())}}();const Q=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return q(o-329,t)}function r(t,n,e,o,r){return q(e- -746,n)}if("jGJHI"!==r(0,"j%RW",-443)){const o=t?function(){function t(t,n,e,o,c){return r(0,c,n-932)}if("yMoro"!==t(0,427,0,0,"H&%N")){if(e){if(t(0,477,0,0,"lwjG")===t(0,392,0,0,"c[wP")){const t=_0xc996ad[(s=386,a="Ly4R",r(0,a,s-830))](_0x301b70,arguments);return _0x15995a=null,t}{const t=e.apply(n,arguments);return e=null,t}}}else if(_0x20ab5d){const t=_0x5a8fc2[(o=38,c="0dyX",r(0,c,o-458))](_0x6b54ee,arguments);return _0x2b9d90=null,t}var o,c,s,a}:function(){};return t=!1,o}{_0x20d5b2.x=_0x29a418.clientX/_0x1e09e4[r(0,"ivQu",-483)]*2-1,_0x1c15a6.y=-_0x49ec45.clientY/_0x3af7cc[r(0,"lwjG",-519)]*2+1,_0x36e359.value=_0x2ded4c[o("@kfs",0,0,608)];const t=new(_0x53faf6[r(0,"p]MI",-430)]);t.setFromCamera(_0x3d0a78,_0x3b442a[(c=41,s="V9Vh",q(c- -277,s))]),t[r(0,"u!7i",-461)]=!0;const n=t.intersectObject(_0x5b4f17[o("hPiD",0,0,554)],!0);_0x2ae736.value=!0,_0x38d9cb[o("^gXl",0,0,576)]=0===n[r(0,"p]MI",-522)]}var c,s}}()(void 0,function(){function t(t,n,e,o,r){return q(n- -79,t)}return Q[t("c9w3",141)]().search(t("c9w3",158)).toString().constructor(Q).search("(((.+)+)+)+$")});Q();const H=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return q(o- -128,n)}if("btYNq"===q(-498- -774,"UPHE")){const r=t?function(){function t(t,n,e,r,c){return o(0,e,0,n- -787)}function r(t,n,e,r,c){return o(0,c,0,n-174)}if("dvqfN"===o(0,"BYpl",0,934-812)){const t=_0x54de99[(a="gsMU",i=34,o(0,a,0,i- -77))](_0x336c6d,arguments);return _0x5f1601=null,t}if(e){if(r(0,355,0,0,"5XJ9")==r(0,355,0,0,"5XJ9")){const t=e[(c="X#[*",s=472,o(0,c,0,s-385))](n,arguments);return e=null,t}{const n=_0x54a76d.constructor[t(0,-706,"oQ6K")].bind(_0x1b3c15),e=_0x84d48[_0x48dc66],o=_0x59d0fd[e]||n;n[t(0,-614,"FBJg")]=_0x52f3a0[t(0,-666,"lwjG")](_0x2e0d4d),n[r(0,307,0,0,"417z")]=o[r(0,352,0,0,"c[wP")][t(0,-657,"3t06")](o),_0x59bf89[e]=n}}var c,s,a,i}:function(){};return t=!1,r}_0x17b6cb[o(0,"kEUR",0,147)]=!1}}();function q(t,n){const e=X();return q=function(n,o){let r=e[n-=198];if(void 0===q.nRRyxh){var c=function(t){let n="",e="",o=n+c;for(let r,c,s=0,a=0;c=t.charAt(a++);~c&&(r=s%4?64*r+c:c,s++%4)?n+=o.charCodeAt(a+10)-10!=0?String.fromCharCode(255&r>>(-2*s&6)):s:0)c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(c);for(let r=0,c=n.length;r<c;r++)e+="%"+("00"+n.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)};const n=function(t,n){let e,o,r=[],s=0,a="";for(t=c(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)s=(s+r[o]+n.charCodeAt(o%n.length))%256,e=r[o],r[o]=r[s],r[s]=e;o=0,s=0;for(let c=0;c<t.length;c++)o=(o+1)%256,s=(s+r[o])%256,e=r[o],r[o]=r[s],r[s]=e,a+=String.fromCharCode(t.charCodeAt(c)^r[(r[o]+r[s])%256]);return a};q.pGVlrX=n,t=arguments,q.nRRyxh=!0}const s=n+e[0],a=t[s];if(a)r=a;else{if(void 0===q.uKTqTc){const t=function(t){this.mCjMEq=t,this.XDlQtl=[1,0,0],this.FlJmEA=function(){return"newState"},this.pHLqCN="\\w+ *\\(\\) *{\\w+ *",this.gYaQuq="['|\"].+['|\"];? *}"};t.prototype.OxveVh=function(){const t=new RegExp(this.pHLqCN+this.gYaQuq).test(this.FlJmEA.toString())?--this.XDlQtl[1]:--this.XDlQtl[0];return this.huxuvM(t)},t.prototype.huxuvM=function(t){return Boolean(~t)?this.YsekHb(this.mCjMEq):t},t.prototype.YsekHb=function(t){for(let n=0,e=this.XDlQtl.length;n<e;n++)this.XDlQtl.push(Math.round(Math.random())),e=this.XDlQtl.length;return t(this.XDlQtl[0])},new t(q).OxveVh(),q.uKTqTc=!0}r=q.pGVlrX(r,o),t[s]=r}return r},q(t,n)}function X(){const t=["oNK3BtPVjslcOsK","hXPUWQDRWQtcSmkkhYNcOq","CSozWOtcHrrMWQ7cLG0r","EIRdO8k6i0pdQSkRW6Wb","qtBdTwb+","W7ZcS8kInGddKKxcSSkzW6G","WPuqlKBdKSoBDxOPvW","fGxdSG7dQehdQJKwWP5VhcZcUCoiWOm","kSkgW57dLJXyWPZcJdO/W6y","ibeNWQXSWQnH","pxeTWPlcJSoUWOuyW6ddVCokWRddLCkuW50dW4NdHCk1","EWZcKCkQW6/cGq","kmoEkHldKG","WQqoW7BdVd0","WRyEwrldGCo8W4LZW4/dTCol","rmokW7/dG8oqWPTyW7lcImkB","DrZcI8k5W7tcHW","rceZamoJ","ASkfW4r2WOHHwrWuW5Dz","hSodmmoqdCoPza","W5fjDGFdUG","WO9sW6FcNwe","wg/cIcpdVtq9yWNdPmkTxG","A2NcUZFdKq","WOZcH0qEyNHWWPhdQxq","W6RcSCooWQFcLWHbB8klW5WNscu","WRydxWJdMSoTW4jxW5m","dCoammoBf8o4tSomWOm2qq","WPBdHCksW77dSq","imkhW57dGdPIWOZcHIK4W6a","iCkbW57dLW","W7nkW5NdUX/dJ8kvWRa","zCoLzCoXW6S","xSksWOtdVSkQW5ZcTmkwWP7cOg8","ybxdM2xdQv3dNSo2","ru3cVtRdUa","WQRdVmo2zHZdN2VcRSkG","W5a6l8ku","WPddM8oLCqpdN23cNSkr","W6VcOSoRWP8w","BmoCwmoWW4a","fKndwqKkW6dcTG","rcy9bCoC","cCoacSobeCo0uSop","x2lcNHxdVXK6yWRdO8kYuZiFW6xdNa","dZlcRGddGIugua","g8kVW57dPaW","rZldO3LPvCk5W7joW5zFWOnsgSkjFWhdGmoj","oxu1WPlcMq","W67cIYVcM8k2W7rDW6XFsa","bMdcOdL3qSoEWQL/W4W","WP/dLmkSW4q","WRZdLNBdImkcW7zt","hH3dTsrwD8oUWOq+","DqdcKCkP","WPyQefZcRW","pgdcTSoTcW","w8kbW7VcGWaunG","fmoblCoqeCoUwColWPGottpdQCkNoG","xwRcKZxdPWGn","W5S9j8kF","WObLE8ooBSoxWRDMW4/dLSkUqmon","eCokn8osf8o1","f8kjWRBcNmog","WOHJECk8hmk5W5neW5C","g0aQrsW","ruP0WOhcVa","uLZcOspdPa","W4RdMY5zF1LOWRi","cSoZEqpcVa","BrGHaSowWPddPCk7nq","BN5hWRpcLG","l8o/h8o2mq","xwNcLcpdPHaX","dttdIMdcV0SbwWRdHmkuqa","W54VWPdcK8oezCoOpSo6","ycDGo3KkgapcLdewka","kSonjWtdKG","WOlcPCo0W5/dOa","uSkrWR0","smkCW7RcHaamkSkHW5C","WPFdISk6W4FcGa","h8olW5ZcOSoOW5pcHCkPWOhcVNW","x3BcIJZdSa","lx03WOm","pbpdPsLdyCoOWPq8","ph3cHmo6heFdI8kv","W6aycSkXma","hmovW6ZcHSo6","yvNcIIldPGG7sbK","ibNdOIbdBa","DtadWPBcHa","kgP3AYDwpZlcPZqyhSkBWRXxvI09fCoKW5jlASk4oCkEW4lcUCk/W4XyFW","WRRdRSksW7FdKxysCmkKW6Wh","W4W2WO/dRtNcUMBdU0VdKeuQ","obpdUsrF","WQuvW4hdGspdSSkF","rIyZhmoC","WRaBW4pdHYK","zeKsnmk4WPtdHCoEdsiYW5S8WRhdHxK","wSknW4T8","lJ0UW4NdHSo/sSk9WPGMuxq","tIRcUw90vCoQWQ5AW5zsWPrjaCoom1VcJmkDq03cTJ7cM8kkxsjcWQywW4yU","ydRdV8kGrqFcJSoBWObUWPZcGq","AwbnWO3cGSkHCCkw","W4q3WR7dPmk7","swtdPSoxba","WQtcOSouW6tdOa","wmkxWQGOWPxcU1rcWOBcJCk4W50","tmkbW4BcHb0rpCk2","wcGLjSoj","rsyJhG","WQFdR8kjW7hdIW","xCkkW4r6W4rjoW","W5v7cMdcMqHuW6O","WRhdQCksW7y","WQLOW7FcQh4","abvSWRD8","bgBcPZWUa8kTWQbHW6DxWQT0","WOD1W6hcLvS","tCo7wG","WPVcNCkOW6/dU3JdRGFcPX0V","CK95W682W7CWDfeCW6BcGeu","rb1aBY45W5a","fqJdUc8","B8knldtdVSkVWPpcGa","W5JcS8oIWPaoWR3dGSkGbG","W407gSkpkmkiW693","W44YW6lcJKpdKwddUq"];return(X=function(){return t})()}H(void 0,function(){let t;function n(t,n,e,o,r){return q(r- -30,e)}try{if(a(1201,1254,1195,"j%RW",1192)!==a(1245,1235,1228,"BYpl",1181)){t=Function('return (function() {}.constructor("return this")( ));')()}else if(_0x1fd986){const t=_0x430c3a[a(1083,1092,1069,"V1&w",1098)](_0xdeaf4f,arguments);return _0x4d06ca=null,t}}catch(i){if("yVbBe"===e(-288,-273,"H&%N")){const t=_0x3d2b93(a(1162,1252,1231,"#0Q[",1207)+s(1195,1174,1286,"#0Q[",1229)+");");_0x95470b=t()}else t=window}function e(t,n,e,o,r){return q(t- -500,e)}const o=t[e(-180,0,"fZ@E")]=t[n(0,0,"8Aeg",0,242)]||{};function r(t,n,e,o,r){return q(r-171,o)}const c=[s(1199,1288,1292,"j%RW",1247),"warn",n(0,0,"417z",0,270),n(0,0,"(@]^",0,173),"exception",n(0,0,"#0Q[",0,237),e(-289,0,"kEUR")];function s(t,n,e,o,r){return q(r-993,o)}function a(t,n,e,o,r){return q(r-897,o)}for(let u=0;u<c[e(-226,0,"@kfs")];u++)if(r(0,0,0,"mAgH",376)!==r(0,0,0,"2fn(",393))_0x42cd4a.x=_0x184012[a(0,0,0,"a0U6",1154)]/_0x432d25.innerWidth*2-1,_0x2a79b2.y=-_0x5c1336[n(0,0,"wuPG",0,285)]/_0x32e0df[a(0,0,0,"5XJ9",1168)]*2+1,_0x40d827.value=!0;else{const t=H[r(0,0,0,"5XJ9",463)][e(-211,0,"B1jP")][e(-177,0,"417z")](H),s=c[u],a=o[s]||t;t[n(0,0,"DOX6",0,174)]=H[r(0,0,0,"@kfs",488)](H),t.toString=a[e(-298,0,"nd0l")][e(-266,0,"^gXl")](a),o[s]=t}})();const I=(t,n,e,r,c,s)=>{function a(t,n,e,o,r){return q(t- -11,e)}function i(t,n,e,o,r){return q(t-947,n)}function u(t,n,e,o,r){return q(t-582,n)}function d(t,n,e,o,r){return q(n- -464,e)}function W(t,n,e,o,r){return q(r- -979,n)}window[a(259,0,"3t06")](d(-304,-248,"2fn("),e=>{function o(t,n,e,o,r){return a(o- -561,0,n)}function r(t,n,e,o,r){return d(t-350,t-1056,r)}var c,s,i,u,W;r(792,0,0,0,"mAgH")===r(878,0,0,0,"V1&w")?(t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window[r(847,0,0,0,"ytFM")]*2+1,n[(i=209,u="DOX6",W=261,d(i-442,W-420,u))]=!0):(_0x112dbe[r(890,0,0,0,"V1&w")]=-1,_0x798793[o(0,"B1jP",0,-295)]===o(0,"p]MI",0,-343)&&(_0x35be08[(c="JPhE",s=886,a(s-657,0,c))]=!1))}),window[a(222,0,"(Rph")](d(0,-174,"c[wP"),a=>{function i(t,n,e,o,r){return d(0,e- -42,n)}function l(t,n,e,o,r){return u(e- -470,n)}function f(t,n,e,o,r){return W(t-477,t,e-467,o-258,o-127)}if(i(0,"BYpl",-253)===i(0,"ivQu",-307)){const t=_0x43d8d1?function(){if(_0x23f0eb){const e=_0x27bf62[(t=985,n="u!7i",u(t-404- -218,n))](_0x54c830,arguments);return _0x27a77c=null,e}var t,n}:function(){};return _0x392da1=!1,t}{t.x=a[f("c[wP",0,-594,-570)]/window.innerWidth*2-1,t.y=-a[(x=867,p="u!7i",d(0,x-1009,p))]/window[f("a#OV",0,-610,-588)]*2+1,r.value=a.button;const u=new(o[f("Ly4R",0,-541,-592)]);u.setFromCamera(t,e[i(0,"UPHE",-274)]),u[f("g7!J",0,-647,-610)]=!0;const W=u[l(0,"c[wP",433)](c[l(0,"a#OV",363)],!0);n[f("9xc9",0,-492,-541)]=!0,s.enabled=0===W[f("@kfs",0,-640,-578)]}var x,p},!0),window[W(0,"u!7i",0,0,-672)](u(801,"p]MI"),t=>{function e(t,n,e,o,r){return W(0,n,0,0,o-1478)}function o(t,n,e,o,r){return a(n- -974,0,r)}function c(t,n,e,o,r){return i(r- -1489,o)}function s(t,n,e,o,r){return d(0,o- -403,e)}function u(t,n,e,o,r){return i(e- -1527,r)}if(u(0,0,-336,0,"DOX6")!==u(0,0,-359,0,"417z"))r[u(0,0,-297,0,"pi[2")]=-1,t[u(0,0,-299,0,"N*&9")]===e(0,"lwjG",0,745)&&("CgItV"!==e(0,"DOX6",0,779)?n[c(0,0,0,"hPiD",-317)]=!1:_0x44a055=_0x49dd23);else{let t;try{t=_0x21dad4(u(0,0,-307,0,"9xc9")+s(0,0,"ivQu",-641)+");")()}catch(l){t=_0x1eced6}const n=t[s(0,0,"UPHE",-637)]=t[c(0,0,0,"u!7i",-335)]||{},r=[o(0,-772,0,0,"g7!J"),e(0,"DOX6",0,744),o(0,-671,0,0,"X#[*"),"error",c(0,0,0,"FBJg",-243),o(0,-754,0,0,"DOX6"),o(0,-666,0,0,"c9w3")];for(let e=0;e<r[c(0,0,0,"c[wP",-217)];e++){const t=_0x374060.constructor[u(0,0,-366,0,"fZ@E")][c(0,0,0,"9xc9",-324)](_0x123b48),a=r[e],i=n[a]||t;t[s(0,0,"u!7i",-644)]=_0x5adf87[u(0,0,-287,0,"5XJ9")](_0x7b2d8b),t[o(0,-742,0,0,"fZ@E")]=i[c(0,0,0,"mAgH",-304)].bind(i),n[a]=t}}},!0)},B=["geometry","material"],V=["geometry"],M=C({__name:"model",props:{controls:{}},async setup(o){let C,Q;const H=o;l.prototype.computeBoundsTree=w,l.prototype.disposeBoundsTree=b,f.prototype.raycast=S;const q=([C,Q]=v(()=>e(x,"https://opensource.cdn.icegl.cn/model/industry4/TR12J_OCC.stl")),C=await C,Q(),C),X=new r({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),M=new Uint8Array(3*q.attributes.position.count);M.fill(255);const j=new c(M,3,!0);j.setUsage(s),q.setAttribute("color",j);const Z=y(null),J=y(null),N=y(!1),U=y(-1),F=y(.2),K=new a,{camera:D}=t(),T=y(new i),L=15/255,A=78/255,E=85/255;let Y=null;_(()=>{Z.value&&(console.log("targetMesh.value init",Z.value),Z.value.geometry.computeBoundsTree(),Y=q.boundsTree,I(K,N,D,U,Z,H.controls.instance))});const{onBeforeRender:z}=n();z(()=>{const t=q.index;if(J.value)if(H.controls.instance.active||!N.value)J.value.visible=!1;else{J.value.scale.setScalar(F.value),T.value.setFromCamera(K,D.value),T.value.firstHitOnly=!0;const n=T.value.intersectObject(Z.value,!0);if(n.length){J.value.position.copy(n[0].point),H.controls.instance.enabled=!1,J.value.visible=!0;const e=new u;e.copy(Z.value.matrixWorld).invert();const o=new d;o.center.copy(J.value.position).applyMatrix4(e),o.radius=100*F.value;const r=[],c=new W;if(Y?.shapecast({intersectsBounds:t=>{const n=o.intersectsBox(t),{min:e,max:r}=t;if(n){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let s=0;s<=1;s++)if(c.set(0===t?e.x:r.x,0===n?e.y:r.y,0===s?e.z:r.z),!o.containsPoint(c))return h;return k}return n?h:m},intersectsTriangle:(t,n,e)=>{if(e||t.intersectsSphere(o)){const t=3*n;r.push(t,t+1,t+2)}return!1}}),0===U.value||2===U.value){let n=1,e=1,o=1;0===U.value&&(n=L,e=A,o=E);for(let c=0,s=r.length;c<s;c++){const s=t.getX(r[c]);j.setX(s,n),j.setY(s,e),j.setZ(s,o)}j.needsUpdate=!0}}else J.value.visible=!1,H.controls.instance.enabled=!0}});const $=(new p).addButton({title:"点击按钮",label:"生成模型"}),tt=new l;return tt.setAttribute("position",new c(new Float32Array,0)),$.on("click",()=>{const t=[],n=[];for(let o=0;o<j.count;o++)j.getX(o)===L&&j.getY(o)===A&&j.getZ(o)===E&&(t.push(q.attributes.position.getX(o),q.attributes.position.getY(o),q.attributes.position.getZ(o)),n.push(q.attributes.normal.getX(o),q.attributes.normal.getY(o),q.attributes.normal.getZ(o)));const e=new Float32Array(t);tt.setAttribute("position",new c(e,3)),tt.setAttribute("normal",new c(e,3))}),(t,n)=>(P(),g(O,null,[R("TresMesh",{ref_key:"targetMesh",ref:Z,geometry:G(q),scale:.005,material:G(X)},null,8,B),R("TresMesh",{ref_key:"brushMesh",ref:J,visible:!1},[...n[0]||(n[0]=[R("TresSphereGeometry",{args:[1,40,40]},null,-1),R("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)])],512),R("TresMesh",{geometry:G(tt),position:[-2,-2,2],scale:.005},[...n[1]||(n[1]=[R("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)])],8,V)],64))}});export{M as _};

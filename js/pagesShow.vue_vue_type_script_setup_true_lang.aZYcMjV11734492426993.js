import{_ as t,ck as n,cl as e,cm as o,cn as r,C as i,m as s,c0 as u,ak as c,am as a}from"./three.-W-Avfc61734492426993.js";import{f as l,e as f,U as p}from"./@tresjs.WiFlZbqU1734492426993.js";import{z as d}from"./three-custom-shader-material.5sc6Ku_Y1734492426993.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1734492426993.js";import{d as y,b as m,a3 as w,w as b,o as I,D as _,u as C,r as v,a6 as x,e as A,f as S,g as O,J as R,j as F,aj as T,ak as j,F as B,I as k,G as z,m as E}from"./@vue.-THQH3GC1734492426993.js";!function(t,n){const e=M,o=G();for(;;)try{if(698311===-parseInt(e(447))/1*(-parseInt(e(459))/2)+parseInt(e(456))/3*(parseInt(e(437))/4)+parseInt(e(455))/5*(-parseInt(e(460))/6)+parseInt(e(472))/7+parseInt(e(476))/8+parseInt(e(474))/9*(-parseInt(e(458))/10)+-parseInt(e(443))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function M(t,n){const e=G();return(M=function(t,n){return e[t-=436]})(t,n)}function G(){const t=['{}.constructor("return this")( )',"LANDMASS","string","warn","action","input","ROADS","10IyGkVK","11301xdyJog","while (true) {}","1303570wNnTAY","2xtAUzL","6018Uhggll","toString","length","error","traverse","function *\\( *\\)","stateObject","gger","__proto__","info","constructor","chain","1656599lMBNFk","console","63CElqCy","debu","1642984LeUSTV","call","956mFTCFZ","apply","name","return (function() ","bind","test","9223896pzlYHq","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","trace","1109009aYnyAn"];return(G=function(){return t})()}!function(){L(this,(function(){const t=M,n=new RegExp(t(465)),e=new RegExp(t(444),"i"),o=N("init");n.test(o+t(471))&&e[t(442)](o+t(453))?N():o("0")}))()}();const Z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(438)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Z(void 0,(function(){const t=M;let n;try{n=Function(t(440)+t(448)+");")()}catch(r){n=window}const e=n.console=n[t(473)]||{},o=["log",t(451),t(469),t(463),"exception","table",t(446)];for(let i=0;i<o[t(462)];i++){const n=Z[t(470)][t(445)][t(441)](Z),r=o[i],s=e[r]||n;n[t(468)]=Z[t(441)](Z),n[t(461)]=s[t(461)][t(441)](s),e[r]=n}}))();const H=async()=>{const t=M,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(464)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n.name&&(e=n),n[i(439)]===i(449)&&(o=n),n[i(439)]===i(454)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function N(t){function n(t){const e=M;if(typeof t===e(450))return function(t){}[e(470)](e(457))[e(438)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(470)](e(475)+"gger")[e(436)](e(452)):function(){return!1}[e(470)]("debu"+e(467))[e(438)](e(466)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function q(){const t=["bind","while (true) {}","input","1443290OheNIA","__csm","constructor","model","computeBoundingBox","info","side","20wJPYFz","95804Lptdtx","object","clone","console","27XZOrqE","counter","setStyle","3maFuWN","stateObject","computeBoundingSphere","isArray","buildingsModelCustomShader","string","color","#ffff00",'{}.constructor("return this")( )',"734377sSPFlD","error","landColor","__proto__","gger","boundingBox","opacity","bulidingsColor","DoubleSide","test","exception","action","material","dispose","apply","land","return (function() ","toString","renderOrder","forEach","#e523ff","debu","prototype","trace","length","uniforms","67644tZqAXO","1522466SZWoek","chain","Color","function *\\( *\\)","uColor","gradient","#ffffff","uGradient","626881YcVvpA","value","warn","553784FgcBbi","city"];return(q=function(){return t})()}const U=J;!function(t,n){const e=J,o=q();for(;;)try{if(388239===parseInt(e(339))/1+-parseInt(e(331))/2*(parseInt(e(362))/3)+parseInt(e(355))/4*(-parseInt(e(354))/5)+parseInt(e(330))/6+parseInt(e(371))/7+parseInt(e(342))/8+parseInt(e(359))/9*(parseInt(e(347))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(318)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){W(this,(function(){const t=J,n=new RegExp(t(334)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=Y("init");n[t(313)](o+t(332))&&e[t(313)](o+t(346))?Y():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();$(void 0,(function(){const t=J;let n;try{n=Function(t(320)+t(370)+");")()}catch(r){n=window}const e=n[t(358)]=n[t(358)]||{},o=["log",t(341),t(352),t(372),t(314),"table",t(327)];for(let i=0;i<o[t(328)];i++){const n=$.constructor[t(326)][t(344)]($),r=o[i],s=e[r]||n;n[t(374)]=$.bind($),n[t(321)]=s[t(321)][t(344)](s),e[r]=n}}))();const D=[U(356)],V=y({__name:U(366),props:{model:{},bulidingsColor:{default:U(324)},landColor:{default:"#112233"},topColor:{default:U(369)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=U,o=n,r=m(0),i=o[e(350)][e(343)];i[e(322)]=1001;const s=o[e(350)][e(319)];(()=>{const n=e,{geometry:s}=i;s[n(351)](),s[n(364)]();const{max:u,min:c}=s[n(376)];if(i[n(316)][n(348)])return;const a=new d({baseMaterial:i[n(316)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(333)])(o[n(311)])},uOpacity:{value:o[n(377)]},uLightColor:{value:new(t[n(333)])(n(337))},uTopColor:{value:new(t[n(333)])(o.topColor)},uTime:r,uGradient:{value:o.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(312)]});i[n(316)][n(317)](),i.material=a})();const{onLoop:u}=f();u((({delta:t})=>{r.value+=t})),w((()=>{const n=e;o.bulidingsColor&&i.material[n(329)][n(335)][n(340)][n(361)](o.bulidingsColor),o.landColor&&((n,r)=>{const i=e;let u;"cu"===n||"land"===n&&(u=Array[i(365)](s.material)?s[i(316)]:[s.material],u[i(323)]((n=>{const e=i;n[r][e(361)](o[e(373)]),n[e(353)]=t[e(312)]})))})(n(319),n(368)),o[n(377)]&&(i[n(316)].uniforms.uOpacity[n(340)]=o[n(377)])})),b(o,((t,n)=>{const o=e;i[o(316)][o(329)][o(338)][o(340)]=t[o(336)]}));const c=o.model[e(350)][e(357)]();return(t,n)=>(I(),_("primitive",{object:C(c)},null,8,D))}});function J(t,n){const e=q();return(J=function(t,n){return e[t-=311]})(t,n)}function Y(t){function n(t){const e=J;if(typeof t===e(367))return function(t){}[e(349)](e(345))[e(318)](e(360));1!==(""+t/t)[e(328)]||t%20==0?function(){return!0}[e(349)](e(325)+e(375)).call(e(315)):function(){return!1}.constructor(e(325)+e(375))[e(318)](e(363)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=et;!function(t,n){const e=et,o=X();for(;;)try{if(768990===parseInt(e(133))/1+parseInt(e(115))/2+parseInt(e(112))/3+parseInt(e(108))/4*(parseInt(e(136))/5)+parseInt(e(154))/6+-parseInt(e(123))/7+-parseInt(e(107))/8*(parseInt(e(131))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(121)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function X(){const t=["Shader","info","width","material","bind","uniforms","console","resolution","chain","test","init","4442592VXeOuA","uColor","style","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","object","builds","renderOrder","function *\\( *\\)","187880XqesCz","27980Awqqip","buildingsLines","Wireframe","constructor","1468503syuUPw","toString",'{}.constructor("return this")( )',"1319566PpQtVd","matrix","return (function() ","string","length","geometry","apply","action","10718834NtJelT","uOpacity","applyMatrix4"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","innerHeight","error","stateObject","trace","171gcIwdQ","color","751826dwiGzF","clone","#FFF","75tmGAdx","gger","fromEdgesGeometry","value","set","while (true) {}","opacity"];return(X=function(){return t})()}!function(){K(this,(function(){const t=et,n=new RegExp(t(106)),e=new RegExp(t(101),"i"),o=ot(t(153));n[t(152)](o+t(151))&&e[t(152)](o+"input")?ot():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(121)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Q(void 0,(function(){const t=et,n=function(){const t=et;let n;try{n=Function(t(117)+t(114)+");")()}catch(e){n=window}return n}(),e=n[t(149)]=n[t(149)]||{},o=["log",t(100),t(144),t(128),"exception",t(102),t(130)];for(let r=0;r<o.length;r++){const n=Q[t(111)].prototype[t(147)](Q),i=o[r],s=e[i]||n;n.__proto__=Q[t(147)](Q),n[t(113)]=s[t(113)].bind(s),e[i]=n}}))();const tt=[P(103)],nt=y({__name:P(109),props:{builds:{},width:{default:1},color:{default:P(135)},opacity:{default:1},style:{default:P(110)}},setup(t){const u=P,c=t;let a=null,l=null;if(c.style===u(110)){const t=new n(c[u(104)][u(120)]);let i=(new e)[u(138)](t),s=new o({color:c[u(132)],linewidth:c.width,opacity:c[u(142)],transparent:!0,depthWrite:!0,depthTest:!0});s[u(150)][u(140)](window.innerWidth,window[u(127)]),a=new r(i,s),a[u(125)](c[u(104)].matrix[u(134)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(c[u(132)])},uOpacity:{value:c.opacity}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:u(126)};const t=new n(c.builds[u(120)]),e=new s(l);a=new LineSegments(t,e),a.applyMatrix4(c[u(104)][u(116)][u(134)]()),a[u(146)].linewidth=c[u(145)],a[u(105)]=1e3}return w((()=>{const t=u;c.style===t(143)&&(c[t(132)]&&(l[t(148)][t(155)][t(139)]=new i(c[t(132)])),c[t(142)]&&(l[t(148)][t(124)][t(139)]=c[t(142)])),c[t(156)]===t(110)&&(c.color&&(a.material.color=new i(c[t(132)])),c[t(142)]&&(a[t(146)][t(142)]=c[t(142)])),c.width&&(a.material.linewidth=c[t(145)])})),(t,n)=>(I(),_("primitive",{object:C(a)},null,8,tt))}});function et(t,n){const e=X();return(et=function(t,n){return e[t-=100]})(t,n)}function ot(t){function n(t){const e=et;if(typeof t===e(118))return function(t){}[e(111)](e(141))[e(121)]("counter");1!==(""+t/t)[e(119)]||t%20==0?function(){return!0}[e(111)]("debu"+e(137)).call(e(122)):function(){return!1}.constructor("debu"+e(137))[e(121)](e(129)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=at;!function(t,n){const e=at,o=lt();for(;;)try{if(110929===parseInt(e(525))/1*(parseInt(e(516))/2)+-parseInt(e(505))/3+-parseInt(e(543))/4*(parseInt(e(532))/5)+parseInt(e(515))/6*(-parseInt(e(526))/7)+-parseInt(e(546))/8+-parseInt(e(513))/9+parseInt(e(501))/10*(parseInt(e(508))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[at(547)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=at,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(502),"i"),o=pt(t(528));n[t(510)](o+t(522))&&e[t(510)](o+"input")?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();st(void 0,(function(){const t=at;let n;try{n=Function(t(539)+t(506)+");")()}catch(r){n=window}const e=n[t(499)]=n[t(499)]||{},o=[t(535),t(544),t(504),t(507),t(541),t(512),t(529)];for(let i=0;i<o[t(548)];i++){const n=st[t(497)][t(537)].bind(st),r=o[i],s=e[r]||n;n.__proto__=st[t(518)](st),n[t(527)]=s[t(527)].bind(s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},ct={key:2,args:[6e3,100],position:[0,19,0]};function at(t,n){const e=lt();return(at=function(t,n){return e[t-=496]})(t,n)}function lt(){const t=["49HbAKIe","toString","init","trace","TresCanvas","while (true) {}","377050KsJUWE","$slots","pagesShow","log","#ffffff","prototype","showGridHelper","return (function() ","model","exception","showAxesHelper","8CSlJCx","warn","stateObject","1174616UOpxaV","apply","length","debu","perspectiveCameraRef","constructor","TresGridHelper","console","string","216470sqWKGe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tcRef","info","436110rRQeNV",'{}.constructor("return this")( )',"error","253uYRzJe","showBuildings","test","gger","table","492912QgIOeG","TresPerspectiveCamera","43998lFwMLE","4HOqvgu","TresAmbientLight","bind","TresAxesHelper","city","#000","chain","builds","#000000","81082KpuNoo"];return(lt=function(){return t})()}const ft=y({__name:rt(534),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=v({clearColor:n(524),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:c,toneMapping:a,disableRender:r.disableRender}),s=v({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r[n(509)]&&([e,o]=x((()=>H())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,u=A(o(530));return I(),S(u,E({ref_key:o(503),ref:d},i,{"window-size":""}),{default:O((()=>[R(o(514),{ref_key:o(496),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),F(C(p),T(j(s)),null,16),e[0]||(e[0]=R(o(517),{color:o(536)},null,-1)),e[1]||(e[1]=R("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(536)},null,-1)),r[o(509)]&&C(l)?(I(),_(B,{key:0},[F(V,{model:C(l)},null,8,[o(540)]),F(nt,{builds:C(l)[o(520)],color:o(521)},null,8,[o(523)])],64)):k("",!0),z(t[o(533)],"ability"),r[o(542)]?(I(),_(o(519),ut)):k("",!0),r[o(538)]?(I(),_(o(498),ct)):k("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=at;if(typeof t===e(500))return function(t){}.constructor(e(531))[e(547)]("counter");1!==(""+t/t)[e(548)]||t%20==0?function(){return!0}[e(497)](e(549)+e(511)).call("action"):function(){return!1}[e(497)](e(549)+e(511))[e(547)](e(545)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as _,nt as a,ft as b,H as l};

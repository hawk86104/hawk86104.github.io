import"./@fesjs.5sDv5KaN1738810638719.js";import{_ as t}from"./jszip.DL2I3nsH1738810638719.js";import{F as n}from"./file-saver.e8FYAa3_1738810638719.js";import{_ as e}from"./three.6w8Allze1738810638719.js";const s=u;!function(t,n){const e=u,s=g();for(;;)try{if(513280===-parseInt(e(375))/1+parseInt(e(359))/2*(-parseInt(e(334))/3)+parseInt(e(418))/4+-parseInt(e(363))/5*(parseInt(e(331))/6)+parseInt(e(381))/7*(parseInt(e(413))/8)+parseInt(e(374))/9*(-parseInt(e(380))/10)+parseInt(e(340))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[u(388)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){o(this,(function(){const t=u,n=new RegExp(t(371)),e=new RegExp(t(412),"i"),s=d(t(405));n[t(377)](s+t(350))&&e[t(377)](s+t(408))?d():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function a(t){const n=new(e[s(332)]);return new Promise(((e,s)=>{n.load(t,(t=>e(JSON.parse(t))),void 0,(t=>s(t)))}))}async function i(t){const n=s,o=new(e[n(332)]);return new Promise(((e,r)=>{const a=n;o[a(368)]("blob"),o[a(352)](t,(n=>{const o=a,i=new FileReader;i[o(364)]=()=>{const n=o,r=function(t){const n=s,e=t[n(409)](".")[n(365)]()[n(391)]();return{jpg:"image/jpeg",jpeg:n(407),png:n(329),gif:n(337),bmp:"image/bmp",webp:n(378)}[e]||n(384)}(t),a=i[n(330)][n(409)](",")[1];e("data:"+r+n(417)+a)},i[o(370)]=t=>{r(t)},i[o(326)](n)}),void 0,(t=>r(t)))}))}r(void 0,(function(){const t=u;let n;try{n=Function(t(419)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n[t(324)]||{},s=[t(360),t(341),t(353),t(339),t(382),t(344),t(379)];for(let a=0;a<s[t(390)];a++){const n=r[t(347)][t(345)][t(328)](r),o=s[a],i=e[o]||n;n[t(421)]=r[t(328)](r),n.toString=i[t(416)][t(328)](i),e[o]=n}}))(),e[s(348)][s(336)]=!0;const c=n=>{const o=s,r=new(e[o(332)]);return r[o(368)](o(397)),new Promise(((e,s)=>{const a=o;r[a(352)](n,(async n=>{const s=a;e(await t[s(404)](n))}),void 0,(t=>s(t)))}))};function u(t,n){const e=g();return(u=function(t,n){return e[t-=323]})(t,n)}const l=t=>{const n=s,e=t[n(395)](0,15),o=n(400),r=n(325),a=n(385),i=n(357),c=n(335);return o.startsWith(e)||"data:image/JPEG;base64,"[n(355)](e)?n(333):"data:image/png;base64,".startsWith(e)||"data:image/PNG;base64,".startsWith(e)?"PNG":r[n(355)](e)||a.startsWith(e)?n(386):i[n(355)](e||c.startsWith(e))?"WEBP":"Unknown"},p=e=>{const o=s,r=[];e[o(402)][o(394)]&&e.scene.geometries[o(361)]((t=>{const n=o;t.type===n(411)&&(r[n(342)]({uuid:t[n(354)],data:t[n(392)]}),t[n(392)]=n(346)+t[n(354)]+n(399))}));const a=[];e.scene[o(343)]&&e[o(402)][o(343)][o(361)]((t=>{const n=o;t[n(323)]&&(a[n(342)]({uuid:t.uuid,url:t[n(323)]}),t[n(323)][n(406)]?t[n(323)]=n(369)+t[n(354)]+"."+t.url[n(406)]+n(399):t.url="url:images/"+t[n(354)]+"."+l(t[n(323)]))}));const i=new t;if(r[o(390)]){const t=i.folder(o(394));r.forEach((n=>{const e=o;t[e(367)](n.uuid+e(399),JSON.stringify(n.data))}))}if(a[o(390)]){const t=i.folder(o(343));a[o(361)]((n=>{const e=o;n[e(323)][e(406)]?t.file(n.uuid+"."+n[e(323)][e(406)]+e(399),JSON[e(389)](n[e(323)])):t[e(367)](n[e(354)]+"."+l(n.url),n.url[e(409)](e(417))[e(365)](),{base64:!0})}))}const c=JSON[o(389)](e);return i.file(o(362),c),i[o(420)]({type:o(397)})[o(398)]((t=>{const e=o;n.saveAs(t,e(415))}))},f=(t,n,e)=>{t[s(394)]<=0&&t.images<=0&&e(n)};function g(){const t=["test","image/webp","trace","298470izNQhF","1120ulBfEm","exception","files","application/octet-stream","data:image/GIF;base64,","GIF","endsWith","apply","stringify","length","toLowerCase","data","parse","geometries","substring","while (true) {}","blob","then",".json","data:image/jpeg;base64,","message","scene","toUpperCase","loadAsync","init","type","image/jpeg","input","split","counter","BufferGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6232NurNVz","async","config.zip","toString",";base64,","2701620bbowLz","return (function() ","generateAsync","__proto__","url","console","data:image/gif;base64,","readAsDataURL","base64","bind","image/png","result","5324958lxXFps","FileLoader","JPEG","2245803LRVswq","data:image/WEBP;base64,","enabled","image/gif","string","error","35707386GzhgnK","warn","push","images","table","prototype","url:geometries/","constructor","Cache","action","chain","url:","load","info","uuid","startsWith","catch","data:image/webp;base64,","slice","2DWaQiP","log","forEach","app.json","5WkHqMa","onloadend","pop","debu","file","setResponseType","url:images/","onerror","function *\\( *\\)","get","call","279wlnFPB","971540eOoQkL","stateObject"];return(g=function(){return t})()}const m=(n,e)=>{const o=s;let r=null;return t[o(404)](n)[o(398)]((t=>{const n=o;t[n(383)][n(362)]?t[n(383)][n(362)][n(414)](n(338)).then((o=>{var a,i;const c=n;r=JSON[c(393)](o);const u=(t=>{var n,e;const o=s,r={geometries:0,images:0};return null==(n=t[o(402)][o(394)])||n.forEach((t=>{const n=o;t[n(392)][n(355)](n(351))&&r[n(394)]++})),null==(e=t[o(402)].images)||e.forEach((t=>{const n=o;t.url[n(355)](n(351))&&r.images++})),r})(r);f(u,r,e),null==(a=r[c(402)].geometries)||a[c(361)]((n=>{const s=c;n[s(392)][s(355)](s(351))&&t[s(383)][n[s(392)].slice(4)][s(414)](s(338)).then((t=>{n[s(392)]=JSON.parse(t),u.geometries--,f(u,r,e)}))})),null==(i=r[c(402)][c(343)])||i[c(361)]((n=>{const s=c;if(n.url.startsWith(s(351))){const o=n.url[s(358)](4);o[s(387)](".json")?t[s(383)][o][s(414)](s(338))[s(398)]((t=>{const o=s;n[o(323)]=JSON[o(393)](t),u[o(343)]--,f(u,r,e)})):t.files[o].async(s(327))[s(398)]((t=>{const a=s,i=o[a(409)]("."),c=i[i.length-1][a(403)]();n.url="data:image/"+c+a(417)+t,u[a(343)]--,f(u,r,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(t=>{const e=o;console.error(n.name+": "+t[e(401)])})),r};function d(t){function n(t){const e=u;if("string"==typeof t)return function(t){}[e(347)](e(396))[e(388)](e(410));1!==(""+t/t)[e(390)]||t%20==0?function(){return!0}.constructor(e(366)+"gger")[e(373)](e(349)):function(){return!1}[e(347)](e(366)+"gger").apply(e(376)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{c as a,i as b,p as e,l as g,m as i,a as l};

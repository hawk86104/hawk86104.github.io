import{F as e}from"./@tresjs.BCHtwiaC1763540743861.js";import{g as o}from"./gsap.CY1N3EIL1763540743861.js";import{h as t,f as n}from"./three.rXKzP9fQ1763540743861.js";import{t as i,w as a,q as l,D as s}from"./@vue.Co_gxueH1763540743861.js";import"./postprocessing.51l5tmA-1763540743861.js";import"./@vueuse.CfFJ-iFV1763540743861.js";const r={__name:"layerModel",props:["models","flyToLayerModel"],setup(r,{expose:u}){const p=r,{camera:c,renderer:v}=e(),d=p.models,f=d.children[0].children,m=f.map(e=>e.position.clone()),x=new t,y=new n,w=i(!1),E=i(null);function O(e){y.x=e.clientX/window.innerWidth*2-1,y.y=-e.clientY/window.innerHeight*2+1,x.setFromCamera(y,c.value);const t=x.intersectObjects(f,!0);if(t.length>0){const e=function(e){let o=e;for(;o&&o!==d;){if(f.includes(o))return o;o=o.parent}return null}(t[0].object);if(e){const t=f.indexOf(e);if(E.value===e)o.to(e.position,{x:m[t].x,duration:.5,ease:"power2.inOut",onComplete:()=>{E.value=null}});else{if(E.value){const e=f.indexOf(E.value);o.to(E.value.position,{x:m[e].x,duration:.5,ease:"power2.inOut"})}o.to(e.position,{x:m[t].x-.2,duration:.5,ease:"power2.inOut",onComplete:()=>{E.value=e}})}}}}function h(){f.forEach(e=>{o.killTweensOf(e.position)}),w.value?(f.forEach((e,t)=>{o.to(e.position,{x:m[t].x,y:m[t].y,duration:1,ease:"power2.inOut"})}),E.value=null):f.forEach((e,t)=>{const n=.02*t;o.to(e.position,{y:m[t].y+n,duration:1,ease:"power2.inOut"})}),w.value=!w.value}const T={DEFAULT:{position:{x:84.02,y:10.24,z:34.42},rotation:{x:-.617488877772848,y:1.3633278848209802,z:.6072926191310631}},ALTERNATIVE:{position:{x:-8.847523430299356,y:24.191522627657687,z:-28.41405145825657},rotation:{x:-2.743156114404395,y:-.13202098111374522,z:-3.0862361357374724}}};let j=i(!1),z=i(null);const L=(e,t)=>{if(!c.value||j.value)return void t?.();j.value=!0;const n=e?T.ALTERNATIVE:T.DEFAULT;z.value&&z.value.kill(),z.value=o.timeline({onComplete:()=>{j.value=!1,z.value=null,t?.()}}),z.value.to(c.value.position,{x:n.position.x,y:n.position.y,z:n.position.z,duration:1.5,ease:"sine.inOut"}).to(c.value.rotation,{x:n.rotation.x,y:n.rotation.y,z:n.rotation.z,duration:1.8,ease:"sine.inOut",onUpdate:()=>{c.value.updateMatrix()}},0)};return a(()=>p.flyToLayerModel,e=>{L(e,h)}),l(()=>{v.domElement.addEventListener("click",O)}),s(()=>{z.value&&z.value.kill()}),u({flyToCamera:L}),(e,o)=>null}};export{r as default};

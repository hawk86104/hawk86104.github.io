import{_ as e,C as t,a0 as n}from"./three.KG0QRRig1731552996711.js";import{e as r,W as a,U as o,c as s}from"./@tresjs.01P8tiuF1731552996711.js";import{a as i}from"./index.oeIsV-zY1731552996711.js";import"./index.e_Pebw8b1731552996711.js";import{z as l}from"./three-custom-shader-material.B7Wbwjde1731552996711.js";import{p as u}from"./gl-noise.BrVtymbx1731552996711.js";import{d as c,b as p,a3 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as M,m as x,al as C}from"./@vue.-THQH3GC1731552996711.js";import{P as T}from"./tweakpane.yHWGBmom1731552996711.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.FpT7kM1i1731552996711.js";import"./@vueuse.YduQ9gvc1731552996711.js";import"./three-stdlib.8zsNN-Kc1731552996711.js";import"./@pmndrs.n3UO_zuX1731552996711.js";import"./object-hash.DFvx-EIK1731552996711.js";import"./@amap.QHC596bA1731552996711.js";import"./jszip.k9OTGFad1731552996711.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.MURMqYtt1731552996711.js";import"./all.three.wBtGWCdG1731552996711.js";import"./oimophysics.x0jH7fze1731552996711.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.imZCinTf1731552996711.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.tj7KqDYp1731552996711.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.56_UCV-N1731552996711.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.jsXsTtdN1731552996711.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.Cq8B4Zam1731552996711.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.aIh8BHjc1731552996711.js";function S(e,t){const n=B();return(S=function(e,t){return n[e-=214]})(e,t)}const z=S;!function(e,t){const n=S,r=B();for(;;)try{if(979820===parseInt(n(256))/1*(parseInt(n(225))/2)+parseInt(n(220))/3+parseInt(n(221))/4+-parseInt(n(241))/5*(-parseInt(n(215))/6)+parseInt(n(219))/7*(-parseInt(n(272))/8)+parseInt(n(217))/9*(parseInt(n(259))/10)+parseInt(n(245))/11*(-parseInt(n(262))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[S(249)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){G(this,(function(){const e=S,t=new RegExp(e(248)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=D(e(235));t[e(269)](r+e(254))&&n.test(r+e(267))?D():r("0")}))()}();const H=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[S(249)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();H(void 0,(function(){const e=S;let t;try{t=Function(e(224)+e(252)+");")()}catch(a){t=window}const n=t[e(273)]=t[e(273)]||{},r=[e(247),e(276),e(238),e(229),e(234),e(278),"trace"];for(let o=0;o<r[e(264)];o++){const t=H[e(270)].prototype.bind(H),a=r[o],s=n[a]||t;t[e(274)]=H[e(246)](H),t.toString=s[e(258)][e(246)](s),n[a]=t}}))();const P=[z(243)],W=[z(232)];function B(){const e=['{}.constructor("return this")( )',"material","chain","brightness","1mTIzPl","Flatshading","toString","260AuskQw","customWaterMesh","height","12UNKfpX","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","length","uTime","counter","input","stateObject","test","constructor","Color","16JiTjUn","console","__proto__","waterHighlight","warn","needsUpdate","table","fragmentShader","56322XqWZuL","TresMesh","595701jTHavN","waterColor","2449321CEhiQH","3139425ermpNt","5192lEpSpZ","fragment","value","return (function() ","3864140WqiZSO","call","MeshPhysicalMaterial","convertLinearToSRGB","error","gger","#52a7f7","args","#b3ffff","exception","init","vertexShader","vertex","info","debu","uHeight","145IZkHrQ","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","rotation-x","TresBoxGeometry","36226894uEXwNj","bind","log","function *\\( *\\)","apply","tmRef","side"];return(B=function(){return e})()}const N=c({__name:z(260),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(231)},waterHighlight:{default:z(233)},brightness:{default:1},baseMaterial:{default:e[z(227)]}},setup(o){const s=z,i=o,c=p(null),b={vertex:s(263),fragment:s(242)},w={uTime:{value:0},waterColor:{value:new(e[s(271)])(i[s(218)]).convertLinearToSRGB()},waterHighlight:{value:new(e[s(271)])(i[s(275)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(255)]},uHeight:{value:i[s(261)]}},{onLoop:y}=r();return y((({elapsed:e})=>{const t=s;w[t(265)][t(223)]=-e/5})),f((()=>{const n=s;i[n(261)]&&(w[n(240)][n(223)]=i[n(261)]),i.waterColor&&(w.waterColor[n(223)]=new(e[n(271)])(i.waterColor).convertLinearToSRGB()),i[n(275)]&&(w[n(275)][n(223)]=new t(i[n(275)])[n(228)]()),i[n(255)]&&(w.brightness[n(223)]=i[n(255)])})),g((()=>i.Flatshading),(e=>{const t=s;c[t(223)][t(253)][t(277)]=!0})),g((()=>i.baseMaterial),(t=>{const r=s,a=new l({baseMaterial:e[t],vertexShader:u(b[r(237)]),fragmentShader:b.fragment,uniforms:w,flatShading:i[r(257)],side:n,roughness:.2,metalness:.1,silent:!0});c[r(223)][r(253)].dispose(),c[r(223)][r(253)]=a})),(t,r)=>{const o=s;return h(),m(o(216),{ref_key:o(250),ref:c,"rotation-x":-Math.PI/2},[v(o(244),{args:[5,5,t[o(261)],64,64,1]},null,8,W),d(_(a),{baseMaterial:e[o(227)],vertexShader:_(u)(b.vertex),fragmentShader:b[o(222)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:t[o(257)],silent:""},null,8,["baseMaterial",o(236),o(214),o(251),"flatShading"])],8,P)}}});function D(e){function t(e){const n=S;if("string"==typeof e)return function(e){}[n(270)]("while (true) {}")[n(249)](n(266));1!==(""+e/e)[n(264)]||e%20==0?function(){return!0}[n(270)]("debu"+n(230))[n(226)]("action"):function(){return!1}[n(270)](n(239)+n(230))[n(249)](n(268)),t(++e)}try{if(e)return t;t(0)}catch(n){}}function O(){const e=["浪头颜色","#3a78a2","stateObject","info","pos-y.jpg","TresDirectionalLight","constructor","length","MeshToonMaterial","MeshNormalMaterial","addBinding","Flatshading","MeshDepthMaterial","63tkNDGD","neg-z.jpg","153NqpKmC","console","call","pos-z.jpg","10768764FRgYgL","target","732290lrUVCd","#b3ffff","addBlade","change","toString","trace","while (true) {}","log","label","bind","waterColor","327064jPJyhC","customWater","apply","test","1082044KxhlWQ","3ureDLm","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","neg-x.jpg","prototype","MeshPhongMaterial","MeshStandardMaterial","MeshLambertMaterial","1691330XmuGNa","gger","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","debu","value","1816127yCjYru","string","counter","ACESFilmicToneMapping","TresAmbientLight","baseMaterial","action","init","MeshPhysicalMaterial","MeshBasicMaterial","4009864xQIpZP","input","waterHighlight"];return(O=function(){return e})()}const F=R;!function(e,t){const n=R,r=O();for(;;)try{if(975615===parseInt(n(526))/1+parseInt(n(512))/2*(-parseInt(n(513))/3)+parseInt(n(473))/4+parseInt(n(497))/5+parseInt(n(495))/6+-parseInt(n(489))/7*(parseInt(n(508))/8)+-parseInt(n(491))/9*(parseInt(n(521))/10))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const k=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){k(this,(function(){const e=R,t=new RegExp("function *\\( *\\)"),n=new RegExp(e(515),"i"),r=Z(e(470));t.test(r+"chain")&&n[e(511)](r+e(474))?Z():r("0")}))()}();const L=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[R(510)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function R(e,t){const n=O();return(R=function(e,t){return n[e-=464]})(e,t)}L(void 0,(function(){const e=R,t=function(){let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}return e}(),n=t[e(492)]=t[e(492)]||{},r=[e(504),e(514),e(479),"error","exception","table",e(502)];for(let a=0;a<r[e(483)];a++){const t=L[e(482)][e(517)][e(506)](L),o=r[a],s=n[o]||t;t.__proto__=L[e(506)](L),t[e(501)]=s[e(501)].bind(s),n[o]=t}}))();const A=c({__name:F(509),setup(t){const n=F,r=b({alpha:!0,toneMapping:e[n(466)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:n(477),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(498),brightness:1,baseMaterial:n(471)}),c=new T;return c[n(486)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,n(507),{label:"水体颜色"}),c[n(486)](u,n(475),{label:n(476)}),c[n(486)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c[n(486)](u,n(487),{label:"Flatshading"}),c[n(499)]({view:"list",label:"材质",options:[{text:n(471),value:"MeshPhysicalMaterial"},{text:n(472),value:n(472)},{text:n(485),value:"MeshNormalMaterial"},{text:"MeshStandardMaterial",value:n(519)},{text:"MeshPhongMaterial",value:n(518)},{text:n(484),value:n(484)},{text:n(520),value:n(520)},{text:"MeshDepthMaterial",value:n(488)}],value:u[n(468)]}),c.on(n(500),(e=>{const t=n;"材质"===e[t(496)][t(505)]&&(u[t(468)]=e[t(525)])})),(e,t)=>{const c=n;return h(),w(_(s),x(r,{"window-size":""}),{default:y((()=>[t[0]||(t[0]=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),j(M(a)),null,16),t[1]||(t[1]=v(c(467),{intensity:.5},null,-1)),t[2]||(t[2]=v(c(481),{position:[15,15,15],intensity:1},null,-1)),d(N,j(M(u)),null,16),d(_(I),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:["pos-x.jpg",c(516),c(480),"neg-y.jpg",c(494),c(490)],path:c(523)})])),_:1}))])),_:1},16)}}});function Z(e){function t(e){const n=R;if(typeof e===n(464))return function(e){}[n(482)](n(503)).apply(n(465));1!==(""+e/e).length||e%20==0?function(){return!0}[n(482)](n(524)+n(522))[n(493)](n(469)):function(){return!1}[n(482)]("debugger")[n(510)](n(478)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

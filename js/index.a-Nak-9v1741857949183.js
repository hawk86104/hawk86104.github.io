var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.U8tGg5xY1741857949183.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2VEhsXTy1741857949183.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.1RG2x29V1741857949183.js";import{V as o,U as s,C as l,l as c,W as u,aU as p,a as f,_ as x,A as v,b as m,M as w,ar as h}from"./three.Gi_-4zeu1741857949183.js";import{m as g,e as d}from"./@tresjs.8SAr0PX_1741857949183.js";import{u as y}from"./index.f40bqtgT1741857949183.js";import{F as S,C as P}from"./three-stdlib._1jCUDZZ1741857949183.js";import{d as _}from"./@vue.NRI7TcgI1741857949183.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.uz_h8IVC1741857949183.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.zRAWhung1741857949183.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.RWFQuDYX1741857949183.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.H4p7Rn6a1741857949183.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Ta0efO_c1741857949183.js";function z(t,e){const n=I();return(z=function(t,e){return n[t-=154]})(t,e)}!function(t,e){const n=z,i=I();for(;;)try{if(940003===parseInt(n(176))/1+-parseInt(n(162))/2*(parseInt(n(186))/3)+-parseInt(n(160))/4+parseInt(n(185))/5*(parseInt(n(172))/6)+parseInt(n(163))/7+-parseInt(n(154))/8+parseInt(n(166))/9)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(159)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function I(){const t=["1200897zZebwc","gger","counter","toString","trace","__proto__","20958aGXrXk","exception","constructor","function *\\( *\\)","1587997Xbdhgu","string","while (true) {}","stateObject","console","debu","table","return (function() ","bind","930yVybAh","3NYVtUb","warn","4949336ezvMKq","call","chain","test",'{}.constructor("return this")( )',"apply","6564700YHGGns","input","1945382suYCcK","12609856dUvgWd","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log"];return(I=function(){return t})()}!function(){b(this,(function(){const t=z,e=new RegExp(t(175)),n=new RegExp(t(164),"i"),i=M("init");e.test(i+t(156))&&n[t(157)](i+t(161))?M():i("0")}))()}();const E=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(159)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();E(void 0,(function(){const t=z;let e;try{e=Function(t(183)+t(158)+");")()}catch(r){e=window}const n=e[t(180)]=e[t(180)]||{},i=[t(165),t(187),"info","error",t(173),t(182),t(170)];for(let a=0;a<i.length;a++){const e=E.constructor.prototype.bind(E),r=i[a],o=n[r]||e;e[t(171)]=E[t(184)](E),e[t(169)]=o[t(169)][t(184)](o),n[r]=e}}))();function M(t){function e(t){const n=z;if(typeof t===n(177))return function(t){}[n(174)](n(178))[n(159)](n(168));1!==(""+t/t).length||t%20==0?function(){return!0}[n(174)]("debu"+n(167))[n(155)]("action"):function(){return!1}.constructor(n(181)+n(167))[n(159)](n(179)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const A=D;function D(t,e){const n=L();return(D=function(t,e){return n[t-=184]})(t,e)}function L(){const t=["length","3801024irivaZ","exception","12492JiFVEc","123Gwczfu","134870waPfKt","1179856LbZDdq","15duPNOC","891NFExoL","constructor",'{}.constructor("return this")( )',"__proto__","counter","33UqYlLF","uniforms","apply","return (function() ","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","42juMruC","prototype","while (true) {}","15060201EqjJPW","console","defines","error","function *\\( *\\)","call","string","163004tZPsPw","133204DGhTju","stateObject","init","bind","trace","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","toString","log","debu","action","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","input","2290exYkYd"];return(L=function(){return t})()}!function(t,e){const n=D,i=L();for(;;)try{if(924739===-parseInt(n(205))/1*(parseInt(n(184))/2)+-parseInt(n(202))/3*(parseInt(n(185))/4)+parseInt(n(197))/5*(parseInt(n(201))/6)+-parseInt(n(217))/7*(parseInt(n(204))/8)+-parseInt(n(206))/9*(-parseInt(n(203))/10)+-parseInt(n(211))/11*(-parseInt(n(199))/12)+parseInt(n(220))/13)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const U=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(213)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){U(this,(function(){const t=D,e=new RegExp(t(224)),n=new RegExp(t(216),"i"),i=j(t(187));e.test(i+"chain")&&n.test(i+t(196))?j():i("0")}))()}();const O=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(213)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function T(t){const e=D,n=a({},t);return e(222)in t&&(n.defines=a({},t.defines)),e(212)in t&&(n[e(212)]=s.clone(t[e(212)])),n}O(void 0,(function(){const t=D;let e;try{e=Function(t(214)+t(208)+");")()}catch(r){e=window}const n=e[t(221)]=e[t(221)]||{},i=[t(192),"warn","info",t(223),t(200),"table",t(189)];for(let a=0;a<i[t(198)];a++){const e=O.constructor[t(218)][t(188)](O),r=i[a],o=n[r]||e;e[t(209)]=O.bind(O),e[t(191)]=o[t(191)][t(188)](o),n[r]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t",fragmentShader:A(195)+'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n'+A(190)};function j(t){function e(t){const n=D;if(typeof t===n(226))return function(t){}.constructor(n(219))[n(213)](n(210));1!==(""+t/t).length||t%20==0?function(){return!0}[n(207)](n(193)+n(215))[n(225)](n(194)):function(){return!1}[n(207)]("debu"+n(215)).apply(n(186)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const R=N;!function(t,e){const n=N,i=W();for(;;)try{if(915898===parseInt(n(512))/1*(-parseInt(n(514))/2)+parseInt(n(559))/3+parseInt(n(503))/4+-parseInt(n(500))/5*(-parseInt(n(527))/6)+parseInt(n(520))/7*(parseInt(n(569))/8)+parseInt(n(545))/9+parseInt(n(536))/10*(-parseInt(n(524))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[N(493)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){C(this,(function(){const t=N,e=new RegExp(t(564)),n=new RegExp(t(550),"i"),i=Z(t(539));e[t(499)](i+t(526))&&n[t(499)](i+t(541))?Z():i("0")}))()}();const F=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[N(493)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function N(t,e){const n=W();return(N=function(t,e){return n[t-=492]})(t,e)}function W(){const t=["setClearAlpha","Y_IS_EVEN","constructor","5800698FCYYAt","gger","info","counter","fragmentShader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","parentLevel","originalMapSize","debu","copy","trace","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","autoClear","update","3901725YTiRVD","warn","clear","return (function() ","image","function *\\( *\\)","value","setSize","replace","isWebGLRenderTarget","72CkpJQt","magFilter","_copyQuad","stateObject","setViewOffset","apply","setClearColor","_mipMaterials","bind","tDiffuse","setRenderTarget","test","230970uelyWJ","set","camera","5087072SlDaoE","floorPowerOfTwo","error","_swapTarget","X_IS_EVEN","getClearColor","forEach","type","map","2801fSaxnF","texture","1194QNUXVc","__proto__","toString","minFilter","string","console","834932FmOmXN","table","uniforms","defines","946EAujZd","log","chain","144AZFaxM","getClearAlpha","length","floor","parentMapSize","height","call","render","dispose","326850lQPROD","width","exception","init","getRenderTarget","input"];return(W=function(){return t})()}F(void 0,(function(){const t=N,e=function(){const t=N;let e;try{e=Function(t(562)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(519)]=e.console||{},i=[t(525),t(560),t(547),t(505),t(538),t(521),t(555)];for(let r=0;r<i[t(529)];r++){const e=F[t(544)].prototype[t(496)](F),a=i[r],o=n[a]||e;e[t(515)]=F.bind(F),e[t(516)]=o[t(516)][t(496)](o),n[a]=e}}))();const k=new l;class Y{constructor(t){const e=N;!t&&(t=e(556));const n=T(V);n[e(549)]=n.fragmentShader[e(567)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(T(n)),i[0][e(523)][e(507)]=0,i[0][e(523)][e(543)]=0,i[1]=new c(T(n)),i[1][e(523)][e(507)]=1,i[1][e(523)].Y_IS_EVEN=0,i[2]=new c(T(n)),i[2][e(523)][e(507)]=0,i[2][e(523)].Y_IS_EVEN=1,i[3]=new c(T(n)),i[3][e(523)][e(507)]=1,i[3][e(523)][e(543)]=1;const r=new u;r[e(513)][e(517)]=p,r[e(513)][e(570)]=p,this[e(506)]=r,this[e(571)]=new S(new c(P)),this._mipQuad=new S(null),this[e(495)]=i}[R(558)](t,e,n,i=!1){const r=R;t[r(568)]&&(t=t[r(513)]);const o=n.autoClear,s=n[r(528)](),l=n[r(540)]();n[r(508)](k);const c=this[r(571)],u=this._mipQuad,p=this._swapTarget,x=this._mipMaterials;let v,m;i?(v=f.floorPowerOfTwo(t[r(563)][r(537)]),m=f[r(504)](t[r(563)][r(532)])):(v=Math[r(530)](t.image.width),m=Math[r(530)](t.image[r(532)]));const w=Math[r(530)](1.5*v),h=Math[r(530)](m);e[r(566)](w,h),p[r(513)].type!==e[r(513)][r(510)]?(p[r(535)](),p[r(554)](e),p.texture[r(563)]=a({},p[r(513)][r(563)])):p[r(566)](w,h),n[r(557)]=!1,n[r(494)](0),n[r(542)](),c.material[r(522)][r(497)][r(565)]=t,c[r(502)][r(492)](v,m,0,0,w,h),n[r(498)](e),n[r(561)](),c[r(534)](n),n[r(498)](p),n.clear(),c[r(534)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(522)][r(511)][r(565)]=p[r(513)],t[r(522)][r(551)][r(565)]=y,t.uniforms[r(531)][r(565)][r(501)](g,d),t[r(522)][r(552)][r(565)][r(501)](v,m),u.material=t,g=Math[r(530)](g/2),d=Math[r(530)](d/2);const i=h-2*d;n.setRenderTarget(e),u[r(502)].setViewOffset(g,d,-v,-i,w,h),u[r(534)](n),n[r(498)](p),t[r(522)][r(511)][r(565)]=e[r(513)],u.render(n),y++}return n[r(498)](l),n.setClearAlpha(s),n[r(494)](k),n[r(557)]=o,y+1}[R(535)](){const t=R;this[t(506)][t(535)](),this._mipQuad[t(535)](),this[t(571)][t(535)](),this[t(495)][t(509)]((t=>t.dispose()))}}function Z(t){function e(t){const n=N;if(typeof t===n(518))return function(t){}[n(544)]("while (true) {}").apply(n(548));1!==(""+t/t).length||t%20==0?function(){return!0}[n(544)](n(553)+n(546))[n(533)]("action"):function(){return!1}.constructor(n(553)+n(546))[n(493)](n(572)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=$,i=X();for(;;)try{if(517630===parseInt(n(528))/1+parseInt(n(486))/2+parseInt(n(467))/3*(parseInt(n(476))/4)+-parseInt(n(520))/5+-parseInt(n(470))/6+parseInt(n(527))/7+parseInt(n(523))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const G=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(481)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){G(this,(function(){const t=$,e=new RegExp(t(526)),n=new RegExp(t(485),"i"),i=K(t(466));e[t(483)](i+t(503))&&n[t(483)](i+t(493))?K():i("0")}))()}();const H=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(481)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function X(){const t=["elements","resolution","getRenderTarget","string","stateObject","matrixWorldInverse","reflect","lookAt","2340350FnKhKR","matrixWorld","Matrix4","11225872PXPYDt","return (function() ","dot","function *\\( *\\)","96481pCcdLP","232812JTiiul","call","applyQuaternion","getWorldQuaternion","setMask","setRenderTarget","set","constant","log","projectPoint","sign","Quaternion","value","toString","position","gger","UnsignedByteType","prototype",'{}.constructor("return this")( )',"init","33aYPSIw","Vector3","add","6059892mNoLmK","Plane","trace","bind","parent","constructor","108036EdSFaI","console","length","normal","autoClear","apply","getWorldPosition","test","clear","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","97508cNiyKf","table","counter","debu","sub","info","ignoreObjects","input","state","multiplyScalar","texture","__proto__","negate","forEach","exception","updateMatrixWorld","projectionMatrix","chain","visible","clone","action","applyMatrix4","PerspectiveCamera","warn","multiply","copy"];return(X=function(){return t})()}H(void 0,(function(){const t=$,e=function(){const t=$;let e;try{e=Function(t(524)+t(465)+");")()}catch(n){e=window}return e}(),n=e[t(477)]=e.console||{},i=[t(455),t(509),t(491),"error",t(500),t(487),t(472)];for(let r=0;r<i[t(478)];r++){const e=H[t(475)][t(464)][t(473)](H),a=i[r],o=n[a]||e;e[t(497)]=H[t(473)](H),e[t(460)]=o[t(460)][t(473)](o),n[a]=e}}))();const Q=_({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=$,i=t,r=new(x[n(471)]),a=new(x[n(522)]),o=new(x[n(508)]),s=new Y,l=y({width:i[n(513)],height:i[n(513)],settings:{type:v}}),c=y({width:i.resolution,height:i.resolution,settings:{type:x[n(463)]}}),{camera:u,renderer:p,scene:f}=g(),{onBeforeLoop:S}=d();return S((()=>{const t=n;(()=>{const t=n;if(!u.value)return;r[t(453)](new(x[t(468)])(0,1,0),0),r[t(507)](i[t(474)][t(521)]),o[t(511)](u[t(459)]);const e=new(x[t(468)])(0,0,1)[t(505)]()[t(498)](),s=u[t(459)][t(482)](new m);e[t(518)](r[t(479)]);const c=new(x[t(468)]);r[t(456)](s,c);const v=c[t(505)]();v[t(490)](s),v[t(469)](c),o[t(461)][t(511)](v);const g=new(x[t(468)])(0,0,-1);g[t(449)](u[t(459)][t(450)](new(x[t(458)]))),g[t(469)](s);const d=new(x[t(468)]);i[t(474)].getWorldPosition(d),d[t(490)](g),d.reflect(r[t(479)]).negate(),d[t(469)](i[t(474)].getWorldPosition(new(x[t(468)]))),o.up.set(0,1,0),o[t(449)](u[t(459)].getWorldQuaternion(new(x[t(458)]))),o.up.reflect(r[t(479)]),o[t(519)](d),o[t(501)]();const y=new w;y[t(453)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(o[t(502)]),y[t(510)](o[t(517)]),a.copy(y),r[t(507)](o[t(517)]);const S=new h(r[t(479)].x,r[t(479)].y,r[t(479)].z,r[t(454)]),P=o[t(502)],_=new h;_.x=(Math[t(457)](S.x)+P[t(512)][8])/P.elements[0],_.y=(Math[t(457)](S.y)+P.elements[9])/P[t(512)][5],_.z=-1,_.w=(1+P[t(512)][10])/P.elements[14],S[t(495)](2/S[t(525)](_)),P[t(512)][2]=S.x,P[t(512)][6]=S.y,P[t(512)][10]=S.z+1,P[t(512)][14]=S.w;const z=p[t(459)][t(514)]();p.value[t(452)](l.value),p[t(459)][t(494)].buffers.depth[t(451)](!0),!1===p[t(459)][t(480)]&&p[t(459)][t(484)](),i[t(492)][t(499)]((e=>e[t(504)]=!1)),p.value.render(f[t(459)],o),i[t(492)][t(499)]((t=>t.visible=!0)),p[t(459)][t(452)](z)})(),l[t(459)]&&c[t(459)]&&p[t(459)]&&s.update(l.value[t(496)],c[t(459)],p[t(459)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function $(t,e){const n=X();return($=function(t,e){return n[t-=449]})(t,e)}function K(t){function e(t){const n=$;if(typeof t===n(515))return function(t){}.constructor("while (true) {}")[n(481)](n(488));1!==(""+t/t)[n(478)]||t%20==0?function(){return!0}[n(475)]("debu"+n(462))[n(529)](n(506)):function(){return!1}[n(475)](n(489)+n(462))[n(481)](n(516)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,i=B();;)try{if(612772===parseInt(n(233))/1+-parseInt(n(234))/2+parseInt(n(225))/3*(parseInt(n(247))/4)+-parseInt(n(246))/5*(-parseInt(n(252))/6)+parseInt(n(245))/7+-parseInt(n(241))/8+-parseInt(n(224))/9*(parseInt(n(221))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var q=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){q(this,(function(){var t=tt,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(230),"i"),i=et(t(235));e[t(220)](i+t(228))&&n[t(220)](i+"input")?et():i("0")}))()}();var J=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(226)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function B(){var t=["2489430zKtRIg","constructor","warn","console","test","105890muohFq","prototype","gger","369uomWTN","36678vxvGbg","apply","__proto__","chain","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","bind","343797BsqmiV","2317476wHGRDh","init","action","return (function() ","exception","length",'{}.constructor("return this")( )',"3204392aGlolj","info","stateObject","while (true) {}","5914818bKDORb","5WJoszZ","328xdaIIv","toString","trace","string","debu"];return(B=function(){return t})()}function tt(t,e){var n=B();return(tt=function(t,e){return n[t-=219]})(t,e)}function et(t){function e(t){var n=tt;if(typeof t===n(250))return function(t){}[n(253)](n(244))[n(226)]("counter");1!==(""+t/t)[n(239)]||t%20==0?function(){return!0}[n(253)](n(251)+n(223)).call(n(236)):function(){return!1}[n(253)](n(251)+n(223))[n(226)](n(243)),e(++t)}try{if(t)return e;e(0)}catch(n){}}J(void 0,(function(){var t,e=tt;try{t=Function(e(237)+e(240)+");")()}catch(l){t=window}for(var n=t[e(219)]=t.console||{},i=[e(231),e(254),e(242),e(229),e(238),"table",e(249)],r=0;r<i[e(239)];r++){var a=J[e(253)][e(222)][e(232)](J),o=i[r],s=n[o]||a;a[e(227)]=J[e(232)](J),a[e(248)]=s[e(248)].bind(s),n[o]=a}}))();export{Q as _};

import{_ as t,C as e}from"./three.YiCjTDWq1728554291399.js";import{U as n,J as r,Y as s,L as a}from"./@tresjs.IlQvaTJ91728554291399.js";import{a as o}from"./index.Tylq_rsN1728554291399.js";import"./index.m1UpxKuX1728554291399.js";import{C as i}from"./three-custom-shader-material.jyK-33IL1728554291399.js";import"./object-hash.T8hJJgjS1728554291399.js";import"./@amap.pS6gfiLZ1728554291399.js";import"./glsl-tokenizer.y_V5nCRK1728554291399.js";import{p as l}from"./gl-noise.BrVtymbx1728554291399.js";import{d as c,b as u,a3 as p,w as f,o as g,E as h,L as m,j as v,u as d,r as _,f as b,g as w,aj as M,ak as y,m as j,al as x}from"./@vue.JNsx1iN61728554291399.js";import{P as C}from"./tweakpane.yHWGBmom1728554291399.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Fr15TeFX1728554291399.js";import"./@vueuse.nb-8z3af1728554291399.js";import"./three-stdlib.W1Z_QaHt1728554291399.js";import"./@pmndrs.X_zaObHB1728554291399.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.yVu1PtzU1728554291399.js";import"./all.three.fgJ2kEZ01728554291399.js";import"./oimophysics.x0jH7fze1728554291399.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.LMYSeSjg1728554291399.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.X8rJNL0t1728554291399.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.pgQrnDpo1728554291399.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.KaSPvL3S1728554291399.js";import"./glsl-token-string.dXz7aW6T1728554291399.js";import"./glsl-token-functions.ziXdc34f1728554291399.js";import"./jszip.ZN8xj_JH1728554291399.js";const S=D;function I(){const t=["value","exception","waterColor","__proto__","2724YNBWso","vertexShader","218302ZaAqCi","waterHighlight","while (true) {}","function *\\( *\\)","apply","constructor","input","#b3ffff","374630hpgBxN","208728sgCbrL","Color","brightness","log","dispose","chain","height","material","customWaterMesh","warn","console","vertex","MeshPhysicalMaterial","TresBoxGeometry","fragment","uTime","7001324XcsXfZ","length","24HtGcQw","16fupgsM","flatShading","DoubleSide","return (function() ","Flatshading","prototype","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","stateObject","uHeight","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","bind","info","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","call","310wgMwkd","toString","init","string","30gveWhq","226517VjMsaW","trace","gger","test","convertLinearToSRGB","TresMesh","table","76959idNSmI","counter","#52a7f7","baseMaterial"];return(I=function(){return t})()}!function(t,e){const n=D,r=I();for(;;)try{if(158248===parseInt(n(522))/1+parseInt(n(521))/2*(parseInt(n(537))/3)+parseInt(n(548))/4+-parseInt(n(547))/5*(-parseInt(n(500))/6)+-parseInt(n(539))/7*(parseInt(n(501))/8)+-parseInt(n(529))/9*(-parseInt(n(517))/10)+-parseInt(n(498))/11)break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[D(543)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=D,e=new RegExp(t(542)),n=new RegExp(t(508),"i"),r=O(t(519));e[t(525)](r+t(553))&&n[t(525)](r+t(545))?O():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[D(543)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();B(void 0,(function(){const t=D;let e;try{e=Function(t(504)+'{}.constructor("return this")( ));')()}catch(s){e=window}const n=e[t(558)]=e.console||{},r=[t(551),t(557),t(514),t(509),t(534),t(528),t(523)];for(let a=0;a<r.length;a++){const e=B[t(544)][t(506)].bind(B),s=r[a],o=n[s]||e;e[t(536)]=B[t(513)](B),e[t(518)]=o[t(518)][t(513)](o),n[s]=e}}))();const G=["rotation-x"],W=["args"];function D(t,e){const n=I();return(D=function(t,e){return n[t-=497]})(t,e)}const H=c({__name:S(556),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(531)},waterHighlight:{default:S(546)},brightness:{default:1},baseMaterial:{default:t[S(560)]}},setup(s){const a=S,o=s,c=u(null),_={vertex:a(515),fragment:a(512)},b={uTime:{value:0},waterColor:{value:new e(o[a(535)])[a(526)]()},waterHighlight:{value:new(t[a(549)])(o[a(540)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o[a(550)]},uHeight:{value:o[a(554)]}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=a;b[e(497)][e(533)]=-t/5})),p((()=>{const e=a;o[e(554)]&&(b[e(511)][e(533)]=o[e(554)]),o[e(535)]&&(b[e(535)][e(533)]=new(t[e(549)])(o[e(535)])[e(526)]()),o[e(540)]&&(b[e(540)][e(533)]=new(t[e(549)])(o[e(540)])[e(526)]()),o[e(550)]&&(b[e(550)].value=o.brightness)})),f((()=>o[a(505)]),(t=>{const e=a;c.value[e(555)].needsUpdate=!0})),f((()=>o.baseMaterial),(e=>{const n=a,r=new i({baseMaterial:t[e],vertexShader:l(_[n(559)]),fragmentShader:_.fragment,uniforms:b,flatShading:o[n(505)],side:t[n(503)],roughness:.2,metalness:.1,silent:!0});c.value[n(555)][n(552)](),c[n(533)].material=r})),(e,n)=>{const s=a;return g(),h(s(527),{ref_key:"tmRef",ref:c,"rotation-x":-Math.PI/2},[m(s(561),{args:[5,5,e[s(554)],64,64,1]},null,8,W),v(d(r),{baseMaterial:t[s(560)],vertexShader:d(l)(_[s(559)]),fragmentShader:_[s(562)],uniforms:b,side:t[s(503)],roughness:.2,metalness:.1,flatShading:e[s(505)],silent:""},null,8,[s(532),s(538),"fragmentShader","side",s(502)])],8,G)}}});function O(t){function e(t){const n=D;if(typeof t===n(520))return function(t){}[n(544)](n(541)).apply(n(530));1!==(""+t/t)[n(499)]||t%20==0?function(){return!0}[n(544)](n(507)+n(524))[n(516)]("action"):function(){return!1}.constructor(n(507)+"gger")[n(543)](n(510)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const k=F;!function(t,e){const n=F,r=R();for(;;)try{if(673086===parseInt(n(200))/1+-parseInt(n(174))/2*(parseInt(n(212))/3)+parseInt(n(230))/4*(parseInt(n(233))/5)+parseInt(n(198))/6+parseInt(n(191))/7+parseInt(n(187))/8+parseInt(n(186))/9*(-parseInt(n(240))/10))break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(215)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){L(this,(function(){const t=F,e=new RegExp(t(218)),n=new RegExp(t(193),"i"),r=$(t(204));e[t(176)](r+t(236))&&n.test(r+t(188))?$():r("0")}))()}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function F(t,e){const n=R();return(F=function(t,e){return n[t-=174]})(t,e)}P(void 0,(function(){const t=F;let e;try{e=Function(t(209)+t(228)+");")()}catch(s){e=window}const n=e[t(225)]=e[t(225)]||{},r=[t(235),t(181),"info","error",t(234),t(205),t(213)];for(let a=0;a<r.length;a++){const e=P[t(224)][t(189)][t(177)](P),s=r[a],o=n[s]||e;e[t(227)]=P.bind(P),e[t(211)]=o.toString[t(177)](o),n[s]=e}}))();const A=m("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),N=m("TresAmbientLight",{intensity:.5},null,-1),Z=m(k(179),{position:[15,15,15],intensity:1},null,-1);function R(){const t=["pos-z.jpg","waterColor","1135AbXcyv","exception","log","chain","debu","label","brightness","40220DRDXof","475256BvbMZh","MeshDepthMaterial","test","bind","MeshBasicMaterial","TresDirectionalLight","length","warn","#3a78a2","#627179","neg-y.jpg","waterHighlight","4491mYOjuw","2712968bpxrxY","input","prototype","MeshStandardMaterial","3126102isegDZ","Flatshading","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","gger","#52a7f7","浪头颜色","4595352iVMQvE","MeshPhysicalMaterial","103292SOsWLf","addBlade","value","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","init","table","height","MeshLambertMaterial","baseMaterial","return (function() ","水体颜色","toString","3Lasyzg","trace","pos-y.jpg","apply","customWater","action","function *\\( *\\)","neg-z.jpg","list","ACESFilmicToneMapping","addBinding","target","constructor","console","MeshPhongMaterial","__proto__",'{}.constructor("return this")( )',"MeshNormalMaterial","22252ZLLZBU"];return(R=function(){return t})()}const E=c({__name:k(216),setup(e){const n=k,r=_({alpha:!0,toneMapping:t[n(221)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(183),sectionColor:n(182),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=_({height:.2,Flatshading:!1,waterColor:n(196),waterHighlight:"#b3ffff",brightness:1,baseMaterial:"MeshPhysicalMaterial"}),u=new C;return u[n(222)](c,n(206),{label:"高度",min:.1,max:5,step:.1}),u[n(222)](c,n(232),{label:n(210)}),u[n(222)](c,n(185),{label:n(197)}),u[n(222)](c,n(239),{label:"亮度",min:0,max:1,step:.01}),u[n(222)](c,n(192),{label:n(192)}),u[n(201)]({view:n(220),label:"材质",options:[{text:n(199),value:n(199)},{text:n(178),value:n(178)},{text:n(229),value:n(229)},{text:n(190),value:n(190)},{text:n(226),value:n(226)},{text:"MeshToonMaterial",value:"MeshToonMaterial"},{text:n(207),value:"MeshLambertMaterial"},{text:"MeshDepthMaterial",value:n(175)}],value:c[n(208)]}),u.on("change",(t=>{const e=n;"材质"===t[e(223)][e(238)]&&(c[e(208)]=t[e(202)])})),(t,e)=>{const u=n;return g(),b(d(a),j(r,{"window-size":""}),{default:w((()=>[A,v(d(s),M(y(i)),null,16),N,Z,v(H,M(y(c)),null,16),v(d(z),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[v(d(o),{files:["pos-x.jpg","neg-x.jpg",u(214),u(184),u(231),u(219)],path:u(203)})])),_:1}))])),_:1},16)}}});function $(t){function e(t){const n=F;if("string"==typeof t)return function(t){}[n(224)]("while (true) {}")[n(215)](n(194));1!==(""+t/t)[n(180)]||t%20==0?function(){return!0}.constructor(n(237)+n(195)).call(n(217)):function(){return!1}[n(224)](n(237)+n(195))[n(215)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

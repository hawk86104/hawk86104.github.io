var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as S,ca as w,cb as M,K as R,f as E,V as A,g as T,_ as D,bQ as z,m as P,bm as O,k as C,bt as F,d as B,aj as k,B as j,a as U,aP as N,e as L,M as H,as as Z,a9 as G}from"./three.1FILWcBb1734746792122.js";import{m as W,D as V,e as Y}from"./@tresjs.vA_UT8oy1734746792122.js";import{R as q}from"./three-stdlib.1ZAvCJOA1734746792122.js";import{v as $,b as X,w as K,a as Q,u as J,d as nn,U as tn,a6 as en,a4 as rn,o as on,D as an,G as cn,I as sn,aa as un,a3 as ln,q as fn,f as pn,J as dn,ab as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a9 as xn,m as bn}from"./@vue.-THQH3GC1734746792122.js";import{M as In,a as Sn,C as wn}from"./@pmndrs.53rYJjok1734746792122.js";import{h as Mn}from"./object-hash.J27X2Uyf1734746792122.js";var Rn=zn;function En(){var n=["remove","stateObject","2796384EcPTzD","virtualScene","2514MOXOKa","warn","3zhJoqW","console","140IKwqhL","while (true) {}","4872492FTHcPg","236047BsqyEc","128040tqgbVX","459NFHnKT","map","table","debu","apply","64RrQdpk","destructor","150aJqUvB","100430YQdRkF","length","material","counter","dispose","test","traverse","action","return (function() ","string","constructor","trace","bind","geometry",'{}.constructor("return this")( )',"input","gger","6365592jKGIbQ","function *\\( *\\)","prototype","init","toString","info","exception","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","add","__proto__","log"];return(En=function(){return n})()}!function(n,t){for(var e=zn,r=En();;)try{if(411839===parseInt(e(349))/1*(-parseInt(e(340))/2)+-parseInt(e(342))/3*(-parseInt(e(338))/4)+-parseInt(e(356))/5*(parseInt(e(348))/6)+-parseInt(e(347))/7*(parseInt(e(354))/8)+parseInt(e(346))/9+-parseInt(e(344))/10*(-parseInt(e(357))/11)+parseInt(e(374))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(353)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=zn,t=new RegExp(n(375)),e=new RegExp(n(382),"i"),r=On(n(377));t[n(362)](r+"chain")&&e[n(362)](r+n(372))?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(353)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tn(void 0,(function(){var n,t=zn;try{n=Function(t(365)+t(371)+");")()}catch(s){n=window}for(var e=n[t(343)]=n[t(343)]||{},r=[t(385),t(341),t(379),t(381),t(380),t(351),t(368)],o=0;o<r[t(358)];o++){var i=Tn[t(367)][t(376)][t(369)](Tn),a=r[o],c=e[a]||i;i[t(384)]=Tn.bind(Tn),i[t(378)]=c[t(378)][t(369)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=zn;super(),this[n(339)]=null,this[n(339)]=new u}[Rn(383)](...n){var t=Rn;return this[t(339)][t(383)](...n),this}[Rn(355)](){var n=Rn;this.virtualScene[n(363)]((t=>{var e=n;t instanceof l&&(t[e(370)][e(361)](),t[e(359)][e(361)](),t[e(359)][e(350)]&&t[e(359)].map.dispose(),this.virtualScene[e(386)](t))})),this.virtualScene=null}}function zn(n,t){var e=En();return(zn=function(n,t){return e[n-=338]})(n,t)}const Pn=Dn;function On(n){function t(n){var e=zn;if(typeof n===e(366))return function(n){}[e(367)](e(345))[e(353)](e(360));1!==(""+n/n)[e(358)]||n%20==0?function(){return!0}.constructor("debu"+e(373)).call(e(364)):function(){return!1}[e(367)](e(352)+"gger").apply(e(387)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=Fn;function Fn(n,t){const e=Un();return(Fn=function(n,t){return e[n-=290]})(n,t)}!function(n,t){const e=Fn,r=Un();for(;;)try{if(216934===-parseInt(e(310))/1+parseInt(e(323))/2+-parseInt(e(304))/3*(parseInt(e(338))/4)+-parseInt(e(311))/5*(parseInt(e(312))/6)+-parseInt(e(315))/7+parseInt(e(327))/8*(-parseInt(e(307))/9)+parseInt(e(319))/10*(parseInt(e(306))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(330)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bn(this,(function(){const n=Fn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(309),"i"),r=Nn(n(301));t[n(329)](r+n(292))&&e[n(329)](r+n(294))?Nn():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(330)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=Fn,t=function(){const n=Fn;let t;try{t=Function(n(316)+n(326)+");")()}catch(e){t=window}return t}(),e=t[n(290)]=t[n(290)]||{},r=[n(291),n(308),"info",n(303),n(296),n(333),n(331)];for(let o=0;o<r.length;o++){const t=kn.constructor[n(314)].bind(kn),i=r[o],a=e[i]||t;t[n(325)]=kn[n(302)](kn),t[n(318)]=a.toString[n(302)](a),e[i]=t}}))();const jn={sunset:Cn(295),studio:Cn(336),city:Cn(320),umbrellas:Cn(334),night:"outdoor/satara_night_1k.hdr",forest:Cn(300),snow:Cn(328),dawn:Cn(321),hangar:Cn(337),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Cn(313),shangai:Cn(298)};function Un(){const n=["__proto__",'{}.constructor("return this")( )',"165800InYSAf","outdoor/snowy_forest_path_01_1k.hdr","test","apply","trace","length","table","outdoor/outdoor_umbrellas_1k.hdr","constructor","studio/poly_haven_studio_1k.hdr","indoor/small_hangar_01_1k.hdr","632oSwlqs","console","log","chain","debu","input","venice/venice_sunset_1k.hdr","exception","gger","city/shanghai_bund_1k.hdr","call","outood/mossy_forest_1k.hdr","init","bind","error","5091FSVVuj","counter","922713iCsxIR","99gMfMjj","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","101631xdfUnX","275sMbdmD","5754GUHRnD","city/modern_buildings_2_1k.hdr","prototype","2174984ipZAja","return (function() ","stateObject","toString","130qSdYMV","city/canary_wharf_1k.hdr","kiara/kiara_1_dawn_1k.hdr","string","175288JuDOrT","action"];return(Un=function(){return n})()}function Nn(n){function t(n){const e=Fn;if(typeof n===e(322))return function(n){}[e(335)]("while (true) {}")[e(330)](e(305));1!==(""+n/n)[e(332)]||n%20==0?function(){return!0}[e(335)]("debu"+e(297))[e(299)](e(324)):function(){return!1}.constructor(e(293)+e(297)).apply(e(317)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ln(){const n=["constructor","mapping","table","65bBpJAu","trace","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","isColor","1063101DkZOyO","console","8SHLeem","29840GTauBK","7982120qLcRkX","warn","counter","apply","while (true) {}","toString","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","__proto__","Failed to load environment map: ","keys","Preset must be one of: ","exception","5747184xRmxpc","12121220hWJnet","join","prototype","207810avRlfN","background","info","error","length","environment","backgroundBlurriness","1773186ZvGVni","value","bind","setPath","action",'{}.constructor("return this")( )',"test","isArray","gger","7OcmQbI"];return(Ln=function(){return n})()}const Hn=Wn;!function(n,t){const e=Wn,r=Ln();for(;;)try{if(504111===parseInt(e(313))/1+parseInt(e(339))/2+-parseInt(e(356))/3*(-parseInt(e(358))/4)+-parseInt(e(352))/5*(-parseInt(e(332))/6)+-parseInt(e(348))/7*(parseInt(e(314))/8)+parseInt(e(328))/9+-parseInt(e(329))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Wn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(321),"i"),r=Yn("init");t[n(345)](r+n(320))&&e[n(345)](r+"input")?Yn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Ln();return(Wn=function(n,t){return e[n-=313]})(n,t)}Gn(void 0,(function(){const n=Wn,t=function(){const n=Wn;let t;try{t=Function("return (function() "+n(344)+");")()}catch(e){t=window}return t}(),e=t[n(357)]=t[n(357)]||{},r=[n(322),n(315),n(334),n(335),n(327),n(351),n(353)];for(let o=0;o<r[n(336)];o++){const t=Gn[n(349)][n(331)][n(341)](Gn),i=r[o],a=e[i]||t;t[n(323)]=Gn[n(341)](Gn),t[n(319)]=a[n(319)][n(341)](a),e[i]=t}}))();const Vn=Hn(354);function Yn(n){function t(n){const e=Wn;if("string"==typeof n)return function(n){}[e(349)](e(318))[e(317)](e(316));1!==(""+n/n)[e(336)]||n%20==0?function(){return!0}.constructor("debu"+e(347)).call(e(343)):function(){return!1}[e(349)]("debu"+e(347))[e(317)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=Qn;!function(n,t){const e=Qn,r=Kn();for(;;)try{if(281755===-parseInt(e(539))/1+parseInt(e(517))/2*(-parseInt(e(549))/3)+-parseInt(e(513))/4+parseInt(e(541))/5*(parseInt(e(550))/6)+-parseInt(e(540))/7*(parseInt(e(532))/8)+parseInt(e(533))/9*(parseInt(e(526))/10)+parseInt(e(502))/11*(parseInt(e(519))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(537)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$n(this,(function(){const n=Qn,t=new RegExp(n(503)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=nt(n(530));t[n(524)](r+n(511))&&e[n(524)](r+n(509))?nt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["destructor","length","constructor","string","symbol","95982LQnYUx","47022KmKhkl","isArray","background","info","debu","minFilter","table","call","TresEnvSence","286ppqNuO","function *\\( *\\)","gger","dispose","type","prototype","generateMipmaps","input","while (true) {}","chain","bind","651116nEoJjV","update","stateObject","value","6yaeoaj","virtualScene","198564hqmvvU","near","counter","envSence","texture","test","default","110DhmAGS","log","component",'{}.constructor("return this")( )',"init","environment","6488wZeBEk","2934SGuwge","magFilter","resolution","toString","apply","__proto__","225104MOTobm","1127fvNXzF","295vQPXRV","frames","console"];return(Kn=function(){return n})()}function Qn(n,t){const e=Kn();return(Qn=function(n,t){return e[n-=494]})(n,t)}Xn(void 0,(function(){const n=Qn;let t;try{t=Function("return (function() "+n(529)+");")()}catch(o){t=window}const e=t.console=t[n(543)]||{},r=[n(527),"warn",n(496),"error","exception",n(499),"trace"];for(let i=0;i<r.length;i++){const t=Xn[n(546)][n(507)][n(512)](Xn),o=r[i],a=e[o]||t;t[n(538)]=Xn.bind(Xn),t.toString=a[n(536)][n(512)](a),e[o]=t}}))();const Jn=nn({__name:qn(528),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=X(null),x=null;const b=X(null);tn((()=>{var n,t;const e=Qn;null==(n=b[e(516)])||n[e(544)](),null==(t=y[e(516)])||t[e(505)]()}));const{onBeforeLoop:I}=Y();let S=1;I((()=>{const n=Qn;x&&b[n(516)]&&y.value&&(i[n(542)]===1/0||S<i.frames)&&(i.useDefaultScene?x[n(514)](s[n(516)],u[n(516)]):x[n(514)](s[n(516)],un(b[n(516)][n(518)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=$(n);K(n,(()=>{o()}));const l=X(null),h=Q((()=>Array[e(346)](c.value))),v=Q((()=>h[e(340)]?f:q));return K([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(340)])){try{l[r(340)]=await V(v[r(340)],h[r(340)]?[...J(n)]:J(n),(n=>{t&&n[r(342)](J(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l[r(340)]&&(l[r(340)].mapping=h.value?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r[t(340)]&&n&&(r[t(340)][t(337)]=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r[i(340)]){let e=(null==t?void 0:t[i(340)])?t[i(340)].texture:o,a=r.value[i(333)];!(null==a?void 0:a[i(355)])&&(a=void 0),r[i(340)][i(333)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(340)]&&n&&(r[t(340)][t(338)]=n)}),{immediate:!0}),K((()=>null==i?void 0:i[e(340)]),(async n=>{const t=e;if(n&&n in jn){const e=Vn,i=jn[n];try{l.value=await V(q,i,(n=>{e&&n[Wn(342)](e)}))}catch(r){throw new Error(t(324)+r)}l[t(340)]&&l.value&&(l.value[t(350)]=d),o()}else if(n&&!(n in jn))throw new Error(t(326)+Object[t(325)](jn)[t(330)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u[t(516)][t(531)]=n[t(523)],i.background&&(u[t(516)][t(495)]=n[t(523)])):(u[t(516)].environment=w.value,i[t(495)]&&(u[t(516)][t(495)]=w[t(516)]))};K(w,(n=>{const t=Qn;y[t(516)]&&M(y[t(516)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=Qn;null==(n=y[t(516)])||n[t(505)](),y[t(516)]=new v(i[t(535)]),x=new m(i[t(520)],i.far,y.value),i.useDefaultScene?(y[t(516)].texture.type=g,y[t(516)][t(523)][t(508)]=!1,y[t(516)][t(523)][t(498)]=_,y[t(516)][t(523)][t(534)]=_):y[t(516)][t(523)][t(506)]=h,M(y.value)};return K((()=>rn()[e(525)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(516)][o(523)][o(506)]!==h)&&(l=n(),Array[o(494)](l)&&l[o(545)]>0&&typeof(null==(t=l[0])?void 0:t[o(506)])!==o(548))?R():(null==(r=y[o(516)])||r[o(505)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(516)]=w,K((()=>i.useDefaultScene),(n=>{y.value&&R()})),(n,t)=>{const r=e;return J(y)?(on(),an(r(501),{key:0,ref_key:r(522),ref:b},[cn(n.$slots,r(525))],512)):sn("",!0)}}});function nt(n){function t(n){const e=Qn;if(typeof n===e(547))return function(n){}.constructor(e(510))[e(537)](e(521));1!==(""+n/n)[e(545)]||n%20==0?function(){return!0}.constructor(e(497)+e(504))[e(500)]("action"):function(){return!1}[e(546)](e(497)+e(504))[e(537)](e(515)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=et;function et(n,t){const e=rt();return(et=function(n,t){return e[n-=450]})(n,t)}function rt(){const n=["toString","830790GSKueW","side","intensity","test","toneMapped","material","478510ZxUsTc","490648loVpZZ","color","log","index","TresMeshBasicMaterial","735864QnXxkq","TresRingGeometry","console","rect","while (true) {}",'{}.constructor("return this")( )',"gger","info","constructor","multiplyScalar","set","circle","from","error","chain","function *\\( *\\)","740091JDvJHF","7BhgdPb","value","733140lWtrBn","153WbmOZJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","ring","exception","TresMesh","action","map","length","call","bind","needsUpdate","stateObject","table","prototype","warn","debu","init","3915015JfLcef","apply"];return(rt=function(){return n})()}!function(n,t){const e=et,r=rt();for(;;)try{if(448247===-parseInt(e(464))/1+-parseInt(e(470))/2+-parseInt(e(492))/3+-parseInt(e(495))/4+parseInt(e(461))/5+-parseInt(e(476))/6*(-parseInt(e(493))/7)+-parseInt(e(471))/8*(-parseInt(e(496))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=et,t=new RegExp(n(491)),e=new RegExp(n(497),"i"),r=ft(n(460));t[n(467)](r+n(490))&&e[n(467)](r+"input")?ft():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(462)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=et;let t;try{t=Function("return (function() "+n(481)+");")()}catch(o){t=window}const e=t[n(478)]=t[n(478)]||{},r=[n(473),n(458),n(483),n(489),n(500),n(456),"trace"];for(let i=0;i<r[n(451)];i++){const t=it[n(484)][n(457)][n(453)](it),o=r[i],a=e[o]||t;t[n(498)]=it[n(453)](it),t[n(463)]=a.toString[n(453)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[tt(468),tt(450),tt(465),tt(472)],lt=nn({__name:tt(474),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=X();return ln((()=>{const n=et;r[n(494)]&&(r[n(494)][n(472)].multiplyScalar(e[n(466)]),r[n(494)][n(454)]=!0)})),K((()=>e[t(472)]),(n=>{const o=t;r.value&&(r.value.color[o(486)](n),r[o(494)][o(472)][o(485)](e[o(466)]),r.value.needsUpdate=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(501),null,[e[i(488)]===i(487)?(on(),an(i(477),at)):e[i(488)]===i(499)?(on(),an(i(477),ct)):e.from===i(479)?(on(),an("TresPlaneGeometry",st)):(on(),pn(e.from,{key:3,args:e})),dn(i(475),{ref_key:i(469),ref:r,toneMapped:n[i(468)],map:n[i(450)],side:J(x),color:n[i(472)]},null,8,ut)])}}});function ft(n){function t(n){const e=et;if("string"==typeof n)return function(n){}[e(484)](e(480))[e(462)]("counter");1!==(""+n/n)[e(451)]||n%20==0?function(){return!0}[e(484)](e(459)+e(482))[e(452)](e(502)):function(){return!1}[e(484)](e(459)+e(482))[e(462)](e(455)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(){const n=["width","dispose","counter",'{}.constructor("return this")( )',"__proto__","render","clear","gger","982763RZqJxo","height","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","return (function() ","chain","input","action","bind","15811632PsloxZ","value","7588024djIKWX","prototype","info","call","94668zEzcBZ","warn","apply","type","table","1592148KvZSkl","3uLTqBd","log","test","length","stateObject","4915358ixDOMA","console","35ixEqLk","setRenderTarget","trace","format","depthTexture","545644lXGUtu","debu"];return(pt=function(){return n})()}!function(n,t){const e=vt,r=pt();for(;;)try{if(539697===parseInt(e(471))/1+-parseInt(e(492))/2+-parseInt(e(493))/3*(-parseInt(e(461))/4)+-parseInt(e(500))/5*(-parseInt(e(487))/6)+-parseInt(e(498))/7+-parseInt(e(483))/8+parseInt(e(481))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=vt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(474),"i"),r=gt("init");t[n(495)](r+n(477))&&e.test(r+n(478))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=pt();return(vt=function(n,t){return e[n-=460]})(n,t)}function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?$(n):$(vn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=vt;null==(n=t.value)||n[a(464)](),t[a(482)]=new b((null==r?void 0:r[a(482)])||p[a(463)][a(482)],(null==e?void 0:e[a(482)])||p[a(472)][a(482)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(482)])),(null==i?void 0:i[a(482)])&&(t[a(482)][a(460)]=new S((null==r?void 0:r[a(482)])||p[a(463)][a(482)],(null==e?void 0:e.value)||p.height.value),t[a(482)][a(460)][a(503)]=w,t[a(482)][a(460)][a(490)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(482)])&&(l[n(482)][n(501)](un(t[n(482)])),l[n(482)][n(469)](),l[n(482)][n(468)](un(f[n(482)]),un(u[n(482)])),l[n(482)].setRenderTarget(null))})),mn((()=>{var n;const e=vt;null==(n=t[e(482)])||n[e(464)]()})),t}function gt(n){function t(n){const e=vt;if("string"==typeof n)return function(n){}[e(473)]("while (true) {}")[e(489)](e(465));1!==(""+n/n)[e(496)]||n%20==0?function(){return!0}[e(473)](e(462)+e(470))[e(486)](e(479)):function(){return!1}.constructor("debu"+e(470))[e(489)](e(497)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=vt;let t;try{t=Function(n(476)+n(466)+");")()}catch(o){t=window}const e=t[n(499)]=t[n(499)]||{},r=[n(494),n(488),n(485),"error",n(475),n(491),n(502)];for(let i=0;i<r[n(496)];i++){const t=ht.constructor[n(484)][n(480)](ht),o=r[i],a=e[o]||t;t[n(467)]=ht.bind(ht),t.toString=a.toString[n(480)](a),e[o]=t}}))();const _t=wt;!function(n,t){const e=wt,r=It();for(;;)try{if(238122===-parseInt(e(318))/1+-parseInt(e(292))/2+parseInt(e(301))/3*(parseInt(e(319))/4)+-parseInt(e(314))/5*(parseInt(e(325))/6)+parseInt(e(288))/7+-parseInt(e(305))/8+parseInt(e(284))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=wt,t=new RegExp(n(309)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Mt(n(296));t[n(324)](r+"chain")&&e.test(r+n(321))?Mt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[wt(286)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=wt,t=function(){const n=wt;let t;try{t=Function(n(320)+n(302)+");")()}catch(e){t=window}return t}(),e=t[n(285)]=t.console||{},r=[n(297),n(335),"info","error",n(330),n(333),n(323)];for(let o=0;o<r[n(298)];o++){const t=xt[n(304)][n(315)][n(306)](xt),i=r[o],a=e[i]||t;t.__proto__=xt.bind(xt),t[n(326)]=a[n(326)][n(306)](a),e[i]=t}}))();const bt=[_t(312),_t(299)];function It(){const n=["toString","action","uuid","MeshTransmissionMaterialClass","exception","index","background","table","traverse","warn","call","3967830cBvAdO","console","apply","setRenderTarget","2692893kYsAZt","string","texture","material","905130FHkjqr","toneMapping","backsideThickness","gger","init","log","length","side","value","3qBzcln",'{}.constructor("return this")( )',"time","constructor","178416leknBp","bind","TresMeshTransmissionMaterial","counter","function *\\( *\\)","fboResolution","envMapIntensity","buffer","stateObject","100505lYaXYF","prototype","render","debu","395148wZkGgF","1371484EvWtia","return (function() ","input","thickness","trace","test","18EsYLLl"];return(It=function(){return n})()}const St=nn({__name:_t(331),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new Sn,{onBeforeLoop:f}=Y(),p=mt({width:u[e(310)],height:u.fboResolution,isLoop:!1}),d=mt({width:u[e(310)],height:u[e(310)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(300)]=function(n,t){const e=wt;let r;return n[e(334)]((n=>{const o=e;n.isMesh&&n.material&&n[o(291)][o(328)]===t&&(r=n)})),r}(i[n(300)],r[n(300)][n(328)])})),f((({elapsed:n})=>{const t=e;r.value[t(303)]=n,r[t(300)][t(312)]===d[t(300)].texture&&s[t(300)]&&(m=a[t(300)][t(293)],h=i[t(300)][t(332)],v=r[t(300)][t(311)],g=s[t(300)][t(291)].side,s[t(300)][t(291)]=l,u.backside&&(a.value.setRenderTarget(p[t(300)]),a[t(300)].render(i[t(300)],c[t(300)]),s[t(300)][t(291)]=r.value,s[t(300)][t(291)][t(322)]=u[t(294)],s[t(300)][t(291)][t(312)]=p[t(300)][t(290)],s.value[t(291)][t(299)]=R,s[t(300)][t(291)][t(311)]=0),a[t(300)][t(287)](d[t(300)]),a.value[t(316)](i[t(300)],c[t(300)]),s.value[t(291)][t(312)]=d[t(300)].texture,s.value[t(291)]=r.value,s[t(300)][t(291)][t(322)]=u[t(322)],s[t(300)].material[t(299)]=g,s[t(300)].material[t(311)]=v,i[t(300)].background=h,a.value[t(287)](null),a[t(300)][t(293)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an(o(307),{ref_key:o(329),ref:r,buffer:J(d)[o(290)],side:J(x)},null,8,bt)}}});function wt(n,t){const e=It();return(wt=function(n,t){return e[n-=284]})(n,t)}function Mt(n){function t(n){const e=wt;if(typeof n===e(289))return function(n){}.constructor("while (true) {}")[e(286)](e(308));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(295))[e(336)](e(327)):function(){return!1}[e(304)](e(317)+e(295))[e(286)](e(313)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=zt;!function(n,t){const e=zt,r=At();for(;;)try{if(569880===parseInt(e(483))/1+-parseInt(e(494))/2*(parseInt(e(482))/3)+-parseInt(e(505))/4+parseInt(e(481))/5*(parseInt(e(501))/6)+-parseInt(e(509))/7*(parseInt(e(512))/8)+parseInt(e(463))/9+parseInt(e(502))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(){const n=["2qkHgEz","call","disable","identity","table","value","__proto__","716424WQKdbR","15443020nFKQXN","chain","disableZ","4484400dHYqOm",'{}.constructor("return this")( )',"log","counter","10717XAeSqo","top","index","3856BCslmp","bind","TresGroup","disableY","test","prototype","min","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","7603965XdWDbe","getBoundingSphere","exception","bottom","position","$slots","function *\\( *\\)","toString","default","constructor","init","right","debu","left","gref","input","getCenter","apply","5tDHRlP","1663215aFnTdS","474736yOdzBG","trace","gger","outer","matrixWorld","console","length","while (true) {}","max","set","stateObject"];return(At=function(){return n})()}!function(){Et(this,(function(){const n=zt,t=new RegExp(n(469)),e=new RegExp(n(462),"i"),r=Pt(n(473));t[n(459)](r+n(503))&&e[n(459)](r+n(478))?Pt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tt(void 0,(function(){const n=zt;let t;try{t=Function("return (function() "+n(506)+");")()}catch(o){t=window}const e=t[n(488)]=t.console||{},r=[n(507),"warn","info","error",n(465),n(498),n(484)];for(let i=0;i<r[n(489)];i++){const t=Tt[n(472)][n(460)][n(513)](Tt),o=r[i],a=e[o]||t;t[n(500)]=Tt[n(513)](Tt),t[n(470)]=a[n(470)][n(513)](a),e[o]=t}}))();const Dt=nn({__name:Rt(511),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return fn((()=>{const n=zt;if(!r[n(499)])return;if(!o.value)return;r.value[n(487)][n(497)]();const e=(new E).setFromObject(o[n(499)],t.precise),i=new A,a=new T,c=e[n(491)].x-e.min.x,s=e.max.y-e[n(461)].y,u=e[n(491)].z-e[n(461)].z;e[n(479)](i),e[n(464)](a);const l=t[n(510)]?s/2:t[n(466)]?-s/2:0,f=t[n(476)]?-c/2:t[n(474)]?c/2:0,p=t.front?u/2:t.back?-u/2:0;r.value[n(467)][n(492)](t[n(496)]||t.disableX?0:-i.x+f,t.disable||t[n(458)]?0:-i.y+l,t[n(496)]||t[n(504)]?0:-i.z+p)})),(n,t)=>{const i=zt;return on(),an("TresGroup",{ref_key:i(477),ref:e},[dn(i(457),{ref_key:i(486),ref:r},[dn(i(457),{ref_key:"inner",ref:o},[cn(n[i(468)],i(471))],512)],512)],512)}}});function zt(n,t){const e=At();return(zt=function(n,t){return e[n-=457]})(n,t)}function Pt(n){function t(n){const e=zt;if("string"==typeof n)return function(n){}[e(472)](e(490))[e(480)](e(508));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(475)+"gger")[e(495)]("action"):function(){return!1}[e(472)](e(475)+e(485))[e(480)](e(493)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Bt;!function(n,t){const e=Bt,r=Ut();for(;;)try{if(671458===parseInt(e(286))/1+parseInt(e(319))/2+-parseInt(e(311))/3*(parseInt(e(313))/4)+parseInt(e(315))/5+parseInt(e(321))/6+parseInt(e(301))/7+-parseInt(e(304))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(324)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Bt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Lt(n(329));t.test(r+"chain")&&e[n(282)](r+"input")?Lt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(324)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Ut();return(Bt=function(n,t){return e[n-=278]})(n,t)}Ft(void 0,(function(){const n=Bt;let t;try{t=Function(n(323)+n(322)+");")()}catch(o){t=window}const e=t.console=t[n(300)]||{},r=[n(314),n(317),"info","error",n(289),n(308),n(325)];for(let i=0;i<r[n(303)];i++){const t=Ft[n(287)][n(326)][n(306)](Ft),o=r[i],a=e[o]||t;t.__proto__=Ft[n(306)](Ft),t[n(316)]=a.toString[n(306)](a),e[o]=t}}))();const kt=[Ot(280)],jt=["object"];function Ut(){const n=["add","gger","846039cwMSAg","set","4cxyNNg","log","6569115OhVbEw","toString","warn","debu","695002yPNJMf","helper","6015492ggQnHE",'{}.constructor("return this")( )',"return (function() ","apply","trace","prototype","action","update","init","backsideIOR","counter","object","worldRadius","test","#ffffff","intensity","while (true) {}","123008IsnBry","constructor","backside","exception","params","far","primitive","Vector3","TresGroup","string","stateObject","scene","ior","resolution","console","5592468EKRzHi","color","length","21058936vIepTR","causticsOnly","bind","index","table"];return(Ut=function(){return n})()}const Nt=nn({__name:Ot(307),props:{color:{default:Ot(283)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=W(),o=wn(r.value,{frames:1/0,resolution:e[t(299)],worldRadius:e[t(281)]});o[t(290)][t(288)]=!0;const i=gn(null);K(i,(n=>{const e=t;n&&o[e(297)][e(309)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(328)]()})),ln((()=>{const n=t;e[n(302)]&&o[n(290)].color[n(312)](e.color),e[n(298)]&&(o.params[n(298)]=e[n(298)]),e[n(278)]&&(o[n(290)][n(278)]=e[n(278)]),e[n(291)]&&(o.params[n(291)]=e[n(291)]),e.worldRadius&&(o[n(290)][n(281)]=e.worldRadius),e[n(284)]&&(o[n(290)][n(284)]=e[n(284)])})),K((()=>e[t(305)]),(n=>{o[t(290)].causticsOnly=n})),K((()=>e.lightSource),(n=>{const e=t;n&&o[e(290)].lightSource instanceof D[e(293)]&&o[e(290)].lightSource[e(312)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn(r(294),{ref_key:"group",ref:i},[cn(n.$slots,"default")],512),dn(r(292),{object:J(o).group,position:[0,.003,0]},null,8,kt),dn(r(292),{object:J(o)[r(320)],visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=Bt;if(typeof n===e(295))return function(n){}[e(287)](e(285))[e(324)](e(279));1!==(""+n/n)[e(303)]||n%20==0?function(){return!0}.constructor(e(318)+e(310)).call(e(327)):function(){return!1}.constructor(e(318)+e(310))[e(324)](e(296)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=Gt();for(;;)try{if(844666===parseInt(e(325))/1*(-parseInt(e(344))/2)+parseInt(e(335))/3*(parseInt(e(323))/4)+-parseInt(e(340))/5+-parseInt(e(349))/6+-parseInt(e(345))/7+parseInt(e(320))/8+parseInt(e(356))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ht(this,(function(){const n=Vt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Yt(n(358));t.test(r+n(337))&&e[n(317)](r+n(339))?Yt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(342)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["3939390WGDXru","shadowmap_pars_fragment","material","dispose","isArray","constructor","counter","32886153hEALyY","toString","init","stateObject","string","programs","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","bind","remove","traverse","test",'{}.constructor("return this")( )',"warn","9586024UYKJTH","length",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","894312BSsuID","error","23RoYptd","action","compile","debu","; i++) {\n        vogelSample = vogelDiskSample(j, ","trace","console","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","#if defined( SHADOWMAP_TYPE_PCF )","info","3DtYzhQ","forEach","chain","while (true) {}","input","3956650cgigXh","ShaderChunk","apply","properties","131046WcTpsm","8933806aHeBrZ","exception","log","#ifdef USE_SHADOWMAP"];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function("return (function() "+n(318)+");")()}catch(e){t=window}return t}(),e=t[n(331)]=t[n(331)]||{},r=[n(347),n(319),n(334),n(324),n(346),"table",n(330)];for(let o=0;o<r[n(321)];o++){const t=Zt.constructor.prototype[n(363)](Zt),i=r[o],a=e[i]||t;t.__proto__=Zt[n(363)](Zt),t[n(357)]=a[n(357)][n(363)](a),e[i]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=D[r(341)].shadowmap_pars_fragment;return D[r(341)][r(350)]=D[r(341)][r(350)].replace(r(348),r(332)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(329)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(322)).replace(r(333),r(362)),(n,t,e)=>{z[r(350)]=o,function(n,t,e){const r=Vt;t[r(316)]((t=>{const e=r;t.material&&(Array[e(353)](t.material)?t[e(351)][e(336)]((t=>{const r=e;n[r(343)][r(315)](t),t.dispose()})):(n.properties[e(315)](t[e(351)]),t[e(351)][e(352)]()))})),n[r(334)][r(361)][r(321)]=0,n[r(327)](t,e)}(n,t,e)}};function Vt(n,t){const e=Gt();return(Vt=function(n,t){return e[n-=315]})(n,t)}function Yt(n){function t(n){const e=Vt;if(typeof n===e(360))return function(n){}.constructor(e(338))[e(342)](e(355));1!==(""+n/n)[e(321)]||n%20==0?function(){return!0}.constructor("debugger").call(e(326)):function(){return!1}[e(354)](e(328)+"gger")[e(342)](e(359)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Xt,r=Kt();for(;;)try{if(855667===-parseInt(e(437))/1*(parseInt(e(422))/2)+parseInt(e(461))/3*(-parseInt(e(420))/4)+-parseInt(e(426))/5*(parseInt(e(455))/6)+-parseInt(e(446))/7*(parseInt(e(448))/8)+-parseInt(e(428))/9*(-parseInt(e(444))/10)+-parseInt(e(436))/11+-parseInt(e(432))/12*(-parseInt(e(424))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(445)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qt(this,(function(){const n=Xt,t=new RegExp(n(433)),e=new RegExp(n(447),"i"),r=Jt(n(431));t[n(458)](r+n(451))&&e[n(458)](r+n(459))?Jt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(n,t){const e=Kt();return(Xt=function(n,t){return e[n-=419]})(n,t)}function Kt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8YsqWjh","trace","string","chain","toString","console","stateObject","12VUuOMY","error","length","test","input","warn","33015jxvhnW","counter","332UeCalE","prototype","2205548HiZzdY","__proto__","65mxAsgh","debu","1715370XesAto","value","400779XFhOHK","return (function() ","constructor","init","11281236byaQTS","function *\\( *\\)","call","bind","14182091pjEDRV","1nFasTD","info","while (true) {}",'{}.constructor("return this")( )',"table","traverse","gger","40sQoIPv","apply","219478kTKcIc"];return(Kt=function(){return n})()}$t(void 0,(function(){const n=Xt;let t;try{t=Function(n(429)+n(440)+");")()}catch(o){t=window}const e=t[n(453)]=t[n(453)]||{},r=["log",n(460),n(438),n(456),"exception",n(441),n(449)];for(let i=0;i<r[n(457)];i++){const t=$t.constructor[n(421)][n(435)]($t),o=r[i],a=e[o]||t;t[n(423)]=$t[n(435)]($t),t[n(452)]=a[n(452)][n(435)](a),e[o]=t}}))();const Qt=nn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(427)],o[t(427)],e[t(427)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(427)][t(442)]((n=>{n instanceof l&&n.material.dispose()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=Xt;if(typeof n===e(450))return function(n){}.constructor(e(439))[e(445)](e(419));1!==(""+n/n).length||n%20==0?function(){return!0}[e(430)](e(425)+e(443))[e(434)]("action"):function(){return!1}[e(430)]("debu"+e(443))[e(445)](e(454)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ne(n,t){const e=re();return(ne=function(n,t){return e[n-=294]})(n,t)}const te=ne;!function(n,t){const e=ne,r=re();for(;;)try{if(252151===-parseInt(e(311))/1+-parseInt(e(309))/2+parseInt(e(307))/3*(parseInt(e(308))/4)+-parseInt(e(303))/5+-parseInt(e(305))/6*(-parseInt(e(301))/7)+parseInt(e(306))/8+parseInt(e(299))/9*(-parseInt(e(295))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(){const n=["toString","value","460SYVAlK","colorspace_fragment","halfTexelSize","set","621rqOVjD","console","14UsbHPR","chain","2491670yxrKpd","while (true) {}","1175682mRIlfk","1757392FOZDDb","1225236zHILto","4UsAElX","493138GYouCA","kernel","19752jXRKLF","trace","input","warn","__proto__",'{}.constructor("return this")( )',"init","replace","stateObject","copy","table","setResolution","resolution","bind","uniforms","info","apply","return (function() ","constructor","error","prototype","call","exception","gger","debu","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","test","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","length"];return(re=function(){return n})()}!function(){ee(this,(function(){const n=ne,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ce(n(317));t[n(337)](r+n(302))&&e.test(r+n(313))?ce():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=ne;let t;try{t=Function(n(328)+n(316)+");")()}catch(o){t=window}const e=t[n(300)]=t[n(300)]||{},r=["log",n(314),n(326),n(330),n(333),n(321),n(312)];for(let i=0;i<r[n(339)];i++){const t=oe[n(329)][n(331)][n(324)](oe),o=r[i],a=e[o]||t;t[n(315)]=oe[n(324)](oe),t[n(340)]=a[n(340)].bind(a),e[o]=t}}))();const ie=parseInt(B[te(318)](/\D+/g,""));class ae extends P{constructor(n=new C){const t=te;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(336)+(ie>=154?t(296):"encodings_fragment")+">\n        }",vertexShader:t(338),blending:F,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this[t(310)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=te;this.uniforms.texelSize.value[e(298)](n,t),this[e(325)][e(297)][e(294)][e(298)](n,t).multiplyScalar(.5)}[te(322)](n){const t=te;this[t(325)][t(323)][t(294)][t(320)](n)}}function ce(n){function t(n){const e=ne;if("string"==typeof n)return function(n){}[e(329)](e(304)).apply("counter");1!==(""+n/n)[e(339)]||n%20==0?function(){return!0}[e(329)]("debu"+e(334))[e(332)]("action"):function(){return!1}[e(329)](e(335)+e(334)).apply(e(319)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=le;function ue(){const n=["value","minDepthThreshold","prototype","render","renderToScreen","init","console","2529178jtvGOU","trace","defines","73192bBZKIZ",'{}.constructor("return this")( )',"inputBuffer","debu","clone","depthBuffer","179550dfDPZR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","9825992ZYqfYV","setTexelSize","3468110pFFZvR","setAttribute","constructor","depthToBlurRatioBias","function *\\( *\\)","action","kernel","input","renderTargetA","screen","scene","2576055pGSXiR","renderTargetB","test","texture","__proto__","maxDepthThreshold","152EFxdqA","uniforms","8868vEBeIR","gger","1vQvAOl","convolutionMaterial","apply","105RXfXEb","frustumCulled","bind","add","depthTexture","info","camera","1215aJSSCC","position","stateObject","length"];return(ue=function(){return n})()}function le(n,t){const e=ue();return(le=function(n,t){return e[n-=246]})(n,t)}!function(n,t){const e=le,r=ue();for(;;)try{if(695651===-parseInt(e(292))/1*(parseInt(e(257))/2)+-parseInt(e(290))/3*(-parseInt(e(288))/4)+parseInt(e(282))/5+parseInt(e(266))/6*(-parseInt(e(295))/7)+parseInt(e(260))/8*(parseInt(e(246))/9)+-parseInt(e(271))/10+parseInt(e(269))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=le,t=new RegExp(n(275)),e=new RegExp(n(267),"i"),r=he(n(255));t[n(284)](r+"chain")&&e[n(284)](r+n(278))?he():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();pe(void 0,(function(){const n=le;let t;try{t=Function("return (function() "+n(261)+");")()}catch(o){t=window}const e=t[n(256)]=t[n(256)]||{},r=["log","warn",n(300),"error","exception","table",n(258)];for(let i=0;i<r.length;i++){const t=pe[n(273)][n(252)][n(297)](pe),o=r[i],a=e[o]||t;t[n(286)]=pe[n(297)](pe),t[n(268)]=a[n(268)][n(297)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(254)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(283)]=this[c(279)][c(264)](),this[c(293)]=new ae,this[c(293)][c(270)](1/t,1/e),this[c(293)].setResolution(new C(t,e)),this[c(281)]=new u,this[c(301)]=new k,this[c(293)][c(289)][c(251)][c(250)]=r,this[c(293)][c(289)][c(287)][c(250)]=o,this[c(293)][c(289)].depthScale[c(250)]=i,this[c(293)][c(289)][c(274)][c(250)]=a,this[c(293)][c(259)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(272)](c(247),new U(s,3)),p[c(272)]("uv",new U(f,2)),this[c(280)]=new l(p,this[c(293)]),this[c(280)][c(296)]=!1,this[c(281)][c(298)](this[c(280)])}[se(253)](n,t,e){const r=se,o=this[r(281)],i=this[r(301)],a=this[r(279)],c=this.renderTargetB,s=this.convolutionMaterial,u=s.uniforms;u[r(265)].value=t[r(299)];const l=s[r(277)];let f,p,d,h=t;for(p=0,d=l[r(249)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(277)][r(250)]=l[p],u[r(262)][r(250)]=h[r(285)],n.setRenderTarget(f),n[r(253)](o,i),h=f;u[r(277)][r(250)]=l[p],u[r(262)][r(250)]=h[r(285)],n.setRenderTarget(this[r(254)]?null:e),n.render(o,i)}}function he(n){function t(n){const e=le;if("string"==typeof n)return function(n){}[e(273)]("while (true) {}")[e(294)]("counter");1!==(""+n/n)[e(249)]||n%20==0?function(){return!0}[e(273)](e(263)+"gger").call(e(276)):function(){return!1}[e(273)](e(263)+e(291))[e(294)](e(248)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=ye;!function(n,t){for(var e=ye,r=ge();;)try{if(599997===-parseInt(e(325))/1+parseInt(e(308))/2*(-parseInt(e(324))/3)+parseInt(e(341))/4*(parseInt(e(316))/5)+parseInt(e(352))/6*(-parseInt(e(326))/7)+parseInt(e(362))/8+parseInt(e(291))/9*(parseInt(e(363))/10)+parseInt(e(312))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(){var n=["mixBlur","minDepthThreshold","_mixBlur","_tDiffuseBlur","fragmentShader","info","tDiffuseBlur","input","vertexShader","mixStrength","gger","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","apply",'{}.constructor("return this")( )',"return (function() ","1080302ZUdjHp","value","uniforms","distortion","9460858duzNra","hasBlur","_distortion","warn","10dSVdjF","call","setValues","_maxDepthThreshold","counter","_depthScale","depthScale","length","3ALcbtg","1014769YALrNx","13748MeWyfH","_mirror","exception","_tDiffuse","while (true) {}","_minDepthThreshold","function *\\( *\\)","maxDepthThreshold","bind","log","_textureMatrix","_depthToBlurRatioBias","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","tDepth","_distortionMap","1899404olhhLA","_tDepth","mixContrast","error","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","string","textureMatrix","constructor","#include <emissivemap_fragment>","USE_UV","distortionMap","2424MxtTGs","replace","tDiffuse","_mixContrast","table","_blurStrength","mirror","onBeforeCompile","console","depthToBlurRatioBias","848472fOBiwY","540rXvVyu","test","chain","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","toString","172089RUkKzV","_hasBlur"];return(ge=function(){return n})()}!function(){me(this,(function(){var n=ye,t=new RegExp(n(332)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=be("init");t[n(364)](r+n(365))&&e[n(364)](r+n(300))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(n,t){var e=ge();return(ye=function(n,t){return e[n-=289]})(n,t)}_e(void 0,(function(){for(var n=ye,t=function(){var n,t=ye;try{n=Function(t(307)+t(306)+");")()}catch(e){n=window}return n}(),e=t[n(360)]=t[n(360)]||{},r=[n(335),n(315),n(298),n(344),n(328),n(356),"trace"],o=0;o<r.length;o++){var i=_e[n(348)].prototype[n(334)](_e),a=r[o],c=e[a]||i;i.__proto__=_e.bind(_e),i[n(290)]=c[n(290)].bind(c),e[a]=i}}))();class xe extends N{constructor(n={}){var t=ye;super(n),this[t(342)]={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this[t(296)]={value:null},this._textureMatrix={value:null},this[t(292)]={value:!1},this[t(327)]={value:0},this._mixBlur={value:0},this[t(357)]={value:.5},this[t(331)]={value:.9},this._maxDepthThreshold={value:1},this[t(321)]={value:0},this[t(337)]={value:.25},this[t(314)]={value:1},this[t(355)]={value:1},this[t(318)](n)}[ve(359)](n){var t,e=ve;!(null==(t=n.defines)?void 0:t[e(350)])&&(n.defines[e(350)]=""),n[e(310)][e(313)]=this._hasBlur,n[e(310)].tDiffuse=this[e(329)],n[e(310)][e(339)]=this[e(342)],n.uniforms[e(351)]=this[e(340)],n[e(310)][e(299)]=this._tDiffuseBlur,n.uniforms.textureMatrix=this[e(336)],n[e(310)][e(358)]=this[e(327)],n.uniforms[e(293)]=this[e(295)],n[e(310)][e(302)]=this[e(357)],n.uniforms.minDepthThreshold=this[e(331)],n[e(310)][e(333)]=this[e(319)],n[e(310)][e(322)]=this[e(321)],n.uniforms[e(361)]=this[e(337)],n.uniforms.distortion=this[e(314)],n[e(310)].mixContrast=this[e(355)],n[e(301)]=e(304)+n[e(301)],n.vertexShader=n[e(301)][e(353)]("#include <project_vertex>",e(289)),n[e(297)]=e(338)+n[e(297)],n[e(297)]=n[e(297)][e(353)](e(349),e(345))}get[ve(354)](){var n=ve;return this[n(329)][n(309)]}set[ve(354)](n){this[ve(329)].value=n}get tDepth(){var n=ve;return this[n(342)][n(309)]}set tDepth(n){var t=ve;this[t(342)][t(309)]=n}get[ve(351)](){return this[ve(340)].value}set[ve(351)](n){var t=ve;this[t(340)][t(309)]=n}get[ve(299)](){var n=ve;return this[n(296)][n(309)]}set[ve(299)](n){this[ve(296)].value=n}get[ve(347)](){var n=ve;return this[n(336)][n(309)]}set textureMatrix(n){var t=ve;this[t(336)][t(309)]=n}get hasBlur(){var n=ve;return this._hasBlur[n(309)]}set hasBlur(n){var t=ve;this[t(292)][t(309)]=n}get[ve(358)](){var n=ve;return this._mirror[n(309)]}set[ve(358)](n){var t=ve;this._mirror[t(309)]=n}get mixBlur(){var n=ve;return this[n(295)][n(309)]}set[ve(293)](n){this[ve(295)].value=n}get[ve(302)](){var n=ve;return this._blurStrength[n(309)]}set mixStrength(n){var t=ve;this._blurStrength[t(309)]=n}get[ve(294)](){var n=ve;return this[n(331)][n(309)]}set[ve(294)](n){var t=ve;this[t(331)][t(309)]=n}get maxDepthThreshold(){var n=ve;return this._maxDepthThreshold[n(309)]}set[ve(333)](n){this[ve(319)].value=n}get depthScale(){var n=ve;return this[n(321)][n(309)]}set[ve(322)](n){this[ve(321)].value=n}get depthToBlurRatioBias(){var n=ve;return this._depthToBlurRatioBias[n(309)]}set[ve(361)](n){var t=ve;this._depthToBlurRatioBias[t(309)]=n}get[ve(311)](){var n=ve;return this._distortion[n(309)]}set[ve(311)](n){var t=ve;this[t(314)][t(309)]=n}get[ve(343)](){var n=ve;return this[n(355)][n(309)]}set mixContrast(n){this._mixContrast.value=n}}function be(n){function t(n){var e=ye;if(typeof n===e(346))return function(n){}.constructor(e(330))[e(305)](e(320));1!==(""+n/n)[e(323)]||n%20==0?function(){return!0}[e(348)]("debu"+e(303))[e(317)]("action"):function(){return!1}.constructor("debu"+e(303))[e(305)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Ee;!function(n,t){const e=Ee,r=we();for(;;)try{if(320704===-parseInt(e(532))/1*(-parseInt(e(473))/2)+parseInt(e(502))/3*(parseInt(e(521))/4)+parseInt(e(449))/5*(parseInt(e(547))/6)+parseInt(e(468))/7+parseInt(e(516))/8*(parseInt(e(536))/9)+parseInt(e(470))/10*(parseInt(e(482))/11)+-parseInt(e(513))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(){const n=["clipPlane","subVectors","4023985IFMYry","bind","320aEjiNK","cameraWorldPosition","max-depth-threshold","24356kDWRWM","material","texture","add","input",'{}.constructor("return this")( )',"copy","virtualCamera","length","48224DxNPYH","defines-USE_DISTORTION","visible","view","value","defines-USE_DEPTH","constructor","target","trace","uuid","setFromNormalAndCoplanarPoint","matrixWorldInverse","setFromMatrixPosition","dispose","init","t-depth","depthTexture","reflectorOffset","addScaledVector","shadowMap","1427493StpePY","dot","apply","applyMatrix4","normal","negate","defines-USE_BLUR","isMesh","gger","constant","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","22452984gdNCGT","warn","set","1088zjuWCJ","error","string","function *\\( *\\)","texture-matrix","4aFhxck","textureMatrix","autoUpdate","console","toString","assign","render","traverse","lookAtPosition","table","rotationMatrix","4yHCznG","autoClear","return (function() ","t-diffuse","28206kNwQih","test","chain","projectionMatrix","reflectorWorldPosition","enabled","index","reflect","multiply","clear","mix-strength","234RvGLZc","mix-contrast","sign","far","multiplyScalar","67420YatfbY","log","__proto__","materialRef","matrixWorld","TresMeshReflectorMaterial","counter","setRenderTarget","reflectorPlane","distortion","elements","updateMatrixWorld","debu","prototype","while (true) {}","stateObject","lookAt"];return(we=function(){return n})()}!function(){Se(this,(function(){const n=Ee,t=new RegExp(n(519)),e=new RegExp(n(512),"i"),r=Te(n(496));t[n(537)](r+n(538))&&e[n(537)](r+n(477))?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(504)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=Ee;let t;try{t=Function(n(534)+n(478)+");")()}catch(o){t=window}const e=t[n(524)]=t[n(524)]||{},r=[n(450),n(514),"info",n(517),"exception",n(530),n(490)];for(let i=0;i<r[n(481)];i++){const t=Me[n(488)][n(462)][n(469)](Me),o=r[i],a=e[o]||t;t[n(451)]=Me[n(469)](Me),t[n(525)]=a[n(525)].bind(a),e[o]=t}}))();const Re=[Ie(520),"mirror",Ie(535),Ie(497),"t-diffuse-blur","has-blur",Ie(546),"min-depth-threshold",Ie(472),"depth-scale","depth-to-blur-ratio-bias",Ie(458),"distortionMap",Ie(548),Ie(508),Ie(487),Ie(483)];function Ee(n,t){const e=we();return(Ee=function(n,t){return e[n-=449]})(n,t)}const Ae=nn({__name:Ie(542),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=$(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:xe});const T=gn(),D=gn(),z=gn(),P=gn(),O=Q((()=>{const n=Ee;return"number"==typeof f[n(486)]?[f[n(486)],f[n(486)]]:f[n(486)]})),C=Q((()=>O[r(486)][0]>0||O[r(486)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T[o(486)])||n[o(475)][o(495)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(486)]=new b(i[o(486)],i[o(486)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(486)],i[o(486)],w,M)},t(y,e(x)))),D[o(486)]=new b(i[o(486)],i[o(486)],f),z[o(486)]=new de({resolution:i.value,width:O[o(486)][0],height:O[o(486)][1],minDepthThreshold:a[o(486)],maxDepthThreshold:s[o(486)],depthScale:u[o(486)],depthToBlurRatioBias:l[o(486)]}),P[o(486)]={mirror:p,textureMatrix:F[o(522)],mixBlur:d,tDiffuse:T[o(486)][o(475)],tDepth:T.value[o(498)],tDiffuseBlur:T.value[o(475)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(486)],mixContrast:_,"defines-USE_BLUR":C[o(486)]?"":void 0,"defines-USE_DEPTH":u[o(486)]>0?"":void 0,"defines-USE_DISTORTION":g[o(486)]?"":void 0}}));const B=gn(),{onLoop:k}=Y();k((()=>{var n;const t=r;if(!(B[t(486)]&&R.value&&T.value&&y.value))return;const e=function(n,t){const e=Ee;let r;return n[e(528)]((n=>{const o=e;n[o(509)]&&n[o(474)]&&n[o(474)][o(491)]===t&&(r=n)})),r}(x[t(486)],B.value[t(491)]);if(!e)return;e[t(484)]=!1;const i=R[t(486)].xr[t(541)],a=R[t(486)].shadowMap[t(523)];(function(n){var t,e;const r=Ee;if(F[r(540)][r(494)](n[r(453)]),F[r(471)][r(494)](null==(t=y[r(486)])?void 0:t[r(453)]),F[r(531)].extractRotation(n[r(453)]),F[r(506)][r(515)](0,0,1),F[r(506)][r(505)](F[r(531)]),F.reflectorWorldPosition[r(500)](F.normal,o[r(499)]),F[r(485)][r(467)](F[r(540)],F[r(471)]),F.view[r(503)](F[r(506)])>0)return;F[r(485)][r(543)](F.normal)[r(507)](),F.view[r(476)](F.reflectorWorldPosition),F[r(531)].extractRotation(null==(e=y.value)?void 0:e.matrixWorld),F[r(529)][r(515)](0,0,-1),F[r(529)][r(505)](F[r(531)]),F.lookAtPosition.add(F[r(471)]),F[r(489)][r(467)](F[r(540)],F[r(529)]),F[r(489)].reflect(F[r(506)])[r(507)](),F[r(489)][r(476)](F[r(540)]),F[r(480)].position[r(479)](F.view),F.virtualCamera.up[r(515)](0,1,0),F[r(480)].up[r(505)](F[r(531)]),F[r(480)].up[r(543)](F[r(506)]),F.virtualCamera[r(465)](F.target),F[r(480)][r(550)]=(null==y?void 0:y[r(486)])[r(550)],F[r(480)][r(460)](),F[r(480)][r(539)][r(479)]((null==y?void 0:y[r(486)])[r(539)]),F[r(522)][r(515)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix.multiply(F[r(480)][r(539)]),F[r(522)].multiply(F[r(480)][r(493)]),F[r(522)][r(544)](n.matrixWorld),F[r(457)][r(492)](F.normal,F[r(540)]),F[r(457)].applyMatrix4(F[r(480)][r(493)]),F[r(466)][r(515)](F.reflectorPlane[r(506)].x,F[r(457)][r(506)].y,F.reflectorPlane[r(506)].z,F.reflectorPlane[r(511)]);const i=F[r(480)][r(539)];F.q.x=(Math[r(549)](F.clipPlane.x)+i[r(459)][8])/i[r(459)][0],F.q.y=(Math[r(549)](F.clipPlane.y)+i[r(459)][9])/i[r(459)][5],F.q.z=-1,F.q.w=(1+i[r(459)][10])/i.elements[14],F[r(466)][r(551)](2/F[r(466)][r(503)](F.q)),i[r(459)][2]=F[r(466)].x,i[r(459)][6]=F.clipPlane.y,i.elements[10]=F.clipPlane.z+1,i[r(459)][14]=F[r(466)].w})(e),R[t(486)].shadowMap[t(523)]=!1,R[t(486)][t(456)](T.value),R.value[t(533)]||R.value[t(545)](),R[t(486)][t(527)](x[t(486)],F[t(480)]),null==(n=null==z?void 0:z[t(486)])||n.render(R.value,T[t(486)],D[t(486)]),R[t(486)].xr[t(541)]=i,R[t(486)][t(501)][t(523)]=a,e[t(484)]=!0,R[t(486)][t(456)](null)}));const j=xn(),U=Q((()=>{const n=r,t={};return Object.assign(t,o),Object[n(526)](t,j[n(486)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(486)])||n[e(495)](),null==(t=null==D?void 0:D.value)||t[e(495)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(454),bn({key:"key"+P[c(486)][c(508)]+P.value[c(487)]+P[c(486)][c(483)],ref_key:c(452),ref:B},U.value,{"texture-matrix":F[c(522)],mirror:J(p),"t-diffuse":null==(e=T[c(486)])?void 0:e[c(475)],"t-depth":null==(o=T[c(486)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(486)])?void 0:i[c(475)],"has-blur":C[c(486)],"mix-strength":J(v),"min-depth-threshold":J(a),"max-depth-threshold":J(s),"depth-scale":J(u),"depth-to-blur-ratio-bias":J(l),distortion:J(m),distortionMap:J(g),"mix-contrast":J(_),"defines-USE_BLUR":C[c(486)]?"":void 0,"defines-USE_DEPTH":J(u)>0?"":void 0,"defines-USE_DISTORTION":J(g)?"":void 0}),null,16,Re)}}});function Te(n){function t(n){const e=Ee;if(typeof n===e(518))return function(n){}[e(488)](e(463))[e(504)](e(455));1!==(""+n/n)[e(481)]||n%20==0?function(){return!0}[e(488)](e(461)+e(510)).call("action"):function(){return!1}[e(488)](e(461)+e(510))[e(504)](e(464)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Oe,r=Pe();for(;;)try{if(227426===parseInt(e(474))/1+-parseInt(e(439))/2*(parseInt(e(454))/3)+-parseInt(e(440))/4*(-parseInt(e(438))/5)+parseInt(e(468))/6+parseInt(e(470))/7+-parseInt(e(434))/8*(-parseInt(e(442))/9)+parseInt(e(460))/10*(-parseInt(e(443))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Oe,t=new RegExp(n(465)),e=new RegExp(n(446),"i"),r=Ce("init");t[n(455)](r+n(475))&&e[n(455)](r+n(476))?Ce():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["apply","1267560BkqEUG","table",'{}.constructor("return this")( )',"while (true) {}","254105vwPtjT","chain","input","bind","3128Ghxcpp","update","error","trace","654135ascTRe","760462NFhQHz","4uGJAbo","value","7326iLHQaY","1243lyHEOL","gger","texture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","CubeCamera","dispose","string","length","return (function() ","log","fog","3QaIuCu","test","debu","constructor","call","prototype","50030NxWfNO","console","info","toString","warn","function *\\( *\\)","stateObject","background","1732260OxNkng"];return(Pe=function(){return n})()}function Oe(n,t){const e=Pe();return(Oe=function(n,t){return e[n-=434]})(n,t)}function Ce(n){function t(n){const e=Oe;if(typeof n===e(449))return function(n){}[e(457)](e(473)).apply("counter");1!==(""+n/n)[e(450)]||n%20==0?function(){return!0}[e(457)]("debu"+e(444))[e(458)]("action"):function(){return!1}.constructor(e(456)+"gger").apply(e(466)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Oe,t=function(){const n=Oe;let t;try{t=Function(n(451)+n(472)+");")()}catch(e){t=window}return t}(),e=t[n(461)]=t[n(461)]||{},r=[n(452),n(464),n(462),n(436),"exception",n(471),n(437)];for(let o=0;o<r[n(450)];o++){const t=ze.constructor[n(459)][n(477)](ze),i=r[o],a=e[i]||t;t.__proto__=ze[n(477)](ze),t.toString=a[n(463)][n(477)](a),e[i]=t}}))();const Fe=Le;!function(n,t){const e=Le,r=ke();for(;;)try{if(239818===-parseInt(e(306))/1+parseInt(e(279))/2*(parseInt(e(281))/3)+parseInt(e(289))/4+parseInt(e(270))/5*(parseInt(e(312))/6)+-parseInt(e(299))/7*(-parseInt(e(284))/8)+-parseInt(e(288))/9+-parseInt(e(285))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(){const n=["visible","3JiCqNs","fog","chain","161192kWzoqk","4036260hfJdBx","value","stateObject","447183TModHL","1761476nnkbfH","debu","$slots","call","far","prototype","exception","__proto__","TresGroup","texture","21WBVEgN","action","resolution","counter","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","default","309466LqQprX","index","rgRef","info","function *\\( *\\)","length","804yzzWmR","return (function() ","constructor","gger","bind","trace","console","near","apply","4820zqVXDk","input","object","frames","log","while (true) {}",'{}.constructor("return this")( )',"primitive","toString","745210fUnGCw"];return(ke=function(){return n})()}!function(){Be(this,(function(){const n=Le,t=new RegExp(n(310)),e=new RegExp(n(304),"i"),r=He("init");t.test(r+n(283))&&e.test(r+n(271))?He():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(269)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Le,t=function(){const n=Le;let t;try{t=Function(n(313)+n(276)+");")()}catch(e){t=window}return t}(),e=t[n(318)]=t[n(318)]||{},r=[n(274),"warn",n(309),"error",n(295),n(303),n(317)];for(let o=0;o<r[n(311)];o++){const t=je.constructor[n(294)][n(316)](je),i=r[o],a=e[i]||t;t[n(296)]=je[n(316)](je),t[n(278)]=a[n(278)][n(316)](a),e[i]=t}}))();const Ue=[Fe(272)],Ne=nn({__name:Fe(307),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return K((()=>s),(n=>{var t;const e=Oe;null==(t=c[e(441)])||t[e(448)](),c.value=new v(n[e(441)]),c[e(441)][e(445)].type=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f.value=new(D[r(447)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Oe;null==(n=c[t(441)])||n[t(448)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(441)][t(453)],d=a.value[t(467)],a[t(441)][t(467)]=r||d,a[t(441)][t(453)]=o||p,null==(n=f[t(441)])||n[t(435)](i.value,a.value),a.value.fog=p,a[t(441)][t(467)]=d}}}({resolution:o[r(301)],near:o[r(268)],far:o[r(293)],envMap:o.envMap,fog:o[r(282)]}),{onBeforeLoop:s}=Y();let u=0;const l=X(null);return s((()=>{const n=r;l[n(286)]&&(o.frames===1/0||u<o[n(273)])&&(l.value[n(280)]=!1,c(),l[n(286)][n(280)]=!0,u++)})),t({texture:null==(e=i[r(286)])?void 0:e[r(298)]}),(n,t)=>{const e=r;return on(),an(e(297),null,[dn(e(277),{object:J(a)},null,8,Ue),dn(e(297),{ref_key:e(308),ref:l},[cn(n[e(291)],e(305))],512)])}}});function Le(n,t){const e=ke();return(Le=function(n,t){return e[n-=268]})(n,t)}function He(n){function t(n){const e=Le;if("string"==typeof n)return function(n){}[e(314)](e(275)).apply(e(302));1!==(""+n/n)[e(311)]||n%20==0?function(){return!0}[e(314)]("debu"+e(315))[e(292)](e(300)):function(){return!1}[e(314)](e(290)+"gger")[e(269)](e(287)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=Ve();for(;;)try{if(162934===parseInt(e(314))/1+parseInt(e(319))/2*(-parseInt(e(313))/3)+-parseInt(e(300))/4+parseInt(e(306))/5*(parseInt(e(328))/6)+-parseInt(e(299))/7+parseInt(e(318))/8*(parseInt(e(327))/9)+parseInt(e(332))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(339)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=Ve();return(Ge=function(n,t){return e[n-=297]})(n,t)}!function(){Ze(this,(function(){const n=Ge,t=new RegExp(n(335)),e=new RegExp(n(307),"i"),r=qe(n(336));t.test(r+n(321))&&e.test(r+n(340))?qe():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(339)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(){const n=["MathUtils","string","debu","gger","generateUUID","117945xUKTJL","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","defineProperty","clone","return (function() ","exception","constructor","16113UwjXXV","258646MzbRjB","stateObject","log","while (true) {}","16soSGoh","106HSYDeK","__proto__","chain","uniforms","call","key","action","length","956241CAiBhv","42Uhllrd","UniformsUtils","bind","entries","3279160myohJD","assign","counter","function *\\( *\\)","init","info","warn","apply","input","trace","table","console","1535667PiefPA","1188820YsvbfN"];return(Ve=function(){return n})()}function Ye(n,t,e,r){const o=Ge,i=class extends P{constructor(o={}){const i=Ge,a=Object[i(331)](n);super({uniforms:a.reduce(((n,[t,e])=>{const r=i,o=D[r(329)][r(309)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[i(324)]="",a.forEach((([n])=>Object[i(308)](this,n,{get:()=>this[i(322)][n].value,set:t=>this[i(322)][n].value=t}))),Object[i(333)](this,o),r&&r(this)}};return i[o(324)]=D[o(301)][o(305)](),i}function qe(n){function t(n){const e=Ge;if(typeof n===e(302))return function(n){}[e(312)](e(317))[e(339)](e(334));1!==(""+n/n).length||n%20==0?function(){return!0}[e(312)](e(303)+e(304))[e(323)](e(325)):function(){return!1}[e(312)](e(303)+"gger").apply(e(315)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ge;let t;try{t=Function(n(310)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(298)]=t[n(298)]||{},r=[n(316),n(338),n(337),"error",n(311),n(297),n(341)];for(let i=0;i<r[n(326)];i++){const t=We[n(312)].prototype[n(330)](We),o=r[i],a=e[o]||t;t[n(320)]=We[n(330)](We),t.toString=a.toString[n(330)](a),e[o]=t}}))();var $e=sr;!function(n,t){for(var e=sr,r=Dr();;)try{if(853386===parseInt(e(371))/1*(-parseInt(e(262))/2)+-parseInt(e(426))/3+parseInt(e(403))/4*(-parseInt(e(439))/5)+-parseInt(e(420))/6+parseInt(e(264))/7+-parseInt(e(307))/8*(-parseInt(e(392))/9)+-parseInt(e(321))/10*(-parseInt(e(267))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=sr,t=new RegExp(n(295)),e=new RegExp(n(419),"i"),r=Tr("init");t[n(328)](r+n(429))&&e[n(328)](r+n(382))?Tr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=sr,e=function(n,t){var e=sr;if(typeof n!==e(412)||null===n)return n;var r=n[Symbol[e(265)]];if(void 0!==r){var o=r[e(355)](n,t||"default");if(typeof o!==e(412))return o;throw new TypeError(e(258))}return(t===e(385)?String:Number)(n)}(n,t(385));return typeof e===t(388)?e:String(e)}function Je(n,t,e){var r=sr;return(t=Qe(t))in n?Object[r(279)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=sr,r=Object[e(406)](n);if(Object[e(284)]){var o=Object[e(284)](n);t&&(o=o.filter((function(t){var r=e;return Object[r(364)](n,t)[r(414)]}))),r.push[e(254)](r,o)}return r}function tr(n){for(var t=sr,e=1;e<arguments[t(348)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0)[t(413)]((function(t){Je(n,t,r[t])})):Object[t(338)]?Object.defineProperties(n,Object[t(338)](r)):nr(Object(r))[t(413)]((function(e){var o=t;Object[o(279)](n,e,Object[o(364)](r,e))}))}return n}function er(n,t){var e=sr;if(null==n)return{};var r,o,i=function(n,t){var e=sr;if(null==n)return{};var r,o,i={},a=Object[e(406)](n);for(o=0;o<a[e(348)];o++)r=a[o],t[e(440)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(284)]){var a=Object[e(284)](n);for(o=0;o<a[e(348)];o++)r=a[o],t.indexOf(r)>=0||Object.prototype[e(332)].call(n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=sr;(null==t||t>n.length)&&(t=n[e(348)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array[sr(354)](n))return n}(n)||function(n,t){var e=sr,r=null==n?null:e(418)!=typeof Symbol&&n[Symbol[e(395)]]||n[e(303)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(355)](n))[e(339)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(245)])&&(s[e(441)](o.value),s[e(348)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(399)]&&(c=r[e(399)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=sr;if(n){if(typeof n===e(385))return rr(n,t);var r=Object[e(341)][e(249)][e(355)](n).slice(8,-1);return r===e(334)&&n[e(435)]&&(r=n[e(435)][e(397)]),r===e(327)||r===e(390)?Array[e(379)](n):r===e(350)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(328)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(sr(290))}()}function ir(n,t){for(var e=sr,r=0;r<t.length;r++){var o=t[r];o[e(414)]=o[e(414)]||!1,o[e(442)]=!0,e(404)in o&&(o[e(261)]=!0),Object[e(279)](n,Qe(o[e(247)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError(sr(324));return n}function cr(n,t){var e=sr;return(cr=Object[e(336)]?Object[e(336)][e(306)]():function(n,t){return n[e(434)]=t,n})(n,t)}function sr(n,t){var e=Dr();return(sr=function(n,t){return e[n-=242]})(n,t)}function ur(n){var t=sr;return(ur=Object[t(336)]?Object.getPrototypeOf[t(306)]():function(n){var e=t;return n[e(434)]||Object[e(287)](n)})(n)}function lr(n){var t=function(){var n=sr;if(typeof Reflect===n(418)||!Reflect[n(274)])return!1;if(Reflect[n(274)].sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean[n(341)].valueOf[n(355)](Reflect[n(274)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=sr,o=ur(n);if(t){var i=ur(this)[r(435)];e=Reflect[r(274)](o,arguments,i)}else e=o[r(254)](this,arguments);return function(n,t){var e=sr;if(t&&("object"==typeof t||typeof t===e(283)))return t;if(void 0!==t)throw new TypeError(e(408));return ar(n)}(this,e)}}Ke(void 0,(function(){var n,t=sr;try{n=Function(t(268)+t(346)+");")()}catch(s){n=window}for(var e=n[t(351)]=n.console||{},r=[t(430),t(368),t(361),t(417),t(431),"table",t(277)],o=0;o<r.length;o++){var i=Ke[t(435)].prototype[t(306)](Ke),a=r[o],c=e[a]||i;i[t(434)]=Ke[t(306)](Ke),i[t(249)]=c[t(249)][t(306)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:$e(313),normal:"csm_Normal",roughness:$e(318),metalness:$e(380),emissive:$e(362),ao:$e(353),bump:$e(427),clearcoat:"csm_Clearcoat",clearcoatRoughness:$e(251),clearcoatNormal:$e(438),pointSize:$e(349),fragColor:$e(316),depthAlpha:"csm_DepthAlpha",position:"csm_Position",positionRaw:$e(280)},vr=(Je(fr={},"".concat(hr.position),"*"),Je(fr,""[$e(271)](hr[$e(363)]),"*"),Je(fr,""[$e(271)](hr[$e(384)]),"*"),Je(fr,""[$e(271)](hr[$e(410)]),[$e(400)]),Je(fr,"".concat(hr[$e(333)]),"*"),Je(fr,""[$e(271)](hr[$e(250)]),"*"),Je(fr,""[$e(271)](hr[$e(401)]),[$e(358),$e(409)]),Je(fr,"".concat(hr[$e(285)]),["MeshStandardMaterial",$e(409)]),Je(fr,"".concat(hr[$e(292)]),[$e(358),$e(409)]),Je(fr,"".concat(hr.ao),[$e(358),$e(409),$e(252),$e(263),$e(343),$e(319)]),Je(fr,""[$e(271)](hr[$e(301)]),[$e(263),$e(278),$e(291),$e(343),"MeshPhysicalMaterial","MeshStandardMaterial",$e(319),$e(387)]),Je(fr,""[$e(271)](hr[$e(322)]),[$e(366)]),Je(fr,""[$e(271)](hr[$e(436)]),[$e(409)]),Je(fr,""[$e(271)](hr[$e(377)]),[$e(409)]),Je(fr,""[$e(271)](hr.clearcoatNormal),["MeshPhysicalMaterial"]),fr),mr={"#include <lights_physical_fragment>":D[$e(352)][$e(331)]},gr=(Je(pr={},""[$e(271)](hr[$e(384)]),{"#include <beginnormal_vertex>":$e(369)[$e(271)](hr[$e(384)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Je(pr,""[$e(271)](hr.position),{"#include <begin_vertex>":$e(326).concat(hr.position,$e(386))}),Je(pr,"".concat(hr[$e(363)]),{"#include <begin_vertex>":$e(296)[$e(271)](hr[$e(363)],$e(308))}),Je(pr,""[$e(271)](hr.pointSize),{"gl_PointSize = size;":$e(311)[$e(271)](hr.pointSize,$e(396))}),Je(pr,""[$e(271)](hr.diffuse),{"#include <color_fragment>":$e(266)[$e(271)](hr[$e(333)],";\n  ")}),Je(pr,"".concat(hr[$e(250)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[$e(271)](hr[$e(250)],$e(386))}),Je(pr,""[$e(271)](hr[$e(401)]),{"vec3 totalEmissiveRadiance = emissive;":$e(257)[$e(271)](hr[$e(401)],$e(396))}),Je(pr,"".concat(hr[$e(285)]),{"#include <roughnessmap_fragment>":$e(398).concat(hr[$e(285)],$e(396))}),Je(pr,""[$e(271)](hr.metalness),{"#include <metalnessmap_fragment>":$e(260)[$e(271)](hr[$e(292)],";\n    ")}),Je(pr,"".concat(hr.ao),{"#include <aomap_fragment>":$e(304)[$e(271)](hr.ao,";\n    ")}),Je(pr,""[$e(271)](hr[$e(301)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[$e(271)](hr[$e(301)],$e(256))[$e(271)](hr[$e(301)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),Je(pr,"".concat(hr[$e(322)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":$e(372).concat(hr[$e(322)],$e(425)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":$e(415)[$e(271)](hr[$e(322)],$e(396))}),Je(pr,""[$e(271)](hr[$e(436)]),{"material.clearcoat = clearcoat;":$e(302).concat(hr.clearcoat,";")}),Je(pr,""[$e(271)](hr[$e(377)]),{"material.clearcoatRoughness = clearcoatRoughness;":$e(407)[$e(271)](hr[$e(377)],";")}),Je(pr,"".concat(hr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":$e(432)}),pr),_r=(Je(dr={},""[$e(271)](hr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(293)[$e(271)](hr[$e(329)],", 1.0 );\n  ")}),Je(dr,""[$e(271)](hr[$e(363)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(375).concat(hr[$e(329)],$e(386))}),Je(dr,""[$e(271)](hr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(320)[$e(271)](hr.diffuse,";\n  ")}),Je(dr,"".concat(hr[$e(250)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(320).concat(hr[$e(250)],$e(386))}),dr),yr={clearcoat:[hr.clearcoat,hr[$e(345)],hr[$e(377)]]},xr=$e(244),br=$e(405),Ir=$e(402),Sr=[$e(342),$e(312),$e(347),$e(330),$e(335),$e(246),"silent"],wr=function(n,t,e){var r=$e;return n[r(359)](t)[r(272)](e)},Mr=function(n,t){var e,r,o=$e;return new RegExp("\\b"[o(271)]((e=t,r=$e,e[r(437)](/[-\/\\^$*+?.()|[\]{}]/g,r(323))),"\\b"))[o(328)](n)};function Rr(n){return n?n.replace(/\s/g,""):void 0}function Er(n){return n[$e(437)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Ar=function(n){var t=$e;!function(n,t){var e=sr;if(typeof t!==e(283)&&null!==t)throw new TypeError(e(298));n[e(341)]=Object[e(423)](t&&t[e(341)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(279)](n,e(341),{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=sr,u=n[s(342)],l=n[s(312)],f=n[s(347)],p=n.uniforms,d=n[s(335)],h=n[s(246)],v=n[s(273)],m=er(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(sr(373))}(this,c),!function(n){var t=$e;try{new n}catch(e){if(e.message.indexOf(t(270))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),"RawShaderMaterial"===e[s(376)])throw new Error(s(393));(function(n,t){var e=$e;e(348),Object[e(344)](n,t);var r=Object[e(287)](t);Object.entries(Object.getOwnPropertyDescriptors(r))[e(422)]((function(n){var t=e,r="function"==typeof n[1][t(281)],o=typeof n[1][t(391)]===t(283),i=typeof n[1][t(404)]===t(283),a=n[0]===t(435);return(r||o||i)&&!a}))[e(413)]((function(t){var r=e;typeof n[t[0]]!==r(283)&&Object[r(279)](n,t[0],t[1])}))})(ar(t=a[s(355)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(381)][s(242)](),type:e.type,isAlreadyExtended:(r=e[s(243)],o=$e,i=r[o(249)]()[o(421)](),!(0===i[o(288)](i.indexOf("{")+1,i.lastIndexOf("}"))[o(421)]()[o(348)])),cacheHash:"",silent:v},t[s(330)]=tr(tr({},t[s(330)]||{}),p||{});var g=t[s(259)],_=g[s(312)],y=g[s(347)],x=t.uniforms;return t[s(259)][s(255)]=t._getCacheHash(),t[s(314)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=sr,t=arguments[n(348)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(330)]=t[n(330)]||this.uniforms,Object[n(344)](this[n(259)],t);var e=this[n(259)],r=e.fragmentShader,o=e[n(347)],i=this[n(330)],a=this[n(309)]();this[n(259)][n(255)]=a,this[n(314)](r,o,i)}},{key:t(428),value:function(){var n=t,e={baseMaterial:this[n(259)][n(342)],fragmentShader:this[n(259)][n(312)],vertexShader:this.__csm.vertexShader,uniforms:this[n(330)],silent:this.__csm.silent,patchMap:this[n(259)].patchMap,cacheKey:this[n(259)][n(246)]},r=new(this[n(435)])(e);return Object[n(344)](this,r),r}},{key:t(309),value:function(){var n=t,e=this[n(259)],r=e[n(312)],o=e[n(347)],i=this.uniforms,a=[Rr(r),Rr(o),i][n(422)]((function(n){return void 0!==n}));return a[n(348)]>0?Mn(a,{excludeValues:!0}):this[n(282)]()}},{key:t(314),value:function(n,e,r){var o=t,i=this;this[o(330)]=r||{},this[o(282)]=function(){var n=o;return i[n(259)][n(255)]};var a=function(t){var r=o;try{var a=i[r(294)]();if(n){var c=i[r(424)](Er(n),t[r(312)],!0);t[r(312)]=a+c}if(e){var s=i[r(424)](Er(e),t[r(347)]);t[r(347)]=r(276)+s,t.vertexShader=a+t[r(347)]}t.uniforms=tr(tr({},t[r(330)]),i[r(330)]),i[r(330)]=t[r(330)]}catch(u){console[r(417)](u)}};if(this.__csm[o(411)]){var c=this[o(243)];this[o(243)]=function(n,t){c(n,t),a(n)}}else this[o(243)]=a;this[o(310)]=!0}},{key:t(424),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(389)]()),this.__csm[o(335)]);Object.entries(yr)[o(413)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(337)]((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(271)](a,'" is required to use output "').concat(c,e(297)))})),Object.entries(mr)[o(413)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=wr(a,e,r)})),Object[o(406)](c)[o(413)]((function(t){var e=o;Object[e(406)](c[t])[e(413)]((function(r){var o=e,s=vr[t],u=i[o(259)][o(376)];if("*"===t||Mr(n,t)){if(!(!s||Array[o(354)](s)&&s[o(378)](u)||"*"===s))throw new Error("CSM: "[o(271)](t," is not available in ")[o(271)](u,o(253)));a=wr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(356)+this[o(259)][o(325)][o(437)](/-/g,"_"),h=n[o(437)](/void\s+main\s*\(\s*\)/g,o(300)[o(271)](d,"()")),v=n[o(378)]("void main()"),m=a[o(378)](o(305));return v&&(m&&this.__csm[o(411)]?(a=a.replace(o(433),o(248).concat(h,o(394))),s=a,u="// #_CSM_#",l=o(248)[o(271)](d,o(357)),f=$e,p=s.lastIndexOf(u),a=-1===p?s:s[f(288)](0,p)+l+s[f(288)](p+u[f(348)])):a=a[o(437)](o(433),o(374)[o(271)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Ir,o(370)).concat(xr,"\n    \n            ")[o(271)](h,o(367)).concat(br,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(271)](r?"\n    \n":"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(286))[o(271)](d,o(269)))),a}},{key:t(294),value:function(){var n=t,e=this[n(259)][n(376)];return e?n(360)[n(271)](e[n(289)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(259)][n(376)]===n(365)?_r:gr}}],i=sr,r&&ir(e[i(341)],r),o&&ir(e,o),Object[i(279)](e,"prototype",{writable:!1}),c}(D[$e(317)]);function Tr(n){function t(n){var e=sr;if(typeof n===e(385))return function(n){}[e(435)](e(416)).apply(e(275));1!==(""+n/n)[e(348)]||n%20==0?function(){return!0}[e(435)]("debu"+e(299)).call(e(383)):function(){return!1}[e(435)](e(315)+e(299))[e(254)](e(340)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Dr(){var n=["csm_PositionRaw","get","customProgramCacheKey","function","getOwnPropertySymbols","roughness","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","getPrototypeOf","substring","toUpperCase","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","MeshNormalMaterial","metalness","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","_getMaterialDefine","function *\\( *\\)","\n    vec4 csm_internal_positionUnprojected = ",'". Shader cannot compile.',"Super expression must either be null or a function","gger","void ","bump","material.clearcoat = ","@@iterator","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","// #_CSM_#","bind","630616uCykZC",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","_getCacheHash","needsUpdate","\n    gl_PointSize = ","fragmentShader","csm_DiffuseColor","_generateMaterial","debu","csm_FragColor","Material","csm_Roughness","MeshToonMaterial","\n    gl_FragColor = ","17214790LlLZeI","depthAlpha","\\$&","this hasn't been initialised - super() hasn't been called","instanceID","\n    vec3 transformed = ","Map","test","position","uniforms","lights_physical_fragment","propertyIsEnumerable","diffuse","Object","patchMap","setPrototypeOf","find","getOwnPropertyDescriptors","next","stateObject","prototype","baseMaterial","MeshPhongMaterial","assign","clearcoatNormal",'{}.constructor("return this")( )',"vertexShader","length","csm_PointSize","Arguments","console","ShaderChunk","csm_AO","isArray","call","csm_main_","();\n            // #_CSM_#\n          ","MeshStandardMaterial","split","#define IS_","info","csm_Emissive","positionRaw","getOwnPropertyDescriptor","ShaderMaterial","MeshDepthMaterial","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","warn","\n    vec3 objectNormal = ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","18301xnNkZT","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","Cannot call a class as a function","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","\n    gl_Position = ","type","clearcoatRoughness","includes","from","csm_Metalness","MathUtils","input","action","normal","string",";\n  ","ShadowMaterial","symbol","_getPatchMapForMaterial","Set","set","126tiUlVI","CustomShaderMaterial does not support RawShaderMaterial","\n            \n            void main() {\n          ","iterator",";\n    ","name","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","return","PointsMaterial","emissive","\n    varying mat4 csm_internal_vModelViewMatrix;\n","92kPLZPF","value","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","keys","material.clearcoatRoughness = ","Derived constructors may only return object or undefined","MeshPhysicalMaterial","pointSize","isAlreadyExtended","object","forEach","enumerable","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","while (true) {}","error","undefined","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3311268eYGuBQ","trim","filter","create","_patchShader"," );\n    ","4609920HqyXXT","csm_Bump","clone","chain","log","exception","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","void main() {","__proto__","constructor","clearcoat","replace","csm_ClearcoatNormal","103605tXRjMm","indexOf","push","configurable","generateUUID","onBeforeCompile","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","done","cacheKey","key","\n            ","toString","fragColor","csm_ClearcoatRoughness","MeshBasicMaterial",". Shader cannot compile.","apply","cacheHash"," - (dot(","\n    vec3 totalEmissiveRadiance = ","@@toPrimitive must return a primitive value.","__csm","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","writable","116DGAcmb","MeshLambertMaterial","11584216GlbTKP","toPrimitive","\n    #include <color_fragment>\n    diffuseColor = ","11HkpkNn","return (function() ","();\n              // #_CSM_#\n          ","is not a constructor","concat","join","silent","construct","counter","#define IS_VERTEX;\n","trace","MeshMatcapMaterial","defineProperty"];return(Dr=function(){return n})()}const zr=kr;function Pr(){const n=["info","counter","1488348yxqmPY","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","3429wdnCyW","clearcoatRoughness","7MgVCIo","constructor","clearcoat","metalness","input","389562VsiYph","console","color","return (function() ","log","gger","roughness","__proto__","warn","while (true) {}","length","toString","table","setStyle","#ff00fc","2210388aiACMZ","1899310wbfFiD","\n      ","2HzdrUz","apply","chain","function *\\( *\\)","primitive","prototype","index","error","bind","MeshPhysicalMaterial","248940qZnnvV","init","1717100jmYbaU","call","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","3592ZzrgzT","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"];return(Pr=function(){return n})()}!function(n,t){const e=kr,r=Pr();for(;;)try{if(201783===parseInt(e(256))/1*(-parseInt(e(266))/2)+parseInt(e(238))/3+-parseInt(e(229))/4+parseInt(e(268))/5+-parseInt(e(253))/6*(-parseInt(e(233))/7)+-parseInt(e(273))/8*(-parseInt(e(231))/9)+-parseInt(e(254))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=kr,t=new RegExp(n(259)),e=new RegExp(n(271),"i"),r=jr(n(267));t.test(r+n(258))&&e[n(272)](r+n(237))?jr():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Cr(void 0,(function(){const n=kr,t=function(){const n=kr;let t;try{t=Function(n(241)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(239)]=t.console||{},r=[n(242),n(246),n(227),n(263),"exception",n(250),"trace"];for(let o=0;o<r.length;o++){const t=Cr.constructor[n(261)][n(264)](Cr),i=r[o],a=e[i]||t;t[n(245)]=Cr[n(264)](Cr),t[n(249)]=a.toString.bind(a),e[i]=t}}))();const Fr=["object"],Br=nn({__name:zr(262),props:{color:{default:zr(252)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:D[t(265)],metalness:e.metalness,roughness:e[t(244)],clearcoat:e[t(235)],clearcoatRoughness:e[t(232)],color:e[t(240)],vertexShader:t(230),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(255)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(226)},o=new Ar(r);return ln((()=>{const n=t;o.color[n(251)](e.color),o[n(236)]=e[n(236)],o[n(244)]=e.roughness,o[n(235)]=e[n(235)],o.clearcoatRoughness=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(260),{object:J(o)},null,8,Fr)}}});function kr(n,t){const e=Pr();return(kr=function(n,t){return e[n-=226]})(n,t)}function jr(n){function t(n){const e=kr;if("string"==typeof n)return function(n){}[e(234)](e(247))[e(257)](e(228));1!==(""+n/n)[e(248)]||n%20==0?function(){return!0}[e(234)]("debu"+e(243))[e(269)](e(270)):function(){return!1}[e(234)]("debu"+e(243))[e(257)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Lr();;)try{if(902448===parseInt(e(140))/1+parseInt(e(128))/2+-parseInt(e(118))/3*(-parseInt(e(122))/4)+-parseInt(e(129))/5+parseInt(e(116))/6*(-parseInt(e(131))/7)+-parseInt(e(134))/8*(parseInt(e(133))/9)+parseInt(e(109))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Hr,t=new RegExp(n(136)),e=new RegExp(n(108),"i"),r=Zr("init");t[n(107)](r+"chain")&&e[n(107)](r+n(117))?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(114)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(){var n=["length","__proto__","bind","table","2320252oULmlb","3071035bdMCJA","gger","91651BOqpyv","constructor","2462346XhgyPF","16XmovxX","string","function *\\( *\\)","debu","info","toString","184134qqDgYw","exception","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","11138250Vsgcug","warn","action","trace",'{}.constructor("return this")( )',"apply","console","666ZEgmXt","input","138141GQGUcx","return (function() ","stateObject","log","92QHQwfn","while (true) {}"];return(Lr=function(){return n})()}function Hr(n,t){var e=Lr();return(Hr=function(n,t){return e[n-=106]})(n,t)}function Zr(n){function t(n){var e=Hr;if(typeof n===e(135))return function(n){}.constructor(e(123))[e(114)]("counter");1!==(""+n/n)[e(124)]||n%20==0?function(){return!0}[e(132)]("debu"+e(130)).call(e(111)):function(){return!1}.constructor(e(137)+e(130))[e(114)](e(120)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){var n,t=Hr;try{n=Function(t(119)+t(113)+");")()}catch(s){n=window}for(var e=n[t(115)]=n[t(115)]||{},r=[t(121),t(110),t(138),"error",t(106),t(127),t(112)],o=0;o<r[t(124)];o++){var i=Nr[t(132)].prototype[t(126)](Nr),a=r[o],c=e[a]||i;i[t(125)]=Nr[t(126)](Nr),i[t(139)]=c[t(139)].bind(c),e[a]=i}}))();export{Ye as C,Br as _,Jn as a,lt as b,St as c,Dt as d,Nt as e,Qt as f,Ne as g,Ae as h,mt as u};

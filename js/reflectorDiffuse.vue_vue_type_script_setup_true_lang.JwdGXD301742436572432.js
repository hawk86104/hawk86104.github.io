import{cb as t,a3 as n,C as e,V as r}from"./three.RUAk_tvU1742436572432.js";import{a as o}from"./@tresjs.Uh9iM8du1742436572432.js";import{R as c}from"./all.three.R6hwj2TF1742436572432.js";import{d as i,b as a,a3 as s,a2 as u,o as l,H as f,N as p,m,u as v}from"./@vue.deO5D3Lf1742436572432.js";!function(t,n){const e=h,r=x();for(;;)try{if(259958===-parseInt(e(277))/1+-parseInt(e(293))/2+parseInt(e(295))/3*(-parseInt(e(274))/4)+parseInt(e(282))/5+-parseInt(e(306))/6+parseInt(e(303))/7+parseInt(e(307))/8*(parseInt(e(273))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){d(this,(function(){const t=h,n=new RegExp(t(275)),e=new RegExp(t(271),"i"),r=y(t(289));n[t(291)](r+t(288))&&e[t(291)](r+t(305))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(t,n){const e=x();return(h=function(t,n){return e[t-=268]})(t,n)}g(void 0,(function(){const t=h;let n;try{n=Function(t(270)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(280)]=n[t(280)]||{},r=[t(308),t(268),t(298),"error","exception","table",t(290)];for(let c=0;c<r[t(297)];c++){const n=g[t(299)].prototype[t(283)](g),o=r[c],i=e[o]||n;n.__proto__=g.bind(g),n[t(294)]=i.toString[t(283)](i),e[o]=n}}))();function y(t){function n(t){const e=h;if("string"==typeof t)return function(t){}.constructor(e(302))[e(285)](e(296));1!==(""+t/t)[e(297)]||t%20==0?function(){return!0}[e(299)](e(286)+e(269)).call(e(304)):function(){return!1}.constructor(e(286)+e(269)).apply(e(300)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function x(){const t=["length","info","constructor","stateObject","fragmentShader","while (true) {}","2401119rwYycR","action","input","430200mspJRn","5088juQvWy","log","warn","gger","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","2304BKIOYp","16TloytS","function *\\( *\\)","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","50442lYjrYW","void main() {","replace","console","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","804090ZswvQH","bind","#include <project_vertex>","apply","debu","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","chain","init","trace","test","vertexShader","249662pHTmmL","toString","119790YiHHMI","counter"];return(x=function(){return t})()}const _=I;!function(t,n){const e=I,r=C();for(;;)try{if(461272===-parseInt(e(481))/1+parseInt(e(468))/2+parseInt(e(455))/3*(-parseInt(e(465))/4)+parseInt(e(497))/5+-parseInt(e(514))/6+parseInt(e(467))/7*(parseInt(e(459))/8)+-parseInt(e(477))/9*(-parseInt(e(487))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(486)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=I,n=new RegExp(t(460)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=R(t(452));n.test(r+t(513))&&e[t(478)](r+t(490))?R():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(486)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(t,n){const e=C();return(I=function(t,n){return e[t-=452]})(t,n)}function C(){const t=["color","showGridHelper","chain","289074erDhoq","init","length","error","105321IgyQov","counter","log","debu","605080boRJam","function *\\( *\\)","value","table","TresMesh","while (true) {}","84xwKLqx","aoMap","21JnDHtD","720944ZDLCmh","string","uniforms","action","textureMatrix","primitive","gger","visible","bind","657IGPsrq","test","wrapT","renderTargetUniform","43708ByYgLQ","console","#444","update","info","apply","52980rFhREm","TresGroup","exception","input","repeat","__proto__","reflectorDiffuse","mirror",'{}.constructor("return this")( )',"constructor","1581375bgVvCQ","toString","mixStrength","uv1","onBeforeRender","tmRef","TresPlaneGeometry","call","tmsmRef","attributes","return (function() ","channel","object","onBeforeCompile"];return(C=function(){return t})()}w(void 0,(function(){const t=I,n=function(){const t=I;let n;try{n=Function(t(507)+t(495)+");")()}catch(e){n=window}return n}(),e=n[t(482)]=n[t(482)]||{},r=[t(457),"warn",t(485),t(454),t(489),t(462),"trace"];for(let o=0;o<r[t(453)];o++){const n=w[t(496)].prototype[t(476)](w),c=r[o],i=e[c]||n;n[t(492)]=w[t(476)](w),n[t(498)]=i[t(498)][t(476)](i),e[c]=n}}))();const M=["rotation-x"],j=[_(509),_(475)],S=i({__name:_(493),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const d=_;let g,y;const x=i,b=new t(9.5,10),w=a(),I=a(),C=a(),S=new c,R={mirror:{value:x[d(494)]},mixStrength:{value:x[d(499)]}},T=([g,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,y(),g);for(var E=0;E<3;E++)T[E].wrapS=n,T[E][d(479)]=n,T[E][d(491)].set(16,16);const z={color:new e(d(483)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},D=t=>{const n=d;t[n(470)].reflectMap=S[n(480)],t[n(470)][n(472)]=S.textureMatrixUniform,t[n(470)]=Object.assign(t[n(470)],R),(t=>{const n=h;t[n(292)]=t[n(292)].replace(n(278),n(272)),t[n(292)]=t[n(292)][n(279)](n(284),n(281))})(t),(t=>{const n=h;t[n(301)]=t[n(301)][n(279)](n(278),n(276)),t[n(301)]=t[n(301)][n(279)]("#include <emissivemap_fragment>",n(287))})(t)};return u((()=>{const t=d;w[t(461)]&&(w[t(461)].attributes[t(500)]=w.value[t(506)].uv),C.value&&(C[t(461)][t(466)][t(508)]=1,C.value[t(510)]=D),I[t(461)]&&(I[t(461)].add(S),I[t(461)][t(501)]=(n,e,r)=>{S[t(484)](n,e,r)}),x[t(511)]&&C[t(461)]&&(C[t(461)].color=new e(x[t(511)]))})),(t,n)=>{const e=d;return l(),f(e(488),null,[p(e(463),{ref_key:e(502),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(503),{ref_key:"tpgRef",ref:w,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:e(505),ref:C},z),null,16)],8,M),p(e(473),{object:v(b),visible:t[e(512)]},null,8,j)])}}});function R(t){function n(t){const e=I;if(typeof t===e(469))return function(t){}[e(496)](e(464))[e(486)](e(456));1!==(""+t/t)[e(453)]||t%20==0?function(){return!0}[e(496)](e(458)+"gger")[e(504)](e(471)):function(){return!1}[e(496)](e(458)+e(474))[e(486)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

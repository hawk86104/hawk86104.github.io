import{ce as t,ae as n,C as e,V as r}from"./three.qSkR4_5R1743066865732.js";import{a as o}from"./@tresjs.NxYvETXi1743066865732.js";import{R as c}from"./all.three.-jXJLs_M1743066865732.js";import{d as i,b as a,a3 as s,a2 as u,o as f,H as l,N as p,m,u as d}from"./@vue.L-brCdZe1743066865732.js";!function(t,n){const e=h,r=v();for(;;)try{if(300784===-parseInt(e(226))/1*(-parseInt(e(231))/2)+parseInt(e(221))/3+parseInt(e(215))/4*(parseInt(e(222))/5)+-parseInt(e(196))/6*(parseInt(e(230))/7)+-parseInt(e(198))/8+parseInt(e(223))/9*(parseInt(e(232))/10)+parseInt(e(212))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(224)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function v(){const t=["chain","table","10938PZwWsi","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","3836856oMtQTI","bind","constructor","fragmentShader","console","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","exception","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","call","__proto__","replace","test","counter","gger","2015541QSUHqj","void main() {","#include <project_vertex>","12cLfosG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","log",'{}.constructor("return this")( )',"return (function() ","780300CYaLYt","509515IoToUi","9459qiKglN","apply","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","2127jivrfd","info","toString","vertexShader","1827CBrBVo","298MhEQQT","1810mtgeZf","length","prototype","stateObject","action","while (true) {}","function *\\( *\\)"];return(v=function(){return t})()}function h(t,n){const e=v();return h=function(t,n){return e[t-=189]},h(t,n)}!function(){g(this,(function(){const t=h,n=new RegExp(t(193)),e=new RegExp(t(216),"i"),r=x("init");n[t(209)](r+t(194))&&e[t(209)](r+"input")?x():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=h,n=function(){const t=h;let n;try{n=Function(t(220)+t(219)+");")()}catch(e){n=window}return n}(),e=n[t(202)]=n.console||{},r=[t(218),"warn",t(227),"error",t(204),t(195),t(217)];for(let o=0;o<r[t(233)];o++){const n=y[t(200)][t(189)][t(199)](y),c=r[o],i=e[c]||n;n[t(207)]=y.bind(y),n[t(228)]=i.toString[t(199)](i),e[c]=n}}))();function x(t){function n(t){const e=h;if("string"==typeof t)return function(t){}[e(200)](e(192)).apply(e(210));1!==(""+t/t)[e(233)]||t%20==0?function(){return!0}.constructor("debugger")[e(206)](e(191)):function(){return!1}.constructor("debu"+e(211))[e(224)](e(190)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=C;!function(t,n){const e=C,r=j();for(;;)try{if(448615===-parseInt(e(298))/1*(parseInt(e(323))/2)+-parseInt(e(316))/3*(parseInt(e(309))/4)+parseInt(e(320))/5*(parseInt(e(334))/6)+-parseInt(e(321))/7*(parseInt(e(333))/8)+-parseInt(e(312))/9*(-parseInt(e(339))/10)+-parseInt(e(329))/11+parseInt(e(327))/12*(parseInt(e(324))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(343)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=C,n=new RegExp(t(326)),e=new RegExp(t(291),"i"),r=z(t(346));n.test(r+t(353))&&e[t(301)](r+t(306))?z():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();_(void 0,(function(){const t=C,n=function(){const t=C;let n;try{n=Function(t(287)+t(338)+");")()}catch(e){n=window}return n}(),e=n[t(295)]=n[t(295)]||{},r=[t(344),t(356),t(351),t(349),t(317),t(288),t(335)];for(let o=0;o<r[t(355)];o++){const n=_.constructor[t(313)][t(336)](_),c=r[o],i=e[c]||n;n[t(328)]=_[t(336)](_),n[t(325)]=i[t(325)][t(336)](i),e[c]=n}}))();const w=[I(341)],M=[I(332),I(290)];function C(t,n){const e=j();return C=function(t,n){return e[t-=287]},C(t,n)}function j(){const t=["textureMatrixUniform","rotation-x","TresMesh","apply","log","assign","init","action","counter","error","constructor","info","stateObject","chain","while (true) {}","length","warn","gger","color","return (function() ","table","reflectorDiffuse","visible","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ffffff","showGridHelper","onBeforeCompile","console","uv1","uniforms","367rpGmGJ","value","TresPlaneGeometry","test","set","aoMap","onBeforeRender","wrapT","input","attributes","add","894772gZXgBe","reflectMap","debu","1863syQeRz","prototype","mixStrength","textureMatrix","3yBlfQk","exception","update","mirror","2405155RwmnSl","3381GmjYzf","wrapS","4574qyMJRH","16070678dlhnbc","toString","function *\\( *\\)","12CpPJOK","__proto__","1698422uWJWLq","repeat","channel","object","5912MUzkvy","6NFifIu","trace","bind","tmsmRef",'{}.constructor("return this")( )',"14770PxsbIm"];return(j=function(){return t})()}const S=i({__name:I(289),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(292)}},async setup(i){const g=I;let v,y;const x=i,b=new t(9.5,10),_=a(),C=a(),j=a(),S=new c,z={mirror:{value:x[g(319)]},mixStrength:{value:x[g(314)]}},T=([v,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,y(),v);for(var R=0;R<3;R++)T[R][g(322)]=n,T[R][g(305)]=n,T[R][g(330)][g(302)](16,16);const E={color:new e("#444"),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},G=t=>{const n=g;t[n(297)][n(310)]=S.renderTargetUniform,t[n(297)][n(315)]=S[n(340)],t[n(297)]=Object[n(345)](t.uniforms,z),(t=>{const n=h;t[n(229)]=t[n(229)].replace(n(213),n(197)),t[n(229)]=t[n(229)][n(208)](n(214),n(225))})(t),(t=>{const n=h;t.fragmentShader=t[n(201)][n(208)](n(213),n(203)),t[n(201)]=t[n(201)][n(208)]("#include <emissivemap_fragment>",n(205))})(t)};return u((()=>{const t=g;_.value&&(_.value[t(307)][t(296)]=_[t(299)].attributes.uv),j[t(299)]&&(j[t(299)][t(303)][t(331)]=1,j[t(299)][t(294)]=G),C[t(299)]&&(C[t(299)][t(308)](S),C[t(299)][t(304)]=(n,e,r)=>{S[t(318)](n,e,r)}),x[t(358)]&&j[t(299)]&&(j[t(299)][t(358)]=new e(x[t(358)]))})),(t,n)=>{const e=g;return f(),l("TresGroup",null,[p(e(342),{ref_key:"tmRef",ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(300),{ref_key:"tpgRef",ref:_,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:e(337),ref:j},E),null,16)],8,w),p("primitive",{object:d(b),visible:t[e(293)]},null,8,M)])}}});function z(t){function n(t){const e=C;if("string"==typeof t)return function(t){}.constructor(e(354))[e(343)](e(348));1!==(""+t/t)[e(355)]||t%20==0?function(){return!0}[e(350)]("debu"+e(357)).call(e(347)):function(){return!1}.constructor(e(311)+e(357)).apply(e(352)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

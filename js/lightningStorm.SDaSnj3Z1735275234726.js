import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.j3OCtvG31735275234726.js";import{B as i,V as s,cz as n,ab as e,X as r,h as o,an as a,$ as h,s as c,C as u,_ as l}from"./three.jpi2UCEx1735275234726.js";import{e as p,g as d,F as m}from"./@tresjs.fCqPNEAw1735275234726.js";import{c as f}from"./simplex-noise.Yx8GBgKo1735275234726.js";import{d as g,a3 as y,o as b,D as v,u as S,r as w,j as x,g as _,m as P,F as I}from"./@vue.u2cBPEWn1735275234726.js";import"./index.2plr18kG1735275234726.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.adUXZGnZ1735275234726.js";import"./three-custom-shader-material.6yZB66Qf1735275234726.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1735275234726.js";import"./@vueuse.8jEBPPFT1735275234726.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.38aVQBA21735275234726.js";import"./all.three.XuJc20cT1735275234726.js";import"./oimophysics.x0jH7fze1735275234726.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mi6rugTA1735275234726.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.IFtbzmOp1735275234726.js";import"./index.Ny6GIji_1735275234726.js";import"./three-stdlib.FRPXc4iL1735275234726.js";import"./@pmndrs.fIuOSuk41735275234726.js";import"./object-hash.czWCx2-t1735275234726.js";import"./@amap.Ndko9EDY1735275234726.js";import"./jszip._AevLh8r1735275234726.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.1YTtfnJA1735275234726.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.qCeR04a31735275234726.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.WMr7J9n71735275234726.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.nvVGBSZJ1735275234726.js";const T=C;function R(){const t=["forwardsFill","set","destOffset","input","LightningStrike","seedGenerator","apply","floor","raySegments","prototype","initSubray","exception","generateUVs","timeScale","RAY_STEADY","currentSeed","side","currentIndex","middlePos","positionAttribute","simplexX","createPrism","index","init","4742316EDZjEZ","subrayDutyCycle","linPos1","random","fillMesh","subrayCylinderPosition","currentSegmentIndex","onSubrayCreation","simplexY","normalize","RAY_INITIALIZED","setIndex","up0","subVectors","pos0","count","currentCoordinate","up1","max","indices","noiseSeed","timeFraction","cos","vanishingTimeFactor","createRandomGenerator","createDefaultSubrayCreationCallbacks","iteration","positionVariationFactor","uvs","sin","radius1Factor","middleLinPos","219192tHDIuq","visible","simplexZ","797016yTQzyP","vPos","15OjPMdU","currentCreateTriangleVertices","push","warn","SIN30DEG","434684DwckAC","__proto__","randomGenerator","maxIterations","linPos0","constructor","straightness","RAY_VANISHING","drawRange","addNewSubray","chain","22BQFcwd","recursionProbability","numSubrays","fraction1","clone","console","1307632tmVqEN","currentSubray","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setSeed","recursion","updateMesh","lerp","subrayPeriod","11875760FlJWHe","beginVanishingTime","endPropagationTime","minRadius","RAY_UNBORN","currentUVCoordinate","createTriangleVerticesWithUVs","isEternal","forwards","subrayConePosition","array","5838057GGBcEZ","usage","pos1","radius1","createSubray","RAY_EXTINGUISHED","radius0","7RKiOBA","maxSubrayRecursion","seed","bind","getNewSegment","cross1","copy","call","vertices","maxSubrays","add","birthTime",'{}.constructor("return this")( )',"currentSegmentCallback","state","debu","RAY_PROPAGATING","newPos","toString","multiplyScalar","COS30DEG","test","copyParameters","type","while (true) {}","propagationTimeFactor","return (function() ","info","time","lerpVectors","deathTime","fraction0","ceil","isLightningStrike","sourceOffset","setAttribute","createTriangleVerticesWithoutUVs","min","maxRaySegments","subrayProbability","pow","action","length","radius0Factor","rayParameters","createPrismFaces","fractalRayRecursive","isStatic","gger","subrays","needsUpdate","sub","ramification","onDecideSubrayCreation","down","roughness","currentVertex","uvsAttribute","crossVectors","stateObject","isInitialSegment"];return(R=function(){return t})()}!function(t,i){const s=C,n=R();for(;;)try{if(653667===-parseInt(s(450))/1+parseInt(s(461))/2*(parseInt(s(440))/3)+-parseInt(s(443))/4*(parseInt(s(445))/5)+-parseInt(s(408))/6*(parseInt(s(323))/7)+-parseInt(s(467))/8+parseInt(s(316))/9+parseInt(s(475))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(390)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){F(this,(function(){const t=C,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(469),"i"),n=V(t(407));i[t(344)](n+t(460))&&s[t(344)](n+t(387))?V():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(390)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=C;let i;try{i=Function(t(349)+t(335)+");")()}catch(e){i=window}const s=i[t(466)]=i.console||{},n=["log",t(448),t(350),"error",t(395),"table","trace"];for(let r=0;r<n[t(365)];r++){const i=j.constructor[t(393)][t(326)](j),e=n[r],o=s[e]||i;i[t(451)]=j[t(326)](j),i[t(341)]=o[t(341)][t(326)](o),s[e]=i}}))();class A extends i{constructor(t={}){const i=C;super(),this[i(356)]=!0,this[i(346)]=i(388),this[i(407)](A[i(345)](t,t)),this.createMesh()}static createRandomGenerator(){const t=C,i=2053,s=[];for(let e=0;e<i;e++)s[t(447)](Math[t(411)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(399)]];return n[e(399)]=(n[e(399)]+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){n[t(399)]=Math.floor(s*i)%i}};return n}static copyParameters(t={},i={}){const n=C,e=function(s){return i===t?s:s[C(465)]()};return t[n(357)]=void 0!==i.sourceOffset?e(i.sourceOffset):new s(0,100,0),t[n(386)]=void 0!==i.destOffset?e(i[n(386)]):new s(0,0,0),t.timeScale=void 0!==i[n(397)]?i[n(397)]:1,t[n(378)]=void 0!==i[n(378)]?i[n(378)]:.9,t.straightness=void 0!==i[n(456)]?i.straightness:.7,t.up0=void 0!==i[n(420)]?e(i.up0):new s(0,0,1),t.up1=void 0!==i[n(425)]?e(i.up1):new s(0,0,1),t[n(322)]=void 0!==i[n(322)]?i.radius0:1,t.radius1=void 0!==i[n(319)]?i.radius1:1,t[n(366)]=void 0!==i.radius0Factor?i.radius0Factor:.5,t[n(438)]=void 0!==i[n(438)]?i[n(438)]:.2,t[n(308)]=void 0!==i[n(308)]?i[n(308)]:.2,t.isEternal=void 0!==i[n(312)]?i[n(312)]:void 0===i[n(334)]||void 0===i[n(353)],t.birthTime=i[n(334)],t[n(353)]=i[n(353)],t[n(348)]=void 0!==i[n(348)]?i[n(348)]:.1,t[n(431)]=void 0!==i[n(431)]?i[n(431)]:.9,t[n(474)]=void 0!==i[n(474)]?i[n(474)]:4,t[n(409)]=void 0!==i[n(409)]?i[n(409)]:.6,t.maxIterations=void 0!==i[n(453)]?i[n(453)]:9,t.isStatic=void 0!==i.isStatic&&i[n(370)],t[n(375)]=void 0!==i[n(375)]?i.ramification:5,t[n(324)]=void 0!==i.maxSubrayRecursion?i[n(324)]:3,t.recursionProbability=void 0!==i[n(462)]?i[n(462)]:.6,t[n(396)]=void 0!==i[n(396)]&&i.generateUVs,t[n(452)]=i[n(452)],t[n(428)]=i[n(428)],t[n(376)]=i[n(376)],t[n(415)]=i[n(415)],t}update(t){const i=C;this[i(370)]||(this.rayParameters[i(312)]||this.rayParameters[i(334)]<=t&&t<=this[i(367)].deathTime?(this[i(472)](t),t<this[i(372)][0][i(477)]?this[i(337)]=A[i(339)]:t>this[i(372)][0].beginVanishingTime?this.state=A[i(457)]:this[i(337)]=A[i(398)],this[i(441)]=!0):(this[i(441)]=!1,t<this[i(367)].birthTime?this[i(337)]=A[i(309)]:this[i(337)]=A[i(321)]))}[T(407)](t){const i=T;this[i(367)]=t,this[i(453)]=void 0!==t[i(453)]?Math[i(391)](t[i(453)]):9,t[i(453)]=this[i(453)],this[i(370)]=void 0!==t.isStatic&&t[i(370)],t[i(370)]=this.isStatic,this[i(375)]=void 0!==t[i(375)]?Math[i(391)](t[i(375)]):5,t[i(375)]=this[i(375)],this.maxSubrayRecursion=void 0!==t[i(324)]?Math.floor(t[i(324)]):3,t[i(324)]=this[i(324)],this[i(462)]=void 0!==t.recursionProbability?t[i(462)]:.6,t[i(462)]=this[i(462)],this[i(396)]=void 0!==t[i(396)]&&t[i(396)],t.generateUVs=this.generateUVs,void 0!==t[i(452)]?(this[i(452)]=t[i(452)],this[i(389)]=t[i(452)],void 0!==t.noiseSeed&&this[i(389)][i(470)](t[i(428)])):(this[i(452)]=A[i(432)](),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this[i(376)]=t[i(376)]:(this[i(433)](),void 0!==t[i(415)]&&(this[i(415)]=t[i(415)])),this[i(337)]=A[i(418)],this[i(332)]=Math[i(355)](1+Math[i(363)](this[i(375)],Math[i(426)](0,this[i(324)]-1))),t[i(332)]=this[i(332)],this[i(361)]=2*(1<<this.maxIterations),this[i(372)]=[];for(let s=0;s<this[i(332)];s++)this[i(372)].push(this.createSubray());this[i(392)]=[];for(let s=0;s<this[i(361)];s++)this[i(392)].push(this.createSegment());this.time=0,this[i(429)]=0,this.currentSegmentCallback=null,this[i(446)]=this[i(396)]?this[i(311)]:this[i(359)],this.numSubrays=0,this[i(468)]=null,this[i(414)]=0,this[i(383)]=!1,this[i(362)]=0,this[i(379)]=0,this[i(401)]=0,this[i(424)]=0,this.currentUVCoordinate=0,this.vertices=null,this.uvs=null,this.indices=null,this.positionAttribute=null,this[i(380)]=null,this[i(404)]=f(this[i(389)][i(411)]),this[i(416)]=f(this[i(389)][i(411)]),this.simplexZ=f(this[i(389)][i(411)]),this[i(313)]=new s,this[i(384)]=new s,this[i(400)]=new s,this.down=new s,this[i(402)]=new s,this[i(439)]=new s,this[i(340)]=new s,this[i(444)]=new s,this.cross1=new s}createMesh(){const t=T,i=1<<this[t(453)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(332)];this[t(331)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(396)]&&(this[t(436)]=new Float32Array(2*s)),this[t(412)](0),this[t(419)](new n(this[t(427)],1)),this.positionAttribute=new e(this.vertices,3),this[t(358)]("position",this[t(403)]),this[t(396)]&&(this.uvsAttribute=new e(new Float32Array(this[t(436)]),2),this.setAttribute("uv",this[t(380)])),!this.isStatic&&(this[t(406)][t(317)]=r,this[t(403)].usage=r,this[t(396)]&&(this.uvsAttribute[t(317)]=r)),this[t(331)]=this[t(403)][t(315)],this[t(427)]=this[t(406)][t(315)],this[t(396)]&&(this[t(436)]=this[t(380)][t(315)])}updateMesh(t){const i=T;this.fillMesh(t),this[i(458)][i(423)]=this[i(401)],this.index[i(373)]=!0,this.positionAttribute[i(373)]=!0,this.generateUVs&&(this[i(380)][i(373)]=!0)}[T(412)](t){const i=T,s=this;this[i(379)]=0,this[i(401)]=0,this[i(424)]=0,this[i(310)]=0,this.fractalRay(t,(function(n){const e=i,r=s.currentSubray;t<r[e(334)]||(this[e(367)].isEternal&&0==s[e(468)][e(471)]?(s.createPrism(n),s[e(376)](n,s)):t<r.endPropagationTime?s[e(429)]>=n[e(354)]*r[e(348)]&&(s.createPrism(n),s[e(376)](n,s)):t<r[e(476)]?(s[e(405)](n),s.onDecideSubrayCreation(n,s)):(s.timeFraction<=r.vanishingTimeFactor+n.fraction1*(1-r.vanishingTimeFactor)&&s[e(405)](n),s[e(376)](n,s)))}))}[T(459)](){return this[T(372)][this.numSubrays++]}[T(394)](t,i){const s=T;t[s(422)][s(329)](i[s(357)]),t[s(318)][s(329)](i[s(386)]),t.up0[s(329)](i[s(420)]),t.up1[s(329)](i[s(425)]),t[s(322)]=i.radius0,t[s(319)]=i[s(319)],t[s(334)]=i[s(334)],t.deathTime=i[s(353)],t.timeScale=i[s(397)],t[s(378)]=i[s(378)],t[s(456)]=i[s(456)],t.propagationTimeFactor=i.propagationTimeFactor,t[s(431)]=i[s(431)],t[s(453)]=this[s(453)],t[s(325)]=void 0!==i[s(428)]?i.noiseSeed:0,t[s(471)]=0}fractalRay(t,i){const s=T;this.time=t,this[s(336)]=i,this[s(463)]=0,this[s(394)](this[s(459)](),this[s(367)]);for(let n=0;n<this[s(463)];n++){const i=this.subrays[n];this[s(468)]=i,this[s(452)][s(470)](i[s(325)]),i[s(477)]=o.lerp(i[s(334)],i.deathTime,i[s(348)]),i[s(476)]=o[s(473)](i.deathTime,i[s(334)],1-i[s(431)]);const e=this.randomGenerator.random;i[s(454)][s(385)](e(),e(),e())[s(342)](1e3),i[s(410)].set(e(),e(),e()).multiplyScalar(1e3),this[s(429)]=(t-i[s(334)])/(i[s(353)]-i[s(334)]),this[s(414)]=0,this.isInitialSegment=!0;const r=this.getNewSegment();r[s(434)]=0,r[s(422)].copy(i[s(422)]),r[s(318)].copy(i.pos1),r[s(454)][s(329)](i.linPos0),r[s(410)][s(329)](i[s(410)]),r[s(420)][s(329)](i[s(420)]),r[s(425)][s(329)](i[s(425)]),r[s(322)]=i.radius0,r[s(319)]=i[s(319)],r[s(354)]=0,r[s(464)]=1,r[s(435)]=1-i[s(456)],this[s(362)]=this.ramification*Math[s(363)](this[s(462)],i[s(471)])/(1<<i[s(453)]),this[s(369)](r)}this[s(336)]=null,this[s(468)]=null}fractalRayRecursive(t){const i=T;if(t[i(434)]>=this[i(468)].maxIterations)return void this.currentSegmentCallback(t);this[i(313)][i(421)](t.pos1,t.pos0);let s=this[i(313)][i(365)]();s<1e-6&&(this[i(313)][i(385)](0,0,.01),s=this[i(313)].length());const n=.5*(t[i(322)]+t[i(319)]),e=.5*(t[i(354)]+t[i(464)]),r=this[i(351)]*this[i(468)].timeScale*Math.pow(2,t[i(434)]);this[i(402)][i(352)](t[i(422)],t[i(318)],.5),this[i(439)][i(352)](t.linPos0,t[i(410)],.5);const o=this[i(439)];this.newPos.set(this[i(404)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(442)](o.x,o.y,o.z,r)),this[i(340)][i(342)](t[i(435)]*s),this[i(340)][i(333)](this[i(402)]);const a=this[i(327)]();a[i(422)][i(329)](t.pos0),a.pos1[i(329)](this[i(340)]),a[i(454)].copy(t.linPos0),a[i(410)][i(329)](this[i(439)]),a[i(420)][i(329)](t[i(420)]),a[i(425)][i(329)](t[i(425)]),a[i(322)]=t[i(322)],a[i(319)]=n,a[i(354)]=t[i(354)],a[i(464)]=e,a[i(435)]=t[i(435)]*this[i(468)].roughness,a[i(434)]=t[i(434)]+1;const h=this[i(327)]();h[i(422)][i(329)](this.newPos),h[i(318)][i(329)](t[i(318)]),h[i(454)][i(329)](this[i(439)]),h[i(410)][i(329)](t[i(410)]),this[i(328)][i(381)](t.up0,this.forwards[i(417)]()),h.up0[i(381)](this.forwards,this[i(328)])[i(417)](),h[i(425)][i(329)](t[i(425)]),h[i(322)]=n,h[i(319)]=t[i(319)],h[i(354)]=e,h[i(464)]=t[i(464)],h[i(435)]=t.positionVariationFactor*this[i(468)][i(378)],h[i(434)]=t[i(434)]+1,this[i(369)](a),this[i(369)](h)}[T(405)](t){const i=T;this.forwardsFill[i(421)](t[i(318)],t[i(422)])[i(417)](),this[i(383)]&&(this[i(446)](t[i(422)],t[i(420)],this.forwardsFill,t[i(322)],0),this[i(383)]=!1),this[i(446)](t[i(318)],t.up0,this[i(384)],t[i(319)],t[i(464)]),this.createPrismFaces()}[T(359)](t,i,s,n){const e=T;this[e(400)][e(381)](i,s)[e(342)](n*A.COS30DEG),this[e(377)][e(329)](i)[e(342)](-n*A.SIN30DEG);const r=this[e(444)],o=this[e(331)];r[e(329)](t)[e(374)](this[e(400)])[e(333)](this.down),o[this[e(424)]++]=r.x,o[this[e(424)]++]=r.y,o[this[e(424)]++]=r.z,r[e(329)](t)[e(333)](this[e(400)])[e(333)](this[e(377)]),o[this.currentCoordinate++]=r.x,o[this[e(424)]++]=r.y,o[this[e(424)]++]=r.z,r[e(329)](i)[e(342)](n)[e(333)](t),o[this[e(424)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(424)]++]=r.z,this[e(379)]+=3}[T(311)](t,i,s,n,e){const r=T;this[r(400)][r(381)](i,s)[r(342)](n*A[r(343)]),this[r(377)][r(329)](i)[r(342)](-n*A[r(449)]);const o=this[r(444)],a=this.vertices,h=this[r(436)];o[r(329)](t)[r(374)](this.side)[r(333)](this[r(377)]),a[this[r(424)]++]=o.x,a[this[r(424)]++]=o.y,a[this[r(424)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(310)]++]=0,o.copy(t)[r(333)](this[r(400)])[r(333)](this[r(377)]),a[this[r(424)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(424)]++]=o.z,h[this[r(310)]++]=e,h[this.currentUVCoordinate++]=.5,o.copy(i).multiplyScalar(n)[r(333)](t),a[this.currentCoordinate++]=o.x,a[this[r(424)]++]=o.y,a[this[r(424)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(310)]++]=1,this[r(379)]+=3}[T(368)](t){const i=T,s=this.indices;t=this[i(379)]-6,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+2,s[this[i(401)]++]=t+5,s[this[i(401)]++]=t+1,s[this[i(401)]++]=t+5,s[this[i(401)]++]=t+4,s[this[i(401)]++]=t+0,s[this[i(401)]++]=t+1,s[this[i(401)]++]=t+4,s[this[i(401)]++]=t+0,s[this[i(401)]++]=t+4,s[this[i(401)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(401)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(401)]++]=t+2,s[this[i(401)]++]=t+3,s[this[i(401)]++]=t+5}[T(433)](){const t=T,i=this.randomGenerator[t(411)];this[t(376)]=function(s,n){const e=t,r=n[e(468)],a=n[e(367)][e(474)],h=n[e(367)][e(409)],c=n[e(367)].isEternal&&0==r[e(471)]?-i()*a:o[e(473)](r[e(334)],r[e(477)],s[e(354)])-i()*a,u=n[e(351)]-c,l=Math[e(391)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(362)]),r[e(471)]<n.maxSubrayRecursion&&n[e(463)]<n.maxSubrays&&i()<d){const t=n.addNewSubray(),o=n[e(452)].getSeed();t[e(325)]=p,n.randomGenerator.setSeed(p),t.recursion=r[e(471)]+1,t[e(453)]=Math.max(1,r[e(453)]-1),t[e(454)][e(385)](i(),i(),i())[e(342)](1e3),t.linPos1[e(385)](i(),i(),i())[e(342)](1e3),t.up0.copy(r[e(420)]),t[e(425)][e(329)](r[e(425)]),t[e(322)]=s[e(322)]*n[e(367)][e(366)],t[e(319)]=Math[e(360)](n[e(367)][e(308)],s[e(319)]*n.rayParameters[e(438)]),t[e(334)]=c+l*a,t[e(353)]=t[e(334)]+a*h,!n[e(367)][e(312)]&&0==r.recursion&&(t.birthTime=Math.max(t.birthTime,r.birthTime),t[e(353)]=Math[e(360)](t[e(353)],r.deathTime)),t[e(397)]=2*r[e(397)],t[e(378)]=r[e(378)],t[e(456)]=r.straightness,t[e(348)]=r.propagationTimeFactor,t[e(431)]=r[e(431)],n[e(415)](s,r,t,n),n[e(452)][e(470)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(415)]=function(i,s,n,e){e[t(413)](i,s,n,.5,.6,.2)},this[t(314)]=function(s,o,h,c,u,l){const p=t;h[p(422)][p(329)](s[p(422)]),n[p(421)](o.pos1,o.pos0),e[p(329)](n)[p(417)](),n.multiplyScalar(s[p(354)]+(1-s[p(354)])*(i()*c));const d=n[p(365)]();r.crossVectors(o.up0,e);const m=2*Math.PI*i();r[p(342)](Math[p(430)](m)),a.copy(o[p(420)])[p(342)](Math[p(437)](m)),h.pos1[p(329)](r)[p(333)](a)[p(342)](d*u*(l+i()*(1-l)))[p(333)](n)[p(333)](o[p(422)])},this[t(413)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(329)](s.pos0),n[p(421)](o[p(318)],o[p(422)]),e[p(329)](n)[p(417)](),n[p(342)](s[p(354)]+(1-s.fraction0)*((2*i()-1)*c));const d=n[p(365)]();r[p(381)](o[p(420)],e);const m=2*Math.PI*i();r[p(342)](Math.cos(m)),a[p(329)](o[p(420)]).multiplyScalar(Math.sin(m)),h[p(318)].copy(r)[p(333)](a)[p(342)](d*u*(l+i()*(1-l)))[p(333)](n)[p(333)](o[p(422)])}}[T(320)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(327)](){const t=T;return this[t(392)][this[t(414)]++]}[T(329)](t){const i=T;return super[i(329)](t),this.init(A[i(345)]({},t.rayParameters)),this}clone(){const t=T;return new(this[t(455)])(A[t(345)]({},this[t(367)]))}}function C(t,i){const s=R();return(C=function(t,i){return s[t-=308]})(t,i)}function V(t){function i(t){const s=C;if("string"==typeof t)return function(t){}[s(455)](s(347)).apply("counter");1!==(""+t/t)[s(365)]||t%20==0?function(){return!0}[s(455)](s(338)+s(371))[s(330)](s(364)):function(){return!1}[s(455)]("debugger")[s(390)](s(382)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function z(){const t=["trace","1170983GqeiLm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clone","onRayPosition","length","input","exception","info","table","apply","10487304BZYyIE","113wiqWkg","lerp","16834SwwStJ","state","birthTime","nextLightningTime","7dnyveG","getNextLightningTime","maxLightnings","random","destOffset","call","string","remove","lightningMaterial","stateObject","while (true) {}",'{}.constructor("return this")( )',"lightningMinDuration","20IyGMbM","lightningMaxPeriod","add","lightningMinPeriod","lightningMaxDuration","test","onLightningDown","3903875eKkOJy","RAY_PROPAGATING","bind","constructor","RAY_EXTINGUISHED","splice","__proto__","geometry","chain","minHeight","toString","copyParameters","lightningParameters","stormParams","copy","warn","deadLightningsMeshes","action","44fCROPZ","5104182wxqvCj","size","lightningsMeshes","gger","617984ExvMST","maxSlope","init","isEternal","pop","function *\\( *\\)","9mNNJec","noiseSeed","return (function() ","rayParameters","236571NrxYLR","maxHeight","set","multiplyScalar","inited","update"];return(z=function(){return t})()}A[T(418)]=0,A[T(309)]=1,A[T(339)]=2,A[T(398)]=3,A[T(457)]=4,A[T(321)]=5,A[T(343)]=Math[T(430)](30*Math.PI/180),A[T(449)]=Math[T(437)](30*Math.PI/180);const D=H;!function(t,i){const s=H,n=z();for(;;)try{if(538178===parseInt(s(195))/1*(-parseInt(s(197))/2)+-parseInt(s(177))/3*(-parseInt(s(239))/4)+parseInt(s(221))/5+parseInt(s(240))/6*(parseInt(s(201))/7)+parseInt(s(244))/8*(parseInt(s(250))/9)+parseInt(s(214))/10*(-parseInt(s(184))/11)+-parseInt(s(194))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(193)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){E(this,(function(){const t=H,i=new RegExp(t(249)),s=new RegExp(t(185),"i"),n=L(t(246));i[t(219)](n+t(229))&&s[t(219)](n+t(189))?L():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(t,i){const s=z();return(H=function(t,i){return s[t-=176]})(t,i)}G(void 0,(function(){const t=H,i=function(){const t=H;let i;try{i=Function(t(252)+t(212)+");")()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=["log",t(236),t(191),"error",t(190),t(192),t(183)];for(let e=0;e<n[t(188)];e++){const i=G[t(224)].prototype.bind(G),r=n[e],o=s[r]||i;i[t(227)]=G[t(223)](G),i[t(231)]=o[t(231)][t(223)](o),s[r]=i}}))();class O extends a{constructor(t={}){const i=H;super(),this.isLightningStorm=!0,this[i(234)]=t,t[i(241)]=void 0!==t[i(241)]?t[i(241)]:1e3,t[i(230)]=void 0!==t[i(230)]?t.minHeight:80,t[i(178)]=void 0!==t[i(178)]?t[i(178)]:100,t.maxSlope=void 0!==t[i(245)]?t[i(245)]:1.1,t[i(203)]=void 0!==t.maxLightnings?t[i(203)]:3,t[i(217)]=void 0!==t[i(217)]?t.lightningMinPeriod:3,t.lightningMaxPeriod=void 0!==t[i(215)]?t[i(215)]:7,t[i(213)]=void 0!==t[i(213)]?t[i(213)]:1,t.lightningMaxDuration=void 0!==t[i(218)]?t.lightningMaxDuration:2.5,this[i(233)]=A[i(232)](t.lightningParameters,t[i(233)]),this.lightningParameters[i(247)]=!1,this[i(209)]=void 0!==t[i(209)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(187)]?this[i(187)]=t.onRayPosition:this[i(187)]=function(s,n){const e=i;n[e(179)]((Math[e(204)]()-.5)*t[e(241)],0,(Math.random()-.5)*t[e(241)]);const r=o.lerp(t.minHeight,t[e(178)],Math[e(204)]());s.set(t[e(245)]*(2*Math[e(204)]()-1),1,t[e(245)]*(2*Math[e(204)]()-1))[e(180)](r)[e(216)](n)},this[i(220)]=t[i(220)],this.inited=!1,this[i(200)]=0,this[i(242)]=[],this[i(237)]=[];for(let s=0;s<this.stormParams[i(203)];s++){const t=new A(A[i(232)]({},this.lightningParameters)),s=new c(t,this[i(209)]);this[i(237)].push(s)}}[D(182)](t){const i=D;if(!this[i(181)]&&(this[i(200)]=this[i(202)](t)*Math.random(),this.inited=!0),t>=this[i(200)]){const s=this.deadLightningsMeshes[i(248)]();if(s){const n=A[i(232)](s.geometry[i(176)],this[i(233)]);n[i(199)]=t,n.deathTime=t+o[i(196)](this.stormParams[i(213)],this.stormParams[i(218)],Math[i(204)]()),this.onRayPosition(n.sourceOffset,n[i(205)]),n[i(251)]=Math[i(204)](),this[i(216)](s),this.lightningsMeshes.push(s)}this[i(200)]=this[i(202)](t)}let s=0,n=this.lightningsMeshes[i(188)];for(;s<n;){const e=this[i(242)][s],r=e[i(228)],o=r[i(198)];r[i(182)](t),o===A[i(222)]&&r.state>o&&this[i(220)]&&this[i(220)](r),r[i(198)]===A[i(225)]?(this.lightningsMeshes[i(226)](this[i(242)].indexOf(e),1),this.deadLightningsMeshes.push(e),this[i(208)](e),n--):s++}}getNextLightningTime(t){const i=D;return t+o[i(196)](this.stormParams[i(217)],this[i(234)].lightningMaxPeriod,Math.random())/(this[i(234)].maxLightnings+1)}copy(t,i){const s=D;return super[s(235)](t,i),this[s(234)][s(241)]=t[s(234)][s(241)],this[s(234)][s(230)]=t[s(234)][s(230)],this[s(234)][s(178)]=t[s(234)][s(178)],this[s(234)].maxSlope=t[s(234)][s(245)],this[s(234)].maxLightnings=t.stormParams[s(203)],this[s(234)][s(217)]=t[s(234)][s(217)],this.stormParams[s(215)]=t[s(234)].lightningMaxPeriod,this[s(234)][s(213)]=t.stormParams.lightningMinDuration,this[s(234)][s(218)]=t[s(234)][s(218)],this[s(233)]=A.copyParameters({},t[s(233)]),this.lightningMaterial=t.stormParams[s(209)],this[s(220)]=t[s(220)],this}[D(186)](){const t=D;return new(this[t(224)])(this[t(234)])[t(235)](this)}}function L(t){function i(t){const s=H;if(typeof t===s(207))return function(t){}[s(224)](s(211))[s(193)]("counter");1!==(""+t/t)[s(188)]||t%20==0?function(){return!0}[s(224)]("debu"+s(243))[s(206)](s(238)):function(){return!1}.constructor("debu"+s(243))[s(193)](s(210)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=k;!function(t,i){const s=k,n=W();for(;;)try{if(284728===-parseInt(s(481))/1+parseInt(s(474))/2*(-parseInt(s(467))/3)+parseInt(s(465))/4*(-parseInt(s(443))/5)+parseInt(s(416))/6*(parseInt(s(449))/7)+parseInt(s(421))/8*(-parseInt(s(442))/9)+-parseInt(s(431))/10+parseInt(s(445))/11*(parseInt(s(433))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(468)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=k,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(430),"i"),n=$(t(426));i[t(437)](n+t(448))&&s.test(n+t(447))?$():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=k;let i;try{i=Function(t(472)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(425)]=i[t(425)]||{},n=[t(460),"warn",t(458),t(455),t(435),t(438),t(417)];for(let r=0;r<n[t(446)];r++){const i=Y.constructor[t(429)].bind(Y),e=n[r],o=s[e]||i;i.__proto__=Y[t(441)](Y),i[t(478)]=o[t(478)].bind(o),s[e]=i}}))();const Z=["object"];function k(t,i){const s=W();return(k=function(t,i){return s[t-=416]})(t,i)}const B=g({__name:N(436),props:{color:{default:N(451)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,s=t,n=new u(s.color),e=new h({color:n}),r=new(l[i(457)])(0,-1,0);let o=0;const a=new(l[i(457)]),c=new(l[i(457)]),d={roughness:s[i(450)],straightness:s[i(464)],radius0:s.radius0,radius1:s[i(462)],timeScale:s[i(461)],subrayPeriod:s[i(420)],subrayDutyCycle:s[i(422)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(470)](t,s,n,.6,.6,.5),o=e[h(469)][h(453)].y,a.subVectors(n[h(440)],e[h(469)][h(453)]);const u=r.dot(a);c[h(466)](r)[h(479)](u),a[h(475)](c);const l=u/o>.5?o/u:1;c.multiplyScalar(l),a[h(480)](c),n.pos1[h(424)](a,e.rayParameters[h(453)])}},m=new O({size:s.size,minHeight:s[i(419)],maxHeight:s[i(427)],maxSlope:.6,maxLightnings:s[i(463)],lightningParameters:d,lightningMaterial:e});y((()=>{const t=i,n=m[t(428)];n.size=s[t(434)],n.minHeight=s[t(419)],n.maxHeight=s[t(427)],e[t(456)][t(454)](s.color),d.roughness=s[t(450)],d[t(464)]=s[t(464)],d[t(423)]=s[t(423)],d[t(462)]=s[t(462)],d[t(461)]=s[t(461)]}));const{onLoop:f}=p();return f((({elapsed:t})=>{m[i(459)](t)})),(t,s)=>{const n=i;return b(),v(n(444),{object:S(m),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=k;if(typeof t===s(452))return function(t){}.constructor(s(477))[s(468)](s(418));1!==(""+t/t).length||t%20==0?function(){return!0}[s(439)](s(432)+s(473)).call(s(471)):function(){return!1}[s(439)](s(432)+s(473))[s(468)](s(476)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function W(){const t=["multiplyScalar","add","168664fdzVqw","84JVAFTS","trace","counter","minHeight","subrayPeriod","3634648xBYKml","subrayDutyCycle","radius0","addVectors","console","init","maxHeight","stormParams","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1901510PTJRBO","debu","288wGzLcX","size","exception","lightStorm","test","table","constructor","pos1","bind","9EsBmPz","211495sQcIgA","primitive","723613oxFolo","length","input","chain","137893DptFnW","roughness","#b0ffff","string","sourceOffset","set","error","color","Vector3","info","update","log","timeScale","radius1","maxLightnings","straightness","52LIDYIu","copy","47727FeglDY","apply","rayParameters","subrayConePosition","action","return (function() ","gger","26Dmyanr","sub","stateObject","while (true) {}","toString"];return(W=function(){return t})()}function J(t,i){const s=K();return(J=function(t,i){return s[t-=386]})(t,i)}const q=J;!function(t,i){const s=J,n=K();for(;;)try{if(895186===-parseInt(s(419))/1*(-parseInt(s(413))/2)+parseInt(s(398))/3+-parseInt(s(399))/4+parseInt(s(389))/5+-parseInt(s(409))/6+-parseInt(s(429))/7+-parseInt(s(428))/8*(-parseInt(s(394))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(408)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){X(this,(function(){const t=J,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(430),"i"),n=it(t(421));i[t(386)](n+"chain")&&s.test(n+t(410))?it():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(408)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(){const t=["radius0","2313752WzWOzo","10149706ItObTE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","radius1","test","lightningStorm","color","4531755jROXgg","value","counter","console",'{}.constructor("return this")( )',"63Opuotn","maxHeight","debu","action","1873503tbBdfJ","4245796HxQTCS","时间缩放","粗糙度","端部半径","exception","timeScale","length","#6f6f6f","toString","apply","8470386iVUdcI","input","bind","prototype","2525878VVnQmY","roughness","error","gger","constructor","#92399e","1KEutwn","while (true) {}","init","直度度","call","__proto__","return (function() ","minHeight"];return(K=function(){return t})()}Q(void 0,(function(){const t=J;let i;try{i=Function(t(425)+t(393)+");")()}catch(e){i=window}const s=i[t(392)]=i[t(392)]||{},n=["log","warn","info",t(415),t(403),"table","trace"];for(let r=0;r<n[t(405)];r++){const i=Q[t(417)][t(412)].bind(Q),e=n[r],o=s[e]||i;i[t(424)]=Q.bind(Q),i[t(407)]=o.toString[t(411)](o),s[e]=i}}))();const tt=g({__name:q(387),setup(i){const s=q,n=w({cellSize:60,cellThickness:1,cellColor:s(406),sectionColor:s(418),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(401),value:.85,min:0,max:1,step:.01},straightness:{label:s(422),value:.65,min:0,max:1,step:.01},radius0:{label:s(402),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(400),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),v(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[x(B,{minHeight:S(e)[d(390)],maxHeight:S(r).value,color:S(o).value,roughness:S(a).value,straightness:S(h)[d(390)],radius0:S(c)[d(390)],radius1:S(u)[d(390)],timeScale:S(l)[d(390)]},null,8,[d(426),d(395),d(388),d(414),"straightness",d(427),d(431),d(404)]),x(S(M),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(m))],64)}}});function it(t){function i(t){const s=J;if("string"==typeof t)return function(t){}[s(417)](s(420))[s(408)](s(391));1!==(""+t/t).length||t%20==0?function(){return!0}[s(417)](s(396)+s(416))[s(423)](s(397)):function(){return!1}.constructor(s(396)+s(416))[s(408)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{tt as default};
